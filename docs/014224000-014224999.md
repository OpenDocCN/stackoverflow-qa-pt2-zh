# StackOverflow 问答 14224000-14224999

# python - numpy矢量化后opencv显示黑色图像

> ID：14224003
> 
> 赞同：2
> 
> 时间：2013-01-08T21:04:51.907
> 
> 标签：python, opencv, numpy

我正在尝试使用 np 的矢量化，但 imshow 显示的是黑色图像，如果我正确理解矢量化，它应该是白色的。我认为问题是输出类型，但我无法让它工作。

```
import numpy as np
import cv2
class Test():
    def run(self):        
        arr = np.zeros((25,25))
        arr[:]=255
        cv2.imshow('white',arr)
        flatarr = np.reshape(arr,25*25)
        vfunc = np.vectorize(self.func)
        #vfunc = np.vectorize(self.func,otypes=[np.int])#same effect
        flatres = vfunc(flatarr)
        shouldbewhite = np.reshape(flatres,(25,25))
        cv2.imshow('shouldbewhite',shouldbewhite)        
    def func(self,a):
        return 255
cv2.namedWindow('white',0)
cv2.namedWindow('shouldbewhite',0)
a = Test()
a.run()
cv2.waitKey(0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:33:50.957

从[文档](http://docs.opencv.org/modules/highgui/doc/user_interface.html#imshow)：

> 函数 imshow 在指定的窗口中显示图像。如果窗口是使用 CV_WINDOW_AUTOSIZE 标志创建的，则图像以其原始大小显示。否则，将缩放图像以适合窗口。该函数可以缩放图像，具体取决于其深度：
> 
> *   如果图像是 8 位无符号的，则按原样显示。
> *   如果图像是 16 位无符号或 32 位整数，则像素除以 256。即取值范围 [0,255*256] 映射到 [0,255]。
> *   如果图像是 32 位浮点，则像素值乘以 255。即取值范围 [0,1] 映射到 [0,255]。

如果您运行以下代码：

```
class Test():
    def run(self):        
        arr = np.zeros((25,25))
        arr[:]=255
        print arr.dtype
        flatarr = np.reshape(arr,25*25)
        vfunc = np.vectorize(self.func)
        flatres = vfunc(flatarr)
        print flatres.dtype
        shouldbewhite = np.reshape(flatres,(25,25))
        print shouldbewhite.dtype
    def func(self,a):
        return 255 
```

你会得到类似的东西：

```
float64
int32
int32 
```

所以你的第二种情况除以256，它是整数除法，它四舍五入为0。试试

```
vfunc = np.vectorize(self.func,otypes=[np.uint8]) 
```

并且您可能还想考虑将第一个数组替换为

```
arr = np.zeros((25,25), dtype='uint8') 
```

# php - 如果您有共享主机，是否可以在 ini 文件中关闭 display_errors？

> ID：14224006
> 
> 赞同：0
> 
> 时间：2013-01-08T21:04:59.190
> 
> 标签：php, security

（为什么我会收到警告说我的问题是主观的？）我试图在调试时阻止 PHP 错误消息显示到浏览器。我发现的两种方法是：1）

```
ini_set("display_errors", 0) 
```

和 2) 添加一个

```
php_flag display_errors Off 
```

在我的文档根目录的 .htaccess 文件中。ini_set 命令返回null，我上传后.htaccess 设置没有任何作用。我能够将错误定向到自定义错误处理函数，但我无法阻止它显示到屏幕上。

托管我网站的 ISP 无法帮助我解决这个问题。我认为在调试时我可能不得不忍受错误显示，但我希望那里的某个人可能有另一种抑制显示的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:16:06.097

从长远来看，可能不是您想要的，但作为临时解决方案可能有用。如果您在 PHP 函数调用前加上 @，它们将不会输出警告。

例子：

```
<?php
explode(":", $undefinedVariable); // will warn about undefined variable
@explode(":", $undefinedVariable); // will be silent

// It works also for array access etc.:
$foo = array('bar' => 5);
echo 10 * $foo['baz']; // warns
echo 10 * @$foo['baz']; // silent
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:17:12.420

尝试使用下面的 PHP 代码关闭错误报告。

```
error_reporting(0); 
```

至于悄悄记录错误，试试这个。

```
ini_set('log_errors', E_ERROR | E_WARNING | E_PARSE); // you can change error types here.
ini_set('error_log', 'DIRECTORY OF ERROR LOG'); // change as required 
```

# c# - 通过重新绘制优化在 WinForms 中拥有自己的控件

> ID：14224010
> 
> 赞同：0
> 
> 时间：2013-01-08T21:05:06.627
> 
> 标签：c#, winforms, multithreading

已删除帖子并有代码：

```
namespace StackOverflowQuestion
{
  class Program
  {
        static void Main (string[] args)
        {
              var cw = new ConsoleWriter ();

              for (int i = 0; i <= 5000000; i++)
              {
                    cw.Write (i);
              }

              Console.ReadKey ();
        }
  }

  class ConsoleWriter
  {
        private Stopwatch sw = new Stopwatch ();

        public ConsoleWriter ()
        {
              sw.Start ();
        }

        public void Write (int pNumber)
        {
              if (sw.ElapsedMilliseconds >= 50)
              {
                    Console.WriteLine (pNumber);
                    sw.Restart ();
              }
        }
  }
} 
```

并输出：
305940 651171
1002965
1358665
1715740
2069602
2419054
2772833
3127880
3485054
3844335
4204016
4557912
4913494

所以一切正常。在此示例中，ConsoleWriter 在控制台上显示数字，但它可以显示在控制表面中。如您所见，即使我调用了 5000000 次 Write 方法，它也只会在至少 50 毫秒后更新 UI。很好，但请注意在许多情况下最后一个值 5000000 不会显示。如何解决？我应该使用每 50 毫秒调用一次事件并检查要写入的值是否更改的类（线程）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:20:58.307

你可以使用计时器

```
Timer _timer;

public void StartTimer()
{
    _timer = new Timer();
    _timer.Interval = 100; // 100 ms = 0.1 s
    _timer.Tick += new EventHandler(timer_Tick);
    _timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
    myControl.Number = i;
} 
```

在控件中应该有类似的东西

```
private int _number;    
public int Number
{
    get { return _number; }
    set
    {
        if (value != _number) {
            _number = value;
            Invalidate();
        }
    }
} 
```

的调用`Invalidate()`将触发`Paint`事件。您的绘画逻辑应该在`OnPaint`方法中：

```
protected override void OnPaint(PaintEventArgs e)
{
    ... paint here
} 
```

* * *

但原因是 for 循环本身会冻结应用程序。您可以使用第二个计时器以比显示计数器更快的间隔更新计数器。在 UI-tread 上运行的每个代码（如果您愿意，也可以是主线程）将冻结您的 UI，直到它终止。在单独的线程中在后台完成繁重工作的一种简单方法是使用`BackgroundWorker`. 后台工作人员自动在 UI 线程和工作线程之间切换，并允许您向 UI 线程报告进度。

您也可以手动启动线程以更新计数器。如果这将是唯一更改数字的线程，则不需要同步机制。但永远不要从 UI 线程之外的另一个线程访问 UI（表单或控件）。

这是一个完整的非阻塞解决方案，使用另一个线程进行计数

```
Timer _timer;
int _counter;
System.Threading.Thread _worker;

public frmTimerCounter()
{
    InitializeComponent();
    _worker = new System.Threading.Thread(() =>
    {
        while (_counter < 10000000) {
            _counter++;
            System.Threading.Thread.Sleep(20);
        }
    });
    _worker.Start();
    StartTimer();
}

public void StartTimer()
{
    _timer = new System.Windows.Forms.Timer();
    _timer.Interval = 100; // 100 ms = 0.1 s
    _timer.Tick += new EventHandler(timer_Tick);
    _timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
    // I used a Label for the test. Replace it by your control.
    label1.Text = _counter.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:37:50.500

你没有发布任何代码，但我可以猜到它的样子。您在属性设置器中做*了*太多工作。这个 for() 循环永远不会超过一毫秒，太短以至于不会注意到 GUI 冻结。

您可以通过遵循控件重绘自身的标准方式来实现这一点。这是*懒惰*。您可以通过调用 Invalidate() 方法来获得它。像这样：

```
class MyControl : Control {
    private int number;
    public int Number {
        get { return this.number; }
        set {
            if (value != this.number) this.Invalidate();
            this.number = value;
        }
    }
    protected override void OnPaint(PaintEventArgs e) {
        // TODO: paint number
        //...
        base.OnPaint(e);
    }
} 
```

您现在还会发现其他内容，不再使用该 for() 循环。一开始就没有，人类不可能看到现代处理器增加数字的惊人速度。因此，您现在将其替换为：

```
myControl.Number = 50000; 
```

如果您实际上是想让人眼看到数字增加，那么您将不得不放慢速度。大约每 50 毫秒不超过一次，大约是变化变成模糊的点。这需要一个定时器。

# spring - Spring JSP CSS 引用问题

> ID：14224011
> 
> 赞同：0
> 
> 时间：2013-01-08T21:05:11.997
> 
> 标签：spring, jsp, include, include-path, jspinclude

我的团队已经准备好在 spring 框架中创建一个项目并成功运行。现在我决定让它运行得更快。

**现有项目：** 我的开发人员尽其所能，使用jsp创建了动态输出的css页面。

**现有代码：**

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <jsp:include page="/WEB-INF/common/layout/head.jsp" />
    < jsp:include page="/WEB-INF/common/css/index.jsp" />
</head> 
```

**输出：**

```
<style type="text/css">
    body{background: #ffffff url('<c:url value='/resources/images/logo/logo_small.png'/>') no-repeat scroll center center}
</style> 
```

此代码或项目中没有错误，这工作正常。

我需要的是，我的 css 文件需要通过标题中的链接标签加载。像这样的东西：

```
<link rel="stylesheet" href="/mysite/resource/css/sitemap/index.css" type="text/css"> 
```

这将通过在浏览器中捕获来加速。

**我到目前为止所做的：** 我创建了一个指向 jsp 的 url。

```
<c:if test="${branch == 'sitemap'}">
    <c:if test="${page == 'index'}">
        <%@include file="/myfile/dynamic/css/layout/index.jsp" %>
    </c:if>
</c:if> 
```

这段代码可以吗？工作，但有一个问题。我需要替换**样式**类型的开始标签和结束标签。我通过以下代码导入和替换来做到这一点：

```
<c:set var="my_css">
    <c:if test="${branch == 'sitemap'}">
        <c:if test="${page == 'index'}">
            <%@include file="/WEB-INF/common/css/index.jsp" %>
        </c:if>
    </c:if>
</c:set>
<c:set var="css" value='${fn:replace(fn:replace(fn:replace(my_css,"<style type=\\\"text/css\\\">", ""),"</style>", ""),"\'", "99999")}'/>
<compress:css enabled="true">
    <c:out value='${css}'/>
</compress:css> 
```

这里**99999**位置引起了问题。实际上我需要用 & #39; 替换它。

上面的代码工作正常，并用 9999 替换 '。但用 &.. 替换后它不起作用。& 本身再次变为 & amp;

**信息：** 它是一个已完成的项目。将动态生成更多的 CSS。全部在jsp页面中。好运是每个jsp页面只输出css代码。坏运气是它在顶部和底部包含脚本标签。另一个坏运气是在 url('') 上。

此代码在 fn:replace 标记中解决问题。

或者如果你有更好的建议，请告诉我。

我认为会有一个简单的选择。请让我知道您的建议、建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:41:28.577

我做到了这一点。

我创建了一个新路由 /resource/css|js ，我使用内部资源视图解析器 - （文件夹）。

我的链接网址类似于**/resource/css/qtn/page1.css**。

在控制器 /resources/{ **type** }/{ **page** }.css 中。

在这里，我获取**类型**和**页面**值，并在我的**动态 jsp**页面中使用它来实现我的结果。

为了安全起见，我*检查了网址*是否来自我自己的页面。

**暗示 ：**

在使用**内部资源视图解析器时，当您***将页面值直接传递给资源 url*时，它会抛出错误，因为有时页面 url 将是**/page1/block1**，因此我们的控制器会抛出错误。

为了解决这个问题，我将页面值作为**/resource/css/qtn/page1.css?sub=${page}**传递。

在控制器中，我们可以轻松地将这个**子值作为****模型**发送到我们的动态 jsp 。

# python - Python：为什么我得到 [Errno 13] Permission Denied？

> ID：14224013
> 
> 赞同：3
> 
> 时间：2013-01-08T21:05:15.477
> 
> 标签：python

我正在尝试编写一些代码来搜索一组文件中的字符串，然后将包含该字符串的任何文件放入程序开始时不存在的不同目录中。

```
import os
import re

def test():
    os.chdir("C:/Users/David/Files/TestFiles")
    files = os.listdir(".")
    os.mkdir("C:/Users/David/Files/TestFiles2")
    for x in (files):
        inputFile = open((x), "r")
        content = inputFile.read()
        inputFile.close()
        if "Hello Word" in content:
            with open ("C:/Users/David/Files/TestFiles2", "w") as outputFile:
                outputFile.write(content) 
```

当它运行时，我收到以下错误消息

```
PermissionError: [Errno 13] Permission denied: 'C:/Users/David/Files/TestFiles2' 
```

只是想知道是否有人可以告诉我为什么会出现此错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:08:05.673

您无法打开目录进行写入：

```
os.mkdir("C:/Users/David/Files/TestFiles2") 
```

其次是

```
open("C:/Users/David/Files/TestFiles2", "w") 
```

不会工作。您的意思是在后一个语句中添加一个文件名吗？

如果那是基于`x`文件名，您应该将该名称添加到路径中：

```
with open(os.path.join("C:/Users/David/Files/TestFiles2", os.path.basename(x)), 'w') as outputFile: 
```

要*移动*文件，请[`shutil.move()`](http://docs.python.org/2/library/shutil.html#shutil.move)改用；无需为此“打开”目录：

```
if "facebook.com" in content.lower():
     shutil.move(x, "C:/Users/David/Files/TestFiles2") 
```

完整代码，简化：

```
def test():
    src = "C:/Users/David/Files/TestFiles"
    dst = "C:/Users/David/Files/TestFiles2"
    os.mkdir(dst)
    for filename in os.listdir(src):
        path = os.path.join(src, filename)
        with open(path, "r") as inputFile:
            content = inputFile.read()
        if "facebook.com" in content.lower():
            shutil.move(path, dst) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:14:01.283

您将使用该 if 语句选择所有文件：

`"XXX" or "YYY" in "ZZZ"`总是评估为 True。它与 相同 `("XXX") or ("YYY" in "ZZZ")`。由于非空字符串的计算结果为 True，因此您将选择所有文件。

编辑：

```
if "facebook.com" or "Facebook.com" in content:
    ... 
```

看起来所有文件都包含`"facebook.com"`or `"Facebook.com"`，但这只是因为`"facebook.com"`它本身的计算结果为 True。`"Facebook.com" in content`甚至永远不会被检查。if 语句在功能上等于

```
if "facebook.com":
    ... 
```

并且 if 块将被执行。你真正的意思是

```
if ("facebook.com" in content) or ("Facebook.com" in content):
    ... 
```

就是这样。如果您不想搜索所有内容两次，您可以使用正则表达式，但这是一个不同的主题。

# gstreamer - gstreamer gstrtpbin 发送方/接收方在同一管道中

> ID：14224017
> 
> 赞同：1
> 
> 时间：2013-01-08T21:05:39.013
> 
> 标签：gstreamer, rtp

我希望构建一个同时进行 rtp 音频发送和接收的 gstreamer 管道。

根据我发现的示例（虽然很少），这是我几乎可以工作的代码。

（该程序是用 Rexx 编写的，但我认为发生的事情很明显。在这里，它看起来很像 bash！）。连线字符是逗号。"", 位只是为了可读性插入空行。

```
rtp_recv_port = 8554
rtp_send_port = 8555

 pipeline =  "gst-launch -e",
         "",
            "gstrtpbin",
            "   name=rtpbin",
         "",
            "udpsrc   port="rtp_recv_port,     -- do-timestamp=true
            '  ! "application/x-rtp,media=audio,payload=8,clock-rate=8000,encoding-name=PCMA,channels=1" ',
            "  ! rtpbin.recv_rtp_sink_0",
         "",
            "rtpbin. ",
            "  ! rtppcmadepay",
            "  ! decodebin         ",
            '  ! "audio/x-raw-int, width=16, depth=16, rate=8000, channels=1" ',
            "  ! volume volume=5.0 ",
            "  ! autoaudiosink sync=false",
         "",
            "autoaudiosrc          ",
            "  ! audioconvert      ",
            '  ! "audio/x-raw-int,width=16,depth=16,rate=8000,channels=1" ',
            "  ! alawenc           ",
            "  ! rtppcmapay perfect-rtptime=true mtu=2000",
            "  ! rtpbin.send_rtp_sink_1",
         "",
            "rtpbin.send_rtp_src_1 ",
            "  ! audioconvert",
            "  ! audioresample",
            "  ! udpsink port="rtp_send_port "host="ipaddr

pipeline "> pipe.out" 
```

如果我注释掉之后的行

```
"  ! autoaudiosink sync=false", 
```

仅接收部分工作得很好。但是，如果我将这些行留在原处，我会收到此错误：

```
ERROR: from element /GstPipeline:pipeline0/GstUDPSrc:udpsrc0: Internal data flow error.
Additional debug info:
gstbasesrc.c(2582): gst_base_src_loop (): /GstPipeline:pipeline0/GstUDPSrc:udpsrc0:
streaming task paused, reason not-linked (-1) 
```

那么，什么突然变得没有联系了？我会理解错误是否在 autoaudiosrc 部分，但突然出现在 udpsrc 部分？

帮助的建议，有人吗？

（FWIW）在我完成这部分工作后，我将返回并添加 rtcp 部分或管道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:39:21.113

这是一个将发送和接收音频（全双工）的管道。我手动设置了源，使其可扩展（你也可以在上面放视频，如果你想两者都做，我有一个示例管道供你使用）。我将其设置为`jitter buffer mode`是`BUFFER`因为我的网络是在具有大量抖动的网络上实现的。现在，在这个示例管道中，您可以添加所有变量更改（`volume`、您的音频源、编码和解码等）。

```
 sudo gst-launch gstrtpbin \ 

 name=rtpbin audiotestsrc ! queue ! audioconvert ! alawenc ! \ 

 rtppcmapay pt=8 ! rtpbin.send_rtp_sink_0 rtpbin.send_rtp_src_0 ! \ 
 multiudpsink clients="127.0.0.1:5002" sync=false async=false \ 

 udpsrc port=5004 caps="application/x-rtp, media=audio, payload=8, clock-rate=8000, \ 
 encoding-name=PCMA" ! queue ! rtpbin.recv_rtp_sink_0  \ 
 rtpbin. buffer-mode=RTP_JITTER_BUFFER_MODE_BUFFER ! rtppcmadepay ! alawdec ! alsasink 
```

我遇到了控制（RTCP）数据包的问题。我发现如果您使用 RTCP，环回测试是不够的。您将不得不在两台相互交谈的计算机上进行测试。

让我知道这是否适合您，因为我已经在 4 台不同的机器上进行了测试，并且都可以正常工作。

# ruby-on-rails - Cucumber and rails：测试随机记录的存在

> ID：14224025
> 
> 赞同：0
> 
> 时间：2013-01-08T21:06:24.927
> 
> 标签：ruby-on-rails, testing, rspec, cucumber, capybara

我有一个应用程序显示一些内容，然后选择一个随机记录并显示它

我该如何测试？

```
Then /^I Should see the associated "([^']*)" "([^']*)"$/ do |type, elements|
    elements.split(', ').each do |element|
        page.should have_content element
    end
end 
```

显然失败了，因为它没有找到每条记录。如何验证仅存在一条记录？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:26:39.443

使用以下内容：

```
Then /^I should see the associated "([^"]*)" "([^"]*)"$/ do |type, elements|
  found = false
  elements.split(', ').each do |element|
    found = true if page.has_content? element
  end
  found.should == true
end 
```

# sql - 基本枚举值的 Dynamics AX 2012 SQL 提取

> ID：14224031
> 
> 赞同：5
> 
> 时间：2013-01-08T21:07:01.133
> 
> 标签：sql, axapta, dynamics-ax-2012

是否有表、视图或过程可用于使用 SQL（直接来自 DB，而不是 X++）从 Base Enum 中提取值？我能够在 SRSAnalysisEnums 表中找到几个孤立的，但不是我特别需要的枚举。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T22:58:43.637

循环枚举非常容易：

```
static void EnumIteration(Args _args)
{
    DictEnum enum = new DictEnum(enumName2Id("TestEnum"));
    int i;
    for (i=0; i < enum.values(); i++)
    {
        info(enum.index2Label(i));
    }    
} 
```

把它滚到你自己的桌子上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T08:33:34.853

如果您尝试从 AX 外部访问枚举（例如在 sql 中），您可以通过将包含表添加到透视图并重建模型来将缺少的枚举添加到 SRSAnalysisEnums

工具->报告工具->更新模型

它在这里描述 [http://abraaxapta.blogspot.co.uk/2012/02/missing-enums-in-srsanalysisenums.html](http://abraaxapta.blogspot.co.uk/2012/02/missing-enums-in-srsanalysisenums.html)

以及另一种仅限 AX2012 的方式

[http://abraaxapta.blogspot.co.uk/2012/11/accessing-enum-labels-from-outside-ax.html](http://abraaxapta.blogspot.co.uk/2012/11/accessing-enum-labels-from-outside-ax.html)

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-12T08:04:03.697

选择 A.ENUMITEMVALUE, A.ENUMITEMLABEL 作为 ENUMITEMNAME 从 [DBO].SRSANALYSISENUMS A WHERE A.ENUMNAME = 'LedgerPostingType' AND A.LANGUAGEID = 'en-us'

直接来自 SQL 表

# windows-phone-7 - 获取“主”程序集版本号

> ID：14224032
> 
> 赞同：3
> 
> 时间：2013-01-08T21:07:03.627
> 
> 标签：windows-phone-7, windows-phone-8, .net-assembly

我有一个带有库（DLL）的解决方案，它们用于 2 个相同的项目（一个用于 WP7，另一个用于 WP8）。在其中一个库中，我有确定应用程序版本的代码。

```
 private static Version mVersion;
    public static Version Version {
        get {
            if (mVersion == default(Version)) {
                var lcAssembly = Assembly.GetExecutingAssembly();
                var parts = lcAssembly.FullName.Split(',');
                var lcVersionStr = parts[1].Split('=')[1];
                mVersion = new Version(lcVersionStr);
            }
            return mVersion;
        }
    } 
```

问题是由于这段代码，这段代码返回了库本身的版本号`Assembly.GetExecutingAssembly()`。如何获得主程序集版本而不是 DLL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:31:12.597

这是关于 WP7 和 WP8 之间代码共享的一个很好的问题。

最**简单的方法**是在运行时读取 AppManfiest.xml 文件，获取 EntryType 并使用它来获取入口点 Assembly 实例。这是一个示例 AppManfiest.xml 在 MSBuild 对其施展魔法后的样子：

```
<Deployment xmlns="http://schemas.microsoft.com/client/2007/deployment" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" EntryPointAssembly="myAssembly" EntryPointType="myNamespace.App" RuntimeVersion="4.7.50308.0">
  <Deployment.Parts>
    <AssemblyPart x:Name="myAssembly" Source="myAssembly.dll" />
  </Deployment.Parts>
</Deployment> 
```

以下是您如何读取文件、获取属性、然后获取入口点类型，最后是入口点程序集：

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    var appManfiest = XElement.Load("AppManifest.xaml");
    var entryAssemblyName = appManfiest.Attribute("EntryPointAssembly").Value;
    var entryTypeName = appManfiest.Attribute("EntryPointType").Value;
    Type entryType = Type.GetType(entryTypeName + "," + entryAssemblyName);
    Assembly entryAssembly = entryType.Assembly;
} 
```

这是一个简单的解决方案，并且有效。然而，这并不是**最简洁的架构解决方案**。我实现此解决方案的方式是在共享库中声明一个接口，WP7 和 WP8 都实现该接口并将其实现注册到 IoC 容器。

例如，假设您需要在特定于平台版本的共享库中“DoSomething”。首先，您将创建一个 IDoSomething 接口。我们还假设您有一个 IoC 待命。

```
public interface IDoSomething
{

}

public static class IoC
{
    public static void Register<T>(T t)
    {
        // use some IoC container
    }

    public static T Get<T>()
    {
        // use some IoC container
    }
} 
```

在您的 WP7 应用程序中，您将为 WP7 实现共享接口，并在 WP7 启动后注册它。

```
public App()
{
   MainPage.IoC.Register(new MainPage.DoSomethingWP7());
}

private class DoSomethingWP7 : IDoSomething
{
} 
```

您还将在 WP8 应用程序中对 WP8 执行相同操作。然后在您的共享库中，您可以请求相关接口，而不管其平台版本特定的实现如何：

```
IDoSomething sharedInterface = IoC.Get<IDoSomething>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T13:09:58.757

这对我有用：

```
var appAssembly = Application.Current.GetType().Assembly;
var appAssemblyVersion = appAssembly.GetName().Version; 
```

我用 WP7.1 和 WP8.0 进行了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T15:41:31.813

我有一个更简单的答案。我认为你很接近你正在做的事情。我只是对您的代码进行了一次修改，因此我可以将它与 Telerik 控件一起使用。这就是我所做的。我在我项目的 App 类（App.Xaml 的代码隐藏）中找到了您的代码。我做了一项更改，我认为可以解决您的问题：

```
private static Version mVersion;
public static Version Version {
    get {
        if (mVersion == default(Version)) {
            var lcAssembly = typeof(App);
            var parts = lcAssembly.FullName.Split(',');
            var lcVersionStr = parts[1].Split('=')[1];
            mVersion = new Version(lcVersionStr);
        }
        return mVersion;
    }
} 
```

现在我可以通过调用“App.Version”来获取版本号。

# image-processing - CvBGCodeBookModel 一个好的解释？

> ID：14224033
> 
> 赞同：0
> 
> 时间：2013-01-08T21:07:20.807
> 
> 标签：image-processing, opencv, background-subtraction

我一直在进出 OpenCV 2.4.3，试图找出可用于基于 CvBGCodeBookModel 的背景减法的额外函数和参数。该文档不是很有帮助，是否有人知道那里的资源/教程解释了在 OpenCV 中实现的 CvBGCodeBookModel 及其一些功能？

非常感谢指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:25:25.693

在 opencv 代码 ( **samples/c/bgfg_codebook.cpp** ) 中有一个示例`CvBGCodeBookModel`，它可能是一个很好的地方。

它说该代码改编自 O'Reilly 出版社的“Learning OpenCV”一书，因此这将是另一种资源。

还有[这篇论文](http://www.umiacs.umd.edu/~knkim/paper/bgs-ICIP2004.pdf)描述了这个理论，不确定这是否对你有帮助。

# sql - 关键字“from”附近的语法不正确

> ID：14224040
> 
> 赞同：0
> 
> 时间：2013-01-08T21:07:35.500
> 
> 标签：sql, sql-server-2008, select

我收到以下错误：

> *消息 156，级别 15，状态 1，过程 pa_Calcular_Anticipo，第 31 行
> 关键字“来自”附近的语法不正确。*

我试过移动代码块和评论，但我似乎找不到问题。

这是存储过程：

```
ALTER procedure [dbo].[pa_Calcular_Anticipo] 
(
    @Tipo_Moneda as numeric(18,0), 
    @Dias as numeric(18,2), 
    @Ciudad_Origen as numeric(18,2), 
    @Ciudad_Destino as numeric(18,2),
    @ArregloPropio int=0
)
 AS
Begin
SET NOCOUNT ON
--Declaracion
Declare @Tasa_Aeropuerto_Origen as numeric(18,2)--
Declare @Tasa_Aeropuerto_Destino as numeric(18,2)--
Declare @Monto_Telefono_Destino as numeric(18,2)--
Declare @Monto_Comida_Destino as numeric(18,2)--
Declare @Monto_Propina_Destino as numeric(18,2)--
Declare @Resultado numeric(18,2)
Declare @Taxi_Aeropuerto_Origen numeric(18,2)--
Declare @Taxi_Aeropuerto_Destino numeric(18,2)--
Declare @Taxi_Interno_Destino numeric(18,2)--

--Obtener Data de la Ciudad Destino
Select  @Tasa_Aeropuerto_Destino = Tasa_Aereoportuaria,
        @Monto_Telefono_Destino = monto_telefono,
        @Monto_Comida_Destino = monto_comida,
        @Monto_Propina_Destino = monto_propina,
        @Taxi_Interno_Destino = Tarifa_Taxi_Interno,
        @Taxi_Aeropuerto_Destino = Tarifa_Taxi_Aeropuerto
from dbo.tb_Ciudades 
where cod_ciudad = @Ciudad_Destino

--Obtener data de la ciudad Origen
Select @Tasa_Aeropuerto_Origen = Tasa_Aereoportuaria,
           @Taxi_Aeropuerto_Origen = monto_telefono,
from dbo.tb_Ciudades 
where cod_ciudad=@Ciudad_Destino

-- Opciones 
IF (@ArregloPropio = 1) --anticipo = si, Traslado = no
              --Monto Calculado = ((Comida + Teléfono + propina) * Días) + (Tasa Aeropuerto Origen + Tasa Aeropuerto Destino)
    BEGIN
        set @resultado = ((@Monto_Comida_Destino + @Monto_Telefono_Destino + @Monto_Propina_Destino) *@Dias) + ( @Tasa_Aeropuerto_Origen +@Tasa_Aeropuerto_Destino)
    END

IF (@ArregloPropio = 2) --Anticipo es igual a “No” y Traslado es igual “No”
    BEGIN
        set @resultado = 0
    END

IF (@ArregloPropio = 3) --Anticipo es igual a “Si” y Traslado es igual “Arreglo Propio”
              --Monto Calculado = ((Comida + Teléfono + propina) * Días) + (Tasa Aeropuerto Origen + Tasa Aeropuerto Destino) + ((Monto Traslados Internos) * Días) + (Traslados Aeropuerto Origen + Traslados Aeropuerto Destino) 
    BEGIN
        set @resultado = ((@Monto_Comida_Destino + @Monto_Telefono_Destino + @Monto_Propina_Destino) *@Dias) + ( @Tasa_Aeropuerto_Origen +@Tasa_Aeropuerto_Destino) + ((@Taxi_Interno_Destino) *Dias) + ( Taxi_Aeropuerto_Destino + @Taxi_Aeropuerto_Origen ) 
    END

IF (@ArregloPropio = 4) --Anticipo es igual a “No” y Traslado es igual “Arreglo Propio”
              --Monto Calculado = (Monto Traslados Internos * Días) + (Tasa Aeropuerto Origen + Tasa Aeropuerto Destino)
    BEGIN
        set @resultado = ((@Taxi_Interno_Destino) *Dias) +( @Tasa_Aeropuerto_Origen +@Tasa_Aeropuerto_Destino)
    END

IF (@ArregloPropio = 5) --Anticipo es igual a “Si” y Traslado es igual “Servicio”
              --Monto Calculado = ((Comida + Teléfono + Propina) * Días) + (Monto Traslados Internos * Días) + (Tasa Aeropuerto Origen + Tasa Aeropuerto Destino)
    BEGIN
        set @resultado = ((@Monto_Comida_Destino + @Monto_Telefono_Destino + @Monto_Propina_Destino) *@Dias) + ((@Taxi_Interno_Destino) *Dias) + ( @Tasa_Aeropuerto_Origen +@Tasa_Aeropuerto_Destino)
    END

IF (@ArregloPropio = 6) --Busqueda por Codigo
    BEGIN
        set @resultado = 0
    END

select @resultado as Monto_Calculado  
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T21:09:36.403

你有额外的逗号，在这里：

```
Select  @Tasa_Aeropuerto_Origen = Tasa_Aereoportuaria,
        @Taxi_Aeropuerto_Origen = monto_telefono,
from dbo.tb_Ciudades 
where cod_ciudad=@Ciudad_Destino 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:09:41.120

从您的第二次选择中删除最后一个逗号`@Taxi_Aeropuerto_Origen = monto_telefono,`

# iphone - 放松 Segue + 滑动手势识别器

> ID：14224041
> 
> 赞同：2
> 
> 时间：2013-01-08T21:07:40.610
> 
> 标签：iphone, objective-c, xcode, ios6

我有一个滑动手势识别器，可以让我从 VC 转换到 VC。最近，我一直在简单地使用 Modal Segue 从 VC 转到 VC。在得知这会增加内存使用量并在我每次滑动我的研究时创建一个新实例后，我开始使用 Unwind 技术。我的问题是如何实现滑动手势识别器控件和展开技术？

我已经看到它是用按钮完成的，但我不确定它是否可以通过滑动手势关闭？

# java - Apache 长时间运行的进程内部超时

> ID：14224042
> 
> 赞同：1
> 
> 时间：2013-01-08T21:07:46.303
> 
> 标签：java, ajax, apache2, tomcat7

我正在开发一个 Web 应用程序，它允许用户在服务器上远程运行 AI 算法，以减少解决方案的等待时间。这是一个大纲。

`Browser -> jQuery AJAX -> Apache2 proxy -> tomcat7 -> RESTful java -> Runtime.getRuntime().exec() -> command-line C algorithm`

restful 服务通过 AJAX 响应返回所需的信息，并在浏览器上进行一些处理。

这适用于我测试过的大多数算法。然而，一些算法会在运行很长时间后超时。我实现了实时状态更新，因此算法仍在运行并在浏览器上不断生成输出，但大约 5 分钟后，我收到 500 Internal Server Error。

从命令行终止算法进程也会导致 500 Internal Server Error。

直接从命令行运行算法会导致正确执行。

将 AJAX 调用发送到休眠一小时的 restful 方法会导致 503（服务暂时不可用）错误。

还有什么可能是造成这种情况的原因？我一直在进行故障排除一分钟，现在完全没有想法。

谢谢你的帮助！

- 编辑 -

我开发了一种有效解决问题的解决方法，但是，我仍然有兴趣知道其他人的想法。消除长时间的 AJAX 调用并用重复调用替换它以通过备用状态文件检查算法的状态适用于长时间运行的进程。

但是，为什么以前我会遇到指定永远不会超时的 AJAX 调用的问题..？

# actionscript-3 - AS3敌人倍速？

> ID：14224044
> 
> 赞同：2
> 
> 时间：2013-01-08T21:07:57.517
> 
> 标签：actionscript-3, flash, air

我在 Flash CS6 中使用 AS3 和 Air 3.2 for Android 制作了一个游戏，现在这个游戏你进入不同的菜单，当你死时，它会回到主菜单并显示你的分数，现在当你选择一个新角色并玩时再次通过，怪物速度翻倍！？！？

知道为什么吗？我可以给你一段我的代码，但我真的不确定问题出在哪一部分？它会是一个没有被删除的事件监听器吗？

这是被调用来启动关卡的函数

```
public function startLevel1( navigationEvent:NavigationEvent ):void
    {
        //classSelect = null;
        removeChild( classSelect );
        levelManager = new LevelManager( heroGra, hero);
        addChild( levelManager );
        levelManaOn = true;

        gameTimer = new Timer( 30 );
        //On every 30ms we call apon moveEvent function
        gameTimer.addEventListener( TimerEvent.TIMER, tick );
        gameTimer.start();

    } 
```

这是被删除的为怪物调用更新函数的滴答事件

```
 public function tick( timerEvent:TimerEvent ):void
    {
        if(levelManaOn == true)
        {
            levelManager.update();
            if(hero.hp <= 0)
            {
                trace("DEAD");
                onScoreState();
                levelManaOn = false;
                removeEventListener( TimerEvent.TIMER, tick );
            }
        }
    } 
```

在tick事件中，它会调用这个函数

```
public function onScoreState( ):void
    {
        scoreState = new ScoreState();
        scoreState.waveCompletedScore.text = levelManager.level.score.toString();
        //
        scoreState.addEventListener( NavigationEvent.ENDGAME, backMainMenu );
        addChild( scoreState );
        removeChild( levelManager );
    } 
```

这删除了levelManager，但怪物仍然以两倍的速度移动，并且每次你死后从头开始重新启动时，速度又是一倍，又是一倍，知道为什么吗？

感谢您的阅读和帮助

帆布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:12:23.267

```
 gameTimer = new Timer( 30 );
    //On every 30ms we call apon moveEvent function
    gameTimer.addEventListener( TimerEvent.TIMER, tick );
    gameTimer.start(); 
```

我敢打赌，这段代码会再次执行，而不会删除第一个计时器。

您需要`removeEventListener( TimerEvent.TIMER, tick );`作为对象上的方法调用`gameTimer`。像这样：

`gameTimer.removeEventListener( TimerEvent.TIMER, tick );`

确保您保留对`gameTimer`. `gameTimer.stop();`在删除侦听器之前也要这样做。

# javascript - 将值传递给嵌套的 parse.com 查询回调

> ID：14224048
> 
> 赞同：1
> 
> 时间：2013-01-08T21:08:09.497
> 
> 标签：javascript, parse-platform

所以，使用 parse.com，我正在做一些嵌套查询......基本上，获取一个对象，然后检索它的关系并执行一些操作。

```
 pageQuery.find({
            success: function (results) {
                var pages = [];

                for (var result = 0; result < results.length; result++) {
                    var resArrayLength = pages.push(results[result].toJSON());
                    var indexOfLastPush = resArrayLength - 1;
                    console.log("resArrayLength = " + resArrayLength);
                    pages[indexOfLastPush].scrapeRules = new Array();
                    console.log("index of last push set to " + indexOfLastPush);
                    var relation = results[result].relation("RulesForPage");
                    //get the related scrape rules
                    relation.query().find({                            
                        success: function (rules) {
                            console.log("Found  " + rules.length + " rules");
                            for (var i = 0; i < rules.length; i++) {
                                console.log("rule index = " + i);
                                console.log("Found rule " + rules[i].id);
                                pages[indexOfLastPush].AllRules = new Array();

                                pages[indexOfLastPush].scrapeRules.push(rules[i].id);
                                console.log("pushed rule " + rules[i].get("name") + " to page at index " + indexOfLastPush);
                            }
                        }

                    });
                } 
```

我看到的问题是我试图 indexOfLastPush 来跟踪我需要的数组索引，但是在回调发生时该值已经改变。

如何将它传递给“成功”回调，以便获得所需的索引？

**更新：** 感谢@cggaurav 提供的出色提示。为什么似乎每个 JavaScript 问题的答案都是将代码包装在匿名函数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:16:56.753

你必须为你创建的每个relation.query() 提供一个所谓的闭包或匿名函数。请参阅“有关词法作用域的更多信息” | [http://mark-story.com/posts/view/picking-up-javascript-closures-and-lexical-scoping](http://mark-story.com/posts/view/picking-up-javascript-closures-and-lexical-scoping)

# c# - 将本机 DLL 路径添加到托管控制台应用程序

> ID：14224055
> 
> 赞同：6
> 
> 时间：2013-01-08T21:08:33.180
> 
> 标签：c#, .net, visual-studio-2010, dll, console-application

我有 3 个项目的 VS2010 解决方案：

1.  本机 (C++) DLL
2.  使用本机 DLL 的托管 (C#) DLL
3.  使用托管 DLL 的托管 (C#) 控制台应用程序

我可以将托管 DLL 设置为对控制台应用程序的引用，但我不能将本机 DLL 设置为这样的引用。

要在 VS2010 中运行控制台应用程序而不会崩溃，我必须将本机 DLL 复制到 .exe 文件夹。

我有两个问题：

1.  如何将本机 DLL 添加到 DLL 搜索路径中，这样我就不必手动复制了？
2.  我怎样才能做到这一点，以便每个配置（调试/发布）采用正确的 DLL 版本？

**更详细的解决方案**- 由于[Tilak 的回答](https://stackoverflow.com/a/14224133/135862)：
以下是基于[Tilak 的回复](https://stackoverflow.com/a/14224133/135862)的更多新手友好细节：

1.  将本机 DLL 作为文件（添加现有文件...）添加到托管控制台项目。
2.  在项目属性窗格中，将“Build Action”设置为“Content”，将“Copy to Output Directory”设置为“Copy if newer”或“Copy always”。
3.  关闭解决方案或VS2010。
4.  `.csproj`在文本编辑器中打开托管项目文件，找到`<ItemGroup>`包含本机 DLL 名称的文件（这是我们在步骤 1 中添加文件时创建的）。我们将在那里进行一些小的更改：
    1.  对于 Debug 构建，而不是`<ItemGroup>`使用`<ItemGroup Condition="'$(DefineConstants)' == 'DEBUG;TRACE' ">`并输入*Debug* DLL 的路径。
    2.  复制 Release 构建的条目，而不是`<ItemGroup>`使用`<ItemGroup Condition="'$(DefineConstants)' != 'DEBUG;TRACE' ">`并输入*Release* DLL 的路径。
5.  保存文件并重新打开 VS2010。依赖关系现在应该到位。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T21:13:16.557

您可以在构建后事件中复制文件，

或者

添加文件作为资源。

> 我怎样才能做到这一点，以便每个配置（调试/发布）采用正确的 DLL 版本？

您可以`$(ConfigurationName)`在构建后事件中使用来找出调试/发布模式。因此，您可以参考图书馆。

如果您使用资源方法，则必须根据调试/发布模式修改要复制的项目文件。[在此处](http://social.msdn.microsoft.com/Forums/da-DK/msbuild/thread/910add2d-301f-4465-acba-78448ff3068d)查看详细信息

# java - 循环遍历枚举值的子集

> ID：14224059
> 
> 赞同：12
> 
> 时间：2013-01-08T21:08:45.417
> 
> 标签：java, enums

我有一个包含 4 个值的枚举，并且我有一个接受枚举值的方法签名。我希望能够对所有未作为参数传递给 doSomething() 的枚举值做一些事情。

```
public void doSomething(EnumThing thing){
   EnumThing[] thingValues = EnumThing.values();
   List<EnumThing> valuesNotPassedAsArg = new ArrayList<EnumThing>();
   for(EnumThing th : thingValues){
       valuesNotPassedAsArg.add(th);
   }
   valuesNotPassAsArg.remove(thing);
  //here I would loop through all valuesNotPassAsArg and do something with them
}

public enum EnumThing{
 SOMETHING, SOMETHINGELSE, ANOTHERTHING;
} 
```

有没有更清洁的方法来做到这一点？我觉得从 thingValues 数组中获取项目的循环似乎是多余的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-08T21:14:36.967

调查`EnumSet`。具体来说，

```
import java.util.EnumSet;
import static java.util.EnumSet.complementOf;

for (EnumThing t : complementOf(EnumSet.of(thing))) {
  ... do the work ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T21:24:37.477

@Marko 的答案比这更好，但了解这种替代方式可能会有所帮助。

```
public static void main(String[] args) {
    EnumThing thing = EnumThing.ANOTHERTHING;

    List<EnumThing> list = new ArrayList<EnumThing>(Arrays.asList(EnumThing.values()));
    list.remove(thing);
    System.out.println(list);
}

public enum EnumThing{
    SOMETHING, SOMETHINGELSE, ANOTHERTHING;
} 
```

这打印出来

> [某事，某事]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:35:47.617

查看您的标题，以**迭代**您所做的范围

```
for (int i = YourEnum.___RANGE___START___.ordinal() +1; i != YourEnum.__RANGE___END___.ordinal() ; i++) {
    YourEnumvalue = YourEnum.values()[i];
    //use value
} 
```

或这个

```
for (YourEnum value: EnumSet.range(YourEnum.___RANGE___START___, YourEnum.__RANGE___END___)) {
    // use value
} 
```

如果您只想跳过一个元素，那么[Skip Head 的解决方案](https://stackoverflow.com/a/14224149/1083704)可能会胜过补全，这在单次迭代的情况下似乎有点过头了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-22T23:07:04.787

另一种方法是使用`Stream.of`方法。例如：

```
public class EnumTest {

    public static enum MyEnum {
        VALUE1, VALUE2, VALUE3
    }

    public static void main(String[] args) {
        Stream.of(MyEnum.values()).filter(v -> v != MyEnum.VALUE2).forEach(System.out::println);
    }
} 
```

哪个打印：

```
VALUE1
VALUE3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T21:14:49.447

```
public void doSomething(EnumThing thing){
   EnumThing[] thingValues = EnumThing.values();
   for(EnumThing th : thingValues){
       if (th != thing) {
          doSomethingElse(th);
       }
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T21:18:45.410

我会说这样的事情要好一些

```
public void doSomething(EnumThing thing){
   EnumThing[] thingValues = EnumThing.values();
   List<EnumThing> valuesNotPassedAsArg = Arrays.asList(thingValues);
   valuesNotPassAsArg.remove(thing);
   //here I would loop through all valuesNotPassAsArg and do something with them
}
public enum EnumThing{
   SOMETHING, SOMETHINGELSE, ANOTHERTHING;
} 
```

# c# - c# wcf文件和文件夹浏览器

> ID：14224063
> 
> 赞同：2
> 
> 时间：2013-01-08T21:09:07.880
> 
> 标签：c#, windows, wcf, filesystems, file-permissions

我有一个托管 wcf 服务以允许远程文件和文件夹浏览的 Windows 服务。Windows 服务在本地系统帐户下运行。

浏览`c:\`驱动器时，该服务会报告该文件夹中的 2800 多个文件。我已经单步执行了代码，它确实报告了 >2800 个文件。

这怎么可能是正确的？

**C# 代码**

```
 //Files Manager

public ReturnClass FindSubFiles(String Folder_To_Search, String User, String SessionId)
{
    ReturnClass myReturnClass = new ReturnClass(-1, String.Empty, String.Empty, null, null, null, null);
    try
    {
        Logging.Write_To_Log_File("Entry", MethodBase.GetCurrentMethod().Name, "", "", "", "", User, SessionId, 1);
        string[] filePaths = Directory.GetFiles(Folder_To_Search);
        int count = 0;
        foreach (string Folder in filePaths)
        {
            filePaths[count] = Path.GetFileName(filePaths[count]);

            count++;
        }
        myReturnClass.ErrorCode = 1;
        myReturnClass.FilePaths = filePaths;
        Logging.Write_To_Log_File("Exit", MethodBase.GetCurrentMethod().Name, "", "", "", "", User, SessionId, 1);
        return myReturnClass;
    }
    catch (Exception ex) 
    {
        Logging.Write_To_Log_File("Error", MethodBase.GetCurrentMethod().Name, "", "", ex.ToString(), "", User, SessionId, 2);
        myReturnClass.ErrorCode = -1;
        myReturnClass.ErrorMessage = ex.ToString();
        return myReturnClass;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:43:48.090

将其粘贴到 C# 控制台应用程序中，看看它会吐出什么。您必须在您的 folder_To_Search 中传递了一些意想不到的东西，或者在 c:\ 中的文件比您想象的要多

```
var Folder_To_Search = @"c:\";
string[] filePaths = Directory.GetFiles(Folder_To_Search);
int count = 0;
foreach (string Folder in filePaths)
{
    filePaths[count] = Path.GetFileName(filePaths[count]);

    count++;
}
Console.WriteLine(count);
Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:29:59.050

我传入的路径是 c: 我应该传入的是 c:\\

**C# 代码**

```
public ReturnClass FindSubFiles(String Folder_To_Search , 
                                String User, String SessionId )
{
    ReturnClass myReturnClass = new ReturnClass(-1, String.Empty, String.Empty, 
                                               null, null, null, null);
    try
    {
        Logging.Write_To_Log_File("Entry", MethodBase.GetCurrentMethod().Name, 
                                  "", "", "", "", User, SessionId, 1);
        string[] filePaths = Directory.GetFiles(Folder_To_Search + "\\");
        int count = 0;
        foreach (string Folder in filePaths)
        {
            filePaths[count] = Path.GetFileName(filePaths[count]);

            count++;
        }
        myReturnClass.ErrorCode = 1;
        myReturnClass.FilePaths = filePaths;
        Logging.Write_To_Log_File("Exit", MethodBase.GetCurrentMethod().Name, 
                                  "", "", "", "", User, SessionId, 1);
        return myReturnClass;
    }
    catch (Exception ex) 
    {
        Logging.Write_To_Log_File("Error", MethodBase.GetCurrentMethod().Name, 
                                  "", "", ex.ToString(), "", User, SessionId, 2);
        myReturnClass.ErrorCode = -1;
        myReturnClass.ErrorMessage = ex.ToString();
        return myReturnClass;
    }
} 
```

谢谢达摩

# python - python：转换列表的优雅和节省代码的方式

> ID：14224065
> 
> 赞同：0
> 
> 时间：2013-01-08T21:09:14.973
> 
> 标签：python, performance, optimization, coding-style

首先很抱歉这个简单的问题。我有一个清单（只是一个例子）

```
points = [[663963.7405329756, 6178165.692240637],
 [664101.4213951868, 6177971.251818423],
 [664099.7474887948, 6177963.323432223],
 [664041.432877932, 6177903.295650704],
 [664031.8017317944, 6177895.797176996],
 [663963.7405329756, 6178165.692240637]] 
```

我需要将其转换为以下形式

```
points = [(663963.7405329756, 6178165.692240637),
 (664101.4213951868, 6177971.251818423),
 (664099.7474887948, 6177963.323432223),
 (664041.432877932, 6177903.295650704),
 (664031.8017317944, 6177895.797176996),
 (663963.7405329756, 6178165.692240637)] 
```

为了使用[**shapely 模块**](http://toblerity.github.com/shapely/manual.html)`Polygon`创建对象。我写了几个循环，但真的不优雅且耗时。您知道将第一个列表转换为第二个列表的最佳方法吗？[](http://toblerity.github.com/shapely/manual.html)

 **谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:12:15.650

```
converted = map(tuple, points) # Python 2
converted = list(map(tuple, points)) # or BlackBear's answer for Python 3
converted = [tuple(x) for x in points] # another variation of the same 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:11:02.747

```
converted = [(a,b) for a,b in points] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T21:16:28.827

```
converted = [tuple(l) for l in points] 
```

与@BlackBear 给出的解决方案相比，这适用于任意大小的子列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:14:30.633

```
points = [tuple(x) for x in points] 
```**

# python - 3维字典

> ID：14224067
> 
> 赞同：5
> 
> 时间：2013-01-08T21:09:20.347
> 
> 标签：python, dictionary, python-2.7

```
subjects = {
    0:9,'fail': 0,
   9:14, 'pass': 25,
   15:17, 'merit': 40,
    18:20,'Distinction': 50
} 
```

我希望上面的字典包含 3 个维度。用户输入将在初始数字之间。根据用户输入的数字，应显示以下消息。例如。4 是不合格 0 分，10 是合格 25 分，以此类推。

```
inputs = ['irish','english','french','italian','dutch','german']
for i in range(1, 7):
    inputs.append(raw_input('Enter mark for {}: '.format(i))) 
```

我希望循环询问爱尔兰语等的输入标记

```
print sum(subjects[name][value] for name in inputs) 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:25:22.013

字典基于键的散列存储其值。

这意味着字典查找仅返回其键与查找中使用的键**完全**匹配的条目。

您不能将键设为“3 到 5 范围内的任何数字”并期望查找“4”。

但是，您可以做的是复制字典条目：

```
subject_ranges = [(0, 8, 'fail', 0),
                  (9, 14, 'pass', 25),
                  (15, 17, 'merit', 40),
                  (18, 20, 'Distinction', 50)]
subjects = {}
for low, high, descr, points in subject_ranges:
   for score in range(low, high+1):
      subjects[score] = {'description': descr, 'value': points} 
```

并像这样收集输入：

```
input_names = ['irish','english','french','italian','dutch','german']
scores = []
for i in range(len(input_names)):
    scores.append(int(raw_input('Enter mark for %s: ' % input_names[i]))) 
```

现在，此代码将按照您的意愿打印总分：

```
print sum(subjects[score]['value'] for score in scores) 
```

这**不是**“3 维字典”，也不是类似的东西。它是一个字典，其键是整数，其值是双元素字典（如果您愿意，可以使用 NamedTuple）。但是从您的问题来看，您实际上并不需要比这更复杂的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:53:53.700

您还可以将值范围放入元组中，然后这些元组用作字典的键。（请注意，作为键的列表不起作用，因为它们不可散列。）

```
In [36]: subjects = {
   ....:     tuple(range(10)): {
   ....:         'descr': 'fail',
   ....:         'points': 0
   ....:     },
   ....:     tuple(range(10, 15)): {
   ....:         'descr': 'pass',
   ....:         'points': 25,
   ....:     },
   ....:     tuple(range(15, 18)): {
   ....:         'descr': 'merit',
   ....:         'points': 40
   ....:     },
   ....:     tuple(range(18, 21)): {
   ....:         'descr': 'Distinction',
   ....:         'points': 50
   ....:     }
   ....: } 
```

然后，您可以像这样查询字典：

```
In [43]: score = 0

In [44]: vals = [5, 15, 20, 2, 12]

In [45]: for val in vals:
   ....:     for key in subjects:
   ....:         if val in key:
   ....:             score += subjects[key]['points']
   ....:             print subjects[key]['descr']
   ....:             break 
fail
merit
Distinction
fail
pass

In [46]: score
Out[46]: 115 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:20:48.103

您可以使用查找范围的自定义范围字典。

```
#! /usr/bin/python3.2

class RangeDict (dict):
    class AmbiguityException (Exception): pass

    def __getitem__ (self, key):
        hits = [ (a, b) for a, b in self.keys () if a <= key < b]
        if not hits: {} [key]
        if len (hits) > 1: raise RangeDict.AmbiguityException ()
        #for python3
        return super ().__getitem__ (hits [0] )
        #for python2.7:
        #return super (RangeDict, self).__getitem__ (hits [0] )

subjects = { (0, 9): 'fail',
    (9, 15): 'pass',
    (15, 18): 'merit',
    (18, 21): 'Distinction'}

rd = RangeDict (subjects)
for x in range (21): print (x, rd [x] ) 
```

编辑：我没有看到`python-2.7`标签。用户`super (cls, inst)`而不是`super ()`.

# python - 使用熊猫数据框的内存泄漏

> ID：14224068
> 
> 赞同：12
> 
> 时间：2013-01-08T21:09:25.340
> 
> 标签：python, pandas, memory-leaks, memory-leak-detector, objgraph

我`pandas.DataFrame`在多线程代码中使用（实际上是`DataFrame`被调用的自定义子类`Sound`）。我注意到我有内存泄漏，因为我的程序的内存使用量逐渐增加超过 1000 万，最终达到我的计算机内存的 ~100% 并崩溃。

我使用[objgraph](http://mg.pov.lt/objgraph/)尝试跟踪此泄漏，并发现实例的数量`MyDataFrame`一直在增加，而它不应该：其`run`方法中的每个线程都创建一个实例，进行一些计算，将结果保存在一个文件中并退出......所以不应该保留任何引用。

使用`objgraph`我发现内存中的所有数据帧都有类似的参考图：

![在此处输入图像描述](../Images/55d81306f5c72c4dc795f499f72b30f5.png)

我不知道这是否正常……看起来这就是将我的对象保存在内存中的原因。任何想法，建议，见解？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T21:35:53.490

确认索引基础设施中存在某种内存泄漏。这*不是*由上述参考图引起的。让我们将讨论移至 GitHub（SO 用于 Q&A）：

[https://github.com/pydata/pandas/issues/2659](https://github.com/pydata/pandas/issues/2659)

编辑：这实际上似乎根本不是内存泄漏，但可能与操作系统内存分配问题有关。请查看 github 问题以获取更多信息

# php - php中的数组交集

> ID：14224069
> 
> 赞同：0
> 
> 时间：2013-01-08T21:09:27.367
> 
> 标签：php, html

我有这个片段：

```
$tableau = array_intersect(GetSearchByRegion($_SESSION['region']),
                       GetSearchByCity($_SESSION['city']),
                       GetSearchByState($_SESSION['state']),
                       GetSearchByCountry($_SESSION['country']),
                       GetSearchByKeywords($_SESSION['keywords']),
                       GetSearchByDate($_SESSION['date']),
                       GetSearchByCompany($_SESSION['company']),
                       GetSearchByCategory($_SESSION['category']));

if(sizeof($tableau) == 0)
{
    header('Location: fail.html');
}
else
{    
    $tableau1 = array_intersect(GetSearchByRegion($_SESSION['region']),
                            GetSearchByState($_SESSION['state']));

    echo "size of state =".sizeof(GetSearchByState($_SESSION['state']))."</br>";
    echo "size total".sizeof($tableau)."</br>";
    echo sizeof($tableau1)."</br>";

    // $_SESSION['liste'] =GetInformationsFromId($tableau);
    // header('Location: list.php');
} 
```

问题是结果是`size of state =1 size total3 3` 我不知道为什么交集不起作用：一个大小为 1 的表在另一个表之间结果通常是一个大小为 au max 等于一个的表。所以：

*   我需要知道错误是什么
*   我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:12:39.397

Array_intersect() 不会消除重复项：

```
php > $x = array('a', 'a', 'b', 'c');
php > $y = array('a', 'b');
php > var_dump(array_intersect($x, $y));
array(3) {
  [0]=>
  string(1) "a"
  [1]=>
  string(1) "a"
  [2]=>
  string(1) "b"
}
php > 
```

注意数组中的重复`a`值。`$x`两者之间只有两个不同的值相同，并且 中只有两个值`$y`，但交集仍然是 3 个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:51:59.273

这是结果：`

```
table state =
array
  0 => 
    array
      0 => string '1' (length=1)
      'id' => string '1' (length=1)
      1 => string '2013-01-01' (length=10)
      'date' => string '2013-01-01' (length=10)
      2 => string 'software engineer' (length=17)
      'title' => string 'software engineer' (length=17)
      3 => string 'wall street' (length=11)
      'state' => string 'wall street' (length=11)
      4 => string 'Newyork' (length=7)
      'city' => string 'Newyork' (length=7)
      5 => string 'alaska' (length=6)
      'region' => string 'alaska' (length=6)
      6 => string 'quality' (length=7)
      'company_name' => string 'quality' (length=7)
table total=
array
  0 => 
    array
      0 => string '1' (length=1)
      'id' => string '1' (length=1)
      1 => string '2013-01-01' (length=10)
      'date' => string '2013-01-01' (length=10)
      2 => string 'software engineer' (length=17)
      'title' => string 'software engineer' (length=17)
      3 => string 'wall street' (length=11)
      'state' => string 'wall street' (length=11)
      4 => string 'Newyork' (length=7)
      'city' => string 'Newyork' (length=7)
      5 => string 'alaska' (length=6)
      'region' => string 'alaska' (length=6)
      6 => string 'quality' (length=7)
      'company_name' => string 'quality' (length=7)
  1 => 
    array
      0 => string '2' (length=1)
      'id' => string '2' (length=1)
      1 => string '2013-01-08' (length=10)
      'date' => string '2013-01-08' (length=10)
      2 => string 'formater' (length=8)
      'title' => string 'formater' (length=8)
      3 => string 'erer' (length=4)
      'state' => string 'erer' (length=4)
      4 => string 'vvv' (length=3)
      'city' => string 'vvv' (length=3)
      5 => string 'colorado' (length=8)
      'region' => string 'colorado' (length=8)
      6 => string 'quality' (length=7)
      'company_name' => string 'quality' (length=7)
  2 => 
    array
      0 => string '3' (length=1)
      'id' => string '3' (length=1)
      1 => string '2013-01-08' (length=10)
      'date' => string '2013-01-08' (length=10)
      2 => string 'hardware engineer' (length=17)
      'title' => string 'hardware engineer' (length=17)
      3 => string 'rgjjer' (length=6)
      'state' => string 'rgjjer' (length=6)
      4 => string 'kjrg' (length=4)
      'city' => string 'kjrg' (length=4)
      5 => string 'oklahoma' (length=8)
      'region' => string 'oklahoma' (length=8)
      6 => string 'quality' (length=7)
      'company_name' => string 'quality' (length=7)

table small=
array
  0 => 
    array
      0 => string '1' (length=1)
      'id' => string '1' (length=1)
      1 => string '2013-01-01' (length=10)
      'date' => string '2013-01-01' (length=10)
      2 => string 'software engineer' (length=17)
      'title' => string 'software engineer' (length=17)
      3 => string 'wall street' (length=11)
      'state' => string 'wall street' (length=11)
      4 => string 'Newyork' (length=7)
      'city' => string 'Newyork' (length=7)
      5 => string 'alaska' (length=6)
      'region' => string 'alaska' (length=6)
      6 => string 'quality' (length=7)
      'company_name' => string 'quality' (length=7)
  1 => 
    array
      0 => string '2' (length=1)
      'id' => string '2' (length=1)
      1 => string '2013-01-08' (length=10)
      'date' => string '2013-01-08' (length=10)
      2 => string 'formater' (length=8)
      'title' => string 'formater' (length=8)
      3 => string 'erer' (length=4)
      'state' => string 'erer' (length=4)
      4 => string 'vvv' (length=3)
      'city' => string 'vvv' (length=3)
      5 => string 'colorado' (length=8)
      'region' => string 'colorado' (length=8)
      6 => string 'quality' (length=7)
      'company_name' => string 'quality' (length=7)
  2 => 
    array
      0 => string '3' (length=1)
      'id' => string '3' (length=1)
      1 => string '2013-01-08' (length=10)
      'date' => string '2013-01-08' (length=10)
      2 => string 'hardware engineer' (length=17)
      'title' => string 'hardware engineer' (length=17)
      3 => string 'rgjjer' (length=6)
      'state' => string 'rgjjer' (length=6)
      4 => string 'kjrg' (length=4)
      'city' => string 'kjrg' (length=4)
      5 => string 'oklahoma' (length=8)
      'region' => string 'oklahoma' (length=8)
      6 => string 'quality' (length=7)
      'company_name' => string 'quality' (length=7) 
```

`

# html - 列表不会水平居中

> ID：14224070
> 
> 赞同：0
> 
> 时间：2013-01-08T21:09:28.390
> 
> 标签：html, css, list, position, center

有没有人建议为什么这个列表不会水平显示和居中。

当 li 项目实际显示为内联时，我确定居中如下......

[http://jsfiddle.net/yLHaB/](http://jsfiddle.net/yLHaB/)

谢谢

HTML：

```
<div id="nav">
<div class="navtable">
<ul id="nav1">
    <li><img src="images/kranznav2.png" alt="kranz"/><a href="index.php">COMPETE</a></li>
    <li><img src="images/thumbnav2.png" alt="thumb"/><a href="score.php">SCORE</a></li>
    <div id="logolist"><li><a href="index.php"><img src="images/logorz.png" width="175em" /></a></li></div>
    <li><img src="images/bagnav2.png" alt="bag"/><a href="index.php">SHOP</a></li>
    <li><img src="images/morenav2.png" alt="more"/><a href="index.php">MORE</a></li>
</ul>
</div>
</div> 
```

CSS：

```
#nav {
    position:relative;
    background:#ffffff;
    width:100%;
    height:0.2em:
    overflow:visible;
    margin-top:-2em;
    font-family:Cusmyrb;
    font-size:75%;

}

#logolist {
    position:absolute;
    padding-top:2em;
    width:250px;
    left:50%;
    margin-left:-100px;
    margin-top:-7%;

}

#nav a {
    display:block;
    margin-right:0% auto;
    padding-left:0% auto;
    color:#343234;
    text-decoration:none;

}

.navtable {
    display:table;
    margin:0 auto;
}

ul#nav1 {

    min-width:700px;
    list-style:none;
    padding-top:20px;
}

ul#nav1 li {
    display:inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:11:03.030

添加如下内容：

```
.navtable {
margin: 0 auto;
width: 90px;
} 
```

您需要为导航设置固定宽度，此示例将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:53:51.397

如果你想让你`ul#nav1`居中，你只需要添加`margin: 0 auto;`它。

在小提琴中你不会看到这个工作，因为你的包装器`div#nav`设置为宽度 100%，如果你设置它`2000px`应该正确显示它。

希望这可以帮助 ：）

# javascript - 将鼠标悬停在 Raphaeljs 中的一组元素上

> ID：14224071
> 
> 赞同：4
> 
> 时间：2013-01-08T21:09:33.030
> 
> 标签：javascript, hover, raphael

我有一个只包含一个矩形的集合。

```
var hoverTrigger = this.paper.set();
var outline = this.paper.rect();
outline.attr({
...
hoverTrigger.push(outline)
this.sprite.push(hoverTrigger); 
```

悬停时，矩形应该展开，并添加一些链接，鼠标关闭后，链接消失，矩形再次变小。

```
hoverTrigger.hover(function () {
  var link = this.paper.text();
  hoverTrigger.push(link);
  outline.animate({
  ...
}, function() {
  link.remove();
  outline.animate({
  ...
}); 
```

但是，似乎悬停功能正在单独应用于集合中的每个项目，而不是整个集合，因为当您将鼠标悬停在链接上时，悬停功能会触发并且链接消失。有时，该框会快速连续地悬停在事件上并悬停在事件上并发出声响。

有没有办法将悬停应用于一组事物，以便在集合中的两个事物之间进行鼠标悬停不会触发悬停？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T22:13:08.033

最近我自己也遇到了这个限制，我决定为 Raphael 写一个小扩展来`hoverInBounds`解决它。

简单地说，一旦鼠标进入元素，我们就会跟踪它何时实际移动到其边界之外——然后执行悬停功能，而不是之前。

演示：http: [//jsfiddle.net/amustill/Bh276/1](http://jsfiddle.net/amustill/Bh276/1)

```
Raphael.el.hoverInBounds = function(inFunc, outFunc) {
    var inBounds = false;

    // Mouseover function. Only execute if `inBounds` is false.
    this.mouseover(function() {
        if (!inBounds) {
            inBounds = true;
            inFunc.call(this);
        }
    });

    // Mouseout function
    this.mouseout(function(e) {
        var x = e.offsetX || e.clientX,
            y = e.offsetY || e.clientY;

        // Return `false` if we're still inside the element's bounds
        if (this.isPointInside(x, y)) return false;

        inBounds = false;
        outFunc.call(this);
    });

    return this;
} 
```

在创建 Raphael 纸对象之前放置上面的代码块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:42:29.313

我之前碰到过这个问题。我找到了 2 个解决方案。

在不透明度设置为 0 的其他元素上创建一个矩形

```
var paper = new Raphael( 0, 0, 100, 100 );
var rect = paper.rect( 0, 0, 100, 100 ).attr({ opacity: 0 });
rect.hover( func_in, func_out ); 
```

这仅适用于具有 1 个整体操作（如点击）的元素。

另一个选项是在悬停一组元素时取消悬停功能

```
var funcOutTimer;

set.hover( function( ) {
    if( funcOutTimer ) { // Hovered into this element in less than 100 milliseconds => cancel
        window.clearTimeout( funcOutTimer);
    } else {
    // do stuff
    }
},
function( ) {
    funcOutTimer = setTimeout( function( ) {
        // do stuff
    }, 100 ); // wait for 100 milliseconds before executing hover out function
}); 
```

基本上，只有在第一次进入一组元素时才会执行悬停功能，而悬停功能只会在最终您悬停的元素不是该集合的一部分时执行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:38:11.823

我发现这适用于以下

```
myCircleElement.hover (
    function(e) { myTextElement.animate({opacity:1}, 800); },
    function(e) {
        var x = e.layerX || e.x,
        y = e.layerY || e.y;
        // Return `false` if we're still inside the element's bounds                                        
        if (this.isPointInside(x, y)) return false;
        // otherwise do something here.. eg below
        myTextElement.animate({opacity:0}, 800); //
    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-10T18:34:13.107

布鲁诺详细介绍的方法有这个小问题：

如果您在其他元素上创建一个矩形，如果其他元素是文本，则无法在网页中选择这些文本。但它有效。

顺便说一下属性 "opacity": 0 是不够的，我不得不在我的情况下添加 "fill": "white" 属性。

您需要像这样将对象放在前面： obj.toFront(); obj 是一个拉斐尔形状，如“rect”等。

我在 mouseover 和 mouseout 事件上对其进行了测试，它可以工作。

在这里检查我的小提琴：[链接到小提琴](http://jsfiddle.net/Daniel_Solis/o316uonm/9/)

```
function withArray(x,y){
    var rect = paper.rect(x, y, 100, 60).attr({
        fill: "green"
    });
    rect.text = paper.text(x+(100/2), y + 30, 'rect w/array').attr({
        'font-size': 12,
        "fill": "white"
    });
    var rectover = paper.rect(x,y,100,60).attr({
        fill: "white",
        opacity: 0
    });
    var myArray = paper.set();
    myArray.push(rect, rect.text, rectover);
    myArray.mouseover(function() {
    var anim = Raphael.animation({
    transform: ['S', 1.5, 1.5, (rect.attr("x")), (rect.attr("y"))]
        }, 100, "backOut", function() {
    });
    myArray.animate(anim);
    }).mouseout(function() {
        var anim = Raphael.animation({
            transform: [""]
        }, 50, "backOut", function() {
   });
   myArray.stop().animate(anim);
});
} 
```

# coldfusion - 如果不实时，如何测试实时会话变量并通过 JavaScript 刷新？

> ID：14224074
> 
> 赞同：0
> 
> 时间：2013-01-08T21:09:38.633
> 
> 标签：coldfusion, coldfusion-8

我正在使用 ColdFusion 8 和 jQuery。

我有一个使用大量 ajax 的页面。单击页面上的按钮时，会将一些数据发送到 CFC 以检索数据。数据检索需要会话变量。如果页面已经闲置了一段时间并且会话已经结束，则页面会产生错误。用户可以单击他想要的所有内容，但不会看到错误，因为它在 ajax 的幕后。Firebug 告诉我会话变量不再存在。这是错误：

```
Element USERINFO.CATALOG_ID is undefined in SESSION. 
```

在我的 CFC 顶部，我将内容从 APPLICATION 和 SESSION 范围移动到 VARIABLES 范围，如下所示：

```
<cfcomponent>

    <cfscript>
    // DEFAULT DATASOURCE
    VARIABLES.DS = APPLICATION.Datasource;
    // SET CATALOG AND MARKET
        VARIABLES.Catalog_ID = SESSION.UserInfo.Catalog_ID;
    VARIABLES.CatalogType = THIS.getCatalogType(VARIABLES.Catalog_ID);
    </cfscript>

    <cffunction name='SomeFunction>
    </cffunction>

<cfcomponent> 
```

什么是测试会话是否仍然处于活动状态的好方法，如果没有，则向页面返回一些内容，指示它刷新自身从而重新启动此会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:35:39.340

实际上，我只是在我们自己的应用程序中遇到了这个问题。在我们的问题中，我们正在处理由于会话超时而丢失/为空的 REQUEST 变量。用户将提交到 a`cfgrid`并且编辑将发布不正确/丢失的数据。

我的解决方案是检查是否存在并正确设置变量。如果其中一个失败，我返回一个假/失败，否则正常处理继续，我返回一个真/成功。

在 CFC 方法中：

```
<cfif NOT structkeyexists(session,"userid") OR len(trim(session.userid)) EQ 0>
  <cfreturn false>
</cfif>
<!--- normal processing --->
<cfreturn true> 
```

然后在主页的回调处理程序中，我处理返回的真/假。如果失败，我会弹出一条警告消息并重新加载页面，该页面会自动将用户重定向回登录页面。

```
var myCallBackHandler = function(r) {
    if (r==true) {
      // normal success processing
    } else {
      // update failed - usually due to timeout
      alert('Your session has timed out. The data was NOT saved. Please log in and try again.') ;
      location.reload(true) ;               
    }           
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:39:32.000

如果我想保持会话打开，我会使用一个非常小的（1 像素）iframe。iframe 中的页面只是每 x 秒进行一次元刷新，这使会话保持活动状态。

话虽如此，我很少想保持会话活着。他们超时是有原因的。我们还结合了一个 javasript 倒计时计时器，它可以在会话超时的大约同一时间将用户引导到另一个页面。在上面描述的场景中，用户将无法单击该按钮，因为它不存在。

# wordpress - 如何使用预先存在的站点创建子域 Wordpress 站点

> ID：14224076
> 
> 赞同：1
> 
> 时间：2013-01-08T21:09:40.800
> 
> 标签：wordpress

我正在安装 Wordpress 以将 CMS 功能作为我现有网站的功能提供。

我有一个当前的网站 (www.mywebsite.com)，我有兴趣拥有几个特定于客户的网站：customer1.mywebsite.com；customer2.mywebsite.com 每个都有一系列支持 CMS 的功能。

如果我将 WP 安装到子域 (wp.mywebsite.com)，似乎我被迫使用子子域 (customer1.wp.mywebsite.com)。

如果我将 WP 安装到子目录，似乎我无法设置子域。

如果通过我的根目录安装，它会删除我的网站。

有没有可以让我这样做的解决方案：

*   [http://www.mywebsite.com](http://www.mywebsite.com) ...我已有的网站

*   customer1.mywebsite.com ... customer1 的 cms

*   customer2.mywebsite.com ... customer2 的 cms

我没有偏好根 WP 实例的 URL 所在的位置。

在 iis7 上托管

谢谢，

瑞克

# android - 安卓彩信接收器不工作

> ID：14224079
> 
> 赞同：1
> 
> 时间：2013-01-08T21:09:46.650
> 
> 标签：android, broadcastreceiver

几天来，我一直在努力解决这个问题，并决定寻求帮助。我正在尝试让我的 Android 应用程序响应收到的彩信。这是我的主要内容：

```
private IntentFilter filter = new IntentFilter(MMSReceiver.MMS_RECEIVED);
private MMSReceiver mmsReceiver = new MMSReceiver();
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ...

    registerReceiver(mmsReceiver, filter);

    ...
} 
```

我还有一个 MMSReceiver 类：

```
public class MMSReceiver extends BroadcastReceiver {

public static final String MMS_RECEIVED = "android.provider.Telephony.MMS_RECEIVED";

public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(MMS_RECEIVED)){
        System.out.println("b:mms received");
    }
} 
```

在看到另一个问题的建议后，我还尝试制作字符串“android.provider.Telephony.WAP_PUSH_RECEIVED”。此代码适用于 sms，因此它必须是特定于 mms 的。这是我第一次在这里发帖，所以如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:15:51.493

您是否在 AndroidManifest.xml 中声明了它们？您是否将所需的权限添加到清单？

```
<uses-permission android:name="android.permission.RECEIVE_MMS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T14:36:45.590

这对我有用：

在 onCreate() 处：

```
try {
    IntentFilter filter = new IntentFilter();
    filter.addAction("android.provider.Telephony.WAP_PUSH_RECEIVED");
    filter.addDataType("application/vnd.wap.mms-message");
    receivedMMSListener = new ReceivedMMSListener();
    registerReceiver(receivedMMSListener, filter);
} catch(Exception e){
    Log.d(TAG, "----> ERROR ADDING MMS FILTER: " + e.getLocalizedMessage());
} 
```

和广播接收器：

```
 public class ReceivedMMSListener extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent) {
            /*
            "transactionId" - (Integer) The WAP transaction ID
            "pduType" - (Integer) The WAP PDU type
            "header" - (byte[]) The header of the message
            "data" - (byte[]) The data payload of the message
            */

            try {
                Bundle bundle = intent.getExtras();
                Integer transactionId = bundle.getInt("transactionId");
                Integer pduType = bundle.getInt("pduType");
                byte[] header = bundle.getByteArray("header");
                byte[] data = bundle.getByteArray("data");

                Log.d("TAG", "---> MMS | transactionId: " + transactionId.toString());
                Log.d("TAG", "---> MMS | pduType: " + pduType.toString());
                Log.d("TAG", "---> MMS | header: " + header.toString());
                Log.d("TAG", "---> MMS | data: " + data.toString());

            } catch(Exception e){
                Log.d(TAG, "---> ERROR EXTRACTING MMS: " + e.getLocalizedMessage());
            }
        }  
    } 
```

# ruby-on-rails - 红宝石将回形针附件从一个模型复制到另一个模型？

> ID：14224080
> 
> 赞同：20
> 
> 时间：2013-01-08T21:09:56.893
> 
> 标签：ruby-on-rails, ruby, paperclip

我有两个这样的模型：-

模型 1 - 卡片 - 包含对首页
附件名称 = 卡片图像感兴趣的数据的表示
模型 2 - 用户 - 包含用户
附件名称 = 头像

当我创作！一张新卡片，我希望将用户模型中的头像作为新卡片复制到卡片模型中。

有一个简单的衬里吗？

红宝石/导轨/回形针

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-08T21:33:04.327

这应该可以解决问题，如果模型关联，您可以使用`after_create`回调，如果没有，我建议在创建卡的控制器操作中执行此操作。

```
instance_of_model_one.cardimage = instance_of_model_two.avatar
instance_of_model_one.save 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-26T08:52:04.043

```
old_avatar = model1.avatar;
model2.avatar.create(attachment: old_avatar.attachment);
model2.save; 
```

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-10T09:45:17.963

假设您有 2 个模型：

*   用户
*   播放器

您必须从`profile_image`复制`User with id = 1`到`Player with id = 10`。您可以执行以下操作：

```
user = User.find(1)
player = Player.find(10)

player.profile_image = user.profile_image
player.save! 
```

有时这可能会保存文件，但文件大小为 0 字节。在这种情况下，请尝试以下操作：

```
user = User.find(1)
player = Player.find(10)

player.profile_image = user.profile_image.url
player.save! 
```

这将完成工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-11T13:23:29.107

理想情况下，@cih 提到的方法应该有效：

```
instance_of_model_one.cardimage = instance_of_model_two.avatar
instance_of_model_one.save 
```

但就我而言，它是在 S3 中创建一个空白文件。为了解决这个问题，我尝试了以下方法并且它有效：

```
instance_of_model_one.cardimage = instance_of_model_two.avatar.url
instance_of_model_one.save 
```

在第一条语句中传递 URL 而不是对象解决了这个问题。

# php - Cake PHP 异步覆盖呈现错误视图

> ID：14224082
> 
> 赞同：0
> 
> 时间：2013-01-08T21:10:09.837
> 
> 标签：php, jquery, cakephp

我的蛋糕 php 应用程序似乎弄乱了我的叠加层，我正在从另一个视图加载内容。它的工作原理如下：

```
//Show project settings
$(document).ready(function(){
    $('.project-edit').on('click', function () {
        overlay_start('projects/show_project_settings');
    });
});

//Function for overlay
function overlay_start(path) {
    $('#overlay-center').load(path);
    $('#overlay').fadeIn(200);
    $('#overlay-center').fadeIn(200);
} 
```

这是我的 ProjectsController 的方法：

```
//Display project settings overlay
public function show_project_settings() {
    $this->render('/Elements/editable/ProjectSettings');
} 
```

我在项目/索引上，单击链接后，覆盖加载。它确实加载了，但是，它只是加载了我已经打开的相同视图 - 而不是 ProjectSettings.ctp。

有些东西告诉我我在项目控制器中遗漏了一些东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:45:30.553

我发现了问题所在。我的道路通向：

```
.../admin/projects/show_project_settings 
```

但应该导致：

```
.../projects/show_project_settings 
```

所以我所做的是

```
overlay_start( $.gdUrl().root() + 'projects/show_project_settings' ); 
```

然后它找到了正确的路径。

这不是身份验证问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:47:01.370

使用 Html 帮助器构建 url，如下所示：

```
$(document).ready(function(){
    $('.project-edit').on('click', function () {
        overlay_start('".$this->Html->url(array('action' => 'show_project_settings'))."');
    });
}); 
```

我假设你在同一个控制器中，如果没有添加控制器参数

```
$this->Html->url(array('controller' => 'your_controller', 'action' => 'show_project_settings')) 
```

# php - get_page_children() 不返回所有子页面

> ID：14224089
> 
> 赞同：6
> 
> 时间：2013-01-08T21:10:56.530
> 
> 标签：php, wordpress

我在我的 Wordpress 主题中有一个部分，我在其中获取子页面以显示其信息。这就是我现在所拥有的：

```
<?php 
                $my_wp_query = new WP_Query();
                $all_wp_pages = $my_wp_query->query(array('post_type' => 'page'));

                $staff = get_page_children(8, $all_wp_pages);

                foreach($staff as $s){
                    $page = $s->ID;
                    $page_data = get_page($page);
                    $content = $page_data->post_content;
                    $content = apply_filters('the_content',$content);
                    $content = str_replace(']]>', ']]>', $content);
                    echo '<div class="row-fluid"><span class="span4">'; 
                    echo get_the_post_thumbnail( $page ); 
                    echo '</span><span class="span8">'.$content.'</span></div>';
                } 
        ?> 
```

我有五个应该显示的子页面，但只有三个返回。我在 $staff 上使用 print_r 来查看其他页面是否甚至在数组中，但它们不是。我不确定问题可能是什么。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-23T05:44:04.570

`get_page_children()`或没有任何问题`new WP_Query()`。默认情况下`WP_Query`，只返回最后`x`创建的页数。这是强加给的限制`WP_Query`。

`get_page_children()`只需获取由返回的 pages 数组`WP_Query`并从该列表中过滤子页面。根据 WordPress [Codex](http://codex.wordpress.org/Function_Reference/get_page_children)：get_page_children “......不进行任何 SQL 查询来获取孩子。”

### 要解决此问题，只需使用：

```
 $query = new WP_Query( 'posts_per_page=-1' ); 
```

### 您的修复代码：

```
 <?php 
    $my_wp_query = new WP_Query();
    $all_wp_pages = $my_wp_query->query(array('post_type' => 'page', 'posts_per_page' => -1));

    $staff = get_page_children(8, $all_wp_pages);

    foreach($staff as $s){
        $page = $s->ID;
        $page_data = get_page($page);
        $content = $page_data->post_content;
        $content = apply_filters('the_content',$content);
        $content = str_replace(']]>', ']]>', $content);
        echo '<div class="row-fluid"><span class="span4">'; 
        echo get_the_post_thumbnail( $page ); 
        echo '</span><span class="span8">'.$content.'</span></div>';
    } 
    ?> 
```

### 这是一个帮助函数，您可以在需要获取页面子项时调用它

```
 function my_get_page_children( $page_id, $post_type = 'page' ) {
        // Set up the objects needed
        $custom_wp_query = new WP_Query();
        $all_wp_pages    = $custom_wp_query->query( array( 'post_type' => $post_type, 'posts_per_page' => -1 ) );

        // Filter through all pages and find specified page's children
        $page_children = get_page_children( $page_id, $all_wp_pages );

        return $page_children;
    } 
```

### 例子

您使用辅助函数进行编码

```
 foreach(my_get_page_children(8) as $s){
        $page = $s->ID;
        $page_data = get_page($page);
        $content = $page_data->post_content;
        $content = apply_filters('the_content',$content);
        $content = str_replace(']]>', ']]>', $content);
        echo '<div class="row-fluid"><span class="span4">'; 
        echo get_the_post_thumbnail( $page ); 
        echo '</span><span class="span8">'.$content.'</span></div>';
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T00:59:51.237

我遇到了类似的问题 - 看起来 get_page_children 的行为很奇怪......（在我的情况下，对于一个有三个孩子的页面，它返回三个，对于另一个有四个的页面，它返回零！ - 无法解决......）

我通过使用自定义查询来解决它：

```
$params = array(
'post_type'=>'page',
'post_parent'=> 8,
);
$staff = query_posts($params); 
```

这里类似：http: [//www.sanraul.com/2010/08/28/get-page-children/](http://www.sanraul.com/2010/08/28/get-page-children/)

注意：根据您使用它的位置，您可能还需要一个`wp_reset_query();`- 否则`query_posts()`可能会破坏您的主循环！

希望有帮助！- 一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T08:21:37.560

```
$curID = get_the_ID();

query_posts(
    array(
        'post_type'=>'page',
        'post_parent'=>$curID,
        'orderby' => 'menu_order',
        'order' => 'ASC'
    )
);

echo '<ul>';
while ( have_posts() ) : the_post();
    echo '<li><a href="'.get_permalink().'">'.get_the_title().'</a></li>';
endwhile;
echo '</ul>';

wp_reset_query(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-20T12:55:54.057

你可以简单地使用

```
$args = array(
        'post_parent' => $parent_id ,
        'post_type'   => 'page', 
        'numberposts' => -1,
        'post_status' => 'publish' 
    );
    $children = get_children( $args ); 
```

$children 变量将为您提供父 ID 的所有子页面。如果您使用的是 WP_Query，请确保在代码后重置查询以获取更多信息 [https://developer.wordpress.org/reference/functions/get_page_children/](https://developer.wordpress.org/reference/functions/get_page_children/)

在您的functions.php文件中使用此代码并使用父页面ID调用函数

```
 function load_clildren( $parent_id=null ){
    $parent_id  =   ( $parent_id ) ? $parent_id : $post->ID;

    $args = array(
        'post_parent' => $parent_id ,
        'post_type'   => 'page', 
        'numberposts' => -1,
        'post_status' => 'publish' 
    );
    $children = get_children( $args );
    return $children;
} 
```

函数调用方法

```
$ch_pages   =   load_clildren( $parent_id ); 
```

或在父页面中使用

```
$ch_pages   =   load_clildren(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-03T18:16:00.287

**请参阅下面的编辑**

刚刚经历并解决了这个问题，我想我会分享我必须采取的方法。

最初，我使用一个新的 WP_Query 来抓取所有页面，然后将查询结果提供给 get_page_children()：

```
$all_pages = new WP_Query( array( 'post_type' => 'page' ) );
wp_reset_postdata();
$page_id = get_the_ID();

// pass $all_pages as the second parameter
$page_children = get_page_children( $page_id, $all_pages );

foreach ( $page_children as $childObj ) {
    echo '<a href="' . $childObj->guid . '">' . $childObj->post_title . '</a>'
} 
```

无论出于何种原因，上面的代码对我不起作用。

相反，我将 $all_pages 的 'posts' 对象作为第二个参数传递，如下所示：

```
$all_pages = new WP_Query( array( 'post_type' => 'page' ) );
wp_reset_postdata();
$page_id = get_the_ID();

// pass the posts object of $all_pages as the second parameter
$page_children = get_page_children( $page_id, $all_pages->posts );

foreach ( $page_children as $childObj ) {
    echo '<a href="' . $childObj->guid . '">' . $childObj->post_title . '</a>';
} 
```

我希望这可以帮助别人！

* * *

**编辑：** 在 get_page_children() 函数遇到更多麻烦后，我选择了一条完全不同的路线，该路线一直在工作以达到相同的最终结果：

```
$page = get_queried_object();
$children = get_pages( 'child_of=' . $page->ID . '&parents=' . $page->ID );

// loop through the child page links
foreach ( $children as $child ) {
    echo '<a href="' . get_permalink( $child->ID ) . '">' . get_the_title( $child->ID ) . '</a>';
} 
```

# matlab - 使用 octave 中的脚本从文件中加载数据

> ID：14224090
> 
> 赞同：2
> 
> 时间：2013-01-08T21:10:56.527
> 
> 标签：matlab, octave

我尝试在网上查找此内容，但找不到我要查找的内容。我正在尝试编写一个脚本来做我经常做的事情。我希望能够将文件名作为命令参数传入。然后我的脚本开始运行并按照我想要的方式绘制它。所以我需要一个字符串作为脚本的输入。此外，如果输入不是有效的字符串，我想添加检查和保释。

所以我想做这样的事情……（非常感谢）

```
Function retval = load_3d(filename)       
    retval = 1;
    if( !(filename is character string)) // or better check if it is a CSV file :)
             retval = 0;
             Return;
    Endif

    Bla bla
    .
    .
    . 
endfunction 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:37:01.977

您想使用函数`ischar`和。`exist``csvread`

```
function status = load_3d (filename)
    status = false;
    if (ischar (filename) &&
        (exist (filename, "file") && ! exist (filename, "dir")))
        status = true;
        data = csvread (filename);
        ## do stuff with data
    endif
endfunction 
```

请注意，目录只是一种特殊类型的文件，因此`exist (filename, "file")`对于目录将返回 true。

# python - 如何使用 ftplib 正确下载文件，以便为 Windows 添加换行符

> ID：14224091
> 
> 赞同：1
> 
> 时间：2013-01-08T21:10:59.193
> 
> 标签：python, newline, ftplib

多年来，我一直在使用一个非常简单的批处理文件从 UNIX ftp 服务器下载数百万个文件

```
login
passwd
ascii
prompt n
cd to the right directory
get some_file
get another_file
cd to the next directory
repeat the pattern 
```

这样做的好处是它很简单，所有文件都带有 Window 的换行符，因此这些文件可以与我现有的程序一起使用。由于我的路由器发生了一些变化，我不得不编写一个 Python 脚本来提取文件——我的第一个脚本版本非常简单——但它可以工作

```
for key in key_filings:
   for filing in key_filings[key]:
        remote_directory = '/foo/bar/' + key + '/' + filing['key_number']
        ftp.cwd(remote_directory)
        text_file = filing['txt']
        ftp.retrlines('RETR '+ text_file, open(save_dir + text_file,'w').writelines)
        hdr_file = filing['hdr']
        ftp.retrlines('RETR ' + hdr_file, open(save_dir + hdr_file,'w').writelines) 
```

但是，这些文件没有任何明显的换行符。这些文件存储在 unix 系统中。在我使用 Windows CMD shell 下载文件之前，换行符就在那里。我已经尝试发送 ASCII 命令，但正如预期的那样没有任何效果。

由于我的某些代码处理是基于行的，因此我能够访问最初存在的换行符至关重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T22:16:38.147

就像我写一个问题时通常发生的那样，我可以去寻找答案。我想删除这个问题而不是回答它，但我认为可能有像我这样的其他人可以使用这个答案，所以我将发布Fredrik Lundh从这个[网页上拿走的内容。](http://effbot.org/librarybook/ftplib.htm)

我想保存文件而不是像在该脚本中那样将其打印到屏幕上

基本上，retrlines 一次从服务器检索一行（在下面的脚本中，我正在编写该行，因为它添加了换行符。

我不太了解 lamda 函数或回调是什么，所以这是我最终围绕这些概念展开思考的借口。

```
import ftplib
ftp = ftplib.FTP('ftp.some.site', user = 'username', passwd = 'password_for_username')

for key in key_filings:
    for filing in key_filings[key]:
        remote_directory = '/foo/bar/' + key + '/' + filing['key_number']
        ftp.cwd(remote_directory)
        text_file = filing['txt']
        save_text_ref = open(save_dir + text_file, 'w')
        ftp.retrlines('RETR '+ text_file, lambda s, w = save_text_ref.write: w(s+'\n'))
        save_text_ref.close()
        hdr_file = filing['hdr']
        save_hdr_ref = open(save_dir +hdr_file,'w')
        ftp.retrlines('RETR ' + hdr_file, lambda s, w = save_hdr_ref.write: w(s+'\n'))
        save_hdr_ref.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-13T14:25:54.463

喜欢 PyNEwbie 对 lambda 的使用，谢谢。这是相同代码的更通用版本 - 尝试将此作为评论添加到您的帖子中，但它不会使用代码：

```
from ftplib import FTP

def ftp_download_textfile(host, user, passwd, subdir, filename):
    ftp = FTP(host, user=user, passwd=passwd)
    ftp.cwd(subdir)
    fp = open(filename, 'w')
    ftp.retrlines('RETR ' + filename, lambda s, w = fp.write: w(s + '\n'))
    fp.close()

ftp_download_textfile('ftp.example.com', 'skywalker', 'maltesefalcon',
                      'spec/files', 'secretplans.csv') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T23:54:38.660

我在看这个，想知道为什么 ftplib 的创建者决定首先去掉换行符。我四处搜索并没有找到满意的答案，所以我想知道是否进入 ftplib 并更改代码 - 这对我来说似乎比我的第一个答案更简单。因此我在 C:\Python27\Lib 中找到了 ftplib.py 文件

我制作了一个名为 ftplib_myMOD.py 的副本，然后在 IDLE 中打开它。并找到了retrlines函数并对其进行了修改

```
 fp = conn.makefile('rb')
    while 1:
        line = fp.readline()
        if self.debugging > 2: print '*retr*', repr(line)
        if not line:
            break
        #if line[-2:] == CRLF:  Commented out
         #   line = line[:-2]   Commented out
        #elif line[-1:] == '\n': Commented out
          #  line = line[:-1]    commented out 
```

保存文件，关闭 IDLE 并重新启动它。完成此操作并导入后

```
import ftplib_MYMOD as myftp 
```

我发现存在换行符。

我喜欢这种方法，因为这意味着我的步骤比使用 lambda 时要少。不确定这是否是一个很好的做法，但浏览这些函数并从中学习一些东西很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-28T20:19:19.287

为什么要剥离 CRLF 真是太奇怪了。我在 IBM iSeries DB2 上试用它。最终这样做是为了避免每行读取的磁盘文件的 I/O。

```
lines = []
ftp.retrlines('RETR ' + remote_file, lambda d:lines.append(d+'\n'))
f=open(yourfile,'w')
f.writelines(lines)
f.close() 
```

# java - 如何构造多维ArrayLists？

> ID：14224097
> 
> 赞同：0
> 
> 时间：2013-01-08T21:11:06.773
> 
> 标签：java, arraylist

> **可能重复：**
> [如何在 Java 中创建多维数组列表？](https://stackoverflow.com/questions/4401850/how-to-create-multidemensional-arraylist-in-java)

我一直无法理解是否以及如何创建多维 Arraylist。我知道可以从 ArrayList 中添加、删除、检查对象等，并且可以二维制作，但可以制作 3 维。

*   二维`ArrayList<object1,object2,object3>`
*   3D `ArrayList<>`？

我知道只需添加另一组括号，常规数组就可以是多维`int[][]`的，但是 ArrayList 的工作方式是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:16:08.527

我相信您应该能够制作数组列表的数组列表。

```
ArrayList<ArrayList<String>> 
```

例如，如果您想要字符串的二维数组列表。

或者进入第三个：

```
ArrayList<ArrayList<ArrayList<String>>> 
```

对于 3D 数组列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:16:14.827

`ArrayList<ArrayList<Integer>>`是一个 ArrayList，其中包含由整数组成的 ArrayList，换句话说，是一个 3d 整数 ArrayList。

# c# - Webservice 无法使用动态 URL 转换类型：XML 文档中存在错误 (2, 691)

> ID：14224099
> 
> 赞同：0
> 
> 时间：2013-01-08T21:11:09.257
> 
> 标签：c#, web-services

我正在使用 app.config 来区分远程 Web 应用程序的“预览”和“生产”Web 服务 URL。WSDL 在预览版和生产版中是相同的。但是，当我使用与 Visual Studio 在 Web References 文件夹中的 URL 不同的 URL 时，我收到以下错误：`There is an error in XML document (2, 691).`

这是我如何设置代码以使用应用程序设置中定义的 URL 的示例：

```
MyNamespace.MyType.MyService ws = new MyNamespace.MyType.MyService()
{
    Url = System.Configuration.ConfigurationManager.AppSettings["url"]
}; 
```

我做了两个 WSDL 之间的差异，唯一的区别是元素上的`targetNamespace`属性`xsd:schema`和`location`属性。`soap:address`

我将 URL 行为设置为动态，我知道这是可能的，因为我之前使用其他预览/生产应用程序做过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:11:09.257

问题是预览和生产应用程序托管在两个单独的服务器上。将它们托管在同一台服务器（或至少是 web 服务）上允许命名空间保持不变，唯一的区别是 URL。

以前的 Web 服务看起来像这样：

*   生产*-* *http://production.example.com/myapp/webservice.aspx **_***
*   ***预览***---- *http: //preview.example.com/myapp/webservice.aspx*

 **解决方法是像这样托管它：

*   ***生产***- *http://example.com/production/myapp/webservice.aspx _*
***   预览 ---- *http://example.com/**预览**/myapp/webservice.aspx***

 **如果这是不可能的，我知道的唯一其他解决方案是有两个网络参考，一个用于生产，另一个用于预览。缺点是您的命名空间（以及您的类型）会有所不同，并且大多数代码都需要复制。****

# php - 相同字符串的 base64_encode() 值是否不同？

> ID：14224101
> 
> 赞同：7
> 
> 时间：2013-01-08T21:11:13.107
> 
> 标签：php, string, encoding, hash, base64

我想使用一个包含用`base64_encode()`函数作为主键编码的字符串的列。但是我无法得知，如果相同的字符串在使用`base64_encode()`.

我应该在 sql 查询中使用编码字符串检查密钥是否存在，还是应该从数据库中获取所有值并一一解码以查看该密钥是否存在？这取决于知道`base64_encode()`函数是否总是为给定的字符串创建相同的输出。可以？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T21:17:33.227

是的，函数 base64_encode() 总是为给定的字符串产生相同的输出。这称为确定性函数或确定性算法。

[http://en.wikipedia.org/wiki/Deterministic_algorithm](http://en.wikipedia.org/wiki/Deterministic_algorithm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:22:23.313

base64 编码始终以相同的方式对数据进行编码，请注意字符串的原始编码可以产生不同的 base64 编码。

为什么在地球上有人会使用 base64 编码的字符串，因为 PK 打败了我

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:16:49.690

base64_encode 是一致的，并且为相同的输入返回相同的值

# php - MySQL中按日期的SQL Where子句

> ID：14224104
> 
> 赞同：2
> 
> 时间：2013-01-08T21:11:32.997
> 
> 标签：php, mysql

我想知道为什么这个 where 子句在 MySql 中不起作用？我将 runDate 列设置为数据类型“日期”，日期以以下格式显示：

```
<?php
$con = mysql_connect("***","***","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ArnoldsPizzaShop", $con);

$result = mysql_query("SELECT * FROM runinfo WHERE runDate = 2013-01-06");

while($row = mysql_fetch_array($result))
  {
echo  $row['route'] ;
 }

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T21:12:59.067

您需要在日期值周围加上单引号：

```
SELECT * 
FROM runinfo 
WHERE runDate = '2013-01-06' 
```

所以你的代码是：

```
mysql_query("SELECT * FROM runinfo WHERE runDate = '2013-01-06'"); 
```

如果您的`runDate`列还包含时间，那么您可能需要使用：

```
SELECT * 
FROM runinfo 
WHERE Date(runDate) = '2013-01-06' 
```

甚至：

```
SELECT * 
FROM runinfo 
WHERE runDate between '2013-01-06' and '2013-01-07' 
```

# spring - Spring Testcontext 框架中的自动装配

> ID：14224105
> 
> 赞同：1
> 
> 时间：2013-01-08T21:11:35.410
> 
> 标签：spring, integration-testing, autowired, applicationcontext, test-framework

我有一个集成测试，它执行以下操作：

```
@ContextConfiguration( locations={..path to xmls..} )
class IntegTestBase{

   --- some field initializations; ---
}

class MyIntegTest extends IntegTestBase{

   @Test
   public testingMethod(){
      MyClass obj = new MyClass();
      obj.methodToBeTested();

      ---- some assertions ----
   }
}

class MyClass{

   @Autowired
   Something obj1;

   public int methodToBeTested(){

      --- Somecode ---
   }
} 
```

在上面的代码中，我认为，当测试用例运行时，将创建 MyClass 对象，并且所有字段都将被自动装配。但是发生的事情是，当测试运行时，所有自动装配的字段都为空。它没有抱怨找不到 bean 定义，所以我假设测试上下文在这里是可见的。但我不明白为什么它不接线。

另一方面，我可以在测试类中创建这些字段，自动装配它们并将其设置为创建的对象。有人能说出为什么这些字段为空吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:19:42.297

您正在使用`new`运算符创建 Spring bean：

```
MyClass obj = new MyClass(); 
```

这几乎从不工作¹。您需要要求 Spring 容器提供完全可操作的、已初始化的`MyClass`bean 实例，例如在您的测试用例中使用自动装配/DI：

```
@ContextConfiguration( locations={..path to xmls..} )
class IntegTestBase{

  @Autowired
  protected MyClass obj;

} 
```

稍后在您的测试中简单地使用它：

```
@Test
public testingMethod(){
  //don't recreate `obj` here!
  obj.methodToBeTested();

  ---- some assertions ----
} 
```

事实上，这是 Spring Test Support 提供的功能。您还必须记住，`obj`如果是单例，它将在每个测试中指向完全相同的实例`MyClass`，但这通常不是问题。

¹理论上可以使用完整的 AspectJ，但您不想走那条路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:19:46.953

是`MyClass`春豆吗？如果是这种情况，您不应该*自己*创建它的实例（通过使用`new`），而是`@Autowired`像任何其他依赖项一样拥有它，例如

```
class MyIntegTest extends IntegTestBase{

   @Autowired
   MyClass obj;

   @Test
   public testingMethod(){
      obj.methodToBeTested();
      // ...
   }
} 
```

# magento - 将价格规则应用于可配置产品的变体？

> ID：14224108
> 
> 赞同：1
> 
> 时间：2013-01-08T21:12:00.423
> 
> 标签：magento, configurable

我们的服装店是用可配置的产品建造的。我们想创建一个仅针对可配置产品的特定变体的目录价格规则。例如，所有“Guys”衬衫。

除非我遗漏了一些东西，否则 Magento 似乎不可能开箱即用。有没有人找到一种方法来做这样的事情只是使用 Mage 配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:22:07.690

不幸的是，此功能目前不可用。您可以为产品变体设置不同的价格（在可配置产品中的关联产品下），但您不能通过目录价格规则执行相同操作。

不过，有几个扩展可以帮助你（比如[SCP](http://www.magentocommerce.com/magento-connect/simple-configurable-products.html)等）

# java - Java Swing - 带有三个点的组合框

> ID：14224109
> 
> 赞同：1
> 
> 时间：2013-01-08T21:12:07.337
> 
> 标签：java, swing, jcombobox, preferredsize

我的 Swing GUI 中有一个 jComboBox，用于填充我的 SQL 数据库中的值。

一切看起来都很好，但是当我运行应用程序时，我的组合框出现了，例如 [Black ...]，旁边有 3 个点。

请建议我如何删除 3 个点。

已编辑：为我的 jComboBox 添加了代码及其图像

```
 public void fillTankDepth()
{

    String fill = "Select * from swdepth";
    try{
        ps = conn.prepareStatement(fill);
        rs = ps.executeQuery();

        while(rs.next()){
            String depth = rs.getString("depth");
            comboDepth.addItem(depth);

                        }
    }
    catch(Exception e){
    JOptionPane.showMessageDialog(null, e);    
    }
 } 
```

![在此处输入图像描述](../Images/b8f7b127e06e103fbd743ab3484445f4.png)

根据上面的图片，我给了它相当长的宽度，但我无法删除 3 个点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:16:05.750

您可能没有在 GUI 上提供足够的物理空间来显示数据。为您的组合框腾出更多水平空间（即，使其更长）。

**更新**

> 根据上面的图片，我给了它相当长的宽度，但我无法删除 3 个点。

查看您添加的屏幕截图，*我的猜测*是这是一个数据问题。一些 jdbc 驱动程序会为您提供与列长度相同的空格填充字符串，即使数据要短得多。例如，定义为 char(10) 且其中包含值“A”的列可能会从您的查询中返回为

```
“一个 ”
```

. 如果是这种情况，请在将字符串添加到组合之前修剪字符串：

```
String depth = rs.getString("depth").trim(); 
```

此外，根据 mKorbel 的建议，您可以为您的组合设置原型：

```
// if you're using strings, and the max length will be 10
comboDepth.setPrototypeDisplayValue("1234567890"); 
```

请记住，如果空格导致数据比您预期的要长，填充空格（如您的屏幕截图所示）仍然是一个问题。

# javascript - 访问未定义的嵌套对象文字对象？

> ID：14224113
> 
> 赞同：0
> 
> 时间：2013-01-08T21:12:20.883
> 
> 标签：javascript, jquery, forms, object-literal

所以我对对象文字模式非常陌生，但对这种模式及其提供的组织感到非常兴奋。

我正在尝试做的是即时更新电话号码表单字段以格式化为用户类型（###-###-####）。但是，我想让格式化功能成为一种可重用的实用程序，这样我就可以将它相应地分配给其他输入，而无需每次都重写函数的功能......一直在尝试使用 Object Literal 模式

我有一个小提琴设置[http://jsfiddle.net/JF3Vh/3/](http://jsfiddle.net/JF3Vh/3/)

到目前为止，这是我所拥有的……谨慎学习正在进行中……

**HTML**

```
<div id="contactPage">
  <form>

    <label id="lblPhone" for="txtPhone">Your Phone Number:</label>
    <input id="txtPhone" name="phone" type="tel"/>                      

  </form>
</div> 
```

**使用 jQuery 的 JavaScript**

```
var appMobile = {

    utilities: {

        formatPhone : function(){
            alert( "formatPhone is running" );
            $( this ).val().replace(/(\d{3})(\d{3})(\d{4})/, "$1-$2-$3");
        }

    },
    page: {
    home : {function()
       //Some Page specific functions here
    },
    contactForm: function () {
            $( '#txtPhone' ).onchange(function() {
                $(this).appMobile.utilities.formatPhone();
            });
        },
    products : {function()
       //Some Page specific functions here
    },

    }

};

$( document ).ready( function () {

    /*--initialize Scheduling page function--*/
    if ( $( '#contactPage' ) ) { appMobile.page.contactForm(); }

} ); 
```

让我直截了当，谢谢！:)

WizzyBoom

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:16:20.320

我相信这就是你想要的：

```
var appMobile = {
    utilities: {
        formatPhone: function(){
            alert( "formatPhone is running" );
            $( this ).val().replace(/(\d{3})(\d{3})(\d{4})/, "$1-$2-$3");
        }
    },
    page: {
        home: function() {
           //Some Page specific functions here
        },
        contactForm: function () {
            $('#txtPhone').on('change', appMobile.utilities.formatPhone);
        },
        products: function() {}
           //Some Page specific functions here
        }
    }
};

$(function () {
    if ($('#contactPage').length) { 
        appMobile.page.contactForm(); 
    }
}); 
```

此外，您可能对[这个](http://digitalbush.com/projects/masked-input-plugin/)蒙面编辑插件感兴趣。

# javascript - RequireJS：优化脚本并在其中包含 RequireJS 本身

> ID：14224114
> 
> 赞同：4
> 
> 时间：2013-01-08T21:12:21.507
> 
> 标签：javascript, compilation, requirejs, amd, r.js

我有一个以 AMD 形式编写的复杂 JS 项目。它使用 RequireJS。

我的系统应该能够将其功能包含到不同的外部站点。我想将其编译为单个 js 文件并像这样包含它：

```
<script type="text/javascript" src="http://mysystem.com/core-build.js"></script> 
```

我不知道外部站点是否有 requirejs，这就是为什么 requirejs 本身似乎应该包含在 core-build.js 中的原因。编译后的文件应该完全独立于环境。

另一方面，它不应该重新定义外部站点环境。我的系统使用 jquery、knout，并且这些库应该在本地定义，仅用于我的系统目的。它们不应影响站点的全局命名空间。

所以我的问题是如何优化脚本到一个文件，在其中包含 requirejs 本身并将所有内容包装到本地命名空间中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:17:41.200

您可以使用[Grunt](http://gruntjs.com/) [`concat`任务](https://github.com/gruntjs/grunt-contrib-concat)：

```
concat: {
    dist: {
        src: [
            "www/assets/js/libs/require.js",
            "dist/debug/app.js"
        ],

        dest: "www/app_build.js",

        separator: ";"
    }
} 
```

[您可以在Backbone Boilerplate](https://github.com/tbranyen/backbone-boilerplate)上看到一个示例应用程序设置（即使您没有使用 Backbone）。

# css - 将多个按钮附加到 Bootstrap 搜索表单

> ID：14224116
> 
> 赞同：2
> 
> 时间：2013-01-08T21:12:24.720
> 
> 标签：css, twitter-bootstrap

使用 Bootstrap，将多个按钮附加到一个`.form-search`圆角两个附加按钮的右上角。

HTML：

```
<form class="form-search">
  <div class="input-append">
    <input type="text" class="span2 search-query">
    <button type="submit" class="btn">Quick</button>
    <button type="submit" class="btn">Full</button>
  </div>
</form> 
```

见[http://jsfiddle.net/jhfrench/aFYcM/3/](http://jsfiddle.net/jhfrench/aFYcM/3/)

如何调整 CSS，以便只有最后一个按钮获得圆角，中间按钮为“方形”？

* * *

就上下文而言，我可以将多个按钮附加到一个输入，并且只有最右边的按钮才能获得圆角：

```
<div class="alert alert-success">
    Regular input can append two buttons such that the middle button ("Quick") does not have rounded corners:<br />
    <form>
        <div class="input-append">
          <input type="text" class="span2">
            <button type="submit" class="btn">Quick</button>
            <a href="somewhere.html" class="btn">Full</a>
        </div>
    </form>
</div> 
```

见[http://jsfiddle.net/jhfrench/aFYcM/4/](http://jsfiddle.net/jhfrench/aFYcM/4/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T21:12:24.720

我[用 Bootstrap 创建了一个相应的问题](https://github.com/twitter/bootstrap/issues/6415)，但它已关闭（“我们不支持它，并且可能会删除在 3.0 中执行多个按钮的能力。”-mdo）。所以我制作了自己的 CSS 来解决这个问题（请参阅[http://jsfiddle.net/jhfrench/aFYcM/34/](http://jsfiddle.net/jhfrench/aFYcM/34/)）。

`.form-search .input-append .fixed-btn`关键是在* 样式中重新定义（为 0）border-radius 声明，并对`.prepend`. 然后使用选择器声明正确的边界半径规范`:last-child`。

```
.form-search .input-append .fixed-btn, .form-search .input-prepend .fixed-btn {
    margin-left: -1px;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    border-radius: 0;
}

.form-search .input-append .btn:last-child {
    -webkit-border-radius: 0 14px 14px 0;
    -moz-border-radius: 0 14px 14px 0;
    border-radius: 0 14px 14px 0;
} 
```

*--请注意我`.fixed-btn`为小提琴创建的，因为我包含来自 CDN 的 Bootstrap 资产（我无法使用我的更改编辑 CDN 的 CSS）。对于那些倾向于的人，您可以将这些行添加到您的 style.less 文件中，以便更正生成的 CSS：

```
.navbar-search .input-prepend .btn, .navbar-search .input-append .btn {
    margin-left: -1px;
    .border-radius(0 0 0 0);
}
.navbar-search .input-append .search-query {
    .border-radius(14px 0 0 14px);
}
.navbar-search .input-append .btn:last-child {
    .border-radius(0 14px 14px 0);
} 
```

# ruby-on-rails-3 - Rails 3.1 + 嵌套表单 + 客户端验证 + Twitter Bootstrap (v. 1)

> ID：14224118
> 
> 赞同：1
> 
> 时间：2013-01-08T21:12:34.613
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, nested-forms, client-side-validation

根据文档和维基设置客户端验证（3.2.1）和嵌套表单（0.3.1）后，一切都很好，除了一件事：现有的嵌套字段在编辑模式下被错误地唯一性验证，即它们被视为新记录。nested_form 中的现有非嵌套字段按预期进行验证。如果没有验证，所有嵌套字段都会完美保存和更新。

这是我的代码：

**_form.html.erb**

```
 <%= nested_form_for(@package, :validate => true) do |f| %>
     <%= render 'common/error_messages', :target => @package %>
     <div class="clearfix">
        <%= f.label :id %>
        <div class="input"><%= f.text_field :id, :readonly => "readonly" %></div>
     </div>
    ....................

     <h3>Events</h3>

    <div class="clearfix">
        <%= f.fields_for :packvents %>
        <%= f.link_to_add image_tag("icons/plus_16.png"), :packvents %> Add Event
    </div>

    <div class="actions">
            <a><%= f.submit "Save package","class" => "btn primary",:id => "submitBtn" %>       </a>&nbsp&nbsp<a><%= link_to 'Cancel', :back,"class" => "btn"  %></a>
    </div>
    <% end %> 
```

**_packvent_fields.html.erb**

```
 <div id="event" class="clearfix" >
    <%= f.link_to_remove image_tag("icons/delete_16.png"),:class => "event-delete"%>
  <div class="event_input"><%= f.select :event_id, grouped_options_for_select(Pevent.for_select(current_user), selected_key = f.object.event_id, prompt = nil),{},{:validate => true, :class => 'new_event'} %></div>
 </div> 
```

通过结合嵌套表单 wiki 代码的客户端验证回调，动态添加新字段可以正常工作：

**rails.validations.callbacks.js**

```
window.ClientSideValidations.callbacks.element.fail = function(element, message, callback) {
  callback();
  if (element.data('valid') !== false) {
    $('#submitBtn').prop('disabled', true);
    element.parent().find('.message').hide().show('slide', {direction: "up", easing: "easeOutBounce"}, 500);
  }
}

window.ClientSideValidations.callbacks.element.pass = function(element, callback) {
  // Take note how we're passing the callback to the hide() 
  // method so it is run after the animation is complete.
  element.parent().find('.message').hide('slide', {direction: "up"}, 500, callback);

    $('#submitBtn').prop('disabled', false);

} 
```

**应用程序.js**

```
$(document).ready(function() {
$('form').on('nested:fieldAdded', function(event) {
  $(event.target).find(':input').enableClientSideValidations();
})
}); 
```

完全删除回调没有任何效果，删除所有额外的 div、类等也是如此。在基本验证中添加“创建/保存”条件是不可行的 - 它需要在动态添加字段时工作：

**packvent.rb**

> 验证 :event_id, :uniqueness => {:scope => :package_id}

任何想法都非常感谢。

编辑：更奇怪的是，组中的最后一组字段正确验证，即使它是唯一的。与多组有关....

# java - 用Java构造地图的正确方法？

> ID：14224126
> 
> 赞同：1
> 
> 时间：2013-01-08T21:12:56.713
> 
> 标签：java, map, constructor, setter, getter

我正在尝试在可以全局使用的支持 bean 中创建一个可变的 Map 。这是我使用它的方式：

```
private Map<Object, Date> myMap;

public void myMethod(){
      getMyMap().put(myObject, myDate);
    //I have also tried the following with the same results:
    //myMap.put(myObject, myDate);
}

//setter
public void setMyMap(Map<Object, Date> myMap) {
      this.myMap= myMap;
}

//getter
public Map<Object, Date> getMyMap() {
    return myMap;
} 
```

myMap 的 setter 和 getter 是从我正在使用的程序中自动生成的（autogen'd 设置并为其他一切工作）。

当我尝试填充地图时出现错误。它返回一个空指针异常。代码显然已简化，但如果您需要更多信息，我很乐意提供。

我的问题已通过使用以下方法解决：

```
 private Map<Object, Date> myMap = new HashMap<Object, Date>();

public void myMethod(){
    myMap.put(myObject, myDate);
} 
```

如果有人有更多建议，我会很高兴听到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:15:47.777

我几乎可以肯定你在这里有一个设计缺陷。为`map`. 您可能应该将 the`map`作为构造函数参数并改为暴露`put`和方法。`get`例如，这将清除此错误的可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:14:24.600

你确定`setMyMap`会被调用吗？好像它没有，那么`myMap`它将`null`在它被使用时。

如果你希望地图有一个“默认”值，你应该像这样初始化它：

```
private Map<Object, Date> myMap = new HashMap<Object, Date>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:13:57.433

```
private Map<Object, Date> myMap; 
```

因为`myMap`是指向`null`

1）你需要在更新 mmap 之前做 setMyMap

（或者）

2) 将地图声明更改为

```
private Map<Object, Date> myMap = new HashMap<Object, Date>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:14:44.923

在您使用 setMyMap(newMap) 设置之前，变量 myMap 将为空

# forms - 为什么 Zend 中的 viewScript 看不到表单？

> ID：14224132
> 
> 赞同：0
> 
> 时间：2013-01-08T21:13:11.580
> 
> 标签：forms, zend-framework2

您好，我正在尝试在 viewscript 中包含一个表单，但我做不到，我不知道为什么，但是 viewscript 看不到我的表单。在控制器中我有这个：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Authentication\AuthenticationService;
use MyAuth\Form\LoginForm;

class IndexController extends AbstractActionController
{

    public function indexAction()
    {   
        error_log("executing:".__METHOD__); 
        $this->view = new ViewModel();
        $form = new LoginForm();
        if(isset($this->view)){
            error_log("view exists in ".__METHOD__);
        }
        $this->view->form = $form;
    }
} 
```

和视图：

```
<div class="hero-unit">
    <h1><?php echo sprintf($this->translate('Welcome to %sZend Framework 2%s'), '<span class="zf-green">', '</span>') ?></h1>
    <p><?php echo sprintf($this->translate('Congratulations! You have successfully installed the %sZF2 Skeleton Application%s. You are currently running Zend Framework version %s. This skeleton can serve as a simple starting point for you to begin building your application on ZF2.'), '<a href="https://github.com/zendframework/ZendSkeletonApplication" target="_blank">', '</a>', \Zend\Version\Version::VERSION) ?></p>
    <p><a class="btn btn-success btn-large" href="https://github.com/zendframework/zf2" target="_blank"><?php echo $this->translate('Fork Zend Framework 2 on GitHub') ?> &raquo;</a></p>
</div>

<div class="row">
<?php
if(isset($this->form))
{
    error_log("form exists in ViewScript");
}else{
    error_log("form does not exists");
}
?>

    <div class="span4">
        <h2><?php echo $this->translate('Follow Development') ?></h2>
        <p><?php echo sprintf($this->translate('Zend Framework 2 is under active development. If you are interested in following the development of ZF2, there is a special ZF2 portal on the official Zend Framework website which provides links to the ZF2 %swiki%s, %sdev blog%s, %sissue tracker%s, and much more. This is a great resource for staying up to date with the latest developments!'), '<a href="http://framework.zend.com/wiki/display/ZFDEV2/Home">', '</a>', '<a href="http://framework.zend.com/zf2/blog">', '</a>', '<a href="http://framework.zend.com/issues/browse/ZF2">', '</a>') ?></p>
        <p><a class="btn btn-success" href="http://framework.zend.com/zf2" target="_blank"><?php echo $this->translate('ZF2 Development Portal') ?> &raquo;</a></p>
    </div> 
```

怎么了？我已经 2 天试图解决它，但我无法解决它谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:58:41.427

你应该返回 $this->view。我的建议 ：

```
$this->view->setVariable('form'=>$form);
return $this->view; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:24:40.810

Zend Framework 2 的工作方式与 ZF1 有很大不同。您不再需要分配一个名为`$this->view`. 请参阅手册并自行阅读基础知识：

*   [Zend\View 快速入门（部分：控制器和视图模型）](http://framework.zend.com/manual/2.0/en/modules/zend.view.quick-start.html#controllers-and-view-models)

# php - proc 中的 CURSOR 仅锁定正在更新的当前行（同时更新）并且在持续时间内没有其他内容？

> ID：14224136
> 
> 赞同：0
> 
> 时间：2013-01-08T21:13:52.033
> 
> 标签：php, mysql, cursor, innodb, deadlock

请多多包涵，因为我对词汇毫无希望，而且我自己的搜索也无济于事。

我在[这里](https://stackoverflow.com/a/14222414/1382306)了解到，如果我以我想要的方式更新[（](https://stackoverflow.com/a/14106032/1382306) s`GROUP_CONCAT`也存储在用户定义的变量中），我将锁定整个表。

我相当确定最好的方法是`UPDATE`在 a 中逐行排列`CURSOR`，从最高的 PK id 开始，然后递减，因为我确信发生死锁、冲突或其他任何事情的可能性会更低。 （告诉你我的词汇不好）如果我从最近的记录开始。

为 d 的列`UPDATE`没有索引。

我刚刚在[这里](https://stackoverflow.com/a/4735485/1382306)发现默认情况下a`TRIGGER`是 a `TRANSACTION`，所以我将创建一个 proc 并从 php.ini 调用。

事务隔离级别为`REPEATABLE-READ`.

我更关心这些重叠`UPDATE`的 s 会导致死锁而没有发生任何事情，而不是它们需要时间来完成。

所有表 InnoDB。

所有`SELECT`s 和s在 PK id 上`UPDATE`都是d，除了表中的which s 所有 id 都是d。没有加入。没有混乱。别大惊小怪。 `WHERE``CURSOR` `SELECT``SELECT``UPDATE`

也就是说，最后是问题：

1.  会只有一次，`DECLARE`还是也会循环（我更喜欢它只一次）？`SELECT``SELECT``SELECT`
2.  `DECLARE`' ' 的锁会`SELECT`在 proc 期间保留吗（我希望它尽快释放）？
3.  查询完成后是否会立即释放每个行的锁`UPDATE`，还是会在整个过程中保留（我希望在单个`UPDATE`查询完成后释放行锁）？
4.  用户变量的`SELECT`s 是否也会在设置后发布（您猜对了：我更喜欢那些也尽快发布）？
5.  是否有可能使用行锁仍然`SELECT`是`UPDATE`d 行（再次，如果可以的话，我更喜欢）？

提前谢谢了！

**为什么`UPDATE`都开`INSERT`**

在我的网站（在我的个人资料中），我允许用户访问所有提交的链接。这在顺序的基础上很好，我只是引用 id。

但是，我还将它们在 3 种投票类型的自定义算法的组合百分位上进行排名，对 3 种进行同等加权。

问题是在我的算法中，每张选票都会影响所有其他选票。由于我的算法的性质，没有办法解决这个问题。

**一经请求**

我用 PHP 尝试了这条路线。不去。计较太多了。我不太关心用户*立即*获得准确数据，因为页面会自动更新用户的排名，而用户并不聪明，但我不能让用户永远等待，因为我允许快速动态分页。

在视图中计算是更大的灾难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:34:21.637

*   `DECLARE`'s`SELECT`只会**选择**一次，但恐怕这对你没有帮助......
*   `SELECT`游标可能会锁定**某些**内容- 它取决于您的存储引擎：它可以是表、页、行或什么都`OPEN`没有`CLOSE`
*   `UPDATE`只要更新需要，就会锁定。同样，根据您的存储引擎，锁可以是表、页或行（但显然不是什么都没有）

但是您可能会考虑一种完全不同的方法：IIUC，您基本上想要一些排名或百分位数匹配，并且您尝试通过对每个`INSERT`. 这在我的 POV 中有一个大问题：您计算了很多很多不需要的值。如果只计算读取操作会发生什么？

*   如果在两次读取操作之间**总是恰好有一个** `INSERT`，则必须重新计算 allways - 与现在计算 allways 相同的情况。
*   如果两次读取操作之间**没有** `INSERT`s，MySQL 查询缓存会保留之前计算的结果，不会重新运行查询，所以你计算的少。
*   如果两次读取操作之间有**超过 1 个** `INSERT`s，则 N 次插入只需要计算一次。

**因此，按需**计算排名/百分位数永远不会比在 上计算更昂贵`INSERT`，但它有可能显着降低成本。

# asp.net - 根据从数据库返回的数据动态检查gridview中的复选框

> ID：14224140
> 
> 赞同：0
> 
> 时间：2013-01-08T21:14:05.053
> 
> 标签：asp.net, vb.net, gridview

如果第 9 列中的值为 49，我想选中该复选框。

```
Protected Sub grdMyGrid1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles grdMyGrid.RowDataBound

    If e.Row.Cells(9).Text = "49" Then
       ---- some code here -------
    End If

End Sub 
```

复选框的网格视图中的列：

```
 <asp:TemplateField >
                            <ItemStyle HorizontalAlign="Center" />
                            <ItemTemplate>
                                <asp:CheckBox ID="ckMyCheckbox" runat="server" />
                            </ItemTemplate>
                        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:18:29.863

这可以直接在您的 aspx 文件中完成：

```
<asp:CheckBox ID="ckMyCheckbox" runat="server"
          Checked='<%# DataBinder.Eval(Container.DataItem, "DBColumnName") == 49 %>'
/> 
```

这是假设 DBType 是 Int，如果是字符串，则使用`"49"`.

# php - 从 mysql 在查询中创建链接

> ID：14224150
> 
> 赞同：0
> 
> 时间：2013-01-08T21:14:50.117
> 
> 标签：php, mysql, hyperlink

我搜索了很多网站，但我找不到如何从我用 mysql 进行的查询中创建链接。

我希望当有人点击 coureurname 时，他/她会被重定向到另一个页面，但是我如何从这些查询结果中创建可点击的链接。我在下面用php代码发布了我的查询，希望你们能帮助我，因为我真的不知道该怎么做。

```
<html>
<title> lijstcoureur</title>
<head>
<H1> LIJST VAN COUREURS </H1>
</head>

<?php
$con=mysql_connect('localhost','root','****')
or die ('Kan geen verbinding maken met mySQL server');

$db=mysql_select_db('formule1',$con)
or die ('Kan de database niet selecteren');

$selectie=mysql_query("CALL lijstcoureurs()",$con);
if(!selectie)
die('Invalid query:'.mysql_error());
?>
<table border =1>

                        <thead>

                                <tr>
<?php

                                        for($fieldindex=0;$fieldindex<mysql_num_fields($selectie);$fieldindex++)

                                        {

                                                echo '<th>';

                                                echo mysql_field_name($selectie,$fieldindex);

                                                echo '</th>';

                                        }

                                        ?>

                                </tr>

                        </thead>

                        <tbody>

                                <?php

                                /*

                                Loop alle rijen langs en sla het resultaat op in variable $row */

                                        while($row=mysql_fetch_array($selectie))
                                        {

                                                // Begin een nieuwe rij
                                                echo('<tr>');

                                                // Loop alle rijen langs en zet de inhoud in de tabel
                                                for($fieldindex=0;$fieldindex<mysql_num_fields($selectie);$fieldindex++)

                                                {

                                                        echo('<td>');

                                                        echo($row[$fieldindex]);

                                                        echo('</td>');

                                                }

                                                echo('</tr>');

                                        }

                                ?>

                        </tbody>

                </table>

        </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:28:14.083

我不确定你到底想做什么。您的表格是否包含要显示为链接的 URL？然后将它们包装在`<a>`-tags 中。另一方面，如果您想在单击一行时显示一个特殊页面（如详细视图） - 您必须为此实现功能。

例子：

```
// Assuming $row contains the record's database ID at index 0
echo '<a href="/some_url/on/your/server?id=' . $row[0] . "'>Anchor text here</a>'; 
```

这将创建一个指向特殊 URL 的链接并在查询字符串中传递 id。然后，您可以编写另一个 PHP 脚本来处理此 URL，然后可以使用提供的 ID ( `$_GET['id']`) 检索相关记录并显示详细信息页面或其他内容。

您可能想研究 PHP Web 框架，因为自己完成所有这些工作可能很乏味、容易出错并且容易受到攻击。好的框架可以防止 SQL 注入、XSRF 等，并抽象出大部分数据库交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:21:03.307

假设`echo($row[$fieldindex]);`包含链接，您可以这样做：

```
echo "<a href=" . $row[$fieldindex] . ">Anchor text here</a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:21:11.577

将数据库中的查询结果放入标签的`href`属性中。`<a>`

例如：

```
<a href="<?php echo $queryResult; ?>"> My Query Result </a> 
```

# asp.net - SaveAllState() 上的 CryptographicException

> ID：14224154
> 
> 赞同：3
> 
> 时间：2013-01-08T21:15:03.220
> 
> 标签：asp.net, entity-framework, mschart

我有一个 ASP.net 应用程序，它正在加载页面并使用 SQL 查询中的数据显示图表。我可以在部署服务器上运行该页面，但任何不是机器管理员的人似乎都会遇到此异常：

```
[CryptographicException: Error occurred during a cryptographic operation.]
System.Web.Security.Cryptography.HomogenizingCryptoServiceWrapper.HomogenizeErrors(Func`2 func, Byte[] input) +246
System.Web.UI.ObjectStateFormatter.Serialize(Object stateGraph, Purpose purpose) +444
System.Web.UI.Util.SerializeWithAssert(IStateFormatter2 formatter, Object stateGraph, Purpose purpose) +67
System.Web.UI.HiddenFieldPageStatePersister.Save() +175
System.Web.UI.Page.SaveAllState() +1158
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +4860 
```

我不确定是什么无法为我以外的用户序列化。在远程调试会话中，我可以看到我们可以运行 aspx 页面加载中的所有内容，然后抛出异常。对于失败的用户，他们位于测试服务器上的安全组中，对 Web 根具有完全权限。

# visual-studio-2010 - 如何在 Intellisense for C# (Visual Studio 2010) 中禁用自动命名空间解析

> ID：14224157
> 
> 赞同：1
> 
> 时间：2013-01-08T21:15:16.240
> 
> 标签：visual-studio-2010, autocomplete, intellisense, fully-qualified-naming

如何在 Intellisense for C# (Visual Studio 2010) 中禁用自动命名空间解析？

这听起来可能很奇怪，但我需要让完全限定的名称显示如下：

```
System.Windows.Forms.Form form = new System.Windows.Forms.Form(); 
```

代替：

```
Form form = new Form(); 
```

我找不到类似的问题。这在VS2010中可能吗？

**更新**：我知道可读性问题，并且在共享代码时，可以轻松剥离合格的。以这种方式编写代码只是偏好问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:18:17.793

默认情况下，如果您开始输入命名空间，**则会**显示完全限定名称。

因此，首先键入`System`，您将看到`System`命名空间中的符号列表。你可以继续这样，直到你有`System.Windows.Forms.Form`

如果您真的非常非常希望智能停止让您停止解析名称空间，那么您可以删除`using`文件顶部的所有语句，然后在完成后将它们粘贴回去。如果我是你，我不会这样做，但话又说回来，我也不想停止解析命名空间。

# javascript - CKEditor - 样式表解析器 - 有效选择器

> ID：14224158
> 
> 赞同：0
> 
> 时间：2013-01-08T21:15:22.570
> 
> 标签：javascript, regex, ckeditor

我正在将我的 CMS 转换为使用 CKEditor。我目前正在尝试使用样式表解析器。我有大量已定义编辑器样式的网站。使用简单的类声明进行定义：`.[class]`. 默认情况下，选择器会找到`[element].[class]`声明。

我尝试设置`stylesheetParser_validSelectors`：

```
config.stylesheetParser_validSelectors = /\.\w+/; 
```

...但样式选择为空。

我正在使用 Firebug，但在控制台中看不到任何错误。

* * *

**我的解决方案**

我最终使用`stylesSet`配置选项有两个原因：

1.  它使我可以控制为样式选择显示的名称
2.  我可以设置默认值，但允许覆盖

代码：

```
if ((typeof EditorStyleSet === 'undefined')
        || (typeof EditorStyleSet !== 'object')
        || !(EditorStyleSet instanceof Array)) {
    // Allow this variable to be set at the site level
    EditorStyleSet = [
        {name:'Title', element:'span', attributes:{'class':'title'}},
        {name:'Subtitle', element:'span', attributes:{'class':'subTitle'}},
        {name:'Header Text', element:'span', attributes:{'class':'headerText'}},
        {name:'Red', element:'span', attributes:{'class':'red'}},
        {name:'Small', element:'span', attributes:{'class':'small'}},
        {name:'Hi-Lite', element:'span', attributes:{'class':'hi-lite'}}
    ];
}
config.stylesSet = EditorStyleSet; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:34:27.887

默认情况下，您的选择器被阻止 skipSelectors ( `^\.`)：

`config.stylesheetParser_skipSelectors = /(^body\.|^\.)/i`

这是因为 stylesheetparser 插件不是为处理这种情况而设计的。但是，您可以覆盖它：

`config.stylesheetParser_skipSelectors: /^body\./i`

您的样式将在列表中可见，但在视觉上会被破坏。现在看stylesheedparser插件的代码（也是log`aClasses`变量）：

```
for ( i = 0; i < aClasses.length; i++ ) {
    var oElement = aClasses[ i ].split( '.' ),
        element = oElement[ 0 ].toLowerCase(),
        sClassName = oElement[ 1 ];

    styles.push({
        name: element + '.' + sClassName,
        element: element,
        attributes: { 'class': sClassName }
    });
} 
```

稍微修补一下：

```
for ( i = 0; i < aClasses.length; i++ ) {
    var oElement = aClasses[ i ].split( '.' ),
        element, sClassName;

    if ( !oElement.length ) {
        element = '',
        sClassName = oElement;
    } else {
        element = oElement[ 0 ].toLowerCase(),
        sClassName = oElement[ 1 ];
    }

    styles.push({
        name: element + '.' + sClassName,
        element: !element.length ? 'span' : element,
        attributes: { 'class': sClassName }
    });
} 
```

就是这样！

* * *

编辑：为此问题创建[了一张票。](https://dev.ckeditor.com/ticket/9922)

# linux - 在终端上大量重命名并按顺序编号

> ID：14224166
> 
> 赞同：2
> 
> 时间：2013-01-08T21:15:48.710
> 
> 标签：linux, bash, rename, gnu, mv

我想重命名很多文件（一些 jpg 和很多 png 文件）我需要它们在每个文件夹上按顺序编号具有以下结构：

```
.../folder01
    file.png
    file.jpg
.../folder02
    file.png
    file.png
  ..........
.../folder05
    file.png
    file.png 
```

我想要这样的东西：

```
.../folder01
    0001.jpg
    0002.png
.../folder02
    0003.png
    0004.png
  ..........
.../folder05
    0012.png
    0013.png 
```

如何使用 bash 制作它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:27:49.107

这是一种方法：

```
find . \( -name '*.jpg' -o -name '*.png' \) -print  | (i=0; while read f; do 
    let i+=1; mv "$f" "${f%/*}/$(printf %04d "$i").${f##*.}"; 
done) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T15:12:35.817

[这是使用StringSolver](https://github.com/MikaelMayer/StringSolver)自动化工具的另一种方法：

```
mv folder01/file.jpg folder01/0001.jpg
mv folder01/file.png folder01/0002.png
mv 
```

需要第二个示例，因为否则它会考虑使用文件夹名称中的数字重命名所有文件。最后两行也可以简写为一行，它执行动作并立即将其概括：

```
mv -a folder01/file.png folder01/0002.png 
```

免责声明：出于学术目的，我是该作品的合著者，并且正在开发 bash 脚本渲染器。但是您已经可以测试系统了。

# ios6 - 将两个 UITextField 的两个元素相加

> ID：14224169
> 
> 赞同：0
> 
> 时间：2013-01-08T21:16:03.613
> 
> 标签：ios6, uitextfield, xcode4.5, ibaction

我在将一个 UITextField 的元素与另一个 UITextField 的元素相加并将答案显示在第三个 UITextField（称为答案）中时遇到问题。求和将通过按下按钮进行。这是我为 IBAction 提供的代码：

-（IBAction）{

```
 answer.text = [[NSString stringWithFormat:@"%i",([text1.text intValue] + [text2.text intValue])]]; 
```

}

我得到的只是一条错误消息，上面写着“预期标识符”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:44:38.737

您的消息需要一个名称，而您的括号太多。试试这个：

```
-(IBAction)myAction {
  answer.text = [NSString stringWithFormat:@"%i",([text1.text intValue] + [text2.text intValue])];
} 
```

# python - Pandas DataFrames 中的平等 - 列顺序很重要？

> ID：14224172
> 
> 赞同：29
> 
> 时间：2013-01-08T21:16:05.603
> 
> 标签：python, pandas

作为单元测试的一部分，我需要测试两个 DataFrame 是否相等。DataFrames 中列的顺序对我来说并不重要。然而，这对 Pandas 来说似乎很重要：

```
import pandas
df1 = pandas.DataFrame(index = [1,2,3,4])
df2 = pandas.DataFrame(index = [1,2,3,4])
df1['A'] = [1,2,3,4]
df1['B'] = [2,3,4,5]
df2['B'] = [2,3,4,5]
df2['A'] = [1,2,3,4]
df1 == df2 
```

结果是：

```
Exception: Can only compare identically-labeled DataFrame objects 
```

我相信表达式`df1 == df2`应该评估为包含所有`True`值的 DataFrame。`==`显然，在这种情况下，正确的功能应该是什么是有争议的。我的问题是：有没有一种 Pandas 方法可以满足我的要求？也就是说，有没有办法进行忽略列顺序的相等比较？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-01-08T16:04:29.927

最常见的意图是这样处理的：

```
def assertFrameEqual(df1, df2, **kwds ):
    """ Assert that two dataframes are equal, ignoring ordering of columns"""
    from pandas.util.testing import assert_frame_equal
    return assert_frame_equal(df1.sort_index(axis=1), df2.sort_index(axis=1), check_names=True, **kwds ) 
```

当然看看`pandas.util.testing.assert_frame_equal`你可以传递的其他参数

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-08T21:38:58.643

您可以使用以下方式对列进行排序[`sort_index`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_index.html)：

```
df1.sort_index(axis=1) == df2.sort_index(axis=1) 
```

这将评估为所有`True`值的数据框。

* * *

正如@osa 评论的那样，这对于NaN 来说是失败的，并且也不是特别健壮，实际上可能建议使用类似于@quant 答案的东西（注意：如果有问题，我们想要一个布尔值而不是引发）：

```
def my_equal(df1, df2):
    from pandas.util.testing import assert_frame_equal
    try:
        assert_frame_equal(df1.sort_index(axis=1), df2.sort_index(axis=1), check_names=True)
        return True
    except (AssertionError, ValueError, TypeError):  perhaps something else?
        return False 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-10T19:30:53.717

```
def equal( df1, df2 ):
    """ Check if two DataFrames are equal, ignoring nans """
    return df1.fillna(1).sort_index(axis=1).eq(df2.fillna(1).sort_index(axis=1)).all().all() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-31T06:32:30.850

通常你会想要快速的测试，并且排序方法对于较大的索引可能会非常低效（比如如果你使用行而不是列来解决这个问题）。排序方法也容易受到非唯一索引的假阴性影响。

幸运的是，`pandas.util.testing.assert_frame_equal`已经更新了一个`check_like`选项。将此设置为 true 并且在测试中将不考虑排序。

使用非唯一索引，您将获得神秘的`ValueError: cannot reindex from a duplicate axis`. 这是由`reindex_like`重新排列其中一个 DataFrame 以匹配另一个顺序的幕后操作引发的。重新索引比排序快得多，如下所示*。*

```
import pandas as pd
from pandas.util.testing import assert_frame_equal

df  = pd.DataFrame(np.arange(1e6))
df1 = df.sample(frac=1, random_state=42)
df2 = df.sample(frac=1, random_state=43)

%timeit -n 1 -r 5 assert_frame_equal(df1.sort_index(), df2.sort_index())
## 5.73 s ± 329 ms per loop (mean ± std. dev. of 5 runs, 1 loop each)

%timeit -n 1 -r 5 assert_frame_equal(df1, df2, check_like=True)
## 1.04 s ± 237 ms per loop (mean ± std. dev. of 5 runs, 1 loop each) 
```

对于那些享受良好性能比较图的人：

[重新索引与在 int 和 str 索引上排序](https://i.stack.imgur.com/DSWqr.png)（str 更加激烈）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-17T04:47:41.887

仅当行和列标签在框架中匹配时，排序列才有效。假设您有 2 个数据框，单元格中的值相同但标签不同，那么排序解决方案将不起作用。我在使用 pandas 实现 k-modes 集群时遇到了这种情况。

我用一个简单的等于函数来检查单元格是否相等（下面的代码）

```
def frames_equal(df1,df2) :
    if not isinstance(df1,DataFrame) or not isinstance(df2,DataFrame) :
        raise Exception(
            "dataframes should be an instance of pandas.DataFrame")

    if df1.shape != df2.shape:
        return False

    num_rows,num_cols = df1.shape
    for i in range(num_rows):
       match = sum(df1.iloc[i] == df2.iloc[i])
       if match != num_cols :
          return False
   return True 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-20T23:15:34.777

您是否尝试过使用 df1.equals(df2)？我认为 df1==df2 更可靠，但我不确定它是否能解决您的列顺序问题。

[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.equals.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.equals.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-11T08:06:07.123

可能您可能需要函数来比较忽略行和列顺序的 DataFrame？唯一的要求是有一些唯一的列将其用作索引。

```
f1 = pd.DataFrame([
    {"id": 1, "foo": "1", "bar": None},
    {"id": 2, "foo": "2", "bar": 2},
    {"id": 3, "foo": "3", "bar": 3},
    {"id": 4, "foo": "4", "bar": 4}
])
f2 = pd.DataFrame([
    {"id": 3, "foo": "3", "bar": 3},
    {"id": 1, "bar": None, "foo": "1",},
    {"id": 2, "foo": "2", "bar": 2},
    {"id": 4, "foo": "4", "bar": 4}
])

def comparable(df, index_col='id'):
    return df.fillna(value=0).set_index(index_col).to_dict('index')

comparable(f1) == comparable (f2)  # returns True 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-31T11:34:03.110

`assert_frame_equal`from`pandas.testing`是一个检查帧是否相等的函数。如`assert_frame_equal` [文档](https://pandas.pydata.org/docs/reference/api/pandas.testing.assert_frame_equal.html)中所述，如果将`check_like`参数设置为`True`，它将忽略索引和列的顺序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-17T17:01:21.727

当使用包含元组和列表等 python 对象的数据框时，这是`df.eq(df2)`不够`df == df2`的。即使每个数据帧中的相同单元格包含相同的对象，例如`(0, 0)`，相等比较也会导致`False`。为了解决这个问题，在比较之前将所有列转换为字符串：

`df.apply(lambda x: x.astype(str)).eq(df2.apply(lambda x: x.astype(str)))`

# android - 当我将它们放在 XML 文件中的线性布局中时，我的文本字段消失了

> ID：14224181
> 
> 赞同：0
> 
> 时间：2013-01-08T21:16:42.537
> 
> 标签：android, xml, android-linearlayout

我做了一个应用程序，用户可以在某些字段中填写一些信息。这行得通。但是当我想改变布局时，我遇到了问题。我想在彩色块（背景3）中包含用户应填写的字段。因此，我将代码放在我的 XML 文件中的线性布局中，但是当我这样做时，用户应该填写的所有字段都消失了。有谁知道我做错了什么或如何纠正这个问题？

这是我的 XML 文件的代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <LinearLayout 
     xmlns:android="http://schemas.android.com/apk/res/android" 
     android:id="@+id/LinearLayout01" 
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content" 
     android:background="@drawable/background"
     android:orientation="vertical"
     android:padding="30dip">

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:layout_height="0dp"
            android:orientation="vertical"
           >
                     <include layout="@layout/header"/>
         </LinearLayout>

         <LinearLayout
              xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="0dp"
             android:layout_weight="6"
             android:background="@color/background3"
             android:orientation="vertical" >   
            <TextView 
                android:id="@+id/button1_label" 
                android:layout_height="fill_parent" 
                android:layout_width="wrap_content" 
                android:text="Voer hieronder je rooster in:" 
                android:textSize="24.5sp" 
                android:layout_gravity="center" 
                android:layout_marginBottom="25dip" />

            <TextView 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:text="Dag:" 
                android:layout_gravity="center" 
                android:textSize="14.5sp" />

           <Spinner
                android:id="@+id/dag_spinner"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <TextView 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:text="Uur:" 
                android:layout_gravity="center" 
                android:textSize="14.5sp" />

            <EditText 
                android:id="@+id/uur" 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" />

            <TextView 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:text="Vak:" 
                android:layout_gravity="center" 
                android:textSize="14.5sp" />

            <EditText 
                android:id="@+id/vak" 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" />

            <TextView 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:text="Docent:" 
                android:layout_gravity="center" 
                android:textSize="14.5sp" />

            <EditText 
                android:id="@+id/docent" 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" />

            <TextView 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:text="Lokaal:" 
                android:layout_gravity="center" 
                android:textSize="14.5sp" />

            <EditText 
                android:id="@+id/lokaal" 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" />

            <LinearLayout 
                android:id="@+id/LinearLayout02" 
                android:orientation="horizontal" 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content" 
                android:paddingLeft="20sp">

                    <Button 
                        android:text="Gegevens opslaan" 
                        android:id="@+id/Button01add" 
                        android:layout_width="wrap_content" 
                        android:layout_height="wrap_content" 
                        android:layout_marginTop="20sp" 
                        android:layout_marginLeft="20sp">  
                    </Button>

                    <Button 
                        android:text="Terug" 
                        android:id="@+id/Button01home" 
                        android:layout_width="wrap_content" 
                        android:layout_height="wrap_content" 
                        android:layout_marginTop="20sp" 
                        android:layout_marginLeft="20sp">      
                    </Button>

            </LinearLayout>
        </LinearLayout>
   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:18:36.583

您的布局的高度是`0dp`，请`wrap_content`改用。所以改成这样：

```
<LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_weight="6"
         android:background="@color/background3"
         android:orientation="vertical" > 
```

而且您不必在每个布局（`xmlns:android="http://schemas.android.com/apk/res/android"`行）中声明 android 命名空间

在你的

```
<TextView 
            android:id="@+id/button1_label" 
            android:layout_height="fill_parent" 
            android:layout_width="wrap_content" 
            android:text="Voer hieronder je rooster in:" 
            android:textSize="24.5sp" 
            android:layout_gravity="center" 
            android:layout_marginBottom="25dip" /> 
```

有一个 25dp 的底边距，尽量减少它。

**编辑：** 并且您`layout_height`的设置为`fill_parent`，将其设置为`wrap_content`

# android - 通过应用内计费解锁试用应用程序

> ID：14224187
> 
> 赞同：2
> 
> 时间：2013-01-08T21:17:06.923
> 
> 标签：android, in-app-billing, in-app, trial

我将在 Google.Play 上发布一个商业应用程序。我有想法**只创建一个版本**。安装后 2 周内免费使用（试用期）。试用期到期后，用户将与建议购买应用程序的**完整终身许可**进行对话，并抛出**标准的应用内计费**（Google.Play 购买托管产品）。

我没有使用 Google.Play 制作的经验。对于更熟练的人的问题：

1.  这是做这些事情的正确方法吗？我的意思是使用应用内购买解锁免费试用应用。
2.  重新安装应用程序/更改设备后恢复交易是否容易？我需要在我的网络服务器上保存一些关于交易的信息吗？
3.  有没有人有这种方式的经验？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T19:38:15.950

回答我自己的问题：

> 这是做这些事情的正确方法吗？我的意思是使用应用内购买解锁免费试用应用。

最后的决定是制作有限的APP，购买托管的内置插件来解锁PRO功能。这个模型对我很有效。用户乐于免费使用某些功能。如果他们需要更多或想要支持开发，他们会购买专业许可证。

> 重新安装应用程序/更改设备后恢复交易是否容易？做

我需要在我的网络服务器或其他东西上保存一些关于交易的信息？* Google 为帐户存储购买的物品。您可以自由请求从应用程序恢复它。所以没问题，你不需要你的服务器。

> 有没有人有这种方式的经验？

找到成功使用相同方式的应用程序。我的应用程序现在就是其中之一。

**建议：为了方便使用 IN-APP 计费 API，找到了非常好的免费和开源库 AndroidBillingLibrary，这使得它相当容易实现。** [https://github.com/robotmedia/AndroidBillingLibrary](https://github.com/robotmedia/AndroidBillingLibrary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T12:14:06.037

对于订阅，您可以使用内置的“免费试用期”功能：

> 您可以为任何订阅提供可配置的试用期。

取自这里：http: [//developer.android.com/google/play/billing/billing_subscriptions.html](http://developer.android.com/google/play/billing/billing_subscriptions.html)

# c# - Lambda 分配局部变量

> ID：14224190
> 
> 赞同：11
> 
> 时间：2013-01-08T21:17:28.573
> 
> 标签：c#, c++, lambda, compiler-errors, local-variables

考虑以下来源：

```
static void Main(string[] args)
{
    bool test;

    Action lambda = () => { test = true; };
    lambda();

    if (test)
        Console.WriteLine("Ok.");
} 
```

它应该编译，对吧？好吧，它没有。我的问题是：根据 C# 标准，这段代码应该编译还是编译器错误？

* * *

错误信息：

```
Use of unassigned local variable 'test' 
```

**注意：**我*知道*，如何修复错误，我*部分知道*，为什么会发生。但是，局部变量是无条件分配的，我猜，编译器*应该*注意到这一点，但它没有。我想知道为什么。

* * *

评论答案：C#*允许*声明未分配的变量，这实际上非常有用，即。

```
bool cond1, cond2;
if (someConditions)
{
    cond1 = someOtherConditions1;
    cond2 = someOtherConditions2;
}
else
{
    cond1 = someOtherConditions3;
    cond2 = someOtherConditions4;
} 
```

编译器正确编译了这段代码，我认为，不分配变量实际上会使代码更好一点，因为：

*   它告诉读者，值是稍后分配的（很可能在下面的条件语句中）
*   强制程序员在内部条件的所有分支中分配变量（如果从一开始就是这段代码的目的），因为如果其中一个分支没有分配其中之一，编译器将拒绝编译代码。

* * *

**在边缘**：那更有趣。考虑 C++ 中的相同示例：

```
int main(int argc, char * argv[])
{
    bool test;

    /* Comment or un-comment this block
    auto lambda = [&]() { test = true; };
    lambda();
    */

    if (test)
        printf("Ok.");

    return 0;
} 
```

如果您将块注释掉，编译将以警告结束：

```
main.cpp(12): warning C4700: uninitialized local variable 'test' used 
```

但是，如果您删除注释，编译器不会发出任何警告。在我看来，它能够确定是否设置了变量。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T21:47:47.323

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T21:22:59.420

您正在使用未分配的变量。即使实际分配了变量，编译器也无法从您发布的代码中推断出它。

无论如何，所有局部变量都应该在声明时初始化，所以这很有趣，但仍然是错误的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T22:02:51.890

当编译器对方法执行控制流分析以确定是否明确分配了变量时，它只会查看当前方法的范围。Eric Lippert 在[这篇博](http://blogs.msdn.com/b/ericlippert/archive/2011/02/21/never-say-never-part-one.aspx)文中讨论了这个问题。理论上，编译器可以分析从“当前方法”中调用的方法，以推断何时明确分配了变量。

> 正如我之前提到的，我们可以进行过程间分析，但在实践中，这会很快变得非常混乱。想象一下一百个相互递归的方法，它们都进入一个无限循环、抛出或调用组中的另一个方法。设计一个可以从复杂的调用拓扑中逻辑推断可达性的编译器是可行的，但可能需要做很多工作。此外，仅当您拥有程序的源代码时，程序间分析才有效。如果这些方法之一在程序集中，而我们只需要处理元数据怎么办？

请记住，您的代码示例并不是真正的单一方法。匿名方法将被重构为另一个类，将创建它的一个实例，并且它将调用一个类似于您的定义的方法。此外，编译器将需要分析`delegate`类的定义以及`Action`您提供的方法实际执行的原因的定义。

因此，虽然编译器知道该变量在该上下文中是可访问的在理论上的可能性范围内，但编译器编写者故意选择不这样做，因为为它编写编译器的复杂性以及（可能显着的）增加及时编译程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:25:31.503

ECMA 标准第 8.3 节变量和参数的片段：

一个变量应该在它的值被获取之前被赋值。这个例子

```
class Test
{
    static void Main() {
    int a;
    int b = 1;
    int c = a + b; // error, a not yet assigned

    }
} 
```

导致编译时错误，因为它尝试在变量 a 被赋值之前使用它。管理明确分配的规则在第 12.3 节中定义。

因此，它声明必须在使用变量之前对其进行赋值，否则会导致编译器错误。因为您正在创建一个委托并调用它，所以委托调用中包含的方法在技术上是未知的。因此编译器不会弄明白。请记住，调用的是委托的 Invoke 方法，而不是实际的方法。

[C# 的 ECMA 标准](http://www.ecma-international.org/publications/standards/Ecma-334.htm)

# linux - bash 命令 - 在 `ls` 中使用 for i 和 if 语句

> ID：14224192
> 
> 赞同：1
> 
> 时间：2013-01-08T21:17:34.660
> 
> 标签：linux, bash

我正在尝试清理一些全部按顺序 1001、1002、1003 命名的目录，但我似乎无法让这个脚本工作以删除值小于数字的目录

目录的内容

```
1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 1011 1012 1013 1014 
```

我的命令

```
for i in `ls`; do if (( $i < 1011 )) then echo rm $i -rf; done 
```

但我得到了错误

```
-su: syntax error near unexpected token `then' 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:26:12.403

```
for i in *; do [ $i -lt 1011 ] && rm -fr $i; done 
```

做这项工作。

注意：这确实会删除文件，而不仅仅是打印删除命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:38:01.683

如此处所述，循环 ls 是不好[的](https://superuser.com/a/418490/114895)。相反，使用 find ，如下所示：

```
find . -regex '\./10[01][0-9]' -exec echo rm '{}' -rf \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:19:39.380

尝试

```
for i in `ls`; do if [ $i -lt 1011 ]; then echo rm $i -rf; fi; done 
```

已编辑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:19:53.980

```
do 
```

这就是原因。

```
for i in `ls` ; do whatever ; done 
```

# ant - ant 跨多个文件夹均匀复制文件列表

> ID：14224194
> 
> 赞同：0
> 
> 时间：2013-01-08T21:17:41.300
> 
> 标签：ant

我正在使用 ant 来驱动一些测试自动化。我有一个扁平文件夹，其中包含大约 100 个相同类型的文件。我想将这些文件均匀地分布在 4 个文件夹中，以将执行分布在几台机器上。因此，该项目将创建四个文件夹，然后运行一百个文件，将一个文件传递到一个文件夹，然后继续。文件 1 转到文件夹 1、2 到 2、3 到 3、4 到 4、5 到 1 等。文件的名称和数量会有所变动。我可以编写一个小实用程序来执行此操作，但如果我可以将其作为 ant 执行的一部分进行，那么维护会更简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:57:37.450

以下示例使用了[groovy ANT 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)，它很好地集成到了 ANT 构建中：

```
<project name="demo" default="distribute">

    <target name="bootstrap">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get dest="${user.home}/.ant/lib/groovy-all.jar" src="http://search.maven.org/remotecontent?filepath=org/codehaus/groovy/groovy-all/2.1.0-beta-1/groovy-all-2.1.0-beta-1.jar"/>
    </target>

    <target name="distribute">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy"/>
        <fileset id="srcFiles" dir="build/src" includes="*.txt"/>
        <groovy>
            def i = 0
            project.references.srcFiles.each {
                ant.copy(file:it, todir:"build/dir/${i % 4}", verbose:true)
                i++
            }
        </groovy>
    </target>

</project> 
```

笔记：

*   使用模运算将 ANT 文件集中包含的文件分发到不同的目录
*   “bootstrap”目标用于从[Maven Central下载和安装 3rd 方任务 jar](http://search.maven.org/#artifactdetails%7Corg.codehaus.groovy%7Cgroovy-all%7C2.1.0-beta-1%7Cjar)

# javascript - ie 7和8中的html文本框不检查图像点击

> ID：14224197
> 
> 赞同：1
> 
> 时间：2013-01-08T21:17:58.327
> 
> 标签：javascript, html, checkbox

我似乎无法让这个复选框在 ie8 中工作，我确实让 JS 与表单一起工作，但我不相信这是导致问题的 JS。我没有检查这是否适用于 ie7，但它确实适用于所有其他主要浏览器。任何人都知道为什么它不起作用？生病提供代码以及一个活生生的例子。

直播：http: [//jsbin.com/ubran/3/edit](http://jsbin.com/uburan/3/edit)

标记：

```
<script type="text/javascript">
function func()
{
var img1= document.getElementById("img1");

if(document.getElementById('interest1').checked)
{
    img1.src = "images/" + "internetbutton.gif";
    img1.name = "off";
}
else
{
    img1.src = "images/" + "internetbuttonchecked.gif";
    img1.name = "on";
}
}
</script>

</head>

<body>
<form>
<p align="center">
<input type="checkbox" name="interest1" id="interest1" value="x">
<input type="checkbox" name="interest2" id="interest2" value="x">
<input type="checkbox" name="interest3" id="interest3" value="x"></p>   
<p align="center">
<label for="interest1" id="label-interest1"><img src="images/img1.jpg" width="781" height="800" onclick="func()" id="img1" /></label>
<label for="interest2" id="label-interest2"><img src="/images/img2.jpg" width="781" height="800" /></label>
<label for="interest3" id="label-interest3"><img src="/images/img3.jpg" width="781" height="800" /></label></P><!-- code making checkbox be an image-->
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T15:41:21.867

我知道这个线程已经有一年了，但我找到了解决方案。

问题是内部的图像`label`捕获了您的点击事件，并且没有传递给标签。中的每个其他元素`label`都会转发事件，但图像不会，至少在 IE 中不会。

因此，唯一要做的就是防止图像使用`pointer-events: none;`.

想象一下您的表单是这样的（注意：在*标签**之外使用输入元素时不会发生该行为`form`*！） ：

```
<form>
    <input type="checkbox" name="interest1" id="interest1" value="1">
    <input type="checkbox" name="interest2" id="interest2" value="2">

    <label for="interest1" id="label-interest1"><img src="some/image1.jpg"/></label>
    <label for="interest2" id="label-interest2"><img src="some/image2.jpg"/></label>
</form> 
```

您的 CSS 将是：

```
label {
    border:1px solid red;
    display:inline-block;
}
label > img {
    width: 100px;
    height: 100px;

    pointer-events: none;
} 
```

可以在此处找到一个实时示例：http: [//jsbin.com/OxOlETU/2/edit](http://jsbin.com/OxOlETU/2/edit)

随意并尝试删除`pointer-events: none;`用于测试目的的行。

**编辑（2014/01/16）：**经过一些测试，这似乎只影响 IE 版本 7、8 和*11*。在 IE 9/10 中，将图像嵌套在 a 中`label`就像一种魅力。

# ios - 搜索 NSManagedObjects 数组

> ID：14224198
> 
> 赞同：1
> 
> 时间：2013-01-08T21:18:00.577
> 
> 标签：ios, core-data, nspredicate, nsmanagedobject

假设我已经检索了一个托管对象数组（一个`Car`对象数组）。可以说 a具有和之`Car`类的属性。s 目前在一个.`make``model``Car``NSArray`

如何找到所有具有属性`honda`值的汽车`make`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:24:15.433

看看`NSPredicate`这个[Using Predicates with Key-Paths](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)

因此，例如：

```
NSString *trendName = @"honda";
NSPredicate *predicate = [NSPredicate predicateWithFormat:
        @"trend like %@", trendName]; // or "trend == %@"

NSArray *filteredArray = [results filteredArrayUsingPredicate:predicate]; 
```

where`trend`是`Car`托管对象的字符串属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:21:32.607

使用[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)搜索/过滤数组。

```
NSString *modelName = @"honda";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"model == %@", modelName];
NSArray *filteredArray = [results filteredArrayUsingPredicate:predicate]; 
```

# java - 将十六进制转换为十进制值

> ID：14224200
> 
> 赞同：0
> 
> 时间：2013-01-08T21:18:16.363
> 
> 标签：java

如果我的十六进制值为 53，那么在 Java 中查看第 6 位和第 7 位的值的最佳方法是什么？位 1 将被视为最低有效位（或字节内的最右边位）。

目标是获取 bit6 和 bit7 并将它们转换为组合的十进制形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:19:42.047

我认为最简单的方法是：

```
int bits7And8 = (byteValue >>> 5) & 3; 
```

这将为您提供最低两位位置的第 6 位和第 7 位。如果您需要它们的值作为`String`：

```
String bits7And8String = Integer.toString(bits7And8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:21:54.573

这很容易：

```
byte b = 53;
boolean bit6 = ((b >> 5) & 1) == 1;
boolean bit7 = ((b >> 6) & 1) == 1; 
```

或者：

```
byte b = 53;
int bit6and7 = b & (0x3 << 5); // Will give: 0 bit7 bit6 0 0 0 0 0 
```

或者：

```
byte b = 53;
int bit6and7 = (b >> 5) & 0x3; // Will give: 0 0 0 0 0 0 bit7 bit6 
```

# oauth - (Google)OpenId 身份验证有 InvalidOperationException

> ID：14224207
> 
> 赞同：2
> 
> 时间：2013-01-08T21:18:40.123
> 
> 标签：oauth, openid, servicestack, dotnetopenauth

我正在尝试使用 ServiceStack.Authentication.OpenId 包在 Google 上启动和运行身份验证。我遵循了 SocialBootStrap 示例，但无法弄清楚我错过了什么。

我已将身份验证提供程序添加到我的 apphost：

```
Plugins.Add(new AuthFeature(() => new CustomUserSession(), new IAuthProvider[] { 
                    new CredentialsAuthProvider(), //HTML Form post of UserName/Password credentials
                    new TwitterAuthProvider(appSettings),       //Sign-in with Twitter
                    new FacebookAuthProvider(appSettings),      //Sign-in with Facebook
                    new GoogleOpenIdOAuthProvider(appSettings), //Sign-in with Goolge OpenId
                    new WsFedSamlAuthProvider(appSettings)
                    }) 
```

我已将配置设置添加到我的 app.config（我正在运行自托管应用程序）：

```
<add key="oauth.googleopenid.AppId" value="XXX" />
<add key="oauth.googleopenid.AppSecret" value="XXX" />
<add key="oauth.googleopenid.RedirectUrl" value="http://XXX" />
<add key="oauth.googleopenid.CallbackUrl" value="http://XXX/api/auth/googleopenid" /> 
```

顺便说一句，AppId 和 AppSecret 不在示例中，但是没有它们我得到了一个不同的错误。

最后，我在登录页面上放置了一个 Web 表单：

```
<form action="/api/auth/googleopenid" method="POST">
    <button class='btn' type='submit'>Sign-in with Google</button>
</form> 
```

当我单击按钮时，出现以下错误：

```
errorCode: InvalidOperation
Exceptionmessage:  No current HttpContext was detected, so an IOpenIdApplicationStore instance must be explicitly provided or specified in the .config file. Call the constructor overload that takes an IOpenIdApplicationStore.stack 
Trace[Auth: 08/01/13 20:49:30]: [REQUEST: {provider:googleopenid}]System.InvalidOperationException: No current HttpContext was detected, so an IOpenIdApplicationStore instance must be explicitly provided or specified in the .config file. Call the constructor overload that takes an IOpenIdApplicationStore. at DotNetOpenAuth.Messaging.ErrorUtilities.VerifyOperation(Boolean condition, String errorMessage, Object[] args) at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.get_HttpApplicationStore() at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor() at ServiceStack.Authentication.OpenId.OpenIdOAuthProvider.Authenticate(IServiceBase authService, IAuthSession session, Auth request) at ServiceStack.ServiceInterface.Auth.AuthService.Authenticate(Auth request, String provider, IAuthSession session, IAuthProvider oAuthConfig) at ServiceStack.ServiceInterface.Auth.AuthService.Post(Auth request) at lambda_method(Closure , Object , Object ) at ServiceStack.ServiceHost.ServiceRunner`1.Execute(IRequestContext requestContext, Object instance, TRequest request) 
```

我已经尽可能地遵循了这些例子，我想我错过了什么？

谢谢你的期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:01:49.560

如错误所述，该问题与没有 HTTP 上下文有关。这是因为我在自托管应用程序中运行，即不在 IIS 中。

要在此环境中工作，必须为 dotnetopenauth 提供自定义应用程序商店。存储是存储加密密钥和随机数的地方，在 IIS 环境中，dotnetopenauth 将使用通过 HTTP 上下文访问的应用程序缓存。

为了解决这个问题，我编写了一个由本机 REDIS 客户端和自定义 OpenIdAuthentication Provider 支持的自定义应用程序商店。

我在这里提出了我的代码要点[https://gist.github.com/miketrebilcock/6652969](https://gist.github.com/miketrebilcock/6652969)。这适用于我基于 OpenId 编写的 STS 服务器，但似乎不适用于 Servicestack 中的 OpenId 提供程序 - 需要进行更多调查。

# ios - Air / As3 / iOS - 背景中的加速度计数据。可能吗？

> ID：14224214
> 
> 赞同：1
> 
> 时间：2013-01-08T21:19:01.057
> 
> 标签：ios, actionscript-3, mobile, air, background-process

是否可以使用 AIR 在后台接收加速度计数据？（类似于 iOS 上的 Nike+）

我读到如果我们使用“Core Motion Framework”和“UIBackgroundModes=location”，Objective-C 是可能的。空气呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:59:54.273

From what I've seen it appears my application goes completely idle when you navigate away to another application/screen. From what I'm reading here it doesn't appear to be possible to keep getting info about the accelerometer.

[http://blogs.adobe.com/airodynamics/2012/05/04/air-ios-background-behavior/](http://blogs.adobe.com/airodynamics/2012/05/04/air-ios-background-behavior/)

Hmm k did a bit more digging around to verify if you could do this with a native extension assuming the built in Accelerometer class doesn't provide the necessary functionality. Apparently the Core Motion framework way of accessing the Accelerometer does allow it to continue to be "polled" in the background: [How Nike+ GPS on iPhone receives accelerometer updates in the background?](https://stackoverflow.com/questions/8716466/how-nike-gps-on-iphone-receives-accelerometer-updates-in-the-background)

Since I own exactly 0 iOS devices I can't really test this one for you but would be interested to hear how it works out, best of luck.

# c# - WPF 拖放源代码

> ID：14224216
> 
> 赞同：8
> 
> 时间：2013-01-08T21:19:17.987
> 
> 标签：c#, wpf, drag-and-drop, adorner

几乎所有关于在 WPF 中处理拖放的 stackoverflow 问题都参考了[这篇文章](http://blogs.msdn.com/b/jaimer/archive/2007/07/12/drag-drop-in-wpf-explained-end-to-end.aspx)。但是，缺少该文章的[源代码](http://jaimersamples.members.winisp.net/samples/dragdrop/drag.zip)。有人有副本或知道在哪里可以找到副本吗？

PS我主要关心的是文章中的这一行：“有更多代码`DragAdorner`，但主要用于在拖动发生时定位装饰器......请参考示例......”我不知道他如何定位拖动装饰器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:29:30.693

我有一些基于原始系列博客文章的工作代码。完整代码太长，无法在此处发布；我已将[其发布到 PasteBin](http://pastebin.com/GK9s3xBq)。

中的代码`DragAdorner`非常简单：

```
internal sealed class DragAdorner : Adorner
{
   private readonly UIElement _child;
   private readonly double _xCenter;
   private readonly double _yCenter;
   private double _leftOffset;
   private double _topOffset;

   public DragAdorner(UIElement owner, UIElement child, bool useVisualBrush, double opacity) : base(owner)
   {
      if (!useVisualBrush)
      {
         _child = child;
      }
      else
      {
         var size = GetRealSize(child);
         _xCenter = size.Width / 2;
         _yCenter = size.Height / 2;

         _child = new Rectangle
         {
            RadiusX = 3,
            RadiusY = 3,
            Width = size.Width,
            Height = size.Height,
            Fill = new VisualBrush(child)
            {
               Opacity = opacity,
               AlignmentX = AlignmentX.Left,
               AlignmentY = AlignmentY.Top,
               Stretch = Stretch.None,
            },
         };
      }
   }

   protected override int VisualChildrenCount
   {
      get { return 1; }
   }

   public double LeftOffset
   {
      get
      {
         return _leftOffset + _xCenter;
      }
      set
      {
         _leftOffset = value - _xCenter;
         UpdatePosition();
      }
   }

   public double TopOffset
   {
      get
      {
         return _topOffset + _yCenter;
      }
      set
      {
         _topOffset = value - _yCenter;
         UpdatePosition();
      }
   }

   private static Size GetRealSize(UIElement child)
   {
      return child == null ? Size.Empty : child.RenderSize;
   }

   public void UpdatePosition(Point point)
   {
      _leftOffset = point.X;
      _topOffset = point.Y;
      UpdatePosition();
   }

   public void UpdatePosition()
   {
      var adorner = Parent as AdornerLayer;
      if (adorner != null) adorner.Update(AdornedElement);
   }

   protected override Visual GetVisualChild(int index)
   {
      if (0 != index) throw new ArgumentOutOfRangeException("index");
      return _child;
   }

   protected override Size MeasureOverride(Size availableSize)
   {
      _child.Measure(availableSize);
      return _child.DesiredSize;
   }

   protected override Size ArrangeOverride(Size finalSize)
   {
      _child.Arrange(new Rect(_child.DesiredSize));
      return finalSize;
   }

   public override GeneralTransform GetDesiredTransform(GeneralTransform transform)
   {
      var result = new GeneralTransformGroup();
      result.Children.Add(new TranslateTransform(_leftOffset, _topOffset));

      var baseTransform = base.GetDesiredTransform(transform);
      if (baseTransform != null) result.Children.Add(baseTransform);

      return result;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:43:17.673

给作者发了邮件，得到的回复是他已经没有这篇文章的源代码了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T22:34:43.643

查看 bea stollnitz 的博客

```
http://www.zagstudio.com/blog/488#.UQRZCL9fA7X 
```

当 WPF 相对较新时，这个拖放示例是最早的示例之一。它确实帮助了我和我的同事......

# sql-server-2008 - 如何使用表值参数查询文本列？

> ID：14224219
> 
> 赞同：0
> 
> 时间：2013-01-08T21:19:38.020
> 
> 标签：sql-server-2008, tsql, table-valued-parameters, like-keyword

我有一个[表值参数](http://msdn.microsoft.com/en-us/library/bb510489%28v=sql.105%29.aspx)(@KEYWORD)，它只有一列，其中包含 0 到多行关键字，这些关键字将针对一两个数据库 (nvarchar) 列（REMARKS 和 SUPPLEMENTAL_REMARKS）进行查询。超级简单的概念。

我遇到的问题是如何编写 SQL 来检查针对一个（或两个）数据库列提供的每个单独的关键字。

这是我未完成的 WHERE 子句部分......

```
WHERE
(
    CASE WHEN EXISTS (SELECT 1 FROM @KEYWORD) THEN
        --check that some combination of either REMARKS or SUPPLEMENTAL_REMARKS contains all supplied values
        CASE WHEN (
        --  RES.REMARKS (or RES.SUPPLEMENTAL_REMARKS) LIKE %keyword[0]%
        --  AND
        --  RES.REMARKS (or RES.SUPPLEMENTAL_REMARKS) LIKE %keyword[1]%
        --  AND
        --  ... (this doesn't work for many reasons, but is just to give an idea)
        ) THEN
            1
        ELSE
            0
        END
    ELSE --TVP (@KEYWORD) not supplied, so ignore this filter
        1
    END
) = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:30:17.523

可以使用 JOIN 吗？然后 DISTINCT 仅返回到源表，因此当您匹配多个关键字时不会得到多行。

```
select distinct res.*
from sourcetable res 
join @keywords kw on res.REMARKS like '%'+kw.keyword+'%' or res.SUPPLEMENTAL_REMARKS like '%'+kw.keyword+'%' 
```

如果您需要全部匹配并在关键字为空时仅显示所有源行

```
select res.id, res.REMARKS, res.SUPPLEMENTAL_REMARKS from (
  select res.id, res.REMARKS, res.SUPPLEMENTAL_REMARKS
  from sourcetable res
  join @keywords kw on res.REMARKS like '%'+kw.keyword+'%' or res.SUPPLEMENTAL_REMARKS like '%'+kw.keyword+'%'
  group by res.id, res.REMARKS, res.SUPPLEMENTAL_REMARKS
  having count(*) = (select count(*) from @keywords)
) k1 UNION ALL SELECT res.id, res.REMARKS, res.SUPPLEMENTAL_REMARKS FROM (
  SELECT * WHERE 0=(select count(*) from @keywords)
) k0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:38:23.687

根据下面的 SQL 注释，您只需要来自 res 的记录，其中所有关键字都与 REMARKS 或 SUPPLEMENTAL_REMARKS 匹配。

```
 --  REMARKS (or SUPPLEMENTAL_REMARKS) LIKE %keyword[0]%
        --  AND
        --  REMARKS (or SUPPLEMENTAL_REMARKS) LIKE %keyword[1]%
        --  AND
        --  ... (this doesn't work for many reasons, but is just to give an idea) 
```

最简单的方法是加入并进行计数并确保它与 @KEYWORD 中的关键字数量相匹配

```
DECLARE @KEYWORDCOUNT as INT
SELECT @KEYWORDCOUNT = COUNT(*) FROM @Keyword

SELECT ID, [REMARKS], [SUPPLEMENTAL_REMARKS]
FROM 
  res r
  INNER JOIN @Keyword k
  ON r.REMARKS like '%' + k.keyword + '%'
     OR r.SUPPLEMENTAL_REMARKS like '%' + k.keyword + '%'

GROUP BY 
  ID,[REMARKS], [SUPPLEMENTAL_REMARKS]
HAVING COUNT(ID) = @KEYWORDCOUNT 
```

一种让它进入你的地方的方法是这样的

```
WHERE
  @KEYWORDCOUNT = 0 
  OR 
  res.id in (SELECT ID
            FROM 
                res r
                INNER JOIN @Keyword k
               ON r.REMARKS like '%' + k.keyword + '%'
                 OR r.SUPPLEMENTAL_REMARKS like '%' + k.keyword + '%'
             GROUP BY 
              ID
             HAVING COUNT(ID) = @KEYWORDCOUNT) 
```

您可能需要考虑将 @KEYWORDCOUNT 作为参数传递，因为 DataTable.Rows.Count 几乎是免费的

[演示](http://sqlfiddle.com/#!6/e1406/16)

# objective-c - NSFormatter 失去精确度？

> ID：14224235
> 
> 赞同：0
> 
> 时间：2013-01-08T21:20:07.647
> 
> 标签：objective-c, cocoa-touch, nsnumberformatter, precision

我意识到还有其他类似的问题，但我的问题似乎并不准确。这是交易。

我有一个应用程序，可以进行计算。我为此使用花车。所有浮点数都可以正常工作，我将浮点值转换`NSNumber`为格式。

```
NSNumberFormatter *numFormatter = [NSNumberFormatter alloc];
    [numFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
    [numFormatter setMinimumFractionDigits:1];
    [numFormatter setMaximumFractionDigits:5];

    NSNumber *insulinRatio = [NSNumber numberWithFloat:insulinRatioCalc];
    NSLog(@"Original Number = %@", insulinRatio); 
```

我的`NSNumber`，insulinRatio，具有准确的精度。但是，当我将其转换为`NSString`with 时`NSNumberFormatter`，它会丢失所有小数精度。

```
NSString *numberAsString = [numFormatter stringFromNumber:insulinRatio];
    NSLog(@"Number = %@", numberAsString); 
```

我对这些最后日志的输出如下：

> 2013-01-08 16:12:27.944 MyApp[84062:c07] 原始编号 = 1.2 2013-01-08 16:12:27.944 MyApp[84062:c07] 编号 = 1

为什么我会失去这种精确度。我知道`NSNumber`转换为双倍，但`NSNumber`这里很好。它是`NSNumberFormatter`. 我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:22:02.183

没关系。我只需要初始化 NSNumberFormatter。#失败时刻。

```
NSNumberFormatter *numFormatter = [[NSNumberFormatter alloc]init]; 
```

解决了这个问题。:)

# jquery - 加载条件检查

> ID：14224236
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:20:08.257
> 
> 标签：jquery

我有一个我称之为页面加载的函数。

有了这个函数，我有一个条件语句：

```
if (marVert > 20) {
   alert('1111111');
} else {
   alert('2222222');
} 
```

警报：1111111，但是如果我将其修改为

```
if (marVert > 20 && marVert <= 68) {
   alert('1111111');
} else {
   alert('2222222');
} 
```

警报给了我 2222222。

我不知道是怎么回事...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:27:02.153

根据您的评论，marVert = 82，所以

```
marVert > 20 && marVert <= 68 
```

是`false`，因此出现 222222 警报。

# mysql - 如何将 MySQL 结果以表格式存储到文件中

> ID：14224240
> 
> 赞同：7
> 
> 时间：2013-01-08T21:20:26.583
> 
> 标签：mysql, formatting, batch-processing

我正在尝试创建一个文件并将我的查询结果存储在其中。我有一个包含单个查询的批处理文件，

```
USE database1;

SELECT * FROM table WHERE name = "abc" INTO OUTFILE output.txt;

QUIT 
```

使用执行此批处理文件，

```
mysql -u root -p -t -vvv < select.sql 
```

但是，结果不是表格格式，并且顶部缺少字段名称。

```
100 abc Brown 32
101 abc Flair 25
102 abc McDonald 45
.
.
. 
```

如果我删除 INTO OUTFILE 语句并在终端上打印结果，那么工作正常。

```
+----+------+---------+-----+
| id | name | surname | age |
+----+------+---------+-----+
| 100| abc  | Brown   |   32|
| 101| abc  | Flair   |   25|
| 102| abc  | McDonald|   45|
+----+------+---------+-----+ 
```

如何在 txt 文件中实现上述目标？

**更新**

特别感谢 GreyBeardedGeek。这是在 GreyBeardedGeek 的帮助下解决此问题的方法。

批处理文件：

```
USE database1;

SELECT * FROM table WHERE name = "abc";

QUIT 
```

和mysql客户端：

```
mysql -u root -p -t -vvv < select.sql > output.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T23:48:44.493

这应该可以解决问题：

```
mysql -u root -p -t -vvv < select.sql | sed '1 d' > output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-02T01:06:09.177

您还可以执行以下操作：

```
mysql -uroot -p DatabaseName -t -e "select * from table" > file.txt 
```

这不需要制作一个SQL文件然后过滤掉第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-15T13:00:14.750

除了使用 mysql 客户端程序选项（mysql --help）之外，还可以在 .my.cnf 文件中配置默认​​值。启用 --table 选项的示例（MacOs、Linux）：

编辑/创建文件：

```
vim ~/.my.cnf 
```

添加/更新：

```
[client]
table 
```

下次您调用 mysql 命令行程序时，它将使用 .my.cnf 文件中的选项以表格格式生成输出，例如与调用的相同：

```
mysql ... --table ... 
```

请注意，命令行选项会覆盖 .my.cnf 文件中的选项。

参考：

*   索取`mysql --help`选项清单
*   [https://dev.mysql.com/doc/refman/8.0/en/option-files.html](https://dev.mysql.com/doc/refman/8.0/en/option-files.html)

# jquery - 使用 jQuery 在另一个 div 中重新显示文本和图像？

> ID：14224244
> 
> 赞同：0
> 
> 时间：2013-01-08T21:20:48.923
> 
> 标签：jquery

我可以为此使用 jQuery，它会是什么样子：

在用 等标记的日历中，`<table>`每个`<td>`日期都有内容，包括文本和图像。

在整个日历上方，我想要一个`<div>`重新显示*当天*`<td>`的内容。

 *我想有一种方法可以检索内容，例如通过 jQuery（我是新手）已经编写的文本和图像，然后在其他地方重新显示。例如在`div`上面的日历中。

有谁知道如何做到这一点？还是我必须使用 PHP？

* * *

更新问题：这是介于`<head></head>`. 但它不起作用。

```
<script>
    var content = $('.current-day .details').html();

    $(document).ready(function(){
    $('#nextHappening').html(content);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:51:07.683

你必须把`var content = $('.current-day .details').html();`里面的`document.ready()`功能

如果您想以动态方式进行操作，例如单击某物，请创建一个类似的功能

```
function copyContent(){
     var content = $('.current-day .details').html();
     $('#nextHappening').html(content);
} 
```

并呼吁事件。

[这](http://api.jquery.com/html/#html2)可以帮助*

# jquery - jQuery Masonry 非传统网格

> ID：14224245
> 
> 赞同：1
> 
> 时间：2013-01-08T21:20:51.717
> 
> 标签：jquery, css, grid, jquery-masonry

我在使用不太传统的网格系统结构实现 jQuery Masonry 插件时遇到问题。“不那么传统”是指它在网格项目包装器 (.gw) 上使用负左边距，等于网格项目 (.g) 的排水沟，以避免整个“.last”类问题或有边距在网格项目的两侧（使用令人敬畏的“inuit.css”网格系统。）

很难描述这个问题，只是项目没有按应有的位置定位，令人讨厌的是，它在 Safari/Opera 中运行良好（无论如何对我来说），但在大多数其他现代浏览器上却惨遭失败。

您可以查看以下两个版本，一个完全没有 JS 来演示网格的工作原理，另一个使用 jQuery Masonry 设置：

没有 JS：[http](http://test.tomblanchard.co.uk/grid-problem/no-js.html) ://test.tomblanchard.co.uk/grid-problem/no-js.html jQuery 砌体设置：[http ://test.tomblanchard.co.uk/grid-problem/with-js.html](http://test.tomblanchard.co.uk/grid-problem/with-js.html)

任何帮助和/或指导都会非常棒，非常感谢，非常感谢，汤姆。

# sharepoint-2010 - SSRS 2008：如何立即生成多个报告？

> ID：14224246
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:20:56.330
> 
> 标签：sharepoint-2010, ssrs-2008, reporting-services

我正在构建一个站点，该站点通过打开带有报告 url 和报告参数的新窗口来显示 SSRS 报告。我可以为他们想要运行的每个报告当前打开一个窗口。

但是，他们还希望选择将报告保存到他们选择的文件共享或 Sharepoint，而不是为每个报告提供一堆浏览器窗口弹出窗口。

我知道我可以使用 SSRS Web 服务来设置一个计划（从请求时间开始在几分钟内运行），它可以将这些文件保存到文件共享（或 Sharepoint），但这似乎是一种获得一次性生成的技巧报告到文件共享或共享点。

有没有其他方法可以立即生成一堆报告，一次，立即，而无需将它们设置在设置为在设置后几分钟运行的调度程序上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:20:14.087

“请注意，他们不想要一份包含所有报告的报告，这些是已经构建的单独报告，他们希望每个报告一个文件/窗口。”

当你说你想要它们一次但一个文件窗口/每个报告时，不确定你想要什么？什么表示层正在显示这个？您可以同时对 Web 服务而不是托管站点进行三个单独的 Web 调用：

h ttp://(servername)/(ReportServer)/PathtoReport1

h ttp://(servername)/(ReportServer)/PathtoReport2

h ttp://(servername)/(ReportServer)/PathtoReport3

代替

h ttp://（服务器名称）/（报告）

如果您只是指 Excel 工作簿上的“单独页面”，您可以使用嵌套其他子报表的一个报表来做到这一点。您可以构建一个包含将页面定义为其属性的矩形对象的主报表，并在每个矩形中放置一个子报表。

或者，您可以制作一个 html 页面，该页面在执行“发布”命令的 HTML 的“表单”对象中分别引用三个调用。

< Form id="SSRSRender" action="http://(servername)/(reportServer)/(report) method="post" target="self">

“但是，他们还希望选择将报告保存到他们选择的文件共享或 Sharepoint，而不是为每个报告弹出一堆浏览器窗口。

我知道我可以使用 SSRS Web 服务来设置一个计划（从请求时间开始在几分钟内运行），它可以将这些文件保存到文件共享（或 Sharepoint），但这似乎是一种获得一次性生成的技巧报告到文件共享或共享点。”

这不是 hack，保存文件的首选方法是使用内置的 Web 服务调度程序。托管报告后（在托管 SSRS 的服务器上），它可以为 SMTP 发送、文件保存和制作快照设置配置。

如果这还不够，您可以在 C# 或 VB.NET 中创建自己的代理类，并尝试构建自己的前端，通过对 Web 服务的 SOAP 请求与 SSRS 对话。

# git - git clone “似乎不是 git 存储库”

> ID：14224248
> 
> 赞同：2
> 
> 时间：2013-01-08T21:20:59.207
> 
> 标签：git, ubuntu, git-clone

当我尝试克隆 git 用户 HOME 之外的远程 git 时出现错误。

```
Cloning into test...
fatal: '/media/raid/repo/test.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我不确定为什么会出现此错误，我想做的是将 git 移动到另一个磁盘。目前 git 驻留在我的 git users HOME 中，当它驻留在用户空间中时，从该 git 克隆我没有问题。我试图通过软链接直接通过挂载路径访问另一个磁盘，但没有成功。

在 git 服务器上运行 Ubuntu 12.04，git 用户具有 ssh 访问权限。

以下是一些基本测试，在我的 RAID 磁盘上，我有一个 test.git 副本。

```
/home/git [git user's home]
lrwxrwxrwx 1 git  git    11 Jan  8 21:22 tst.git -> test.git//
drwxr-xr-x 7 git  git  4096 Jan  8 21:20 test.git/
lrwxrwxrwx 1 git  git    18 Jan  7 06:48 repo -> /media/raid/repo//

/media/raid/repo [The preferred location]
drwxrwxr-x  7 git     git     4096 Jan  4 10:33 test.git/

OK  - git clone gitserver:/home/git/test.git
OK  - git clone gitserver:/home/git/tst.git
NOK - git clone gitserver:/home/git/repo/test.git
NOK - git clone gitserver:/media/raid/repo/test.git 
```

这是我缺少的一些基本 Linux 安全性还是 git 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:44:36.933

找到原因... Git 用户无权访问 /media/raid，这是我的小错误。所以现在我可以软链接到raid，并且可以使用以下语法进行访问：

```
git clone gitserver:repo/test.git 
```

我仍然觉得错误信息很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:28:43.427

看来你的路径不完整。你的路径应该是这样的：`/HOME/USER/media/raid/repo/test.git`

# spring-mvc - Spring中jsp如何映射到portlet控制器

> ID：14224251
> 
> 赞同：0
> 
> 时间：2013-01-08T21:21:05.997
> 
> 标签：spring-mvc, portlet, websphere-portal

我正在为我的 portlet 应用程序使用 Spring Portlet MVC 和 Websphere Portal。在我的jsp中：

```
<portlet:actionURL var="saveFinishUrl">
    <portlet:param name="action" value="saveFinish" />
</portlet:actionURL> 
```

现在，我在 portlet.xml 中定义了一个控制器类。在那个类中，我有一个名为 saveFinish 的方法，注释如下：

```
@ActionMapping(params = "action=saveFinish") 
```

我的问题是，在 jsp 中应该有一个将 jsp 映射到 tejh 控制器类的映射。否则，portlet 容器如何知道应该由哪个控制器类来处理请求？

我知道这`<portlet:actionURL`会生成一个指向正确控制器的 url……但是如何呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:32:57.650

portlet 环境中的 jsp 由特定的 portlet 提供服务。

在 spring mvc 的情况下，第一个 jsp 由具有`@RenderMapping`for`view`模式的控制器决定。

另外你知道你可以使用标签的`action`属性`potlet:actionURL`来设置动作，然后将其用作`@ActionMapping`注释的值吗？

# ios - UIViewController 中的 UIViewcontroller 超出范围

> ID：14224253
> 
> 赞同：2
> 
> 时间：2013-01-08T21:21:18.657
> 
> 标签：ios, drop-down-menu, uiview, uiviewcontroller

我有`UIViewController`两个部分：

*   一个`UIView`

*   具有多个水平排列的下拉菜单并在顶部具有缩略图的栏

因为第二部分有点复杂，所以我决定它是一个`UIViewController`，但现在我有一些担忧：

*   因为我有下拉菜单，所以菜单会超出栏的范围。我该如何处理？

*   有一个`UIViewController`inside a是一个好方法`UIViewController`吗？

*   如何实现下拉菜单？据我所知IOS没有下拉菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:53:08.447

要在另一个控制器中使用控制器，您需要使用自定义容器视图控制器。

*   请参阅*iOS 视图控制器编程指南的*[创建自定义容器视图控制器](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)部分。

**   *另请参阅UIViewController 类参考*的相应[实现容器控制器](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)部分。

    **   另请参阅 WWDC 2011 视频，[Implementing UIViewController Containment](https://developer.apple.com/videos/wwdc/2011/?id=102)

    *   在 iOS 6 中，您可以使用自动使用嵌入 segues 的容器视图设置故事板`addChildViewController`，如果您正在使用故事板，则无需显式调用等。查看 Interface Builder 中的“容器视图”对象。如果您要更改子控制器，则必须使用上述链接中提到的 API，但对于第一个子控制器的配置，您可以在 iOS 6 的 Interface Builder 中进行设置。** 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:05:27.957

关于下拉菜单，我认为它们不适用于触摸界面。有一些替代方案，例如[UISegmentedControl](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html#//apple_ref/doc/uid/TP40006807)类的实例。在这里您可以阅读有关分段控件的 Apple UI 设计指南：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556 -CH13-SW1](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW1)。如果您详细解释一下您想要的 UI 功能，我们可以从用户体验的角度为您提供更好的选择。

如果您坚持使用下拉菜单，则可以使用一些第三方控件库；例如： http: [//www.cocoacontrols.com/](http://www.cocoacontrols.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:53:58.430

在这种情况下，设置控制器遏制可能是正确的方法。唯一的限制是它适用于 iOS 5 及更高版本。

在这里，你必须做的：

```
// add as child VC
[self addChildViewController:_barViewController];

// add it to container view, calls willMoveToParentViewController for us
[_containerView addSubview:_barViewController.view];

// notify it that move is done
[_barViewController didMoveToParentViewController:self]; 
```

在这里，您可以找到[包含 ViewControllers](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)的其他信息。显然 Apple doc 是您的朋友。此外，如果你搜索“uiviewcontroller containment”，你会发现很多东西。

如果您的应用需要针对 iOS 5 不是最低要求的设备，您应该依赖一个`UIViewController`和两个不同的视图。**

# c# - 传递 id 并在 javascript 中查找元素

> ID：14224257
> 
> 赞同：1
> 
> 时间：2013-01-08T21:21:44.340
> 
> 标签：c#, javascript, asp.net

我对 JavaScript 非常陌生，对此我感到很困惑。我正在尝试将`ClientID`a发送`Control`到 js 函数。然后该函数应该找到元素并获取`Control's`值。注意：我正在使用母版页，并且`Control`我正在传递的`ClientID`是`UserControl`.

ASP：

```
//code here

<asp:TableCell runat="server">
    <asp:DropDownList runat="server" ID="variableDDL"/>
    //some ListItems
</asp:Tablecell>

//more cells here

<asp:TableCell runat="server">
    <asp:ImageButton runat="server" ID="iButton" ImageUrl="~/Images/iButton.png" OnClientClick="iButtonClick(<%=variableDDL.ClientID%>);"/>
</asp:TableCell>

//code here 
```

.js：

```
function iButtonClick(ClientID)
{
    var v = document.getElementById(ClientID);
    var val = v.value;
    alert(val);
} 
```

每次我点击按钮，什么都没有发生。将发送的参数更改为`<%#variableDDL.ClientID%>`做同样的事情。将其更改为`'<%=variableDDL.ClientID%>'`或`'<%#variableDDL.ClientID%>'`给出空指针错误，因为它找不到对象。该脚本被正确引用，如果我将其更改为不接受参数并仅产生警报，它就会触发。有人知道我在做什么错吗？

编辑：请求的代码如下所示。

ASP 用户控件：

```
protected void Page_Init(object sender, EventArgs e) {
    DataTable fields = (DataTable) Session["fields"];
    for(int i = 0; i < fields.Rows.Count; i++)
    {
        variableDDL.Items.Add(new ListItem(fields.Rows[i]["Field"].ToString(), fields.Rows[i]["Field"].ToString();
    }
} 
```

渲染的 OnClick HTML： `'<%=variableDDL.ClientID%>'`产生

```
onclick="iButtonClick(&#39;&lt;%=variableDDL.ClientID%>&#39;);" 
```

`<%=variableDDL.ClientID%>`生产

```
onclick="iButtonClick(&lt;%=variableDDL.ClientID%>);" 
```

`'<%#variableDDL.ClientID%>'`生产

```
onclick="iButtonClick(&#39;&lt;%#variableDDL.ClientID%>&#39;);" 
```

`<%#variableDDL.ClientID%>`生产

```
onclick="iButtonClick(&lt;%#variableDDL.ClientID%>);" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:50:51.850

看样子，

```
OnClientClick="iButtonClick(<%=variableDDL.ClientID%>);" 
```

正在逐字呈现 - 它没有替换尖括号的内容。

尝试

```
OnClientClick='iButtonClick("<%=variableDDL.ClientID%>");' 
```

请注意属性的单引号 - 我认为这*确实*会有所不同 - 以及双引号，因此结果变成了 JavaScript 字符串文字。

如果这不起作用，您可能需要设置

```
iButton.OnClientClick = "iButtonClick('" + variableDDl.ClientID + "');"; 
```

在您的代码隐藏事件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:29:13.197

如果您不反对 jQuery，您可以通过向您的选择元素添加一个标识类来轻松执行此操作，因为它获得了一个唯一的客户端 ID。

```
<select id="variableDDL" class='varddl'>
  <option value="1">Value 1</option>
  <option value="2">Value 2</option>
  <option value="3">Value 3</option>
</select>
<button id="btn1" type="button">Click here</click>

$("#btn1").click(function(e){
  var v = $(".varddl:first-child").val();
  alert('Value of '+ $(".varddl:first-child").attr('id') + 'is ' + v);

}); 
```

[点击这里查看小提琴](http://jsfiddle.net/TNCodeMonkey/CGYDS/1/)

更新：纯 JS 版本

```
function btnClick(e){
   //Select the first occurance, [0]
   var ele = document.getElementsByClassName('varddl')[0];
      if(ele){
         //There's the value
         var val = ele.value;
         alert(val);
      }
}
var btn1 = document.getElementById("btn1");
btn1.onclick = btnClick 
```

;

[这是 JS Only Fiddle](http://jsfiddle.net/TNCodeMonkey/VkYFe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:52:44.100

这就是 ASP.Net 的工作方式：您不能在 ASP.Net WebControls 中使用服务器代码 (<%%>)。

您可以通过将 ClientID 直接放在 javascript 代码中来解决此问题：

```
function iButtonClick()
{
    var v = document.getElementById('<%= variableDDL.ClientID %>');
    var val = v.value;
    alert(val);
} 
```

您也可以直接在 OnClientClick 中传递对象，但限制是您只能发送对象本身：

```
OnClientClick="ButtonClick(this);" 
```

# jquery - 使用 jQuery 模糊焦点

> ID：14224258
> 
> 赞同：0
> 
> 时间：2013-01-08T21:21:49.430
> 
> 标签：jquery, jquery-ui

我有一个已加载内容的 jQuery 对话框。当我显示对话框时，焦点设置为显示的第一个项目。通常这不是问题，但我希望所有项目都没有明确的焦点。如何模糊焦点？或者也许将它设置为对话框本身？

对话框的 HTML ID 是“对话框”。我已经尝试过`$("#dialog").focus()`，`$("#dialog :button").blur()`但无济于事。

这是对话框的图片：

![在此处输入图像描述](../Images/4b66937c749784e2137d9f3d3d3c04e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:36:00.783

尝试这个：

[http://jsfiddle.net/mE5fx/](http://jsfiddle.net/mE5fx/)

```
 open:function(){
     $(this).attr('tabindex',-1).css('outline',0).focus(); 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:31:37.590

调用 Blur 将触发 blur 事件。

要将焦点移出文本框，请尝试 $("#dialog").click();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:33:19.523

像这样？[http://jsfiddle.net/MatthewDavis/Dpk2j/2/](http://jsfiddle.net/MatthewDavis/Dpk2j/2/)

```
$(document).ready(function () {
  // putting a value into a button we don't want focused
  $('#mybutton').val('Here I am.');
  // doing something visual to see when focus happens more clearly
  $("input").focus(function () {
    $(this).next("span").css('display','inline').fadeOut(1000);
  });
  // focus on the right input
  $('#dialog').focus();
}); 
```

# java - 覆盖数据库中的资源

> ID：14224262
> 
> 赞同：1
> 
> 时间：2013-01-08T21:22:04.153
> 
> 标签：java, mysql, jpa

我可以将文件上传到数据库（mysql）。当我尝试再次上传相同的文件时，我得到：

“......内部异常：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：重复条目'gg.txt'键'文件名'错误代码：1062调用：INSERT INTO RESOURCE（文件名，覆盖，product_id）值（？ , ?, ?) 绑定 => [gg.txt, false, 1] ..."

现在，当我将标志设置为 true 时，我想启用覆盖上传的文件。

我编写了实现 Upload.StartedListener、Upload.ProgressListener、Upload.Receiver、Upload.FinishedListener、Upload.SucceededListener 和 Upload.FailedListener 的类

这是代码片段

```
@Override
public void uploadStarted(StartedEvent event) {
    progress.setValue(0f);
    progress.setVisible(true);
    cancelButton.setVisible(true);
    uploadField.setVisible(false);
}

@Override
public void updateProgress(long readBytes, long contentLength) {
    progress.setValue(new Float(readBytes / (float)contentLength));
}

@Override
public OutputStream receiveUpload(String filename, String mimeType) {
    OutputStream outputStream = null;
    try {
        String dir = resourceDao.getAbsoluteDir(product);
        // ensures that the dir exists
        new File(dir).mkdirs();
        uploadedFile = new File(dir + filename);
        if (!uploadedFile.exists()) { 
            uploadedFile.createNewFile();
        }
        outputStream = new FileOutputStream(uploadedFile);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return outputStream;
}

@Override
public void uploadSucceeded(SucceededEvent event) {
    checkArgument(product != null, "Product is null."); 
    String filename = uploadedFile.getName();
    Resource res = new Resource();
    res.setFilename(filename);
    res.setProduct(product);
    product.getResources().add(res);
    productDao.save(product);
    eventBus.post(new ResourceAddedEvent(res));
    uploadedFile = null;
}

@Override
public void uploadFailed(FailedEvent event) {
    if (uploadedFile != null && uploadedFile.exists()) {
        uploadedFile.delete();
    }
    uploadedFile = null;        
} 
```

你能给我一些建议，如何启用上传文件的覆盖？

resourceDao的保存方法：

```
@Override
public void save(Resource entity) {
    em.getTransaction().begin();
    em.persist(entity);
    em.getTransaction().commit();
} 
```

em - 实体管理器

资源表

```
@Entity(name = Resource.ENTITY_NAME)
public class Resource {

public static final String ENTITY_NAME = "resource"; 

public static final String COLUMN_ID = "id"; 

public static final String COLUMN_PRODUCT_ID = "product_id"; 

public static final String COLUMN_FILENAME = "filename"; 

public static final String COLUMN_OVERRIDE = "override"; 

public static final String ATTRIBUTE_ID = COLUMN_ID;

public static final String ATTRIBUTE_FILENAME = COLUMN_FILENAME;

public static final String ATTRIBUTE_PRODUCT = "product"; 

public static final String ATTRIBUTE_OVERRIDE = "override"; 

// User identifier. 
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = COLUMN_ID)
private int id;

//Product that the resource belongs to.
@ManyToOne
@JoinColumn(name = COLUMN_PRODUCT_ID, nullable = false)
private Product product;

//Path for the file.
@Column(name = COLUMN_FILENAME, nullable = false, unique = true)
private String filename;

//Flag that indicates if the resource can be override.
@Column(name = COLUMN_OVERRIDE, nullable = false)
private boolean isOverride;

public static String getLabel(String attribute) {
    return Messages.getLabel("product_resource." + attribute); //$NON-NLS-1$
}

//...getters and setters...

@Override
public int hashCode() {
    return Objects.hash(id, filename, getProduct());
}

@Override
public boolean equals(Object obj) {
    if (obj == this) {
        return true;
    }
    if (obj instanceof Resource) {
        Resource resource = (Resource)obj;
        if (resource.id != this.id) {
            return false;
        }
        // if the id match - check the following attributes
        return Objects.equals(filename, resource.filename) && //
                Objects.equals(getProduct(), resource.getProduct());
    }
    return false;
}

@Override
public String toString() {
    return com.google.common.base.Objects.toStringHelper(this) //
            .add(ATTRIBUTE_ID, id) //
            .add(ATTRIBUTE_FILENAME, filename) //
            .toString();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:43:52.640

你想用

```
em.merge(entity); 
```

代替

```
em.persist(entity); 
```

[persist()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#persist%28java.lang.Object%29)直接存储和实体。[merge()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#merge%28java.lang.Object%29)将尝试更新当前实体。如果它不存在，它将存储它。

如果这不起作用，您应该向我们展示您的实体代码。IIRC 正确地在 @Id 列上完成了合并。

**更新**

您总是在创建一个新实体并保存该实体。如果合并工作已经存在，您应该首先在现有数据中进行查找。

在您的实体上创建一个[@NamedQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/NamedQuery.html)（它必须包含在一个@NamedQueries 中）。在您的 dao 上创建一个查找现有文件的方法。更新该实体，然后合并以保存。

# javascript - JSON 数据 if/else 解析

> ID：14224263
> 
> 赞同：0
> 
> 时间：2013-01-08T21:22:07.507
> 
> 标签：javascript, jquery, ajax, long-polling

我正在做一些长轮询（ajax），我正在循环下面的代码部分。上面和下面都有代码正在执行。此代码是内部消息传递系统的一部分。当消息到达时，页面的某个部分会闪烁。如果用户检查消息，它将从 JSON 响应中删除 dash_notify，这需要关闭闪烁。见下文：

```
if (data.dash_notify == '1') {
    var x = '#dash_notif_blink';

    function blinking(x) {
        timer = setInterval(blink, 10);

        function blink() {
            x.fadeOut(400, function () {
                x.fadeIn(400);
            });
        }
    }

    console.log("initiate_dash");
    blinking($(x));
} else if (!data.dash_notify) {
    console.log("good");

    clearInterval(timer);
} 
```

发送到此代码的以下 JSON 响应是：

```
{"current_date_time":"January 8, 2013 - 4:02 pm","dash_notify":"1"} 
```

如果上述数据通过，它会理解初始闪烁。如果以下通过：

```
{"current_date_time":"January 8, 2013 - 4:02 pm"} 
```

然后它抛出一个错误：

```
Uncaught ReferenceError: timer is not defined 
```

我无法弄清楚如何修复“其他”部分正常工作。如果在发送完整的 dash_notify:1 响应时启动代码，则它可以完美运行。按钮会闪烁，然后如果用户检查消息，它将不再发送 dash_notify:1 并且按钮停止闪烁。但是如果代码在没有设置 dash_notify:1 时启动，它不知道如何处理 ClearInterval。

基本上我需要修复其他部分。

我尝试过使用不同的 typeOf === undefined 片段，但它不起作用。

任何帮助表示赞赏。

谢谢！

**编辑：**

这目前正在工作.. Timer 现在在语句上方定义

```
if(data.dash_notify == '1'){

                            var x = '#dash_notif_blink';

                        console.log("initiate_dash");
                        blinking($(x));

                        }else if (typeof timer != "undefined" && timer) { 
                            clearInterval(timer);
    }               
                    } 
```

这是可行的，但有时它会尝试终止计时器，但实际上并没有这样做。这种情况经常发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:06:13.750

看起来它不起作用，因为在您的内部功能`timer`之外不存在。`blinking`我在这里假设您在函数之外没有任何`var timer;`地方`blinking`，这很可能是因为您遇到了错误。

## 为什么会这样：

如果我是对的，并且您没有`timer`在代码中的其他任何地方声明，那么`var timer`将被隐式添加到`blinking`函数的开头：

```
function blinking(x) {
    var timer;
    timer = setInterval(blink, 10);

    function blink() {
        x.fadeOut(400, function () {
            x.fadeIn(400);
        });
    }
} 
```

这会`timer`在内部产生一个局部变量`blinking`。由于您永远不会将其从闭包中传递出去，因此一旦您在该函数之外，它就不存在了。因此，要么您需要拉`timer`入外部上下文（选项 1），要么从内部提供它`blinking`（选项 2）。

## 该怎么办：

如果您想访问`timer`该闭包之外的内容，则必须执行以下两项操作之一：

1：`timer`在外部声明`blinking`：

```
 var timer = null;
 if (data.dash_notify == '1') {
    var x = '#dash_notif_blink';

    function blinking(x) {
        //etc... 
```

2：使其成为的返回值`blinking`：

```
var t;

if (data.dash_notify == '1') {
    var x = '#dash_notif_blink';

    function blinking(x) {
        var timer = setInterval(blink, 10); //note the var keyword for best practice

        function blink() {
            x.fadeOut(400, function () {
                x.fadeIn(400);
            });
        }

        return timer;
    }

    console.log("initiate_dash");
    t = blinking($(x));

} else if (!data.dash_notify) {
    console.log("good");    
    clearInterval(t);
} 
```

这些中的任何一个都可以工作，并且在污染外部命名空间方面或多或少是相同的。我更喜欢选项 2，因为我觉得使用局部变量更容易，直到您需要返回它。

* * *

### 编辑：

您的评论说循环无限运行，这意味着您正在创建一个全新的间隔并`timer`每次都重新分配变量。这是与我上面描述的问题不同的问题。旧的间隔仍然存在，`timer`只是不再指向它。那么如何`clearInterval(timer)`清除所有这些间隔呢？它不能，它只能清除最近的一个。

基本上，你有一大堆计时器都试图让这个东西同时闪烁。

你如何处理这个取决于你想要做什么。最简单的方法是一次运行不超过一个间隔，这意味着您必须`timer`每次都清除。

```
//same as option 1 above except for `clearInterval(timer)` at the 
//beginning of `blinking`
var timer = null;

if (data.dash_notify == '1') {
    var x = '#dash_notif_blink';

    function blinking(x) {
        clearInterval(timer); 
        timer = setInterval(blink, 10); 
```

如果您需要运行多个计时器，则必须以数组或其他方式跟踪它们：

```
var timers = [];
//...
   function blinking(x) {
        timers.push(setInterval(blink, 10));
//...
} else if (!data.dash_notify) {
   timers.forEach(function(timer) {
       clearInterval(timer);
   });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:25:01.040

**这现在工作得很好。** **感谢所有帮助过的人！**

if(data.dash_notify === '1' && t === null ){

```
 var x = '#dash_notif_blink';

                    function blinking(x) {
                        var timer = setInterval(blink, 10); //note the var keyword for best practice

                        function blink() {
                            x.fadeOut(400, function () {
                                x.fadeIn(400);
                            });
                        }
                        return timer;
                    }

                    console.log('initiate_dash_alert');

                    // Data is passed. Parse to see if dash alert should be called. Secondary protection for
                    // multiple timer creation.
                    if(t){return;}else{t = blinking($(x));}

                }else if (!data.dash_notify){    
                    clearInterval(t);
                    console.log('clear_dash_alert');
                    t = null;
                }else{
                    console.log(t);
                    console.log('no_push_events');

                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:25:41.843

不确定您的 typeof 检查做错了什么，因为您实际上并没有显示整个代码，但它应该看起来像这样：

```
if (typeof timer != "undefined" && timer) { 
    clearInterval(timer);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:32:36.690

`timer`基本上在您进入检查程序（循环？）之前定义您的变量：

```
var timer;

... some code ...

if ( data.dash_notify && data.dash_notify == '1') {
    ...
} else if (!data.dash_notify) {
    clearInterval(timer);
} 
```

您可以拨打电话`clearInterval( whatever )` [而不会产生任何后果](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)。即使`whatever`是`null`, `undefined`, 字符串等等。只要确保`timer`存在。

> 将无效 ID 传递给 clearTimeout 没有任何效果（并且不会引发异常）。(MDN)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T21:33:39.583

您收到该错误是因为`timer`仅在`blinking`函数中声明/初始化。在你打电话的地方`clearInterval(timer)`，`timer`不存在。

# javascript - Jquery slideDown on Button Click

> ID：14224266
> 
> 赞同：1
> 
> 时间：2013-01-08T21:22:23.453
> 
> 标签：javascript, jquery

我希望有一个滑动（向下）切换，但希望面板沿着按钮的左边缘整齐排列。我不想硬编码边距、位置、像素等，但希望向下滑动面板始终与（和相对）按钮（左下角）“相关”。

我错过了什么？

```
<!doctype html>
<head>
    <script src='http://code.jquery.com/jquery-1.7.2.min.js'></script>

<style type="text/css">
    .slideToggleBox{
        float:left;
        padding:8px;
        margin:16px;
        border:1px solid red;
        width:200px;
        height:50px;
        background-color:blue;
        color:white;
        position:fixed;
        left:-10.5px;
        top:2.3%;
    }
    .clear{
        clear:both;
    }
</style>
</head>

<body>

<div class="clear">
     <button id=slideToggle>slideToggle()</button>
    <br/>
    <div class="slideToggleBox">
        slideToggle()
    </div>
</div>

<script type="text/javascript">
$("#slideToggle").click(function () {
   $('.slideToggleBox').slideToggle();
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:50:22.770

试试这个代码。在这里添加了一个[演示](http://jsfiddle.net/NWNNk/2/)

**HTML**

```
<div class="wrapper">
  <button class=slideToggle>slideToggle()</button>
  <div class="slideToggleBox">slideToggle()</div>
</div>
<div class="wrapper">
  <button class=slideToggle>slideToggle()</button>
  <div class="slideToggleBox">slideToggle()</div>
</div> 
```

**CSS**

```
.wrapper{
  float:left;
  width:200px;
}
.slideToggleBox {
  float:left;
  border:1px solid red;
  width:200px;
  height:50px;
  background-color:blue;
  color:white;
  margin-top: -1px;
  margin-left:1px;
} 
```

**JS**

```
$(".slideToggle").click(function () {
  $(this).next().slideToggle();
}); 
```

# ruby-on-rails - 设计停止用户注册

> ID：14224271
> 
> 赞同：0
> 
> 时间：2013-01-08T21:22:48.550
> 
> 标签：ruby-on-rails, ruby, devise

有没有办法暂时禁用注册以允许几个用户注册和测试应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:34:24.823

在您的用户模型中，有如下内容：

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
    :recoverable, :rememberable, :trackable, :validatable 
```

只需从列表中删除 :registerable

# api - 玩！框架实例作为视图/控制器层，其他作为 REST 服务层

> ID：14224272
> 
> 赞同：2
> 
> 时间：2013-01-08T21:22:54.373
> 
> 标签：api, web-applications, playframework-2.0

我即将使用 Play 创建一个新的令人印象深刻的 Web 项目！框架（类似于 Rails 哲学）。

在阅读了这本著名书籍的一些重要部分之后：[使用 Ruby 和 Rails 进行面向服务的设计](https://rads.stackoverflow.com/amzn/click/com/0321659368)学习了一些关于良好设计的技巧，我希望通过创建分离的 Play 来避免单一应用程序！应用程序作为服务层（通过 REST）。

因此，我想象了第一个 Play！应用程序将负责将客户端的请求路由到其他 Play 中包含的每个远程服务层！应用程序。

我想知道这个解决方案的两件事：

*   将实体/值对象（数据模型）放在哪里？视图应用程序和服务应用程序之间是否可以共享某种 data-model.jar？（可选的视图，因为 DTO 或 JSON 对象就足够了）

*   视图应用程序最终将没有模型层，因为视图应用程序充当服务应用程序的简单代理。它不会对未来的开发人员（具有视图/控制器但没有模型部分的应用程序）造成混淆或潜在的不好理解吗？同样，服务应用程序不会包含视图层......

简而言之，这些应用程序中的每一个都使用 Play！似乎遵循这个不好的原则：**YAGNI**

# objective-c - 在 iOS 的 Objective-C 中使用文件指针

> ID：14224274
> 
> 赞同：6
> 
> 时间：2013-01-08T21:23:04.373
> 
> 标签：objective-c, c, cocoa-touch, cocoa, file

我正在尝试在 iOS 应用程序中使用一个库（cfitsio），该应用程序严重依赖于使用文件指针来打开和维护对数据文件的访问。我已经成功构建了一个 Objective-C Mac 应用程序，它可以在 iOS 上完成我需要做的事情。Cocoa touch 有将文件加载到 NSData 的方法，但我看不到直接获取文件指针，可能是因为 iOS 上文件系统的隐私更加严格。有没有办法直接获取文件指针或使用 NSData 制作文件指针以供库临时使用？

我将用来打开文件的 c 函数在下面声明。文件指针继续在许多其他库函数中使用。

```
int ffopen(fitsfile **fptr,      /* O - FITS file pointer                   */ 
           const char *name,     /* I - full name of file to open           */
           int mode,             /* I - 0 = open readonly; 1 = read/write   */
           int *status);          /* IO - error status                       */ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:33:53.597

尝试在打开文件时使用`NSFileManager`which 创建a 。`NSFileHandle`这个句柄有一个吸气剂 `fileDescriptor`：

```
Returns the file descriptor associated with the receiver.
- (int)fileDescriptor
Return Value
The POSIX file descriptor associated with the receiver. 
```

另见[NSFileHandle](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-05T11:11:31.990

似乎这个库声明了一个类型“fitsfile”并使用指针“fitsfile *”。

函数 ffopen 看起来很像*它*打开文件并创建 fitfile*，它使用 fitfile** 返回。因此，您根本不必担心这些文件，库可以做到。

所以你可能会写类似

```
NSString* path = <Objective-C code to get a path>;
BOOL readOnly = <YES or NO, your choice>
fitsfile* fptr = NULL;
int fstatus = 0;
int fresult = ffopen (&fptr, path.UTF8String, (readonly ? 0 : 1), &fstatus); 
```

由于该库希望将数据*存储在具有路径的文件中*，因此唯一的方法是将数据存储在文件中并将该文件的路径传递给 ffopen。

# backbone.js - 主干视图不呈现传递给它的模板

> ID：14224275
> 
> 赞同：2
> 
> 时间：2013-01-08T21:23:04.843
> 
> 标签：backbone.js, backbone-views

我需要能够将不同的模板 ID 传递给不同的路由。

```
(function() {
    window.App = {
        Models: {},
        Collections: {},
        Views: {},
        Router: {}
    };

    var vent = _.extend({}, Backbone.Events);

    _.templateSettings.interpolate = /\[\[(.+?)\]\]/g;

    App.Router = Backbone.Router.extend({
        routes: {
            '' : 'index',
            'send-message' : 'sendMessage',
            '*other' : 'other'
        },
        index: function() {
            t = new (App.Collections.Tables.extend({ url: 'main-contact'}))();
            tables = App.Views.Tables({ collection: t, template: 'mainContactTemplate' });
            $('#web-leads').html(tables.el);
        },
        sendMessage: function() {
            // t = new (App.Collections.Tables.extend({ url: 'send-message'}))();
            // tables = new App.Views.Tables.extend({ collection: t, template: template('sendMessageTemplate')});
            // $('#web-leads').html(tables.el);
        },
        other: function() {

        }
    });

    // Main Contact
    App.Models.Table = Backbone.Model.extend({});

    App.Collections.Tables = Backbone.Collection.extend({
        model: App.Models.Table,
        initialize: function(models, options) {
            this.fetch({
                success: function(data) {
                    //console.log(data.models);
                }
            });
            if (options) {
                this.url = this.url || options.url;
            }
        }
    });

    App.Views.Tables = Backbone.View.extend({
        tagName: 'ul',
        initialize: function() {
            this.collection.on('reset', this.render, this);
        },
        render: function() {
            return this.collection.each(this.addOne, this);
        },
        addOne: function(model) {
            var t = new App.Views.Table({ model: model});
            this.$el.append(t.render().el);
            return this;
        }
    });

    App.Views.Table = Backbone.View.extend({
        tagName: 'li',
        initialize: function(options) {
            this.template = options.template;
            console.log(this.options);
        },
        retrieveTemplate: function(model) {
            return _.template($('#' + this.template).html(), model);
        },
        render: function() {
            this.$el.html(this.retrieveTemplate(this.model.toJSON()));
            return this;
        }
    });

    new App.Router();
    Backbone.history.start();
})(); 
```

但我得到一个错误而不是`n is undefined`. 我想我需要传入`this.template`我的`retrieveTemplate`函数。但是不应该已经设置了吗？顺便说一句，如果我在函数中以模板 ID 的名称硬编码，则此代码有效`retrieveTemplate`。

编辑：模板没有从路由器中的调用中传递。这就是它崩溃的地方。

编辑：我在索引路由的第二行拨打了扩展电话，现在我得到了`this._configure is not a function`

工作版本：

```
(function() {
    window.App = {
        Models: {},
        Collections: {},
        Views: {},
        Router: {}
    };

    var vent = _.extend({}, Backbone.Events);

    _.templateSettings.interpolate = /\[\[(.+?)\]\]/g;

    App.Router = Backbone.Router.extend({
        routes: {
            '' : 'index',
            'send-message' : 'sendMessage',
            '*other' : 'other'
        },
        index: function() {
            var t = new (App.Collections.Tables.extend({ url: 'main-contact'}))();
            var tables = new (App.Views.Tables.extend({ collection: t, options: {template: 'mainContactTemplate' }}))();
            $('#web-leads').html(tables.render().el);
        },
        sendMessage: function() {
            // t = new (App.Collections.Tables.extend({ url: 'send-message'}))();
            // tables = new App.Views.Tables.extend({ collection: t, template: template('sendMessageTemplate')});
            // $('#web-leads').html(tables.el);
        },
        other: function() {

        }
    });

    // Main Contact
    App.Models.Table = Backbone.Model.extend({});

    App.Collections.Tables = Backbone.Collection.extend({
        model: App.Models.Table,
        initialize: function(models, options) {
            this.fetch({
                success: function(data) {
                    //console.log(data.models);
                }
            });
            if (options) {
                this.url = this.url || options.url;
            }
        }
    });

    App.Views.Tables = Backbone.View.extend({
        tagName: 'ul',
        initialize: function(options) {
            this.collection.on('reset', this.render, this);
            this.template = this.options.template;
        },
        render: function() {
            this.collection.each(this.addOne, this);
            return this;
        },
        addOne: function(model, options) {
            //console.log(model);
            var t = new App.Views.Table({ model: model, template: this.options.template});
            this.$el.append(t.render().el);
            return this;
        }
    });

    App.Views.Table = Backbone.View.extend({
        tagName: 'li',
        initialize: function(options) {
            //console.log(this.options);
            this.template = this.options.template;
        },
        retrieveTemplate: function(model) {
            return _.template($('#' + this.template).html(), model);
        },
        render: function() {
            //console.log(this);
            this.$el.html(this.retrieveTemplate(this.model.toJSON()));
            return this;
        }
    });

    new App.Router();
    Backbone.history.start();
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:42:08.710

您可能需要绑定上下文。下划线可以帮助你。

[*.bindAll*](http://underscorejs.org/#bindAll)*或*[.bind](http://underscorejs.org/#bind)应该这样做。

我通常只在初始化期间使用 _.bindAll，如下所示。

```
...
initialize: function(options) {
    _.bindAll(this); // apply appropriate context
    this.template = options.template;
},
... 
```

希望这有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:18:22.027

你的路由器是这样说的：

```
tables = App.Views.Tables({ collection: t, template: 'mainContactTemplate' }); 
```

所以你给一个`template: '...'`to `App.Views.Tables`。在看起来像这样`initialize`：`App.Views.Tables`

```
initialize: function() {
    this.collection.on('reset', this.render, this);
} 
```

所以它忽略了这个`template`选项。如果我们看`App.Views.Table`（单数！），我们会看到：

```
initialize: function(options) {
    this.template = options.template;
    console.log(this.options);
} 
```

但`App.Views.Table`在没有`template`选项的情况下实例化：

```
var t = new App.Views.Table({ model: model}); 
```

您需要修复如何使用`App.Views.Table`. [Backbone 会为您](http://backbonejs.org/#View-constructor)放入[视图的构造函数选项，`this.options`](http://backbonejs.org/#View-constructor)因此您只需说：

```
var t = new App.Views.Table({ model: model, template: this.options.template }); 
```

* * *

需要考虑的其他几件事：

1.  您的路由器`index`方法中有一些意外的全局变量，您应该有`var t`and`var tables`而不仅仅是`t`and `tables`。
2.  视图的`render`方法通常会返回`this`，因此您可以说`$x.append(v.render().el)`您可能想要调整您的`render`方法以匹配约定。

# django - 在没有事务错误的情况下对 Django 模型进行单元测试的正确方法

> ID：14224278
> 
> 赞同：3
> 
> 时间：2013-01-08T21:23:38.067
> 
> 标签：django, nose, django-testing

我正在编写一些带有`unique=True`and`blank=False`和等约束的模型`null=False`。我正在尝试为带有鼻子的模型编写测试。但是，如果我编写这样的测试：

```
from job_sites.models import Site, SiteType

@raises(IntegrityError)
def test_empty_site():
   s = Site()
   s.save()

@raises(IntegrityError)
def test_empty_site_type():
   st = SiteType()
   st.save() 
```

我得到一个这样的 DatabaseError： `DatabaseError: current transaction is aborted, commands ignored until end of transaction block`在它运行第一个测试之后。

当我期待错误时，运行 DJango 模型测试的正确方法是什么？

作为参考，模型如下所示：

```
class SiteType(models.Model):
    site_type_id = models.AutoField(primary_key=True)
    site_type = models.CharField(max_length=32, unique=True, blank=False, null=False, default=None)
    site_type_abbrev = models.CharField(max_length=32, blank=True)

    class Meta:
        db_table = u'site_types'

class Site(models.Model):
    site_id = models.AutoField(primary_key=True, blank=False, null=False, db_index=True)
    site_name = models.CharField(max_length=128, blank=False, null=False, db_index=True)
    site_type = models.ForeignKey(SiteType, blank=True, null=True)
    date_entered = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = u'sites' 
```

我的约束和默认值如下所示：

```
ALTER TABLE site_types ADD CONSTRAINT site_types_site_type_name_minlen CHECK (char_length(site_type) > 0);
ALTER TABLE sites ALTER COLUMN date_entered SET DEFAULT now();
ALTER TABLE sites ADD CONSTRAINT sites_site_name_minlen CHECK (char_length(site_name) > 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:53:07.727

您应该将测试创建为 Django 的 TestCase 的子类，而不是使用鼻子的简洁测试定义。这样，您的数据库等将在运行时为您设置和配置，并且所有事务都将得到神奇的处理。

有关如何为 Django 项目编写测试的概述：[https ://docs.djangoproject.com/en/dev/topics/testing/overview/](https://docs.djangoproject.com/en/dev/topics/testing/overview/)

相当于您尝试做的事情看起来像：

```
from django.db import IntegrityError
from django.utils import unittest
from job_sites.models import Site, SiteType

class TestMyStuff(unittest.TestCase):

    def test_empty_site(self):
        s = Site()
        assertRaises(IntegrityError, s.save())

    def test_empty_site_type(self):
        st = SiteType()
        assertRaises(IntegrityError, st.save()) 
```

（免责声明：我实际上并没有运行此代码，因此它可能无法正常工作。）

但是，测试这种东西可能是浪费时间。这里测试的唯一逻辑是 Django 内部的，因此您不会通过测试来了解您的应用程序的任何内容。

# asp.net-mvc - 仅在选择一个单选按钮时如何应用必填字段验证

> ID：14224279
> 
> 赞同：3
> 
> 时间：2013-01-08T21:23:46.867
> 
> 标签：asp.net-mvc, validation, data-annotations

我正在使用 MVC 数据注释进行客户端验证。

你如何实现这个简单的场景：

Mark a field as required only if one radio button is selected

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:55:45.010

您写道您正在执行客户端验证，因此实现目标的一种方法是使用简单的 javascript 删除/修改附加到您的输入元素的验证规则：

```
$("#YourCheckBox").click(function(){ 
  if($(this).is(':checked')){
      $("#FirstName").rules("add","required")
  } else {
      $("#FirstName").rules("remove","required")
  }
}); 
```

您可以在此处找到有关验证插件及其功能的更多信息[http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

当然，您可以轻松地找到更多关于 jquery unobutrusive 验证的信息并执行您的变体。不过要记住的是，您希望保持客户端和后端验证一致，因此如果您从模型中删除 [Required]，则必须检查保存/编辑方法中的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:30:03.503

看看使用[万无一失](http://foolproof.codeplex.com/)的有一个RequiredIf属性

```
private class Person
{
  [Required]
  public string FirstName { get; set; }

  [Required]
  public string LastName { get; set; }

  public bool Married { get; set; }

  [RequiredIfTrue("Married")]
  public string MaidenName { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:29:43.917

试试看这里，这应该为您指明正确的方向。

[http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:08:23.010

由于您没有发布任何代码，我假设您的单选按钮字段具有 id`rdbRequired`和您的字段名称 say `MyField`。

最初按要求标记`MyField`。

然后在你的控制器中，这样写：

```
 public ActionResult Index(MyModel model)
    {
       // If the radio button is not selected, MyField is marked as not required. I mean it is not validated
       if (model.rdbRequired == false)  
       {
            ModelState.Remove("MyField"); 
       }
       if(ModelState.IsValid){
       //do something
       }
       else{
             return View(model);
       }
    } 
```

希望这可以帮助你

# c++ - 部署 Python 以支持嵌入式和扩展方式

> ID：14224282
> 
> 赞同：1
> 
> 时间：2013-01-08T21:24:10.190
> 
> 标签：c++, python, deployment, swig, scripting-language

我目前正在尝试在用 C++ 编写并使用 SWIG 的项目中使用 Python 2.7 部署站点包。一切都很好。我们的应用程序分发给许多客户端，我们有一个很大的存在问题：我们的安装包应该安装 Python 本身（比如在 'C:\Python27' 中），还是应该只包含 python27.dll 以及 DLL 和 Lib Python 的文件夹，如下所述：[C++ with Python embedding: crash if Python not installed](https://stackoverflow.com/questions/1387906/c-with-python-embedding-crash-if-python-not-installed)

对于使用我们的站点包的嵌入式方式，我认为不使用其安装程序（来自 python.org）安装 Python 没有问题。但是对于扩展使用，如果我们采取不在客户端机器上安装 Python 的方法，我想知道如果客户端安装另一个第三方库（如 numpy）会发生什么。即使没有正确安装 Python 2.7（没有设置注册表项等），numpy 也能工作吗？如果客户想要使用 IDLE 或 PyDev，如果之前没有在其机器上安装 Python，他怎么能做到这一点？

# php - 谁能发现为什么这个 mysql_query 没有插入到数据库中

> ID：14224286
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:24:34.900
> 
> 标签：php, mysql

到目前为止，这是我的代码...

```
if (isset($_POST['projectName']))
{

    $projectName = $_POST['projectName'];
    $dueDate = $_POST['dueDate'];
    $description = $_POST['description'];
    $requestor = $_POST['requestor'];
    $status = $_POST['status'];

    //Update into the DB
    $updateSQL = mysql_query("INSERT INTO projects 
                                (projectName, 
                                dueDate, 
                                description, 
                                requestor,
                                status
                                )
                                VALUES 
                                ('".$projectName."','
                                ".$dueDate."','
                                ".$description."','
                                ".$requestor."','
                                ".$status."')");

    /*
    header('Location:manage.php?update=insertSuccess');
    exit();
    */  

} 
```

除了 $status 之外，每个值都已成功插入数据库。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:26:53.173

语法看起来不错，但是...

*   你没有发现错误，所以它可能是某种列约束。

> ```
> $updateSQL = mysql_query("INSERT...") or die(mysql_error()); 
> ```

将捕获这些错误。

*   当您使用它时，您需要停止使用`mysql_`函数。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](http://j.mp/Te9zIL)了吗？改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://j.mp/PoWehJ)。

这里有一些东西可以帮助你开始：

```
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$stmt = mysqli_prepare($link, "INSERT INTO projects (projectName, dueDate, description, requestor, status) VALUES (?, ?, ?, ?, ?)");
mysqli_stmt_bind_param($stmt, 'sssss', $projectName, $dueDate, $description, $requestor, $status);

/* execute prepared statement */
mysqli_stmt_execute($stmt);

printf("%d Row inserted.\n", mysqli_stmt_affected_rows($stmt));

/* close statement and connection */
mysqli_stmt_close($stmt);

/* close connection */
mysqli_close($link); 
```

# eclipse - groovy collection.addAll 的静态类型检查错误

> ID：14224288
> 
> 赞同：1
> 
> 时间：2013-01-08T21:24:39.863
> 
> 标签：eclipse, grails, groovy

此消息也发布在 grails 邮件列表中。除了我之前的[问题](https://stackoverflow.com/questions/14160761/where-do-all-methods-attributes-get-wired-into-grails-controlller)之外，我还从 github 下载了 grails 源代码。通过记录的 gradlew install 构建（几乎）完美。比我将整个项目导入 Eclipse。并且与 groovy 插件和“项目-workspace-groovy-compiler-issues”有些冲突，我只剩下几个问题，所有问题都归结为 groovy 类中的 java Collection 修改。例如在 PluginBuildSettings.groovy 中：

```
List<Resource> artefactResourcesList = []
  ...
artefactResources.addAll compileScopePluginInfo.artefactResources 
```

这给出了一个错误：

Groovy：[静态类型检查] - 无法使用参数 [java.util.Set] 调用 java.util.List#addAll(java.util.Collection)

我真的不明白可能是什么问题。

我尝试从以下位置更改 PluginScopeInfo 中的 artefactResources 声明：

```
Set<Resource> artefactResources = [] 
```

至：

```
Set<Object> artefactResources = [] 
```

它消除了上面的错误，但引入了一些其他问题，更不用说单元测试了。我没有受到广泛的常规知识的阻碍，但它看起来对我来说完全有效。

我正在使用 ggts： Groovy/Grails Tool Suite Version: 3.1.0.RELEASE Build Id: 201210061306 groovy-compiler: 2.0.4.xx -20120921 On mac os x 8.2 java 6.0._37 groovy compiler: 2.0 (workspace and project ）。

通过我最喜欢的搜索引擎，我找到了对 grails bug 5516 的引用，该问题已解决，但看起来又复活了

```
Type checker fails verification of generic types with addAll 
```

在 2.0 rc 3 中修复，

# facebook - 要求用户输入密码才能删除 Facebook 应用

> ID：14224289
> 
> 赞同：0
> 
> 时间：2013-01-08T21:24:42.403
> 
> 标签：facebook, facebook-graph-api

有什么方法（可能是一些对话？）可以要求用户输入他的 Facebook 密码，以便（再次）确认他的身份......

我有一个网页，它使用 Facebook 登录。但我想要求用户输入他的密码才能删除他的页面成员资格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:38:38.393

没有内置功能可以处理此问题。如果您让他们在他们通过 fb 登录后为您的网站输入密码，那么您可以自己建立一个简单的确认。

*我个人的意见：*只需使用验证码来防止机器人这样做。除此之外，在您的网站变得“足够大”以引起关注之前，它并没有您想象的那么大的真正安全漏洞。如果失去会员资格对他们来说是*灾难性*的，那么用户可能无论如何都应该为该网站设置一个单独的密码。如果你仍然坚持这个想法，那就做 Facebook 做的事情：不要真正“删除”用户，只需将其移至“非活动”状态即可。如果他们回来了，让它再次“活跃”。

# coldfusion - HTML 页面转 PDF 问题

> ID：14224292
> 
> 赞同：2
> 
> 时间：2013-01-08T21:25:04.993
> 
> 标签：coldfusion, cfdocument

我的项目是创建一个类似 Vista Print 的应用程序。我创建了一个非常基本的界面，将可调整大小的 div 放置在可以拖动的区域中。我还可以通过带有设计模式的弹出 iframe 将文本放入此 div。然后我将其写入数据库。然后我调用此数据并使用 Coldfusions cfdocument 创建一个 pdf。

问题是在创建 PDF 时，字体看起来稍厚，而且自动换行与 html 页面界面不同，这一点非常重要。注意：自动换行由 div 的高度和宽度决定。它在 cfdocument 进程页面上看起来很好，它在创建 pdf 时就关闭了。有人对此有任何想法，或者可以向我指出一些可以提供帮助的信息吗？

提前致谢。

代码在这里：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<cfset webRes = "96">
<cfset pxlWidth = "921">
<cfset pxlHeight = "1178">
<cfset inWidth = (pxlWidth/webres)>
<cfset inHeight = (pxlHeight/webres)>

<cfquery name="qTextData" datasource="ds">
SELECT        DocID, TextID, Width, Height, PosX, PosY, FontFamily, FontColor, FontSize, TextValue
FROM            TextEditor
WHERE        ((DocID = #session.docid#))
</cfquery>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Create PDF</title>
</head>
<cfoutput>
<cfdocument filename="mypdf.pdf" name="mypdf" fontembed="yes" format="pdf" overwrite="yes" pageheight="#inHeight#" pagewidth="#inWidth#" pagetype="custom">
    <cfdocumentsection margintop="0" marginright="0" marginbottom="0" marginleft="0">
        <body align="center" marginheight="0" marginwidth="0">
            <div id="pageContainer" style="background-image:url(resources/image.caspx.jpg); background-repeat:no-repeat; height:#pxlHeight#px; width:#pxlWidth#px;">
                <cfloop query="qTextData">
                    <div id="divTextField_#TextID#" style="position:absolute; top:#PosY#px; left:#PosX#px; width:#width#px; height:#Height#px; color:#FontColor#; font-family:#FontFamily#; font-size:#FontSize#pt; vertical-align:text-top; line-spacing:normal;">
                        #TextValue#

                    </div>                  
                </cfloop>
            </div>
        </body>
    </cfdocumentsection>
</cfdocument>
</cfoutput>

<script type="text/javascript">
    window.open('http://linktopdf/mypdf.pdf','newWin','resizable=1');
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:10:09.730

我尝试将此作为评论，但我开始啰嗦，而且它太大了，所以它可能不是“答案”，但如果没有别的，我相信它会包含一些有用的信息。

您查看的百分比是多少，您是否尝试将其打印出来？

我注意到事情可能看起来不平衡或比平时更大，因为它们只是在 acrobat（或您选择的 PDF 查看器）中呈现怪异。尝试调整缩放并查看显示是否发生变化，并查看打印是否正确。

我还发现就像 James 建议的那样，我需要特殊的 css 来处理文档。CSS 可能就像让 div 的一侧有一个大 1px 的边框以使其看起来正确一样奇怪。另请记住，尽管您在屏幕上查看 PDF，但它仍然是一种`"print"`媒体。PT 表示 1/72 英寸，当您从 19 英寸以上的显示器（受像素分辨率进一步影响）缩放到不知道什么是像素的 8.5" x 11" 纸时，它看起来会更大是。您可能需要尝试即时调整字体大小，例如：`font-size: #fontSize-2#pt;`. 更改`-2`为可能对您的输出有用的任何内容。您也可以尝试使用可缩放的单位，例如`em`.

cfdocument[文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c21.html)列出了所有受支持的 CSS 并确定了一些限制。似乎不`line-spacing:normal;`支持。还要确保所有 CSS 都包含在内联或样式标记中，但避免使用链接的 .css 文件。我看到您正在这样做，只是添加提示和指示。

此外，根据文档：

> ColdFusion 不会返回该`<cfdocument></cfdocument>`对之外的 HTML 和 CFML。

这意味着 ColdFusion 正在处理您的`cfset`语句，但它**不会返回**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Create PDF</title>
</head> 
```

和

```
<script type="text/javascript">
    window.open('http://linktopdf/mypdf.pdf','newWin','resizable=1');
</script>
</html> 
```

因此，iText 可能没有按照您的预期呈现它，因为

1.  它没有文档类型
2.  这是一个格式错误的 HTML 文档

# linux - 如何解释 XImage 的“数据”字段

> ID：14224293
> 
> 赞同：3
> 
> 时间：2013-01-08T21:25:10.643
> 
> 标签：linux, x11, xlib, xserver

我试图了解从中获得的数据`XGetImage`是如何在内存中处理的：

```
XImage img = XGetImage(display, root, 0, 0, width, height, AllPlanes, ZPixmap); 
```

现在假设我想分解红色、蓝色、绿色通道中的每个像素值。我怎样才能以便携的方式做到这一点？以下是一个示例，但它取决于 XServer 的特定配置，并且并非在所有情况下都有效：

```
for (int x = 0; x < width; x++)
    for (int y = 0; y < height; y++) {
        unsigned long pixel = XGetPixel(img, x, y);   
        unsigned char blue = pixel & blue_mask;
        unsigned char green = (pixel & green_mask) >> 8;
        unsigned char red = (pixel & red_mask) >> 16;
        //...    
    } 
```

在上面的示例中，我假设`RGB`通道的特定顺序`pixel`以及像素是 24 位深度：事实上，我有`img->depth=24`和`img->bits_per_pixels=32`（屏幕也是 24 位深度）。但这不是一般情况。

作为第二步，我想摆脱 XGetPixel 并直接使用或描述 img->data。我需要知道的第一件事是，是否有任何东西`Xlib`可以准确地为我提供解释图像是如何从`img->data`现场开始构建所需的所有信息，它们是：

1.  每个像素中 R、G、B 通道的顺序；
2.  每个像素的位数；
3.  每个通道的位数；
4.  如果可能，相应的[FOURCC](http://www.fourcc.org/rgb.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T22:18:16.160

shift 是掩码的一个简单函数：

```
 int get_shift (int mask) {
      shift = 0;
      while (mask) {
        if (mask & 1) break;
        shift++;
        mask >>=1;
      }
      return shift;
    } 
```

每个通道中的位数只是其掩码中的 1 位数（计算它们）。通道顺序由移位确定（如果红移为 0，则第一个通道为 R 等）。

我认为 bits_per_pixel 的有效值为 1、2、4、8、15、16、24 和 32（15 和 16 位是相同的每像素格式 2 个字节，但前者有 1 位未使用）。我认为除了 24 和 32 bpp 之外，任何人都不值得花时间支持任何东西。

X11 不关心媒体文件，所以没有 4CC 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-12T08:54:49.300

这可以从`XImage`结构本身中读取。

> 1.  每个像素中 R、G、B 通道的顺序；

这包含在`XImage`结构的这个字段中：

```
int byte_order;          /* data byte order, LSBFirst, MSBFirst */
```

它告诉你它是 RGB 还是 BGR（因为它只取决于机器的字节序）。

> 2.  每个像素的位数；

可以从这个字段中获得：

```
int bits_per_pixel;      /* bits per pixel (ZPixmap) */
```

这基本上是每个通道掩码中设置的位数：

```
unsigned long red_mask;      /* bits in z arrangement */
unsigned long green_mask;
unsigned long blue_mask;
```

> 3.  每个通道的位数；

见上文，或者您可以使用[@nm 答案](https://stackoverflow.com/a/14308841/434562)中的代码自己计算位数。

是的，如果他们也将位移常数放入该结构中会很棒，但显然他们决定不这样做，因为无论如何像素都以“标准顺序”（RGB）与字节对齐。Xlib 确保在从 X 服务器检索数据时为您将其转换为该顺序，即使它们在内部以不同的格式存储在服务器端。所以它总是 RGB 格式，字节对齐，但根据机器的字节顺序，an 中的字节`unsigned long`可以以相反的顺序出现，因此该`byte_order`字段可以告诉你。

因此，为了提取这些通道，只需在使用 , 和 屏蔽后使用,和移位`0`，`8`只需确保根据 移位正确的字节，它应该可以正常工作。`16``red_mask``green_mask``blue_mask``byte_order`

# c - 冲洗替代品

> ID：14224295
> 
> 赞同：1
> 
> 时间：2013-01-08T21:25:15.373
> 
> 标签：c, string, generics

我犯了使用 fflush(stdin) 像这样刷新标准输入流的剩余部分的错误：

```
printf("Gimme number");
scanf("%d",&number);
fflush(stdin);
printf("Gimme string");
gets(string); 
```

当然，我已经包含了头文件和其他文件。我知道 fflush 是用于标准输出而不是标准输入，但我非常需要一个替代方案才能在 scanf 之后使用 get。我在这里搜索旧帖子，但只看到有关 scanf("%c\n",c); 的建议 . 当我执行 scanf("%d\n",x); 时，这会使程序崩溃。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:26:37.773

`scanf`一种可能性是使用类似的东西来消耗 via 留下的换行符`getchar()`：

```
printf("Gimme number");
scanf("%d",&number);
getchar();
printf("Gimme string");
gets(string); 
```

另一种可能性是只使用scanf：

```
printf("Gimme number");
scanf("%d",&number);
printf("Gimme string");
scanf(" %99s", string); 
```

`99`在用字符串缓冲区的长度替换 的地方，请注意 . 之前的空格`%`以确保它忽略 . 上留下的空格（或制表符或换行符）`stdin`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:42:49.940

从输入中读取整行（包含 ENTER 的行）。解析行（可能使用`strtol()`、`srttod()`或`sscanf()`）。

```
char buffer[1000];
int number;
printf("Gimme number: ");
fflush(stdout);
fgets(buffer, sizeof buffer, stdin); // needs error checking
number = strtol(buffer, &err, 10); // needs error checking
printf("Gimme string: ");
fflush(stdout);
fgets(buffer, sizeof buffer, stdin); // needs error checking
strcpy(string, buffer);
string[strlen(string) - 1] = 0; // remove ENTER 
```

# c# - 在 EmguCV 中使用 Seq(T).Item 属性查找轮廓索引

> ID：14224296
> 
> 赞同：0
> 
> 时间：2013-01-08T21:25:15.773
> 
> 标签：c#, image-processing, contour, emgucv

我是 EmguCV 的新手。我正在为我的应用程序使用 Emgu CV 2.4.2。我在使用 Seq(T).Item 属性查找轮廓索引时遇到问题。当我在轮廓中使用该属性时，系统会发送如下错误消息：

```
Error 11 'Emgu.CV.Contour<System.Drawing.Point>' does not contain a definition for'Item' and no
extension method 'Item' accepting a first argument of type 'Emgu.CV.Contour<System.Drawing.Point>'
could be found (are you missing a using directive or an assembly reference?)    E:\TUGAS_AKHIR\headDetection\headDetection.cs   284 45  headDetection 
```

我已阅读[此处](http://www.emgu.com/wiki/files/2.4.2/document/html/b65b4ab2-9d04-16f1-bd41-3be67aa400f7.htm)的文档，但我不知道为什么会出现错误。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using Emgu.CV;
using Emgu.CV.Structure;
using Emgu.CV.VideoSurveillance; 
using Emgu.CV.CvEnum; 
using Emgu.Util;
using Emgu.CV.Cvb;
using System.Collections;

//background subtraction 
...

//foreFrame is the result of background subtraction
 Contour<Point> contours = foreFrame.FindContours(
    CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE,
    RETR_TYPE.CV_RETR_EXTERNAL);

while (contours != null)
{
    int idx = contours.Item; //THE ERROR MESSAGE APPEARS HERE
        Console.WriteLine("contour index = {0}", idx);

    //next contour
    contours = contours.HNext;
}//endwhile 
```

请帮助我如何使用 Seq(T).Item 属性或 EmguCV 中的其他方法找到轮廓索引。如果有人详细说明，我将不胜感激。

在此先感谢，大卫:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:10:07.850

如果您查看[emgu 2.4.2 文档](http://www.emgu.com/wiki/files/2.4.2/document/Index.html)，您会发现 Contour 类上没有 Item 属性。

您可以做的最简单的事情是使用指示当前计数器索引的循环计数器并在循环时将其递增：

```
int counter = 0;
while (contours != null)
{
    Console.WriteLine("contour index = {0}", counter);
    //next contour
    contours = contours.HNext; 
    counter++;
} 
```

# javascript - 使用jquery将div从绝对定位转换为固定定位后无法滚动

> ID：14224299
> 
> 赞同：0
> 
> 时间：2013-01-08T21:25:21.297
> 
> 标签：javascript, jquery, scroll, css-position

我有一个 div，一旦用户滚动到父 div 中的某个点，就会添加一个“固定”类。固定类只是将子 div 从绝对定位更改为固定定位。

但是，当用户在添加“固定”类（由js中的“开始变量”指定）时滚动到某个点时会出现问题。用户失去向上或向下滚动几秒钟的能力。更复杂的是，这个问题只发生在使用此代码的六个父 div 中的第一个上。

这是添加“固定”类的 jquery 代码：

```
var begin = 164;

$("#portfolio_window").scroll(function () {     
    var y = $(this).scrollTop();

    if (y >= begin) {
        $('.details').addClass('fixed');
    } else {
        $('.details').removeClass('fixed');
    }
}); 
```

如果我将“开始”变量更改为 600，用户将无法从 div 顶部滚动 600 像素。

您可以尝试在[http://dev.zachboth.com/重现该问题](http://dev.zachboth.com/)

这是我能够重现该问题的最简单方法：

*   使用 Safari
*   单击“工作”部分中的“各种徽标”
*   出现“各种徽标”部分后快速向下滚动
*   实际发生问题可能需要多次尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:48:15.850

我可以解释你的问题：

问题是，在您提到被破坏的“页面”上，您是否在 div#portfolio_window 中滚动。您提到的 position:fixed 元素是相对于窗口定位的。当您在该元素上滚动时，它会尝试滚动窗口（而不是父 div）。

[http://jsfiddle.net/NThY7/](http://jsfiddle.net/NThY7/)

解决方案涉及更多。稍后我会提供解决方案。

# c++ - 在变量依赖于构造函数的类中使用静态函数

> ID：14224305
> 
> 赞同：-2
> 
> 时间：2013-01-08T21:25:39.550
> 
> 标签：c++

可以说我有一个带有静态函数的类。该函数被代码的另一部分调用为静态函数，而不实例化类对象。然而，这个静态函数在其代码中也依赖于变量 x。但是，x 仅被初始化为某个值或在构造函数中被清除。但是，鉴于没有实例化类的对象，我相信该变量是未定义的。所以，我有几个问题：

1）是否调用了构造函数？

2) 变量 x 是否未定义？

我怎样才能解决这样的情况？

在下面的示例中，我希望 y 为 25，但可以吗？

```
class CExample
{
public:

    CExample(void);
    ~CExample(void);
    static void foo();

    int x;
};

CExample::CExample()
{
    x = 5;
}

void CExample::foo()
{
    int y = x*5;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:30:42.400

您的代码无法编译，因为静态函数使用的变量仅存在于类实例化的对象中。

我不确定你是否理解静态。只有**一个**静态函数存在。您可以从任何地方调用它。如果 CExample 的 x 应该使用哪个实例？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:34:43.997

这看起来像是一个糟糕的设计案例。您可以修复它，以便通过将 x 设为静态并使用 5 对其进行初始化来编译它。但是，您可能会更好地重新考虑您的设计以及您想要它做什么。请记住，只有一个静态事物的实例，但 CExample 的实例与您将其称为构造函数的次数一样多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:34:14.103

静态成员函数是类的服务，而不是类的特定对象的服务。类的静态数据成员和静态成员函数独立于该类对象的实例化而存在。

使用静态函数不会调用其各自类的构造函数，因此你的变量将不存在，导致编译错误。

只要记住静态成员函数的存在和操作独立于类的任何对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:32:51.850

从静态函数访问非静态成员是非法的。当我尝试编译您的程序时，请查看 gcc 的输出：

```
test.cpp: In static member function ‘static void CExample::foo()’:
test.cpp:9: error: invalid use of member ‘CExample::x’ in static member function 
```

# c++ - 检索最终场景 z 缓冲区和颜色缓冲区

> ID：14224307
> 
> 赞同：1
> 
> 时间：2013-01-08T21:25:44.980
> 
> 标签：c++, opengl, opengl-es-2.0

我正在开发 opengl 2.1 和 opengl es 2.0。我想为整个场景实现景深效果。我知道如何为带有着色器的单个模型执行此操作，但这需要所有模型都具有具有相同代码的着色器。有没有办法检索最终场景深度和颜色缓冲区并将它们存储到纹理中，以便我可以再次将它们与 DOF 着色器一起使用？或者这是一个坏主意？

[编辑]终于让它工作了。初始化代码如下所示：

```
glGenFramebuffers(1, &frameBuffer_);
glGenTextures(1, &colorBuffer_);
glGenTextures(1, &depthBuffer_);
//glGenRenderbuffers(1, &depthBuffer_);

glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer_);

glBindTexture(GL_TEXTURE_2D, colorBuffer_);
glTexImage2D(
    GL_TEXTURE_2D,
    0,
    GL_RGBA,
    width,
    height,
    0,
    GL_RGBA,
    GL_UNSIGNED_BYTE,
    NULL);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glFramebufferTexture2D(
    GL_FRAMEBUFFER,
    GL_COLOR_ATTACHMENT0,
    GL_TEXTURE_2D, colorBuffer_, 0);

glBindTexture(GL_TEXTURE_2D, depthBuffer_);
glTexImage2D(
    GL_TEXTURE_2D,
    0,
    GL_DEPTH24_STENCIL8,
    width,
    height,
    0,
    GL_DEPTH_STENCIL,
    GL_UNSIGNED_INT_24_8,
    NULL);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glFramebufferTexture2D(
    GL_FRAMEBUFFER,
    GL_DEPTH_ATTACHMENT,
    GL_TEXTURE_2D, depthBuffer_, 0);

//glBindRenderbuffer(GL_RENDERBUFFER, depthBuffer_);
//glRenderbufferStorage(
//  GL_RENDERBUFFER,
//  GL_DEPTH_COMPONENT24,
//  width,
//  height);
//glFramebufferRenderbuffer(
//  GL_FRAMEBUFFER,
//  GL_DEPTH_ATTACHMENT,
//  GL_RENDERBUFFER, depthBuffer_);

GLenum status;
status = glCheckFramebufferStatus(GL_DRAW_FRAMEBUFFER);
switch(status) {
case GL_FRAMEBUFFER_COMPLETE:
    // Success.
break;
case GL_FRAMEBUFFER_UNSUPPORTED:
    LOGE("Frame buffer format not supported.");
break;
default:
    LOGE("Framebuffer Error.");
} 
```

稍后在渲染第一次调用时：

```
glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer_); 
```

渲染场景，然后调用：

```
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

现在可以使用 depthBuffer_ 或 colorBuffer_ 作为 OpenGL 纹理句柄在这里渲染任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:35:05.703

使用帧缓冲区对象。它们是 OpenGL-ES-2 的一部分，可作为 OpenGL-2.1 的（得到很好支持的）扩展使用。

看

[https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/minimalfbo](https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/minimalfbo)

在桌面 OpenGL-2.x 上使用扩展的最小工作示例

# youtube - YouTube API v3 和 v2 的区别

> ID：14224311
> 
> 赞同：1
> 
> 时间：2013-01-08T21:25:55.557
> 
> 标签：youtube, youtube-api

我正在使用 YouTube API 做一些新工作。我知道有两个版本，v2 和 v3，但我在任何地方都找不到差异。有什么区别？

我知道 v3 被标记为“实验性”。但：

*   有什么更好的呢？
*   除了实验，还有什么更糟糕的呢？
*   v2 会被淘汰吗？
*   对于新的开发工作，我应该使用 v2 还是 v3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:16:51.390

一些答案（在我看来..）

有什么更好的呢？

*   使用免费主题搜索视频、频道和播放列表

[https://developers.google.com/youtube/v3/docs/search](https://developers.google.com/youtube/v3/docs/search)

*   检索活动

[https://developers.google.com/youtube/v3/docs/activities](https://developers.google.com/youtube/v3/docs/activities)

除了实验，还有什么更糟糕的呢？

*   您在应用中使用的 API 调用的更改

对于新的开发工作，我应该使用 v2 还是 v3

*   我认为答案取决于您的应用程序应该做什么以及应用程序的类型

# json - 反序列化 JSON TweetSharp TwitterStatus

> ID：14224313
> 
> 赞同：1
> 
> 时间：2013-01-08T21:26:09.423
> 
> 标签：json, serialization, json.net, tweetsharp

我正在使用 Daniel Crenna 的 TweetSharp [http://github.com/danielcrenna/tweetsharp](http://github.com/danielcrenna/tweetsharp)

要将 TwitterStatus 序列化为文件，我使用代码

```
sw.WriteLine(JsonConvert.SerializeObject(twitterStatus)); 
```

产生文本

`{"Id":288653019971727360,"InReplyToUserId":null,"InReplyToStatusId":null,"InReplyToScreenName":null,"truncated":false,"favorited":false,"Text":"Found the bug, dear old regular expressions","Source":"web","User":{"Id":1148081,"FollowersCount":793,"Name":"Tim Regan","Description": [...]`

（注意，我不会全部包括在内，除非这有助于诊断？）

我反序列化 TwitterStatus 的代码行是

```
var tweet = (TwitterStatus)JsonConvert.DeserializeObject(line); 
```

但这给出了错误

`System.InvalidCastException was unhandled HResult=-2147467262 Message=Unable to cast object of type 'Newtonsoft.Json.Linq.JObject' to type 'TweetSharp.TwitterStatus'. Source=TweetColorMVVM StackTrace: at TweetColorMVVM.Model.Tweets.LoadSavedTweets(String screenName) in c:\TFSCML\Users\Tim\MSR.Makefest\TwitterColor\TweetColorMVVM\Model\Tweets.cs:line 132 at TweetColorMVVM.Model.Tweets.LoadTweets(Object state) in c:\TFSCML\Users\Tim\MSR.Makefest\TwitterColor\TweetColorMVVM\Model\Tweets.cs:line 78 at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state) at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() at System.Threading.ThreadPoolWorkQueue.Dispatch() at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()`

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:43:37.987

我应该写：

```
var tweet = (TwitterStatus)JsonConvert.DeserializeObject(line, typeof(TwitterStatus)); 
```

现在可以了。

# java - 在浏览器中显示就地编写的 html 页面

> ID：14224315
> 
> 赞同：1
> 
> 时间：2013-01-08T21:26:18.237
> 
> 标签：java, network-programming

一般来说，我正在使用 Java 开发一个网络爬虫，它从用户那里获取域名并获取有关该域的统计信息，并且应该将结果作为网页返回。操作顺序应该是这样的：

*   Web 服务器在浏览器中打开默认页面，该页面有一个询问域名的表单
*   网络爬虫已激活，浏览器中会显示一条消息以指示
*   网络爬虫应该返回一个 html 结果页面给浏览器

我的问题（我知道这是非常笼统的事实）是我如何进行第三步？对于服务器来说，浏览器和网络爬虫是两个不同的客户端，那么一个如何影响另一个呢？

提前致谢。

# c# - 有条件地在 CSPROJ 中嵌入资源

> ID：14224316
> 
> 赞同：6
> 
> 时间：2013-01-08T21:26:28.737
> 
> 标签：c#, visual-studio

我正在尝试从两个不同的目录将资源嵌入到我的 CSPROJ 中，具体取决于配置。[这篇文章](https://stackoverflow.com/questions/2375565/conditionally-embedding-a-resource-in-visual-studio-c)给了我这个想法，但它不起作用。任何帮助表示赞赏。

```
<Choose>
  <When Condition="'$(Configuration)' == 'Debug'">
    <ItemGroup>
      <EmbeddedResource Include="..\Debug\file.txt">
        <Link>Files\file.txt</Link>
      </EmbeddedResource>
    </ItemGroup>
  </When>
  <Otherwise>
    <ItemGroup>
      <EmbeddedResource Include="..\Release\file.txt">
        <Link>Files\file.txt</Link>
      </EmbeddedResource>
    </ItemGroup>
  </Otherwise>
</Choose> 
```

我也试过这个，但效果同样糟糕。

```
<ItemGroup>
  <EmbeddedResource Include="..\$(Configuration)\file.txt">
    <Link>Files\file.txt</Link>
  </EmbeddedResource>
</ItemGroup> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:34:38.110

您只需将条件放在 ItemGroup 元素上：

```
<ItemGroup Condition="'$(Configuration)' == 'Debug'">
  <EmbeddedResource Include="..\Debug\file.txt">
    <Link>Files\file.txt</Link>
  </EmbeddedResource>
</ItemGroup>
<ItemGroup Condition="'$(Configuration)' == 'Release'">
  <EmbeddedResource Include="..\Release\file.txt">
    <Link>Files\file.txt</Link>
  </EmbeddedResource>
</ItemGroup> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:37:30.127

正如我在对您的问题的评论中所说，这应该对您有用：

```
<ItemGroup>
  <EmbeddedResource Include="..\$(Configuration)\file.txt">
    <Link>Files\file.txt</Link>
  </EmbeddedResource>
</ItemGroup> 
```

即使您可能会在 VS 的属性编辑器的“完整路径”中看到旧值 - 当您构建时，它会尊重您当前的配置。VS 属性编辑器应该通过解决方案资源管理器的刷新按钮更新，或者在最坏的情况下重新加载项目。可能将选择更改为其他文件并返回到 file.txt 足以刷新属性编辑器。

**更新**：

我已经弄清楚在这种情况下，通过点击解决方案资源管理器的“刷新”按钮为我更改了完整路径——它是 Dll 参考的提示路径。

```
<Reference Include="MyDll">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\$(Configuration)\MyDll.dll</HintPath>
</Reference> 
```

这仅在所有 DLL（在所有目标文件夹中）确实存在的情况下才有效。

由于某些原因，项目文件的完整路径未刷新 - 对于文件项目**VS 始终认为当前配置名为 Debug** -*即使您从项目中删除了调试配置*。幸运的是，这个 VS 错误不会影响构建 - 它仍然会占用有效文件。

# r - 直接从 R 读取 .dat 和 .dct

> ID：14224321
> 
> 赞同：6
> 
> 时间：2013-01-08T21:26:47.617
> 
> 标签：r, stata, read.table

我需要使用 .dct 文件读取 .dat 文件。有人用 R 做过吗？

格式为：

```
dictionary {
  # how many lines per record
  _lines(1)
  # start defining the first line
  _line(1)

  # starting column / storage type / variable name / read format / variable label
  _column(1)    str8    aid    %8s    "respondent identifier"
  ...
} 
```

“读取格式”如下：

```
%2f        2 column integer variable
%12s      12 column string variable
%8.2f      8 column number with 2 implied decimal places. 
```

此处描述了存储类型：http: [//www.stata.com/help.cgi?datatypes](http://www.stata.com/help.cgi?datatypes)

用于信息的其他网站：

[http://library.columbia.edu/indiv/dssc/technology/stata_write.html](http://library.columbia.edu/indiv/dssc/technology/stata_write.html)

[http://www.stata.com/support/faqs/data-management/reading-fixed-format-data/](http://www.stata.com/support/faqs/data-management/reading-fixed-format-data/)

.dat 文件是一串数字，对应于 .dct 文件中指定的变量。（大概这是固定宽度列中的数据）。

这里有一个真实的例子：

.dtc 文件 [http://goo.gl/qHZOk](http://goo.gl/qHZOk)

数据 [http://goo.gl/FRGRF](http://goo.gl/FRGRF)

来自stata网站的一个具体例子是：

文件（在本`.dat`例中为“test.raw”）

```
C1245A101George Costanza
B1223B011Cosmo Kramer 
```

`.dct`文件_

```
dictionary using test2.raw {
 _column(1)     str5     code   %5s
 _column(2)     int      call   %4f
 _column(6)     str1     city   %1s
 _column(7)     int      neigh  %3f
 _column(10)    str16    name   %16s
} 
```

生成的数据文件：

```
 +-----------------------------------------------+
      |  code   call   city   neigh              name |
      |-----------------------------------------------|
   1\. | C1245   1245      A     101   George Costanza |
   2\. | B1223   1223      B      11      Cosmo Kramer |
      +-----------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T18:52:11.697

@thelatemail 是关于如何进行的。这是我汇总的一个小功能，可帮助您开始使用更强大的解决方案：

```
read.dat.dct <- function(dat, dct) {
    temp <- readLines(dct)
    pattern <- "_column\\(([0-9]+)\\)\\s+([a-z0-9]+)\\s+([a-z0-9_]+)\\s+%([0-9]+).*"
    classes <- c("numeric", "character", "character", "numeric")
    metadata <- setNames(lapply(1:4, function(x) {
        out <- gsub(pattern, paste("\\", x, sep = ""), temp)
        out <- gsub("^\\s+|\\s+$|.*\\{|\\}", "", out)
        out <- out[out != ""]
        class(out) <- classes[x] ; out }), 
                         c("StartPos", "Str", "ColName", "ColWidth"))
    read.fwf(dat, widths = metadata[["ColWidth"]], 
             col.names = metadata[["ColName"]])
} 
```

在错误检查、泛化函数等方面，您仍然需要做很多事情。例如，此函数不适用于重叠列，正如 @thelatemail 添加到您的问题的示例中所示。“StartPos[n] + ColWidth[n]”形式的一些错误检查应该等于“StartPos[n+1]”，如果这不是真的，则可以使用错误消息来停止读取文件。此外，还可以从函数生成的“元数据”列表中提取结果数据的类别，并`read.fwf`使用`colClasses`参数进行分配。

这是一个 dat 文件和一个 dct 文件来演示：

将以下两行复制并粘贴到文本编辑器中，并将其作为“test.dat”保存在您的工作目录中。

```
C1245A101George Costanza
B1223B011Cosmo Kramer 
```

将以下行复制并粘贴到文本编辑器中，并将其作为“test.dct”保存在您的工作目录中

```
dictionary using test.dat {
    _column(1)     str1     code   %1s
    _column(2)     int      call   %4f
    _column(6)     str1     city   %1s
    _column(7)     int      neigh  %3f
    _column(10)    str16    name   %16s
} 
```

现在，运行函数：

```
read.dat.dct(dat = "test.dat", dct = "test.dct")
#   code call city neigh            name
# 1    C 1245    A   101 George Costanza
# 2    B 1223    B    11    Cosmo Kramer 
```

### 更新：改进的功能（仍有很大的改进空间）

```
read.dat.dct <- function(dat, dct, labels.included = "no") {
    temp <- readLines(dct)
    temp <- temp[grepl("_column", temp)]
    switch(labels.included,
           yes = {
               pattern <- "_column\\(([0-9]+)\\)\\s+([a-z0-9]+)\\s+(.*)\\s+%([0-9]+)[a-z]\\s+(.*)"
               classes <- c("numeric", "character", "character", "numeric", "character")
               N <- 5
               NAMES <- c("StartPos", "Str", "ColName", "ColWidth", "ColLabel")
           },
           no = {
               pattern <- "_column\\(([0-9]+)\\)\\s+([a-z0-9]+)\\s+(.*)\\s+%([0-9]+).*"
               classes <- c("numeric", "character", "character", "numeric")
               N <- 4
               NAMES <- c("StartPos", "Str", "ColName", "ColWidth")
           })
    metadata <- setNames(lapply(1:N, function(x) {
        out <- gsub(pattern, paste("\\", x, sep = ""), temp)
        out <- gsub("^\\s+|\\s+$", "", out)
        out <- gsub('\"', "", out, fixed = TRUE)
        class(out) <- classes[x] ; out }), NAMES)

    metadata[["ColName"]] <- make.names(gsub("\\s", "", metadata[["ColName"]]))

    myDF <- read.fwf(dat, widths = metadata[["ColWidth"]], 
             col.names = metadata[["ColName"]])
    if (labels.included == "yes") {
        attr(myDF, "col.label") <- metadata[["ColLabel"]]
    }
    myDF
} 
```

它如何处理您的数据？

```
temp <- read.dat.dct(dat = "http://dl.getdropbox.com/u/18116710/21600-0009-Data.txt", 
                     dct = "http://dl.getdropbox.com/u/18116710/21600-0009-Setup.dct",
                     labels.included = "yes")
dim(temp)                     # How big is the dataset?
# [1] 180  40
head(temp[, 1:6])             # What do the first few columns & rows look like?
#   CASEID      AID RRELNO RPREGNO H3PC1.H3PC1 H3PC2.H3PC2
# 1      1 57118381      5       1           1           1
# 2      2 57134970      1       2           1           1
# 3      3 57135078      1       1           1           1
# 4      4 57135078      5       1           1           1
# 5      5 57164981      1       1           7           3
# 6      6 57191909      1       3           1           1
head(attr(temp, "col.label")) # What are the variable labels?
# [1] "CASE IDENTIFICATION NUMBER"             "RESPONDENT IDENTIFIER"                 
# [3] "ROMANTIC RELATIONSHIP NUMBER"           "RELATIONSHIP PREGNANCY NUMBER"         
# [5] "S23Q1 1 TOLD PARTNER PREGNANT-W3"       "S23Q2 MONTHS PREG WHEN TOLD PARTNER-W3" 
```

原来的例子呢？

```
read.dat.dct("test.dat", "test.dct", labels.included = "no")
#   code call city neigh            name
# 1    C 1245    A   101 George Costanza
# 2    B 1223    B    11    Cosmo Kramer 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-09T06:03:48.330

您可以`dat`使用数据来读取文件，`?read.fwf`因为`.dat`数据本质上只是一个固定宽度的数据文件。

请参阅此处 -[组织凌乱的记事本数据](https://stackoverflow.com/questions/11571148/organizing-messy-notepad-data)- 使用字典文件中的`column(X)`值作为宽度。`.dct`

可以使用字典文件`readLines`来提取信息，然后您可以将其传递给调用中的参数`read.fwf`。

例如：“变量名”与`col.names=`参数对齐，“存储类型”与`colClasses=`参数对齐。

不过，这会有一些手动处理。

# forms - Enforcing Case Insensitive uniqueness on fields at a given nesting level using angularjs

> ID：14224326
> 
> 赞同：1
> 
> 时间：2013-01-08T21:27:00.440
> 
> 标签：forms, validation, angularjs, unique

```
 <FORM>
 <DIV class="outer-class">
      <INPUT class="toValidate" type = "text"/>
      <INPUT class="somethingElse" type= "text"/>
      <INPUT class="toValidate" type ="text"/>
 </DIV>
 <DIV class="outer-class">
      <INPUT class="toValidate" type = "text"/>
      <INPUT class="somethingElse" type= "text"/>
      <INPUT class="toValidate" type ="text"/>
 </DIV>
 <INPUT type="submit"/>
 </FORM> 
```

My question is: How do I ensure that for the form to be valid, the nested toValidates have a unique value but only within the same outer div? I am guessing this logic should go in an OuterClassDirective, but I can't seem to figure out what the logic should look like?

Any advice would be appreciated.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:37:50.347

The 'tabs' and 'pane' directives on the Angular home page solve a similar issue -- the child 'pane' directives need to communicate with the parent 'tabs' directive.

Define a controller on the outerclass directive, and then define a method on the controller (use `this` not $scope). Then `require: '^outerclass'` in the toValidate directive. In the toValidate link function, you can $watch for value changes and call the method on the outerclass controller to pass the value up. Do the validation in the outerclass directive.

See also ['this' vs $scope in AngularJS controllers](https://stackoverflow.com/questions/11605917/this-vs-scope-in-angularjs-controllers/14168699#14168699).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:53:56.743

What about this. Your outerClassDirective should have a controller, which will store used values in an array. It will transclude the input fields in its body. Your toValidate directive requires outerClassDirective and adds the model value to the array, making it invalid if exists.

Here is a try (untested):

```
app.directive('outerClass', function() {
   var values = [];
   var valid = true;
   return {
      template: '<div ng-transclude></div>',
      transclude: true,
      replace: true,
      require: 'ngModel',
      controller: function() {
         this.addValue: function(value) {
            valid = values.indexOf(value) > -1;
            values.push(value);
         };
      },
      link: function(scope, elm, attrs, ctrl) {
         ctrl.$setValidity('toValidate', valid)
      }
   };
});

app.directive('toValidate', function() {
   return {
        require: '^outerClass',
        link: function(scope, elm, attrs, ctrl) {
           ctrl.addValue(attrs.value);
        } 
      }
   };
}); 
```

# android - 调整 ImageButton 背景的图像大小

> ID：14224330
> 
> 赞同：0
> 
> 时间：2013-01-08T21:27:05.703
> 
> 标签：android, imagebutton

我想创建一个 ImageButton 并将图像设置为背景保持原始大小。所以我也使用在 StackOverflow 上找到的这几行代码：

```
ImageButton retry = new ImageButton(this);

Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.button2);
retry.setImageBitmap(image);
retry.setMinimumWidth(image.getWidth());  
retry.setMinimumHeight(image.getHeight()); 
```

但不幸的是，我得到以下结果：

![图像按钮](../Images/2d856ee750d82731449fc77b03f285a6.png)

显然我不想要“背景按钮”，而只想要图像。我能怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:35:36.813

这取决于你的形象，但是。您可以通过将样式写入按钮来实现此目的。

首先，您应该在 drawables 文件夹中为您的按钮定义形状（如果它不存在，请毫不犹豫地创建和定义 button_shape.xml）。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/button_pressed" /> <!-- **pressed button pressed is name of image...** --> 
    <item android:state_focused="true"
          android:drawable="@drawable/button_focused" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/button_focused" /> <!-- hovered -->
    <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

在样式文件中定义样式后。

```
<style name="button_style">
    <item name="android:textColor">#ffffff</item>
    <item name="android:background">@drawable/button_states</item>
</style> 
```

并设置按钮的样式属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:36:05.897

将按钮的背景设置为透明颜色或 null。

# c# - 如何添加 DatagridTextColumn 用于显示目的

> ID：14224332
> 
> 赞同：1
> 
> 时间：2013-01-08T21:27:15.463
> 
> 标签：c#, xaml

在这段代码中，我们使用 Binding 来显示一个数据列，我现在怎么能只显示一个空白列，只是为了显示，比如“其他”，因为目前还没有数据字段。

```
<DataGrid.Columns>
    <DataGridTextColumn Binding="{Binding UnitId}"
                        Width="100*"
                        Header="Unit"></DataGridTextColumn>
    <DataGridTextColumn Binding="{Binding Count}"
                        Width="80*"
                        Header="Missed"></DataGridTextColumn>
</DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:34:02.630

如果数据字段为*空*，您可以使用[TargetNullValue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.aspx)：

```
<DataGridTextColumn Binding="{Binding UnitId, TargetNullValue='OTHER'}"
                    Width="100*"
                    Header="Unit"></DataGridTextColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:36:35.040

好吧（如果我正确理解你的问题）你可以连接一些模拟设计时数据来填充现有的绑定，或者你可以硬编码一些东西作为占位符。

```
<DataGrid.Columns>
    <DataGridTextColumn Binding="{Binding UnitId}"
                        Width="100*"
                        Header="Unit"/>
    <DataGridTextColumn Binding="{Binding Count}"
                        Width="80*"
                        Header="Missed"/>
   <sdk:DataGridTemplateColumn Header="Other">
        <sdk:DataGridTemplateColumn.CellTemplate>
             <DataTemplate>
                  <TextBlock Text="Other"/>
             </DataTemplate>
        </sdk:DataGridTemplateColumn.CellTemplate>
   </sdk:DataGridTemplateColumn>
</DataGrid.Columns> 
```

# sql - 不在 Hive QL 中

> ID：14224335
> 
> 赞同：2
> 
> 时间：2013-01-08T21:27:31.623
> 
> 标签：sql, hive

我正在将 SQL Server 存储过程转换为 HiveQL。

我怎样才能转换类似的东西：

```
SELECT * FROM table1 WHERE id NOT IN (7,6,5,4,2,12) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-27T23:55:58.700

Hive 现在支持 NOT IN。请参阅[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:13:45.707

试试这个：

```
SELECT * FROM table1 WHERE NOT array_contains(array(7,6,5,4,2,12), id) 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-08T22:04:40.923

根据[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)，它说您可以使用`not in`：

**否定形式可以写成：**

```
from DomesticCat cat where cat.name not between 'A' and 'B'

from DomesticCat cat where cat.name not in ( 'Foo', 'Bar', 'Baz' ) 
```

当您在问题中尝试查询时是否遇到错误？

请根据参考资料进行尝试。

*   [参考 1](http://www.coderanch.com/t/217898/ORM/databases/clause-HQL)。
*   [HQL 中的 NOT IN 子句](https://stackoverflow.com/questions/9416974/not-in-clause-in-hql)。

# java - 通过添加按钮扩展类

> ID：14224337
> 
> 赞同：1
> 
> 时间：2013-01-08T21:27:40.240
> 
> 标签：java, button, graphics, awt, extend

这大概是个初级问题。但是，我已经阅读了《Java 编程绝对初学者》的第 12 章，并进入了挑战部分。我不能完全让程序显示带有扩展类的标记按钮。

该规范指出：

> 扩展 JPRButton3D 类以创建一个显示标签的按钮，就像您现在非常熟悉的 AWT Button 类一样。作为一个额外的测试，重写 isFocusable() 方法，以便可以遍历您的按钮类，并确保您绘制一些特殊的图形，以便在您的按钮具有焦点时使其明显。

如何编辑我的 LabelButton3D 和 LabelButton3DTest 代码来完成此任务？

对本规范的回答可能有助于许多新的 Java 程序员扩展他们自己的类。

非常感谢您在此问题上的时间和合作。

这是 JPRButton3D 的代码：

```
package jpr.lightweight;
import java.awt.*;
import java.awt.event.*;

/**
 * A lightweight 3D Button class that fires actions when clicked.
 * When it is enabled it appears {@link #RAISED RAISED}, when
 * it is pressed it appears {@link #SUNK SUNK}, and when it is
 * not enabled, it appears {@link #FLAT FLAT}.
 */
public class JPRButton3D extends JPRRectComponent3D {
  private boolean pressed;
  /**
   * This <code>JPRButton3D</code>'s <code>ActionListener</code>.
   */
  protected ActionListener actionListener;
  private String actionCommand;

  /**
   * Constructs a new <code>JPRButton3D</code> with minimum size
   */
  public JPRButton3D() {
    this(ABSOLUTE_MIN_WIDTH, ABSOLUTE_MIN_HEIGHT, 1);
  }

  /**
   * Constructs a new <code>JPRButton3D</code> with the given dimensions.
   * @param wide the width
   * @param high the height
   */
  public JPRButton3D(int wide, int high) {
    this(wide, high, 1);
  }

/**
 * Constructs a new <code>JPRButton3D</code> with the given dimensions
 * and border magnitude.
 * @param wide the width
 * @param high the height
 * @param border_magnitude the border's magnitude
 */

public JPRButton3D(int wide, int high, int border_magnitude) {
  super(wide, high, RAISED, border_magnitude);
  enableEvents(AWTEvent.MOUSE_EVENT_MASK);
}

public void processMouseEvent(MouseEvent e) {
  if (isEnabled() & e.getModifiers() == MouseEvent.BUTTON1_MASK) {
    switch(e.getID()) {
      case MouseEvent.MOUSE_PRESSED:
        pressed = true;
        current_appearance = SUNK;
        repaint();
        break;
      case MouseEvent.MOUSE_EXITED:
        if (pressed) {
          pressed = false;
          current_appearance = RAISED;
          repaint();
       }
       break;
      case MouseEvent.MOUSE_RELEASED:
        if (pressed) {
          current_appearance = RAISED;
          repaint();
          if (actionListener != null) {
            actionListener.actionPerformed(new ActionEvent(this,
              ActionEvent.ACTION_PERFORMED, actionCommand,
              e.getModifiers()));
          }
        }
        break;
     }
   }
   super.processMouseEvent(e);
}

/**
 * Adds the specified <code>ActionListener</code>
 * @param listener <code>ActionListener</code> to add
 */
 public void addActionListener(ActionListener listener) {
   actionListener = AWTEventMulticaster.add(actionListener, listener);
 }

/**
 * Removes the specified <code>ActionListener</code>
 * @param listener <code>ActionListener</code> to remove
 */
public void removeActionListener(ActionListener listener) {
  actionListener = AWTEventMulticaster.remove(actionListener,
                                                 listener);
}

/**
 * Sets the action command associated with action events.
 * @param command The action command.
 */
public void setActionCommand(String command) {
  actionCommand = command;
}
 /**
  * Gets the action command associated with action events.
  * @return the action command
  */
public String getActionCommand() {
  return actionCommand;
}
/**
 * Enables or disables this <code>JPRButton3D</code>.
 * @param b <code>true</code> to enable, <code>false</code> to disable
 */
public void setEnabled(boolean b) {
  if (b) current_appearance = RAISED;
  else current_appearance = FLAT;
  repaint();
  super.setEnabled(b);
} 
```

}

这是我的 LabelButton3DTest 代码（扩展 JPRButton3D）：

```
import java.awt.*;
import java.awt.event.*;
import jpr.lightweight.JPRButton3D;

public class LabelButton3DTest extends GUIFrame {

LabelButton3D[] b;
String s;

public LabelButton3DTest() {
    super("LabelButton3D Test");
    setLayout(new FlowLayout());
   b = new LabelButton3D[1];

   b[0] = new LabelButton3D("Favorite Button"); 
   b[0] = new LabelButton3D(75, 35, 1);
   add(b[0]);

   pack();
   setVisible(true);
}

   public static void main(String args[]) {
       new LabelButton3DTest();

   }

} 
```

这是我的 LabelButton3D 代码：

```
public class LabelButton3D extends JPRButton3D {

public LabelButton3D(String label) {

}
 public LabelButton3D(int wide, int high, int border_magnitude) {
 super(wide, high, border_magnitude); 
}

} 
```

# wpf - UnityContainer 新实例

> ID：14224347
> 
> 赞同：0
> 
> 时间：2013-01-08T21:28:23.760
> 
> 标签：wpf, mvvm

我有一个包含以下视图的示例应用程序：

1.  主窗口
2.  新客户
3.  客户步骤1
4.  客户Step2
5.  家

我使用 unity 在 App.xaml.cs 中注册类型。

我的构造函数参数如下：

主窗口（新客户，主页）

新客户（CustomerStep1，CustomerStep2）

MainWindow 下面的xaml

```
<DockPanel>
    <ToolBar DockPanel.Dock="Top" ToolBarTray.IsLocked="True">
        <Button Content="Home" Height="50" VerticalContentAlignment="Bottom" Width="100" Click="Button_Click" />
        <Button Content="New Customer" Height="50" VerticalContentAlignment="Bottom" Width="100" Click="Button1_Click" />
    </ToolBar>
    <ContentControl x:Name="mainRegion" />
</DockPanel> 
```

我有他们每个人的视图模型，并且一切正常。

我遇到的问题是，当我单击新客户并在步骤 1 和步骤 2 中输入信息，然后单击主页并再次单击新客户时，数据未清除。如何从这些对象中清除数据。

我使用的 MainWindow 后面的代码：

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        mainRegion.Content = null;
        mainRegion.Content = _homeView;
    }

    private void Button1_Click(object sender, RoutedEventArgs e)
    {
        mainRegion.Content = null;
        mainRegion.Content = _newCustomerView;
    } 
```

如果我离开新客户视图并再次单击新客户，我希望表单是新的。但它没有发生。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:46:48.527

您是如何注册类型的？，您使用的是什么终身管理器？

这也可能有帮助 - [http://msdn.microsoft.com/en-us/library/ff660872(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff660872(v=pandp.20).aspx)

# android - 通过 PC (Eclipse) 在物理设备上模拟来电

> ID：14224351
> 
> 赞同：2
> 
> 时间：2013-01-08T21:28:47.200
> 
> 标签：android, android-emulator, eclipse-plugin

我正在开发一个 android 项目，我希望能够在物理设备上测试我的应用程序。我可以测试我的应用程序的唯一方法是接收传入的短信和电话。我知道我可以通过 telnet 或 Eclipse 中的 DDMS 在模拟器上模拟文本和调用。

这是否可以做同样的事情，而不必继续给自己发短信或从另一台设备给自己打电话，因为它会产生成本。我更喜欢在设备上执行它，因为它比在模拟器上快得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:42:38.773

您可以像这样使用来自 google play 的应用程序

[https://play.google.com/store/apps/details?id=com.popularapp.fakecall&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wb3B1bGFyYXBwLmZha2VjYWxsIl0。](https://play.google.com/store/apps/details?id=com.popularapp.fakecall&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wb3B1bGFyYXBwLmZha2VjYWxsIl0.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:55:53.300

对于短信，有许多在线网站可以向您的手机发送免费短信（TextMessage）。我在印度和美国进行了测试，效果很好。每天，您可以发送大约 100 条 SMS（TextMessage）……我通过它测试了我的应用程序……

关于来电，如果您在美国，也许您可​​以使用 google talk 拨打您的免费号码。

希望这可以帮助！

谢谢，拉梅什小号

# javascript - JavaScript 使用来自其他 JavaScript 文件的脚本

> ID：14224352
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:28:47.613
> 
> 标签：javascript, visual-studio-2010

我在一个*Web 应用程序项目*中有两个 JavaScript 文件，并希望一个文件中的一个函数从另一个文件中调用一个函数。怎么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:29:33.283

从 HTML 页面引用这两个文件

```
<script src="js/file1.js"></script>
<script src="js/file2.js"></script> 
```

一个文件中的函数应该可以从另一个文件中的函数访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:30:18.187

当浏览器解析两个 JS 文件时，一个文件中的函数将对另一个文件可见，反之亦然。

请记住，应该在另一个 JavaScript 文件中使用的 JavaScript 文件通常需要在另一个 JavaScript 文件之前声明（使用 HTML`<script>`标记）。

# css - 为什么我的 div 是垂直显示的？

> ID：14224355
> 
> 赞同：-3
> 
> 时间：2013-01-08T21:29:25.470
> 
> 标签：css, html

我知道已经有很多关于这个的东西了，但是我已经浏览了这一切，我显然遗漏了一些东西，所以对我对此缺乏理解表示歉意..：

```
#mainContent {
    display: block;
    width: 960;
}

#aboutColumn1501 {
width: 150px;
display: inline;
float: left;
}

#aboutColumn3301 {
width: 330px;
display: inline;
float; left;
}

#aboutColumn1502 {
width: 150px;
display: inline;
float: left;
}

#aboutColumn3302 {
width: 330px;
display: inline;
float: left;
}

<html>
<body>
<div id="mainContent">
<div id="aboutColums1501">menu</div>
<div id="aboutColums1502">image</div>
<div id="aboutColumns3301"><h2>first column</h2><p>first column blurb</p></div>
<div id="aboutColumns3302"><h2>next column</h2><p>2nd column BLURB</p></div>
</div><!-- end of #mainContent -->
<div style="clear:both"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:45:45.300

您的 HTML 和 CSS 中有拼写错误。

后的分号`float`：

```
#aboutColumn3301 {
  width: 330px;
  display: inline;
  float; left;
} 
```

ID 不一样：

```
<div id="aboutColums1501">
<div id="aboutColums1502">
<div id="aboutColumns3301">
<div id="aboutColumns3302">

#aboutColumn1501 {
#aboutColumn3301 {
#aboutColumn1502 {
#aboutColumn3302 { 
```

# cross-browser - Firefox 和 Chrome 将标点符号附加到下载的文件名

> ID：14224356
> 
> 赞同：0
> 
> 时间：2013-01-08T21:29:27.073
> 
> 标签：cross-browser

我正在尝试从本地 Web 服务器下载文件。虽然 IE 工作正常，但 Firefox 在文件名末尾附加下划线，Chrome 在末尾附加连字符分号。

有什么要查看的指针吗？

谢谢，

# mongodb - 是否可以将所有 MongoDB 写入默认为安全？这样做对性能有何影响？

> ID：14224359
> 
> 赞同：2
> 
> 时间：2013-01-08T21:29:53.977
> 
> 标签：mongodb, performance, mongomapper, database

对于 MongoDB 2.2.2，是否可以将所有写入默认设置为安全，或者您是否必须为每个写入操作单独包含正确的标志？

如果您使用安全写入，性能会受到什么影响？

我们在 Rails 上使用 MongoMapper。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:58:52.167

如果您使用的是最新版本的 10gen 官方驱动程序，那么默认值实际上*是*安全的，**而不是**一劳永逸（曾经是默认值）。

您可以阅读10gen 联合创始人兼首席技术官的[这篇博](http://blog.mongodb.org/post/36666163412/introducing-mongoclient)文，其中解释了一些历史，并宣布截至 11 月下旬所有 MongoDB 驱动程序默认使用“安全”模式，而不是“即发即弃”。

MongoMapper 建立在 10gen 支持的 Ruby 驱动程序之上，他们还更新了代码以与新的默认值保持一致。[您可以在此处](https://github.com/jnunemaker/mongomapper/commit/68373a5db8aa9d8f8da2811604f17ee950792e43)查看 master 分支的签入和评论。由于我不确定他们的发布时间表是什么，我建议您在[MongoMapper 邮件列表中](https://groups.google.com/forum/?fromgroups#!forum/mongomapper)询问。

即使在此更改之前，您也可以在 MongoMapper 的连接级别上设置“安全”值，这与全局一样好。从 0.11 开始，您可以在`mongo.yml`文件中执行此操作。您可以在[发行说明](http://mongomapper.com/blog/2012/01/26/release-0-11-0/)中查看如何。

底线是您不必为每次写入指定安全模式，但如果您愿意，您仍然*可以*为每个单独的写入操作指定高于或低于默认持久性，但是当您切换到所有内容的最新版本时，然后默认情况下，您将在全局范围内使用“安全写入”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:39:02.777

我不使用mongomapper所以我只能回答一点。

在数据库方面，取决于。安全写入基本上（基本上是关键字）等待数据库在您从火灾中获得默认的“我完成”响应后执行它通常会执行的操作并忘记。

取决于您希望写入的安全程度，还有更多*工作*。一个很好的例子是写入单个节点和一对多节点。如果您写入该单个节点，您将从数据库获得更快的响应，而不是您希望将命令（安全地）复制到网络中的其他节点。

当然，任何数量的安全写入都会对您可以发送到服务器的写入量造成性能影响，因为在给出响应之前需要做更多的工作，这意味着能够向数据库抛出的写入更少。关键是在数据的速度和持久性之间取得适合您应用程序的平衡。

现在许多驱动程序（包括 MongoDB PHP 1.3，使用 1 的写入关注点：http: [//php.net/manual/en/mongo.writeconcerns.php](http://php.net/manual/en/mongo.writeconcerns.php)）开始默认使用正常的安全写入，正常的触发和忘记查询是开始默认废除。

通过查看 mongomapper 文档：[http](http://mongomapper.com/documentation/plugins/safe.html) ://mongomapper.com/documentation/plugins/safe.html似乎您仍然必须在任何地方添加标志。

# python - 为什么在尝试设置 virtualenv 时出现此错误（与 pip 和 easy_install 相关）？

> ID：14224361
> 
> 赞同：4
> 
> 时间：2013-01-08T21:30:10.977
> 
> 标签：python, flask, virtualenv, pip, easy-install

我正在尝试创建一个 Flask 应用程序来推送到 Heroku。当我尝试在文件夹中创建 virtualenv 时，我抛出了这个错误：

```
photo-crawl › sudo virtualenv venv --distribute
Password:
New python executable in venv/bin/python
Installing distribute............................................................................................................................................................................................................................done.
Installing pip....
  Complete output from command /Users/evansiegel/In...rawl/venv/bin/python -x /Users/evansiegel/In...env/bin/easy_install /Library/Python/2.7/...ort/pip-1.2.1.tar.gz:
  /Users/evansiegel/Involvio/photo-crawl/venv/bin/python: can't open file '/Users/evansiegel/Involvio/photo-crawl/venv/bin/easy_install': [Errno 2] No such file or directory
----------------------------------------
...Installing pip...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.8.4', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 964, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1076, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 667, in install_pip
    filter_stdout=_filter_setup)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1042, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/evansiegel/In...rawl/venv/bin/python -x /Users/evansiegel/In...env/bin/easy_install /Library/Python/2.7/...ort/pip-1.2.1.tar.gz failed with error code 2 
```

似乎由于某种原因`virtualenv`没有将应该放入的所有内容放入`venv/bin`文件夹中。现在，只有`python`和两个别名，`python2`并且`python2.7`在那里。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:21:39.553

我相信这是由旧版本的 virtualenv 和/或 pip 中的错误引起的。看起来您正在使用 virtualenv 1.8.4 和 pip 1.2.1。您是否可以升级到最新的 virtualenv 和 pip（当前 virtualenv 1.9.1 和 pip 1.3.1）？

如果您有安装权限，应该这样做：

```
pip install pip --upgrade
pip install virtualenv --upgrade 
```

此时运行相同的命令（即`sudo virtualenv venv --distribute`）应该会给你你想要的。

# javascript - 如何避免在 XMLHttpRequest 调用后自动重新加载页面？

> ID：14224366
> 
> 赞同：6
> 
> 时间：2013-01-08T21:30:35.093
> 
> 标签：javascript, facebook, html, xmlhttprequest

我知道这有点自相矛盾，因为 XMLHttpRequest 不应该重新加载页面，这就是它的全部意义所在。

在 Chrome 最新版本、iOS 上的 Safari 和 Android 上进行了尝试。都是一样的结果。

我正在通过它发送一个带有文件的表格。效果很好，目标站点正确接收数据并显示它。发回 200，“OK”。（这是脸书）

但随后我的页面会自动重新加载。就像我使用 HTML 表单和提交按钮提交表单一样。（这是我原来的问题）

这是我的做法，来自 Javascript

```
// Get the form element
var formData = new FormData(document.getElementById("photosubmitform")); 

var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://graph.facebook.com/' + facebookWallId + '/photos', false);
xhr.onload = function(event)
{
    var json = xhr.responseText; // Response, yay!
}
xhr.send(formData); // Sending it, will reload the page on success... 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T21:33:27.690

你有没有机会通过提交表单来触发这个？如果您不在`return false`onsubmit 处理程序中，表单仍将被提交。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T21:39:14.353

观察表单中的按钮单击时使用[event.preventDefault() 。](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)

# asp.net - 在asp.net的gridview中检索选定行的数据键

> ID：14224370
> 
> 赞同：0
> 
> 时间：2013-01-08T21:30:44.670
> 
> 标签：asp.net, gridview

我在 a`button`的任何行中都有一个（项目模板）`gridView`。我希望当用户单击此按钮时，我检索`dataKey`其中有该按钮的行。我怎样才能做到这一点？（对不起，我不会说和写英语很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:47:50.280

假设您有一个 DataKey 并且它是一个 int 并且不一定选择按钮的行，并且您已将以下功能连接到模板字段中的按钮：

```
protected void RowClicked(object sender, EventArgs e)
{
    Button TempButton = sender as Button;

    if (TempButton != null)
    {
        GridViewRow GVR = TempButton.Parent.Parent as GridViewRow;

        if (GVR != null)
        {
           int ID = (int) GridView1.DataKeys[GVR.DataItemIndex].Value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:39:08.150

尝试 SelectedIndexChanged 事件。像这样的东西：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e){
     TextBox1.Text = GridView1.SelectedRow.Cells[1].Text;
     TextBox2.Text = GridView1.SelectedRow.Cells[2].Text;
     .
     .
     .
} 
```

# sql - 动态透视（行到列）

> ID：14224371
> 
> 赞同：0
> 
> 时间：2013-01-08T21:30:51.757
> 
> 标签：sql, sql-server, sql-server-2008, pivot, unpivot

我有一个`Table1`：

```
ID Instance Name Size Tech
 1   0       D1  123   ABC
 1   1       D2  234   CDV
 2   2       D3  234   CDV
 2   3       D4  345   SDF 
```

我需要使用 Dynamic 的结果集`PIVOT`与标题一起看起来像：

```
ID | Instance0_Name | Instance0_Size | Instance0_Tech | Instance1_Name | Instance1_Size | Instance1_tech
1  | D1             | 123            | ABC            | D2             | 234            | CDV 
```

任何帮助，将不胜感激。使用 SQL Server 2008。

很抱歉之前的帖子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:51:13.760

您想要的输出并不完全清楚，但您可以同时使用`UNPIVOT`and`PIVOT`函数来获得结果

如果您知道列数，那么您可以对这些值进行硬编码：

```
select *
from
(
  select id, 
    'Instance'+cast(instance as varchar(10))+'_'+col col, 
    value
  from 
  (
    select id, 
      Instance, 
      Name, 
      cast(Size as varchar(50)) Size,
      Tech
    from yourtable
  ) x
  unpivot
  (
    value
    for col in (Name, Size, Tech)
  ) u
) x1
pivot
(
  max(value) 
  for col in
    ([Instance0_Name], [Instance0_Size], [Instance0_Tech], 
     [Instance1_Name], [Instance1_Size], [Instance1_Tech], 
     [Instance2_Name], [Instance2_Size], [Instance2_Tech], 
     [Instance3_Name], [Instance3_Size], [Instance3_Tech])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6b2a4/2)

然后如果你有未知数量的值，你可以使用动态sql：

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT ',' 
                      + quotename('Instance'+ cast(instance as varchar(10))+'_'+c.name)
                    from yourtable t
                    cross apply sys.columns as C
                    where C.object_id = object_id('yourtable') and
                         C.name not in ('id', 'instance')
                    group by t.instance, c.name
                    order by t.instance
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select id, 
          ''Instance''+cast(instance as varchar(10))+''_''+col col, 
          value
        from 
        (
          select id, 
            Instance, 
            Name, 
            cast(Size as varchar(50)) Size,
            Tech
          from yourtable
        ) x
        unpivot
        (
          value
          for col in (Name, Size, Tech)
        ) u 
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/db967/2)

如果结果不正确，请编辑您的 OP 并发布您期望从您提供的两个 ID 中获得的结果。

# c# - Webkit.net 和自己的 javascript

> ID：14224372
> 
> 赞同：0
> 
> 时间：2013-01-08T21:30:53.683
> 
> 标签：c#, javascript, webkit, textinput

好吧，这个问题很简单。

我在以这种方式生成的类文件中有一个 webkit 浏览器：

```
public static WebKit.WebKitBrowser mainBrowser = new WebKitBrowser(); 
```

现在我正在尝试自动登录网站。但输入字段未填写。

我正在使用此代码到达需要填写数据的位置：

```
public void loginthen()
{
    this.Controls.Add(globalVars.mainBrowser);
    globalVars.mainBrowser.DocumentCompleted += 
        new WebBrowserDocumentCompletedEventHandler(mainBrowser_DocumentCompleted);
    globalVars.mainBrowser.Navigate("http://www.somesite.com/");                
}

void mainBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    var send = sender as WebKit.WebKitBrowser;
    if (send.Url == e.Url)
    {
        MessageBox.Show("Inloggen");
        globalVars.mainBrowser.Document.GetElementById("user").TextContent = "User Name";
    }
} 
```

显示`MessageBox`，我没有收到错误，但输入字段未填写。

输入字段的 HTML 是这样的：

```
<input id="user" name="user" class="text" type="text" value="" onkeydown="if((e=window.event||event) &amp;&amp; e.keyCode == 13 &amp;&amp; $('#user').val() &amp;&amp; $('#password').val()) $('#login_button').trigger('click');"> 
```

所以我的想法是......我用`TextContent`错了吗？

这（和触发按钮等）可以用javascript完成吗？

所以我用谷歌搜索它，但我唯一能找到的是如何从 javascript 调用 C# 函数或如何从 C# 调用 javascript 函数。但我不拥有这些网站，所以这行不通......

那么您对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:26:53.160

代替：

```
globalVars.mainBrowser.Document.GetElementById("user").TextContent = "User Name"; 
```

你应该使用：

```
globalVars.mainBrowser.Document.GetElementById("user").SetAttribute("value", "User Name"); 
```

您可以使用该`TextContent`属性来设置 HTML 标记的内容，例如`<p />`,`<span />`或`<div />`.

```
globalVars.mainBrowser.Document.GetElementById("myDiv").TextContent = "some div content"; 
```

# javascript - 如何强制 Internet Explorer 刷新 HTML 选择元素的选项列表？

> ID：14224374
> 
> 赞同：1
> 
> 时间：2013-01-08T21:30:58.823
> 
> 标签：javascript, jquery, internet-explorer, html-select

我正在使用 jQuery 以编程方式更改元素的`option`子元素。`select`

更改正在应用于 DOM，但在屏幕上不可见。

这是我在屏幕上看到的：

![具有 4 个选项的组合框](../Images/3416d7d9ec4188c152e8db396ef176ba.png)

这就是我在检查`select`元素时看到的：

![带有 5 个选项子项的 HTML 选择](../Images/52e8b3e0637f83620a305c321d60b359.png)

这是我用来更新`select`元素的代码：

```
 select.empty();
    $.each(this.entries, function() {
        var option = $$("<option/>");
        option.attr("value", this.value);
        option.text(this.label);
        select.append(option);
    }); 
```

这对我来说显然是一个错误。谁能告诉我这有什么问题或指出解决方法？

注意：由于我无法控制的原因，该页面处于怪癖模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:40:16.520

SelectElement 的文档在这里：[https ://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement)

您可以添加如下选项：

```
$("#sel")[0].options.add(new Option("test", "123")); //haven't tested all browsers 
```

文档说您调用`add`select 元素本身，并传入一个选项节点：

```
$("#sel")[0].add($("<option>").val("456").prop("text", "Test2")[0], null); 
```

都在 IE8 中测试（和工作）：http: [//jsfiddle.net/82gCq/2/](http://jsfiddle.net/82gCq/2/)

**注意**[——HTMLOptionsCollection](https://developer.mozilla.org/en-US/docs/DOM/HTMLOptionsCollection)的文档没有指定`add`方法，所以它不是标准化的，它的实现将留给浏览器（如果他们实现的话）。

好消息是它`$("#sel")[0].add(new Option("test3", "789"));`可以在 IE8 中运行，并且应该也可以在其他浏览器中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:38:57.687

尝试改变

```
var option = $$("<option/>"); 
```

至

```
var option = $("<option></option>"); 
```

我删除了双美元符号（我认为这是一个错字），并将`option`元素更改为不使用自闭合语法。我在某些元素（`script`, `textarea`, `iframe`）上使用自闭标签时遇到了问题，这可能是自闭标签可能出现问题的另一个例子。

# python - 定义序列的长度而不是步长

> ID：14224379
> 
> 赞同：1
> 
> 时间：2013-01-08T21:31:42.817
> 
> 标签：python, list, range, sequence

我是 python 新手，想要一个函数，它产生一个包含多个整数的列表，即 [1,3,5,7....]，就像你可以使用 range 函数一样，即 range(1,21,2) .

但是，我不想设置上限，而是想设置列表应该有多长，所以我会说明我想要在列表中的起点、步骤和整数数量。有这样的功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T21:33:06.423

不，但制作一个很容易：

```
def myrange(start, step, count):
    return range(start, start + (step * count), step) 
```

简短演示：

```
>>> myrange(10, 2, 5)
[10, 12, 14, 16, 18]
>>> myrange(10, -2, 5)
[10, 8, 6, 4, 2] 
```

在 python 3 中，它会返回一个`range`对象，就像常规`range()`函数一样：

```
>>> myrange(10, 2, 5)
range(10, 20, 2)
>>> list(myrange(10, 2, 5))
[10, 12, 14, 16, 18] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T21:35:39.233

Martijn Pieter 的答案适用于整数。如果`start`或`step`可能是浮点数，您可以使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
[start+i*step for i in range(count)] 
```

# python - 模板 - 菜单

> ID：14224382
> 
> 赞同：1
> 
> 时间：2013-01-08T21:32:12.227
> 
> 标签：python, django, django-forms, django-templates

如何将下面的相同菜单列表（即模板库）用于不同的应用程序（例如，app1、app2 等）
我想我要问的是当我在 app1 中时，我喜欢看到这个：

```
<ul>
   <li><a href="/app1/" class="home">Home</a></li>
   <li><a href="/app1/help" class="help">Help</a></li>
</ul> 
```

在 app2 中时：

```
<ul>
   <li><a href="/app2/" class="home">Home</a></li>
   <li><a href="/app2/help" class="help">Help</a></li>
</ul> 
```

提前谢谢了。

PS：我试过了`{{ request.path }}`，`{{ request.get_full_path }}`没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:05:13.777

你可以做这样的事情，

```
<!-- project/templates/base.html -->
<html>
  ...
  <ul>
      {% include 'fragments/own_menu.html' %}
  </ul>
  ...
</html> 
```

`fragments/own_menu.html`并在每个应用程序的模板文件夹中放置一个名为的模板。例如

```
app1
   templates/
     fragments/
         own_menu.html 
```

哪个代码应该如下所示：

```
<li><a href="/app1/" class="home">Home</a></li>
<li><a href="/app1/help" class="help">Help</a></li> 
```

你的应用程序2：

```
app2
   templates/
      fragments/
         own_menu.html 
```

哪个代码应该如下所示：

```
<li><a href="/app2/" class="home">Home</a></li>
<li><a href="/app2/help" class="help">Help</a></li> 
```

当您呈现子模板时，将首先在当前应用程序中搜索“fragments/own_menu.html”。

# ruby-on-rails - Heroku 不读取 application.html.haml

> ID：14224394
> 
> 赞同：0
> 
> 时间：2013-01-08T21:33:04.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, haml

我有一个简单的“联系我们”站点，本地服务器可以正确显示。

它在视图/布局中有 application.html.haml 和一个小的页眉和页脚。这会“产生”一个带有联系我们部分的容器。

问题是，当上传到 Heroku 时，它只显示联系我们部分。没有页眉，根本没有页脚。

我确信这不是火箭科学，但无法弄清楚。

非常感谢您的帮助！

如果有帮助，这是 URL：http: [//hik-offline.herokuapp.com/](http://hik-offline.herokuapp.com/)

路线.rb

```
 #force the url to work with under WWW
  constraints(:host => "hikultura.com") do
      match "(*x)" => redirect { |params, request|
        URI.parse(request.url).tap { |x| x.host = "www.hikultura.com" }.to_s
      }
  end

  # Defines all the routes under the language locale
  scope "(:locale)", :locale => /es|eu|fr|en/ do
    resources :messages
  end

  # Routes that work with no locale 
  match '/?locale=es' => 'messages#new'
  match '/?locale=eu' => 'messages#new'
  match '/?locale=fr' => 'messages#new'
  match '/?locale=en' => 'messages#new' 
```

应用程序.html.haml

```
<!DOCTYPE html>

%html{:xmlns => "http://www.w3.org/1999/xhtml", :lang => "en", "xml:lang" => "en"}

  %head
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="csrf-param" content="authenticity_token"/>
    <meta name="keywords" content="turismo pais vasco, euskal herriko, escapadas fin de semnana pais vasco, jaia, pays basque agenda, cultura euskadi, cultura pais vasco, what to do basque country, eventos euskadi, ocio pais vasco" />
    <link rel="shortcut icon" href="/favicon.ico" />
    = title :site => "HiKultura"

    = stylesheet_link_tag    "application"

    = javascript_include_tag "application"
    = csrf_meta_tags

  %body{:class => "#{controller.controller_name} container"}
    .container
      #header
        .wrap
          #logo

            - logo_tag = image_tag("hikultura_paisvasco_euskadi_jaia_cultura_small.png", :alt => "HiKultura Logo HiKultura.com", :class => "logo_size")
            = link_to logo_tag, root_path
            #slogan.capital
              =t :slogan

          #header_right
            #login
              #lang
                - [:es, :eu, :fr, :en].each do |locale|
                  %li= link_to locale, url_for(locale: locale)

      #main
        #cubo
          #formulario
            = yield
          #info
            =t :info
            %br/
            %br/
            =t :info2
            #arrow
        #message.capital
          #notice= notice

        #linea 
```

vies/messages/new.html.haml

```
%h2.capital
  =t :contact_us

= form_for @message do |f|
  -if @message.errors.any?
    .error_messages
      %h2
        = pluralize(@message.errors.count, "error")
        prohibited this message from being saved:
        %ul
          - @message.errors.full_messages.each do |msg|
            %li
              = msg
  .field.capital
    = f.label t(:name)
    %br/
    = f.text_field :name, :size => 46
  .field.capital
    = f.label t :email
    %br/
    = f.email_field :email, :size => 46
  .field.capital
    = f.label :content, t(:message)
    %br/
    = f.text_area :content, :rows => 5, :width => 45
  .actions.capital.theFont
    = f.submit t(:send_message) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:08:31.237

现在都无所谓了。

我创建了一个新的 rails 项目，复制了代码并开始工作。

谢谢

# git - 有没有办法测试文件是否在 git hook 中被 GPG 加密？

> ID：14224398
> 
> 赞同：5
> 
> 时间：2013-01-08T21:33:24.313
> 
> 标签：git, gnupg

我有一个跟踪几个配置文件的 git 存储库。其中一个配置文件是纯文本，而另一个是 gpg 加密的。它们是这样命名的。

*   myconfig.yaml
*   myconfig.yaml.gpg

我想在 git 中创建一个服务器端挂钩，以确保任何以 .gpg 结尾的文件的任何版本都不会以纯文本形式提交。

我认为最好有一个客户端钩子和一个服务器端钩子，以防止开发人员进行大量更改，然后在尝试将更改向上推时陷入困境，因为 gpg 文件的历史包含未加密的数据。

我不能在提交/克隆期间简单地加密/解密 gpg 文件，因为有些人不应该有权解密文件。

我不确定如何完成确保所有版本的 .gpg 文件中仅包含加密数据的任务。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T23:59:27.833

您可以使用该`file`命令检查文件并自动确定它的类型。例如：

```
$ file foo.gpg
foo.gpg: GPG encrypted data
$ file foo
foo: ASCII text 
```

你可以在一个钩子中匹配这个。就像是：

```
case "$filename" in
  *.gpg) if [ "$(file -b "$filename")" != "GPG encrypted data" ]; then
             echo "Error: $filename should be encrypted but isn't" >&2
             exit 1
         fi
         ;;
esac 
```

对于客户端挂钩，您可以使用预提交挂钩`git diff --cached --name-only`来获取要检查的名称列表。

服务器端的钩子更难。我认为您可以挂上预接收，将建议的参考检查到一个临时位置，验证它们（可能`git diff --name-only HEAD^`用于获取已修改文件的列表），然后如果它违反了您的要求，则拒绝从那里更新。

# c# - 需要帮助通过类访问 DropDownList

> ID：14224402
> 
> 赞同：2
> 
> 时间：2013-01-08T21:33:41.447
> 
> 标签：c#, asp.net, visual-studio-2010

我试图弄清楚如何访问和存储下拉列表中的选择以在 mainSQL 类的 SELECT 命令中使用。

这是细节。

DropDownList（在名为 Page.aspx 的页面上）：

```
 <asp:DropDownList 
    ID="selectInfo1" 
    runat="server" 
    AutoPostBack="True"
    DataTextField="Info1"
    DataValueField="Info1Key"
    DataSourceID="SqlDB" >
    </asp:DropDownList> 
```

我试图访问 DDL 的函数（在单独的类文件中）：

```
public List<ListInfo> getList()
{
List<ListInfo> sList = new List<ListInfo>();
ListInfo objList = null;
    //This is where I need to declare a variable called Info1Key and set it to the value of the ddl!
string queryString = "SELECT [UniqueID], [Date], [Info1], [Info2], [Info3] FROM [ReportedSales] WHERE ([Info1] = ' " + Info1Key + "') ORDER BY [Date]";
using (SqlConnection connection = new SqlConnection(sqlConString))
{
    using (SqlCommand command = new SqlCommand(queryString, connection))
    {
        command.Connection.Open();
        using (SqlDataReader dataReader = command.ExecuteReader())
        {
            while (dataReader.Read())
            {
                objList = new ListInfo();
                objList.ID = Convert.ToInt16(dataReader["UniqueID"]);
                objList.Date = Convert.ToDateTime(dataReader["Date"]);
                objList.Info1 = (dataReader["Info1"] as int?) ?? 0;
                objList.Info2 = (dataReader["Info2"] as int?) ?? 0;
                objList.Info3 = (dataReader["Info3"] as int?) ?? 0;
                sList.Add(objList);
            }
        }
    }
}
return sList;
} 
```

这是唯一调用 getList 方法的函数（我很确定）——

```
 private void FillListActivity()
    {
        List<ListInfo> objList = new List<ListInfo>();
        objList = new mainSQL().getList();

        ReportingGV.DataSource = objList;
        ReportingGV.DataBind();
    } 
```

新问题——当我改变 DDL 时，GV 不再改变。

我可以解决的一种方法是更改​​ Page.aspx.cs 中的 Page_Load，如下所示：

起初：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if(!isPostBack)
    {
        FillSalesActivity();
    }
} 
```

工作，但我会有问题吗？：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        FillSalesActivity();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:46:56.147

您不希望您的外部类知道或关心 UI 元素（例如下拉列表）的任何内容。它们应该尽可能与 UI 无关。

相反，在这种情况下您想要做的是将值传递给函数。因此，您可以将函数签名更改为如下所示：

```
public List<ListInfo> getList(string Info1Key)
{
    // The code is the same, just use the Info1Key parameter that's been passed to the function.
} 
```

然后你会这样调用函数：

```
private void FillSalesActivity()
{
    List<SalesInfo> objSalesList = new List<SalesInfo>();
    objSalesList = new mainSQL().getSalesList(selectInfo1.SelectedValue);

    SalesReportingGV.DataSource = objSalesList;
    SalesReportingGV.DataBind();
} 
```

需要注意的几点：

*   您需要在页面上包含错误检查，以确保在`SelectedValue`调用该函数之前有一个值。
*   你*真的*应该调查一下 SQL 注入漏洞，因为你的代码有一个。 *永远不要*隐含地相信来自客户端的值，即使它来自下拉列表并且您认为您可以控制这些值。你没有。如果客户愿意，他们可以发送他们想要的任何值，并且该值可以包含 SQL 代码，您的函数会以所需的所有权限对您的数据库愉快地运行这些代码。研究使用“参数化查询”，或者更好的是 ORM 框架。像 Linq To Sql 这样的东西有一个非常快速的设置和低学习曲线，并为您提供了很多功能。

# three.js - 如何在使用 ColladaLoader 加载的 Three.js 中的 dae 模型上避免莫尔条纹

> ID：14224403
> 
> 赞同：2
> 
> 时间：2013-01-08T21:33:46.167
> 
> 标签：three.js, webgl, visual-artifacts

我使用 Three.js 库从单个 dae/Collada 场景文件中加载和显示对象。该文件是使用 ColladaLoader（来自 Three.js 的示例代码）加载的，然后我使用该函数找到各个对象`colladaScene.getChildByName('ObjectName', true);`。这很好用，但渲染时会出现莫尔条纹。

由于任意加载的场景包含在 Blender 中编辑的复杂对象，我无法对对象或任何纹理做出任何假设。即我不能硬编码任何纹理或材料的特定更改/修复，因为我不知道期望什么纹理或材料。修复或调整必须是通用的，以便可以应用于具有多个纹理的不同对象。不能假定纹理尺寸符合 2 的幂，因为我们无法指导创建场景文件的人员。

问题：当使用 Web-GL 显示多个对象时，我在几个对象上遇到了非常糟糕的莫尔条纹问题。这些物品中有几个具有条纹纹理（深色木材和黑色）以及砖墙（不同颜色）。当以不同的角度和距离渲染时，这些条纹和砖块对象会出现严重的莫尔条纹伪影。这是一个条纹对象的示例。这是一个带有条纹纹理的盒子几何体。 [http://imgur.com/a/vKsi3#0](http://imgur.com/a/vKsi3#0)

是否可以更改纹理材质或纹理本身的设置以使莫尔伪影消失？我可以更改过滤器设置、着色器设置或创建 mipmap 纹理吗？由纹理尺寸引起的莫尔条纹是否不符合 2 次经验法则？加载 Collada 场景后，我们如何在 Javascript 中创建抗锯齿 mipmap？我们可以让 Blender 创建 mipmap 吗？我无法让 Blender 以 Collada 格式导出 mipmap。我已经在 Blender 中的对象纹理上检查/取消选中“自动 mipmap”，但无济于事。

请帮我。是过滤器、着色器还是 mipmap 的问题？有没有人有加载 Collada 场景的示例代码，然后遍历对象设置/更改对象以即使在“奇怪的角度和距离”下也能顺利渲染？

作为最后的手段，如果无法通过 Three.js 中的 Javascript 完成任何操作：有什么方法可以在 Blender 中打开场景并更改材质/纹理设置以使对象在导出到 Collada 文件时渲染得更好？

当我在加载到 Three.js 时显示条纹对象时，它看起来像（我已经包含了我什至远程想象对渲染有任何影响的所有内容）：

```
THREE.Mesh
    children: Array[0] // No child objects.
    material: THREE.MeshPhongMaterial
        blendDst: 205
        blendEquation: 100
        blendSrc: 204
        blending: 1
        map: THREE.Texture
            anisotropy: 1
            format: 1021
            generateMipmaps: true
            image: <img>
                height: 474
                width: 1395
            magFilter: 1006
            mapping: THREE.UVMapping
            minFilter: 1006
            mipmaps: Array[0]
            premultiplyAlpha: false
            type: 1009
            metal: false
            morphNormals: false
            morphTargets: false
            normalMap: null
            opacity: 1
            shading: 2
            skinning: false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:04:06.930

刚刚发现表明这可能是图像大小问题的东西。显然，当图像没有保持严格的二维幂时，OpenGL 3 和 WebGL 会发疯。发生这种情况时，mipmaps 会退出窗口并拒绝工作。这里有很好的讨论：[WebGL 和两种图像大小的力量](https://stackoverflow.com/questions/3792027/webgl-and-the-power-of-two-problem/6735843#6735843)

# java - SMPP 提交国际消息的目的地址无效

> ID：14224409
> 
> 赞同：2
> 
> 时间：2013-01-08T21:34:10.093
> 
> 标签：java, smpp

美好的一天，伙计们！我在尝试通过 SMPP（使用 Logica Java 库）提交国际短信时遇到问题。我将总结我所做的测试。我正在使用 WireShark 来监控与 SMPP 相关的活动。

1.  （在职的）

    ```
     //Connect and stablish session
        Connection conn = new TCPIPConnection(providerAddress, port);
        Session session = new Session(conn);
        BindRequest breq = new BindTransmitter();
        breq.setSystemId(user);
        breq.setPassword(pass);
        breq.setSystemType("CMT");
        breq.setInterfaceVersion((byte)34);
        breq.setAddressRange((byte)0x01, (byte)0x01,null);
        Response resp = session.bind(breq);

        //Create message
        SubmitSM msg = new SubmitSM();
        msg.setDestAddr((byte)1, (byte)1, "58412014XXXX");
        msg.setSourceAddr((byte)1, (byte)1, "58412014XXXX");
        msg.setShortMessage("Test from tedexis","ISO-8859-1");  

        //Here we submit message
        session.submit(msg);

        //Disconnect
        session.unbind(); 
    ```

结果：消息正确传递。在这里，我们验证凭据是否有效，并注意源地址和目标地址相同

1.  （失败）除了现在为国际电话号码设置的消息目标地址之外，代码保持不变

    ```
     msg.setSourceAddr((byte)1, (byte)1, "1321237XXXX"); 
    ```

结果：失败，检查 WireShark 我在提交过程中观察到以下异常： **SMPP Submit_sm - resp：“无效的目标地址”**

我们可能认为我们的凭据对国际递送无效，但我们目前正在使用这些凭据通过其 Web 服务接口递送国际消息。

我一定错过了配置设置或已经错误地设置了一个，但是我没有想法，如果有人能指出我正确的方向，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:24:33.073

首先，您不必设置地址范围，因为您绑定为发送器，因为地址范围用于通知 SMSC 这个“接收器”会话将处理来自所需地址范围的 MO 消息。

至于发送到国际号码，我不喜欢 logica 的 API，但我很确定您缺少将目标地址 ton 设置为 1（国际号码）并将目标地址 npi 设置为 0（未知）或 1（ ISDN）并重试发送。

如果错误仍然存​​在，您将不得不致电您的提供商，他们可能只允许您通过网络服务发送到国际号码。

# php - 在 foreach 循环中分配对象属性；数据不会在 foreach 循环之外持续存在。为什么不？INT 和 STRING 分配确实有效

> ID：14224411
> 
> 赞同：1
> 
> 时间：2013-01-08T21:34:12.357
> 
> 标签：php, loops, properties, spl

一整天都在把我的头从桌子上敲下来。

```
 // Iterate over project array to populate release data
    for ($i = 0; $i < count($data); $i++) {
        $data[$i]->setProjectReleaseSchedule( $proj_scheds[$i] );

            //Get each projects Est and Act hours
            $options = new stdClass;
            $options->default       = true;
            $options->project_id    = $data[$i]->getProjectId();
            $options->department_id = $person_dm->getPersonDepartmentId();

            //works; AKA: property get assigned an int thatr incriments evern loop
            //$data[$i]->data->proj_hours = $this->counter++;

            //$weekly_report_dm->getProjectHours returns an object w/ populated properties
            $data[$i]->data->proj_hours = $weekly_report_dm->getProjectHours($options);

            //As a test, this dumps what is expected...
            echo'<pre>';
            print_r( $data[$i]->data->proj_hours );
            echo'</pre>';

    }

echo'<pre>';
//After the loop completes and I try to dump the data the property $data->data->proj_hours is assigned an object..
//but the object properties are all null :(.
print_r( $data );
echo'</pre>';
exit; 
```

正如你所看到的，我在一个对象数组上循环；对于每个对象，我都有另一种数据方法，它返回预期的数据。“print_r($data[$i]->data->proj_hours);”。但是，一旦循环完成并且我尝试转储该对象分配给父对象的数据，但所述对象的属性为空/空白。

所以问题是：为什么我可以将 INT、STRINGS 等分配给对象属性，并且它们会在 foreach 循环之外持续存在。但是当一个对象属性分配给一个foreach循环内的父对象时，这些值不会持续存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:46:45.127

似乎`weekly_report_dm->getProjectHours($options)`返回对相同私有（？）属性的引用，这会改变每次调用。您可以尝试使用以下命令克隆结果`clone`：

```
$data[$i]->data->proj_hours = clone $weekly_report_dm->getProjectHours($options); 
```

*更改`getProjectHours`为**不返回**参考将是正确的解决方案*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T21:56:45.040

在顶部，外部 for 循环添加：

```
$filler = array(); 
```

在 for 循环内添加：

```
$filler[] = $data[$i]->data->proj_hours; 
```

然后尝试之后转储数据。

```
print_r($filler); 
```

希望能给你带来一些成果。

# c++ - wxWidgetsribbonBar 占据整个窗口

> ID：14224415
> 
> 赞同：0
> 
> 时间：2013-01-08T21:34:32.967
> 
> 标签：c++, visual-c++, wxwidgets

过去一天我一直在研究如何获得 wxRibbon 条。这需要一些工作，但我终于得到了一个功能区。除了功能区栏占据了整个窗口，除了我的应用程序右侧的一小块空间。

我在主窗口中用来测试的代码如下：

```
Win_app::Win_app(const wxString& title)
       : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(640, 480))
{

    wxRibbonBar* mainMenu = new wxRibbonBar(this,-1,wxDefaultPosition,wxSize(20,40));

    wxRibbonPage* home = new wxRibbonPage(mainMenu, wxID_ANY, wxT("Home"));

    wxRibbonPanel *test_panel1 = new wxRibbonPanel(home, wxID_ANY, wxT("Panel 1"), 
                                            wxNullBitmap, wxDefaultPosition, wxSize(320,60));

    wxRibbonPanel *test_panel2 = new wxRibbonPanel(home, wxID_ANY, wxT("Panel 2"), 
                                            wxNullBitmap, wxDefaultPosition, wxSize(320,60));

    wxRibbonPage* page = new wxRibbonPage(mainMenu, wxID_ANY, wxT("Another Page"));

    wxRibbonPanel *test_panel3 = new wxRibbonPanel(page, wxID_ANY, wxT("Panel 3"), 
                                            wxNullBitmap, wxDefaultPosition, wxSize(640,60));

    mainMenu->Realize();

    Centre();
} 
```

我正在使用 wxWidgets 2.9.4。任何帮助将非常感激！谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:18:49.463

我建议查看 wxWidgets 安装中的功能区示例，该示例位于`wxdir\samples\ribbon`. 它看起来与您的代码大致相同，但关键区别在于它将 wxRibbonBar 添加到了 sizer：

```
wxSizer *s = new wxBoxSizer(wxVERTICAL);

s->Add(m_ribbon, 0, wxEXPAND);
s->Add(m_logwindow, 1, wxEXPAND);
s->Add(m_togglePanels, wxSizerFlags().Border());

SetSizer(s); 
```

您需要这样做，因为如果对话框上有一个控件，它会自动填充对话框，在您的情况下这是不需要的行为。

# c++ - 为什么我在尝试编译 C++ 代码时出现错误：在 Eclipse 中初始化 'Item::Item(int)' [-fpermissive] 的参数 1？

> ID：14224421
> 
> 赞同：4
> 
> 时间：2013-01-08T21:34:41.980
> 
> 标签：c++, compilation

我是 C++ 新手，在盯着它太久之后终于放弃了尝试编译它。由于某种原因，编译器似乎拒绝了头文件中的构造函数原型......我无法弄清楚它有什么问题。

项目.h：

```
#ifndef ITEM_H_
#define ITEM_H_

class Item {
public:
    Item(int); //This line is what Eclipse keeps flagging up with the error in the title
    virtual ~Item();
    Item* getNextPtr();
    int getValue();
    void setNextPtr(Item *);
};

#endif /* ITEM_H_ */ 
```

在我的 Item.cpp 文件中，我有：

```
int val;
Item* nextPtr = 0;
Item::Item(int value) {
    val = value;
}

Item* Item::getNextPtr() {
    return nextPtr;
}

void Item::setNextPtr(Item *nextItem) {
    nextPtr = nextItem;
} 

int Item::getValue() {
    return val;
}

Item::~Item() {
    // TODO Auto-generated destructor stub
} 
```

糟糕，我正在使用 GCC。是的，它们应该是成员变量！我该如何使用这种格式来做到这一点？我使用实例化 Item 的代码如下。我知道其中也不应该有全局变量......

```
#include "LinkList.h"
#include "Item.h"

Item* first = 0;
int length = 0;

LinkList::LinkList(int values[], int size) {
    length = size;
    if (length > 0) {
        Item firstItem = new Item(values[0]);
        Item *prev = &firstItem;
        first = &firstItem;
        for (int i = 0; i < size; i++) {
            Item it = new Item(values[i]);
            prev->setNextPtr(&it);          //set 'next' pointer of previous item to current item
            prev = &it;                     // set the current item as the new previous item
        }

    }
}

LinkList::~LinkList() {
    for (int i = 0; i < length; i++) {
        Item firstItem = *first;
        Item *newFirst = firstItem.getNextPtr();
        delete(first);
        first = newFirst;
    }
}

int LinkList::pop() {
    Item firstItem = *first;
    first = firstItem.getNextPtr();
    return firstItem.getValue();
} 
```

我刚刚注意到 pop() 和析构函数的功能存在错误...请忽略这些，我只是想弄清楚 Item 的实例化有什么问题。

海合会错误：

```
Info: Internal Builder is used for build
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o "src\\LinkList.o" "..\\src\\LinkList.cpp" 
..\src\LinkList.cpp: In constructor 'LinkList::LinkList(int*, int)':
..\src\LinkList.cpp:16:38: error: invalid conversion from 'Item*' to 'int' [-fpermissive]
..\src\/Item.h:14:2: error:   initializing argument 1 of 'Item::Item(int)' [-fpermissive]
..\src\LinkList.cpp:20:32: error: invalid conversion from 'Item*' to 'int' [-fpermissive]
..\src\/Item.h:14:2: error:   initializing argument 1 of 'Item::Item(int)' [-fpermissive]

21:24:26 Build Finished (took 256ms) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:59:59.977

这里：

```
Item firstItem = new Item(values[0]); 
```

您正在创建一个以项目指针作为参数的新项目。这与以下内容相同：

```
Item firstItem(new Item(values[0])); 
```

它应该是：

```
Item *firstItem = new Item(values[0]); 
```

# node.js - MessagePack 比本机 node.js JSON 慢

> ID：14224423
> 
> 赞同：6
> 
> 时间：2013-01-08T21:34:47.677
> 
> 标签：node.js, msgpack, messagepack

我刚刚安装了 node-msgpack 并针对本机 JSON 进行了测试。MessagePack 慢得多。有谁知道为什么？

使用作者自己的基准...

```
node ~/node_modules/msgpack/bench.js 
msgpack pack:   4165 ms
msgpack unpack: 1589 ms
json    pack:   1352 ms
json    unpack: 761 ms 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T09:42:43.067

我假设您在谈论[https://github.com/pgriess/node-msgpack](https://github.com/pgriess/node-msgpack)。

只看源头，我不确定它是怎么回事。例如，`src/msgpack.cc`他们有以下内容：

```
Buffer *bp = Buffer::New(sb._sbuf.size);
memcpy(Buffer::Data(bp), sb._sbuf.data, sb._sbuf.size); 
```

在节点方面，它们`SlowBuffer`为每个请求分配和填充一个新的。您可以通过执行以下操作对分配部分进行基准测试：

```
var msgpack = require('msgpack');
var SB = require('buffer').SlowBuffer;
var tmpl = {'abcdef' : 1, 'qqq' : 13, '19' : [1, 2, 3, 4]};

console.time('SlowBuffer');
for (var i = 0; i < 1e6; i++)
    // 20 is the resulting size of their "DATA_TEMPLATE"
    new SB(20);
console.timeEnd('SlowBuffer');

console.time('msgpack.pack');
for (var i = 0; i < 1e6; i++)
    msgpack.pack(tmpl);
console.timeEnd('msgpack.pack');

console.time('stringify');
for (var i = 0; i < 1e6; i++)
    JSON.stringify(tmpl);
console.timeEnd('stringify');

// result - SlowBuffer: 915ms
// result - msgpack.pack: 5144ms
// result - stringify: 1524ms 
```

因此，仅通过为消息分配内存，他们已经花费了 60% 的`stringify`时间。速度如此之慢只有一个原因。

还要考虑到`JSON.stringify`从谷歌那里得到了很多的爱。它经过高度优化，很难被击败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-09T16:25:51.717

我决定对所有流行的 Node.js 模块进行二进制编码 Msgpack 以及 PSON（协议 JSON）编码库与 JSON 的基准测试，结果如下：

*   JSON 编码速度最快，除非它包含二进制数组
*   `msgpack`包含二进制数组时，通常和最快的第二快
*   `msgpack-js`- 始终仅次于`msgpack`
*   `pson`- 始终慢于`msgpack-js`
*   `msgpack5`- 狗总是慢

我已在[https://github.com/mattheworiordan/nodejs-encoding-benchmarks上发布了基准测试存储库和详细结果](https://github.com/mattheworiordan/nodejs-encoding-benchmarks)

# mysql - 比较所需的子查询？

> ID：14224424
> 
> 赞同：0
> 
> 时间：2013-01-08T21:34:54.320
> 
> 标签：mysql, sql

目标：

`channels.active=1`需要活动 ( ) 但具有`0`活动项目的渠道的结果。

有`items`，他们属于`channel`。`items`可以有多个通道。

有3张表：

*   `channels`
*   `items`
*   `items_channels`

将`items_channel`项目映射到通道。示例行：

```
id  item   channel
1   23     47 
```

到目前为止，我只有这个来获得活跃的频道：

`SELECT * FROM channels WHERE channels.active = 1`

我无法掌握仅加入具有 0 个活动项目的频道的部分 - 我是否需要子查询或具有某处的`HAVING`子句？`COUNT`

此外，`channels.active`适用于活动频道，`items.active`适用于活动项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:39:14.587

这是你想要的？

```
SELECT * FROM channels c
    LEFT OUTER JOIN items_channels ic ON c.channelID = ic.channelID
    LEFT OUTER JOIN items i ON i.itemID = ic.itemID AND i.active = 1
WHERE channels.active = 1 AND i.itemID IS NULL 
```

如果您使用 COUNT() ，则需要使用嵌套查询，例如：

```
SELECT * FROM channels c
WHERE channels.active = 1 AND c.channelID IN 
    (
    SELECT ic.channelID FROM items_channels ic 
        LEFT OUTER JOIN items i ON i.itemID = ic.itemID
        WHERE i.active = 1
    GROUP BY ic.channelID
    HAVING COUNT(ic.itemID) == 0
    ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:46:47.550

这应该适合你：

```
SELECT channels.* 
FROM channels
LEFT JOIN items_channels
  ON channels.id = items_channels.channel
LEFT JOIN items
  ON items_channels.item = items.id AND items.active = 1
WHERE channels.active = 1
GROUP BY channels.id
HAVING COUNT(items.id) = 0 
```

[在这里](http://sqlfiddle.com/#!2/4ee64/1)工作 sqlfiddle 。

# java - ADF Faces 多文件上传

> ID：14224425
> 
> 赞同：1
> 
> 时间：2013-01-08T21:35:01.620
> 
> 标签：java, file-upload, oracle-adf

我正在尝试使用多个 af:inputFile 组件创建多个文件上传。这是我的xhtml：

```
<?xml version='1.0' encoding='UTF-8'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:af="http://xmlns.oracle.com/adf/faces/rich">
  <jsp:directive.page contentType="text/html;charset=UTF-8"/>
  <f:view>
    <af:document id="d1" title="Home">
      <af:form id="f1" usesUpload="true">
        <af:commandButton text="Add" immediate="true"
                          actionListener="#{viewScope.massUpload.add}"
                          id="cb2"/>
        <af:panelGroupLayout layout="vertical" id="pgl1" partialTriggers="cb1">
          <af:iterator value="#{viewScope.massUpload.fileComponents}" var="fileComponent"
                       id="i1" varStatus="status">
            <af:inputFile binding="#{fileComponent}" id="if1"
                          value="#{viewScope.massUpload.files[status.index]}"/>
          </af:iterator>
          <af:commandButton text="Upload"
                            actionListener="#{viewScope.massUpload.upload}"
                            id="cb1"/>
        </af:panelGroupLayout>
      </af:form>
    </af:document>
  </f:view>
</jsp:root> 
```

这是托管bean：

```
package com.edfx.massupload.bean;

import java.util.ArrayList;
import java.util.List;

import javax.faces.event.ActionEvent;

import oracle.adf.view.rich.component.rich.input.RichInputFile;

import oracle.stellent.ridc.IdcClientException;

import org.apache.myfaces.trinidad.model.UploadedFile;

public class MassUploadBean {
    private List<RichInputFile> fileComponents = new ArrayList<RichInputFile>();
    private List<UploadedFile> files = new ArrayList<UploadedFile>();

    public MassUploadBean() {
        super();        
    }

    public void add(ActionEvent event) {   
        fileComponents.add(new RichInputFile());
        files.add(null);
    }

    public void upload(ActionEvent event) throws IdcClientException {
        for(UploadedFile file : files) {
            System.out.println(file.getFilename());
        }
    }

    public void setFiles(List<UploadedFile> files) {
        this.files = files;
    }

    public List<UploadedFile> getFiles() {
        return files;
    }

    public void setFileComponents(List<RichInputFile> fileComponents) {
        this.fileComponents = fileComponents;
    }

    public List<RichInputFile> getFileComponents() {
        return fileComponents;
    }
} 
```

我面临的问题是：

1.  我点击了添加按钮；页面新增文件上传组件；我浏览一个文件；再次点击添加按钮；添加了另一个文件上传组件并提交了第一个文件上传（但它有边框或类似的东西）；我从第二个文件上传浏览文件；再次点击添加按钮；现在第一个文件上传被清除（重置），第二个文件上传被提交；
2.  每当我单击“添加”按钮时，文件就会被上传。为什么？如何抵抗它？我已经尝试通过设置 toSubmit="false" 但没有运气。还尝试将迭代器、文件上传器和上传按钮放入 af:subForm
3.  我的要求是在单击上传按钮时上传文件，而不是之前。

难道我做错了什么？任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:43:15.710

我看到您正在使用 IdcClientException，它告诉我您正在上传到 UCM。如果您也在使用 WebCenter，那么您可以使用 WebCenter Portal 附带的开箱即用的上传任务流：http: [//docs.oracle.com/cd/E29597_01/webcenter.1111/e25595/jpsdg_content_jsfpg。 htm#autoId18](http://docs.oracle.com/cd/E29597_01/webcenter.1111/e25595/jpsdg_content_jsfpg.htm#autoId18)

从 PS5 开始，该任务流程将为您执行多文件上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T18:21:35.180

ADF 的更高版本应该有助于批量上传：http: [//jdevadf.oracle.com/adf-richclient-demo/docs/tagdoc/af_inputFile.html](http://jdevadf.oracle.com/adf-richclient-demo/docs/tagdoc/af_inputFile.html)

打开 displayMode 和 maximumFiles（另见 uploadType）。

# jquery - 如何使用 Ajax 发出跨域请求？

> ID：14224428
> 
> 赞同：0
> 
> 时间：2013-01-08T21:35:10.200
> 
> 标签：jquery, ajax, xmlhttprequest, cross-domain, cors

我被要求从 xml 提要中获取一些“数据”并将其添加到我在服务器上托管的页面中。我想我会使用 jQuery Ajax api——我得到了这个错误。

```
XMLHttpRequest cannot load .../3.atom. Origin http://myserver.com is not allowed by Access-Control-Allow-Origin. 
```

我需要向某人请求访问权限吗？有什么我可以添加到我的请求中的吗？我已经阅读了有关 CORS 的内容，在这种情况下我应该使用该服务吗？

这是我目前的代码。

```
var feedUrl = "http://www.holmanreviews.com/audi-pembroke-pines/3.atom";
var content;

$.ajax({
    type: "GET",
    url: feedUrl,
    dataType: "xml",
    crossDomain: true,
    success: function (xml) {
        $(xml).find('entry').each(function () {
            var $this = $(this);
            var id = $this.attr('id');
            content += id;
        });
    }
});

$('#feed').append(content); 
```

我这里也有一个 JS Fiddle。[http://jsfiddle.net/rsturim/6nsyX/](http://jsfiddle.net/rsturim/6nsyX/)

如果你能提供帮助，我会喜欢这方面的一些背景知识——非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:43:16.623

您可能需要设置[服务器端代理](http://developer.yahoo.com/javascript/howto-proxy.html)才能访问此数据。

CORS 不起作用，因为您无法控制服务器。

JSON-P 不起作用，因为服务器似乎不接受“回调”参数。我通过将“？callback = foo”附加到您的请求网址来测试这一点，这并没有改变响应。他们的 API 可能支持回调参数的其他名称，但如果不查看他们的 API 的任何文档，很难知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:31:26.580

您正确地提出了请求，但远程站点需要支持 CORS，而您收到的错误意味着它不支持它。

由于它是 Atom 提要，远程站点支持 JSONP 的可能性可能不大，因此最好的方法是使用代理。您可以使用 Yahoo 的 YQL 来获取 XML 或 JSON，而不是自己滚动。YQL 确实支持 CORS，所以你可以得到任何一个。

XML:

> [`http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%3D%22http%3A%2F%2Fwww.holmanreviews.com%2Faudi-pembroke-pines%2F3.atom%22%20and%20itemPath%3D%22feed.entry%22&format=xml`](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20xml%20where%20url=%22http://www.holmanreviews.com/audi-pembroke-pines/3.atom%22%20and%20itemPath=%22feed.entry%22&format=xml)

JSON：

> [`http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%3D%22http%3A%2F%2Fwww.holmanreviews.com%2Faudi-pembroke-pines%2F3.atom%22%20and%20itemPath%3D%22feed.entry%22&format=json`](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20xml%20where%20url=%22http://www.holmanreviews.com/audi-pembroke-pines/3.atom%22%20and%20itemPath=%22feed.entry%22&format=json)

XML 将直接为您提供您将从该站点获得的内容，但使用 JavaScript 解析 XML 并没有什么乐趣，因此我强烈建议使用 JSON。（您也可以获得 JSONP，但支持 CORS 的 JSON 更好。）

从您的代码中，我很确定您能够从基本 URL 构建这些 URL，因此我将把它作为练习（-;

* * *

哦，如果你真的需要支持早于 10 的 Internet Explorer 版本，或者任何其他不支持 CORS 的浏览器，那么当浏览器支持 CORS 和 JSONP 时，这里有一个简洁的方法：

```
dataType: $.support.cors ? "json" : "jsonp" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:57:34.977

为此，您必须使用 JSONP。打破同源政策是一个很好的技巧。这是非常危险的，因此您必须信任数据的提供者。

在您的请求配置中使用相关的数据类型：

```
dataType: "xml" 
```

此外，您的提要需要支持 JSONP。这意味着，如果请求 URL 以 callback=? 之类的查询为后缀，则响应必须包装在 Javascript 函数中，并且引号需要转义：

```
callback("<your-xml>...</your-xml>"); 
```

这是 JSONP 的基本思想。如果您想了解为什么必须这样，请查看 Wikipedia 文章，例如：[JSONP](http://en.wikipedia.org/wiki/JSONP)

# android-layout - 我在 Google Play 中有一个带有 AdMobs 的应用，但我有疑问

> ID：14224429
> 
> 赞同：1
> 
> 时间：2013-01-08T21:35:11.103
> 
> 标签：android-layout, admob, dpi, android-resolution

我在 Google Play 中有一个带有 AdMobs 的应用，但我有疑问。PX DP 转换器是开发人员和设计人员的简单工具。基本上这个应用程序是为了我的学习。

[PX DP 转换器 | 谷歌播放](https://play.google.com/store/apps/details?id=projectes.edoyle.pxdpconverter)

我知道，如果我使用 AdMobs，我将看不到或点击广告，否则谷歌将禁止我的帐户。我在“TestDevice”中指定了终端的模拟器和 ID，所以我看到的是横幅而不是广告，并且广告出现在其他智能手机中，它可以正常工作。（对不起，我的英语不好）

我的问题是...

1.  我有几部不同帐户的智能手机。我可以在不被禁止的情况下使用本地 wi-fi（家庭）点击广告吗？

2.  我可以在不点击的情况下使用带有广告的应用程序而不在“TestDevice”上注册我的ID吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:03:23.153

1.  我怀疑 Admob 可能会禁止您在您的开发设备上进行几次测试点击。但他们确实有跟踪和检测异常点击的算法，所以如果你滥用它，他们会抓住并禁止你。

2.  是的

# ruby-on-rails - 如何创建一个增加模型属性并且可以在每个浏览器中按下一次的按钮？

> ID：14224433
> 
> 赞同：2
> 
> 时间：2013-01-08T21:35:23.070
> 
> 标签：ruby-on-rails, ruby, button, cookies, increment

一个`apartment_listing`有很多`reviews`，一个`review`属于一个`apartment_listing`。

在文件`views/apartment_listings/show.html.erb`中，我显示了该特定的评论列表`apartment_listing`。这些评论是使用部分视图生成的，`apartment_listings/_review.html.erb`如下所示：

```
<%= render :partial => "review", :collection => @apartment_listing.reviews %> 
```

在`_review`中，我想要一个按钮，按下时：

1.  增加评论的`helpful_count`属性。
2.  使其无法在同一浏览器中再次按下 - 可能使用 cookie。

我觉得前者不应该太难弄清楚，但它让我打败了。我真的不知道从哪里开始第二个目标。

* * *

编辑：我设法`helpful_count`用以下代码更新了评论的属性`apartment_listings/_review.html.erb`：

```
<%= form_for review, :method => :put, :remote => true do |f| %>
  <%= f.hidden_field :helpful_count, value: (review.helpful_count + 1) %    > 
  <%= f.submit 'Helpful?' %>
<% end %> 
```

但是，我不确定这是否是最好的方法，并且我希望能够在单击按钮后禁用该按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:18:33.877

您的更新代码`helpful_count`可能会出现问题。想象一下，两个用户在他们的网页上加载了一套公寓。其中一个标记它有帮助，下一个也标记它有帮助。因为当他们最初加载页面时，`helpful_count`是相同的，在他们都点击帮助后，计数只会增加一：它会更新两次到相同的值。

确实，您想创建一个新操作，可能在公寓的评论资源下。该操作可以使用 ActiveRecord 的`increment`方法来更新`helpful_count`（从技术上讲，在 中仍然存在竞争条件`increment!`，您遇到的频率要少得多）[http://apidock.com/rails/ActiveRecord/Persistence/increment%21](http://apidock.com/rails/ActiveRecord/Persistence/increment%21)

对于后一个问题，Cookie 似乎是一个合理的解决方案。只需使用 jQuery 在表单上绑定提交，并在处理程序中创建 cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:19:59.163

您的控制器中的代码是什么样的`reviews`？更有经验的 RESTful 编码人员可能能够更连贯地谈论这一点，但在我看来，增加`helpful_count`属性应该是发送到`reviews`控制器的操作。这样，您可以创建一个异步执行操作的链接。

例如，在 _review.html.erb 内部：

```
<% collection.each do |review| %>
<%= link_to "Mark as Helpful", "/apartment_listing/#{@apartment_listing.id}/reviews/#{@review.id}/incHelpful?nonce=#{SecureRandom.rand(16)}", :remote => true, :method => :put %>
# ... Do something cool with your review content ...
<% end %> 
```

在您的 ReviewController 类中：

```
def incHelpful
  unless params[:nonce] == session[:nonce][params[:id]]
    @review = Review.find(params[:id])
    @review.helpful_count += 1
    @review.update_attributes(:helpful_count)
    session[:nonce][params[:id]] = params[:nonce]
  end
  render :nothing
  # Optionally return some javascript or JSON back to the browser on success/error
end 
```

/config/routes.rb 内部：

```
put "apartment_listing/:apart_id/reviews/:id/incHelpful" => "reviews#incHelpful" 
```

这里的主要思想是`edit`资源应该使用`PUT`http 方法的操作，并且该更改应该由该资源的控制器处理。Rails 的内置 AJAX 函数通过设置`:remote => true`在`link_to`帮助程序中来使用。第二个概念是随机数，一个仅有效一次的随机值。一旦在用户的会话中设置了这个值，后续的请求`incHelpful`将不会做任何事情。

# qt - 将应用程序链接到 Mac 上 Qt 的静态版本

> ID：14224439
> 
> 赞同：0
> 
> 时间：2013-01-08T21:35:40.307
> 
> 标签：qt

我正在尝试通过将 Qt 应用程序链接到 Qt 的静态版本来部署它。

我按照这个[指南](http://doc.qt.digia.com/qt/deployment-mac.html#static-linking)。我已经下载了 Qt 并静态编译了它。问题是当我尝试将我的应用程序链接到 Qt 的静态版本时。

编译并链接应用程序后，我检查应用程序链接到的其他库：

```
otool -L QtIntro.app/Contents/MacOs/plugandpaint

//output from command:

QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.3)
QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.3)
QtNetwork.framework/Versions/4/QtNetwork (compatibility version 4.8.0, current version 4.8.3)
/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1094.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

为什么我的应用程序仍然链接到 Qt 的动态版本，我该如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:59:10.073

在 99% 的情况下，这是因为您仍然在该特定路径中拥有动态库。如文档中所述：

> 链接器将始终选择动态而不是静态。

尝试将`*.framework`子目录移动到某个地方并再次启动干净的构建。

# c# - 将字符串格式化为 URL

> ID：14224440
> 
> 赞同：0
> 
> 时间：2013-01-08T21:35:44.707
> 
> 标签：c#, string, format, uri

将字符串格式化为 URL 的正确方法是什么？

即“google.com”变为“http://www.google.com”，“www.stackoverflow.com”变为“http://www.stackoverflow.com”。

我想这是使用`Uri`类的东西，但据我所知，`new Uri(mystring).AbsoluteUri`并没有“格式化”字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:38:51.823

`http`是一个协议，内置类无法知道它。它可以是`file`或`ftp`或任何其他协议。所以你应该自己形成它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:47:05.587

您可以使用`UriBuilder`该类来构造 URL。如果字符串未指定，它将添加`HTTP://`为默认方案。

我从这个问题的答案中发现了这一点，[如果需要的话，将方案添加到 URL](https://stackoverflow.com/questions/5289739/add-protocol-to-url-if-needed)

# python - 引用数组

> ID：14224443
> 
> 赞同：2
> 
> 时间：2013-01-08T21:35:49.157
> 
> 标签：python, python-2.7

我的代码当前将数据写入这样的文件：

```
1   1.64    -0.76
2   2.365   0.39
3   6.48    0.88
4   10.45   -0.75
5   12.12   -0.33
6   15.39   0.85
7   19.32   -0.73
8   24.24   0.92
9   26.73   0.35
10  28.18   -0.75
11  33.14   0.85
12  37.02   -0.74
13  37.19   -0.35
14  41.9    0.9
15  45.81   -0.85
16  50.48   0.34
17  50.71   0.84
18  54.61   -0.71
19  59.53   0.88 
```

现在我想引用它进行操作，例如只打印第 3 列。我试过：

```
f = open('./gilly.txt', 'r')
print f[2] 
```

但它没有用......建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:39:44.947

文件只能逐行读取，因此您必须阅读所有文件。如果你只需要一列，你可以这样做：

```
with open('gilly.txt') as myfile:
    third = [float(line.split()[2]) for line in myfile] 
```

（注意转换为`float`）。

或者您可以将整个文件读入列表列表：

```
with open('gilly.txt') as myfile:
    lists = [line.split() for line in myfile] 
```

有时你根本不需要建立一个列表：

```
with open('gilly.txt') as myfile:
    tuples = (map(float, line.split()) for line in myfile) 
```

这应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:41:57.333

要将整个文件读入数据结构：

```
data = [x.strip ().split () for x in open ('gilly.txt') ] 
```

或者得到花车

```
data = [ [float (y) for y in x.strip ().split () ] for x in open ('gilly.txt') ] 
```

# python - 如何线程我的远程 MongoDB 调用？

> ID：14224445
> 
> 赞同：0
> 
> 时间：2013-01-08T21:35:55.150
> 
> 标签：python, mongodb, python-multithreading

所以我在网络上有几台机器运行 MongoDB：

*   我可以很容易地编写代码从我的 PC 连接到一个并返回一个结果集，例如：

> ```
> from pymongo import Connection
> c = Connection("10.130.10.12")
> some_data = c.MyData.MyCollection.find_one() 
> ```

*   如果我有 100 台服务器要连接，并且想把它放在一个循环中，那也很容易：

> ```
> all_data = []
> for server in my_list_of_servers:
>     c = Connection(server)
>     all_data.append(c.MyData.MyCollection.find_one()) 
> ```

*   然而，这是一个接一个的，可能会很慢。
*   如何一次发送所有请求？我对线程非常不熟悉（这是我应该研究的吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:20:05.443

```
from multiprocessing import Pool

def connectAndCollect(server):
    c = Connection(server)
    return c.MyData.MyCollection.find_one()

pool = Pool(processes=10)
res = pool.map(connectAndCollect,servers)
map(lambda x: all_data.append(x),res)
pool.close() 
```

多处理库专为此类任务而设计。如果您愿意，可以将最终`map`调用替换为 for 循环。

此处描述了使用多处理模块进行 Map/Reduce 任务的一般描述：http: [//mikecvet.wordpress.com/2010/07/02/parallel-mapreduce-in-python/](http://mikecvet.wordpress.com/2010/07/02/parallel-mapreduce-in-python/)

# jquery-mobile - Collapisble Set, jQuery Mobile, 注入 AJAX 内容

> ID：14224454
> 
> 赞同：1
> 
> 时间：2013-01-08T21:36:35.460
> 
> 标签：jquery-mobile

给定一个基本的 jQuery Mobile Collapisible Set，如何在切换事件触发之前获取 AJAX 内容？我正在使用 jQM 创建以下内容：

```
<div id="test" data-role="collapsible-set" data-inset="false">
  <div data-role="collapsible" data-collapsed="true" data-mini="true">
    <h2>Title #1</h2>
    <ul data-role="listview"></ul>
  </div>
  <div data-role="collapsible" data-collapsed="true" data-mini="true">
    <h2>Title #2</h2>
    <ul data-role="listview"></ul>
  </div>
</div> 
```

我希望能够在用户单击 AJAX 调用的“切换”触发以从服务器获取内容并将其放置在正确的 ul 中。除了拦截“点击”之外，我可以弄清楚如何做所有事情。我已经尝试在单击和展开 div、h2 甚至 ul 上进行绑定。

我正在寻找类似的东西：

```
$('#test h2').live('click',function() {
    // do my AJAX call here to get li's to put in correct ul (assuming none exist)
}); 
```

当然，我错过了一些超级简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:13:04.360

好的...这是一个工作示例（减去 AJAX）。最大的缺点是这只会在展开时“触发”。但到那时它已经扩大，因此目前显示一个空白区域。真正需要的是“展开前”或“点击”事件，这样您就可以注入所需的内容，然后默认发生（更改图标、显示等）。不知道如何去提议...

[http://jsfiddle.net/mfumm/](http://jsfiddle.net/mfumm/)

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css"/>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<div data-role="page" id="page">
  <div id="set" data-role="collapsible-set" data-inset="false"></div> 
</div>
$("#set div:jqmData(role='collapsible')").each(function () {
  $(this).bind('expand', function() { 
    if($(this).find('li').length < 1) {
      // do ajax call here to get data
      $(this).find('ul').append(items).listview('refresh');
    }
  });
});
$('#page #set li').live('click',function () {
  alert('Go to item');
}); 
```

# java - Android 手机作为实时 MJPEG 视频服务器

> ID：14224455
> 
> 赞同：3
> 
> 时间：2013-01-08T21:36:38.937
> 
> 标签：java, android, http, mjpeg, multipart-mixed-replace

我正在尝试将我的手机用作实时 MJPEG 视频源。到目前为止，捕获帧并将其转换为 JPEG 并不是什么大问题。我真正的问题是正确发送多部分响应。有大量关于发送多部分响应的文档，但它们的问题是他们都希望所有图像在 HTTP 请求到来时都可用（例如用于多图像上传）。当然，为了实时流式传输，我需要能够开始发送多部分响应，同时不断在正文中添加 jpeg。我绝不是 HTTP 爱好者，所以不希望我需要滚动自己的 HTTP 响应并直接写入套接字。是否有支持这种行为的库？我已经在互联网上搜索了解决方案，

有任何想法吗？在最坏的情况下，我愿意查看有关如何手动编写多部分响应的人类可读文档，但如果可能的话，我真的宁愿使用库。

提前致谢。

编辑：根据 sigmavirus 的建议，使用 orielly servlet 库让它工作。请注意，MJPEG 流或多或少是从我发送的 multipart/x-mixed-replace 中仅包含图像/jpeg 的事实隐含地推断出来的。查看我的代码中的注释以获取教程，该教程显示了运行此程序所需的码头库。当然，您还需要 cos.jar，即 Orielly servlet 库。代码如下：

```
package edu.stevens.arpac.webclient;

import java.io.IOException;
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.util.Collections;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpServletRequest;

import org.apache.http.conn.util.InetAddressUtils;
import org.eclipse.jetty.server.Handler;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.handler.AbstractHandler;
import org.eclipse.jetty.server.Request;

import com.oreilly.servlet.MultipartResponse;
import com.oreilly.servlet.ServletUtils;

import android.os.Environment;
import android.util.Log;
// holla at http://puregeekjoy.blogspot.com/2011/06/running-embedded-jetty-in-android-app.html
public class JettyServer extends Thread 
{
private static final String TAG = "JettyServer";
private Server webServer;
private Boolean isStarted = false;

public JettyServer()
{
    super();
    Log.i(TAG, "Initializing server to port 8080");
    webServer = new Server(8080);

    Handler handler = new AbstractHandler() {
        public void handle(String target, Request request, HttpServletRequest servletRequest,
                HttpServletResponse servletResponse) throws IOException, ServletException {

            ServletOutputStream out = servletResponse.getOutputStream();

             MultipartResponse multi = new MultipartResponse(servletResponse);

             Boolean go = true;
             while( go )
             {

                 try
                 {
                     multi.startResponse("image/jpeg");
                     ServletUtils.returnFile(Environment.getExternalStorageDirectory().getPath() + "/ARPac/twi.jpg", out);
                     multi.endResponse();
                 }
                 catch(IOException ex)
                 {
                    go = false;
                    Log.i(TAG, "IO Failed with exception " + ex.getMessage());
                 }
             }
             request.setHandled(true);
        }
    };
    webServer.setHandler(handler);

    try {
        webServer.start();
        Log.d(TAG, "started Web server @ " + getIPAddress());
        isStarted = true;

    }
    catch (Exception e) {
        Log.d(TAG, "unexpected exception starting Web server: " + e);
    }
}

/**
 * Get IP address from first non-localhost interface
 * @return  address or empty string
 */
private String getIPAddress() 
{
    try 
    {
        List<NetworkInterface> interfaces = Collections.list(NetworkInterface.getNetworkInterfaces());
        for (NetworkInterface intf : interfaces) 
        {
            List<InetAddress> addrs = Collections.list(intf.getInetAddresses());
            for (InetAddress addr : addrs) 
            {
                if (!addr.isLoopbackAddress())
                {
                    String sAddr = addr.getHostAddress().toUpperCase(); 
                    if (InetAddressUtils.isIPv4Address(sAddr))
                    {
                        //Log.d(TAG, "IP address is: " + sAddr);
                        return sAddr;
                    } 
                }
            }
        }
    } 
    catch (Exception ex) 
    { 
        Log.e(TAG, "could not get IP address: " + ex.getMessage());
    } // for now eat exceptions
    Log.e(TAG, "Could not find a non-loopback IPv4 address!");
    return "";
}

public void teardown()
{
    if( isStarted )
    {
        try {
            webServer.stop();
            isStarted = false;
        } catch (Exception e) {
            Log.e(TAG, "Couldn't stop server. Probably was called when server already stopped.");
        }
    }
}

public void run() 
 {

 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:47:36.817

你见过这个吗？[http://www.servlets.com/cos/javadoc/com/oreilly/servlet/MultipartResponse.html](http://www.servlets.com/cos/javadoc/com/oreilly/servlet/MultipartResponse.html)看起来该示例单独发送每个部分并在发送下一个或接收中断之前等待指定的时间限制。

# jquery - 隐藏 jQuery 验证错误消息

> ID：14224456
> 
> 赞同：0
> 
> 时间：2013-01-08T21:36:53.590
> 
> 标签：jquery, jquery-validate

如何隐藏特定字段的 jQuery 验证错误消息？

在我的“联系我们”页面中，我有四个文本框，一个下拉菜单和一个`textarea`. 我的最后一个文本框根据下拉菜单中选择的值显示或隐藏。所有字段都通过 jQuery Validation 插件进行验证。

现在，当通过选择下拉菜单隐藏最后一个文本框时，我也想隐藏它的 jQuery Validation 错误消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:10:26.003

您可以通过使用该方法的`add`和`remove`函数来执行下面的示例`.rules()`。请参阅： [http ://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

```
$('form').validate({
    // your other rules and options
});

var ruleSet = {
    required: true,
    minlength: 5
}

$('#field').rules("add", ruleSet);

$('button').click(function() {
    display = $('#field').css('display');
    if (display == 'none') {
      $('#field').show().rules("add", ruleSet);  // show the field and add the rule set
    } else {
      $('#field').next('label').remove(); // remove any outstanding message
      $('#field').hide().rules("remove", ruleSet);  // hide the field and remove the rule set
    }
}); 
```

**工作演示：**

[http://jsfiddle.net/jqg7s/](http://jsfiddle.net/jqg7s/)

# android - Android appwidgetprovider 工具栏样式小部件

> ID：14224457
> 
> 赞同：0
> 
> 时间：2013-01-08T21:37:00.407
> 
> 标签：android, sdk, appwidgetprovider

我试图避免在这里发布问题，因为我通常会为自己解决大部分问题，但我认为我已经碰到了其中一个编程砖墙。很抱歉询问之前是否有人问过这个问题（我已经用谷歌搜索，直到我全部用谷歌搜索）并且我也在这里搜索过，但我在以下问题的示例中几乎没有找到。

是否可以创建一个小部件，其中包含两个或多个按钮，例如 Android 中的按钮，您可以在其中打开和关闭 wifi 蓝牙等。我正在努力研究如何在单击时识别每个按钮（当然使用服务) 在阅读时，我得到的印象是 appwidgetids 在使用时会明显改变。

因此，例如，我有两个按钮，单击时我需要它们按各自的类别写入 sqlite 数据库。例如食品和饮料类别。

显然我可以让一个单独的按钮工作，但使用两个或更多我看不出如何。创建两个提供程序和服务只需创建同一组按钮的副本，然后更改它所基于的那个。

很抱歉缺少代码，因为我在网上浏览了这么多示例，我不会认为在这里放置任何示例会有所帮助。

**编辑***

自从发布此消息以来，我仍然继续尝试解决此问题，我认为我已经使用以下链接作为示例找到了正确的方法：[ [http://shkspr.mobi/blog/2010/11/howto-android-audio-widget /][1]](http://shkspr.mobi/blog/2010/11/howto-android-audio-widget/][1])

目前我的代码如下：

AppWidgetProvider（请原谅注释行）：

```
package co.uk.timcs.myappwidget;

import co.uk.timcs.myappwidget.R;
import android.appwidget.AppWidgetProvider;
import java.util.Random;
import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.RemoteViews;

public class MyWidgetProvider extends AppWidgetProvider {

    // private static final String LOG = "de.vogella.android.widget.example";
     public static String ACTION_WIDGET_CLICK = "CLICK1";
     public static String ClickText2 = "CLICK2";

      @Override
      public void onUpdate(Context context, AppWidgetManager appWidgetManager,
          int[] appWidgetIds) {

//      // Get all ids
//          ComponentName thisWidget = new ComponentName(context,
//              MyWidgetProvider.class);
//
//        int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
//          for (int widgetId : allWidgetIds) {
//            // Create some random data

              RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                  R.layout.widget_layout);

             // RemoteViews remoteViews1 = new RemoteViews(context.getPackageName(),
               //       R.layout.widget_layout);
              //Log.w("WidgetExample", String.valueOf(number));
              // Set the text
              //remoteViews.setTextViewText(R.id.update, String.valueOf(number));

              //remoteViews1.setTextViewText(R.id.update1, "Second TextView :"+String.valueOf(number));

              // Register an onClickListener
              Intent intent = new Intent(context, MyWidgetProvider.class);

           //   intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
              intent.setAction(ACTION_WIDGET_CLICK);
              intent.putExtra("IDS", appWidgetIds);

              Intent intent1 = new Intent(context, MyWidgetProvider.class);

              //intent1.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
              intent1.setAction(ClickText2);
              intent1.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

              PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
                  0, intent,0);

              PendingIntent pendingIntent1 = PendingIntent.getBroadcast(context,
                      0, intent1, 0);
              remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
              remoteViews.setOnClickPendingIntent(R.id.update1, pendingIntent1);

              appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

         // }
      }

      @Override
      public void onReceive(Context context,Intent intent) {

          RemoteViews updateviews = new RemoteViews(context.getPackageName(),
                  R.layout.widget_layout);
          if (intent.getAction().equals(ACTION_WIDGET_CLICK)) {
              updateviews.setTextViewText(R.id.update, "Clicked!!!");
              intent.putExtra("CLICKED?", 1);

          } else {
                    super.onReceive(context, intent);
                         }
//        } else if (intent.getAction()==ClickText1 && intent.getExtras().getInt("CLICKED?")==1) {
//            updateviews.setTextViewText(R.id.update, "No Way Clicked!!! Again!!");
//            intent.putExtra("CLICKED?", 0);
//        }

      }

} 
```

Android 清单如下：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="co.uk.timcs.myappwidget"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="co.uk.timcs.myappwidget.MyAppWidget"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>
        </activity>
       <receiver android:name="MyWidgetProvider" >
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        <action android:name="co.uk.timcs.myappwidget.ACTION_WIDGET_CLICK" />
    </intent-filter>
    <meta-data android:name="android.appwidget.provider"
     android:resource="@xml/widget_info" />
 </receiver>

    </application>

</manifest> 
```

但是，当我单击 TextView 时，什么也没有发生，也没有任何变化。

**编辑**21:59 在 onReceive 中进行了两项更改，在清单中进行了一项更改，但两者都没有产生任何差异。

# c# - 如何使绑定复选框列表的文本成为文件的链接？

> ID：14224460
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:37:16.163
> 
> 标签：c#, asp.net

我有一个绑定到数据源的复选框列表。数据是代表文件路径的字符串列表。我希望值是文件路径，标签是文件的链接。这可能吗？蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:53:28.130

只需确保每个复选框的文本字段都用链接标签包围：`<a href..>`。

例如，您可能有如下数据源：

```
Dictionary<string, string> links = new Dictionary<string, string>();

links.Add("<a href='/filepath1'>somefile</a>", "filepath1");
links.Add("<a href='/filepath2'>somefile2</a>", "filepath2");

CheckBoxList1.DataSource = links;
CheckBoxList1.DataTextField = "Key";
CheckBoxList1.DataValueField = "Value";
CheckBoxList1.DataBind(); 
```

希望这会有所帮助（虽然不是很优雅）

# jms - 使用特殊字符时 JMS 编码的消息选择器不匹配

> ID：14224462
> 
> 赞同：1
> 
> 时间：2013-01-08T21:37:34.977
> 
> 标签：jms, activemq, correlation, spring-jms, jmstemplate

我有 2 个使用请求-回复模式的应用程序（客户端和服务器）。

客户端向服务器发送请求，消息 ID 设置为如下所示：`ID=Hostname-52991-1357677886768-3:1:2:1:1`.

现在，客户端必须收听相关 ID 设置为相同值的消息。由于该值包含特殊字符 (:)，因此我必须对该值进行编码（使用 UTF-8）。

> 设置 JMS 选择器，这是一个 SQL 92 谓词，用于过滤代理中的消息。您可能必须将特殊字符（例如 =）编码为 %3D

所以选择器应该看起来像我猜`JMSCorrelationID='ID=Hostname-52991-1357677886768-3:1:2:1:1'`的编码选择器应该看起来像。`JMSCorrelationID='ID%3AHostname-52991-1357677886768-3%3A1%3A2%3A1%3A1'`

我现在已经挣扎了几个小时，搜索并阅读了我能找到的所有内容，但我无法让这个东西工作，它让我发疯。

`abcd`仅使用类似作品的ASCII 字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:09:26.857

您的 JMS 选择器选择器是 HTML 编码的，它不适用于底层系统（因为它永远不会匹配消息）。表达式 JMSCorrelationID='ID=Hostname-52991-1357677886768-3:1:2:1:1' 应该按原样工作。

# c# - 编译器值类型解析和硬编码“0”整数值

> ID：14224465
> 
> 赞同：18
> 
> 时间：2013-01-08T21:37:44.090
> 
> 标签：c#, .net, compiler-construction

首先，一点背景。[阅读此处发布](https://stackoverflow.com/questions/8352260/why-does-the-sqlparameter-name-value-constructor-treat-0-as-null)的问题和接受的答案，了解我的问题的具体情况。我不确定是否存在其他类似的案例，但这是我知道的唯一案例。

上面的“怪癖”是我很早就意识到的。直到最近，我才完全了解原因。

微软关于`SqlParameter`该类的文档更加清楚地说明了这种情况。

> 当您`Object`在 value 参数中指定 an 时，`SqlDbType`会从 Object 的 Microsoft .NET Framework 类型推断出。
> 
> 使用`SqlParameter`构造函数的此重载来指定整数参数值时要小心。由于此重载采用 type 的值`Object`，因此必须**在值为 0 时**`Object`将整数值转换为 类型，如以下 C# 示例所示。
> 
>  **`Parameter = new SqlParameter("@pname", Convert.ToInt32(0));`
> 
> 如果您不执行此转换，**编译器会假定您正在尝试调用 SqlParameter (string, SqlDbType) 构造函数重载。****

 **（强调补充）

我的问题是为什么编译器会假定当您指定硬编码的“0”（并且只有值“0”）时，您正在尝试指定枚举类型，而不是整数类型？在这种情况下，它假定您正在声明`SqlDbType`值，而不是值 0。

这是不直观的，更糟糕​​的是，错误是不一致的。我有我编写的旧应用程序多年来一直调用存储过程。我将对应用程序进行更改（通常甚至与我的 SQL Server 类无关），发布更新，这个问题会突然破坏应用程序。

**当一个包含多个方法签名的对象包含两个相似的签名，其中一个参数是对象/整数而另一个接受枚举时，为什么编译器会被值 0 混淆？**

正如我所提到的，我从未将这视为任何其他类上的任何其他构造函数或方法的问题。`SqlParameter`这是该类独有的还是 C#/.Net 中继承的错误？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T22:08:46.560

这是因为零整数可以隐式转换为枚举：

```
enum SqlDbType
{
    Zero = 0,
    One = 1
}

class TestClass
{
    public TestClass(string s, object o)
    { System.Console.WriteLine("{0} => TestClass(object)", s); } 

    public TestClass(string s, SqlDbType e)
    { System.Console.WriteLine("{0} => TestClass(Enum SqlDbType)", s); }
}

// This is perfectly valid:
SqlDbType valid = 0;
// Whilst this is not:
SqlDbType ohNoYouDont = 1;

var a1 = new TestClass("0", 0);
// 0 => TestClass(Enum SqlDbType)
var a2 = new TestClass("1", 1); 
// => 1 => TestClass(object) 
```

（改编自[Visual C# 2008 Breaking Changes - change 12](http://msdn.microsoft.com/en-us/library/cc713578.aspx#sectionToggle1)）

当编译器执行重载决议时，0 是适用于 the和构造函数的[函数成员，因为：](http://msdn.microsoft.com/en-us/library/aa691337%28v=vs.71%29.aspx)`SqlDbType``object`

> 存在从实参类型到相应形参类型的隐式转换（第 6.1 节）

（两者`SqlDbType x = 0`都`object x = 0`有效）

由于[更好的转换规则](http://msdn.microsoft.com/en-us/library/aa691339%28v=vs.71%29.aspx)`SqlDbType`，参数优于`object`参数：

*   如果`T1`和`T2`是同一类型，则两种转换都不是更好。
    *   `object`并且`SqlDbType`不是同一类型
*   如果`S`是`T1`，`C1`是更好的转换。
    *   `0`不是一个`object`
*   如果`S`是`T2`，`C2`是更好的转换。
    *   `0`不是一个`SqlDbType`
*   如果存在从 to 的隐式转换，并且不存在从`T1`to`T2`的隐式转换`T2`，`T1`则为`C1`更好的转换。
    *   不存在隐式`object`转换`SqlDbType`
*   如果存在从 to 的隐式转换，并且不存在从`T2`to`T1`的隐式转换`T1`，`T2`则为`C2`更好的转换。
    *   `SqlDbType`存在从to的隐式转换`object`，所以`SqlDbType`是更好的转换

请注意，正如@Eric 在他的回答中所解释的那样，在[Visual C# 2008 （微软对 C# 规范的实现）中，常量 0 的](http://msdn.microsoft.com/en-us/library/cc713578.aspx#sectionToggle1)*确切*构成已经（相当微妙地）发生了变化。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-09T15:09:27.603

RichardTowers 的回答非常好，但我想我会补充一点。

正如其他答案所指出的那样，行为的原因是（1）零可以转换为任何枚举，并且显然可以转换为对象，以及（2）任何枚举类型都比对象*更具体*，因此采用枚举的方法是因此通过重载决议选择作为更好的方法。第二点是我希望不言自明的，但是什么解释了第一点呢？

首先，不幸的是，这里与规范存在偏差。规范说任何*文字**zero*，即`0`实际出现在源代码中的数字，可以隐式转换为任何枚举类型。编译器实际上实现了可以因此转换任何*常量零。*原因是因为一个错误，编译器*有时会*允许常量零，有时不允许，以一种奇怪和不一致的方式。解决问题的最简单方法是始终允许恒定零。您可以在此处详细了解此内容：

 ***[https://web.archive.org/web/20110308161103/http://blogs.msdn.com/b/ericlippert/archive/2006/03/28/the-root-of-all-evil-part-one。 aspx](https://web.archive.org/web/20110308161103/http://blogs.msdn.com/b/ericlippert/archive/2006/03/28/the-root-of-all-evil-part-one.aspx)

其次，允许将零转换为任何枚举的原因是为了确保始终可以将“标志”枚举归零。良好的编程习惯是每个“标志”枚举都有一个等于零的值“无”，但这是一个指导方针，而不是要求。C# 1.0 的设计者认为您可能不得不说这看起来很奇怪

```
for (MyFlags f = (MyFlags)0; ... 
```

初始化一个本地。我个人的看法是，这个决定造成的麻烦比它的价值要多，无论是对上述错误的悲痛，还是它在您发现的过载解决方案中引入的奇怪问题。

最后，构造函数的设计者可能一开始就意识到这将是一个问题，并制作了重载的签名，以便开发人员可以清楚地决定调用哪个 ctor 而无需插入强制转换。不幸的是，这是一个非常模糊的问题，所以很多设计师都没有意识到这一点。希望任何阅读本文的人都不会犯同样的错误；**如果您希望这两个覆盖具有不同的语义，请不要在 object 和任何枚举之间产生歧义**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:49:48.207

这显然是一种已知行为，会影响同时存在枚举和对象类型的任何函数重载。[我不完全理解，但 Eric Lippert 在他的博客](http://blogs.msdn.com/b/ericlippert/archive/2006/03/29/the-root-of-all-evil-part-two.aspx)上总结得很好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:56:40.177

这是由于整数文字 0 具有到任何枚举类型的隐式转换。C# 规范指出：

> **6.1.3 隐式枚举转换**
> 
> 隐式枚举转换允许将十进制整数文字 0 转换为任何枚举类型和任何其基础类型为枚举类型的可空类型。在后一种情况下，通过转换为基础枚举类型并包装结果来评估转换。

因此，在这种情况下，最具体的重载是`SqlParameter(string, DbType)`.

这不适用于其他 int 值，因此`SqlParameter(string, object)`构造函数是最具体的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T21:50:02.110

在解析重载方法的类型时，C# 会选择最具体的选项。[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)类有两个构造函数，它们恰好采用两个参数，`SqlParameter(String, SqlDbType)`并且`SqlParameter(String, Object)`. 当您提供字面`0`量时，它可以被解释为 Object 或 SqlDbType。由于 SqlDbType 比 Object 更具体，因此假定它是意图。

[您可以在此答案](https://stackoverflow.com/a/2933724/866022)中阅读有关重载解决方案的更多信息。*****

# php - 没有文件时创建新数据库而不是引发错误

> ID：14224466
> 
> 赞同：1
> 
> 时间：2013-01-08T21:37:44.103
> 
> 标签：php, error-handling, sqlite, pdo

我第一次在 PHP 中使用 SQLite 和 PDO。

我写了简单的连接程序：

```
try 
{
    $link = new PDO("sqlite:".$file);
    $link->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} 
catch (PDOException $e) 
{
    echo 'SQLite error: ' . $e->getMessage();
} 
```

我移动了我的数据库文件，以测试错误处理并...创建了新数据库。

**我不想要新数据库，我想要错误！我该怎么办？**

暂时我写有条件，但也许`if`有`file_exists()`更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:40:48.067

不，没有。这种行为是设计使然，并且涵盖了（我猜 ;)）99% 的用例，因为在通用设置中，数据库只创建一次并且不会移动。这说：`file_exists()`是要走的路:)而且还不错，那么为什么要寻找更好的方法呢？

# php - 关闭窗口停止 php 脚本？

> ID：14224469
> 
> 赞同：3
> 
> 时间：2013-01-08T21:37:53.487
> 
> 标签：php, window

我一直在尝试寻找这个，但不幸的是我找不到答案。我正在计算我服务器上巨大矩阵的大量 Pearson 相关性。我通过打开 example.org/testscript.php 来做到这一点。

脚本本身将在启动后大约 2 天终止，并将执行许多 INSERT INTO 数据库以用于推荐目的。

我想知道当我关闭浏览器窗口时，PHP 脚本是否会停止。我假设不是；但是我不是 100% 确定。

PS 我注意到在某些计算机上的某些浏览器中，大约 10 分钟后启动脚本时，我会收到内部服务器错误 (500)。然而，脚本本身仍在运行，因为它仍在我的数据库中插入行。

但是在这台计算机上我没有收到这样的错误，因此我想知道当我关闭标签时会发生什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:49:03.610

php 脚本将在超时后终止。您可以更改超时： http: [//php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

但是，如果您没有产生任何输出，浏览器将很快超时。浏览器超时当然是特定于浏览器的。

正如 Dagon 所建议的，正确的方法是在后台在服务器上执行 php 脚本。

# mysql - 从面包屑重新创建目录

> ID：14224471
> 
> 赞同：1
> 
> 时间：2013-01-08T21:38:00.750
> 
> 标签：mysql, scrapy, breadcrumbs, catalog

我有一个小谜题。

我使用scrapy来解析供应商网站。

我想做点小把戏。我想从面包屑重新创建目录。

有谁知道这样做的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:52:36.583

这是基于我编写的一些 PHP 代码的伪代码，用于将面包屑转换为[Closure Table](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)。

```
while ($breadcrumbs = fetch()) {
  $chain = explode("/", $breadcrumbs); -- assume "/" is the breadcrumbs separator
  $pathlength = count($chain) - 1;
  $child = $chain[$pathlength];
  foreach ($chain as $ancestor) {
    print $ancestor, $child, $pathlength;
    $pathlength--;
  }
} 
```

输出是目录中类别的[传递闭包。](http://en.wikipedia.org/wiki/Transitive_closure)

# c++ - exit(0) 在其他“空”块中会不好吗？

> ID：14224474
> 
> 赞同：1
> 
> 时间：2013-01-08T21:38:04.710
> 
> 标签：c++, exit

我试图阅读从任何地方调用和`return EXIT_SUCCESS;`从任何地方调用之间的区别，到目前为止我发现的最好的资源是[SO 上的这个答案](https://stackoverflow.com/a/461528)。但是，我想澄清一个细节。`main()``exit(EXIT_SUCCESS)`

对我来说，最有说服力的反对论点`exit()`（如那篇文章中所述）是在局部范围的对象上没有调用析构函数。但这对*其他*对象意味着什么？如果我`exit()`从其他地方调用，离`main()`方法堆栈很远，但是在只包含该调用且没有变量的块（甚至是方法）中调用怎么办？堆栈上其他地方的对象还会被破坏吗？

我的用例是这样的：

我有一个应用程序一直提示用户输入，直到给出“退出”命令（基于文本的冒险游戏）。实现这一目标的最简单方法是将“退出”映射到一个简单调用`exit(EXIT_SUCCESS)`. 当然，我可以编写它，以便用户可以执行的*每个*操作都返回一个布尔值，指示游戏是否应该继续，然后就`return false`在我想退出时 - 但我*唯一*一次会返回除此之外的任何`true`内容方法 - 然后所有其他操作方法都必须`return true`只是因为我想避免`exit()`。另一方面，我创建了很多对象并动态分配了很多内存——所有这些都必须由类析构函数来处理，因此它们运行至关重要。

这里的最佳做法是什么？这是一个很好的案例`exit()`，还是和方法一样糟糕`main`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:42:48.020

```
if (command == "quit") {
    throw QuitGameException();
} 
```

你可以抛出一个异常。异常将安全地展开堆栈并销毁所有调用者中的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:45:09.670

我什至不会读那个 SO 帖子，因为我知道它在说什么。**不要使用 exit()**，所以不要。

我知道使用 exit() 的一个原因 - 如果你完全注定要失败并且你无法很好地退出。在这种情况下，您**不会**以代码零退出。因此，无论如何，当您即将崩溃时，exit() 非零。

在**所有其他情况下**，创建变量让您离开主循环并退出主循环，以清理所有内存。如果您不编写这样的代码，您将永远无法检测到所有内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:12:04.057

> 堆栈上其他地方的对象还会被破坏吗？

不，exit() 执行以下操作（按顺序）：

> *   与具有线程存储持续时间的当前线程关联的对象被销毁（仅限 C++11）。
> *   具有静态存储持续时间的对象被销毁 (C++) 并调用使用 atexit 注册的函数（如果抛出未处理的异常，则调用终止）。
> *   所有 C 流（使用 in 中的函数打开）都被关闭（如果被缓冲，则被刷新），并且所有使用 tmpfile 创建的文件都被删除。
> *   控制权返回宿主环境
> 
> 来自：[http ://www.cplusplus.com/reference/cstdlib/exit/](http://www.cplusplus.com/reference/cstdlib/exit/)

exit() 不展开堆栈，整个堆栈的内存被简单地释放，堆栈中单个对象的析构函数不运行。只有当所有没有简单析构函数的对象（不处理外部资源的对象）都分配在静态存储中（即全局变量或局部范围的静态变量）时，使用 exit() 才是安全的。大多数程序都有文件处理程序、套接字连接、数据库处理程序等，可以从更优雅的关闭中受益。请注意，动态分配的对象（不处理外部资源）不一定需要释放，因为程序无论如何都将终止。

exit() 是从 C 继承的一个特性，它没有析构函数，因此总是可以使用 atexit() 安排清理外部资源；一般来说，在 C++ 中安全地使用 exit() 是非常困难的，相反，在 C++ 中，您应该用 RAII 编写程序，并抛出异常以终止并进行清理。

# iphone - MPMoviePlayerViewController 产生很多错误

> ID：14224476
> 
> 赞同：2
> 
> 时间：2013-01-08T21:38:08.240
> 
> 标签：iphone, mpmovieplayercontroller

我在让 MPMoviePlayerViewController 工作时遇到问题。我有一个新项目，在 viewDidLoad 之后我尝试在 moviePlayerViewController 中播放电影，如下所示。我让电影播放，我收到很多错误消息，如下所示。有人可以解释我做错了什么来得到这些错误

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [ self play ];
}

- (void) play {
    NSURL *filmURL = [ NSURL URLWithString:@"http://www.ud-ltd.com/ipmt/Film16.mp4" ];
    self.mvc = [[MPMoviePlayerViewController alloc] initWithContentURL:filmURL ];
    [ self presentMoviePlayerViewControllerAnimated:self.mvc ];
    [ self.view addSubview:self.mvc.view ];
    [ self.mvc.moviePlayer play];
} 
```

错误消息

```
Jan  8 21:19:28 rezas-macbook.home MoviePlayer[30320] <Error>: CGContextSaveGState: invalid context 0x0
Jan  8 21:19:28 rezas-macbook.home MoviePlayer[30320] <Error>: CGContextClipToRect: invalid context 0x0
Jan  8 21:19:28 rezas-macbook.home MoviePlayer[30320] <Error>: CGContextTranslateCTM: invalid context 0x0
Jan  8 21:19:28 rezas-macbook.home MoviePlayer[30320] <Error>: CGContextDrawShading: invalid context 0x0
Jan  8 21:19:28 rezas-macbook.home MoviePlayer[30320] <Error>: CGContextRestoreGState: invalid context 0x0
2013-01-08 21:19:28.526 MoviePlayer[30320:c07] [MPAVController] Autoplay: Disabling autoplay for pause
2013-01-08 21:19:28.527 MoviePlayer[30320:c07] [MPAVController] Autoplay: Disabling autoplay
2013-01-08 21:19:28.528 MoviePlayer[30320:c07] Warning: Attempt to present <MPMoviePlayerViewController: 0x916ec10> on <ViewController: 0x916c9c0> whose view is not in the window hierarchy!
2013-01-08 21:19:28.536 MoviePlayer[30320:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2013-01-08 21:19:29.864 MoviePlayer[30320:c07] [MPAVController] Autoplay: Enabling autoplay
2013-01-08 21:19:29.868 MoviePlayer[30320:c07] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2013-01-08 21:19:29.868 MoviePlayer[30320:c07] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
2013-01-08 21:19:29.870 MoviePlayer[30320:c07] [MPAVController] Autoplay: Enabling autoplay
2013-01-08 21:19:29.871 MoviePlayer[30320:c07] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2013-01-08 21:19:30.964 MoviePlayer[30320:c07] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2013-01-08 21:19:30.964 MoviePlayer[30320:c07] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
2013-01-08 21:19:31.494 MoviePlayer[30320:c07] [MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1
2013-01-08 21:19:31.495 MoviePlayer[30320:c07] [MPAVController] Autoplay: Likely to keep up or full buffer: 1
2013-01-08 21:19:31.495 MoviePlayer[30320:c07] [MPAVController] Autoplay: Enabling autoplay 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T04:43:13.517

我也在使用 MPMoviePlayerViewController 在我的一个应用程序中播放实时视频，我也

收到这些错误，但除了这些错误之外，我的视频在这个播放器上播放得很好。

我认为没有解决办法。如果您的视频运行良好，请忽略这些警告

或错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T17:36:18.010

(1) 为了解决这个问题`CGContextSaveGState`，将你的 alloc-init 包装在一个假的图形上下文中，正如我在这里解释的那样：

[iphone MPMoviePlayerViewController CGContext 错误](https://stackoverflow.com/questions/13203336/iphone-mpmovieplayerviewcontroller-cgcontext-errors/14669166#14669166)

(2) 其他消息无害，现已在 iOS 6.1 上解决。他们不再出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:11:50.667

我还使用 MPMoviePlayerViewController 在我的应用程序上直播视频并得到相同的上述列表错误。我发现 MPMoviePlayer 不支持更大的数据来显示视频，但如果你使用较小的视频数据工作正常，它不会给出任何错误。其实不是准备播放和播放器播放属性的问题。

如果您需要显示更大的数据，请在您的应用程序上使用 webview。

# java - 使用一个休眠连接

> ID：14224479
> 
> 赞同：0
> 
> 时间：2013-01-08T21:38:15.420
> 
> 标签：java, hibernate, join, annotations, hql

我正在尝试进行休眠连接 - 查询似乎有效，但是当我尝试从返回的对象转换为我希望它不工作的类型时......我假设因为它也有连接的表信息..

```
@Entity
@Table(name = "PSNG_SMRY")
public class PSNG_SMRY implements Serializable, Comparable<PSNG_SMRY>
{
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(generator="increment")
    @GenericGenerator(name="increment"  , strategy = "increment")
    @Printable
    public Integer SMRY_ID;
    public Integer DEV_ID;
    public Integer RPTD_TRN_ID;

        @OneToOne(mappedBy="smry", cascade=CascadeType.ALL)
        public TRN trn;

}

@Entity
@Table(name = "TRN")
public class TRN implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    public Integer TRN_ID;
        public String TRN_SCTN
        public String TRN_SYMB;

         @OneToOne
        @PrimaryKeyJoinColumn
        private PSNG_SMRY smry;
} 
```

我在这里找到了这个一对一的映射示例 -[链接](http://viralpatel.net/blogs/hibernate-one-to-one-mapping-tutorial-using-annotation/)

当我从休眠中取回对象时，我尝试将其强制转换为 PSNG_SMRY 并且它不起作用 - 我如何进行连接，我使用连接从 TRN 表中获取 PSNG_SMRY 信息和 TRN_SYMB？

**编辑：**

我得到一个无效的演员表异常 -`[Ljava.lang.Object; cannot be cast to PSNG_SMRY`

查询代码：

```
//code  from some function that sets up all queries
String qQuery = "FROM PSNG_SMRY P, TRN T WHERE  T.TRN_ID = P.RPTD_TRN_ID and P.FIR_AXLE_PASD_DT > sysdate - :timeLimit and P.FIR_AXLE_PASD_DT < sysdate - 1/24 ORDER BY P.FIR_AXLE_PASD_DT";

hqlParamList.add(new HQLParams("timeLimit", timeLimit)); //some list to pass to hibernate and then parameterize the queury

result = queryDatabase(qQuery, q4Query, hqlParamList);

public QueryResult queryDatabase(String qQuery, String q4Query,
        List<HQLParams> params) {
    QueryResult results = new QueryResult();

    jwdsqa = new Connection("JWDSQA");
    jwds4qa = new Connection("JWDS4QA");

    results.qa = jwdsqa.retrieve(qQuery, params);
    results.qa4 = jwds4qa.retrieve(q4Query, params);

    return results;
} 
```

**编辑：这是连接类 - 它仅用于获取会话信息并执行所有休眠操作，例如获取数据......**

```
public class Connection {

public static Logger logger = Logger.getLogger(Connection.class);

   Session session;
   String sessionName;

public Connection(String name){
session = HibernateUtil.getSessionFactory(name).openSession();

sessionName = name;
    if(session.isConnected()){
        //System.out.println(name + " - Connected");
    }
}

public Session getSession(){
    return session;
}

@SuppressWarnings("unchecked")
public List<Object> retrieve(String qry, List<HQLParams> paramList)
{
    Transaction transaction = null;
    List<Object> obj = null;

    try {
        transaction = session.beginTransaction();

        String queryString = qry;

        Query query = session.createQuery(queryString);

        if(paramList != null)
        {
            for(HQLParams param: paramList)
            {
                query.setParameter(param.paramName, param.params);
            }
        }

        List<Object> obj_ = query.list();
        obj = obj_;
        //session.getTransaction().commit();

    } catch (HibernateException ex) {
        ex.printStackTrace();
        logger.error(ex.getMessage() + "\n" + ex.getStackTrace());
        transaction.rollback();
    } catch (Exception ex) {
        System.err.println(ex.getMessage());
        logger.error(ex.getMessage() + "\n" + ex.getStackTrace());
    }
    finally
    {
        session.close();
        //System.out.println("Closing session " + sessionName);
    }

    return obj;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:11:51.997

如果您想要 PSNG_SMRY 实例，则不必询问 TRN 表。这是在您使用 JPA 映射时为您提供的

```
 FROM PSNG_SMRY P 
        WHERE P.FIR_AXLE_PASD_DT > sysdate - :timeLimit 
        and P.FIR_AXLE_PASD_DT < sysdate - 1/24 
        ORDER BY P.FIR_AXLE_PASD_DT 
```

如果您没有获得检索到的 PSNG_SMRY 对象的 TRN，则意味着存在映射错误，因为您正在告诉 Hibernate 如何在注释中检索 PSNG_SMRY 的 TRN

```
 @OneToOne(mappedBy="smry", cascade=CascadeType.ALL)
    public TRN trn; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:02:38.980

我最终弄清楚了这一点 - 我收到强制转换错误的原因是休眠将`PSNG_SMRY`和`TRN`对象都返回为`Object[]`- 而不是作为一个对象返回。

# google-bigquery - 查询操作中的 BigQuery 错误：找不到项目 ID

> ID：14224485
> 
> 赞同：2
> 
> 时间：2013-01-08T21:38:48.587
> 
> 标签：google-bigquery

尝试使用 bq 命令行工具或 BigQuery 浏览器窗口运行查询时，我收到一个项目未找到错误。

*   我已经在项目中注册了 BigQuery API。我还设置了计费。
*   对于 bq，我使用数字项目 ID 设置了 .bigqueryrc。
*   当我尝试查询系统响应时使用的是友好项目 ID，因此 BigQuery 似乎足够了解将数字映射到友好 ID。
*   我已经使用 bq shell 来验证提示是否反映了正确的项目 ID。
*   我可以很好地运行“bq ls publicdata:samples”，所以我假设授权真的开始查询数据。

这里有什么遗漏或错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:50:35.850

识别通过 AppEngine 创建的项目似乎存在问题。这是一个错误，我们正在积极进行修复。

作为一种解决方法，您可以改用通过[https://code.google.com/apis/console](https://code.google.com/apis/console)创建的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T09:28:42.923

在我的项目中，我没有启用 App Engine。对我来说，通过 gcloud 再次进行身份验证解决了这个问题：

```
$ gcloud auth login 
```

# sql-server - 管理对 SQL Server 数据库的大量写入

> ID：14224487
> 
> 赞同：1
> 
> 时间：2013-01-08T21:38:53.480
> 
> 标签：sql-server

我有一个 Web 服务，用于管理文件系统上的文件，这些文件也在 Microsoft SQL Server 数据库中进行跟踪。我们有一个 .NET 系统服务来监视使用 FileSystemWatcher 类添加的文件。当文件添加回调来自 FileSystemWatcher 时，有关文件的元数据将添加到我们的数据库中，并且运行良好。

我现在遇到了一些可扩展性问题。我正在快速连续地将大量文件添加到文件系统中，这最终会通过文件添加来敲击数据库，从而导致锁定我的 Web 前端。

我还没有解决数据库可扩展性问题，所以我正在尝试提出缓解策略。我在考虑也许缓存文件添加并且每五分钟左右将它们写入数据库，但我不确定这有多实用。无论如何，这些数据都需要在某个时候进入我们的数据库，因此在某个时候它必须受到重击。也许我可以将每秒写入的文件数据库条目数限制为一定数量，但是我冒着使该数量小于添加文件的速率的风险。我怎样才能最好地解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:53:54.310

您是否考虑过使用[SQL Server Service Broker 之](http://msdn.microsoft.com/en-us/library/bb522893%28v=sql.105%29.aspx)类的东西？这样一来，您可以一次性推送大量条目，并将插入到您的数据库中。

基本上，您会将消息推送到队列中，然后由接收器存储过程使用，该存储过程将为您执行插入。您可以限制执行的接收器的最大数量，以帮助解决 Web 界面中的响应问题。

[这里](http://msdn.microsoft.com/en-US/library/ms345108%28v=SQL.90%29.aspx)有一篇不错的介绍论文。尽管它是针对 2005 年的，但在 2005 年和较新版本的 SQL Server 之间并没有太大变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:01:26.603

[你有一个性能问题，你应该使用像Waits 和 Queues](http://technet.microsoft.com/en-us/library/cc966413.aspx)这样的性能调查方法来解决它。一旦您确定了*实际*问题，我们就可以讨论解决方案。

*这只是一个猜测*，但假设通知“更新元数据”代码是直接插入，可能的问题是您为每个通知生成一个事务。这会导致提交刷新等待，请参阅[诊断事务日志性能](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/12/09/diagnosing-transaction-log-performance-issues-and-limits-of-the-log-manager.aspx)。批量提交（在提交之前聚合多个通知）是规范的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-07T07:12:32.423

第一种选择是使用缓存来处理大量数据。或使用聚类分析大量数据。请[点击这里](https://docs.microsoft.com/en-us/sql/big-data-cluster/big-data-cluster-overview?view=sql-server-ver15)了解更多信息。

# git - 这是撤消 git 东西的好策略吗？

> ID：14224492
> 
> 赞同：3
> 
> 时间：2013-01-08T21:39:04.373
> 
> 标签：git, revert, git-reset, git-revert

到现在为止，如果我曾经提交并将错误推送到主分支，我的解决方法是，假设 git 日志看起来像

```
commit bad_hash
commit another_bad_hash
commit yet_another_bad_hash
commit good_hash 
```

我过去“解决”这种情况的方式是：

```
git reset --hard good_hash
git push -f origin master 
```

是的，这会起作用......但看起来不是很优雅，因为它有效地删除了提交历史。

因此，在破坏了我的自我的情况之后，我检查了更好的方法，并提出了 git revert 方法，基本上我现在使用

```
git revert bad_hash another_bad_hash yet_another_bad_hash
git push origin master 
```

git revert 将创建三个提交（每个恢复的哈希一个），之后，需要推送来更新远程。

现在，问题是，这种策略是否正确？对我来说看起来比重置要好得多——硬，因为回购的历史没有被中继，如果最终有人想检查为什么会出现问题，他们总是可以做一个

```
git diff bad_hash 
```

这个推理是正确的还是我仍然缺少基本概念。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:43:55.953

此工作流程解释了您需要了解的所有内容。恕我直言，这是一个很好的资源。

致谢：[贾斯汀·希勒曼](http://justinhileman.info/article/changing-history/)

![Git混乱工作流程](../Images/fd403bc00a4975bb7563f424c20e7522.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:59:47.223

Yes -- `git revert` is absolutely the appropriate approach in this situation, as it preserves the history of the bad commit having been made, then later removed.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:36:58.050

通常对于“正在进行的工作”，我会进行一系列提交，然后`git rebase -i base`清理我的历史记录——考虑到读者（可能是你自己）以后会发现这更容易看到。

一旦我推动它，我会认为历史是不可变的，然后会更喜欢这种`git revert`方法。

# msbuild - MSBuild Exec 任务因 Unicode 文件名而失败？

> ID：14224496
> 
> 赞同：0
> 
> 时间：2013-01-08T21:39:10.293
> 
> 标签：msbuild

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:36:33.927

内置的 MSBuild`Exec`任务将给定命令写入批处理文件，然后使用`cmd /c /q`. **不幸的是，它使用OEM 代码页**编写批处理文件。

这意味着 Unicode 文件名被破坏了。

You'll have to write your own `Exec` (or `Pipe`, or even `ConvertMusic`) task instead.

# jquery - 切换多个项目但希望一次只有一个可见？

> ID：14224498
> 
> 赞同：1
> 
> 时间：2013-01-08T21:39:12.403
> 
> 标签：jquery, jquery-selectors, toggle, css-selectors

[小提琴](http://jsfiddle.net/SMLwc/5/)

这就是我希望它做的事情：

1.  每个红框 ( `<span class="more">`) 显示/隐藏描述 ( `<div class="description">`)
2.  “关闭”链接也隐藏描述
3.  如果已经打开了一个描述，则需要在另一个打开时关闭它。因此，一次只能看到一个。

第 1 点和第 2 点，到目前为止一切顺利。但我被困在第 3 点上——我试图找到其他描述来隐藏它们，但这失败了！

```
$(".description").not(this).next(".description").removeClass("show") 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:42:49.957

将第 4 行更改为：

```
$(".description").removeClass("show"), 
```

由于您是新的尚未显示，因此将它们全部关闭并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:43:09.410

```
$(".description").removeClass("show"),
$(this).next(".description").toggleClass("show"); 
```

[**更新的小提琴**](http://jsfiddle.net/SMLwc/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:55:26.803

这应该照顾它：http: [//jsfiddle.net/SMLwc/7/](http://jsfiddle.net/SMLwc/7/)

```
$(document).ready(function () {

  $(".more").bind("click", function () {
    $(this).next(".description").toggleClass("show")
      .parent().siblings().find(".description").removeClass("show");
  });

  $(".close").bind("click", function () {
    $(this).parent(".description").toggleClass("show");
  });

}); 
```

# php - 删除旧的远程 FTP 文件夹

> ID：14224502
> 
> 赞同：2
> 
> 时间：2013-01-08T21:39:27.207
> 
> 标签：php, ftp

我编写了一个 MySQL 数据库备份脚本，它将备份文件存储在远程 FTP 服务器中。它在根目录中创建一些以数据库名称命名的文件夹，然后在每个文件夹中创建一些以当前日期命名的文件夹（格式：yyyy-mm-dd），并在这些文件夹中上传以确切时间命名的备份文件。

我还需要删除旧的二级文件夹（按日期命名）；我的意思是超过 4 天的文件夹。这是我有问题的部分。我用 ftp_nlist 尝试了一些代码，我可以用它列出文件夹，我还用 ftp_mdtm 来获取创建日期并将其与到期日期进行比较。但结果并不好。这是我的代码：

```
...

$skip = array('.', '..', '.ftpquota', '.htaccess');
$expire_date = date('Y-m-d', strtotime('-4 days', time()));

$ff_list = ftp_nlist($con, $db_dir);
foreach($ff_list as $item)
{
    if(in_array($item, $skip))
    {
        continue;
    }
    $mod_time = ftp_mdtm($con, $item);
    if(strtotime($expire_date ) >= $mod_time)
    {
        ftp_rmdir($con, $item);
    }
}

... 
```

请参加我需要删除旧文件夹及其所有内容，所以我需要合适的删除命令（我不知道 ftp_rmdir 是否正常工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:56:15.040

尝试这个 ：

```
if(strtotime($expire_date ) >= strtotime($mod_time)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:48:01.470

你使用正确的命令`ftp_rmdir`

[http://php.net/manual/en/function.ftp-rmdir.php](http://php.net/manual/en/function.ftp-rmdir.php)

但我敢打赌，问题是这个函数，如 rmdir，要求目录为空。

这是一个递归删除函数**警告！未经测试！**

```
//credentials
$host = "ftp server";
$user = "username";
$pass = "password";

//connect
$handle = @ftp_connect($host) or die("Could not connect to {$host}");

//login
@ftp_login($handle, $user, $pass) or die("Could not login to {$host}");

function recursiveDelete($directory){
    //try to delete
    if( !(@ftp_rmdir($handle, $directory) || @ftp_delete($handle, $directory)) ){
        //if the attempt to delete fails, get the file listing
        $filelist = @ftp_nlist($handle, $directory);

        //loop through the file list and recursively delete each file in the list
        foreach($filelist as $file){
            recursiveDelete($file);
        }

        //if the file list is empty, delete the directory we passed
        recursiveDelete($directory);
    }
} 
```

# doctrine - 教义2，一对一关联，在增加/删除相关实体时更新一个实体中的主键

> ID：14224506
> 
> 赞同：0
> 
> 时间：2013-01-08T21:39:48.163
> 
> 标签：doctrine, doctrine-orm

我有 2 个实体用户和地址

用户被一对一（单向）映射到地址，两者都有 id/user_id 字段（主要），用于与 cascade=persist 和 orphanRemoval=true 连接

当我做 $user = $em->find('\Classes\User',1); $user->removeAddress(); $em->flush();

它从数据库中删除了预期的地址部分， **但是为什么它在 User 对象中将 id 值更新为 null**？

```
/**
 * @Entity
 */
class User
{
    /** @Id @Column(type="integer") @GeneratedValue */
    private $id;
    /** @Column(length=100) */
    public $name;

    /** @OneToOne(targetEntity="Address", orphanRemoval=true) 
     * @JoinColumn(name="id", referencedColumnName="user_id")
     */
    public $address;

    public function removeAddress()
    {
        unset($this->address);
    }
}

/**
 * @Entity
 */
class Address
{
    /** @Id @Column(type="integer") */
    public $user_id;

    /** @Column(length=100) */
    public $street_name;

    public function __construct($id, $name) {
    $this->id = $id;
    $this->name = $name;
    }
} 
```

# c# - 数据包的串行奇偶校验/唤醒位开始

> ID：14224507
> 
> 赞同：1
> 
> 时间：2013-01-08T21:39:56.087
> 
> 标签：c#

我正在使用的协议使用奇偶校验（唤醒）位通过 RS-232 发出新消息的开始信号 - 消息的所有其他字节都设置了奇偶校验位 SPACE。数据包包含长度和 CRC...我需要能够捕获设置了唤醒位的第一个字节，然后根据消息本身中的长度信息处理数据包。我已经在汇编和 c 的几个应用程序中做到了这一点。我正在转向 C#，只需要帮助来触发从数据包帧的奇偶校验/唤醒位开始捕获消息 - 11 位，1 个开始，1 个停止，8 个数据和唤醒位。

# css - 导航菜单可点击区域超出导航按钮

> ID：14224508
> 
> 赞同：0
> 
> 时间：2013-01-08T21:40:01.450
> 
> 标签：css, wordpress, wordpress-thesis-theme

出于某种原因，www.hungryrunnergirl.com 左侧边栏顶部的社交媒体图标会阻止点击正下方的存档小部件。当我将每个按钮位置设为绝对位置（容器保持相对位置）时，我没有这个问题，但是当我这样做时，按钮会根据您正在查看的浏览器出现在不同的位置。有没有人知道为什么会发生这种情况（使用绝对定位时的不一致定位或使用相对 CSS 定位时的不可点击区域）？

这是我目前用于设置菜单样式的代码：

```
/* Menu Container */
.custom .sidebar .menu {
  list-style: none;
  padding: 0;
  margin: 0 0 0 10px;
  width: 190px;
  height: 190px;
  position: relative;
}
/* Facebook */
.custom #menu-item-15470 a {
    display:block;
height:81px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 0px;
top: 0px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:-83px 0px;
}
.custom #menu-item-15470 a:hover { 
    background-position:0px 0; 
}
/* Pinterest */
.custom #menu-item-15471 a {
display:block;
height:81px;
width:80px;
padding:0px;
margin-left:10px;
position: relative;
left: 81px;
top: -81px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:-83px -82px;
}
.custom #menu-item-15471 a:hover { 
    background-position:0px -82px; 
}
/* Instagram */
.custom #menu-item-15472 a {
display:block;
height:81px;
width:80px;
padding:0px;
margin-top:10px;
position: relative;
left: 0px;
top: -81px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:-83px -165px;
}
.custom #menu-item-15472 a:hover { 
background-position:0px -165px; 
}
/* Twitter */
.custom #menu-item-15475 a {
display:block;
height:81px;
width:80px;
padding:0px;
margin-left:10px;
margin-top:10px;
position: relative;
left: 81px;
top: -172px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:-83px -248px;
}
.custom #menu-item-15475 a:hover { 
background-position:0px -248px; 
} 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:57:39.700

将以下内容添加到`li.widget`（第 191 行）：

```
position: relative;
z-index: 100; 
```

# java - Android 使用 HttpUrlConnection 连接到网站失败

> ID：14224509
> 
> 赞同：1
> 
> 时间：2013-01-08T21:40:01.703
> 
> 标签：java, android, web, httpurlconnection

我正在尝试从我正在创建的 Android 应用程序中连接到服务器上的网页，但由于某种原因，它似乎在一条线上失败了。

Java代码：

```
URL url = new URL("http://redsquirrelsoftware.co.uk/android/assignments/androidlogin.php");
HttpURLConnection hConnection = (HttpURLConnection)url.openConnection();
HttpURLConnection.setFollowRedirects(true);

hConnection.setDoOutput(true);
hConnection.setRequestMethod("POST");   

// ERROR OCCURS ON NEXT LINE
PrintStream ps = new PrintStream(hConnection.getOutputStream());
ps.print("email=" + LoginActivity.email + "&" + "pword=" + LoginActivity.password);
ps.close();
hConnection.connect(); 
```

LogCat 响应给了我一个 IllegalStateException - 无法访问应用程序密钥，我以前从未见过，也不知道如何修复它。它还提到了我的任何代码中都没有的 TimerTask.run() - 猜测它是 Android 自己的一些代码？

```
01-08 21:28:55.300: E/MtpService(17770): TimerTask.run(): mReason =1
01-08 21:28:57.990: E/InputDispatcher(165): channel '41621cb0 uk.co.redsquirrelsoftware.assignmenttracker/uk.co.redsquirrelsoftware.assignmenttracker.LoginActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
01-08 21:29:01.870: E/GetJar SDK(17935): PackageMonitor: doOnReceive(): failed
01-08 21:29:01.870: E/GetJar SDK(17935): java.lang.IllegalStateException: Unable to access the application key
01-08 21:29:01.870: E/GetJar SDK(17935):    at com.getjar.sdk.data.metadata.PackageMonitor.doOnReceive(PackageMonitor.java:113)
01-08 21:29:01.870: E/GetJar SDK(17935):    at com.getjar.sdk.data.metadata.PackageMonitor.access$000(PackageMonitor.java:62)
01-08 21:29:01.870: E/GetJar SDK(17935):    at com.getjar.sdk.data.metadata.PackageMonitor$1.run(PackageMonitor.java:87)
01-08 21:29:01.870: E/GetJar SDK(17935):    at java.lang.Thread.run(Thread.java:856)
01-08 21:29:02.230: E/GetJar SDK(17918): PackageMonitor: doOnReceive(): failed
01-08 21:29:02.230: E/GetJar SDK(17918): java.lang.IllegalStateException: Unable to access the application key
01-08 21:29:02.230: E/GetJar SDK(17918):    at com.getjar.sdk.data.metadata.PackageMonitor.doOnReceive(PackageMonitor.java:117)
01-08 21:29:02.230: E/GetJar SDK(17918):    at com.getjar.sdk.data.metadata.PackageMonitor.access$000(PackageMonitor.java:59)
01-08 21:29:02.230: E/GetJar SDK(17918):    at com.getjar.sdk.data.metadata.PackageMonitor$1.run(PackageMonitor.java:84)
01-08 21:29:02.230: E/GetJar SDK(17918):    at java.lang.Thread.run(Thread.java:856)
01-08 21:29:02.470: E/GetJar SDK(17918): PackageMonitor: doOnReceive(): failed
01-08 21:29:02.470: E/GetJar SDK(17918): java.lang.IllegalStateException: Unable to access the application key
01-08 21:29:02.470: E/GetJar SDK(17918):    at com.getjar.sdk.data.metadata.PackageMonitor.doOnReceive(PackageMonitor.java:117)
01-08 21:29:02.470: E/GetJar SDK(17918):    at com.getjar.sdk.data.metadata.PackageMonitor.access$000(PackageMonitor.java:59)
01-08 21:29:02.470: E/GetJar SDK(17918):    at com.getjar.sdk.data.metadata.PackageMonitor$1.run(PackageMonitor.java:84)
01-08 21:29:02.470: E/GetJar SDK(17918):    at java.lang.Thread.run(Thread.java:856)
01-08 21:29:02.500: E/GetJar SDK(17935): PackageMonitor: doOnReceive(): failed
01-08 21:29:02.500: E/GetJar SDK(17935): java.lang.IllegalStateException: Unable to access the application key
01-08 21:29:02.500: E/GetJar SDK(17935):    at com.getjar.sdk.data.metadata.PackageMonitor.doOnReceive(PackageMonitor.java:113)
01-08 21:29:02.500: E/GetJar SDK(17935):    at com.getjar.sdk.data.metadata.PackageMonitor.access$000(PackageMonitor.java:62)
01-08 21:29:02.500: E/GetJar SDK(17935):    at com.getjar.sdk.data.metadata.PackageMonitor$1.run(PackageMonitor.java:87)
01-08 21:29:02.500: E/GetJar SDK(17935):    at java.lang.Thread.run(Thread.java:856)
01-08 21:29:17.530: E/dalvikvm(18081): Could not find class 'com.google.common.collect.HashMultiset', referenced from method com.fasterxml.jackson.datatype.guava.GuavaDeserializers.findCollectionDeserializer
01-08 21:29:17.540: E/dalvikvm(18081): Could not find class 'com.google.common.collect.EnumBiMap', referenced from method com.fasterxml.jackson.datatype.guava.GuavaDeserializers.findMapDeserializer
01-08 21:29:17.540: E/dalvikvm(18081): Could not find class 'com.google.common.collect.ImmutableSetMultimap', referenced from method com.fasterxml.jackson.datatype.guava.GuavaDeserializers.findMapLikeDeserializer
01-08 21:29:17.540: E/dalvikvm(18081): Could not find class 'com.google.common.collect.Table', referenced from method com.fasterxml.jackson.datatype.guava.GuavaDeserializers.findMapLikeDeserializer 
```

关于如何修复它的任何建议？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:46:40.097

我认为日志中的相关行是：

01-08 21:28:57.990: E/InputDispatcher(165): 频道 '41621cb0 uk.co.redsquirrelsoftware.assignmenttracker/uk.co.redsquirrelsoftware.assignmenttracker.LoginActivity (server)' ~ 频道已不可恢复地损坏，将被处置！

请参阅此问题的公认答案：

[错误：通道已不可恢复地损坏，将被处置！（电话间隙）](https://stackoverflow.com/questions/10327942/error-channel-is-unrecoverably-broken-and-will-be-disposed-phonegap)

# mysql - 检查匹配条件的行是否至少存在一次的最佳方法

> ID：14224510
> 
> 赞同：2
> 
> 时间：2013-01-08T21:40:12.093
> 
> 标签：mysql

> **可能重复：**
> [测试 MySQL 表中是否存在行的最佳方法](https://stackoverflow.com/questions/1676551/best-way-to-test-if-a-row-exists-in-a-mysql-table)

我需要确定一行是否在表中至少存在一次，例如`name = 'Jon'`.

还有比这更好的解决方案吗？

```
 SELECT name FROM mytable
 WHERE name = 'Jon'
 LIMIT 1 
```

并在接收计数后使用`num_rows`.

# javascript - 在哪里添加 javascript 中的异步脚本

> ID：14224512
> 
> 赞同：4
> 
> 时间：2013-01-08T21:40:16.133
> 
> 标签：javascript

我想在我的页面上加载一个非阻塞的 javascript。支持之前`async`，最佳实践似乎是通过简单的脚本动态加载它。

这是一个可以正常工作的示例，它被插入到第一个之前`<script>`：

```
var myscript = document.createElement('script');
myscript.async = true; // cannot hurt, right?
myscript.type = 'text/javascript';
myscript.src = 'myscript.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(myscript, node); 
```

我发现有几个版本将脚本插入到不同的地方，例如结尾`<head>`或`<body>`：

```
document.getElementsByTagName("head")[0].appendChild(myscript);  
document.getElementsByTagName("body")[0].appendChild(myscript); 
```

尽管顺序是异步的，但[在某些浏览器中似乎很重要。](https://stackoverflow.com/questions/2208676/javascript-asynchronously-loaded-scripts-are-those-evaluated-in-parallel-ra)在浏览器支持方面有什么不同吗？表现？阻塞风险？

我在顺序方面没有任何限制（它们不会相互影响），但我想确保如果我的脚本加载页面内容的时间过长，仍然可以正常加载。我认为最后一个解决方案效果最好，但我不确定差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:45:48.047

你会想要使用类似 $script.js 的东西：[http ://www.dustindiaz.com/scriptjs](http://www.dustindiaz.com/scriptjs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:46:22.697

在正文末尾附加脚本是这里最好的解决方案。它仍然允许在不阻塞脚本标签的情况下加载 DOM。此外，如果您将脚本放在文档的末尾，则不再需要将函数包装在 DOM 就绪事件中，因为在您的脚本开始执行时，浏览器已经加载了 DOM，您可以直接开始操作它或订阅一些事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:48:38.737

您的问题集中在负载部分，但实际上性能可能会受到不同阶段的影响：

*   加载
*   解析
*   执行

出于这个原因，在正文末尾添加脚本通常被认为不那么突兀。

为了进一步推动它，您可以等待 DOM 准备好运行您的加载脚本。在这种情况下，将脚本附加到头部或主体都无关紧要。

[编辑] 旁注：head 和 body 标签在 html 页面中不是强制性的。`document.getElementsByTagName('script')[0]`在这种边缘情况下是一种好方法，因为它保证您将获得一个元素（页面中至少有您的加载脚本）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:49:03.490

您可以尝试使用脚本等待页面完成，然后加载您要添加的脚本。最近已经这样做了，页面加载正常，然后出现一个新块。

```
var Widget = {}
    Widget.myDocReadyInterval = setInterval(function(){
        if (document.readyState === "complete")
    {
        clearInterval(Widget.myDocReadyInterval);
        Widget.startLoading();
    }
}, 20);
Widget.startLoading(){
// do what you need here...
} 
```

# python - 在 Python/Pygame 中获取键盘输入的好方法是什么？

> ID：14224518
> 
> 赞同：4
> 
> 时间：2013-01-08T21:40:42.077
> 
> 标签：python, input, pygame

我正在制作一个 pygame 程序，其中我有一个字符串，无论用户键入什么，它都会在 pygame 窗口中显示它。这是代码：

```
 if (event.type==pygame.KEYDOWN):
                    if (event.key==pygame.K_BACKSPACE):
                            if (len(sin)>0):
                                    sin=""
                    elif (event.key==pygame.K_RETURN):
                            if (len(sin)==11):
                                    #sin.replace("-","")
                                    running=2
                                    screen.fill(white)
                            else:
                                    body=True

                    else:
                            sin=sin+chr(event.key)
    text=font.render(sin,True,(black),white) 
```

一个问题是它不能识别特殊字符，如（“：”，“;”，移位字符等）。有没有更好的方法来编写这样的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:45:18.590

用于`event.unicode`获取[您要查找的内容](http://www.pygame.org/docs/ref/key.html)。

> ... pygame.KEYDOWN 事件有一个额外的属性 unicode 和 scancode。unicode 表示单个字符串，它是输入的完全翻译的字符。...

* * *

要回答您的评论，您只需检查`event.unicode`而不是`event.key`：

```
...
if (event.type==pygame.KEYDOWN):
    if (event.unicode==pygame.K_COLON): #to match a colon
        pass
    elif (event.unicode== (pygame.K_Z | pygame.KMOD_SHIFT)): #to explicitly match a capital Z instead of just a z
       pass
... 
```

# python - DOM的Python正确单元测试

> ID：14224519
> 
> 赞同：0
> 
> 时间：2013-01-08T21:40:46.100
> 
> 标签：python, unit-testing, dom

我正在编写一些东西来构建基于各种输入的 DOM，以及一些与之配套的单元测试。我开始编写看起来像这样的单元测试：

```
class TestXMLRenderer(unittest.TestCase)
    def setUp(self):
        self.handler = handlers.XMLRenderer()
        self.top     = self.handler.create_xml()
    def testProcedure(self):
        '''Test that the Procedure node is created'''
        node = self.top.childNodes[1]
        self.assertTrue(isinstance(node, DOM.Element))
        self.assertEqual(node.nodeName, 'proc:Procedure')
        self.assertEqual(len(node.attributes), 3)
        self.assertTrue('xmlns:xsi' in node._attrs.keys())
        self.assertTrue('xmlns:proc' in node._attrs.keys())
        self.assertTrue('xsi:schemaLocation' in node._attrs.keys())
        self.assertEqual(node.getAttribute('xmlns:xsi'), 'http://www.w3.org/2001/XMLSchema-instance')
        self.assertEqual(node.getAttribute('xmlns:proc'), 'http://www.omg.org/space/procspec')
        self.assertEqual(node.getAttribute('xsi:schemaLocation'), 'http://www.omg.org/space/procspec ../../tools/xtp/Procedure.xsd') 
```

但过了一会儿，这变得有点乏味。所以我想我可能会定义另一个或两个类来帮助测试：

```
import xml.dom.minidom as DOM

class XMLCompareFail(Exception):
    '''
    Exception raised when a node and the XMLNode do not match
    '''
    def __init__(self, message, code, Errors):
        self.message = message
        self.code    = code
        self.Errors  = Errors

    def __repr__(self): return "XMLCompareFail"

    def __str__(self):
        strs   = [self.message]
        names  = 'Names:  %s / %s' % (self.Errors[0].nodeName, self.Errors[1].name)
        if self.Errors[1].value:
            values = 'Values: %s / %s' % (self.Errors[0].nodeValue, self.Errors[1].value)
        else:
            values = 'Values: None'
        strs.append(names)
        strs.append(values)
        return repr(' -- '.join(strs))

class XMLNode(object):
    '''
    Object containing desired info for a particular node
    '''
    def __init__(self, name, value, ntype, numChildren):
        self.name  = name
        self.value = value
        self.ntype = ntype
        self.numChildren  = numChildren

class XMLTester(object):
    '''
    Comparison tests for DOM nodes
    '''
    def compareNode(self, node, info):
        if not isinstance(node, info.ntype):
            raise XMLCompareFail('Nodes are different instances', 0, [node, info])
        if not len(node.childNodes) == info.numChildren:
            raise XMLCompareFail('Nodes have different number of children', 1, [node, info])
        if not node.nodeName == info.name:
            raise XMLCompareFail('Nodes have differet names', 2, [node, info])
        if info.value:
            child = node.firstChild
            if not isinstance(child, DOM.Text):
                raise XMLCompareFail('Child node is not a text node', 3, [node, info])
            if not child.nodeValue == info.value:
                raise XMLCompareFail('Nodes have different text', 4, [node, info])

        return True

    def compareNodeList(self, node, nodeList):
        queue = set()
        queue.add(node)
        nodeList.reverse()
        while queue:
            curNode = queue.pop()
            curList = nodeList.pop()
            if not self.compareNode(curNode, curList):
                raise XMLCompareFail('Nodes do not match', [curNode, curList])
            if curNode.childNodes:
                for item in curNode.childNodes:
                    if isinstance(item, DOM.Text):
                        continue
                    else: queue.add(item)

        return True 
```

这简化了未来的测试，看起来更像：

```
def testFixedValueFour(self):
    '''Test fixed value with no top and a string'''
    node = self.handler.create_fixedValue('another string')
    FixedValue         = XMLNode('proc:FixedValue', None, DOM.Element, 1)
    StringValue        = XMLNode('proc:StringValue', 'another string', DOM.Element, 1)
    nodeList = [FixedValue, StringValue]
    self.assertTrue(self.compareNodeList(node, nodeList)) 
```

所以我的问题是，就单元测试而言，这种方法可以吗？我正在尝试自学单元测试，但我有点迷茫。

# mysql - 集成测试spring mysql应用程序的最佳方法？

> ID：14224522
> 
> 赞同：4
> 
> 时间：2013-01-08T21:41:09.830
> 
> 标签：mysql, spring, jenkins, integration-testing

我想为我的应用程序编写集成测试，该应用程序通过 jdbc 使用 MySQL db。（仅供参考：到目前为止，该应用程序有一个用户数据库和一个 wiki，所以没有什么复杂的）

我遇到了很多帖子，主要是在谈论 HSQLDB 或 H2，以及一些外来或已停产的帖子（如 mxj）

可悲的是，这些线程中的大多数都是几年前制作的，从那时起很多事情都发生了变化。我正在寻找具有最近经验的人（或者甚至更好地像我一样拥有类似的设置 - 这意味着春天和需要在本地和詹金斯上运行这些测试）！

我知道找到答案的最好方法是自己尝试一下，看看什么最有效，但也许有人最近有经验并愿意分享:)

* * *

使用的技术：

*   MySQL
*   春天
*   测试NG
*   詹金斯

* * *

如果您能与我分享您的经验和建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:10:19.563

所以我决定使用 h2，这给了我导入 MySQL 的一些问题。答案就在这里：[在 MODE=MySQL 中运行 h2 不支持 MySQL 转储](https://stackoverflow.com/questions/14509689/running-h2-in-mode-mysql-doesnt-support-mysql-dumps)

基本上，您必须删除表名周围的引号（尽管如此，它们似乎对字段工作正常）。您可以使用反引号 ( ` ) 或根本不使用任何刻度/引号。导致问题的另一件事是表定义末尾的“AUTO_INCREMENT = 1”。由于 h2 在启动后使用 1 作为默认值，因此无论如何都不需要此命令。

这是一个如何设置嵌入式数据库的示例：

```
public class InMemoryTest {
    @org.testng.annotations.Test // ofc this can be JUnit @Test as well
    public void test() throws Exception {
        Class.forName("org.h2.Driver");

        Connection conn = DriverManager.
                getConnection("jdbc:h2:mem:test;MODE=MySQL;IGNORECASE=TRUE;INIT=RUNSCRIPT FROM 'src/test/resources/test.sql'");

        Statement stat = conn.createStatement();
        stat.execute("INSERT INTO `usr_avatar` (\"usr_avatar_user_id\") VALUES (1)");
    }
} 
```

test.sql 将是：

```
DROP TABLE IF EXISTS usr_avatar;
CREATE TABLE IF NOT EXISTS usr_avatar (
  "usr_avatar_id" int(11) NOT NULL AUTO_INCREMENT,
  "usr_avatar_user_id" int(11) NOT NULL
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T18:04:59.883

尝试为此目的创建的 Maven 插件：[`jcabi-mysql-maven-plugin`](http://www.jcabi.com/jcabi-mysql-maven-plugin/index.html). 它在阶段启动本地 MySQL 服务器`pre-integration-test`并在`post-integration-test`.

# html - HTML5 保护 - 多态行为

> ID：14224523
> 
> 赞同：2
> 
> 时间：2013-01-08T21:41:11.410
> 
> 标签：html

我不是在寻找会自行改变的 javascript 代码。我正在寻找的是一个 HTML5 混淆器，它会吐出相同源代码的不同版本。总体思路是能够根据用户请求提供不同的代码版本。

我尝试过的每个解决方案都会输出相同的混淆 javascript。我能找到的最好的只是改变了变量和函数名，而不是代码结构。

# java - 如何覆盖 Spring 3.1 @PropertySource 以设置 IgnoreResourceNotFound 和 IgnoreUnresolvablePlaceholders

> ID：14224524
> 
> 赞同：12
> 
> 时间：2013-01-08T21:41:11.293
> 
> 标签：java, spring, spring-mvc, properties, configuration

让此类覆盖另一个 Config 类中已设置的 @PropertySource。

```
@Configuration
@PropertySource({ "classpath:${env.placeholder}/app.properties" })
public class PropertyOverrideConfig {

} 
```

但是，只要文件或占位符丢失，就会导致上下文加载失败。我需要为该注释加载属性设置以下标志，以便在找不到该属性时跳过。

```
 setIgnoreResourceNotFound(true);
        setIgnoreUnresolvablePlaceholders(true); 
```

*问题1：为@PropertySource 设置这些标志的适当方法是什么？*

**更新：** 尝试将@Bean 添加到同一个类而没有该注释引用[此](http://www.baeldung.com/2012/02/06/properties-with-spring/)页面，它也没有选择属性文件。我没有xml配置。

```
@Bean
public static PropertySourcesPlaceholderConfigurer properties() {
     final PropertySourcesPlaceholderConfigurer pspc = new PropertySourcesPlaceholderConfigurer();

     Resource[] resources = new ClassPathResource[ ] { 
                  new ClassPathResource( "classpath:${env.placeholder}/app.properties" ) };

     pspc.setLocations( resources );
     pspc.setIgnoreResourceNotFound(true);
     pspc.setIgnoreUnresolvablePlaceholders(true);
     return pspc;
} 
```

*问题2：我确定我错过了一些东西，但无法弄清楚它是什么，任何帮助都会很棒。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T17:50:37.440

我想我终于找到了问题1的答案：

**如何为通过添加的属性设置忽略标志`@PropertySource`？**

> 它还没有在 Spring 中出现，它被提议作为一个小改进。希望能够在未来的版本中很快看到添加到注释的附加属性。
> 
> **[SPR-8371](https://jira.springsource.org/browse/SPR-8371)**

仍然不确定完成上述场景的方法，也没有问题 2 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T09:52:27.180

如果您必须坚持使用 Spring 3，则不是真正的解决方案，而是一种解决方法：使用存在的虚拟默认值，即在您的情况下：

```
@PropertySource({ "classpath:${env.placeholder:dummy}/app.properties" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T09:37:51.883

尝试删除`classpath:`，使用时不需要`ClassPathResource`：

```
new ClassPathResource( "classpath:${env.placeholder}/app.properties" ) }; 
```

# r - 修改 ggplot2 中字符值的 y-axix

> ID：14224527
> 
> 赞同：0
> 
> 时间：2013-01-08T21:41:23.313
> 
> 标签：r, ggplot2

```
structure(list(Team = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L), .Label = "Union", class = "factor"), Date = structure(c(1L, 
1L, 1L, 2L, 2L, 2L, 4L, 3L, 3L, 4L, 3L, 3L, 5L, 3L, 3L, 6L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 6L, 3L, 3L, 3L, 3L, 3L, 3L, 6L, 6L, 6L, 
6L, 3L, 7L, 8L, 9L, 10L, 10L), .Label = c("2012-01-06", "2012-02-06", 
"2012-03-06", "2012-04-06", "2012-05-06", "2012-07-06", "2012-09-06", 
"2012-10-06", "2012-11-06", "2012-12-06"), class = "factor"), 
    STime = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L
    ), .Label = "07:03", class = "factor"), ETime = structure(c(6L, 
    7L, 8L, 5L, 5L, 1L, 2L, 3L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 11L, 
    10L, 9L, 8L, 10L, 7L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
    5L, 5L, 5L, 5L, 5L, 4L, 5L, 5L, 5L, 5L), .Label = c("01:13", 
    "03:13", "06:13", "09:13", "10:13", "11:13", "12:13", "13:13", 
    "15:13", "16:13", "18:13"), class = "factor")), .Names = c("Team", 
"Date", "STime", "ETime"), class = "data.frame", row.names = c(NA, 
-40L)) 
```

我正在这样做：

```
ggplot(df, aes(Date, ETime, group="Team")) + geom_point(size=0.3) + facet_wrap(~ Team) 
```

我希望 y 轴从 00:00 到 23:29 以 2 小时为增量。我尝试了 scale_y_continous，但它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:04:45.943

我建议将您的日期和时间列更改为 POSIXt 格式的数据。然后更改轴中断和标记变得更容易。目前，您的日期和时间被存储为因素。

```
library(ggplot2)

# Change relevant columns from 'factor' to 'POSIXt'.
df$ETime = strptime(as.character(df$ETime), "%H:%M")
df$Date = strptime(as.character(df$Date), "%Y-%m-%d")

plot_1 = ggplot(df, aes(x=Date, y=ETime)) +
         geom_point() +
         labs(title="Plot 1")

# Manually set datetime limits and breaks.
y_limits = as.POSIXct(c(strptime("00:00", "%H:%M"), strptime("23:29", "%H:%M")))
y_breaks = seq(from=strptime("00:00", "%H:%M"), 
                 to=strptime("23:29", "%H:%M"), by="2 hours")
y_labels = format(y_breaks, "%H:%M")

plot_2 = ggplot(df, aes(x=Date, y=ETime)) + 
         geom_point() + 
         scale_y_datetime(limits=y_limits, breaks=y_breaks, labels=y_labels) +
         labs(title="Plot 2")

library(gridExtra)

png("plots.png", width=8, height=4, units="in", res=120)
grid.arrange(plot_1, plot_2, nrow=1)
dev.off() 
```

![在此处输入图像描述](../Images/72227edf4db271b0f0767122a29922ec.png)

# selenium - Selenium - 如何在 WebDriverWait wait.until 运行时执行命令

> ID：14224529
> 
> 赞同：0
> 
> 时间：2013-01-08T21:41:38.383
> 
> 标签：selenium, webdriver, selenium-webdriver

是否可以在等待元素出现时执行命令？特别是我正在等待一个元素出现，但除非我刷新页面，否则它不会出现。这是我的代码

```
wait = new WebDriverWait(driver, 30);
element = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("xpath_here")));
state = element.getText(); 
```

除非我点击应用程序的刷新按钮，否则我正在等待的元素永远不会出现。如何在我设置的 30 秒超时期间刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:54:44.623

你可以这样做：

```
 System.out.println("before wait");
    WebElement el = (new WebDriverWait(driver, 30))
      .until(new ExpectedCondition<WebElement>(){
        //try the following cycle for 30 seconds
        @Override
        public WebElement apply(WebDriver driver) {
            //refresh the page
            driver.navigate().refresh();

            System.out.println("Refreshed");
            //look for element for 5 seconds
            WebElement sameElement = null;
            try{
                sameElement = (new WebDriverWait(driver, 5))
                      .until(new ExpectedCondition<WebElement>(){
                    @Override
                    public WebElement apply(WebDriver driver) {
                        System.out.println("Looking for the element");
                        return driver.findElement(By.id("theElementYouAreLookingFor"));
                    }});    
            } catch (TimeoutException e){
                // if NULL is returns the cycle starts again
                return sameElement;
            } 
            return sameElement;
    }});        
    System.out.println("Done"); 
```

它将尝试获取元素 30 秒，每 5 秒刷新一次页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:16:11.500

我会在该代码中添加更多行：基本上，如果 state.isEmpty() 然后使用 Webdriver“Action”类将鼠标移动到刷新按钮（您的应用程序需要在其中有一个刷新按钮才能工作）然后再次运行等待以验证它是否出现。

# wordpress - 如何使用 WP 核心功能添加新页面

> ID：14224531
> 
> 赞同：1
> 
> 时间：2013-01-08T21:41:45.853
> 
> 标签：wordpress, wordpress-theming

如何使用 wordpress 的核心功能添加页面。我也可以找到 Post 等功能，但找不到 Pages 的任何功能。任何可以帮助我的人谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:46:53.080

您使用相同的功能来添加帖子或页面，只需添加如下`post_type`参数：

```
$args = array( 'post_type'  => 'page',
               'post_content' => 'You content...',
               'post_parent' => $parent_id; // ID of the page this one should be a child of
... // etc.
...
               'post_title' => 'Title for your page');

wp_insert_post ($args); 
```

# ajax - 如何避免 jQuery 定期 HTTP 请求的不连续性？

> ID：14224532
> 
> 赞同：1
> 
> 时间：2013-01-08T21:41:47.317
> 
> 标签：ajax, http, jquery

我是 jQuery 新手，想用它每 3 秒从服务器检索一次数据。Web 服务器每 3 秒以 JSON 格式发送数据。JSON 数据包含一个数值数组字段 { "samples" : [10,15,-7,19,34,...] }。我编写了以下 jQuery ajax 请求，每 3 秒从服务器检索一次数据：

```
function getData() {
    $.ajax({
        url : 'http://example.com',
        type: 'GET',
        success : function(data) {
            myData = data.samples;
            setTimeout(getData, 3000);
        },
        dataType : 'json'
    });

    return myData;
} 
```

但是，由于时间抖动，从服务器发送的数据可能不会每 3 秒准确更新一次。那么我应该如何编写 jQuery ajax 请求以避免可能的数据不连续性呢？也就是说，我希望返回的 myData 包含来自每个 getData() 调用的所有新数据数组元素，并且不包含由于可能的时序抖动而导致的重复或丢失的数据样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:49:32.123

将数据在服务器上更新的最后一个时间戳与另一个 JSON 数组一起发送。然后，当需要使用您的 jQuery 调用再次请求数据时，请检查时间戳与您已有的时间戳。这将为您提供一种方法来了解它是否是相同的数据，或者它是否已被刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:51:23.360

我认为您可能需要传递更多信息。在您的 AJAX 中包含另一个名为“lastUpdate”的字段，并带有时间戳。您的 javascript 可以保存它获得的最后一个时间戳并将其提供给服务器。服务器仅在该时间戳之后响应样本（因此您不会错过任何样本），并且如果它仍然是最新的（因此您不会重复），则不会响应任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:07:03.453

回去也没啥意义`myData`。(a) 变量未在函数内声明，并且 (b) 数据从服务器异步到达。

就目前而言，`getData()`保证（充其量）返回*在前*一次迭代中获得的数据。

要使用新获得的数据，您需要`myData`在`success`函数内或`done()`回调中执行任何必要的操作，如下所示：

```
function getData() {
    $.ajax({
        url: 'http://example.com',
        type: 'GET',
        dataType : 'json'
    }).done(function(data) {
        var myData = data.samples;
        //Do whatever is necessary with myData here.
        //Call extenal function as necessary to do the job.
        setTimeout(getData, 3000);
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T22:20:48.567

以利用 ajax 的异步特性的方式编写代码。例如，

```
var interval;
function handleData(data) {
    // I handle the data returned from the ajax request.
    console.log(data);
}
function getData() {
    // I send the ajax request.
    $.ajax({
        url: 'http://example.com',
        success: handleData,
        error: function(){
            // on error, stop making requests to help with debugging.
            console.log(arguments);
            clearInterval(interval);
        }
    });
}
interval = setInterval(getData,3000); 
```

这将导致在大多数情况下，响应将按顺序排列。如果您摆脱了间隔，而是在上一次成功后 3 秒调用 get data，那么您可以在所有情况下都做到这一点。

```
function getData() {
    // I send the ajax request.
    $.ajax({
        url: 'http://example.com',
        success: handleData,
        error: function(){
            // on error, stop making requests to help with debugging.
            console.log(arguments);
        }
    });
}
function handleData(data) {
    // I handle the data returned from the ajax request.
    console.log(data);
    setTimeout(getData,3000);
}
getData(); 
```

旁注：“时序抖动”根本不是抖动，它只是一个逻辑错误。由于 Ajax 是异步的，因此数据总是落后一组。

# javascript - 在两个数字范围之间缩放

> ID：14224535
> 
> 赞同：20
> 
> 时间：2013-01-08T21:41:59.210
> 
> 标签：javascript, valueconverter

我记得在某些时候使用一个方程来做到这一点——你是如何在 Javascript 中做到这一点的？

插件两个数字范围：

```
rangeX = 1 (through) 10;
rangeY = 300.77 (through) 559.22; 
```

在 rangeY 范围内输入一个值：

```
inputY = 328.17; 
```

转换为 rangeX 刻度中的比例值：

```
outputX = 1.43; 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-08T22:03:05.323

```
function convertRange( value, r1, r2 ) { 
    return ( value - r1[ 0 ] ) * ( r2[ 1 ] - r2[ 0 ] ) / ( r1[ 1 ] - r1[ 0 ] ) + r2[ 0 ];
}

convertRange( 328.17, [ 300.77, 559.22 ], [ 1, 10 ] );

>>> 1.9541497388276272 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-08T21:46:43.947

使用百分比：

```
xMax = 10;
xMin = 1;

yMax = 559.22;
yMin = 300.77;

percent = (inputY - yMin) / (yMax - yMin);
outputX = percent * (xMax - xMin) + xMin; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-10T16:24:20.243

我将@Foggzie 的答案变成了 TypeScript 函数和 ES2016 函数。

打字稿：

```
const scale = (inputY: number, yRange: Array<number>, xRange: Array<number>): number => {
  const [xMin, xMax] = xRange;
  const [yMin, yMax] = yRange;

  const percent = (inputY - yMin) / (yMax - yMin);
  const outputX = percent * (xMax - xMin) + xMin;

  return outputX;
}; 
```

ES2016：

```
const scale = (inputY, yRange, xRange) => {
  const [xMin, xMax] = xRange;
  const [yMin, yMax] = yRange;

  const percent = (inputY - yMin) / (yMax - yMin);
  const outputX = percent * (xMax - xMin) + xMin;

  return outputX;
}; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-01-25T19:56:34.307

这是线性插值，与@oleq 的答案相同，但明确使用 min 和 max 变量而不是范围数组

```
function getScaledValue(value, sourceRangeMin, sourceRangeMax, targetRangeMin, targetRangeMax) {
    var targetRange = targetRangeMax - targetRangeMin;
    var sourceRange = sourceRangeMax - sourceRangeMin;
    return (value - sourceRangeMin) * targetRange / sourceRange + targetRangeMin;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T21:56:25.437

不能保证数学，但我认为是这样的：

```
var xLow = 1;
var xHigh = 10:
var yLow = 300.77;
var yHigh = 559.22;

var inputY = 328.17;
var ouputX = xLow;

var scaleYOverX = (yHigh - yLow)/(xHigh - xLow);

if(inputY >= yLow && inputY <= yHigh) {
  outputX = (inputY - yLow)/scaleYOverX + xLow;
  alert(outputX);
} else {
  alert("Invalid input for Y scale");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-19T18:33:59.860

**Swift 3** With Bool 是否扩展范围

```
func translate(input : Float, inputMin: Float, inputMax: Float, outputMin: Float, outputMax: Float, extendRange: Bool? = false, log: Bool? = false) -> Float {

    //The actual translation function
    func translationResult(_ inputMinA: Float, _ inputMaxA: Float) -> Float {
        let myResult = outputMin + (outputMax - outputMin) * (input - inputMinA) / (inputMaxA - inputMinA)
        return myResult
    }

    // extendRange true means it'll return a value outside the range of inputMin and inputMax but still follow the ratio
    if extendRange! {
        return result = translationResult(inputMin, inputMax)

        if log! == true && input > inputMax || input < inputMin{
            print("outside range!")
        }
    } else {
        //Doesn't let value go outside range
        let inputMinA = min(inputMin, input)
        let inputMaxA = max(inputMax, input)

        return result = translationResult(inputMinA, inputMaxA)
    }
    }

    translate(input: 50, inputMin: 100, inputMax: 1000.0, outputMin: 1, outputMax: 10, extendRange: false) => 1
    translate(input: 50, inputMin: 100, inputMax: 1000.0, outputMin: 1, outputMax: 10, extendRange: true) => 0.5 
```

# java - DBCP 连接池连接产生

> ID：14224536
> 
> 赞同：0
> 
> 时间：2013-01-08T21:42:02.767
> 
> 标签：java, multithreading, apache-commons-dbcp

请帮助我了解当多个线程将尝试使用相同的连接时，DBCP 会起作用吗？

将为每个线程生成一个新连接？在这种情况下，使用连接池将没有任何优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:44:53.837

JDBC`Connection`根据定义是单线程的。当一个线程从`DataSource`（DBCP 或任何其他实现）获得连接时，在该连接被释放（关闭，实际上将连接放回池中）之前，没有其他线程可以接触该连接。

DBCP 不会阻止从多个线程使用相同的连接。但是如果多个线程同时请求`DataSource`新的连接，它会根据需要创建尽可能多的连接。如果并发线程数超过允许产生的最大配置连接数，`getConnection()`将阻塞或失败。

# php - 将 mysql_query 添加到 onclick 函数中

> ID：14224540
> 
> 赞同：0
> 
> 时间：2013-01-08T21:42:23.550
> 
> 标签：php, javascript, html, mysql

我想让它只有在前一个框中的信息正确时才会出现新的输入框，通过使用 mysql_query 检查它，我可以调整这段代码

```
function show(id){
  if(document.getElementById(id+"-link").style.display=="none") {
     document.getElementById(id+"-link").style.display="block";
     document.getElementById(id+"-input").style.display="block";
  }
}

<tr> 
  <td><input type="text" id="a1" name="em_1"></td>
  <td><a href="#null" onclick="show('b1')">and</a></td>
</tr><tr>
  <td><input type="text" id="b1-input" name="em_2" style="display:none"></td>
  <td><a href="#null" style="display:none" id="b1-link"</a></td>
</tr><tr> 
```

所以在这里的某个地方我需要添加：

```
$userCheck=mysql_query(SELECT email FROM users WHERE name = "em_1")
$row=mysql_num_rows($usercheck)
if($row!==0){"show('b1')";} 
```

或有影响的东西，而不刷新页面。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:48:15.337

是的，这是可能的，但您需要知道如何使用[**`ajax`**](http://www.w3schools.com/php/php_ajax_database.asp)或[**`jquery-ajax`**](http://api.jquery.com/jQuery.ajax/)

这将帮助您将数据从**php**获取到**javascript**，然后附加到**html**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:48:58.600

阿贾克斯：

```
function XMLDoc()
{
if (window.XMLHttpRequest)
  {
    xmlhttp=new XMLHttpRequest();
  }
else
  {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            // xmlhttp.responseText -> return value from php file , so from here you can do your action
        }
    };
xmlhttp.open("POST","yourfile.php?email={value}",true); // from here send value to check in server side
xmlhttp.send(); 
} 
```

php：

```
if (isset($_POST['email'])){ // which is variable from `yourfile.php?email`
    $userCheck=mysql_query("SELECT email FROM users WHERE name = 'em_1'");
    $row=mysql_num_rows($usercheck);
    if ($row==0){
        echo "no";
    } else {
        echo "yes";
    }
} 
```

传入`yourfile`服务器端脚本的 URL，它检查电子邮件是否存在并返回例如是或否 => 然后在 Ajax 的帮助下，它将在当前文档中返回

**注意**：不要使用`mysql`extension ，使用`mysqli`or`PDO`代替

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:04:09.597

您需要 AJAX 来完成这项工作而无需刷新。在 W3Schools 上查看此页面：http: [//www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

这几乎正​​是您想要的，但不是返回一个文本块，而是让这些`b1`片段活跃起来。

# javascript - HTML5 Canvas 2D 游戏相机

> ID：14224544
> 
> 赞同：0
> 
> 时间：2013-01-08T21:42:48.287
> 
> 标签：javascript, html, canvas, camera

我正在开发一个 HTML5 画布游戏 (2D)。画布的大小为 2000x2000 像素。我的屏幕分辨率为 1920x1080。我想在JavaScript中制作一个相机对象来模仿跟随玩家的相机（应该是视口的中心）

在我之前的一款游戏中，我在 C# (XNA) 中使用了它

```
center = new Vector2(player.position.X + (player.rectangle.Width / 2) - (view.Width / 2), 50);
transform = Matrix.CreateScale(new Vector3(1, 1, 0)) * Matrix.CreateTranslation(new Vector3(-center.X, -center.Y, 0)); 
```

任何人都可以帮助我使用 HTML5 Canvas 将其“翻译”成 JavaScript 吗？我真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:09:49.687

我为之前制作的游戏所做的就是制作一个视图对象。这个视图对象有一个 x 和 y 变量，并且会跟随玩家~~（你大概可以弄清楚如何编写代码，只需根据视图的 x 和 y 以及整个房间）~~

编辑：为了澄清，根据玩家的 x 和 y 值更改视图的 x 和 y 值。不要将视图的 X 和 Y 设置为玩家的 X 和 Y，因为这会导致画布在 0,0 处绘制玩家。而是检查以确保玩家在视口的边界内，如果不在，则相应地移动视口。

然后在画布上绘制时，指定绘制游戏中的所有对象：

```
ctx.drawImg(img, x - view.x, y - view.y); 
```

这将绘制与相机视图相关的所有内容。我正在尝试开发一个 JavaScript 游戏引擎，我遇到了同样的问题。我希望这有帮助。如果您需要更多说明，请随时询问。

# android - adb shell 输入 unicode 字符

> ID：14224549
> 
> 赞同：11
> 
> 时间：2013-01-08T21:43:11.750
> 
> 标签：android, text, unicode, adb

[了解ADB Shell 输入事件](https://stackoverflow.com/questions/7789826/adb-shell-input-events)中描述的基本键映射后，我可以很好地模拟文本输入和特殊键。但是Unicode字符呢？例如，我想使用德国 QWERTZ 键盘布局中的变音符号。

这让我：

```
$ adb shell input text ö
Killed 
```

所以它似乎崩溃了

```
adb shell input text \xFC 
```

在输入上打印 xFC。我已经尝试过事件，`getevent`但我没有找到直接映射，我还查看了键映射文件`/system/usr/keylayout/Qwerty.kl`

[我相信唯一的可能性是通过剪贴板，但正如在使用 adb shell 将文本粘贴到 Android 模拟器剪贴板](https://stackoverflow.com/questions/7283446/pasting-text-into-android-emulator-clipboard-using-adb-shell)问题中所指出的那样， 似乎不知道如何将它用于 Android Ice Cream Sandwich 或更高版本。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-10T11:03:19.587

我编写了一个接受广播意图的虚拟键盘，因此您可以通过 adb 将 unicode 字符发送到 editText 视图。

例如 adb shell am broadcast -a ADB_INPUT_TEXT --es msg "你好吗！你好！"

这是github项目： [https ://github.com/senzhk/ADBKeyBoard](https://github.com/senzhk/ADBKeyBoard)

希望这个小项目会有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-05T22:07:49.323

其实 ADBKeyBoard 很不错！谢谢埃里克唐！

一些用于舒适使用的有用扩展：

从 adb 切换到 ADBKeyBoard：

```
 adb shell ime set com.android.adbkeyboard/.AdbIME 
```

检查您可用的 le 虚拟键盘：

```
ime list -a 
```

如果您的 shell 不接受“！”，请使用**简单的引号**字符 - 不要像上面的示例那样加倍 - （说明符号）

```
adb shell am broadcast -a ADB_INPUT_TEXT --es msg 'Accented characters here' 
```

切换回原来的虚拟键盘：（在我的例子中是 swype ......）

```
adb shell ime set com.nuance.swype.dtc/com.nuance.swype.input.IME 
```

使用 adb over wifi 来简化你的生活...... :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T07:37:52.657

`input`不起作用，因为它只能通过虚拟键盘发送单键事件（如果您不知道我的意思，请查看源代码）。

我认为剩下的唯一方法是使用**Instrumentation**。我想你可以为你的**活动**创建一个测试，然后做这样的事情：

```
 final Instrumentation instrumentation = getInstrumentation();
                final long downTime = SystemClock.uptimeMillis();
                final long eventTime = SystemClock.uptimeMillis();

                final KeyEvent altDown = new KeyEvent(downTime, eventTime, KeyEvent.ACTION_DOWN,
                        KeyEvent.KEYCODE_GRAVE, 1, KeyEvent.META_ALT_LEFT_ON);
                final KeyEvent altUp = new KeyEvent(downTime, eventTime, KeyEvent.ACTION_UP,
                        KeyEvent.KEYCODE_GRAVE, 1, KeyEvent.META_ALT_LEFT_ON);

                instrumentation.sendKeySync(altDown);
                instrumentation.sendCharacterSync(KeyEvent.KEYCODE_A);
                instrumentation.sendKeySync(altUp);
                instrumentation.sendKeySync(altDown);
                instrumentation.sendCharacterSync(KeyEvent.KEYCODE_E);
                instrumentation.sendKeySync(altUp);
                instrumentation.sendKeySync(altDown);
                instrumentation.sendCharacterSync(KeyEvent.KEYCODE_I);
                instrumentation.sendKeySync(altUp);
                instrumentation.sendKeySync(altDown);
                instrumentation.sendCharacterSync(KeyEvent.KEYCODE_O);
                instrumentation.sendKeySync(altUp);
                instrumentation.sendKeySync(altDown);
                instrumentation.sendCharacterSync(KeyEvent.KEYCODE_U);
                instrumentation.sendKeySync(altUp); 
```

这将发送修改后的键：**àèìòù**

### 2022年更新

[https://stackoverflow.com/a/71367206/236465](https://stackoverflow.com/a/71367206/236465)展示了另一个使用[AndroidViewClient/culebra](https://github.com/dtmilano/AndroidViewClient)和[CulebraTester2-public](https://github.com/dtmilano/CulebraTester2-public)后端的解决方案。

# javascript - Camera 和 PictureSourceType 未定义 Phonegap

> ID：14224550
> 
> 赞同：0
> 
> 时间：2013-01-08T21:43:14.783
> 
> 标签：javascript, cordova, camera

我正在尝试通过按钮使相机工作，但在下面的注释行中出现错误。我正在使用 Phonegap/Cordova (v2.1) 提供的文档。任何帮助表示赞赏。

```
 var pictureSource = navigator.Camera.PictureSourceType.CAMERA; // Cannot read PictureSourceType of undef
    var destinationType = navigator.camera.DestinationType.FILE_URI;

    function onPhotoURISuccess(imageURI) {
        var placeImage = document.getElementById('placeImage');
        placeImage.src = imageURI;
        placeImage.style.display = 'block';
        console.log(imageURI);
    }

    function getPhoto() {
        navigator.Camera.getPicture(onPhotoURISuccess, onFail, { //I am getting an error for this line saying camera is not defined?
             quality: 50, 
             destinationType: camera.destinationType.FILE_URI,
             sourceType: pictureSource
        });
    }

    function onFail(message) {
        alert('Failed because: ' + message);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:57:02.737

确保您首先获得了“设备就绪”事件。对于您对 getPicture() 的调用，请执行以下操作：

```
navigator.Camera.getPicture(onPhotoURISuccess, onFail, {
         quality: 50, 
         destinationType: navigator.camera.DestinationType.FILE_URI,
         sourceType: pictureSource
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:12:13.557

我也在做这件事。如果您在谈论Android，则需要在真实设备上进行测试。无论您在 Eclipse 中在浏览器或模拟器上进行测试，都会出现 Camera not defined 错误。我猜是因为硬件问题。

# android - Android 编程 - 如何在多个列表视图中从 sqlite 数据库中检索特定于键值的数据

> ID：14224551
> 
> 赞同：0
> 
> 时间：2013-01-08T21:43:17.563
> 
> 标签：android, android-listview, android-viewpager, android-sqlite

我正在开发一个应用程序并创建了一个 sqlite 数据库、一个自定义适配器以帮助在列表视图中显示它、一个获取输入以填充数据库的活动以及一个带有 viewpager 的活动以在列表视图中滑动。我想要做的是有七页，一周中的每一天一页，并在相应的日子里显示整个数据库。数据库中的字段是课程、日期、开始时间、结束时间和位置。目前我拥有的是一个将所有数据显示到一个页面的应用程序，我无法弄清楚如何根据“日”字段在更多页面之间显示数据。任何建议或教程链接将不胜感激！谢谢。

这是一些代码：

```
/*main class with viewpager there is an action bar with an action item to
the input activity */

import java.util.List;
import java.util.Vector;

import android.os.Bundle;
import android.app.Activity;
import android.app.Fragment;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.CursorAdapter;
import android.widget.ListView;

public class ScheduleActivity extends Activity {

private Context mContext;

DBSchedule db = new DBSchedule(this);
private ScheduleAdapter scheduleAdapter;
private static final int ENTER_DATA_REQUEST_CODE = 1;
Cursor c;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mContext = this;
        setContentView(R.layout.activity_schedule);

        ListView listview1 = new ListView(mContext);
        ListView listview2 = new ListView(mContext);
        ListView listview3 = new ListView(mContext);

        Vector<View> pages = new Vector<View>();

        pages.add(listview1);
        pages.add(listview2);
        pages.add(listview3);

        ViewPager vp = (ViewPager) findViewById(R.id.viewpager);
        PageAdapter adapter = new PageAdapter(mContext,pages);
        vp.setAdapter(adapter);

        db.open();

        scheduleAdapter = new ScheduleAdapter(ScheduleActivity.this, db.getAllEntries(),CursorAdapter.NO_SELECTION );
        listview1.setAdapter(scheduleAdapter);      

        db.close();

        listview2.setAdapter(new ArrayAdapter<String>(mContext, android.R.layout.simple_list_item_1,new String[]{"A2","B2","C2","D2"}));
        listview3.setAdapter(new ArrayAdapter<String>(mContext, android.R.layout.simple_list_item_1,new String[]{"A3","B3","C3","D3"}));

    } 
```

自定义页面适配器

```
 import java.util.List;
    import java.util.Vector;

    import android.app.Fragment;
    import android.content.Context;
    import android.support.v4.app.FragmentPagerAdapter;
    import android.support.v4.view.PagerAdapter;
    import android.view.View;
    import android.view.ViewGroup;

    public class PageAdapter extends PagerAdapter {

 private Context mContext;
 private Vector<View> pages;

 public PageAdapter(Context context, Vector<View> pages) {
  this.mContext=context;
  this.pages=pages;
 }

 @Override
 public Object instantiateItem(ViewGroup container, int position) {
  View page = pages.get(position);
  container.addView(page);
  return page;
 }

 @Override
 public int getCount() {
  return pages.size();
 }

 @Override
 public boolean isViewFromObject(View view, Object object) {
  return view.equals(object);
 }

 @Override
 public void destroyItem(ViewGroup container, int position, Object object) {
  container.removeView((View) object);
 } 
```

}

# android - Android：如何解析html页面？

> ID：14224555
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:43:50.360
> 
> 标签：android, json, android-webview, yql

> **可能重复：**
> [在 Android 中解析 HTML](http://facebook.stackoverflow.com/questions/2188049/parse-html-in-android)

您将如何解析页面中的此类数据？

现在有人告诉我使用Json，但是如果那个页面不支持json怎么办？其他人告诉我使用 Yahoo yql 控制台将页面转换为 json 格式，但我不知道它是如何工作的，我找不到它的 tuts。其他一些人建议使用 android 正则表达式，而另一些人则不推荐它。

有人可以告诉我如何使用您的方法解析以下内容。

```
 <div id="footer-sites">

                    <span style="color:#FE7A15;font-size:140%">&#9632;</span>&nbsp;<a href="http://stackoverflow.com">stackoverflow.com</a>&nbsp; 
                    <span style="color:#FE7A15;font-size:140%">&#9632;</span>&nbsp;<a href="http://stackapps.com">api/apps</a>&nbsp; 
                    <span style="color:#FE7A15;font-size:140%">&#9632;</span>&nbsp;<a href="http://careers.stackoverflow.com">careers 2.0</a>&nbsp; 
                    <span style="color:#E8272C;font-size:140%">&#9632;</span>&nbsp;<a href="http://serverfault.com">serverfault.com</a>&nbsp; 
                    <span style="color:#00AFEF;font-size:140%">&#9632;</span>&nbsp;<a href="http://superuser.com">superuser.com</a>&nbsp; 

            </div> 
```

为了练习我想提取href链接和标题，所以结果应该是这样的。

标题：stackoverflow.com

链接：[http ://stackoverflow.com](http://stackoverflow.com)

ETC ...

我没有为你们写任何代码在这里发布，因为我还在研究。这就是为什么我问是否有人可以告诉我这是如何工作的，所以我可以理解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:48:35.997

你应该试试[jericho](http://jericho.htmlparser.net/docs/index.html)解析器。另请参阅[此链接](https://stackoverflow.com/questions/2167611/whats-a-suitable-html-parser-for-android/2169719#2169719)

# git - 如何忽略 3 路合并中的评论？

> ID：14224560
> 
> 赞同：0
> 
> 时间：2013-01-08T21:44:02.200
> 
> 标签：git

所以我有以下回购： n1 -> n2 -> n3 -> master 和 n2 -> n4

我想使用 git 将 n4 合并回 master，所以 AFIAK：

BASE = n2，LOCAL = n3，REMOTE = n4，MERGED = master

我正在使用 p4merge 来可视化合并，但现在问题....

n2 和 n4 已经注释掉了 master 中慢慢被取消注释的代码部分......但是视觉合并完全搞砸了......似乎任何注释行都可以匹配任何其他注释行......导致各种注释函数与其他代码中间匹配的不匹配。例如

当地的：

```
def foo
  impl foo
end

def bar
  impl bar
end 
```

基地/远程：

```
# def foo
#   impl foo
# end 
#
# def bar
# end 
```

合并：

```
def foo
  impl foo
  # def bar
  # end
end 
```

不用说，我不希望这样合并代码。

我已经阅读了 git 中的自定义合并驱动程序，但我不确定如何设置它们......我的想法是，如果 diff 工具可以以某种方式暂时忽略注释字符（同时 diff ) 然后正确排列。我试图在 p4merge 中找到一个设置来做到这一点，但没有运气。kdiff3 中可能也有一种方法，但我想我会先尝试找出一种方法来使用合并驱动程序。

任何有关设置或解决此问题的其他方法的建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:55:11.857

可能有帮助的一件事是合并策略选项`patience`。它在不混淆代码方面做得更好，并且报告的合并冲突越来越少。它与“git merge --strategy-option=patience”一起使用。

`git diff`在这里讨论上下文中的选项的另一个问题是， ['git diff --patience' 是为了什么？](https://stackoverflow.com/questions/4045017/what-is-git-diff-patience-for).

当然，该选项在[合并手册页 git merge 手册页](http://git-scm.com/docs/git-merge)中进行了描述。

# python - 烧瓶 request.json 顺序

> ID：14224564
> 
> 赞同：0
> 
> 时间：2013-01-08T21:44:29.447
> 
> 标签：python, json, python-2.7, flask

我将 JSON 数据提交到我的 api（使用 Flask 构建）端点，我需要将该数据导出到 excel，但问题是一旦我的 api 接收到数据并使用*request.json*加载它，数据的“正文”部分被打乱了 - 与我收到它的顺序不同，这完全破坏了我的表格标题，更不用说所需的输出 excel 格式了。

包括以下我收到到我的 api 的原始 JSON 数据

```
{
"data": {
    "header": [
        "date,group.groupname,user.NameSurname,forwarding_number,reciver_number,CallerNameSurname,alert,connection,call_summ"
    ],
    "body": [
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Romāns Tiščenko",
            "forwarding_number": "66055002",
            "reciver_number": "66055002",
            "CallerNameSurname": false,
            "alert": "00:00:14",
            "connection": "00:00:53",
            "call_summ": "00:01:07"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Romāns Tiščenko",
            "forwarding_number": "66055002",
            "reciver_number": "66055002",
            "CallerNameSurname": false,
            "alert": "00:00:27",
            "connection": "00:00:25",
            "call_summ": "00:00:52"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Romāns Tiščenko",
            "forwarding_number": "66055002",
            "reciver_number": "66055002",
            "CallerNameSurname": false,
            "alert": "00:00:16",
            "connection": "00:01:00",
            "call_summ": "00:01:16"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Arvīds Boļesko",
            "forwarding_number": "66055001",
            "reciver_number": "66055001",
            "CallerNameSurname": false,
            "alert": "00:00:22",
            "connection": "00:00:52",
            "call_summ": "00:01:14"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Romāns Tiščenko",
            "forwarding_number": "66055002",
            "reciver_number": "66055002",
            "CallerNameSurname": false,
            "alert": "00:00:18",
            "connection": "00:00:09",
            "call_summ": "00:00:27"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Romāns Tiščenko",
            "forwarding_number": "66055002",
            "reciver_number": "66055002",
            "CallerNameSurname": false,
            "alert": "00:00:09",
            "connection": "00:01:59",
            "call_summ": "00:02:08"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Romāns Tiščenko",
            "forwarding_number": "66055002",
            "reciver_number": "66055002",
            "CallerNameSurname": false,
            "alert": "00:00:08",
            "connection": "00:02:14",
            "call_summ": "00:02:22"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Roberts Neijs",
            "forwarding_number": "66055003",
            "reciver_number": "66055003",
            "CallerNameSurname": false,
            "alert": "00:00:04",
            "connection": "00:00:01",
            "call_summ": "00:00:05"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Arvīds Boļesko",
            "forwarding_number": "66055001",
            "reciver_number": "66055001",
            "CallerNameSurname": false,
            "alert": "00:00:57",
            "connection": "00:01:26",
            "call_summ": "00:02:23"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Roberts Neijs",
            "forwarding_number": "66055003",
            "reciver_number": "66055003",
            "CallerNameSurname": false,
            "alert": "00:00:05",
            "connection": "00:02:23",
            "call_summ": "00:02:28"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Roberts Neijs",
            "forwarding_number": "66055003",
            "reciver_number": "66055003",
            "CallerNameSurname": false,
            "alert": "00:00:06",
            "connection": "00:00:44",
            "call_summ": "00:00:50"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Romāns Tiščenko",
            "forwarding_number": "66055002",
            "reciver_number": "66055002",
            "CallerNameSurname": false,
            "alert": "00:00:08",
            "connection": "00:02:43",
            "call_summ": "00:02:51"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Roberts Neijs",
            "forwarding_number": "66055003",
            "reciver_number": "66055003",
            "CallerNameSurname": false,
            "alert": "00:00:05",
            "connection": "00:01:13",
            "call_summ": "00:01:18"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Roberts Neijs",
            "forwarding_number": "66055003",
            "reciver_number": "66055003",
            "CallerNameSurname": false,
            "alert": "00:00:09",
            "connection": "00:00:01",
            "call_summ": "00:00:10"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "administration",
            "user.NameSurname": "Ieva Sproģe",
            "forwarding_number": "67783165",
            "reciver_number": "67783165",
            "CallerNameSurname": false,
            "alert": "00:00:06",
            "connection": "00:01:30",
            "call_summ": "00:01:36"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Roberts Neijs",
            "forwarding_number": "66055003",
            "reciver_number": "66055003",
            "CallerNameSurname": false,
            "alert": "00:00:06",
            "connection": "00:00:50",
            "call_summ": "00:00:56"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "administration",
            "user.NameSurname": "Ieva Sproģe",
            "forwarding_number": "67783165",
            "reciver_number": "67783165",
            "CallerNameSurname": false,
            "alert": "00:00:04",
            "connection": "00:02:00",
            "call_summ": "00:02:04"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "customerService",
            "user.NameSurname": "Roberts Neijs",
            "forwarding_number": "66055003",
            "reciver_number": "66055003",
            "CallerNameSurname": false,
            "alert": "00:00:07",
            "connection": "00:00:26",
            "call_summ": "00:00:33"
        },
        {
            "date": "2013-01-08",
            "group.groupname": "administration",
            "user.NameSurname": "Ieva Sproģe",
            "forwarding_number": "67783165",
            "reciver_number": "67783165",
            "CallerNameSurname": false,
            "alert": "00:00:04",
            "connection": "00:00:13",
            "call_summ": "00:00:17"
        }
    ],
    "footer": [
        ",,,,,,7,8,9"
    ],
    "filename": "outGoingAnswered.xls"
}
} 
```

正如我所说，一旦使用*request.json*将其读入 api ，“body”的每个“行”中的数据就会被打乱 - 顺序被破坏。它应该如标题中所写。

我尝试使用不同的 json 库加载它，但结果是相同的，加载的数据与给出的顺序不同。我完全不知道为什么会发生这种情况，这让我的生活变得非常困难，因为我对 Python 还比较陌生。

我应该提到，我无法将键与标题列匹配，因为标题的键可能比“正文”“行”中的键少。

作为示例输出，我可以提供稍微不同的已发布 JSON 数据的“加扰版本”：

```
{
"data": {
    "body": [
        {
            "group.groupname": "customerService",
            "connection": "00:01:28",
            "call_summ": "00:01:42",
            "CallerNameSurname": "false",
            "forwarding_number": "66055002",
            "user.NameSurname": "Arnolds Apels",
            "date": "2012-12-13",
            "reciver_number": "66055002",
            "alert": "00:00:14"
        },
        {
            "group.groupname": "customerService",
            "connection": "00:01:33",
            "call_summ": "00:01:45",
            "CallerNameSurname": "false",
            "forwarding_number": "66055002",
            "user.NameSurname": "Arnolds Apels",
            "date": "2012-12-13",
            "reciver_number": "66055002",
            "alert": "00:00:12"
        },
        {
            "group.groupname": "administration",
            "connection": "00:00:30",
            "call_summ": "00:00:33",
            "CallerNameSurname": "false",
            "forwarding_number": "67783165",
            "user.NameSurname": "Ieva Sproģe",
            "date": "2012-12-13",
            "reciver_number": "67783165",
            "alert": "00:00:03"
        }
    ],
    "header": [
        "date,group.groupname,user.NameSurname,forwarding_number,reciver_number,CallerNameSurname,alert,connection,call_summ"
    ],
    "footer": [
        "false,false,user.NameSurname,forwarding_number,reciver_number,CallerNameSurname,alert,connection,call_summ"
    ],
    "filename": [
        "asdasda.xls"
    ]
}
} 
```

为了更好地衡量添加 excel 导出代码：

```
r = request.json
data = r['data']
if data:
    # Initialize excel export
    excel = Workbook()
    sheet = excel.add_sheet('Report')

    ## Excel headers

    # Setup font styling
    font = Font()
    font.name = 'Arial'
    font.bold = True

    # Setup cell border styling
    borders = Borders()
    borders.bottom = 1
    borders.right = 1

    # Setup formating style
    style = XFStyle()
    style.font = font
    style.borders = borders

    # Write headers
    header = data['header'][0]
    headers = header.split(',')
    h = 0
    for col in headers:
        if col == 'false':
            col = ''
        sheet.write(0, h, col, style)
        h += 1

    # Write body
    rows = data['body']
    i = 1
    for row in rows:
        x = sheet.row(i)
        y = 0
        for key, value in row.iteritems():
            x.write(y, value)
            y += 1
        i += 1

    # Write footer
    footer = data['footer'][0]
    footers = footer.split(',')
    f = 0
    for col in footers:
        if col == 'false':
            col = ''
        sheet.write(i, f, col)
        f += 1

    # Setup column widths
    if h > f:
        cols = h
    else:
        cols = f
    a = 0
    while a < cols:
        sheet.col(a).width = 5000
        a += 1

    # Get report filename
    filename = data['filename'][0]

    # Setup report path
    path = "/path/to/exports/" + filename

    # Save the report
    excel.save(path) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:48:09.003

Python 字典是*无序*的，JSON 对象也是如此。你看到的行为是正常的。

如果您需要保留顺序，请不要使用 a `dict()`but a list up tuples 代替：

```
 [
       ["date", "2013-01-08"],
       ["group.groupname", "customerService"],
       ["user.NameSurname", "Romāns Tiščenko"],
       ["forwarding_number", "66055002"],
       ["reciver_number", "66055002"],
       ["CallerNameSurname", false],
       ["alert", "00:00:14"],
       ["connection", "00:00:53"],
       ["call_summ", "00:01:07"]
   ],
   # ... etc. 
```

*或者*您也可以使用`data['header'][0]`字符串按顺序读取正文`dict()`值，因为这已经为您订购了：

```
rows = data['body']
i = 1
for row in rows:
    x = sheet.row(i)
    y = 0
    for col in headers:
        x.write(y, row.get(col, ''))
        y += 1
    i += 1 
```

# java - 在时间戳上使用 Hibernate 的 Restrictions.ilike()

> ID：14224565
> 
> 赞同：0
> 
> 时间：2013-01-08T21:44:34.213
> 
> 标签：java, sql, spring, hibernate, jqgrid

我一直在考虑它，我开始怀疑这是否可能。

**用户视角**：有一个数据表，其中一列包含一个日期。用户可以输入搜索词，例如`dec`并获取 12 月期间发生的所有行。

**后端**：一个 jqGrid 用于显示表格。它将输入的搜索词发送到服务器。服务器使用代码

```
Criteria cr = session.createCriteria( DetailedLogEntry.class );
Disjunction disjunction = Restrictions.disjunction();
MatchMode matchMode = MatchMode.ANYWHERE;
disjunction.add( Restrictions.ilike( searchKey.getField(), searchKey.getData(), matchMode ) );
cr.add( disjunction ); 
```

应用搜索词，其中`DetailedLogEntry`包含一个`Date`变量来表示数据库的`TIMESTAMP`字段。

因为`searchKey.getData()`返回一个字符串，所以将它与日期对象进行比较会产生一个空集。

*所以我想问题是*......是否有可能，最好是通过 Hibernate，对一个`Date`对象应用一个限制，就好像它是一个字符串一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:55:26.090

那是不可能的。您需要使用`Restrictions.between()`并给它一个上限和下限日期值。您可以使用`SimpleDateFormat`将您的`String`值转换为`Date`值，然后执行搜索？

如果用户搜索 12 月，您会希望显示每年 12 月的所有日志条目吗？他们可以输入 :"1, Dec" 并期望看到每年 12 月 1 日的所有日志吗？如果它是您要查找的日期的字符串匹配，则将所有数据加载到您的 jqGrid 中并使用 javascript 根据字符串格式的日期值过滤表可能会更容易。

# android - 如何通过蓝牙自定义设备控制自定义 Android 应用

> ID：14224571
> 
> 赞同：1
> 
> 时间：2013-01-08T21:44:47.033
> 
> 标签：android, bluetooth

我正在构建一个蓝牙设备，并希望它与 Android 设备（如手机或平板电脑（例如 Nexus 7）配对后，它能够与 Android 设备上的自定义应用程序进行交互）透明的方式，无需任何事先设置。

例如，我正在寻找的行为类似于免提耳机的行为，一旦您完成初始配对，您可以按下耳机上的按钮，发出语音命令，然后它将命令传输到手机和电话做它的事。我已经构建了一个蓝牙设备，当按下按钮时，它应该能够立即向我的 Android 设备上的自定义应用程序发送命令，并且自定义应用程序应该运行并执行其操作。这一切都应该在没有将 Android 设备置于某种就绪状态或让我的自定义应用程序打开等待命令的情况下发生；它应该是透明的，用户无需做任何事情（例如，Android 设备可能在我的口袋或书包里）。

我是一位经验丰富的程序员，但对 Android 和蓝牙非常陌生，希望能得到正确方向的指点。我想也许我需要在 Android 设备上安装一些服务级别的应用程序来实现我自己的自定义配置文件和/或拦截蓝牙命令，但这些只是猜测；我希望有人能阐明实际过程，以便我可以详细阅读它们。我也希望该解决方案是一个通用的解决方案，可以全面适用，但现在我会采取任何我能得到的东西，哈哈！

提前谢谢了。

# apache - Apache 和 Weblogic 模块重写为集群

> ID：14224575
> 
> 赞同：0
> 
> 时间：2013-01-08T21:45:12.560
> 
> 标签：apache, weblogic, weblogic-10.x

我有一个设置，我们有两台服务器。WS 服务器用于提供所有静态内容（图像、css 等）并运行 apache。这是所有请求的命中点。

AS 服务器合起来就是一个由两台 weblogic 服务器组成的 Weblogic 集群。

所有 .jsp 请求都转到 AS 服务器。

我必须重写对集群的某些请求，而不是循环回 WS。我在 apache mod_rewrite 中使用以下逻辑。它不工作：

```
RewriteRule ^/(.*) index.jsp?c=$1 
```

Apache 日志显示

```
rewrite '/video' -> 'index.jsp?c=video' 
```

但应用程序（JSP 页面）无法接收它。不知何故，404 页面在到达 Weblogic 端之前被触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:03:19.047

我建议你使用 WebLogic 代理插件来做这种事情。您的问题并没有告诉我 Apache 服务器如何知道您的 WLS 服务器...查看文档：

[http://docs.oracle.com/cd/E21764_01/web.1111/e16435/apache.htm](http://docs.oracle.com/cd/E21764_01/web.1111/e16435/apache.htm)

# css - WordPress TwentyTwelve 自定义菜单当前菜单项样式

> ID：14224578
> 
> 赞同：0
> 
> 时间：2013-01-08T21:45:49.150
> 
> 标签：css, wordpress, menuitem

1.  我正在尝试在 WordPress 的 TwentyTwelve 主题的子主题的侧边栏中设置自定义菜单的样式。
2.  我正在尝试为当前菜单项提供灰色背景。
3.  不幸的是，“父”菜单项以某种方式将背景颜色赋予了比仅当前 li 菜单项宽得多的区域。

我现在正在使用这个 CSS 代码：

```
.current-menu-item {background-color:#666!important;color:#ff0000!important;font-weight:bold;}
.menu li:not(.current-menu-item) {color:#fff!important;background-color:#333!important;} 
```

举个例子/说明我的意思：我正在尝试在[http://populair.eu](http://populair.eu)上完成它，您在首页上看到菜单项“populair”也在上面的图像周围给出了灰色背景。子菜单项还可以。

奇怪的是它在我的本地主机上运行正常。

我有一种感觉，如果在 <asides> 之间有一个 <br />，它会得到解决，但不知何故我可能会遗漏一些东西。

有没有人有这方面的经验？/ 应该如何设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:52:40.980

您必须使用“.current-menu-item a”为​​锚链接提供背景，而不是列表项。此外，在您的“.menu li a”上，您可能必须“显示：阻止”和“清除：两者；”。更大的区域是一个浮动问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:22:51.043

最好的办法是使用 Google Chrome 的检查元素软件或使用[Firefox 的 firebug](http://getfirebug.com/)并选择项目，同时使用其中任何一个都可以实时更改 CSS 代码。这意味着当您查看要更改的部分时，您可以更改代码，它会以您可以看到的方式反映，但是您需要在您的子主题的 style.css 文件中进行这些更改。

看看我网站 www.driftedmass.co.uk 上目前的菜单，如果这是您正在寻找的东西，请通过我网站上的联系表与我联系。

如果您想缩小菜单的大小，您可能需要执行以下操作（如果您需要这样做`<<<<`）：

```
.main-navigation ul.nav-menu,
    .main-navigation div.nav-menu > ul {
        border-bottom: 1px solid #ededed;
        border-top: 1px solid #ededed;
    >>>>    display: inline !important;           <<<<<<<<
        text-align: center;
        width: 100%;
                background: transparent;
                border-color: #ff0000;
    }
    .main-navigation ul {
        margin: 0;
        text-indent: 0;
        background-color: #ffffff;
    }
        .main-navigation li a,
    .main-navigation li {
        display: inline-block;
        text-decoration: none;
    } 
```

带有箭头的位最初看起来像这样：

```
display: inline-block !important; 
```

我希望这种方式对您有所帮助。

# ajax - CakePHP JsHelper - 获取响应并在视图中打印

> ID：14224579
> 
> 赞同：0
> 
> 时间：2013-01-08T21:45:59.000
> 
> 标签：ajax, json, cakephp

我很难弄清楚如何从位于视图中的控制器中的以下代码中获取响应：

```
 if ($this->request->isAjax()){
        Configure::write ( 'debug', 0 );
        $this->autoRender = 0;
        $this->layout = 'ajax';
        $results = "My Data";
        echo json_encode($results);
    }

    //tried doing this and it doesn't work
    $this->set('results',$results); 
```

我只想能够在我的视图中访问 $results 变量中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:52:51.460

如果这是您的整个方法，那么您的视图中没有显示任何内容是合乎逻辑的。由于您已禁用自动渲染：

```
$this->autoRender = 0; 
```

您需要在某些时候手动渲染您的视图，使用：

```
$this->render('view'); 
```

`view`您要渲染的视图的实际名称在哪里。否则，您只会得到一个空白页。

另请注意，您在检查中进行设置`$results`，`isAjax()`但您将其设置为检查之外的视图，因此如果对控制器操作进行“常规”调用（非 ajax），您将收到未定义的变量错误。

# windows - IIS：将 Kerberos 与不在域中的客户端计算机一起使用

> ID：14224580
> 
> 赞同：5
> 
> 时间：2013-01-08T21:45:59.613
> 
> 标签：windows, internet-explorer, iis, active-directory, kerberos

不属于域（但在网络上）的计算机是否可以针对 IIS8 发布的网站进行身份验证，其中该站点的身份验证是“Windows 身份验证”，仅使用“Negotiate:Kerberos”的单个提供者（并禁用内核模式身份验证）？

我问是因为我正在尝试这样做，但是我无法通过对站点的身份验证（但仅是尝试将身份验证传递给数据库）。我在对客户端的响应中看到“WWW-Authenticate: Negotiate”标头，但客户端似乎只在后续（重新）请求中发送“NTLM Type1：协商”（NTLMSSP）。要么，要么我错误地解释了 Fiddler2 的结果！

我正在使用 Kerberos，因为大多数客户端都是域计算机，我需要将用户凭据从 Web 应用程序传回数据库。我希望我能够对非域计算机执行相同的操作，并且它们只会被提示输入用户名/域/密码，该用户名/域/密码将被验证并转换为服务器上的 Kerberos 票证。

请注意，出于测试目的，Windows 8 既是服务器又是客户端。在生产中，服务器将是 Windows 2008 Server R2，客户端将主要是 Windows 7（尽管会有一些 Windows 8 客户端）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:05:59.597

Kerberos**不能**在不属于域的帐户/计算机上工作。您有两种选择来实现您的目标：

1.  使用 Basic auth 请求用户数据并将其传递给`LogonUserEx`. 请参阅[此](https://stackoverflow.com/a/14203228/696632)以获取答案。
2.  通过其他方式对用户进行身份验证，并使用[S4U2self](https://stackoverflow.com/a/13818954/696632)（协议转换）。

# java - Tomcat + CDI + JSF2 但我的交易在哪里？

> ID：14224582
> 
> 赞同：1
> 
> 时间：2013-01-08T21:46:35.850
> 
> 标签：java, spring, transactions, cdi, codi

我公司有 tomcat 7 作为分布式环境。我想让 JSF2 和 CDI 在 tomcat 7 上一起工作。这是可能的，没有太多的惊喜，如下所述：[http ://www.theserverside.com/tutorial/Working-with-CDI-and-JSF- 20-on-Tomcat-7-Configuring-Weld](http://www.theserverside.com/tutorial/Working-with-CDI-and-JSF-20-on-Tomcat-7-Configuring-Weld)

我的问题是关于事务，没有 Java EE 3 解决方案来找我：

1.  手动操作：em.getTransaction().begin() ...
2.  使用我自己或 CODI 之类的 CDI 拦截器[http://matthiaswessendorf.wordpress.com/2010/11/20/enterprise-java-without-ejbs-but-with-cdi-and-myfaces-codi/](http://matthiaswessendorf.wordpress.com/2010/11/20/enterprise-java-without-ejbs-but-with-cdi-and-myfaces-codi/)
3.  使用弹簧事务，但据我所知，JSR 299 和 330 之间存在问题，它需要一些胶水才能工作： http: [//matthiaswessendorf.wordpress.com/2010/05/06/using-cdi-scopes-with-弹簧-3/](http://matthiaswessendorf.wordpress.com/2010/05/06/using-cdi-scopes-with-spring-3/)

那么，如果你是我，你会去哪里？CODI 对我来说似乎很好。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:00:13.953

[DeltaSpike](http://incubator.apache.org/deltaspike/jpa.html) :) 虽然如果你正在寻找 Apache 孵化器之外的东西，CODI 会很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:44:42.840

像我一样改用 Google Guice :)

对于最新项目，我使用 JSF2 + Primefaces + Google Guice + EclipseLink

该解决方案使代码清洁变得容易并准备好进行单元测试。（使用TestNG）

# git - Sublime/Git 在提交中添加和删除空行

> ID：14224586
> 
> 赞同：0
> 
> 时间：2013-01-08T21:46:45.463
> 
> 标签：git, commit, sublimetext2

当我编辑文件中的一行时，sublime 或 git 添加然后删除文件中的许多其他（大部分是空白）行。

这是一个例子

```
@@ -1,7 +1,7 @@
module UserHelper
-  
+
   def create_test_users
-    
+ 
```

它只是混淆了我所做的实际更改，这使得代码审查特别困难。

此外，原始文件和我的编辑器都使用 unix 行尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-24T08:57:34.403

`它正在删除您从差异中看不到的额外空格。`

 `您可以使用设置在 Sublime 上关闭此行为`trim_trailing_white_space_on_save`，将其设置为`false``

# c# - C# 列出空引用异常 ASP.net MVC

> ID：14224589
> 
> 赞同：1
> 
> 时间：2013-01-08T21:46:55.737
> 
> 标签：c#, asp.net-mvc, list

在循环中，我试图将具有该类型的对象添加`Location`到`List<Location>`属性中。

控制器：

```
 [HttpPost]
 public ActionResult Index([Bind(Include = "CitySearch")]HomeViewModel model)
 {
    List<CityIdentity> ids = null;
    ids = service.GetNamesId(model.CitySearch);

    foreach (var id in ids)
    {
        var loc = service.GetLocation(id.CityId);
        var location = new Location
        {
            CityId = id.CityId,
            Place = loc.Place,
        };
        model.Locations.Add(location);
    }
} 
```

视图模型：

```
public class HomeViewModel
{
    public string CitySearch { get; set; }

    public List<Location> Locations { get; set; }

} 
```

`model`是 type`HomeViewModel`和 property`Locations`是 type `List<Location>`。是来自在视图中提交表单的`model`表单操作的实例。`HttpPost`

我正在调试并且错误发生在`model.Locations.Add(location)`并且我得到了`object reference not set to an instance of an object.`nullref 异常。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:48:27.193

> 任何的想法？

是的，要么`model`变量为空，要么`Locations`属性为空。所以在访问之前确保它们不为空`model.Locations`。否则你得到的异常是完全正常的。您不能在空实例上调用方法。顺便说一句，您可以使用标准调试技术（在代码中放置断点，在调试模式下运行应用程序并检查变量的值）会导致您得出相同的结论。

现在，为什么您的`model`or`model.Locations`属性为 null 是一个完全不同的问题。我猜您提交的表单不包含遵守[`standard naming conventions for binding to a List`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx). 如果您希望默认模型绑定器能够在 POST 操作中重新水合您的模型，我邀请您熟悉这些约定并尊重它们。

也许您以某种方式放置了`model`as action 参数并期望 ASP.NET MVC 会自动从某个地方填充它？不，这不是 ASP.NET MVC 的工作方式。没有魔法。ASP.NET MVC 使用具有严格规则的模型绑定器。只有您作为参数发送给操作的内容才是您期望得到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:07:38.080

根据您的反应和上下文，您的`Locations`属性似乎当时未初始化，因此您不能`Add`在此集合上使用方法。为了克服这个问题，你需要先初始化这个属性，然后你可以以任何你需要的方式操作它。

实现此目的的一种方法是`Locations`在模型的构造函数（或任何您认为合适的地方）中初始化您的属性。

所以只需添加这样的东西，你就可以开始了：

```
Locations = new List<Location>(); 
```

这会充分初始化您的属性以使用其方法。

# ruby - Nokogiri 抓取带有格式和链接标签、、、、等的文本

> ID：14224594
> 
> 赞同：2
> 
> 时间：2013-01-08T21:47:37.300
> 
> 标签：ruby, recursion, nokogiri

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:30:37.673

我会使用两种策略，Nokogiri 提取您想要的内容，然后使用黑名单/白名单程序去除您不想要的标签或保留您想要的标签。

```
require 'nokogiri'
require 'sanitize'

html = '
<div id="1">
  This is text in the TD with <strong> strong <strong> tags
  <p>This is a child node. with <b> bold </b> tags</p>
  <div id=2>
      "another line of text to a <a href="link.html"> link </a>"
      <p> This is text inside a div <em>inside<em> another div inside a paragraph tag</p>
  </div>
</div>
'

doc = Nokogiri.HTML(html)
html_fragment = doc.at('div#1').to_html 
```

将捕获的内容`<div id="1">`作为 HTML 字符串：

```
 This is text in the TD with <strong> strong <strong> tags
      <p>This is a child node. with <b> bold </b> tags</p>
      <div id="2">
          "another line of text to a <a href="link.html"> link </a>"
          <p> This is text inside a div <em>inside<em> another div inside a paragraph tag</em></em></p>
      </div>
    </strong></strong> 
```

尾随`</strong></strong>`是两个开始`<strong>`标签的结果。这可能是故意的，但没有结束标签 Nokogiri 会做一些修复以使 HTML 正确。

传递`html_fragment`给[Sanitize](https://github.com/rgrove/sanitize) gem：

```
doc = Sanitize.clean(
  html_fragment,
  :elements   => %w[ a b em strong ],
  :attributes => {
    'a'    => %w[ href ],
  },
) 
```

返回的文本如下所示：

```
 This is text in the TD with <strong> strong <strong> tags
  This is a child node. with <b> bold </b> tags 

      "another line of text to a <a href="link.html"> link </a>"
        This is text inside a div <em>inside<em> another div inside a paragraph tag</em></em> 

</strong></strong> 
```

同样，由于 HTML 格式不正确，没有结束`</strong>`标记，因此存在两个尾随结束标记。

# php - 将 PHP 参数从数据库传递到 Perl 脚本，

> ID：14224600
> 
> 赞同：0
> 
> 时间：2013-01-08T21:47:53.040
> 
> 标签：php, perl

首先，我会说我是 Perl 的新手。

我在将 php 参数传递给我的 perl 脚本时遇到了一些问题。该参数来自 SQL 查询。这是代码的示例和说明。

此代码用于发送 ID 并从数据库中检索用户的全名，然后将其发送到 perl 脚本，以便从 Fortinet 无线设备中删除用户。

PHP 代码

```
 function deleteUser($db){
  $id = $POST['param'];
  $SQLq = 'delete from users where id = ?';

  $q = $db->prepare($SQLq);
  $q->execute(array($id));

  $data = $q->fetch();

  $username = $data['user_name']; #data-type in phpmyadming : varchar
  exec('perl /var/www/xxx/deleteUserWifi.pl'.' '.escapeshellarg($id).' '.escapeshellarg($username),$output);
 } 
```

这是我的 perl 脚本中的代码

```
 #!/usr/bin/perl -w
  use strict;
  use Net::SSH::Perl;

  #login info to log on the fortinet device
  my $hostname = "192.168.0.2";
  my $username = "aaaa";
  my $password = "xxxx";

  my $userID=  $ARGV[0];
  my $userName = $ARGV[1];

  #connection to the FORTINET device
  my $ssh = Net::SSH::Perl->new($hostname);
  $ssh->login($username, $password);

  #string to execute
  my $cmd  = "config vdom \n
  edit root \n
  config system dhcp server \n
  edit 2 \n
  config reserved-address \n
  delete ". $userID ." \n
  end \n
  end \n
  config firewall address \n
  delete \"" .$userName "\" \n
  end \n
  end \n
  exit"
  my($stdout,$stderr,$exit) = $ssh->cmd($cmd); 
```

我发送我的 ID 没有问题，并从发送的 ID 中删除用户的 ip 预留。出于某种原因，我无法从设备中删除用户名条目，但如果我进入 php 代码并硬编码这样的用户名，它工作得非常好：

PHP 代码

```
 $username = "test test"; 
```

我在发送之前尝试过强制转换（字符串），但似乎没有任何效果。那么关于如何调试这个的任何想法？？？

非常感谢您提前。

种植园

PS：抱歉语法不好，英语不是我的第一语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:52:51.353

您需要从结果集中[获取](http://php.net/manual/en/pdostatement.fetch.php)一行（并添加错误处理以防万一......）：

```
 $q = $db->prepare($SQLq);
  $q->execute(array($id));

  $data = $q->fetch(PDO::FETCH_ASSOC);

  $username = $data['user_name']; #data-type in phpmyadming : varchar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:54:18.397

在您的 PHP 代码中，您实际上并没有对查询结果做任何事情。它不仅神奇地出现在 中`$data`，您还需要通过执行类似的操作来实际获取它

```
$data = $q->fetchObject();
$id = $data->user_name; 
```

# c#-4.0 - 根据涉及其他行的条件，使用 LINQ to SQL 过滤集合

> ID：14224601
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:47:58.940
> 
> 标签：c#-4.0, linq-to-sql, c#-3.0

我正在使用 LINQ to SQL 获取数据集。我需要过滤这个数据集，这样：

如果存在具有空 SourceName 的字段，并且该字段至少有一个具有非空 SourceName 的其他记录，则应将其删除。

如果它是该“字段”的唯一行，那么它应该保留在列表中。

这是一个示例数据：数据由 3 列组成：“Field”、“SourceName”和“Rate”

```
Field | SourceName |  Rate 
 10   |    s1      |   9   
 10   |    null    |   null
 11   |    null    |   null
 11   |    s2      |   5
 11   |    s3      |   4
 12   |    null    |   null
 13   |    null    |   null
 13   |    s4      |   7
 13   |    s5      |   8
  8   |    s6      |   2
  9   |    s7      |   23
  9   |    s8      |   9
  9   |    s9      |   3 
```

输出应如下所示：

```
Field | SourceName | Rate 
 10   |  s1        |  9   
 11   |  s2        |  5
 11   |  s3        |  4
 12   |  null      |  null    //  <- (remains since there's only 
 13   |  s4        |  7       //      1 record for this 'Field')
 13   |  s5        |  8
  8   |  null      |  null
  9   |  s8        |  9
  9   |  s9        |  3 
```

我该如何过滤它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:48:27.620

`.Where()`您要实现的目标并非微不足道，仅靠一个子句就无法解决。您的过滤条件取决于需要分组的条件，因此您必须`.GroupBy()`使用`.SelectMany()`.

以下代码使用 LINQ to Objects 满足您的预期输出，我看不出 LINQ to SQL 不能将其转换为 SQL 的任何原因，没有尝试过那么难。

```
 //Group by the 'Field' field.
yourData.GroupBy(x => x.Field)

        //Project the grouping to add a new 'IsUnique' field
        .Select(g => new { 
                        SourceAndRate = g,
                        IsUnique = g.Count() == 1,
        })

        //Flatten the collection using original items, plus IsUnique
        .SelectMany(t => t.SourceAndRate, (t, i) => new {
                        Field = t.SourceAndRate.Key,
                        SourceName = i.SourceName, 
                        Rate = i.Rate,
                        IsUnique = t.IsUnique
        })

        //Now we can do the business here; filter nulls except unique
        .Where(x => x.SourceName != null || x.IsUnique); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:59:39.627

Use Linq's built in 'Where' clause with a lambda continuation:

Simple static example of using lambda's and a simple POCO class to store the data in a list like yours:

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace Simple
{
    class Program
    {
        class Data
        {
            public string Field { get; set; }
            public string SourceName { get; set; }
            public string Rate { get; set; }
        }

        static List<Data> Create()
        {
            return new List<Data>
                {
                    new Data {Field = "10", SourceName = null, Rate = null},
                    new Data {Field = "11", SourceName = null, Rate = null},
                    new Data {Field = "11", SourceName = "s2", Rate = "5"}
                };
        }

        static void Main(string[] args)
        {
            var ls = Create();

            Console.WriteLine("Show me my whole list: \n\n");

            // write out everything
            ls.ForEach(x => Console.WriteLine(x.Field + "\t" + x.SourceName + "\t" + x.Rate + "\n"));

            Console.WriteLine("Show me only non nulls: \n\n");

            // exclude some things
            ls.Where(l => l.SourceName != null)
                .ToList()
                .ForEach(x => Console.WriteLine(x.Field + "\t" + x.SourceName + "\t" + x.Rate + "\n"));

            Console.ReadLine();
        }
    }
} 
```

# sql-server-2008 - sql server 使用外连接结果转换成表格式

> ID：14224603
> 
> 赞同：0
> 
> 时间：2013-01-08T21:48:01.250
> 
> 标签：sql-server-2008, html-email, outer-join

我正在设置查询以通过电子邮件发送结果，但结果格式不正确。

我想从表 1 中某个字段为空的两个表中选择值，并从表 2 中添加一个相关字段，其中表 1 id = 表 2 id。但也包括表 1 中可能不在表 2 中但某些字段为空的字段。

```
 DECLARE @TITLE NVARCHAR(MAX)
 DECLARE @BODY NVARCHAR(MAX)

 SET @TITLE =CAST(( SELECT DISTINCT A.CUSTKEY as 'td','',
 B.CUSTPROJ as 'td','',   A.ITEMS AS 'td','', A.SOLDDATE as 'td','',
 A.LASTORDEREDDATE as 'td','', A.OBJID as 'td'
 FROM PRODUCTDATA AS A LEFT OUTER JOIN CLIENT_TABLE as B
 on A.CUSTkey = B.CUSTkey 
 WHERE LASTORDEREDDATE IS NULL GROUP BY A.CUSTKEY,B.CUSTPROJ, 
 A.ITEMS, A.SOLDDATE, A.OBJID,A.LASTORDEREDDATE
 FOR XML PATH ('tr'), ELEMENTS) AS NVARCHAR(MAX))

 SET @BODY = '<html><body><H4>NEW CLIENT PURCHASES</H4>
 <table border = 2>
 <tr>
 <th> CUST KEY </th> <th> CLIENT NAME </th> <th> NEW PURCHASES </th>
 <th> SOLD DATE </th> <th> ORDERED DATE </th> <th> PRODUCT ID </th></tr>'

 SET @BODY = @BODY + @TITLE + '</TABLE></BODY></HTML>'

EXEC msdb.dbo.sp_send_dbmail @profile_name='DB Admin',
@body =   @BODY,
@body_format = 'HTML'; 
```

但它显示如下：

```
NEW CLIENT PURCHASES
CUSTkEY CLIENT NAME NEW PURCHASES    SOLD DATE      ORDERED DATE PRODUCT ID 
9189ad  PHOEBE       LDS              20130107T12:15:00    NULL         BGD01 
8765ad  MONICA       PANTS            20130107T12:15:00    NULL         BGD01 
3421ad  JOEY         BAG              20130107T12:15:00    NULL         BGD01 
2354ad  RACHEL       HAT              20130107T12:15:00    NULL         BGD01   
7653ef  SHOES     20121213T06:15:00                                     hfd00 
```

如您所见，最后一行恰好是表 1 中的一行，其中客户端不存在于客户端表 2 中，因此该行应如下所示：

```
 CUSTkEY   CLIENT NAME NEW PURCHASES    SOLD DATE       ORDERED DATE    PRODUCT ID 

   7653ef                  SHOES       20121213T06:15:00   NULL             hfd00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:19:29.710

当您有多个具有相同名称的列时，要包含空标签，您必须将每列包装到其自己的 XML 生成器中，如下所示：

```
SELECT 
 (SELECT (SELECT n1) FOR XML PATH('td'),TYPE),
 (SELECT (SELECT n2) FOR XML PATH('td'),TYPE), 
 (SELECT (SELECT n3) FOR XML PATH('td'),TYPE)
FROM (VALUES(NULL,NULL,1))x(n1,n2,n3)
FOR XML PATH('tr'), ELEMENTS 
```

# smalltalk - Smalltalk 初始化变量

> ID：14224625
> 
> 赞同：8
> 
> 时间：2013-01-08T21:49:17.487
> 
> 标签：smalltalk, pharo

在 Java 和 C++ 等语言中，我们为构造函数提供参数。

您如何在 Pharo Smalltalk 中做到这一点？

我想要类似的东西

```
|aColor|
aColor = Color new 'red'. 
```

或者这是不好的做法，我应该总是这样做

```
|aColor|
aColor = Color new.
aColor name:= red.d 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T22:14:00.377

简短的回答是您可以在 Smalltalk 中做几乎相同的事情。从调用代码来看，它看起来像：

```
aColor := Color named: 'Red'. 
```

长的答案是，在 Smalltalk 中你没有构造函数，至少在你有一个以类命名的特殊消息的意义上没有。您在 Smalltalk 中所做的是定义类端消息（即类可以理解的消息，而不是实例 [*]），您可以在其中实例化和配置您的实例。假设您的`Color`类有一个`name`实例变量和一个 setter，该`#named:`方法的实现方式如下：

```
(class) Color>>named: aName
| color |
color := self new.
color name: aName.
^color. 
```

需要注意的一些事项：

*   我们正在使用`#new`发送给类的消息来创建一个新实例。您可以将`#new`消息视为创建对象的原始方式（提示：您可以浏览`#new`消息的实现者以查看它是如何实现的）。
*   我们可以定义尽可能多的类方法来创建新的“已配置”实例（例如`Color fromHexa:`）或返回预先创建的实例（例如`Color blue`）。
*   您仍然可以通过执行来创建未初始化的实例`Color new`。如果要禁止该行为，则必须覆盖`#new`类消息。

在[Stef 的免费在线 Smalltalk 书籍中，您可以阅读许多关于 Smalltalk 基础知识的好书](http://stephane.ducasse.free.fr/FreeBooks.html)

[*] 由于 Smalltalk 的正交特性，这很自然，因为一切（包括类）都是对象。如果您有兴趣，请查看[Pharo by Example](http://pharobyexample.org/)的第 13 章或对 Smalltalk 中的类和元类的任何其他参考。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T22:03:30.680

在 Smalltalk 中，所有成员字段都是严格私有的，要分配给它们，您必须定义分配方法。

```
Color >> name: aString
  name := aString 
```

然后你可以像这样创建你的对象：

```
|aColor|
aColor := (Color new)
  name: 'red';
  yourself. 
```

通常使用工厂方法来减少冗长：

```
Color class >> withName: aName
  ^ (self new)
    name: aName;
    yourself. 
```

有了这个，你可以像这样创建新对象：

```
|aColor|
aColor := Color withName: 'red'. 
```

# opengl - 在 GLSL 中绘制全屏后期处理内发光

> ID：14224631
> 
> 赞同：1
> 
> 时间：2013-01-08T21:49:53.123
> 
> 标签：opengl, glsl

我正在寻找一种在 GLSL 中沿屏幕四边形（内发光）创建发光效果的方法。我知道如何在片段着色器中创建矩形程序以及如何将其模糊以使其向外发光。但我无法弄清楚我是如何沿着屏幕四边形设置一个发光的，它面向内，具有可配置的发光距离和模糊级别。任何相关示例或文档的链接？这是我需要的： ![在此处输入图像描述](../Images/3b4aae58dbb214a02759de98c1af76f1.png)

大码：

```
const vec2 resolution = vec2(800,600);
float rect( vec2 p, vec2 b, float smooth )
{
vec2 v = abs(p) - b;
float d = length(max(v,0.0));
return 1.0-pow(d, smooth);
}

void main( void ) {

vec2 unipos = (gl_FragCoord.xy / resolution);
vec2 pos = unipos*2.0-1.0;
pos.x *= resolution.x / resolution.y;

float d1 = rect(pos - vec2(-1.0,0.0), vec2(1,1), 0.1); 
vec3 clr1 = vec3(0.2,0.6,1.0) *d1; 

gl_FragColor = vec4( clr1 , 1.0 );

} 
```

此代码使用外部发光创建全屏矩形，而我只需要发光并且它应该是内部的。

# c# - 来自用户的 URL，XSS 安全性？

> ID：14224635
> 
> 赞同：0
> 
> 时间：2013-01-08T21:50:03.700
> 
> 标签：c#, .net

> **可能重复：**
> [使用用户输入的 URL 处理安全性和避免 XSS 的最佳方法](https://stackoverflow.com/questions/205923/best-way-to-handle-security-and-avoid-xss-with-user-entered-urls)

使用 .Net 4，我有一个用户设置，用于指定要通过公司 LOGO 链接的 URL。

从 XSS 的角度来看，我想确保它的安全，但 .Net 的东西似乎并不容易。我一直在使用 Uri，但是当 URL 是相对的时，它似乎全身都在呕吐。

如何以一种 XSS 安全的方式执行此操作？

# c# - 检查txt文件中数字的最快方法

> ID：14224636
> 
> 赞同：-4
> 
> 时间：2013-01-08T21:50:08.910
> 
> 标签：c#

嗨，大家好。我有一个循环来解析用户 ID 并将 tham 添加到 txt 文件中。最好的方法是检查这个 txt 是否有这个 id 跳过它（在下一次解析时）。txt 的大小从 5-..... mb 上升

我尝试将 ID 添加到列表中，但是当文件大小大于 5mb 时，应用程序开始挂起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:52:47.570

使用`HashSet<int>`or `HashSet<string>`，收集其中的 id，然后最后将结果写入文本文件。

PS：*注意 HashSet 是 O(1) 而 List 是 O(n)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:52:33.327

您可能应该将文本文件中的所有 ID 加载到某个集合中，并检查该集合是否包含这些 ID。

老实说，我认为没有比这更有效的方法了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:54:27.133

我相信一个经验法则是用空间交换时间。如果您想更快地复制并避免一次又一次地查看文件，那么您可以维护一个数组或链表或哈希表，其中也存储了 id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:54:39.353

```
var userIsAlreadyThere = File.ReadLines(path).Contains(userid); 
```

# javascript - 使用 Javascript 的 Windows 应用商店应用程序中的访问被拒绝错误

> ID：14224637
> 
> 赞同：0
> 
> 时间：2013-01-08T21:50:08.677
> 
> 标签：javascript, windows-8, windows-runtime, windows-store-apps

当有人试图关闭尚未保存的文件时，我正在尝试在我的 Windows RT 应用程序中启动保存对话框。但是，我不断收到`0x80070005 - JavaScript runtime error: Access is denied`错误消息

这是我使用启动消息对话框的代码。选择“不保存”（并`BlankFile()`运行）时，所有内容都运行正常。但是，当您选择“保存文件”时，它会在尝试运行时引发访问被拒绝错误`.pickSaveFileAsync()`

```
function createNewFile() 
{
    if (editedSinceSave)
    {
        // Create the message dialog and set its content 
        var msg = new Windows.UI.Popups.MessageDialog("Save this file?", 
            "Save Changes");

        // Add commands 
        msg.commands.append(new Windows.UI.Popups.UICommand("Don't Save", 
            function (command) {
                BlankFile();
            }));

        msg.commands.append(new Windows.UI.Popups.UICommand("Save File", 
            function (command) {
                //saveFile(true, true);
                testPop("test");
            }));

        // Set the command that will be invoked by default 
        msg.defaultCommandIndex = 2;

        // Show the message dialog 
        msg.showAsync();
    }
}

function testPop(text) {
    var msg = new Windows.UI.Popups.MessageDialog(text, "");
    msg.showAsync();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:35:47.377

您的核心问题是您要在另一个之上显示一个消息对话框。我在这里讨论细节和解决方案： [Metro 应用程序中“警报”的替代方案是什么？](https://stackoverflow.com/questions/13652413/what-is-the-alternative-to-alert-in-metro-apps/13655351#13655351)

但是，您的流程自然需要发生这种情况——我建议考虑构建一种不同类型的流程，而不是堆叠对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:50:08.677

解决这个问题的方法似乎是设置一个命令 id 并在`done()`函数中捕获它`showAsync()`，就像这样

```
function createNewFile() 
{
    if (editedSinceSave)
    {
        // Add commands and set their CommandIds 
        msg.commands.append(new Windows.UI.Popups.UICommand("Dont Save", null, 1));
        msg.commands.append(new Windows.UI.Popups.UICommand("Save File", null, 2));

        // Set the command that will be invoked by default 
        msg.defaultCommandIndex = 1;

        // Show the message dialog 
        msg.showAsync().done(function (command) {
            if (command) {
                if (command.id == 1){
                    BlankFile();
                }
                else {
                    saveFile(true, true);
                }
            }
        });
    }
} 
```

这不会引发任何错误。我不知道为什么以另一种方式这样做会引发错误，因为它似乎没有任何不同！

# ruby-on-rails - Rails 自定义验证特定值

> ID：14224640
> 
> 赞同：0
> 
> 时间：2013-01-08T21:50:26.353
> 
> 标签：ruby-on-rails, validation

我有一个用户注册表单，我试图将创建帐户的能力限制为具有特定访问代码的用户。我遇到了能够验证该特定代码的问题。我已经包含了我能够拼凑但对我不起作用的代码。

**#new.html.erb**

```
 <%= f.text_field :access, placeholder: "Access Code", required: "required" %> 
```

**#user.rb**

```
validate :check_code
def check_code
  errors.add(:base, 'Try another code') unless User.where(:access == "theAccessCode")
end 
```

有人可以建议此验证的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:10:31.190

如果有一个正确的访问代码，我认为你想要这样的东西：

```
ACCESS_CODE = 'secretCode'
def check_code
  errors.add(:base, 'Try another code') unless self.access == ACCESS_CODE
end 
```

或者，您的代码可能需要看起来像这样才能工作（尽管查询现有用户似乎仍然是错误的）：

```
def check_code
  errors.add(:base, 'Try another code') unless User.where(:access => "theAccessCode").exists?
end 
```

# cocoa - 可可 nsimage 没有被保存

> ID：14224644
> 
> 赞同：0
> 
> 时间：2013-01-08T21:50:49.840
> 
> 标签：cocoa, variables, nsimage

我是可可和编程的新手，对不起，如果这是基本的东西。

我正在使用ARC。我有一个 NSImageView 组件，它由 DropZone 类控制。我将图像拖放到其中，但是一旦我尝试调用我得到的缩放方法，它就会告诉我“：ImageIO：CGImageSourceCreateWithData数据参数为零”我认为我做错了什么，只是不要还知道什么。

这是我在 DropZone.m 中的方法

```
- (void)scaleIcons:(NSString *)outputPath{
NSImage *anImage;
NSSize imageSize;
NSString *finalPath;

anImage = [[NSImage alloc]init];
anImage = image;
imageSize = [anImage size];
imageSize.width = 512;
imageSize.height = 512;
[anImage setSize:imageSize];

finalPath = [outputPath stringByAppendingString:@"/icon_512x512.png"];

NSData *imageData = [anImage TIFFRepresentation];
NSBitmapImageRep *rep = [NSBitmapImageRep imageRepWithData:imageData];
NSData *dataToWrite = [rep representationUsingType:NSPNGFileType properties:nil];
[dataToWrite writeToFile:finalPath atomically:NO];
} 
```

DropZone.h

```
@interface DropZone : NSImageView <NSDraggingDestination>{
  NSImage *image;
}
- (void)scaleIcons:(NSString *)outputPath;
@end 
```

这就是我如何称它为我的 AppDelegate.m

```
- (IBAction)createIconButtonClicked:(id)sender {
NSFileManager *filemgr;
NSString *tempDir;

filemgr = [NSFileManager defaultManager];
tempDir = [pathString stringByAppendingString:@"/icon.iconset"];
NSURL *newDir = [NSURL fileURLWithPath:tempDir];
[filemgr createDirectoryAtURL: newDir withIntermediateDirectories:YES attributes: nil error:nil];
DropZone *myZone = [[DropZone alloc] init];
[myZone scaleIcons:tempDir];

NSAlert *alert = [[NSAlert alloc] init];
[alert setMessageText:@"Done!"];
[alert runModal];
} 
```

图像是从 pastebaord 中提取的：

```
- (BOOL)performDragOperation:(id<NSDraggingInfo>)sender{
if ([NSImage canInitWithPasteboard:[sender draggingPasteboard]]) {
    image = [[NSImage alloc]initWithPasteboard:[sender draggingPasteboard]];
    [self setImage:image];
    [self setImageAlignment: NSImageAlignCenter];
    }
return YES;
} 
```

由于某种原因，我的“形象”丢失了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:18:14.177

问题是您在应用程序委托中创建了 DropZone 的新实例，但我假设您在 IB 中创建了图像视图并将其类更改为 DropZone。那是对的吗？如果是这样，您需要在应用程序委托中有一个 IBOutlet 连接到 IB 中的图像视图，并具有以下功能：

```
 [self.iv scaleIcons:tempDir]; 
```

其中 iv 是我的 IBOutlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:02:32.383

在不知道“图像”来自哪里的情况下，我会说你的问题出在这些方面......

```
anImage = [[NSImage alloc]init];
anImage = image; 
```

您应该只从 imageView 中获取图像...

```
anImage = [myImageView image]; 
```

# c# - 数据集设计器为不同的表创建不同的 CommandText

> ID：14224647
> 
> 赞同：0
> 
> 时间：2013-01-08T21:51:21.347
> 
> 标签：c#, visual-studio-2010, odbc, dataset-designer

这是一个奇怪的问题，我希望我的框架是正确的。我正在使用 Visual Studio 数据集设计器创建 SQL 表适配器，以将我的项目链接到 SQL 服务器。连接字符串是通过 ODBC 条目。

所有表都有默认查询，例如更新和插入。在 dataset.Designer.cs 文件中，这些命令是自动生成的。这是一个例子：

```
this._adapter.DeleteCommand = new global::System.Data.Odbc.OdbcCommand();
            this._adapter.DeleteCommand.Connection = this.Connection;
            this._adapter.DeleteCommand.CommandText = "DELETE FROM [pftestbench].[dbo].[TestData_TestGroupInstrument] WHERE (([TestGroup" +
                "RecordNumber] = ?) AND ([InstrumentSerial] = ?))";
            this._adapter.DeleteCommand.CommandType = global::System.Data.CommandType.Text;
            this._adapter.DeleteCommand.Parameters.Add(new global::System.Data.Odbc.OdbcParameter("Original_TestGroupRecordNumber", global::System.Data.Odbc.OdbcType.BigInt, 0, global::System.Data.ParameterDirection.Input, ((byte)(0)), ((byte)(0)), "TestGroupRecordNumber", global::System.Data.DataRowVersion.Original, false, null));
            this._adapter.DeleteCommand.Parameters.Add(new global::System.Data.Odbc.OdbcParameter("Original_InstrumentSerial", global::System.Data.Odbc.OdbcType.NVarChar, 0, global::System.Data.ParameterDirection.Input, ((byte)(0)), ((byte)(0)), "InstrumentSerial", global::System.Data.DataRowVersion.Original, false, null)); 
```

我对 CommandText 行感兴趣：

```
this._adapter.DeleteCommand.CommandText = "DELETE FROM [pftestbench].[dbo].[TestData_TestGroupInstrument] WHERE (([TestGroup" +
                "RecordNumber] = ?) AND ([InstrumentSerial] = ?))"; 
```

您可以看到这如何取决于数据库名称，以及在我更改数据库名称的情况下它是如何不可取的。现在，除了一个表之外的所有表都指定了数据库名称。没有的一个表有这样的 CommandText 行：

```
this._adapter.DeleteCommand.CommandText = @"DELETE FROM [TestData_Instrument] WHERE (([Serial] = ?) AND ((? = 1 AND [Model] IS NULL) OR ([Model] = ?)) AND ((? = 1 AND [CalibrationDue] IS NULL) OR ([CalibrationDue] = ?)) AND ((? = 1 AND [Trace] IS NULL) OR ([Trace] = ?)) AND ((? = 1 AND [Manufacturer] IS NULL) OR ([Manufacturer] = ?)))"; 
```

最后一个是我最理想的，因为它独立于数据库名称。这就是我开始使用 ODBC 的原因，但显然我做的不对。

我的问题是，如何确保所有这些条目都与数据库名称无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T18:18:40.710

不幸的是，在数据集设计器中使用设计器/查询构建器时，您无法阻止数据库名称或上下文被添加到 SQL 对象名称之前。

您可以通过每个查询的向导手动删除它们。右键单击有问题的查询并选择“配置...”。在打开的向导中，删除 [pfttestbench] 和任何其他前置数据（例如 [dbo]），而不使用查询构建器（退出时将它们重新添加。）一旦您删除了上下文信息，点击完成按钮。

要确认这是否有效，您需要强制重新创建 *.Designer.cs 文件，否则您将看不到更改。为此，请在解决方案资源管理器中右键单击 .xsd 文件并选择“运行自定义工具”。完成后，您可以像最初一样打开 *.Designer.cs 文件，或者查看您修改的查询的 CommandText 属性以确认已删除完全限定的名称上下文。

# powershell - 测试以检查是否支持 Cmdlet

> ID：14224651
> 
> 赞同：1
> 
> 时间：2013-01-08T21:51:43.473
> 
> 标签：powershell

我有一个不断抛出此错误的 powershell 脚本

```
Get-ComputerRestorePoint : This functionality is not supported on this operating system.
At line:1 char:25
+ Get-ComputerRestorePoint <<<<
    + CategoryInfo          : InvalidOperation: (:) [Get-ComputerRestorePoint], ArgumentException
    + FullyQualifiedErrorId : GetComputerRestorePointNotSupported,Microsoft.PowerShell.Commands.GetComputerRestorePoin
   tCommand 
```

是否有一种简单的方法可以在运行之前测试 cmdlet 是否受支持？我知道我可以在 cmdlet 周围抛出一个 try catch，但与简单的检查相比，这种方法似乎相当昂贵。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:44:12.720

您可以轻松检查会话中是否有可用的 cmdlet（使用 Get-Command），但没有直接的方法来测试可用的 cmdlet 是否支持当前操作系统。此 cmdlet 的帮助说明部分说：

```
NOTES

        To run a Get-ComputerRestorePoint command on Windows Vista and later versions 
        of Windows, open Windows PowerShell with the "Run as administrator" option.

        This cmdlet uses the Windows Management Instrumentation (WMI) SystemRestore 
        class. 
```

但是，我不会依赖注释的准确性。我能想到的最好的就是你的建议，使用 try/catch。

# php - 应用程序不刷新图像

> ID：14224654
> 
> 赞同：0
> 
> 时间：2013-01-08T21:51:58.297
> 
> 标签：php, image, caching, file-upload

我正在开发一个 PHP 应用程序来存储一些个人信息（包括照片）。我将图像存储在特定文件夹中（比如说 myapp/images/people/）。

保存照片后，我的应用程序被重定向到显示特定人员信息的页面（一种个人资料）。

如果照片是第一次保存（之前没有为该人保存其他照片），则该照片会显示在个人资料中。在这一点上，一切似乎都正常。

问题是当我想更改照片时。当我更换一张照片时，我的应用程序会一直显示旧照片。我检查了服务器，旧照片不见了，只有新照片（我需要），但应用程序没有显示它。

我想这与缓存有关。

我尝试添加没有缓存值的 html 标记，我尝试使用 header() PHP 函数添加相同的值，但什么也没有。我也尝试过使用：

```
if(file_exists($imagepath))
{
    unlink($imagepath);
} 
```

和我用过的类似的

```
if(file_exists($imagepath))
{
    unlink($imagepath);
    clearstatcache();
} 
```

但也没有。

有人可以帮我弄这个吗？知道发生了什么吗？新照片在服务器中，旧照片不在，但应用程序一直显示上一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:58:28.900

图像缓存在浏览器中。最好的方法是在服务器上生成一个新的图像名称，并在 HTML 中返回新的图像。由于它是浏览器的新图像，它不会从缓存中获取它，您将在应用程序中看到新图像。

# php - 将空白行插入表中以生成外键还是更好的方法？

> ID：14224655
> 
> 赞同：0
> 
> 时间：2013-01-08T21:51:59.123
> 
> 标签：php, mysql

试图存储搜索条件。我创建了一个“搜索”表，它将每个搜索词存储在它自己的字段中（卧室、浴室等）。所以每一行将包含一个搜索。

在高级搜索表单上，用户可以使用选项选择为单个字段选择多个搜索词。我认为将这些术语中的每一个存储在相关表的唯一行中以便于统计报告是明智的。我认为这样我可以快速报告一个词被搜索了多少次。我还需要能够保存和重新生成搜索查询。

但是，如果主表中没有搜索到的术语，我仍然需要生成一个唯一 id 以将其链接到相关表。所以我需要插入一个空白行来生成我不愿意做的外键。

有没有更好的办法？我可以将多个搜索词问题存储在以逗号分隔的主表中，但似乎将它们拉回来并计算统计数据等会更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:56:16.153

为什么需要插入空白行？在保留所有记录之前，您不需要保留任何记录，对吗？

据我了解，您的表格布局类似于：

```
Table1
--------
ID
etc.

Table2
--------
ID
Table1ID
etc. 
```

如果是这种情况，那么插入数据的操作顺序将如下所示：

*   开始交易
*   插入`Table1`
*   [获取最后插入的 ID](https://stackoverflow.com/questions/1685860/php-how-to-get-last-inserted-id-of-a-table)
*   插入`Table2`
*   提交事务

假设我正确理解您的用户体验，这一切都会在用户提交表单时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:07:33.043

如果我理解你，

看起来你应该有两张桌子：

```
search_term
-----------------
term_id
term 
```

和

```
search
-----------------
search_id
term_id 
```

然后您可以查询搜索所有术语并发出 SELECT 语句。

# solr - SOLR '0' 状态：通信错误

> ID：14224656
> 
> 赞同：3
> 
> 时间：2013-01-08T21:52:12.107
> 
> 标签：solr

我正在使用 SOLR 索引文档。我从 mysql 数据库创建索引。我从在 wamp 服务器上运行的 PHP 创建索引。我正在使用 SOLR PHP 客户端创建索引。当我从部署 SOLR 的服务器创建索引时，一切正常。但是当我尝试从另一台机器创建索引时，我收到以下错误：

**“0”状态：通信错误**

我尝试更改 php 套接字超时、solr commitlocktimeout 和 solr writelocktimeout。但我仍然得到同样的错误。当我从 solr server itslef 创建索引时，没有错误。

PHP 版本：5.2.2 SOLR 版本：1.4.1

知道为什么会这样吗？

谢谢

以下是我的堆栈跟踪：

```
'0' Status: Communication Error#0 C:\wamp\www\nist\application\library\SolrPhpClient\Apache\Solr\Service.php(672): Apache_Solr_Service->_sendRawPost('http://129.107....', '<add allowDups=...')
#1 C:\wamp\www\nist\application\library\SolrPhpClient\Apache\Solr\Service.php(736): Apache_Solr_Service->add('<add allowDups=...')
#2 C:\wamp\www\nist\application\library\Nist\Console\NistSolrIndex.php(106): Apache_Solr_Service->addDocuments(Array)
#3 C:\wamp\www\nist\application\library\Nist\Console\CrawlUNT.php(346): Nist_Console_NistSolrIndex->createIndex()
#4 C:\wamp\www\nist\application\library\Nist\Console\CrawlUNT.php(89): Nist_Console_CrawlUNT->CrawlParseAndIndexProfiles()
#5 C:\wamp\www\nist\application\Bootstrap.php(107): Nist_Console_CrawlUNT->run(Object(Zend_Console_Getopt))
#6 C:\wamp\www\nist\application\Bootstrap.php(78): Bootstrap->_runConsoleApp()
#7 C:\wamp\www\dkumar\mentis-libs\Zend\Application.php(366): Bootstrap->run()
#8 C:\wamp\www\nist\index.php(37): Zend_Application->run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-01T13:52:24.370

当我们更改密码时，我们遇到了同样的问题。它是由新密码中的特殊字符引起的。删除 '@', '/' '()' 解决了这个问题。

索尔：4.9，PHP：5.6

# javascript - 如何防止点击事件？

> ID：14224657
> 
> 赞同：-2
> 
> 时间：2013-01-08T21:52:15.233
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery - 禁用点击](https://stackoverflow.com/questions/4589964/jquery-disable-click)

按下时如何防止按钮选择器的单击事件？如果有一些按钮。我想锁定按下按钮的事件。我尝试过：

```
event.stopImmediatePropagation(); 
event.stopPropagation(); 
event.preventDefault(); 
```

但它不起作用。

编辑：我没有提供代码，因为是主干代码，这不是该主题的主题。如果我在菜单中有一个按钮列表，并且我多次按下一个按钮，则与该按钮关联的代码将运行多次。如果按下其他按钮，我想锁定此单击事件并解锁它。

解决方案：

```
//disable
$("#button").bind('click', function() { return false; });

//enable
$("#button").unbind('click'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:54:26.587

`false`在您的 jQuery 处理程序中添加返回

```
$("#button").click( function () {
   return false;
} 
```

# openldap - openldap 将单用户密码设置为永不过期

> ID：14224664
> 
> 赞同：2
> 
> 时间：2013-01-08T21:52:56.483
> 
> 标签：openldap

是否可以使用 ldapmodify 将单个用户密码设置为永不过期？例如，我有一个系统用户，如果密码过期会导致系统失败，所以我需要让它永不过期，而所有其他用户的密码都过期了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:49:21.240

所以这是我所做的，创建了第二个密码策略，然后修改了 Manager 用户以使用新策略而不是默认策略。有关详细信息，请参阅[http://www.zytrax.com/books/ldap/ch6/ppolicy.html](http://www.zytrax.com/books/ldap/ch6/ppolicy.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:52:57.537

是的。通常。取决于系统、操作系统等（通常类似于将`pwdMaxAge`值设置为`0`使其永不过期。但是，如果对于 OpenLDAP 本身，它不一定与您的目标系统/操作系统用于其自己的密码到期日期的属性相同：也许那些存储在该系统/操作系统的 ldap 中的其他地方......

# c++ - 在matlab中完成i++的任何方法？

> ID：14224666
> 
> 赞同：5
> 
> 时间：2013-01-08T21:53:00.883
> 
> 标签：c++, matlab, variables

假设这`srcHoughMatrix`是一个 3 维矩阵：

代替

```
 if (currentRadius >= MINIMUM_ALLOWED_RADIUS )
    % we're using only radiuses that are 6 or above 
        currentHough = srcHoughMatrix(index,jindex,currentRadius);
        srcHoughMatrix(index,jindex,currentRadius) = currentHough + 1;
    end 
```

`1`如果条件为真，如何在不使用临时变量或不使用临时变量的情况下添加到每个单元格

```
srcHoughMatrix(index,jindex,currentRadius)  = srcHoughMatrix(index,jindex,currentRadius)  + 1; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T22:11:45.483

并不是说我不会按照@Jonas 的建议去做，但是使用[`operator`](http://www.mathworks.com/help/symbolic/mupad_ref/operator.html)呢？它用于定义新的用户定义的运算符符号或删除它们（尽管您将需要符号工具箱）。

`operator(symb, f, T, prio)`定义`symb`类型为`T`(Prefix | Postfix | Binary | Nary) 的新运算符符号，优先级`prio`。该函数`f`使用 new 运算符计算表达式。

给定运算符符号“++”，例如，使用评估函数`f`，解析器将根据运算符的类型构建以下表达式，其中：

**前缀**：输入 ++x 结果为 f(x)。

**后缀**：输入 x++ 结果为 f(x)。

**二进制**：输入 x ++ y ++ z 结果为 f(f(x, y), z)。

**Nary** : 输入 x ++ y ++ z 结果为 f(x, y, z))。

[在 matlab 的文档](http://www.mathworks.com/help/symbolic/mupad_ref/operator.html)中查看更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T22:03:00.150

Matlab 没有`++`运算符。

但是，如果您想缩短语句并避免使用临时变量，您至少可以编写

```
srcHoughMatrix(index,jindex,MINIMUM_ALLOWED_RADIUS:end) = ... 
    srcHoughMatrix(index,jindex,MINIMUM_ALLOWED_RADIUS:end) + 1; 
```

（假设它`currentRadius`采用从 1 到数组的第三维大小的所有值）。

# r - 将列表更改为 As.Numeric

> ID：14224667
> 
> 赞同：0
> 
> 时间：2013-01-08T21:53:02.233
> 
> 标签：r, list

我在互联网上找到了一些 (x,y) 表格格式的数据，我想将其仅用于 t 检验。我从网上复制粘贴的，在R上是这样的

```
20.79  194.5  23.89  200.9  28.49  209.5 
20.79  194.3  23.99  201.1  27.76  208.6 
22.40  197.9  24.02  201.4  29.04  210.7 
22.67  198.4  24.01  201.3  29.88  211.9 
23.15  199.4  25.14  203.6  30.06  212.2 
23.35  199.9  26.57  204.6 
```

我想把它变成一个data.frame，其中第一列（主要是20年代的值）是`x`，第二列（值190-220）是`y`。我玩过它，但目前我被一个列表困住了，当我尝试

```
 as.numeric(mylist) 
```

它给了我一条错误消息，内容为

```
"Error: (list) object cannot be coerced to type 'double' " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:08:32.020

有时读取数字元素`scan`并根据它们的顺序将它们配置为矩阵很有用。

```
> inp <- scan(text="20.79  194.5  23.89  200.9  28.49  209.5 
+ 20.79  194.3  23.99  201.1  27.76  208.6 
+ 22.40  197.9  24.02  201.4  29.04  210.7 
+ 22.67  198.4  24.01  201.3  29.88  211.9 
+ 23.15  199.4  25.14  203.6  30.06  212.2 
+ 23.35  199.9  26.57  204.6")
Read 34 items
> M.in <- matrix(inp, ncol=2, byrow=TRUE)
> M.in
       [,1]  [,2]
 [1,] 20.79 194.5
 [2,] 23.89 200.9
 [3,] 28.49 209.5
 [4,] 20.79 194.3
 [5,] 23.99 201.1
 [6,] 27.76 208.6
 [7,] 22.40 197.9
 [8,] 24.02 201.4
 [9,] 29.04 210.7
[10,] 22.67 198.4
[11,] 24.01 201.3
[12,] 29.88 211.9
[13,] 23.15 199.4
[14,] 25.14 203.6
[15,] 30.06 212.2
[16,] 23.35 199.9
[17,] 26.57 204.6 
```

现在你可以这样做：

```
> t.test(M.in[,1], M.in[,2])

    Welch Two Sample t-test

data:  M.in[, 1] and M.in[, 2] 
t = -112.7824, df = 24.18, p-value < 2.2e-16
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -181.1483 -174.6400 
sample estimates:
mean of x mean of y 
 25.05882 202.95294 
```

您可以用来`as.data.frame`转换`M.in`为数据框。）如果您确信这些被分成六个一组，您可以使用以下方法访问它们：

```
first6 <- M.in[ 1:6, ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:03:06.507

您可以直接将文本传递给`read.table`；`fill=NA`复杂的是，由于缺少值，您还需要。

```
d <- read.table(text="20.79  194.5  23.89  200.9  28.49  209.5 
20.79  194.3  23.99  201.1  27.76  208.6 
22.40  197.9  24.02  201.4  29.04  210.7 
22.67  198.4  24.01  201.3  29.88  211.9 
23.15  199.4  25.14  203.6  30.06  212.2 
23.35  199.9  26.57  204.6", fill=NA)
names(d)[1:2] <- c("x", "y")

#       x     y    V3    V4    V5    V6
# 1 20.79 194.5 23.89 200.9 28.49 209.5
# 2 20.79 194.3 23.99 201.1 27.76 208.6
# 3 22.40 197.9 24.02 201.4 29.04 210.7
# 4 22.67 198.4 24.01 201.3 29.88 211.9
# 5 23.15 199.4 25.14 203.6 30.06 212.2
# 6 23.35 199.9 26.57 204.6    NA    NA 
```

# php - PHP 语法错误，意外 $end

> ID：14224671
> 
> 赞同：0
> 
> 时间：2013-01-08T21:53:25.003
> 
> 标签：php

我是 PHP 新手，并试图弄清楚我正在使用的这段代码有什么问题。这是我的第一个 MySQL 查询，它似乎在最后一行窒息，抛出“语法错误，意外 $end”。我尝试使用 endwhile 而不是 } 没有解决它，所以我很难过。结束 ?> 标记似乎与起始 php 标记匹配，因此不确定缺少什么。这里是：

```
<?php
mysql_connect ("ratetable.db.1018.host.com", "ratetable","notmypassword") or die (mysql_error());
mysql_select_db ("rates");
$term = (int)$_POST['term'];
$sql = mysql_query("select * from 'rates' where 'mileage' <= 'term';
while ($row = mysql_fetch_array($sql)){
    echo '<br/> Mileage radius:'.$row[mileage];
    echo '<br/> Rate per mile:'.$row[ratepermile];
    echo '<br/><br/>';
}
?> 
```

我看到一篇帖子有人在 php.ini 中启用了短标签，我添加了它作为预防措施（当时还没有），但没有做任何事情。我对为什么它不喜欢最后一行一无所知。

谢谢你看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:54:43.717

以下行：

```
$sql = mysql_query("select * from 'rates' where 'mileage' <= 'term'; 
```

需要改为：

```
$sql = mysql_query("select * from 'rates' where 'mileage' <= 'term'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:54:10.813

查询后不要关闭括号。

```
$sql = mysql_query("select * from 'rates' where 'mileage' <= 'term'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:03:35.037

我猜您正在关注一些在线教程，但您需要注意您使用的教程的日期和声誉。这些函数即将被弃用，取而代之的是[mysqli](http://php.net/manual/en/book.mysqli.php)。它的语法几乎相同，但允许您首先准备语句以防止注入攻击。此外，您应该看看[PDO](http://php.net/manual/en/book.pdo.php)，因为它做同样的事情，但允许您使用不同的数据库类型。作为初学者，这是极不可能的，但熟悉它仍然非常重要。

最后，我建议使用像[Sublime Text 2](http://www.sublimetext.com/2)这样的优秀编辑器，它可以为您提供语法和错误突出显示，这样您以后就不太可能犯这样的错误。

最重要的是，请阅读[PHP 手册！](http://php.net/manual/en/index.php). 对于 PHP 开发人员来说，它是唯一最好的资源，如果您查看过它而不是一些旧教程，您会发现不再推荐使用 mysql_*。

# google-app-engine - 无法使用 SQLAlchemy 从开发服务器连接到 Google Cloud SQL

> ID：14224679
> 
> 赞同：3
> 
> 时间：2013-01-08T21:53:55.777
> 
> 标签：google-app-engine, sqlalchemy, google-cloud-sql

我从我的开发工作站使用 SQLAlchemy 0.7.9 连接到 Google Cloud SQL 失败（希望使用 create_all() 生成架构）。我无法通过以下错误：

```
sqlalchemy.exc.DBAPIError: (AssertionError) No api proxy found for service "rdbms" None None 
```

我能够使用 成功连接到数据库实例`google_sql.py instancename`，它最初打开了一个浏览器来授权连接（现在似乎已经缓存了授权，尽管我没有[https://developers.google](https://developers.google.com/cloud-sql/docs/commandline)`~/Library/Preferences/com.google.cloud.plist`的文件。 [com/cloud-sql/docs/commandline](https://developers.google.com/cloud-sql/docs/commandline)表明我应该）

这是我用来测试连接的简单应用程序：

```
from sqlalchemy import create_engine

engine = create_engine('mysql+gaerdbms:///myapp', connect_args={"instance":"test"})
connection = engine.connect() 
```

完整的堆栈跟踪可在此处获得 - [https://gist.github.com/4486641](https://gist.github.com/4486641)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T21:44:40.673

事实证明`mysql+gaerdbms:///`，SQLAlchemy 中的驱动程序仅设置为使用`rdbms_apiproxy`DBAPI，只能在从 Google App Engine 实例访问 Google Cloud SQL 时使用。我向 SQLAlchemy 提交了[一张票](http://goo.gl/NRaqi)以更新驱动程序，以便`rdbms_googleapi`在不在 Google App Engine 上时使用基于 OAuth 的驱动程序，就像App Engine SDK 中提供的[Django 驱动程序一样。](http://goo.gl/4ScgJ)rdbms_googleapi 也是使用的 DBAPI `google_sql.py`（远程 sql 控制台）。

更新后的方言预计将成为 0.7.10 和 0.8.0 版本的一部分，但在它们可用之前，您可以执行以下操作：

* * *

[1 - 将工单](http://goo.gl/NRaqi)中更新的方言复制到文件（例如 gaerdbms_dialect.py）

```
from sqlalchemy.dialects.mysql.mysqldb import MySQLDialect_mysqldb
from sqlalchemy.pool import NullPool
import re

"""Support for Google Cloud SQL on Google App Engine

Connecting
-----------

Connect string format::

    mysql+gaerdbms:///<dbname>?instance=<project:instance>

  # Example:
  create_engine('mysql+gaerdbms:///mydb?instance=myproject:instance1')
"""

class MySQLDialect_gaerdbms(MySQLDialect_mysqldb):

    @classmethod
    def dbapi(cls):
        from google.appengine.api import apiproxy_stub_map

        if apiproxy_stub_map.apiproxy.GetStub('rdbms'):
            from google.storage.speckle.python.api import rdbms_apiproxy
            return rdbms_apiproxy
        else:
            from google.storage.speckle.python.api import rdbms_googleapi
            return rdbms_googleapi

    @classmethod
    def get_pool_class(cls, url):
        # Cloud SQL connections die at any moment
        return NullPool

    def create_connect_args(self, url):
        opts = url.translate_connect_args()
        opts['dsn'] = ''  # unused but required to pass to rdbms.connect()
        opts['instance'] = url.query['instance']
        return [], opts

    def _extract_error_code(self, exception):
        match = re.compile(r"^(\d+):").match(str(exception))
        code = match.group(1)
        if code:
            return int(code)

dialect = MySQLDialect_gaerdbms 
```

* * *

2 - 注册自定义方言（您可以覆盖现有架构）

```
from sqlalchemy.dialects import registry
registry.register("mysql.gaerdbms", "application.database.gaerdbms_dialect", "MySQLDialect_gaerdbms") 
```

*注意：* 0.8 允许在当前进程内注册方言（如上图）。如果您运行的是旧版本的 SQLAlchemy，我建议升级到 0.8+，否则您需要为[此处](http://docs.sqlalchemy.org/ru/latest/core/connections.html#registering-new-dialects)概述的方言创建单独的安装。

* * *

3 - 更新您的`create_engine('...')`url，因为项目和实例现在作为 URL 的查询字符串的一部分提供

```
mysql+gaerdbms:///<dbname>?instance=<project:instance> 
```

例如：

```
create_engine('mysql+gaerdbms:///mydb?instance=myproject:instance1') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T07:22:07.200

我想我有一个工作示例脚本如下。你能尝试类似的事情，让我知道它是怎么回事吗？

但是（您可能已经意识到了），如果您的目标是在 Google Cloud SQL 实例上创建架构，也许您可​​以针对本地 mysql 服务器创建架构，使用 mysqldump 转储它，然后将架构导入 Google云 SQL。无论如何，使用本地 mysql 服务器进行开发非常方便。

```
from sqlalchemy import create_engine
from google.storage.speckle.python.api import rdbms as dbi_driver
from google.storage.speckle.python.api import rdbms_googleapi

INSTANCE = 'YOURPROJECT:YOURINSTANCE'
DATABASE = 'YOURDATABASE'

def get_connection():       
    return rdbms_googleapi.connect('', instance=INSTANCE, database=DATABASE)

def main():
    engine = create_engine(
        'mysql:///YOURPROJECT:YOURINSTANCE/YOURDATABASE',
        module=dbi_driver,
        creator=get_connection,
    )
    print engine.execute('SELECT 1').scalar()

if __name__ == '__main__':
    main() 
```

# jquery - 创建动态元素时做一些事情

> ID：14224680
> 
> 赞同：0
> 
> 时间：2013-01-08T21:53:56.103
> 
> 标签：jquery

通过单击事件，我将具有自定义属性的元素注入
`<div class="added" myValue="hello"></div>`到 DOM。

我写了一个通用函数：

```
$('.added').each(function(){
    console.log( $(this).attr('myValue') );
}); 
```

不工作。我以为`$.each()`可以处理动态元素？

**更新问题：**

我意识到使用`.each()`是错误的方法。但是如果我*不想将事件处理程序附加*到元素该怎么办。我只想自动对某个类名的任何元素进行处理，无论它们何时被添加到 DOM 中。似乎是一个常见的用例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:56:02.747

*   不，`each`不处理动态添加的元素，它仅适用于在创建（或修改）jQuery 对象时存在于 DOM 中的元素。
*   `.each`id 选择器上的函数没有任何意义，因为 id 在 DOM 中应该是唯一的。我建议阅读：[jQuery id selector works only for the first element](https://stackoverflow.com/q/11114622/601179)

您必须`each`在注入元素后调用，或使用[委托事件，如`on`](http://api.jquery.com/on/#direct-and-delegated-events)选择器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:56:10.320

`$.each()`将在您调用此方法时遍历与您的选择器匹配的元素。因此，如果您在将元素动态添加到 DOM 之前调用此方法，则您不可能期望此方法会返回一些您可能在未来某个事件中假设添加到 DOM 的元素。

因此，只需在将元素添加到 DOM**后**`$.each()`调用该函数。

 **您的代码似乎也存在不一致之处。您正在使用`$('#added')`只能返回**单个**元素的 id 选择器。是的，id 在整个 DOM 中必须是唯一的。因此，除非您有一些损坏的 HTML，否则调用`.each()`单个元素几乎没有任何意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:59:06.950

当你的点击事件发生时，在那里做你的“事情”。

```
$("#someelemt").click(function(){
    var el = $("<div class='added' myValue='hello'></div>").appendTo("#someotherelement");
    console.log(el.attr("myValue")); // <--- something
}); 
```

ID 必须是唯一的，所以我更改添加到一个类。

如果你想将两者分开，让你的点击事件触发一个事件，然后使用事件委托来监听它。

```
$("#someelemt").click(function(){
    var el = $("<div class='added' myValue='hello'></div>").appendTo("#someotherelement");
    el.trigger("added");
});
$(document).on("added","div",function(){
    console.log(this.getAttribute("myValue")); // <--- something
}); 
```

`$.each`不适用于将来的元素，仅适用于执行代码时存在的元素。

**更新问题更新**
如果不编写低效的代码，这根本是不可能的。它需要使用效率低下的DOMMutationEvents，被折旧并且并非在所有浏览器中都受支持，或者您可以使用效率低下的setInterval，因为它会不断地在dom中搜索新元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:56:16.413

您不能`id`在多个元素上使用相同的属性。您每次都需要不同的 ID。ID 选择器`#`只会选择所有这些元素中的*第一个*，这就是它看起来没有循环的原因。

尽管您确实应该更改其他元素的 id，但这实际上仍然有效：

```
$("[id=added]").each(... 
```**

# c# - 预加载资源程序集？

> ID：14224682
> 
> 赞同：0
> 
> 时间：2013-01-08T21:54:04.123
> 
> 标签：c#, wpf, xaml

我在一个窗口上有一个组合框，它使用外部资源程序集作为它的字体，它的运行速度非常慢（下拉 7-8 秒）。

```
<ComboBox ItemTemplate="{StaticResource LangComboboxItemTemplate}" 
x:Name="Lang_Cbx" Width="295" ItemsSource="{Binding Locales}" Height="32" 
FontFamily="/FontLibrary;component/Fonts/Font.CompositeFont#Font"
SelectedValue="{Binding CurrentLanguage}"  SelectedValuePath="LocaleId"  
/> 
```

当我删除“FontFamily”属性时，组合框按预期运行。

有没有更好的办法？可能要预加载资源程序集？

（使用VS2010 & .Net 4.0，资源组装约40MB。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:36:06.327

在 App.xaml 中：

```
<Application.Resources>
    <FontFamily x:Key="FontFamilyComboBox">/FontLibrary;component/Fonts/Font.CompositeFont#Font</FontFamily>
</Application.Resources> 
```

在视图中：

```
FontFamily="{DynamicResource FontFamilyComboBox}" 
```

这将导致在应用程序启动时加载资源（然后您将“支付”这 7-8 秒），但组合将按预期运行。

您也可以使用`StaticResource`代替，`DynamicResource`但如果程序集的加载速度太慢，则视图可能会在资源可用之前开始初始化并导致引发异常。

# android-ndk - GMAKE：强制所有 c/cpp 文件的先决条件规则依赖（android NDK）

> ID：14224686
> 
> 赞同：0
> 
> 时间：2013-01-08T21:54:19.973
> 
> 标签：android-ndk, makefile, gnu-make

如何为所有源文件 (c/cpp) 添加先决条件规则？如果整个 make 文件由我完成，那会很简单，但我使用的 android 构建系统对我隐藏了大部分内容。

我想这样做的原因：我添加了一个规则来生成我的头文件，该头文件包含在一些 c/cpp 文件中。只要已经生成了依赖项，它就可以正常工作。但是，对于一个干净的项目，在编译之前没有可用的依赖信息，因此 make 不会为一个干净的项目运行我的规则，因为它不知道某些 cpp 文件依赖于一个尚不存在的头文件. 这就是为什么我需要添加某种规则来确保我的先决条件规则在任何编译发生之前运行。

到目前为止，我这样做了：

```
include $(CLEAR_VARS)

.PHONY: ForceRule
MyHeader.h: ForceRule
ForceRule: CreateHeader.sh
    $(shell CreateHeader.sh MyHeader.h)

# below is standard android way to build shared lib from cpp files:
LOCAL_SRC_FILES: File1.cpp File2.cpp
LOCAL_PATH := $(CURDIR)

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:51:01.827

很难确定黑盒生成文件（我认为你的方法是错误的），但你可以试试这个：

```
MyHeader.h: CreateHeader.sh
    $(shell CreateHeader.sh MyHeader.h)

%.o: %.cpp MyHeader.h 
```

# c# - C# 中的流式传输、录制和转码

> ID：14224690
> 
> 赞同：1
> 
> 时间：2013-01-08T21:54:25.877
> 
> 标签：c#, video, streaming, transcode

我有兴趣开发一个能够抓取网络流、转码（最好是 JPEG2000 和 H.264）和/或记录它们并从文件流式传输的应用程序。

我已经查看了 ffmpeg 的 .net 包装器（它们大多不完整和/或已死）、Windows Media Foundation 和 VLC 插件，但在那里没有找到合适的解决方案。

您是否知道任何舒适、易于使用、最好是托管（或 COM）的解决方案来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:09:32.330

有几个选项：

1.  使用 FFmpeg，在本机代码中完成所有繁重的工作并将其包装在 ac# GUI 中
2.  使用 DirectShow/MF。有可以通过的 C# 直接显示包装器，但您可能仍然最好在本机代码中完成繁重的工作。
3.  查看 Expression Encoder SDK（它几乎可以做 GUI 客户端可以做的任何事情），它可能满足您的需求，具体取决于重新分发的要求。
4.  使用[流编码](http://www.streamcoders.com/)器（据我所知使用 IPP）或类似的东西，为你做 1 或 2

在我当前的项目中，我们使用的是 FFmpeg，因为 EE 不适用于我们的定价模型，并且用于捕获/转码的 .NET 产品都不是很好。

# html - 如何在不将 Html 更改为 sHtml 的情况下包含另一个代码（菜单栏或侧栏）

> ID：14224698
> 
> 赞同：2
> 
> 时间：2013-01-08T21:55:07.877
> 
> 标签：html, include, ssi

我想在许多网页中包含标题所以我想创建一个文件并包含在所有页面中。我发现一种方法是通过 SSI（服务器端包含），但它需要将网页的扩展从 Html 更改为 sHtml（由于某些限制，我不能这样做）。

有没有办法在不改变扩展名的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:57:54.673

上次我检查（几年前）时，使用 Apache，如果您使 html 文件可以通过 httpd 进程执行，它们将像 shtml 一样运行，而无需重命名它们。

我将这样做的安全隐患留给您自己评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:22:59.650

最好的方法是包含包含的 PHP 文件。SSI 运行良好，但您必须拥有 .shtml 文件。

不推荐的方法是使用 iframe 来包含标题。也可以使用 Javascript，但使用客户端包含并不好。jQuery 也将是客户端包含。

您可以设置 .html 文件以使用 SSI，但如果您有限制，这很可能是您无法克服的限制。托管服务器帐户在大多数情况下不允许这样做。

SSI 上的 Apache 服务器文档。 [http://httpd.apache.org/docs/current/howto/ssi.html](http://httpd.apache.org/docs/current/howto/ssi.html)

要在您的服务器上允许 SSI，您的 httpd.conf 文件或 .htaccess 文件中必须有以下指令：

Options +Includes 这告诉 Apache 您希望允许为 SSI 指令解析文件。请注意，大多数配置包含多个可以相互覆盖的选项指令。您可能需要将选项应用到您希望启用 SSI 的特定目录，以确保最后对其进行评估。

不只是为 SSI 指令解析任何文件。您必须告诉 Apache 应该解析哪些文件。有两种方法可以做到这一点。您可以使用以下指令告诉 Apache 解析具有特定文件扩展名的任何文件，例如 .shtml：

AddType text/html .shtml AddOutputFilter INCLUDES .shtml 这种方法的一个缺点是，如果您想将 SSI 指令添加到现有页面，则必须更改该页面的名称以及该页面的所有链接，以便给它一个 .shtml 扩展名，以便执行这些指令。

另一种方法是使用 XBitHack 指令：

**XBitHack 上的 XBitHack 告诉 Apache 为 SSI 指令解析文件，如果它们设置了执行位。因此，要将 SSI 指令添加到现有页面，而不必更改文件名，您只需使用 chmod 使文件可执行。**

chmod +x pagename.html 关于不该做什么的简短评论。您偶尔会看到有人建议您只告诉 Apache 为 SSI 解析所有 .html 文件，这样您就不必弄乱 .shtml 文件名。这些人可能没有听说过 XBitHack。要记住的是，通过这样做，您需要 Apache 读取它发送给客户端的每个文件，即使它们不包含任何 SSI 指令。**这可能会减慢速度，这不是一个好主意。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:18:38.020

您可以使用 jQuery/AJAX 方法

```
$.get('ajax/test.html', function(data) {
$('.result').html(data);
alert('Load was performed.');
}); 
```

参考：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# mysql - 触发mysql，2张表；如果数量 table1=<0 获取 id ，则删除 table2 中相同 id 的行

> ID：14224702
> 
> 赞同：0
> 
> 时间：2013-01-08T21:55:44.823
> 
> 标签：mysql, triggers

我有两张表**product**和**specific_price**

**产品**（id_product、id_supplier、id_manufacturer、数量）

**specific_price** (id_specific_price,id_product,id_shop,id_country)

我想做一个mysql触发器。

更新或插入的目标：

**当**product 表的 ' **quantity '** **<= 0 获取**id_product**然后**删除 **table** specific_price**具有相同 id_product**的**行**

 **```
CREATE TRIGGER  control_on_sale_with_stock AFTER UPDATE ON product 
FOR EACH ROW
BEGIN
IF NEW.quantity <'1' THEN
DELETE FROM specific_price WHERE id_product=NEW.id_product
END IF;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:04:38.163

```
DELIMITER //
CREATE TRIGGER  UPDATE_control_on_sale_with_stock AFTER UPDATE ON product 
FOR EACH ROW
BEGIN
IF NEW.quantity <'1' THEN
DELETE FROM specific_price WHERE id_product=NEW.id_product;
END IF;
END;
//

DELIMITER //
CREATE TRIGGER  INSERT_control_on_sale_with_stock AFTER INSERT ON product 
FOR EACH ROW
BEGIN
IF NEW.quantity <'1' THEN
DELETE FROM specific_price WHERE id_product=NEW.id_product;
END IF;
END;
// 
```

在 mysql 中，我们需要配置分隔符，这有点烦人，因为我不知道。

显然在 mysql 中我们不能在同一个触发器中插入和更新（我不确定）。**

# c# - 尝试作为单行 if 语句捕获

> ID：14224704
> 
> 赞同：1
> 
> 时间：2013-01-08T21:55:46.483
> 
> 标签：c#, if-statement, try-catch

我需要编写一个使用（单行 if）语句的语法，但我需要在某种意义上嵌套它：

（表达式 1）？

（如果表达式 2 抛出`ArgumentException`则`string.empty`else `expression2`）：`string.empty`

所以基本上我需要弄清楚在 c# 中的单行 if 语句中使用 try catch 的语法（单行，因为我需要在 linq to sql select 语句中使用它。）

单行 if 语句我的意思是使用三元运算符 if 语句而没有任何分号。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T22:00:13.870

你在找这样的东西吗？

```
(/*expression1*/)? (foo()? string.empty: /*expression2*/):string.empty 
```

与 foo 是：

```
public /*static?*/ bool foo()
{
    try
    {
        //do stuff
    }
    catch(ArgumentException)
    {
        return true
    }
    catch
    {
        return false
    }
    return false;
} 
```

至于将 Try/Catch 嵌入到 Linq to Sql 语句中......好吧，我们只是说在这种情况下我会尝试重新考虑我的设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T22:09:05.153

这是一个有趣的问题，因为它会让您问：代码块需要标记为“单行”的标准应该是什么？

显然，写 8 行代码然后去掉换行符并不会变成一行代码。

这个怎么样：

```
 public string Expression2()
    {
        return "One does not write maintainable code this way";
    }

    [Test]
    public void TryCatchAsSingleLine()
    {
        bool expr1 = true;

         // Would you say this is one line?
        string result = expr1 
                            ? (new Func<string>(() => 
                                              { 
                                                 try 
                                                 { 
                                                    return Expression2(); 
                                                 } 
                                                 catch 
                                                 { 
                                                    return string.Empty; 
                                                 } 
                                               }
                                               )
                             )() 
                             : string.Empty;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:02:34.753

将此用作单线：

```
Exception e=null; try { expr1; } catch (Exception ex) {e = ex;} if (e is ArgumentException) { expression2; } else { do whatever or not sure what you want to do with string.empty; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T22:01:23.313

尝试使用一两个方法调用。

```
class Test
{
    static void Main(string[] args)
    {
        if (ExpressionOne() && ExpressionTwo() != string.Empty) DoSomething();
    }

    static bool ExpressionOne()
    {
        // check something
    }

    static string ExpressionTwo()
    {
        try
        {
            return ThisMayThrowArgumentExceptionOrReturnAString();
        }
        catch (ArgumentException)
        {
            return string.Empty;
        }
    }

    // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T22:10:47.303

C# 不是面向行的，因此您可以在一行上编写所有内容，但生成的代码并不总是可读和可维护的。

我会为可能失败的代码编写一个单独的方法。

```
public string GetResultSafely()
{
    try {
        // Possibly failing
        return ReadStringFromExternalResource();
    } catch() {
       return String.Empty;
    }
} 
```

进而

```
result = expression1 ? GetResultSafely() : GetAnotherResult(); 
```

* * *

请注意，抛出异常不应该是标准的做事方式。如果可能，请避免异常。

坏的：

```
try {
    result = x / y;
} catch {
    Console.WriteLine("Division by zero!");
} 
```

好的：

```
if (y == 0) {
    Console.WriteLine("Division by zero!");
} else {
    result = x / y;
} 
```

但是，在某些情况下，例外是不可避免的。通常在访问外部资源时。

# android - Vimeo 嵌入Phonegap + Android 4.2

> ID：14224708
> 
> 赞同：2
> 
> 时间：2013-01-08T21:55:57.973
> 
> 标签：android, cordova, video, vimeo

我正在使用 Phonegap 2.1.0 和 jQuery Mobile 1.2.0 开发适用于 iOS 和 Android 的应用程序。iOS版本已经完成，但我们正在尝试Android版本的一些问题......

应用程序部分之一是视频列表，它们在弹出窗口内的 iframe 中打开，在 iOS 中运行良好，但如果我们在 Android 设备（带有 Android 4.2 的 Nexus 7）中尝试此操作，我们只会得到第一个屏幕截图，当我们按播放只播放声音，不播放视频。我们尝试在 webview 中使用 childbrowser 打开 iframe url，结果是一样的。只有当我们在外部浏览器（openExternal）中打开它时，它似乎才能工作。

我想可能是 Vimeo 的播放器问题，但是当我们尝试播放视频时，我们在日志中看到以下错误：

01-08 22:45:12.084：E/libEGL(26580)：在没有当前上下文的情况下调用 OpenGL ES API（每个线程记录一次）

01-08 22:45:12.094: D/MediaPlayer(26580): 无法在客户端打开文件，正在尝试服务器端

我一直在寻找几个小时而没有成功，所以我希望有人可能知道如何让它工作......：/

对于 iFrame，我们使用 Vimeo 从每个视频的嵌入部分提供给我们的代码（我不能在此处发布它们，因为它们是私有的），并且... Vimeo 使视频与移动设备兼容的选项也被标记。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-03T22:47:34.930

**HTML**

```
<head>
    <meta charset="utf-8">

    <!--
     | WARNING:
     | For iOS 7, remove the width=device-width and height=device-height attributes.
     | @see https://issues.apache.org/jira/browse/CB-4323
     '-->
    <meta name="viewport" content="width=device-width,height=device-height,target-densitydpi=device-dpi,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1,minimal-ui">

</head>
<body>
    <div class="close">
        <a href="/cordova:close">fechar</a>
    </div>

    <script id="tmpl-player" type="text/template">
        <iframe id="video" src="https://player.vimeo.com/video/[[video]]?autoplay=1&autopause=1&byline=0&badge=0&title=0&portrait=1&color=333&loop=0" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    </script>

    <script>
        var bodyEl = document.querySelector('body');
        var tmplPlayerEl = window.document.getElementById('tmpl-player');
        var tmplPlayer = template(tmplPlayerEl.innerHTML, getURLParams());

        function getURLParams() {
            var query = location.search.substr(1);
            var result = {};
            query.split('&').forEach(function(part) {
                var item = part.split('=');
                result[item[0]] = decodeURIComponent(item[1]);
            });
            return result;
        }

        function template(raw, data, keep404) {
            return raw.replace(/\[{2,}[(\s\uFEFF\xA0a-zA-Z0-9_\./]+\]{2,}/gi, function(match, value) {
                value = match.replace(/^\[{2,}|\s+|\]{2,}$/g, '');
                return typeof data[value] !== 'undefined' ? data[value] : (keep404 ? match : '');
            });
        }

        var newNode = window.document.createElement('div');
        newNode.innerHTML = tmplPlayer;
        bodyEl.appendChild(newNode);
    </script>
</body> 
```

**JAVASCRIPT：**

```
var fsVideo = window.open('vimeo.html?video='+video, '_blank', 'location=no,zoom=no');
fsVideo.addEventListener('loaderror', onLoadError);
fsVideo.addEventListener('loadstop', onLoadStop);
fsVideo.addEventListener('exit', onExit);
function onLoadError(evt){
    fsVideo.close();
}
function onLoadStop(evt){
    evt.url.match('cordova:close') && fsVideo.close();
}
function onExit(evt){
    fsVideo.removeEventListener('loaderror', onLoadError);
    fsVideo.removeEventListener('loadstop', onLoadStop);
    fsVideo.removeEventListener('exit', onExit);
    fsVideo = null;
} 
```

不要忘记[https://github.com/apache/cordova-plugin-inappbrowser](https://github.com/apache/cordova-plugin-inappbrowser)

# api - 基于 HTTP 动词的 WSO2 API Manager 授权

> ID：14224714
> 
> 赞同：1
> 
> 时间：2013-01-08T21:56:08.667
> 
> 标签：api, rest, wso2, wso2-am, httpverbs

我正在评估 WSO2 API Manager 来组织一些企业 API。

是否可以基于资源和 HTTP 动词的组合来授权用户？

为了清楚起见，我需要这样的东西：

> 具有 Access_Token_1 的 user1，可以 POST、PUT 和 DELETE 到资源 /myresource

然而

> 具有 Access_Token_2 的 user2，只能对同一资源 /myresource 执行 GET

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:55:33.037

我们需要在 API Gateway 中有 Entitlement Mediator。

[http://wso2.org/library/articles/2011/08/finegrained-authorization-restful-services-xacml](http://wso2.org/library/articles/2011/08/finegrained-authorization-restful-services-xacml)

谢谢和问候，-Prabath

# api - 我怎样才能 event_search_max？

> ID：14224721
> 
> 赞同：0
> 
> 时间：2013-01-08T21:56:23.673
> 
> 标签：api, max, eventbrite

我正在尝试从 Eventbrite 获取所有事件，但问题是我不能有 100 个限制。有没有其他方法可以得到它？任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:24:24.977

您需要使用 page 参数按顺序获取每个页面。根据返回的结果，您知道总共有多少个事件，因此您也知道应该有多少页 100 个事件。

# python - python mysql execute() 非常慢

> ID：14224729
> 
> 赞同：4
> 
> 时间：2013-01-08T21:56:47.553
> 
> 标签：python, mysql

我在我的应用程序中发现`execute()`了 mysql 功能的缓慢。我制作了一个简单的 sql 查询来说明这个问题：

```
SELECT * FROM `cid444_agg_big` c WHERE 1 
```

.

```
>>> import MySQLdb as mdb
>>> import time;
>>> 
>>> dbconn =  mdb.connect('localhost','*****','*****','*****');
>>> cursorconn = dbconn.cursor()
>>> 
>>> sql="SELECT * FROM `cid444_agg_big` c WHERE 1";
>>> 
>>> startstart=time.time();
>>> cursorconn.execute(sql);
21600L #returned 21600 records
>>> print time.time()-startstart, "for execute()"
2.86254501343 for execute() #why does this take so long?
>>> 
>>> startstart=time.time();
>>> rows = cursorconn.fetchall()
>>> print time.time()-startstart, "for fetchall()"
0.0021288394928 for fetchall() #this is very fast, no problem with fetchall() 
```

在 mysql shell 中运行这个查询，产生 0.27 秒，或者快 10 倍！！！

我唯一的想法是返回数据的大小。这将返回 21600 个“宽”行。所以有很多数据被发送到python。数据库是本地主机，因此没有网络延迟。

为什么这需要这么长时间？

**更新更多信息**

我在php中写了一个类似的脚本：

```
$c = mysql_connect ( 'localhost', '*****', '****', true );
mysql_select_db ( 'cachedata', $c );

$time_start = microtime_float();
$sql="SELECT * FROM `cid444_agg_big` c WHERE 1";
$q=mysql_query($sql);$c=0;
while($r=mysql_fetch_array($q))
$c++;//do something?
echo "Did ".$c." loops in ".(microtime_float() - $time_start)." seconds\n";

function microtime_float(){//function taken from php.net
  list($usec, $sec) = explode(" ", microtime());
  return ((float)$usec + (float)$sec);
} 
```

这打印：

```
Did 21600 loops in 0.56120800971985 seconds 
```

这会循环所有数据，而不是一次全部检索。PHP 似乎比 python 版本快**6 倍**....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:10:56.493

[默认的 MySQLdb 游标](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.cursors-module.html)将完整的结果集获取到客户端`execute`，并且`fetchall()`只会将数据从内存复制到内存。

如果要将结果集存储在服务器上并按需获取，则应改用[SSCursor](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.cursors.SSCursor-class.html)。

> [**Cursor：**](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.cursors.Cursor-class.html)
> 这是标准的 Cursor 类，它将行作为元组返回并将结果集存储在客户端中。
> 
> [**SSCursor：**](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.cursors.SSCursor-class.html)
> 这是一个 Cursor 类，它以元组的形式返回行并将结果集存储在服务器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-09T20:37:10.623

非常古老的讨论，但我尝试添加我的 2 美分。脚本必须按时间戳在多行中进行选择。在标准情况下（id 索引、名称、时间戳）非常慢（我没有检查但几分钟，很多分钟）。我也为时间戳添加了一个索引。查询时间不到 10 秒。好多了。

```
"ALTER TABLE BTC ADD INDEX(timestamp)" 
```

我希望能提供帮助。

# css - 在什么情况下 flex-shrink 应用于 flex 元素，它是如何工作的？

> ID：14224732
> 
> 赞同：40
> 
> 时间：2013-01-08T21:57:06.997
> 
> 标签：css, flexbox

我玩过这个漂亮的[CSS Flexbox 演示页面](http://demo.agektmr.com/flexbox/)，我理解了大部分概念，但是我无法`flex-shrink`在工作中看到。无论我在那里应用什么设置，我在页面上都看不到任何区别。

从[规格](http://www.w3.org/TR/css3-flexbox/#flex-shrink-factor)：

> <'弹性增长'>
> 
> 这个组件设置了'flex-grow'并指定了弹性增长因子，它决定了当分配正的可用空间时弹性项目相对于弹性容器中的其余弹性项目将增长多少。省略时，设置为“1”。
> 
> <'弹性收缩'>
> 
> 这个组件设置了'flex-shrink'并指定了弹性收缩因子，它决定了当分配负的可用空间时，弹性项目相对于弹性容器中的其余弹性项目将收缩多少。省略时，设置为“1”。分配负空间时，flex 收缩因子乘以 flex 基数。

在什么情况下会`flex-shrink`被应用（即当负空间分布时）？我已经尝试自定义页面，在 flexbox 元素上设置宽度和其中元素的（最小）宽度以进行溢出，但似乎不是所描述的情况。

它已经完全支持了吗？

作为一种解决方案，链接演示中的一组选项或类似 JSFiddle 的现场演示将受到高度赞赏。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-08T22:19:26.713

为了看到`flex-shrink`实际效果，您需要能够使其容器更小。

HTML：

```
<div class="container">
  <div class="child one">
    Child One
  </div>

  <div class="child two">
    Child Two
  </div>
</div> 
```

CSS：

```
div {
  border: 1px solid;
}

.container {
  display: flex;
}

.child.one {
  flex: 1 1 10em;
  color: green;
}

.child.two {
  flex: 2 2 10em;
  color: purple;
} 
```

*   [http://jsfiddle.net/GyXxT/](http://jsfiddle.net/GyXxT/)（无前缀——Opera 或 Firefox 每晚构建）
*   [http://jsfiddle.net/GyXxT/1/](http://jsfiddle.net/GyXxT/1/) (webkit)

在此示例中，理想情况下，两个子元素都希望为 10em 宽。如果父元素的宽度大于 20em，则第二个子元素占用的剩余空间是第一个子元素的两倍，使其看起来更大。如果父元素的宽度小于 20em，那么第二个子元素的剃须量将是第一个子元素的两倍，使其看起来更小。

当前的 flexbox 支持：Opera（无前缀）、Chrome（有前缀）、IE10（有前缀，但使用稍微不同的属性名称/值）。Firefox 目前使用 2009 年的旧规范（带前缀），但新规范现在应该在实验版本中可用（不带前缀）。

# python - 数据建模、Flask-SQLAlchemy 和插件

> ID：14224734
> 
> 赞同：2
> 
> 时间：2013-01-08T21:57:13.550
> 
> 标签：python, plugins, sqlalchemy, flask, flask-sqlalchemy

我在一个基于 Flask 和 Flask-SQLAlchemy 和 MySQL 的网站上工作。我有一堆提要，每个提要都有一些数据，但它需要一个函数。

起初，我使用 MySQL-python（带有原始 SQL）来存储数据，并且提要位于插件系统上，因此每个提要都覆盖 update() 函数以按其方式导入数据。

现在我改为使用 Flask-SQLAlchemy 并将 Feed 模型添加到数据库中，因为它有助于 SQLAlchemy ORM，但我被困在如何处理`update()`函数上？

1.  保持插件系统与数据库模型并行，但我认为这是不切实际/无效的。
2.  扩展模型类，我不确定这是否可能，例如 FeedOne(Feed) 将仅代表 item(name="one")。
3.  通过 using语句使`update()`函数处理所有提要。`if self.name == ""`

添加了一些代码位。

饲料型号：

```
class Feed(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(255))
    datapieces = db.relationship('Datapiece', backref = 'feed', lazy = 'dynamic') 
```

`update()`功能

```
def update(self):
    data = parsedata(self.data_source)

    for item in data.items:
        new_datapiece = Datapiece(feed=self.id, name=item.name, value=item.value)
        db.session.add(new_datapiece)

    db.session.commit() 
```

我希望在选项 2 中实现的是：

```
for feed in Feed.query.all():
    feed.update() 
```

并且每个提要都将使用自己的类`update()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:48:12.203

扩展类并添加 .update() 方法正是它应该适用于选项 2 的方式。我没有看到任何问题（而且我一直在使用 flask/sqlalchemy 的这种编码风格） .

如果您（可以）省略动态惰性属性，您还可以执行以下操作：

```
self.datapieces.append(new_datapiece) 
```

在您的 Feed 的更新功能中。

# c++ - 如何在windows下使用c++在多个扬声器上播放声音？

> ID：14224739
> 
> 赞同：1
> 
> 时间：2013-01-08T21:57:30.150
> 
> 标签：c++, windows, audio, media

我有一个标准扬声器和一个蓝牙扬声器。我想在 windows xp 或 windows 7 下同时在两个扬声器上播放一个简单的 wav 文件。有什么方法可以使用 c++ 来实现吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:29:37.070

还有一些库可以一次播放多个声音。irrKlang 就是其中之一。

*   [http://www.ambiera.com/irrklang/](http://www.ambiera.com/irrklang/)

如果你想开始，它有很好的样本。

# php - 动态修改静态变量变量数组

> ID：14224741
> 
> 赞同：0
> 
> 时间：2013-01-08T21:57:36.250
> 
> 标签：php, class, static, variable-variables

类似于这个问题 [Dynamically call a static variable (array)](https://stackoverflow.com/questions/1212171/dynamically-call-a-static-variable-array) ，但用于写入变量。

我试图在我的构造函数中初始化几个静态数组，但不知道如何动态编码它们的名称。

当我尝试这个时：

```
class MyClass {
    public static $something1 = array();
    public static $something2 = array();

    function __construct() {
        for( $i = 1; $i <= 2; $i++ ){
            $arr = "something{$dynamic}";
            self::$$arr[] = "a new element";
        }
    }
} 
```

即使我不调用构造函数，我也会收到此错误：

```
Fatal error: Cannot use [] for reading 
```

有什么方法可以在不使用 eval 的情况下完成此操作？我正在使用 PHP 5.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:02:20.923

试试这个：

```
self::${$arr}[] = 'a new element'; 
```

大括号为`$`

# java - 内部视图上的自定义列表视图 onclicklistener

> ID：14224744
> 
> 赞同：0
> 
> 时间：2013-01-08T21:57:39.967
> 
> 标签：java, android, xml

我目前创建了一个需要自定义列表视图的应用程序。我的 listview 的一切都很好，但现在我需要知道，如何将 onClickListener 设置为在我的 list_row.xml 中定义的视图。我只想要整个项目上的 onclicklistener，以及在这个内部视图上。我附上一张图片来证明我的问题，因为它很难描述 >.< 图片（dropbox）：[https ://www.dropbox.com/s/72xdxuwz47vl7s5/problem.png](https://www.dropbox.com/s/72xdxuwz47vl7s5/problem.png)

我需要一个在单击 [我的问题] 指示的视图时调用的函数。它是一个用图像填充的 ImageView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:05:38.177

要在每一行中设置一个 OnClickListener，只需扩展您当前的 Adapter 并覆盖该`getView()`方法。在那里，您可以像往常一样定义特定的侦听器。

Romain Guy在此[Google Talk中对此进行了详细讨论。](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:11:03.690

这是我之前做过的事情，看起来与您想要完成的事情非常相似。

首先，您`onItemClickListener`为您的`ListView`. 这将处理标准列表项点击（即，在列表项内部但在您关注的内部视图区域之外的点击）。您可以在代码中的多个位置执行此操作，但这`onCreate()`是一个常见的位置。

例子：

```
mListView.setOnItemClickListener( new OnItemClickListener() {
  @Override
  public void onItemClick( AdapterView<?> parent, View view, int position, long id ) {
    // Handle standard list item tap
    // ...
  }
} ); 
```

然后，您可以`onClickListener`在适配器的方法中声明内部视图所需的任何内容，`getView()`以处理内部视图上的单击/点击事件。

例子：

```
@Override
public View getView( int position, View convertView, ViewGroup parent ) {
  LinearLayout itemView;

  // Inflate layout XML, etc.
  // ...

  // Find subviews in layout
  ImageView innerView = (ImageView) itemView.findViewById( R.id.myInnerViewId );

  // ...

  // Set up onClickListener for inner view
  innerView.setOnClickListener( new OnClickListener() {
    @Override
    public void onClick( View v ) {
      // Handle inner view tap
      // ...
    }
  } );

  // ...
} 
```

# hook - Win7/8 DWM 绘制挂钩

> ID：14224747
> 
> 赞同：6
> 
> 时间：2013-01-08T21:57:51.477
> 
> 标签：hook, code-injection, direct3d, protection, dwm

我正在尝试为桌面窗口管理器开发某些扩展。我选择了DLL注入和函数挂钩的方法。它应该在 Windows 7 和 Windows 8 中工作。

我成功地将我的 DLL 注入 dwm.exe 进程并挂钩 Direct3D 设备创建（Win7 上的 D3D10CreateDevice1 和 Win8 上的 D3D11CreateDevice/D3D11Device::GetImmediateContext）。但是，我在挂钩绘图程序（Draw/DrawIndexed/etc.）时遇到问题。

每当我用指向我的函数的指针替换 vtable 中的指针时，它们会在一段时间内恢复为原始指针。可能在 DWM/Direct3D 中有一些钩子保护？？？我尝试创建后台线程来替换仍然存在的指针。它适用于 Win7，但很少在 Win8 上运行（似乎指针在那里恢复得更快）

```
void thread(void* _device)
{
    ID3D10Device1* device = (ID3D10Device1*)_device;
    while(threadRunning)
    {
        if(device->lpVtbl->Draw != My_ID3D10Device1_Draw)
        {
            DX_METHOD_HOOK(device, ID3D10Device1, Draw);
            DX_METHOD_HOOK(device, ID3D10Device1, DrawIndexed);
        }
    }
} 
```

有没有人有过钩子的经验，他能给我一些帮助吗？非常感谢！

# php - 访客与登录用户的导航菜单 WP 样式

> ID：14224749
> 
> 赞同：0
> 
> 时间：2013-01-08T21:57:55.737
> 
> 标签：php, html, css, wordpress, plugins

我为教会创建的 Wordpress 网站有问题。他们想要一个只有他们的成员才能看到的单独部分。我安装了插件 WP-Members 并创建了两个菜单，一个用于来宾（未登录用户）和一个用于用户（登录用户）。我在 header.php 中加入了一些代码，告诉它显示登录用户的一个菜单和未登录用户的另一个菜单。到目前为止，一切都很好。

问题是当用户登录时样式会发生变化。未登录的用户会以应有的方式看到导航菜单。当用户登录时，子指示器消失，自动宽度不起作用，导航菜单下方的滑块也神奇地停止工作。这让我相信这可能是两个插件的冲突，或者类似的东西

我用来向客人显示一个菜单和用户另一个菜单的代码：

```
<div id="navigation" class="clearfix">
  <?php
    if ( is_user_logged_in() ) {
      wp_nav_menu( array(
        'theme_location' => 'main nav',
        'menu' => 'logged-in-menu',
        'sort_column' => 'menu_order',
        'menu_class' => 'sf-menu sf-js-enabled sf-shadow',
        'fallback_cb' => 'default_menu'
    ));
    } else {
      wp_nav_menu( array(
       'theme_location' => 'main nav',
       'menu' => 'logged-out-menu',
       'sort_column' => 'menu_order',
       'menu_class' => 'sf-menu sf-js-enabled sf-shadow',
       'fallback_cb' => 'default_menu'
    ));
    }   
   ?>
</div> 
```

该网站是 www.vineyardkollumerzwaag.nl/nieuw/

用户名：test 密码：test

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:24:55.020

登录时，我看到来自脚本 /wp-content/mu-plugins/notes/admin-bar-rest.js 的 JavaScript 错误 - 错误是对象没有“on”方法

仔细观察，您将包含 jQuery 版本 1.6.2，.on() 在 1.7 版本中添加到 jQuery - 尝试将您网站中包含的 jQuery 版本更新到 1.7+，这应该可以解决问题

# .net - Linq 缺月

> ID：14224751
> 
> 赞同：1
> 
> 时间：2013-01-08T21:58:15.243
> 
> 标签：.net, linq

我有一个按月分组价格的 linq 效果很好，但我看不到没有数据的月份。我的期望如果一个月没有数据价格应该是0。

```
List<decimal> osman1 = osman.GroupBy(i => new 
{ 
    Field1 = i.Field<DateTime>("CreateDate").Month 
})
.Select(group => group.Sum(i => Convert.ToDecimal(i["Price"])))
.ToList(); 
```

结果 osman1 是

> {221,103,352}

我需要的是

> {0,0,0,0,0,0,0,221,0,103,352,0}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:05:00.473

最简单的方法可能是进行组加入：

```
var totalsByMonth = Enumerable.Range(1, 12)
      .GroupJoin(osman,
                 month => month,
                 record => record.Field<DateTime>("CreateDate").Month,
                 (month, records) => records.Sum(r => r.Field<decimal>("Price")))
      .ToList(); 
```

（我使用过`Field<decimal>`而不是`Convert.ToDecimal`我认为通常更清洁的方法；当然，如果需要，请更改它。）

# c# - 如何使用选择 C# 填充组合框

> ID：14224752
> 
> 赞同：1
> 
> 时间：2013-01-08T21:58:15.660
> 
> 标签：c#

我正在使用下一个代码。

```
 public void MostrarCombobox(ComboBox cmbIDart)
   {
       Command = "SELECT idArtigoAvaliar FROM dbo.PorAvaliasao WHERE (avaliado = 0) AND (idAutor ='" + Autor.id2 + "')";

       SqlCommand Comm1 = new SqlCommand(Command, Conn);
       SqlDataAdapter data = new SqlDataAdapter(Comm1);

       SqlCommand sqlCommand = new SqlCommand();

       using (Conn)
       {
           sqlCommand = Conn.CreateCommand();

           sqlCommand.CommandText = Command;

           SqlDataAdapter sda = new SqlDataAdapter(sqlCommand.CommandText, Conn);

           SqlCommandBuilder scb = new SqlCommandBuilder(sda);

           //Criar uma tabela para receber os dados
           DataTable dTable = new DataTable();

           //Preencher a tabela
           sda.Fill(dTable);

           BindingSource bSource = new BindingSource();
           bSource.DataSource = dTable;
           cmbIDart.DataSource = bSource;

           Conn.Close();
       }

   } 
```

我的问题是，当我开始调用 ComboBox 时，它会显示`System.Data...`并且我希望它们显示值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:03:21.710

我认为在您的组合框中，行看起来像显示的那样；

```
System.Data.DataRowView
System.Data.DataRowView
System.Data.DataRowView
System.Data.DataRowView
System.Data.DataRowView 
```

您需要设置组合框[`DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)和[`ValueMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)属性。

如果这不能解决您的问题，请尝试动态使事情更清晰。

```
Combobox1.Items.Clear();

string Command = "SELECT idArtigoAvaliar FROM dbo.PorAvaliasao WHERE (avaliado = 0) AND (idAutor ='" + Autor.id2 + "')";

SqlCommand cmd = new SqlCommand(Command, Conn);
cmd.CommandText = Command;

SqlDataReader dr = cmd.ExecuteReader();
while (dr.Read())
{
   Combobox1.Items.Add(dr["idArtigoAvaliar"].ToString());
} 
```

# java - 静音按钮状态

> ID：14224755
> 
> 赞同：1
> 
> 时间：2013-01-08T21:58:35.983
> 
> 标签：java, android

我的 Android 应用程序上有一个静音按钮。我希望它有 2 个状态：1\. 声音开启 2\. 声音关闭

每个州都有不同的背景：

![声音开启](../Images/f3893659fc30197bd71905c327de6757.png)

![关闭声音](../Images/0273e1d932c85fcfa87ecfee42e99876.png)

因此，当按下时，我希望显示并保持声音关闭图像。当第二次按下时，我希望再次显示 Sound On 图像。

到目前为止，这是我的代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_pressed="true" android:drawable="@drawable/soundoff"></item>
<item android:state_checked="true" android:drawable="@drawable/soundoff"></item>
<item android:drawable="@drawable/soundon"></item>

</selector> 
```

我遇到的问题是，尽管在选择按钮时背景会发生变化，但我希望保持该背景直到下一次选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:18:13.567

好的，我已经解决了这个问题。我没有参考可绘制的 xml 来修改按钮状态，而是在类本身中编写了以下代码，现在给出了所需的结果。

```
dmute.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
      if(!mutestatus){
        mutestatus = true;
        dmute.setBackgroundResource(R.drawable.soundoff);
      }
      else {
        mutestatus = false;
        dmute.setBackgroundResource(R.drawable.soundon);
      }
  }}); 
```

感谢所有帮助过的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:09:56.150

您确定按钮的选中状态正在更改吗？另外我认为你的选择器应该看起来更像这样。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_pressed="true" android:state_checked="false" android:drawable="@drawable/soundoff_pressed"></item>
<item android:state_pressed="true" android:state_checked="true" android:drawable="@drawable/soundon_pressed"></item>
<item android:state_pressed="false" android:state_checked="false" android:drawable="@drawable/soundoff"></item>
<item android:state_pressed="false" android:state_checked="true" android:drawable="@drawable/soundon"></item> 
```

# java - Window add Java to Path

> ID：14224756
> 
> 赞同：11
> 
> 时间：2013-01-08T21:58:39.980
> 
> 标签：java, windows, path

I used to use My Computer -> Environment variables to set up PATH for Java, but where can I find the same in Windows 8?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-08T22:00:30.680

Click:

> Windows-Key

Type: Control Panel

In the control panel search box, enter:

> path

Select

> Edit environment variables for your account

or

> Edit the system environment variables

as needed.

The environment variable dialog itself is very similar to the one under previous versions of Windows.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-07T08:33:26.113

通过简单的两个步骤使用命令提示符设置环境变量：

windows SET 命令示例：

**步骤 1.**打印 PATH 环境变量

```
C:\>echo %PATH%
C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Program Files\nodejs\; 
```

**Step 2.**添加一个变量到路径（例如：Java SDK）

```
// => Path for JDK 8 - C:\Program Files\Java\jdk1.8.0_11\bin
C:\>set PATH=%PATH%;C:\Program Files\Java\jdk1.8.0_11\bin 
```

**验证更改**

```
C:\>echo %PATH%
C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Program Files\nodejs\;
C:\ProgramFiles\Java\jdk1.8.0_11\bin 
```

# c# - Trying to use DirSync on a specific OU in Active Directory

> ID：14224757
> 
> 赞同：1
> 
> 时间：2013-01-08T21:58:44.470
> 
> 标签：c#, active-directory

I am trying to use DirSync to get all changes to users in a particular OU (using C#). From what I've read, the root of the search must be the root of the directory partition, so I'm initializing my DirectoryEntry using the path:

```
string strUserDirPath = "LDAP://xxx.yyy.zzz/DC=xxx,DC=yyy,DC=zzz"; 
```

and then later I'm trying to set a filter that will give me only users in a specific OU.

The problem is, whenever I try to add the OU to the filter, it filters everything out. If I say:

```
srch.Filter = "(&(objectClass=user)(objectcategory=person))"; 
```

that gives me all users.

The full path to the OU I want is:

```
"OU=aaa,OU=bbb,OU=ccc,OU=ddd,OU=eee,DC=xxx,DC=yyy,DC=zzz" 
```

I would like to sync only users that match this complete path.

I have tried adding several things to my filter to do this, but it always ends up filtering out ALL records. I have tried the following filters to no avail:

```
"(&(objectClass=user)(objectcategory=person)(OU=aaa))"
"(&(objectClass=user)(objectcategory=person)(OU=aaa,OU=bbb,OU=ccc,OU=ddd,OU=eee))"
"(&(objectClass=user)(objectcategory=person)(OU=aaa,OU=bbb,OU=ccc,OU=ddd,OU=eee,DC=xxx,DC=yyy,DC=zzz))"
"(&(objectClass=user)(objectcategory=person)(memberof=OU=aaa,OU=bbb,OU=ccc,OU=ddd,OU=eee,DC=xxx,DC=yyy,DC=zzz))"
"(&(objectClass=user)(objectcategory=person)(memberOf:1.2.840.113556.1.4.1941:=OU=aaa,OU=bbb,OU=ccc,OU=ddd,OU=eee,DC=xxx,DC=yyy,DC=zzz))" 
```

I feel like I'm probably missing something very obvious, but can't quite get it.

Can anyone offer any solutions? As a last resort, I'm thinking of just getting all users, and then programmatically filtering out the ones I don’t need. Seems clunky, but if it's what I gotta do, I will.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T06:43:56.483

不可能...请在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677626%28v=vs.85%29.aspx)参考 MSDN (http://msdn.microsoft.com/en-us/library/windows/desktop/ms677626(v=vs.85).aspx)

> “DirSync 搜索的基础必须是目录分区的根，可以是域分区、配置分区或架构分区”

# windows-phone-7 - 使用 caliburn.micro 旋转项目

> ID：14224758
> 
> 赞同：0
> 
> 时间：2013-01-08T21:58:47.653
> 
> 标签：windows-phone-7, caliburn.micro

我正在尝试使用 caliburn.micro 导体。根据文档，导体不一定需要是 Screen 类型，它实际上可以是任何 POCO。

所以我像这样创建我的类：

```
public class StoreContentsViewModel : Conductor<MyItem>.Collection.OneActive
{
    protected override void OnInitialize()
    {            
        ...
        foreach (MyItem item in Collection)
        {
            Items.Add(item);
        }            
        ActivateItem(Items[0]);
    }
} 
```

但我收到绑定错误

```
 System.Windows.Data Error: BindingExpression path error: 'Items' property not
 found on 'MyItem' (HashCode=107597610). BindingExpression: Path='Items' 
 DataItem='MyItem'  HashCode=107597610); target element is 
 Microsoft.Phone.Controls.Pivot' (Name='Items'); target property is 
 ItemsSource' (type 'System.Collections.IEnumerable').. 
```

我以为是 Conductor 类实现了 Items 列表，但 caliburn 试图绑定 MyItem。这是为什么？我想要一个 Pivot，它接收可绑定属性 Items 中的 MyItem 列表，并根据我定义的 ItemTemplate 显示它们。我需要一个 ViewModel 吗？我已经阅读了几次文档，但我仍然迷路，你能解释一下发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:30:51.217

发现问题了！我在包含 Pivot 的网格中设置了一个 DataContext，覆盖了 ViewModel 的约定 DataContext。我删除了它并且工作完美。

因此，您确实可以在导体中使用任何 POCO。

# r - 如何在没有 eval、parse、text=paste("... in R 的情况下正确循环

> ID：14224760
> 
> 赞同：0
> 
> 时间：2013-01-08T21:58:56.740
> 
> 标签：r, parsing, eval

所以我有一个朋友帮我写了一些 R 代码，我很难问，因为代码可以工作，但我很难理解和更改它，我觉得它不是正确或不正确的代码。

我正在将文件加载到单独的 R 数据帧中，标记为 x1、x2...xN 等。

我想组合数据框，这是我们要工作的代码：

```
assign("x",eval(parse(text=paste("rbind(",paste("x",rep(1:length(toAppend)),sep="",collapse=", "),")",sep="")))) 
```

“toAppend”是加载到 x1、x2 等数据帧中的文件列表。

如果没有所有文本到代码技巧，它应该是这样的：

```
x <- rbind(##x1 through xN or some loop for 1:length(toAppend)#) 
```

为什么 R 不能在没有评估文本技巧的情况下获取代码？这是好代码吗？如果我使用这个 IRL，我会被解雇吗？您知道将其写成循环的正确方法吗？有没有办法在没有循环的情况下做到这一点？一旦我组合了这些文件/数据帧，我就有一个超过 3000 万行的数据集，使用循环非常慢。运行我的示例代码行需要超过 24 小时才能从 ~400 个文件中获取 30M 行数据集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:34:27.140

`read.table`如果这些数据帧都具有相同的结构，您将通过在or`read.csv`步骤中使用“colClasses”参数来节省大量时间。该`lapply`函数可以将其传递给`read.*`函数，如果您使用 Dason 猜测您真正在做什么，它将是：

```
 x <- do.call(rbind, lapply(file_names, read.csv, 
                                colClasses=c("numeric", "Date", "character")
               ))   # whatever the ordered sequence of classes might be 
```

`rbind`不能采用字符向量的原因是对象的名称是“语言”对象，而字符向量是......只是不是语言类型。在 R 中将字符向量推过将“语言”与“数据”分开的半透膜需要使用`assign`, or `do.call` `eval(parse())`or 环境或参考类，或者可能是我忘记的其他方法。

# java - Webdriver Unable to click hover over button for FireFox in Java

> ID：14224761
> 
> 赞同：0
> 
> 时间：2013-01-08T21:58:59.340
> 
> 标签：java, mouseover, selenium-webdriver

I am trying to click a hover over 'edit' button. However, I keep getting "Element is not currently visible and so may not be interacted with" Error when I use mouseOverElement.
Any idea on how to make it work? Thanks

< div class="editbox" >
 < h2>Title< /h2>
  < ul>
    < li >
       < small class="editlinks" >
            **< a class="edit" href="#">Edit< / a >**
       < /small>
     < strong> Content
    < /li>
  < /ul>
< /div>

Here is my code:

***Approach 1:***

WebElement textArea = driver.findElement(By.cssSelector("div.editbox ul li"));
WebElement button = driver.findElement(By.cssSelector("div.editbox ul li small.editlinks a.edit"));
Actions builder = new Actions(driver);
builder.moveToElement(textArea).build().perform();
timer.wait(5000);
driver.findElement(By.cssSelector("div.editbox ul li small.editlinks a.edit")).clik();

***Approach 2:***

Actions builder = new Actions(driver);
builder.moveToElement(textArea);
timer.wait(5000);
builder.click(button);
builder.build().perform();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:10:11.120

我正在使用以下代码将鼠标悬停在元素上：

```
if (element instanceof Locatable) {
    Locatable hoverItem = (Locatable) element;
    hoverItem.getLocationOnScreenOnceScrolledIntoView();
    Mouse mouse = ((HasInputDevices) webDriver).getMouse(); 
    mouse.mouseMove(hoverItem.getCoordinates());
} 
```

试试看是否有效。

我不确定您是否可以单击该`li`元素，因为它是不可见的。你不应该悬停你的链接（`a`标签）吗？

# c# - 如何将 C# UIViewController 传递给接收 UIViewController 的 C 函数 *

> ID：14224765
> 
> 赞同：0
> 
> 时间：2013-01-08T21:59:04.637
> 
> 标签：c#, marshalling

更新：在下面回答。

我有一个接收 UIViewController 的静态 C 库，然后它使用该视图控制器来呈现它自己的 UIViewController，控制并显示一些 UI，然后释放。我在弄清楚如何将我的 UIViewController 从 C# 绑定/编组到该 C 函数时遇到问题。

我的 C# 代码创建了一个这样的类：

使用系统；使用 System.Collections.Specialized；使用 System.Runtime.InteropServices；

```
 namespace ImportedUI 
 { 

      [StructLayout(LayoutKind.Sequential)]

      public class MyUI
      {
          [DllImport("__Internal")]
          protected extern static void MyUIInit(ref MonoTouch.UIKit.UIViewController viewController);

          public MyUI(MonoTouch.UIKit.UIViewController viewController)
          {
               MyUIInit(ref viewController);
          }
      }
 } 
```

我的静态库函数定义是：

void MyUIInit(UIViewController *viewController);

上面有一个编组异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:32:38.393

以下代码有效：

```
public class MyUI
{
    [DllImport("__Internal")]
    protected extern static void MyUIInit(IntPtr viewController);

    public MyUI(MonoTouch.UIKit.UIViewController viewController)
    {
        MyUIInit(viewController.Handle);
    }
} 
```

# objective-c - iOS - Only first line of text is viewable

> ID：14224769
> 
> 赞同：7
> 
> 时间：2013-01-08T21:59:21.057
> 
> 标签：objective-c, uiactivityviewcontroller

In two places in our app the text that the user types in only shows first line of text. Both occurances are in external frameworks, first in UIActivityView, the other in Freshdesk MobiHelp.

First, with UIActivityView, when using Twitter:

The problem is that if the text goes beyond one row in the modal, the text goes transparent:

[![screenshot](../Images/3adad88c890d06705cbe873e7441eab4.png)](https://i.stack.imgur.com/jEVls.png)

```
NSString *textToShare = [NSString stringWithFormat:NSLocalizedString(@"CHALLENGE-TWITTER-  DEFAULT-TEXT", nil), [UserManager currentUser].displayName];
NSString *urlToShare = [NSURL URLWithString:@"http://example.com"];
NSArray *activityItems = @[textToShare, urlToShare];
UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
[self presentViewController:activityVC animated:YES completion:nil]; 
```

Second, in Freshdesk submit a ticket: [![screenshot](../Images/5b760f65b63aa761eaeb592fd5d9e662.png)](https://i.stack.imgur.com/YNpsv.jpg)

I should also add that the Facebook modal from UIActivityView works just fine: [![screenshot](../Images/2fc9c6b64fb30db8a814d67a6145c07c.png)](https://i.stack.imgur.com/lLsY0.png)

Would really appreciate any tips here, as I'm lost.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:04:35.440

我认为在您附在此处的第二个截图中，红色区域上方有一个白色屏幕，可能是您的标签或文本区域，我猜它挡住了您的文本区域。如果视图是您添加的，您可以将特定的文本区域放在前面，这样它就不会被阻塞，您可以看到您的文本。希望这可以帮助

![在此处输入图像描述](../Images/0bf4ecba4a4ca6a9a34b5d66635517b9.png) 你能看到我突出显示的那个里面有一个白框吗？您的文本区域有一些视图。你是如何添加你的文本区域的？作为子视图？？你可以只记录主要视图子视图吗？喜欢

```
NSLog (@"%@",[self.view subviews]); 
```

现在检查视图层次结构。

# ruby-on-rails - How to get records based on an offset around a particular record?

> ID：14224772
> 
> 赞同：0
> 
> 时间：2013-01-08T21:59:31.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-9.1

I'm building a search UI which searches for comments. When a user clicks on a search result (comment), I want to show the surrounding comments.

My model:

```
Group (id, title) - A Group has many comments
Comment (id, group_id, content) 
```

For example:

When a user clicks on a comment with `comment.id` equal to 26\. I would first find all the comments for that group:

```
comment = Comment.find(26)
comments = Comment.where(:group_id => comment.group_id) 
```

I now have all of the group's comments. What I then want to do is show `comment.id` 26, with a max of 10 comments before and 10 comments after.

How can I modify comments to show that offset?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:48:06.267

听起来很简单，但要为此获得最佳性能却很棘手。无论如何，您*必须*让数据库来完成这项工作。这将比在客户端获取所有行和过滤/排序快一个数量级。

如果“之前”和“之后”的意思是更小/更大`comment.id`，并且我们进一步假设 id 空间中可能存在间隙，那么这个***查询***应该完成所有操作：

```
WITH x AS (SELECT id, group_id FROM comment WHERE id = 26) -- enter value once
(
SELECT *
FROM   x
JOIN   comment c USING (group_id)
WHERE  c.id > x.id
ORDER  BY c.id
LIMIT  10
)
UNION ALL
(
SELECT *
FROM   x
JOIN   comment c USING (group_id)
WHERE  c.id < x.id
ORDER  BY c.id DESC
LIMIT  10
) 
```

我将用 Ruby 语法解释这一点，这不是我的专业领域。

返回 10 条之前的评论和 10 条之后的评论。如果存在更少，则更少。`<=`在查询的第二条腿中使用以`UNION ALL`包含所选评论本身。

如果您需要对行进行排序，请在顶部添加另一个查询级别`ORDER BY`。

结合表的这两个**索引**应该非常快`comment`：

*   one on `(id)`- 可能会自动覆盖主键。
*   一上`(group_id, id)`

对于只读数据，您可以创建一个具有无间隙行号的物化视图，这将使其更快。

[在这个密切相关的答案中，更多关于括号、索引和性能的解释。](https://stackoverflow.com/a/14081944/939860)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:15:28.263

就像是：

```
comment = Comment.find(26)
before_comments = Comment.
  where('created_at <= ?', comment.created_at).
  where('id != ?', comment.id).
  where(group_id: comment.group_id).
  order('created_at DESC').limit(10)
after_comments = Comment.
  where('created_at >= ?', comment.created_at).
  where('id != ?', comment.id).
  where(group_id: comment.group_id).
  order('created_at DESC').limit(10) 
```

# xml - Get XML element declaration from imported ("xsd:import") schema in a WSDL file by using XPath

> ID：14224777
> 
> 赞同：2
> 
> 时间：2013-01-08T21:59:48.667
> 
> 标签：xml, xpath, wsdl, xsd

I have a problem that's been getting into my nerves for a week.

I programmed a dummy web service as a stateless EJB using Netbeans 7.2.1:

```
@WebService(serviceName = "WSPersonLookup")
@Stateless()
public class WSPersonData {

  @PersistenceContext(unitName="PUWSPersonData")
  private EntityManager em;

 /**
  * Web service operation
  */
  @WebMethod(operationName = "getPersonData")
  public Person getPersonData(@WebParam(name = "personId") final String personId) {
    return em.find(Person.class, personId);
  }
} 
```

The class "Person" is just a JPA Entity mapped to this table (I used PostgreSQL as DBMS):

```
CREATE TABLE person
(
  id character varying(10) NOT NULL DEFAULT ''::character varying,
  nit text NOT NULL DEFAULT ''::text,
  name text NOT NULL DEFAULT ''::text,
  address text NOT NULL DEFAULT ''::text,
  phone integer NOT NULL DEFAULT 0,
  creation_date timestamp with time zone NOT NULL DEFAULT now(),
  CONSTRAINT pk_person PRIMARY KEY (id)
) 
```

The resulting WSDL is this:

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ws.i2b.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://ws.i2b.com/" name="WSPersonLookup">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://ws.i2b.com/" schemaLocation="http://pc-i2b:8080/WSPersonLookup/WSPersonData?xsd=1" />
    </xsd:schema>
  </types>
  <message name="getPersonData">
    <part name="parameters" element="tns:getPersonData" />
  </message>
  <message name="getPersonDataResponse">
    <part name="parameters" element="tns:getPersonDataResponse" />
  </message>
  <portType name="WSPersonData">
    <operation name="getPersonData">
      <input wsam:Action="http://ws.i2b.com/WSPersonData/getPersonDataRequest" message="tns:getPersonData" />
      <output wsam:Action="http://ws.i2b.com/WSPersonData/getPersonDataResponse" message="tns:getPersonDataResponse" />
    </operation>
  </portType>
  <binding name="WSPersonDataPortBinding" type="tns:WSPersonData">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
    <operation name="getPersonData">
      <soap:operation soapAction="" />
      <input>
        <soap:body use="literal" />
      </input>
      <output>
        <soap:body use="literal" />
      </output>
    </operation>
  </binding>
  <service name="WSPersonLookup">
    <port name="WSPersonDataPort" binding="tns:WSPersonDataPortBinding">
      <soap:address location="http://pc-i2b:8080/WSPersonLookup/WSPersonData" />
    </port>
  </service>
</definitions> 
```

XSD declarations:

```
<?xml version='1.0' encoding='UTF-8'?>
<xs:schema xmlns:tns="http://ws.i2b.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema"
           version="1.0" targetNamespace="http://ws.i2b.com/">
  <xs:element name="getPersonData" type="tns:getPersonData"/>
  <xs:element name="getPersonDataResponse" type="tns:getPersonDataResponse"/>
  <xs:element name="person" type="tns:person"/>
  <xs:complexType name="getPersonData">
    <xs:sequence>
      <xs:element name="personId" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="getPersonDataResponse">
    <xs:sequence>
      <xs:element name="return" type="tns:person" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="person">
    <xs:sequence>
      <xs:element name="address" type="xs:string" minOccurs="0"/>
      <xs:element name="creationDate" type="xs:dateTime" minOccurs="0"/>
      <xs:element name="id" type="xs:string" minOccurs="0"/>
      <xs:element name="name" type="xs:string" minOccurs="0"/>
      <xs:element name="nit" type="xs:string" minOccurs="0"/>
      <xs:element name="phone" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

The problem is: I need to access the schema declarations above, imported in the WSDL:

```
 <types>
    <xsd:schema>
      <xsd:import namespace="http://ws.i2b.com/" schemaLocation="http://pc-i2b:8080/WSPersonLookup/WSPersonData?xsd=1" />
    </xsd:schema>
  </types> 
```

by using XPath. I'm not allowed to access the schema directly.

Is there a way to do that? If not, does anyone know a workaround for this?

Kind regards.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:15:36.033

您不能仅使用 XPath 来获取由主要 XML 文档（WSDL）引用的辅助 XML 文档（在本例中为模式）。

使用 XSLT，您可以使用以下`document()`功能：

```
<xsl:variable name="schema" select="document(/soap:definitions/soap:types/xsd:schema/xsd:import/@schemaLocation)"/> 
```

或者，与其尝试获取导入的模式，不如在 WSDL 中获取模式片段 - 使用类似`/soap:definitions/soap:types/xsd:schema`. 这是一个有效的模式，将其导入`http://pc-i2b:8080/WSPersonLookup/WSPersonData?xsd=1`- 并且您应该能够直接使用它。

# rest - 具有昂贵属性的 RESTful 资源

> ID：14224780
> 
> 赞同：0
> 
> 时间：2013-01-08T21:59:57.683
> 
> 标签：rest

我有一个资源/消息。

在我的 java 代码中，Message 接口如下所示：

```
interface Message {
    public int getID();
    public int getPostingUserID();
    public String getText();
    public int getRelevance();
} 
```

例如，/messages/7 将给出以下内容：

```
{ id: 7, postingUserID: 102, text: "tabs are better!", relevance: 10.3 } 
```

不幸的是，getRelevance() 的即时计算非常昂贵，并且可能只需要十分之一的查询。当我不需要它时，我不想计算它。

所以，我可以看到几个选项：

*   /messages/7?includeRelevance=true 告诉它计算相关性，否则不要在响应中包含它
*   /messages/7/relevance 作为一个单独的请求，然后计算它
*   /relevances?forMessageID=7 作为单独的请求，然后计算

哪个选项最 RESTful？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:48:11.803

在这种情况下，我会倾向于这样做`/messages/7/relevance`，并且我会*确保*在获取时返回的文档`/messages/7`包含指向相关相关资源的 URL（当然是为了 HATEOAS 的可发现性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:53:28.707

执行此操作的最 RESTful 方式（我相信，而且肯定是错误的）是定义 2 种不同的媒体类型。

客户端可以使用标头请求特定的`Accept:`，您可以默认为最小的。

# c# - 如何使用asp和C#下载多个文件

> ID：14224784
> 
> 赞同：5
> 
> 时间：2013-01-08T22:00:22.067
> 
> 标签：c#, asp.net, download

我对此很陌生，所以请耐心等待。这是我的代码。即使选择了多个文件，它也只会下​​载一个文件。

```
foreach(String fileName in fileNameList)
{
    FileInfo updateFile = new FileInfo("C:/inetpub/wwwroot/w4/DanyaWebReports/Data/" + fileName);
    Response.ContentType = "application/octet-stream";
    Response.AddHeader("content-disposition", "attachment;filename=\"" + Path.GetFileName(updateFile.FullName) + "\"");
    Response.AddHeader("content-length", updateFile.Length.ToString());
    Response.TransmitFile(updateFile.FullName);
    Response.Flush();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T22:07:04.690

这不是要走的路，您可以在服务器端压缩所有选定的文件并仅下载 zip 文件，或者您可以尝试使用客户端代码打开多个下载窗口，但在这种情况下，我认为某些浏览器可能会阻止带有弹出窗口阻止程序的弹出窗口。

例如，您创建一个名为 download.aspx 的页面（甚至只是一个 http 处理程序），然后通过 JavaScript 多次调用它：

```
window.open("download.aspx?id=id of file1");
window.open("download.aspx?id=id of file2"); 
```

在这里查看一些可以进一步阐述的想法：[ASP.NET 下载多个文件](http://forums.asp.net/t/1100257.aspx/1)

# javascript - JS 下拉菜单

> ID：14224785
> 
> 赞同：0
> 
> 时间：2013-01-08T22:00:25.477
> 
> 标签：javascript, jquery, drop-down-menu

好的，所以我知道这似乎只是我懒惰，但我差点把头发都扯掉了！我浏览了很多网站，24 小时后需要 Stack 的帮助！

我正在尝试制作一个下拉菜单，当单击 1 级父级时，其所有子级出现在下方，将页面内容向下推，当单击下一个 1 级父级时，以前的子级消失并且新的子级进来。

根据我的研究，我知道我需要使用切换，但我把自己搞糊涂了，而且我不是一个 JS 人。我也知道我需要使用隐藏在我的 css 中的溢出作为 midnav。我还想使用一些 jQuery 效果来上下滑动孩子 ul，这是否意味着我必须使用 jQuery 编写整个东西？

任何帮助将不胜感激。我想做的一个例子是在这里

[http://www.andersenwindows.com/](http://www.andersenwindows.com/)

这是我到目前为止所拥有的：HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="js/calendar.js"></script>
<script type="text/javascript" src="js/formhandler.js"></script>
<script type="text/javascript" src="js/popup.js"></script>
<link href="CSS/style.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="CSS/fonts.css" rel="stylesheet" type="text/css" media="screen"/>
</head>

<body>
<div id="wrapper">
  <div id="topbanner"></div>
  <div id="header">
    <div id="navigation">
      <div id="topnav">
        <div id="left-side">
          <div id="left-menu">
            <ul>
              <li><a href="#">Link l1</a></li>
              <li><a href="#">Link l2</a></li>
            </ul>
          </div>
        </div>
        <div id="logo"><img src="images/general/nav_logo.png" /> </div>
        <div id="right-side">
          <div id="right-menu">
            <ul>
              <li><a href="#">Link r1</a></li>
              <li><a href="#">Link r2</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div id="mid-nav">
        <ul id="midnav">
          <li><a href="#" >About</a></li>
          <li><a href="#" >Home</a> 
          <ul>
          <li><a href="#">test2</a></li>
          <li><a href="#">test3</a></li>
          <li><a href="#">test1</a></li>
          </ul>
          </li>
          <li><a href="#">Work</a></li>
          <li><a href="#">Clients</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>
    </div>
    <!--START 100% HERE!--> 
  </div>
</div>
<div id="footer">
  <div class="social-images"><img src="images/socialmedia/facebook.gif" height="40" width="40"/></div>
  <div class="social-images"><img src="images/socialmedia/google.gif" height="40" width="40"/></div>
  <div class="social-images"><img src="images/socialmedia/twitter.gif" height="40" width="40"/></div>
</div>
</body>
</html> 
```

CSS：

```
html, body {
    height: 100%;
    margin: 0 auto;
}
/* NAVIGATION */
#wrapper {
    text-align: left;
    margin: 0px auto;
    padding: 0px;
    width: 100%;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -100px; /* the bottom margin is the negative value of the footer's height */
}

#topbanner{
    width:100%;
    height:54px;
    background-color:#f1f2f2;
    position:absolute;
    z-index:-1000;
}

#topnav {
    margin: 0px auto;
    width: 1050px;
    height: 50px;
    padding-top: 4px;
    background-color: #f1f2f2;
}

#left-side {
    float: left;
    width: 439px;
}
#right-side {
    float: right;
    width: 439px;
}
#logo {
    padding-top: 7px;
    float: left;
    width: 15%;
}
#left-menu {
}
#left-menu ul {
    float: right;
    margin: 0px 0px 0px 0px;
    padding: 0px 10px 0px 0px;
}
#left-menu li {
    display: inline;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
}
#left-menu a {
    display: inline-block;
    padding: 10px;
    line-height: 30px;
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'AftasansRegular';
    font-size: 22px;
    font-weight: normal;
    color: #000;
    border: none;
}
#right-menu {
}
#right-menu ul {
    float: left;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 10px;
}
#right-menu li {
    display: inline;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
}
#right-menu a {
    display: inline-block;
    padding: 10px;
    line-height: 30px;
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'AftasansRegular';
    font-size: 22px;
    font-weight: normal;
    color: #000;
    border: none;
}
ul#midnav {
    border-width: 1px 0;
    list-style: none;
    margin: 0;
    padding: 0;
    text-align: center;
    border-bottom: solid thin #c8c8c8;
}
ul#midnav li {
    display: inline;
}
ul#midnav li a {
    display: inline-block;
    padding: 10px;
    line-height: 30px;
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'AftasansRegular';
    font-size: 18px;
    font-weight: normal;
    color: #000;
    border: none;
}
ul#midnav li ul{
line-height: 30px;
 padding: 0;
 position: absolute;
 left: 0; top:100px;
 display: none;/* --Hide by default--*/
 width: 970px;
 height:40px;
 background: #f1f2f3;
 color: #fff;

}

/* NAVIGATION END */
/* FOOTER BEGIN */
#footerwrapper, #push {
    height: 100px; /* .push must be the same height as .footer */
    background-color: #f1f2f2;
}
#footer {
        border-top: solid thin #c8c8c8;
    width: 100%;
    height: 100px;
    margin: 0 auto;
    background-color: #f1f2f2;
}
#social-wrapper {
    width: 130px;
    height: 100px;
    float: right;
    position: relative;
    top: 40px;
}
.social-images {
    border-style: solid;
    border-width: 1px;
    border-color: #f1f2f2;
    width: 40px;
    height: 40px;
    float: left;
}
/*FOOTER END *? 
```

谢谢，

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:30:01.193

我迷失了所有左/右导航的东西，所以我只用中间导航做了一个。您可以将其视为一个起点。[http://jsfiddle.net/MatthewDavis/4syjv/](http://jsfiddle.net/MatthewDavis/4syjv/)

这是 JS ......它非常通用，但您应该能够进行编辑以适应。

```
$(document).ready(function () {
  $('a').on('click', function(event){
    event.preventDefault();
    $('#mid-nav > ul').find('ul').slideUp(
      function(){
        $(this).closest('li').find('ul').slideToggle();
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:31:29.120

您是否正在寻找类似的东西：

```
 $('#div1').click(function() {
      if( /* check if already visible */)
      $('div1').toggle(); //also do-able with $('div1').slideToggle();
      $('div2').hide();
 } 
```

但首先你会先隐藏所有的 div 并检查当前的 div

# c - Why sys_mmap is not present in syscalls.h file in Android 2.6.29?

> ID：14224788
> 
> 赞同：0
> 
> 时间：2013-01-08T22:00:40.507
> 
> 标签：c, linux, linux-kernel, system-calls

In `syscalls.h` file of Android 2.6.29, there is `unmap` sys call but not `mmap`.

Is there any reason for not including `mmap` in `syscalls.h` file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:38:02.807

How possible?

Check out: [http://lxr.linux.no/#linux+v2.6.29/arch/x86/include/asm/syscalls.h#L87](http://lxr.linux.no/#linux+v2.6.29/arch/x86/include/asm/syscalls.h#L87)

```
 87 asmlinkage long sys_mmap(unsigned long, unsigned long, unsigned long,
  88                         unsigned long, unsigned long, unsigned long); 
```

# c# - 替换引号之间的任何字符串

> ID：14224790
> 
> 赞同：12
> 
> 时间：2013-01-08T22:00:45.353
> 
> 标签：c#, regex, string, replace

**问题：**

找不到一致的方法来用我想要的特定字符串替换引号之间的随机字符串。任何帮助将不胜感激。

**例子：**

```
String str1 = "test=\"-1\""; 
```

应该成为

```
String str2 = "test=\"31\""; 
```

但也为

```
String str3 = "test=\"foobar\""; 
```

基本上我想把这个

```
String str4 = "test=\"antyhingCanGoHere\""; 
```

进入这个

```
String str4 = "test=\"31\""; 
```

**试过：**

[不使用 RegexOptions 枚举的不区分大小写的正则表达式](https://stackoverflow.com/questions/2439965/case-insensitive-regex-without-using-regexoptions-enumeration)

[如何使用正则表达式进行不区分大小写的字符串替换？](https://stackoverflow.com/questions/1139439/how-do-you-do-case-insensitive-string-replacement-using-regular-expressions)

[使用正则表达式将 AnyText: 和 <usernameredacted@example.com> 之间的任何字符替换为空字符串？](https://stackoverflow.com/questions/6530123/replace-any-character-in-between-anytext-and-usernameredactedexample-com-wit)

[在出现之间替换字符串](https://stackoverflow.com/questions/7564725/replace-string-in-between-occurrences)

[在两个字符串之间替换一个字符串](https://stackoverflow.com/questions/10403639/replace-a-string-between-two-strings)

**当前代码：**

```
 Regex RemoveName = new Regex("(?VARIABLE=\").*(?=\")", RegexOptions.IgnoreCase);
    String convertSeccons = RemoveName.Replace(ruleFixed, "31"); 
```

**返回错误：**

```
System.ArgumentException was caught
  Message=parsing "(?VARIABLE=").*(?=")" - Unrecognized grouping construct.
  Source=System
  StackTrace:
       at System.Text.RegularExpressions.RegexParser.ScanGroupOpen()
       at System.Text.RegularExpressions.RegexParser.ScanRegex()
       at System.Text.RegularExpressions.RegexParser.Parse(String re, RegexOptions op)
       at System.Text.RegularExpressions.Regex..ctor(String pattern, RegexOptions options, Boolean useCache)
       at System.Text.RegularExpressions.Regex..ctor(String pattern, RegexOptions options)
       at application.application.insertGroupID(String rule) in C:\Users\winserv8\Documents\Visual Studio 2010\Projects\application\application\MainFormLauncher.cs:line 298
       at application.application.xmlqueryDB(String xmlSaveLocation, TextWriter tw, String ruleName) in C:\Users\winserv8\Documents\Visual Studio 2010\Projects\application\application\MainFormLauncher.cs:line 250
  InnerException: 
```

**找到答案**

```
string s = Regex.Replace(ruleFixed, "VARIABLE=\"(.*)\"", "VARIABLE=\"31\"");
ruleFixed = s; 
```

我在 Replace any character in between AnyText: and with an empty string using Regex? 找到了这个代码示例？这是我之前发布的链接之一，只是跳过了这个语法，因为我认为它不能处理我需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:08:36.577

```
var str1 = "test=\"foobar\"";
var str2 = str1.Substring(0, str1.IndexOf("\"") + 1) + "31\""; 
```

如果需要添加检查`IndexOf`！= -1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:08:48.243

我不知道我的理解是否正确，但如果你想替换里面的所有字符`string`，你为什么不使用简单的正则表达式

```
String str = "test=\"-\"1\"";

Regex regExpr = new Regex("\".*\"", RegexOptions.IgnoreCase);
String result = regExpr.Replace(str , "\"31\"");

Console.WriteLine(result); 
```

印刷：

```
test="31" 
```

**注意：**您可以利用普通旧`XAttribute`

```
String ruleFixed = "test=\"-\"1\"";

var splited = ruleFixed.Split('=');
var attribute = new XAttribute(splited[0], splited[1]);

attribute.Value = "31";

Console.WriteLine(attribute);//prints test="31" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:11:54.457

如果您的字符串中除了键/值对之外还有其他内容`key="value"`，那么您需要使值匹配部分*不*匹配引号，否则它将从第一个值一直匹配到最后一个引号在字符串中标记。

如果这是真的，那么试试这个：

```
Regex.Replace(ruleFixed, "(?<=VARIABLE\s*=\s*\")[^\"]*(?=\")", "31"); 
```

这使用负后瞻来匹配`VARIABLE="`部分（周围有可选的空白，所以`VARIABLE = "`也可以工作，负前瞻来匹配结尾`"`，而不包括在最终匹配中的前瞻/后视，使您能够替换你想要的值。

如果不是，那么您的解决方案*将*起作用，但不是最佳的，因为您必须在替换文本中重复值和引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T22:21:13.263

```
var parts = given.Split('=');
return string.Format("{0}=\"{1}\"", parts[0], replacement); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T23:18:40.673

假设引号中的字符串本身不包含引号，您可以使用此通用模式来查找前缀和后缀之间的位置：

```
(?<=prefix)find(?=suffix) 
```

在你的情况下

```
(?<=\w+=").*?(?=") 
```

这里我们使用前缀`\w+="`where`\w+`表示单词字符（变量）并且`="`是等号和引号。

`.*?`在遇到下一个报价之前，我们想找到任何东西。

后缀就是引号`"`。

```
string result = Regex.Replace(input, "(?<=\\w+=\").*?(?=\")", replacement); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T22:10:41.330

试试这个：

```
[^"\r\n]*(?:""[\r\n]*)* 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T22:12:18.210

```
 String str1 = "test=\"-1\"";
     string res = Regex.Replace(str1, "(^+\").+(\"+)", "$1" + "31" + "$2"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-08T22:12:27.107

```
var pattern = "\"(.*)?\"";
var regex = new Regex(pattern, RegexOptions.IgnoreCase);
var replacement = regex.Replace("test=\"hereissomething\"", "\"31\""); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-08T22:13:34.973

```
string s = Regex.Replace(ruleFixed, "VARIABLE=\"(.*)\"", "VARIABLE=\"31\"");
ruleFixed = s; 
```

[我在Replace any character in between AnyText: and <usernameredacted@example.com> with an empty string using Regex?](https://stackoverflow.com/questions/6530123/replace-any-character-in-between-anytext-and-usernameredactedexample-com-wit)找到了这个代码示例？这是我之前发布的链接之一，只是跳过了这个语法，因为我认为它不能处理我需要的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-08T22:21:14.653

```
String str1 = "test=\"-1\"";
string[] parts = str1.Split(new[] {'"'}, 3);
string str2 = parts.Length == 3 ? string.Join(@"\", parts.First(), "31", parts.Last()) : str1; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-08T22:24:41.723

我很不擅长，`RegEx`但你可以简单`ExtensionMethod`地使用字符串函数来做到这一点。

```
public static class StringExtensions
{
    public static string ReplaceBetweenQuotes(this string str, string replacement)
    {
        if (str.Count(c => c.Equals('"')) == 2)
        {
            int start = str.IndexOf('"') + 1;
            str = str.Replace(str.Substring(start, str.LastIndexOf('"') - start), replacement);
        }
        return str;
    }
} 
```

用法：

```
 String str3 = "test=\"foobar\"";
 str3 = str3.ReplaceBetweenQuotes("31");

returns: "test=\"31\"" 
```

# sql - Need to join and sum on sql tables

> ID：14224791
> 
> 赞同：0
> 
> 时间：2013-01-08T22:00:48.933
> 
> 标签：sql, sql-server, join, count, sum

I am trying to learn Microsoft SQL Server and I'm trying to figure out how I can do the following.

I have two tables:

**users**

```
id  fname   lname   username
111 kely    dike    kdike
222 hana    sho     hsho
333 mike    dime    mdime
444 sergi   xan     sxan 
```

and

**email_recipient**

```
id  recipient_id    fname   lname
1      222          hana    sho
2      222          hana    sho
3      222          hana    sho
4      333          mike    dime
5      111          kely    dike
6      111          kely    dike
7      444          sergi   xan
8      444          sergi   xan
9      444          sergi   xan
10     444          sergi   xan 
```

and what I want to do is to count how many emails each user received, something like this:

```
id  fname   lname  username email_recipient total
111 kely    dike   kdike          2
222 hana    sho    hsho           3
333 mike    dime   mdime          1
444 sergi   xan    sxan           4 
```

Could someone please point in the right direction?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:04:41.073

你可以试试这个。

```
SELECT a.id, a.fname, a.lname, a.username, COUNT(*) AS email_recipient_total
FROM users a
INNER JOIN email_recipient b ON b.recipient_id = a.id
GROUP BY a.id, a.fname, a.lname, a.username 
```

**结果**

```
| 身份证 | FNAME | 名称 | 用户名 | EMAIL_RECIPIENT_TOTAL |
-------------------------------------------------- --------
| 111 | 凯利 | 堤防| 克迪克 | 2 |
| 222 | 花 | 笑| 萧 | 3 |
| 333 | 迈克 | 一角钱 | mdime | 1 |
| 第444章 塞尔吉 | 珊 | sxan | 4 |
```

## [看到它在行动](http://sqlfiddle.com/#!2/49409d/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:42:49.030

我的猜测是这可能会有更好的性能，但无论如何，基本上是相同的答案：

```
SELECT 
  a.id, 
  a.fname, 
  a.lname, 
  a.username, 
  b.email_recipient_total
FROM users a
  INNER JOIN (
      select recipient_id, COUNT(*) AS email_recipient_total
      from email_recipient
      group by recipient_id
    ) b ON b.recipient_id = a.id 
```

# java - 如何在 Jetty 上使用 JASPI/JASPIC？

> ID：14224792
> 
> 赞同：6
> 
> 时间：2013-01-08T22:01:01.530
> 
> 标签：java, jakarta-ee, jetty, jetty-8, jaspic

在 Jetty 的[主项目页面](http://eclipse.org/jetty)上提到了与 JASPI (JASPIC/JSR 196) 的兼容性。

但是，[Jetty 8 的发行版](http://download.eclipse.org/jetty/stable-8/dist)似乎不包含任何与 JASPI 相关的类。[jetty home]/lib 中有一个`jetty-security-8.1.8.v20121106.jar`jar，但是这个不包含任何 JASPIC/JASPI 类型。

[Jetty wiki 上关于 JASPIC/JASPI](http://wiki.eclipse.org/Jetty/Feature/JASPI)的文档只是一个占位符，不包含任何信息。

经过一番谷歌搜索后，我[在 Eclipse 站点上找到了 JavaDocs，并发现](http://download.eclipse.org/jetty//stable-8/apidocs/org/eclipse/jetty/security/jaspi/package-summary.html)[某处](http://grepcode.com/snapshot/repo1.maven.org/maven2/org.eclipse.jetty/jetty-jaspi/8.1.7.v20120910/)应该有一个 [jetty-jaspi-8.1.8.v20121106.jar](http://repo2.maven.org/maven2/org/eclipse/jetty/jetty-jaspi/8.1.8.v20121106/) 。这些 JavaDocs 也包含在发行版中。最后，Github 上出现了一个[jetty-jaspi 存储库](https://github.com/eclipse/jetty.project)。

显然有一些可用的支持，但为什么这些类似乎不存在于 Jetty 发行版中，关于如何配置它的文档在哪里？我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T10:03:19.967

[这个项目 (https://github.com/guofengzh/jaspi-on-jetty)](https://github.com/guofengzh/jaspi-on-jetty)是 jetty 中 JASPI API 的一个工作示例，它使用[geronimo-jaspi](https://github.com/apache/geronimo-jaspi)反过来调用 jetty-jaspi 模块进行身份验证。Geronimo 似乎在此示例中提供了配置机制并为身份验证模块本身提供了码头。

似乎您可以选择表单、摘要或基本身份验证方法。对基于表单的登录的快速测试表明它似乎可以正常工作。

Jaspi 身份验证工厂在 jetty-web.xml 中设置，如下所示：

```
<Set name="securityHandler">
  <New class="org.eclipse.jetty.security.ConstraintSecurityHandler">
    <Set name="loginService">
      <New class="org.eclipse.jetty.plus.jaas.JAASLoginService">
        <Set name="name">JAASRealm</Set>
        <Set name="loginModuleName">jaas</Set>
      </New>
    </Set>

    <Set name="authenticatorFactory">
      <New class="org.eclipse.jetty.security.jaspi.JaspiAuthenticatorFactory" />
    </Set>
  </New>
</Set> 
```

jaspi 配置文件是通过 pom.xml 文件中的系统属性引用的：

```
<systemProperty>
  <name>org.apache.geronimo.jaspic.configurationFile</name>
  <value>./conf/jaspi/form-test-jaspi-2.xml</value>
</systemProperty> 
```

此外，您提到的 jaspi 库与 geronimo jaspi 实现一起作为依赖项添加到 pom 中：

```
<dependency>
  <groupId>org.eclipse.jetty</groupId>
  <artifactId>jetty-jaspi</artifactId>
  <version>${jetty.version}</version>
</dependency>
<dependency>
  <groupId>org.apache.geronimo.components</groupId>
  <artifactId>geronimo-jaspi</artifactId>
  <version>2.0.0</version>
</dependency> 
```

我也一直无法找到有关该主题的文档。似乎 jetty-jaspi 模块不是[标准启动选项](http://wiki.eclipse.org/Jetty/Reference/Start_Options)之一，但可以添加到 ${jetty.home/lib/ext} 目录（请参阅[Jetty 类加载](http://www.eclipse.org/jetty/documentation/9.0.0.M3/jetty-classloading.html#adding-extra-classpaths)）。

# java - Post File to URL using java with authentication

> ID：14224793
> 
> 赞同：0
> 
> 时间：2013-01-08T22:01:05.017
> 
> 标签：java, file, upload, io

I tried the code below:

```
public class URLUploader {

    public static void main(String[] args) throws IOException 
    {

        URL url = new URL("http://77.203.65.164:6011");
        URLConnection conn = url.openConnection();
        conn.setDoOutput(true);

        String name = "user";
                String password = "password";

                String authString = name + ":" + password;
                System.out.println("auth string: " + authString);
                byte[] authEncBytes = Base64.encodeBase64(authString.getBytes());
                String authStringEnc = new String(authEncBytes);
                System.out.println("Base64 encoded auth string: " + authStringEnc);

        conn.setRequestProperty("Authorization", "Basic " + authStringEnc);
        OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());

        writer.write("/var/www/html/kannel/javacode/13569595024298.xml");
        writer.flush();
        String line;
        BufferedReader reader = new BufferedReader(new    InputStreamReader(conn.getInputStream()));
        while ((line = reader.readLine()) != null) {
          System.out.println(line);
        }

        writer.close();
        reader.close();
    }
} 
```

But I got the following error:

```
auth string: optiweb:optiweb
Base64 encoded auth string: b3B0aXdlYjpvcHRpd2Vi
    Exception in thread "main" java.io.IOException: Server returned HTTP response code: 500 for URL: 77.203.65.164:6011
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1403)
    at URLUploader.main(URLUploader.java:32) 
```

What could be wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:02:44.400

首先，HTTP 响应代码 500 是“内部服务器错误”，与身份验证无关。

二、声明

```
writer.write("/var/www/html/kannel/javacode/13569595024298.xml"); 
```

只是将文件的完整路径名写入服务器，而不是实际的文件内容，甚至没有尾随的换行符。这当然不是服务器所期望的，并且可能是 500 响应的原因。您正在构建和发送的请求也可能存在其他问题，但是如果没有详细的 API 参考来了解连接另一端的任何内容，则很难提供进一步的帮助。

# java - positioning picture on GUI JFrame in java

> ID：14224794
> 
> 赞同：2
> 
> 时间：2013-01-08T22:01:08.630
> 
> 标签：java, swing, jframe, layout-manager, absolutelayout

I was wondering if there is a quick and easy way of trying to position an image at a particular position in GUI. In addition to this is it possible to put Jlables/Buttons on this picture. That picture should only form a section of the JFrame. I know you can use setbounds(width, height, width, height); but this takes alot of accuracy and very hard to get perfectly right.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:08:10.723

不要调用`setBounds`，这意味着您正在使用`null`布局。始终使用布局管理器。

一种方法是添加一个`JPanel`覆盖`paintComponent`和调用的自定义[`drawImage(Image, x, y, width, height, ...)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20int,%20int,%20java.awt.image.ImageObserver%29)。`JLabels/JButtons`等仍然可以添加到面板中。

不要忘记调用`super.paintComponent`——这将确保您的子组件被绘制。

另外，看看[背景面板](http://tips4java.wordpress.com/2008/10/12/background-panel/)。

# meteor - Meteor 帐户框架签名/登录事件

> ID：14224796
> 
> 赞同：2
> 
> 时间：2013-01-08T22:01:22.410
> 
> 标签：meteor

我正在使用该`accounts-ui`软件包，并希望在用户登录/和或注册后立即处理一些 javascript。

用户登录后是否有事件被调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:15:29.150

原始登录 API（例如`loginWithFacebook`,`loginWithPassword`等）有一个在登录完成时触发的回调，但目前没有通过`accounts-ui`. 这可能会改变。

一种潜在的解决方法，受 Werner 建议的启发，但也考虑了页面加载：

```
var oldUserId = undefined;

Meteor.autorun(function() {
  var newUserId = Meteor.userId();
  if (oldUserId === null && newUserId) {
    console.log('The user logged in');
  } else if (newUserId === null && oldUserId) {
    console.log('The user logged out');
  } 
  oldUserId = Meteor.userId();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:21:52.220

您可以检查`Meteor.userId()`内部函数的结果`Meteor.autorun():`

```
Meteor.autorun(function() {
  if (Meteor.userId()) {
    console.log('The user logged in');
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-27T11:47:11.150

只是提供一个替代方案；我猴子修补了回调函数。它看起来有点复杂，因为 credentialRequestCompleteHandler 需要一个返回函数的函数，但除此之外它是一个普通的猴子补丁。将其粘贴在 main.js 或某些处理较晚且仅处理一次的内容中。希望对以后的参考有所帮助。

```
var orgCallback = Accounts.oauth.credentialRequestCompleteHandler;
Accounts.oauth.credentialRequestCompleteHandler = function(callback){
    return function (credentialTokenOrError) {
        var tmpFunc = orgCallback(callback);
        tmpFunc(credentialTokenOrError);
        alert("do your own thing here");
    }
} 
```

# php - 如果 SplObjectStorage 在仍然附加对象时销毁，它会留下内存泄漏引用吗？

> ID：14224801
> 
> 赞同：5
> 
> 时间：2013-01-08T22:02:15.533
> 
> 标签：php, spl

如果一个*SplObjectStorage*实例在仍然附加了一些对象的同时销毁，它是先隐式分离这些对象，还是由*SplObjectStorage*对那些悬空对象的引用导致内存泄漏？我正在尝试确定是否有必要使用用户态代码来“分离在破坏之前留下的任何东西”以防止这种内存泄漏。

```
$storage = new SplObjectStorage();
$x = new stdClass();
$y = new stdClass();
$storage->attach($x);
$storage->attach($y);
$storage = null; 
// did not explicitly detach $x and $y... does $storage's destruction do it?
// or do the zval counts on $x and $y now off by one?
$x = null;
$y = null;
// at this point, are there two dangling references to $x and $y,
// simply because $storage did not dereference from them before destroying itself? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:06:02.453

简单的答案是：它应该释放这两个对象。

如果不是这种情况，则应将其视为错误。

测试：创建一个带有析构函数的类，并确保它被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:06:25.010

简而言之：没有。

在 Long：`$storage`被取消引用的那一刻，它有一个所谓的“refCount”为零，这意味着不再有对该对象的引用。现在，下次垃圾收集器运行时，它将清理该对象，并且从中引用的每个对象`$storage`都将其 refCount 减一。现在发生了完全相同的情况：GC 注意到，没有任何东西引用对象并将释放它们（通常在同一个垃圾收集器周期内，因为为什么不呢？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:16:06.477

如果该测试的结构正确，则似乎表明在销毁存储之前分离物品与在物品仍然连接时销毁存储相比没有明显差异。注释掉 detach() 块不会导致 check() 输出中的任何可见更改。

```
<?php
class MyStorage extends SplObjectStorage
{
    public function __destruct()
    {
        echo "__destruct() of ";
        var_dump($this);
        //parent::__destruct();  // there is no SplObjectStorage::__destruct()
    }
}
class Foo
{
    public function __destruct()
    {
        echo "__destruct() of ";
        var_dump($this);
    }
}

function check($message)
{
    global $storage, $x, $y, $z;

    echo $message, ':', PHP_EOL;

    echo '$storage:  ', xdebug_debug_zval('storage');
    echo '$x      :  ', xdebug_debug_zval('x');
    echo '$y      :  ', xdebug_debug_zval('y');
    echo '$z      :  ', xdebug_debug_zval('z');

    echo PHP_EOL, PHP_EOL;
}

check("Starting environment");

$storage = new MyStorage();
check("\$storage created");
$x = new Foo();
check("\$x created");
$y = new Foo();
check("\$y created");
$z = new Foo();
check("\$z created");

$storage->attach($x);
$storage->attach($y);
$storage->attach($z);
check("Everything is attached");

// comment out this detach() block for comparison testing
$storage->detach($x);
$storage->detach($y);
$storage->detach($z);
check("Everything is detached");

// the check() output here is key for comparing with the final check() output below

$storage = null;
check("$storage destructed");

$x = null;
check("$x destructed");

$y = null;
check("$y destructed");

$z = null;
check("$z destructed");

// final check() output appears here 
```

我认为当我在使用 SplObjectStorage 对象的类中编写显式用户区 detach() 步骤时，造成了我的自我困惑。我认为 PHP Bug #63917 [1] 似乎突出的迭代问题实际上是唯一的错误问题，这首先让我怀疑带有 destruct-with-attachments 场景的错误。

[1] -- [http://bugs.php.net/bug.php?id=63917](http://bugs.php.net/bug.php?id=63917)

# c - 将结构复制到函数中作为指针参数接收的结构数组

> ID：14224802
> 
> 赞同：0
> 
> 时间：2013-01-08T22:02:15.277
> 
> 标签：c

我有一个函数，它将指向结构数组的指针作为参数：

```
void foo (int *StructArrayAddress) 
```

在函数中，然后我构建一个看起来像这样的新结构

```
struct
{
    int a;
    int b;
    char c[10];
}myStruct; 
```

然后我想做的是根据我作为参数收到的指向该数组的指针将该结构复制到我的结构数组中。语法上没有任何运气，或者我错过了一些东西。任何人都可以建议吗？谢谢！

编辑：我不确定我是否正确解释了自己，因为我不认为这里发布的解决方案是我想要做的。澄清一下：在我的函数之外有一些结构数组。我收到了结构数组中正确结构元素的地址作为我的函数的参数。假设来电者已经把正确的地址传递给我；我根本不需要索引它。

然后我从其他一些数据本地构建一个结构。我现在想将我在本地构建的这个结构复制到我作为参数接收到的数组中位置的结构。

```
void foo (int *StructArrayAddress)
{
    struct
    {
        int a;
        int b;
        char c[10];
    }myStruct;

    a = 5;
    b = 10;
    c = {1,2,3,4,5,6,7,8,9,10};

    //Copy local struct myStruct to location StructArrayAddress here
    StructArrayAddress = myStruct; //Something like this but I have the syntax wrong
} 
```

我希望这更有意义。

EDIT2：我可能刚刚意识到你们一直试图向我传达我遗漏的一些东西：参数中是否需要对我的本地结构的引用，以便我将结构的格式传回时知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:25:41.993

你的函数定义应该像

```
void foo (myStruct *StructArrayAddress, int index)
{
     myStruct x;
     x.a = 1;
     x.b = 2;
     strncpy(x.c, "Test", 9);

     /* Now copy this struct to the array of structs at index specified by second argument */

     memcpy((StructArrayAddress + index), &x, sizeof(myStruct));

} 
```

# python - 在 OSX 10.8 上为 Python 3.3 安装 numpy 时遇到问题

> ID：14224804
> 
> 赞同：4
> 
> 时间：2013-01-08T22:02:21.983
> 
> 标签：python, numpy, python-3.x, homebrew

我有一个使用 Numpy 的 Python 3.2 系统，但我让 Homebrew 升级到 Python 3.3，所以我必须再次安装所有包。`pip3 install numpy`对于[这个非常大的输出](https://gist.github.com/4488386)，这将失败。

你能建议一个修复吗？

或者，我怎样才能恢复我的旧工作安装？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:05:52.713

我在 Python3.3 下成功安装了 Numpy，但没有`pip`：

```
git clone https://github.com/numpy/numpy.git
python3 setup.py build
python3 setup.py install 
```

另一种选择，虽然不是首选，是通过 Homebrew 降级 Python。您可以通过以下方式来回切换：

```
brew switch python3 <version> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:15:13.577

升级公式时，不会删除旧版本。您将在以下位置找到旧版本： `/usr/local/Cellar/python3/3.2/`

我认为，如果您取消链接`brew unlink python3`并删除 3.3 文件夹并再次链接，`brew unlink python3`您将获得 python 3.2

我已经测试了像 youtube-dl 这样的简单公式并且它有效。

# angularjs - AngularJS - 本地指令和父范围

> ID：14224810
> 
> 赞同：2
> 
> 时间：2013-01-08T22:03:03.667
> 
> 标签：angularjs

我开始编写指令，我很确定我掌握了为指令定义“隔离”范围的整个概念。

我的指令`numberRoulette`应该用随机数为提供的数字中的每个数字（或通过属性提供的数字数量`fields="some-number-here"`）设置动画。每经过一秒，一个数字就会停止动画并设置为其预期的数字。有点像老虎机。。

```
<div ng-app="myApp">
  <div ng-controller="MasterCtrl">
    <span number-roulette fields="10" ng-model="number">
      {{number}}
    </span>
  </div>
</div> 
```

我遇到的问题是，当我在指令范围和控制器使用的范围之间进行双向绑定时`MasterCtrl`，我的值停止显示。

```
app.directive('numberRoulette', function($timeout) {
  return {
    restrict: 'A',
    scope: {showNumber: '=ngModel'},
    ...
  };
});

function MasterCtrl($scope) {
  $scope.number = 1000;
} 
```

JSFiddle：http: [//jsfiddle.net/nguyening/aX6Zm/3/](http://jsfiddle.net/nguyening/aX6Zm/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T22:19:04.073

使用`{{showNumber}}`或移出`{{number}}`跨度。

在跨度内，您只能访问指令范围属性（例如，`showNumber`），因为为指令创建了一个隔离范围。

在跨度之外，您可以访问控制器范围属性，例如`number`.

**更新：**这里不需要 ng-model。任何属性都可以，例如：

```
<span number-roulette fields="10" model="number"> 
```

然后在指令中：

```
scope: {showNumber: '=model'}, 
```

# php - 使用用户定义函数搜索 PHP 数组的优雅方式

> ID：14224812
> 
> 赞同：57
> 
> 时间：2013-01-08T22:03:04.520
> 
> 标签：php, collections, functional-programming

基本上，我希望能够获得 C++ `find_if()`、Smalltalk`detect:`等的功能：

```
// would return the element or null
check_in_array($myArray, function($element) { return $elemnt->foo() > 10; }); 
```

但我不知道有任何 PHP 函数可以做到这一点。我想出了一个“近似值”：

```
$check = array_filter($myArray, function($element) { ... });
if ($check) 
    //... 
```

这样做的缺点是代码的目的不是很清楚。此外，即使找到元素，它也不会停止对数组的迭代，尽管这更像是一个挑剔（如果数据集大到足以引起问题，线性搜索无论如何都不会成为答案）

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-08T22:09:25.890

从数组中拉出第一个，或返回`false`：

```
current(array_filter($myArray, function($element) { ... })) 
```

[有关 current() 的更多信息，请点击此处](http://php.net/manual/en/function.current.php)。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2016-03-09T02:51:20.013

这是一个基本的解决方案

```
function array_find($xs, $f) {
  foreach ($xs as $x) {
    if (call_user_func($f, $x) === true)
      return $x;
  }
  return null;
}

array_find([1,2,3,4,5,6], function($x) { return $x > 4; });  // 5
array_find([1,2,3,4,5,6], function($x) { return $x > 10; }); // null 
```

在事件`$f($x)`返回`true`时，循环短路并`$x`立即返回。与 相比`array_filter`，这对我们的用例更好，因为`array_find`在找到第一个正匹配后不必继续迭代。

如果回调从不返回 true，`null`则返回 的值。

* * *

请注意，我使用`call_user_func($f, $x)`而不是仅仅调用`$f($x)`. 这在这里很合适，因为它允许您使用任何兼容的[可调用对象](http://php.net/manual/en/language.types.callable.php)

```
Class Foo {
  static private $data = 'z';
  static public function match($x) {
    return $x === self::$data;
  }
}

array_find(['x', 'y', 'z', 1, 2, 3], ['Foo', 'match']); // 'z' 
```

* * *

当然它也适用于更复杂的数据结构

```
$data = [
  (object) ['id' => 1, 'value' => 'x'],
  (object) ['id' => 2, 'value' => 'y'],
  (object) ['id' => 3, 'value' => 'z']
];

array_find($data, function($x) { return $x->id === 3; });
// stdClass Object (
//     [id] => 3
//     [value] => z
// ) 
```

* * *

如果您使用的是 PHP 7，请添加一些类型提示

```
function array_find(array $xs, callable $f) { ... 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-18T12:31:10.410

原始`array_search`返回匹配值的键，而不是值本身（如果您稍后要更改原始数组，这可能很有用）。

试试这个功能（它也适用于关联数组）

```
function array_search_func(array $arr, $func)
{
    foreach ($arr as $key => $v)
        if ($func($v))
            return $key;

    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-08T18:47:43.033

使用`\iter\search()`来自 nikic 的基本迭代函数的[iter 库](https://github.com/nikic/iter)。它还有一个额外的好处，即它可以在数组*和* `Traversable`集合上运行。

```
$foundItem = \iter\search(function ($item) {
    return $item > 10;
}, range(1, 20));

if ($foundItem !== null) {
    echo $foundItem; // 11
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T22:15:39.870

您可以自己编写这样的函数，尽管它只不过是一个循环。

例如，此函数允许您传递回调函数。回调可以返回 0 或一个值。如果它> 10，我指定的回调返回整数。当回调返回非空值时，函数停止。

```
function check_in_array(array $array, $callback)
{
  foreach($array as $item)
  {
    $value = call_user_func($callback, $item);
    if ($value !== null)
      return $value;
  }
}

$a = array(1, 2, 3, 6, 9, 11, 15);
echo check_in_array($a, function($i){ return ($i > 10?$i:null); }); 
```

* * *

## 回答 #6

> 赞同：-79
> 
> 时间：2013-01-08T22:08:33.963

您可以编写自己的函数；）

```
function callback_search ($array, $callback) { // name may vary
    return array_filter($array, $callback);
} 
```

这可能看起来没用，但它增加了语义并且可以增加可读性

# c++ - 如何在模板结构中使用包装的 typedef 修复 c++ 编译

> ID：14224820
> 
> 赞同：1
> 
> 时间：2013-01-08T22:03:43.323
> 
> 标签：c++, templates, typedef

此代码将失败并显示错误消息（行号已关闭）。我该如何解决这个问题（保持相同的意图）？

> g++ -o c_test c_test.cpp

c_test.cpp：在函数'int main（int，char**）'中：

c_test.cpp:28:18: 错误: 没有匹配函数调用'wcalc(CWrapped<5>::u_type&)'

c_test.cpp:28:18: 注意：候选人是：

c_test.cpp:17:58: 注意：模板 int wcalc(typename CWrapped::u_type)

包装的类型被传递给“calc”和“wcalc”函数，但第二个失败了。我希望能够包装类型，以便我可以使用编译时定义来指定不同的类型，但仍然使用相同的包装函数

```
// Example template class
template <int T_B>
class m_int {
public:
  int x;
  m_int() { x = T_B; }
  int to_int() { return(x); }
};

// Desired Typedef wrap
template <int T_BITS> struct CWrapped {
  typedef m_int<T_BITS> u_type;
};

// This is ok, no wrapping
template <int T_BITS> int calc(m_int<T_BITS> x) {
  return(x.to_int());
}
// This fails when instantiated
template <int T> int wcalc(typename CWrapped<T>::u_type x) {
  return(x.to_int());
}

int main(int argc, char* argv[]) {
  CWrapped<5>::u_type s;

  int x = calc(s);
  int y = wcalc(s);
  return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:27:57.550

来自 C++11 标准，第 14.8.2.5/16 段

*“如果在声明具有非类型模板参数的函数模板中，在函数参数列表中的子表达式中使用了非类型模板参数，则该表达式是如上所述的**非推导上下文。示例：”***

```
template <int i> class A { / ... / };
template <int i> void g(A<i+1>);
template <int i> void f(A<i>, A<i+1>);
void k() {
    A<1> a1;
    A<2> a2;
    g(a1); // error: deduction fails for expression i+1
    g<0>(a1); // OK
    f(a1, a2); // OK
} 
```

*“注意：**如果模板参数仅在非推导上下文中使用，则不参与**模板实参推导。例如：”*

```
template<int i, typename T> 
T deduce(typename A<T>::X x, // T is not deduced hereT t, // but T is deduced here
typename B<i>::Y y); // i is not deduced here
A<int> a;
B<77> b;
int x = deduce<77>(a.xm, 62, b.ym);
// T is deduced to be int, a.xm must be convertible to
// A<int>::X
// i is explicitly specified to be 77, b.ym must be convertible
// to B<77>::Y 
```

`T`由于上述原因，无法推断出您的非类型模板参数：您必须明确提供它：

```
int main(int argc, char* argv[]) {
  CWrapped<5>::u_type s;

  int x = calc(s);
  int y = wcalc<5>(s); // Template argument 5 cannot be deduced!
  return(0);
} 
```

另请参阅此相关链接：[C++，模板参数无法推断](https://stackoverflow.com/questions/6060824/c-template-argument-can-not-be-deduced)（@NateKohl 提供）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:31:58.600

您的问题是，这是从依赖上下文中的`CWrapped`映射。`int``u_type`

您需要一个从`u_type`到的映射`int`才能进行类型推导。

模板类型推导是简单的模式匹配，它不会反转任意模板结构。

例如，以下是如何提取`CWrapped`将解析为`T`：

```
template<typename T>
struct GetWrapped;

template<int N>
struct GetWrapped< m_int<N> > {
  typedef CWrapped< N > type;
};

template <int T> int wcalc(T const& x) {
  typedef typename GetWrapped<T>::type CWrappedType; // assuming you need it for something
  return(x.to_int());
} 
```

以下是您只能接受`T`在重载决议中有这样一个映射的方式：

```
#include <type_traits>
template <int T> auto wcalc(T const& x)->typename std::enable_if< sizeof(typename GetWrapped<T>::type), int>::type  {
  return(x.to_int());
} 
```

它使用 SFINAE 和 C++11 特性来检查这`GetWrapped<T>`是一个有效的构造。

现在，这可能是一个 XY 问题，就像您问过 X 一样，但您确实需要知道 Y。我希望上述其中一项会有所帮助。

# python - 添加到继承的初始化？

> ID：14224826
> 
> 赞同：0
> 
> 时间：2013-01-08T22:04:01.970
> 
> 标签：python

假设我有一些创建类的代码：

```
class Item:
    def __init__(self, param1):
        do something with param1 
```

现在假设我有一个对象ItemChild，它继承自那个类并继承了它的初始化函数，即有一些调用Item`__init__`函数的代码。但是，假设我还希望它在其`__init__`功能上做得更多，并且我希望它可以使用更多参数，即 param1、param2、param3 和 param4。似乎对父`__init__`函数的调用现在会被混淆，因为当我将参数 1-3 传递给 ItemChild 的实例时，它不知道哪个参数是 param1。有没有办法解决这个问题，或者初始化方法的继承仅限于该方法并且不能扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:06:25.027

它实际上会以相反的方式工作 -`ItemChild`的`__init__`方法将首先被调用，并且只能转发适合的内容`Item`：

```
class Item:
    def __init__(self, param1):
        print "Item.__init__ doing something with param1"
        # do something with param1

class ItemChild(Item):
    def __init__(self, param1, param2, param3):
        print "Starting ItemChild.__init__"
        super(ItemChild, self).__init__(param1)
        print "ItemChild.__init__ doing something with params 2 and 3"
        # do something with param2 and param3 
```

调用时`ItemChild(1, 2, 3)`的流程如下：

```
Starting ItemChild.__init__
Item.__init__ doing something with param1
ItemChild.__init__ doing something with params 2 and 3 
```

不是：

```
Item.__init__ doing something with param1
Starting ItemChild.__init__
ItemChild.__init__ doing something with params 2 and 3 
```

当然，您可以重新安排您的`super`呼叫，使其在您做其他事情之前或之后运行 - 或者如果您不想让父母的行为运行，您可以完全忽略它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T22:08:01.800

以下是处理此类场景的正确方法：

```
class Item(object):
    def __init__(self, param1):
        # do something with param1

class ItemChild(Item):
    def __init__(self, param1, param2, param3, param4):
        super(ItemChild, self).__init__(param1)
        # do something with params 
```

请注意，`Item`继承自`object`很重要，因为[`super()`](http://docs.python.org/2/library/functions.html#super)仅适用于新型类。

如评论中所述，在 3.x 中，您不需要包含 的参数`super()`，您只需使用`super().__init__(param1)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T22:05:16.753

不，只需根据需要委托孩子的论点`__init__`。

```
class Parent(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

class Child(Parent):
    def __init__(self, w, x, y, z):
        Parent.__init__(self, x, y)
        self.w = w
        self.z = z

p = Parent(1, 2)
# p.x == 1
# p.y == 2
c = Child(1, 2, 3, 4)
# c.w = 1
# c.x = 2
# c.y = 3
# c.z = 4 
```

您也可以使用`super`其他示例中提到的方法。在大多数情况下，这主要是个人喜好问题，但是当您开始设计更高级的课程时，差异就变得很重要。 `super`将按`__init__()`MRO 顺序查找类父级的方法，并在必要时协同调用。直接调用超类的`__init__()`方法会牺牲一些用于显式控制的自动功能。此外，使用 时`super`，您必须小心`__init__()`孩子将发现的所有方法都具有兼容的签名，否则您将获得异常。

# c - C中“引用”和“取消引用”的含义

> ID：14224831
> 
> 赞同：75
> 
> 时间：2013-01-08T22:04:36.753
> 
> 标签：c, pointers, reference, dereference

我在互联网上阅读了不同的内容并感到困惑，因为每个网站都说不同的东西。

我阅读了有关`*`引用运算符和`&`取消引用运算符的信息；或者引用意味着使指针指向变量，而取消引用是访问指针指向的变量的值。所以我很困惑。

我能得到一个关于“引用和解除引用”的简单而透彻的解释吗？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-08T22:15:56.457

**引用**意味着获取现有变量的地址（使用 &）来设置指针变量。为了有效，必须将指针设置为与指针相同类型的变量的地址，不带星号：

```
int  c1;
int* p1;
c1 = 5;
p1 = &c1;
//p1 references c1 
```

**取消引用**指针意味着使用 * 运算符（星号字符）从指针指向的内存地址中检索值： 注意：存储在指针地址处的值必须是与类型相同的值变量指针“指向”，但除非指针设置正确，否则**不能保证**会出现这种情况。指针指向的变量类型是减去最外层星号的类型。

```
int n1;
n1 = *p1; 
```

**无效的取消引用**可能会也可能不会导致崩溃：

*   取消引用未初始化的指针可能会导致崩溃
*   使用无效类型转换取消引用将有可能导致崩溃。
*   取消引用指向动态分配并随后被取消分配的变量的指针可能会导致崩溃
*   取消引用指向已经超出范围的变量的指针也可能导致崩溃。

**无效引用**比崩溃更容易导致编译器错误，但是依赖编译器来解决这个问题并不是一个好主意。

参考：

[http://www.codingunit.com/cplusplus-tutorial-pointers-reference-and-dereference-operators](http://www.codingunit.com/cplusplus-tutorial-pointers-reference-and-dereference-operators)

```
& is the reference operator and can be read as “address of”.
* is the dereference operator and can be read as “value pointed by”. 
```

[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)

```
& is the reference operator    
* is the dereference operator 
```

[http://en.wikipedia.org/wiki/Dereference_operator](http://en.wikipedia.org/wiki/Dereference_operator)

```
The dereference operator * is also called the indirection operator. 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-08T22:16:46.657

我总是听到它们被用在相反的意义上：

*   `&`是引用运算符 - 它为您提供某个对象的引用（指针）

*   `*`是解引用操作符——它接受一个引用（指针）并返回被引用的对象；

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-08T22:17:25.067

首先，您将它们倒退：`&`是引用和`*`取消引用。

引用变量意味着访问变量的内存地址：

```
int i = 5;
int * p;
p = &i; //&i returns the memory address of the variable i. 
```

取消引用变量意味着访问存储在内存地址中的变量：

```
int i = 5;
int * p;
p = &i;
*p = 7; //*p returns the variable stored at the memory address stored in p, which is i.
//i is now 7 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-09T05:38:59.767

找到以下解释：

```
int main()
{
    int a = 10;// say address of 'a' is 2000;
    int *p = &a; //it means 'p' is pointing[referencing] to 'a'. i.e p->2000
    int c = *p; //*p means dereferncing. it will give the content of the address pointed by 'p'. in this case 'p' is pointing to 2000[address of 'a' variable], content of 2000 is 10\. so *p will give 10\. 
} 
```

结论 ：

1.  `&`[地址运算符]用于引用。
2.  `*`[star operator] 用于取消引用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-07-30T20:07:07.757

* 所在的上下文有时会混淆含义。

```
 // when declaring a function
int function(int*); // This function is being declared as a function that takes in an 'address' that holds a number (so int*), it's asking for a 'reference', interchangeably called 'address'. When I 'call'(use) this function later, I better give it a variable-address! So instead of var, or q, or w, or p, I give it the address of var so &var, or &q, or &w, or &p.   

//even though the symbol ' * ' is typically used to mean 'dereferenced variable'(meaning: to use the value at the address of a variable)--despite it's common use, in this case, the symbol means a 'reference', again, in THIS context. (context here being the declaration of a 'prototype'.) 

    //when calling a function
int main(){ 
    function(&var);  // we are giving the function a 'reference', we are giving it an 'address'
  } 
```

因此，在*声明*int 或 char 等*类型*的上下文中，我们将使用*解引用*器 ' * ' 来实际表示*引用（地址）*，如果您看到来自编译器的错误消息说：'expecting char*' 要求地址。

在这种情况下，当 * 位于*类型*（int、char 等）之后时，编译器会期望变量的地址。我们通过使用引用运算符来赋予它，在变量之前也称为*地址*运算符'&'。更进一步，在我刚才编造的情况下，编译器期望地址保存一个字符值，而不是一个数字。（类型 char * == 具有字符的值的地址）

```
int* p;
int *a;   // both are 'pointer' declarations. We are telling the compiler that we will soon give these variables an address (with &).

int c = 10;  //declare and initialize a random variable
//assign the variable to a pointer, we do this so that we can modify the value of c from a different function regardless of the scope of that function (elaboration in a second)

p = c; //ERROR, we assigned a 'value' to this 'pointer'. We need to assign an 'address', a 'reference'.
p = &c; // instead of a value such as: 'q',5,'t', or 2.1 we gave the pointer an 'address', which we could actually print with printf(), and would be something like
//so
p = 0xab33d111; //the address of c, (not specifically this value for the address, it'll look like this though, with the 0x in the beggining, the computer treats these different from regular numbers)
*p = 10; // the value of c

a = &c; // I can still give c another pointer, even though it already has the pointer variable "p"

*a = 10;
 a = 0xab33d111; 
```

将每个变量视为具有位置（如果您熟悉数组，则为索引值）和值。可能需要一些时间来习惯认为每个变量都有两个值，一个值是它的位置，与计算机中的电力一起物理存储，另一个值代表程序员想要存储的任何数量或字母。

```
//Why it's used
int function(b){
    b = b + 1; // we just want to add one to any variable that this function operates on.
} 

int main(){

    int c = 1;  // I want this variable to be 3.

    function(c); 
    function(c);// I call the function I made above twice, because I want c to be 3.

     // this will return c as 1\. Even though I called it twice.
     // when you call a function it makes a copy of the variable.
     // so the function that I call "function", made a copy of c, and that function is only changing the "copy" of c, so it doesn't affect the original
}
  //let's redo this whole thing, and use pointers

int function(int* b){ // this time, the function is 'asking' (won't run without) for a variable that 'points' to a number-value (int). So it wants an integer pointer--an address that holds a number.
*b = *b + 1; //grab the value of the address, and add one to the value stored at that address
}

int main(){
    int c = 1; //again, I want this to be three at the end of the program
    int *p = &c; // on the left, I'm declaring a pointer, I'm telling the compiler that I'm about to have this letter point to an certain spot in my computer. Immediately after I used the assignment operator (the ' = ') to assign the address of c to this variable (pointer in this case) p. I do this using the address-of operator (referencer)' & '.
    function(p); // not *p, because that will dereference. which would give an integer, not an integer pointer ( function wants a reference to an int called int*, we aren't going to use *p because that will give the function an int instead of an address that stores an int.

    function(&c); // this is giving the same thing as above, p = the address of c, so we can pass the 'pointer' or we can pass the 'address' that the pointer(variable) is 'pointing','referencing' to. Which is &c. 0xaabbcc1122...

      //now, the function is making a copy of c's address, but it doesn't matter if it's a copy or not, because it's going to point the computer to the exact same spot (hence, The Address), and it will be changed for main's version of c as well.

} 
```

在每个块中，它复制传入的变量（如果有的话）（通过“（）”中的参数）。在这些块中，对变量的更改是对该变量的**副本**进行的，该变量使用相同的字母但位于不同的地址（与原始地址不同）。通过使用原始地址“引用”，我们可以使用 main 之外的块或 main 的子项内部的块来更改变量。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-18T01:21:58.400

## 参考

`&`是参考运算符。它将内存地址引用到指针变量。

### 例子：

```
int *p;
int a=5;
p=&a; // Here Pointer variable p refers to the address of integer variable a. 
```

## 取消引用

指针变量使用解引用运算符`*`直接访问变量的值而不是其内存地址。

### 例子：

```
int *p;
int a=5;
p=&a;
int value=*p; // Value variable will get the value of variable a that pointer variable p pointing to. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-29T15:48:01.997

解引用指针的引用也与指向变量的地址相同。

解释 ：-

整数变量 = 3; 诠释* p;

p = &var;

所以，让我们认为 var 的地址是：ABCDE

然后，

p = ABCDE 和 &*p = ABCDE；

这意味着将 &* 放在一起，中性引用和取消引用。

* * *

在声明函数时，

函数的参数应该是指针，

并且在 main 方法中调用 this 函数的参数中应该使用 & 运算符。

这有点令人困惑。但请记住 int *p = &var; 与上述指针声明一样也是正确的。

# objective-c - Xcode 断言失败消息未显示在控制台日志中

> ID：14224845
> 
> 赞同：2
> 
> 时间：2013-01-08T22:06:01.900
> 
> 标签：objective-c, xcode, foundation, nsassert

我正在使用最新的 Xcode，并`NSAssert()`在我的代码中进行了调用。当其中一个断言失败时，执行停止，并且控制台日志指出发生了断言错误，但`NSAssert()`调用中的消息不会显示在控制台日志中。例如：

```
NSAssert( 1 != 1, @"Foo bar." ); 
```

不会导致消息“Foo bar”。显示在控制台日志中。我的理解是应该的。任何想法可能会发生什么？

# asp.net - 获取 400 错误请求错误调用 java web 服务

> ID：14224847
> 
> 赞同：0
> 
> 时间：2013-01-08T22:06:05.457
> 
> 标签：asp.net, webservices-client, http-status-code-400

我正在从我的 asp.net 应用程序连接到 java web 服务，但我收到 400 Bad request 异常。

我在我的项目中添加了一个 Web 引用，并使用它在代码中进行连接，如下所示：

客户端是 Web 服务引用对象。

```
 NetworkCredential credentials = new NetworkCredential("", "");
        client.Credentials = credentials;

        client.PreAuthenticate = true;
        client.RequestEncoding = Encoding.UTF8;

        object response = client.getmethod(req); 
```

我也试过放

```
 client.UnsafeAuthenticatedConnectionSharing = true;
        client.AllowAutoRedirect = true; 
```

但它仍然不起作用并给我同样的错误。如果我从我的机器上尝试使用 Soap-UI，则该请求有效。

要添加，如果我没有将身份验证类型选择为“PreEmptive”，我也会在 SoapUI 中收到 ClientProtocol 错误。有没有办法在 asp.net 中设置它。

任何想法将不胜感激。

# asp.net-mvc-4 - 发布后保留表单值（不是模型的一部分）

> ID：14224850
> 
> 赞同：6
> 
> 时间：2013-01-08T22:06:12.467
> 
> 标签：asp.net-mvc-4, entity-framework-5

我有一个 MVC4 页面，它有一个表单，其中包含用作搜索字段的复选框、单选按钮和文本框。发布后，解析选择并使用新结果更新较低的结果网格。现在所有的表单值在返回时都会被清除，新的结果会显示在网格中——只有网格是模型的一部分。

我希望所有表单选择在发布后保留其值，以便用户可以查看（并更改）下一个帖子/搜索的选择。表单填充了 viewbags。

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { id = "searchform" }))
{
    @Html.ValidationSummary("Please correct the following errors")

<div style="float:left;">

    <div style="float:left;">
    <label>Name:</label>
    @Html.TextBox("name")
    </div>

    <div style="float:left; margin-left:15px">
    <label>Company:</label>
    @Html.TextBox("company")
    </div>

    <div style="float:left; margin-left:65px">
    <label>Date Range:</label>
    @Html.TextBox("dateStart", "", new { @class = "datefield", type = "date" })
    &nbsp;to&nbsp;
    @Html.TextBox("dateEnd", "", new { @class = "datefield", type = "date" })
    </div>

</div>

<div style="clear: both;">
    Match Any Categories? <input type="radio" name="categoryMatchAll" value="false" checked="checked" />&nbsp;&nbsp;&nbsp;
    Match All Categories?  <input type="radio" name="categoryMatchAll" value="true" /> 
</div>

<div style="float:left;">

    <div id="searchform-categories" style="float:left;">
        <div class="scroll_checkboxes">
            <label>Categories</label>
            <ul>
            @foreach (var x in ViewBag.Categories)
            {
                    <li>
                        <input type="checkbox" name="categories" value="@x.Id"/>

                        @x.Name

                    </li>
            }
            </ul>
        </div>
    </div>

    <div id="searchform-diversity" style="float:left; margin-left:30px">    
        <div class="search-selection" style="float:left;">
            <label>Minority Owned</label>
            <ul>
                @foreach (var x in ViewBag.Minorities)
                {
                    <li>
                        @Html.RadioButton("minorities", (String)x.Id.ToString())
                        @x.Name
                    </li>
                }
            </ul>
        </div>
        <div class="search-selection" style="float:left;">
            <label>Diversity Class</label>
            <ul>
            @foreach (var x in ViewBag.Classifications)
            {
                <li>
                    @Html.RadioButton("classifications", (String)x.Id.ToString())
                    @x.Name
                </li>
            }
        </ul>
        </div>    
    </div>  

</div>    

<div style="clear: both;">
    <input type="submit" value="Search Profiles" />
    <input type="submit" value="Reset" />
    </div>       
} 
```

数据网格绑定到模型为

```
@model IEnumerable<VendorProfileIntranet.Models.VendorProfile>

<table id="VendorTable" width="100%" class="gradeA">
<thead>
    <tr>
    <th>
        @Html.DisplayNameFor(model => model.Name)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.CompanyName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.City)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.State)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.DateCreated)
    </th>
    <th>Actions</th>
    </tr>
</thead>
<tbody>

@foreach (var item in Model)
{
<tr>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.Name)
    </td>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.CompanyName)
    </td>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.City)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.State)
    </td>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.DateCreated)
    </td>
    <td class="list-field">
        @Html.ActionLink("Edit", "Edit", new { id = item.ProfileID }) |
        @Html.ActionLink("View", "View", new { id = item.ProfileID }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.ProfileID }, new { onclick = " return DeleteConfirm()" })
    </td>
</tr>

}

</tbody>
<tfoot>
    <tr>
        <td>&nbsp;</td>
    </tr>
</tfoot> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-30T08:03:11.873

如果您在 mvc 中使用 html，请从[这里](http://www.codeproject.com/Questions/774540/how-to-retain-text-box-values-after-postback-in-as)检查解决方案 2，对我来说`value="@Request["txtNumber1"]"`效果很好，

```
<input type="text" id="txtNumber1" name="txtNumber1" value="@Request["txtNumber1"]"/> 
```

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:51:44.713

我通常做的是将发布的模型传回视图。这样，值不会被清除。

您的代码将如下所示：

```
<div style="float:left;">

    <div style="float:left;">
    <label>Name:</label>
    @Html.TextBox("name", Model.Name)
    </div>

<div style="float:left; margin-left:15px">
<label>Company:</label>
@Html.TextBox("company", Model.Company)
</div>

<div style="float:left; margin-left:65px">
<label>Date Range:</label>
@Html.TextBox("dateStart", Model.DateStart, new { @class = "datefield", type = "date" })
&nbsp;to&nbsp;
@Html.TextBox("dateEnd", Model.DateEnd, new { @class = "datefield", type = "date" })
</div> 
```

最初获取表单时，您必须创建一个 new `Model`，否则`Model`它将为 null 并在对其调用属性时引发异常。

**样品模型**

```
public class SearchModel
{

    public SearchModel()
    {
        Results = new List<Result>();
    }

    public string Name {get; set;}  

    public string Company {get; set;}

    public string DateStart {get; set;}

    public string DateEnd {get; set;}

    public List<Result> Results {get; set;}
}

@foreach (var item in Model.Results)
{
<tr>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.Name)
    </td>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.CompanyName)
    </td>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.City)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.State)
    </td>
    <td class="list-field">
        @Html.DisplayFor(modelItem => item.DateCreated)
    </td>
    <td class="list-field">
        @Html.ActionLink("Edit", "Edit", new { id = item.ProfileID }) |
        @Html.ActionLink("View", "View", new { id = item.ProfileID }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.ProfileID }, new { onclick = " return DeleteConfirm()" })
    </td>
</tr>

} 
```

这是在 MVC 中为视图创建模型的[链接](http://www.dotnetfunda.com/articles/article1317-how-to-create-a-simple-model-in-aspnet-mvc-and-display-the-same-tutorial.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:03:29.190

所以这就是我通常如何解决这个问题。我的笔记纯粹是我关于在 MVC 项目中命名类以明确其目的的观点（宗教？）。

几个接口来保持它的可扩展性：

```
// be specific about what type of results, both in the name of the 
// interface and the property needed, you don't want to have overlapping
// properies on your classes, I like suffixing interfaces that are specific
// to a View or Partial View with View
public interface IPersonSearchResultsView
{
   IEnumerable<EFPerson> PersonSearchResults { get; }
}

public interface IPersonSearchCriteriaView
{
  PersonSearchCriteriaModel PersonSearchModel { get; }
} 
```

几节课

```
// I like suffixing classes that I only use for MVC with Model
public PersonSearchCriteriaModel
{
  public string Name {get; set;}  
  public string Company {get; set;}
  public string DateStart {get; set;}
  public string DateEnd {get; set;}
}

// I like suffixing classes that I used passed to a View/Partial View
// with ViewModel    
public class PersonSearchViewModel : IPersonSearchResultsView, 
                                     IPersonSearchCriteriaView
{
  public IEnumerable<EFPerson> PersonSearchResults { get; set; }
  public PersonSearchCriteriaModel PersonSearchModel { get; set; }
} 
```

现在对于您的控制器，我将以一种允许您将来使用 Ajax 的方式设置它们。

```
public PersonController : Controller
{
  public ActionResult Search()
  {
    var model = new PersonSearchViewModel();
    // make sure we don't get a null reference exceptions
    model.PersonSearchModel = new PersonSearchCriteriaModel ();
    model.PersonSearchResults = new List<EFPerson>();
    return this.View(model);
  }

  [HttpPost]
  public ActionResult Search(PersonSearchViewModel model)
  {
    model.PersonSearchResults = this.GetPersonResults(model.PersonSearchModel);

    return this.View(model)
  }

  // You could use this for Ajax
  public ActionResult Results(PersonSearchViewModel model)
  {
    model.PersonSearchResults = this.GetPersonResults(model.PersonSearchModel);

    return this.Partial("Partial-SearchResults", model)
  }

  private GetPersonResults(PersonSearchCriteriaModel criteria)
  {
    return DbContext.GetPersonResults(criteria)
  }
} 
```

创建几个局部视图您的视图。

**/Views/Person/Partial-SearchCriteria.cshtml**

```
@model IPersonSearchCriteriaView

// the new part is for htmlAttributes, used by Ajax later
@using (Html.BeginForm(..., new { id="searchCriteria" }))
{
  // Here is were the magic is, if you use the @Html.*For(m=>)
  // Methods, they will create names that match the model
  // and you can back back to the same model on Get/Post

  <label>Name:</label>
  @Html.TextBoxFor(m => Model.PersonSearchModel.Name)

  // or let mvc create a working label automagically

  @Html.EditorFor(m => Model.PersonSearchModel.Name)

  // or let mvc create the entire form..

  @Html.EditorFor(m => Model.PersonSearchModel)
} 
```

**/Views/Person/Partial-SearchResults.cshtml**

```
@model IPersonSearchResultsView

@foreach (var person in Model.PersonSearchResults )
{
  <tr>
    <td class="list-field">
      @Html.DisplayFor(modelItem => person.Name)
   </td>

   // etc
  </tr>
 } 
```

最后是观点：

**/Views/Person/Search.cshtml**

```
@model PersonSearchViewModel 

@Html.Partial("Partial-SearchCriteria", Model)

// easily change the order of these

<div id="searchResults">
@Html.Partial("Partial-SearchResults", Model);
</div> 
```

现在启用 Ajax 非常简单（很简单，但我并不完全正确）：

```
$.Ajax({
  url: '/Person/Results',
  data: $('#searchCriteria').serialize(),
  success: function(jsonResult)
  {
    $('#searchResults').innerHtml(jsonResult);
  }); 
```

# c++ - 函数“memcpy”的参数太少

> ID：14224857
> 
> 赞同：14
> 
> 时间：2013-01-08T22:06:43.037
> 
> 标签：c++, c, memory

我的理解是 memcpy 必须有 3 个参数：

```
void * memcpy ( void * destination, const void * source, size_t num ); 
```

所以我正在尝试这段代码：

```
//char *tmpPtr is a pointer that points to some data
char frameBuffer[921600]; //destination starting a given index
int bufferIndex;//the given index
memccpy(frameBuffer+bufferIndex,tmpPtr,Data.size()-1); 
```

但我收到此错误：

> 错误：函数 `void * memccpy (void *, const void *, int, size_t) 的参数太少

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-08T22:07:56.323

错字：

```
memccpy
   ^^ 
```

你调用了错误的函数。

`memccpy``int`在遇到应停止复制的字符（作为参数）时，它也需要一个字符。

# android - listfragment 中的 listview 不起作用

> ID：14224858
> 
> 赞同：0
> 
> 时间：2013-01-08T22:06:52.710
> 
> 标签：android, android-listview, android-fragments, android-listfragment

我想以这种方式更改我的 android 应用程序，即我实现片段。在 Mainactivity 中，我从 xml 文件中获取内容，我想用片段中的列表视图填充该内容。但不幸的是它不起作用，请你能帮助我吗？这是代码。片段布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

   <ListView
    android:id="@id/android:list"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:background="#00FF00"
       android:drawSelectorOnTop="false" />

       <TextView 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"     
        android:id="@+id/toptext"/>  

</LinearLayout> 
```

这是片段文件：

```
public class RoomFragment extends ListFragment {
    public RoomFragment() {

    }

    private MyArrayAdapter mAdapter;

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ((Dailyquran)getActivity()).main(); // Here I am calling the method in the parent activity to get the content from the xml file. It fills "Tweets"
        Dailyquran basem = (Dailyquran)getActivity();  

         View v = inflater.inflate(R.layout.fragmentlayout, container, false);

      final ListView lv = getListView();

       mAdapter = new MyArrayAdapter(getActivity(), android.R.layout.simple_list_item_1, basem.tweets);

       lv.setAdapter(mAdapter);

       return v;

    }

    public class MyArrayAdapter extends ArrayAdapter<Tweet>
    {
    Context mContext;
    private ArrayList<Tweet> tweets;
    Tweet data;

    public MyArrayAdapter(Context context, int textViewResourceId, ArrayList<Tweet> items) 
    {
        super(context,textViewResourceId, items);
        mContext = context;
        this.tweets = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;

        if(row == null)
        {

            LayoutInflater inflater =((Activity)mContext).getLayoutInflater();
            row = inflater.inflate(R.layout.fragmentlayout, null, false);
                TextView tt = (TextView) row.findViewById(R.id.toptext); 

        }
        else
        {
            TextView tt = (TextView) row.findViewById(R.id.toptext); 
        }

        Tweet o = tweets.get(position);  
        TextView tt = (TextView) row.findViewById(R.id.toptext);

        String survers=o.content;         
        tt.setText(survers);       

        return row;
    }

    }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:08:06.770

您只需要在 ListView 中使用适当的 id：

```
android:id="@android:id/list" 
```

# objective-c - 使用本地化标准比较对 NSURL 进行排序的性能

> ID：14224863
> 
> 赞同：1
> 
> 时间：2013-01-08T22:07:09.730
> 
> 标签：objective-c, performance, macos, cocoa

我需要使用localizedStandardCompare 对包含NSURL 的NSMutableArray 进行排序：

```
[array sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSString *f1 = [(NSURL *)obj1 absoluteString];
    NSString *f2 = [(NSURL *)obj2 absoluteString];
    return [f1 localizedStandardCompare:f2];
}]; 
```

这很好用，但我有点担心性能：在排序过程中，块将被评估 n log n 次，所以我希望它快（数组可能有多达 100,000 个元素）。由于localizedStandardCompare 仅在NSString 上可用，我需要将URL 转换为字符串。上面，我使用`absoluteString`，但还有其他方法返回 NSString，例如 relativeString。阅读 NSURL 类参考，我觉得 relativeString 可能更快，因为不需要解析 URL，但这是我第一次使用 Cocoa 和 OS-X，因此只是一个疯狂的猜测。

附加限制：在这种情况下，所有 URL 都来自本地存储上的 NSDirectoryEnumerator，因此都是文件 URL。不过，如果该方法适用于所有类型的 URL，那将是一个好处。

我的问题：我应该使用哪种方法将 NSURL 转换为 NSString 以获得最佳性能？

分析所有可能的方法可能是可能的，但我只有一台（相当快的）OS-X 机器，谁知道 - 有一天代码可能最终会出现在 iOS 上。

我在 OS-X 10.8.2 上使用 Xcode 4.5.2，但该程序也应该在旧版本上运行（在合理范围内）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:50:08.347

您可能需要使用 Carbon 的 FSCatalogSearch，它比 NSDirectoryEnumerator 更快。至于获得路径，我认为别无选择。

您可以考虑加快排序的唯一事情是路径是部分排序的，因为文件系统将按字母顺序返回同一文件夹的所有文件。

因此，您可能希望获取同一目录的所有路径并将它们与其他结果合并。

例如，主页内容可能是：

> ab1.txt
> bb.txt
> c.txt

文档目录可能包含：

> adf.txt
> fgh.txt

因此，您只需将它们与自定义算法合并，该算法仅应用合并排序的合并部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:02:31.687

我对排序进行了基准测试。事实证明`absoluteString`和比or`relativeString`快得多。`path``relativePath`

对大约 26000 个条目进行排序：

```
relativeString      550ms
absoluteString      580ms
path                920ms
relativePath        960ms
field access        480ms 
```

对于*字段访问*，我在排序之前将 的值`absoluteString`放入一个字段中并访问它。因此，`...String`访问器几乎与字段访问一样快，因此对于我的用例来说是一个不错的选择。

# php - PHP LDAP 连接从外部服务器对 Active Directory 进行身份验证

> ID：14224864
> 
> 赞同：0
> 
> 时间：2013-01-08T22:07:11.193
> 
> 标签：php, active-directory, ldap

我有一个外部 Web 服务器尝试通过 LDAP 对内部服务器上的 Active Directory 进行身份验证。我能够在本地进行连接和身份验证，尽管使用相同的代码（切换主机和端口）无法在外部进行身份验证。我们还有其他能够连接和验证的服务，例如 Attask (http://www.attask.com/)。

外部服务器当前是 Media Temple 上的 Linux (gs)，运行 PHP 5.3.15 并启用了 LDAP 支持。

内部服务器当前是带有 LDAP 和 Active Directory 的 Windows Server 2008 机器。

下面的代码是我正在使用的当前 PHP，它能够在本地连接，但在外部服务器上出现问题。它基本上使用 PHP LDAP 连接字符串并尝试绑定。如果失败，它会尝试匿名绑定。两者都不能在外部工作并返回错误：无法联系 LDAP 服务器。

```
<?php
$username = 'username';
$password = 'password';

$ldapconfig['host'] = '00.000.000.000';
$ldapconfig['port'] = '636';
$ldapconfig['basedn'] = 'dc=client,dc=eqc,dc=local';

$ds=ldap_connect($ldapconfig['host'], $ldapconfig['port']);

ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($ds, LDAP_OPT_REFERRALS, 0);
ldap_set_option($ds, LDAP_OPT_NETWORK_TIMEOUT, 10);

$dn="".$username."";

if ($bind=ldap_bind($ds, $dn, $password)) {
  echo("Login correct");
} else {

  echo("Unable to bind to server.</br>");

  echo("msg:'".ldap_error($ds)."'</br>".ldap_errno($ds)."");

  if ($bind=ldap_bind($ds)) {

    $filter = "(cn=*)";

    if (!($search=@ldap_search($ds, $ldapconfig['basedn'], $filter))) {
      echo("Unable to search ldap server<br>");
      echo("msg:'".ldap_error($ds)."'</br>");
    } else {
      $number_returned = ldap_count_entries($ds,$search);
      $info = ldap_get_entries($ds, $search);
      echo "The number of entries returned is ". $number_returned."<p>";
      for ($i=0; $i<$info["count"]; $i++) {
        var_dump($info[$i]);
      }
    }
  } else {
    echo("Unable to bind anonymously<br>");
    echo("msg:".ldap_error($ds)."<br>");
  }
}
?> 
```

几点注意事项：

*   外部 LDAP 服务器正在使用 LDAPS，因此建议的主机是端口 636 上的 ldaps://00.000.000.000

*   我已经尝试与“用户名”和“用户名@00.000.000.000”绑定

*   有防火墙，但是，外部服务器可以成功地 ping 内部 LDAP 服务器，因此在该级别上发生了连接。

任何帮助将不胜感激。如果有服务器设置或那种性质的东西，很想知道。此外，我已经检查了 ADFS，但找不到一个简单的脚本来设置来测试，如果它不起作用，则无需花费大量时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:37:28.663

从 Linux 机器使用 LDAPS 连接到 AD 时，我总是不得不添加该行

```
TLS_REQCERT never 
```

在 /etc/ldap.conf 或等效文件中（可能需要重新启动 apache - 不确定）。您也可以为主机尝试格式“ldaps://server.domain.tld:636”，但我认为这不是问题所在。

[我在http://en.gentoo-wiki.com/wiki/Active_Directory_Authentication_using_LDAP](http://en.gentoo-wiki.com/wiki/Active_Directory_Authentication_using_LDAP)找到了一些不错的文档，尽管它目前似乎已关闭。Google 的缓存版本：[http ://webcache.googleusercontent.com/search?q=cache:http://en.gentoo-wiki.com/wiki/Active_Directory_Authentication_using_LDAP](http://webcache.googleusercontent.com/search?q=cache:http://en.gentoo-wiki.com/wiki/Active_Directory_Authentication_using_LDAP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:25:33.583

您是否检查过它是否是 SSL 证书错误？您使用的是自签名证书还是官方证书？

“如果您使用 SSL（例如 ldaps）并且 ldap_bind 抛出‘无法绑定到服务器：’错误，请检查 ldap_connect 中使用的主机名是否与 LDAP 服务器上 SSL 证书中的‘CN’相匹配” [来源](http://php.net/manual/de/function.ldap-bind.php)

# django - django会话随机超时

> ID：14224866
> 
> 赞同：1
> 
> 时间：2013-01-08T22:07:23.457
> 
> 标签：django, session, nginx, uwsgi

**我有一个网站，我在 django 上写网站已经有一段时间了，但以前从未遇到过这样的事情......**

*麻烦的是*，当我登录时，一切似乎都很好，但是当浏览随机页面时，经常发生的事情是，{% if user.is_authenticated %} {%endif %} 之间的代码消失了，因为我没有登录，虽然我只是。

如果我回到我登录的上一页，在转到下一页之前，它显示我再次登录，并且完全随机发生。这不像是在特定动作之后发生的。

通常，当我故意尝试这样做时，一切正常，但是随着时间的流逝，会发生类似的事情。虽然如果进入登录页面，虽然它随机显示我已注销，但它会自动将我记录回来，因为就像我理解会话确实存在一样，由于某种原因 django 只是没有看到它.....

我很困惑可能出了什么问题。任何可能的建议都会很棒。

**1）**我没有使用任何会话功能。基本上没有任何东西可以故意触发这些事件。只是视图中的简单逻辑并返回 render_to_response('template', RequestContext(request, {}))

**2)** Django 在*nginx*和*uwsgi上运行*

**3）**这里是网站[站点](http://www.bet-tip.net)，目前正在开发中，但是你可以用用户测试登录，密码测试试试......也许会出现同样的效果，你会看到它......但我不保证它会立即发生，它是完全随机的。要尝试，您只需单击随机页面.....最终您会看到它显示您已注销，尽管您没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:46:00.603

您的帖子没有为我们提供太多信息，并且您的页面超时。

我最好的建议是将`login_required`装饰器添加到您的所有视图中。如果您实际上正在注销，您将能够看到发生这种情况的位置。

将导入添加到页面顶部，并在每个视图上方添加装饰器，如下所示：

```
from django.contrib.auth.decorators import login_required

@login_required(login_url='LINK_TO_LOGIN_URL')  
def first_view(request):
    # Your view code 
```

在您未登录的任何时候，您都会被重定向到您的登录 URL。

一旦您诊断出您被注销的位置，您应该能够更轻松地进行故障排除。如果您能够访问每个视图，则可以对模板和`is_authenticated`代码进行故障排除。

# ruby-on-rails - Rails 3.1.10 的冲突更新

> ID：14224872
> 
> 赞同：2
> 
> 时间：2013-01-08T22:07:52.487
> 
> 标签：ruby-on-rails, ruby, bundler

我目前在版本 3.1.3 上运行我的 Rails 应用程序之一。我的 gemfile 总是列出：

`gem 'rails', '3.1.3'`

这工作得很好。为了迁移到 3.1.10，我将 Gemfile 更改为以下内容：

`gem 'rails', '~> 3.1.10'`

令人惊讶的是，当我在更改之后运行时，事情就中断`bundle update rails`了：

```
Bundler could not find compatible versions for gem "multi_json":
  In Gemfile:
    twitter (>= 0) ruby depends on
      multi_json (~> 1.3) ruby

    fnordmetric (>= 0) ruby depends on
      multi_json (1.2.0) 
```

就像测试一样，我尝试将 gem 版本更改为`'>= 3.1.0'`并且没有任何 quims 安装，尽管它已经到了 3.2，我还没有准备好在这个特定的应用程序上。

有什么建议可以让这个东西在今天发布的 3.1.10 上运行以解决安全漏洞？

还有一个更新：

从 Rails 3.1.4 开始，我完全没有问题将 Gemfile.lock 藏起来。一旦我尝试转到 3.1.5+，这就是所有麻烦的开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:18:43.350

将您的 Gemfile 更改为

```
gem 'rails', '3.1.10' 
```

然后尝试运行

```
bundle update 
```

代替

```
bundle install 
```

我看不到您的 Gemfile，但这应该允许捆绑程序尝试找到兼容的 Gem 匹配项。如果您对 Gem 修订进行了硬编码，您可能需要放松它并重复更新。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:29:35.260

查看 gems，似乎 oauth2 列出了“multi_json ~> 1.0”，而 ActiveSupport 3.1.10 列出了“multi_json < 1.3, >= 1.0”作为依赖项，所以应该可以解决。我遇到了这样的奇怪现象并通过运行来修复它

```
gem uninstall <relevant gems> 
```

然后`bundle install`再次运行。所以也许试试

```
gem uninstall oauth2 multi_json activesupport 
```

然后`bundle install`

### 编辑

```
gem uninstall twitter multi_json fnordmetric 
```

# security - Symfony 2 ACL 与选民

> ID：14224874
> 
> 赞同：1
> 
> 时间：2013-01-08T22:08:00.967
> 
> 标签：security, symfony, acl, vote

我想使用 isGranted('EDIT', $userObject) 允许所有管理员和经理以及那个用户编辑给定的用户数据。

我应该使用 ACL 来控制编辑 $userObject 吗？我已经编写了额外的 Voter 来检查登录的用户和给定的对象是否相同或者用户是经理或管理员。

在 acl 中，我必须为所有管理员、经理和那个用户添加 userObject 的 ACE。

推荐哪种方式？我是 Symfony 的新手..

以下是选民代码：

```
function vote(TokenInterface $token, $object, array $attributes)
{
    $intersect=array_intersect(array('EDIT','VIEW' ), $attributes);
    if (!empty($intersect))
    {
        //intersect is not empty, it seems to edit or view are in $attributes
        //voter grants privileges for [user->granted object]
        //manager->every customer, child-manager
        //admin->every customer and manager
        if ($token->getUser()->isAdmin())
        {
            return VoterInterface::ACCESS_GRANTED;
        }
        elseif ($token->getUser()->isCustomer())
        {
            //voter not want to think about customer grants, because customer grants currently are held in ACL
            return VoterInterface::ACCESS_ABSTAIN;
        }
        /* @var $object \PSB\StoreBundle\Entity\Customer */
        if (is_a($object, '\PSB\StoreBundle\Entity\Customer'))
        {

            if ($token->getUser()->isManager())
            {
                //managers also edit customers
                return VoterInterface::ACCESS_GRANTED;
            }
        }
        elseif (is_a($object, '\PSB\StoreBundle\Entity\Manager'))
        {
            /* @var $object \PSB\StoreBundle\Entity\Manager */
            if ($token->getUser()->isManager())
            {
                //manager can edit own children
                if ($token->getUser() == $object->getParent())
                {
                    return VoterInterface::ACCESS_GRANTED;
                }
            }
        }
    }
    return VoterInterface::ACCESS_ABSTAIN;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:43:32.007

当您的模型已经存储了知道是否应该授予操作所需的数据时，让 ACL 与您的真实数据保持同步真的很烦人。

因此，您显然应该为此实施自己的选民。

PS：你应该使用`$object instanceof Class`而不是`is_a($object, 'Class')`

# ios - 使用 Phonegap 显示最近捕获的图像

> ID：14224878
> 
> 赞同：3
> 
> 时间：2013-01-08T22:08:14.467
> 
> 标签：ios, cordova

我希望能够通过按钮显示最近捕获的图像`<button onclick="showImage();">Show Image</button><br>`，但不确定如何执行此操作，并且我在 Phonegap API 中找不到任何关于它的好信息。基本上这是`showImage();`我需要帮助创建的功能。

捕获图像的代码正在正确执行，我正在运行 iOS 6。

Phonegap/科尔多瓦：

```
 <title>Capture Image</title>

        <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="json2.js"></script>
        <script type="text/javascript" charset="utf-8">

            var captureSuccess = function(mediaFiles) {
                var i, path, len;
                for (i = 0, len = mediaFiles.length; i < len; i += 1) {
                    readDataUrl = mediaFiles[i].fullPath;

                }
            };

            function captureError(error) {
                var msg = 'An error occurred during capture: ' + error.code;
                document.getElementById('errormsg').innerHTML = msg;
            }

            function captureImage(){
                document.getElementById('format-data').innerHTML = "";
                document.getElementById('capture-result').innerHTML = "";
                navigator.device.capture.captureImage(captureImageSuccess, captureError, {limit: 1});
            }

            }

            function captureImageSuccess(mediaFiles) {
                var i, len;

                var formatSuccess = function (mediaFiles) {
                    document.getElementById('format-data').innerHTML =
                    "Height: <strong>" + mediaFiles[i].height + "</strong><br/>" +
                    "Width: <strong>" + mediaFiles[i].width + "</strong><br/>";
                };
                for (i = 0, len = mediaFiles.length; i < len; i += 1) {
                    // uploadFile(mediaFiles[i]);
                    document.getElementById('capture-result').innerHTML = "<br/><strong>" + (i+1) + " file<br/> Path: " + mediaFiles[i].fullPath + "</strong><br/>" +
                    "Height: <strong>" + mediaFiles[i].height + "</strong><br/>" +
                    "Width: <strong>" + mediaFiles[i].width + "</strong><br/>";
                    mediaFiles[i].getFormatData(formatSuccess, formatError);
                }
                console.log("captureImageSuccess");
            }

            </script>

    </head> 
```

HTML：

```
<body>
        <button onclick="captureImage();">Capture Image</button> <br>
        <button onclick="showImage();">Show Image</button><br>
        <div class="result-block">
            Capture Result: <span id="capture-result"></span><br/>
            <span id="errormsg"></span>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:54:34.043

那么你有图像的完整路径，只需创建一个`img`元素：

```
<img id="picResult" /> 
```

并且在您的 javascript 设置中，只要您收到响应，它就是 url：

```
var formatSuccess = function (mediaFiles) {
    document.getElementById('format-data').innerHTML =
    "Height: <strong>" + mediaFiles[i].height + "</strong><br/>" +
    "Width: <strong>" + mediaFiles[i].width + "</strong><br/>";

    //HERE:
    document.getElementById('picResult').src = mediaFiles[i].fullPath;

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:56:05.840

我发布了与您类似的问题的答案。该帖子向您展示了如何在缩略图上显示捕获的图片。

看看如何解决您的问题：[https ://stackoverflow.com/a/14043467/1853864](https://stackoverflow.com/a/14043467/1853864)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:53:48.300

HTML

```
<img id="picResult" width="100px" border="1" /> 
```

JS

```
// capture callback
function captureSuccess(mediaFiles) {
var i, path, len;
for (i = 0, len = mediaFiles.length; i < len; i += 1) {
    path = mediaFiles[i].fullPath;
    // do something interesting with the file
$('#picResult').attr('src',path);
   }
}; 
```

*   请务必检查这些在线文档右上角的 PhoneGap 版本号，以确保您的操作正确。

**在这里也可以看到** [PhoneGap - Media Docs](http://docs.phonegap.com/en/2.4.0/cordova_media_capture_capture.md.html#MediaFile)

# java - 第一次使用数组，尝试创建频率表

> ID：14224879
> 
> 赞同：1
> 
> 时间：2013-01-08T22:08:14.227
> 
> 标签：java, arrays, methods, constructor, frequency

我看不出我哪里出了问题，我希望它显示调查结果的频率，但我得到的只是零，例如，如果我输入 1,1,2,2,5 我想要它输出：

```
Displaying response frequencies...
1   2
2   2
3   0
4   0
5   1 
```

但相反，我得到了这个：

```
Displaying response frequencies...
1   0
2   0
3   0
4   0
5   0 
```

这是我的主要方法：

```
import java.util.Scanner;
public class SurveyTester {

    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);

        System.out.println("How many people took the survey?");
        int numPeople = input.nextInt();
        Survey s = new Survey(numPeople);
        int nextResponse;
        for (int i = 0; i < numPeople; i++)
        {
            System.out.print("Input the next survey response (values 1-5):");

            nextResponse = input.nextInt();
            s.addResponse(nextResponse);
        }

        System.out.println("Displaying all responses...");
        s.displayAllResponses();
        System.out.println("Displaying response frequencies...");
        s.displayResponseFrequencies();
     }

} 
```

这是我的课：

```
public class Survey
{
    private int numResponses;
    private int maxResponses;
    private int[] responses;
    private int[] frequencies;
    private final int NUM_RESPONSES = 5;

    public Survey(int nResponses)
    {
        maxResponses = nResponses;
        numResponses = 0;
        responses = new int[nResponses];
        frequencies = new int[NUM_RESPONSES]; // There are 5 possible responses to the survey
    }

    public void addResponse(int response)
    {
        // This method stores the response
        // passed in the parameter 'response'
        // to the next free space in the array

        {
            responses[numResponses]= response;
        }

        numResponses++;
    }

    public void displayAllResponses()
    {
        // This method displays on the screen
        // all the responses to the survey

        for (int i=0; i<maxResponses; i++)
        {
        System.out.print(responses[i] + " ");
        }

        System.out.println("");
    }

    public void calculateResponseFrequencies()
    {
        // This method calculates the number of
        // responses for each possible answer
        // to the survey, 1, 2, 3, 4 or 5
        // It stores the frequencies in the
        // array 'frequencies'

        for (int i=1; i<=maxResponses; i++)
        {
            if (responses[i] == 1)
            {
                frequencies[1]++;
            }

            else if (responses[i] == 2)
            {
                frequencies[2]++;
            }

            else if (responses[i] == 3)
            {
                frequencies[3]++;
            }

            else if (responses[i] == 4)
            {
                frequencies[4]++;
            }

            else if (responses[i] == 5)
            {
                frequencies[5]++;
            }
        }
    }

    public void displayResponseFrequencies()
    {
        // This method displays the response
        // frequences for each of the possible
        // response, 1, 2, 3, 4 or 5

        for (int i=0; i<frequencies.length; i++)
        {
        System.out.println((i+1) + "\t" + frequencies[i]);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:11:01.413

你没有对你的`frequencies`数组做任何事情。在您的`addResponse`方法中，您需要获得适当的值并增加它。添加如下语句

`frequencies[response-1] = frequencies[response-1] + 1;`

请注意，您可以使用 2 个数组来执行此操作，尤其是对于学习而言，但许多 Java 开发人员会使用`Map`此类实现，其中键是输入的值，值是频率。将所有数据保存在一个数据结构中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T11:06:36.043

```
public class DuplicatesInArray {

  public static void main(String[] args) {
    int count = 0;
    int[] arr = new int[6];
    int[] frequencyArr = new int[6];
       arr[0] = 4;
       arr[1] = 1;
       arr[2] = 1;
       arr[3] = 1;
       arr[4] = 5;
       arr[5] = 4;

      for(int i = 0;i < arr.length;i++){

       frequencyArr[arr[i]] =  frequencyArr[arr[i]] + 1;

      }
       for(int x = 0;x<frequencyArr.length;x++){
            if(frequencyArr[x] > 0){
               System.out.println(x + " " + frequencyArr[x] + " times." );

             }
       }
    }
} 
```

整数数组中的默认值将为零。每次出现我们都会将其加一。示例：如果整数 4 出现 2 次，则频率 Arr 处的第 4 个索引增加两次。

# java - 返回 null 或抛出异常

> ID：14224880
> 
> 赞同：0
> 
> 时间：2013-01-08T22:08:22.903
> 
> 标签：java, exception, null, nullpointerexception, return

我正在开发一个简单的 Web 服务和客户端。查看我的服务片段：

```
 @webService
 public Car carData(int id)  {
   try {
    return carDAO.getCars(id);
    } catch (NullPointerException e) {
        System.out.println("Error: "+e.getLocalizedMessage());

    }
    return  null; 
```

}

是否可以将 null 返回给客户端，然后客户端应该处理 null 或者 Web 服务处理 null 并引发异常是否更好？

更新：如何返回 nullpointerexception 而不是返回 null？

你会推荐什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:28:20.437

您可以在 JAX-WS Web 服务中使用 SOAP 错误。这样，您可以在未找到先决条件时引发自定义异常。客户对发生的事情有了更好的了解。

为此，您需要一个带有`@WebFault`注释的异常。[您可以在使用 Java JAX-WS Web 服务中的 SOAP 错误和异常 - Eben Hewitt on Java](http://io.typepad.com/eben_hewitt_on_java/2009/07/using-soap-faults-and-exceptions-in-java-jaxws-web-services.html)中找到一个很好的示例。

在[用户指南 » GlassFish » Metro » JAX-WS](http://jax-ws.java.net/2.2.7/docs/ch03.html#jsr-250-common-annotations)中，您可以找到以下示例：

```
package fromjava.server;

import javax.jws.WebService;

@WebService
public class AddNumbersImpl {
    /**
     * @param number1
     * @param number2
     * @return The sum
     * @throws AddNumbersException if any of the numbers to be added is 
     * negative.
     */
    public int addNumbers(int number1, int number2) throws 
            AddNumbersException {
        if (number1 < 0 || number2 < 0) {
            throw new AddNumbersException("Negative number cant be " +
                    "added!", "Numbers: " + number1 + ", " + number2);
        }
        return number1 + number2;
    }
} 
```

例外：

```
package fromjavahandler.server;

public class AddNumbersException extends Exception {

    String detail;

    public AddNumbersException(String message, String detail) {
        super(message);
        this.detail = detail;
    }

    public String getDetail() {
        return detail;
    }
} 
```

JAX-WS 运行时自动生成故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:42:52.533

您不应该获得 NPE。如果你这样做了，这可能意味着你的服务没有初始化，你应该抛出一个 IllegalStateException 或回复一条消息给客户端，说 Web 服务不可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:18:50.460

对此可能会有一百万种不同的意见，但我会告诉你我会怎么做。

通常，远程服务已经能够`IOException`在进行远程调用并随后失败时抛出，所以我想尽量避免我的客户不得不处理`RuntimeException`或其任何子类（包括`NullPointerException`）的可能性。如果您的服务抛出 a`RuntimeException`并且客户端打印出堆栈跟踪，那么客户端开发人员会感到困惑，因为堆栈跟踪与在服务器上运行的代码有关，开发人员可能很少或根本无法控制。理想情况下，客户端应该只需要处理`null`返回而不是预期响应的情况。如果不足以告诉客户端出现问题或者问题源于客户端提供的输入的问题，则仅`Exception`在服务器端抛出一个。`null`

# javascript - 将 SVG 路径转换为 KML 地标？

> ID：14224889
> 
> 赞同：3
> 
> 时间：2013-01-08T22:08:57.297
> 
> 标签：javascript, svg, kml

我可以找到很多关于如何将 KML 多边形转换为 SVG 对象的文档，但没有做相反的事情。是否存在这样的脚本，或者有人知道如何编写脚本吗？

基本上，我想[从 wikimedia commons 获取一些 GPL SVG 地图，](http://commons.wikimedia.org/wiki/Category:SVG_maps)例如[this](http://commons.wikimedia.org/wiki/File:Blank_map_europe_coloured.svg)，它为每个国家/省制作单独的形状（可能包括其他地理覆盖），并将它们转换为 KML。我猜想带有 SVG 地图坐标系和原点纬度/经度的脚本可以进行这种转换，但这看起来是一项不平凡的任务，所以我希望已经完成了一些事情。

**[我在http://kml2svg.free.fr/](http://kml2svg.free.fr/)**找到了这些工具，但这只能转换由同一站点上的 KML->SVG 转换器生成的 SVG 文件。

我还认为我可能会反转在[将 kml 多边形转换为 svg 路径](https://stackoverflow.com/questions/13460415/convert-kml-polygons-to-svg-paths)上发布的 jsfiddle 示例，但我无法让该示例在本地 Web 项目中工作（我对 SVG/KML 开发和Javascript，并且不熟悉 Proj.4 库的工作原理）。

或者，如果有人能想到一种更好的方法来解决快速创建“政治地图”样式 KML 图层的原始问题，我愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:20:27.757

只是在寻找相同的内容，我找到了您的帖子，所以这是我的谷歌列表中的另一个热门内容。

对于初始步骤，您可能需要查看此页面：

[https://bitbucket.org/tbrugz/kmlutils/](https://bitbucket.org/tbrugz/kmlutils/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-02T09:14:09.450

我找到了一种在 JavaScript 中将 SVG 路径转换为 ​​SVG 多边形的简单方法。SVG 多边形可以轻松转换为 KML 地标，因为两者都使用坐标列表。该脚本可以放置在 HTML 文件中，并且可以直接在浏览器上运行。它将从您的计算机中获取一个 SVG 文件并将修改后的文件保存为文本文件。我建议使用 Chrome，因为 SVG 在其上保持固定大小，从而确保坐标系保持完全相同。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Reader</title>
</head>
<body>
<h1>SVG paths to polygons</h1>
<input type="file" id="fileReader" />
<br>
<p id="Content"></p>
<script>
document.getElementById("fileReader").addEventListener('change',function(){
var fr = new FileReader();
fr.onload = function(){;
var d = new DOMParser().parseFromString( this.result.toString(), "image/svg+xml" );
var nodelist = d.querySelectorAll('path');
console.log("Number of paths: " + nodelist.length);
nodelist.forEach(function(path){//This replaces each path with a polygon, keeping the same id.
var polygon = d.createElementNS("http://www.w3.org/2000/svg", "polygon");
polygon.setAttribute("id", path.getAttribute("id"));
console.log("Converting " + path.getAttribute("id"));
var length = path.getTotalLength();
var p=path.getPointAtLength(0);
var stp=p.x+","+p.y;
for(var i=1; i<length; i++){
    p=path.getPointAtLength(i);
    stp=stp+" "+p.x+","+p.y;
    //This places points along the path at one unit distance apart.
}
polygon.setAttribute("points", stp);
path.replaceWith(polygon);
});
var text1 = new XMLSerializer().serializeToString(d);
document.write(text1);
function download(filename, text) {
  var element = document.createElement('a');
  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
  element.setAttribute('download', filename);

  element.style.display = 'none';
  document.body.appendChild(element);

  element.click();

  document.body.removeChild(element);
}

// Starting file download.
download("output.txt", text1);
}
fr.readAsText(this.files[0]);
})
</script>
</body>
</html>
```

然后，您可以直接获取该`points`属性并将其放置在 KML 地标中的坐标标记中。您只需用新行替换空格。虽然这不是很有效，但它是进行转换的最简单方法。

# java - PrimeFaces X Jelastic X p:fileUpload

> ID：14224894
> 
> 赞同：2
> 
> 时间：2013-01-08T22:09:20.817
> 
> 标签：java, tomcat, file-upload, primefaces, jelastic

晚安，伙计们，

我在 Jelastic 的生产中遇到 op: PrimeFaces FileUpload 的问题。（在本地主机工作）

我尝试上传文件，他正在加载并且永无止境。然后在控制台上显示以下错误：

```
Jan 8, 2013 3:28:05 AM org.apache.catalina.core.StandardWrapperValve invoke  
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/timbre] threw exception  
java.io.IOException: Processing of multipart/form-data request failed. Read timed out  
    at org.primefaces.webapp.MultipartRequest.parseRequest(MultipartRequest.java:69)  
    at org.primefaces.webapp.MultipartRequest.<init>(MultipartRequest.java:51)  
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:72)  
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)  
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)  
    at com.timbre.filter.FilterLogin.doFilter(FilterLogin.java:53)  
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)  
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)  
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)  
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)  
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)  
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)  
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)  
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)  
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)  
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)  
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)  
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)  
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)  
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)  
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)  
    at java.lang.Thread.run(Thread.java:662) 
```

我尝试做几件事： 关注 Catalina 日志：2013 年 1 月 8 日上午 3:28:05 org.primefaces.webapp.MultipartRequest parseRequest 严重：解析文件上传请求时出错

网页.xml：

```
<servlet>  
    <servlet-name>Faces Servlet</servlet-name>  
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>  
    <load-on-startup>1</load-on-startup>  
</servlet>  
<servlet-mapping>  
  <servlet-name>Faces Servlet</servlet-name>  
    <url-pattern>*.jsf</url-pattern>  
</servlet-mapping>  
<filter>  
    <filter-name>PrimeFaces FileUpload Filter</filter-name>  
    <filter-class> org.primefaces.webapp.filter.FileUploadFilter</filter-class>  
</filter>  
<filter-mapping>  
    <filter-name>PrimeFaces FileUpload Filter</filter-name>  
    <servlet-name>Faces Servlet</servlet-name>  
</filter-mapping> 
```

页：

```
<div class="controls controls-row">  
                            <h:outputLabel for="foto" value="Foto:" style="font-weight:bold" />                         
                            <p:fileUpload id="foto" fileUploadListener="#{instrumentoBean.handleFileUpload}" styleClass="span6" dragDropSupport="true" auto="true" mode="advanced" label="Selecione" update="growlDetail" sizeLimit="1000000" allowTypes="/(\.|\/)(jpe?g|png)$/"/>  
                        </div> 
```

MB： ***他从来没有在第一行输入metod handleFileUpload***

```
public void handleFileUpload(FileUploadEvent event) {  
        System.out.println("He never pass here in Jelastic. In Localhost is ok");  

        instrumento.setiFotoInstrumento(arquivo.upload(event));  
        if (instrumento.getiFotoInstrumento() == null) {  
            System.out.println("Vai 2");  
            FacesContext.getCurrentInstance().addMessage(  
                    null,  
                    new FacesMessage("Erro! ", event.getFile().getFileName()  
                            + " não foi enviada."));  
        } else {  
            System.out.println("Vai 3");  
            FacesContext.getCurrentInstance().addMessage(  
                    null,  
                    new FacesMessage("Sucesso! ", event.getFile().getFileName()  
                            + " foi enviada."));  
        }  
    } 
```

> 不知道还有什么问题。如果有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:54:18.200

我解决了我的问题。我禁用了nginx。

# silverlight - 从 SSRS 报告服务获取 PDF 或 TIFF

> ID：14224896
> 
> 赞同：0
> 
> 时间：2013-01-08T22:09:29.197
> 
> 标签：silverlight, reporting-services

SQL Server 报告服务能够将报告导出为 TIFF。这非常好，因为我想在我的 Silverlight 应用程序中使用报告，并且已经有用于查看 TIFF 的基础设施。

问题是如何直接从报表服务器获取 tiff 而不先在网页上运行报表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:56:18.177

您可以使用[SSRS Web 服务](http://msdn.microsoft.com/en-us/library/ms153968.aspx)并调用[Render](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render.aspx)方法。此方法将为您提供一个指定的报告`Stream`，然后可以在您的基础设施中显示以查看 TIFF。

# ssis - 在多个服务器跃点上运行 SSIS 包的问题

> ID：14224898
> 
> 赞同：1
> 
> 时间：2013-01-08T22:09:33.367
> 
> 标签：ssis, unc

我是 SSIS 新手，在从远程服务器读取文件时遇到问题

1.  我在项目级别定义了一个平面文件连接，其中`ConnectionString`由变量 say 定义`@AbsoluteFilePath`。

2.  的值`@AbsoluteFilePath`在运行时计算到 UNC 说：

    `\\myserver\myfolder\myfile.txt`

3.  我有一个调用包执行的 Web 应用程序。

4.  我能够以登录用户的身份查看文件夹，但是在读取文件时包的执行以错误结束。

    执行失败，错误消息为`return code 0XC020200E`

5.  我尝试将我的 UNC 映射`\\myserver\myfolder`到`Z:`运行 SQL 2012 的机器上。然而，这也给了我同样的错误。

在 SSIS 中使用 UNC 是否可见？执行此任务的标准方法是什么？

以下是我试图实现的完整工作流程：

> **全貌**
> 
> 用户在 Web 前端选择一个文件。Web 应用程序将文件保存在共享驱动器上并调用 SSIS 包来运行。SSIS 包从共享驱动器中读取文件并执行所需的操作。

**更新：解释权限并从存储过程运行 SSIS 包**

1.  Web 应用程序 X 在服务器***server-web上运行***
2.  SSIS 包 Y 在服务器***server-ssis上运行***
    1.  访问服务器***server-database上的数据库***
    2.  访问服务器***服务器文件系统上的 UNC***

通过运行此处提到的存储过程执行存储过程来运行包[http://msdn.microsoft.com/en-us/library/ff878099.aspx](http://msdn.microsoft.com/en-us/library/ff878099.aspx)

***server-web***使用的连接字符串 的形式为

```
Data Source=server-ssis;Initial Catalog=SSISDB;Integrated Security=SSPI; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:13:35.547

我会向dumplin 打赌这是一个权限问题（除了搜索`0XC020200E`产生文件权限的事实之外）。

检查运行 Web 应用程序的帐户的权限。它需要被授予共享权限。它适用于您的帐户或登录用户，但可能*与*运行包的帐户不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:32:32.933

@user1826905 你是对的，使用 SQL 代理作业来调用 SSIS 包被证明是从 Web 应用程序调用 SSIS 包的最简单方法。

此链接[http://msdn.microsoft.com/en-us/library/ms403355.aspx](http://msdn.microsoft.com/en-us/library/ms403355.aspx)给出了调用 SSIS 包的两种不同方式

1.  使用 SQL 代理作业
2.  使用网络服务

还有第三种调用 SSIS 的方法，我正在尝试使用存储过程[http://msdn.microsoft.com/en-us/library/ff878099.aspx](http://msdn.microsoft.com/en-us/library/ff878099.aspx)但是在跨多个服务器跃点工作时出现问题 kerberos 委托[在此处解释](http://connect.microsoft.com/SQLServer/feedback/details/767088/with-the-new-ability-to-execute-ssis-packages-from-tsql-kerberos-delegation-should-be-supported)

由于在跳跃后访问更改为*匿名用户*，我们仍在努力使用这种方法访问 UNC

# haskell - Haskell Eq 定义实现结果

> ID：14224904
> 
> 赞同：6
> 
> 时间：2013-01-08T22:10:04.733
> 
> 标签：haskell, typeclass

我正在阅读`Eq`数据库中类型类的定义，我很困惑。在什么时候意识到两个值相等或不相等。据我所知，他们似乎只是无限地互相称呼。

它是这样定义的：

```
class  Eq a  where
    (==), (/=)           :: a -> a -> Bool

    x /= y               = not (x == y)
    x == y               = not (x /= y) 
```

有人介意解释它在哪里实现`Bool`价值吗？他们甚至在互相打电话，还是发生了其他事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T22:15:04.597

这是这些方法的默认实现，是的，它是循环的。如果您按原样使用它们，您将循环：

```
data Foo = Foo
instance Eq Foo 
```

```
> Foo == Foo
^CInterrupted 
```

存在循环定义，因此您可以免费实现`(==)`和获取`(/=)`，反之亦然：

```
data Foo = Foo
instance Eq Foo where
  x == y = True 
```

```
> Foo /= Foo
False 
```

另请参阅[Ord](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Ord)类，它解释了在该特定情况下最小完整定义是什么。

# android - 无法使用适配器将 ImageButtons 添加到 gridView 在安卓中

> ID：14224906
> 
> 赞同：0
> 
> 时间：2013-01-08T22:10:11.003
> 
> 标签：android, layout, gridview, imagebutton

我试图用 ImageButtons 动态地制作一个网格视图，但我遇到了这个问题。在开始之前，我必须说我是 android 和 java 开发的新手（2.5 年的 Objective-c）。

行。所以我使用这段代码：

@Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_background);

```
ArrayList<ImageButton> tmpStrRay = new ArrayList<ImageButton>();

Boolean load=true; 
for (int i= 0;load;i++){
    ImageButton iv = new ImageButton(this);
    InputStream ims;

    try {
        ims = getAssets().open("sm_backgrounds/bgSM_"+i+".jpg");
        Drawable d = Drawable.createFromStream(ims, null);
        iv.setImageDrawable(d);
        tmpStrRay.add(iv);

    } catch (IOException e) {
        load = false;
        e.printStackTrace();
    }

    System.out.print(i);
}

GridView grid = (GridView) findViewById(R.id.gridView);
ArrayAdapter<ImageButton> adapter = new ArrayAdapter<ImageButton>(this, android.R.layout.simple_list_item_1, tmpStrRay);
grid.setAdapter(adapter); 
```

}

我的布局中有这个 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".BackgroundSelector" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:orientation="horizontal" 
        android:id="@+id/topLinear">

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="close"
            android:text="Close"
            android:textSize="15sp" />

        <Button
            android:id="@+id/Button01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="showCamera"
            android:text="Camera"
            android:textSize="15sp" />
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/topLinear" >

        <GridView
            android:id="@+id/gridView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:numColumns="3" >
        </GridView>
    </ScrollView>

</RelativeLayout> 
```

我得到了带有文本的 Grid 这个奇怪的结果，通常我会说描述 ImageButton 而不是自己显示按钮。我相信这对你们大多数人来说很容易 - 但如果你有答案，我真的很想得到一个解释。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:22:51.707

您使用 ArrayAdapter 适配器，它采用 android.R.layout.simple_list_item_1 布局（即 TextView）并用 tmpStrRay[i].toString() 文本填充此 textView。

> 要使用除 TextViews 之外的其他内容来显示数组，例如 ImageViews，或者要让 toString() 结果之外的一些数据填充视图，请覆盖 getView(int, View, ViewGroup) 以返回所需的视图类型。

# database - bulk_create 后的 Django 1.4 主键冲突

> ID：14224908
> 
> 赞同：3
> 
> 时间：2013-01-08T22:10:29.410
> 
> 标签：database, django, conflict

我正在使用 Django 1.4，以 postgresql 作为数据库，并且我有以下模型：

```
class Keyword(models.Model):
    name = models.CharField(max_length=100) 
```

我正在使用 bulk_create 使用来自另一个数据库的数据填充 django 数据库，其中一些代码类似于：

```
Keyword.objects.bulk_create([Keyword(id=id, name=name) for id,name in [(1,"k1"),(2,"k2"),(3,"k3")] ]) 
```

遗留数据已经有主键，保持这种方式很重要。

问题是当我尝试创建新对象时，Django会使用从1开始的主键，并抛出冲突异常：

```
k = Keyword(name="k4")
k.save() 
```

给我错误

```
IntegrityError: duplicate key value violates unique constraint "sinbiota_keyword_pkey"
DETAIL:  Key (id)=(1) already exists. 
```

有没有办法强制 Django 以另一个值开始主键增量，或者有什么方法可以解决这个冲突？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T19:21:21.643

我通过使用命令在 Django 之外的 postgresql 的自动增量逻辑中设置下一个 id 来解决这个问题`setval`，类似于[Postgresql setting next id to write to](https://stackoverflow.com/questions/7993442/postgresql-setting-next-id-to-write-to)和[How to reset postgres' primary key sequence when it fall out of sync 的问题?](https://stackoverflow.com/questions/244243/how-to-reset-postgres-primary-key-sequence-when-it-falls-out-of-sync) .

在我的示例中，我必须在 psql 中执行命令

```
select setval('keyword_id_seq', 3); 
```

其中`keyword_id_seq`是自增序列的名称（默认为`<table_name>_<column_name>_seq'`），6965 是表中存在的最大 id。这样，自动增量从下一个 id（在本例中为 4）开始，不会发生冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:18:26.103

您可以通过添加自己的`id`字段并将其标记为主键来覆盖包含自动递增主键的默认模型行为。例如：

```
 class Keyword(models.Model):
    id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=100) 
```

文档：[自动主键](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)

# css - 针对大部分智能手机的媒体查询

> ID：14224913
> 
> 赞同：9
> 
> 时间：2013-01-08T22:10:54.313
> 
> 标签：css, mobile, media-queries

我编写了一些 CSS 代码来使 HTML 页面更适合移动浏览器。为确保我的 CSS 仅适用于手机，我使用以下媒体查询：

```
@media only screen and (max-device-width: 480px) 
```

作为一名 iPhone 开发人员，我在这款设备上进行了测试，效果非常好。但我希望我的 CSS 能够在所有类型的设备（Android、Windows Phone 等）上使用。

什么是适合当今大多数智能手机的好分辨率？还是我需要更复杂的媒体查询？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T12:08:26.783

最近我开始研究响应式网页设计和媒体查询，我没有找到一个独特的“神奇”查询，但是在阅读了很多文章和几本书之后，我采用了移动优先的方式来开发网页，我正在使用一些常见的媒体查询，这里是断点：

*   320 px 手机人像
*   480 px 移动横向
*   600 px 小型平板电脑
*   768 px 平板电脑肖像
*   1024 像素平板电脑横向/上网本
*   1280 像素及以上 — 桌面

（取自[http://fluidbaselinegrid.com/](http://fluidbaselinegrid.com/)）

希望能帮助到你

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-08T22:19:40.693

**更新：火星 2016**

项目都是不同的，因此很难制定一个适合所有人的全局规则。如果你正在寻找一个，这里有一个比我聪明的人想出的例子，我以前用过：

```
xsmall:     (max-width: 479px),
small:      (max-width: 599px),
medium:     (max-width: 767px),
large:      (max-width: 1024px),
largeOnly:  (min-width: 768px) and (max-width: 1024px),
xxl:        (min-width: 1200px),
tall:       (min-height: 780px), 
```

请注意名称中没有提及**设备、屏幕尺寸或方向**。*“平板电脑肖像”*的大小对我们来说并不重要，因为我们应该尝试让事物在任何屏幕尺寸上都具有**响应**性并看起来不错，而不是简单地**适应**几个屏幕尺寸。

是的，了解最常见的屏幕尺寸并避免疯狂的媒体查询很重要，但最终，您的设计可能会开始要求调整 530 像素而不是 480 像素或类似的东西。那为什么不呢？

现在，根据我的**个人喜好**：我一直牢记媒体查询，但起初我倾向于几乎完全忽略设备尺寸。我也更喜欢**桌面优先的**方法，因为我发现将布局调整为更小的尺寸更容易（即：从页面中删除不那么重要的东西，减小尺寸等）。

**原始答案**

有些人倾向于完全忽略设备尺寸。他们说你应该检查你的布局开始中断的地方，只有在必要时才创建媒体查询。正如您现在所做的那样，其他人将检查不同的设备尺寸。但是随后您将有一个 320 像素的媒体查询，另一个 480 像素的媒体查询，依此类推……您可能会为此发疯，根据您的布局，甚至可能没有必要！

所以，现在我正在尝试两者兼而有之。一开始我倾向于忽略设备尺寸，并且仅在必要时（当布局中断时）创建一些媒体查询，直到它看起来适合 960 像素和更大的尺寸，以及更小的屏幕尺寸，比如 320 像素（我关心的最小设备尺寸关于）。

# objective-c - 访问由 plist 填充的 tableView 的下一项

> ID：14224915
> 
> 赞同：1
> 
> 时间：2013-01-08T22:10:59.737
> 
> 标签：objective-c, uitableview, plist

我有一个由 plist 填充的 tableView。

plist 中的每个项目都有自己的 id。

plist 的结构如下：

```
Root    
>Item 0
   Title  (Title of the first section in the tableView)
   Rows (Array -> Rows of the first section)
     >Item 0
        id 
        name
        description
        image
     >Item 1
        id 
        name
        description
        image
      //etc 
```

由于一张图片比 1000 字更好，这里是：

[![](../Images/75894702267465247177fa73c634bfc4.png)](https://i.stack.imgur.com/xCukU.png)

现在，我想从 detailView 访问 plist 的下一项，但我不知道该怎么做或机制应该是什么样的。我用谷歌搜索了很多来完成这个，但我没有找到任何可以真正帮助我的东西，这就是我在这里问的原因。

我已经在 detailView 中打开了 plist（从访问 id 的 tableView 打开），我想创建一个按钮或其他东西来转到下一个项目。

比如detailView是Item 0的id，我需要访问下一个id，也就是Item 1的id。

有没有人这样做过？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:11:16.667

这很简单，在 DetailView 中加载您的 plist，然后完成剩下的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:22:51.607

首先导入 plist（如果它存储在包中，则适用）：

```
NSError *error = nil;
NSString *file  = [[NSBundle mainBundle] pathForResource:@"Name" ofType:@"plist"];
if (!file) {
        // Handle error if file not found
} 
```

然后将文件作为字典打开（我假设您不需要初始数组）：

```
// Open the file
NSArray *array = [NSArray arrayWithContentsOfFile:file];
NSDictionary *dictionary = [array objectAtIndex:0]; // Skipped checking if array is empty
if (!dictionary) {
        NSLog(@"Failed to process plist file");  // Handle error
} 
```

然后您可以在字典中查询所需的对象，即在这种情况下带有键 @"MyKey" 的数组：

```
NSArray *rowArray= [dictionary objectForKey:@"MyKey"]; 
```

然后您可以从数组中检索下一个对象。

# r - AWS dynamodb 对“R”编程语言的支持

> ID：14224919
> 
> 赞同：7
> 
> 时间：2013-01-08T22:11:18.153
> 
> 标签：r, amazon-web-services, amazon-dynamodb

有没有人能够使用 R 编程语言在亚马逊 dynamodb 中成功地进行 CRUD 记录？我发现支持的语言绑定参考：

[http://aws.typepad.com/aws/2012/04/amazon-dynamodb-libraries-mappers-and-mock-implementations-galore.html](http://aws.typepad.com/aws/2012/04/amazon-dynamodb-libraries-mappers-and-mock-implementations-galore.html)

唉，没有 R。我们正在考虑将 dynamodb 用于大型数据项目，但我们的主要分析师最熟悉 R，因此我们正在探索我们的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-01T12:22:49.600

这是我用于将数据从 DynamoDB 读取到 R 中的简化版本。它依赖于 R 和 Python 可以交换数据这一事实，而 Python 中名为[boto](https://boto3.readthedocs.io/en/latest/)的库使从 DynamoDB 获取数据变得非常容易。如果这都是一个 R 包，那就太好了，但考虑到您可以从亚马逊获得 25GB 的免费存储空间，我不会抱怨。

首先，您需要一个名为*query_dynamo.py*的 Python 脚本：

```
import boto3
import time

dynamodb = boto3.resource('dynamodb',
                          aws_access_key_id='<GET ME FROM AWS>',
                          aws_secret_access_key='<ALSO GET ME FROM AWS CONSOLE>',
                          region_name='us-east-1')

table = dynamodb.Table('comment')  ###Your table name in DynamoDB here

response = table.scan()
data = response['Items']

while 'LastEvaluatedKey' in response:
    response = table.scan(ExclusiveStartKey=response['LastEvaluatedKey'])
    data.extend(response['Items']) 
```

然后在R中你这样做。如果你在 Windows 上尝试这个，你可能想试试[rPython-win](https://github.com/cjgb/rPython-win)。我在 Ubuntu Linux 16.04 LTS 上完成了所有这些工作。

```
library(rPython)

python.load("query_dynamo.py")
temp = as.data.frame(python.get('data'))
df = as.data.frame(t(temp))
rm(temp) 
```

现在，您将拥有一个名为“df”的数据框，其中包含您放入 DynamoDB 中的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-17T03:35:57.693

对于遇到此问题的任何人，现在都有[Paws 包](https://github.com/paws-r/paws)，一个适用于 R 的 AWS 开发工具包。您可以使用`install.packages("paws")`.

免责声明：我是 Paws 包的维护者。

例如：

```
# Create a client object.
svc <- paws::dynamodb()

# This example retrieves an item from the Music table. The table has a
# partition key and a sort key (Artist and SongTitle), so you must specify
# both of these attributes.
item <- svc$get_item(
  Key = list(
    Artist = list(
      S = "Acme Band"
    ),
    SongTitle = list(
      S = "Happy Day"
    )
  ),
  TableName = "Music"
)

# This example adds a new item to the Music table.
svc$put_item(
  Item = list(
    AlbumTitle = list(
      S = "Somewhat Famous"
    ),
    Artist = list(
      S = "No One You Know"
    ),
    SongTitle = list(
      S = "Call Me Today"
    )
  ),
  ReturnConsumedCapacity = "TOTAL",
  TableName = "Music"
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T15:00:32.390

有几种方法可以解决这个问题......让我添加两个：

1- 带有 Hive 和流的 EMR。

Hive 将用于查询 DynamoDB，并可用作 Haddop Streaming 的输入，可用于任何可以从标准 IO 读取和写入的语言，包括 R。

当然，这与典型的 R 程序和环境有很大不同，但它会利用“大数据”工具。

2- JVM 中的 R-ish

如果您使用 JVM 的 R 解释器（例如 Renjin）或 JVM 中的类似语言，您将能够直接使用 AWS Java SDK 和 DynamoDB 库，这对开发人员来说可能更熟悉，但您将负责处理数据的“大”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-20T21:36:35.843

[Cloudyr 的](https://cloudyr.github.io/) [aws.dynamodb](https://github.com/cloudyr/aws.dynamodb)便于从 DynamoDB 中读取数据。然而，不幸的是，它有一种强迫角色做事的倾向。此外，我在使用 put_item 函数将字符串数据以外的任何内容添加到 DynamoDB 时遇到了麻烦。

AWS CLI 运行良好。这里的例子：

`$ aws dynamodb put-item --table-name "SOMETABLE" --item '{"aStringItem": {"S": "1900-01-02|myid"}, "aNumericItem": {"N": "2"}, "aMapItem": {"M": {"Source": {"S": "CLI"}}}}'`

没有提到的另外两个选项是[Rcpp](https://cran.r-project.org/web/packages/Rcpp/Rcpp.pdf)和[rJava](https://cran.r-project.org/web/packages/rJava/rJava.pdf)。Java 和 C++ 中都有本机 SKD。

# mysql - 具体外键说明

> ID：14224920
> 
> 赞同：0
> 
> 时间：2013-01-08T22:11:25.983
> 
> 标签：mysql, sql, database

基本上我对 MySQL 比较陌生，在一个示例中，我看到添加了这个外键：

```
ALTER TABLE Department ADD FOREIGN KEY managerIsInDepartment
(manager,id) REFERENCES Employee(id,worksAt); 
```

我想正在添加一个外键（名称为 managerIsInDepartment）。

但是我认为括号中的属性是变成外键的属性？

为什么显示 managerIsInDepartment？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:13:44.630

`managerIsInDepartment`只是帮助识别它的密钥的名称。您可以省略它，系统会自动生成一个。

```
ALTER TABLE Department <-- Table that will have the foreign key constraint
ADD <-- Option
FOREIGN KEY managerIsInDepartment  <-- Name of the key
(manager,id) <-- Columns included in the key
REFERENCES Employee <-- The table being referenced
(id,worksAt) <-- Columns being referenced in foreign table 
```

希望这可以帮助。

一个很好的[参考](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)。

# jquery - jQuery无法定位切换类

> ID：14224931
> 
> 赞同：-1
> 
> 时间：2013-01-08T22:12:17.783
> 
> 标签：jquery, toggleclass

我是 jQuery 新手，我可能会以错误的方式解决这个问题。我正在尝试定位一个已切换的 div。第一个事件处理程序工作正常（打开），但我无法让第二个工作（关闭）。任何帮助将不胜感激。

```
$(".entry .tog").unbind();
  $(".entry .tog").click(function(){
        $(this).closest(".entry").toggleClass("entry-active entry");
        $(".entry").toggleClass("entry not-active");

        alert("open");
})

$(".entry-active .tog").unbind();
  $(".entry-active .tog").click(function(){
        $(this).closest(".entry-active").toggleClass("entry-active entry");
        $(".not-active").toggleClass("not-active entry");

        alert("close");
    })
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:28:08.417

我希望您正在努力实现这一目标：

```
$(".entry .tog").off('click').on('click', function() {
    var $entry = $(this).closest(".entry").toggleClass("active");
    $(".entry").not($entry).removeClass("active");
    alert($entry.hasClass('active') ? "active" : "not active");
}); 
```

笔记：

*   有两个类在反相中工作是没有意义的。在各个方面，无论是 CSS 样式还是 jQuery 选择，一个类就足够了。
*   您不想切换 class `entry`。如果你这样做了，第一次`entry`被关闭（即类被删除）元素将再次变得不可选择`$(".entry")`。有一天，这可能是可取的，但不是在这里，我怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:20:52.453

这段代码不会只是将其设置为活动然后不活动。

```
$(this).closest(".entry").toggleClass("entry-active entry");
$(".entry").toggleClass("entry not-active"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:58:59.557

我不确定我是否看到了您的取消绑定的意义，特别是因为它们只会运行一次（它们没有附加到任何事件处理程序或您发布的任何其他内容）。

我倾向于同意@Beetroot-Beetroot 的回答，即不要试图强迫他们相互切换。但在学习方面，我会指出你试图做的事情的根本问题。

* * *

您的基本问题是您在运行时直接绑定这些元素。设置绑定后会发生什么`click`，就是这样：即使您更改附加到这些 div 的类，绑定本身仍然附加到那些相同的元素。这基本上意味着只有您的第一个事件处理程序附加到任何东西，因为在您调用它时没有任何匹配第二个事件处理程序的东西。即使在您的第一个事件处理程序运行并切换类之后，它仍然是附加到所有内容的一个（也是唯一一个）。

希望这是有道理的。

[这是一个小提琴，展示了你写的东西以及它是如何破坏的](http://jsfiddle.net/uJUkH/7/)

你需要做的是使用事件冒泡：你可以将你的事件处理程序附加到一个封装了这些并且不是动态的元素上，然后根据实际调用的处理程序的动态属性做出决定。

这样做的方法是使用`.on()`（[参见文档](http://api.jquery.com/on/)）

[`.on`](http://jsfiddle.net/GU97M/1/)这是一个使用以下脚本[的工作小提琴：](http://jsfiddle.net/GU97M/1/)

```
$('.wrapper').on('click', ".entry .tog", function() {
    $(this).closest(".entry").toggleClass("entry-active entry");
    $(".entry").toggleClass("entry not-active");

    alert("open");
});

$('.wrapper').on('click', ".entry-active .tog", function() {
    $(this).closest(".entry-active").toggleClass("entry-active entry");
    $(".not-active").toggleClass("not-active entry");

    alert("close");
}); 
```

基本上，我创建了一个`.wrapper`附加到包含所有条目和 togs 的 div 的类。我将`.on()`事件处理程序绑定到那个，一个绑定具有第一组类的选择器，然后另一个绑定具有第二组。

我仍然推荐@Beetroot-Beetroot 的答案，但希望这可以帮助您了解这里发生了什么，为什么它不起作用，以及将来如何解决类似的问题。

# java - 与 java hashmap/hashtable 相比，python 字典搜索复杂度

> ID：14224932
> 
> 赞同：-2
> 
> 时间：2013-01-08T22:12:21.030
> 
> 标签：java, python, hash, dictionary, hashmap

> **可能重复：**
> [Python 的内置字典是如何实现的](https://stackoverflow.com/questions/327311/how-are-pythons-built-in-dictionaries-implemented)

我对python相当陌生，并且有java背景。我想知道 python 中的字典是否具有与 java 中的哈希映射相同的搜索复杂性。示例：在java中搜索哈希表/映射中的键是一个常数时间操作，我想知道在python中搜索字典中的键是否也是一个常数时间操作。我已经阅读了几页关于映射的python文档，但它似乎没有表明python中字典键的任何散列，所以我想知道是否：

1.  在 python 中的字典中搜索键是恒定时间操作。
2.  如果是这样，他们如何在没有散列的情况下实现这种恒定时间搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:13:22.943

Python 字典的搜索复杂度为 O(1)。

请参阅[时间复杂度 wiki 页面](http://wiki.python.org/moin/TimeComplexity)。

Python字典实现为哈希表，键被哈希；您可以通过实现[`__hash__`方法](http://docs.python.org/2/reference/datamodel.html#object.__hash__)来影响散列。

# php - 控制器可以捕获模型抛出的异常吗？

> ID：14224933
> 
> 赞同：11
> 
> 时间：2013-01-08T22:12:21.420
> 
> 标签：php, model-view-controller, exception, model, controller

好吧，这在技术上是可行的，但这会破坏 MVC 架构吗？

我不确定控制器和模型之间是否建议使用这种类型的通信。我将使用一个简单的示例和两种方法来描述它：

**选项 1（模型抛出异常并且控制器捕获它）：**

```
class Controller {
  private $model;

  public function save($data) {
     try {
         $this->model->save($data); 
     } catch (Exception $e) {  
         // handle exception
     }
  }
}

class Model {
  public function save($data) {
     // Call to internal function to save data in BD
     if (! $this->_save($data)) throw new Exception('Error saving data');
  }
} 
```

**选项 2（控制器完全处理异常）：**

```
class Controller {
  private $model;

  public function save($data) {
     try {
         if (! $this->model->save($data)) throw new Exception('Error saving data'); 
     } catch (Exception $e) { 
         // handle exception
     }
  }
}

class Model {
  public function save($data) {
     // Call to internal function to save data in BD
     if (! $this->_save($data)) return false;
  }
} 
```

**

## 一些回应后编辑：

**

这些是根据您的建议解决问题的其他方法。我希望不要把事情弄得太复杂。

**选项 3（模型完全处理异常，正如 Ray 所说。KingCrunch 还建议在模型中更好地做到这一点）**

```
class Controller {
  private $model;

  public function save($data) {

     if (! $this->model->save($data)) {
         // possible action: redirect to the form with an error message
     }

  }
}

class Model {
  public function save($data) {
     try {
         if (! $this->_save($data)) throw new Exception('Error saving data'); 
     } catch (Exception $e) { 
         // handle exception
         return false;
     }
     return true; 
  }
} 
```

**选项 4（控制器获取模型抛出的自定义子异常，如 shiplu.mokadd.im 所说。）**

```
class Controller {
  private $model;

  public function save($data) {
     try {
         $this->model->save($data); 
     } catch (Exception $e) {  
         if ($e instanceof ValidationException) {
            // handle validation error
         }
         elseif ($e instanceof DBStorageException) {
            // handle DB error
         }
     }
  }
}

class Model {
  public function save($data) {
     if (! $this->_validate($data)) {
        throw new ValidationException ('Validation error');
     }
     if (! $this->_save($data)) {
        throw new DBStorageException ('Storage error');
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T22:21:47.177

**模型可以抛出异常并且控制器或视图应该捕获它**。否则你永远不知道那里的一切是否正常。所以使用第一个选项。但**请确保您抛出对控制器和 View 有意义的正确抽象的异常**。

为了说明上面的粗线，请参见模型内部使用的这两个 throw 语句。

```
 throw new Exception('SQL Error: '.$mysqli->error()); // dont use it
 throw new DuplicateFieldException('Duplicate username'); // use this 
```

第二个示例没有显示内部错误。相反，它隐藏了它。控制器永远不应该知道里面发生了什么。

在您的代码中，您将单个模型绑定到单个控制器。控制器不代表单个模型。它使用模型。它可以使用任意数量的模型。所以不要将单个模型与带有变量的控制器捆绑在一起`private $model`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:19:09.913

绝对是第一选择。一些单词：

*   控制器的工作是……嗯，控制。这意味着，它应该小心，至少会出现一个有用的错误消息。应用程序的其他部分可能会在它们能够处理异常情况之前执行此操作。这包括模型本身：如果它能够处理它，它应该这样做。

*   `save()`意思是“保存”。不要滥用状态信息的返回值。当方法不能提供时，`save()`它是一个例外，并且当方法不必给你一些东西时，它不应该给你一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:18:19.780

我更喜欢选项3。

模型应该捕获异常，尝试解决它，如果不将其渗透到控制器，但前提是它是控制器可以解决和恢复的东西。在这种情况下，（某种 DB 保存失败）在模型返回中捕获它`false`应该足以解决保存错误，并为控制器提供足够的信息来知道保存时出了什么问题。

控制器不需要担心模型如何实现保存的实现细节。

# android - 片段中的Android gridview

> ID：14224934
> 
> 赞同：0
> 
> 时间：2013-01-08T22:12:22.213
> 
> 标签：android, android-fragments

嗨，我在片段中遇到了 android gridview 的问题。我有搜索解决方案但没有成功，也许在这里我解决了这个问题。谢谢。我的代码是：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.frontpage, container, false);
        createGridCategory(inflater, view);
        return view;
    }

    public void createGridCategory(LayoutInflater inflater, View container) {
        AdapterView<ListAdapter> itemsGridViewObj = (GridView) container.findViewById(R.id.newsScrollerContent);

        categoryNames = database.getEnabledCategories()[1];
        physicalCategories = new ArrayList<RelativeLayout>(categoryNames.length);
        physicalItems = new ItemLayout[categoryNames.length][categoryRowLength]; 

        // loop through adding category views
        for (int i = 0; i < categoryNames.length; i++) {
            RelativeLayout categoryTitleBar = (RelativeLayout) inflater
                    .inflate(R.layout.list_category_item, null);

            categoryTitleBar.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    int id = physicalCategories.indexOf(view);
                    clickHandler.onCategoryClick(categoryNames[id]);
                }
            });

            TextView name = (TextView) categoryTitleBar
                    .findViewById(R.id.categoryTitle);
            name.setText(categoryNames[i]);

            physicalCategories.add(i, categoryTitleBar);
            itemsGridViewObj.addView(categoryTitleBar);
        }
    } 
```

/res/layout/frontpage.xml 中的布局

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/newsScroller"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5" >   

   <GridView
        android:id="@+id/newsScrollerContent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:verticalSpacing="10dp" >
    </GridView>

</ScrollView> 
```

/res/layout/list_category_item.xml 中的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/categoryTitleBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="7dp"
    android:paddingLeft="7dp"
    android:paddingRight="7dp"
    android:paddingTop="7dp" >

    <TextView
        android:id="@+id/categoryTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="No Title"
        android:textSize="17sp" />

</RelativeLayout> 
```

如果我在 logcat 中查看错误是：

```
01-09 05:02:20.139: E/AndroidRuntime(10804): FATAL EXCEPTION: main
01-09 05:02:20.139: E/AndroidRuntime(10804): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.digitallizard.bbcnewsreader/com.digitallizard.bbcnewsreader.ReaderActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1959)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1984)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.ActivityThread.access$600(ActivityThread.java:126)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1150)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.os.Looper.loop(Looper.java:137)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.ActivityThread.main(ActivityThread.java:4456)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at java.lang.reflect.Method.invokeNative(Native Method)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at java.lang.reflect.Method.invoke(Method.java:511)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at dalvik.system.NativeStart.main(Native Method)
01-09 05:02:20.139: E/AndroidRuntime(10804): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.digitallizard.bbcnewsreader.ReaderActivity.onCreate(ReaderActivity.java:450)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.Activity.performCreate(Activity.java:4465)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1923)
01-09 05:02:20.139: E/AndroidRuntime(10804):    ... 11 more
01-09 05:02:20.139: E/AndroidRuntime(10804): Caused by: java.lang.UnsupportedOperationException: addView(View) is not supported in AdapterView
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.widget.AdapterView.addView(AdapterView.java:445)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.digitallizard.bbcnewsreader.fragments.FrontpageFragment.createGridCategory(FrontpageFragment.java:123)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at com.digitallizard.bbcnewsreader.fragments.FrontpageFragment.onCreateView(FrontpageFragment.java:95)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:845)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1058)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1156)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:270)
01-09 05:02:20.139: E/AndroidRuntime(10804):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
01-09 05:02:20.139: E/AndroidRuntime(10804):    ... 21 more 
```

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:35:21.667

您的问题是您正在使用抛出 UnsupportedOperationException 的不受支持的方法。检查[这个](http://developer.android.com/reference/android/widget/AdapterView.html#addView%28android.view.View%29)

您可以覆盖。

# share - 通过 google+ 共享时不考虑结构化数据

> ID：14224936
> 
> 赞同：1
> 
> 时间：2013-01-08T22:12:29.277
> 
> 标签：share, google-plus

我看到谷歌看到了正确结构化的数据，但这些数据没有预先填充在共享对话框中。来自谷歌开发工具的数据：rdfa-node 属性：

```
image:  https://s3.amazonaws.com/&lt;bucket&gt;/images/image_200_200.JPG
title:  Sandal
url:    https://site.amazonaws.com/p/view/27
description:    description
type:   article 
```

我的元标签：

```
<meta property="og:image" content="https://s3.amazonaws.com/<bucket>/images/image_200_200.JPG">
<meta property="og:title" content="Sandal">
<meta property="og:url" content="https://site.amazonaws.com/p/view/27">
<meta property="og:description" content="description">
<meta property="og:type" content="article"> 
```

调用对话框的代码：

```
<a class="gplus in-popup" sm_type="gplus" href="https://plus.google.com/share?url=https://site.amazonaws.com/p/view/27"></a> 
```

图片为 200*200 像素。我试过 900*900 和 120*120 - 一样。一切看起来都不错，但我仍然只能在共享对话框中看到 url。是否有可能是因为图像来自另一个主机？也许还有一些其他的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:59:32.830

您是否尝试过使用片段微数据？使用[Google+ 开发者页面上的代码片段工具](https://developers.google.com/+/plugins/snippet/)来生成它。

以下示例说明了如何输入您的微数据：

```
<!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html itemscope itemtype="http://schema.org/Article">

<!-- Add the following three tags inside head. -->
<meta itemprop="name" content="Sandal">
<meta itemprop="description" content="description">
<meta itemprop="image" content="https://s3.amazonaws.com/&amp;lt;bucket&amp;gt;/images/image_200_200.JPG"> 
```

# charts - 如何提供来自不同域的 System.Web.UI.DataVisualization 图表图像？

> ID：14224937
> 
> 赞同：0
> 
> 时间：2013-01-08T22:12:33.453
> 
> 标签：charts, cdn, mschart, cookieless, system.web.ui.webcontrols

我有一组 System.Web.UI.DataVisualization 图表 (ASP.NET 4.0) 运行良好并将文件保存到磁盘。没有问题，效果很好。

挑战在于，我从无 cookie 域提供所有静态图像和资产——最终可能来自 CDN——不幸的是，图表的 IMG SRC 始终是相对的。我似乎无法找到一种方法来覆盖它，以便我可以指定静态资产服务器的根域。

我还没有尝试过的一些可能的解决方法是：

*   以程序方式生成图表并手动将图像控件添加到页面
*   URL 重写任何对图像的请求（额外的服务器命中，可能不起作用）
*   在标记发送到浏览器之前手动搜索和替换 SRC（呃）

还有其他我不知道/想到的可能性吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:51:17.707

为了回答我自己的问题，以编程方式生成图表的第一个项目符号（与在 HTML 中具有控件标记相比）并手动向页面添加控件似乎工作得很好。

但是，它消除了在标记中设置样式的能力，因此欢迎任何其他想法。

编辑：我决定保留样式标记并以编程方式隐藏图表控件并单独添加图像控件。效果很好！

编辑：我的解决方案单独添加图像控件有一个警告 - 如果您对每个数据点使用工具提示，一旦您实施此更改，它们将不再起作用，因为它们是由控件本身生成的。

# c# - 使用 C# 在 app.config 文件中封装文件名

> ID：14224944
> 
> 赞同：5
> 
> 时间：2013-01-08T22:13:23.980
> 
> 标签：c#, .net, xml, app-config, filenames

是否可以将文件名包含在 app.config 文件中并在您的代码中使用它们？

例如，此代码完美运行：

```
string folder = @"C:\CDR_FTP1\ttfiles_exported\"; 
```

如果我想从 app.config 文件中获取上述值

1.  可以这样做吗？
2.  语法是什么？

例如，在 app.config 中，我可以尝试使用以下内容：

```
<add key="InputDir" value=@"D:\CDR_FTP1\ttfiles_exported\" /> 
```

我无法添加“@”，因为它会给我以下错误：

```
"The character '@', hexadecimla value 0x40 is illegal at the beginning of an XML name." 
```

如果我尝试在下面的代码中使用它，那很好，但是**我需要在哪里以及如何粘贴“@”以使应用程序正确读取它？**

```
string folder = ConfigurationSettings.AppSettings["InputDir"]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T22:14:44.803

只需使用：

```
<add key="InputDir" value="D:\CDR_FTP1\ttfiles_exported\" /> 
```

XML 属性中无需转义`\`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T22:26:49.417

扩展基里尔的答案：

XML 属性中的特殊字符与 C# 字符串中的特殊字符不同。

In C# the character '\' is the string escape character, used to denote escape sequences such as '\n' for end of line, as you are probably aware; and hence needs to be escaped either as '\\' or by using @"".

In XML '\' has no especial meaning inside attribute values and can be use as is. This is not true for the '&' and '"' characters among others. If you wanted to include the value:

```
M & M "The chocolates" 
```

in an app.config they would have to be escaped so:

```
<add key="SomeString" value="M &amp; M &quot;The chocolates&quot;" /> 
```

# node.js - nodejs 分析；“未知”是什么

> ID：14224948
> 
> 赞同：7
> 
> 时间：2013-01-08T22:13:38.547
> 
> 标签：node.js, profiling, v8

在分析 nodejs 程序时，我看到 61% 的滴答声是由“未知”引起的（见下文）。这会是什么？我应该寻找什么？

克，

科恩

```
Statistical profiling result from node, (14907 ticks, 9132 unaccounted, 0 excluded).

 [Unknown]:
   ticks  total  nonlib   name
   9132   61.3%

 [Shared libraries]:
   ticks  total  nonlib   name
   1067    7.2%    0.0%  C:\Windows\SYSTEM32\ntdll.dll
     55    0.4%    0.0%  C:\Windows\system32\kernel32.dll

 [JavaScript]:
   ticks  total  nonlib   name
   1381    9.3%   10.0%  LazyCompile: *RowDataPacket.parse D:\MI\packet.js:9
...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:53:04.027

您是否正在加载任何已构建依赖项的模块？

基本上，“未知”的意思是“下落不明”（查看`tickprocessor.js`更多解释）。例如，GC 将打印诸如“scavenge,begin,...”之类的消息，但`logreader.js`.

这将有助于了解您使用什么分析库来解析`v8.log`文件。

**更新**

该`node-tick`软件包已经一年多没有更新了，可能缺少很多最近的`prof`命令。尝试改用[node-profiler](https://github.com/bnoordhuis/node-profiler)。它是由节点的维护者之一创建的。如果你想要绝对最好的结果，你需要使用`node-gyp`.

**更新**

我已经使用[node-profiler](https://github.com/bnoordhuis/node-profiler)中的最新版本（最新版本，而不是最新标签）解析了`v8.log`输出，并将结果发布在[http://pastebin.com/pdHDPjzE](http://pastebin.com/pdHDPjzE)`master`

请允许我指出几个出现在一半左右的关键条目：

```
[GC]:
  ticks  total  nonlib   name
  2063   26.2%

[Bottom up (heavy) profile]
6578   83.4%  c:\node\node.exe
1812   27.5%    LazyCompile: ~parse native json.js:55
1811   99.9%      Function: ~<anonymous> C:\workspace\repositories\asyncnode_MySQL\lib\MySQL_DB.js:41
 736   11.2%    Function: ~Buffer.toString buffer.js:392 
```

因此，所有脚本类型的 26.2% 用于垃圾收集。这比它应该的要高得多。尽管它确实与花在`Buffer.toString`. 如果创建了这么多缓冲区然后将其转换为字符串，则在它们离开范围时都需要 gc'd。

我也很好奇为什么要花这么多时间`LazyCompile`在`json.js`. 或者更重要的是，为什么`json.js`在节点应用程序中甚至是必要的？

为了帮助您调整应用程序的性能，我在下面提供了一些链接，这些链接可以很好地说明要做什么和寻找什么。

带有基础知识的漂亮幻灯片：
[https ://mkw.st/p/gdd11-berlin-v8-performance-tuning-tricks/#1](https://mkw.st/p/gdd11-berlin-v8-performance-tuning-tricks/#1)

更高级的优化技术示例：http:
[//floitsch.blogspot.com/2012/03/optimizing-for-v8-introduction.html](http://floitsch.blogspot.com/2012/03/optimizing-for-v8-introduction.html)

更好地使用闭包：http:
[//mrale.ph/blog/2012/09/23/grokking-v8-closures-for-fun.html](http://mrale.ph/blog/2012/09/23/grokking-v8-closures-for-fun.html)

现在至于为什么您无法获得相同的输出。如果您构建并使用了[node-profiler](https://github.com/bnoordhuis/node-profiler)及其提供`nprof`的工具`master`，但它仍然无法正常工作，那么我认为它与在 Windows 上有关。考虑在 GitHub 上提交一个错误，看看他是否会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:48:27.617

您正在使用 64 位版本的 Node.JS 来运行您的应用程序，并使用 32 位版本的 d8 shell 来处理您的`v8.log`. 使用带有 ia32 作为 d8 shell 构建目标的 32 位版本的 Node.JS 或带有 x64 作为 d8 shell 构建目标的 64 位版本的 Node.JS 应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:18:04.813

尝试构建具有分析支持的 v8：

```
scons prof=on d8 
```

确保`node --prof`使用与 v8 版本对应的版本运行

然后`tools/linux-tick-processor path/to/v8.log`应该向您显示完整的个人资料信息。

# php - 在查询中更改值后，难以在 elseif 语句中使用 var 值

> ID：14224950
> 
> 赞同：0
> 
> 时间：2013-01-08T22:13:41.627
> 
> 标签：php, variables, key-value, if-statement

**更新 -**我终于想通了，我在下面添加了答案*:-)（只要系统允许，我就会接受它作为回答）*

* * *

我认为我可能做错了一些非常简单的事情（即错误地调用了变量），因为我在几种情况下都遇到了类似的问题。

我正在创建一个密码重置表单，并希望在一个页面上包含各种步骤和表单部分。我正在使用一系列 elseif 语句来确定要显示的 html 代码和/或要执行的 php 脚本，并在一系列查询成功或失败时更改变量的值。

我已经测试了查询并且 var 值正确更改（我在每个步骤中都回显了该值以确认），但除非手动设置 var 值，否则不会显示正确的结果。

出于问题的目的，我包含了 2 个简化的片段 - 一个非常基本的场景（我可以轻松地将其应用于我的代码）和我的代码的简化版本，如果更可取，我很乐意分享完整的代码.

**编辑 -**在为 $status 设置新值之前，我也尝试过调用`GLOBAL $status;`，这可能是问题所在。

基本场景：

```
<?php
//session_start and connect to database 
$status="start";
?>
<?php $status="start"; ?>
<?php if ($status == "start") { ?>
    Check if expiry valid & retrieve info 
    <?php $status = "expiry_ok"; ?>    
<?php }
elseif ($status == "expiry_ok") 
{ ?>
    Date is Valid
<?php } ?> 
```

简化版查询：

```
<?php if ($status == "start"){  
    //Identify the $temp_password by removing the URL
    $restorepasslink="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
    $new_pass = str_replace("http://click2fit.com/demo/restorepass.php/", "", $restorepasslink);
    //Query db to check if expiry_date has passed
    $qry="SELECT * FROM password_reset WHERE temp_password = '$new_pass'";
    $result=mysql_query($qry);
    if($result) {
            $token = mysql_fetch_assoc($result);            
            $token_expiry_date = $token['expiry_date']; 
            // Other $token values are also set here 
            if($date < $token_expiry_date) {
                $status = "expiry_ok";
            }else {
                $status = "expiry_notok";
           }  
   }
?> 
```

*注意：由于大部分教程仍然是为 mysql 查询而不是 PDO 编写的，所以我首先尝试让它全部以这种方式工作，然后再将其切换到 PDO。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:19:19.170

我通过删除最初的 if 语句解决了这个问题：

```
if ($status == "start"){...} 
```

并简单地开始 elseif 语句

```
if ($status == "expiry_ok"){...}   
elseif (...) 
```

我还删除了 $status="start"; 的初始声明。

# java - 获取集合的所有子集

> ID：14224953
> 
> 赞同：2
> 
> 时间：2013-01-08T22:13:50.887
> 
> 标签：java, arrays

```
import java.util.ArrayList;

public class Subset { //Generate all subsets by generating all binary numbers
    public static ArrayList<ArrayList<Integer>> getSubsets2(ArrayList<Integer> set) {

        ArrayList<ArrayList<Integer>> allsubsets =
            new ArrayList<ArrayList<Integer>>();
        int max = 1 << set.size();             //there are 2 power n 
        for (int i = 0; i < max; i++) {
            ArrayList<Integer> subset = new ArrayList<Integer>();

            int index = 0;
            while (i > 0) {
                if ((i & 1) > 0) {
                    subset.add(set.get(index)); //Add elements to a new ArrayList
                }
                i >>= 1;
                index++;
            }
            allsubsets.add(subset);
        }
        return allsubsets;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        ArrayList<Integer> set = new ArrayList<Integer>(); //Create an ArrayList
        set.add(1);
        set.add(2);

        System.out.println(getSubsets2(set));
    }
} 
```

结果应该是`[[],[1],[2],[1,2]]`

但是我无法得到结果，异常如下：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T22:25:27.620

您的 while 循环不正确。

使用 for 循环稍微简洁一些：

```
import java.util.ArrayList;

public class Subset { //Generate all subsets by generating all binary numbers
    public static ArrayList<ArrayList<Integer>> getSubsets2(ArrayList<Integer> set) {

        ArrayList<ArrayList<Integer>> allsubsets =
        new ArrayList<ArrayList<Integer>>();
        int max = 1 << set.size();             //there are 2 power n different subsets

        for (int i = 0; i < max; i++) {
            ArrayList<Integer> subset = new ArrayList<Integer>();
            for (int j = 0; j < set.size(); j++) {
                if (((i >> j) & 1) == 1) {
                    subset.add(set.get(j));
                }
            }
            allsubsets.add(subset);
        }
        return allsubsets;
    }

    public static void main(String[] args) {
        ArrayList<Integer> set = new ArrayList<Integer>(); //Create an ArrayList
        set.add(1);
        set.add(2);

        System.out.println(getSubsets2(set));
    }
} 
```

请记住，子集运算是指数的，因此您将获得大量元素。上面的实现只适用于大约 32 个输入元素，因为这会产生 2^32 个输出子集，这很容易让你超过数组的限制......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:26:09.353

您的问题似乎在您的循环中。如果你看它：

```
for (int i = 0; i < max; i++) {
    ArrayList<Integer> subset = new ArrayList<Integer>();
    int index = 0;
    while (i > 0) {
        if ((i & 1) > 0) {
            subset.add(set.get(index)); //Add elements to a new ArrayList
        }
        i >>= 1;
        index++;
    }
    allsubsets.add(subset);
} 
```

你会注意到外部的 for 循环试图`i`从零开始向上计数，而内部的 while 循环每次迭代都将其重新计数为零，因此外部循环永远运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-10T20:17:54.367

这是针对此问题的 Java 8 解决方案：

```
public Set<Set<Integer>> getSubsets(Set<Integer> set) {
    if (set.isEmpty()) {
       return Collections.singleton(Collections.emptySet());
    }

    Set<Set<Integer>> subSets = set.stream().map(item -> {
        Set<Integer> clone = new HashSet<>(set);
        clone.remove(item);
        return clone;
    }).map(group -> getSubsets(group))
            .reduce(new HashSet<>(), (x, y) -> {
                x.addAll(y);
                return x;
            });

    subSets.add(set);
    return subSets;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T22:30:55.583

简而言之，您的内部 while 循环正在更改外部 for 循环的循环变量 ( `i`)。这破坏了外循环迭代。在内循环结束时，值`i`将为零……这意味着外循环永远不会终止。

鉴于您正在执行的操作，解决方法是`j`为内部循环使用不同的变量（例如 ），并从`i`.

* * *

这说明了为什么在循环内更改 for 循环变量是一个坏主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T22:22:06.193

程序永远运行。下面的语句继续执行并退出内存。变量 i 的值永远不会大于最大值，请检查它。

```
`subset.add(set.get(index));` 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-10T15:51:16.013

递归解决方案怎么样？

```
vector<vector<int> > getSubsets(vector<int> a){

//base case
    //if there is just one item then its subsets are that item and empty item
    //for example all subsets of {1} are {1}, {}

    if(a.size() == 1){
        vector<vector<int> > temp;
        temp.push_back(a);

        vector<int> b;
        temp.push_back(b);

        return temp;

    }
    else
    {

         //here is what i am doing

         // getSubsets({1, 2, 3})
         //without = getSubsets({1, 2})
         //without = {1}, {2}, {}, {1, 2}

         //with = {1, 3}, {2, 3}, {3}, {1, 2, 3}

         //total = {{1}, {2}, {}, {1, 2}, {1, 3}, {2, 3}, {3}, {1, 2, 3}}

         //return total

        int last = a[a.size() - 1];

        a.pop_back();

        vector<vector<int> > without = getSubsets(a);

        vector<vector<int> > with = without;

        for(int i=0;i<without.size();i++){

            with[i].push_back(last);

        }

        vector<vector<int> > total;

        for(int j=0;j<without.size();j++){
            total.push_back(without[j]);
        }

        for(int k=0;k<with.size();k++){
            total.push_back(with[k]);
        }

        return total;
    }

} 
```

# asp.net-web-api - Ninject 中的域和存储库交叉引用

> ID：14224957
> 
> 赞同：0
> 
> 时间：2013-01-08T22:14:07.237
> 
> 标签：asp.net-web-api, ninject

我有 3 个项目：`Contracts`, `Domain`, `Repository`.

`Contracts`有接口。 `Domain`并且`Repository`两者都参考`Contracts`。

类的构造函数`Domain`被传递`IRepo`。类的构造函数`Repository`被传递`IDomain`。

WebAPI throws 未设置默认构造函数。如果我删除构造函数，`Repository`那么一切正常。这两个类都有一个默认的无参数构造函数。

问题是`Repository`需要返回一个类型的具体对象`Domain`，但不能这样做，因为它没有对`Domain`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:41:52.997

我决定删除构造函数参数并将实体传递给需要它的任何方法。

# sql-server - 为什么我的插入触发器没有触发？

> ID：14224958
> 
> 赞同：0
> 
> 时间：2013-01-08T22:14:07.710
> 
> 标签：sql-server, triggers

这是我创建的触发器，当我检查表“raw_agent_data_buffer”是否有任何空行/数据时，即使“表 raw_agent_data”接收到更多数据/插入也是如此。

知道为什么吗？

```
USE [agents]

GO

SET ANSI_NULLS ON

GO

SET QUOTED_IDENTIFIER ON

GO

CREATE TRIGGER [dbo].[raw_insert]
ON [dbo].[raw_agent_data]
after INSERT
AS
  BEGIN
      SET NOCOUNT ON;

      INSERT INTO agents.dbo.raw_agent_data
      SELECT i.post_id,
             i.post_name,
             i.post_data
      FROM   inserted i
  END

GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:18:28.447

从您问题中的文本中，您希望将行添加到名为`raw_agent_data_buffer`.

您的触发器不会将任何行添加到该名称的表中。

它插入到不同的表中`agents.dbo.raw_agent_data`，因此应该清楚为什么您没有看到添加到的行`raw_agent_data_buffer`

# git - 将 Git 子模块转换为子树后出现合并错误

> ID：14224966
> 
> 赞同：18
> 
> 时间：2013-01-08T22:15:05.597
> 
> 标签：git, merge, git-submodules, git-subtree

我有一个项目，我最初将子模块用于一些依赖代码。事实证明，子模块并不真正适合这个项目（而且它们在实践中很难使用），所以我将每个子模块转换为子树（使用新`git-subtree`功能）。

在我的工作存储库中，我已成功删除每个子模块并将旧的子模块存储库添加为子树。这没问题。

当我转到另一个克隆并尝试从第一个克隆中提取时，合并步骤中出现以下错误：

```
error: The following untracked working tree files would be overwritten by merge:
        sub/.gitignore
        sub/Makefile
        sub/README
        sub/src/main.c
        ... and so on for all files in sub/
Aborting 
```

这似乎是因为文件从一开始`sub/`就从未真正存在于主存储库中，并且当 Git 应用补丁进行更新`.gitmodules`时，它不会删除包含子模块文件的目录。在处理下一次提交时，Git 尝试在其中创建新文件，`sub/`这些*文件*现在是主存储库的一部分，所有这些文件都与`sub/`.

我发现的解决方法是使用`rm -rf sub`before `git pull`，这样可以避免这个问题。

我的问题是，有没有我可以使用的命令行开关`git merge`，上面写着“覆盖工作目录中碰巧存在的任何文件”？更好的功能`git merge`是查看现有文件的内容，如果内容与它要创建的文件相同，则禁止显示错误消息并继续。

**更新**：我已经创建了演示这个问题的 Git 存储库，以准确显示我在说什么。重现：

```
$ git clone https://github.com/ghewgill/q14224966.git
$ cd q14224966
$ git submodule init
$ git submodule update
$ git merge origin/branch 
```

这应该会导致错误消息

```
error: The following untracked working tree files would be overwritten by merge:
    sub/Makefile
    sub/README
    sub/src/main.c
Please move or remove them before you can merge.
Aborting 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T23:03:41.070

我知道您的问题是针对合并的，但我在合并 git 子模块时遇到了类似的问题。我认为这个解决方案可以解决您的问题，即使它没有直接解决合并问题。

我发现通过强制检查要合并的分支，然后返回 master，子模块一切正常。

要在您的示例中正常工作：

```
$ git clone https://github.com/ghewgill/q14224966.git
$ cd q14224966
$ git submodule init
$ git submodule update
$ git checkout -f origin/branch
$ git checkout master
$ git merge origin/branch 
```

这是有效的，因为它基本上是在`rm -rf`为你做你的步骤。当然，这有点迂回，如果你只有一个像你的例子那样的子模块，可能不值得做。但是我发现在一个包含许多子模块的项目中工作时，它可以节省很多时间。

此外，正如评论中所指出的，如果您想避免对工作树进行更改，您可以使用以下命令：

```
$ git clone https://github.com/ghewgill/q14224966.git
$ cd q14224966
$ git submodule init
$ git submodule update
$ git reset origin/branch
$ git reset --hard master 
```

这以大致相同的方式工作，但避免在此过程中检出其他文件。我没有机会在野外使用它，但它似乎是一种合理的方法。

还有`$ git merge -s subtree origin/branch`。它适用于您的示例，但是当涉及多个子模块时，我得到了意想不到的结果。不过，你可能会有更好的运气。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T23:32:21.603

您无法`git-merge`（或任何其他命令）强制破坏它认为它不知道的文件，不。git 非常努力地不做任何*完全*不可逆转的事情。

但是对于许多子模块，您*可以通过*以下方式使删除变得更容易和更安全`git submodule foreach`：

```
$ git submodule foreach 'rm -rf $toplevel/$path'
Entering 'sub'
$ git merge origin/branch
Updating a231acd..6b4d2f4
Fast-forward
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T18:56:12.703

（警告：我从未使用过子树，而且我不知道您的实际存储库有多复杂，因此这些解决方案实际上可能不适合您。）

通过使用您的示例存储库，我发现了两种似乎都有效的解决方案，尽管它们产生了不同的提交树：

1.  利用`git merge -s resolve origin/branch`

    ```
    ~/q14224966[master]> git reset --hard origin/master
    HEAD is now at a231acd add submodule
    ~/q14224966[master]> touch other.c && git add . && git commit -m "New commit."
    [master bc771ac] New commit.
     0 files changed
     create mode 100644 other.c
    ~/q14224966[master]> git merge -s resolve origin/branch 
    Trying really trivial in-index merge...
    error: Merge requires file-level merging
    Nope.
    Trying simple merge.
    Simple merge failed, trying Automatic merge.
    Adding sub/Makefile
    Adding sub/README
    Adding sub/src/main.c
    Merge made by the 'resolve' strategy.
     .gitmodules    | 3 ---
     sub            | 1 -
     sub/Makefile   | 1 +
     sub/README     | 1 +
     sub/src/main.c | 1 +
     5 files changed, 3 insertions(+), 4 deletions(-)
     delete mode 160000 sub
     create mode 100644 sub/Makefile
     create mode 100644 sub/README
     create mode 100644 sub/src/main.c
    ~/q14224966[master]> ls
    README   main.c   other.c  sub/
    ~/q14224966[master]> cd sub/
    ~/q14224966/sub[master]> ls
    Makefile  README    src/
    ~/q14224966/sub[master]> git status
    # On branch master
    # Your branch is ahead of 'origin/master' by 5 commits.
    #
    nothing to commit (working directory clean)
    ~/q14224966/sub[master]> cd ..
    ~/q14224966[master]> git status
    # On branch master
    # Your branch is ahead of 'origin/master' by 5 commits.
    #
    nothing to commit (working directory clean) 
    ```

    这是生成的提交树：![git commit tree - 合并选项](../Images/6782d9150c18ed97f01012c93edbc212.png)

2.  使用变基而不是合并：

    ```
    ~/q14224966[master]> git reset --hard origin/master 
    HEAD is now at a231acd add submodule
    ~/q14224966[master]> touch other.c && git add . && git commit -m "New commit."
    [master ae66060] New commit.
     0 files changed
     create mode 100644 other.c
    ~/q14224966[master]> git rebase origin/branch 
    First, rewinding head to replay your work on top of it...
    Applying: New commit.
    ~/q14224966[master]> ls
    README   main.c   other.c  sub/
    ~/q14224966[master]> cd sub/
    ~/q14224966/sub[master]> ls
    Makefile  README    src/
    ~/q14224966/sub[master]> git status
    # On branch master
    # Your branch is ahead of 'origin/master' by 4 commits.
    #
    nothing to commit (working directory clean)
    ~/q14224966/sub[master]> cd ..
    ~/q14224966[master]> git status
    # On branch master
    # Your branch is ahead of 'origin/master' by 4 commits.
    #
    nothing to commit (working directory clean) 
    ```

    这是生成的提交树：![git commit tree - rebase 选项](../Images/5422a7cafd34a00ad00235354fdebfb7.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T09:38:29.133

它试过了

> git fetch --all
> 
> git reset --hard origin/master

但它不起作用。

您可以使用“我们的”合并策略：

git merge -s ours old-master

您还可以使用 git-stash 保存更改，然后 git-stash apply 来恢复它们。

# django - Django：在不使用 connection.queries 的情况下计算查询和查询时间

> ID：14224972
> 
> 赞同：0
> 
> 时间：2013-01-08T22:15:30.323
> 
> 标签：django

对于性能监控，我想将每个请求的总查询计数和经过的查询时间发送到 statsd。在 dev/staging 中我可以使用 connection.queries 但我显然不想在生产中启用调试。

有没有另一种方法可以在不编写自定义光标包装器的情况下做到这一点？有人有这样做的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:16:54.717

使用专门为调试目的设计的[django 调试工具栏。](https://github.com/django-debug-toolbar/django-debug-toolbar)它显示有关当前请求/响应的各种调试信息，并在单击时显示有关面板内容的更多详细信息。

# windows-phone-7 - 我的 WP7 C# 应用程序如何始终显示系统托盘或以编程方式展开它？

> ID：14224973
> 
> 赞同：1
> 
> 时间：2013-01-08T22:15:32.027
> 
> 标签：windows-phone-7, system-tray, batterylevel

我正在编写一个 Windows Phone 7.5 应用程序。如何通过 c# 代码扩展系统托盘？如果用户单击特定按钮，我希望应用程序显示带有电池状态的系统托盘。如果用户点击时钟，那么通常 WP7 会展开系统托盘并在系统托盘中显示电池状态的图标。我想以编程方式对特定操作进行此操作。例如，IE 也这样做：如果您单击“...”，则会显示带有电池状态图标的系统托盘。

是否有可能在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:29:20.850

如果您想显示完整的系统托盘，您需要在状态从更改为时调用[SystemTray.IsVisible](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.shell.systemtray.isvisible%28v=vs.105%29.aspx)`IsVisible=false`，`IsVisible=true`您应该会获得与您在 IE 中看到的类似的动画。托盘将在短时间内自动隐藏，这在 WP 中很常见。

请记住，Metro 指南不建议这样做。

```
private void Foo()
{
    SystemTray.IsVisible = true;
} 
```

# macos - 使用 SvnBridge 到 TFS 的 Mac Subversion 客户端？

> ID：14224975
> 
> 赞同：0
> 
> 时间：2013-01-08T22:15:46.357
> 
> 标签：macos, cornerstone, svnbridge

我们的情况是，大量 .NET 开发人员使用 Team Foundation Server 2010 进行源代码控制，而少数 iOS 开发人员（显然是在 Mac OS X 上）使用 Subversion。

为了统一这两个系统，我们研究了在 TFS 服务器上使用[SvnBridge](http://svnbridge.codeplex.com/)来允许 SVN 客户端连接到它。

我们最初的测试（在 Windows 上使用 TortoiseSVN）表明它工作得很好。

然而，Mac 用户的运气并不好，他们尝试了几个不同的 SVN 客户端。

使用**Versions** SVN 客户端，他们能够查看存储库、签出和签入；但是，在查看历史记录时，它不会显示提交变更集的用户的名称，也不会显示附加到该变更集的注释。

使用**Cornerstone** SVN 客户端，他们甚至无法显示时间线，它只是一直坐在那里并跨越。

他们不希望使用 Xcode 的内置 SVN 支持，因为它是“废话”（他们的话，不是我的话）。

有没有人在 SvnBridge 中成功使用**Versions**或**Cornerstone**？您是否遇到过我所描述的问题，如果遇到过，您是如何克服这些问题的？

或者任何人都可以将我指向另一个他们已成功使用 SvnBridge to TFS 的 Mac SVN 客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:11:34.297

我个人使用 OS X 本机 SVN cli（命令行界面）按预期完成了这项工作。

我不使用 SVN GUI，但我会设想这些客户端（版本或基石），以及它们可能解析的可能预期输出可能更多是问题所在。

# c++ - OpenCV 错误：未知函数中的参数错误（数组应为 CvMat 或 IplImage）

> ID：14224978
> 
> 赞同：1
> 
> 时间：2013-01-08T22:16:05.957
> 
> 标签：c++, opencv

我现在正在使用opencv。我对这段代码有疑问：

```
IplImage *original = cvLoadImage("C:\\4.jpg");

gray = cvCreateImage( cvGetSize(original), IPL_DEPTH_8U, 1 ); 
```

在某些图像上 cvGetSize 崩溃并显示以下内容：OpenCV 错误：未知函数中的参数错误（数组应为 CvMat 或 IplImage），文件 ......\src\opencv\modules\core\src\array.cpp，第 1238 行在其他人它工作正常。为什么会发生这种情况？

# sql - Sql查询以按小时减去日期和顺序

> ID：14224980
> 
> 赞同：1
> 
> 时间：2013-01-08T22:16:14.953
> 
> 标签：sql, sql-server-2008, datediff

我有这样的桌子

```
Id  Student     Test_Start          Test_End
1   A       2013-01-08 15:00:17.100     2013-01-08 16:05:55.100 
2   B       2013-02-08 17:01:11.800     2013-02-08 19:05:15.880
3   C       2013-02-08 14:41:10.880     2013-02-08 16:49:22.880 
```

我想要做的是获取 Test_End - Test_Start 时间并将其更改为小时并按升序显示。我试过了：

```
Select convert(date, Test_End) - convert(date,Test_Start) as 'Time_Taken' from students 
```

或已尝试使用 DATEDIFF 但似乎无法使其工作。有没有最好的方法来完成这个来显示这样的东西：

```
Time_Taken
1
2
2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T22:17:43.893

```
select 
    id,
    student,
    datediff(hour, test_start, test_end) as time_taken
from students
order by time_taken 
```

如果你想四舍五入，确定分钟，加上将需要四舍五入到下一个小时的分钟数，然后除以 60 得到四舍五入的小时......

```
select 
    id,
    student,
    (datediff(minute, test_start, test_end) + 30) / 60 as rounded_time_taken
from students
order by rounded_time_taken 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:28:49.997

你真的想要整数小时吗？在大多数情况下，我宁愿将结果视为分数小时：

```
select id, student, datediff(s, test_start, test_end)/(60.0*60.0) as hours_taken
from students
order by test_start, test_end)/(60.0*60.0) 
```

# javascript - HTML 元素被切断？

> ID：14224987
> 
> 赞同：0
> 
> 时间：2013-01-08T22:17:06.410
> 
> 标签：javascript, html, twitter-bootstrap, popover

我正在使用 twitter 引导程序，并且正在使用他们的弹出窗口来显示有关电影的一些信息。

但它只是被切断了！就像下图一样。

这个 JSFidde： http: [//jsfiddle.net/uGKAz/](http://jsfiddle.net/uGKAz/)显示了问题但是在这个 JSFidde 中问题不存在.. [http://jsfiddle.net/uGKAz/1/](http://jsfiddle.net/uGKAz/1/) 所以它似乎是周围的元素导致它..

**此外，如果我将弹出框定位到“右”而不是“左”，我会得到相同的截止线，但弹出框的右侧。**

我已经添加了一个样式

boostrap.js 中的元素：

```
, template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p style="display:inline-block;"></p></div></div></div>' 
```

以下是错误的外观： ![在此处输入图像描述](../Images/6ed4e2fb0c3817c8743babf2289d3c11.png)

添加显示在 Chrome 中选择的完整元素的图像： ![在此处输入图像描述](../Images/85cae3effda853fa6ff9988b8561e7ae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:53:44.130

**TADA，溢出隐藏：**

检查以下 div

```
<div id="second_row" style=""> 
```

# regex - 正则表达式从电子邮件地址中查找主机名和子域

> ID：14224989
> 
> 赞同：0
> 
> 时间：2013-01-08T22:17:24.190
> 
> 标签：regex

> **可能重复：**
> [为 Ruby 中的“from”和“to”字段解析电子邮件地址](https://stackoverflow.com/questions/12187220/parse-email-addresses-for-from-and-to-fields-in-ruby)

给定一个表单的电子邮件地址，`root@host.sub.domain.com`将主机名和子域作为两个单独变量获取的正则表达式是什么？我的意思是`$1='host'`和`$2='sub'`？

非常感谢您的帮助:)

**编辑**我应该说我在问一个*正则表达式*来做到这一点，没有 Ruby 代码。这是在后缀配置文件中使用的，所以我需要一个正则表达式。我之前错误地谈到了 Ruby。我的错，很抱歉造成混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:27:48.627

非贪婪的群体是你的朋友。它们正好符合您的需要：

```
^(?:.*?)@(.*?)\.(.*?)\.(?:.*?)\.(?:.*?)$ 
```

# android - 使用从 SharedPreferences 键获取的文本将 TextView 添加到 LinearLayout

> ID：14224994
> 
> 赞同：0
> 
> 时间：2013-01-08T22:17:52.570
> 
> 标签：android, view, android-linearlayout

我正在尝试从 SharedPreferences 对象创建一个键列表。由于用户可以添加新的键值对，我需要动态地进行。

这是我活动的 onCreate 函数：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LayoutInflater inflater = this.getLayoutInflater();
        LinearLayout layout = (LinearLayout)inflater.inflate(R.layout.activity_show_saved, null);

        this.add_here = (LinearLayout)layout.findViewById(R.id.saved_list);

        // Loading shared preferences
        SharedPreferences sp = this.getSharedPreferences("saved_sequences", MODE_PRIVATE);
        Map<String, ?> kv = sp.getAll();

        int i = 0;
        // Iterating through shared preferences
        for(Map.Entry<String, ?> entry : kv.entrySet()) {
            Toast.makeText(this, entry.getKey(), Toast.LENGTH_SHORT).show();
            TextView to_add = new TextView(this);
            to_add.setText(entry.getKey());
            to_add.setId(i++);
            this.add_here.addView(to_add, LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        }

        this.setContentView(layout);
    } 
```

`this.add_here`声明为的类变量在哪里`private LinearLayout`。这是正在膨胀的 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/background"
    tools:context=".ShowSaved" >

    <com.google.ads.AdView 
        android:id="@+id/adViewTop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adUnitId="*****************"
        ads:adSize="SMART_BANNER"
        ads:testDevices="TEST_EMULATOR"
        ads:loadAdOnCreate="true" />

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:id="@+id/saved_list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

不幸的是，我得到一个空白屏幕。问题在于添加 TextViews，因为 while 内的 Toast 正确地显示了已保存的键，正如预期的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:11:15.607

我刚刚做了类似的动态列表，但我的 TextView 是独立布局的一部分。也许这对你有用。

这段代码对我有用：

```
 final ScrollView ll = (ScrollView) getLayoutInflater().inflate(
                R.layout.dropdown_list, null);

        final LinearLayout container = ((LinearLayout) ll
                .findViewById(R.id.dropdown_list_container));

        if (myObjectsCount > 0) {

            for (final MyObject ci : myObjects()) {

                LinearLayout item = ((LinearLayout) getLayoutInflater()
                        .inflate(R.layout.list_item, null));

                TextView tv = ((TextView) item
                        .findViewById(R.id.list_item_text));
                tv.setText("your text here");

                container.addView(item);

            }
        } 
```

文本视图的布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/list_item"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/buttons"
android:clickable="true"
android:gravity="center_vertical"
android:orientation="horizontal" >

<TextView
    android:id="@+id/list_item_text"
    style="@android:style/Widget.TextView"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:gravity="center_vertical" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:11:07.010

正如有人已经在评论中指出的那样，这不是正确的做法。这是使用 ListView 获得的结果。看一看。

```
public class ShowSaved extends Activity implements OnItemClickListener {

    // Layout
    private ListView add_here;
    private TextView empty_view;

    // String Array
    private ArrayList<String> string = new ArrayList<String>();

    // SharedPreferences object and editor
    private SharedPreferences sp;

    // Array adapter for ListView add_here
    private ArrayAdapter<String> saved;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.activity_show_saved);

        this.add_here = (ListView)findViewById(R.id.saved_list);
        this.empty_view = (TextView)findViewById(R.id.empty_text);

        // Loading shared preferences and editor
        this.sp = this.getSharedPreferences("saved_sequences", MODE_PRIVATE);

        // Creating the Adapter with all strings in an array
        this.saved = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, string);
        this.saved.setNotifyOnChange(true);

        // Retrieving all pairs in SharedPreferences sp
        Map<String, ?> kv = sp.getAll();

        // Iterating through shared preferences
        for(Map.Entry<String, ?> entry : kv.entrySet()) {       
            saved.add(entry.getKey());
        }

        // Setting Adapter to ListView and empty View
        this.add_here.setEmptyView(empty_view);
        this.add_here.setAdapter(this.saved);

        // Setting Listener for ListView add_here
        this.add_here.setOnItemClickListener(this);
    } 
```

注意：此代码不会自行编译，因为它缺少 OnItemClickListener 接口所需的 onItemClick 函数。

# image-processing - 在 OCR 处理之前移除背景颜色或纹理

> ID：14224995
> 
> 赞同：1
> 
> 时间：2013-01-08T22:18:05.877
> 
> 标签：image-processing, computer-vision, ocr

典型的手机用户在为卡片大小的物体拍照时，图像中通常会包含一些背景纹理——请参考附件示例。在某些情况下，该背景可能会影响 OCR 的准确性。

我想知道是否有解决方案来去除背景（我肯定有），或者检测背景区域，以便可以在 OCR 之前将它们裁剪掉。在附加图像的情况下，木桌和台面展示是被删除的候选对象。我想对比色可能是一种解决方案，但不太确定。

![在此处输入图像描述](../Images/a662a7036560b53f9821d1f373893aab.png)

![在此处输入图像描述](../Images/b305e3ee33c4573aed73f443678f6ead.png)

![在此处输入图像描述](../Images/44adad486b2720e9ebcbc3557cfd7546.png)

![在此处输入图像描述](../Images/71ce99f608fef53262077777c7654989.png) ![在此处输入图像描述](../Images/21977c85e517ac5ad6416b51e3e10754.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:48:26.497

在某些情况下，作为人类，您很难区分背景和前景，因此肯定没有方法可以正确地做您想做的事。既然您提到了 OCR，我假设您实际上想要消除非文本的所有内容。这实际上并没有使问题变得更容易，所以我实际上假设的是您想要保留与其他对象高度对比的对象（例如前景和背景，或白色背景上的黑色文本）。同样，没有完美的方法。

因此，所有这些答案要做的就是提供一种简单的方法，可以帮助您完成任务。该方法结合了现成的形态学工具和用于二值化的 Otsu 方法，因为它在统计上是最优的。结果是可能值得关注的区域。请注意，您当然需要将这些结果与许多其他不同的分析结合起来，一个好的 OCR 系统远远超出了这些直接方法。

方法： 1）将图像转换为灰度（对颜色不感兴趣，但不同的方法当然可以使用它们）；2）使用h-dome变换去除不相关的最大值；3）计算形态梯度；4）通过大津二值化；5）通过区域开口去除小物件。删除不相关的最大值对您的任务很重要，因为您可能会遇到由坏相机和坏相机闪光灯以及没有经验的摄影师组合造成的非常可怕的区域。H-dome 变换是基于形态重建的，所以如果你的库有后者但没有前者，那么实现它很简单（否则你可以学习如何有效地实现后者）。离散图像的形态梯度是一种非常简单的应用方法，即使在光照不佳的情况下也能正常工作，因为它是一种本地方法。Otsu 对其结果的阈值保持最强的边缘（可能包括噪声和其他次要特征）。您可以在所有这些之前进行高斯平滑处理，这可以作为抑制噪声的初始工具。小特征很容易通过区域开口去除。在 Matlab 中，可以这样做：

```
f = rgb2gray(imread(yourimage));
se = strel('square', 3);
g = imhmax(f, 50);                    % h-dome with h = 50
g = imdilate(g, se) - imerode(g, se); % morphological gradient
h = im2bw(g, graythresh(g));          % graythresh applies Otsu's method
w = bwareaopen(h, 50); 
```

假设小于 50 像素的对象是不相关的（对于小文本可能并非总是如此）。

以下是`w`您的示例的图像：

![在此处输入图像描述](../Images/21a646a49511dc556046e32b8fd30d8c.png) ![在此处输入图像描述](../Images/9df9b03900cfe58fc35e967448dea5a6.png) ![在此处输入图像描述](../Images/cc7fa2909d43f93931960041f8c7c821.png) ![在此处输入图像描述](../Images/252cdebb41e97e6ffc6e58bee21c7711.png) ![在此处输入图像描述](../Images/3d7315a00000c3a01eb49ee6d3e77589.png)

这些输出指示您应该在哪里查找文本，即连接组件的内部。