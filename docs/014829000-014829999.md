# StackOverflow 问答 14829000-14829999

# android - 带有固定边界框的 Android 相机预览

> ID：14829001
> 
> 赞同：2
> 
> 时间：2013-02-12T09:10:37.343
> 
> 标签：android, camera, android-camera

我想拍一张矩形物体的照片。如果相机预览有一个边界矩形，我可以通过将对象放在边界框内来拍照。我只需要图像的指定（框内）区域。现在我开发了一个相机应用程序（使用**相机 API**不是意图），它可以像内置相机应用程序一样拍照和存储图片。如何在相机预览上画一个矩形？以及如何在保存前进行裁剪？我正在使用安卓 2.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T09:31:16.623

您必须添加相机叠加层才能实现此目的。看看样品在`samples/ApiDemos/src/com/example/android/apis/graphics/CameraPreview`。您可以在预览区域上拥有自己的布局并将图形添加到其中。

检查：[http](http://android-er.blogspot.in/2010/12/add-overlay-on-camera-preview.html) ://android-er.blogspot.in/2010/12/add-overlay-on-camera-preview.html 和[Android：使用具有固定纵横比的相机拍摄后裁剪图像以](https://stackoverflow.com/questions/1973359/android-crop-an-image-after-taking-it-with-camera-with-a-fixed-aspect-ratio)获取更多示例。

# java - 在 JTable 中显示图像

> ID：14829005
> 
> 赞同：3
> 
> 时间：2013-02-12T09:11:00.760
> 
> 标签：java, swing, jtable, imageicon

我正在尝试将图像显示到 JTable 的第 25 列中：- 为此，我编写了以下代码：-

```
 jTable1.getColumnModel().getColumn(25).setCellRenderer(jTable1.getDefaultRenderer(ImageIcon.class));
  String query = "SELECT   name,type,supplier, department, manufacturer, model, serial_no, description, location, broker, dop, installation_date, expiring_date, retiring_date,warranty_info, icost, rcost, aarea, voltage, wattage, amperage, eline, capacity, plink, notes, adding_date, modification_date from assets where  company_code='" + ims.MainWindow.cc + "' and adding_date between '" + new java.sql.Date(df.parse(df.format(jXDatePicker1.getDate())).getTime()) + "' and '" + new java.sql.Date(df.parse(df.format(jXDatePicker2.getDate())).getTime()) + "'";
            System.out.println(query);
            ResultSet rs = st.executeQuery(query);
            int xx = 1;
             byte[] imagedata=null;
            ImageIcon format=null;
            java.awt.Image originalImage=null;
            java.awt.Image scaledImage=null;

            javax.swing.ImageIcon newIconImage=null;
            while (rs.next()) {
                if(rs.getBytes(24)!=null){
                imagedata=rs.getBytes(24);
                  format = new ImageIcon(imagedata);
                originalImage = format.getImage();
                scaledImage = originalImage.getScaledInstance(268, 200, java.awt.Image.SCALE_SMOOTH);
                newIconImage = new javax.swing.ImageIcon(scaledImage);
                }
                mod.addRow(new Object[]{xx, rs.getString(1), rs.getString(2), rs.getString(3), rs.getString(4), rs.getString(5), rs.getString(6), rs.getString(7), rs.getString(8), rs.getString(9), rs.getString(10), rs.getString(11), rs.getString(12), rs.getString(13), rs.getString(14), rs.getString(15), rs.getString(16), rs.getString(17), rs.getString(18), rs.getString(19), rs.getString(20), rs.getString(21), rs.getString(22), rs.getString(23), newIconImage, rs.getString(25), rs.getString(26), rs.getString(27)});
                xx++;
            } 
```

当我运行包含以下代码的框架时，图像列中将显示“javax.swing.ImageIcon@119537a”而不是在图像列中显示图标。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:15:46.340

您可以尝试更改设置图像图标渲染器的列号。即尝试 24 英寸

```
jTable1.getColumnModel().getColumn(25).setCellRenderer(jTable1.getDefaultRenderer(ImageIcon.class)); 
```

我怀疑您添加图像图标的列的渲染器没有更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T09:22:56.800

> 当我运行包含以下代码的框架时，图像列中将显示“javax.swing.ImageIcon@119537a”而不是在图像列中显示图标。

*   我认为必须为[Icon/ImageIcons设置](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)[正确的 ColumnClass （仅在这种情况下）](https://stackoverflow.com/a/12271011/714968)

*   [JTable 知道 ColumnClass 中的 Icon/ImageIcons 数据类型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)，与 ,`String`和ei相同`Number``Boolean`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:12:07.523

我认为您需要将列号更改为 24 而不是 25。

```
jTable1.getColumnModel().getColumn(24).setCellRenderer(jTable1.getDefaultRenderer(ImageIcon.class)); 
```

# jquery - 为 jquery 幻灯片添加 onclick 事件

> ID：14829010
> 
> 赞同：0
> 
> 时间：2013-02-12T09:11:14.933
> 
> 标签：jquery, slideshow

我正在使用基于 Jquery Cycle 的 Aaron Vanderzwan 的幻灯片 maximage，但是在向幻灯片添加 onclick 事件时遇到了一些麻烦。在研究堆栈交换的解决方案时，我遇到了一个“点击”z-index 定位 div 的解决方案，并将`pointer-events:none`CSS 属性添加到我的设置中。这个 jsfiddle： http: [//jsfiddle.net/HDRCREATIVE/cj9sh/](http://jsfiddle.net/HDRCREATIVE/cj9sh/)是我正在制作的幻灯片示例。我的问题是我无法将以下 jquery 添加到页面。任何指导都值得赞赏。先感谢您！

```
//The following was taken from the maximage forum's.

var $maximage = $('#maximage');

// Trigger Maximage
$maximage.maximage();

// Capture click on maximage's children
$maximage.children().on('click', function(){
// Retrive our URL (set in data-href attribute on img tags)
var url = $(this).data('href');

// If our URL is set, open a new window with that URL
//    You can certainly use window.location here too
if(url.length > 0){
    window.open(
        url, // <- This is what we set with the data-href attribute
        '_blank' // <- This is what makes it open in a new window.
    );
}
}); 
```

更新 - 工作代码（感谢 Gulty）
**请参阅 JsFiddle** [http://jsfiddle.net/cj9sh/10/](http://jsfiddle.net/cj9sh/10/)
为了让 maximage 产生我需要的这个项目的完整图像响应效果，我必须保留该`cssBackgroundSize: false,`属性。Gulty 的回答让我明白我`href`被附加到我的包含 div 上。这不好，因为我在 CMS 场景中使用它，并且需要能够根据用户动态附加不同的链接。因此，为了保持`href`我的状态，`<img>`我将它们封闭在 a 中`<div>`并简化了`click`我在上面尝试使用的功能。初步测试到目前为止工作，如果我遇到任何新问题会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:33:39.950

如果你用检查器检查你的小提琴，你可以看到在 JS 启动后，图像上不再有数据属性。问题在于您正在做的所有背景工作。不确定 maximage 是如何工作的，但似乎

`background-size`（或者如果你不使用那没关系）将图像转换为 .mc-image div 内的背景图像。data-href 也被添加到 div 中（允许您单击它）。如果你现在使用

```
cssBackgroundSize: false, // We don't want to use background-size:cover for our custom size 
```

背景图像 div 再次转换为图像，并删除了 data-attr。

因此，要么不使用 cssBackgroundSize:false 并使 div .mc-image 可点击（只需删除 data-href 调用中的子项），要么采取另一种方式

# c# - C#中的mb_strcut？

> ID：14829015
> 
> 赞同：0
> 
> 时间：2013-02-12T09:11:37.233
> 
> 标签：c#, php, string

有谁知道 C# 中 php 函数 mb_strcut 的实现？

[http://php.net/manual/en/function.mb-strcut.php](http://php.net/manual/en/function.mb-strcut.php)

mb_strcut() 与 mb_substr() 类似地从字符串中提取子字符串，但对字节而不是字符进行操作。如果剪切位置恰好在多字节字符的两个字节之间，则从该字符的第一个字节开始执行剪切。这也是 substr() 函数的不同之处，它会简单地剪切字节之间的字符串，从而导致格式错误的字节序列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:24:00.350

没有您的帮助，Dash 不可能写出以下内容

```
 public static string LimitByteLength(string input, int startByte, int byteLength)
    {
        var maxLength = startByte + byteLength;
        return 
            new string(
                input.SkipWhile((c, i) => GetByteCount(input.Substring(0, i + 1)) <= startByte)
                    .TakeWhile((c, i) => GetByteCount(input.Substring(0, i + 1)) <= maxLength).ToArray());
    }

    private static int GetByteCount(string input)
    {
        return Encoding.Unicode.GetByteCount(input);
    } 
```

# java - java中的子类型

> ID：14829019
> 
> 赞同：4
> 
> 时间：2013-02-12T09:11:49.543
> 
> 标签：java, subtype

如果我有 4 种不同的 Java 类型（称它们为`A B C D`），并且`A`是和 的子类型，并且是 的子类型，并且是`B`的子类型，这合法吗？有没有例子？`A``C``B``D``C``D`

绘制图表：

```
 D
          | |  
        |     |
       B       C
        |     |
          | |
           A 
```

所以 D 是超类型。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T09:14:34.200

这对于继承是不合法的，因为 Java 作为一种语言不支持多重继承。

但是，您可以通过实现多个接口来做到这一点，这与多重继承不同。

因此，是的，您可以这样做，只要您可以检查某物是否是接口的实例，但这与类类型不同，并且您的图表看起来与您绘制的图表略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:13:34.313

在 java 中，只有当 D、C 和 B 都是接口时才会出现这种图。这是合法的，并且会起作用。一个例子——例如任何实现两个接口的类`Comparable`。和`Hashable`。Object 是这两个接口的共同祖先（尽管不是直接的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:13:57.290

> 这合法吗？

是的。Java 不支持类的多重继承。只有多级。

因此，`A`不能同时从两者继承`B`and `C`。

请参阅：[Java 中的多重继承](https://stackoverflow.com/questions/1262447/multiple-inheritance-in-java)和[Java 接口如何模拟多重继承？](https://stackoverflow.com/questions/3556652/how-do-java-interfaces-simulate-multiple-inheritance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:44:19.343

Java 不支持多重继承。

那么为何不？你可以看看[这里](http://www.programmerinterview.com/index.php/c-cplusplus/diamond-problem/)。您显示的继承层次结构是典型的菱形问题。

# performance - 谷歌浏览器并拖动滚动

> ID：14829022
> 
> 赞同：0
> 
> 时间：2013-02-12T09:12:09.540
> 
> 标签：performance, google-chrome, scroll, overscroll

我正在开发一个网站：[http](http://www.techniquetolife.com) ://www.techniquetolife.com 它基本上是一个 5 倍于窗口大小的 div 内的窗口的 div，其他 div 在大 div 内，使用 overscroll 和 scrollTo 插件进行导航。

该网站在 Safari 和 Firefox for OS/X 中运行良好。但是我很难让它在 Chrome 中工作。我不确定这是否只是 Chrome OS/X 的问题，但是每当我滚动到大 div 中的一个内部 div 时，整个浏览器都会变慢，这只发生在 Chrome 中......

如果我禁用过度滚动并使用滚动条，它可以 100% 正常工作，但我真的想使用过度滚动拖动来滚动插件。

我不擅长编码，所以任何帮助将不胜感激。

所有插件/浏览器都在最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:26:18.943

好的，我发布了一个类似问题的答案，我认为这也可能相关。虽然我可能是错的，但你可以测试它。

在这里查看完整的问题和我的完整答案：[Chrome slow scrolling with fixed position elements](https://stackoverflow.com/questions/12969228/chrome-slow-scrolling-with-fixed-position-elements/15147497#15147497)

## 问题以及如何监控

这样做的原因是因为 Chrome 出于某些原因决定在固定面板越过它时需要重新解码和调整任何图像的大小。你可以特别清楚地看到这一点

> ► 右键单击​​页面 -> 检查元素 -> 时间线 -> 帧
> 
> ► 点击底部记录
> 
> ► 返回页面并上下拖动滚动条

这似乎只是 Chrome 用来确定是否需要重新绘制较低元素的方法的问题。

更糟糕的是，您甚至无法通过在可滚动 div 上方创建 div 来避免使用该`position:fixed`属性来解决此问题。这实际上会产生同样的效果。几乎 Chrome 说如果页面上的任何内容必须在图像上绘制（即使在 iframe、div 或任何可能的内容中），请重新绘制该图像。因此，尽管您正在滚动它的 div/frame，问题仍然存在。

## 简单的黑客解决方案

但我确实找到了一个解决这个问题的方法，到目前为止似乎没有任何缺点。通过添加

```
-webkit-transform: translateZ(0); 
```

对于您的固定面板，将该 div 放在它自己的合成层中。

# apache - 在 Apache Server mod_proxy 指令中为所有 ProxyPass 映射设置超时

> ID：14829025
> 
> 赞同：14
> 
> 时间：2013-02-12T09:12:37.950
> 
> 标签：apache, apache2, mod-proxy, apache2.2

**我有什么和工作：**

我将*Apache HTTPD 2.2*用于代理请求。我有多个*ProxyPass*映射：

```
ProxyRequests On 
<Proxy *>
AddDefaultCharset off
    Order deny,allow
    Allow from all
</Proxy>
ProxyPreserveHost Off

ProxyPass /a http://some_ip/
ProxyPassReverse /a http://some_ip/

ProxyPass /b http://some_other_ip/
ProxyPassReverse /b http://some_other_ip/

... 
```

这很好用。

**我想要的是：**

我的一些请求需要更长的时间，所以他们超时给我一个***Proxy Error - Reason: Error reading from remote server***。

我想为`timeout`我的所有请求设置。我可以在不必`timeout=... KeepAlive=On`为每个`ProxyPass`映射添加的情况下执行此操作吗？

我目前有类似的东西：

```
ProxyPass /a http://some_ip/ timeout=1200 KeepAlive=On
ProxyPassReverse /a http://some_ip/

ProxyPass /b http://some_other_ip/ timeout=1200 KeepAlive=On
ProxyPassReverse /b http://some_other_ip/

... and i do this for all my ProxyPass mappings 
```

我可以以某种方式告诉 Apache 为所有映射添加`timeout`参数`KeepAlive`吗？提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-12T12:23:33.527

我已经设法自己找到了解决方案。您可以直接使用以下`ProxyTimeout`指令设置超时`mod_proxy`：

```
ProxyRequests On 
<Proxy *>
    AddDefaultCharset off
    Order deny,allow
    Allow from all
</Proxy>
ProxyPreserveHost Off

ProxyTimeout 1200 
```

# mysql - 提取上周数据（而不是过去 7 天）

> ID：14829027
> 
> 赞同：3
> 
> 时间：2013-02-12T09:13:05.267
> 
> 标签：mysql, sql, datetime, timestamp

我有以下格式的数据。

```
id     - autoincrement
myDate - timestamp 
```

我要提取的是上周的 ids 。

**注意**上周，我的意思是从周六到周四，而不是持续 7 天。考虑到当前日期（2013 年 2 月 12 日），对我来说，上周将是`2-Feb-2013 to 8-Feb-2013`.

***我知道你会说，一周从星期日开始，但是由于我在阿拉伯国家工作，所以星期五是休息日，工作从星期六开始。***

我知道过去 7 天它会在代码下方

`BETWEEN NOW() and DATE_SUB(NOW(), INTERVAL 7 DAY)`

## [sqlfiddle 中的数据](http://sqlfiddle.com/#!2/fda4a/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:51:36.933

您可以尝试以下方法来计算所需的结果：

```
SELECT *,WEEKOFYEAR(dt),DAYOFWEEK(dt),DAYNAME(dt), DAYOFWEEK(NOW()),WEEKOFYEAR(NOW()) 
FROM tab1 
WHERE 1
AND 
(
  (DAYOFWEEK(NOW()) = 1 OR DAYOFWEEK(NOW()) = 6 OR DAYOFWEEK(NOW()) = 7) 
  AND 
  WEEKOFYEAR(dt) = WEEKOFYEAR(NOW()) AND DAYOFWEEK(dt) < 6
)
OR 
(    
  (DAYOFWEEK(NOW()) = 2 OR DAYOFWEEK(NOW()) = 3 OR DAYOFWEEK(NOW()) = 4  
  OR DAYOFWEEK(NOW()) = 5)
  AND
  (
     (
      (WEEKOFYEAR(dt) = WEEKOFYEAR(NOW())-2 AND DAYOFWEEK(dt) >= 6)
      OR 
      (WEEKOFYEAR(dt) = WEEKOFYEAR(NOW())-1 AND DAYOFWEEK(dt) > 1 AND DAYOFWEEK(dt) < 6)
     )
  )
); 
```

我知道这不是最聪明的方法，但基于此，您可能会得到更好解决方案的提示。

## [在 sqlfiddle 演示](http://sqlfiddle.com/#!2/40e9b/5)

# dart - 从 lib 子目录加载 Web 组件

> ID：14829029
> 
> 赞同：0
> 
> 时间：2013-02-12T09:13:10.523
> 
> 标签：dart, dart-webui

当尝试将 web 组件的 html 文件插入到我的应用程序库的视图目录中时，web_ui 编译器会抛出消息

```
FileIOException: Cannot retrieve full path for file 'lib\src\view\entity\base\packages' (OS Error: The system cannot find the file specified. 
```

这是可以预料的吗？如果没有，我应该怎么做才能修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:34:24.150

由于我没有看到您的代码或项目，这只是一种预感。我相信您的 Web 组件 HTML 文件以错误的方式导入了一些组件。

尝试遵循以下结构：

```
/lib/src/view/foo/foo.html
/lib/src/view/foo/foo.dart

/lib/src/view/bar/bar.html
/lib/src/view/bar/bar.dart 
```

在里面`foo.html`：

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="components" href="../bar/bar.html" />
  </head>
<body>
  <element name="x-foo" constructor="FooComponent" extends="div">
    <template>
      ...
    </template>
    <script type="application/dart" src="foo.dart"></script>
  </element>
</body>
</html> 
```

请注意，我没有使用`packages`in `foo.html`。

# java - EasyMock - 随机测试失败 - 预期匹配器

> ID：14829039
> 
> 赞同：0
> 
> 时间：2013-02-12T09:13:50.167
> 
> 标签：java, unit-testing, easymock

我对 EasyMock 有一个奇怪的问题

这是我正在拨打的电话，它`IllegalStateException : Matcher expected`按预期抛出

```
expect(this.mock.expectedOperation(gt(0l), MyClass.class)).andReturn(createClassObject()); 
```

如果我将上述调用替换为

```
expect(this.mock.expectedOperation(gt(0l), createClass(MyClass.class))).andReturn(createClassObject());

@SuppressWarnings("unchecked")
public static <T> Class<T> createClass(Class<T> clazz)
{
    return (Class<T>) EasyMock.anyObject();
} 
```

**大多数时候我没有收到错误**，但有时我会收到。它停留`IllegalStateException : Matcher expected ..`

有时我会`IllegalStateException : 2 Matchers expected 1 recorder`因为这样做而收到错误：

```
MyClass object = createClassObject();
expect(this.mock.expectedOperation(anyLong(), anyLong()).andReturn(object);

public MyClass createClassObject() {
    // Actually sets properties and then returns
    return new MyClass();
} 
```

但是当我这样做时它会运行：

```
expect(this.mock.expectedOperation(anyLong(), anyLong()).andReturn(createClassObject()); 
```

在上面的例子中，有时前者运行而后者失败。

有时这会失败：

```
MyClass object = createClassObject();
expect(this.mock.expectedOperation(1, MyClass.class)).andReturn(object); 
```

我已经四次检查了重置、重播、验证呼叫。**这些测试有时会运行，有时会失败。**

如果我运行我的单元测试，它会在上面列出的一种情况下随机失败至少一次。为什么？我如何让它运行？

编辑：我正在使用 EasyMock 3.1 版和

```
MockedClass mock = EasyMock.createMock(MockedClass.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:06:23.940

发现了问题。我们不能使用 gt(0) 等方法将参数传递给正在测试的单元。

在我错误的另一个测试中使用了：

```
service.performOperation(1, gt(0l)); 
```

服务不是模拟，而是我正在测试的单元。

在检查文档时，我看到 gt(0l) 返回 0，这导致该测试被其他人通过而失败。（不知道为什么？）由于测试是随机执行的，随机条件失败了。

在测试开始时使用`reset(mocks..)`没有任何帮助。

# php - facebook 共享器弹出窗口

> ID：14829040
> 
> 赞同：17
> 
> 时间：2013-02-12T09:13:49.713
> 
> 标签：php, javascript, facebook, metadata

FB 共享器弹出窗口显示页面的数据，而不是我在 php 链接中插入的元数据。

```
<a href="http://www.facebook.com/sharer/sharer.php?s=100&p%5Btitle%5D=Google&p%5Burl%5D=http%3A%2F%2Fwww.google.com&p%5Bsummary%5D=Google search engine&p%5Bimages%5D%5B0%5D=https://www.google.com/images/srpr/logo3w.png
"onClick="return fbs_click(626, 305)" target="_blank" title="Share">FACEBOOK</a> 
```

似乎是由javascript引起的

```
<script type="text/javascript">
function fbs_click(width, height) {
var leftPosition, topPosition;
leftPosition = (window.screen.width / 2) - ((width / 2) + 10);
topPosition = (window.screen.height / 2) - ((height / 2) + 50);
var windowFeatures = "status=no,height=" + height + ",width=" + width + ",resizable=no,left=" + leftPosition + ",top=" + topPosition + ",screenX=" + leftPosition + ",screenY=" + topPosition + ",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no";
u=location.href;
t=document.title;
window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer', windowFeatures);
return false;
}
</script> 
```

如何在弹出窗口中显示正确的数据？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-12T09:54:28.740

如果要添加自定义元数据，请使用以下代码：

```
<a id="fb-share" style='text-decoration:none;' type="icon_link" onClick="window.open('http://www.facebook.com/sharer.php?s=100&p[title]=YOUR_TITLE&p[summary]=YOUR_DESCRIPTION&p[url]=YOUR_URL&p[images][0]=YOUR_IMAGE','sharer','toolbar=0,status=0,width=580,height=325');" href="javascript: void(0)">Share</a> 
```

**更新：**

我为 Facebook Share 写了一点 JS 代码。

*   JS代码：[https ://gist.github.com/Stichoza/4942775](https://gist.github.com/Stichoza/4942775)
*   现场演示：http: [//jsfiddle.net/stichoza/EYxTJ/](http://jsfiddle.net/stichoza/EYxTJ/)

**Javascript：**

```
function fbShare(url, title, descr, image, winWidth, winHeight) {
        var winTop = (screen.height / 2) - (winHeight / 2);
        var winLeft = (screen.width / 2) - (winWidth / 2);
        window.open('http://www.facebook.com/sharer.php?s=100&p[title]=' + title + '&p[summary]=' + descr + '&p[url]=' + url + '&p[images][0]=' + image, 'sharer', 'top=' + winTop + ',left=' + winLeft + ',toolbar=0,status=0,width='+winWidth+',height='+winHeight);
    } 
```

**HTML：**

```
<a href="javascript:fbShare('http://jsfiddle.net/stichoza/EYxTJ/', 'Fb Share', 'Facebook share popup', 'http://goo.gl/dS52U', 520, 350)">Share</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-09T16:47:42.737

研究后共享链接不再起作用我发现这个你应该在这个新的共享网址上更新你的功能

```
href="https://www.facebook.com/sharer/sharer.php?u=&t=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.URL) + '&t=' + encodeURIComponent(document.URL)); return false;"> </a> 
```

# haxe - 为什么 MovieClip 不可见？

> ID：14829043
> 
> 赞同：0
> 
> 时间：2013-02-12T09:13:55.030
> 
> 标签：haxe, createjs

我尝试使用 createjs 创建一个movieClip 并在其中添加一个图像，如下所示：

```
rect2 = new Bitmap(_preloader.getResult("rect").result);
mv = new MovieClip("single", 0, false, []);
mv.addChild(rect2);
_stage.addChild(mv); 
```

我希望`rect2`在舞台上看到，但它不会出现，如果我添加`rect2`到舞台上它会出现，那么我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:06:06.773

您使用 MovieClip 有什么原因吗？它主要用于处理使用 Toolkit for CreateJS 从 Flash Pro 导出。

相反，您可以尝试使用包装图像、画布或视频元素的 Bitmap 实例。

MovieClips 的一个注意事项是，您需要 gotoAndStop/gotoAndPlay 才能设置初始状态，它不像 Flash 那样“默认”到第一帧。

# python - Tornado - 如何获得 AsynHTTPClient.fetch() 的响应？

> ID：14829047
> 
> 赞同：2
> 
> 时间：2013-02-12T09:14:02.037
> 
> 标签：python, debugging, http, web, tornado

```
#!/usr/bin/env python

import tornado.httpserver
import tornado.ioloop
import tornado.options
import tornado.web
import tornado.httpclient

import urllib
import json
import datetime
import time

from tornado.options import define, options
define("port", default=8000, help="run on the given port", type=int)

config = {
        'proxy_host': '58.59.21.228',
        'proxy_port': 25,
        'proxy_username': 'yz',
        'proxy_password': 'fangbinxingqusi',
}

def handle_request(response):
    if response.error:
        print "Error:", response.error

tornado.httpclient.AsyncHTTPClient.configure("tornado.curl_httpclient.CurlAsyncHTTPClient")

class IndexHandler(tornado.web.RequestHandler):
    def get(self):
        client = tornado.httpclient.AsyncHTTPClient()
        response = client.fetch("http://twitter.com/", handle_request,
                **config)
        self.write(response.body)

if __name__ == "__main__":
    tornado.options.parse_command_line()
    app = tornado.web.Application(handlers=[(r"/", IndexHandler)],
            debug=True)
    httpserver = tornado.httpserver.HTTPServer(app)
    httpserver.listen(options.port)
    tornado.ioloop.IOLoop.instance().start() 
```

在运行时，方法`response`中的对象`get()`被报告为一种`None`类型。如何在`fetch()`方法中获得`get()`方法的响应？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T10:57:32.693

您正在使用[AsyncHTTPClient](http://www.tornadoweb.org/documentation/httpclient.html?highlight=asynchttpclient#tornado.httpclient.AsyncHTTPClient)，因此该`fetch`方法不返回任何内容。您需要使用“异步”装饰器并记住调用`finish`由`fetch`.

这是代码：

```
import tornado.httpserver                                                    
import tornado.ioloop                                                        
import tornado.options                                                       
import tornado.web                                                           
import tornado.httpclient                                                    

from tornado.options import define, options                                  
define("port", default=8000, help="run on the given port", type=int)         

config = {                                                                   
    'proxy_host': '58.59.21.228',                                            
    'proxy_port': 25,                                                        
    'proxy_username': 'yz',                                                  
    'proxy_password': 'fangbinxingqusi',                                     
}                                                                            

tornado.httpclient.AsyncHTTPClient.configure("tornado.curl_httpclient.CurlAsyncHTTPClient")

class IndexHandler(tornado.web.RequestHandler):                              

    @tornado.web.asynchronous                                                
    def get(self):                                                           
        client = tornado.httpclient.AsyncHTTPClient()                        
        client.fetch("http://twitter.com/", self.handle_request, **config)   

    def handle_request(self, response):                                      
        if response.error:                                                   
            print("Error:", response.error)                                  
        else:                                                                
            self.write(response.body)                                        
        self.finish()                                                        

if __name__ == "__main__":                                                   
    tornado.options.parse_command_line()                                     
    app = tornado.web.Application(handlers=[(r"/", IndexHandler)], debug=True)
    httpserver = tornado.httpserver.HTTPServer(app)                          
    httpserver.listen(options.port)                                          
    tornado.ioloop.IOLoop.instance().start() 
```

您还可以使用[Tornado 的 gen](http://www.tornadoweb.org/documentation/gen.html?highlight=gen#tornado.gen)使您的处理程序更漂亮：

```
class IndexHandler(tornado.web.RequestHandler):                              

    @tornado.web.asynchronous                                                
    @tornado.gen.engine                                                      
    def get(self):                                                           
        client = tornado.httpclient.AsyncHTTPClient()                        
        response = yield tornado.gen.Task(client.fetch, "http://twitter.com/",
                                        **config)                            
        if response.error:                                                   
            self.write("Error: %s" % response.error)                         
        else:                                                                
            self.write(response.body)                                        

        self.finish() 
```

# mfc - MFC中多行静态文本的垂直居中

> ID：14829049
> 
> 赞同：5
> 
> 时间：2013-02-12T09:14:04.330
> 
> 标签：mfc, vertical-alignment, multiline

**如何`CStatic`使用文本自动换行（多行）将结果垂直居中在控件的矩形中？**

我要解决的问题是：我在 a`CStatic`旁边有一个控件，`CComboBox`它根据选择更新信息文本。这段文字可以很短也可以很长，`CStatic`有时需要使用多行，有时不需要。我希望信息文本与`CComboBox`.

现在问题来了：

*   如果我将`CStatic`唯一的 1 个文本行设为高，则它对于 1 行文本看起来不错，但多行不适合且不显示。

*   如果我将其设置得`CStatic`更高以适合 2 行，那么它对于长文本（2 行）看起来不错，但 1 行文本向上移动，因为`CStatic`对齐顶部的文本。具有`CStatic`问题中提到的行为将解决此问题...

如果我无法轻松获得垂直居中`CStatic`的多行控件，则另一种方法是根据其中的文本数量调整控件矩形的大小。但在这种情况下，我有一个不同的问题：

**如何以编程方式找出`CStatic`特定宽度的文本需要多少行？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:29:45.197

不幸的是，您不能在`CStatic`.

您的下一个问题有一个解决方案，但使用起来有点麻烦。您所做的是使用`CDC::DrawTextEx`标志`DT_CALCRECT`来获取要格式化的文本的大小（以像素为单位）。通过将其除以一行文本的高度（在字体信息中给出，您可以`DC`从可以用 ) 指定行距`DrawText`，您将获得（近似值）您将获得的行数。然后，您可以调整控件矩形的大小。

想一想，您最好不要转换为线条，只需将控件的大小调整到您从中获得的程度`DrawTextEx`:)

Things like this usually require some experimentation to get exactly right, and sometimes behave differently between OS versions. Proceed with caution.

# android - onBackPressed() 在 android 4.0.3 的 ActivityGroup 中不起作用

> ID：14829050
> 
> 赞同：1
> 
> 时间：2013-02-12T09:14:10.963
> 
> 标签：android, tabactivity, android-tabactivity

我正在研究 TabActivity 包含 5 个子活动。在按下 TabActivity 的返回按钮时，它会调用`onBackPressed()`android OS 2.3.4 中的方法，但不能在 android OS 4.0.3 上调用相同的方法，

所以我无法完成更新 4.0.3 Micromax Canvas Handset 上的 TabActivity。

如果你们中的任何人遇到相同的错误及其解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:39:45.923

[我在 TabActivities 中的 Key Events](https://stackoverflow.com/questions/2796050/key-events-in-tabactivities)链接上找到了解决方案？

[在那里尝试第一个答案。它对我有用。](https://stackoverflow.com/a/6511638/1066828)

祝你好运...

# sql - 无论 IF ELSE 条件如何，SET 语句始终运行

> ID：14829053
> 
> 赞同：1
> 
> 时间：2013-02-12T09:14:22.190
> 
> 标签：sql, sql-server, set, if-statement

我对这段 SQL 代码失去了理智。下面的 IF ELSE 语句在使用简单 PRINT 语句进行测试时正常运行，即该表不存在，因此它打印“FALSE”。但是当我取消对 SET 语句的注释并执行时，它会尝试运行 SET 语句，并且由于表不存在而自然给出错误。

```
DECLARE @zeus_calls310_counter int;

IF EXISTS (SELECT * FROM [zeus].tpza.INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'calls_310')
BEGIN
    --SET @zeus_calls310_counter = (SELECT COUNT(*) FROM [zeus].[tpza].[dbo].[calls_310]);
    PRINT 'TRUE'
END
ELSE 
BEGIN
    PRINT 'FALSE';
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:33:41.563

您的标题表明您的理解出错了。在表不存在的情况下，并不是`SET`语句**运行**报错；就是在**解析**语句时出现错误。

每当您运行某些 SQL 时，服务器首先**解析**该语句，然后，如果解析成功，**则运行**它。因此，您不能拥有依赖于表存在的裸 SQL！无论表是否存在，您的`SET`语句都将被**解析**- 所以当它不存在时，解析失败。

对此的一种解决方案是包装那些依赖于对象的语句，这些对象可能存在也可能不存在于`EXEC`. 但是，在这种情况下，您希望使用对该表的查询结果填充变量，并且`EXEC`该变量内部将不在范围内。所以我们需要更多关于你正在做什么的细节`@zeus_calls310_counter`——如果它很快就会被使用，也许你可以把整个事情，包括它的声明，包装在一个`EXEC`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:20:10.210

@AAkashM 是在正确的轨道上。

如果您使用[EXEC sp_executesql](http://support.microsoft.com/kb/262499/en)，您还可以指定 OUTPUT 参数，在您的情况下，该参数将包含`SELECT COUNT`语句的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T09:16:29.253

尝试这个 ：

```
DECLARE @zeus_calls310_counter int;

IF EXISTS (SELECT * FROM [zeus].tpza.INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'calls_310')
BEGIN
    SET @zeus_calls310_counter = (SELECT COUNT(*) FROM [zeus].[tpza].[calls_310]);
    PRINT 'TRUE'
END
ELSE 
BEGIN
    PRINT 'FALSE';
END 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T09:22:05.753

使用它来检查表是否存在

```
IF OBJECT_ID(N'[zeus].[table_name]', N'U') IS NULL
BEGIN
    --
END
ELSE
BEGIN
    --
END 
```

# matlab - Matlab/Simulink中迭代学习控制的实现

> ID：14829060
> 
> 赞同：1
> 
> 时间：2013-02-12T09:14:50.603
> 
> 标签：matlab, simulink

我正在为一个简单的传递函数开发一个迭代学习控制器。

![迭代](../Images/cc1f80a28c18f69298422bf2f30d675c.png)

迭代由外部 matlab 循环控制。但是错误`e(k)`（k 是试验编号）没有更新......随着试验的增加。请检测我犯的错误。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T11:44:39.130

你可能已经解决了这个问题。但由于问题仍然悬而未决，我想在这里添加一些内容。

首先，您可能要检查“内存”块的使用情况。[“内存块保持并延迟其输入一个主要的积分时间步长。”](http://de.mathworks.com/help/simulink/slref/memory.html) 错误未更新的原因是您工厂生产的输出在每次迭代中都是相同的（您定义了外部循环）。内存块只延迟了 U(K) 的一步，而不是整个迭代。

您可能希望将每次迭代的错误存储到工作区，并将其用于下一次迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-17T04:30:08.213

内存应该是一个具有单次迭代长度的向量。不仅仅是单一的价值。延迟块可以存储多个过去的样本。这个人可能做了你想要的：[https ://github.com/arthurrichards77/iterative-learning-control](https://github.com/arthurrichards77/iterative-learning-control)

# dependency-injection - ResourceProviderFactory - 使用 Castle.Windsor 注入 IResourceProvider

> ID：14829063
> 
> 赞同：0
> 
> 时间：2013-02-12T09:15:01.683
> 
> 标签：dependency-injection, inversion-of-control, castle-windsor

依赖注入和使用 IoC 的新手，但在我最新的 ASP.NET MVC 3 项目中，我们使用了 Castle.Windsor。

我们正在实现一个自定义 ResourceProviderFactory 并希望注入 IResourceProvider 及其依赖项。所以我们通过 global.asax 中的 IContainerAccessor 暴露容器并显式解析：

```
 public class DynamicResourceProviderFactory : ResourceProviderFactory
    {
        protected virtual IResourceProvider GetResourceProvider(string resourceName)
        {
            IContainerAccessor accessor = HttpContext.Current.ApplicationInstance as IContainerAccessor;            
            return accessor.Container.Resolve<IResourceProvider>(new Arguments(new { resourceName = resourceName }));
        }

        public override IResourceProvider CreateGlobalResourceProvider(string resourceName)
        {
            return GetResourceProvider(resourceName);
        }
    } 
```

我正在阅读有关类型工厂的温莎文档-

> 在需要从容器中拉取东西的地方使用类型化工厂。

类型化工厂是从容器中获取 IResourceProvider 的更好方法吗？

# spring-integration - Spring 集成 - 文件消息流

> ID：14829065
> 
> 赞同：1
> 
> 时间：2013-02-12T09:15:14.750
> 
> 标签：spring-integration

我正在使用 Spring Integration 的文件和 ftp 功能来实现一个流程，该流程将所有文件写入加密的目录，然后通过 ftp'​​ed 到目标目录。消息的有效负载是一个文件

```
File Inbound Poller -> Custom Encryption -> Outbound FTP -> Handle Original File 
```

“自定义加密”服务接收文件名，然后返回加密文件的名称。出站 FTP 服务正常工作，传输成功或失败时，加密文件名将移动到特定文件夹。

新要求是我需要移动原始文件名而不是加密文件名。我不确定实现这个的正确方法是什么，或者我有什么选择？

```
File Inbound Poller -> Custom Encryption -> Outbound FTP
                    |                               |
                    >                               >     -> Handle Original File 
```

我考虑的第一个想法是使用拆分器/聚合器模式生成第二条消息，该消息在出站 ftp 阶段后重新聚合，但这似乎不正确，因为拆分器不会生成两条不同的消息，而是复制原始消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:19:07.637

有很多方法可以做到这一点，包括...

1.  使第一个频道`<publish-subscribe-channel/>`订阅加密器`order="1"`和处理程序`order="2"`。只有在其他流程正常完成后才会调用处理程序。

2.  在加密服务之前添加一个`<header-enricher/>`，将原始文件复制到一个标头`<header name="orig" expression="payload"/>`中，然后在下游代码中使用该标头。

第一个就像您的“拆分器”评论 - 有效地允许 2 个流处理相同的消息。

# c# - C#：使 http/webrequest 类似于 PHP 中的 Curl

> ID：14829069
> 
> 赞同：0
> 
> 时间：2013-02-12T09:15:29.803
> 
> 标签：c#, php, curl, httpwebrequest, webrequest

我正在尝试在 C# 中进行 webrequest，这类似于 PHP 中的 CurL。但我不断收到身份验证问题。我想知道问题出在我的凭据还是我提出的网络请求中。以下是我要复制的 PHP CurL 请求的代码：

```
$search = $searchurl . "type=player&start=$start&num=$count" . $searchstring;
        //Set the cookie data
        $cookie_string = $this->EASW_KEY."; ".$this->EASF_SESS ."; ".$this->PHISHKEY;                                                                       
        //Setup cURL HTTP request
        $ch = curl_init($search);                                                                      
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                                                                                     
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
        curl_setopt($ch, CURLOPT_COOKIE, $cookie_string); 
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
            'Content-Type: application/json',                                                                                
            'x-http-method-override: GET',
            $this->XSID)                                                                       
        );

        //Contains the JSON file returned from EA
        $EAPSEARCH = curl_exec($ch);
        curl_close($ch); 
```

到目前为止，这是我为使其在 C# 中工作所做的工作：

```
string data = this.easwKey + ";" + this.phishKey;
byte[] buffer = Encoding.ASCII.GetBytes(this.sid); //the data you want to send to the web service
                HttpWebRequest WebReq = (HttpWebRequest)WebRequest.Create(urlPath);
                WebReq.Method = "POST";
                WebReq.ContentType = "application/json";
                WebReq.ContentLength = buffer.Length;
                WebReq.Headers["Cookie"] = data;
                WebReq.Headers["X-HTTP-Method-Override"] = "GET";

                Stream PostData = WebReq.GetRequestStream();
                PostData.Write(buffer, 0, buffer.Length);
                PostData.Close();
                HttpWebResponse WebResp = (HttpWebResponse)WebReq.GetResponse();
                Stream Answer = WebResp.GetResponseStream();
                StreamReader _Answer = new StreamReader(Answer);
                returnStr = _Answer.ReadToEnd(); 
```

`returnStr`总是返回，说未经授权..但`code error of 401`我可以使用相同的凭据登录系统..

# breeze - 实体级验证器未触发

> ID：14829070
> 
> 赞同：0
> 
> 时间：2013-02-12T09:15:33.330
> 
> 标签：breeze

我观察到，当我将一个实体添加到另一个实体的集合中时，不会调用第二个实体的验证器。

我希望在调用 savechanges 时添加到子集合会触发父集合上的实体级别验证。

我现在不能写测试，但如果需要，我会在今天下午写。

这是预期的行为还是错误？

```
entity.OrderLine().arrayChanged.subscribe(function (args) {
        console.log(args);
        if (args.added && args.added.some(function (element) {
            console.log(element.entityAspect.entityState.name);
            return !(element.entityAspect.entityState.isUnchanged() 
                || element.entityAspect.entityState.isDeleted());
        })) {
            console.log("modifico");
            entity.entityAspect.setModified();
        }
        if (args.removed && args.removed.some(function (element) {
             console.log(element.entityAspect.entityState.name);
            return !element.entityAspect.entityState.isAdded();
        })) {
            console.log("modifico");
            entity.entityAspect.setModified();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:06:00.430

由于父项的数据属性没有更改，因此添加子项不会自动更改父项。这就是技术原因。

有时（经常？）模型语义说父级**被**任何添加/删除/更改到子级。这并不总是正确的，这就是 Breeze 不会自动传播更改的原因。但这通常是正确的……如果您在元数据中将此指定为所需的行为，我认为 Breeze 为您提供支持将是一个好主意。你不是唯一一个想要这个的人。

我[**为这个想法添加了用户语音建议**](http://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3644789-can-configure-a-parent-entity-type-to-enter-the-mo)；如果它对您很重要，请投票（并添加您的评论）。

同时，在[实体初始化器](http://www.breezejs.com/documentation/extending-entities)中，您可以订阅父集合中的更改以及该集合中的项目，并让它们将父集合设置为“已修改”状态 ( `parent.entityAspect.setModified()`)。恐怕现在必须这样做。

# sql - SQLite3 性能与 BETWEEN 范围的 OR

> ID：14829074
> 
> 赞同：4
> 
> 时间：2013-02-12T09:15:48.290
> 
> 标签：sql, sqlite, query-optimization

我有一个相当大的*SQLite3*数据库表，其中包含一个数字索引字段，我必须在其上搜索值范围的列表。由于数值是巨大的 64 位数字，`IN`因此不能选择子句。查询通常如下所示：

```
SELECT * FROM sometable WHERE ID BETWEEN 10 AND 11 
                           OR ID BETWEEN 20 AND 21 
                           OR ID BETWEEN 30 AND 31; 
```

我经历了一个奇怪的性能限制。最多 9 个`BETWEEN`术语，查询速度非常快（`ID`字段已编入索引）。但是从 10 个词开始，查询变得慢了几个数量级！我没有在文档中找到对该限制的任何解释。

我发现该`EXPLAIN QUERY PLAN`指令可以用来查看行为的变化。我用*SQLite* 3.7.12 进行了实验，以防万一。

为了演示，让我们创建一个非常简单的空表：

```
CREATE TABLE sometable(name TEXT, ID INTEGER);
CREATE INDEX id_idx ON sometable (ID ASC); 
```

这个查询：

```
EXPLAIN QUERY PLAN SELECT * FROM sometable WHERE ID BETWEEN 10 AND 11 
 OR ID BETWEEN 20 AND 21 OR ID BETWEEN 30 AND 31 OR ID BETWEEN 40 AND 41
 OR ID BETWEEN 50 AND 51 OR ID BETWEEN 60 AND 61 OR ID BETWEEN 70 AND 71
 OR ID BETWEEN 80 AND 81 OR ID BETWEEN 90 AND 91; 
```

产生这样的结果：

```
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows)
0|0|0|SEARCH TABLE sometable USING INDEX id_idx (ID>? AND ID<?) (~31250 rows) 
```

而那个查询：

```
EXPLAIN QUERY PLAN SELECT * FROM sometable WHERE ID BETWEEN 10 AND 11 
 OR ID BETWEEN 20 AND 21 OR ID BETWEEN 30 AND 31 OR ID BETWEEN 40 AND 41
 OR ID BETWEEN 50 AND 51 OR ID BETWEEN 60 AND 61 OR ID BETWEEN 70 AND 71
 OR ID BETWEEN 80 AND 81 OR ID BETWEEN 90 AND 91 OR ID BETWEEN 100 AND 101; 
```

产生这样的结果：

```
0|0|0|SCAN TABLE sometable (~500000 rows) 
```

`SCAN TABLE`表示不使用索引，搜索整个原始表，导致性能不佳。

有没有办法（编译指示/编译开关/技巧）来避免这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:35:44.780

如您所见，SQLite 尝试将查询拆分为多个子查询，以便可以在索引中单独查找每个范围。

但是，当范围过多时，查询优化器会假定所有单个子查询的成本总和大于仅通过表一次。

如果您的范围包含少于 31250 行，或者您的表有超过 1000000 行，您可以尝试使用[ANALYZE 命令](http://www.sqlite.org/lang_analyze.html)来改进成本估算。

作为最后的手段，您可以手动拆分查询以强制单独查找：

```
SELECT * FROM sometable WHERE ID BETWEEN 10 AND 11
UNION ALL
SELECT * FROM sometable WHERE ID BETWEEN 20 AND 21
UNION ALL
SELECT * FROM sometable WHERE ID BETWEEN 30 AND 31 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-03T17:41:44.810

无需在表中加载数据......我可以加载一个序列并尝试我猜。

SELECT * FROM sometable WHERE ID%10 BETWEEN 0 AND 1;

# mysql - mysql 在几个表上“显示创建表”

> ID：14829076
> 
> 赞同：4
> 
> 时间：2013-02-12T09:15:55.607
> 
> 标签：mysql, mysql-workbench

我必须获取`SHOW CREATE TABLE tblName`所有表的输出并将其写入文件（每个表一个文件）。

任何人都可以帮助我如何开始这个？我想存储过程？我很确定有一个我可以学习的教程，因为 MySQL 有一个很大的社区。

提前致谢

我需要每个表的输出的一些图片：

![http://i.stack.imgur.com/9x2ek.png](../Images/0d3e7792cda954bc1d8f864615f706ff.png)

![http://i.stack.imgur.com/4jIEJ.png](../Images/49ce394821d28cee1a788e1114aa772b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:30:32.707

由于您的屏幕截图显示您使用的是 Windows；您可以使用[HeidiSQL](http://www.heidisql.com/)来完成您的任务。

工具中有一个选项，名为**Export database as SQL**。

# linux - 为什么我有时需要在 sed 中转义 ()

> ID：14829080
> 
> 赞同：1
> 
> 时间：2013-02-12T09:16:06.477
> 
> 标签：linux, sed, awk

当我使用 sed 并使用这样的大括号时

```
sed -re 's/top([0-9]+)//g' 
```

1.  我为此工作，但我看到有时我需要逃避大括号，有时它可以在没有逃避的情况下工作。这是为什么

2.  为什么 \w 不适用于 awk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:22:11.227

这取决于`-r`您使用的交换机：

```
 -r, --regexp-extended

          use extended regular expressions in the script. 
```

括号表示捕获的组，`-r`要匹配文字括号，您必须转义它们。

没有`-r`它，反之亦然。

考虑：

```
$ sed -r 's/foo([0-9]*)/\1/' <<<'foo123'
123
$ sed 's/foo([0-9]*)/\1/' <<<'foo123'
sed: -e expression #1, char 17: invalid reference \1 on `s' command's RHS
$ sed 's/([0-9]*)//' <<<'foo(123)'
foo
$ sed 's/foo\([0-9]*\)/\1/' <<<'foo(123)'
(123) 
```

（在最后一个中，组匹配零位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:24:36.890

在经典的正则表达式`sed`使用中，您必须对括号进行反斜杠以赋予它们特殊含义。如果您`sed`支持`-r`，它可以使用“扩展”正则表达式，其中括号具有特殊含义*而没有*反斜杠，反斜杠会使它们失去意义。

`\w`应该在`awk`. 你尝试了什么，你期望什么输出，你得到了什么输出？

# iphone - 验证控制器问题

> ID：14829083
> 
> 赞同：0
> 
> 时间：2013-02-12T09:16:12.017
> 
> 标签：iphone, ios

问题是：

```
Memory is never released; potential leak of memory pointed to by 'p' 
```

在代码中，它发生在这个单行方法的返回上：

```
- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{
    return [NSString stringWithUTF8String:base64_encode(input, (size_t)length)];
} 
```

base64_encode 函数：

```
char* base64_encode(const void* buf, size_t size)
{
    static const char base64[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    char* str = (char*) malloc((size+3)*4/3 + 1);

    char* p = str;
    unsigned char* q = (unsigned char*) buf;
    size_t i = 0;

    while(i < size) {
        int c = q[i++];
        c *= 256;
        if (i < size) c += q[i];
        i++;

        c *= 256;
        if (i < size) c += q[i];
        i++;

        *p++ = base64[(c & 0x00fc0000) >> 18];
        *p++ = base64[(c & 0x0003f000) >> 12];

        if (i > size + 1)
            *p++ = '=';
        else
            *p++ = base64[(c & 0x00000fc0) >> 6];

        if (i > size)
            *p++ = '=';
        else
            *p++ = base64[c & 0x0000003f];
    }

    *p = 0;

    return str;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:28:44.797

您应该`free(str)`在转换`char *`为之后`NSString`：

```
- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{
    char *base64 = base64_encode(input, length);
    NSString *ret = [NSString stringWithUTF8String:base64];
    free(base64);
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:19:39.043

分配给`malloc`函数的内存必须被释放`free`，你必须改变行

```
*p = 0; 
```

至

```
free(p); 
```

# php - 如何删除之前发送的所有标头

> ID：14829086
> 
> 赞同：1
> 
> 时间：2013-02-12T09:16:21.580
> 
> 标签：php, http-headers

在 PHP 中，一个常见的错误是（标头已发送），原因是空格，在这种情况下错误检测很困难。是否有任何代码可以删除之前发送的所有标头？如果存在代码或功能，它将非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:23:50.617

不，“发送”是指“发送给客户”。一旦它们离开你的服务器，你就不能告诉那些 TCP 包回来。

遵循 IPO 原则（[Input-Processing-Output](http://en.wikipedia.org/wiki/IPO_Model)），你就不会有这些问题。

这意味着，您的 PHP 代码流应该**总是**像这样：

1.  从请求变量中获取输入
2.  处理输入，获取外部数据
3.  创建 HTTP 响应（创建标头，然后回显输出）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:21:04.620

不可以。发送的内容不能“取消发送”。修复您的代码以不触发意外的标头刷新（我们在脚本末尾停止使用“？>”的最简单方法）。您还可以启用输出缓冲： http: [//php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

# cordova - 需要重新启动应用程序..使用带草坪椅的 Phonegap

> ID：14829087
> 
> 赞同：1
> 
> 时间：2013-02-12T09:16:22.077
> 
> 标签：cordova, jquery-mobile, lawnchair

每次插入、删除或更新数据时，我都需要重新启动我的应用程序。数据正在正确插入和删除......但不知道为什么我每次都需要重新启动我的应用程序才能获得效果。

我想为此应用程序使用文件结构。

```
<script type="text/javascript" charset="utf-8" src="js/cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/lawnchair.js"></script>
<script type="text/javascript" charset="utf-8" src="js/dom.js"></script>
<script>
    $(function(e) {

        var details = Lawnchair({name:'details',adapter:'dom'},function(e){
            //this.nuke();
        });

        details.all(function(data){
            for(var i = 0; i<data.length;i++)
            {
                //alert(data.length);
                var id = i + 1;
                //alert(id);
                document.getElementById("id").value = id;
                var listdiv = document.createElement('li');
                listdiv.setAttribute('id','listdiv' + i);
                listdiv.innerHTML = "ID : " + data[i].value.id + " | " + "Name : " + data[i].value.name + " | " + "Desc : " + data[i].value.desc;
                $('#show_list').append(listdiv);
            }
        });

        $('#save').click(function(e){
            //alert($.now());
            var obj1 = {id:$('#id').val(),name:$('#name').val(),desc:$('#desc').val()};
            //alert("listdiv" + obj1.id);
            details.save({key:"listdiv" + obj1.id,value:obj1});
            alert("Data Saved Successfully");
            //location.reload();
        });

        $('#del').click(function(e){
        if(document.getElementById("name").value != "")
        {
            var id = document.getElementById("id").value;
            details.remove("listdiv" + id,function(obj1){
                $("input:text").val("");
                document.getElementById("show_list").innerHTML = "";
                alert("Data Removed Successfully");
            });
        }
        else
        {
            alert("Please Select Data");
            return false;
        }
        });

        $('li').live('click',function(e){
            //alert(this.id);
            details.get(this.id,function(obj){
                document.getElementById("id").value = obj.value.id;
                document.getElementById("name").value = obj.value.name;
                document.getElementById("desc").value = obj.value.desc;
            });
        });
    });
    </script>

  </head>
  <body>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:50:17.087

因为添加了新内容，所以代码应如下所示：

```
 details.all(function(data){
        for(var i = 0; i<data.length;i++)
        {
            //alert(data.length);
            var id = i + 1;
            //alert(id);
            document.getElementById("id").value = id;
            var listdiv = document.createElement('li');
            listdiv.setAttribute('id','listdiv' + i);
            listdiv.innerHTML = "ID : " + data[i].value.id + " | " + "Name : " + data[i].value.name + " | " + "Desc : " + data[i].value.desc;
            $('#show_list').append(listdiv);+
        }
        $('#show_list').listview().listview('refresh');
    }); 
```

此行已添加（**`#show_list`**应为 listviews id）：

```
$('#show_list').listview().listview('refresh'); 
```

如果您想了解更多相关信息（如何在 jquery Mobile 中增强动态添加的内容），请查看我的其他**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**。或者可以在**[这里找到](https://stackoverflow.com/a/14550417/1848600)**在我的其他答案仔细阅读它，因为有很多方法可以实现他。

**编辑 ：**

这是解决您的问题的方法：http: [//jsfiddle.net/Gajotres/3cuPP/](http://jsfiddle.net/Gajotres/3cuPP/)

当您单击保存按钮时，您还需要附加新数据。在您的情况下，我使用 all 函数来获取所有数据，然后将相同的数据附加到 listview 并刷新。

# java - 自定义形状旋转问题

> ID：14829090
> 
> 赞同：0
> 
> 时间：2013-02-12T09:16:27.640
> 
> 标签：java, awt, java-2d, affinetransform

我正在尝试围绕其中心旋转自定义形状，但无法获得预期的结果。

我想要的是

****形状应围绕其中心旋转而不移动自身。****

我的解决方案目前正在做的是 **围绕其中心旋转整个形状，每次旋转都会改变其位置。**

我有多个形状，所以我创建了一个类来封装一个形状及其在下面的类中的变换

```
public abstract class Shoe implements Shape, ShoeShape {

    // variable declaration

    /**
     * 
     */
    public Shoe() {
        position = new Point();
        lastPosition = new Point();
    }

    public void draw(Graphics2D g2, AffineTransform transform, boolean firstTime) {

        AffineTransform af = firstTime ? getInitTransform()
                : getCompositeTransform();

        if (af != null) {

                Shape s = af.createTransformedShape(this);

                if (getFillColor() != null) {
                    g2.setColor(getFillColor());
                    g2.fill(s);
                } else {
                    g2.draw(s);
                }
            }

        }

    }

    public AffineTransform getCompositeTransform() {
            AffineTransform af = new AffineTransform();
        af.setToIdentity();
        af.translate(position.getX(), position.getY());
        Point2D centerP = calculateShapeCenter();
        af.rotate(orientation, centerP.getX(), centerP.getY());
        return af;
    }

    public void onMouseDrag(MouseEvent me, Rectangle2D canvasBoundary,
            int selectionOperation) {

        // shape operation can be either resize , rotate , translate ,
        switch (selectionOperation) {
        case MmgShoeViewer.SHAPE_OPERATION_MOVE:
            // MOVEMENT
            break;
        case MmgShoeViewer.SHAPE_OPERATION_ROTATE:

            Point2D origin = calculateShapeCenter();
            Point2D.Double starting = new Point2D.Double(me.getX(), me.getY());
            currentAngle = RotationHelper.getAngle(origin, starting);
            rotationAngle = currentAngle - startingAngle;
            rotate(rotationAngle);
            break;
        case MmgShoeViewer.SHAPE_OPERATION_RESIZE:
            break;
        default:
            System.out.println(" invalid select operation");
        }
    }

    public void onMousePress(MouseEvent me, Rectangle2D canvasBoundary,
            int selectionOperation) {

        // shape operation can be either resize , rotate , translate ,
        switch (selectionOperation) {
        case MmgShoeViewer.SHAPE_OPERATION_MOVE:
            break;
        case MmgShoeViewer.SHAPE_OPERATION_ROTATE:
            Point2D origin =  calculateShapeCenter();
            Point2D.Double starting = new Point2D.Double(me.getX(), me.getY());
            startingAngle = RotationHelper.getAngle(origin, starting);
            setShapeOperation(selectionOperation);
            break;
        case MmgShoeViewer.SHAPE_OPERATION_RESIZE:
            break;
        default:
            System.out.println(" invalid select operation");
        }
    }

    public void onMouseRelease(MouseEvent me, Rectangle2D canvasBoundary,
            int selectionOperation) {

        // shape operation can be either resize , rotate , translate ,
        switch (selectionOperation) {
        case MmgShoeViewer.SHAPE_OPERATION_MOVE:
            break;
        case MmgShoeViewer.SHAPE_OPERATION_ROTATE:
            // FIXME rotation angle computation
            setShapeOperation(-1);
            break;
        case MmgShoeViewer.SHAPE_OPERATION_RESIZE:
            break;
        default:
            System.out.println(" invalid select operation");
        }
    }

    public void rotate(double angle) {
        orientation = (float) angle;
    }

    public void translate(double deltaX, double deltaY) {

        position.setLocation(deltaX, deltaY);
        lastPosition.setLocation(deltaX, deltaY);
    }

    // another getter and setter 
```

我正在使用以下方法计算旋转角度

```
public static double getAngle(Point2D origin, Point2D other) {

        double dy = other.getY() - origin.getY();
        double dx = other.getX() - origin.getX();
        double angle;

        if (dx == 0) {// special case
            angle = dy >= 0 ? Math.PI / 2 : -Math.PI / 2;
        } else {
            angle = Math.atan(dy / dx);
            if (dx < 0) // hemisphere correction
                angle += Math.PI;
        }
        // all between 0 and 2PI
        if (angle < 0) // between -PI/2 and 0
            angle += 2 * Math.PI;
        return angle;
    } 
```

在画布鼠标侦听器的鼠标按下事件中

```
selectedShape.onMousePress(me, canvasBoundary, shoeViewer
                .getShapeOperation()); 
```

我只是调用选定形状的 onMousePress 方法

在画布鼠标侦听器的鼠标拖动方法中，我只是调用所选形状的 onMouseDrag 方法，它会更新旋转角度，正如您从第一类中看到的那样

```
selectedShape.onMouseDrag(me, canvasBoundary, shoeViewer
                .getShapeOperation()); 
```

你可以看到单个形状的绘制方法，根据当前变换绘制形状，我从paintComponent调用

```
Iterator<Shoe> shoeIter = shoeShapeMap.values().iterator();

        while (shoeIter.hasNext()) {

            Shoe shoe = shoeIter.next();
            shoe.draw(g2, firstTime);

        } 
```

其中 shoeShapeMap 包含当前在画布上的所有自定义形状。

我在计算角度或确定锚点时做错了吗？我当前的解决方案通过检查所有条件 [90 度等] 将形状旋转 360 度，如您在上述方法中所见。

我希望形状应该围绕其中心旋转而不调整其位置？用这个词很难解释，所以请给我建议任何更好的方法来在这里展示我想要完成的事情？

我想我已经提到了与这个问题有关的所有事情。如果您有任何疑问，请随时问我。

我在这里找到了 2 个相关帖子，但我无法从他们那里找到太多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:00:41.357

我认为解决方案可能是（或者/和）：

*   反转 AffineTransform 上的操作顺序，在旋转后放置翻译
*   使用 -x 和 -y 作为翻译值

# java - 将非活动类之间的变量传递给android活动类

> ID：14829093
> 
> 赞同：6
> 
> 时间：2013-02-12T09:16:32.727
> 
> 标签：java, android, android-activity, textview

我需要将一个变量从（周围）非活动类传递给一个 nameget(android activity)class 。在文本视图中显示传递的变量值。请告诉我这个例子需要做什么。如何将其传递给android活动

```
public class around(non-activity class)
{
    String name = "arjun";
    //how to pass this name value to an below activity
    nameget nam = new nameget();
    String new = nam.get(name);
}

public class nameget extends Activity(android activity class)
{
   public String get(String name)
   {
      String got = name;
      TextView t1 = (TextView)findViewById(R.id.textView1);
      t1.setText(name);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:20:09.393

试试这个

```
 public class around(non-activity class)
    {
     public static  String name = "arjun";
        //how to pass this name string to an below activity
    }

    public class nameget extends Activity(android activity class)
    {
        TextView t1 = (TextView)findViewById(R.id.textView1);
//your class name around
        t1.setText(around.name);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:22:15.503

试试这个，在你的活动类中声明你的非活动类。

```
 public class around(non-activity class)
{
Public static String name;
 name = "arjun";
//how to pass this name string to an below activity
}

 public class nameget extends Activity(android activity class)
  {
  around ar = new around();
  //declare non activity class here

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
TextView t1 = (TextView)findViewById(R.id.textView1);
t1.setText(ar.name);
 }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:28:10.500

您可以简单地为非活动类中的变量生成 getter 和 setter，例如..

```
public String getName(){
  return name;
}

public void setName(String name){
   this.name = name;
} 
```

现在，您可以从任何地方获取/设置名称的值作为..

```
Arround ar = new Arround()
ar.setName("Aruva"); //To set name
ar.getName();  // To get 
```

在你的活动中喜欢..

```
 t1.setText(ar.getName().toString()); 
```

并且您的非活动类可以在同一包或 src 文件夹中的另一个包中的任何位置创建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:30:34.840

一个很奇怪的问题，因为您的设计在这里不清楚。您通过意图包将参数传递给活动。您只能在开始活动时传递它们。Activity 只能在某些 Context 对象上启动（在 99% 的情况下是其他 Activity）。

只要您可以访问那里的上下文，您就可以从某个非活动类开始活动。如果按下后退按钮，您将开始的活动需要知道它的父母是谁。

如果您想在启动时将数据传递给活动，请参阅： [如何在 Android 应用程序中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

如果不是这种情况 - 请描述您的情况您的非活动类是什么以及它与您希望将数据传递到的活动有什么关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T09:36:28.123

解决此类问题的最佳方法是使用事件驱动架构。您可以使用任何事件库，我建议[使用 eventBus](https://github.com/greenrobot/EventBus)。

（在 eventbus 范围内）创建一个名为 NameChangedEvent 的[粘性事件](https://github.com/greenrobot/EventBus#sticky-events)，并带有 name 属性

您的活动将在活动时收听它（恢复时 - 暂停时）。更改名称时，您将调度此事件，例如

`EventBus.getDefault().post(new NameChangedEvent(name));`

您的活动将捕捉到这一点并更新视图。它还可以读取此事件的最新版本 onCreate 方法。

如果您只想为 1 个字段执行此操作，这当然是一种矫枉过正。但是许多应用程序需要处理数据更改并更新其 UI，并且拥有事件是最好的方法（[恕](http://idioms.thefreedictionary.com/in+my+humble+opinion)我直言）。这可以帮助您松散地耦合您的应用程序逻辑和 UI。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-18T08:03:55.337

如果保存“类”类型的变量会更容易

示例：（玩得开心）

```
Class<?> MyClassSave;

MyClassSave = MainActivity.class; 
```

您可以从 .class 获取所有值

您可以将公共/私有（静态）设为公开/私有（静态），或传递给 bundle/serializable/Obj

# json - Hadoop：无法运行 mapreduce 程序 ..java.io.IOException：错误 = 12

> ID：14829094
> 
> 赞同：1
> 
> 时间：2013-02-12T09:16:34.810
> 
> 标签：json, hadoop, mapreduce, hdfs

我试图在 hadoop 中运行 mapreduce 程序。基本上它接受一个文本文件作为输入，其中每一行都是一个 json 文本。我使用简单的 json 在我的映射器中解析这些数据，reducer 做了一些其他的事情。我在 hadoop/lib 文件夹中包含了简单的 json jar 文件。这是下面的代码

```
package org.myorg;

import java.io.IOException;
import java.util.Iterator;
import java.util.*;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapreduce.*;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;

public class ALoc
{
    public static class AMapper extends Mapper<Text, Text, Text, Text>
    {
        private Text kword = new Text();
        private Text vword = new Text();
        JSONParser parser = new JSONParser();

        public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException{
            try {
                String line = value.toString();
                Object obj = parser.parse(line);

                JSONObject jsonObject = (JSONObject) obj;
                String val = (String)jsonObject.get("m1") + "," + (String)jsonObject.get("m3");
                kword.set((String)jsonObject.get("m0"));
                vword.set(val);
                context.write(kword, vword);
            } 
            catch (IOException e) {
                 e.printStackTrace();
            }
            catch (ParseException e) {
                e.printStackTrace();
            }              
        }
    }

    public static class CountryReducer
        extends Reducer<Text,Text,Text,Text>
    {
        private Text result = new Text();
        public void reduce(Text key, Iterable<Text> values,
        Context context
        ) throws IOException, InterruptedException
        {
            int ccount = 0;
            HashMap<Text, Integer> hm = new HashMap<Text, Integer>();

            for (Text val : values)
            {
                if(hm.containsKey(val)){
                        Integer n = (Integer)hm.get(val);
                        hm.put(val, n+1);
                }else{
                        hm.put(val, new Integer(1));
                }
            }
            Set set = hm.entrySet();
            Iterator i = set.iterator();
            String agr = "";

            while(i.hasNext()) {
                Map.Entry me = (Map.Entry)i.next();
                agr += "|" + me.getKey() + me.getValue();
            }
            result.set(agr);
            context.write(key, result);
        }
    }

    public static void main(String[] args) throws Exception
    {
        Configuration conf = new Configuration();
        Job job = new Job(conf, "ALoc");
        job.setJarByClass(ALoc.class);
        job.setMapperClass(AMapper.class);
        job.setReducerClass(CountryReducer.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);
        job.setInputFormatClass(TextInputFormat.class);
        FileInputFormat.addInputPath(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));
        System.exit(job.waitForCompletion(true) ? 0 : 1);
    }
} 
```

当我尝试运行作业时。它给出了以下错误。我在 aws 微实例单节点中运行它。我一直在关注本教程[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

```
 hadoop@domU-18-11-19-02-92-8E:/$ bin/hadoop jar ALoc.jar org.myorg.ALoc /user/hadoop/adata /user/hadoop/adata-op5 -D mapred.reduce.tasks=16
13/02/12 08:39:50 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/02/12 08:39:50 INFO input.FileInputFormat: Total input paths to process : 1
13/02/12 08:39:50 INFO util.NativeCodeLoader: Loaded the native-hadoop library
13/02/12 08:39:50 WARN snappy.LoadSnappy: Snappy native library not loaded
13/02/12 08:39:51 INFO mapred.JobClient: Running job: job_201302120714_0006
13/02/12 08:39:52 INFO mapred.JobClient:  map 0% reduce 0%
13/02/12 08:40:10 INFO mapred.JobClient: Task Id : attempt_201302120714_0006_m_000000_0, Status : FAILED
java.lang.RuntimeException: Error while running command to get file permissions : java.io.IOException: Cannot run program "/bin/ls": java.io.IOException: error=12, Cannot allocate memory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at org.apache.hadoop.util.Shell.runCommand(Shell.java:200)
    at org.apache.hadoop.util.Shell.run(Shell.java:182)
    at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375)
    at org.apache.hadoop.util.Shell.execCommand(Shell.java:461)
    at org.apache.hadoop.util.Shell.execCommand(Shell.java:444)
    at org.apache.hadoop.fs.FileUtil.execCommand(FileUtil.java:710)
    at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.loadPermissionInfo(RawLocalFileSystem.java:443)
    at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.getOwner(RawLocalFileSystem.java:426)
    at org.apache.hadoop.mapred.TaskLog.obtainLogDirOwner(TaskLog.java:267)
    at org.apache.hadoop.mapred.TaskLogsTruncater.truncateLogs(TaskLogsTruncater.java:124)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:260)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.io.IOException: java.io.IOException: error=12, Cannot allocate memory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    ... 15 more

    at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.loadPermissionInfo(RawLocalFileSystem.java:468)
    at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.getOwner(RawLocalFileSystem.java:426)
    at org.apache.hadoop.mapred.TaskLog.obtainLogDirOwner(TaskLog.java:267)
    at org.apache.hadoop.mapred.TaskLogsTruncater.truncateLogs(TaskLogsTruncater.java:124)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:260)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:24:43.490

我想你一定是在内存非常少（~700MB）的微型实例上尝试使用 hadoop。

尝试增加 HADOOP Heapsize 参数（在 hadoop/conf/hadoop-env.sh 中）.. 因为基本原因是 fork 进程所需的内存不足

# php - extjs 4 : 仅按特定 id 显示树面板节点

> ID：14829098
> 
> 赞同：1
> 
> 时间：2013-02-12T09:16:42.393
> 
> 标签：php, javascript, mysql, ajax, extjs4

## MySQL数据库：

```
CREATE DATABASE `tree`;

DROP TABLE IF EXISTS `mytree`;
CREATE TABLE `mytree` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'node_id',
  `text` varchar(20) NOT NULL COMMENT 'node_name',
  `parent_id` int(11) NOT NULL,
  `leaf` varchar(5) NOT NULL COMMENT 'true/false',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=95 DEFAULT CHARSET=latin1;

INSERT INTO `mytree` VALUES (36,'Folder 1',0,'false'),
(38,'Folder 2',0,'false'),(42,'Text 1',36,'true'),
(43,'Folder 3',0,'false'),(44,'Text 2',36,'true'),
(52,'Text 6',38,'true'),(57,'Text 5',38,'true'),
(58,'Text 4',38,'true'),(73,'Subfolder 1',36,'false'),
(74,'Text 7',73,'true'),(75,'Text 10',73,'true'),
(76,'Text 9',73,'true'); 
```

## 树.php

```
<?php
mysql_connect("localhost", "root", "") or die("Could not connect");
mysql_select_db("tree") or die("Could not select database");

$parent_id = $_GET['node'];
$id = $_GET['id'];
    // 1) Remove false as checked
    $query = "SELECT id, text,parent_id, leaf FROM mytree WHERE parent_id='".$parent_id."' ORDER BY text ASC";
    $rs = mysql_query($query);
    $arr = array();
    while($obj = mysql_fetch_object($rs)) {

      // 2) If no leaf then destroy the attribute
      if($obj->leaf != "false"){
         // 1) set checked attribute with an boolean value 
         $obj->checked = false;       
      }
     $arr[] = $obj;
    }
    echo json_encode($arr);
?> 
```

## 脚本：

```
Ext.onReady(function() {
    var store = Ext.create('Ext.data.TreeStore', {
        proxy: {
    type: 'ajax',
    url: 'tree.php',
    extraParams :{id:'38,43'},
    // Here Magic comes
    actionMethods: {
      create : 'GET',
      read   : 'GET',
      update : 'GET',
      destroy: 'GET'
    }
        },
        sorters: [{
            property: 'leaf',
            direction: 'ASC'
        }, {
            property: 'text',
            direction: 'ASC'
        }]
    }); 
```

## 问题：

1）我只想显示 id 38 和 43 的树面板根目录。如果我们更改 .php 中的代码，当单击树面板时，树无法展开数据。所以，我不认为我们更改代码在 php 脚本中？如何在树形面板中显示我想要的数据？P/S：id的传参是灵活的，不仅仅是38和43。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:32:28.547

我认为这将适用于您想要的：

```
 <?php
    mysql_connect("localhost", "root", "") or die("Could not connect");
    mysql_select_db("tree") or die("Could not select database");

    $parent_id = $_GET['node'];
    $id = $_GET['id'];
    // 1) Remove false as checked
    $query = "SELECT id, text,parent_id, leaf FROM mytree WHERE parent_id='".$parent_id."' ";
    if($parent_id == 0)
        $query = $query."AND id IN (".$id.") ";
    $query = $query."ORDER BY text ASC";
    $rs = mysql_query($query);
    $arr = array();
    while($obj = mysql_fetch_object($rs)) {

      // 2) If no leaf then destroy the attribute
      if($obj->leaf != "false"){
         // 1) set checked attribute with an boolean value 
         $obj->checked = false;       
      }
     $arr[] = $obj;
    }
    echo json_encode($arr);
?> 
```

# sql-server - 将 SQL Server 2012 架构转换为 PostgreSQL 9.1

> ID：14829102
> 
> 赞同：2
> 
> 时间：2013-02-12T09:17:05.067
> 
> 标签：sql-server, postgresql

对于一个新项目，我们必须将数据从 SQL Server 2012 数据库导出到 PostgreSQL 数据库。我们有 SQL Server 架构，但必须为 PostgreSQL 创建一个架构。我们希望模式尽可能匹配。任何人都可以就将 SQL Server 架构转换为 PostgreSQL 架构的最佳方式提供任何建议吗？是否有任何工具或脚本可以提供帮助？我见过 PostgreSQL 函数，但老实说，我没有 PostgreSQL 经验，而且我们的职责仅限于导入 PostgreSQL 的数据，所以我想从 SQL Server 端做所有事情（计划将 SSIS 与 64 位 ODBC 驱动程序一起使用一旦我们创建了模式，PostgreSQL 就可以导出数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:47:03.967

虽然不是免费的，但我过去曾为此使用过[Toad Data Modeler 。](http://www.quest.com/toad-data-modeler/)我们从未在任何特别复杂的模式上使用它，但它确实很好地保持了各种数据库平台之间的模式同步。

您的里程可能会有所不同，但值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:22:48.983

我不知道直接模式转换器，但大多数[数据建模工具](http://en.wikipedia.org/wiki/Comparison_of_data_modeling_tools)都提供这种转换功能。我们将[Dezign 用于数据库](http://www.datanamic.com/dezign/index.html)。这个工具有一个功能“切换目标dbms”。这是一个数据建模工具，就像前面提到的 Toad Data Modeler 一样。借助独立于数据库的建模功能，您可以使不同数据库平台上的模式保持同步。对于不同数据库平台之间的数据同步（数据泵），您可以使用[DataDiff CrossDB](http://www.datanamic.com/datadiff-crossdb/index.html)。

# extjs - 如何在 Sencha Touch 中向 Ext.NavigationView 添加事件监听器？

> ID：14829103
> 
> 赞同：0
> 
> 时间：2013-02-12T09:17:05.590
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我已经定义了一个 `Ext.navigation.View`，我需要将一个事件处理程序附加到我的代码中指定的元素，如下所示：

```
title: 'Timetable XXX', 
            iconMask: true,
            iconCls: 'XXX-icon-timetable' 
```

* * *

知道怎么做吗？

```
Ext.define('XXX.view.NavigViewTimetable', {
        extend: 'Ext.navigation.View',

        alias: 'widget.navigviewtimetable',

        requires: [
        'XXX.view.TimetableContainer',
        'XXX.view.DetailView',
        'XXX.view.TimetableEdit',
        'XXX.view.TimetableDayList'
        ],

        config: {      
            navigationBar: {
                items: [
                    {
                        xtype: 'button',
                        text: 'Add',
                        itemId: 'addButton',
                        ui: 'custom-btn-up-timetable',
                        align: 'right',
                        hidden: false
                    },

                ],
                ui: 'custom-toolbar-top-1L'
            },

            items: [
                {
                    xtype: 'timetablecontainer'
                },

                //Toolbar
                {
                    xtype: "toolbar",
                    docked: "bottom",
                    ui: 'custom-toolbar-2L',

                    items: [
                        {
                            xtype: "button",
                            text: 'Today',
                            ui: 'custom-btn-dwn-timetable',
                            //handler: this.onTodayButtonTap,
                            //scope: this,
                            itemId: 'todayButton'
                        },
                        {
                            xtype: 'spacer'
                        },
                        {
                            xtype: "segmentedbutton",
                            items: [
                            { 
                                text: 'Daily',
                                ui: 'custom-btn-dwn-timetable'      
                            },
                            { 
                                text: 'List',
                                ui: 'custom-btn-dwn-timetable',
                                //disabled: true,
                                pressed: true       
                            }
                            ],

                            itemId: 'segBtn',   
                            align: 'right'
                        }
                    ]
                }

            ],

            listeners: [
                {
                    delegate: '#addButton',
                    event: 'tap',
                    fn: 'onAddButtonTap'
                },
                {
                    delegate: '#todayButton',
                    event: 'tap',
                    fn: 'onTodayButtonTap'
                },
                {
                    delegate: '#segBtn',
                    event: 'toggle',
                    fn: 'onSegBtnToggle'
                }

            ], 

            // I NEED ADD LISTEN TO AN EVENT HERE
            title: 'Timetable XXX', 
            iconMask: true,
            iconCls: 'XXX-icon-timetable' 

        },

        onAddButtonTap: function () {
            console.log("addItemCommand [NavigViewTimetable]");
            this.fireEvent("addItemCommand", this);
        },

        onTodayButtonTap: function(){
            console.log('onTodayButtonTap [NavigViewTimetable]');
            this.fireEvent('todayButtonTapCommand', this)
        },
        onSegBtnToggle: function (segBtn, btn, isPressed) {
            //console.log("'" + btn.config.text +"' on segmented button pressed" );
            if (btn.config.text == 'List'){
                this.fireEvent('listToggleCommand', this);
            }else if (btn.config.text == 'Daily'){
                this.fireEvent('dailyToggleCommand', this);

            }                         
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:57:26.210

与其将与事件处理程序相关的代码放在视图中，我更喜欢使用`Controllers`. 这肯定会减少维护代码的工作量。另一件事，如果您决定使用控制器，那么您可以`action`为每个按钮使用配置。喜欢 -

```
 xtype: 'button',
                    text: 'Add',
                    itemId: 'addButton',
                    ui: 'custom-btn-up-timetable',
                    align: 'right',
                    hidden: false,
                    action:'addButtonAction' 
```

然后在控制器中，您可以使用`control`配置选项。控制器的 Ex 可以是 -

```
Ext.define('XXX.controller.ButtonController',{
     extend:'Ext.app.Controller',
     config:{
          refs:{
               views:['Theviews.youwanto.refer'],
               //addtional references  
          },
          control:{
               'button[action=addButtonAction]':{
                     tap:'functionForAddButton'
                }
          }        
     },
     functionForAddButton:function(){
          console.log('Add Button tapped');
     } 

); 
```

您还可以`action`在分段按钮上使用配置 -

```
 xtype: "segmentedbutton",
                        items: [
                        { 
                            text: 'Daily',
                            ui: 'custom-btn-dwn-timetable',
                            action:'dailyButtonAction'      
                        },
                        { 
                            text: 'List',
                            ui: 'custom-btn-dwn-timetable',
                            //disabled: true,
                            pressed: true,
                            action:'listButtonAction'       
                        }
                        ], 
```

您始终可以在视图中定义事件处理程序，但 IMO 不遵循 MVC 主体。

# c++ - C++ 中的二维动态内存分配数组

> ID：14829105
> 
> 赞同：6
> 
> 时间：2013-02-12T09:17:18.553
> 
> 标签：c++, dynamic-memory-allocation

几天前，我从互联网上了解到创建 2D 分配的内存阵列，它工作得很好。要访问我们只是简单地使用的数组`matrix[i][j]`，但是有什么方法可以通过使用`*`符号而不是`[]`输入以及其他方法来取消引用这个二维数组？

第一个问题已解决，我可以使用`*(*(matrix + i) + j)`

现在我有另一个问题，最后一个代码段是释放分配的内存（我也是从互联网上得到的），但我不明白，为什么我不能使用`delete [] matrix`？

```
int **matrix;

// dynamically allocate an array
matrix = new int *[row]; 
for (int count = 0; count < row; count++)
{
    matrix[count] = new int[col];
}

// input element for matrix
cout << endl << "Now enter the element for the matrix..."; 
for (int i=0; i < row; i++) 
{
    for (int j=0; j < col; j++)
    {
        cout << endl << "Row " << (i+1) << " Col " << (j+1) << " :";
        cin >> matrix[i][j]; // is there any equivalent declaration here?
    }
}

// free dynamically allocated memory
for( int i = 0 ; i < *row ; i++ )
{
    delete [] matrix[i] ;   
}
delete [] matrix ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:04:16.167

回答您的第二个问题：当您使用以下代码分配二维数组时

```
// dynamically allocate an array
    matrix = new int *[row]; 
    for (int count = 0; count < row; count++)
        matrix[count] = new int[col]; 
```

实际上，您正在分配一个指针数组（您的矩阵变量，它是一个双指针）和整数“行”数组（每个代表矩阵中的一行，大小为“col”），它们是`matrix[0]`,`matrix[1]`等。高达`matrix[row-1]`.

因此，当您想要释放矩阵时，您首先需要释放每一行（在循环中分配的数组），然后是包含行的数组。在您的情况下，您用来释放矩阵的代码部分错误，应该更像以下内容：

```
// free dynamically allocated memory
for( int i = 0 ; i < row ; i++ )
{
    //first we delete each row
    delete [] matrix[i] ;
}
//finally, we delete the array of pointers
delete [] matrix ; 
```

循环中的删除将释放矩阵的每一行，最后的删除将释放行数组。`row`在您的代码中，您在双指针 ( ) 上使用了删除时间`matrix`，这是没有意义的。

最后，在双指针上使用单个删除是错误的，因为它最终会导致内存泄漏，因为您没有释放为每一行分配的内存，只有引用它的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T09:20:29.747

因为`a[b]`is just`*(a + b)`你当然可以这样做：

```
*(*(matrix + i) + j) 
```

无论如何，这些`new`分配很容易出错。如果其中一个嵌套`new`的 s 抛出，那么您将有泄漏。尝试`std::vector`改用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T09:25:29.327

像这样的东西会起作用：

```
int **matrix;

// dynamically allocate an array
matrix = new (std::nothrow) int *[row];
if (matrix == NULL)
{
      // handle the error
}
for (int count = 0; count < row; count++)
{
    *(matrix + count) = new (std::nothrow) int[col];
    if (matrix[count] == NULL)
    {
          // handle the error
    }
 }

cout << "\nNow enter the element for the matrix..."; 
for (int i=0; i < row; i++)
{
    for (int j=0; j < col; j++)
    {
        cout << "\nRow " << (i+1) << " Col " << (j+1) << " :";
        cin >> *(*(matrix + i) + j);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T09:22:34.023

是的，您使用指针加法，但您需要了解内存是如何布局的。假设 x 是指向 int 数组的第一个元素的指针，如果要访问 x[2]，可以使用 *(x+2)。但是，对于矩阵，它可能会变得非常混乱，如果这样做，您更有可能访问矩阵中的错误索引，所以我不建议这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T09:21:53.337

你可以做`*(*(matrix+i)+j)`。它应该等同于括号表示法。这两种表示法所发生的只是*指针算术*。

# linux - Shell 脚本变量结构

> ID：14829106
> 
> 赞同：0
> 
> 时间：2013-02-12T09:17:34.623
> 
> 标签：linux, shell, unix, variables

如何创建具有如下文件名格式的变量：文件名模式：SnapshotIR__somenumber.csv

我尝试了类似的东西：

```
TODAY=$(date +"%m%d%Y")    
SNAPSHOT = $(SnapshotIR$TODAY*.csv) 
```

我收到如下错误：

```
test.sh: line 2: SnapshotIR02122013_2239.csv: command not found
test.sh: line 2: SNAPSHOT: command not found 
```

所以，当我想使用 if

```
if [ -f SnapshotIR$TODAY*.csv]  -> works 
if [ -f ${SNAPSHOT} ]           -> does not work (I get the above error) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:21:30.873

```
SNAPSHOT=SnapshotIR${TODAY}\*.csv 
```

当你给 $(.....) 时，它会说 shell 在大括号内执行命令。我猜你只是在形成文件名。

也删除空格：

```
SNAPSHOT<space>=<space> 
```

我还想添加通配符“*”不适用于 -f 标志。

```
for file in $SNAPSHOT
do
        if [ -f "$file" ]
        then
                FOUND="$file"
                break
        fi
done 
```

# javascript - 使用 Jquery 进行表单验证的行为不符合预期

> ID：14829107
> 
> 赞同：0
> 
> 时间：2013-02-12T09:17:35.393
> 
> 标签：javascript, jquery, validation

我正在使用 jQuery 来验证表单中的某些字段，并且似乎特别是某个字段存在问题（`#inputTel`）。

如果输入了错误的格式，下面会弹出错误消息，这很好，但问题是一旦输入了正确的格式，消息并没有消失。

这是一个带有完整演示的**[jsFiddle 。](http://jsfiddle.net/richlewis14/qBQad/)**

这是有问题的部分：

```
//Tel Validate
function is_valid_tel() {
    $this = $("#inputTel");
    var pattern = new RegExp("^\d{11}$");
    if (pattern.test($this.val())) { // valid
        if ($this.closest(".control-group").hasClass("error")) $this.closest(".control-group").removeClass("error");
        $this.siblings(".help-inline").css("display", "none");
        return true;
    } else { // error
        if (!$this.closest(".control-group").hasClass("error")) $this.closest(".control-group").addClass("error");
        $this.siblings(".help-inline").css("display", "block");
        return false;
    }
} 
```

除了这个之外，其他所有字段都按预期工作。我的 jQuery 技能有限，所以我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:15:14.470

你也可以使用类似下面的东西，不那么繁琐：

```
$(function() {
            function validateTheForm() {
              var ok = true;
                $(".input-medium").each(function() {
                if($(this).val() == "") //use regex actually here
                { 
                  $(this).next().css("display","inline");
                  ok = false;
                }
                else {
                    $(this).next().css("display","none");
                }

            });
                return ok;
            }
            $(".btn").click(function() {
              $("form").submit(validateTheForm());
              $("form").submit();

            });

        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:30:44.510

您的代码中的问题：

替换`var pattern = new RegExp("^\d{11}$");`为`var pattern = new RegExp(/^\d{11}$/);`

更新代码

```
//Tel Validate
function is_valid_tel() {
    $this = $("#inputTel");
    var pattern = new RegExp(/^\d{11}$/);// Update this line
    if (pattern.test($this.val())) { // valid
        if ($this.closest(".control-group").hasClass("error")) $this.closest(".control-group").removeClass("error");
        $this.siblings(".help-inline").css("display", "none");
        return true;
    } else { // error
        if (!$this.closest(".control-group").hasClass("error")) $this.closest(".control-group").addClass("error");
        $this.siblings(".help-inline").css("display", "block");
        return false;
    }
} 
```

检查小提琴[http://jsfiddle.net/rfg8H/](http://jsfiddle.net/rfg8H/)

# android - 从Android拨号中获取号码？

> ID：14829110
> 
> 赞同：0
> 
> 时间：2013-02-12T09:17:45.057
> 
> 标签：android

我正在开发一个应用程序，我必须使用我的 PHP 服务器从我的应用程序中进行调用。

我有一种情况，每当用户按下 Android 设备的绿色通话按钮并拨打号码后，**我必须让用户选择从我的 App 或普通 SIM 拨打电话**。我也这样做了。现在**我想在切换到应用程序之前获取我在拨号器上拨打的号码**。

意味着如果用户选择我的应用程序来呼叫，那么我必须在电话拨号上拨打号码。

我正在使用以下代码生成弹出窗口以使用我的应用程序进行调用。该代码在特定活动内的清单中编写为 Intent 过滤器。

```
<activity
            android:name="com.tv.longdistcall.PlaceLongDistCall"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.CALL_BUTTON" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.CALL_PRIVILEGED" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:scheme="tel" />
            </intent-filter>
        </activity> 
```

请建议我，在切换到活动之前如何**在拨号器上拨打号码。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T18:42:31.880

您需要使用 NEW_OUTGOING_CALL 意图过滤器创建一个新的 BroadcastReceiver。此接收器拦截设备上对 CALL_PRIVILEGED 或 CALL 操作的每次调用，无论目标应用程序是什么。

目的地号码可以在 Intent.EXTRA_PHONE_NUMBER 中的接收者意图附加信息中找到。

# asp.net - 脚本似乎永远不会注册

> ID：14829113
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:17:50.783
> 
> 标签：asp.net, vb.net

我有以下简单的测试 asp.net 表单，以及以下 vb.net 加载事件：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Dim strScript As String

    strScript = "function MyMsg()"
    strScript += "{"
    strScript += "alert(document.getElementById('TextBox3').value);"
    strScript += "}"
    ClientScript.RegisterStartupScript(Me.GetType(), "MyMsg", strScript, True)

End Sub 
```

它只是在调用脚本时显示网页中文本框的上下文。

然后我有这个按钮代码：

```
Protected Sub Button6_Click(sender As Object, e As EventArgs) Handles Button6.Click

    If ClientScript.IsStartupScriptRegistered("MyCall") Then
        Me.TextBox3.Text = "My text - registered"
    Else
        Me.TextBox3.Text = "my text NOT registered"
    End If

    ClientScript.RegisterStartupScript(Me.GetType(), "MyCall", "MyMsg();", True)

End Sub 
```

但是，单击该按钮时始终显示未注册的文本。所以，代码似乎运行正常。它从文本框中抓取文本没有问题。但是，代码的 True 部分永远不会运行。

这是一个状态或范围问题吗？（或者代码只注入一次的事实）阻止了它运行代码块是真的吗？

如何让上述代码的“真实”部分运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:51:00.240

在此处合并（并详细说明）对原始问题的评论。

问题是 ASP.NET 按钮在每次单击它们时都会导致完整的回发到服务器，并且当页面执行完整的回发时，它会重置所有可能从以前的操作中注册的脚本。这意味着上次单击按钮时注册的任何脚本都将被清除，并且页面在第二次时将不知道任何有关它的信息。

有几种方法可以解决这个问题。

1.  UpdatePanel：我的首选方法是声明所有需要在 AJAX 更新面板内的按钮单击处理程序中操作的控件，例如：

    ```
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            <asp:Button ID="Button1" runat="server" Text="Button" />
        </ContentTemplate>
    </asp:UpdatePanel> 
    ```

    这样做是限制了按钮在单击时可以更改的内容并导致回发。为了使用它，您还需要在更新面板之前的任何位置声明一个 Scriptmanager。当您注册脚本时，您将需要使用该 scriptmanagers`RegisterScriptControl`功能。

2.  手动 AJAX 回发：实现此目的的另一种方法是使用“手动”AJAX 调用。我已经这样做了几次，但它比更新面板版本复杂得多，我不确定我这样做的方式是否是“正确”的方式。首先，您将 ASP 按钮更改为常规的 HTML 输入按钮。在 HTML 按钮上，`onclick`应该是您指定的 javasciprt 函数。在 javascript 函数中，您需要完成声明 XMLHttpRequst 对象的过程。[该站点](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)详细介绍了如何使用该对象。我来回获取信息的方式是使用附加到请求/响应的标头。您需要使用`setRequestHeader`函数添加它们并从`getAllResponseHeaders`功能。一旦您进入服务器端的页面加载事件，您将需要评估请求的标头，如果存在表示该按钮被单击（您需要手动添加）的标头，那么您可以调用一个函数并添加响应的标题，它将告诉 javascript 在弹出框中显示什么。我确信使用标题不是来回获取信息的最佳方法，但如果您只是在谈论仅指示向用户打印什么的布尔值，那么您可能不需要完成设置过程JSON 或 XML 响应。这也假设您在服务器端做的不仅仅是检查按钮被点击了多少次，因为如果这就是您需要做的所有事情，您应该使用选项 3。

3.  实现这一点的最简单方法是使整个事物成为 javascript 函数。在页面上声明一个变量（int）并在加载时将其设置为 0。然后，当单击按钮时，您只需要检查计数器，如果其大于 0 则显示一条消息，如果其为 0 则显示另一条消息。这仅在您的条件非常基本的情况下才有效（它可能会变得非常复杂，但有时那是矫枉过正）。

所以，在我看来，这三个选项应该能够处理你需要做的任何事情。第一个非常易于使用，第二个非常通用，如果您在与服务器的通信中实现 XML 或 JSON，则可以变得非常强大，第三个比每次与服务器通信都要快得多。决定哪个最适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:22:21.020

您没有添加脚本标签来包含您的脚本。

*添加功能*

```
strScript = "<script type=\"text/javascript\">";
strScript = "function MyMsg()"
strScript += "{"
strScript += "alert(document.getElementById('TextBox3').value);"
strScript += "}"
strScript = "</script>";
ClientScript.RegisterStartupScript(Me.GetType(), "MyMsg", strScript, True) 
```

调用函数

```
ClientScript.RegisterStartupScript(Me.GetType(), "MyCall", "<script type=\"text/javascript\">MyMsg();</script>", True) 
```

# mysql - mySQL 中的条件查询

> ID：14829116
> 
> 赞同：1
> 
> 时间：2013-02-12T09:17:59.050
> 
> 标签：mysql, sql

嗨，我想根据以下某些条件选择查询。我怎样才能实现？

```
if var1>var2 then

SELECT * from table1;
ELSE
SELECT * from table2;
end if 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:22:36.737

在此创建一个`STORED PROCEDURE`，

```
DELIMITER $$
CREATE PROCEDURE procName(IN _val1 INT, IN _val2 INT)
BEGIN
    IF _var1 > _var2 THEN
        SELECT * from table1;
    ELSE
        SELECT * from table2;
    END IF;
END $$
DELIMITER ; 
```

当你调用程序时，

```
CALL procName(1,2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:40:34.120

像这样的东西？

```
SELECT * from table1 WHERE var1>var2
UNION ALL
SELECT * from table2 WHERE var1<=var2 
```

编辑：根据您的评论，也许您需要这样的查询：

```
SELECT Column1, Column2, Column3
FROM (
  SELECT 1 as Tab, Column1, Column2, Column3
  FROM Table1
  UNION ALL
  SELECT 0 as Tab, 'Value1', 'Value2', 'Value3'
) s
WHERE Tab = ((SELECT COUNT(*) FROM Table1)>10) 
```

如果超过 10 行，这将返回 table1 中的所有行，否则将返回单行（数据库中不存在）。

# joomla2.5 - 具有特殊字符的Joomla paypal插件发布变量不起作用

> ID：14829117
> 
> 赞同：2
> 
> 时间：2013-02-12T09:18:03.233
> 
> 标签：joomla2.5, virtuemart

我正在使用 joomla 2.5.4 和 Virtuemart 2.0.6，当我尝试使用贝宝付款时，在贝宝订单摘要中：描述显示没有特殊字符。它显示为 Nï¿½mero 而不是 Número。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:53:21.923

转到插件/vmpayment/paypal/paypal.php

并搜索这个函数 plgVmConfirmedOrder()

你可以在这个函数的最后看到这个表格

```
$html = '<html><head><title>Redirection</title></head><body><div style="margin: auto; text-align: center;">';
 $html .= '<form action="' . "https://" . $url . '" method="post"   name="vm_paypal_form">';
 $html.= '<input type="submit"  value="' . JText::_('VMPAYMENT_PAYPAL_REDIRECT_MESSAGE') . '" />';
 foreach ($post_variables as $name => $value) {

     $html.= '<input type="hidden" name="' . $name . '" value="' . htmlspecialchars($value). '" />';

 }
 $html.= '</form></div>';
 $html.= ' <script type="text/javascript">';
 $html.= ' document.vm_paypal_form.submit();';
 $html.= ' </script></body></html>'; 
```

用这个替换表格。

```
$html = '<html><head><title>Redirection</title></head><body><div style="margin: auto; text-align: center;">';
 $html .= '<form action="' . "https://" . $url . '" method="post"   name="vm_paypal_form">';
 $html.= '<input type="submit"  value="' . JText::_('VMPAYMENT_PAYPAL_REDIRECT_MESSAGE') . '" />';
 foreach ($post_variables as $name => $value) {

     $html.= '<input type="hidden" name="' . $name . '" value="' . htmlspecialchars($value). '" />';

 }
 $html.= '<input type="hidden" name="charset" value="utf-8">';
 $html.= '</form></div>';
 $html.= ' <script type="text/javascript">';
 $html.= ' document.vm_paypal_form.submit();';
 $html.= ' </script></body></html>'; 
```

我们添加了一行

```
 $html.= '<input type="hidden" name="charset" value="utf-8">'; 
```

这对我来说很好。

# git - 将 SVN 存储库迁移到 Gitblit

> ID：14829119
> 
> 赞同：3
> 
> 时间：2013-02-12T09:18:08.560
> 
> 标签：git, svn, gitblit

我们想从 svn 更改为 git。我们的 Intranet 中有一个 svn-server，并且希望有 git 的等价物。

[使用gitblit](http://gitblit.com/index.html)似乎很有趣，因为我们的服务器上正在运行 tomcat。

那么，从 svn 迁移所有存储库的最简单方法是什么？

我能想到的一种方法如下：

1.  将每个存储库迁移到某个地方的 git 客户端（[类似这样](https://stackoverflow.com/questions/79165/how-to-migrate-svn-with-history-to-a-new-git-repository)）
2.  在 gitblit 上创建 git-repo
3.  推送到 gitblit

我们应该这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T05:50:14.087

你的计划听起来很合理。我们有同样的情况。以下是您需要回答的一些问题：

1.  您的 svn 存储库是否符合分支/标签/主干的标准布局？如果没有，您可以在转换为 git 之前重组您的 svn 存储库。
2.  git 存储库中需要多少历史记录。我建议您从最近的版本（例如）运行 svn clone`git svn clone -r 1234`并将 svn 存储库设置为只读。

# spring - 如何使用代码而不是 xml 配置添加 RequestDataValueProcessor 的实现

> ID：14829120
> 
> 赞同：1
> 
> 时间：2013-02-12T09:18:23.123
> 
> 标签：spring, model-view-controller, spring-security

我有一个像下面这样的豆子

```
<bean name="requestDataValueProcessor"    class="com.bom.DOMRequestDataValueProcessor"/> 
```

DOMRequestDataValueProcessor 实现了 RequestDataValueProcessor。

我正在使用以下类而不是通过 xml 配置文件进行 mvc 配置。

```
 @Configuration
   @EnableWebMvc
   public class WebConfig extends WebMvcConfigurerAdapter {

   } 
```

如何在配置中添加上述 bean？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T09:58:15.610

来自 Pro Spring Mvc 书：

> 要配置 a `RequestDataValueProcessor`，我们需要将其添加到应用程序上下文中，然后使用名称注册它 `requestDataValueProcessor`。这是框架用来检测注册实例的名称。

因此，您可能需要执行以下操作：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = {"com.bom"})
public class WebConfig extends WebMvcConfigurerAdapter {

    @Bean
    public RequestDataValueProcessor
    requestDataValueProcessor() {
        return new DOMRequestDataValueProcessor();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T09:46:39.307

```
@Bean(name = { "requestDataValueProcessor" })
public DOMRequestDataValueProcessor getRequestDataValueProcessor() {
final DOMRequestDataValueProcessor domRequestDataValueProcessor = new DOMRequestDataValueProcessor();
        return domRequestDataValueProcessor;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:44:23.180

您应该启用组件扫描。请参阅 Spring 文档：[http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)

```
<beans>
  <context:component-scan base-package="com.acme"/>
</beans> 
```

# linux - boost asio sockets 在 /proc/pid/fd 下不断弹出

> ID：14829123
> 
> 赞同：2
> 
> 时间：2013-02-12T09:18:32.977
> 
> 标签：linux, sockets, boost-asio

我确信套接字在我的应用程序中到处都是关闭的，并且我不断在我的 /proc/pid/fd/ 下获取这个新创建的 fd/socket 文件，这很正常。我确定不是。

**连接.cpp**

```
 connection::start() {
    socket_.set_option(boost::asio::ip::tcp::no_delay(true));
    boost::asio::socket_base::non_blocking_io command(true);
    socket_.io_control(command);

    read_header();

    longevity_timer_.start();

    // log_->debugStream() << "listening";
  }

void connection::stop() {
    cancel_timeout();

    boost::system::error_code ignored_ec;

    // initiate graceful connection closure & stop all asynchronous ops
    try {
      socket_.cancel();
      socket_.shutdown(boost::asio::ip::tcp::socket::shutdown_both, ignored_ec);
      if (ignored_ec)
      {
          log_->errorStream() << "shutdown: bad socket; couldn't close cleanly" << ignored_ec.message();    
      }
      socket_.close(ignored_ec);
      if (ignored_ec)
      {
          log_->errorStream() << "close: bad socket; couldn't close cleanly" << ignored_ec.message();    
      }
    } catch (std::exception& e) {
      log_->errorStream() << "bad socket; couldn't close cleanly";
    }
} 
```

**lsof -p pid**

```
dakwakd 20733 root   18u  IPv4 647843      0t0      TCP localhost:35654->localhost:amqp (ESTABLISHED)
dakwakd 20733 root   19u  IPv4 647969      0t0      TCP localhost:35695->localhost:amqp (ESTABLISHED)
dakwakd 20733 root   20u  IPv4 647599      0t0      TCP localhost:35543->localhost:amqp (ESTABLISHED)
dakwakd 20733 root   21u  IPv4 647634      0t0      TCP localhost:35567->localhost:amqp (ESTABLISHED) 
```

现在，每次我得到一个新的连接时，我都会确保在完成后停止它。但是 /proc/pid/fd/ 下的 fd/socket 文件仍然快速增长

我怎样才能确保我没有做错任何事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:40:28.030

尝试在 connection::start 的顶部设置断点。然后当它被命中时，通过调试器中的调用堆栈查看该方法在何处以及如何被调用，以确定它是否符合预期。

在 stop 方法中，尝试将 cancel_timeout() 移动到 try/catch 块中，因为如果它现在抛出，代码将不会捕获或记录错误。

尝试在 start 和 stop 的顶部添加对 log_->errorStream() 的调试调用。打印出 _socket 对象的地址——我假设它是唯一的，并为每个新连接在别处创建。确保对于 start 方法中的每个调试打印语句，在 stop 方法中可以看到相应的调试打印语句，并带有正确的 _socket 对象地址。我怀疑它们不会匹配，并且您的 stop 方法由于某种原因没有被正确调用。如果这是真的，那么您将需要调查和调试为什么您的 stop 方法没有被调用来关闭连接。

# opera - 每个窗口中的歌剧蜻蜓

> ID：14829125
> 
> 赞同：0
> 
> 时间：2013-02-12T09:18:39.487
> 
> 标签：opera, opera-dragonfly

如何在两个 Opera 窗口中获得两个单独的 Dragonfly 实例？现在，当我尝试在第二个窗口中加载 Dragonfly 时，虽然它已经在第一个窗口中打开，但 Opera 将专注于第一个窗口并在那里关闭 Dragonfly

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:39:43.100

不幸的是，由于 Opera Dragonfly 用于与浏览器对话的 Scope 协议的架构，目前无法实现。

然而，这是一个已知问题。

# oracle11g - 如何为 sqlplus /as sysdba 设置密码

> ID：14829126
> 
> 赞同：11
> 
> 时间：2013-02-12T09:18:47.260
> 
> 标签：oracle11g

我是甲骨文的新手。我想知道如何在 oracle 11g 中设置 sqlplus / as sysdba 的登录密码。

我想为下次登录设置密码，我不想以**sqlplus / as sysdba**身份登录， 因为任何人都可以使用 sqlplus / as sysdba 登录，并且可以轻松访问数据或更改现有用户的密码。我需要限制登录。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T12:30:44.160

要设置新密码，您应该（在连接到数据库之后）：

```
alter user SYS identified by "newpassword"; 
```

但是如果你想阻止没有密码的连接 - `sqlplus / as sysdba`，那么你需要添加这个：

```
SQLNET.AUTHENTICATION_SERVICES=none 
```

在[sqlnet.ora](http://docs.oracle.com/cd/B28359_01/network.111/b28317/sqlnet.htm#BIIDAFFD)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:38:47.653

Not just anyone can login using `sqlplus / as sysdba`. The OS user must be a member of the OS `DBA` group created to manage the database (this group can have a different name).

You should only be assigning real DBAs membership of this group. And, in my opinion, no one should ever login as `oracle` (assuming a Unix(-like) system here).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-24T12:18:03.943

```
SQLPLUS username/password@identifier_name 
```

# javascript - 如何使我的嵌套列表视图可折叠和可扩展

> ID：14829128
> 
> 赞同：0
> 
> 时间：2013-02-12T09:18:56.450
> 
> 标签：javascript, jquery, asp.net, css, ajax

我有一个这样的嵌套 ListView：

```
 <asp:ListView runat="server" ID="lvOuter" DataKeyNames="camp_code" OnItemDataBound="lvOuter_ItemDataBound">
                                    <LayoutTemplate>
                                        <ul>
                                            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
                                        </ul>
                                    </LayoutTemplate>
                                    <ItemTemplate>
                                        <li>
                                            <%# Eval("camp_name") %>
                                            <asp:HiddenField ID="hf_camp_code" runat="server" Value='<%# Eval("camp_code") %>' />
                                            <asp:ListView runat="server" ID="lvInner">
                                                <LayoutTemplate>
                                                    <ul>
                                                        <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
                                                    </ul>
                                                </LayoutTemplate>
                                                <ItemTemplate>
                                                    <li>
                                                        <asp:HiddenField ID="hf_main_code" runat="server" Value='<%# Eval("main_code") %>' />
                                                        <asp:HiddenField ID="hf_year" runat="server" Value='<%# Eval("year") %>' />
                                                        <asp:LinkButton ID="lbtn_dep" runat="server" CommandName="get_dep"><%# Eval("name") %> (<%# Eval("dep_count") %>)</asp:LinkButton>
                                                    </li>
                                                </ItemTemplate>
                                                <EmptyDataTemplate>
                                                    <ul>
                                                        <li>---</li>
                                                    </ul>
                                                </EmptyDataTemplate>
                                            </asp:ListView>
                                        </li>
                                    </ItemTemplate>
                                    <EmptyDataTemplate>
                                        ---
                                    </EmptyDataTemplate>
</asp:ListView> 
```

* * *

我想要做的是：在开始时折叠到外部列表视图并根据需求展开。

例如 ：

```
 - 1-OUTER1
      1.1 INNER1
      1.2 INNER2
      1.3 INNER3

   - 2-OUTER2
      2.1 INNER1
      2.2 INNER2
      2.3 INNER3 
```

我想要以下内容：

```
 +OUTER1
 +OUTER2 
```

* * *

如何使用我的嵌套来获得这种行为`ListView`？

* * *

# 从萤火虫：

```
<div>
<ul>
<li>
Computer
<input id="ctl00_ContentPlaceHolder1_lvOuter_ctrl0_hf_camp_code" type="hidden" value="1" name="ctl00$ContentPlaceHolder1$lvOuter$ctrl0$hf_camp_code">
<ul>
<li>
<input id="ctl00_ContentPlaceHolder1_lvOuter_ctrl0_lvInner_ctrl0_hf_main_code" type="hidden" value="1" name="ctl00$ContentPlaceHolder1$lvOuter$ctrl0$lvInner$ctrl0$hf_main_code">
<input id="ctl00_ContentPlaceHolder1_lvOuter_ctrl0_lvInner_ctrl0_hf_year" type="hidden" value="2012" name="ctl00$ContentPlaceHolder1$lvOuter$ctrl0$lvInner$ctrl0$hf_year">
<a id="ctl00_ContentPlaceHolder1_lvOuter_ctrl0_lvInner_ctrl0_lbtn_dep" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$lvOuter$ctrl0$lvInner$ctrl0$lbtn_dep','')">jm</a>
</li>
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:09:47.613

[http://jsfiddle.net/EsWv3/1/](http://jsfiddle.net/EsWv3/1/)

```
$("li.parent").click( function() {
    $(this).next(".child").toggle("fast");
}); 
```

我认为这对你有用

# java - 通过 JDBC 调用 Sybase 存储过程时的空结果集

> ID：14829130
> 
> 赞同：5
> 
> 时间：2013-02-12T09:18:57.893
> 
> 标签：java, jdbc, sybase

我正在调用通过 JDBC 返回多个结果集的 Sybase 存储过程。我需要获得一个特定的结果集，其中有一个名为“结果”的列这是我的代码：

```
CallableStatement cs = conn.prepareCall(sqlCall);
cs.registerOutParameter(1, Types.VARCHAR);
cs.execute();
ResultSet rs=null;
int count = 1;
boolean flag = true;
while (count < 20000 && flag == true) {
    cs.getMoreResults();
    rs = cs.getResultSet();
    if (rs != null) {
        ResultSetMetaData resultSetMetaData = rs.getMetaData();
        int columnsCount = resultSetMetaData.getColumnCount();
        if (resultSetMetaData.getColumnName(1).equals("Result")) {
            // action code resultset found 
            flag = false;
            // loop on the resultset and add the elements returned to an array list
            while (rs.next()) {
                int x = 1;
                while (x <= columnsCount) {
                   result.add(rs.getString(x));
                   x++;
                }
            }
            result.add(0, cs.getString(1));
        }
    }
    count++;
} 
```

这里发生的是`cs.getMoreResults`返回大量空结果集，直到它到达目标结果集。我不能`cs.getMoreResults`用作循环条件，因为它为空结果集返回 false。

我放了一个固定的数字来结束循环，条件是没有返回想要的结果集，以防止它进入无限循环。它工作得很好，但我认为这是不对的。

我认为从 Sybase 中的分配返回的空结果集`select @variable = value`

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T09:35:48.337

您误解了 的返回值`getMoreResults()`。您也忽略了 的返回值[`execute()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeQuery(java.lang.String))，此方法返回一个`boolean`指示第一个结果的类型：

*   `true`: 结果是`ResultSet`
*   `false`: 结果是更新计数

如果结果是`true`，则使用[`getResultSet()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getResultSet%28%29)检索`ResultSet`，否则[`getUpdateCount()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getUpdateCount%28%29)检索更新计数。如果更新计数是`-1`，则意味着没有更多结果。请注意，更新计数也将`-1`是当前结果为`ResultSet`. `getResultSet()`如果没有更多结果或者结果是更新计数（最后一个条件就是你得到这么多`null`值的原因） ，那么知道应该返回 null 也很好。

现在，如果您想检索更多结果，请调用[`getMoreResults()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getMoreResults%28%29)（或其兄弟接受`int`参数）。的返回值`boolean`与 的含义相同`execute()`，`false` *不代表没有结果*！

如果`getMoreResults()`返回 false 并`getUpdateCount()`返回，则只有没有更多结果`-1`（如 Javadoc 中所述）

本质上，这意味着如果您想正确处理所有结果，您需要执行以下操作：

```
boolean result = stmt.execute(...);
while(true) {
    if (result) {
        ResultSet rs = stmt.getResultSet();
        // Do something with resultset ...
    } else {
        int updateCount = stmt.getUpdateCount();
        if (updateCount == -1) {
            // no more results
            break;
        }
        // Do something with update count ...
    }
    result = stmt.getMoreResults();
} 
```

我的猜测是，在获得实际的`ResultSet`.

我对 Sybase 不是很熟悉，但是它的表亲 SQL Server 有一个“烦人”的特性，如果你没有明确地把存储过程放在`SET NOCOUNT ON;`开头，它就会从存储过程中返回更新计数。

注意：此答案的一部分基于我对[在 Java 应用程序中执行“sp_msforeachdb”的回答](https://stackoverflow.com/a/14694174/466862)

# javascript - 这个javascript“var ApplicationConfig = {”的工作原理

> ID：14829135
> 
> 赞同：-2
> 
> 时间：2013-02-12T09:19:09.923
> 
> 标签：javascript, json, jquery

在“ `var ApplicationConfig = {" and " ApplicationForm: { submitUrl: validateFieldUrl:processWindowUrl:rejectedUrl:`”工作怎么样

```
<script type="text/javascript">
    var ApplicationConfig = {
        mobile: false,
        messages: {"account_number_format_error":"4-30 digits are needed in the field &quot;Account Number&quot;"},
        ApplicationForm: {
            submitUrl: 'application-submit.php',
            validateFieldUrl: 'application-validate-field.php',
            processWindowUrl: 'application-process.php',
            rejectedUrl: 'page-reject.php'
        },
        multipartTextfieldContainer: '.dev-form-multipart-text-field',
        autocomplete: {
            url: 'application-autocomplete.php'
        },
        abTestValues: {"igf_frm_small":"1"}    };
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:22:45.610

那是一个[对象字面](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)量。

它是一种在定义属性和值的同时构造基本对象的方法。

```
var foo = { bar: baz; }; 
```

相当于：

```
var foo = new Object();
foo.bar = baz; 
```

# jar - JavaFX 许可证 - 在您的应用服务器上包含 javaFX jar 是否违反许可证？

> ID：14829137
> 
> 赞同：0
> 
> 时间：2013-02-12T09:19:14.267
> 
> 标签：jar, licensing, installation, javafx

所以我有一个通过 Java WebStart 启动的应用程序。它需要 javafx jar 才能正常工作。如果我将 javaFX jar 放在我的服务器上（以便在启动应用程序时可以下载它），许可证可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:53:38.313

我不确定许可证（应该可以提供包含 jre + javafx 的本机捆绑包），但对于 Java WebStart，推荐的方法是在客户端安装最新的 JRE，它附带 JavaFX。所以你不需要服务器上的 javafx jar。

但是，您应该在主 jar 中包含 JavaFX 启动类，并具有正确的 JavaFX Manifest 条目。但是由于Oracle提供的JavaFX Ant任务是将这些启动类复制到主jar中，所以我想使用它们是可以的。但我不是律师。

# javascript - 使用图像映射时鼠标悬停时图像闪烁javascript

> ID：14829140
> 
> 赞同：0
> 
> 时间：2013-02-12T09:19:34.053
> 
> 标签：javascript, jquery, html, css, image

我正在使用图像映射将一些图像悬停在滑块中，效果很好，但是在加载一次之前会闪烁，然后效果很好。任何人都知道为什么会这样？

顺便说一句，它只发生在 Firefox

```
<script>
    Image1 = new Image()
    Image1.src = "images/slide1aroll.jpg"
    function firstmap() {
        document.emp.src = Image1.src; 
        return true;
    }
</script>

<li style="width: 480px; height: 610px;"><img src="images/slide1a.jpg" name="emp" id="emp" class="emp" width="480" height="610" usemap="#model1" style="display:block; border:none;" border="0" /></li>
<map name="model1" id="model1" name="model1">
    <area shape="rect" coords="31,6,289,576" href="#" onmouseover="firstmap();" onmouseout="document.emp.src = 'images/slide1a.jpg';" alt=""/>
    <area shape="rect" coords="303,9,475,605" href="#" onmouseover="firstmap2();" onmouseout="document.emp.src = 'images/slide1a.jpg';" />
</map> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:33:43.753

图像闪烁，因为只要将鼠标悬停在图像上，就会更改图像的来源。因此，现在您的鼠标悬停在另一个图像上，而不是您想要的图像上。

一旦鼠标移到新加载的图像上，新图像就会被隐藏，因为您的鼠标现在没有悬停在旧图像上。在它被隐藏的那一刻，您的鼠标再次移到旧图像上，因此新图像再次可见。

该过程继续产生闪烁效果。旧图像 - 新图像 - 旧图像 ....等等

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:44:13.970

缓存图像

```
<div style="display: none">
    <img src="image1.png" />
    <img src="image2.png" />
    <img src="image3.png" />
</div> 
```

有了这个，你的所有图像都在第一时间出现。现在不会闪烁了。尝试一下

# php - PHP不再适用于html

> ID：14829144
> 
> 赞同：3
> 
> 时间：2013-02-12T09:19:51.907
> 
> 标签：php, html, apache, .htaccess, parsing

我有一个主要由 html 网页组成的网站。为了允许我在其中使用 php，在我的 .htaccess 文件中，我添加了一些解析代码。几天前 php 不知何故停止执行，我仍然不知道为什么。我搜索了一些东西并尝试了几种不同类型的解析代码，但似乎没有任何效果。目前我的 .htaccess 文件中有这一行：

AddType 应用程序/x-httpd-php .html .htm

我注意到一件事，php 在[http://turkishbasics.com （我的网站主页）上运行良好，但对于](http://turkishbasics.com)[http://turkishbasics.com/index.html](http://turkishbasics.com/index.html)或 /等任何其他目录都不起作用联系人.html

我联系了托管公司，那家伙提到了一些关于 Apache 的事情。？

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:24:11.957

如果您还没有听说过 Apache，那么这可能有点超出您的想象。跳过 AddType decleration，只需使用`.php`扩展名而不是保存文件`html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:22:29.403

要执行 php 代码，您需要将其写入 php 文件 (.php)。然后在服务器中执行文件。

您不能从 html 文件 (.html) 执行 php 代码

我猜当您执行[http://turkishbasics.com](http://turkishbasics.com)时，它需要从[http://turkishbasics.com/index.php](http://turkishbasics.com/index.php)

# c# - C#回调参数

> ID：14829145
> 
> 赞同：3
> 
> 时间：2013-02-12T09:19:54.520
> 
> 标签：c#

C# 有点生疏

我需要将回调传递给方法：

```
void InvokeScript(string jsScript, Action<object> resultCallback); 
```

在我的课堂上，我创建了一个方法来传递给该方法：

```
 public void callback(System.Action<object> resultCallback)
    { 

    } 
```

错误信息 1：

```
Resco.UI.IJavascriptBridge.InvokeScript(string, System.Action<object>)' has some invalid arguments 
```

错误消息 2：

```
cannot convert from 'method group' to 'System.Action<object>' 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:23:54.770

您的回调应该是：

```
public void callback(object value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:23:43.643

您需要将参数设为您传递的`object`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:25:45.277

尝试

```
Action<object> myCallBack = delegate
{
// do something here
};

    InvokeScript("some string", myCallBack); 
```

方法委托需要接受一个`object`并且不返回任何值。就是这个`Action<object>`意思。您可以使用我展示的内置`Action`委托，或者您可以创建一个新方法并将其作为委托传递：

```
public void MyMethod(object myParameter)
{
    // do something here.
}

InvokeScript("some string", MyMethod); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:26:20.103

您可以创建一个与`Action<object>`委托签名匹配的方法，例如

```
public void someMethod(object parameter) { } 
```

然后传递它，
或者您可以使用 lambda：

```
InvokeScript("stuff", 
    param => { 
        Blah(param); 
        MoreBlah();
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T09:29:05.947

回调的签名应该如下：

```
void MethodName(object parameter); 
```

即使不创建单独的方法，您也可以使用[lambda 表达式：](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

```
InvokeScript(
    "some string",
    p =>
    {
        // the callback's logic
    }); 
```

# objective-c - 在 iPhone 4s 横向模式下未启用 textview 中的链接

> ID：14829146
> 
> 赞同：1
> 
> 时间：2013-02-12T09:19:57.950
> 
> 标签：objective-c, ios5

我在 UITextView 中显示一些文本，给定文本中有一个邮件 ID，所以我启用了检测链接属性。这在 iPhone 3GS 中的两个方向都可以正常工作，但在 iPhone 4s 横向模式下没有检测到链接。谁能帮我。

提前致谢

# head.js - head.js：在加载所有 js 文件之前调用 head.ready()？

> ID：14829149
> 
> 赞同：2
> 
> 时间：2013-02-12T09:20:05.593
> 
> 标签：head.js

我在 some.js 中声明了由 head.js 加载的对象，并且在 head.ready(function(){}) 中我需要向对象添加一些内容。但是在 Explorer 10（有时在其他浏览器中）控制台中说对象未定义。

我认为 head.ready(function(){}) 有时会在加载 js 文件之前调用。

有人有同样的行为吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:34:20.747

我有完全相同的行为。我正在运行 IE9 和 0.99 版的 headjs。由 head.js 加载的脚本会被加载两次，并且 head.ready 函数确实在加载任何其他脚本之前被调用。这似乎与 Internet Explorer（版本 9？）有关。在 Chrome 和 Firefox 中，它按预期工作。

# sql - 我的查询应该是什么样子？

> ID：14829154
> 
> 赞同：1
> 
> 时间：2013-02-12T09:20:27.190
> 
> 标签：sql, sql-server, sql-server-2008, tsql, group-by

我使用 SQL Server 2008 并处理一个表，我将数据分组在一列上。由于某些原因，我必须使用`GROUP BY`代替`DISTINCT`（它是更复杂查询的一部分）。查询结果（只返回一列）对我来说很好。

问题是，我想将此查询用作子查询中的子查询，`WHERE`以根据此子查询过滤数据。如我所见，`WHERE`子查询在此子查询中不仅可以看到分组后查询结果中显示的数据，还可以看到其余数据，这是我不喜欢的。

我的问题是，如何将我的`group by`查询用作 where 子句中的子查询，在分组后只能看到结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:25:39.503

我猜您的问题是您的主查询为`WHERE`子查询中的每个项目返回多行。这是正确的行为。为了限制您的主查询中的结果，您必须使用`DISTINCT`或`GROUP BY`在主查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:58:53.410

您可以使用子查询从现有子查询中选择所需的列。然后将这个新的子查询作为输入传递给`where`子句。

# html - HTML5 渲染性能报告

> ID：14829157
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:20:36.677
> 
> 标签：html, performance

是否有任何工具可以提供有关 HTML5**渲染**的性能报告。如果是这样，该工具可以在开发完成后立即自动化，并且用户可以获得性能报告，以便他可以将其与以前的值进行比较。

我们需要该工具来获取 NFR 指标以进行基准测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:54:36.903

HTML5 支持 WebTimings API，但这很好地介绍了该主题：[http](http://www.yottaa.com/blog/bid/215492/Using-Web-Timing-API-To-Measure-Page-Performance) ://www.yottaa.com/blog/bid/215492/Using-Web-Timing-API-To-Measure-Page-Performance 。

[在http://webtimingdemo.appspot.com/](http://webtimingdemo.appspot.com/)有一个 Chrome 演示

# c++ - C++中函数指针的默认值

> ID：14829158
> 
> 赞同：6
> 
> 时间：2013-02-12T09:20:50.123
> 
> 标签：c++, function-pointers

C++中函数指针的默认值是多少？（显然不可能`NULL`，那是什么？）

这个程序应该如何表现，为什么？

```
struct S { void (*f)(); };

int main()
{
    S s = S();
    s.f();   // What is the value of s.f?
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T09:48:09.357

首先，*任何*指针都可以为空。这是关于指针的一个普遍真理。也就是说，您的*将*是空的，但不一定出于您可能认为的原因；

> **C++11 § 8.5,p10**
> 
> 初始值设定项为空括号集的对象，即**()**，应进行**值初始化**。

这很重要，因为您的声明包括以下内容：

```
S s = S(); 
```

通过*值初始化*的定义：

> **C++11 § 8.5,p7**
> 
> 对 T 类型的对象进行值初始化意味着：
> 
> *   如果 T 是具有用户提供的构造函数 (12.1) 的（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化格式错误） ;
>     
>     
> *   如果 T 是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象是**零初始化**的，并且如果 T 的隐式声明的默认构造函数是非平凡的，则调用该构造函数。
>     
>     
> *   如果 T 是一个数组类型，那么每个元素都是值初始化的；
>     
>     
> *   否则，对象被**零初始化。**

这给我们带来了零初始化的对象类型意味着什么：

> **C++11 § 8.5,p5**
> 
> 对 T 类型的对象或引用进行零初始化意味着：
> 
> *   如果 T 是标量类型（3.9），则将对象设置为值 0（零），作为整数常量表达式，转换为 T [（103）]
>     
>     
> *   如果 T 是（可能是 cv 限定的）非联合类类型，则**每个非静态数据成员和每个基类子对象都**被初始化为零并且填充被初始化为零位；
>     
>     
> *   如果 T 是（可能是 cv 限定的）联合类型，则对象的第一个非静态命名数据成员被零初始化，填充被初始化为零位；
>     
>     
> *   如果 T 是数组类型，则每个元素都初始化为零；
>     
>     
> *   如果 T 是引用类型，则不执行初始化。
>     
>     
> 
> 103) 如 4.10 所述，将值为 0 的整型常量表达式转换为指针类型会产生**空指针值**。

后者是您的指针为空的原因。给定相同代码的标准将*无法*保证，但将声明更改为`s`：

```
S s; 
```

给定像上面这样的声明，通过标准采用不同的路径：

> **C++11 § 8.5,p11**
> 
> 如果没有为对象指定初始化器，则该对象是**默认初始化的**；如果不执行初始化，则具有自动或动态存储持续时间的对象具有不确定的值。[ 注意：具有静态或线程存储持续时间的对象是零初始化的，请参见 3.6.2。

然后引出了最后一个问题，什么是*默认初始化*：

> **C++11 § 8.5,p6**
> 
> 默认初始化 T 类型的对象意味着：
> 
> *   如果 T 是（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是错误的）；
>     
>     
> *   如果 T 是数组类型，则每个元素都是默认初始化的；
>     
>     
> *   否则，不执行初始化。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T09:26:18.013

在您的情况下，对象`s`是零初始化的，这意味着函数指针是`NULL`.

```
struct S { void (*f)(); };

int main()
{
    S s = S();
    if ( s.f == NULL)
       std::cout << "s.f is NULL" << std::endl;
} 
```

输出：

```
s.f is NULL 
```

[在线演示](http://stacked-crooked.com/view?id=e8c6c3e1874a2c1883c50da3589a59a2)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T09:25:53.587

函数指针可以为NULL，这样你就可以表明它们不指向任何东西！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-12T09:29:02.420

函数指针可以为 NULL，您可以将 NULL 分配给它。看看[这里](http://ideone.com/5COrgw)例如：

```
#include <iostream>

using namespace std;

struct S { void (*f)(); };

int main()
{
    S s = S();
    s.f = NULL;
    return 0;
} 
```

我相信你调用结构的构造函数的方式（带`()`），f 将是 NULL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T09:24:43.467

*在 C++（和 C）中，指针（无论类型如何）本身*没有默认值；他们把当时发生在记忆中的东西拿走。但是，它们确实有一个默认的初始化值`NULL`。

### 默认初始化

当您没有显式定义构造函数时，C++ 将调用每个成员变量的默认初始化程序，这将初始化指向`0`. 但是，如果您定义了构造函数，但不为指针设置值，则它没有默认值。整数、浮点数和双精度数的行为相同。

**在旁边**

```
int main()
{
    S s = S();
    s.f();   // <-- This is calling `f`, not getting the pointer value.
} 
```

# php - JSON / PHP：带有[]的Json_encode

> ID：14829159
> 
> 赞同：-2
> 
> 时间：2013-02-12T09:20:53.630
> 
> 标签：php, json

我想用 PHP 编写这个请求，但我不知道如何在我的 PHP 请求中翻译 [,] ：

JSON：

```
{
    "output": "extend",
    "filter": {
        "host": [
            "Zabbix server",
            "Linux server"
        ]
    }
} 
```

PHP：

```
array(
    'output' => 'extend',
    'filter' => array (
        'host' => ???
            "Zabbix server",
            "Linux server"
        ???
    )
) 
```

你能帮我么 ？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:22:20.000

不要重新安装轮子。`json_decode()`用来做这项工作：[http](http://www.php.net/manual/en/function.json-decode.php) : //www.php.net/manual/en/function.json-decode.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:24:28.077

```
array(
    'output' => 'extend',
    'filter' => array (
        host => array(
            "Zabbix server",
            "Linux server"
        )
    )
) 
```

您可以使用`$arry = json_decode($json_string,true);`which 将为您提供数组作为输出

# vb.net - 算术运算导致溢出。

> ID：14829160
> 
> 赞同：-2
> 
> 时间：2013-02-12T09:20:55.190
> 
> 标签：vb.net

我正在制作一个程序，可以消除十六进制编辑旧 DOS 游戏（明智的足球世界）的痛苦。

该计划取消了您可以购买的球员数量限制 (5)，取消了您可以竞争的最大赛季数 (20)。

我正在尝试这样做，以便您也可以编辑传输预算，但是`Arithmetic operation resulted in an overflow.`当我运行代码选择 5000 万选项时出现错误。

这是我的程序的完整代码（转移限制和最大季节限制都有效）：

```
Imports System.IO

Public Class Swos_Editor_2013

    Dim transferbudget As String

    Private Sub OpenToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles OpenToolStripMenuItem.Click
    '#########
    '#WARNING#
    '#########
    'Dim answer As DialogResult
    'answer = MessageBox.Show("Make a Backup of your career file then click OK to proceed.  I take no responsibility for damaged career files",
    '                             "*PLEASE READ BEFORE PROCEEDING*", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)

    '##########################
    '#Progress bar set options#
    '##########################
    ProgressBar1.Minimum = 0
    ProgressBar1.Maximum = 2
    ProgressBar1.Value = 0

    '##################
    '#tool tip options#
    '##################
    Dim toolTip1 As New ToolTip

    toolTip1.AutoPopDelay = 5000
    toolTip1.InitialDelay = 1000
    toolTip1.ReshowDelay = 500
    ToolTip1.ShowAlways = True

    '###################################
    '#Open Swos career file for editing#
    '###################################
    Me.OpenFileDialog1.InitialDirectory = "c:\"
    Me.OpenFileDialog1.Title = "Select Career File for editing"
    Me.OpenFileDialog1.DefaultExt = "*.car"
    Me.OpenFileDialog1.FileName = ""
    Me.OpenFileDialog1.Filter = "Career File(*.car)|*.car"
    Me.OpenFileDialog1.Multiselect = False

    '###################
    '#OK button pressed#
    '###################
    If Me.OpenFileDialog1.ShowDialog() = Windows.Forms.DialogResult.OK Then

        '##############################
        '#increase progress bar to 50%#
        '##############################

        If ProgressBar1.Value < ProgressBar1.Maximum Then
            ProgressBar1.Value += 1
        End If

        '################
        '#Enable buttons#
        '################

        btn_save.Enabled = True
        btn_trans_limit.Enabled = True
        btn_career_limit.Enabled = True
        cb_combo.Enabled = True
    End If
End Sub
'#######################
'#Enable combo box drop#
'#######################
Private Sub cb_combo_CheckedChanged(ByVal sender As Object, e As EventArgs) Handles cb_combo.CheckedChanged
    ComboBox1.Enabled = True
End Sub
'########################
'#Select Transfer Budget#
'########################
Private Sub ComboBox1_DropDownClosed(ByVal sender As Object, e As EventArgs) Handles ComboBox1.DropDownClosed

    Select Case ComboBox1.SelectedItem
        Case Is = "-£10 million (are you crazy CHALLENGE)"
            transferbudget = "100"
        Case Is = "-£2 million (mid level CHALLENGE)"
            transferbudget = "200"
        Case Is = "-£500k (lower league CHALLENGE)"
            transferbudget = "500"
        Case Is = "£500k (tough)"
            transferbudget = "05"
        Case Is = "£5 million"
            transferbudget = "5"
        Case Is = "£10 million"
            transferbudget = "10"
        Case Is = "£25 million"
            transferbudget = "25"
        Case Is = "£50 million"
            transferbudget = "50000000"
        Case Is = "£99 million"
            transferbudget = "999"                        
    End Select
End Sub
'#######################################
'#exit if EXIT is clicked from dropdown#
'#######################################
Private Sub ExitToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles ExitToolStripMenuItem.Click
    Me.Close()
End Sub
'#######################
'#Not got a bloody clue#
'#######################
Private Shared Function InlineAssignHelper(Of T)(ByRef target As T, value As T) As T
    target = value
    Return value
End Function
'##################################################################
'#Apply changes made to drop down box AND radio button IF selected#
'##################################################################
Public Sub SaveChanges()
    Dim amount As Integer
    Dim fpath As String = OpenFileDialog1.FileName

    Using stream = New FileStream(fpath, FileMode.Open, FileAccess.ReadWrite)
        Dim result As Integer = 0
        Dim buffer As Byte() = New Byte(3) {}

        stream.Position = 54748
        If (stream.Read(buffer, 0, 4) <> 4) Then
            Throw New Exception(("Didn't read 4 bytes when it should have: " _
                            + (result + "bytes read")))
        End If

        stream.Position = &HD5DC

        buffer = BitConverter.GetBytes(amount)

        stream.Write(buffer, 0, 4)
        stream.Position = &HD880
        If btn_career_limit.Checked Then
            stream.WriteByte(0)
        Else
            stream.WriteByte(1)
        End If

        stream.Position = &HD5C4
        If btn_trans_limit.Checked Then
            stream.WriteByte(&HFF)
        Else
            stream.WriteByte(0)
        End If

        'stream.Write(buffer, 0, 4)
        'stream.Position = &HD5DC
        'If testbutton.Checked Then
        '    stream.WriteByte("3B9AC9FF")
        'End If

        **If cb_combo.Checked = True Then
            stream.Position = &HD5DC
            stream.WriteByte(transferbudget)  ######this is where i get the overflow error#####**
        End If
    End Using
End Sub
'###############################################
'#Save above changes & set progress bar to 100%#
'###############################################

Private Sub btn_save_Click(sender As Object, e As EventArgs) Handles btn_save.Click
    SaveChanges()

    If ProgressBar1.Value < ProgressBar1.Maximum Then
        ProgressBar1.Value += 1
    End If
End Sub
'#########################################################################################################################################
'#                                                              TOOL TIP (MOUSE HOVER)                                                   #
'#                                                                                                                                       #
Private Sub btn_trans_limit_CheckedChanged(sender As Object, e As EventArgs) Handles btn_trans_limit.MouseHover
    '#
    ToolTip1.SetToolTip(btn_trans_limit, "Removes 5 player transfer limit")                                                             '#
End Sub
Private Sub btn_career_limit_CheckedChanged(sender As Object, e As EventArgs) Handles btn_career_limit.MouseHover                       '#
    '#                                                                                                                                  '#
    ToolTip1.SetToolTip(btn_career_limit, "Removes 20 season limit")                                                                    '#
End Sub
Private Sub ComboBox1_MouseHover(sender As Object, e As EventArgs) Handles ComboBox1.MouseHover                                         '#
    '#                                                                                                                                  '#
    ToolTip1.SetToolTip(ComboBox1, "Select Transfer Budget")                                                                            '#
End Sub
Private Sub btn_save_MouseHover(sender As Object, e As EventArgs) Handles btn_save.MouseHover                                           '#
    '#                                                                                                                                  '#
    ToolTip1.SetToolTip(btn_save, "Save changes to your career file")
End Sub
Private Sub cb_combo_MouseHover(sender As Object, e As EventArgs) Handles cb_combo.MouseHover                                           '#
    '#                                                                                                                                  '#
    ToolTip1.SetToolTip(cb_combo, "tick if you want to edit transfer budget")                                                           '#
End Sub

'#########################################################################################################################################
End Class 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:46:03.417

您正在将`String`( `transferbudget`) 传递给该`FileStream.WriteByte`方法。该`WriteByte`方法采用 a `Byte`，而不是 a `String`。如果你有`Option Strict On`，你应该这样做，这将导致编译错误。但是，由于您拥有`Option Strict Off`，它允许您编译并自动为您插入类型转换 from `String`to `Byte`。`Byte`如果字符串中的值超出 a (0 - 255)的最小值和最大值，则类型转换操作将引发溢出异常。这是您设置`transferbudget`变量的代码：

```
Select Case ComboBox1.SelectedItem
    Case Is = "-£10 million (are you crazy CHALLENGE)"
        transferbudget = "100"
    Case Is = "-£2 million (mid level CHALLENGE)"
        transferbudget = "200"
    Case Is = "-£500k (lower league CHALLENGE)"
        transferbudget = "500"  'GAH!
    Case Is = "£500k (tough)"
        transferbudget = "05"
    Case Is = "£5 million"
        transferbudget = "5"
    Case Is = "£10 million"
        transferbudget = "10"
    Case Is = "£25 million"
        transferbudget = "25"
    Case Is = "£50 million"
        transferbudget = "50000000"  'GAH!
    Case Is = "£99 million"
        transferbudget = "999"  'GAH!            
End Select 
```

如您所见，那里有几个大于 255 的值。

# c - c、如何使用 ptrace 命令获取线程局部变量的偏移量？

> ID：14829162
> 
> 赞同：0
> 
> 时间：2013-02-12T09:21:04.317
> 
> 标签：c, multithreading, gdb, local, ptrace

这里我们尝试修改我们自己的 GDB 版本以支持多线程环境。

到目前为止，我可以读取与每个线程相关的寄存器相关数据，但需要找出读取线程局部变量的方法。

为了读取线程局部变量，我需要知道如何使用 ptrace 命令计算偏移量。如果这里有人知道这对我真的很有帮助。

=谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:33:37.680

ptrace(2) 不支持 TLS（线程本地存储）。

了解 GDB 如何处理进程管理问题总是一个好主意。在这种情况下，[GDB 使用 libthread_db](http://www.sourceware.org/gdb/onlinedocs/gdb/Threads.html)。这是一个库（[手册页](http://man.cx/libthread_db%283%29)），根据（特定于平台的）API 管理对 TLS 的访问。

有关如何在 Linux 中实现 TLS 的详细信息，请参阅 Ulrich Drepper 的[Elf Handling for Threading Local Storage 。](http://www.akkadia.org/drepper/tls.pdf)

# c# - 如何在 Win7 中断开蓝牙设备与 C# .Net 的连接

> ID：14829164
> 
> 赞同：2
> 
> 时间：2013-02-12T09:21:05.073
> 
> 标签：c#, .net, bluetooth, pinvoke, deviceiocontrol

我想从我的 c# .Net 应用程序中断开蓝牙设备，该应用程序在 Win 7 x64 上运行。

我知道 MS 在 .Net 上提供的保护 BT 的功能很少。

我搜索了 32feet.Net，发现了如何连接、发现、获取信息……但没有关于断开连接（我错过了什么吗？）。

然后，我在[Msdn IOCTL_BTH_DISCONNECT_DEVICE](http://msdn.microsoft.com/en-us/library/windows/hardware/ff536682%28v=vs.85%29.aspx)上找到了。问题是我无法理解如何调用它。看来我应该将[DeviceIOControl](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216%28v=vs.85%29.aspx)与 Platform Invoke 一起使用，但恐怕我没有足够的 .Net 技能来自己构建它。

这是我现在的位置：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using Microsoft.Win32.SafeHandles;
using System.IO;

namespace BtDisco
{
    class Program
    {
        const int IOCTL_BTH_DISCONNECT_DEVICE = 0x41000c;

        [DllImport("Kernel32.dll", SetLastError = false, CharSet = CharSet.Auto)]
        public static extern bool DeviceIoControl(
            Microsoft.Win32.SafeHandles.SafeFileHandle hDevice,
            uint dwIoControlCode,
            [MarshalAs(UnmanagedType.AsAny)] [In] object InBuffer,
            uint nInBufferSize,
            [MarshalAs(UnmanagedType.AsAny)] [Out] object OutBuffer,
            uint nOutBufferSize,
            ref uint pBytesReturned,
            [In] ref System.Threading.NativeOverlapped Overlapped
            );

        [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern SafeFileHandle CreateFile(
            string lpFileName,
            [MarshalAs(UnmanagedType.U4)] FileAccess dwDesiredAccess,
            [MarshalAs(UnmanagedType.U4)] FileShare dwShareMode,
            IntPtr lpSecurityAttributes,
            [MarshalAs(UnmanagedType.U4)] FileMode dwCreationDisposition,
            [MarshalAs(UnmanagedType.U4)] FileAttributes dwFlagsAndAttributes,
            IntPtr hTemplateFile);

        static void Main(string[] args)
        {
            //http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216(v=vs.85).aspx
            //hDev = Use CreateFile
            SafeFileHandle _hdev = CreateFileR(...);

            DeviceIoControl(hDev, IOCTL_BTH_DISCONNECT_DEVICE, char[] btAddr, btAddr.Length(), result, result.Length(), ref getCnt, IntPtr.Zero);
        }
    }
} 
```

有人可以帮我完成这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:14:08.590

终于，我自己搞定了！

我在 InTheHand.Net 代码中搜索了更多内容，终于明白了如何制作它！

这是一些工作代码（如果你想使用它，你将需要 InTheHand.Net）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Globalization;
using System.Text;
using InTheHand.Net;
using InTheHand.Net.Bluetooth;
using System.Runtime.InteropServices;

namespace BTDisco2
{
    class Program
    {
        const int IOCTL_BTH_DISCONNECT_DEVICE = 0x41000c;
        [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        internal static extern bool DeviceIoControl(
        IntPtr hDevice,
        uint dwIoControlCode,
        ref long InBuffer,
        int nInBufferSize,
        IntPtr OutBuffer,
        int nOutBufferSize,
        out int pBytesReturned,
        IntPtr lpOverlapped);

        static void Main(string[] args)
        {
            var r = BluetoothRadio.PrimaryRadio;
            var h = r.Handle;
            long btAddr = BluetoothAddress.Parse("00:1b:3d:0d:ac:31").ToInt64();
            int bytesReturned = 0;
            var success = DeviceIoControl(h,
            IOCTL_BTH_DISCONNECT_DEVICE,
            ref btAddr, 8,
            IntPtr.Zero, 0, out bytesReturned, IntPtr.Zero);

            if (!success)
            {
                int gle = Marshal.GetLastWin32Error();
                Console.WriteLine(string.Format(CultureInfo.InvariantCulture, "failure: {0} = 0x{0:X}.", gle));
            }
            else
            {
                Console.WriteLine("Success !");
            }
            while (!Console.KeyAvailable) System.Threading.Thread.Sleep(200);
        }
    }
} 
```

# jquery-ui - 在 Angular 指令中使用多个日期选择器

> ID：14829165
> 
> 赞同：4
> 
> 时间：2013-02-12T09:21:06.643
> 
> 标签：jquery-ui, angularjs, angularjs-directive

我在 angular 指令中使用了多个 datepicker，它给了我一个错误 **Uncaught Missing instance data for this datepicker**因为如果我删除了一个 li 那么它不会在指令中设置 id。

指令.js

```
app.directive('datepicker', function () {
  return {
    link: function($scope, element, attrs) {
    setTimeout(function() {
            $("#"+attrs.id).live('focus',function(){
                console.log(attrs.id);
             });
     });
   }
} 
```

索引.html

```
<tr ng-repeat="payment in invoice.payment" id="payment">
    <td>
        <input class="payment_date" id="{{$index}}" placeholder="Payment Date" type="text" ng-model="payment.date" datepicker/>
        <br />
    </td>
</tr> 
```

如何在directive.js 中设置ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:45:43.010

我想您想知道何时可以“获取”（而不是“设置”）指令中的 ID。以下是如何做到这一点：

```
app.directive('datepicker', function () {
  return {
    link: function($scope, element, attrs) {
      element.bind('focus', function (){
        console.log(attrs.id);
      });
    }
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:03:09.757

Have you looked at using [AngularUI](http://angular-ui.github.com/)? Then you can use the JQuery passthrough without having to create your own directive (I also added ui-options as an example in case you decide to use it). Here is what it would look like:

```
<input class="payment_date" ui-jq="datepicker" ui-options="{dateFormat:'dd-mm-yy'}" placeholder="Payment Date" type="text" ng-model="payment.date" /> 
```

As for putting an ID on it, I am not sure why you would need one. If you want to get the value of a selected date, instead of doing this:

```
var myDate = $("#"+myIndex).val(); 
```

You should do this:

```
var myDate = invoice.payment[myIndex].date; 
```

That is the beauty of angular, no need to use the DOM here. Let me know if you have any questions and I will be happy to answer them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:28:33.620

您应该查看[http://docs.angularjs.org/guide/directive#Attributes](http://docs.angularjs.org/guide/directive#Attributes)。在链接阶段，它尚未定义。

另外，我认为您不需要使用 ID 选择器，因为您只需`element`在链接功能中附加您的事件。

# c++ - 在 xcode 4.6 中构建，但使用命令行失败

> ID：14829166
> 
> 赞同：3
> 
> 时间：2013-02-12T09:21:10.567
> 
> 标签：c++, macos, clang, xcode4.6

当我从 Xcode4.6 运行以下代码片段时，它可以编译并运行良好。但是当我尝试使用命令行工具（clang++）编译它时，它却失败了。

```
#include <iostream>
#include <memory>

int main(int argc, const char * argv[])
{

    std::unique_ptr<int> foo(new int(0));

    // insert code here...
    std::cout << "Hello, this is cool giri World!\n";
    return 0;
} 
```

这是编译日志：

```
$ clang --version
Apple LLVM 版本 4.2 (clang-425.0.24) (基于 LLVM 3.2svn)
目标：x86_64-apple-darwin12.2.0
线程模型：posix

$ clang++ main.cpp -stdlib=libc++ -I /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/ -I /usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/include/
main.cpp:7:10：错误：命名空间“std”中没有名为“unique_ptr”的成员
    std::unique_ptr foo(new int(0));
    ~~~~~^
main.cpp:7:24: 错误：对于函数式强制转换或类型构造，预期为 '('
    std::unique_ptr foo(new int(0));
                    ~~~^
main.cpp:7:26：错误：使用未声明的标识符“foo”
    std::unique_ptr foo(new int(0));
                         ^
产生 3 个错误。

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:07:04.967

尝试使用 clang 自己的标准库：

```
clang -std=c++11 -stdlib=libc++ main.cpp 
```

默认是 GNU 的标准库 ( `libstdc++`)，但 Apple 包含的版本相当旧，并且不支持 C++11。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:46:56.380

您可以自行查找 Xcode 使用的命令行。

1.  在 Xcode 中构建您的项目。
2.  切换到日志视图。它的图标看起来像一个气泡，里面有几行。
3.  单击最新版本。
4.  构建步骤列表将显示在主编辑区域中。右键单击“编译 main.cpp”并选择“复制成绩单以显示结果”。
5.  将其粘贴到您最喜欢的文本编辑器中，以查看 Xcode 用于构建项目的确切命令行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:39:59.470

感谢大家向我提出解决方案，让我继续前进。

最后，这对我有用。

[我使用http://www.cocoanetics.com/2012/07/you-dont-need-the-xcode-command-line-tools/](http://www.cocoanetics.com/2012/07/you-dont-need-the-xcode-command-line-tools/)中提到的 shell 脚本卸载了命令行工具
，然后使用了 $xcode-select -switch / Applications/Xcode.app/Contents/Developer/ 设置 xcode 版本。最后使用 $xcrun clang++ main1.cpp -stdlib=libc++

编译我的代码。

这工作得很好。谢谢！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T00:50:22.060

确保您正在为编译器*和*链接器调用`clang++`，而不是。`clang`

 *`clang++`（作为编译器）需要`-std=c++11`和`-stdlib=libc++` *编译器*标志，并且`clang++`（作为链接器）需要`-stdlib=libc++` *链接器*标志。*

# php - Wordpress 多站点中的单点登录

> ID：14829167
> 
> 赞同：3
> 
> 时间：2013-02-12T09:21:10.470
> 
> 标签：php, wordpress, login, single-sign-on, sign

我有 site.com、blog1.site.com、blog2.site.com 等，使用单一数据库安装为 WP Multisite。从网络访问任何其他站点时，如何使登录我的站点之一的同一用户自动登录？

我已经尝试过前端 SSO 插件，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T20:18:45.243

[WPMU Domain Mapping](http://premium.wpmudev.org/project/domain-mapping/) plugin can do it. It allows you to map domains to your network sites and do **single sign on** for all sites available for an user.

Pay attention that this plugin is not free.

# c# - 使用字符串分配角色 >> 违反 PRIMARY KEY 约束

> ID：14829173
> 
> 赞同：0
> 
> 时间：2013-02-12T09:21:33.993
> 
> 标签：c#, asp.net

我有以下代码：

```
 var roleEditionCNT = new Role { ApplicationName = "TTT", RoleName = "EDITION_CNT" };
            var roleEditionKCD = new Role { ApplicationName = "TTT", RoleName = "EDITION_KCD" };
            var roleEditionInterne = new Role { ApplicationName = "TTT", RoleName = "EDITION_INTERNE" };
            var roleConsultationInterne = new Role { ApplicationName = "TTT", RoleName = "CONSULTATION_INTERNE" };
            var roleConsultationExterne = new Role { ApplicationName = "TTT", RoleName = "CONSULTATION_EXTERNE" };
            var roleAdministrator = new Role { ApplicationName = "TTT", RoleName = "ADMINISTRATOR" };

            new List<Role>
                {
                    roleEditionCNT,
                    roleEditionKCD,
                    roleEditionInterne,
                    roleConsultationInterne,
                    roleConsultationExterne,
                    roleAdministrator
                }.ForEach(b => context.Roles.AddOrUpdate(m => m.RoleName, b)); 
```

然后我可以这样做：

```
var myUser = new User
      {
        Company = "DELTOY",
        FirstName = "BRYAN",
        LastName = "KENETH",
        Roles = new List<Role> { roleEditionCNT }
      }; 
```

现在我想修改我分配角色的方式，如下所示：

```
var myUser = new User
      {
        Company = "DELTOY",
        FirstName = "BRYAN",
        LastName = "KENETH",
        Roles = new List<Role> { new Role { ApplicationName = "TTT", RoleName = "EDITION_CNT" } }
      }; 
```

此代码编译成功，但在运行时出现错误：

> 违反 PRIMARY KEY 约束“PK_Roles”。无法在对象“dbo.Roles”中插入重复键

通过简单地修改上面的代码，系统似乎正在尝试向表 Roles 添加一条新记录。我怎样才能简单地分配角色但不使用变量。我更喜欢给角色名加上一个字符串。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:34:11.203

在第二个示例中，您尝试添加具有新角色的用户，而不是将其分配给现有角色。您尝试添加的角色已存在于角色表中。

您可以将 Role 对象放入变量中。

```
var role = context.First(p => p.RoleName == "EDITION_CNT"); 
```

然后将其分配给新用户。

```
var myUser = new User
      {
        Company = "DELTOY",
        FirstName = "BRYAN",
        LastName = "KENETH",
        Roles = new List<Role> { role } 
      }; 
```

# android - 安卓应用测试

> ID：14829175
> 
> 赞同：0
> 
> 时间：2013-02-12T09:21:41.837
> 
> 标签：android

我想更改设备的方向，setRequestedOrientation 在不包含 changeConfig="orientation" 时有效。但是如果我的应用程序使用这种配置，请提出一种方法。

此外，如果这可以通过命令行 adb 完成（并且在不在模拟器上的设备上），那将是更可取的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:42:41.257

这用于设置布局方向

AndroidManifest -> 应用程序-> 屏幕方向。

转到AndroidManifest选择应用程序选项卡选择，您要设置方向的活动在右侧有一个选项屏幕方向选择它作为您的需要。

# wordpress - WP―启动媒体库的按钮

> ID：14829177
> 
> 赞同：0
> 
> 时间：2013-02-12T09:21:51.090
> 
> 标签：wordpress, wordpress-theming

我正在创建一个 wordpress 插件，我想让用户能够使用媒体库中的图像。例如：主题配置的 »header« 部分中的 »Choose Image« 按钮正是我想要的。

我可以调用任何wordpress方法来生成这样的按钮吗？

问候菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:51:43.890

您尝试完成的工作尚不清楚，使用所有图像是一回事，并为他们提供使用 wordpress 上传器的选项是一回事。

不建议给他们最后一个选项，因为他们可以不受控制地滥用您的系统。

要查看可以使用此函数的所有图像，请返回一个数组：

```
function get_all_images(){
    $args = array(
        'post_type' => 'attachment',
        'post_mime_type' =>'image',
        'post_status' => 'inherit',
        'posts_per_page' => -1,
    );
    $query = new WP_Query( $args );
    $images = array();
    foreach ( $query->posts as $image) {
        $images[]= wp_get_attachment_url($image->ID);
    }
    return $images;
} 
```

# html - html：在浏览器中打开pdf和png，不要下载

> ID：14829179
> 
> 赞同：1
> 
> 时间：2013-02-12T09:21:54.147
> 
> 标签：html, browser, png

html页面上的代码是：

```
<a href="getReport.php?id=123">View report in a new window</a> 
```

一旦任何用户点击它，它就会被他的浏览器下载（它是一个 .png 文件）并且他能够查看它。

我们怎样才能让它在新窗口中打开**呢**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:27:08.680

在锚标记中给出 PDF 嵌入页面的 URL，在 PDF 嵌入页面中，尝试 iFrame 显示 PDF，它将起作用

**PDF IFrame：**

```
<iframe src="http://docs.google.com/gview?url=http://ocw.mit.edu/courses/mechanical-engineering/2-000-how-and-why-machines-work-spring-2002/tools/html.pdf&embedded=true" style="width:600px; height:500px;" frameborder="0"></iframe> 
```

小提琴：http: [//jsfiddle.net/RYh7U/69/](http://jsfiddle.net/RYh7U/69/)

**图像 IFrame：**

```
<iframe src="http://upload.wikimedia.org/wikipedia/commons/e/eb/Ash_Tree_-_geograph.org.uk_-_590710.jpg">
</iframe> 
```

小提琴：http: [//jsfiddle.net/RYh7U/70/](http://jsfiddle.net/RYh7U/70/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:26:28.813

问：您的意思是“getReport.php?id=123”不呈现为 .png 图像（它要求用户下载）？或者它是否显示为图像，但您希望它显示在一个新的单独窗口中？

如果是前者，您需要确保服务器发送正确的内容类型（例如“image/png”）。

如果是后者，只需执行 Javascript“window.open()”（或等效项）

======== 更新 =======

我 1990 年对 Javascript 1.2 的继承正在赶上我 :) *不要*使用“window.open()”——按照 Pandian 所说的去做，如果你想实现一个弹出窗口，就使用它。以下是更多详细信息：

*   [http://javascript.info/tutorial/popup-windows](http://javascript.info/tutorial/popup-windows)

出于同样的原因，您的问题很模糊。如果问题是文件要求您“下载”（如果图像没有出现*在任何地方*），那么您的 PHP 程序没有正确发送文件。至少，它必须在发送二进制 .png 数据之前设置“Content-type”。

'希望有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:25:26.887

```
<a href="#" onclick="window.open('getReport.php?id=123', '_blank')">View report in a new window</a> 
```

# maven - 如何在 maven 项目站点上使用 markdown？

> ID：14829190
> 
> 赞同：47
> 
> 时间：2013-02-12T09:22:31.743
> 
> 标签：maven, markdown, maven-site-plugin

如何从使用 maven 和 markdown 标记语言的项目文档开始？Maven 站点默认是 APT，学习 maven 方式做事很不舒服。（通常团队中没有人会在他们还需要学习另一种标记语言时开始编写 maven 站点文档。）

是否有人尝试对 Maven 项目站点文档使用 markdown（与 github 上使用的标记语言相同）？我从[Maven Doxia 参考资料](http://maven.apache.org/doxia/references/index.html)中看到这是可能的。有什么问题吗？

我是 Maven 站点生成的新手。我认为 Markdown 比团队没有使用过的其他标记语言更好。

更新。成功了。请参阅下面的答案。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-12T11:25:01.280

引自[http://maven.apache.org/doxia/references/index.html](http://maven.apache.org/doxia/references/index.html)

将此添加到`pom.xml`

```
 <plugin>    
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-site-plugin</artifactId>
              <version>3.2</version>
              <dependencies>
                <dependency>
                  <groupId>org.apache.maven.doxia</groupId>
                  <artifactId>doxia-module-markdown</artifactId>
                  <version>1.3</version>
                </dependency>
              </dependencies>
            </plugin> 
```

然后开始在扩展名下添加`src/site/markdown/`页面`.md`。为每个页面添加菜单项，如下面的片段所示：

```
 <body>
    <!-- http://maven.apache.org/doxia/doxia-sitetools/doxia-decoration-model/decoration.html 
    <item collapse=.. ref=.. name=.. href="README" img=.. position=.. alt=.. border=.. width=.. height=.. target=.. title=.. >
    -->
    <menu name="User guide">
      <item href="README.html" name="README" />
    </menu>

    <menu ref="reports" inherit="bottom" />
  </body> 
```

比`mvn site`用来生成网站。查看`target/site`查看结果。

`mvn site:stage -DstagingDirectory=C:\TEMP\fullsite`在一个文件夹中获取多模块项目站点。

阅读有关[maven-site-plugin 的](http://maven.apache.org/plugins/maven-site-plugin/)更多信息。

我建议使用[maven-fluido-skin](http://maven.apache.org/skins/maven-fluido-skin/)。它是最新样式，基于 Twitter Bootstrap 将其添加到 site.xml

```
<project name="xxx">
  [...]
  <skin>
    <groupId>org.apache.maven.skins</groupId>
    <artifactId>maven-fluido-skin</artifactId>
    <version>1.3.0</version>
  </skin>
  [...]
</project> 
```

另请参阅 [https://github.com/winterstein/Eclipse-Markdown-Editor-Plugin](https://github.com/winterstein/Eclipse-Markdown-Editor-Plugin)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-04T23:53:01.707

另一种标准方法是使用**Maven 站点插件**，如下所示

*   [https://maven.apache.org/plugins/maven-site-plugin/](https://maven.apache.org/plugins/maven-site-plugin/)
*   [https://illegalexception.schlichtherle.de/maven/2013/06/17/how-to-use-markdown-syntax-with-the-maven-site-plugin/](https://illegalexception.schlichtherle.de/maven/2013/06/17/how-to-use-markdown-syntax-with-the-maven-site-plugin/)

通过这种方法，您可以利用速度模板引擎过滤。因此，它为您的文档增加了更多的力量。

# javascript - 最小空间精灵安排器

> ID：14829194
> 
> 赞同：2
> 
> 时间：2013-02-12T09:22:40.800
> 
> 标签：javascript, codeigniter-2, css-sprites, adobe-illustrator, extendscript

我有一个带有大量小图标的精灵，并且经常维护 Illustrator 文件，以至于我想要一个脚本来尽可能地自动排列组对象而不会重叠，并且理想情况下具有某种最小可能排列的感觉。

我已经为 Adob​​e Illustrator CS4 编写了一个脚本，用于在每个选定对象的尺寸和坐标上创建一个 JSON 文件。从那里，我编写了这些 PHP 函数来编写和测试每个图标的 CSS。（它还可以从 4 个角图标和 2 个重复的 x/y 边框创建边框，但这需要我放弃的层命名约定以支持 css3。

插画家 CS4 脚本

```
var i,j=0;var destFolder=Folder.selectDialog('Select the folder where you want to save the exported files.','/c/DATA/TrackAuthority/HEAD/wwwroot/js/');var activeDocument=app.activeDocument;var ssLayers=selection;var components=getActiveLayers(activeDocument,"COMPONENTS");var singlesStr=''var compStr=''var fileName=activeDocument.name.substr(0,activeDocument.name.indexOf('.'))+'_json';var fileType='txt';if(ssLayers.length==0){alert("select the layers you want to export")}else{if(destFolder!=null){buildComponentsArray();if(osize(components)>0||singlesStr.length>0){var master='{"components": [{}],';master+='"singles": ['+singlesStr+']}';writeXML(master)}else{alert("no xml constructed")}}else{alert("pick a folder!")}}function objToXML(key){if(typeof(key)=="object"){for(var value in key){alert(key+" is: "+value+' : '+key[value])}}else{alert('string: '+key)}}function buildComponentsArray(){for(i=0;i<ssLayers.length;i++){var className=ssLayers[i].name;var componentName=ssLayers[i].layer.name;var visibleBounds=ssLayers[i].visibleBounds;var x1=ssLayers[i].left;var y1=ssLayers[i].top;x1=(className.indexOf('-x')>-1)?'0':Math.abs(Math.ceil(x1))*-1;y1=(className.indexOf('-y')>-1)?'0':Math.abs(Math.ceil(y1))*-1;var spriteWidth=(className.indexOf('-x')>-1)?'"100%"':'"'+Math.ceil(ssLayers[i].width)+'px"';var spriteHeight=(className.indexOf('-y')>-1)?'"100%"':'"'+Math.ceil(ssLayers[i].height)+'px"';if(className!=''&&className!=null&&className!=undefined){var itemStr='{"classname": "'+className+'", "x":'+x1+', "y":'+y1+', "width":'+spriteWidth+', "height":'+spriteHeight+'}';if(componentName=='SINGLES'){if(singlesStr!='')singlesStr+=',';singlesStr+=itemStr}else if(components[componentName]&&components[componentName][className]){components[componentName][className]=itemStr}}}if(osize(components)>0){compStr=flattenObj(components)}}function flattenObj(obj){var all='';for(var comp in obj){if(all!='')all+=',';all+='{"'+comp+'":[';var items='';for(var sprite in obj[comp]){if(items!='')items+=',';items+=obj[comp][sprite]}all+=items;all+=']}'}return all}function tracer(key){if(typeof(key)=="object"){for(var value in key){alert(value+' : '+key[value])}}else{alert('string: '+key)}}function writeXML(fileContents){if(destFolder!=null){alert('Files are saved as SWF in '+destFolder);var xmlFile=new File(destFolder.toString()+'/'+fileName+'.'+fileType);if(xmlFile.exists){allow=confirm("The file "+xmlFile+" already exists.\nDo you wish to replace it and ALL other duplicate files?",true,"Duplicate File Found");if(allow)xmlFile.remove();else{var index=1;var newname=new File(destFolder.toString()+'/'+fileName+'-'+index+'.'+fileType);while(newname.exists){index++;newname=new File(destFolder.toString()+'/'+fileName+'-'+index+'.'+fileType)}xmlFile.rename(newname)}}xmlFile.open('w');xmlFile.write(fileContents);xmlFile.close();xmlFile.execute()}else{alert('No destination folder selected')}}function osize(obj){var size=0;for(var k in obj){size++}return size}function getActiveLayers(sourceDoc,layerName){var activeLayers=new Array();for(var j=0;j<sourceDoc.layers.length;j++){if(sourceDoc.layers[j].name==layerName){for(var i=0;i<sourceDoc.layers[j].layers.length;i++){var key=sourceDoc.layers[j].layers[i].name;activeLayers[key]=new Array()}}}return activeLayers} 
```

CS4 输出 JSON 的 PHP 解析器

```
if(!defined('BASEPATH'))exit('No direct script access allowed');class manage extends MX_Controller{function __construct(){parent::__construct();}function someLatin($num=1,$sentence=true){$latin="Of all the currencies that youâ€™re paid in, the only currency that you cannot replace is time. Money is a cheap thing. In the end, an idea is a reasonably cheap thing. But the investment of time is the scarcest of all resources; Stephen Hawking was absolutely rightâ€”the arrow of time points in one direction. And once youâ€™ve spent that second, you cannot capture it again. So do not waste it. You should live life so that the moments in it are intense. Donâ€™t live a ho-drum life, where you canâ€™t remember [inaudible]. Do things that are intense. You need people around you who care enough about you to tell you youâ€™re wrong in a way that you can hear it. This is a gift that you guys can give one another. There are a tremendous number of guys who I went to school with who enjoy calling me up and telling me I was an idiot. I find it extremely easy to hang up the phone and not pay attention. There are a small number of guys in pictures on the wall in my office who call me up and tell me Iâ€™m an idiot in such a way at the end of the conversation I say why? How? How can I avoid that? Thanks for calling. They tell me Iâ€™m an idiot about things I do in business; they tell me Iâ€™m an idiot about things I do with my personal life; they tell me Iâ€™m an idiot about things I do with my kids; they care enough to make the call, and theyâ€™re patient enough to let me hear them out. Youâ€™re going to end up being a director of a firm. Youâ€™re going to end up spending hours thinking through the strategy of a firm. Each one of you is worth having your own board of directors. Choose that group of people who are going to sit around you who are confident enough to provide you with advice, and who are talented enough to provide you with things you havenâ€™t thought about, and who care about you enough to tell you the things that youâ€™re doing wrong. Because I promise youâ€”you will not see it. You will be blind in pursuit, passionate in pursuit, and dead wrong. If youâ€™re gonna get a board of directors for a stupid firm, for Godâ€™s sake get a board of directors for you. And many of you will find at least one of those directors here while youâ€™re at the Harvard Business School. Think about who that can be; think about who can give you that advice; and be prepared to give that advice to someone else. Thereâ€™s nothing cooler than being in love, being togetherâ€”by the way, seeing your kids make their way through life is a close secondâ€”the stupidest, dumbest thing you guys ever tell me is that weâ€™re in love, and heâ€™s gonna live in New York and Iâ€™m gonna live in San Francisco and weâ€™re gonna meet in Chicago. This is beyond stupid. It turns out that the real way to build a relationship with one another is to sleep with one another. I mean every night. If you live with one another and really weave your life together, you will stay together. Everything else that I have done pales in comparison to the relationship that I have been able to develop with my wife Karen. I hope that each one of you will find a partner that you can share this journey with. Itâ€™s difficult to do, and by the way Iâ€™ve had some failures along the way. I was unsuccessful in my first marriage. I screwed it up. I screwed it up in a very predictable way: I put too much work into the world around me, and not enough work into the world I shared with my partner. Itâ€™s easy to do. Thereâ€™s tremendous satisfaction in meeting the worldâ€™s needs that can leave you remarkably empty when it comes to building something with one another. When I see you on your fifth anniversaries, on your tenth anniversaries, on your fifteenth anniversaries, I know what I will be told. Everyone will have enough money. Everyone. Everyone who is unhappy will be unhappy for one of two reasons: theyâ€™re doing a job they hate and theyâ€™re afraid to change it; or theyâ€™re not in love. Theyâ€™re doing all of this to share it with another, and theyâ€™re all alone. Thatâ€™s been proven year five, year ten, year fifteen. Thatâ€™s another gift you can give one another, because you can see that in one another and ask one another not only what are you doing, but how are you doing?  Finally, kids are a remarkable thing. My daughter graduates from Columbia in about an hour and a half. Iâ€™m going to miss that graduation but Iâ€™ll see her Friday night. They are delightful things. They are gifts that I cannot possibly explain to you. But they are such a royal pain in the ass that I just want to make sure that Iâ€™ve told you that. You canâ€™t microwave babies. They take time, they take walks, they take time talking about bugs, and youâ€™ll have lives like the life Iâ€™ve lived, where youâ€™ll find yourself living one week here and one week in Northern California, and one week every month in Eindhoven or Kyoto, and the time that youâ€™re there to spend with those children will be highly taxed. You pay a price for that, and they do too. Time is your dearest investment; youâ€™re going to manage how you invest it, and babies prosper with time, itâ€™s a thing that you cannot outsource, and by the way, youâ€™re going to have to put time in all those other things. But it is hugely satisfying for me to think about that little bitty kid getting a degree, a masterâ€™s in architecture, walking down the aisle this afternoon, and I hope you too get that. Finally, I should have spent more time fly-fishing. Itâ€™s a very cool sport. I pick something other than workâ€”I intensely love work, I like teaching, I like all that stuff, itâ€™s what I tend to do, but it probably would have been good if I had picked something that wasnâ€™t quite so intense all of the time. I keep saying that Iâ€™m going to do it and I promise to spend more time on it next year. So Iâ€™ll come back to that definitionâ€”entrepreneurship is the relentless pursuit of opportunity beyond the constraints of the tangible resources under the firmâ€™s controlâ€”and keep that pursuit of opportunity in your mind. I do not believe each one of you should be an entrepreneur, much less an entrepreneur tomorrow morning. I do believe that you should leave here with the choice, and make the choice that fits for you. There has never been a time in recorded history when the supply of capital did not overwhelm the supply of opportunity. As Iâ€™ve been here at the school, Iâ€™ve seen wave after wave of things rush through here, where this is going to be it, and you see MBAs lined up like surfers at La Jolla, hoping to time the wave. Thereâ€™s always smart money, and then dumb money flows in and then thereâ€™s just tons of money and divergence from the mean, the mean goes negative, but the creamâ€”the best investors, the best entrepreneurs, the best ideasâ€”always rises to the top. Remember, in the venture side of this business, 90% of the returns have been locked in by less than 10% of the investors. If you look at the ventures, 67% of the return is in less than 5 % of the ventures. By the way, if you look at the distribution for-profit, not-for-profit, anywhere in the world, I think the same is likely to be true. So understand where you can get those disproportionate returns and understand who the cream is so you can hang out with them, and do things with them, and take on problems with them. Thereâ€™s always technology change, thereâ€™s always change associated with globalization, and I believe right now weâ€™re going to go through a tremendous amount of change associated with re-regulation because the world has relied too much on markets, both in financial markets and itâ€™s depended too much on markets in environmental issues. I think that will create a whole raft of new and exciting businesses. And thereâ€™s always demographic change, and demographic change is really cool because itâ€™s totally predictable. But as I sit here in front of you today, there has never been more opportunity to do things, to build things today. There are more ways to change the world today than there ever have been. And I think you all are in a unique position to be able to do that. When you do that, this is my favorite quote from Walt Disney, he understood two problemsâ€”how to make pictures just to make money and make money to make more pictures. Money is a shallow thing. The things you can do with it are a huge amount of funâ€”whether itâ€™s solving problems or creating your visions or bringing groups of people together to do ambitious thingsâ€¦but itâ€™s not the end in itself. Itâ€™s a means to something, and you can do that every time you fall into a new problem. You make money because businesses need money the same way automobiles need [inaudible]. So where are we going now? I honestly donâ€™t know. I donâ€™t know where all of this will lead for you guys. I wish I did and I wish I could save you from some of the things that will be painful in that journey. I will think about you the way I think about Randy and Joe, and something will blip across the screen and Iâ€™ll think my God, what happened to them, and some email will be there, but I canâ€™t do that. I do think you can have a lot of fun finding out what the future is. And the one thing I can give you is a limited lifetime warrantee. If youâ€™ve got something you want to talk about, get in touch with me. And when Iâ€™m not here there will be someone else from HBS thatâ€™s here to take that call. Remember to call one another. You have a relationship with one another that can be uniquely valuable in helping you understand the world around you. Soâ€¦youâ€™ve got a warranty. Use it. Thanks very muchâ€”I enjoyed studying with you guys, I learned a lot. One last thing. I will call you and I will ask you to help the next group of students that are here, and I will expect you to do that. Just like I expect the ones that have come before you to do that. Thereâ€™s something I would urge you to think about, and I would urge you to think about carefully at some point in time about working with young people. The thing thatâ€™s exciting about working with young people is that through their eyes you see the future. You see years beyond where I see. You know things that I do not see. But that is not the great gift. Through you I see myself as I once was, and in that I am reborn. I get to go back and live life again in an exciting way. All of you should think about that because itâ€™s a gift that that person I send to you can give you, and that you should repay. Thanks again [Thunderous applause, some weeping].";$parts=explode(".",trim($latin,"."));$final="";$part="";if($sentence==true){if($num>count($parts))$num=count($parts)-1;for($i=0;$i<=$num;$i++){$part=$parts[mt_rand(0,count($parts)-1)];$final.=ucfirst($part);$final.=". ";}$final=trim($final,",");}else{$latin2=$parts[mt_rand(0,count($parts)-1)];if(empty($latin2))$latin2=$latin;$words=explode(" ",trim($latin2));if($num>count($words))$num=count($words)-1;for($i=0;$i<$num;$i++){$part=$words[$i];if($i==0)$final.=$part;else$final.=" ".$part;}$final=ucwords($final);}$final=trim($final);if(empty($final))$final="And Empty";return$final;}} 
```

用于构建生成图标的演示页面的 PHP 视图文件：

```
.tmmss { background:transparent url(<?=$spritePath;?>) 0 -100px no-repeat; padding:0; float:left; overflow:hidden; height:50px; width:50px; z-index:100; } <?php foreach($singles as$single){$classname=$single['classname'];$item=' .tmmss.'.$classname.' { background-position: '.$single['x'].'px '.$single['y'].'px; width:'.$single['width'].'; height:'.$single['height'].';';if(strpos($classname,'-y')>-1)$item.='background-repeat:repeat-y;';if(strpos($classname,'-x')>-1)$item.='background-repeat:repeat-x;';$item.='} ';echo"\n";echo$item;}; 
```

（总而言之，我一直想称它为“SuperSprite”，duah-da-nut-dauh，但如果没有一些自动包装，就不能自豪地做到这一点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:36:23.610

到目前为止非常整洁的脚本。您可能应该研究[Rectangle 打包](https://www.google.co.uk/search?q=rectangle+packing&aq=0&oq=rectangle+pa&aqs=chrome.1.57j0l3.15376&sourceid=chrome&ie=UTF-8)并选择一种算法。通过简单的搜索，我发现[这个项目](https://github.com/jakesgordon/bin-packing)看起来很有希望。

有点务实的一面，可能也值得看看[TexturePacker](http://www.codeandweb.com/texturepacker)。它不是免费的，但价格合理。

# android - 谷歌地图错误：拖动后标记的位置未更新

> ID：14829195
> 
> 赞同：7
> 
> 时间：2013-02-12T09:22:41.160
> 
> 标签：android, google-maps

我设置了一个标记，将它的可拖动状态设置为 true。但是当我打电话时，`marker.getPosition()`我总是得到相同的位置，比如标记的位置在拖动结束后没有更新。

```
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map_place))
        .getMap();

LatLng MYLOCATION = new LatLng(Double.valueOf(myLat), Double.valueOf(myLng));
marker = new MarkerOptions()
    .position(MYLOCATION)
    .title(getString(R.string.map_title_my_location)).draggable(true);
mMap.addMarker(marker).showInfoWindow();
mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(MYLOCATION, 18));
close.setOnClickListener(new OnClickListener() {

  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub
    LatLng pos = marker.getPosition();
    Toast.makeText(activity, "Lat: " + pos.latitude + "; Long: " + pos.longitude, Toast.LENGTH_LONG).show();
  }
}); 
```

作为我定义的类变量：

```
GoogleMap mMap;
MarkerOptions marker; 
```

任何想法？！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-20T11:39:47.413

这是一个老问题，但由于我自己也遇到了同样的问题，所以这里是解决方案：您需要先`OnMarkerDragListener`为地图实例设置 ( `mMap.setOnMarkerDragListener(...)`) 以更新标记位置值。您实际上不需要在侦听器实现方法中做任何事情（您可以`marker.getPosition()`在任何您喜欢的地方使用），它们只需要存在即可。

**更新**

这也记录在[https://developers.google.com/maps/documentation/android-api/marker#marker_drag_events](https://developers.google.com/maps/documentation/android-api/marker#marker_drag_events)

> 您可以使用 OnMarkerDragListener 来侦听标记上的拖动事件。要在地图上设置此侦听器，请调用 GoogleMap.setOnMarkerDragListener。要拖动标记，用户必须长按标记。当用户将手指从屏幕上移开时，标记将停留在该位置。拖动标记时，最初会调用 onMarkerDragStart(Marker)。在拖动标记时，会不断调用 onMarkerDrag(Marker)。在拖动结束时调用 onMarkerDragEnd(Marker)。您可以通过调用 Marker.getPosition() 随时获取标记的位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T07:48:57.040

您应该`OnMarkerDragListener()`在主要活动中实施。在方法内部，`onMarkerDragEnd()`您可以获得标记的位置（通过使用其 ID）

# iphone - 将 ZBarSdk readertest 示例集成到现有应用程序中

> ID：14829201
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:23:15.463
> 
> 标签：iphone, ios, zbar-sdk

我正在尝试将 Zbarsdk 包含在我现有的应用程序中...我发现 readertest 示例确实是一个很好的示例，因为它包含所有功能和选项，但是该示例仅包含名为“reader test.m”的 .m 文件，其中嵌入了 AppDelegate ...它也没有 xib，因为所有初始化都是以编程方式进行的...那么我如何将它添加到我的应用程序中，该应用程序可以选择扫描代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:04:36.203

导入 ZBarSDK 文件夹，其中应该有一个 libzbar.a 库和头文件和资源文件。

现在在导入“ZBarReaderController.h”文件后使用 ZBarReaderDelegate 并使用以下函数：

```
 -(IBAction) scan
    {    
        NSLog(@" SCAN BARCODE BUTTON TAPPED ");
        ZBarReaderViewController *reader = [ZBarReaderViewController new];
        reader.readerDelegate = self;
        reader.showsHelpOnFail = YES;

        ZBarImageScanner *scanner = reader.scanner;
        [scanner setSymbology: ZBAR_I25
                       config: ZBAR_CFG_ENABLE
                           to: 0];

        [self presentModalViewController:reader animated:YES];
    }

- (void) imagePickerController: (UIImagePickerController*) reader
 didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    id<NSFastEnumeration> results = info[ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
        break;
    NSString *EANCode = symbol.data;

    [reader dismissModalViewControllerAnimated: YES];

  // so you have got the EAN code as result use it in your app
} 
```

# php - xml 和 php - 输出文本

> ID：14829204
> 
> 赞同：-4
> 
> 时间：2013-02-12T09:23:21.507
> 
> 标签：php, xml, xml-parsing

我需要快速帮助来阅读我的 xml。我在工具提示中显示我的结果，一切都准备好了。我想通过 id 一个一个地查询每个批次。我需要一个 php 代码来为他们的每个批次提供`id` 这是我的 XML

```
<section id="8" number="8" name="Section 8" phase="4" date="2/11/2013">
<lot id="2198" lot="2" block="1" section="8">
<number>2</number>
<legal>L2-B1-S8 (60')</legal>
<address>12107 Arbor Blue Lane</address>
<builder>Perry Homes</builder>
<status>Sold</status>
<plan>3158</plan>
<brick>Acme-StoneBriar</brick>
<trim>SW-Portbello, Tea Chest</trim>
<final_inspection_date/>
<completion>5/23/2013</completion>
<sqft>3158</sqft>
<stories>2</stories>

<bed>4</bed>
<bath>3</bath>
<garage>3</garage>
<lotwidth>60'</lotwidth>
<specprice>Sold</specprice>
<imglocation>none</imglocation>
<premium>off</premium>
</lot>
<lot id="2218" lot="22" block="1" section="8">
<number>22</number>
<legal>L22-B1-S8 (60')</legal>
<address>19503 Bella Arbor Lane</address>
<builder>Perry Homes</builder>
<status>Sold</status>
<plan>3391</plan>
<brick>Hanson-Chestnut Hill</brick>
<trim>SW-Virtual Taupe, Smokehouse</trim>
<final_inspection_date>12/3/2012</final_inspection_date>
<completion>11/28/2012</completion>
<sqft>3391</sqft>
<stories>2</stories>
<bed>4</bed>
<bath>3</bath>
<garage>3</garage>
<lotwidth>60'</lotwidth>
<specprice>Sold</specprice>
<imglocation>3391w-e51.png</imglocation>
<premium>off</premium>
</lot>
</section> 
```

这是我的测试 php 代码

```
 $xmldoc = new DOMDocument();
    $xmldoc->load('mydata.xml');

    $xpathvar = new Domxpath($xmldoc);

    $queryResult = $xpathvar->query('//lot[@id="2198"]/address'); 
    foreach($queryResult as $result){
            echo $result->textContent;

    } 
```

这只是给了我地址。我如何列出所有其他属性？我现在可以在我的工具提示中使用

```
 <div style="float:left">

<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">Status: </label>'.$status.'</p>
<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">Builder: </label>'.$builder.'</p>
<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
    width:200px
"><label style="color:grey">Address: </label>'.$address.'</p>
<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">Square Ft: </label>'.$square.'</p>
<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">Stories: </label>'.$stories.'</p>

<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">Completion: </label>'.$completion.'</p>

<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">Plan #: </label>'.$plan.'</p>
<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">B/B/G: </label>'.$bed.'/'.$bath.'/'.$garage.'</p>
<p style="
    margin: 0;
    padding-left: 10px;
    font-size: 13px;
"><label style="color:grey">Spec Price: </label>'.$specprice.'</p>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:01:49.950

```
//lot[@id="2198"]/address 
```

你问：*“这只是给了我地址。我如何列出所有其他属性？”*

`*`在 Xpath 中，如果您不想指定元素的具体名称，可以使用星号：

```
//lot[@id="2198"]/* 
```

示例：[ZVON 示例 3：星号 * 选择由前面路径定位的所有元素](http://zvon.org/xxl/XPathTutorial/Output/example3.html)

但是你的问题对我来说并不是特别清楚，所以这个答案有点猜测。如果对您没有帮助，请不要怪我；）

# javascript - 功能完成后的 jQuery UI 切换选项卡

> ID：14829209
> 
> 赞同：0
> 
> 时间：2013-02-12T09:23:37.450
> 
> 标签：javascript, jquery, user-interface

我正在使用 jQuery UI 1.10.0

```
 $('#uitab').tabs({
        show:function(event, ui){
        var lastOpenedPanel = $(this).data('lastOpenedPanel');
        if(!$(this).data('topPositionTab')){
            $(this).data('topPositionTab', $(ui.panel).position().top)
        }
            $(ui.panel).hide().fadeIn(500);
            if(lastOpenedPanel){/
                lastOpenedPanel
                    .toggleClass('ui-tabs-hide')
                    .css('position','absolute')
                    .css('top',$(this).data('topPositionTab') + 'px')
                    .fadeOut(500,function(){
                        $(this).css('position','');
                    });
            }
            $(this).data('lastOpenedPanel', $(ui.panel));
        }
    }); 
```

这是头部的 jQ UI 选项卡代码，然后是正文：

```
<div id="uitabs">
    <ul id="tabs">
        <li><a href="#uitabs-1">tab1</a></li>
        <li><a href="#uitabs-2">tab2</a></li>
        <li><a href="#uitabs-3">tab3</a></li>
    </ul>

    <div id="uitabs-1">...</div>
    <div id="uitabs-2">...</div>
    <div id="uitabs-3">...</div>
</div> 
```

并在#uitabs-1 中有一个脚本

```
<script type="text/javascript">
xxxx...
'onDone':function(file,data,response){
$('#uitabs-2').append('DONE');
$('#uitabs').tabs('option','active',$('uitabs-').index());
}
</script> 
```

那么当'onDone'函数执行并跳转到#uitabs-2时我需要一个代码

```
$('#uitabs').tabs('option','active',$('uitabs-').index());} 
```

我尝试了此行代码，但跳转到#uitabs-3

和解决方案我可以使用类/ID/或名称吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:04:02.610

这是解决方案

```
$('#uitabs').tabs('option','active',1); 
```

# asp.net - 带有文本值的滑块

> ID：14829210
> 
> 赞同：0
> 
> 时间：2013-02-12T09:23:37.983
> 
> 标签：asp.net, ajax, slider

我正在做一个可以使用滑块的权限屏幕-对于网站的每个部分，我希望能够使用水平滑块轻松地授予用户权限，该滑块具有定义不同权限级别的文本值，这意味着什么他们可以在网站的每个部分执行操作，增加权限以包括读取数据、写入、删除项目、添加项目等功能。每个级别都包括以前的级别，因此滑动条似乎是显示正在发生的事情的合乎逻辑的选择.

不幸的是，环顾四周，唯一具有良好 ASP 集成（这是 ASP Web 表单的一部分）的滑块是 AJAX 滑块，SliderExtender，但它只使用数字作为值。有没有办法使用文本值作为此控件的标签，或者是否有另一种（免费）可以用于此目的？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T14:41:14.937

为什么不在代码中使用数值并处理将数字转换为文本值？

*   1 = 管理员
*   2 = 高级用户
*   3 = 用户
*   4 = 其他用户

希望这可以帮助

# timer - WinCE / Compact7 上的 GetTickCount() [硬件相关]

> ID：14829212
> 
> 赞同：1
> 
> 时间：2013-02-12T09:23:40.603
> 
> 标签：timer, hardware, windows-ce

根据 MSDN，Windows 上**GetTickCount()**的分辨率通常为 10-16 毫秒。对于嵌入式系统 [WinCE] MSDN 说：

*“系统计时器的分辨率取决于 OEM 的设置。详情请咨询 OEM。”*

就我而言，我无法访问此类信息（我什至还无法访问硬件）。那么在现代 DIMM-PC 上我通常可以期待什么分辨率？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:10:40.720

对于 WindowsCE，`GetTickCount`分辨率为 1 毫秒（至少在过去十年中我使用的每台机器上都是如此）。一些设备有一个更高分辨率的计数器，可以使用它来查询`QueryPerformanceCounter`，它的频率由 报告`QueryPerformcanceFrequency`。此分辨率取决于 BSP，而不是具体取决于硬件，这意味着即使硬件具有高频时钟，也取决于 BSP 读取它并将其报告回来。

# .htaccess - 多参数和可变参数 URL 重写

> ID：14829215
> 
> 赞同：1
> 
> 时间：2013-02-12T09:23:43.450
> 
> 标签：.htaccess, url, parameters, seo, rewrite

我不知道如何重写这种类型的 URL：

```
mywebsite/param1-val1-param2-val2-param3-val3-param4-val4.html 
```

这真的很简单，但我的问题是我的参数是变量，如：

```
mywebsite/param1-val1-param3-val3-param4-val4.html 
```

或者

```
mywebsite/param3-val3-param4-val4.html 
```

因此，参数的数量并不总是相同的。有时可能只有一个，有时可能是 10 个或更多。它重定向到一个搜索脚本，该脚本将通过 GET 查询字符串获取参数。

我想要做的是不为每个链接写（在 htaccess 上）一行。链接形式非常简单，由`-`（连字符）符号分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:17:18.103

我建议不要依赖复杂的重写规则，而是建议一个简单的重写规则，然后修改您的 Web 应用程序的代码来完成困难的部分。支持这种可变参数并不是重写规则本身非常擅长的事情。

我将使用以下重写规则来拦截任何包含连字符分隔符并以`.html`

```
RewriteRule ^(.+[\-].+)\.html$ /query.html?params=$1 
```

然后在您的 Web 应用程序中可以从名为`params`. 他们现在看起来像这样`param1-val1-param3-val3-param4-val4`。然后，您的代码应该在连字符上拆分，然后将参数放入映射中。大多数 Web 框架都支持以某种方式添加或覆盖请求参数。如果是这样，您可以在不对其余代码进行侵入性修改的情况下执行此操作。

# c# - 如何在未安装 Visio 类的机器上注册它？

> ID：14829218
> 
> 赞同：0
> 
> 时间：2013-02-12T09:24:10.167
> 
> 标签：c#, visio

我的任务是创建一个包含单页的空 Visio 文档文件 (.vsd)，并在其中放置几个​​形状。我的问题是我必须为此编写 Windows 控制台应用程序，并且它必须在未安装 Visio 的服务器环境中运行。有可能这样做吗？

如果我在我的开发环境中运行应用程序，则会启动新的 Visio 实例。但是，在我的应用程序必须运行的服务器上，未安装 Visio，Visio 应用程序启动将失败。在这种情况下我能做什么？

编辑：在服务器上安装 Visio 不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:00:20.877

If you're not tied to binary, then I would use Visio's xml format - vdx. Saveen Reddy has a great library (including NuGet) that makes life very simple - see

*   [VisioAutomation.VDX](http://visioautomation.codeplex.com/)

Also, Visio 2013 now uses a new package (zip style) file format - see:

*   [VSDX: the new Visio file format](http://blogs.office.com/b/visio/archive/2012/09/10/vsdx-the-new-visio-file-format.aspx)
*   [10 tips for developers working with the Visio VSDX file format](http://blogs.office.com/b/visio/archive/2013/01/29/10-tips-for-developers-working-with-the-visio-vsdx-file-format.aspx)

All of the above will enable you to generate Visio documents without having the application installed.

# html - CSS中的“...”是什么意思

> ID：14829224
> 
> 赞同：0
> 
> 时间：2013-02-12T09:24:41.063
> 
> 标签：html, css

我只是想知道这在样式表部分意味着什么......一旦我摆脱了这个样式表代码，整个页面就会变成空白......

```
<style type="text/css">
...     
#wrapper {      
    display: none;  
}   

div[id="preloader"]{
    top: 0;
    right: 10px;
    position:absolute;
    z-index:1000;
    width: 132px; height: 38px;
    background:
    url(path/to/preloaderBg.png) no-repeat;
    cursor: wait;
    text-shadow: 0px 1px 0px #fefefe; //webkit 
}
...
</style> 
```

“...”在样式表的开头和结尾...

![在此处输入图像描述](../Images/2e2e77a8d7780a11ef300cf27a0b4a66.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:27:50.193

水平省略号字符在 CSS 中没有意义。这是一个语法错误（除非是一段自由格式数据的一部分（例如`content: "foo…bar";`）。这同样适用于三个连续的句点字符。

它可能是代码查看器（或您从中复制的代码示例）的一个功能，表明显示的内容不完整（根据排版中字符的通常含义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:30:40.093

它只是意味着未显示的其他内容。CSS中没有具体含义。

# mysql - 如何自动将 MySQL DDL 转换为 Oracle DDL？

> ID：14829227
> 
> 赞同：12
> 
> 时间：2013-02-12T09:24:47.830
> 
> 标签：mysql, sql, oracle, converter, ddl

我知道我的问题听起来有点像购物请求，但老实说，我相信很多人会发现它很有用。

我一直在寻找一种将数据定义语言从 MySQL 方言转换为 Oracle 方言的自动工具——反过来也可以。我找到了“SQL Fairy”，但无法运行；可能是因为我不熟悉 PERL。

是否有任何适用于 Windows 的免费工具可以将 MySQL DDL 转换为 Oracle DDL？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-22T15:03:04.077

这个站点真的很适合我，它可以转换来自 Oracle、MySql、M$ Sql Server、Sybase 等的一系列不同的 DDL 命令。[http://www.sqllines.com/online](http://www.sqlines.com/online)。

**请注意工具下方的免责声明：**

> 笔记。SQLines Online 是一个不受限制的版本，仅供评估使用。如需在项目中使用，请获取许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:40:14.377

Oracle 的网页上充满了这方面的信息：[Database Migration Technology](http://www.oracle.com/technetwork/database/migration/index-084442.html)，它为包括 MySql 在内的几个不同的数据库提供了详细的说明和帮助。

参考的主要工具：[Oracle SQL Developer](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)是免费的。

# python - python 2.7.3 和 python 3.3 之间的区别

> ID：14829236
> 
> 赞同：9
> 
> 时间：2013-02-12T09:25:24.033
> 
> 标签：python, python-3.x

我在 python 2.7.3 中有以下 python 代码，我最近使用了一台具有 python 3.3 的新笔记本电脑，我认为我不应该降级回 python 2.7.3 。代码是

:-

```
nm = input(“enter file name “)

str = raw_input(“enter ur text here: \n”)

f = open(nm,”w”)

f.write(str)

f.close()

print “1.See the file\n”

print “2.Exit\n”

s = input(“enter ur choice “)

if s == 1 :

   fi  = open(nm,”r”)

   cont  = fi.readlines()

for i in cont:

    print i

else :

    print “thank you “ 
```

请告诉我应该进行哪些更改，以便它可以轻松运行而不会出现任何错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T09:32:15.393

*   `raw_input()`在 Python 3 中不存在，请`input()`改用：

    ```
    str = input("enter ur text here: \n") 
    ```

*   `input()`不评估它在 Python 3 中解析的值，`eval(input())`而是使用：

    ```
    s = eval(input("enter ur choice ")) 
    ```

*   `print()`是 Python 3 中的一个函数（它是 Python 2 中的一个语句），所以你必须调用它：

    ```
    print("1.See the file\n")
    print("2.Exit\n")

    print(i)

    print("thank you ") 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T10:59:49.367

```
raw_input() 
```

变成

```
input() 
```

和

```
print " " 
```

变成

```
print() 
```

希望这会有所帮助，但有关转换的更多信息，请访问[http://python3porting.com/](http://python3porting.com/) :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:32:04.970

为了使您的代码在 Python 3 中正常工作，请始终使用`input()`而不是，`raw_input()`因为后一个函数不再存在。此外，该`print`语句已被`print()`函数替换。

# php - 如何删除关联数组键并添加默认数组键 PHP

> ID：14829257
> 
> 赞同：2
> 
> 时间：2013-02-12T09:26:08.350
> 
> 标签：php, arrays, codeigniter

```
$arr = array(3=>'test',6=>'test 2'); 
```

我想成功

```
$arr = array(0=>'test',1=>'test 2'); 
```

什么是最好的方法 。是否有任何 php 函数可以做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:27:54.223

只需使用`array_values`：

```
$arr = array(3=>'test',6=>'test 2');
$arr = array_values($arr); 
```

[http://www.php.net/manual/en/function.array-values.php](http://www.php.net/manual/en/function.array-values.php)

# spring - 如何从 Spring 中获取实例化 bean 的列表？

> ID：14829258
> 
> 赞同：19
> 
> 时间：2013-02-12T09:26:09.017
> 
> 标签：spring, junit, state

我的 Spring 上下文中有几个具有状态的 bean，因此我想在单元测试之前/之后重置该状态。

我的想法是向一个助手类添加一个方法，该类只遍历 Spring 上下文中的所有 bean，检查使用`@Before`or注释的方法`@After`并调用它们。

如何从 中获取**实例化**bean的列表`ApplicationContext`？

注意：简单地遍历所有定义的 bean 的解决方案是没有用的，因为我有很多惰性 bean，其中一些不能实例化，因为某些测试会失败（即我有一个需要 a`java.sql.DataSource`但测试工作的 bean，因为它们没有'不需要那个豆子）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-12T14:07:51.777

例如：

```
 public static List<Object> getInstantiatedSigletons(ApplicationContext ctx) {
            List<Object> singletons = new ArrayList<Object>();

            String[] all = ctx.getBeanDefinitionNames();

            ConfigurableListableBeanFactory clbf = ((AbstractApplicationContext) ctx).getBeanFactory();
            for (String name : all) {
                Object s = clbf.getSingleton(name);
                if (s != null)
                    singletons.add(s);
            }

            return singletons;

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:24:13.793

我不确定这是否会对您有所帮助。

您需要创建自己的注释，例如。我的注释。并将该注释放在您想要获取的类上。然后使用以下代码，您可能会得到实例化的 bean。

```
ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);
scanner.addIncludeFilter(new AnnotationTypeFilter(MyAnnot.class));
for (BeanDefinition beanDefinition : scanner.findCandidateComponents("com.xxx.yyy")){
    System.out.println(beanDefinition.getBeanClassName());
} 
```

通过这种方式，您可以获得具有自定义注释的所有 bean。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-22T16:02:37.117

我不得不稍微改进一下

```
@Resource
AbstractApplicationContext context;

@After
public void cleanup() {
    resetAllMocks();
}

private void resetAllMocks() {
    ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();
    for (String name : context.getBeanDefinitionNames()) {
        Object bean = beanFactory.getSingleton(name);
        if (Mockito.mockingDetails(bean).isMock()) {
            Mockito.reset(bean);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-26T08:32:10.270

**applicationContext.getBeanDefinitionNames()**不显示在**没有**BeanDefinition 实例的**情况**下注册的 bean 。

```
package io.velu.core;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan
public class Core {

public static void main(String[] args) {
    AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(Core.class);
    String[] singletonNames = context.getDefaultListableBeanFactory().getSingletonNames();
    for (String singleton : singletonNames) {
        System.out.println(singleton);
    }       
} 
```

}

* * *

## 控制台输出

```
environment
systemProperties
systemEnvironment
org.springframework.context.annotation.internalConfigurationAnnotationProcessor
org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry
org.springframework.context.event.internalEventListenerProcessor
org.springframework.context.event.internalEventListenerFactory
org.springframework.context.annotation.internalAutowiredAnnotationProcessor
org.springframework.context.annotation.internalCommonAnnotationProcessor
messageSource
applicationEventMulticaster
lifecycleProcessor 
```

正如您在输出中看到的，**环境、systemProperties、systemEnvironment** bean**不会**使用**context.getBeanDefinitionNames()**方法显示。

## 弹簧靴

对于 Spring Boot Web 应用程序，可以使用以下端点列出所有 bean。

```
@RestController
@RequestMapping("/list")
class ExportController {

@Autowired
private ApplicationContext applicationContext;

@GetMapping("/beans")
@ResponseStatus(value = HttpStatus.OK)
String[] registeredBeans() {
    return printBeans();
}

private String[] printBeans() {
    AutowireCapableBeanFactory autowireCapableBeanFactory = applicationContext.getAutowireCapableBeanFactory();
    if (autowireCapableBeanFactory instanceof SingletonBeanRegistry) {
        String[] singletonNames = ((SingletonBeanRegistry) autowireCapableBeanFactory).getSingletonNames();
        for (String singleton : singletonNames) {
            System.out.println(singleton);
        }
        return singletonNames;
    }
    return null;
} 
```

}

* * *

> [“autoConfigurationReport”、“springApplicationArguments”、“springBootBanner”、“springBootLoggingSystem”、“环境”、“systemProperties”、“systemEnvironment”、“org.springframework.context.annotation.internalConfigurationAnnotationProcessor”、“org.springframework.boot.autoconfigure. internalCachingMetadataReaderFactory”、“org.springframework.boot.autoconfigure.condition.BeanTypeRegistry”、“org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry”、“propertySourcesPlaceholderConfigurer”、“org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store” , "preserveErrorControllerTargetClassPostProcessor”、“org.springframework.context.annotation.internalAutowiredAnnotationProcessor”、“org.springframework.context.annotation.internalRequiredAnnotationProcessor”、“org.springframework.context.annotation.internalCommonAnnotationProcessor”、“org.springframework.boot.context.properties. ConfigurationPropertiesBindingPostProcessor”、“org.springframework.scheduling.annotation.ProxyAsyncConfiguration”、“org.springframework.context.annotation.internalAsyncAnnotationProcessor”、“methodValidationPostProcessor”、“embeddedServletContainerCustomizerBeanPostProcessor”、“errorPageRegistrarBeanPostProcessor”、“messageSource”、“applicationEventMulticaster”、“org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat”、“tomcatEmbeddedServletContainerFactory”、“org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration”、“websocketContainerCustomizer”、“spring.http.encoding- org.springframework.boot.autoconfigure.web.HttpEncodingProperties”、“org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration”、“localeCharsetMappingsCustomizer”、“org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration”、“serverProperties”、“重复服务器属性检测器”、“spring.resources-org.springframework.boot.autoconfigure.web.ResourceProperties”、“org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$DefaultErrorViewResolverConfiguration”、“conventionErrorViewResolver”、“org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration”、“errorPageCustomizer”、“servletContext”、“ contextParameters”、“contextAttributes”、“spring.mvc-org.springframework.boot.autoconfigure.web.WebMvcProperties”、“spring.http.multipart-org.springframework.boot.autoconfigure.web.MultipartProperties”、“org.springframework. boot.autoconfigure.web.MultipartAutoConfiguration”、“multipartConfigElement”、“org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletRegistrationConfiguration”、“org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration”、“dispatcherServlet”、“dispatcherServletRegistration”、“requestContextFilter”、“org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration”、“hiddenHttpMethodFilter” 、“httpPutFormContentFilter”、“characterEncodingFilter”、“org.springframework.context.event.internalEventListenerProcessor”、“org.springframework.context.event.internalEventListenerFactory”、“reportGeneratorApplication”、“exportController”、“exportService”、“org.springframework.开机。autoconfigure.AutoConfigurationPackages”、“org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration”、“org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration”、“spring.jackson-org.springframework.boot.autoconfigure.jackson. JacksonProperties”、“standardJacksonObjectMapperBuilderCustomizer”、“org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration”、“org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration”、“jsonComponentModule”、“jacksonObjectMapperBuilder”、“org.springframework.引导自动配置杰克逊。JacksonAutoConfiguration$JacksonObjectMapperConfiguration”、“jacksonObjectMapper”、“org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration”、“org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration”、“org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration” , “org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration”, “defaultValidator”, “org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration”, “error”, “beanNameViewResolver”, “errorAttributes”, “basicErrorController” , "org.springframework.boot.autoconfigure.web。WebMvcAutoConfiguration$EnableWebMvcConfiguration”、“org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter”、“mvcContentNegotiationManager”、“org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration”、“stringHttpMessageConverter”、“org.springframework. boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration”、“mappingJackson2HttpMessageConverter”、“org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration”、“messageConverters”、“mvcConversionService”、“mvcValidator”、“requestMappingHandlerAdapter”、“mvcResourceUrlProvider”、“requestMappingHandlerMapping”、“mvcPathMatcher”、“mvcUrlPathHelper”、“viewControllerHandlerMapping”、“beanNameHandlerMapping”、“resourceHandlerMapping”、“defaultServletHandlerMapping”、“mvcUriComponentsContributor”、“httpRequestHandlerAdapter”、“simpleControllerHandlerAdapter”、“handlerExceptionResolver” ，“mvcViewResolver”，“org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration”，“faviconRequestHandler”，“faviconHandlerMapping”，“defaultViewResolver”，“viewResolver”、“welcomePageHandlerMapping”、“org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration”、“objectNamingStrategy”、“mbeanServer”、“mbeanExporter”、“org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration”、“springApplicationAdminRegistrar” ，“org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration”，“org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration”，“spring.info-org.springframework.boot.autoconfigure.info.ProjectInfoProperties”，“org. springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration”、“multipartResolver”、“org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration$RestTemplateConfiguration”、“restTemplateBuilder”、“org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration”、“spring.devtools-org.springframework.boot.devtools.autoconfigure.DevToolsProperties”、“ org.springframework.boot.devtools.autoconfigure.LocalDevToolsAutoConfiguration$RestartConfiguration”、“fileSystemWatcherFactory”、“classPathRestartStrategy”、“classPathFileSystemWatcher”、“hateoasObjenesisCacheDisabler”、“org.springframework.boot.devtools.autoconfigure.LocalDevToolsAutoConfiguration$LiveReloadConfiguration$LiveReloadServerConfiguration”、“ org.springframework.boot.devtools.autoconfigure。LocalDevToolsAutoConfiguration$LiveReloadConfiguration", "optionalLiveReloadServer", "org.springframework.boot.devtools.autoconfigure.LocalDevToolsAutoConfiguration", "lifecycleProcessor"]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T15:16:08.590

我创建了一个[要点 ApplicationContextAwareTestBase](https://gist.github.com/digulla/4770445)。

这个助手类做了两件事：

1.  它将所有内部字段设置为空。这允许 Java 释放不再使用的内存。不过，它对 Spring 的用处不大（Spring 上下文仍然保留对所有 bean 的引用）。

2.  它尝试`@After`在上下文中的所有 bean 中找到所有带有注释的方法，并在测试后调用它们。

这样，您可以轻松地重置单例/模拟的状态，而无需销毁/刷新上下文。

示例：您有一个模拟 DAO：

```
public void MockDao implements IDao {

    private Map<Long, Foo> database = Maps.newHashMap();

    @Override
    public Foo byId( Long id ) { return database.get( id ) );

    @Override
    public void save( Foo foo ) { database.put( foo.getId(), foo ); }

    @After
    public void reset() { database.clear(); }
} 
```

注释将确保`reset()`在每个单元测试后调用以清理内部状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-25T19:42:02.753

使用以前的答案，我已将其更新为使用 Java 8 Streams API：

```
@Inject
private ApplicationContext applicationContext;

@Before
public void resetMocks() {
    ConfigurableListableBeanFactory beanFactory = ((AbstractApplicationContext) applicationContext).getBeanFactory();
    Stream.of(applicationContext.getBeanDefinitionNames())
            .map(n -> beanFactory.getSingleton(n))
            // My ConfigurableListableBeanFactory isn't compiled for 1.8 so can't use method reference. If yours is, you can say
            // .map(ConfigurableListableBeanFactory::getSingleton)
            .filter(b -> Mockito.mockingDetails(b).isMock())
            .forEach(Mockito::reset);
} 
```

# php - 从 PHP 中的所有子目录中删除带有文件名的特定文件

> ID：14829260
> 
> 赞同：1
> 
> 时间：2013-02-12T09:26:17.297
> 
> 标签：php, file

假设有一个目录，其中有许多子目录。现在我如何扫描所有子目录以找到一个名为**abc.php**的文件，并在找到该文件的任何地方删除该文件。

我试着做这样的事情 -

```
$oAllSubDirectories = scandir(getcwd());
foreach ($oAllSubDirectories as $oSubDirectory)
{
  //Delete code here
} 
```

但是此代码不检查子目录中的目录。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:29:08.960

通常，您将代码放在一个函数中并使其递归：当它遇到一个目录时，它会调用自身以处理其内容。像这样的东西：

```
function processDirectoryTree($path) {
    foreach (scandir($path) as $file) {
        $thisPath = $path.DIRECTORY_SEPARATOR.$file;
        if (is_dir($thisPath) && trim($thisPath, '.') !== '') {
            // it's a directory, call ourself recursively
            processDirectoryTree($thisPath);
        }
        else {
            // it's a file, do whatever you want with it
        }
    }
} 
```

在这种特殊情况下，您不需要这样做，因为 PHP 提供了[`RecursiveDirectoryIterator`](http://php.net/manual/en/class.recursivedirectoryiterator.php)自动执行此操作的现成工具：

```
$it = new RecursiveIteratorIterator(new RecursiveDirectoryIterator(getcdw()));
while($it->valid()) {
    if ($it->getFilename() == 'abc.php') {
        unlink($it->getPathname());
    }
    $it->next();
} 
```

# php - 解析 HTML 向所有人添加 IDs 在 PHP 中使用 NAME

> ID：14829261
> 
> 赞同：2
> 
> 时间：2013-02-12T09:26:16.623
> 
> 标签：php, parsing, dom, html-parsing

我正在尝试在 PHP 中获取 HTML 文档（我无法控制）并确保每个输入都有一个 id。如果没有 id，那么我需要使用已设置的任何名称添加一个。

例如：

```
input type="text" name="something" value="something else" 
```

我需要将其解析为：

```
input type="text" name="something" id="something" value="something else" 
```

我必须对整个文档执行此操作。

我一直在寻找解决方案，但空手而归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:19:09.123

OK so I completely misunderstood! Answer number 2 here:

```
$dom = new DOMDocument; 
$dom->load('yourdoc.html');// Load document
$inputs = $dom->getElementsByTagName("input"); //Get inputs
for($i=0; $i<$inputs->length; $i++){ // For every input found
    $thisName = $inputs->item($i)->getAttribute("name"); // Put the name in a variable
    $inputs->item($i)->setAttribute("id",$thisName); // Then set ID as the same
}
$dom->save('yourdoc.html'); //Save the document 
```

This has to be closer to what you want, surely?

No parsers, just some simple DOM work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:29:14.243

如果您需要在表单提交之前执行此操作，则需要使用 Javascript。

使用 jQuery...

```
$('input').each(function(){
    var name = $(this).attr('name');
    $(this).attr('id','name');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:12:26.847

这可以通过`preg_replace_callback`（[http://www.php.net/manual/en/function.preg-replace-callback.php](http://www.php.net/manual/en/function.preg-replace-callback.php)）来完成

伪代码：

用于 `preg_replace_callback`提取所有`<input ... >`并发送`someFunction`

在`someFunction(str)`：

```
If str contains 'id=':
    return str //no need to add id
else:
    extract value of name, insert 'id="name" ' after '<input ' and return str 
```

# nhibernate - 映射问题：正确的结果数量，但是每个结果都是第一个结果的重复

> ID：14829266
> 
> 赞同：0
> 
> 时间：2013-02-12T09:26:22.880
> 
> 标签：nhibernate, nhibernate-mapping

我是 NHibernate 的新手（使用最新版本），我在将通用数据加载应用程序中的对象映射到数据库时遇到问题。数据库是第三方的，所以我们不能在那里进行更改。

我们的目标是：

```
public class GenericObjectValue
{
    public string ObjectId { get; set; }
    public string ObjectTypeId { get; set; }
    public string measurementId { get; set; }
    public DateTime timestamp { get; set; }
    public Double Value { get; set; }
} 
```

我们使用的数据源表：

```
Table t_data_point
(
    id (PK, int, not null)
    object_id (FK, Varchar(30), not null)
    object_type_id (FK, Varchar(30), not null);
    measurement_id (FK, Varchar(30), not null);
)

Table t_data_point_Value
(
    data_point_id (PK, FK, int, not null)
    timestamp (PK, FK, datetime, not null)
    version (PK, FK, int, not null)
    value (numeric(18,6), not null);
) 
```

我配置的映射是：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Phoenix.Model"     assembly="Phoenix.Common">
 <class name="MeasValue" table="t_data_point_Value">
  <id column="data_point_id" type="int" />
  <property name="Timestamp" column="timestamp "/>
  <property name="Value" column="value"/>

  <join table="t_data_point">
       <key column="id" />
       <property name="measurementId" column="measurement_id" />
       <property name="ObjectId" column="object_id" />
       <property name="ObjectTypeId" column="object_type" />
  </join>
 </class>
</hibernate-mapping> 
```

不确定我是在做一些愚蠢的事情还是不可能的事情，但是当我为此运行代码时，我得到了正确数量的结果，但结果只是返回的第一个结果的重复，即时间戳和值是相同的。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:32:57.123

当您的 id 映射不正确时，我已经看到了这一点，即映射到不唯一的列。Nhibernate 将重用它在缓存中找到的第一个具有相同 ID 的对象。有一个免费的地图工具可以帮助您指明正确的方向。它不会创建连接，但会创建基本列和 ID [http://nmg.codeplex.com](http://nmg.codeplex.com)。

# c++ - 删除浮点数最后一位的问题

> ID：14829269
> 
> 赞同：2
> 
> 时间：2013-02-12T09:26:34.483
> 
> 标签：c++, math, floating-point

我正在制作一个基于控制台的计算器应用程序。应用程序处理用户按键以执行其操作。积分输入工作正常；但是，我在为用户按下退格键擦除十进制数的情况下编写代码时遇到问题。

我为擦除小数位而编写的代码如下：

```
decimalcount--; // number of decimal places is subtracted by 1
lnum -= fmod (lnum, pow (10, -decimalcount + 1)); // subtraction
cout << setprecision (decimalcount) << lnum << endl; // display the code 
```

但是，对于某些数字，例如 12.00400679，这些值被不正确地减去：

```
12.00400679
12.00400670
12.0040060
12.004000
12.00400
12.0040
12.000
11.90
11.0
10 
```

该程序的完整源代码如下：

```
#include <iostream>
#include <iomanip>
#include <cmath>
#include <conio.h>
using namespace std;

int sgn (double x)
{
    if (x < 0)
    {
        return -1;
    }
    return 1;
}

int main ()
{
    cout.setf (ios::fixed);

    double lnum = 0, expr = 0;
    int decimalcount = 0;
    char ch, op;

    while (true)
    {
        ch = _getch ();
        if (isdigit (ch))
        {

            if (! decimalcount)
            {
                if (sgn (lnum) == sgn (lnum * 10 + sgn (lnum) * (ch - 48)))
                {
                    lnum = lnum * 10 + sgn(lnum) * (ch - 48);
                    cout << setprecision (0) << lnum << endl;
                }
            }
            else
            {
                if (decimalcount < 9)
                {
                    lnum += sgn (lnum) * (ch - 48) * pow (10, -decimalcount);
                    cout << setprecision (decimalcount) << lnum << endl;
                    decimalcount++;
                }
            }
        }
        else if (ch == '\b')
        {

            if (! decimalcount)
            {
                lnum -= fmod (lnum, 10);
                lnum /= 10;
                cout << setprecision (0) << lnum << endl;
            }
          // This is where I am having problems
            else
            {
                decimalcount--;
                lnum -= fmod (lnum, pow (10, -decimalcount + 1));
                cout << setprecision (decimalcount) << lnum << endl;
            }
        }
        else if (ch == '.')
        {
            if (! decimalcount)
            {
                decimalcount = 1;
                cout << setprecision (decimalcount) << lnum << endl;
            }
        }
        else if (ch == 'x')
        {
            return 0;
        }
    }

} 
```

谁能告诉我我做错了什么？

提前致谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T09:38:20.340

你转换得太早了。在输入过程中，您应该将输入保留为字符串，并且仅在输入完成后转换为您的内部格式，并且您已准备好进行计算。

但你似乎做事很艰难。为什么不直接使用 `std::getline`on`std::cin`并解析您收到的文本？这样，系统就可以处理诸如退格之类的事情，而您不必这样做。如果由于某种原因这是不可接受的，您仍然应该将输入分解为一个单独的函数，它或多或少地做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:31:19.617

这是因为这些值不能用浮点数精确表示。值得一读关于浮点在内存中的表示方式。

如果您需要精确的小数位，最好使用定点算术。但是，除非您将此类操作转换为浮点数，否则实现三角函数等可能会很烦人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:41:26.463

您应该避免对数字执行算术运算，因为这可能会改变您想要保留的有效数字。相反，您可以将其转换为字符串并截断它，然后在需要实际算术值时再转换回来。例子：

```
double d;

// ...

std::ostringstream sstream;
sstream << d;
std::string str = sstream.str(); 
```

或者：

```
char str[10];
snprintf(str, 10, "%g", d); 
```

但总的来说，我会选择 James Kanze 的答案并将所有输入存储为字符串，最后只转换为数值。

# log4net - 如何使 log4net.Filter.StringMatchFilter 在 acceptOnMatch 设置为 false 的情况下工作

> ID：14829270
> 
> 赞同：3
> 
> 时间：2013-02-12T09:26:35.123
> 
> 标签：log4net, episerver

我刚刚开始使用 log4net，并且在使用字符串进行过滤时遇到了一些问题。

我正在尝试在我的 log4net 日志文件中删除 EPiServer 特定的日志记录，因为我对此不感兴趣。

我对 appender 有以下 log4net 配置：

```
 <filter type="log4net.Filter.LevelRangeFilter">
           <levelMin value="DEBUG" />
        </filter>

        <filter type="log4net.Filter.StringMatchFilter">
            <stringToMatch value="EPiServer" />
            <acceptOnMatch value="false" />
        </filter>
        <filter type="log4net.Filter.DenyAllFilter" /> 
```

我只有一个根记录器。此配置不会停止 EPiServer 日志记录。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-31T15:32:42.493

您应该删除该行

```
<filter type="log4net.Filter.DenyAllFilter" /> 
```

从[文档](https://logging.apache.org/log4net/log4net-1.2.11/release/sdk/log4net.Filter.DenyAllFilter.html)：

> 您可以将此过滤器添加到过滤器链的末尾，以从默认的“除非另有指示，否则全部接受”过滤行为切换到“除非另有指示，否则全部拒绝”行为。

这有效地反转了拒绝所有消息的逻辑，除非在`<filter>`using 中明确列入白名单`<acceptOnMatch value="true" />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:25:12.807

尝试将您的 StringMatchFilter 更改为 LoggerMatchFilter

```
<filter type="log4net.Filter.LoggerMatchFilter">
  <loggerToMatch value="EPiServer" />
  <acceptOnMatch value="false" />  
</filter> 
```

StringMatchFilter 过滤日志消息的内容，其中 LoggerMatch 过滤 Logger 的类名称或部分命名空间

# unit-testing - 如何对 Windows Phone 8 MVVM 异步命令进行单元测试？

> ID：14829273
> 
> 赞同：1
> 
> 时间：2013-02-12T09:27:11.500
> 
> 标签：unit-testing, visual-studio-2012, windows-phone-8, windows-phone

我想为 My ViewModel 类中的一些命令编写一些单元测试。我想测试**ICommand**的执行。

我的**ICommand.Execute()**方法执行**异步**方法。

我怎样才能为这个命令写一个测试用例？

注意：我正在使用 Visual Studio 2012 Update 2 的 CTP2 中提供的 Windows Phone 单元测试框架[http://blogs.msdn.com/b/visualstudioalm/archive/2013/01/31/windows-phone-unit-tests -in-visual-studio-2012-update-2.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2013/01/31/windows-phone-unit-tests-in-visual-studio-2012-update-2.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:08:52.130

`async Task`测试方法要容易得多；也就是说，让您的`async void Execute`实现只是`await`一种`async Task`方法，它实际上是经过单元测试的方法。

内置的 MSTest 单元测试框架不支持测试`async void`方法，因为它有点复杂并且会引发向后兼容性问题。目前，NUnit 是唯一支持`async void`方法的单元测试框架。

如果您真的想测试一个`async void`方法并且不想使用 NUnit，您可以使用[Stephen Toub`AsyncPump`](http://blogs.msdn.com/b/pfxteam/archive/2012/02/02/10263555.aspx)或[我`AsyncContext`](http://nitoasyncex.codeplex.com/wikipage?title=AsyncContext)的（可在 NuGet 上获得）为每个单元测试创​​建自己的上下文。在这种情况下，您的测试将类似于：

```
[TestMethod]
public void TestMyAsyncVoidMethod()
{
  ICommand myCommand = ...;

  AsyncContext.Run(() =>
  {
    myCommand.Execute();
    Assert.IsTrue(command-is-in-progress);
  });

  Assert.IsTrue(command-completed);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T14:08:13.077

您应该将测试方法签名更改为

`[TestMethod] public async Task TestMyAsyncVoidMethod() {....`

这样您就可以等待您的命令执行方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:37:23.230

我假设你会用`[Asynchronous]`属性标记方法，然后调用`await ICommand.Execute()`

查看[这篇文章](http://www.smartypantscoding.com/a-cheat-sheet-for-unit-testing-silverlight-apps-on-windows-phone-7)以获取异步 Windows Phone 方法测试的示例。

# javascript - therubyracer 或 nodejs，我应该使用哪个？

> ID：14829275
> 
> 赞同：14
> 
> 时间：2013-02-12T09:27:14.080
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, rake

我正在关注新安装 Ubuntu 12.10的[ruby​​ on rails 入门指南。](http://guides.rubyonrails.org/getting_started.html)我已经准备好运行`rake db:create`，但出现以下错误：

耙中止！找不到 JavaScript 运行时。有关可用运行时的列表，请参阅[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)。

我四处搜索，建议的解决方案（见下面的列表）是安装一些 therubyracer 或 nodejs，但他们没有解释原因。

*   [rake db:create - 找不到 JavaScript 运行时](https://stackoverflow.com/q/9057475/1253708)
*   [Rails 3.1 错误 - 找不到 JavaScript 运行时？](https://stackoverflow.com/q/7092107/1253708)
*   [http://datacodescotch.blogspot.com.au/2011/11/rails-31-spree-and-rake-aborted-could.html](http://datacodescotch.blogspot.com.au/2011/11/rails-31-spree-and-rake-aborted-could.html)
*   [http://www.blog.railshouse.com/](http://www.blog.railshouse.com/)

在我开始安装之前，我想知道这些 JavaScript 运行时之间有什么区别，以及为什么我会选择其中一个？

更新：

我刚刚阅读了[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)（我知道我应该先阅读这个，抱歉），在我看来 execjs 不是 JavaScript 运行时，我已经拥有它......所以它归结为therubyracer 和 nodejs ...请原谅我的无知，我已经修改了我的问题

**除了无畏的回答：**

[ruby on rails 入门指南](http://guides.rubyonrails.org/getting_started.html#starting-up-the-web-server)支持 Intrepidd的回答。请参阅第[4.1 节“启动 Web 服务器”](http://guides.rubyonrails.org/getting_started.html#starting-up-the-web-server)，其中说：

> Rails 在新应用的注释行中将 therubyracer gem 添加到 Gemfile 中，如果需要，您可以取消注释。

对于那里的 Rails 新手（像我一样），GemFile 位于 Rails 应用程序的根文件夹中。在我的 GemFile 中取消注释该行后，我不得不运行`bundle install`安装 therubyracer gem。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-28T08:32:08.183

你应该更喜欢 NodeJS，`therubyracer`因为 NodeJS 内存效率很高，但它可能不那么容易安装，尽管在 Mac OS 上它很容易，所以在 Ubuntu 上也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T09:47:05.443

在 *NIX 系统上，您只需取消注释`gem "therubyracer"`gemfile 中的注释就可以了，这是最简单的。

# algorithm - O(n^2) 是否大于 O((n^2)logn)

> ID：14829276
> 
> 赞同：4
> 
> 时间：2013-02-12T09:27:16.923
> 
> 标签：algorithm, complexity-theory, time-complexity

O(n^2) 是否大于 O(n^2 log n) ？
如是 ？如何 ？
我们可以举一个简单的例子吗？
另外，
下面代码的复杂性是什么。

```
int unknown(int n){
   int i,j,k=0;
   for(i=n/2;i<=n;i++){
     for(j=2;j<=n;j=j * 2){
         k =k + n/2;
     }
  }
return k;
} 
```

返回值 k 的复杂度是多少？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T09:31:56.117

`O(n^2)`是 的一个*子集*，`O((n^2) * log(n))`因此第一个是“更好的”，很容易看出，因为`log(n)`它是一个递增函数，通过与它相乘，你会得到一个比原始函数“更高”的函数（`f(n) <= f(n) * log(n)`对于每个递增的非负`f`和`n>2`）

您给出的代码快照是`O(nlog(n))`，因为内部循环在`log(n)`每次外部循环迭代时重复多次，而外部循环重复 n/2 次 - 这给了`n/2 * log(n)`你`O(nlog(n))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:31:38.097

Ln(e) == 1，所以任何大于 e (~2.7) 的东西都会给出 Ln(n) > 1。

因此，对于所有 n > e，O(n^2 ln(n)) 将 > O(N^2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:49:42.297

我假设你的意思是`O((n^2) * log n)`，但答案是一样的，如果是，你需要证明的基本上是一样的`n^(2 * log n)`。我也只会考虑非负函数，以节省一些绝对值的麻烦。

答案是`O(n^2)`的严格子集`O((n^2) * log n)`。它更小。

首先证明它是一个子集：假设`f`是`O(n^2)`。那么存在`M`和`k`这样的，对于所有`n >= M`, `f(n) <= k(n^2)`。

让`L = max(M, e)`（其中 e 是对数底）。然后对于所有`n >= L`, `log(n) >= log(e) == 1`(since `n >= 1`) 和`f(n) <= k(n^2)`(since `n >= M`)。

因此，对于所有`n >= L`，`f(n) <= k(n^2) * log(n)`。`f`在`O((n^2) * log n)`. _

其次，证明它是一个严格的子集：设`g`为函数`g(n) = (n^2) * log n`，所以`g`为 in `O((n^2) * log n)`。

对于任何`k`，采取`L = e^k`。然后对于任何`n > L`，`log(n) > k`等等`g(n) > n^2 * k`。

因此`g`不在 中`O(n^2)`，因为不可能存在`M`并且`k`对于所有人`n >= M`来说，`g(n) <= k * n^2`。

# sql - 是否可以使用 NH QueryOver 在一个查询中获取连接的实体？

> ID：14829282
> 
> 赞同：2
> 
> 时间：2013-02-12T09:27:48.780
> 
> 标签：sql, nhibernate, inner-join, queryover

SQL查询是：

```
select B.* from A inner join B on A.b_id = B.id where A.x in (1,2,3) 
```

A <-> B 关系是多对一的

我需要按 A 过滤但获取相关的 B。

更新：

我试过这个 NH QueryOver

```
Session.QueryOver<A>.Where(a => a.x.IsIn(array)).JoinQueryOver(a => a.B).Select(a => a.B).List<B>() 
```

但它会导致 N+1 的查询序列：第一个获取相关 B 的 ID，而其他查询则通过 ID 一个接一个地获取相关 B（通过 NHProf 分析）。我希望它一次性获取 B 列表。

更新 2：

现在我用子查询解决了这个问题

```
Session.QueryOver(() => b).WithSubquery.WhereExists(QueryOver.Of<A>().Where(a => a.x.IsIn(array)).And(a => a.b_id == b.id).Select(a => a.id)).List<B>() 
```

但我仍然希望看到一个*没有*子查询的 QueryOver 示例，因为我倾向于认为子查询效率较低。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:09:58.330

这有效（至少在我的测试应用程序中）：

```
var list = session.QueryOver<A>()
                    .Where(a => a.X.IsIn(array))
                    .Fetch(x => x.B).Eager
                    .List<A>()
                    .Select(x => x.B); 
```

请注意，.Select() 语句是普通的 LINQ 语句，不是 NHibernate 的一部分。

生成的 SQL：

```
SELECT 
  this_.Id as Id0_1_, 
  this_.B as B0_1_, 
  this_.X as X0_1_, 
  b2_.Id as Id1_0_, 
  b2_.SomeValue as SomeValue1_0_ 
FROM A this_ left outer join B b2_ on this_.B=b2_.Id 
WHERE this_.X in (?, ?, ?) 
```

当然，如果 A 是一个非常大的类，这不是最优的。

带有子查询的仅限 NHibernate 的解决方案：

```
var candidates = QueryOver.Of<A>()
                            .Where(a => a.X.IsIn(array))
                            .Select(x => x.B.Id);

var list = session.QueryOver<B>()
                    .WithSubquery.WhereProperty(x => x.Id).In(candidates).List(); 
```

我将尝试找出最明显的解决方案（仅添加 Fetch().Eager）无法按预期工作的原因。敬请关注！

# android - 如何检测 google 应用程序是否安装在 android 设备上

> ID：14829294
> 
> 赞同：1
> 
> 时间：2013-02-12T09:28:14.230
> 
> 标签：android, google-play, google-play-services

我必须以编程方式检测谷歌应用程序和谷歌服务是否安装在设备上。

第一个解决方案是使用 packagemanager ：

```
private static final String GooglePlayStorePackageNameOld = "com.google.market";
private static final String GooglePlayStorePackageNameNew = "com.google.vending";

void someMethod() {
    packageManager = getApplication().getPackageManager();
    List<PackageInfo> packages = packageManager.getInstalledPackages(PackageManager.GET_UNINSTALLED_PACKAGES);
    for (PackageInfo packageInfo : packages) {
        if (packageInfo.packageName.equals(GooglePlayStorePackageNameOld) ||
            packageInfo.packageName.equals(GooglePlayStorePackageNameNew)) {
            googlePlayStoreInstalled = true;
            break;
        }
    }
} 
```

但是有什么更可靠的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:53:02.020

我找到了另一种测试市场意图结果的方法

```
PackageManager pm = getPackageManager();
Intent market = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=dummy"));
List<ResolveInfo> list = pm.queryIntentActivities(market, 0);
if (list != null && list.size() > 0)
    mMarketInstalled = true;
else
    mMarketInstalled = false; 
```

你觉得这个解决方案怎么样？

# java - Spring 中的调用 ApplicationContext.getBean() 是否使用依赖注入？

> ID：14829295
> 
> 赞同：1
> 
> 时间：2013-02-12T09:28:23.943
> 
> 标签：java, spring

由于依赖注入意味着控制反转，因此我在以下调用中看不到 IOC：

```
 Car car = (Car)ApplicationContext.getBean("car"); 
```

自己编写类不是 Spring，因为我自己将 Car 编写到代码中。

此外，所有书籍都讨论了两种 DI：setter 和 constructor DI。

所以我想知道调用 ApplicationContext.getBean() 是否意味着任何类型的依赖注入和 IOC，或者根本没有 DI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:30:48.847

不，以这种方式获取 bean 不是依赖注入。它没有被注入。不过，该 bean 的字段可能已被注入。

有时确实没有办法解决它，但总的来说，尽量避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:34:02.390

> 自己编写类不是 Spring，因为我自己将 Car 编写到代码中。

在这种情况下，你会得到一个`NoSuchBeanDefinitionException`. 您需要告诉 Spring 它需要管理的每个类——有多种方法可以做到这一点，从自动装配到描述符中的显式定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:35:59.903

`getBean`确实使用与 Spring 的注入相同的配置 ( ) `applicationContext`，但您的示例未使用任何依赖项注入。（好吧，`Car`bean 可以注入它的依赖项，所以我们从你的例子中并不知道）。

但通常依赖注入意味着您不会自己进行任何编程设置（Car car = something）。Spring 容器将为`car`您创建实例，并使用`car`'s setter 或它的构造函数，将注入 x 需要工作的依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:36:08.750

我不知道为什么要尝试以这种方式获取 Car 引用...如果您想在另一个类中使用 Car 的引用，您可以像您所说的那样简单地使用 setter 或构造函数注入..如果您将其用作以上述方式，我在那里看不到任何类型的 DI。我们可以肯定地说，当您试图从应用程序上下文中获取引用时，bean 由 IOC 容器管理......

# android - 在某些设备上找不到任何 EGL 配置（Kindle Fire）

> ID：14829297
> 
> 赞同：1
> 
> 时间：2013-02-12T09:28:27.317
> 
> 标签：android, opengl-es, kindle-fire, egl

任何想法为什么这些属性无法在 Kindle Fire 上为我检索到任何合适的 EGL 配置？

```
EGL_RED_SIZE = 5
EGL_GREEN_SIZE = 6
EGL_BLUE_SIZE = 5
EGL_ALPHA_SIZE = 0
EGL_DEPTH_SIZE = 0
EGL_STENCIL_SIZE = 0
EGL_CONFIG_CAVEAT = EGL_NONE 
```

我注意到这似乎也发生在摩托罗拉 XT320 上。但是，绝大多数 2.3+ android 设备似乎都可以使用这些属性，但不是这两个。

我没有这两种设备，但用户报告我的应用程序一开始就在这两种设备上崩溃，日志似乎表明这是因为没有找到有效的 EGL 配置。

我设法在安卓模拟器上重现了这个，使用亚马逊的插件来模拟 Kindle Fire。Kindle Fire HD 似乎运行良好。

代码片段（在 Kindle Fire 上抛出`IllegalArgumentException "No configs match configSpec"`）：

```
//mConfigSpec is an array of ints with config_attribs ending into EGL_NONE.
int[] num_config = new int[1];
EGLDisplay display = mEgl.eglGetDisplay(EGL10.EGL_DEFAULT_DISPLAY);
if (display == EGL10.EGL_NO_DISPLAY) {
       throw new RuntimeException("eglGetDisplay failed");
}
if (!egl.eglChooseConfig(display, mConfigSpec, null, 0, num_config)) {
       throw new IllegalArgumentException("eglChooseConfig failed");
}
int numConfigs = num_config[0];
if (numConfigs <= 0) {
       throw new IllegalArgumentException("No configs match configSpec");
} 
```

# python - 基于最后一个元素的 Python 元组排序

> ID：14829300
> 
> 赞同：7
> 
> 时间：2013-02-12T09:28:36.620
> 
> 标签：python, list, dictionary, terminal, tuples

这是我的问题，`tuple1=[(1, 3), (3, 2), (2, 1)]`我想根据每个元组的最后一位对元组进行排序，所以结果 `output=[(2, 1), (3, 2), (1, 3)]` 如下所示是我的代码

```
 i=0
for x in tuples:
    c.append(x[len(x)-1])
    last=sorted(c)
    for y in last.iteritems():
        if(y in x[len(x)-1]):
            print x             
            #b.insert(i,x)
i=i+1 
```

运行 iam 后收到错误消息

```
 Traceback (most recent call last):
    File "x.py", line 47, in <module>
   sort_last([(1, 3), (3, 2), (2, 1)])
  File "x.py", line 35, in sort_last
 if(y in x[len(x)-1]):
  TypeError: argument of type 'int' is not iterable 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T09:30:06.333

在函数中指定`key`参数`sorted`。

```
>>> tuple1=[(1, 3), (3, 2), (2, 1)]
>>> output = sorted(tuple1, key=lambda x: x[-1])
>>> print output
[(2, 1), (3, 2), (1, 3)] 
```

该`sorted`函数（以及`list.sort`方法）有一个可选`key`参数，用于指定对列表进行排序的内容。

# ruby-on-rails - 如何在注册期间构建设计嵌套资源？

> ID：14829301
> 
> 赞同：3
> 
> 时间：2013-02-12T09:28:35.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

在向 Devise 注册新用户期间，我需要同时为该新用户创建一个新的 Family 对象链接（该用户是一家之主）。

我的家庭模型：

```
belongs_to user 
```

我的用户模型：

```
attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :family
has_one :family
accepts_nested_attributes_for :family 
```

在设计/注册/new.html.erb

```
<%= simple_form_for([resource, Family.new], :as => resource_name, :url =>     registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>
  <%= f.error_notification %>
  <%= display_base_errors resource %>
  <%= f.input :name, :autofocus => true %>
  <%= f.input :email, :required => true %>
  <%= f.input :password, :required => true %>
  <%= f.input :password_confirmation, :required => true %>

  <% f.fields_for :family do |family_form| %>
    <p><%= family_form.label :name %></p>
    <p><%= family_form.text_field :name %></p>
  <% end %>

  <%= f.button :submit, 'OK', :class => 'btn-primary' %>
<% end %> 
```

但这不起作用，我发现了几个这样的问题，但我没有设法解决这个问题。

任何想法 ？

**更新 1**

我收到以下错误：

```
undefined method `email' for #<Family:0x007f892a12c310> 
```

家庭是一个没有任何电子邮件的模型，只有一个名字。我只需要能够在创建新用户时创建一个具有名称的新 Family 对象（并将其链接到用户）。

**更新 2**

我在注册控制器中添加了 resource.build_family。家庭对象已正确创建并与用户关联（我可以在 new.html.erb 中显示 <%= resource.family %> 以进行调试），但仍然没有为家庭显示任何表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:27:05.637

您需要在 <%=fields_for

```
<%= f.fields_for :family do |family_form| %>
    <p><%= family_form.label :name %></p>
    <p><%= family_form.text_field :name %></p>
  <% end %> 
```

在您的用户模型中，您需要使 :family_attribues 可访问而不是 :family

```
attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :family_attributes
has_one :family
accepts_nested_attributes_for :family 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T14:07:53.683

如果你得到`undefined method 'email' for #<Model:0x007f892a12c310>`：

您需要`Devise::RegistrationsController`按照文档中的说明进行覆盖：[https](https://github.com/heartcombo/devise#configuring-controllers) ://github.com/heartcombo/devise#configuring-controllers 。例如

```
class Users::RegistrationsController < Devise::RegistrationsController
  def new
    super do |resource|
      resource.build_<model>
    end
  end
end 
```

而且您只能`resource`在`form_for`:中指定，`simple_form_for(resource, ...`而不是`simple_form_for([resource, Model.new], ...`

# javascript - 如何在一定时间后将数字添加到表格单元格

> ID：14829304
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:28:46.417
> 
> 标签：javascript, dreamweaver

我对编程非常陌生，所以请温柔一点。我使用 Dreamweaver 才几天，当时钟显示`XX:00:00`或时，我无法将 2 加到单元格中的数字上`XX:30:00`。换句话说，我希望每半小时将数字 2 添加到单元格的内容中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:41:13.787

如果我正确理解您的问题，您想每半小时将某个值加 2 吗？
您已将您的帖子标记为 Java 和 Javascript，它们是两种不同的语言，因此请更正。由于您曾在 Dreamviewer 工作过，我假设您正在开发网页并且您想要使用的语言是 Javascript。

在 Javascript 中设置计时器：

```
setInterval(function(){myFunc()},1800000);  //1800000 = 30 minutes in milliseconds
function myFunc()
{
    //Code to update the cell
} 
```

如果您实际上是指 Java，那么问题在这里得到了回答：[How to set a timer in java](https://stackoverflow.com/questions/4044726/how-to-set-a-timer-in-java)。

# ruby-on-rails - 如何在 Rails 中为嵌套路由共享控制器操作？

> ID：14829305
> 
> 赞同：0
> 
> 时间：2013-02-12T09:28:47.660
> 
> 标签：ruby-on-rails

在 Rails 中，当我需要时：

```
/comments 
```

和

```
/posts/1/comments 
```

如何最好地组织 CommentsController？例如让路由共享索引操作，或者使用 2 个控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:41:16.927

您只能使用一个控制器。

我会去`before_filter`检查`post_id`参数是否存在：

```
class CommentsController < ApplicationController
  before_filter :find_post, only: [:index]

  def index
    if @post.present?
      ## Some stuff
    else
      ## Other stuff
    end
  end

  private

    def find_post
      @post = Post.find(params[:post_id]) unless params[:post_id].nil?
    end
end 
```

并在您的路线中（有您选择的限制）：

```
resources :posts do
  resources :comments
end
resources :comments 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:35:12.370

我相信你想要`/comments`的只是为了`show`和`index`行动，对吧？否则，`post`在创建或更新`comment`.

在你的`routes.rb`你可以有类似的东西：

```
resources : posts do
  resources :comments
end
resources :comments, :only => [:index, :show] 
```

在您的表格中：

```
form_for([@post, @comment]) do |f| 
```

在你的控制器中，确保你`post`在处理之前找到了`comments`(for `new`, `edit`, `create`and `update`, 例如：

```
@post = Post.find(params[:post_id])
@comment = @post... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:43:14.720

您几乎可以使用 Rails 路线做任何您想做的事情。

**路线.rb**

```
match 'posts/:id/comments', :controller => 'posts', :action => 'comments'}

resources :posts do

   member do
    get "comments"
   end
 end 
```

# visual-studio-2010 - ADO.NET EF - 无法使用 VS2010 建立数据库连接

> ID：14829306
> 
> 赞同：0
> 
> 时间：2013-02-12T09:28:48.693
> 
> 标签：visual-studio-2010, ado.net

我正在关注本教程：http: [//msdn.microsoft.com/en-us/data/jj193542](http://msdn.microsoft.com/en-us/data/jj193542)了解`Code First`使用`ADO.NET EF`. 问题是在执行代码时数据库不会自动创建，我认为这是因为我的配置，`app.config`但这是我使用真实代码的第一天，我不知道如何调整我的配置文件以便我可以连接到我的服务器并在必要时使用创建的数据库，或者让教程中的程序按照所写的内容创建新数据库。

这是我的`App.config`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>

    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
  <!--  <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory> -->

    <connectionStrings>
      <add name="BloggingContext"
            providerName="System.Data.SqlClient"
            connectionString="server=milka-pc\sqlserver2012;Database=Panorama;user id=MyID;password=MyPass;port=3333;Integrated Security=True;"/>
    </connectionStrings>

    <!--<contexts>
      <context type=" Blogging.BloggingContext, MyAssembly">
        <databaseInitializer type="Blogging.MyCustomBlogInitializer, MyAssembly" />
      </context>
    </contexts>-->

  </entityFramework>
</configuration> 
```

正如你所看到的，当我尝试了各种方法让它工作时，一些部分被评论了。

这就是我尝试连接时服务器资源管理器的样子：

![在此处输入图像描述](../Images/895f99368e582503734d5e63af5096cb.png)

此外，由于我对 ViasualStudioXXXX 和连接到数据库的经验为零，这就是我所看到的以及我选择服务器的方式：

![在此处输入图像描述](../Images/7cbb02b0053bf685d082dac883ba1f22.png)

在那里`milka-pc\sqlserver2012`我有一个名为的数据库`Panorama`，我可以使用它或者更好地按照教程一步一步地离开程序来创建我的新数据库。现在我不能这两个。并且要连接到`milka-pc\sqlserver2012`我需要提供`UserName`并且`Password`我在`App.config`. 我这样说只是为了知道这些字段不是空白的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:59:47.543

如果您确定 milka-pc\sqlserver2012 实际上按照您的建议在端口 3333 上工作

将您的连接字符串更改为：

```
<add name="BloggingContext"
        providerName="System.Data.SqlClient"
        connectionString="server=milka-pc\sqlserver2012,3333;Database=Panorama;user id=MyID;password=MyPass;Integrated Security=True;"/> 
```

只是为了确保使用提供的凭据在您的 SQL 管理工作室中尝试该连接字符串。

如果这不起作用，请咨询您的 sql server 配置管理器，特别是在 SQL server 网络配置下，确保您的实例已启用 TCP/IP 管道并启用了适当的端口。

干杯。

# c# - 我如何找到为什么我得到“抛出'System.Web.HttpUnhandledException'类型的异常”？

> ID：14829319
> 
> 赞同：10
> 
> 时间：2013-02-12T09:29:32.857
> 
> 标签：c#, asp.net, .net

我越来越

```
System.Web.HttpException
Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerWrapper'.
Stack is
at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride)
at System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage)
at System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm)
at System.Web.Mvc.ViewPage.RenderView(ViewContext viewContext)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

内部异常是

```
System.Web.HttpUnhandledException
Exception of type 'System.Web.HttpUnhandledException' was thrown.
Stack is
at System.Web.UI.Page.HandleError(Exception e)
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest()
at System.Web.UI.Page.ProcessRequest(HttpContext context)
at System.Web.Mvc.ViewPage.ProcessRequest(HttpContext context)
at System.Web.Mvc.ViewUserControl.ViewUserControlContainerPage.ProcessRequest(HttpContext context)
at System.Web.Mvc.ViewPage.RenderView(ViewContext viewContext)
at System.Web.Mvc.ViewUserControl.RenderView(ViewContext viewContext)
at System.Web.Mvc.Html.RenderPartialExtensions.RenderPartial(HtmlHelper htmlHelper, String partialViewName)
at ASP.views_mycontroller_myaction_aspx.__RendermyactionContent(HtmlTextWriter __w, Control parameterContainer)
at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
at ASP.views_shared_my_master.__Render__control1(HtmlTextWriter __w, Control parameterContainer)
at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
at System.Web.Mvc.ViewPage.Render(HtmlTextWriter writer)
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
at System.Web.UI.Page.ProcessRequest()
at System.Web.UI.Page.ProcessRequest(HttpContext context)
at System.Web.Mvc.ViewPage.ProcessRequest(HttpContext context)
at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.<>c__DisplayClass4.<Wrap>b__3()
at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.Wrap[TResult](Func`1 func)
at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride) 
```

我在许多其他问题中看到过类似的东西，通常有一些或多或少明确的信息可以从中推断出问题的原因。

就我而言，只有`Exception of type 'System.Web.HttpUnhandledException' was thrown.`

如何从中提取其他信息`HttpUnhandledException`以尝试找出它被抛出的原因？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T12:20:21.807

原来我的代码没有提取`InnerException`. `HttpUnhandledException`我已经获取了 IIS 源（是的，它们可以被正式下载）并发现它`System.Web.UI.Page.HandleError(Exception e)`会抛出`HttpUnhandledException`并传递`e`到它的构造函数中。我希望`InnerException`结果`HttpUnhandledException`有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-26T19:12:47.607

您可以将此代码添加到错误消息中：

```
errorMessage += "\n\n Inner Exception:\n\n" +ex.InnerException; 
```

InnerException 属性将为您提供有关错误的更多详细信息。

我希望它有帮助！

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-14T11:39:50.930

您是否在服务器上部署您的站点，如果是，则转到

C:\WINDOWS \Microsoft.NET\Framework \v2.0.50727\Temporary ASP.NET Files 并删除您的站点文件夹。然后重新启动 IIS。检查应用程序。

# asp.net-mvc - 根据模型中的属性显示不同的图像

> ID：14829324
> 
> 赞同：2
> 
> 时间：2013-02-12T09:29:54.100
> 
> 标签：asp.net-mvc

我需要根据属性的特定值显示不同的图像。
这是我完成这项任务的方式。

我有模型：

```
public class DetailInfoViewModel
{
    public string Status {get; set;}
    public string StatusImageName {get; set;}
    ... other fields
} 
```

在行动中：

```
var model = ...// create view model and fill properties    
model.StatusImageName = GetImageFileNameForStatus(model.Status.ToLower()); 
```

并且，主要方法：

```
private string GetImageFileNameForStatus(string status)
{
    if (status == "payed" || status == "approved")
        return "payed.png";

    if (status == "printed")
        return "not-pay.png";

    if (status == "closed")
        return "closed.png";

    if (status == "transfer")
        return "transfer.png";

    return string.Empty;
} 
```

在视图中，我有简单的 html：

```
<div class="pull-right">
    <img src="@Url.Content("~/Images/" + Model.StatusImageName)"/>
</div> 
```

但是这种方式是丑陋的。如果我重命名图像或打印错误，则此代码将无法正常工作。
有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:03:05.280

为了使其不易出错，请考虑将状态设为枚举

```
enum Status { Payed, Printed, Closed, Approved, Transfer} 
```

并使用[T4MVC](http://t4mvc.codeplex.com/)生成资源的强链接：

```
private string GetImageFileNameForStatus(Status status)
{
    switch(status){
      case Payed:
      case Approved:
        // This is generated by T4MVC for you
        return Links.Content.Images.payed_png;
      case Printed:
        return Links.Content.Images.not_pay_png;          
      // ... etc.
      default:
        return Links.Content.Images.default_png;
    }
} 
```

您可以将信息保存在 a 中，而不是 switch 语句，`Dictionary<Status, string>`但这是一个实现细节。

然后，您可以类似地使用：

```
<img src="@Model.StatusImageName" alt="@Model.Status"/> 
```

注意：记得添加 alt 属性！

如果您重命名图像或移动它们，编译将中断。

对于大多数较小的系统来说，这个解决方案应该是可以接受的。如果您对更复杂的“纯 OOP”解决方案（根据用例可能会受到过度设计的影响）感兴趣，请继续阅读。

从纯粹的 OOP 角度来看，这个开关——虽然相对简单——并不是最漂亮的解决方案。您可能会考虑[状态模式](http://en.wikipedia.org/wiki/State_pattern)（[.NET 实现](http://www.dofactory.com/Patterns/PatternState.aspx)）。

```
interface IStatus{
    string InfoImage{get;}
}

class PayedStatus : IStatus {    
    public string InfoImage{get{return Links.Content.Images.payed_png;}}
}

class PrintedStatus : IStatus {    
    public string InfoImage{get{return Links.Content.Images.not_pay_png;}}
}

// etc. 
```

你的模型：

```
public class DetailInfoViewModel
{
  ... 
  public IStatus Status{get;set;}
} 
```

在您看来：

```
<img src="@Model.Status.InfoImage" alt="Status"/> 
```

如果有特定于给定状态的东西，这种方法会更好。您可以将与特定状态相关的所有内容整齐地封装在相应的 IStatus 实现中。

同样，从面向对象设计的角度来看，UI 细节（要显示的图像）成为模型的一部分感觉很奇怪。另一方面，它是一个视图模型，为什么不呢。如果您想采用顽固的 OOP 并且系统复杂性和要求保证它，您可以考虑[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)（[.NET 实现](http://www.dofactory.com/Patterns/PatternVisitor.aspx)）：

```
interface IStatusVisitor<T>{
   T VisitPayedStatus<T>(PayedStatus status);
   T PrintedStatus<T>(PrintedStatus status);
   // ...
}

interface IStatus{
    T Accept(IStatusVisitor<T> visitor);
}

class PayedStatus : IStatus {    
    public T Accept(IStatusVisitor<T> visitor){
        return visitor.VisitPayedStatus(this);
    }
}

class PrintedStatus : IStatus {    
    public T Accept(IStatusVisitor<T> visitor){
        return visitor.VisitPrintedStatus(this);
    }
}

class InfoImageVisitor : IStatusVisitor<string>{

  public string VisitPayedStatus(PayedStatus status){
    return Links.Content.Images.payed_png;
  }

  public string VisitPrintedStatus(PrintedStatus status){
    return Links.Content.Images.not_pay_png;
  }

}

<img src="@Model.Accept(new InfoImageVisitor())" alt="Status"/> 
```

通过这种方式，您可以将有关信息图像的所有内容从状态类移到单独的类中。

但正如我所说，这已经可以被认为是过度设计的案例。这取决于您的系统的要求。

作为一般说明：阅读设计模式绝对值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:36:53.090

我不知道这是最好的方法，但是您可以将 imageName 定义为状态名称，我的意思是

```
status | statusImage |
----------------------
 payed |   payed.png |
closed |  closed.png |
   ... |         ... | 
```

然后

```
<div class="pull-right">
    <img src="@Url.Content("~/Images/" + Model.Status) + ".png""/>
</div> 
```

# javascript - 如何在 x64 MacOS X 10.7 上检查 `node --prof` 的结果？

> ID：14829325
> 
> 赞同：12
> 
> 时间：2013-02-12T09:29:59.037
> 
> 标签：javascript, macos, node.js, profiling

我尝试在 CLI 上分析我的 node.js 脚本。

[如https://code.google.com/p/v8/wiki/V8Profiler](https://code.google.com/p/v8/wiki/V8Profiler)或[http://blog.arc90.com/2012/03/05/profiling-node-programs-on-mac-os-](http://blog.arc90.com/2012/03/05/profiling-node-programs-on-mac-os-x/)所写[x/](http://blog.arc90.com/2012/03/05/profiling-node-programs-on-mac-os-x/)做：

```
$ node --prof my_script.js 
```

好的，我得到`v8.log`了用一堆行命名的文件。

但随后在检查工具中都出错了。

```
$ tools/mac-tick-processor v8.log 
```

给我看

```
Statistical profiling result from v8.log, (298 ticks, 237 unaccounted, 0 excluded). 
```

和空的**JavaScript**部分。

```
[JavaScript]:
  ticks  total  nonlib   name 
```

我也尝试了[https://github.com/bnoordhuis/node-profiler](https://github.com/bnoordhuis/node-profiler)，但也得到了一些结果。

我如何使用 --prof 结果？

```
$ node -v
v0.8.18

$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.7.4
BuildVersion:   11E53 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T23:10:10.120

正如@Dogbert 所建议的，您可以使用[github.com/sidorares/node-tick](https://github.com/sidorares/node-tick)

如果您缺少任何功能，请随时创建拉取请求。我已经有一段时间没有更新它了，它似乎仍然有效

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-04T06:07:53.067

在节点 4.4.0 之后：

`node --prof-process isolate-0xnnnnnnnnnnnn-v8.log > processed.txt`

来自：[https ://nodejs.org/en/docs/guides/simple-profiling/](https://nodejs.org/en/docs/guides/simple-profiling/)

# state-machine - 在 state_machine gem 中的多条记录上触发事件

> ID：14829332
> 
> 赞同：3
> 
> 时间：2013-02-12T09:30:11.627
> 
> 标签：state-machine

我正在使用 state_machine 来转换我的一个模型中的状态。转换成功地发生在单个记录上。但是如果我必须在多条记录上触发一个事件该怎么办。我可以在多条记录中进行转换

```
 @records.each &:event 
```

但是此方法执行查询的次数与`@records`. 如何触发事件以仅通过一个查询进行状态转换。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T18:53:04.697

在 Rails (4) 中，这可以使用[`B#transaction`](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)(or `B#save`) 来完成，如[SO: save an active records array](https://stackoverflow.com/questions/2292815/save-an-active-records-array)中所述。

我对 200 条记录运行一个简单的 state_machine 事件进行了基准测试，结果如下所示。

代替：

```
@records.each &:event
# Completed 302 Found in 1700ms (ActiveRecord: 778.6ms) 
```

做：

```
ActiveRecord::Base.transaction do
    @records.each &:event
end
# Completed 302 Found in 977ms (ActiveRecord: 73.4ms) 
```

如前面链接的 SO 答案中所述，这会将这些事务包装为一个原子操作。

**注意**：可能存在这无法解决的错误处理边缘情况。

# ruby - 在 OS X Mountain Lion 上通过 RVM 安装 Ruby 时运行“make”时出错

> ID：14829334
> 
> 赞同：4
> 
> 时间：2013-02-12T09:30:23.193
> 
> 标签：ruby, macos, makefile, rvm

这是我第一次使用 Ruby。我意识到不要使用 sudo 来安装 Gems，所以我按照这个教程（[http://pragmaticstudio.com/blog/2010/9/23/install-rails-ruby-mac](http://pragmaticstudio.com/blog/2010/9/23/install-rails-ruby-mac)）安装 RVM 以便我可以更新我的版本Ruby，然后安装 Middleman ( [http://middlemanapp.com/](http://middlemanapp.com/) )。

RVM 安装成功，但在“#compiling”阶段安装 Ruby 1.9.3 时出现以下错误：

> 运行“make”时出错，请阅读 /Users/Mark/.rvm/log/ruby-1.9.3-p385/make.log 运行 make 时出错。停止安装。

我打开了日志文件，与我见过的许多其他问题不同，该文件不包含对“readline”的引用，而是对“编译”的引用，我认为这与 Ruby 安装的“#compiling”阶段有关。以下是 make.log 的输出：

```
[2013-02-12 09:04:26] make
    CC = clang
    LD = ld
    LDSHARED = clang -dynamic -bundle
    CFLAGS = -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration  -pipe 
    XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT
    CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/Users/Mark/.rvm/usr/include -I. -I.ext/include/x86_64-darwin12.2.0 -I./include -I.
    DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  
    SOLIBS = 
compiling main.c
compiling dmydln.c
compiling dmyencoding.c
compiling version.c
compiling dmyversion.c
compiling miniprelude.c
compiling array.c
compiling bignum.c
bignum.c:2732:26: warning: while loop has empty body [-Wempty-body]
        while (--ny && !zds[ny]); ++ny;
                                ^
bignum.c:2732:26: note: put the semicolon on a separate line to silence this warning
1 warning generated.
compiling class.c
compiling compar.c
compiling complex.c
compiling dir.c
compiling dln_find.c
compiling enum.c
compiling enumerator.c
compiling error.c
compiling eval.c
compiling load.c
compiling proc.c
compiling file.c
compiling gc.c
gc.c:3060:1: warning: unused function 'chain_finalized_object' [-Wunused-function]
chain_finalized_object(st_data_t key, st_data_t val, st_data_t arg)
^
1 warning generated.
compiling hash.c
compiling inits.c
compiling io.c
compiling marshal.c
compiling math.c
compiling node.c
compiling numeric.c
compiling object.c
compiling pack.c
compiling parse.c
compiling process.c
compiling random.c
compiling range.c
compiling rational.c
compiling re.c
compiling regcomp.c
compiling regenc.c
compiling regerror.c
compiling regexec.c
compiling regparse.c
regparse.c:582:15: error: implicit conversion loses integer precision: 'st_index_t' (aka 'unsigned long') to 'int' [-Werror,-Wshorten-64-to-32]
    return t->num_entries;
    ~~~~~~ ~~~^~~~~~~~~~~
1 error generated.
make: *** [regparse.o] Error 1 
```

如果我运行'make --version'，我会得到以下输出：

> GNU Make 3.81 版权所有 (C) 2006 Free Software Foundation, Inc. 这是免费软件；查看复制条件的来源。没有保修；甚至不考虑适销性或特定用途的适用性。
> 
> 该程序为 i386-apple-darwin11.3.0 构建

我正在努力寻找一个完全匹配的问题，所以如果有人能提供帮助，那就太好了。

干杯，

标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:27:29.133

我在这里和其他链接和谷歌搜索的帖子中遵循了一些建议，但最后，通过 Homebrew 更新 GCC 是最终让 Ruby 安装编译和完成的原因。

我用于更新 GCC 的特定链接：[在 Mac OS X 10.8.2 上安装 Ruby](https://stackoverflow.com/questions/14662569/installing-ruby-on-mac-os-x-10-8-2)

所以感谢所有的帮助，我不确定它是所有更新和清理以及 GCC 还是只是 GCC 的组合，但我已经启动并运行了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:05:26.700

尽管您没有看到错误，但实际上是由 readline 引起的。正如 atmosx 所提到的，我将删除默认的 MAC OS X 安装的 ruby​​ 并从头开始遵循该过程。

或者按照这个[https://rvm.io/packages/readline/](https://rvm.io/packages/readline/)来帮助解决 readline。另请参阅上一个问题：[Error running make when installed Ruby 1.8.7-p302 via RVM on Mac OS 10.5.8](https://stackoverflow.com/questions/8338371/error-running-make-when-installing-ruby-1-8-7-p302-via-rvm-on-mac-os-10-5-8)

> 所以完整的步骤是：

```
rvm pkg install readline 
rvm remove 1.8.7 
rvm cleanup all 
rvm install 1.8.7 -C –with-readline-dir=$rvm_path/usr 
```

感谢 Andrew 在[http://anlek.com/2011/01/rvm-install-1-8-7-p330-fails/](http://anlek.com/2011/01/rvm-install-1-8-7-p330-fails/)提供的指针。

# sublimetext2 - Sublime Text 2 中区分大小写的 Cmd+D

> ID：14829336
> 
> 赞同：129
> 
> 时间：2013-02-12T09:30:28.237
> 
> 标签：sublimetext2

在 ST2`⌘+D`中，使用不区分大小写的匹配将选择扩展到下一个单词。是否可以匹配单词区分大小写？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2013-02-12T11:07:32.903

如果您`Case sensitive`在`Find`对话框 ( `⌘+F`) 中选择，它也会被记住`⌘+D`。

![在此处输入图像描述](../Images/ba7eb95de63381feffdbfb968e4142c8.png)

[![在此处输入图像描述](../Images/b03825508f596f6d321f9d9816574c34.png)](https://i.stack.imgur.com/qisDI.png)

# php - magento 自定义模块日志功能

> ID：14829345
> 
> 赞同：0
> 
> 时间：2013-02-12T09:31:12.953
> 
> 标签：php, magento

我在 Magento 中创建了一个自定义模块。现在我想在日志/调试文件中记录（调试）我的模块流程和处理功能。

我知道 Mage::Log() 函数会这样做，但我想用我自己的日志文件自定义它。这样我就可以在另一个窗口中查看它。

我应该在哪里编写 Logger 方法，以便我可以访问 Module 的所有资源中的方法，如 Module、Block、Controller 和 Helpers ..

请帮我-

-普拉文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:36:37.647

您可以使用方法从`/app/Mage.php`

```
public static function log($message, $level = null, $file = '', $forceLog = false) 
```

3d 参数是文件，你可以指定它，所有的日志信息都会在里面。

```
Mage::log('Some exseption', Zend_Log::ERR, 'my_module.log'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T13:56:35.737

如果我正确理解您的问题；放置这种方法的最佳位置是在模块的助手中。

**app/code/local/My/Module/Helper/Data.php**：

```
class My_Module_Helper_Data extends Mage_Core_Helper_Data
{
    public function myLog( $desc, $val, $log = 'my_module.log' ) {
        return Mage::log( $desc, $val, $log );
    }
} 
```

这样你就可以通过模块助手类调用你自己的日志：

```
Mage::helper('my_module')->myLog( 'A variable: ', $val ); 
```

但是，我同意@viakondratiuk 的观点，这可能不是一个好主意，因为它比默认`Mage::log`方法更复杂。

# hadoop - 在 Windows 7 上安装 Hadoop 无法执行 hadoop namenode –format

> ID：14829346
> 
> 赞同：2
> 
> 时间：2013-02-12T09:31:13.310
> 
> 标签：hadoop

我是第一次在 Windows 7 上使用这个博客安装 Hadoop：http: [//blog.sqltrainer.com/2012/01/installing-and-configuring-apache.html](http://blog.sqltrainer.com/2012/01/installing-and-configuring-apache.html)

1.  使用包 openssh 作为服务安装 Cygwin
2.  下载并解压hadoop-1.0.4
3.  配置 JAVA_HOME 然后检查：

    $ bin/hadoop 版本

    ```
    Hadoop 1.0.4 
    Subversion svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1393290 
    Compiled by hortonfo on Wed Oct  3 05:13:58 UTC 2012 
    From source with checksum fe2baea87c4c81a2c505767f3f9b71f4 
    ```

4.  hdfs-site.xml 内容：

    ```
    <configuration>
    <property>
        <name>fs.default.name</name>
        <value>hdfs://localhost:47110</value>
    </property>
    <property>
        <name>mapred.job.tracker</name>
        <value>localhost:47111</value>
    </property>
    <property>
        <name>dfs.replication</name>
        <value>2</value>
    </property>
    </configuration> 
    ```

5.  mapred-site.xml 内容：

    ```
    <configuration>
    <property>
        <name>mapred.job.tracker</name>
        <value>localhost:8021</value>
    </property>
    </configuration> 
    ```

6.  当我尝试格式化磁盘空间时，我得到：

    $ ./bin/hadoop 名称节点 –format

    ```
    13/02/12 10:16:34 INFO namenode.NameNode: 
    STARTUP_MSG: /************************************************************ 
    STARTUP_MSG: Starting NameNode 
    STARTUP_MSG:   host = GUY-PC/192.168.1.5 
    STARTUP_MSG:   args = [▒format] 
    STARTUP_MSG:   version = 1.0.4 
    STARTUP_MSG:   build = svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1393290; compiled by 'hortonfo' on Wed Oct  3 05:13:58 UTC 2012
    ************************************************************/ 
    Usage: java NameNode [-format] | [-upgrade] | [-rollback] | [-finalize] | [-importCheckpoint] 13/02/12 10:16:34 INFO namenode.NameNode: 
    SHUTDOWN_MSG: /************************************************************ 
    SHUTDOWN_MSG: Shutting down NameNode at GUY-PC/192.168.1.5 
    ************************************************************/ 
    ```

7.  当我尝试开始时，我得到：

    $ bin/start-dfs.sh

    ```
    starting namenode, logging to /usr/local/hadoop/libexec/../logs/hadoop-guy-namenode-GUY-PC.out
    localhost: Connection closed by 127.0.0.1
    localhost: Connection closed by 127.0.0.1

    log  hadoop-guy-namenode-GUY-PC.log content:

    2013-02-12 10:21:27,101 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: 
    STARTUP_MSG:  /************************************************************ 
    STARTUP_MSG: Starting NameNode STARTUP_MSG:   host = GUY-PC/192.168.1.5 
    STARTUP_MSG:   args = [] 
    STARTUP_MSG:   version = 1.0.4 
    STARTUP_MSG:   build = svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1393290; compiled by 'hortonfo' on Wed Oct  3 05:13:58 UTC 2012
    ************************************************************/ 
    2013-02-12 10:21:27,187 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties 
    2013-02-12 10:21:27,194 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered. 
    2013-02-12 10:21:27,195 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s). 
    2013-02-12 10:21:27,195 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started 
    2013-02-12 10:21:27,244 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered. 
    2013-02-12 10:21:27,248 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered. 
    2013-02-12 10:21:27,249 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered. 
    2013-02-12 10:21:27,259 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 32-bit 
    2013-02-12 10:21:27,259 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 19.33375 MB 
    2013-02-12 10:21:27,259 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^22 = 4194304 entries 
    2013-02-12 10:21:27,259 INFO org.apache.hadoop.hdfs.util.GSet: recommended=4194304, actual=4194304 
    2013-02-12 10:21:27,285 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=guy 
    2013-02-12 10:21:27,285 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup 
    2013-02-12 10:21:27,285 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=true 
    2013-02-12 10:21:27,288 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100 
    2013-02-12 10:21:27,288 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s) 
    2013-02-12 10:21:27,356 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean 
    2013-02-12 10:21:27,370 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times  
    2013-02-12 10:21:27,372 INFO org.apache.hadoop.hdfs.server.common.Storage: Storage directory C:\tmp\hadoop-guy\dfs\name does not exist. 
    2013-02-12 10:21:27,373 ERROR org.apache.hadoop.hdfs.server.namenode.FSNamesystem: FSNamesystem initialization failed. 
    org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: 
    Directory C:\tmp\hadoop-guy\dfs\name is in an inconsistent state: 
    storage directory does not exist or is not accessible.  at
    org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:303)  at
    org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:100)    at
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:388)   at
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:362)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:496)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1279)  at
    org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1288) 
    2013-02-12 10:21:27,373 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode:
    org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: 
    Directory C:\tmp\hadoop-guy\dfs\name is in an inconsistent state: 
    storage directory does not exist or is not accessible.  at
    org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:303)  at
    org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:100)    at
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:388)   at      
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:362)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:496)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1279)  at
    org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1288)
    2013-02-12 10:21:27,374 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: 
    SHUTDOWN_MSG:  /************************************************************ 
    SHUTDOWN_MSG: Shutting down NameNode at GUY-PC/192.168.1.5
    ************************************************************/ 
    2013-02-12 10:25:50,186 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: 
    STARTUP_MSG:  /************************************************************ 
    STARTUP_MSG: Starting NameNode 
    STARTUP_MSG:   host = GUY-PC/192.168.1.5 
    STARTUP_MSG:   args = [] 
    STARTUP_MSG:   version = 1.0.4 
    STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1393290; compiled by 'hortonfo' on Wed Oct  3 05:13:58 UTC 2012
    ************************************************************/ 
    2013-02-12 10:25:50,270 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties 
    2013-02-12 10:25:50,276 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered. 
    2013-02-12 10:25:50,277 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s). 
    2013-02-12 10:25:50,277 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started 
    2013-02-12 10:25:50,326 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered. 
    2013-02-12 10:25:50,330 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered. 
    2013-02-12 10:25:50,330 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered. 
    2013-02-12 10:25:50,340 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 32-bit 
    2013-02-12 10:25:50,341 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 19.33375 MB 
    2013-02-12 10:25:50,341 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^22 = 4194304 entries 
    2013-02-12 10:25:50,341 INFO org.apache.hadoop.hdfs.util.GSet: recommended=4194304, actual=4194304 
    2013-02-12 10:25:50,367 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=guy 
    2013-02-12 10:25:50,367 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup 
    2013-02-12 10:25:50,367 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=true 
    2013-02-12 10:25:50,369 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100 
    2013-02-12 10:25:50,370 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s) 
    2013-02-12 10:25:50,436 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean 
    2013-02-12 10:25:50,450 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times  
    2013-02-12 10:25:50,452 INFO org.apache.hadoop.hdfs.server.common.Storage: Storage directory C:\tmp\hadoop-guy\dfs\name does not exist. 
    2013-02-12 10:25:50,453 ERROR org.apache.hadoop.hdfs.server.namenode.FSNamesystem: FSNamesystem initialization failed. 
    org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: 
    Directory C:\tmp\hadoop-guy\dfs\name is in an inconsistent state: 
    storage directory does not exist or is not accessible.  at
    org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:303)  at
    org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:100)    at
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:388)   at
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:362)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:496)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1279)  at
    org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1288) 
    2013-02-12 10:25:50,454 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode:
    org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: 
    Directory C:\tmp\hadoop-guy\dfs\name is in an inconsistent state: 
    storage directory does not exist or is not accessible.  at
    org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:303)  at
    org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:100)    at
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:388)   at
    org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:362)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:496)   at
    org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1279)  at
    org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1288)    
    2013-02-12 10:25:50,454 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: 
    SHUTDOWN_MSG:  /************************************************************ 
    SHUTDOWN_MSG: Shutting down NameNode at GUY-PC/192.168.1.5
    ************************************************************/ 
    ```

当我在网上搜索我的异常时，我得到了运行的答案：`hadoop namenode –format`就像我在第 6 节中所做的那样。

请帮忙。

我解决了这个问题：我复制了命令：`hadoop namenode –format`从互联网页面。当我用键盘简单地写下字符“-”时，它就起作用了。

# matlab - Matlab - 单元格数组并给出具有不同索引的变量名称

> ID：14829350
> 
> 赞同：-3
> 
> 时间：2013-02-12T09:31:19.993
> 
> 标签：matlab, for-loop, cell-array

我正在尝试制作一个将返回以下内容的内容`for-loop`：`matlab`

```
C_1 = 0
C_2 = 0
C_3 = 0
C_4 = 0
C_5 = 0 
```

但是，在此*之前*，我还想要一个值如下：`C_0 = 0`.

我试了一下，但没有奏效：

```
function test
    C{0} = 0;
    for i=1:5
        C{i} = 0
    end
end 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:39:44.967

简单的答案：你不能使用`C{0}`

简单的解决方法：

将所有索引加 1，使用`C{1}`to`C{6}`而不是`C{0}`to`C{5}`

对于复杂的答案，请查看@Oli 给出的链接

# asp.net - htm 文件作为 asp.net 中的资源？

> ID：14829351
> 
> 赞同：1
> 
> 时间：2013-02-12T09:31:21.473
> 
> 标签：asp.net, resources, html-email, globalization

我的网站是全球化的。对于电子邮件通知，我使用 .htm 文件作为电子邮件正文。有没有办法让每种语言都有一个 .htm 文件，并根据浏览器的文化设置调用该文件？我为页面上的所有字符串执行此操作，但我找不到将 .htm 文件添加到资源集的方法。最好的方法是什么？我真的需要翻译我的网站电子邮件通知，但我正在为此苦苦挣扎。

任何帮助或正确方向的观点表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:35:40.723

由于 .htm 文件是静态文件，因此它们无法本地化。这就是我所做的。不要使用 mail.htm，而是使用 mail_en-US.htm、mail_tr-TR.htm 等。

`string file = String.Format("mail_{0}.htm" , Thread.CurrentUICulture);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:35:37.610

电子邮件将发送，然后其中包含的内容是静态的，您无法更改它。

您可以做的是检查用户语言并在第一时间发送正确的html文件。

所以诀窍是你发送什么。

# iphone - 读/写列表

> ID：14829352
> 
> 赞同：1
> 
> 时间：2013-02-12T09:31:24.967
> 
> 标签：iphone, plist

我对读/写 plist 有一些疑问。我用这个 cos 来阅读 plist

```
NSString *strFilePath = [ [NSBundle mainBundle] pathForResource:@"miodb" ofType:@"plist" ] ;

NSMutableDictionary *dictMioDB = [[NSMutableDictionary alloc] initWithContentsOfFile:strFilePath] ;

NSString *strValue ;
strValue = [dictMioDB objectForKey: @"stringa1" ] ;
NSLog( @"%@" , strValue ) ; 
```

对于写 plist，我使用以下代码：

```
NSString *strFilePath = [ [NSBundle mainBundle] pathForResource:@"miodb" ofType:@"plist" ] ;
NSLog( @"%@" , strFilePath ) ;

NSMutableDictionary *dictMioDB = [[NSMutableDictionary alloc] initWithContentsOfFile:strFilePath] ;

NSString *strTextField = [NSString stringWithFormat: @"%@" , [txtField text] ] ;

// ga - salvataggio del valore nella chiave nel NSMutableDictionary
[dictMioDB setValue: strTextField forKey:@"stringa1"];
[dictMioDB writeToFile: strFilePath atomically:YES]; 
```

现在的问题是 plist 必须保存在 Documents 目录中所以我使用了这段代码：

```
//percorso file su cartella documents
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *path = [documentsDir stringByAppendingPathComponent:@"iOre.sqlite"];
    //[[NSFileManager defaultManager] removeItemAtPath:path error:nil];

//controllo se il file esiste
if(![[NSFileManager defaultManager] fileExistsAtPath:path])
{
    //se non esiste lo copio nella cartella cosuments
    NSString *pathLocale=[[NSBundle mainBundle] pathForResource:@"iOre" ofType:@"sqlite"];
    if ([[NSFileManager defaultManager] copyItemAtPath:pathLocale toPath:path error:nil] == YES) 
    {
        NSLog(@"copia eseguita");
    }
} 
```

现在我已经加入了这两条代码：

```
 //percorso file su cartella documents
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *path = [documentsDir stringByAppendingPathComponent:@"LevelsD.plist"];
[[NSFileManager defaultManager] removeItemAtPath:path error:nil];

NSString *pathLocale;

//controllo se il file esiste
if(![[NSFileManager defaultManager] fileExistsAtPath:path])
{
    //se non esiste lo copio nella cartella documents
    pathLocale=[[NSBundle mainBundle] pathForResource:@"LevelsD" ofType:@"plist"];
    if ([[NSFileManager defaultManager] copyItemAtPath:pathLocale toPath:path error:nil] == YES)
    {
        NSLog(@"copia eseguita");
    }
}

// ga - trovo la posizione del .plist
//NSString *strFilePath = [ [NSBundle mainBundle] pathForResource:@"LevelsD" ofType:@"plist" ] ;
NSLog( @"%@" ,documentsDir) ;

// ga - copio tutto il .plist (la root è un Dictionary) in un NSMutableDictionary
NSMutableDictionary *dictMioDB = [[NSMutableDictionary alloc] initWithContentsOfFile:documentsDir] ;

NSString * txtField = @"1";

//NSString *strTextField = [NSString stringWithFormat: @"%@" , txtField ] ;

// ga - salvataggio del valore nella chiave nel NSMutableDictionary
[dictMioDB setValue: txtField forKey:@"LevelHere1"];
[dictMioDB writeToFile: pathLocale atomically:YES]; 
```

这不起作用，但现在我有一些疑问。在我的 plist 文件中，我看不到任何更改，但“txtField”的值可能已保存到“dictMioDB”中吗？如何查看记录/字符串是否插入到我的 plis 中？另一个疑问：当我使用模拟器将内容写入 Document 文件夹时，当我关闭它或重新编译应用程序时，数据将被删除？在 Iphone 中，当我删除应用程序时，这些数据会被删除吗？对？最后一个问题：当我读取文件夹中的 plist 时，我可以使用自动搜索 plist 路径的第一行代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:44:08.093

写入文件时，您做错了，因为您无法将文件写入主包。它必须写在文档目录中：

```
+ (NSString *) getFilePathInDocsDir: (NSString *)fileName
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                 NSUserDomainMask, YES);

    NSString *docsDir = documentPaths[0];
    NSString *filePathInDocsDir = [docsDir stringByAppendingPathComponent:fileName];
    return filePathInDocsDir;
} 
```

所以使用这个函数并将文件只写入返回的路径，而不是在主包中

# jquery - 如何使用 jquery 使制表符序列适用于图像？

> ID：14829355
> 
> 赞同：1
> 
> 时间：2013-02-12T09:31:35.180
> 
> 标签：jquery

我将图像用作按钮，然后为其编写单击事件，但是当我尝试为其提供选项卡序列时，它并没有聚焦图像。以下是我用来添加制表符序列的代码行：

```
$("#element").attr('tab-sequence', 21); 
```

但它不起作用。

还有其他建议可以帮助我解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:33:44.740

尝试：

```
$("#element").attr('tabindex', 21); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:35:23.483

改变，

```
$("#element").attr('tab-sequence', 21); 
```

至

```
$("#element").attr('tabindex', 21); 
```

另外，确保每个元素的 id 都是唯一的

# iphone - 带图像和表格视图的视图在手机上看起来不像在界面生成器上看起来一样

> ID：14829359
> 
> 赞同：0
> 
> 时间：2013-02-12T09:31:50.500
> 
> 标签：iphone, ios, objective-c, xcode

我有一个包含 ImageView 和 tableview 的视图。图像很好-分辨率很好，在界面生成器中看起来还可以：一半屏幕带有图像，一半屏幕带有表格视图。宽度和高度设置正确。当我在手机（iphone 4 with 5.1）上运行时，它不会仅全屏显示图像。我已经完成了另一个 xib，在这种情况下，另一个奇怪的行为它在表格后的空白后显示图像非常小。我不知道为什么在 IB 上它看起来不错，而在 iphone 上却不行。图像质量很好，所以我认为不是因为它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:49:06.920

转到属性检查器并检查为您的 xib 文件选择的大小类型。相应地改变它。现在默认设置为 Retina 4 全屏，将其更改为自由格式并设置为标准 iphone 4 尺寸，还有一件事你在使用 AutoLayout ???

# sql - 从多行返回值作为列

> ID：14829361
> 
> 赞同：2
> 
> 时间：2013-02-12T09:31:57.587
> 
> 标签：sql, oracle, pivot

是否可以将每个相同 id 的多个行值作为一列返回？

如果我的表是：

```
ID     | Value  |Column_data
--------------------------------  
1      | a      |  DATA1
1      | b      |  DATA1
2      | c      |  DATA2 
2      | x      |  DATA2 
3      | y      |  DATA3 
3      | z      |  DATA3 
```

（每个 Id 总是有 2 个值）

选择应该返回：

1,a,b,DATA1
2,c,x,DATA2
3,y,z,DATA3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:38:49.407

或`listagg(col2) over (...)`11 克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:18:15.840

您没有说明您使用的是什么版本的 Oracle，但如果您使用的是 Oracle 11g+，那么您可以使用以下`PIVOT`函数将此数据转换为列：

```
select id,
  C1,
  C2,
  column_data
from
(
  select id, value, column_data,
    row_number() over(partition by id order by id, value) rn
  from yourtable
) 
pivot
(
  max(value)
  for rn in ('1' as C1, '2' as C2)
) 
order by id 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/e1811/4)。

在 Oracle 11g 之前，您可以使用带有`CASE`表达式的聚合函数将行转换为列：

```
select id,
  max(case when rn = 1 then value end) C1,
  max(case when rn = 2 then value end) C2,
  column_data
from
(
  select id, value, column_data,
    row_number() over(partition by id order by id, value) rn
  from yourtable
) 
group by id, column_data
order by id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/e1811/8)

两个查询的结果是：

```
| ID | C1 | C2 | COLUMN_DATA |
------------------------------
|  1 |  a |  b |       DATA1 |
|  2 |  c |  x |       DATA2 |
|  3 |  y |  z |       DATA3 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:34:08.957

你可以使用pivot，看看这里：

[http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:10:20.100

你可以尝试这样的事情：

```
with t as ( select id, Column_data, xmlagg(xmlelement("e", Value)) xl 
from table1
group by id, Column_data)
select id, 
       extract(xl, 'e[1]/text()').getstringval() c1, 
       extract(xl, 'e[2]/text()').getstringval() c2, 
       Column_data
from t 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/b8782/22)

# c# - 在 C# 中使用 windows API 检查对话框事件

> ID：14829362
> 
> 赞同：0
> 
> 时间：2013-02-12T09:32:00.490
> 
> 标签：c#, winapi, office-interop, dialog, powerpoint-2010

我正在尝试使用 C#.net 检查 powerpoint 2010 中的对话框打开和关闭事件（例如：另存为对话框）。有没有其他方法可以了解事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:46:16.150

您可以使用 windows 消息来了解窗口何时打开。

看看[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632645%28v=vs.85%29.aspx)。这应该为您指明正确的方向

**WM_SHOWWINDOW 消息 (Windows)** *当窗口即将被隐藏或显示时发送到窗口。窗口通过其 WindowProc 函数接收此消息。*

# entity-framework - 为什么 EF 不更新导航属性

> ID：14829371
> 
> 赞同：2
> 
> 时间：2013-02-12T09:32:27.357
> 
> 标签：entity-framework

我在 >Net 4.0 上使用 Code First EF 5.0，我有 2 个类：

```
public partial class Kennel
{
    public Kennel()
    {
        this.Brands = new List<Brand>();
        this.Dogs = new List<Dog>();
        this.Breeds = new List<Breed>();
        this.Owners = new List<Person>();
        this.Name1 = new KennelName();
        this.Name2 = new KennelName();
    }

    public int ID { get; set; }
    public /*DogClub*/int Type { get; set; }
    public KennelName Name1 { get; set; }
    public KennelName Name2 { get; set; }
    public string CertificateNumber { get; set; }
    public System.DateTime? AssigmentDate { get; set; }
    public string Folder { get; set; }
    public string Comment { get; set; }
    public int StatusID { get; set; }
    public int? FederationID { get; set; }
    public int? MainOwnerID { get; set; }
    public int? MainBreedID { get; set; }

    public virtual ICollection<Brand> Brands { get; set; }
    public virtual ICollection<Dog> Dogs { get; set; }
    public virtual Breed MainBreed { get; set; }
    public virtual Federation Federation { get; set; }
    public virtual Status Status { get; set; }
    public virtual Person MainOwner { get; set; }
    public virtual ICollection<Breed> Breeds { get; set; }
    public virtual ICollection<Person> Owners { get; set; }
}

public partial class Breed
{
    public Breed()
    {
        this.Dogs = new List<Dog>();
        this.ExpertKerungs = new List<ExpertKerung>();
        this.Hallmarks = new List<Hallmark>();
        this.Colors = new List<Color>();
        this.ExpertBreeds = new List<ExpertBreed>();
        this.Kennels = new List<Kennel>();
        this.MainKennels = new List<Kennel>();
    }

    public int ID { get; set; }
    public string FciNumber { get; set; }
    public string Name { get; set; }
    public int BreedGroupID { get; set; }
    public bool IsKerung { get; set; }
    public string NameLat { get; set; }
    public string NativeName { get; set; }
    public int CountryID { get; set; }
    public System.DateTime? StandardDate { get; set; }
    public bool IsCACIB { get; set; }
    public bool IsWork { get; set; }

    public virtual BreedGroup BreedGroup { get; set; }
    public virtual ICollection<Dog> Dogs { get; set; }
    public virtual ICollection<ExpertKerung> ExpertKerungs { get; set; }
    public virtual ICollection<Hallmark> Hallmarks { get; set; }
    public virtual ICollection<Color> Colors { get; set; }
    public virtual Country Country { get; set; }
    public virtual ICollection<ExpertBreed> ExpertBreeds { get; set; }
    public virtual ICollection<Kennel> Kennels { get; set; }
    public virtual ICollection<Kennel> MainKennels { get; set; }
} 
```

和映射：

```
public class KennelMap : EntityTypeConfiguration<Kennel>
{
    public KennelMap()
    {
        // Primary Key
        this.HasKey(t => t.ID);

        // Properties
        //this.Property(t => t.Name1.Name)
        //    .IsRequired();

        //this.Property(t => t.Name1.IntlName)
        //    .IsRequired();

        //this.Property(t => t.Name2.Name)
        //    .IsRequired();

        //this.Property(t => t.Name2.IntlName)
        //    .IsRequired();

        // Table & Column Mappings
        this.ToTable("Kennels");
        this.Property(t => t.ID).HasColumnName("ID");
        this.Property(t => t.Type).HasColumnName("Type");
        this.Property(t => t.Name1.Name).HasColumnName("Name1_Name");
        this.Property(t => t.Name1.IntlName).HasColumnName("Name1_IntlName");
        this.Property(t => t.Name1.Type).HasColumnName("Name1_Type");
        this.Property(t => t.Name1.Approved).HasColumnName("Name1_Approved");
        this.Property(t => t.Name2.Name).HasColumnName("Name2_Name");
        this.Property(t => t.Name2.IntlName).HasColumnName("Name2_IntlName");
        this.Property(t => t.Name2.Type).HasColumnName("Name2_Type");
        this.Property(t => t.Name2.Approved).HasColumnName("Name2_Approved");
        this.Property(t => t.CertificateNumber).HasColumnName("CertificateNumber");
        this.Property(t => t.AssigmentDate).HasColumnName("AssigmentDate");
        this.Property(t => t.Folder).HasColumnName("Folder");
        this.Property(t => t.Comment).HasColumnName("Comment");
        this.Property(t => t.StatusID).HasColumnName("StatusID");
        this.Property(t => t.FederationID).HasColumnName("FederationID");
        this.Property(t => t.MainOwnerID).HasColumnName("MainOwnerID");

        // Relationships
        this.HasMany(t => t.Owners)
                .WithMany(t => t.Kennels)
                .Map(m =>
                        {
                            m.ToTable("OwnerKennel");
                            m.MapLeftKey("Kennels_ID");
                            m.MapRightKey("Owners_ID");
                        });

        this.HasOptional(t => t.MainBreed)
                .WithMany(t => t.MainKennels)
                .HasForeignKey(d => d.MainBreedID);
        this.HasOptional(t => t.Federation)
                .WithMany(t => t.Kennels)
                .HasForeignKey(d => d.FederationID);
        this.HasRequired(t => t.Status)
                .WithMany(t => t.Kennels)
                .HasForeignKey(d => d.StatusID);
        this.HasOptional(t => t.MainOwner)
                .WithMany(t => t.MainKennels)
                .HasForeignKey(d => d.MainOwnerID)
                .WillCascadeOnDelete(false);

    }
} 
```

如果我写下一个代码：

```
 int breedID = 1; // some value  
  Breed br = _kennel.Breeds.FirstOrDefault(t => t.ID == breedID);  
  if (br != null)  
  {  
    _kennel.MainBreed = br;  
    // but: _kennel.MainBreedID != br.ID  
  } 
```

或者：

```
 int breedID = 1; // some value  
  Breed br = _kennel.Breeds.FirstOrDefault(t => t.ID == breedID);  
  if (br != null)  
  {  
    _kennel.MainBreedID = breedID;  
    // but: _kennel.MainBreed != br  
  } 
```

为什么 EF 不更新导航属性？我设置了 ProxyCreationEnabled 和 AutoDetectChangesEnabled，但这不起作用。

查看示例代码的另一个示例（它准确地反映了我的真实应用程序代码）：

```
Kennel kennel = ctx.Kennels.Add(ctx.Kennels.Create());
kennel.Name1.Name = "Test Kennel";
List<Breed> breeds = ctx.Breeds.Include(b => b.BreedGroup).OrderBy(t => t.BreedGroupID).Where(t => t.ID == 755 || t.ID == 772).ToList();
foreach (var b in breeds)
  kennel.Breeds.Add(b);
if (breeds.Count > 0)
{
  kennel.MainBreed = breeds[0];
  foreach (var k in kennel.MainBreed.MainKennels)
    System.Diagnostics.Debug.WriteLine("MainKennel: " + k.Name1.Name);
  ctx.ChangeTracker.DetectChanges();
  //System.Diagnostics.Debug.WriteLine("MainBreed: " + kennel.MainBreed);
  System.Diagnostics.Debug.WriteLine("MainBreedID: " + kennel.MainBreedID);
} 
```

调用 DetectChanges 后，所有导航属性和集合都会反映更改（kennel.MainBreedID ！= null）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:45:14.813

尝试使您的所有 POCO 属性虚拟化，而不仅仅是导航属性。这将允许 EF 创建[更改跟踪代理](http://msdn.microsoft.com/en-us/library/dd456848%28v=vs.100%29.aspx)而不是延迟加载代理。 *我没有对此进行测试，*但是您可能会得到您期望的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:25:21.843

从构造函数中删除集合的初始化

```
//this.Dogs = new List<Dog>();
//this.ExpertKerungs = new List<ExpertKerung>();
//this.Hallmarks = new List<Hallmark>();
//this.Colors = new List<Color>();
//this.ExpertBreeds = new List<ExpertBreed>();
//this.Kennels = new List<Kennel>();
//this.MainKennels = new List<Kennel>(); 
```

# javascript - 未捕获的错误：INVALID_CHARACTER_ERR：DOM 异常 5

> ID：14829374
> 
> 赞同：2
> 
> 时间：2013-02-12T09:32:42.120
> 
> 标签：javascript, unicode, base64

```
$('form#update').submit(function(){
    var _data = $(this).serializeArray();
    var param = {};
    $.map(_data,function(a,b){
        if(a.name=='HotelName'){
            param[a.name] = window.btoa(a.value);
        }
        else{
            param[a.name] = a.value;
        }
    });
    console.log(param);
    $.post('api.coupon_edit_post.php',param,function(r){
        coupons();
        reloadMarkers();
    });
    return false;
}); 
```

window.btoa 是否导致此错误？

我正在使用 window.btoa，所以我可以传递大部分字符。

**编辑：**我尝试了[MDN 解决方案](https://developer.mozilla.org/en-US/docs/DOM/window.btoa#Unicode_Strings)，但它不起作用。我正在使用 Google Chrome 版本 24.0.1312.57 m

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T10:04:48.823

错误肯定来自`window.btoa`.

您应该**修改**MDN 解决方案并在转换前省略解码步骤，如下所示：

```
function utf8_to_b64( str ) {
    return window.btoa(encodeURIComponent( str ));
}

function b64_to_utf8( str ) {
    return decodeURIComponent(window.atob( str ));
} 
```

这会从编码字符串创建 b64 字符串，而不是再次对其进行解码（这将再次创建符号，`btoa`无法处理）。现在这有效：

```
utf8_to_b64('✓ à la mode');
b64_to_utf8("JUUyJTlDJTkzJTIwJUMzJUEwJTIwbGElMjBtb2Rl"); 
```

当然，由于编码，这显着延长了 b64 字符串。

您现在可以修改您的示例：

```
param[a.name] = utf8_to_b64(a.value); 
```

# php - 保存新记录时如何检查数据库中已存在的记录？

> ID：14829375
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:32:50.733
> 
> 标签：php, mysql, cakephp, cakephp-1.3, cakephp-2.0

如果providect_id 和plan_id 已经存在于同一行中，我想在表中添加新记录，否则会发生错误，否则它会保存记录。我已经编写了以下代码行，但没有成功，如果有任何帮助，请，谢谢。我在 cakephp 中做

```
 function admin_product_plan_add(){

           $exists    =    $this->ProductPlan->find('all');
           $this->set('exists',$exists);
           foreach ($exists as $exists){
           $plan_id = $exists['ProductPlan']['plan_id'];
           $product_id = $exists['ProductPlan']['product_id'];

           }

     $conditions = array('ProductPlan.product_id' => $plan_id,   'ProductPlan.plan_id' => $product_id);
     $data = $this->ProductPlan->find('all' , array('conditions'=>$conditions));
    if (isset($data) && !empty($data))
    {        
        echo '<p>User have already add this product plan!</p>';
    }else{
        if ($this->ProductPlan->save($this->data)){

            $this->Session->setFlash('You have successfully add the product plan');  
            $this->redirect(array('controller' => 'productplans','action' => 'admin_product_plan_list'));

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:46:40.513

使用[hasAny()](http://api.cakephp.org/class/model#method-ModelhasAny)

就像是：

```
public function admin_product_plan_add(){
    if($this->ProductPlan->hasAny(array("product_id" => $this->data['ProductPlan']['product_id'],'plan_id' => $this->data['ProductPlan']['plan_id']))){
        // USER ALREADY HAVE THIS PRODUCTPLAN
    } else {
        //CREATE NEW PRODUCTPLAN
    }
} 
```

或类似的东西。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:47:32.907

一种解决方案是在这两行上使用 uniq 索引。因此，当有人尝试在这两行上添加具有相同数据的另一行时，mysql 会抛出错误并且数据不会被插入。

# mongoose - find() 在动态路径上使用猫鼬

> ID：14829376
> 
> 赞同：1
> 
> 时间：2013-02-12T09:32:55.337
> 
> 标签：mongoose

我想在我的所有数组条目中找到`group`有关该`user_id`字段的所有文档：`members`

```
"group": {
  "name": 'group_1',
  "members": [
  {
    "user_id": ObjectId("51153212835b351826000001"),
    "right": 1,
  },{
    "user_id": ObjectId("51153212835b351826000002"),
    "right": 3,
  },
  ]
}

"group": {
  "name": 'group_2',
  "members": [
  {
    "user_id": ObjectId("51153212835b351826000001"),
    "right": 1,
  },{
    "user_id": ObjectId("51153212835b351826000002"),
    "right": 3,
  },
  ]
} 
```

我看到了操作员`$in`，但我不确定我是否可以在这种情况下使用它，因为我只有一个“user_id”，我需要用它来寻找“动态路径”`group.members[x].user_id`

有没有办法动态地做这个请求？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:17:20.153

我成功使用了`$elementMatch`operator 。

# ios - 无论如何测试没有物理设备的 iPhone 5 的 iPod 库？

> ID：14829379
> 
> 赞同：1
> 
> 时间：2013-02-12T09:33:00.647
> 
> 标签：ios, cocoa-touch, ios-simulator

我没有，`iPhone 5`但我有`iPod4.`

现在我正在做自定义音乐应用程序。

为了测试我对我的 iPod4 很好。

但是，当我想测试 iPhone5 时，由于 iPod Library，我无法测试它。

模拟器不支持 iPod 库。

所以我想知道是否有测试它？

谢谢你的帮助。

# javascript - 粘贴图像时需要findbase 64编码图像文件大小

> ID：14829380
> 
> 赞同：1
> 
> 时间：2013-02-12T09:33:03.647
> 
> 标签：javascript, base64

我正在获取浏览器的打印屏幕并将其粘贴到可内容编辑的 div 中。我得到了图像，但我想以 kb 为单位找出图像大小，但在 Firefox 中找不到。

```
if (!window.Clipboard) {
  var pasteCatcher = document.createElement("div");
  pasteCatcher.setAttribute("contenteditable", "");
  pasteCatcher.style.opacity = 0;document.body.appendChild(pasteCatcher);
  pasteCatcher.focus();
  document.addEventListener("click", function(){ pasteCatcher.focus(); });
}
window.addEventListener("paste", pasteHandler);
function pasteHandler(e) {    
   if (e.clipboardData) {
     var items = e.clipboardData.items;
      if (items) {
     for (var i = 0; i < items.length; i++) {
        if (items[i].type.indexOf("image") !== -1) {
           var blob = items[i].getAsFile();
           var size_blob = (blob.size * 3) / 4;
           var blob_size=bytesToSize(size_blob,2);        

           var URLObj = window.URL || window.webkitURL;
           var source = URLObj.createObjectURL(blob);

        var reader = new FileReader();
            reader.onload = function(event){
                createImage(event.target.result); 
            };
             reader.readAsDataURL(blob);
        }
     }
  }
  } else {  
  setTimeout(checkInput, 1);
  }
  }
  function checkInput() {
     var child = pasteCatcher.childNodes[0];
     pasteCatcher.innerHTML = "";

  if (child) {
     if (child.tagName === "IMG") {

     createImage(child.src);
     }
  }
 }
 function createImage(source) {
   var pastedImage = new Image("300","300");
   pastedImage.onload = function() {
   }
    pastedImage.src = source;
    var arrayBuffer = source.split(",");
    var size_blob = (source.length * 3)/ 4;
    var blob_size=bytesToSize(size_blob,2);
    document.getElementById('image2').appendChild(pastedImage);
 } 
```

请你在这里帮忙

# python - 理解为什么构造函数需要参数？

> ID：14829381
> 
> 赞同：-3
> 
> 时间：2013-02-12T09:33:15.677
> 
> 标签：python, constructor

我能够理解构造函数是什么。但是为什么 python 不能像 c++ 那样获取初始化列表呢？

```
class test:
     def __init__(self, arg1, arg2, arg3):
         self.arg1 = arg1
         self.arg2 = arg2
         self.arg3 = arg3 
```

如果不那么手动，将如何设置这些参数？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:34:23.980

```
test1 = test(1, 2, 3) 
```

构造函数就像任何旧函数一样，您可以将参数传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T15:42:47.993

这背后的意图是直接初始化一些传递给构造函数的变量。正如之前多次写过的，构造函数被称为：

```
t = test(arg1, arg2, arg3) 
```

然后，您在类中为传递的参数定义了值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:35:42.937

构造函数在对象被创建后被调用，而不是被调用一次：

```
t = test (arg1, arg2, arg3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:35:50.310

简单 - 当您稍后实例化该类时：

```
a = test(arg1, arg2, arg3) 
```

`a`现在是一个测试类，初始化时设置了 3 个参数。

# php - PHP preg_match_all 返回空数组

> ID：14829393
> 
> 赞同：2
> 
> 时间：2013-02-12T09:33:48.640
> 
> 标签：php, regex

我有这个`preg_match_all`：

```
$cash = "hi £240";

preg_match_all("/^£?(([1-9]{1,3}(,\d{3})*(\.\d{2})?)|(0\.[1-9]\d)|(0\.0[1-9]))$/", $cash, $matches);

print_r($matches); 
```

print_r 返回：

数组 ( [0] => 数组 ( ) [1] => 数组 ( ) [2] => 数组 ( ) [3] => 数组 ( ) [4] => 数组 ( ) [5] => 数组 ( ) [6] => 数组 ( ) )

当我只尝试 preg_match 时，它根本不起作用，我错过了什么吗？

我正在搜索 GB 货币值的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:36:30.010

```
$cash = "hi £240";
preg_match_all("/£(?P<amount>\d*,?\d*\.?\d*)/",$cash,$match);

print_r($match['amount']); 
```

# javascript - 触发嵌套在 AJAX 页面中的多个 javascript

> ID：14829394
> 
> 赞同：2
> 
> 时间：2013-02-12T09:33:54.983
> 
> 标签：javascript, jquery, eval, jquery-masonry, highslide

[A] 我正在使用出色的[Highslide](http://highslide.com)脚本打开一个模态窗口（通过其内置的 AJAX 功能）。

[B] 所以我将使用“main”来指代顶部/主页，并使用“insert”来描述插入到“main”中的页面。

[C] 正在加载到 Highslide 窗口的“插入”页面包含 4 个外部脚本，我必须在模式展开时运行这些脚本。

[D] 脚本包含在“插入”页面的底部——就在`</body>`标签之前——因为 AJAX 模式会导致 Highslide 忽略该`<head>`部分。

[E] 所以我的脚本看起来像这样：

```
 <script src="/js/jquery-1.7.1.min.js"></script>
    <script src="/js/jQuery.thumbfx.js"></script>
    <script src="/js/jQuery.easing.js"></script>
    <script src="/js/jquery.masonry.min.js"></script>
    <script>
    $(function(){var $container = $('#IMAGES');$container.imagesLoaded( function(){$container.masonry({itemSelector : '.BLOCK',columnWidth: 200,isFitWidth: true,gutterWidth: 0});});});
    </script>
</body> 
```

[F] Highslide 在“主”页面的头部被激活——并且通过包含下面的代码，它应该在获取和展开模式窗口时触发这些脚本。

```
hs.Expander.prototype.onAfterExpand = function() {
    var scripts = this.content.getElementsByTagName('script');
    for (var i = 0; i < scripts.length; i++) {
        eval(scripts[i].innerHTML);
    }
}; 
```

[G] 问题有两个...**首先：**我似乎无法激活所有脚本。Masonry 在这种情况下工作得很好，但我根本无法让 ThumbFX 工作。 **第二：**在尝试解决这个问题时，我发现 eval() 是邪恶的，应该像狂热的僵尸一样避免它。

**问题：**有没有更好（更安全）的函数可以在该`hs.Expander.prototype.onAfterExpand`事件中运行——也许一个实际上适用于所有脚本的函数？

谢谢你。

**编辑：** 顺便说一句......我的路径是正确的，当我直接进入“插入”页面时，我可以让所有脚本完美运行。但只有当“插入”页面由 Highslide 进行 AJAX 处理时，Masonry 才能工作。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:23:16.507

下面的代码只会读取Highslide ajax 弹出窗口中的**脚本块，****不**包括 JavaScript 文件。这就是 Masonry 有效而 ThumbFx 无效的原因，因为 Masonry 的代码被放置在脚本块中。Masonry 的脚本文件是从主页中包含的文件（jquery-1.6.1.min.js 和 jquery.masonry.min.js）中挑选出来的。

```
hs.Expander.prototype.onAfterExpand = function () {
    var scripts = this.content.getElementsByTagName('script');
    for (var i = 0; i < scripts.length; i++) {
        eval(scripts[i].innerHTML);
    }
}; 
```

**在 Highslide ajax 弹出窗口中没有 JavaSript 块的解决方案：**
您可以直接从`onAfterExpand`事件中调用函数，而不是在“插入”页面中使用脚本块。所有必要的 JavaScript 文件都必须包含在主页的 head**部分**。您从 ThumbFx 的作者那里获得的代码要求主页中的所有打开锚点都有一个唯一的 ID，因此我们可以将打开锚点与正确的“插入”页面与`onAfterExpand`事件中的代码绑定在一起。

带有 ID 的 HTML 标记：

```
<a id="link1" href="insert-page/image/1/" rel="highslide-ajax" class="BLOCK">
    <img src="thumbs/image1.jpg" alt="" /></a>
<a id="link2" href="insert-page/image/2/" rel="highslide-ajax" class="BLOCK">
    <img src="thumbs/image2.jpg" alt="" /></a> 
```

调用`onAfterExpand`事件中的函数（需要 highslide-full.js）：

```
hs.Expander.prototype.onAfterExpand = function () {
    // for jQuery Masonry
    var $container = $('#IMAGES');
    $container.imagesLoaded(function () {
        $container.masonry({
            itemSelector: '.BLOCK',
            columnWidth: 200,
            isFitWidth: true,
            gutterWidth: 0
        });
    });
    // for ThumbFx
    if (this.a.id == 'link1') {
        $.ajax({
            url: "insert-page/image/1/",
            context: document.body
        }).done(function () {
            $('[data-overlayer]').overlayer();
        });
    }
    if (this.a.id == 'link2') {
        $.ajax({
            url: "insert-page/image/1/",
            context: document.body
        }).done(function () {
            $('[data-overlayer]').overlayer();
        });
    }
//  add more calls for ThumbFx here
}; 
```

**在 Highslide ajax 弹出窗口中使用 JavaScript 块的解决方案：**
将此代码与您的 highslide 设置一起放在主页中（需要 highslide-full.js）：

```
hs.Expander.prototype.onAfterExpand = function () {
    var scripts = this.content.getElementsByTagName('script');
    for (var i = 0; i < scripts.length; i++) {
        eval(scripts[i].innerHTML);
    }
}; 
```

这也要求在主页中包含必要的 JavaScript 文件，但您不需要在主页中的打开锚点中添加 ID。
将脚本块放在“插入”页面的主体标签中：

```
<script>
$(function () {
    // for jQuery Masonry
    var $container = $('#IMAGES');
    $container.imagesLoaded(function () {
        $container.masonry({
            itemSelector: '.BLOCK',
            columnWidth: 200,
            isFitWidth: true,
            gutterWidth: 0
        });
    });
    // for ThumbFx
    $.ajax({
        context: document.body
    }).done(function () {
        $('[data-overlayer]').overlayer();
    });
});
</script> 
```

# java - 解码 base64 字符串时出错

> ID：14829396
> 
> 赞同：0
> 
> 时间：2013-02-12T09:34:02.817
> 
> 标签：java, base64

我有一个 XML 文件，它有一个名为“CONTENIDO”的节点，在这个节点中我有一个用 base64 字符串编码的 PDF 文件。

我正在尝试读取此节点，解码 base64 中的字符串并将 PDF 文件下载到我的计算机。

问题是文件以与原始 PDF 相同的大小（以 kb 为单位）下载，并且具有相同的页数，但是......所有页面都是空白的，没有任何内容，当我打开下载的文件时会弹出一个弹出窗口出现错误消息“unknown distinct 806.6n”。我不知道那是什么意思。

我试图在互联网上找到一个解决方案，用不同的方法来解码字符串，但总是得到相同的结果...... XML 没问题我检查了 base64 字符串，没问题。我还调试了代码，我看到我正在读取 base64 字符串的 var "fichero" 的内容也可以，所以我不知道可能是什么问题。

这是我的代码：

```
package prueba.sap.com;

import java.io.ByteArrayOutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

import sun.misc.BASE64Decoder;

import javax.xml.bind.DatatypeConverter;

public class anexoPO {

    public static void main(String[] args) throws Exception {
         FileInputStream inFile =
              new FileInputStream("C:/prueba/prueba_attach_b64.xml");
         FileOutputStream outFile =
              new FileOutputStream("C:/prueba/salida.pdf");      
         anexoPO myMapping = new anexoPO();
         myMapping.execute(inFile, outFile);
         System.out.println("Success");
         System.out.println(inFile);         

    }

    public void execute(InputStream in, OutputStream out)
     throws com.sap.aii.mapping.api.StreamTransformationException {

        try {       

          //************************Code To Generate The XML Parsing Objects*****************************//     
          DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
          DocumentBuilder db = dbf.newDocumentBuilder();
          Document doc = db.parse(in);
          Document docout = db.newDocument();

          NodeList CONTENIDO = doc.getElementsByTagName("CONTENIDO");
          String fichero = CONTENIDO.item(0).getChildNodes().item(0).getNodeValue();

          //************** decode *************/

              //import sun.misc.BASE64Decoder;
              //BASE64Decoder decoder = new BASE64Decoder();
              //byte[] decoded = decoder.decodeBuffer(fichero);

              //import org.apache.commons.codec.binary.*;
              //byte[] decoded = Base64.decode(fichero);

              //import javax.xml.bind.DatatypeConverter;
               byte[] decoded = DatatypeConverter.parseBase64Binary(fichero);

          //************** decode *************/

          String str = new String(decoded);
          out.write(str.getBytes());

          } catch (Exception e) {
               System.out.print("Problem parsing the file");
               e.printStackTrace();
              }       
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:41:51.913

确实：

```
out.write(decoded);
out.close(); 
```

字符串不能代表所有字节，PDF 是二进制的。

同时删除 sun.misc.BASE64Decoder 的导入，因为这个包并不存在于任何地方。它可能会被编译器删除，但我不会打赌。

# python - 使用 Python 将 HTML 转为 RTF 字符串

> ID：14829405
> 
> 赞同：14
> 
> 时间：2013-02-12T09:34:34.990
> 
> 标签：python, html-parsing, rtf

我正在寻找一种将 HTML 文本转换为 RTF 字符串的方法。有没有做这项工作的图书馆。我在我的项目中动态获取 html 内容并需要以 RTF 格式呈现。我正在使用 HTML 解析器将 HTML 文本转换为普通字符串，然后尝试使用 PyRTF 转换为 RTF 格式。有没有更好的方法可以做到这一点。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T00:19:08.170

RTF 似乎是一种难以转换的格式。例如，我尝试在 Mac OS X 上的应用程序之间进行剪切和粘贴，其中 RTF 是一种*通用语言*。其中一些应用程序是 Microsoft 应用程序（因为 RTF 是 Microsoft 开发的格式），而其他应用程序则不是。从一个表面上讲 RTF 的应用程序复制到另一个应用程序时，即使是字体大小、字体、行间距和列表样式（有序或无序）等基本格式信息也会变得混乱。简单地说，就是一团糟。

我一直在寻找以编程方式读取、写入和转换 RTF 的方法，最好是从 Python 中。我在 PyPI 上发现了许多包，尝试它们的经历令人失望。例如，当当前版本为 1.9.1 时，它们将支持 RTF 1.5。RTF 已经存在了很长时间，但 2005 年的规范并不是最近的。有很多陷阱和不兼容之处。很多。

现在，我并不是说这是不可能的，或者没有其他库可以解决问题。例如，我*没有*尝试过`zopyx.convert`这里其他人提到的。也许它很棒。但是看看它的依赖项——Java、FOP 等——它看起来像是一个非常复杂（因此可能很脆弱）的工具链。[我在 github 上](https://github.com/zopyx/zopyx.convert2)阅读了它的代码，而 Python 实际上只是作为协调单板存在的。它组织了外部工具 XFC、XINC、FOP 和 PrinceXML——这四个中的三个是商业软件。这包括处理 RTF 的关键 XFC 部分。让我怀疑。

我发现有两个转换器值得一看： 如果您使用的是 Mac，[textutil](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/textutil.1.html)命令行程序实际上是我见过的更好、更简单的工具之一。

```
textutil -convert html filename.rtf -output filename.html 
```

另一个值得考虑的格式化引擎是[LibreOffice](http://www.libreoffice.org)。它是免费的、开源的、相当适合自动化的，并且是作为互操作性中心的良好基础。这不仅仅是猜测。我围绕它构建了复杂的多格式文档工作流程。

我会质疑你为什么要尝试进入 RTF。这似乎是您试图逃避的一种文档格式。但是如果你需要去那里，textutil 和 LibreOffice 是我发现的最糟糕的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T21:49:49.510

我看到这个问题已经有一年多了，但我想我还是会做出贡献的。我最近也有类似的需求，于是求助于[PyRTF](https://code.google.com/p/pyrtf-ng/)，这是一个小而强大的 Python 模块，可以从文本文件构造 RTF 文档。您可以使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)来抓取 HTML，逐个标记地沿着解析树标记，并使用 PyRTF API 构造适当的对象（表格、单元格、段落、部分或文档）。

API 本身非常精细，并允许大量自定义格式（字体文本、对齐方式、颜色、页眉、页脚等）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-29T15:44:14.117

有一个很棒的 python 库，它是一个 tarball。

您可以在[https://pypi.python.org/pypi/zopyx.convert2/2.4.5](https://pypi.python.org/pypi/zopyx.convert2/2.4.5)下载它。

祝你好运！

# javascript - javascript函数运行而不被调用

> ID：14829410
> 
> 赞同：11
> 
> 时间：2013-02-12T09:35:04.150
> 
> 标签：javascript, function-calls

我想知道为什么一旦页面加载，该函数`btw_bijtellen ()`就会被调用。我想通过单击来调用它...

```
var $ = function (id) {
    return document.getElementById (id);
}

function btw_bijtellen () {
    window.alert("we want to calculate something after clicking th button");
}

$("bereken").onclick = btw_bijtellen (); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-12T09:36:09.793

您添加`()`了导致函数执行的内容。

例如：

```
var myFunc1 = function() {
    alert('Hello');
}(); // <--- () causes self execution

var myFunc2 = function() {
    return 5 + 5;
};

var some_value = myFunc2(); // <--- Again () causes execution (you'd expect this one) 
```

在您的情况下，如评论中所述，您基本上是在告诉`onclick`将其值设置为函数的返回值。

如果你放弃`()`它应该按预期运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T09:49:51.703

如果您希望在单击时调用该函数，请使用

```
$("bereken").on('click', btw_bijtellen); 
```

# 更新（根据 WAO 的查询）

如果需要传递参数，则需要指定为第二个参数。`$.on()`获取`event`处理程序中的数据

```
$("bereken").on('click', {key1: value1, key2: value2, keyn: valuen}, btw_bijtellen); 
```

在哪里，您可以从中获取参数`event.data`

```
var function = btw_bijtellen(event) {
    var data = event.data;
    console.log(data);

    var key1 = event.data.key1;
    console.log(key1);  // this will output value1
} 
```

阅读此链接[jQuery $.on() api](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:36:31.487

放在`()`函数名之后就是你如何称呼它。

如果要将 分配`btw_bijtellen`给`onclick`然后`()`从问题中代码的最后一行中删除。

有了`()`那里，您正在调用该函数并将其*返回值*分配给`onclick`. 由于该函数没有`return`声明，因此该值将`undefined`不是您想要的。

# icons - 使用 inno 设置从旧版本更新图标

> ID：14829411
> 
> 赞同：1
> 
> 时间：2013-02-12T09:35:05.513
> 
> 标签：icons, inno-setup, updates

我安装了我的图标

```
Name: "{commondesktop}\TestApp {#VERSION}"; Filename: "{app}\TestApp.exe"; WorkingDir: "{app}"; IconFilename: "{app}\TestApp.ico"; 
```

如果我更新我的工具（在 InitializeSetup() 中检查），旧图标在桌面上仍然可用（旧版本号），新图标也可用！

如果工具将被更新而不是卸载，是否有删除图标的标志？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:58:44.067

这就是为什么您通常不应在图标名称中包含版本号的原因之一。

但是，您可以告诉 Inno 在以后的安装中删除它们，如下所示：

```
[InstallDelete]
Type: files; Name: "{commondesktop}\TestApp 5.2.lnk" 
```

请注意，最好单独命名您发布的所有先前版本，而不是使用通配符。（这是因为通配符可能会意外删除用户自己创建的其他图标，他们不会对此感到高兴。）

# ruby-on-rails - 宝石要求条件

> ID：14829416
> 
> 赞同：4
> 
> 时间：2013-02-12T09:35:26.870
> 
> 标签：ruby-on-rails, gemfile

我想阻止更新我的 windows ( `rmagick`) 上的 gem，所以它坚持`2.12.0 mswin32`. 不过，我的同事需要在他的 Darwin 安装上安装 gem ......

所以，我试图在`Gemfile`：

```
if RUBY_PLATFORM =~ /darwin/i
  gem 'rmagick', '~> 2.12.0'
else
  gem 'rmagick', '=2.12.0.mswin32'
end 
```

但`bundle install`投诉。

正确处理此问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:20:23.210

您应该使用Bundler 提供的[平台选项：](https://bundler.io/man/gemfile.5.html#PLATFORMS)

> 如果 gem 应该只用于特定平台或平台集，您可以指定它们。平台本质上与组相同，只是您不需要使用 --without install-time 标志来排除其他平台的 gem 组。

因此，在您的特定情况下，它看起来像这样：

```
gem 'rmagick', '~> 2.12.0', :platforms => :ruby
gem 'rmagick', '=2.12.0.mswin32', :platforms => :mswin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:12:45.520

您不能在 gemspec 上使用条件，因为 gemspec 被序列化为 YAML，它不包含可执行代码。

`Gemfile`我在本地 Rails 项目（不是 gem）中遇到了相关问题。

目前，Gemfile 包含：

```
group :test do
...
# on Mac os X
  gem 'rb-fsevent' if RUBY_PLATFORM.include?("x86_64-darwin")
  gem 'ruby_gntp' if RUBY_PLATFORM.include?("x86_64-darwin")

# on Linux
  gem 'rb-inotify' unless RUBY_PLATFORM.include?("x86_64-darwin")
  gem 'libnotify' unless RUBY_PLATFORM.include?("x86_64-darwin")
end 
```

这适用于在 Mac 和 Linux 系统上进行开发（尽管它很丑）。

但是，我们停止签入，`Gemfile.lock`因为每次使用不同平台的开发人员签入代码时它都会发生变化。

因此，多平台 Gemfile 的解决方案也应该解决`Gemfile.lock`.

其他解决方案是为每个目标操作系统构建多个**.gemspec 文件**，并更改每个平台的平台和依赖项：

```
gemspec = Gem::Specification.new do |s|
  s.platform = Gem::Platform::RUBY
end

# here build the normal gem

# Now for linux:
gemspec.platform = "linux"
gemspec.add_dependency ...

# build the newer gemspec
... 
```

# jboss5.x - LiveRebel 问题

> ID：14829430
> 
> 赞同：0
> 
> 时间：2013-02-12T09:36:12.463
> 
> 标签：jboss5.x, jrebel

我正在测试 liverebel，我注意到一些奇怪的行为：

我的环境

1.) liverebel admin 在我的本地 windows 机器上运行

2.) 远程服务器 linux CentOS with jboss5 server with liverebel agent

问题：

1.）当我部署ear时，服务器上实际部署的ear的名称更改为ROOT.ear ...这是正常行为吗？

2.）我还没有找到任何设置来改变第 1 点的行为……这怎么能控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:05:16.350

我是 LiveRebel 产品工程师，希望对您有所帮助。

这是预期的行为，没有办法改变它。存档在部署时重命名为根上下文路径，因为某些应用服务器实际上要求它具有特殊名称。

但是，我认为它应该只在 WAR 的情况下进行。这是我们可以研究的。

# java - 出现错误：“错误读取 inttemp！” 在 Tesseract 2 中训练新字体时

> ID：14829432
> 
> 赞同：21
> 
> 时间：2013-02-12T09:36:22.937
> 
> 标签：java, android, tesseract

我正在尝试为 Tesseract 训练一种可以在我的 Android 应用程序中使用的新字体。我只需要训练数字，所以我创建了一个训练图像、框文件和 unicharset 文件。

我已按照[培训说明进行操作](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract2)，但是当我尝试运行 tesseract 时，它说，`bad read of inttemp!`.

我究竟做错了什么？如何诊断此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:57:51.980

[http://code.google.com/p/tesseract-ocr/issues/detail?id=155](http://code.google.com/p/tesseract-ocr/issues/detail?id=155)

事实证明，tesseract 仍然返回到“C:\Program Files\Tesseract-OCR”文件夹——包括使用培训文件夹中的 3.0 培训 exes。我从哪里运行命令没有区别 - 猜测 tesseract 在它有路径变量时会忽略它。

替换了该文件夹中的所有 3.0 exe 和培训文件。放入 2.0.4 文件中，提取命令有效！！！出于各种原因，我应该更快地解决问题，但是..

尝试这个

[http://www.win.tue.nl/~aeb/linux/ocr/tesseract.html](http://www.win.tue.nl/~aeb/linux/ocr/tesseract.html)

# vb.net - Vb.net PrintWriter 什么也不打印

> ID：14829433
> 
> 赞同：0
> 
> 时间：2013-02-12T09:36:24.927
> 
> 标签：vb.net, visual-studio-2010, printing, vb.net-2010, printwriter

我正在 vb.net 中开发一个应用程序。输出形式如下所示。它有一个 PRINT 按钮来打印表单中的组件。我的意思是当我单击打印按钮时它应该打印整个表单。我在 PRINT 按钮上写了以下代码

```
PrintDialog1.Document = PrintDocument1
    Dim result As DialogResult = PrintDialog1.ShowDialog
    If (result = DialogResult.OK) Then
        PrintDocument1.Print()
End If 
```

但问题是它不打印表格。相反，它打印一个空白页。

有人能说出我的代码中的错误是什么，以及如何像上图那样打印页面。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:52:14.820

最后，我找到了解决方案

不使用 PrintDialog 和 PrintDocument，而是使用 PrintForm 控件。

并且代码应该是

```
On Error GoTo handler
    PrintForm1.Print()
    Exit Sub
handler:
    MsgBox("error") 
```

现在我的问题已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:43:45.960

STEP1：将您的命名空间导入为 Imports System.Drawing.Printing

第 2 步：在 VISUALBASIC POWERPACKS 并使用 ToolBox 中的“PrintForm”工具。

STEP3：创建一个按钮并双击它并复制以下代码

```
 PrintForm1.PrintAction = PrintAction.PrintToPreview
         PrintForm1.Print(Me, PowerPacks.Printing.PrintForm.PrintOption.FullWindow) 
```

# php - mysqli更新命令不更新

> ID：14829435
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:36:28.540
> 
> 标签：php, mysqli

```
include('config.php');
mysqli_select_db($mysqli, "real");
if ($transaction == "Success" && $currency == "USD") {
    $user_ids = '".$user_id."'; $total_cred = `user_credits` +'".$package_credits."';
    $add = $mysqli->prepare("UPDATE `users` SET `user_credits` = ?  WHERE `user_id` =  ?");
    $add->bind_param('si', $total_cred,$user_ids); $add->execute();
} 
```

该代码不会抛出任何错误，也不会更新数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:45:58.950

将 if 块更改为

```
//    $user_ids = '".$user_id."'; REMOVE THE statement
//    $total_cred = `user_credits` +    '".$package_credits."'; REMOVE THIS too
$add = $mysqli->prepare("UPDATE `users` SET `user_credits` = `user_credits` + ?  WHERE `user_id` =  ?");
$add->bind_param('ii', $package_credits, $user_id ); $add->execute(); 
```

让 MySQL 做最难的部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T09:58:47.793

试试这个：

```
include('config.php');
mysqli_select_db($mysqli, "real");
if ($transaction == "Success" && $currency == "USD") 
{
    $user_ids = '".$user_id."'; 
    $total_cred = user_credits +'".$package_credits."';
    $add = $mysqli->prepare("UPDATE users SET user_credits = ?  WHERE user_id =  ?");
    $add->bind_param('si', $total_cred,$user_ids); 
    $add->execute();
} 
```

# git - 如何在git中签出旧版本的文件夹

> ID：14829436
> 
> 赞同：6
> 
> 时间：2013-02-12T09:36:29.397
> 
> 标签：git

我需要从原点提取更改。问题是其中一个库已更新到最新版本，它使我的应用程序部分崩溃。我想提取最近的更改，然后返回到仅一个文件夹的先前（或特定）版本，其中包含导致 lib 的问题。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T09:41:17.863

```
git checkout LAST_WORKING_COMMIT -- vendor/library/in/question 
```

这将检查`LAST_WORKING_COMMIT`. 但是，`git status`然后会告诉文件已修改：

```
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   vendor/library/in/question/file.exe
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T09:39:22.947

使用附加参数`git checkout`：

```
git checkout REV -- folder 
```

# java - 具有特殊用例的 JAVA 中的一项 (int) 缓存

> ID：14829438
> 
> 赞同：2
> 
> 时间：2013-02-12T09:36:30.260
> 
> 标签：java, concurrency

我正在尝试缓存一个`int`值（从数据库中计算一些东西）。这个计数可能需要很长时间，我想先尝试用 200 毫秒的超时时间来做。但如果失败了，我有两种情况：

1.  My`cache`已填充，返回当前值并异步重新填充它。
2.  未`cache`填充，通过填充来阻止并返回值。

我说的是“缓存”，但它实际上只是一个`int`值，我不确定`cache`这里是否需要一个完整的。我尝试过使用Guava 的[供应商](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Supplier.html)，但我找不到将我的特定用例与之集成的方法。

请记住，许多线程可以进入整个过程，我只希望第一个线程等待以防缓存未填充。其余的不应该等待并立即获取缓存值，如果其他线程完成重新填充缓存，则更新一个。

这是我现在拥有的示例代码：

```
public class CountRetriever {

private Supplier<Integer> cache = Suppliers.memoize(countSupplier());

private Supplier<Integer> countSupplier() {
    return new Supplier<Integer>() {
        @Override
        public Integer get() {
            // Do heavy count from the DB
        }
    };
}

public int getCount() {
    try {
        return submitAsyncFetch();
    } catch (Exception e) {
        // It takes too long, let's use the cache
        return cache.get();
    }
}

private Integer submitAsyncFetch() {
    return executor.submit(new Callable<Integer>() {
        @Override
        public Integer call() throws Exception {
            // Do heavy count from the DB
        }
    }).get(200, TimeUnit.MILLISECONDS);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:44:58.163

你有没有尝试过这样的事情？

```
private int Map<String,Integer> cache = new HashMap<String,Integer>();

public getValue(String key){
  synchronized(cache){
    Integer value = cache.get(key);
    if(value == null) { 
       value = getValue();
       cache.put(key,value);
    }
    return value;
  }
} 
```

当然，如果在填充缓存时第二个线程进入，它将不得不等待。[同样在此解决方案中，一次只有一个线程可以读取该值，因此您可能希望用ReadWriteLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html)替换同步块，尽管考虑到关键块的简单程度，我怀疑它会对性能产生重大影响。

# matlab - 如何在matlab中绘制概率密度函数？

> ID：14829444
> 
> 赞同：0
> 
> 时间：2013-02-12T09:36:50.763
> 
> 标签：matlab, distribution, uniform

我需要绘制一个均匀分布矩阵的概率密度函数

```
U = rand (1,1000) 
```

但我不能使用 ksdensity 函数。我试过这个：

```
term = 1000;
U = rand (1,term);
x=0:0.001:1;
for j = 2:term;
    u_height(j) = u_height(j-1)+((abs(x(j)-U(j))<0.01/2)/0.01)/term;
    n_height(j) = n_height(j-1)+((abs(x(j)-N(j))<0.01/2)/0.01)/term;
end 
```

但它没有正确绘制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:28:25.143

该功能`ksdensity`应该可以正常工作。您需要指定 PDF 的范围是有限的，并使用框内核。

```
u = rand(10000,1);

ksdensity(u, 'Support', [0 1], 'kernel', 'box'); 
```

此外，您可以使用近似 pdf`histc`

```
u = rand(10000,1);
bins = 0:.05:1;
counts = hist(u, bins);
p = counts ./ trapz(bins, counts);

plot(bins, p); 
```

# sql - PL/SQL 匿名块“精确提取返回的行数超过请求的行数”

> ID：14829445
> 
> 赞同：3
> 
> 时间：2013-02-12T09:36:51.400
> 
> 标签：sql, oracle, plsql

我一直在研究计算两个配方之间相似度的 PL/SQL 脚本。 *配方*是包含所有标题、准备等的表格。*成分*是存储所有独特成分的地方，而*配方*是解决多对多问题的地方，两者是联系在一起的。

```
CREATE OR REPLACE FUNCTION func_similarity
  (idS1 IN recipes.recipe.recipeID%type , idS2 IN recipes.recipe.recipeID%type ) 
  RETURN NUMBER 
AS 
sim_value NUMBER := 0;
BEGIN
SELECT  2* 
    (select count(*) from recipes.ingredient i where i.ingredientID in (
      Select distinct ingredientID from recipes.recipeing where recipeID = s1.recipeID
      intersect
      select distinct ingredientID from recipes.recipeing  where recipeID = s2.recipeID))  
     /      ((select distinct count(ingredientID) from RECIPES.recipeing where recipeID = s1.recipeID) +
         (select distinct count(ingredientID) from recipes.recipeing where recipeID = s2.recipeID) )   INTO sim_value
from recipes.recipe s1, recipes.recipe s2
where s1.recipeID = idS1
and s2.recipeID = idS2;

RETURN (sim_value);
END func_similarity;
/ 
```

但是，当我使用匿名块对其进行测试时，出现错误： **“精确提取返回的行数超过了请求的行数”**

```
declare
v_sim number;
begin
v_sim:=func_similarity(1,4);
dbms_output.put_line(v_sim);
end;
/ 
```

现在，我很确定这个功能是有意义的并且*应该可以*工作（花了我整个周末）。有没有人知道为什么这可能不起作用？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:09:51.190

两个表之间没有链接：

```
from recipes.recipe s1, recipes.recipe s2
where s1.recipeID = idS1
and s2.recipeID = idS2; 
```

因此，查询是交叉连接。`recipeID`如果是主键，这无关紧要。但是，如果您在该列中有重复的数字，您的查询将返回不止一行。如果您的查询返回多行，您的函数将抛出一个 TOO_MANY_ROWS 异常，因为我们只能选择一行 INTO 变量（除非我们使用 BULK COLLECT INTO 集合变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:01:23.293

只有 1 行应返回到 sim_value。要查看发生了什么，请在没有 INTO 的情况下运行 SQL，并使用 IDS1 和 IDS2 的值。

# java - 克隆虚拟机，Java 服务无法启动

> ID：14829449
> 
> 赞同：2
> 
> 时间：2013-02-12T09:37:02.757
> 
> 标签：java, windows-services, virtualization, windows-server-2008-r2, yajsw

在我们的软件环境中，我们有许多运行 Windows Server 2008 R2 的 VM。在这些服务器上，我们有 Java 1.6 并使用 YAJSW 来提供一些服务。作为我们升级过程的一部分，我们希望在虚拟环境中创建克隆并在部署到生产之前测试我们的升级。

现在解决问题...... Windows 服务将不会在克隆的 VM 上启动。

启动服务时运行的命令示例如下：

> F:\app\configservice>"D:/Java/jdk1.6.0_27/bin/java.exe" "-classpath" "D:\yajsw-10.8\wrapper.jar" "-Xrs" "-Dwrapper.service= true" "-Dwrapper.working.dir=f:\app\configservice" "-Dwrapper.java.command=D:/Java/jdk1.6.0_27/bin/configservice.exe" "-Dwrapper.config=F:\ app\configservice\lib\wrapper.conf" "-Dwrapper.additional.1x=-Xrs" "org.rzo.yajsw.boot.WrapperServiceBooter"

从命令行手动运行时，它会产生此输出。

> INFO|wrapper|Service ConfigService|13-02-11 14:37:49|init
> INFO|wrapper|Service ConfigService|13-02-11 14:37:49|Win 服务：在服务初始化之前
> INFO|wrapper|Service ConfigService| 13-02-11 14:37:49|设置状态 IDLE->STARTING
> INFO|wrapper|Service ConfigService|13-02-11 14:37:49|启动进程
> INFO|wrapper|Service ConfigService|13-02-11 14 :37:49|>StartServiceCtrlDispatcher
> INFO|wrapper|Service ConfigService|13-02-11 14:37:49|1063 中的错误：服务进程无法连接到服务控制器。
> INFO|wrapper|Service ConfigService|13-02-11 14:37:49|Win 服务：正确终止

谷歌搜索错误让我相信 JVM 可能有问题，但这真的没有意义，因为它是 JVM 非常满意的 VM 的克隆。一些同事提出了组权限策略，但在两台机器上似乎都相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:40:45.840

如果您在与原始虚拟机相同的网络中运行克隆的虚拟机，请确保它具有不同的 MAC 和 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:39:41.783

使用 psexec 我创建了一个本地系统级别的命令提示符并开始检查环境变量。我发现本地用户的临时目录映射到一个不存在的驱动器。进一步挖掘发现 Y: 在克隆的 VM 上被映射为 E:。不知道是怎么回事，但问题已解决

# algorithm - 如何找到所有连续的子矩阵？

> ID：14829451
> 
> 赞同：0
> 
> 时间：2013-02-12T09:37:10.017
> 
> 标签：algorithm, matrix

我只是很难弄清楚这一点。我保证不是为了作业。

给定一个任意大小的矩阵，如下所示（(0, 0) 在左上角）：

```
1 0 0 1 0 0
0 0 1 1 1 0
0 1 1 1 0 0
0 1 1 1 0 0
0 1 0 1 0 0 
```

我一直试图弄清楚如何找到所有连续子矩阵的坐标。在这个例子中，我应该得到一个这样的列表：

```
[(2, 1), (3, 3)
 (1, 2), (3, 3)] 
```

我很难弄清楚如何提出这样的清单。我知道该算法不会高效（我猜是 O(n^2)），这很好，因为我将使用的矩阵不会那么大。

即使只是给我一个弄清楚这一点的线索，我也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:42:50.853

您可以拥有的最佳解决方案是 O(N^4)，因为这是您可以拥有的最大答案大小（如果所有值都是 1）。

要编写 O(N^4) 解决方案，请执行以下操作 - 使用大小为 O(N^2) 的辅助数组，并在其每个单元格中存储子矩阵中的个数，左上角为 (0,0 ) 和给定单元格的右下角。有了这个数组，您可以不断使用以下方法计算矩阵`(a,b)`（左上角）-> `(c,d)`（右下角）中的个数：

`num_of_ones(a,b,c,d) = helper_matrix[c][d] + helper_matrix[a-1][b-1] -helper_matrix[a-1][d] -helper_matrix[c][b-1]`.

照顾`a-1`或`b-1`掉出阵列的情况。

使用上面的检查每个子矩阵是否只填充一个（即其中的个数等于子矩阵的大小）。

# android - 带有自定义视图的 Android AlertDialog：获取输入数据

> ID：14829456
> 
> 赞同：12
> 
> 时间：2013-02-12T09:37:38.270
> 
> 标签：android, android-dialogfragment

我有一个带有显示单个 EditText 的 AlertDialog 的应用程序。我按照 Android 开发人员指南进行操作，但找不到如何获取用户输入的数据。

自定义布局只有一个 EditText：

```
<EditText
    android:id="@+id/license_value"
    android:inputType="text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/license" /> 
```

我正在使用 DialogFragment 创建对话框。为了在用户单击“确定”按钮时取回数据，我正在使用界面。

```
public class EditLicenseDialogFragment extends DialogFragment {

    public interface EditLicenseDialogListener {
        public void onDialogPositiveClick(DialogFragment dialog, String value);
    }

    private EditLicenseDialogListener mListener;

    // Override the Fragment.onAttach() method to instantiate the NoticeDialogListener
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        // Verify that the host activity implements the callback interface
        try {
            // Instantiate the NoticeDialogListener so we can send events to the host
            mListener = (EditLicenseDialogListener) activity;
        } catch (ClassCastException e) {
            // The activity doesn't implement the interface, throw exception
             throw new ClassCastException(activity.toString()
                    + " must implement NoticeDialogListener");
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        builder.setTitle(R.string.new_license);

        LayoutInflater inflater = getActivity().getLayoutInflater();

        builder.setView(inflater.inflate(R.layout.edit_license, null))

        .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int id) {
                        // GET VALUE. HOW TO DO IT?
                EditText valueView = (EditText) getActivity().findViewById(R.id.license_value);
                if(valueView == null) Log.d("AA", "NULL");
                else{
                    String value = valueView.getText().toString();
                    mListener.onDialogPositiveClick(EditLicenseDialogFragment.this, value);
                }
            })
        .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                EditLicenseDialogFragment.this.getDialog().cancel();
            }
        }); 

        return builder.create();

    }
} 
```

在我的活动中，我执行以下操作：

```
public class LicenseListActivity extends FragmentActivity 
    implements EditLicenseDialogFragment.EditLicenseDialogListener{

    ...

    findViewById(R.id.buttonAddLicense).setOnClickListener(
            new View.OnClickListener() {
                public void onClick(View view) {
                    DialogFragment dialog = new EditLicenseDialogFragment(true);
                    dialog.show(getSupportFragmentManager(), "EditLicenseDialogFragment");
                }
            });

    @Override
    public void onDialogPositiveClick(DialogFragment dialog, String value) {
       Log.d("TAG", value);
    } 
```

我尝试在 DialogFragment 中检索的 EditText 始终为 NULL。如何获得 EditText 的值？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-12T09:43:12.770

我认为这是因为您试图在其中查找编辑文本的视图不正确。

它应该是这样的：

```
LayoutInflater inflater = getActivity().getLayoutInflater();

View dialogView = inflater.inflate(R.layout.edit_license, null);
builder.setView(dialogView)
.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {

            EditText valueView = (EditText) dialogView.findViewById(R.id.license_value); //here
            if(valueView == null) Log.d("AA", "NULL");
            else{
                String value = valueView.getText().toString();
                mListener.onDialogPositiveClick(EditLicenseDialogFragment.this, value);
            }
        }) 
```

# facebook - 您可以在业务页面上创建应用程序和自定义选项卡吗？

> ID：14829458
> 
> 赞同：0
> 
> 时间：2013-02-12T09:37:41.640
> 
> 标签：facebook, tabs

我在几个论坛和各种其他视频上阅读过，您无法在简单的业务页面上创建自定义选项卡或应用程序。有几个人在这里问过这个问题，说他们被重定向回他们的页面而不是开发者平台，但他们没有得到回答！这是正确的，你根本做不到吗？如果是这样，对于拥有想要使用页面的企业的答案是什么？您是否必须为您的公司创建一个实际的用户帐户？你能把它链接到你现有的页面吗？我整个星期都在问这个问题，没有人会回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:52:28.810

如果我理解您的问题，这可能就是您正在寻找的内容：http: [//developers.facebook.com/docs/appsonfacebook/pagetabs/](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)

永远不要为公司创建用户帐户，页面既好又实用。

编辑：您需要成为创建 facebook 应用程序的人，其用户帐户将成为该应用程序的管理员。然后，您可以将应用程序添加到您管理的任何页面。

# php - 无法显示函数结果

> ID：14829459
> 
> 赞同：0
> 
> 时间：2013-02-12T09:37:45.347
> 
> 标签：php, function

我正在尝试根据从数据库中获得的数据创建一个下拉列表，但我无法显示它们。有人可以帮帮我吗？

```
include '../opdrachten/connectionPDO.php';

function Select()
{

$query =$db->prepare("SELECT naam FROM opdracht4");
$query->execute();

foreach ($query as $row)
{
echo '<option value="'.$row['naam'].'">"'.$row['naam'].'"</option>';    
}
} 

<select name="projectleider">   
<?php Select();  ?>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:39:57.633

将 传递给`$db`函数以使其在范围内。

```
include '../opdrachten/connectionPDO.php';

function Select($db)
{

$query =$db->prepare("SELECT naam FROM opdracht4");
$query->execute();

foreach ($query as $row)
{
echo '<option value="'.$row['naam'].'">"'.$row['naam'].'"</option>';    
}
} 

<select name="projectleider">   
<?php Select();  ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:40:54.880

您应该从函数返回值。尝试这个，

```
function Select()
{

  $query =$db->prepare("SELECT naam FROM opdracht4");
  $query->execute();

 $str = '<option value="">Select anyone</option>';
 foreach ($query as $row)
 {
  $str.= '<option value="'.$row['naam'].'">"'.$row['naam'].'"</option>';    
 }
 return $str;
} 
```

打电话试试这个，

```
<select name="projectleider">   
<?php echo Select();  ?>
</select> 
```

# ruby - 使用 Ruby 在 YAML 文档中搜索/检查值

> ID：14829462
> 
> 赞同：4
> 
> 时间：2013-02-12T09:37:53.763
> 
> 标签：ruby, yaml, psych

**我的目标：**

*   使用 ypath/xpath 检查 yaml 文档是否包含特定键的值*   使用 ypath/xpath 为指定键选择值

**文档 yaml**：

```
app:
    name: xxx
    version: xxx
description:
    author:
        name: xxx
        surname: xxx
        email: xxx@xxx.xx 
```

**检查内容：***

*   谷歌*   堆栈溢出*   Ruby API（YAML::DBM 作为它提供的方法之一是*select*）

**例子：**

```
Module::Class.select('description/author/name')
Module::Class.select('*/name')
Module::Class.isset?('*/name') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:59:32.827

使用 yaml：

```
require 'yaml'
yml = YAML.load_file('your_file.yml') 
```

现在 yml 是一个哈希。您可以像使用它一样使用它。这是您尝试的一个简单而丑陋的解决方案：

```
if !yml["description"].nil? && !yml["description"]["author"].nil? && !yml["description"]["author"]["name"].nil? && !yml["description"]["author"]["name"].empty?
  puts "An author is set!"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:48:35.927

`ActiveSupport`由于周围没有最新的 YPath 实现，我建议给一个机会`Nokogiri`：

```
yml = LOAD_YML_WITH_YOUR_PREFERRED_YAML_ENGINE

# ActiveSupport adds a to_xml method to Hash
xml = yml.to_xml(:root => 'yaml')

doc = Nokogiri::XML(xml)
doc.xpath("description/author/name").map do |name|
  puts [name['key'], name['value']]
end 
```

# c - 如何让 valgrind 显示守护程序应用程序的内存状态？

> ID：14829464
> 
> 赞同：0
> 
> 时间：2013-02-12T09:38:02.380
> 
> 标签：c, valgrind

我有一个 C 程序，它甚至包含来自外部库的许多内存分配，我想定期检查我的应用程序分配的总内存（包括库分配）。

我尝试了一些 , 之类的 linux 命令，`ps euf`但没有任何实际结果。`pmap $pid``cat /proc/$pid/status`

我做了一些研究，发现了 valgrind 的合适工具。

当我的应用程序运行时，我尝试转储内存：

```
valgrind --tool=drd --trace-alloc=yes 
```

但是我没有得到像 valgrind 在执行结束时显示的结果。

当我的应用程序运行时，如何使 valgrind 显示内存状态（如 valgrind 在执行结束时显示的结果）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:09:02.417

根据[3.8.0 valgrind 手册](http://valgrind.org/docs/manual)，核心或 memcheck 没有这样的选项，并且在信号部分中没有提及周期性或触发行为。`valgrind`不能开箱即用。

虽然您可能会编写一个 valgrind 工具来完成这项工作，但您可能会重新考虑该方法并阐明您想要什么样的内存使用情况，以及系统统计数据是否足以完成您的任务。

# visual-c++ - 如何在 SDI 或 MDI 应用程序中放大和缩小设备上下文 (CDC) 的图像

> ID：14829465
> 
> 赞同：0
> 
> 时间：2013-02-12T09:38:03.880
> 
> 标签：visual-c++, mfc, zooming

我想知道如何使用 CDC 的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:22:15.227

概括地说，有两种方法： - 使用 CDC::SetViewportOrg/SetViewportExt api 让 GDI 为您进行缩放 - 手动跟踪滚动位置和缩放级别，并在您的 OnPaint 中，执行您的 BitBlt 或兄弟姐妹往返源 DC 和目标 DC 中的正确坐标。

不幸的是，如果没有 MFC 方面的背景，这个答案的大部分对你来说意义不大，我认为你没有从你的问题的一般性质。这是一个先有鸡还是先有蛋的问题。我建议您首先阅读有关 CDC 所提及成员的文档（包括研究从 MSDN 文档中链接到的示例代码），然后如果您无法弄清楚，再回来询问更具体的问题.

# mysql - shell脚本和数据库

> ID：14829472
> 
> 赞同：0
> 
> 时间：2013-02-12T09:38:48.380
> 
> 标签：mysql, linux, shell, scripting

我正在使用 shell 脚本从数据库中检索课程名称。当课程名称中出现空格时，例如计算机科学、环境科学等，那么该名称将存储在两个不同的列表实例中，即在空格之前和之后，例如不同实例中的“计算机”和不同列表实例中的“科学”，但是我想把它像“计算机科学”一样存储在同一个列表实例中，我该如何克服这个问题

这是我检索课程名称的代码

```
db_value=`mysql -uroot -proot -Dproject_db -rN --execute
    "SELECT CourseName FROM applicant_result"`
z=1
for value in $db_value
  do
      echo "V,eligibility_$z=$value"
      let "z+=1"
  done
  echo "E,resume" 
```

我得到的结果（注意 V,eligibility_2 和 V,eligibility_3 的值）

```
V,eligibility_1=chemistry
V,eligibility_2=computer                                       
V,eligibility_3=science
V,eligibility_4=mathematics
V,eligibility_5=physics 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:44:08.893

```
z=1
mysql -uroot -proot -Dproject_db -rN --execute "SELECT CourseName FROM applicant_result" | while read value
do 
    echo "V,eligibility_$z=$value"
    let "z+=1"
done
echo "E,resume" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:43:17.630

如果这种方式行不通，那就不要那样做。`for ... in`拆分单词而不是行。

一个可能更好的解决方案是使用更多的线路感知：

```
mysql blah blah blah | awk '{
    n = n + 1;
    print "V,eligability_"n"=$0
} END { print "E,resume" }' 
```

有关概念证明，请参阅以下脚本：

```
pax> echo 'chemistry
...> computer science
...> mathematcis
...> physics
...> basket weaving' | awk '{
...>     n = n + 1;
...>     print "V,eligibility_"n"="$0
...> } END {print "E,resume"}'
V,eligibility_1=chemistry
V,eligibility_2=computer science
V,eligibility_3=mathematcis
V,eligibility_4=physics
V,eligibility_5=basket weaving
E,resume 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:59:17.447

关键可能是 IFS 变量 - 输入字段分隔符 这决定了输入应在哪些字符上分解为部分。因此，在您的情况下，您想用新行分隔：

```
#!/bin/bash

db_value=`mysql -uroot -proot -Dproject_db -rN -e "SELECT CourseName, CourseEligibility FROM applicant_result"`

oldIFS="$IFS" # save old to be able to restore it later
IFS="
";
z=1
for value in $db_value; do
  name=`echo $value | cut -f1`
  elig=`echo $value | cut -f2`
  #do whatever with $name and $elig
  echo "V,eligibility_$z=$name"
  : $[z++]
done
IFS="$oldIFS"
echo "E,resume" 
```

# android - DroidDraw 生成的 android 布局上的错误？

> ID：14829474
> 
> 赞同：0
> 
> 时间：2013-02-12T09:39:13.323
> 
> 标签：android, layout

任何人都可以从我的布局中看到任何错误吗？我将此用作活动布局，但应用程序已停止。XML 是使用**DroidDraw**创建的。该应用程序在三星 GT-N7000，Android 版本 4.0.4 上进行了测试

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    android:id="@+id/widget32"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <Button
        android:id="@+id/bt_lihat_komoditas"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lihat Komoditas"
        android:layout_below="@+id/widget35"
        android:layout_alignParentRight="true" />
    <TableLayout
        android:id="@+id/widget35"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:stretchColumns="1"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true">
        <TableRow
            android:id="@+id/widget36"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/widget38"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Pilih Kategori" />
            <Spinner
                android:id="@+id/spin_kategori"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>
        <TableRow
            android:id="@+id/widget37"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/widget40"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Pilih Komoditi" />
            <Spinner
                android:id="@+id/spin_komoditi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>
        <TableRow
            android:id="@+id/widget42"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/widget44"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Pilih Tipe" />
            <Spinner
                android:id="@+id/spin_tipe"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>
    </TableLayout>
</RelativeLayout> 
```

-

**问题解决了！** 我只是清理并构建项目（我正在使用 netbeans），它工作正常。也许该错误在nbandroid上。感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:34:52.647

只是一个盲目的猜测：完全**清理并重建项目**。这通常有助于解决此类问题（不兼容和缺少 id 等）

# html - 960.gs：小偏移嵌套列

> ID：14829476
> 
> 赞同：0
> 
> 时间：2013-02-12T09:39:20.760
> 
> 标签：html, css, layout, offset, 960.gs

```
<div class="container_16">
<div class="clear"></div>
    <div class="grid_8 alpha search shadow">

    </div>
    <div class="grid_8 omega search shadow">

    </div>
</div> 
```

使用此代码，布局可以正常工作，但向右有一个小偏移（3px 或类似的东西）。（搜索阴影是只与宽度和背景图像相关的自定义类，没有填充/边距等）

它看起来像这样：

![在此处输入图像描述](../Images/5db4063d488888ad4f0f4dcecfcad063.png)

可能是什么原因？

**编辑：**

在不使用 alpha 和 omega 的情况下，布局会浮动到下一行！（布局右侧的 2 个框，一个正好在另一个上方！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:11:39.890

在 960 网格框架中，“grid_8”的 CSS 类具有以下 CSS 属性：

```
 display: inline;
  float: left;
  margin-left: 10px;
  margin-right: 10px; 
```

我感觉你还没有浏览过 960 网格框架的 CSS 文件。我建议您至少阅读您正在使用的课程所需要的内容。

例如：

```
/* `Grid >> Children (Alpha ~ First, Omega ~ Last)
----------------------------------------------------------------------------------------------------*/

.alpha {
  margin-left: 0;
}

.omega {
  margin-right: 0;
} 
```

# java - JSR 303\. 验证方法参数并抛出异常

> ID：14829487
> 
> 赞同：1
> 
> 时间：2013-02-12T09:40:07.283
> 
> 标签：java, bean-validation, hibernate-validator

如果参数无效，如何使用 JSR-303 验证方法参数并抛出异常？

例如像这样：`public void createUser(@ValidOrThrowException User user) {...}`？

现在，我检查方法体中的每个方法参数，比如

```
public void createUser(User user) {
    ConstraintViolations violations = Validator.validate(user);
    if (!violations.isEmpty()) {
        throw new IllegalArgumentException(createExceptionMessage(violations ));
    }
    ...//business logic
} 
```

我认为这很丑陋。

PS 作为参考实现，我使用 Hibernate-validator 4.1.0.Final

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:06:26.480

如果可以升级到 Hibernate Validator 4.2.0 或更高版本，就可以使用它的[方法验证功能](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html/validator-specifics.html#validator-customoptions-methodvalidation)，它提供了对方法参数和返回值的验证的支持。

可以使用动态代理、AOP、拦截器等方式在调用受限方法时自动调用验证引擎。根据您使用的框架，您可以使用以下方法之一：

*   使用 Spring 3.1 或更高版本时：[MethodValidationInterceptor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/validation/beanvalidation/MethodValidationInterceptor.html)
*   使用 CDI 时：[Seam Validation](https://github.com/seam/validation)（免责声明：我是本文的作者）
*   使用 Guice 时：我在 GitHub 上[为此添加了一个示例](https://github.com/gunnarmorling/methodvalidation-integration)

请注意，从[Bean Validation 1.1](http://beanvalidation.org/1.1/)（即将完成）及其参考实现 Hibernate Validator 5 开始，方法验证将成为标准化 Bean Validation API 的一部分。

# java - Java Web 应用程序健康检查良好实践

> ID：14829495
> 
> 赞同：8
> 
> 时间：2013-02-12T09:40:34.673
> 
> 标签：java, web-applications, monitoring, health-monitoring

我有一个 Java Web 应用程序正在运行（使用 Spring），我希望每隔几分钟执行一次运行状况检查。我没有检查 Tomcat 或 JVM，而是严格检查应用程序级别，所以我有一些想法可以检查。

例如：

*   做一个简单的查询来检查数据库的健全性
*   检查环境是否为“生产环境”（因为这是唯一将被监控的环境）

基本上我正在寻找其他想法和建议来检查什么或一些最佳实践。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-21T07:24:24.377

我建议尝试[Metrics Framework](http://metrics.dropwizard.io/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:56:05.937

我们开发了一个特殊的 URL 来访问一个 spring mvc 控制器来测试我们应用程序的各个方面。如果您发现任何错误，只需返回 500 并将该 url 链接提供给您最喜欢的监控工具。我们在我们的设施中同时使用 pingdom 和 nagios。

[https://www.pingdom.com/](https://www.pingdom.com/)

[http://nagios.org/](http://nagios.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T22:43:22.540

也许创建一个由 db 生成的页面，在上面有一些 nagios 检查的特定输出，这样您就会知道 http 端口已启动，网络服务器实际上正在为网页提供服务，并且可以访问 db通过应用程序。

# c# - C# setup 项目安装在 C 中：

> ID：14829498
> 
> 赞同：0
> 
> 时间：2013-02-12T09:40:48.290
> 
> 标签：c#, installation, windows-installer

我为我的项目创建了一个安装`C#`项目。

但是当我安装我的程序时，安装程​​序会将所有文件写入**C: 文件夹**中。

我的应用程序文件夹的默认位置是

> [ProgramFilesFolder][制造商][产品名称]

当我启动安装程序时，我得到了正确的路径。

即使我手动选择其他安装路径，它也会将文件安装在**C:**中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:41:03.067

每当目录表出现问题时，Windows 安装程序将默认使用最大驱动器的根目录（通常是 C:）。您是否正在使用任何合并模块？如果是这样，您必须在使用模块时将 MergeRedirectFolder 与 TARGETDIR 相关联。否则，如果不检查 Windows Installer 日志，您的问题将无法回答。您可以通过运行以下命令获取此类日志：

```
msiexec /I foo.msi /l*v verbose_install.log 
```

# asp.net-mvc - 另一个asp.net路由问题

> ID：14829500
> 
> 赞同：1
> 
> 时间：2013-02-12T09:40:56.260
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我四处寻找我的问题，但找不到解决方案...

我有一个 BlogController，我想将以下路由匹配到一个单独的操作：

```
/blog/
/blog/rss
/blog/tags/tagName 
```

但是，我想匹配任何其他网址，例如：

```
/blog/my-post
/blog/other-post 
```

到 Post 操作。

我试过了

```
routes.MapRoute("Blog",
"blog/{action}/{param}",
new { controller = "Blog", action = "Index", param = UrlParameter.Optional });

routes.MapRoute("BlogPost",
"blog/{slug}",
new { controller = "Blog", action = "post" }); 
```

但第二条路线永远不会匹配。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:20:00.470

第一条路由已经匹配任何形式的 url `blog/slug`。

在解析路由时，ASP.NET MVC 将尝试使用第一个匹配项，即使没有任何操作来获取该方法。ASP.NET MVC 的路由仍然不会尝试下一个路由。

因此，对于您的路由，url`blog/my-first-article`将匹配第一个 url，并且 MVC 将在类上查找`my-first-action`方法。`BlogController`

**解决方案 1**

您可以为每个方法定义单独的路由，如下所示：

```
routes.MapRoute("Blog index",
    "blog",
    new { controller = "Blog", action = "Index" });

routes.MapRoute("Blog RSS feed",
    "blog/rss",
    new { controller = "Blog", action = "Rss" });

routes.MapRoute("Posts by tag",
    "blog/Tags/{params}",
    new { controller = "Blog", action = "Tags" });

routes.MapRoute("BlogPost",
    "blog/{slug}",
    new { controller = "Blog", action = "post" }); 
```

**解决方案 2**

`{action}`您可以使用约束在第一条路线中定义有效值。

```
routes.MapRoute("Blog",
    "blog/{action}/{param}",
    new { controller = "Blog", action = "Index", param = UrlParameter.Optional },
    new { action = 'index|rss|tags' });

routes.MapRoute("BlogPost",
    "blog/{slug}",
    new { controller = "Blog", action = "post" }); 
```

约束采用正则表达式的形式。

# c# - 加载正确编码的文件

> ID：14829510
> 
> 赞同：1
> 
> 时间：2013-02-12T09:41:31.983
> 
> 标签：c#, encoding, windows-8

我正在使用文件选择器加载文件，并且编码出现问题。我没有得到正确的特殊字符。这是代码：

```
 StorageFile file = await openPicker.PickSingleFileAsync();
 if (file != null)
 {
     var stream = await file.OpenReadAsync();
     var rdr  = new StreamReader(stream.AsStream());
 } 
```

阅读效果完美，但编码效果不佳。该文件以 ansi-csv 文件的形式出现。我可以给 StreamReader 一个这样的编码：

```
var rdr  = new StreamReader(stream.AsStream(),System.Text.Encoding.UTF8); 
```

但这也不起作用，并且不`System.Text.Encoding.ANSI`存在编码。如何使用正确的编码读取文件并显示我的特殊字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:53:42.923

您可以为系统指定当前的 ANSI 编码：

```
var rdr = new StreamReader(stream.AsStream(), System.Text.Encoding.Default); 
```

如果这不是文件的正确编码，那么您需要知道在创建文件的计算机上使用了哪种编码，并获取该编码以对其进行解码。例如：

```
var rdr = new StreamReader(stream.AsStream(), System.Text.Encoding.GetEncoding("ibm850")); 
```

# windows-phone-7 - 用户控件中的 Windows Phone UIElementCollection

> ID：14829513
> 
> 赞同：0
> 
> 时间：2013-02-12T09:41:45.540
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

我的 UserControl 中有一个带有自定义 UIElements 的 UIElementCollection。但不显示 UIElements。怎么了？

```
public partial class MyControl : UserControl
{
    public static readonly DependencyProperty ChildrenProperty = DependencyProperty.Register("Children", typeof(UIElementCollection), typeof(MyControl), null);

    public UIElementCollection Children
    {
        get { return (UIElementCollection)GetValue(ChildrenProperty); }
        set { SetValue(ChildrenProperty, value); }
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        Children.Clear();
        UserControl child = new SecondUserControl();
        child.Measure(availableSize);
        Children.Add(child);
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        foreach (UIElement child in Children)
        {
            child.Arrange(new Rect(0,0, child.DesiredSize.Width, child.DesiredSize.Height));
        }
        return finalSize;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:03:33.340

Oy vey. Whatever it is you're trying to do, that isn't the way to do it.

First, your Children colleciton never makes it to the UI. Just declaring properties and measuring stuff doesn't actually add it to the UI. You have to make sure the children are part of the visual tre by adding them to something on the UserControl.Content.

Second, why are you adding and removing children on every Measure pass? That doesn't make sense for any usecase. The Measure & arrange pass isn't a time to remove/add control, it's a time to measure and arrange control.

# sphinx - 狮身人面像搜索带前缀的号码

> ID：14829518
> 
> 赞同：1
> 
> 时间：2013-02-12T09:41:56.610
> 
> 标签：sphinx

如何在 Sphinx 中查询带有前缀和后缀的单词？

我有这样的领域

```
"Value544"
"Some value"
"544"
"Some544value" 
```

所以“价值”对我来说只有“一些价值”、“544”——只有“544”。我想要查询“544”的狮身人面像也能得到“Value544”和“Some544value”。

这是我的源配置：

```
 docinfo             = extern
    html_strip          = 1
    min_word_len        = 1
    min_infix_len       = 2
#    min_prefix_len      = 1
    morphology          = metaphone, stem_en, libstemmer_sv, libstemmer_german, soundex
    charset_type        = utf-8
    enable_star         = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:43:36.187

blend_chars 或许可以做到，

[http://sphinxsearch.com/docs/current.html#conf-blend-chars](http://sphinxsearch.com/docs/current.html#conf-blend-chars)

但我从未尝试过。

* * *

尽管您的 min_infix_len 无论如何都应该这样做。我怀疑你的形态引起了问题。由于只有一个单词会触发一个给定的单词，因此不建议这样混合和匹配。（例如混合变音位，并在一个索引中进行词干。你也有 soundex，这肯定会搞砸。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:29:39.107

您应该使用星号 ( `*`)。例如，使用您的索引配置，您的查询将如下所示：

```
SELECT * FROM your_index WHERE MATCH('*577*'); 
```

# android - 绑定 TimePicker 和 DatePicker - MVVMCross（Android 单声道）

> ID：14829521
> 
> 赞同：2
> 
> 时间：2013-02-12T09:42:04.477
> 
> 标签：android, datepicker, xamarin.android, timepicker, mvvmcross

如何在 Mono For Android 中将 Time - & /DatePicker 与 MVVMCross 绑定？

```
 <TimePicker
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

  <DatePicker
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

以及后面的属性有哪些类型？对于日期，可能是**日期**时间和时间选择器？或者我们这里有一个属性*foreach*数字，例如日期：年 (INT)、月 (INT) 和日 (INT) = 3 个属性？

卡在这个，没有找到任何例子..

帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:27:51.390

Android 的 DatePicker API 非常恶心……

但是，绑定它应该很容易:)

我要做的是添加一个自定义控件和一个自定义绑定。

* * *

有关自定义 Droid 控件的一些帮助，请参阅

*   [如何为 MvxItemTemplate 创建视图的动作监听器](https://stackoverflow.com/questions/12934654/how-to-create-views-actions-listener-for-mvxitemtemplate)
*   看看[http://github.com/CheeseBaron/](http://github.com/CheeseBaron/) repo - 他做了很多很棒的自定义控件

有关自定义绑定的其他一些问题，请参阅

*   自定义收藏夹按钮绑定 - [Android 中的 MVVMCross 绑定](https://stackoverflow.com/questions/10495137/mvvmcross-bindings-in-android)
*   文本颜色的自定义绑定 -[在 MvvmCross 中，我如何进行自定义绑定属性](https://stackoverflow.com/questions/10700445/in-mvvmcross-how-do-i-do-custom-bind-properties)
*   整数的两种方式绑定 - [MvvmCross Monotouch C# - 绑定 Int 属性 - 模式：TwoWay](https://stackoverflow.com/questions/11231624/mvvmcross-monotouch-c-sharp-binding-int-property-mode-twoway)
*   Touch 事件的自定义绑定 - [android 中的 mvvmcross touch 命令绑定](https://stackoverflow.com/questions/11815893/mvvmcross-touch-command-binding-in-android)

[以及来自http://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html](http://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html)的其他链接

* * *

Android `DatePicker`API 显然是由 Kermit 在停机期间编写的，因此对于`DatePicker`，我可能建议您实现一个`EmiDatePicker`继承`DatePicker`并整理 API 的 API。

这可以提供单个属性和单个事件：

```
 private bool _initialised;

   public DateTime Value
   {
      get 
      {
         return new DateTime(Year, Month.ToCLRMonthNumber(), DayOfMonth);
      }
      set
      {
         if (_initialised)
         {
             UpdateDate(value.Year, value.Month.ToJavaMonthNumber(), value.DayOfMonth);
         }
         else
         {
             _initialised = true;
             Init(value.Year, value.Month.ToJavaMonthNumber(), value.DayOfMonth, new EmiListener(this));
         }
      }
   }

   public event EventHandler ValueChanged; 
```

在哪里：

*   `ToJavaMonthNumber`,`ToCLRMonthNumber`是 +1、-1 修复的解决方法 - 请参阅[MonthDisplayHelper.NumberOfDaysInMonth 在 MonoDroid 中返回不正确的值](https://stackoverflow.com/questions/14754025/monthdisplayhelper-numberofdaysinmonth-returning-incorrect-value-in-monodroid/14755749#14755749)
*   EmiListener 是`IOnDateChangeListener`触发 ValueChanged 的​​简单实现 - 类似于：

    ```
    public class EmiListener : Java.Lang.Object, DatePicker.IOnDateChangedListener
    {
        private EmiDatePicker _datePicker;

        public EmiListener(EmiDatePicker datePicker)
        {
            _datePicker = datePicker;
        }

        public void OnDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth)
        {
            _datePicker.InternalSetValueAndRaiseChanged(new DateTime(year, monthOfYear.ToCLRMonth(), dayOfMonth));
        }
    } 
    ```

完成此操作后...接下来的代码步骤将是添加绑定-这很简单：

```
public class EmiDatePickerValueTargetBinding : MvxPropertyInfoTargetBinding<EmiDatePicker>
{
    public EmiDatePickerValueTargetBinding(object target, PropertyInfo targetPropertyInfo)
        : base(target, targetPropertyInfo)
    {
        var datePicker = View;
        if (datePicker == null)
        {
            MvxBindingTrace.Trace(MvxTraceLevel.Error, "Error - datePicker is null in EmiDatePickerValueTargetBinding");
        }
        else
        {
            datePicker.ValueChanged += DatePickerOnValueChanged;
        }
    }

    public override MvxBindingMode DefaultMode
    {
        get { return MvxBindingMode.TwoWay; }
    }

    private void DatePickerOnValueChanged(object sender, EventArgs args)
    {
        FireValueChanged(View.Value);
    }

    protected override void Dispose(bool isDisposing)
    {
        base.Dispose(isDisposing);
        if (isDisposing)
        {
            var datePicker = View;
            if (datePicker != null)
            {
                datePicker.ValueChanged -= DatePickerOnValueChanged;
            }
        }
    }
} 
```

要注册此绑定，只需将其添加到应用程序的设置类中：

```
 protected override void FillTargetFactories(Cirrious.MvvmCross.Binding.Interfaces.Bindings.Target.Construction.IMvxTargetBindingFactoryRegistry registry)
    {
        registry.RegisterFactory(new MvxSimplePropertyInfoTargetBindingFactory(
                                     typeof (EmiDatePickerValueTargetBinding), typeof (EmiDatePicker), "Value"));

        base.FillTargetFactories(registry);
    } 
```

* * *

在这一点上，你终于可以在你的 XML 中使用 EmiDatePicker - 尽管为了节省打字我建议使用 XML 缩写 - [http://slodge.blogspot.co.uk/2013/02/abbreviated-namespaces-for -your-custom.html](http://slodge.blogspot.co.uk/2013/02/abbreviated-namespaces-for-your-custom.html)

* * *

要做 TimePicker... 再次相同，但我会把它留给你...

* * *

上面的代码中会有错别字 - 请进行编辑以更正它。

如果这段代码有效......并且由于它是很多“机械代码”，我很乐意看到它开源（甚至可能推回 MvvmCross）

# java - 在同一个包中导入一些类

> ID：14829522
> 
> 赞同：10
> 
> 时间：2013-02-12T09:42:05.610
> 
> 标签：java, class, import, package

我想一次导入一个包中的所有类，而不是一个一个。我试过`import pckName.*;`了，但它不起作用。

示例：我在包名称 pack1 中有类 X。

```
package pack1;

public class X {
.
.
} 
```

我在同一个包中有 Y 类。

```
package pack1;

public class Y {
.
.
} 
```

我不想像这样导入它们：

```
import pack1.X;
import pack1.Y; 
```

为什么？因为我的包（har！）有很多类，一一添加很烦人。有没有办法一次全部导入？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T09:45:40.283

你应该使用：

```
import pack1.*; 
```

将此行添加到其他包中的类。例如：

```
package pack2;

import pack1.*;

public class XPack2 {
    // ...
    // X x = new X();
    // ...
} 
```

只要确保您的**类路径**设置正确。

当您有*2 个具有相同名称的类*时，可能会出现问题:`pack1.X`和`pack2.X`.

然后你应该明确地写出类的完全限定名。

# python - 如何为 304 http 响应代码设置 Content-Type 标头？

> ID：14829523
> 
> 赞同：1
> 
> 时间：2013-02-12T09:42:06.907
> 
> 标签：python, django

所以我使用 Django 中的一些装饰器来启用我的 API 上的缓存：

```
@require_GET
@cache_page(100)
@cache_control(max_age=100, s_maxage=100)
@csrf_exempt
def my_api(request): 
```

问题是，304 Not Modified 响应带有 text/html Content-Type 标头。我的 API 通常返回 application/json Content-Type 标头，我希望保持一致。有没有办法告诉 Django 使用 304 响应代码返回什么内容类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:23:33.230

问题在这里[https://github.com/django/django/blob/master/django/http/response.py#L411](https://github.com/django/django/blob/master/django/http/response.py#L411)

写一个装饰器再次添加 mimetype

```
def RestoreMime(fn):
  def Wrapper(*args, **kwds):
    response = fn(*args, **kwds)
    response['Content-type'] = your_mime_type
    return response
  return Wrapper 
```

# javascript - jQuery Datatables - 未为 Ajax 响应填充表

> ID：14829530
> 
> 赞同：0
> 
> 时间：2013-02-12T09:42:39.083
> 
> 标签：javascript, jquery, datatables

我正在尝试将 jquery 数据表与服务器端处理集成到一个 UI 组件中。请求 url 返回一个 json。JSON 格式良好，并通过了 jsonlint 的验证。

这是从 firebug 获取的典型 json 响应。

```
{
    "sEcho": 1,
    "iTotalRecords": 6416,
    "iTotalDisplayRecords": 5,
    "aaData": [
        {
            "0": 421367,
            "1": "Test1",
            "2": "NEW",
            "3": "Default",
            "4": "18 Aug 2011 20:27:12 GMT",
            "5": "TestBench",
            "6": "NA"
        },
        {
            "0": 421368,
            "1": "Test2",
            "2": "NEW",
            "3": "Default",
            "4": "18 Aug 2011 20:27:12 GMT",
            "5": "TestBench",
            "6": "NA"
        },
        {
            "0": 421369,
            "1": "Test3",
            "2": "NEW",
            "3": "Default",
            "4": "18 Aug 2011 20:27:12 GMT",
            "5": "TestBench",
            "6": "NA"
        },
        {
            "0": 421370,
            "1": "Test4",
            "2": "NEW",
            "3": "Default",
            "4": "18 Aug 2011 20:27:13 GMT",
            "5": "TestBench",
            "6": "NA"
        },
        {
            "0": 421371,
            "1": "Test5",
            "2": "NEW",
            "3": "Default",
            "4": "18 Aug 2011 20:27:13 GMT",
            "5": "TestBench",
            "6": "NA"
        }
    ]
} 
```

脚本：

```
 $(document).ready(function() {
   var thisTable;  
    thisTable = $('#events').dataTable( {
      "bProcessing": true,
      "bServerSide": true,
      "bJQueryUI": true,
      "sPaginationType": "full_numbers",
      "sAjaxSource": "http://localhost:9000/dt/data/all"
    });
  }); 
```

我在屏幕上看到处理窗口，它不会停止。桌子还是空的。

我在这里错过了什么吗？

sEcho 有问题吗？因为我一直在看到处理窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:59:29.317

我遇到了同样的问题，即处理消息永远不会停止，但发布响应没有任何错误。我检查了 POST 数据，我的错误是更改页码后浏览器发送到服务器 sEcho=2（如果单击第 2 页）但我的服务器端代码仍然发送​​回浏览器 sEcho=1，因此导致错误。我已经从请求参数中获取了正确的 sEcho 值并将其放入我的 json 响应数据中，现在它工作正常！！

String sEcho =request.getParameter("sEcho");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:20:44.167

我认为您的设置需要一组数组。你的数据是一个对象数组。所以你必须使用“aoColumns”选项（[http://www.datatables.net/release-datatables/examples/ajax/objects.html](http://www.datatables.net/release-datatables/examples/ajax/objects.html)）

所以我认为它应该是这样的：

```
$(document).ready(function() {
    var thisTable;  
    thisTable = $('#events').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "sAjaxSource": "http://localhost:9000/dt/data/all"
        "aoColumns": [
            { "mData": "0" },
            { "mData": "1" },
            { "mData": "2" },
            { "mData": "3" },
            { "mData": "4" },
            { "mData": "5" },
            { "mData": "6" },
        ]
    });
}); 
```

这个小提琴似乎对我有用（但我无法测试 sAjaxSource 属性，因为它需要一个我无法访问的网址）[http://jsfiddle.net/thomasjonas/jW7uC/1/](http://jsfiddle.net/thomasjonas/jW7uC/1/)

# c# - Monocross和Monotouch（xamarin）之间的区别？

> ID：14829532
> 
> 赞同：15
> 
> 时间：2013-02-12T09:42:43.283
> 
> 标签：c#, xamarin.ios, cross-platform, mvvmcross, monocross

我现在正在探索 Monotouch（由 Xamarin 提供）与 Monocross 等其他解决方案的功能？

任何人都可以解释何时使用 Monotouch 以及何时使用 Monocross。

这些框架 wrt 原生应用程序开发的优缺点是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-14T08:55:35.190

只是为了尝试从视觉上添加到 Stephane 的答案中，这是一个稍微改编自我的一个演示文稿的图表：

![图表](../Images/ed009ca87026150b1583419a86381611.png)

* * *

请注意，您不必使用 MonoCross、MvvmCross 等共享库。您始终可以编写自己的架构。这就像在网络应用程序中一样——你不必使用 WebForms、ASP.Net Mvx、FubuMvc 等——你可以只使用请求和响应并更直接地与网络服务器对话。

因此，您可以编写自己的代码以使您的应用程序适应每个平台，例如：

![图表](../Images/2e206a19412e49438f1b1a69e4d42ff8.png)

* * *

您应该采取哪种方法 - 取决于您和您的应用程序的要求......以及个人意见。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-12T10:36:42.160

Monocross 是一个跨平台的 MVC 框架。作为一个框架，它是开源的。但是您需要 monotouch 或 mono 用于 android 以便在设备上进行部署。

这2个东西没法比。他们总结。

使用 Monocross 或 MvvmCross 等工具，您真正获得了跨平台代码共享框架，这就是您相对于使用本地语言进行编码的优势。

# php - PHP-如何从满足条件的表中获取所有行？

> ID：14829537
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:43:06.817
> 
> 标签：php, mysql, database

我有一个包含**toemail**、**fromemail**和**send列的表格****邀请** 我需要从所有有效**send=1的行中打印****toemail**和**fromemail**

 ******这是我正在使用的代码

```
<?php
$query = mysql_query("SELECT fromemail,toemail FROM invitations WHERE sent = 1");
if(mysql_num_rows($query)!=0)
{
    $row = mysql_fetch_assoc($query);
    echo $row['toemail'];
    echo $row['fromemail];
}
?> 
```

但这仅打印满足条件的第一行。
请帮我获取php代码。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:46:38.333

用这个，

```
$query = mysql_query("SELECT fromemail,toemail FROM invitations WHERE sent = 1");
if(mysql_num_rows($query)!=0)
{
    while($row = mysql_fetch_assoc($query)) {
           echo $row['toemail'];
           echo $row['fromemail];
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T10:49:06.327

您可以使用以下 -

```
$query = mysql_query("SELECT fromemail,toemail FROM invitations WHERE sent = 1");
if(mysql_num_rows($query)!=0)
{
    $result = mysql_result($query);
    foreach($result in $row) {
           echo $row->toemail;
           echo $row->fromemail;
    }
} 
```

PS - MYSQL 扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

参考 - [http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)******

# java - 简单日期格式查询

> ID：14829545
> 
> 赞同：3
> 
> 时间：2013-02-12T09:43:20.403
> 
> 标签：java

我有以下片段

```
Date date=null;
    SimpleDateFormat sdf=new SimpleDateFormat("dd-MM-yyyy");
    try {
        date= sdf.parse("2001-02-2012");
        System.out.println(date);
    } catch (ParseException ex) {
        ex.printStackTrace();
    } 
```

奇怪的是它不会抛出解析异常，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:53:07.863

问题是您的输入有点*出乎意料*。SimpleDateFormat 然后尝试以有用的方式解释它。因此，在您的情况下，有些`2001`天会简单地转换为周、月和年。你的日期是`Mon Jul 24 00:00:00 GMT 2017`。您可以在 ideone 上查看：http: [//ideone.com/bfgogz](http://ideone.com/bfgogz)

要“修复”它，您可以添加一个`sdf.setLenient(false);`以仅接受与您指定的方式完全相同的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:48:05.987

会计。到文档：

```
public Date parse(String source) throws ParseException 
```

> 从给定字符串的开头解析文本以生成日期。**该方法可能不会使用给定字符串的整个文本**。

和

> throws `ParseException`- 如果指定字符串的**开头**无法解析。

请参阅：日期[格式](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#parse)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T09:50:35.293

`ParseException`如果你不宽容地解析它 ，它会抛出。`DateFormat#setLenient(false)`它也知道**严格解析**。

> 指定日期/时间解析是否宽松。通过宽松的解析，解析器可以使用启发式方法来解释不精确匹配该对象格式的输入。使用严格的解析，输入必须匹配这个对象的格式。

[文档](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)-

```
SimpleDateFormat sdf=new SimpleDateFormat("dd-MM-yyyy");
sdf.setLenient(false);
try{
    date = sdf.parse("2001-02-2012");
    System.out.println(date);
} catch (ParseException ex) {
    ex.printStackTrace();
} 
```

结果 -

```
java.text.ParseException: Unparseable date: "2001-02-2012" 
```

*注意：默认`Dateformat/SimpleDateFormat`情况下，解析宽松。*

# spring-mvc - Spring Roo 的 Thymeleaf 有什么附加功能吗？

> ID：14829551
> 
> 赞同：6
> 
> 时间：2013-02-12T09:43:43.327
> 
> 标签：spring-mvc, spring-roo, thymeleaf

现在我用 Spring Roo 开发 Spring 项目，我想使用 Thymeleaf 而不是默认的 .japx 页面。如何在 Spring Roo 中生成 Thymeleaf。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:25:16.110

从当前的 Spring Roo 版本 1.2.3 开始，没有支持（在互联网漫游几天后我可以找到）。

当这样的插件可用时，我会立即切换到 Thymeleaf！如果您找到这样的插件，请分享！

# javascript - id 包含 Jquery 中的特定字符串名称

> ID：14829553
> 
> 赞同：1
> 
> 时间：2013-02-12T09:44:05.410
> 
> 标签：javascript, jquery

我有一个 tmp 变量。如果标签 id 包含 tmp 字符串要添加类。怎么做？

```
 $(document).ready(function () {
  var tmp = "#lnkPage" + id;

   $("#pageingdiv").children().each(function (n, i) {
        var id = this.id;
      //if (id.contains(tmp)) {
       // $(id).addClass('box');
        //}
    });
 });

 <div id="pageingDiv">
        <a id="CPH_Content_C002_lnkPage1" ></a>
        <a id="CPH_Content_C002_lnkPage2" ></a>
        <a id="CPH_Content_C002_lnkPage3" ></a>
        <a id="CPH_Content_C002_lnkPage4" ></a>       
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:46:18.790

采用`indexOf()`

```
if(id.indexOf(tmp) !== -1)
{
    $(id).addClass('box');
} 
```

此外，您不应拥有具有相同 ID 的元素，而应使用 class

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:46:33.530

查看[Attribute 以 开头](http://api.jquery.com/attribute-starts-with-selector/)，以[Attribute 结尾，](http://api.jquery.com/attribute-ends-with-selector/)并且[Attribute 包含](http://api.jquery.com/attribute-contains-selector/)Selectors。它们将帮助您直接选择所需的所有元素，而无需调用任何其他函数`.addClass()`。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:52:01.957

您可以使用`jQuery( "input[id*='value']" )`Selector 检查其是否包含特定字符串作为 ID。

**测试代码**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        $( "a[id*='lnkPage']" ).addClass('SampleClass');
    });

</script>

<div id="pageingDiv">
    <a id="CPH_Content_C002_lnkPage1" ></a>
    <a id="CPH_Content_C002_lnkPage1" ></a>
    <a id="CPH_Content_C002_lnkPage1" ></a>
    <a id="CPH_Content_C002_lnkPage1" ></a>
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:52:31.850

试试这个

```
var tmp = "lnkPage1";
$("a[id*='"+tmp+"']").addClass('box'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T09:54:27.590

试试这个：

```
 var tmp = "lnkPage" + id; // <-----remove the hash '#'

 $('[id$="'+tmp+'"]').addClass('box'); 
```

# java - 在 JFrame 上显示延迟

> ID：14829554
> 
> 赞同：1
> 
> 时间：2013-02-12T09:44:07.713
> 
> 标签：java, swing, jframe

我写了一个程序，它显示了一个`JFrame`包含有关运行它的机器的信息（`HOST`和`IP`），它`JDBC`建立连接以显示另一个信息。

我的`main`函数中只有这两行：

```
NewFrame nf = new NewFrame(); //Here I make all the needed calculations
nf.setVisible(true); 
```

（*NewFrame 扩展了 JFrame*）

在构造函数中，我执行所有需要的计算并将它们设置为显示在`nf JFrame`.

当我运行程序时，我会看到*0.5-1*秒的**边框**，然后才会填充信息，尽管我将它设置为仅在构建后才可见。`JFrame`

 *这是我大约*1*秒钟看到的：（里面是我的桌面背景）

![前](../Images/97fc7b0747c2ed98d599fd6f34d3b1eb.png)

然后我看到了信息：

![后](../Images/452722033027a151a8f455a513974b57.png)

尽管我在构造函数中进行了所有计算，但为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:53:48.070

听起来您正在阻止事件调度线程（EDT）

您应该避免在 EDT 上运行任何可能阻塞或耗时的操作。这将阻止 EDT 调度重绘事件，这很重要。

您可能想看看Swing 中的[Concurrency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)和[Swing Worker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

处理 Swing 和 Threads 时的重要规则之一，您只能从 EDT 内部与 Swing 组件交互

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:53:54.560

看起来您在 GUI 线程中同步进行了一些阻塞调用，即数据库查询。您应该使用以下方式异步执行此类操作`SwingWorker`：

```
final JTextField field = new JTextField ();
field.setEditable (false);

JButton button = new JButton(new AbstractAction ("Calculate!") {
    @Override
    public void actionPerformed(ActionEvent e) {
        field.setText ("Calculating...");

        new SwingWorker<String, String> ()
        {
            @Override
            protected String doInBackground() throws Exception {
                Thread.sleep(3000L);

                field.setText ("Calculated!");

                return null;
            }
        }.execute();
    }
});

JFrame frame = new JFrame ();
frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
frame.getContentPane ().setLayout (new BorderLayout());
frame.getContentPane ().add (button, BorderLayout.NORTH);
frame.getContentPane ().add (field, BorderLayout.CENTER);
frame.pack ();
frame.setVisible (true); 
```*

# java - Eclipse 警告：未经检查的转换与类型参数的冗余规范

> ID：14829557
> 
> 赞同：8
> 
> 时间：2013-02-12T09:44:13.683
> 
> 标签：java, eclipse, generics, compiler-warnings

我最近刚从 JDK1.6 切换到 JDK 1.7。

我有这个代码：

```
SomeClass<SomeType> someVariable = new SomeClass<SomeType>(createSomeObject()); 
```

现在我收到警告：

```
Redundant specification of type arguments <SomeType> 
```

如果我使用快速修复 Eclipse 会给我这个：

```
SomeClass<SomeType> someVariable = new SomeClass<>(createSomeObject()); 
```

这导致

```
Got an exception - expecting EOF, found 'xyz' 
```

xyz 是我的代码文本中的下一项。

当我删除尖括号时，我收到以下警告：

```
SomeClass is a raw type. References to generic type SomeClass<M> should be parameterized 
```

如果我添加类型参数，我最终会收到第一个警告（冗余规范......）

WTF正在进行吗？

我想保留这两个警告，我仍在使用 Eclipse 3.7.1。如果有另一种方法可以解决这个问题，我不愿意更新我的 Eclipse，因为我需要一些时间来按照我想要的方式再次配置它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:45:34.887

> 类型参数的冗余规范`<SomeType>`

来自 Java 7 的[类型推断机制](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)。两次指定泛型类型确实是多余的，因为编译器可以简单地从

```
SomeClass<SomeType> someVariable = new SomeClass<>(createSomeObject()); 
```

因此，您在声明和定义中都不需要泛型类型（类型推断*可以*走得更远 - 例如，使用 Scala 您只需将 LHS 声明为`val`or `var`，编译器就知道它真正需要的类型）。

# assembly - 汇编 8086 中的键盘输入

> ID：14829561
> 
> 赞同：1
> 
> 时间：2013-02-12T09:44:17.347
> 
> 标签：assembly, input, keyboard, x86, x86-16

我正在尝试在程序集 8086 中创建一个动画，由键盘控制，使用 ctrl 和 shift 作为左右。

我试图看看如何在 8086 中从键盘接收输入，而不是如何找出按下的键是 ctrl 或 shift（通常是按下哪个键）。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:14:54.390

你确定你不会使用左右方向键吗？control 和 shift 的问题在于它们不会“返回”一个键，而是修改另一个被按下的键。这是在键盘中断处理程序（9，IIRC）中处理的，您可以“挂钩”它。我认为查看“Bios 数据区”并观察中断处理程序在何处跟踪控制和换档键的状态会更容易。在我看来，BDA 在第 40h 段。键盘状态标志在... 17h 和 18h？不要相信我的话，请查一下。拉尔夫布朗的中断清单。这一切都假设“8086”的意思是，比如……古物。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:06:06.773

假设您仅在 BIOS 下执行此操作，您可能会发现使用更高级别的 BIOS 键盘中断更容易 - [int 0x16 AH=0x01](http://www.ctyme.com/intr/rb-1755.htm)用于一般击键，而[int 0x16 AH=0x02](http://www.ctyme.com/intr/rb-1756.htm)用于 ctrl/shift 等是可能的可能性，尽管还有许多其他可能性（包括其他 int 0x16 命令和 - 如之前所建议的 - 低级键盘 int 0x09 和 BIOS 数据区域。我强烈[支持 Ralf Brown 的中断列表](http://www.ctyme.com/rbrown.htm)的推荐- 一个极好的资源！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-02T08:49:52.727

Bios 将密钥存储在 16 个字母的缓冲区中。这意味着如果操作系统太慢，每当它读取下一个击键时，它都会从缓冲区中读取。

您可以使用 int 16h 并将 ah 设置为 02h 以将 al 设置为缓冲区中的下一个字符。但是，如果您正在检查缓冲区的状态（是否有密钥），请查看[此内容。](http://webpages.charter.net/danrollins/techhelp/0230.HTM)它基本上进入了更深入的 ah 02h

由于您要询问箭头键，因此这里是它们的十六进制代码：

1.  0x18
2.  0x19
3.  0x1B
4.  R 0x1A

# python - 使用 Amazon SWF 在服务器之间进行通信

> ID：14829562
> 
> 赞同：9
> 
> 时间：2013-02-12T09:44:18.670
> 
> 标签：python, linux, amazon-web-services, boto, amazon-swf

使用 Amazon SWF 在服务器之间传递消息？

1.  在服务器上 AI 想运行一个脚本 A
2.  完成后，我想向服务器 B 发送消息以运行脚本 B
3.  如果它成功完成，我希望它从工作流队列中清除作业

我很难弄清楚如何结合使用 Boto 和 SWF 来做到这一点。我不追求一些完整的代码，但我追求的是是否有人可以解释更多关于所涉及的内容。

*   我实际上如何告诉服务器 B 检查脚本 A 的完成情况？
*   如何确保服务器 A 不会完成脚本 A 并尝试运行脚本 B（因为服务器 B 应该运行它）？
*   我如何实际通知 SWF 脚本 A 完成？你是一面旗帜，还是一条信息，还是什么？

我对这一切感到很困惑。我应该使用什么设计？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T20:40:30.263

我认为您提出了一些非常好的问题，这些问题突出了 SWF 作为一项服务的帮助。简而言之，您不会告诉您的服务器在它们之间协调工作。在 SWF 服务的帮助下，您的决策者会为您安排这一切。

您的工作流程的实施将如下所示：

1.  向服务注册您的工作流程及其活动（一次性）。
2.  实施决策者和工人。
3.  让您的工人和决策者运行。
4.  开始一个新的工作流程。

有多种方法可以将凭据输入 boto.swf 的代码。出于本练习的目的，我建议在运行以下代码之前将它们导出到环境中：

```
export AWS_ACCESS_KEY_ID=<your access key>
export AWS_SECRET_ACCESS_KEY=<your secret key> 
```

1) 要注册域、工作流和活动，请执行以下操作：

```
# ab_setup.py
import boto.swf.layer2 as swf

DOMAIN = 'stackoverflow'
ACTIVITY1 = 'ServerAActivity'
ACTIVITY2 = 'ServerBActivity'
VERSION = '1.0'

swf.Domain(name=DOMAIN).register()
swf.ActivityType(domain=DOMAIN, name=ACTIVITY1, version=VERSION, task_list='a_tasks').register()
swf.ActivityType(domain=DOMAIN, name=ACTIVITY2, version=VERSION, task_list='b_tasks').register()
swf.WorkflowType(domain=DOMAIN, name='MyWorkflow', version=VERSION, task_list='default_tasks').register() 
```

2) 实施和运行决策者和工作者。

```
# ab_decider.py
import time
import boto.swf.layer2 as swf

DOMAIN = 'stackoverflow'
ACTIVITY1 = 'ServerAActivity'
ACTIVITY2 = 'ServerBActivity'
VERSION = '1.0'

class ABDecider(swf.Decider):

    domain = DOMAIN
    task_list = 'default_tasks'
    version = VERSION

    def run(self):
        history = self.poll()
        # Print history to familiarize yourself with its format.
        print history
        if 'events' in history:
            # Get a list of non-decision events to see what event came in last.
            workflow_events = [e for e in history['events']
                               if not e['eventType'].startswith('Decision')]
            decisions = swf.Layer1Decisions()
            # Record latest non-decision event.
            last_event = workflow_events[-1]
            last_event_type = last_event['eventType']
            if last_event_type == 'WorkflowExecutionStarted':
                # At the start, get the worker to fetch the first assignment.
                decisions.schedule_activity_task('%s-%i' % (ACTIVITY1, time.time()),
                   ACTIVITY1, VERSION, task_list='a_tasks')
            elif last_event_type == 'ActivityTaskCompleted':
                # Take decision based on the name of activity that has just completed.
                # 1) Get activity's event id.
                last_event_attrs = last_event['activityTaskCompletedEventAttributes']
                completed_activity_id = last_event_attrs['scheduledEventId'] - 1
                # 2) Extract its name.
                activity_data = history['events'][completed_activity_id]
                activity_attrs = activity_data['activityTaskScheduledEventAttributes']
                activity_name = activity_attrs['activityType']['name']
                # 3) Optionally, get the result from the activity.
                result = last_event['activityTaskCompletedEventAttributes'].get('result')

                # Take the decision.
                if activity_name == ACTIVITY1:
                    # Completed ACTIVITY1 just came in. Kick off ACTIVITY2.
                    decisions.schedule_activity_task('%s-%i' % (ACTIVITY2, time.time()),
                        ACTIVITY2, VERSION, task_list='b_tasks', input=result)
                elif activity_name == ACTIVITY2:
                    # Server B completed activity. We're done.
                    decisions.complete_workflow_execution()

            self.complete(decisions=decisions)
            return True 
```

工人要简单得多，如果您不想使用继承，则无需使用。

```
# ab_worker.py
import os
import time
import boto.swf.layer2 as swf

DOMAIN = 'stackoverflow'
ACTIVITY1 = 'ServerAActivity'
ACTIVITY2 = 'ServerBActivity'
VERSION = '1.0'

class MyBaseWorker(swf.ActivityWorker):

    domain = DOMAIN
    version = VERSION
    task_list = None

    def run(self):
        activity_task = self.poll()
        print activity_task
        if 'activityId' in activity_task:
            # Get input.
            # Get the method for the requested activity.
            try:
                self.activity(activity_task.get('input'))
            except Exception, error:
                self.fail(reason=str(error))
                raise error

            return True

    def activity(self, activity_input):
        raise NotImplementedError

class WorkerA(MyBaseWorker):
    task_list = 'a_tasks'

    def activity(self, activity_input):
        result = str(time.time())
        print 'worker a reporting time: %s' % result
        self.complete(result=result)

class WorkerB(MyBaseWorker):
    task_list = 'b_tasks'

    def activity(self, activity_input):
        result = str(os.getpid())
        print 'worker b returning pid: %s' % result
        self.complete(result=result) 
```

3）运行你的决策者和工人。您的决策者和工作人员可能在不同的主机上运行，​​也可能在同一台机器上运行。打开四个终端并运行你的演员：

首先是你的决策者

```
$ python -i ab_decider.py 
>>> while ABDecider().run(): pass
... 
```

然后工人 A，您可以从服务器 A 执行此操作：

```
$ python -i ab_workers.py 
>>> while WorkerA().run(): pass 
```

然后是工人 B，可能来自服务器 B，但如果你从笔记本电脑上运行它们，它也能正常工作：

```
$ python -i ab_workers.py 
>>> while WorkerB().run(): pass
... 
```

4) 最后，启动工作流程。

```
$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import boto.swf.layer2 as swf
>>> workflows = swf.Domain(name='stackoverflow').workflows()
>>> workflows
[<WorkflowType 'MyWorkflow-1.0' at 0xdeb1d0>]
>>> execution = workflows[0].start(task_list='default_tasks')
>>> 
```

切换回来看看你的演员会发生什么。他们可能会在不活动一分钟后断开与服务的连接。如果发生这种情况，请按向上箭头+回车键重新进入轮询循环。

您现在可以转到 AWS 管理控制台的 SWF 面板，查看执行情况并查看其历史记录。或者，您可以通过命令行查询它。

```
>>> execution.history()
[{'eventId': 1, 'eventType': 'WorkflowExecutionStarted', 
'workflowExecutionStartedEventAttributes': {'taskList': {'name': 'default_tasks'}, 
'parentInitiatedEventId': 0, 'taskStartToCloseTimeout': '300', 'childPolicy': 
'TERMINATE', 'executionStartToCloseTimeout': '3600', 'workflowType': {'version': 
'1.0', 'name': 'MyWorkflow'}}, 'eventTimestamp': 1361132267.5810001}, {'eventId': 2, 
'eventType': 'DecisionTaskScheduled', 'decisionTaskScheduledEventAttributes': 
{'startToCloseTimeout': '300', 'taskList': {'name': ... 
```

这只是活动串行执行的工作流示例，但决策者也可以[安排和协调活动的并行执行](http://log.ooz.ie/2013/01/botoswf-amazon-simple-workflow-in-python.html)。

我希望这至少能让你开始。对于串行工作流的稍微复杂的示例，我建议[查看此](http://log.ooz.ie/2013/02/simple-workflow-example-with-botoswf.html).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T18:33:31.267

我没有任何示例代码要分享，但您绝对可以使用 SWF 来协调跨两台服务器执行脚本。这样做的主要思想是创建与 SWF 对话的三段代码：

*   一个组件，它知道首先执行哪个脚本以及在第一个脚本执行完成后要做什么。这在 SWF 术语中称为“决定者”。
*   两个组件，每个组件都了解如何执行要在每台机器上运行的特定脚本。这些在 SWF 术语中称为“活动工作者”。

第一个组件（决策程序）调用两个 SWF API：PollForDecisionTask 和 RespondDecisionTaskCompleted。轮询请求将为决策程序组件提供执行工作流的当前历史记录，基本上是脚本运行器的“我在哪里”状态信息。您编写代码来查看这些事件并确定应该执行哪个脚本。这些执行脚本的“命令”将以活动任务调度的形式出现，该活动任务作为调用 RespondDecisionTaskCompleted 的一部分返回。

您编写的第二个组件，即活动工作者，每个都调用两个 SWF API：PollForActivityTask 和 RespondActivityTaskCompleted。轮询请求将给活动工作者一个指示，表明它应该执行它知道的脚本，SWF 称之为活动任务。从轮询请求返回到 SWF 的信息可以包括作为活动任务调度的一部分发送到 SWF 的单个执行特定数据。您的每台服务器都将独立轮询 SWF 以获取活动任务，以指示在该主机上执行本地脚本。工作人员执行完脚本后，它会通过 RespondActivityTaskCompleted API 回调 SWF。

从您的活动工作者到 SWF 的回调导致将新的历史记录分发给我已经提到的决策器组件。它将查看历史记录，看到第一个脚本已完成，并安排第二个脚本执行。一旦它看到第二个已经完成，它可以使用另一种类型的决策“关闭”工作流。

您可以通过调用 StartWorkflowExecution API 启动在每个主机上执行脚本的整个过程。这将在 SWF 中创建整个进程的记录，并将第一个历史记录踢出到决策进程，以安排第一个脚本在第一台主机上的执行。

希望这能提供更多关于如何使用 SWF 完成此类工作流的背景信息。如果您还没有，我会查看 SWF 页面上的开发指南以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:05:37.263

您可以使用 SNS，当脚本 A 完成时它应该触发 SNS，这将触发到服务器 B 的通知

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-24T08:43:57.013

好例子，

此外，如果您不想将凭据导出到环境，则可以在类中调用：

```
swf.set_default_credentials(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY) 
```

# php - 创建管理控制面板的演示

> ID：14829569
> 
> 赞同：2
> 
> 时间：2013-02-12T09:44:56.253
> 
> 标签：php, mysql

我创建了一个具有管理控制面板的网络应用程序，它几乎完成了，但突然我发现我应该启动控制面板作为演示，公众可以使用公共用户 ID 和密码登录并进行更改，但从数据库中恢复默认数据另一个用户。我怎样才能做到这一点？哪种方式更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:57:12.373

1.  为这个演示用户创建数据库。考虑应该阻止哪些功能（例如密码、更改等）。
2.  使用演示数据制作数据库转储。
3.  每小时（或每次登录）运行将截断所有表的脚本（如果您有限制，请记住正确的截断队列），然后运行您的转储文件。

# ajax - 应该如何在通过 AJAX 返回的 ASP.NET MVC4 部分视图中捆绑 JS？

> ID：14829572
> 
> 赞同：0
> 
> 时间：2013-02-12T09:45:10.217
> 
> 标签：ajax, asp.net-mvc, jquery, asp.net-mvc-4

我正在使用 System.Web.Optimization 框架来捆绑和缩小我的 JavaScript，并且我正在使用 @section Script{ } 部分来确保我的所有 JavaScript 都定义在页面底部。这包括诸如 jQuery 之类的资源。

现在，我的一个页面具有 AJAX 功能。当此函数返回时，它会返回一个局部视图，然后将其添加到 DOM。这个局部视图包含一个表单和一些 JavaScript，它们使用（不出所料）jQuery 为局部视图中的元素连接事件处理程序。

现在，我目前在脚本标签内的页面中声明了这个 JavaScript，但我正试图转移到我的所有 JavaScript 都不显眼（换句话说，都在外部文件中）的情况。

通常使用部分，我会确保在父视图的包中定义外部 JS 文件，但这是 AJAX，所以 $(document).ready(...) 将在我的 AJAX 返回之前触发。

我正在探索 jQuery 的 .on() 方法[似乎已经取代了已弃用的 .live() 方法]，但这是最好的方法还是我应该考虑其他方法？

提前致谢

格里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T03:09:19.447

我已经完成了这两种不同的方式。第一个是将我的点击事件等放入我在部分视图加载后调用的函数中。这使得代码可用并且可以在局部视图上运行。我最近学到的第二种方法是写我的事件有点不同

```
$(document).on('click', '.btnSubmit', function(){
    //code
}); 
```

以这种方式编写事件，即使在页面加载后加载了部分视图，它也会触发。希望这会有所帮助。

# php - 循环内的函数

> ID：14829573
> 
> 赞同：-2
> 
> 时间：2013-02-12T09:45:11.967
> 
> 标签：php, html, loops

我有一个用于表行和表数据的 for 循环。我只想在每个表数据上添加类名，但当然它们不会是相同的类名。

但问题是函数的输出被放置在表格之外。我已经检查了报价或其他东西，但它仍然放在外面。任何人都可以向我解释为什么？

```
function alphaCount(){
  for ($i=65; $i<=90; $i++) {
    echo char($i);
  }
  for($i=1;$i<=10;$i++) {
    echo '<td  class="char-'.$i.'-'.$this->alphaCount.'"> </td>';
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:52:57.857

老实说，我没有得到太多你的代码，但根据你描述的问题，我猜问题如下。

您有一个生成一些标识符的函数，但它会回显它而不是返回它，如下所示：

```
function getId() {
  // something
  echo $id;
} 
```

当您生成条目时，您将拥有以下代码：

```
echo "<tr class='" . getId() . "'>...</tr>"; 
```

就像该`getId()`方法在`<tr>`呈现标签之前回显标识符一样。您可以通过将 echo 语句更改`getId`为 return 语句来解决它，或者您可以通过以下方式重写条目生成器：

```
echo "<tr class='"
getId();
echo "'>...</tr>"; 
```

我希望这是你遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:53:13.800

如果您查看生成的 HTML 源代码（来自浏览器中的“查看源代码”），您会发现它是无效的：

```
abcdefg...
<td class="char-1-?"> </td>
<td class="char-2-?"> </td>
... 
```

您在第一个循环中输出的内容在任何表格单元格之外。浏览器将处理它，就好像它完全在表格之外一样。

*编辑：也可能是您在问题中搞砸了括号，而您的真实代码做了一些完全不同的事情。很难从原始格式中分辨出来。*

# java - 防止访问多个循环

> ID：14829587
> 
> 赞同：2
> 
> 时间：2013-02-12T09:46:20.893
> 
> 标签：java, design-patterns

我想知道防止以可扩展方式访问多个循环的最佳方法

```
String token;
ArrayList numbers;
ArrayList names;

for(String n : numbers){
   if(token.equals(n)){
      break;
   }
}

for(String n : names){
   if(token.equals(n)){
      break;
   }
} 
```

如果我在第一个循环中发现命中，我想跳过访问第二个循环，但我想以可扩展的方式进行，因为也许稍后我将有 5 个列表

我想到的解决方案

1.  在循环内进行多次返回，但这不是一个好的编程技术

2.  设置一个标志并在其他循环中使用它（通过 if 条件或将其放在循环条件中，但是当我们有 5 个不同的列表时，这意味着我将有 5 个标志并检查我之前的循环。

我会很感激你的建议。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:49:07.557

```
public static boolean contains (Object element, Collection <?> ... collections)
{
    for (Collection c: collections)
        if (c.contains (element)) return true;

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:52:25.500

如果您有重复项，那么使用 a`Set`或 Guava怎么样。`MultiSet``ArrayList`

然后你只需要做

```
 String token = "";
        Set<String> numbers = Sets.newHashSet();
        Set<String> names = Sets.newHashSet();
        if (numbers.contains(token)) {

        }
        else if (names.contains(token)) {

        } 
```

在 a 上检查 for`contains(token)`几乎总是`Set`比在 a 上更快`List`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:55:21.973

您是否知道您可以标记循环，并将标记作为参数传递给`break`or`continue`语句？

像这样：

```
mytag: for(int i =0; i < 10; i++){
  for(int j =0; j < 10; j++){
    if(done){
      break mytag;
    }
  }
} 
```

这适用于`switch`,`while`和`do-while`, 对于`continue`和`break`。

# c++ - 在 C++ 中的 2D 动态内存分配数组中释放分配的内存

> ID：14829597
> 
> 赞同：1
> 
> 时间：2013-02-12T09:46:54.540
> 
> 标签：c++, multidimensional-array, dynamic-memory-allocation

我最近发布了一个关于此的问题，但这是一个不同的问题。我使用动态内存分配创建了一个二维数组，使用矩阵后，我们需要通过删除它来释放内存，我不明白为什么我们不能只使用`delete [] matrix`删除它而不是下面代码中的方法

```
int **matrix;

    // dynamically allocate an array
    matrix = new int *[row]; 
    for (int count = 0; count < row; count++)
        matrix[count] = new int[col];

    // free dynamically allocated memory
    for( int i = 0 ; i < *row ; i++ )
    {
        delete [] matrix[i] ;
        delete [] matrix ;
    } 
```

因为问题是因为`main()`我创建了一个二维数组并使用其他`int **`函数分配值，我不知道如何删除分配的内存，循环会导致运行时错误

```
 int main()
    {
        int **matrixA = 0, **matrixB = 0, **matrixResult = 0; // dynamically allocate an array
        int rowA, colA, rowB, colB; // to hold the sizes of the matrices

        // get values for input method
        int inputMethod = userChoiceOfInput();
        if (inputMethod == 1) // select input by keyboard
        {
            cout << "Matrix A inputting...\n";
            matrixA = getMatricesByKeyboard(&rowA, &colA);
            cout << "Matrix B inputting...\n";
            matrixB = getMatricesByKeyboard(&rowB, &colB);
        }
        else if (inputMethod == 2) // select input by files
        {
            matrixA = getMatricesByFileInput("F:\\matrixA.txt", &rowA, &colA); 
            matrixB = getMatricesByFileInput("F:\\matrixB.txt", &rowB, &colB); 
        }

        //addition(matrixA, &rowA, &colA, matrixB, &rowB, &colB);

        cout << matrixA[1][0];  

////////////////////////run time error///////////////////////
    // free allocated memory of matrix A
    for( int i = 0 ; i < rowA ; i++ )
    {
        delete [] matrixA[i] ;
        delete [] matrixA ;
    }
    // free allocated memory of matrix B
    for( int i = 0 ; i < rowB ; i++ )
    {
        delete [] matrixB[i] ;
        delete [] matrixB ;
    }
////////////////////////run time error///////////////////////

        // free allocated memory of matrix A
        delete [] matrixA ; // i dont know what would these delete
        delete [] matrixB ; 

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T09:49:55.500

您必须遍历矩阵并删除每个数组。最后，您可以删除矩阵本身

```
// free dynamically allocated memory
for( int i = 0 ; i < *row ; i++ )
{
    delete[] matrix[i]; // delete array within matrix
}
// delete actual matrix
delete[] matrix; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T09:53:39.793

如果您无论如何都在使用动态数组，我强烈建议您使用 std::vector。性能损失几乎没有，考虑到您可以更优雅地使用标准算法和向量，您的代码很可能最终会获得更高的性能。

```
unsigned int cols=40, rows=35;
std::vector<int> temp(cols,0); //this is only created so that we can initialize a 
                               //row at a time, the first parameter is the amount of 
                               //elements to initialize with and the second is the value
                               //to initialize with
std::vector<std::vector<int>> matrix(rows,temp); //creates a vector with 35 vectors each
                                                 //initialized with the values in temp

matrix[2][3] = 4;              //use just like a normal array
matrix.resize(88,temp);         //you can add rows later too
matrix.push_back(temp);         //or like this

//probably the most important, you don't need to delete because you never needed to 
//use new in the first place 
```

使用 new 和 delete 并不是真正的现代风格，这是有充分理由的。根据 C++ 和 Beyond 约定的专家，它应该只在性能优化和编写库代码时使用。许多书籍和老师仍然以这种方式教学，但另一方面，大多数书籍都是垃圾。以下是其中的精华：[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:05:48.310

因为 int* 类型没有析构函数，至少它没有你想要的析构函数。你可以通过做这样的事情来避免所有内存分配/释放的东西

```
std::vector<int*> matrix(rows);
std::vector<int> allData(rows * cols);
for(int i = 0; i < rows; i++)
{
matrix[i] = &allData[i * cols];
} 
```

或使用标准容器，如 boost::numeric::ublas::matrix。

# php - extjs 4：将模型数据从 PHP + MySql 填充到组合框中

> ID：14829598
> 
> 赞同：1
> 
> 时间：2013-02-12T09:46:56.080
> 
> 标签：php, javascript, mysql, extjs, extjs4

```
Ext.define('User', {
     extend: 'Ext.data.Model',
     fields: [
         {name: 'DeviceID', type: 'string'},
         {name: 'VehicleNo',  type: 'string'}
     ]
 });

    var store1 = new Ext.data.JsonStore({
    // store configs
    model: 'User',
    storeId: 'myStore',
    proxy: {
        type: 'ajax',
        url: 'combobox.php',
        id:'1', //show only the group ID is 1,this id are flexible,not necessary is 1
        fields: ['DeviceID','VehicleNo']
    } 
}); 
```

## 这是工具栏上的代码

```
xtype: 'combobox',
labelWidth: 50,
labelAlign: 'right',
fieldLabel: 'Vehicle',
name: 'state1',
width :180,
store: store1,
valueField: 'DeviceID',
displayField: 'VehicleNo',
typeAhead: true,
queryMode: 'local',
emptyText: 'Select a Vehicle...' 
```

## 组合框.php

```
<?php
mysql_connect("localhost", "root", "") or die("Could not connect");
mysql_select_db("db_gps") or die("Could not select database");
$parent_id = $_GET['id'];
$query = "SELECT DeviceID as id, VehicleNo as text FROM Tbl_device WHERE GroupID='".$parent_id."' ORDER BY text ASC";
$rs = mysql_query($query);
$arr = array();
while($obj = mysql_fetch_object($rs)) {
 $arr[] = $obj;
}
echo json_encode($arr);
?> 
```

## mysql数据库

```
delimiter $$

    CREATE TABLE `tbl_device` (
      `MainID` int(11) NOT NULL AUTO_INCREMENT,
      `DeviceID` varchar(11) NOT NULL,
      `VehicleNo` varchar(45) NOT NULL,
      `GroupID` varchar(45) NOT NULL,
      `AutoPic` bit(1) NOT NULL DEFAULT b'0',
      PRIMARY KEY (`MainID`)
    ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1$$ 
```

## 问题

1）我无法显示组合框数据？我的代码有问题吗？请帮忙，thanks.on我的代码我试图传递id的参数，你可以从我的代码中看到我将id：1传递给combobox.php，这个传递值是灵活的，不需要只有1 2）这个代码数据型号是否正确？带有 DeviceID 和 VehicleNo 字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:09:17.480

我认为您只需要显式调用 Store 的 load 函数即可通过配置的代理将数据加载到 Store 中：

```
store1.load(); 
```

除此之外，您可能希望检查查询返回到`php`块的数据。还要检查`json`使用 firebug 或类似的东西返回给客户端的情况。

希望这可以帮助。

**编辑**：

Or, like bmoeskau said, include `autoLoad: true` in the store config

# android - 如何在来自android的查询字符串中传递包含url的字符串

> ID：14829602
> 
> 赞同：0
> 
> 时间：2013-02-12T09:47:04.287
> 
> 标签：android, query-string, url-encoding

我需要将包含 url 的字符串发布到我能够对 url 进行编码的服务器，但这将对整个字符串进行编码，并且当获取此数据以在 android 中显示时，我只需要对 url 链接进行编码和解码。

```
mydomain/post.php?mesg=Hello%2Bhow%2Br%2Bu%250A%2BHttp%253A%252F%252Fwww.google.com%250A%250ATesting%2Burl 
```

**已编辑**

我的代码

```
String postStr = "Hello how r u?
                  http://www.google.com"; // suppose user entered string like this way

Uri.Builder builder = new Uri.Builder()
    .scheme("http")
    .authority(domain)
    .path(pageName)
    .appendQueryParameter("mesg", URLEncoder.encode(postStr, "utf-8"))
String urlStr = builder.build().toString(); 
```

执行后得到这个结果

```
Hello+how+r+u%0A+Http%3A%2F%2Fwww.google.com%0A%0ATesting+url 
```

而实际结果要这样

```
Hello how r u?
http://www.google.com

Testing url 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:03:48.913

尝试使用 Beloq 方式

您不应该对包含 URL 的整个字符串进行编码。只需对要编码和解码的部分进行编码。我认为下面是要走的路。试试看。虽然我不确定这是你要找的东西。

```
String name=URLEncoder.encode("Hello hw are you?")+"http://www.google.com"+URLEncoder.encode("Testing url"); 
```

希望它会以某种方式有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:51:59.387

尝试这个：

```
import android.net.Uri;
import android.net.Uri.Builder;

String reqUrl = "http://google.com"
Builder builder = Uri.parse(reqUrl).buildUpon();
builder.appendQueryParameter("mesg", "Value for mesg");
String finalUri = builder.build().toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:25:46.627

构建分隔 url 和文本的动态字符串。例如，你可以这样做

```
String postStr = Hello how r u? %& http://www.google.com 
```

如您所见，我使用了符号组合作为分隔符。

现在使用拆分字符串，

```
String[] values = postStr.split("%&"); 
```

您也可以使用 StringTokenizer 类！

希望这可以帮助！

# ios - Core Data 后台处理，保存不推送到主上下文

> ID：14829607
> 
> 赞同：1
> 
> 时间：2013-02-12T09:47:16.680
> 
> 标签：ios, multithreading, cocoa-touch, core-data, save

我在一些核心数据后台处理方面遇到了一些问题。当我在后台上下文中保存时，它似乎并没有将保存推到主上下文中。在调试代码时，我从正在执行保存操作的后台线程中注意到它似乎已停止（？）这种行为导致我获取过时的对象。

**来自保存的堆栈跟踪：**

```
Thread 29, Queue : NSManagedObjectContext Queue
#0  0x9a5cf80e in semaphore_wait_trap ()
#1  0x02216f08 in _dispatch_thread_semaphore_wait ()
#2  0x02214b3a in _dispatch_barrier_sync_f_slow ()
#3  0x02214a5c in dispatch_barrier_sync_f ()
#4  0x01dfe03b in _perform ()
#5  0x01dfde9e in -[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:] ()
#6  0x01ddb33c in -[NSManagedObjectContext save:] ()
#7  0x00096213 in __45-[CoreDataHelper saveInManagedObjectContext:]_block_invoke_0 at /Users/peterwarbo/Documents/Projects/MessagePlanr/MessagePlanr/CoreDataHelper.m:307
#8  0x01e734b3 in developerSubmittedBlockToNSManagedObjectContextPerform_privateasync () 
```

**保存方法：**

```
- (void)saveInManagedObjectContext:(NSManagedObjectContext *)context {

    if (context == nil) {

        // Use default MOC
        context = self.managedObjectContext;

        NSError *error = nil;

        if (context != nil)
        {
            if ([context hasChanges] && ![context save:&error])
            {
                /*
                 Replace this implementation with code to handle the error appropriately.

                 abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
                 */
                DLog(@"Unresolved error %@, %@", error, [error userInfo]);
                abort();
            }
        }

    } else {

        // First save (child) context
        [context performBlock:^{

            NSError *error = nil;

            if ([context hasChanges] && ![context save:&error])
            {
                /*
                 Replace this implementation with code to handle the error appropriately.

                 abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
                 */
                DLog(@"Unresolved error %@, %@", error, [error userInfo]);
                abort();
            }
        }];

        // Then save parent context
        [self.managedObjectContext performBlock:^{

            NSError *error = nil;

            if ([self.managedObjectContext hasChanges] && ![self.managedObjectContext save:&error]) {

                /*
                 Replace this implementation with code to handle the error appropriately.

                 abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
                 */
                DLog(@"Unresolved error %@, %@", error, [error userInfo]);
                abort();
            }
        }];
    }
} 
```

这是保存的方法，`Reminder`是一个`NSManagedObject`，当操作完成时我调用一个完成块。然而，在完成块中，当获取一些 NSManagedObjects 时，它们还没有更新（我猜是因为保存暂停？）

```
- (void)checkOverdueRemindersInBackgroundWithCompletionBlock:(void (^)(NSInteger overdueCount, NSArray *reminders))block {

    DLogName()

    // Creating a new MOC for thread safety
    NSManagedObjectContext *syncContext = [self threadedManagedObjectContext];

    [syncContext performBlock:^{

        NSArray *reminders = [self fetchEntity:APReminderEntity predicate:nil andSortDescriptors:nil inManagedObjectContext:syncContext];

        NSInteger overdueCount = 0;

        for (Reminder *reminder in reminders) {

            [reminder checkOverdue]; // Checks if object is overdue and sets a flag if it is

            [self saveInManagedObjectContext:syncContext];

            if (reminder.status.intValue == RMReminderStatusOverdue) {

                overdueCount++;
            }

        }

        block(overdueCount, reminders);
    }];
} 
```

**线程管理对象上下文方法：**

```
- (NSManagedObjectContext *)threadedManagedObjectContext {

    NSManagedObjectContext *threadedMoc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    threadedMoc.parentContext = self.managedObjectContext; //self.managedObjectContext is of type NSMainQueueConcurrencyType

    return threadedMoc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:21:52.017

出现问题是因为我使用`performBlock:`which 立即返回异步保存，因此当它被返回并且我的完成块被调用时，保存可能不会被提交。

所以这个问题的答案是在里面运行后台保存过程`performBlockAndWait:`

现在出现了另一个问题，使用 有什么缺点`performBlockAndWait:`吗？

# html - 网页上的复制保护：破折号

> ID：14829608
> 
> 赞同：2
> 
> 时间：2013-02-12T09:47:21.850
> 
> 标签：html, encoding, copy-paste, copy-protection

这是一个很棒的网页：[去那里](http://www.archivistes.org/Comment-former-et-sensibiliser-aux,1450)

现在，复制文本的一部分，例如，这个块：![网站上的文字](../Images/26b85e195d491b5caeaad33cc37a3c0a.png)

现在，将它粘贴到 Notepadd++ 上（其他编辑器似乎不适用于此）。这是结果的屏幕截图：![粘贴在 Notepadd++ 上的相同文本](../Images/33e885d6507fba35468e91e3e9965a58.png)

这怎么可能？是否有无法在网页上打印但可以复制的破折号？我听说过使用 JS 进行复制保护，但在这里，我感到非常惊讶......

关于如何实施的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:44:19.407

它是 Soft-Hyphen，一种连字符授权。要删除它，请尝试：

```
strtr($text, array("\xC2\xAD" => "")); // If you are in UTF-8
strtr($text, array("\xAD" => "")); // ISO 8859-1
str_replace('&shy;', '', $text); // html 
```

让我们在 OpenOffice 中看看：![在此处输入图像描述](../Images/d05e0dca03d405e248ee9064c063ea2d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:20:58.523

该页面使用[软连字符](http://en.wikipedia.org/wiki/Soft_hyphen)：

> 在计算和排版中，软连字符（U+00AD 软连字符，HTML: `&#173;` `&shy;`），也称为自由连字符或可选连字符，是一种连字符，用于指定文本中允许断字而不强制换行的位置如果重新排列文本，请在不方便的地方打断。

除非浏览器决定在该字符处换行，否则不会显示软连字符。

# html - 制造回复 :active，有没有可能

> ID：14829610
> 
> 赞同：0
> 
> 时间：2013-02-12T09:47:29.170
> 
> 标签：html, css

到目前为止它只响应悬停，不知道为什么它不响应活动

这是小提琴[http://jsfiddle.net/tP9E9/1/](http://jsfiddle.net/tP9E9/1/)。

CSS：

```
.menu ul li button:hover {
    background-color: rgba(206,0,0,1);
}

.menu ul li button:active {
    background-color: rgba(206,0,0,1);
} 
```

您可能已经猜到了，我有几个 div，其中包含各种内容，可以响应按钮点击而打开。悬停工作正常，但是当与按钮对应的 div 打开（活动）时，按钮不会变红。这是为什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:26:28.960

利用

```
<input type="button" value="news"> 
```

和CSS

```
input:hover {
    background-color: green;
}
input:active {
    background-color: yellow;
} 
```

您还可以添加**:focus**将在选项卡上可用。

[提琴手](http://jsfiddle.net/menian/tP9E9/3/)

# flash - ClickTag 适用于顶层按钮，但不适用于下方图层上的按钮

> ID：14829613
> 
> 赞同：0
> 
> 时间：2013-02-12T09:47:37.007
> 
> 标签：flash, actionscript, actionscript-2, flash-cs5, clicktag

我有一个带有各种按钮的 Flash 舞台，每个按钮位于不同的图层上。最顶层仅包含动作。在最后一帧的这一层中，我列出了所有 clickTAG：

```
inst_prod1.onRelease = function () { 
    getURL (_root.clickTAG1, "_blank"); 
}

inst_prod2.onRelease = function () { 
    getURL (_root.clickTAG2, "_blank"); 
}

inst_prod3.onRelease = function () { 
    getURL (_root.clickTAG3, "_blank"); 
}

inst_btn.onRelease = function () { 
    getURL (_root.clickTAG4, "_blank"); 
} 
```

测试了 clickTAG，inst_btn 实例工作正常，点击时没有其他实例调用 clickTAG。inst_btn 位于顶部操作层正下方的层上。

我想我可能需要指定一个路径，因为它不在顶层，但我不明白如何实现这一点。我正在使用 Flash CS5 和 ActionScript 2。

我知道我可以在顶部创建一个带有隐形按钮的图层。我以前用过这种方法。但是我对实际按钮的悬停效果不起作用。

# node.js - Node.js Express：在客户端页面之间传递参数

> ID：14829615
> 
> 赞同：5
> 
> 时间：2013-02-12T09:47:38.437
> 
> 标签：node.js, express

我有一个 Node.js 服务器。假设每个客户都将他的名字保存在一个变量中。他们切换页面，我希望每个客户都将他们的名字保留在一个变量上。

使用 php 表单这将非常容易，但我看不到如何使用 Node.js 执行此操作如果我像在 php 中那样执行表单，我会设法将名称发送到服务器：

```
app.post('/game.html', function(req, res){
    var user = req.param('name');
    console.log(user);
    res.redirect('/game.html');
    }); 
```

但是，将它重新发送给它自己的每个客户似乎太复杂了。我刚开始使用 Node.js，我想这是一个概念错误。有没有简单的方法将变量从客户端的一个页面传递到另一个页面？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T12:38:57.630

您必须渲染模板（使用 ExpressJS 支持的任何引擎），而不是重定向到静态文件：

```
app.post('/game.html', function(req, res){
    var user = req.param('name');
    console.log(user);
    res.render( 'game.html', { user:user } );
}); 
```

（请注意，`.render`需要设置一些附加设置`app`）

现在`user`变量在`game.html`模板中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T19:37:12.040

您可以使用 res.render 并传递许多变量，例如：

```
res.render('yourPage', {username:username, age:age, phone:phone}); 
```

# c# - 如何在 foreach 循环中管理 Webclient.Completed 事件？

> ID：14829616
> 
> 赞同：0
> 
> 时间：2013-02-12T09:47:40.520
> 
> 标签：c#, wpf, webclient

我正在使用 WPF 抓取网站，并尝试将请求发送到我的列表中的 URL foreach 字符串。

现在看起来 CompletedEvent 没有被触发。它只是回到我列表中下一个字符串的循环。**到达 Completed 事件后，如何让它返回循环？**

```
private void getAdress(double latitude, double longitude)
{
   foreach (string classe in stringList)
   {
        WebClient searchClient= new WebClient();
        searchClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(searchClient_DownloadStringCompleted);
        searchClient.DownloadStringAsync(new Uri("http://www.theURL.com"));  
    }
} 
```

亲切的问候，尼尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:49:47.860

您正在*异步下载*下载。异步的全部意义在于您告诉请求开始，以及在它完成时您希望发生的事情......然后您继续前进。

如果您想等到第一个请求完成后再开始第二个请求，您应该使用同步调用 - 但不要在 UI 线程中这样做......

# axapta - 如何确定哪个字段已更新？

> ID：14829618
> 
> 赞同：4
> 
> 时间：2013-02-12T09:48:05.400
> 
> 标签：axapta, dynamics-ax-2009, x++

`update()`确定表格方法中哪个字段已更改的正确方法是什么？

我知道有可能`modifiedField()`通过，`fieldId`但现在还为时过早。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:09:37.573

您正在寻找的方法是 Orig()

查看 BOMTable 或 BankAccountTrans 的 update() 方法

该表有一个名为 orig 的方法，它公开当前记录的最后保存状态的值。

一个很好的例子和描述可以在这里找到 [http://msdax.blogspot.co.uk/2007/07/programming-of-basic-methods-of-tables.html](http://msdax.blogspot.co.uk/2007/07/programming-of-basic-methods-of-tables.html)

```
 void update () {
     CustTable this_Orig = this.orig ();
     ;

     if (this_Orig.custGroup! = this.custGroup)
     {
       //Cust group is changing on this update
     }
     ... 
```

# php - 如何在 PHP 代码中插入 alt="something-here" 属性？

> ID：14829620
> 
> 赞同：0
> 
> 时间：2013-02-12T09:48:06.493
> 
> 标签：php

我的屏幕右下角有一个半透明图标。很明显; 这是一个向上的箭头，表示如果页面或帖子太长，用户可以滚动到顶部。

但是当用户出于某些原因将鼠标悬停在图标上时，我希望它具有**alt="Scroll to top"属性。**我怎样才能做到这一点？链接所在的 PHP 代码如下所示：

```
 public function plugin_action_links( $action_links )
  {
     array_unshift( $action_links, "<a href=\"" . STT_OPTIONS_URL . "\">" . __( 
   'Settings', 'scrollto-top' ) . "</a>" );

     return $action_links;
  } 
```

如果需要更多信息，请告诉我。我已经尝试过，但它们总是会破坏代码。我确定我必须在此代码的 < a href 部分中添加一些内容，但我不确定我将使用的语法，或者我将在哪里使用它。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:51:23.257

您只需将其添加到锚标记中。

```
array_unshift( $action_links, "<a href=\"" . STT_OPTIONS_URL . "\" alt=\"Alt text Here\">" . __( 
   'Settings', 'scrollto-top' ) . "</a>" ); 
```

但是，如果您希望它跨浏览器工作，则需要提供`alt`and`title`属性。

当图像无法加载或用户正在使用屏幕阅读器时，替代文本是图像的替代文本。标题文本旨在作为工具提示。但是，并非所有浏览器都以这种方式看到它，因此包括两者都应该适用于所有浏览器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:27:11.150

谢谢杰森，很有趣，就像 php 中的问题一样，请像这样更新您的代码

```
 return array_unshift( $action_links, "<a href=\"" . STT_OPTIONS_URL . "\" alt=\"Alt text Here\" title=\"Scroll to top\">" . __('Settings', 'scrollto-top' ) . "</a>" ); 
```

# center - 在给定圆心和半径的情况下，在圆的圆周上找到点的公式

> ID：14829621
> 
> 赞同：9
> 
> 时间：2013-02-12T09:48:09.490
> 
> 标签：center, geometry

我正在编写代码以**查找圆周上的点**。我**有圆的中心点和半径**，我需要在它周围画一个圆。这将帮助我定义边界。请帮助我找到圆周上这些点的公式。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-12T10:04:40.150

对于原点**(j, k)**和半径***r***的圆：

x(t) = r cos(t) + j
y(t) = r sin(t) + k

您需要在其中运行此等式以使***t***取 0 到 360 范围内的值，然后您将在圆的边界上分别得到***x***和***y 。***

欲了解更多信息： http: [//www.math.com/tables/geometry/circles.htm](http://www.math.com/tables/geometry/circles.htm)

# mysql - mysql中表左连接与内连接的组合

> ID：14829623
> 
> 赞同：1
> 
> 时间：2013-02-12T09:48:12.603
> 
> 标签：mysql, join, left-join, inner-join, outer-join

可以说，我有 3 张桌子、汽车、汽车所有者和所有者。现在我想要完整的汽车清单，有车主的和没有车主的。

当一辆车有自己的时候，我必须有车主的数据。

```
Wrong query 1 (selects ownerless cars out): 
SELECT * FROM car 
LEFT JOIN cars_owner ON ...
INNER JOIN owner ON ...

Wrong query 2 (selects cars_owner relations without owners too): 
SELECT * FROM car 
LEFT JOIN cars_owner ON ...
LEFT JOIN owner ON ... 
```

问题是：如何在 mysql 中使用内连接左连接表？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:55:42.467

此查询返回拥有所有者的汽车：

```
选择 * 从汽车
左加入 cars_owner （car.CarID=cars_owner.CarID）
内部连接所有者 ON (owner.OwnID = cars_owner.OwnID)

```

然而，这会返回没有车主的汽车：

```
选择 * 从汽车
其中 (car.CarID!=(SELECT car.CarID FROM car
                   左加入 cars_owner （car.CarID=cars_owner.CarID）
                   内部连接所有者 ON (owner.OwnID = cars_owner.OwnID)) )

```

# c# - 标记 RichTextBox 的特定内容

> ID：14829628
> 
> 赞同：0
> 
> 时间：2013-02-12T09:48:24.810
> 
> 标签：c#, wpf, search, richtextbox, flowdocument

我想要一个`richTextBox`加载后的特定内容标记彩色（某些单词的“背景”发生变化）。当我单击一个按钮时，例如要标记的单词 car。现在我发现我必须为我的目的重建这段代码。

```
public bool DoSearch(RichTextBox richTextBox, string searchText, bool searchNext)
       {
            TextRange searchRange;

            // Get the range to search
            if (searchNext)
                searchRange = new TextRange(richTextBox.Selection.Start.GetPositionAtOffset(1),
                                            richTextBox.Document.ContentEnd);
            else
                searchRange = new TextRange(richTextBox.Document.ContentStart, 
                                            richTextBox.Document.ContentEnd);

            // Do the search
            TextRange foundRange = FindTextInRange(searchRange, searchText);
            if (foundRange == null)
                return false;

            // Select the found range
            richTextBox.Selection.Select(foundRange.Start, foundRange.End);
            return true;
        }

        public TextRange FindTextInRange(TextRange searchRange, string searchText)
        {
            // Search the text with IndexOf
            int offset = searchRange.Text.IndexOf(searchText);
            if (offset < 0)
                return null;  // Not found

            // Try to select the text as a contiguous range
            for (TextPointer start = searchRange.Start.GetPositionAtOffset(offset); 
                             start != searchRange.End; 
                             start = start.GetPositionAtOffset(1))
            {
                TextRange result = new TextRange(start, start.GetPositionAtOffset(searchText.Length));
                if (result.Text == searchText)
                    return result;

            }
            return null;
        } 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:49:29.317

请尝试此链接，其中包含一个功能 HighlightPhrase，它可以更改富文本框中特定单词的颜色。遵循此功能尝试调查如何更改背景。

[如何使用 C# 更改富文本框中特定单词的颜色](http://r4r.co.in/c1/01/tutorial/csharp/How%20to%20Change%20The%20Color%20of%20Specific%20Word%20in%20Rich%20textbox%20using%20C-Sharp.shtml)

# ruby - rspec newb 不明白如何满足“之前”方法

> ID：14829630
> 
> 赞同：2
> 
> 时间：2013-02-12T09:48:32.883
> 
> 标签：ruby, rspec

新手在这里...刚刚开始使用 rspec 并有以下问题：

```
describe Song do

  before do
     @song = Song.new
  end

  describe 'title' do
    it 'should capitalize the first letter' do
      @song.title = "lucky"
      @song.title.should == "Lucky"
    end
end 
```

我不确定如何满足“before do ....end”我看到它被写在许多教程和 rspec 示例中，但我仍然不知道如何满足 ruby​​ 代码以便它通过。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:06:09.420

RSpec 一开始可能会让人感到困惑，因为总是有许多有效的方法可以实现相同的目标。这就是为什么我建议您获取[The Rspec Book](http://pragprog.com/book/achbd/the-rspec-book)而不是（或之前）通过*“许多教程和示例”*。

对于这个单一的测试，我可以很容易地想出八种不同的方法（参见下面的代码示例），你可以更多地混合和匹配它们的一部分，从而产生更多不同的方法来解决相同的问题。

这就是为什么我认为在您能够通过示例和教程工作之前对 RSpec 原则有基本的了解是必要的——每个示例看起来都会略有不同，但是如果您掌握了基础知识，您将很容易能够看到每个示例的内容做。

```
require "rspec"

class Song
  def title=(title)
    @title = title
  end

  def title
    @title.capitalize
  end
end

describe Song do
  before { @song = Song.new }

  describe "#title" do
    it "should capitalize the first letter" do
      @song.title = "lucky"
      @song.title.should == "Lucky"
    end
  end
end

describe Song do
  describe "#title" do
    it "should capitalize the first letter" do
      song = Song.new
      song.title = "lucky"
      song.title.should == "Lucky"
    end
  end
end

describe Song do
  let(:song) { Song.new }

  describe "#title" do
    before { song.title = "lucky" }

    it "should capitalize the first letter" do
      song.title.should == "Lucky"
    end
  end
end

describe Song do
  let(:song)  { Song.new }
  subject     { song }

  before { song.title = "lucky" }

  its(:title) { should == "Lucky" }
end

describe Song do
  let(:song) { Song.new }

  describe "#title" do
    before { song.title = "lucky" }

    context "capitalization of the first letter" do
      subject { song.title }
      it { should == "Lucky" }
    end
  end
end

describe Song do
  context "#title" do
    before { subject.title = "lucky" }
    its(:title) { should == "Lucky" }
  end
end

RSpec::Matchers.define :be_capitalized do
  match do |actual|
    actual.capitalize == actual
  end
end

describe Song do
  context "#title" do
    before { subject.title = "lucky" }
    its(:title) { should be_capitalized }
  end
end

describe Song do
  let(:song) { Song.new }

  context "#title" do
    subject { song.title }
    before { song.title = "lucky" }
    it { should be_capitalized }
  end
end 
```

# java - 是否可以将完整的 html 页面源代码存储在 solr 中？

> ID：14829631
> 
> 赞同：1
> 
> 时间：2013-02-12T09:48:35.957
> 
> 标签：java, solr, nutch

在我之前的问题中，我得到的答案是我可以在不使用任何数据库的情况下将小型索引（少数站点）数据存储在 solr 中（[是否可以在 solr 中存储数据？](https://stackoverflow.com/questions/14811669/is-it-posible-store-data-in-solr)）。我想知道，是否可以在不使用任何数据库的情况下将完整的 html 页面源代码存储在 solr 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:47:13.210

如果您想抓取网站并将其编入索引，Nutch with Solr 是一种解决方案。
[Nutch 与 Solr 教程](http://wiki.apache.org/nutch/NutchTutorial)将帮助您入门。
但是，Nutch 不会使用 html 标签维护原始 Solr 代码。

您需要通过下载 html 页面来开发自定义解决方案，然后可以使用[Solr 提取请求处理](http://wiki.apache.org/solr/ExtractingRequestHandler)程序向 Solr 提供 HTML 文件并从 html 文件中提取内容。例如在[链接](http://wiki.apache.org/solr/ExtractingRequestHandler#Getting_Started_with_the_Solr_Example)

Solr 使用[Apache Tika](http://tika.apache.org/)从[上传的 html 文件中提取内容](http://tika.apache.org/1.2/formats.html#HyperText_Markup_Language)

如果您将数据作为 html 文本提供，您还可以检查[HTMLStripCharFilterFactory 。](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.HTMLStripCharFilterFactory)

# html - jQuery mobile中方向变化的叠加位置

> ID：14829634
> 
> 赞同：0
> 
> 时间：2013-02-12T09:48:51.043
> 
> 标签：html, css, jquery-mobile

我正在开发 jQuery 移动版。我有一个覆盖，点击标题中的一个按钮就会弹出。覆盖显示在按钮附近。

```
<div data-role="header" data-position="fixed" data-theme="a" data-tap-toggle="false">
<h1>Photos</h1>
    <a href="#photomenu" data-icon="gear" data-iconpos="notext"
   data-rel="popup" data-transition="slidedown"></a>
 </div> 
```

但是在方向改变时，覆盖出现在中心。如何在方向更改时保留叠加层的位置？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:56:45.417

默认情况下，弹出窗口在您单击的内容（原点）上垂直和水平居中打开，这对于用作工具提示或菜单的弹出窗口很有用。该框架还应用了一些基本的碰撞检测规则，以确保弹出窗口出现在屏幕上，因此最终位置可能并不总是以原点为中心。

对于像对话框或灯箱这样的情况，弹出窗口应该出现在窗口的中心而不是在原点上，将 data-position-to 属性添加到链接并指定 window 的值。

除了 origin 和 window 之外，还可以指定任何有效的选择器作为 position-to 的值。例如，如果您添加 data-position-to="#myElement"，则弹出窗口将定位在 id 为 myElement 的元素上。

```
<a href="#positionWindow" data-rel="popup" data-position-to="window">Position to window</a>

<div data-role="popup" id="positionWindow">
    <p>I am positioned to the window.</p>
</div> 
```

我还为您制作了一个现场 jsfiddle 示例：http: [//jsfiddle.net/Gajotres/8xCYB/](http://jsfiddle.net/Gajotres/8xCYB/)

# python - 如何在 Python 中继续嵌套循环

> ID：14829640
> 
> 赞同：68
> 
> 时间：2013-02-12T09:49:01.510
> 
> 标签：python

你怎么能`continue`在 Python 中说两个嵌套循环的父循环？

```
for a in b:
    for c in d:
        for e in f:
            if somecondition:
                <continue the for a in b loop?> 
```

我知道在大多数情况下您可以避免这种情况，但可以在 Python 中完成吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-12T09:53:48.960

1.  从内部循环中断（如果之后没有其他内容）
2.  将外循环的主体放入函数中并从函数中返回
3.  引发异常并在外层捕获它
4.  设置一个标志，从内部循环中中断并在外部级别对其进行测试。
5.  重构代码，这样您就不必再这样做了。

我每次都会带5个。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-12T10:05:54.980

这里有一堆hacky方法来做到这一点：

1.  创建局部函数

    ```
    for a in b:
        def doWork():
            for c in d:
                for e in f:
                    if somecondition:
                        return # <continue the for a in b loop?>
        doWork() 
    ```

    更好的选择是将 doWork 移到其他地方并将其状态作为参数传递。

2.  使用例外

    ```
    class StopLookingForThings(Exception): pass

    for a in b:
        try:
            for c in d:
                for e in f:
                    if somecondition:
                        raise StopLookingForThings()
        except StopLookingForThings:
            pass 
    ```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-12T10:07:51.527

```
from itertools import product
for a in b:
    for c, e in product(d, f):
        if somecondition:
            break 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-12T09:53:40.520

您使用`break`打破内部循环并继续父级

```
for a in b:
    for c in d:
        if somecondition:
            break # go back to parent loop 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-11T15:26:26.330

使用布尔标志

```
problem = False
for a in b:
  for c in d:
    if problem:
      continue
    for e in f:
        if somecondition:
            problem = True 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-17T03:21:15.073

在这里查看所有答案，这与我的做法完全不同\n 任务：如果嵌套循环中的 if 条件为真，则继续执行 while 循环

```
chars = 'loop|ing'
x,i=10,0
while x>i:
    jump = False
    for a in chars:
      if(a = '|'): jump = True
    if(jump==True): continue 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-07T19:06:14.620

```
lista = ["hello1", "hello2" , "world"]

for index,word in enumerate(lista):
    found = False
    for i in range(1,3):
        if word == "hello"+str(i):
            found = True
            break
        print(index)
    if found == True:
        continue
    if word == "world":
        continue
    print(index) 
```

现在打印了什么：

```
>> 1
>> 2
>> 2 
```

这意味着单词 no.1 ( index = 0 ) 首先出现（在 continue 语句之前无法打印某些内容）。单词 no.2 ( index = 1 ) 出现在第二位 (单词 "hello1" 被打印出来但不是其余的) 而单词 no.3 出现在第三位是什么意思是单词 "hello1" 和 "hello2" 设法打印在 for 循环到达第三个单词之前打印。

总而言之，它只是使用 found = False / True 布尔值和 break 语句。

希望能帮助到你！

# git - .gitignore 不遵循某些规则（GitHub）

> ID：14829643
> 
> 赞同：0
> 
> 时间：2013-02-12T09:49:12.893
> 
> 标签：git, github, gitignore

是的，这看起来像是重复的，因为我可以看到这已经被问过几次了。但是我看到的其他答案都没有帮助我。

我有一个 Umbraco 安装，我想存储在 Git（确切地说是 GitHub）中，我显然想省略 Umbraco 创建的日志文件和临时文件。

我的 .gitignore 文件中有以下内容：

```
App_Data/TEMP/
App_Data/Logs/
App_Data/ClientDependency/
App_Data/Preview/ 
```

但是，它不起作用。这些目录中的文件仍然会被添加。

我试过在最后加上一个星号（文档说它不应该是必需的 - 如果它存在，它只处理该目录中的文件。）

我确保每行末尾没有空格。

我已经仔细检查了目录名称的大小写。

我已经将斜线从一种方式换到另一种方式。

如果我从存储库的根目录输入完整路径，它确实可以工作，但这太具体了。（尽管我暂时将其用作解决方法）。如果我们创建新的基于 Umbraco 的项目，我希望能够轻松地重用 .gitignore 文件。

其他未放入完整路径的规则（例如 NuGet 的包文件夹）正在正确处理。

```
packages/ 
```

这条规则有效——我真的看不出有什么区别。

谁能看到我在这里做错了什么？

**更新**

有效的完整路径是这样的：

```
/src/Company.Client.Web/App_Data/Logs/
/src/Company.Client.Web/App_Data/TEMP/
/src/Company.Client.Web/App_Data/ClientDependency/
/src/Company.Client.Web/App_Data/Preview/ 
```

（我已经混淆了一点，但这就是现在的情况）

以下是 GitHub for Windows 显示的内容： ![这是 GitHub for Windows 显示的内容](../Images/1e6be8fd272cd97b21d8272a5dbea538.png)

**更新 2**

.git 文件夹位于存储库的根目录，因此`/`. 换句话说`D:\github\RepositoryName\.git\`，为了比较`src`文件夹是`D:\github\RepositoryName\src\`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-06T09:19:16.577

自[git 1.8.2 (March, 8th 2013)](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.txt#L85-L88)以来，您现在可以使用`**`：

> `.gitignore`和`.gitattributes`文件中的模式**可以`**/`作为匹配 0 级或更多级别的子目录的模式**。
> 
> 例如，“ `foo/**/bar`”匹配“ `bar`”`foo`本身或“”的子目录中的“ `foo`”。

所以你要：

```
**/App_Data/TEMP/
**/App_Data/Logs/
**/App_Data/ClientDependency/
**/App_Data/Preview/ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T11:22:24.560

当您在 .gitignore 中指定文件名或文件夹时，它会被忽略，无论它出现在目录结构中的什么位置。这就是为什么`packages/`有效。

对于像`App_Data/TEMP/`.

您可以执行以下操作：

```
*/*/App_Data/TEMP/ 
```

`App_Data/TEMP`无论两个父目录如何命名，这都会忽略。但它只适用于层次结构的这个确切深度的那些文件夹，即它会忽略这些：

*   src/Company.Client.Web/App_Data/TEMP
*   src/Company.Client2.Web/App_Data/TEMP

但它不会忽略这些：

*   src/App_Data/TEMP
*   src/Company.Client.Web/Prototype/App_Data/TEMP

这是设计使然，[如文档中所述](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)：

> [当模式包含斜杠但不以 1 结尾时]，git 将模式视为适合 fnmatch(3) 使用的 shell glob，带有 FNM_PATHNAME 标志：模式中的通配符将不匹配路径名中的 /。例如，“Documentation/*.html”匹配“Documentation/git.html”，但不匹配“Documentation/ppc/ppc.html”或“tools/perf/Documentation/perf.html”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:04:33.177

这似乎是一个简单的错误。我猜您在将日志文件放入存储库后已经设置了 .gitignore 文件。

但实际上，.gitignore 文件用于避免一些未跟踪的文件，但是一旦一个文件被添加到任何提交中一次，它就通过了 .gitignore 检查。

如果您想应用此 .gitignore 检查，请尝试**git rm yourfiles**，**git commit -m "Your commit name"**然后它们将永远不会被跟踪。在尝试之前，请确保您拥有它们的副本。

# c# - 以 DLL 形式对外提供有限的 API

> ID：14829644
> 
> 赞同：1
> 
> 时间：2013-02-12T09:49:19.833
> 
> 标签：c#, dll

如果您必须将功能作为 DLL 从外部公开，但只是功能的子集（这意味着您不能提供核心 DLL，因为它会公开所有内容）如何最好地做到这一点？

目前，我真的看不到任何不涉及在单独的 DLL 中重新创建核心库部分的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:51:48.790

您可以`internal`与 Friend Assemblies 一起使用。您的 API 可以成为允许访问内部成员的核心库的朋友。

有关更多详细信息，请参见此处 - [http://msdn.microsoft.com/en-us/library/0tke9fxk(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/0tke9fxk(v=vs.90).aspx)

这将允许您保持核心对象内部化，同时允许 API 访问它们。

请注意，您仍然需要提供核心库。除非您使用某些东西来合并 .NET 程序集或将代码编译到您的 API 库中，否则没有办法解决这个问题。

但是我认为这是一个坏主意，您应该将这些实体分开。我不明白为什么这些天运送多个图书馆会出现问题。

仅供参考 - ILMerge 将让您合并 .NET 程序集，您可以从这里获取它 - [http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:51:22.893

当然，只需创建一个包装核心 DLL 的新项目，只公开您想要公开的方法，每个方法或多或少地充当核心中“相同”方法的“传递”吗？

因此，如果您的核心被称为`Core`:)，它可能具有：

```
public int Foo()
{
    //blah
}

public int Bar()
{
    /blah
} 
```

如果您只想公开`Foo`，则创建一个引用的新项目，`Core`如下所示：

```
using Core;

public class MyApi
{
    private Core _coreInstance.... //some way of reaching Core, in other words

    public int Foo()
    {
        return _coreInstance.Foo();
    }
} 
```

在这里创建一个单独的程序集的一个优点是，您将核心功能视为一个概念，并将其公开（*针对特定目的或受众*）作为另一个概念。您可能很想在稍后阶段公开“公开”不同的功能，*但要向不同的受众*公开 - 您现在需要 2 个不同的公开 API：因此，任何关于核心程序集中“公开”内容的概念现在都可能是模棱两可的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:03:23.283

我认为这取决于您隐藏核心库所遵循的目标。

如果您不想让您的客户调用代码，例如，如果这可能会破坏您的库的使用场景，或者可能导致不良行为，或者阻止调用代码的任何事情，您可以将受保护的类设为内部，并且使用 InternalsVisibleToAttribute 来包含 Facade 程序集。如果我仍然需要核心类在我的应用程序中可见，我什至会使用更多的构建配置：

```
#if PUBLIC_BUILD
    internal 
#else
    public
#endif
    class ProtectedCoreClass 
```

但是当然如果你有太多的类，应该准备一些脚本来更改现有的类，并且应该修改 Visual Studio 的新类模板。

但是另一种情况是，如果您想防止源代码被客户监视，以隐藏一些超级独特的算法或其他东西。然后你应该研究一些代码混淆器。但是绝对没有办法 100% 保证代码不被反编译和分析。这只是关于破解者或竞争对手为此付出的代价。

但是，如果隐藏源代码仍然非常重要，您可能应该将代码托管在您的服务器上（以确保代码在物理上不可访问）或云中，并提供一个 WCF 或您的公开程序集将调用的 Web 服务。

# django - 在 django 模型中保存数据实际上并没有保存

> ID：14829648
> 
> 赞同：0
> 
> 时间：2013-02-12T09:49:28.793
> 
> 标签：django, orm, save

我该如何理解这一点？这怎么会发生？进入 django shell：

```
>>> from customauth.models import Profile
>>> p = Profile.objects.get(user_id=1)
>>> p.status
u'34566'
>>> p.status = 'qwerty'
>>> p.status
'qwerty'
>>> p.save()
>>> p.status
'qwerty'
>>> p = Profile.objects.get(user_id=1)
>>> p.status
u'qwerty'
>>> 
```

退出并再次进入 django shell：

```
>>> from customauth.models import Profile
>>> p = Profile.objects.get(user_id=1)
>>> p.status
u'qwerty'
>>> 
```

一切似乎都很好。但是现在进入 dbshel​​l：

```
mysql> select user_id, status from customauth_profile where user_id=1;
+---------+--------+
| user_id | status |
+---------+--------+
|       1 | 34566  | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-16T14:18:27.637

我遇到了同样的问题，我正在使用 Django 和 Mongo ......之后数据没有持久化`object.save()`......他们，我用它来解决：

```
object.save_base(force_update=True) 
```

现在为我工作，希望能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:45:31.577

如果关闭shell后数据仍然存在，那么数据没有保存到数据库中的可能性很小。你能检查你的 settings.py 并确保你保存到正确的 mysql 数据库吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T17:11:52.967

shell 会话是单个数据库事务。由于事务隔离，外部连接不会看到更改。您需要提交事务 - 最简单的方法是退出 shell 并重新启动。

在正常请求中，Django 在请求结束时自动提交，所以这种行为不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:42:38.517

问题出在缓存模块中。奇怪，但是没有插入缓存中间件，并且缓存没有用于保存方法。使用过`django.core.cache.backends.locmem.LocMemCache`的模块，可能是它坏了或有一些奇怪的功能，我不知道。将尝试 memcached 模块，它应该（我希望）在不关闭站点缓存的情况下解决问题。

# google-chrome - 来自 chrome 扩展的注入脚本中的跨域请求

> ID：14829650
> 
> 赞同：1
> 
> 时间：2013-02-12T09:49:30.537
> 
> 标签：google-chrome, google-chrome-extension

我正在编写一个 chrome 扩展，它在打开的选项卡中注入一个 iframe 并在其中加载一个 url。要加载的 url 与选项卡中打开的页面不在同一个域中。我正在使用以下代码：

```
--menifest.json--

"background" : {
    "scripts": ["background.js"]
  },
  "permissions": [
    "tabs", "http://*/", "https://*/"
  ]

--background.js--

chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(null,
                           {file:"logic.js"});
});

--logic.js--

var newdiv = document.createElement('div');
var iframe = document.createElement('iframe');
iframe.setAttribute('src','http://google.co.in');
newdiv.appendChild(iframe);
document.body.appendChild(newdiv); 
```

这仅在当前页面为[http://google.co.in](http://google.co.in)而不在其他页面上时有效。所以我遇到了跨域问题。但据我所知，扩展可以发出跨域请求，那么该怎么做吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:05:09.360

Google 使用[X-Frame-Options](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)标头，许多网站都将它们用作最佳实践

X-Frame-Options 有三个可能的值：

*   **DENY** 该页面不能在框架中显示，无论站点是否尝试这样做。
*   **SAMEORIGIN** 页面只能显示在与页面本身同源的框架中。
*   **ALLOW-FROM uri** 页面只能显示在指定原点的框架中。

Google 使用 SAMEORIGIN 值，因此仅当当前页面为 [http://google.co.in](http://google.co.in)时才有效。

因此，您没有遇到跨域问题，是的扩展可以发出跨域请求。

# javascript - 如何在下面的编码中将鼠标悬停事件更改为鼠标单击事件

> ID：14829651
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:49:40.777
> 
> 标签：javascript, html, css, javascript-events

这是菜单的 JavaScript 代码，该脚本采用鼠标悬停事件的形式。但我需要将其更改为鼠标单击事件。请帮我改变这个。

```
 var dolphintabs={subcontainers:[], last_accessed_tab:null,

    revealsubmenu:function(curtabref){
    this.hideallsubs()
    if (this.last_accessed_tab!=null)
        this.last_accessed_tab.className=""
    if (curtabref.getAttribute("rel")) //If there's a sub menu defined for this tab     item, show it
    document.getElementById(curtabref.getAttribute("rel")).style.display="block"
    curtabref.className="current"
    this.last_accessed_tab=curtabref
    },

      hideallsubs:function(){
          for (var i=0; i<this.subcontainers.length; i++)
            document.getElementById(this.subcontainers[i]).style.display="none"
},

     init:function(menuId, selectedIndex){
    var tabItems=document.getElementById(menuId).getElementsByTagName("a")
        for (var i=0; i<tabItems.length; i++){
            if (tabItems[i].getAttribute("rel"))
                       this.subcontainers[this.subcontainers.length]=tabItems[i].getAttribute("rel") //store id of submenu div of tab menu item
        if (i==selectedIndex){ //if this tab item should be selected by default
            tabItems[i].className="current"
            this.revealsubmenu(tabItems[i])
        }
    tabItems[i].onmouseover=function(){
    dolphintabs.revealsubmenu(this)
    }
    } //END FOR LOOP
}

 } 
```

样品请见以下链接。 [单击此处查看它的示例](http://www.javascriptkit.com/script/script2/tabset/index.shtml) [http://www.javascriptkit.com/script/script2/tabset/index.shtml](http://www.javascriptkit.com/script/script2/tabset/index.shtml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:52:51.123

改变这个

```
tabItems[i].onmouseover=function(){
    dolphintabs.revealsubmenu(this)
} 
```

到

```
tabItems[i].onclick=function(){
    dolphintabs.revealsubmenu(this)
} 
```

# ruby-on-rails - 如果有两个不同的模型用户和活动管理员，如何为设计定义自定义失败？

> ID：14829654
> 
> 赞同：6
> 
> 时间：2013-02-12T09:49:48.810
> 
> 标签：ruby-on-rails, devise, customization, activeadmin

我有两个模型 User 和 ActiveAdmin 我想在其上应用我的`devise`集成。

我有我`custom_failure.rb`的如下

```
class CustomFailure < Devise::FailureApp

  def redirect_url
    login_path
  end

  # def redirect_url
  #   root_path
  # end

  def respond
    if http_auth?
      http_auth
    else
      redirect
    end
  end
end 
```

这似乎工作得很好。

另外，可以在我的`application controller`喜欢中定义：

```
def after_sign_in_path_for(resource)
  # case resource
    if resource.is_a?(Admin)
      admin_dashboard_path
    else
      root_path
    end
end 
```

和

```
def after_sign_out_path_for(resource_or_scope)
  login_path
end 
```

但问题是如何使用它`resource`，`custom_failure.rb`以便我可以相应地重定向到登录`user login`或登录`admin login`？？根据当前情况，它总是重定向到用户登录页面？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T10:04:34.623

尝试放入`custom_failure.rb`您的 lib 文件夹。然后确保文件已加载。您可能会尝试自动加载 lib 中的所有文件。

然后[重定向到特定页面](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)。

更新：

你必须使用**范围**来解决这个问题：-

```
class CustomFailure < Devise::FailureApp 
  def redirect_url 
    if warden_options[:scope] == :user 
      signin_path 
    else 
      new_admin_user_session_path 
    end 
  end 
  def respond 
    if http_auth? 
      http_auth 
    else 
      redirect 
    end 
  end 
end 
```

# windows - 批处理脚本读取连续写入的文件

> ID：14829657
> 
> 赞同：1
> 
> 时间：2013-02-12T09:49:58.587
> 
> 标签：windows, batch-file

我有一个文件不断写入这样的信息

> HU/gen/tcfg/target/jacinto/starter/starter_b1.cfg
> 
> 32.77 34% 141.59kB/s 0:00:00
> 
> 94.64 100% 405.35kB/s 0:00:00 (xfer#60, to-check=1002/1097)

它是 rsync 工具的输出，将文件夹复制到另一个路径

我正在尝试编写一个批处理脚本来读取此文件并计算正在复制的数据总量，重点关注这一行

> 94.64 100% 405.35kB/s 0:00:00 (xfer#60, to-check=1002/1097)

数字 94.64 是以字节为单位的文件大小，所以我猜我应该从行中提取“100%”之前的任何内容并添加它

但我不知道如何在同时写入文件时连续读取文件

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:28:43.120

这是一个示例，展示了如何在另一个进程写入文件时读取文件。这与 jeb 显示的非常相似，只是我添加了一个通用测试来查看该过程是否完成。它假设进程在整个执行过程中保持对文件的锁定，并且还假设 20 个连续的空行表示文件结束，或者我们正在等待进程的更多输出。20 个空行阈值可以设置为适合您的任何数字。

如果进程将部分行写入文件，此解决方案可能无法正常工作。我相信，如果该过程始终在单个操作中完整地写入每一行，那么它是可靠的。此外，行的长度必须小于或等于 1021 字节，并且必须以回车、换行符结束。

```
@echo off
setlocal enableDelayedExpansion
set "file=test.txt"

set emptyCount=0
del "%file%

:: For this test, I will start an asynchronous process in a new window that
:: writes a directory listing to an output file 3 times, with a 5 second pause
:: between each listing.
start "" cmd /c "(for /l %%N in (1 1 3) do @dir & ping localhost -n 6 >nul) >"%file%""

:wait for the output file to be created and locked
if not exist "%file%" goto :wait

:: Now read and process the file, as it is being written.
call :read <"%file%"
exit /b

:read
set "ln="
set /p "ln="
if defined ln (

  REM Process non-empty line here - test if correct line, extract size, and add
  REM I will simply echo the line instead
  echo(!ln!

  REM Reset emptyCount for end of file test and read next line
  set /a emptyCount=0
  goto :read

) else ( REM End of file test

  REM Count how many consecutive empty lines have been read.
  set /a emptyCount+=1

  REM Assume that 20 consecutive empty lines signifies either end of file
  REM or else waiting for output. If haven't reached 20 consectutive
  REM empty lines, then read next line.
  if !emptyCount! lss 20 goto :read

  REM Test if output file is still locked by attempting to redirect an unused
  REM stream to the file in append mode. If the redirect fails, then the file
  REM is still locked, meaning we are waiting for the process to finish and have
  REM not reached the end. So wait 1 sec so as not to consume 100% of CPU, then
  REM reset count and try to read the next line again.
  REM If the file is not locked, then we are finished, so simply fall through
  REM and exit.
  (echo off 9>>"%file%")2>nul || (
     set emptyCount=0
     ping localhost -n 2 >nul
     goto :read
  )
)
exit /b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:49:04.970

就像 dbenham 说的那样，可以做到，但批处理不是首选。
注意，样本将无限循环运行。
您需要根据文件内容添加中断条件。

我添加了`ping ...`命令以避免该进程消耗 100% CPU 时间

```
@echo off
setlocal disabledelayedexpansion
setlocal enableDelayedExpansion
< rsyncOutput.tmp (
  call :readData
)
echo ready
exit /b

:readDataX
set "line="
set /p line=
if defined line (
  for /f "tokens=1,2 delims= " %%a in ("!line!") do (
    if "%%b"=="100%%" echo Bytes %%a
  )
)
ping localhost -n 2 > nul
goto :readDataX
exit /b 
```

# android - 使用子活动给出的结果将项目动态添加到列表视图

> ID：14829658
> 
> 赞同：0
> 
> 时间：2013-02-12T09:49:59.780
> 
> 标签：android, listview, dynamic, android-intent

我在开发程序时被卡住了。我无法找到解决方案

我正在做的是，从一项活动（A）中，我正在调用其他活动（B）以获得结果。

现在在活动 A 我有一个列表视图。对于该列表视图，我有一个 ArrayAdapter 用于此目的的代码是：

```
String []name_list = myarraylist.toArray(new String[myarraylist.size()]);

ArrayAdapter<String> adapter = new ArrayAdapter <String>(this, R.layout.textview,name_list);

setListAdapter(adapter); 
```

活动 A 是 ListActivity。

现在，我有一个菜单选项，单击它会将我带到另一个活动，并返回一个结果字符串。到目前为止，一切正常。该字符串也由活动B返回。现在我想将字符串（返回的）添加到列表视图.....我应该怎么做？我尝试在 onActivityResult() 本身和 onResume() 中执行此操作，但我无法使其正常工作。

帮助！

编辑：
onActivityResult 的代码是：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){

    super.onActivityResult(requestCode, resultCode, data);
    Bundle mybundle = data.getExtras();

    String pro_name= mybundle.getString("profile_name");

    myarraylist.add(pro_name);

getAdapter().notifyDataSetChanged();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:55:00.980

在 onactivityResult 中使用 Arrayadapter 添加方法[http://developer.android.com/reference/android/widget/ArrayAdapter.html#add(T)](http://developer.android.com/reference/android/widget/ArrayAdapter.html#add(T))并调用 notifyDatasetchanged [http://developer.android.com/reference/android/widget/ArrayAdapter .html#notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged())

# excel - 从 SAP 到 MySql 的数据迁移

> ID：14829660
> 
> 赞同：0
> 
> 时间：2013-02-12T09:50:03.610
> 
> 标签：excel, mysql-workbench, abap

我只想在 MySql Workbench 中创建 SAP ABAP 中的全部数据以及作为新数据库的表结构。我发现 phpmyadmin 不适合我。还尝试从 SAP 下载数据作为 excel，然后使用该 excel 表通过使用本地无限加载数据使用现有表创建数据，但我发现块数据也被附加到表中。是否有任何其他可能性来实现预期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:30:29.053

这是一个可能的解决方案，它将 ABAP 字典中表的内容转储到可以导入 MySQL 的 SQL 文件中：http: [//www.stschnell.de/sapdataexport.htm](http://www.stschnell.de/sapdataexport.htm)

（编辑：对不起，如果您阅读上面链接的页面，您当然会看到它专门引用了 SQLite，但提到导出可以用作对其他数据库的导入）。

您还应该知道，ABAP 字典不一定包含对数据库中*所有*表的引用，例如一些系统表等，但我猜测您的目的并不重要。

更好的是，如果您有 DBA 访问数据库，那么您可以从那里转储所有内容，而不是通过 ABAP。

# android - 通过 Facebook 问题登录 Parse

> ID：14829661
> 
> 赞同：2
> 
> 时间：2013-02-12T09:50:04.410
> 
> 标签：android, parse-platform

Parse 总是记住我用于 Parse 登录的第一个 Facebook 帐户，即使我将 Facebook 应用程序中的 Facebook 帐户切换到另一个它总是返回第一个 Facebook 帐户

这就是我登录/退出的方式

```
ParseFacebookUtils.logIn(this, new FacebookLogInCallback()); 
```

.

```
private class FacebookLogInCallback extends LogInCallback {

    @Override
    public void done(final ParseUser user, final ParseException exception) {
       //user always first account
    }
} 
```

.

```
ParseUser.logOut(); 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T07:47:29.353

我自己找到了解决方案

```
call ParseFacebookUtils.getSession().closeAndClearTokenInformation(); 
```

前

```
ParseUser.logOut(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T20:41:06.350

我认为在 ParseFacebookUtils.unlink() 之前也应该这样做。否则，您将在下一个链接上自动绑定到旧帐户。（链接与登录非常相似，唯一的区别是从 FB 请求的权限）。

# android - 制作流畅的动画

> ID：14829666
> 
> 赞同：0
> 
> 时间：2013-02-12T09:50:43.663
> 
> 标签：android, image, animation

我有 16 个图像代表某人扔球。我想用这些图像制作流畅的动画。每秒 20 幅图像时，眼睛会认为这是一个运动，而不是一系列图像。所以我想每 50 毫秒显示 1 张图像

```
public void fire() {
final ImageView image3 = (ImageView) gameactivity.findViewById(R.id.imageView3);
final int drawables[] = new int[] {R.drawable.fire1,R.drawable.fire2,R.drawable.fire3,R.drawable.fire4,R.drawable.fire5,R.drawable.fire6,R.drawable.fire7,R.drawable.fire8,R.drawable.fire9,R.drawable.fire10,R.drawable.fire11,R.drawable.fire12,R.drawable.fire13,R.drawable.fire14,R.drawable.fire15,R.drawable.fire16};
for (int i=0;i<drawables.length;i++) {
    final int j=i;
    Runnable runnable = new Runnable() {
        @Override
        public void run() {
            image3.setImageResource(drawables[j]);
            Log.w("GAMEACTIVITY","image"+j);
        }
    };
    gameactivity.handler.postDelayed(runnable, 50*j);
  }
} 
```

但是动画不流畅我看到第一张图像，然后什么都没有，然后是最后一张，可能是因为 50ms 太短，无法区分 Runnables 的动作？

**编辑** 使用动画可绘制

```
ImageView image2 = (ImageView) findViewById(R.id.imageView3);
        image2.setBackgroundResource(R.drawable.fire);
        AnimationDrawable fireAnimation = (AnimationDrawable) image2.getBackground();
        image2.setOnTouchListener(new OnTouchListener(){

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {
                fireAnimation.start();
                return false;
            } 
```

我还有另一个内存错误。这不是第一次发生，我真的不知道如何处理它（阅读了很多关于内存泄漏的信息，但我不认为是那样）

```
02-12 10:20:30.279: E/dalvikvm-heap(1349): 1535664-byte external allocation too large for this process.
02-12 10:20:30.319: E/GraphicsJNI(1349): VM won't let us allocate 1535664 bytes
02-12 10:20:30.319: W/dalvikvm(1349): threadid=1: thread exiting with uncaught exception (group=0x40018560)
02-12 10:20:30.329: E/AndroidRuntime(1349): FATAL EXCEPTION: main
02-12 10:20:30.329: E/AndroidRuntime(1349): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.content.res.Resources.getDrawable(Resources.java:581)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:267)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.content.res.Resources.loadDrawable(Resources.java:1694)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.content.res.Resources.getDrawable(Resources.java:581)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.view.View.setBackgroundResource(View.java:7533)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at com.example.kersplatt.GameActivity.onCreate(GameActivity.java:69)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.os.Looper.loop(Looper.java:130)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at java.lang.reflect.Method.invoke(Method.java:507)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
02-12 10:20:30.329: E/AndroidRuntime(1349):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:53:38.507

如果你有一堆图片，你应该看看[Android Drawable Animation](http://developer.android.com/guide/topics/graphics/drawable-animation.html)而不是使用 runnables。

它允许您定义一组可绘制对象以及每个应显示的持续时间。

它由平台原生支持，实现起来更加简单和轻松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:55:36.187

使用[FrameAnimation](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)，例如`res/drawable/movie.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="true">
    <item android:drawable="@drawable/frame1" android:duration="50" />
    <item android:drawable="@drawable/frame2" android:duration="50" />
    <item android:drawable="@drawable/frame3" android:duration="50" />
    etc...
</animation-list> 
```

**然后在Java中：**

```
imageView.setBackgroundResource(R.drawable.movie);
AnimationDrawable anim = (AnimationDrawable) imageView.getBackground();
anim.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:53:10.303

您需要预加载图像，否则`setImageResource()`将在每次调用时加载（从存储中读取）图像，这应该花费超过 50 毫秒（我猜您的图像不仅仅是 20x20）

# ios - 将图像显示为弹出框

> ID：14829670
> 
> 赞同：0
> 
> 时间：2013-02-12T09:51:00.710
> 
> 标签：ios, objective-c, xcode, ipad, core-animation

我想在`UIPopoverArrowDirectionLeft`. 如何在单击按钮时将图像显示为弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:00:22.417

我假设您的意思是会打开一个弹出屏幕，其中包含一个图像。这是如何做到的，只需以编程方式将图像添加到弹出视图，或者更好的是，直接在界面生成器中将图像添加到 MyPopOverView XIB

```
- (IBAction)showPopover:(id)sender
{
    if(![popoverController isPopoverVisible]) {
    myPopOver = [[MyPopOverView alloc] initWithNibName:@"MyPopOverView" bundle:nil];
    popoverController = [[UIPopoverController alloc] initWithContentViewController:myPopOver] ;

     // THE IMAGE
    UIImageView *icon = [[UIImageView alloc] initWithImage:[UIImage   imageNamed:@"popoverImage.png"]];

    [popoverController addsubview:icon];

    [popoverController setPopoverContentSize:CGSizeMake(350.0f, 500.0f)];
    [popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    } else {
        [popoverController dismissPopoverAnimated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T07:23:35.877

实现此场景的另一种方法是根据您的需求制作自定义 uiview，并在其中设置要显示为弹出框的图像。并在您想要显示弹出框时显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:57:00.343

像 WEPopOverController 一样使用自定义 popOverViewController。它包含一些属性来更改弹出箭头图像等。

[http://www.cocoacontrols.com/controls/wepopover](http://www.cocoacontrols.com/controls/wepopover)

```
- (WEPopoverContainerViewProperties *)defaultContainerViewProperties {
    WEPopoverContainerViewProperties *ret = [[WEPopoverContainerViewProperties new] autorelease];

    CGSize imageSize = CGSizeMake(30.0f, 30.0f);
    NSString *bgImageName = @"tri123.png";//@"round-rect-box.png";
    CGFloat bgMargin = 2.0;
    CGFloat contentMargin = 2.0;

    ret.leftBgMargin = bgMargin;
    ret.rightBgMargin = bgMargin;
    ret.topBgMargin = bgMargin;
    ret.bottomBgMargin = bgMargin;
    ret.leftBgCapSize = imageSize.width/2;
    ret.topBgCapSize = imageSize.height/2;
    ret.bgImageName = bgImageName;
    ret.leftContentMargin = contentMargin;
    ret.rightContentMargin = contentMargin;
    ret.topContentMargin = contentMargin;
    ret.bottomContentMargin = contentMargin;
    ret.arrowMargin = 1.0;
    ret.upArrowImageName = @"popoverArrowUpSimple.png";
    ret.downArrowImageName = @"tri2.png";   // Customize your Image
    ret.leftArrowImageName = @"popoverArrowLeftSimple.png";
    ret.rightArrowImageName = @"popoverArrowRightSimple.png";
    return ret;
} 
```

# javascript - 仅当右键单击以“故事”开头的类时才显示上下文菜单按钮

> ID：14829677
> 
> 赞同：2
> 
> 时间：2013-02-12T09:51:23.067
> 
> 标签：javascript, google-chrome, google-chrome-extension, contextmenu

有没有办法显示上下文菜单操作，只有当用户右键单击以“故事”开头的类时。

例如：如果用户在“story ....”类页面中的对象上单击鼠标右键，上下文菜单按钮应该会出现，否则不会发生任何事情。

这是我的代码（虽然它不起作用）：

```
var divs = document.querySelectorAll("[class^=story]"); //get all classes that start with "Story"

    window.oncontextmenu = function() {

        for(var i=0; i < divs.length; i++)
        {
            divs[i].onclick = function() { 
            chrome.contextMenus.create
            (
                {"id": "butto1", "title": "1", "contexts":["all"], "onclick": genericOnClick}
            );
            chrome.contextMenus.create
            (
                {"id": "button2", "title": "2", "contexts":["all"], "onclick": genericOnClick}
            );
            chrome.contextMenus.create
            (
                {"id": "button3", "title": "3", "contexts":["all"], "onclick": genericOnClick}
            );

            };
        }

        return true; 
    };

function genericOnClick(info, tab) {
  //do some crap here
  chrome.contextMenus.removeAll();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T22:29:53.397

在[这个相关的答案](https://stackoverflow.com/a/13673942/938089?creating-dynamic-context-menu-in-chrome-extension-is-failing)中，我解释说不能即时创建上下文菜单项，因为`contextmenu`事件和上下文菜单项出现之间的时间不足以[`chrome.contextMenus.create`](https://developer.chrome.com/extensions/contextMenus#method-create)在两者之间进行调用。

另一个答案解释了如何确保上下文菜单条目显示选定的文本。这是通过监听`selectionchange`事件来完成的。出于您的目的，我们希望使用具有所需时间的事件。

我将使用`mouseover`and`mouseout`事件。根据鼠标事件，当您使用键盘时，上下文菜单将不起作用，例如，使用 JavaScript 或 Tab 键聚焦元素，然后按下上下文菜单键。我没有在下面的解决方案中实现它。

该演示包含三个文件（加上一个 HTML 页面来测试它）。我将所有文件放在一个 zip 文件中，可在[https://robwu.nl/contextmenu-dom.zip](https://robwu.nl/contextmenu-dom.zip)获得。

## `manifest.json`

每个 Chrome 扩展程序都需要这个文件才能工作。对于此应用程序，使用了背景页面和内容脚本。此外，`contextMenus`还需要许可。

```
{
    "name": "Contextmenu based on activated element",
    "description": "Demo for https://stackoverflow.com/q/14829677",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": ["background.js"]
    },
    "content_scripts": [{
        "run_at": "document_idle",
        "js": ["contentscript.js"],
        "matches": ["<all_urls>"]
    }],
    "permissions": [
        "contextMenus"
    ]
} 
```

## `background.js`

背景页面将代表内容脚本创建上下文菜单。这是通过将事件侦听器绑定到 来实现的[`chrome.runtime.onConnect`](https://developer.chrome.com/extensions/runtime#event-onConnect)，它提供了一个简单的界面来替换上下文菜单条目。

[`chrome.contextMenus.create`](https://developer.chrome.com/extensions/contextMenus#method-create)每当通过此端口（来自内容脚本）接收到消息时调用。所有属性，除了`onclick`是 JSON 可序列化的，所以只有“onclick”处理程序需要特殊处理。我使用字符串来识别字典 ( `var clickHandlers`) 中的预定义函数。

```
var lastTabId;
// Remove context menus for a given tab, if needed
function removeContextMenus(tabId) {
    if (lastTabId === tabId) chrome.contextMenus.removeAll();
}
// chrome.contextMenus onclick handlers:
var clickHandlers = {
    'example': function(info, tab) {
        // This event handler receives two arguments, as defined at
        // https://developer.chrome.com/extensions/contextMenus#property-onClicked-callback

        // Example: Notify the tab's content script of something
        // chrome.tabs.sendMessage(tab.id, ...some JSON-serializable data... );

        // Example: Remove contextmenus for context
        removeContextMenus(tab.id);
    }
};

chrome.runtime.onConnect.addListener(function(port) {
    if (!port.sender.tab || port.name != 'contextMenus') {
        // Unexpected / unknown port, do not interfere with it
        return;
    }
    var tabId = port.sender.tab.id;
    port.onDisconnect.addListener(function() {
        removeContextMenus(tabId);
    });
    // Whenever a message is posted, expect that it's identical to type
    // createProperties of chrome.contextMenus.create, except for onclick.
    // "onclick" should be a string which maps to a predefined function
    port.onMessage.addListener(function(newEntries) {
        chrome.contextMenus.removeAll(function() {
            for (var i=0; i<newEntries.length; i++) {
                var createProperties = newEntries[i];
                createProperties.onclick = clickHandlers[createProperties.onclick];
                chrome.contextMenus.create(createProperties);
            }
        });
    });
});

// When a tab is removed, check if it added any context menu entries. If so, remove it
chrome.tabs.onRemoved.addListener(removeContextMenus); 
```

## `contentscript.js`

该脚本的第一部分创建了用于创建上下文菜单的简单方法。
在最后 5 行中，上下文菜单条目被定义并绑定到与给定选择器匹配的所有当前和未来元素。就像我在上一节中所说的那样，参数类型与“onclick”的[`createProperties`参数相同，`chrome.contextMenus.create`](https://developer.chrome.com/extensions/contextMenus#property-create-createProperties)除了“onclick”，它是一个映射到后台页面中的函数的字符串。

```
// Port management
var _port;
var getPort = function() {
    if (_port) return _port;
    _port = chrome.runtime.connect({name: 'contextMenus'});
    _port.onDisconnect.addListener(function() {
        _port = null;
    });
    return _port;   
}

// listOfCreateProperties is an array of createProperties, which is defined at
// https://developer.chrome.com/extensions/contextMenus#method-create
// with a single exception: "onclick" is a string which corresponds to a function
// at the background page. (Functions are not JSON-serializable, hence this approach)
function addContextMenuTo(selector, listOfCreateProperties) {
    // Selector used to match an element. Match if an element, or its child is hovered
    selector = selector + ', ' + selector + ' *';
    var matches;
    ['matches', 'webkitMatchesSelector', 'webkitMatches', 'matchesSelector'].some(function(m) {
        if (m in document.documentElement) {
            matches = m;
            return true;
        }
    });
    // Bind a single mouseover+mouseout event to catch hovers over all current and future elements.
    var isHovering = false;
    document.addEventListener('mouseover', function(event) {
        if (event.target && event.target[matches](selector)) {
            getPort().postMessage(listOfCreateProperties);
            isHovering = true;
        } else if(isHovering) {
            getPort().postMessage([]);
            isHovering = false;
        }
    });
    document.addEventListener('mouseout', function(event) {
        if (isHovering && (!event.target || !event.target[matches](selector))) {
            getPort().postMessage([]);
            isHovering = false;
        }
    });
}

// Example: Bind the context menus to the elements which contain a class attribute starts with "story"
addContextMenuTo('[class^=story]', [
    {"id": "butto1", "title": "1", "contexts":["all"], "onclick": 'example'},
    {"id": "button2", "title": "2", "contexts":["all"], "onclick": 'example'},
    {"id": "button3", "title": "3", "contexts":["all"], "onclick": 'example'}
]); 
```

前面的代码假定所有上下文菜单点击都由后台页面处理。如果要改为在内容脚本中处理逻辑，则需要在内容脚本中绑定消息事件。我在示例中显示了一个（注释的）实例，[`chrome.tabs.sendMessage`](https://developer.chrome.com/extensions/tabs#method-sendMessage)以`background.js`显示应该在哪里触发此事件。

如果您需要识别触发事件的元素，请不要使用我的示例中所示的预定义函数（在字典中），而是使用内联函数或工厂函数。要识别元素，消息需要与唯一标识符配对。我将把创建这个实现的任务留给读者（这并不难）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:31:50.587

迄今为止 `"all", "page", "frame", "selection", "link", "editable", "image", "video", "audio", "launcher"`，仅支持上下文。不能为每个对象类定制。

# 解决问题

如果您要显示上下文菜单操作，只有当用户右键单击页面上的某些 div.class 时才使用鼠标悬停菜单，如下所示

![在此处输入图像描述](../Images/b2a69f58f5b1b962320381658fe15b8b.png)

# qt - QObject 自动删除

> ID：14829681
> 
> 赞同：0
> 
> 时间：2013-02-12T09:51:34.503
> 
> 标签：qt, qt4, qevent

当我不希望它被删除时，我遇到了一些问题。

我有这个类（注意我没有声明Q_OBJECT）

```
class MyEntry : public QTreeWidgetItem
{
public:
    MyEntry(QTreeWidgetItem* _parent, QString _name = "noname") :
      QTreeWidgetItem(_parent, QStringList() << _name) {}

    ... it holds a few QStrings and has some setter/getter methods for them
}; 
```

我在一个包含 QTreeWidget 的类中创建和使用这个对象。这个类时不时地“发送”它的一个 MyEntries 到另一个类，该类使用来自它正在发送的 MyEntry 的信息来设置它持有的一些 QLabels 上的文本。我使用以下 QEvent：

```
class MyEvent : public QEvent
{
public:
    MyEvent(MyEntry* _ob) : QEvent((QEvent::Type)MYEVENT1), mp_ob(_ob) {}
    ~MyEvent() {}
    MyEntry* getOb() { return mp_ob; }
private:
    MyEntry* mp_ob;
}; 
```

我像这样发送和接收这个事件（接收者是 parent() 并且 lp_currentEntry 是一个 MyEntry 对象）：

```
Class that contains the QTreeWidget:

QApplication::postEvent(parent() , new MyEvent(lp_currentEntry));

Class that contains the QLabels:

void MyOtherClass::customEvent(QEvent* _p_ev)
{
  return;
} 
```

我遇到的问题是，一旦事件交付，MyEvent 就会被删除。但是它包含的 MyEntry 的析构函数也被调用。我从来没有使用 MyEvent 作为父级创建 MyEntry 那么为什么它被删除了？

我正在使用这个设置，因为 postEvent 通常是由一个不是 ui 的线程完成的，我很确定非 ui 线程不应该更新 QLabels 等，否则我可以简单地完成`(MyOtherClass*)parent()->updateLabels(lp_currentEntry);`- 但如果我是，请纠正我错误的。

**编辑**：这是一个回溯：

```
#0  MyEntry::~MyEntry (this=0x7f83a0, __in_chrg=<optimized out>) at ../jb2/containers.cpp:171
#1  0x000000000040ede9 in MyEntry::~MyEntry (this=0x7f83a0, __in_chrg=<optimized out>) at ../jb2/containers.cpp:178
#2  0x0000000000416439 in ~MyEvent (this=0xfc7810, __in_chrg=<optimized out>) at ../jb2/jb2Events.h:28
#3  MyEvent::~MyEvent (this=0xfc7810, __in_chrg=<optimized out>) at ../jb2/jb2Events.h:28
#4  0x0000003ad317b45a in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /lib64/libQtCore.so.4
#5  0x0000003ad31a5e33 in ?? () from /lib64/libQtCore.so.4
#6  0x0000003b24847825 in g_main_context_dispatch () from /lib64/libglib-2.0.so.0
#7  0x0000003b24847b58 in ?? () from /lib64/libglib-2.0.so.0
#8  0x0000003b24847c14 in g_main_context_iteration () from /lib64/libglib-2.0.so.0
#9  0x0000003ad31a5fc6 in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /lib64/libQtCore.so.4
#10 0x0000003ad4a6a5ee in ?? () from /lib64/libQtGui.so.4
#11 0x0000003ad31766ef in QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /lib64/libQtCore.so.4
#12 0x0000003ad3176978 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /lib64/libQtCore.so.4
#13 0x0000003ad317b768 in QCoreApplication::exec() () from /lib64/libQtCore.so.4
#14 0x0000000000408f53 in main (argc=1, argv=<optimized out>) at ../jb2/main.cpp:10 
```

# javascript - js搜索字符串并获取匹配的元素

> ID：14829687
> 
> 赞同：2
> 
> 时间：2013-02-12T09:51:50.040
> 
> 标签：javascript, jquery, string, search, match

我想问一下搜索字符串和获取匹配元素的最佳方法是什么？

```
//I want to get similar or matched element and the index of it.
//Search key ward 
var key = 'Pap'; 
```

```
<ul>
 <li>Papa</li>
 <li>Mama</li>
</ul> 
```

我现在的想法是使用`$.each`并匹配每个文本，但我认为这应该是错误的方式。但是，我在网上找不到关于这个问题的任何参考资料。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T09:53:10.847

使用`:contains`选择器

```
$('*:contains("'+key+'"):last') 
```

要找到完全匹配，元素中的整个文本会使用这个

```
$.fn.exactMatch = function (key) {
    var p = $(this).find(':contains("' + key + '"):last');
    if (p.text() == key) {
        p.css('background', 'yellow');
    } else {
        //Not exact match function if wanted
    }
} 
```

要使用此功能，请执行此操作

```
$(el).exactMatch(key); 
```

# c# - 如何在 C# Compact Framework 中获取 exe 应用程序名称和版本

> ID：14829689
> 
> 赞同：42
> 
> 时间：2013-02-12T09:51:54.500
> 
> 标签：c#, compact-framework, versioning

我的应用程序有一个 exe 并使用一些 DLL。我全部用 C# 编写。

在一个 DLL 中，我想编写一种方法来从 exe 中的版本信息中获取应用程序名称和版本。

我知道在完整的 .NET 中我可以使用 GetEntryAssembly，但这在 CF 中不可用。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-12T23:12:51.000

获取应用名称：

```
System.Reflection.Assembly.GetExecutingAssembly().GetName().Name; 
```

获取版本：

```
System.Reflection.Assembly.GetExecutingAssembly().GetName().Version; 
```

如果您的 DLL 试图获取 EXE 版本并且您无法立即访问它，您可能希望`GetCallingAssembly()`按类型（例如）使用或获取程序集。`typeof(Program).Assembly`

**编辑**

如果您有一个 DLL 并且您需要可执行文件的名称，那么您有几个选项，具体取决于用例。您可以从 EXE 程序集中包含的类型获取程序集，但由于 DLL 很少引用 EXE，因此它需要 EXE 传递该类型的对象。

```
Version GetAssemblyVersionFromObjectType(object o)
{
    o.GetType().Assembly.GetName().Version;
} 
```

你也可以像这样做一些结束运行：

```
[DllImport("coredll.dll", SetLastError = true)]
private static extern int GetModuleFileName(IntPtr hModule, StringBuilder lpFilename, int nSize);

...

var name = new StringBuilder(1024);
GetModuleFileName(IntPtr.Zero, name, 1024);
var version = Assembly.LoadFrom(name.ToString()).GetName().Version; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-11-19T05:07:28.860

`System.Reflection.Assembly.GetEntryAssembly().GetName().Version;`

此函数将提供加载其他库的应用程序版本。

`System.Reflection.Assembly.GetExecutingAssembly().GetName().Version;`

这将给出当前库的版本。如果您在应用程序库中调用它，您将获得应用程序版本，如果在 DLL 中调用它，则将获得该 DLL 版本。

所以在我看来`System.Reflection.Assembly.GetEntryAssembly().GetName().Version;` 是正确的功能使用。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-11-04T08:51:14.267

如果您想创建一个组件 (.dll) 用于另一个应用程序引用以获取主应用程序名称和版本，您可以使用以下方式：

获取主应用名称：

```
AppDomain.CurrentDomain.DomainManager.EntryAssembly.GetName().Name; 
```

获取版本：

```
AppDomain.CurrentDomain.DomainManager.EntryAssembly.GetName().Version.ToString(); 
```

获取 FullName（包含：应用名称、应用版本、文化、publicKeyToken）：

```
AppDomain.CurrentDomain.DomainManager.EntryAssembly.FullName; 
```

但是在这个解决方案中存在一个问题，它取决于主机，如果它直接从可执行文件运行，则会发生错误。因此进行以下选举：

获取主应用名称：

```
string appName = AppDomain.CurrentDomain.FriendlyName;
appName = appName.Substring(0, appName.IndexOf('.')); 
```

获取版本：

```
System.Windows.Forms.Application.ProductVersion; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-13T19:21:57.520

这对我有用

```
var versionInfo = FileVersionInfo.GetVersionInfo(AppDomain.CurrentDomain.BaseDirectory + AppDomain.CurrentDomain.FriendlyName);
string version = versionInfo.FileVersion; 
```

这将获取当前正在运行的 EXE 的版本，无论是否从 DLL/其他链接项目等调用此字符串

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-02-12T09:58:48.387

您可以尝试使用`FileInfo`Class吗`FileVersionInfo`？希望这会有所帮助..

您还可以尝试 Win32 API，例如 GetModuleFile()

# excel - 使用三列计算名称 - 代码

> ID：14829690
> 
> 赞同：0
> 
> 时间：2013-02-12T09:51:54.687
> 
> 标签：excel, vba

使用以下输入数据，我试图提取每个名称（D 列）类型的计数。

输入示例：

当前代码，如果 b 列是唯一的，则获取计数。

**所需输出：** RBS = 5，CA = 1，SG = 1，

我找到了这段代码并将其更新为我的要求。但是，对于以下情况，我无法让它输出结果：

**如果 B 列（交易）、C 列（总计）和 A 列（日期）是唯一的（不重复），则将名称的类型计为 1，否则如果两列都重复，则仅计为 1。**
*（所需输出）*

希望上面的例子能更清楚地阐明逻辑。

对此问题的任何帮助将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:56:38.613

这里不需要复杂的 VBA - 一个“简单”的公式就可以了：

```
=SUM(--NOT(ISERROR(SEARCH(C1,Input!$D:$D))))

```

（假设银行名称存储在单元格 C1 中）

请注意，您需要将此作为数组公式输入，即按`Ctrl`- `Shift`- `Enter`！

# nginx - 在现有网站上提供 Plone 子文件夹

> ID：14829692
> 
> 赞同：1
> 
> 时间：2013-02-12T09:52:00.833
> 
> 标签：nginx, plone, zope

我正在尝试将 Plone 站点中的子文件夹作为现有站点的一部分提供。但是当我这样做时，某些功能会停止工作，例如无法访问@@overview-controlpanel 视图。

例如：

现有域是 example.com。现有站点在那里提供服务。我的目标是使用反向代理在 url example.com/mysite 上为 localhost:8080/plone/subfolder 提供服务。

根据我对 VirtualHostMonster 的理解，我应该可以使用以下 nginx 配置来做到这一点：

```
server {
    listen      80;
    server_name example.com;

    client_max_body_size 25m;

    location /events {
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        proxy_pass http://localhost:8080/VirtualHostBase/http/example.com/plone/subfolder/VirtualHostRoot/_vh_mysite/;
    }
} 
```

这实际上工作得很好，除了我无法访问@@overview-controlpanel。我得到一个404。

如何使用 VirtualHostMonster 形成我的 proxy_pass url 以在 example.com/mysite 下无错误地为我的网站提供服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:30:46.513

你不能同时拥有它；您可以将子文件夹作为站点的一部分提供，但对于某些事情，您*必须*访问站点根目录。

设置一个单独的私有域以像普通站点一样访问根文件夹，然后从那里访问控制面板。控制面板视图通常与 Plone 门户根对象相关联，这是有充分理由的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:02:29.127

更改您的 Nginx 配置，使其作为 /events 服务于 Plone 站点根目录。在您的 Plone 站点中，选择“子文件夹”作为默认页面（您需要授权使用文件夹内容作为 ZMI 中的默认页面：portal_properties / site_properties 中的 default_page_types 参数）。

# python - 在编译时提供函数元数据的大多数 Pythonic 方式？

> ID：14829708
> 
> 赞同：12
> 
> 时间：2013-02-12T09:52:38.467
> 
> 标签：python, plugins, metadata, python-decorators

我正在以 Python 2.7 模块的形式构建一个非常基本的平台。这个模块有一个 read-eval-print 循环，输入的用户命令被映射到函数调用。因为我试图让为我的平台构建插件模块变得容易，所以函数调用将从我的主模块到任意插件模块。我希望插件构建器能够指定他想要触发他的函数的命令，所以我一直在寻找一种 Pythonic 方式来远程输入 Main 模块中的 command->function dict 中的映射。插件模块。

我看过几件事：

1.  **方法名解析：**主模块将导入插件模块并扫描它以查找匹配特定格式的方法名。例如，它可能会将 download_file_command(file) 方法添加到其字典中作为“下载文件”-> download_file_command。但是，要获得一个简洁、易于键入的命令名称（例如，“dl”）要求函数名称也很短，这不利于代码的可读性。它还要求插件开发人员符合精确的命名格式。

2.  **跨模块装饰器：**装饰器可以让插件开发人员随意命名他的函数，并简单地添加类似 @Main.register("dl") 的东西，但它们必然要求我修改另一个模块的命名空间并保持全局状态在主模块。我明白这是非常糟糕的。

3.  **同模块装饰器：**使用与上面相同的逻辑，我可以添加一个装饰器，将函数名称添加到插件模块本地的某个命令名称->函数映射，并通过 API 调用检索到主模块的映射。这要求某些方法始终存在或继承，并且 - 如果我对装饰器的理解是正确的 - 该函数只会在第一次运行时注册自己，并且此后每次都不必要地重新注册自己。

因此，我真正需要的是一种 Pythonic 方式来使用应该触发它的命令名称来注释函数，并且这种方式不能是函数的名称。当我导入模块时，我需要能够提取命令名称-> 函数映射，并且插件开发人员方面的工作量减少是一大优势。

感谢您的帮助，如果我对 Python 的理解有任何缺陷，我深表歉意；我对这门语言比较陌生。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T10:28:52.363

在@ericstalbot 的回答的第一部分构建或站立，您可能会发现使用如下装饰器很方便。

```
################################################################################
import functools
def register(command_name):
    def wrapped(fn):
        @functools.wraps(fn)
        def wrapped_f(*args, **kwargs):
            return fn(*args, **kwargs)
        wrapped_f.__doc__ += "(command=%s)" % command_name
        wrapped_f.command_name = command_name
        return wrapped_f
    return wrapped
################################################################################
@register('cp')
def copy_all_the_files(*args, **kwargs):
    """Copy many files."""
    print "copy_all_the_files:", args, kwargs
################################################################################

print  "Command Name: ", copy_all_the_files.command_name
print  "Docstring   : ", copy_all_the_files.__doc__

copy_all_the_files("a", "b", keep=True) 
```

运行时输出：

```
Command Name:  cp
Docstring   :  Copy many files.(command=cp)
copy_all_the_files: ('a', 'b') {'keep': True} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T12:36:38.207

用户定义的函数可以具有任意属性。因此，您可以指定插件函数具有具有特定名称的属性。例如：

```
def a():
  return 1

a.command_name = 'get_one' 
```

然后，在您的模块中，您可以构建如下映射：

```
import inspect #from standard library

import plugin

mapping = {}

for v in plugin.__dict__.itervalues():
    if inspect.isfunction(v) and v.hasattr('command_name'):
        mapping[v.command_name] = v 
```

要了解用户定义函数的任意属性，请参阅[文档](http://docs.python.org/2.7/reference/datamodel.html#the-standard-type-hierarchy)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T11:47:05.327

插件系统有两个部分：

1.  发现插件
2.  在插件中触发一些代码执行

您问题中提出的解决方案仅涉及第二部分。

根据您的要求，有很多方法可以实现这两种方法，例如，要启用插件，可以在应用程序的配置文件中指定它们：

```
plugins = some_package.plugin_for_your_app
    another_plugin_module
    # ... 
```

要实现插件模块的加载：

```
plugins = [importlib.import_module(name) for name in config.get("plugins")] 
```

获取字典`command name -> function`：

```
commands = {name: func 
            for plugin in plugins
            for name, func in plugin.get_commands().items()} 
```

插件作者可以使用任何方法来实现`get_commands()`，例如，使用前缀或装饰器——你的主应用程序不应该关心，只要`get_commands()`返回每个插件的命令字典。

例如，`some_plugin.py`（完整来源）：

```
def f(a, b):
    return a + b

def get_commands():
    return {"add": f, "multiply": lambda x,y: x*y} 
```

它定义了两个命令`add`，`multiply`.

# graph-theory - 当节点 h 以最小成本与所有其他节点连接时，从 1 使每个节点 2 的度数

> ID：14829710
> 
> 赞同：1
> 
> 时间：2013-02-12T09:52:43.313
> 
> 标签：graph-theory

总共有 n 个节点（n 的最大值可以是 2000）。现在节点 h 已经连接到所有其他节点，并且我们得到了连接邻接矩阵中每对节点的成本。我们需要以最小成本使每个节点的度数至少为 2（最初每个节点的度数为 1，因为它最初与节点 h 连接）。

*注意*：
（1）节点的度数是nos。连接到该节点的边数。
(2)h 始终等于 1 。

我们应该怎么做 ？我有一个贪心算法，我们对每 2 个节点之间的成本对进行排序，并以最低成本挑选对，使所有节点都达到 2 级，但这肯定会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:39:52.247

我们可以忽略*h*并将问题视为添加边，使得每个顶点的度数至少为 1。如果顶点的数量是偶数，这只是一个[完美匹配](http://en.wikipedia.org/wiki/Perfect_matching)。否则，它是一个完美匹配加上一个连接到另一个顶点的顶点（给定顶点度数 2）。您可以通过简单地尝试额外顶点的所有可能性并解决*n 个*完美匹配问题来解决这些问题。

# javascript - jspdf和数学公式

> ID：14829714
> 
> 赞同：1
> 
> 时间：2013-02-12T09:52:57.933
> 
> 标签：javascript, html, html5-canvas, jspdf

我正在使用 jspdf 来生成技术报告。我需要添加数学公式。公式中的值是由脚本生成的，所以我不能使用静态图像。

我想到的唯一想法是使用 html5 画布而不是导出 png

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:15:26.380

您可以使用 MathJax 来呈现数学公式：

```
http://library.uoregon.edu/scis/blackboard/faq/instructors/i65.html 
```

并尝试使用 jsPDF HTML 渲染器插件将生成的 HTML 插入您的 PDF 文档。

# symfony - 使用 Symfony2 为 Doctrine 的 PersistentCollection 指定索引

> ID：14829716
> 
> 赞同：3
> 
> 时间：2013-02-12T09:53:00.457
> 
> 标签：symfony, doctrine

谁能告诉我如何配置 Symfony2/Doctrine 以从实体中的指定列索引 PersistentCollection 中的对象？

例如假设我们有两个表；品类和产品，多品归一品类。当我使用存储库加载一个类别，然后调用`getProducts()`加载产品时，我希望它们按产品 ID 或我指定的任何列作为索引返回。目前，它们只是从零开始递增索引。

无论如何要这样做，还是我需要自己循环并手动设置密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:54:13.343

映射`OneToMany`关联允许您定义`indexBy`属性。使用[注释映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html)，它看起来像以下

```
class Category
{
    // ...

    /**
     * @OneToMany(targetEntity="Products", indexBy="productId", mappedBy="product")
     */
    protected $products;

    // ...
} 
```

[XML](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/xml-mapping.html)、[YAML](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/yaml-mapping.html)和[PHP 映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/php-mapping.html)也允许这样做，这也适用于`ManyToMany`.

# wpf - Silverlight 中的 Direct3D

> ID：14829720
> 
> 赞同：1
> 
> 时间：2013-02-12T09:53:09.493
> 
> 标签：wpf, silverlight, directx, direct3d, slimdx

有什么方法可以在 Silverlight 应用程序中使用 Direct3D 场景？

我们在带有 D3DImage 类的 WPF 中成功使用 Direct3D（通过 SlimDX）。Silverlight 中是否有等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:03:48.167

[Silverlight 对 3D 的支持](http://msdn.microsoft.com/en-us/magazine/hh547098.aspx)使用 XNA。

所以实际的类 D3DImage 在 Silverlight 中不可用，而是使用[DrawingSurface](http://msdn.microsoft.com/en-us/library/system.windows.controls.drawingsurface%28v=vs.95%29.aspx)

# python - 在 BeautifulSoup 4 中以 unicode 字符串形式获取标签属性的内容

> ID：14829726
> 
> 赞同：0
> 
> 时间：2013-02-12T09:53:24.153
> 
> 标签：python, attributes, tags, beautifulsoup

根据[`BeautifulSoup`文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#attributes)，可以使用如下代码获取标签属性的值：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup('<b class="boldest">Extremely bold</b>')
tag = soup.b

tag['class'] 
```

理论上（也就是说，根据文档），输出将是：

```
u'boldest' 
```

但是，当我执行上面的代码时，它会输出：

```
['boldest'] 
```

那么，有什么我想念的吗？如何将标签的属性内容作为纯 unicode 字符串获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:58:41.590

```
tag['class'][0] 
```

标签中可以有多个类，这就是它返回值列表的原因。如果您确定那里只有一个类 - 只需从列表中获取第一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:01:04.397

检查文档中的此部分：

**多值属性**

HTML 4 定义了一些可以有多个值的属性。HTML 5 删除了其中一些，但定义了更多。最常见的多值属性是类（即一个标签可以有多个 CSS 类）。其他包括 rel、rev、accept-charset、headers 和 accesskey。Beautiful Soup 将多值属性的值呈现为列表：

`tag['class'][0]`会给你字符串

# css - 如何让 Primefaces 子菜单在左侧打开？

> ID：14829728
> 
> 赞同：1
> 
> 时间：2013-02-12T09:53:36.407
> 
> 标签：css, jsf, menu, primefaces

我有一个`p:tieredMenu`在 which 下是一个`p:subMenu`加载了`p:menuItem`. 我在页面的右上角有分层菜单，所以当子菜单打开时，它会在右侧打开并移出页面。

请让我知道是否有任何方法可以使子菜单出现在左侧。

我看了一个类似的问题[How to make twitter bootstrap submenu to open on the left？](https://stackoverflow.com/questions/12187554/how-to-make-twitter-bootstrap-submenu-to-open-on-the-left-side)，但不知道如何针对 Primefaces/JSF 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T14:45:18.580

此属性将使菜单块出现在左侧。但这会导致所有菜单都在左侧。

```
.ui-menu-child {
   left: -200px !important;
} 
```

你需要玩一点才能得到你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-13T06:46:48.787

PrimeNG 11

```
#yourMenuId .p-submenu-list {
  right: 100%;
  left: unset;
} 
```

# php - 在 php 中读取 xml

> ID：14829739
> 
> 赞同：0
> 
> 时间：2013-02-12T09:53:55.890
> 
> 标签：php, xml, domdocument

我想在 PHP 中阅读以下结构。

```
<Listing>
<Unit_Type> 1 Bedroom </Unit_Type>
<Facilities>
<facility>Balcony</facility>
<facility>Basement parking</facility>
<facility>BBQ area</facility>
<facility>Built in wardrobes</facility>
<facility>Covered parking</facility>
</Facilities>
</Listing> 
```

以下是我的代码。

```
$feeds = new DOMDocument();
$feeds->load("propspace.xml"); 
$properties = $feeds->getElementsByTagName("Listing");

foreach( $properties as $property ){
$unittype_tag = $property->getElementsByTagName("Unit_Type");
$unit_type = $unittype_tag->item(0)->nodeValue;

 } 
```

标签的数量`<facility>`可以是可变的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:01:52.503

要阅读这些设施，只需调用`getElementsByTagName("facility")`：`$property`

```
$feeds = new DOMDocument();
$feeds->load("propspace.xml"); 
$properties = $feeds->getElementsByTagName("Listing");

foreach( $properties as $property ){
  $unittype_tag = $property->getElementsByTagName("Unit_Type");
  $unit_type = $unittype_tag->item(0)->nodeValue;

  foreach($property->getElementsByTagName("facility") as $f){
    echo $f->nodeValue . "\n";
  }
} 
```

输出

> 阳台
> 地下停车场
> 烧烤区
> 内置衣柜
> 有盖停车场

[演示](http://codepad.org/q8vjigD5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:19:11.057

```
<?php

  $xml = '
   <Listing>
      <Unit_Type> 1 Bedroom </Unit_Type>
      <Facilities>
         <facility>Balcony</facility>
         <facility>Basement parking</facility>
         <facility>BBQ area</facility>
         <facility>Built in wardrobes</facility>
         <facility>Covered parking</facility>
      </Facilities>
   </Listing>';

  $feeds = new DOMDocument();
  $feeds->loadXML($xml); 
  $properties = $feeds->getElementsByTagName("Listing");

  foreach( $properties as $property )
  {
    $unittype_tag = $property->getElementsByTagName("Unit_Type");
    $unit_type = $unittype_tag->item(0)->nodeValue;
    $Facilities = $property->getElementsByTagName("facility")
    foreach($Facilities as $facility)
    {
      echo "<pre>";
      print_r($facility->nodeValue);
      echo "</pre>";
    }    
  }

?> 
```

# shell - 如何通过 JCL/Shell 脚本（unix 框）检查 CICS 区域的状态

> ID：14829746
> 
> 赞同：0
> 
> 时间：2013-02-12T09:54:53.403
> 
> 标签：shell, unix, mainframe, jcl, cics

我想通过使用 JCL 检查大型机 CICS 区域的状态，无论它是活动的还是非活动的，或者如果有人可以建议我一种通过 shell 脚本检查 CICS 区域状态的方法，那就更好了。此脚本/JCL 将用于向组发送邮件，说明该区域在预定时间处于活动/非活动状态。

请帮助我使用 JCL 的 PROC/UTILITY 或帮助我使用 shell 脚本示例来实现它

**解决方案：**

我在主屏幕上执行了以下命令

```
TSO STATUS <job-name> 
```

它给了我工作是否正在运行。我在工作中执行了相同的 TSO 命令，并将输出放入数据集中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:01:27.753

简单思考一下，我看到了三种替代方案，都涉及使用 SDSF（系统显示和搜索工具）。

*   [批量SDSF](https://www.ibm.com/docs/en/zos/2.4.0?topic=guide-using-sdsf-in-batch)
*   [来自 Rexx 的 SDSF](https://www.ibm.com/docs/en/zos/2.4.0?topic=guide-using-sdsf-rexx-programming-language)
*   [来自 Java 的 SDSF](https://www.ibm.com/docs/en/zos/2.4.0?topic=guide-using-sdsf-java-programming-language)

请注意，并非所有大型机商店都许可 SDSF，它是 IBM 产品。存在 ISV 替代方案；我知道这些，但对它们不熟悉。

如果这是在我工作的商店中完成的，我将与大型机建立 SSH 会话并提交批处理作业以执行链接中描述的 Rexx 代码。批处理作业可以检查 CICS 区域的状态并发送电子邮件。我的偏好来自以前做过所有这些事情，我只是没有像这样把它们放在一起。

您的大型机人员可能禁止使用 Rexx，或者不允许 SSH 连接到他们的计算机，或者不愿意将 Rexx 接口设置到 SDSF。他们可能对 Java 有类似的感受。

可能存在安全隐患，logonID 和密码将在您的脚本中，是吗？该 ID 将被授权做什么？如何保护脚本？ID的密码是否需要定期过期？

所有这一切都意味着您必须与（可能是多个）大型机人员一起工作，以使该过程正常运行。这些问题都不是为了阻止你实现目标；您的目标必须在不损害系统安全性和完整性的情况下实现。

还有一些事情要考虑...

为什么要检查 CICS 区域是否已启动？如果是因为（例如）您将开始批处理以在该区域启动时向该区域发送消息，并在该区域关闭时通知某人，那么最好将错误处理构建到您的批处理中。

大型机商店通常有一些自动化软件在发生重大事件时通知人们 - 铃声响起，灯光闪烁，寻呼机关闭，发送电子邮件等。也许您正在尝试做的事情已经以不同的方式处理.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:59:01.923

其他几个选项：

*   您还可以运行状态 (ST) 命令 - 只需运行 TSO 后台 (IKJEFT01) 并发出状态命令，请参阅[状态命令](http://publib.boulder.ibm.com/infocenter/zos/v1r12/index.jsp?topic=/com.ibm.zos.r12.ikjc200/statcmd.htm)以获取适当的作业名称。
*   您可以尝试从批处理作业运行 Cics 命令，请参阅[Batch Cemt New copy](https://stackoverflow.com/questions/13740721/jcl-equivalent-of-cemt-newcopy?rq=1)。如果它工作 CICS 已启动，失败 CICS 未启动，但我建议进行查询而不是新副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T00:08:11.067

一种方法是将作业步骤添加到 CICS 区域。将此作业步骤定义为始终运行，或者更好地将其定义为仅在 CICS 作业步骤失败时才运行。

在此工作步骤中，调用向相关方组中的每个人发送电子邮件的程序。

这样，当 CICS 区域异常终止时，每个人都会收到通知，但如果作业作为常规操作的一部分被彻底关闭，则没有人会收到电子邮件。

或者，您可能希望始终在该地区出现故障时发送一封电子邮件，无论原因如何。

此解决方案避免了轮询该区域以查看它是否已启动。例如，如果更改区域名称会发生​​什么？剧本必须改！或者，如果添加第二个或第三个生产区域怎么办？同样，必须更改所有脚本。

最后，您可以向区域添加步骤零，以便在区域启动时通知每个人！

# ios - 没有收到来自 LinkedIn Objective-C 的电子邮件

> ID：14829748
> 
> 赞同：2
> 
> 时间：2013-02-12T09:54:59.847
> 
> 标签：ios, objective-c

我正在为 LinkedIn 使用 Objective C 库并尝试获取用户的主要 emailId。我正在做以下事情：-

1) **[https://api.linkedin.com/uas/oauth/requestToken?scope=r_emailaddress](https://api.linkedin.com/uas/oauth/requestToken?scope=r_emailaddress)** >> 在请求请求令牌时将其作为 url 传递。

2）和**[http://api.linkedin.com/v1/people/~:(id,first-name,industry,email-address)](http://api.linkedin.com/v1/people/~:(id,first-name,industry,email-address))**在为用户获取个人资料时，但我从未收到电子邮件地址。

你能告诉我吗，我错过了什么。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T07:27:40.863

我能够成功获取电子邮件地址。唯一的变化是 requestToken 的请求方法以传递范围参数，同时以 LinkedIn 开发人员页面上的参考指南中未描述的不同方式请求权限。它在“RDLinkedInEngine.m”文件中>>“sendTokenRequestWithURL:token:onSuccess:onFailure”方法>>

```
OARequestParameter *nameParam = [[OARequestParameter alloc] initWithName:@"scope" value:@"r_basicprofile+rw_nus+r_emailaddress"];
NSArray *params = [NSArray arrayWithObjects:nameParam, nil];
[request setParameters:params];
OARequestParameter * scopeParameter=[OARequestParameter requestParameterWithName:@"scope"
value:@"r_emailaddress r_fullprofile rw_nus"];
[request setParameters:[NSArray arrayWithObject:scopeParameter]]; 
```

确保在请求访问令牌时，您保留默认提供的方法，因为相同的方法用于获取请求令牌以及访问令牌。

# jquery - jQueryUI 表格如何工作

> ID：14829754
> 
> 赞同：0
> 
> 时间：2013-02-12T09:55:26.170
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui

在 Ruby on rails 3.1+ 这是我的代码

_form.html.erb：

```
<div id="tabs">
   <ul>
     <li><a href="#tabs-1">Tab1</a></li>
     <li><a href="#tabs-2">Tab2</a></li>
   </ul>
</div> 
```

test.js.coffee

```
$("#tabs").tabs() 
```

在我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require_tree . 
```

为什么标签不显示？？我尝试在 application.js 中编写

```
$(document).ready(function() {
  alert("test!");
  $("#tabs").tabs();
  } 
```

测试消息显示，但选项卡不呈现...在此先感谢您的帮助

埃西斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:00:46.390

伙计，您需要每个选项卡的内容。每个锚点都使用 href 属性指向其选项卡的内容。您需要放置一个名为 tabs-1 的 div 和一个名为 tabs-2 的 div 才能正常工作。

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Tab1</a></li>
        <li><a href="#tabs-2">Tab2</a></li>
    </ul>
    <div id="tabs-1">
        <p>Hi, this is the first tab.</p>
    </div>
    <div id="tabs-2">
        <p>This is the 2nd tab.</p>
    </div>
</div> 
```

# javascript - 从 node.js 中的字符串执行函数

> ID：14829758
> 
> 赞同：0
> 
> 时间：2013-02-12T09:55:44.120
> 
> 标签：javascript, node.js, mongodb, parameters

有没有办法从作为请求参数传递的 String 执行函数并在 node.js 中返回结果？想象一个包含字符串的请求：

```
"db.users.find()" 
```

作为参数

如果我知道我想执行这个语句，我会这样做：

```
db.collection('users', function(err, collection) {
    collection.find().toArray(function(err, items) {
        res.send(items);
    });
}); 
```

我想要的是类似于解析器的东西，它将执行给定的语句并返回结果。

我试过这样：

```
exports.execStatement = function(req, res) {
//var statemnet = req.params.statement;
  var statement = "collection.find().toArray(function(err, items) {
        res.send(items);});";
  db.collection('users', function(err, collection) {        
    eval(statement)
   });
}; 
```

这段代码给了我错误：

```
var statement = "collection.find().toArray(function(err, prdel) { ...
SyntaxError: Unexpected token ILLEGAL 
```

怎么了 ？为什么我不能执行存储在 String 中的代码？在此工作之后，我想弄清楚如何执行在请求中作为参数传递的代码。

这种方法甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:03:07.683

第二个示例显示了如何将函数添加到数据库。

[http://mongodb.github.com/node-mongodb-native/api-generated/db.html#eval](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#eval)

但是不要。主要原因有三个

1.  在 2.2 和更早的版本中，SpiderMonkey 是单线程的，这意味着您的“存储过程”性能极差
2.  eval 在操作期间需要一个写锁（除非你专门设置了 nolock 然后你最好不要写，否则它会失败）。这将停止数据库上的所有写操作，直到您的函数完成执行。
3.  注入攻击，但上面已经介绍过了。

# php - I came across this in my sever. What does this do?

> ID：14829759
> 
> 赞同：-5
> 
> 时间：2013-02-12T09:55:48.837
> 
> 标签：php

I came across this in my sever. And I was wondering what these PHP codes do.

```
<?php
    $request_method = $_SERVER["REQUEST_METHOD"];
    if($request_method == "GET"){
      $query_vars = $_GET;
    } elseif ($request_method == "POST"){
      $query_vars = $_POST;
    }
    reset($query_vars);
    $t = date("U");

    $file = $_SERVER['DOCUMENT_ROOT'] . "/../data/gdform_" . $t;
    $fp = fopen($file,"w");
    while (list ($key, $val) = each ($query_vars)) {
     fputs($fp,"<GDFORM_VARIABLE NAME=$key START>\n");
     fputs($fp,"$val\n");
     fputs($fp,"<GDFORM_VARIABLE NAME=$key END>\n");
     if ($key == "redirect") { $landing_page = $val;}
    }
    fclose($fp);
    if ($landing_page != ""){
    header("Location: http://".$_SERVER["HTTP_HOST"]."/$landing_page");
    } else {
    header("Location: http://".$_SERVER["HTTP_HOST"]."/");
    }

?> 
```

All I see is headering me to the a new destination?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:02:11.737

It stores all data sent by GET or POST to a file (a GDFORM-file, whatever that is) and then redirects the user to a specific page. So I'm guessing it's a log function of some sort.

It might be interesting to look through the files though, since login credentials and such would be stored along with other form/get-data.

# c#-4.0 - Marshal.GetActiveObject("Excel.Application") 给出错误调用被被调用者拒绝。（来自 HRESULT 的异常：0x80010001 (RPC_E_CALL_REJECTED)）

> ID：14829762
> 
> 赞同：1
> 
> 时间：2013-02-12T09:56:06.697
> 
> 标签：c#-4.0, office-interop, excel-2010, excel-interop

我有使用 Microsoft.Interop.Excel 和 Microsoft.Interop.Word 的 C# 应用程序。我们验证了 word 或 excel 应该一次打开。当在 Excel 实例上使用 Active Cell 打开应用程序的一侧时 - 然后在写作模式下

我调用 Marshal.GetActiveObject("Excel.Application") 来创建 Excel 的实例，但那时它会给出错误

Marshal.GetActiveObject(progId);

给错误调用被被调用者拒绝。（来自 HRESULT 的异常：0x80010001 (RPC_E_CALL_REJECTED)）

请给我建议，以便我能够获得 Excel 的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:57:59.610

Excel 和 Word 都是单线程应用程序。我之前遇到过这个错误，因为我在 Excel 上打开了自动保存。您可能希望将其关闭，看看是否能解决问题。

DD

# c# - 我应该如何从 C# 执行简单的 oracle 查询？

> ID：14829764
> 
> 赞同：0
> 
> 时间：2013-02-12T09:56:12.523
> 
> 标签：c#, .net, database, oracle, data-access-layer

我需要从 C# 程序向 oracle 数据库执行几千次插入操作。执行此操作的最佳方法是什么？我需要控制事务以及运行查询和存储过程的能力。我不需要完整的 ORM，我想我真的只是想要一个简单、稳定的 DAL 来运行查询。任何人都可以提出这样的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:00:51.507

查看以下适用于 .NET 的 Oracle 数据提供程序

[http://www.oracle.com/technetwork/topics/dotnet/index-085163.html](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)

否则，您可以查看 OLEDB for Oracle。

# parallel-processing - 查找 Beowulf 集群中每个处理器所花费的执行时间

> ID：14829765
> 
> 赞同：0
> 
> 时间：2013-02-12T09:56:14.987
> 
> 标签：parallel-processing, cluster-computing, mpi, mpich

我已经从以下链接[http://www.cs.nyu.edu/wanghua/course...el/h3/mpi_lu.c](http://www.cs.nyu.edu/wanghua/course...el/h3/mpi_lu.c)下载了一个 LU Decomposition 程序，并且程序运行得非常好...我的原因编写这个线程是为了帮助我获得在集群中连接的节点的处理器上花费的执行时间，以便它帮助我从集群中获取统计值。

请帮助我，因为我对 MPI 编程知之甚少，我想要的只是上述程序在集群中节点的每个处理器上花费的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:25:29.587

至少有两种方法可以获取您所寻找的时间，或者至少接近它们。

如果您的集群上安装了作业管理系统（如果没有安装），那么我希望它会记录计算中涉及的每个进程在每个节点上花费的时间。当然，Grid Engine 会将此数据保存在其文件中，并提供用于检查该文件`accounting`的实用程序。`qacct`得知其他广泛使用的工作管理系统不提供类似的数据和功能时，我会感到非常惊讶。

您可以编辑程序并`mpi_wtime`在关键点插入调用。当然，和所有 MPI 例程一样，这只能在 after`mpi_init`和 before调用`mpi_finalize`；您将不得不做出其他安排来对 MPI 范围之外的代码部分进行计时。（在大多数不支持时钟同步调用的 MPI 实现上，`mpi_wtime`可以在调用之前`mpi_init`和之后`mpi_finalize`调用，因为`mpi_wtime`系统定时器例程周围只有一个包装器，但这不能保证是可移植的）

# c++ - iostream 的 C++ 包装类，使用流修饰符，如 std::endl 和 operator<<

> ID：14829770
> 
> 赞同：5
> 
> 时间：2013-02-12T09:56:38.680
> 
> 标签：c++, stl, wrapper, iostream

我目前正在为 an 编写一个包装器`std::stringstream`，我想`operator<<`通过我的班级将所有调用转发到`std::stringstream`. 这现在工作得很好（感谢这个问题：[STL 流的包装类：转发运算符<< 调用](https://stackoverflow.com/questions/14752504/wrapper-class-for-stl-stream-forward-operator-calls)），但它仍然存在一个问题。

假设我有以下代码：

```
class StreamWrapper {
private:
    std::stringstream buffer;
public:
    template<typename T>
    void write(T &t);

    template<typename T>
    friend StreamWrapper& operator<<(StreamWrapper& o, T const& t);

    // other stuff ...
};

template<typename T>
StreamWrapper& operator<<(StreamWrapper& o, T const& t) {
    o.write(t);
    return o;
}

template<typename T>
void StreamWrapper::write(T& t) {
    // other stuff ...

    buffer << t;

    // other stuff ...
} 
```

如果我现在这样做：

```
StreamWrapper wrapper;
wrapper << "text" << 15 << "stuff"; 
```

这工作得很好。但是，如果我想使用流修饰符，如[http://www.cplusplus.com/reference/ios/endl](http://www.cplusplus.com/reference/ios/endl)`std::endl`中的一个函数，我根本不会编译。

```
StreamWrapper wrapper;
wrapper << "text" << 15 << "stuff" << std::endl; 
```

为什么？我如何也转发流修饰符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:00:37.623

看到[这个答案](https://stackoverflow.com/a/3662786/256138)。

你会想要

```
typedef std::ostream& (*STRFUNC)(std::ostream&);

StreamWrapper& operator<<(STRFUNC func)  // as a member, othewise you need the additional StreamWrappe& argument first
{
  this->write(func);
  return *this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:05:33.810

你似乎做了一些额外的工作。我通常使用：

```
class StreamWrapper
{
    // ...
public:
    template <typename T>
    StreamWrapper& operator<<( T const& obj )
    {
        //  ...
    }
}; 
```

使用现代编译器，这*应该*适用于所有具体类型。问题是操纵器是模板函数，因此编译器无法进行模板参数类型推导。解决方案是为操纵器的类型提供非模板重载：

```
StreamWrapper& operator<<( std::ostream& (*pf)( std::ostream& ) )
{
    //  For manipulators...
}

StreamWrapper& operator<<( std::basic_ios<char>& (*pf)( std::basic_ios<char>& )
{
    //  For manipulators...
} 
```

操纵器的类型推导将失败，但编译器将选择这些用于函数重载解析。

（请注意，您可能需要更多，例如`std::setw(int)`.）

# sql - 如何在 sql server 2008 R2 中使用 IF 条件进行列选择

> ID：14829772
> 
> 赞同：2
> 
> 时间：2013-02-12T09:56:49.143
> 
> 标签：sql, select, sql-server-2008-r2

在我的项目中，我希望以 2 种不同的方式从同一个表中获取数据。1）只有 5 个字段 2）只有 10 个字段 我正在`Stored Procedure`为每个字段获取数据。但我希望如果可能的话，我应该做一个程序。

> 那么，我可以输入if条件来选择列吗？

例如，如果我将参数传递为“ **Less** ”，它将仅获取 5 列数据，如果我将参数传递为“ **More** ”，它将获取 10 列数据。`SELECT`我可以根据条件（我已经完成）在程序中有两个语句，但我想使它成为一个`SELECT`语句。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:59:48.123

这是不可能的。

您当前`IF`在存储过程中使用语句的解决方案是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:00:57.963

不，不可能有一个 SELECT 语句。

但是，您可以这样做：

```
if @ColumnList = 'less'
begin
    call storedProc_returning5Columns
end
else
begin
    call storedProc_returning10Columns
end 
```

[另一种选择是使用动态 TSQL]

# mysql - 在 wordpress 的 wp_users 表中的 PHPmyadmin 中运行查询

> ID：14829777
> 
> 赞同：-2
> 
> 时间：2013-02-12T09:57:03.590
> 
> 标签：mysql, wordpress

当我使用使用 admin/admin123 作为密码的网络浏览器登录我的 wordpress 管理员时，它工作得很好。

**我尝试在 phpymadmin 中运行以下查询，**

```
SELECT * FROM wp_users where user_login='admin' and user_pass=MD5('admin123'); 
```

它说

**“MySQL 返回了一个空结果集（即零行）。（查询耗时 0.0003 秒）”**

不确定是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:32:40.520

WordPress 不使用简单的 md5 密码。
你也不应该使用 md5 作为密码保护它不好。一个快速的谷歌搜索会教你。

方便的事实，如果您丢失了密码，您可以在数据库中输入一个 md5 密码，WP 将在登录时接受它并将其重新散列到自己的安全密码散列

# nsis - 为什么我的安装程序无法删除开始菜单项？

> ID：14829780
> 
> 赞同：0
> 
> 时间：2013-02-12T09:57:17.073
> 
> 标签：nsis

我的安装程序uninstall.exe 无法删除开始菜单条目。下面有一些代码代码任何人都可以告诉我我错在哪里。

```
!define MUI_STARTMENUPAGE_REGISTRY_ROOT HKLM
!define MUI_STARTMENUPAGE_REGISTRY_KEY ${REGKEY}
!define MUI_STARTMENUPAGE_REGISTRY_VALUENAME StartMenuGroup
!define MUI_STARTMENUPAGE_DEFAULTFOLDER "IREC "

 !insertmacro MUI_STARTMENU_WRITE_BEGIN Application

 CreateDirectory "$SMPROGRAMS\${COMPANYNAME}\$startmenufolder"
 CreateShortCut "$SMPROGRAMS\${COMPANYNAME}\$startmenufolder\$(^Name).lnk" "$INSTDIR\eclipse\iREC.exe" 
 CreateShortcut "$SMPROGRAMS\${COMPANYNAME}\$startmenufolder\Uninstall $(^Name).lnk" "$INSTDIR\uninstall.exe"

    SetOutPath "$INSTDIR\eclipse"
    CreateShortCut "$DESKTOP\$(^Name).lnk" "$INSTDIR\eclipse\iREC.exe" 

    !insertmacro MUI_STARTMENU_WRITE_END

DeleteRegKey HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$registry"
Delete "$SMPROGRAMS\${COMPANYNAME}\$startmenufolder\Uninstall $(^Name).lnk"
Delete  "$SMPROGRAMS\${COMPANYNAME}\$startmenufolder\$(^Name).lnk" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:08:00.657

你试过使用[SetShellVarContext](http://nsis.sourceforge.net/Reference/SetShellVarContext)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:01:39.797

*   您是否使用[MUI_STARTMENU_GETFOLDER](http://nsis.sourceforge.net/Examples/Modern%20UI/StartMenu.nsi)在卸载程序中初始化 $startmenufolder？

*   您`RequestExecutionLevel`的脚本中是否有[避免愚蠢的兼容性内容](http://nsis.sourceforge.net/Shortcuts_removal_fails_on_Windows_Vista)？

# javascript - 在 node.js 中生成受密码保护的 ZIP 文件

> ID：14829782
> 
> 赞同：14
> 
> 时间：2013-02-12T09:57:18.927
> 
> 标签：javascript, node.js, zip, password-protection

我需要在 node.js 中创建一个受密码保护的 ZIP 文件。

我正在使用“node-zip”模块，不幸的是它不支持密码保护：

```
var zip = new require('node-zip')();
zip.file('test.file', 'hello there');
var data = zip.generate({base64:false,compression:'DEFLATE'}); 
```

寻找其他节点模块来创建 ZIP 文件，我还没有找到任何支持密码保护的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T11:05:07.817

如果您在 linux 上工作，那么您可以借助 zip（大多数 linux 发行版中的命令行实用程序）来完成。只需在您的应用程序中包含以下内容。

```
spawn = require('child_process').spawn;
zip = spawn('zip',['-P', 'password' , 'archive.zip', 'complete path to archive file']);
zip .on('exit', function(code) {
...// Do something with zipfile archive.zip
...// which will be in same location as file/folder given
}); 
```

如果要压缩文件夹，只需在文件夹路径而不是文件路径之前放置另一个参数“-r”。

请记住，这会从主进程产生单独的线程，因此它是非阻塞的。有关`child_process`查看这里的更多信息[http://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-12-14T20:02:20.717

对于像我一样在这里结束的任何人，我在节点中尝试了几个包，但最终使用了这个：[https ://www.npmjs.com/package/minizip-asm.js](https://www.npmjs.com/package/minizip-asm.js)

它支持密码（使用 AES）并且非常易于使用。我很惊讶它没有那么多下载，因为它是我发现的唯一一个支持密码的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-03-10T12:21:23.987

我有同样的问题，找不到包来做，所以我自己写了一个，作为[归档](https://www.npmjs.com/package/archiver)包的插件。纯 JS，无需外部 zip 软件。

这是 - [https://www.npmjs.com/package/archiver-zip-encrypted](https://www.npmjs.com/package/archiver-zip-encrypted)。支持 WinZip 的传统 Zip 2.0 加密和 AES-256 加密。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:19:13.483

我正在使用的解决方案（我没有更好的方法）是：

```
var contenido1 = 'contenido super secreto';
var contenido2 = 'otro contenido';
var password = 'pass';
var nombreFichero = 'fichero'

var nodezip = new require('node-zip')();
var fs = require("fs");
nodezip.file('test1.txt', contenido1);
nodezip.file('test2.txt', contenido2);
var data = nodezip.generate({base64:false,compression:'DEFLATE'});
fs.writeFile(nombreFichero + '.zip', data, 'binary');

var exec = require('child_process').exec,
    child;

child = exec('unzip ' + nombreFichero + '.zip -d ' + nombreFichero +
             ' && zip -junk-paths --password ' + password + ' ' + nombreFichero + '-p.zip ' + nombreFichero + '/*' +
             ' && rm -rf ' + nombreFichero + ' && rm -f ' + nombreFichero + '.zip',
  function (error, stdout, stderr) {
    console.log('stdout: ' + stdout);
    console.log('stderr: ' + stderr);
    if (error !== null) {
      console.log('exec error: ' + error);
    }
}); 
```

它会生成一个临时 zip 文件（无密码），然后使用几个命令，upzip、带密码的 zip 和删除临时文件。

# r - 如何拆分 data.frame 列表并将函数应用于一列？

> ID：14829784
> 
> 赞同：5
> 
> 时间：2013-02-12T09:57:30.220
> 
> 标签：r, list, dataframe, lapply

我有一个关于应用函数的小问题。例如我有：

```
l <- list(a = data.frame(A1=rep(10,5),B1=c(1,1,1,2,2),C1=c(5,10,20,7,30)),
          b = data.frame(A1=rep(20,5),B1=c(3,3,4,4,4),C1=c(3,5,10,20,30))) 
```

我想为每个 B1 找到一个最小 C1。结果应该是

```
$a
  A1 B1 C1
  10  1  5
  10  2  7

$b
  A1 B1 C1
  20  3  3
  20  4  10 
```

我知道如何使用“for”来做到这一点，但使用“lapply”必须是一种更简单的方法，但我无法让它发挥作用。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:00:39.020

`lapply`结合and怎么样`tapply`：

```
lapply(l, function(i) tapply(i$C1, i$B1, min))
$a
1 2 
5 7 

$b
3  4 
3 10 
```

* * *

考虑多个操作的技巧是将任务拆分为位。所以，

1.  每个. `C1`_ `B1`我们如何为**单个**数据框执行此操作？

    ```
    i = l[[1]]
    tapply(i$C1, i$B1, min) 
    ```

2.  列表的每个元素？只需使用`lapply`：

    ```
    lapply(l, function(i) tapply(i$C1, i$B1, min)) 
    ```

如果您无法执行第 1 步，您将无法管理第 2 步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T23:44:00.247

最近屈服于`data.table`软件包的警报歌曲及其多功能性和速度的组合来执行此类操作，我提交了另一个解决方案：

```
library(data.table)
lapply(l, function(dat) {
    data.table(dat, key="B1,C1")[list(unique(B1)), mult="first"]
}) 
```

如果保留原始列顺序很重要，由于某种原因，`data.table()`调用可以用`setcolorder(..., names(dat))`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T12:15:40.590

这是另一种与您所需的输出相匹配的方法：

```
lapply(l, function(x) {
  temp <- ave(x[["C1"]], x["B1"], FUN = min)
  x[x[["C1"]] == temp, ]
})
# $a
#   A1 B1 C1
# 1 10  1  5
# 4 10  2  7
# 
# $b
#   A1 B1 C1
# 1 20  3  3
# 3 20  4 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T22:09:18.757

您也可以从 plyr/reshape2 工具箱尝试 llply + dcast：

```
library(reshape2)
library(plyr)

    l <- list(a = data.frame(A1=rep(10,5),B1=c(1,1,1,2,2),C1=c(5,10,20,7,30)),
              b = data.frame(A1=rep(20,5),B1=c(3,3,4,4,4),C1=c(3,5,10,20,30)))

    llply(l, function (x) {dcast (x, A1+B1~., value.var="C1", min)}) 
```

# machine-learning - 为什么使用函数的导数而不是实际函数来计算局部最小值？

> ID：14829785
> 
> 赞同：3
> 
> 时间：2013-02-12T09:57:35.210
> 
> 标签：machine-learning, linear-regression, derivative, differentiation, gradient-descent

在机器学习回归问题中，为什么要为导函数而不是实际函数计算局部最小值？

示例：[http ://en.wikipedia.org/wiki/Gradient_descent](http://en.wikipedia.org/wiki/Gradient_descent)

梯度下降算法用于寻找函数$$的局部最小值

```
f(x)=x^4−3x^3+2, ----(A) 
```

带导数

```
f'(x)=4x^3−9x^2\. ----(B) 
```

在这里，为了使用函数 (A) 的梯度下降算法找到局部最小值，他们使用了 (A) 的导数函数，即函数 (B)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:11:13.657

原因是因为函数是凹的（如果你正在做最大化，或者是凸的——这些问题是等价的），你知道有一个最小值（最大值）。这意味着存在一个梯度为零的点。有一些使用函数本身的技术，但是如果您可以计算梯度，则可以更快地收敛，因为您可以考虑梯度为您提供有关离最优值有*多远的信息。*

除了梯度下降，还有一种称为[牛顿法](http://en.wikipedia.org/wiki/Newton%27s_method_in_optimization)的优化方法，它需要计算二阶导数（多变量优化中的 Hessian）。这收敛得更快，但需要你能够反转 Hessian，如果你有很多参数，这是不可行的。所以有一些方法可以解决这个问题，计算[Hessian 的有限内存近似值](http://en.wikipedia.org/wiki/Limited-memory_BFGS)。这些方法收敛得更快，因为它们使用的是关于梯度曲率的信息：这是一个简单的权衡，您对要优化的函数了解得越多，找到解决方案的速度就越快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:21:56.800

我不是数学家 - 所以我不能给你确切的答案，但是，你需要了解推导的作用，例如：

[http://en.wikipedia.org/wiki/Derivative](http://en.wikipedia.org/wiki/Derivative) [http://en.wikipedia.org/wiki/Differential_of_a_function](http://en.wikipedia.org/wiki/Differential_of_a_function)

这就是你所需要的（区分做什么）： [http ://en.wikipedia.org/wiki/File:Graph_of_sliding_derivative_line.gif](http://en.wikipedia.org/wiki/File:Graph_of_sliding_derivative_line.gif)

*某点的导数等于该点函数图形的切线斜率。*这正是您在寻找血统时想要的。把它当作非常非正式的观点，维基百科的文章会给你更深入和准确的知识......

# excel - Excel宏创建文件并打开它

> ID：14829787
> 
> 赞同：-1
> 
> 时间：2013-02-12T09:57:42.040
> 
> 标签：excel, vba, remedy

我在一列中有补救票号（例如，HD0000001006530）。

我必须在每个引用自身的单元格上创建一个超链接。单击超链接将运行宏。

宏必须创建一个 .artask 类型的文件，其内容如下所示并打开它。打开 .artask 文件将打开故障单 HD0000001006530 以进行补救。

* * *

[快捷方式]
Name = HPD: HelpDesk
Type = 0
Server =remediateprd
Ticket = **HD0000001006530** <--- 这个值将来自 excel 单元格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:37:38.020

在启用宏的 Excel 文件中，将此代码复制到选定的“工作表”代码窗格。

```
 Private Function Createfile(ByVal cellvalue As String)
            Open "c:\" & cellvalue & ".artask" For Output As #1 'your target file name and address. you may change it to the desired folder
            Print #1, "[Shortcut]"
            Print #1, "Name = HPD: HelpDesk"
            Print #1, "Type = 0"
            Print #1, "Server = remedyprd"
            Print #1, "Ticket =" & cellvalue
            Close #1
           End Function

 'EDIT BEGINS:

Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Column = 1 Then
Dim cell As Range
 If Dir("C:\" & cellvalue & ".artask") = "" Then 'For memory optimization we should first check if the file exists or not

For Each cell In Range("A1:A" & Me.UsedRange.Rows.Count) 'Specify the Range, in that case it is from A1 to end of the column A
   cell.Select
  ActiveSheet.Hyperlinks.Add Anchor:=Selection, Address:="c:\" & Selection.Text & ".artask", TextToDisplay:=Selection.Text

    Next cell 'Loop through cells

            Createfile (Selection.Value)
        End If
          End If

      End Sub
    'EDIT ENDS 
```

如果您有任何问题，请告诉我。

# django - 'function'对象在Django中没有属性'user'错误？

> ID：14829788
> 
> 赞同：0
> 
> 时间：2013-02-12T09:57:54.447
> 
> 标签：django, django-authentication

我在使用时收到此错误： `@login_required('/login_backend/')`在我看来。

我正在使用 Django 1.5。我的用户模型是：

```
class User(AbstractBaseUser):
    #id = models.IntegerField(primary_key=True)
    #identifier = models.CharField(max_length=40, unique=True, db_index=True)
    username = models.CharField(max_length=90, unique=True, db_index=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=225)
    #password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    #last_login = models.DateTimeField()

    objects = UserManager()
    USERNAME_FIELD = 'email'
    class Meta:
        db_table = u'galaxy_user' 
```

如何解决这个问题？

**编辑：**我的视图代码：

```
def login_backend(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None:
            login(request, user)
            return HttpResponseRedirect('/overview/')
        else:
            return HttpResponseRedirect('/login_backend/')
    else:
        return render_to_response('login_backend.html', context_instance=RequestContext(request))

@login_required('/login_backend/')
def logout_view(request):
    logout(request)
    return HttpResponseRedirect('/login_backend/')

@login_required('/login_backend/')
def show_files(request):
    try:
        log_id = request.user.id
        username = request.user.username
        b = File.objects.filter(users_id=log_id, flag='F', flag_r='S')  # Get the user id from session .delete() to use delete
        total_files = File.objects.filter(users_id=log_id, flag='F').count()
        total_size = File.objects.filter(users_id=log_id, flag='F').aggregate(Sum('size_overview'))
        total_size = total_size['size_overview__sum']
        total_size = size(total_size, system=alternative)
        return render_to_response('overview.html', {'overview_files': b, 'total_files':total_files, 'total_size':total_size, 'username': username}, context_instance=RequestContext(request))
    except TypeError:
        return render_to_response('overview.html', {'overview_files': b, 'total_files':total_files, 'total_size':total_size, 'username': username}, context_instance=RequestContext(request)) 
```

**追溯：**

```
Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  103\.                     resolver_match = resolver.resolve(request.path_info)
File "/usr/local/lib/python2.6/dist-packages/django/core/urlresolvers.py" in resolve
  321\.                     sub_match = pattern.resolve(new_path)
File "/usr/local/lib/python2.6/dist-packages/django/core/urlresolvers.py" in resolve
  223\.             return ResolverMatch(self.callback, args, kwargs, self.name)
File "/usr/local/lib/python2.6/dist-packages/django/core/urlresolvers.py" in callback
  230\.         self._callback = get_callable(self._callback_str)
File "/usr/local/lib/python2.6/dist-packages/django/utils/functional.py" in wrapper
  29\.         result = func(*args)
File "/usr/local/lib/python2.6/dist-packages/django/core/urlresolvers.py" in get_callable
  97\.             mod = import_module(mod_name)
File "/usr/local/lib/python2.6/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/zurelsoft/workspace/genalytics/fileupload/backend.py" in <module>
  37\. @login_required('/login_backend/')
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
  24\.             if test_func(request.user):

Exception Type: AttributeError at /login_backend/
Exception Value: 'function' object has no attribute 'user' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:18:30.710

The issue seems to be incorrect use of the `login_required` decorator. According to [the documentation](https://docs.djangoproject.com/en/1.5/topics/auth/default/#the-login-required-decorator), the decorator takes two optional keyword arguments, `redirect_field_name` and `login_url`. Emphasis on the expression *keyword arguments*.

I'm not entirely sure what it is you want to achieve with the `'/login_backend/'` argument to the decorator, but if you pass it directly as the first argument, the decorator takes this as the function you want to decorate and bad stuff happens.

To fix (and this is only a guess on my part), try

```
@login_required(login_url='/login_backend/') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-16T18:38:29.497

您可以尝试的另一件事是将以下行添加到 settings.py 的底部

```
LOGIN_URL='/login_backend/' 
```

这应该允许您使用装饰器，而无需像下面的示例那样指定登录参数。

```
@login_required
def logout_view(request):
    logout(request)
    return HttpResponseRedirect('/login_backend/') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T09:51:30.530

```
from django.utils.decorators import method_decorator

@method_decorator(login_required(login_url='/login/'))
def startPage(request):
    ....
    .... 
```

这可能有助于干杯。

# image - 从 markdown 到 docx 的 pandoc 转换的图形大小

> ID：14829791
> 
> 赞同：20
> 
> 时间：2013-02-12T09:57:59.797
> 
> 标签：image, markdown, docx, knitr, pandoc

我在 Rstudio 中使用 Rmarkdown 键入报告。用knitr转换进去的时候`html`，还有一个`markdown`由knitr生成的文件。我将此文件转换`pandoc`如下：

```
pandoc -f markdown -t docx input.md -o output.docx 
```

该`output.docx`文件很好，除了一个问题：图形的大小发生了变化，我需要在 Word 中手动调整图形的大小。有什么事情要做，也许是一个选项`pandoc`，以获得正确的数字大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-13T22:19:14.220

`k`一种简单的方法是在各个块选项中包含比例因子：

```
{r, fig.width=8*k, fig.height=6*k} 
```

`dpi`和全局块选项中的一个变量：

```
opts_chunk$set(dpi = dpi) 
```

然后您可以在全局环境中设置编织文件之前`dpi`和之前的值：`k``Rmd`

```
dpi <<- 96    
k <<- 1 
```

或者您可以将它们设置在`Rmd`文件中的一个块中（例如设置`k`在第一个块中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-10T19:26:06.903

这是使用R 脚本中的[ImageMagick](http://www.imagemagick.org/script/index.php)调整图形大小的解决方案。70%的比例似乎是个不错的选择。

```
# the path containing the Rmd file :
wd <- "..."
setwd(wd)

# the folder containing the figures :
fig.path <- paste0(wd, "/figure")
# all png figures :
figures <- list.files(fig.path, pattern=".png", all.files=TRUE)

# (safety) create copies of the original files
dir.create(paste0(fig.path,"_copy"))
for(i in 1:length(figures)){
  fig <- paste0(fig.path, "/", figures[i])
  file.copy(fig,"figure_copy")
}

# resize all figures
for(i in 1:length(figures)){
    fig <- paste0(fig.path, "/", figures[i])
    comm <- paste("convert -resize 70%", fig, fig)
    shell(comm)
}

# then run pandoc from a command line  
# or from the pandoc() function :
library(knitr)
pandoc("MyReport.md", "docx") 
```

`resize`有关ImageMagick 功能的更多信息： [www.perturb.org](http://www.perturb.org/display/632_ImageMagick_resize_images.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T22:44:31.750

我还想将 R markdown 转换为 html 和 .docx/.odt ，其中的数字具有良好的尺寸和分辨率。到目前为止，我发现最好的方法是在 .md 文档中明确定义图形的分辨率和大小（dpi、fig.width 和 fig.height 选项）。如果你这样做，你就有很好的可用于发布的图表，并且 odt/docx 是可以的。如果您使用远高于默认 72 dpi 的 dpi，问题是图形在 html 文件中看起来太大。以下是我用来处理此问题的 3 种方法（注意，我使用带有 spin() 语法的 R 脚本）：

1) 在 knitr 选项中使用 out.extra ='WIDTH="75%"'。这将强制 html 的所有图形占据窗口宽度的 75%。这是一个快速的解决方案，但如果您的地块大小非常不同，则不是最佳解决方案。（注意，我更喜欢使用厘米而不是英寸，因此 /2.54 无处不在）

```
library(knitr)
opts_chunk$set(echo = FALSE, dev = c("png", "pdf"), dpi = 400,
               fig.width = 8/2.54, fig.height = 8/2.54,
               out.extra ='WIDTH="75%"'
)

data(iris)

#' # Iris datatset
summary(iris)
boxplot(iris[,1:4])

#+ fig.width=14/2.54, fig.height=10/2.54
par(mar = c(2,2,2,2))
pairs(iris[,-5]) 
```

2) 使用 out.width 和 out.height 指定图形在 html 文件中的大小（以像素为单位）。我使用常量“sc”将绘图的大小缩小为 html 输出。这是更精确的方法，但问题是对于每个图形，您必须同时定义 fig.witdth/height 和 out.width/height ，这真的很无聊！理想情况下，您应该能够在全局选项中指定例如 out.width = 150*fig.width （其中 fig.width 从一个块更改为另一个块）。也许这样的事情是可能的，但我不知道如何。

```
#+ echo = FALSE
library(knitr)
sc <- 150
opts_chunk$set(echo = FALSE, dev = c("png", "pdf"), dpi = 400,
                fig.width = 8/2.54, fig.height = 8/2.54,
                out.width = sc*8/2.54, out.height = sc*8/2.54
)

data(iris)

#' # Iris datatset
summary(iris)
boxplot(iris[,1:4])

#+ fig.width=14/2.54, fig.height=10/2.54, out.width= sc * 14/2.54, out.height= sc * 10/2.54
par(mar = c(2,2,2,2))
pairs(iris[,-5]) 
```

请注意，对于这两种解决方案，我认为您无法使用 pandoc 将您的 md 文件直接转换为 odt （不包括数字）。我将 md 转换为 html，然后将 html 转换为 odt（没有尝试过 docx）。类似的东西（如果以前的 R 脚本名称为“figsize1.R”）：

```
library(knitr)
setwd("/home/gilles/")
spin("figsize1.R")

system("pandoc figsize1.md -o figsize1.html")
system("pandoc figsize1.html -o figsize1.odt") 
```

3) 只需编译您的文档两次，一次使用低 dpi 值 (~96) 用于 html 输出，一次使用高分辨率 (~300) 用于 odt/docx 输出。这是我现在首选的方式。主要缺点是您必须编译两次，但这对我来说并不是问题，因为我通常只在工作结束时才需要 odt 文件来提供给最终用户。我在工作期间使用 Rstudio 中的 html 笔记本按钮定期编译 html。

```
#+ echo = FALSE
library(knitr)

opts_chunk$set(echo = FALSE, dev = c("png", "pdf"), 
               fig.width = 8/2.54, fig.height = 8/2.54
)

data(iris)

#' # Iris datatset
summary(iris)
boxplot(iris[,1:4])

#+ fig.width=14/2.54, fig.height=10/2.54
par(mar = c(2,2,2,2))
pairs(iris[,-5]) 
```

然后使用以下脚本编译 2 个输出（注意这里您可以直接将 md 文件转换为 html）：

```
library(knitr)
setwd("/home/gilles")

opts_chunk$set(dpi=96)
spin("figsize3.R", knit=FALSE)
knit2html("figsize3.Rmd")

opts_chunk$set(dpi=400)
spin("figsize3.R")
system("pandoc figsize3.md -o figsize3.odt") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-20T01:48:59.943

这是我的解决方案：破解由 Pandoc 转换的 docx，因为 docx 只是一组 xml 文件，调整图形大小非常简单。

`word/document.xml`以下是从转换后的 docx 中提取的图形的样子：

```
<w:p>
  <w:r>
    <w:drawing>
      <wp:inline>
        <wp:extent cx="1524000" cy="1524000" />
        ...
        <a:graphic>
          <a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture">
            <pic:pic>
              ...
              <pic:blipFill>
                <a:blip r:embed="rId23" />
                ...
              </pic:blipFill>
              <pic:spPr bwMode="auto">
                <a:xfrm>
                  <a:off x="0" y="0" />
                  <a:ext cx="1524000" cy="1524000" />
                </a:xfrm>
                ...
              </pic:spPr>
            </pic:pic>
          </a:graphicData>
        </a:graphic>
      </wp:inline>
    </w:drawing>
  </w:r>
</w:p> 
```

因此，用所需值替换节点&的`cx`&属性将完成调整大小的工作。以下 R 代码适用于我。最宽的图形将占据变量指定的整行宽度，其余的则按比例调整大小。`cy``wp:extent``a:ext``out.width`

```
require(XML)

## default linewidth (inch) for Word 2003
out.width <- 5.77
docx.file <- "report.docx"

## unzip the docx converted by Pandoc
system(paste("unzip", docx.file, "-d temp_dir"))
document.xml <- "temp_dir/word/document.xml"
doc <- xmlParse(document.xml)
wp.extent <- getNodeSet(xmlRoot(doc), "//wp:extent")
a.blip <- getNodeSet(xmlRoot(doc), "//a:blip")
a.ext <- getNodeSet(xmlRoot(doc), "//a:ext")

figid <- sapply(a.blip, xmlGetAttr, "r:embed")
figname <- dir("temp_dir/word/media/")
stopifnot(length(figid) == length(figname))
pdffig <- paste("temp_dir/word/media/",
                ## in case figure ids in docx are not in dir'ed order
                sort(figname)[match(figid, substr(figname, 1, nchar(figname) - 4))], sep="")

## get dimension info of included pdf figures
pdfsize <- do.call(rbind, lapply(pdffig, function (x) {
    fig.ext <- substr(x, nchar(x) - 2, nchar(x))
    pp <- pipe(paste(ifelse(fig.ext == 'pdf', "pdfinfo", "file"), x, sep=" "))
    pdfinfo <- readLines(pp); close(pp)
    sizestr <- unlist(regmatches(pdfinfo, gregexpr("[[:digit:].]+ X [[:digit:].]+", pdfinfo, ignore.case=T)))
    as.numeric(strsplit(sizestr, split=" x ")[[1]])
}))

## resizing pdf figures in xml DOM, with the widest figure taking up a line's width
wp.cx <- round(out.width*914400*pdfsize[,1]/max(pdfsize[,1]))
wp.cy <- round(wp.cx*pdfsize[, 2]/pdfsize[, 1])
wp.cx <- as.character(wp.cx)
wp.cy <- as.character(wp.cy)
sapply(1:length(wp.extent), function (i)
       xmlAttrs(wp.extent[[i]]) <- c(cx = wp.cx[i], cy = wp.cy[i]));
sapply(1:length(a.ext), function (i)
       xmlAttrs(a.ext[[i]]) <- c(cx = wp.cx[i], cy = wp.cy[i]));

## save hacked xml back to docx
saveXML(doc, document.xml, indent = F)
setwd("temp_dir")
system(paste("zip -r ../", docx.file, " *", sep=""))
setwd("..")
system("rm -fr temp_dir") 
```

# android - 打开另一个活动时显示不确定的进度条

> ID：14829793
> 
> 赞同：0
> 
> 时间：2013-02-12T09:58:05.783
> 
> 标签：android, actionbarsherlock, android-progressbar

我有两个布局，布局 A 和布局 B。单击布局 A 上有一个按钮，它应该带我到布局 B，但是在带我到布局 B 时，我希望它显示操作栏不确定的进度条，之后它在活动完全加载时显示，我会喜欢一个例子，谢谢你

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

    setContentView(R.layout.lyrics);

    getSherlock().setProgressBarIndeterminateVisibility(true);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:06:43.220

我的建议是您加载活动 B，然后加载不确定的进度条，因为 Asycntask 正在检索要呈现的活动的数据。但是，如果您开始做您想做的事情，那么这段代码应该可以帮助您：

```
 findViewById(R.id.button).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            setSupportProgressBarIndeterminateVisibility(false);
        }
    }); 
```

有关更多信息，请查看[ActionBarSherlock](http://actionbarsherlock.com/samples.html)网站上的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:04:05.117

如果你使用 SherlockActionbar 非常容易

1.  从这里下载

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

1.  导入到项目
2.  将 extend Activity 更改为 SherlockActivity ，至于 Fragment 扩展 SherlockFragmentActivity

3.  调用 setSupportProgressBarIndeterminateVisibility(visible);

# java - Java 控制台循环

> ID：14829794
> 
> 赞同：4
> 
> 时间：2013-02-12T09:58:06.573
> 
> 标签：java, joptionpane

注意到这里还没有人回答这个问题，所以我想我会再试一次。希望有人可以提供帮助。已经去找我的 Java 老师了，他只是说我搞砸了一些事情，无法弄清楚，所以我无法继续前进。

任何人，这是我的测试代码：

```
import javax.swing.JOptionPane;

public class Test {

    public static void main(String[] args) {
        System.out.println("hello");
        JOptionPane.showInputDialog("Enter a real number");
    }
} 
```

这就是我在控制台中收到的：

```
hello 
```

`03:30.28 1[dbg] In DllGetClassObject`
`03:30.28 2[dbg] CShellExtClassFactory::CShellExtClassFactory()`
`03:30.28 3[dbg] CShellExtClassFactory::QueryInterface()`
`03:30.28 4[dbg] CShellExtClassFactory::CreateInstance()`
`03:30.28 5[dbg] CShellExt::CShellExt()`
`03:30.28 6[dbg] Looping before Zumo is running`
`03:30.28 7[dbg] CShellExt::QueryInterface()==>IID_IShellIconOverlayIdentifier`
`03:30.28 8[dbg] CShellExt::AddRef()`
`03:30.28 9[dbg] CShellExt::AddRef()`
`03:30.28 10[dbg] CShellExt::Release()`
`03:30.28 11[dbg] CShellExt::QueryInterface()==>IID_IShellIconOverlayIdentifier`
`03:30.28 12[dbg] CShellExt::AddRef()`
`03:30.28 13[dbg] CShellExt::Release()`
`03:30.28 14[dbg] Entering CShellExt::GetOverlayInfo`
`03:30.28 15[dbg] Icon path: C:\Program Files (x86)\Hewlett-Packard\HP CloudDrive\icons\deflated.ico`
`03:30.28 16[dbg] Exiting CShellExt::GetOverlayInfo successfully.`

任何帮助将不胜感激。我已经尝试重新安装所有我能安装的东西，包括 eclipse 和 JDK 1.7。我还注意到，到目前为止，只有当我尝试使用对话框 JOptionPane 时才会发生这种情况。我使用的是windows 7系统。

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:07:14.523

只是一个猜测，因为我在其他系统上遇到了奇怪的 AWT/Swing 问题，你可以在这里试试这个（有时底层 UI 系统没有正确初始化，但正如我所说，这只是一个猜测）：

```
public class Test 
{
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                System.out.println("hello");
                JOptionPane.showInputDialog("Enter a real number");
            }
        });
    }
} 
```

通过使用`invokeLater`您强制整个 UI 系统进行初始化（要启动 EDT 并从 EDT 内部显示选项窗格），我不得不使用这个技巧，例如让我在 OSX 下的 SDL 绑定工作。`invokeLater`为我初始化整个 Cocoa 系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T12:01:39.833

`JTextField`当我在我的程序中有一个或`JTextArea`显示时，这也发生在我身上。它仅在 Java 7 或更高版本上编译和运行时发生，而不是在 Java 6 上。

我不知道为什么会这样，但是卸载 HP CloudDrive（预装在我的 HP 笔记本电脑上的一个程序）后，所有这些行都停止了显示。

# android - 如何通过更改 EditText 中的值来更改搜索栏进度位置？

> ID：14829801
> 
> 赞同：1
> 
> 时间：2013-02-12T09:58:37.537
> 
> 标签：android, seekbar

```
 I want to change the seekbar progress position by changing the value in EditText dynamically. please help me out from this issue .

         <EditText  
                android:id="@+id/editText1"   
                android:layout_width="120dp"   
                android:layout_height="wrap_content" />    

     <SeekBar  
     android:id="@+id/seekBar1"  
     android:layout_width="match_parent"  
     android:layout_height="wrap_content"    
     android:max="4990000"    
     android:progress="10"  /> 
```

这是java代码

```
 seekbar1 = (SeekBar) findViewById(R.id.seekBar1);
    seekbar1.setProgress(30);
    seekbar1.setOnSeekBarChangeListener( new OnSeekBarChangeListener()
    {
        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
        {
            spinnervalue=(EditText)findViewById(R.id.editText1);

                spinnervalue.setText(""+Integer.toString(progress));

            //  Notify that the progress level has changed.  

            if(txtAmount.getText().length() > 0
                    && txtYears.getText().length() > 0
                    && txtRate.getText().length() > 0)
            {
                calculate();
            }

        }

    }); 
```

因此，通过根据输入的值更改编辑文本中的值，必须将搜索栏移动到特定值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:16:16.013

试一试 。`setProgress(Value)`_ `SeekBar`它应该在您的 Seekbar 支持的值范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:34:45.890

我认为您对此有两种解决方案：

1.  在表单上创建一个按钮并`android:onClick`为此使用 in xml。在它的事件中，您可以使用设置 Seekbar 的进度`seekbar1.setProgress(progress);`。
2.  添加一个 Timer 并定期查看值是否已更改：

    定时器 timer = new Timer();

    > ```
    >  timer.schedule(new TimerTask() {
    >       @Override
    >       public void run() {
    >           runOnUiThread(new Runnable() {
    >               @Override
    >               public void run() {
    >                   seekbar1.setProgress(progress);
    >               }
    >           }
    >       }
    >     }, 1000, 1000); 
    > ```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:21:36.187

关于你的情况，我已经了解了很多。您在 EditText 中有 1 `EditText`& 1 `SeekBar`& on 文本更改要设置 SeekBar 当前选定位置。

因此，要实现这一点，您需要使用`onTextChangedListener`on`EditText`并在其中执行以下操作。

首先定义 `spinnervalue=(EditText)findViewById(R.id.editText1); spinnervalue.setOnTextChangeListener(this)`在`onCreate()`

现在使用以下代码`onTextChanged`

```
String value = spinnervalue.getText().toString();
try{
    int progress = Integer.parseInt(value);
    if (progress >= 0 && progress <= 100)
        {
          Log.e("", "Value set:" + progress);
          seekbar1.setProgress(progress);
        }
    }
    catch(Exception e)
    {
        Log.e("", "Value set:" + value);
        e.printStackTrace();
    }    
} 
```

还将以下代码添加到布局中的**seekbar-tag**

```
android:max="100" 
```

希望我可以理解。

谢谢。

# google-chrome-extension - 使用 chrome devtools 扩展突出显示节点

> ID：14829804
> 
> 赞同：7
> 
> 时间：2013-02-12T09:58:42.987
> 
> 标签：google-chrome-extension, google-chrome-devtools

我想以与元素检查器（在开发工具中）相同的方式突出显示我的 chrome dev-tools 扩展中的 dom 元素。有一些特殊的API吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-15T14:49:03.183

每当您使用 DevTools 控制台评估检查页面中的某些代码时，DevTools 都会公开一堆称为[命令行 API](https://developers.google.com/chrome-developer-tools/docs/commandline-api)的帮助程序调用。此 API 包括 inspect() 调用，其效果与用户从上下文菜单调用“检查元素”具有相同的效果，即调出元素面板并突出显示节点。使用 chrome.devtools.inspectedWindow.eval() 由 DevTools 扩展程序评估的代码可以使用 inspect() 调用以及其他命令行 API，因此您可以执行以下操作：

```
chrome.devtools.inspectedWindow.eval("inspect(document.body)"); 
```

如果您只想在被检查的页面侧突出显示，而不在 Elements 面板上发生任何事情（即，当您将鼠标悬停在页面上时，通过 Elements 面板中的窥镜打开了 DOM 搜索模式），您必须实现这是你自己的，因为目前没有 API。我建议只使用内容脚本向元素添加自定义样式。

# r - 将 RStudio 中的默认编辑器更改为记事本++

> ID：14829810
> 
> 赞同：6
> 
> 时间：2013-02-12T09:58:56.210
> 
> 标签：r, notepad++, rstudio

我想将 RStudio（Windows 7）中的默认编辑器更改为记事本++。

我知道我应该使用

```
options(editor = "notepad") 
```

然后运行，例如：

```
mean <- edit(mean) 
```

但是当我输入记事本++时，我收到了这个错误

```
options(editor = "notepad++")
mean <- edit(mean)
Error in edit(name, file, title, editor) : 
  unable to run editor 'notepad++' 
```

在 Windows 中，我可以通过键入“start notepad++”在控制台中运行 notepad++。

我将非常感谢您的帮助！

这是我的会话信息：

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Polish_Poland.1250  LC_CTYPE=Polish_Poland.1250    LC_MONETARY=Polish_Poland.1250
[4] LC_NUMERIC=C                   LC_TIME=Polish_Poland.1250    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T10:12:45.370

好的，这真的很简单：

```
options(editor = "C:/Program Files (x86)/Notepad++/notepad++.exe") 
```

对不起这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-13T06:15:35.557

# php - php如何限制进入进程的数量

> ID：14829812
> 
> 赞同：2
> 
> 时间：2013-02-12T09:59:08.157
> 
> 标签：php, memory, process, resources, limit

我有 php 网站。我不断收到超过 508 资源限制的错误，所以我想知道如何优化我的网站来应对它？

例如，我如何可以减少脚本执行的进入进程的数量？

我已经优化了我的 sql 查询并简化了代码，但它似乎更糟。

将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:05:53.820

当一个帐户超过分配给它的资源 - CPU 使用率、RAM 使用率或在 cPanel 帐户下运行的并发进程数时，会出现“508 Resource Limit Is Reached”错误消息。

您可以在 cPanel 中的日志 - 资源 - 详细信息下查看超出这些限制的历史记录。

有几个原因可能涉及： - 正常流量。如果您的站点在正常流量中遇到高峰，它可能会超出分配的资源。如果这种情况经常发生，我们建议考虑升级到没有此类限制的虚拟专用服务器

*   代码中的问题。如果您网站上的某些页面在开发过程中引入了速度问题，则相对少量的并发页面请求可能会使网站超出其资源限制

*   后端操作 - 要求苛刻的后端操作（例如导入和导出）会产生大量负载，除了正常流量外，还会导致超出资源限制。

*   网络爬虫每秒发出大量请求。您可以在 Google 网站管理员工具中调整例如 Google 请求页面的速率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:27:28.467

尝试使用更好的资源升级您的服务器/帐户。

# iphone - 如何在 iOS 中同时播放两个音频文件

> ID：14829814
> 
> 赞同：1
> 
> 时间：2013-02-12T09:59:15.603
> 
> 标签：iphone

我正在开发一个带有声音文件的应用程序。在此应用程序中，有一个滑块实现。在滑块比率的基础上，所有文件都将被处理以设置音量。但是有了这个音量效果，就会有两组不同文件的声音组合，假设有 A 和 B 的声音集。

将有 75% 的 A 文件和 25% 的 B 文件的组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:15:20.557

您可以通过简单的方式实现它，依次启动 2 个 avaudioplayer，它们将一起播放：

```
{
...
    NSString *songA = [[NSBundle mainBundle] pathForResource:@"songA" ofType:@"mp3"];
    NSError *soundError = nil;
    self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:songA] error:&soundError];
    if(self.player == nil)
        NSLog(@"%@",soundError);
    else
    {
        [self.player setDelegate:self];
        [self.player setVolume:0.75];
        [self.player play];
    }

    NSString *songB = [[NSBundle mainBundle] pathForResource:@"songB" ofType:@"mp3"];
    soundError = nil;
    self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:songB] error:&soundError];
    if(self.player == nil)
        NSLog(@"%@",soundError);
    else
    {
        [self.player setDelegate:self];
        [self.player setVolume:0.25];
        [self.player play];
    }
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:39:48.617

在[Apple 的文档中](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2-SW6)

> **同时播放多个声音**
> 
> 要同时播放多个声音，请为每个声音创建一个播放音频队列对象。对于每个音频队列，使用 AudioQueueEnqueueBufferWithParameters 函数安排音频的第一个缓冲区同时启动。
> 
> 从 iOS 3.0 开始，几乎所有支持的音频格式都可以同时播放——即所有可以使用软件解码播放的音频格式，如表 1-1 中所述。对于处理器效率最高的多重播放，请使用线性 PCM（未压缩）或 IMA4（压缩）音频。

我想你需要调用`Audio Queue`

这是[Audio Queue的参考](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQPlayback/PlayingAudio.html#//apple_ref/doc/uid/TP40005343-CH3-SW1)

要将音量设置为 A 的 75% 和 B 的 25%，您可以使用 OpenAL 来实现此目的。

# database - Django ORM 数据库查询会阻塞服务器，还是异步的？

> ID：14829817
> 
> 赞同：8
> 
> 时间：2013-02-12T09:59:20.770
> 
> 标签：database, django, asynchronous, orm, twisted

我只是想澄清几件事。

我相信 Django 服务器异步工作（因为如果来自客户端的每个请求都会阻塞服务器，那么它就不会工作），但我也知道 Django ORM 不是异步的。那么对数据库的查询会阻塞服务器吗？（我的意思是休息请求正在等待查询完成？）或者它的工作方式完全不同，我误解了它。

我问这个是因为我听说大多数 ORM 都被阻塞了，因此我不能在我的 Twisted 服务器中使用它们来从 db 获取数据而不阻塞扭曲。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T10:03:09.930

为什么服务器需要异步工作？Django 是一个 WSGI 应用程序；并发模型取决于您在其中运行它的服务器，可以是线程、多处理、异步（选择循环驱动）或这些的组合。

每个 Django 请求本身都是*完全同步*的。查询数据库会阻塞请求，直到返回结果。它不需要知道其他并发请求（除了确保 Django 以线程安全的方式处理数据结构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:03:43.497

我一直面临着您似乎遇到的类似问题。我的 django 应用程序对休息服务执行大量调用以呈现视图，这让我很困扰，它们必须被序列化。我开发了这个：

[https://github.com/kowalski/featdjango/](https://github.com/kowalski/featdjango/)

这是一个基于twisted web的应用服务器。与 django-on-twisted 项目不同，它根本不使用 wsgi。Django 代码在线程中运行。他们有一池。Twisted 代码在主应用程序线程中运行并管理池。如果您需要从 Django 代码中进行几次调用，并且可以从同时进行中受益，则需要创建一个方法，该方法返回一个 Deferred（或 DeferredList）。然后，从 django 代码中，您可以通过以下方式调用它：

```
import threading
...

ct = threading.current_thread()
result = ct.wait_for_defer(method_to_call, *args, **kwargs) 
```

这具有使用 reactor.callFromThread() 方法调用 *method_to_call* 并绑定回调以唤醒调用者线程的效果。返回 Deferred 的结果，或者引发异常（以防 errback() 被触发）。

# c# - 重构“程序”WCF 服务

> ID：14829818
> 
> 赞同：21
> 
> 时间：2013-02-12T09:59:21.117
> 
> 标签：c#, wcf, dependency-injection, refactoring, cqrs

我正在尝试将一个可怕的 WCF 服务重构为更易于管理的东西。在撰写本文时，该服务通过构造函数获取了大约 9 个依赖项，这使得单元测试变得非常困难。

该服务通过状态机处理本地状态，对参数进行验证，抛出错误异常，执行实际操作并通过发布/订阅通道触发发布事件。此代码与所有其他服务调用非常相似。

我意识到我可以通过[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)或 WCF 行为以不同的方式做其中的几件事（参数验证、发布/订阅通知），但我的直觉告诉我，一般方法是错误的——这感觉太“程序化” .

我的目标是将实际操作的执行与发布/订阅通知之类的事情分开，甚至可能是错误处理。

我想知道像[DDD](http://en.wikipedia.org/wiki/Domain-driven_design)或[CQRS](http://martinfowler.com/bliki/CQRS.html)或其他技术这样的首字母缩略词是否可以在这里提供帮助？不幸的是，我对定义之外的那些概念不是很熟悉。

这是一个此类 WCF 操作的（简化）示例：

```
public void DoSomething(DoSomethingData data)
{
    if (!_stateMachine.CanFire(MyEvents.StartProcessing))
    {
        throw new FaultException(...);
    }

    if (!ValidateArgument(data))
    {
        throw new FaultException(...);
    }

    var transitionResult =
        _stateMachine.Fire(MyEvents.StartProcessing);

    if (!transitionResult.Accepted)
    {
        throw new FaultException(...);
    }

    try
    {
        // does the actual something
        DoSomethingInternal(data);

        _publicationChannel.StatusUpdate(new Info
        {
            Status = transitionResult.NewState
        });
    }
    catch (FaultException<MyError> faultException)
    {
        if (faultException.Detail.ErrorType == 
            MyErrorTypes.EngineIsOffline)
        {
            TryFireEvent(MyServiceEvent.Error, 
                faultException.Detail);
        }
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-12T12:04:55.797

你所拥有的是一个很好的伪装命令的例子。很高兴您在这里所做的事情是您的服务方法已经接受了一个参数`DoSomethingData`。这*是*你的命令信息。

您在这里缺少的是对命令处理程序的一般抽象：

```
public interface ICommandHandler<TCommand>
{
    void Handle(TCommand command);
} 
```

通过一些重构，您的服务方法将如下所示：

```
// Vanilla dependency.
ICommandHandler<DoSomethingData> doSomethingHandler;

public void DoSomething(DoSomethingData data)
{
    this.doSomethingHandler.Handle(data);
} 
```

当然，您需要一个实现`ICommandHandler<DoSomethingData>`. 在您的情况下，它将如下所示：

```
public class DoSomethingHandler : ICommandHandler<DoSomethingData>
{
    public void Handle(DoSomethingData command)
    {
        // does the actual something
        DoSomethingInternal(command); 
    }
} 
```

现在您可能想知道，您实现的那些横切关注点（例如参数验证、can 触发、发布通道状态更新和错误处理）呢？嗯，是的，它们都是横切关注点，您的 WCF 服务类和您的业务逻辑（the `DoSomethingHandler`）都不应该担心这一点。

有几种方法可以应用面向方面的编程。有些人喜欢使用 PostSharp 之类的代码编织工具。这些工具的缺点是它们使单元测试变得更加困难，因为您将所有横切关注点都编织进去。

第二种方法是使用拦截。使用动态代理生成和一些反射。然而，我更喜欢这种变化，那就是应用装饰器。这样做的好处是，根据我的经验，这是应用横切关注点的最干净的方式。

让我们看一下用于验证的装饰器：

```
public class WcfValidationCommandHandlerDecorator<T> : ICommandHandler<T>
{
    private IValidator<T> validator;
    private ICommandHandler<T> wrapped;

    public ValidationCommandHandlerDecorator(IValidator<T> validator,
        ICommandHandler<T> wrapped)
    {
        this.validator = validator;
        this.wrapped = wrapped;
    }

    public void Handle(T command)
    {
        if (!this.validator.ValidateArgument(command))
        {
            throw new FaultException(...);
        }

        // Command is valid. Let's call the real handler.
        this.wrapped.Handle(command);
    }
} 
```

由于这`WcfValidationCommandHandlerDecorator<T>`是一个泛型类型，我们可以将它包装在每个命令处理程序中。例如：

```
var handler = new WcfValidationCommandHandlerDecorator<DoSomethingData>(
    new DoSomethingHandler(),
    new DoSomethingValidator()); 
```

您可以轻松地创建一个装饰器来处理任何抛出的异常：

```
public class WcfExceptionHandlerCommandHandlerDecorator<T> : ICommandHandler<T>
{
    private ICommandHandler<T> wrapped;

    public ValidationCommandHandlerDecorator(ICommandHandler<T> wrapped)
    {
        this.wrapped = wrapped;
    }

    public void Handle(T command)
    {
        try
        {
            // does the actual something
            this.wrapped.Handle(command);

            _publicationChannel.StatusUpdate(new Info
            { 
                Status = transitionResult.NewState 
            });
        }
        catch (FaultException<MyError> faultException)
        {
            if (faultException.Detail.ErrorType == MyErrorTypes.EngineIsOffline)
            {
                TryFireEvent(MyServiceEvent.Error, faultException.Detail);
            }

            throw;
        }
    }
} 
```

你看到我是如何将你的代码包装在这个装饰器中的吗？我们可以再次使用这个装饰器来包装原来的：

```
var handler = 
    new WcfValidationCommandHandlerDecorator<DoSomethingData>(
        new WcfExceptionHandlerCommandHandlerDecorator<DoSomethingData>(
            new DoSomethingHandler()),
    new DoSomethingValidator()); 
```

当然，这一切看起来都像是一大堆代码，如果你只有一个 WCF 服务方法而不是是的，那么这可能是矫枉过正。但是，如果您有十几个左右，它就会开始变得非常有趣。如果你有数百个？好吧.. 如果您不使用这样的技术，我不想成为维护该代码库的开发人员。

因此，经过几分钟的重构，您最终会得到仅依赖于`ICommandHandler<TCommand>`接口的 WCF 服务类。所有横切关注点都将放在装饰器中，当然所有内容都由您的 DI 库连接在一起。我想你知道一些;-)

完成此操作后，您可能需要改进一件事，因为您的所有 WCF 服务类将开始看起来枯燥无味：

```
// Vanilla dependency.
ICommandHandler<FooData> handler;

public void Foo(FooData data)
{
    this.handler.Handle(data);
} 
```

编写新命令和新处理程序将开始变得无聊。您仍然需要维护 WCF 服务。

相反，您可以做的是使用单个方法和单个类创建 WCF 服务，如下所示：

```
[ServiceKnownType("GetKnownTypes")]
public class CommandService
{
    [OperationContract]
    public void Execute(object command)
    {
        Type commandHandlerType = typeof(ICommandHandler<>)
            .MakeGenericType(command.GetType());

        dynamic commandHandler = Bootstrapper.GetInstance(commandHandlerType);

        commandHandler.Handle((dynamic)command);
    }

    public static IEnumerable<Type> GetKnownTypes(ICustomAttributeProvider provider)
    {
        // create and return a list of all command types 
        // dynamically using reflection that this service
        // must accept.
    }
} 
```

现在您所拥有的只是一个 WCF 服务，它具有一个永远不会改变的单一方法。`ServiceKnownTypeAttribute`指向`GetKnownTypes`. _ WCF 将在启动时调用此方法以查看它必须接受的类型。当您根据应用程序元数据返回列表时，它允许您向系统添加和删除命令，而无需更改 WCF 服务中的任何一行。

您可能会偶尔添加新的 WCF 特定装饰器，这些装饰器通常应该放在 WCF 服务中。其他装饰器可能更通用，并且可能放置在业务层本身中。例如，它们可能会被您的 MVC 应用程序重用。

你的问题有点关于 CQRS，但我的回答与它无关。嗯......没有什么是夸大其词。CQRS 广泛使用这种模式，但 CQRS 更进一步。CQRS 是关于协作域，它强制您将命令排队并异步处理它们。另一方面，我的回答只是应用[SOLID](https://en.wikipedia.org/wiki/SOLID)设计原则。SOLID 无处不在。不仅在协作领域。

If you want to read more about this, please read my article about applying [command handlers](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91). After that, go on and read [my article about applying this principle to WCF services](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95). My answer is a summary of those articles.

Good luck.

# ffmpeg - 如何将flv文件合并为一个？

> ID：14829819
> 
> 赞同：1
> 
> 时间：2013-02-12T09:59:26.060
> 
> 标签：ffmpeg

有一个名为 input.txt 的文件

```
file '/home/1.flv'
file '/home/2.flv' 
```

我可以使用该命令将 1.flv 和 2.flv 连接成一个 mp4 文件。

```
# there are two files in output.mp4
ffmpeg -f concat -i input.txt -c copy output.mp4 
```

当我使用以下命令时

```
ffmpeg -i "concat:1.flv|2.flv" -c copy output.mp4 
```

我发现里面只有一个文件`1.flv`，`output.mp4`为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T18:43:06.157

> `1.flv`我发现 . 文件中只有一个文件`output.mp4`。为什么？

您的第一个命令使用[`concat`demuxer](http://ffmpeg.org/ffmpeg-formats.html#concat)。如果您想避免重新编码并且您的输入不支持文件级连接，则可以使用此选项。使用 demuxer 要求所有文件必须具有相同的流（相同的格式、相同的时基等），但这是一个相对较新的添加，因此较旧的 ffmpeg 版本将没有此功能。

您的第二个命令使用的[`concat`协议](http://ffmpeg.org/ffmpeg-protocols.html#concat)要求您的输入支持文件级连接（例如 MPEG-1 视频、MPEG-2 视频和 DV）。这是两种不同的连接方法（或“加入”，因为它通常由用户调用）。

另请参阅[FFmpeg Wiki](http://ffmpeg.org/trac/ffmpeg/wiki)上的[如何连接（加入、合并）媒体文件](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files)。我看到你也在 ffmpeg-user 上问过这个问题，其他人也提供了答案：[[FFmpeg-user] can't concatenate the flv file](http://ffmpeg.org/pipermail/ffmpeg-user/2013-February/013441.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:45:53.660

如果文件使用 H.264，则需要先重新 [**混合**](https://superuser.com/q/133413/joining-h264-without-re-encoding)它们。

```
ffmpeg -i q.mp4 -c copy -bsf h264_mp4toannexb q.ts

ffmpeg -i r.mp4 -c copy -bsf h264_mp4toannexb r.ts

ffmpeg -i "concat:q.ts|r.ts" -c copy -bsf aac_adtstoasc qr.mp4 
```

# data-structures - 如何检测图是否为哈密顿图

> ID：14829821
> 
> 赞同：0
> 
> 时间：2013-02-12T09:59:29.513
> 
> 标签：data-structures, recursion, graph-algorithm

我有一个作业问题，要求实现接口方法`isHamiltonian`，我尝试使用递归来解决问题。

这个想法只是简单地尝试来自节点的所有路径，如果存在满足条件的路径

*   只遍历所有节点一次
*   最后一个节点直接连接到第一个节点

我会说这是哈密顿量。

我已经尝试过这些代码，但它不起作用

```
public static boolean isHamiltonian(Graph g) throws InvalidGraphException {
    if (g == null || !(g instanceof GraphI) || ((GraphI) g).getDirected()) {
        throw new InvalidGraphException();
    }

    NodeI[] nodes = (NodeI[]) g.nodes();
    if (nodes.length < 3)
        return false;

    return isHamiltonian(nodes[0], nodes[0], new HashSet<NodeI>());
}

private static boolean isHamiltonian(NodeI start, NodeI n, HashSet<NodeI> hs) {
    hs.add(n);
    NodeI[] nodes = n.getReachableNeighbours();
    boolean connectedWithStart = false;
    for (int i = 0; i < nodes.length; i++) {
        if (nodes[i].compareTo(start) == 0) {
            connectedWithStart = true;
            break;
        }
    }
    if (hs.size() == n.getGraph().nodes().length && connectedWithStart) {
        return true;
    }
    for (int i = 0; i < nodes.length; i++) {
        if (!hs.contains(nodes[i]))
            isHamiltonian(start, nodes[i], hs);
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:25:10.467

在我看来，您的回溯是问题所在。您贪婪地将节点添加到您`hs`的路径以构建您的路径，但是当您无法创建循环/没有任何路可走时，您不会删除它们。

我要做的第一件事是放在`hs.remove(n)`最后的`return false`. 然后我也会保存结果`isHamiltonian(start,nodes[i],hs)`并在它为真时退出。像这样的东西

```
boolean result = isHamiltonian(start,nodes[i],hs);
if(result)return true;` 
```

那应该解决很多。我确实认为这种详尽的搜索会很慢。

**编辑**：整个事情应该是这样的：

```
private static boolean isHamiltonian(NodeI start, NodeI n, HashSet<NodeI> hs) {
    hs.add(n);
    NodeI[] nodes = n.getReachableNeighbours();
    boolean connectedWithStart = false;
    for (int i = 0; i < nodes.length; i++) {
        if (nodes[i].compareTo(start) == 0) {
            connectedWithStart = true;
            break;
        }
    }
    if (hs.size() == n.getGraph().nodes().length && connectedWithStart) {
        return true;
    }
    for (int i = 0; i < nodes.length; i++) {
        if (!hs.contains(nodes[i])){
            boolean result=isHamiltonian(start, nodes[i], hs);
            if(result)return true;
        }
    }
    hs.remove(n);
    return false;
} 
```

问题本身是 NP 难的，所以不要指望通用图的快速解决方案。阅读[一些基本算法](http://en.wikipedia.org/wiki/Hamiltonian_path_problem#Algorithms)并决定是否值得花时间为您的应用程序实现。

# spring - 自定义 Spring 3.0 安全过滤器、多个入口点、AuthenticationProvider

> ID：14829825
> 
> 赞同：6
> 
> 时间：2013-02-12T09:59:46.270
> 
> 标签：spring, authentication, spring-security

我需要我的安全性具有以下逻辑：

1.  检查是否存在标头参数
2.  根据参数的存在，要么重定向到登录页面（如果未通过身份验证），要么检查基本身份验证令牌

在这两种情况下，我都有相同的身份验证提供程序，但我无法让它工作。委托入口点工作正常，但我从来没有进入我的自定义身份验证提供程序......

这是我的安全配置：

```
 <security:global-method-security
    secured-annotations="enabled" />

<security:http entry-point-ref="delegatingAuthenticationEntryPoint"
    use-expressions="true" auto-config="false">
    <!-- <security:custom-filter position="FORM_LOGIN_FILTER" -->
    <!-- ref="usernamePasswordAuthenticationFilter" /> -->
    <!-- <security:custom-filter position="BASIC_AUTH_FILTER" -->
    <!-- ref="basicAuthenticationFilter" /> -->
    <security:intercept-url pattern="/login*"
        filters="none" />
    <security:intercept-url pattern="/portimaLogin*"
        filters="none" />
    <security:intercept-url pattern="/**"
        access="isAuthenticated()" />
</security:http>

<bean id="delegatingAuthenticationEntryPoint"
    class="org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint">
    <constructor-arg>
        <map>
            <entry key="hasHeader('portima','true')" value-ref="PortimaLoginUrlAuthenticationEntryPoint" />
        </map>
    </constructor-arg>
    <property name="defaultEntryPoint" ref="authenticationEntryPoint" />
</bean>

<bean id="usernamePasswordAuthenticationFilter"
    class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationFailureHandler" ref="authenticationFailureHandler" />
</bean>

<bean id="basicAuthenticationFilter"
    class="org.springframework.security.web.authentication.www.BasicAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationEntryPoint" ref="authenticationEntryPoint" />
</bean>

<bean id="PortimaLoginUrlAuthenticationEntryPoint"
    class="be.ap.common.security.spring.PortimaLoginUrlAuthenticationEntryPoint">
    <property name="loginFormUrl" value="${portima.login.page}" />
</bean>

<bean id="authenticationEntryPoint"
    class="org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint">
    <property name="realmName" value="AP" />
</bean>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        ref="authenticationProvider" />
</security:authentication-manager>

<bean id="authenticationProvider" class="be.ap.common.security.spring.APAuthenticationProvider" />

<bean id="userDetailsService" class="be.ap.common.security.spring.APUserDetailsService" /> 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T13:43:23.263

我终于让它工作了。

这是我的上下文文件：

```
 <security:http entry-point-ref="delegatingAuthenticationEntryPoint"
    use-expressions="true">
    <security:custom-filter position="PRE_AUTH_FILTER"
        ref="preAuthenticationFilter" />
    <security:custom-filter position="FORM_LOGIN_FILTER"
        ref="usernamePasswordAuthenticationFilter" />
    <security:custom-filter position="BASIC_AUTH_FILTER"
        ref="basicAuthenticationFilter" />
    <security:intercept-url pattern="/login*"
        filters="none" />
    <security:intercept-url pattern="/portimaLogin*"
        filters="none" />
    <security:intercept-url pattern="/accessDenied*"
        filters="none" />
    <security:intercept-url pattern="/**"
        access="isAuthenticated()" />
    <security:access-denied-handler ref="accessDeniedHandler" />
</security:http>

<!-- Spring Security Custom Filters -->

<bean id="usernamePasswordAuthenticationFilter"
    class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationFailureHandler" ref="authenticationFailureHandler" />
</bean>

<bean id="basicAuthenticationFilter"
    class="org.springframework.security.web.authentication.www.BasicAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationEntryPoint" ref="authenticationEntryPoint" />
</bean>

<bean id="preAuthenticationFilter" class="be.ap.common.security.spring.APPreAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
</bean>

<!-- Spring Security Custom EntryPoint -->

<bean id="delegatingAuthenticationEntryPoint"
    class="org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint">
    <constructor-arg>
        <map>
            <entry key="hasHeader('portima','true')" value-ref="PortimaLoginUrlAuthenticationEntryPoint" />
        </map>
    </constructor-arg>
    <property name="defaultEntryPoint" ref="authenticationEntryPoint" />
</bean>

<bean id="PortimaLoginUrlAuthenticationEntryPoint"
    class="be.ap.common.security.spring.PortimaLoginUrlAuthenticationEntryPoint">
    <property name="loginFormUrl" value="${portima.login.page}" />
</bean>

<bean id="authenticationEntryPoint"
    class="be.ap.common.security.spring.APBasicAuthenticationEntryPoint">
    <property name="realmName" value="AP" />
</bean>
<bean id="accessDeniedHandler"
    class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
    <property name="errorPage" value="/accessDenied" />
</bean>

<bean id="authenticationFailureHandler"
    class="org.springframework.security.web.authentication.ExceptionMappingAuthenticationFailureHandler">
    <property name="exceptionMappings">
        <props>
            <prop
                key="org.springframework.security.authentication.BadCredentialsException">
                /accessDenied
            </prop>
            <prop
                key="org.springframework.security.authentication.CredentialsExpiredException">
                /accessDenied
            </prop>
            <prop key="org.springframework.security.authentication.LockedException">
                /accessDenied
            </prop>
            <prop
                key="org.springframework.security.authentication.DisabledException">
                /accessDenied
            </prop>
        </props>
    </property>
</bean>

<!-- Spring Security Authentication Manager -->

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        ref="authenticationProvider" />
</security:authentication-manager>

<bean id="authenticationProvider" class="be.ap.common.security.spring.APAuthenticationProvider" />

<bean id="userDetailsService" class="be.ap.common.security.spring.APUserDetailsService" />

<!-- for Mock -->
<bean id="SSOService" class="be.ap.security.service.SSOServiceMockImpl" /> 
```

正如你所看到的，我也添加了一些东西。

为了修复它，我删除了 auto-config 属性，取消了过滤器的注释，并正确定义了它们。

对于想要快速了解它的作用的其他人，这里是流程：

1.  PRE_AUTH_FILTER 将检查类似 SSO 的服务以预填充身份验证对象（如果已在 SSO 中进行身份验证）
2.  delegatingAuthenticationEntryPoint 然后将根据请求标头选择如何进行身份验证
3.  两种方式是：
    *   自定义 LoginUrlAuthenticationEntryPoint
    *   自定义 BasicAuthenticationEntryPoint

当 PreAuth 使用我的 SSO 服务时，BasicAuth 和 LoginURLAuth 使用相同的 AuthenticationProvider。

希望它可以帮助别人！

# ios - 使用 Smart Cover 时查看层次结构混乱？

> ID：14829828
> 
> 赞同：1
> 
> 时间：2013-02-12T09:59:58.743
> 
> 标签：ios, ipad, ios6

我正在开发一个内部应用程序，它会在应用程序启动时自动重置并播放视频（这是一个促销应用程序）。当使用按钮解锁 iPad 时，一切正常，但如果使用智能保护盖立即解锁 iPad，我首先会看到旧视图，同时破坏视图层次结构并重置为开始视图，即使是空白的黑色启动图像已设置。

我所做的是清除**锁定和启动**时的视图层次结构

```
[rootViewController setViewControllers:nil animated:NO]; 
```

并将第一个视图控制器推到**unlock**上。

应该注意的是，有一个`MPMoviePlayerViewController`在推送/弹出时有点迟缓，因为它有一个 75MB 的视频要加载。

如何防止用户在即时解锁时看到此视图层次结构弹出？

# asp.net - 在中继器项目之前插入的行会阻止 RadioButton.Checked 回发此中继器项目吗？

> ID：14829832
> 
> 赞同：0
> 
> 时间：2013-02-12T10:00:10.153
> 
> 标签：asp.net, radio-button, postback, repeater

我有一个中继器用 1 个文本和多个填充表行，`HtmlRadioButtons`用户应该检查。因为列表可能会变得非常大，所以只检查前 N 行是强制性的。为了向用户展示这一点，我在第一个可选行之前添加了一个额外`TableRow`的(colspan=4) 和一些说明性文本。`TableCell`我在中继器上添加了这一行`ItemDataBound`。

在回发时，额外行之前和之后的所有选中单选按钮*都会*返回它们的选中值，*除了*我在之前插入额外行的一项。我尝试改变额外行（和）的类型，并尝试改变`Html/RadioButton`额外行。但是我不能让这个行/单选按钮回发检查值，它总是错误的。`Html/TableRow``Html/TableCell``EnableViewState`

有谁知道为什么这个值不回发？
有人知道如何在不阻止单选按钮回发的情况下添加额外的行吗？

额外说明：

*   我不想向`OnClick`单选按钮添加一个，因为我喜欢一次处理和存储所有值
*   我将原始数据下载到 中`Page_Load`，但这对于其他行/RadioButtons 来说似乎不是问题

这是简化的压缩代码。ASPX：

```
<ItemTemplate>
    <asp:TableRow runat="server">
        <asp:TableCell ID="CategoryName" CssClass="td_1" Text='<%# Eval("Name") %>'/>
        <asp:TableCell CssClass="td_radio" runat="server">
            <asp:HtmlInputRadioButton type="radio" runat="server"
              ID="rdBelonging"
              Name='<%# Eval("Id") %>'
              value='<%# (int)Enum_BelongsToCategory.Belonging %>'
              data-value='<%# Convert.ToBoolean(Eval("ShouldJudge")) ? "mandatory" : "optional" %>'/>
        </asp:TableCell>
        <asp:TableCell CssClass="td_radio" runat="server">
            <asp:HtmlInputRadioButton type="radio" runat="server"
              ID="rdNotBelonging"
              Name='<%# Eval("Id") %>'
              value='<%# (int)Enum_BelongsToCategory.NotBelonging %>'
              data-value='<%# Convert.ToBoolean(Eval("ShouldJudge")) ? "mandatory" : "optional" %>'/>
        </asp:TableCell>
        <%-- more Enum_BelongsToCategory-ReadioButtons... --%>
    </asp:TableRow>
</ItemTemplate> 
```

添加行后面的代码（受此 Experts-Exchange-post [Repeater Control 启发 - 添加另一个表行](http://www.experts-exchange.com/Programming/Languages/.NET/ASP.NET/Q_23570015.html)：

```
protected void repeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
        // first get item and show previous checks (if any)
        // ...
        if ( (lDataItem.ShouldJudge == false) && (_prevShouldJudge) ) {
            var lCell = new TableCell { ColSpan = 4, InnerText = "(minimum to check)" };
            var lRow = new TableRow();
            lRow.Cells.Add(lCell);
            e.Item.Controls.AddAt(0, lRow);
        }
        _prevShouldJudge = lDataItem.ShouldJudge;
    }
} 
```

找到选中的 RadioButton 背后的代码（灵感来自系统博客的这个 Chief of the System Blog [find checked radio-button in aspnet](http://remy.supertext.ch/2008/02/find-checked-radio-button-in-aspnet/)）

```
private void SaveCategoryJudgements(Product product)
{
    int lRepeaterItemCount = 0;
    foreach (RepeaterItem lItem in repeaterCategories.Items) {
        lRepeaterItemCount ++;
        var lCheckedRadioButton = GetCheckedRadioButton(lItem.Controls);
        if (lCheckedRadioButton != null) {
            int lCategoryId;
            int lJudgement;
            if ( (int.TryParse(lCheckedRadioButton.Attributes["value"], out lJudgement)) 
              && (int.TryParse(lCheckedRadioButton.Name, out lCategoryId)) )
            {
                ClassificationData.SaveDocumentCategoryByUser(product, lCategoryId, (Enum_BelongsToCategory)lJudgement);
            }
        }
    }
}

public HtmlInputRadioButton GetCheckedRadioButton(ControlCollection controls)
{
    foreach (Control lControl in controls) {
        if (lControl is HtmlInputRadioButton) {
            var lRadioButton = (HtmlInputRadioButton)lControl;
            if (lRadioButton.Checked == true) 
            {
                return lRadioButton;
            }
        }
        else {
            var lRadioButton = GetCheckedRadioButton(lControl.Controls);
            if (lRadioButton != null) {
                return lRadioButton;
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:27:22.977

尽管您的一般方法是正确的，但 IMO 似乎您将整个事情复杂化了。

1.  您不需要服务器端表格控件，即：`<asp:TableRow runat="server">`. 通过使用服务器控件而不是 html 控件，您*极大地*夸大了您的 ViewState。请记住，为了恢复 PostBack 上的转发器，.NET 需要在一个隐藏字段中维护所有服务器控件，该隐藏字段存储在您要返回给客户端的页面中。简单的 html 标记，即：`<td>`，在这里就足够了。
2.  无需在代码隐藏中添加新行，您只需将 Panel 控件的可见性设置为 false。绑定中继器时，您可以将面板的可见性设置为需要它的行的 true。

如果您需要上述任何代码，请问，我很乐意提供一些。

另外，您的问题还不清楚，但是您是否只有*一个*要显示的文本值（CategoryName）？如果是这样，您可以从转发器中删除这部分，并且只在单选按钮上进行迭代。

你为什么使用单选按钮。同样，您的问题并不清楚，但您声明：*在 extra row 之前和之后所有选中的单选按钮*。这似乎暗示用户可以选择多个单选按钮。单选按钮的正确用法是您希望用户只选择*一项*。在我看来，复选框列表将是此处使用的正确控件。

就您遇到的问题而言，很可能是因为您没有在回发时恢复动态添加的表行，这会破坏 ViewState 的恢复。请记住，为了正确恢复 ViewState，在恢复 ViewState时必须存在***确切数量的控件。***如果您按照我使用更新面板的示例进行操作，这应该可以缓解问题。

**编辑**

要了解为什么添加不可见的服务器控件有效而在代码中添加新控件无效，您需要了解 Viewstate 的工作原理。可以在这里找到全面的解释[了解 ASP.NET 视图状态](http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic4)。但简而言之，因为，正如我之前所说：当 ViewState 恢复时，必须存在***确切数量的控件，当您的服务器控件的可见性设置为 false 时，它​​们******确实***存在于页面回发并且 ViewState 为恢复。当您通过代码添加它们时，您必须明确地重新添加它们。我希望这个解释是有道理的。

代码示例：

```
<ItemTemplate>
    <tr>
        <td>'<%# Eval("Name") %>'</td>
        <td><asp:RadioButton ID="rdBelonging" ...</td>
        <!-- more Enum_BelongsToCategory-RadioButtons... -->
    </tr>
    <asp:Panel ID="pnlExplanationRow" runat="server" Visible="false">
    <tr>
        <td colspan=?>....</td>
    </tr>
    </asp:Panel>
</ItemTemplate> 
```

高温高压

# sql - 执行此查询的不同方法？

> ID：14829834
> 
> 赞同：1
> 
> 时间：2013-02-12T10:00:24.080
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

我正在努力寻找有效的方法来执行以下问题。

我有 3 张桌子：

**1)** `Events` tbl 保留以下数据：

![在此处输入图像描述](../Images/70f08d52b334f0ff0941d9c6a0e19f6f.png)

**2)** `Tasks` tbl 保留以下数据：

![在此处输入图像描述](../Images/a56828fb0816ecf05b1031b2aaedfd2f.png)

逻辑是：

*   许多任务可以分配给事件（但不一定事件有任务）
*   事件可以定义为阶段
*   events.event_id 是 PK，tasks.RelatedGateID 是他的 FK
*   tasks.taskID 是 PK

我想要一个查询，它将显示需要具有以下规则**之一的事件列表：**

事件是阶段**或**事件有任务（不必是阶段）

我目前的查询是：

```
SELECT DISTINCT * FROM 
(
    SELECT Event_ID FROM
    (
        SELECT 
            E.Event_ID 
        FROM
            Events E 
        WHERE E.Event_IsPhase = 1
    ) ET UNION
    (
        SELECT 
            T.RelatedGateID
        FROM
            Tasks T
    )
)AS tbl1 LEFT JOIN
Tasks AS tbl2 ON tbl1.Event_ID=tbl2.RelatedGateID 
```

*最后一个`LEFT JOIN`是我需要的其他数据。

我的问题是：我想知道是否有不同的方式来做这个查询（更有效）？（现在它有一些性能时间问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:10:31.890

怎么样：

```
SELECT DISTINCT Event_ID
FROM Events e
LEFT JOIN Tasks t on e.Event_ID = t.RelatedGateID
WHERE e.Event_IsPhase = 1 OR t.RelatedGateID IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:11:55.273

尝试这个

```
select distinct E.Event_ID from Tasks T, Events E 
WHERE (E.Event_ID = T.RelatedGateID) or 
(E.Event_IsPhase = 1) 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:12:05.283

您现有的查询不会返回您想要的数据集 - 相反，它将返回所有任务记录。

相反，请尝试：

```
select e.Event_ID, t.*
from Events e
left join Tasks t ON e.Event_ID=t.RelatedGateID
where e.Event_IsPhase = 1 or t.RelatedGateID is not null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:11:20.467

怎么样

```
SELECT DISTINCT E.Event_ID  FROM Events E left outer join Tasks AS tbl2 ON tbl1.Event_ID=tbl2.RelatedGateID WHERE E.Event_IsPhase = 1 OR COUNT(tasks.taskID) > 0 GROUP BY (E.Event_ID) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T10:17:21.810

也许这个：

```
SELECT Event_ID FROM 
(
    SELECT  Event_ID,
    (select top 1 T.RelatedGateID from Tasks T where T.RelatedGateID=l1.Event_ID) as par 
    FROM Events l1 
    WHERE l1.Event_IsPhase=1
) l2 
WHERE l2.par IS NOT NULL 
```

# javascript - ajax响应上的Jquery选择器

> ID：14829835
> 
> 赞同：2
> 
> 时间：2013-02-12T10:00:27.967
> 
> 标签：javascript, jquery, css-selectors

我收到 ajax 响应为 html，我需要提取指定 div 的内容。

有用：

```
function callback(data) {
    container = $(data).filter('div.container#container');
    container_in = $(container.html()).filter('div.container-in');
    main_container = $(container_in.html()).filter('div#main-container.main-container');
    div_content = $(main_container.html()).filter('div#content.right-block');
} 
```

它返回空

```
$(data).filter('div#content.right-block') 
```

但是，我可以在 $(data) 上使用一个选择器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:08:52.530

```
function callback(data) {
    container = $(data).find('#container');
    container_in = container.find('div.container-in');
    main_container = container_in.find('#main-container');
    div_content = main_container.find('#content');
} 
```

您不需要继续使用`.html()`and `$()`，因为第一个`$(data)`将所有内容解析为 DOM 元素。此外，ID 选择器上的额外标签和类限定符是多余的，因为 ID 必须是唯一的。

您还可以使用单个选择器访问内容：

```
div_content = $(data).find("#content"); 
```

# c++ - C++ VS2010 编译选项

> ID：14829839
> 
> 赞同：0
> 
> 时间：2013-02-12T10:00:42.643
> 
> 标签：c++, visual-studio-2010, compilation

请您建议我在使用 VS2010 编译时应该使用哪些选项来优化程序集、删除函数名称以及反逆向工程的其他选项？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:08:28.943

看看这个反逆向工程指南： http: [//www.codeproject.com/Articles/30815/An-Anti-Reverse-Engineering-Guide](http://www.codeproject.com/Articles/30815/An-Anti-Reverse-Engineering-Guide)作者 Josh_Jackson（2008 年 11 月“最佳 C++/MFC 文章竞赛”获奖者”）。

*   进程调试标志
*   调试对象句柄
*   线程隐藏
*   BlockInput 等等……

老但是好！

高温高压

# c# - 创建未设置为对象实例的 Outlook 应用程序对象引用

> ID：14829840
> 
> 赞同：2
> 
> 时间：2013-02-12T10:00:43.570
> 
> 标签：c#, object, reference, outlook, instance

您好，我正在创建一个新的 Outlook.Application（带有 v.14.0.0.0 Office 库）并使用 C# 检索收件箱电子邮件。仅当 Outlook 未运行时，我才收到错误消息

> '你调用的对象是空的'

在警报中（由第一行发生）。该程序正在运行（甚至没有进入捕获部分）。

```
try {
    Outlook.Application outlookApplication = new Outlook.Application();
    Outlook.NameSpace mapiNameSpace = outlookApplication.GetNamespace("MAPI");
    Outlook.MAPIFolder folder = mapiNameSpace.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox);

    foreach (Object obj in folder.Items) {
        if (obj is Outlook.MailItem) {
            Outlook.MailItem mailItem = (Outlook.MailItem)obj;
        }
    }
} catch (Exception e) {
    Console.WriteLine("Unfortunately an error occurred");
    Console.WriteLine(e.Message);
} 
```

这个烦人的警报有什么解决方案吗？我可以压制它或解决问题吗？

警报来自 Outlook 实例，我可以看到它，因为在导航栏中打开了 Outlook 实例（小警报对话框）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T10:30:31.030

您需要首先尝试获取对正在运行的实例的引用，并且仅在`new Outlook.Application()`无法附加现有实例时创建一个新实例 ( )。

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/office/ff462097%28v=office.14%29.aspx)说得很清楚。

直接来自 MSDN 文章的无耻 rip：

```
Outlook.Application application = null;

// Check whether there is an Outlook process running.
if (Process.GetProcessesByName("OUTLOOK").Count() > 0)
{

    // If so, use the GetActiveObject method to obtain the process and cast it to an Application object.
    application = Marshal.GetActiveObject("Outlook.Application") as Outlook.Application;
}
else
{

    // If not, create a new instance of Outlook and log on to the default profile.
    application = new Outlook.Application();
    Outlook.NameSpace nameSpace = application.GetNamespace("MAPI");
    nameSpace.Logon("", "", Missing.Value, Missing.Value);
    nameSpace = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T13:52:31.387

就我而言，消息

> '你调用的对象是空的'

被 Snag-it 插件抛出。所以这与核心 Outlook 无关。

我禁用了插件，我不再收到此消息。

# wordpress - WooCommerce 更改表单标签并删除字段

> ID：14829844
> 
> 赞同：3
> 
> 时间：2013-02-12T10:00:49.060
> 
> 标签：wordpress, woocommerce

我正在尝试自定义 WooCommerce 结帐页面，如何编辑字段标签？

另外，如何从表单中删除 2 个字段？我不需要`Company`和`State`领域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:28:34.107

我建议制作一个自定义插件来修改它，以便您以后可以轻松升级 WooCommerce。

在您的自定义插件中，实现此处的一些代码： [http ://wcdocs.woothemes.com/snippets/tutorial-customising-checkout-fields-using-actions-and-filters/](http://wcdocs.woothemes.com/snippets/tutorial-customising-checkout-fields-using-actions-and-filters/)

例如，要删除公司和州：

```
// Hook in
add_filter( 'woocommerce_checkout_fields', 'custom_override_checkout_fields' );
// Our Hooked in function - $fields is passed via the filter
function custom_override_checkout_fields( $fields) {
    unset($fields['shipping']['shipping_state']);
    unset($fields['shipping']['shipping_company']);
    return $fields;
} 
```

如果您在制作插件时需要帮助，我制作了有关如何将自定义字段添加到产品页面的指南。我认为这在这种情况下可能会有所帮助。 [http://www.xatik.com/2013/02/06/add-custom-form-woocommerce-product/](http://www.xatik.com/2013/02/06/add-custom-form-woocommerce-product/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T12:28:11.970

这是您需要添加到主题的 functions.php 文件中的工作挂钩

```
add_filter( 'woocommerce_checkout_fields' , 'remove_checkout_fields' );

function remove_checkout_fields( $fields ) {
    unset($fields['billing']['billing_state']);
    unset($fields['billing']['billing_company']);
    unset($fields['billing']['billing_country']);
    return $fields;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-02T03:39:42.170

为未来的读者更新 -

[WooCommerce Docs 现在有一篇关于使用操作和过滤器自定义结帐字段](https://docs.woocommerce.com/document/tutorial-customising-checkout-fields-using-actions-and-filters/)的法典文章，看起来相当全面。

我要补充的唯一一点是，从 WooCommerce 3.5.1 开始，使用 Billing/Shipping_Address_2 标签有一个小技巧，正如我对[这个问题](https://stackoverflow.com/questions/50525250/set-billing-address-2-label-in-woocommerce-checkout/53112323#53112323)的回答中所述。

# maven - Maven + Surefire 在失败的测试中返回代码为 0

> ID：14829845
> 
> 赞同：4
> 
> 时间：2013-02-12T10:00:49.150
> 
> 标签：maven, surefire

我有一个项目，测试分为单元和集成阶段。我让它运行 buildbot，问题是即使在测试中失败，maven 返回代码也是 0，所以 buildbot 构建成功。

这是 mvn 集成测试的结果：

```
Results :

Tests in error: 
 Info about failed tests

Tests run: 5, Failures: 0, Errors: 5, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1 minute 19 seconds
[INFO] Finished at: Tue Feb 12 09:43:53 UTC 2013
[INFO] Final Memory: 36M/97M
[INFO] ------------------------------------------------------------------------

$ echo $?
0 
```

没有构建成功部分的 mvn install 结果是相同的 结果：

```
Tests in error: 
  Info about failed tests

Tests run: 5, Failures: 0, Errors: 5, Skipped: 0

$ echo $?
0 
```

Surefire 配置是这样的：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>2.13</version>
  <configuration>
    <printSummary>true</printSummary>
    <excludedGroups>com.testlib.IntegrationTest</excludedGroups>
  </configuration>
  <executions>
    <execution>
    <id>unit-tests</id>
    <phase>test</phase>
    <goals>
      <goal>test</goal>
    </goals>
    <configuration>
          <excludedGroups>com.testlib.IntegrationTest</excludedGroups>
    </configuration>
    </execution>
    <execution>
    <id>integration-tests</id>
    <phase>integration-test</phase>
    <goals>
      <goal>test</goal>
    </goals>
    <configuration>
      <includes>
            <groups>com.testlib.IntegrationTest</groups>
      </includes>
        </configuration>
    </execution>
  </executions>
</plugin> 
```

我已经阅读了有关 Maven 返回代码的其他线程，但理论上相关的错误应该在我的 Maven 版本中修复（Apache Maven 2.2.1（rdebian-8））

有没有办法改变这种行为？

**更新：** 正如我所建议的那样，我尝试了surefire：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.13</version>
    <dependencies>
        <dependency>
        <groupId>org.apache.maven.surefire</groupId>
        <artifactId>surefire-junit47</artifactId>
        <version>2.13</version>
        </dependency>
    </dependencies>
    <configuration>
        <groups>com.testlib.IntegrationTest</groups>
    </configuration>
    <executions>
        <execution>
            <goals>
            <goal>integration-test</goal>
            <goal>verify</goal>
            </goals>
            <configuration>
                <includes>
                  <include>**/*.class</include>
                </includes>
            </configuration>
        </execution>
    </executions> 
```

我需要 surefire-junit 来避免初始化错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:31:23.757

首先检查是否有相同的父 pom 配置：

```
<testFailureIgnore>true</testFailureIgnore> 
```

某处...您可以通过以下方式检查：

```
mvn help:effective-pom 
```

此外，您正在尝试使用[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html)运行集成测试，这是完全错误的。对于集成测试，请使用[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/plugin-info.html)。另一件事是以正确的方式命名您的集成测试，例如 IT*.java、*IT.java 等。

另一件事是你为什么要使用这么旧的 Maven 版本检查 Maven 3.0.4。

啊对不起。监督您正在谈论集成测试。如果您正确使用 maven-failsafe-plugin 进行集成测试，它包含一个特定的目标[验证](http://maven.apache.org/surefire/maven-failsafe-plugin/verify-mojo.html) ，旨在随后检查集成测试的结果。但是您需要通过执行块单独配置它并绑定到特定的生命周期阶段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:05:13.020

我设法让它使用两种不同的配置，使用组和使用文件夹

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.13</version>
    <configuration><excludedGroups>com.testlib.IntegrationTest</excludedGroups>
    </configuration>
    <executions>
        <execution>
            <id>integration-test</id>
            <phase>integration-test</phase>
            <goals>
                <goal>test</goal>
            </goals>
            <configuration>
              <skip>false</skip>
                      <excludedGroups>com.biicode.testlib.UnitTest</excludedGroups>
                      <groups>com.testlib.IntegrationTest</groups>
            </configuration>
        </execution>
    </executions> 
```

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <excludes>
            <exclude>**/integration/*.java</exclude>
        </excludes>
    </configuration>
    <executions>
    <execution>
        <id>integration-test</id>
        <phase>integration-test</phase>
        <goals>
            <goal>test</goal>
        </goals>
        <configuration>
        <skip>false</skip>
        <excludes>
            <exclude>none</exclude>
        </excludes>
        <includes>
            <include>**/integration/*.java</include>
        </includes>
    </configuration>
  </execution>
  </executions>
</plugin> 
```

# javascript - 从 $.get 分配 KnockoutJS 对象

> ID：14829848
> 
> 赞同：0
> 
> 时间：2013-02-12T10:01:03.097
> 
> 标签：javascript, knockout.js

我有以下代码和数据

```
{
    "Job": {
        "JobName": null,
        "JobNumber": 13,
        "JobSize": 0,
        "Status": "Finished",
        "DateCreated": "/Date(1312551946280)/"
    },
    "Values": [
        {
            "Id": "8401",
            "Status": "Good",
            "JobNumber": 13
        },
        {
            "Id": "8402",
            "Status": "Bad",
            "JobNumber": 13
        }
    ]
}

function JobViewModel() {
    var self = this;

    self.jobs = ko.observableArray();
    self.selectedJob = ko.observable();
    self.history = ko.observableArray();

    var app = Sammy(function () {
        this.get('#/:jobNumber', function (context) {
            $.get('/home/GetJobInfo/' + context.params.jobNumber, {}, self.selectedJob);
        });

    });

    jQuery(function () {
        app.run();
    });
} 
```

我知道 $.get 正在工作，因为我可以看到返回的 JSON 数据，并且我在 $.get 的第三个参数中使用了一个函数来查看数据。

当我用 self.selectedJob 属性替换该函数时，为什么它没有被填充？

谢谢

**更新：这是我的 HTML**

```
<!DOCTYPE html>

<html>
<head>
    <link href="~/Content/main.css" rel="stylesheet" />
    <title>Sentinel Web Data</title>
</head>
    <body>
        <div id="sidebar">
            <ul data-bind="foreach: jobs">
                <li><a data-bind="text: $data.JobName, attr: { href: '#/' + $data.JobNumber}"></a></li>
            </ul>
        </div>
        <div id="job">
            <span data-bind="text: JobNumber"></span>
        </div>
        <div class="clear"></div>
        <div id="history"  data-bind="with: history"></div>
        <script src="~/Scripts/knockout-2.2.1.js"></script>
        <script src="~/Scripts/jquery-1.4.4.min.js"></script>
        <script src="~/Scripts/sammy-0.7.4.min.js"></script>
        <script src="~/Scripts/JobViewModel.js"></script>
        <script>
            ko.applyBindings(new JobViewModel());
        </script>
    </body>
</html> 
```

当查看控制台中的 get 并查看 self.selectedJob.Job 时，我得到“未定义”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:18:36.853

我已经设法通过这样做来完成这项工作，但是我不确定为什么我的原始代码不起作用：

```
$.get('/home/GetJobInfo/' + context.params.jobNumber, {}, function (data) {
    self.selectedJob(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:07:57.460

关于控制台，您看错了。要查看选定的作业名称，您需要使用：

```
var vm = new JobViewModel();
ko.applyBindings(vm); 
```

然后在控制台中：

```
vm.selectedJob().Job 
```

至于绑定到 html，您没有绑定到所选作业：

```
<div id="job" data-bind="with: selectedJob">
    <span data-bind="text: JobNumber"></span>
</div> 
```

# mysql - HighCharts - 如何为两个图表结合 JS 和 SQL？

> ID：14829850
> 
> 赞同：0
> 
> 时间：2013-02-12T10:01:11.033
> 
> 标签：mysql, highcharts, function-call

我有两个饼图。首先工作正常，我从数据库中加载数据。我在它上面设置了一个点击事件，它调用函数，其中包含第二个图表的代码。在函数中，我传递了有关单击了哪个饼图的信息的参数。有用。现在：我需要从第二个图表中的数据库加载数据，就像在第一个图表中一样。问题是，我需要将参数中的值传递给 SQL 请求，然后将结果加载到第二个图表中。但是在 PHP 中传递 JS 变量远远超出了我的技能。HighCharts 是否以某种方式解决了这个问题？有没有“不太疯狂”的方法来做到这一点？这是jFiddle：`www.jsfiddle.net/r36qe/2/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:59:29.477

您可以简单地使用 $.get() 或 $.getJSON() 方法并在 URL 添加参数，例如：

```
$.getJSON('http://www.yourdomain.com/getpie.php?index=' + window.index, function(data) {        
    //create new chart with data from response
}); 
```

然后在您的 getpie.php 中，您可以通过以下方式访问此变量：

```
$clickedindex = $_GET['index']; 
```

相同的方式适用于 Highcharts 示例[延迟加载](http://www.highcharts.com/stock/demo/lazy-loading)和 PHP 文件，您可以在[此处](https://github.com/highslide-software/highcharts.com/blob/master/samples/data/from-sql.php)找到。

# c# - VS2012 Sort Usings 不会先移动 System Usings？

> ID：14829853
> 
> 赞同：30
> 
> 时间：2013-02-12T10:01:13.883
> 
> 标签：c#, visual-studio-2012

我使用 VS2012 PRO 设置了一个专门用于 WP8 开发的虚拟机。

当我右键单击->组织使用->排序使用时，每个使用都只是按字母顺序排序。我希望 System usings 是第一个。

我是否错过了某些设置，或者为什么我的环境会这样？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-12T10:17:23.777

这是一个视觉工作室选项：`Options, Text Editor, C#, Advanced, Place System directives first when sorting usings`

# c# - 使用 DI 重构 DAL，以后可以更改 DAL

> ID：14829855
> 
> 赞同：0
> 
> 时间：2013-02-12T10:01:25.587
> 
> 标签：c#, .net, architecture, dependency-injection, refactoring

我们目前拥有的是一个相对较旧的代码库，使用 EntitySpaces（其实并不重要，但它是一个 ORM，在过去很好用，但根据我最近的 EntityFramework 经验，它不再那么重要了）作为用于直接访问数据库的 ORM。我现在需要更改当前直接依赖于 EntitySpaces 对象的应用程序的许多部分。这不是很好，但现在就是这样。我的总体想法是引入一个层，该层引入中性的、不感知持久性的对象，编写某种存储库接口来获取、更新等这些对象，并编写一个仍然使用 EntitySpaces 的（第一个）实现。然后我可以重构所有当前直接使用 EntitySpaces 的类和组件。

这是我的问题/不安全感：

一般来说，我是想让一个存储库对象坐在某个地方还是更好地为组件提供一个返回（特定）存储库的工厂？也许我什至可以针对不同类型的对象将存储库拆分为不同的接口，我猜这会导致一些 20-ish 接口。

假设我有 UI 组件，它们现在对数据库执行大量操作。如果我重写它们以针对存储库工作，是更好地“给”这些组件一个存储库对象，还是以他们甚至不必知道某处有存储库的方式重写此 UI 组件？想象一下，有一个对话框可以让您`Part`从数据库中加载、更改并发送回。这可以看作是某种界面，当用户点击*更新*或*删除*按钮`PartEditor`时，它可以被给予回调使用。

 **你甚至会为这个任务使用 DI 框架吗？该应用程序相对较大，我认为大约 800k loc，没有重用公司范围的库。另一种方法是在不使用 DI 框架的情况下对所有组件隐藏具体类，以避免引入新问题。对于使用我的新抽象的组件，这不应该有所作为，因为这些组件应该以不需要知道所使用的 DI 框架的方式编写，对吧？

我知道这很抽象，可能很难回答，但我希望其他人对这类任务有一些经验。我感谢任何指示。至于使用哪个 DI 框架的问题，我完全开放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:14:10.720

> 一般来说，我是想让一个存储库对象坐在某个地方还是更好地为组件提供一个返回（特定）存储库的工厂？也许我什至可以针对不同类型的对象将存储库拆分为不同的接口，我猜这会导致一些 20-ish 接口。

我会为每个聚合根创建一个存储库。这使得维护和测试代码变得更加容易。

> 假设我有 UI 组件，它们现在对数据库执行大量操作。如果我重写它们以针对存储库工作，是更好地“给”这些组件一个存储库对象，还是以他们甚至不必知道某处有存储库的方式重写此 UI 组件？想象一下，有一个对话框可以让您从数据库中加载一个零件，对其进行更改并将其发回。这可以看作是某种 PartEditor 接口，当用户点击更新或删除按钮时，它可以被给予回调以使用。

您应该为此使用存储库模式。您可以切换到`DataAdapter`批处理方法的存储库（如果您已经测量到 EF 性能对于这些场景来说太差了）。这就是抽象的伟大之处。您可以根据需要调整实现，而不会影响其余代码。

> 你甚至会为这个任务使用 DI 框架吗？该应用程序相对较大，我认为大约 800k loc，没有重用公司范围的库。另一种方法是在不使用 DI 框架的情况下对所有组件隐藏具体类，以避免引入新问题。对于使用我的新抽象的组件，这不应该有所作为，因为这些组件应该以不需要知道所使用的 DI 框架的方式编写，对吧？

在使用数据库时，我确实使用了 DI 框架。让所有存储库共享相同的连接和事务（无需升级到分布式事务）变得容易得多。

您可以在此处阅读我为 EF 所做的实现：http: [//blog.gauffin.org/2013/01/repository-pattern-done-right/](http://blog.gauffin.org/2013/01/repository-pattern-done-right/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:31:31.603

> *一般来说，我是想让一个存储库对象坐在某个地方还是更好地为组件提供一个返回（特定）存储库的工厂？也许我什至可以针对不同类型的对象将存储库拆分为不同的接口，我猜这会导致一些 20-ish 接口。*

我建议您创建一个通用存储库来隐藏域到数据的转换（使用 OR/M 或其他），然后使用*控制反转来*实例化它：

```
// The factory hides who's the actual 
// repository implementation. In your case, it could be 
// EntityFrameworkRepository<T> or EFGenericRepository<T>
GenericRepository<Order> orderRepo = RepositoryFactory.Create<Order>(); 
```

存储库可能具有以下方法：

*   添加。
*   GetById。
*   消除。
*   GetByCriteria([表达式树])（例如，`queryable => queryable.Where(...)`）。此方法可以接受输入参数为`Expression<Func<IQueryable<T>, IQueryable<T>>>`. Entity Framework 和 NHibernate 会让你以这种方式实现它。

使用这种方法 - 通用存储库 - 您可以避免 20、30 个存储库，此外，您还有一个实现 OR/M 特定任务的基本存储库实现，以避免在您的代码库中传播特定的依赖关系！

> *假设我有 UI 组件，它们现在对数据库执行大量操作。如果我重写它们以针对存储库工作，是更好地“给”这些组件一个存储库对象，还是以他们甚至不必知道某处有存储库的方式重写此 UI 组件？想象一下，有一个对话框可以让您从数据库中加载一个零件，对其进行更改并将其发回。这可以看作是某种 PartEditor 接口，当用户点击更新或删除按钮时，它可以被给予回调以使用。*

**UI 不应该知道存储库。它应该是业务领域，是 UI 和存储库之类的中介。**

> *你甚至会为这个任务使用 DI 框架吗？该应用程序相对较大，我认为大约 800k loc，没有重用公司范围的库。另一种方法是在不使用 DI 框架的情况下对所有组件隐藏具体类，以避免引入新问题。对于使用我的新抽象的组件，这不应该有所作为，因为这些组件应该以不需要知道所使用的 DI 框架的方式编写，对吧？*

是的，使用 DI/IoC 框架。不要回避不可避免的事情，不要重新发明轮子——这比使用第三方库是一个大问题——！我想向您推荐[Castle Windsor](http://www.castleproject.org/projects/windsor/)，因为它的成熟、稳健和功能丰富的框架。**

# mysql - 从表中获取数据所需的单个查询

> ID：14829856
> 
> 赞同：3
> 
> 时间：2013-02-12T10:01:33.580
> 
> 标签：mysql, sql, stored-procedures, stored-functions

我有以下表格

```
 //all users deails
    smsusers(id,fname , lname ,primary key(id));

 //message details of users
 //one smsusers can have N messages
 user_messages(messageid,message,adddate ,sentby,visibility,
 userid,primary key(messageid),foreign key(userid) references smsusers(id),
 foreign key(sentby) references smsusers(id));

 //One message(user_message) can have N comments
 comments(comment_id,comment_on ,commented_by,comment_date,
 comment,foreign key(commented_by) references smsusers(id),
 primary key(comment_id));

 //one message(user_message) can have N post_images
 post_images(image_id,small_pic_path,userid,messageid,
 foreign key(userid) references smsusers(id),primary key(image_id));

//one message(user_message) can have N likes
 likes(element_id,element_type ,liked_by,
 foreign key(liked_by) references smsusers(id) ,adddate, 
 primary key(element_id));

  //one smsusers(user) can have 1 profile_pic
 profile_pic(pic_id varchar(200),small_pic_path ,userid ,
 foreign key(userid) references smsusers(id),primary key(pic_id)); 
```

我想获取 user_messages 的任何 messageid 和 userid 的以下详细信息

```
 1)all details from user_message, 
    2)last 05 comments related to messageid in ascending order from comments table 
      (one message can have multiple comments)which includes comment_id ,comment,
         comment_date,and details of commented_by(fname,lname,small_pic_path). 
    3)all small_pic_path from post_images(one message can have multiple images), 
    4)total likes from like table,
    5)all details (smsusers.*,profile_pic.*) of sentby( of table  user_messages) 
```

我想获取所有这些详细信息。

我应该使用查询或函数来获取所有这些信息吗？

请建议一个查询或一个函数来获取所有数据。

我正在使用 MySQL DB 和 struts2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:11:40.927

**4）**来自like table的总喜欢，

```
SELECT count(*) AS total_likes FROM likes WHERE element_id = <messageID>; 
```

**5)** sentby 的所有详细信息 (smsusers.*,profile_pic.*)

```
SELECT smsusers.*,profile_pic.* FROM user_messages
    JOIN smsusers 
        ON user_messages.sentby = smsusers.id
    JOIN profile_pic.userid = smsusers.id
WHERE user_messages = <messageID> 
```

现在将它们全部加入一个查询中

```
SELECT (<Query_1>),(<Query_2>),[...],(<Query_N>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:07:30.833

`1)all details from user_message`

```
SELECT * FROM user_messages WHERE userid = <userID> AND messageid = <messageID>; 
```

`2)last 10 comments related to messageid in ascending order from comments table (one message can have multiple comments)which includes comment_id ,comment, comment_date,and details of commented_by(fname,lname,small_pic_path).`

```
SELECT a.comment_id, a.comment, a.comment_date, b.fname || b.lname || c.small_pic_path "Commented by" 
FROM comments a, smusers b, profile_pic c, user_messages d
WHERE d.messageid = <messageID>
AND d.userid = b.id
AND b.id = c.userid
ORDER BY comment_date
LIMIT 0, 10; 
```

`3)all small_pic_path from post_images(one message can have multiple images),`

```
SELECT small_pic_path
FROM post_images; 
```

`4)total likes from like table,`

```
SELECT * FROM likes; 
```

`5)all details (smsusers.*,profile_pic.*) of sentby`

```
You have not posted the structure of sentby 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T08:36:13.643

你似乎已经得到了答案。让我知道那是怎么回事，如果你还需要什么。

# mirc - Mirc，模拟 akicklist 将 ip 保存在文件中

> ID：14829857
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:01:36.627
> 
> 标签：mirc

有人可以建议我这样做：

如果我输入：

/akick 昵称

昵称应该被踢出并禁止当前频道，同时我需要将昵称的IP地址保存在一个文件中（例如：akicklist.txt）。在 ON JOIN 事件中，我需要检查加入频道的昵称的 IP 地址是否存在于 akicklist.txt 中，如果结果为真，则继续踢并禁止它。

非常感谢，求助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:53:04.093

这些列表被称为 Black/Enemy/Shit/etc List's.. 你可以在谷歌中找到那些作为“mirc shit list”的列表......

[http://www.mircscripts.org/comments.php?cid=3653](http://www.mircscripts.org/comments.php?cid=3653)
[http://www.mirc.net/projects.php?go=1089290479&get_review=1](http://www.mirc.net/projects.php?go=1089290479&get_review=1)

# http - “Web 应用程序应该像 HTTP 一样自然无状态”是什么意思？

> ID：14829859
> 
> 赞同：0
> 
> 时间：2013-02-12T10:02:06.580
> 
> 标签：http, jakarta-ee, web-applications

在阅读有关 Java EE Web 应用程序（以及一般的 Web 应用程序）时，我已经阅读了以下内容相当多的内容 -

> Web 应用程序应该像 HTTP 一样自然无状态

1.  这实际上是说应该在每个请求上从数据库中提取状态，并且在请求之间不应该在服务器上保留任何信息吗？
2.  Web 应用程序有状态有什么不好？它带来了哪些弊端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:26:50.263

1.  是的。
2.  这使它们变得更加复杂，因为由于多个并发用户修改相同的状态，使应用程序有状态很快会导致内存中的数据过时或不一致。它还降低了应用程序的可扩展性，因为状态会消耗内存，并且状态必须在集群的所有 Web 服务器上复制（或以某种方式提供）。

# ios - QLPreviewController 的活动指示器未显示

> ID：14829861
> 
> 赞同：1
> 
> 时间：2013-02-12T10:02:08.223
> 
> 标签：ios, ios5

我正在使用 QLPreviewController 快速显示 PDF 文件和图像。在控制器上传内容之前，这些秒内会显示一个空白屏幕。我尝试添加活动指示器。它开始动画，但不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T21:47:35.570

我有同样的问题，所以我想我会分享一个可能的解决方案。

您的主线程很可能被阻塞，从而阻止了 QLPreviewController 的加载。您可以考虑将数据加载到另一个线程中，如下所示：

```
dispatch_queue_t getData = dispatch_queue_create("com.myDomain.appName", NULL);

dispatch_async(getData, ^{
    //get some data

}); 
```

您的主线程现在应该立即推送 QLPreviewController，它将在重试获取 _previewItemUrl 处的数据时显示自己的活动指示器。对于长时间运行的任务，此操作可能会超时：

> 等待来自 com.apple.quicklook.quicklookd 的栅栏屏障超时

在这种情况下，使用 performSelectorInBackground:withObject:，并在方法结束时发布它已完成的通知。注册您的类以接收通知，并通过 @selector 推送 previewController。

# build - 如何在 tfs 2012 的连续构建中使用相同的放置文件夹？

> ID：14829865
> 
> 赞同：0
> 
> 时间：2013-02-12T10:02:17.170
> 
> 标签：build, tfs

我想要做的是为给定的解决方案提供一个单独的下车位置，无论构建号如何。问题出在 TFS 想要将内部版本号附加到指定放置位置之后的目录结构中，如

```
...drop-location\BuildDefitionName\BuildNumber 
```

所以我的第一个解决方案（可能不是一个好主意）是使构建定义中定义的构建号静态。这有效，但仅适用于第一次构建。在那之后，tfs 将不允许我在相同的定义中使用相同的编号构建另一个构建。

那么，我有哪些选择可以到达一个单独的放置地点？目标是始终在预定位置拥有最新的工作（通过单元测试）版本。我也只想保留最新版本，所以不需要保留。是去编辑构建过程模板的唯一选择吗？我对此有点警惕，因为这是否意味着我必须为每个解决方案重复该过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:24:40.770

如果需要，您需要修改构建工作流程。在构建工作流程中，检查称为“更新放置位置”的序列。按照该顺序，为您创建内部版本号。如果要绕过该版本号，则需要在“设置放置位置”之前修改分配部分。默认情况下，分配是

`BuildDropProvider.CombinePaths(BuildDetail.DropLocationRoot, BuildDetail.BuildDefinition.Name, BuildDetail.BuildNumber)`

你可以把 `BuildDropProvider.CombinePaths(BuildDetail.DropLocationRoot, BuildDetail.BuildDefinition.Name, String.Empty)`

您可以在多个解决方案中重复使用修改后的构建工作流程。

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-04T12:03:47.267

我已经更新了构建模板 xaml 文件，它似乎工作正常

# javascript - 套接字或 Ajax。我应该使用什么？

> ID：14829866
> 
> 赞同：3
> 
> 时间：2013-02-12T10:02:23.223
> 
> 标签：javascript, jquery, node.js, socket.io

## 我想要的是

我想使用 Nodejs 创建一个登录脚本。目前我正在考虑使用套接字或 ajax 帖子。

## 我有的

我已经安装了 Nodejs，并使用[了这段代码](https://github.com/clocklimited/BasicExpressSite)。

## 我试过的

我从一个简单的 Ajax 帖子开始。我为此使用了 jQuery，并序列化了表单。这行得通，但有时它有一些延迟或速度很慢。

所以我认为套接字可能是与服务器通信并返回客户端的更好方式。

现在我面临着我不能再使用的问题`serialize()`（该死的我喜欢那个`serialize()`功能）。

所以现在我必须在我的客户端中使用 json，获取 2 个输入值（电子邮件和密码），创建一个名为 的对象`obj`，添加值并使用`socket.emit('login', JSON.stringify(obj, null, 2))`

在我的服务器中，我有

```
socket.on('login', function(data){
   data = JSON.parse(data)
   if(data.email === 'em@il.com' && data.password === 'secret')
        // return true
   // return false
}) 
```

现在的问题是我无法让我的客户知道凭据是否正确。

我可以通过使用另一个来做到这一点，`emit`但我认为这会超载。

我不能只使用`return true`或者可能`socket.send(true)`吗？

有人有同样的问题吗？或者也许是我的问题的解决方案？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:12:15.927

好吧，伙计，听起来它不会是您从客户那里调用的唯一功能。所以你应该开始设计你的 API。

如果你从客户端发送 JSON，那么服务器最光荣的事情就是返回 JSON。我会使用socket.send。

基本的 OK 响应如下所示：

```
{ "Status" : true } 
```

基本的错误响应如下所示：

```
{ "Status" : false, "Message": "Login or password not valid" } 
```

如果将来您需要将数据返回给您的客户端，那么可能会使用相同的基本实体，您只需为其添加更多属性并在客户端中读取它。

```
{ "Status" : true, Data: { /* data here */ } } 
```

# html - 将段落宽度限制为其父 div

> ID：14829868
> 
> 赞同：4
> 
> 时间：2013-02-12T10:02:25.033
> 
> 标签：html, css

我有以下 HTML 代码：

```
<div style="width:100%">
    <div id="div1" style="float:left">
        <img src="http://www.lappelducourty.be/test/wp-content/uploads/2013/01/siesta-300x225.jpg">
    </div>
    <div id="div2" style="float:left">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vitae libero lectus, varius placerat risus. Pellentesque condimentum dapibus fermentum. Nam eget magna nisl, a iaculis massa. Sed congue ultrices felis sed volutpat. Donec tristique ullamcorper ullamcorper. </p>
    </div>
</div> 
```

[在这里你可以找到一个例子。](http://lappelducourty.be/test/screenshots/div.html)

所以我有两个 div，div1 和 div2

问题是段落太长，所以 div 被下推。我希望 div2 在普通屏幕上保持在 div1 旁边（当屏幕尺寸足够大时）。如果屏幕太小（比如在手机上），div2 应该转到下一行。

不是说段落的宽度限制在其父div的宽度，所以div2还在div1旁边吗？

顺便说一句，我不想​​为 div 设置（最大）宽度...

非常感谢！！

万斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:43:42.510

将**宽度**设置为**div1**并且**p**将采用它。**div2**也需要一个**宽度**。

```
<style>
#mainContainer {
    width: 100%;
}
#div1, #div2 {
    float: left;
    width: 45%;
    min-width: 300px;
}
</style> 
```

要完成你想要的，你需要使用 min-width。检查[JsFiddle](http://jsfiddle.net/menian/xPyjS/)，尝试拖动中间边框看看效果。这是@Sergiy T 的建议。否则你真的需要使用脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:05:43.343

如果我理解正确，您想删除`float:left`.`div2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:06:13.270

您可以替换`float:left`为 `display:table-cell; vertical-align:top`您的 div1 和 div2

**编辑：** 我几乎可以通过以下代码实现您所需要的。

```
<div style="width:100%;">
<div style="float:left;">
    <img src="http://www.lappelducourty.be/test/wp-content/uploads/2013/01/siesta-300x225.jpg" />
</div>
<p>test</p>
<div style="display:table;">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. [...] Sed in quam dolor. </p>
</div> 
```

棘手的部分是`<p>test</p>`。调整窗口大小时，没有段落或空白的文本不会移动到图像的底部。我认为任何块元素都不会经过测试。我仍然不知道为什么会这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:38:48.147

要 div1 修复**width=300px**和**margin-right:10px**。删除**float:left**到**div2**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T10:42:45.417

将图像放在第二个 div 中，使用左浮动。

# matlab - Matlab - 索引变量

> ID：14829871
> 
> 赞同：-3
> 
> 时间：2013-02-12T10:02:43.787
> 
> 标签：matlab, for-loop, indexing

我问了一个类似的问题，但答复集中在`0`我刚才在问题上下文中提到的索引上。在这里，我修改了问题并且不想要零索引，特别是在我知道它可能在`matlab`.

我的问题...

我正在尝试制作一个将返回以下内容的内容`for-loop`：`matlab`

```
C_1 = 0
C_2 = 0
C_3 = 0
C_4 = 0
C_5 = 0 
```

我试了一下，但没有奏效：

```
function test
for i=1:5
        C{i} = 0
    end
end 
```

**编辑**

这是我得到的输出（为什么会这样）？

```
C = 

    [0]

C = 

    [0]    [0]

C = 

    [0]    [0]    [0]

C = 

    [0]    [0]    [0]    [0]

C = 

    [0]    [0]    [0]    [0]    [0] 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:20:29.673

From your example, it looks like you want this:

```
[C{1:5,1}] = deal(zeros(1,1)); 
```

if, instead you want an array, type in

```
C = zeros(5,1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:07:54.377

你得到你所看到的原因是在循环中

```
for i=1:5
    C{i} = 0
end 
```

你不要用分号终止语句。会发生什么：

`0`第一次通过循环，元胞数组 C 用at 位置的单个元素初始化`1`。结果被输出，因为没有终止分号：

```
C = 

    [0] 
```

这表明 C 是一个具有单个元素的元胞数组 - 数组`[0]`（Matlab 中的所有内容都是一个数组，甚至是一个标量）。

在第二次`for`循环之后，C 是一个双单元格数组，并显示其内容：

```
C = 

    [0]    [0] 
```

等等

如果您想要您描述的确切输出，

C_1 = 0 C_2 = 0 C_3 = 0 C_4 = 0 C_5 = 0

您可能希望创建五个名称以编程方式生成的变量。你可以使用的函数是`assignin`，它的语法是`assignin(workspace, varname, value)`

以下循环完全符合您的要求

```
clear all
for ii=1:5
    assignin('base', sprintf('C_%d', ii), 0);
end
clear ii

whos 
```

这将显示您已经创建了五个变量，`C_1`通过`C_5`，值设置为零。

如何将此代码修改为不那么琐碎的东西应该很明显。

总体而言，由于速度优势，您可能希望在任何可行的地方使用“常规”数组，并在单个元素不同时使用元胞数组 - 不同的类型、大小等。元胞数组的一个很好的用途是用于标签：

```
myLabels={'this', 'that', 'label'}; 
```

通常，如果您需要一个包含五个全为零的值的数组，那么正确的语法几乎总是

```
myArray = zeros(1, 5); 
```

注意 - 在 Matlab 中，如果您编写`zeros(5)`它将创建一个 5x5 方形矩阵。在 FreeMat 等其他一些软件包中，它会产生一个 1x5 矩阵......

# c# - 自动更新数据库结构（无数据）

> ID：14829874
> 
> 赞同：1
> 
> 时间：2013-02-12T10:02:49.690
> 
> 标签：c#, wpf

我想知道，是否有可能以某种方式比较两个数据库（不写示例，但不确定它是否可以这样工作）：

我有 2 台电脑。它们具有相同的实例和数据库名称，但具有另一个结构 - 在 DB_PC1 中我一直在工作，更新、更改、删​​除、插入等。现在，最终我想要 DB_PC2 中的相同数据库。当然，我可以将所有表编写为 *.sql，但是是否可以创建（例如）我的 DB_PC1 的备份并以某种方式在 DB_PC2 中将其与自动接受更改进行比较？

我也知道我可以使用还原数据库，但我不想更改 DB_PC2 中的任何数据。也许有人有可以做到的 c# 示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:07:33.653

如果您希望在服务器级别完成，您可以使用 SQL Server 复制。如果您需要 Accept Changes 之类的东西，您可以使用 SQL COMparer 之类的工具来完成。有很多可用的工具。只是谷歌它。

[http://www.red-gate.com/products/sql-development/sql-compare/](http://www.red-gate.com/products/sql-development/sql-compare/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:12:26.447

看看[Roundhouse](http://code.google.com/p/roundhouse/)项目。它的工作方式类似于 db 的版本控制系统。

# c++ - 访问给定未来后 boost::future<>.then() 中的错误访问

> ID：14829881
> 
> 赞同：5
> 
> 时间：2013-02-12T10:03:10.547
> 
> 标签：c++, boost, ios6, exc-bad-access, boost-thread

我正在 XCode 4.6 中为 iOS 开发。我正在为服务编写一个库并使用 boost 来启动线程。我的一种方法如下所示：

```
void Service::start(boost::shared_ptr<ResultListener> listener) {

    boost::future<bool> con = boost::make_future(true);
    listener->onConnected(); // Works
    boost::future<bool> initDone = con.then([&, listener](boost::future<bool>& connected) {
         listener->onConnected(); // Works
         if (!connected.get()) {
             listener->onError("...");
             return false;
         }
         listener->onError("...");  // EXC_BAD_ACCESS
         /* ... */
         return true;
    });
} 
```

在设备上执行此操作时，我`EXC_BAD_ACCESS`在标记的行处得到一个。我对此感到非常惊讶，因为第一次调用`onConnected`是成功的，即使我在那个`onError`调用之前添加了一个调用`if`也是如此。

由于对 C++ 非常缺乏经验，我会对每条关于原因是什么、如何调试它以及如何知道下次是否出现此问题的信息感到高兴。我也不太确定哪些信息是相关的。我想出的可能与我迄今为止发现的有关，以下可能：`ResultListener`和`Service`是`boost::noncopyable`。我检查了`shared_ptr`(using `use_count`) 的引用计数，它在继续中增加。我正在使用提升 1.53。方法是这样调用的

```
Servuce reco(/* ... */);
boost::shared_ptr<foo> f(new foo());
reco.start(f); 
```

`foo``std::cout`作为一个简单的类，如果调用了方法，除了打印到之外什么都不做。

**编辑：**进一步窥探让我检查`get()`调用，我发现`future.hpp`正在执行以下代码：

```
 // retrieving the value
    move_dest_type get()
    {
        if(!this->future_)
        {
            boost::throw_exception(future_uninitialized());
        }

        future_ptr fut_=this->future_;
        this->future_.reset();
        return fut_->get();
    } 
```

我认为这是问题所在。调用`reset()`似乎释放了`future_` `shared_ptr`. 我的猜测是，这将继续运行的内存标记为未用于操作系统，从而使`listener`指针无效，然后将指针作为内存访问超出其范围。这个假设正确吗？我可以以某种方式避免这种情况还是这是提升中的错误？

**编辑 2：**以下是创建问题的最小示例：

```
#define BOOST_THREAD_VERSION 4
#include <boost/thread.hpp>

class Test {

public:
    void test() {
        boost::shared_ptr<Test> listener(new Test());
        boost::future<bool> con = boost::make_future(true);
        listener->foo(); // Works
        boost::future<bool> initDone = con.then([listener](boost::future<bool>& connected) {
            listener->foo(); // Works
            if (!connected.get()) {
                listener->foo();
                return false;
            }
            listener->foo();  // EXC_BAD_ACCESS
            return true;
        });
    }

    void foo() {
        std::cout << "foo";
    }
}; 
```

我添加了我在 XCode 中拍摄的两个屏幕截图，以显示未来正在运行 conitnuation 的情况，并且 Mankarnas（在评论中）和我（上图）似乎是正确的：似乎是存储 continuation 的内存部分被释放，因此发生未定义的行为。

这是之前`get()`称为的情况： ![<code>get</code> 调用前的情况](../Images/6caafd5d66eae910d4a05f3e94a51d5a.png)

这是`get()`调用后的情况： ![<code>get</code> 被调用后的情况](../Images/6f79e062ee282ca22a92349a981e1940.png)

地址`px`指向的是`0x00`之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:06:45.633

我开了一张针对 boost 1.53 的票[，它被确认](https://svn.boost.org/trac/boost/ticket/8068)为一个错误。它似乎`future.then`还不稳定，因此还没有准备好用于生产。那里的一个建议是使用

```
#define BOOST_THREAD_DONT_PROVIDE_FUTURE_INVALID_AFTER_GET 
```

但是明确指出此功能还不稳定（并且文档缺少这一点信息）。

我现在已经切换到使用单独的线程，我将在其中等待未来并执行正确的操作。

# java - 将自动重试添加到 Android 下载管理器

> ID：14829889
> 
> 赞同：2
> 
> 时间：2013-02-12T10:03:44.167
> 
> 标签：java, android, download, android-download-manager

感谢[Navdeep](https://stackoverflow.com/a/14645424/1331671)，我建立了一个工作`DownloadManager`. 问题是我需要应用程序在一定延迟后重试下载失败的下载。

与[这篇](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)文章类似，我成功添加了一个 if 子句来检查下载失败的时间：

```
if (DownloadManager.STATUS_FAILED == c.getInt(columnIndex)) { ... } 
```

问题是如何重新开始下载。我猜下载是在`Query`or中的某个地方`Cursor`？

**编辑：**

在摆弄之后，我试图将延迟处理程序放入这个 if 子句并像我一开始那样调用下载。不幸的是，我在访问`COLUMN`属性时遇到问题：

```
c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_URI)); 
```

这导致`NullPointerException`...任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T02:29:07.247

您会收到 NullPointerException，因为下载尚未完成，因此没有为下载的文件提供位置。下载失败可以调用重新下载文件的方法

# iphone - 如何在 iPhone 中获取 Facebook 群组列表？

> ID：14829895
> 
> 赞同：0
> 
> 时间：2013-02-12T10:04:10.750
> 
> 标签：iphone, objective-c

我正在创建一个集成了 Facebook 的应用程序。我已经合并了 Facebook，它确实获取了朋友列表等，但我在检索特定用户的群组列表时遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:22:58.293

您需要将“friends_groups”添加到您在打开会话之前使用的权限数组中。然后你可以获取组名:)

```
 FBRequest* req = [FBRequest requestForGraphPath:@"/me/friends?fields=id,name,groups"];
    FBRequestConnection* reqconn = [[FBRequestConnection alloc] init];

    [reqconn addRequest:req completionHandler:^(FBRequestConnection *connection,
                                                id result,
                                                NSError *error){
        FBGraphObject *graphObject = result;
        id<FBGraphUser> graphUser = (id <FBGraphUser>)graphObject;

        [self getGroupsFromArray:[graphUser objectForKey:@"data"]];

    }];

    [reqconn start];

- (void)getGroupsFromArray:(NSArray *)listOfFriends
{

    for (id element in listOfFriends)
    {                
        NSDictionary *dict = [element objectForKey:@"groups"];
        NSArray *groupsArray = [dict objectForKey:@"data"];

        for (id groups in groupsArray)
        {
            NSString *groupName = [groups objectForKey:@"name"];
            NSLog(@"group name for person %@ is %@", [element valueForKeyPath:@"name"],groupName);

        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T13:30:42.013

这是一个更完整的示例，说明如何仅获取您自己的组：

```
// list the permissions you want
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_groups",
                        nil];

// handle Facebook Login preliminaries...
if (!FBSession.activeSession.isOpen) {
    // if the session is closed, then we open it here, and establish a handler for state changes
    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
        if (error) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                message:error.localizedDescription
                                                               delegate:nil
                                                      cancelButtonTitle:@"OK"
                                                      otherButtonTitles:nil];
            [alertView show];
        } else if (session.isOpen) {
            [self pickFriendsButtonClick:sender];
        }
    }];
    return;
}

// set the GRAPH API query
FBRequest* req = [FBRequest requestForGraphPath:@"/me/?fields=name,groups"];

// create pointer to a backend connection
FBRequestConnection* reqconn = [[FBRequestConnection alloc] init];

// attach request to connection
[reqconn addRequest:req completionHandler:^(FBRequestConnection *connection,
                                            id result,
                                            NSError *error){
    NSDictionary *resultDict = (NSDictionary<FBGraphUser> *) result;

    NSString *path;

    path = [resultDict objectForKey:@"group"];

    if (resultDict == nil)
    {
        // This means the dictionary does not contain anything
        NSLog (@"Don't know the path to the groups");
    }
    else
    {
        // Print out the data (including groups).

        for(NSString *key in [resultDict allKeys]) {
            NSLog(@"%@, %@",key, [resultDict objectForKey:key]);
        }
    }

}];

// actually invoke the request
[reqconn start]; 
```

# performance - 针对 1 : 0..1 关系的 Oracle 架构优化

> ID：14829896
> 
> 赞同：0
> 
> 时间：2013-02-12T10:04:10.797
> 
> 标签：performance, oracle, query-optimization

我有两个看起来像这样的表：

```
table A: FieldID NUMBER (PK), other non-relevant fields
table B: FieldID NUMBER (PK/FK), other non-relevant fields 
```

这些表映射了 1 : 0..1 的关系。具体来说，在表 A 中插入新行后，在未来的某个时间点，表 B 将填充额外的数据。

这种设计最初优于唯一的扩展表，以便在任何地方都有不可为空的字段（因为无法预测何时填充数据的“B”部分）。

现在...从 A 和 B 中选择连接的性能非常糟糕。我们正在讨论两个表中的几十万行，但是简单的内部连接需要大量时间才能完成。

除了将字段从 B 移到 A 中（为了避免额外的“空”检查，我不想这样做），我该如何提高我的表现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:24:49.410

像这样加入：`SELECT /*+GATHER_PLAN_STATISTICS*/ ... FROM .. WHERE ...;`然后，向我们展示以下输出：`SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(FORMAT=>'ALLSTATS LAST'));`

这将显示执行计划和相关统计信息，在执行查询时估计和实际找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:35:14.817

如果您对所有行的两个表进行等值连接，那么您应该从哈希连接中获得最佳性能。如果可以缓存较小的连接数据集，则成本仅略高于对两个表的完整扫描，这与您可以获得的效率差不多。

如果您只连接少量的行，那么哈希集群可能会有所帮助，因为它在物理上将两个表的行放在一起，并且对于少量的行来说连接非常有效。不利的一面是，对任何一个（尤其是较小的表）的完整扫描将更加昂贵，插入也是如此。

# javascript - 使用 jquery 或纯 Javascript 从字符串中删除公共字符串

> ID：14829902
> 
> 赞同：0
> 
> 时间：2013-02-12T10:04:28.970
> 
> 标签：javascript

怎样才能去掉'tp'。从下面的字符串从它来的每个地方

```
str = " tp.FirstName, tp.FamilyName, tp.DOB, tp.TypeOfLocation
WHERE

tp.DateStamp BETWEEN '2012-02-12 15:13:00' AND '2013-02-12 15:13:00'

AND tp.db_name_id =21
AND

tp.FirstName = 'Darlene'"; 
```

我需要如下结果：

```
FirstName, FamilyName, DOB, TypeOfLocation
WHERE

DateStamp BETWEEN '2012-02-12 15:13:00' AND '2013-02-12 15:13:00'

AND db_name_id =21
AND

FirstName = 'Darlene'"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:05:36.060

简单的：

```
str = str.replace(/\btp\./g, ''); 
```

这使用正则表达式来搜索`tp\.`字符串中所有出现的 ，并将它们替换为空字符串，从而有效地将其删除。
（句点被转义，因为这是正则表达式中的一个特殊字符。它从字面上搜索`tp.`.
The`\b`是一个单词边界，确保它`tp.`位于单词的开头。）

或者，`split`/`join`方法：

```
str = str.split('tp.').join(''); 
```

这将在每次出现（不复制它）时拆分字符串`'tp.'`，然后将数组连接在一起，从而产生一个`'tp.'`被删除的字符串。

# entity-framework - 身份规范设置为 false

> ID：14829911
> 
> 赞同：8
> 
> 时间：2013-02-12T10:04:46.010
> 
> 标签：entity-framework, entity-framework-5

我正在使用`EF5`并`Code First`创建数据库。当实体有 时`Id field`，EF 在数据库中创建这样的字段`Primary Key`并设置`Identity specification`为`true`（自动生成的值）。如何设置`Identity specification to false by default`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-12T10:20:05.623

如果您不想使用身份密钥，您有多种选择。

**选项 1：** 您可以通过删除全局关闭此功能`StoreGeneratedIdentityKeyConvention`：

```
public class YourContext : DbContext {
    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Conventions.Remove<StoreGeneratedIdentityKeyConvention>();
    }
} 
```

您可以通过应用属性或流畅的映射来选择性地选择键并更改它们的行为。

**选项 2：** 属性：

```
public class MyEntity {
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int Id { get; set; }        
} 
```

**选项 3：**流畅的 API：

```
public class YourContext : DbContext {
    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<MyEntity>()
                    .Property(e => e.Id)
                    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
    }
} 
```

# php - 在函数中插入查询

> ID：14829913
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:04:47.193
> 
> 标签：php, mysql, function

我正在尝试将 INSERT 查询放入一个函数中，我想出了这些：

```
function qry_insert($table, $data, $ignore = false)
    {
        $qry = array();
        if (is_array($qry) === true)
        {
            $qry['query'] = 'INSERT ';
            if ($ignore === true)
            {
                $qry['query'] .= 'IGNORE ';
            }

            foreach ($data as $key => $value)
            {
                $data[$key] = $key . ' = ' . $value;
            }

            $qry['query'] .= 'INTO ' . $table . ' SET ' . implode(', ', $data);
        }
        return implode('', $qry);
} 
```

我用这个调用这个函数：

```
$data = array(
    'username'=>'userTest',
    'email'=>'emailTest', 
    'password'=>'passwordTest'
);

qry_insert('users',$data); 
```

我的问题是，我没有收到错误，也没有插入项目。我尝试了所有东西，但仍然没有插入物品。我的配置和数据库设置是正确的，因为当使用下面的行时它正在工作。

```
mysql_query("INSERT INTO users (username,..) VALUES ('userTest'...)"); 
```

我的错误似乎是什么？是否有任何短代码/功能可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:08:36.800

您实际上并没有使用此代码插入任何内容，您仍然需要在调用 qry_insert 之后执行某种 mysqli_insert/query。我的猜测是 Code Igniter 有一些类来处理这个问题。

编辑：

有关示例，请参见[这篇文章。](http://www.phpexpertsforum.com/inserting-data-into-database-in-codeigniter-t2007.html "这个帖子")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:22:24.320

我修好了它！

```
function qry_insert($table, $data){

    $fields = array_keys( $data );  
    $values = array_map( "mysql_real_escape_string", array_values( $data ) );
    mysql_query( "INSERT INTO $table(".implode(",",$fields).") VALUES ('".implode("','", $values )."');") or die( mysql_error() );

}

$data = array(
    'username'  =>  'userTest',
    'email'     =>  'emailTest',
    'password'  =>  'passwordTest'
);

$qry = qry_insert('users',$data); 
```

多谢你们！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:12:02.637

您的函数生成的查询不包含字符串值的引号。它输出：

> INSERT INTO users SET 用户名 = userTest，电子邮件 = emailTest，密码 = passwordTest

如您所见，`userTest`,`emailTest`和周围缺少引号`passwordTest`，因此这将导致查询失败并出现语法错误。此外，您会注意到这是`UPDATE`样式语法而不是[`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)样式。

[`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)最好使用准备好的语句并使用正确的语法重写您的函数，而不是连接值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:12:31.447

您实际上是使用此函数调用生成 sql 查询，您需要使用`mysql_query`将数据插入表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T10:13:08.833

你有没有看过PDO？它基本上可以完成您尝试使用该函数执行的操作，但都包含在 PHP 函数中。

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# php - 如何在 PHP 中转义路径

> ID：14829915
> 
> 赞同：0
> 
> 时间：2013-02-12T10:04:55.090
> 
> 标签：php

基本上我想将 C:\cameraTest\something\ 放入单引号字符串中，但我不完全确定如何正确转义最后的反斜杠，因为如果我这样做，它最终会转义单引号。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:06:53.950

该字符串没有任何反斜杠字符。它只有正斜杠，它们不是转义字符，不需要在字符串中进行特殊处理。

如果它确实有反斜杠字符，它们将被另一个反斜杠转义。

```
'foo\\' # foo\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:07:06.463

使用双反斜杠。第一个将逃脱第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:13:16.443

您也可以考虑使用正斜杠而不是反斜杠。如果我没记错的话，Windows 可以将两者都用作目录分隔符，而其他操作系统则可以使用正斜杠。

如果您尝试将目录放在字符串中以供以后使用，这可能会有所帮助。

# javascript - 对象函数() {location.href = this.options.url); 没有“应用”方法

> ID：14829916
> 
> 赞同：0
> 
> 时间：2013-02-12T10:05:06.353
> 
> 标签：javascript, jquery, highcharts, jquery-events

我正在尝试将 highchart 事件作为 JSON 属性传递，这样当我单击该栏时，它会导航到指定的 url，但出现上述错误。这是
我在 jsfiddle 上运行的代码。所有 highchart 属性都是从 JSON 文件中读取的。

```
 $(function () {
    $(document).ready(function () {
    var chart;
    var container = "summary";
    var data_1 = [24,2];
    var title = "Plant Summary";
    var subtitle = "";
    var data_1url = 'http://www.google.com';
    chart = new Highcharts.Chart({
            "subtitle": {
            "text": subtitle,
            "align": "left",
            "enabled": false,
            "style": {
                "color": "#ffffff",
                "font-size": "12px",
                "font-family": "Segoe UI Light"
            },
            "x": 0
        },
        "yAxis": {
            "title": {
                "text": ""
            },
            "plotLines": [{
                "color": "#808080",
                "width": 1,
                "value": 0
            }]
        },
        "series": [{
            "color": "#d5d5d5",
            "url": data_1url,
            "data": data_1,
            "name": "Level 1"
        }],
        "title": {
            "text": title,
            "align": "center",
            "enabled": false,
            "style": {
                "color": "#ffffff",
                "font-size": "14px",
                "font-family": "Segoe UI Light"
            },
            "x": ""
        },
        "chart": {
            "zoomType": "xy",
            "marginBottom": 50,
            "height": 170,
            "animation": "true",
            "backgroundColor": "transparent",
            "marginRight": 20,
            "renderTo": container,
            "type": "bar"
        },
        "plotOptions": {
            "series": {
                "stacking": "percent",
                "cursor": "pointer",
                "point": {
                    "events": {
                        "click": "function() {location.href = this.options.url);"
                    }
                }
            }
        },
        "xAxis": {

        },
        "exporting": {
            "enabled": false
        },
        "legend": {
            "verticalAlign": "bottom",
            "align": "center",
            "enabled": false,
            "borderWidth": 0,
            "y": 0,
            "x": 0,
            "layout": "horizontal"
        }
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:16:01.723

这是一个语法错误，您需要使用，`}`而不是`)`：

```
"function() {location.href = this.options.url);"
---------------------------------------------^ 
```

使用`}`.

而且，你没有把 s 括`function()`在里面`"`。所以最终的代码将是：

```
"events": {
    "click": function() {location.href = this.options.url;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:32:18.487

问题在于 JSON 中的传递函数，可能的解决方案是添加`( function() {} )`到您的代码中，然后评估该值：http: [//jsfiddle.net/g5MHF/2/](http://jsfiddle.net/g5MHF/2/)

另外，应该有`this.series.options.url`根据你的数据（你的系列有网址，不是一个点）。

# php - PHP : 搜索类似数据库的数组 "like %key%"

> ID：14829920
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:05:27.257
> 
> 标签：php, arrays

我有一个这种格式的数组：

```
countries(
    [0] = Array
        (
            [0] = 1
            [1] = USA

        )

    [1] = Array
        (
            [0] = 93
            [1] = Afghanistan
        )

    [2] = Array
        (
            [0] = 358
            [1] = Finland
        )

) 
```

=======

```
[0] country code
[1] country name 
```

我想搜索这个数组以获取该号码属于哪个国家/地区..

示例：358545454554，我如何搜索数组以获取哪个国家，在这种情况下=芬兰请考虑性能，所以我想要最快的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:17:56.317

要匹配第一个数字，请将这些数字的[子字符串](http://php.net/manual/en/function.substr.php)与您的结果进行比较：（[演示](http://ideone.com/kCp02e)）

```
<?php
$search = '358545454554';
$countries = [[1, 'USA'], [93, 'Afghanistan'], [358, 'Finland']];
$country = null;
foreach ($countries as $c) {
  if (substr($search, 0, strlen($c[0])) == $c[0]) {
    $country = $c[1];
    break;
  }
}
echo ($country === null) ? 'No country found!' : $country; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:09:32.850

```
if (strpos($string, $word) === FALSE) {
   ... not found ...
} 
```

请注意，这`strpos`是区分大小写的，如果您想要不区分大小写的搜索，请`stripos()`改用。

还要注意`===`, 强制进行严格的相等测试。`strpos`如果“needle”字符串位于“haystack”的开头，则可以返回有效的 0。通过强制检查一个实际的布尔假（又名 0），你消除了那个假阳性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:15:04.297

```
$countries =  array(
    array('1','USA'),
    array('93','Afghanistan'),
    array('358','Finland'),
    array('3','India')
);
$input_code = '358545454554';
$searched = array();
foreach($countries as $country) {
    if (strpos($input_code, $country[0]) !== FALSE) 
        $searched[] = $country[1];
}
print_r($searched); 
```

请访问此处（[演示](http://ideone.com/pZqPvZ)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:52:14.070

您可以为此使用 array_filter。第一个变体在国家 ID 中的任何位置搜索数字，因此 3581545454554 匹配美国和芬兰，第二个变体使用正则表达式仅过滤以相同数字开头的 id。

```
$data = array(
    array(1, 'USA'),
    array(93, 'Afghanistan'),
    array(358,'Finland')

);
$term = '358545454554';

// in case you want to match it anywhere in the term string...
$result = array_filter($data, function($elem) use($term) {
    return (strpos((string) $term,(string) $elem[0]) !==false ) ? true : false;
});

var_dump($result);

// in case you want to match only from start
$result = array_filter($data, function($elem) use($term) {
    return preg_match('/^'.$elem[0].'/',$term);
});

var_dump($result); 
```

# android - Android：列表视图中的多个画廊

> ID：14829921
> 
> 赞同：0
> 
> 时间：2013-02-12T10:05:31.627
> 
> 标签：android, listview, gallery

我正在努力在列表视图中实现多个画廊。

列表视图有一个适配器（BaseAdapter），它用数据填充列表。适配器由一个文本视图（指定画廊的名称）和一个画廊组成。在这个适配器中，我实例化了 Gallery 对象并将一个新的适配器（用图像填充画廊）附加到画廊对象。

问题如下：每一行都填充了一个名称和一个画廊对象——这很好用。但是每个画廊只有一张图片，而不是 10 张图片（测试数据）。

代码片段：

**用于填充列表视图的适配器**

```
public class Adapter_GalleryList extends BaseAdapter
{
private static final String ERRORTAG = "ERROR_CHECKING --> ";   

//Components
private Context context;

//Global variables
private Object_Event[] events;

public Adapter_GalleryList(Context context, Object_Event[] events)
{
    this.context = context;
    this.events = events;
}

public int getCount()
{
    return events.length;
}

public Object getItem(int position)
{
    return position;
}

public long getItemId(int position)
{
    return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{
    //Inflate the each row of the list with the gallerylist layout
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.row_gallerylist, parent , false);

    //Configure a typeface for the text headings
    Typeface quackery = Typeface.createFromAsset(context.getAssets(), "fonts/tpf_quackery.ttf");

    //Instantiate the row's components
    TextView textEventName = (TextView) rowView.findViewById(R.id.event_name);
    Gallery eventGallery = (Gallery) rowView.findViewById(R.id.gallery);

    //Populate the components with data
    textEventName.setTypeface(quackery);
    textEventName.setText(events[position].Name);

    Integer[] images = new Integer[10]; 
    images[0] = R.drawable.button_events;
    images[1] = R.drawable.button_events;
    images[2] = R.drawable.button_events;
    images[3] = R.drawable.button_events;
    images[4] = R.drawable.button_events;
    images[5] = R.drawable.button_events;
    images[6] = R.drawable.button_events;
    images[7] = R.drawable.button_events;
    images[8] = R.drawable.button_events;
    images[9] = R.drawable.button_events;

    Adapter_EventGallery adapter = new Adapter_EventGallery(context,images);
    eventGallery.setAdapter(adapter);

    //OnClickListener for images in the gallery
    eventGallery.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id)
        {
            Toast.makeText(context, "" + position, Toast.LENGTH_SHORT).show();
        }
    });

    return rowView;
}
} 
```

**用于填充独立画廊的适配器**

```
public class Adapter_EventGallery extends BaseAdapter
{
private static final String ERRORTAG = "ERROR_CHECKING --> ";

//Component variables
    private Context adapterContext;

private Integer[] images;

public Adapter_EventGallery(Context passedContext, Integer[] images)
{
    adapterContext = passedContext;
    this.images = images;
}

public int getCount()
{
    Log.i(ERRORTAG, "Length: " + images.length);
    return images.length;
}

public Object getItem(int position)
{
    return position;
}

public long getItemId(int position)
{
    return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{
    Log.i(ERRORTAG, "EventGallery Position: " + position);

    ImageView galleryImage = new ImageView(adapterContext);

    galleryImage.setImageResource(images[position]);
    galleryImage.setLayoutParams(new Gallery.LayoutParams(250, 250));
    galleryImage.setScaleType(ImageView.ScaleType.FIT_XY);
    //galleryImage.setBackgroundResource(mGalleryItemBackground);

    return galleryImage;
} 
```

}

任何想法或指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:27:39.333

在 KarolGusak 的帮助下，我设法解决了这个问题。问题实际上是画廊并没有像 Karol Gusak 指出的那样跨越整个宽度。

一个菜鸟的错误...

# asp.net-mvc - JSON stringify 无法通过 IIS 调用

> ID：14829924
> 
> 赞同：0
> 
> 时间：2013-02-12T10:05:37.150
> 
> 标签：asp.net-mvc, model-view-controller, jquery

在我的 asp.net MVC 3 应用程序中。

以下 ajax 调用在我的开发机器上运行良好，但是当我在 IIS 服务器上发布应用程序时它失败或对象总是发送空值来保存函数。

```
 $.ajax
        ({
            url: '../MyPath/save',
            type: 'POST', 
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify({'Model': object}),
            success: function (data) {
                alert("success");
                return true;
            }
          });

    [HttpPost]
    public JsonResult Save(SampleModel Model) 
           * Model values always null over IIS *
    { 

    } 
```

我什至尝试使用@url.action()，甚至尝试在另一个浏览器中，但同样的问题仍然存在。

任何人都知道为什么这不适用于 IIS 调用。？

请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:20:56.180

Your JavaScript will result in double wrapping your model, the binding process will be looking for `Model` property in the `SampleModel` class. To bind directly it should rather be:

```
$.ajax({
    url: '../MyPath/save',
    type: 'POST', 
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify(object),
    success: function (data) {
        alert("success");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:17:18.803

我认为你应该使用`jQuery.parseJSON()`

```
 $.ajax({
        url: '../MyPath/save',
        type: 'POST', 
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: jQuery.parseJSON({'Model': object}),
        success: function (data) {
            alert("success");
        }
     }); 
```

来自文档：

```
Passing in a malformed JSON string may result in an exception being thrown. 
For example, the following are all malformed JSON strings: 
```

*   `{test: 1}`（*test 周围没有双引号*）。
*   `{'test': 1}`（*'test' 使用单引号而不是双引号*）。

[**更多信息**](http://api.jquery.com/jQuery.parseJSON/)

# c# - PasswordStrength Extender 不显示文本描述

> ID：14829935
> 
> 赞同：0
> 
> 时间：2013-02-12T10:06:00.757
> 
> 标签：c#, asp.net

我正在尝试在我的网络应用程序中实现密码强度功能。但是，没有出现文字说明，只出现“xx 字符”。我的代码有什么问题？

```
<tr>
    <td>
        <asp:Label ID="Label6" runat="server" Text="Password"></asp:Label>
    </td>
    <td>
        <asp:TextBox ID="txtPassword" runat="server" TextMode="Password" />
    </td>
</tr>

<asp:PasswordStrength ID="txtPassword_PasswordStrength" runat="server" 
Enabled="True" TargetControlID="txtPassword" PreferredPasswordLength="10" 
TextCssClass="TextIndicator_TextBox1" 
RequiresUpperAndLowerCaseCharacters="True"  
HelpStatusLabelID="Label10" 
TextStrengthDescriptions="Poor;Weak;Average;Strong;Excellent" 
StrengthIndicatorType="Text" PrefixText="Strength:" 
MinimumLowerCaseCharacters="0" 
MinimumNumericCharacters="0" MinimumSymbolCharacters="0" 
MinimumUpperCaseCharacters="0" DisplayPosition="RightSide" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:16:33.050

尝试这个..

```
<asp:PasswordStrength ID="txtPassword_PasswordStrength" runat="server" 
Enabled="True" TargetControlID="txtPassword" PreferredPasswordLength="10" 
TextCssClass="TextIndicator_TextBox1" 
RequiresUpperAndLowerCaseCharacters="True"  
HelpStatusLabelID="Label10" 
TextStrengthDescriptions="Poor;Weak;Average;Strong;Excellent" 
StrengthIndicatorType="Text" PrefixText="Strength:" 
MinimumLowerCaseCharacters="1" 
MinimumNumericCharacters="1" MinimumSymbolCharacters="1" 
MinimumUpperCaseCharacters="1" DisplayPosition="RightSide" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:10:56.647

缺少财产

```
CalculationWeightings="25;25;15;35" 
```

如果您将这些道具更改为 1，因为当前设置对我来说似乎不合逻辑

```
RequiresUpperAndLowerCaseCharacters="True"  
MinimumLowerCaseCharacters="0"
MinimumUpperCaseCharacters="0" 
```

Label10 在吗？

# database - SQL Server 2008 存储过程环境变量

> ID：14829936
> 
> 赞同：0
> 
> 时间：2013-02-12T10:06:02.853
> 
> 标签：database, sql-server-2008, variables, stored-procedures

我在两个测试数据库中有许多表。第一个数据库是最新的，第二个是一年前的快照。我有一些存储的过程挂在第一个数据库上，它们也引用了第二个数据库。

我的问题是，我应该使用什么方法，这样我在投入生产时就不必修改存储的过程。

如果这是一个编码问题，我会使用环境变量。我对 sql server 2008 有哪些选择。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:23:46.127

有点难以理解您的问题，更多细节会有所帮助。

可能您的存储过程不应该绑定到特定的数据库，不是吗？如果不是，我建议删除对特定数据库的引用。

我们在公司中使用多数据库存储过程和触发器。根据生产系统，数据库名称可以更改。当我们安装或升级数据库时，我们使用与 DB 无关的 SQL 安装脚本，数据库被识别为特定的变量关键字，然后我们使用类似 sed 的脚本，用 T 中的实际数据库名称查找和替换数据库名称变量关键字-SQL，然后我们应用特定于 DB 的 T-SQL 脚本。它简单、快速且可移植到任何生产数据库，不替换关键字的 T-SQL 是无效的（所以如果不替换数据库名称关键字就无法执行）。

但这是一个非常特殊的情况，我很少听说跨数据库存储过程，它使系统和权限管理变得相当复杂。

我没有看到使用环境变量的意义，这可能会让人不知所措，并且您必须在执行之前将请求构建为字符串，这是不推荐的。无论如何，您都必须重写存储过程才能以这种方式进行。

这是我在 Stack Overflow 上的第一次回答尝试。我希望这个答案有帮助。

问候。

# android - 如何在 TextView 中为特定文本添加下划线？

> ID：14829942
> 
> 赞同：0
> 
> 时间：2013-02-12T10:06:25.263
> 
> 标签：android, android-layout, android-edittext

```
<TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="2dp"
        android:layout_marginLeft="10dp"
        android:text="Don&apos;t worry we will never share this with anyone\nBy Clicking register you are indicating that you have read and agreed to the \n **Terms of services**  and **Privacy Policy**"
        android:textColor="@android:color/black" 
        android:textSize="8.5sp"
    /> 
```

从上面的代码中，我需要强调粗体突出显示的服务条款和隐私政策。

我曾尝试使用`<u></u>`但没有奏效。

另外我需要增加服务条款的字体，仅隐私政策

请给一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:14:52.710

您需要在文件中定义文本。是的`strings.xml`，您也可以在其中定义格式化的 html。

所以你可以试试这个：

```
<string name="nice_html">
<![CDATA[Don&apos;t worry we will never share this with anyone<br/>
By Clicking register you are indicating that you have read and agreed to the <br/>
 <u>Terms of services</u>  and <u>Privacy Policy</u>
]]></string> 
```

然后，在您的代码中：

`TextView foo = (TextView)findViewById(R.id.foo);` `foo.setText(Html.fromHtml(getString(R.string.nice_html)));`

[原始答案](https://stackoverflow.com/questions/3235131/set-textview-text-from-html-formatted-string-resource-in-xml/3237438#3237438)。

这是最干净的方法。Inshallah。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:12:12.963

```
String mString=new String("Don&apos;t worry we will never share this with anyone\nBy Clicking register you are indicating that you have read and agreed to the \n **Terms of services**  and **Privacy Policy**");
SpannableString span = new SpannableString(mString);
span.setSpan(new UnderlineSpan(), index of T in terms, mString.length(), 0);
mTextView.setText(span); 
```

# php - 如何集成 Drupal 7x 和 Moodle 2x？

> ID：14829944
> 
> 赞同：1
> 
> 时间：2013-02-12T10:06:31.070
> 
> 标签：php, drupal, drupal-7, drupal-modules, moodle

大家好，目前我正在研究 Drupal 7x 和 Moodle 2x 集成，但我无法集成。我面临**错误：尝试获取用户索引时出现问题！**.

```
Notice: Trying to get property of non-object in /var/www/project1/auth/drupalservices/REST-API.php on line 201
PHP Notice:  Trying to get property of non-object in /var/www/project1/auth/drupalservices/REST-API.php on line 202

Notice: Trying to get property of non-object in /var/www/project1/auth/drupalservices/REST-API.php on line 202
RemoteAPI Object
(
    [gateway] => http://localhost
    [endpoint] => /testproject
    [status] => 1
    [session] => 
    [sessid] => 
)
ERROR: Problems trying to get index of users! 
```

对于 Drupal 和 Moodle 集成，我将此链接放在 git hub 上。对于 Drupal：- [https://github.com/cannod/moodle-drupalservices/wiki/Installation-Drupal-Side](https://github.com/cannod/moodle-drupalservices/wiki/Installation-Drupal-Side)

对于 Moodle：- [https://github.com/cannod/moodle-drupalservices/wiki/Installation-Moodle-Side](https://github.com/cannod/moodle-drupalservices/wiki/Installation-Moodle-Side)

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:15:50.447

如果您愿意将 Drupal 与 Moodle 集成，您可以查看[Drupal 商务 Moodle](http://drupal.org/project/commerce_moodle)集成。它将 Drupal 商务与 Moodle 集成在一起。

也许这会有所帮助。

# macos - node.js 上的 Couchbase 2.0 在使用多个 get 时崩溃

> ID：14829946
> 
> 赞同：1
> 
> 时间：2013-02-12T10:06:51.920
> 
> 标签：macos, node.js, crash, couchbase

我正在使用 Couchbase 2.0、node.js 0.8.19、couchbase 模块 0.0.11 和 libcouchbase 2.0.3 在 Mac OS X Mountain Lion 10.8.2 上对项目进行原型设计。

如果 Couchbase 存储桶为空（这两个文档不存在），则下面的代码会使用以下代码使节点进程崩溃。我使用调试构建节点并使用 gdb 进行回溯。

```
node_g(96149,0x7fff75619180) malloc: *** error for object 0x10300fb7f: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug

Program received signal SIGABRT, Aborted.
0x00007fff8bbf7212 in __pthread_kill ()
(gdb) backtrace
#0  0x00007fff8bbf7212 in __pthread_kill ()
#1  0x00007fff8cd6eaf4 in pthread_kill ()
#2  0x00007fff8cdb2dce in abort ()
#3  0x00007fff8cd86959 in free ()
#4  0x0000000101e91c33 in lcb_server_purge_implicit_responses ()
#5  0x0000000101e89f09 in lcb_server_event_handler ()
#6  0x0000000101adebab in maybe_callout [inlined] () at :34
#7  0x0000000101adebab in async_cb (handle=<value temporarily unavailable, due to optimizations>, status=0) at ../io/common.c:68
#8  0x00000001000442ea in uv__async_io (loop=<value temporarily unavailable, due to optimizations>, handle=0x1c042a000000000, events=1060378680) at ../deps/uv/src/unix/async.c:117
#9  0x0000000100049c24 in ev_invoke_pending (loop=0x10082bd68) at ../deps/uv/src/unix/ev/ev.c:2145
#10 0x00000001000445e8 in uv__run (loop=0x10082b420) at ../deps/uv/src/unix/core.c:248
#11 0x0000000100044517 in uv_run (loop=0x10082b420) at ../deps/uv/src/unix/core.c:265
#12 0x0000000100008d9b in node::Start (argc=<value temporarily unavailable, due to optimizations>, argv=0x7fff5fbffb98) at ../src/node.cc:2974
#13 0x0000000100000cb4 in start () 
```

如果这两个文档已经存在，则此方法有效。仅当文档不存在时才会崩溃。如果我不使用 multi-get（例如视图）来检查文档是否存在 - 它可以工作。如果您问我为什么要明确检查是否存在并且不依赖 CAS - 大多数文档已经存在，所以无论如何我都必须在更新之前提取它们。

相同的代码在具有相同版本的 node.js 和库的（亚马逊托管的）CentOS 6 映像上运行良好。

我做错了什么还是Mac OS X有问题？这是一个简单的例子来说明问题。完整代码将现有数据与新文档合并，并进行 CAS 检查，此处省略。

我找不到在哪里报告 Couchbase 的错误。[JIRA](http://www.couchbase.com/issues/secure/Dashboard.jspa)不开放，[论坛](http://www.couchbase.com/forums/thread/couchbase-2-0-node-js-crash-mac-os-x-mountain-lion)有点蹩脚。

```
var async = require("async");
var couchBase = require("couchbase");

var json = {
  "id1": {
    "id": "id1",
    "name": "Name 1"
  },

  "id2": {
    "id": "id2",
    "name": "Name 2"
  }
};

var config = {
  "host": "localhost",
  "port": 8091,
  "username": "Administrator",
  "password": "password",
  "bucket": "requests"
};

couchBase.connect(config, function(err, bucket) {
  if (err) {
    console.log("Unable to connect to Couchbase bucket [" + config.bucket + "]", err);
    process.exit(1);
  }

  console.log("Connected to Couchbase");

  var ids = [];
  var jsonDocs = [];
  for (var key in json) {
    if (json.hasOwnProperty(key)) {
      var jsonDoc = json[key];
      var id = jsonDoc.id;

      jsonDocs.push(jsonDoc);
      ids.push(id);
    }
  }

  bucket.get(ids, null, function(err, docs, metas) {
    if (err) {
      for (var j = 0; j < err.length; j++) {
        if (err[j].code != 13) {
          console.log({ err: err }, "Unable to get existing entries using multiple get. Error in element [" + j + "]");
          process.exit(1);
        }
      }
    }
    console.log("Checked all docs for existance");

    async.map(jsonDocs, function(doc, callback) {
      bucket.set(doc.id, doc, {}, function(err) {
        callback(err);
      });
    }, function(err, results) {
      if (err) {
        console.log("Unable to save all entries", err);
        process.exit(1);
      }

      console.log("Saved all entries");
      process.exit(0);
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:43:02.390

我在我的应用程序和您的示例代码中遇到了同样的问题。我将记录一个错误并将其放入下一个 SDK 版本的修复列表中。

JIRA 是： http: [//www.couchbase.com/issues/browse/JSCBC-16](http://www.couchbase.com/issues/browse/JSCBC-16)

您无法记录错误？

我也在关注论坛，也在那里回答了你的问题。

# javascript - 如何使用 Javascript/jQuery 应用 CSS 字符串而不解析/标记来检索属性值对？

> ID：14829948
> 
> 赞同：13
> 
> 时间：2013-02-12T10:07:05.340
> 
> 标签：javascript, jquery, css

我有一些字符串形式的 CSS，*例如*

```
border: solid 1px #0000ff; background-color: #ffff00; 
```

我想将该 CSS 应用于`<div>`. 但是所有使用 jQuery 应用 CSS 的示例都涉及使用该`css`方法，并且要走这条路，我必须用分号 ( `;`) 拆分 CSS 字符串以检索属性-值对，然后通过 ( `:`) 来检索属性和价值，并且做

```
$('myDiv').css(property, value); 
```

**有没有办法直接应用 CSS，从它的字符串形式？**

我担心如果 CSS 值可以包含这些字符（*例如*在`url`子值中），那么对 CSS（分号和冒号）的这种天真的解析会失败。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T10:11:32.040

您可以检索现有`style`属性，然后设置一个新属性：

```
var target = $("#target");
target.attr("style", target.attr("style") + "; " + yourString); 
```

[实例](http://jsbin.com/iyijon/1)| [来源](http://jsbin.com/iyijon/1/edit)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T10:11:33.383

假设没有使用该`style`属性在元素上设置内联样式，以下将起作用：

```
$("#foo").attr('style', 'border: solid 1px #0000ff; background-color: #ffff00;'); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/uGYUX/)

请注意，这不是一个理想的解决方案。一个更好的方法是将所需的样式放在一个类中并`addClass()`改为使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T10:13:37.087

首先使用选择器获取 div 元素：

```
var div = document.getElementById("myDiv"); // myDiv is the id right? 
```

然后获取当前的css：

```
var css = div.getAttribute("style"); 
```

如果是，`null`则将其设置为新样式。否则附加新样式：

```
var style = 'border: solid 1px #0000ff; background-color: #ffff00;';
if (css === null) css = style;
else css += style; 
```

最后更新div的样式：

```
div.setAttribute("style", css); 
```

就是这样。查看演示：http: [//jsfiddle.net/xUWzw/](http://jsfiddle.net/xUWzw/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-27T04:32:37.227

还有另一种添加基于字符串的样式的方法。如果下面是样式字符串 -

```
 border: solid 1px #0000ff; background-color: #ffff00; 
```

然后

```
 var div = document.getElementById('myDiv');
    div.style.cssText = 'border: solid 1px #0000ff; background-color: #ffff00;'; 
```

小提琴：[https ://jsfiddle.net/eja0zea4/](https://jsfiddle.net/eja0zea4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T10:11:20.410

您可以使用 jQuery .attr() 函数将 css 字符串直接添加到 div 到 style 属性中，但更好的方法是使用 jQuery .addClass() 函数为您的 div 分配一个类，并将 css 属性添加到班级。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-19T02:32:32.593

只需使用jQuery的功能 `.attr('style', 'somthing...')`，非常好用，不用考虑容错问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T10:10:49.350

为什么不创建一个 CSS 类而只使用[jQuery中的 addClass removeClass 方法](http://api.jquery.com/addClass/)

```
.myClass {
   border: solid 1px #0000ff; 
   background-color: #ffff00;
} 
```

然后

```
$(div).addClass('myClass'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-27T04:44:28.863

您可以将其作为对象检索

```
$('myDiv').css({property:"value",property:"value",property:"value"}); 
```

# optimization - 我如何查看 LLVM 的 opt 使用了哪些优化通道？

> ID：14829959
> 
> 赞同：3
> 
> 时间：2013-02-12T10:07:39.343
> 
> 标签：optimization, llvm

我想了解和修改 LLVM 中`opt`用于不同硬件架构的通行证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-20T16:37:20.650

`opt`可以告诉您它在给定的 LLVM IR 上运行了哪些通道：

```
$ opt -O2 -debug-pass=Arguments example_file.ll -disable-output
Pass Arguments:  -tti -no-aa -tbaa -scoped-noalias -assumption-cache-tracker -targetlibinfo -basicaa -verify -simplifycfg -domtree -sroa -early-cse -lower-expect
Pass Arguments:  -targetlibinfo -tti -no-aa -tbaa -scoped-noalias -assumption-cache-tracker -basicaa -ipsccp -globalopt -deadargelim -domtree -instcombine -simplifycfg -basiccg -prune-eh -inline-cost -inline -functionattrs -domtree -sroa -early-cse -lazy-value-info -jump-threading -correlated-propagation -simplifycfg -domtree -instcombine -tailcallelim -simplifycfg -reassociate -domtree -loops -loop-simplify -lcssa -loop-rotate -licm -loop-unswitch -instcombine -scalar-evolution -loop-simplify -lcssa -indvars -loop-idiom -loop-deletion -loop-unroll -mldst-motion -domtree -memdep -gvn -memdep -memcpyopt -sccp -domtree -bdce -instcombine -lazy-value-info -jump-threading -correlated-propagation -domtree -memdep -dse -loops -loop-simplify -lcssa -licm -adce -simplifycfg -domtree -instcombine -barrier -float2int -domtree -loops -loop-simplify -lcssa -loop-rotate -branch-prob -block-freq -scalar-evolution -loop-accesses -loop-vectorize -instcombine -scalar-evolution -slp-vectorizer -simplifycfg -domtree -instcombine -loops -loop-simplify -lcssa -scalar-evolution -loop-unroll -instcombine -loop-simplify -lcssa -licm -scalar-evolution -alignment-from-assumptions -strip-dead-prototypes -elim-avail-extern -globaldce -constmerge -verify 
```

查看源代码，这通常是以下问题：

实例化 a[`PassManagerBuilder`](http://llvm.org/docs/doxygen/html/classllvm_1_1PassManagerBuilder.html)并调用[`SetOptLevel`](http://llvm.org/docs/doxygen/html/classllvm_1_1PassManagerBuilder.html#a52b96ef67bb93fa3a7b461fe2b73bb4f). 然后，构建器[将通道添加为 populateModulePassManager 的一部分](http://llvm.org/docs/doxygen/html/PassManagerBuilder_8cpp_source.html#l00188)。

请注意，[默认的传递顺序已针对 C/C++ 进行了调整，](http://llvm.org/docs/Frontend/PerformanceTips.html#pass-ordering)对于其他语言可能不是最佳的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:48:56.240

假设您使用的是 clang，请使用 -debug-pass=Arguments 选项查看在每个优化级别运行的通道

# javascript - CKEditor 和转义元素

> ID：14829961
> 
> 赞同：6
> 
> 时间：2013-02-12T10:07:44.113
> 
> 标签：javascript, twitter-bootstrap, escaping, ckeditor, font-awesome

我使用[CKEditor](http://en.wikipedia.org/wiki/CKEditor)来更新我网站上的[CMS](http://en.wikipedia.org/wiki/Content_management_system)内容。我还使用了 FontAwesome，其中包括一组精美的图标，可以像这样显示

```
<i class="icon-envelope"></i> 
```

问题是 CKEditor`i`在客户端转义了这个标签，我在源代码模式下看不到它。

我怎样才能允许这个标签？我试过`CONFIG.removeFormatTags = ''`了，但它死无济于事。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T11:28:11.380

它被删除，因为它是空的。在其中放置一些不间断的空间`&nbsp;`或零宽度空间`&#8203;`以保留您的标签。

您也可以`i`从`CKEDITOR.dtd.$removeEmpty`对象中删除。但是，这可能会破坏其他`<i>`没有`class="icon-envelope"`. 要解决此问题，您需要使用[数据处理器](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Data_Processor)来过滤`<i>'s`没有`class="icon-envelope"`. 我猜很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T07:22:33.517

下面对我有用.. 感谢 Vince Kronlein 指出 config.fillEmptyBlocks

```
CKEDITOR.editorConfig = function( config ) {
       config.fillEmptyBlocks="&#8203;";  
}
CKEDITOR.dtd.$removeEmpty['span'] = false;
CKEDITOR.dtd.$removeEmpty['i'] = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-11T12:56:32.800

您可以在 CKEditor 中显示的 html 代码的情况下使用 unicode 来`&zwnj;`在波斯语等语言中制作零宽度非连接符（迷你空间）。

می‌خواهم می‌توانم

# javascript - 又一个 setInterval & 这不起作用

> ID：14829962
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:07:45.970
> 
> 标签：javascript

我在 JavaScript`this`中遇到了问题。`setInterval`我在这里阅读了一些关于 SO 的解决方案，但无法让它们为我工作。这是我的代码：

```
var timer_func = function(){
    var that = this;
    var inspect = function(clusters){

        var clength = "";

        for(var i = 0; i < that.clusters.length; i++){   //---> undefined that.clusters.length
            clength += that.clusters[i].processes.length + ",";
        }

        console.log(clength);
    }

    var inspector = setInterval(inspect, 1000);
};
//much later
timer_func(); 
```

我是 100% 我在调用之前初始化了`this.clusters`我的代码中调用的内容`timer_func()`，但显然我尝试访​​问的变量是未定义的（而如果我在超时之外的其他地方打印它不是）。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:13:34.350

我想说问题在于你如何调用`timer_func()`，而不是使用`setInterval()`. 如果您想`this` *在内部* `timer_func()`引用您通过`this` *外部* `timer_func()`设置属性的同一对象，请按如下方式调用它：

```
timer_func.call(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:21:26.280

永远不会在对象上定义属性`clusters`，也不会将参数`clusters`传递给内部函数。您可以选择两个方向之一，指定属性或传递参数。

## 指定属性

```
var timer_func = function(){
    this.clusters = ["cluster1", "cluster2"];
    var that = this;
    var inspect = function(clusters){

        var clength = "";

        for(var i = 0; i < that.clusters.length; i++){   //---> undefined that.clusters.length
            clength += that.clusters[i].processes.length + ",";
        }

        console.log(clength);
    }

    var inspector = setInterval(inspect, 1000);
};
//much later
timer_func(); 
```

## 传递参数

```
var timer_func = function(){
    var that = this;
    var inspect = function(clusters){

        var clength = "";

        for(var i = 0; i < clusters.length; i++){
            clength += clusters[i].processes.length + ",";
        }

        console.log(clength);
    }

    var inspector = setInterval(function(){
       var clusters = ["cluster1", "cluster2"]; 
       inspect(clusters)
    }, 1000);
};
//much later
timer_func(); 
```

* * *

# php - Paypal 脚本工作，但没有转帐

> ID：14829965
> 
> 赞同：0
> 
> 时间：2013-02-12T10:07:50.740
> 
> 标签：php, codeigniter, paypal, paypal-sandbox

我在我的脚本中集成了贝宝支付网关，

我已经在贝宝沙盒中对其进行了测试，并且效果很好。然后我为“paypal live”制作了脚本，当然只是更改了名为 $environment 的变量。

它完全没有任何错误，但问题是，没有钱被转移到贝宝账户..

我已经检查了 paypal api 的签名等，这完全没问题..

但是还是没有转钱。。

我虽然可以在这里发布以寻求帮助

```
function paiement_succes()
{
  // Obtain the token from PayPal.
  if(!array_key_exists('token', $_REQUEST)) 
         exit('Token is not received.');
  // Set request-specific fields.
  $token = urlencode(htmlspecialchars($_REQUEST['token']));
  // Add request-specific fields to the request string.
  $nvpStr = "&TOKEN=$token";
  // Execute the API operation; see the PPHttpPost function above.
  $httpParsedResponseAr = $this->PPHttpPost('GetExpressCheckoutDetails', $nvpStr);
  if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) 
      {
          $this->load->model('payment_model');
          $this->payment_model->paypal_payment();
          $msg = "<label>Thank you !! your payment is successfully done</label>
              <a href='".base_url()."envoie_de_photos/envoyer_vos_photos"."'>Go To Photo Uploading</a>";
          echo $msg;
      } 
  else  
      {
        //exit('GetExpressCheckoutDetails failed: ' . print_r($httpParsedResponseAr, true));
        echo "Payment failed for unknown reason";
      }
}

function pay_by_paypal()
{

        $environment = 'live';
        $_SESSION['item_name']=$this->input->post('item_name');
        $_SESSION['amount']=$this->input->post('amount');
        $_SESSION['currency_code']=$this->input->post('currency_code');
        $_SESSION['no_of_photo']=$this->input->post('no_of_photo');

        $qty=urlencode("1");
        $product_name=urldecode($_SESSION['item_name']);
        $price=urlencode($_SESSION['amount']);
        $currencyID = urlencode($_SESSION['currency_code']);

// or other currency code ('GBP', 'EUR', 'JPY', 'CAD', 'AUD')
     $paymentType = urlencode('Order'); 
     $nvpStr=""; 
     $returnURL = (base_url()."paiement/paiement_succes");
     $cancelURL = (base_url()."paiement/paiement_echec");  
     $i=0;
     $total_amount=0;

     $str = "&METHOD=SetExpressCheckout
&RETURNURL=$returnURL
&CANCELURL=$cancelURL
&L_PAYMENTREQUEST_0_NAME0=$product_name
&L_PAYMENTREQUEST_0_NUMBER0=$qty
&L_PAYMENTREQUEST_0_AMT0=$price
&L_PAYMENTREQUEST_0_DESC0=$product_name
&PAYMENTREQUEST_0_AMT=$price
&PAYMENTREQUEST_0_CURRENCYCODE=$currencyID"; 
     $nvpStr=$nvpStr.$str;
$httpParsedResponseAr = $this->PPHttpPost('SetExpressCheckout', $nvpStr);

if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"]))
    {
    // Redirect to paypal.com.
    $token = urldecode($httpParsedResponseAr["TOKEN"]);
    $payPalURL = "https://www.paypal.com/webscr&cmd=_express-checkout&token=$token";
    if("sandbox" === $environment) 
            {
        $payPalURL = "https://www.$environment.paypal.com/webscr&cmd=_express-checkout&token=$token";
        }
    header("Location: $payPalURL");
    exit;
} 
else  
    {
    exit('SetExpressCheckout failed: ' . print_r($httpParsedResponseAr, true));
}

}

/** SetExpressCheckout NVP example; last modified 08MAY23.
 *
 *  Initiate an Express Checkout transaction. 
*/

/**
 * Send HTTP POST Request
 *
 * @param   string  The API method name
 * @param   string  The POST Message fields in &name=value pair format
 * @return  array   Parsed HTTP Response body
 */
private function PPHttpPost($methodName_, $nvpStr_) {
    //global $environment;
        $environment = 'live';  // or 'beta-sandbox' or 'live'
    // Set up your API credentials, PayPal end point, and API version.
    $API_UserName = urlencode('exmaple_api1.sazet_rey.com');
    $API_Password = urlencode('BH89Hx&*09$%bhy65');
    $API_Signature = urlencode('sdfr$%$VGBHHYT899999090-9987777');
    $API_Endpoint = "https://api-3t.paypal.com/nvp";
    if("sandbox" === $environment) {
        $API_Endpoint = "https://api-3t.$environment.paypal.com/nvp";
    }
    $version = urlencode('65.0');

    // Set the curl parameters.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);

    // Turn off the server and peer verification (TrustManager Concept).
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);

    // Set the API operation, version, and API signature in the request.
    $nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

    // Set the request as a POST FIELD for curl.
    curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

    // Get response from the server.
    $httpResponse = curl_exec($ch);

    if(!$httpResponse) {
        exit("$methodName_ failed: ".curl_error($ch).'('.curl_errno($ch).')');
    }

    // Extract the response details.
    $httpResponseAr = explode("&", $httpResponse);

    $httpParsedResponseAr = array();
    foreach ($httpResponseAr as $i => $value) {
        $tmpAr = explode("=", $value);
        if(sizeof($tmpAr) > 1) {
            $httpParsedResponseAr[$tmpAr[0]] = $tmpAr[1];
        }
    }

    if((0 == sizeof($httpParsedResponseAr)) || !array_key_exists('ACK', $httpParsedResponseAr)) {
        exit("Invalid HTTP Response for POST request($nvpreq) to $API_Endpoint.");
    }

    return $httpParsedResponseAr;
} 
```

我很感激对此的一些帮助，如果发生任何事情，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:08:15.003

检查并确保您没有传递名为“主题”的变量。如果您将其传递过来，这将导致您的 API 调用尝试传递到您在主题中传递的 PayPal 帐户上。但是，如果您确实拥有权限并获得了成功的回复，那么这笔钱将在该帐户中，而不是您的 API 凭证来自的那个帐户。如果您没有 API 权限，您将收到一条错误提示。当您进行 API 调用时，您是否收到任何类型的响应。如果是这样，你要回什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:13:24.697

您是否收到来自 PayPal 的电子邮件，告知您已收到付款？如果是这样，请检查以确保您的 PayPal 帐户上的电子邮件地址得到确认。

# string - 使用 pl/sql 在空值上使用连接级别拆分字符串

> ID：14829972
> 
> 赞同：3
> 
> 时间：2013-02-12T10:08:04.687
> 
> 标签：string, oracle, plsql, split, stringtokenizer

我在 Oracle pl/sql 中使用以下代码（版本：Oracle Database 11g Release 11.2.0.1.0）

```
select regexp_substr('A~B~C','[^~]+',1,level) output
from dual
connect by level <= length(regexp_replace('A~B~C','[^~]+')) + 1 
```

这给出了以下结果

```
row1: A
row2: B
row3: C 
```

这是完美的，但是我应该给一个空值，即：

```
select regexp_substr('~B~C','[^~]+',1,level) output
from dual
connect by level <= length(regexp_replace('~B~C','[^~]+')) + 1 
```

我期望并想要以下内容：

```
row1: <null>
row2: B
row3: C 
```

但得到了这个输出：

```
row1: B
row2: C
row3: null 
```

我做错了pl/sql代码吗？我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:46:31.870

您可以结合`INSTR`und`SUBSTR`来获得所需的结果：

```
select  
  str, 
  replace(substr(str, 
                 case level 
                 when 1 then 0 
                 else instr( str, '~',1, level-1) 
                 end 
                  +1,
                 1
                ), '~')
from ( select 'A~B~C~D~E' as str from dual)
connect by level <= length(regexp_replace(str,'[^~]+')) + 1
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:22:00.473

您可以`NULLS FIRST`在`ORDER BY`子句中使用

```
select regexp_substr('~B~C','[^~]+',1,level) output
from dual
connect by level <= length(regexp_replace('~B~C','[^~]+')) + 1
ORDER BY regexp_substr('~B~C','[^~]+',1,level) NULLS FIRST; 
```

引用 Oracle 文档

> 如果未指定 null 排序，则 null 值的处理是：
> 
> `NULLS LAST if the sort is ASC`
> 
> `NULLS FIRST if the sort is DESC`
> 
> 如果既没有指定升序也没有指定降序，并且也没有指定空排序，则使用两个默认值，因此顺序将使用 NULLS LAST 升序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T18:28:35.597

因为我在我的问题中使用了单个字符作为示例，但实际上我在我的项目中使用了长字符串，例如'How~do~I~do~this'

感谢 chris227，我从[OTN Oracle.com发现了这个解决方案。](https://forums.oracle.com/forums/thread.jspa?threadID=2442487)

```
SELECT CAST(REGEXP_SUBSTR (str, '(.*?)(~|$)', 1, level, null, 1) AS CHAR(12))  output
FROM (select 'How~do~I~do~this' as str from dual)
CONNECT BY level <= regexp_count(str, '~') + 1; 
```

这甚至适用于单个字符。

希望这将有助于其他寻找类似解决方案的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T18:00:04.233

我知道现在已经很晚了，但我认为你（和我）需要的是：

```
select REPLACE(regexp_substr('A~~C','[^~]*(~)?',1,level),'~') output, level
from dual
connect by level <= length(regexp_replace('A~~C','[^~]+')) + 1
ORDER BY level; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T19:32:11.747

由于这个问题对我来说是新鲜的，并且我碰巧看到了这篇文章，因此我恭敬地提交了我的建议，该建议基于 user3767503 的回答。它减少了所需的函数调用次数。它使用了一些 11g 更新`regexp_substr()`并利用了`regexp_count()`我相信在 11g 中也引入的这些更新。它假设字段的数量是分隔符的数量加一。

```
select regexp_substr('AAA~X~C~~DD~~~E', '([^~]*)(~|$)', 1, level, null, 1) output, level
from dual
connect by level <= regexp_count('AAA~X~C~~DD~~~E','~') + 1 
ORDER BY level; 
```

有关阅读正则表达式模式的更多信息和详细信息，请参阅此帖子：[Split comma separated values to columns](https://stackoverflow.com/questions/31464275/split-comma-seperated-values-to-columns/31464699#31464699)。

底线是常用的正则表达式模式，`'[^<delimiter>]+'`当列表中有空值时解析字符串失败，应该避免，恕我直言。

# ios - 在选择器中使用不同的参数类型来响应选择器

> ID：14829975
> 
> 赞同：5
> 
> 时间：2013-02-12T10:08:21.640
> 
> 标签：ios, objective-c, nsobject

假设我们有不同的对象，它们具有相同的方法名称但具有不同的参数类型，例如：`getMethod:(NSNumber*)aNumber`和`getMethod:(NSString*)aString`。

如何使用 respondsToSelector 或通过其他方式检查对象是否响应具有特定参数类型的选择器，如下所示：

```
[myObjectA respondsToSelector:@selector(getMethod:(NSNumber*))] 
```

你怎么做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:36:27.187

You have a couple of ways to find type names of arguments for selector. For example this code will work:

```
Method method = class_getInstanceMethod([self class], @selector(someMethod:param2:param3:));
char type[256];
int argsNumber = method_getNumberOfArguments(method);
for (int i = 0; i < argsNumber; i++) {
    method_getArgumentType(method, i, type, 256);
    NSLog(@"%s", type);
} 
```

First and second log arguments are system and you are not interested in them, so another tree lines are that you need.

also code below will give you same result

```
NSMethodSignature *sig = [self methodSignatureForSelector:@selector(someMethod:param2:param3:)];
int args = [sig numberOfArguments];
for (int i = 0; i < args; i++) {
    NSLog(@"%s", [sig getArgumentTypeAtIndex:i]);
} 
```

`someMethod:param2:param3:` can have implementation like this for example

```
- (BOOL) someMethod:(NSString *)str param2:(UIView *)view param3:(NSInteger)number
{
    return NO;
} 
```

BUT! Of cause we have big but here )) In both cases you will have arguments types names with `const char *` string with length a one symbol. Compiler encodes types name as described [here](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html). You can differ int from char but not UIView from NSString. For all id types you will have type name '@' that means it's `id`. Sad but true. Unfortunately I've not found any ways to get whole complete type name or decode given. If you will find this way let me know pls.

So this is solution. Hope you will find the way how to use this approach in your project.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:52:12.197

您实际上无法区分方法参数类型，但也许您可以执行以下操作：

```
if([myObject isKindOfClass:[A class]])
     [myObjectA getMethod:aNumber];
else if([myObject isKindOfClass:[B class]])
     [myObjectA getMethod:aString]; 
```

您无需检查它是否响应选择器，因为您已检查其类型是否正确。也许您的问题比这更复杂，但如果不是，这应该可以工作。

# matplotlib - 在 matplotlib hist 中绘制特定概率

> ID：14829976
> 
> 赞同：2
> 
> 时间：2013-02-12T10:08:26.967
> 
> 标签：matplotlib, histogram

假设我有 250 个值显示从 0 公里到 10 公里的云高度。这些值分为三类：第 1 类包含 40 个值，第 2 类包含 120 个值，第 3 类包含 90 个值。因此，我用 bin = [0,1,2,3,4,5,6,7,8,9,10] 绘制三个直方图，其中 y 轴显示值的频率，即在 bin "3 " 在第 1 类中有 10 个值。这是我的问题，我不希望y轴显示频率，而是根据总值数字250的概率。我希望概率在这里是正确的词......实际上我不想要直方图显示，在类别 1 中 bin“3”中有 10 个值，我希望它显示有 10/250，因此 bin“3”中所有值的 4%。

我希望你能理解我的问题，并希望你能帮助我。我现在无法显示我的部分代码，因为我没有它......希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:38:06.280

我会使用 Numpy 的直方图函数，并通过将直方图除以所有三个类别的总人口来自己标准化数据。结果可以用 matplotlib.bar() 绘制。

我不认为有绘制直方图的直接方法。如果您将 normed=True 传递给 matplotlibs histogram 函数，则权重被归一化为等于 1，因此不能用于传递整个直方图的“相对权重”。

```
from matplotlib.ticker import FuncFormatter

def myfunc(x, pos=0):
    return '%1.1f%%' % (x*100)

cat1 = np.random.randint(0,11,40)
cat2 = np.random.randint(0,11,120)
cat3 = np.random.randint(0,11,90)

totalpop = float(cat1.size + cat2.size + cat3.size)

fig, axs = plt.subplots(3,1,figsize=(10,9))
fig.subplots_adjust(hspace=.3)

for n, cat in enumerate([cat1,cat2,cat3]):

    hist, bins = np.histogram(cat, bins=11, range=(0,11))
    axs[n].bar(bins[:-1], hist/ totalpop, align='center', facecolor='grey', alpha=0.5)
    axs[n].set_title('Category %i' % n)

    print 'Category %i:' % n, 'size: %i' % cat.size, 'relative size: %1.2f' % (cat.size / float(totalpop))

for ax in axs:
    ax.set_xticks(range(11))
    ax.set_xlim(-1,11)
    ax.yaxis.set_major_formatter(FuncFormatter(myfunc)) 
```

![在此处输入图像描述](../Images/a1c42a25a1300e04b17ad598886f131a.png)

# c - 确保函数参数的静态存储

> ID：14829981
> 
> 赞同：4
> 
> 时间：2013-02-12T10:08:38.640
> 
> 标签：c, gcc

我们有这个函数原型：

```
 BNode *b_new_node(const char *name, int pos, int len, const char *val); 
```

大多数使用这个（和类似的）代码是自动生成的代码，看起来像：

```
 b = b_new_node("foo.bar.id.1", 0, 10, some_data); 
```

该函数分配一个新的 BNode 并将 `val`字符串复制到其中，但它只是将`name`成员分配给一个指针，例如

```
 b_strlcpy(new_node->val, val, sizeof new_node->val);
 new_node->name = name; 
```

如果 b_new_node("foo.bar.id.1", 0, 10, some_data); 中的第一个参数，这会造成严重破坏 不是字符串文字，也不是具有静态存储持续时间的其他内容，而是例如堆栈上的缓冲区。

无论如何，使用 gcc（其他编译器也很感兴趣），我们可以在编译时检查传入的这个参数是静态存储的吗？

（当然，避免这些可能出现的问题的简单方法是将该参数也复制到节点中 - 我们使用该方法所做的测量将内存需求增加了 50% 并将程序减慢了 10%，因此这种方法是不可取的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:55:09.910

一般没有；没有 C 提供的工具可以知道指针是否指向静态存储中的某些内容。特定的环境和数据结构可能会改变情况——例如检查指向的地址是否在[只读内存段](http://en.wikipedia.org/wiki/Read_only_memory)中。

# 通过防止重复来节省空间

如 所指出的，要消除重复值，`name`您可以使用与[字符串实习](http://en.wikipedia.org/wiki/String_interning)没有太大区别的享[元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)。

基本上，您构建了一组遇到的令牌并仅存储对每个令牌的引用。引用可以是数组索引或指针。

为了能够快速清理，您可以将享元模式与[引用计数](http://en.wikipedia.org/wiki/Reference_counting)结合起来，其中计数为零表示没有剩余引用。

要保持中央存储的高性能，请使用查找速度快的数据结构，例如集合，或者如果使用[引用计数，则使用](http://en.wikipedia.org/wiki/Reference_counting)[映射](http://en.wikipedia.org/wiki/Associative_array)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:09:44.743

这将检测字符串文字：

```
#include <stdio.h>

#define PRINT_IT(c) do {\
if (__builtin_constant_p(c))\
    print_it(c, 1);\
else \
    1/__builtin_constant_p(c);\
} while (0)

void print_it(const char *c, int is_static)
{
    printf("%s is a constant %d\n", c, is_static);
}

int main(int argc, char *argv[])
{
    char bar[] = "bar";
    PRINT_IT("Foo"); //line 19
    PRINT_IT(bar);   //line 20

return 0;

}

$ gcc  foo.c 
foo.c: In function ‘main’:
foo.c:20: warning: division by zero 
```

因此，您可以将 b_new_node() 函数包装在一个宏中，也许只是为了调试构建，并利用零警告除法。

请注意，它仅将字符串文字检测为“参数”，而不是静态存储，例如

```
const char *foo = "foo";
PRINT_IT(foo); //will generate a warning
PRINT_IT("foo"); //will not generate a warning
PRINT_IT(global_foo); //will generate a warning, even when. 
                      //global_foo is const char *foo = "foo"; or
                      //global_foo is const char foo[] = "foo"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:28:15.397

您可以`BNode`有条件地复制名称。这将需要额外的存储空间`BNode`。例如：

```
typedef struct BNode {
    char const* name;
    unsigned char : own_name;
} BNode;

void b_copy_name(BNode* n) {
    if(!n->own_name) {
        char* p = strdup(n->name);
        if(p) {
            n->own_name = 1;
            n->name = p;
        }
        else {
            abort();
        }
    }
}

void b_destroy(BNode* n) {
    // ...
    if(n->own_name) 
         free(n->name);
} 
```

# c# - c# mvc模型绑定嵌套列表

> ID：14829983
> 
> 赞同：2
> 
> 时间：2013-02-12T10:08:43.357
> 
> 标签：c#, asp.net-mvc, modelbinder

我的模型绑定有问题。在这里得到以下模型：

```
public class RoomScan
{
    public RoomScan() { }

    public RoomScan(Guid id)
    {
        Room_ID = id;
        Assets = new List<AssetScanModel>();
    }
    //public Guid Soll_ID { get; set; }
    public Guid Room_ID { get; set; }
    public List<AssetScanModel> Assets { get; set; }

    [Display(Name = "Barcode", ResourceType = typeof(Dictionary))]
    public string Barcode { get; set; }

    [Display(Name = "RFID", ResourceType = typeof(Dictionary))]
    public string RFID { get; set; }
}

public class AssetScanModel
{
    public AssetScanModel(Asset asset)
    {
        Asset = asset;
        Scanned = false;
        CheckIn = false;
    }

    public Asset Asset { get; set; }

    [Display(Name = "Scanned", ResourceType = typeof(Dictionary))]
    public bool Scanned { get; set; }

    [Display(Name = "CheckIn", ResourceType = typeof(Dictionary))]
    public bool CheckIn { get; set; }
} 
```

视图确实列出了所有资产：

```
using (Html.BeginForm("Scan", "Inventory", FormMethod.Post))
{
Html.HiddenFor(rs => rs.Room_ID);
Html.HiddenFor(rs => rs.Assets);

<div>
    <div class="editor-label">Barcode</div>
    <div class="editor-field"><input type="text" name="Barcode" value="@Model.Barcode" /></div>
</div>
<div>
    <div class="editor-label">RFID</div>
    <div class="editor-field"><input type="text" name="Barcode" value="@Model.RFID" /></div>
</div><br /> 
```

...

```
@for (int i = 0; i < Model.Assets.Count; i++)
{
    <tr>
        <td>@Html.DisplayFor(asm => asm.Assets[i].Asset.InventoryNumber)</td>
        <td>@Html.DisplayFor(asm => asm.Assets[i].Asset.Description)</td>
        <td>@Html.DisplayFor(asm => asm.Assets[i].Asset.Manufacturer)</td>
        <td>@Html.DisplayFor(asm => asm.Assets[i].Asset.Model)</td>
        <td>@Html.DisplayFor(asm => asm.Assets[i].Asset.SerialNumber)</td>
        <td>@Html.DisplayFor(asm => asm.Assets[i].Scanned)</td>
        <td>@Html.DisplayFor(asm => asm.Assets[i].CheckIn)</td>
    </tr>
} 
```

我添加了“资产 [i]”，因为我在某处读到它有助于默认模型绑定器正确绑定（没有工作）

我的问题是：在我的控制器中：

```
[HttpPost]
    public ActionResult Scan(RoomScan toVerify) 
```

列表为空（非空）。我知道这与模型绑定器有关，但我不熟悉如何更改它以使其正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:40:09.013

我一直在使用它来绑定具有嵌套列表的复杂模型。我几乎总是立即用这个替换默认的模型活页夹......

[一个可以更新复杂模型图的 DefaultModelBinder](http://www.codetuning.net/blog/post.aspx?id=1cf10893-3ec8-4af5-9bf8-fc6065673a29)

我希望这对您和我一样有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:40:10.750

尝试 DisplayTemplates/EditorTemplates，为您的嵌套模型类型创建模板。在视图中写：

```
@Html.DisplayFor(asm => asm.Assets) 
```

在 DisplayTemplate (AssetScanModel.cshtml) 中：

```
@model AssetScanModel

<tr>
    <td>@Html.DisplayFor(asm => asm.Asset.InventoryNumber)</td>
    <td>@Html.DisplayFor(asm => asm.Asset.Description)</td>
    <td>@Html.DisplayFor(asm => asm.Asset.Manufacturer)</td>
    <td>@Html.DisplayFor(asm => asm.Asset.Model)</td>
    <td>@Html.DisplayFor(asm => asm.Asset.SerialNumber)</td>
    <td>@Html.DisplayFor(asm => asm.Scanned)</td>
    <td>@Html.DisplayFor(asm => asm.CheckIn)</td>
</tr> 
```

# c# - LINQ 查询以使用子详细信息展平主/详细信息

> ID：14829989
> 
> 赞同：4
> 
> 时间：2013-02-12T10:08:51.953
> 
> 标签：c#, linq

我有以下课程：

```
public class Order
{
    public Order()
    {
        Items = new ObservableCollection<OrderItem>();
    }

    public string Code { get; set; }
    public ICollection<OrderItem> Items { get; set; }
}

public class OrderItem
{
    public OrderItem()
    {
        SubItems = new ObservableCollection<SubItem>();
    }

    public decimal Quantity { get; set; }
    public decimal Price { get; set; }
    public ICollection<SubItem> SubItems { get; set; }        
}

public class SubItem
{
    public DateTime Date { get; set; }
    public decimal Quantity { get; set; }
    public string UserName { get; set; }
} 
```

现在我遇到的问题是我想在数据网格中显示这些类的所有数据，例如。使用代码：

```
Order order = new Order();
        order.Code = "123";
        order.Items.Add(new OrderItem()
                                {
                                    Price = 30,
                                    Quantity = 3,
                                    SubItems = new Collection<SubItem>()
                                        {
                                            new SubItem() { Date = DateTime.Now, Quantity = 1, UserName = "User1" }, 
                                            new SubItem() { Date = DateTime.Now, Quantity = 2, UserName = "User2" }
                                        }
                                });

        order.Items.Add(new OrderItem()
                                {
                                    Price = 500,
                                    Quantity = 50,
                                    SubItems = new Collection<SubItem>()
                                        {
                                            new SubItem() { Date = DateTime.Now, Quantity = 20, UserName = "User1" }, 
                                            new SubItem() { Date = DateTime.Now, Quantity = 20, UserName = "User2" },
                                            new SubItem() { Date = DateTime.Now, Quantity = 10, UserName = "User3" }
                                        }
                                }); 
```

我需要在 DataGrid 上显示如下内容：

```
| Order.Code | Item.Price | Item.Quantity | SubItem.Quantity | SubItem.UserName |
| 123        | 30         | 3             | 1                |  User1           |
| 123        | 30         | 3             | 2                |  User2           |
| 123        | 500        | 50            | 20               |  User1           |
| 123        | 500        | 50            | 20               |  User2           |
| 123        | 500        | 50            | 10               |  User3           | 
```

看起来很简单，但我就是做不到。我能做的最好的事情是引用`OrderItem`on`SubItem`以便我可以在列数据绑定上使用它，但这仅在我有 subItems 时才有效（如果没有`SubItems`，我仍然需要显示`OrderItem`数据）。所以基本上我需要显示如果我执行加入 3 个表的 SQL SELECT 所看到的确切内容。

任何 linq 魔法都可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T11:33:02.570

使用[SelectMany](http://msdn.microsoft.com/cs-cz/library/bb534631.aspx)方法进行展平：

```
var res = order.Items
               .SelectMany(i => i.SubItems, (Item, Sub) => new { Item, Sub })
               .Select(r => new { order.Code, 
                                  r.Item.Price, 
                                  ItemQuantity = r.Item.Quantity, 
                                  SubItemQuantity = r.Sub.Quantity, 
                                  r.Sub.UserName }); 
```

如果`SubItems`集合可能为空，您可以使用[DefaultIfEmpty](http://msdn.microsoft.com/cs-cz/library/bb360179.aspx)方法：

```
var res = order.Items
               .SelectMany(i => i.SubItems.DefaultIfEmpty(), (Item, Sub) => new { Item, Sub })
               .Select(r => new { order.Code, 
                                  r.Item.Price, 
                                  ItemQuantity = r.Item.Quantity, 
                                  SubItemQuantity = r.Sub == null ? null : (Decimal?) r.Sub.Quantity ,
                                  UserName = r.Sub == null ? (string)null : r.Sub.UserName }); 
```

试试[Ideone](http://ideone.com/Z0KTs8)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T11:26:47.533

试试这个，它就像一个连接：

```
var table = from item in order.Items
            from subItem in item.SubItems
            select new
                {
                    OrderCode = order.Code,
                    ItemPrice = item.Price,
                    ItemQuantity = item.Quantity,
                    SubItemQuantity = subItem.Quantity,
                    SubItemUserName = subItem.UserName
                }; 
```

如果您愿意，可以将其扩展到多个订单：

```
var table = from order in orders
            from item in order.Items
            from subItem in item.SubItems
            select new
                {
                    OrderCode = order.Code,
                    ItemPrice = item.Price,
                    ItemQuantity = item.Quantity,
                    SubItemQuantity = subItem.Quantity,
                    SubItemUserName = subItem.UserName
                }; 
```

这是一个链接： http: [//msdn.microsoft.com/en-us/library/bb383978.aspx](http://msdn.microsoft.com/en-us/library/bb383978.aspx) （请参阅*条款中的复合*）

如果集合可以为空，请使用 DefaultIfEmpty()，例如：

```
var table = from order in orders
            from item in order.Items.DefaultIfEmpty(new OrderItem())
            from subItem in item.SubItems.DefaultIfEmpty(new SubItem())
            select new
                {
                    OrderCode = order.Code,
                    ItemPrice = item.Price,
                    ItemQuantity = item.Quantity,
                    SubItemQuantity = subItem.Quantity,
                    SubItemUserName = subItem.UserName
                }; 
```

如果您不向 DefaultIfEmpty() 传递参数，则“默认”项将为空，因此您必须处理它，例如：

```
var table = from order in orders
            from item in order.Items.DefaultIfEmpty()
            from subItem in (item != null ? item.SubItems : Enumerable.Empty<SubItem>()).DefaultIfEmpty()
            select new
                {
                    OrderCode = order.Code,
                    ItemPrice = item != null ? item.Price.ToString() : "n/a",
                    ItemQuantity = item != null ? item.Quantity.ToString() : "n/a",
                    SubItemQuantity = subItem != null ? subItem.Quantity.ToString() : "n/a",
                    SubItemUserName = subItem != null ? subItem.UserName : "n/a"
                }; 
```

另一种选择：

```
var table = from order in orders
            from item in order.Items.DefaultIfEmpty()
            from subItem in (item != null ? item.SubItems : Enumerable.Empty<SubItem>()).DefaultIfEmpty()
            select new
                {
                    OrderCode = order.Code,
                    ItemPrice = item != null ? item.Price : default(decimal?),
                    ItemQuantity = item != null ? item.Quantity : default(decimal?),
                    SubItemQuantity = subItem != null ? subItem.Quantity : default(decimal?),
                    SubItemUserName = subItem != null ? subItem.UserName : null
                }; 
```

# javascript - 如何使用 JavaScript 验证信用卡号

> ID：14829993
> 
> 赞同：0
> 
> 时间：2013-02-12T10:09:14.147
> 
> 标签：javascript, forms, validation

我正在尝试通过 javascript 函数验证信用卡号。我正在通过 html 表单输入并希望在 onblur 事件中使用它进行验证。我想检查输入值是一个数字，然后是卡类型，然后是 luhn 算法，但我现在仍然无法编写脚本。

下面是我的代码：

```
function allnumeric()  
            {
            var inputtxt = document.form1.inputtxt; 
            var numbers = /^[0-9]+$/;  
            if(inputtxt.value.match(numbers))  
                {  
                    if(visa(inputtxt))

                    {

                        if(function luhn(inputtxt))

                        {
                        return true;
                        }
                        else  
                        {   
                        return false;  
                        }

                    }

                    else if (function mastercard(inputtxt))

                    {

                        if(function luhn(inputtxt))

                        {
                        return true;
                        }
                        else  
                        {   
                        return false;  
                        }

                    }

                }   
            else  
            {  
            alert('Please enter your valid card number');  
            inputtxt.focus();  
            return false;  
            } 

function visa(inputtxt)  
{  
  var cardno = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;  
  if(inputtxt.value.match(cardno))  
        {  
      return true;  
        }  
      else  
        {  
        alert("Not a valid Visa credit card number!");  
        return false;  
        }  
}  

function mastercard(inputtxt)  
{  
  var cardno = /^(?:5[1-5][0-9]{14})$/;  
  if(inputtxt.value.match(cardno))  
        {  
      return true;  
        }  
      else  
        {  
        alert("Not a valid Mastercard number!");  
        return false;  
        }  

function luhn(inputtxt)
{
            /* Luhn check */
            var cc_sum = 0;
            var parsedCC;
            var cclen = inputtxt.length;
            for (i=cclen-1; i>=0; i--) {
                    var charati = inputtxt[i] + '';
                    parsedCC = parseInt(charati);
                    var oddeven = cclen-1 - i;
                    cc_sum += (oddeven%2 == 0) ? parsedCC :
                                    (parsedCC > 4) ? parsedCC * 2 % 10 + 1 :
                                            parsedCC * 2;
            }
            var checkvalid = ((cc_sum % 10) == 0) ? true : false;
            return checkvalid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:24:08.380

我不建议为每种类型的信用卡创建函数。如果更改信用卡格式、引入新卡等，这将是一场噩梦。

除非您构建信用卡验证插件，否则信用卡验证格式的确切细节对您来说应该是抽象的。让其他人担心:)

[jQuery Validation Plugin](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)有一个[信用卡验证方法](http://jquery.bassistance.de/api-browser/plugins.html#jQueryvalidatormethodscreditcard)，我推荐你使用。

# c# - 拆分字符串并使用每个项目分配给另一个列表

> ID：14829997
> 
> 赞同：0
> 
> 时间：2013-02-12T10:09:33.003
> 
> 标签：c#

我有一个要分配给用户的角色列表：

```
var role1 = new Role { ApplicationName = "XXX", RoleName = "ROLE1" };
var role2 = new Role { ApplicationName = "XXX", RoleName = "ROLE2" };
var role3 = new Role { ApplicationName = "XXX", RoleName = "ROLE3" };

List<Role> listRoles = new List<Role>
{
    role1,
    role2,
    role3
}; 
```

我可以像这样分配一个特定的角色：

```
var userRoles = new List<Role> 
{
    listRoles.First(x => x.RoleName == "ROLE1")
} 
```

假设我有一个包含列出角色的字符串要添加到我的用户

```
string listRoles = "ROLE1;ROLE3"; 
```

我的问题：如何为我的用户分配角色列表？

我尝试：

```
var userRoles = new List<Role> 
{
    foreach(var role in listRoles.Split(";")
    {
        listRoles.First(x => x.RoleName == role);
    }
} 
```

我得到编译错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:11:40.437

您有编译错误，因为您`listRoles`对字符串和原始角色列表使用相同的变量名。

```
var rolesToAssign = "ROLE1;ROLE3";
var matchingRoles = rolesToAssign.Split(';');

var userRoles = listRoles.Where(x => matchingRoles.Contains(x.RoleName))
                         .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:12:17.827

您正在尝试在[集合初始化程序](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)中使用 foreach 循环，但您不能这样做。相反，您可以执行以下操作：

```
var userRoles = new List<Roles>();

foreach(var role in listRoles.Split(";"))
{
   userRoles.Add(listRoles.First(x => x.RoleName == role))
} 
```