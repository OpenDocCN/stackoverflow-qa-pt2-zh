# StackOverflow 问答 12602000-12602999

# mongodb - 使用数据库调用时这是一个坏习惯吗？

> ID：12602000
> 
> 赞同：0
> 
> 时间：2012-09-26T12:43:42.757
> 
> 标签：mongodb, asynchronous, tornado

我使用 tornado 是因为它的简单性，并将它与 Pymongo 一起使用，所以因为我总是听说异步调用，为大量客户提供服务，然后，我在问，什么是真正的对数据库的异步调用，所以这段代码例如：

例如，假设用户有 4 个要搜索的区域的页面，那么结果将是 4 个结果。

```
A = calls the database to search for an element a.
B = calls the database to search for an element b.
C = calls the database to search for an element c.
D = calls the database to search for an element d.
then render a pages where a user will see the results (a,b,c,d) 
```

所以，这将是服务器的杀手，因为他必须留下来等待所有 4 个请求完成，或者让它服务第一个结果，然后等待，即使数据库调用被阻塞，并在他加入所有结果的地方创建一个桶提供给客户？还是必须使用异步数据库库（如 Motor 或 Asyncmongo）完成 4 个操作的拆分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:37:59.880

每次调用 PyMongo 都会阻塞 Tornado 的 IOLoop 并阻止进一步处理任何客户端 HTTP 请求，直到 PyMongo 方法完成。

[http://api.mongodb.org/python/current/faq.html#does-pymongo-support-asynchronous-frameworks-like-gevent-tornado-or-twisted](http://api.mongodb.org/python/current/faq.html#does-pymongo-support-asynchronous-frameworks-like-gevent-tornado-or-twisted)

# git - Gradle：读取最新的 xy-release GIT 标签以进行版本控制

> ID：12602002
> 
> 赞同：0
> 
> 时间：2012-09-26T12:43:46.800
> 
> 标签：git, ant, versioning, gradle

我目前正在将一个项目从 ant 迁移到 gradle。一切都很好，只存在一个问题：目前我们有一个基于 ant-contrib 的自定义任务，用于在 repo 上执行 git 命令以读取最新的 xy-release 标签以获取版本号（以及生成的 jar 文件名，如 project- xy.jar）。正如我所看到的，我需要一些插件。可悲的是，通过可用的插件，没有什么能真正帮助我（存在一些与 git 相关的插件，但他们的目标是别的，比如发布，所以标记 repo，而不是阅读已经制作的标签）*。*所以我需要帮助来实现我的目标。我必须在 Gradle 中发明整个东西吗？我知道我可以导入现有的 ant 构建文件，但我真的不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:06:35.593

好的，我尝试在 Gradle 中实现相同的旧东西。（因为我正在逃离蚂蚁/常春藤，所以我不想保留旧东西）。这是输出（可能很蹩脚，因为我是 Gradle 和 Groovy 的新手）。有用。

```
jar {
    dependsOn configurations.runtime

    // get the version
    doFirst {
        new ByteArrayOutputStream().withStream { execOS ->
            def result = exec {
                executable = 'git'
                args = [ 'describe', '--tags', '--match', '[0-9]*-release', '--dirty=-dirty' ]
                standardOutput = execOS
            }

            // calculate version information
            def buildVersion = execOS.toString().trim().replaceAll("-release", "")
            def buildVersionMajor = buildVersion.replaceAll("^(\\d+).*\$", "\$1")
            def buildVersionMinor = buildVersion.replaceAll("^\\d+\\.(\\d+).*\$", "\$1")
            def buildVersionRev = buildVersion.replaceAll("^\\d+\\.\\d+\\.(\\d+).*\$", "\$1")
            def buildTag = buildVersion.replaceAll("^[^-]*-(.*)\$", "\$1").replaceAll("^(.*)-dirty\$", "\$1")
            def dirty = buildVersion.endsWith("dirty")

            println("Version: " + buildVersion)
            println("Major: " + buildVersionMajor)
            println("Minor: " + buildVersionMinor)
            println("Revision: " + buildVersionRev)
            println("Tag: " + buildTag)
            println("Dirty: " + dirty)

            // name the jar file
            version buildVersion
        }
    }

    // include dependencies into jar
    def classpath  = configurations.runtime.collect { it.directory ? it : zipTree(it) }
    from (classpath) {
        exclude 'META-INF/**'
    }

    // manifest definition
    manifest {
        attributes(
            'Main-Class': 'your.fancy.MainClass'
        )
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:20:36.460

或者，只需重用现有的 Ant 任务。无需导入 Ant 构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:18:11.890

由于 git 对此有命令`git describe`，所以它应该很简单。只需调用 git 并读取输出。要获取最后一个 *-release 标签，确切的命令是

```
git describe --abbrev=0 --match=*-release 
```

（我不确定它是正则表达式还是全局；如果是正则表达式，则需要`.*-release`）。`--tags`如果您的发布标签没有注释，请添加。

# php - PHP中需要最大优化的自定义二进制数组排序功能

> ID：12602003
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:43:47.843
> 
> 标签：php, function, sorting, optimization, binary

你能帮我创建一个优化的 php 自定义函数来对二进制数组进行排序吗？现在，我正在使用带有两个 for 循环的冒泡排序算法。我的代码如下：

```
for ( $i = 0; $i < $array_size; $i++ )  
{  
   for ($j = 0; $j < $array_size; $j++ )  
   {  
      if ($numbers[$i] < $numbers[$j])  
      {  
         $temp = $numbers[$i];  
         $numbers[$i] = $numbers[$j];  
         $numbers[$j] = $temp;  
      }  
   }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:49:26.497

`O(N^2)`您可以使用以下方法进行冒泡排序`O(N)`：

1.  求数组中所有元素的总和。它会给你`1`数组中的 's 的数量。您可以为此使用 array_sum() 函数。调用结果`s`。也让`n`是数组中的元素数。

2.  排序后的数组将具有s 的`n-s`数量，`0`后跟's的`s`数量。`1`

请注意，您不能做得更好，`O(N)`因为您必须触摸每个数组元素一次。

# iphone - 单点触控绑定

> ID：12602004
> 
> 赞同：0
> 
> 时间：2012-09-26T12:43:50.783
> 
> 标签：iphone, binding, xamarin.ios, bugsense

我正在尝试将 BugSense 绑定到 Monotouch。但是我有一些问题，现在我会听到这里是否有人会检查我的绑定？

BugSense 标头如下所示：

```
#define BUGSENSE_LOG(__EXCEPTION, __TAG) [BugSenseCrashController logException:__EXCEPTION withTag:__TAG]

OBJC_EXPORT @interface BugSenseCrashController : NSObject <UIAlertViewDelegate>

+ (BugSenseCrashController *) sharedInstanceWithBugSenseAPIKey:(NSString *)APIKey;

+ (BugSenseCrashController *) sharedInstanceWithBugSenseAPIKey:(NSString *)APIKey 
                                                userDictionary:(NSDictionary *)userDictionary;

+ (BugSenseCrashController *) sharedInstanceWithBugSenseAPIKey:(NSString *)APIKey 
                                                userDictionary:(NSDictionary *)userDictionary
                                               sendImmediately:(BOOL)immediately;

+ (BOOL) logException:(NSException *)exception withTag:(NSString *)tag;

@end 
```

然后我添加了一个绑定项目，并在我的 ApiDefinition.cs 中写道：

```
[BaseType (typeof (NSObject))]
interface  BugSenseCrashController 
{
    [Static]
    [Export ("sharedInstanceWithBugSenseAPIKey:")]
    BugSenseCrashController SharedInstanceWithBugSenseAPIKey(String APIKey);

    [Static]
    [Export ("sharedInstanceWithBugSenseAPIKey:userDictionary:")]
BugSenseCrashController SharedInstanceWithBugSenseAPIKey(String APIKey, [NullAllowed] NSDictionary userDictionary);

    [Static]
    [Export ("sharedInstanceWithBugSenseAPIKey:userDictionary:sendImmediately:")]
    BugSenseCrashController SharedInstanceWithBugSenseAPIKey(string APIKey, [NullAllowed] NSDictionary userDictionary, bool immediately);

    [Static]
    [Export ("sharedInstance")]
    BugSenseCrashController SharedInstance();

    [Static]
    [Export ("logException:withTag:")]
    bool LogException (NSException exception, string tag);
} 
```

我的问题是标题中的“UIAlertViewDelegate”。我不能在 Monotouch 中执行“[BaseType (typeof (NSObject))]”。

任何人都可以提供帮助吗？

问题是将 BugSense 绑定到 Monotouch。我创建了一个 Monotouch 绑定库，从 BugSenseiOS.Framework 获取二进制文件，将其命名为 bugsense.a 并将其添加到绑定项目中。但它不起作用。

我的“链接”：

```
[assembly: LinkWith ("libBugSense-iOS.a", LinkTarget.ArmV6 | LinkTarget.Thumb | LinkTarget.Simulator, ForceLoad = true, Frameworks="SystemConfiguration", LinkerFlags = "-lz")] 
```

BugSense 需要 SystemConfiguration.framework 和 libz.dylib。

链接到 BugSense [http://www.bugsense.com/docs/ios](http://www.bugsense.com/docs/ios)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:12:32.837

如果这是一个崩溃报告器，请记住崩溃报告器会干扰 Mono 自己的异常处理，因此即使您绑定它们，它们也不起作用。

# wso2 - WSO2 AppServer v5.0.0 找不到 InitialContext 类？

> ID：12602009
> 
> 赞同：1
> 
> 时间：2012-09-26T12:44:13.257
> 
> 标签：wso2

我正在尝试为新的 WSO2 AppServer（版本 5.0.0）运行一个非常简单的应用程序，但似乎发生了一些非常奇怪的事情。当我尝试访问执行简单 JNDI 查找的页面时，我收到以下错误：

```
HTTP Status 500 - org.apache.jasper.JasperException: Unable to compile class for JSP     Generated servlet error: 
Only a type can be imported. javax.naming.InitialContext resolves to a package 
An error occurred at line: 11 in the jsp file: /jndi.jsp 
Generated servlet error: InitialContext cannot be resolved to a type 
An error occurred at line: 11 in the jsp file: /jndi.jsp Generated servlet error:
InitialContext cannot be resolved to a type 
```

该页面仅包含以下代码：

```
<!DOCTYPE html>
<%@page contentType="text/html" pageEncoding="ISO-8859-1"%>
<%@page import="javax.naming.InitialContext" %>
<html>
    <head>
       <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <title>JNDI Test</title>
  </head>
 <body>
    <h1>JNDI Test</h1>
 <%
   InitialContext ctx = new InitialContext();
 %>     
 <p>Context: <%= ctx.getNameInNamespace() %>

   </body>
</html> 
```

似乎tomcat编译器无法“看到”java运行时类，但我不知道为什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:12:15.257

将 jndi 查找代码添加到单独的 java 类并从您的 jsp 页面调用它。

# optimization - 寻址模式效率

> ID：12602010
> 
> 赞同：1
> 
> 时间：2012-09-26T12:44:22.993
> 
> 标签：optimization, assembly, x86, cpu, addressing-mode

有人可以告诉我“立即”寻址模式是否比通过 [eax] 或任何其他方式寻址更有效。

假设我对内存中的某个 int 值有一些读取和一些写入（比如 5 次读取、5 次写入）的长功能

```
 mov some_addr, 12      //immediate adressing
     //other code
     mov eax, aome_addr
     //other code
     mov some_addr, eax    // and so on 
```

相对

```
 mov eax, some_addr

     mov [eax], 12      // addressing thru [eax]
     //other code
     mov ebx, [eax]
     //other code
     mov [eax], ebx    // and so on 
```

哪个更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:49:45.800

可能寄存器间接访问稍微快一些，但可以肯定的是它的编码更短，例如（警告 - 气体语法）

```
67 89 18                   mov %ebx, (%eax)
67 8b 18                   mov (%eax), %ebx 
```

对比

```
89 1c 25 00 00 00 00       mov %ebx, some_addr
8b 1c 25 00 00 00 00       mov some_addr, %ebx 
```

所以它在加载指令、使用缓存等时会产生一些影响，因此它可能会更快一些，但在一个带有*一些读写的**长*函数中——我认为这并不重要......

 *（十六进制代码中的零应该由链接器填充（只是这么说）。）

[更新日期="2012-09-30 ~21h30 CEST":

我已经进行了一些测试，我真的很想知道他们揭示了什么。以至于我没有进一步调查:-)

```
48 8D 04 25 00 00 00 00    leaq s_var,%rax
C7 00 CC BA ED FE          movl $0xfeedbacc,(%rax) 
```

在大多数运行中表现优于

```
C7 04 25 00 00 00 00 CC    movl $0xfeedbacc,s_var
BA ED FE 
```

我真的很惊讶，现在我想知道 Maratyszcza 将如何解释这一点。我已经有了一个想法，但我愿意......这很有趣......不，看到这些（示例）结果

```
movl to s_var
All 000000000E95F890 244709520
Avg 00000000000000E9 233
Min 00000000000000C8 200
Max 0000000000276B22 2583330
leaq s_var, movl to (reg)
All 000000000BF77C80 200768640
Avg 00000000000000BF 191
Min 00000000000000AA 170
Max 00000000001755C0 1529280 
```

可能肯定会支持他的说法，即指令解码器每个周期最多占用 8 个字节，但它没有显示真正解码了多少字节。

在`leaq`/`movl`对中，每条指令（包括操作数）小于 8 个字节，因此很可能每条指令在一个周期内分派，而单条指令则被`movl`分成两条。仍然我相信这不是解码器放慢速度，因为即使有 11 个字节，`movl`它的工作也是在第三个字节之后完成的——然后它只需要等待地址和立即数中的管道流，这两者不需要解码。

由于这是 64 位模式代码，我还使用 1 字节较短的 rip-relative 寻址进行了测试——结果（几乎）相同。

**注意**：这些测量可能在很大程度上取决于它们运行的​​（微）架构。以上数值是在 Atom N450（恒定 TSC，boot@1.6GHz，在测试运行期间固定在 1.0GHz）上运行测试代码时给出的，这不太可能代表整个 x86(-64) 平台。

**注意**：测量是在运行时进行的，没有进一步的分析，例如发生的任务/上下文切换或其他干预中断！

/更新]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:47:32.890

使用寄存器寻址是最快的。

请参阅[寄存器寻址模式与直接寻址模式](https://stackoverflow.com/questions/10410584/register-addressing-mode-vs-direct-addressing-mode)*

# sql - MS Access VBA中的多个数据库？

> ID：12602014
> 
> 赞同：0
> 
> 时间：2012-09-26T12:44:28.293
> 
> 标签：sql, sql-server, ms-access, vba

这篇 Microsoft[知识库文章](http://support.microsoft.com/kb/113701)详细介绍了如何在 Access 项目当前使用的数据库之外的另一个数据库上运行查询。但是它只说明了如何连接到 DBase、Foxpro、Paradox、BTrieve 和 ODBC。

我希望能够做这样的事情：

```
UPDATE MSSQLDatabase.Table
    SET MSSQLDatabase.Table.Column = AccessDatabase.Table.Column
    WHERE MSSQLDatabase.Table.Column = AccessDatabase.Table.ID

INSERT INTO AccessDatabase.Table
    VALUES (AccessDatabase.Table.ID) 
```

你能告诉我从哪里开始吗？我要连接的数据库是 SQL Server 2008 Provider Native 连接。我正在使用 Access 2007。

在 VBA 中执行此操作将是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:53:47.840

到目前为止，在 MS Access 中使用 SQL Server 最简单的方法是使用[链接表](http://office.microsoft.com/en-us/access-help/import-or-link-to-sql-server-data-HA010200494.aspx)。但是，您也可以运行[传递查询](http://support.microsoft.com/kb/303968)并内联引用连接：

```
SELECT * FROM [ODBC;FILEDSN=Z:\Docs\Test.dsn;].table_1 
```

或者

```
SELECT * FROM 
  [ODBC;DRIVER=SQL Server;SERVER=srvr;Trusted_Connection=Yes;DATABASE=Test;].table_1 
```

或者

```
SELECT * FROM [ODBC;Driver={SQL Server Native Client 11.0};Server=svr;Database=test;Trusted_Connection=yes;].table_1 
```

另见[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:02:06.420

此解决方案允许捕获错误：

```
Private Sub Command10_Click()
    On Error GoTo Err1:
        Dim cn As ADODB.Connection
        Set cn = New ADODB.Connection
        With cn
            .Provider = "SQL Native Client"
            .ConnectionString = "Server=myserver\myinstance;Database=mydb;Uid=myuser;Pwd=mypass;]"
            .Open
        End With

        MsgBox "Connection successful!"
        cn.Close
        Exit Sub

    Err1:
        MsgBox Err.DESCRIPTION
End Sub 
```

唯一需要注意的是，在 Visual Basic 编辑器中，您必须先转到`Tools > References`，然后检查`Microsoft ActiveX Data Objects 2.x Library`.

# ruby-on-rails - Rails Routes - 带有参数的链接到奇异资源

> ID：12602015
> 
> 赞同：0
> 
> 时间：2012-09-26T12:44:29.483
> 
> 标签：ruby-on-rails, routing

所以这让我很难过，我在路线方面根本不是最好的，但我想要实现的目标似乎很简单。我所拥有的是目前只能由超级用户访问的功能，现在我想将该功能扩展到portal_administrator。现在要访问该页面，您需要一个看起来像这样的 link_to

```
 = link_to('Data', portal_datum_path(current_portal.id), :id => :super_user_data_link) 
```

用匹配路由

```
 match '/portal_data/:id', :controller => 'portal_data', :action => 'show', :as => 'portal_datum' 
```

现在这很好用，您最终会得到一个具有 id 参数的 url。在它路由到的页面中使用。事实上，有一个 before 过滤器可以确保有一个 id。

```
 def load_portal
    @portal = Portal.find(params[:id])
  end 
```

这将使超级用户能够通过查看 url 来查看他所在的门户。现在我将其扩展到用户，我不希望他们看到他们所在的门户 ID，所以我想我会在下面使用一个单一的资源。

```
 = link_to('Data', portal_data_path, :id => :super_user_data_link) 
```

与

```
 match '/portal_data' => "portal_data#show" 
```

所以它路由到同一个地方，但保持 url 干净。但显然这个剂量是有效的。即使我对之前的文件管理器进行硬编码以接受第一个门户，它也会抛出错误

```
No route matches {:controller=>"portal_data", :action=>"show"} 
```

但如果我在那儿耙我的路线？

我确定我做错了什么很明显有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:35:08.763

我所要做的就是使 :id 成为一个可选参数，就像这样......

```
match '/portal_data(/:id)' 
```

它有效:) 然后在控制器中寻找......

```
def load_portal
  @portal = Portal.find(params[:id] || current_portal.id)
end 
```

...如果参数中没有，则帐户上的门户 ID。

# c - 交换 2 个 char_type 变量中不同位置的位

> ID：12602016
> 
> 赞同：0
> 
> 时间：2012-09-26T12:44:30.130
> 
> 标签：c, byte, swap

我想在 2 个 unsigned char_type 变量之间交换一段位：a 和 b。如果段不是连续的，如何用 C 语言解决它？例如 a 为**011* *001* *10**，输入段长度：5，起始位置 pa=5，段从 bit7~bit5 到 bit1~bit0 ，即**011 10**；b 为**10* *011* *001**，位置 pb=6，段来自 bit6~bit7 和 bit2~bit0，即**10 001**。2 段具有相同的长度。预期结果应该是这样的：a1= 11000100, b1= 11011001

我尝试使用 2 个临时变量 x 和 y 将交换位存储在 b 和 a 中，然后使用 ^ 完成交换。方法太复杂了。有什么棘手的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:25:55.197

剧透：（我使用比 char 更大的类型）

```
void swapmask(unsigned *a, unsigned *b, unsigned posa, unsigned posb, unsigned len)
{
unsigned mask, fraga, fragb;

#include <limits.h>
if (len >= CHAR_BIT* sizeof *a) return ;
if (posa >= CHAR_BIT* sizeof *a) return ;
if (posb >= CHAR_BIT* sizeof *b) return ;

mask = (1u << len) -1;
fraga = (*a >> posa) & mask;
fragb = (*b >> posb) & mask;

fprintf(stderr, "Mask=%x Fa=%x, Fb=%x\n", mask, fraga, fragb);

*a = (*a & ~(mask << posa)) | (fragb << posa);
*b = (*b & ~(mask << posb)) | (fraga << posb);
} 
```

# mysql - Mysql在存储过程中创建动态触发器

> ID：12602020
> 
> 赞同：0
> 
> 时间：2012-09-26T12:44:48.940
> 
> 标签：mysql

我想在调用过程时创建动态触发器，它给出了 mysql 服务器版本语法错误，当我选择该查询并在单独的查询编辑器中执行时，它将被执行。

```
DROP TABLE IF EXISTS auditLog;
CREATE TABLE `auditlog` (
  `tableName` VARCHAR(255) DEFAULT NULL,
  `rowPK` INT(11) DEFAULT NULL,
  `fieldName` VARCHAR(255) DEFAULT NULL,
  `old_value` VARCHAR(255) DEFAULT NULL,
  `new_value` VARCHAR(255) DEFAULT NULL,
  `ts` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=ARCHIVE;

CREATE TABLE country(countryname VARCHAR(100);

DROP PROCEDURE IF EXISTS addLogTrigger;
DELIMITER $
/*
call addLogTrigger('country','CountryID','CountryName')

*/
CREATE PROCEDURE addLogTrigger
(IN tableName VARCHAR(255), IN pkField VARCHAR(255),IN column_name VARCHAR(50))
BEGIN

    SET @qry = CONCAT
    (
' 
DROP TRIGGER IF EXISTS  ', tableName, '_AU ; 

CREATE TRIGGER ', tableName, '_AU AFTER UPDATE ON ', tableName, ' 
FOR EACH ROW
              ',' 
                 INSERT INTO auditLog (',
                    'tableName, ',
                    'rowPK, ',
                    'fieldName, ',
                    'old_value, ',
                    'new_value'
                    ') VALUES 
                    ( ''', 
                        tablename, ''', NEW.', 
                        pkField, ', ''', 
                        column_name, ''', OLD.', 
                        column_name, ', NEW.', 
                        column_name, 
                    '); 
                    '
             , '  

             '
        ) ;

        SELECT @qry;
        PREPARE stmt FROM @qry;
            EXECUTE stmt;
         DEALLOCATE PREPARE stmt;

END$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:08:30.993

卡西克扬，

您不能在存储过程中创建触发器。触发器是一个 DDL 语句，不允许在过程中使用。

“ ERROR 1303 (2F003): Can't create an TRIGGER from within another stored routine “

为了解决您的目的，您可以执行以下操作：

*   从变量中的表中获取当前值。

*   只需在您的过程中编写一个更新查询，然后通过“ROW_COUNT()”检查值是否更新。

*   将新值与旧值进行比较，然后手动插入 change_log 表。

# google-drive-api - 如何知道一个帐户是否有权限分享到网络？

> ID：12602028
> 
> 赞同：3
> 
> 时间：2012-09-26T12:45:24.717
> 
> 标签：google-drive-api

我知道您可以使用此路线修改权限：

[https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)

但如果用户是 Google Apps 帐户，我会遇到问题。如果用户无权将文档共享到网络，则共享会中断（您将被重定向到要求您登录该域的谷歌应用程序帐户的网页）。

我在这里找到了参数“domainSharingPolicy”：

[https://developers.google.com/drive/v2/reference/about#resource](https://developers.google.com/drive/v2/reference/about#resource)

但它并不是真正一致的。您可以使用字符串 'allowed' 或 'allowedWithWarning'，但它实际上并不允许。

所以我的问题是，如何知道该帐户是否是 Google Apps 帐户？（是的，我读过[这个](https://stackoverflow.com/questions/11517551/how-to-know-if-a-google-account-is-under-a-google-apps-domain)）

和/或，如何知道该帐户是否有权将文档共享到网络？（不只对组织）。

# android - 改变资源的价值

> ID：12602030
> 
> 赞同：0
> 
> 时间：2012-09-26T12:45:31.330
> 
> 标签：android, layout

我是安卓新手。我的活动的一部分包含

```
TextView message = (TextView) findViewById(R.id.show_message);
Intent intent = getIntent();
String name = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
message.setText(name); 
```

`MainActivity`是调用当前活动的上一个活动。此外，上述活动的布局文件是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView  
    android:id="@+id/show_message" 
    android:layout_height="wrap_content" 
    android:textAppearance="?android:attr/textAppearanceLarge" 
    android:layout_width="wrap_content">

</TextView>

<Button
    android:id="@+id/button_back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/show_message"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="17dp"
    android:onClick="goBack"
    android:text="Go Back to Activity Lifecycle" /> 
```

我知道它`message.setText(name)`设置了`String`to`name`但`message`它怎么也改变了`show_message`？在`Activity`应用程序中启动时，它会显示应该显示`String`的位置的值。`name``show_message`

实际上，我希望代码以现在的方式执行，但我不明白为什么。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:50:17.073

的值`String name`不是由`message.setText`接收到的 Intent 中的 StringExtra 设置的（启动活动）

`TextView message`指向`TextView R.id.show_message`

所以`message.setText("anything")`将 show_message 的文本值设置为“任何东西”

`message.setText(name)`将 show_message 的文本设置为任何字符串名称所代表的...这里是在意图中传递的值。

# python - Dbus 的 Python 访问 Pidgin 数据结构

> ID：12602032
> 
> 赞同：0
> 
> 时间：2012-09-26T12:45:36.980
> 
> 标签：python, ubuntu, plugins, dbus, pidgin

我最近开始用 Python 编程并为 Pidgin 制作脚本/插件，我需要访问[PurpleConversationUiOps](https://developer.pidgin.im/doxygen/dev2.x.y/html/struct__PurpleConversation.html)并使用 [has_focus](https://developer.pidgin.im/doxygen/dev2.x.y/html/struct__PurpleConversationUiOps.html#a4efbcf4840b40df03d45826825902634)字段，基于 Pidgin 文档中的一些示例，我做了这个：

```
 #!/usr/bin/env python
    import dbus, gobject
    from dbus.mainloop.glib import DBusGMainLoop

    def view(conv):
     if conv == 1: #if has focus
       print "Has Focus"

    dbus.mainloop.glib.DBusGMainLoop(set_as_default=True)
    bus = dbus.SessionBus()
    bus.add_signal_receiver(view,
                    dbus_interface="im.pidgin.purple.PurpleConversationUiOps",
                    signal_name="HasFocus")
    loop = gobject.MainLoop()
    loop.run() 
```

他没有给出错误，但我没有收到任何信号，那么我如何访问 has_focus 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:05:50.457

我已经用 d-feet 检查了我的 Pidgin 2.10.0 并且只有一个界面， `im.pidgin.purple.PurpleInterface`. 您正在寻找的 API 似乎是 method (not signal) `PurpleConversationHasFocus(int32 conv) -> int32`。

要获得对话，有`PurpleGetConversations -> Array of int32`或 信号`ConversationCreated(int32)`。

```
$ dbus-send --print-reply --dest=im.pidgin.purple.PurpleService  /im/pidgin/purple/PurpleObject im.pidgin.purple.PurpleInterface.PurpleGetConversations
method return sender=:1.165 -> dest=:1.172 reply_serial=2
   array [
      int32 22042
   ]
$ dbus-send --print-reply --dest=im.pidgin.purple.PurpleService  /im/pidgin/purple/PurpleObject im.pidgin.purple.PurpleInterface.PurpleConversationHasFocus int32:22042
method return sender=:1.165 -> dest=:1.174 reply_serial=2
   int32 0 
```

# sql - SSMS 2008 估计执行计划，执行计划分析工具提示消失

> ID：12602036
> 
> 赞同：0
> 
> 时间：2012-09-26T12:45:53.097
> 
> 标签：sql, sql-server-2008, ssms

在 SQL Server Management Studio 2008 中，当我运行估计的执行计划时，我右键单击结果以显示执行计划分析。

估计执行计划的左侧是图标，可让您查看有关计划的信息。要查看文本，您必须将鼠标悬停在图标上。文本显示在工具提示中。但是，工具提示会在几秒钟后消失，我必须将鼠标移开并重新悬停。这使得如果非常难以阅读。

还有其他方式或地方可以查看此文本吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:01:54.537

属性面板中提供了很多此类信息。只需单击 F4，面板将显示计划中的信息，或者，如果您单击操作员，则显示当前选择的操作员。

也就是说，您可以尝试免费的[SQL Sentry Plan Explorer](http://sqlsentry.net/plan-explorer/sql-server-query-view.asp)。所有这些信息（以及更多信息！）都在不同的选项卡中呈现给您，其中许多具有支持排序的网格格式。比试图记住您在最后一个运算符中看到的内容并将其与当前运算符进行比较要容易得多。

*免责声明：我为 SQL Sentry 工作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:02:20.987

我发现答案是不使用“执行计划分析”。相反，在单击“Display Estimated Execution Plan”后，将鼠标悬停在执行计划中的第一个图标上，然后查看“Estimated Subtree Cost”中的值。

# php - 用户信息在抓取时丢失

> ID：12602041
> 
> 赞同：0
> 
> 时间：2012-09-26T12:46:09.853
> 
> 标签：php, web-scraping

现在，我登录到一个网站，该网站在标题中显示我的用户名，表明我已登录。

现在，当我尝试抓取该网页并在我的 m/c 上显示结果时，页面标题显示“登录”，表明我需要登录。

我想我在抓取时遗漏了一些我需要考虑的 cookie 信息。

有什么办法我也可以读取cookies。

卷曲代码：

```
function getString( $url ) {
    $ch = curl_init();
    curl_setopt( $ch, CURLOPT_URL, $url );
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 );
    curl_setopt( $ch, CURLOPT_AUTOREFERER, true );
    curl_setopt( $ch, CURLOPT_COOKIESESSION, true );
    curl_setopt( $ch, CURLOPT_COOKIEJAR, 'cookie.txt' );
    $response = curl_exec( $ch );
    curl_close( $ch );
    return $response;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:59:31.857

由于完整路径 Cookie 路径，您的代码无法正常工作，并确保它`cookie.txt`是可写的

尝试

```
var_dump(getString("http://google.com"));

    function getString($url) {
    $ch = curl_init();
    $cookie =  __DIR__ . '/cookie.txt' ;
    touch($cookie);

    if(!is_writable($cookie))
    {
        die("Can't write to cookie");
    }

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_COOKIESESSION, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_COOKIEJAR,$cookie);
    curl_setopt($ch, CURLOPT_COOKIEFILE,$cookie);
    $response = curl_exec($ch);
    curl_close($ch);
    return $response;
} 
```

cookie.txt 输出

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

.google.com TRUE    /   FALSE   1411737249  PREF    ID=ff7979720d6a1237:FF=0:TM=1348665249:LM=1348665249:S=bRYSIBSW9Cd7PKOr
#HttpOnly_.google.com   TRUE    /   FALSE   1364476449  NID 64=tcm3RUM8R_1ch9eD6tuFi4lObBjSNdxqwMHbpchYCQoUpghIjZbiNw8AdAm0buTAVF0SqUsZsYEs7PAWhJdhutO11EQ9y8iXwuQ9dsPmdWlt86BAa7hxRqQcjSoX9Bep
.google.com.ng  TRUE    /   FALSE   1411737252  PREF    ID=9428863ec2e741f5:FF=0:TM=1348665252:LM=1348665252:S=s7wtyWMM9OnRYoE4
#HttpOnly_.google.com.ng    TRUE    /   FALSE   1364476452  NID 64=Gyszb-4_10nzvSU6kGzBj5UQRTnB7purbAH0reBytKi_pn9m3R-0BXGBEjrkmMBmOYfFpfIQOYLaCgi5LfKOIcnPCrTpTpV9LVld-Xf9pq7U7W5QaZ63a_yHIG9Vmcir 
```

# css - 移动设备上嵌入谷歌地图，烦人的按钮改变地图大小

> ID：12602046
> 
> 赞同：0
> 
> 时间：2012-09-26T12:46:18.110
> 
> 标签：css, google-maps, mobile, button

我无法让嵌入式谷歌地图在移动设备上正常工作。它位于一个 div 框中，并设置为 100% 高度/宽度，并且在不在手机上时可以正常工作。在手机上，它在右下角添加了一个带有箭头的大方形按钮，从而将 div 中的地图大小缩小到大约一半。当我单击神秘按钮时，什么也没有发生。所以，一个没有功能的烦人的按钮。当我触摸地图时，按钮消失并且 div 被填充。无论如何要摆脱那个按钮？

# php - Websocket客户端认证

> ID：12602047
> 
> 赞同：3
> 
> 时间：2012-09-26T12:46:18.557
> 
> 标签：php, authentication, websocket, chat

如何在基于 google websocket 的聊天系统中验证客户端，以便只有有效用户才能发送消息？

我希望客户端请求仅在验证连接后才进行连接。

**服务器端代码......**

```
 <?php
// prevent the server from timing out
set_time_limit(0);
include("database.php");

// include the web sockets server script (the server is started at the far bottom of this file)
require 'class.PHPWebSocket.php';

// when a client sends data to the server
function wsOnMessage($clientID, $message, $messageLength, $binary) {
    global $Server;
    $ip = long2ip( $Server->wsClients[$clientID][6] );

    // check if message length is 0
    if ($messageLength == 0 or trim($message)=='') {
        $Server->wsClose($clientID);
        return;
    }
    // check if either it is valid msg or not
    if (!(substr($message,0,5)=='12345')) {
        $Server->wsSend($clientID, "You are not a valid user so you can not send message.");
        $Server->wsClose($clientID);
        return;
    }

    //The speaker is the only person in the room. Don't let them feel lonely.
    if ( sizeof($Server->wsClients) == 1 )
    {  
        mysql_query( "INSERT INTO message VALUES ( null,1000000000,2000000000,'$message',null )") or die(mysql_error()); 
        $Server->wsSend($clientID, "You  are  alone in chat room");
    }
    else
        //Send the message to everyone but the person who said it
        foreach ( $Server->wsClients as $id => $client )
            if ( $id != $clientID )
        //-------       $Server->wsSend($id, "Visitor $clientID ($ip) said \"$message\"");
        {

        mysql_query( "INSERT INTO message VALUES ( null,1000000000,2000000000,'$message',null )") or die(mysql_error()); 
        $Server->wsSend($id, " ($ip)  \"$message\"");

        }

}

// when a client connects
function wsOnOpen($clientID)
{
    global $Server;
    $ip = long2ip( $Server->wsClients[$clientID][6] );

    $Server->log( "$ip ($clientID) has connected." );

    //Send a join notice to everyone but the person who joined
    foreach ( $Server->wsClients as $id => $client )
        if ( $id != $clientID )
            $Server->wsSend($id, "Visitor $clientID ($ip) has joined the room.");
}

// when a client closes or lost connection
function wsOnClose($clientID, $status) {
    global $Server;
    $ip = long2ip( $Server->wsClients[$clientID][6] );

    $Server->log( "$ip ($clientID) has disconnected." );

    //Send a user left notice to everyone in the room
    foreach ( $Server->wsClients as $id => $client )
        $Server->wsSend($id, "Visitor $clientID ($ip) has left the room.");
}

// start the server
$Server = new PHPWebSocket();
$Server->bind('message', 'wsOnMessage');
$Server->bind('open', 'wsOnOpen');
$Server->bind('close', 'wsOnClose');
// for other computers to connect, you will probably need to change this to your LAN IP or external IP,
// alternatively use: gethostbyaddr(gethostbyname($_SERVER['SERVER_NAME']))
$Server->wsStartServer('127.0.0.1', 9300);

?> 
```

**客户端代码**

```
 <!doctype html>
<html>
<head>
    <meta charset='UTF-8' />
    <style>
        input, textarea {border:1px solid #CCC;margin:0px;padding:0px}

        #body {max-width:800px;margin:auto}
        #log {width:100%;height:400px}
        #message {width:100%;line-height:20px}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="fancywebsocket.js"></script>
    <script>
        var Server;

        function log( text ) {
            $log = $('#log');
            //Add text to log
            $log.append(($log.val()?"\n":'')+text);
            //Autoscroll
            $log[0].scrollTop = $log[0].scrollHeight - $log[0].clientHeight;
        }

        function send( text ) {
            Server.send( 'message', text );
        }

        $(document).ready(function() {
            log('Connecting...');
            Server = new FancyWebSocket('ws://127.0.0.1:9300');

            $('#message').keypress(function(e) {
                if ( e.keyCode == 13 && this.value ) {
                // -----    log( 'You: ' + this.value );

                    log(  $('#name').val()+" ---> " + this.value );

                    send( $('#key').val()+ $('#name').val()+" ---> " + this.value);

                    $(this).val('');
                }
            });

            //Let the user know we're connected
            Server.bind('open', function() {
                log( "Connected." );
            });

            //OH NOES! Disconnection occurred.
            Server.bind('close', function( data ) {
                log( "Disconnected." );
            });

            //Log any messages sent from server
            Server.bind('message', function( payload ) {
                log( payload );
            });

            Server.connect();
        });
    </script>
</head>

<body>
    <div id='body'>
        <textarea id='log' name='log' readonly='readonly'></textarea>
        <table width="100%" border="0">
          <tr>
          <td align="center"><label for="name">Enter Your Name:</label><input type="text" name="name" id='name' ><label for="name">Enter Your Key:</label><input type="text" name="key" id='key' ></td>
          </tr>
        </table>
        <br/>
        <label for="message">Enter Your Message:</label><input type='text' id='message' name='message' />
    </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:20:30.657

据我所知，您可以将标准 HTTP 身份验证机制与 WebSocket 一起使用。

附言

看[类似的问题](https://stackoverflow.com/questions/6169842/websocket-authentication)

# dtd - DOM4J 根据运行时提供的 DTD 验证 xml

> ID：12602048
> 
> 赞同：0
> 
> 时间：2012-09-26T12:46:24.597
> 
> 标签：dtd, xml-validation, dom4j

我需要根据 DTD 验证第三方生成的多个文件；这些文件没有 dtd 声明，我不能更改它，因为我不是所有者，有没有办法通过单独提供 DTD 来使用 dom4j 验证它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:41:55.473

您始终可以将 DTD 转换为模式（例如使用[trang](http://www.thaiopensource.com/relaxng/trang.html)），并针对每个文档的模式执行内存验证。

为此，您将`javax.xml.validation.ValidationHandler`使用转换后的模式创建一个，并将其提供给 DOM4J `SAXWriter`。

另一种选择当然是

1.  将不经验证的每个文档解析为 DOM4J`Document`
2.  将 DOM4j 添加`DefaultDocumentType`到已解析的文档中
3.  将文档写入临时字符串缓冲区
4.  再次解析，但这次需要验证`SAXReader`

# ios - 添加 .xib 、 .h 和 . m 到现有的故事板。

> ID：12602053
> 
> 赞同：2
> 
> 时间：2012-09-26T12:46:33.763
> 
> 标签：ios, xcode

我对 iOS 编程和 Xcode 非常陌生。我学到了很多东西。大部分来自这个表单，但我无法找到我认为是这样一个基本问题的答案。

我已经使用带有情节提要的 Xcode 4.5 开始了一个新项目。故事板只是基本的两视图故事板。我的应用需要“启动”视图。虽然我已经能够通过“添加文件”来添加视图（.xib）文件。我看不到将这个视图（它是 .h 和 .m）包含到情节提要中的方法。我认为这基本上是拖放，但我看不到这样的选择。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:49:47.373

File..> New>File>Objective C File > Class name (yourname) Subclass of: UIViewController 并点击复选框：“With XIB for User Interface”

祝你好运

# css - CSS3变换90度后垂直对齐中心

> ID：12602054
> 
> 赞同：0
> 
> 时间：2012-09-26T12:46:43.493
> 
> 标签：css, rotation, vertical-alignment, text-align

我正在寻找一种在标签旋转 90 度后集中对齐标签文本的方法。选项卡可以有不同的高度，因此不能简单地通过使用精确坐标改变绝对定位来完成。

这是一个 FIDDLE [http://jsfiddle.net/gPAhK/22/](http://jsfiddle.net/gPAhK/22/)尝试将文本居中

```
.vtab .trigger li {
    display:block; width:40px; height:200px; border-radius:10px 0 0 10px; margin:0 0 -50px 2px; z-index:10; cursor:pointer; position:relative;
    background:url(http://www.divethegap.com/boris/tabs-large.png) no-repeat;
}
.vtab .trigger li b {
    display:block; line-height:46px; color:#222; -webkit-transform:rotate(-90deg); text-align:center; background-color:rgba(0,0,0,0.1);
} 
```

​</p>

# c# - 如何为 WebApi 中的属性实现 DI？

> ID：12602059
> 
> 赞同：1
> 
> 时间：2012-09-26T12:47:11.960
> 
> 标签：c#, dependency-injection, attributes, ninject, asp.net-web-api

我重构了一个在 Web api 中实现基本 Http 身份验证的属性，使其具有如下 DI：

```
 public class BasicHttpAuthAttribute : ActionFilterAttribute
    {
        private readonly ILoginManager _manager;

        public BasicHttpAuthAttribute(ILoginManager manager)
        {
            this._manager = manager;
        }
        public override void OnActionExecuting(HttpActionContext actionContext)
        {
            if (actionContext.Request.Headers.Authorization == null)
            {
                actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.Unauthorized);
                actionContext.Response.Content = new StringContent("Missing Auth-Token");
            }
            else
            {

                var authToken = actionContext.Request.Headers.Authorization.Parameter;
                var decodedToken = Encoding.UTF8.GetString(Convert.FromBase64String(authToken));

                string userName = decodedToken.Substring(0, decodedToken.IndexOf(":"));
                string password = decodedToken.Substring(decodedToken.IndexOf(":") + 1);

                UserInfo user;

                if (_manager.LoginPasswordMatch(userName, password, out user))
                {
                    var apiUser = new ApiUser(user.UserID);
                    HttpContext.Current.User = new GenericPrincipal(new ApiIdentity(apiUser), new string[]{});

                    base.OnActionExecuting(actionContext);

                }
                else
                {
                    actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.Unauthorized);
                    actionContext.Response.Content = new StringContent("Invalid username or password");
                }

            }
        }
    } 
```

在重构之前，我在 OnActionExecuting 中创建了一个 LoginManager 实例（它本身没有 DI，因此我可以使用 ctor 创建一个实例）。重构后的问题是构建失败，因为当我将过滤器应用于 WebApi 方法时，它期望那里有一个参数。

在这种情况下，我如何实现 DI，因为 LoginManager 本身在其构造函数中采用 ILoginRepository？甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:08:26.133

这并不容易，因为 Web API 中处理属性的方式与您可能期望的有点不同。首先它们是在不同的时间点创建的，其次它们是缓存的。

话虽如此，而不是通过构造函数注入，实现 DI 的最简单方法是在处理时调用您选择的 DI 框架，然后检索依赖项，即在您的内部`onActionExecuting`：

```
var s = GlobalConfiguration.Configuration.DependencyResolver.GetService(typeof(IService)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:01:27.603

最简单的选择是让你的构造函数不需要参数，而是使用不同的注入形式。具体如何操作取决于您使用的 DI 容器。例如，使用 Unity，您可以只创建一个默认构造函数。创建另一个公共方法（为了清楚起见，我通常称它为 Initialize）并用 [InjectionMethod] 属性装饰它。然后，在您的构造函数中，只需调用 container.BuildUp(this); 这基本上允许 MVC 随意调用默认构造函数，但您的 InjectionMethod 始终作为构造过程的一部分自动调用。

对其他 DI 容器也有类似的方法来做同样的事情，但不知道你在使用什么 Unit 示例是最容易解释的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:11:44.937

您无法控制 的实例化，`BasicHttpAuthAttribute`因此您无法使用正确的 DI。

您可以`ServiceLocator`在属性的构造函数中使用 a 来为您提供所需的依赖项，或者您可以使用`BuildUp`某些容器为现有对象提供的功能。

Unity 这样做是为了支持`BuildUp`不是您自己创建的第 3 方对象。

对于您的属性，这意味着创建一个类型的公共可写属性`ILoginManager`并告诉容器将您的管理器注入该属性。

您不必使用`DependencyAttribute`btw 污染您的属性。向容器注册您的属性类型，并提供一个`InjectionProperty("NameOfThePropertyToInject")`作为该注册的参数。

# javascript - 使用 jquery 显示和隐藏覆盖

> ID：12602065
> 
> 赞同：3
> 
> 时间：2012-09-26T12:47:35.590
> 
> 标签：javascript, jquery, jquery-animate

我正在使用 JQuery 来显示和隐藏我的叠加层，效果很好。现在我还想添加一些动画，因此我继续查看 jq 文档并获得了一些可以直接应用于显示和隐藏功能的漂亮动画。

虽然我正在寻找的是点击，覆盖应该出现从我点击的 div 中，并且在关闭覆盖时，它应该通过最小化到用于打开它的 div 来隐藏。

谢谢

[如果您可以在此处显示，则为小提琴 URL](http://jsfiddle.net/HfKTA/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T12:58:44.987

检查这个小提琴： http: [//jsfiddle.net/HfKTA/1/](http://jsfiddle.net/HfKTA/1/) - 猜猜这就是你要找的。

更新了多个触发器的小提琴：http: [//jsfiddle.net/HfKTA/2/](http://jsfiddle.net/HfKTA/2/)

# mysql - 将数据从 latin1 更改为 utf8

> ID：12602066
> 
> 赞同：1
> 
> 时间：2012-09-26T12:47:36.420
> 
> 标签：mysql, iconv

我有一个包含 latin1 编码格式数据的数据库。我正在尝试将所有数据转换为 utf-8，因为缺少一些芬兰语、丹麦语字符。我尝试使用以下命令。

```
 mysqldump --default-character-set=latin1 -u username -p -h example.com database_name > backup.sql
 iconv -f latin1 -t UTF-8 < backup.sql > converted-file.sql 
```

但它不工作。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:48:27.170

```
ALTER TABLE mytable CONVERT TO CHARACTER SET utf8 
```

# javascript - 是否可以抓取一个页面以将其呈现到 javascript 和 html 中的另一个页面？

> ID：12602071
> 
> 赞同：0
> 
> 时间：2012-09-26T12:47:45.073
> 
> 标签：javascript, html

在我的公司，我们正在讨论这个问题。假设您有一个已经内置在产品详细信息页面中的色板。在显示每个产品的类别页面上，没有色板。所以我们正在努力建造一个。我建议我们是否可以使用 jquery 或 javascript 来抓取它、缓存它或从 pdp 中拖动它并在类别页面中显示它。如果我们这样做，它可能会很慢，因为类别页面会多次访问服务器。

附加信息，我们无法访问 php 代码，因此只能使用 javascript、jquery 和 html。

我实际上正在寻找一种方法来做到这一点。当然，它也必须跑得快。任何人的可能性建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:51:26.373

我不认为这是可能的，你的 jquery 或 javascript 应该是页面的原生来读取它的内容，好的让我们假设它是原生的，你可以阅读内容但是你在哪里存储？只有 javascript 和 jquery 而不是很多服务器端，这是**不可能的**

# scala - Play 2.0 - 在测试中编译 twitter bootstrap

> ID：12602076
> 
> 赞同：0
> 
> 时间：2012-09-26T12:47:58.117
> 
> 标签：scala, playframework-2.0, sbt

我有一个项目，我想编译 twitter bootstrap 并防止并行执行测试

```
def twitterBootstrapEntryPoints(base:File):PathFinder = {
    (base / "app" / "assets" / "stylesheets" / "bootstrap" * "bootstrap.less") +++
    (base / "app" / "assets" / "stylesheets" / "bootstrap" * "responsive.less") +++
    (base / "app" / "assets" / "stylesheets" * "*.less")
}

val common = PlayProject(appName, appVersion,appDependencies, mainLang = SCALA).settings(
    organization := appOrganization,
    lessEntryPoints <<= baseDirectory(twitterBootstrapEntryPoints),
    resolvers ++= commonResolvers).settings( inConfig(Test)(parallelExecution := false) : _* ) 
```

* * *

**编辑：**

要构建 twitter 引导程序，应该只编译 bootstrap.less 和 responsive.less ，它们会导入所有其他文件。在编译一切正常，在测试中运行时，这不再起作用，编译器尝试编译所有 .less 文件

这是我在游戏控制台上看到的

```
[GottwareWeb] $ clean
[success] Total time: 0 s, completed 26 sept. 2012 17:44:07
[GottwareWeb] $ compile
[info] Updating {file:/G:/GottwareWeb/}GottwareWeb...
[info] Resolving org.hibernate.javax.persistence#hibernate-jpa-2.0-api;1.0.1.Fin

[info] Done updating.
[info] Compiling 34 Scala sources and 1 Java source to G:\GottwareWeb\target\sca
la-2.9.1\classes...
[success] Total time: 9 s, completed 26 sept. 2012 17:44:17
[GottwareWeb] $ test
[error] {file:/G:/GottwareWeb/}GottwareWeb/*:play-copy-assets: in G:\GottwareWeb
\app\assets\stylesheets\accordion.less - PlayException: Compilation error [varia
ble @baseLineHeight is undefined]
[error] {file:/G:/GottwareWeb/}GottwareWeb/compile:resources: in G:\GottwareWeb\
app\assets\stylesheets\accordion.less - PlayException: Compilation error [variab
le @baseLineHeight is undefined]
[error] Total time: 0 s, completed 26 sept. 2012 17:44:32
[GottwareWeb] $ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:48:17.297

默认情况下，并行执行测试设置为 false。您不必将其包含在配置中。

此处的文档：[https ://github.com/playframework/Play20/wiki/SBTSettings](https://github.com/playframework/Play20/wiki/SBTSettings)

在您的设置中，Play 还必须在生产环境中编译 app/assets/stylesheets 中的所有 less 文件。这是你不想要的吗？还是编译 app/assets/stylesheets/bootstrap/ 中的所有内容？

# iphone - 如何获取保存在文档目录中的视频缩略图

> ID：12602079
> 
> 赞同：3
> 
> 时间：2012-09-26T12:48:10.133
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我将捕获的视频保存在文档目录中，如下所示，现在我想显示缩略图并播放相同的视频。如何做到这一点？

```
- (void) imagePickerController: (UIImagePickerController *) picker didFinishPickingMediaWithInfo: (NSDictionary *) info

{    
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

    [self dismissModalViewControllerAnimated:NO];

// Handle a movie capture
if (CFStringCompare ((__bridge_retained CFStringRef) mediaType, kUTTypeMovie, 0) == kCFCompareEqualTo)
{
    NSArray  *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir  = [documentPaths objectAtIndex:0];
    NSString *movieName = [NSString stringWithFormat:@"%@.mov",[CoreDataFunctions getNameForVideoForDate:[CalendarFunctions getCurrentDateString]]];
    NSString *moviePath    = [documentsDir stringByAppendingPathComponent:movieName];
    NSURL * movieURL = [info valueForKey:UIImagePickerControllerMediaURL];
    NSData * movieData = [NSData dataWithContentsOfURL:movieURL];
    NSLog(@"%@",moviePath);
    if([movieData writeToFile:moviePath atomically:NO])
    {
        if(![CoreDataFunctions saveVideoInfoInDatabaseForDate:[CalendarFunctions getCurrentDateString]])
        {
            NSLog(@"Video was saved in doucment directory but could not be saved in core data");
        }
    }
    else
    {
        NSLog(@"Video could not be saved to the document directry");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T12:58:15.257

像这样从 doc dir 获取视频

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSError * error;
NSArray *directoryContents =  [[NSFileManager defaultManager] 
                          contentsOfDirectoryAtPath:documentsDirectory error:&error];

//Take all images in NSMutableArray
NSMutableArray *arrVideoImages = [[NSMutableArray alloc]init];
for(NSString *strFile in directoryContents)
{
   NSString *strVideoPath = [NSString stringWithFormat:@"%@/%@",documentsDirectory,strFile];
   UIImage *img = [self getThumbNail:strVideoPath];
   [arrVideoImages addObject:img];

} 
```

还要添加这个方法：

```
-(UIImage *)getThumbNail:(NSString)stringPath
{
  NSURL *videoURL = [NSURL fileURLWithPath:stringPath];

  MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];

    UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];

    //Player autoplays audio on init
    [player stop];
    [player release];
    return thumbnail;
 } 
```

# sql-server - 无法以期望格式显示报告

> ID：12602080
> 
> 赞同：0
> 
> 时间：2012-09-26T12:48:10.960
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008

我之前问过这个问题，有人投票否决了我的问题，说这个问题无效。我花了三天时间解决这个问题。因此，如果您不理解它，并不意味着该问题无效。这里是：

我创建了一个 SSRS 报告。**我在分页和分组方面面临问题。** 这是我的报告的输出。![在此处输入图像描述](../Images/d2aa0f078eec080a94eb053ca043454d.png)

在每一页上，我想按登陆日期和买家姓名显示记录组。即在第一页应显示以下内容：
**买家姓名登陆日期实际价格**
SHETLAND 06-Jan-05 100989.754569257
第二页：
**买家姓名登陆日期实际价格**
SHETLAND 11-Jan-05 1096677.95045137
第三页：
**买家姓名登陆日期实际价格**
新鲜 14-Jan-05 300080.972657965设得兰
群岛 14-Jan-05 157372.157557842

==================================================== =========================

**我使用组属性应用了分组，但没有效果。基本上我想在一页上显示具有相同登陆日期的记录。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:54:22.693

尝试在两个级别（嵌套）上创建分组。即首先按登陆日期分组，然后右键单击新创建的组并创建一个子组。并在子组中创建表达式以按买方名称分组。希望它会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:40:24.223

您需要在登陆日期和买方名称上添加一个行组，然后在组属性中勾选“在组实例之间添加分页符”复选框

# c# - 字符到 ASCII 的转换在语言之间不一致？

> ID：12602085
> 
> 赞同：0
> 
> 时间：2012-09-26T12:48:16.703
> 
> 标签：c#, vb6, char, ascii

为什么`Chr(130)`在 Visual Basic 6 中是逗号 (,) 而在 C#`(char)130`中不是？（我不确定它是什么，但绝对不是逗号！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:55:24.897

严格来说 ASCII 是一个 7 位的编码，只定义整数编码为 0..127 的字符。制造商经常创建代码在 128..255 范围内的字符的变体实现。

例如，参见[关于 ASCII 的 Wikipedia 文章](http://en.wikipedia.org/wiki/ASCII)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:15:57.877

Vb Function Chr() 肯定不同于将整数值 130 转换为 char 的结果。要在 c# 中获得相同的结果，您可以在 c# 中设置对 Microsoft.VisualBasic 的引用并调用 Microsoft.Visualbasic.Chr(130)。

[http://msdn.microsoft.com/en-us/library/613dxh46(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/613dxh46(v=vs.80).aspx)

您还可以研究下面链接中公开的任何选项，并查看返回您想要的值的选项。

[C# 中的 Int 到 Char](https://stackoverflow.com/questions/289792/int-to-char-in-c-sharp)

# api - 如何组织 REST API？

> ID：12602088
> 
> 赞同：2
> 
> 时间：2012-09-26T12:48:18.060
> 
> 标签：api, rest

我正在为我们的业务系统开发一个休息 API。到目前为止，我们有以下资源：

```
/sales/orders
/sales/orders/{orderno}
/sales/order-items 
```

API 完成后会有很多资源，因此我们需要以一种好的方式对其进行结构化，使其易于理解。我的问题是：应该`/sales/order-items`改为`/sales/orders/order-items`？这里可能没有正确的答案，但你更喜欢什么？

还有一个问题：该`sales/order-items`资源将列出所有未清项目或所有已发货项目。无论状态如何（打开/已发货） ，都*无法*获得所有订单项目。资源 URI 可以是这样`sales/order-items?orderstatus={OPEN/SHIPPED}`的（orderstatus 查询参数将是*强制性*的）或者它可以是这样的两个资源`sales/order-items/open`和`sales/order-items/shipped`. 什么是首选？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:32:40.517

资源是“可以命名的任何信息”。您的 URI 应该是基于实体的。'order-items' 不是实体，而是数据类型。

`/sales/order/order-1456321`是您最可能想要的实体。其中将包含所有订单项目的数据。

如果您希望限制访问，如果未提供查询字符串，则可以返回客户端错误。并拥有

```
/sales/order/order-12345?status=open 
```

等希望这会有所帮助。

编辑：

```
/sales/order-items or /sales/orders/order-items? 
```

这是特定领域的，确实应该由领域专家来回答。您的 URI 层次结构为您的资源提供范围（以及细节）。所以作为一个有根据的猜测，在“/sales/orders/”范围内有“order-items”是没有意义的，因为“order-items”不是“order”。

```
/sales/ordered-items 
```

似乎是最明智的答案。

就个人而言，不要过多地质疑您的领域，对业务流程和存储的信息有深入的了解可能会产生与这些建议类似的东西；

```
/sales/orders?status=open - Are all orders shipped at once?
/sales/orders/order-1234/packages?status=open - Are orders split into packages? 
```

# javascript - 为什么这个 jquery 代码对我不起作用？

> ID：12602089
> 
> 赞同：0
> 
> 时间：2012-09-26T12:48:22.770
> 
> 标签：javascript, jquery

我在 jquery 中写了非常小的代码，但我无法执行它我错在哪里？

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js">    
<script type="text/javascript">
$(document).ready(function(){
  $("p").click(function(){
    $(this).hide();
  });
});
</script>
</head>

<body>
<p>If you click on me, I will disappear.</p>
</body>

</html> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:49:40.520

您忘记关闭 jquery 的脚本标记。它应该是这样的：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('p').click(function() {
            $(this).hide();
        });
    });
</script> 
```

注意结束`</script>`标签

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:49:54.133

您没有关闭第一个脚本标签：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T12:52:50.157

您忘记关闭脚本标签

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"> </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T09:10:13.407

关闭 head 标签内的 script 标签。

```
<html>
<head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js">  </script>   
  <script type="text/javascript">
    $(document).ready(function(){
    $("p").click(function(){
    $(this).hide();
   });
  });
  </script>
</head>

<body>
  <p>If you click on me, I will disappear.</p>
</body>

</html> 
```

# java - 特定于字符集的字符在 IDE 中工作，但不能在现场使用

> ID：12602092
> 
> 赞同：2
> 
> 时间：2012-09-26T12:48:40.603
> 
> 标签：java, character-encoding

所以这是我的问题。我正在使用`httpurlconnection`. 该 json 包含德语特殊字符 (äöü)。在 NetBeans 内部，一切都很好。当我构建 jar 并运行它时，“Silberanhänger”变为“SilberanhÃ¤nger”。这是代码，里面没什么特别的

```
URL url = new URL("jsonUrl);
HttpURLConnection con = (HttpURLConnection) url.openConnection();
con.setUseCaches(false);
con.setRequestProperty("Accept-Language","de-de,de;q=0.8,en-us;q=0.5,en;q=0.3"); 
con.setRequestProperty("Cookie","s="+session);
try (BufferedReader bf = new BufferedReader(new InputStreamReader(
                     con.getInputStream()))) {
            jsonRepresentation = bf.readLine(); //only 1 line
}
con.disconnect();
System.out.println(jsonRepresentation) // "ä" in IDE, "Ã¤" in Live 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:59:27.167

使用 -Dfile.encoding=UTF8 设置 jvm 编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:16:01.207

设置`-Dfile.encoding=UTF8`是一种 hack，会对在该 JVM 上运行的所有代码产生副作用。更好的技巧是在 InputStreamReader 的构造函数中指定字符集

```
new InputStreamReader(con.getInputStream(), "UTF-8") 
```

但是，如果另一端的 HTTP 服务器更改其编码，这可能仍然会失败。您最好使用诸如 Apache HTTPComponents 之类的 HTTP 库将 HTTP 响应解析为`String`. 它将从 HTTP 标头中读取编码并在所有情况下执行正确的操作。

# php - 当用户单击链接时，我想解压缩文件然后打开它

> ID：12602095
> 
> 赞同：1
> 
> 时间：2012-09-26T12:48:49.047
> 
> 标签：php, javascript, html

我将不胜感激有关此问题的帮助：

用户点击一个链接：链接本身有一个参数，告诉哪个文件需要解压缩到 /unzip 文件夹。文件解压缩后，我想打开该文件。

我怎样才能做到这一点？我已经对解压缩部分进行了编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:12:16.647

我可以建议以下解决方案：

1.  您在服务器上创建一个文件夹，将文件解压缩到该文件夹​​。
2.  您在那里创建一个 .htaccess 文件，将您自己的 php 脚本指定为 404 错误处理程序
3.  在您的 php 脚本中，您解析 URL 并确定要解压缩的文件，解压缩并将用户重定向到新创建的文件
4.  如果您需要清理 unizpped 文件，您可以创建一个 cronjob 来删除超过某个时间的文件

你从中得到的是：

*   从服务器到用户的文件传输由 Web 服务器处理
*   您实际上缓存了您的工作，因为如果您有文件，404 处理程序将不会运行
*   您可以显着降低服务器负载，因为这种方法减少了在服务器端执行的操作量（当文件存在时）

上面的描述假设 Apache 作为 Web 服务器

# ruby-on-rails - 如何渲染 XML 模板，然后在 Ruby on Rails 3.2.8 中使用 SEND_DATA？

> ID：12602096
> 
> 赞同：14
> 
> 时间：2012-09-26T12:48:54.063
> 
> 标签：ruby-on-rails, ruby, send

任何人都可以帮助我处理 XML 模板渲染和 send_data 吗？

我有一个控制器：

```
def show
  @calculation = Calculation.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @calculation }
    format.xml {send_data( :partial=>show.xml.erb, :filename => "my_file.xml" ) }
    format.pdf { render :format=>false}
  end
end 
```

但是我有很多“堆栈级别太深”的错误

如果我使用

```
{send_data( @calculation, :filename => "my_file.xml" ) } 
```

我得到 XML 文件，但不是来自我的模板......

***编辑：*** 我有办法！

```
format.xml do  
  stream = render_to_string(:template=>"calculations/show" )  
  send_data(stream, :type=>"text/xml",:filename => "test.xml")
end 
```

一切正常！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-09T06:04:50.980

从已编辑的问题正文中复制答案，以便从“未回答”过滤器中删除此问题：

```
format.xml do  
  stream = render_to_string(:template=>"calculations/show" )  
  send_data(stream, :type=>"text/xml",:filename => "test.xml")
end 
```

〜回答每个[德米特里](https://stackoverflow.com/users/1700247/dmitry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-19T14:26:37.343

你可以用 Rails 5 试试这个

```
respond_to do |format|
  format.html do
    stream = render_to_string(:template => "calculations/test.xml.builder")
    send_data stream,
              :type => 'text/xml; charset=UTF-8;',
              :disposition => "attachment; filename=test.xml"
  end
end 
```

# c++ - 进程分叉后 RAII 对象会发生什么？

> ID：12602098
> 
> 赞同：17
> 
> 时间：2012-09-26T12:48:58.290
> 
> 标签：c++, linux, unix, fork

在 Unix / Linux 下，我的活动 RAII 对象在分叉时会发生什么？会不会出现双删？复制构造和赋值是什么？如何确保没有坏事发生？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T12:53:56.990

[`fork(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)创建进程的*完整副本*，包括其所有内存。是的，自动对象的析构函数将运行两次——在父进程和子进程中，*在不同的虚拟内存空间*中。没有什么“坏事”发生（当然，除非你在析构函数中从账户中扣除了钱），你只需要知道这个事实。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T13:01:01.600

原则上，在 C++ 中使用这些函数是没有问题的，但您必须了解共享哪些数据以及如何共享。

考虑到`fork()`，新进程获得父内存的完整副本（使用写时复制）。内存是*状态*，因此您有两个独立的进程必须留下一个干净的状态。

现在，只要你留在给你的记忆范围内，你应该没有任何问题：

```
#include <iostream>
#include <unistd.h>

class Foo {
public:
    Foo ()  { std::cout << "Foo():" << this << std::endl; }
    ~Foo()  { std::cout << "~Foo():" << this << std::endl; }

    Foo (Foo const &) {
        std::cout << "Foo::Foo():" << this << std::endl;
    }

    Foo& operator= (Foo const &) {
        std::cout << "Foo::operator=():" << this<< std::endl;
        return *this;
    }
};

int main () {
    Foo foo;
    int pid = fork();
    if (pid > 0) {
        // We are parent.
        int childExitStatus;
        waitpid(pid, &childExitStatus, 0); // wait until child exits
    } else if (pid == 0) {
        // We are the new process.
    } else {
        // fork() failed.
    }
} 
```

上面的程序将大致打印：

```
Foo():0xbfb8b26f
~Foo():0xbfb8b26f
~Foo():0xbfb8b26f 
```

没有复制构造或复制分配发生，操作系统将按位复制。地址是相同的，因为它们不是物理地址，而是指向每个进程的虚拟内存空间的指针。

当两个实例*共享*信息时变得更加困难，例如在退出之前必须刷新和关闭打开的文件：

```
#include <iostream>
#include <fstream>

int main () {
    std::ofstream of ("meh");
    srand(clock());
    int pid = fork();
    if (pid > 0) {
        // We are parent.
        sleep(rand()%3);
        of << "parent" << std::endl;
        int childExitStatus;
        waitpid(pid, &childExitStatus, 0); // wait until child exits
    } else if (pid == 0) {
        // We are the new process.
        sleep(rand()%3);
        of << "child" << std::endl;
    } else {
        // fork() failed.
    }
} 
```

这可能会打印

```
parent 
```

或者

```
child
parent 
```

或者是其他东西。

问题是这两个实例不足以协调它们对同一文件的访问，并且您不知道`std::ofstream`.

（可能的）解决方案可以在术语“进程间通信”或“IPC”下找到，最接近的解决方案是`waitpid()`：

```
#include <unistd.h>
#include <sys/wait.h>

int main () {
    pid_t pid = fork();
    if (pid > 0) {
        int childExitStatus;
        waitpid(pid, &childExitStatus, 0); // wait until child exits
    } else if (pid == 0) {
        ...
    } else {
        // fork() failed.
    }
} 
```

最简单的解决方案是确保每个进程只使用自己的虚拟内存，而不使用其他任何东西。

另一种解决方案是特定于 Linux 的解决方案：*确保子进程不清理*。操作系统将对所有获取的内存进行原始的、非 RAII 清理，并关闭所有打开的文件而不刷新它们。`fork()`如果您使用with`exec()`运行另一个进程，这可能很有用：

```
#include <unistd.h>
#include <sys/wait.h>

int main () {
    pid_t pid = fork();
    if (pid > 0) {
        // We are parent.
        int childExitStatus;
        waitpid(pid, &childExitStatus, 0);
    } else if (pid == 0) {
        // We are the new process.
        execlp("echo", "echo", "hello, exec", (char*)0);
        // only here if exec failed
    } else {
        // fork() failed.
    }
} 
```

另一种在不触发任何析构函数的情况下退出的方法是`exit()`函数。我通常建议不要在 C++ 中使用，但在分叉时，它有它的位置。

* * *

## 参考：

*   [http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html](http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html)
*   手册页

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-27T18:20:19.400

当前接受的答案显示了一个**同步**问题，坦率地说，这与 RAII 真正导致的问题无关。也就是说，无论你是否使用RAII，你都会遇到父母和孩子之间的**同步问题。**哎呀，如果您在两个不同的控制台中运行相同的进程，您将遇到完全相同的**同步**问题！*（即不`fork()`参与您的程序，只是您的程序并行运行两次。）*

要解决**同步**问题，您可以使用信号量。见`sema_open(3)`和相关功能。请注意，线程会产生完全相同的同步问题。只有您可以使用互斥锁来同步多个线程，并且在大多数情况下，互斥锁比信号量快得多。

因此，当您使用 RAII 来保留我所说的外部资源时，您确实会遇到问题，尽管所有外部资源都不会受到相同的影响。我在两种情况下都遇到过这个问题，我会在这里展示这两种情况。

## 不要关闭（）套接字

假设您有自己的套接字类。在析构函数中，您执行关闭操作。毕竟，一旦完成，您也可以向套接字的另一端发送一条消息，说明您已完成连接：

```
class my_socket
{
public:
    my_socket(char * addr)
    {
        socket_ = socket(s)
        ...bind, connect...
    }

    ~my_socket()
    {
        if(_socket != -1)
        {
            shutdown(socket_, SHUT_RDWR);
            close(socket_);
        }
    }

private:
    int socket_ = -1;
}; 
```

当您使用此 RAII 类时，该`shutdown()`函数会影响父级和子级中的套接字。这意味着父母和孩子都不能再读取或写入该套接字了。在这里，我假设孩子根本不使用套接字（因此我绝对没有**同步**问题），但是当孩子死时，RAII 类被*唤醒*并调用析构函数。那时它会关闭变得不可用的套接字。

```
{
    my_socket soc("127.0.0.1:1234");

    // do something with soc in parent
    ...

    pid_t const pid(fork());
    if(pid == 0)
    {
        int status(0);
        waitpid(pid, &status, 0);
    }
    else if(pid > 0)
    {
        // the fork() "duplicated" all memory (with copy-on-write for most)
        // and duplicated all descriptors (see dup(2)) which is why
        // calling 'close(s)' is perfectly safe in the child process.

        // child does some work
        ...

        // here 'soc' calls my_socket::~my_socket()
        return;
    }
    else
    {
        // fork did not work
        ...
    }

    // here my_socket::~my_socket() was called in child and
    // the socket was shutdown -- therefore it cannot be used
    // anymore!

    // do more work in parent, but cannot use 'soc'
    // (which is probably not the wanted behavior!)
    ...
} 
```

## 避免在 parent 和 child 中使用 socket

仍然使用套接字的另一种可能性（尽管您可以使用管道或用于外部通信的其他一些机制具有相同的效果）是最终发送两次“BYE”命令。不过，这实际上非常接近于**同步**问题，但在这种情况下，当 RAII 对象被销毁时，*同步会发生在该对象中。*

例如，您创建一个套接字并在一个对象中管理它。每当对象被破坏时，您想通过发送“BYE”命令告诉对方：

```
class communicator
{
public:
    communicator()
    {
        socket_ = socket();
        ...bind, connect...
    }

    ~communicator()
    {
        write(socket_, "BYE\n", 4);
        // shutdown(socket_); -- now we know not to do that!
        close(socket_);
    }

private
    int socket_ = -1;
}; 
```

在这种情况下，另一端收到“BYE”命令并关闭连接。现在父级无法使用该套接字进行通信，因为它已被另一端关闭！

这与 phresnel 在他的 ofstream 示例中所说的非常相似。只是，修复同步并不容易。您向套接字写入“BYE\n”或其他命令的顺序不会改变最终套接字从另一端关闭的事实（即可以使用进程间锁实现**同步**，而，该`"BYE"`命令与命令类似`shutdown()`，它停止了通信！）

# 一个解法

因为`shutdown()`它很容易，我们只是不调用该函数。话虽这么说，也许您仍然希望`shutdown()`在父母身上发生这种情况，而不是在孩子身上发生。

有几种方法可以解决这个问题，其中一种是记住 pid 并使用它来知道是否应该调用这些*破坏性函数调用。*有一个可能的解决方法：

```
class communicator
{
    communicator()
        : pid_(getpid())
    {
        socket_ = socket();
        ...bind, connect...
    }

    ~communicator()
    {
        if(socket_ != -1)
        {
            if(pid_ == getpid())
            {
                write(socket_, "BYE\n", 4);
                shutdown(socket_, SHUT_RDWR);
            }
            close(socket_);
        }
    }

 private:
     pid_t pid_;
     int   socket_;
 }; 
```

只有当我们在父节点中时，我们才`write()`会这样做。`shutdown()`

请注意，孩子可以（并且应该）`close()`在套接字描述符上执行操作，因为在所有描述符上`fork()`调用`dup()`，所以孩子对它保存的每个文件都有*不同*的文件描述符。

# 另一个保安

现在可能有更复杂的情况，即在父对象中创建 RAII 对象，而子对象无论如何都会调用该 RAII 对象的析构函数。正如 roemcke 所提到的，调用`_exit()`可能是最安全的事情（`exit()`在大多数情况下有效，但它可能会对父级产生不必要的副作用，同时`exit()`可能需要子级干净地结束 - 即删除`tmpfile()`它创建！）。换句话说，不是使用`return`，而是调用`_exit()`。

```
pid_t r(fork());
if(r == 0)
{
    try
    {
        ...child do work here...
    }
    catch(...)
    {
        // you probably want to log a message here...
    }
    _exit(0); // prevent stack unfolding and calls to atexit() functions
    /* NOT REACHED */
} 
```

无论如何，这更安全，因为您可能不希望孩子返回可能发生许多其他事情的“父母代码”。不只是堆栈展开。（即继续一个`for()`孩子不应该继续的循环......）

该`_exit()`函数不返回，因此堆栈上定义的对象的析构函数不会被调用。try/catch在这里**非常重要**，因为`_exit()`如果孩子引发异常，则不会调用它，尽管它应该调用`terminate()`也不会破坏所有堆分配对象的`terminate()`函数，它会在展开堆栈后调用该函数因此可能调用了你所有的 RAII 析构函数......这又不是你所期望的。

`exit()`和之间的区别在于`_exit()`前者调用你的`atexit()`函数。您相对很少需要在孩子或父母身上这样做。至少，我从来没有任何奇怪的副作用。但是，一些库确实使用了 ，`atexit()`而不考虑`fork()`调用 a 的可能性。在函数中保护自己的一种`atexit()`方法是记录需要该`atexit()`函数的进程的 PID。如果函数被调用时 PID 不匹配，那么您只需返回并且不执行任何其他操作。

```
pid_t cleanup_pid = -1;
void cleanup()
{
    if(cleanup_pid != getpid())
    {
        return;
    }

    ... do your clean up here ...
}

void some_function_requiring_cleanup()
{
    if(cleanup_pid != getpid())
    {
        cleanup_pid = getpid();
        atexit(cleanup);
    }
    ... do work requiring cleanup ...
} 
```

显然，使用`atexit()`并正确使用的库的数量可能非常接近于 0。所以......你应该避免使用这样的库。

请记住，如果您调用`execve()`or `_exit()`，则不会进行清理。因此，如果`tmpfile()`子 + 调用`_exit()`，该临时文件将不会被自动删除...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T15:17:22.620

除非您知道自己在做什么，否则子进程应始终在完成其工作后调用 _exit()：

```
pid_t pid = fork()
if (pid == 0)
{
   do_some_stuff(); // Make sure this doesn't throw anything
   _exit(0);
} 
```

下划线很重要。不要在子进程中调用 exit() ，它会将流缓冲区刷新到磁盘（或文件描述符指向的任何地方），您最终会得到两次写入的内容。

# actionscript-3 - 游戏结束功能不起作用 Starling

> ID：12602103
> 
> 赞同：1
> 
> 时间：2012-09-26T12:49:19.013
> 
> 标签：actionscript-3, flash, actionscript, starling-framework

我一直在关注网络上的教程，但不知何故并没有显示有关创建游戏结束功能的内容。我是 Starling 框架和 Actionscript 的新手，所以我仍然在尝试找到一种方法来使其工作。这是完整的代码片段。

```
package screens

{

import flash.geom.Rectangle;
import flash.utils.getTimer;
import events.NavigationEvent;

import objects.GameBackground;
import objects.Hero;
import objects.Item;
import objects.Obstacle;

import starling.display.Button;
import starling.display.Image;
import starling.display.Sprite;
import starling.events.Event;
import starling.events.Touch;
import starling.events.TouchEvent;
import starling.text.TextField;
import starling.utils.deg2rad;

public class InGame extends Sprite
{
    private var screenInGame:InGame;
    private var screenWelcome:Welcome;
    private var startButton:Button;
    private var playAgain:Button;
    private var bg:GameBackground;
    private var hero:Hero;

    private var timePrevious:Number;
    private var timeCurrent:Number;
    private var elapsed:Number;

    private var gameState:String;

    private var playerSpeed:Number = 0;
    private var hitObstacle:Number = 0;
    private const MIN_SPEED:Number = 650;

    private var scoreDistance:int;
    private var obstacleGapCount:int;

    private var gameArea:Rectangle;

    private var touch:Touch;
    private var touchX:Number;
    private var touchY:Number;

    private var obstaclesToAnimate:Vector.<Obstacle>;
    private var itemsToAnimate:Vector.<Item>;

    private var scoreText:TextField;
    private var remainingLives:TextField;
    private var gameOverText:TextField;
    private var iconSmall:Image;

    static private var lives:Number = 2;

    public function InGame()
    {
        super();
        this.addEventListener(starling.events.Event.ADDED_TO_STAGE, onAddedToStage);
    }

    private function onAddedToStage(event:Event):void {
        this.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage); 
        drawGame();

        scoreText = new TextField(300, 100, "Score: 0", "MyFontName", 35, 0xD9D919, true);
        remainingLives = new TextField(600, 100, "Lives: " + lives +" X ", "MyFontName", 35, 0xD9D919, true);
        iconSmall = new Image(Assets.getAtlas().getTexture("darnahead1"));
        iconSmall.x = 360;
        iconSmall.y = 40;
        this.addChild(iconSmall);

        this.addChild(scoreText);
        this.addChild(remainingLives);

    }

    private function drawGame():void {
        bg = new GameBackground();

        this.addChild(bg);
        hero = new Hero();
        hero.x = stage.stageHeight / 2;
        hero.y = stage.stageWidth / 2;
        this.addChild(hero);

        startButton = new Button(Assets.getAtlas().getTexture("startButton"));
        startButton.x = stage.stageWidth * 0.5 - startButton.width * 0.5;
        startButton.y = stage.stageHeight * 0.5 - startButton.height * 0.5; 

        this.addChild(startButton);

        gameArea = new Rectangle(0, 100, stage.stageWidth, stage.stageHeight - 250);        
    }

    public function disposeTemporarily():void {
        this.visible = false;
    }

    public function initialize():void {
        this.visible = true;

        this.addEventListener(Event.ENTER_FRAME, checkElapsed);

        hero.x = -stage.stageWidth;
        hero.y = stage.stageHeight * 0.5;

        gameState ="idle";

        playerSpeed = 0;
        hitObstacle = 0;
        bg.speed = 0;
        scoreDistance = 0;
        obstacleGapCount = 0;

        obstaclesToAnimate = new Vector.<Obstacle>();
        itemsToAnimate = new Vector.<Item>();

        startButton.addEventListener(Event.TRIGGERED, onStartButtonClick);
        //var mainStage:InGame =InGame.current.nativeStage;
        //mainStage.dispatchEvent(new Event(Event.COMPLETE));
        //playAgain.addEventListener(Event.TRIGGERED, onRetry);
    }

    private function onStartButtonClick(event:Event):void {
        startButton.visible = false;

        startButton.removeEventListener(Event.TRIGGERED, onStartButtonClick);
        launchHero();
    }

    private function launchHero():void {
        this.addEventListener(TouchEvent.TOUCH, onTouch);
        this.addEventListener(Event.ENTER_FRAME, onGameTick);
    }

    private function onTouch(event:TouchEvent):void {
        touch = event.getTouch(stage);

        touchX = touch.globalX;
        touchY = touch.globalY;
    }

    private function onGameTick(event:Event):void {
        switch(gameState) {
            case "idle":
                if(hero.x < stage.stageWidth * 0.5 * 0.5) {
                    hero.x += ((stage.stageWidth * 0.5 * 0.5 + 10) - hero.x) * 0.05;
                    hero.y = stage.stageHeight * 0.5;

                    playerSpeed += (MIN_SPEED - playerSpeed) * 0.05;
                    bg.speed = playerSpeed * elapsed;
                } else {
                    gameState = "flying";

                }
                break;
            case "flying":
                if(hitObstacle <= 0) {
                    hero.y -= (hero.y - touchY) * 0.1;

                    if(-(hero.y - touchY) < 150 && -(hero.y - touchY) > -150) {
                        hero.rotation = deg2rad(-(hero.y - touchY) * 0.2);
                    }

                    if(hero.y > gameArea.bottom - hero.height * 0.5) {
                        hero.y = gameArea.bottom - hero.height * 0.5;
                        hero.rotation = deg2rad(0);
                    }

                    if(hero.y < gameArea.top + hero.height * 0.5) {
                        hero.y = gameArea.top + hero.height * 0.5;
                        hero.rotation = deg2rad(0);
                    }
                } else {    
                    hitObstacle--
                        cameraShake();
                }

                playerSpeed -= (playerSpeed - MIN_SPEED) * 0.01;
                bg.speed = playerSpeed * elapsed;

                scoreDistance += (playerSpeed * elapsed) * 0.1;
                scoreText.text = "Score: " + scoreDistance;

                initObstacle();
                animateObstacles();

                createEggItems();
                animateItems();

                remainingLives.text = "Lives: "+lives + " X ";

                if(lives == 0) {
                    gameState = "over";
                }

                break;
            case "over":
                gameOver();
                break;

        }
    }

    private function gameOver():void {

        gameOverText = new TextField(800, 400, "Hero WAS KILLED!!!", "MyFontName", 50, 0xD9D919, true);
        scoreText = new TextField(800, 600, "Score: "+scoreDistance, "MyFontName", 30, 0xFFFFFF, true);
        this.addChild(scoreText);

        this.addChild(gameOverText);

        playAgain = new Button(Assets.getAtlas().getTexture("button_tryAgain"));
        playAgain.x = stage.stageWidth * 0.5 - startButton.width * 0.5;
        playAgain.y = stage.stageHeight * 0.75 - startButton.height * 0.75; 

        this.addChild(playAgain);
        playAgain.addEventListener(Event.TRIGGERED, onRetry);

    }

    private function onRetry(event:Event):void {

        playAgain.visible = false;
        gameOverText.visible = false;
        scoreText.visible = false;

        var btnClicked:Button = event.target as Button;

        if((btnClicked as Button) == playAgain) {

            this.dispatchEvent(new NavigationEvent(NavigationEvent.CHANGE_SCREEN, {id: "playnow"}, true));
        } 

        disposeTemporarily();
    }

    private function animateItems():void {
        var itemToTrack:Item;

        for(var i:uint = 0; i < itemsToAnimate.length; i++) {
            itemToTrack = itemsToAnimate[i];

            itemToTrack.x -= playerSpeed * elapsed;

            if(itemToTrack.bounds.intersects(hero.bounds)) {
                itemsToAnimate.splice(i, 1);
                this.removeChild(itemToTrack);
            }

            if(itemToTrack.x < -50) {
                itemsToAnimate.splice(i, 1);
                this.removeChild(itemToTrack);
            }
        }
    }

    private function createEggItems():void {
        if(Math.random() > 0.95){
            var itemToTrack:Item = new Item(Math.ceil(Math.random() * 10));
            itemToTrack.x = stage.stageWidth + 50;
            itemToTrack.y = int(Math.random() * (gameArea.bottom - gameArea.top)) + gameArea.top;
            this.addChild(itemToTrack);

            itemsToAnimate.push(itemToTrack);
        }
    }

    private function cameraShake():void {

        if(hitObstacle > 0) {
            this.x = Math.random() * hitObstacle;
            this.y = Math.random() * hitObstacle;
        } else if(x != 0) {
            this.x = 0;
            this.y = 0;
            lives--;
        }
    }

    private function initObstacle():void {
        if(obstacleGapCount < 1200) {
            obstacleGapCount += playerSpeed * elapsed;
        } else if(obstacleGapCount !=0) {
            obstacleGapCount = 0;
            createObstacle(Math.ceil(Math.random() * 5), Math.random() * 1000 + 1000);
        }
    }

    private function animateObstacles():void {
        var obstacleToTrack:Obstacle;

        for(var i:uint = 0; i<obstaclesToAnimate.length; i++) {
            obstacleToTrack = obstaclesToAnimate[i];

            if(obstacleToTrack.alreadyHit == false && obstacleToTrack.bounds.intersects(hero.bounds)) {
                obstacleToTrack.alreadyHit = true;
                obstacleToTrack.rotation = deg2rad(70);

                hitObstacle = 30;
                playerSpeed *= 0.5;
            }

            if(obstacleToTrack.distance > 0) {
                obstacleToTrack.distance -= playerSpeed * elapsed;
            } else {
                if(obstacleToTrack.watchOut) {
                    obstacleToTrack.watchOut = false;
                } 

                obstacleToTrack.x -= (playerSpeed + obstacleToTrack.speed) * elapsed;
            }

            if(obstacleToTrack.x < -obstacleToTrack.width || gameState == "over") {
                obstaclesToAnimate.splice(i, 1);
                this.removeChild(obstacleToTrack);
            }
        }
    }

    private function checkElapsed(event:Event):void {
        timePrevious = timeCurrent;
        timeCurrent = getTimer();

        elapsed = (timeCurrent - timePrevious) * 0.001;
    }

    private function createObstacle(type:Number, distance:Number):void{
        var obstacle:Obstacle = new Obstacle(type, distance, true, 300);
        obstacle.x = stage.stageWidth;

        this.addChild(obstacle);

        if(type >= 4) {
            if(Math.random() > 0.5) {
                obstacle.y = gameArea.top;
                obstacle.position = "top"
            } else {
                obstacle.y = gameArea.bottom - obstacle.height;
                obstacle.position = "bottom";
            }
        } else {
            obstacle.y = int(Math.random() * (gameArea.bottom - obstacle.height - gameArea.top)) + gameArea.top;
            obstacle.position = "middle";
        }

        obstaclesToAnimate.push(obstacle);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T00:31:55.790

您没有在任何地方调用 initialize()，这似乎是 gameState 最初设置为“空闲”的地方......当您运行这段代码时，它当前做了什么？

这里的目标是让 onGameTick(event) 函数在每一帧都运行，这将在空闲/飞行/结束游戏状态之间切换。

# python - python-mode 插件破坏 gVim

> ID：12602112
> 
> 赞同：0
> 
> 时间：2012-09-26T12:49:37.533
> 
> 标签：python, windows, vim

我的 Windows XP 机器上有一个完美运行的自定义 gVim 副本。但是由于未知原因，该程序现在没有运行，每当我吃午饭时，它都会立即关闭该进程。

在尝试禁用每个插件后，我意识到 klen-python-mode （通过病原体作为捆绑运行）是问题的根源。

编辑： ipy.vim 插件过去也可以工作，但它也阻止了 Vim 运行。任何提示如何解决这个问题？或者问题的原因是什么？

# ios - 如何将两个 UIImageViews “组合”成一张图像？喜欢 Photoshop 图层合并？

> ID：12602118
> 
> 赞同：2
> 
> 时间：2012-09-26T12:49:48.993
> 
> 标签：ios, uiimageview, drawing

我有一个绘图应用程序，其中有一个 UIImageView 作为“绘图层”。您在其下方有另一个 UIImageView，即“图像层”，其中包含您正在绘制的图像。我喜欢这种分离。但是，我希望用户能够“保存并通过电子邮件发送”他们在图像顶部制作的绘图作为一个统一的图像。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:44:42.350

您的`UIImageView`实例必须是层次结构的一部分，`UIView`因此您需要做的就是将包含顶部的内容绘制`UIView`到上下文中

```
UIGraphicsBeginImageContext(CGSizeMake(width, height));

[container.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *fimage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

或者如果这给您带来麻烦，请连续将两个图像绘制到上下文中

```
UIGraphicsBeginImageContext(CGSizeMake(width, height));

[image1.layer renderInContext:UIGraphicsGetCurrentContext()];
[image2.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *fimage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

从那里你可以在你选择的地方写入数据

```
NSData *data = UIImagePNGRepresentation(fimage); 
```

将该数据传递到 MailComposer 设置中。

# spring - Spring MVC中的应用程序变量

> ID：12602122
> 
> 赞同：0
> 
> 时间：2012-09-26T12:49:58.327
> 
> 标签：spring, spring-mvc

我想在spring MVC中设置一个应用程序变量我可以这样做吗

```
 @Scope("globalSession")
  public class ApplicationVariable{

    public static appVar;

  } 
```

这个变量在整个应用程序中都可用吗？或者有没有其他更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:42:12.943

默认情况下，spring bean 是单例的，因此它将始终在全局范围内可用。在上面的示例中，您应该将 ApplicationVariable bean 保留为单例范围，将变量保留为实例而不是静态，并在需要变量时注入 bean。

# javascript - 单击其他项目（jQuery）时如何保持选择？

> ID：12602125
> 
> 赞同：1
> 
> 时间：2012-09-26T12:50:13.910
> 
> 标签：javascript, jquery, css

我在页面上选择了一些文本。当我使用它时，当我单击时它不会被取消选择`.container`：

```
jQuery('.container').on("mousedown", function(){
    jQuery('.block').addClass('myclass');
}); 
```

但是当我使用它时，文本将被取消选择：

```
jQuery('.container').on("click", function(){
    jQuery('.block').addClass('myclass');
}); 
```

第一个的问题是它会`.myclass`在我释放鼠标按钮后立即删除。有没有办法在我单击时以某种方式保存我的选择`.container`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:58:20.780

尝试这样做：

```
jQuery('.container').on("click", function(ev){
    jQuery('.block').addClass('myclass');
    ev.preventDefault();
    return false;
}); 
```

# apache-karaf - 如何使用服务组合蓝图功能跨网络传输文件

> ID：12602128
> 
> 赞同：0
> 
> 时间：2012-09-26T12:50:19.347
> 
> 标签：apache-karaf, apache-servicemix

我正在使用**apache-servicemix-4.3.1-fuse-01-15**并且正在进行热部署。

我在 service-mix 的 deploy 文件夹中放置了一个蓝图 xml，如下所示

```
<blueprint
xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">
 <camelContext xmlns="http://camel.apache.org/schema/blueprint">
    <route>
        <from uri="file://D:/apache-servicemix-4.3.1-fuse-01-15/apache-servicemix-4.3.1-fuse-01-15/source/?recursive=true" /><!--sample path of source folder-->
        <to uri="file:////192.168.68.215/Fuse"/><!--sample path of destination folder-->
    </route>
</camelContext>
</blueprint> 
```

如您所见，我想将文件从本地 pc 传输到另一台计算机。但是在日志中它给出了以下错误，尽管我可以访问 to 中提到的**路径**。

```
Caused by: java.io.FileNotFoundException: \\192.168.68.215\Fuse\core_logs-12012012\core-logs_20110908 - Copy - Copy (4)\core-logs_20110908.log (The system cannot find the path specified) 
```

如果我用我的本地目录路径替换 IP，它工作正常。

我很想知道这里出了什么问题。

我应该使用 ftp、sftps 还是 ftp。是不是我正在做的事情永远行不通。我需要提到用户名和密码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:18:22.350

如果要在计算机之间传输文件，则需要使用支持该协议的协议，例如：

1.  文件
2.  ftp
3.  scp

当您使用 Windows 时，您可以通过设置从您的计算机到远程计算机的网络共享连接来使用文件系统。例如，将远程计算机安装为本地驱动器（例如 H: 或任何空闲字母）。例如，基本上，如果您可以让它工作，那么您可以使用 Windows 文件资源管理器查看远程计算机。提示：Camel 中的文件组件使用 Java 的 java.io.File API。因此，无论您如何使用它，都将得到支持。

FTP 将要求另一台计算机具有 FTP 服务器。

Windows 通常不支持 SCP，您需要安装软件来支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:54:04.457

我不确定使用 java 文件 api 的骆驼文件组件是否可以开箱即用。但是，如果您一心想使用骆驼路线来执行此操作，则可以在接受文件/文件路径的部分中编写一个自定义 bean，并通过 sftp 或 scp 将其复制到远程机器，如 claus 所述

[如果它是一台 linux 机器，您可以通过jsch](http://www.jcraft.com/jsch/examples/)轻松执行 sftp/scp ，查看示例

如果它是一个窗口机器，你可以设置一个 ftp 服务器并使用 apache commons [VFS](http://commons.apache.org/vfs/filesystems.html)

# android - Android阴影底部边框

> ID：12602130
> 
> 赞同：-2
> 
> 时间：2012-09-26T12:50:27.353
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/0c444cd17d5454d51e3df9e7dd14c31a.png)

我想知道我可以为我的底部边框绘制这种类型的线（阴影线）有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:55:14.827

创建一个`9 patch`相同的图像，将可扩展区域标记为此边框上方的所有内容，并将其设置`9 patch`为您希望拥有此边框的视图的背景。

您还可以创建一个`LinearLayout`具有所需高度（2-3 dp？）并将其用作背景图像。将此布局放在您想要此边框的视图下方。

# excel - 如何遍历多行并根据标记的行调用 vba

> ID：12602132
> 
> 赞同：1
> 
> 时间：2012-09-26T12:50:32.020
> 
> 标签：excel, vba

我有一个表格，可以检索用户可用报告的列表。然后，用户在他们希望生成的报告旁边的特定列中输入“X”。

如何遍历每个可用行并确定用户是否输入了“X”？

```
A          |         B          |       C          |  D
001        | REPORT A           |      fnReportA   |  X
002        | REPORT B           |      fnReportB   |  <NULL>
003        | REPORT C           |      fnReportC   |  <NULL> 
```

或者

如何在检索列表时遍历每一行并在链接到 vba 的每一行的末尾放置一个 BUTTON 以生成报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:47:10.987

`For Each`将执行您要执行的搜索类型

一个简单的例子：

```
Option Explicit

Sub testit()
Dim c As Range
For Each c In Range("D2:D10").Cells
    If c.Value = "X" Then
        Debug.Print c.Row
    End If
Next
End Sub 
```

这将打印具有 X 的每个单元格的行号。

# permissions - Apache Shiro，isPermitted() 不工作

> ID：12602133
> 
> 赞同：2
> 
> 时间：2012-09-26T12:50:36.607
> 
> 标签：permissions, shiro

我正在使用 Apache Shiro 进行一些测试，只是为了学习，但我遇到了权限问题。isPermitted() 方法不起作用，我的意思是，它总是返回 false。

shiro.ini

```
[main]

sha256Matcher = org.apache.shiro.authc.credential.HashedCredentialsMatcher
sha256Matcher.hashAlgorithmName=SHA-256

authc.loginUrl = /faces/views/login.xhtml
authc.successUrl = /faces/views/index.xhtml

builtInCacheManager = org.apache.shiro.cache.MemoryConstrainedCacheManager
securityManager.cacheManager = $builtInCacheManager

jdbcRealm=org.apache.shiro.realm.jdbc.JdbcRealm
jdbcRealm.permissionsLookupEnabled = true 
jdbcRealm.authenticationQuery = select senha from VUsuarioPerfil where usuario = ?
jdbcRealm.userRolesQuery = select perfil from VUsuarioPerfil where usuario = ?
jdbcRealm.permissionsQuery = select permissoes from VUsuarioPerfil where usuario = ?

jdbcRealm.credentialsMatcher = $sha256Matcher

ds = com.microsoft.sqlserver.jdbc.SQLServerConnectionPoolDataSource
ds.serverName = 192.168.50.254
ds.user = xx
ds.password = xxx
ds.databaseName = shiro
jdbcRealm.dataSource = $ds 
```

每个用户都应该拥有自己的权限，因此在视图（VUsuarioPerfil）上有一个名为 permissoes 的列，我在其中放置了一个字符串，例如“clientes:visualizar”。在代码上我以这种方式测试

```
public void test() {
    System.out.println(SecurityUtils.getSubject().hasRole("usuario"));
    System.out.println(SecurityUtils.getSubject().isPermitted("clientes:visualizar"));
} 
```

结果是输出：

```
true
false 
```

我现在不明白为什么只是权限没有被数据库捕获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:58:48.843

在 JDBC 领域中，权限查询不应该映射用户->角色，它应该映射角色->权限。

所以本质上，被调用的查询是：

```
select permissoes from VUsuarioPerfil where usuario = usuario 
```

而且，正如您所料，它什么也不返回。因此角色没有权限，用户也没有权限。

也许考虑默认权限查询会帮助您考虑如何将查询映射到您的数据结构？

```
select permission from roles_permissions where role_name = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:53:57.197

检查您的财产：

```
select permissoes from VUsuarioPerfil 
```

您需要更正**权限**

# c - 选择时的套接字阻塞和超时

> ID：12602134
> 
> 赞同：3
> 
> 时间：2012-09-26T12:50:36.997
> 
> 标签：c, sockets, select

我目前正在创建一个回显服务器，该服务器在 maxWaitTime 空闲后断开客户端连接。

我希望程序会阻塞套接字，直到客户端发送数据，但是当我在 gdb 中运行程序时，它会通过选择并阻塞 Readline。

我知道 retval = 0 每当它通过 select 并且 fd_set sock 变为 [256, (31 zeroes)] 并且在 select 之后，sock 变为 [32 zeroes]。

连接的接受发生在另一个函数中，连接描述符被传递给 echo 函数。

如果您能够帮助我指出正确的方向或让我知道如何在一定时间后断开客户的连接，请告诉我。

如果您需要任何进一步的信息，请告诉我。

提前致谢！

```
 FD_ZERO(&sock);
    FD_SET(sockfd,&sock);

    int opt = 3;

    setsockopt(sockfd, SOL_SOCKET, SO_RCVLOWAT,&opt,sizeof(opt));

    timeout.tv_sec = maxWaitTime;
    timeout.tv_usec = 0;

    for ( ; ; ) {
            FD_SET(sockfd,&sock);

            printf("Set is %d\n",FD_ISSET(sockfd,&sock));

            int retval;
            retval = select(1, &sock, NULL, NULL, &timeout);

            if(retval)
            {
                    quitProgram(number);
            }
            else
            {
            printf("n is %d\n",retval);

            if ( (n = Readline(sockfd, line, MAXLINE)) == 0)
            {
                    return;         /* connection closed by other end */
            }

            Writen(sockfd, line, n);

    } 
```

`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T22:03:58.107

正如其他人所评论的那样，您的代码中有一些逻辑漏洞。由您自己承认：

> 我知道 retval = 0 每当它通过 select 并且 fd_set sock 变为 [256, (31 zeroes)] 并且在 select 之后，sock 变为 [32 zeroes]。

这应该向您表明出了点问题。`fd_set`退出后套接字不在`select()`，这意味着套接字尚不可读。 `retval=0`表示`select()`超时。

您不仅必须重置`fd_set`每次`select()`调用，而且还必须重置`timeval`。试试这个：

```
int opt = 3; 
setsockopt(sockfd, SOL_SOCKET, SO_RCVLOWAT,&opt,sizeof(opt)); 

for ( ; ; )
{ 
    timeout.tv_sec = maxWaitTime; 
    timeout.tv_usec = 0; 

    FD_ZERO(&sock); 
    FD_SET(sockfd,&sock); 

    int retval = select(sockfd+1, &sock, NULL, NULL, &timeout); 
    if (retval <= 0) 
    { 
        quitProgram(number); /* error or connection timed out */
    } 
    else 
    { 
        if ( (n = Readline(sockfd, line, MAXLINE)) <= 0) 
        { 
            return; /* error or connection closed by other end */ 
        } 

        Writen(sockfd, line, n); 
    } 
} 
```

# jquery - jquery mobile 1.1.1 中不显示对话框

> ID：12602136
> 
> 赞同：1
> 
> 时间：2012-09-26T12:50:53.337
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile 1.1.1 和 jquery core 1.7.1。问题是当我尝试打开一个对话框时它不起作用。相同的代码适用于 jquery mobile 1.0.1。我曾尝试使用 jquery core 1.8.0 但这并没有奏效。任何人都可以帮忙吗？. 这是 jsfiddle 链接：http: [//jsfiddle.net/zteV3/18/](http://jsfiddle.net/zteV3/18/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:02:40.840

尝试以下操作：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

<div id="home" data-role="page">
    <div data-role="content">
        <a href="#payments" data-rel="dialog" data-role="button" data-transition="pop">Open dialog</a>
    </div>
</div>

<div id="payments" data-role="page" data-url="payments">
    <div data-role="content">
        <p>Some Content Here</p>
        <a href="#home" data-role="button">Close</a>
    </div>
</div> 
```

您的 CSS 引用（在`<link>`标签中）未正确定义。

我在 jsfiddle 上对其进行了测试，现在可以正常工作了；）

# paypal - Paypal 快速结帐中的自定义横幅图像

> ID：12602138
> 
> 赞同：1
> 
> 时间：2012-09-26T12:50:54.523
> 
> 标签：paypal

我需要实现 Paypal 快速结帐，客户需要 Paypal 结帐有自己的主题（至少是标题）。Paypal 通过提供上传横幅图像和徽标的选项来促进这一点。这对我来说很好，但我在这里有不同的情况。

Paypal 结帐有 3 个（抽象）步骤，首先是 Paypal 要求登录，其次是要求您查看送货地址并最终进入付款确认页面。我需要 Paypal 结账来为三个不同的步骤提供三个不同的横幅图像。我想这样做的原因是因为我想给用户一种导航的感觉，每个横幅图像都会为每个步骤选择一个选项卡。这听起来可能令人困惑，看看随附的屏幕截图，您就会明白。这是在 Etsy.com 上结账时拍摄的

![[Paypal 结帐截图](http://www.freeimagehosting.net/q5j2e)](../Images/e541eda531c8780372886fcef48d5e67.png)

这可能吗？如果没有，Etsy.com 的人是怎么做到的？有没有其他方法可以像 Paypal Checkout 中的标题一样实现选项卡/导航？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:07:43.757

Etsy 也使用固定的标头，特别是[https://www.etsy.com/images/paypal/paypal-checkout-steps.png](https://www.etsy.com/images/paypal/paypal-checkout-steps.png)
但是，当您返回 Etsy 的网站进行订单审查和订购时，使用相同的标头完成。

直接回答您的问题；在 PayPal 本身中，您不能为流程中的每个步骤设置三个不同的“标题”。

# javafx-2 - 处理单元格中的空值

> ID：12602139
> 
> 赞同：0
> 
> 时间：2012-09-26T12:50:57.467
> 
> 标签：javafx-2

我在让 JavaFX 2 TableView 处理我的数据中的空值时遇到了严重的问题。这么多麻烦实际上我已经整理了一个简单的问题演示，如下所示。

本质上问题是我的一些数据可能为空，并且将空值强制为一个值，例如一个空字符串，是无效的，它必须是空的。在我正在处理的实际代码中，我有一个空日期值，为了保持示例简单，我在下面显示了一个空字符串。

表的第 1 行和第 2 行具有空值。两列不同，第一列显示 TextFieldTableCell 的行为，第二列显示可编辑单元格的实现。两者都表现出相同的错误行为。

当前的行为是这样的：

1.  单击单元格进入编辑模式
2.  在单元格中输入一个值
3.  按 Enter 提交编辑
4.  什么都没发生

在第 4 步，我希望该列的 onEditCommit 处理程序被调用，但事实并非如此。查看 javax.scene.control.TableCell 的源代码，由于 commitEdit 的第一行，提交没有发生：

```
if (! isEditing()) return; 
```

似乎因为单元格为空，所以编辑属性永远不会设置为 true，尽管我承认我还没有跟踪所有代码以查看为什么它永远不会切换为 true。

一如既往地感谢您的帮助。

* * *

例子

主要应用

```
package example;

import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.control.cell.TextFieldTableCell;
import javafx.stage.Stage;
import javafx.util.Callback;

public class NullCellEditingExample extends Application {

    private TableView table = new TableView();
    private final ObservableList<Person> data =
            FXCollections.observableArrayList( new Person(null, "Smith"), new Person("Isabella", null), 
            new Person("Ethan", "Williams"), new Person("Emma", "Jones"), new Person("Michael", "Brown"));

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) {
        Scene scene = new Scene(new Group());

        TableColumn firstNameCol = createSimpleFirstNameColumn();
        TableColumn lastNameCol = createLastNameColumn();
        table.setItems(data);
        table.getColumns().addAll(firstNameCol, lastNameCol);
        table.setEditable(true);

        ((Group) scene.getRoot()).getChildren().addAll(table);
        stage.setScene(scene);
        stage.show();
    }

    private TableColumn createSimpleFirstNameColumn() {
        TableColumn firstNameCol = new TableColumn("First Name");
        firstNameCol.setMinWidth(100);
        firstNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("firstName"));
        firstNameCol.setCellFactory(TextFieldTableCell.forTableColumn());
        firstNameCol.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<Person, String>>() {
            @Override
            public void handle(TableColumn.CellEditEvent<Person, String> t) {
                ((Person) t.getTableView().getItems().get(t.getTablePosition().getRow())).setFirstName(t.getNewValue());
            }
        });

        return firstNameCol;
    }

    private TableColumn createLastNameColumn() {
        Callback<TableColumn, TableCell> editableFactory = new Callback<TableColumn, TableCell>() {
            @Override
            public TableCell call(TableColumn p) {
                return new EditingCell();
            }
        };

        TableColumn lastNameCol = new TableColumn("Last Name");
        lastNameCol.setMinWidth(100);
        lastNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("lastName"));
        lastNameCol.setCellFactory(editableFactory);
        lastNameCol.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<Person, String>>() {
            @Override
            public void handle(TableColumn.CellEditEvent<Person, String> t) {
                t.getRowValue().setLastName(t.getNewValue());
            }
        });

        return lastNameCol;
    }   
} 
```

编辑单元格

```
package example;

import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.EventHandler;
import javafx.scene.control.TableCell;
import javafx.scene.control.TextField;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;

public class EditingCell extends TableCell<Person, String> {

    private TextField textField;

    public EditingCell() {
    }

    @Override
    public void startEdit() {
        super.startEdit();
        if( textField == null ) {
            createTextField();
        }
        setText(null);
        setGraphic(textField);
        textField.selectAll();
    }

    @Override
    public void cancelEdit() {
        super.cancelEdit();
        setText((String) getItem());
        setGraphic(null);
    }

    @Override
    public void updateItem(String item, boolean empty) {
        super.updateItem(item, empty);
        if (empty) {
            setText(null);
            setGraphic(null);
        } else {
            if (isEditing()) {
                if (textField != null) {
                    textField.setText(getString());
                }
                setText(null);
                setGraphic(textField);
            } else {
                setText(getString());
                setGraphic(null);
            }
        }
    }

    private void createTextField() {
        textField = new TextField(getString());
        textField.setMinWidth(this.getWidth() - this.getGraphicTextGap() * 2);
        textField.focusedProperty().addListener(new ChangeListener<Boolean>() {
            @Override
            public void changed(ObservableValue<? extends Boolean> arg0, Boolean arg1, Boolean arg2) {
                if (!arg2) { commitEdit(textField.getText()); }
            }
        });

        textField.setOnKeyReleased(new EventHandler<KeyEvent>() {
            @Override
            public void handle(KeyEvent t) {
                if (t.getCode() == KeyCode.ENTER) {
                    String value = textField.getText();
                    if (value != null) { commitEdit(value); } else { commitEdit(null); }
                } else if (t.getCode() == KeyCode.ESCAPE) {
                    cancelEdit();
                }
            }
        });
    }

    private String getString() {
        return getItem() == null ? "" : getItem().toString();
    }
} 
```

人

```
package example;

import javafx.beans.property.SimpleStringProperty;

public class Person {

    private final SimpleStringProperty firstName;
    private final SimpleStringProperty lastName;

    public Person(String firstName, String lastName) {
        this.firstName = new SimpleStringProperty(firstName);
        this.lastName = new SimpleStringProperty(lastName);
    }

    public String getFirstName() {
        return firstName.get();
    }

    public void setFirstName(String firstName) {
        this.firstName.set(firstName);
    }

    public SimpleStringProperty firstNameProperty() {
        return firstName;
    }

    public String getLastName() {
        return lastName.get();
    }

    public void setLastName(String lastName) {
        this.lastName.set(lastName);
    }

    public SimpleStringProperty lastNameProperty() {
        return lastName;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:20:32.580

自发布以来，我发现[了另一个](https://stackoverflow.com/questions/9285093/self-made-choiceboxtablecell-startedit-method-does-not-turn-cell-editing-into-tr?rq=1)基本相同的问题。他们采取了总是避免空值的方法，这对于字符串来说很好（例如使用空字符串），但对于日期或其他没有明显“空”值的数据类型是不可接受的。

解决方案是将 false 值传递给 EditingCell.updateItem 方法中的 super.updateItem 调用。如果有人对完整的分析感兴趣，我已经整理了一份[完整的文章。](http://www.wobblycogs.co.uk/index.php/computing/javafx/145-editing-null-data-values-in-a-cell-with-javafx-2)

# sql - Postgres 使用跨 3 个表的内部连接进行更新？

> ID：12602150
> 
> 赞同：1
> 
> 时间：2012-09-26T12:51:21.083
> 
> 标签：sql, postgresql, sql-update, inner-join

今天早上我问[了这个](https://stackoverflow.com/questions/12600608/postgres-update-with-an-inner-join-across-2-tables)非常相似的问题，得到了很好的回答。

但是，看完剧本后，我发现我的实际问题*比*我在那个问题中描述的要复杂一些。基本上，我有 3 个 Postgres 表：

```
[myschema].[animals]
--------------------
animal_id
animal_attrib_type_id (foreign key to [myschema].[animal_attrib_types])
animal_attrib_value_id (foreign key to [myschema].[animal_attrib_values])

[myschema].[animal_attrib_types]
--------------------------------
animal_attrib_type_id
animal_attrib_type_name

[myschema].[animal_attrib_values]
--------------------------------
animal_attrib_value_id
animal_attrib_value_name 
```

所以，我可能有这样的`animal`记录：

```
[myschema].[animals]
--------------------
animal_id = 458
animal_attrib_type_id = 38
animal_attrib_value_id = 23 
```

并且对应的`animal_attrib_type`（id = 38）具有以下值：

```
[myschema].[animal_attrib_types]
--------------------------------
animal_attrib_type_id = 38
animal_attrib_type_name = 'animals.should-make-noise' 
```

并且对应的`animal_attrib_value`（id = 23）具有以下值：

```
[myschema].[animal_attrib_values]
--------------------------------
animal_attrib_type_id = 23
animal_attrib_type_name = 'true' 
```

因此，同`animal`一条记录可以有多个类型/值对。在这种情况下，动物有一个对应于一个`animal_attrib_type_name`“ ”的“ ”。`animals.should-make-noise``animal_attrib_value_name``true`

在运行时，我将只有`animal_id`(ie, 458) 和`animal_attrib_type_id`(ie, 38)。我需要能够查找`animal_attrib_value_name`与给定`animal_id`且`animal_attrib_type_id`仅对应的适当值，然后将其值更新为一些静态文本（“真”或“假”）；全部来自同一个 UPDATE 语句。

上面提到的问题中的答案对于我所说的问题是正确的，但是由于同一个动物有 0+ 类型/值组合，我实际上需要一个稍微不同的 SQL 语句。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T18:50:52.183

使用[`FROM`PostgreSQL`UPDATE`命令](http://www.postgresql.org/docs/current/interactive/sql-update.html)中的子句。这通常更清洁、更快。

```
UPDATE animal_attrib_values av
SET    animal_attrib_value_name = 'true'
FROM   animals a 
WHERE  a.animal_id = 458 
AND    a.animal_attrib_type_id  = 38
AND    a.animal_attrib_value_id = av.animal_attrib_value_id; 
```

因为我们已经知道了，所以`animal_attrib_type_id`我们根本不需要包含第三个表`animal_attrib_types`。如果需要，我们可以另外加入...

此外，不要`SET`对`UPDATE`. 那是语法错误。[我在所述页面上](http://www.postgresql.org/docs/current/interactive/sql-update.html)引用手册：

> 不要在目标列的规范中包含表的名称——例如，`UPDATE tab SET tab.col = 1`是**无效**的。

大胆强调我的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:24:52.993

下面的 SQL 应该可以满足您的要求：

```
UPDATE animal_attrib_values aav
SET animal_attrib_value_name= 'true'
WHERE aav.animal_attrib_value_id = (
    SELECT a.animal_attrib_value_id 
    FROM animals a 
    WHERE a.animal_id = 458 
        AND a.animal_attrib_type_id  = 38
)
; 
```

# c# - 在 C# 中克隆动态对象

> ID：12602152
> 
> 赞同：2
> 
> 时间：2012-09-26T12:51:24.330
> 
> 标签：c#, clone

我在使用如下代码克隆动态对象时遇到问题：

```
 public void Execute(IPrepareData entity)
    {
        try
        {                
            dynamic data = entity.Primary as dynamic;
            data.PreviousInfo = deepClone(data.Info);
        }
        catch (Exception ex)
        {
            data.Errors.Add(ex.Message);
        }
    }

    private static T deepClone<T>(T obj)
    {
        if (typeof(T).IsClass || typeof(T).IsArray)
        {
            if (ReferenceEquals(obj, null))
            {
                return default(T);
            }
        }
        using (var memoryStream = new MemoryStream())
        {
            BinaryFormatter fieldFormatter = new BinaryFormatter();
            fieldFormatter.Serialize(memoryStream, obj);
            memoryStream.Position = 0;
            return (T)fieldFormatter.Deserialize(memoryStream);
        }
    }

    dynamic data; 
```

我事先不知道实体的结构（只知道它会包含Info，我不知道info的结构）并且它不会被标记为可序列化。我需要将此信息复制到实体的先前信息部分。

此代码的执行结果是 fieldFormatter.Serialize 行上的“对象引用未设置为对象的实例”。

如何检查它是否是对象的实例？

可能有（很可能会有）循环引用，所以我没有尝试反思，因为我不确定如何处理。速度也不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-06-22T14:36:42.013

关于什么

```
var clone = JsonConvert.DeserializeObject<dynamic>(JsonConvert.SerializeObject(obj)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:58:32.333

如果您不知道数据将被标记为可序列化，那么您不能依赖使用`BinaryFormatter`.

如果对象可能有循环引用，那么很多其他的序列化器都是不可能的。

如果我们假设它是（而不仅仅是）的一般情况*，*那么就无法获取有关成员的信息，因为可以在查询时发明它们。`dynamic``ExpandoObject`

基本上，这种情况*没有好的答案。没有什么神奇的方法可以深度克隆“一个东西”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T02:02:45.627

我一直在使用[JSON.net](http://james.newtonking.com/projects/json-net.aspx)来序列化用户定义的类型，并且运行良好。

有一些标志可以忽略空属性，或者默认情况下会另存为

```
{propname: 'undefined'} 
```

我知道您提到速度不是问题，但是序列化程序非常快。

这是[nuget 包](http://www.nuget.org/packages/Newtonsoft.Json)。

# php - 如何从数据库获取数据到谷歌地图信息窗口

> ID：12602160
> 
> 赞同：0
> 
> 时间：2012-09-26T12:51:44.390
> 
> 标签：php, mysql, google-maps

我有这段代码可以在谷歌地图中显示信息窗口

```
 var infoWindow = new google.maps.InfoWindow({
    position: latlng,
    content: 'Hello, world'
  }); 
```

我有一个 php 代码来从数据库中检索地址。

```
<?php
mysql_connect("localhost", "root", "root") or die (mysql_error ());
mysql_select_db("theaterdb") or die(mysql_error());
$strSQL =("SELECT address FROM theaters WHERE theater_name='" . mysql_real_escape_string($_POST['course']) . "'");
$rs = mysql_query($strSQL);
while($row = mysql_fetch_array($rs)) {
echo "<b>Theater Address:</b><br>";
echo $row['address'] . "<br /><br />";
 }
 mysql_close();
?> 
```

现在我需要从数据库中获取地址到 infowindow 的内容字段..如何做到这一点？任何人都可以帮助我....在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:58:14.157

使用`mysql_fetch_assoc()`和分配`$row`数据库值：

```
<?php
    $link = mysql_connect("localhost", "root", "root") or die (mysql_error());
    mysql_select_db("theaterdb", $link) or die(mysql_error());
    $strSQL = "SELECT address FROM theaters WHERE theater_name='" . mysql_real_escape_string($_POST['course']) . "'";
    $rs = mysql_query($strSQL);
    $row = mysql_fetch_assoc($rs);
    mysql_close();
?>

<script>
  var infoWindow = new google.maps.InfoWindow({
    position: latlng,
    content: '<b>Theater Address:</b><br> <?php echo $row['address']; ?>'
  });
</script> 
```

附带说明一下，您可以尝试将您的代码移动到 PDO，因为`mysql_*`函数已被弃用，请查看这个不错的[教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers#Getting_Row_Count)。

# javascript - 图案有问题

> ID：12602165
> 
> 赞同：0
> 
> 时间：2012-09-26T12:52:11.193
> 
> 标签：javascript, regex

我有简单的检查

```
$(document).ready(function(){
    var pattern = /^[\.\/\w]$/;

    $('input[type="submit"]').click(function(){
        for (var i = 2; i < $('input[name="input_data[]"]').length; i++) {
            if(!pattern.test($('input:eq('+i+')').val())){
                console.log(pattern.test($('input:eq('+i+')').val()));
                console.log($('input:eq('+i+')').val());
                alert('Please doublecheck info.')
                return false;
            }
        }
    });
}); 
```

`input:eq('+i+').val()`是不同文件路径的数组，`/var/www/logs/log1`如`pattern``/var/www/logs/log'`

应通过的列表示例：

> /var/www/logs/log
> /var/www/logs/log1
> /var/www/logs/log2
> 192.168.1.1
> 200

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:00:17.977

如果您想匹配任何有效路径或只是一个 IP ：

> /^([\/\w.]+|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0- 9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][ 0-9]|25[0-5]))$/

```
/var/www/logs/log  => OK
/var/www/logs/log2 => OK
/var/www/logs/log' => NOK
/a/small/path/     => OK
192.1.168.23       => OK 
```

# javascript - 使用 jQuery 将元素插入 DOM 时，如何防止页面在加载时短暂跳转？

> ID：12602168
> 
> 赞同：0
> 
> 时间：2012-09-26T12:52:15.117
> 
> 标签：javascript, jquery

我正在使用 jQuery 将 DIV（从隐藏的 iFrame）移动到页面顶部，如下所示：

```
$(document).ready(function($) {
$('#precontainer').clone().insertBefore(parent.document.querySelectorAll(".maincontainer"));}); 
```

每当我重新加载该页面时，我会非常短暂地看到原始页面跳下来为我插入的 DIV 腾出空间。可以防止这种行为吗？

我现在正在做的是在顶部给“maincontainer”一个很大的余量，CSS 大致与插入在它上面的“precontainer”DIV 一样高，在插入 DIV 之后，我使用 jQuery 删除“maincontainer”的上边距，因此跳跃或闪烁的效果不那么严重。但是必须有更好的方法对吗？

我应该提到，我只能访问我用来操作其父级 DOM 的 iFrame（它包含“maincontainer”。我无法修改父级，所以我必须通过 iFrame 完成所有操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:59:15.917

您可以放置​​一个“占位符”div 并将您的“预容器”插入此 div，而不是为父页面提供上边距。这样你就不应该看到闪烁/跳跃的效果。

# sockets - 如何在 fdset 中查找哪个套接字描述符无效

> ID：12602169
> 
> 赞同：2
> 
> 时间：2012-09-26T12:52:20.023
> 
> 标签：sockets, select

在服务器端，在 readfds 上执行 select() 时，它返回错误的文件描述符错误。我怎样才能找到 fdset 中哪些 fd 变得无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:03:01.953

通常，当另一端的连接关闭或发送 RST 段时，`select`返回并将相应的描述符标记为准备好读取。当您随后从它们执行`read`/`recv`时，将返回错误或 EOF。

您也可以尝试使用`strace`工具（如果可用）进行调试。它将帮助您跟踪输入的描述符以及调用的`select`描述符`read`/ 。`recv`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:25:37.033

您可以使用以下函数检查套接字上的未决错误：

```
int get_socket_error( int s )  {
    int error;
    socklen_t len = sizeof( error );
    if ( getsockopt( s, SOL_SOCKET, SO_ERROR, &error, &len ) < 0 ) 
        error = errno;
    return error;
} 
```

但正如@Maxim 所说，`EBADF`从返回[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)通常表明编码草率，

# c++ - 在 constexpr 中使用非常量变量？

> ID：12602171
> 
> 赞同：2
> 
> 时间：2012-09-26T12:52:22.660
> 
> 标签：c++, templates, c++11, constexpr

因此，对于前面关于带有三元运算符的 const/non-const 的问题，以下`test`函数是否适用于 C++11 标准：

```
template<bool UseConst> class MyClass
{
    public:
        constexpr bool test()
        {
             return (UseConst) ? (_constvar) : (_var);
        }

    protected:
        int _var;
        static const int _constvar;
} 
```

整个问题是，它`_constvar`是 const，并且`_var`是非常量。我必须通过相同的函数根据模板参数访问这两个数据，并且我希望在使用 const 时有一个编译时函数。

功能是否`test()`满足我的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:27:37.883

您可以使用 SFINAE 来“专门化”您的`test`功能。换句话说，您可以执行以下操作：

```
template<bool true_false>
struct true_type
{
    static char value;
};

template<>
struct true_type<false>
{
    static char value[2];
};

template<bool UseConst> class MyClass
{
    private:
        constexpr int pre_test(const char arg) { return _constvar; }
        int pre_test(char (&)[2]) const { return _var; }

    public:
        constexpr int test()
        {
             return pre_test(true_type<UseConst>::value);
        }

    protected:
        int _var;
        static const int _constvar;
}; 
```

现在，当您调用时`MyClass::test`，如果`UseConst`是`false`，`test`将降级为运行时函数，但当`UseConst`是时`true`，您将获得编译时函数。

# list - Scala：从列表中提取重复值

> ID：12602174
> 
> 赞同：2
> 
> 时间：2012-09-26T12:52:39.343
> 
> 标签：list, scala, scalaz, scalaz7

我经常需要检查许多值是否相等，以防提取共同值。也就是说，我需要一个功能如下：

```
extract(List()) // None
extract(List(1,2,3)) // None
extract(List(2,2,2)) // Some(2) 
```

假设一个有一个会添加`tailOption`到 seqs 的皮条客（写一个或在 scalaz 中有一个是微不足道的），一个实现看起来像

```
def extract[A](l: Seq[A]): Option[A] = {

  def combine(s: A)(r: Seq[A]): Option[A] =
    r.foldLeft(Some(s): Option[A]) { (acc, n) => acc flatMap { v =>
      if (v == n) Some(v) else None
    } }

  for {
    h <- l.headOption
    t <- l.tailOption
    res <- combine(h)(t)
  } yield res
} 
```

> Scalaz 中是否有类似的东西——可能更普遍——或者更简单的编写方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:26:47.213

这似乎是一种非常复杂的写作方式

```
def extract[A](l:Seq[A]):Option[A] = l.headOption.flatMap(h =>
  if (l.tail.forall(h==)) Some(h) else None) 
```

您不需要`tailOption`，因为作为参数传递给的匿名函数仅在不为空`flatMap`时才会执行。`l`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:45:40.323

如果您只想删除重复项`toSet`就足够了：

```
def equalValue[A](xs: Seq[A]): Option[A] = {
  val set = xs.toSet
  if (set.size == 1) Some(set.head) else None
}

scala> equalValue(List())
res8: Option[Nothing] = None

scala> equalValue(List(1,2,3))
res9: Option[Int] = None

scala> equalValue(List(2,2,2))
res10: Option[Int] = Some(2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:41:49.833

这是一个流畅的解决方案

```
yourSeq.groupBy(x => x) match {case m if m.size==1 => m.head._1; case _ => None} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T13:28:13.160

您可以使用映射来计算列表中每个元素的出现次数，然后只返回那些出现多次的元素：

```
def extract[T](ts: Iterable[T]): Iterable[T] = {
  var counter: Map[T, Int] = Map()

  ts.foreach{t =>
    val cnt = counter.get(t).getOrElse(0) + 1
    counter = counter.updated(t, cnt)
  }

  counter.filter(_._2 > 1).map(_._1)
}

println(extract(List())) // List()
println(extract(List(1,2,3))) // List()
println(extract(List(2,2,2))) // List(2)
println(extract(List(2,3,2,0,2,3))) // List(2,3) 
```

您还可以使用 a`foldLeft`而不是`foreach`并将空映射用作 的初始累加器`foldLeft`。

# python - Pyqt：从函数“动态”附加到 qtextedit

> ID：12602179
> 
> 赞同：4
> 
> 时间：2012-09-26T12:52:47.957
> 
> 标签：python, dynamic, pyqt4, stdout, qtextedit

我的 pyqt gui 中有一个按钮，单击该按钮会运行一个执行一些冗长数学计算的函数。在这个函数里面有很多打印语句，比如：

```
print "finished calculating task1 going on to task2" 
```

因此，通过使用这样的打印语句，我不需要让我们说一个进度条来指示程序进度。我在我的 gui 中添加了一个 QTextEdit 小部件，并将该函数中的所有打印语句替换为：

`MyTextEdit.append('message')`

`MyTextEdit`QTextEdit 小部件在哪里，并且`message`是我希望该功能打印的消息。

例子：

```
MyTextEdit.append('finished calculating task1 going on to task2')
task2 #lengthy second task
MyTextEdit.append('finished calculating task2 going on to task3')
task3 #lengthy third task 
```

当我单击按钮并且函数运行时，该函数内的所有计算都必须完成，然后所有消息都附加到 QTextEdit 小部件。

我认为每次`MyTextEdit.append('message')`执行 a 时它都会立即运行，并且小部件会在那一刻显示消息，而不是在所有其他消息的末尾显示。

我究竟做错了什么？

通过阅读这篇[文章，我有了这样做的想法](https://stackoverflow.com/questions/8356336/how-to-capture-output-of-pythons-interpreter-and-show-in-a-text-widget)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:29:00.777

每次之后只需调用[QCoreApplication.processEvents](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qcoreapplication.html#processEvents)`append`

`QCoreApplication`您可以使用静态方法获取您的实例`QCoreApplication.instance`

这将要求 Qt 在完成正在执行的任务之前“刷新”您的 gui，因为该命令会处理所有未决事件。

# opengl - 在opengl中缩放

> ID：12602190
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:53:21.237
> 
> 标签：opengl, scale

我的代码工作如下：绘制一个三角形，然后单击“1”时缩放三角形，但发生的是三角形既被缩放又被平移。

这是我的代码：全局变量

```
#include <glut.h>

void Display(void);
void MyKeyboard(unsigned char,int,int);
void MyMouse(int,int,int,int);

int x1 =20 .0f;
int y1 = 30.0f;
int x2 = 40.0f;
int y2 = 50.0f;
int x3 = 60.0f;
int y3 = 10.0f; 
```

主要方法

```
void main(int argc,char** argr)
{
 glutInit(&argc,argr);
 glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
 glutInitWindowSize(1000,600);
 glutInitWindowPosition(50,50);
 glutCreateWindow("Mouse and Keyboard");
 glutDisplayFunc(Display);
 glutKeyboardFunc(MyKeyboard);
 glutMouseFunc(MyMouse);
 glClearColor(0.0f,0.0f,0.0f,0.0f);
 gluOrtho2D(0.0,1000.0,0.0,600.0);
 glutMainLoop();
} 
```

显示方式

```
void Display()
{
 glClear(GL_COLOR_BUFFER_BIT);
 glPushMatrix();

    glBegin(GL_TRIANGLES);
    glColor3f(0.0f,0.0f,1.0f);

    glVertex3f(x1, 600-y1, 0.0f);
    glVertex3f(x2, 600-y2, 0.0f);
    glVertex3f(x3, 600-y3, 0.0f);

    glEnd( );
    glPopMatrix();
    glFlush();
} 
```

键盘事件

```
void MyKeyboard(unsigned char key,int mouseX,int mouseY)
{
    if (key == '1')
    {
        glScaled (0.5f ,0.5f ,1.0f);
        glutPostRedisplay();
        return;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T13:59:32.850

`glScaled()`本质上会导致您的所有点乘以您提供的值`glScaled()`。这实质上意味着您的所有顶点都将远离原点 (0,0)。要克服缩放问题，只需将三角形定义为以 (0,0) 为中心。

显然你不会总是希望你的三角形为零，所以你必须利用这些`glTranslate()`函数。

理想情况下，您可能希望更改您的键盘功能，使其根本不调用`glScale()`，但在某个变量中存储应该缩放多少。然后，在渲染循环中，在绘制三角形之前，调用 translate 和 scale 函数。

题外话：立即模式 OpenGL 已被弃用（即`glBegin(); glEnd()`）。在这里查看现代 OpenGL 教程。

[http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-1:-The-Graphics-Pipeline.html](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-1:-The-Graphics-Pipeline.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:57:26.983

如果要按比例缩放三角形，请使用：

```
glScaled (0.5f ,0.5f ,0.5f); 
```

# python - PyDev Eclipse 控制台是否支持转义字符（序列）？

> ID：12602191
> 
> 赞同：0
> 
> 时间：2012-09-26T12:53:21.643
> 
> 标签：python, escaping, pydev

当我尝试打印时

```
Good
Morning 
```

我用了

```
print("Good\nMorning") 
```

但结果是

```
Good\nMorning 
```

PyDev Eclipse 控制台是否支持转义字符（序列）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:35:01.770

嗯，这很奇怪，就好像你真的在做一样`print repr("Good\nMorning")`。不知道为什么会发生这种情况（它在 PyDev 中对我来说应该有效）......

您是否尝试过使用调试器进入打印以检查实际发生的情况？

# java - 在 Java 中使用反斜杠零作为分隔符分隔文本

> ID：12602192
> 
> 赞同：0
> 
> 时间：2012-09-26T12:53:35.700
> 
> 标签：java, escaping, character, tokenize

假设我有一个包含以下内容的二进制文件：

```
abc\0def\0ghi\0 
```

内容已被读取并存储在字符串变量 s 中。我应该如何将组件“abc”、“def”、“ghi”提取到不同的字符串标记中？常用的方法如 split、stringTokenizer 不接受`\0`作为分隔符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T12:56:21.153

`\0`是[null 字符](http://en.wikipedia.org/wiki/Null_character)，因此您可以将其 unicode 表示形式用作分隔符。

```
String content = "abc\0def\0ghi\0";
String[] components = content.split("\u0000"); 
```

但是，您*可以*只使用“\0”作为分隔符来分割。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:03:14.720

如果原始字符串是，`"abc\\0def\\0ghi\\0"`那么您可以使用`split("\\\\0")`：

```
"abc\\0def\\0ghi\\0".split("\\\\0") 
```

如果原始字符串是，`"abc\0def\0ghi\0"`那么您可以使用`split("\0")`：

```
"abc\0def\0ghi\0".split("\0") 
```

# zend-db - ZF2 将 Join-Statement 的 ResultSet 映射到不同的对象

> ID：12602193
> 
> 赞同：3
> 
> 时间：2012-09-26T12:53:40.177
> 
> 标签：zend-db, resultset, zend-framework2

当涉及到提高性能时，减少单个 SQL 查询的数量就是其中的一部分。

现在让我们假设一个非常基本的例子：我有一个**博客**表和一个**用户**表。每个博客都通过给定的主键引用用户。

声明可能像

```
SELECT blog.title, blog.text, user.name FROM blog, user INNER JOIN on blog.user_id = user.id 
```

现在我的 Blog-**对象**我想要一个 $user-property 这是一个 User-**对象**

我的问题：ZF2 中是否有内置功能来处理这种情况？或者我是否需要手动将结果的每个字段映射到我的对象中？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:14:25.923

不，ZF2 没有内置功能可以做到这一点 - 如果需要，您应该考虑 Doctrine 2 或 Propel。

`Zend\Db`但是，您可以在映射器类中编写此类 SQL 语句，然后使用hydrator`ArraySerializable`填充博客实体。然后博客实体`populate()`可以选择使用传递给它的用户数据创建一个用户对象。

# java - 如何使用 Spring MVC 在 DB 中持久化图像

> ID：12602199
> 
> 赞同：0
> 
> 时间：2012-09-26T12:54:05.333
> 
> 标签：java, spring, hibernate, spring-mvc, file-upload

如何使用 Spring MVC3 将图像保存在数据库中

控制器：

```
public String postAdd(@ModelAttribute("employeeAttribute") @Valid Employee  employee,   BindingResult result,@RequestParam("file") MultipartFile   file) throws Exception{

       byte[] bFile=null;

       System.out.println("File Name......"+file.getName());

        if (!file.isEmpty()) {

          bFile = new byte[(int) file.getSize()];
        FileInputStream fileInputStream = new FileInputStream(file.getOriginalFilename());         
             fileInputStream.read(bFile);
             fileInputStream.close();
            }

              employee.setImage(bFile);

     employeeServiceImpl.add(employee); 
```

}

Jsp页面：

```
 <c:url var="saveEmp" value="/manam/mobee/employee/add"/>
       <form:form modelAttribute="employeeAttribute" method="POST" action="${saveEmp}"          enctype="multipart/form-data" >
      <form:label path="image">Image</form:label>
       <input type="file" name="file" id="file"></input> 
```

我在这里发送 C:\Users\Public\Pictures\Sample Pictures\Desert Landscape.jpg 文件，但 FileInputStream 只需要 Landscape.jpg 。请建议如何为 FileInputStream 设置完整文件路径。

在这里我得到 java.io.FileNotFoundException: Forest.jpg (The system cannot find the file specified) 异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:00:12.433

原始文件名是最终用户机器上的文件名。您的 Spring MVC 应用程序在您的服务器机器上运行。不能使用原始文件名，希望在最终用户机器上找到绝对文件名，更不要尝试使用这个名称读取文件。

要获取上传文件的内容，请使用[`MultipartFile.getBytes()`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/multipart/MultipartFile.html#getBytes%28%29)或[`MultipartFile.getInputStream()`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/multipart/MultipartFile.html#getInputStream%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:37:53.877

您需要从 MultipartFile 中获取字节：

```
 bFile = file.getBytes();
 employee.setImage(bFile); 
```

# javascript - getAttribute('value') 当 value=""

> ID：12602204
> 
> 赞同：-2
> 
> 时间：2012-09-26T12:54:15.390
> 
> 标签：javascript, yui

我正在使用 Y.one(selector).getAttribute('value'); 返回页面上的值，我无法处理 value="" 的情况。

```
var check_value = Y.one(selector).getAttribute('value');
if (check_value != undefined || check_value != null || check_value != "") {
    alert(check_value);
} 
```

通过所有这些检查，当我正在查看的元素的值为“”时，我会收到一个空警报框。在这种情况下，因为我知道我要查找的值是一个数字，所以我可以将检查更改为只查找一个 > 0 的数字并让它工作，但我想知道是否有人知道一种方法来检查没有值的情况我不是在处理数字数据。

```
if (check_value >0) {
    alert(check_value);
} 
```

这种方法在我的情况下确实有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:59:46.193

你为什么不直接检查“真实性”呢？

```
if (check_value) {
   alert(check_value);
} 
```

我想这与您的（预期）检查基本相同。如果你需要检查`0`（一个数字），只需使用这个：

```
if (check_value || check_value === 0) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:57:08.880

如果它是一个空字符串，那么它不是未定义的，也不是空的。由于您检查它是否未定义**或**不为空**或**不是空字符串，那么它将通过。

`&&`不使用`||`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:52:53.163

你可以看看 Y.Lang.isValue()

[http://yuilibrary.com/yui/docs/api/classes/Lang.html#method_isValue](http://yuilibrary.com/yui/docs/api/classes/Lang.html#method_isValue)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:57:21.037

用简单的英语看逻辑，`check_value != undefined || check_value != null || check_value != ""`如果是`undefined or null or ""`，如果是null，则不是未定义，如果是空白，则不是null，所以一切都通过了；你正在寻找一个合乎逻辑`AND`的而不是`OR`

试试这个：

```
var check_value = Y.one(selector).getAttribute('value');
if (check_value != undefined && check_value != null && check_value != "") {
    alert(check_value);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T12:58:12.167

您看到警报是因为您的`if`语句有`OR`( `||`) 子句。在`value`属性为空字符串的情况下，最后一个条件 ( `check_value != ""`) 应该失败。但是，由于`""`不等于`undefined`第一个条件已经返回 true，`if`语句测试通过（它不会评估其他条件，因为它不需要）并且`if`块被执行。

我怀疑您实际上想使用`AND`( `&&`) 代替。

# audio - 从 OpenTok 服务器下载的视频没有声音

> ID：12602205
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:54:15.110
> 
> 标签：audio, video, video-streaming, audio-streaming, video-processing

我已经成功实现了 OpenTok。在小组讨论中（三个人，包括主持人）视频和**音频**传输效果很好，但是当主持人录制流时问题开始了。从 OpenTok 服务器下载的视频片段没有声音。

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:55:39.690

感谢 Ankur（OpenTok 论坛）：

> 下载视频中的音频流位于 SPEEX 编解码器中。许多桌面音频播放器无法识别编解码器。您可能需要使用 ffmpeg 对音频进行转码，然后才能在 VLC 等程序中播放。

# visual-studio-2010 - 由于主要参考，无法编译 C# 项目

> ID：12602208
> 
> 赞同：1
> 
> 时间：2012-09-26T12:54:21.333
> 
> 标签：visual-studio-2010, c#-4.0

我正在尝试使用目标框架作为“.NETFramework 4.0”来编译项目。但我收到以下警告：

> 无法解析主要引用“XXX”，因为它间接依赖于框架程序集“System.Runtime.Serialization，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”，在当前目标中无法解析框架。“.NETFramework，版本=v4.0”。要解决此问题，请删除引用“Fdi”或将您的应用程序重新定位到包含“System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的框架版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:13:58.140

我发现了一个较早（但类似）的问题：[Visual Studio 2010: Reference Assemblies Targeting Higher Framework Version](https://stackoverflow.com/questions/3298577/visual-studio-2010-reference-assemblies-targeting-higher-framework-version)

Johannes Rudolph 在 MSDN 的论坛（[http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/dfadfb34-5328-4c53-8274-931c6ae00836](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/dfadfb34-5328-4c53-8274-931c6ae00836)）上找到了这个答案：

> 但是，有两种解决方法。
> 
> 选项1：
> 
> 步骤 1：卸载针对 .NET 2.0 的引用项目
> 
> Step2：右键单击卸载的项目并从上下文菜单中选择编辑
> 
> 步骤 3：添加`<SpecificVersion>true</SpecificVersion>`到参考。以下是我的重现解决方案的示例：

```
<ProjectReference Include="..\HighFX\HighFX.csproj">
<Project>{8DD71CAF-BEF7-40ED-9DD0-25033CD8009D}</Project>
<Name>HighFX</Name>
<SpecificVersion>true</SpecificVersion>
</ProjectReference> 
```

> 第四步：重新加载项目。现在您应该可以在 Visual Studio 2010 中构建，仍然可能会出现如下警告，但构建可以成功。
> 
> 警告 1 无法引用项目“XXX”。引用的项目针对更高的框架版本（3.5）
> 
> 选项2：
> 
> 使用命令行工具 csc.exe 构建每个源文件，这不会阻止构建。

# safari - Safari中的applescript关闭选项卡

> ID：12602210
> 
> 赞同：1
> 
> 时间：2012-09-26T12:54:27.993
> 
> 标签：safari, applescript

和

```
tell application "Safari"
        set winlist to every window
        repeat with win in winlist
                set tablist to every tab in win
                repeat with t in tablist
                        name of t as string
                end repeat
        end repeat
end tell 
```

我可以得到 safari 标签的名称

如何关闭具有特定名称的选项卡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:31:18.947

这是另一种方法：

```
tell application "Safari"
    set winlist to count of every window
    repeat with i from 1 to winlist
        close (every tab of window i whose name = "Google")
    end repeat
end tell 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:20:34.633

```
tell application "Safari"
    repeat with t in tabs of windows
        tell t
            if name starts with "autom" then close
        end tell
    end repeat
end tell 
```

`tell application "Safari" to close documents where name starts with "autom"`将关闭所有包含以 . 开头的选项卡的窗口`autom`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-15T03:28:04.847

它对我不起作用 2 它们都不起作用

# file-upload - 如何配置 JBoss 4.23 以接受长超时连接？

> ID：12602214
> 
> 赞同：0
> 
> 时间：2012-09-26T12:54:44.687
> 
> 标签：file-upload, jboss, httpwebrequest

ALL，我正在做一个需要从.net 上传大文件（200MB）到 JBoss 的项目。到目前为止，我已经为 HttpWebRequest 对象设置了超时属性，但在 JBOSS 控制台中仍然出现异常

```
10:31:06,896 ERROR [DeployServlet] Failed to upload file.
org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. null
     at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:359)
     at com.accela.deploy.servlet.RequestHandler.getUploadFileFromRequest(RequestHandler.java:86)
     at com.accela.deploy.servlet.DeployServlet.doPost(DeployServlet.java:118)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
     at com.accela.commom.filter.AuthFilter.doFilter(AuthFilter.java:99)
     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
     at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
     at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:615)
     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
     at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
     at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
     at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1733)
     at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException
     at org.apache.coyote.http11.InternalAprInputBuffer.fill(InternalAprInputBuffer.java:801)
     at org.apache.coyote.http11.InternalAprInputBuffer$SocketInputBuffer.doRead(InternalAprInputBuffer.java:830)
     at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:116)
     at org.apache.coyote.http11.InternalAprInputBuffer.doRead(InternalAprInputBuffer.java:738)
     at org.apache.coyote.Request.doRead(Request.java:427)
     at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:304)
     at org.apache.tomcat.util.buf.ByteChunk.substract(ByteChunk.java:419)
     at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:327)
     at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:193)
     at org.apache.commons.fileupload.MultipartStream$ItemInputStream.makeAvailable(MultipartStream.java:959)
     at org.apache.commons.fileupload.MultipartStream$ItemInputStream.read(MultipartStream.java:887)
     at java.io.InputStream.read(InputStream.java:101)
     at org.apache.commons.fileupload.util.Streams.copy(Streams.java:94)
     at org.apache.commons.fileupload.util.Streams.copy(Streams.java:64)
     at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:354)
     ... 26 more
10:31:07,973 INFO  [RequestHandler] Failed 
```

我相信这是因为 http 请求超时问题。JBoss 接受长时间 Http 连接是否有任何超时配置？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:35:42.247

可能您遇到了[这个错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=50394)。如果您使用的是 Tomcat Native 库，请尝试停用它们以查看它是否可以正常工作。或者使用带有 mod_proxy 的 Apache httpd 服务器并在 JBoss 服务器上使用 AJP 连接器 - 如果它确实是 HTTP 连接器中的错误，那可能是一种解决方法。

但是要回答有关超时的问题，请查看文件`server/default/deploy/jboss-web.deployer/server.xml`（如有必要，请替换`default`为您正在使用的配置）。确保在元素`<Connector port="8080" ...`中将属性`disableUploadTimeout`设置为`true`。有关此属性和连接器配置的更多信息，请参阅[文档](https://tomcat.apache.org/tomcat-6.0-doc/config/http.html)。

# eclipse - 如何使用 cvs 和 eclipse 在分支中提交新项目

> ID：12602216
> 
> 赞同：0
> 
> 时间：2012-09-26T12:54:51.037
> 
> 标签：eclipse, cvs

如何在分支中提交新创建的项目。我试过了，但它正在 HEAD 中提交。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:57:29.203

团队 > 切换到另一个分支或版本

# rake - 在 rake 迁移期间已经存在关系

> ID：12602218
> 
> 赞同：12
> 
> 时间：2012-09-26T12:55:00.320
> 
> 标签：rake, refinerycms, migrate

我已经为refinerycms 安装了一个运行良好的博客引擎。

现在我已经生成了一个迁移，其中包含一些表字段更改（当然不是精炼cms 或博客表），但是我收到了一个错误：

> == CreateBlogStructure: 迁移 =============================================
> - - create_table("refinery_blog_posts", {:id=>true})
> 注意：CREATE TABLE 将为串行列 "refinery_blog_posts.id" 创建隐式序列 "refinery_blog_posts_id_seq1"
> rake 中止！
> 发生错误，此迁移和所有后续迁移均已取消：
> 
> PG::Error: 错误：关系“refinery_blog_posts”已经存在
> ：CREATE TABLE“refinery_blog_posts”（“id”序列主键，“title”字符变化（255），“body”文本，“draft”布尔值，“published_at”时间戳，“created_at”时间戳不为空，“updated_at”时间戳不为空）
> 
> 任务：TOP => db:migrate
> （通过使用 --trace 运行任务查看完整跟踪）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T20:00:59.913

检查您的 db/schema.rb

除了 db/migrate/[timestamp]your_migration 中的迁移之外，您很可能在那里创建了相同的表

如果 db/migrate/[timestamp]your_migration 与架构中找到的副本重复并且它应该可以工作，则可以删除它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-09T18:53:17.653

```
PG::Error: ERROR: relation “refinery_blog_posts” already exists 
```

Pg 是 Rails 的 gem，允许 Rails 和 PostgreSQL 之间通信的一段代码。它将您的迁移与 SQL 表相关联，因此会出现关系错误。所以，错误的意思是：

> 我正在尝试基于迁移 X 创建表 X，但表 X 已存在于数据库中。

可能的解决方案：

1.  创建删除那些可能是旧表的迁移。
2.  更改迁移的名称。
3.  登录到 PostgreSQL 并删除表。就像是：

    ```
    $ psql -U username databasename 
    ```

    然后

    ```
    database_name=# drop table table-name; 
    ```

    不过，确切的命令可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-30T23:58:33.033

添加，因为这是导致此错误的一个明显但容易忽略的原因（这是搜索引擎提出的第一个帖子）。

如果您在同一迁移中不小心定义了相同的关系两次，则会出现此错误。

```
def change
  create_table :books do |t|
    t.belongs_to :author
    t.belongs_to :author # Duplicated column definition
  end
end 
```

看起来很明显，但很容易被忽视。要修复只需删除重复的引用。

# ruby-on-rails-3 - 用于 rake 任务的 rails admin

> ID：12602223
> 
> 赞同：3
> 
> 时间：2012-09-26T12:55:21.547
> 
> 标签：ruby-on-rails-3, rake, activeadmin, rails-admin

我有一个 Rails 应用程序，现在为管理目的定义了数十个 rake 任务，我希望这些 rake 任务反映在一种管理界面上，那么是否有任何即插即用的解决方案或任何快速的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T10:31:32.123

您可以获取输出，`rake -T`然后使用正则表达式对其进行解析。IE ：

```
all_tasks = %x(rake -T)
tasks_array = all_tasks.scan(/(rake\s[\w|:]*)/) 
```

`rake -T`是相当长的操作，所以你可能想缓存它

# ios - 如何使用 GCD 对资源进行轻量级事务锁定？

> ID：12602224
> 
> 赞同：3
> 
> 时间：2012-09-26T12:55:22.613
> 
> 标签：ios, opengl-es, concurrency, grand-central-dispatch

我正在尝试使用 GCD 作为数十个原子属性的替代品。我记得在 WWDC 上，他们谈到 GCD 可以用于高效的事务锁定机制。

在我的 OpenGL ES runloop 方法中，我将所有绘图代码放在一个由`dispatch_sync`自定义创建的串行队列执行的块中。运行循环由 CADisplayLink 调用，据我所知，它发生在主线程上。

有 ivars 和属性既可用于绘图，也可用于控制将要绘制的内容。问题是必须有一些锁定以防止并发问题，以及在两个绘制帧之间从主线程以事务方式查询和修改 OpenGL ES 场景状态的方法。

通过在该串行队列上执行一个块，我可以使用 GCD 以事务方式修改一组属性。

但似乎我无法使用 GCD 将值*读*入主线程，同时阻塞执行绘图代码的队列。`dispatch_synch`没有返回值，但我想在两个帧的绘制*之间准确地访问表示值，用于读取和写入。*

`barrier`他们说的就是这个吗？这是如何运作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T01:26:11.100

这就是异步写入器/同步读取器模型旨在完成的任务。假设您有一个 ivar（为了讨论的目的，我们假设您已经走得更远了，并将所有 ivar 封装到一个结构中，只是为了简单起见：

```
struct {
  int x, y;
  char *n;
  dispatch_queue_t _internalQueue;
} myIvars; 
```

让我们进一步假设（为简洁起见）您已经在 dispatch_once() 中初始化了 ivars，并在代码的前面使用 dispatch_queue_create() 创建了 _internalQueue 作为串行队列。

现在，写一个值：

```
dispatch_async(myIvars._internalQueue, ^{ myIvars.x = 10; });
dispatch_async(myIvars._internalQueue, ^{ myIvars.n = "Hi there"; }); 
```

并阅读一个：

```
__block int val; __block char *v;
dispatch_sync(myIvars._internalQueue, ^{ val = myIvars.x; });
dispatch_sync(myIvars._internalQueue, ^{ v = myIvars.n; }) 
```

使用内部队列可确保一切都被适当地序列化，并且写入可以异步发生，但读取会等待所有挂起的写入完成，然后再将值返回给您。许多“GCD 感知”数据结构（或具有内部数据结构的例程）将串行队列作为实现细节用于此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:57:54.477

dispatch_sync 允许您指定第二个参数作为完成块，您可以在其中从串行队列中获取值并在主线程上使用它们。所以它看起来像

```
dispatch_sync(serialQueue,^{
    //execute a block
    dispatch_async(get_dispatch_main_queue,^{

        //use your calculations here
    });
}); 
```

串行队列自己处理并发部分。因此，如果另一部分试图同时访问相同的代码，它将由队列本身处理。希望这没什么帮助。

# vb.net - Windows 8 Metro 在弹出窗口中显示 Webview 并将响应传回 OAUTH2 Visual Basic

> ID：12602227
> 
> 赞同：3
> 
> 时间：2012-09-26T12:55:34.023
> 
> 标签：vb.net, webview, windows-8, microsoft-metro, windows-runtime

这是我的第一个问题，您好，感谢您的支持！我目前正在开发一个 Windows 8 商店应用程序。我需要登录到 OAUTH 网站并获取响应令牌以保存为字符串。我希望它出现在弹出窗口中，让用户登录，然后在收到响应后关闭。

我可以让 webview 弹出，我可以导航到页面。但是我如何处理响应并关闭。我说VB。

再次感谢！

编辑添加我的代码：

```
Dim url As New Uri("https://aurlthatidontcontrol")
WebView1.Navigate(url)
PopUp.IsOpen = True 
```

MY 弹出窗口打开并显示 url 的登录名。登录后，我应该从该服务器获得包含访问令牌的响应，我想将该令牌放入我的应用程序并将其保存为字符串，然后关闭弹出窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:29:08.533

好的，我想通了。

我没有实际调用 webview，而是使用了 web-broker 身份验证。[细节](http://msdn.microsoft.com/en-us/library/windows/apps/hh750287.aspx)

这允许服务登录在屏幕上“弹出”，我可以像这样捕获结果：

```
Dim webresult As WebAuthenticationResult = Await      
WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, StartURI, endURI)

Dim finalresponse() As String = webresult.ResponseData.ToString.Split("=")
Dim currentuserstoken As String = finalresponse(1)
Return currentuserstoken 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:01:25.657

使用[WebView类上的](http://msdn.microsoft.com/en-us/library/windows/apps/br227702.aspx)[InvokeScript](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.invokescript.aspx)方法调用 JavaScript 代码以从响应中收集信息并将其返回调用代码。如果您控制的页面中没有脚本，请使用“eval”作为函数名称并将参数传递给它。

或者，在 JavaScript 中使用 window.external.notify 来触发[ScriptNotify](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.scriptnotify.aspx)事件（链接包括一个示例）。

# wxpython - 如何从另一个班级调用事件？

> ID：12602228
> 
> 赞同：1
> 
> 时间：2012-09-26T12:55:40.617
> 
> 标签：wxpython

我有两个这样的课程：

```
class ClassNrOne(wx.Frame):
    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Title',size=(1024,600))
        self.panel = wx.Panel(self,size=(1024,600))
        self.mybutton = wx.Button(self.panel,label="OK",pos=(215,160),size=(80,40))
        self.Bind(wx.EVT_BUTTON, ClassNrTwo.do, self.mybutton)

class ClassNrTwo(wx.Panel):
    def __init__(self,parent,id):
        wx.Panel.__init__(self, parent,id)
        self.newpanel = wx.Panel(self,size=(1024,600))
    def do(self,event):
        # do something 
```

当我尝试运行它时，我收到错误消息：“'ClassNrOne' 对象没有属性 'ClassNrTwo'”。如果我向后尝试-> self.Bind(wx.EVT_BUTTON, do.ClassNrTwo, self.mybutton) 我收到消息：“未定义全局名称'do'”。如何从另一个班级调用事件？

与此相关的第二个问题：单击“mybutton”时是否也可以从 ClassNrTwo 调用“__init__”？

编辑：我只是将我所有的小问题合并为一个大问题：[https ://stackoverflow.com/questions/12604139/need-tutorial-for-menubar-handling-panel-building](https://stackoverflow.com/questions/12604139/need-tutorial-for-menubar-handling-panel-building)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:19:55.427

你为什么想这么做？你想在这里做什么？如果你真的需要从其他类调用某个函数，你可以创建`ClassNrTwo`then 的实例，`ClassNrOne`你可以做这样的事情。

```
classnrtwo = ClassNrTwo(self, wx.ID_ANY)
self.Bind(wx.EVT_BUTTON, classnrtwo.do, self.mybutton) 
```

但是，我个人不建议这样使用它，它不是从其他类调用事件，它只是使用其他类函数。

对于第二个问题，`__init__`魔术函数（[这里](http://www.rafekettler.com/magicmethods.html)有很好的解释）是否像构造函数一样，当您创建类的实例时它会自动调用，如上面的示例，`__init__`“ClassNrTwo”的函数也会自动运行。

希望这有帮助，

# lucene - CustomScore 和所有文档的最大价值

> ID：12602229
> 
> 赞同：0
> 
> 时间：2012-09-26T12:55:43.237
> 
> 标签：lucene, elasticsearch

嗨，现在我有`custom_score "_score + ((parseInt(doc.ad_when.value) - oldestAd) / doc.ad_since.value) * 2"`。可以在所有文档中使用自定义得分最大值。我希望最旧的广告来自所有搜索数据。MySql 有函数 MAX。在 MySql 中它会很容易。

示例：在所有文档中，我都有流行度字段，我想将所有文档中的最大价值用于 customcore。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:47:14.717

不幸的是，它只能分两步完成。首先，您需要从按排序的列表中检索第一条记录，`ad_when.value`或者使用构面查找`oldestAd`值。然后您可以在自定义分数中使用此值。我建议制作`oldestAd`一个脚本参数以防止 elasticsearch 在每个请求上解析脚本。

# windows - 有没有比 Windows DPAPI 更安全的方法来保护和存储密码？

> ID：12602234
> 
> 赞同：3
> 
> 时间：2012-09-26T12:55:55.960
> 
> 标签：windows, security, store

有没有比 Windows DPAPI 更安全的方法来保护和存储密码？

我的程序需要存储一个秘密（类似于凭据）才能在 Windows 上进行自动登录，并且这个秘密必须与其他用户帐户共享，因为该程序可以在不同的帐户上运行但共享凭据。

我需要保护这个秘密不被篡改，以避免攻击者注入他自己的凭据并取得控制权。如果攻击者具有物理访问权限，我知道我们无能为力，但是.... 目前，存储和保护这个秘密的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:24:37.583

如果你想保护某些东西不被篡改，你可能最好使用多层次的方法。这样做的缺点是获得访问权限（即使拥有所有秘密）是一项*天文*壮举，并且会增加您的登录时间。

但是请记住，系统的安全性取决于其最弱点。您可以在隐藏的加密卷中拥有一个文件，隐藏在更多层的自定义加密之后，但是如果您在办公桌旁的便利贴上有密码，那么它很可能不会长期安全。

这同样适用于 Windows 上的安全性。ACL 和加密仅与您的管理员帐户一样强大。有关安全提示，请尝试[Server Fault](https://serverfault.com/)。

至于系统本身，以某种方式通过密钥或数字证书实施公钥加密（非对称加密）并为每个用户提供自己的个人密钥/ID 是一种更安全且风险更小的替代方案。
Windows 至少从[windows server 2000](http://technet.microsoft.com/en-us/library/dd277320.aspx)开始就支持 pubkey 基础结构；如果您有硬件，您甚至可以使用智能卡登录。

考虑以下情况：
1\. 攻击者从用户那里获得私钥（带有保护）。这可以在平均硬件上在一两个小时内打破@2048bit。在此示例中，您只需删除用户的公钥并让他们重新生成新密钥。
2\. 攻击者获取用户的数字证书，那么你有两种选择：

```
1) Remove their certificate from the Active Directory store, ACL or other certificate store.
2) Issue a revocation on the certificate, and forceably expire it. This assumes your are acting as the certificate authority. 
```

简而言之，这个答案说明了一件事：**如果您非常担心密码安全性，那么您不应该使用密码。如果你让你的系统永远崩溃，那么替代路线是密码的僵尸网络暴力破解。**

# javascript - 需要知道创建jstree的div

> ID：12602236
> 
> 赞同：0
> 
> 时间：2012-09-26T12:56:10.207
> 
> 标签：javascript, html, css, jstree

我在同一页面上有很多 jstree。我想对一棵特定的树应用特殊的 UI/dom 效果。

我想在`jquery.jstree.js`文件中创建一个全局变量，它只不过是初始化 jstree 的 div。

```
//I am using jst as a global object which knows in which div jstree is getting created.
if(jst.attr("id") == "special") {
  ...do something special...
} 
```

或者，如果这个库中有任何其他权限可以让我知道 jstree 的 id。提前致谢。

**编辑：** 我想知道当前正在处理哪个 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:53:48.720

如果我没有正确理解，您能否详细说明您想要实现的目标？

我相信 jsTree 需要 id 才能正常工作，因此您可以定义所有 jsTree 实例，使其 id 以字符串开头`jstree`

```
<div id='jstree_one'></div>
<div id='jstree_two'></div>
<div id='jstree_three'></div> 
```

然后你可以使用[Attribute Starts With Selector](http://api.jquery.com/attribute-starts-with-selector/)

```
$('[id^="jstree"]') 
```

将效果应用于所有 jstree 实例。或者您可以根据需要修改选择器。

# drools - 是否可以使用相同的规则回答多个问题？

> ID：12602242
> 
> 赞同：2
> 
> 时间：2012-09-26T12:56:24.367
> 
> 标签：drools, rule-engine

我正在评估业务规则引擎。我玩了一点 Drools，但看起来，我宁愿寻找一个查询驱动的反向链接系统。

所以更具体地说，让我们看一个像这样的简单业务规则：

```
when
    (amount > 1000 AND amount < 2000 AND currency == USD)
    OR
    (amount > 750 AND amount < 1500 AND currency == EUR)
then
   approve loan 
```

是否可以仅使用此规则并“询问” Drools 来回答这些问题：

1.  如果货币是美元，获得批准贷款的必要条件是什么？我希望得到这样的结果：`(amount > 1000) AND (amount < 2000)`

2.  2000欧元贷款可以吗？（预期答案：错误）

3.  如果不可能，那么拒绝的主要原因是什么？（预期答案`amount >= 1500`：）

Drools 是否能够仅使用一条规则来回答此类问题？理论上，这些信息都存储在规则中，但我不知道如何从中“提取”。

如果 Drools 不是这种场景的最佳规则引擎，那么有没有提供这种功能的引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T06:34:36.277

在 RETE 引擎中，产品包含多个条件，因此基本上我们可以将您的规则定义为：

P1= C1 ^ C2 ^ C3 其中C1=数量> 1000；C2=金额 < 2000；C3=货币 == 美元

我还建议您将 OR 条件拆分为两个不同的产品。P2=C4 ^ C5 ^ C6 其中C4=数量> 750；C5=金额<1500；C6=货币==欧元；

（请注意，在生产系统中，您实际上并没有 OR，并且由于可追溯性要求，其中一些甚至不允许您编写 OR 条件）

并回答您的问题：

1.  您只需查询所有共享 C3 的产品作为您的条件的一部分。
2.  用你的输入执行你的规则，你会得到结果
3.  查询您没有令牌的 Beta 记忆，并在网络的相应 Alpha 记忆中传递了 C5 的判别条件。

并非所有规则引擎都允许您查询 beta 内存和令牌。检查 Drools 是否允许您检索 alpha、beta 记忆和存储的令牌。基本上你需要遍历内部 RETE 图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:01:34.713

Drools 与许多其他规则引擎一样，使用 RETE 算法来决定运行哪些结果，规则的所有 when 部分必须与 then 部分匹配才能运行。

对于您的问题 1 和 2：如果您想要多个“答案”，您可以使用多个规则，或使用累积功能。

对于 3：您无法知道为什么没有调用规则，您需要将拒绝案例表示为单独的规则，该规则在满足拒绝案例的特定条件时触发。

# maven - Maven代理与镜像

> ID：12602249
> 
> 赞同：9
> 
> 时间：2012-09-26T12:56:44.013
> 
> 标签：maven

我发现很难理解 settings.xml 中定义的镜像和代理之间的区别。我读到，无论定义的镜像是 mirrrorOf，对这些（mirrorOf）存储库的所有 http 请求都被对镜像的相应 http 请求覆盖。那么什么是代理呢？这个问题是在对我尝试使用 mvn archetype:generate 创建新项目时收到的以下错误进行故障排除之后出现的。

> 插件 'org.apache.maven.plugins:maven-archetype-plugin' 不存在或找不到有效版本

有什么帮助吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T13:33:59.730

[代理配置](http://maven.apache.org/guides/mini/guide-proxies.html)与您可能需要访问 Internet 的标准 HTTP 代理相关，例如 Web 浏览器中的代理。它与 Maven 功能本身无关，但与实现 Internet 连接有关。

如果您可以在没有代理的情况下使用浏览器，那么您可能也不需要 Maven，反之亦然。

另一方面，[镜像配置旨在用另一个替换 Maven 存储库。](http://maven.apache.org/guides/mini/guide-mirror-settings.html)它们与连接无关——它们改变了你的 Maven 试图达到的**目标。**

# perl - 如何在 Perl 中通过 SIGHUP 在 while(1) 之后跳转？

> ID：12602252
> 
> 赞同：3
> 
> 时间：2012-09-26T12:56:52.033
> 
> 标签：perl, loops, signals

我喜欢在后面跳`while(1)`。怎么做？**检查一个特殊变量`last`是不行的，因为 while 表达式包含一个*阻塞调用*，所以如果检查表达式就太晚了。**

```
#!/usr/bin/perl
use strict;
use warnings;
use feature qw( say );
use sigtrap 'handler', \&hup_handler, 'HUP';
my $counter = 0;
sub hup_handler { say 'HUP!!!'; $counter = 0; return; }
say 'It starts here';
while ( 1 ) {
    sleep( 1 ); # Blocking call is in reality within while expression.
    say ++$counter;
}
say 'It ends here'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T13:04:32.490

这应该可以通过在信号处理程序中抛出异常，也就是 die() 来实现。

所以尝试做这样的事情：

```
say 'It starts here';
eval {
    local $SIG{HUP} = sub { say 'HUP!!!'; $counter = 0; die "*bang*"; }

    while ( 1 ) {
        sleep( 1 ); # Blocking call is in reality within while expression.
        say ++$counter;
    }
}
say 'It ends here'; 
```

当然，任何提供看起来更正常的 try/catch 语法的模块都可以工作。

# javascript - 如何调用 jQuery 绑定的回调？

> ID：12602253
> 
> 赞同：0
> 
> 时间：2012-09-26T12:56:52.900
> 
> 标签：javascript, jquery

在这段代码中，触发器会调用 topbar.resize 还是只是简单地运行其中包含的函数？我假设两者之间存在上下文差异，或者它是如何工作的？

`jQuery.bind("hideBackstage", topbar.resize);`

**编辑：**我如何让它只是简单地调用topbar.resize？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:59:21.433

调用将相当于

```
topbar.resize.call(touchedElement, jqueryWrappedEvent); 
```

也就是说，“包含”的函数`topbar.resize`将使用接收者（`this`）调用已接收事件的元素，并使用参数调用事件（包装为 jquery 事件）。

这不同于

```
topbar.resize() 
```

因为

*   接收器 ( `this`) 不会`topbar`
*   事件作为参数提供

**编辑后编辑：**

如果您只想调用等效于`topbar.resize()`，只需执行以下操作：

```
jQuery.bind("hideBackstage", function(){topbar.resize()}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:59:31.497

您可以使用 jQuery 代理或

```
jQuery.bind("hideBackstage", function(){
    topbar.resize.apply(topbar, arguments); // seting context as topbar for resize.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:01:34.840

您可以使用`$.proxy()`（有趣的是类似于`Function.prototype.bind()`）。

```
jQuery.bind("hideBackstage", $.proxy(topbar.resize, topbar)); 
```

但是，您将无权访问该`event`对象。

# r - 通过部分匹配 R 中的行名来聚合数据框中的值

> ID：12602262
> 
> 赞同：0
> 
> 时间：2012-09-26T12:57:27.777
> 
> 标签：r, rowname

我正在解决以下问题，但没有成功：

```
d <- data.frame(value = 1:4, row.names = c("abc", "abcd", "ef", "gh"))
     value
abc      1
abcd     2
ef       3
gh       4

l <- nrow(d)
wordmat <- matrix(rep(NA, l^2), l, l, dimnames = list(row.names(d), row.names(d)))
for (i in 1:ncol(wordmat)) {
   rid <- agrep(colnames(wordmat)[i], rownames(wordmat), max = 0)
   d$matchid[i] <- paste(rid, collapse = ";") 
   }

# desired output:
(d_agg <- data.frame(value = c(3, 3, 4), row.names = c("abc;abcd", "ef", "gh")))
         value
abc;abcd     3
ef           3
gh           4 
```

有这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:07:14.380

这适用于您的示例，但可能需要针对实际情况进行调整：

```
d <- data.frame(value = 1:4, row.names = c("abc", "abcd", "ef", "gh"))
rowclust <- hclust(as.dist(adist(rownames(d))), method="single")
rowgroups <- cutree(rowclust, h=1.5)
rowagg <- aggregate(d, list(rowgroups), sum)
rowname <- unclass(by(rownames(d), rowgroups, paste, collapse=";"))
rownames(rowagg) <- rowname
rowagg
         Group.1 value
abc;abcd       1     3
ef             2     3
gh             3     4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:32:01.050

这是一个可能的解决方案，您可以对其进行修改以满足您的需求。

一些注意事项：

*   我不知道如何`rownames()`直接处理，特别是在最后阶段，所以这取决于你是否对将行名复制为新变量感到满意。
*   下面的函数“硬编码”变量名称、函数等。也就是说，*它绝不是一个广义函数*，而是当你进一步研究这个问题时可能有用的函数。

这是功能。

```
matches <- function(data, ...) {
  temp = vector("list", nrow(data))
  for (i in 1:nrow(data)) {
    temp1 = agrep(data$RowNames[i], data$RowNames, value = TRUE, ...)
    temp[[i]] = data.frame(RowNames = paste(temp1, collapse = "; "),
                           value = sum(data[temp1, "value"]))
  }
  temp = do.call(rbind, temp)
  temp[!duplicated(temp$RowNames), ]
} 
```

请注意，该函数需要一个名为 的列`RowNames`，因此我们将创建它，然后测试该函数。

```
d <- data.frame(value = 1:4, row.names = c("abc", "abcd", "ef", "gh"))
d$RowNames <- rownames(d)
matches(d)
#    RowNames value
# 1 abc; abcd     3
# 3        ef     3
# 4        gh     4
matches(d, max.distance = 2)
#            RowNames value
# 1         abc; abcd     3
# 3 abc; abcd; ef; gh    10
matches(d, max.distance = 4)
#            RowNames value
# 1 abc; abcd; ef; gh    10 
```

# sql-server-2008 - SQL - 使用 hh:mm:ss 将日期时间格式转换为 12 小时格式

> ID：12602276
> 
> 赞同：1
> 
> 时间：2012-09-26T12:58:14.050
> 
> 标签：sql-server-2008

我有一个像这样的查询，

```
SELECT CONVERT(VARCHAR, getdate(), 100) AS TwelveHH 
```

上述查询的输出是`Sep 26 2012 6:02PM`＆我想从上述查询中获取小时数，我将使用类似的查询，

```
SELECT RIGHT(CONVERT(VARCHAR, getdate(), 100), 7) AS getTime 
```

上述查询的输出是`6:02PM`.

但是，我想要像-格式这样的***秒输出。***`6:02:19PM``(hh:mm:ss)`

如何获得***hh:mm:ss***格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:13:16.377

几年前，我写了[这个方便的指南](http://databases.aspfaq.com/database/what-are-the-valid-styles-for-converting-datetime-to-string.html)，今天仍然对我有帮助 - 主要是因为我永远无法记住所有不同风格数字的含义：

```
SELECT LTRIM(RIGHT(CONVERT(CHAR(20), CURRENT_TIMESTAMP, 22), 11)); 
```

在我的时区，这将返回：

```
9:12:55 AM 
```

这并不是*您*想要的——您可以使用`REPLACE`，或者`STUFF`如果删除该空间真的很重要。例如

```
SELECT REPLACE(LTRIM(RIGHT(CONVERT(CHAR(20), CURRENT_TIMESTAMP, 22), 11)), ' ', ''); 
```

在 SQL Server 2012 中，您将能够更轻松地执行此操作 - 您可以使用 C# 的奇偶校验进行格式化：

```
SELECT FORMAT(CURRENT_TIMESTAMP, 'h:mm:ss tt'); 
```

**编辑**基于以下评论中的新要求和更改要求：

```
SELECT CONVERT(CHAR(11), CURRENT_TIMESTAMP, 109)
 + ' ' + LTRIM(RIGHT(CONVERT(CHAR(20), CURRENT_TIMESTAMP, 22), 11)); 
```

结果：

```
Sep 26 2012 10:03:52 AM 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:00:37.673

你应该做这个：

```
SELECT CONVERT(VARCHAR(10),GETDATE(),108) AS getTime 
```

# java - 观察者和线程

> ID：12602278
> 
> 赞同：3
> 
> 时间：2012-09-26T12:58:20.410
> 
> 标签：java, android

在我的 Android 应用程序中，我有一个`Observable` `Data`类，其中包含一个`download()`下载和解析一些数据的方法。完成后，它会通知其`Observer`s。

此外，我有一个`Activity`和一个`Service`。使用. 异步`Activity`调用`download()`方法`AsyncTask`。

`Service`不断需要侦听更新以进一步处理数据。这不应该发生在 UI 线程中。我创建了这个`Service`小类：

```
public class MyService extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {
        new MyWorkerThread().start();
    }

    private class MyWorkerThread extends Thread implements Observer{

        @Override
        public void run() {
            observeData();
        }

        private void observeData(){
            Data.getInstance().addObserver(this);
        }

            @Override
            public void update(Observable observable, Object data) {
               // In what thread does the code placed here run?
            }
    }
} 
```

现在，我的问题是：当类的`download()`方法`Data`通知它`Observer`的 s 时，该方法将在哪个线程中`update()`运行？这会在由`AsyncTask`创建的线程中`Activity`，这会阻止代码`onPostExecute()`在服务完成之前通过该方法吗？如果是这样，我最好每次都创建`MyService`一个`Observer`并创建一个新的？`MyWorkerThread`或者代码会在它自己的线程中运行`MyWorkerThread`吗？

我希望它是可以理解的，提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:29:01.707

答案就在这里

> 当 Data 类的 download() 方法通知其 Observers

在与方法相同的线程`update`中将被调用（这将与`download`方法运行在同一个线程中 - 据我所知，它会通知其观察者。

正如 zapl 发布的那样，`MyWorkerThread`在观察数据 ( `observeData();`) 后完成。

为了在不同的线程中运行，您应该编写如下内容：

```
private class MyWorkerThread extends Thread implements Observer{

    @Override
    public void run() {
        observeData();
    }

    private void observeData(){
        Data.getInstance().addObserver(this);
    }

        @Override
        public void update(Observable observable, Object data) {
            this.start(); //will execute observeData(); in a new thread
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:49:53.010

> 我想我最好在每次调用 notifyObservers 方法时创建一个新线程

你可以这样做，但你不必这样做。例如，使用一个单一的`HandlerThread`将完成相同的。此外，您不必处理并行运行的多个线程。

```
public class ObserverService extends Service {

    private Looper mLooper;

    private void onDataChanged() {
        // do whatever you need.
        // This is executed in a background thread.
    }

    @Override
    public void onCreate() {
        HandlerThread ht = new HandlerThread("ObserverService");
        ht.start();
        mLooper = ht.getLooper();
        final Handler handler = new Handler(mLooper) {
            @Override
            public void handleMessage(Message msg) {
                // executed in background HandlerThread
                onDataChanged();
            }
        };
        Observer observer = new Observer() {
            @Override
            public void update(Observable observable, Object data) {
                // this is executed in whatever thread notifies
                // enqueue max 1 messages.
                handler.removeMessages(1234);
                handler.sendEmptyMessage(1234);
            }
        };
        // register observer that send message to background thread.
        Data.getInstance().addObserver(observer);
    }

    @Override
    public void onDestroy() {
        mLooper.quit();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return Service.START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T19:40:18.880

```
 Executor executor = Executors.newCachedThreadPool();
    Observer<MyData> observer = data -> executor.execute(() -> onMyDataChanged(data));
    MyData.getInstance().observeForever(observer); 
```

# mvvm-light - Blend4 的“EventToCommand”行为

> ID：12602281
> 
> 赞同：0
> 
> 时间：2012-09-26T12:58:25.617
> 
> 标签：mvvm-light, expression-blend-4

我已经安装了 Blend4。昨天我安装了 mvvmlight。但是我还没有发现我的 Blend4 有“EventToCommand”的行为。这对我的项目非常重要。那么如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:10:39.947

[可以在此处](http://blog.galasoft.ch/archive/2009/11/05/mvvm-light-toolkit-v3-alpha-2-eventtocommand-behavior.aspx)找到将 EventToCommand 添加到 Blend 的说明。只需向下滚动页面，直到您看到“功能、用法：在 Expression Blend 中”。

如果您已经安装了 MVVM-Light Toolkit，如您所说，只需右键单击 Blend 中的“参考”文件夹，然后单击“添加参考”。浏览您的 GalaSoft.MvvmLight.dll 文件并按 OK。对以下 dll 重复此过程：

GalaSoft.MvvmLight.Extras.dll

System.Windows.Interactivity.dll *（包含所有行为的基本代码，因此您可能已经对此有参考）*

# javascript - 选择写入由循环创建的文本输入框中的值

> ID：12602286
> 
> 赞同：1
> 
> 时间：2012-09-26T12:58:50.793
> 
> 标签：javascript, html, forms, web

当他们选择了他们需要的数量时，我无法选择制作的唯一文本框。它创建了两个文本输入框，一个用于宽度，一个用于长度。一旦他们创建了他们需要的数量，我想选择他们输入到这些框中的数据，但我不确定如何执行此操作。我尝试在创建文本输入时将值添加到“名称”，但无法弄清楚。任何帮助将不胜感激。

Javascript：

```
function processSplashbacks() {

var splashbacks = document.worktopForm.splashbacks.value;           
var splashbackInfo = '<label> Length: </label><input type="text" id="length' + t + '" value="0"/>(cm)<br /><label> Width: </label><input type="text" name="width' + t + '" value="0"/>(cm)';

for (var t = 1; t <= splashbacks; t++){
    document.getElementById("splashWidLen").innerHTML += 'Splashback ' + t + ' dimensions' + splashbackInfo;
} }

function calculate() {
    var lengthOne = document.worktopForm.splashWidLen.length1.value;
    document.worktopForm.getElementById("quote").innerHTML += lengthOne;
} 
```

HTML：

```
<form name="worktopForm">

<select name="worktops">
    <option value="1" selected>1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select>

<input type="button" value="Add Splashbacks" onClick="processSplashbacks()"/>

<div id="splashWidLen"></div><br/>

<input type="button" value="Calculate quote" onClick="calculate()"/><br/>

<div id="quote"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:14:24.677

您如何看待使用[CoffeeScript](http://coffeescript.org)和[JQuery](http://jquery.com/)？

```
@addInfo = (splashback) ->
    $("#splashWidLen").append("Splashback #{splashback} dimensions <label> Length: </label><input type='text' id='length#{splashback}' value='0'/>(cm)<br /><label> Width: </label><input type='text' name='width#{splashback}' value='0'/>(cm)<br>")

@processSplashbacks = () -> 
    count = $("select[name='worktops']").val()
    addInfo splashback for splashback in [1..count] 
```

[JSFiddle 上的工作代码示例](http://jsfiddle.net/Wp7hF/)。

# vba - VBA项目国际化的最佳方式

> ID：12602288
> 
> 赞同：0
> 
> 时间：2012-09-26T12:58:58.847
> 
> 标签：vba, translation

我开发了相当复杂的 Excel VBA 应用程序（数千行代码分布在模块、类模块和表单模块中）。需要将其翻译成多种语言，这意味着替换（几乎）应用程序中的所有字符串，并使用某种带有每种语言记录的哈希表。

我的问题是收集应用程序中使用的所有字符串并用某种语言变量替换它们的最有效和最方便的方法是什么。有人可以为 VBA 项目环境的此类任务推荐某种最佳实践吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:49:22.287

一种选择是使用[源工具插件](http://www.codeproject.com/Articles/18029/SourceTools-xla)将所有代码导出到一个文件夹下的源文件中。下面的例子： ![源文件](../Images/e1522999dd60222e583c3d9130355ff0.png)

现在您可以编写脚本来修改文件，并且现在您可以将它们置于源代码控制中。完成后，您可以将它们重新导入到具有更改的 VBA 项目中。

# javascript - 如何防止 JavaScript 在 location.replace() 中对查询字符串进行编码？

> ID：12602289
> 
> 赞同：1
> 
> 时间：2012-09-26T12:59:06.403
> 
> 标签：javascript, query-string, url-encoding, location-href

我通过 Django 在我的 HTML 模板中打印了一个已经编码的 URL 字符串。当我将它放在对 location.replace() 的调用中时，它会被一些 JavaScript 破坏，这些 JavaScript 破坏`=`并且`%`已经存在于查询字符串中，导致后续 URL（在我的域之外）不知道如何处理它。

如何防止 JavaScript 改变它？

编辑：示例网址字符串：

```
'http://destination.com/?name=https%3A%2F%2Fexample.com%2F&nextparam=nextvalue' 
```

将上面传递到 location.replace() 会导致重定向到：

```
http://destination.com/?name%3Dhttps%253A%252F%252Fexample.com%252Fnextparam=nextvalue 
```

这显然是不正确的。

URL 具有作为其查询字符串参数之一的 URL。从 Django 传递的安全编码字符来自字符串 ':/' 中的字符集，因此基本上可以正确编码' [http://example.com/ '。](http://example.com/)美好的。'=%&' 都是查询字符串中未触及的部分。

在我在 js 之外工作的编码字符串中（例如在锚标记 href 中），它链接到正确的 url。

但是，当我将它放在 window.location 中时，它会在重定向时转义查询字符串中的所有字符并出于某种原因删除 '&' - 甚至是用于对 qs 中的原始 URL 参数进行编码的 '%'。检查来源显示该字符串与上面的 a 标签中的字符串相同。

无论如何，在重定向之前是否可以防止 javascript 位置属性转义内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:15:15.917

考虑在使用它调用之前解码查询字符串`location.replace()`。

您可以使用内置[`decodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)函数执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:07:55.653

您应该在使用它调用之前解码查询字符串`location.replace()`。

~~JavaScript 没有用于编码/解码字符串的内置方法，但~~有一个名为 php.js 的库可以为您提供帮助。[有关解码 url 的功能，请参阅此链接](http://phpjs.org/functions/urldecode:572)。该库得到广泛支持。

# spotify - Spotify：将应用程序放在哪里？

> ID：12602294
> 
> 赞同：1
> 
> 时间：2012-09-26T12:59:24.570
> 
> 标签：spotify

我有一个 Spotify 开发者帐户，这也显示在 Spotify 客户端中。但是，我的测试应用程序有问题。我刚刚从 Spotify 开发页面复制了教程应用程序。

在`Program files\Spotify`我放入`tutorial`包含应用程序文件的文件夹中。我也做了这个目录：`Libraries\My Dokuments\Spotify\tutorial\`

这没有用。搜索 spotify:app:tutorial 时出现元数据错误并且“找不到此应用程序”。将“t”更改为“T”（大写 T 教程）时，我没有收到“找不到”消息，但什么也没发生。此外，我在“永远加载”时收到消息“metadatastarted”。

我试过这条路：`Users\P45\AppData\Local\Spotify\tutorial`

这没有帮助。

这些是我创建的目录：

*   `Libraries\My Dokuments\Spotify\tutorial\`
*   `Program files\Spotify\tutorial\`
*   `Users\P45\AppData\Local\Spotify\tutorial\`

**有什么建议么？**

（另外，我应该提供更多信息？其他更改？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:09:36.250

在您的 %USERPROFILE% 文件夹中创建“My Documents\Spotify”（您应该已经有“我的文档”，假设它是英文窗口，所以只需在其下创建“Spotify”），然后创建您的应用程序文件夹“tutorial”那里。那是您的文件应该驻留的位置。

请注意，%USERPROFILE% 可能不指向“库”文件夹。

但是，元数据错误表明您的应用程序可能也有错误，而不仅仅是您的文件夹路径......如果可能的话，也发布您的 manifest.json 和 index.html 文件来解决这个问题。

[这](https://github.com/eis/Spotify-Customscrobbler/tree/master/customscrobbler)是我之前制作的一个简单应用程序，您可以从那里查看最基本的元数据内容以及[说明](https://github.com/eis/Spotify-Customscrobbler/wiki)。为了完整起见，[这](https://developer.spotify.com/technologies/apps/guidelines/integration/)是指向 Spotify 提供的官方说明的链接。

# mysql - Mysql 使用 SELECT CONCAT 结果作为同一查询中的条件

> ID：12602304
> 
> 赞同：0
> 
> 时间：2012-09-26T12:59:50.903
> 
> 标签：mysql, sql, select, concat

我正在尝试使用此查询，我需要在比较之前连接一个字符串以获得正确的结果。查询正在运行，但未找到任何结果。我相信问题出在我尝试比较`WHERE`子句中的“myname”时。知道什么是正确的查询吗？

```
SELECT * 
FROM (SELECT CONCAT('tm_',name) AS myname FROM room) room, users
WHERE user_name = myname; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:03:31.527

为什么不

```
SELECT * FROM users,room where user_name=concat('tm_',name); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:02:14.513

试试这个

```
SELECT *
FROM 
(
   SELECT CONCAT('tm_',name) AS myname 
   FROM room
) t
WHERE user_name = myname 
```

可能你需要像这样`JOIN`的另一个表`users`：

```
SELECT *
FROM 
(
   SELECT CONCAT('tm_',name) AS myname 
   FROM room
) t
INNER JOIN users u ON ... --some join condition
WHERE user_name = myname 
```

**或者：**

```
SELECT *
FROM 
(
   SELECT CONCAT('tm_',name) AS myname 
   FROM room
) t, users
WHERE t.user_name = myname" 
```

# android - 是否可以将“向上”图标更改为文本（ActionBarSherlock）？

> ID：12602311
> 
> 赞同：0
> 
> 时间：2012-09-26T13:00:16.963
> 
> 标签：android, actionbarsherlock

是否可以将操作栏“向上”图标更改为按钮（文本 + 背景图像，如 iOS 上的后退按钮），这样我就可以更改标题？

我知道我可以使用自己的图标，但我需要以编程方式更改按钮标题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:05:30.703

你应该使用[setDisplayShowHomeEnabled(false)](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowHomeEnabled%28boolean%29) 然后你的按钮和自定义标题`getActionBar().setCustomView(v);`在哪里。`View v`我认为只有这种方式。

# iphone - UIWebView 没有加载 url

> ID：12602313
> 
> 赞同：0
> 
> 时间：2012-09-26T13:00:18.943
> 
> 标签：iphone, ios, ipad

我知道这是一个常见问题，但没有一个答案能解决我的问题。我的应用程序中有一个 UIWebView。我已经正确设置了一切；委托已设置，webView 是我的视图控制器的属性。它被设置为在加载 viewController 时加载一个 html 字符串。当 html 字符串加载时，在 webViewDidFinishLoad 方法中它检查这是否是它第一次加载，如果是它被告知加载带有 url 的请求。我用于 url 的字符串是我的 viewController 的一个属性。该字符串正是它应该是的。只是有些东西阻止了 webView 实际加载请求。任何想法将不胜感激。谢谢

```
 @interface WebViewController : UIViewController <UIWebViewDelegate, UIActionSheetDelegate, UIPrintInteractionControllerDelegate, MFMailComposeViewControllerDelegate, NSURLConnectionDelegate>

@property (nonatomic, assign) BOOL firstLoad;
@property (nonatomic, retain) UIWebView *webView;
@property (nonatomic, retain) NSString *prefixURLString;
@property (nonatomic, retain) NSString *suffixURLString;
@property (nonatomic, retain) UIActionSheet *actionSheet;

- (id)initWithTitle:(NSString *)newTitle andSuffixURL:(NSString *)suffix;
- (void)reload;
- (void)addActionButton;
- (void)showActions:(UIBarButtonItem *)sender;
- (void)dismissActionSheet;

@end

@implementation WebViewController

@synthesize webView;
@synthesize prefixURLString;
@synthesize suffixURLString;
@synthesize firstLoad;
@synthesize actionSheet;

- (id)initWithTitle:(NSString *)newTitle withPrefixURL:(NSString *)prefix andSuffixURL:(NSString *)suffix
{
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        // Custom initialization
        [self setPrefixURLString:prefix];
        [self setFirstLoad:YES];
        [self setTitle:newTitle];
        [self setSuffixURLString:suffix];
        [self setActionSheet:nil];
    }
    return self;
}

- (id)initWithTitle:(NSString *)newTitle andSuffixURL:(NSString *)suffix
{
    return [self initWithTitle:newTitle withPrefixURL:@"https://customer.stld.com/flatroll/ios/%@" andSuffixURL:suffix];
}

- (void)reload
{
    if(self.prefixURLString && self.suffixURLString)
    {
        NSString *fullURLString = [NSString stringWithFormat:self.prefixURLString, [self.suffixURLString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:fullURLString]]];
    }
}
- (void)dealloc
{
    [suffixURLString release]; suffixURLString = nil;
    [prefixURLString release]; prefixURLString = nil;
    [actionSheet release]; actionSheet = nil;
    [super dealloc];
}

- (void):(UIWebView *)aWebView didFailLoadWithError:(NSError *)error
{
    //NSLog(@"WebViewController:DidFailLoadWithError: %@", [error localizedFailureReason]);
    [self setTitle:@"Loading Error"];
    [self.webView loadHTMLString:[NSString stringWithFormat:@"<html><head><meta name=\"viewport\" content=\"width=device-width, user-scalable=yes\" /></head><body>Loading error:<br />%@</body></html>", [error localizedFailureReason]] baseURL:nil];
}

- (void)webViewDidFinishLoad:(UIWebView *)aWebView
{
    if(self.firstLoad)
    {
        [self setFirstLoad:NO];
        [self reload];
        [self addActionButton];
    }
}

#pragma mark - View lifecycle

- (void)loadView
{
    UIWebView *newWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
    [newWebView setDelegate:self];
    [newWebView setScalesPageToFit:YES];
    [newWebView setUserInteractionEnabled:YES];
    [self setWebView:newWebView];
    [self setView:newWebView];
    [newWebView release];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.webView loadHTMLString:@"<html><head><meta name=\"viewport\" content=\"width=device-width, user-scalable=yes\" /></head><body><br />Gathering data and generating report.<br />Depends on data and parameters you have requested, this could take time.  Please wait...</body></html>" baseURL:nil];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    [self.webView setDelegate:nil];
    [self setWebView:nil];
    [self setView:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:05:34.183

我有同样的问题，我不完全确定为什么，但我想它必须与 viewControllers 生命周期有关。无论如何尝试在 viewDidAppear 方法中加载 URL。它为我修好了。希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:53:58.280

事实证明，我的问题与`UIWebView`. 我只需要更改`URLConnectionDelegate`为我的应用程序设置的凭据持久性。我将其设置为，`NSURLCredentialPersistanceNone`但我将其更改为`NSURLCredentialPersistenceSession`. 我希望这可以帮助像我一样遇到确切问题的其他人

# java - Spring MVC 控制器将什么发送回 jQuery get/post 调用？

> ID：12602315
> 
> 赞同：1
> 
> 时间：2012-09-26T13:00:23.850
> 
> 标签：java, javascript, jquery, ajax, spring-mvc

当我将 Spring MVC 与“传统”（非 AJAX，每次单击按钮后页面重新加载）网站/应用程序一起使用时，我通常定义一个控制器：

```
@RequestMapping(value = "/someURL", method = RequestMethod.POST)
public ModelAndView updateThreshold(@RequestParam("x") String whatever) {

    ModelAndView mav = new ModelAndView();
    max.setView("someView");

    // Inject some models into the view.

    return mav;
} 
```

然后我编写一个 JSP 视图 ( `someView.jsp`) 并让它使用控制器“注入”的 Spring 标签/模型。

但是使用 jQuery，您会触发 GET/POST 请求，并期望简单地更新 DOM 的某些部分。我想知道两件事：

*   `mav.setName(...)`使用 jQuery，Spring MVC 控制器设置（ ）并返回什么“视图” ？换句话说，没有新的“视图”，因为它是对同一页面/视图的 AJAX 调用。jQuery 结果只需要更新现有的页面/视图。
*   如果存在服务器端错误（即，有些错误`@RequestParam`具有非法值），MVC 控制器如何返回 jQuery 可以使用并显示给最终用户的错误消息？

我是一个视觉学习者，因此*非常*感谢代码片段（客户端 jQuery 和服务器端控制器/视图）！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:09:25.380

Spring MVC 不关心请求是“传统”请求还是 AJAX 请求。除了一些潜在的附加标头外，两种类型的请求完全相同。

因此，如果您需要使用 AJAX 请求刷新页面的一部分，您将使用控制器，就像您对“传统”页面所做的那样，然后转发到一个视图，该视图为页面的一部分生成标记必须刷新。`<html>`因此，视图不会生成完整的 HTML 页面 from to ，而是`</html>`只会生成页面的一部分。

您还可以发送使控制器返回 HTML 标记以外的内容：例如 XML 或 JSON。在这种情况下，将由处理响应的 JavaScript 函数使用接收到的数据并更新页面 DOM。

错误的处理方式与“传统”请求的处理方式完全相同。例如，如果出现`500`错误，则由处理 AJAX 响应的 JavaScript 代码来做它认为合适的事情。例如，显示警报弹出窗口或类似的东西。

# extjs - 如何获取 ExtJS 商店中某个字段的 sortType？

> ID：12602316
> 
> 赞同：0
> 
> 时间：2012-09-26T13:00:28.407
> 
> 标签：extjs, extjs3

如何获取 ExtJS 商店中某个字段的 sortType？

这不起作用：

```
var sortType = myStore.fields.get('MyFieldName').sortType; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:46:35.123

当您将字符串作为 sortType 传递时，它会在 Ext.data.Field 的构造函数中转换为函数，因此您需要将该函数与可用的 sortTypes 进行比较以获得正确的 sortType 字符串

```
var sortTypeFn = myStore.fields.get('MyFieldName').sortType;
var sortType = '';
Ext.iterate(Ext.data.Types, function(key, obj) {
      if(obj.sortType == sortTypeFn) {
           sortType = key;
           return false;
      }
});
console.log(sortType); 
```

# php - CodeIgniter 显示意外错误

> ID：12602320
> 
> 赞同：0
> 
> 时间：2012-09-26T13:00:38.070
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter v1.0 来处理我的 PHP 应用程序。昨天，在 localhost 上运行它，一切正常，但今天 CI 的日志中出现了许多错误。这里有些例子：

```
Severity: Notice
Message: Trying to get property of non-object
Filename: helpers/functions_helper.php
Line Number: 515 
```

* * *

```
Severity: Warning
Message: implode(): Invalid arguments passed
Filename: controllers/reports.php
Line Number: 102 
```

* * *

```
Severity: Notice
Message: Undefined variable: carray
Filename: controllers/reports.php
Line Number: 103 
```

* * *

什么可能导致这些错误出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:29:56.707

首先，CodeIgniter 1 真的很老了。您应该至少升级到 2.1。我会升级到[CodeIgniter 3](https://github.com/EllisLab/CodeIgniter)。

不管怎样，在你的 index.php 文件中，有一行看起来像这样

```
error_reporting(E_ALL); 
```

您需要将其更改为

```
error_reporting(0); 
```

当你去生产。

# winforms - 从基本表单访问连接字符串会导致设计器错误

> ID：12602326
> 
> 赞同：2
> 
> 时间：2012-09-26T13:00:51.683
> 
> 标签：winforms, visual-studio-2010, inheritance, app-config, windows-forms-designer

我有一个 vb.net **windows 窗体**应用程序，我在其中使用 windows 窗体的继承。我有一个基本表单，它提供了一些将与所有继承表单一起使用的基本布局和方法。**这包括在基本表单构造函数**中初始化实体框架上下文。

```
Dim dataContext As New CCEntities() 
```

然后子窗体可以使用此上下文。应用程序编译并运行没有错误，但是当我尝试在设计器中查看子窗体时，显示错误，说明“**在配置中找不到指定的命名连接，不打算与 EntitlyClient 提供程序一起使用，或无效。** ” 如果我将该初始化行移到子表单构造函数中，则设计器将正确显示。

为了解决这个问题，我在初始化时在基本表单构造函数中指定了连接字符串：

```
Dim dataContext As New CCEntities(System.Configuration.ConfigurationManager.ConnectionStrings.Item("CCEntities").ConnectionString) 
```

将该引用添加到连接字符串后，子窗体现在显示“**对象引用未设置为对象的实例。** ”

但是，如果我将实体连接字符串硬编码到该初始化行中，则设计器可以正常工作。

**基本表单似乎无法访问 app.config 文件。如何让基本表单正确访问 app.config 文件并使设计器正常工作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:03:20.920

您需要做的是在“设计时间”中阻止代码运行。

```
if(System.ComponentModel.LicenseManager.UsageMode != System.ComponentModel.LicenseUsageMode.Designtime)
{
     //do connection stuff here
} 
```

# html - LI 标记内的段落文本

> ID：12602327
> 
> 赞同：-2
> 
> 时间：2012-09-26T13:00:54.620
> 
> 标签：html, css, css-float

我将段落包装在 LI 标记内，即使我为 Li 设置了特定宽度（例如：200px），文本也不会被包装并以单行显示并跨越 LI。有什么建议可以换行以适应宽度吗？

示例文本

```
 <UL>
 <LI>
 <p>hi hello welcome</p>
 </LI>
 </UL> 
```

我试图添加 word-wrap: break-word; 这似乎解决了宽度问题，但没有做正确的自动换行

它显示为

```
hi hello wel
come 
```

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:30:26.003

word-wrap：断词；是一个 CSS3 规则，如果你依赖这个，那么我非常有信心它会在旧浏览器中出现问题，从我读过的内容来看，我会尝试将宽度应用于段落标签而不是 li，或者同时添加宽度对于 li 和 p 标签，还可以尝试将 display: block 添加到 p 标签。

# iphone - 应用程序仅在从商店下载时崩溃 - 现在如何测试错误修复？

> ID：12602333
> 
> 赞同：0
> 
> 时间：2012-09-26T13:01:23.513
> 
> 标签：iphone, xcode, debugging, ios6

我在 appstore 中有一个应用程序，它在 iOS6 之前运行良好。

它在那里崩溃 - 但只有从商店下载时。当它通过 xCode 安装时，没有崩溃。

当我在 Organizer 中阅读崩溃报告时，我得到了以下信息：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x32b6f526 objc_retain + 6
1   XXXX                            0x000cefd8 -[XXXX messageComposeViewController:didFinishWithResult:] (XXXX.m:96)
2   CoreFoundation                  0x348659c0 __invoking___ + 64
3   CoreFoundation                  0x347bcfe6 -[NSInvocation invoke] + 282
4   CoreFoundation                  0x347bcb3e -[NSInvocation invokeWithTarget:] + 46
5   UIKit                           0x35f89324 -[_UIObjectArgumentReplacingProxy forwardInvocation:] + 300
6   CoreFoundation                  0x34864616 ___forwarding___ + 622
7   CoreFoundation                  0x347bbf64 _CF_forwarding_prep_0 + 20 
```

所以我假设它是文件中的第 96 行。

这是代码：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {
    [self dismissModalViewControllerAnimated:NO]; //take away the SMS screen fast

    NSString *sms = controller.body;  //**** THIS IS LINE 96

    switch (result)
    {
        case MessageComposeResultCancelled:
            //message.text = @"Canceled";
            NSLog(@"Result: canceled");
            break;
        case MessageComposeResultSent: {
                   NSLog(@"Result: sent %@",sms);
            }
            break;
        case MessageComposeResultFailed:
            //message.text = @"Failed";
            NSLog(@"Result: failed");
            break;
        default:
            //message.text = @"Not sent";
            NSLog(@"Result: not sent");
            break;
    }

    [self.delegate myVCDidFinishWithValue: val];

} 
```

所以基本上我在这种情况下我只是取出完整的代码，因为我不再需要它了。

我的问题：

**现在有没有办法像从 AppStore 加载一样测试应用程序，以便我检查其他问题？**

还是我现在赌博并希望错误消失？

ps 当我通过 xCode 安装应用程序时 - 甚至使用 TestFlight 分发给测试人员它工作正常！只有从 Appstore 才会崩溃。知道他们是否对代码做任何事情吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:48:20.463

我认为您应该在方法的底部将其关闭。--- 安装：您可以在管理器中将存档（并为企业存储）的 ipa 拖到您的设备上。

（详情看评论）

# ruby-on-rails - database.yml 代理？或同等学历？

> ID：12602334
> 
> 赞同：3
> 
> 时间：2012-09-26T13:01:27.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3, proxy

我正在寻找一种在一个网络上运行 Rails 服务器的方法，该网络由不同网络上的数据库驱动，两者都由代理服务器分隔。我有代理服务器 URL。

我有通过 MySQL 数据库网络的外部 IP 地址连接的 Rails 服务器，通过 3306 上的端口转发，因此如果我不在代理后面，则可以很好地在网络之间连接。设置代理是问题

网络拓扑结构：

```
{rail server} -> {proxy server controls all external traffic} -> {mysql database} 
```

我希望我可以在 database.yml 文件中添加这样的内容（参见代理部分）->

```
development:
  adapter: mysql2
  database: users
  username: root
  password: ***
  host: *ip-address*
  port: 3306
  proxy: *proxy-url* 
```

这不起作用。有没有办法做我想做的事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-20T14:51:47.613

尝试这样的事情。

主机：主机名。(xyz.com)

端口：80（或其他）

代理主机：ABC.lan.flt

proxy_port：3122（代理的端口是什么）

除了这个用户名密码适配器数据库名称也是必需的。

# jquery - jQuery拆分/替换部分URL

> ID：12602336
> 
> 赞同：1
> 
> 时间：2012-09-26T13:01:29.487
> 
> 标签：jquery, url, replace, split

我有这个网址

`http://9001/transactions`

我有需要更改网址的按钮，例如

```
http://9001/transactions?type=all
http://9001/transactions?type=confirmed
http://9001/transactions?type=unconfirmed 
```

交易后我将如何替换字符串。我有点击功能，只需要知道在里面放什么。

url 会改变，所以这不能依赖于交易之前的任何东西（如果有意义的话）。抱歉，如果问题含糊不清，但急于完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:09:07.253

您可以构建一个函数来更改 GET 参数...

```
var updateGetParam = function(key, value) {

    window.location.search = window.location.search.replace(new RegExp("([?&;])" + key + "=.*?(&|;|$)"), "$1" + key + "=" + encodeURIComponent(value) + "$2");

} 
```

[js小提琴](http://jsfiddle.net/JchAU/)。

您应该首先通过正则表达式转义函数运行用户输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:18:40.403

我写了一个函数来完成这个，它重新加载当前页面，并且完全支持更改现有的 url 变量（以及添加新变量）。您所要做的就是将对象文字传递给函数。见这里：[https ://stackoverflow.com/a/10235376/733347](https://stackoverflow.com/a/10235376/733347)

在你的情况下，你需要做的就是调用函数

```
reloadWithQueryStringVars({"type": "all"}); 
```

或者

```
reloadWithQueryStringVars({"type": "confirmed"}); 
```

或者

```
reloadWithQueryStringVars({"type": "unconfirmed"}); 
```

关于按钮的点击事件

这是整个函数供参考：

```
function reloadWithQueryStringVars (queryStringVars) {
    var existingQueryVars = location.search ? location.search.substring(1).split("&") : [],
        currentUrl = location.search ? location.href.replace(location.search,"") : location.href,
        newQueryVars = {},
        newUrl = currentUrl + "?";
    if(existingQueryVars.length > 0) {
        for (var i = 0; i < existingQueryVars.length; i++) {
            var pair = existingQueryVars[i].split("=");
            newQueryVars[pair[0]] = pair[1];
        }
    }
    if(queryStringVars) {
        for (var queryStringVar in queryStringVars) {
            newQueryVars[queryStringVar] = queryStringVars[queryStringVar];
        }
    }
    if(newQueryVars) { 
        for (var newQueryVar in newQueryVars) {
            newUrl += newQueryVar + "=" + newQueryVars[newQueryVar] + "&";
        }
        newUrl = newUrl.substring(0, newUrl.length-1);
        window.location.href = newUrl;
    } else {
        window.location.href = location.href;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:10:58.517

看看这段代码是否适合你：

```
var href = window.location.href;

// This assumes the value of your button is the action and each
// button has the class button applied. Modify as necessary
$('.button').click(function (event) {
    if (href.lastIndexOf('?') !== -1) {
        href.replace(/\?(.*)/, '?type=' + $(this).val());
    } else {
        href += '?type=' + $(this).val();
    }
    window.location.href = href;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:20:10.950

一个非常粗略的解决方案，但更容易理解和实施，看看它是否有帮助

```
var url = "http://9001/transactions?type=unconfirmed"; //in live environment, replace with var url = window.location.href;
var urlArray = url.split('?');
var urlArrayLength = url.split('?').length;

urlArray[urlArrayLength - 1] = "type=newValue";

url  = urlArray.join('?');

alert(url) 
```

# delphi - 与 openssl 兼容的 AES 库

> ID：12602337
> 
> 赞同：0
> 
> 时间：2012-09-26T13:01:31.323
> 
> 标签：delphi, openssl

我有一个 linux c++ 服务器应用程序女巫发送 AES128 加密字符串。应用程序使用的库是开放 SSL。

是否有任何 delphi 库可用于加密需要发送到服务器的数据。我找到了一个单元，但服务器和客户端之间的数据不正确。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:31:03.873

正确获取密钥、IV 和参数通常是最困难的部分。

我从 Windows 上的 Delphi 2007 中的[Delphi Encryption Compendium](http://code.google.com/p/delphidec/)获得了 AES 实现，可以轻松地加密/解密来自 AS/400 的内容。

您可以遵循的另一条路线是[在 Windows 上使用 OpenSLL 二进制文件并在它们周围使用 Delphi 包装器](https://stackoverflow.com/questions/9723963/delphi-pascal-example-for-calling-openssl-evp-functions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:30:19.600

[TurboPower Lockbox 3](http://lockbox.seanbdurkin.id.au/tiki-index.php)包含 OpenSSL，但我之前从未真正使用过它。

![在此处输入图像描述](../Images/4dfaaa4fe0ffdd0c440f6918bf825887.png)

# php - Phalcon，pdo_mysql，在保存数据时无法处理重复条目

> ID：12602341
> 
> 赞同：3
> 
> 时间：2012-09-26T13:01:46.157
> 
> 标签：php, phalcon

我有一个具有唯一列约束的数据库，我从旧数据库中插入行，而这个约束不存在。

我想确定导致问题的行，现在因为它的开发数据没有问题，但是当系统投入生产时，我想要对重复输入错误进行通用处理。

现在我得到一个没有有用信息的 \Phalcon\Db\Exception （异常代码为 0，异常消息只是查询，而不是 / 重复错误），这意味着我无法检测到 mysql 1062 重复错误代码。

如果我可以使用 Phalcon_DUP_ERR 之类的异常代码或其他内容捕获 \Phalcon\Db\Exception 以识别发生了 1062 mysql 错误，那么这就是我想要做的，但只是不知道如何做。

我在这里做错什么了吗，尝试浏览 Phalcon 文档，但找不到任何有关处理 mysql 错误的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:48:52.513

在 0.5.0 中，异常的错误模式是 ERRMODE_SILENT。该模式不太有用，一些错误会突然消失（甚至是警告）。在 0.5.1 中，错误模式更改为 ERRMODE_EXCEPTION，这将为您提供更好的信息。

# sql - 查找所有不是父母的孩子

> ID：12602342
> 
> 赞同：4
> 
> 时间：2012-09-26T13:01:50.027
> 
> 标签：sql, sql-server, sql-server-2012

我正在尝试检索所有不是父母的孩子。

桌子看起来像这样

```
ID  |  ParentID
---------------
1        NULL
2         1
3        NULL
4         2 
```

一开始我试过

```
SELECT *
FROM [SMD].[dbo].[ProposalFollowUp]
WHERE ID NOT IN (SELECT ParentID FROM [SMD].[dbo].[ProposalFollowUp]) 
```

但它不返回任何行。我想选择所有不在 parentID 中的行。我不明白为什么它不起作用。

然后我尝试了这个

```
SELECT *
FROM [SMD].[dbo].[ProposalFollowUp] AS a
WHERE a.ID NOT IN 
(SELECT b.ID FROM [SMD].[dbo].[ProposalFollowUp] as b WHERE b.ParentID = a.ID) 
```

但这会返回所有行

任何人都可以告诉我我错过了什么

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T13:07:11.960

Using`not in`暴露了一个众所周知的 SQL 怪癖：

```
WHERE ID NOT IN (SELECT ParentID FROM [SMD].[dbo].[ProposalFollowUp]) 
```

要了解原因，请扩展查询：

```
WHERE ID NOT IN (null, 1, null, 2) 
```

这转化为：

```
where id <> null and id <> 1 and id <> null and id <> 2 
```

诀窍是这`id <> null`永远不是真的。在 SQL 的[三值逻辑](http://en.wikipedia.org/wiki/Three-valued_logic)中，它的计算结果为`unknown`。这意味着您的 where 子句永远不会批准任何行。

要解决此问题，请使用`exists`（如 Tim Schmelter 的回答），或`null`从子查询中排除：

```
WHERE ID NOT IN (
    SELECT ParentID FROM [SMD].[dbo].[ProposalFollowUp] WHERE ParentID IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T13:05:30.107

您可以使用`NOT EXISTS`：

```
SELECT ID, ParentID 
FROM [SMD].[dbo].[ProposalFollowUp] t1
WHERE NOT EXISTS
(
   SELECT 1 FROM [SMD].[dbo].[ProposalFollowUp] t2
   WHERE t2.ParentID = t1.ID
) 
```

这仅返回`ID`不在`ParentID`另一行中的行。因此，这不是父母。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:04:08.767

```
SELECT *
FROM [SMD].[dbo].[ProposalFollowUp]
WHERE ID NOT IN (SELECT ParentID FROM [SMD].[dbo].[ProposalFollowUp] WHERE ParentID  IS NOT NULL) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T13:08:01.373

> 为什么它不起作用。

您没有从第一个查询中检索任何行：

```
SELECT *
FROM [SMD].[dbo].[ProposalFollowUp]
WHERE ID NOT IN (SELECT ParentID FROM [SMD].[dbo].[ProposalFollowUp]) 
```

由于谓词的`NULL`值变得因此不返回任何内容，您可以通过使用来避免这种情况：`ParentID``UNKNOWN``NOT EXISTS`

```
SELECT *
FROM [SMD].[dbo].[ProposalFollowUp]
WHERE NOT EXISTS (SELECT ParentID FROM [SMD].[dbo].[ProposalFollowUp]) 
```

与 SQL 中的所有其他谓词不同，它`NOT EXISTS`适用于两个值逻辑`TRUE`，并且`FALSE`因为该值只有两个概率存在（ture）或 false，所以无法返回`UNKNOWN`。

还有另一种解决方法，在你的情况下不会得到你正在寻找的东西，也就是说，通过`NULL`使用消除这些值，`AND ParentID IS NOT NULL`但在你的情况下不会得到你正在寻找的结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:16:49.687

如果您只想要孩子（不是父母）的 ID，您还可以使用`EXCEPT`：

```
SELECT ID
FROM [SMD].[dbo].[ProposalFollowUp]

EXCEPT

SELECT ParentID
FROM [SMD].[dbo].[ProposalFollowUp] ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T13:21:17.750

替换 = on <>

```
SELECT *
FROM [SMD].[dbo].[ProposalFollowUp] AS a
WHERE a.ID NOT IN 
(SELECT b.ID FROM [SMD].[dbo].[ProposalFollowUp] as b WHERE b.ParentID <> a.ID) 
```

# jquery - 在同一页面上乘以尾声滑块

> ID：12602343
> 
> 赞同：0
> 
> 时间：2012-09-26T13:01:52.353
> 
> 标签：jquery, html, css, jquery-plugins, coda-slider

我一直在为我当前的项目使用 Kevin Batdorf ( [http://www.ndoherty.biz/coda-slider ) 的 jQuery Coda-Slider v2.0。](http://www.ndoherty.biz/coda-slider)

现在我想在同一页面上添加另一个滑块，但宽度不同。

我尝试在 .panel 和 .coda-slider 类中添加 id，但似乎 codaslider 在添加 id 后无法获取宽度。有人成功地在同一页面上添加了不同宽度的多个尾数滑块吗？

这是我尝试过的：

**原来的**

```
.coda-slider, .coda-slider .panel {
    width: 300px;
} 
```

**改变**

```
#myslider1 .coda-slider, #myslider1 .coda-slider .panel {
    width: 300px;
}

#myslider2 .coda-slider, #myslider2 .coda-slider .panel {
    width: 600px;
} 
```

* * *

**编辑**[在 jsfiddle](http://jsfiddle.net/Claudius/ttcHq/1/) 查看这个例子。您将在同一页面上看到两个工作滑块，如何使它们的宽度不同？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:11:44.033

我编辑了你的[小提琴](http://jsfiddle.net/ttcHq/2/)并添加了这个：

```
#slider1 {
    width: 300px;
}

#slider2 {
    width: 600px;
} 
```

这是你想要的？

# silverlight - Silverlight 应用程序的“SingleInstanceHost”标志

> ID：12602344
> 
> 赞同：6
> 
> 时间：2012-09-26T13:01:54.007
> 
> 标签：silverlight

我为 silverlight 应用程序发现了一些名为“SingleInstanceHost”的有趣标志，可以在应用程序清单文件中设置。Msdn 说它“指示应用程序是否具有单个实例主机”。

谁能解释一下这个标志是什么意思？

我的测试：

1.  如果我在没有此标志的设备上运行我的 wp7 silverlight 应用程序，那么如果我尝试从开始菜单运行第二个应用程序实例 - 系统会终止第一个实例并运行新实例。

2.  如果我在带有此标志的设备上运行我的 wp7 silverlight 应用程序，那么如果我尝试从开始菜单运行第二个应用程序实例 - 系统会终止第一个实例并且不会运行新实例。

奇怪的行为！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T12:01:10.447

Silverlight 3 引入了一种应用程序相互通信的方式，无论是在同一页面上还是在不同的浏览器实例上实例化（甚至适用于已安装/OOB 应用程序）。通信由发送者和接收者类执行，它们通过命名通道交换消息。每个接收者必须为通道注册一个唯一的名称，否则将引发异常。

这就是诀窍。监听一个特定的命名通道就像一个互斥体。通过捕获 ListenFailed 异常，您可以选择显示适当的消息或启动不同版本的应用程序。所有工作都在 App.Xaml.cs 文件中完成：

```
private void Application_Startup(object sender, StartupEventArgs e)
{
try
{
    receiver = new LocalMessageReceiver("singleinstance");
    receiver.Listen();
    this.RootVisual = new MainPage();
}
catch (ListenFailedException)
{
    this.RootVisual = new DuplicateInstancePage();
}
} 
```

# c# - 使用 JavaScript 更改文本框的显示时弹出 Ajax RequiredFieldValidator

> ID：12602347
> 
> 赞同：1
> 
> 时间：2012-09-26T13:01:55.137
> 
> 标签：c#, javascript, asp.net, ajaxcontroltoolkit, requiredfieldvalidator

> **问题：**
> 问题是由于“ValidatorCalloutExtender”引起的，即使使用 javascript ValidatorEnable(val, enabled) 方法禁用了RequiredFieldValidator 也会触发。
> 
> **可能重复：**
> [如何不在隐藏字段（文本框）上触发 RequiredFieldValidator](https://stackoverflow.com/questions/5710342/how-not-to-trigger-requiredfieldvalidator-on-hidden-field-textbox)

请先参考这个问题。

[使用 JavaScript 将可见属性设置为 false 时删除空格](https://stackoverflow.com/questions/12004234/remove-empty-space-when-visible-property-is-set-to-false-using-javascript)

在上述问题中，我的空白问题已解决，但另一个问题开始困扰我。

我将`.style.display = "block";`and`.style.display = "none";`属性用于具有 Ajax 的文本框`RequiredFieldValidator`。当 Style 为`block`时，显示 TextBox，当它为 Empty 时，`RequiredFieldValidator`弹出。直到不是这很好。

但是当 TextBox Display Style 设置为 时`"none"`，它`RequiredFieldValidator`会弹出页面的左上角并且不允许回发。

你能帮助我吗？？

这是JavaScript代码

```
<script type="text/javascript">
function OtherProof(val) {
    // or use this both works
    //var ProofType = document.getElementById("ddl_IDProof");
    //var SelectedProofType = ProofType.options[ProofType.selectedIndex].value;
    if (val == "0") {
        document.getElementById("lbl_OtherProof").style.display = "block";
        document.getElementById("tb_OtherProof").style.display = "block";
    }
    else {
        document.getElementById("lbl_OtherProof").style.display = "none";
        document.getElementById("tb_OtherProof").style.display = "none";
    }
}
</script> 
```

这是aspx代码

```
//Dropdown list whoch on selected i make the textbox Display and Disappear
<asp:DropDownList ID="ddl_IDProof" runat="server"
                 onchange="OtherProof(this.options[this.selectedIndex].value);"
                  Width="155px">
                    <asp:ListItem>Driving License</asp:ListItem>
                    <asp:ListItem >Voter Card</asp:ListItem>
                    <asp:ListItem>Pan Card</asp:ListItem>
                    <asp:ListItem Value="0">Other Proof</asp:ListItem>
                </asp:DropDownList>

//Here are the label and Textbox which i make Display and Disappear
 <td><asp:Label ID="lbl_OtherProof" runat="server" Text="Other Proof" Font-Size="13px" style="display:none"></asp:Label></td>
                <td></td>
                <td>
                <asp:TextBox ID="tb_OtherProof" runat="server" Width="150px" MaxLength="30" style="display:none"></asp:TextBox>
                           <asp:FilteredTextBoxExtender ID="FilteredTextBoxExtender4" runat="server" TargetControlID="tb_OtherProof" FilterType="UppercaseLetters,LowercaseLetters,Custom" ValidChars=" "></asp:FilteredTextBoxExtender>
                           <asp:RequiredFieldValidator ID="Req_OtherProof" runat="server" ErrorMessage="Proof Name is Mandatory" ControlToValidate="tb_OtherProof" Display="None"></asp:RequiredFieldValidator>
                    <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender7" runat="server" Enabled="True" TargetControlID="Req_OtherProof" 
                     CssClass="customCalloutStyle">
                    </asp:ValidatorCalloutExtender></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:30:43.053

尝试使用**ValidatorEnable(val, enable)**

接受一个客户端验证器和一个布尔值。启用或禁用客户端验证器。被禁用将阻止它进行评估，并且它将始终显示为有效。

```
 <script type="text/javascript">
  function disableValidation() {
   var val = document.getElementById('Req_OtherProof');
   ValidatorEnable(val, false);
   if (document.getElementById("ValidatorCalloutExtender7_popupTable") != null) {
      document.getElementById("ValidatorCalloutExtender7_popupTable").style.display = "none";
   }
  }

    function OtherProof(val) {
    // or use this both works
    //var ProofType = document.getElementById("ddl_IDProof");
    //var SelectedProofType = ProofType.options[ProofType.selectedIndex].value;
    if (val == "0") {
        document.getElementById("lbl_OtherProof").style.display = "block";
        document.getElementById("tb_OtherProof").style.display = "block";
    }
    else {
        document.getElementById("lbl_OtherProof").style.display = "none";
        document.getElementById("tb_OtherProof").style.display = "none";
        disableValidation();
    }
 }
    </script> 
```

# java - 如何在 GAE JDO 3 中实现类似的搜索

> ID：12602348
> 
> 赞同：0
> 
> 时间：2012-09-26T13:01:56.540
> 
> 标签：java, google-app-engine

我正在尝试创建一个查询，它将返回“名称”字段值以 GAE JDO 3 中的某个字符开头的所有行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:55:26.440

向您的模型添加一个名为“first_letter”的属性，然后对其进行搜索。

# .net - 如何安全地将事件传递到线程中。SlimDX / DX9

> ID：12602349
> 
> 赞同：0
> 
> 时间：2012-09-26T13:02:00.217
> 
> 标签：.net, vb.net, multithreading, directx, slimdx

我在弄清楚我应该如何构建我的程序时遇到了一些麻烦。我将首先描述我的程序的一般描述，然后介绍我尝试过的事情和遇到的问题。我不是在开发游戏，而是在开发一套计算机化测试来测试人类视觉。我知道这篇文章有点长，但我想尽可能清楚地说明我遇到的问题。提前致谢！

设计：该程序提供了一个“主菜单”VB.Net 表单，该表单有很多选项可以选择不同类型的测试并为测试配置不同的选项。当用户单击特定测试的 RunTest 按钮时，将创建一个表示该测试的 TestObject。TestObject 构造函数创建一个从 SlimDX RenderForm 类派生的 StimulusDisplayObject(SDO)。SDO 类的工作是管理 SlimDX 设备对象并将不同的刺激呈现到屏幕上。它包含一个 StimulusObjects(SO) 列表，它们本质上只是从 .bmp 图像加载的 DX 表面和一些位置信息，用于告诉 SDO 类在屏幕上的何处绘制表面。在创建 SDO 之后，调用 TestObject.BeginTest() 方法，这只是一个循环，向观察者提供了许多试验。

问题：因为我为测试预设的刺激是相当静态的，而且我通常最多只需要每秒钟或两秒钟更改一次显示在屏幕上的图像，因此我没有持续渲染场景。 FPS 尽可能。我只是有一个 SDO.RenderScene()，只要需要在屏幕上更改某些内容，就会从 TestObject 调用它。这工作得很好，直到我尝试处理 DeviceLostExceptions 和用户 ALT-TAB、CTRL-ALT-Delete、覆盖窗口（在窗口模式下）等时出现的类似问题。）我还没有找到有效的方法处理这些类型的错误，而无需连续渲染场景。

所以我决定尝试重写 SDO 类以使用 SlimDXs MessagePump.Run() 功能不断渲染场景，但这会导致异常，因为 SDO MessagePump.Run() 与“主菜单”WinForm 的 MessagePump 冲突（至少我认为这就是此错误消息的含义：“附加信息：在单个线程上启动第二个消息循环不是有效操作。”）。我决定尝试在新线程中创建 SDO 对象，但后来我无法在 TestObject 和 SDO 对象之间进行通信以添加/删除/更改 SO 对象。我不能 100% 确定创建多线程应用程序是最好的方法，因为我已经读过 DX 和线程会导致编程噩梦，但我没有看到任何其他解决方案。我想我需要学习使用某种线程同步，但我对线程非常陌生，我想确保在我投入大量时间学习同步之前，我不会走上注定失败的道路线程。如果创建多线程应用程序是最佳选择，我应该注意任何 DX/SlimDX 线程问题吗？任何跨线程同步数据的简单 SlimDX 线程程序示例？感谢您花时间阅读这篇文章，我将非常感谢您提供的任何建议。如果创建多线程应用程序是最佳选择，我应该注意任何 DX/SlimDX 线程问题吗？任何跨线程同步数据的简单 SlimDX 线程程序示例？感谢您花时间阅读这篇文章，我将非常感谢您提供的任何建议。如果创建多线程应用程序是最佳选择，我应该注意任何 DX/SlimDX 线程问题吗？任何跨线程同步数据的简单 SlimDX 线程程序示例？感谢您花时间阅读这篇文章，我将非常感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:14:00.240

vanattab，为什么不查看这本在线（免费）书籍，您将在其中找到您需要了解的有关 .net 平台上的多线程的所有内容（嗯，大部分）。它是面向 C# 的，但是同样的技术也适用于 VB。

[http://www.albahari.com/threading/](http://www.albahari.com/threading/)

# php - 扫描目录的文件大小 - PHP

> ID：12602350
> 
> 赞同：1
> 
> 时间：2012-09-26T13:02:00.933
> 
> 标签：php

我想读取一个目录并获取每个文件的文件大小。我尝试了以下代码：

```
$downloads = array_slice(scandir("downloads"),2);
$size = array();
foreach($downloads as $value) {
    $size = filesize("downloads/".$value);
    echo($size); //at this point the echo works correctly
}
echo($size); //shows the filesize of the first file
echo($size[1]) //nothing happens
foreach($size as $value) {
    echo($value); //nothing happens
    echo($size); //nothing happens
} 
```

这就是为什么我现在对数组和循环的工作感到困惑。将文件名及其相应的文件大小保存在一个数组中也会很好。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:04:40.337

你这样做是错的。您正在覆盖 foreach 中的数组。

```
foreach($downloads as $value) {
    $size = filesize("downloads/".$value);
    // $size is not an array anymore, just an int
    echo($size); //at this point the echo works correctly
} 
```

这应该是正确的：

```
foreach($downloads as $value) {
    $size[] = filesize("downloads/".$value);
} 
```

完整代码：

```
$downloads = array_slice(scandir("downloads"),2);
$size = array();

foreach($downloads as $value) {
    $size[] = filesize("downloads/".$value);
}

foreach($size as $value) {
    echo($value).'<br/>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:05:13.670

您不断地覆盖变量，这就是为什么每次执行`$size`都不会进行它。`foreach`

您应该创建一个`$size`数组并相应地存储所有内容：

```
$size = array();
foreach ( $downloads as $file ) {
    $size["downloads/".$file] = filesize("downloads/".$file);
}

foreach ( $size as $fname => $fsize) {
    echo "Size of " .$fname. " is " .$fsize. " bytes.";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:04:50.430

当您分配值时：

foreach($downloads as $value) {
$size = filesize("downloads/".$value);
回声（$大小）；//此时回声正常工作
}

您需要将其添加到“大小”的特定记录中

```
$size[ $n ] = filesize( ... ); 
```

# xaml - XNA/XAML 鼠标悬停时动画边框颜色

> ID：12602352
> 
> 赞同：0
> 
> 时间：2012-09-26T13:02:14.743
> 
> 标签：xaml, animation, xna, storyboard, mouseover

我正在 XNA 和 XAML 中制作图片库。我需要有带边框的图像，鼠标悬停时我想更改边框颜色。我尝试了不同的东西，但没有奏效。当 IMAGE 被 mouseOvered 时，应该触发更改边框颜色的动画。这是我的代码：

```
 <Border Name="myBorder"
            BorderThickness="5"
            BorderBrush="White"
            Width="100"
            Height="100"
            Padding="0"
            Margin="15"
            CornerRadius="10">
        <Border.Style>
            <Style>
                <Style.Triggers>
                    <Trigger Property="Image.IsMouseOver" Value="True">
                        <Setter Property="Border.BorderBrush" Value="Yellow"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Border.Style>
            <Image Name="myImage1" 
                   HorizontalAlignment="Center" 
                   Stretch="Fill" />
    </Border> 
```

我还成功地使用了 EventTrigger 和 Storyboard。有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:16:04.113

好的，感谢[这篇](https://stackoverflow.com/questions/2145700/change-style-of-surrounding-border-on-mouse-over)文章，我解决了问题

我应该从边框定义中删除 BorderBrush。现在这有效：

```
 <Border Name="myBorder"
            BorderThickness="5"
            Width="100"
            Height="100"
            Padding="0"
            Margin="15"
            CornerRadius="10">
        <Border.Style>
            <Style TargetType="{x:Type Border}">
                <Style.Triggers>
                    <Trigger Property="Image.IsMouseOver" Value="True">
                        <Setter Property="Border.BorderBrush" Value="Yellow"/>
                    </Trigger>
                    <Trigger Property="Image.IsMouseOver" Value="False">
                        <Setter Property="Border.BorderBrush" Value="White"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Border.Style>
        <Image Name="myImage1" HorizontalAlignment="Center" Stretch="Fill" />
    </Border> 
```

# ios - iOS 5：为什么 shadowopacity 重复动画不起作用？

> ID：12602355
> 
> 赞同：1
> 
> 时间：2012-09-26T13:02:19.387
> 
> 标签：ios, ios5, calayer, shadow, cabasicanimation

我需要围绕我的一个图像视图产生发光效果。为此，我决定使用 shadowopacity 属性。

这是我的代码：

```
imageViewForAnimation.layer.position = viewOrigin;
imageViewForAnimation.layer.shadowColor = [[UIColor yellowColor] CGColor];
imageViewForAnimation.layer.shadowOffset = CGSizeMake(0.0, 0.0);
imageViewForAnimation.layer.shadowRadius = 15.0;
imageViewForAnimation.layer.shadowOpacity = 0.3;
imageViewForAnimation.layer.masksToBounds = NO;
// Set up glow effect
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"shadowOpacity"];
anim.fromValue = [NSNumber numberWithFloat:0.0f];
anim.toValue = [NSNumber numberWithFloat:1.0f];
anim.duration = 3.0;
anim.repeatCount = HUGE_VALF;
anim.autoReverses = YES;
[imageViewForAnimation.layer addAnimation:anim forKey:@"shadowOpacity"];

imageViewForAnimation.layer.shadowPath = [UIBezierPath bezierPathWithRect:imageViewForAnimation.bounds].CGPath;

imageViewForAnimation.layer.shadowOpacity = 1.0f; 
```

但是，动画在运行一次后就停止了。没有重复。谁能明白为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:19:33.117

我刚刚在 iOS 5 模拟器上运行了你的代码，它可以工作。唯一的问题是大写的“R”

```
 anim.autoReverses= YES; 
```

正确代码：

```
 anim.autoreverses= YES; 
```

如果您的代码拼写正确，那么问题可能出在您添加动画的位置。正如我所说，我只是在 iOS 5 模拟器上运行了代码，并且工作起来很迷人。希望这有帮助

# php - 从表格中获取单元格值

> ID：12602358
> 
> 赞同：0
> 
> 时间：2012-09-26T13:02:21.370
> 
> 标签：php, javascript, html

我有一个问题，我有一个脚本可以在从数据库中获取值的同时打印一个表格，现在，我的问题是我想要每个单元格的值可点击，我知道如何做到这一点，我补充说

```
<a href="sample.php">row from query result is printed here</a> 
```

每次在单元格中打印一个值

现在，每个单元格都有不同的值，当点击者点击其中一个值时，我不知道如何获得用户点击的单元格的值，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:06:32.497

```
<a href="sample.php?value=<?php echo $yourvalue?>">row from query result is printed here</a> 
```

您可以将值作为 GET 变量传递。

（以下编辑）

**或者**

使用 jquery [[演示](http://jsfiddle.net/fkPpw/)]

```
$(".tdclass").click(function(){
   alert($(this).text());
   //OR 
   //alert($(this).html());
});​ 
```

`td`您可以使用类轻松识别。否则你可以使用`$(td).click()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:05:14.557

向表格的每个单元格添加一个类（比如“click_td”）。然后做这个就是JS。

```
 $(document).ready(function() {
      $('#table_1 .click_td').click(function(){
     alert($(this).text());
  });

 });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:08:01.277

我假设您想用 javascript 处理数据。因此，在 javascript 中创建一个函数：

```
function handle_db_data(var data){...do whatever you want here...} 
```

And in order to call that function with the database data, you can do this:

```
<a name="row1" onclick="handle_db_data(ROW_FROM_DATABASE);">ROW_FROM_DATABASE</a> 
```

Using jQuery would be even more easy!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:09:57.613

```
<a href="sample.php?id=<?php echo $row['value']; ?>"><?php echo $row['value']; ?></a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:16:55.737

Your question is not vague but has little information, for instance, where do you want to keep the identifier of each cell? will it be in a hidden input field or will it be in a the link or even a javascript function? Either way this would be how you want to do this:

```
echo '<table>';
$counter = 1;

/* Assuming the database output is an associative array. */
foreach($db_data as $item) {
   echo '<tr>';
   echo '<td>'.$counter.'</td>';
   /* if the row identifier will be in your link. */
   echo '<td><a href="sample.php?rowid='.$item['pk_row_id'].'">row from query result is printed here</a></td>';
   /* if the row identifier will be a hidden input field. */
   echo '<td><input type="hidden" value="'.$item['pk_row_id'].'" name="rowid" id="rowid" />';
   /* if the row identifier will be in a javascript function on click. */
   echo '<td><a href="void(0)" onclick="userclickaction('.$item['pk_row_id'].')>Click Me to edit</a></td>`enter code here`';
   echo '</tr>';

   /* Increment counter. */
   $counter++; 
}

echo '</table>'; 
```

# iphone - UIButton 不接受点击一半区域的问题.. 查看层次结构问题..？

> ID：12602360
> 
> 赞同：3
> 
> 时间：2012-09-26T13:02:36.227
> 
> 标签：iphone, objective-c, ios, uiview, uibutton

我有一个按钮放置在`view`部分......它的一半在视图上，另一半只是有点浮动。因此，如果 A 是我的基本视图并且 B 放在它上面，并且我在 B 上添加了这个按钮。如果我点击 B 上方部分的按钮，它会接收触摸并执行操作，但如果这个触摸在外面B 的区域比触摸没有执行....我在这里做错了什么...？任何帮助表示赞赏。

这是我添加按钮的方式。我正在尝试动态删除按钮，类似于在 IOS 中删除应用程序的方式。

```
UIButton *deletButton1 = [UIButton buttonWithType:UIButtonTypeCustom] ;
        deletButton1.frame = CGRectMake(25, -5, 30,30);;
        deletButton1.backgroundColor = [UIColor clearColor];
        deletButton1.tag=1;
        UIImage *buttonImageNormal1 = [UIImage imageNamed:@"delete.png"];
        [deletButton1 setBackgroundImage:buttonImageNormal1 forState:UIControlStateNormal];
        [deletButton1 addTarget:self action:@selector(deleteButton:) forControlEvents:UIControlEventTouchUpInside];

[self.addButton1 addSubview:deletButton1]; 
```

这是一个屏幕截图..

![在此处输入图像描述](../Images/36ed22be044edad5248c390d02e1a329.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:34:39.163

作为记录，如果您覆盖父视图的正确方法，子视图不必位于父视图的框架内以接收触摸。

有关更多详细信息，请参见此线程：

[UIView 越界交互](https://stackoverflow.com/questions/5432995/interaction-beyond-bounds-of-uiview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:05:53.837

按钮的框架应从原点 (0,0) 开始。我的意思是按钮应该完全在视图 B 内。否则切割区域无法接收触摸。将按钮框架设置为 (25,0,30,30)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:08:00.453

您正在 addbutton1 上添加删除按钮，因此设置 addbutton1 的背景颜色并设置 deletebutton1 的另一种颜色并检查天气框架是否正确。我猜你的框架不正确，这就是它发生的原因，并确保你的 deletebutton1 不会因为另一个视图而被隐藏。

我对此不确定，但检查一次可能会对您有所帮助。[deletButton1 setNeedsDisplay];

# sql - 根据第一个表中的第二个数值连接两个表

> ID：12602362
> 
> 赞同：0
> 
> 时间：2012-09-26T13:02:38.770
> 
> 标签：sql, sql-server, tsql, join

我是 SQL 新手，所以请多多包涵。

我正在使用两个没有公共字段的表。我正在尝试基于如下所示的两个表创建简单的层次结构：

```
 Table 1\. 

Cul 1   Cul 2 
============== 
S10000  Name 
S20000  Name 1 
S30000  Name 2 
S40000  Name 3

 Table 2 

Cul 1   Cul 2  
=====================
A10000  Test 
A10001  Test 123 
A20000  Test 1
A20001  Test 999 
A30000  Test 2  
A30002  Test 5555 
A40000  Test 3   
A40006  Test 84384848 
```

我想编写一个查询，该查询将根据表 1 和表 2 中第一列中的匹配数值显示表 1 中的“名称”字段。

所以如果表 1 是 S10000，显示 A1000 – Test

那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:26:07.090

您的要求并不完全清楚，但听起来您想要这样：

```
select t1.col1 t1Name,
  t1.col2 t1Value,
  t2.col1 t2Name,
  t2.col2 t2Value
from table1 t1
inner join table2 t2
  on substring(t1.col1, 2, 1) = substring(t2.col1, 2, 1) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/9247a/3)

编辑，您还可以使用：

```
select t1.col1 t1Name,
  t1.col2 t1Value,
  t2.col1 t2Name,
  t2.col2 t2Value
from table1 t1
inner join table2 t2
  on substring(t1.col1, 2, len(t1.col1)) 
      = substring(t2.col1, 2, len(t2.col1)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T13:30:32.693

```
SELECT
   t2.*
FROM Table1 t1
INNER JOIN Table2 t2 on SUBSTRING(t1.Cul1,2,LEN(t1.Cul1)-1)=SUBSTRING(t2.Cul1,2,LEN(t2.Cul1)-1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:29:56.393

如果您非常确定第一个数字是数字，然后是数字，那么下面应该可以工作

```
SELECT A.cul1,B.cul2 
FROM dbo.Table1 A, dbo.Table2 B
WHERE substring(A.cul1,2,len(A.cul1))= substring(B.cul1,2,len(B.cul1)) 
```

# java - 附加 BassBoost 时 MediaPlayer 不播放 - 错误 (-22, 0)

> ID：12602364
> 
> 赞同：0
> 
> 时间：2012-09-26T13:02:43.430
> 
> 标签：java, android, audio, effects, android-mediaplayer

它应该很简单：

```
private void startPlaying() {
    mPlayer = new MediaPlayer();
    try {
        mPlayer.setDataSource(mFileName);

        BassBoost bassBoost = new BassBoost(0, mPlayer.getAudioSessionId());
        mPlayer.attachAuxEffect(bassBoost.getId());
        bassBoost.setStrength((short)1000);
        bassBoost.setEnabled(true);
        mPlayer.setAuxEffectSendLevel(1.0f);

        mPlayer.prepare();

        mPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                mPlayer.start();
            }
        });
    } catch (IOException e) {
        // TODO Auto-generated catch block
       e.printStackTrace();
        throw new RuntimeException(e);
    }
        } 
```

当我尝试时，它很安静，并且我在日志中收到错误 (-22,0)。如果我评论之间的线条`BassBoost bassBoost = ...`，`mPlayer.setAuxEffectSendLevel`它会播放声音。

我浏览了文档，但我找不到错误。清单中的权限：

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/> 
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T08:02:16.657

在创建媒体播放器时，您已经将低音增强器与媒体播放器相连。所以删除这一行`mPlayer.attachAuxEffect(bassBoost.getId());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T07:35:19.957

`attachAuxEffect`是的，从媒体播放器类中删除该方法，我的意思是这个`linemPlayer.attachAuxEffect(bassBoost.getId());`

其次，您可以`bass boost`在媒体播放器的任何状态下调用对象，不包括空闲状态

# streaming - 滑动与翻滚的窗户

> ID：12602368
> 
> 赞同：36
> 
> 时间：2012-09-26T13:02:54.697
> 
> 标签：streaming

我正在阅读一篇关于数据流管理的长文，对滑动窗口和翻滚窗口之间的区别感到有些困惑。到目前为止，我已经了解翻滚窗口可以是基于时间的，并且具有固定的（开始，结束）点，当该窗口到期时“翻滚”。例如，基于时间的窗口可以是 1 分钟长。因此，每隔一分钟，窗口就会翻滚以处理数据集的聚合。

滑动窗户让我感到困惑。滑动窗口是否像基于计数的那样，当 x 个元组进入窗口时，窗口会翻滚。还是进入窗口的 x-recent 元组将成为窗口的一部分，并且较旧的元组将从该窗口中逐出。即随着新元组的到来而不断更新的窗口？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2016-11-14T23:04:44.513

1.  **翻滚**以不重叠的间隔重复。
2.  **跳跃**类似于翻滚，但跳跃通常具有重叠的间隔。
3.  **时间滑动**定期触发。
4.  **逐出滑动**触发计数。

下面是一个图形表示，显示了不同类型的**数据**流管理系统 ( **DSMS** **)****窗口**-翻滚、**跳跃**、定时策略滑动和驱逐策略（计数）滑动。我使用上面的示例来创建图像（做出假设）。

 ******[![DSMS 中的窗口化](../Images/e73bb5bbcc03a5577286633cfb8998ff.png)](https://i.stack.imgur.com/mm06A.jpg)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-05T11:20:13.613

**Tumbling windows (TW)** 窗口内的所有元组同时到期。

**滑动窗口 (SW)** 只有一些元组在给定时间过期

**示例** 如果您有一个包含以下整数的窗口输入（符号整数（输入后的秒数）），假设 TW 是在 60 秒前创建的，并且两个窗口的时间限制都是 60 秒。

```
1 (0s), 2 (10s), 4 (24s), 8 (17s), 16 (40s) 
```

假设 20 秒过去了，然后以下整数进入窗口。

```
7, 3, 6 
```

现在之前的 TW 将已过期，并且将仅包含上述值。虽然 SW 将包含以下值

```
7, 3, 6, 1, 2, 4, 8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-02T09:27:40.943

让我们将窗口函数视为传统的[GROUP BY](https://www.w3schools.com/sql/sql_groupby.asp)操作，它适用于基于时间的输入数据，应用给定的聚合函数并输出结果。

**翻滚窗口 (TW)**操作和**滑动窗口 (SW)**操作之间的主要区别在于所考虑数据点的交集，在前一种情况下为空，在后一种情况下可能为非空。

来自 Microsoft Azure Stream Analytics 的出色[读物](https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-window-functions)使插图与众不同。

*   **TW**，考虑到 10 秒的滴答声，这样的窗口操作会在每个滴答声中输出聚合函数在该时间范围内的结果；
*   **SW**，考虑到 Xs 的滴答声，这样的窗口操作在*每次发生事件时*输出 Ys 时间帧的聚合函数的结果，例如`X = 1`，`Y = 10`然后窗口函数每秒回溯 10 秒，系统地丢弃最旧的数据点。

让我们看一个以下时间序列的具体示例：

```
t0-> 5 7 4 3 1 1 3 t10-> 4 5 8 1 2 3 3 3 5 7 7 t20-> t30-> 3 3 4 t40-> 
```

考虑`SUM`作为聚合函数和 SW 的平庸策略，即**希望窗口 (HW)**：

*   在`t0` `SW = TW = 0`;
*   在`t10` `SW = TW = 24`;
*   在`t11`没有 TW 但是`SW = 23`并且连续窗口之间的交点是`7 4 3 1 1 3`;
*   在`t11`没有 TW 但是`SW = 21`并且连续窗口之间的交点是`4 3 1 1 3 4`;
*   在`t20` `TW = SW = 48`;
*   在`t21`没有 TW 但是`SW = 44`连续窗口之间的交点是`5 8 1 2 3 3 3 5 7 7`
*   在`t30` `TW = SW = 0`;
*   在`t31`没有 TW 但是`SW = 3`连续窗口之间的交集是空的，因为没有发生任何事件`[t20, t30]`。

SoftwareMill 首席技术官 Adam Warski 的另一本[好书，它举例说明了如何使用 Spark、Flink、Akka 和 Kafka 等现代流技术。](https://softwaremill.com/windowing-in-big-data-streams-spark-flink-kafka-akka/)******

# javascript - Chrome 使用 onload 和 load 函数抛出错误

> ID：12602369
> 
> 赞同：1
> 
> 时间：2012-09-26T13:02:58.850
> 
> 标签：javascript, google-chrome, iframe, onload, google-chrome-devtools

这是有效的，但是我严格的 QA 说不会有控制台错误。

我已经将 iframe 写入 DOM，并设置了 .onload 事件；

```
var configureSDK = function () {
        alert('lets configure');
    }

    var init = function (config) {
        // pass configurables to global var
        settings = config;
        setupSDK(document);

        function setupSDK(d) {
            // setup iframe
            sdkportal = d.createElement('IFRAME');
            sdkportal.setAttribute('src', '//www.webtekkers.com');
            sdkportal.setAttribute('width', '100%');
            d.body.appendChild(sdkportal);
            sdkportal.onload(configureSDK());
        }
    } 
```

就像我说的那样有效，但 Chrome 正在显示；

未捕获的类型错误：对象# 的属性“onload”不是函数

现在我知道，我真的应该为不同的浏览器设置单独的事件 AddEventListener|attachEvent('load|onload') ，但这是更多的工作。

这只是 Chrome 错了还是我错了？

*请不要使用 jQuery 替代品*

谢谢威尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:06:15.283

错误信息虽然难以理解，但完全正确。 `onload`是一个属性，它的值是`undefined`直到你给它赋值。通常它会被分配一个*对函数的引用*。

您可能的意思是将`onload`属性设置为`configureSDK()`函数引用：

```
sdkportal.onload = configureSDK; 
```

或者作为函数调用（如果您在 中还有更多工作要做`onlaod`）：

```
sdkportal.onload = function() {
  configureSDK();
}; 
```

# php - 如何编写正确的正则表达式模式来删除列出的单词

> ID：12602372
> 
> 赞同：0
> 
> 时间：2012-09-26T13:03:05.440
> 
> 标签：php, regex

我有密码

```
$text = "This is a $1ut ( Y ) @ss @sshole a$$ ass test with grass and passages.";
$blacklist = array(
  '$1ut',
  '( Y )',
  '@ss',
  '@sshole',
  'a$$',
  'ass'
);
foreach ($blacklist as $word) {
  $pattern = "/\b". preg_quote($word) ."\b/i";
  $replace = str_repeat('*', strlen($word));
  $text = preg_replace($pattern, $replace, $text);
}
print_r($text); 
```

返回以下结果：

`This is a $1ut ( Y ) @ss @sshole a$$ *** test with grass and passages.`

当我从正则表达式中删除单词边界时，

```
$pattern = "/". preg_quote($word) ."/i"; 
```

它返回：

`This is a **** ***** *** ***hole *** *** test with gr*** and p***ages.`

我怎样才能编写正则表达式，这样它就不会替换诸如等之类的词`passages`，`grass`而是完全替换诸如之类的词`@sshole`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:22:54.470

据此[不](https://stackoverflow.com/questions/2881445/utf-8-word-boundary-regex-in-javascript) `\b`支持除`[A-Za-z0-9_]`.

请注意，您**必须**转义您的正则表达式，因为您是从字符串生成它（并且 PHP 编译器在创建此字符串时不知道它是正则表达式）。

使用正则表达式`/(^|\s)WORD($|\s)/i`似乎有效。

代码示例：

```
$text = "This is a $1ut ( Y ) @ss @sshole a$$ ass test with grass and passages.";
$blacklist = array(
  '$1ut',
  '( Y )',
  '@ss',
  '@sshole',
  'a$$',
  'ass'
);
foreach ($blacklist as $word) {
  $pattern = "/(^|\\s)" . preg_quote($word) . "($|\\s)/i";
  $replace = " " . str_repeat('*', strlen($word)) . " ";
  $text = preg_replace($pattern, $replace, $text);
}
echo $text; 
```

输出：

`This is a **** ***** *** ******* *** *** test with grass and passages.`

请注意，如果您的字符串以其中一个单词开头或结尾，我们将在每个结尾的匹配项中添加一个空格，这意味着文本之前或之后会有一个空格。你可以用[`trim()`](http://php.net/manual/en/function.trim.php)

**更新;**

另请注意，这不以任何方式考虑标点符号。

`the other user has an ass. and it is nice`例如会通过。

为了克服这一点，您可以进一步扩展它：

`/(^|\\s|!|,|\.|;|:|\-|_|\?)WORD($|\\s|!|,|\.|;|:|\-|_|\?)/i`

这意味着您还必须更改我们替换的方式：

```
$text = "This is a $1ut ( Y ) @ss?@sshole you're an ass. a$$ ass test with grass and passages.";
$blacklist = array(
  '$1ut',
  '( Y )',
  '@ss',
  '@sshole',
  'a$$',
  'ass'
);
foreach ($blacklist as $word) {
  $pattern = "/(^|\\s|!|,|\\.|;|:|\\-|_|\\?)" . preg_quote($word) . "($|\\s|!|,|\\.|;|:|\\-|_|\\?)/i";
  $replace = '$1' . str_repeat('*', strlen($word)) . '$2';
  $text = preg_replace($pattern, $replace, $text);
}
echo $text; 
```

并添加所有其他标点符号等。

输出：

`This is a **** ***** ***?******* you're an ***. *** *** test with grass and passages.`

# android - Android async with gps 导致 FC

> ID：12602378
> 
> 赞同：0
> 
> 时间：2012-09-26T13:03:22.920
> 
> 标签：android, asynchronous, gps

我得到了这个异步的 GPS 监听器方法：

```
// ASync Task Begin to perform Billing information
        class performBackgroundTask extends AsyncTask<Void, Void, Void> implements GpsStatus.Listener {

            private Context context;

            private ProgressDialog dialog;

            public performBackgroundTask(Context context) {
                performBackgroundTask.this.context = context;
              }

            protected void onPreExecute() {

                dialog = ProgressDialog.show(main.this, "Info", "GPS kapcsolatra vár...");

            }

            protected Void doInBackground(Void... params) {
                // write here the code to download or any background task.
                globalconstant.mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                globalconstant.mlocManager.addGpsStatusListener(this);
                return null;
            }

//          protected void onPostExecute(Void unused) {
//               if(dialog!=null)
//                   dialog.dismiss();
//
//          }

            /* GPS kapcsolódás figyelő */
            public void onGpsStatusChanged(int event) {

                // Log.w("TravellerLog :: ", "l1");
                switch (event) {
                case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
                    break;
                case GpsStatus.GPS_EVENT_FIRST_FIX: 
                    dialog.dismiss();
                    show_sens = show_sens + "- GPS\n";
                    sensors.setText(show_sens);
                    //addGPSListener();
                    Toast.makeText(getApplicationContext(), "GPS kapcsolódva!",
                            Toast.LENGTH_SHORT).show();// this means you found GPS
                                                        // Co-ordinates
                    //myChronometer.setBase(SystemClock.elapsedRealtime());
                    myChronometer.start();

                    meres = true;
                    start_button.setText("STOP");
                    break;
                case GpsStatus.GPS_EVENT_STARTED:
                    break;
                case GpsStatus.GPS_EVENT_STOPPED:
                    break;
                }
            }
            // GPS
                private void addGPSListener() {
                    globalconstant.db.setVersion(1);
                    globalconstant.db.setLocale(Locale.getDefault());
                    globalconstant.db.setLockingEnabled(true);

                    final String gps =

                    "CREATE TABLE IF NOT EXISTS GPS_Values ("

                            + "id INTEGER PRIMARY KEY AUTOINCREMENT, Latitude float(10, 8), Longitude float(10, 8),Accuracy INTEGER,Speed INTEGER,timestamp TIMESTAMP);";
                    globalconstant.db.execSQL(gps);

                    Log.d("FESTIVALE :: ", "Frissítési idő: "
                            + globalconstant.gps_update_value);
                    float f = Float.valueOf(globalconstant.gps_update_value.trim())
                            .floatValue();
                    float update = f * 1000;

                    globalconstant.mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                    globalconstant.mlocListener = new MyLocationListener();
                    globalconstant.mlocManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER, (long) update, 0,
                            globalconstant.mlocListener);
                }

                public class MyLocationListener implements LocationListener {

                    public void onLocationChanged(Location loc) {

                        float szel = (float) loc.getLatitude();
                        float hossz = (float) loc.getLongitude();
                        int horiAcc = (int) (loc.getAccuracy());
                        // int speed=(int) ((loc.getSpeed()*3600)/1000); //sebesség km/h-ban
                        int speed = 0;

                        if (loc.hasSpeed()) {
                            speed = (int) ((loc.getSpeed() * 3600) / 1000); // sebesség
                                                                            // km/h-ban
                        } else {
                            speed = 0;
                        }

                        String test = String.format("%.08f", szel);
                        String test2 = String.format("%.08f", hossz);

//                      Geocoder geocoder = new Geocoder(main.this, Locale.getDefault());
//                      try {
//                          List<Address> addresses = geocoder.getFromLocation(szel, hossz,
//                                  1);
//                          city = addresses.get(0).getLocality();
//                      } catch (IOException e) {
//                          e.printStackTrace();
//                      }

                        ContentValues gps_values = new ContentValues();

                        gps_values.put("Latitude", test);
                        gps_values.put("Longitude", test2);
                        gps_values.put("Accuracy", horiAcc);
                        gps_values.put("Speed", speed);
                        //gps_values.put("City", city);

                        SimpleDateFormat dateFormat = new SimpleDateFormat(
                                "yyyy-MM-dd HH:mm:ss");
                        Date date = new Date(System.currentTimeMillis());

                        gps_values.put("timestamp", dateFormat.format(date));

                        try {
                            globalconstant.db.beginTransaction();
                            globalconstant.db.insert("GPS_Values", null, gps_values);
                            globalconstant.db.setTransactionSuccessful();
                        } finally {
                            globalconstant.db.endTransaction();
                        }

                        Log.d("FESTIVALE :: ", "Hely" + test + ", " + test2 + " , "
                                + horiAcc + " , " + speed);
                        // String Text = "My current location is: " + "Latitude = "
                        // + loc.getLatitude() + "\nLongitude = " + loc.getLongitude();

                        // Toast.makeText(getApplicationContext(), "Hely" +test + "\n" +
                        // test2 + "\n" + horiAcc + "\n" +speed + "\n" +city,
                        // Toast.LENGTH_SHORT)
                        // .show();

                    }

                    public void onProviderDisabled(String provider) {
                        Toast.makeText(getApplicationContext(), "Gps Disabled",
                                Toast.LENGTH_SHORT).show();
                        DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                switch (which) {
                                case DialogInterface.BUTTON_POSITIVE:
                                    // show gps otions
                                    Intent gpsOptionsIntent = new Intent(
                                            android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                                    startActivity(gpsOptionsIntent);
                                    break;

                                case DialogInterface.BUTTON_NEGATIVE:
                                    dialog.cancel();
                                    break;
                                }
                            }
                        };

                        AlertDialog.Builder builder = new AlertDialog.Builder(main.this);
                        builder.setMessage("A GPS nincs aktiválva!\nAktiválja most?")
                                .setPositiveButton("Aktivál", dialogClickListener)
                                .setNegativeButton("Nem", dialogClickListener).show();
                    }

                    public void onProviderEnabled(String provider) {
                        Toast.makeText(getApplicationContext(), "Gps Enabled",
                                Toast.LENGTH_SHORT).show();

                    }

                    public void onStatusChanged(String provider, int status, Bundle extras) {
                    }

                }// gps vége

        } 
```

我得到了错误：

```
09-26 12:59:10.299: E/AndroidRuntime(719): FATAL EXCEPTION: AsyncTask #1
09-26 12:59:10.299: E/AndroidRuntime(719): java.lang.RuntimeException: An error occured while executing doInBackground()
09-26 12:59:10.299: E/AndroidRuntime(719):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.lang.Thread.run(Thread.java:1019)
09-26 12:59:10.299: E/AndroidRuntime(719): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-26 12:59:10.299: E/AndroidRuntime(719):  at android.os.Handler.<init>(Handler.java:121)
09-26 12:59:10.299: E/AndroidRuntime(719):  at android.location.LocationManager$GpsStatusListenerTransport$1.<init>(LocationManager.java:1281)
09-26 12:59:10.299: E/AndroidRuntime(719):  at android.location.LocationManager$GpsStatusListenerTransport.<init>(LocationManager.java:1281)
09-26 12:59:10.299: E/AndroidRuntime(719):  at android.location.LocationManager.addGpsStatusListener(LocationManager.java:1320)
09-26 12:59:10.299: E/AndroidRuntime(719):  at com.eyecom.festivale.main$performBackgroundTask.doInBackground(main.java:800)
09-26 12:59:10.299: E/AndroidRuntime(719):  at com.eyecom.festivale.main$performBackgroundTask.doInBackground(main.java:1)
09-26 12:59:10.299: E/AndroidRuntime(719):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-26 12:59:10.299: E/AndroidRuntime(719):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
09-26 12:59:10.299: E/AndroidRuntime(719):  ... 4 more 
```

我真的不知道该怎么办，这就是为什么我把它贴在这里。请给我一些建议/想法/回答如何解决这个问题......如果你愿意，你可以编辑我的代码！非常感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:09:33.640

onPostExecute **()**方法再次与用户界面线程同步并允许对其进行更新。**一旦doInBackground()**方法完成，框架就会调用此方法。

仅在**onPostExecute()**中的 Toast 或 textview 中打印任何值

# image - 在每个数据网格 gwt 单元格中添加图像

> ID：12602384
> 
> 赞同：0
> 
> 时间：2012-09-26T13:03:36.787
> 
> 标签：image, datagrid, datagridview

如何在数据网格表的每个单元格中添加图像。？

假设如果返回值为 1，那么我想在该列中添加一个绿色图标？

那么如何实现呢？

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:26:52.127

[在 DataGridViewImageColumn 绑定文本字段中显示图像](https://stackoverflow.com/questions/9789466/showing-image-in-a-datagridviewimagecolumn-binding-text-field/9790368#9790368)

每当我对如何在 DataGridView 中执行操作有任何疑问时，我都会先咨询 Microsoft 的常见问题解答。

[http://www.windowsclient.net/Samples/Go%20To%20Market/DataGridView/DataGridView%20FAQ.doc](http://www.windowsclient.net/Samples/Go%20To%20Market/DataGridView/DataGridView%20FAQ.doc)

通常我在这种情况下所做的是处理 CellFormatting 事件以根据单元格中的值设置图像。

所以我会将我的图像存储在一个图像列表中，然后在 CellFormatting 中有如下代码：

```
private void dgv_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (dgv.Columns[e.ColumnIndex].Name == "status")
    {
        if (e.Value != null)
        {
            if (e.Value.ToString() == "1")
            {
                e.Value = imageList1.Images[1];
            }
            else
            {
                e.Value = imageList1.Images[2];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:10:06.663

您可以使用 ImageCell 或 ImageRssourceCell： [https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#available](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#available)

在 getValue() 方法中，您可以根据某些条件指定要显示的图像。或返回 null 以不显示任何内容。

# perl - 匹配一个字符串并在 perl 中获取它旁边的单词

> ID：12602388
> 
> 赞同：1
> 
> 时间：2012-09-26T13:03:54.357
> 
> 标签：perl

我有一个 html 文件“statistics.htm”。将 html 文件中的数据保存到变量中。

假设在变量中我有以下数据：

```
<ul class="chart-legend">
    <li class="label-1">
      <div><em></em>FTP<br>
      0 B</div>
    </li>
    <li class="label-2">
      <div><em></em>HTTP<br>
      589 KB</div>
    </li>
    <li class="label-3">
      <div><em></em>POP3/IMAP<br>
      0 B</div>
    </li>
    <li class="label-4">
      <div><em></em>SMTP<br>
      0 B</div>
    </li>
</ul> 
```

假设如果客户提供 FTP 作为参数，我希望 FTP 值在上述情况下为 0 B。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:10:28.843

有几个 Perl 模块可以为您解析 HTML。我建议您尝试其中一种，如果您有任何问题，请提出具体问题。

SO 和网络上有很多关于这方面的信息。下面是一个示例问题，它将向您指出一些可用的模块：[如何在 Perl 中轻松地在 <div class ="foo"> 和 </div> 之间进行解析](https://stackoverflow.com/questions/8568735/how-to-parse-between-div-class-foo-and-div-easily-in-perl)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:36:42.653

您可以使用 HTML::TreeBuilder::XPath 非常简单地做到这一点（好的，非常简单，直到您获得有趣的 XPath 查询！）：

```
#!/usr/bin/perl

use strict;
use warnings;

use HTML::TreeBuilder::XPath;

my $html= HTML::TreeBuilder::XPath->new->parse_file( \*DATA);
my $ftp= $html->findnodes( 'normalize-space( //div/br[./preceding-sibling::text()="FTP"]/following-sibling::text())');
print "$ftp\n";

__DATA__
<ul class="chart-legend">
    <li class="label-1">
      <div><em></em>FTP<br>
      0 Ba</div>
    </li>
    <li class="label-2">
      <div><em></em>HTTP<br>
      589 KB</div>
    </li>
    <li class="label-3">
      <div><em></em>POP3/IMAP<br>
      0 Bb</div>
    </li>
    <li class="label-4">
      <div><em></em>SMTP<br>
      0 Bc</div>
    </li>
</ul> 
```

XPath 表达式：在 a`br`中查找 a `div`，它是之前的同级文本`'FTB'`（您可能希望规范化那里的空格）。然后取下一个兄弟文本。把它包`normalize-space`起来清理结果，瞧！

# java - 如何在 Eclipse RCP e4 应用程序的 postconstruct 方法中显示运行时异常？

> ID：12602389
> 
> 赞同：2
> 
> 时间：2012-09-26T13:03:54.620
> 
> 标签：java, dependency-injection, eclipse-rcp, postconstruct

我正在开发一个 Eclipse E4 RCP 应用程序，我使用依赖注入。

我注意到，当 postconstruct 中存在运行时异常时，我在控制台中看不到该异常（它被吞没了吗？）。我确实看到了一个无法注入该类的异常。

因此，例如以下代码：

```
@Creatable
@Singleton
public class OurClass {
    @PostConstruct
    public void postConstruct() {
        System.out.println("PostConstruct Start");
        throw new RuntimeException("Test");
    }
}

public class OurPart {
    @Inject
    private OurClass ourClass;
} 
```

给出以下输出：

```
PostConstruct Start
org.eclipse.e4.core.di.InjectionException: Unable to process "OurPart.ourClass": no actual value was found for the argument "OurClass".
    at org.eclipse.e4.core.internal.di.InjectorImpl.reportUnresolvedArgument(InjectorImpl.java:392)
    at org.eclipse.e4.core.internal.di.InjectorImpl.resolveRequestorArgs(InjectorImpl.java:383)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:100)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.processHierarchy(E4Workbench.java:170)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.init(E4Workbench.java:118)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.<init>(E4Workbench.java:69)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.createE4Workbench(E4Application.java:302)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.start(E4Application.java:132)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:32)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
PostConstruct Start 
```

有谁知道如何确保也显示运行时异常？

# asp.net - 检测共享 IP

> ID：12602391
> 
> 赞同：0
> 
> 时间：2012-09-26T13:03:59.487
> 
> 标签：asp.net

我正在实现应该通过 IP 禁止用户的功能。有什么方法可以识别 - 客户端使用专用 IP 还是共享 IP？

问题让我知道。谢谢。

编辑：

或者也许有人有经验如何处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:04:42.180

> 有什么方法可以识别 - 客户端使用专用 IP 还是共享 IP？

不，没有办法。此信息既不是 TCP 也不是 HTTP 协议的一部分，因此永远不会发送到服务器。您所能获得的只是用于将请求发送到您的站点的客户端 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:13:00.597

如果它是自动生成的名称，则可以从该 IP 反向查找 DNS 名称，然后对名称进行一些启发式分析，例如：

```
\d+[-.]\d+[-.]\d+[-.]\d+[-.](ppp|a?dsl)(\.[-a-z0-9]+)+ 
```

但这会产生很多误报。

# ios - 升级到 Xcode 4.5 后，iOS 5 SDK 消失了

> ID：12602392
> 
> 赞同：16
> 
> 时间：2012-09-26T13:04:04.303
> 
> 标签：ios, xcode, ios5, ios6, xcode4.5

我将 Xcode 升级到 4.5 版。现在所有的偏好都被重置为出厂设置——编辑器字体、颜色等——但这不是我最关心的问题。

看来我所针对的 iOS SDK 5.1 现在已经消失了。在项目的构建设置中，我只能在“最新 iOS (iOS 6.0)”和“iOS 6.0”之间选择 Base SDK。是否可以恢复以前安装的 SDK？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T08:57:20.130

从此链接下载，所有的sdk都应该在这里。某个好人成功了

[http://uv.howett.net/~dhowett/sdks.php](http://uv.howett.net/~dhowett/sdks.php)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-26T13:15:08.803

当前的 Xcode 版本仅附带最新的 iOS SDK（很遗憾，但我们无法更改）。此外，Apple 建议始终使用最新的 SDK 来构建应用程序，并将“部署目标”设置为您计划支持的最低版本。

您可以将 SDK（例如 iPhoneOS5.1.sdk）从较旧的 Xcode 复制到

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs 
```

它将出现在构建设置中。但是您稍后可能会在使用此配置时遇到问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T13:08:43.637

在 Xcode 中转到首选项-> 下载并下载 iOS 5 模拟器以及命令行工具。希望这有帮助

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T13:12:11.277

是的！

当您单击模拟器选择屏幕时，底部有一个更多模拟器按钮。

![在此处输入图像描述](../Images/9c4324edbcf3d7f2b5ec392597ebf7fb.png)

但是，请务必将部署目标设置为您要安装的任何模拟器。在你的情况下，5.1。

然后会有另一个窗口显示所有模拟器。只要安装任何你想要的！:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-26T13:19:10.307

我想你的意思是“基础 SDK”不是目标 - 作为基础 SDK，你应该使用最新的，我认为没有办法在 Xcode 4.5 上安装 5.1（但我可能是错的）。您始终可以将“部署目标”设置为 5.1（支持的最低目标是 4.3）。

无论如何，由于 Xcode 包装在应用程序包中，因此如果需要，您可以并行安装两个 Xcode 版本。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-04T12:24:25.970

在我的另一台仍然有 XCode 4.2 的笔记本电脑中，iOS 5 SDK 的位置在这里：/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/（与[上面](https://stackoverflow.com/a/12602603/766570)提到的位置相反）

所以我只是把它复制过来，瞧！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-05T21:28:04.317

1) 第一步：在此链接 [http://uv.howett.net/~dhowett/sdks.php下载您的模拟器](http://uv.howett.net/~dhowett/sdks.php)

2）第二步解压缩并将下载的模拟器添加到路径：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs

3）重启Xcode。（如果需要，在项目设置中设置部署目标 5.0）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-18T17:18:34.883

您只需要使用 Xcode -> Preferences -> Downloads 屏幕安装所需的 SDK：

![Xcode 中下载面板的屏幕截图 -> 首选项](../Images/0734fa63008a44f5cc557186f9bc38f3.png)

如果你想要的话，那会给你 iOS5.1 模拟器、iOS5.0 模拟器、iOS4.3 模拟器。

不需要诡计。

# objective-c - 如何在 iOS 6 中使用 SLComposeViewController 将不可编辑的 url 添加到 facebook 帖子？

> ID：12602410
> 
> 赞同：3
> 
> 时间：2012-09-26T13:04:49.353
> 
> 标签：objective-c, xcode, ios6

如果尝试将图像添加到 facebook 帖子中，则使用 ios6 中的社交框架，添加的 URL 将变得可编辑。URL 出现在可编辑的文本区域中。如果没有添加图像，则 URL 仍然不可编辑。

```
 if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
       mySLComposerSheet = [[SLComposeViewController alloc] init];
       mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
       [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"iOS 6 %@ integration test!",mySLComposerSheet.serviceType]];
       [mySLComposerSheet addImage:[UIImage imageNamed:@"image.png"]];
       [mySLComposerSheet addURL:[NSURL URLWithString:@"http://www.StackOverflow.com/"]];
       [self presentViewController:mySLComposerSheet animated:YES completion:nil];
    } 
```

我想要的是让 URL 和图像在帖子中不可编辑。而用户仍然可以输入额外的文本。知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:25:34.203

作为 的一部分，`Social.framework`出于某些安全考虑，您不能使用户无法编辑文本。正如您所做的那样，您所能提供的只是用户可以发布的内容。如果您的应用程序足够好，用户可能会选择发布您所写的内容。如果它对您很重要，您可能想查看[Facebook 的 API](https://developers.facebook.com/ios/)，但我对此无能为力。

# visual-studio-2010 - 使用自定义控制台进行 Visual Studio 控制台应用程序调试

> ID：12602411
> 
> 赞同：49
> 
> 时间：2012-09-26T13:04:53.247
> 
> 标签：visual-studio-2010, debugging, console, console-application

调试控制台应用程序时是否可以将 Visual Studio 设置为使用非标准控制台？

我不确定默认控制台是什么，它看起来就像`cmd.exe`. 当我调试时，我真的很希望我的控制台应用程序在 ConEmu 中运行。

为了清楚起见，我想单击“开始调试”，该过程应该像往常一样发生，但不是调出`cmd.exe`控制台，而是调出 ConEmu 控制台（或其他任何东西）。

我正在使用 Visual Studio 2010 Pro

与这个（未回答的）问题密切相关：[使用 Console2 进行 Visual Studio 调试？](https://stackoverflow.com/questions/4088123/use-console2-for-visual-studio-debugging)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-26T16:11:12.930

你混淆了条款。“Windows 控制台”不是“cmd.exe”，而是特殊的“服务”，例如 Win7 中的“conhost.exe”。

当您启动**任何**控制台应用程序（无论是 cmd、powershell 还是您自己的应用程序）时，窗口都会在特殊环境中启动它，该环境可能具有可见的控制台窗口。但它始终是内部 Windows 控制台。

但！控制台模拟器可能会抓住这个窗口，隐藏真正的控制台并显示他们自己的模拟表面。例如，您可以使用特殊开关启动 ConEmu（在 SU 中描述，评论中的链接）并完成。

**默认终端更换**

ConEmu 有一个名为`Default Terminal`. 如果启用此功能，您将在 ConEmu 终端中从 Visual Studio 无缝启动您的应用程序。这个想法是在源应用程序中挂钩 CreateProcess（`explorer.exe`等等`vcexpress.exe`，在设置中用它们分隔`|`）。[在项目 wiki](https://conemu.github.io/en/DefaultTerminal.html)中阅读有关该功能的更多信息。

您可以选择使用现有的 ConEmu 实例或为您的应用程序运行新窗口。ConEmu 可以`Press Enter or Esc to close console...`在您的应用程序退出（`Always`收音机）后在控制台上显示消息。无需再`readline`在程序末尾添加即可查看输出。

![ConEmu DefTerm 设置页面](../Images/b3f5c9a162d1f8e588fc53c8720a7c65.png)

**更改您的应用程序代码**

因为它是您自己的程序，您可以在`main`函数的头部添加例如以下行

**C++ 示例**

```
#ifdef _DEBUG
if (IsDebuggerPresent())
{
  STARTUPINFO si = {sizeof(si)}; PROCESS_INFORMATION pi = {};
  if (CreateProcess(NULL,
        _T("\"C:\\Program Files\\ConEmu\\ConEmu\\ConEmuC.exe\" /AUTOATTACH"),
        NULL, NULL, FALSE, NORMAL_PRIORITY_CLASS, NULL, NULL, &si, &pi))
  { CloseHandle(pi.hProcess); CloseHandle(pi.hThread); }
}
#endif 
```

**C# 示例**

```
#if DEBUG
ProcessStartInfo pi = new ProcessStartInfo(@"C:\Program Files\ConEmu\ConEmu\ConEmuC.exe", "/AUTOATTACH");
pi.CreateNoWindow = false;
pi.UseShellExecute = false;
Console.WriteLine("Press Enter after attach succeeded");
Process.Start(pi);
Console.ReadLine();
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:27:18.093

一些想法：

1.  只需直接在 ConEmu 中启动您的程序，然后从 Visual Studio 的“调试”菜单中选择“附加到进程”。您可以在程序开始时添加延迟，以便有时间附加。如果您必须一遍又一遍地这样做，这会有点痛苦，但它通常对这种情况很有用。

2.  将`__debugbreak();`语句添加到程序的开头（可能在`#ifndef NDEBUG`块内）。直接从 ConEmu 启动您的程序。当调试中断命中时，使用 Visual Studio 的 JIT 功能进行连接，并从那里继续调试。

# c - int *x[] 和 int (*x)[] 的区别？

> ID：12602413
> 
> 赞同：1
> 
> 时间：2012-09-26T13:05:00.777
> 
> 标签：c, required, lvalue

我的老师让我找出区别。有人可以帮我吗？实际上我知道第一部分是指针数组，但第二部分是什么意思。两者都不相同，因为我为此尝试了一个代码：

```
i = 1;
j = 2;
x[0] = &i;
x[1] = &j; 
```

收到错误提示“需要左值”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T13:12:18.490

如有疑问，请咨询[cdecl](http://cdecl.org/)：

```
int (*x)[]
declare x as pointer to array of int

int *x[]
declare x as array of pointer to int 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T13:10:19.327

```
int *x[3]; 
```

这`x`是一个由 3 个指针组成的数组`int`。

```
int (*x)[3]; 
```

这是一个指向三个s`x`数组的指针。`int`

这是两者的使用示例：

```
int* arrayOfPointers[3];
int x, y, z;
arrayOfPointers[0] = &x;
arrayOfPointers[1] = &y;
arrayOfPointers[2] = &z;

int (*pointerToArray)[3];
int array[3];
pointerToArray = &array; 
```

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:33:51.670

从变量名“x”附近开始并以类型结束，记住[Operator Precedence](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)。意思是，() 和 [] 中 * 之前的任何内容。

```
 x[] -- x is an array
    *x[] -- x is an array of pointers
int *x[] -- x is an array of pointers to ints

(*x)        -- x is a pointer
(*x) []     -- x is a pointer to an array
int (*x)[]  -- x is a pointer to an array of type int 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T13:37:55.980

首先，请记住 C 声明反映了*表达式*的类型（即，声明模仿使用）。

例如，如果您有一个指向整数的指针，并且想要访问所指向的整数值，则可以使用一元运算符取消对指针的*引用*`*`，如下所示：

```
int x = *p; 
```

*表达式* 的类型`*p`是`int`，所以指针的声明`p`是

```
int *p; 
```

`int`现在假设您有一个指向;的指针数组。要访问任何特定的整数值，您可以在数组中下标以找到正确的指针并取消引用结果：

```
int x = *a_of_p[i]; 
```

下标运算符`[]`的优先级高于一元运算`*`符，因此表达式`*a_of_p[i]`被解析为`*(a_of_p[i])`; 我们正在取消引用表达式的结果`a_of_p[i]`。由于*表达式* `*a_of_p[i]`的类型是`int`，所以数组的声明是

```
int *a_of_p[N]; 
```

现在翻转它；而不是指向 的指针数组`int`，您有一个指向 的数组的指针`int`。要访问特定的整数值，您必须首先取消引用指针*，*然后为结果下标：

```
int x = (*p_to_a)[i]; 
```

由于`[]`优先级高于`*`，我们必须使用括号来强制对运算符进行分组，以便将下标应用于表达式的*结果*`*p_to_a`。由于表达式的类型`(*p_to_a)[i]`是`int`，因此声明是

```
int (*p_to_a)[N]; 
```

当你看到一个看起来有点毛茸茸的声明时，从最左边的标识符开始，然后走出来，记住这一点，`[]`并且`()`具有比 更高的优先级`*`，指针数组也是如此，是指向`*a[]`数组的指针，`(*a)[]`是`*f()`返回指针的函数,`(*f)()`是指向函数的指针：

```
 x       -- x
    (*x)      -- is a pointer
    (*x)[N]   -- to an N-element array 
int (*x)[N]   -- of int

     x        -- x
     x[N]     -- is an N-element array
    *x[N]     -- of pointer
int *x[N];    -- to int. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:11:40.107

`int(*x)[ARRAY_SIZE]`解释为指向整数数组的指针。

# objective-c - 跟踪方法 iOS 的进度？

> ID：12602419
> 
> 赞同：0
> 
> 时间：2012-09-26T13:05:20.623
> 
> 标签：objective-c, ios, progress-bar, observer-pattern

一般来说，有没有办法跟踪方法的完成进度？与某种观察者或类似的东西。

我一直在寻找，但只有关于如何通过互联网请求实现它的参考资料。我知道该怎么做，但我想跟踪特定方法的进度。是否可以？

在这种情况下，我要跟踪的方法是 UISaveVideoAtPathToSavedPhotosAlbum。我不知道这是否可能。如果可能的话，我特别感兴趣。

非常感谢您的建议！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:51:45.330

异步操作的函数/方法的进度更新有三种常见的编码模式：

1.  异步函数/方法可以将[选择器](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)作为参数，并且可以按照文档说明调用该方法。这在简单地报告某些异步事件的完成时很有用，例如在`UISaveVideoAtPathToSavedPhotosAlbum`.

2.  有一些[协议](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocProtocols.html)（在这些协议中，您的后台进程将具有一些`delegate`属性，这些属性定义了哪个对象将符合协议，从而被通知关键事件或进度）。

3.  有一些[通知](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html%23//apple_ref/doc/uid/10000043i)，其中后台进程通过[NSNotificationCenter](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)进行通知，并调用哪些对象`addObserver`来接收通知。

如果您正在编写自己的后台进程，则可以使用这些技术中的任何一种（我通常使用委托），但如果您使用的是一些现有的框架或第三方库，则您依赖于它们可能的任何通知/委托接口已提供。如果框架/库不提供任何这样的接口，那么你就很不走运了。

如果[`UISaveVideoAtPathToSavedPhotosAlbum`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894-CH3-SW41)您只有`completionTarget`and`completionSelector`来异步通知您该过程的完成（例如，您可以有一些[`UIActivityIndicatorView`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)微调器显示保存正在进行中，然后停止您的活动指示器`completionSelector`），但我不认为此功能有任何临时进度界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:36:24.980

软件中看到的许多进度指示器实际上是伪造的，或者充其量表示操作的一部分已完成而不是时间（并不总是相同）。这显然是没有可衡量的有形的东西的情况，或者在有衡量它的方法的情况下。

在这种情况下，`UISaveVideoAtPathToSavedPhotosAlbum`似乎无法获得部分完成的通知 - 只有完全完成。

在现代 UI 设计实践中非常明显的是，进度指示器现在通常不显示操作完成的比例。有一种观点认为，显示未显示完成比例的指标比显示错误比例的指标要好。

如果您想沿着伪造进度指示器的路线走下去，最好的办法是测量开发过程中操作所花费的时间，并在此基础上为您的进度指示器设置动画。经过几次操作后，您将能够细化估算值。显然，用户不太可能抱怨某项操作花费的时间少于进度指示器显示的时间，但他们会注意到何时花费的时间明显更多。您可能会选择超出预期并延长您的初始估计。

Apple 曾经在旧版本的 MacOSX 上启动时显示的 UI 上精确地使用了这个技巧。他们在每次连续启动时都改进了他们的估计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:32:52.530

没有通用的解决方案。这取决于相关方法的作者是否提供了一种请求回调或询问进度的方法。

从仅提供完成回调的文档看来`UISaveVideoAtPathToSavedPhotosAlbum`，因此无法获得定期更新。

# c# - C# Predicate.Target：取回 urnderlying 对象

> ID：12602420
> 
> 赞同：0
> 
> 时间：2012-09-26T13:05:22.640
> 
> 标签：c#, delegates, predicate

早上好。

让我给你看一些代码：

```
 //Db is a database of Tag objects, sort of
    Db db;   
    string code = "123";
    var selectedTag = db.Select(new Predicate<Tag>(tag => tag.Code == code));

    //...

    class Db
    {
        //A query method, accepting a Predicate
        public Tag Select(Predicate<Tag> predicate)
        {
            /* Here, using Intellisense, I see that Target property is a Tag object,
              but I can't cast it to Tag! Why??
            */
            var t = predicate.Target as Tag; //Always null!
        }
    } 
```

我基本上有一个简单的`Tag`对象数据库；当调用者调用`Select`方法时，我会从中检索`Tag`对象istance `predicate`，但实际上我无法让它工作。
在调试中使用 Intellisens，当我在`Select`方法中时，我清楚地看到它`predicate.Target`引用了我的`Tag`对象，但我不知道如何检索它。
有任何想法吗？
谢谢你。

**编辑** 如果我尝试不安全地投射`predicate.Target`到`Tag`，这样：

```
var t = (Tag)predicate.Target; 
```

我得到一个`InvalidCastException`; 好的，但是`Exception`消息说我不能将 type 的对象`DbTests`转换为 type `Tag`。
`DbTests`是我用于测试目的的 NUnit 测试类（显然...:)。
奇怪的！
**编辑 2** 行中的错字：

```
var selectedTag = db.Select(new Predicate<Tag>(tag => tag.Code == code)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:15:14.370

`predicate.Target`很可能不是您想要的。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.delegate.target.aspx) `Delegate.Target` “获取当前委托调用实例方法的类实例。”。您说您在单元测试类中调用该代码`DbTests`，因此非常合适。

老实说，您的完整代码看起来*是错误*的。我想你不想在`Select`这里有一个方法，而是一个`Where`方法。a 中的谓词`Select`没有太大意义，因为 a`Select`只是从一个输入值到一个输出值的投影。将谓词传递给此类投影意味着输出值始终为 bool 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:12:48.863

您的`Select`方法需要一个委托（该委托的类型是 a `Predicate<T>`，更具体地说是`Predicate<Tag>`）。该委托指向一个实例和一个方法。您为委托传递的内容是 lambda `tag => tag.Code == code`。该 lambda 使编译器为此代码生成一个方法。该方法要么包含在调用 的实例中，要么包含在`Select`新类中。如果生成的方法是`static`，将没有实例，并且`Target`将是`null`。在任何情况下，包含该方法的类都不是`Tag`（除非调用`Select`在`Tag`类中；但您没有详细说明）。因此，`Target`不能成为`Tag`对象，也永远无法`Tag`成功转换。

应该*给*select 接收的谓词一个`Tag`对象。例如：

```
public Tag Select(Predicate<Tag> predicate)
{
    Tag tag = new Tag();
    bool result = predicate(tag);
    return tag;
} 
```

目前尚不清楚您真正想在其中做什么`Select`；但`Predicate<Tag>`只是返回`true`或`false`取决于`Tag`给它。

### 更新：

在您的示例中，就好像您这样写：

```
public class DbTests
{
    public void Test1()
    {
        Db db = new Db();
        Tag selectedTag = db.Select((Predicate<Tag>) TestTag);
    }

    private bool TestTag(Tag tag)
    {
        return tag.Code == "123";
    }
} 
```

上面的代码片段中没有任何`Tag`实例。

### 更新：

如果您使用了包含类的实例方法，例如：

```
public class DbTests
{
    public string code = "123";
    public void Test1()
    {
        Db db = new Db();
        Tag selectedTag = db.Select(tag => tag.Code == code);
    }
} 
```

然后发送到 select 的谓词将有一个与之关联的实例，因此`Target`不会为空。在上面的代码中，`Target`将是 type`DbTest` 但是，如果您将 Select 调用放在其中`TagData`（例如`DbTests`重命名为`TagData`），那么`Target`将是 type`TagData`并向您显示实例成员`TagData`，您将获得您在屏幕截图中看到的内容。

`Select`对于使用`Predicate<T>`

# android - 带有 Checkbox、RadioButton、Textview 和按钮的 Listview 在 android 中无法正常工作

> ID：12602426
> 
> 赞同：5
> 
> 时间：2012-09-26T13:05:36.360
> 
> 标签：android, android-listview, android-button, android-checkbox

我正在创建一个 android 应用程序，我的应用程序的 UI 如下所示。

**单击提交按钮时，我需要选中的复选框和单选按钮值。**

示例 Linux 未选中，cc（单选按钮）已选中。

记录在列表视图中动态填充，但我无法使其工作。有很多问题。

1.  当我滚动列表视图单选按钮时，会自动选择或取消选择无法保持单选按钮的状态。
2.  单击按钮时未获得选定的单选按钮以及复选框。

下面是我的布局以及java程序。建议我获得正确的值。

![应用图像](../Images/20ef50fa069f03001ce485fcc96ff6e0.png)

**主.xml**

```
<ListView
    android:id="@+id/my_list"
    android:layout_width="fill_parent"
    android:layout_height="199dp" />

<Button
    android:id="@+id/submit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Submit"
    /> 
```

**行.xml**

```
<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:layout_toRightOf="@+id/check"
    android:textSize="20sp" >
</TextView>

<CheckBox
    android:id="@+id/check"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="4dip"
    android:layout_marginRight="10dip"
    android:focusable="false"

    android:focusableInTouchMode="false" >
</CheckBox>

 <RadioGroup
     android:id="@+id/radioSex"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:layout_alignParentRight="true"
     android:layout_alignParentTop="true"
     android:orientation="horizontal" >

     <RadioButton
         android:id="@+id/to"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginLeft="10dip"
         android:checked="true"
         android:text="To" />

     <RadioButton
         android:id="@+id/cc"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginLeft="10dip"
         android:text="CC" />
 </RadioGroup> 
```

**MyAdaptor.java**

```
public class MyAdapter extends ArrayAdapter<Model> {

    private final List<Model> list;
    private final Activity context;
    boolean checkAll_flag = false;
    boolean checkItem_flag = false;

    public MyAdapter(Activity context, List<Model> list) {
        super(context, R.layout.row, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder viewHolder = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            convertView = inflator.inflate(R.layout.row, null);
            viewHolder = new ViewHolder();
            viewHolder.text = (TextView) convertView.findViewById(R.id.label);
            viewHolder.checkbox = (CheckBox) convertView
                    .findViewById(R.id.check);

            viewHolder.checkbox
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            int getPosition = (Integer) buttonView.getTag();
                            list.get(getPosition).setSelected(
                                    buttonView.isChecked());
                        }
                    });
            convertView.setTag(viewHolder);
            convertView.setTag(R.id.label, viewHolder.text);
            convertView.setTag(R.id.check, viewHolder.checkbox);

        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }
        viewHolder.checkbox.setTag(position);

        viewHolder.text.setText(list.get(position).getName());
        viewHolder.checkbox.setChecked(list.get(position).isSelected());

        return convertView;
    } 
```

**MainActivity.java**

```
public class MainActivity extends Activity implements OnItemClickListener {

    ListView listView;
    ArrayAdapter<Model> adapter;
    List<Model> list = new ArrayList<Model>();

    private RadioGroup radioCcToGroup;
    private RadioButton radioTypeButton;
    private Button btn;

    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        listView = (ListView) findViewById(R.id.my_list);

        btn = (Button) findViewById(R.id.submit);

        btn.setOnClickListener(new View.OnClickListener() {
            int count = 0;

            @Override
            public void onClick(View view) {

                count = listView.getAdapter().getCount();
                for (int i = 0; i < count; i++) {
                    // here i am not able to get the records as getting on onItemClick of the listview
                }
            }
        });

        adapter = new MyAdapter(this, getModel());
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3) {
        TextView label = (TextView) v.getTag(R.id.label);
        CheckBox checkbox = (CheckBox) v.getTag(R.id.check);
        Toast.makeText(v.getContext(),
                label.getText().toString() + " " + isCheckedOrNot(checkbox),
                Toast.LENGTH_LONG).show();

    }

    private String isCheckedOrNot(CheckBox checkbox) {
        if (checkbox.isChecked())
            return "is checked";
        else
            return "is not checked";
    }

    private List<Model> getModel() {
        list.add(new Model("Linux"));
        list.add(new Model("Windows7"));
        list.add(new Model("Suse"));
        list.add(new Model("Eclipse"));
        list.add(new Model("Ubuntu"));
        list.add(new Model("Solaris"));
        list.add(new Model("Android"));
        list.add(new Model("iPhone"));
        list.add(new Model("Java"));
        list.add(new Model(".Net"));
        list.add(new Model("PHP"));
        return list;
    } 
```

**模型.java**

```
private String name;
    private boolean selected;

    public Model(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:52:05.663

您在**MyAdaptor.java**上都有 2 个错误：

1.  当您附加`onCheckedChangeListener`时，只有在需要创建新视图并且您忘记了列表视图重用视图的情况时才会这样做。你应该`setOnCheckedChangeListener`在外面`if (convertView == null)`。

2.  滚动完成时似乎也调用了 onCheckedChangeListener （因为`viewHolder.checkbox.setChecked(list.get(position).isSelected());`）。您可以通过使用`OnClickListener`over`viewHolder.checkbox`或不调用来避免这种情况`viewHolder.checkbox.setChecked()`。

这是我的代码：

```
private class ViewHolder {
    protected TextView text;
    protected CheckBox checkbox;
    protected RadioGroup radioGroup;
}

public class MyAdapter extends ArrayAdapter<Model> {

    private final List<Model> list;
    private final Activity context;
    boolean checkAll_flag = false;
    boolean checkItem_flag = false;

    public MyAdapter(Activity context, List<Model> list) {
        super(context, R.layout.row, list);
        this.context = context;
        this.list = list;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder viewHolder = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            convertView = inflator.inflate(R.layout.row, null);

            viewHolder = new ViewHolder();
            viewHolder.text = (TextView) convertView.findViewById(R.id.label);
            viewHolder.checkbox = (CheckBox) convertView.findViewById(R.id.check);
            viewHolder.checkbox.setTag(position);
            viewHolder.radioGroup = (RadioGroup) convertView.findViewById(R.id.radioSex);
            viewHolder.radioGroup.setTag(position);

            convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }

        viewHolder.text.setText(list.get(position).getName());
        viewHolder.checkbox.setChecked(list.get(position).isSelected());
        viewHolder.checkbox.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                CheckBox checkbox = (CheckBox) v;
                int getPosition = (Integer) checkbox.getTag();
                list.get(getPosition).setSelected(checkbox.isChecked());
            }
        });

        viewHolder.radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                boolean isCcOrIsTo = (checkedId == R.id.cc);
                int getPosition = (Integer) group.getTag();
                list.get(getPosition).setCcOrIsTo(isCcOrIsTo);
            }
        });

        return convertView;
    }
} 
```

请注意，我也添加了对无线电组的一些控制，因此**Model.java**已更改：

```
public class Model {

    private String name;
    private boolean selected;
    private boolean isCcOrIsTo;

    public Model(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }

    public boolean isCcOrIsTo() {
        return isCcOrIsTo;
    }

    public void setCcOrIsTo(boolean isCcOrIsTo) {
        this.isCcOrIsTo = isCcOrIsTo;
    }

    @Override
    public String toString() {
        String selectedString = selected ? "selected" : "not selected";
        String value = isCcOrIsTo ? "CC" : "To";
        return name+" -> "+selectedString+ " with value "+value;
    }
} 
```

最后，您不需要`onItemClick`在**MainActivity.java**上检查单击峰会按钮时值是否正确：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_main);

    listView = (ListView) findViewById(R.id.my_list);

    btn = (Button) findViewById(R.id.submit);

    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            for (Model m : list) {
                Log.i("Stack1", m.toString());
            }
        }
    });

    ArrayAdapter<Model> adapter = new MyAdapter(this, getModel());
    listView.setAdapter(adapter);
} 
```

希望能帮助到你 ;）

# clearcase - 何时在 RTC 源代码管理中使用命令行客户端？

> ID：12602428
> 
> 赞同：1
> 
> 时间：2012-09-26T13:05:43.367
> 
> 标签：clearcase, rtc

是否有任何使用 RTC Eclipse 插件无法使用的命令行来实现的功能？

一些用户对基于 gui 的操作的命令行有着自然的偏好，但是在 RTC 源代码控制中使用命令行相对于基于 GUI 的操作有什么真正的优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:40:38.067

scm 命令不完整，尤其是关于构建（由 Jazz Build Toolkit 介绍）

但*大部分*操作都可以通过[普通 Java 客户端库 (PJCL)完成](https://jazz.net/downloads/rational-team-concert/releases/3.0.1.1?p=allDownloads#plainzips)

并且*所有*操作都应该可以通过 https REST 查询访问，遵循 OSLC。

请参阅“[集成和扩展 Rational Team Concert（SDK）](https://jazz.net/wiki/bin/view/Main/RtcSdk20) ”和
“[使用 OSLC_CM 1.0 的面向资源的工作项 API](https://jazz.net/wiki/bin/view/Main/ResourceOrientedWorkItemAPIv2) ”。

![核心 API](../Images/a8561cfb88cf62db7f86e318eb5d1d3a.png)

# javascript - EmberJS 嵌套视图和控制器

> ID：12602429
> 
> 赞同：10
> 
> 时间：2012-09-26T13:05:51.433
> 
> 标签：javascript, model-view-controller, ember.js

我正在用 EmberJS v1.0.pre 编写一个应用程序。我有一个`ArrayController`包含所有人的列表。有一堆嵌套视图显示了这个人、他们的宠物以及每只宠物的注释。

```
|----------------------------------------|
| John                                   | <- Person
|----------------------------------------|
|   Quincy (Dog)                         | <- Pet
|     - Super ornery                     | <- Note
|     - Likes XYZ Dog food               |
|     - Will eat your socks              |
|                                        |
|   Tom (Cat)                            |
|    - Always (not) catching mice        |
|                                        |
|----------------------------------------|
| Roger                                  |
|----------------------------------------|
|   V (Dog)                              |
|    - Likes XYZ Dog food                |
|    - Sneezes, but it's ok              |
|                                        |
|----------------------------------------|
| ...                                    | 
```

从纯 MVC 的角度来看，感觉每个孩子都应该有一个控制器，但我不知道如何在 Ember 中实现这一点。有顶部的 Array 控制器，然后是所有单独的视图。如果我想删除或编辑注释，似乎我需要将视图的上下文传递给控制器​​。

```
// in the view
click: function () {
  this.get('controller').updateNote(this.get('content'))
} 
```

这对我来说感觉很糟糕，视图不应该是数据的权威来源。我的假设是 ArrayController 会实例`itemControlerClass`化`itemViewClass`.

**更新：**我创建了一个[小提琴](http://jsfiddle.net/noazark/HmHK3/)来更好地说明我的问题。该功能是故意不完整的，目的是在单击列表上的项目时通过增加内容来完成功能。

**更新：**对不起，我意外删除了小提琴！我正在为最终解决方案做一些工作，所以我将尝试使用该解决方案创建一个新的小提琴。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T22:35:05.907

> “从纯 MVC 的角度来看，感觉应该为每个孩子都有一个控制器”

您不需要为每个项目设置一个控制器，而是为每个对象集合（人物、宠物、便笺）设置一个 ArrayController。顺便说一句，对子对象（狗、笔记）的任何操作都不应该传递给`App.PersonsController`. 这将打破[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)原则。

Ember.Router 文档涵盖了您希望将视图嵌套在单个对象（例如`/:people_id`）中的情况。但是您想为一组对象嵌套视图。我想不出嵌套`{{outlet}}`视图的方法，但您可以执行以下操作：

在 3 个 ArrayController 中加载对象 People、Pets、Notes，并将对子对象的操作委托给其对应的 ArrayController。

```
App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    route: '/',
    persons: Ember.Route.extend({
        connectOutlets: function(router) {

          router.get('applicationController').connectOutlet('persons');
          // App.Note.find() fetches all Notes,
          // If you are not using ember-data, make sure the notes are loaded into notesController
          router.set('notesController.content', App.Note.find());
          router.set('petsController.content', App.Pet.find());
        }
    })
  })
}); 
```

然后您的`people`模板应如下所示：

```
{{#each person in people}}
  <h1>My name is {{person.name}}</h1>

  {{#each pet in person.pets}}
     I have a pet with name {{pet.name}}
     <a {{action delete pet target="App.router.petsController">Delete pet</a>
  {{/each}}      

  {{view Ember.TextField valueBinding="myNewPetName" type="text"}}
  <a {{action create myNewPetName person target="controller"}}>
    Add a new pet for this person
  </a>

  {{#each note in person.notes}}
    <!-- delete, create, edit ... -->
  {{/each}} 
```

如您所见，子对象上的操作被委托给其控制器（pet -> petsController），将对象作为上下文传递。在`create`动作的情况下，控制器需要知道宠物对哪个人`belongsTo`。因此，我们传递了 2 个上下文：人和宠物的属性（为简单起见，我假设只是宠物的名字）。

在您的 App.petsControllers 中，您应该采取以下行动：

```
App.PetsController = Ember.ArrayController.extend({
   delete: function(e) {
     var context = e.context;
     this.get('content').removeObject(context);
     // Also, if you use ember-data,
     // App.Pet.deleteRecord(context);
   },

   create: function(e) {
     var petName = e.contexts[0]
     var person = e.contexts[1];
     this.get('content').pushObject({name: petName, person: person});
     // with ember-data:
     // App.Pet.createRecord({name: petName, person: person});
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:44:40.190

你应该使用插座。它们是 Ember 视图中的小“占位符”，可以使用不同的控制器进行处理。

上面的链接对它们有一个公平的解释，您已经检查过但什么也没找到。但在你回到之前，请先阅读： http: [//trek.github.com/](http://trek.github.com/)

如果其中任何一个仍然对您没有帮助，请告诉我，我会为您整理一个示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:56:12.987

我认为[这](http://codebrief.com/2012/07/anatomy-of-an-ember-dot-js-app-part-i-redux-routing-and-outlets/)就是您正在寻找的东西，请看一下，它非常简单，您也可以查看[此](http://ghempton.github.com/ember-router-example/)示例。基本上，您可以通过插座、路由器和连接所有插座的操作来实现您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T04:01:29.567

我是 Ember 的新手，一直在寻找一种方法来做类似的事情。在顶级 ArrayController 中，我只使用了该`itemController`属性并且效果很好：

```
App.PeopleController = Ember.ArrayController.extend({
    itemController: "Person"
});

App.PersonController = Ember.ObjectController.extend //... 
```

我的完整解决方案在[这个 js fiddle](http://jsfiddle.net/balexand/DaNaV/10/)中。不幸的是，我让`PetController`实例工作的方式对我来说似乎很老套。

# ruby-on-rails-3 - 消息中缺少消息线程的 ID (accepts_nested_attributes_for)

> ID：12602437
> 
> 赞同：0
> 
> 时间：2012-09-26T13:06:15.320
> 
> 标签：ruby-on-rails-3, nested-attributes

我有两个模型：

```
class MessageThread < ActiveRecord::Base
    has_many :messages
    attr_accessible :messages_attributes, :subject
    accepts_nested_attributes_for :messages
end 
```

和

```
class Message < ActiveRecord::Base
    belongs_to :message_thread
    belongs_to :sender, :polymorphic => true
    attr_accessible :sender_id, :sender_type, :sender, :content
end 
```

在我`new.html.erb`看来，事情是这样的：

```
<%= simple_form_for @message_thread do |f| %>
    <%= f.input :subject, :label => t('message.subject')%>
    <%= f.simple_fields_for :messages do |m| %>
        <%= m.input :content , :label => t('message.content') %>
    <% end %>

    <%= f.button :submit, t('message.send_message') %>
<% end %> 
```

在我的`MessageThreadsController`东西看起来像这样：

```
def new
   @message_thread = MessageThread.new
   @message_thread.messages.build
end

def create
   @message_thread = MessageThread.new(params[:message_thread])
   @message_thread.save!
end 
```

我得到的错误是`Message thread can't be blank`. `message_thread_id`如果在保存之前我不知道它会是哪个，我应该如何设置它`@message_thread`？我显然做错了什么，但我不知道是什么......

谢谢你的帮助

# python - 在python中做列表减法

> ID：12602438
> 
> 赞同：1
> 
> 时间：2012-09-26T13:06:26.347
> 
> 标签：python, python-3.x

> **可能重复：**
> [Python 列表减法运算](https://stackoverflow.com/questions/3428536/python-list-subtraction-operation)

在 Python 中，您可以像这样连接列表：

```
print([3,4,5]+[4,5]) 
```

这给出了这个输出：

```
[3,4,5,4,5] 
```

但我正在寻找的是一个等效的“减法”操作，所以做这样的事情：

```
print([3,4,5]-[4,5]) 
```

会输出这个：

```
[3] 
```

但是，没有为列表定义减法运算符。我试过这个：

```
a = [3,4,5]
b = [4,5]
print(list(filter(lambda x : x not in b,a))) 
```

哪个有效，但我不确定这是否是最好的方法。我也想保留原来的物品位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:09:23.243

您可以使用列表推导轻松地做到这一点：

`nl = [elem for elem in a if elem not in b]`

**编辑**

最好使用 a`set`来测试。这将从您的列表中删除重复项。

```
bb= set(b)
nl = [elem for elem in a if elem not in bb] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T13:40:28.303

这是一个定义不明确的问题。我可以想到列表“减法”的几个非等价定义，其中两个已经被表示：截断（通过切片） - 串联的真正逆；和过滤，类似于集合的“减法”（真正的相对互补）的定义。对于过滤，使用列表推导而不是`a`转换`b`为集合是最好的方法。（即[larsvegas](https://stackoverflow.com/a/12602498/577088)的回答。）

但尚未考虑的一个版本是减法的*多集*定义。Python 的`Counter`类型为我们提供了一个多重集：

```
>>> from collections import Counter
>>> a = [3, 4, 5]
>>> b = [4, 5]
>>> a_counter = Counter(a)
>>> b_counter = Counter(b)
>>> a_counter
Counter({3: 1, 4: 1, 5: 1})
>>> b_counter
Counter({4: 1, 5: 1})
>>> a_counter - b_counter
Counter({3: 1}) 
```

当然，这不会保留顺序，但我们可以通过`a`基于以下结果进行过滤来解决这个问题`a_counter - b_counter`：

```
def subtract_lists(a, b):
    multiset_difference = Counter(a) - Counter(b)
    result = []
    for i in a:
        if i in multiset_difference:
            result.append(i)
            multiset_difference -= Counter((i,))
    return result 
```

这有几个不错的属性。它保持秩序；它的作用是串联的真正逆；它在可以包含重复项的数据类型上实现了直观一致的减法版本；它在线性时间内工作。

```
>>> subtract_lists(a, b)
[3]
>>> subtract_lists([1, 2, 3, 4], [2, 3, 4])
[1]
>>> subtract_lists([1, 2, 3, 4], [2, 4])
[1, 3]
>>> subtract_lists([1, 2, 3, 4, 4, 4], [2, 4])
[1, 3, 4, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:17:32.057

```
a = [3,4,5]
b = [4,5]

list(set(a) -  set(b))
[3] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T13:19:35.287

如果您的意思是从列表中删除最后一个元素的减法，那么使用列表切片是一个非常简单的操作：

```
def list_subtraction(seq, remove):
    l = len(remove)
    if seq[-l:] == remove:
        return seq[:-l]
    else:
        raise ValueError("Subtraction not possible, "
                         "{} is not a tail of {}.".format(remove, seq)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T13:10:28.047

这当然是因为它只是附加，这就是为什么根本不会删除或影响重复项的原因。

减法只是切掉结尾：

```
a = [3, 4, 5]
b = [4, 5]
c = a + b

d = c[:-len(b)] 
```

这将使`d`相等`a`，即`[3, 4, 5]`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T14:33:02.273

鉴于：

```
a = [3, 4, 5]
b = [4, 5] 
```

然后根据您的需要，以下其中一项应该可以工作。

```
# remove 'b' from the end of 'a' if it's there (strict de-concatenation)
if a[-len(b):] == b:
    a = a[:-len(b)]

# remove any elements from 'a' that are in `b` (including multiples)
bset = set(b)
a = [x for x in a if x not in bset]

# faster version of above but doesn't preserve order
a = list(set(a) - set(b))

# remove elements from 'a' that are in 'b' (one leftmost item only)
bset = set(b)
a = [x for x in a if x not in bset or bset.remove(x)]

# remove elements from 'a' that are in 'b' (one rightmost item only)
bset = set(b)
a = list(reversed([x for x in reversed(a) if x not in bset or bset.remove(x)])) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T13:37:17.537

如果您希望它从列表中的任何位置删除内容，并且只删除它们出现在第二个列表中的次数（这样`sub([1, 2, 3, 3, 4, 4, 5], [3, 4, 5]) == [1, 2, 3, 4])`，您需要稍微复杂一点，并从右边的（副本）中删除每个元素- 使用时的手清单：

```
def sub(l, r):
    '''
    Remove all elements in r from l
    '''
    r = r[:]
    res = []
    for a in l:
        try:
            i = r.index(a)
        except ValueError:
            res.append(a)
        else:
            del r[i]
    return res 
```

例如，如果你想`[1, 2, 3] - [4]`成为一个错误，你可以在循环之后检查是否`r`为非空。

# drupal - Drupal 视图 - 从寻呼机末尾开始

> ID：12602439
> 
> 赞同：0
> 
> 时间：2012-09-26T13:06:26.953
> 
> 标签：drupal, views

有没有办法让视图默认位于寻呼机列表的末尾而不是开头。即 - 想想一个网络漫画，我想先显示最后一个项目，如果他们愿意的话让他们回去。

我不想只按 DESC 顺序列出，因为寻呼机会将较旧的条目列为“NEXT”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:31:55.910

听起来[Views Simple Pager](http://drupal.org/project/views_simple_pager)模块可能会满足您的需求。

# php - PHP在包含文件中打开花括号，但未关闭

> ID：12602441
> 
> 赞同：0
> 
> 时间：2012-09-26T13:06:31.473
> 
> 标签：php

是否可以`try/catch`在单独的文件之间分隔块？例如，我有一个打开 try 的 page_start.php：

```
<?php

    try { 
```

然后这个文件包含在其他各种文件的开头。page_end.php 包含在底部以关闭尝试：

```
<?php
    } catch(Exception $e) {
        // Do something here
    } 
```

当我尝试这个时，我得到：

```
Parse error: syntax error, unexpected $end in page_start.php on line X 
```

这可以做到吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:09:07.823

你不能（至少不应该）做这样的事情。如果必须这样做，最好将完整的代码放在一个文件中，并将其他文件的内容包含在该块中。

```
<?php
try
  {
  require_once('file.php');
  }
catch(\Exception $e)
  {
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:11:34.770

查看手册： http: [//php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

它是这样说的：

> include 语句包含并评估指定的文件。

该文件被评估，因此它应该包含有效的 PHP，并且不以 open 'stache. 所以答案是否定的，这是不可能的。

# jquery - 将表数据转换为 JSON

> ID：12602443
> 
> 赞同：3
> 
> 时间：2012-09-26T13:06:34.400
> 
> 标签：jquery, json, serialization

我正在尝试将 HTML 表中存在的数据转换为 JSON，以便可以在服务器端对其进行相应处理。我能够序列化数据，但结果充其量会生成不直接链接的不同数据数组。喜欢：这是我正在使用的表格：

```
<form id="nameGenderForm">
    <table id="nameGenderTable">

        <tr>
            <th >Name</th>
            <th >Gender</th>
        </tr>

            <tr>
                <td><input type="text" name="studentName"></td>
                <td>
                    <select name="studentGender">
                        <option value="male">male</option>
                        <option value="female">female</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td><input type="text" name="studentName"></td>
                <td>
                    <select name="studentGender">
                        <option value="male">male</option>
                        <option value="female">female</option>
                    </select>
                </td>
            </tr>
        </table>
    <input type="submit" />
</form> 
```

序列化数据的脚本是：

```
$("#nameGenderForm").submit(function(event){
    event.preventDefault();

    var rawData=$('#nameGenderForm').serializeFormJSON();
    var formData=JSON.stringify(rawData);
    console.log(formData);
}); 
```

serializeFormJSON() 是我在浏览了几页 StackOverFlow 后得到的：

```
(function($) {
$.fn.serializeFormJSON = function() {
var o = {};
   var a = this.serializeArray();
   $.each(a, function() {
       if (o[this.name]) {
           if (!o[this.name].push) {
               o[this.name] = [o[this.name]];
           }
           o[this.name].push(this.value || '');
       } else {
           o[this.name] = this.value || '';
       }
   });
   return o;
};
})(jQuery); 
```

通过使用所有这些，我能够得到一个像这样的 JSON：

```
{"studentName":["kenpachi","orihime"],"studentGender":["male","female"]} 
```

我尝试了很多方法来让它们以姓名性别格式出现，但每种方法都会产生相同的结果。两个不同的数组。为每个使用表单也无济于事。有什么方法可以像这样获取 name-gender 数组中的数据：

```
{"studentName":"kenpachi","studentGender":"male"},{"studentName":"orihime","studentGender":"female"} 
```

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:14:05.680

[在这里，您可以使用 demo](http://jsfiddle.net/zainshaikh/fASmu/)进行一些细微的更改，如下所示：

循环遍历每个表行，找到输入、文本区域和选择类型元素，将它们序列化，转换为对象，然后推送到数组。

```
 var o = [];
    $(this).find('tr').each(function() {
        var $this = $(this);
        var $elements = $this.find('input, textarea, select')
        if ($elements.size() > 0) {
            var serialized = $elements.serialize();
            var item = $.toDictionary( serialized );
            o.push(item);
        }
    }); 
```

*PS 为 jquery 库添加了一个名为**toDictionary**的新函数，因此请确保您也将其包含在代码中。*

**$.to字典函数**

```
(function($) {
    $.extend({
        toDictionary: function(query) {
            var parms = {};
            var items = query.split("&"); // split
            for (var i = 0; i < items.length; i++) {
                var values = items[i].split("=");
                var key = decodeURIComponent(values.shift());
                var value = values.join("=")
                parms[key] = decodeURIComponent(value);
            }
            return (parms);
        }
    })
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:15:13.007

给他们同样的名字，但作为一个数组

例如

```
name="first[studentName]" and name="first[studentGender]" 
```

然后为您的第二个输入

```
name="second[studentName]" and name="second[studentGender]" 
```

此外，也许[serializeArray](http://api.jquery.com/serializeArray/)会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:51:21.597

我会做类似[jsFiddle](http://jsfiddle.net/WhYzw/)的事情——也就是说，循环遍历每一行并从输入中收集数据，然后将每个对象推送到结果数组中。

您可能希望`class`在输入上使用 a ，因为它可能比通过当前非常繁琐的选择器查找要快`:input[name=xyz]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-23T07:18:01.273

```
 function tableToArray(table) {
                    var headers = [];
                    var data = []; // first row needs to be headers var headers = []; 
                    for (var i = 0; i < table.rows[0].cells.length; i++) {
                        headers[i] = table.rows[0].cells[i].innerHTML.toLowerCase().replace(/ /gi, '');
                    }
                    // go through cells 
                    for (var i = 1; i < table.rows.length; i++) {
                        var tableRow = table.rows[i]; var rowData = {};
                        for (var j = 0; j < tableRow.cells.length; j++) {
                            rowData[headers[j]] = tableRow.cells[j].innerHTML;
                        } data.push(rowData);
                    }
                    return data;
                }

                function tableToJson(table) {
                    var headers = [];
                    var data = '{[';
                    for (var i = 0; i < table.rows[0].cells.length; i++) {
                        headers[i] = table.rows[0].cells[i].innerHTML.toLowerCase().replace(/ /gi, '');
                    }

                    for (var i = 1; i < table.rows.length; i++) {
                        var tableRow = table.rows[i]; var rowData = {};
                        for (var j = 0; j < tableRow.cells.length; j++) {
                            rowData[headers[j]] = tableRow.cells[j].innerHTML;
                        } data = (data + JSON.stringify(rowData) + ",");
                    }
                    return data.slice(0, -1) + "]}";
                } 
```

# mysql - MySQL：无法创建触发器，声明中的错误

> ID：12602445
> 
> 赞同：0
> 
> 时间：2012-09-26T13:06:40.740
> 
> 标签：mysql

我正在尝试创建触发器，但在键入 DECLARE 后显示错误。

> mysql> 分隔符 //

```
-> CREATE TRIGGER a_b
-> BEFORE UPDATE ON a
-> FOR EACH ROW
-> BEGIN
->      DECLARE   cur_date   DATE; 
```

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 1 行 mysql>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:08:48.220

正确的词是DELIMITER。除此之外，使用 TOAD for MySQL 或 AquaData Studio 进行舒适的数据库开发

# iphone - 在 iPhone 或模拟器上保存文本文件并从 Mac 读取

> ID：12602448
> 
> 赞同：0
> 
> 时间：2012-09-26T13:06:51.517
> 
> 标签：iphone, ios, ios-simulator

我想使用 [UIReferenceLibraryViewController dictionaryHasDefinitionForTerm:word] 过滤现有的单词列表（文本文件或网络资源），如下所示：

```
NSMutableArray * validWords = [[NSMutableArray alloc] initWithCapacity:[words count]];
for (NSString * word in words)
{
    if ([UIReferenceLibraryViewController dictionaryHasDefinitionForTerm:word])
    {
        [validWords addObject:word];
    }
    else
    {
        NSLog(@"reject word: %@", word);
    }
} 
```

使用我的 iPhone 或 Xcode 4 设备模拟器，如何将生成的 NSMutableArray validWords 保存到我可以从我的 Mac 访问的位置？

**编辑：**这是一次性操作，所以任何可以让我从设备或模拟器中获取数据的东西都可以。我考虑在我的主机上实现一个 Web 服务来读/写（大）文本文件，但想知道是否有更直接的方法来完成这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:14:29.387

对于 iOS 模拟器，您可以方便地写入桌面上的文件。该应用程序的目录位于某处：

```
/Users/me/Library/Application Support/iPhone Simulator/6.0/Applications/ABC/Library/Caches 
```

因此，要将您的有效单词数组写入桌面上的 plist，请使用：

```
NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];
NSString *path = [caches stringByAppendingPathComponent:@"/../../../../../../../../Desktop/words.plist"];
[validWords writeToFile:path atomically:NO]; 
```

不那么有趣，但更容易的是，只需将其写入 Caches 目录中的文件，然后在 Finder 中打开该文件。这也适用于设备：转到`Xcode organizer > Devices > Applications`并选择`Download`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:23:08.900

您可能想要研究[`iCloud`](http://www.apple.com/icloud/features/documents.html)从您的 iDevice 获取数据到您的 Mac（并返回）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:01:42.973

像这样的东西。我没有测试过 - 但你明白了。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES);
NSString *applicationSupportDirectory = [paths objectAtIndex:0];
NSString *wordsPath = [paths stringByAppendingPathComponent:@"words.txt"];

FILE *filePointer = fopen([wordsPath UTF8String],"w");
[words enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    fprintf(filePointer,"%s\n",[obj UTF8String]);
}];
fclose(filePointer); 
```

然后你应该能够浏览到应用程序`~/Library/Application Support/iPhone Simulator`等 `words.txt`应该在那里。

# c# - 使用 selenium 和 Nunit 测试如何断言表包含特定文本

> ID：12602457
> 
> 赞同：0
> 
> 时间：2012-09-26T13:07:25.523
> 
> 标签：c#, selenium, nunit

我有一个硒测试，我正在我的项目上运行。我需要断言某些文本存在于表格的第一个元素中。

```
public void TheUserHasAClaimTest()
{
    //Arrange

    //Act
    driver.Navigate().GoToUrl(baseURL + "/");
    driver.FindElement(By.Id("SSN")).Clear();
    driver.FindElement(By.Id("SSN")).SendKeys("000000000");
    new SelectElement(driver.FindElement(By.Id("stateId"))).SelectByText("Arizona");
    driver.FindElement(By.Id("btnCheckForClaims")).Click();

    Assert.IsTrue(this.driver.FindElement(By.Id("Ssn")).Text.Contains("000000000"));
    driver.FindElement(By.CssSelector("form.form-horizontal > input.btn.btn-primary")).Click();
    driver.Close();

    //Assert
} 
```

这是我试图断言文本存在的地方。

```
<table class="table table-striped table-bordered">
         <th>Ssn</th>
         <th>State</th>
         <th>Claim Date</th>
        @foreach (ClaimViewModel claimHistory in Model.ClaimsHistory)
         {
             <tr>
                <td id="Ssn">@claimHistory.Ssn.ToString()</td>
                 <td>@claimHistory.StateName</td>
                 <td>@claimHistory.ClaimDate</td>
             </tr>
         }
     </table> 
```

这是我的 CSHtml 页面。如何断言 000000000 在第一个元素中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:01:11.003

那是无效的 HTML，ID 应该只出现一次，并且您正在`id="Ssn"`循环使用。

修复它，然后查看您的测试代码。您可能需要使用`selenium.GetTable`来访问表数据。

# ios - didUpdateLocations instead of didUpdateToLocation

> ID：12602463
> 
> 赞同：66
> 
> 时间：2012-09-26T13:07:44.087
> 
> 标签：ios, objective-c, swift, core-location, cllocationmanager

With the release of iOS6 Apple wants us to use didUpdateLocations instead of didUpdateToLocation. Can anyone explain how to properly use didUpdateLocations?

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-09-26T13:47:24.637

I asume you used the following delegate to get the last position?

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation 
```

The delegate above is deprecated in iOS 6\. Now the following should be used:

```
- (void)locationManager:(CLLocationManager *)manager 
     didUpdateLocations:(NSArray *)locations 
```

In order to get the last position, simply get the last object of the array:

```
[locations lastObject] 
```

In other words, `[locations lastObject]` (new delegate) equals `newLocation` (old delegate) .

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-07-23T17:49:11.257

None of the other answers here explain why there is a locations array and how to properly use the new didUpdateLocations: array that is provided.

The purpose of deprecating the `locationManager:didUpdateToLocation:fromLocation:` and sending an NSArray of locations instead is to reduce power consumption when running in the background.

Starting with iPhone 5, the GPS chip has the capability to store locations for a period of time and then deliver them all at once in an array. This is called deferred location updates. This allows the main CPU to sleep for a longer period of time while in the background. It means iOS doesn't have to start the main CPU for every position update, the CPU can sleep, while the GPS chip collects locations.

You can check for this capability using the [`deferredLocationUpdatesAvailable`](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/clm/CLLocationManager/deferredLocationUpdatesAvailable) method. If available you can enable it using `allowDeferredLocationUpdatesUntilTraveled:timeout:` method. Some conditions apply, see [this answer](https://stackoverflow.com/a/14509263/1693173) for details.

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-09-26T13:48:32.540

It gives you array of objects to access last location you can use

```
[locations lastObject] 
```

from this delegate method

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-09T08:16:57.663

This is how the method can be implemented to work similarly as the deprecated one

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *newLocation = locations.lastObject;
    CLLocation *oldLocation;
    if (locations.count > 1) {
        oldLocation = locations[locations.count - 2];
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-12T18:04:18.940

If you support both iOS 5 and 6, you should call

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations, 
```

from the older

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

function, by building an array of locations.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-05T23:28:25.077

It is noteworthy that the array of CLLocation objects returned by locationManager:didUpdateLocations: may or may not include a former location. In other words, there may be on rare occasions only one location in the array. Use the following to check, and if there is more than one object we can retrieve the most recent prior location:

```
int objCount = [locations count];
if (objCount > 1) {
    CLLocation *oldLocation = [locations objectAtIndex:objCount - 1];
} 
```

As there will be at least one object in the array, retrieving the current location is done by requesting the last object in the array. Even if the last object is the only object, that's Ok:

```
CLLocation *newLocation = [locations lastObject]; 
```

Keep in mind that because this is an array, oldLocation in the example shown above will not necessarily be the one you're looking for. This depends on how you setDistanceFilter: and desiredAccuracy: properties, as those properties will impact how your locations array is populated. The desired oldLocation may be buried deeper in the array.

# javascript - Window.open 在 iframe 的想法中

> ID：12602464
> 
> 赞同：0
> 
> 时间：2012-09-26T13:07:45.297
> 
> 标签：javascript, html

我不确定这是否可以做到。在我看来，我有这段代码：

```
 <div class="col3">
    <a id="training-launch-button" href='javascript:OpenScormModuleWindow(<%: Model.ScormModuleId %> , "<%: ViewBag.ScormModuleUrl %>", "<%:  ViewBag.title %>", <%:  ViewBag.WindowWidth %>, <%:  ViewBag.WindowHeight %>);' class="button" onclick ="Test()">Launch</a>
  </div>

 function OpenScormModuleWindow(scormModuleId, scormModuleUrl, title, width, height) {
   _scormModuleId = scormModuleId;
   InitializeUserScormModule();
   scormModuleWindow = window.open(scormModuleUrl, "title", "width=" + width + ", height=" + height + ", resizable = 1");
   scormModuleWindow.focus();
} 
```

当我点击启动时，它会调用：

```
 function Test() {
      alert("try launch in new window");
      var newwindow = document.getElementsByClassName('targetblank');
      newwindow.target = '_blank';
      document.getElementById("iframe").src = "<%: ViewBag.ScormModuleUrl %>";
      document.getElementById("iframe").addEventListener('resize', function () {
          setWindowSize();
      });
  }

  function setWindowSize() {
      alert("in set winodw size");
      var myWidth = 0, myHeight = 0;
      if (typeof (window.outerWidth) == 'number')
      {
          myWidth = window.outerWidth;
          myHeight = window.outerHeight;
          alert(window.innerWidth + "  1  " + window.innerHeight + "  " + document.documentElement.clientWidth + "  " + document.documentElement.clientHeight);
          alert(myHeight + "   " + myWidth);
          $("#LaunchWidth").val(document.documentElement.clientWidth);
          $("#LaunchHeight").val(document.documentElement.clientHeight);
          updateSaveButtons();
      } 
```

然后我认为iframe：

```
 <iframe id="iframe" class="targetblank"></iframe> 
```

它也永远不会在 setWindowSize 中收到警报 :( 该行`document.getElementById("iframe").addEventListener('resize', function ()`不起作用。

# ruby-on-rails - 为什么瘦启动多个服务器进程

> ID：12602472
> 
> 赞同：0
> 
> 时间：2012-09-26T13:08:11.950
> 
> 标签：ruby-on-rails, ubuntu-12.04, thin, thin-client

我正在尝试使用 nginx 和 Thin 运行 Rails 应用程序。我已将瘦配置为运行 4 个具有不同套接字名称的服务器。这是我设置的一部分

```
servers: 4
socket: /tmp/thin.myapp.sock 
```

然而，在作为服务开始时，它首先创建了两个进程，每两个进程都具有相同的名称。起初我以为是因为我在 64 位机器上运行它（我曾经使用 32 位）。但是重新启动后，现在每个套接字名称运行 3 个进程。知道是什么原因造成的吗？我试过检查我可能错过的东西，但到目前为止它只是让我发疯

我在 rvm 和 rails 3.2.2 上使用 Ubuntu 12.02、ruby 1.9.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:40:01.367

我将我的瘦 gem 版本从 1.4.1 更新到 1.5.0 并且它有效

# java - 如何在android中创建动画饼图？

> ID：12602473
> 
> 赞同：2
> 
> 时间：2012-09-26T13:08:14.800
> 
> 标签：java, android, animation, pie-chart

如何绘制动画饼图？我画了一个图表，下面是代码。我现在需要图表在加载到屏幕时变为动画。我怎样才能做到这一点，谁能给我一个关于我应该寻找什么或在哪里寻找的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-29T20:05:54.847

我做了一个小例子。也许它对你有帮助。 [动画饼图。](https://github.com/binaryroot/pie-chart-animation/tree/master/animation_ic_lauch) 该实现基于 SurfaceView。在 SurfaceView 我设置线程。该线程以 60 FPS 计算动画。

```
 long ticksPS = 1000 / 60;
 long startTime;
 long sleepTime;
     while (running) {
       sleepTime = ticksPS-(System.currentTimeMillis() - startTime);
         try {
            if (sleepTime > 0)
               Thread.sleep(sleepTime);
         else
               Thread.sleep(10);
         } catch (Exception e) {}
 } 
```

使用方法 canvas.drawArc 进行渲染。每帧增加sweepAngle。

```
 if((sweepAngle+startAngle) <= endAngle){
             sweepAngle+=2;
          } 
```

有关更多详细信息，您可以在 github 上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:24:26.343

也许您可以使用：Android 的[ChartDroid](http://code.google.com/p/chartdroid/)库。

# sql-server - SQL Server 抱怨触发器返回结果集？

> ID：12602478
> 
> 赞同：0
> 
> 时间：2012-09-26T13:08:23.837
> 
> 标签：sql-server, triggers

好的，所以我制作了一个应用程序，该应用程序使用其他人的 SQL Sever 数据库运行，该数据库已经投入生产。它基本上是一个小工具，可以在需要的地方检查并插入缺失的数据。我收到以下错误：

“触发器返回了一个结果集和/或在另一个未完成的结果集处于活动状态时以 SET NOCOUNT OFF 运行。”

这到底是什么意思，为什么我会得到它？

我可能无法更改表定义或弄乱服务器配置。我做了一些选择来查找数据丢失的位置，然后在需要的地方插入新记录。有没有办法设计一个查询来解决这个问题？

# ruby-on-rails-3 - 简单的形式，mongoid，has_one 不保存？

> ID：12602486
> 
> 赞同：1
> 
> 时间：2012-09-26T13:08:49.013
> 
> 标签：ruby-on-rails-3, mongoid, simple-form, cocoon-gem

我有 mongoid has_one 关系

```
class Banner
   include Mongoid::Document
   field :url, type: String
   has_one :asset
   embedded_in :campaign

   validates_presence_of :url
end 
```

和

```
class Asset
   include Mongoid::Document
   belongs_to :user 
```

我正在将 simple_form 与使用 cocoon 的嵌套表单一起使用。

simple_form 的定义

```
<%= f.input :asset,  :collection => @assets%>
<%= f.input :url %> 
```

这是发布操作的输出：

```
campaign[banners_attributes][0][url]:Gadf
campaign[banners_attributes][0][asset]:506203a70fc16ce14f00000d
campaign[banners_attributes][0][_destroy]:
campaign[banners_attributes][0][id]:5062f1330fc16cfd6b000011 
```

但资产从未与此横幅相关联。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:02:06.057

尝试`has_one :asset, autosave: true`

# java - 从 Java 中的另一个类访问 UUID

> ID：12602489
> 
> 赞同：2
> 
> 时间：2012-09-26T13:08:58.353
> 
> 标签：java

这是场景：我在一个类中生成随机数据并将其用作同一类中方法的参数。如何在另一个类中使用完全相同的值？

这是我的课程的简化版本：

```
public class A {
    @Test
    public void aMethod() {     
        RandomStringUUID ruuid = new RandomStringUUID();
        }
} 
```

然后：

```
public class B { 
        @Test
    public void bMethod() {
        // Want to use ruuid , without instantiating RandomStringUUID 
                // as i dont want new values, i want the one from class A
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:13:23.570

使用静态方法：

```
public class A {

     private final static RandomStringUUID ruuid = new RandomStringUUID();

     public final static RandomStringUUID getRuuid() {
         return ruuid;
     }

     @Test
     public void aMethod() {     
         RandomStringUUID ruuid = getRuuid();
     }
} 
```

和

```
public class B { 
    @Test
    public void bMethod() {
         RandomStringUUID ruuid = A.getRuuid();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:10:15.130

使您的变量成为 A 类中的公共静态变量

```
public static RandomStringUUID RUUID = new RandomStringUUID(); 
```

**在被击败后，我进入投票计数**

```
private RandomStringUUID uuid;

private createUuid() {
    uuid = new RandomStringUUID();  //Or any other way you create it
}

public static RandomStringUUID getRuuidForOtherClassesToCheck() {
    return ruuid;
} 
```

没有足够的信息来推断 OP 的设计规则，或者只是一个关于如何从类到类获取变量的简单 JAVA 问题。:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:21:44.380

要么让 A 给 B 赋值

```
public class B {  
    @Test 
    public void bMethod(RandomStringUUID ruuid) { 
    // Want to use ruuid , without instantiating RandomStringUUID  
            // as i dont want new values, i want the one from class A 
    } 
} 
```

或者如@sics 所说，让 A 使其可供 B 访问

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:25:50.600

我们有时会测试使用辅助类。这可能是您（测试）案例的解决方案。所以`A`不会提供值，`B`但两者都会从第三类获得相同的对象：

```
public class TestHelper {

  private final static RandomStringUUID UUID = new RandomStringUUID();

  public static RandomStringUUID getDummyRandomStringUUID() {
     return UUID;
  }
} 
```

* * *

```
public class A {
  @Test
  public void aMethod() {     
    RandomStringUUID ruuid = TestHelper.getDummyRandomStringUUID();
  }
} 
```

（与 相同`B`）

测试还是有问题的，因为每次测试运行使用不同的 UUID 值，所以测试是不可重现的。最好定义一个用于每次测试运行的静态 UUID。

# emacs - osx 上的 emacs 中的第一种模式 - 无法创建 pdf

> ID：12602490
> 
> 赞同：0
> 
> 时间：2012-09-26T13:09:03.817
> 
> 标签：emacs, elisp

Emacs：Gnu Emacs 23.4
操作系统：OS X 10.6
rst.el：不确定版本，但从[sourceforge下载最新](http://docutils.sourceforge.net/tools/editors/emacs/rst.el)

我在我的 .emacs 中设置了正确的路径，以便它可以看到 rst2pdf。我试图让 rst-compile-pdf-preview() 在我的 rst 模式下工作。当我执行 Cc Cc Cp 时，我不知道发生了什么——它默默地失败了。当我运行这个按键时，我希望 emacs 执行

```
rst2pdf "1 file with space.txt" -o "1 file with space.pdf" 
```

请注意，我需要使用引号来处理带有空格和 -o 的文件。

这是被调用的代码：

```
(defvar rst-pdf-program "/Applications/Preview.app/Contents/MacOS/Preview"
"Program used to preview PDF files.")

(defun rst-compile-pdf-preview ()
"Convert the document to a PDF file and launch a preview program."
(interactive)
(let* ((tmp-filename (make-temp-file "rst_el" nil ".pdf"))
 (command (format "%s %s %s && %s -o %s ; rm %s"
          (cadr (assq 'pdf rst-compile-toolsets))
          buffer-file-name tmp-filename
          rst-pdf-program tmp-filename tmp-filename)))
  (start-process-shell-command "rst-pdf-preview" nil command)
  ;; Note: you could also use (compile command) to view the compilation
  ;; output.
   )) 
```

（对不起，我似乎可以用正确的格式粘贴代码，我不想单独格式化每一行）。

现在，当我执行 Cc Cc Cc 并手动发出 rst2pdf 1.txt - 它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:29:03.507

我检查了问题，发现外部 rst2pdf 不符合 reStructuredText 调用标准。rst.el 在这方面是正确的，并且可以与 Docutils 沙箱中的 rst2pdf 一起使用。恕我直言，应修复外部 rst2pdf 以符合 reStructuredText 标准。

除此之外，在预览功能中添加“-o”通常不会解决生成 PDF 时的问题。

斯特凡

rst.el 的维护者和主要开发者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:07:43.863

看起来 rst.el 的这一部分确实存在错误。`buffer-file-name`需要引用，所以替换`buffer-file-name`为`(shell-quote-argument buffer-file-name)`. 我的 rst2pdf 也需要 a`-o`而 rst.el 代码似乎没有提供任何内容，但是您上面的示例代码添加了`-o`太“晚”：它应该放在第二个和第三个之间`%s`。

# c# - 使用带有类型条件的通用接口的代码协定

> ID：12602495
> 
> 赞同：3
> 
> 时间：2012-09-26T13:09:14.077
> 
> 标签：c#, generics, code-contracts

我想使用抽象类将代码合同添加到通用接口，但类型参数已验证。

这是我想做的一个例子：

```
[ContractClass(typeof(ContractsForIRepository<,>))]
public interface IRepository<T, in TId> where T : IEntity
{
    T GetById(TId id);
    T Persist(T entity);
    void Remove(TId id);
}

[ContractClassFor(typeof(IRepository<,>))]
internal abstract class ContractsForIRepository<T, TId> : IRepository<T, TId>
{
    public T GetById(TId id)
    {
        Contract.Requires(id != null);
        return default(T);
    }

    public T Persist(T entity)
    {
        Contract.Requires(entity != null);
        return default(T);
    }

    public void Remove(TId id)
    {
        Contract.Requires(id != null);
    }
} 
```

我可以通过放弃条件轻松地让它工作：

*   `public interface IRepository<T, in TId> where T : IEntity`
*   `public interface IRepository<T, in TId>`

但我真的很想保留这个。是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T13:11:33.547

好的，这实际上是微不足道的——在抽象类上指定相同的条件！

下面的完整示例。

```
[ContractClass(typeof(ContractsForIRepository<,>))]
public interface IRepository<T, in TId> where T : IEntity
{
    T GetById(TId id);
    T Persist(T entity);
    void Remove(TId id);
}

[ContractClassFor(typeof(IRepository<,>))]
internal abstract class ContractsForIRepository<T, TId> : IRepository<T, TId> where T : IEntity
{
    public T GetById(TId id)
    {
        Contract.Requires(id != null);
        return default(T);
    }

    public T Persist(T entity)
    {
        Contract.Requires(entity != null);
        return default(T);
    }

    public void Remove(TId id)
    {
        Contract.Requires(id != null);
    }
} 
```

# jquery - 无法更改 jqgrid 中的记录参数并使用数组存储和服务器端分页重新加载数据

> ID：12602496
> 
> 赞同：0
> 
> 时间：2012-09-26T13:09:14.650
> 
> 标签：jquery, jqgrid

我正在尝试在我的 xhtml 页面上集成 jqgrid，并在单击 jqgrid 寻呼机上的“下一个”、“上一个”按钮时使用服务器端分页支持。我想在单击“下一个”/“上一个”按钮时使用存储在页面变量中的数组中的数据刷新网格，但如果我使用“本地”作为数据类型，我无法在网格。我的代码如下所示 -

```
function reloadJQGrid(){

    $("#list").setGridParam({datatype:'local'});
    $("#list").setGridParam({localReader:{repeatitems: false}});

    var myData1 ="{\"total\":1,\"page\":1,\"records\":50,\"rows\":[" +
        "{\"id\":\"1\",\"examineeid\":\"123455\",\"firstname\":\"testfirst1\",\"middlename\":\"middle1\",\"lastname\":\"testlast1\",\"dateofbirth\":\"2007-10-01\",\"gender\":\"Male\",\"emailaddress\":\"test1@test.com\",\"customfield1\":\"nodata\",\"customfield2\":\"nodata\",\"customfield3\":\"nodata\",\"customfield4\":\"nodata\",\"createdby\":\"dfgdfg\",\"createddate\":\"2007-10-01\",\"modifiedby\":\"try\",\"modifieddate\": \"2007-10-01\",\"accountname\":\"TRGG\",\"legacyexamineeid\":\"1234\",\"legacysystem\":\"test1\",\"groups\":\"testgroup\"}," +
        "{\"id\":\"2\",\"examineeid\":\"123\",\"firstname\":\"testfirst1\",\"middlename\":\"middle1\",\"lastname\":\"testlast1\",\"dateofbirth\":\"2007-10-01\",\"gender\":\"Male\",\"emailaddress\":\"test1@test.com\",\"customfield1\":\"nodata\",\"customfield2\":\"nodata\",\"customfield3\":\"nodata\",\"customfield4\":\"nodata\",\"createdby\":\"ifgfg\",\"createddate\":\"2007-10-01\",\"modifiedby\":\"itr\",\"modifieddate\": \"2007-10-01\",\"accountname\":\"YTTT\",\"legacyexamineeid\":\"1234\",\"legacysystem\":\"rdtr\",\"groups\":\"testgroup\"}" +
        "] }";

    $("#list").jqGrid("clearGridData", true);
    $("#list").setGridParam({data:myData1});
    $("#list").trigger("reloadGrid");
} 
```

对此的任何指针都会有所帮助，我尝试将数据类型用作“json”，这适用于其中包含数据的 json 文件，但我不想使用 json 数据创建临时文件，而是用数据刷新我的变量，我想用同样的方法重新加载下一组数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:25:26.823

根据 jqGrid [Options wiki page](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)，“记录”是一个只读属性。

请在“reloadJQGrid”函数的最后一步尝试这样的事情。

```
var records = 5000; //read this value from your server return string
$("#list").setGridParam({recordtext: "View {0} - {1} of "+records}); 
```

更新后，您的功能将如下所示：

```
function reloadJQGrid(){
    $("#list").setGridParam({datatype:'local'});
    $("#list").setGridParam({localReader:{repeatitems: false}});
    var myData1 ="{\"total\":1,\"page\":1,\"records\":50,\"rows\":[" + 
        "{\"id\":\"1\",\"examineeid\":\"123455\",\"firstname\":\"testfirst1\",\"middlename\":\"middle1\",\"lastname\":\"testlast1\",\"dateofbirth\":\"2007-10-01\",\"gender\":\"Male\",\"emailaddress\":\"test1@test.com\",\"customfield1\":\"nodata\",\"customfield2\":\"nodata\",\"customfield3\":\"nodata\",\"customfield4\":\"nodata\",\"createdby\":\"dfgdfg\",\"createddate\":\"2007-10-01\",\"modifiedby\":\"try\",\"modifieddate\": \"2007-10-01\",\"accountname\":\"TRGG\",\"legacyexamineeid\":\"1234\",\"legacysystem\":\"test1\",\"groups\":\"testgroup\"}," +
        "{\"id\":\"2\",\"examineeid\":\"123\",\"firstname\":\"testfirst1\",\"middlename\":\"middle1\",\"lastname\":\"testlast1\",\"dateofbirth\":\"2007-10-01\",\"gender\":\"Male\",\"emailaddress\":\"test1@test.com\",\"customfield1\":\"nodata\",\"customfield2\":\"nodata\",\"customfield3\":\"nodata\",\"customfield4\":\"nodata\",\"createdby\":\"ifgfg\",\"createddate\":\"2007-10-01\",\"modifiedby\":\"itr\",\"modifieddate\": \"2007-10-01\",\"accountname\":\"YTTT\",\"legacyexamineeid\":\"1234\",\"legacysystem\":\"rdtr\",\"groups\":\"testgroup\"}" +
        "] }";
    $("#list").jqGrid("clearGridData", true);
    $("#list").setGridParam({data:myData1});
    $("#list").trigger("reloadGrid");
    var records = 5000; //read this value from your server return string
    $("#list").setGridParam({recordtext: "View {0} - {1} of "+records}); 
```

}

# mysql - 无法使用 mysql-workbench 连接 glassfish 服务器

> ID：12602505
> 
> 赞同：0
> 
> 时间：2012-09-26T13:09:39.357
> 
> 标签：mysql, mysql-workbench

我想使用 MySQL 查询浏览器来执行一些查询。出于这个原因，我安装了 MySQL 工作台。现在我尝试使用[本教程连接到我的 glassfish 服务器](https://dev.mysql.com/doc/workbench/en/wb-getting-started-tutorial-admin.html)

在步骤 1（指定主机）中：我选择了*远程*主机并输入了我可以在 glasfish 服务器*附加属性中看到的 url* `jdbc:mysql://....`

在第 2 步中：我输入在 glassfish 服务器*附加属性*中也找到的用户名和密码。当我单击*next*时，出现以下错误：

> ```
> Could not connect to MySQL server:  Unknown MySQL server host
>  jdbc:mysql://... 
> ```

我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:36:37.123

*强调文本*我已通过删除 jdbc:mysql:// 并仅写入不带架构的 uri 来解决问题。

# c# - 为什么我应该使用 Any 方法而不是 Count？

> ID：12602506
> 
> 赞同：11
> 
> 时间：2012-09-26T13:09:43.087
> 
> 标签：c#, asp.net, linq, entity-framework, linq-to-entities

> **可能重复：**
> [哪种方法性能更好：.Any() 与 .Count() > 0？](https://stackoverflow.com/questions/305092/which-method-performs-better-any-vs-count-0)

我只是想知道为什么我应该使用`Any()`而不是`Count()`？，如果我们以[msdn](http://msdn.microsoft.com/en-us/library/bb343630.aspx)为例：

```
class Pet
{
    public string Name { get; set; }
    public int Age { get; set; }
}
class Person
{
    public string LastName { get; set; }
    public Pet[] Pets { get; set; }
}

public static void AnyEx2()
{
    List<Person> people = new List<Person>
        { new Person { LastName = "Haas",
                       Pets = new Pet[] { new Pet { Name="Barley", Age=10 },
                                          new Pet { Name="Boots", Age=14 },
                                          new Pet { Name="Whiskers", Age=6 }}},
          new Person { LastName = "Fakhouri",
                       Pets = new Pet[] { new Pet { Name = "Snowball", Age = 1}}},
          new Person { LastName = "Antebi",
                       Pets = new Pet[] { }},
          new Person { LastName = "Philips",
                       Pets = new Pet[] { new Pet { Name = "Sweetie", Age = 2},
                                          new Pet { Name = "Rover", Age = 13}} }
        };

    // Determine which people have a non-empty Pet array.
    IEnumerable<string> names = from person in people
                            where person.Pets.AsQueryable().Any()
                            select person.LastName;

    foreach (string name in names)
        Console.WriteLine(name);

    /* This code produces the following output:

       Haas
       Fakhouri
       Philips
    */
} 
```

如果我使用了怎么办：

```
 IEnumerable<string> names = from person in people
                            where person.Pets.Count() > 0
                            select person.LastName; 
```

它会给出相同的结果！, （我不认为它是为了简短或什么而创建的），有什么功能`Any()`吗？？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T13:12:53.763

`Any`只检查序列是否包含至少一个元素，而`Count`需要遍历所有元素。这就是区别。`Any`首选的经典场景`Count`是：

```
if (sec.Count() > 0) 
```

对比

```
if (sec.Any()) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T13:19:59.353

根据隐藏在接口后面的具体实现，*可能*比. 例如，如果实际上有 LINQ-to-SQL 或其他一些数据库提供程序，则可能是检查表**中至少 1**条记录或必须计算数据库中的**每条**记录之间的区别。`IEnumerable<>``Any``Count`

 ****然而，在我看来，更重要的原因是**using`Any()`比检查更能表达你的意图`Count() > 0`**。它询问“有任何物品吗？” 而不是“找出有多少项目。这个数字是否大于零”。对你来说，“有什么物品吗？”的哪个翻译更自然？?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:20:11.787

实际上，这取决于。

如果您的集合是 IEnumerable 的形式，则 Count() 方法将遍历所有元素，而 Any() 则不必这样做。因此，对于可枚举， Any() 将具有（潜在的显着）性能优势。

但是，在您的示例中，Pets 是一个数组，因此您最好使用 .Length 而不是 .Count()。在这种情况下，性能不会有显着差异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T13:14:04.257

要获得计数，代码必须遍历整个序列。在一个长的、延迟执行的序列上，这可能会花费大量时间。由于我只想知道序列是否包含一个或多个元素，因此使用 Any() 扩展方法的计算效率更高。

**阅读**：[Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2008/05/09/computers-are-dumb.aspx)

**还可以阅读**：[Count() 和 Count 属性](http://pranayamr.blogspot.ca/2012/07/count-and-count-property.html)****

# console-application - 为 Dynamics CRM 4.0 创建控制台应用程序

> ID：12602507
> 
> 赞同：0
> 
> 时间：2012-09-26T13:09:52.087
> 
> 标签：console-application, dynamics-crm-2011, crm, dynamics-crm-4

我对 Dynamics CRM 很陌生。

在 2011 版本中，我遵循了构建与 CRM 配合使用的控制台应用程序的演练，并以该演练为基础开发了一些应用程序； [http://msdn.microsoft.com/en-us/library/gg695803.aspx](http://msdn.microsoft.com/en-us/library/gg695803.aspx)

现在我必须让其中一个应用程序在 CRM 4.0 上运行，但我无法找到有关如何为 CRM 4.0 创建控制台应用程序的演练。为控制台应用程序导入什么 dll，要遵循哪些步骤，我在搜索过去几个小时后失败了。如果有人能把我引向正确的方向，我会欠你的；一个演练或教程的链接会让我很开心。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:12:24.990

您可以使用 WSDL 或 SDK 代理类连接到 Crm 4 Web 服务。[本文](http://msdn.microsoft.com/en-us/library/ee704593.aspx)很好地概述了这些选项。链接到[Crm 4 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=38)。

为了与您将主要使用的 Crm 数据进行交互，[此处](http://msdn.microsoft.com/en-us/library/bb928392.aspx)`CrmService`描述了所有可用的 Web 服务。

[要创建 Web 服务参考，请](http://msdn.microsoft.com/en-us/library/bb887784.aspx)查看. 然后可以在[此处](http://msdn.microsoft.com/en-us/library/cc151016.aspx)找到显示实例化和使用 CrmService 的小片段。

我认为这应该足以让您继续前进，可以在 MSDN 上找到更多代码示例。

# android - 在android中使用文件描述符读取联系人的信息

> ID：12602511
> 
> 赞同：6
> 
> 时间：2012-09-26T13:10:06.910
> 
> 标签：android, contacts, file-descriptor

我在从我的联系人列表中获取联系人时遇到问题。我正在使用这段代码：

```
final Cursor Contact = cResolver.query(ContactsContract.Contacts.CONTENT_URI, null,
                ContactsContract.Contacts._ID +" = " + Contact_ID, null,null);
        Contact.moveToFirst();
        String lookupKey = Contact.getString(Contact
                .getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));

        Uri uri = Uri.withAppendedPath(
                ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);

        AssetFileDescriptor fd = null;
        FileInputStream fis = null;

        fd = cResolver.openAssetFileDescriptor(uri, "_ID");
        fis = fd.createInputStream();
        byte[] buf = new byte[(int) fd.getDeclaredLength()];
        fis.read(buf);
        String vcardstring = new String(buf); 
```

但我得到`Exception`：

```
java.io.IOException: read failed: EINVAL (Invalid argument)
libcore.io.IoBridge.read(IoBridge.java:432) 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T14:55:53.163

You can try get the whole line and save it in a String List, an example:

```
public List<String> getAnswers(int line) {
    List<String> answerList = new ArrayList<String>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_GERAL;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    cursor.moveToPosition(line);

    for(int x=0; x<cursor.getColumnCount();x++){
        answerList.add(cursor.getString(x));
    }

    return answerList;
} 
```

# jquery - 尝试使用 JQuery 突出显示当前导航图标

> ID：12602512
> 
> 赞同：2
> 
> 时间：2012-09-26T13:10:07.750
> 
> 标签：jquery

我试图弄清楚如何突出显示我网站上的当前导航图标。除了博客部分之外，它变得更加复杂，所有其他导航链接都转到同一页面上的不同部分。我希望在所有情况下都突出显示主页图标，除非用户在我的博客部分。我使用 CSS 将图标的不透明度设置为 0.5，并突出显示使用 JQuery 添加的类的图标，将不透明度更改为 1。我快到了，但是当用户转到我的博客部分然后回到家时部分，图标不会突出显示（除非我刷新浏览器）。这是我的jQuery：

```
 // change opacity of nav icons
    $('#nav-home, #nav-port, #nav-exp, #nav-cont, #nav-blog').hover(function(){
        $(this).fadeTo(200, 1);
        }, function(){
        $(this).fadeTo(200, 0.5);
    });

    // highlight current nav icon
    var queryString = location.search.replace('?','').split('=');

    $('#nav-blog').bind('load click', function(){
        if(queryString[1] == 'blog-home' || queryString[0] == 'article')
            $(this).addClass('nav-current');
        });

    $('#nav-home, #nav-port, #nav-exp, #nav-cont').bind('load click', function(){
        if(queryString[1] == 'home' || !queryString[1])
            $('#nav-home').addClass('nav-current');
    }); 
```

谢谢！

编辑：对不起！这是我的网站[http://www.jonhudsonweb.com](http://www.jonhudsonweb.com)

编辑：想通了！！但是我还不能回答我的问题，因为我还不够好:(

这是我的解决方案：

```
 // highlight current nav icon
        var queryString = location.search.replace('?','').split('=');

        $(window).bind('load unload', function(){
            if(queryString[1] == 'blog-home' || queryString[0] == 'article')
                $('#nav-blog').addClass('nav-current');
            });

        $(window).bind('load unload', function(){
            if(queryString[1] == 'home' || !queryString[1])
                $('#nav-home').addClass('nav-current');
        }); 
```

为我+1！

耶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:57:16.783

乔恩，你的解决方案对我来说有点尴尬。为什么不`.active`给你想要持续活跃的图标添加一个类，并用 CSS 设置样式呢？

此外，您应该真正使用一个结合所有导航图标的类，并为您的方法引用该类`.hover()`，而不是列出每个 ID。巧合的是，我在[我的网站](http://jezenthomas.com)上做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:42:20.480

我的解决方案：

```
// highlight current nav icon
    var queryString = location.search.replace('?','').split('=');

    $(window).bind('load unload', function(){
        if(queryString[1] == 'blog-home' || queryString[0] == 'article')
            $('#nav-blog').addClass('nav-current');
        else 
            $('#nav-home').addClass('nav-current');
        }); 
```

# c++ - C++ 加载静态库时执行函数

> ID：12602513
> 
> 赞同：2
> 
> 时间：2012-09-26T13:10:10.590
> 
> 标签：c++, ios, static-libraries

我需要在加载代码时注册类。只要代码在应用程序中编译，我实现了一个很好的解决方案。

但是当代码由静态库提供时，它根本不起作用。

我以类似于此答案的方式解决了这个问题：[https](https://stackoverflow.com/a/729028/171711) ://stackoverflow.com/a/729028/171711 。

目前我有类似的东西：

```
#define REGISTER(className)\
static const int __classDescriptor##className = MyRegister(#className, className::GetAllocator()); 
```

使用时看起来像：

```
//Foo.cpp

REGISTER(Foo);

Foo::Foo()
{
  ...
} 
```

我在日志中有：

```
registered class:Foo 
```

但是当我创建一个静态库并且库提供了 Foo 时，问题是它`REGISTER(Foo);`永远不会被调用。

我有一个复杂的加载系统，允许脚本使用依赖于此行为的本机 C++ 类。有没有办法在加载库时强制执行 Foo.cpp 中的代码？

* * *

**编辑**：看来我的问题与[Visual Studio 中关于静态链接的](https://stackoverflow.com/q/3104923/171711)问题直接相关。看来我自己的库也有同样的问题。我注意到库中的一些类已注册。他们只是将他们的`.h`文件包含在我的项目中的人。

那么有没有办法在不链接到`.h`文件的情况下在 lib 中执行代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-07T21:50:08.340

使用 -all_load 链接器选项加载静态库的所有成员。或者对于特定库，使用 -force_load path_to_archive。

在 Xcode 中，您需要在“其他链接器标志”下为您的可执行文件（而不是静态库）添加这些选项。

这解决了我的静态初始化函数的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T02:11:45.793

在调用依赖它们的任何其他代码之前初始化我的类描述符的唯一方法是初始化库。

我添加了一个函数`MyLibraryInit()`，它在每个函数上调用一个函数`__classDescriptor##className`来强制初始化每个描述符。

不幸的是，这似乎是我能找到的最优雅的方法。

# c# - “catch” 处理输出，以便在我的表单上显示它

> ID：12602514
> 
> 赞同：1
> 
> 时间：2012-09-26T13:10:12.227
> 
> 标签：c#, winforms

这是我启动进程的方法：

```
public class Tshark
{
    public int _interfaceNumber;
    public string _pcapPath;
    Process _tsharkProcess;
    public int _packetsCount;
    public string _packet;
    public string _tsharkPath = @"C:\Program Files\Wireshark\tshark.exe";
    public delegate void dlgPackProgress(int progress);
    public event dlgPackProgress evePacketProgress;

    public Tshark(int interfaceNumber, string pcapPath)
    {
        _interfaceNumber = interfaceNumber;
        _pcapPath = pcapPath;
    }

    public void startTheCapture()
    {
        try
        {
            _tsharkProcess = new Process();
            _tsharkProcess.StartInfo.FileName = @"C:\Program Files\Wireshark\tshark.exe";
            _tsharkProcess.StartInfo.Arguments = string.Format("-i " + _interfaceNumber);
            _tsharkProcess.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);
            _tsharkProcess.StartInfo.RedirectStandardOutput = true;
            _tsharkProcess.StartInfo.UseShellExecute = false;
            _tsharkProcess.StartInfo.CreateNoWindow = true;
            _tsharkProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            _tsharkProcess.Start();
            StreamReader myStreamReader = _tsharkProcess.StandardOutput;

            while (!myStreamReader.EndOfStream)
            {
                _packet = myStreamReader.ReadLine();
                OnPacketProgress(_packetsCount++);
            }

            _tsharkProcess.WaitForExit();
        }
        catch (Exception e)
        {

        }
    }

    private void OnPacketProgress(int packet)
    {
        var handler = evePacketProgress;
        if (handler != null)
        {
            handler(packet);
        }
    }

    public void killProcess()
    {
        foreach (Process prc in System.Diagnostics.Process.GetProcessesByName("tshark"))
            {
                prc.Kill();
                prc.WaitForExit();
            }                 
    }

    private void process_OutputDataReceived(object sender, DataReceivedEventArgs arg)
    {
        string srt = arg.Data; //arg.Data contains the output data from the process...            
    }
} 
```

从主窗体调用方法 startTheCapture() ：

```
private void btnStartCapture_Click(object sender, EventArgs e)
{
    BackgroundWorker bgWorker = new BackgroundWorker();
    bgWorker.WorkerReportsProgress = true;
    bgWorker.ProgressChanged += new ProgressChangedEventHandler(bgWSniffer_ProgressChanged);
    bgWorker.DoWork += new DoWorkEventHandler(
        (s3, e3) =>
        {
            tshark = new Tshark(2, pcapFilePathSniffer);
            tshark.startTheCapture();

            tshark.evePacketProgress += new Tshark.dlgPackProgress(
                (packet) =>
                {
                    bgWorker.ReportProgress(packet, tshark);
                });
        });

    bgWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s3, e3) =>
        {

        });

    bgWorker.RunWorkerAsync();

} 
```

现在这也来自主表单，我已经编写了 ProgressChanged，它应该更新我的 gui，但我的问题是这不起作用，我不知道为什么。

```
private void bgWSniffer_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    tshark = e.UserState as Tshark;
    listBoxPacketsSnifferTab.Text += tshark._packet;
    lblPacketsReceived2.Text = tshark._packetsCount.ToString("#,##0");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:36:27.363

在 DoWorkEventHandler 中，在连接 evePacketProgress 事件处理程序之前调用 tshark.StartTheCapture()。

startTheCapture 方法会一直阻塞，直到 wireshark 进程退出，因此在它运行时捕获的任何进度事件都将在 OnPacketProgress 中“忽略”，因为没有事件订阅者（handler == null）。

将其更改为：

```
bgWorker.DoWork += new DoWorkEventHandler(
    (s3, e3) =>
    {
        tshark = new Tshark(2, pcapFilePathSniffer);

        //hookup event handler before executing method
        tshark.evePacketProgress += new Tshark.dlgPackProgress(
            (packet) =>
            {
                bgWorker.ReportProgress(packet, tshark);
            });

        tshark.startTheCapture();

    }); 
```

# ruby-on-rails - 在 Rails 中成功（或以其他方式）登录后重定向

> ID：12602515
> 
> 赞同：0
> 
> 时间：2012-09-26T13:10:14.427
> 
> 标签：ruby-on-rails, authentication, redirect

我对 Rails 比较陌生，所以我一直在关注 Railscasts 以加快速度，并成功创建了一个登录功能。代码如下：

```
def create

    user = User.find_by_email(params[:email])
      if user && user.authenticate(params[:password])
        if params[:remember_me]
          cookies.permanent[:auth_token] = user.auth_token
        else
          cookies[:auth_token] = user.auth_token
        end
        redirect_to root_url, :notice => "Logged in!"

      else
        flash.now.alert = "Invalid email or password"
        render "new"
      end

  end 
```

但是，正如代码所示，用户总是被重定向到主页，如`root_url`.

我想要实现的是以下几点：

1.  用户在“关于”、“联系”或任何页面上
2.  用户单击“登录”链接并被带到登录表单页面
3.  成功（或不成功）登录后，用户将返回到“关于”、“联系”页面或其他页面。

但是，我似乎无法弄清楚我应该用什么代替`root_url`。我试过`request.referer`了，但这显然把我带回了登录表单（或者，更确切地说，一条表明我已经登录的消息）而不是用户最初访问登录表单的页面。

我想我可以做某种开关/案例，我将引用页面存储在一个字符串或其他任何东西中，然后重定向回那个，但这听起来有点笨拙并且（就像大多数东西 Rails 一样）我确定有一个我想念的更简单的方法！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:16:21.433

you can store return_to in session you can refer [here](http://railspikes.com/2008/5/1/quick-tip-store_location-with-subdomains),[here](http://www.rorexperts.com/redirect-back-or-default-in-rails-t1969.html)

# internet-explorer-8 - Google webfont 在 IE7 和 IE8 上的渲染效果很差

> ID：12602518
> 
> 赞同：0
> 
> 时间：2012-09-26T13:10:19.903
> 
> 标签：internet-explorer-8, internet-explorer-7, google-webfonts

我一直在努力弄清楚为什么以下“小提琴”在 Internet Explorer 7 和 8 下呈现如此糟糕：

[http://jsfiddle.net/5aFAX/](http://jsfiddle.net/5aFAX/)

**互联网浏览器 9**

![互联网浏览器 9](../Images/e114cddedebaea7a8152709734d88a97.png)

**Internet Explorer 7 和 8**

![Internet Explorer 7 和 Internet Explorer 8](../Images/334fa30937a528d897f468f7c3adc7be.png)

在 Internet Explorer 9 下，字体渲染得很好（几乎与在 Chrome 和 Firefox 下相同）。然而，在 Internet Explorer 7 和 8 下，渲染简直太糟糕了。有什么方法可以在不更改字体（Raleway）的情况下修复这些浏览器下的这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:17:01.770

IE is just poor at rendering fonts (poor with most things to be honest). However usually it is really bad when there is Opacity in play, I can see in your fiddle you aren't using opacity, but you are using the font's weight.

try using `px` instead of `em` and try not to set the weight of the font

Hope that helps

# fortran - Fortran 传递函数从源数据中获取不同的值

> ID：12602519
> 
> 赞同：1
> 
> 时间：2012-09-26T13:10:19.627
> 
> 标签：fortran

我想实现以下目标：

> 使用自定义类型数据（比如 A）的第一个元素的指针来引用 A

我创建了以下代码原型：

```
program test

    implicit none

    type foo
        integer i
        integer j
    end type foo

    type(foo), target :: a
    type(foo) b
    integer, pointer :: ai

    a%i = 1
    a%j = 2

    ai => a%i

    print *, "Address of a is", loc(a)

    b = transfer(ai, b)

    print *, "The values of a are:", a%i, a%j

    print *, "Address of b is", loc(b)

    print *, "The values of b are:", b%i, b%j

end program test 
```

我希望 的值`b`应该等于`a`，但我在计算机中得到的结果为

```
Address of a is      140736918227392
The values of a are:           1           2
Address of b is      140736918227376
The values of b are:           1           0 
```

的值`b%j`不同于 的地方`a%j`。怎么了？

提前致谢！

编辑：我的目的是向用户隐藏定义的类型（比如`foo`），并且只让用户访问`foo`（比如数组）的第一部分，当用户提供该数组时，我可以获得`foo`. 这是一种封装。用户可以从键入“%”中解放出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:44:23.520

我不确定您是否了解该`transfer`功能的作用。该声明

```
b = transfer(ai, b) 
```

获取在 location 中找到的数据`ai`并使用`b`. 例如， So`transfer`用于允许程序将实数的位视为整数的位。您的语句所做的是获取在 处找到的数据`ai`，这是一个整数，并将其更改为 的值`type(foo)`，并将其分配给`b`。

我认为您很幸运，因为编译器没有抱怨 的值`ai`没有提供`transfer`足够的位来填充`b`。我并不感到惊讶，因为`transfer`它本质上是一种规避 Fortran 严格类型的方法。当然，直接赋值例如`b = 1`会导致编译错误，因为 lhs 和 rhs 没有兼容的类型。

我认为你没有任何权利期望`b%j`在你写出来的时候它的价值有任何特定的价值。根据我的快速调查`b%j`，您的程序根本没有修改 的值，在您的情况下，它被初始化`0`并且没有被修改。

但我认为真正的问题是您正在尝试做一些 Fortran 程序员不会做的事情，即使用指向结构的第一个元素的指针作为对整个结构的引用。那是 C 和它的表兄弟的味道。

在 Fortran 中，更自然地声明`ai`为 of`type(foo), pointer`然后编写语句，例如

```
ai => a
...
b = ai 
```

你真的想做什么？如果答案是“使用 Fortran 编译器用 C 语言编写程序”，那么祝你好运，享受在收费公路上滚滚而来的痛苦世界。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:04:47.617

只是补充一下，什么

```
ai => a%i
b = transfer(ai, b) 
```

确实意味着，当翻译成C时。

这是

```
b = (foo)(a->i) 
```

如果我对 C 的记忆没有愚弄我。因此，您实际上是在将整数转换为 foo 类型。

**--EDIT--** 您可以在结构（派生类型）中拥有许多私有组件，模块的用户看不到，但您可以在模块内使用它们。用户可以使用模块中定义的过程与私有实体进行交互。使用较新的编译器，您甚至可以使用 C++ 中的方法（类型绑定过程）和其他 OOP。

```
module mod
  type foo
    private
    integer,public :: i
    integer        :: j  !is private!
  end type

end module mod

program p

  use mod

  type(foo) :: a,b

  b%i = 1
  !intrinsic assignment should work, even if you don't see a%j and b%j
  !you can also override the assignment yourself
  a = b

  write(*,*) a%i

end program p 
```

# maven - 构建 JBoss Seam 示例时缺少 maven-javadoc-plugin 和 failsafe-maven-plugin

> ID：12602520
> 
> 赞同：1
> 
> 时间：2012-09-26T13:10:25.897
> 
> 标签：maven, jboss, seam

我正在尝试使用 Maven 3.0.4 构建 JBoss Seam 示例，但我缺少插件错误：

```
juliano.schroeder remoting-helloworld $ mvn jboss-as:deploy
[INFO] Scanning for projects...
[WARNING] The POM for org.jboss.maven.plugins:maven-javadoc-plugin:jar:2.8 is missing, no dependency information available
[WARNING] Failed to retrieve plugin descriptor for org.jboss.maven.plugins:maven-javadoc-plugin:2.8: Plugin org.jboss.maven.plugins:maven-javadoc-plugin:2.8 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.jboss.maven.plugins:maven-javadoc-plugin:jar:2.8
[WARNING] The POM for org.apache.maven.plugins:failsafe-maven-plugin:jar:2.9 is missing, no dependency information available
[WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:failsafe-maven-plugin:2.9: Plugin org.apache.maven.plugins:failsafe-maven-plugin:2.9 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:failsafe-maven-plugin:jar:2.9
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-metadata.xml
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/mojo/maven-metadata.xml
Downloading: https://repository.jboss.org/nexus/content/groups/public-jboss/org/codehaus/mojo/maven-metadata.xml
Downloading: https://repository.jboss.org/nexus/content/groups/public-jboss/org/apache/maven/plugins/maven-metadata.xml
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/mojo/maven-metadata.xml (21 KB at 29.4 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-metadata.xml (11 KB at 15.0 KB/sec)
Downloaded: https://repository.jboss.org/nexus/content/groups/public-jboss/org/apache/maven/plugins/maven-metadata.xml (1005 B at 0.7 KB/sec)
Downloaded: https://repository.jboss.org/nexus/content/groups/public-jboss/org/codehaus/mojo/maven-metadata.xml (1002 B at 0.7 KB/sec)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.343s
[INFO] Finished at: Wed Sep 26 09:58:26 BRT 2012
[INFO] Final Memory: 8M/19M
[INFO] ------------------------------------------------------------------------
[ERROR] No plugin found for prefix 'jboss-as' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/home/juliano.schroeder/.m2/repository), jboss-public-repository-group (https://repository.jboss.org/nexus/content/groups/public-jboss/), central (http://repo.maven.apache.org/maven2)] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/NoPluginFoundForPrefixException 
```

任何人都知道为什么会发生这种情况或可以采取什么措施来解决它？谢谢。

编辑：

settings.xml - [https://docs.google.com/open?id=0B0kQ0iZ9xNVNR3ZVRW1ldzZielE](https://docs.google.com/open?id=0B0kQ0iZ9xNVNR3ZVRW1ldzZielE)

pom.xml - [https://docs.google.com/open?id=0B0kQ0iZ9xNVNakhSVEd3djBiUmM](https://docs.google.com/open?id=0B0kQ0iZ9xNVNakhSVEd3djBiUmM)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:42:43.753

正如文档所说，如果你想将它用作命令，你应该在构建一中声明一个插件部分，在你的 pom.xml 中：

```
<project>
  ...
  <build>
    <!-- To define the plugin version in your parent POM -->
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.jboss.as.plugins</groupId>
          <artifactId>jboss-as-maven-plugin</artifactId>
          <version>7.2</version> <!-- or whatever you want -->
        </plugin>
        ...
      </plugins>
    </pluginManagement>
    <!-- To use the plugin goals in your POM or parent POM -->
    <plugins>
      <plugin>
          <groupId>org.jboss.as.plugins</groupId>
          <artifactId>jboss-as-maven-plugin</artifactId>
          <version>7.2</version> <!-- or whatever you want -->
        </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

“旧” maven-jboss-plugin 不需要它，因为它的组是 org.codehaus.mojo。但是 jboss-as 依赖于 org.jboss.as.plugins。

***编辑1 ***：

你可以在这里找到一些例子：[在 jboss 部署 jboss sar as 7 错误](https://stackoverflow.com/questions/11614167/deploy-jboss-sar-at-jboss-as-7-error)

如果你将它配置到 settings.xml 中，你可以省略这个插件：[http ://maven.apache.org/settings.html#Plugin_Groups](http://maven.apache.org/settings.html#Plugin_Groups)

***编辑2 ***：

您也可以添加好的 pluginRepository

```
<pluginRepositories>
    <pluginRepository>
        <id>jboss-public-repository-group</id>
        <name>JBoss Public Maven Repository Group</name>
        <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
    </pluginRepository>
</pluginRepositories> 
```

# html - css底部工具栏隐藏主要内容

> ID：12602524
> 
> 赞同：0
> 
> 时间：2012-09-26T13:10:32.793
> 
> 标签：html, css

我有一个底部工具栏，它固定在浏览器窗口的底部。问题是，当我向下滚动到页面底部时，部分内容会被工具栏隐藏。

这是[链接](http://engineer.org.in/events/mech-events/Perfect%20Machine.php#arena-specs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:13:15.630

增加`padding-bottom`开`div.content`。80px 似乎是一个很好的起点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:12:33.977

您可以在底部放置一些大于底部工具栏高度的填充。

这将确保一切都按您的意愿显示。

```
body
{
  padding-bottom: 200px;
} 
```

# c++ - 如何将 Int 转换为 CString？

> ID：12602526
> 
> 赞同：28
> 
> 时间：2012-09-26T13:10:34.930
> 
> 标签：c++, visual-c++, mfc

我可以将 a 转换`Double`为`CString`using`_ecvt`

```
result_str=_ecvt(int,15,&decimal,&sign); 
```

那么，是否有一种像上面那样将转换为的`int`方法`CString`？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-26T13:13:14.413

这是一种方法：

```
CString str;
str.Format("%d", 5); 
```

在你的情况下，尝试`_T("%d")`或`L"%d"`而不是`"%d"`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T13:32:02.783

如果您想要更类似于您的示例的内容，请尝试 _itot_s。在 Microsoft 编译器上，_itot_s 指向 _itoa_s 或 _itow_s，具体取决于您的 Unicode 设置：

```
CString str;
_itot_s( 15, str.GetBufferSetLength( 40 ), 40, 10 );
str.ReleaseBuffer(); 
```

它应该稍微快一些，因为它不需要解析输入格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T20:05:40.977

```
template <typename Type>
CString ToCString (Type value)
    {
    return std::to_wstring (value).data ();
    }

int main ()
    {
    const auto msg = ToCString (10);
    std::wcout << msg.GetString () << std::endl;

    return 0;
    } 
```

# liferay - Liferay 无法通过用户名获取用户

> ID：12602527
> 
> 赞同：0
> 
> 时间：2012-09-26T13:10:36.253
> 
> 标签：liferay, autologin, opensso, openam

我正在为 liferay 编写一个自动登录钩子，它试图通过屏幕名称获取用户。我正在使用以下代码来获取用户，这主要是[OpenSSOAutoLogin](http://docs.liferay.com/portal/6.1/javadocs-all/src-html/com/liferay/portal/security/auth/OpenSSOAutoLogin.html)的变体：

`User user = UserLocalServiceUtil.getUserByScreenName(companyId, screenName);`

这在大多数情况下都有效，除非在 liferay 中记录的屏幕名称是大写的。例如，如果存储的 liferay 的屏幕名称是“TEST”，我将无法获取用户。堆栈跟踪显示以下内容：

```
com.liferay.portal.NoSuchUserException: No User exists with the key {companyId=1, screenName=test}
    at com.liferay.portal.service.persistence.UserPersistenceImpl.findByC_SN(UserPersistenceImpl.java:2789)
    at com.liferay.portal.service.impl.UserLocalServiceImpl.getUserByScreenName(UserLocalServiceImpl.java:2590)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:122)
    at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
    at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
    at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
    at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
    at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
    at com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:211)
    at $Proxy103.getUserByScreenName(Unknown Source)
    at com.liferay.portal.service.UserLocalServiceUtil.getUserByScreenName(UserLocalServiceUtil.java:1625)
    at me.and.my.business.MyAutoLogin.login(MyAutoLogin.java:175) 
```

跟踪清楚地表明“不存在具有键 screenName=test 的用户”。这里的“测试”是用小写字母写的，但是 getUserByScreenName() 方法是用大写的屏幕名称调用的。

经过一番研究，我发现在[liferay UserLocalServiceImpl](http://docs.liferay.com/portal/6.1/javadocs-all/src-html/com/liferay/portal/service/impl/UserLocalServiceImpl.html#line.5175)中执行了小写转换。我想这是导致搜索失败的原因，但我不太确定。

任何人都可以确认吗？liferay 的屏幕名称是否应该始终为小写？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:58:58.037

保存新用户后，Liferay 总是将屏幕名称转换为小写。如您所说，该方法在 UserLocalServiceImpl.java 中找到

```
protected String getScreenName(String screenName) {
    return StringUtil.lowerCase(StringUtil.trim(screenName));
} 
```

因此，如果您在创建/更新用户时传入大写的屏幕名称并不重要，Liferay 将始终对其进行转换。

# php - 用 cakephp 和 phpunit 测试 add 方法

> ID：12602528
> 
> 赞同：1
> 
> 时间：2012-09-26T13:10:37.820
> 
> 标签：php, cakephp, phpunit

我正在测试一个用 cake 制作的应用程序，在测试 add 方法时发现了一个问题。实际上的问题是，每当我想测试在数据库上保存数据时，在制作了与请求一起发送的样本数据后，我发现该数据保存在数据库上，但只设置了 id 属性。其他字段为空。

这是我要测试的方法：

```
public function admin_add() {
    if ($this->request->is('post')) {
        debug($this->request->data);
        $this->Item->create();
        if ($this->Item->save($this->request->data)) {
            $this->Session->setFlash(__('The item has been saved'));
            //$this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The item could not be saved. Please, try again.'));
        }
    }
    $products = $this->Item->Product->find('list');
    $attributes = $this->Item->Attribute->find('list');
    $this->set(compact('products', 'attributes'));
} 
```

这是我的测试：

```
public function testAdmin_add(){

 $this->Items->request->params['action'] = 'admin_add';
 $this->Items->request->params['url']['url'] = 'admin/items/add';
 $data = array(
  'Item' => array(
    'product_id' => 1,
    'attribute_id' => 9,
    'title' => 'test_item',
    'code' => 1,
    'in_stock' => 1,
    'batched_stock'=> 1,
    'allocated' => 0,
  ),
 );

    $this->Collection = $this->getMock('ComponentCollection');
  $this->Items->Session = $this->getMock('SessionComponent', array('setFlash'), array($this->Collection));

  $this->Items->Session->expects($this->once())
        ->method('setFlash')
        ->with(__d('items', 'Se ha guardado el item'));

 $this->__setPost($data);

 $this->Items->admin_add();

} 
```

请注意，如果我运行此测试，我将在 db 上有一个额外的字段，并且因为表的 id 是自动递增的，所以我无法取回 id 以删除该条目。
现在的问题是：有什么方法可以在不实际保存数据的情况下测试数据库保存？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:06:35.607

为了防止保存数据，您需要使用 Fixtures。以下是基于您使用的 CakePHP 版本的文档：

*   [CakePHP 1.3](http://book.cakephp.org/1.3/en/The-Manual/Common-Tasks-With-CakePHP/Testing.html#about-fixtures)
*   [CakePHP 2.x](http://book.cakephp.org/2.0/en/development/testing.html#fixtures)

确保使用测试数据库，否则您会发现在每次测试运行后，您的表都会被删除。

# objective-c - UITableView 层的内部阴影？

> ID：12602529
> 
> 赞同：0
> 
> 时间：2012-09-26T13:10:39.047
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, shadow

我需要给我的 UITableView 添加一个内阴影效果。我发现了这篇关于向 UIView 层添加内阴影的有用帖子：UIView 层的[内阴影效果？](https://stackoverflow.com/questions/4431292/inner-shadow-effect-on-uiview-layer)

当我尝试在 UITableView 上使用此技术时会出现问题，因为 UITableView 的单元格显示在顶部，覆盖了阴影。

我已经尝试将 UITableView 作为子视图添加到 UIView （带有内部阴影），但没有效果。

我的 UITableView 以 UIViewController 的视图为中心，背景为深灰色。给 UITableView 一个内部阴影将使背景成为表格视图的边框。![我目前拥有的没有内部阴影](../Images/61b881858d165967ba81afa297b775b4.png)

我如何才能最好地实现我在 UITableView 上寻找的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:43:13.757

回答我自己的问题：

我最终继承了 UIView 并使用这篇文章实现了 drawRect 函数：[UIView 层的内阴影效果？](https://stackoverflow.com/questions/4431292/inner-shadow-effect-on-uiview-layer)

然后通过实现以下方法指示新的 UIView 子类将所有触摸事件转发到底层视图控制器：

```
-(BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    return NO;
} 
```

最后，我将新视图作为子视图添加到我的主视图中，将其背景设置为透明，将其放置在 tableView 的顶部并将其置于最前面。

```
- (void)viewDidLoad {
    InnerShadowView *shadowView = [[InnerShadowView alloc] init];
    [self.view addSubview:shadowView];
    shadowView.frame = _tableView.frame;
    shadowView.backgroundColor = [UIColor clearColor];
    [self.view bringSubviewToFront:shadowView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:13:52.367

我相信这篇文章完全涵盖了您正在寻找的内容：

[http://cocoawithlove.com/2009/08/adding-shadow-effects-to-uitableview.html](http://cocoawithlove.com/2009/08/adding-shadow-effects-to-uitableview.html)

# visual-studio-2012 - Visual Studio 2012 IDE 在升级后抱怨命名空间

> ID：12602531
> 
> 赞同：4
> 
> 时间：2012-09-26T13:10:53.510
> 
> 标签：visual-studio-2012

我最近将 VS 2010 解决方案升级为 VS 2012 解决方案。它是一个包含各种类库和 MVC Web 应用程序的解决方案。我已将所有项目升级到 .NET 4.5，但出现了这个奇怪的错误。

解决方案 100% 构建，但每当我在控制器（任何控制器）中时，对我的 MVC 项目中的类的任何引用都无法识别，即我得到“找不到命名空间名称‘xxx’的类型等”。而且我对自己的任何课程等都没有智能感知，但是该项目可以完美地构建和运行。

有任何想法吗？？？是的，这是非常零星的，它会从一分钟开始工作，而下一分钟就不会了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T22:08:30.270

运行**Build -> Clean Solution**。

或者..

右键单击 Visual Studio 找不到引用的项目，然后选择**Clean**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:13:48.660

我猜你安装了resharper？

尝试：工具->导入和导出设置->重置所有设置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T17:32:15.633

我遇到了同样的问题，我尝试了完全卸载重新安装，我尝试了完全卸载并删除了我可以手动找到的所有残余并重新安装。我尝试通过设置修复，仍然没有。

我尝试在操作系统中创建一个新用户并通过它加载它，仍然是同样的问题。我尝试使用 devenv.exe /resetsettings 启动 Visual Studio，我也尝试了 devenv.exe /safe 但仍然没有。

仍然是同样的问题，我最终彻底清除了我的操作系统以解决此问题。绝不是任何形式的修复，但我确实尝试了我能做的一切。肯定有问题是 setup.exe 在某些情况下没有正确安装导致这个......

不过，我想补充一点，对我来说，这不是特定于项目类型的。虽然起初我认为这是因为我主要使用 MVC 项目类型，但我创建了几个其他项目类型，但它仍然有问题......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T14:23:28.467

I have the same issue almost daily; I haven't found a permanent fix as yet, but I did find that running the following from a command line will fix it ~60% of the time (provided you're willing to close out the IDE first):

```
del /F /Q %LocalAppData%\Microsoft\WebsiteCache 
```

I ended up putting that in a .cmd file on my desktop, which I run as needed. Not pretty, but faster than the other solution I found (completely purge the solution/project directories and pull a fresh copy out of TFS).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T09:53:17.990

刚刚在我的一个解决方案上解决了这个问题。

在记事本中打开您的项目文件。如果您查看它们具有相对位置的参考。将所有替换为绝对文件位置。

例如。..\packages 应该是 c:\myproject\packages

在 Visual Studio 中重新打开，一切都应该很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-01T13:48:16.060

我最近在转换一个内置于旧版本 VS 的应用程序后遇到了这种情况。我的解决方法是将主应用程序的目标 .Net 版本从 3.5 更改为 4.5，以匹配我参考的目标框架。

# c# - 在 WebControl 中加载了 jquery 插件但“无法访问”

> ID：12602534
> 
> 赞同：0
> 
> 时间：2012-09-26T13:10:54.600
> 
> 标签：c#, jquery, jquery-plugins, web-controls

我在制作fixedTableHeader 时遇到了麻烦。我找到了一个 jQuery 插件，它在简单的测试中运行良好。但我需要将它作为嵌入资源包含在 WebControl 中。

所以我在 Assembly.cs 中注册了脚本并将它们设置为“嵌入式资源”

在 WebControl 中，它们的注册方式如下：

```
 this.Page.ClientScript.RegisterClientScriptInclude(this.GetType(), "jquery",  Page.ClientScript.GetWebResourceUrl(this.GetType(), "LRGrid.jquery_min.js"));

 var fixedScript = Page.ClientScript.GetWebResourceUrl(this.GetType(), "LRGrid.jquery_fixedheadertable.js");

 this.Page.ClientScript.RegisterClientScriptInclude(this.GetType(), "fixedheadertable", fixedScript);

 this.Page.ClientScript.RegisterClientScriptInclude(this.GetType(), "jquery",  Page.ClientScript.GetWebResourceUrl(this.GetType(), "LRGrid.jquery.tablescroll.js")); 
```

然后为了调用我做的脚本：

```
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "SetTable" + ClientID, "; $(document).ready(function(){$('table#" + ClientID + "').fixedHeaderTable({ footer: false, cloneHeadToFoot: false, fixedColumn: false });});", true); 
```

现在，如果我在 FireFox 中测试它，我会得到

```
.fixedTableHeader is not a function 
```

IE9告诉我`method not supported`

我可以使用 FireBug 或 IE Developer 工具栏并查看脚本是否已加载？！？！？关于为什么它不可用的任何想法？

**编辑::** 现在我尝试直接在标记中加载脚本 - 然后它按预期工作。但是，一旦我尝试使用嵌入式资源加载它们，它就会失败并且无法识别`fixedTableHeader`为函数

```
$(document).ready(function () { 
    if(jQuery.isFunction($('table#" + ClientID + "').fixedTableHeader)){
      $('table#" + ClientID + "').fixedTableHeader({ height:200, width:'100%' });
    }else{
      alert('unable to load scroll script');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:52:43.563

好的 - 所以错误位于另一个文件中......真糟糕！

我已经从 BasePage 加载了 jQuery（或者其他人做过一次；））

```
Page.ClientScript.RegisterClientScriptInclude(
  typeof (WebPageBase), "jQuery", ResolveUrl("~/Scripts/jquery-1.4.1.js")); 
```

当我尝试在那里加载 jQuery 时，这与我的控制冲突......现在我不想从任何一个位置删除 jQuery 初始化。所以我决定让 BasePage 加载有条件。由于 BasePage 有知识`LRGrid`，但不是相反......

所以这是解决方案：

```
if (!Page.ClientScript.IsClientScriptIncludeRegistered(typeof(LRGrid.LRGrid), "jquery"))
      {
        Page.ClientScript.RegisterClientScriptInclude(
             typeof (WebPageBase), "jQuery", ResolveUrl("~/Scripts/jquery-1.4.1.js"));
      } 
```

希望你们中的一些人可以使用它:-p

# c++ - OpenCV矩阵和int矩阵之间的转换

> ID：12602536
> 
> 赞同：6
> 
> 时间：2012-09-26T13:11:18.087
> 
> 标签：c++, video, opencv, matrix, type-conversion

我正在尝试使用 openCV 读取视频帧，以 cv::Mat 形式保存数据。然后我想使用我的另一个代码，它接受“int 类型矩阵”到这个视频帧。我知道“cvMat”和“int 类型矩阵”不兼容。也许我不熟悉opencv，但我可以在“cvMat”和“int mat”之间进行任何类型的转换，以便我可以将我的代码用于捕获的视频帧吗？我说“int mat”，也许它不正确，但我的意思是：

```
cv::Mat videoFrame;
int inputData[600][400]; 
```

我想做类似的事情：

```
inputData = videoFrame; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T13:39:02.600

快速的方法是共享内存：不需要复制。但是，如果您修改一个矩阵，另一个将被修改（很明显！）

```
int inputData[600][400];
cv::Mat videoFrame(600, 400, CV_32UC1, inputData); 
```

请注意，对 videoFrame 的任何进一步的 OpenCV 调用都会更改其类型/大小，将分配一块新的内存来存储结果。

如果您想拥有单独的数据矩阵，您可以使用 memcpy -这是复制数据的最快方法：

```
memcpy((char*)inputData, (char*)videoFrame.data, 600*400*sizeof(int) ); 
```

这种方法的问题在于它根本不安全。如果 videoFrame 不是 int 类型怎么办？（很可能是字符）。如果它没有连续存储在内存中（可能发生）怎么办？...

# html - contentEditable - execCommand 'heading' 仅适用于 Firefox

> ID：12602542
> 
> 赞同：3
> 
> 时间：2012-09-26T13:11:42.167
> 
> 标签：html, contenteditable, execcommand, html-heading

我有以下代码将所选文本包装在 H2 标签中。

问题是，它只适用于 Firefox（虽然我还没有在 IE 中测试过）。它在 Safari 或 Chrome 中不起作用。

我是否遗漏了什么，或者此功能与所有浏览器不兼容？

```
<button onclick="document.execCommand('heading',false,'h2');">heading</button>

<div class="editable" contentEditable>
    <p>Add content here...</p>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T14:14:47.917

**[注意：`document.execCommand`它的功能现在得到了广泛的支持。]**

您可能已经找到了答案，但是由于我遇到了同样的问题，所以我将发布以下内容：

**这不是广泛支持的功能。** 如此处所示： [http ://www.quirksmode.org/dom/execCommand.html#t013](http://www.quirksmode.org/dom/execCommand.html#t013)

看来您必须使用 formatBlock：

```
document.execCommand('formatBlock', false, '<'+dataValue+'>');  //dataValue must be h2 in your case 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-21T15:55:23.450

要创建 H2 标签，您需要使用

```
document.execCommand('formatBlock',false,'h2') 
```

它会起作用的。

# asp.net-mvc-3 - Azure 服务总线 - 双向通信性能挑战

> ID：12602546
> 
> 赞同：5
> 
> 时间：2012-09-26T13:11:53.943
> 
> 标签：asp.net-mvc-3, azure, azure-web-roles, servicebus, azureservicebus

我需要在发布者和订阅者之间建立双向通信。这是为了方便前端 MVC3 应用程序使用相关过滤器定义订阅，然后将消息放置到主题上。最后，MVC3 控制器在 SubscriptionClient 上调用 BeginReceive()，并等待响应。

问题似乎是这些订阅对象的创建和删除。开销是巨大的，它会减慢应用程序的速度。更不用说要解决的各种限制，例如一个主题不超过 2000 个订阅。

在发布者和订阅者之间建立这种双向通信的最佳实践是什么？我们希望 MVC3 应用程序发布一条消息，然后等待对该确切消息的响应（通过 CorrelationId 属性和 CorrelationFilter）。我们已经缓存了 NamespaceManager 和 MessagingFactory，因为它们在资源方面也非常昂贵，而且还因为我们被告知 Service Bus 使用显式配置模型，我们需要在角色启动期间预先创建大部分这些东西。

因此，这给我们带来了将请求与响应关联起来的挑战，以及创建和删除订阅的巨大开销。有什么更好的做法？我们是否应该保留 SubscriptionClients 的缓存，并每次交换过滤器？其他人都做什么？我需要通过 Web 角色集群获得每秒 5 到 10,000 个 MVC3 请求的请求吞吐量。我们已经在使用 AsyncController 并在 SubscriptionClient 上使用异步 BeginReceive()。在这一点上，似乎是成千上万的订阅的创建和删除正在阻塞系统。

**更新1：** 根据此处提供的重要建议，我们更新了此解决方案，以在每个 Web 角色实例上保留 SubscriptionClient 对象的缓存。此外，我们已迁移到面向 MessageSession 的方法。

但是，这仍然没有缩放。看来 AcceptMessageSession() 是一个非常昂贵的操作。MessageSession 对象是否也应该被缓存和重用？每个打开的 MessageSession 对象是否都使用到服务总线的连接？如果是这样，这是否计入订阅的并发连接配额？

非常感谢。我认为我们正在到达那里。Web 上的大多数示例代码显示：Create Topic()，然后 CreateSubscription()，然后 CreateSubscriptionClient()，然后在客户端上 BeginReceive()，然后拆除所有对象。我只能说，如果你在现实生活中这样做，你的服务器就会崩溃，你很快就会用尽连接。

我们需要通过这个东西每秒发出数千个请求，很明显这些对象必须被大量缓存和重用。那么，MessageSession 是另一个要缓存的项目吗？我会享受缓存的乐趣，因为我们必须实现一个引用计数机制，一次只能给出一个对 MessageSession 的引用，因为这是针对特定于 http 请求的请求/响应，我们不能有其他的订阅者同时使用 MessageSession 对象。

**UPDATE2：** 好的，缓存 MessageSession 以供重复使用是不可行的，因为它们的生存时间与订阅上的 LockDuration 一样长。这是一个无赖，因为最大 LockDuration 是 5 分钟。这些似乎是针对短期发布/订阅的，而不是针对长期运行的分布式进程。看起来我们需要回到轮询 Azure 表。

**总结/评论** 我们尝试在服务总线上构建，因为它具有规模潜力及其持久性和交付语义。但是，似乎有些情况（其中的大量请求/响应）不适合它。发布部分工作得很好，在后端有竞争的消费者很好，但是让前端请求等待一个定义的、单一的消费者响应，根本不能很好地扩展，因为 MessageSessions 需要太长时间才能完成通过 AcceptMessageSession() 或 BeginAcceptMessageSession() 创建，因为它们不适合缓存。

如果有人有另一种观点，我很想听听。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:19:27.873

这个场景是一个经典的请求/响应，是使用会话的好候选。这些是另一种相关机制。制作一个简单的请求队列和响应队列。每个 Web 角色线程都会为请求创建一个唯一的 sessionid，并将该值放入 brokeredmessage 的“ReplyToSessionID”属性中。此外，该线程使用 sessionid 值在响应队列上调用[AcceptMessageSession](http://msdn.microsoft.com/en-us/library/windowsazure/hh293162.aspx)，因此它会锁定它。代理消息被发送到请求队列，所有工作角色竞争消息。当工作角色收到请求时，它会对其进行处理，创建响应消息并在响应消息上设置 sessionid 属性=replytosessinid of request。然后将其发送到响应队列，并且只会传递到已锁定该会话 ID 的线程。详细样本[使用会话在这里](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Request-2b4ff5d8)。这里还有 2 个额外的示例使用[Queues](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Request-0ce8fcaf)和[Topics](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Request-6759a36e)来实现请求响应关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:13:28.317

另一种方法是使用关联 ID 和回调委托的字典对 Web 角色实例执行消息关联。

每个 Web 角色（发布者）实例都有一个订阅，通过单个订阅 ID 过滤，以响应主题。

在发送消息之前，该消息的回调将在字典中注册，并以相关 id 作为键。相关 id 和订阅 id 与消息一起发送，以便可以将响应与相关 id 一起发送回正确的订阅。

每个 Web 角色实例监控单个订阅，并在收到响应时删除字典条目并调用回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T23:16:06.400

对于单个发送者和接收者，您只需要一个主题/订阅。您可以在同一订阅上设置多个[关联过滤器](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.correlationfilter.aspx)，从而使您需要关联的所有响应都显示在同一订阅中。目前，我们在单个订阅上支持多达[100,000 个](http://msdn.microsoft.com/en-us/library/windowsazure/ee732538.aspx)相关过滤器实例，并且可以添加/删除这些实例（如果需要，可以使用事务）以及对主题/订阅的消息发送/接收操作。

此外，如果需要，您可以使用带有操作的规则来为消息添加附加属性，具体取决于匹配的过滤器。

# .net - 正则表达式 - 匹配子串并替换它

> ID：12602547
> 
> 赞同：0
> 
> 时间：2012-09-26T13:11:58.943
> 
> 标签：.net, regex, replace, match

我有以下正则表达式，它搜索标签 h1、h2、...、h5 并返回与包含标签名称的名为**TagName**的组和包含标签值的名为**TagValue的组的匹配。**

```
 Public Sub Main
    Dim strSearched = <html>
                          <head>
                              <title>This is a test</title>
                          </head>
                          <body>
                              <h1>DA:TG01</h1>
                              <p>First paragraph</p>
                              <h2>This is a test 2</h2>
                              <!--More boring stuff omitted-->
                          </body>
                      </html>.ToString

    Dim ResultString As String
    Dim myMatchEvaluator As MatchEvaluator = New MatchEvaluator(AddressOf ComputeReplacement)

    ResultString = Regex.Replace(strSearched,
                                 "<(?'TagName'h[1-5])>(?'TagValue'.*?)</\k<TagName>>",
                                 myMatchEvaluator,
                                 RegexOptions.Singleline Or RegexOptions.IgnoreCase)

End Sub

Public Function ComputeReplacement(ByVal m As Match) As String
    ' Need to replace the Group('value') here

    Return strRetValue
End Function 
```

在 Function ComputeReplacement 中，我需要将 Group("TagValue") 替换为另一个值并返回匹配字符串，例如：

如果比赛是`<h1>AAA</h1>`我需要它返回`<h1>BBB</h1>` ，而如果比赛是`<h2>AAA</h2>`我需要它返回`<h2>BBB</h2>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:19:25.213

您可能应该使用某些东西来转换为 XML 并使用 xpath，您可以使用以下解决方案之一：

HtmlAgilityPack：[http](http://htmlagilitypack.codeplex.com) : //htmlagilitypack.codeplex.com SGMLReader：http: [//developer.mindtouch.com/SgmlReader](http://developer.mindtouch.com/SgmlReader)

# configuration - core_compile.yml

> ID：12602549
> 
> 赞同：0
> 
> 时间：2012-09-26T13:12:10.640
> 
> 标签：configuration, symfony-1.4

感谢 core_compile.yml，我正在尝试加载模型。他的意思是通过加载公共文件来降低IO操作的成本。

我希望将我的一些模型加载到其中。但看起来，它仅适用于自定义类或扩展已加载类的类。

有谁知道如何加载这些模型？我尝试通过添加所有需要的类，但是当你必须包含类推进时，自动加载会尝试加载每个推进文件，并且惨遭失败。看来，我无法解决这个问题，除非我写了一个特殊的推进类。

我正在使用 symfony 1.4 和推进 1.6（symfony 插件）。有没有人成功做到这一点？

这主要是教育性的，应用程序足够快，客户已经将另一个版本部署到生产中，所以我不能对我的经理和我的客户说，让我们安装 APC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:53:22.260

我试着探索一下。这基本上是不可能的……以合理的成本。你可以加载一些孤立的所有用途，独立的类。否则，您必须显式加载所有称为、继承等的类。

有了推进力，这是不可能的。因为推进文件不能以这种方式相互要求。所以你必须修改它。

因此，有可能获得显着收益，但成本非常高。在我的测试服务器上，symfony 需要在开发模式下执行 200 毫秒的 php 来发送一个空白页。更容易升级 php 或使用 APC。

# xml - 从存储过程输出参数中的“FOR XML EXPLICIT”返回结果

> ID：12602564
> 
> 赞同：1
> 
> 时间：2012-09-26T13:13:05.503
> 
> 标签：xml, stored-procedures, sql-server-2000

我创建了一个 SQL Server 2000 存储过程来使用`FOR XML EXPLICIT`. 这本身工作正常，但是我无法弄清楚如何在输出参数中获取存储过程返回的 XML 结果（因为我想从另一个 SP 调用它）。

我尝试了以下选项，但似乎无法使其正常工作！

```
CREATE PROCEDURE [dbo].[MyProc]
    @user_index INT,
    @xml_data   VARCHAR(8000) OUTPUT
AS
BEGIN
    SELECT  @xml_data = 
             1 AS Tag
            ,0 AS Parent
            ...
            ...

    UNION ALL

    SELECT   2 AS Tag
            ,1 AS Parent
            ...
            ...
    FOR XML EXPLICIT
END 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:19:49.107

您的 FOR XML 查询需要是子查询，如下所示：

```
CREATE PROCEDURE [dbo].[MyProc]     
  @user_index INT,     
  @xml_data   VARCHAR(8000) OUTPUT 
AS 
BEGIN     
  SELECT  @xml_data =               
  (
    SELECT 
       1 AS Tag             
      ,0 AS Parent             
...             
...      
    UNION ALL      
    SELECT   
       2 AS Tag             
      ,1 AS Parent             
...             
...     FOR XML EXPLICIT 
  )
END 
```

* * *

勘误：我刚刚注意到您对 SQL Server 2000 的引用。SQL Server 2000 中没有 XML 数据类型，所以这不起作用。如果我没记错的话，该版本中的 FOR XML 只能将结果流式传输到 TDS 流。您无法在数据库过程中捕获输出。

所以你想要做的事情在 SQL Server 2000 上是不可能的。

# android - 如何获取 ListView 的 mesuaredWidth

> ID：12602565
> 
> 赞同：1
> 
> 时间：2012-09-26T13:13:09.967
> 
> 标签：android, listview, layout

我有一个 ListView myList，其中有几个项目。我已将 myList 宽度设置为 fill_parent，并且父级为 Fragment。然后我将 Fragment 的宽度设置为 100，myList 的宽度也设置为 100（getWidth() 方法）。但是 myList 中的项目文本被剪切了，没关系。我所需要的只是知道我应该设置片段的宽度以匹配 myList 中文本的大小。

我认为myList的measuredWidth()应该返回这个值，但它返回的和getWidht()一样，我做错了什么？

感谢您的帮助

# c# - C# 使面板在鼠标移到其他面板后的特定时间内可见

> ID：12602567
> 
> 赞同：0
> 
> 时间：2012-09-26T13:13:12.243
> 
> 标签：c#, mousehover

在鼠标移到其他面板上后，我需要让面板在特定时间内可见，我已经解决这个问题很长时间了。我尝试使用 Timer，但没有成功。

这是我的代码：

```
 this.MouseHover += new EventHandler(myMouseHover);

   [...]
   //event handler
   private void myMouseHover(object sender, EventArgs e)
        {

                this.prevPanel.Visible = true;
                this.nextPanel.Visible = true;

                /* here I want put timer */

                this.prevPanel.Visible = false;
                this.nextPanel.Visible = false;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:16:09.857

您可以使用`Timer`和定义`Interval`属性

财产 ：

```
private System.Windows.Forms.Timer aTimer; 
```

在里面 ：

```
 aTimer = new System.Windows.Forms.Timer();

    // Hook up the Elapsed event for the timer.
    aTimer.Tick += new ElapsedEventHandler(OnTimedEvent);

    // Set the Interval to 2 seconds (2000 milliseconds).
    aTimer.Interval = 2000;
    aTimer.Enabled = true; 
```

代表 ：

```
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
      this.prevPanel.Visible = false;
      this.nextPanel.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:30:33.697

根据您使用的计时器类型，您需要放置将隐藏面板以响应滴答事件的代码。

例如，使用 System.Windows.Forms.Timer：

```
System.Windows.Forms.Timer myTimer = new System.Windows.Forms.Timer();

// form constructor
public myForm() 
{
    myTimer.Interval = 1000;    // or whatever you need it to be
    myTimer.Tick += new EventHandler(TimerEventProcessor);   
}

private void myMouseHover(object sender, EventArgs e) 
{
     this.prevPanel.Visible = true;
     this.nextPanel.Visible = true;
     myTimer.Start();
 }

private void TimerEventProcessor(Object myObject, EventArgs myEventArgs) {
     myTimer.Stop();
     this.prevPanel.Visible = false;
     this.nextPanel.Visible = false;
} 
```

您可以使用其他计时器，但 WinForms 计时器具有在 UI 线程中触发的优势，因此您无需担心。需要注意的一件事是，您需要考虑如果鼠标悬停事件在计时器到期之前再次触发会发生什么。

最后，如果您使用 WPF 而不是 WinForms，您可能可以使用动画在 XAML 中完成所有工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:29:48.803

```
System.Timers.Timer timer1 = new System.Timers.Timer ();

timer1.Interval  = periodAfterToStopInMiliseconds;

timer1.Elapsed += timer1_Elapsed;

private void ActLikeIWant(double periodAfterToStopInMiliseconds)
{
    timer1.Start();
}

void timer1_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
     var timer = (System.Timers.Timer) sender;

     timer.Stop();

     this.prevPanel.Visible = false;
     this.nextPanel.Visible = false;
}

private void myMouseHover(object sender, EventArgs e)
{
    this.prevPanel.Visible = true;
    this.nextPanel.Visible = true;

    ActLikeIWant(periodAfterToStopInMiliseconds: 200);
} 
```

# c# - 模态消息框线程问题

> ID：12602575
> 
> 赞同：1
> 
> 时间：2012-09-26T13:13:23.850
> 
> 标签：c#, winforms, modal-dialog, messagebox

我正在尝试制作一个消息框模式，但我遇到了线程问题。

我有这样的课：

```
public static class DisplayMessage()
{
    public static void ErrorMessage(string errorMessage)
    {
         MessageBox.Show(errorMessage, "Error", MessageBoxButtons.OK,MessageBoxIcon.Error);
    }
    //other similar methods
} 
```

所以我希望消息框成为主窗体的模态。MessageBox.Show 已重载，因此您可以指定**IWin32Window**。所以我尝试使用 .ActiveForm 但我得到了这个：

> 跨线程操作无效：控件从创建它的线程以外的线程访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:17:51.647

试试这个：

```
 public static void ErrorMessage( Form Parent, string errorMessage )
    {
        if ( Parent != null && Parent.InvokeRequired )
            Parent.Invoke( (Action)(() => MessageBox.Show( errorMessage, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error )) );
        else
            MessageBox.Show( errorMessage, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error );
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T08:56:00.270

另一种方法是这样的：

当您启动对象实例时，保存当前的 Dispatcher

```
Dispatcher m_dispatcher = Dispatcher.CurrentDispatcher; 
```

然后，当您必须调用某些东西时，请使用委托

```
m_dispatcher.Invoke((Action)delegate()
{
   MessageBox.Show(Application.Current.MainWindow, exception.Message, "Fatal Error", MessageBoxButton.OK, MessageBoxImage.Error);
}); 
```

# apache - 使用 mod_authnz_ldap 和 apr/apr-util 构建 apache2 2.4.3 时出错

> ID：12602579
> 
> 赞同：1
> 
> 时间：2012-09-26T13:13:38.537
> 
> 标签：apache, centos, rpm, apr, mod-ldap

我目前正在尝试生成一个修补过的 apache2 2.4.3 的 RPM 包

我修改了存档提供的 httpd.spec，以使用 APR 的 SVN 版本（CentOS 不提供 1.4 版）：

```
%build
# forcibly prevent use of bundled apr, apr-util, pcre
rm -rf srclib/{apr,apr-util,pcre}

svn co http://svn.apache.org/repos/asf/apr/apr/trunk srclib/apr

./buildconf
%configure \
        --enable-layout=RPM \
        --libdir=%{_libdir} \
        --sysconfdir=%{_sysconfdir}/httpd/conf \
        --includedir=%{_includedir}/httpd \
        --libexecdir=%{_libdir}/httpd/modules \
        --datadir=%{contentdir} \
        --with-installbuilddir=%{_libdir}/httpd/build \
        --enable-mpms-shared=all \
        --with-included-apr \
        --enable-suexec --with-suexec \
        --with-suexec-caller=%{suexec_caller} \
        --with-suexec-docroot=%{contentdir} \
        --with-suexec-logfile=%{_localstatedir}/log/httpd/suexec.log \
        --with-suexec-bin=%{_sbindir}/suexec \
        --with-suexec-uidmin=500 --with-suexec-gidmin=100 \
        --enable-pie \
        --with-pcre \
        --with-libxml2 \
        --enable-mods-shared=all \
        --enable-ssl --with-ssl --enable-socache-dc --enable-bucketeer \
        --enable-case-filter --enable-case-filter-in \
        --enable-session-crypto --with-crypto \
        --enable-ldap --enable-authnz-ldap --with-ldap \
        --disable-imagemap 
```

重要的部分是：

```
 --with-included-apr \
        --enable-ldap --enable-authnz-ldap --with-ldap \ 
```

当我生成包时：

```
rpmbuild -ba ~/rpmbuild/SPECS/httpd.spec 
```

我收到以下错误：

```
checking for ldap support in apr/apr-util... no
configure: WARNING: apr/apr-util is compiled without ldap support
checking whether to enable mod_authnz_ldap... configure: error: mod_authnz_ldap has been requested but can not be built due to prerequisite failures 
```

`--with-ldap`我在邮件列表中找到了一些答案，这些答案说明了实际存在的缺失选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T03:12:47.307

我在 Ubuntu 13.10 中配置 Apache2 httpd-2.4.7 时遇到了同样的问题。您应该确保已安装 OpenLDAP。在 Ubuntu 中：

```
sudo apt-get install sladp ldap-utils 
```

就我而言，这并没有解决问题，所以我安装了开发版本：

```
sudo apt-cache search openldap #found libldap2-dev
sudo apt-get install libldap2-dev 
```

我认为您可以使用以下命令在 rpm 中找到开发包：

```
rpm -qa | grep ldap 
```

然后使用'--with-ldap'配置httpd为我解决了这个问题。

```
./configure --prefix=/usr/local/apache --sysconfdir=/etc/apache --enable-so --with-ldap --enable-ssl --with-included-apr --with-pcre=/usr/local/pcre 
```

# iphone - NSUserDefaults 在设置之前返回

> ID：12602580
> 
> 赞同：1
> 
> 时间：2012-09-26T13:13:43.433
> 
> 标签：iphone, objective-c, ios, xcode4.5

我正在制作一个需要两个字符串和一个 int 的应用程序。我希望这些显示在另一个视图上。

我已将它们放入一个数组中，并尝试将它们存储在 NSUserDefaults 中。我已经设法存储了这些数据。我遇到的问题是，当我更改数据并再次保存时，获取数组的函数在设置它的函数之前被调用。所以应用程序总是显示以前的数据。

我认为通过更改调用函数的时间很容易解决。

但从代码来看，我认为它们的顺序是正确的。

```
2012-09-26 13:55:02.764 BeerDivider[4377:907] array returnd = (
    2,
    "Person 1",
    "Person 2"
)
2012-09-26 13:55:02.773 BeerDivider[4377:907] array saved = (
    5,
    "Person 1",
    "Person 2"
) 
```

我可以从记录数组中看到它们以错误的顺序被调用。

请任何人都可以看到我哪里出错了。这是我的第一篇objective-c/xcode 帖子，所以不确定你想看什么代码。我会把它全部放进去。

[http://pastebin.com/BX5gqp17](http://pastebin.com/BX5gqp17)

对不起，如果这是很多代码。

谢谢您的帮助。

编辑：更新代码

EDIT2：我认为发生的事情类似于这个[iOS在prepareSegue之前做按钮的动作](https://stackoverflow.com/questions/11689985/ios-do-the-buttons-action-before-preparesegue)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:16:52.197

首先查看 NSUserDefault 的 Apple 文档[NSUserDefault](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)
始终返回您保存在其中的数据

别忘了写 `[defaults synchronize];`

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:yourArray forKey:@"YourKey"]
    [defaults synchronize]; 
```

根据您给定的代码。

```
-(void)saveInfo:(NSArray *)myArray
    {
         NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:myArray forKey:@"array"];
    [defaults synchronize];
    NSLog (@"array saved = %@", [defaults objectForKey:@"array"]);
    } 
```

现在检查结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:18:40.793

做这个：

```
-(void)saveInfo:(NSArray *)myArray
{
    [[NSUserDefaults standardUserDefaults] setObject:myArray forKey:@"array"];
    [[NSUserDefaults standardUserDefaults] synchronize]; //u forgot this
    NSLog (@"array saved = %@", myArray);
} 
```

# wpf - 每次使用 mvvm,wpf 从 Checkedlistbox 中选择项目时要知道的事件或命令

> ID：12602584
> 
> 赞同：2
> 
> 时间：2012-09-26T13:13:55.427
> 
> 标签：wpf, mvvm, prism-4

我正在将 MVVM 与 WPF 一起使用...我有一个带有一些项目的已选中列表框....每次检查一个项目时，我希望在 Viewmodel 中使用该项目...。是否有属性或命令或事件以便我可以用它来知道checkeditem...

这是我的xml...

```
 <ListBox Grid.Row="9" Height="49" HorizontalAlignment="Left" Margin="0,30,0,0"      Name="aasdasd" VerticalAlignment="Top" Width="205" SelectionMode="Multiple" 
             ItemsSource="{Binding userlist}" Grid.Column="1">
       <ListBox.ItemTemplate>
            <DataTemplate>
                <CheckBox Name="chkuser" Content="{Binding Path=useritem}" IsChecked="{Binding IsChecked,Mode=TwoWay}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:27:30.320

如果`userList`实现中的项目`INotifyPropertyChanged`，您的视图模型可以订阅[`PropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)列表中每个项目的事件（确保它使用[弱事件](http://msdn.microsoft.com/en-us/library/aa970850.aspx)或正确取消订阅事件）并在`IsChecked`属性更改为时观察者`true`。

或者，您可以在事件上使用事件触发器[`Checked`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.checked.aspx)来执行视图模型中的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:30:04.183

您正在绑定到`IsChecked`模型上的 ，因此您的 viewModel 可以简单地订阅`PropertyChanged`该项目的事件，并在该属性更改时执行您想要的任何操作

```
public MyViewModel()
{
    userList.CollectionChanged += userList_CollectionChanged;
}

void userList_CollectionChanged(object sender, CollectionChangedEventArgs e)
{
    if (e.NewItems != null)
        foreach(MyItem item in e.NewItems)
            item.PropertyChanged += MyItem_PropertyChanged;

    if (e.OldItems != null)
        foreach(MyItem item in e.OldItems)
            item.PropertyChanged -= MyItem_PropertyChanged;
}

void MyItem_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "IsChecked")
    {
        // Do whatever here
    }
} 
```

# sql - SQL 查询优化不存在

> ID：12602590
> 
> 赞同：1
> 
> 时间：2012-09-26T13:14:08.473
> 
> 标签：sql, sql-server-2005, optimization

我需要优化以下查询，有人可以帮忙吗？我知道是 Not Exists 部分导致了问题，因为它正在进行大规模的表扫描，但我对此并不陌生，任何人都可以提供任何建议吗？

```
select count(*)
from Job j
where company = 'A'
and branch = 'Branch123'
and engineerNumber = '000123'
and ID > 60473
and not exists(
select JobNumber, Company, Branch
from OutboundEvents o
where o.JobNumber = j.JobNumber
    and o.branch = j.branch
    and o.company = j.company
    and o.Formtype = 'CompleteJob') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T13:18:34.337

```
create index [<indexname>] on [Job] (
    [company], [branch], [engineerNumber], [ID]) include ([JobNumber]);
create index [<indexname>] on [OutboundEvents] (
    [company], [branch], [JobNumber], [Formtype]); 
```

不是您优化的查询，是您优化的数据模型。从阅读[设计索引](http://msdn.microsoft.com/en-us/library/ms190804%28v=sql.105%29.aspx)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:35:27.947

感谢大家的有益见解。我有很多东西要学 :) 我设法使用这个查询将执行时间从 1 分 7 秒缩短到不到 1 秒：

```
select count(*)
from job
where company = 'A'
and branch = 'Branch123'
and EngineerNumber = '000123'
AND id> 60473
AND JobNumber not in(
    select Jobnumber from outboundevents b
    where b.company = 'A'
    AND b.Branch = 'Branch123'  
    and b.Formtype = 'CompleteJob'
    and jobnumber in (
        select jobnumber from Job
        where company = 'A'
        and branch = 'Branch123'
        and engineerNumber = '000123'
        and ID > 60473)
) 
```

# android - 如何在android中打印特殊字符

> ID：12602598
> 
> 赞同：2
> 
> 时间：2012-09-26T13:14:43.867
> 
> 标签：android

这是我的网络服务响应..

> Testperson-se,已批准,Stårgatan 1,12345,Ankeborg,SE

现在在 Stårgatan 的这个字符串中，当我打印这个响应时，有一个带点的特殊字符 a，它给了我问号字符串，比如 ..

> Testperson-se,Approved,St?rgatan 1,12345,Ankeborg,SE

我使用以下代码。

```
try {
            URL url = new URL(
                    "http://www.ecodor.se/administrator/components/com_ivmstore/ivmwebservices/getaddress.php?pNumber=410321-9202"
                            );// 

            InputSource is = new InputSource(url.openStream());

            StringBuffer res = new StringBuffer();

            res.append(convertStreamToString(is.getByteStream()));

            line = res.toString();

            Log.i("==> responce", line);

            //

        } catch (Exception e) {

        }

public String convertStreamToString(InputStream is) throws IOException {
    /*
     * To convert the InputStream to String we use the
     * BufferedReader.readLine() method. We iterate until the BufferedReader
     * return null which means there's no more data to read. Each line will
     * appended to a StringBuilder and returned as String.
     */
    if (is != null) {
        StringBuilder sb = new StringBuilder();
        String line;

        try {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "UTF-8"));
            while ((line = reader.readLine()) != null) {
                sb.append(line).append("\n");
            }
        } finally {
            is.close();
        }
        return sb.toString();
    } else {
        return "";
    }
} 
```

如何打印这个特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:20:01.167

您可能想要使用[InputSource#getEncoding返回的编码](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/InputSource.html#getEncoding%28%29)

> 获取字节流或 URI 的字符编码。当应用程序提供字符流时，该值将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:45:49.730

我通过使用以下解决它。

```
BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "ISO-8859-1")); 
```

感谢所有给我想法的人。

# file - 检测文件是否正在黑莓中使用

> ID：12602600
> 
> 赞同：-1
> 
> 时间：2012-09-26T13:14:57.377
> 
> 标签：file, blackberry

我希望我可以检测文件是否正在黑莓中使用或在黑莓中打开。有人可以告诉我如何以编程方式执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:20:47.557

如果要确保文件可用于处理，请使用`try-catch`并尝试打开该文件。如果存在共享违规情况，您将转到该`catch`部分并可以处理这种情况。

# javascript - 复位 使用 Javascript

> ID：12602602
> 
> 赞同：3
> 
> 时间：2012-09-26T13:15:01.713
> 
> 标签：javascript, html

我正在尝试根据特定条件在页面上重新定位 div。

```
if (somecondition)
    document.getElementById("Div1").setAttribute("style", "position: absolute; left:297px; top:882px; height: 30px; width: 181px; margin-top: 0px;"); 
```

它不会在下面的 html 中重新定位 div：

```
<div id="Div1" style="top:366px; left:134px; position:absolute; height: 30px; width: 175px;"> 
```

if 中的其他代码触发。

任何人都可以帮忙吗？浏览器：IE8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T13:19:11.603

如果您希望更改反映在文档中，则使用 setAttribute 是不可靠的。改用 Element.style ：

```
var el = document.getElementById('Div1');
el.style.position = 'absolute';
el.style.left = '397px';
el.style.top = '882px';
el.style.height = '30px';
el.style.width = '181px';
el.style.marginTop = '0px'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T13:20:33.073

你只需要做

```
document.getElementById("Div1").style.<some css property> = <some value>; // like
document.getElementById("Div1").style.left = "297px";
document.getElementById("Div1").style.top = "882px"; 
```

（当然你应该缓存getELementById）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:22:15.750

要将 CSS 用作单个字符串，您应该设置`Element.style.cssText`属性：

```
var element = document.getElementById("Div1");
element.style.cssText = "position: absolute; left:297px; top:882px; height: 30px; " +
                        "width: 181px; margin-top: 0px;"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T13:26:00.460

它工作得很好，[在这里查看演示](http://jsfiddle.net/zainshaikh/2cgwq/)。

**HTML：**

```
<div id="Div1" style="top:366px; left:134px; position:absolute; height: 30px; width: 175px;">
    hello world
</div> 
```

​</p>

**Javascript：**

> document.getElementById("Div1").setAttribute("style", "position: absolute; left:297px; top:82px; height: 30px; width: 181px; margin-top: 0px;"); ​</p>

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T13:34:30.463

创建两个样式类并为类添加两个不同的位置。如果满足 javascript 条件，则更改 DIVs 类。例如：

```
if(someCondition) {
    document.getElementById('Div1').setAttribute('class', 'style2');
} else {
    document.getElementById('Div1').setAttribute('class', 'style1');
} 
```

CSS 样式

```
.style1 {
    top:366px;
    left:134px;
    position:absolute;
    height: 30px;
    width: 175px;
}

.style2 {
    position: absolute;
    left:297px;
    top:882px;
    height: 30px;
    width: 181px;
    margin-top: 0px; 
```

HTML

```
<div id="Div1" class="style1"></div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T13:19:23.520

试试看

```
document.getElementById("Div1").style.left = "297px";
document.getElementById("Div1").style.top = "882px"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T13:21:58.713

你不是把javascript代码放在document.ready(function(){});中吗？

# maven - "signer information does not match [...]" error within an Eclipse bundle

> ID：12602613
> 
> 赞同：1
> 
> 时间：2012-09-26T13:15:30.247
> 
> 标签：maven, eclipse-plugin, certificate, xtext, mwe

I got the security issue with a big Eclipse plugin Maven project, which uses Xtext, Xtend and fornax-oaw-m2-plugin (which fails). I extracted the used classpath, and searched in there if the incriminated class is present in at least two jars, but no. It is only present in one bundle. Could I grab more information into the stacktrace? I could provide many more information.. I google since two days and not found interesting clue so far. As the class in in an Eclipse bundle, i can't change it safely..

[INFO] Caused by: org.eclipse.emf.common.util.WrappedException: java.lang.SecurityException: class "org.eclipse.emf.ecore.impl.MinimalEObjectImpl$Container"'s signer information does not match signer information of other classes in the same package.

Here is the project's MANIFEST.MF :

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: com.mds.regseq
Bundle-Vendor: Magillem Design Services S.A.S.
Bundle-Version: 1.0.0.qualifier
Bundle-SymbolicName: com.mds.regseq; singleton:=true
Bundle-ActivationPolicy: lazy
Require-Bundle: org.eclipse.xtext;bundle-version="2.3.1";visibility:=reexport,
 org.apache.log4j;visibility:=reexport,
 org.apache.commons.logging;resolution:=optional;visibility:=reexport,
 org.eclipse.xtext.generator;resolution:=optional,
 org.eclipse.emf.codegen.ecore;resolution:=optional,
 org.eclipse.emf.mwe.utils;resolution:=optional,
 org.eclipse.emf.mwe2.launch;resolution:=optional,
 org.eclipse.xtext.util,
 org.eclipse.emf.common,
 org.antlr.runtime,
 org.eclipse.xtext.common.types,
 com.mds.spiritschema.xmlfactory,
 com.mds.mrv;visibility:=reexport,
 com.mds.regseq.mrv.binding;visibility:=reexport
Import-Package: org.apache.commons.logging,
 org.apache.log4j, org.eclipse.emf.ecore
Export-Package: com.mds.regseq,
 com.mds.regseq.formatting,
 com.mds.regseq.interpreter,
 com.mds.regseq.parseTreeConstruction,
 com.mds.regseq.parser.antlr,
 com.mds.regseq.parser.antlr.internal,
 com.mds.regseq.properties,
 com.mds.regseq.register_sequencing,
 com.mds.regseq.register_sequencing.impl,
 com.mds.regseq.register_sequencing.util,
 com.mds.regseq.scoping,
 com.mds.regseq.services,
 com.mds.regseq.type,
 com.mds.regseq.util,
 com.mds.regseq.validation
Bundle-RequiredExecutionEnvironment: JavaSE-1.6 
```

# java - how to set height & width of android rating bar?

> ID：12602616
> 
> 赞同：3
> 
> 时间：2012-09-26T13:15:38.470
> 
> 标签：java, android

i want to set height of rating bar to 23 dp & width to 110 dp .

here is image(url) of layout i require :

[![http://tinypic.com/r/33c52pw/6](../Images/2ba5b25a2e4fb6c0efc599eaf9fc6f57.png)](https://i.stack.imgur.com/hWoNv.png)

here is my xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="70dp"
    android:background="@color/white"
    android:padding="2dp"
    android:orientation="horizontal">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="55dp"
        android:layout_height="55dp"

        android:layout_margin="5dp" />

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:orientation="vertical"
        android:layout_weight="1"
        android:paddingTop="5dp">

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="waiter_one"
            android:textColor="@color/black"
            />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="dfddd"
           android:layout_marginTop="3dp" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ssss" />

    </LinearLayout>
    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:orientation="vertical">
    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:orientation="horizontal">

        <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1710 votes"
        android:layout_gravity="bottom" />

        <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/rateing_bg" />
 </LinearLayout>

  //Commented code of rating bar
  comment(start)
  <RatingBar
        android:id="@+id/ratingBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:numStars="5"
        android:maxWidth="110dp"
        android:maxHeight="23dp" />  comment(end)

 </LinearLayout>

</LinearLayout> 
```

code of rating bar is commented .If i remove comment then causing lot of problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:30:42.783

您必须使用 a`style`作为评分栏，例如：

```
<style name="foodRatingBarSmall" parent="@android:style/Widget.RatingBar.Small">
    <item name="android:progressDrawable">@drawable/food_ratingbar_small</item>
    <item name="android:minHeight">16dip</item>     
    <item name="android:maxHeight">16dip</item> 
</style> 
```

有关更多详细信息，[请检查此](http://kozyr.zydako.net/2010/05/23/pretty-ratingbar/)。

# extjs - 如何在 ExtJS 中为商店进行自定义排序？

> ID：12602627
> 
> 赞同：0
> 
> 时间：2012-09-26T13:16:04.100
> 
> 标签：extjs, extjs3

我目前有下面的代码覆盖所有商店的排序。我需要做的是为单个商店创建一个排序。我怎么做？

```
Ext.override(Ext.data.Store, {
    // override
    createSortFunction: function (field, direction) {
        direction = direction || "ASC";
        var directionModifier = direction.toUpperCase() == "DESC" ? -1 : 1;
        var sortType = this.fields.get(field).sortType;

        //create a comparison function. Takes 2 records, returns 1 if record 1 is greater,
        //-1 if record 2 is greater or 0 if they are equal
        return function (r1, r2) {

            var v1;
            var v2;

            if (field == 'Registered') {
                v1 = sortType(r1.data['AircraftNeedsRegistered']);
                v2 = sortType(r2.data['AircraftNeedsRegistered']);

                if (r1.data['AircraftNeedsRegistered'])
                    r1.data['Register'] = !r1.data['Register'];

                if (r2.data['AircraftNeedsRegistered'])
                    r2.data['Register'] = !r2.data['Register'];

                //store.getAt(rowIndex).data['Registered'] = true;
            }
            else {
                v1 = sortType(r1.data[field]);
                v2 = sortType(r2.data[field]);
            }

            // To perform case insensitive sort
            if (v1.toLowerCase) {
                v1 = v1.toLowerCase();
                v2 = v2.toLowerCase();
            }

            return directionModifier * (v1 > v2 ? 1 : (v1 < v2 ? -1 : 0));
        };
    } 
```

我想要实现的是这样的：

```
function AircraftStore() {
return new Ext.data.JsonStore(Ext.apply({
    url: AVRMS.ROOT_CONTEXT + "/ssl/json/general/GetAircraftByOwnerId.aspx",
    idProperty: 'OwnerOid',
    baseParams: { OwnerOid: 0 },
    fields: ['AircraftOid', 'NNumber', 'Make', 'Model', 'Seats', 'RegistrationType', 'Airworthy', 'IsFaaAirport', 'AirworthyString', 'IsFaaAirportString', 'Airport', 'AircraftNeedsRegistered', 'Register'],
    sort: function (field, direction) {
        return customSort(field, direction);
    }
}));
    };

function customSort(field,direction) {
    //What do I put here?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:06:34.770

我不确定我是否正确理解了您的代码的目的，但我相信使用以下代码可以达到相同的效果（抱歉，我没有测试过，但它应该可以工作）。

```
AircraftStore = Ext.extend(Ext.data.JsonStore, {
    url: AVRMS.ROOT_CONTEXT + "/ssl/json/general/GetAircraftByOwnerId.aspx",
    idProperty: 'OwnerOid',
    baseParams: { 
        OwnerOid: 0 
    },
    fields: ['AircraftOid', 'NNumber', 'Make', 'Model', 'Seats', 'RegistrationType', 'Airworthy', 'IsFaaAirport', 'AirworthyString', 'IsFaaAirportString', 'Airport', 'AircraftNeedsRegistered', 'Register'],
    sort: function (field, direction) {
        if (field == 'Registered') {
            field = 'AircraftNeedsRegistered';
            this.query('AircraftNeedsRegistered', true).each(function(record) {
                record.data['Register'] = !record.data['Register'];
            });         
        }
        return AircraftStore.superclass.sort.call(this, field, direction);
    }
}); 
```

如果由于我错过了某些东西而没有达到您想要的行为，您可以覆盖`createSortFunction`而不是`sort`. 但是，由于`createSortFunction`应该是私有的，因此最好通过覆盖来处理自定义逻辑`sort`。无论如何，如果您更喜欢使用第一种方法，您的 AircraftStore 应该如下所示：

```
AircraftStore = Ext.extend(Ext.data.JsonStore, {
    url: AVRMS.ROOT_CONTEXT + "/ssl/json/general/GetAircraftByOwnerId.aspx",
    idProperty: 'OwnerOid',
    baseParams: { 
        OwnerOid: 0 
    },
    fields: ['AircraftOid', 'NNumber', 'Make', 'Model', 'Seats', 'RegistrationType', 'Airworthy', 'IsFaaAirport', 'AirworthyString', 'IsFaaAirportString', 'Airport', 'AircraftNeedsRegistered', 'Register'],
    createSortFunction: function (field, direction) {
        // copy your createSortFunction here
    };
}); 
```

# java - 使用数据存储在 Java GAE 中存储关系的最佳实践

> ID：12602638
> 
> 赞同：0
> 
> 时间：2012-09-26T13:16:42.707
> 
> 标签：java, google-cloud-datastore

我想知道在 GAE 中使用数据存储存储关系的最佳实践是什么。

如果我有用户和用户项。我应该如何在 UserItem 中存储对 User 的引用？

我应该存储：

*   散列键值（例如：*ag1taWNlM2hlZGdlaG9ncg8LEglMZXZlbFVzZXIYSAw*）
*   未散列的键值（例如：*User("1")*）
*   还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:37:46.053

在 java 中，您将使用[Key](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Key)属性来存储对另一个数据存储对象的引用。

# jquery - jQuery - 之后调用函数

> ID：12602639
> 
> 赞同：0
> 
> 时间：2012-09-26T13:16:44.373
> 
> 标签：jquery

我现在遇到了一个问题，这让我有些头疼。

使用 .ajax / php 我将选项列表拉回到我创建的 div 中。

基本上，用户使用第一个下拉框并选择一辆车，使第二个下拉框与 .ajax 查询模型一起出现。

当有人然后选择他们的汽车型号时，我希望它提醒用户他们选择了哪种型号。

我遇到了麻烦，因为在注入之前我已经调用了警报函数。

希望这是有道理的，这是我当前的代码：

```
<script type="text/javascript">

$(document).ready(function(){
  $('.model_id').change(function() {
        $.ajax({
            type:'POST',
            url: 'http://mydomain.net/getmodel.php',
            data: { make_id: $('.model_id').val() },
            datatype: "html",
            success:function(data){
                $('.result').html(data);
            }
        });
    });
  });

$(success).load(function(){
  $('.result').change(function() {
        alert('s');
    });
  });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:21:12.557

为什么不做类似的事情：

```
<script type="text/javascript">

var old_data = '';

$(document).ready(function(){
  $('.model_id').change(function() {
        $.ajax({
            type:'POST',
            url: 'http://mydomain.net/getmodel.php',
            data: { make_id: $('.model_id').val() },
            datatype: "html",
            success:function(data){
                if ( old_data != data )
                    alert(data);

                old_data = data;
                $('.result').html(data);
            }
        });
    });
  });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:29:24.213

改变

```
 $(success).load(function(){
  $('.result').change(function() {
        alert('s');
    });
  }); 
```

到

```
$('.result').change(function() {
        alert('s');
    }); 
```

（即删除 $(success) 部分）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:31:26.700

用于`live`此类操作：

```
$('.result').live('change',function() {
    alert('s');
}); 
```

# jquery - jQuery Countdown plugin restart

> ID：12602641
> 
> 赞同：3
> 
> 时间：2012-09-26T13:16:49.187
> 
> 标签：jquery, plugins, timer, countdown

I'm using the jQuery Countdown plugin ([http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)), but I can't seem to reset the timer.

When a button is clicked the folowing function starts the countdown:

```
function startResetCounter() {
    $('.reset_counter div').countdown({ 
        until: '+3m +0s',
        compact: true,
        format: 'MS',
        onExpiry: resetPage
    });
} 
```

But when I reclick the button it won't reset the timer.

Anyone who can help me out?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T15:30:51.450

**在startResetCounter**函数的顶部添加以下行：

```
$('.reset_counter div').countdown('destroy'); //remove countdown if it was already used 
```

所以最后你会得到：

```
function startResetCounter() {
    $('.reset_counter div').countdown('destroy');

    $('.reset_counter div').countdown({ 
       until: '+3m +0s',
       compact: true,
       format: 'MS',
       onExpiry: resetPage
    });
} 
```

# ssis - SSIS BCP & Flat File - Is there a limit to how many records can be in the file?

> ID：12602645
> 
> 赞同：0
> 
> 时间：2012-09-26T13:17:00.090
> 
> 标签：ssis

The file I am working with has about 207 million rows. In SSIS it keeps failing.

> The column is too long in the data file for row 1, column 2\. Verify that the field terminator and row terminator are specified correctly.

Now when I copy a chunk of rows and place into another txt and import I don't get the error.

I can get the rows into sql if I don't use Bulk Insert and use a regular data flow task.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:38:55.637

您可以做的另一件事是确保在 oledb 目标上关闭批量插入。在极少数情况下，我会得到打开时不插入的记录。

事实上，如果有人知道为什么会这样，我很想知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:01:16.310

您应该检查两件事：

1.  列的列长度定义`2`。它可能设置为类似的东西，`100`并且您尝试导入具有比该长度更高的列的行。

2.  检查是否有可能出现在数据内部的列分隔符。想象你得到一个带有`;`分隔符的文件，当你得到一个包含分号的值时，平面文件会遇到问题。

该文件很长，但我认为它与它无关，因为错误会是别的东西。

# api - 创建 SalesForce 用户 LICENSE_LIMIT_EXCEEDED 时出错：超出许可限制

> ID：12602648
> 
> 赞同：4
> 
> 时间：2012-09-26T13:17:07.017
> 
> 标签：api, soap, salesforce

我想通过使用 SOAP API 以编程方式一次性创建 5-6 个 SalesForce 用户。我正在使用合作伙伴 API，并且我有一个开发人员版沙箱。我正在从数据库表中检索用户信息，然后使用 API 我想一次创建这 5-6 个用户。我可以创建一个用户，但是在创建另一个用户之后它会抛出错误`LICENSE_LIMIT_EXCEEDED:License Limit Exceeded`。

这是我的代码的快照，它从数据库中检索用户信息，然后以编程方式创建用户：

```
SObject user = new SObject();

user.setType("User");

while (rs.next()) {
    user.setField("Alias", rs.getString("Alias"));
    user.setField("Email", rs.getString("Email"));
    user.setField("EmailEncodingKey", rs.getString("EmailEncodingKey"));
    user.setField("LanguageLocaleKey", "En_US");
    user.setField("LastName", rs.getString("LastName"));
    user.setField("LocaleSidKey", rs.getString("LocaleSidKey"));
    user.setField("TimeZoneSidKey", "America/Los_Angeles");
    user.setField("Username", rs.getString("Username"));
    user.setField("UserPermissionsCallCenterAutoLogin", "false");
    user.setField("UserPermissionsMarketingUser", "false");
    user.setField("UserPermissionsOfflineUser", "false");
    user.setField("ProfileId", connection.getUserInfo().getProfileId());

    SaveResult[] results = connection.create(new SObject[] { user });
    System.out.println("Created user: " + results[0].getId());

    if (results[0].isSuccess())
        out.println("Created user: " + results[0].getId());
    else
        out.println("Error: " + results[0].getErrors()[0].getStatusCode() + 
                           ":" + results[0].getErrors()[0].getMessage());

}

QueryResult queryResults = connection
        .query("SELECT Id, Name from User "
                + "ORDER BY CreatedDate DESC LIMIT 5");

if (queryResults.getSize() > 0) {
    for (SObject s : queryResults.getRecords()) {
        out.println("Id: " + s.getField("Id") + " - Name: "
                + s.getField("Name"));
    }
} 
```

在这里我可以创建一个用户，但是在创建一个用户之后它会抛出错误`LICENSE_LIMIT_EXCEEDED:License Limit Exceeded`。

这些是可用的许可证数量：![在此处输入图像描述](../Images/e7280f381c6429b6a9c23d8da42d74a7.png)

我可以看到 SalesForce 的剩余许可证为 0。但是，我只想创建一些不一定是 SalesForce 用户的用户。它可以是应该能够登录到我的组织的任何类型的用户。当我尝试创建一些不同类型的用户时，例如拥有 5000 个许可证的“Chatter Free”，`user.setField("UserType", "CsnOnly")`它会给出错误`INVALID_FIELD_FOR_INSERT_UPDATE:Unable to create/update fields: UserType`

这些是我的销售团队中的用户： ![在此处输入图像描述](../Images/86f1f4b900af656efd8855fbc1b0cc9d.png)

如何解决这个问题呢？我只想从数据库中创建一些用户，然后可以登录到 SalesForce。他们不必是管理员。他们可以拥有最低权限，但他们应该能够登录到 SalesForce。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:27:13.613

在开发人员组织中，您将不能拥有超过两个具有 Salesforce 许可证的活动用户。为了创建具有 Chatter Free 许可证的用户，您只需为他们分配个人资料`Chatter Free User`- 它会根据分配给他们的个人资料自动正确设置他们的许可证（该`UserType`字段不可编辑）。

编辑：要在不对其进行硬编码的情况下获取 Chatter Free 用户的个人资料 ID（因为它可能会从 org 更改为 org），您必须对其进行查询。我修改了您的代码以包含此查询，并对其进行了重新设计，以便只进行一次标注`PartnerConnection.create`（只是一个建议，因为它将节省您的 SOAP 标注的开销）：

```
QueryResult profileQuery = connection.query("select Id from Profile where Name = 'Chatter Free User' limit 1");
SObject chatterFreeProfile;
if ( profileQuery.getSize() > 0 ) {
    chatterFreeProfile = profileQuery.getRecords()[0];
}

ArrayList<SObject> users = new ArrayList<SObject>();
while (rs.next()) {
    SObject user = new SObject();
    user.setType("User");
    user.setField("Alias", rs.getString("Alias"));
    user.setField("Email", rs.getString("Email"));
    user.setField("EmailEncodingKey", rs.getString("EmailEncodingKey"));
    user.setField("LanguageLocaleKey", "En_US");
    user.setField("LastName", rs.getString("LastName"));
    user.setField("LocaleSidKey", rs.getString("LocaleSidKey"));
    user.setField("TimeZoneSidKey", "America/Los_Angeles");
    user.setField("Username", rs.getString("Username"));
    user.setField("UserPermissionsCallCenterAutoLogin", "false");
    user.setField("UserPermissionsMarketingUser", "false");
    user.setField("UserPermissionsOfflineUser", "false");
    if ( chatterFreeProfile != null )
        user.setField("ProfileId", chatterFreeProfile.getField("Id"));
    else
        user.setField("ProfileId", connection.getUserInfo().getProfileId());
    users.add(user);
}

if ( users.size() > 0 ) {
    SaveResult[] results = connection.create(users.toArray(new SObject[users.size()]));
    for ( int i = 0; i < saveResults.length; i++ ) {
        if (results[i].isSuccess())
            out.println("Created user: " + results[i].getId());
        else
            out.println("Error: " + results[i].getErrors()[0].getStatusCode() + ":" + results[i].getErrors()[0].getMessage());
    }
}

QueryResult queryResults = connection.query("SELECT Id, Name from User ORDER BY CreatedDate DESC LIMIT 5");
if ( queryResults.getSize() > 0 ) {
    for ( SObject s : queryResults.getRecords() ) {
        out.println("Id: " + s.getField("Id") + " - Name: " + s.getField("Name"));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:33:33.407

您需要设置`ProfileId`为与可用许可证类型关联的简档，在您的情况下设置为 Chatter Free、Salesforce 平台上的简档或您的其他可用许可证类型之一。每个配置文件都与特定的 UserLicense 记录相关联，例如：

*   “SFDC”：完整的 Salesforce 许可证
*   “CSN_User”：Chatter 免费许可证
*   “AUL”：Salesforce 平台许可证

（要查看更多信息，请对`UserLicense`对象执行 Query All）。

因此，您需要查询`Profile`可用许可证类型的记录，然后将其关联到您的新用户，例如

```
QueryResult profileQuery = connection.query(
    "SELECT Id FROM Profile "
    + "WHERE UserLicense.Name = 'Chatter Free' LIMIT 1"
);
SObject chatterFreeProfile;
if ( profileQuery.getSize() > 0 ) {
    chatterFreeProfile = profileQuery.getRecords()[0];
    user.setField("ProfileId", chatterFreeProfile.getField("Id"));
} 
```

# r - 如何计算R中文本中的句子数？

> ID：12602652
> 
> 赞同：7
> 
> 时间：2012-09-26T08:51:12.603
> 
> 标签：r, text-mining

`readChar()`我使用该函数将文本读入 R。我的目的是检验文本句子中出现字母“a”的次数与出现字母“b”的次数一样多的假设。我最近发现了这个`{stringr}`包，它帮助我对我的文本做很多有用的事情，例如计算字符数和整个文本中每个字母的出现总数。现在，我需要知道整个文本中的句子数量。R有什么功能可以帮助我做到这一点吗？非常感谢你！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T15:37:59.243

谢谢@gui11aume 的回答。我刚刚发现的一个非常好的包可以帮助完成这项工作`{openNLP}`。这是执行此操作的代码：

```
install.packages("openNLP") ## Installs the required natural language processing (NLP) package
install.packages("openNLPmodels.en") ## Installs the model files for the English language
library(openNLP) ## Loads the package for use in the task
library(openNLPmodels.en) ## Loads the model files for the English language

text = "Dr. Brown and Mrs. Theresa will be away from a very long time!!! I can't wait to see them again." ## This sentence has unusual punctuation as suggested by @gui11aume

x = sentDetect(text, language = "en") ## sentDetect() is the function to use. It detects and seperates sentences in a text. The first argument is the string vector (or text) and the second argument is the language.
x ## Displays the different sentences in the string vector (or text).

[1] "Dr. Brown and Mrs. Theresa will be away from a very long time!!! "
[2] "I can't wait to see them again."

length(x) ## Displays the number of sentences in the string vector (or text).

[1] 2 
```

该`{openNLP}`包非常适合 R 中的自然语言处理，您可以在此处找到一个很好的简短介绍，或者您可以[在](https://docs.google.com/viewer?a=v&q=cache%3ac3QktuUpX3oJ%3acran.r-project.org/web/packages/openNLP/openNLP.pdf%20&hl=fr&gl=us&pid=bl&srcid=ADGEEShYHnZ2a0hvH_Gli-5OO7V_3-xAmPe2IEM_sSrZheAIACd-123jau2Eql4KW5Fuc6jyuPxq64KSnofr9ara8bnzRkGj6O-Upu2nzlcktuTtI6N4tnnQ09ZHrQf2GUThICf9P4Af&sig=AHIEtbSSjE27yDgWRsrm-cLTndWLgKH6dA)[此处](https://docs.google.com/viewer?a=v&q=cache:8-Jur-gt8YAJ%3acran.r-project.org/web/packages/openNLP/vignettes/openNLP.pdf%20&hl=fr&gl=us&pid=bl&srcid=ADGEEShvBkPPtxSrvvMx7HDpGyj_H7y70aUg8BshK5XqMZ6ZGqttMdwfJ9rbWBU-4XDx_1JnhezTbkkhQ8EguEsK1D5dm3f3v9SfJlEJAezW4zVbh6kHAMfFyKQ7zqvH_l4pYrR3ypQC&sig=AHIEtbTsZrcI1ahhYG1arZ6GNLTuXd5aKA)查看该包的文档。

包中还支持另外三种语言。您只需要安装并加载相应的模型文件。

1.  `{openNLPmodels.es}`西班牙语
2.  `{openNLPmodels.ge}`德语
3.  `{openNLPmodels.th}`泰语

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T09:16:40.040

您正在寻找的是句子标记化，它并不像看起来那么简单，即使在英语中也是如此（像“我遇到了 Bennett 博士，约翰逊夫人的前夫。”这样的句子可以包含句号）。

R 绝对*不是*自然语言处理的最佳选择。如果你精通[Python](http://www.python.org)，我建议你看看[nltk](http://nltk.org/)模块，它涵盖了这个和许多其他主题。您还可以复制[此博客文章](http://blog.thegrandlocus.com/2012/06/The-elements-of-style)中的代码，该代码进行句子标记化和单词标记化。

如果您想坚持使用 R，我建议您计算句末字符（`.`, `?`, `!`），因为您可以计算字符。使用正则表达式的方法如下：

```
text <- 'Hello world!! Here are two sentences for you...'
length(gregexpr('[[:alnum:] ][.!?]', text)[[1]]) 
```

# java - 如何使用 Uri.parse 解析字符串

> ID：12602654
> 
> 赞同：0
> 
> 时间：2012-09-26T13:17:21.777
> 
> 标签：java, android, uri

我在获取字符串并使用`Uri.parse()`方法解析它时遇到问题。

我尝试了以下代码：

```
EditText edit = (EditText) findViewById(R.id.enter);
String telephone = edit.getText().toString();
Uri number = Uri.parse(telephone); 
```

但应用力关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:19:06.123

您必须将“ `tel:`”前缀添加到您的手机号码。

# javascript - Removing DIV Element before adding it

> ID：12602655
> 
> 赞同：1
> 
> 时间：2012-09-26T13:17:29.327
> 
> 标签：javascript, jquery, html

I want to display an transparent DIV that contains some route information. This DIV should get displayed whenever the user clicks a "show route button". The DIV is adding just fine, butwhen the user clicks this button again (on another marker) another DIV shows up.

This is my code so far which works, up untill the removal. I feel it has something to do with a) the selector not matching, but when I inspect the DOM in Firebug, there clearly is a DIV with that id

```
function displayRouteInfo(duration, distance){
    removeInfoWindow(function(){
        // TODO: remove overlay again
        routeInfoWindow = jQuery('<div id="routeInfoWindow" style="color:white;"> <p><span style="margin:10px;"> Routeinformation <span style="margin:10px;"> Dauer: '
                    +duration+'<span style="margin:10px;"> Entfernung: '+distance+'</p> </span></div>');
        routeInfoWindow.appendTo(document.body);
        }
    );
}

function removeInfoWindow(callback){
    $('routeInfoWindow').remove();
    callback.call();
} 
```

Thanks for any input and advice to solve this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:19:09.467

您的选择器不正确，您错过了`#`for ID 选择器。

```
$('#routeInfoWindow').remove(); 
```

# c++ - istream_iterator cin initialization waits for input

> ID：12602657
> 
> 赞同：4
> 
> 时间：2012-09-26T13:17:36.223
> 
> 标签：c++, istream-iterator

I've got this code snippet. The istream_iterator object is only defined and not used, so I expect that it won't do anything and application finish immediately. But when I run application, it will not finish before I provide some input. Why?

I'm compiling it on ArchLinux with: gcc 4.7.1, with command: g++ -std=c++11 filename.cpp

```
#include <iterator>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    istream_iterator<char> input(cin);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:23:29.533

按照标准，

> ### 24.6.1.1 istream_iterator 构造函数和析构函数 [istream.iterator.cons]
> 
> ```
> istream_iterator(istream_type& s); 
> ```
> 
> 3 *-**效果*：用. *value*可以在构造期间或第一次被引用时初始化。*`&s`*

 **所以不确定这个程序是否会等待输入。

但是，很难看出如何`istream_iterator`以其他方式实现；根据 24.6.1:1，*在构造之后 [...] 迭代器读取并存储 的值`T`*，因此如果在构造时没有读取，那么它需要`operator *() const`在 free 上和上发生`operator==(const istream_iterator<T> &, const istream_iterator<T> &)`，所以所有迭代器的内部状态必须是`mutable`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T13:19:47.113

据推测，istream 迭代器将立即调用`cin >> x`以提取第一个标记并确定它是否应该与结束迭代器相等。提取操作会一直阻塞，直到流关闭、提取令牌或遇到解析失败。

请注意，您的问题标题是错误的：您不仅*声明* `input`了，而且还*定义*了它。如果您的代码要准确反映问题，它会说

```
extern istream_iterator<char> input;  // declaration only! 
```

并且不会有阻塞。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:22:12.633

从流中，您只能“获取”每个值一次，之后它就消失了。然而，迭代器的一个常见需求是多次访问一个值而不增加迭代器。因此，`istream_iterator`将在构造时提取第一个值并将其复制到一个内部值中，然后在取消引用迭代器时返回该值。这也允许迭代器确定它是否在输入的末尾并成为结束迭代器。在递增时，然后读取下一个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-22T11:32:11.030

尝试这个：

```
#include <iostream>
#include <iterator>

using namespace std;

int main()
{
    istream_iterator<int> start(cin);
    istream_iterator<int> itend;

    while( start != itend ) {
        cout << *start << endl;
        start++;
        //Press Enter followed by Control-D on linux to exit the loop
    }

    cout<<"Control-D Pressed "<<endl;
    return 0;
} 
```**

# php - set a php variable only in the iframe

> ID：12602658
> 
> 赞同：0
> 
> 时间：2012-09-26T13:17:46.817
> 
> 标签：php, javascript, jquery, iframe

so i have a code like this:

```
if ($var == null || 'NULL'){
echo "<h1>something</h1>";
echo "<div id='footer'><b>something</b><br/><br/><br/></div>";
echo "<b>something</b>";}
    else {} 
```

so, on my main page the value `var == null` and that's great because i want those linse to be displayed in that page, but if i have an iframe somewhere else and i want to set this variable to 1 like `$var = 1` so it doesn't show in the iframe but instead will show on the main page because there the value is null, how can i do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:23:52.193

您无法在服务器端检测到 iframe，但您可以`iframe`在页面上嵌入 iframe 时向脚本传递一个附加参数：

```
<iframe src="script.php?iframe=1"></iframe> 
```

然后检查 的值`$_GET['iframe']`。

# xamarin.ios - AllowsMultipleSelectionDuringEditing not supported by Monotouch.Dialog?

> ID：12602662
> 
> 赞同：2
> 
> 时间：2012-09-26T13:17:59.167
> 
> 标签：xamarin.ios, monotouch.dialog

i wan't to use UITableView.AllowsMultipleSelectionDuringEditing with Monotouch.Dialog. If the property is set to true, the click on the table (with edit mode enabled) seems to be ignored (no selection happens). If there is an Element.Tapped, it will be executed. In my current implementation it will push a new UIView to the NavigationController, but this is not what you expect in *edit-mode*.

You can reproduce the behaviour with the monotouch.dialog-sample project, just change the EditingDialog Constructor (DemoEditing.cs:57) to the following:

```
 public EditingDialog (RootElement root, bool pushing) : base (root, pushing)
    {
      TableView.AllowsMultipleSelectionDuringEditing = true;
    } 
```

Is there a way to use AllowsMultipleSelectionDuringEditing? If yes, what's wrong with my approach?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T07:47:23.980

我自己的代码也遇到了同样的问题。问题是某些 MonoTouch.Dialog 元素的单元格 SelectionStyle 设置为 UITableViewCellSelectionStyle.None。

我通过子类 Source 或 SizingSource 解决了它：

```
public class MyTableViewSource : Source
{
    public MyTableViewSource(DialogViewController container) : base(container)
    {
    }

    public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
    {
        var cell = base.GetCell(tableView, indexPath);
        cell.SelectionStyle = UITableViewCellSelectionStyle.Gray; // something other than None
        return cell;
    }
} 
```

然后在您的 DialogViewController 中：

```
public class MyDialogController : DialogViewController
{
    public override void ViewDidLoad()
    {
        base.ViewDidLoad();

        // setup root element
        Root = new RootElement();

        // . . .

        TableView.Source = new MyTableViewSource(this);
        TableView.AllowsMultipleSelectionDuringEditing = true;
    }
} 
```

# firefox - 如何对 Firefox 插件进行故障排除：无法安装，因为它与 Firefox 不兼容

> ID：12602665
> 
> 赞同：2
> 
> 时间：2012-09-26T13:18:02.353
> 
> 标签：firefox, firefox-addon

我基于现有扩展创建了一个简单的扩展，但是当我尝试对其进行测试并手动添加到 Firefox 时，我收到了以下一般错误消息：

```
<Extension Name> could not be installed because it is not compatible with Firefox <x.x.x.x> 
```

我该如何解决这个问题？

我什至尝试在 install.rdf 中将 maxVersion 设置为较高的值。

```
 <em:maxVersion>150</em:maxVersion> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T23:37:05.097

如果您已验证您拥有正确的 minVersion 和 maxVersion，则可能导致此问题的另一件事是无效的 updateURL。

关于这个的 Firefox 错误是[https://bugzilla.mozilla.org/show_bug.cgi?id=740378](https://bugzilla.mozilla.org/show_bug.cgi?id=740378)

如果您计划在 addons.mozilla.org 上托管您的附加组件，则不需要 updateURL，如果您正在开发附加组件，则 install.rdf 中根本不应该有 updateURL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:53:22.273

如果`minVersion`和`maxVersion`是正确的，但您的扩展仍然没有安装，那么这些值可能会被覆盖。除了`install.rdf`Firefox 中的值之外，还将查找扩展的更新 URL 并从那里获取更新的兼容性信息。此信息优先于您在 中指定的任何内容`install.rdf`。

如果您明确指定，`updateURL`那么您应该更新它指向的文件中的信息并清除浏览器缓存。如果你没有指定`updateURL`then 默认情况下它指向[addons.mozilla.org](https://addons.mozilla.org/)。如果在 addons.mozilla.org 上找到具有相同 ID 和版本号的扩展程序，则其兼容性信息将被接管。如果是这种情况，那么将版本号更改`install.rdf`为 addons.mozilla.org 未知的内容就足够了（显然，您还应该更改 addons.mozilla.org 上托管的扩展程序的扩展程序 ID 不是您的）。

另外，当然还有 Mike Kaply 提到的错误 - 如果指定了 insecure`updateURL`并且没有指定错误消息，则会出现错误消息`updateKey`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:26:26.930

您的最高版本应如下所示：

```
<em:maxVersion>17.*</em:maxVersion> 
```

这表示支持扩展的 Firefox 的最高版本。Firefox 150 离我们还有很长的路要走！;-)

您是否在任何地方发布了源代码？我很乐意看看。我现在已经编写了几个 Firefox 扩展，所以我相信我可以提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-11T09:41:43.070

首先，检查[https://support.mozilla.org/en-US/kb/unable-install-add-ons-extensions-or-themes](https://support.mozilla.org/en-US/kb/unable-install-add-ons-extensions-or-themes)看看这些原因是否适用。

随着 Firefox 57（2017 年 11 月 14 日）的发布，开发人员不能再在本地构建“遗留”附加组件 .xpi 文件并在 Firefox 中加载它们，[只有使用 webextensions API 构建的附加组件才能加载](https://blog.mozilla.org/addons/2017/02/16/the-road-to-firefox-57-compatibility-milestones/)。

希望这可以帮助 ：）

# apache-flex - Flex：使用“getItemAt()”访问 SQLite 条目

> ID：12602666
> 
> 赞同：0
> 
> 时间：2012-09-26T13:18:19.653
> 
> 标签：apache-flex, sqlite

`SQLite`我有一个填充了来自数据库的输入的数组。当我将此数组用作 as:list 的数据提供者时，它将显示我指定的数组中的所有对象。
我想访问数组中的一些对象，并且一直在尝试使用`getItemAt()`. 目前我可以返回数组中的第一个对象，但是更改索引（`getItemAt(1)`例如），它什么也不返回。

最终，我的目标是使用在应用程序其他地方输入并插入`SQLite`数据库的数据填充 FX:Model。然后，该模型充当饼图的数据提供者。我可以将数据库的第一个条目传递给模型/饼图，但不能访问其他条目。

一些相关的代码部分如下。故障排除提示将不胜感激。

```
[Bindable]
    private var GHGsource:ArrayCollection; 
```

进而：

```
 GHGsource = new ArrayCollection();
        }
        for each ( var o:Object in event.data )
        {
            GHGsource.addItem(o);
        }
        FullList.dataProvider = GHGsource;
    }
} 
```

模型设置：

```
<fx:Declarations>
    <fx:Model id="GHG" >
<data>
<row>
<input>Enteric methane</input>
<Value> {GHGsource.getItemAt(0).answer}  </Value> 
```

列表设置：

```
<s:List id="FullList">
  <s:itemRenderer>
    <fx:Component>
      <s:IconItemRenderer labelFunction="returnQuestion" messageFunction="returnAnswer">
        <fx:Script>
          <![CDATA[                             
            private function returnQuestion(item:Object):String
            {
                return "Question: " + item.question;
            }
            private function returnAnswer(item:Object):String
            {
                var response:String = "";
                if ( !item.answer || item.answer == "" )
                {
                    response = "(no response)";
                } else {
                    response = item.answer;
                }
                return response;
            }
          ]]>
        </fx:Script>
      </s:IconItemRenderer>
    </fx:Component>
  </s:itemRenderer>
</s:List> 
```

此应用程序基于[Daniel Koestler 的调查猿应用程序](http://blogs.adobe.com/koestler/2010/11/open-source-flex-hero-app-surveyape.html)中列出的数据库结构。

也许深入了解 s:List 组件如何访问数组中的对象会有所帮助？

附加细节：

在调试模式下运行，似乎对象没有正确绑定到 arraycollection。警告：无法绑定到类“对象”上的属性“xxx”（类不是 IEventDispatcher）

我试图按照以下链接上的指南进行操作，但没有成功。
[链接1 链接](http://sunilanair.wordpress.com/2009/07/21/warning-unable-to-bind-to-property-asset-on-class-object/) [2](https://stackoverflow.com/questions/8252862/sending-arraycollections-via-p2p-flex)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:35:19.167

好的，我知道了。

```
 GHGsource = new ArrayCollection();
    }
    for each ( var o:Object in event.data )
    {
        GHGsource.addItem(o);
    }
    FullList.dataProvider = GHGsource;
 }
} 
```

变成：

```
[Bindable]
private var passingArray:Array; 
```

和：

```
 GHGsource = new ArrayCollection();
   passingArray = new Array();

    }
    for each ( var o:Object in event.data )
    {
        GHGsource.addItem(o);
        passingArray[o] = new ObjectProxy(event.data[o]);
    }
    // not needed as the list is no longer needed - FullList.dataProvider = GHGsource;
}
} 
```

然后这个工作：

```
<fx:Declarations>
<fx:Model id="GHG" >
<data>
<row>
<input>Enteric methane</input>
<Value> {GHGsource.getItemAt(3).answer}  </Value> 
```

# javascript - can prototype functions access local variables?

> ID：12602667
> 
> 赞同：0
> 
> 时间：2012-09-26T13:18:27.923
> 
> 标签：javascript, prototype

I thought that functions created using .prototype were supposed to be able to access local variables. Here is what I'm talking about:

```
function obj() {
    var a = "String";

    this.innerPrint = function() {
        document.write("<p>" + a + "</p>");
    };
}

obj.prototype.outerPrint = function() {
    document.write("<p>" + a + "</p>");
};

var inst = new obj();
inst.innerPrint();
inst.outerPrint(); 
```

What I thought would happen is that both of these functions would do the same thing. But what actually happened is outerPrint doesn't have access to the variable a. Could someone explain to me how you get locals in a prototype function.

Here is a fiddle running this code: [http://jsfiddle.net/Wryte/mxXzg/](http://jsfiddle.net/Wryte/mxXzg/)

By the way, I want to use prototype functions because then each instantiation of the object doesn't have a copy of the function but they each point to the same one.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:20:05.130

如果您希望`a`在构造函数完成执行后仍然可以访问您的变量，请将您的代码更改为

```
function obj() {
    this.a = "String";

    this.innerPrint = function() {
        document.write("<p>" + this.a + "</p>");
    };
}

obj.prototype.outerPrint = function() {
    document.write("<p>" + this.a + "</p>");
}; 
```

或者如果您不想提供直接写访问权限，请定义一个 getter：

```
function obj() {
    var a = "String";
    this.getA = function() {
        return a;
    }
    this.innerPrint = function() {
        document.write("<p>" + a + "</p>");
    };
}

obj.prototype.outerPrint = function() {
    document.write("<p>" + this.getA() + "</p>");
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:22:55.173

当您声明“a”时，它是在 obj() 函数的词法范围内声明的。所有实例变量也需要原型化，因此它的 insted`var a`应该声明为`this.a`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:25:51.743

当然不是，您不能从*定义在第一个函数之外的*另一个函数访问一个函数的本地变量。第二个是否在第一个的原型属性中定义并不重要。函数的每次调用都会`obj`定义一个*新*的局部`a`变量，因此您无法避免需要访问它的函数的单独副本。

我假设您实际上要求该变量是本地而不是实例属性，因此一种可能的方法是在您的函数周围只使用一个薄的本地包装器：

```
function obj() {
    var a = "String";

    this.wrapper = function() { outerPrint.call(this, a); }
    this.innerPrint = function() {
        document.write("<p>" + a + "</p>");
    };
}

function outerPrint(a) {
    document.write("<p>" + a + "</p>");
}; 
```

同样，我假设你有一个更复杂的函数来代替`outerPrint`，所以这样你可以避免重复一个大函数，而代价是重复一个最小的包装器。通过这种方式，您可以保留`a`变量的私有性，而公共 getter 将允许外部代码检查其值。

**更新：**在@Bergi 的评论中，我修改了代码以在定义构造`outerPrint`函数的同一范围内创建一个本地函数。`obj`不再在原型上，它不会被`obj`实例直接调用。请注意，所有代码都需要在函数范围内，以避免全局`outerPrint`函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:27:23.190

不，它是一个*局部*变量。由于名为 的属性，不会绕过范围规则`prototype`。

该变量只能从构造函数中定义的函数访问；因此，他们被称为*特权*。当然，当这些可以作为公共方法访问时，您可以从外部调用它们，即。

```
Obj.prototype.outerPrint = function() {
    this.innerPrint();
}; 
```

# c - 我可以获得指向当前函数的指针吗？

> ID：12602671
> 
> 赞同：4
> 
> 时间：2012-09-26T13:18:39.220
> 
> 标签：c, function, pointers, logging

是否可以获得指向当前函数的指针？如果是，我该怎么做？

动机：我有一个函数做一些日志记录，并想调用

```
log(currentfunc, "blabla") 
```

例如，它做了一些输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:21:34.347

`__func__`您可以通过作为 C99 一部分的预定义标识符获取当前函数的名称（但不是指向它的指针） 。

```
log(__func__, "blabla"); 
```

[这是参考](http://publib.boulder.ibm.com/infocenter/zvm/v5r4/index.jsp?topic=/com.ibm.zos.r9.cbclx01/predefined_identifiers.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:21:36.380

我不确定指向函数的指针，但预定义的标识符`__func__`返回函数的名称。也许这可以帮助...

实际上，我会用`log`宏替换您的函数，这样您就不必每次都粘贴名称，如下所示：

```
#define log(x) log(__func__,x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:23:17.453

您可以使用**__ *FILE* __**和**__ *LINE* __**的组合。它将与[Microsoft](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)和[GCC](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)编译器一起使用。

# javascript - 在 javascript 块中写入 asp.net 标记

> ID：12602675
> 
> 赞同：0
> 
> 时间：2012-09-26T13:18:40.997
> 
> 标签：javascript, asp.net-mvc

这是我的代码：

```
$(document).ready(function () {
var url = '<%: Url.Content("~/") %>' + "Home/Gallery";
$.getJSON(url, function (newProduct) {
    var contentNewProduct = $("ul.ei-slider-large");
    var smallNewProduct = $("ul.ei-slider-thumbs");
    $.each(newProduct.ja, function (index, data) {
        contentNewProduct.append('<li><img src="' + '<%:Web.HelperClasses.HelperClass.CheckImageUrlExist("' + data.PictureName10 + '")%>' + '" alt="image" /><div class="ei-title"><span class="productName">' + data.Name + '</span><span class="productPrice">' + data.Price + '</span><span class="productSpec"><br /><br />"' + '<%:Web.HelperClasses.HelperClass.TrimString(' + data.Notes + ',2)%>' + '"</span><span><a href="#" class="readmore">Read more...</a></span>' + '</div></li>');
    });
});
}); 
```

错误块`'<%:Web.HelperClasses.HelperClass.TrimString(' + data.Notes + ',2)%>'`，错误是`Too many characters in character literal`。

这是函数的形式： `TrimString(string s,int total)`。

我试图更改为`'<%:Web.HelperClasses.HelperClass.TrimString("' + data.Notes + '",2)%>'`，但它仍然没有工作。

这是 c#`TrimString`函数：

```
public static string TrimString(string str, int lenght)
{
string _str = str;
int _iAdditionalLenght = 0;
for (int i = lenght; i < str.Length; i++)
{
    if (_str.Substring(i, 1) == " ")
        break;
    _iAdditionalLenght++;
}
return str.Substring(0, str.Length < (lenght + _iAdditionalLenght) ? str.Length : (lenght + _iAdditionalLenght));
 } 
```

这是我在 javascript 中尝试过的，但没有奏效：

```
function TrimString(str, lengthStr) { 
  var _str = str;
  var _iAdditionalLenght = 0;
  for (var i = lengthStr; i < str.length; i++)
  {
      if (_str.substring(i, 1) == " ")
        break;  
      _iAdditionalLenght++;
  }

  return str.substring(0, str.length < (lengthStr + _iAdditionalLenght) ? str.length : (lengthStr + _iAdditionalLenght));
 } 
```

谁能告诉我如何`TrimString`在我的 javascript 块中编写这个函数？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:22:45.587

如果我猜对了你在做什么，你就是不能。js在客户端执行，aspnet在服务器端执行。您不能使用 js 创建 aspnet 标签，因为它们需要在服务器端编译和执行。

如果你只需要一个修剪功能，为什么不使用jquery内置的修剪功能呢？

[http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

# jquery-ui - jQuery对话框性能

> ID：12602676
> 
> 赞同：1
> 
> 时间：2012-09-26T13:18:48.403
> 
> 标签：jquery-ui

我正在使用 Jquery 对话框进行确认和警报目的...

这是我的代码...

```
$( "#dialog-confirm" ).dialog({
            resizable: false,                
            modal: true,
            buttons: {
                "Yes": function() {

                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        }); 
```

我没有收到任何错误。到目前为止它工作正常，但似乎性能有点慢。我的问题是将来是否会出现任何性能问题？如果确实发生任何性能问题，我将如何避免这种情况？
如果我有任何错误，请帮助我并纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:24:49.990

这个片段现在或将来不太可能很慢 - 您是否尝试过计时？页面中可能有一些其他代码被此调用触发，但我们需要查看整个页面才能对此进行调查。

Firebug 有一个不错的[JavaScript 分析器](http://getfirebug.com/javascript)来帮助你发现性能问题。

# php - 使用 Facebook 登录不起作用

> ID：12602685
> 
> 赞同：0
> 
> 时间：2012-09-26T13:19:23.037
> 
> 标签：php, facebook, wordpress, login

我尝试从我的 Wordpress 网站使用 Facebook 登录，所以我正在使用此代码但启用登录。首先，当我们填写登录凭据时，它会再次返回到同一页面。

```
 <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : 'MY APP ID', // App ID
        channelUrl : '//SITE URL', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };
    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script>

  <div class="fb-login-button">Login with Facebook</div> 
```

当我创建应用程序时，我只需填写我的电子邮件 ID、站点 URL 和应用程序名称。我的结局还剩下什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T16:38:33.943

如果您需要简单的方法在 wordpress 上集成 facebook 登录和更多功能，还有更多免费插件，如[facebookall](http://wordpress.org/plugins/facebookall/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:45:41.933

我认为这可能会对您有所帮助[http://wordpress.org/extend/plugins/simple-facebook-connect/](http://wordpress.org/extend/plugins/simple-facebook-connect/)

# jquery - Jquery：获取属性值

> ID：12602699
> 
> 赞同：0
> 
> 时间：2012-09-26T13:19:59.377
> 
> 标签：jquery, jquery-selectors

我需要通过使用它的 id 来获取元素的所有属性值的列表。我的代码如下：

```
<div id="DivRoles" align="center" style="">
<select id="newOptions" name="UserRole" multiple="multiple">
    <option selected="selected" value="1">Normal User</option>
    <option selected="selected" value="5">Senior Manager</option>
</select>
<!-----Need to get values from this list below------->
<div id="ms-UserRole" class="ms-container">

    <div class="ms-selection">
        <div id="currentroles" class="custom-header">Current Roles</div>
        <ul class="ms-list">
            <li class="ms-elem-selected" ms-value="1">Normal User</li><!--Need this value--->
            <li class="ms-elem-selected" ms-value="5">Senior Manager</li><!--Need this value--->
        </ul>
    </div>
</div>

<input type="button" class="input-rounded-submit" value="Save" onclick = "Javascript:UpdateRoles()"/></div> 
```

在这里，我需要获取“普通用户”的值，即“1”和“高级经理”为“5”。然后我需要连接这些值并将最终答案显示为“15”。

我正在尝试下面的代码，但它似乎正在工作：

```
function UpdateRoles() {
    alert("Hi");
    var list;

    $.each()('#ms-UserRole', function(){
        list += $.attr(".ms-selection ms-list li ms-elem-selected ms-value").val();
    });

    alert(list);
} 
```

如果有人知道解决方案，请帮助我。谢谢，数控

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:24:15.767

试试这个：

```
var list = "";
$(".ms-elem-selected").each(function() { list += $(this).attr("ms-value"); }); 
```

* * *

如果要对数字进行排序，则应先将它们存储为数组，对数组进行排序，然后将其连接成字符串：

**[样本](http://jsfiddle.net/uXrHD/1/)**

```
var arr = [];
$(".ms-elem-selected").each(function() { arr.push($(this).attr("ms-value")); });
arr.sort();
list = arr.join(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:25:06.467

不确定我很明白，但试试[这个](http://jsfiddle.net/PmHvU/1/)

```
function UpdateRoles() {
    var output = '';
    $('.ms-elem-selected').each(function() {
        output += $(this).attr('ms-value');
    })

    alert(output);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:25:51.483

尝试 ：

```
$('.ms-list').children().each(function(){
    alert($(this).attr('ms-value'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:30:24.933

试试这个：

```
 var list = '';
    $('.ms-list').each(function(){
     //alert($(this).text());
    list += $(this).find('.ms-elem-selected').attr('ms-value');
   });

   alert(list); 
```

# eclipse - TFS Eclipse 插件“授权失败”

> ID：12602707
> 
> 赞同：1
> 
> 时间：2012-09-26T13:20:11.770
> 
> 标签：eclipse, tfs, eclipse-plugin, team-explorer, team-explorer-everywhere

我正在运行 OS 10.7.3 的 Mac 上使用 Eclipse Juno

我昨天和今天为 Eclipse 安装了 TFS 插件，在几次错误启动之后，我能够连接到我们的 tfspreview 实例。我签入了所有代码，然后提交了它。一位队友确认代码已提交。然后我尝试检查更新并收到授权失败消息。我已经尝试重新启动 Eclipse，最后是我的计算机。每次 Eclipse 尝试连接到 TFS 服务器时都会失败。

我没有更改密码，仍然可以登录 tfspreview 网页界面，因此我的帐户似乎没有被锁定。有没有人经历过这样的事情？

谢谢！

# android - 流媒体问题 ..path 为空日志

> ID：12602709
> 
> 赞同：0
> 
> 时间：2012-09-26T13:20:18.463
> 
> 标签：android, path, webcam

我正在尝试开发一个从 JMF streming 网络摄像头获取流的应用程序。我可以使用 jmstudio 流式传输我的网络摄像头。但我无法在平板电脑上观看.. 这是我的代码和日志..

```
 String path = "rtsp://192.168.1.211:2000";
    MediaController mc= new MediaController(this);
    vw.setVideoPath(path);
    vw.setMediaController(mc);
    vw.requestFocus();      
    mc.show();
    vw.start(); 
```

> 09-26 04:17:17.307：D/CLIPBOARD(22762)：在开始输入时隐藏剪贴板对话框：由其他人完成...！09-26 04:17:24.807: V/MediaPlayer-JNI(22762): native_setup
> 
> 09-26 04:17:24.807: V/MediaPlayer(22762): 构造函数
> 
> 09-26 04:17:24.807：V/MediaPlayer（22762）：setListener
> 
> 09-26 04:17:24.807: I/MediaPlayer(22762): 路径为空
> 
> 09-26 04:17:24.807: D/MediaPlayer(22762): 无法在客户端打开文件，正在尝试服务器端
> 
> 09-26 04:17:24.807: V/MediaPlayer-JNI(22762): setDataSource: 路径 rtsp://192.168.1.211:2000
> 
> 09-26 04:17:24.807: V/MediaPlayer(22762): setDataSource(rtsp://192.168.1.211:2000)
> 
> 09-26 04:17:24.807: V/MediaPlayer(22762): setVideoSurfaceTexture
> 
> 09-26 04:17:24.807: V/MediaPlayer-JNI(22762): setAudioStreamType: 3
> 
> 09-26 04:17:24.807: V/MediaPlayer(22762): MediaPlayer::setAudioStreamType
> 
> 09-26 04:17:24.807: V/MediaPlayer(22762): setVideoSurfaceTexture
> 
> 09-26 04:17:24.807:V/MediaPlayer(22762):prepareAsync
> 
> 09-26 04:17:55.147: V/MediaPlayer(22762): 收到消息 msg=100, ext1=1, ext2=-2147483648
> 
> 09-26 04:17:55.147: E/MediaPlayer(22762): 错误 (1, -2147483648)
> 
> 09-26 04:17:55.147: V/MediaPlayer(22762): 回调应用
> 
> 09-26 04:17:55.147: V/MediaPlayer(22762): 从回调返回
> 
> 09-26 04:17:55.147: E/MediaPlayer(22762): 错误 (1,-2147483648)
> 
> 09-26 04:17:55.147: D/VideoView(22762): 错误: 1,-2147483648

# java - 可以在其引用交换时访问该变量吗？

> ID：12602710
> 
> 赞同：0
> 
> 时间：2012-09-26T13:20:19.513
> 
> 标签：java, concurrency, reference, swap

Java：我有共享变量（对象类型），其值将被不同的线程非常频繁地更改。通过其他线程集从其他方法访问此变量的值，将给出任何损坏的值（根本没有分配的值）？在引用交换的时候访问变量会不会有什么问题？？？

```
// this method will be called very frequently
public void changeValue(Object value)
{
    this.value = value;
}

// will this method call return an invalid memory reference ?
public Object getValue()
{
    return value;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:28:18.093

Assigning a new Object to a variable is an atomic operation, but if you don't make the reference volatile, or synchronize access to this reference, or use an AtomicReference, you will have visibility problems and see stale values.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:27:46.330

对象引用在原子操作中处理。请参阅[Java 语言规范 17.4和](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4)[此处](https://stackoverflow.com/questions/2576513/is-writing-a-reference-atomic-on-64bit-vms)的优秀答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:26:52.563

getter 将始终返回一个有效的对象（或 null，如果没有设置）。它可能会返回较旧的值。如果你想解决这个问题，你可以添加`synchronized`到方法中。但这会使线程在设置时相互等待

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:27:19.527

该值将是一个有效的对象，即使同时被修改。

但是，如果您尝试使用 a `java.util.List`、`java.util.Map`或其他集合持有者执行此操作，如果您在另一个线程中迭代集合的值集时修改集合的值集，您将遇到 a `ConcurrentModificationException`，在这种情况下，您最好的方法是修改您的 getter 和 setter带有`synchronized`关键字的方法，或者在集合本身上使用同步块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:27:30.727

使用[AtomicReference](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicReference.html)来存储您的`value`变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T13:31:01.907

Now problem, provided you declared value as volatile or access methods as synchronized.

# javascript - 动态创建的复选框未触发操作

> ID：12602711
> 
> 赞同：0
> 
> 时间：2012-09-26T13:20:26.397
> 
> 标签：javascript, jquery, html, dynamic, checkbox

当我使用 HTML 创建一个复选框时，该操作会正常触发，但是当我使用 javascript 创建复选框时出现问题（当我使用按钮在表格中添加一行并单击新复选框时）操作不起作用。

这是我的代码：

```
<HTML>
<HEAD>

<SCRIPT type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<SCRIPT>

    $(window).load(function() {

        $('input[name=chk]').change(function() { 
            if ($('input[name=chk]').is(':checked')) {
                alert("checked");   
                }
            else {
                alert("unchecked"); 
            }
        }); 
    });

    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        element1.setAttribute("name","chk");
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount + 1;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        cell3.appendChild(element2);
    }

</SCRIPT>
</HEAD>
<BODY>

<INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

<TABLE id="dataTable" width="350px" border="1">
    <TR>
        <TD><INPUT type="checkbox" name="chk"/></TD>
        <TD> 1 </TD>
        <TD> <INPUT type="text" /> </TD>
    </TR>
</TABLE>

</BODY>
</HTML> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:25:04.303

那是因为您的事件处理程序：

```
$('input[name=chk]').change(function() { ... }); 
```

...仅适用于当时与选择器匹配的那些输入 - 在动态创建的输入存在之前。您可以改为使用附加到父元素（或文档）的委托事件处理程序，在事件发生时检查选择器：

```
$('#dataTable').on('change', 'input[name=chk]', function() { ... }); 
```

该[`.on()`方法](http://api.jquery.com/on)是在 1.7 版中添加的，因此如果您使用的是旧版本的 jQuery，请[`.delegate()`](http://api.jquery.com/delegate/)改用。（除非您使用的是*非常*旧的版本，即 1.4.2 之前的版本，在这种情况下，您必须使用`.live()`.）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:25:32.723

对于动态生成的元素，事件应该从元素或文档对象的静态父对象之一委托，您可以使用该`on`方法。

```
$('#dataTable').on('click', 'input[name=chk]', function(){
   // ...
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:25:22.730

这里的问题是您试图将事件侦听器（`.change()`）附加到 DOM 中尚不存在的元素。您应该仅在创建 chackbox 后绑定侦听器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:23:55.473

如果您使用的是 jquery 1.7 或更高版本，您应该改用该`on()`方法

见工作[小提琴](http://jsfiddle.net/5WDjn/)

```
 $('#dataTable').on('click','input:checkbox',function() { 
        if ($('input[name=chk]').is(':checked')) {
            alert("checked");   
            }
        else {
            alert("unchecked"); 
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:27:51.347

您需要为您的复选框设置一个*.live处理程序。*此外，在处理程序中，您可以使用 $(this) 获取当前复选框。

你在这里：http: [//jsfiddle.net/edAv8/](http://jsfiddle.net/edAv8/)

或者您可以使用*.on*处理程序：http: [//jsfiddle.net/edAv8/1/](http://jsfiddle.net/edAv8/1/)

# java - 如何使用 pushregistry 在 j2me midlet 中读取收到的消息？

> ID：12602714
> 
> 赞同：1
> 
> 时间：2012-09-26T13:20:36.280
> 
> 标签：java, java-me, sms, midp

我不知道如何使用 J2ME midlet 阅读移动设备中收到的消息。实际上我一直在使用 SMS 网关将消息发送到其他手机。短信网关回复同一移动设备，但我想阅读回复消息设备直接，不会检查收件箱。如何使用概念在 j2me midlet 中执行此操作。请`PushRegistry`给我一个好主意或示例代码...提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:48:15.993

您应该为此使用 PushRegistry 机制。为此，您应该在 .jad 文件中标记您的应用程序对传入的 SMS 做出反应，并标记 SMS 权限。将这些属性放入 JAD 文件：

```
MIDlet-Push-1: sms://:10214,hu.bute.daai.example.sms.MidletSMSPushDemo,*
MIDlet-Permissions: javax.microedition.io.PushRegistry, javax.microedition.io.Connector.sms, javax.wireless.messaging.sms.receive 
```

请注意，您应该**使用自己的包和 MIDlet 名称**。除此之外，您应该**使用与 JAD 中定义的相同的端口来发送 SMS**（示例中为 10214）。

之后，当您的 MIDlet 启动时，您应该调用您的 SMS 接收器代码来获取 SMS：

```
public class MidletJSMSProxy extends MIDlet {
    public void startApp() {
        initalize();
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }

    public void initSMSReceive() {
        new Thread() {
            public void run() {
                MessageConnection conn = null;
                try {
                    String url = "sms://:10214";
                    MessageConnection conn = (MessageConnection) Connector.open(url);
                     TextMessage message = (TextMessage)conn.receive();
                    System.out.println("SMS: "+message.getAddress()+" - "+message.getPayloadText());
                }
                catch(Exception e){
                    e.printStackTrace();
                } finally {
                    try {
                        if (conn != null)
                            conn.close();
                    } catch(Exception e){
                        e.printStackTrace();
                    }
                }
            }
        }.start();
    }
} 
```

更多信息： http: [//www.developer.nokia.com/Community/Wiki/How_to_launch_a_MIDlet_remotely_via_SMS_or_locally_via_an_Alarm_with_PushRegistry_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/How_to_launch_a_MIDlet_remotely_via_SMS_or_locally_via_an_Alarm_with_PushRegistry_in_Java_ME)

# c# - 使用非键添加关联

> ID：12602715
> 
> 赞同：2
> 
> 时间：2012-09-26T13:20:36.780
> 
> 标签：c#, entity-framework, associations

我想使用非键手动添加**Qualification**和**QualificationUnit之间的关联。**Qualification 与 QualificationUnit 具有零对多的关系

我想加入 OakQualificationNumber 和 QualificationNumber。

下面是我项目中的数据库结构和实体图。

![在此处输入图像描述](../Images/356052de2077dd948f607da0b3b305a5.png)

我试图将它们联系起来，但我做不到。我无法将 PrincipalKey 更改为 OakQualificationNumber。您能否告诉我如何添加与非关键字段的关联？谢谢。

![在此处输入图像描述](../Images/86f5b771adff9dc009bb54b488f35f7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:28:19.467

这不可能。EF 还不支持唯一约束，因此主键只能是主键。

# android - jQuery Mobile 在 Android 的 2.3.4 浏览器中看起来不太好

> ID：12602716
> 
> 赞同：0
> 
> 时间：2012-09-26T13:20:37.700
> 
> 标签：android, jquery-mobile

我有一个 Android 4.0 设备和一个 Android 2.3.4 的智能手机。我刚开始研究 jQuery mobile，我注意到 jQuery mobile 的视觉效果在 android 2.3.4 中看起来不太好，似乎按钮是“像素化的”并且过渡不起作用。有人知道如何解决这个问题吗？这是 jQuery mobile 版本的问题吗？

我正在使用官方网站中推荐的 jQuery mobile 1.0.1 和 jQuery 1.6.4。

谢谢。

# c# - RichTextBlock 段落背景颜色

> ID：12602717
> 
> 赞同：2
> 
> 时间：2012-09-26T13:20:43.537
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我有一个带有几段的 RichTextBlock。我需要一些段落有背景颜色。我在段落或运行中找不到背景属性。我该怎么做呢？在 WPF 中有一个 Block，但它似乎不存在于 WinRT 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:47:15.350

这是不可能的，但可以插入带有背景的 StackPanel 的 InlineUIContainer。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T13:34:32.000

您需要获取段落开头和段落结尾的索引，然后使用：

```
//Select the line from it's number
int startIndex = richTextBox.GetFirstCharIndexFromLine(lineNumber);
richTextBox.Select(startIndex, length);

//Set the selected text fore and background color
richTextBox.SelectionColor = System.Drawing.Color.White;
richTextBox.SelectionBackColor= System.Drawing.Color.Blue; 
```

您还可以查看[ScintillaNET](http://scintillanet.codeplex.com/)以获得一个不错的文本编辑控件。

# image-processing - 实现有序抖动（24 位 RGB 到每通道 3 位 RGB）

> ID：12602718
> 
> 赞同：2
> 
> 时间：2012-09-26T13:20:43.837
> 
> 标签：image-processing, core-graphics, dithering

我正在编写一个图像编辑程序，我需要将任意 24 位 RGB 图像（我已经使用 CoreGraphics 等加载它）抖动到具有 3 位颜色通道的图像，然后显示它的功能。我已经设置了我的矩阵等，但是除了应用于图像的简单模式之外，我没有从下面的代码中得到任何结果：

```
- (CGImageRef) ditherImageTo16Colours:(CGImageRef)image withDitheringMatrixType:(SQUBayerDitheringMatrix) matrix {
    if(image == NULL) {
        NSLog(@"Image is NULL!");
        return NULL;
    }

    unsigned int imageWidth = CGImageGetWidth(image);
    unsigned int imageHeight = CGImageGetHeight(image);

    NSLog(@"Image size: %u x %u", imageWidth, imageHeight);

    CGContextRef context = CGBitmapContextCreate(NULL, 
                                                 imageWidth, 
                                                 imageHeight, 
                                                 8, 
                                                 4 * (imageWidth), 
                                                 CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB), 
                                                 kCGImageAlphaNoneSkipLast);

    CGContextDrawImage(context, CGRectMake(0, 0, imageWidth, imageHeight), image); // draw it
    CGImageRelease(image); // get rid of the image, we don't want it anymore.

    unsigned char *imageData = CGBitmapContextGetData(context);

    unsigned char ditheringModulusType[0x04] = {0x02, 0x03, 0x04, 0x08};
    unsigned char ditheringModulus = ditheringModulusType[matrix];

    unsigned int red;
    unsigned int green;
    unsigned int blue;

    uint32_t *memoryBuffer;
    memoryBuffer = (uint32_t *) malloc((imageHeight * imageWidth) * 4);

    unsigned int thresholds[0x03] = {256/8, 256/8, 256/8};

    for(int y = 0; y < imageHeight; y++) {
        for(int x = 0; x < imageWidth; x++) {
            // fetch the colour components, add the dither value to them
            red = (imageData[((y * imageWidth) * 4) + (x << 0x02)]);
            green = (imageData[((y * imageWidth) * 4) + (x << 0x02) + 1]);
            blue = (imageData[((y * imageWidth) * 4) + (x << 0x02) + 2]);

            if(red > 36 && red < 238) {
                red += SQUBayer117_matrix[x % ditheringModulus][y % ditheringModulus];
            } if(green > 36 && green < 238) {
                green += SQUBayer117_matrix[x % ditheringModulus][y % ditheringModulus];
            } if(blue > 36 && blue < 238) {
                blue += SQUBayer117_matrix[x % ditheringModulus][y % ditheringModulus];
            }

//            memoryBuffer[(y * imageWidth) + x] = (0xFF0000 + ((x >> 0x1) << 0x08) + (y >> 2));
            memoryBuffer[(y * imageWidth) + x] = find_closest_palette_colour(((red & 0xFF) << 0x10) | ((green & 0xFF) << 0x08) | (blue & 0xFF));
        }
    }

    //CGContextRelease(context);
    context = CGBitmapContextCreate(memoryBuffer, 
                                    imageWidth, 
                                    imageHeight, 
                                    8, 
                                    4 * (imageWidth), 
                                    CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB), 
                                    kCGImageAlphaNoneSkipLast);

    NSLog(@"Created context from buffer: %@", context);

    CGImageRef result = CGBitmapContextCreateImage(context);
    return result;
} 
```

请注意，`find_closest_palette_colour`除了立即返回原始颜色进行测试之外，它不会做任何事情。

我正在尝试实现来自维基百科的示例伪代码，但我现在并没有真正从中得到任何东西。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T17:59:40.893

使用我在这里提供的代码：[https ://stackoverflow.com/a/17900812/342646](https://stackoverflow.com/a/17900812/342646)

此代码首先将图像转换为单通道灰度。如果您想在三通道图像上进行抖动，您可以将图像分成三个通道并调用该函数三次（每个通道一次）。

# c# - 如何在 Windows 8 应用商店应用程序中访问 IMAP？

> ID：12602722
> 
> 赞同：5
> 
> 时间：2012-09-26T13:20:53.350
> 
> 标签：c#, windows-8, windows-runtime, imap, windows-store-apps

着眼于为 Windows 8 创建一个小型电子邮件客户端作为概念证明。我实际上从未编写过电子邮件应用程序，而且看起来我选择了一个困难的起点，因为 System.Net.Mail 似乎无法用于存储应用程序。

[This thread about IMAP in c#](https://stackoverflow.com/questions/670183/accessing-imap-in-c-sharp)有很多在c#中执行IMAP的库和组件示例，但其中大多数似乎依赖于WinRT中不可用的函数

我是否遗漏了一些明显的东西，或者我只需要从头开始实施 IMAP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:35:15.500

我认为您需要为 IMAP/SMTP/POP3 编写自己的实现，因为 Metro 应用程序使用大量共享合同。微软表示，如果你想编写自己的电子邮件客户端，他们很可能想要自己的实现。如果不只是使用内置电子邮件客户端的共享合同。

所以我认为答案是。您需要编写自己的[RFC 3501 - INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1](https://www.rfc-editor.org/rfc/rfc3501)实现或使用共享合同与您安装的电子邮件客户端对话。

# ember.js - 为什么 ember-data 嵌入式关联总是发送 ajax 请求？

> ID：12602725
> 
> 赞同：0
> 
> 时间：2012-09-26T13:21:03.693
> 
> 标签：ember.js, ember-data

我正在尝试使用 Ember-Data 和提供的 RESTAdapter 来加载这样的对象：

```
{
  "videos":[
   {
    "id":"5062f3c30959c6c732000005",
    "tags":[
          {"_id":"5062f3cb0959c6c732000006","name":"hello"},
          {"_id":"5062f3cb0959c6c732000007","name":" world"}
    ]
   }
  ]
} 
```

在这里，我有一个包含许多标签的视频对象。该`tags`属性被声明为嵌入：

```
Video = DS.Model.extend {
 tags: DS.hasMany('Tag', {embedded: true})
}

Tag = DS.Model.extend {
 video: DS.belongsTo('Video')
} 
```

当我尝试加载视频时

```
Video.find() 
```

适配器总是尝试向我的服务器发送一个获取请求，`/tags`但由于我的服务器不直接提供对标签的访问权限，该请求自然会失败。相反，标签已经嵌入在 /videos.json 中。

那么`embedded: true`in ember-data association 是什么意思呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:37:32.120

我模糊地相信正在发生的事情是它不信任`tags`没有`id`参数的嵌入。尝试给`Tag`一个`id: DS.attr('string', { key: '_id' })`.

顺便说一句，`embedded`在您的示例中拼写错误 - 在您的应用程序中是否正确？

**更新：**也许更好的建议是设置`primaryKey: '_id'`inside `Tag`。（[文档](https://github.com/emberjs/data#defining-models)）

# php - 从 Linux 服务器上的 Zend Framework 连接外部 MS SQL DB

> ID：12602729
> 
> 赞同：0
> 
> 时间：2012-09-26T13:21:18.127
> 
> 标签：php, sql-server, linux, zend-framework

**从 Linux 服务器上的 Zend Framework 连接外部 MS SQL DB**

我有 Linux 服务器，我想要我的 Zend 框架，并且想要连接我的 SqlServer 数据库，它位于其他托管服务器的 Windows 上，我已经在上面安装了数据库，并且有数据库静态链接来连接它。

但是我怎样才能连接到 linx 服务器的 mssql 数据库呢？

```
$server='some ip add'; $username='uname'; $password='passpass';
$database ='dbname' ;

$connection = mssql_connect($server, $username, $password)or die('Could Not Connect');
echo "test2";
if($connection != FALSE){
    echo "Connected to the database server OK<br />";
}
else {
    die("Couldn't connect" . mssql_get_last_message());
}

if(mssql_select_db($database, $connection)){
    echo "Selected $database ok<br />";
}
    else {
    die('Failed to select DB');
} 
```

此代码不返回任何内容！

**有朋友从 linux 主机连接 mssql 服务器吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:48:37.970

我在 application.ini 文件中使用 multidb 设置，因为我有几个不同的数据库要从中提取，但是是的。这是我在ini文件中的设置。您只需确保已正确安装和设置驱动程序。

```
resources.multidb.tw.adapter = "pdo_mssql"
resources.multidb.tw.pdoType = dblib
resources.multidb.tw.charset = "utf8"
resources.multidb.tw.host = "192.168.1.111"
resources.multidb.tw.username = "username"
resources.multidb.tw.password = "passwd"
resources.multidb.tw.dbname = "database"
resources.multidb.tw.default = true 
```

希望有帮助。罗伊斯

# json - 使用 Mule 和 Jersey 修改 JSON 输出

> ID：12602730
> 
> 赞同：0
> 
> 时间：2012-09-26T13:21:19.963
> 
> 标签：json, rest, jersey, mule

我的目标非常简单。我只想将来自 Mule 中 Jersey 模块的 json 响应包装在 JSON 响应中，这样：

```
{"status": "ok", message:<json-message>} 
```

我尝试使用自定义变压器：

```
<flow name="sicsRest" doc:name="sicsRest">
    <inbound-endpoint address="http://localhost:65432/RestServices" 
        exchange-pattern="request-response" doc:name="RestEntry" />
    <jersey:resources doc:name="REST">
        <component doc:name="Java">
            <spring-object bean="serviceImpl" />
        </component>
        <custom-transformer returnClass="java.lang.String" 
            class="com.hyperborea.sicsbus.transformer.JsonTransformer" 
            doc:name="JsonTransformer" />
        <jersey:exception-mapper 
            class="com.hyperborea.sicsbus.exception.JsonRestExceptionMapper" />
    </jersey:resources>
</flow> 
```

变压器类：

```
public class JsonTransformer extends AbstractTransformer {
    @Override 
    protected Object doTransform(Object src, String enc) 
    throws TransformerException {
        return "{\"status\":\"ok\", \"message\":\"" + src + "\"}";
    }
} 
```

不幸的是，它在 Mule 启动期间引发了异常：

```
org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'custom-transformer'. One of '{"http://www.mulesoft.org/schema/mule/core":abstract-component, "http://www.mulesoft.org/schema/mule/jersey":exception-mapper}' is expected. 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:45:11.033

如果你把你的放在和之间的`custom-transformer`一个`<response> ... </response>`块里怎么办？`inbound-endpoint``jersey:resources`

## 编辑

新流程：

```
<flow name="sicsRest" doc:name="sicsRest">
    <inbound-endpoint ... />
    <response>
        <custom-transformer returnClass="java.lang.String"
            class="com.hyperborea.sicsbus.transformer.JsonTransformer"
            doc:name="JsonTransformer" />
    </response>
    <jersey:resources doc:name="REST">
        <component doc:name="Java">
            <spring-object bean="serviceImpl" />
        </component>
        <jersey:exception-mapper ... />
    </jersey:resources>
</flow> 
```

为了更好地处理输入，必须在 AbstractMessageTransformer 中更改转换器（这对于 AbstractTransformer 几乎是不可能的）：

```
public class JsonTransformer extends AbstractMessageTransformer {
    @Override 
    public Object transformMessage(MuleMessage message, String outputEncoding)
    throws TransformerException {
        try {
            return "{\"status\":\"ok\", \"message.getPayloadAsString()\":\"" 
            + src + "\"}";
        } catch (Exception e) {}
    }
} 
```

# java - 休眠验证无验证

> ID：12602731
> 
> 赞同：1
> 
> 时间：2012-09-26T13:21:25.857
> 
> 标签：java, validation, spring-mvc, spring-3, hibernate-validator

嗨，我正在关注我发现的一个例子

```
http://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/ 
```

问题是在我发布的个人资料中没有发现任何错误。我应该。为什么会发生这种情况？

```
@Test
@Ignore
public void anotherTest() {
    Profile profile = ProfileUtil.getProfile();

    profile.setEmail("user@mail.com");
    profile.setSex("dafjsgkkdsfa");
    BindingResult bindingResult = new BeanPropertyBindingResult(profile, "profile");
    userController.postUser(new ModelMap(), profile, bindingResult);

    if (bindingResult.hasErrors()) {
        System.out.println("errors");
    }

    assertTrue(bindingResult.hasErrors());

    profileService.deleteProfile(profile);
}

@RequestMapping(value = "/", method = RequestMethod.POST)
public View postUser(ModelMap data, @Valid Profile profile, BindingResult bindingResult) {

        if (bindingResult.hasErrors()) {
            System.out.println("No errors");
            return dummyDataView;
        }

        data.put(DummyDataView.DATA_TO_SEND, "users/user-1.json");
        profileService.save(profile);
        return dummyDataView;
} 
```

编辑：这是个人资料。我现在正在测试性别，所以我想这才是最重要的。

```
package no.tine.web.tinetips.domain;

import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.validation.constraints.Max;
import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Pattern;
import javax.validation.constraints.Size;

import no.tine.web.tinetips.util.CommonRegularExpressions;

import org.hibernate.validator.constraints.NotBlank;

@Entity
public class Profile {

    @Id
    @GeneratedValue
    private Long id;

    @NotNull(message = "profile.email.null")
    @NotBlank(message = "profile.email.blank")
    @Size(max = 60, message = "profile.email.maxlength")
    @Pattern(regexp = CommonRegularExpressions.EMAIL, message = "profile.email.regex")
    @Column(name = "Email", unique = true)
    private String email;

    @Pattern(regexp = "^[M|F]{1}$", message = "profile.sex.regex")
@Size(max = 1, message = "profile.sex.maxlength")
private String sex;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:03:08.777

基本上你用 实例化了一个 POJO `this.userController = new UserController()`，然后调用它的方法`this.controller.postUser(...)`。只是带有简单对象的简单 Java，与 Spring 和 Spring MVC 没有任何关系：不考虑 @Valid。

如果你想让它工作，你必须给你的测试类一些 Spring 信息，使用`@RunWith(SpringJUnit4ClassRunner.class)`和`@ContextConfiguration(...)`。然后，对于 Spring MVC 部分，您将不得不通过一些 Spring MVC 设施模拟控制器上的请求调用。如果您使用 Spring MVC 3.0- 或 3.1+，它会有所不同。例如，有关更多信息和实际代码，[请参阅这篇文章及其答案](https://stackoverflow.com/a/12308721/400545)。

# c++ - 自定义图像工具栏 WTL

> ID：12602734
> 
> 赞同：2
> 
> 时间：2012-09-26T13:21:29.853
> 
> 标签：c++, visual-studio, wtl

我想创建一个带有自定义图像按钮的工具栏，我有 .ico 格式的图像，如何将它们添加到 WTL 中的工具栏中？我正在尝试编辑工具栏列表中的图像，但是质量很差，如何添加质量更好的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:21:23.220

如果您已经创建了一个 WTL 工具栏控件，您可以使用类的`SetImageList()`和`SetHotImageList()`方法将图像附加到它`CToolBarCtrl`。例如

```
CToolBarCtrl toolbar;
CImage image;
CBitmap bitmap;

// ... load the image into the bitmap ...

images.Create(32, 32, ILC_COLOR32 | ILC_MASK, 0, 1);

// repeat this for each image you want to use in the toolabr
images.Add(bitmap, RGB(255, 255, 255));

toolbar.SetImageList(images.Detach());

//... do the same for the hot (hover) images ... 
```

然后可以通过引用`CImageList:Add()`方法的返回值来使用图像。

**确保**像我在这里所做的那样从类中分离图像列表，`CImageList`否则图像列表将在超出范围时被删除。

# django - django分页的不同模板

> ID：12602740
> 
> 赞同：2
> 
> 时间：2012-09-26T13:21:49.040
> 
> 标签：django, django-templates, django-pagination

我刚刚开始使用[django-pagination](https://github.com/ericflo/django-pagination)，它包含在我用于我的一个项目的其他一些 3rd-party 应用程序中。

有谁知道是否可以用自定义版本替换 django-pagination 中的**pagination.html**模板，而不必破解实际的应用程序？文档中没有提到任何内容，并且 pagaination.html 在[模板](https://github.com/ericflo/django-pagination/blob/master/pagination/templatetags/pagination_tags.py)标签(paginate()) 中被硬编码。我想知道是否有一种机制可以覆盖通过设置的模板

```
register.inclusion_tag('pagination/pagination.html', takes_context=True)(
paginate) 
```

从我自己的应用程序中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T13:27:23.740

您可以简单地`pagination/pagination.html`在项目的`template`文件夹中创建，它将优先于分页应用程序的`pagination.html`. 因此，只需将分页应用程序版本中的代码复制并粘贴到您的版本中，然后编辑到您心中的内容

您提到的模板标签仅针对模板呈现上下文，因此您无需对其进行任何修改即可更改布局/外观/模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:29:32.097

主要是分页使用你的模板“页面设计”，默认的django模板不需要模板的url

```
from django.core.paginator import Paginator, InvalidPage, EmptyPage

def listing(request):
    contact_list = Contacts.objects.all()
    paginator = Paginator(contact_list, 25) # Show 25 contacts per page

    # Make sure page request is an int. If not, deliver first page.
    try:
        page = int(request.GET.get('page', '1'))
    except ValueError:
        page = 1

    # If page request (9999) is out of range, deliver last page of results.
    try:
        contacts = paginator.page(page)
    except (EmptyPage, InvalidPage):
        contacts = paginator.page(paginator.num_pages)

    return render_to_response('list.html', {"contacts": contacts}) 
```

在模板 list.html 中，您需要包含页面之间的导航以及来自对象本身的任何有趣信息：

```
{% for contact in contacts.object_list %}
    {# Each "contact" is a Contact model object. #}
    {{ contact.full_name|upper }}<br />
    ...
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if contacts.has_previous %}
            <a href="?page={{ contacts.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ contacts.number }} of {{ contacts.paginator.num_pages }}.
        </span>

        {% if contacts.has_next %}
            <a href="?page={{ contacts.next_page_number }}">next</a>
        {% endif %}
    </span>
</div> 
```

[https://docs.djangoproject.com/en/1.3/topics/pagination/](https://docs.djangoproject.com/en/1.3/topics/pagination/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T13:25:29.260

如果您仍在寻找这个，这就是我使用的。

```
def make_pagination(paginator, items=4, show_arrows=True, edges=2):
    """
    Returns a list by which a pagination can be prepared in template by simply
    iterating over it

    :param paginator: the django paginated queryset. (what you get after paginator.page(.....))
    :param items: the number of items to show in center sub-list (place even numbers only)
    :param show_arrows: show arrows at end and beginning.
    :param edges: no of items to show at the edges including '...' (set edges=0 to hide )
    :return: (sample output)
    {'current_page': 6,
     'total_pages': 155,
     'pages': [{'text': u'\xab', 'class': 'first', 'val': 1}, {'text': 1, 'val': 1}, {'text': 2, 'val': 2}, {'text': '...', 'val': ''}, {'text': 4, 'val': 4}, {'text': 5, 'val': 5}, {'text': 6, 'class': 'act', 'val': 6}, {'text': 7, 'val': 7}, {'text': 8, 'val': 8}, {'text': '...', 'val': ''}, {'text': 154, 'val': 154}, {'text': 155, 'val': 155}, {'text': u'\xbb', 'class': 'last', 'val': 155}]
     }
    """

    find = paginator.number
    span = items / 2
    span = span if items % 2 == 0 else (span + 1)
    page_range = paginator.paginator.page_range
    indx = page_range.index(find) if find in page_range else 0
    L = indx - span
    R = indx + span + 1
    _len = len(page_range)

    if L < 0:
        R += 0 - L
        L = 0

    if R - _len > 0:
        L -= R - _len
        R = _len

    sel_range = page_range[L:R]

    if edges:
        Ls = page_range[:edges]
        if Ls[-1] < sel_range[0]:
            sel_range = Ls + ['...'] + sel_range
        else:
            sel_range = list(set(Ls + sel_range))

        Rs = page_range[-edges:]
        if sel_range[-1] < Rs[0]:
            sel_range = sel_range + ['...'] + Rs
        else:
            sel_range = list(set(sel_range + Rs))

    pages = []
    for item in sel_range:
        pg = {'text': item, 'val': item}
        if item == '...':
            pg['val'] = ''
        if item == find:
            pg['class'] = 'act'
        pages.append(pg)

    if show_arrows:
        if page_range[0] == find:
            pages.insert(0, {'text': u'«', 'class': 'first act', 'val': 1})
        else:
            pages.insert(0, {'text': u'«', 'class': 'first', 'val': 1})

        if page_range[-1] == find:
            pages.append({'text': u'»', 'class': 'last act', 'val': page_range[-1]})
        else:
            pages.append({'text': u'»', 'class': 'last', 'val': page_range[-1]})

    return {'current_page': find, 'total_pages': paginator.paginator.num_pages, 'pages': pages} 
```

将上下文中 make_pagination 的输出作为“分页”传递，然后

```
<p class="_nav">
{% for page in pagination.pages %}
  <a class="{{ page.class }}" href="{{ page.val }}/">{{ page.text }}</a>
{% endfor %}
</p> 
```

# wpf - 带触发器的 DatagridTemplateColumn 绑定失败

> ID：12602744
> 
> 赞同：0
> 
> 时间：2012-09-26T13:22:09.497
> 
> 标签：wpf, xaml

我有一个包含 2 列的数据网格，我想将第 2 列中的一些单元格显示为：

1.  组合框
2.  文本框

基于财产

代码 ：

**解决方案#1：**

```
 <Window.Resources> 
<DataTemplate x:Key="DropDownTemplate">
     <StackPanel>

      <ComboBox  SelectedValuePath="Id" DisplayMemberPath="Name"  ItemsSource="{Binding MarketConfigurationLOVs, UpdateSourceTrigger=PropertyChanged}"/>

       </StackPanel>
</DataTemplate>

<DataTemplate x:Key="TextBoxTemplate">
      <StackPanel>
           <TextBox Text="{Binding ConfigurationValue, UpdateSourceTrigger=PropertyChanged}" />

       </StackPanel>
  </DataTemplate>
 </Window.Resources> 
```

这里的数据网格标签：

```
<DataGrid ItemsSource="{Binding Path= MarketConfigurationValues,Mode=TwoWay}" HeadersVisibility="None" AutoGenerateColumns="False" CanUserAddRows="False">
     <DataGrid.Columns>
             <DataGridTextColumn Width="120" Binding="{Binding  Path= ConfigurationName}" />

             <DataGridTemplateColumn>
                   <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                              <ContentControl Content="{Binding}" >
                                     <ContentControl.Style>
                                          <Style TargetType="ContentControl">
                                               <Style.Triggers>

                                                   <DataTrigger Binding="{Binding HasLOV}" Value="true">
                                                         <Setter  Property="ContentTemplate"  Value="{StaticResource DropDownTemplate}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding HasLOV}" Value="false">
                                                         <Setter  Property="ContentTemplate" Value="{StaticResource TextBoxTemplate}" />
                                                            </DataTrigger>
                                                            <!-- and so on -->
                                                        </Style.Triggers>
                                                    </Style>
                                                </ContentControl.Style>
                                            </ContentControl>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

   </DataGrid.Columns> 
```

这未能显示实际值，因为它显示属性名称并始终在下拉列表中显示单元格，当我将 TextBoxContentTemplate 与 ComboBoxContentTemplate 交换时，它将所有单元格显示为文本框，因此它似乎忽略了触发器但是当我调试时我发现 HasLOV 一些项目包含真，有些包含假

**解决方案#2：（** **也失败了）**参考：来自以下帖子[WPF MVVM 创建动态控件的 Jon 解决方案](https://stackoverflow.com/questions/5267905/wpf-mvvm-creating-dynamic-controls)

```
<DataGridTemplateColumn>
  <DataGridTemplateColumn.CellTemplate>
     <DataTemplate>
       <ContentControl x:Name="MyContentControl" Content="{Binding}" />

         <DataTemplate.Triggers>
              <DataTrigger Binding="{Binding HasLOV}" Value="false">
                    <Setter  TargetName="MyContentControl" Property="ContentTemplate" Value="{StaticResource TextBoxTemplate}" />
              </DataTrigger>

              <DataTrigger Binding="{Binding HasLOV}" Value="true">
                    <Setter  TargetName="MyContentControl"  Property="ContentTemplate" Value="{StaticResource DropDownTemplate}" />
              </DataTrigger>

         </DataTemplate.Triggers>

      </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

**ViewModel**是大类，但我在这里提取了与我的问题相关的主要部分。在构造函数中，我创建了 MarketConfigurationValue 列表并在 MarketConfigurationLOVs 中填充值以防我设置 HasLov=true 并在 configurationValue 中填充值以防我设置 HasLov=false 并运行应用程序并在调试模式下找到主对象列表包含我正确地说的内容，但在 HasLov=true 的情况下无法显示组合框，在 HasLov=false 的情况下无法显示 textBox ：

```
public class MarketConfigurationValue
    {
        public string ConfigurationName { get; set; }
        public string ConfigurationValue { get; set; }
        public int ConfigurationValueId { get; set; }
        public List<Market_Config_Lov> MarketConfigurationLOVs {get;set;}
        public bool HasLov { get; set; }

    }

public class Market_Config_Lov 
    {
        public virtual string Name { get; set; }
        public virtual int Sequence { get; set; }
    } 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:52:09.843

下面介绍如何实现 INotifyPropertyChanged 接口。这样，当调用 HasLOV 的设置器时，绑定会自行更新。

```
public class MarketConfigurationValue:INotifyPropertyChanged
{
    private bool _hasLOV;
    public bool HasLOV 
    { 
        get {return _hasLOV;} 
        set {_hasLOV = value; OnPropertyChanged("HasLOV");}
    }  
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        VerifyPropertyName(propertyName);

        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            handler(this, e);
        }
    }
} 
```

希望这可以帮助。

====>属性名称是拼写错误，因为类中的属性名为：HasLov，在 XAML 中名为 HasLOV。

# android - 强制关闭 AsyncTask

> ID：12602745
> 
> 赞同：-1
> 
> 时间：2012-09-26T13:22:10.163
> 
> 标签：android, android-asynctask, splash-screen

我试图等到启动 AsyncTask 将从服务器获得结果，以便主要活动将继续，在我的启动屏幕上，我有一些带有加载过程栏的 GUI，等等。

但是当我运行它时，我会强制关闭。这是我的主要活动代码：

```
 lv.setOnItemClickListener(new OnItemClickListener() 
 {
     public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
     new Thread() { public void run() 
     {
         runOnUiThread(new Runnable() {
             public void run() {
                 splash  splash=(tools.splash) new splash(first.this).execute();
                 int waited = 0;
                 while(splash.running && (waited< getResources().getInteger(R.integer.splashTimeOut)))
                 {
                     try {
                         wait(100);
                         } catch (InterruptedException e) {
                             // TODO Auto-generated catch block
                             e.printStackTrace();
                         }
                         if(splash.running) {
                             waited += 100;
                         }
                         // nextActivity=splash.newActivity;
                     }
                     Intent intent = null;
                     try {
                         intent = new Intent(first.this,Class.forName("activities.third"));
                     } catch (ClassNotFoundException e) {
                         // TODD Auto-generated catch block
                         e.printStackTrace();
                     }
                     startActivity(intent);
                 }

              });
          }
      }.start(); 
```

来自原木猫

```
 09-26 13:41:26.862: ERROR/AndroidRuntime(487): java.lang.IllegalMonitorStateException: object not locked by thread before wait()
  09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at java.lang.Object.wait(Native Method)
 09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at java.lang.Object.wait(Object.java:395)
 09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at activities.first$1$1$1.run(first.java:54)
 09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at android.os.Handler.handleCallback(Handler.java:587)
09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at android.os.Handler.dispatchMessage(Handler.java:92)
 09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at android.os.Looper.loop(Looper.java:123)
 09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at android.app.ActivityThread.main(ActivityThread.java:3683)
  09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at java.lang.reflect.Method.invokeNative(Native Method)
 09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at java.lang.reflect.Method.invoke(Method.java:507)
09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-26 13:41:26.862: ERROR/AndroidRuntime(487):     at dalvik.system.NativeStart.main(Native Method) 
```

我认为它需要等待。希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:53:31.727

您需要与您正在调用的对象同步`wait()`。在这种情况下，你应该可以说

```
synchronized(this){
    wait(100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:43:52.573

`runOnUiThread`在 UI 线程上运行。您无权通过调用连续等待（100）来阻止它；

此外，您的代码中没有 Asynctask ......

# php - 类中的匿名函数

> ID：12602753
> 
> 赞同：2
> 
> 时间：2012-09-26T13:22:45.393
> 
> 标签：php

有没有更好的方法在类中调用匿名函数？这是一个简单的示例，可以清楚地说明我的意思。

```
class foo
{
     private $call_back_1 = null;
     private $call_back_2 = null;

     function __construct($func1, $func2)
     {
          $this->call_back_1 = func1;
          $this->call_back_2 = func2;
     }

     function provokeCallBacks()
     {
          //this does not work, and gives an error  
          $this->call_back_1();

          //I would like to avoid this
          $method = $this->call_back_2;
          $method(); 
     }
}

$call1 = function(){ echo "inside call 1"};
$call2 = function(){ echo "inside call 2"};

$test = new foo(call1, call2);

$test->provokeCallBacks(); 
```

*** 更新 1：请忽略任何语法错误，因为我是为演示目的而即时编写的。***

在 foo:provokeCallBacks 中，我试图调用匿名函数，但第一种方法不起作用并给出错误。第二个有效，但我必须使用一个名为“$method”的临时变量来进行调用，这有点愚蠢。

我想知道是否存在调用匿名函数的更好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:27:58.227

```
call_user_func($this->call_back_1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:30:13.143

不，不可能通过`$this`.

另一种选择是；

```
call_user_func($this->call_back_1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:31:41.653

由于 PHP 是松散类型的，它不能像这样`{$this -> callback}()`；您必须将其存储在临时变量中或使用`call_user_func()`其中任何一个。

编辑 - 考虑这样的事情：

```
class Lambdas
{

    protected $double;
    protected $triple;  

    public function __construct($double, $triple)
    {

        $this -> double = $double;
        $this -> triple = $triple;      

    }

    public function __call($name, $arguments)
    {

        if( is_callable($this -> {$name}) ){

            return call_user_func_array($this -> {$name}, $arguments);

        }

    }

}

$lambdas = new Lambdas(
    function($a){ return $a * 2;},
    function($a){ return $a * 3;}
);

echo $lambdas -> double(2); // prints 4
echo $lambdas -> triple(2); // prints 6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T13:34:27.333

肮脏和危险，但你可能会成功使用 eval..

```
class foo
{
  private $call_back_1 = null;
  private $call_back_2 = null;

  function __construct($func1, $func2)
  {
      $this->call_back_1 = func1;
      $this->call_back_2 = func2;
  }

  function provokeCallBacks()
  {
      eval($this->call_back_1);
      eval($this->call_back_2);
  }
}

call1 = 'echo "inside call 1"';
call2 = 'echo "inside call 2"';

$test = foo(call1, call2);

$test->provokeCallBacks(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T13:40:15.010

我知道您的问题已得到解答，但您可以尝试更改您的方法..

```
class Foo {
    private $calls = array();
    function __set($key, $value) {
        $this->calls[$key] = $value;
    }
    function __call($name, $arg) {
        if (array_key_exists($name, $this->calls)) {
            $this->calls[$name]();
        }
    }

    function __all() {
        foreach ( $this->calls as $call ) {
            $call();
        }
    }
}

$test = new Foo();

$test->A = function () {
    echo "inside call 1";
};

$test->B = function () {
    echo "inside call 2";
};

$test->A(); // inside call 1
$test->B(); // inside call 2
$test->__all(); // inside call 1 & inside call 2 
```

# c - 如何将几个字节写入 NAND 中的文件而不会连续丢弃页面？

> ID：12602759
> 
> 赞同：1
> 
> 时间：2012-09-26T13:23:01.447
> 
> 标签：c

我有一个持久性字典（字符串-> 字符串映射），我将其作为日志文件写入 NAND 文件系统。我的二进制格式是：

```
1 byte - key size
<key size> bytes - key without the terminating nul-character
2 bytes - value size and flags
<value size> bytes - value without terminating nul-character 
```

通常，字典中的每次更改我都会写 20 到 100 个字节。但是由于这是在 NAND 上保留的，因此这种设计会导致每次分配一个新页面，从而在每次迭代中将我的可用 NAND 空间减少 2k。

我不能缓存写入，因为我不能丢失这些数据。它是销售终端的运行点，保存交易数据。我的算法有效地写入和调用刷新，所以这不会发生。

现在，是否有一个事实上的或标准的算法来解决这个问题？我查看了目标平台上的断电触发器，但 SDK 建议使用 NAND 作为持久层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:57:36.173

嗯......只需跟踪您在页面中的位置，在写入之前，读取最后一页，将新数据附加到内存中，然后将相同的页面写回。

如果新数据超出页面限制，请从新页面开始。如果新数据不适合写入最后一页的剩余空间，则会发生这种情况。完成后，更新有关上次写入发生位置的信息。

您说您的附加“每次都会分配一个新页面”，我不确定如果您要附加到字节序列，为什么会出现这种情况。

当然，这需要对内存进行页级访问。如果您只有文件级（如 C 的`FILE *`函数）访问，除非您知道您的文件层有些聪明，否则您不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:14:52.427

由于 NAND FLASH 在写入时仅限于页面粒度，所以我不走运。我可以依赖一些外部持久设备或关机例程，但我无法访问任何其他辅助存储器，旧的销售点终端甚至有电容器用于最后的例程，但它们对于交易来说不够可靠数据。

我将不得不忍受 FLASH 的限制。

# java - Java Jackson：将 csv 文件解析为包含对象列表的对象

> ID：12602760
> 
> 赞同：6
> 
> 时间：2012-09-26T13:23:02.160
> 
> 标签：java, csv, jackson

我正在尝试使用 Jackson CsvParser 将 csv 文件解析为一个对象，该对象还包含另一个类的列表。

所以前两列包含需要绑定到父类的数据，之后的数据需要绑定到另一个类。

```
public class Person {
    private String name;
    private String age;
    private List<CarDetails> carDetails;

    //Getters+setters
}

public class CarDetails {
    private String carMake;
    private String carRegistration;

    //Getters+setters
} 
```

要解析的日志如下所示：

```
John Doe, 30, Honda, D32GHF 
```

或者在另一个拥有 2 辆车的用户日志中，它可能看起来像：

```
Jane Doe, 29, Mini, F64RTZ, BMW, T56DFG 
```

将最初的 2 项数据解析到“Person”类是没有问题的。

```
CsvMapper mapper = new CsvMapper();
CsvSchema schema = CsvSchema.builder()
    .addColumn("name")
    .addColumn("age")

for(numberOfCars=2; numberOfCars!=0 ; numberOfCars--)
    schema = schema.rebuild()
        .addColumn("carMake")
        .addColumn("carRegistration")

MappingIterator<Map.Entry> it = mapper
    .reader(Person.class)
    .with(schema)
    .readValues(personLog);
    List<Person> people = new ArrayList<Person>();
    while (it.hasNextValue()) {
        Person person = (Person) it.nextValue();
        people.add(person);
    } 
```

但我不知道如何解析 CarDetails。似乎我必须能够搜索该值，创建一个新的 CarDetails 对象并将其添加到 Person 对象，但我看不到如何提取该信息。

* * *

我的解决方案如下：

```
List<Person> people = new ArrayList<Person>();

MappingIterator<Map<?,?>> it = mapper.reader(schema).withType(Map.class).readValues(personLog);
while(it.hasNextValue()) {
    Person person = new Person();
    CarDetails = new CarDetails();
    Map<?,?> result = it.nextValue();
    person.setName(result.get("name").toString());
    carDetails.setCarMake(result.get("carMake").toString());
    person.addCarDetails(carDetails);
    people.add(person);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:19:16.670

如果您查看[CsvMapper.readerWithSchemaFor](http://fasterxml.github.com/jackson-dataformat-csv/javadoc/2.0.4/com/fasterxml/jackson/dataformat/csv/CsvMapper.html#readerWithSchemaFor%28java.lang.Class%29)的 Javadoc ，它指出：

> 没有 CSV 类型可以映射到数组或集合

# android - 图像边框像素化（Android 应用中的移动页面）

> ID：12602771
> 
> 赞同：3
> 
> 时间：2012-09-26T13:23:28.913
> 
> 标签：android, jquery, html, css

如果我用智能手机或 iPod 浏览我的网站，我的操纵杆如下所示： [1 http://images.devs-on.net/Image/4Qi0Imug2x7gyY6S-Bereich.png](http://images.devs-on.net/Image/4Qi0Imug2x7gyY6S-Bereich.png)

如果我将此站点加载到我的应用程序中，一切看起来都很好，直到我开始拖动棒（jQuery 可拖动）。然后它看起来像这样：

如果我不拖动它看起来不错，但一旦我开始拖动它看起来像这样： [2 http://images.devs-on.net/Image/NZYoP7Vcs04mqn55-Bereich.png](http://images.devs-on.net/Image/NZYoP7Vcs04mqn55-Bereich.png)

如果我用我的移动浏览器访问我的网站没问题。仅当该站点在我的应用程序中时。

棒是图像（img 标签），而外部图像是来自另一个部门的背景图像。

任何想法可能导致这种情况？

/edit 我发现如果我点击屏幕上的任何地方都会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:58:36.937

这是一个调整大小的问题。研究在 Android 应用程序中安全使用图形的方法；）

[http://developer.android.com/reference/android/graphics/package-summary.html](http://developer.android.com/reference/android/graphics/package-summary.html) http://developer.android.com/guide/topics/graphics/2d-graphics.html [http://developer.android。 com/guide/topics/graphics/index.html](http://developer.android.com/guide/topics/graphics/index.html)

祝你好运。

# c++ - 无法在较小的视口内将纹理大小调整为 100%

> ID：12602772
> 
> 赞同：1
> 
> 时间：2012-09-26T13:23:33.753
> 
> 标签：c++, directx

在我的游戏中，我有一个小视口，可以实时渲染游戏，我似乎遇到的问题是我无法调整纹理的大小以修复到视口中，我之前已经完成了任务，但它似乎不起作用像这样。

```
->GetLevelDesc(0, &desc);
D3DXVECTOR2 scale = D3DXVECTOR2(desc.Width, desc.Height);
D3DXMatrixTransformation2D(&matrix, NULL, 0, &scale, NULL, 0, NULL);
->SetTransform(D3DTS_TEXTURE0, &matrix); 
```

此外，如果我使用比例矢量转换精灵，它会 100% 缩放到屏幕，这很奇怪，因为它`desc.Width`也`desc.Height`被`243`渲染到纹理分辨率较小的“渲染目标”。

# function - 将参数批量传递给函数

> ID：12602774
> 
> 赞同：0
> 
> 时间：2012-09-26T13:23:41.223
> 
> 标签：function, batch-file

我正在尝试创建一个简单的批处理脚本，它有一个带有单个参数的过程。根据互联网上的一些资源，我创建了以下示例代码：

```
:logMessage
   @echo on
   echo Hi, %1
   @echo off
goto :eof

call:logMessage "Izomorphius" 
```

但是我没有得到我期望的输出——只打印了“Hi”，没有参数。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:40:23.927

我认为所有批处理函数都需要在文件末尾定义，在任何调用代码之后。

```
call:logMessage "Izomorphius"
goto :eof

:: Start function definitions ---

:logMessage
   @echo on
   echo Hi, %1
   @echo off
   goto :eof 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:30:29.683

这是一个有效的简化版本

```
@echo off
call :logMessage "Izomorphius"
goto :eof

:logMessage
echo Hi, %1 
```

请注意，它实际上会打印 周围的引号`Izomorphius`，但如果您不想要它们，只需将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T16:37:54.060

您的代码只需要调整：

```
goto main                                     & :: Add this line...
:logMessage
   @echo on
   echo Hi, %1
   @echo off
goto :eof

:main                                         & :: ...and this line.
call:logMessage "Izomorphius" 
```

根据我之前的评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T22:47:39.070

这段代码有问题，但这是另一个技巧：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
echo.
set "NAME=Izomorphius"
call :prepend NAME Hi
echo Message: %NAME%
echo.
goto :end

:: Functions
:prepend @varname @value
set %1=%2 !%1!
exit /B 0
:end
pause 
```

# objective-c - 将图像从屏幕保存到我的资产？

> ID：12602778
> 
> 赞同：-1
> 
> 时间：2012-09-26T13:23:58.200
> 
> 标签：objective-c

这可能是一件很难的事情，但我必须将某个时刻出现在屏幕上的内容保存到文件中。但不仅仅是一个文件，我需要将它保存到我的资产文件夹：我的目标是我以后可以在没有以下内容的情况下使用图像：

```
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0]; 
```

**但只是像在我的资产上一样使用它**，只是为了使用：`@"myImage.png"`，`myImage`我已经从我的打印屏幕保存的图像是什么时候。

关于如何做到这一点的任何方向？谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:30:17.373

您的应用程序的主包是应用程序的一部分，并且是只读的。您无法在设备上添加或删除内容。您将不得不将该图像保存到应用程序沙箱中的目录之一，例如`Documents`或`Library/Caches`。

而不是`+[UIImage imagedNamed:]`, 也许[`+[UIImage imageWithContentsOfFile:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006890-CH3-SW12)会为你工作？ 

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:30:46.743

如果我理解正确，您的意思是您想将屏幕上的部分绘图保存在图像中（这很容易），并希望稍后从您的应用程序包中检索它（我想您的意思是，而不是定期资产）。这是无法做到的，因为应用程序包在运行时是只读的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:51:00.260

AFAIK，您无法将其保存到应用程序包。我建议你编写自己的方法来加载像 [UIImage imageNamedCustom:...] 这样的图像。如果此方法首先在资产中搜索图像，如果没有找到尝试从文档或缓存加载，那就太好了。此外，它可能会缓存保存图像的路径。之后，您可以将所有出现的“[UIImage imageNamed：”替换为“[UIImage imageNamedCustom：”和其他类似方法。

# android - 杀死当前活动中的旧活动

> ID：12602783
> 
> 赞同：0
> 
> 时间：2012-09-26T13:24:20.343
> 
> 标签：android, android-activity

我有一个主要活动。当一个按钮（在主要活动上）被按下时，一个 newactivity1 开始并且主要活动是 onPause。例如再次按下 newactivity1 中的按钮时，会启动 newactivity2。但在这种情况下，我想在 newactivity2 启动之前杀死 mainactivity。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:35:31.293

写`android:noHistory="true"` 在我们的玛尼节喜欢

```
<activity android:name=".ClassFileName" android:noHistory="true" android:label="@string/app_name" android:configChanges="keyboardHidden|orientation" /> 
```

这将杀死您的活动，并且当您返回上一个活动时不会出现任何痕迹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:27:38.053

在 newactivity1 中写

```
this.finish();
startnewactivity... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:28:22.797

用于`finish()`关闭活动。你在哪里打电话`startActivity();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:54:57.467

调用那个ActivityforResult：

使用 A`ctivity.finishActivity()`到`finish`由`Activity`开始`startActivityForResult()`。

# sorting - 从 lisp 中的输入流中读取多项式

> ID：12602784
> 
> 赞同：0
> 
> 时间：2012-09-26T13:24:20.040
> 
> 标签：sorting, input, lisp

从列表 pl 中读取多项式（输入格式见下文）并将其作为排序列表返回。

示例：`(ReadPolynomial2 '(99 0 17 200 3 150 8 200 0 0))`应该返回`((99 0) (3 150) (25 200))`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:44:42.397

我不知道你是否还需要它，但这是一个可能的解决方案：

```
(defun ReadPolynomial2 (lst)
  (let ((even-positions (loop for p in (cdr lst) by #'cddr collect p)))
    (loop for p in (remove-duplicates even-positions)
          collect (list (loop for x on lst by #'cddr
                              when (= p (second x))
                              sum (first x)) p)))) 
```

# regex - 按标题将文件内容分成组

> ID：12602787
> 
> 赞同：0
> 
> 时间：2012-09-26T13:24:34.033
> 
> 标签：regex, split, powershell-2.0

我有一个内容如下所示的文件：

```
[Something1Something2]
 - Interesting data 1
 - Interesting data 2

[Something3]
 - Interesting data 1
 - Interesting data 2

[Something4]
 - Interesting data 1
 - Interesting data 2 
```

我想使用溢出或其他一些对我来说未知的命令来获取返回的部分，然后我可以像这样索引：

```
$myStringArray[0]

prints:

 - Interesting data 1
 - Interesting data 2 
```

我试图通过使用正则表达式来实现这一点，但没有运气：

```
"[Somthing1] somedata1 [Something2] somedate2" -split "\[(.*)\]" 
```

我意识到这不是上面的多线，但原理是相同的，仅用于测试。

如果我使用上述文件执行此操作以使用多行进行尝试：

```
$myfile = Get-Content .\test.txt
($myfile -split "\[.*\]") 
```

我得到一个包含 14 个而不是 3 个条目的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:11:08.543

我找到了一个解决方案，但不是一个漂亮的解决方案：

```
Function GetEntriesMatching($filename, $tagMatch)
{
    Write-Host "Filename: $filename"
    Write-Host "Tag: $tagMatch"

    $regex = "\[.*($tagMatch).*\]"
    Write-Host "Regex: $regex"

    $Lines = Get-Content $filename
    $Out = $False
    $returnValue = @()

    ForEach ($Line In $Lines)
    {
        If ($Line -match '\[.*\]') {$Out = $False}
        If ($Out -eq $True) {$returnValue += "<br> $Line </br>"}
        If ($Line -match $regex) {$Out = $True}
    }

    if($returnValue.Count -eq 0)
    {
        $returnValue += "<b>NO ENTRIES FOUND FOR $tagMatch</b>"
    }

    return $returnValue
} 
```

如果有人有更巧妙的方法，我真的很想看到它:)。

亲切的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T23:11:09.507

试试这个正则表达式：

```
(?mi)^\[.*\]{1}\s 
```

要导入文件，请尝试以下操作：

```
$myfile = [io.file]::ReadAllText(".\test.txt") 
```

这会将文件作为单个值导入，而不是 get-content 返回的数组。

从那里你应该能够做到这一点：

```
[regex]::Split($myfile,"(?mi)^\[.*\]{1}\s") 
```

这将不包括拆分中的搜索字符串。

如果你想包含搜索字符串，你需要给我们一个前瞻，像这样：

```
[regex]::Split($myfile,"(?=(?mi)^\[.*\]{1}\s)") 
```

# ruby-on-rails - 从 Rails 3.2.0 更新到 3.2.8 导致未初始化的常量 Addressable

> ID：12602788
> 
> 赞同：1
> 
> 时间：2012-09-26T13:24:37.987
> 
> 标签：ruby-on-rails, ruby

在一个项目中，我被赋予了将所有 gem 更新为稳定的任务。我们使用的是 rails 3.2.0 和其他一些 gem。更新到 3.2.8 版后，所有测试都崩溃了，我要修复它们，最后一个错误是`ActionView::Template::Error: uninitialized constant Addressable`. 我有一个文件

```
module URIHelpers
  class << self
    ...
    def parse_url(url)
      Addressable.URI.heuristic_parse(url)
    end
    ...
  end
end 
```

调用 URIHelpers.parse_url(url) 时出现上述错误。哪里可能出错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:56:23.350

我自己有答案:)我要补充

```
require 'addressable/uri' 
```

在文件的请求下。在更新之前，它需要在依赖 gem 的某个地方，在它出来之后，我需要自己将它添加到 gemfile 并手动要求它。

# ios-simulator - 在雪豹上运行 iPhone 5 模拟器

> ID：12602789
> 
> 赞同：11
> 
> 时间：2012-09-26T13:24:43.313
> 
> 标签：ios-simulator, osx-snow-leopard, iphone-5

我正在使用此[Stack Overflow 帖子中的步骤在我的 Mac 上运行 iOS6 SDK，在 Snow Leopard 上运行 Xcode 4.2。](https://stackoverflow.com/questions/9613565/is-it-possible-to-get-the-ios-5-1-sdk-for-xcode-4-2-on-snow-leopard)

我现在正在尝试让 iPhone 4" 屏幕工作。我已经能够让 iOS 6 显示在 iOS 模拟器中的硬件 > 版本菜单下。当我尝试加载 iOS 6 设备时，我得到了错误：*“模拟应用程序退出”-“单击重新启动以重试”。*然后它给了我一个切换到不同 SDK 的选项。如果我选​​择 iOS6，它会再次崩溃。如果我选​​择 iOS 5，它会正确加载。

我在硬件 > 设备菜单下也没有 iPhone 4" 屏幕选项。

我已将`iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk`文件夹从 Xcode 磁盘映像复制到我的计算机。

我无法将我的计算机升级到 Snow Leopard。

* * *

所以我需要能够：

1.  在 iOS 模拟器中加载 iOS 6
2.  在模拟器中加载 iPhone 4"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:51:25.100

问题是 Mac 上的 Xcode 4.5。

原帖说如何在“Xcode 4.2 on Snow leopard”上运行 ios 5.1sdk。

Xcode 4.5 在雪豹上不可用。

安装 Xcode 4.2 并再次按照步骤操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:04:00.773

据说 Xcode 4.2 是 Snow Leopard 上最后一个支持的版本。所以不，它不会起作用，你必须得到狮子。[我在另一个StackOverflow 帖子](https://stackoverflow.com/questions/12203444/xcode-4-5-with-ios-6-on-snow-leopard)
上找到了答案

> 在这种情况下，您必须在 Lion 下安装 Xcode 4.2 和 4.5。这应该没有问题。

* * *

**别忘了...**

1.  如[堆栈溢出帖子中所述](https://stackoverflow.com/questions/12508357/import-ios-6-sdk-into-xcode-4-2-on-snow-leopard)
    *   “我在 Snow Leopard 上安装了 Xcode 4.2，并在发布 iOS SDK 时导入了 iOS 5.1 SDK”查看另一个[Stack Overflow 帖子](https://stackoverflow.com/questions/9613565/is-it-possible-to-get-the-ios-5-1-sdk-for-xcode-4-2-on-snow-leopard)
    *   使用第二个帖子链接。它工作得很好，只需复制“6.0”而不是“5.1”。
2.  不要忘记您可以只使用可以运行[iOS6的外部 iOS 设备](https://developer.apple.com/devcenter/ios/checklist/)
3.  您可以随时向[developer.apple 技术支持寻求支持](https://developer.apple.com/membercenter/index.action#techSupport)
4.  删除您的模拟器并重新下载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:44:50.027

另一个想法是使用 Virtual Box 并在其中运行 XCode。当然，在虚拟机上运行 OS X 是相当困难的，而且并不完全合法（虽然你有一台 Mac，所以这是合理的）。有兴趣的可以关注这个链接。

[http://www.sysprobs.com/guide-mac-os-x-10-7-lion-on-virtualbox-with-windows-7-and-intel-pc](http://www.sysprobs.com/guide-mac-os-x-10-7-lion-on-virtualbox-with-windows-7-and-intel-pc)

它适用于 Windows 7，但您应该也可以让它在 OS X 上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:08:16.623

我 VMware Fusion 5（也许还有 4，我不记得了）允许 Mac OS X Lion 和 Mountain Lion 在 VM 中运行。因此，您可以安装 VMware Fusion，并使用它来运行 Mountain Lion 的虚拟化实例。由于硬件是虚拟化的，因此您的 Mac 不支持比 Snow Leopard 更新的任何东西都没有关系。

不过，性能可能会很差——我的经验是， VMware Fusion*至少*需要4 GB 的 RAM 才能顺利运行。如果您的 Mac 对于 Lion 和 Moutain Lion 来说太旧了，它可能不会安装这么多的 RAM。

# jakarta-ee - 我们可以在没有的情况下调用 servlet 在 web.xml 条目中

> ID：12602805
> 
> 赞同：8
> 
> 时间：2012-09-26T13:25:29.893
> 
> 标签：jakarta-ee, web-applications, servlets

在我看到的其中一个代码中，没有`<servlet-mapping>`标签，只有它声明如下

```
<servlet>
    <servlet-name>startServlet</servlet-name>
    <servlet-class>com.login.StartupServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

这可以在没有`<servlet-mapping>`和继续工作的情况下工作`<load-on-startup>1</load-on-startup>`吗？

此 servlet 将在服务器启动时加载以连接到数据库并在缓存上执行少量操作。

PS：这是在 Servlet 2.0+ 版本上，没有注释。

谢谢普尼斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T13:28:39.847

您发布的代码定义了您可能称之为“初始化器 Servlet”的东西。它不是从外部世界直接访问（使用 URL），而是由 Servlet 容器启动。

它是有效的，但它不能被客户端访问。它通常用于初始化目的。您可以在不`<servlet-mapping>`使用 Servlets 3.0 注释的情况下访问 servlet。

注意`<load-on-startup>`不包含真/假值（0/1），但它定义了一个整数，它是启动顺序。较高的数字意味着 Servlet 将在较小的数字*之后加载。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:28:56.087

此模式通常用于 Java EE Web 应用程序的初始化。例如，它是`@Singleton`EJB 3.1 中引入的渴望注释的流行解决方法。

# servicestack - 无法使用 PostFile 上传图片

> ID：12602809
> 
> 赞同：1
> 
> 时间：2012-09-26T13:25:38.640
> 
> 标签：servicestack

我正在尝试使用 PostFile 上传图像。作为一个简单的例子，我有以下 DTO：

```
[Route("/Pictures/{Id}", "GET, PUT, DELETE")]
public class Picture
{
    public int Id { get; set; }
}

public class PictureResponse : IHasResponseStatus
{
    public int Id { get; set; }

    #region Implementation of IHasResponseStatus

    public ResponseStatus ResponseStatus { get; set; }

    #endregion
} 
```

我的 GET 工作正常：

```
public override object OnGet(Picture request)
{
    var memoryStream = new MemoryStream();
    PictureRepository.Get(request.Id).Save(memoryStream, ImageFormat.Png);
    return new HttpResult(memoryStream, "image/png");
} 
```

但是我的 PostFile 爆炸了：

```
var imagePathInfo = new FileInfo(@"C:\Users\Mark\Downloads\avatars\symang.jpg");
var serviceClient = new JsonServiceClient("http://localhost:52712/api")
serviceClient.PostFile<PictureResponse>("/Pictures/{0}".Fmt(id), imagePathInfo, MimeTypes.GetMimeType(imagePathInfo.Name)); 
```

这是错误和堆栈跟踪：

```
Server Error in '/' Application.

An existing connection was forcibly closed by the remote host

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host

Source Error: 

Line 32:             var imagePathInfo = new FileInfo(@"C:\Users\Mark\Downloads\avatars\symang.jpg");
Line 33:             var serviceClient = new JsonServiceClient("http://localhost:52712/api");
Line 34:             serviceClient.PostFile<PictureResponse>("/Pictures/{0}".Fmt(id), imagePathInfo, MimeTypes.GetMimeType(imagePathInfo.Name));
Line 35:             RedirectToAction("Index");
Line 36:             return View();

Source File: C:\Users\Mark\Documents\Visual Studio 2010\Projects\Sandbox\UploadFileAttachments\UploadFileAttachments\Controllers\HomeController.cs    Line: 34 

Stack Trace: 

[SocketException (0x2746): An existing connection was forcibly closed by the remote host]
System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) +6210712
System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) +134

[IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.]
System.Net.ConnectStream.Read(Byte[] buffer, Int32 offset, Int32 size) +318
System.Net.HttpWebRequest.MakeMemoryStream(Stream stream) +221

[WebException: The underlying connection was closed: An unexpected error occurred on a receive.]
System.Net.HttpWebRequest.GetResponse() +6115603
ServiceStack.ServiceClient.Web.ServiceClientBase.PostFile(String relativeOrAbsoluteUrl, Stream fileToUpload, String fileName, String mimeType) in C:\src\ServiceStack\src\ServiceStack.Common\ServiceClient.Web\ServiceClientBase.cs:815
ServiceStack.ServiceClient.Web.ServiceClientBase.PostFile(String relativeOrAbsoluteUrl, FileInfo fileToUpload, String mimeType) in C:\src\ServiceStack\src\ServiceStack.Common\ServiceClient.Web\ServiceClientBase.cs:790
UploadFileAttachments.Controllers.HomeController.ChangePicture(Int32 id) in C:\Users\Mark\Documents\Visual Studio 2010\Projects\Sandbox\UploadFileAttachments\UploadFileAttachments\Controllers\HomeController.cs:34
lambda_method(Closure , ControllerBase , Object[] ) +150
System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
System.Web.Mvc.Controller.ExecuteCore() +116
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

我确定我一定误解了如何使用 PostFile。顺便说一句，我从来没有在我的服务上使用我的 OnPost 方法。感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:19:03.127

`PostFile`做一个 HTTP `POST`。
但是您的服务只允许`GET`，`PUT`并且`DELETE`由于您的示例代码第一行中的路线：

```
[Route("/Pictures/{Id}", "GET, PUT, DELETE")] 
```

**解决方案：**

`POST`在您的路线中包括：

```
[Route("/Pictures/{Id}", "GET, PUT, DELETE, POST")] 
```

...或者只是省略 HTTP 动词：

```
[Route("/Pictures/{Id}")] 
```

# webforms - 有没有办法查看 HttpRuntime.Cache？

> ID：12602810
> 
> 赞同：2
> 
> 时间：2012-09-26T13:25:39.253
> 
> 标签：webforms

我有一个 Web 服务，它将经过身份验证的用户令牌存储在 HttpRuntime.Cache 中，以用于所有后续请求。缓存项目的有效期为 24 小时。

其次，我有一个 vb.net 应用程序，它每 15 秒 ping 一次这个 web 服务。它经过一次身份验证，然后将缓存的令牌用于所有后续请求。我的问题是应用程序似乎在随机时间间隔内丢失身份验证，时间间隔小于 24 小时滑动到期。然而，随着它每 15 秒被 ping 一次，身份验证永远不会过期。

我正在寻找一种查看 HttpRuntime.cache 的方法，以尝试确定问题出在 Web 服务安全方法中还是在 vb.net 应用程序中。我可以以某种方式查看 HttpRuntime.cache 吗？

Web 服务是在 Windows Server 2008 上使用 asp.net 2.0 构建的 Web 表单站点的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:35:39.577

我的密钥的名称是未知的，因为它们是系统生成的以用户名作为值的 guid 值。因此，为了查看未知的缓存集合，我使用了一个简单的循环，如下所示。

```
Dim CacheEnum As IDictionaryEnumerator = Cache.GetEnumerator()
While CacheEnum.MoveNext()
    Dim cacheItem As String = Server.HtmlEncode(CacheEnum.Entry.Key.ToString())
    Dim cacheItem2 As String = Server.HtmlEncode(CacheEnum.Entry.Value.ToString())
    Response.Write(cacheItem & ":" & cacheItem2 & "<br />")
End While 
```

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T07:02:48.713

首先，HttpRuntime.Cache 不是存储用户身份验证信息的最佳位置。您应该改为使用 HttpContext.Current.Session 来存储此类数据。从技术上讲，缓存可以按照自己的意愿“弹出”其中的内容（无论何时决定）。

如果您确实需要使用缓存，您可以通过简单地执行以下操作来检查您的项目是否在缓存中：

```
HttpRuntime.Cache["Key"] == null 
```

# android - Deezer Intent - 安卓

> ID：12602811
> 
> 赞同：3
> 
> 时间：2012-09-26T13:25:41.037
> 
> 标签：android, android-intent, deezer

我已经在网上搜索过，但没有找到任何结果。如何让 Deezer 应用程序使用 Android 上的意图播放特定歌曲？（我也想和 Deezer一起做[这个）。](https://stackoverflow.com/questions/7656720/intents-to-launch-song-search-for-user-in-spotify-app)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:34:17.397

只需在“http://www.deezer.com/track/{id}”上启动 ACTION_VIEW 意图。

```
String uri = "http://www.deezer.com/track/" + trackId;
Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
```

# extjs - ExtJS 4网格列错误

> ID：12602814
> 
> 赞同：1
> 
> 时间：2012-09-26T13:25:48.233
> 
> 标签：extjs, extjs4

我开发了一个网站，将公司的一些数据保存在四个选项卡中。该站点从一个包含面板和文本框的选项卡开始。

当我切换到“Kontakte”选项卡时，出现的网格会像[这样正确显示](http://www.pictureupload.de/originals/pictures/260912152422_2_companies_kontakte_tab_correct.JPG)

当我再次切换选项卡（在本例中为“Veranstaltungen”-选项卡）时，新选项卡中的网格显示[不正确](http://www.pictureupload.de/originals/pictures/260912152516_3_companies_veranstaltungen_tab_error.JPG)。

列的大小和数据不正确。如您所见，“Nachname”列显示了两次，但第一列的标题应为“Vorname”。此外，尽管网格的 forcefit-property 设置为“true”，但第一列的宽度似乎不正确。

当我首先切换到“Veranstaltungen”-选项卡，然后切换到“Kontakte”-选项卡时，会发生非常类似的错误。现在“Veranstaltungen”选项卡的网格是正确的，但“Kontakte”选项卡中列的大小和数据不正确。同样，第一列的大小和标题不正确（应该是“Anrede”）。

总而言之，第一个显示的选项卡中的网格是正确的，但第二个显示的选项卡中的网格是不正确的。有谁知道为什么会发生这个错误？

呈现给 div 的面板包含标题和标签小部件。有时会发生其他列未正确显示的情况，因此第一列的配置似乎与问题无关。此外，如果商店为空，则显示的第二个选项卡和网格将正确显示。

所以，最后，你认为问题是什么？

感谢每一个建议，Patrick Kerschbaum

> “Kontakte”-store 和-grid 的代码：

```
var companyContactsData = new Ext.data.Store({
    proxy: new Ext.data.HttpProxy({
        type: 'ajax',
        url: 'detailCompanies_contacts_getData.php?un_id=' + un_id + '',
        reader: {
            type: 'json',
            idProperty: 'ko_vorname'
        },
        writer: new Ext.data.JsonWriter({
            encode: false,
            listful: false,
            writeAllFields: false
        })
    }),

    fields: ['ko_id', 'ko_anrede', 'ko_titel', 'ko_vorname', 'ko_nachname', 'ko_email1', 'ko_telg1', 'funktionen']
});
companyContactsData.load();

var companyContactsGrid = new Ext.grid.GridPanel({
    store: companyContactsData,
    title: 'Kontakte',
    width: 1000,
    padding: 10,
    frame: true,
    autoHeight: true,
    forceFit: true,

    columns: [{
        id: 'ko_id',
        header: 'ko_id',
        dataIndex: 'ko_id',
        hidden: true
    }, {
        id: 'ko_anrede',
        header: 'Anrede',
        dataIndex: 'ko_anrede',
        sortable: true,
        width: 50
    }, {
        id: 'ko_titel',
        header: 'Titel',
        dataIndex: 'ko_titel',
        sortable: true,
        width: 50
    }, {
        id: 'ko_nachname',
        header: 'Nachname',
        dataIndex: 'ko_nachname',
        sortable: true
    }, {
        id: 'ko_vorname',
        header: 'Vorname',
        dataIndex: 'ko_vorname',
        sortable: true
    }, {
        id: 'funktionen',
        header: 'Funktionen',
        dataIndex: 'funktionen',
        sortable: true
    }, {
        id: 'ko_telg1',
        header: 'Telg1',
        dataIndex: 'ko_telg1',
        sortable: true
    }, {
        id: 'ko_email1',
        header: 'Email1',
        dataIndex: 'ko_email1',
        sortable: true
    }, {
        xtype: 'actioncolumn',
        width: 50,
        items: [<?php if($_SESSION['ko_detail']) { ?> {
                icon: 'pics/information.png',
                tooltip: 'Zur Kontakt-Detailansicht wechseln',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    var kontaktid = rec.get('ko_id');
                    var url = "../../manageContacts/detailContacts/detailContacts.php?ko_id=" + kontaktid;
                    top.location.href = url;
                }
            }
            <?php } ?>
        ]
    }],

    style: {
        "vertical-align": "middle",
        "text-align": "left"
    }
}); 
```

* * *

> “Veranstaltungen”-store 和-grid 的代码：

```
var companyEventsData = new Ext.data.Store({
    proxy: new Ext.data.HttpProxy({
        type: 'ajax',
        url: 'detailCompanies_events_getData.php?un_id=' + un_id + '',
        reader: {
            type: 'json',
            idProperty: 'ko_anrede'
        },
        writer: new Ext.data.JsonWriter({
            encode: false,
            listful: false,
            writeAllFields: false
        })
    }),

    fields: ['v_id', 'v_eingabedatum', 'v_name', 'v_teilgenommen', 'v_eingeladen', 'ko_vorname', 'ko_nachname', 'kv_eingeladen', 'kv_teilgenommen', 'kv_bemerkung']
});
companyEventsData.load();

var companyEventsGrid = new Ext.grid.GridPanel({
    store: companyEventsData,
    title: 'Veranstaltungen',
    width: 1000,
    padding: 10,
    frame: true,
    autoHeight: true,
    forceFit: true,

    columns: [{
        id: 'v_id',
        dataIndex: 'v_id',
        hidden: true
    }, {
        id: 'ko_vorname',
        header: 'Vorname',
        dataIndex: 'ko_vorname',
        sortable: true
    }, {
        id: 'ko_nachname',
        header: 'Nachname',
        dataIndex: 'ko_nachname',
        sortable: true
    }, {
        id: 'kv_eingeladen',
        header: 'Eingeladen',
        dataIndex: 'kv_eingeladen',
        sortable: true
    }, {
        id: 'kv_teilgenommen',
        header: 'Teilgenommen',
        dataIndex: 'kv_teilgenommen',
        sortable: true
    }, {
        id: 'kv_bemerkung',
        header: 'Bemerkung',
        dataIndex: 'kv_bemerkung',
        sortable: true
    }, {
        id: 'v_eingabedatum',
        header: 'Datum',
        dataIndex: 'v_eingabedatum',
        sortable: true
    }, {
        id: 'v_name',
        header: 'Name',
        dataIndex: 'v_name',
        sortable: true
    }, {
        id: 'v_teilgenommen',
        header: 'Teilnehmeranzahl',
        dataIndex: 'v_teilgenommen',
        sortable: true
    }, {
        id: 'v_eingeladen',
        header: 'Eingeladene',
        dataIndex: 'v_eingeladen',
        sortable: true
    }],

    style: {
        "vertical-align": "middle",
        "text-align": "left"
    }
}); 
```

* * *

> 标签小部件的代码：

```
var tabs = Ext.createWidget('tabpanel', {
     activeTab: 0,
     width: 1000,
     plain: true,
     defaults: {
         autoScroll: true,
     },
     items: [companyBasicDataPanel, companyContactsGrid, companyClassificationsGrid, companyEventsGrid]
 }); 
```

* * *

> 主面板代码：

```
var detailCompanies_panel = new Ext.Panel({
     renderTo: 'content',
     autoHeight: true,
     bodyBorder: false,
     border: 0,
     cls: 'my-component',
     width: 1000,

     items: [untz1_label, tabs],

     style: {
         "margin-left": "auto",
         "margin-right": "auto"
     }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:37:02.263

我遇到了同样的问题。

原来 id 的声明为 double，因为它们在您的代码中。

除了 from 之外，您永远不应该手动分配 ID `id: Ext.id()`。

# php - 应该返回整数的查询返回布尔值

> ID：12602820
> 
> 赞同：0
> 
> 时间：2012-09-26T13:25:57.027
> 
> 标签：php, mysql

我正在尝试运行此查询：

```
$query="SELECT max(templateid) FROM vtiger_emakertemplates";
$sql_result = mysql_query($query); 
```

它显示的错误是：

> 警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值

它应该给我一个整数值，但它返回一个布尔值。该列`templateid`仅包含整数值。我不明白布尔值的来源。有任何想法吗？

这是完整的代码

```
 $conncity=mysql_connect($dbconfig['db_hostname'],$dbconfig['db_username'],$dbconfig['db_password']);
    mysql_select_db($dbconfig['db_name'],$conncity);

    $query="SELECT max(templateid) FROM vtiger_emakertemplates";
    $sql_result = mysql_query($query);
    $id=mysql_fetch_array($sql_result); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:28:58.977

代替

`$sql_result = mysql_query($query);`

和

`$sql_result = mysql_query($query) or die(mysql_error());`

它会告诉您在查询中出错的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:28:59.003

这可能是由于 $sql_query 返回 false。您应该在对其应用 mysql_fetch_array 之前检查 $sql_result 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:29:43.777

假设你正在做：

```
mysql_fetch_array($sql_result) 
```

该错误意味着它`$sql_result`可能是一个布尔值`false`。这意味着`mysql_query($query)`返回 false，因此您的查询失败。

检查错误`mysql_error()`以查看给出的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:42:52.777

像这样更改您的查询。

```
$query = "SELECT MAX(templateid) as MaxID  FROM vtiger_emakertemplates"; 
```

并像这样获取价值。

```
$sql_result = mysql_query($query);
$row = mysql_fetch_array($sql_result);
echo $row['MaxID']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:51:24.050

在获取数组之前，您应该验证是否收到了良好的结果。

```
$query="SELECT max(templateid) as MaxID FROM vtiger_emakertemplates";
$sql_result = mysql_query($query);
if ($sql_result) {
  $id=mysql_fetch_array($sql_result);
  $maxID = $id[MaxID];
} else $maxID = false;
if (!$maxID) {
   print "There are no templateid's in vtiger_emakertemplates.\n";
} 
```

此外，当我调试 PHP/MySQL 应用程序时，我发现使用*phpMyAdmin*或其他应用程序直接在 MySQL 数据库中测试我的查询很有帮助，因为它提供即时查询语法错误，并允许我快速进行更改以找到正确的查询语法.

# google-maps - 如何获取谷歌地图位置名称？

> ID：12602822
> 
> 赞同：7
> 
> 时间：2012-09-26T13:25:59.553
> 
> 标签：google-maps, google-maps-api-3, geolocation

我正在建立一个需要获取所有谷歌地图位置的网站，从国家名称到最小的村庄。这是api中的任何地方吗？因为它无处可寻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:08:28.053

您需要解析响应以获取该数据，例如，如果您想获取国家，结果是您通过调用反向地理编码获得的结果对象： [https ://developers.google.com/maps/documentation/ javascript/地理编码#ReverseGeocoding](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)

那么获取国家的功能将是：

```
 function getCountry(results) {
         var geocoderAddressComponent,addressComponentTypes,address;
         for (var i in results) {
           geocoderAddressComponent = results[i].address_components;
           for (var j in geocoderAddressComponent) {
             address = geocoderAddressComponent[j];
             addressComponentTypes = geocoderAddressComponent[j].types;
             for (var k in addressComponentTypes) {
               if (addressComponentTypes[k] == 'country') {
                 return address;
               }
             }
           }
         }
        return 'Unknown';
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:34:59.780

如果您需要根据地理坐标（纬度和经度）在 Google Maps API v3 地图上与某个地点相关联的“名称”，请使用[反向地理编码](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)器，它会返回该位置的多个级别的信息。

[文档中的示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse)

请注意，除了不一定与 Google Maps API v3 磁贴相关的事实外，[geonames.org](http://www.geonames.org/)可能具有您需要的信息或限制较少的服务来获取它。

# ruby-on-rails-3 - 在路线上添加“static_content”的rails

> ID：12602828
> 
> 赞同：0
> 
> 时间：2012-09-26T13:26:27.637
> 
> 标签：ruby-on-rails-3, rails-routing

我有在一台机器上完美运行的路线，但在另一台机器上它们失败了，我很难找出问题所在。在失败的机器上，它分别为 get /groups/my 和 groups/ 返回以下错误

```
No route matches {:controller=>"groups/owner/static_content", :topic=>"general"}
No route matches {:controller=>"groups/static_content", :topic=>"general"} 
```

我不知道在哪里

> 静态控制器

和

> ：主题=>“一般”

来自，因为它们没有出现在我的路线文件中的任何地方。基本上我有一条路线

```
namespace :groups , :as => nil do
    root :to => 'groups#index'
    resources :groups, :only => [:show, :new, :create], :path => '' do
      collection do
        get :search
        get 'my' => 'owner/groups#my', :as => :my
      end
      member do
        post :subscribe
      end
      ... other resources within a group
     end
    end 
```

知道我做错了什么或我错过了什么吗？我在 rvm 上使用 rails 3.2.2 和 ruby​​ 1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:59:41.647

通常从视图中调用路由，因此请务必检查视图`action_controller_name_path`是否找不到 Controller::Action！

# bson - bson_ext 在 ubuntu 上失败

> ID：12602829
> 
> 赞同：4
> 
> 时间：2012-09-26T13:26:28.620
> 
> 标签：bson

我已经安装了 pophealth 的所有依赖项：

“ [https://github.com/pophealth/popHealth/wiki/Installation](https://github.com/pophealth/popHealth/wiki/Installation) ”

但是当我运行时，`Bundle Install`我收到以下错误：

```
Gem:Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/usr/bin/ruby1.8 extconf.rb
extconf.rb:1:in 'require': no such file to load -- mkmf (LoadError)
from extconf.rb:1

Gem Files will remain installed in /home/pophealth/.bundler/tmp/3335/gems/bson_ext-1.5.1 for inspection
results logged to /home/pophealth/.bundler/tmp/3335/gems/bson_ext-1.5.1/ext/cbson/gem_make.out

An error occurred while installing bson_ext (1.5.1), and bundler cannot continue.

Make sure that 'gem install bson_ext -v '1.5.1'' succeeds before bundling. 
```

当我运行时，`gem install bson_ext -v '1.5.1'`我收到以下错误

![](../Images/176f5c81a1f0575cce904cad01e7da73.png) ![截屏](../Images/4e0fe6c50aaa70dd5f7ea6f3ed09549b.png)

# c++ - Optimizing for conveyor execution

> ID：12602832
> 
> 赞同：0
> 
> 时间：2012-09-26T13:26:35.067
> 
> 标签：c++, c, cpu, compiler-optimization, hpc

In Conveyor architecture before execution instructions, they are broken down into smaller ones. So they run much faster. But before instruction executed the whole, is not possible to execute the following instruction addressing to the same registers. Is that right, to optimize the order of the instructions that would appeal to the same register(or RAM cell), to these instructions were located as far away from each other as possible? Or no sense in this, because the compiler it self optimizes this way?

For example:

```
int a = 1, b = 2, c = 3;
a *= a;
b *= a;  // stop and waiting for the end of calculating (a)
c *= c; 
```

Optimized:

```
int a = 1, b = 2, c = 3;
a *= a;
c *= c;  // calculating (a), but we don't need this and don't stop
b *= a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:02:28.160

It obviously depends on your compiler and architecture. Modern X86 processors support [out of order execution](http://en.wikipedia.org/wiki/Out_of_order_execution), which means the processor doesn't actually need to execute the instructions in order. Instead it will read a few instructions ahead (actually it isn't even that few) and reorder them for better performance before execution. This means that this optimization is really not necessary for out of order cpus, since the actual execution order isn't dependent on the order of the instructions in the code.

For in order architectures (e.g. Cell) the order of instructions matters. However a properly optimizing compiler is quite likely to be able to do this reordering it self in many cases (that is as long as it can prove, that this won't change the behaviour of the code). The main scenarios where it will likely fail to do so is, if pointers (or `volatile` variables) are involved, since in most cases the compiler can't prove that different pointers don't point to the same variable. Things like `__restrict` can help in that case.

Another point to consider is, that in many cases the latency of things like an integer multiplication will not really have an effect on the runtime, since for many programs the performance is more limited by memory access. In cases where it does make a difference, it might be more useful to think about using simd and/or multithreading to optimize the code, then to think about instruction placement.

In conclusion I would say that this kind of optimization isn't really useful in a compiled language (When writing assembly the situation can be different), since both the cpu and the compiler might change the order anyways and it may not even make a difference. That doesn't mean that there aren't situations where this kind of optimization is useful, but that is really only in the most critical code paths, when it has been proven that the compiler/cpu isn't up to the task.

# avfoundation - AVAssetWriting ，以未压缩格式写入

> ID：12602835
> 
> 赞同：4
> 
> 时间：2012-09-26T13:26:43.137
> 
> 标签：avfoundation, avassetwriter

有人知道如何在 AVFoundation 中使用 AVAssetWriter 将未压缩的帧存储到 mov 中吗？我实际上正在为 ProRes4444 内容使用以下片段：

```
NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecAppleProRes4444, AVVideoCodecKey,
                                   widthNum, AVVideoWidthKey,
                                   heightNum, AVVideoHeightKey,
                                   nil];
assetWriterInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings] retain]; 
```

从 AVAssetWriter 标头中读取，据说使用核心视频常量中的 kCVPixelFormat 常量，我尝试了以下方法：

kCVPixelFormatType_32RGBA,AVVideoCodecKey

但这似乎不起作用。有人对此主题有一些提示吗？

多谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:56:04.450

kCVPixelFormatType_32RGBA 不是编解码器类型，它是像素格式。

[这些](https://developer.apple.com/library/mac/#documentation/CoreMedia/Reference/CMFormatDescription/Reference/reference.html#//apple_ref/doc/c_ref/CMVideoCodecType)是支持的编解码器。我不确定 kCMVideoCodecType_422YpCbCr8 是否是未压缩选项，但 kCMVideoCodecType_Animation 应该可以完成这项工作。它使用无损压缩（类似于压缩文件然后在不损失任何质量的情况下恢复它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:52:50.083

如果您需要非常高质量的视频，您可以将关键帧速率设置为 1 并将比特率设置得非常高。所有帧都将是关键帧，因此您可以根据需要“擦洗”视频。如果有的话，你不会丢失太多信息。另请查看 AVCaptureSessionPresetiFrame960x540 和 AVCaptureSession.h 中的其他内容。这是我提到的那个的描述

```
@constant AVCaptureSessionPresetiFrame960x540
@abstract
    An AVCaptureSession preset producing 960x540 Apple iFrame video and audio content.

@discussion
    Clients may set an AVCaptureSession instance's sessionPreset to AVCaptureSessionPresetiFrame960x540
    to achieve 960x540 quality iFrame H.264 video at ~30 Mbits/sec with AAC audio.  QuickTime
    movies captured in iFrame format are optimal for editing applications. 
```

# objective-c - iOS 6：iPhone 3GS 上的 UUIDString

> ID：12602837
> 
> 赞同：0
> 
> 时间：2012-09-26T13:26:48.770
> 
> 标签：objective-c, ios, ios6, uuid, iphone-3gs

我一直在研究`ASIdentifierManager`框架来获取新`UUIDString`的，标识符应该在 iOS 6 中替换 UDID，并且可以由用户停止或不停止设置。

在模拟器和 iPhone 4S 上一切正常，但在 iPhone 3GS 上（更新了 iOS 6！）我得到的 UUIDString 如下：
**00000000-0000-0000-0000-000000000000**

这就是我得到它的方式：

```
if ([ASIdentifierManager sharedManager])        
    NSLog(@"%@", [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString]); 
```

有谁知道为什么？你遇到过这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:35:23.353

根据这篇文章

[http://techcrunch.com/2012/09/27/source-apples-udid-replacement-for-advertisers-in-ios-6-is-broken/](http://techcrunch.com/2012/09/27/source-apples-udid-replacement-for-advertisers-in-ios-6-is-broken/)

iOS 6 中新的广告标识符存在严重问题。据称，在通过 Wi-Fi 更新到 iOS 6 的设备上，广告标识符仅包含零。

根据那篇文章，通过 iTunes 更新的设备不会出现此问题。

即使这不能解决您的问题，也可能有助于解释它。

# php - 想要获取 p 标签内的内部文本

> ID：12602838
> 
> 赞同：1
> 
> 时间：2012-09-26T13:26:49.383
> 
> 标签：php, simple-html-dom

网站 html 是这样的，我想要使用 curl 的嵌入代码。

概念

```
<div id="postdiscriptiontext">
<p>
<embed src="http://videobb.com/e/swLN6oRlzFby" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="540" height="599"/>
</p>
</div>
I tried like this
 $html = str_get_html($links);
        echo $html->find('div.postdiscriptiontext p')->innertext . '<br>'; 
```

**这是我**收到的错误 通知：尝试在第 96 行的 C:\xampp\htdocs\anicravefinal\viewanimevideo.php 中获取非对象的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:38:02.077

```
$Content = '<div id="postdiscriptiontext">
<p>
<embed src="http://videobb.com/e/swLN6oRlzFby" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="540" height="599"/>
</p>
</div>';
preg_match_all('|<p>(.*?)</p>|',$Content,$Output);
print_r($Output); 
```

如果你想用这个你可以试试

```
$Content = file_get_contents('URL OF PAGE THAT YOU WANT TO GRAB'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:08:43.987

像这样试试

```
 <?php
    $html = '<div id = "postdiscriptiontext">
                <p>
                    <embed src = "http://videobb.com/e/swLN6oRlzFby" type = "application/x-shockwave-flash" allowscriptaccess = "always" allowfullscreen = "true" width = "540" height = "599"/>
                </p>
            </div>';

    $doc = new DOMDocument();
    $doc->loadXML($html);
    $myHtml = $doc->getElementsByTagName("p");
    $myHtml = $myHtml->item(0)->nodeValue;
    ?> 
```

# java - 如何从 Phonegap 插件启动服务？

> ID：12602842
> 
> 赞同：-1
> 
> 时间：2012-09-26T13:26:56.160
> 
> 标签：java, android, cordova, plugins, background-service

我想从 phonegap 插件启动一个 java 服务，这样我就可以为应用程序做一些后台处理。我正在使用 cordova-2.0.0 。现在我找到了一些适用于 cordova-1.8.1 的后台服务插件，但它们确实在 2.0.0 中运行。如果您能帮助我，我将不胜感激。

——阿尤什·什雷斯塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:52:19.637

你肯定需要一个插件来从 phonegap 访问 android 的本机代码。

看看这个网站：[https ://github.com/phonegap/phonegap-plugins/tree/master/Android](https://github.com/phonegap/phonegap-plugins/tree/master/Android)

它充满了插件。可能您在此页面上找到了您的。

不幸的是，phonegap 的开发速度如此之快，以至于插件并不总是跟上。因此，您可以选择在带有 phonegap 的版本中使用“旧”插件，编写自己的插件，或者根据您想要做什么，您可以在应用程序本身启动时启动您的后台服务，或者使用延迟等

编辑：在这里查看如何编写插件的知识。[http://docs.phonegap.com/en/2.0.0/guide_plugin-development_android_index.md.html](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_android_index.md.html)

至于android服务（在后台）有不同的方式。取决于你想做什么。我总是喜欢使用 ScheduledExecutorService [http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)

# javascript - jQuery 动态 DOM 创建性能

> ID：12602856
> 
> 赞同：1
> 
> 时间：2012-09-26T13:27:31.583
> 
> 标签：javascript, jquery, performance, chaining

在 jQuery 中动态创建 HTML 元素时，以下两种方法在性能方面是否存在差异？

```
// First approach
var elem = $('<div/>').attr('id', 'foo').addClass('myClass');

// Second approach
var elem = $('<div id="foo" class="myClass" />'); 
```

此外，一种方法比另一种方法有什么明显的优势，还是只是口味问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:32:13.480

我不认为很多人意识到 jQuery 中最流行和使用最频繁的组件 - 选择器 - 实际上在幕后发生了很多魔法，因此使用了一些资源。您的第一种方法比第二种方法更多地使用选择器。我认为您的第二种方法也更容易阅读并且更清洁。我会坚持那个。
如果您必须修改已经创建的元素，则方法＃1 更适用，但我实际上不会那样创建它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:35:29.650

做了一个快速测试[http://jsfiddle.net/XQv4H/3/](http://jsfiddle.net/XQv4H/3/)并没有出现太大的差异，我的差异可以忽略不计，第一个在大多数运行中都快一点。

我个人发现第一种方式更清洁。更少的字符串解析。而且我发现你在代码中处理的字符串越少，它就越稳定。

并且利用 jQuery 的不同方法将在一定程度上证明您的代码的未来，因为它将能够生成将在任何未来的浏览器中工作的元素，而您的 html 字符串可能并不总是保持兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:39:52.647

问题是关于速度。

“以下两种方法在性能方面有什么区别吗？”

与大多数事情一样，每秒挤出更多操作的可读性消失了。

我更喜欢第二个的可读性，但第一个实际上更快。（在我费心测试的浏览器中）

[http://jsperf.com/jquery-dynamic-dom-creation-performance](http://jsperf.com/jquery-dynamic-dom-creation-performance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:44:15.483

除了在其他答案中讨论的速度（*第一个稍微快一点*），我发现最易读*的一个（和我使用的那个*）是

```
var elem = $('<div/>', {
    'id': 'foo',
    'class': 'myClass'
}); 
```

* * *

但是，如果您的目标是实现最佳性能，则使用`.prop()`而不是`.attr()`

```
var elem = $('<div/>').prop('id', 'foo').addClass('myClass'); 
```

**[http://jsperf.com/jquery-dynamic-dom-creation-performance/2](http://jsperf.com/jquery-dynamic-dom-creation-performance/2)**上的比较****

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:25:05.313

第一种方法更具可读性，但它使用了很多[方法链](http://en.wikipedia.org/wiki/Method_chaining)。链接不是邪恶的，但比第二种方法慢。

第一个实际上创建了一个 jquery 对象，然后在其上调用两个（或更多）方法。但是每次都会创建一个新的 $() 对象并将其返回给调用链元素。

第二种方法创建一个新元素（如果参数是正确的 html 字符串），然后……就是这样。没有其他的。非常便宜。

尝试对这两种方法都设置断点，然后一步一步地跟随调试器。

我向你推荐几篇我之前读过的文章：我喜欢它们。

1.  [jQuery 性能规则](http://www.artzstudio.com/2009/04/jquery-performance-rules/)
2.  [jQuery 和 JavaScript 编码：示例和最佳实践](http://coding.smashingmagazine.com/2008/09/16/jquery-examples-and-best-practices/)**

# ms-access-2007 - 使用 MS Access 2007 将行转换为另一个表中的列

> ID：12602858
> 
> 赞同：0
> 
> 时间：2012-09-26T13:27:34.743
> 
> 标签：ms-access-2007

我需要在 MS Access 2007 中将行转换为从表 A 到表 B 的列。

我们开始吧，下面是 Table01 中的数据，应该转置到另一个表中。

```
Customer_Name   Contacted_Date  Response_Code
Mr. Abc         01-Sep-12   Switched Off
Mr. Abc         02-Sep-12   Ringing
Mr. Abc         03-Sep-12   Call Back
Mr. Abc         04-Sep-12   Agreed
Mr. Def         01-Sep-12   Switched Off
Mr. Def         02-Sep-12   Ringing
Mr. Def         03-Sep-12   Call Back
Mr. Def         04-Sep-12   Agreed
Mrs. Ghi        01-Sep-12   Switched Off
Mrs. Ghi        02-Sep-12   Ringing
Mrs. Ghi        03-Sep-12   Call Back
Mrs. Ghi        04-Sep-12   Agreed
Mr. Jkl         01-Sep-12   Switched Off
Mr. Jkl         02-Sep-12   Ringing
Mr. Jkl         03-Sep-12   Call Back
Mr. Jkl         04-Sep-12   Agreed
Mr. Mno         01-Sep-12   Switched Off
Mr. Mno         02-Sep-12   Ringing
Mr. Mno         03-Sep-12   Call Back
Mr. Mno         04-Sep-12   Agreed
Mrs. Pqr        01-Sep-12   Switched Off
Mrs. Pqr        02-Sep-12   Ringing
Mrs. Pqr        03-Sep-12   Call Back
Mrs. Pqr        04-Sep-12   Agreed 
```

这正是我需要的东西。

```
Customer_Name   01-Sep-12   02-Sep-12   03-Sep-12   04-Sep-12
Mr. Abc         Switched Off    Ringing         Call Back   Agreed
Mr. Def         Switched Off    Ringing         Call Back   Agreed
Mrs. Ghi        Switched Off    Ringing         Call Back   Agreed
Mr. Jkl         Switched Off    Ringing         Call Back   Agreed
Mr. Mno         Switched Off    Ringing         Call Back   Agreed
Mrs. Pq         Switched Off    Ringing         Call Back   Agreed 
```

因此，数据被转置到名为 Table02 的单独表中。

# mysql - 选择语句不返回所有值

> ID：12602867
> 
> 赞同：1
> 
> 时间：2012-09-26T13:27:59.943
> 
> 标签：mysql

这个函数工作得很好，让我失望的是返回的数组包含所有需要的信息，除了 $row[15] 它在表 Orders 中有数据

```
function SelectOrder($orderid)
{
    connect();
    $result = mysql_query("SELECT * FROM `Orders` WHERE `OrderID` =".$orderid." LIMIT 0 , 30");
    $row = mysql_fetch_row($result);
    return $row;
}

print_r($row); 
```

印刷

```
数组（ [0] => 24
[1] => 格雷
[2] => 崔斯特
[3] => 19 第二大道。
[4] => 里士满
[5] => J7V 5R6
[6] => 安大略省
[7] => 加拿大
[8] => grei@email.ca
[9] => (514) 555-5555
[10] => 除雪
[11] => 210
[12] => 32.5
[13] => 23.07
[14] => 200.57
[15] =>
[16] => 123 同一条街
[17] => 1
[18] => 0)

```

当我在 PHPMyAdmin 中使用相同的选择语句时

```
 SELECT * 
 FROM `Orders` 
 WHERE `OrderID` = 24 
 LIMIT 0 , 30 
```

我得到价值 [15] (SNAME = Frank Ditripani)

PHPMyAdmin SQL 结果

```
OrderID-Fname-Lname-Address-City-Pcode-Prov-Country-Email-Phone-Service-Price-Discount-Tax PYMNTAmount-SNAME-SADD-Agreed-PayPalPaid
24-Grei-Tristram-19 2nd Blvd.-Richmond-J7V 5R6-Ontario-Canada-grei@email.ca-(514) 555-5555-Snow Removal-210-32.5-23.07-200.57-Frank Ditripani-123 同一条街-1-0

```

两者`SNAME`和`SADD`是表中完全相同的属性，`varchar(50)`返回`SADD`但不是`SNAME`。

这是我第一次发布一个问题，我通常在这里找到我的答案，但这个问题让我发疯！我有点尴尬，因为答案可能很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:37:11.003

查询可能相同，但数据库是否相同？

检查您是否连接到*同一个*数据库！

我敢打赌，这两个程序的连接参数不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:43:47.447

检查连接字符集 - DB、客户端和连接应该使用相同的字符集。

# javascript - 如何测试 window.print() 是否未被覆盖？

> ID：12602868
> 
> 赞同：0
> 
> 时间：2012-09-26T13:28:02.940
> 
> 标签：javascript, selenium, webdriver, selenium-firefoxdriver

如何使用（JavaScript 和/或）FirefoxDriver 测试该`window.print()`方法是否被覆盖？

可以像这样禁用页面上的所有打印按钮：

```
window.print = function() { alert("Bazinga") } 
```

有了这个正常的“打印”链接，如下面的链接不再起作用：

```
<a onclick="window.print()">....</a> 
```

我需要检查`window.print()`调用是否执行**原始**打印对话框。

也许可以将一些 JavaScript 注入到 FirefoxWebdriver 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:32:59.863

由于 window.print 是本机函数，您可以：

```
if( window.print.toString().indexOf('[native code]') > -1 ) {
 //native
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:52:55.180

我根据 Luca 的回答和 Christoph 的评论创建了一个[小提琴。](http://jsfiddle.net/kKF3S/)即使在 IE6 中，此功能也会检测本机打印对话框。

```
function isNativePrint() {
    var isNative = false;
    try {
        if (window.print.toString().indexOf('[native code]') > -1) isNative = true;
    } catch (e) {
        isNative = true;
    }
    return isNative;
} 
```

# asp.net - 更新文本框上的列表框更改 asp.net

> ID：12602870
> 
> 赞同：1
> 
> 时间：2012-09-26T13:28:05.097
> 
> 标签：asp.net

谁能帮助我如何在asp.net中完成我的问题？我有一个服务器控件文本框和列表框。我想要发生的是，当我在文本框上键入内容时，在按键上，列表框的内容也会更新（实时），并将相应地过滤结果。如果文本框已被清除，列表框中的所有原始值都将返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:31:23.337

使用 JQuery 作为文本框

```
$("#<%=txtboxID.ClientID %>").keydown(function (e) {
    e.preventDefault();
    //your action
}); 
```

# magento - 如何为自定义模块的magento网格中的每一列添加列过滤器

> ID：12602878
> 
> 赞同：0
> 
> 时间：2012-09-26T13:28:43.210
> 
> 标签：magento, grid

我一直在为 magento 后端编写一个自定义模块，我想为每一列添加过滤器

谁能指出我处理此功能的代码在哪里的正确方向？我将假设它是控制器的一部分

感谢您的任何帮助，您可以提供！

我准备了这样的专栏

```
 public function __construct()
{
    parent::__construct();
    $this->setId('main_grid');
$this->setDefaultSort('entity_id');
    $this->setDefaultDir('DESC');
    $this->setSaveParametersInSession(true);
    $this->setUseAjax(true);

}

protected function _prepareCollection()
{

    $model = Mage::getModel('CartAbandoned/tip');
            $collection = $model->getCollection();
        $this->setCollection($collection);
            return parent::_prepareCollection();
}

    $this->addColumn('id', array(
        'header'        => Mage::helper('CartAbandoned')->__('Id'),
        'align'         => 'right',
        'width'         => '50px',
        'type'          => 'number',
        'index'         => 'entity_id',
    ));

    $this->addColumn('E-Mail', array(
        'header'        => Mage::helper('CartAbandoned')->__('EMail'),
        'align'         => 'left',
        'width'         => '150px',
        'index'         => 'customer_email',
        'type'          => 'text',
        'truncate'      => 50,
        'escape'        => true,
   ));

    $this->addColumn('firstName', array(
        'header'        => Mage::helper('CartAbandoned')->__('firstName'),
        'align'         => 'left',
        'index'         => 'customer_firstname',
        'type'          => 'text',
        'escape'        => true,
   ));

    $this->addColumn('lastName', array(
        'header'        => Mage::helper('CartAbandoned')->__('lastName'),
        'align'         => 'left',
        'index'         => 'customer_lastname',
        'type'          => 'text',
        'escape'        => true,
      ));

$this->addColumn('total', array(
        'header'        => Mage::helper('CartAbandoned')->__('Total'),
        'align'         => 'left',
        'index'         => 'base_grand_total',
        'type'          => 'price',
        'escape'        => true,
 ));

$this->addColumn('quan', array(
        'header'        => Mage::helper('CartAbandoned')->__('Quantity'),
        'align'         => 'left',
        'index'         => 'items_qty',
        'type'          => 'number',
        'escape'        => true,
 ));

    $this->addColumn('cartcreatedtime', array(
        'header'        => Mage::helper('CartAbandoned')->__('cartcreatedtime'),
        'align'         => 'left',
        'index'         => 'created_at',
        'type'          => 'datetime',
        'escape'        => true,
 ));

   $this->addColumn('cartabandonedtime', array(
        'header'        => Mage::helper('CartAbandoned')->__('cartabandonedtime'),
        'align'         => 'left',
        'index'         => 'updated_at',
        'type'          => 'datetime',
        'escape'        => true,
));

     $this->addColumn('action',array(
            'header'    => Mage::helper('CartAbandoned')->__('Action'),
            'type'      => 'action',
            'getter'    => 'getId',
            'actions'   => array(
                array(
                    'caption' => Mage::helper('CartAbandoned')->__('View Products'),
                    'url'     => array('base'=>'*/*/edit'),
                    'field'   => 'id'
               )
           ),
           'filter'    => false,
           'sortable'  => false
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:54:39.663

首先通过“extends Mage_Adminhtml_Block_Widget_Grid”这个词搜索项目，你应该找到例如这个类`Mage_Adminhtml_Block_Catalog_Category_Tab_Product`。

基本上你需要关注的是两种方法：

*   `_prepareCollection()`
*   `_prepareColumns()`

**`_prepareCollection`**准备网格使用的集合，Magento 在其上应用过滤器，这些过滤器由您在方法`index`中添加的每一列中的键表示。**`_prepareColumns()`**

**例子**

下面的例子来自我上面粘贴的类；）

```
$this->addColumn('E-Mail', array(
    'header'        => Mage::helper('CartAbandoned')->__('EMail'),
    'align'         => 'left',
    'width'         => '150px',
    'index'         => 'customer_email',
    'type'          => 'text',
    'truncate'      => 50,
    'escape'        => true, 
```

));

在您的集合中应该有一个被调用的字段/列，`customer_email`并且您已经`index`设置为相同的名称，Magento 应该处理休息。

**编辑**

```
protected function _prepareCollection()
{
    $collection = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('sku');

    $this->setCollection($collection);

    return parent::_prepareCollection();
}

protected function _prepareColumns()
{
    $this->addColumn('entity_id', array(
        'header'    => Mage::helper('catalog')->__('ID'),
        'sortable'  => true,
        'width'     => '60',
        'index'     => 'entity_id'
    ));
    $this->addColumn('name', array(
        'header'    => Mage::helper('catalog')->__('Name'),
        'index'     => 'name'
    ));
    $this->addColumn('sku', array(
        'header'    => Mage::helper('catalog')->__('SKU'),
        'width'     => '80',
        'index'     => 'sku'
    ));

    return parent::_prepareColumns();
} 
```

这个例子展示了如何为 3 列准备可过滤的集合：sku、name 和 entity_id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T11:46:29.397

我在 atwix.com 上找到了一种解决方案

```
$this->addColumn('address', array(
            'header'=> Mage::helper('sales')->__('Address'),
            'type'  => 'text',
            'renderer' => 'Atwix_Ordersgrid_Block_Adminhtml_Sales_Order_Renderer_Address',
            'filter_condition_callback' => array($this, '_addressFilter'),
)); 
```

如您所见，我们又增加了一项价值`filter_condition_callback`

我们唯一需要的是添加这个受保护的方法，它允许我们添加过滤：

```
protected function _addressFilter($collection, $column)
{
    if (!$value = $column->getFilter()->getValue()) {
        return $this;
    }

    $this->getCollection()->getSelect()->where(
        "sales_flat_order_address.city like ?
        OR sales_flat_order_address.street like ?
        OR sales_flat_order_address.postcode like ?"
    , "%$value%");

    return $this;
} 
```

您可以在这里找到全文：http: [//www.atwix.com/magento/grid-filter-for-columns/](http://www.atwix.com/magento/grid-filter-for-columns/)

# html - 不是没有办法在固定高度的div内垂直对齐文本吗？

> ID：12602893
> 
> 赞同：2
> 
> 时间：2012-09-26T13:29:33.927
> 
> 标签：html, css

> **可能的重复：**
> [使用 jQuery 在屏幕上居中 DIV](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)

我知道它适用于表格，但现在没有办法自动垂直对齐（在中心）文本？我不敢相信...

我的[代码](http://jsfiddle.net/WzWMs/)：

# HTML

```
<div class="content">
    This is my text
</div>​ 
```

# CSS

```
.content
{
    width:80px;
    height:150px;    
    background-color:#aeaeae;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:31:22.250

添加`display: table-cell; vertical-align: middle;`到您的`div`演示：[小链接](http://jsfiddle.net/glee/AATnH/)。

要使其在 IE7 上运行，您可以使用：[另一个小链接](http://tanalin.com/en/projects/display-table-htc/)。`display: table-*;`它检测您的浏览器何时为 IE6/7，并用实际的 HTML 表格替换元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:38:17.040

这是一个具有多个选项和每个选项的评估的站点。我已经成功地使用了基于表格的表格。

[http://css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:31:36.907

```
.content
{
    width:80px;
    height:150px;    
    background-color:#aeaeae;
    display:table-cell;
    vertical-align:middle;
} 
```

这应该有帮助

# logging - Java 使用 FileHandler 创建三个单独的日志文件，但仅在通过 cron 运行时

> ID：12602895
> 
> 赞同：0
> 
> 时间：2012-04-15T11:43:07.670
> 
> 标签：logging, java, cron

我遇到了很奇怪的问题。

我每 10 分钟运行一个小型 Java 应用程序来完成一些数据库工作。它将其活动记录在一个文件中。这工作得非常好，除非它作为 cron 作业运行，当它莫名其妙地创建 4 个单独的日志文件副本时。a.log，a.log0，a.log1，a.log2。

我知道当文件被锁定时它会这样做，但我想不出为什么会出现这种情况，尤其是为什么它只发生在 cron 上。

它能够将日志信息写入所有四个文件，包括正确的一个，那么为什么要创建额外的三个？

我在应用程序生命结束时关闭 FileHandlers，所以不是这样。设置很简单：

```
 rootLogger = LogManager.getLogManager().getLogger("");

    //remove current handlers
    for (Handler h : rootLogger.getHandlers()){
        rootLogger.removeHandler(h);
    }

    Handler infohandler    = new FileHandler ("/dir/info.log",  true);
    Handler errorhandler   = new FileHandler ("/dir/error.log", true);

    Formatter format = new CustomFormatter();
    infohandler .setFormatter(format); 
    errorhandler.setFormatter(format);

    infohandler .setLevel(Level.INFO);
    errorhandler.setLevel(Level.WARNING);

    rootLogger.addHandler(infohandler);
    rootLogger.addHandler(errorhandler); 
```

和：

```
infohandler.close(); errorhandler.close(); 
```

我现在只调用一次该函数，其中：

```
rootLogger.log(Level.INFO, "Log this"); 
```

cron 任务非常简单：

```
*/10 * * * * root /usr/bin/java -jar /dir/db_clean.jar 
```

有任何想法吗？这让我很难过。

权限都是-rw-r--r--，并归root所有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:45:31.557

这看起来很相关：http: [//developer.classpath.org/doc/java/util/logging/FileHandler-source.html](http://developer.classpath.org/doc/java/util/logging/FileHandler-source.html)

在第一条评论中，最后提到的一件事描述了指定模式的结果，该模式创建了您描述的 3 个文件。也许知道为什么会引导您找到解决方法的答案。

# openoffice-calc - 将字母数字字符串转换为 16 位 GCID

> ID：12602898
> 
> 赞同：0
> 
> 时间：2012-09-26T13:29:44.037
> 
> 标签：openoffice-calc

我正在 OpenOffice Calc 中为 Amazon Seller Central 构建库存提要，但不知道如何将我们的内部产品 ID 转换为 Amazon 所需格式的 GCID。

> 标准产品 ID 必须根据类型具有特定数量的字符：GCID（16 个字母数字字符）、UPC（12 位数字）、EAN（13 位数字）或 GTIN（14 位数字）。

我们的产品 ID 因制造商而异，例如：-

> 123456 AB123456 1234AB

在 ID 仅是数字的情况下，我可以使用前导零格式化单元格，但是如果单元格包含字母，这将不起作用。

我的文件有超过 10,000 种产品，所以我想知道是否有一个公式可以应用于所有单元格以立即将它们转换为 GCID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-18T01:42:10.810

似乎在误解时提出了这个问题，但注意到该示例`123456 AB123456 1234AB`代表三个不同的 ID，并且知道填充到指定长度是一个非常常见的要求（例如，请参阅[String.PadLeft 方法](https://msdn.microsoft.com/en-us/library/92h5dc07(v=vs.110).aspx)），对 OpenOffice 的建议可能对某人，某一天。

约定是用`0`s 填充，但由于某些电子表格会自动将这些从数字前面剥离（如第一个示例），并且数据库倾向于使用一致的格式，我建议使用连字符将填充与示例分开，以帮助识别字母数字代码和强制文本格式：

```
 =REPT(0;15-LEN(A1))&"-"&A1 
```

# ios - 在 iOS6 中进入全屏模式后 MPMoviePlayerController 中断/停止

> ID：12602899
> 
> 赞同：26
> 
> 时间：2012-09-26T13:29:48.233
> 
> 标签：ios, mpmovieplayercontroller, fullscreen, ios6

我有一个`MPMoviewPlayerViewController`嵌入到一个`UIView`对象中。当我在嵌入式模式下启动播放器时，一切正常并按预期工作。如果用户然后点击全屏切换（或者如果我以编程方式更改为全屏使用`setFullscreen:animated`），播放器将进入全屏状态，电影会再播放一秒钟，然后屏幕变黑，只有“*正在加载...* ”消息。

此行为仅在使用 iOS 6（也是 iPad 6.0 模拟器）时出现，在运行 iOS 5 的设备上一切正常。

电影源是​​来自应用程序包的本地文件。

播放并进入全屏后，调试输出如下：

```
2012-09-26 15:24:48.251 [39895:c07] [MPAVController] 自动播放：禁用自动播放暂停
2012-09-26 15:24:48.252 [39895:c07] [MPAVController] 自动播放：禁用自动播放
2012-09-26 15:24:48.262 [39895:c07] [MPAVController] 自动播放：启用自动播放
2012-09-26 15:24:48.265 [39895:c07] [MPAVController] 自动播放：可能跟上或满缓冲区：0
2012-09-26 15:24:48.266 [39895:c07] [MPAVController] 自动播放：跳过自动播放，没有足够的缓冲来跟上。
2012-09-26 15:24:48.267 [39895:c07] [MPAVController] 自动播放：可能跟上或满缓冲区：0
2012-09-26 15:24:48.268 [39895:c07] [MPAVController] 自动播放：跳过自动播放，没有足够的缓冲来跟上。
2012-09-26 15:24:48.276 [39895:c07] [MPAVController] 自动播放：跳过自动播放，禁用（当前项目：0，播放器上：1）
2012-09-26 15:24:48.286 [39895:c07] [MPCloudAssetDownloadController] 为媒体项目 ID 请求优先级：0
2012-09-26 15:24:48.938 [39895:c07] [MPAVController] 自动播放：启用自动播放
2012-09-26 15:24:48.940 [39895:c07] [MPAVController] 自动播放：启用自动播放
2012-09-26 15:24:48.954 [39895:c07] [MPAVController] 自动播放：跳过自动播放，禁用（当前项目：0，播放器上：1）
2012-09-26 15:24:49.006 [39895:c07] [MPAVController] 自动播放：启用自动播放
2012-09-26 15:24:49.012 [39895:c07] [MPAVController] 自动播放：跳过自动播放，禁用（当前项目：0，播放器上：1）

```

有人知道为什么播放器停止工作吗？

**编辑：**[在 github 上](https://github.com/snod/MPMoviePlayerTest) 添加了一个示例项目

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-26T19:34:11.133

您是在`viewWillDisappear:`或中停止视频`viewDidDisappear:`吗？当视频在 iOS 6 上进入全屏模式时，这些方法会被调用，但在任何早期的 iO​​S 版本上都不会调用（Open Radar 已针对此“错误”提交了[一份报告）。](http://openradar.appspot.com/12327997)我在类似的问题上发布了[这个临时解决方案：](https://stackoverflow.com/a/12608955/969967)

在修复错误之前，我的临时解决方案是在和/或中检查玩家的`fullscreen`布尔值。如果它返回，则电影正在进入全屏模式，您应该避免做任何可能打断它的事情。`viewWillDisappear:``viewDidDisappear:``YES`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-23T20:26:29.403

我用不同的方法解决了这个问题。由于问题的主要原因是 iOS 6 调用 viewWillDisappear: 和/或 viewDidDisappear: 方法。我想也许 iOS 也调用了 MPMoviePlayerViewController 的相同方法。所以我为 MPMoviePlayerViewController 创建了一个 Category 并实现了 viewWillDisappear: 和/或 viewDidDisappear: 方法。有趣的是它有效。（顺便说一下，这不是苹果推荐的）

这是代码；

**标头 (MPMoviePlayerViewController_FullscreenFix.h)**

```
#import <MediaPlayer/MediaPlayer.h>

@interface MPMoviePlayerViewController (MPMoviePlayerViewController_FullscreenFix)
- (void)viewDidDisappear:(BOOL)animated;
- (void)viewWillDisappear:(BOOL)animated;
@end 
```

**实现（MPMoviePlayerViewController_FullscreenFix.m）**

```
#import "MPMoviePlayerViewController_FullscreenFix.h"

@implementation MPMoviePlayerViewController (MPMoviePlayerViewController_FullscreenFix)

-(void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
}

@end 
```

现在我的代码在 iOS 6.1.3、5.5.1 和 4.3.5 版本上都可以使用，并且行为完全相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T08:52:17.667

我自己解决了。当我将电影播放器​​作为子视图添加到容器视图时，我不需要使用使用它创建的实际视图控制器，该控制器`MPMoviePlayerViewController`旨在用于以模态方式或在其他一些 vc 层次结构中呈现它。

对于拥有可以作为子视图添加到其他视图的电影播放器​​视图的单一目的，`MPMoviePlayerController`的 view 属性就足够了。

直到 iOS 6 都可以工作，但 iOS 6 在资源管理/生命周期方面似乎有所不同。

示例项目已使用工作代码进行更新。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T03:17:37.580

我遇到了同样的问题，但是从 url 加载视频（在网络上）

以前我：

1.  订阅`MPMoviePlayerPlaybackDidFinishNotification`通知
2.  初始化了一个`MPMoviePlayerViewController`（这个阶段没有内容的url）
3.  通过以下方式呈现`presentMoviePlayerViewControllerAnimated`：
4.  当它出现在屏幕上时，我加载了流式 url（异步）
5.  当 url 返回时，我会在`MPMoviePlayerViewController`'moviePlayer上设置内容 url

正如你所说，`MPMoviePlayerViewController`当用户点击退出时，偶尔会卡住并且不会自行关闭，为了解决这个问题，我改变了我的自动播放顺序，所以流程变成了：

1.  订阅`MPMoviePlayerPlaybackDidFinishNotification`通知
2.  初始化了一个`MPMoviePlayerViewController`（这个阶段没有内容的url）
3.  **将moviePlayer的`shouldAutoplay`布尔值设置为NO**
4.  通过以下方式呈现`presentMoviePlayerViewControllerAnimated`：
5.  当它出现在屏幕上时，我加载了流式 url（异步）
6.  当 url 返回时，我会在`MPMoviePlayerViewController`'moviePlayer上设置内容 url
7.  **将moviePlayer的`shouldAutoplay`布尔值设置为YES**

由于这两个更改，我还没有看到控制器*卡住*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T14:42:23.933

我在 iOS 6 上有类似的东西。

您是否尝试过在全屏后强制播放器播放？例如，通过再次调用`[MPMoviePlayerController play]`- 这部分解决了我遇到的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T21:40:59.583

设置播放器的内容 URL 后检查确切的 URL。它可能包含一些非法字符。

```
 NSLog(@"%@", player.contentURL); 
```

模拟器会删除空格，但设备不会。这就是发生在我身上的事。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-15T19:05:14.153

解决方案是创建一个属性来保留 MPMoviePlayerController 类

```
@property (nonatomic, retain) MPMoviePlayerController *moviePlayerController; 
```

并在您的控制器中使用该属性

```
self.moviePlayerController = [[MPMoviePlayerController alloc] init];

[_viewMediaPlayer addSubview:self.moviePlayerController.view]; 
```

iOS6 中有一个错误，当进入全屏模式时，MPMoviePlayerController 被释放[http://openradar.appspot.com/12327997](http://openradar.appspot.com/12327997)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-27T10:59:53.630

所以对我来说这个解决方案有效：

```
if( !( player.playbackState == MPMoviePlaybackStatePlaying ) ) {
    player.shouldAutoplay = YES;
    [player prepareToPlay];
    [player stop];
    [player play];
} 
```

添加“shouldAutoplay”和“stop”

问候， 伊丽莎

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-27T08:08:34.047

只需在生成 URL 后将 shouldAutoplay 布尔值添加到 YES 它对我有用。

像这样：

```
NSString *path = [[NSBundle mainBundle] pathForResource:videoFileName ofType:@"mp4" inDirectory:nil];
    NSURL *movieURL = [NSURL fileURLWithPath:path];
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] init]; 

    player.contentURL = movieURL;
    player.controlStyle = MPMovieControlStyleNone;    

    player.shouldAutoplay = YES;
    [player prepareToPlay];
    player.fullscreen = YES;

    [player.view setFrame:[[[[UIApplication sharedApplication] delegate] window] frame]];  // player's frame must match parent's

    [[[[UIApplication sharedApplication] delegate] window] addSubview: player.view];

    [player play]; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-23T12:55:53.267

另一种处理方式是使用全屏通知回调：

1) 为电影播放器​​ MPMoviePlayerDidEnterFullscreenNotification 添加通知。2）在播放电影之前，设置一个布尔值，表示电影正在进入全屏。3）在全屏回调以及电影完成回调中将布尔值清除为 NO。4）在您的viewWillDisappear中，检查您的布尔值是否可以查看您的电影是否进入全屏，并根据需要进行处理。

此外，在呈现 MPMoviePlayerViewController 时，在呈现后使用 setFullScreen 函数可能会导致影片在 iOS6 上停止。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-21T04:54:41.157

**我的工作解决方案：**

我遇到了同样的问题，当我尝试播放视频时，它会在一秒钟后立即停止，并带有日志：

```
[MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
[MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1) 
```

我**解决了它在****播放**命令之前放置**停止**命令：

 **```
[playerController stop];
[playerController play]; 
```

现在它完美无缺！**

# android - Android 用字符串数组填充 ListView

> ID：12602904
> 
> 赞同：0
> 
> 时间：2012-09-26T13:30:06.087
> 
> 标签：android, arrays, listview

我有 3`String[] array`

```
DateArray[]={"17/09/2012","18/09/2012","19/09/2012"};

Visit[]={"4","10","2"};

Distance[]={"30","100","45"}; 
```

我想在这样的 ListView 中显示这个数组 我已经制作了 XML 我只想填充这 3 个值 这是一个`ListActivity` ![在此处输入图像描述](../Images/b25c6b15df73ceff37072bc3f1612b9b.png)

我试过

我怎样才能做到这一点

单击我正在使用的 ListView

```
 listView.setAdapter(new ObjAdapter(this, R.layout.claimlistview, items));

           listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

               @Override
               public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

                 Object o = listView.getItemAtPosition(position);

                    TextView t1=(TextView)findViewById(R.id.ClaimDate);

                    if(t1!=null){
                        ClaimListBean mSelected;
                        int idx=position;
                        mSelected=m_adapter.getItem(idx);

                        String Date=mSelected.getDate();

                        //StringTokenizer tokens = new StringTokenizer(Date, "(");
                        //String first = tokens.nextToken();
                        //String second = tokens.nextToken();
                        String Visit=mSelected.getVisit();
                        String Distance=mSelected.getDistance();
                        //String EditedSecond = second.replace(")","");

                    Intent intent=new Intent(DRSTClaimList.this,DRSTClaimDetail.class);
                    intent.putExtra("Date", Date);
                    //intent.putExtra("Date", first);
                    //intent.putExtra("Day", EditedSecond);
                    intent.putExtra("Distance", Distance);
                    intent.putExtra("Visit", Visit);
                    startActivity(intent);
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:42:08.713

您必须`Custom listview`使用`custom adapter`这些链接创建一个将帮助您创建 Listview 的。

1.Android中[ListView使用自定义ListAdapter](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

2.[自定义列表视图](https://stackoverflow.com/questions/10481066/android-multiple-selection-listview-textview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:43:12.607

您需要使用这 3 个值创建对象，例如：

```
public class Obj{
   private String date;
   private String visits;
   private String distance;

   public Obj(String date , String visits, String distance){
      this.date = date;
      this.visits = visits;
      this.distance = distance;
   }
   ... getters and setters stuff...
} 
```

然后你必须扩展 arrayadapter 类

```
public class ObjAdapter extends ArrayAdapter<Obj>{

    private Context context; 
    private ArrayList<Obj> items;

    public ObjAdapter(Context context, int layoutResId, ArrayList<Obj> data) {
        super(context, layoutResd, data);
        this.context = context;
        this.items = data;
    }

   @Override
        public View getView(int position, View convertView, ViewGroup parent) {
                View v = convertView;
                if (v == null) {
                    LayoutInflater vi =                  (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.row, null);
                }
                Obj o = items.get(position);
                if (o != null) {
                        TextView date = (TextView) v.findViewById(R.id.date);
                        TextView visits = (TextView) v.findViewById(R.id.visits);
                        TextView distance = (TextView) v.findViewById(R.id.distance);
                        if (visits != null) {
                              visits.setText("Name: "+o.getVists());                            }
                        if(date != null){
                              date.setText("Status: "+ o.getDate());
                        }
                }
                return v;
        } 
```

最后，您必须在 listView 上调用方法 setListAdapter :)

编辑：在标准活动中是这样的（抱歉有错误）：

```
public void onCreate(Bundle icycle)
{
   super.onCreate(icycle);
   setContentView(R.layout.listactivity);
   ListView listView = (ListView)findViewById(R.id.listview);
   ArrayList<Obj> items = new ArrayList<Obj>();
   items.add(new Obj("date", "visits","   ");
   items.add(new Obj("date", "visits","   "):
   items.add(new Obj("date", "visits","   "):
   listView.setListAdapter(new ObjAdapter(this, R.layout.list_row, items));
} 
```

在此之后，您在列表中获得了 3 个项目。

检查此链接： http: [//www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:40:07.397

您需要为您的列表视图设置一个自定义适配器。首先设置适配器，然后在您的活动中，但作为自己的类，设置自定义适配器

例子：

`R.layout.layout_row`这将使用您的布局设置行项目（替换）

```
listView.setAdapter(new CustomListAdapter(this, R.layout.layout_row, Visit)); 
```

然后添加它并根据需要进行调整

```
private class CustomListAdapter extends ArrayAdapter<String> {

    public CustomListAdapter(Context context, int textViewResourceId,
            String[] objects) {
        super(context, textViewResourceId, objects);
        this.notifyDataSetChanged();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.layout_row,
                parent, false);

        TextView dateText = (TextView) row.findViewById(whatever);
        TextView visitText = (TextView) row.findViewById(whatever);
        TextView distanceText = (TextView) row.findViewById(R.id.whatever);

                    dateText.setText(DateArray[position]);
                    // do the same for the other 2
        return row;
    }
} 
```

应该可以正常工作...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:39:44.540

您可以使用自定义 ArrayAdapter 来实现您想要的。

[在这里](http://developer.android.com/reference/android/widget/ArrayAdapter.html)查看官方文档。

# mongodb - MongoDB 访问错误

> ID：12602915
> 
> 赞同：1
> 
> 时间：2012-09-26T13:30:34.063
> 
> 标签：mongodb

访问 MongoDB 时出现此类错误。有什么线索吗？

```
QueryFailure flag was unauthorized db:monza lock type:-1 client:10.173.78.216 (response was { "$err" : "unauthorized db:monza lock type:-1 client:10.173.78.216", "code" : 10057 }). 
```

# sql - 如果一个表包含很多未使用/未选择的列，它会影响性能吗？

> ID：12602917
> 
> 赞同：3
> 
> 时间：2012-09-26T13:30:40.347
> 
> 标签：sql, performance, postgresql

**背景：** 我有一张叫做汽车的桌子，里面有很多二手车，大约有 100 万行。该表有 170 多列。该表仅在各个列上建立索引。大多数列是布尔值（例如 has_automatic_gearbox 等），其余的是字符串和数字（​​例如颜色和价格）。这些汽车显示在一个视图中，我使用了总共​​ 170 列中的大约 80 列。

**我的问题：** 所以我的问题是，它对性能有影响吗，是我在进行搜索时只选择表中的 80 列，还是另一方面我创建了一个只包含那些 80 列的新表我需要，而不是总共 170 列？所以换句话说，它对性能有影响吗，一个表包含未选择的列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T13:44:21.357

Andomar 在“这取决于”的评论中是正确的。但是，如果您的问题是这样的：

> 表中的列数会影响选择查询吗？

那么答案是**肯定**的。它们是“额外”还是“未使用”是数据库设计的问题，与性能问题没有任何关系。

在所有其他条件相同的情况下，100 列表中的一行将比 10 列表中的一行占用更多空间。因为行会更大，您的服务器将不得不（相对）更努力地在更宽的表中比在更小的表中遍历相同数量的行。

在行占用更多空间的表中，分页之类的事情也会更频繁地发生。

如果您的问题是（我认为这可能更符合您的要求）

> 在所有条件相同的情况下，从具有 170 列的表中提取 80 列的选择查询会比从具有 80 列的表中提取 80 列的查询慢吗？

那么答案应该是**NO**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:37:37.063

此外，您可能还想阅读dba.SE 上[类似问题的答案：](https://dba.stackexchange.com/questions/18864/what-is-retrieved-from-disk-during-a-query)

> ```
> Do the number of columns in a particular table affect the performance
> of a query, when querying on a subset of that table? 
> ```

简而言之：是的，因为非选定列通常与选定列位于相同的磁盘块中，因此无论如何它们都会被读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:37:12.237

您的 1E6 汽车的大部分属性可能取决于某些隐藏因素，例如 {brand,model,make,model_version}。您可以将这些属性压缩到一个单独的表中，并在您的主汽车表中引用该表。在最终情况下，您的主汽车表将仅包含属于汽车模型特定*实例*的属性（例如：{number, price, build_date, buy_date, (maybe) colour}。）

# push - cloudfoundry 多节点推送

> ID：12602921
> 
> 赞同：0
> 
> 时间：2012-09-26T13:30:49.753
> 
> 标签：push, cloud-foundry, vmc

您可以使用单个推送命令在多个节点上创建应用程序实例吗？如果是这样，那它的过程是什么？你会创建多个 DEA 实例吗？

因此，对于这样的配置，“vmc push appname --instances 4”将创建：
REST_ _ _ _ _ _ _ _ _
| | | |           
DEA DEA DEA DEA 
App1 App2 App3 App4

还是必须手动将实例推送到每个 DEA 节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:16:02.063

如果您按照列出的方式运行命令，是的，它基本上会导致您的应用程序在 4 个 DEA 上“立即”启动。您不需要为每个实例运行 vmc push - 事实上，您不能使用 vmc 单独寻址 DEA。

一旦 DEA 运行您的应用程序，您可以通过询问 VCAP 环境让应用程序显示 DEA 正在运行的 IP 地址和端口。

# c# - 罗斯林脚本

> ID：12602922
> 
> 赞同：12
> 
> 时间：2012-09-26T13:30:56.007
> 
> 标签：c#, roslyn

嗨，我想使用 Roslyn 在我的应用程序中编写脚本。但我有新的（九月）版本，我很困惑。我想用一些简单的功能执行文件。例如：

```
public int m(){
      return 6;
} 
```

我发现了一些关于它的文章，例如[acticle](http://visualstudiomagazine.com/articles/2011/11/16/the-roslyn-scripting-api.aspx)。有一些方法可以做到，但在我的版本中，我不`Session.Create()` 想像 IronPython 脚本那样使用它

就像是：

```
var scriptEngine = new SciptEngine.ExecuteFile(fileWithFunction);
dynamic d = getFunction(m); 
```

或者

动态 d = callFunction(m);

有可能还是我必须使用 IronPython 脚本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T03:10:41.743

自撰写本文的原始 CTP 以来，API 没有显着变化。对于您的场景：

```
var scriptEngine = new ScriptEngine();
var session = scriptEngine.CreateSession();
session.AddReference("System");
session.AddReference("System.Core");
session.Execute(@"public int m() { return 6; }");

int six = session.Execute<int>("m()"); 
```

# jsf-2 - 如何更改 h:commandLink 的标准 href="#" 属性？

> ID：12602923
> 
> 赞同：5
> 
> 时间：2012-09-26T13:30:57.367
> 
> 标签：jsf-2, mojarra

我正在维护一个 JSF2 Ajax 应用程序，我们大量使用`h:commandLinks`和`f:ajax`标记所有操作 - 始终只重新呈现需要的内容。

当右键单击链接并选择“在新选项卡中打开链接”等时，这当然会破坏用户的预期行为。

我知道 f:ajax 强制生成`a`元素的 href 属性，`#`并在 onclick 函数中执行所有神奇的发布请求技巧 - 我现在想通过放置一些有意义的内容来为“打开链接...”操作提供后备支持在结果`<a>`标签的 href 属性中链接。

这不会破坏“正常”的 onclick 行为，因为生成的 javascript 总是以完成，`return false;`但允许我使用正常的 GET 请求将我的用户发送到某个页面，以防他们想在新窗口中打开链接。

有没有办法做到这一点？或者有人可以指出我在 JSF 生命周期中的正确方向，我可能需要使用相位侦听器来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:37:51.743

最简单的方法是相应地扩展[`com.sun.faces.renderkit.html_basic.CommandLinkRenderer`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-impl/2.1.0/com/sun/faces/renderkit/html_basic/CommandLinkRenderer.java)和覆盖该[`renderAsActive()`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-impl/2.1.0/com/sun/faces/renderkit/html_basic/CommandLinkRenderer.java#CommandLinkRenderer.renderAsActive%28com.sun.faces.renderkit.html_basic.FacesContext,com.sun.faces.renderkit.html_basic.UIComponent%29)方法。Mojarra 是开源的，只需复制方法并编辑它所说的行[`writer.write("href", "#", "href")`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-impl/2.1.0/com/sun/faces/renderkit/html_basic/CommandLinkRenderer.java#214)。`"#"`根据您的见解替换字符串。

```
public class MyCommandLinkRenderer extends CommandLinkRenderer {

    @Override
    protected void renderAsActive(FacesContext context, UIComponent command) throws IOException {
        // ...
    }

} 
```

要让它运行，请在以下位置注册它`faces-config.xml`：

```
<render-kit>
    <renderer>
        <component-family>javax.faces.Command</component-family>
        <renderer-type>javax.faces.Link</renderer-type>
        <renderer-class>com.example.MyCommandLinkRenderer</renderer-class>
    </renderer>
</render-kit> 
```

请注意，这将您的渲染器与 Mojarra 紧密耦合。要独立于 JSF 实现，您需要创建一个全新的渲染器，而不是扩展 Mojarra 特定的渲染器类。

* * *

**与具体问题无关**，请考虑阅读[何时应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# jquery - 无法获取 json 数据，分类下的那些

> ID：12602927
> 
> 赞同：0
> 
> 时间：2012-09-26T13:31:04.370
> 
> 标签：jquery, json, getjson

让我描述一下情况，有一个 json 数据提供不同航空公司的航班信息，有价格，日期，一切，但我无法以我想要的方式获得所需的信息。因此它来了：

我有另一个关于 json 数据回调的新手问题，到目前为止，我可以在 Yograj Gupta 的帮助下获得来自 json 列表数据的航空公司名称列表，具有这种结构类型：http: [//vteem.net/json.json](http://vteem.net/json.json)，这里是编码：

```
$.getJSON("http://api.anywayanyday.com/api/NewRequest/?Route=2406MOWLON&AD=1&CN=0&CS=E&Partner=testapic&_Serialize=JSON&callback=?", function(data) {
        var code=data.Id;
        $.getJSON("http://api.anywayanyday.com/api/Fares/?R="+code+"&V=Matrix&VB=true&L=ru&_Serialize=JSON&callback=?", function(data) {
            var items = [];
            $.each(data, function(key, val) {
                if(val && (typeof val == 'object' || typeof val == 'array')){
                    if(key == "Airlines"){
                        var airlineNames = [];
                        for(var x in val)
                            airlineNames.push(val[x].Name);
                        items.push(airlineNames.join('<br/>'));
                    }
                }
            });
            $('<div/>', {
                'id': 'airlines',
                html: items.join('')
            }).appendTo('#data');
        });
    }); 
```

我想获得每个航空公司行内的总金额值，另外，是否可以按总金额价格值对它们进行排序？

谢谢大家的帮助，我真的很感激！

**代码更新：**

```
$.getJSON("http://api.anywayanyday.com/api/NewRequest/?Route=2406MOWLON&AD=1&CN=0&CS=E&Partner=testapic&_Serialize=JSON&callback=?", function(data) {
        var code=data.Id;
        $.getJSON("http://api.anywayanyday.com/api/Fares/?R="+code+"&V=Matrix&VB=true&L=ru&_Serialize=JSON&callback=?", function(data) {
            var items = [];
            $.each(data, function(key, val) {
                if(val && (typeof val == 'object' || typeof val == 'array')){
                    if(key == "Airlines"){
                        var airlineNames = [];
                        for(var x in val)
                            airlineNames.push(val[x].Name);
                        items.push(airlineNames.join('<br/>'));

                        $.each(data, function(key, val) {
                            if(val && (typeof val == 'object' || typeof val == 'array')){
                                if(key == "FaresFull"){
                                    var totalAmounts = [];
                                    for(var y in val)
                                        totalAmounts.push(val[y].TotalAmount);
                                    items.push(totalAmounts.join('<br/>'));
                                }
                            }
                        });                     
                    }
                }
            });
            $('<div/>', {
                'id': 'airlines',
                html: items.join('')
            }).appendTo('#data');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:56:47.700

我无法完全理解您将要做什么...但是您的脚本中有一些错误。主要的是：`$.each(data, function(key, val) {`。从此 jsonp 请求传递的数据不是数组。是对象。此对象具有属性：`Airlines`。所以，如果你想迭代 throw all 航空公司，你应该使用 data.Airlines。如果主要任务是打印出所有航空公司名称，则此脚本将起作用：

```
$.getJSON("http://api.anywayanyday.com/api/NewRequest/?Route=2406MOWLON&AD=1&CN=0&CS=E&Partner=testapic&_Serialize=JSON&callback=?", function(data) {
    var code=data.Id;
    $.getJSON("http://api.anywayanyday.com/api/Fares/?R="+code+"&V=Matrix&VB=true&L=ru&_Serialize=JSON&callback=?", function(data) {
        var airlineNames = [];
        $.each(data.Airlines, function() {                  
                airlineNames.push(this.Name);
        });
        $('<div/>', {
            'id': 'airlines',
            html: airlineNames.join(',')
        }).appendTo('#data');
    });
});​ 
```

希望它会帮助你。

**更新：**

没问题）但是您代码中的主要问题是您第二次再次迭代所有 json 数据（循环中的循环）。这不是最好的解决方案。我已经为你写了一些演示。请检查：[DEMO](http://jsfiddle.net/ErJNA/3/)。据我了解您的要求，它应该完成这项工作......来自演示的代码：

```
$.getJSON("http://api.anywayanyday.com/api/NewRequest/?Route=2406MOWLON&AD=1&CN=0&CS=E&Partner=testapic&_Serialize=JSON&callback=?", function(data) {
var code=data.Id;
$.getJSON("http://api.anywayanyday.com/api/Fares/?R="+code+"&V=Matrix&VB=true&L=ru&_Serialize=JSON&callback=?", function(data) {
    var pricesForEachAirline = [];
    $.each(data.Airlines, function() { 
        var item = { name : this.Name, prices : []};            
        for(var y in this.FaresFull)
        {
            item.prices.push(this.FaresFull[y].TotalAmount);
        }
           pricesForEachAirline.push(item);
    });
    $.each(pricesForEachAirline , function(){
        $('#data').append(this.name, this.prices.join(',')).append('</br>')
    }); 
}); 
```

});​</p>

# jquery - jquery ui 滑块计算然后更改 Div 的值

> ID：12602933
> 
> 赞同：1
> 
> 时间：2012-09-26T13:31:33.403
> 
> 标签：jquery, jquery-ui, calculator

我在这个 ui 滑块之后根据当前值更新一个值，所以目前在[http://universitycompare.com](http://universitycompare.com)我在主页上有两个滑块，它们的右侧有值。

我想要做的是根据两个 ucas 点加在一起然后除以 2 来获得一个高于该值的值。

一个快速的例子是：

将最小 Slider 滑动到 240，然后将最大值滑动到 320。总数为 560，然后除以 2 等于 280。

然后会有一些值，如果是 280，它将等于 ABB，但如果是 320，那么它可能等于 AAB。

* * *

这是我为滑块和右侧更改总数所做的 jQuery：

```
// JavaScript Document
jQuery(document).ready(function($) {

    $("#slider").slider({
        max: 420,
        min: 0,
        step: 20,
        change: function(event, ui) {
            $("#s2").html(ui.value);    
            $("#s2")
        }
});

$("#slider2").slider({
        max: 420,
        min: 0,
        step: 20,
        change: function(event, ui) {
            $("#s3").html(ui.value);    
            $("#s3")
        }
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:12:15.083

像这样的东西应该能让你到达那里。

```
jQuery(document).ready(function($) {

    var slider1 = $("#slider").slider({
        max: 420,
        min: 0,
        step: 20,
        change: function(event, ui) {
            $("#s2").html(ui.value);    
            $("#s2")
        },
        stop:Calculate
    });

    var slider2 = $("#slider2").slider({
        max: 420,
        min: 0,
        step: 20,
        change: function(event, ui) {
            $("#s3").html(ui.value);    
            $("#s3")
        },
        stop:Calculate

    });

    var div = $('#s4'); //cache this object in a variable if you'll be using it multiple times
    function Calculate(){
        var val1 = slider1.slider('option', 'value');
        var val2 = slider2.slider('option', 'value');

        var finalVal = (val1 + val2) / 2;
        //update the ui
        if (finalVal === 220) { //replace 220 with whatever you're checking
           //if finalVal does equal 220
           div.text('some text to display');
        }else{
           //if finalVal does not equal 220
           div.text('some other text to display');
        }
    }
}); 
```

# regex - 在 shell 中查找除 *.xml 文件之外的所有文件

> ID：12602936
> 
> 赞同：13
> 
> 时间：2012-09-26T13:31:37.953
> 
> 标签：regex, bash, shell, find

使用 bash，如何在目录结构中查找除 *.xml 文件之外的文件？我只是想用

```
find . -regex .... 
```

正则表达式：

```
'.*^((?!xml).)*$' 
```

但没有预期的结果......

还是有另一种方法来实现这一点，即没有正则表达式匹配？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T13:35:22.860

`find . ! -name "*.xml" -type f`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T13:35:43.570

```
find . -not -name '*.xml' 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T13:52:57.653

比`find`上面的解决方案更草率，它做的工作比它需要的多，但你可以做

```
find . | grep -v '\.xml$' 
```

另外，这是源代码树吗？也许您在树中拥有所有源代码和一些 XML，但您只想获取源代码？如果你使用[ack](http://betterthangrep.com)，你可以这样做：

```
ack -f --noxml 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T15:18:13.890

用 bash：

```
shopt -s extglob globstar nullglob
for f in **/*!(.xml); do 
    [[ -d $f ]] && continue
    # do stuff with $f
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T19:15:43.050

您也可以使用 or-ring 执行此操作，如下所示：

`find . -type f -name "*.xml" -o -type f -print`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-18T15:37:32.450

尝试这样的正则表达式解决方案：

```
find . -regextype posix-extended -not -regex '^.*\.xml$' 
```

# django - Django ORM 过滤函数

> ID：12602940
> 
> 赞同：-1
> 
> 时间：2012-09-26T13:31:52.470
> 
> 标签：django

有没有办法在 django 过滤器函数中使用表达式，如键。

我正在尝试这样做：

```
models.Product.objects.filter("name_cn" = "smth") 
```

并得到一个错误：

```
SyntaxError: keyword can't be an expression 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:37:20.823

如果`name_cn`是变量，则将其放入字典中，并使用[运算符](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)[在字典中传递关键字参数`**`](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)：

```
models.Product.objects.filter(**{name_cn: "smth"}) 
```

如果`"name_cn"`是您要过滤的字段的名称，请尝试：

```
models.Product.objects.filter(name_cn="smth") 
```

# css - Div不想填满身体的其余部分

> ID：12602942
> 
> 赞同：1
> 
> 时间：2012-09-26T13:31:58.017
> 
> 标签：css, html

我想让内容 div 填充页面的其余部分。但它只填满它所拥有的，然后不填满页面的其余部分。基本上，如果内容的高度是视口的 20%，则 div 将填充视口的其余部分而不填充任何内容（不透明度为 80% 的白色背景）。但是如果内容超过视口的高度，它应该包裹到内容中。我有以下代码：

```
<body>
    <div id="page-wrapper">
        <div id="header-wrapper">
            <!--Fixed size header, 180px-->
        </div>
        <div id="content-wrapper"> <!-- Wrapper for the content, this bit should fill the rest of the view port unless content is larger than the view port, to which this div then wraps... -->
            <div id="content-banner"> <!-- A scrolling image banner with photos -->
            </div>
            <div id="content"> <!-- The actual content of the page -->
                Some Mock content
            </div>
        </div>
    </div>
</body>​ 
```

这是我的CSS：

```
html, body {
    height: 100%; 
    color:black;
    margin: 0;
}

body {
    background:black;
    margin:0px;
}

#page-wrapper {
    background:blue;
    display:block;
    margin-top:0px;
    width:900px;
    position:absolute;
    left:50%;
    margin-left:-450px;
    height:100%;
    border:thin solid black;
}

#header-wrapper {
    background:green;
    display:block;
    margin-top:0px;
    width:900px;
    height:180px;
    border-bottom-left-radius:75px;
    box-shadow:0 0 10px #000;
}

#content-wrapper {
    background:white;
    display:inline-block;
    position:relative;
    top:25px;
    width:900px;
    border-top-right-radius:75px;
    overflow:scroll-y;
    box-shadow:0 0 10px #000;
    margin-bottom:-125px;
}

#content-banner {
    background:red;
    display:inline-block;
    position:relative;
    margin:10px 10px 0 10px;
    width:880px;
    height:160px;
    border-top-right-radius:65px;
    overflow:hidden;
}

#content-banner img {
    border-top-right-radius:65px;
    width:880px;
    height:160px;
}

#menu-wrapper {
    background:green;
    display:inline-block;
    position:relative;
    width: 200px;
    margin-left:10px;
}

#content {
    display:inline-block;
    position:relative;
    margin-top:10px;
    line-height:30px;
    vertical-align:top;
}​ 
```

另外，在所有重复的人带着你的链接来到这里之前；）我已经通读并尝试了所有这些问题：

[拉伸（原文如此）div 以填充身体](https://stackoverflow.com/questions/4996456/streching-div-to-fill-body)

[CSS：高度 - 填写 div 的其余部分？](https://stackoverflow.com/questions/3411317/css-height-fill-out-rest-of-div)

[使 BODY DIV 填充可用区域](https://stackoverflow.com/questions/11909683/make-the-body-div-fill-the-available-area)

[让 div 填充浏览器视口的其余部分](https://stackoverflow.com/questions/9034169/make-div-fill-the-rest-of-the-browser-viewport)

有人可以帮助我。为此，我想远离 javascript。

**编辑 1：27/09/2012 08:35 猫**

我添加了一个 jsFiddle 示例来向您展示我的意思。可以在这里查看：http: [//jsfiddle.net/vwKcs/2/](http://jsfiddle.net/vwKcs/2/)我还添加了一些缺失的代码。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:34:15.533

如果您知道标题的高度，有一个非常简单的方法可以实现：使用绝对定位。内容将占据整个 100% 的高度，并且其中的第一个元素有一个 margin-top。在这个空白处，你再次定位你的标题`position: absolute;`

（只是效果所需的代码）

```
#header-wrapper {
    position: absolute;
    height: 180px;
    width: 900px;
    top: 0;
    left: 0;
}

#content-wrapper {
    position: absolute;
    height: 100%;
    width: 900px;
    top: 0;
    left: 0;
}

#content-wrapper>*:first-child {
    margin-top: 180px;
} 
```

但对斯通我不得不说：请发布解决您的问题所需的代码。如果我必须解决布局问题，我对任何图像路径都不感兴趣

# php - sqlserver+php：获取刚刚插入的行 id

> ID：12602945
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:02.497
> 
> 标签：php, sql, sql-server

我试过这样：

```
$result = odbc_exec($connection, 'SELECT id FROM MyTable WHERE id = @@Identity'); 
```

但它给了我

> 语法错误：意外的 T_VARIABLE

**编辑：感谢您的帮助，这是完整的逻辑：**

```
$result = odbc_exec($connection, 'INSERT data into the table;SELECT SCOPE_IDENTITY() AS id;');
$row = odbc_fetch_array($result); //this line gives the error!
$id = $row['id']; 
```

**编辑2：我错过了一个“;” =_=**

无论如何 scope_identity 不起作用：给出

> 此索引处没有可用的元组

在 fetcharray 调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:33:18.210

插入一行后，您可以使用`scope_identity()`. 无需在原始表格中查找：

```
SELECT SCOPE_IDENTIY() 
```

如果该行是在另一个连接上插入的，则可以查询 的最大值`id`：

```
SELECT max(id) FROM MyTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:36:39.013

你为什么不直接说：

```
$result = obdc_exec('INSERT dbo.MyTable(...) VALUES(...); SELECT id = SCOPE_IDENTITY();'); 
```

或者更好的是，将逻辑放入存储过程中，并停止在应用程序代码中隐藏临时 SQL。

**编辑**因为 PHP 很奇怪并且可能将您的 INSERT 视为结果集，您可能需要使用它（请原谅我，但我不是 PHP 专家）：

```
odbc_next_result($result); 
```

你也可以通过说来压制第一个结果：

```
SET NOCOUNT ON; INSERT ...; SELECT id = SCOPE_IDENTITY(); 
```

再说一次，我不知道，我不做 PHP。我仍然认为您应该在存储过程中执行此操作。

# c++ - 在 Metro App 中使用现有的 C/C++ 代码

> ID：12602947
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:05.283
> 
> 标签：c++, linker, microsoft-metro

我想在 Metro App 中使用现有的 C/C++ 代码。我制作了一个“空白应用程序（XAML）”，包括我的头文件等。一切都很好编译，但链接器没有找到我需要初始化我的东西的函数和全局变量。我已经将我的代码移植到了许多平台，如 iOS、Android 和其他没有任何问题的链接器问题。

我认为“空白应用程序（XAML）”项目正在使用托管 C++，这是正确的吗？在托管 C++ 中使用非托管 C/C++ 代码有什么技巧吗？还有什么想法吗？

先感谢您！最佳马里奥

# javascript - 我可以更改 $.fn 的方式吗？函数声明了？

> ID：12602948
> 
> 赞同：1
> 
> 时间：2012-09-26T13:32:09.623
> 
> 标签：javascript, jquery

我有以下代码：

```
$.fn.buildTableOfContent = function () {
    var h2 = this.find('h2');
    if (h2.length > 0) { 
```

我想改变它，所以它不被声明为变量：

```
function $.fn.buildTableOfContent () {
    var h2 = this.find('h2');
    if (h2.length > 0) { 
```

可以像上面那样做吗？我已经为常规函数执行了此操作，但不确定以 $.fn 开头的函数。我说 $.fn 是否正确。将函数添加到 jQuery 命名空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:33:25.683

不，这是不可能的。

从[规范](http://es5.github.com/#x13)：

> FunctionDeclaration：
> 函数标识符（FormalParameterListopt）{FunctionBody}
> 
> FunctionExpression：
> 函数标识符[选择]（FormalParameterListopt）{FunctionBody}

`$.fn.buildTableOfContent`是一个表达式，而不是一个标识符，因此它是无效的语法。

# spring-mvc - 如何使用spring标签库是否需要jar

> ID：12602950
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:10.697
> 
> 标签：spring-mvc

当我在 JSP 中添加标签库时，我得到了这个异常。我正在使用带有spring-security的spring mvc。

我的 JSP：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

     <%@taglib uri="http://www.springframework.org/tags" prefix="spring" %>

    <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

    <c:set var="menuSel" value="MenuName" />
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <style type="text/css">
    @import url('resources/css/iCRL/iCRL.css');
    @import url('resources/css/iConfigure/iConfigure.css');
    @import url('resources/css/iConfigure/improvedDropdown.css');
    </style>
    <title>iCMT| iConfigure</title>
    <script>
    var context = "<c:url value=""/>";

    var include="<c:out value="getText('message.include')"/>;
    var exclude="<c:out value="getText('message.exclude')"/>;
    var itemToMove="<c:out value="getText('message.itemToMove')"/>";
    var confirmMsg="<c:out value="getText('message.confirmMsg')"/>";
    var fileReqrd="<c:out value="getText('message.fileRequired')"/>";   
    var textFile="<c:out value="getText('message.textFile')"/>";
    var compareDates="<c:out value="getText('message.compareDates')"/>";
    var validStartDate="<c:out value="getText('message.validStartDate')"/>";
    var validEndDate="<c:out value="getText('message.validEndDate')"/>";
    var selectFilter="<c:out value="getText('message.selectFilter')"/>";
    var FilterText="<c:out value="getText('message.FilterText')"/>";
    var differentCodeType="<c:out value="getText('message.differentCodeType')"/>";
    var validateAssoc="<c:out value="getText('message.validateAssoc')"/>";
    var NotToSearch="<c:out value="getText('message.NotToSearch')"/>";
    var NotToModify="<c:out value="getText('message.NotToModify')"/>";

     </script>
    </head>
    <body>
        <jsp:include page="../admin/pgHeader.jsp" flush="true">
            <jsp:param name="menuSelected" value="iCRL" />
        </jsp:include>
        <script type="text/javascript" src="resources/js/iConfigure/improvedDropDown.js"></script>
        <script type="text/javascript" src="resources/lib/jquery.Multiselect/js/jquery.multiselect.filter.js"></script>
        <div class="main_content_centered">
            <div class="main_content_outer_wrapper">
                <div class="s-content">
                    <div class="clean"></div>

                    <form action="iconfigure" method="post" name="configureForm"
                           value="iconfigure" id="configureForm" target="_self" enctype="multipart/form-data">
                        <div class="section_w1000">
                            <div class="module-info-container">
                                <div class="module-info">
                                    <div class="module-info-icon icfg-upload_icon"></div>
                                    <div class="module-info-content">
                                        <div class="module-info-title"><c:out value="Create Category"/></div> 
```

添加后`%@taglib uri="http://www.springframework.org/tags" prefix="spring" %>`我收到此错误

> 类型异常报告
> 消息描述服务器遇到一个内部错误（），阻止它完成这个请求。
> 例外
> 
> org.apache.jasper.JasperException: /jsp/iConfigure/pgiConfigure.jsp(90,26) 根据 TLD 或标记文件，标记出的属性值是必需的
> 
> org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40) org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407) org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher. java:236) org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:842) org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1530) org.apache.jasper。 compiler.Node$Nodes.visit(Node.java:2377) org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2427) org.apache.jasper.compiler.Node$Visitor.visit(Node. java:2433) org.apache.jasper.compiler.Node$Root.accept(Node.java:495) org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2377) org.apache.jasper。 compiler.Validator.validateExDirectives(Validator.java:第1776章） org.apache.jasper.compiler.Compiler.generateJava（Compiler.java:211）org.apache.jasper.compiler.Compiler.compile（Compiler.java:360） Compiler.java:340) org.apache.jasper.compiler.Compiler.compile(Compiler.java:327) org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:607) org.apache.jasper.servlet.JspServletWrapper。服务(JspServletWrapper.java:312) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) javax.servlet.http。 HttpServlet.service(HttpServlet.java:847) org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238) org.springframework.web.servlet。view.AbstractView.render(AbstractView.java:250) org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047) org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817) org. springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:第549章、 org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter。doFilterInternal(OpenEntityManagerInViewFilter.java:113) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368) org.springframework。 security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109) org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) org.springframework.security.web.FilterChainProxy$ VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security。 web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter. java:54) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177) org.springframework。 security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter( FilterChainProxy.java:380) org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79) org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) org.springframework.security.web。 FilterChainProxy.doFilter(FilterChainProxy.java:169) org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)doFilter(FilterChainProxy.java:169) org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)doFilter(FilterChainProxy.java:169) org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:49:56.030

这与 Spring MVC 无关。错误消息清楚地指出 ac:out 标记在第 90 行缺少 value 属性。我无法向您显示确切的代码，因为您只发布了 JSP 的前 60 行左右。

# c# - JSON 中的 LINQ 查询输出组和子组

> ID：12602952
> 
> 赞同：2
> 
> 时间：2012-09-26T13:32:13.387
> 
> 标签：c#, asp.net, json, linq, entity-framework

我有一个这样的表（组）：

```
ID       Name           ParentID
1        Group 1        null
2        Group 2        null
3        SubGr 1-1      1
4        SubGr 1-2      1
5        SubGr 2-1      2
6        Group 3        null
7        SubGr 1-2-1    4
..... and so on 
```

我想将其序列化为 JSON，如下所示：

```
[{"id":1,
  "name":"Group 1",
  "children": [
    {
     "id":3,
     "name":"SubGr 1-1",
     "children":null
    },{
     "id":4,
     "name":"SubGr 1-2",
     "children": [
       {
        "id":7,
        "name":"SubGr 1-2-1", 
        "children": null
       }
      ]
    }
   ]
  },
 {"id":2,
  "name":"Group 2",
  "children": [
    {
     "id":5,
     "name":"SubGr 2-1",
     "children":null
    }
   ]
 },
 {"id":6,
  "name": "Group 3",
  "children": null
 }
] 
```

如您所见，您可以有不定的子组。

如何在 LINQ 中进行这样的查询并像上面的示例一样以 JSON 格式输出？

使用 ParentID 将 JSON 输出为单独的元素没有问题，但我需要具有上述结构。

这是我目前正在使用的代码，在尝试了不同的事情之后，但仍然没有运气（这个版本只提供两个级别）：

```
 public ActionResult GetGroups()
    {
        var groupobjs = db.GroupObjs.ToList();

        var items = groupobjs.Where(p => p.ParentID == null).Select(p => new
        {
            id = p.ID,
            name = p.Name,
            children = groupobjs.Where(c => c.ParentID == p.ID).Select(c => new {
                id = c.ID,
                name = c.Name
            })
        });

        return Json(items, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:50:04.387

我正在编写一些类似于@Hunter-974 推荐的代码。

```
public class Group
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int? ParentId { get; set; }
    public List<Group> Subgroups { get; set; }

    public Group()
    {
        this.Subgroups = new List<Group>();
    }
}

class Program
{
    static void Main()
    {
        Group[] groups = new Group[]
        {
            new Group { Id = 1, Name = "Group 1", ParentId = null },
            new Group { Id = 2, Name = "Group 2", ParentId = null },
            new Group { Id = 3, Name = "SubGr 1-1", ParentId = 1 },
            new Group { Id = 4, Name = "SubGr 1-2", ParentId = 1 },
            new Group { Id = 5, Name = "SubGr 2-1", ParentId = 2 },
            new Group { Id = 6, Name = "Group 3", ParentId = null },
            new Group { Id = 7, Name = "SubGr 1-2-1", ParentId = 4 }
        };

        foreach (Group g in groups)
            if (g.ParentId.HasValue)
                groups.Single(group => group.Id == g.ParentId.Value).Subgroups.Add(g);

        var rootgroups = groups.Where(g => g.ParentId == null);

        JavaScriptSerializer js = new JavaScriptSerializer();
        Console.WriteLine(js.Serialize(rootgroups));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:54:40.743

我认为您应该使用递归方法而不是 LINQ 来执行此操作。

1）定义一个代表组的类，具有属性ID（int），属性名称（字符串），属性Children（List），属性Parent（int？，未序列化）和方法Serialize（）（谁为儿童中的每个组调用序列化）

2) 定义一个包含“根”组的列表，以及一个包含所有组的列表。

3) 对于数据表的每一行，创建一个对象组。定义它的所有属性。显然，孩子的名单将是空的。

4）对于每个Group，如果父ID不为null，则将其添加到他的父中。这样，您将填写所有组的子列表。

5）对于每个Group，如果父ID为null，则将该Group添加到Roots列表中。

6）对于Roots列表中的每个Group，调用方法Serialize。

我希望这能帮到您。问我是否需要更多解释或代码而不是它们。

# tomcat - 将 MarvinFramework 添加到 Tomcat7 上的 WebApp

> ID：12602953
> 
> 赞同：2
> 
> 时间：2012-09-26T13:32:17.540
> 
> 标签：tomcat, web-applications, jersey, classloader, marvin-framework

我有一个`Jersey`正在运行的 WebApp，`Tomcat`并且想要集成`MarvinFramework`ImageProcessing。基本上我想减少噪音、灰度和缩放图像以进行进一步处理。

[Marvin 框架](http://marvinproject.sourceforge.net/en/index.html)依赖于自定义插件来实现其特定目的，以及我想要使用的那些插件。但是由于 Framwork 有自己的`ClassLoader`，它在运行时从项目内的绝对位置动态加载插件`JAR`，我很困惑将文件放在哪里或如何配置 WebApp，ClassLoader 能够加载 JAR。我在我的`WEB-INF/lib`-dir 中重新创建了独立应用程序的目录结构，`Deployment Assembly`但没有成功。

我得到一个：

```
java.io.FileNotFoundException: .\marvin\plugins\image\org.marvinproject.image.color.grayScale.jar 
```

当我尝试时：

```
marvinImagePlugin = MarvinPluginLoader.loadImagePlugin("org.marvinproject.image.color.grayScale.jar"); 
```

jar 文件应由部署组件位于：

```
WEB-INF/lib/marvin/plugins/image 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:04:47.487

您可以将库路径设置`MarvinDefinitions.setImagePluginPath(path);`为您选择的路径。在这种情况下，您必须手动将文件放入 JVM，并且它们不会自动部署。

# ajax - 如何创建一个网络应用程序？

> ID：12602954
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:18.117
> 
> 标签：ajax, web-applications

我有个问题。我需要创建一个 Web 应用程序，它应该可以工作并且看起来像一个普通的桌面应用程序，因此可以使用窗口、对话框等，而不是每次网站都刷新，但我不确定我应该使用什么。我对php（一个相当简单的站点）只有一点经验。我想我需要客户端站点上的 ajax 来做到这一点（可能是 jQuery），但是我应该在服务器站点上使用什么以及如何在不刷新站点的情况下加载整个页面？我应该使用 PHP 还是 python 或其他东西？也许有一些框架？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:54:59.283

如果您想要丰富的客户端交互，请考虑使用 MVC /MVVM js 框架：

*   [骨干.js](http://backbonejs.org/)；
*   [余烬.js](http://emberjs.com/)；
*   [淘汰赛.js](http://knockoutjs.com/)；
*   [角.js](http://angularjs.org/)。

每个人都有优缺点，在这里你可以找到一个[聪明的比较资源](http://addyosmani.github.com/todomvc/)。

一旦您下载了引导程序 [css、js、图像]，就不会出现页面重新加载问题，并且应用程序将像桌面应用程序一样运行。

所有数据都从服务器获取并保存到服务器：进一步的请求以 JSON / XML 格式发出，可能采用[RESTful](http://tomayko.com/writings/rest-to-my-wife)方式。您可以通过多种方式设置此类 Web 服务，其中包括：

*   [西纳特拉](http://www.sinatrarb.com/)（红宝石）；
*   [Symfony](http://symfony.com/) (PHP);
*   [Django](https://www.djangoproject.com/)（蟒蛇）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:42:32.460

As I am more familiar with MS technologies I would use ASP.NET MVC, and then on the client side you can use Telerik controls which are good and free. jQuery is also a great option for the client side development. For developing ASP.NET MVC you can use the Visual Studio Express which is free as well.

However, I do not know your specifications. Maybe it would not be good enough for you. Another option that you have is using WPF (MS again), with which you can really develop very rich behavior web applications.

# visual-studio-2010 - Windows phone 7 模拟器和 Visual Studio 2010 附加过程

> ID：12602956
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:21.967
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-7-emulator

打开 Windows Phone Emulator（开始 >> 程序 >> Windows Phone SDK 7.1 >> Windows Phone Emulator）然后尝试在 Visual Studio 2010 中运行 Windows Phone 7 应用程序，这是试图打开新的模拟器，是否有运行该应用程序在打开的模拟器中（或附加调试过程之类的东西）

-编辑：

我的实际问题是当我尝试在模拟器上运行时，它显示“错误：无效或丢失 Rom 图像”，我在网上找到了解决方案为“永久删除 C:\ProgramData\Microsoft\XDE 路径下的 .dess 文件“我试过了，但没有运气，因为没有这样的文件。（但奇怪的是，它曾经正常运行:-p）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:57:37.510

打开 Visual Studio 的一个实例，添加一个 Windows Phone 特定项目，然后运行它。如果成功安装了 Windows Phone SDK，则演示应用程序应在模拟器中正确运行。模拟器由 Visual Studio 自动打开，您不必从安装它的文件夹手动启动它。

# spring - Spring - 在控制器方法中指定模型的实现类

> ID：12602957
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:26.930
> 
> 标签：spring, model-view-controller, model, controller

在大多数情况下，我正在尝试尽可能多地对接口进行编码。但是我遇到了 Spring Controller 方法签名的问题。如果我真的使用模型的接口编写签名，我最终会得到以下异常：

```
BeanInstantiationException: Could not instantiate bean class[PageModel]: Specified class is an interface 
```

当然，我知道它是一个接口，如果我将它更改为实际的实现类，它就可以正常工作。但是没有办法对接口进行编码吗？一个注解或告诉 Spring 要实例化哪个 bean 的东西？顺便说一句，我正在使用注释配置。

```
@RequestMapping("SpecificPageController")
public interface PageController {

    @RequestMapping({"", "/load"})
    ModelAndView load(@ModelAttribute("model") PageModel model);
}

@Controller
public class SpecificPageController implements PageController {

    @Override
    public ModelAndView load(final PageModel model) {
    }
}

public interface PageModel {
    ... getters and setters...
}

public class ModelImpl implements PageModel {
    ... variables, getters, setters...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:19:41.330

您可以使用`@ModelAttribute`控制器方法来获取实现：

```
@ModelAttribute 
public PageModel getModel() {
    return new SpecificPageModel();
} 
```

# javascript - 处理 JavaScript 中的特殊字符

> ID：12602958
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:27.240
> 
> 标签：javascript, asp.net, html-parsing, special-characters

我有一个包含以下代码片段的网页：

```
...
<td nowrap="true" valign="top" width="190px" class="ms-formlabel">
   <h3 class="ms-standardheader">
      <nobr>
         QA Groupe des papiers
         <span class="ms-formvalidation" title="Ce champ est obligatoire." > *</span>
      </nobr>
   </h3>
</td>
...
<td nowrap="true" valign="top" width="190px" class="ms-formlabel">
   <h3 class="ms-standardheader">
      <nobr>
         QA Description métier
         <span class="ms-formvalidation" title="Ce champ est obligatoire." > *</span>
      </nobr>
   </h3>
</td>
<td valign="top" class="ms-formbody">
... 
```

我正在开发一个 JavaScript，它应该隐藏包含字符串`QA Groupe des papiers`和`QA Description métier`.

这是脚本：

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
    jQuery(document).ready(function($) {
       $("h3.ms-standardheader:contains('QA Groupe des papiers')").closest("tr").hide();
       $("h3.ms-standardheader:contains('QA Description métier')").closest("tr").hide();
    });
</script> 
```

该脚本适用于第一行，但不适用于第二行。我知道问题与`é`第二个脚本中的特殊字符有关，但我不知道如何解决问题。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:09:56.987

Unicode 是一个复杂的东西。该字符集有两种不同的书写字符，例如*á*、*é*等。

将其中一个`é`字符替换为另一个字符可能会解决您的问题。（您可以[在 Wikipedia 上阅读更多相关信息](https://en.wikipedia.org/wiki/Unicode_equivalence)。）

如果您仍然有问题，**请检查**JavaScript 文件和网页编码所使用的编码。

网页和 JavaScript 文件都应采用 UTF-8 编码，并将其传达给浏览器。这意味着该网页必须至少具有以下一项

*   指定字符编码的 HTTP 标头；例如`Content-Type: text/html; charset=UTF-8`
*   `meta`指定编码的标签；`<meta charset=UTF-8>`( *HTML5* ) 或`<meta http-equiv=Content-Type content='text/html; charset=UTF-8>`
*   字节[顺序标记](http://dev.w3.org/html5/spec/parsing.html#determining-the-character-encoding)（[不推荐](http://www.w3.org/International/questions/qa-byte-order-mark)）

可以使用以下一种或多种方法将 JavaScript 文件指示为 UTF-8：

*   使用[`charset`](http://www.w3schools.com/tags/att_script_charset.asp)属性
*   使用指定字符编码的 HTTP 标头；例如`Content-Type: text/javascript; charset=UTF-8`

**进一步阅读：**

*   [所有关于 Unicode、UTF8 和字符集](http://coding.smashingmagazine.com/2012/06/06/all-about-unicode-utf8-character-sets/)
*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:52:59.833

可能的解释是未在 HTTP 标头中正确声明 JavaScript 文件的字符编码。可能 JavaScript 文件被解释为 ISO-8859-1 或 Windows-1252 编码，但实际上是 UTF-8 编码，反之亦然，这意味着“é”不是它应该的样子。一个简单的检查方法是`alert('é')`。关于编码问题，请查看 W3C 页面[Character encodings](http://www.w3.org/International/O-charset.en.php)。

# c++ - 为什么从临时初始化的引用成员仍然可读？

> ID：12602959
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:31.627
> 
> 标签：c++, reference, initialization

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)
> [C ++构造函数：初始化常量引用时产生垃圾](https://stackoverflow.com/questions/9138987/c-constructor-garbage-while-initialization-of-const-reference)

这个问题与我之前问过的另一个问题直接相关：[“不透明的引用而不是 PImpl。这可能吗？”](https://stackoverflow.com/questions/10784281/opaque-reference-instead-of-pimpl-is-it-possible) .

假设我们有一个类，它的引用成员是其他类的成员，该成员在构造函数中初始化为临时变量：

```
#include <iostream>

struct B
{
    B(int new_x = 10) : x(new_x) { std::cout << "B constructed\n"; }
    ~B() { std::cout << "B destroyed\n"; }

public:
    int x;
};

struct A
{
    A()
    : b( B(23) )
    {
        std::cout << "A constructed\n";
    }

    void Foo()
    {
        std::cout << "A::Foo()\n";
    }

    ~A()
    {
        std::cout << "A destroyed\n";
    }

public:
    const B& b;
};

int main()
{
    A a;
    a.Foo();
    cout << "x = " << a.b.x << endl;
} 
```

当我运行上面的代码时，输​​出是：

```
B constructed
B destroyed
A constructed
A::Foo()
x = 23
A destroyed 
```

似乎即使临时被破坏所以引用成员应该是无效的，引用成员的整数字段仍然是可读的。为什么它仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:35:30.690

未定义的行为。在您的情况下，临时占用的内存`B`在您引用它之前不会被覆盖。下次运行程序时，任何事情都可能发生。

请注意，表面上相似

```
const B &b = B(); 
```

确实有明确的行为；临时对象的生命周期`B`通过引用绑定来延长。这仅适用于引用变量，不适用于引用成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:36:28.477

如果引用无效，这并不意味着它不可读。这意味着它没有引用有效的对象。它可能引用也可能不引用一些可访问的内存；如果是这样，您可能会或可能不会发现内存包含曾经存在的任何对象的残余物。

总而言之，行为是未定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:38:56.533

已分配给临时的内存`B`现在无效，但尚未用于任何其他用途。这就是为什么您的读取会产生上次存在的值。但是，这是**未定义的行为**。运行 valgrind 应该查明错误的位置。

如果您想知道“怎么可能”，这里有一个[很好的答案](https://stackoverflow.com/a/6445794/335858)，解释了在非常相似的情况下会发生什么。

# java - 是否可以跳过 dbunit 中的验证列名

> ID：12602961
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:41.670
> 
> 标签：java, testing, junit, tdd, dbunit

是否可以跳过 DBUnit 中的列验证？

我更喜欢使用`FlatXmlDataSet`，因为它更容易维护。但是为了比较结果，我必须使用`XmlDataSet`它总是在 table 标记后面的所有列。

该`Assertion`方法`assertEqualsIgnoreCols`可能是一种解决方案，因为它允许我指定要忽略的列，但有很多列，我不想手动添加它们。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:02:49.913

看看[Ignoring some columns in comparison](http://dbunit.sourceforge.net/howto.html#compareignorecolumns)，你也可以看看[How to exclude some table columns at runtime?](http://dbunit.sourceforge.net/faq.html#columnfilter)

# c# - 如何在 WPF 中获取 UIElement 的左、上、右、下点？

> ID：12602964
> 
> 赞同：0
> 
> 时间：2012-09-26T13:32:54.257
> 
> 标签：c#, wpf, panel, uielement

我想找到`Left,Top,Right,Bottom`一个`UIElement`. 我试过但失败了，没有结果。

这里的任何人都知道如何获得这些吗？

实际上，我正在 WPF 中创建一个自定义面板。

我不想从 Canvas 继承。

```
Size elemSize = this.ElementBeingDragged.DesiredSize;
// Get the element's offsets from the four sides of the Panel.
Vector v= VisualTreeHelper.GetOffset(this.ElementBeingDragged);
double left = v.X;
double right = v.X + elemSize.Width;
double top = v.Y;
double bottom = v.Y+elemSize.Height; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:41:37.530

Try

```
Point position = ElementBeingDragged.TranslatePoint(new Point(0, 0), UIElementRelativeTo); 
```

e.g. getting Point relative to containing Window:

```
Point position = ElementBeingDragged.TranslatePoint(new Point(0, 0), Window.GetWindow(ElementBeingDragged)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:36:47.443

您可以尝试使用此代码 - 基于`TransformToAncestor`

```
private Point GetPosition(Visual item) 
{
   var transformToAncestor = item.TransformToAncestor(MyForm);

   var position = transformToAncestor.Transform(new Point(0, 0));

   return position;
} 
```

# android - 外部管理登录脚本？

> ID：12602970
> 
> 赞同：2
> 
> 时间：2012-09-26T13:33:09.940
> 
> 标签：android, joomla, joomla2.5, joomla-component

我真的需要你的帮助。我是初级 Joomla！开发人员和初级 Android 开发人员。我目前正在为 Joomla 构建一个 Android 应用程序！网站管理。那么，我在哪里需要帮助？

我使用以下代码成功地将某些用户登录到前端：

```
 // Function for user login
    // return : JSON array (login : true/false; user_id : if user is loged in)
    public function login() {
        $post = JFactory::getApplication()->input;
        $result = array();
        $username = $post->get('username');
        $password = $post->get('password');

        $credentials = array("username" => $username, "password" => $password);

        $app = JFactory::getApplication('site');
        $result['login'] = $app->login($credentials);

        if($result['login']) {
            $result['user_id'] = JUserHelper::getUserId($username);
        }

        CJoomDroidHelper::postResult($result);
    } 
```

我制作了名为 CJoomDroid 的组件，它是一个简单的 Web 服务，每次调用都有 JSON 响应。

例如，当我输入：

[http://some.joomla.website/index.php?option=com_cjoomdroid&view=authetication&task=login&username=user&password=pass&format=raw](http://some.joomla.website/index.php?option=com_cjoomdroid&view=authetication&task=login&username=user&password=pass&format=raw)

，我设法让用户登录到前端面板。所以那里没有问题，但是如果我想使用此代码以相同的用户登录管理面板：

```
 // Function for user login
    // return : JSON array (login : true/false; user_id : if user is loged in)
    public function login() {
        $post = JFactory::getApplication()->input;
        $result = array();
        $username = $post->get('username');
        $password = $post->get('password');

        $credentials = array("username" => $username, "password" => $password);

        $app = JFactory::getApplication('admin');
        $result['login'] = $app->login($credentials);

        if($result['login']) {
            $result['user_id'] = JUserHelper::getUserId($username);
        }

        CJoomDroidHelper::postResult($result);
    } 
```

在这个链接上：

[http://some.joomla.website/administration/index.php?option=com_cjoomdroid&view=authetication&task=login&username=user&password=pass&format=raw](http://some.joomla.website/administration/index.php?option=com_cjoomdroid&view=authetication&task=login&username=user&password=pass&format=raw)

，我收到错误。有没有办法以这种方式登录管理面板？

谢谢！

错误类似于“您的会话已过期；请重新登录..”等... Android 应用正在调用： HttpResponse response = httpclient.execute(new HttpGet(url.toString())); ，并且响应应该是 JSON 对象，例如：

```
{"login":true} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:30:12.090

自动登录 Joomla 可能非常棘手。
你应该看看[这个](https://groups.google.com/d/msg/frameworkonframework/0elZG8-CMYs/tLQoBHuh-sYJ)关于谷歌群组的帖子。
有一个名为 FrameworkOnFramework 的库增强了 Joomla 的功能并允许您自动登录（通过 CLI 或使用简单的调用），提供了非常好的保护。

# android - 多点触控 两指轻敲

> ID：12602973
> 
> 赞同：4
> 
> 时间：2012-09-26T13:33:22.740
> 
> 标签：android, multi-touch

我必须实施`two fingers tap.`

例如，我有一个包含多个项目的 listView，它已经为每一行和触摸监听器提供了一个点击监听器。现在，如果用户将两根手指放在一行上，我必须做一些事情。

我怎样才能做到这一点？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:51:53.787

我相信只有[手势 API](http://developer.android.com/reference/android/gesture/package-summary.html)只支持单点触控。

您基本上必须覆盖` [onTouchEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)，并使用 e.getPointerCount() 并检查 ACTION_POINTER_DOWN 和 ACTION_POINTER_UP 之间的时间。您可能还会想到两个触摸实际上不是同时出现或同时离开屏幕的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:47:51.570

试试这个

[安卓多点触控支持](https://stackoverflow.com/questions/2679473/android-multi-touch-support)

或者

[http://www.rbgrn.net/content/367-source-code-to-multitouch-visible-test](http://www.rbgrn.net/content/367-source-code-to-multitouch-visible-test)

[android imageView：设置拖动和捏缩放参数](https://stackoverflow.com/questions/4227451/android-imageview-setting-drag-and-pinch-zoom-parameters)

这可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-26T13:49:56.190

不知道你说的两根手指敲击是什么意思。如果您的意思是双击（一根手指，2 次点击），我建议这样做：

[http://mobile.tutsplus.com/tutorials/android/android-gesture/](http://mobile.tutsplus.com/tutorials/android/android-gesture/)

但是，如果您指的是 2 个不同的手指敲击一次，则不建议用 2 个手指敲击一次，因为它违反了 Android 设计准则。如果有的话，建议长按，这可以很容易地实现覆盖 onLongClick() 方法。

但如果你真的不想听我的话，因为你认为我很愚蠢。您基本上需要实现自己的多点触控手势。这是一个例子：

[http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-2-building-the-touch-example/1763](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-2-building-the-touch-example/1763)

仅供参考，请注意您要支持的 android 版本。

# html - 当该行溢出时，IE7 会显示表格中的一些单元格内容

> ID：12602975
> 
> 赞同：0
> 
> 时间：2012-09-26T13:33:27.517
> 
> 标签：html, css, internet-explorer-7

我有一个最奇怪的问题，我无法找到解决方案。我有一个表格，其中一个单元格的内容包含在一个相对定位的 div 元素中（基本上我在一个单元格中显示一个“进度条”，所以它是一个内部有另一个 div 的 div （将其宽度扩展到 %完成），以及显示值的跨度）。

该表位于一个 div 内，其溢出-y 设置为自动，最大高度为 400 像素。

在 FF、Chrome 以及 IE8 和 9 中，它看起来/工作得很好，但在 IE7 中，带有这些进度条 div 的单元格继续显示它们的内容，并且永远不会随着表格的其余内容滚动。

如果您在 IE7 中查看此 JSFiddle [http://jsfiddle.net/ujV4M/1/](http://jsfiddle.net/ujV4M/1/)，则显示了我正在谈论的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:45:18.063

编辑：添加位置：相对于包含表格的元素

我删除了相对位置，因为我知道 IE7 会导致与非静态定位的元素有关的可滚动内容区域出现问题，并且我在文本中添加了 margin-left：

[http://jsfiddle.net/3H6eG/](http://jsfiddle.net/3H6eG/)

显然，我的解决方案避免了问题而不是解决了问题，但看起来它应该可以正常工作。或者您是否出于特定原因需要相对定位？

亚当

# jquery - 在使用jQuery滚动期间隐藏表格上的特定行时发出警报消息？

> ID：12602977
> 
> 赞同：0
> 
> 时间：2012-09-26T13:33:29.860
> 
> 标签：jquery, asp.net, jquery-ui

我正在开发一个示例应用程序。在这个应用程序中，我拖放数据库表。如果该表在另一个表上有任何主链接和外部链接，则意味着自动生成指向该特定表的链接。

我有一个问题，这意味着表有，`overflow:auto`所以 div 有滚动条。当我滚动时，意味着链接将位于表单的顶部。如何阻止它？

我的示例代码如下

```
$("#tbl" + $(ui.draggable).attr('id') + " tr").droppable({
    drop: function (event, ui) {

        var Source = $(ui.draggable).attr('id').substring(0, $(ui.draggable).attr('id').length - 1);

        var Target = $(this).attr('id').substring(0, $(this).attr('id').length - 1);

        if (Source.substr(0, 3) != 'div' && Target.substr(0, 3) != 'div' && Source != Target) {
            if (Source.substr(0, 2) == 'tr' && Target.substr(0, 2) == 'tr') {
                var connection = jsPlumb.connect({
                    connector: ["Flowchart", { stub: 20}],
                    source: $(ui.draggable),
                    target: $(this),
                    anchor: ["TopRight", "RightMiddle", "LeftMiddle"],
                    paintStyle: {
                        strokeStyle: "blue",
                        lineWidth: 3
                    }
                });
            }
        }
    }
}); 
```

# image - 谷歌图片应用程序如何开始？

> ID：12602980
> 
> 赞同：0
> 
> 时间：2012-09-26T13:33:50.603
> 
> 标签：image, macos, cocoa, gestures

我正计划制作一个类似于移动版 Google 图片的 Mac 应用程序。它获取搜索结果并可以在它们之间滑动。

我使用的是 Mac，所以我想使用触控板手势。我认为该系统非常易于用户快速浏览高质量的图像。

我是编码方面的初学者，但我确实了解 C++ 的基础知识。

搜索到[https://developers.google.com/gdata/docs/directory](https://developers.google.com/gdata/docs/directory)，但我看不出 Picasa 有什么用处，因为我想使用 Google 图片数据或数据库（或技术术语是什么） ）。

由于这是我第一次认真尝试应用程序，我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:09:30.720

与大多数应用程序一样，此应用程序有两个方面：

*   **前端**是基于 Cocoa 的用户界面。在这里，您将接收来自用户的查询（在文本字段中）并显示结果（在图像视图中），并且您将在其中实现滑动（在拥有图像视图的某种自定义视图中）。
*   **后端**正在执行 Google 图片搜索。这可能会也可能不会用 Cocoa 编写；您可能决定使用用其他语言编写的其他人的库，但取决于是哪种语言，集成它可能比移植它或从头开始编写自己的库更难。

你想要的后端是[谷歌自定义搜索](https://developers.google.com/custom-search/v1/overview)（通过在他们的开发者网站上搜索“搜索”然后点击替换[第一个结果](https://developers.google.com/web-search/docs/?hl=en)，这是不推荐的）。您将需要使用他们的 REST API，返回 JSON，您可以使用 NSJSONSerialization 类对其进行解析。

# java - JFreeChart 极坐标图填充零到点

> ID：12602982
> 
> 赞同：1
> 
> 时间：2012-09-26T13:34:00.000
> 
> 标签：java, jfreechart

可能是我无法正确表达这个问题。让我解释一下，我想绘制从零开始的值并将其填充到所需点的极坐标图。当我绘制图表时，它会显示类似这样的内容 ![这是我已经能够实现的](../Images/32d7d21d08aa40735eb6cb74387580e8.png)

但我正在寻找这样的东西 ![这就是我要找的](../Images/a5c4e81be01cad31aa747dbcdc9eee36.png)

这是示例代码

```
import java.awt.Color;
import java.awt.Dimension;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.PolarChartPanel;
import org.jfree.chart.plot.PolarPlot;
import org.jfree.chart.renderer.DefaultPolarItemRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class PolarCharDemo extends ApplicationFrame {
    private static final long serialVersionUID = 1L;
    double [][] myData = {{12.1,7.9,3.29,1.01,0,145},
                {12.6,8.4,3.22,1,0,145},
                {13.1,8.1,3.29,0.97,0,145},
                {10,7.5,3.22,0.93,0,145},
                {11.4,8.2,3.1,0.93,0,145},
                {11.7,7.3,2.99,0.9,0,145},
                {10.3,8,2.97,0.89,0,145},
                {8.8,7,3.05,0.9,0,145},
                {9.8,6.7,3.13,0.93,0,145},
                {11.1,7.1,3.05,0.91,0,145},
                {8.8,6.2,3.12,0.95,0,145},
                {9.6,7,2.82,0.44,2.3,5},
                {10.2,6.8,2.82,0.47,3.2,5},
                {9.4,6.8,2.76,0.41,2.9,5},
                {10,7,2.61,0.44,3.3,45},
                {12.8,8,2.95,0.49,2.2,50},
                {9.9,7.1,4.08,1.01,0.6,45},
                {7.1,4.4,2.23,0.4,1.5,5},
                {5,4,2.1,0.37,2.3,5},
                {7.2,4.1,2.17,0.37,1.5,5},
                {7.1,4.3,2.09,0.36,2,5},
                {5.1,4.1,2.17,0.38,2.1,5},
                {4.2,3.9,2.16,0.41,1.9,5},
                {4.9,3.9,2.08,0.35,2.5,5},
                {4.3,3.5,2.09,0.34,3,5}};
    /**
     * Creates a new instance of the demo.
     * 
     * @param title  the frame title.
     */
    public PolarCharDemo(final String title) {
        super(title);
        final XYDataset dataset = createAvgDataset();
        final JFreeChart chart = createChart(dataset);
        final ChartPanel chartPanel = new PolarChartPanel(chart);
        chartPanel.setPreferredSize(new Dimension(1000, 670));
        chartPanel.setEnforceFileExtensions(false);
        setContentPane(chartPanel);
    }
    /**
     * Creates a sample chart.
     * @param dataset  the dataset.
     * @return A sample chart.
     */
    private JFreeChart createChart(final XYDataset dataset) {
        final JFreeChart chart = ChartFactory.createPolarChart("", dataset, true, true, false); 
        final PolarPlot plot = (PolarPlot) chart.getPlot();
        plot.setBackgroundPaint(Color.WHITE);
        plot.setAngleGridlinePaint(Color.BLACK);
        plot.setRadiusGridlinePaint(Color.LIGHT_GRAY);

        final DefaultPolarItemRenderer renderer = (DefaultPolarItemRenderer) plot.getRenderer();
        renderer.setSeriesFilled(0, true);
        renderer.setSeriesPaint(0, Color.BLUE);
        renderer.setSeriesFilled(1, true);
        renderer.setSeriesPaint(1, Color.RED);
        renderer.setSeriesFilled(2, true);
        renderer.setSeriesPaint(2, Color.YELLOW);
        renderer.setSeriesFilled(3, true);
        renderer.setSeriesPaint(3, Color.GREEN);
        return chart;
    }
    /**
     * Creates an Average dataset.
     * @return An average dataset.
     */
    private XYDataset createAvgDataset() {    
        final XYSeriesCollection data = new XYSeriesCollection();
        XYSeries series0 = new XYSeries("Series1");
        XYSeries series1 = new XYSeries("Series2");
        XYSeries series2 = new XYSeries("Series3");
        for(int i=0;i<myData.length;i++)
        {
            series0.add(myData[i][5], myData[i][0]);
            series1.add(myData[i][5], myData[i][1]);
            series2.add(myData[i][5], myData[i][2]);
        }
        data.addSeries(series0);
        data.addSeries(series1);
        data.addSeries(series2);
        return data;
    }    

    /**
     * Main program that creates a thermometer and places it into
     * a JFrame.
     *
     * @param argv Command line arguements - none used.
     */
    public static void main(final String[] argv) {

        final PolarCharDemo demo = new PolarCharDemo("Polar Chart");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:54:19.757

我不确定我是否理解您的数据，但它可能有助于将值标准化为允许将原点添加`(0, 0)`到数据的角度范围。在下面的示例中，我选择了零。

![在此处输入图像描述](../Images/134ffb762bb183cfcc4684185404d16d.png)

```
import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JFrame;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.PolarPlot;
import org.jfree.chart.renderer.DefaultPolarItemRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/** @see http://stackoverflow.com/a/12607586/230513 */
public class PolarCharDemo {

    private static final String title = "PolarChart";
    private static final double START = 0;
    private static final double END = 145;

    private void display() {
        JFrame f = new JFrame(title);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ChartPanel panel = new ChartPanel(createChart(createDataset()));
        panel.setPreferredSize(new Dimension(500, 500));
        f.add(panel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private JFreeChart createChart(XYDataset dataset) {
        JFreeChart chart = ChartFactory.createPolarChart(
            title, dataset, true, false, false);
        PolarPlot plot = (PolarPlot) chart.getPlot();
        plot.setBackgroundPaint(Color.white);
        plot.setAngleGridlinePaint(Color.black);
        plot.setRadiusGridlinePaint(Color.lightGray);
        DefaultPolarItemRenderer r = (DefaultPolarItemRenderer) plot.getRenderer();
        r.setFillComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));
        for (int i = 0; i < dataset.getSeriesCount(); i++ ) {
            r.setSeriesFilled(i, true);
            r.setShapesVisible(false);
            r.setDrawOutlineWhenFilled(false);
        }
        NumberAxis rangeAxis = (NumberAxis) plot.getAxis();
        rangeAxis.setTickLabelsVisible(false);
        return chart;
    }

    private XYDataset createDataset() {
        XYSeriesCollection result = new XYSeriesCollection();
        for (int r = 4; r > 0; r--) {
            XYSeries series = new XYSeries(title + String.valueOf(r));
            series.add(0, 0);
            for (int t = (int) START; t <= END; t++) {
                series.add(t, r);
            }
            result.addSeries(series);
        }
        return result;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new PolarCharDemo().display();
            }
        });
    }
} 
```

# iframe - 跟踪嵌入的 youtube 视频观看次数

> ID：12602983
> 
> 赞同：3
> 
> 时间：2012-09-26T13:34:05.443
> 
> 标签：iframe, youtube, google-analytics

我在我的网站中嵌入了一些 youtube 视频。我想用谷歌分析跟踪每个视频的观看次数，但我无法捕捉到任何 onClick 事件，因为这些视频是使用 iFrame 嵌入的。如何使用 iFrame 跟踪嵌入在我的网页中的 youtube 视频的观看次数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:33:47.897

我一直在使用 YouTube 的 API 将播放作为 Google Analytics 中的事件进行跟踪。[它与iFrame API](https://developers.google.com/youtube/iframe_api_reference#Events)和 javascript中的格式相同。如果您想跟踪其他功能，请查看 iFrame API。这是我最初获得[事件跟踪信息](http://www.bluefountainmedia.com/blog/track-youtube-player-events-google-analytics/)的地方。

您必须更改下面的**videoID**：

```
<div id="player"></div>

<script type="text/javascript">
    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var player;

    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
            height: '390',
            width: '640',
            videoId: 'fYmrMt01S1U',
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        /// event.target.playVideo(); 
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
            _gaq.push(['_trackEvent', 'Videos', 'Play',
            player.getVideoUrl()]);
        }
        if (event.data == YT.PlayerState.PAUSED) {
            _gaq.push(['_trackEvent', 'Videos', 'Paused',
            player.getVideoUrl()]);
        }
        if (event.data == YT.PlayerState.ENDED) {
            _gaq.push(['_trackEvent', 'Videos', 'Watch to End',
            player.getVideoUrl()]);
        }
    }
    // ]]>
</script> 
```

# authorization - 模拟器中的 ABAddressBookGetAuthorizationStatus 总是返回 kABAuthorizationStatusAuthorized

> ID：12602984
> 
> 赞同：4
> 
> 时间：2012-09-26T13:34:19.193
> 
> 标签：authorization, ios6, addressbook

我正在为 iOS 6 通讯簿授权更新应用程序，但在测试中遇到了问题。模拟器总是返回授权被授予。这意味着我看不到请求权限的对话框弹出窗口，因此无法测试该代码路径。好的，改用设备......问题是操作系统似乎记住了我的答案，所以只问一次。删除应用程序没有帮助。重新安装时，它保留了以前的权限设置，因此再次没有弹出窗口。

重置模拟器没有帮助，如果您进入模拟器上的隐私设置，则不会列出任何应用程序请求通讯簿的权限。

我唯一的选择是使用另一台从未安装过我们的应用程序的 iOS 设备进行每次测试。这不可能是你应该如何测试它。有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T13:46:57.423

找到了。在设备上，设置->常规->重置->重置位置和隐私。所以你必须对每个测试都这样做

# javascript - JavaScript if 语句

> ID：12602985
> 
> 赞同：1
> 
> 时间：2012-09-26T13:34:22.357
> 
> 标签：javascript, jquery, function, if-statement

我正在创建一个触发不同功能的 if 语句。有没有更好的方法可以完成此功能？

```
$("#slide01-bttn").click(function() {

    if ($("#slide-1").is('#featured_ul li:nth-child(1)'))
    {
    alert("First Child");
    moveSlideFirstChild();
    }

    if ($("#slide-1").is('#featured_ul li:nth-child(2)'))
    {
    alert("Second Child");
    moveSlideSecondChild();
    }

    if ($("#slide-1").is('#featured_ul li:nth-child(3)'))
    {
    alert("Third Child");
    moveSlideThirdChild();
    }

    if ($("#slide-1").is('#featured_ul li:nth-child(4)'))
    {
    alert("Fourth Child");
    moveSlideFourthChild();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:44:41.557

```
$("#slide01-bttn").click(function() {
    var slide = $("#slide-1");
    var index = $('#featured_ul li').index(slide);
    var position = ["First", "Second", "Third", "Fourth"][index];
    if (position) {
        alert(position+" Child");
        // assuming they are global functions:
        window["moveSlide"+position+"Child"]();
    }
}); 
```

如果你的函数是局部变量，你仍然可以做

```
 var fn = [moveSlideFirstChild, moveSlideSecondChild, moveSlideThirdChild, moveSlideFourthChild][index];
    if (fn) fn(); 
```

但我真的建议将你的 moveSlide 函数参数化，这样你只需要一个将元素作为参数移动的函数：

```
 moveSlide(slide); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:45:36.683

您当然可以将代码简化为此

```
var pos = $("#slide-1").prevAll().length;
switch (pos)
{
    case 0:
        ...
        break;
    case 1:
        ...
        break;
    ...
    default:
        ...
        break;
} 
```

但似乎**您应该优化将子元素移动**到只有一个函数而不是*N*的方法，这样您就可以进行简单的调用：

```
var elem = $("#slide-1");

// pass position AND element because you'll likely use it inside
moveSlideChild(elem.prevAll().length, elem); 
```

您当然可以只传入元素并在其中获取位置。并保存一些元素选择，因为您正在执行许多 jQuery 元素选择器调用。这将使您的代码显着更快和优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:39:24.240

I think the best thing that you could do would be to paramatize your moveSlide functions

```
function moveSlide(childNumber) {

    //Grab the child element you are looking for
    //Move it code
} 
```

Really you should be able to do something with the ids on the li to simplify it even more. I'm not sure how the HTML is layed out. if you could provide a fiddle we could probably make more progress.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T13:45:46.703

您可以使用开关来完成工作：

```
$("#slide01-bttn").click(function() {
var pos = $("#slide-1").prevAll().length;
switch(pos)
{
case 0:
case 1:
  moveSlide(pos);
  break;
default:
  //code to be executed if pos is different from case 0 and 1
}
}

function moveSlide(childNumber) {

    //Grab the child element you are looking for
    //Move it code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:49:04.193

如果*moveSlideNChild()*都做类似的事情，最好应用一些抽象来减少代码量。然后你可以打电话

```
var $list  = $('#featured_ul li');             // set here for cacheing
var $slide = $("#slide-1");                    // set here for cacheing

$("#slide01-bttn").click(function() {
    var position = $list.index($slide);
    if( position >= 1 && position <= 4) {      // only want 1 through 4
        alert('Child ' + position);
        moveSlideChild(position);
    }
} 
```

# vb.net - 避免列表视图选定的索引更改触发两次

> ID：12602991
> 
> 赞同：5
> 
> 时间：2012-09-26T13:34:38.550
> 
> 标签：vb.net, winforms, listview, selectionchanged

很简单的问题，当列表视图的选定索引发生变化时，事件会触发两次，一次用于取消选择，第二次用于选择下一项。

我需要在不同时间选择或取消选择时使用该事件，但是如果取消选择只是稍后重新选择，它会使我的一半 ui 闪烁从启用到关闭再重新打开，它也会导致相当多的代码运行所以如果它是另一个被点击的项目而不是空格（用于取消选择），我只需要一种避免取消选择触发的方法

Dave R 说在这里使用 100 毫秒计时器：[我的 ListView 选择事件处理是否遗漏了一些东西，](https://stackoverflow.com/questions/594470/am-i-missing-something-with-my-listview-selection-event-handling) 这听起来像是可以工作但看起来很不整洁，或者通常是一种不好的做法。

我唯一的另一个想法是使用点击事件，然后在该位置找到该项目？但我宁愿不去麻烦

提前致谢！

-编辑-

我只是认为单击事件会首先触发，因此我可以设置一个标志，如果单击事件发生在某个项目上，则跳过选择索引更改代码，然后在使用该标志后重置该标志，从而跳过取消选择？我现在看看，但再次感觉不是一种非常有效或简单的方法来做一些听起来很简单的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:47:43.267

请改用[ItemSelectionChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.itemselectionchanged.aspx)事件 - [ListViewItemSelectionChangedEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitemselectionchangedeventargs.aspx)可以告诉您哪个项目导致它触发，以及它是否被选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T19:26:02.330

我刚刚尝试了另一种可能没有任何延迟的解决方案，它对我有用：

```
 If ListView1.Items(ListView1.FocusedItem.Index).Selected = False Then
        'This is the deselected value
        MsgBox("Deselected: " & ListView1.Items(ListView1.FocusedItem.Index).SubItems(0).Text)
    Else
        'This is the new selected value
        MsgBox("Selected: " & ListView1.Items(ListView1.FocusedItem.Index).SubItems(0).Text)
    End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:18:35.873

以下解决方案即使延迟 1 毫秒也有效。为了确保它有效，您可能可以选择更高的延迟，例如 10 毫秒，但 100 毫秒的延迟会使选择“无”时有点滞后。这是 C# 代码：

```
public class FixedListView : ListView
{
    private Timer _ItemSelectionChangedTimer = new Timer();
    private Timer _SelectedIndexChangedTimer = new Timer();

    private ListViewItemSelectionChangedEventArgs _ItemSelectionChangedEventArgs;
    private EventArgs _SelectedIndexChangedEventArgs;

    public FixedListView()
    {
        this._ItemSelectionChangedTimer.Interval = 1;
        this._SelectedIndexChangedTimer.Interval = 1;

        this._ItemSelectionChangedTimer.Tick += (sender, e) =>
        {
            this.OnItemSelectionChanged(this._ItemSelectionChangedEventArgs);
            this._ItemSelectionChangedEventArgs = null;
        };
        this._SelectedIndexChangedTimer.Tick += (sender, e) =>
        {
            this.OnSelectedIndexChanged(this._SelectedIndexChangedEventArgs);
            this._SelectedIndexChangedEventArgs = null;
        };
    }

    protected override void OnItemSelectionChanged(ListViewItemSelectionChangedEventArgs e)
    {
        if (this._ItemSelectionChangedTimer.Enabled)
        {
            this._ItemSelectionChangedTimer.Stop();
            base.OnItemSelectionChanged(e);
        }
        else
        {
            this._ItemSelectionChangedEventArgs = e;
            this._ItemSelectionChangedTimer.Start();
        }
    }

    protected override void OnSelectedIndexChanged(EventArgs e)
    {
        if (this._SelectedIndexChangedTimer.Enabled)
        {
            this._SelectedIndexChangedTimer.Stop();
            base.OnSelectedIndexChanged(e);
        }
        else
        {
            this._SelectedIndexChangedEventArgs = e;
            this._SelectedIndexChangedTimer.Start();                
        }
    }
} 
```

这是VB代码：

```
Public Class FixedListBox

Inherits ListView

Public Sub New()

    Me._ItemSelectionChangedTimer.Interval = 1
    Me._SelectedIndexChangedTimer.Interval = 1

    AddHandler Me._ItemSelectionChangedTimer.Tick, _
        Sub(sender, e)
            Me.OnItemSelectionChanged(Me._ItemSelectionChangedEventArgs)
            Me._ItemSelectionChangedEventArgs = Nothing
        End Sub

    AddHandler Me._SelectedIndexChangedTimer.Tick, _
        Sub(sender, e)
            Me.OnSelectedIndexChanged(Me._SelectedIndexChangedEventArgs)
            Me._SelectedIndexChangedEventArgs = Nothing
        End Sub

End Sub

Private _ItemSelectionChangedTimer As New Timer()
Private _SelectedIndexChangedTimer As New Timer()

Private _ItemSelectionChangedEventArgs As ListViewItemSelectionChangedEventArgs
Private _SelectedIndexChangedEventArgs As EventArgs

Protected Overrides Sub OnItemSelectionChanged(e As ListViewItemSelectionChangedEventArgs)

    If Me._ItemSelectionChangedTimer.Enabled Then

        Me._ItemSelectionChangedTimer.Stop()
        MyBase.OnItemSelectionChanged(e)

    Else

        Me._ItemSelectionChangedEventArgs = e
        Me._ItemSelectionChangedTimer.Start()

    End If

End Sub

Protected Overrides Sub OnSelectedIndexChanged(e As EventArgs)

    If Me._SelectedIndexChangedTimer.Enabled Then

        Me._SelectedIndexChangedTimer.Stop()
        MyBase.OnSelectedIndexChanged(e)

    Else

        Me._SelectedIndexChangedEventArgs = e
        Me._SelectedIndexChangedTimer.Start()

    End If

End Sub 
```

结束类

您可以像普通 ListView 一样使用该控件，但 SelectedIndexChanged 和 ItemSelectionChanged 只会触发一次。

玩得开心...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-24T07:37:43.170

只需在 SelectedIndexChanged 事件中检查焦点项目是否为空并退出。

```
ListView^ item = listView1-> FocusedItem;   //get selected item
if (item == nullptr){return;)  // this line exits when deselection event fires
String^ data1 = Convert::ToString (  item-> SubItems [0]    );   // get your data from columns like so
MessageBox::Show (data1);  // display 
```

请注意，您可以通过更改 SubItems 中提供的索引来获取多个列下的数据，并且使用计时器和延迟只会产生开销，尤其是对于大型数据库会导致您的应用程序在 Visual C++ .NET 中减慢代码，但同样的理论适用于 C# 和其他

享受！！

# xpages - 缺少 xPages 设计器团队菜单

> ID：12602998
> 
> 赞同：0
> 
> 时间：2012-09-26T13:34:56.360
> 
> 标签：xpages

我在 xPages / Domino 设计器中安装源代码控制并将其搞砸了。在尝试修复我有缺陷的安装时，我以某种方式删除了“团队”设计器菜单选项。

谁能告诉我如何找回设计师中的“团队”菜单选项？

提前致谢，

——杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:07:22.780

我假设您在包资源管理器中，因为团队只显示在那里。我尝试的是做一个可以在窗口菜单中找到的重置透视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:50:48.233

我浪费了大量时间的一件事是无法在导航器窗格中找到“团队开发”菜单（数据库的“正常”Domino Designer 视图）。诀窍是选择 XPages 透视图... ;-)

/约翰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:18:37.803

99% 的情况下，删除工作区文件夹会重置所有内容（将其备份到某处以防您需要其中的内容）。

这将解决由大多数损坏的插件引起的问题。