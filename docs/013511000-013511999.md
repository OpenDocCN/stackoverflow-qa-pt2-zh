# StackOverflow 问答 13511000-13511999

# vb.net - 数组没有得到正确的数据范围

> ID：13511000
> 
> 赞同：0
> 
> 时间：2012-11-22T10:45:05.000
> 
> 标签：vb.net, cad

我想使用 4 度方程将数据存储在数组中。但我只想要一定范围内的积分。我的范围必须是`x=0,2*Q`to `x=1,5*Q`，所以循环需要从 开始`x=0,2*Q`并结束`x=1,5*Q`。`Q`是从文本文件中读取的变量，例如 9。我使用这些数据在名为 Solid Edge 的 3D Cad 程序中绘制曲线。问题是，数据不存储我如何处理它。它确实从我想要它开始，但不会在我想要它的时候结束。`y`程序在那个数字时停止。但我只希望发生这种情况`x`。

我的solid edge 版本是ST2，这个控制台应用程序需要在ST5 上运行。在 Solid Edge 中，我使用计算出的数组来制作曲线：

```
Bsplinecurve2d = BsplineCurves2d.AddByPoints(order, ArraySize, dataArray) 
```

我正在使用visual basic 2003，我知道使用更新的版本会更好。但我不能。我是工程办公室的实习生，他们只有这个 Visual Basic 的副本。这是我的代码中没有做我想做的事情的部分：

```
 dim x as double
        dim y as double
dim i as double
    Dim listofdata As New ArrayList
         For i = 0.2 To 1.5 Step 0.1
                    x = (i * Q)
                    y = (((x ^ 4) * A) + ((x ^ 3) * B) + ((x ^ 2) * C) + (x * D) + E)
                    listofdata.Add(x)
                    listofdata.Add(y)
                Next
                Dim dataArray() As Double
                dataArray = DirectCast(listofdata.ToArray(GetType(Double)), Double()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:31:03.433

好的，我想通了。我的计数器在 x=1.5*Q 之前停止了。但是当我把它做成 x=1.6*Q 时，数组停在右边并且。不知道为什么我必须这样做，但它现在起作用了。

# wcf - 所有 WCF 服务都不会启动

> ID：13511002
> 
> 赞同：0
> 
> 时间：2012-11-22T10:45:05.953
> 
> 标签：wcf

我不知道问题是什么，但是我无法启动任何 WCF 服务？

即使是标准方法`GetData`也行不通。

他们都因错误而超时：

> *无法从 localhost:9590/Service.svc 获取元数据*

但是我没有更改任何代码，在此之前我的所有 WCF 服务都可以正常工作，但现在不行。

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false before    deployment -->
      <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the    value     below to true.  Set to false before deployment to avoid disclosing exception   information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:36:04.887

您是在代码中还是在服务 Web.config 中添加服务元数据端点？

缺少元数据端点是我唯一能想到的。

除非您设法将 localhost 重定向到其他地方..

# c# - 如何在实体框架中级联删除？

> ID：13511005
> 
> 赞同：4
> 
> 时间：2012-11-22T10:45:13.393
> 
> 标签：c#, sql, entity-framework, entity-framework-4

我的模型中有两个对象

汽车和汽车零件

具有 1:n 的关系。

我想删除级联实体汽车。当我删除时，我得到以下异常：

```
 The operation failed: The relationship could not be changed because one or 
 more of the foreign-key properties is non-nullable. When a change is made 
 to a relationship, the related foreign-key property is set to a null value. 
 If the foreign-key does not support null values, a new relationship must 
 be defined, the foreign-key property must be assigned another non-null value, 
 or the unrelated object must be deleted. 
```

我认为它试图先删除汽车对象，然后再删除汽车零件。
由于外键，这是不可能的。

我该如何处理？
我想，显然先删除 carPart，然后只删除汽车。
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T10:52:04.157

您需要告诉数据库您要在删除时级联，然后 Entity Framework 将执行您所期望的操作。如果您转到`Relationships`SQL Server Management Studio 中表的屏幕，则可以更改 FK 行为：

![Sql Server Management Studio 中的级联删除](../Images/001cccf91a2c8bff2e0f5f93d3254f4c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:47:27.090

如果要级联删除，请在数据库级别设置级联删除。您收到错误，因为`SQL`不允许删除。

您不必在实体框架中执行此操作。

# objective-c - NSArray 对象计数奇怪的问题

> ID：13511009
> 
> 赞同：2
> 
> 时间：2012-11-22T10:45:32.640
> 
> 标签：objective-c, nsarray

我初始化`NSArray`如下。

```
 NSArray *myArr  = [[NSArray alloc]initWithObjects:name, empID, phone, email, website, nil]; 
```

`myArr`应该有5个元素。但`[myArr count]`仅显示 4 个元素。

**编辑：**

其中一个对象`website`在数组中为零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:19:33.727

你确定你的所有五个对象都是有效的吗？如果网站为零，则您的数组将只有四个元素。

您不能将`nil`对象添加到字典中。如果你需要做一些等效的事情，你*可以*添加一个特殊的对象。`NSNull`

# paypal - Paypal Payments Advanced - 付款处理问题

> ID：13511010
> 
> 赞同：0
> 
> 时间：2012-11-22T10:45:33.690
> 
> 标签：paypal

我们已在测试模式下成功实施 PayPal 预付款。直到昨天，我们在下订单后从贝宝获得了正确的响应 http 数据。但是，今天，在我输入测试签证号码和到期日期/年份后.. 它显示以下消息而不是给我回帖数据。

`"Thank you for your purchase, we are currently reviewing your order."`

因此，我无法进一步工作。这是我设置 PPA 的测试沙盒帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:58:39.117

得到了答案...错误地，我在贝宝中更新了“付款审查”设置以启用。我禁用了它并让它再次工作。希望这有助于将来的任何人先检查这些基本内容。

# c# - 如何使用会话变量中的值作为signalR中组名的一部分

> ID：13511012
> 
> 赞同：2
> 
> 时间：2012-11-22T10:45:37.567
> 
> 标签：c#, session, asp.net-mvc-4, signalr, signalr-hub

嗨，我正在尝试设置 signalR 来向网络用户分发消息，问题是一个站点拥有不同的“区域”和“用户类型”。

当用户通过传递 url 参数访问站点时决定区域，然后将其存储在会话变量中，“用户类型”默认情况下未登录，然后在用户登录时更改用户类型（从返回网络服务）并存储在用户对象中。

我的目标是在用户访问站点时使用 signalR 连接到集线器，并将用户 connectionId 添加到组名，使用会话中的“区域 id”和上下文中用户对象的“用户类型 id”。

我遇到的问题是我可以获得用户 ID，但是当涉及到区域 ID 时，signalR 无法访问会话。我理解不允许在 signalR 中使用会话的原因，但是否有人知道是否有一种方法可以启用此功能或另一种方法可以访问用户区域，以便我可以创建这些独特的组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:58:18.073

如果您确实知道用户区域，则可以在连接后从客户端调用一个函数，将它们添加到该组：

在您的页面加载中：

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "areaKey", "var theAreaTheyBelongTo= '" + serverSideAreaTheyBelongTo + "'", true); 
```

在您的集线器上：

```
public void SubscribeToArea(string area)
{
    Groups.Add(Context.ConnectionId, area);
} 
```

在您的客户端上：

```
$.connection.hub.start(function () {
    yourHubName.subscribeToArea(theAreaTheyBelongTo);
}); 
```

# c# - 错误错误：尝试从代码隐藏中设置 asp.net 单选按钮列表选择的项目返回错误

> ID：13511014
> 
> 赞同：1
> 
> 时间：2012-11-22T10:45:52.677
> 
> 标签：c#, asp.net

使用以下代码时，会返回此错误： *“rblPermisSejourA”有一个无效的 SelectedValue，因为它不存在于项目列表中。*

```
<asp:RadioButtonList ID="rblPermisSejour" runat="server"
DataSourceID="EntityDataSourcePermisSejour" DataTextField="Libelle"
DataValueField="Id" AppendDataBoundItems="True" RepeatDirection="Horizontal">
<asp:ListItem Selected="True" Text="" Value="-1">Aucun</asp:ListItem>
</asp:RadioButtonList>

<asp:RadioButtonList ID="rblPermisSejourA" runat="server"
DataSourceID="EntityDataSourcePermisSejour" DataTextField="Libelle"
DataValueField="Id" AppendDataBoundItems="True" RepeatDirection="Horizontal">
<asp:ListItem Selected="True" Text="" Value="-1">Aucun</asp:ListItem>
</asp:RadioButtonList>

protected void ws2_OnDeactivate(object sender, EventArgs e)
{
  rblPermisSejourA.SelectedValue = rblPermisSejour.SelectedValue;
} 
```

请注意，“rblPermisSejour”在一个向导步骤中，“rblPermisSejourA”在另一个尚未激活的向导步骤中（没有 id 和没有标题，女巫中有“rblPermisSejourA”）。激活此步骤后，一切正常。
但是使用与另一个 RadioButtonList 相同的代码和相同**的操作，它运行良好**，并且**在相同的上下文中**（未激活向导步骤）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:34:58.493

从你的评论

```
<asp:ListItem Selected="True" Value="1">A</asp:ListItem>
<asp:ListItem Selected="True" Value="2">C</asp:ListItem> 
```

你有两个项目 selected="true" 所以调用 .SelectedValue 可能是一个问题，因为它不知道你的意思是哪个值。这些列表项是 rblPermisSejourA 还是 rblPermisSejour？如果您编辑您的问题以添加两个列表，我们可以看到这一行

```
rblPermisSejourA.SelectedValue = rblPermisSejour.SelectedValue; 
```

试图做并找出你的错误。

编辑

你有没有尝试过类似的东西

```
rblPermisSejourA.Items.FindByValue(rblPermisSejour.SelectedValue).Selected = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:50:55.040

你有没有尝试过

```
rblPermisSejourA.SelectedValue = rblPermisSejour.SelectedItem.Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:23:04.377

这是解决方案：

> if (rblPermisSejourA.Items.Count <= 1)
>     rblPermisSejourA.DataBind(); //添加以更正错误
> rblPermisSejourA.SelectedValue = rblPermisSejour.SelectedValue;

# c++ - BitmapSource copyPixels 正确参数

> ID：13511016
> 
> 赞同：0
> 
> 时间：2012-11-22T10:45:54.363
> 
> 标签：c++, copy, command-line-interface, pixel, bitmapsource

我使用的步幅会产生异常。我不知道什么步幅是正确的。输入图像为 32 位 JPG。请告诉我应该输入哪些值（我尝试了很多东西，但它们在哪里生成异常或损坏的 JPG）：

![在此处输入图像描述](../Images/8c2e8ca33abfe71c542ea1d534dc8248.png)

```
array<System::Byte>^ pixels = gcnew array<System::Byte>(WHAT VALUE);        
bitmapSource->CopyPixels(pixels, WHAT VALUE, 0); 
```

* * *

```
// Jpg.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>
#using <mscorlib.dll> //requires CLI
using namespace System;
using namespace System::IO;
using namespace System::Windows::Media::Imaging;
using namespace System::Windows::Media;
using namespace System::Windows::Controls;
using namespace std;

[System::STAThread]
int _tmain(int argc, _TCHAR* argv[])
{
    // Open a Stream and decode a JPEG image
    Stream^ imageStreamSource = gcnew FileStream("C:/heart2.jpg",
        FileMode::Open, FileAccess::Read, FileShare::Read);

    JpegBitmapDecoder^ decoder = gcnew JpegBitmapDecoder(
        imageStreamSource, BitmapCreateOptions::PreservePixelFormat,
        BitmapCacheOption::Default);
    BitmapSource^ bitmapSource = decoder->Frames[0];//< --mamy bitmape
    // Draw the Image
    Image^ myImage = gcnew Image();

    myImage->Source = bitmapSource;
    myImage->Stretch = Stretch::None;
    myImage->Margin = System::Windows::Thickness(20);

    int width = bitmapSource->PixelWidth;
    int height = bitmapSource->PixelHeight;
    int stride = (width * bitmapSource->Format.BitsPerPixel + 31) / 32;
    array<System::Byte>^ pixels
        = gcnew array<System::Byte>(height * width * stride);
    bitmapSource->CopyPixels(pixels, stride, 0);

    int x;
    cin >> x;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:49:14.780

谷歌

[http://msdn.microsoft.com/en-us/library/system.drawing.imaging.bitmapdata.stride.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.bitmapdata.stride.aspx)

步幅是单行像素（扫描线）的宽度，四舍五入到四字节边界。

因此，正确的值取决于图像中每个像素的位数。

# javascript - 分配现有或空对象

> ID：13511029
> 
> 赞同：2
> 
> 时间：2012-11-22T10:46:20.607
> 
> 标签：javascript

这可能是重复的，但我不知道如何搜索它。

为什么

```
var test = test || {}; 
```

工作，但是

```
var test = testing || {}; 
```

抛出错误？在定义点两者`test`和`testing`都是未定义的。

**编辑**

抛出的错误是“参考错误：未定义测试”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:54:43.390

在不存在的意义上未定义的变量与持有该值的变量之间存在差异`undefined`。

`test`在您的第一个示例中，您声明`var`这样当`=`评估右侧的表达式时，变量`test`存在但具有值`undefined`。

在您的第二个示例中，您根本没有定义`testing`，因此出现了错误。

编辑：在我看来，也许进一步的解释不会受到伤害。

为简化起见，JavaScript 引擎需要两次遍历代码。第一遍是解析/编译阶段，然后是变量声明*而不是赋值*。第二遍是实际执行，然后发生分配。这导致了一种通常称为“变量提升”的效果 - 就好像 JS 引擎将声明“提升”到其范围的顶部，但仍会执行分配。

至于这样的代码点：

```
var test = test || {}; 
```

...它基本上是在说“是否`test`已经存在一个真实的值？如果是这样使用它，否则将它设置为一个新的空对象。”

JS 引擎不介意同一个变量是否在同一范围内多次声明 - 它基本上忽略第二个*声明，*但不会忽略第二个声明中包含的任何*赋值。*因此，如果`test`在其他脚本块中声明，可能在单独的 JS 包含文件中，则相关行仅分配`test`给自身（假设它具有真实值，其中所有对象都是真实的）。但是如果它没有在其他地方声明，它仍然会作为当前`var`语句的结果存在，但它会`undefined`在当前赋值之前，所以`||`运算符返回右手操作数，`{}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:53:04.710

It's due to the `var` keyword. Because the variable is declared it also exists albeit with the value undefined. What the `||` then does is to check for truthiness and when it finds that the object is undefined it gives you a new object to work with.

The latter does the exact same but since you're doing it on "one line" the `testing` object isn't defined when evaluated and thusly throws the exception.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:56:40.440

```
var test = test || {}; 
```

在这里，`test`曾经`declared`但不是`defined`

但在，

```
var test = testing || {}; 
```

没有任何参考，`testing`您仍在尝试分配其价值。

第一种情况的相应代码是，

```
var testing;  // See testing is still undefined
var test = testing || {}; 
```

# iphone - 通过 GameKit 登录 iPhone 应用程序

> ID：13511030
> 
> 赞同：2
> 
> 时间：2012-11-22T10:46:21.373
> 
> 标签：iphone, objective-c, game-center

我想通过 GameCenter 登录 API 登录我的应用程序。

是否可以 ？

苹果游戏中心登录 API 是公开的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:18:06.303

你肯定可以做到的。**没有直接使用的游戏中心 API。**您可以显示游戏中心验证屏幕，验证后，您可以继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:33:29.233

如果您使用的是 iOS 6，请参阅 GKLocalPlayer 的文档。您将看到您为 localPlayer 的“authenticateHandler”属性分配了一个块。当您分配它时，如果玩家尚未登录 Game Center，则该块的参数之一 (UIViewController *viewController) 将填充一个视图控制器的地址，该地址将显示常规的 Apple Game Center 登录屏幕。获得该地址后，您执行 presentViewController:viewController 并且用户会看到正常的 Apple 登录屏幕。当用户完成与它的交互时，您会收到对“gameCenterViewControllerDidFinish”的回调。您提供的块运行不止一次，这使得该过程很难遵循，但它确实有效。对于它的价值，我将在下面发布我正在使用的似乎有效的方法。它假定 iOS5 或 iOS6。这对于 5 之前的任何东西都不好。OS6 是在 iOS6 上返回 YES 的方法，否则返回 NO。这不是为公众消费而编写的，因此请原谅所有调试内容和其中无法解释的内容。

```
-(void) authenticateLocalPlayer {
ANNOUNCE
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
_lastError = nil;

        //iOS 6
if ( [self os6] ) {
    localPlayer.authenticateHandler = ^(UIViewController *loginVC, NSError *error) {
        NSLog(@"in authenticateHandler 1");
        [self setLastError:error];
            //... resume application responses
        [[CCDirector sharedDirector] resume];   //if not paused does nothing 
        if ( [GKLocalPlayer localPlayer].authenticated) {
            NSLog(@"in authenticateHandler 2 - local player is authenticated");
        } else if (loginVC) {
            NSLog(@"in authenticateHandler 3 - local player is not authenticated, will present VC");
                //... pause applications responses
            [[CCDirector sharedDirector] pause];
            [self presentViewController:loginVC];
        } else {
            NSLog(@"in authenticateHandler 4 - local player is NOT authenticated, no VC returned");
        }
        NSLog(@"authenticateHandler error: %@", error.localizedDescription);
    };

        //iOS 5
} else {
    if ( [GKLocalPlayer localPlayer].authenticated == NO ) {
            //no completion handler because we're relying on NSNotificationCenter
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];
        NSLog(@"local player authentication requested");
    } else {
        NSLog(@"local player was already authenticated");
    }
} 
```

}

# android - 在返回按钮上退出 Android 应用程序

> ID：13511031
> 
> 赞同：0
> 
> 时间：2012-11-22T10:46:21.117
> 
> 标签：android, android-activity, back-stack, android-navigation

我的应用程序标题中有带有后退箭头的 ImageButton。当用户按下它时，我在当前 Activity 上调用 finish()。我也可以选择让用户回家，但我想以某种方式清除活动历史记录，所以当用户在主页活动上按下返回按钮时，应用程序会关闭。

我也可以在调用 home Activity 时为 Intent 设置一个参数，但是我应该调用什么来关闭应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:54:37.467

您需要使用 startIntentForResult() 调用活动。然后在第二个活动中，您将执行以下操作：

```
setResult(RESULT_OK);
finish(); 
```

在第一个活动中，获取此代码并关闭该活动：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
 if (resultCode == RESULT_OK) {
  if (getParent() == null) {
  setResult(Activity.RESULT_OK, null);
  }
  else {
   getParent().setResult(Activity.RESULT_OK, null);
  }
  finish();
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:53:09.360

When you go to an activity, save that activityContext some where(say in some array of Contexts).

When you press the exit button, you can just loop the array and say `activity.finish()`

So all the activities in the stack are now finished and the user is out of app.

Code may be like this:

```
public class ActivityStack {

    public ArrayList<Context> contextArray=new ArrayList<>(); 

    public void setContext(int i,Context context) {
          contextArray.add(context);
    }

    public void quitApp() {
           for(context:ContextArray) {
              context.finish();  

            }
    }

} 
```

**Edit**: From API 16, `finishAffinity()` method can be used to finish all activities.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:03:41.187

Intent 标志[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)将适合您的目的。

在没有历史记录的情况下开始您的活动的示例：

```
Intent intent = new Intent(this,ExampleActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:55:42.233

当您关闭最后一个活动时，将应用程序视为已关闭。应用程序的生命周期超出了您作为开发人员的职责，由框架处理。当你所有的活动都完成后，活动堆栈（历史）是空的，所以下一次应用程序启动将启动你的第一个活动，首先调用 onCreate。

然而，单例和其他静态字段将被保留，但 Android 会清除它们，因为它需要更多内存，所以这不是问题。

我还建议您参考[此线程](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)以获取更多详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:51:17.437

您可以使用此功能：

```
//to remove application from task manager
public void onQuitPressed() {

    int pid = android.os.Process.myPid();
    android.os.Process.killProcess(pid);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T11:48:57.883

做这样的事情..

手动关闭您的服务

```
@Override
public void onBackPressed() {
    Intent intent = new Intent(NewFox_Project.this,RadioService.class);
    moveTaskToBack(true);
    stopService(intent);

    Intent radioTimes = new Intent(NewFox_Project.this,RadioTimeService.class);
    moveTaskToBack(true);
    stopService(radioTimes);

    Intent radioPlyerService = new Intent(NewFox_Project.this,RadioPlayerService.class);
    moveTaskToBack(true);
    stopService(radioPlyerService);

    NewFox_Project.this.finish();
    super.onBackPressed();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if(event.getKeyCode()==KeyEvent.KEYCODE_BACK)
    {
        Intent intent = new Intent(NewFox_Project.this,RadioService.class);
        moveTaskToBack(true);
        stopService(intent);

        Intent radioTimes = new Intent(NewFox_Project.this,RadioTimeService.class);
        moveTaskToBack(true);
        stopService(radioTimes);

        Intent radioPlyerService = new Intent(NewFox_Project.this,RadioPlayerService.class);
        moveTaskToBack(true);
        stopService(radioPlyerService);

        NewFox_Project.this.finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

# php - PHP PDO::prepare 查询构建 - mysql 函数的问题

> ID：13511032
> 
> 赞同：1
> 
> 时间：2012-11-22T10:46:22.373
> 
> 标签：php, pdo

相关问题，但对我没有帮助：[为什么不能将 MYSQL 函数传递给准备好的 PDO 语句？](https://stackoverflow.com/questions/4259274/why-cant-you-pass-mysql-functions-into-prepared-pdo-statements)

这是交易：我正在为 PHP PDO 编写一个抽象层并实现一个查询构建器。
这个确切的问题只发生在 INSERT 语句中。这是我的代码示例：

```
$db->insert('table_name')
    ->keys(array('abc', 'def', 'ghi'))
    ->values(array($var1, $var2, $var3)) // can take a 2D array if you want to insert multiple rows at the same time
    ->execute(); 
```

底层代码使用 ? 而不是值来构建查询字符串。对于此特定示例，查询将导致以下结果：

```
INSERT INTO `table_name`
(`abc`, `def`, `ghi`)
VALUES
(?, ?, ?) 
```

在调用`execute()`时，它将值作为一维数组传递`PDOStatement::execute()`（即，与问号关联的所有值都放在一个数组中）。这就是问题开始的地方 -`PDOStatement::execute()`不处理 MySQL 函数，而是将它们作为字符串引用，从而中断查询：

```
INSERT INTO `table_name`
(`abc`, `def`, `ghi`)
VALUES
('123', 456, 'NOW()') -- error, incorrect datetime value: 'NOW()' 
```

问题是 - 我如何在保持相同界面的同时完成这项工作？我知道我可以检查列的值是否是 MySQL 函数并将其直接放入而不是问号，但有很多函数可以在那里使用，这会很糟糕。

编辑：所以目前看来，最简单的选择是简单地将值设置为这样：`$var3 => 'noquote'`. 这不是一个很好的方法，但它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:53:53.963

为该方法添加另一个参数：

*   表名
*   值（作为关联数组）
*   sql（作为关联数组）

请记住，您不能使用“？” 当您想要访问列时，例如 in`COLUMN1 + 1`或`COLUMN1 + COLUMN2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:49:58.603

我是这样进行的：

```
$bdd->prepare(INSERT INTO `table_name` (`abc`, `def`, `ghi`) VALUES (?, ?, ?))
$bdd->execute(array('abcValue', 'devValue', 'ghiValue')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:01:33.713

您的最后一个查询出现错误`( -- error, incorrect datetime value: 'NOW()')` 尝试像这样格式化您的日期：

`DATE_FORMAT(now(), '%Y-%m-%d %H:%i:%s'))`

# sql - 比较来自 2 个不同数据库的 2 个不同表列

> ID：13511034
> 
> 赞同：5
> 
> 时间：2012-11-22T10:46:27.073
> 
> 标签：sql, sql-server, sql-server-2008

我需要比较来自 2 个不同数据库的不同表的列，以便根据要求将列添加到主表中。

例如：

假设在主数据库中我创建了一个表，例如：

```
create table test(id int,name varchar(10)) 
```

假设在测试数据库中我创建了一个表

```
create table testings(id int,name varchar(20), sal int) 
```

现在我必须比较 2 个表格列

我不想使用红门工具。

谁能帮我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-22T10:32:51.200

它只是您不想使用的红门工具还是基本上任何第三方工具？为什么不呢，即使您没有购买预算，您仍然可以在试用模式下使用它来完成工作？

我们一直在使用[Apex Diff](http://www.apexsql.com/sql_tools_diff.aspx)工具，但还有更多。

有这么多可用的工具，您可能可以在试用模式下一个一个地运行几个月……

了解系统表以及如何以本机方式执行此操作很棒，但它太耗时了......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T10:49:29.277

为此，您可以使用[**`EXCEPT`**or**`INTERSECT`**](http://msdn.microsoft.com/en-us/library/ms188055.aspx)运算符。像这样：

```
SELECT id, name FROM master.dbo.test
EXCEPT  -- or INTERSECT
SELECT id, name FROM test.dbo.testings 
```

这会给你：

> *   **EXCEPT：**返回左侧查询中未在右侧查询中找到的任何不同值。
>     
>     
> *   **INTERSECT：**返回由 INTERSECT 操作数左右两侧的查询返回的任何不同值。

在您的情况下，由于您想从两个不同的数据库中进行选择，您必须使用完全限定的表名。他们必须是形式**`database.schema.object_name`**。

**更新：**如果要比较两个表列的名称，而不是数据本身，则必须使用元数据表以与`EXCEPT`.

例如，假设您有两个数据库：

*   **`Test`**数据库包含表：

    ```
    create table test(id int, name varchar(10), dep varchar(50)); 
    ```

    和另一个数据库：

*   **`anotherdatabase`**数据库包含表：

    ```
    create table testings(id int,name varchar(20), sal int); 
    ```

并且您想比较两个表的列并获取另一个表中不存在的表，在我们的示例中您需要获取`sal`和`dep`。

然后你可以这样做：

```
SELECT ColumnName
FROM
(
    SELECT  c.name "ColumnName"
    FROM test.sys.tables t
    INNER JOIN test.sys.all_columns c 
            ON t.object_id = c.object_id
    INNER JOIN test.sys.types ty 
            ON c.system_type_id = ty.system_type_id
    WHERE t.name = 'test'
    EXCEPT
    SELECT  c.name
    FROM anotherdatabase.sys.tables t
    INNER JOIN anotherdatabase.sys.all_columns c 
            ON t.object_id = c.object_id
    INNER JOIN anotherdatabase.sys.types ty 
            ON c.system_type_id = ty.system_type_id
    WHERE t.name = 'testings'
) t1
UNION ALL
SELECT ColumnName
FROM
(
    SELECT  c.name ColumnName
    FROM anotherdatabase.sys.tables t
    INNER JOIN anotherdatabase.sys.all_columns c  
            ON t.object_id = c.object_id
    INNER JOIN anotherdatabase.sys.types ty      
            ON c.system_type_id = ty.system_type_id
    WHERE t.name = 'testings'
    EXCEPT
    SELECT  c.name
    FROM test.sys.tables t
    INNER JOIN test.sys.all_columns c 
            ON t.object_id = c.object_id
    INNER JOIN test.sys.types ty 
            ON c.system_type_id = ty.system_type_id
    WHERE t.name = 'test'
) t2; 
```

这应该给你：

![在此处输入图像描述](../Images/5bc932570ec72ec7d7b8a3ed6c81e5f0.png)

**请注意：**我加入了表格：

*   [**`databasename.sys.tables`**](http://msdn.microsoft.com/en-us/library/ms187406%28v=sql.100%29.aspx)， 和
*   [**`databasename.sys.all_columns`**](http://msdn.microsoft.com/en-us/library/ms177522.aspx)

与表：

*   [**`databasename.systypes`**](http://msdn.microsoft.com/en-us/library/ms188021%28v=sql.100%29.aspx)

仅获取具有相同数据类型的那些列。如果你没有加入这个表，那么如果两列具有相同的名称但不同的数据类型，它们将是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:46:52.890

要比较列，请使用`INFORMATION_SCHEMA.COLUMNS`SQL SERVER 中的表。

这是示例：

```
select column_name from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME='your_table_name1'
except
select column_name from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME='your_table_name2' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-05T11:25:47.000

这是我编写的一个 GPL Java 程序，用于使用 JDBC 跨任何两个异构数据库比较任何两个表中的数据，具有公共键和公共列：[https ://sourceforge.net/projects/metaqa/](https://sourceforge.net/projects/metaqa/)

它通过将（数字、字符串和日期）数据类型差异简化为通用格式来智能地排除它们。输出是一个稀疏的制表符分隔文件，扩展名为 .xls，用于电子表格。

# javascript - 在 jquery 插件的函数中使用当前元素

> ID：13511037
> 
> 赞同：1
> 
> 时间：2012-11-22T10:46:35.340
> 
> 标签：javascript, jquery, jquery-plugins, google-visualization

这是我用于绘制谷歌折线图的插件。

```
(function( $ ) {
    $.fn.loadLineChart = function(dataArr, title) {

        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(function() { drawChart(dataArr, title) });

        function drawChart(dataArr, title) {

            var data = google.visualization.arrayToDataTable(dataArr);

            var options = {
                title: title
            };

            var chart = new google.visualization.LineChart($('#chat_div')[0]);
            chart.draw(data, options);
        }
    };
})( jQuery ); 
```

我称这个插件如下。

```
<script type="text/javascript">        
    var data = '';
    var title = '';

    $('#chart_div').loadLineChart(data, title);
</script> 
```

现在我在插件中对当前元素 chart_div 进行硬编码。我如何在该函数中使用当前元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:49:40.337

由于 jQuery 插件只是`jQuery.prototype`（别名为`jQuery.fn`）的一种方法，因此您可以在插件中引用当前的 jQuery 实例`this`：

```
(function( $ ) {
    $.fn.loadLineChart = function(dataArr, title) {
        var $this = this;
        //...
        function drawChart(dataArr, title) {
            //...
            var chart = new google.visualization.LineChart($this[0]);
        }
    };
})( jQuery ); 
```

请注意，在这种情况下，您需要在方法中存储对 的当前值的引用`this`，`loadLineChart`因为`this`在函数中会有不同的值`drawChart`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:49:31.837

在插件中，`this`将引用插件实例化的元素。因此，以下内容将为您工作：

```
(function( $ ) {
    $.fn.loadLineChart = function(dataArr, title) {
        var $currentElement = this;

        // rest of your code...

        var chart = new google.visualization.LineChart($currentElement[0]);
    };
})( jQuery ); 
```

例如，如果您要在一组元素上调用插件，则`$(".foo").loadLineChart();`需要遍历`this`集合中的每个元素。

# javascript - 读取链接是否被点击的 Javascript 代码

> ID：13511039
> 
> 赞同：0
> 
> 时间：2012-11-22T10:46:39.270
> 
> 标签：javascript

我有一段简单的代码（包含在 CMS 中且无法编辑），如果已单击，则需要在标头中由 Javascript 读取。

这是代码

```
<div id="example" class="page-element-outer" style="text-align: left">
    <div class="page-element-inner" >
        <input type="image" name="Button1" id="Button" src="/getresource.axd?AssetID=16813" alt="Submit" style="text-align:left;" />
    </div>
</div> 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:50:58.420

您可以通过其 ID 选择元素并使用该方法附加一个单击事件侦听器[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)。

```
document.getElementById("Button").addEventListener("click", callback, true);

function callback() {
   // Do some stuff in here when clicked
   alert("clicked");

   // Return false to prevent the browser default 
   // click-behaviour, if that is desired
   return false;
} 
```

**对于旧版浏览器**

旧版本的 IE 不支持`addEventListener`，因此对于那些您可能需要执行以下操作的人：

```
var el = document.getElementById("Button");
if (el.addEventListener) {
  el.addEventListener('click', callback, false); 
} else if (el.attachEvent)  {
  el.attachEvent('onclick', callback);
} 
```

**等待 DOM 准备好**

如果您打算在页面的头部运行它，您还需要将它包装为一个 DOM 就绪的事件侦听器，否则会发生单击事件未附加到元素的更改，因为该元素没有' 运行脚本时 DOM 中不存在。

# gcc - g++ 的标准库路径。以及如何添加新的

> ID：13511042
> 
> 赞同：0
> 
> 时间：2012-11-22T10:46:48.823
> 
> 标签：gcc, debian, googletest

我想使用 gtest 但执行告诉我

```
./netTest: error while loading shared libraries: libgtest.so.0:
  cannot open shared object file: No such file or directory 
```

1.  gcc 链接器中查找库的标准路径是什么
2.  Debian 存储库的标准路径是什么
3.  如何将 libpaths 添加到 g++（-L 标志是否正确？）

注意2：我问是因为gtest的库在`/usr/local/libs/`但里面只有python和gtest。所有其他库都在`/usr/lib/`. 因此，我猜 gtest 安装程序出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:59:42.233

PS。也许您可以只安装 Debian`libgtest-dev`软件包（如果有的话）。

> 1.  gcc 链接器中查找库的标准路径是什么

你可以看到它`gcc -v -x c /dev/null -o /dev/null 2>&1 | grep LIBRARY_PATH`

> 1.  Debian 存储库的标准路径是什么

也许您的意思是动态加载器将在哪里寻找共享库。检查`/etc/ld.so.conf`和/或`/etc/ld.so.conf.d/`.

> 1.  如何将 libpaths 添加到 g++（-L 标志是否正确？）

您可以使用该`--rpath`选项来`ld`. 但是，我建议仅在开发过程中使用它，而不是在部署过程中使用它。

您还可以设置`LD_LIBRARY_PATH`为您的`libgtest.so.0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:21:28.977

前面问题的答案。gTest 不再使用预编译的库。

> ```
>  Use of precompiled libgtest Not Recommended
>   -------------------------------------------
> 
> The Google C++ Testing Framework uses conditional compilation for some
> things.  Because of the C++ "One Definition Rule", gtest must be
> compiled with exactly the same flags as your C++ code under test.
> Because this is hard to manage, upstream no longer recommends using
> precompiled libraries [1]. 
> ```
> 
> -- Steve M. Robbins，2012 年 4 月 21 日，星期六 17:00:56 -0500

好吧，为什么我没有在 Wheezy 中找到图书馆，这让我不再感到惊讶 :)

# matlab - “ModularRobot/VR Sink”中的 MATLAB 错误：无法评估初始化

> ID：13511044
> 
> 赞同：0
> 
> 时间：2012-11-22T10:47:04.297
> 
> 标签：matlab, model, initialization, simulink

当我尝试启动之前已成功执行的模拟时。我得到两个错误。其中的拳头是模型错误。其次是标题。以下是详细信息：

![在此处输入图像描述](../Images/15ec62716d544cb7a01c38829c03fe95.png)

由于我在 MATLAB 中几乎是初学者，因此我尝试进行一些研究以解决问题，但说明不够简单，无法理解。我真正想做的是，执行模拟，看看它是如何工作的，并模仿运行功能。

很抱歉，如果这个问题问的很蹩脚，但就像我说的，我必须从某个地方开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:13:37.340

Marty，很高兴看到你还在努力学习一些 cs 东西。

现在，仔细听我说。这不是一个真正的错误，也不是因为你的错误而发生的事情。

这只是您使用过时软件时发生的少数事情之一。让我猜猜，你用的是 MATLAB 9，对吧？好吧，我想这是你的问题。请改用版本 10。

我们会再见面的。

# dynamics-crm-2011 - 如何理解管理员或支持的参考号：#6CEBBCA5

> ID：13511055
> 
> 赞同：2
> 
> 时间：2012-11-22T10:47:54.397
> 
> 标签：dynamics-crm-2011

我正在使用 MS CRM 2011 On-Pre，在跟踪文件中，我在错误消息属性中找到以下行

“ Microsoft Dynamics CRM 遇到错误。管理员或支持人员的参考号：#6CEBBCA5”

我如何分析代码，是否有任何实体可以找到所有错误代码。

请建议我完全困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:44:32.357

代码本身不具有任何内在含义 - 它只是一个可以在跟踪日志文件中搜索的唯一字符串，以帮助查明与您的问题相关的日志。

[更多信息在这里](http://blogs.infinite-x.net/2011/04/03/crm-2011-tracing-errors-during-sdk-development/)

# php - NuSOAP varDump PHP 致命错误：允许的内存大小为 134217728 字节已用尽

> ID：13511058
> 
> 赞同：6
> 
> 时间：2012-11-22T10:48:24.020
> 
> 标签：php, nusoap

对不起我的英语不好 ：）

我有 NuSOAP 版本 0.9.5。我在尝试获取大数据时遇到了一个 php 错误：

PHP致命错误：允许的内存大小为134217728字节已用尽（试图分配27255652字节）

堆栈跟踪显示问题出在 varDump 方法中。

我的解决方案是：

我已将 varDump 方法（在 nusoap.php 中）更改为：

```
function varDump($data) {
    $ret_val = "";
    if ($this->debugLevel > 0) {
        ob_start();
        var_dump($data);
        $ret_val = ob_get_contents();
        ob_end_clean();
    }
    return $ret_val; 
} 
```

然后重置

```
$GLOBALS['_transient']['static']['nusoap_base']['globalDebugLevel'] 
```

到 0（从 9）。在 class.nusoap_base.php 和 nusoap.php 中。

这对我有帮助。

有人对此有何评论吗？或者也许更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-18T11:34:02.620

非常感谢和尊重 Aaron Mingle，他为 NuSOAP 内存不足问题找到了真正的解决方案。可以在这里找到解决方案：

[https://sourceforge.net/p/nusoap/discussion/193578/thread/12965595/](https://sourceforge.net/p/nusoap/discussion/193578/thread/12965595/)

我已经实施并立即进行了测试，现在我很高兴，因为它运行良好。就我而言，我有大约 45 MB 的 SOAP 消息大小（包括大约 30 个 base64 编码的 pdf 文件），甚至 2 GB 的 PHP 内存也没有帮助。所以我尝试了 Aaron Mingle 的解决方案，它是一个很好的解决方案，仅授予 PHP 384 MB 内存。

也向 Alexey Choporov +1，因为他的建议也是必需的。所以这两个修改都是 NuSOAP 中必须有的补丁，它可以很好地处理更大的消息。

# php - 提交表单，文件输入留空

> ID：13511059
> 
> 赞同：0
> 
> 时间：2012-11-22T10:48:35.577
> 
> 标签：php, html, forms, file-upload

我正在提交一个表格，我正在更新`state id`,`city name`和`city image`.

当我只更新图像时，它可以工作。当我更新`state id`并`city name`希望我的旧图像保持不变时，数据库中的照片字段变为空白。

我的 PHP 代码是这样的：

```
 <?php 

if(isset($_POST) && $_POST['submit'] == "Update")
{
        extract($_POST);
        if($_FILES['photo'])
        {
        $cityimg = upload_file($_FILES['photo'],'cityimg/','image','N','true','thumb/', 100, 100);
        $sql = "UPDATE city SET mcid = '$mcid', city_name = '$city_name', photo = '$cityimg' WHERE cid = '$cid'";
        }
        else
        {
        $sql = "UPDATE city SET mcid = '$mcid', city_name = '$city_name' WHERE cid = '$cid'";
        }
        $result = mysql_query($sql);
        if($result)
        {
            $msg = "City Updated Successfully.";
        }
}

?> 
```

我认为我的循环有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:51:23.990

You should test if a file was uploaded in a different way. For example, this will make sure that **no error occurred** during the file upload (and if there was any) :

```
if($_FILES['photo']['error'] == UPLOAD_ERR_OK){
    // A file was uploaded and there is no error
} 
```

If you only want to test **if no file was selected**, you could use `UPLOAD_ERR_NO_FILE`.

[More info on file upload error messages](http://php.net/manual/en/features.file-upload.errors.php)

This should work for you :

```
<?php 

if(isset($_POST) && $_POST['submit'] == "Update")
{
        extract($_POST);

        // If image was uploaded
        if($_FILES['logo']['error'] == UPLOAD_ERR_OK)
        {
            $cityimg = upload_file($_FILES['photo'],'cityimg/','image','N','true','thumb/', 100, 100);
            $sql = "UPDATE city SET mcid = '$mcid', city_name = '$city_name', photo = '$cityimg' WHERE cid = '$cid'";
        }

        // If no image was uploaded
        else
        {
            $sql = "UPDATE city SET mcid = '$mcid', city_name = '$city_name' WHERE cid = '$cid'";
        }
        $result = mysql_query($sql);
        if($result)
        {
            $msg = "City Updated Successfully.";
        }
} 
```

Check [this post](https://stackoverflow.com/questions/2958167/how-to-test-if-a-user-has-selected-a-file-to-upload) for more details

# php - 改进断言

> ID：13511067
> 
> 赞同：0
> 
> 时间：2012-11-22T10:49:10.037
> 
> 标签：php, assert

我想改进前置条件断言：

```
function foo($bar) {
    if($bar === null) {
        return;
    }

    // do stuff
} 
```

更好的解决方案是[g_return_if_fail](http://developer.gnome.org/glib/stable/glib-Warnings-and-Assertions.html#g-return-if-fail)和[g_return_val_if_fail](http://developer.gnome.org/glib/stable/glib-Warnings-and-Assertions.html#g-return-val-if-fail) C 宏。

[assert](http://php.net/manual/en/function.assert.php)似乎是一个不错的选择，但执行流程并没有中断。如果没有宏，解决方案是：

```
function foo($bar) {
    assert($bar === null) || return;

    // do stuff
} 
```

但是解析器不喜欢这个。你有其他想法吗？（首选 php 版本：5.3）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:26:11.983

```
if (!assert($bar === null)) {
  return;
} 
```

# jquery - Google Maps API 和 JQuery Slide Toggle 不能一起工作

> ID：13511071
> 
> 赞同：0
> 
> 时间：2012-11-22T10:49:18.623
> 
> 标签：jquery, google-maps, google-maps-api-3

请查看以下内容：

[jsfiddle](http://jsfiddle.net/witold/UjdZr/)

它包含一个 div 框，我想通过单击它来最小化/恢复它。在 Jsfiddle 中，它按预期工作。

但是，当我尝试将其覆盖在 Google 地图上时，有些东西正在刹车。SlideToggle() 不再起作用。 [这是](http://pollster.net/app7.html)我尝试使用 Jsfiddle 的页面。

有谁知道发生了什么？

这是有问题的javascript：

```
<script type="text/javascript" charset="utf-8">
  $("#button").click(function(){
    if($(this).html() == "+"){
        $(this).html("-");
    }
    else{
        $(this).html("+");
    }
    $("#box").slideToggle();
});​
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:28:14.790

我将 javascript 移到`</body>`标签之前，它可以工作。

# c# - EF EntityObject 动态属性访问

> ID：13511074
> 
> 赞同：1
> 
> 时间：2012-11-22T10:49:23.163
> 
> 标签：c#, entity-framework, dynamic, interface, poco

我是实体框架的新手，我坚持以下几点。

我有一个已导入 EDMX 模型的现有数据库。

我的一些实体共享相同的“所有者”概念。

每个实体都有一个“所有者”的自定义名称。有时它被命名为“作者”，有时是“所有者”，有时是法语“auteur”。

所以我实现了一个简单的接口并创建了部分类，所以我的实体都可以共享相同的命名概念“所有者”。

```
public interface IAPIResource
{
    int owner { get; }
} 
```

还有我实体 BlogPost 的部分课程

```
public partial class BlogPost : IAPIResource
{
    public int owner { get { return auteur; } }
} 
```

现在我想在 LINQToEntities 查询中使用它，但 LINQ 告诉我这是不可能的，因为 IAPIResource 不是实体类型！

```
public List<T> GetFilteredEntities<T>(int owner, IQueryable<T> entities, MyDBContext db)
{
    return entities.Where(e => ((IAPIResource)e).owner == owner).ToList();
} 
```

我已经尝试过反射（`.GetType`and `.GetProperty`and `.GetValue`），但 LINQ 也不支持。

我也尝试过 POCO，但运气不佳。

而且我不想用抽象实体等修改我的数据库模型。

有没有人有一个简单的解决方案而不深入研究 LINQ 表达式？

注意：真正的查询要复杂得多，这就是我不愿意使用表达式的原因。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:52:59.210

Entity Framework does not support an explicit cast to `IAPIResource`, but you don't need it, you should be able to just do

```
public List<T> GetFilteredEntities<T>(int owner, IQueryable<T> entities, MyDBContext db)
    where T : class, IAPIResource
{
    return entities.Where(e => e.owner == owner).ToList();
} 
```

However, this does require that you map your `owner` property in the implementing classes. You currently have

```
public int owner { get { return auteur; } } 
```

but that won't work, because Entity Framework won't see that `owner` and `auteur` are the same property. You do need to change this slightly; my personal preference would be to turn this around: make `auteur` a wrapper property for `owner` instead of the other way around. That way, you can continue using `auteur` in your code, and `owner` in queries.

# java - SortController：如何使用动态过滤器

> ID：13511083
> 
> 赞同：2
> 
> 时间：2012-11-22T10:49:34.767
> 
> 标签：java, swing, swingx, jxtable

SwingX 项目中的`JXTable`有一种方法可以`RowFilter`直接在`JXTable`（请参阅参考资料`JXTable#setRowFilter`）上设置。

我不清楚当过滤器实现是动态的时你需要做什么。

比较一下：在JDK中他们[`RowSorter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/RowSorter.html)在JDK1.6中引入了接口，这个接口允许附加一个`RowSorterListener`. 如果您有一个动态的`RowSorter`（也可以用于过滤），您可以在过滤器更改时向这些侦听器触发一个事件（尽管这要求过滤器可以访问，因为在 JDK`RowSorter`中没有 a`DynamicRowFilter`或`RowFilterEvent`）。

我所期望的是我可以设置一个“可观察的”`RowFilter`并且`JXTable`我什么都不用做。但由于当前的 API 似乎无法做到这一点，那么下一个最好的事情是什么？

*   每次更改时重新设置过滤器。这是否会产生影响，因为它与之前设置的实例完全相同`JXTable`？
*   滥用表格事件并触发您的表格模型已更改的事件，这将重新触发排序/过滤
*   不要使用该`setRowFilter`方法并创建自己的方法并使用`TableRowSorter`JDK API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:56:41.133

> 我们的用例是一个过滤器（不是行过滤器），可以更改它以过滤掉模型的元素，并且我们有一个基于该动态过滤器的 RowFilter 来过滤掉这些元素

重复我的评论：RowFilter 必须是不可变的。当将排序/过滤引入核心时，这是一个有意识的设计决策。所以实现“动态”过滤的方法是

*   使您的自定义过滤器（不是 rowFilter）可观察
*   实现该过滤器的侦听器，该过滤器在更改时创建一个新的 RowFilter
*   将 rowFilter 设置为 xtable（在 SwingX 中）或 DefaultRowSorter（在核心中）

**编辑**

> 我不同意那个设计，但不能动摇他

应该是：*我不同意*- 同时，我不太确定；-)

这种方法的优点是 RowFilter 实现起来真的很小，而且可重用性很高——只是一个简单的谓词，没有别的。这允许过滤器的简单逻辑复合（和/或）。过滤器的一部分没有通知的负担，分类器（或复合过滤器）的一部分也没有监听和更新自身的负担。然后考虑到过滤器更改的“动态”通常来自用户交互，并且无论如何都必须听取这些用户触发器，创建新的*rowFilter*与更新现有的 rowFilter 没什么大不了的。

# vim - VIM在命令行中设置光标位置

> ID：13511084
> 
> 赞同：3
> 
> 时间：2012-11-22T10:49:36.670
> 
> 标签：vim, text-cursor

我想在 Vim 中执行以下操作：

我在 .vimrc 文件中有这个重映射

```
:noremap <C-r> :Ack!  /home/user/somefolder/ 
```

这样我就可以在[Ack](https://github.com/mileszs/ack.vim)中搜索预定义的路径（某个文件夹），但是当我`<C-r>`用来触发它时，光标停留在路径的末尾，所以我必须使用箭头返回到后面，`Ack!`因为`Ack!`期望路径前的搜索词。

无论如何我可以配置此重映射以将光标放在路径之前？这样我就可以触发`<C-r>`并立即开始编写搜索词。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T11:12:10.620

这很容易：

```
:noremap <C-r> :Ack!  /home/user/somefolder/<C-Left><Left> 
```

就像大多数命令行映射都以 a 结尾`<CR>`来触发命令一样，您也可以使用光标移动（这在插入模式映射和缩写中也很方便）。

# php - Facebook PHP SDK - 获取用户手机

> ID：13511086
> 
> 赞同：1
> 
> 时间：2012-11-22T10:49:39.807
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我想问你是否可以通过 facebook sdk api 获得 fb 用户电话。

我查看权限列表，我没有找到任何东西。是否有某种方法可以获取有关电话的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:52:16.300

I don't think it's possible, as it's a personal information.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:31:23.110

不，你不能。查看权限列表：

[https://developers.facebook.com/docs/reference/login/user-friend-permissions/](https://developers.facebook.com/docs/reference/login/user-friend-permissions/)

# c# - 以编程方式访问 ASP.NET MVC4 上的文件

> ID：13511088
> 
> 赞同：1
> 
> 时间：2012-11-22T10:49:51.460
> 
> 标签：c#, asp.net, asp.net-mvc-4

作为 ASP.NET MVC4 项目的一部分，我需要能够读取和写入一些 XML 文件。我无法找到/访问我需要的文件。

我创建了一个演示项目，向其中添加了一个`/Documents`包含一些 XML 文件的文件夹。

所以在同一个项目中`/Classes`，我的班级有一个文件夹，应该使用`XDocument.load()`.

这是我想做的（以及我认为它应该如何工作）：

```
string path = "/Documents/test.xml"; // Doesn't work
XDocument xml = XDocument.load(path); 
```

但是，这不起作用。不适用于“/Documents”、“Documents”或“~/Documents”。提供完整路径是可行的，但如果网站要部署在其他环境中，则不是很有用。

```
string path = "D:/Projects/Demo/Demo/Documents/test.xml"; // Works
XDocument xml = XDocument.load(path); 
```

有什么建议我可以使用某种相对路径访问文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:51:17.587

用于[`Server.MapPath`](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)获取绝对路径。

```
string path = Server.MapPath("/Documents/test.xml");
XDocument xml = XDocument.load(path); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:52:13.290

Use `HttpContext.Current.Server.MapPath`

```
string path = HttpContext.Current.Server.MapPath("/Documents/test.xml"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:52:22.663

Have you tried:

```
var path = Server.MapPath("/Documents/test.xml"); 
```

# xcode - UIWebView - 如何找到长度

> ID：13511094
> 
> 赞同：0
> 
> 时间：2012-11-22T10:50:03.083
> 
> 标签：xcode, uiwebview

我需要知道 UIWebView 中输出的长度（以任何单位）。这可能吗？在内部，IOS 必须知道这一点才能控制滚动，但我似乎找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:26:08.350

如果长度是指内容的高度，则可以在`webViewDidFinishLoad:`委托方法中使用以下内容之一：

```
CGFloat height01 = [[[webView subviews] lastObject] contentSize].height;
CGFloat height02 = [webView sizeThatFits:CGSizeZero].height;
CGFloat height03 = [[webView stringByEvaluatingJavaScriptFromString:@"document.height"] floatValue]; 
```

它们应该返回相同的值。

# mysql - MySQL`BEFORE INSERT TRIGGER`如何在条件下跳过数据插入？

> ID：13511097
> 
> 赞同：3
> 
> 时间：2012-11-22T10:50:10.083
> 
> 标签：mysql, database, triggers

> **可能重复：**
> [MySQL 触发器以防止在某些条件下插入](https://stackoverflow.com/questions/2981930/mysql-trigger-to-prevent-insert-under-certain-conditions)

在 MySQL`BEFORE INSERT TRIGGER`中，如何在有条件的情况下跳过数据插入？

```
delimiter //
drop trigger if exists test_trigger //
create trigger test_trigger before insert on t
for each row
begin
  set @found := false;

  #Some code

  if @found then
    #How to skip the data insertion under condition?
  end if;
end   //

delimiter ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:00:13.707

两种解决方案，都引发错误：

1.  调用不存在的存储过程 -`CALL non_existent_proc()`
2.  使用[SIGNAL](http://dev.mysql.com/doc/refman/5.5/en/signal.html)语句引发错误（MySQL 5.5）。

示例 1：

```
...
IF @found THEN
  CALL non_existent_proc();
END IF;
... 
```

示例 2：

```
...
IF @found THEN
  SIGNAL SQLSTATE '02000' SET MESSAGE_TEXT = 'Wrong data';`
END IF;
... 
```

# javascript - 拆分一个大的 ul 列表

> ID：13511100
> 
> 赞同：0
> 
> 时间：2012-11-22T10:50:25.290
> 
> 标签：javascript, jquery, list, split, html-lists

我有一个很大的 ul 列表。有很多李项目。我想将这个大列表分成 10 个部分。我制作了一个脚本，但该脚本不起作用。我错了什么：

```
var maxItems = 10;
    var ul = $('.list-thumbnails');
    var current;
    ul.find('li').each(function(i, el) {
      if (i < maxItems) {
        // leave first 10 in the original list
        return;
      }
      if (i % maxItems == 0) {
        current =
            $(el)
                .closest('ul')
                .clone()
                .after($(el).closest('ul'));
      }
    .append(current);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:38:02.503

我已经修改了代码块，如下所示。请检查一下

由于您使用了 append 方法循环 $.each ，因此它不会反映在 ul 中，因此我们需要删除该元素。

```
var maxItems = 10;
            var ul = $('.list-thumbnails');
            var currentul;
            var elements = ul.find('li');
            elements.each(function (i, el) {
                if (i < maxItems) {
                    // leave first 10 in the original list
                    return;
                }
                if (i % maxItems == 0) {
                    currentul = $("<ul></ul>").addClass("new");
                    $(el).closest('ul').parent().append((currentul.append(el)));
                }
                else {
                    currentul.append(el)
                }

            });
            $('.list-thumbnails').find("li:gt(9)").remove(); 
```

请检查下面的 jsfiddle [http://jsfiddle.net/aQ5K8/13/](http://jsfiddle.net/aQ5K8/13/)

谢谢斯里达尔

# android - 手机重启后恢复闹钟管理器

> ID：13511101
> 
> 赞同：4
> 
> 时间：2012-11-22T10:50:25.767
> 
> 标签：android, widget, alarmmanager

我正在构建一个用于学习目的的小部件，它只是有一个配置活动，我可以在其中设置更新间隔。它工作正常，我可以创建它的多个实例。但是当我重新启动手机时，警报管理器会停止，并且小部件不会更新。经过一番搜索和 google'ng 我了解到我必须添加一个 BOOT COMPLETE 接收器，但经过几次尝试我未能实现所以任何人都知道如何在小部件上添加它或任何好的源代码示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T11:52:40.930

要在启动时执行某些操作，您只需执行以下操作。

首先在 中`manifest`，这是在应用程序标签下添加的：

```
 <receiver android:name="AlarmReceiver">
    <intent-filter>
        <action android:name="packagename.ACTION"/>
        <action android:name="packagename.ACTION2"/>
    </intent-filter>
</receiver>

<receiver android:name="BootSetter" >
    <intent-filter>
        <action
            android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

为了使其正常工作，您需要添加权限以在清单中使用以下行接收广播：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

然后你有一个类 BootSetter：

```
public class BootSetter extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // Do your stuff
    }
} 
```

有一个类似的帖子，虽然[这里](https://stackoverflow.com/a/7846622/969325)不完全一样。这是关于每天中午运行警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T14:10:07.450

我认为您在`AppWidgetProvider`扩展类（小部件类）以外的类中设置警报管理器。最好在**OnUpdate**方法`AppWidgetProvider`扩展类（小部件类）中设置警报管理器，然后启动后无需再次设置警报。

# ios - iOS Tesseract OCR 图像准备

> ID：13511102
> 
> 赞同：15
> 
> 时间：2012-11-22T10:50:26.093
> 
> 标签：ios, image-processing, ocr, tesseract

我想实现一个可以识别照片文本的 OCR 应用程序。

我成功在iOS中编译和集成Tesseract引擎，在拍摄清晰的文档（或从屏幕上截取这段文字的照片）时，我成功地得到了合理的检测，但对于路标、商店标志、彩色背景等其他文本，检测失败.

问题是需要什么样的图像处理准备才能获得更好的识别。例如，我希望我们需要将图像转换为灰度/黑白以及修复对比度等。

这怎么能在 iOS 中完成，有这个包吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T21:16:23.730

我目前正在做同样的事情。我发现保存在 Photoshop 中的 PNG 效果很好，但最初来自相机然后导入到应用程序中的图像从未工作过。不要让我解释它 - 但应用这个功能使这些图像工作。也许它也对你有用。

```
// this does the trick to have tesseract accept the UIImage.
UIImage * gs_convert_image (UIImage * src_img) {
    CGColorSpaceRef d_colorSpace = CGColorSpaceCreateDeviceRGB();
    /*
     * Note we specify 4 bytes per pixel here even though we ignore the
     * alpha value; you can't specify 3 bytes per-pixel.
     */
    size_t d_bytesPerRow = src_img.size.width * 4;
    unsigned char * imgData = (unsigned char*)malloc(src_img.size.height*d_bytesPerRow);
    CGContextRef context =  CGBitmapContextCreate(imgData, src_img.size.width,
                                                  src_img.size.height,
                                                  8, d_bytesPerRow,
                                                  d_colorSpace,
                                                  kCGImageAlphaNoneSkipFirst);

    UIGraphicsPushContext(context);
    // These next two lines 'flip' the drawing so it doesn't appear upside-down.
    CGContextTranslateCTM(context, 0.0, src_img.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    // Use UIImage's drawInRect: instead of the CGContextDrawImage function, otherwise you'll have issues when the source image is in portrait orientation.
    [src_img drawInRect:CGRectMake(0.0, 0.0, src_img.size.width, src_img.size.height)];
    UIGraphicsPopContext();

    /*
     * At this point, we have the raw ARGB pixel data in the imgData buffer, so
     * we can perform whatever image processing here.
     */

    // After we've processed the raw data, turn it back into a UIImage instance.
    CGImageRef new_img = CGBitmapContextCreateImage(context);
    UIImage * convertedImage = [[UIImage alloc] initWithCGImage:
                                 new_img];

    CGImageRelease(new_img);
    CGContextRelease(context);
    CGColorSpaceRelease(d_colorSpace);
    free(imgData);
    return convertedImage;
} 
```

我还进行了很多实验，为 tesseract 准备图像。调整大小，转换为灰度，然后调整亮度和对比度似乎效果最好。

我也试过这个 GPUImage 库。[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage) 和 GPUImageAverageLuminanceThresholdFilter 似乎给了我一个很好的调整图像，但 tesseract 似乎不能很好地处理它。

我还将 opencv 放入我的项目中，并计划尝试它的图像例程。甚至可能进行一些框检测以找到文本区域（我希望这会加快 tesseract）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T15:36:48.983

我已经使用了上面的代码，但还添加了另外两个函数调用来转换图像，以便它可以与 Tesseract 一起使用。

首先，我使用图像调整大小脚本转换为 640 x 640，这对于 Tesseract 来说似乎更易于管理。

```
-(UIImage *)resizeImage:(UIImage *)image {

    CGImageRef imageRef = [image CGImage];
    CGImageAlphaInfo alphaInfo = CGImageGetAlphaInfo(imageRef);
    CGColorSpaceRef colorSpaceInfo = CGColorSpaceCreateDeviceRGB();

    if (alphaInfo == kCGImageAlphaNone)
        alphaInfo = kCGImageAlphaNoneSkipLast;

    int width, height;

    width = 640;//[image size].width;
    height = 640;//[image size].height;

    CGContextRef bitmap;

    if (image.imageOrientation == UIImageOrientationUp | image.imageOrientation == UIImageOrientationDown) {
        bitmap = CGBitmapContextCreate(NULL, width, height, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, alphaInfo);

    } else {
        bitmap = CGBitmapContextCreate(NULL, height, width, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, alphaInfo);

    }

    if (image.imageOrientation == UIImageOrientationLeft) {
        NSLog(@"image orientation left");
        CGContextRotateCTM (bitmap, radians(90));
        CGContextTranslateCTM (bitmap, 0, -height);

    } else if (image.imageOrientation == UIImageOrientationRight) {
        NSLog(@"image orientation right");
        CGContextRotateCTM (bitmap, radians(-90));
        CGContextTranslateCTM (bitmap, -width, 0);

    } else if (image.imageOrientation == UIImageOrientationUp) {
        NSLog(@"image orientation up");

    } else if (image.imageOrientation == UIImageOrientationDown) {
        NSLog(@"image orientation down");
        CGContextTranslateCTM (bitmap, width,height);
        CGContextRotateCTM (bitmap, radians(-180.));

    }

    CGContextDrawImage(bitmap, CGRectMake(0, 0, width, height), imageRef);
    CGImageRef ref = CGBitmapContextCreateImage(bitmap);
    UIImage *result = [UIImage imageWithCGImage:ref];

    CGContextRelease(bitmap);
    CGImageRelease(ref);

    return result;
} 
```

为了使弧度起作用，请确保您将其声明在`@implementation`

```
static inline double radians (double degrees) {return degrees * M_PI/180;} 
```

然后我转换为灰度。

我发现这篇文章在转换为灰度时[将图像](https://stackoverflow.com/questions/1298867/convert-image-to-grayscale)转换为灰度。

我已成功使用此处的代码，现在可以读取不同颜色的文本和不同颜色的背景

我已经稍微修改了代码以作为类中的函数而不是其他人所做的自己的类

```
- (UIImage *) toGrayscale:(UIImage*)img
{
    const int RED = 1;
    const int GREEN = 2;
    const int BLUE = 3;

    // Create image rectangle with current image width/height
    CGRect imageRect = CGRectMake(0, 0, img.size.width * img.scale, img.size.height * img.scale);

    int width = imageRect.size.width;
    int height = imageRect.size.height;

    // the pixels will be painted to this array
    uint32_t *pixels = (uint32_t *) malloc(width * height * sizeof(uint32_t));

    // clear the pixels so any transparency is preserved
    memset(pixels, 0, width * height * sizeof(uint32_t));

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // create a context with RGBA pixels
    CGContextRef context = CGBitmapContextCreate(pixels, width, height, 8, width * sizeof(uint32_t), colorSpace,
                                                 kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedLast);

    // paint the bitmap to our context which will fill in the pixels array
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), [img CGImage]);

    for(int y = 0; y < height; y++) {
        for(int x = 0; x < width; x++) {
            uint8_t *rgbaPixel = (uint8_t *) &pixels[y * width + x];

            // convert to grayscale using recommended method:     http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale
            uint32_t gray = 0.3 * rgbaPixel[RED] + 0.59 * rgbaPixel[GREEN] + 0.11 * rgbaPixel[BLUE];

            // set the pixels to gray
            rgbaPixel[RED] = gray;
            rgbaPixel[GREEN] = gray;
            rgbaPixel[BLUE] = gray;
        }
    }

    // create a new CGImageRef from our context with the modified pixels
    CGImageRef image = CGBitmapContextCreateImage(context);

    // we're done with the context, color space, and pixels
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    free(pixels);

    // make a new UIImage to return
    UIImage *resultUIImage = [UIImage imageWithCGImage:image
                                             scale:img.scale
                                       orientation:UIImageOrientationUp];

    // we're done with image now too
    CGImageRelease(image);

    return resultUIImage;
} 
```

# html - 调整大小后 UIWebView 加载/排序错误

> ID：13511112
> 
> 赞同：0
> 
> 时间：2012-11-22T10:50:50.947
> 
> 标签：html, ios, css, xcode

我有一个 2 的屏幕`UIWebView`。用户可以左右拖动视图以使左右视图更大（分别）和另一个更小（如`UISplitView`定制和自制）。我正在从字符串和本地 .css 文件加载 .html 页面。调整大小后，`UIWebView`如果我加载新页面，在右侧会有黑色或白色条纹`UIWebView`。这个条纹是 web 视图的一部分（不是视图之间的空间），如果我上下滚动`webView`，条纹将消失，页面将正确显示。此问题仅在 iOS 6 中出现，并且仅在设备上出现（在模拟器上不会出现）。

一些注意事项：
- .css 文件包含具有固定位置的元素。更改为绝对位置并没有解决问题，但改变了它：在拖动过程中出现了黑色条纹。
- 阻力越慢，条纹越大。
- 调整页面大小后正确显示，只有当我加载新页面时才会显示条纹。
- 调整 web 视图大小和加载页面之间的时间无关紧要，它可以是立即或几分钟后。

现在，作为一种解决方法，我创建一个新`UIWebView`属性并将旧属性复制到新属性。但是我需要重新加载呈现的页面，这会使白色闪烁......

知道为什么会发生，以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:50:48.030

很抱歉，反馈迟了，但最近我正在尝试似乎是同样的问题。我正在使用 UIWebView 将一些文本显示到网格视图中。网格视图的“布局”从纵向到横向是不同的，我正在使用单元格的百分比来构建（横向和纵向）网格框架，在我的情况下，它使 web 视图没有整数大小。这让我认为在调整 web 视图大小后可能是一些半像素问题。

# database - 数据库中的读写锁

> ID：13511113
> 
> 赞同：1
> 
> 时间：2012-11-22T10:50:53.597
> 
> 标签：database, locking, isolation-level

根据关于[数据库隔离](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)级别的 wiki 文档，4 个不同的级别匹配不同的锁配置。

但是锁本身是什么？数据库是否提供这种读写锁定机制或读写锁只是基于隔离级别和提交的抽象？

获得有关此隔离级别如何在 db 本身中工作的详细说明会很好。对此有点犹豫。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:52:38.533

隔离级别是对如何提供一种同时访问和更改数据库中数据的透明方式的抽象。如果您的数据库能够隔离，则不同的场景不会导致状态不一致。

示例：想象一个银行账户数据库。为了简单起见，想象一个有两行的表，一个帐号和总余额。

现在，如果有人将一些钱从账户 1 转移到账户 2 [流程 1]，而同时其他人将钱从账户 2 转移到账户 3 [流程 2]，会发生什么情况？假设 [1] 首先读取账户 1 和 2 的总数。然后，[2] 轮到他并被完全执行。[1] 现在使用过时的值，因此将帐户 2 的总数设置为错误值。

对于事务，[2] 必须等到 [1] 完成整个过程。通常这是用锁来实现的，因此数据库会锁定 [1] 迄今为止使用的所有内容。

# iphone - 添加 cocos2d 库 添加问题

> ID：13511117
> 
> 赞同：0
> 
> 时间：2012-11-22T10:51:01.777
> 
> 标签：iphone, xcode4, cocos2d-iphone

我是 cocos2d 游戏开发领域的新开发人员，在创建 Cocos2d 项目和显示以下分层形式的所有文件时遇到了一些奇怪的问题。

![在此处输入图像描述](../Images/dc57bf6b405d0c5c0b5382ff6c2ebc9f.png)

如何将 cocos2d library.a 添加到项目表单中

在下面的屏幕中，在另一个从互联网下载的现成项目中添加了库，但在我的情况下，没有任何 cocos2d 库显示

![在此处输入图像描述](../Images/d54c9ee6a167fec693b550d036e2d17a.png)

所以我的问题是**“如何添加 cocos2d 库”**到我们的项目中。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:33:58.760

[按照我的 Cocos2D + ARC 项目设置教程](http://www.learn-cocos2d.com/2012/04/enable-arc-cocos2d-project-video-tutorial/)，你最终会得到一个项目：

*   cocos2d 设置为静态库
*   启用 ARC

您还应该尝试[Kobold2D](http://www.kobold2d.com)。启动 cocos2d 项目要容易得多，而不必处理库和所有这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:44:40.390

Download [Cocos2d here](http://www.cocos2d-iphone.org/download)

Then open terminal and execute this commands.

```
$ cd cocos2d-iphone
$ ./install-templates.sh -f 
```

After this, you can find cocos2d template app in Xcode.(Xcode->New Project->Cocos2D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:00:27.493

您可以查看[本教程](http://www.raywenderlich.com/352/how-to-make-a-simple-iphone-game-with-cocos2d-tutorial)。它非常好，包含如何添加 cocos2d 库的说明

# javascript - jQuery/Javascript 强制/压力鼠标点击

> ID：13511120
> 
> 赞同：0
> 
> 时间：2012-11-22T10:51:08.573
> 
> 标签：javascript, jquery, jquery-click-event

我想知道是否有任何方法可以在点击时获得压力水平（用户在点击鼠标键/按钮时产生的压力）。任何资源或链接？

对不起我的英语不好，希望我的问题很清楚，希望不仅仅是乌托邦！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-01T22:56:28.697

*我意识到我正在用一些当时不相关的东西碰到一个旧线程，但我相信这在未来对其他人有用。*

正如该线程上的许多其他人所指出的那样，几乎所有计算机鼠标都不会测量使用的压力，因此您无法测量它。**但是**，有与鼠标不同的指点设备，例如绘图板或触控板。在 Firefox 等基于 Gecko 的浏览器中，鼠标事件有非标准`mozPressure`属性。你会像这样使用它：

```
document.addEventListener('click', function (e) {
    alert(e.mozPressure);
}); 
```

`mozPressure`是一个介于 0.0 和 1.0 之间的值，具体取决于鼠标按下的力度。如果您使用的是普通鼠标或其他无法检测压力的设备，则此值始终为 0。

[参考](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:54:35.410

鼠标（硬件）不会记录您单击它的力度，并且 javascript 无法跟踪不存在的内容。

# .net - X509Chain 似乎忽略了 RevocationMode 和 VerificationFlags

> ID：13511121
> 
> 赞同：6
> 
> 时间：2012-11-22T10:51:11.753
> 
> 标签：.net, security, ssl, ssl-certificate, client-certificates

我在使用客户端证书对`HttpWebRequest`. （未发送客户端证书）。经过一番调查，这似乎是因为证书没有通过验证。

为了缩小问题的范围，我使用[了 MSDN 中的这个例子](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509chain.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)（它有问题，请参阅这个问题的结尾。还要确保你有参考`System.Security`）。它告诉我验证失败，因为它无法检查证书的吊销状态（这是有道理的，我们的 CA 没有启用 OCSP）证书将用于离线部署，因此永远无法检查无论如何撤销。因此，我想禁用吊销检查。

我已将示例修改如下

```
''~ line 29
ch.ChainPolicy.RevocationMode = X509RevocationMode.NoCheck
ch.ChainPolicy.VerificationFlags =
    X509VerificationFlags.IgnoreCertificateAuthorityRevocationUnknown Or
    X509VerificationFlags.IgnoreCtlSignerRevocationUnknown Or
    X509VerificationFlags.IgnoreEndRevocationUnknown Or
    X509VerificationFlags.IgnoreRootRevocationUnknown
ch.Build(certificate)
Console.WriteLine("Chain Information")
Console.WriteLine("Chain revocation flag: {0}", ch.ChainPolicy.RevocationFlag)
... 
```

不幸的是，这仍然导致我的证书验证失败

```
Element issuer name: [Obfuscated]
Element certificate valid until: 20/11/2013 17:50:01
Element certificate is valid: False
Element error status length: 0
Element information:
Number of element extensions: 8 
```

请注意，如果没有上面指定的标志，我会`error status length: 1`得到`64\. The revocation function was unable to check revocation for the certificate.`*****

因此，显然标志正在影响某些东西（我不再收到错误），但证书没有通过验证。有人可以解释为什么吗？要么我有另一个没有被报告的错误，要么我正在以完全错误的方式解决这个问题。

***NB：** MSDN 示例中存在一个小错误 ~ 第 57 行。for 循环应检查`element.ChainElementStatus.Length > 0`and then `For index = 0 To element.ChainElementStatus.Length - 1`。否则，证书仍然失败，但无论使用何种标志，都不会显示任何原因

# php - Magento 中的多商店电子邮件模板

> ID：13511127
> 
> 赞同：4
> 
> 时间：2012-11-22T10:51:26.767
> 
> 标签：php, email, magento

我的 Magento 网站（英语/威尔士语）中有两家商店。有没有办法根据他们购买的商店视图以不同的语言发送电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:34:30.760

有两种方法可以做到这一点

*   将您的邮件复制到 app/locale/your_locale 并将它们本地化
*   在后端，在`System -> Transactional Emails`创建新的已翻译邮件模板下。接下来，您必须为您的商店视图分配这些特殊的邮件模板`System -> Configuration -> Customer`，`System -> Configuration -> Sales Emails`依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:57:25.087

最简单的方法是将“email”目录从 app/locale/en_US/template/ 复制到其他语言目录，例如 app/locale/xx_xx/template/email，然后打开该目录中的文件并进行翻译。

# javascript - onfocus 下拉菜单需要双击显示菜单

> ID：13511128
> 
> 赞同：1
> 
> 时间：2012-11-22T10:51:29.683
> 
> 标签：javascript, jquery, html

在我的页面上使用`Internet explorer`我有一个下拉菜单，但在第一次加载页面时，因为它上面有一个`onFocus`，它需要双击才能显示菜单。如何避免双击。

`onFocus`必须仍然触发但菜单必须同时显示？我该怎么做，因为双击很烦人？

这是一个简单的例子

[http://jsfiddle.net/tgH7b/3/](http://jsfiddle.net/tgH7b/3/)

这是代码

```
 <select name="cars" >
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat" selected="selected">Fiat</option>
<option value="audi">Audi</option>
</select>    

<select name="cars" onFocus="this.style.background = '#999';$(this).click();">
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat" selected="selected">Fiat</option>
<option value="audi">Audi</option>
</select>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:47:49.943

我能想到的唯一解决方案是使用 focusin() 回调函数：

注意：focusin() 支持事件冒泡

[http://jsfiddle.net/2AUs6/](http://jsfiddle.net/2AUs6/)

```
<select name="cars" >
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat" selected="selected">Fiat</option>
<option value="audi">Audi</option>
</select>    

<!-- this one -->
<select name="cars">
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat" selected="selected">Fiat</option>
<option value="audi">Audi</option>
</select>

$('select[name=cars]:eq(1)').focusin(function(){
    $(this).css('background','#999')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:57:54.067

这是来自代码项目的可能解决方案

[http://www.codeproject.com/Questions/89610/ASP-NET-how-to-create-a-dropdownlist-that-onfocus](http://www.codeproject.com/Questions/89610/ASP-NET-how-to-create-a-dropdownlist-that-onfocus)

# spring - Limit concurrent method invocation with Spring aop

> ID：13511130
> 
> 赞同：1
> 
> 时间：2012-11-22T10:51:31.817
> 
> 标签：spring, concurrency, aop

I want to limit concurrent method invocation in spring application.

There is [interceptor](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/aop/interceptor/ConcurrencyThrottleInterceptor.html) for this and [here](http://www.java2s.com/Code/Java/Spring/ConcurrencyThrottleInterceptor.htm) the example of using this interceptor. But the problem is that method(which need to be limited) is not in a bean, I am creating new object every time I need to call method. Is there is possibility to achieve limitation in this case?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:05:27.273

您可以将[Load-time weaving 与 AspectJ 一起](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/html/aop.html#aop-aj-ltw)使用，并编写一个自定义`aspect`来进行节流。

*例子*

```
@Aspect
public class ThrottlingAspect {
    private static final int MAX_CONCURRENT_INVOCATIONS = 20;
    private final Semaphore throttle = new Semaphore (MAX_CONCURRENT_INVOCATIONS, true);

    @Around("methodsToBeThrottled()")
    public Object profile(ProceedingJoinPoint pjp) throws Throwable {
        throttle.acquire ();
        try {
            return pjp.proceed ();
        }
        finally {
            throttle.release ();
        }
    }

    @Pointcut("execution(public * foo..*.*(..))")
    public void methodsToBeThrottled(){}
} 
```

# python - Transparent drag icon is flickering

> ID：13511132
> 
> 赞同：1
> 
> 时间：2012-11-22T10:51:45.733
> 
> 标签：python, drag-and-drop, pygtk

I'm setting a transparent PNG as a drag icon:

```
pixbuf = gtk.gdk.pixbuf_new_from_file('image.png')
ev_box.drag_source_set_icon_pixbuf(pixbuf) 
```

As soon as I begin a DND operation the transparent parts of the image start flickering. This happens only on a Linux test system (CentOS). On Windows everything is fine.

Is there a fix or a better workaround than not using a transparent image?

# unit-testing - Unit tests fail when using Moles 0.94 and VS2012, "Hosting rules specify that the test type 'Unit Test' cannot run in the host adapter 'Moles'"

> ID：13511135
> 
> 赞同：3
> 
> 时间：2012-11-22T10:51:58.450
> 
> 标签：unit-testing, visual-studio-2012, moles, pex

I'm trying to run some Unit Tests using Moles 0.94 and VS2012 in preparation to moving to TFS 2012.
The tests currently work fine on a TFS 2010 build server.

The first error I got was:

> The host type 'Moles' cannot be loaded for the following reason: The key 'Moles' cannot be found. Make sure that the appropriate host adapter is installed on the machine. Exception doesn't have a stacktrace

I found that the Moles installer didn't create the correct entries in the registry, as per a comment in this post: [Test Fails Due to Moles Under 64-bit Process](http://social.msdn.microsoft.com/Forums/en/pex/thread/176b2fc5-882e-413b-b4d5-10ea6b486e65)

I decided to update my registry, so under Visual Studio\11.0\ the host adapters are now there too. They were only there for 10.0 before.

In my test.settings file I've tried both **Force 32 bit** and **Run in 64 bit**.
I've added the following to my Assembly.cs:

> `[assembly: MolesAssemblySettings(Bitness = MolesBitness.x64)]`

I now get the following error:

> Hosting rules specify that the test type 'Unit Test' cannot run in the host adapter 'Moles'. To run this test in 'Moles', change the hosting rules. To use the default test host for tests that cannot be run in the specified host adapter, change the test settings.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:09:59.633

请记住，在 Visual Studio 2012 中，Moles 框架已替换为 Fakes。以下是如何迁移： http: [//www.hoonzis.com/fakes-is-new-test-isolation-framework/](http://www.hoonzis.com/fakes-is-new-test-isolation-framework/)

# php - cakephp Table for model was not found in datasource default

> ID：13511136
> 
> 赞同：5
> 
> 时间：2012-11-22T10:51:59.607
> 
> 标签：php, mysql, cakephp

I have just a table on my database named "ficha_seg". The name of my model file is "Ficha.php" and the name of the controller is "FichasController.php".

So, why i'm getting the error:

```
Error: Table fichas for model Ficha was not found in datasource default. 
```

after configured my index() method of controller like this:

```
 public function index() {
    $this->set('ficha_seg', $this->Ficha->find('all'));
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-22T11:20:06.737

默认情况下，模型使用模型类名的小写复数形式作为数据库表名。

如果你需要为你的模型使用另一个表名，你可以使用`useTable`属性：

```
class Ficha extends AppModel 
{
    public $useTable = 'ficha_seg';
} 
```

请参阅[http://book.cakephp.org/2.0/en/models/model-attributes.html#usetable](http://book.cakephp.org/2.0/en/models/model-attributes.html#usetable) 和Cookbook 中的[模型约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T11:22:59.873

为了遵循 CakePHP 的约定，你的表名应该是复数形式：`ficha_segs`并且你的模型名应该是 'FichaSeg'。

如果您出于任何原因不想关注它，请按照@nlcO 所说的去做。

# php - how to save .html file by PHP by save as button?

> ID：13511137
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:52:01.270
> 
> 标签：php, html, save

I've created a PHP file which shows the results from a MySQL database as we all create like in

```
echo "<table><tr><td>";
...
echo "</td></tr></table>"; 
```

But now I want to make a button at the bottom of the table, something like *'save report'*, which saves the created table into HTML format.

So how could it be done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:23:37.830

您可以使用以下脚本：

**index.php**
在 index.php 中，您有 HTML 表。

```
<?php

$contents = "<table><tr><td>A</td><td>B</td></tr><tr><td>One</td><td>Two</td></tr><tr><td>Three</td><td>Four</td></tr></table>"; // Put here the source code of your table.

?>
<html>
    <head>
        <title>Save the file!</title>
    </head>
    <body>

        <?php echo $contents; ?>

        <form action="savefile.php" method="post">
            <input type="hidden" name="contents" value="<?php echo htmlspecialchars($contents); ?>">
            <input type="submit" value="Save file" />
        </form>
    </body>
</html> 
```

**savefile.php**
然后使用文件 savefile.php 弹出浏览器的下载对话框来保存文件。

```
<?php

if ($_SERVER['REQUEST_METHOD'] == "POST") {
    header('Content-type: text/html');
    header('Content-Disposition: attachment; filename="table.html"');

    echo $_POST['contents'];
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:34:34.307

我想你想将 PHP/MySQL 生成的报告保存为 HTML 文件？

```
<?php

// Open file for writing
$fileHandle = fopen("/DestinationPath/DestinationFile.html", "w");

// Dump File
$head = "<html><head><title>my reports</title></head><body>\n";
fwrite($fileHandle, $head);
$sql = mysql_query("Your sql query here");
while ($result = mysql_fetch_assoc($sql)) {
    $line = $result['yourmysqlfield']."\n";
    fwrite($fileHandle, $line);

}
$foot = "</body></html>\n";
fwrite($fileHandle, $foot);

// Close File
close($fileHandle);

?> 
```

# javascript - How to preprocess HTML before it is parsed by the browser - block resorce loading

> ID：13511142
> 
> 赞同：2
> 
> 时间：2012-11-22T10:52:13.380
> 
> 标签：javascript, html, css

I am looking for a way to modify some text inside the HTML before it is being parsed by the browser. More precisely, I would like to remove some tags from the HTML so the image resources would not be fetched by the browser, only when I am ready I could insert these tag back to have them loaded. Is it possible to do that via some JS/Jquery or CSS, if so, how?

the motivation here is to be able to block the loading of some resources on a page and have them loaded only when needed according to some logic. this needs to be done by some kind of scripting added to the page

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:56:22.543

因为您是在 JavaScript 中执行此操作，所以在启动您的`<script>`标签时已经处理了 HTML。

您可以将`<script>`标签移动到`<head>`from 中`<body>`，或将其移动到正文的开头。但是这里的问题是，您必须等待元素在 DOM 中实际创建，然后才能使用它们。

您可以使用类似`setTimeout()`或类似的东西并不断寻找它们，直到找到它们，但是在创建它们和您的脚本找到它们之间仍然会有一点延迟，此时它们可能已经开始加载。

唯一可靠的方法是在标记服务器端到达浏览器之前很久就处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:35:07.807

`noscript`如果您可以在解析/评估之前将标签放在标记中的关键位置，我的回答可能会有用：

[客户端动态删除 <head> 中的 <script> 标签](https://stackoverflow.com/questions/12748067/client-side-dynamic-removal-of-script-tags-in-head#answer-12872102)

但是，这种方法（对于启用了 javascript 的代理）会延迟整个页面的呈现，或者至少会延迟您需要影响的区域。

### 基本广义理论

`noscript`用类或 id 标识的标签包装您的身体或特定区域。`noscript`在抓取标签并将 html 内容作为字符串读取的关闭之后放置一些 javascript 以直接执行。此时，您可以随意修改 html 字符串，然后将其重新注入到 DOM 中以替换`noscript`标记。

### 更具体的实现

如果您事先知道需要推迟哪些资源（例如所有图像），则可以用`noscript`标签包装每个有问题的图像。然后触发一些 JavaScript 来抓取所有`noscripts`内容并重写包含的图像 html 以使用占位符或较低质量的图像版本。同时，您可以设置事件侦听器或超时，以便在适当的时候注入实际图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:28:29.830

The [Lazy Load Plugin for jQuery](http://www.appelsiini.net/projects/lazyload)或许正是您想要的。它延迟了长网页中图像的加载。

您可以使用任何 jQuery 事件，例如单击或鼠标悬停。您还可以使用自己的自定义事件，例如 foobar。默认是等到用户向下滚动并且图像出现在窗口上。

除了所有之外，还可以延迟加载图像。以下代码等待页面完成加载（不仅是 HTML，还有任何可见图像）。页面完成后五秒钟图像会自动加载。

```
$(function() {          
    $("img:below-the-fold").lazyload({
        event : "sporty"
    });
});
$(window).bind("load", function() { 
    var timeout = setTimeout(function() {
       $("img.lazy").trigger("sporty");
    }, 5000);
}); 
```

检查[延迟加载演示](http://www.appelsiini.net/projects/lazyload/enabled_timeout.html)。

# facebook - 如何实现OG-Tags的国际化？

> ID：13511143
> 
> 赞同：13
> 
> 时间：2012-11-22T10:52:13.710
> 
> 标签：facebook, facebook-graph-api, localization, internationalization, facebook-opengraph

对于即将到来的项目，我们希望将我们的应用程序翻译成多种语言。查看 Facebook 的[How-To: Open Graph Internationalization](https://developers.facebook.com/docs/technical-guides/opengraph/internationalization/)页面，您会获得有关执行此操作的非常详细的信息。

所以，我们正确地实现了标签。以讲英语的用户查看页面时，您会得到：

```
<meta property="og:url" content="https://site.url" />
<meta property="og:title" content="English title" />
<meta property="og:description" content="English description" />
<meta property="og:locale" content="en_US" />
<meta property="og:locale:alternate" content="de_DE" /> 
```

对于德国用户来说，反之亦然：

```
<meta property="og:url" content="https://site.url" />
<meta property="og:title" content="German title" />
<meta property="og:description" content="German description" />
<meta property="og:locale" content="de_DE" />
<meta property="og:locale:alternate" content="en_US" /> 
```

如文档中所述，我们查看“?fb_locale”-get 参数，此外，解析 HTTP_X_FACEBOOK_LOCALE 标头以决定应显示哪个翻译。

所以，我的问题如下：

1.  当使用 Facebook Debugger（调试器中使用的任何语言（使用 ?locale=de_DE eg））调试提到的 url 时，会显示英文文本。这是调试器的错误还是预期的行为？

2.  在调试器中单击备用区域设置链接时，?locale=de_DE 将附加到调试器 url 并且界面更改为德语。但是区域设置并没有传递给 url 本身，因为它看起来，因为抓取的文本仍然是英文的。关于这个有什么提示吗？

3.  在调试器中**手动**将“?fb_locale=de_DE”参数附加到 url 时，调试器的“对象属性”部分仍然是英文，而“原始打开图形文档信息”包含德语翻译。这是正确的还是应该更新“对象属性”？

4.  是否有任何网站使用您所知道的 og-tags 的适当国际化？在野外看到一个功能齐全的例子真是太棒了。

5.  当直接在 Facebook 新闻源中粘贴提到的站点 URL 时（作为德国 Facebook 的用户），Facebook 仅显示英文 og 文本。当一切都正确实施时，它不应该在这种情况下显示德语文本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:28:33.220

我回答了我自己的问题：[这里](https://stackoverflow.com/questions/12201245/facebook-opengraph-crawler-doesnt-send-me-fb-locale)

您必须刷新 facebook 的缓存。

```
curl -X POST -F "id=http://yoururl" -F "scrape=true" -F "locale=fr_fr" "https://graph.facebook.com" -s 
```

（在我的示例中，我使用了 fr_fr）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-12T18:52:28.807

我有同样的问题，并写信给 facebook 支持。他们的回答是这样的：

> ... Open Graph Localization 的用例不是用于在 Facebook 上共享链接和本地化元数据。相反，它旨在用作自定义 Open Graph 故事的一部分，例如“X 完成了一个级别”。
> 
> 基本上，当使用指向自托管对象的链接发布开放图故事时，我们才会发送 fb_locale 参数和 X-Facebook-Locale HTTP 标头。

您可以点击此链接了解详情：[https ://developers.facebook.com/bugs/141601252889984](https://developers.facebook.com/bugs/141601252889984)

# facebook - Facebook.com 桌面网络游戏的新政策

> ID：13511148
> 
> 赞同：0
> 
> 时间：2012-11-22T10:52:26.513
> 
> 标签：facebook, web, desktop, policies

“facebook.com 上的桌面网络游戏”的用途是什么？

如何仅在 facebook.com 上创建网页游戏？

我目前拥有游戏 www.logogame.biz，我不想受到即将出台的新政策的影响。

我想在“facebook.com”上移动游戏以避免新的限制。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:31:18.087

好吧，也许你跳过开发者设置中的“使用 Facebook 登录的网站”部分，只通过画布直接提供你的游戏。（例如，apps.facebook.com/logogame）。我猜这就是“在 facebook.com”上的全部内容。

# php - how can i prefix a name to the uploaded file name in drupal 7

> ID：13511150
> 
> 赞同：1
> 
> 时间：2012-11-22T10:52:37.387
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

how can i prefix a name to the uploaded file name in drupal?

Eg: If my uploaded file name is 'example.pdf' after click upload, i want to rename it as 'myprefix_example.pdf'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:35:14.097

代码示例：

```
function [MODULE]_form_alter(&$form, &$form_state, $form_id)
{
    if($form_id == "MY_FORM_ID")
    {
        $form['#submit'] = 'my_new_submit_callback';
    }
}

function my_new_submit_callback($form, &$form_state)
{
    $uploaded_file = file_load($form_state['values']['my_file_field']);
    $uploaded_file->name = "suffix_" . $file->name;
    file_save($uploaded_file);
} 
```

该代码未经测试，如果它不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:27:13.890

您是否使用文件字段存储文件？如果是这样，请查看“文件（字段）路径”模块。[http://drupal.org/project/filefield_paths](http://drupal.org/project/filefield_paths)

# php - file-based or database-based caching

> ID：13511152
> 
> 赞同：0
> 
> 时间：2012-11-22T10:52:46.333
> 
> 标签：php, codeigniter, caching

I am developing a site with codeigniter and would like to know which caching system will be best to use with a very large database (above 100k records with many join queries ) so my questions is:

is file-based caching is good or I will have some I/O issues? or should I write a new driver (I am not sure if codeignter have such driver ) for caching which will store cache in database as key,value pairs?

I cant use memcache or APC due to large size of rows so which should i choose file-based or database-based.

Thanks for any input.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:55:08.973

超过行数，它取决于总数据大小。

如果对象的总大小小于 1MB，那么 memcache 是更好的选择。但如果它会更多，那么你可以考虑基于文件的缓存。

但请记住，由于磁盘 I/O，基于文件的缓存总会有延迟

**编辑**：

如果您的缓存大小更大，那么我会推荐基于文件的缓存。

# android - Efficiently draw a trail after a moving object, depicting a few seconds of position history

> ID：13511154
> 
> 赞同：2
> 
> 时间：2012-11-22T10:52:49.723
> 
> 标签：android, graphics

I have an app where users are moving on a View background, I'm drawing the users, but would also like to display a trail after them with a few seconds of history. I could do it using a bunch of line segments, but I worry that would be inneffective.

I would like some preimplemented class that performs this, so I don't have to get my hands dirty with making the actual drawing efficient. I was thinking in the lines of a of a android.graphics.Path, but I can't find a way to contonously remove the oldest parts of it. Is there a way to achieve this using a path?

If not does anyone have any other tips? Anywhere I could look for a handy and efficient solution?

Grateful for any help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:01:21.640

您可以采用当前视图，将其与原始背景混合，并将其用作新画布，为下一帧/即将到来的帧绘制您的用户。这将给出用户的模糊轨迹（取决于您将其与原始背景结合的方式）。

# objective-c - Need a view that acts like a log view

> ID：13511161
> 
> 赞同：1
> 
> 时间：2012-11-22T10:53:26.837
> 
> 标签：objective-c, ios, xcode

I need to implement a view that acts as a log view, so that when you push a message into it, the message would push other messages upwards. Is there anything like that for iOS?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:58:27.600

您可以使用标准 UITableView 轻松实现：

*   每个单元格将负责显示 1 条日志消息
*   新消息到达时将新单元格添加到表格末尾
*   添加单元格后将表格滚动到底部（使用`scrollToRowAtIndexPath:atScrollPosition:animated:`带有`UITableViewScrollPositionBottom`位置参数的方法）

这意味着您需要将日志消息存储在数组中，但是如果要显示它们，则无论如何都需要存储消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:19:52.230

@Vladimir 的答案可能是要走的路，但只是为了看到一些额外的选项，这里有一个使用 UITextView 的示例：

```
- (IBAction)addNewLog:(UIButton *)sender {
    NSString *myInputText = @"some new text from string";
    NSString *temp = myTextView.text;
    [myTextView setText:[temp stringByAppendingString:[NSString stringWithFormat:@"\n%@: %@",[NSDate date],myInputText]]];
    [myTextView setContentOffset:CGPointMake(0, myTextView.contentSize.height - myTextView.frame.size.height) animated:NO];

} 
```

然后，如果您想将文本视图中的文本分成数组中的对象：

```
NSArray *myAwesomeArray = [myTextView.text componentsSeparatedByString:@"\n"]; 
```

请注意，如果“myInputText”字符串曾经包含换行符，则上述内容会中断。

# javascript - 在预定义的 div 中使用 nivoslider

> ID：13511165
> 
> 赞同：0
> 
> 时间：2012-11-22T10:53:39.700
> 
> 标签：javascript, jquery, css

我正在尝试将带有 id的内容包含`NivoSlider`到我的页面中。我已经尝试按照他们[网站](http://nivo.dev7studios.com/support/jquery-plugin-usage/)上的教程进行操作，但现在四天没有效果。请检查一下 ：`div``imageslider`

* * *

*索引.php*

```
<!-- In the head section I have included these --> 
<link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
<script src="jquery.nivo.slider.pack.js" type="text/javascript"></script>

<!-- Somewhere in the body section -->
<div id="imageslider">
    <div class="slider-wrapper">
         <div id="slider" class="nivoSlider">
            <img src="abc.jpeg" alt="" height="360" width="700"/>
            <img src="uvw.jpeg" alt="" height="360" width="700"/>
            <img src="pqr.jpeg" alt="" height="360" width="700"/>
            <img src="xyz.jpeg" alt="" height="360" width="700"/>
         </div>
    </div>
</div>

<!-- Also at the end of the body tag-->
<script type="text/javascript">
    $(window).load(function() {
        $('#slider').nivoSlider();
    });
</script> 
```

* * *

*在我的样式表中，style.css*

```
#imageslider {
float: right;
width: 700px;
background-color: blue;
height: 360px;
margin-left: 5px;
margin-right: 15px; 
}

/*Rest styles are copied from the website itself*/
.nivoSlider {
position:relative;
background:url(images/loading.gif) no-repeat 50% 50%;
}

.nivoSlider img {
position:absolute;
top:0px;
left:0px;
display:none;
}

.nivoSlider a {
border:0;
display:block;
} 
```

* * *

当我打开或刷新页面时，`imageslider`div 中没有出现图像。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:21:51.913

确保在加载 Nivo Slider 之前加载 jQuery：

```
<link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="jquery.nivo.slider.pack.js" type="text/javascript"></script> 
```

# javascript - 即使条件为假，如果条件显示警报

> ID：13511166
> 
> 赞同：0
> 
> 时间：2012-11-22T10:53:44.210
> 
> 标签：javascript, jquery, datepicker, alert

我`if`有条件问题。我写了一个脚本，`alert`当字段`#customer-age`值小于 21（计算的人的年龄）时，它应该显示。问题是 - 每次都会显示警报 - 当值小于和大于 21 时。

我的html代码是：

```
<div class="type-text">
<label for="birthday">Date1:</label>
<input type="text" size="20" id="birthday" name="birthday" value="" readonly="readonly" />
</div>

<div class="type-text">
<span id="customer-age" readonly="readonly"></span>
</div>

<span id="date_from_start">23/11/2012</span> 
```

和脚本看起来像：

```
function getAge() {
    var sday =  $('#date_from_start').html();
    var split_date1 = sday.split("/");  
    var todayDate = new Date(split_date1[2],split_date1[1] - 1,split_date1[0]);

    var bday = $('#birthday').val();
    var split_date2 = bday.split("/");
    var birthDate = new Date(split_date2[2],split_date2[1] - 1,split_date2[0]);

    var age = todayDate.getFullYear() - birthDate.getFullYear();
    var m = todayDate.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && todayDate.getDate() < birthDate.getDate())) {
        age--;
    }
    return age;
}

var startDate = new Date("1935,01,01");

$('#birthday').datepicker({
    dateFormat: 'dd/mm/yy',
    dayNamesMin: ['Nie', 'Pon', 'Wt', 'Śr', 'Czw', 'Pt', 'Sob'],
    dayNames: ['Niedziela','Poniedzialek','Wtorek','Środa','Czwartek','Piątek','Sobota'],
    monthNamesShort: ['Sty', 'Lut', 'Mar', 'Kwi', 'Maj', 'Cze', 'Lip', 'Sie', 'Wrz', 'Paź', 'Lis', 'Gru'],    
    changeMonth: true,
    changeYear: true,
    numberOfMonths: 1,
    constrainInput: true, firstDay: 1, dateFormat: 'dd/mm/yy',
    yearRange: '-77:-18',
    defaultDate: startDate,
    onSelect: function(dateText, inst) {
        $('#customer-age').html(getAge(new Date(dateText)));
        var cage = $('#customer-age').val();
          if (cage < 21)
             {
             alert('< 21 year');
             }
          else {
          }
    },
    maxDate: +0
}); 
```

您可以在[http://jsfiddle.net/amarcinkowski/DmYBt/上查看工作代码](http://jsfiddle.net/amarcinkowski/DmYBt/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:58:22.693

更改您的线路：

```
var cage = $('#customer-age').val(); 
```

至

```
var cage = parseInt($('#customer-age').html(), 10); 
```

[jsFiddle](http://jsfiddle.net/DmYBt/4/)

补充：你的意思是：

```
var infoContent = $.trim( $("#info").html() );
alert( infoContent ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:59:38.193

`.val()`在跨度标签上无效并且不返回任何内容。

改为使用`.html()`。`.text()`也可以。

您不需要将其显式解析为 Int，这是自动完成的。

```
var cage = $('#customer-age').html(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:59:38.593

利用：

```
var cage = $('#customer-age').text(); 
```

代替：

```
var cage = $('#customer-age').val(); 
```

这是[JSFiddle](http://jsfiddle.net/DmYBt/6/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:03:12.743

条件没有问题，我认为错误在您的日期选择器中。

把你的代码改成这个，看看我的意思：

```
 if (cage < 21)
  {
     alert(cage);
  }
  else 
  {
  } 
```

变量**cage**的值为空。那将是NaN。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T11:05:11.233

两件事情：

1.  您正在比较字符串，您应该使用`parseInt()`转换为整数然后进行比较。

2.  `cage`是空的;

# android - 如何一次向多个设备发送 GCM 消息

> ID：13511167
> 
> 赞同：16
> 
> 时间：2012-11-22T10:53:50.853
> 
> 标签：android, google-cloud-messaging

我想使用 GCM 将相同的消息发送到 android 中的多个设备。目前我能够向我的设备发送推送通知，因为我在 PHP 代码中明确指定了我的注册 ID。但我想将它发送到多个设备，所以我该怎么做？？？任何帮助或想法都将受到高度赞赏。

请指导这个谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-30T17:40:18.440

您应该做的是在向 GCM 发送消息时发送多个注册 ID（一次最多 1000 个），并且您需要使用 JSON 作为请求格式。

您可以在此处阅读更多相关信息： [https ://developers.google.com/cloud-messaging/server-ref#downstream](https://developers.google.com/cloud-messaging/server-ref#downstream)

您需要将您的 ID 列表添加到**registration_ids**字段：

> 带有接收消息的设备列表（注册 ID）的字符串数组。它必须包含至少 1 个且最多 1000 个注册 ID。要发送多播消息，您必须使用 JSON。要将单个消息发送到单个设备，您可以使用仅具有 1 个注册 ID 或纯文本的 JSON 对象（见下文）。必需的。

这是他们文档中的示例请求：

这是一条带有有效负载和 6 个收件人的消息：

```
{ "data": {
   "score": "5x1",
   "time": "15:10"
  },
  "registration_ids": ["4", "8", "15", "16", "23", "42"]
} 
```

# java - 阻止jframe调整大小的异常

> ID：13511169
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:53:52.923
> 
> 标签：java, exception, jframe

我试图创建一个抛出对话框并阻止用户调整小于 (250, 350) 的 jframe 的异常，但我没有这样做。

所以我的问题是，如果我有一个`Jframe`设置大小为 800、500 的窗格。我可以创建一个异常，当用户尝试使 jframe 小于某个大小时，它会在该大小处停止它们并显示错误消息?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:58:07.173

不要创建异常。创建一个操作侦听器，当用户将窗口大小调整为小于 (250, 350) 的任何大小时，它会以 JOptionPane 对话框的形式抛出错误消息

这是给你的运行代码，享受吧！

```
 import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.Timer;

public class Resize {

    Resize(){

    final JFrame frame = new JFrame();
    frame.setBounds(100, 50, 500, 500);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);
    frame.getContentPane().setBackground(Color.white);

    frame.setVisible(true);
    ActionListener al = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            // TODO Auto-generated method stub
            if(frame.getSize().width <250 || frame.getSize().height <350)
            {
                JOptionPane.showMessageDialog(null, "Size cannot be smaller than 250,350"); 
                frame.setSize(500, 500);
            }
        }
    };

    Timer t = new Timer(1000, al);
    t.start();

    }
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        new Resize();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:58:29.213

使用`jFrame.setMinimumSize(new Dimension(250, 350));`那么用户没有机会使`JFrame`任何小于这个。

# jquery - 用于构建 HTML 片段的字符串连接，然后附加到正文

> ID：13511174
> 
> 赞同：0
> 
> 时间：2012-11-22T10:54:13.780
> 
> 标签：jquery

我正在使用字符串连接来构建 HTML 片段，然后将其放入 DOM。我很欣赏将 HTML 混合到 JavaScript 中的不好做法，并且可能有更好的解决方案。但是我正在努力编码的行是：

```
$('<h1>' + content[0].title + '</h1>').append('body'); 
```

所以我想要实现的是创建一个`<h1>`，然后将它的文本设置为我存储在内容变量中的对象数组中的第一个对象中的 title 属性的值。然后最终将其附加到`<body>`- 任何建议将不胜感激。

```
(function() {

        var content = [
            {
                title: 'Speak of the devil and he shall appear',   
                thumbnail: 'images/bane.jpg',
            },

            {
                title: 'Me the joker',   
                thumbnail: 'images/Joker.jpg',
            }
        ];

        $('<h1>' + content[0].title + '</h1>').append('body');

    })(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:55:31.453

您正在尝试将正文附加到您的元素。使用`appendTo()`代替`append()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:57:20.373

利用

```
$('body').append('<h1>' + content[0].title + '</h1>');​ 
```

代替

```
$('<h1>' + content[0].title + '</h1>').append('body'); 
```

或者你可以按照gabitzish在他的回答中建议的那样做

```
$('<h1>' + content[0].title + '</h1>').appendTo('body');​ 
```

# apache - ShortUrl：为什么选择一行而不是另一行？

> ID：13511180
> 
> 赞同：1
> 
> 时间：2012-11-22T10:54:42.310
> 
> 标签：apache, mod-rewrite

```
RewriteRule ^ihome/([^/]+) /index_ip.php?page=ihome [L]

RewriteRule ^([^/\.]+)/?$ index.php?page=$1 [L] 
```

当我去 site.local/ihome.... 它去 index.php?page=ihome。然而 ihome 规则高于它。

我也尝试过相反的方法。

我需要强制 ihome 到一个特定的模板文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:57:14.433

这是因为第一条规则要求 a`/`存在，之后至少有一个非`/`字符。`?`第二条规则没有（注意`/`. 这就是为什么浏览 to`ihome`会将您发送到`index.php?page=ihome`.

您可以将您的第一条规则修改为类似`^ihome/?([^/]+)?`这样的斜杠和字符是可选的。不过，首先的规则看起来有点奇怪，因为它也会跳过`ihome/example/secondslash`。这是故意的吗？

# python - $存在于python中

> ID：13511183
> 
> 赞同：0
> 
> 时间：2012-11-22T10:54:54.680
> 
> 标签：python, list, mongodb

我正在遍历数据库并希望将键“number”的变量值添加到列表 x 中，前提是该键存在。有些文件没有关键的“数字”。

在 mongo 里面我会使用 $exist，但我不知道如何在 python 中做到这一点。我试过这个，但它不起作用......

```
for i in database:
    try:
        x.append(i["number"])
    except NameError:
        break 
```

这不起作用，我相信还有更优雅的方式......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:10:51.903

你在有效地写作吗？ try/append/except 让它有点混乱......

```
x = [i['number'] for i in database if 'number' in i] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:57:06.303

`in`运算符是测试容器中键是否存在的规范方法：

```
for i in database:
    if "number" in i:
        x.append(i["number"]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:10:33.260

你接近你想要的：一个不存在的键给出 no `NameError`，但是一个`KeyError`.

所以

```
for i in database:
    try:
        x.append(i["number"])
    except KeyError:
        continue 
```

应该做你想做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:05:42.203

您的实际代码接近您想要的。您只需在 except 子句中使用`continue`而不是。`break`像这样

```
for i in database:
    try:
        x.append(i["number"])
    except NameError:
        continue 
```

# asp.net - ASP.NET 网格视图中的模板字段错误

> ID：13511184
> 
> 赞同：0
> 
> 时间：2012-11-22T10:54:56.167
> 
> 标签：asp.net, gridview, aspbutton

我有一个有效的网格视图，数据绑定列提取正确的信息，但是当我尝试添加模板字段时，我在浏览器中收到以下错误：

```
Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.

Compiler Error Message: CS1061: 'ASP.componentcontrols_userdetails_detailgridcontrol_ascx' does not contain a definition for 'gwOrderInvQuote_SelectedIndexChanged' and no extension method 'gwOrderInvQuote_SelectedIndexChanged' accepting a first argument of type 'ASP.componentcontrols_userdetails_detailgridcontrol_ascx' could be found (are you missing a using directive or an assembly reference?) 
```

我这样声明的网格视图：

```
 <asp:View ID="Foo" runat="server">
                <asp:GridView ID="Foo" runat="server" DataKeyNames="id"
                    DataSourceID="odsFoo" Width="631px" OnRowDataBound="gwFoo_RowDataBound"
                    CssClass="customerDataTable" AllowSorting="True" 
                    onselectedindexchanged="gwOrderInvQuote_SelectedIndexChanged">
                    <Columns> 
```

我这样声明的模板字段：

```
 <asp:TemplateField AccessibleHeaderText="fhfj">
            <HeaderTemplate> This is a Test </HeaderTemplate>
            <ItemTemplate> </ItemTemplate>
 </asp:TemplateField> 
```

我想要达到的效果是将按钮与网格完美对齐，到目前为止，我的策略是创建这个模板化字段并在标题中插入，让所有其他单元格为空，该列没有其他目的，只是容纳按钮，使其与网格对齐。

问题是这是我第一次使用网格视图和模板化字段，即使是这个简单的测试来查看我是否可以创建一个空列也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:09:00.897

您必须在您的 cs 文件中定义方法 gwOrderInvQuote_SelectedIndexChanged：

```
 protected void gwOrderInvQuote_SelectedIndexChanged(object sender, EventArgs e)
 {
 // insert logic here
 } 
```

# python - 在 sublimetext 2 上显示函数输入和文档字符串作为提示（代码提示？）

> ID：13511185
> 
> 赞同：2
> 
> 时间：2012-11-22T10:54:56.897
> 
> 标签：python, function, sublimetext2, hint

使用 IDLE，我很欣赏当您键入函数（用户或内置）并打开括号时弹出的有用提示：

```
 function( 
```

所以现在，在 IDLE 中，这个函数的输入会在下面弹出，还有一小段 doc 字符串。Sublimetext 2 只是不这样做。是否有任何插件或方法来编辑设置文件以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:18:48.983

[SublimeRope](https://github.com/JulianEberius/SublimeRope)提供代码完成、GoTo 定义等。

# ruby-on-rails-3 - 捆绑和捆绑安装之间的区别

> ID：13511188
> 
> 赞同：7
> 
> 时间：2012-11-22T10:55:11.710
> 
> 标签：ruby-on-rails-3

捆绑安装和捆绑安装有什么区别。当我用谷歌搜索时，我发现很多地方都说两者都是别名，是真的还是有什么不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T11:01:48.433

是真的。bundle 和 bundle install 做同样的事情。

见[这里](https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb)：`default_task :install`

# neo4j - 使用 cypher shell 控制台删除 neo4j 中的节点/关系时出现“TransactionFailureException：无法提交事务”错误

> ID：13511190
> 
> 赞同：2
> 
> 时间：2012-11-22T10:55:22.490
> 
> 标签：neo4j, cypher

在 shell 控制台中执行此命令时出现此错误（我只想从图中忽略超级节点，因为它们会影响我的建议）：

```
neo4j-sh (0)$ cypher 1.9 start n=node:node_auto_index('n_id_customer:*') match n--r with n,count(*) as cnt where cnt > 5000 with n match n--r2 with r2 delete r2;     
TransactionFailureException: Unable to commit transaction 
```

直接删除节点时出现相同的错误（后来我意识到我必须先删除它们的关系）。当执行相同的查询但用 RETURN 替换 DELETE 命令时，一切正常：

```
cypher 1.9 start n=node:node_auto_index('n_id_customer:*') match n--r with n,count(*) as cnt where cnt > 5000 with n match n--r2 with r2 return  count(r2); 
+-----------+
| count(r2) |
+-----------+
| 181294    |
+-----------+
1 row
20615 ms 
```

neo4j 版本是 1.9。我怎样才能正确轻松地删除/关闭超级节点，这样它们就不会偏向整个图？删除他们的关系也足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:09:17.483

没关系，我的错。

match 子句 n--r 给出了两边的节点，因此当仍有 rels 时不能删除节点。更改为 MATCH n-[r]-() 有效。

# java - 使用 Java 在 .war 文件中创建 HTML

> ID：13511191
> 
> 赞同：1
> 
> 时间：2012-11-22T10:55:24.803
> 
> 标签：java, html, jboss, war

我正在尝试`.war`在 JBoss 服务器中部署的文件中动态创建一个 HTML 文件。

它不允许我创建。`.war`有人可以帮我在 Java 中的已部署文件中创建一个 HTML 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:59:59.000

在这种情况下，*war*文件应部署为已分解。利用

```
String jbossHome = System.getenv("JBOSS_HOME"); 
```

访问服务器部署。

然后你需要一个文件分隔符

```
String separator = System.getProperty("file.separator"); 
```

然后构建部署根目录的路径。假设您有*默认值*

```
String deployRootPath = jbossHome + separator + "server" + separator + "default" + separator + "deploy" + separator;
File dir = new File(deployRootPath + "mywebapp.war");
if (dir.exists() && dir.isDirectory()) {
   File myHtmlFile = new File(dir+separator+"myhtmlfile.html"); 
   myHtmlFile.createNewFile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:14:11.207

WAR 文件是一个简单的 ZIP 文件。我不知道是否有办法“挂载”一个 zip 文件并像文件系统一样访问它，但你绝对可以解压缩 WAR 文件，添加你的文件并再次压缩它。

[将文件添加到 zipfile](https://stackoverflow.com/questions/10103861/adding-files-to-zip-file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:14:16.217

WAR 在某种程度上是一个重命名的 ZIP 文件。解压添加文件。重新压缩。我想会有一些库允许我们在不完全解压缩的情况下添加文件。只是谷歌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:14:51.130

在幕后，.war 文件只是一个 .zip 文件。

我不打算讨论当您修改 war 文件的内容时您的容器 (JBOSS) 将如何反应（默认情况下可能会自动重新加载您的 web 应用程序？），但您可以将 .war 视为任何其他 .zip，除了不同的文件扩展名。

如果您需要这样做，请参阅有关如何在 java 中使用 zip 文件的[其他帖子。](https://stackoverflow.com/questions/2223434/appending-files-to-a-zip-file-with-java)

# scala - 一个泛型泛型参数与另一个简单泛型参数的特化

> ID：13511193
> 
> 赞同：2
> 
> 时间：2012-11-22T10:55:27.070
> 
> 标签：scala

我目前正在从事一个项目，其中包括机器学习的高斯过程。[考虑到书中](http://www.gaussianprocess.org/gpml/chapters/RW.pdf)的示例和解释，我正在尝试为作为训练的 GP 对象的一部分的各种参数创建一个通用函数 - 因此，以下声明是（简单）训练函数的最通用声明。

```
def train[T, M <: MatrixInverter[T], S <: Kernel[T]](): GP_Spawn[T] = null 
```

（如果您想知道，我已经删除了参数列表和实现。） `T`描述了数字类型，例如它可能是`Double`or `Int`。`MatrixInverter[T]`是执行`calculateInverse`功能的特征。`Kernel[T]`是核函数的相应特征。*正如你们中的一些人可能已经知道的那样，当使用Cholesky-Decomposition*作为矩阵逆变器时，可以更改高斯过程中的训练（以某种方式简化）- 因此，我考虑过专门化上述功能。由于`@specialized`标签的文档，它应该是这样的：

```
def train[T, @specialized(CholeskyDecomposition[T]) M <: MatrixInverter[T], S <: Kernel[T]](): GP_Spawn[T] 
```

很明显，所有参数或多或少都依赖于`T`，因为它们需要使用一些依赖于它的变量（类型`T`、`Vector[T]`、 ）。`Matrix[T]`如果我尝试编译上面提到的代码，scala-compiler (2.9.2) 抱怨

> 错误：未找到：值 CholeskyDecomposition

我不确定这意味着什么，因为导入`import algorithms.{CholeskyDecomposition, MatrixInverter}`是正确的。此外，很奇怪看到 import`CholeskyDecomposition`被标记为*Unused import statement*。`CholeskyDecomposition`有一个同伴，其中包含一些与算法本身相关的常量，但我不认为这方面是导致此错误的原因。

任何想法可能导致此错误？而且，如何在**不**削减通用方法的情况下解决它？

**编辑：**

在阅读了答案后正在考虑对我的代码进行一些重新排序，我最终在运行时得到了一个使用类型匹配的解决方案。

```
val testMat = new Matrix[T](3, 3)
val testInv = fac(testMat)    
testInv match {
    case chol : CholeskyDecomposition[T] => println("Found Cholesky!")
    case _ => println("Found something different.")
} 
```

它现在可以工作了:) 谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:25:45.350

您只能将泛型参数特化为原始类型：`Int`、`Double`等。因此您可以特化`T`但`Foo[T]`即使`T`是原始类型也不能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T13:54:22.600

如果您有一个`C`专门研究 type的课程`T`，那么

```
class D[@specialized T, C[T]](c: C[T]) { ... } 
```

将使用 的`T`-specialized 版本`C`。

无论如何，这就是你所需要的。没有必要专门研究对象；通用代码也同样有效，因为所有非原始的东西都是对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:28:14.150

根据[API](http://www.scala-lang.org/api/current/scala/specialized.html)，它说：

```
Type T can be specialized on a subset of the primitive types by
specifying a list of primitive types to specialize at: 
```

所以它基本上只适用于原始类型。

# php - 类中的php opencart方法未定义但可以调用？

> ID：13511196
> 
> 赞同：0
> 
> 时间：2012-11-22T10:55:34.573
> 
> 标签：php, class, inheritance, opencart

我正在阅读 opencart php 源代码，但我无法弄清楚。请查看“$url = $rewrite->rewrite($url);”处的函数 rewrite()

```
<?php
class Url {
    private $url;
    private $rewrite = array();

    public function link($route, $args = '', $connection = 'NONSSL') {
    ....

        foreach ($this->rewrite as $rewrite) {
            $url = $rewrite->rewrite($url);
        }
        return $url;
    }

public function addRewrite($rewrite) {
    $this->rewrite[] = $rewrite;
}
}
?> 
```

为什么上面的代码不会产生错误？
重写函数没有在类 Url 中定义，并且类 Url 没有扩展任何人？？但后来我更深入地跟踪，似乎函数重写是在 seo_url 类。

```
class ControllerCommonSeoUrl extends Controller {
    // Add rewrite to url class
    if ($this->config->get('config_seo_url')) {
        $this->url->addRewrite($this);
    }
    ...
    public function rewrite($link) {
        if ($this->config->get('config_seo_url')) {
            $url_data = parse_url(str_replace('&amp;', '&', $link));
             .... 
```

为什么 ？我还没有看到“Url”和这个“ControllerCommonSeoUrl”之间有任何联系。我在这里错过了一些概念吗？我应该怎么做才能理解这些代码？这里需要一点指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:17:01.953

```
foreach ($this->rewrite as $rewrite) { 
```

迭代中的任何值：

```
private $rewrite = array(); 
```

也许该`Url->rewrite`数组包含一个实例`ControllerCommonSeoUrl`，这可以解释为什么`$rewrite->rewrite()`调用`ControllerCommonSeoUrl->rewrite()`.

此外，您可以尝试学习使用调试器来帮自己一个忙：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:02:38.957

该类`Url`是一个通用类，可以调用多个 URL 重写方法，使人们可以更改 URL 重写代码。触发 SEO URL 代码以将其添加到`Url`类中通过以`index.php`​​下方式在文件中完成

```
// SEO URL's
$controller->addPreAction(new Action('common/seo_url')); 
```

执行该操作时，`ControllerCommonSeoUrl`执行该`index()`方法，并且与您提供的代码一样，它会检查 SEO URL 是否在设置中处于活动状态。如果是，则将当前类添加到类中的重写数组中`Url`。然后，每当有人调用`$this->url->link()`每个重写类时，都会调用他们的`rewrite()`方法，并将随后的 URL 传回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:26:51.420

检查控制器是否在脚本中加载任何模型，如果是，模型方法可以在脚本内简单地访问，这可能是您的脚本 $this->rewrite 的情况。

# c++ - 如何重载 << 运算符

> ID：13511197
> 
> 赞同：1
> 
> 时间：2012-11-22T10:55:34.650
> 
> 标签：c++, operator-overloading

我必须创建一个 Matrix 类，但我遇到了一些重载运算符的问题

我想使用`<<`运算符填充矩阵

```
Matrix<double> u3(2,2);

u3 << 3.3, 4, 3, 6;

template<class T>
Matrix<T> Matrix<T>::operator <<(T in){
    //Fill up the matrix, m[0] = 3.3, m[1]=4...
    return *this;
} 
```

这个运算符如何重载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:08:17.153

这是一种使用逗号的方法：

```
#include <iostream>
using namespace std;

struct Matrix {

    struct Adder {
        Matrix& m;
        int index;

        Adder(Matrix& m) : m(m), index(1) {}

        Adder& operator,(float value) {
            m.set(index++, value);
            return *this;
        }    
    };

    void set(int index, float value) {
        // Assign value to position `index` here.
        // I'm just printing stuff to show you what would happen...
        cout << "Matrix[" << index << "] = " << value << endl;
    }

    Adder operator<<(float value) {
        set(0, value);
        return Adder(*this);
    }

}; 
```

演示：http: [//ideone.com/W75LaH](http://ideone.com/W75LaH)

一些解释：

语法`matrix << 5, 10, 15, 20`分两步实现：

*   `matrix << 5`首先被评估；它将第一个元素设置为 5 并返回一个`Adder`处理进一步插入的临时对象（记住下一个插入的索引）
*   `Adder`已重载`operator,`，在每个逗号后执行以下插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:01:43.137

像这样的方法会起作用：

```
#include <iostream>

template <typename T>
class Mat {
public:
  T val; 
};

template <typename T>
Mat<T>& operator<<(Mat<T>& v, T in) {
  std::cout << in << " ";
  return v;
}

int main() {
  Mat<int> m;
  m << 1 << 2 << 3;
} 
```

请注意，我使用的是自由`operator<<`函数，并且不要在值之间使用逗号。

# javascript - 通过 JS 读取文件的 HTML 头信息

> ID：13511198
> 
> 赞同：2
> 
> 时间：2012-11-22T10:55:36.320
> 
> 标签：javascript, header

我有一个由 asp 生成的产品列表我在 html 文件中有每个产品的产品描述

```
each html file is named: <product.id>.html<br/>
html file size is only 1-3 kb 
```

在 html 文件中`<title>`，`<meta name="description" content="..." />`
我想以一种有效的方式访问这些文件，以便我可以将其输出为例如：

```
document.write(<product.id>.html.title);<br/>
document.write(<product.id>.html.description); 
```

我有一个适用于单个产品的工作解决方案，我在其中使用描述文件 - 但希望找到一种更有效/更简单的方法。最好，我想避免隐藏 30 多个 iframe - 谷歌可能会认为我试图篡改搜索结果并将我的页面列入黑名单......

当前代码：

```
<iframe src="myfile.html" id="product" style="display:none">&nbsp;</iframe>
<script type="text/javascript">
   document.getElementById('product').onload = function(){
   var d = window.frames[frame].document;
   var title = d.title : ' ';
   var keywords = d.getElementsByName('keywords')[0].getAttribute('content', 0) : ' ';
   var descript = d.getElementsByName('description')[0].getAttribute('content', 0) : ' ';
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:13:55.553

正如在另一个[Stack Overflow question](https://stackoverflow.com/questions/413439/how-to-dynamically-change-a-web-pages-title)中提到的，您可以使用：

```
document.title = "This is the new page title."; 
```

看[这里](http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/)给了我们：

```
document.getElementsByTagName('meta').content = "New content here"; 
```

或者：

```
document.getElementsByTagName('meta').name = "NewName"; 
```

有了这些，您应该能够根据需要读取和写入您的标签，我在这里只使用了几个示例，肯定还有更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:14:10.867

您可以使用 AJAX 加载文件。例如（使用 jQuery）：

```
$.get('myfile.html', function(data){
   var title = $(data).find('head title').text();
   var keywords = $(data).find('head meta[name="keywords"]').attr('content');
   var descript = $(data).find('head meta[name="description"]').attr('content');
}); 
```

在这里你可以找到关于使用[jQuery.get的 jQuery 文档](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:35:38.923

找到了这个解决方案：

```
<script>
  var xhr = $.ajax({ 
  type: "GET", 
  url: "/files/billeder/ecom/beskrivelser/<!--@Ecom:Group.Number-->.html", 
  success: function(msg){
    msg = msg.split('content="')[1];
    msg = msg.split('"')[0];
    document.getElementById("a_<!--@Ecom:Group.Number-->").innerHTML = "<p>" + msg + "</p>"; 
```

还不是很优雅......但它的工作原理......

# jquery - 排序不适用于数据类型 jsonstring

> ID：13511200
> 
> 赞同：0
> 
> 时间：2012-11-22T10:55:41.653
> 
> 标签：jquery, jqgrid

对不起，但我不明白我做错了什么。我从服务器获取 json 并希望对列应用排序。渲染网格后，我可以看到标题中的列看起来像排序但数据仍然未排序

![在此处输入图像描述](../Images/1b62720b4027141600875648c4639115.png)

我用于创建网格的 javascript 是：

```
var gridDefinition = window['personalExpensesGridModel'];

gridDefinition.sortname = 'Type';
gridDefinition.sortorder = 'desc';
grid.jqGrid(gridDefinition); 
```

为每一列定义了排序类型。在这里您可以看到配置对象：

![在此处输入图像描述](../Images/4f50ffe26395a2a229e7623f3ab36f43.png)

*更新1*

```
{
    "autowidth": true,
    "gridid": "RegExpGeneral",
    "url": null,
    "datatype": "jsonstring",
    "colModel": [
        {
            "key": false,
            "name": "Status",
            "label": "&nbsp;",
            "settingsCaption": "Status",
            "resizable": false,
            "fixed": true,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 25,
            "hidden": false,
            "columnSettingsType": "alwaysvisible"
        },
        {
            "key": false,
            "name": "Type",
            "label": "<span title='???'>Type</span>",
            "settingsCaption": "Type",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 194,
            "hidden": false,
            "columnSettingsType": "alwaysvisible"
        },
        {
            "key": false,
            "name": "ExpenseCategory",
            "label": "&nbsp;",
            "settingsCaption": "ExpenseCategory",
            "resizable": false,
            "fixed": true,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 25,
            "hidden": false,
            "columnSettingsType": "alwaysvisible"
        },
        {
            "key": false,
            "name": "Description",
            "label": "<span title='???'>Description</span>",
            "settingsCaption": "Description",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 91,
            "hidden": false,
            "columnSettingsType": "alwaysvisible"
        },
        {
            "key": false,
            "name": "Customer",
            "label": "<span title='???'>Customer</span>",
            "settingsCaption": "Customer",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 157,
            "hidden": false,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "Project",
            "label": "<span title='???'>Project</span>",
            "settingsCaption": "Project",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 250,
            "hidden": false,
            "columnSettingsType": "alwaysvisible"
        },
        {
            "key": false,
            "name": "Activity",
            "label": "<span title='???'>Activity</span>",
            "settingsCaption": "Activity",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 197,
            "hidden": false,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "NotesOrAttendees",
            "label": "&nbsp;",
            "settingsCaption": "NotesOrAttendees",
            "resizable": false,
            "fixed": true,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 25,
            "hidden": false,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "Number",
            "label": "<span title='???'>Kms</span>",
            "settingsCaption": "Kms",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "Global.Grid.SortNumbers",
            "frozen": false,
            "width": 103,
            "hidden": false,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "IntendDate",
            "label": "<span title='???'>Date</span>",
            "settingsCaption": "Date",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 50,
            "hidden": true,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "CostInCurrency",
            "label": "<span title='???'>Original Amount</span>",
            "settingsCaption": "Original Amount",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "Global.Grid.SortNumbers",
            "frozen": false,
            "width": 80,
            "hidden": true,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "Vat",
            "label": "<span title='???'>Vat</span>",
            "settingsCaption": "Vat",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "Global.Grid.SortNumbers",
            "frozen": false,
            "width": 80,
            "hidden": true,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "CostExchangeRate",
            "label": "<span title='???'>Exchange Rate</span>",
            "settingsCaption": "Exchange Rate",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "Global.Grid.SortNumbers",
            "frozen": false,
            "width": 40,
            "hidden": true,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "Compensation",
            "label": "<span title='???'>Compensation</span>",
            "settingsCaption": "Compensation",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "Global.Grid.SortNumbers",
            "frozen": false,
            "width": 65,
            "hidden": false,
            "columnSettingsType": "alwaysvisible"
        },
        {
            "key": false,
            "name": "CustomerPrice",
            "label": "<span title='???'>Customer price</span>",
            "settingsCaption": "Customer price",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "Global.Grid.SortNumbers",
            "frozen": false,
            "width": 80,
            "hidden": true,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "Chargeability",
            "label": "<span title='???'>Not chargeable</span>",
            "settingsCaption": "Not chargeable",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 20,
            "hidden": true,
            "columnSettingsType": "regular"
        },
        {
            "key": false,
            "name": "Actions",
            "label": "&nbsp;",
            "settingsCaption": "Actions",
            "resizable": false,
            "fixed": true,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": 25,
            "hidden": false,
            "columnSettingsType": "noconfig"
        },
        {
            "key": true,
            "name": "TransId",
            "label": "&nbsp;",
            "settingsCaption": "TransId",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": null,
            "hidden": true,
            "columnSettingsType": "noconfig"
        },
        {
            "key": false,
            "name": "IsValid",
            "label": "&nbsp;",
            "settingsCaption": "IsValid",
            "resizable": true,
            "fixed": false,
            "sortable": true,
            "sorttype": "text",
            "frozen": false,
            "width": null,
            "hidden": true,
            "columnSettingsType": "noconfig"
        }
    ],
    "altRows": true,
    "width": null,
    "height": 415,
    "shrinkToFit": true,
    "jsonReader": {
        "repeatitems": false
    },
    "datastr": {
        "userdata": null,
        "total": 1,
        "page": 1,
        "records": 78,
        "rows": [
            {
                "Status": "<img src='/PXControl/Content/images/expenses/grid/pe_status_saved.png' alt='SA' title='Saved' />",
                "Type": "Travelcompclass U1 (TEST) (U1)",
                "ExpenseCategory": "<img src='/PXControl/Content/images/expenses/grid/expenses.png' alt='E' title='General' />",
                "Description": "",
                "Customer": "Construction Enterprice",
                "Project": "301952 - Syncron International AB, löpande konsultation PX Control.",
                "Activity": "10 - Ej debiterbar tid hos kund",
                "NotesOrAttendees": "",
                "Number": "",
                "IntendDate": "",
                "CostInCurrency": "",
                "Vat": "0,00",
                "CostExchangeRate": "",
                "Compensation": "3,00",
                "CustomerPrice": "0,00",
                "Chargeability": "No",
                "Actions": "<a class=\"edit-link\" data-ajax=\"true\" data-ajax-method=\"POST\" data-ajax-mode=\"replace\" data-ajax-success=\"Global.PersonalExpenses.afterAjax()\" data-ajax-update=\"#px-expenses-page-container\" href=\"/PXControl/Reg/TimeExpenses/GeneralExpense?period=201152%20%20&amp;versionCode=U&amp;transId=33024&amp;statusFilter=All&amp;doSubmit=False\">edit</a><a data-ajax=\"true\" data-ajax-begin=\"Global.PersonalExpenses.saveFormData()\" data-ajax-method=\"POST\" data-ajax-mode=\"replace\" data-ajax-success=\"Global.PersonalExpenses.afterAjax()\" data-ajax-update=\"#px-expenses-page-container\" href=\"/PXControl/Reg/TimeExpenses/Delete?period=201152%20%20&amp;versionCode=U&amp;transId=33024&amp;category=General&amp;page=General\"><img src=\"/PXControl/Content/images/expenses/grid/delete_normal.png\" /></a>",
                "TransId": "33024",
                "IsValid": "1"
            },
            {
                "Status": "<img src='/PXControl/Content/images/expenses/grid/pe_status_saved.png' alt='SA' title='Saved' />",
                "Type": "Travelcompclass U1 (TEST) (U1)",
                "ExpenseCategory": "<img src='/PXControl/Content/images/expenses/grid/expenses.png' alt='E' title='General' />",
                "Description": "",
                "Customer": "Search Engine Marketing Company",
                "Project": "301395 - Utbildning Visma Business",
                "Activity": "ANV - .",
                "NotesOrAttendees": "",
                "Number": "",
                "IntendDate": "",
                "CostInCurrency": "",
                "Vat": "0,00",
                "CostExchangeRate": "",
                "Compensation": "1 000,00",
                "CustomerPrice": "1000,00",
                "Chargeability": "Yes",
                "Actions": "<a class=\"edit-link\" data-ajax=\"true\" data-ajax-method=\"POST\" data-ajax-mode=\"replace\" data-ajax-success=\"Global.PersonalExpenses.afterAjax()\" data-ajax-update=\"#px-expenses-page-container\" href=\"/PXControl/Reg/TimeExpenses/GeneralExpense?period=201152%20%20&amp;versionCode=U&amp;transId=32735&amp;statusFilter=All&amp;doSubmit=False\">edit</a><a data-ajax=\"true\" data-ajax-begin=\"Global.PersonalExpenses.saveFormData()\" data-ajax-method=\"POST\" data-ajax-mode=\"replace\" data-ajax-success=\"Global.PersonalExpenses.afterAjax()\" data-ajax-update=\"#px-expenses-page-container\" href=\"/PXControl/Reg/TimeExpenses/Delete?period=201152%20%20&amp;versionCode=U&amp;transId=32735&amp;category=General&amp;page=General\"><img src=\"/PXControl/Content/images/expenses/grid/delete_normal.png\" /></a>",
                "TransId": "32735",
                "IsValid": "1"
            },
            {
                "Status": "<img src='/PXControl/Content/images/expenses/grid/pe_status_saved.png' alt='SA' title='Saved' />",
                "Type": "Travelcompclass F1 (F1)",
                "ExpenseCategory": "<img src='/PXControl/Content/images/expenses/grid/mileage.png' alt='M' title='TaxMileage' />",
                "Description": "$$changed price",
                "Customer": "Construction Enterprice",
                "Project": "301952 - Syncron International AB, löpande konsultation PX Control.",
                "Activity": "10 - Ej debiterbar tid hos kund",
                "NotesOrAttendees": "",
                "Number": "100",
                "IntendDate": "2011-12-27",
                "CostInCurrency": "",
                "Vat": "0,00",
                "CostExchangeRate": "",
                "Compensation": "340,00",
                "CustomerPrice": "5000,00",
                "Chargeability": "Yes",
                "Actions": "<a class=\"edit-link\" data-ajax=\"true\" data-ajax-method=\"POST\" data-ajax-mode=\"replace\" data-ajax-success=\"Global.PersonalExpenses.afterAjax()\" data-ajax-update=\"#px-expenses-page-container\" href=\"/PXControl/Reg/TimeExpenses/Mileage?period=201152%20%20&amp;versionCode=U&amp;transId=32731&amp;statusFilter=All\">edit</a><a data-ajax=\"true\" data-ajax-begin=\"Global.PersonalExpenses.saveFormData()\" data-ajax-method=\"POST\" data-ajax-mode=\"replace\" data-ajax-success=\"Global.PersonalExpenses.afterAjax()\" data-ajax-update=\"#px-expenses-page-container\" href=\"/PXControl/Reg/TimeExpenses/Delete?period=201152%20%20&amp;versionCode=U&amp;transId=32731&amp;category=Mileage&amp;page=General\"><img src=\"/PXControl/Content/images/expenses/grid/delete_normal.png\" /></a>",
                "TransId": "32731",
                "IsValid": "1"
            }
        ]
    },
    "scroll": 1,
    "sortable": true,
    "loadonce": true,
    "viewrecords": true,
    "userDataOnFooter": false,
    "sortname": "TransId",
    "sortorder": "desc",
    "savesettingsurl": "/PXControl/Reg/TimeExpenses/SaveGridSettings",
    "loadsettingsurl": "/PXControl/Reg/TimeExpenses/RevertGridSettings",
    "grouping": false,
    "groupingView": null,
    "rowNum": 2147483647
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:04:47.170

您如何[在演示](http://www.ok-soft-gmbh.com/jqGrid/user157303.htm)中看到您发布的代码对排序没有问题：

![在此处输入图像描述](../Images/78c473ab32a604a00782bcb3a5c4573a.png)

# windows-8 - 如何在 Windows 8 中创建切换按钮？

> ID：13511202
> 
> 赞同：2
> 
> 时间：2012-11-22T10:55:45.073
> 
> 标签：windows-8, winrt-xaml

我需要创建一组 5 个按钮。只能按下一个，例如单选按钮，但我不想显示圆圈。我想使用按钮外观。

有人知道这是最好的方法吗？

我为 WPF 找到了：

```
<RadioButton Style="{StaticResource {x:Type ToggleButton}}" /> 
```

但它不适用于 Windows 8。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:41:59.790

这是一组实际按钮，每个按钮的点击事件都分配了一个动作，还是您只是想从 RadioButton 类型的控件中删除圆圈？

请注意，用户可能希望 RadioButton 控件的外观和感觉像 RadioButton。仅仅为了它而改变它可能不是一个好主意，但如果你想继续它，你可以尝试以下选项之一。

1）编辑单选按钮控件的模板以隐藏选择圆。（老实说，我不知道这是否可能，但理论上应该是）
*或*
2）使用 SelctionMode 设置为“Single”的 ListView 模拟行为

如果您想处理每个“按钮”上的点击事件，事情会变得有点复杂，但这并非不可能。在您的 ItemTemplate 中，添加一个按钮（可能具有“TextButtonStyle”的样式）并设置 Click 事件的事件处理程序以检查哪个按钮被按下并采取相应的行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:39:09.737

有一个叫做[ToggleButton](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.aspx)的控件，你为什么不用它呢？

![在此处输入图像描述](../Images/5827296b66f3a4c7a55bacb0a1241f02.png)

# go - 为什么我不能将 *Struct 分配给 *Interface？

> ID：13511203
> 
> 赞同：154
> 
> 时间：2012-11-22T10:55:50.997
> 
> 标签：go

我刚刚完成[Go tour](http://tour.golang.org/)，我对指针和接口感到困惑。为什么这个 Go 代码不能编译？

```
package main

type Interface interface {}

type Struct struct {}

func main() {
    var ps *Struct
    var pi *Interface
    pi = ps

    _, _ = pi, ps
} 
```

即如果`Struct`是一个`Interface`，为什么不是`*Struct`一个`*Interface`？

我得到的错误信息是：

```
prog.go:10: cannot use ps (type *Struct) as type *Interface in assignment:
        *Interface is pointer to interface, not interface 
```

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-11-22T11:31:30.873

当您有一个实现接口的结构时，指向该结构的指针也会自动实现该接口。这就是为什么你从来没有`*SomeInterface`在函数的原型中，因为这不会添加任何东西`SomeInterface`，而且你不需要在变量声明中使用这种类型（参见[这个相关问题](https://stackoverflow.com/questions/13255907/in-go-http-handlers-why-is-the-responsewriter-a-value-but-the-request-a-pointer)）。

接口值不是具体结构的值（因为它具有可变大小，这是不可能的），但它是一种指针（更准确地说是指向结构的指针和指向类型的指针）。Russ Cox 在[这里](http://research.swtch.com/interfaces)准确地描述了它：

> 接口值表示为两个字对，给出一个指向接口中存储的类型信息的指针和一个指向相关数据的指针。

![在此处输入图像描述](../Images/dae967cba8fb912af5173230526ff575.png)

这就是为什么`Interface`，而不是`*Interface`正确的类型来保存指向实现的结构的指针`Interface`。

所以你必须简单地使用

```
var pi Interface 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-22T11:20:04.647

这也许就是你的意思：

```
package main

type Interface interface{}

type Struct struct{}

func main() {
        var ps *Struct
        var pi *Interface
        pi = new(Interface)
        *pi = ps

        _, _ = pi, ps
} 
```

编译确定。另请参见[此处](http://play.golang.org/p/9etOGTAzua)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-27T23:42:05.423

这是将结构分配给接口的一种非常简单的方法：

```
package main

type Interface interface{}

type Struct struct{}

func main() {
    ps := new(Struct)
    pi := Interface(ps)

    _, _ = pi, ps
} 
```

**[https://play.golang.org/p/BRTaTA5AG0S](https://play.golang.org/p/BRTaTA5AG0S)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-11T10:38:59.377

我使用以下方式，`interface{}`虽然我只是`eventsI interface{}`将其用作参数，但我仍然能够发送一个结构指针，如下所示。

```
func Wait(seconds float64) *WaitEvent {
    return WaitEventCreate(seconds)
} 
```

main.go

```
var introScene = []interface{}{
        storyboard.Wait(5),
        storyboard.Wait(2),
    }

    var storyboardI = storyboard.Create(stack, introScene)
    stack.Push(&storyboardI) 
```

现在在`storyboard.go`文件里面创建函数

```
type Storyboard struct {
    Stack  *gui.StateStack
    Events []interface{} //always keep as last args
}

func Create(stack *gui.StateStack, eventsI interface{}) Storyboard {
    sb := Storyboard{
        Stack: stack,
    }

    if eventsI != nil {
        events := reflect.ValueOf(eventsI)
        if events.Len() > 0 {
            sb.Events = make([]interface{}, events.Len())
            for i := 0; i < events.Len(); i++ {
                sb.Events[i] = events.Index(i).Interface()
            }
        }
    }

    return sb
} 
```

正如您在上面看到的 Storyboard.go 正在消耗，`Events []interface{}`但实际上我发送的是一个 Struct 指针，它工作正常。

另一个例子[在这里](https://dev.to/steelx/state-machine-in-go-for-a-2d-game-198l)

# ruby-on-rails - 思考狮身人面像 - 如果索引中不存在字段，则排除类

> ID：13511204
> 
> 赞同：0
> 
> 时间：2012-11-22T10:55:56.267
> 
> 标签：ruby-on-rails, thinking-sphinx

我正在做一个应用程序搜索，它可能会过滤几个不同的字段——其中一些字段并不存在于每个索引中。

目前，使用复杂的 if elsif elsif 事物来整理要在控制器中搜索的正确类。

如果一个条件字段不存在，有没有办法让思考狮身人面像自动不搜索模型，而不是像目前似乎发生的那样忽略条件。

例如

```
 ThinkingSphinx.search(@query, :conditions => {:genres =>"classical-music"}, :match_mode => :extended, :classes => [Performer, Promoter, Tour, Venue, User], :order => :name_sort, :sort_mode => :asc) 
```

用户没有流派，但包含在搜索结果中

* * *

更新

它绝对不像我想要的那样工作。我的用户模型在索引中没有流派字段，因此我希望在搜索流派时将其排除在外。

示例搜索

```
User.search("anne")
  Sphinx Query (3.6ms)  anne
  Sphinx  Found 1 result
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` IN (80)
 => [#<User id: 80, first_name: "Anne", last_name: "Bowers", bio: nil, email: "anne@bowers.com", phone: nil, created_at: "2012-11-20 09:36:05", updated_at: "2012-11-20 09:36:05", role: nil, promoter_id: nil, performer_id: nil, job_title: nil>] 

ThinkingSphinx.search("anne", :conditions => {:genres => "music"}, :match_mode => :extended, :classes => [User], :order => :name_sort, :sort_mode => :asc)
  Sphinx Query (3.2ms)  anne @genres music
  Sphinx  Found 1 result
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` IN (80)
 => [#<User id: 80, first_name: "Anne", last_name: "Bowers", bio: nil, email: "anne@bowers.com", phone: nil, created_at: "2012-11-20 09:36:05", updated_at: "2012-11-20 09:36:05", role: nil, promoter_id: nil, performer_id: nil, job_title: nil>] 
```

如果用户被排除在外，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:18:49.910

您可以尝试传递类以在参数中进行搜索。

但我认为你的方式也应该有效。

为了我

```
ThinkingSphinx.search(conditions: { type: "text" }) 
```

它只是写一个错误

> Sphinx 守护进程返回警告：索引 bulletin_core、bulletin_delta、user_delta ...：查询错误：在架构中找不到字段“类型”

但它不会崩溃。它仅返回具有索引字段的类的实例`type`

您也可以尝试这里写的方法[https://groups.google.com/forum/?fromgroups=#!topic/thinking-sphinx/rrAPXtxUMjg](https://groups.google.com/forum/?fromgroups=#!topic/thinking-sphinx/rrAPXtxUMjg)但我还没有尝试过

# java - 覆盖 java 方法而不影响父行为

> ID：13511206
> 
> 赞同：-2
> 
> 时间：2012-11-22T10:56:03.480
> 
> 标签：java, oop, overriding

> **可能重复：**
> [强制基类使用自己的方法而不是覆盖的方法](https://stackoverflow.com/questions/7520359/force-base-class-to-use-its-own-method-and-not-overrided-method)

假设我有这些类——抱歉，这里很难想出一个简单的例子；我不想要任何你为什么想要那样做的答案！–：

```
class Squarer
{
    public void setValue(int v)
    {
        mV = v;
    }
    public int getValue()
    {
        return mV;
    }
    private int mV;
    public void square()
    {
        setValue(getValue() * getValue());
    }
}

class OnlyOddInputsSquarer extends Squarer
{
    @Override
    public void setValue(int v)
    {
        if (v % 2 == 0)
        {
            print("Sorry, this class only lets you square odd numbers!")
            return;
        }
        super.setValue(v);
    }
}

// auto s = new OnlyOddInputsSquarer();
OnlyOddInputsSquarer s = new OnlyOddInputsSquarer();
s.setValue(3);
s.square(); 
```

这行不通。当`Squarer.square()`调用时`setValue()`，它会去哪`OnlyOddInputsSquarer.setValue()`一个会拒绝它的所有值（因为所有的正方形都是偶数）。有什么方法可以覆盖`setValue()`，以便所有函数`Squarer`仍然使用那里定义的方法吗？

PS：抱歉，Java 没有`auto`你没听说过的关键字！我的一厢情愿。

编辑：***我不能修改*** `Squarer`***！***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:22:01.487

在我看来，类 Squarer 的设计并不好。如果您真的需要一个肮脏的技巧来完成这项工作，您还可以覆盖该方法`square()`：

```
class OnlyOddInputsSquarer extends Squarer
{
    @Override
    public void setValue(int v)
    {
        if (v % 2 == 0)
        {
            print("Sorry, this class only lets you square odd numbers!")
            return;
        }
        super.setValue(v);
    }
    @Override
    public void square()
    {
        super.setValue(getValue() * getValue());
    }
} 
```

但是......奇数的平方不是偶数，所以这应该不是问题。我想这只是一个例子，你的真正问题是不同的。

**编辑：**好的，如果这不起作用，甚至还有一个更脏的方法：`setValue`检查堆栈以及它是否是从`square`call 调用的`super.setValue`。我不建议这样做，但如果您**真的**需要完成此操作，[请查看此处了解如何操作。](https://stackoverflow.com/a/6781194/1073063)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:52:50.200

我认为这将是一个相对轻松的解决方案。它将检查推迟到实际平方完成为止。

```
public class OnlyOddInputsSquarer extends Squarer {

    @Override
    public void square() {
        if (getValue() % 2 == 0) {
            throw new IllegalStateException("Sorry, this class only lets you square odd numbers!")
        }
        super.square();
    }

} 
```

这是它的单元测试（需要 JUnit）：

```
public class OnlyOddInputsSquarerTest {

    @Test
    // normally this case would be in a separate test
    public void testSuperclass() {
        Squarer squarer = new Squarer();
        squarer.setValue(3);
        squarer.square();
        Assert.asserEquals(9, squarer.getValue());
    }

    @Test
    public void testOddValue() {
        OnlyOddInputsSquarer oddSquarer = new OnlyOddInputsSquarer();
        oddSquarer.setValue(3);
        try {
            oddSquarer.square();
            Assert.fail("Expected IllegalStateException");
        catch(IllegalStateException e) {
            // expected
        }
    }

    @Test
    public void testEvenValue() {
        OnlyOddInputsSquarer oddSquarer = new OnlyOddInputsSquarer();
        oddSquarer.setValue(4);
        oddSquarer.square();
        Assert.asserEquals(16, squarer.getValue());
    }

} 
```

# android - 如何拥有更好看的 DatePicker？

> ID：13511210
> 
> 赞同：2
> 
> 时间：2012-11-22T10:56:09.007
> 
> 标签：android, user-interface, android-datepicker

我必须开发一个需要在 2.2 设备上运行的 Android 应用程序；我正在使用 UI 相当不错的 HoloEverywhereLib。我需要使用 DatePicker；如果我使用默认组件，它的外观非常难看：

![在此处输入图像描述](../Images/86a827a31a6100075189a78c1f326ba5.png)

我想要一个类似新的东西：

![在此处输入图像描述](../Images/e8d6b1e368d845c9fdb0b67827a2157c.png)

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:15:43.937

如果您想拥有 Android HC+ 的默认日期选择器，您可以通过从[Android github 框架镜像](https://github.com/android/platform_frameworks_base/tree/master/core/java/android/app)中复制代码来实现它：

您将需要 DatePickerDialog：

```
package.android.app;

import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.text.format.DateUtils;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.DatePicker;
import android.widget.DatePicker.OnDateChangedListener;

import com.android.internal.R;

import java.util.Calendar;

/**
 * A simple dialog containing an {@link android.widget.DatePicker}.
 *
 * <p>See the <a href="{@docRoot}guide/topics/ui/controls/pickers.html">Pickers</a>
 * guide.</p>
 */
public class DatePickerDialog extends AlertDialog implements OnClickListener,
        OnDateChangedListener {

    private static final String YEAR = "year";
    private static final String MONTH = "month";
    private static final String DAY = "day";

    private final DatePicker mDatePicker;
    private final OnDateSetListener mCallBack;
    private final Calendar mCalendar;

    private boolean mTitleNeedsUpdate = true;

    /**
     * The callback used to indicate the user is done filling in the date.
     */
    public interface OnDateSetListener {

        /**
         * @param view The view associated with this listener.
         * @param year The year that was set.
         * @param monthOfYear The month that was set (0-11) for compatibility
         *  with {@link java.util.Calendar}.
         * @param dayOfMonth The day of the month that was set.
         */
        void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth);
    }

    /**
     * @param context The context the dialog is to run in.
     * @param callBack How the parent is notified that the date is set.
     * @param year The initial year of the dialog.
     * @param monthOfYear The initial month of the dialog.
     * @param dayOfMonth The initial day of the dialog.
     */
    public DatePickerDialog(Context context,
            OnDateSetListener callBack,
            int year,
            int monthOfYear,
            int dayOfMonth) {
        this(context, 0, callBack, year, monthOfYear, dayOfMonth);
    }

    /**
     * @param context The context the dialog is to run in.
     * @param theme the theme to apply to this dialog
     * @param callBack How the parent is notified that the date is set.
     * @param year The initial year of the dialog.
     * @param monthOfYear The initial month of the dialog.
     * @param dayOfMonth The initial day of the dialog.
     */
    public DatePickerDialog(Context context,
            int theme,
            OnDateSetListener callBack,
            int year,
            int monthOfYear,
            int dayOfMonth) {
        super(context, theme);

        mCallBack = callBack;

        mCalendar = Calendar.getInstance();

        Context themeContext = getContext();
        setButton(BUTTON_POSITIVE, themeContext.getText(R.string.date_time_done), this);
        setIcon(0);

        LayoutInflater inflater =
                (LayoutInflater) themeContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.date_picker_dialog, null);
        setView(view);
        mDatePicker = (DatePicker) view.findViewById(R.id.datePicker);
        mDatePicker.init(year, monthOfYear, dayOfMonth, this);
        updateTitle(year, monthOfYear, dayOfMonth);
    }

    public void onClick(DialogInterface dialog, int which) {
        tryNotifyDateSet();
    }

    public void onDateChanged(DatePicker view, int year,
            int month, int day) {
        mDatePicker.init(year, month, day, this);
        updateTitle(year, month, day);
    }

    /**
     * Gets the {@link DatePicker} contained in this dialog.
     *
     * @return The calendar view.
     */
    public DatePicker getDatePicker() {
        return mDatePicker;
    }

    /**
     * Sets the current date.
     *
     * @param year The date year.
     * @param monthOfYear The date month.
     * @param dayOfMonth The date day of month.
     */
    public void updateDate(int year, int monthOfYear, int dayOfMonth) {
        mDatePicker.updateDate(year, monthOfYear, dayOfMonth);
    }

    private void tryNotifyDateSet() {
        if (mCallBack != null) {
            mDatePicker.clearFocus();
            mCallBack.onDateSet(mDatePicker, mDatePicker.getYear(),
                    mDatePicker.getMonth(), mDatePicker.getDayOfMonth());
        }
    }

    @Override
    protected void onStop() {
        tryNotifyDateSet();
        super.onStop();
    }

    private void updateTitle(int year, int month, int day) {
        if (!mDatePicker.getCalendarViewShown()) {
            mCalendar.set(Calendar.YEAR, year);
            mCalendar.set(Calendar.MONTH, month);
            mCalendar.set(Calendar.DAY_OF_MONTH, day);
            String title = DateUtils.formatDateTime(mContext,
                    mCalendar.getTimeInMillis(),
                    DateUtils.FORMAT_SHOW_DATE
                    | DateUtils.FORMAT_SHOW_WEEKDAY
                    | DateUtils.FORMAT_SHOW_YEAR
                    | DateUtils.FORMAT_ABBREV_MONTH
                    | DateUtils.FORMAT_ABBREV_WEEKDAY);
            setTitle(title);
            mTitleNeedsUpdate = true;
        } else {
            if (mTitleNeedsUpdate) {
                mTitleNeedsUpdate = false;
                setTitle(R.string.date_picker_dialog_title);
            }
        }
    }

    @Override
    public Bundle onSaveInstanceState() {
        Bundle state = super.onSaveInstanceState();
        state.putInt(YEAR, mDatePicker.getYear());
        state.putInt(MONTH, mDatePicker.getMonth());
        state.putInt(DAY, mDatePicker.getDayOfMonth());
        return state;
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        int year = savedInstanceState.getInt(YEAR);
        int month = savedInstanceState.getInt(MONTH);
        int day = savedInstanceState.getInt(DAY);
        mDatePicker.init(year, month, day, this);
    }
} 
```

和[AltertDialog](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/AlertDialog.java)。

您还必须导入资源。你可以在[这里](https://github.com/android/platform_frameworks_base/tree/master/core/res)找到它们。并且您必须将 AlertDialog 中的 Holo 主题替换为 HoloEverwhere 等价于黑暗和光明主题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:00:01.293

获取冰淇淋三明治风格日期选择器的最简单方法是使用[ActionBarSherlock 库。](http://actionbarsherlock.com/)

然后创建对话框类：

```
public class DatePickerFragment extends SherlockDialogFragment implements android.app.DatePickerDialog.OnDateSetListener {

    private OnFragmentClickListener mListener;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnFragmentClickListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement listeners!");
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        // Do something with the date chosen by the user
        Calendar c = Calendar.getInstance();
        c.set(Calendar.YEAR, year);
        c.set(Calendar.MONTH, monthOfYear);
        c.set(Calendar.DAY_OF_MONTH, dayOfMonth);

        mListener.onFragmentClick(DialogDemonstrationActivity.DATE_PICKER_ACTION, c);
    }
} 
```

活动监听器类：

```
public interface OnFragmentClickListener {
    public void onFragmentClick(int action, Object object);
} 
```

可以从您的活动中启动该对话框：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
                // Create and show the dialog.
                DatePickerFragment newFragment = new DatePickerFragment();
                newFragment.show(ft, null); 
```

然后，您的活动必须实现侦听器，并且您已启动并运行。

# regex - sed - 删除大型 csv 文件中引号内的引号

> ID：13511215
> 
> 赞同：5
> 
> 时间：2012-11-22T10:56:30.347
> 
> 标签：regex, csv, sed

我正在使用流编辑器 sed 将大量文本文件数据 (400MB) 转换为 csv 格式。

我已经非常接近完成，但突出的问题是引号中的引号，在这样的数据上：

```
1,word1,"description for word1","another text",""text contains "double quotes" some more text"
2,word2,"description for word2","another text","text may not contain double quotes, but may contain commas ,"
3,word3,"description for "word3"","another text","more text and more" 
```

所需的输出是：

```
1,word1,"description for word1","another text","text contains double quotes some more text"
2,word2,"description for word2","another text","text may not contain double quotes, but may contain commas ,"
3,word3,"description for word3","another text","more text and more" 
```

我四处寻找帮助，但我并没有太接近解决方案，我尝试了以下带有正则表达式模式的 seds：

```
sed -i 's/(?<!^\s*|,)""(?!,""|\s*$)//g' *.txt
sed -i 's/(?<=[^,])"(?=[^,])//g' *.txt 
```

这些来自以下问题，但似乎不适用于 sed：

[perl 的相关问题](https://stackoverflow.com/questions/10446583/perl-regex-how-to-remove-quotes-inside-quotes-from-csv-line)

[SISS的相关问题](https://stackoverflow.com/questions/12320123/replace-double-quotes-within-qualifiers-in-csv-for-ssis-import)

原始文件是 *.txt，我正在尝试使用 sed 编辑它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:47:17.903

这是使用[FPAT](http://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html)变量`GNU awk`的一种方法：

```
gawk 'BEGIN { FPAT="([^,]+)|(\"[^\"]+\")"; OFS=","; N="\"" } { for (i=1;i<=NF;i++) if ($i ~ /^\".*\"$/) { gsub(/\"/,"", $i); $i=N $i N } }1' file 
```

结果：

```
1,word1,"description for word1","another text","text contains double
quotes some more text" 2,word2,"description for word2","another
text","text may not contain double quotes, but may contain commas ,"
3,word3,"description for word3","another text","more text and more" 
```

解释：

> 使用 FPAT，字段被定义为“非逗号的任何内容”或“双引号、非双引号的任何内容以及结束双引号”。然后在输入的每一行，遍历每个字段，如果字段以双引号开始和结束，则从字段中删除所有引号。最后，在字段周围添加双引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:29:06.073

```
sed -e ':r s:["]\([^",]*\)["]\([^",]*\)["]\([^",]*\)["]:"\1\2\3":; tr' FILE 
```

这会查看类型的字符串`"STR1 "STR2" STR3 "`并将它们转换为`"STR1 STR2 STR3"`. 如果它找到了一些东西，它会重复，以确保它消除深度 > 2 的所有嵌套字符串。

它还确保没有 STRx 包含`comma`.

# php - Simplexml 使用命名空间获取属性

> ID：13511217
> 
> 赞同：2
> 
> 时间：2012-11-22T10:56:31.117
> 
> 标签：php, xml-parsing, simplexml

我有一个具有命名空间属性的 XML 文档。XML 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sunil.tweet"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.sunil.tweet.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

如何`android:name`从`activity`标签中提取属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:42:33.973

获取属性时需要使用命名空间。`android`命名空间定义为：

> [http://schemas.android.com/apk/res/android](http://schemas.android.com/apk/res/android)

因此，您需要将其传递给[`attributes()`](http://uk1.php.net/manual/en/simplexmlelement.attributes.php)方法，如下所示：

```
$xml = simplexml_load_string($xmlStr);

echo (string) $xml->application->activity->attributes('http://schemas.android.com/apk/res/android')->name; 
```

**输出**

> com.sunil.tweet.MainActivity

[**键盘演示**](http://codepad.org/hpWdfH5S)

# azure - 在 Azure 上存储非关系数据

> ID：13511222
> 
> 赞同：0
> 
> 时间：2012-11-22T10:56:44.673
> 
> 标签：azure, nosql, azure-sql-database

我们正在建立一个慈善平台，我们希望记录所有正在发生的活动。例如

*   John Doe（链接）捐赠了 20 美元用于项目有需要的儿童（链接）
*   John Doe（链接）已加入团队建筑师（链接）
*   John Doe（链接）与 Dane Doe（链接）成为朋友
*   Project Children（链接）发布了一张新照片（照片）...

所以它类似于Facebook墙。问题是如何将其存储在 Azure 上？目前我们正在使用 Azure SQL，我们将某些字段存储在 JSON 中，然后基于我们呈现活动的另一个字段。但是我们无法搜索那些非常糟糕的数据等。

我已经检查过非常适合的[Table Services 。](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)唯一的问题是性能和订购。许多人说通过非索引字段搜索真的很慢+我们需要排序（我不知道这里的默认排序是什么，可能是ASC - 我们需要DESC，其他地方ASC）。

其他人建议使用 Lucene.net，只是将数据存储在某处并让 lucene 索引数据。然后我们可以轻松搜索和订购。唯一的问题是更新索引（当我们在平台上做某事时，它必须立即显示，所以我们不能在 1h 左右重建索引）。我知道我们可能可以更新索引并重新索引比某个日期更年轻的记录。它可以工作。

第三个选项是安装像 mongodb 这样的 nosql 数据库。但是在网上阅读，没有人确认它是否有效。但我确实注意到 Azure 商店中有一个 mongodb。

你有什么建议？有没有人遇到过类似的问题，你是怎么解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:47:12.210

你看过使用像[Neo4J](http://neo4j.org/)这样的图形数据库吗？

这是 Azure 上真实生产 neo4j 应用程序的视频：http: [//blog.tatham.oddie.com.au/2012/06/18/new-talks-neo4j-in-a-net-world-and-你现在在生产什么/](http://blog.tatham.oddie.com.au/2012/06/18/new-talks-neo4j-in-a-net-world-and-youre-in-production-now-what/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:20:31.560

实际上，关系数据库表上的索引本身就是子表。考虑到这一点，在 Azure 表存储中维护索引实际上就是将额外的表或行用作索引。您放弃 NoSQL 范式实际上是关系数据库的 ACID 属性，这是您需要在应用程序中处理的事情。（如何做到这一点真的超出了这个答案的范围，取决于你的要求）。

回答您的问题，您需要存储两个链接以启用高效查询。例如，您的人-朋友链接需要同时具有这两种关联；它们可以在同一个表中，也可以在两个单独的表中。像，John Doe - Dane Doe，朋友和 Dana Doe - John Doe，朋友。然后你就会有一个关于 John 和 Dana 的索引，并且能够通过有效的查询获得他们所有的朋友。

如果您真的没有任何可扩展性需求，我建议您使用 Azure SQL 路线而不是表存储路线。ACID 属性很难在应用层实现，正是 ACID 使关系数据库如此可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:07:32.353

lucene.net 是一个不错的解决方案，它可以为您提供近乎实时的搜索。请阅读一本名为“Lucene in action”的书。虽然它适用于 java 版本，但大部分内容在 .net 版本中是相同的。看看它是否可以帮助你。

# url - URL结构：小写VS大写

> ID：13511227
> 
> 赞同：32
> 
> 时间：2012-11-22T10:57:08.770
> 
> 标签：url, uppercase, lowercase

当我浏览一些网站时，我的脑海中就会触发它们是否在 url 中有大写和小写组合，例如`http://www.domain.com/Home/Article`

现在我知道我们应该总是在 url 中使用小写，但不知道技术原因。我想向您的专家学习以明确这个概念，为什么要在 url 中使用小写字母。大写 url 的优缺点是什么。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-22T11:10:49.997

域部分不区分大小写。`GoOgLe.CoM`作品。您可以根据需要添加大写字母，但通常没有理由这样做，并且如下评论所述，可能会损害您的 SEO 排名。

路径部分区分大小写或不区分大小写，具体取决于服务器环境和服务器。通常 Windows 机器不区分大小写，而 Linux 机器区分大小写。这意味着您应该坚持使用小写，否则您可能会引入一个很难找到的错误（在开发服务器上无关紧要的大小写不匹配）。

查询字符串部分对服务器可用。您可以随意使用大小写混合，或丢弃大小写 ( `toLowerCase(...)`)。这也意味着使用 base64 编码的密钥*将*起作用。但是，您不能指望用户正确输入。

哈希部分（称为“片段标识符”）仅对客户端代码可用，对服务器不可用。Javascript 可以根据需要区分不同的情况，浏览器也是如此。`url#a`将滚动到具有 ID 的元素`a`，但`url#A`不会。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-11-03T00:33:58.067

我将不得不不同意所有关于这一点的既定智慧，所以我可能会被否决，但是：

如果您将所有大小写混合的 url 重定向到正确大小写的 url，它可以解决所有提到的问题。因此，这个论点似乎来自传统和偏好。URL 的重点是对页面进行用户友好的表示，如果您的 url 对大写更友好，为什么不使用它呢？比较：

**moviesforyoutowatch.com/batman-vii-the-dark-knight-whatevers MoviesForYouToWatch.com/Batman-VII-The-Dark-Knight-Whatevers**

我发现混合大小写版本更适合此目的。如果有小写比较和重定向无法解决的技术原因，请分享。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-23T14:01:09.500

我知道你问的是技术原因，但从用户体验的角度来看也值得考虑。

假设您有一个带有大写字符的 URL，并且为了论证，它已在印刷媒体上分发。当用户将该 URL 输入到他们的浏览器中时，他们很可能被迫匹配该大小写（或者如果您的 Web 服务器区分大小写，则被迫匹配指定的大小写）最终您给他们更多的工作要做，因为他们必须做还要考虑案例。毕竟，他们不知道您的服务器是否区分大小写，并且他们过去可能经历过区分大小写的 Web 服务器的 404。

如果您的服务器区分大小写并且您正在使用大小写混合的 URL，那么您就为用户提供了更大的范围来错误输入 URL。此外，假设您有 URL www.example.com/Contact。如果用户忽略了这一点并使用了错误的大小写，则很容易混淆大小写“c”（特别是如果它是手写复制的），他们可能永远无法访问您的内容。

考虑到这一切，请考虑 www.example.com/News/Articles/FreeIceCreamForAll。在不太难的键盘上，但考虑到在移动设备上，输入会非常繁琐。

如果用户想从地址栏中记下 URL，反之亦然。他们可能觉得他们需要匹配案例，最终让他们做更多的工作并增加错误的可能性。

总结；保持 URL 小写。

* * *

## 回答 #4

> 赞同：-18
> 
> 时间：2014-03-12T14:29:21.040

***关于此问题的安全方面：***

实际上有一个很好的安全理由来混合使用大写和小写。

它具有混淆和阻止攻击者的效果！

在人类对话中，人类很容易混淆大写和小写的使用。

如果它们包含大写和小写，则人类无法清楚地“说出”“标识符或密码或网址”的单词。

这有助于保护站点子部分上的数据或密码的安全，这些子部分是作为站点或其数据的“自动访问”部分的锁定或安全子部分的一部分提供的。

它类似于不使用 JSON。

JSON 是“人类可读的文本”，因此 JSON 只是为所有攻击者（包括政府、谷歌……窃取您的想法和数据）提供...几乎他们需要了解的有关数据的所有信息...它更安全通过使用私人定制的非常快速的“二进制协议”来混淆他们 - 使用您自己的“不可知的数据结构”......但请注意，因为实际上可能会混淆您自己或您自己的开发团队。

您的所有安全层和协议都必须“妥善管理”以避免混淆。

因此，通过简单地使用完全非常规的系统（即为什么有人想要使用“标准安全协议”，当一些简单的重量级先前计算它们都可以很容易地被破坏）。

只是“盐和哈希”一切 - 再加上你自己的一些额外的额外定制的安全性 - 这只是常识！

结论：以上所有答案都非常清楚和正确 - 但您也可以愉快地利用同样的知识来迷惑潜在的攻击者。

# git - 垃圾收集对中央 Git 存储库很有用

> ID：13511230
> 
> 赞同：0
> 
> 时间：2012-11-22T10:57:18.457
> 
> 标签：git, garbage-collection

我们使用中央 Git 存储库。在服务器上定期运行“git gc”会有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:06:08.137

根据[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-gc.html)：

> 鼓励用户在每个存储库中定期运行此任务，以保持良好的磁盘空间利用率和良好的运行性能。

如果您关心磁盘使用情况，那肯定会有用。如果您考虑到效率，请对其进行基准测试。`git gc`不应造成任何伤害，尤其是在其内容在写入后很少（或者更确切地说从不）删除的中央存储库中。你应该多久运行一次？[这取决于](https://stackoverflow.com/questions/55729/how-often-should-you-use-git-gc).

# nhibernate - 在 ConfORM 中编写自定义应用程序时检查现有映射

> ID：13511233
> 
> 赞同：0
> 
> 时间：2012-11-22T10:57:40.580
> 
> 标签：nhibernate, conform

我正在为 ConfORM 编写我的第一个自定义列名称应用程序。

如何检查另一列是否已被映射具有相同的映射名称？

这是我到目前为止所拥有的：

```
public class MyColumnNameApplier : IPatternApplier<PropertyPath, IPropertyMapper>
{
    public bool Match(PropertyPath subject)
        {
            return (subject.LocalMember != null);
        }

        public void Apply(PropertyPath subject, IPropertyMapper applyTo)
        {
            string shortColumnName = ToOracleName(subject);
            // How do I check if the short columnName already exists?
            applyTo.Column(cm => cm.Name(shortColumnName));
        }

        private string ToOracleName(PropertyPath subject)
        {
            ...
        }
    }
} 
```

我需要将生成的列名缩短到少于 30 个字符以适应 Oracle 的 30 个字符限制。因为我正在缩短列名，所以相同的列名可能会生成两个不同的属性。我想知道何时发生重复映射。

如果我不处理这种情况，ConfORM/NHibernate 允许两个不同的属性“共享”相同的列名——这显然会给我带来问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:19:36.267

如果列名被映射两次，您将在首次加载时获得有关参数计数的异常。配置后可以查看：

```
foreach (var clazz in config.ClassMappings)
{
    var propertiesWithOneColumn = clazz.PropertyClosureIterator.Where(p => p.ColumnSpan == 1);

    var distinctColumns = new HashSet<string>();
    foreach (var prop in propertiesWithOneColumn)
    {
        var col = prop.ColumnIterator.First().Text;
        if (distinctColumns.Add(col))
        {
            Console.WriteLine("duplicate column "+ col + " found for property " + prop.PersistentClass.ClassName + "." + prop.Name);
        }
    }
} 
```

# php - 无法建立mysql连接

> ID：13511239
> 
> 赞同：0
> 
> 时间：2012-11-22T10:58:12.217
> 
> 标签：php, mysql

如果我使用以下代码，它可以工作：

```
$con = mysql_connect("localhost","root","");
if (!$con)  {
  die('Could not connect: ' . mysql_error());
} 
```

但是当我这样做时，它不会：

```
$db_host='localhost';
$db_id='root';
$db_pass='';
$con = mysql_connect($db_host, $db_id, $db_pass);

if (!$con)  {
  die('Could not connect: ' . mysql_error());
} 
```

试图交换 (") 和 (')。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:08:13.947

尝试使用这样的脚本

```
$db_host = 'localhost'; 
$db_id = 'root'; 
$db_pass ='';
$con = mysql_connect ($ db_host, $ db_id, $db_pass) or die ('Could not connect:'. mysql_error ()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:17:25.383

那个代码很好。查看错误日志 - 问题必须在该代码之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:19:26.713

不鼓励 mysql_ 函数用于新应用程序a，建议您使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。以下代码使用 PDO 连接到数据库。

```
//dependant on your setup
$host= "localhost";
$username="XXX";
$password="YYY";
$database="ZZZ";

// connect to the database  
try {  
    $dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);  
    //Remainder of code
  }  

catch(PDOException $e) {  
    echo "I'm sorry I'm afraid you can't do that.". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]'). $e->getMessage()."\r\n", FILE_APPEND);//Change file name to suit  
}  
// close the connection
$dbh = null; 
```

# c# - 启用中继器中的所有按钮，但单击的按钮除外

> ID：13511240
> 
> 赞同：0
> 
> 时间：2012-11-22T10:58:15.990
> 
> 标签：c#, asp.net, button, repeater

我有一个`Repeater Control`带有各种按钮的。

当按钮被单击时，它需要禁用自身，以便无法再次单击。**在职的。**

但是，当我单击该按钮时，它需要启用除它之外的任何其他按钮。

所以，当我点击它时，它需要禁用。当我单击另一个按钮时，必须启用上一个按钮，并且必须禁用该按钮。

所以我试过：

```
Button btnLoad = (Button)e.Item.FindControl("btnLoad");

foreach (Button b in e.Item.Controls.OfType<Button>().Select(c => c).Where(b => b != btnLoad))
{
   b.Enabled = true;
}

btnLoad.Text = "Currently Viewing";
btnLoad.Enabled = false; 
```

但它不起作用。根据我放置它的位置，它要么启用所有按钮（但仍在更改其文本），要么根本不做任何事情。

我需要做什么才能完成这项工作？

**编辑：**代码在这里找到：

`protected void rptPdfList_ItemCommand(object source, RepeaterCommandEventArgs e)`

这就是我使用`Button btnLoad = (Button)e.Item.FindControl("btnLoad");`.

方法见于：

```
switch (e.CommandName)
        {
            case "LoadDoc":
                 //Above code
               break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:08:39.377

在循环中尝试一个简单的 if 语句，如下所示

```
Button btnLoad = (Button)e.Item.FindControl("btnLoad");
foreach (Control c in e.Item.Controls)
    {
        if (b is Button)
        {
            if(b == btnLoad)
             {
             b.Enabled = false;
             }
            else
             {
             b.Enabled = true;
             }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:09:01.150

假设您希望在`Button`'s `Click`-event 处理程序中使用该代码：

```
protected void Button_Clicked(Object sender, EventArgs e)
{
    Button thisButton = (Button) sender;
    thisButton.Text = "Currently Viewing";
    RepeaterItem item = (RepeaterItem) thisButton.NamingContainer;
    IEnumerable<Button> buttons = item.Controls.OfType<Button>();
    foreach(var btn in buttons)
    {
        btn.Enabled = btn != thisButton;
    }
} 
```

# git - git-svn 会将文件权限更改发送到 SVN 存储库吗？

> ID：13511242
> 
> 赞同：1
> 
> 时间：2012-11-22T10:58:19.123
> 
> 标签：git, file, svn, permissions

我在 svn 环境中使用 git-svn。当我签出 .sh 文件时，他们没有得到 +x 标志。所以我手动更改它，但现在 git 告诉我文件已被修改。

我的问题是：如果我要暂存 + 提交这些 +x 更改，当我“git svn dcommit”时，git 会将它们推送到 svn 服务器吗？这不是我想要的，我只想让 git 在本地“记住”+x 更改，而不是尝试将文件权限更改发送到 svn 存储库。

# css - 使父 div 内的 100% 宽度的主体，而不是父 div

> ID：13511249
> 
> 赞同：15
> 
> 时间：2012-11-22T10:58:42.920
> 
> 标签：css, width

我想让我的内部 div 100% 的宽度，而不是父 div 的 100%。这可能吗？

布局如下所示：

```
<body>
   <div> /** Width:900px; **/
      <div> /** This I want 100% of BODY, not of parent div **/

      </div>
   </div>
</body> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T11:05:45.027

我希望你看起来像这样............看[**演示**](http://jsfiddle.net/ygXy6/13/)

[**根据您当前的要求更新了演示 2**](http://jsfiddle.net/ygXy6/18/)

**CSS**

```
 .parent {
background:red;
width:900px;
margin:0 auto;
padding:10px;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
}

.inner {
background:green;
height:100px;
position:absolute;
  left:0;
  right:0;
}

.child {
  height:100px;
  background:black;
  margin:10px 0;
} 
```

**------------- ***** *****

 ****第二个答案**没有定位，但我在这里使用了一些技巧，所以请检查下面提到的代码和演示：-

**HTML**

```
<body>
   <div class="parent"> /** Width:900px; **/
  <div class="child"></div>
  </div>
  <div class="inner"> /** This I want 100% of BODY, not of parent div  **/</div>
   <div class="parent">
       <div class="child"></div>
       <div class="child"></div>
   </div>
</body> 
```

**CSS**

```
.parent {
background:red;
width:900px;
margin:0 auto;
padding:10px;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
}

.inner {
background:green;
height:100px;
}

.child {
  height:100px;
  background:black;
  margin:10px 0;
} 
```

[**演示**](http://jsfiddle.net/ygXy6/23/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-15T14:10:51.557

您可以使用 vh 和 vw 单位

```
.parent {
  width: 900px;
  height: 400px;
  background-color: red;
}
.child {
  width: 100vw;
  height: 200px;
  background-color: blue;
} 
```

```
<html>
  <body>
   <div class="parent"> 
      <div class="child"> 

      </div>
   </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-15T13:16:24.940

尝试这个：

```
.inner {
  margin-left: -50vw;
  left: 50%;
  position: fixed;
  height: 100vw;
  width: 100vw;
  top: 0;
}

.outer {
  width: 900px;
  /* your outer div style*/
}
```

```
<body>
  <div class="outer"> /** Width:900px; **/
    <div class="inner"> /** This 100% of BODY, not of parent div **/

    </div>
  </div>
</body>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:14:38.020

我认为你所要求的是不可能的。相反，您应该考虑重新考虑您的布局。我经常发现自己在做这样的事情：

html:

```
<div id="top">
    <div class="wrapper"></div>
</div>
<div id="content">
    <div class="wrapper"></div>
</div>
<div id="footer">
    <div class="wrapper"></div>
</div> 
```

CSS：

```
#top {
  background: red;
}

#content {
  background: orange;
}

#footer {
  background: yellow;
}

.wrapper {
  width: 860px;
  margin: 0 auto;
  padding: 20px;
  background: rgba(255, 255, 255, 0.2);
} 
```

演示 - [http://jsfiddle.net/bxGH2/](http://jsfiddle.net/bxGH2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T11:57:11.677

这成功了。一个 jQuery 脚本：

```
$(document).ready(function () {
  var width = $(window).width();
  $('.pane-block-8').attr('style', 'width:' + width + 'px; left:-26.5% !important;');
});

$(window).resize(function () {
  var width = $(window).width();
  $('.pane-block-8').attr('style', 'width:' + width + 'px; left:-26.5% !important;');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T11:30:44.757

考虑将您的布局更改为以下内容：

[http://jsfiddle.net/KpTHz/](http://jsfiddle.net/KpTHz/)

然后，您可以将 ID 标签应用到要应用特定规则的 DIV。

```
<div class="outer">
 <div class="inner">HEADER</div>
</div>

<div class="outer">
 <div class="inner">CONTENT</div>
</div>

<div class="outer">
 <div class="inner">FOOTER</div>
</div>

.outer {
 width:100%;
 background:#ccc;
}

.inner {
 width:920px;
 background:#999;
 margin:0 auto 20px;
 padding:20px;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-21T19:48:19.050

覆盖**最小宽度**（**min-width:100%**）阻止容器增长到内容的大小。

**详细信息：** [https](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/fieldset) ://developer.mozilla.org/en-US/docs/Web/HTML/Element/fieldset通知：“与几乎任何其他元素不同，WHATWG HTML 渲染规范建议将 **min-width: min-content** 作为的默认样式，许多浏览器都实现了这种样式（或类似的样式）。”**

# java - 在java中使用RSA加密加密的消息

> ID：13511250
> 
> 赞同：0
> 
> 时间：2012-11-22T10:58:46.790
> 
> 标签：java, encryption, rsa, pki

我已经使用 AES 加密了一个字符串。我已经为 AES 提供了这样做的密钥。现在，我正在尝试用 RSA 加密给定的密钥（直到这里一切顺利），现在我需要再次用 RSA 加密这个加密的密钥。我收到错误消息“数据不得超过 117 个字节”。

```
public String encrypt(String DATA,String key_string) throws Exception {
    String separator = "//msit//";
    byte[] data = key_string.getBytes();
    MessageDigest sha = MessageDigest.getInstance("SHA-1");
    data = sha.digest(data);
    data = Arrays.copyOf(data, 16); // use only first 128 bit
    SecretKey key = new SecretKeySpec(data, "AES");
    String final_matter = DATA + separator;
    System.out.println(final_matter);
    ecipher = Cipher.getInstance("AES");
    ecipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] utf8 = final_matter.getBytes("UTF8");
    byte[] enc = ecipher.doFinal(utf8);
    return new sun.misc.BASE64Encoder().encode(enc);
    } 
```

![公钥基础结构](../Images/f48c4bcc792c0ffcb0c3b15f77bc945c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:15:30.623

RSA 密钥可以加密的最大数据量等于它的模数长度。所以一个 1024 位的 RSA 密钥只能加密 128 个字节。您可能正在使用 PKCS #1 填充，这进一步将可能的大小减少到 117 字节。

您的 AES 密钥应该比最大值*小得多。*最大可能的 AES 密钥大小为 256 位，即 32 字节。

请检查您的代码并确保您只尝试加密密钥数据而不是其他任何东西。

* * *

根据您上面的评论，您似乎加密了太多数据。尝试以下操作：

*   使用发件人的私钥对 AES 密钥进行签名，但将结果*分开*。

*   使用收件人的公钥加密 AES 密钥。

*   将这两个部分都发送给收件人。

使用私钥签名的结果是一条大小等于密钥模数的数据。因此，您不能使用相同长度的公钥对其进行加密。您的方案已损坏，应该按照我上面的建议进行更改。

我强烈建议您寻找现有的 PKI 系统来代替任何自制的系统。也许[EJBCA](http://www.ejbca.org/)？

# antlr - 如何从分层键值语法创建带有 ANTLR 的 AST

> ID：13511252
> 
> 赞同：1
> 
> 时间：2012-11-22T10:58:47.100
> 
> 标签：antlr, grammar, hierarchy, ebnf

我一直在研究用 ANTLR 解析键值数据格式。非常简单，但键代表层次结构。

我的输入语法的简化示例：

```
/a/b/c=2
/a/b/d/e=3
/a/b/d/f=4 
```

在我看来，这代表一棵结构如下的树：

```
(a (b (= c 2) (d (= e 3) (= f 4)))) 
```

我能得到的最接近的是使用以下语法：

```
/* Parser Rules */
start: (component NEWLINE?)* EOF -> (component)*;

component: FORWARD_SLASH ALPHA_STRING component -> ^(ALPHA_STRING component)
  | FORWARD_SLASH ALPHA_STRING EQUALS value -> ^(EQUALS ALPHA_STRING value);

value: ALPHA_STRING;

/* Lexer Rules */
NEWLINE : '\r'? '\n';
ALPHA_STRING : ('a'..'z'|'A'..'Z'|'0'..'9')+;
EQUALS : '=';
FORWARD_SLASH : '/'; 
```

产生：

```
(a (b (= c 2))) (a (b (d (= e 3)))) (a (b (d (= f 4)))) 
```

我不确定我是否对像 ANTLR 这样的通用工具提出了太多要求，这是我可以通过这种方法得到的。也就是说，从这里我使用树的各个部分并手动创建我想要的数据结构。

那么 - 我可以直接从语法中生成我想要的树结构吗？如果是这样，怎么做？如果不是，为什么不呢 - 它是 ANTLR 的技术限制，还是与所涉及的语言类型有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:08:47.873

> 我不确定我是否对像 ANTLR 这样的通用工具要求太多...

我认为您对令牌解析器的要求太多。对于 input `/a/b/c=2`，令牌解析器看到：

`FORWARD_SLASH` `ALPHA_STRING` `FORWARD_SLASH` `ALPHA_STRING` `FORWARD_SLASH` `ALPHA_STRING` `EQUALS` `ALPHA_STRING`

在这种情况下，有趣的是令牌本身中的文本，令牌解析器对此并不关心。您至少需要使用手动编码的操作来挖掘令牌、存储它们、组织它们并以所需的排列方式将它们吐出。

> ...也就是说，从这里我消耗树的部分并手动创建我想要的数据结构。

您可以选择使用一个或多个 ANTLR 树解析器来帮助您完成任务，但它们也关注令牌类型而不是令牌文本。最终我认为你仍然需要在某个地方编写一个动作。

使用您的语法和使用相同标记词汇的自定义树语法，我能够减少这种情况（使用根节点提供帮助）：

`(START (a (b (= c 2))) (a (b (d (= e 3)))) (a (b (d (= f 4)))))`

对此：

`(START (a (b (= c 2) (d (= e 3)))) (a (b (d (= f 4)))))`

不错的开始（如果您有兴趣，我可以发布树语法），但这需要语义谓词。如果没有我的一些编码，ANTLR 就无法做到这一点。

> 那么 - 我可以直接从语法中生成我想要的树结构吗？...如果不是，为什么不呢 - 它是 ANTLR 的技术限制，还是与所涉及的语言类型有关？

这是某种技术上的限制：在词法分析之后，ANTLR 正确（即，不是您可以注入的代码）对令牌而不是它们可能包含的文本进行操作¹。如果文本“a”映射到令牌`A`，文本“b”映射到令牌`B`（等等），树解析器会给你一些现在不能的杠杆作用，但我认为你仍然需要编写一些动作和/或语义谓词来获得你想要的。

* * *

¹除了能够使用自定义文本创建标记外，但这与此问题无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:13:49.027

您可以做的不是使用 AST，而是定义自己的树和操作。然后，您不需要每次触发“组件”规则时都创建新树，而只需向其添加新节点即可。我希望这个想法很清楚？

# gwt - gwt 中的内存使用情况

> ID：13511254
> 
> 赞同：3
> 
> 时间：2012-11-22T10:58:57.703
> 
> 标签：gwt, memory, memory-management

我是 GWT 的新手，对 GWT 中的内存使用有一些疑问。

是否可以检测到 gwt 客户端（浏览器）中剩余多少内存？如果浏览器内存变低，是否有事件作为释放资源的信号？

是否有一个已知的近似值可以在不同的浏览器中使用多少内存，尤其是移动浏览器？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:10:05.450

我还没有遇到过这样做的浏览器 api。您可以通过设计低内存占用的应用程序以另一种方式解决此问题。实现性能最佳应用程序的分析技术如下 -

1.  通过原始方法跟踪开发窗口的 GWT 应用程序的内存占用。打开/导航任务管理器 -> 性能 -> PF 使用情况。

2.  使用 chrome 的内存分析器

    A. [https://developers.google.com/chrome-developer-tools/docs/profiles](https://developers.google.com/chrome-developer-tools/docs/profiles)

    B. [https://developers.google.com/chrome-developer-tools/docs/memory-analysis-101](https://developers.google.com/chrome-developer-tools/docs/memory-analysis-101)

3.  Use memory profiler from firefox - Firefox[的 Javascript 内存分析器](https://stackoverflow.com/questions/171565/javascript-memory-profiler-for-firefox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:36:02.463

您的 GWT 代码将被编译并作为 JavaScript 代码发送到客户端。JS 被限制在沙箱中，并且不提供找出客户端浏览器使用了多少内存的方法。

但是您可以应用一个技巧并尝试估计页面内容的重量并测量其加载速度。这样你就可以对客户端浏览器的性能进行非常粗略的评价。

# php - 如何解决php中的“无法修改标头信息-标头已由”eroor

> ID：13511255
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:58:57.343
> 
> 标签：php

> **可能重复：**
> [PHP 错误：无法修改标头信息 - 标头已发送](https://stackoverflow.com/questions/1793482/php-error-cannot-modify-header-information-headers-already-sent)
> [“警告：标头已发送”在 PHP](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我多次使用 header('location:index.php')..但每次它都会给我错误，例如“无法修改标头信息 - 标头已发送”..请任何人帮助我....

```
<?PHP
    $exist=mysql_query("select * from lease where pro_id='".$pro_id."'")
    or die(mysql_error());
    if(mysql_num_rows($exist)>0){header('location:leaseexist.php');} ?> 
```

更新

错误是

> ```
> Warning: Cannot modify header information - headers already sent by (output started at 
> ```
> 
> /home/content/39/9845539/html/slwebsite/leaseprofile.php:15) 在 /home/content/39/9845539/html/slwebsite/leaseprofile.php 第 19 行

第 19 行是

```
 if(mysql_num_rows($exist)>0){header('location:leaseexist.php');} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:05:58.453

应该在第一行检查空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:25:58.873

试试@flush(); 在每个标题位置的上侧。例如：

```
if(mysql_num_rows($exist)>0){
 @flush();
 header('location:leaseexist.php');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:02:47.620

这可能是因为您的文件 leaseexist.php 包含一些提示标头错误的无效代码，或者您当前的脚本混合了一些 html 代码。确保在发送标头之前不发送任何内容，否则会引发错误。标头应该是首先发送到浏览器的内容

# jsf - 在 selectedOneMenu 列表中显示 Hashtable

> ID：13511256
> 
> 赞同：0
> 
> 时间：2012-11-22T10:59:06.003
> 
> 标签：jsf, primefaces, hashtable, selectonemenu

我有一个 Hashtable 我想在 selecteOneMenu 中显示它知道怎么做吗？

```
itemCat = new Hashtable<Integer,String>();
    itemCat.put(0,"Functional");
    itemCat.put(1, "Interoperability");
    itemCat.put(2, "Load");
    itemCat.put(3, "Performance");
    itemCat.put(4, "Disponibility");
    itemCat.put(5, "Security");
    itemCat.put(6, "Usability");
    itemCat.put(7, "Other");

 <p:selectOneMenu value="#{projectRequirementManagementMB.selectedCat}" filter="true" filterMatchMode="startsWith" >  
                                       <f:selectItem itemLabel="Select One" itemValue="" />  
                                <f:selectItems value=" {projectRequirementManagementMB.hereShouldbeCategoryValues}" />  
                                     </p:selectOneMenu> 
```

任何想法都会被欣赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:28:18.593

`<f:selectItems>`已经支持的接口`Map`：

```
<f:selectItems value="#{projectRequirementManagementMB.itemCat}" /> 
```

只需

```
public Map<Integer, String> getItemCat() {
   return itemCat;
} 
```

但是，映射键被解释为项目标签，而映射值被解释为项目值。如果您无法在模型中交换映射键/值，则需要在视图中`<f:selectItems>`按如下方式交换它们，前提是您的环境支持 EL 2.2（您的问题历史证实了这一点）。

```
<f:selectItems value="#{projectRequirementManagementMB.itemCat.entrySet()}" 
     var="entry" itemValue="#{entry.key}" itemLabel="#{entry.value}" /> 
```

### 也可以看看：

*   [我们的`h:selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

* * *

**与具体问题**无关**[`Hashtable`](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)，a是一个相当遗留的数据结构（来自 Java 1.0，1996 ！！），您应该使用它的后继者[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)。然而，这反过来又像`Hashtable`另一个问题：这些项目本质上根本没有订购。如果您想[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)维护插入顺序，或者[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)如果您想对键进行自动排序，则可以使用。**

 **```
itemCat = new LinkedHashMap<Integer, String>(); 
```**

# php - Ajax 表单提交不会发生在文本框的 .prepend() 上

> ID：13511259
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:59:35.960
> 
> 标签：php, javascript, jquery

我添加`<input type="text">`通过`$('#').click(function(){});` 然后使用 form.js 写入表，但没有。

如果文本是独立的，它会写。

下面是用于 ajax form.js 的代码。

```
$(function() {   
  $("#c .button").click(function() {     

    var text = $("#N").val();     
    var dataString = 'N='+ N;      
    $.ajax({
      type: "POST",     
      url: "s.php",     
      data: dataString,     
      success: function(){       
        $('.success').fadeIn(1000);
      }
    });      
    return false;   }); 
}); 
```

我应该使用 .live 还是 .on。不过，这两种方法都不起作用。关于为什么它不起作用的任何想法。

[更新]

```
<input type="text" name="N" id="N"><input type="button" value="Ok" id="c" class="button"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:11:22.977

```
change data: dataString, 
```

to

```
data: dataString:dataString, 
```

and in

```
var dataString = 'N='+ N; 
```

what is this variable `N`

also you should use

```
 $("#c , .button").click(function() 
```

instead of

```
 $("#c .button").click(function() 
```

# asp.net - 打开 RTF 文件并查看源代码

> ID：13511263
> 
> 赞同：1
> 
> 时间：2012-11-22T10:59:42.990
> 
> 标签：asp.net, ms-word, rtf

我正在构建一个需要生成许多动态生成的 RTF 文件的 Web 应用程序，这些文件当前是 .RTF 文件，但我需要在我的应用程序中以 RTF 格式构建它们，有谁知道我可以使用的程序或其他东西打开它们并查看创建文件的原始 RTF 代码，例如。

```
{\rtf\ansi\deff0{\fonttbl{\f0\froman Tms Rmn;}{\f1\fdecor 
Symbol;}{\f2\fswiss Helv;}}{\colortbl;\red0\green0\blue0;
\red0\green0\blue255;\red0\green255\blue255;\red0\green255\
blue0;\red255\green0\blue255;\red255\green0\blue0;\red255\
green255\blue0;\red255\green255\blue255;}{\stylesheet{\fs20 
\snext0Normal;}}{\info{\author John Doe}
{\creatim\yr1990\mo7\dy30\hr10\min48}{\version1}{\edmins0}
{\nofpages1}{\nofwords0}{\nofchars0}{\vern8351}}\widoctrl\ftnbj \sectd\linex0\endnhere \pard\plain \fs20 This is plain text.\par} 
```

谢谢你的帮助。J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:11:14.603

记事本或任何文本编辑器都可以。当您以编程方式自己创建文件时，您将希望对回车和换行保持自由，以使文件更具可读性。

# symfony - Symfony2 - 在调用操作和所有捆绑包之前执行一个函数

> ID：13511264
> 
> 赞同：2
> 
> 时间：2012-11-22T10:59:47.857
> 
> 标签：symfony

我想在任何控制器中调用道路时但在号召性用语之前执行一个函数。

目标是代码在控制器中是不可见的，并尽可能做到最好的演练。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:51:53.793

在这里你有解决方案：[https ://matt.drollette.com/2012/06/calling-a-method-before-every-controller-action-in-symfony2/](https://matt.drollette.com/2012/06/calling-a-method-before-every-controller-action-in-symfony2/)

简而言之，您必须使用内核事件拦截对控制器的调用，然后在侦听器中执行您的代码。您可以“选择”哪些控制器使用此行为来扩展特定接口。

# .net - Windows 8 RT：启动时运行应用程序

> ID：13511266
> 
> 赞同：1
> 
> 时间：2012-11-22T10:59:52.070
> 
> 标签：.net, windows-8

我正在创建一个 Windows 8 RT 应用程序，并希望在 Windows 8 启动后立即运行该应用程序。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:35:18.000

**简短的回答**
你不能。启动哪些应用程序以及何时启动它们取决于用户。这是 Windows 8 应用理念的基础。

**更长的答案**
您可能会以比这更好的方式实现您的目标。如果您可以通过概述您想要实现的目标来更新您的答案，我们可能会提出替代方案。

# url - 如何配置 apache 以将 URL 中的反斜杠作为 400-Bad Request 处理

> ID：13511270
> 
> 赞同：1
> 
> 时间：2012-11-22T11:00:01.557
> 
> 标签：url, mod-rewrite, apache2

在 URL 中使用（反斜杠）访问我的 apache 服务器`\`，例如

```
http://myhost.org/this\is\a\hacker\attempt.html 
```

根据[RFC 2396，第 2.4.3 节](http://www.cs.tut.fi/~jkorpela/rfc/2396/full.html#2.4.3)`\`，不允许使用 URL 中的字符（`%5C`应改为使用）。出于这个原因，我想将 apache 配置为每次在请求 URL 中出现此类字符时响应 400 Bad Request。

我如何配置 apache 来做到这一点？我可以使用 mod_rewrite 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:58:06.877

serverfault 上有一个更一般的问题，其中包含此问题的答案：[https ://serverfault.com/questions/451521/how-can-i-configure-apache-to-respond-400-when-request-contains -一个无效字节](https://serverfault.com/questions/451521/how-can-i-configure-apache-to-respond-400-when-request-contains-an-invalid-byte)

# outlook - 删除 Exchange 2010 中的重复邮件

> ID：13511271
> 
> 赞同：1
> 
> 时间：2012-11-22T11:00:07.500
> 
> 标签：outlook, exchange-server, exchange-server-2010

我们的 Exchange 2010 Outlook 或服务器出现问题，由于某些原因，我们的所有用户都收到了具有相同邮件 ID 的内部和外部重复邮件。

我知道我们可以购买第三方软件，但我们不允许这样做。

我们可以在 PowerShell 上运行任何代码来删除服务器上所有邮箱上的所有重复邮件吗？

谢谢

信息系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T11:07:42.493

有微软建议的这个脚本（[https://gallery.technet.microsoft.com/office/Removing-Duplicate-Items-f706e1cc](https://gallery.technet.microsoft.com/office/Removing-Duplicate-Items-f706e1cc)），但您必须指定用户邮箱。

把这个脚本放到那个目的地

> C:\Program Files\Microsoft\Exchange\Web Services\1.2

之后使用这个命令：

```
.\Remove-DuplicateItems.ps1 
    -Mailbox "user@domain.com" 
    -Type All 
    -Impersonation 
    -DeleteMode HardDelete 
    -Mode Full 
    -Verbose 
```

您可以将删除模式更改为“SoftDelete”或“MoveToDeletedItems”等。

# xml - Oracle 表中损坏的 XML 标记

> ID：13511275
> 
> 赞同：0
> 
> 时间：2012-11-22T11:00:20.643
> 
> 标签：xml, oracle, tags

我在 Oracle 数据库的表中有一个 XML 列，出于某种原因，我意识到 XML 标记最后被破坏了。

```
<XMLBegin><linesandlinesofXML>blahblahblah</linesandlinesofXML>
<Framework.DesktopContent.ImageLocation ObjectName="PaneContentImageSelected" locati... 
```

我能否知道是否可以在“...”不在标签中的 XML 列中搜索“...”？我想清除损坏的 XML 而不必清除整个表。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:52:01.070

如果它的发现和无效的 XMLs，你可以这样做：

```
SQL> desc myxml
 Name                                      Null?    Type
 ----------------------------------------- -------- --------
 XML                                                CLOB

SQL> create or replace function is_valid(xml clob) return varchar2
  2  is
  3    e_invalid exception;
  4    pragma exception_init(e_invalid, -31011);
  5    v_xml xmltype;
  6  begin
  7    v_xml := xmltype(xml);
  8    return 'Y';
  9  exception
 10    when e_invalid
 11    then
 12      return 'N';
 13  end;
 14  /

Function created.

SQL> select * from myxml;

XML
--------------------------------------------------------------------------------
<XMLBegin><linesandlinesofXML>blahblahblah</linesandlinesofXML>
<Framework.DesktopContent.ImageLocation ObjectName="PaneContentImageSelected" lo
cati..

<XMLBegin><linesandlinesofXML>blahblahblah</linesandlinesofXML></XMLBegin>

SQL> select * from myxml where is_valid(xml) = 'N';

XML
--------------------------------------------------------------------------------
<XMLBegin><linesandlinesofXML>blahblahblah</linesandlinesofXML>
<Framework.DesktopContent.ImageLocation ObjectName="PaneContentImageSelected" lo
cati.. 
```

# python - Python，在解析 CSV 时为 for 循环创建一个列表

> ID：13511278
> 
> 赞同：0
> 
> 时间：2012-11-22T11:00:25.583
> 
> 标签：python, csv

我正在从我公司数据库的导出中解析 CSV。这是一个精简的版本，大约有 15 列，实际的 CSV 有超过 400 列数据（都是必需的）。以下工作完美：

```
inv = csv.reader(open('inventory_report.txt', 'rU'), dialect='excel', delimiter="\t")

for PART_CODE,MODEL_NUMBER,PRODUCT_NAME,COLOR,TOTAL_ONHAND,TOTAL_ON_ORDER,TOTAL_SALES,\
SALES_YEAR_TO_DATE,SALES_LASTYEAR_TO_DATE,TOTAL_NUMBER_OF_QTYsSOLD,TOTAL_PURCHASES,\
PURCHASES_YEAR_TO_DATE,PURCHASES_LASTYEAR_TO_DATE,TOTAL_NUMBER_OF_QTYpurchased,\
DATE_LAST_SOLD,DATE_FIRST_SOLD in inv:
    print ('%-20s %-90s OnHand: %-10s OnOrder: %-10s') % (MODEL_NUMBER,PRODUCT_NAME,\
    TOTAL_ONHAND,TOTAL_ON_ORDER) 
```

正如您已经知道的那样，当“for”循环为 CSV 中的行的每个项目附加了 400 多个名称时，阅读起来会非常痛苦。不管多么烦人，但是通过这种方法能够访问我所追求的输出非常方便。我可以轻松获取特定项目并使用我们在销售点数据库中已经熟悉的常用名称执行计算。

我一直在尝试使它更具可读性。试图找出一种方法，我可以在 for 循环中定义所有这些名称的列表，但在进行计算和打印输出时仍然能够按名称调用它们。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:18:08.890

你可以使用 csv.DictReader。元素被读取为 dict。假设你有第一行作为列名。

```
inv = csv.DictReader(open('file.csv')):
for i in inv:
  print ('%-20s %-90s OnHand: %-10s OnOrder: %-10s') % (i['MODEL_NUMBER'],i['PRODUCT_NAME'],i['TOTAL_ONHAND'],i['TOTAL_ON_ORDER']) 
```

如果您希望 i[MODEL_NUMBER] 来自列表。定义一个包含所有列名的列表。假设，`l = ['MODEL_NUMBER','PRODUCT_NAME','TOTAL_ONHAND','TOTAL_ON_ORDER']`。然后我在上面代码中的打印语句将是，

```
print ('%-20s %-90s OnHand: %-10s OnOrder: %-10s') % (i[l[0]],i[l[1]],i[l[2]],i[l[3]]) 
```

代码未检查.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:09:43.527

为了使您的代码更具可读性和更易于重用，您应该动态读取列的名称。CSV 文件通常在文件顶部有一个包含此信息的标题，因此您可以读取第一行并将其存储在元组或列表中。

# android - 使用 Google 应用引擎的 GCM 服务器

> ID：13511279
> 
> 赞同：4
> 
> 时间：2012-11-22T11:00:37.163
> 
> 标签：android, google-app-engine, google-cloud-messaging

我刚刚为 GCM 客户端和服务器端实现了 SDK 示例。我使用 NetBeans（Glass Fish）作为我的服务器端并使用 Eclipse 作为我的客户端（Android）来毫无问题地实现它。我现在想探索使用 Google App Engine 作为我的服务器端。我从 SDK 下载了示例，但无法编译和运行....有没有像常规服务器客户端 GCM 这样的教程？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T22:45:26.693

您可能想在Google 的 GCM 文档中的[Using App Engine for Java 中学到很多东西。](http://developer.android.com/google/gcm/demo.html#appengine-setup)这是关于基于 GAE 的 GCM 服务器的另一篇博文：[http ://www.andro.lt/2012/11/google-cloud-messaging-for-android.html](http://www.andro.lt/2012/11/google-cloud-messaging-for-android.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:37:00.137

如果您想在您的 Android 应用程序中使用 Google Cloud Messaging，您可以使用这个免费的开源项目：

[gcm4public.appspot.com](http://gcm4public.appspot.com)

# vba - VB在特定记录上打开表格

> ID：13511280
> 
> 赞同：4
> 
> 时间：2012-11-22T11:00:47.363
> 
> 标签：vba, ms-access

我正在使用 Microsoft 访问，我想在单击按钮时打开一个特定 ID 的表单。我可以在 Do.open form 命令中指定 id 吗？下面的代码会打开一个表单，但随后会打开一个对话框，要求输入 id 。有人有什么想法吗？

```
Private Sub button1_Enter()
Dim recordID As Integer
recordID = Me.CurrentRecord
DoCmd.OpenForm "Form3", , , "ID = recordID"
End sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T11:05:15.870

首先，改变：

```
recordID = Me.CurrentRecord 
```

至：

```
recordID = Me.ID 
```

其中 Me.ID 是当前表单上的字段或控件的名称（[Microsoft Access - 单击按钮时获取记录 ID](https://stackoverflow.com/questions/13497950/microsoft-access-get-record-id-when-button-is-clicked/13498362#13498362)）。

当你引用一个变量时，把它放在引号之外：

```
DoCmd.OpenForm "Form3", , , "ID = " & recordID 
```

这对于数字 ID 来说没问题，但是对于文本和日期来说会变得更复杂一些，因为您需要分隔符。只要`sometextvar`不包含引号，这将很好地工作：

```
DoCmd.OpenForm "Form3", , , "Atext = '" & sometextvar & "'" 
```

否则

```
DoCmd.OpenForm "Form3", , , "Atext = '" & Replace(sometextvar,"'","''") & "'" 
```

日期需要 #

```
DoCmd.OpenForm "Form3", , , "ADate = #" & somedatevar & "#" 
```

为避免语言环境问题，最好将格式设置为年、月、日，因此：

```
DoCmd.OpenForm "Form3", , , "ADate = #" & Format(somedatevar,"yyyy/mm/dd") & "#" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T18:03:31.433

我试过我有同样的，确保你给id的名字是表格中使用的名字，而不是数据库中的名字！IE，我的 id`id`在 DB 中，但`pc_id`在我的表单中！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T22:09:37.200

当我想从另一个表单（称为启动表单）打开表单（称为目标表单）并且我希望将目标表单中查看的记录过滤（即，限制）到仅启动表单中的当前记录和我要用于过滤记录的字段是文本（或“字符串”）数据类型：

私有子 cmdOpenDestinationForm

DoCmd.OpenForm "frmDestination",,,"[FieldName]=" & "'" & Me.ControlName & "'"

结束子

[FieldName] 指的是目标表单中的一个字段。[ControlName] 指的是 Launch 表单上的控件（如文本框）。“我”也指的是启动表单，因为这是在您单击命令按钮时打开的表单（您可以省略它）。实际上，此代码告诉 Access (1) 打开 frmDestination，(2) 搜索“FieldName”字段，直到找到与 Me.ControlName 中的值相同的记录，以及 (3) 过滤 Destination 表单以便只显示那一条记录。

棘手的部分是所有那些双引号 (")、单引号 (') 和 &符号。接下来，这后面是 &"'"。这是一个和号、一个双引号、一个单引号和另一个双引号。根据我的经验，引号符号之间不能有空格。它们必须一起运行，如图所示. 然后是另一个＆符号和 Launch 表单上的控件名称，该名称具有您要在 Destination 表单的 [FieldName] 中定位的值：& Me.ControlName。并且，如前所述，您可以省略如果你愿意，我会使用它，因为它可以帮助我记住 ControlName 是 Launch 表单上的控件，而不是 Destination 表单上的控件。然后是另一个 & 和另一组双引号和单引号：“'”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-02T08:25:54.923

这个解决方案怎么样？

```
Private Sub Command10_Click()
On Error GoTo Err_Command10_Click
    Dim IDnr As String
    Dim stDocName As String
    Dim stLinkCriteria As String
    IDnr = InputBox("Enter ID")
    stDocName = "FORM_MASTER"
    stLinkCriteria = "[ID]=" & IDnr
    DoCmd.OpenForm stDocName, , , stLinkCriteria
    Exit_Command10_Click:
    Exit Sub
Err_Command10_Click:
    MsgBox Err.Description
    Resume Exit_Command10_Click
End Sub 
```

# java - 如何在zk框架中的列表框列表项上获取拖放事件

> ID：13511287
> 
> 赞同：1
> 
> 时间：2012-11-22T11:01:33.747
> 
> 标签：java, zk

我正在使用两个使用 java 类的 listBox 编写拖放功能。我已经实现了两个场景。

1.  列表项 A 添加到列表项 B 的底部
2.  如果我已经在 B 中选择了一个列表项，当我将项目放入列表中时，它会添加到该位置

我的要求更接近2。即我不必预先选择项目列表，并且应该将A中的项目列表移动到鼠标指向的索引处（如鼠标悬停效果）。我找不到任何这样的方法，`Listbox`或者`Listitem`可以给我那个位置。

以下是在 2 的情况下工作的代码。

```
droppedListbox.insertBefore(draggedListitem, droppedListbox.getSelectedItem()); 
```

在上面的代码中，第二个参数应该是在`Listitem`使用 zul 文件的演示应用程序中突出显示的鼠标。

正如我之前提到的，我想将项目移动到`Listitem`B 中的选定位置。为此，我必须在我的 zul 文件中进行这些更改。

```
<listbox id="adminListbox" droppable="true" draggable="true" model="${win$composer.systemAdminListModel}" width="330px" height="100%" oddRowSclass="non-odd">
.
.
.
<template name="model">
<listitem draggable="true" droppable="true">
<listcell label="${each.id}" ></listcell>
<listcell label="${each.name}" ></listcell>
<listcell label="${each.role}" ></listcell>
</listitem>
</template> [added dropable to listitem] 
```

`Listitem`现在，在将项目放在B上时，我的 java 代码如下所示：

```
@Listen("onDrop = #userListbox")
public void onDragDropUserListitem(){
} 
```

如果我从 listitem 中删除 droppable，那么它就会被调用。但是要将列表项移动到该位置，我必须在此处添加 droppable true。我还要提到 listitem 是动态的，所以我不能给它一个 id 来附加 @wire 并获取它的事件。

我想知道如何在 java 中获取 listitem 上的事件，以便我可以对其执行任何操作。在当前的情况下，我的事件“onDrop”没有被调用。

这是事件方法

```
@Listen("onDrop = #userListbox")
public void onDragDropUserListitem(DropEvent dropEvent){

    userListbox.addEventListener("onDrop", new EventListener<Event>() {
        @Override
        public void onEvent(Event event) throws Exception {

            Listbox droppedListbox = (Listbox)(((DropEvent)event).getTarget());
            Listitem draggedListitem = (Listitem)((DropEvent)event).getDragged();

            if (draggedListitem instanceof Listitem) {    
                droppedListbox.insertBefore(draggedListitem, droppedListbox.getNextSibling());
            } else {
                droppedListbox.appendChild(draggedListitem);
            }
        }
    });
} 
```

这是zul完整的组件

```
<listbox id="userListbox"  droppable="true" model="${win$composer.systemUserListModel}"  width="330px" height="100%" oddRowSclass="non-odd">
    <listhead>
        <listheader label="User ID" align="center" />
        <listheader label="User Name" align="center" />
        <listheader label="User Role" align="center" />
    </listhead>
    <template name="model">
        <listitem draggable="true" droppable="true" >
            <listcell label="${each.id}" />
            <listcell label="${each.name}" />
            <listcell label="${each.role}" />
        </listitem>
    </template>
</listbox> 
```

我希望它是你所需要的，如果你从 listitem 中删除，它可以正常工作，但不是我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:42:32.297

好的，第一个问题是

```
@Listen("onDrop = #userListbox")
public void onDragDropUserListitem(DropEvent dropEvent){

    userListbox.addEventListener("onDrop", new EventListener<Event>() {

        @Override
        public void onEvent(Event event) throws Exception { 
```

在此代码中，每次删除时都添加一个 EventListener，因为您在 EventListener 中添加了一个 EventListener。

```
@Listen("onDrop = #userListbox")
public void onDragDropUserListitem(DropEvent dropEvent){
      Listbox droppedListbox = (Listbox)dropEvent.getTarget());
      Listitem draggedListitem = (Listitem)dropEvent.getDragged();

            if (draggedListitem instanceof Listitem) {

                droppedListbox.insertBefore(draggedListitem, droppedListbox.getNextSibling());

            }else{
                droppedListbox.appendChild(draggedListitem);
            }

} 
```

这应该会更好。

接下来是，我没有看到任何`apply="ComposerName"`我希望这样做的东西。
如果您在更高级别的组件中这样做，最好
在. [单击此处](http://books.zkoss.org/wiki/Small_Talks/2011/January/Envisage_ZK_6%3a_An_Annotation_Based_Composer_For_MVC#Syntax)查看操作方法。 但是现在，这段代码有问题`=``@Listen("onDrop = #userListbox")`

```
Listbox droppedListbox = (Listbox)dropEvent.getTarget();
Listitem draggedListitem = (Listitem)dropEvent.getDragged(); 
```

因为 traget 可以和你应该处理的`Listbox`一样`Listitem`。

在此步骤中，您也可以为您的预期订单添加代码。
只需通过调用 的插入`draggedListitem`方法`userListbox`，将`droppedListitem`
`getTarget()``Listbox``userListbox`

## 编辑

但是`@Listen("onDrop = #userListbox")`只听s `Listbox`，但我们也想听`Listitem`s。

您的最终代码可能如下所示

```
@Listen("onDrop = #userListbox")
public void onDragDropUserListbox(DropEvent dropEvent) {
    userListbox.appendChild(dropEvent.getTarget());
}

@Listen("onDrop = listitem")
public void onDragDropUserListitem(DropEvent dropEvent) {
    Listitem droppedListitem = (Listitem) dropEvent.getTarget();
    Listitem draggedListitem = (Listitem) dropEvent.getDragged();

    userListbox.insertBefore(draggedListitem, droppedListitem);
} 
```

我已经对此进行了测试，它在拖放到的元素之前添加了拖动的元素。

# jquery - 将类随机添加到生成的 只有一次

> ID：13511290
> 
> 赞同：0
> 
> 时间：2012-11-22T11:01:43.473
> 
> 标签：jquery, random, html-lists, duplicates, addclass

我`<li>`在`<div>`jQuery 中添加了一些，如下所示：

```
countBlocs = 60;
for (i = 1; i <= countBlocs; i++)
{
    $('#head #lol').append("<li id='losange"+ i++ +"' class='losange'></li>");
}; 
```

在 html 中看起来像这样：

```
<section id='head'>
    <article id='head_content'>
        <li id='losange1' class='losange'></li>
        <li id='losange2' class='losange'></li>
        <li id='losange3' class='losange'></li>
        <li id='losange4' class='losange'></li>
        <li id='losange5' class='losange'></li>
        <li id='losange6' class='losange'></li>
        ...
    </article>
</section> 
```

现在我正在尝试`<li>`在 jQuery 中为每个随机添加类：

```
countBlocs = 60;
for (i = 1; i <= countBlocs; i++)
{
    var paras = $('#head #head_content li');
    var rand = Math.floor(Math.random() * paras.length);
    paras.eq(rand).addClass('logo_white');
}; 
```

这很好用，但我需要添加超过 1 个类，但每个类只保留 1 个类`<li>`

所以我用不同的类名复制了上面的代码（这不是很好）：

```
countBlocs = 30;
for (i = 1; i <= countBlocs; i++)
{
    var paras = $('#head #head_content li');
    var rand = Math.floor(Math.random() * paras.length);
    paras.eq(rand).addClass('logo_white'); 
};
countBlocs = 30;
for (i = 1; i <= countBlocs; i++)
{
    var paras = $('#head #head_content li');
    var rand = Math.floor(Math.random() * paras.length);
    paras.eq(rand).addClass('logo_red'); <- Another class name
};

... 
```

现在我生成的`<li>`看起来像这样：

```
<section id='head'>
    <article id='head_content'>
        <li id='losange1' class='losange logo_red'></li>  <- Ok!
        <li id='losange2' class='losange logo_red'></li> <- Ok!
        <li id='losange3' class='losange logo white logo red'></li> <- WRONG!
        <li id='losange4' class='losange logo white'></li> <- Ok!
        <li id='losange5' class='losange logo red logo white'></li> <- WRONG!
        <li id='losange6' class='losange logo red'></li> <- Ok!
        ...
    </article>
</section> 
```

**问题 ：**

它在同一个类上添加了多个类`<li>`，我只希望`<li>`从已经定义的几个类中随机添加一个类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:05:19.723

将你所有的类放在一个数组中，然后在数组上使用你的随机数来获取你的类并将其添加到你的 li 中。

```
var classes = ['white', 'red', 'logo_white'];
$('#head #head_content li').each(function() {
  var random = Math.floor(Math.random() * classes.length);
  $(this).addClass(classes[random]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:08:38.557

遍历项目一次，然后为每个项目添加一个随机类：

```
var colors = ["logo_red", "logo_white"];

for (i = 1; i <= countBlocs; i++)
{
    var liItem = $('#losange' + i);
    var rand = Math.floor(Math.random() * colors.length);
    liItem.addClass(colors[rand]);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:10:09.407

你想做这样的事情：

```
 $('#head #head_content li').each(function(n) {
        $(this).addClass(myrandomFunction());
  }); 
```

并拆分出一个单独的“myrandomFunction”，它将返回随机类，每次调用一次。

# javascript - 当前位置：绝对不尊重长辈

> ID：13511293
> 
> 赞同：0
> 
> 时间：2012-11-22T11:01:46.107
> 
> 标签：javascript, jquery, html, css

好的，到目前为止还没有任何建议，所以可能还没有真正正确地总结出来；

如果我绝对`class="container"`使用仅适用于该部分的额外类或 id 来定位该部分`<div>`，它会将自身定位在其相对定位的祖先之外，`<div>`并且`class="band banner"`何时应将自身定位在“带状横幅”内`<div>`。

我不知道为什么，有人有任何想法吗？

这里又是测试站点，[http ://test-site.zymichost.com](http://test-site.zymichost.com)

我正在使用骨架样板开发一个网站，并希望为某个部分（乐队幻灯片）提供 Flexslider 幻灯片背景。

索引页面上有四个主要波段；页眉、幻灯片、正文和页脚。

我在下面的示例中唯一放置的是幻灯片横幅，正如您在示例中看到的那样，有幻灯片和最新新闻块，我需要在幻灯片上放置最新新闻块，但我需要幻灯片仍然在文档的流程中，因为在此幻灯片横幅下方有更多类似于“最新新闻”元素的元素，我不想重叠。

这是我的困境，如果我绝对定位 Flexslider 幻灯片，那么最新消息元素与幻灯片重叠，很好，但它下方的乐队（正文）及其包含的元素也是如此。不是很好。

如果我在最新新闻部分使用绝对定位，它会停留在幻灯片横幅之外（即使我将其包含元素设置为`position:relative;`），这让我感到困惑，如果我使用负定位（嘘声）它会在浏览器重新-尺寸。裤子。

这是测试站点的网址：

[http://test-site.zymichost.com](http://test-site.zymichost.com)

我没有在这里包含我的代码，因为它会使帖子有点庞大。

就像我说的它只包含幻灯片横幅，但我会根据需要添加更多内容。

这可能是显而易见的事情，但它正在让我明白，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:51:21.860

绝对定位的元素不会占用其父元素内的空间，这就是您`section.container`出现在下方的原因`div.band.banner`，但它仍然像相对一样流动。给它实际位置（大概是顶部和左侧），让它显示在横幅图像的顶部。我不清楚您所说的“身体下方的乐队”是什么意思，但这就是我的样子

![在此处输入图像描述](../Images/9b160914cd2499feab02dd769941d7f0.png)

# jsf - JSF：提交后表单并附加 GET 参数

> ID：13511295
> 
> 赞同：0
> 
> 时间：2012-11-22T11:01:53.823
> 
> 标签：jsf, primefaces

我有一个表格，有 3 个按钮。（完成、保存、取消）

完成应该结束任务并导航回任务概述。save 应该保存所做的更改并导航回**任务详细信息** cancel 应该保存任何内容，但导航回详细信息。

现在的问题是“保存”：我不想提交表单并调用 actionListener 来进行“保存”。但后来我也想将一个 id 传递给按钮的“导航结果”

在纯 html 中，它看起来像这样：

```
<form action="taskDetails?id=5" method ="post">
   ....
</form> 
```

所以所有参数都是使用 提交的`POST`，但是 id 然后可以通过`GET`.

我如何使用 JSF Forms 实现这一目标？

我的按钮目前看起来像：

```
 <h:form>
 ...
 <p:commandButton action="taskDetails" actionListener="taskEditBean.saveTask()" value="Save" />

 </h:form> 
```

像这样使用 f:params：

```
 <h:form>
 ...
 <p:commandButton action="taskDetails" actionListener="taskEditBean.saveTask()" value="Save">
      <f:param name="id" value="5" />
 </p:commandButton>

 </h:form> 
```

`POST`也使用...提交

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:18:54.547

如果我猜对了您的具体功能要求，那么这就是您所需要的：

```
<p:commandButton value="Save" action="#{taskEditBean.saveTask}" /> 
```

和

```
public String saveTask() {
    // ... 

    return "taskDetails?id=5&faces-redirect=true";
} 
```

这将在 POST 之后将重定向发送到所需的 URL。

# c# - C#如何正确显示登录表单

> ID：13511296
> 
> 赞同：1
> 
> 时间：2012-11-22T11:01:58.773
> 
> 标签：c#, forms, controller

我的主类设计有点麻烦。在我的主要 c# 类中，我启动了一个登录表单，用户必须在其中输入他对数据库的凭据。

```
 public static void StartPlugin()
    {

        LoginWindow login = new LoginWindow();
        login.Show();

        Console.WriteLine("It works");

    } 
```

登录表单到目前为止有效。在这个表单中，我有一个检查确定按钮的侦听器。如果用户输入了正确的数据，则应关闭表单并返回一条消息到 main 方法。这意味着我只想打电话

```
Console.WriteLine("It works"); 
```

当按钮侦听器内的查询为真时。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:14:02.540

改用[模态](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)对话框：

```
public static void StartPlugin()
{
    using (LoginWindow login = new LoginWindow())
    {
       DialogResult result = login.ShowDialog();

       if (result == DialogResult.Ok)
       {
           Console.WriteLine("It works");
       }
    }
} 
```

仅当**凭据正常**或**用户取消**表单`LoginWindow`时才必须关闭。[您](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)还需要在. [_](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.cancelbutton.aspx)****`LoginForm`****

 ****希望能帮助到你。****

# java - 网络模拟

> ID：13511300
> 
> 赞同：3
> 
> 时间：2012-11-22T11:02:10.187
> 
> 标签：java, networking, proxy, filtering, simulation

我们正在为一门大学课程做一个小项目，我们将编写一个能够过滤应用层互联网流量的代理服务器（用 Java 编写）。

为了测试它，我们需要一个能够在其节点上运行 JVM 的网络模拟器。我们将专注于 HTTP 流量，因此如果模拟器能够将浏览器窗口显示为一个端点会看到它，那就太好了。

鉴于这些要求，我认为最好有软件允许 VM 连接到其模拟网络以供选择主机。
我发现 GSM3 是一个可能的候选者，不幸的是我们需要一个 IOS 映像，而我没有办法合法地获得一个。

那么你会推荐哪个模拟器？

# asp.net-mvc - 将 MVC 4 应用程序部署到 localhost 会出现 HTTP 错误 404

> ID：13511303
> 
> 赞同：4
> 
> 时间：2012-11-22T11:02:21.577
> 
> 标签：asp.net-mvc, asp.net-mvc-4, visual-studio-2012, iis-7.5, sql-server-ce-4

在 Windows 7 上使用**Visual Studio 2012 Express**，我从 MVC 4 互联网应用程序模板创建了一个新项目，然后使用简单的成员资格并成功测试了身份验证。

然后**尝试最简单的部署方式**，作为第一步，我**在 localhost 上尝试了应用程序**，遵循以下步骤：

*   使用**文件系统发布方法发布**项目，
*   针对一个新文件夹：“C:\inetpub\wwwroot\MyApp”，
*   将 App_Data 文件夹复制到“C:\inetpub\wwwroot\MyApp”，
*   允许 IIS_IUSRS 读取文件夹“MyApp”的权限。

由于数据库是 SQL CE 类型，我认为 web.config connectionStrings 部分没有什么可更改的。

直到最后一步，发布都很顺利：浏览器加载，我得到了下一个错误：

**未找到**

**HTTP 错误 404。未找到请求的资源。** - 错误代码：0x80070002

我在有限的时间内未能在谷歌上找到这个问题的答案，请告知可以做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:38:14.637

正如我的评论中所述，请确保您的 URL 在项目属性中的格式正确。另外，请确保您设置了默认启动页面（如果您在 Home Controller 中没有 Index 操作）。

# wordpress - wordpress 网站内的 wordpress 网站，.htaccess？

> ID：13511304
> 
> 赞同：1
> 
> 时间：2012-11-22T11:02:32.253
> 
> 标签：wordpress, .htaccess

我被要求将一个工作中的 WP 站点（站点 2）移动到另一个 WP 站点（站点 1）的文件夹中（因为第一个站点在中国被阻止，而第二个站点没有）。

所以完整的 URL 最终是 www.site1.com/site2

我设法这样做了，但是第二个站点上的链接不再起作用，它们显示站点 1 的 404，但 URL 似乎还可以

www.site1.com/site2/path_to_page_on_site_2 -> 404

我认为这是因为站点 1 的 .htaccess：

```
# Redirect images
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^font/(.*)$ /wp-content/themes/site1/font/$1 [L]
RewriteRule ^timages/(.*)$ /wp-content/themes/site1/image/$1 [L]
RewriteRule ^images/(.*)$ /wp-content/uploads/images/$1 [L]
RewriteRule ^videos/(.*)$ /wp-content/themes/site1/video/$1 [L]
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

站点 2 有一个来自 WP 的“标准”.htaccess

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

如果是 htaccess 问题，我如何阻止站点 1 的 htaccess 影响站点 2？如果是别的东西，我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:28:20.753

感谢 Nikola 的评论，我设法做到了。这是 site2 的最终 htaccess 文件

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /site2
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /site2/index.php [L]

</IfModule>

# END WordPress 
```

我想将所有对site2的调用重定向到适当的文件夹，这样相对路径不会受到影响，但不能用htaccess来做，所以我必须在数据库中进行替换以使其成为绝对路径。

# xquery - 对相似元素进行分组

> ID：13511305
> 
> 赞同：0
> 
> 时间：2012-11-22T11:02:32.260
> 
> 标签：xquery

感谢您及时的回复。我尝试了两个答案。它没有按我的预期工作。请找到下面的输入和预期的输出。提前致谢

Input: `<Billing>` `<billSummary>` `<billTo>` `<accountNumber>`130212192 `</accountNumber>` `<MSISDN>`1234567890 `</MSISDN>` `</billTo>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`ONE_TIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ONE_TIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ACCESS `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ACCESS_CHARGE `</description>` `</charge>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`FEATURE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`FEATURE_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS `</description>` `</deduction>` `<charge>` `<typeCode>`AIRTIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`AIRTIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`LONG_DISTANCE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`LONG_DISTANCE_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ROAMING `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ROAMING_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS `</description>` `</deduction>` `</billSummary>` `<billSummary>` `<billTo>` `<accountNumber>`130212192 `</accountNumber>` `<MSISDN>`1234567890 `</MSISDN>` `</billTo>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`ONE_TIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ONE_TIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ACCESS `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ACCESS_CHARGE`</description>` `</charge>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`FEATURE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`FEATURE_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS `</description>` `</deduction>` `<charge>` `<typeCode>`AIRTIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`AIRTIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`LONG_DISTANCE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`LONG_DISTANCE_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ROAMING `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ROAMING_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS`</description>` `</deduction>` `</billSummary>` `</Billing>`

Expected Output: `<Billing>` `<billSummary>` `<billTo>` `<accountNumber>`130212192 `</accountNumber>` `<MSISDN>`1234567890 `</MSISDN>` `</billTo>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`ONE_TIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ONE_TIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ACCESS `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ACCESS_CHARGE `</description>` `</charge>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`FEATURE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`FEATURE_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS `</description>` `</deduction>` `<charge>` `<typeCode>`AIRTIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`AIRTIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`LONG_DISTANCE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`LONG_DISTANCE_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ROAMING `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ROAMING_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS `</description>` `</deduction>` `</billSummary>` `<billSummary>` `<billTo>` `<accountNumber>`130212192 `</accountNumber>` `<MSISDN>`1234567890 `</MSISDN>` `</billTo>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`ONE_TIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ONE_TIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ACCESS `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ACCESS_CHARGE`</description>` `</charge>` `<tax>` `<amount>`100.12 `</amount>` `<description>`TAXES `</description>` `</tax>` `<charge>` `<typeCode>`FEATURE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`FEATURE_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS `</description>` `</deduction>` `<charge>` `<typeCode>`AIRTIME `</typeCode>` `<amount>`100.12 `</amount>` `<description>`AIRTIME_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`LONG_DISTANCE `</typeCode>` `<amount>`100.12 `</amount>` `<description>`LONG_DISTANCE_CHARGE `</description>` `</charge>` `<charge>` `<typeCode>`ROAMING `</typeCode>` `<amount>`100.12 `</amount>` `<description>`ROAMING_CHARGE `</description>` `</charge>` `<deduction>` `<amount>`100.12 `</amount>` `<description>`ADJUSTMENTS`</description>` `</deduction>` `</billSummary>` `</Billing>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:32:12.190

这个怎么样：

```
doc("c:\temp\temp.xml")/
<billSummary>
  {
  for $e in billSummary/*
  order by local-name($e)
  return $e
  }
</billSummary> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:27:32.860

按节点名称排序：

```
<billSummary>
{
  for $i in /billSummary/*
  order by $i/name()
  return $i
}
</billSummary> 
```

* * *

如果您只想对每个账单中的项目进行分组，请遍历所有`<billSummary/>`-nodes：

```
for $bill in //billSummary
return
  <billSummary>
  {
    for $item in $bill/*
    order by $item/name()
    return $item
  }
  </billSummary> 
```

如果你需要在你的答案周围包裹一些节点，你应该可以自己做；您的问题不包含必要的信息。

# c# - 会员资格不被认可

> ID：13511310
> 
> 赞同：3
> 
> 时间：2012-11-22T11:02:49.850
> 
> 标签：c#, asp.net, membership, createuserwizard

我正在使用 createUserWizard 控件为我的网站注册用户，但我也使用自己的表来存储有关这些用户的信息（地址、图像、描述......）。

创建用户时，我还想在自己的表中创建一个新实例。我想通过 userID 将我自己的表链接到 ASP.NET 的用户表。我尝试从带有会员资格的 createUserWizard 中获取它，但 ASP 不识别会员资格。我忘了添加什么吗？

这是我的代码（后面的代码）

```
protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
{
    try
    {
        BLLorganisation BLLo = new BLLorganisation();
        Organisation o = new Organisation();
        TextBox t = new TextBox();
        t = (TextBox)(this.CreateUserWizard1.FindControl("UserName"));
        o.organisation_name = t.Text;
        o.fk_user_id = Membership.GetUser(CreateUserWizard1.UserName).ProviderUserKey.ToString();
        BLLo.insertOneOrganisation(o);
    }
    catch (Exception ex)
    {
        feedback.InnerHtml = ex.Message;
        feedback.Style.Add("display", "block");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:07:14.293

包括`using System.Web.Security;`

# facebook - 使用 window.fbAsyncInit 在第一次加载页面时不起作用

> ID：13511311
> 
> 赞同：3
> 
> 时间：2012-11-22T11:02:49.423
> 
> 标签：facebook, facebook-javascript-sdk

```
<script>
        (function(d, debug){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/ar_AR/all.js#xfbml=1&appId=356233997758493";
            ref.parentNode.insertBefore(js, ref);
        }(document, /*debug*/ false));  
</script> 
```

这就是我初始化 facebook sdk 的方式，问题是当我第一次加载页面时 window.fbAsyncInit 内的任何代码都没有加载，但是当我刷新页面时它工作正常。

你知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-23T02:56:00.450

我通过将我的 Facebook 的 SDK 片段移动到我的索引文件的最底部，就在结束`</body>`标记之前解决了这个问题。

```
 ...
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T01:07:23.567

您可以通过使用**window.onload**来包装您希望在页面加载时执行的任何功能来解决此问题。可能不漂亮，但它有效。

```
<script>
  //Executes on page load
  window.onload = function(){
    window.fbAsyncInit = function(){
        //Init stuff
    };
    FB.getLoginStatus(function(response) {
        //...
    };
  };

  // Load the SDK asynchronously
  (function(d){
    //stuff
  }(document));
</script> 
```

# debugging - 是否可以“转储”正在运行的进程并在另一台 PC 上恢复/继续？

> ID：13511313
> 
> 赞同：2
> 
> 时间：2012-11-22T11:02:57.973
> 
> 标签：debugging, minidump

我们在客户那里遇到了不可重现的问题（某些数据显示不正确）。客户自己每天都会遇到几次问题，但我们无法在内部重现问题。

一旦客户出现问题，我们可以使用远程调试来调查运行过程，但这需要开发人员PC通过大量VPN软件连接到客户PC。实际上，这几乎是不可能的，因为客户不希望我们直接连接到运行应用程序的服务器（通常还涉及远程桌面或 Citrix 系统）。

我知道您可以制作一个正在运行的进程的 MiniDump 以在调试器中对其进行调查，但是您无法继续该进程以查看实际情况。

是否有可能对进程进行转储，将转储复制到开发人员 PC，然后在开发人员 PC 上继续该进程？应用程序是本机非托管 C++ 应用程序。

当然，所有与数据库连接、网络连接、文件等相关的逻辑都将不可用，但在这种情况下，我主要对内部逻辑感兴趣。

如果这是不可能的，这通常可以使用虚拟机来代替吗？

# stored-procedures - SQL Server 可以根据用户或用户角色在两个架构之间进行仲裁吗？

> ID：13511314
> 
> 赞同：1
> 
> 时间：2012-11-22T11:03:03.143
> 
> 标签：stored-procedures, sql-server-2008-r2, database-schema

Sql Server 2008 R2

我在两个模式中有一个名称相同的视图。当应用程序调用根据用户或用户角色引用视图的存储过程时，我能否自动让应用程序使用其中一个或另一个？

例如，这两个视图被命名为 dbo.Customers 和 production.Customers。每个视图都生成相同的选择列表，但连接到不同的表并具有不同的 WHERE 条件。存储过程当前引用 dbo.Customers。

（注意：实际上有几十个这样的二模式视图，它们被用于数百个存储过程、函数和动态生成的 sql。重写所有这些都需要数年时间）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:10:06.197

存储过程（模块）内的对象名称是根据存储过程（模块）[的所有者而](http://blogs.msdn.com/b/sqlprogrammability/archive/2006/04/03/567660.aspx)不是执行用户来解析的。因此，如果您在声明为的存储过程中引用名为 TABLE_1 的表：

```
CREATE PROCEDURE dbo.usp_GetTable_1 AS SELECT * FROM [TABLE_1] 
```

然后解析的表名将是 [dbo].[TABLE_1]。

如果您愿意使用动态 SQL，那么您可以执行以下操作：

```
--Stored procedure uses dynamic SQL so object name resolution rules inside
--modules does not apply
CREATE PROCEDURE dbo.usp_GetTable_1 AS 
  EXEC sp_executesql N'SELECT * FROM [TABLE_1]'
GO

--create Table_1 in two schemas
CREATE TABLE [Com1].[Table_1](
    [Id] [int] NOT NULL,
    [Schema] As OBJECT_SCHEMA_NAME ( OBJECT_ID('[Com1].[Table_1]' ))
) ON [PRIMARY]

GO
CREATE TABLE [Com2].[Table_1](
    [Id] [int] NOT NULL,
    [Schema] As OBJECT_SCHEMA_NAME ( OBJECT_ID('[Com2].[Table_1]' ))
) ON [PRIMARY]
GO

--Now create two users, defaulting each to one of the schemas
CREATE USER Com1User WITHOUT LOGIN WITH default_schema = [Com1]
CREATE USER Com2User WITHOUT LOGIN WITH default_schema = [Com2]

--set the ownership of the schemas to match
ALTER AUTHORIZATION ON SCHEMA::[Com1] TO [Com1User]
ALTER AUTHORIZATION ON SCHEMA::[Com2] TO [Com2User]

--Adding the users to the db_owner role naively allows executing dbo schema modules
--for demo purposes. Alternatively grant execution to specific dbo modules 
EXEC sp_addrolemember N'db_owner', N'Com1User'
EXEC sp_addrolemember N'db_owner', N'Com2User'

--Set the execution context and call the procedure
EXECUTE AS User = 'Com1User'
EXEC dbo.usp_GetTable_1
REVERT;

--Set the execution context and call the procedure
EXECUTE AS User = 'Com2User'
EXEC dbo.usp_GetTable_1
REVERT; 
```

就个人而言，我不是这种使用模式的忠实粉丝。模式是为了安全，在较小程度上是为了避免大量数据库对象的名称冲突。我个人更喜欢将每组对象放在不同的数据库上，并使用不同的用户登录名和默认数据库来控制名称解析。

# iframe - 脸书点赞按钮在登录后不更新点赞数

> ID：13511315
> 
> 赞同：1
> 
> 时间：2012-11-22T11:03:04.267
> 
> 标签：iframe, facebook-like, mobile-application

我在我的应用程序（移动设备）上使用 iframe facebook like 按钮。当我在没有登录的情况下点击like按钮时->登录窗口打开->登录后->登录窗口隐藏。但是点赞数直到刷新并再次点击点赞按钮才会更新。请提前帮助和感谢。

注意：我只想要一个 iframe facebook like button 的解决方案。谢谢

# filter - 如何使用 gmail 过滤器转发非邮件列表电子邮件？

> ID：13511320
> 
> 赞同：1
> 
> 时间：2012-11-22T11:03:12.200
> 
> 标签：filter, gmail, forward

我使用过滤器“跳过收件箱”和“添加标签”到已知的邮件列表发件人。因此，所有传入的邮件列表电子邮件都将被标记为“邮件列表”，并且不会显示在收件箱中。我想将其余的电子邮件转发到另一个电子邮件地址。我在最后一个邮件列表过滤器之后添加了一个“转发从 * 发送到 xxx@xxx.com 的电子邮件”过滤器。

但是“转发...”过滤器会将所有电子邮件（包括邮件列表）发送到 xxx@xxx.com。我怎样才能转发没有“邮件列表”标签的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T12:00:47.703

我找到的唯一答案（仍然是 OP 后 2 年）基本上是使用否定关键字或“发件人”地址设置转发过滤器。换句话说，如果不是来自...，那么向前。

这可能有效，但它完全是蹩脚的！

如果我有 10 个不同的过滤器标记并归档它们，然后我希望转发所有剩余的“未过滤”的东西……我将不得不设置一个非常复杂的转发过滤器来做到这一点……甚至更糟，每次我更改其他过滤器之一的标准时，我都必须修改该复杂过滤器。

我们确实需要一种方法来让过滤器以特定的顺序、优先级（以及每个选项的复选框，上面写着“停止处理与此过滤器匹配的电子邮件的其他过滤器”或其他内容）。

....或者至少一个过滤器应该有一个“else”部分......如果电子邮件符合给定的标准，做这些事情...... ELSE 做这另一组事情。但即使这样也不能真正解决给定的问题，或者转发所有与其他过滤器列表不匹配的电子邮件。）

# android - 以编程方式为 TableRow 数组设置边框

> ID：13511321
> 
> 赞同：5
> 
> 时间：2012-11-22T11:03:15.540
> 
> 标签：android, android-view, tablerow, android-tablelayout

[我知道这与这里](https://stackoverflow.com/questions/9216078/programmatically-set-border-for-tablerows-array)的问题相同 但是它还没有收到答案，所以我在这里尝试一下，因为我也需要它:)
我得到了一个数组：（我缩短了 SO 的数组/代码）

```
ScrollView sv = new ScrollView(this);
TableLayout ll=new TableLayout(this);
HorizontalScrollView hsv = new HorizontalScrollView(this);
TableRow tbrow=new TableRow(this);
 for(int i=0;i<mConnector.idArray.size();i++) {
         tbrow=new TableRow(this);
         tbrow.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
         tbrow.setBackgroundColor(Color.rgb(51, 51, 51));

         ll.addView(tbrow);
 }

hsv.addView(ll);
sv.addView(hsv);
setContentView(sv); 
```

遗漏了数组中的信息，我认为您不需要。
但是如何在每一行中添加边框（最好是水平和垂直）？我希望这是解决方案：

```
tbrow.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
tbrow.setBackgroundColor(Color.rgb(51, 51, 51)); 
```

但它只是把我的整个桌子染成灰色。

希望我足够清楚，并希望他们是一个解决方案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-22T12:19:22.660

> 但是如何在每一行中添加边框（最好是水平和垂直）？我希望这是解决方案：

如果你只想在你的周围有边框，`TableRows`你可以简单地使用下面的drawable作为背景`TableRow`：

**R.drawable.row_border**：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="#ffffff" />
    <stroke android:width="3dp" android:color="#99cc00" />

</shape> 
```

然后：

```
tbrow.setBackgroundResource(R.drawable.row_borders); 
```

如果要获得恒定宽度的边框，可以使用`layer-list`具有三个版本的 a 来代替，一个用于顶行，一个用于中间行，一个用于底行。

# java - 如何从 IME 中获取字段属性（软键盘、InputMethodService）

> ID：13511323
> 
> 赞同：0
> 
> 时间：2012-11-22T11:03:18.883
> 
> 标签：java, android, ime

我创建自己的输入法 (IME)。在当前外星人应用程序中获取当前字段属性的最佳方法是什么？我需要得到：

*   外来形式的当前字段的连续数；
*   表单中的字段总数；
*   字段是表单中的第一个（我可以向后导航）；
*   字段是表单中的最后一个（我可以导航到前进吗）；
*   已编辑或未编辑的字段。

比如我找到另一个属性，可以得到：

`getCurrentInputEditorInfo().packageName`- 获取当前的外星人应用程序名称（例如，`"com.application.currentname`“`）。

`getCurrentInputEditorInfo().inputType`- 获取当前编辑的字段类型（[inputType](http://developer.android.com/reference/android/text/InputType.html)，例如，“33d” TYPE_CLASS_TEXT & TYPE_TEXT_VARIATION_EMAIL_ADDRESS）。

获取当前字段属性的最佳方法是什么？可能吗？

# forms - 需要更新 h:form 的 PrimeFaces 元素

> ID：13511326
> 
> 赞同：0
> 
> 时间：2012-11-22T11:03:23.310
> 
> 标签：forms, jsf-2, primefaces

我需要需要包装的primefaces元素列表，`<h:form>`以便通过某些primeface元素的任何操作进行更新，`<p:ajax>`
即使它们具有id，并且`<p:ajax update="thisID">`其中仍然需要一个`<h:form>`带有id的id，以便更新，以便哪些元素需要`<h:form>`并且不需要

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:50:31.700

言归正传，所有实现[接口](http://docs.oracle.com/javaee/6/api/javax/faces/component/EditableValueHolder.html)[的`EditableValueHolder`](http://docs.oracle.com/javaee/6/api/javax/faces/component/EditableValueHolder.html)组件和[接口](http://docs.oracle.com/javaee/6/api/javax/faces/component/ActionSource.html)[都`ActionSource`](http://docs.oracle.com/javaee/6/api/javax/faces/component/ActionSource.html)需要封装在[一个`UIForm`组件](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIForm.html)中。

在前面链接的 Javadocs 中，您可以在“所有已知的实现类”中找到哪些组件实现了它们。如果你仔细观察，你会发现它都是像 , 等这样的输入组件和像,`inputText`等等这样的`selectOneMenu`命令组件。在[PrimeFaces API 文档](http://www.primefaces.org/docs/api/3.4/)中，例如代表implements的，所以它应该放在一个表单中.`commandLink``commandButton`[`InputText`](http://www.primefaces.org/docs/api/3.4/org/primefaces/component/inputtext/InputText.html)`<p:inputText>``EditableValueHolder`

[这也与普通 HTML](http://www.w3.org/TR/html401/interact/forms.html)中的要求完全相同，HTML `<input>`、`<select>`、`<textarea>`等应该放入 a`<form>`中，以便将值发送到服务器端。毕竟，HTML 也是 JSF 最终产生的东西。

至于通过ajax更新元素，需要更新的组件并不*需要*放在表单中。您可以完美地更新当前表单之外的内容。您甚至可以更新其他表格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:21:29.960

这是对 PatrickT 的答案的轻微修改。您也可以更新表格之外的内容。但是您要提交的数据应该是 afaik 表单的一部分。

```
<p:messages id="outsideForm" showDetail="true"></p:messages>
<h:form id="kalle">
<p:messages id="insideForm" showDetail="true"></p:messages>
    <p:inputText required="true"></p:inputText>
    <p:commandButton value="submit" update=":outsideForm,insideForm"/>
</h:form> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T11:09:59.607

每个从支持 bean 提交/接收内容的组件都需要用`<h:form>`.

因此，您要更新的所有内容或每个按钮/链接设置都需要在表单中。这也不是 Primefaces 的事情。此规则也适用于普通 JSF。

# actionscript-3 - Firefox flash 重复调用

> ID：13511328
> 
> 赞同：0
> 
> 时间：2012-11-22T11:03:27.003
> 
> 标签：actionscript-3, flash, firefox, urlloader

在我的闪存中，我有一个 urlloader，它正在使用调用中的参数（url&id=1）进行 GET 操作。当我在 firefox 浏览器中运行 flash 文件时（这种情况是 17 也是 16），由于某种原因，浏览器进行了两次 GET 调用，一个带有参数，另一个没有在参数中放入任何值（&id=）。例如，在 chrome 中不会发生这种情况。有谁知道为什么Firefox有这个？以及如何预防？

# php - php mail() "在我们的服务器上找不到域"

> ID：13511338
> 
> 赞同：0
> 
> 时间：2012-11-22T11:04:02.217
> 
> 标签：php

我正在使用基于 Windows 的服务器，我想知道为什么服务器在使用 mail() 函数时会返回此错误消息：

```
Warning: mail() [function.mail]: SMTP server response: 554 Invalid From address:
xxxxx@MyDomain.com. Could not find domain MyDomain.com on our servers.
The email From address must be of type any_valid_name@yourdomain.com in 
\\web-123win\winpackage22\MyDomain\web\content\mail.php on line 16 
```

我的意思是，mail() 函数不应该将电子邮件发送到我们想要的任何域吗？

你能帮助我理解这个消息吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:09:28.777

由于垃圾邮件占所有电子邮件流量的 99%，因此大多数邮件服务器不再接受它们所收到的所有邮件。相反，他们只接受来自以下类别的消息：

*   为其用户接收的邮件
*   来自用户的外发邮件

您的邮件似乎属于第二类，因此您必须提供身份证明，以便他们知道您可以使用他们的邮件系统。详细信息取决于邮件提供商，但您通常需要提供用户名和密码。

也就是说，`mail()`函数不实现身份验证，所以你需要使用第三方包，如 PHPMailer 或 Swift Mailer。

# remote-desktop - 从 RDC 管理器导出连接配置

> ID：13511339
> 
> 赞同：7
> 
> 时间：2012-11-22T11:04:08.247
> 
> 标签：remote-desktop

我正在尝试导出在 RDC [远程桌面连接] 管理器中配置的连接组 [.RDG 文件]。有没有办法做到这一点？

***注意***我无法在文件系统中获取文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T09:27:41.760

我只是自己想通了。只需选择组，选择文件 -> 另存为 -> 文件名.rdg。:-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-07T13:32:52.207

虽然当您在 RDC 管理器中使用打开/保存命令时，它会显示路径：

```
C:\Program Files (x86)\Remote Desktop Connection Manager 
```

当您实际在 PC 上搜索 .rdg 文件时，您会发现这些文件实际上存储在虚拟存储中。

尝试访问以下位置：

```
C:\Users\Your User\AppData\Local\VirtualStore\Program Files (x86)\Remote Desktop Connection Manager 
```

从 VirtualStore 位置，您可以复制和粘贴文件，以便在不同的电脑之间轻松传输。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-22T21:01:04.207

如果您尝试右键单击该组，您将只会看到“保存”选项。有趣的是，您似乎将保存一个“文件”作为文件资源管理器对话框。如果您保存文件（例如：testRDCPgroup.rdg）并浏览到默认目录：C:\Program Files (x86)\Remote Desktop Connection Manager；您将找不到该文件（！）。如果您返回 RDCM 并选择 OPEN，然后浏览到该位置，您可以打开“ghost”文件[我刚刚仔细检查了显示隐藏文件和操作系统文件已启用，所以我可以看到两者]。

我也花了大约一个小时才弄清楚，如果您选择组并进入菜单，您可以执行另存为；这将允许您将 .rdg 文件保存到其他位置。

从菜单创建的 .rdg 文件可以在另一台计算机上使用 file->Open 漂亮地打开。其中一件很容易被忽视的事情，会让你感觉这是你工作的第一天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-17T19:00:59.490

如何导出 RDP 连接 -

> C:\Users（*您的用户*资料）\AppData\Local\Packages\Microsoft.MicrosoftRemoteDesktopPreview_8wekyb3d8bbwe\LocalState\RemoteDesktopData\LocalWorkspace

1）按照上面的目录

> C:\Users（*您的用户*资料）\AppData\Local\Packages\Microsoft.MicrosoftRemoteDesktopPreview_8wekyb3d8bbwe\LocalState\RemoteDesktopData\LocalWorkspace

2) 复制名为 Connections 的文件夹

> C:\Users\CYBERPOWER\AppData\Local\Packages\Microsoft.MicrosoftRemoteDesktopPreview_8wekyb3d8bbwe\LocalState\RemoteDesktopData\LocalWorkspace**connections**

注意：文件被锁定尝试在安全模式下复制或使用备份软件备份此文件夹 - 如果您复制此文件夹可能无法正常工作...

导入 - 确保您已在新设备上下载该应用程序[https://www.microsoft.com/en-za/p/microsoft-remote-desktop/9wzdncrfj3ps?rtc=1&activetab=pivot:overviewtab](https://www.microsoft.com/en-za/p/microsoft-remote-desktop/9wzdncrfj3ps?rtc=1&activetab=pivot:overviewtab) 或 [https://aka .ms/rdapps](https://aka.ms/rdapps)

1) 过去并在新位置更换

> C:\Users\CYBERPOWER\AppData\Local\Packages\Microsoft.MicrosoftRemoteDesktopPreview_8wekyb3d8bbwe\LocalState\RemoteDesktopData\LocalWorkspace\connections

注意：它可能会说你没有权限...给你的文件夹权限，然后再试一次。

您可以退出并重新登录您的个人资料，这将生效。

注意：这适用于远程桌面客户端。[https://aka.ms/rdapps](https://aka.ms/rdapps)

# iphone - UIBackgroundModes 位置和带有区域监控的显着位置变化

> ID：13511340
> 
> 赞同：17
> 
> 时间：2012-11-22T11:04:10.457
> 
> 标签：iphone, objective-c, ios, core-location, cllocationmanager

我有一个应用程序，它使用`startMonitoringForRegion:`和的组合`startMonitoringSignificantLocationChanges`来了解应用程序在后台时用户的位置。这是否意味着我需要在 ? 中包含键的`location`值？`UIBackgroundModes``Info.plist`

这是来自文档的引用：

> 对于不需要高精度位置数据的应用，强烈建议使用重大变化位置服务。使用此服务，仅当用户的位置发生重大变化时才会生成位置更新；因此，它非常适合社交应用程序或为用户提供非关键、位置相关信息的应用程序。如果应用程序在发生更新时被挂起，系统会在后台将其唤醒以处理更新。如果应用程序启动此服务然后终止，系统会在新位置可用时自动重新启动应用程序。此服务在 iOS 4 及更高版本中可用，并且仅在包含蜂窝无线电的设备上可用。
> 
> ...
> 
> 为用户提供持续位置更新（即使在后台）的应用程序可以通过在其 Info.plist 文件中包含 UIBackgroundModes 键（带有位置值）来启用后台位置服务。在 UIBackgroundModes 键中包含此值不会阻止系统挂起应用程序，但它确实告诉系统它应该在有新的位置数据要传递时唤醒应用程序。因此，此键有效地让应用程序在后台运行，以便在位置更新发生时处理它们。

我对此的解释是，仅当应用程序需要持续位置更新时才需要密钥的`location`值，例如卫星导航应用程序。`UIBackgroundModes`

我还尝试在没有密钥`location`值的设备上运行该应用程序`UIBackgroundModes`，它会继续报告重大的位置更改以及何时输入或退出区域。

[此外， CLLocationManager 类参考](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)`UIBackgroundModes`中提到的唯一地方是在讨论中，我没有使用。`startUpdatingLocation`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T12:25:52.150

您的`location`密钥是正确的，仅当您的应用需要高精度位置更新时才需要它，即使在后台也是如此。像 Runkeeper 这样的东西使用它来允许它继续跟踪你的位置，即使你正在使用另一个具有多任务处理的应用程序。[来自 iOS Keys 的文档：`UIBackgroundModes`](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

> “位置”：应用程序向用户提供基于位置的信息，并且需要使用标准位置服务（相对于重大更改位置服务）来实现此功能。

和

> 如果存在在后台运行的替代方案，则应使用这些替代方案。例如，应用程序可以使用重要的位置更改界面来接收位置事件，而不是注册为后台位置应用程序。

区域监控将在没有`location`密钥的情况下工作。事实上，区域监控将在没有启用任何特殊 iOS 键的情况下工作。

你说你没有使用`CLLocationManager`，但如果你使用区域监控，你将不得不使用那个类。您需要为您的应用设置一个位置管理器委托，以实际获取区域通知。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-11T10:28:29.010

是的，如果您使用重大更改位置服务（startMonitoringSignificantLocationChanges）在后台和应用程序终止状态下监视用户位置，则必须在 Info.plist 的背景模式下添加“位置”键。

# regex - 计算文本文件中电子邮件地址的出现次数

> ID：13511343
> 
> 赞同：1
> 
> 时间：2012-11-22T11:04:30.460
> 
> 标签：regex, string, perl

我有一个 .txt 文件，其中包含许多电子邮件，包括标题。我只是想知道如何使用 perl 来找出在这个文本文件中找到了多少相同的电子邮件地址？它会涉及正则表达式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:28:11.840

您可能会发现[cpan: Email::Find](http://search.cpan.org/~miyagawa/Email-Find-0.10/lib/Email/Find.pm)很有用。您可以将找到的地址存储在哈希表中，其中电子邮件作为键，计数器作为值。您应该能够通过回调来做到这一点。你能从这个开始吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:44:34.160

这个脚本怎么样：

```
#!/usr/bin/perl

use strict;
use Data::Dumper;

my @email_list = ();
my %count;

while (my $line = <>) {
    foreach my $email (split /\s+/, $line) {
        if ( $email =~ /^[-\w.]+@([a-z0-9][a-z-0-9]+\.)+[a-z]{2,4}$/i ) {

            push(@email_list,$email);
        }
    }
}

print "Total Email Count: ".scalar(@email_list)."\n\n";
$count{$_}++ for @email_list;
print Dumper(\%count); 
```

将其保存到文件中，`email.pl`并确保其可执行`chmod +x email.pl`。

`./email.pl file.txt`

它将打印找到的电子邮件地址总数并计算每个电子邮件地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:48:25.340

如果您想查找所有电子邮件地址，我建议您尝试一个模块，而不是编写自己的正则表达式。正确匹配所有电子邮件地址变得相当复杂。

但是，如果您只是想搜索给定的电子邮件地址，您可以使用一个相当简单的正则表达式来完成此操作：

```
#!usr/bin/perl
use strict;
use warnings;

my $count = 0;
my $email = 'foo@bar.com';

while(<DATA>)
{
    $count++ while (m/(^|\s)\K\Q$email\E(?=\s|$)/g);
}

print "Found $email $count times";

__DATA__
foo@bar.com foo@bar.com

mr-foo@bar.com #not a match

old.foo@bar.com   #not a match
blah blah blah foo@bar.com blah blah
foo@bar.commmm #not a match 
```

请注意，这要求电子邮件地址与任何其他内容用空格分隔。

几个注意事项： `\Q...\E`是引用文字转义。它确保电子邮件地址中的任何内容都不会被视为特殊的正则表达式字符（没有这个，`.`将匹配任何字符而不是文字句点）。

`(?=...)`是一个前瞻插入。这将匹配内容而不将其包含在实际匹配中。这很重要，因为单个空格可能在电子邮件的一次出现*之前和另一次**之后*。为了匹配两者，您不希望第一个匹配“吃掉”那个空间。

# symfony - Symfony2 捆绑包

> ID：13511344
> 
> 赞同：0
> 
> 时间：2012-11-22T11:04:33.437
> 
> 标签：symfony, bundle

> **可能重复：**
> [我会为了什么做一个捆绑包？(Symfony 2)](https://stackoverflow.com/questions/11935213/for-what-would-i-make-a-bundle-symfony-2)

我只是在学习 Symfony2 并遵循 symblog 教程。但是，我只是想知道您应该为完整的网站创建哪种类型的捆绑包。为整个站点创建一个捆绑包，其中包含站点的所有控制器等，或者如果网站包含登录部分、新闻部分、博客等，您是否会为每个单独的捆绑包以及通用网络的“主”捆绑包诸如关于我们、联系我们、主页等页面？

# php - 多个动态组合框javascript

> ID：13511345
> 
> 赞同：1
> 
> 时间：2012-11-22T11:04:36.463
> 
> 标签：php, javascript, mysql, combobox

是否有机会拥有一个组合框，每次我在其中选择某些内容时，它都会打开一个新的组合框，等等，直到没有更多数据可供选择？

（选项不得重复）

Combo1 - (opt1-opt2-opt3) - 选择 opt1
Combo2 - (opt2-opt3) - 选择 opt3
Combo3 - (opt2)

组合框应由使用 php 和 mysql 的查询填充。

我该怎么做 ？干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:07:54.190

这是一些将执行此操作的 jquery：

**HTML**

```
<select id="combo1" class="combo" data-index="1">
    <option></option>
    <option val="Opt1">Opt1</option>
    <option val="Opt2">Opt2</option>
    <option val="Opt3">Opt3</option>
</select> 
```

**Javascript**

```
$('body').on('change', '.combo', function() {
    var selectedValue = $(this).val();

    if ($(this).find('option').size() > 2) {
        var newComboBox = $(this).clone();
        var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
        var newComboBoxIndex = thisComboBoxIndex + 1;

        $('.parentCombo' + thisComboBoxIndex).remove();

        if (selectedValue !== '') {
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + newComboBoxIndex);
            newComboBox.addClass('parentCombo' + thisComboBoxIndex);
            newComboBox.find('option[val="' + selectedValue + '"]').remove();
            $('body').append(newComboBox);
        }
    }
});​ 
```

**[演示](http://jsfiddle.net/JaVVe/6/)**

**解释**

```
// Adds an event listener to each combo box that is created dynmically
$('body').on('change', '.combo', function() {
    // Gets this selected value
    var selectedValue = $(this).val();

    // Checks if there are enough options left to create another combo box
    if (selectedValue !== '' && $(this).find('option').size() > 2) {
        // Clones the just selected combo box and get the current and next combo index
        var newComboBox = $(this).clone();
        var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
        var newComboBoxIndex = thisComboBoxIndex + 1;

        // Removes any "children" combo boxes
        $('.parentCombo' + thisComboBoxIndex).remove();

        // Checks if a blank value is not selected to create another combo box
        if (selectedValue !== '' && $(this).find('option').size() > 2) {
            // Gives this new combo box the correct id, index, parent class
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + newComboBoxIndex);
            newComboBox.addClass('parentCombo' + thisComboBoxIndex);

            // Removes the selected option from the new combo box
            newComboBox.find('option[val="' + selectedValue + '"]').remove();

            // Adds the combo box to the page. Disco!
            $('body').append(newComboBox);
        }
    }
}); 
```

# c# - 检测它是否是应用程序c#的最后一个实例

> ID：13511348
> 
> 赞同：1
> 
> 时间：2012-11-22T11:04:55.323
> 
> 标签：c#, .net, multiple-instances

我有我必须启动多个实例的程序。

但是，如果当前实例是最后一个实例，我必须执行一些操作。

有什么办法吗？如果是，那我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:09:47.407

```
if(Process.GetProcessesByName("yourprogram").Length == 0)
{
    // It's the only instance!
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:08:27.347

最好的方法可能是计算正在运行的进程数

```
var count = System.Diagnostics.Process.GetProcessesByName(System.IO.Path.GetFileNameWithoutExtension(System.Reflection.Assembly.GetEntryAssembly().Location)).Count(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T11:08:29.260

您可以获得与当前进程同名的进程列表并采取相应措施；

```
System.Diagnostics.Process[] processes = System.Diagnostics.Process.GetProcessesByName("Name.of.process.here");
if(processes.Length == 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:16:47.640

在 CLR via C# book by Jeffrey Richter 中，这是一个使用`Semaphore`类的例子：

```
using System;
using System.Threading; 

public static class Program {
    public static void Main() {
        bool created; 

        using(new Semaphore(0, 1, "SomeUniqueStringIdentifyingMyApp", out created)) {
            if(created) {
                //This thread created kernel object so no other instance of this app must be running
            } else {
                //This thread opens existing kernel object with the same string name which means 
                //that another instance of this app must be running. 
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T11:19:56.270

您应该注意，所有其他应答器都不会订购应用程序实例。

您想如何订购您的应用程序？到开始时间？如果是这样，您可以为您的代码使用[独立存储](http://www.codeproject.com/Articles/6535/Isolated-Storage-in-NET-to-store-application-data)，在其中存储应用程序实例的上次启动日期，并将其与当前实例的开始日期进行比较（在您的应用程序中创建一个静态属性）。另见：[MSDN 文章](http://msdn.microsoft.com/en-us/library/x7dzh4ws.aspx)。

如果您不想订购您的应用程序，只需使用[Process.GetProcessesByName](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getprocessesbyname.aspx)，只需将您的应用程序的名称传递给那里。

请注意，调试模式进程名称与发布模式进程名称不同

# sql - Qt QAbstractModel 寻找数据

> ID：13511349
> 
> 赞同：1
> 
> 时间：2012-11-22T11:04:55.593
> 
> 标签：sql, qt, model, qabstracttablemodel

我有自己的`QAbstractTableModel`连接到 SQLite。我从数据库中获取数据并按列名将其写入我的列表。在查找数据时，我不想通过 SQL 查询来处理我的表。

你有什么想法？正常吗？

请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:22:09.277

要搜索模型中的数据，您可以使用[QSortFilterProxyModel](http://qt-project.org/doc/qt-4.8/qsortfilterproxymodel.html)。您将模型设置为代理模型的源模型，并在“搜索结果”视图中显示代理模型。

例如，您可以使用`setFilterRegExp()`和`setFilterKeyColumn()`指定您要查找的名称和“名称”列。如果您想要更复杂的过滤，您也可以将其子类化。文档中有[一个示例](http://doc-snapshot.qt-project.org/4.8/itemviews-customsortfiltermodel.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:24:26.533

1.  不，QtSQL 模块不提供任何[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)，因此您必须自己编写 SQL 查询。

2.  但是，您可以使用[QSortFilterProxyModel](http://doc.qt.digia.com/qt/qsortfilterproxymodel.html)（或它的子类，甚至将过滤代码放在您的子类中`QAbstractTableModel`）进行搜索/过滤。但我建议您不要这样做，因为关系数据库可能（并且很有可能会）优化您的搜索。

# android - 从画廊方向选择的 Android 图像始终为 0：Exif TAG

> ID：13511356
> 
> 赞同：12
> 
> 时间：2012-11-22T11:05:10.300
> 
> 标签：android, bitmap, exif

当我从图库中选择图像以将其设置在 android 应用程序的 imageview 上时，我看到*它反转了 180 或 270 或 90 度*。
因此，为了检查/解决这个问题，我使用`EXIF`了方向，但它总是给我“0”。

我无法解决问题所在。

代码：

```
Uri selectedImageUri = data.getData();

                    absolutePath = selectedImageUri.getPath();

                    exifMedia = new ExifInterface(absolutePath);
                    String exifOrint = exifMedia.getAttribute(ExifInterface.TAG_ORIENTATION);

                    exifOrientation = Integer.parseInt(exifOrint);

                    System.out.println("Orientation Tag is:"+exifOrientation);

                    /** Convert URI into byte */
                    ContentResolver cr = getBaseContext()
                    .getContentResolver();
                    InputStream inputStream = cr
                    .openInputStream(selectedImageUri);
                    Bitmap bitmap = BitmapFactory.decodeStream(inputStream);

                    rotatedBMP = getResizedBitmapImage(
                            bitmap, 100, 100,exifOrientation);

                    ByteArrayOutputStream stream = new ByteArrayOutputStream();
                    rotatedBMP.compress(Bitmap.CompressFormat.PNG, 100,
                            stream);
                    byteArray = stream.toByteArray();
                    mimProfileImageBrowse.setImageBitmap(rotatedBMP); 
```

方法：

```
public  Bitmap getResizedBitmapImage(Bitmap bm, int newHeight, int newWidth, int exifOrientation) {
        int width = bm.getWidth();
        int height = bm.getHeight();
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;
        /**
         *  create a matrix for the manipulation
         */

        Matrix matrix = new Matrix();
        /**
         *  resize the bit map
         */

        /*

         1 = Horizontal (normal) 
2 = Mirror horizontal 
3 = Rotate 180 
4 = Mirror vertical 
5 = Mirror horizontal and rotate 270 CW 
6 = Rotate 90 CW 
7 = Mirror horizontal and rotate 90 CW 
8 = Rotate 270 CW

         */

        switch (exifOrientation) {
        case ExifInterface.ORIENTATION_ROTATE_270:

            rotate = 270;

            break;

        case ExifInterface.ORIENTATION_ROTATE_180:

            rotate = 180;

            break;

        case ExifInterface.ORIENTATION_ROTATE_90:

            rotate = 90;

            break;

        case ExifInterface.ORIENTATION_TRANSPOSE:

            rotate = 45;

            break;

        default:
            break;
        }

        matrix.postScale(scaleWidth, scaleHeight);
        matrix.postRotate(rotate);

        /**
         * recreate the new Bitmap
         */
        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
        resizedBitmap = Bitmap.createScaledBitmap(bm, 65, 65, true);

        return resizedBitmap;

    } 
```

请帮忙。也不`matrix.postROTATE`旋转位图。我不知道为什么。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T11:20:51.083

获得所选图像的 Uri 后，使用此方法调用以下函数，
像这样，

```
Uri selectedImageUri = data.getData();
Bitmap bitmap = scaleImage(this,selectedImageUri); 
```

要包含在您的活动中的两个功能是，

```
 public static Bitmap scaleImage(Context context, Uri photoUri) throws IOException {
        InputStream is = context.getContentResolver().openInputStream(photoUri);
        BitmapFactory.Options dbo = new BitmapFactory.Options();
        dbo.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(is, null, dbo);
        is.close();

        int rotatedWidth, rotatedHeight;
        int orientation = getOrientation(context, photoUri);

        if (orientation == 90 || orientation == 270) {
            rotatedWidth = dbo.outHeight;
            rotatedHeight = dbo.outWidth;
        } else {
            rotatedWidth = dbo.outWidth;
            rotatedHeight = dbo.outHeight;
        }

        Bitmap srcBitmap;
        is = context.getContentResolver().openInputStream(photoUri);
        if (rotatedWidth > MAX_IMAGE_DIMENSION || rotatedHeight > MAX_IMAGE_DIMENSION) {
            float widthRatio = ((float) rotatedWidth) / ((float) MAX_IMAGE_DIMENSION);
            float heightRatio = ((float) rotatedHeight) / ((float) MAX_IMAGE_DIMENSION);
            float maxRatio = Math.max(widthRatio, heightRatio);

            // Create the bitmap from file
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inSampleSize = (int) maxRatio;
            srcBitmap = BitmapFactory.decodeStream(is, null, options);
        } else {
            srcBitmap = BitmapFactory.decodeStream(is);
        }
        is.close();

        /*
         * if the orientation is not 0 (or -1, which means we don't know), we
         * have to do a rotation.
         */
        if (orientation > 0) {
            Matrix matrix = new Matrix();
            matrix.postRotate(orientation);

            srcBitmap = Bitmap.createBitmap(srcBitmap, 0, 0, srcBitmap.getWidth(),
                    srcBitmap.getHeight(), matrix, true);
        }

        String type = context.getContentResolver().getType(photoUri);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        if (type.equals("image/png")) {
            srcBitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
        } else if (type.equals("image/jpg") || type.equals("image/jpeg")) {
            srcBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        }
        byte[] bMapArray = baos.toByteArray();
        baos.close();
        return BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length);
    }

    public static int getOrientation(Context context, Uri photoUri) {
        /* it's on the external media. */
        Cursor cursor = context.getContentResolver().query(photoUri,
                new String[] { MediaStore.Images.ImageColumns.ORIENTATION }, null, null, null);

        if (cursor.getCount() != 1) {
            return -1;
        }

        cursor.moveToFirst();
        return cursor.getInt(0);
    } 
```

要从文件中获取 Uri，请使用以下命令：

```
public static Uri getImageContentUri(Context context, File imageFile) {
        String filePath = imageFile.getAbsolutePath();
        Cursor cursor = context.getContentResolver().query(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                new String[] { MediaStore.Images.Media._ID },
                MediaStore.Images.Media.DATA + "=? ",
                new String[] { filePath }, null);
        if (cursor != null && cursor.moveToFirst()) {
            int id = cursor.getInt(cursor
                    .getColumnIndex(MediaStore.MediaColumns._ID));
            Uri baseUri = Uri.parse("content://media/external/images/media");
            return Uri.withAppendedPath(baseUri, "" + id);
        } else {
            if (imageFile.exists()) {
                ContentValues values = new ContentValues();
                values.put(MediaStore.Images.Media.DATA, filePath);
                return context.getContentResolver().insert(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
            } else {
                return null;
            }
        }
    } 
```

* * *

问：你能告诉我什么是“MAX_IMAGE_DIMENSION”吗？– Dhrupal 2013 年 3 月 13 日 A. 它基于您的图像视图大小或您想要显示的图像大小.. 无论是 60X60 然后 60、100X100 然后 100 @Dhrupal

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:18:38.093

我猜你不应该使用“ `selectedImageUri.getPath()`”来获取路径，因为它并没有真正返回图像文件路径。相反，您应该使用`ContentResolver`查询`MediaStore.Images.ImageColumns.DATA`哪个值是图像的实际路径。

实际上，如果您只想获取方向，则不必从 Exif 中获取，只需查询 的值`MediaStore.Images.ImageColumns.ORIENTATION`即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T03:04:32.830

已经很久没有提问了。但我反驳了同样的问题，并解决了这个问题。当您将文件路径放入 exifInterface 的构造函数时，请使用真实路径，例如“/storage/sdcard0/DCIM/Camera/blahbalh.jpg”，而不是使用 /content:/media/external/images/media/blah 之类的东西，这会给出总是 0 信息。希望有人会得到帮助。研究生。

哎呀。下面一个是相同的方法。还有更多。用这个。

```
/**
 * @ref http://stackoverflow.com/questions/3401579/get-filename-and-path-from-uri-from-mediastore
 * @param contentUri
 * @return
 */
public String getRealPathFromURI(Uri contentUri) {
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = getContentResolver().query(contentUri, proj, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-17T17:01:37.550

您应该使用 getRealPathFromURI 函数：

```
public static String getRealPathFromURI(Context context, Uri uri,
            String data) {

    String[] largeFileProjection = { MediaStore.Images.ImageColumns._ID,
            MediaStore.Images.ImageColumns.DATA };

    String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
    Cursor myCursor = context.getContentResolver().query(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            largeFileProjection, null, null, largeFileSort);
    String largeImagePath = "";
    try {
        myCursor.moveToFirst();
        largeImagePath = myCursor
                .getString(myCursor
                        .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
    } finally {
        myCursor.close();
    }

    return largeImagePath;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-03T12:08:18.503

试试下面的代码： -

```
ExifInterface exif = new ExifInterface(filename);  
int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_UNDEFINED);  
Bitmap bmRotated = rotateBitmap(bitmap, orientation); 
```

调用以下方法：-

```
public static Bitmap rotateBitmap(Bitmap bitmap, int orientation) {

    try{
        Matrix matrix = new Matrix();
        switch (orientation) {
            case ExifInterface.ORIENTATION_NORMAL:
                return bitmap;
            case ExifInterface.ORIENTATION_FLIP_HORIZONTAL:
                matrix.setScale(-1, 1);
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                matrix.setRotate(180);
                break;
            case ExifInterface.ORIENTATION_FLIP_VERTICAL:
                matrix.setRotate(180);
                matrix.postScale(-1, 1);
                break;
            case ExifInterface.ORIENTATION_TRANSPOSE:
                matrix.setRotate(90);
                matrix.postScale(-1, 1);
                break;
           case ExifInterface.ORIENTATION_ROTATE_90:
               matrix.setRotate(90);
               break;
           case ExifInterface.ORIENTATION_TRANSVERSE:
               matrix.setRotate(-90);
               matrix.postScale(-1, 1);
               break;
           case ExifInterface.ORIENTATION_ROTATE_270:
               matrix.setRotate(-90);
               break;
           default:
               return bitmap;
        }
        try {
            Bitmap bmRotated = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
            bitmap.recycle();
            return bmRotated;
        }
        catch (OutOfMemoryError e) {
            e.printStackTrace();
            return null;
        }
    }
    catch (IOException e) {
        e.printStackTrace();
        return null;
    }
    return bitmap;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-30T02:59:28.970

我无法让光标或 Exif 接口方法为我工作。我无法获得三星前后摄像头的可靠旋转数。

对于那些寻找适用于三星和其他主要制造商的前置和后置摄像头解决方案的人来说，nvhausid 的这个答案很棒：

[https://stackoverflow.com/a/18915443/6080472](https://stackoverflow.com/a/18915443/6080472)

对于那些不想点击的人来说，相关的魔法是使用 CameraInfo 而不是依赖 EXIF。

```
Bitmap realImage = BitmapFactory.decodeByteArray(data, 0, data.length);
android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
android.hardware.Camera.getCameraInfo(mCurrentCameraId, info);
Bitmap bitmap = rotate(realImage, info.orientation); 
```

链接中的完整代码。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-09T16:11:26.803

捕获图像时，它将 exif 数据存储为有关旋转类型（纵向 - 横向）的信息。因此，您唯一需要检查的是 exif 数据：

```
ExifInterface exifData = new ExifInterface(uri);
        int orientation = exifData.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
        Matrix matrix;
        switch (orientation) {
        case 6:
             matrix = new Matrix();
            matrix.postRotate(90);
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
            break;
        case 3:
             matrix = new Matrix();
            matrix.postRotate(180);
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
            break;
        case 8:
            matrix = new Matrix();
            matrix.postRotate(270);
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
            break;
        default:
            break; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-10-11T15:51:20.270

您是否已经检查过您是否在清单中设置了写入和读取权限？因为如果您没有设置它们，您将无法访问位图的 exif 数据，我说的是 android M。这是基于其 exif 数据旋转位图的片段。

```
public static Bitmap rotateBitmap(String filePath, Bitmap bitmap) {
    ExifInterface exif;
    try {
        exif = new ExifInterface(filePath);

        int orientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);
        Log.d("EXIF", "Exif: " + orientation);
        Matrix matrix = new Matrix();
        if (orientation == 6) {
            matrix.postRotate(90);
            Log.d("EXIF", "Exif: " + orientation);
        } else if (orientation == 3) {
            matrix.postRotate(180);
            Log.d("EXIF", "Exif: " + orientation);
        } else if (orientation == 8) {
            matrix.postRotate(270);
            Log.d("EXIF", "Exif: " + orientation);
        }
        return Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }

} 
```

# cuda - 在 CUDA 中读取带有线程的数组

> ID：13511367
> 
> 赞同：1
> 
> 时间：2012-11-22T11:05:41.893
> 
> 标签：cuda, gpu

我想知道这是否可能，以及从具有 CUDA 线程的数组中读取单元格的最佳方法是什么。为了简化我的意思，这是一个例子：

我有一个数组：{1,2,3,4,5,6,...}，我希望每个线程读取我的数组的 n 个单元，主要取决于它的大小。

我一直在尝试一些事情，但它似乎不起作用，所以如果有人能指出一种（正确的）方法来做到这一点，那就太好了。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:25:28.580

通常，您希望连续线程读取连续数组索引。这样做会导致“合并”内存事务。简单的思考方式是，如果 32 个线程在物理上并行运行，并且它们都做一个加载，那么如果所有 32 个加载都落入同一个缓存行，那么可以执行一次内存访问来填充缓存行，而不是 32 个单独的。

所以你想要做的是让每个线程访问`n`按线程数跨步的单元格，就像这样（假设输入数据在`float`数组中`data`）。

```
int idx = blockDim.x * blockIdx.x + threadIdx.x;
int stride = blockDim.x * gridDim.x;
for (int i = idx; i < numElements; i += stride) {
  float element = data[i];
  process(element);
} 
```

如果您的算法要求每个线程读取`n`连续的数据元素，那么您将产生非合并负载，这将更加昂贵。在这种情况下，我会考虑重新设计算法，这样就不需要这种类型的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:17:38.030

你需要：

> 线程必须查看下 n 个数字

所以你可以使用：

```
#define N 2
#define NTHREAD 1024
#define ARRAYSIZE N*NTHREAD

// develop the kernel as:
__global__ void accessArray(int *array){
    int tid = blockDim.x * blockIdx.x + threadIdx.x;
    int startId = tid*N;

    // access thread's stride
    for(int i=0; i<N; i++){
        array[startId+i]=tid;
    }
}
// call the kernel by:
accessArray<<<NTHREAD/256, 256>>>(d_array); 
```

转储`array`并检查它是否是您希望线程工作的方式。

**完整代码：**

```
#include <cuda.h>
#include <stdio.h>

#define N 2
#define NTHREAD 1024
#define ARRAYSIZE N*NTHREAD

// develop the kernel as:
__global__ void accessArray(int *array){
    int tid = blockDim.x * blockIdx.x + threadIdx.x;
    int startId = tid*N;

    // access thread's stride
    for(int i=0; i<N; i++){
        array[startId+i]=tid;
    }
}

int  main()
{
    int h_array[ARRAYSIZE];
    int *d_array;
    size_t memsize= ARRAYSIZE * sizeof(float);

    for (int i=0; i< ARRAYSIZE; i++) {
        h_array[i] = 0;
    }

    cudaMalloc(&d_array, memsize);
    cudaMemcpy(d_array, h_array, memsize,  cudaMemcpyHostToDevice);

    accessArray<<<NTHREAD/256, 256>>>(d_array);
    cudaMemcpy(h_array, d_array, memsize,  cudaMemcpyDeviceToHost);

    for (int i=0; i<ARRAYSIZE; i++)
        printf("A[%d] => %d\n",i,h_array[i]);

    cudaFree(d_array);
} 
```

# javascript - 如何在 Bootstrap 中创建切换按钮

> ID：13511368
> 
> 赞同：96
> 
> 时间：2012-11-22T11:05:41.830
> 
> 标签：javascript, jquery, css, twitter-bootstrap, jqtouch

我最初用 HTML、CSS 和 JavaScript 创建了一个 Web 应用程序，然后被要求在 Bootstrap 中再次创建它。我做得很好，但是我在网络应用程序中的切换按钮已经变回单选按钮（最初是复选框）按钮，而不是我原来的切换按钮。

按钮的代码是：

```
<label>
  Notifications
  <span class='toggle'>
    <input type='radio'
      class='notifications'
      name='notifications'
      id='notifications' />
  </span>
</li>
<label>
  Preview
  <span class='toggle'>
    <input type='radio'
      class='preview'
      name='preview'
      id='preview' />
  </span>
</li> 
```

HTML 页面链接到的 JavaScript 和 CSS 文件是：

```
<script src = 'jqtouch.js'></script>
<script src="jquery.js"></script>
<script src="js/bootstrap.js"></script>
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet"> 
```

有没有办法更改代码，以便我可以恢复切换按钮？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-01T15:16:59.007

# 2013年的初步答案

一个优秀的（非官方的）[引导开关是可用的](https://github.com/Bttstrp/bootstrap-switch)。

[![经典 2013 开关](../Images/36e4201ff49c1dee4b0aab91a5778f90.png)](https://i.stack.imgur.com/9QTta.png)

```
<input type="checkbox" name="my-checkbox" checked>
$("[name='my-checkbox']").bootstrapSwitch(); 
```

它使用单选类型*或*复选框作为开关。`type`自 V.1.8 起添加了一个属性。

源代码[在 Github 上可用](https://github.com/nostalgiaz/bootstrap-switch)。

# 2018 年的注意事项

我现在不建议使用那种旧的 Switch 按钮，因为它们似乎总是受到许多人指出[的可用性问题的困扰。](http://ux.stackexchange.com/questions/1318/should-a-toggle-button-show-its-current-state-or-the-state-to-which-it-will-chan)

请考虑从[React 组件框架](https://github.com/react-component)（与 Bootstrap 无关，但可以集成到 Bootstrap 网格和 UI 中）中查看[像这样的现代开关。](https://react-component.github.io/switch/examples/simple.html)

Angular、View 或 jQuery 还存在其他实现。

[![现代 2018 开关](../Images/8d6b6d2f6e42f21e9956e9d03e5f092f.png)](https://i.stack.imgur.com/4E0Uu.png)

```
import '../assets/index.less'
import React from 'react'
import ReactDOM from 'react-dom'
import Switch from 'rc-switch'

class Switcher extends React.Component {
  state = {
    disabled: false,
  }

  toggle = () => {
    this.setState({
      disabled: !this.state.disabled,
    })
  }

  render() {
    return (
      <div style={{ margin: 20 }}>
        <Switch
          disabled={this.state.disabled}
          checkedChildren={'开'}
          unCheckedChildren={'关'}
        />
        </div>
      </div>
    )
  }
}

ReactDOM.render(<Switcher />, document.getElementById('__react-content')) 
```

# 本机引导开关

请参阅下面关于本[机引导开关的](https://getbootstrap.com/docs/4.3/components/forms/#switches)[ohkts11 的回答](https://stackoverflow.com/questions/13511368/how-to-create-a-toggle-button-in-bootstrap/59004573#answer-59004573)。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2014-01-21T05:02:25.860

如果您不介意更改 HTML，可以使用s`data-toggle`上的属性`<button>`。请参阅[按钮示例的](http://getbootstrap.com/javascript/#buttons)*单切换*部分：

```
<button type="button" class="btn btn-primary" data-toggle="button">
    Single toggle
</button> 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-09-18T18:37:14.977

Bootstrap 3 具有基于复选框或单选按钮创建切换按钮的选项：http: [//getbootstrap.com/javascript/#buttons](http://getbootstrap.com/javascript/#buttons)

复选框

```
<div class="btn-group" data-toggle="buttons">
  <label class="btn btn-primary active">
    <input type="checkbox" checked> Option 1 (pre-checked)
  </label>
  <label class="btn btn-primary">
    <input type="checkbox"> Option 2
  </label>
  <label class="btn btn-primary">
    <input type="checkbox"> Option 3
  </label>
</div> 
```

单选按钮

```
<div class="btn-group" data-toggle="buttons">
  <label class="btn btn-primary active">
    <input type="radio" name="options" id="option1" checked> Option 1 (preselected)
  </label>
  <label class="btn btn-primary">
    <input type="radio" name="options" id="option2"> Option 2
  </label>
  <label class="btn btn-primary">
    <input type="radio" name="options" id="option3"> Option 3
  </label>
</div> 
```

要使这些工作，您必须`.btn`使用 Bootstrap 的 Javascript 初始化 s：

```
$('.btn').button(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-11-27T12:54:39.100

我一直在尝试使用 javascript 手动激活“活动”类。它不像一个完整的库那样有用，但对于简单的情况似乎就足够了：

```
var button = $('#myToggleButton');
button.on('click', function () {
  $(this).toggleClass('active');
}); 
```

如果您仔细考虑，当按钮被按下时，引导程序会使用“活动”类，而不是在此之前或之后（我们的例子），因此重用同一个类没有冲突。

试试这个例子并告诉我它是否失败：http: [//jsbin.com/oYoSALI/1/edit ?html,js,output](http://jsbin.com/oYoSALI/1/edit?html,js,output)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-30T16:41:35.783

如果您想保留一个小的代码库，并且您只需要应用程序的一小部分的切换按钮。我建议改为保持你自己的 javascript 代码（angularjs、javascript、jquery）并且只使用纯 CSS。

良好的切换按钮生成器：[https ://proto.io/freebies/onoff/](https://proto.io/freebies/onoff/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-05T07:08:12.417

~~这[对于 Bootstrap Toggle Button](http://www.bootstraptoggle.com/)非常有用。代码片段中的示例！和下面的jsfiddle。~~

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <input id="toggle-trigger" type="checkbox" checked data-toggle="toggle">
    <button class="btn btn-success" onclick="toggleOn()">On by API</button>
<button class="btn btn-danger" onclick="toggleOff()">Off by API</button>
<button class="btn btn-primary" onclick="getValue()">Get Value</button>
<script>
  //If you want to change it dynamically
  function toggleOn() {
    $('#toggle-trigger').bootstrapToggle('on')
  }
  function toggleOff() {
    $('#toggle-trigger').bootstrapToggle('off')  
  }
  //if you want get value
  function getValue()
  {
   var value=$('#toggle-trigger').bootstrapToggle().prop('checked');
   console.log(value);
  }
</script>
```

~~我向您展示了上面的几个示例。我希望它有所帮助。Js Fiddle 在[这里](https://jsfiddle.net/kswwmcdc/) 源代码[在 GitHub 上可用。](https://github.com/minhur/bootstrap-toggle)~~

**Bootstrap 4 的 2020 年更新**

我在 2020 年推荐了[bootstrap4-toggle](https://gitbrent.github.io/bootstrap4-toggle/)。

```
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>

<input id="toggle-trigger" type="checkbox" checked data-toggle="toggle" data-onstyle="success">
<button class="btn btn-success" onclick="toggleOn()">On by API</button>
<button class="btn btn-danger" onclick="toggleOff()">Off by API</button>
<button class="btn btn-primary" onclick="getValue()">Get Value</button>

<script>
  //If you want to change it dynamically
  function toggleOn() {
    $('#toggle-trigger').bootstrapToggle('on')
  }
  function toggleOff() {
    $('#toggle-trigger').bootstrapToggle('off')  
  }
  //if you want get value
  function getValue()
  {
   var value=$('#toggle-trigger').bootstrapToggle().prop('checked');
   console.log(value);
  }
</script>
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-04T18:30:17.013

您可以使用 CSS 切换开关库。只需包含 CSS 并自己编写 JS：http: [//ghinda.net/css-toggle-switch/bootstrap.html](http://ghinda.net/css-toggle-switch/bootstrap.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-07T10:21:55.177

您可以使用 Bootstrap 3.3.0 的 Material Design Switch

[http://bootsnipp.com/snippets/featured/material-design-switch](http://bootsnipp.com/snippets/featured/material-design-switch)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-23T04:39:35.037

**Bootstrap 4 解决方案**

bootstrap 4 提供内置切换。这是文档。 [https://getbootstrap.com/docs/4.3/components/forms/#switches](https://getbootstrap.com/docs/4.3/components/forms/#switches)

[![在此处输入图像描述](../Images/2bb9c7672977609c571f6abc1c3b3fe4.png)](https://i.stack.imgur.com/ynRNC.png)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-08-06T23:38:08.537

如果有人仍在寻找一个不错的开关/切换按钮，我遵循 Rick 的建议并围绕它创建了一个简单的角度指令[angular-switch](https://github.com/erikvullings/angular-switch "角度开关")。除了更喜欢 Windows 风格的开关外，与上面提到的 angular-bootstrap-switch 和 bootstrap-switch 相比，总下载量也小得多（2kb 与 23kb 缩小的 css+js）。

您将按如下方式使用它。首先包含所需的js和css文件：

```
<script src="./bower_components/angular-switch/dist/switch.js"></script>
<link rel="stylesheet" href="./bower_components/angular-switch/dist/switch.css"></link> 
```

并在您的 Angular 应用程序中启用它：

```
angular.module('yourModule', ['csComp'
    // other dependencies
]); 
```

现在您可以按如下方式使用它：

```
<switch state="vm.isSelected" 
    textlabel="Switch" 
    changed="vm.changed()"
    isdisabled="{{isDisabled}}">
</switch> 
```

[![在此处输入图像描述](../Images/fd31c92a0c77b9a238aa5deab161d94f.png)](https://i.stack.imgur.com/ZHIFd.png)

# android - 适用于 Android 的 VoIP 库

> ID：13511372
> 
> 赞同：55
> 
> 时间：2012-11-22T11:05:48.023
> 
> 标签：android, open-source, voip

我需要在我的 Android 应用程序中集成 VoIP 服务。
有没有免费（最好的开源）库？

我需要图书馆至少允许通过互联网进行语音通话，而不一定是互联网到电话（如 2 个 Skype 帐户）。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-22T11:31:47.107

从 android 版本 2.3 开始，在 Android 中添加了 SIP API。您可以使用内置的 SipStack 库或第三方开源 sip 堆栈。

请参阅[Android 开发者指南](http://developer.android.com/guide/topics/connectivity/sip.html)

互联网上有不同的开源 sip 堆栈库和项目。您可以下载该项目的源代码。

这是一些流行的开源 sip 堆栈库的列表，这些库允许通过 Internet 进行语音呼叫。

1\. [Pjsip](http://www.pjsip.org/)
2\. [Mjsip](http://mjsip.org/mjua.html)
3\. [doubango](http://www.doubango.org/)
4\. [belle-sip](https://github.com/BelledonneCommunications/belle-sip)

有不同的开源项目在他们的项目中使用了这些库。[比如 Sipdroid](http://sipdroid.org/)使用**MjSip**，[Csipsimple](http://code.google.com/p/csipsimple/)使用**PjSip**，[imsdroid](http://code.google.com/p/imsdroid/)使用**doubango**，[Linphone](https://github.com/BelledonneCommunications/linphone-android)使用**belle-sip**。

您可能还想参考这个[Android SIP 堆栈 - 使用什么？](https://stackoverflow.com/questions/9787556/android-sip-stack-what-to-use)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-25T00:34:30.700

开源 SIP 堆栈：

1.  Android SDK 的默认实现（API > 9）：
    优点：文档可用。容易明白。
    缺点：并非所有设备都受支持。无法更改编解码器。

2.  第三方

爪哇：

*   JainSIP（许可证：公共领域）

优点：Oracle (Sun) 项目 ==> 积极开发。看起来比 MjSIP 更容易（更多文档）。
缺点：未在“著名”应用程序中使用。

*   MjSIP（许可证：GNU GPL）

优点：SipDroid 是建立在它之上的。（提供源代码）（red5phone 是另一个项目） 缺点：不完全符合 RFC？缺乏教程（尽管有 Javadocs）。复杂的。发展几乎死了。

*   Doubango 框架 [android-ngn-stack]（许可证：GNU GPLv3）

优点：IMSDroid是建立在它之上的。（源代码可用）
缺点：生成的apk文件大小往往是“重”（> 15MB，如此[处](https://stackoverflow.com/questions/10042534/android-sip-client?lq=1)所述）

C/C++：

*   本机 SIP 堆栈

优点：多种选择（PjSip [CSipSimple]、GNU oSIP/eXoSIP [Linphone，已经制作了自己的堆栈 belle-sip]）。完全符合 RFC？更好的性能。
缺点：Android NDK/JNI 适合初学者。

来源（旧的，主要是 C/C++）：

[http://www.cs.columbia.edu/sip/implementations.html](http://www.cs.columbia.edu/sip/implementations.html)
[http://www.pernau.at/kd/voip/bookmarks-sip-stacks.html](http://www.pernau.at/kd/voip/bookmarks-sip-stacks.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-18T14:55:27.387

如果您需要 VoIP 但不需要 SIP，请查看 WebRTC [http://www.webrtc.org/](http://www.webrtc.org/)

# android - 按钮 onclick 的背景图像没有改变

> ID：13511373
> 
> 赞同：1
> 
> 时间：2012-11-22T11:05:54.777
> 
> 标签：android, image, button, onclick, drawable

单击按钮时，我想更改按钮的背景图像，但它对我不起作用。

确切的问题是什么？

帮助总是受到赞赏。

```
 private Button seatdirnbtn;
      seatdirnbtn.setOnClickListener(seathtlistner);
 private View.OnClickListener seathtlistner = new View.OnClickListener() {
 public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.drawable.icon4:
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
        break;
    case R.drawable.icon4hlt:
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:35:46.510

尝试在用户单击按钮时更改按钮背景：

```
 private Button seatdirnbtn;
 public static boolean isclick=false;
 seatdirnbtn.setOnClickListener(seathtlistner);
 private View.OnClickListener seathtlistner = new View.OnClickListener() {
 public void onClick(View v) {
    // TODO Auto-generated method stub
   if(isclick){
      seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    }else{
      seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    }
    isclick=!isclick;
} 
```

# php - Zend Framework 2 - Composer - Behat / Guzzle Conflict

> ID：13511377
> 
> 赞同：1
> 
> 时间：2012-11-22T11:06:07.847
> 
> 标签：php, composer-php, behat

这是我的 composer.json 文件：

```
{
    "name": "lorem-ipsum",
    "description": "Lorem Ipsum",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.4",
        "symfony/console": ">=2.0.0,<2.2.0-dev",
        "symfony/config": ">=2.0.0,<2.2.0-dev",
        "symfony/dependency-injection": ">=2.0.0,<2.2.0-dev",
        "symfony/event-dispatcher": ">=2.0.0,<2.2.0-dev",
        "symfony/translation": ">=2.0.0,<2.2.0-dev",
        "symfony/yaml": ">=2.0.0,<2.2.0-dev",
        "symfony/finder": ">=2.0.0,<2.2.0-dev",
        "zendframework/zendframework": "2.*",
        "doctrine/doctrine-module": "dev-master",
        "doctrine/doctrine-orm-module": "0.*",
        "gedmo/doctrine-extensions": "dev-master"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.*",
        "behat/behat": "2.4.*@stable",
        "behat/mink": "1.4@stable",
        "behat/mink-goutte-driver": "*",
        "symfony/browser-kit": "2.1.*",
        "symfony/css-selector": "2.1.*",
        "symfony/dom-crawler": "2.1.*",
        "symfony/process": "2.1.*",
        "guzzle/http": "2.8.*",
        "behat/mink-sahi-driver": "*"
    },
    "autoload": {
        "psr-0": {
            "Behat\\Behat": "src/"
        }
    }
} 
```

当我做：

```
php composer.phar update --dev 
```

我得到：

使用包信息加载作曲家存储库更新依赖项您的需求无法解析为可安装的包集。

```
 Problem 1
    - Conclusion: remove guzzle/parser v2.8.8
    - Conclusion: don't install guzzle/parser v2.8.8
    - fabpot/goutte 1.0.x-dev requires guzzle/guzzle 3.0.* -> satisfiable by guzzle/guzzle v3.0.0, guzzle/guzzle v3.0.1, guzzle/guzzle v3.0.2, guzzle/guzzle v3.0.3, guzzle/guzzle v3.0.4, guzzle/guzzle v3.0.5.
    - fabpot/goutte 1.0.x-dev requires guzzle/guzzle 3.0.* -> satisfiable by guzzle/guzzle v3.0.0, guzzle/guzzle v3.0.1, guzzle/guzzle v3.0.2, guzzle/guzzle v3.0.3, guzzle/guzzle v3.0.4, guzzle/guzzle v3.0.5.
    - Can only install one of: guzzle/guzzle v3.0.0, guzzle/guzzle v2.8.8.
    - Can only install one of: guzzle/guzzle v3.0.1, guzzle/guzzle v2.8.8.
    - Can only install one of: guzzle/guzzle v3.0.2, guzzle/guzzle v2.8.8.
    - Can only install one of: guzzle/guzzle v3.0.3, guzzle/guzzle v2.8.8.
    - Can only install one of: guzzle/guzzle v3.0.4, guzzle/guzzle v2.8.8.
    - Can only install one of: guzzle/guzzle v3.0.5, guzzle/guzzle v2.8.8.
    - Installation request for guzzle/parser v2.8.8 -> satisfiable by guzzle/guzzle v2.8.8, guzzle/parser v2.8.8.
    - Installation request for fabpot/goutte 1.0.x-dev -> satisfiable by fabpot/goutte 1.0.x-dev. 
```

几天前没有发生这种情况，我已经使用这个 composer.json 文件几个星期了，它总是安装好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:32:44.020

问题似乎是您`2.8.*`在 require-dev 中需要 guzzle/http。由于`2.8.8`安装在你的开发依赖中，当你尝试更新它时，它会首先更新正常的需求，同时完全防止开发需求发生变化。

此时，由于 fabpot/goutte 现在显然需要 guzzle `3.0.*`，因此它向南走，因为它想保留`2.8.8`并需要 install `3.0.*`。

解决方案是 rm -rf vendor/guzzle，以确保当前依赖项已从当前状态消失。然后运行 ​​update 应该会顺利，直到它更新了 dev 依赖项，此时它仍然会抱怨与`2.8.8`不兼容`3.0.*`，所以你应该更新你的 require-dev 行以指定`3.0.*`. 如果这对您来说是个问题，请尝试使用较旧的标记版本的 goutte（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:52:32.923

我现在通过明确指定所有包的版本解决了这个问题：

```
{
    "name": "lorem-ipsum",
    "description": "Lorem ipsum",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.4",
        "zendframework/zendframework": "2.0.4",
        "doctrine/doctrine-module": "0.5.2",
        "doctrine/doctrine-orm-module": "0.5.3",
        "gedmo/doctrine-extensions": "2.3.1"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.9",
        "guzzle/guzzle": "3.0.5",
        "behat/behat": "2.4.4",
        "behat/mink": "1.4",
        "behat/mink-goutte-driver": "1.0.3",
        "behat/mink-sahi-driver": "1.0.0",
        "squizlabs/php_codesniffer": "1.4.2",
        "phpmd/phpmd": "1.4.0"
    },
    "autoload": {
        "psr-0": {
            "Behat\\Behat": "src/"
        }
    }
} 
```

# android - 如何向多个注册 ID 发送通知并使用 GCM 接收它们？

> ID：13511380
> 
> 赞同：1
> 
> 时间：2012-11-22T11:06:35.513
> 
> 标签：android, push-notification, google-cloud-messaging

我实现了一个 PHP 代码来向多个注册 ID 发送通知，但是经过大量搜索后，我没有找到 GCMIntentService 和 GCMBroadcastReciever 的实现，它可以告诉我如何在我的代码上实现它这是 PHP 代码

```
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
        'registration_ids'  => $apiKey,
        //'data'              => array( "message" => $message ),
        'data'  =>$message ,
);

$headers = array(
        'Authorization: key=' . "AIzaSyBCzOGxXyvvo8-ZSzesOsTIYa-7Ua64_SM",
        'Content-Type: application/json'
);

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

echo $result;
} 
```

这是我实现的Android类

```
package guc.edu.iremote;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.support.v4.app.NotificationCompat;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {

private static final String TAG = "===GCMIntentService===";
private static final String senderId = "559753615670";
String message;

public GCMIntentService() {
    super(senderId);
}

@Override
protected void onRegistered(Context arg0, String registrationId) {
    Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
    // sets the app name in the intent
    registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    registrationIntent.putExtra("sender", senderId);
    startService(registrationIntent);
    Log.i(TAG, "Device registered: regId = " + registrationId);

}

@Override
protected void onUnregistered(Context arg0, String arg1) {
    Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
    unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    startService(unregIntent);
    Log.i(TAG, "unregistered = " + arg1);
}

@Override
protected void onMessage(Context context, Intent intent) {
    intent.getStringExtra( "message" );

  Intent notificationIntent=new Intent(context,this.getApplicationContext().getClass());
  PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
  WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "TAG");    
  wl.acquire();
 generateNotification(context, message, notificationIntent);

}

@SuppressWarnings("deprecation")
private static void generateNotification(Context context, String message, Intent   notificationIntent) {
     int icon = R.drawable.ic_launcher;
     long when = System.currentTimeMillis();

     NotificationManager notificationManager = (NotificationManager)
             context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

    notificationManager.notify(0, notification);

     String title = context.getString(R.string.app_name);
     // set intent so it does not start a new activity
     notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
             Intent.FLAG_ACTIVITY_SINGLE_TOP);
     PendingIntent intent =PendingIntent.getActivity(context, 0, notificationIntent,      PendingIntent.FLAG_UPDATE_CURRENT);
     notification.setLatestEventInfo(context, title, message, intent);
     notification.flags |= Notification.FLAG_AUTO_CANCEL;
     notificationManager.notify(0, notification);
    notification.defaults |= Notification.DEFAULT_SOUND;
   notification.defaults |= Notification.DEFAULT_VIBRATE;
  notification.ledARGB = 0xff00ff00;
 notification.ledOnMS = 300;
 notification.ledOffMS = 1000;
 notification.flags |= Notification.FLAG_SHOW_LIGHTS;
 }

@Override
protected void onError(Context arg0, String errorId) {
    Log.i(TAG, "Received error: " + errorId);
}

@Override
protected boolean onRecoverableError(Context context, String errorId) {
    return super.onRecoverableError(context, errorId);
}
} 
```

那么任何人都可以帮我解决我的Android代码中的问题或缺失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:58:03.063

您在 PHP 中以错误的方式获得了 regids 和 API 密钥。它需要是这样的：

```
$registrationIDs = array(); 
/* fetch values */
 while ($stmt2->fetch()) {
   $regidOne =  $dev_i; // Filling the array with the regids
   $registrationIDs[] = $regidOne;
}
 $stmt2->close();
 $fields = array(
           'registration_ids' => $registrationIDs,
             'data' => array("message" => $message),
             'delay_while_idle'=> false,
             'collapse_key'=>"".$randomNum.""
            );
   $headers = array(
        'Authorization: key=' . $apiKey,
         'Content-Type: application/json'
         );

  // Open connection
   $ch = curl_init(); 
```

# process - 从 ARMA(p,q) 过程中提取均值

> ID：13511382
> 
> 赞同：0
> 
> 时间：2012-11-22T11:06:39.663
> 
> 标签：process, time-series, mean

× 19778

从 ARMA(p,q) 过程中提取均值

AR(p) 过程的平均值是 mean= (intercept)/(1-phi1-phi2-..-phip) ，这个公式对于 ARMA(p,q) 也一样吗..？

ARMA(p,q)：Xt= 截距 + Phi1 Xt-1 + Phi2 Xt-2 + ...+ Phip Xt-p + Epsilont+ theta1 Epsilont-1 +..+ thetaq Epsilont-q

其中 phi1,phi2,..,phip 是 AR 部分的系数..

更多信息：我正在比较事件之前和之后的时间序列的平均值。通常可以采用简单的平均值进行比较。但由于我的数据是自相关的，我想对前后的时间序列进行建模，这样我就可以比较之前和之后的平均值..因此我需要从 ARMA(p,q) 过程中提取平均值。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:11:10.633

是的，移动平均项不会影响边际均值，它们只会影响方差。

在比较这两种方法时，由于自相关，您还需要调整方差。

您最好拟合干预模型，而不是尝试手动处理自相关。

# python - python内置函数与魔术函数和覆盖

> ID：13511386
> 
> 赞同：2
> 
> 时间：2012-11-22T11:07:00.327
> 
> 标签：python, overriding, magic-function

> **可能重复：**
> [拦截元类上的运算符查找](https://stackoverflow.com/questions/8637254/intercept-operator-lookup-on-metaclass)
> [如何拦截对新样式类中python“魔术”方法的调用？](https://stackoverflow.com/questions/9057669/how-can-i-intercept-calls-to-pythons-magic-methods-in-new-style-classes)

考虑以下代码：

```
class ClassA(object):
    def __getattribute__(self, item):
        print 'custom__getattribute__ - ' + item
        return ''
    def __str__(self):
        print 'custom__str__'
        return ''

a=ClassA()
print 'a.__str__: ',
a.__str__

print 'str(a): ',
str(a) 
```

输出让我感到惊讶：

```
a.__str__:  custom__getattribute__ - __str__
str(a):  custom__str__ 
```

*   不`str(a)`应该映射到魔术方法 `a.__str__()`吗？
*   如果我删除了 custom `ClassA.__str__()`，那么 `ClassA.__getattribute__()`仍然没有接听电话。怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:46:06.820

正如 user1579844 所链接的那样，正在发生的事情是新型类避免了 __getattribute__ 的正常查找机制，并在解释器调用它们时直接加载该方法。这样做是出于性能原因，因为这种神奇的方法非常普遍，以至于标准查找会严重降低系统速度。

当您使用点符号显式调用它们时，您将退回到标准查找，因此您首先调用 __getattribute__。

如果您在 python 2.7 中工作，则可以使用旧样式类来避免这种行为，否则请查看建议的线程中的答案以找到一些解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:07:00.593

当你打电话时

```
a.__str__ 
```

它被认为是

```
__str__ 
```

作为构造函数中的**项目**。

```
def __getattribute__(self, item):
        print 'custom__getattribute__ - ' + item
        return '' 
```

在这一行：

```
print 'custom__getattribute__ - ' + item 
```

# java - Java 静态变量更新

> ID：13511389
> 
> 赞同：5
> 
> 时间：2012-11-22T11:07:08.497
> 
> 标签：java, static, static-members

您可以在下面看到`counter`Java 类中的静态变量。

问题是这个变量什么时候会重置？例如，当我重新启动程序时，计算机。它可以重置的其他可能情况是什么？

另一个问题是：这个变量增加的次数少于函数 do() 执行次数的原因是什么？例如，是否可以启动类的多个进程`java Whatever`？或者它可能是具有多个线程/服务器等的东西？

```
class Whatever {

    static int counter = 0;

    function do() {
        counter++;
        //...
    }

} 
```

附加问题：如果多个线程执行函数do()，计数器变量将如何表现？它会少于函数 do() 执行的次数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:09:13.120

根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.1)：

> 如果一个字段被声明为静态的，那么无论最终创建多少个类的实例（可能为零），都只存在该字段的一个化身。静态字段，有时称为类变量，在类初始化时体现

所以这回答了你的第一个问题。iee 正是在加载类时:)

根据第二个问题，不。如果变量被声明为私有的。然后由于封装，唯一的访问是通过方法。

静态变量一直持续到 JVM 关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:09:09.633

重新启动应用程序时将重新初始化静态变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:10:46.647

`counter` is not a private variable. So it is possible that this value is changed by some other class.

This variable will get reset whenever your program (or specifically the container/jvm) is restated.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:10:35.250

1) The variable is set(reset) when the class is loaded. Apart from shutting down the JVM, some servers load the class in different applications (v.g., the Tomcat webapps) and some of them allow restarting them.

2) Concurrent modification by threads. But it should be rare, unless you use it a lot. Use `synchronized` for the function/block.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T11:13:48.267

> The question is when will this variable reset?

static variable can be reset using custom `reset()` method. If You say restart program, theoretically that variable will be initialized to it's value not reinitialized as it is not same(you restart program).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T12:05:02.923

静态变量意味着在程序执行期间该字段只有一个化身。它在类初始化时加载。

对于第二个问题，您的变量不是线程安全的，因为多个线程可以同时访问它。即使您的计数器不稳定，您仍然会面临并发问题。根据您的示例和要求，您有三个选项：

如果您唯一的要求是操纵变量并且其余代码不依赖于此，您可以使用同步（用大炮杀死苍蝇）或[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)（性能更好的选择）：

```
static synchronize int counter = 0;
// or
static AtomicInteger counter = new AtomicInteger(); 
```

如果您的其余代码依赖于您的计数器，则必须使用锁定对象或同步您的方法：

```
class Whatever {

    static int counter = 0;

    synchronize function do() {
        counter++;
        if(counter < 10){
            //  do something
        }
    }
}

//  or

class Whatever {

    static int counter = 0;
    static final Object _lock = new Object();

    function do() {
        synchronized (_lock) {
            counter++;
            if(counter < 10){
                //  do something
            }
        }
    }
} 
```

这是我现在脑海中的选项，但可能还有更多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T11:15:10.227

```
class Foo { // in same package
public static void main(String[] args) {
    Whatever w = new Whatever();
    for (int i = 0; i < 1000; i++) {
        w.do();
    }
    Whatever.counter = -1;
} 
```

这里`do()`被调用了 1000 次，但`counter`最后会有值。

我`do()`在您的示例中像您一样使用过，但请注意这**不是**有效的方法名称，因为它是 do while 循环的关键字。

# zend-framework - 重定向到同一页面后，flashMessanger 没有显示 zend 框架

> ID：13511392
> 
> 赞同：0
> 
> 时间：2012-11-22T11:07:23.310
> 
> 标签：zend-framework

我正在尝试使用 Zend Framework 中的此功能重定向到同一页面，但我没有收到我在此功能中设置的 Flash 消息有人请帮助我

但是如果在执行此代码后单击其他结果，我可以看到该错误消息。

提前致谢....

```
public function deleteAction()
{
    if( $this->_helper->getHelper('FlashMessenger')->getMessages()) {
        $this->view->message = $this->_helper->getHelper('FlashMessenger')->getMessages();
    }
    $this->_helper->viewRenderer->setNoRender(true);
    $this->_helper->layout()->disableLayout();
    if($this->getRequest()->getParam('id')){
        $surfaceReservation = Doctrine_Core::getTable('Model_Reservation')->findOneById($this->getRequest()->getParam('id'));
        if($surfaceReservation) $surfaceReservation->delete();
        $this->_helper->getHelper('FlashMessenger')->addMessage('Deleted Successfully');
    }
    $this->_redirect('/arena/surface/reservation');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:17:53.950

确保您的目标操作将消息分配给其视图。

```
if( $this->_helper->getHelper('FlashMessenger')->getMessages()) {
    $this->view->message = $this->_helper->getHelper('FlashMessenger')->getMessages();
} 
```

# ajax - 刷新页面 - AJAX 内容远离

> ID：13511397
> 
> 赞同：0
> 
> 时间：2012-11-22T11:07:46.823
> 
> 标签：ajax, cookies, refresh, reload

我有一个通过 ajax 动态加载内容的导航。但是，如果我刷新页面或访问另一个 url 并返回当前内容，我会在第一个菜单选项卡下看到旧内容。

解决此问题的最佳方法是什么？你能给我一些代码吗？

index.php 包括元素 navigation.inc.php 和 main_container.inc.php

```
<?php include("inc/incfiles/header_registrated.inc.php"); ?>
<?php
if (!isset($_SESSION["userLogin"])) {
echo "<meta http-equiv=\"refresh\" content=\"0; url=http://localhost/project\">";
}
else {
echo "";
}
?>
<?php include("inc/incfiles/navigation.inc.php"); ?>
<?php include("inc/incfiles/main_container.inc.php"); ?>
<?php include("inc/incfiles/footer.inc.php"); ?> 
```

导航.inc.php：

```
 <div class="navigation">

        <ul>
            <li id="1">
                <div id="menuImage1" class="menuImage"></div>
                <div class="menuText"><p>Punkt 1</p></div>

                <div class="navigationDart"></div>
            </li>
            <li id="2">
                <div id="menuImage2" class="menuImage"></div>
                <div class="menuText"><p>Punkt 2</p></div>
            </li>
            <li id="3">
                <div id="menuImage3" class="menuImage"></div>
                <div class="menuText"><p>Punkt 3</p></div>
            </li>
            <li id="4">
                <div id="menuImage4" class="menuImage"></div>
                <div class="menuText"><p>Punkt 4</p></div>
            </li>
            <li id="5">
                <div id="menuImage5" class="menuImage"></div>
                <div class="menuText"><p>Punkt 5</p></div>
            </li>
            <li id="6">
                <div id="menuImage6" class="menuImage"></div>
                <div class="menuText"><p>Punkt 6</p></div>
            </li>
        </ul>

    </div> 
```

main_container.inc.php：

```
<div class="mainContainer">

        <div class="containerHeader">

            <div class="contentHeader">

            </div>

        </div>

        <div class="contentContainer">

            <div class="content">

            </div>

            <div class="advertisement">

            </div>

        </div>

    </div> 
```

现在 div 内容、cnotentHeader 和广告（在文件 main_content.inc.php 中）通过 ajax 填充。此外，导航有一些 jquery 效果，在页面刷新后也必须相同。

```
$(document).ready(function() {
$.get('inc/incfiles/content_container/header/1.php', function(data) {
    $('.contentHeader').html(data);
}); 

$.get('inc/incfiles/content_container/content/1.php', function(data) {
    $('.content').html(data);
}); 

$.get('inc/incfiles/content_container/advertisement/1.php', function(data) {
    $('.advertisement').html(data);
}); 
var current = '1.php';
$(".navigation li").click(function() {
    var quelle = $(this).attr('id') + ".php";

    // the current content doesn't load again
    if(current === quelle) {
        return;
    }

    current = quelle;

    // content
    $(".content").fadeOut(function() {
        $(this).load("inc/incfiles/content_container/content/" + quelle).fadeIn('normal');
    })

    // advertisement
    $(".advertisement").fadeOut(function() {
        $(this).load("inc/incfiles/content_container/advertisement/" + quelle).fadeIn('normal');
    })

    // header
    $(".contentHeader").fadeOut(function() {
        $(this).load("inc/incfiles/content_container/header/" + quelle).fadeIn('normal');
    })

});

$(".navigation li").click(function() {
    $(".menuImage").removeClass("menuImageActive1");
    $(".menuImage").removeClass("menuImageActive2");
    $(".menuImage").removeClass("menuImageActive3");
    $(".menuImage").removeClass("menuImageActive4");
    $(".menuImage").removeClass("menuImageActive5");
    $(".menuImage").removeClass("menuImageActive6");
});

$("#1").mousedown(function() {
    $("#menuImage1").addClass("menuImageClick1"); // new class on mouse button press
});

$("#1").mouseup(function() {
    $("#menuImage1").removeClass("menuImageClick1");  //remove class after mouse button release
});

$("#1").click(function() {
    $("#menuImage1").addClass("menuImageActive1");
});

$("#2").mousedown(function() {
    $("#menuImage2").addClass("menuImageClick2"); // new class on mouse button press
});

$("#2").mouseup(function() {
    $("#menuImage2").removeClass("menuImageClick2");  //remove class after mouse button release
});

$("#2").click(function() {
    $("#menuImage2").addClass("menuImageActive2");
});

$("#3").mousedown(function() {
    $("#menuImage3").addClass("menuImageClick3"); // new class on mouse button press
});

$("#3").mouseup(function() {
    $("#menuImage3").removeClass("menuImageClick3");  //remove class after mouse button release
});

$("#3").click(function() {
    $("#menuImage3").addClass("menuImageActive3");
});

$("#4").mousedown(function() {
    $("#menuImage4").addClass("menuImageClick4"); // new class on mouse button press
});

$("#4").mouseup(function() {
    $("#menuImage4").removeClass("menuImageClick4");  //remove class after mouse button release
});

$("#4").click(function() {
    $("#menuImage4").addClass("menuImageActive4");
});

$("#5").mousedown(function() {
    $("#menuImage5").addClass("menuImageClick5"); // new class on mouse button press
});

$("#5").mouseup(function() {
    $("#menuImage5").removeClass("menuImageClick5");  //remove class after mouse button release
});

$("#5").click(function() {
    $("#menuImage5").addClass("menuImageActive5");
});

$("#6").mousedown(function() {
    $("#menuImage6").addClass("menuImageClick6"); // new class on mouse button press
});

$("#6").mouseup(function() {
    $("#menuImage6").removeClass("menuImageClick6");  //remove class after mouse button release
});

$("#6").click(function() {
    $("#menuImage6").addClass("menuImageActive6");
});

$("#1").click(function(){

    $(".navigationDart").animate({ 
        top: "16px"
            }, 500 );
    });
$("#2").click(function(){
    $(".navigationDart").animate({ 
        top: "88px"
            }, 500 );
    // Get the src of the image
    // var src = $(this).css("top");

    // Send Ajax request to backend.php, with src set as "img" in the POST data
    // $.post("/home.php", {"#2": top});
    });
$("#3").click(function(){
    $(".navigationDart").animate({ 
        top: "160px"
            }, 500 );
    });
$("#4").click(function(){
    $(".navigationDart").animate({ 
        top: "232px"
            }, 500 );
    });
$("#5").click(function(){
    $(".navigationDart").animate({ 
        top: "304px"
            }, 500 );
    });
$("#6").click(function(){
    $(".navigationDart").animate({ 
        top: "376px"
            }, 500 );
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:59:16.713

好的，在为您的 ajax 请求提供服务的 php 文件中，请添加以下行

```
// assuming that your contents can be stored in a variable $contents
$_SESSION['mycontent'] = $contents; 
```

现在，在您显示 ajax 响应的地方，添加以下代码行

```
if(isset($_SESSION['mycontent']) && !empty($_SESSION['mycontent']))
echo $_SESSION['mycontent']; 
```

确保您声明 session_start();

希望这会有所帮助！对不起！如果我无法理解您的问题的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:15:04.283

您可以使用会话。当您通过 ajax 加载内容时，将该响应存储到会话变量中，然后在导航中添加 if 条件 if(isset($_SESSION['ajaxresponse'])) 等。

# java - 使用 jax-ws 的肥皂请求中缺少前缀

> ID：13511402
> 
> 赞同：5
> 
> 时间：2012-11-22T11:07:51.880
> 
> 标签：java, wsdl, jax-ws

在一个 Java 项目中，我使用 jax-ws 和 wsdl 创建了一个 Web 服务客户端。该请求是有效的 xml，但缺少此特定肥皂调用所需的前缀。目前我通过手动将 xmlns={@javax.xml.bind.annotation.XmlNs(prefix="gen", namespaceURI="http://schemas...")}) 添加到 package-info.java 类来解决这个问题但觉得这不是最好的解决方案，因为包信息是自动创建的，如果出于任何原因再次生成源，我的解决方案将被覆盖。

我怀疑我的 wsdl 中缺少某些东西。

这是wsdl：

```
<?xml version="1.0" encoding="UTF-8"?>
    <wsdl:definitions xmlns:tns="http://xmlns.example.com/1308658932768" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns0="http://schemas.triennium.com/Servicepunt/gen" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" name="Untitled" targetNamespace="http://xmlns.example.com/1308658932768">
        <wsdl:types>
        <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns="http://schemas.triennium.com/Servicepunt/gen"
     targetNamespace="http://schemas.triennium.com/Servicepunt/gen"
     elementFormDefault="qualified"
     attributeFormDefault="unqualified">
            <xs:element name="CallInfo">
                <xs:complexType>
                    ...
                </xs:complexType>
            </xs:element>
            <xs:element name="ResponseStatus">
                <xs:complexType>
                    ...
                </xs:complexType>
            </xs:element>
            <xs:element name="Credentials">
                <xs:complexType>
                    ...
                </xs:complexType>
            </xs:element>
            <xs:element name="AuthenticateAannemerRequest">
                <xs:complexType>
                    ...
                </xs:complexType>
            </xs:element>
            <xs:element name="AuthenticateAannemerResponse">
                <xs:complexType>
                    ...
                </xs:complexType>
            </xs:element>
        </xs:schema>
    </wsdl:types>
    <wsdl:service name="WSDL_Generator.2.0.2">
        <wsdl:port name="AuthenticateAannemer.2.0.2" binding="tns:AuthenticateAannemer.2.0.2Binding">
            <soap:address location="http://10.11.2.12:2592"/>
        </wsdl:port>
    </wsdl:service>
    <wsdl:portType name="AuthenticateAannemer">
        <wsdl:operation name="AuthenticateAannemer">
            <wsdl:input message="tns:AuthenticateAannemerRequest"/>
            <wsdl:output message="tns:AuthenticateAannemerResponse"/>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="AuthenticateAannemer.2.0.2Binding" type="tns:AuthenticateAannemer">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <wsdl:operation name="AuthenticateAannemer">
            <soap:operation style="document" soapAction="/AuthenticateAannemer.2.0.2/AuthenticateAannemer"/>
            <wsdl:input>
                <soap:body use="literal" parts="input"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" parts="output"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:message name="AuthenticateAannemerRequest">
        <wsdl:part name="input" element="ns0:AuthenticateAannemerRequest"/>
    </wsdl:message>
    <wsdl:message name="AuthenticateAannemerResponse">
        <wsdl:part name="output" element="ns0:AuthenticateAannemerResponse"/>
    </wsdl:message>
</wsdl:definitions> 
```

这是没有前缀的请求：

```
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <AuthenticateAannemerRequest   xmlns="http://schemas.triennium.com/Servicepunt/gen">
            <CallInfo>
                <Customer>...</Customer>
                <Module>...</Module>
                <Version>...</Version>
            </CallInfo>
            <Credentials>
                <Username>...</Username>
                <Password>...</Password>
            </Credentials>
        </AuthenticateAannemerRequest>
    </S:Body>
</S:Envelope> 
```

这是我想要的请求：

```
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <gen:AuthenticateAannemerRequest xmlns:gen="http://schemas.triennium.com/Servicepunt/gen">
            <gen:CallInfo>
                <gen:Customer>...</Customer>
                <gen:Module>...</Module>
                <gen:Version>...</Version>
            </gen:CallInfo>
            <gen:Credentials>
                <gen:Username>...</Username>
                <gen:Password>...</Password>
            </gen:Credentials>
        </gen:AuthenticateAannemerRequest>
    </S:Body>
</S:Envelope> 
```

编辑：在第二个示例中为命名空间声明添加了前缀，它是从那里开始的，但是在 c/p 代码时不知何故丢失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:17:38.643

```
@XmlRootElement(namespace = "http://schemas.triennium.com/Servicepunt/gen")
public class AuthenticateAannemerRequest implements Serializable {

    private CallInfo callInfo;
    private Credentials credentials;

    public AuthenticateAannemerRequest() {
    }

    @XmlElement(namespace = "http://schemas.triennium.com/Servicepunt/gen")
    public CallInfo getCallInfo() {
        return callInfo;
    }

    public void setCallInfo(CallInfo callInfo) {
        this.callInfo = callInfo;
    }

    @XmlElement(namespace = "http://schemas.triennium.com/Servicepunt/gen")
    public Credentials getCredentials() {
        return credentials;
    }

    public void setCredentials(Credentials credentials) {
        this.credentials = credentials;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T21:40:16.273

您需要手动将 package-info.java 编译到类文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T17:56:21.767

如果从模式生成类，则可以添加 JAXB 绑定文件。

查看此[答案](https://stackoverflow.com/questions/27565031/xjc-binding-compiler-configuration-to-add-xmlns-element-to-the-package-info-clas)以获取该文件的模板，该模板指定架构默认命名空间的前缀。

然后在使用生成工具时指定附加的绑定文件。

**编辑**

您将使用的一个示例文件是：

```
<?xml version="1.0"?>
<jxb:bindings version="1.0"
              xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xmlns:namespace="http://jaxb2-commons.dev.java.net/namespace-prefix"
              xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd
              http://jaxb2-commons.dev.java.net/namespace-prefix http://java.net/projects/jaxb2-commons/sources/svn/content/namespace-prefix/trunk/src/main/resources/prefix-namespace-schema.xsd">

    <jxb:bindings>
        <jxb:schemaBindings>
            <jxb:package name="your-package-name-here" />
        </jxb:schemaBindings>
        <jxb:bindings>
            <namespace:prefix name="http://schemas.triennium.com/Servicepunt/gen" />
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

请记住在生成类时使用[jaxb-commons](http://java.net/projects/jaxb2-commons/)插件。

# oracle - Oracle NLS_SORT 在系统级别不起作用

> ID：13511404
> 
> 赞同：1
> 
> 时间：2012-11-22T11:08:00.513
> 
> 标签：oracle, sorting, oracle11g, nls

我正在使用 oracle 11g r2，并尝试将 DB 配置为使用语言排序进行排序。我做了

```
alter system set NLS_SORT='RUSSIAN' SCOPE=SPFILE;
alter system set NLS_COMP='LINUGUISTIC' SCOPE=SPFILE; 
```

在我重启oracle之后，我检查了这些参数：

```
show parameters NLS_SORT;
show parameters NLS_COMP; 
```

它向我展示了正确的价值观。但是当我进行排序时

```
select name from test order by name; 
```

它显示我的结果顺序不正确，即先是数字，然后是字母。

但如果我愿意

```
alter session set nls_sort='RUSSIAN';
alter session set nls_comp='LINGUISTIC';
select name from test order by name; 
```

它向我展示了正确的顺序。

有谁知道为什么系统更改没有显示正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:25:39.903

您可以设置不同级别的 NLS 参数

1.  作为实例/服务器上的初始化参数。

    ```
    SQL> alter system set V$NLS_PARAMETER = 'XXX' scope = both; 
    ```

2.  作为客户端上的环境变量。

    ```
    % setenv NLS_SORT FRENCH 
    ```

3.  作为 ALTER SESSION 参数。

    ```
    SQL> ALTER SESSION SET V$NLS_PARAMETER =  = 'XXX' 
    ```

任何设置都会覆盖更高级别的设置。因此，将其设置为服务器端并不能保证所有连接的客户端都使用该设置。

如果要确保为每个连接的客户端设置它，请使用登录触发器。即使这样，用户也可以显式覆盖“默认”设置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:27:21.820

[文档](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#g1012681)中显示了全球化设置的优先级。您在该列表中设置优先级 4，“在初始化参数文件中指定”。您没有设置优先级 1（“在 SQL 函数中显式设置”），当您设置优先级 2（“由 ALTER SESSION 语句设置”）时，您会得到所需的结果。通过排除过程，表明您的“不正确”顺序受到优先级 3“设置为环境变量”的影响。

您可以使用 . 检查会话实际使用的值`select * from nls_session_parameters`。

`NLS_SORT`环境变量可能没有直接设置；我怀疑它是从 派生的`NLS_LANGUAGE`，它是从 派生的`NLS_LANG`。如果您没有在操作系统环境中明确设置它，那么客户端通常会根据操作系统区域设置进行设置，尽管您使用的确切客户端可能会产生显着差异。`NLS_COMP`如果数据库默认值确实被覆盖，您可能需要显式设置环境变量。

例如，SQL Developer 允许您在首选项中指定 NLS 设置（从 Tools->Preferences->Database->NLS 访问）；默认值似乎基于操作系统设置，无论如何在 Windows 中。对于 SQL*Plus，您需要设置操作系统环境变量。

这也意味着，如果你让它在一个地方工作——比如说，当从 SQL Developer 运行时查询给出正确的顺序——它们在其他地方使用时可能无法工作，比如通过有自己的语言环境设置的 JDBC。只是需要注意的事情。

蛮力方法可能是将`alter session`命令添加到登录触发器，但这听起来并不理想，因为它只是掩盖了环境配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:19:51.560

您在第二个“ALTER SYSTEM”命令（LINUGUISTIC 而不是 LINGUISTIC）中有错字。

如果您的实际命令不包含此错误，我将检查您的客户端是否将 NLS 会话参数设置为其他值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T11:34:24.703

无论系统设置如何，我都会尽一切努力确保您的应用程序完全指定它们所需的 NLS 环境。它更加健壮，特别是当您需要将应用程序代码指向可能是新设置或与其他系统共享的不同环境时。

事实上，我想说的是，您最好不要使用设置系统级环境设置。

# objective-c - 在Objective-C中从电话号码的国家代码中删除零

> ID：13511408
> 
> 赞同：0
> 
> 时间：2012-11-22T11:08:12.167
> 
> 标签：objective-c, ios5, nsstring, phone-number, country-codes

我想从电话号码的国家代码中删除前面的零。我把它当作 NSString 因为电话号码包含诸如 + 、 ( 、 ) 、 - 之类的符号。我需要那些符号。

例如

输入：-

```
1) NSString *phNo = @"0011234567890";
2) NSString *phNo2 = @"0601234567999"; 
```

输出：-

```
1) 11234567890
2) 601234567999 
```

我所做的如下

```
if ([phNo length]>10) {
        NSString *countryCodeSubString = [phNo substringToIndex:[phNo length]-10];
        if ([[countryCodeSubString substringToIndex:1]isEqualToString:@"0"]) {
            for (int i=0; i<[countryCodeSubString length]; i++) {
                NSString *str = [countryCodeSubString substringToIndex:i];
                if ([str isEqualToString:@"0"]) {
                    str = [str stringByReplacingOccurrencesOfString:@"0" withString:@""];
                }

            }
        }
    } 
```

我知道上面的代码是错误的。有人可以帮我吗？我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:14:58.233

```
int firstNonZeroCharIndex = -1;
for (int i=0; i<phNo.length; ++i) {
    if ([phNo.characterAtIndex:i] != '0') {
        firstNonZeroCharIndex = i;
        break;
    }
}

if (firstNonZeroCharIndex != -1) {
    phNo = [phNo subStringFromIndex:firstNonZeroCharIndex];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:15:42.253

如果你只是想去掉前面的零，那么你可以像这样简单地做。

```
NSString *phNo = @"0011234567890";
float number = [phNo floatValue];
NSString *phNoWithOutZero = [NSString stringWithFormat:@"%1.0f", number]; 
```

但这将不起作用，因为字符串除了数字之外有任何特殊字符。

# jquery - jquery 对话框和可选择的

> ID：13511411
> 
> 赞同：0
> 
> 时间：2012-11-22T11:08:16.583
> 
> 标签：jquery, jquery-ui, jquery-plugins

我有一堆显示文本的 div。

我已将这些设为可选，我最理想的做法是能够更改所选 div 的文本字体大小。

我有一个对话框，该对话框具有一个基本表单，其中包含选择列表中的字体大小，但我正在努力寻找一种方法来实际定位对话框中的可选项。

```
$(function(){
    $('#template_inner').selectable({
           selected: function(event, ui){
            console.log(ui);
            // displays the HTML in the console

        }
    })

$( "#font-size-form" ).dialog({
    autoOpen: false,
    height: 200,
    width: 270,
    modal: true,
    position: ['top', 200],
    buttons: {
        "Select": function() {
        },
        Cancel: function() {
            $( this ).dialog( "close" );
        }
    },
    close: function() {
    }
});

   $( ".font-size" )
       .button()
       .click(function() {
           $( "#font-size-form" ).dialog( "open" );
   });
});

<div id="font-size-form" title="Choose Font Size">
    <form action="" method="">
        <p>Please choose your font-size</p>
        <div class="">
            <select name="size">
                <option value="8">8</option>
                <option value="12">12</option>
                <option value="14">14</option>
                <option value="16">16</option>
                <option value="18">18</option>
                <option value="20">20</option>
                <option value="22">22</option>
                <option value="24">24</option>
                <option value="26">26</option>
                <option value="28">28</option>
                <option value="30">30</option>
                <option value="32">32</option>
            </select>
        </div>

    </form>
</div> 
```

所以，当我点击div，然后点击打开字体大小对话框，选择字体大小，我想改变div中文字的字体大小。

这可能吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:27:54.683

如果您只需要记住页面期间的选择，那么您可以将字体大小保存为可选择项上的数据（请参阅[文档）。](http://api.jquery.com/category/data/)

```
//in your dialog
"Select": function() {
  $('#template_inner .ui-selected').css('font-size', $('select[name="size"]').val() + 'px');
  $('#template_inner').data('fontSize', $('select[name="size"]').val());
}

//on your selectable
$('#template_inner').selectable({
  selected: function(event, ui){
    var defaultSize = 22;
    // Get the saved value or default on new selects.
    var size = $('#template_inner').data('fontSize') || defaultSize;
    $(ui.selected).css('font-size', size + 'px');
  }
}) 
```

# java - 在 Eclipse Indigo 的 Blackberry 插件中使用 Web 服务

> ID：13511413
> 
> 赞同：0
> 
> 时间：2012-11-22T11:08:26.317
> 
> 标签：java, eclipse-plugin, blackberry-simulator, blackberry-eclipse-plugin

[我在使用由http://www.transmodallimited.com](http://www.transmodallimited.com)托管的 asp.net/vb.net 编写的 Web 服务时遇到问题。编写代码后，我发现该应用程序并没有真正访问 Web 服务。因此，为了确定，我使用 httpconnection 演示进行了测试，发现即使 httpconnection 演示也无法正常工作。我尝试打开 MDS，尝试将 ';deviceside=true' 添加到我的链接中，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:11:39.600

如果您想使用**KSOAP2**，您可以使用此链接[BlackBerry and Ksoap2 Tutorial](http://www.blackberryforums.com/developer-forum/155972-blackberry-ksoap2-tutorial.html)。另请参阅支持论坛[Consuming .NET Web Service With BlackBerry JDE 4.6、Java Wireless Toolkit 和 KSOAP](http://supportforums.blackberry.com/t5/Java-Development/Consuming-NET-Web-Service-With-BlackBerry-JDE-4-6-Java-Wireless/td-p/61288)上的此线程。如果您想使用`jsr-172 compliant stub`，可以使用[Calling a Webservice from Blackberry Java Application](http://blog.bayestech.com/?p=78)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T00:27:33.583

我强烈建议您使用任何像 Wireshark 这样的嗅探器工具来跟踪任何 HTTP/XML 包，如果没有任何 HTTP/XML 包，并且您的 MDS 在您运行应用程序之前正在运行，那么问题可能出在您的代码。

# sql - 用于存储键值对的一个或多个表？

> ID：13511418
> 
> 赞同：0
> 
> 时间：2012-11-22T11:08:43.227
> 
> 标签：sql, database-design, key

我试图在这两种表设计之间进行选择，性能优先（使用关节查询）

多个表：每个项目（或键）都有自己的表

```
CREATE TABLE users_languages (
    "user_id" bigint not null,
    "language" integer not null,
    primary key ("user_id", "language"),
    foreign key ("user_id") references users ("user_id") on delete cascade
); 
```

一张 KVP 表：包含所有项目/键

```
CREATE TABLE users_kvp (
    "user_id" bigint not null,
    "key" varchar not null, -- could be "language" or other
    "value" integer not null,
    primary key ("user_id", "key", "value"),
    foreign key ("user_id") references users ("user_id") on delete cascade
); 
```

我认为对于大多数操作来说最后一个会更慢，对吗？如果是，多少和何时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:14:28.663

从对该问题的评论来看，标准化的关系数据结构似乎最适合您的要求。这样的表结构可能类似于：

```
Users
-----
UserID (PK)
UserName
... (other attributes)

Languages
---------
LanguageID (PK)
LanguageName

UserLanguage
------------
UserID (PK)
LanguageID (PK) 
```

您*可以*将所有用户的语言放到用户表中（如 Language1、Language2 等），但这将是非[规范化](http://en.wikipedia.org/wiki/Denormalisation)的一个示例- 在我看来，从提供的信息来看，这不适合您的要求。

# java - Java TargetDataLine 和 SourceDataLine 重新打开不起作用

> ID：13511419
> 
> 赞同：1
> 
> 时间：2012-11-22T11:08:56.997
> 
> 标签：java, audio, applet, javasound

我的设置如下：

我有一个在记录和播放音频的浏览器中运行的 Java 小程序。

我的问题是：

当我刷新浏览器时，SourceDataLine 会在刷新后正确重新打开，而 TargetDataLine 不会自行重新打开。

```
public void init() {
    try {
        DataLine.Info sourceDataLineInfo = new DataLine.Info(
                SourceDataLine.class, audioFormat);
        DataLine.Info targetDataLineInfo = new DataLine.Info(
                TargetDataLine.class, audioFormat);

        // Setup a Line.Info instance specifically of the TargetDataLine class.
        Line.Info targetDLInfo = new Line.Info(TargetDataLine.class);
        Mixer.Info[] mixerInfo = AudioSystem.getMixerInfo();
        Mixer currentMixer = null;

        try {

            for(int cnt = 0; cnt < mixerInfo.length; cnt++) {
                // Get a temporary instance of the current mixer
                currentMixer = AudioSystem.getMixer(mixerInfo[cnt]);

                if( currentMixer.isLineSupported(targetDLInfo) ) {
                    Log.log("Found mixer:" + mixerInfo[cnt].getName());
                    System.out.println(mixerInfo[cnt].getName());
                    break;
                }

                //currentMixer = null;

            }
        }   catch(Exception e)  {
            Log.log("Found no mixer");
        }

        if(!Client.refresh) {

            try {
                sourceDataLine = (SourceDataLine) AudioSystem
                        .getLine(sourceDataLineInfo);
            }catch(Exception e){
                Log.log("Unable to stream audio not starting playthread");
            }

            play = new PlayThread();

            if(sourceDataLine != null)  {
                sourceDataLine.open(audioFormat);
                sourceDataLine.start();

                play.start();
            }

                try {
                    targetDataLine = (TargetDataLine) currentMixer.getLine(targetDataLineInfo);
                }catch(Exception e) {
                    connection.addMessage("[WARNING] Your microphone is not working.");
                }

            capture = new CaptureThread();

            if(currentMixer != null)    {   
                if(targetDataLine != null)  {

                        targetDataLine.open(audioFormat);
                        targetDataLine.start();
                        capture.start();
                }
            }else   {
                connection.addMessage("[WARNING] No compatible microphone found.");
                Log.log("Not able to record data since no mixer was found");
            }

        } else {
            sourceDataLine.open(audioFormat);
            sourceDataLine.start();
            targetDataLine.open(audioFormat);
            targetDataLine.start();
        }

        } catch (Exception e) {
            Log.log("An exception occured when trying to startup the audio");
        }

} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:28:03.163

正如安德鲁所说，您需要关闭打开的 sourceDataline 和 TargetData 行。当您刷新浏览器时，会再次调用 init()，因为它是您的 applet 的新实例。如果数据线已经打开并且您尝试再次打开它，则会抛出异常“不支持行：audioFormat”。由于每次结束 applet 实例时都会调用 destroy()，因此您需要处理其中打开的数据线的关闭。

# python - Python Popen 无法在 CentOS/Red Hat 中打开 bash shell

> ID：13511422
> 
> 赞同：0
> 
> 时间：2012-11-22T11:09:05.457
> 
> 标签：python, bash, centos, debian, redhat

我无法在 CentOS 中使用 python 2.7 打开 bash shell，我可以在 python 2.6.6 Debian 中这样做。发生了什么变化？

我尝试了一个简单的 bash 进程替换：

```
from subprocess import Popen
cmd="""cat <<'EOF'
this is
test $unchanged
EOF
"""
Popen('cat <(%s)' % cmd, shell=True, executable='/bin/bash') 
```

在 Debian 中这是可行的，在 CentOS 中则不行：

```
/bin/sh: -c: line 0: syntax error near unexpected token `('
/bin/sh: -c: line 0: `cat <(cat <<'EOF'' 
```

区别在于：

*   **Debian**：Python 2.6.6，`/bin/sh`由 dash 提供。
*   **CenOS** (Red Hat)：Python 2.7，`/bin/sh`由 bash 提供

所以在 CentOS 中`executable=/bin/bash`根本没有被尊重。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:50:57.487

如果你在参数中写 /bin/bash 怎么办？

```
Popen(['/bin/bash', '-c', 'cat <(%s)' % cmd]) 
```

# jquery - Ajax/Jquery 脚本不适用于某些用户

> ID：13511426
> 
> 赞同：1
> 
> 时间：2012-11-22T11:09:11.540
> 
> 标签：jquery, ajax

以下是我在网站上用于发送即时消息的脚本。它在 99.9% 的情况下都能正常工作，但有时一些用户报告说他/她无法发送消息。今天我收到了一份来自 MIE 8.0 用户的新报告。我检查了服务器的日志文件，发现 MIE 8.0 忽​​略了这个脚本。当用户单击“发送”按钮时，浏览器将 GET 请求连同所有表单数据发送到表单所在的同一文件，而不是 POST 请求。该用户说几天前一切正常。我没有更改文件中的任何内容，并且我认为该用户几天前没有将 MIE 升级到 8.0（最新版本是 9.0）。我有这个问题超过3年。报告此问题的用户并不多，但无论如何我想找到解决方案。

任何想法可能导致此问题？谢谢。

```
<script type="text/javascript">                                         
$(document).ready(function(){
$("#sendmessage").submit(function(){
    $("#note1").show().html('<div style="text-align: center;">Sending</div>');
    var str = $(this).serialize();
    $.ajax({
        type: "POST",
        url: "/messages.php?do=send",
        data: str,
        success: function(data) {
            if (data == "ERR1") {
                result = '<div class="red">Error1 1</div>';
                $(this).html(result);
            } 
            else if (data == "ERR2") {
                result = '<div class="red">Error2</div>';
            } 
            else {                              
                $("#fields").hide();
                result = data;
            }
            $('#note1').hide();
            $("#note").hide();
            $("#note").fadeIn(1000).html(result);
        }
    });
    return false;
  });
});
</script>

<form id="sendmessage" name="sendmessage" onsubmit="doCheck();">
...
<textarea></textarea>
...
<input type="submit" value="Send" onclick="doCheck();" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:22:34.833

查看[这篇文章](https://stackoverflow.com/questions/12195883/jquery-ajax-is-sending-get-instead-of-post)，看看解决方案是否对您有帮助。该用户说他的 URL 格式导致了 GET 而不是您所怀疑的 POST。试试这个网址：

```
url: "/messages/?do=send" 
```

或者

```
url: "/messages.php?do=send" 
```

或者任何适当的扩展名取决于您的后端语言。

# actionscript-3 - 从 AS2 到 AS3 的游戏转换

> ID：13511429
> 
> 赞同：1
> 
> 时间：2012-11-22T11:09:15.903
> 
> 标签：actionscript-3, actionscript-2

我有一个非常简单的射手的例子。但它在 AS2 上。这里的来源：

```
 speed = 4;
 depth = 0;
 nose = 50;

        _root.onMouseMove = function() {
        updateAfterEvent();
        xdiff = _root._xmouse-spaceShip._x;
        ydiff = _root._ymouse-spaceShip._y;
        angle = Math.atan2(ydiff, xdiff);
   angle = angle*180/Math.PI;
    spaceShip._rotation = angle;
};

_root.onMouseDown = function() {
angle = spaceShip._rotation;
angle = angle*Math.PI/180;
++depth;
name = "projectile"+depth;
_root.attachMovie("projectile", name, depth);

//projectile - it is bullet
_root[name]._x = spaceShip._x+nose*Math.cos(angle);
_root[name]._y = spaceShip._y+nose*Math.sin(angle);
_root[name].xmov = speed*Math.cos(angle);
_root[name].ymov = speed*Math.sin(angle);
_root[name].onEnterFrame = function() {
 this._x += this.xmov;
 this._y += this.ymov;
};
  }; 
```

我也想做同样的事情，但是在 as3 中。

我试图转换。这是我所拥有的： PS - 我是新手，请不要对下面的代码生气:)

```
 var nose=55;
     var angle;
     var acc=1;
  Mouse.hide();
  stage.addEventListener(MouseEvent.MOUSE_MOVE, cursor);
    function cursor(e:MouseEvent):void {
      cross.x=mouseX;
      cross.y=mouseY;
   }
      stage.addEventListener(Event.ENTER_FRAME, rotation2);
    function rotation2(event:Event):void {
  var xdiff=mouseX-spaceShip.x;
  var ydiff=mouseY-spaceShip.y;
 angle=Math.atan2(ydiff,xdiff);
 angle=angle*180/Math.PI;
   spaceShip.rotation=angle;
  }
   stage.addEventListener(MouseEvent.CLICK, shoot);
    function shoot(event:MouseEvent):void {

  angle = spaceShip.rotation;
  angle = angle*Math.PI/180;

bullet.x=spaceShip.x+nose*Math.cos(angle);
bullet.y=spaceShip.y+nose*Math.sin(angle);
  var xmov=acc*Math.cos(angle);
  var ymov=acc*Math.sin(angle);

 stage.addEventListener(Event.ENTER_FRAME, action);
  function action(event:Event):void {
bullet.x+=xmov;
bullet.y+=xmov;
  }
 } 
```

1.  子弹出现，但只有一次，并没有走上正轨。
2.  如上例所示，如何做到这一点会有很多子弹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:35:18.633

**`attachMovie()`不一样`addChild()`。**

*   `MovieClip.attachMovie()`创建一个新符号并将其添加到`MovieClip`
*   `DisplayObjectContainer.addChild()`将指定的添加`DisplayObject`到容器中

而不是调用（在 AS2 中）：

```
_root.attachMovie("projectile", name, depth); 
```

你应该使用这样的东西（在 AS3 中）：

```
var proj:DisplayObject = new projectile();
proj.name = "projectile" + depth;
stage.addChild(proj); 
```

请注意，`depth`AS3 中没有。
您可以使用`addChildAt()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:18:07.863

感谢您的快速回复。我这样解决问题：

我添加了这个：

```
 var bullet1:Bullet = new Bullet ();
 addChild (bullet1); 
```

并更改了“bullet1”下面的所有“bullet”。

程序现在工作正常。

# mono - 单声道新手。已安装但未设置环境变量..可能缺少东西

> ID：13511432
> 
> 赞同：3
> 
> 时间：2012-11-22T11:09:28.670
> 
> 标签：mono

我只是安装单声道来了解它是如何工作的。

我第一次安装了单声道（mono-2.10.9-gtksharp-2.12.11-win32-0.exe），并开始通过单声道基础页面来验证安装。

[http://www.mono-project.com/Mono_Basics](http://www.mono-project.com/Mono_Basics)

我很惊讶安装程序没有设置**PATH**环境变量，但是一旦我完成了，我就能够编译/运行第一个示例。

但是我在第二个示例中遇到了编译错误。所以想知道我是否缺少更多的环境变量/设置？mono 使用的环境变量是否记录在任何地方？

我也只是想知道安装程序是否正常或者我应该寻找另一个...错误消息如下：

> C:\Users\Vida\Desktop\Learning\Mono>gmcs hello.cs -pkg:gtk-sharp-2.0
> 
> 错误 CS2001：找不到源文件“文件”
> 
> 错误 CS2001：找不到源文件`(x86)/Mono-2.10.9/lib/mono/gtk-sharp-2.0/pango-sharp.dll'
> 
> 错误 CS2001：找不到源文件`(x86)/Mono-2.10.9/lib/mono/gtk-sharp-2.0/atk-sharp.dll'
> 
> 错误 CS2001：找不到源文件`(x86)/Mono-2.10.9/lib/mono/gtk-sharp-2.0/gdk-sharp.dll'
> 
> 错误 CS2001：找不到源文件`(x86)/Mono-2.10.9/lib/mono/gtk-sharp-2.0/gtk-sharp.dll'
> 
> 错误 CS2001：找不到源文件`(x86)/Mono-2.10.9/lib/mono/gtk-sharp-2.0/glib-sharp.dll'
> 
> 编译失败：6 个错误，0 个警告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:01:35.380

听起来有些组件被`Program Files (x86)`（可能是安装目录）中的空格弄糊涂了。尝试`PATH`使用它的短名称（通常`Progra~2`）设置，或重新安装到没有空格的目录。您也可以尝试另外设置`MONO_PATH`环境变量。

# google-drive-api - 我可以使用嵌入网站的 Google Drive 的编辑器界面吗？

> ID：13511434
> 
> 赞同：0
> 
> 时间：2012-11-22T11:09:34.630
> 
> 标签：google-drive-api

我想使用 google drive 来存储文件，但允许我网站的用户能够透明地编辑它们，这样他们就不必去 google drive 的网站。

当前的 API 可以做到这一点吗？到目前为止，我只看到了如何为他们创建一个应用程序以安装在谷歌驱动器中，或者执行类似 DrEdit (https://developers.google.com/drive/examples/) 之类的操作，它将文件解析为 JSON 并使用ACE 编辑器，这绝对不是我想要的。

**编辑：**

我相信使用 Google Drive 无法做到这一点，我决定改用 Zoho Docs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:32:02.947

是的，这是可能的。最大的考虑是您想要支持多少格式。例如。如果是纯文本，则非常简单。如果要支持字符或布局格式，它会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:57:15.397

我不相信使用 iframe 嵌入编辑器（甚至嵌入预览！）是可能的，因为如果您查看 google 文档页面的加载方式，它首先会将您重定向到登录页面，然后自动登录如果您已经登录，并将您重定向回文档编辑器。

这意味着 iframe 至少必须通过登录页面，即使用户不需要输入任何内容。但是，google 的登录页面将 x-frame-option 标头设置为 SAMEORIGIN（或拒绝？），因此浏览器拒绝显示它，因此您实际上无法登录！

我发现启用预览嵌入（而不是编辑）的唯一方法是首先发布文档（通过文件->发布到网络菜单项）。

# c++ - 在 STL 中，如何交换二维向量

> ID：13511437
> 
> 赞同：1
> 
> 时间：2012-11-22T11:09:42.973
> 
> 标签：c++, stl

在头文件中，我将以下内容声明为公共成员变量：

```
vector< vector<unsigned char> > arImage; 
```

在源代码中，我定义了 temp

```
vector<vector<unsigned char> > temp (numImage, vector<unsigned char>(sizeImage)); 
```

现在我尝试，

```
temp.swap(arImage); 
```

但是发生了错误。（因为不是英文，所以省略了细节错误）

```
 with
    [
        _Ty=std::vector<unsigned char>
    ] 
```

//////////// 添加，，，，，，，，

我想换

```
 vector<vector<unsigned char> > to vector<vector<unsigned char> > 
```

我正在使用 MFC。我找不到合适的方法，所以我实际上采取了另一种方法。

在头文件中，

```
 vector< vector<unsigned char> > * arImage; 
```

在源代码中，

```
 arImage = new vector< vector<unsigned char> > (numImage, vector<unsigned char>(sizeImage)); 
```

但是这种方法不舒服。（这种方法没有错误）

我想使用 arImage[i][j]。

在这种方法中，我必须使用 (*arImage)[i][j]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:13:12.797

您必须选择必须在您的中交换的索引`temp`：

```
int index = 0;
temp[index].swap(arImage); 
```

您将 temp 声明为向量的向量 (2D)。因此交换将使用相同类型的变量（这是合乎逻辑的）执行。但是你尝试用一维向量交换有什么问题，这就是编译器对你说的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:26:48.490

您在这里做错的事情是您试图与不可能`vector< unsigned char >`的向量进行交换。`vector< unsigned char >`

`Vector arImage`有类型的项目，`unsigned char`而临时类型是`vector<vector<unsigned char> >`临时项目`vector<unsigned char>`。

所以它是有道理的，因为不能`vector<unsigned char>`与`unsigned char`. 同样，您不能`vector< unsigned char >`与`vector <vector< unsigned char >>`.

我希望它能解释一切。

# eclipse - Eclipse 工作区和 Git 文件夹布局

> ID：13511439
> 
> 赞同：0
> 
> 时间：2012-11-22T11:09:52.700
> 
> 标签：eclipse, git, git-svn, egit, subdirectory

我正在从 Eclipse/SVN 迁移到 Eclipse/Git，但我不确定最好的目录布局是什么。我查看了[Vogel/a](http://www.vogella.com/articles/EGit/article.html#firstegit_shareproject)指南、[Eclipse Wiki](http://wiki.eclipse.org/EGit/User_Guide#Considerations_for_Git_Repositories_to_be_used_in_Eclipse)以及以下主题：[将 Git 存储库保留在 Eclipse 工作区内部还是外部更好？](https://stackoverflow.com/questions/10531272/is-it-better-to-keep-git-repository-inside-or-outside-of-eclipse-workspace/13510689#13510689) [我应该将 git 存储库存储在 Home 还是 Eclipse Workspace 中？](http://www.vogella.com/articles/EGit/article.html#firstegit_shareproject)

我习惯于像这样设置eclipse：

```
~/projectA/workspace/.metadata
~/projectA/workspace/subproj1/.project
~/projectA/workspace/subproj2/.project
~/projectA/subproj1/.svn
~/projectA/subproj1/file1
~/projectA/subproj2/.svn
~/projectA/subproj2/file2 
```

所以该项目包含我需要的所有项目相关文件。工作区文件夹包含相对较少的数据，例如本地修订信息、项目描述和特定的 Eclipse 设置。subproj 文件夹包含所有源代码以及颠覆元信息。子项目或多或少是相关的，但它们都对项目A有贡献。eclipse工作目录为~/projectA/subproj1、~/projectA/subproj2等。

我不完全确定我是否可以使用与 Git 或多或少相似的布局。最大的区别是'repo'目录。

```
~/projectA/workspace/.metadata
~/projectA/workspace/subproj1/.project
~/projectA/workspace/subproj2/.project
~/projectA/subproj1/.git
~/projectA/subproj1/file1
~/projectA/subproj2/.git
~/projectA/subproj1/file2
~/projectA/repo/subproj1
~/projectA/repo/subproj2 
```

如果我像下面这样设置它，我是否仍然遵守[Wiki](http://wiki.eclipse.org/EGit/User_Guide#Considerations_for_Git_Repositories_to_be_used_in_Eclipse)中提到的最佳实践？

@eugener 我会假设以下布局符合 Egit 手册？：

```
~/projectA/workspace/.metadata
~/projectA/workspace/subproj1/.project
~/projectA/workspace/subproj2/.project
~/projectA/subproj1/.git
~/projectA/subproj1/file1
~/projectA/subproj2/.git
~/projectA/subproj1/file2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:12:36.523

我建议遵守 EGit Wiki 仅仅是因为 Git 的工作方式。

Git 的重点是快速分支和合并，这是在存储库的工作区中完成的，其位置固定在你的存储库所在的文件夹中。实际存储库位于 .git 文件夹的下一层。

当 Eclipse 中的项目与 Git “共享”时，所有文件都会自动从创建项目的 Eclipse 工作区移动到与之共享的 git 存储库的位置。所以 Eclipse 中的项目只是一个捷径。分支切换会替换 Git 工作区中的文件，这些文件会自动反映在 Eclipse 中。

# combobox - 如何过滤vb中的组合框值

> ID：13511442
> 
> 赞同：1
> 
> 时间：2012-11-22T11:10:01.773
> 
> 标签：combobox

我是 VB 的新手。我有一个保单号。VB 中的组合框在我输​​入保单编号的前四位数字后填充。但是，如果我继续输入数字，它会覆盖我已经输入的内容并清除下拉列表，就像选择我输入的新 4 个数字一样。我想实现一个场景，我将输入前 4 个数字以填充下拉列表，然后我继续输入 policyno 下拉列表中的值被搜索。

EG：保单号：969003648，当我输入 9690 时，下拉列表中填充了从 969000001 开始的保单号，现在当我继续键入 969003 等值时，搜索的值被限制为以 969003 作为起始值的保单号...请协助

我的代码：

```
Private Sub PolicyNo_KeyDown(KeyCode As Integer, Shift As Integer)

If KeyCode = 46 Or KeyCode = 8 Then
Me.PolicyNo.value = ""
Else

If Len(Me.PolicyNo.Text) >= 4  Then
Me.PolicyNo.RowSource = ""
Call ReloadPolicyNo(Nz(Me.PolicyNo.Text, ""))

Function ReloadPolicyNo(sPolicyNo As String)

Me.PolicyNo.RowSource = "SELECT Inventory.PolicyNo FROM Inventory " & _
                          "WHERE Left(Inventory.PolicyNo," & Len(Me.PolicyNo.Text) & ")  = '" & Me.PolicyNo.Text & "' order by Inventory.PolicyNo"
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:51:43.550

为什么不使用组合框上的 Textchanged 事件来获取组合框中当前的内容？

例子

```
 'THIS FIRES WHEN TEXT IS ENTERED INTO THE COMBOBOX
Private Sub ComboBox1_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.TextChanged

    'GET VALUE IN COMBOBOX
    Dim enteredText As String = ComboBox1.Text
    Dim strSelect As String = "select * from table where field like = '" & enteredText & "'%"

    'load COMBO BOX HERE

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T02:00:41.710

最好在`DataView`这里使用，我声明`DataTable`为`class Variable`。

```
Dim dt as DataTable 
```

从数据库中获取所有数据并将其绑定到声明`DataTable`中，这`DataTable`进一步添加到过滤器中`DataView`使用。 是我下面的代码中的一列将过滤和绑定数据，其中列`RowFilter``DataView``Compay_Type``DataTable``DataView``Company_Type=1`

```
 Dim dvComp As New DataView(dt)
            dvComp.RowFilter = "Company_Type=1"
            ComboBox1.DisplayMember = "CompanyName"
            ComboBox1.ValueMember = "CompanyID"
            ComboBox1.DataSource = dvComp 
```

要删除过滤器，只需使用`dvComp.RowFilter = Nothing`

# image - html5 doctype 图像填充-底部错误

> ID：13511443
> 
> 赞同：1
> 
> 时间：2012-11-22T11:10:04.537
> 
> 标签：image, html, doctype

我已经制作网站几年了，但直到最近我才开始使用 html5 文档类型，今天我发现了将 4px 的 padding-bottom 添加到图像的行为。

如果将 doctype 更改为 xhtml1.0，则填充消失

这是一个简单的例子：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Technic-Al</title>
    <style>
html, body {
margin:0;
padding:0;
}
#contain {
width: 900px;
background-color:#6C0;
}
</style>
</head>

<body>
<div id="contain">
<img src="images/head.gif" width="900" height="100" border="0" alt="head">
</div>
</body>
</html> 
```

将 doctype 更改为其他任何一个都会删除底部填充（背景中的绿色）

很多人来这里建议修复

行高=0

我相信还有另一个修复方法也有效。

或者我应该说“变通”

但这肯定是 html5 文档类型的错误吗？

我们该和谁谈谈？谁处理这样的错误？我们如何修复它？

这里有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T11:59:17.937

我遇到了页面在页面底部显示填充的问题

```
img { display:block ; } 
```

上面写在css文件中解决了我的问题。希望这有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T13:47:38.687

这不是一个错误，它是 CSS 规范所说的应该发生的事情。它不是 HTML5 特定的，`HTML 4.01 strict`和`XHTML 1.0 strict`doctypes 会做同样的事情。

它不是填充 - 它是行框计算高度的结果。

没有希望改变它，太多的网页依赖于现有的行为。

相应的权威是[W3C CSS 工作组](http://www.w3.org/Style/CSS/members)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:12:53.617

Use the `vertical-align` property in your css :

```
img{
    vertical-align:top;
} 
```

# iphone - 使用大中央调度的澄清

> ID：13511446
> 
> 赞同：0
> 
> 时间：2012-11-22T11:10:17.173
> 
> 标签：iphone, cocoa, grand-central-dispatch

我有四个操作要做如下

1.  启动活动指示器。
2.  做一些计算。（在 bg 线程中）
3.  将结果保存在 xml 中。（在 bg 线程中）
4.  停止活动指示器。

现在我在 GCD 中做这些操作如下。

```
[self showAlert];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    [self calculateValues];

    dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        [utility createXMLWithName:name];

        dispatch_sync(dispatch_get_main_queue(), ^{
            [self hideAlert];
        });
    });
}); 
```

我想确认这是在 GCD 中执行此操作的正确方法吗？我需要 bg 中的任务 2 和 3，并且任务 3 应该仅在任务 2 完成后发生。为此，我将任务 2 和 3 放在单独的队列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:33:32.890

我认为它会起作用，但我不确定这是最好的方法。我已经发布了一些关于并发编程的文章，你可能会觉得它对你的问题很有趣，你可以看看。[Objective C 中的并发编程](http://www.blogger.com/blogger.g?blogID=860878781437960491#editor/target=post;postID=6483235981771992156)

通常，如果您想确保仅在其他线程完成工作后才运行线程，则可以使用：
[NSObject performSelector: onThread: withObject: waintUntilDone:YES]; .

（你可以使用 NSOperation 但它似乎是你需要的开销）

但在你的情况下，我真的不明白为什么你需要任务 3 的第二个后台线程，如果你只想在任务 2 完成时运行它。你不能把任务 2 然后 3 做对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:38:53.107

是的，这很好。请注意，如果您的应用程序在正常或高优先级队列中始终处于活动状态，您的`createXMLWithName:`调用可能会大大延迟，并且您可能会积压保存​​操作。除非您看到实际的性能问题，否则将单个块分派到计算和保存数据的正常优先级队列可能是最安全的。

# css - 页脚文字无法移动

> ID：13511447
> 
> 赞同：1
> 
> 时间：2012-11-22T11:10:23.867
> 
> 标签：css, text, footer, move

请记住，我仍在学习 HTML/CSS。

我一直在为客户开发一个网站并且已经到了完成的地步，但是页脚让我发疯了！

我需要两列文本来跟随网站的流程，但无论我尝试什么，左列都卡在页面的最末端，我无法将其移动到另一列当前所在的中心。

该网站是[http://www.eplsdesign.com/Grow/index.php](http://www.eplsdesign.com/Grow/index.php)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:12:30.680

Hi now you **write** to in **your html** `<div id="wrapper">` now it's change into `<div class="wrapper">`

Now just now **replace** to this

```
<div id="footer">
<div id="wrapper"> 
```

**into this**

```
<div id="footer">
<div class="wrapper"> 
```

# jakarta-ee - 当应用程序部署在 tomcat 的 webapps 中的文件夹内时，数据源失败

> ID：13511456
> 
> 赞同：0
> 
> 时间：2012-11-22T11:10:49.933
> 
> 标签：jakarta-ee, tomcat, tomcat7, jndi

我注册了一个域 www.mywebapp.com 并将名称服务器指向我的 tomcat 主机。因此，当我给出 www.mywebapp.com 时，它会命中

> **tomcat/webapps/mywebapp.com**

并且页面加载没有问题。所以大部分是正确的。

但我无法为我的应用程序建立数据库连接（使用 JNDI 数据源），因为当我打电话时 -

```
DBConnection.ds = (DataSource)ctx.lookup("java:comp/env/jdbc/atfdb"); 
```

它说

```
DB Connection NamingException error-->Name atfdb is not bound in this Context. 
```

## 笔记：

我正在使用tomcat7。

如果我将应用程序直接部署在**tomcat/webapps**文件夹下，则建立数据库连接，只有当我将其部署在**webapps/mywebapp.com**中时才会出现问题。

**如果我们在webapps/mywebapp.com**中部署 war 文件，JNDI 查找是否有任何特殊情况？

下面是我的配置

```
server.xml  inside tomcat/conf/server.xml
-------------------------------------------

<Host appBase="webapps/mywebapp.com" name="mywebapp.com" unpackWARs="true" autoDeploy="true">
      <Alias>www.mywebapp.com</Alias>
      <Context path="" docBase="ROOT" debug="0" reloadable="true"/>
      <Logger className="org.apache.catalina.logger.FileLogger" prefix="mywebapp.com"   suffix=".txt" timestamp="true"/>
      </Host>

context.xml in which I am configuring my datasource.

context.xml   inside webapps/mywebapp.com/META-INF
--------------------------------------------------

<Context>

  <Resource name="jdbc/atfdb" auth="Container" type="javax.sql.DataSource"
               removeAbandoned="true" maxActive="100" maxIdle="30" maxWait="10000"
               removeAbandonedTimeout="30" username="spadmin" password="password" 
               driverClassName="com.mysql.jdbc.Driver"
               url="jdbc:mysql://localhost:3306/socialdb?autoReconnect=true"/>

</Context> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:18:52.167

我会将资源引用添加到您的`web.xml`：

```
<resource-ref>
    <description>atfdb description</description>
    <res-ref-name>jdbc/atfdb</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
    <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
```

这是 Java EE 标准所期望的，所以当您使用其他文件夹时它可以工作的事实可能只是侥幸......

# php - place file into zip and stream to browser - zero physical files

> ID：13511459
> 
> 赞同：0
> 
> 时间：2012-11-22T11:10:55.150
> 
> 标签：php, browser, zip, download

basically we currently generate a csv file and push it too the clients browser to download, so no physical files are involved or stored as these are reports that always change. These have become quite large in some places and I need to reduce the speed and size of the downloads to clients.

I decided to go the zip root and got the below test script working fine, however i am still having to generate the zip file physically and then later delete it, obviously there is a speed factor here as I am writing and reading the file, when I only need to push the zip files contents to the browser.

is there no way to create a stream with the ziplib?

```
<?php

//report
$reportFilename = 'report';
$data = '005,"756607       ","WED","L","TEST UITENHAGE CBD F NFD"
        005,"756608       ","MON","L","TEST SUMMERSTRAND NNB   "
        005,"756634       ","WED","L","TEST UITENHAGE PENFORD F"
        005,"756776       ","MON","L","TEST WALKER DRIVE FOOD  "
        005,"756858       ","MON","C","TEST R ADAMI&SONS C C  "
        005,"801002       ","MON","L","TESTMOFFET NNB "
        005,"CP00270      ","WED","L","TEST  WALMER P FNF       "
        ';   //dummy data

// populate fake data...
$reportData = $data.$data.$data.$data.$data.$data.$data.$data.$data.$data.$data; 

//make unique so no clashing occurs
$zipFilename = '_temp_'.microtime().$zipFilename;

//zip data
$zip = new ZipArchive();
$zip->open($zipFilename, ZIPARCHIVE::CREATE);
$zip->addFromString($reportFilename.'.csv' , $reportData);    //add report
$zip->close();

$zipData = file_get_contents($zipFilename);
$zipSize = filesize($zipFilename);
unlink($zipFilename);

header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=\"".$reportFilename.".zip\"");
header('Content-Transfer-Encoding: binary');
header("Content-Type: application/zip");
echo $zipData;

?> 
```

# google-maps - 将谷歌地图北转换为磁北

> ID：13511460
> 
> 赞同：1
> 
> 时间：2012-11-22T11:10:56.267
> 
> 标签：google-maps, geodjango, magnetometer, degrees

我正在构建一个连接到 android 应用程序的 Django 站点。android 部分是一个导航器，该站点允许使用图像构建您自己的地图。

在这些地图的构建过程中，用户可以通过在谷歌地图实例上旋转地图图像来设置方位。

我正在使用 css 旋转图像，所以 0° 是图像“原样”，而 360° 是图像倒置：所以北方是“向上”。

android应用程序不会使用gps系统，所以我必须在磁场上中继以显示地图随着用户的移动而旋转（为了检测用户的移动我有另一种方法，但这不是问题所必需的），我在[此页面上](http://googlecompass.com/GoogleMapsProjection.htm)发现磁北不是谷歌地图中显示的，我必须对这些值进行一些更正，但我不知道如何。

有人可以帮我将图像的旋转度数转换为北磁度数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:16:05.823

听起来您正在寻找磁偏角值。首先，您需要获取您的位置。由于您没有 GPS，您将使用 NETWORK_PROVIDER 位置；这将足够接近以获得您的磁偏角值。

要找出旋转图像的距离和方向，您应该使用类似NOAA 的[这个 API](http://www.ngdc.noaa.gov/geomag-web/calculators/declinationHelp)。

例如，如果您是 @ 40.000, -105.250，您将进行此 API 调用：
[http ://www.ngdc.noaa.gov/geomag-web/calculators/calculateDeclination?lat1=40&lon1=-105.25&resultFormat=xml](http://www.ngdc.noaa.gov/geomag-web/calculators/calculateDeclination?lat1=40&lon1=-105.25&resultFormat=xml)

你会得到这个作为回报：

```
<?xml version="1.0"?>
<maggridresult>
    <result>
        <date> 2012.82514 </date>
        <latitude> 40.00000 </latitude>
        <longitude> -105.25000 </longitude>
        <elevation units="km"> 0.00000 </elevation>
        <declination> 8.90399 </declination>
        <declination_sv> -8.01691 </declination_sv>
    </result>
</maggridresult> 
```

所以你会旋转你的地图 8.90399°

作为参考，[这里是一张](http://www.windtesting.com/4.html)显示近似磁偏角值的地图。

# html - 如何使用 jquery 为 html 输入文本框制定规则

> ID：13511461
> 
> 赞同：0
> 
> 时间：2012-11-22T11:10:56.627
> 
> 标签：html, inputbox

我希望我的 HTML 页面中的文本框只接受 0 到 10 的数字，也接受：0.5、1.2、...非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:16:48.107

你可以使用正则表达式来做到这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:20:46.517

试试这个

```
<script>
function checkfloat(e,field){
     if (!(((e.keyCode>=48)&&(e.keyCode<=57))||(e.keyCode==46)))
     {
        e.keyCode=0;                   
     }     
 if (e.keyCode==46)
 {
    var patt1=new RegExp("\\.");        
    var ch =patt1.exec(field);       
    if(ch==".")
    {
        e.keyCode=0;
    }                        
 }
} 
</script>
<input type="text" onkeypress="checkfloat(event, this.value)"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:28:32.477

HTML5 数字输入类型可以这样做：

```
<input type="number" min="0" max="10" /> 
```

然而，浏览器对此的支持仍然很差。目前只有[Chrome、Safari 和 Opera](http://caniuse.com/input-number)支持此功能。

不过在 Chrome 中进行测试。

[**演示**](http://jsfiddle.net/BbX4V/)

# c# - 比较 Entity Framework 4.1 中 Any() 与 Count() 生成查询的性能

> ID：13511464
> 
> 赞同：7
> 
> 时间：2012-11-22T11:11:21.480
> 
> 标签：c#, performance, tsql, linq-to-entities, entity-framework-4.1

我正在使用 Entity Framework 4.1 和 C#。

哪一个最适合发挥最佳性能？

如果是这样 - 为什么？（其他阅读的任何链接）？

```
bool isBoarding = invoice.Allocations.Where(a => a.Service.Key == "boarding").Count() > 0; 
```

**或者**

```
bool isBoarding = invoice.Allocations.Any(a => a.Service.Key == "boarding"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-09T12:30:32.503

Count 我相信会导致所有记录被迭代，而 Any 会在它找到的第一个记录处停止。

[编辑：刚刚找到一篇关于计数与任何查看](https://stackoverflow.com/questions/305092/which-method-performs-better-any-vs-count-0)的优秀帖子

# wpf - Binding Datagrid to observablecollection wont display data only rows

> ID：13511468
> 
> 赞同：1
> 
> 时间：2012-11-22T11:11:27.563
> 
> 标签：wpf, .net-4.0, wpfdatagrid, observablecollection

I'm having a bit of trouble getting the following to work:

I'm creating an ObservableCollection like this:

```
ObservableCollection<OverViewItems> ocOrderData = new ObservableCollection<OverViewItems>(); 
```

The class OrderViewItems looks like this:

```
 public class OverViewItems
    {
        public string OrderNo;
        public int Pieces;
        public string SenderName;
        public string ReceiverName;
        public string ReceiverAddress;
        public string ReceiverZip;
        public string ReceiverCity;
        public DateTime DelDate;
    } 
```

And then I populate it with some sample data (two rows in this case), like this:

```
 ocOrderData.Add(new OverViewItems
            {
                OrderNo = "TEST",
                Pieces = 1,
                SenderName = "TEST SENDER",
                ReceiverName = "TEST RECEIVER",
                ReceiverAddress = "TEST ADDRESS",
                ReceiverZip = "TEST ZIP",
                ReceiverCity = "TEST CITY",
                DelDate = DateTime.Now,
            });

            ocOrderData.Add(new OverViewItems
            {
                OrderNo = "TEST 2",
                Pieces = 1,
                SenderName = "TEST SENDER 2",
                ReceiverName = "TEST RECEIVER 2",
                ReceiverAddress = "TEST ADDRESS 2",
                ReceiverZip = "TEST ZIP 2",
                ReceiverCity = "TEST CITY 2",
                DelDate = DateTime.Now,
            }); 
```

And try to bind it to a WPF Datagrid like this:

```
dataGrid1.ItemsSource = ocOrderData; 
```

And the XAML for the Datagrid looks like this:

```
 <DataGrid 
        AutoGenerateColumns="True" 
        Height="200" 
        HorizontalAlignment="Left" 
        Margin="23,172,0,0" 
        Name="dataGrid1" 
        VerticalAlignment="Top" 
        Width="1084" 
        /> 
```

Now, the datagrid displays the two rows ok, but there's no data, no columns, no nothing except a blank datagrid with two rows. Why is this? What do I do wrong?

Any help is appreciated. :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:32:38.817

您必须使用`OverViewItems`类中的属性而不是简单的公共字段。
这样做应该使 DataGrid 正确创建列。

```
public class OverViewItems
{
    public string OrderNo { get; set; }
    public int Pieces { get; set; }
    public string SenderName { get; set; }
    public string ReceiverName { get; set; }
    public string ReceiverAddress { get; set; }
    public string ReceiverZip { get; set; }
    public string ReceiverCity { get; set; }
    public DateTime DelDate { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:33:43.147

您可以只绑定到公共属性而不是字段。

```
public class OverViewItems
{
    public string OrderNo {get;set};
    public int Pieces {get;set};
    public string SenderName {get;set};
    public string ReceiverName {get;set};
    public string ReceiverAddress {get;set};
    public string ReceiverZip {get;set};
    public string ReceiverCity {get;set};
    public DateTime DelDate {get;set};
} 
```

# oracle-adf - Adf - Convert RichInputDate to Date object

> ID：13511471
> 
> 赞同：0
> 
> 时间：2012-11-22T11:11:40.510
> 
> 标签：oracle-adf

I'm using af:inputDate in my form.

in my backing bean i'm trying to get the value as Date object.

```
public RichInputDate getFromDate() {
return fromDate;
}

public void convert(){
Date fromDt = (Date)this.getFromDate().getValue(); 
} 
```

but I get this error: java.lang.ClassCastException: java.lang.String cannot be cast to java.util.Date any idea? is there a simple way to get the value as Date object.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:23:07.753

是的，有： [http ://www.roseindia.net/java/java-conversion/StringToDate.shtml](http://www.roseindia.net/java/java-conversion/StringToDate.shtml)

使用它也更安全

```
<af:convertDateTime pattern="yyyy/M/d" secondaryPattern="d/M/yyyy" /> 
```

在您的输入组件中，因此您确定它使用的是正确的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T00:04:26.523

谈到 ADF，有：

```
private RichInputDate invoiceDate; 
```

我们可以这样做：

```
String s2 = invoiceDate.getValue().toString(); 
```

为了以字符串格式获取日期。这将帮助您以字符串格式获取它，然后您可以将其转换为 Date 对象。

问候，

# css - CSS Print layout is adding an extra page

> ID：13511472
> 
> 赞同：5
> 
> 时间：2012-11-22T11:11:40.403
> 
> 标签：css

I've been working on a print page for a client. After playing around for awhile I've found I get an extra blank page. The unusual thing is that if I select "Outline Block Level Elements" in Web Developer for chrome, the extra page disappears. This is all the CSS being used on that page right now:

```
@page 
    {
        size: auto;   /* auto is the initial value */
        margin: 0mm;  /* this affects the margin in the printer settings */
    }

    body 
    {
        background-color:#FFFFFF; 
        height: 296mm;
        border: 1px solid black;
        margin: 0px;  /* this affects the margin on the content before sending to printer */
   }

.print_A4 {
margin: 0mm;
padding: 0mm;
height: 270mm; /*A4 Size*/
width: 210mm; /*A4 Size*/
}

.A4_content {
    margin-left: auto;
    margin-right: auto;
    margin-top: 44mm;
    height: 210mm;
    width: 165mm;
 } 
```

I've done a lot of googling but I can't see anything related to this. The body border clearly shows the div ending before the end of the first page, however I still get an extra blank page for some reason.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T12:13:40.803

会不会是某处只添加了 1 个像素？由于您将页面定义为使用完整的 270 毫米高度。即使是一个边距/填充/边框也会添加一个新页面。

如果你减少这个值，它仍然会发生吗？如果没有，那么我建议你稍微减少这个值（无论如何你都不要使用全高。）你可以添加`page-break: after`到`.print_A4`以防止下一页占用前一页留下的小空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-04T16:56:52.917

答案真的很晚，但我认为我的贡献可以帮助遇到同样问题的人，我使用 CSS 设置打印页面：

创建动态 html 内容并将其附加到 body 元素以仅打印此类内容，我意识到只有 Chrome（46 版）和 Opera（32 版）在打印时会在开始时创建一个额外的空白页，这仅发生在内容高度大于页面高度。@mewiki 提供的解决方案解决了我 2 天的研究和测试问题。

事实上，Chrome 和 Opera 似乎有默认边距并设置以下规则：

```
body {
    margin: 0 0 0 0;
} 
```

解决了其他浏览器没有遇到的令人沮丧的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-30T10:18:49.770

老问题，但对于有同样问题的人来说，这是我为我解决的解决方案。

我发现正文的边距底部必须明确设置为零（Chrome 和 Safari 似乎有默认边距）。

```
body
{
    margin: 0px 0px 0px 0px; 
}

div.page {
  margin: 10px 10px 10px 10px; 
  page-break-before: none;
  page-break-after: none;
  page-break-inside: avoid;
} 
```

对于每个要打印的页面，都以 a 开头`<div class="page">`并在此处设置页边距，以便页面看起来不错。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-02T03:29:00.137

所以因为 27.9cm 变成了`1423.03px`我怀疑它导致打印渲染器显示额外像素的东西。将此添加到我的页面解决了这个问题。

```
.page-a4 {
  width: 21cm;
  height: calc(27.9cm - 1px);
}
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-25T20:35:06.280

对于任何处理多个页面的人。我在部分中添加了每个页面内容，然后使用了这个：

```
section {
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-02T17:46:42.527

```
@page {
    size: auto;   /* auto is the initial value */
    margin: 12px;  /* this affects the margin in the printer settings */
}
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-20T20:32:28.760

我遇到了类似的问题，即引入分页符导致空白页。

我没有足够的声誉来评论wiredolphin的帖子，但是使用该建议，以下内容对我有用

```
html, body {
  margin: 0 0 0 0;
  height: 99% !important;
}

.page {
  height: 100vh;
  page-break-after: always;
} 
```

我知道这不能回答原始海报的问题，但它已经很老了，这可能会对某人有所帮助。

另外，感谢有线海豚！你把我引向了正确的方向。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-09T22:40:13.390

我面临同样的问题，[Neograph734 的回答](http://I%20was%20also%20getting%20extra%20blank%20pages,%20and%20the%20only%20thing%20that%20worked%20for%20me%20was%20adding%20this%20rule%20to%20my%20css%20(for%20print)%20%20%20%20%20%20*%20%20%20%20%20%7B%20%20%20%20%20%20%20%20%20box-sizing:%20border-box;%20%20%20%20%20%7D%20%20Then%20I%20no%20longer%20need%20to%20worry%20about%20having%20an%20extra%20pixel%20added%20when%20using%20margin,%20padding%20or%20border.%20%20Once%20I%27ve%20added%20that%20rule,%20I%20only%20had%20to%20adjust%20the%20boxes%20positions%20and%20everything%20worked%20flawlessly.)给了我一个重要的提示。

我还得到了额外的空白页，唯一对我有用的就是将此规则添加到我的 css 中（用于打印）

```
*
{
    box-sizing: border-box;
} 
```

然后我不再需要担心在使用边距、填充或边框时添加额外的像素。

一旦我添加了这条规则，我只需要调整盒子的位置，一切都完美无缺。

# c# - 如何在 Windows 上使用 lynx.exe 将 html 字符串（带有 css 和格式错误的 html）转换为纯文本

> ID：13511475
> 
> 赞同：1
> 
> 时间：2012-11-22T11:11:53.683
> 
> 标签：c#, .net, html, vb.net, lynx

我已经尝试使用（并且被建议不要）使用正则表达式来完成这项任务（[这里） - 所以我尝试以](https://stackoverflow.com/questions/10656123/regular-expression-remove-html-comment-spanning-multiple-line-breaks)[这种](http://htmlagilitypack.codeplex.com/SourceControl/changeset/view/98677#1010173)方式使用 HTMLAgilityPack但是它的结果文本非常差，html 列表（`<ol><li></ol>`）完全丢失并且只是结果在聚集在一起的段落中。

在[这个](https://stackoverflow.com/questions/731649/how-can-i-convert-html-to-text-in-c)问题中，我看到 lynx（为 windows 编译）被推荐为一个不错的选择，但是我无法让它工作 - 如何使用 lynx.exe 将 html（存储在 .net 字符串中）转换为可呈现的纯文本带有换行符等的文本字符串。

我能想到的唯一方法是将 html 写入文件，使用 .nets system.process 调用 lynx.exe -dump 并读取结果文件 - 这似乎很笨拙。

有更好的方法吗？对于这样的任务，确切的 lynx.exe 命令行是什么？

我正在使用的 LYNX 实现是这个：

[http://invisible-island.net/datafiles/release/lynx-cs-setup.exe](http://invisible-island.net/datafiles/release/lynx-cs-setup.exe)

**编辑：**取得了一些进展，这是我一直在使用的命令行：

```
lynx.exe -dump "d:\test.html" >d:\output.txt 
```

它有点工作，但如果我在记事本中打开生成的文件，它全部在一行上（因为 lynx 只对新行使用换行符，而记事本需要回车才能正确呈现。

`</li>`此外，它在&`<br />`标记后插入了太多换行符，它做了两个换行符：

```
 Hello, this is a normal line of text.

   Next an ordered list:

   1\.       The

   2\.       Quick

   3\.       Brown Fox

   4\.       Jumped 
```

我可以通过用一个 LF 替换两个连续的 LF 来解决这个问题，但我仍然在使用 ac# 包装器来解决所有这些问题。

**编辑 2 - 我基于 Christian 的回答的最终解决方案：**

```
Function ConvertHtmlToPlainText(ByVal HtmlString As String) As String

    '#### Define FileBuffer Path
    Dim HtmlBuffer As String = WorkingRoot & "HtmlBuffer.html"

    '#### Delete any old buffer files
    Try
        If File.Exists(HtmlBuffer) = True Then
            File.Delete(HtmlBuffer)
        End If
    Catch ex As Exception
        Return "Error: Deleting old buffer file: " & ex.Message
    End Try

    '#### Write the HTML to the buffer file
    Try
        File.WriteAllText(WorkingRoot & "HtmlBuffer.html", HtmlString)
    Catch ex As Exception
        Return "Error: Writing new buffer file: " & ex.Message
    End Try

    '#### Check the file was written OK
    If File.Exists(HtmlBuffer) = False Then
        Return "Error: HTML Buffer file was not written successfully."
    End If

    '#### Read the buffer file with Lynx and capture plain text output
    Try
        Dim p = New Process()
        p.StartInfo = New ProcessStartInfo(LynxPath, "-dump -width 1000 " & HtmlBuffer)
        p.StartInfo.WorkingDirectory = WorkingRoot
        p.StartInfo.UseShellExecute = False
        p.StartInfo.RedirectStandardOutput = True
        p.StartInfo.RedirectStandardError = True
        p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
        p.StartInfo.CreateNoWindow = True
        p.Start()
        p.WaitForExit()

        '#### Grab the text rendered by Lynx
        Dim text As String = p.StandardOutput.ReadToEnd()
        Return text.Replace(vbLf & vbLf, vbLf)

    Catch ex As Exception
        Return "Error: Error running LYNX to parse the buffer: " & ex.Message
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:53:36.327

使用它，您可以调用 Lynx，将重定向的 StandardOutput 中的输出抓取到字符串中，而无需先将其写入文件。

```
using System;
using System.Diagnostics;

namespace Lynx.Dumper
{
  public class Dampler
  {
      public void fdksfjh()
      {
          var url = "http://www.google.com";

          var p = new Process();

          p.StartInfo = new ProcessStartInfo("c:/tools/lynx_w32/lynx.exe", "-dump -nolist " + url)
          {
              WorkingDirectory = "c:/tools/lynx_w32/",
              UseShellExecute = false,
              RedirectStandardOutput = true,
              RedirectStandardError = true,
              WindowStyle = ProcessWindowStyle.Hidden,
              CreateNoWindow = true
          };

          p.Start();
          p.WaitForExit();

          //grab the text rendered by Lynx
          var text = p.StandardOutput.ReadToEnd();

          Console.WriteLine(text);
      }
  }
} 
```

# jdbc - Weblogic server: Profiling JDBC calls on a DataSource from an weblogic application

> ID：13511476
> 
> 赞同：0
> 
> 时间：2012-11-22T11:12:00.563
> 
> 标签：jdbc, weblogic, profiler

We are running applications on weblogic server. We have a requirement in which we want to monitor jdbc calls made on a data source. We only want to collect time taken for each sql to execute and number of times a sql is fired. I also want to collect this information per user session.

There are a few utilties on the web like weblogic jdbc spy, log4jdbc, etc. But they all required additional setup on the data source and provide output on a separate logging file which does not contain per session output as such. Is it possible to create another weblogic application that listens on a given data source and record all the sql and the timings per session? Please provide any pointers that you have.

TIA, Siva Rajesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:00:13.210

Oracle JRockit Flight Recorder 可以为您解答。我在用他。只需在定义的时间记录，然后使用 Oracle JRockit Mission Control 分析收集的 jfr 文件。

**链接：**

[Oracle JRockit 飞行记录器手册](http://docs.oracle.com/cd/E15289_01/doc.40/e15070.pdf)

[Oracle JRockit 任务控制](http://www.oracle.com/technetwork/middleware/jrockit/overview/index-090630.html)

或者您可以使用参数 -Doracle.jdbc.Trace=true -Djava.util.logging.config.file=/jdbc/demo/OracleLog.properties 找到您的答案

# java - Finding neighbors to Points in an ArrayList

> ID：13511480
> 
> 赞同：2
> 
> 时间：2012-11-22T11:12:11.093
> 
> 标签：java, list, arraylist, iteration

I've recently started learning Java and though doing a "[Conway's Game of Life](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)" style program would be a good thing to start out with. Everything works fine but I'm having some serious performance issues with this part:

```
static List<Point> coordList = new ArrayList<Point>();

public int neighbors(int x, int y){

    int n = 0;

    Point[] tempArray = { new Point(x-1, y-1), new Point(x, y-1), new Point(x+1, y-1), 
                          new Point(x-1, y  ),                    new Point(x+1, y  ),
                          new Point(x-1, y+1), new Point(x, y+1), new Point(x+1, y+1)};
    for (Point p : tempArray) {
        if (coordList.contains(p))
            n++;
        }

    return n;
} 
```

The method is used when iterating the `ArrayList` *coordList* filled with *Points* and checking every element how many neighbors they have. When the list size gets to about 10000 *Points* every cycle takes about 1 seconds and for 20000 Points it takes 7 seconds.

My question is, what would be a more effective way to do this? I know there are several other programs of this kind with source code available too look at, but I wan't do do as much as I can by my self since the point of the project is me learning Java. Also, I don't want to use a regular array because of the limitations.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:13:59.370

如果您的点是唯一的，您可以将它们存储在[a`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)而不是`ArrayList`. 在您当前的设置中，该`contains`方法将成为 O(1) 与 O(n) 的操作。这应该会显着加快该部分的速度。

除了声明之外，您的代码应该保持大部分不变，因为它们都实现了`Collection`接口，除非您调用 List-specific 方法`get(i)`，例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:16:36.693

性能方面，我认为你最好的选择是使用一个简单的数字（实际上是布尔）数组来表示网格。由于这是一个学习练习，我将从一个简单的每个单元格一个元素的数组开始，然后可能会继续将八个相邻的单元格打包成一个字节。

尚不完全清楚您所说的“限制”是什么意思。

下面有一些有趣的指点：[优化康威的“生命游戏”](https://stackoverflow.com/questions/40485/optimizing-conways-game-of-life)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:24:35.273

您当前的代码以二次方式缩放`O(n^2)`。你只给出了程序的一部分。如果您查看整个程序，将会有一个循环调用`neighbors()`，您会看到它`neighbors()`被调用了 n 次。此外，操作 contains() 在 n 中是线性的，因此时间与它们的乘积成正比`n*n`。

二次缩放是一个常见问题，但通常可以通过使用索引数据结构（例如`HashSet`.

# java - Android：使用属性时出现空指针异常

> ID：13511486
> 
> 赞同：0
> 
> 时间：2012-11-22T11:12:41.463
> 
> 标签：java, android, class, nullpointerexception

我正在使用一个公共类将 2 条信息保存到一个数组中（这样我就可以轻松获取名称和 ID）。但不知为何，它似乎并不喜欢它！

**我在线上收到以下错误：-**

`AssetDetails.ID = f.getString(f.getColumnIndex("AssetObsID"));`

```
Null pointer access: The variable details can only be null at this location 
```

我有错误的代码是：

```
public static List<clsNameID> assetHelperTypes(){
    Log.e("Asset Helper Types:", "Started");
    clsNameID AssetDetails = null;
    List<clsNameID> mHelperNames = new ArrayList<clsNameID>();
    File dbfile = new File(Global.currentDBfull); 

    SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
    Cursor f = db.rawQuery("select * from assetobservationtypes", null);  
    Log.e("Asset Helper Types:", "Cursor run");
        if(f.getCount() != 0) {
         f.moveToFirst();
            while(!f.isAfterLast()) {
                Log.e("Asset Helper Types:", "Finding Items");

                AssetDetails.ID = f.getString(f.getColumnIndex("AssetObsID"));
                AssetDetails.Name = f.getString(f.getColumnIndex("Observation"));

                mHelperNames.add(AssetDetails);
                Log.e("Asset Helper Types:", "Added Items");
            }
        }
    f.close();

    return mHelperNames;
} 
```

类 clsNameID：-

```
package com.directenquiries.assessment.tool;

public class clsNameID {
    public String Name;
    public String ID;

} 
```

我试图用以下方式调用它：

```
 public void addCondition(View view){

        List<clsNameID> mHelperNames = DBFunctions.assetHelperTypes();

        final List<Integer> mSelectedItems = new ArrayList<Integer>();

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("My Title")
                .setMultiChoiceItems(mHelperNames.toArray(new CharSequence[mHelperNames.size()]), null,
                        new DialogInterface.OnMultiChoiceClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which, boolean isChecked) {
                                if (isChecked) {

                                    mSelectedItems.add(which);
                                } else if (mSelectedItems.contains(which)) {

                                    mSelectedItems.remove(Integer
                                            .valueOf(which));
                                }
                            }
                        })

               .setPositiveButton("Save", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                        //Create onlcick method
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                        //Create onlcick method
                   }
               });
        builder.show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:17:21.320

您不是`clsNameID`通过调用`new`运算符来创建的对象，这就是您的对象`AssetDetails`为空的原因。我刚刚添加了创建对象的行.. 使用我的评论“添加此行..”查看该行。

```
public static List<clsNameID> assetHelperTypes(){
    Log.e("Asset Helper Types:", "Started");
    clsNameID AssetDetails = null;
    List<clsNameID> mHelperNames = new ArrayList<clsNameID>();
    File dbfile = new File(Global.currentDBfull); 

    SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
    Cursor f = db.rawQuery("select * from assetobservationtypes", null);  
    Log.e("Asset Helper Types:", "Cursor run");
        if(f.getCount() != 0) {
         f.moveToFirst();
            while(!f.isAfterLast()) {
                          //add this line....
                          AssetDetails     = new clsNameID();
                Log.e("Asset Helper Types:", "Finding Items");

                AssetDetails.ID = f.getString(f.getColumnIndex("AssetObsID"));
                AssetDetails.Name = f.getString(f.getColumnIndex("Observation"));

                mHelperNames.add(AssetDetails);
                Log.e("Asset Helper Types:", "Added Items");
            }
        }
    f.close();

    return mHelperNames;
} 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:33:08.310

首先，Java 中的类名应以大写字母开头，因此您的自定义类应称为`ClsNameID`. 此外，变量应该以小写字母开头，因此您调用的引用`AssetDetails`应该是`assetDetails`, 和类似的`ID`and `Name`。

完成这些更改后，更明显的是，当您访问`ID`和`Name`字段时，它是在类的实例上执行的，而不是在`static`类的属性上执行的。比较两段代码：

```
clsNameID AssetDetails = null;
...
AssetDetails.ID = f.getString(f.getColumnIndex("AssetObsID"));
AssetDetails.Name = f.getString(f.getColumnIndex("Observation")); 
```

和

```
ClsNameID assetDetails = null;
...
assetDetails.id = f.getString(f.getColumnIndex("AssetObsID"));
assetDetails.name = f.getString(f.getColumnIndex("Observation")); 
```

很容易看出编写第二组代码时出错了，`assetDetails`显然应该是一个实例，而第一组代码模棱两可且令人困惑。

要解决您的问题，您应该按照其他发帖者的说明进行操作，并在尝试使用它之前创建您的类的实例：

```
ClsNameID assetDetails = new ClsNameID(); 
```

# c++ - 使用 Qt qUnCompress 函数解压缩文件

> ID：13511488
> 
> 赞同：1
> 
> 时间：2012-11-22T11:12:57.393
> 
> 标签：c++, qt, zip, gzip, zlib

我阅读了文档并发布了有关解压缩 ZIP 文件的信息，但我还有其他问题。我需要在 Qt 中解压缩 zip 文件。那是用 gzip 压缩的 XML 文件。我知道 qUnCompress 可以解压缩使用 ZLIB 准备的 zip 文件，并且 ZLIB 的标头与 GZIP 不同。

正如我在文档中读到的：

> *注意：如果要使用此函数解压缩使用 zlib 压缩的外部数据，首先需要在包含数据的字节数组中添加一个四字节的标头。标头必须包含未压缩数据的预期长度（以字节为单位），表示为无符号、大端、32 位整数。*

这是否意味着我必须在开头只放长度（双端）而不是压缩数据？我做到了，但 qUncompress 函数出现错误：

> qUncompress: Z_DATA_ERROR: 输入数据已损坏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:19:28.003

您需要使用实现该算法的任何一个或其他一些库来编写自己的`gUncompress()`函数。我个人更喜欢：`zlib``DEFLATE``miniz`

[http://code.google.com/p/miniz/](http://code.google.com/p/miniz/)

这是给你的一些代码：

```
#include <stdexcept>

#include <QtCore>

#ifndef TINFL_HEADER_FILE_ONLY
# define TINFL_HEADER_FILE_ONLY
#endif // TINFL_HEADER_FILE_ONLY
extern "C" {
# include "tinfl.h"
}

#include "guncompress.hpp"

static tinfl_decompressor inflator;

static QByteArray result(TINFL_LZ_DICT_SIZE, 0);

//////////////////////////////////////////////////////////////////////////////
QByteArray gUncompress(QByteArray const& data)
{
  mz_uint8 const* inPtr(reinterpret_cast<mz_uint8 const*>(data.data()) + 10);

  tinfl_init(&inflator);

  size_t inAvail(data.size());
  size_t outTotal(0);

  tinfl_status ret;

  do
  {
    size_t inSize(inAvail);
    size_t outSize(result.size() - outTotal);

    ret = tinfl_decompress(&inflator,
      inPtr,
      &inSize,
      reinterpret_cast<mz_uint8*>(result.data()),
      reinterpret_cast<mz_uint8*>(result.data()) + outTotal,
      &outSize,
      0 
      );

    switch (ret)
    {
      case TINFL_STATUS_HAS_MORE_OUTPUT:
        inAvail -= inSize;
        inPtr += inSize;

        result.resize(2 * result.size());

      case TINFL_STATUS_DONE:
        outTotal += outSize;
        break;

      default:
        throw std::runtime_error("error decompressing gzipped content");
    }
  }
  while (TINFL_STATUS_DONE != ret);

  return QByteArray::fromRawData(result.data(), outTotal);
} 
```

另请注意，zip 文件和 gzip 文件的格式不同。Zip 文件需要以不同方式处理，因为它们包含它们所包含的文件目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:03:05.050

在 Qt 的源代码中查找 qzip.cpp、qzipreader_p.h、qzipwriter_p.h。它可用于读取和写入 zip 文件。

# browser - Testing a website in safari without installing safari on your machine

> ID：13511490
> 
> 赞同：1
> 
> 时间：2012-11-22T11:13:09.240
> 
> 标签：browser

I was thinking of a situation where in I might need to test my website in safari or netscape or any other browser. But the catch here is that I don't have anything else except Chrome and IE and FF. Is there any possible way that a website can be tested in a browser without actually having to install the browser.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:17:00.420

我正在使用这个：

[http://browsershots.org/](http://browsershots.org/)

最好在每个浏览器上进行预览

# matlab - Matlab: Colour grade a Constellation Diagram

> ID：13511493
> 
> 赞同：5
> 
> 时间：2012-11-22T11:13:14.507
> 
> 标签：matlab, plot, histogram

I am using Matlab. I have a large column vector consisting of complex values. e.g.

> data=[
> -0.4447 + 0.6263i
> 0.3114 + 0.8654i
> 0.7201 + 0.6808i
> 0.7566 + 0.8177i
> -0.7532 - 0.8085i
> -0.7851 + 0.6042i
> -0.7351 - 0.8725i
> -0.4580 + 0.8053i
> 0.5775 - 0.6369i
> 0.7073 - 0.5565i
> 0.4939 - 0.7015i
> -0.4981 + 0.8112i
> ....
> ]

This represents a constellation diagram which is shown below.

![enter image description here](../Images/3d41bcac201c54d226e74ec0c869b2af.png)

I would like to colour grade the constellation points depending on frequency at a particular point. I presume I need to create a histogram, but I am not sure how to do this using complex vectors and then how to plot the colour grade. Any help appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:06:08.690

我想你想做一个热图：

```
histdata = [real(data), imag(data)];
nbins_x = nbins_y = 10; 
[N, C] = hist3(histdata, [nbins_x, nbins_y]); % the second argument is optional.
imagesc(N); 
```

这里`hist3`创建直方图矩阵，`imagesc`绘制缩放热图。如果您更喜欢 3d 可视化，只需键入`hist3(histdata)`.

如果您只是在工作区窗口中右键单击 N，那么还有很多其他可视化选项。我建议也尝试`contourf(N)`一下哪个是填充的等高线图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:10:33.577

因此，您要做的是找到一个二-2 直方图。最简单的方法是将实点和虚点分开，并使用[hist2d](http://www.mathworks.com/matlabcentral/fileexchange/14205-2d-histogram)函数，如下所示：

```
rdata=real(data);
idata=imag(data);

hist2d([rdata;idata]); 
```

# sql - ROW_NUMBER with DATEADD not working well?

> ID：13511494
> 
> 赞同：1
> 
> 时间：2012-11-22T11:13:15.080
> 
> 标签：sql, sql-server, sql-server-2008

I have date that I want to increment with 1 millisecond. I am using this sql,

```
DECLARE @A TABLE
(
    A VARCHAR(2)
)
INSERT INTO @A(A) VALUES ('a1')
INSERT INTO @A(A) VALUES ('b2')
INSERT INTO @A(A) VALUES ('a3')
INSERT INTO @A(A) VALUES ('b4')
INSERT INTO @A(A) VALUES ('a5')
INSERT INTO @A(A) VALUES ('b6')
INSERT INTO @A(A) VALUES ('a7')
INSERT INTO @A(A) VALUES ('b8')

SELECT DATEADD(millisecond, + ROW_NUMBER() OVER (ORDER BY A), '2012-11-22     15:09:24.990'),ROW_NUMBER() OVER (ORDER BY A)
FROM @A 
```

But the result is,

```
2012-11-22 15:09:24.990 1
2012-11-22 15:09:24.993 2
2012-11-22 15:09:24.993 3
2012-11-22 15:09:24.993 4
2012-11-22 15:09:24.997 5
2012-11-22 15:09:24.997 6
2012-11-22 15:09:24.997 7
2012-11-22 15:09:24.997 8 
```

which is incorrect

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:15:48.307

SQL Server 中的`DATETIME`数据类型具有 3.33 毫秒的分辨率。

您将**永远**无法创造`15:09:24.991`和其他价值 - 您所看到的是预期和[记录的行为](http://msdn.microsoft.com/en-us/library/aa258277%28v=sql.80%29.aspx)。

如果您需要更高的精度 - 请改用`DATETIME2`数据类型（它可以处理低至 100ns 的精度）。

```
DECLARE @StartValue DATETIME2(3) = '20121122 15:09:24.990'

SELECT 
    @StartValue,
    DATEADD(Millisecond, 1, @StartValue),
    DATEADD(Millisecond, 2, @StartValue),
    DATEADD(Millisecond, 3, @StartValue) 
```

生成结果：

```
2012-11-22 15:09:24.990
2012-11-22 15:09:24.991
2012-11-22 15:09:24.992
2012-11-22 15:09:24.993 
```

如你所愿。

**更新：**如果您必须坚持`DATETIME`- 是的，您可以添加 +3 并获得以下结果：

```
DECLARE @StartValue DATETIME = '20121122 15:09:24.990'

SELECT 
    @StartValue, 
    DATEADD(Millisecond, 3, @StartValue),
    DATEADD(Millisecond, 6, @StartValue),
    DATEADD(Millisecond, 9, @StartValue) 
```

给你：

```
2012-11-22 15:09:24.990 
2012-11-22 15:09:24.993 
2012-11-22 15:09:24.997 
2012-11-22 15:09:25.000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:16:12.320

您不能以这种方式增加日期的毫秒数。

这取自 msdn：

> 毫秒的刻度为 3 (.123)，微秒的刻度为 6 (.123456)，纳秒的刻度为 9 (.123456789)。time、datetime2 和 datetimeoffset 数据类型的最大小数位数为 7 (.1234567)。如果 datepart 是纳秒，则数字必须在日期增加的小数秒之前为 100。1 到 49 之间的数字向下舍入为 0，50 到 99 之间的数字向上舍入为 100。

资源：

[MSDN](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

# objective-c - Objective-C 类型检查一个块？

> ID：13511502
> 
> 赞同：9
> 
> 时间：2012-11-22T11:13:59.833
> 
> 标签：objective-c, ios, objective-c-blocks

据我所知，这与 SO 上的其他“我可以检查块的类型”帖子不同。

我想知道，给定一个未知签名的块对象，我是否可以在调用之前了解它接受哪些参数？

我有一种情况，我有许多与字典中的对象关联的回调。我希望其中一些回调期望一组不同的参数。这里的例子非常简化，但我认为它明白了这一点。

如何确定一个块是否属于我之前 typedef 的类型？

```
//MyClass.m

// I start by declare two block types
typedef void (^callbackWithOneParam)(NSString*);
typedef void (^callbackWithTwoParams)(NSString*, NSObject*);

........

// I create a dictionary mapping objects to callback blocks

self.dict = @{
  @"name": "Foo",
  @"callback": ^(NSString *aString) {
    // do stuff with string
  }
}, {
  @"name": "Bar",
  @"callback": ^(NSString *aString, NSObject *anObject) {
    // do stuff with string AND object
  }
} 

.....

// Later, this method is called.  
// It looks up the "name" parameter in our dictionary, 
// and invokes the associated callback accordingly.

-(void) invokeCallbackForName:(NSString*)name {
   // What is the type of the result of this expression?
   [self.dict objectForKey: name]

   // I want to say: (pseudocode)
   thecallback = [self.dict objectForKey: name];
   if (thecallback is of type "callbackWithOneParam") {
      thecallback(@"some param")
   }
   else if (thecallback is of type "callbackWithTwoParams") {
      thecallback(@"some param", [[NSObject alloc] init]);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:16:10.833

坦率地说，如果回调有不同的类型，它们应该在不同的键下。为什么不使用键`@"callbackWithOneParam"`和`@"callbackWithTwoParams"`？对我来说，这比拥有一个通用的“回调”键和一个单独的“类型”键来告诉你如何解释回调要好。

但这真正需要的是使用自定义类的对象而不是字典。您已经越过了通用对象不再方便并开始导致比它们解决的问题更多的边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-19T05:52:42.697

就个人而言，我使用巧妙的[CTBlockDescription](https://github.com/ebf/CTObjectiveCRuntimeAdditions/blob/master/CTObjectiveCRuntimeAdditions/CTObjectiveCRuntimeAdditions/CTBlockDescription.h) ...

> CTBlockDescription 允许您在运行时检查块，包括参数和编译时功能。

```
BOOL(^bk)(BOOL,id) = ^BOOL(BOOL ani, id obj) { return YES; }; 
```

* * *

```
[CTBlockDescription.alloc initWithBlock:bk].blockSignature.description; 
```

* * *

```
<NSMethodSignature: 0x253f080>
    number of arguments = 3
    frame size = 12
    is special struct return? NO
    return value: -------- -------- -------- --------
        type encoding (c) 'c'
        flags {isSigned}
        modifiers {}
        frame {offset = 0, offset adjust = 0, size = 4, size adjust = -3}
        memory {offset = 0, size = 1}
    argument 0: -------- -------- -------- --------
        type encoding (@) '@?'
        flags {isObject, isBlock}
        modifiers {}
        frame {offset = 0, offset adjust = 0, size = 4, size adjust = 0}
        memory {offset = 0, size = 4}
    argument 1: -------- -------- -------- --------
        type encoding (c) 'c'
        flags {isSigned}
        modifiers {}
        frame {offset = 4, offset adjust = 0, size = 4, size adjust = -3}
        memory {offset = 0, size = 1}
    argument 2: -------- -------- -------- --------
        type encoding (@) '@'
        flags {isObject}
        modifiers {}
        frame {offset = 8, offset adjust = 0, size = 4, size adjust = 0}
        memory {offset = 0, size = 4} 
```

***华丽的...***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:09:15.070

调用块时，您必须知道其参数的类型。在您的情况下，如果“名称”不足以确定参数应该是什么，我会添加另一个会告诉我的关键“类型”。这是一个例子：

```
// Callback dictionary 

_callbacks = @{
    @{@"name":@"foo", @"type":@(1), @"callback":^(int i) { NSLog(@"%d", i); }},
    @{@"name":@"bar", @"type":@(2), @"callback":^(int i, int j) { NSLog(@"%d", i+j); }},
    @{@"name":@"zap", @"type":@(3), @"callback":^(int i, int j, int k) { NSLog(@"%d", i+j+k); }},
    @{@"name":@"cab", @"type":@(4), @"callback":^(NSString *s) { NSLog(@"%lu",s.length); }},
    @{@"name":@"fog", @"type":@(5), @"callback":^(void) { NSLog(@"I can't see"); }}
}

-(void) invokeCallbackForName:(NSString*)name withArguments:(NSArray*)args {

    NSDictionary *info = _callbacks[name];

    if (info != nil) {
        id block = info[@"callback"];
        int type = [info[@"type"] intValue];
        switch (type) {

            case 1:  {
                int arg1 = [args[0] intValue];
                ((void(^)(int)) block)(arg1);
                break;
            }
            case 2:  {
                int arg1 = [args[0] intValue];
                int arg2 = [args[1] intValue];
                ((void(^)(int,int)) block)(arg1,arg2);
                break;
            }
            case 3:  {
                int arg1 = [args[0] intValue];
                int arg2 = [args[1] intValue];
                int arg3 = [args[2] intValue];
                ((void(^)(int,int,int)) block)(arg1,arg2,arg3);
                break;
            }
            case 5:  {
                NSString *arg1 = [args[0] intValue];
                ((void(^)(NSString*)) block)(arg1);
                break;
            }
            default:
                [NSExceptien raise:NSInvalidArgumentException format:@"Unsupported callback type"];

        }
    }
} 
```

请注意，您必须将块转换为正确的类型，否则您可能会导致程序崩溃。这是因为该块依赖于编译器以正确的顺序将参数放入堆栈并允许任何返回类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T11:33:56.443

只需检查名称是“Foo”还是“Bar”？可能与检查函数参数一样多，我觉得如果没有某种形式的课程并继续下去，这是不可能的

```
if ([myObject class] == [MyClass class]) 
```

# linux - 如何解决字符编码问题

> ID：13511508
> 
> 赞同：0
> 
> 时间：2012-11-22T11:14:18.293
> 
> 标签：linux, encoding, mysqldump, typo3, scp

我有两台安装了 TYPO3 的服务器。一个是testserver，一个应该是liveserver。在测试服务器上，一切运行良好。当我创建一个 mysqldump 并将其复制到 liveserver（使用 scp）时，所有 Umlauts 都被转换为 sth。像 'ÐÒ§ÑÑÐ° Ð±ÑÐ·ÑÓÐ° （我用 nano 编辑器查看它）。这发生**在**我将其导入数据库之前。

谁能给我一个提示，如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:39:47.437

最重要的是确保您的内容表已正确编码（例如`pages`，`tt_content`或扩展表）

如果只有`static_languages`表破坏了编码，那没问题（*我刚刚意识到，我有完全相同的值；）'Ð~PÒ§Ñ~AÑ...*）

静态数据由 TYPO3 插入，如果您丢失了数据，您可以轻松地重新创建它们 - 然后，很可能它将插入具有正确编码的值，只是：

*   去`Extension Manager (EM)`
*   进入`Static Info Tables`分机
*   选择`Database Update`标签，
*   选择下的所有复选框`Import static data`
*   点击`Make updates.`

**编辑：**似乎您的系统没有完全设置为 UTF-8。Latin1 仅支持欧洲语言（带重音和变音符号），但既不支持中文也不支持西里尔文。

[http://typo3-media.com/blog/article/utf8-and-typo3-updated.html](http://typo3-media.com/blog/article/utf8-and-typo3-updated.html)

# sql-server - 在 if 语句中执行 while 循环 - datareader 查询

> ID：13511509
> 
> 赞同：0
> 
> 时间：2012-11-22T11:14:27.670
> 
> 标签：sql-server, vb.net

只是想知道是否有人可以检查嵌套在**if/elseif语句中的****do while**语句，以查看我可能出错的地方。

 **```
strSQL = "exec sp_CoursesStartingSoon"
    objConn = New SqlConnection(strConnection)
    objConn.Open()
    objCmd = New SqlCommand(strSQL, objConn)
    datareader = objCmd.ExecuteReader(0)
    datareader.Read()

If (datareader("subjectcode") = "F23") Then

        Do While (datareader("subjectcode") = "F23")

            html += "<h1>Access to HE</h1>"
            html += "<p>" & datareader("name") & "</p>"
            html += "<p>" & datareader("level") & "</p>"

        Loop

    ElseIf (datareader("subjectcode") = "F06") Then

        Do While (datareader("subjectcode") = "F06")

            html += "<h1>Art and Design</h1>"
            html += "<p>" & datareader("name") & "</p>"
            html += "<p>" & datareader("level") & "</p>"

        Loop

    End If 
```

目前，页面没有加载并且似乎卡在一个循环中，但想检查它是否是我的逻辑（我假设它是）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:18:23.757

在以下情况之后，您没有继续使用数据读取器：

```
Do While (datareader("subjectcode") = "F23") 
```

因此它不断读取相同的记录:)

你需要放一个：

```
datareader.Read() 
```

在某处的循环中。

如果您匹配任何 F23 或 F06 检查，您将停留在 do while 循环中。相信我。

编辑：给你

```
 strSQL = "exec sp_CoursesStartingSoon"
    objConn = New SqlConnection(strConnection)
    objConn.Open()
    objCmd = New SqlCommand(strSQL, objConn)
    datareader = objCmd.ExecuteReader(0)

    While datareader.Read()

        If (datareader("subjectcode") = "F23") Then

            html += "<h1>Access to HE</h1>"
            html += "<p>" & datareader("name") & "</p>"
            html += "<p>" & datareader("level") & "</p>"

        ElseIf (datareader("subjectcode") = "F06") Then

            html += "<h1>Art and Design</h1>"
            html += "<p>" & datareader("name") & "</p>"
            html += "<p>" & datareader("level") & "</p>"

        End If

    End While 
```

只是为了解释：

要读取下一条记录，您总是需要执行 datareader.Read()。如果没有更多记录，API 将返回 false，并正确退出循环。然后，您可以检查 datareader 光标以查看当前记录是否包含您要查找的字符串。然后当代码再次循环时， datareader.Read() 将为您获取下一条记录。**

# javascript - 函数式反应式编程——Fay 的表达力够吗？

> ID：13511511
> 
> 赞同：13
> 
> 时间：2012-11-22T11:14:35.903
> 
> 标签：javascript, haskell, functional-programming, reactive-programming, fay

因此，我正在做一个相当复杂的 javascript/html 客户端，其中包含许多 ajax 调用和其他回调主义的参与。我正在考虑将 Fay 用于此目的。我知道榆树。试过了，喜欢 FRP 元素。现在我想知道在 Fay 中是否有类似的结构。

目前Fay中有FRP的具体例子吗？

编辑：迁移到 Programmers.Stackexchange：[https ://softwareengineering.stackexchange.com/questions/186102/functional-reactive-programming-is-fay-expressive-enough](https://softwareengineering.stackexchange.com/questions/186102/functional-reactive-programming-is-fay-expressive-enough)

# linux - 从 ipv6 地址打开网站时出错

> ID：13511512
> 
> 赞同：1
> 
> 时间：2012-11-22T11:14:34.960
> 
> 标签：linux, ubuntu, apache2, ipv6, apache2.2

我已经在我的**ubunntu 12.10**系统中安装了**apache2 ，在 LAN 中使用****inet addr 172.16.17.235**和**inet6 addr fe80::a05b:25ff:fef0:68a4/64**。 现在，当我想打开位于 /var/www/ 的默认网站（index.html）时，我只需在我的网络浏览器中编写**http://localhost**或**http://127.0.0.1**或**http://172.16.17.235** （ firefox 17.0)，它会打开**index.html**页面 ，但是当我想在**ipv6 寻址**的帮助下访问这个**index.html**时，如下所示：**http://[::1]** 或**http://[fe80::a05b: 25ff:fef0:68a4]** ********************浏览器显示以下错误：
**无法连接 Firefox 无法与**
[::1] 的服务器
建立连接或 Firefox 无法与 [fe80::a05b:25ff:fef0:68a4] 的服务器建立连接.********************

 ****谁能告诉我我的系统中缺少什么配置或我做错了什么。

**顺便说一句**，当我 ping 到我的本地主机时：
ping6 ::1 或 ping6 -I eth0 fe80::a05b:25ff:fef0:68a4
ping 回复很好：
**来自 ::1 的 64 个字节：icmp_seq=1 ttl=64 time=** **fe80::a05b:25ff:fef0:68a4 的****0.032 ms**
或64 字节：icmp_seq=1 ttl=64 time=0.048 ms

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:38:30.837

如果要使用该`fe80::`范围内的 IPv6 地址，则必须指定它应该通过哪个网络适配器。（从技术上讲，您必须提供与使用的网络适配器相关的区域 ID）。

在 ping 上，您使用`-l eth0`. 在 Firefox 中，您可以使用必须找出的正数来做到这`http://[fe80::a05b:25ff:fef0:68a4%x]`一点`x`。

* * *

编辑：如果你绝对不知道发生了什么，你可以试试这个：

```
python -c 'import sys,socket; print socket.getaddrinfo(sys.argv[1], (sys.argv[2:]+[0])[0], 0, socket.SOCK_STREAM)' fe80::a05b:25ff:fef0:68a4%eth0 
```

看看结果。在我的系统上，它看起来像

```
[(10, 1, 6, '', ('fe80::a05b:25ff:fef0:68a4%eth0', 0, 0, 3))] 
```

其中最后一个数字`3`是真正的区域 ID。

如果这给了你一个结果，你的名字解析工作正常，如果没有，它就坏了。

下一步可能是尝试创建 HTTP 连接：

```
python -c 'import sys,socket; c=socket.create_connection((sys.argv[1], 80)); c.send("GET / HTTP/1.0\n\n"); print c.recv(100000).split("\r\n\r\n",1)[0]' fe80::a05b:25ff:fef0:68a4%eth0 
```

如果可行，则问题出在您的浏览器上，否则，由于任何原因，您都无法访问服务器。（您的 Web 服务器守护程序是否绑定到 IPv6？）******

# titanium - 查询 Appcelerator 云服务 使用 LIKE 运算符放置且不区分大小写

> ID：13511513
> 
> 赞同：0
> 
> 时间：2012-11-22T11:14:35.750
> 
> 标签：titanium, appcelerator, sql-like

**Q) 是否可以查询 Appcelerator 云服务将对象放置在以下位置（不敏感）： - name LIKE 'fred' - SQL 类似于？**

```
SELECT * FROM Places WHERE name like '%fred%' 
```

即查询将返回（如果存在）：

*   弗雷德
*   阿尔弗雷德
*   温妮弗雷德

**请告诉我这是否可以通过使用 Ti.Cloud 或 REST 或任何东西的简单代码块来实现！**

注意：我已经彻底阅读了文档，但在那里找不到答案。请不要将我引导至文档以获取答案。谢谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:55:46.250

可能。您想要的是 Places.Query 的“where”参数中的 $regex。文档说它只支持前缀搜索，但也许它可以做更多。以下将相当于您的选择。

```
Ti.Cloud.Places.query({
    where: {
        name: { $regex: 'fred', $options: 'i' }
    }
}, ...); 
```

如果它不起作用，那么您需要为其打开一个功能请求。

[http://cloud.appcelerator.com/docs/api/v1/places/query](http://cloud.appcelerator.com/docs/api/v1/places/query) http://cloud.appcelerator.com/docs/search_query

# python - 无法使用python打开文件并以追加模式写入

> ID：13511518
> 
> 赞同：0
> 
> 时间：2012-11-22T11:14:55.827
> 
> 标签：python, file-io, python-2.7

我的python版本是2.7.3。我正在尝试打开一个文件并写入它。我想附加到文件中，因为写的东西在一个循环中。但它实际上并没有写任何东西。我写的代码如下：

```
import os
import re
file = [ "/home/sam/a.cpp" , "/home/sam/b.cpp" ]
fo = open("/home/sam/missingId.txt", 'a')
print os.getcwd()
for imagefile in file :
    f = open(imagefile,'r')
    print imagefile
    f.readline()
    f.readline()
    condition = True
    while condition:
        line1=f.readline().split()
        if line1[0] != "};" :
            line2=f.readline().split()
            search = "\"" + line1[1] +"\""
            os.system("find /home/sam/abcd/ -exec grep " + search + " \'{}\' \\; -print > ~/sam.txt")
            var = os.popen('ls -ltr ../ritesh.txt').read()
            result = [str(x) for x in filter(None, re.split(' ',var))]
            print result
            print result[4]
            if result[4] == "0" :
                fo.write(line1[1])
                print(" Here I am \n")
                fo.write("\n")
                print line1[1]
            line=f.readline().split()
        else :
            condition = False
fo.close() 
```

当我`print line1[1]`在控制台上获得输出时，它会进入循环内部。

我有一个linux环境。

# php - 如何检查此验证码脚本的正确性

> ID：13511525
> 
> 赞同：0
> 
> 时间：2012-11-22T11:15:12.020
> 
> 标签：php, captcha

如何在服务器端 PHP 中检查此验证码脚本的正确性？

我使用此脚本显示验证码图像并通过 ajax 进行检查。现在我也想在服务器端 PHP 中检查它。怎么做？

验证码.php

```
<?php
//Start a session so we can store the captcha code as a session variable.
session_start();

// Decide what characters are allowed in our string
// Our captcha will be case-insensitive, and we avoid some
// characters like 'O' and 'l' that could confuse users
$charlist = '23456789ABCDEFGHJKMNPQRSTVWXYZ'; 

// Trim string to desired number of characters - 5, say
$chars = 5;
$i = 0;
while ($i < $chars) 
{ 
  $string .= substr($charlist, mt_rand(0, strlen($charlist)-1), 1);
  $i++;
}

// Create a GD image from our background image file
$captcha = imagecreatefrompng('images/captcha.png');

// Set the colour for our text string
// This is chosen to be hard for machines to read against the background, but
// OK for humans
$col = imagecolorallocate($captcha, 0, 0, 0);

// Write the string on to the image using TTF fonts
imagettftext($captcha, 29, 1, 15, 29, $col, 'images/fonts/arial.ttf', $string);

// Store the random string in a session variable
$_SESSION['secret_string'] = $string;

// Put out the image to the page
header("Content-type: image/png");
imagepng($captcha);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:17:15.367

`$_SESSION['secret_string']`当用户提交表单匹配发布的代码时，您有验证码`$_SESSION['secret_string']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:28:12.497

为了在服务器端验证验证码，您可以这样做

```
<?php
session_start();
//code is the name of your captcha text field
if($_SESSION['secret_string']==$_POST['code'])
echo "Captcha verfication passed..";
else
echo "Captcha verfication failed..";
?> 
```

# iphone - EKEvent 警报 AlertView 在不到一秒的时间内消失

> ID：13511526
> 
> 赞同：0
> 
> 时间：2012-11-22T11:15:18.510
> 
> 标签：iphone, events, uialertview, alarm

事件已成功添加，并在事件开始时间前十秒（用于测试目的）播放警报。问题是警报触发（iPhone 上的 UIAlertView 显示）但它会在不到一秒钟的时间内消失。很奇怪...

可能是什么问题呢？

代码：

```
- (IBAction)addEvent:(id)sender {
    EKEventStore *eventStore = [[EKEventStore alloc] init];

    if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
    {
        [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
         {
             EKEvent *anEvent = [EKEvent eventWithEventStore:eventStore];
             anEvent.calendar = eventStore.defaultCalendarForNewEvents;
             anEvent.title = self.eventNameTextField.text;

             NSDate *date = self.datePicker.date;

             anEvent.startDate = date;
             anEvent.endDate = date;

             NSMutableArray *myAlarmsArray = [[NSMutableArray alloc] init];

             EKAlarm *alarm1 = [EKAlarm alarmWithRelativeOffset:-10];

             [myAlarmsArray addObject:alarm1];

             anEvent.alarms = myAlarmsArray;

             NSError *eventError;
             [eventStore saveEvent:anEvent span:EKSpanThisEvent error:&eventError];
         }];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:17:35.713

看下面的代码希望对你有帮助。

```
 EKEventStore *eventStore = [[EKEventStore alloc] init];  
    EKEvent *event = [EKEvent eventWithEventStore:eventStore];
   event.title  = [NSString stringWithFormat:@"%@'s Birthday",strName];
   NSDate *twoYearsFromNow = [NSDate dateWithTimeIntervalSinceNow:1577846275];
    double alarmAmountInSeconds = 60*60*9;
   EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:(1.0*alarmAmountInSeconds)];
   EKRecurrenceRule *recurrance;
   recurrance = [[EKRecurrenceRule alloc] initRecurrenceWithFrequency:EKRecurrenceFrequencyYearly interval:1 end:[EKRecurrenceEnd recurrenceEndWithEndDate:twoYearsFromNow]];
   NSMutableArray *arrayReccurence = [NSMutableArray arrayWithObject:recurrance];
   event.recurrenceRules = arrayReccurence;
   event.startDate = startDate;
    event.endDate  = [[NSDate alloc] initWithTimeInterval:600 sinceDate:event.startDate];
   event.allDay = true;
    event.alarms = [NSArray arrayWithObject:alarm];

   [event setCalendar:[eventStore defaultCalendarForNewEvents]];
   NSError *err;
    [eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

# c# - 需要命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数

> ID：13511527
> 
> 赞同：58
> 
> 时间：2012-11-22T11:15:21.567
> 
> 标签：c#, xml, xml-namespaces, xmldocument

由于此错误，我正试图`SelectNode`从课堂上打电话并遇到麻烦：`XmlDocument`

> 需要命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数。

我的代码：

```
 public void Add(ref XmlDocument xmlFormat, String strName)
   {
        XmlDocument dom;
        XSLTemplate xsl = null;
        String strPath = "";
        XmlNodeList nl;
        XmlAttribute na;
        int n;

        nl = (XmlNodeList)xmlFormat.SelectNodes("//xsl:import/@href",nsm);
    } 
```

和 xsl：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:import href="stylesheets/r_adresetiket.xsl" />
    <xsl:template match="/">
        <xsl:call-template name="retouradres">
            <xsl:with-param name="_retouradres" select="data/adresetiket/_retouradres" />
            <xsl:with-param name="minofdir" select="data/adresetiket/afzendgegevens/afzendgegevens" />
            <xsl:with-param name="checked" select="data/adresetiket/LB" />
        </xsl:call-template>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-22T12:12:00.670

您必须将`xsl`命名空间添加到`XmlNamespaceManager`：

```
var document = new XmlDocument();
document.Load(...);
var nsmgr = new XmlNamespaceManager(document.NameTable);
nsmgr.AddNamespace("xsl", "http://www.w3.org/1999/XSL/Transform");

var nl = document.SelectNodes("//xsl:import/@href", nsmgr); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-09-22T20:06:18.263

该文档可以被遍历`GetElementsByTagName`，它不一定需要使用`XmlNamespaceManager`：

```
var nodes = document.GetElementsByTagName("xsl:import");
var href =  nodes[0].Attributes["href"]; 
```

[小提琴](https://dotnetfiddle.net/AqQ9So)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-05T11:44:17.990

```
var document = new XmlDocument();
document.LoadXml(rawData);

var nsmgr = new XmlNamespaceManager(document.NameTable);
nsmgr.AddNamespace("cbc", "urn:xxx"); //for example
nsmgr.AddNamespace("cac", "urn:yyy");            

XmlElement xmlElem = document.DocumentElement;
var node = xmlElem.SelectSingleNode("cac:AccountingSupplierParty/cac:Party/cac:PartyIdentification/cbc:ID[@schemeID='VKN']/text()", nsmgr);
var nodeText = node.InnerText; 
```

[![在此处输入图像描述](../Images/c0ee84d01b568fb5d663a6701cf3bc95.png)](https://i.stack.imgur.com/dP8El.png)

应添加将在 XML 中使用的所有名称空间。
然后您可以使用 访问相关节点的值`xpath`。

# ruby-on-rails-3 - 在模型中定义关系并更新数据库

> ID：13511533
> 
> 赞同：1
> 
> 时间：2012-11-22T11:15:40.960
> 
> 标签：ruby-on-rails-3

我是 ruby​​ on rails 的新手。作为学习的一部分，我创建了一个示例应用程序。在示例应用程序中，我有 2 个模型：推文、用户

我在我的模型中定义了关系，它定义了以下内容：一个推文有一个用户，一个用户有很多推文。这是我的代码的样子：

```
 class User < ActiveRecord::Base
  attr_accessible :user_email, :user_name, :user_password
  has_many :tweet
 end

class Tweet < ActiveRecord::Base
 attr_accessible :post_title
  belongs_to :user
end 
```

现在我想在我的数据库中更新它。我想检查是否有任何方法可以自动更新，例如运行 rake db:migrate 或其他东西。或者如果我手动完成？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:35:50.427

首先在你的 tweet 表中添加一个 user_id 列，该列将存储用户的 id，这个 user_id 将是识别用户的 tweet 的关键。然后换行

```
has_many :tweet 
```

至

```
has_many :tweets 
```

它会起作用。

谢谢

# asp.net-mvc-3 - 单元测试中的对象引用错误

> ID：13511538
> 
> 赞同：-1
> 
> 时间：2012-11-22T11:15:47.560
> 
> 标签：asp.net-mvc-3, unit-testing, nunit, viewmodel

我有一个控制器动作

```
 [HttpPost]
   public ActionResult CreateFocus(FocusFormModel focus)
    {
        var errors = focusService.CanAddFocus(Mapper.Map<FocusFormModel, Focus>(focus)).ToList();

        ModelState.AddModelErrors(errors);
        if (ModelState.IsValid)
        {
            focusService.CreateFocus(Mapper.Map<FocusFormModel, Focus>(focus));
            var createdfocus = focusService.GetFocus(focus.FocusName);
            return RedirectToAction("Focus", new { id = createdfocus.FocusId });
        }
        return View("CreateFocus", focus);
    } 
```

此操作工作正常，但是当我编写单元测试时它显示错误

你调用的对象是空的

单试是

```
 [Test]
    public void Create_Focus()
    {
        // Arrange                    
        GroupController controller = new GroupController(groupService);
        // Act

        FocusFormModel focus = new FocusFormModel();
           focus.GroupId  = 1;
            focus.FocusName = "t";
            focus.Description = "t";

        Mapper.CreateMap<FocusFormModel, Focus>().ForAllMembers(opt => opt.Ignore());
        Mapper.AssertConfigurationIsValid();
        var result = (RedirectToRouteResult)controller.CreateFocus(focus);
          Assert.AreEqual("Index", result.RouteValues["action"]);
     } 
```

我的模型描述如下

```
public class Focus
{
    public int FocusId { get; set; }

    [StringLength(50)]
    public string FocusName { get; set; }

    [StringLength(100)]
    public string Description { get; set; }

    public int GroupId { get; set; }

    public virtual Group Group { get; set; }

    public DateTime CreatedDate { get; set; }

    public Focus()
    {
        CreatedDate = DateTime.Now;
    }
} 
```

我正在写我的视图模型

```
public class FocusFormModel
{
    public int FocusId { get; set; }
    [Required(ErrorMessage = "*")]
    [StringLength(50)]
    public string FocusName { get; set; }
    [Required(ErrorMessage = "*")]
    [StringLength(100)]
    public string Description { get; set; }

    public int GroupId { get; set; }

    public virtual Group Group { get; set; }

    public DateTime CreatedDate { get; set; }

    public FocusFormModel()
    {
        CreatedDate = DateTime.Now;
    }
} 
```

谁能帮帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:26:29.110

这一行实际上提供了 2 次获得空引用异常的机会：

```
var errors = focusService.CanAddFocus(Mapper.Map<FocusFormModel, Focus>(focus)).ToList(); 
```

首先`focusService`可能是`null`

如果 focusService 不为空，则方法调用`CanAddFocus(Mapper.Map<FocusFormModel, Focus>(focus))`可能会返回`null`

那只是假设。
正如 Greg Smith 所说，堆栈跟踪在这里会很有帮助。

# autocomplete - dojo 1.6中文本区域的自动完成

> ID：13511539
> 
> 赞同：1
> 
> 时间：2012-11-22T11:15:52.690
> 
> 标签：autocomplete, dojo

我们如何在 dojo 1.6 中为简单文本区域自动完成？

我在 jQuery 中找到了一些示例：

[jquery-textarea](https://github.com/mataki/jquery-textarea-imput-support)

这是 jQuery 中自动完成文本区域的示例，我在 DOJO 1.6 中需要相同

# python - Python中的for循环变量

> ID：13511541
> 
> 赞同：0
> 
> 时间：2012-11-22T11:16:06.340
> 
> 标签：python, for-loop, python-2.7

谁能解释如何`x`取整数值。我们直接使用`x`in for 循环 "for x in a" 编译器将如何识别它`x`表示列表中的字符串？

```
>>> # Measure some strings:
... a = ['cat', 'window', 'defenestrate']
>>> for x in a:
... print x, len(x)
...
cat 3
window 6
defenestrate 12 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:21:23.210

`for`在 Python 中的工作方式与在 C 等语言中的工作方式不同。而不是像在 C 中那样向上/向下计数数值并检查结束条件：

```
for (i=0; i<=max; i++) do_something(); 
```

它遍历容器中的所有元素（其名称在 之后引用`in`）：

```
for item in iterable:
    do_something(item) 
```

它的精确行为取决于所使用的容器 ( `iterable`) 的类型；在列表或元组中，它将从第一个元素开始，然后在列表/元组中一次移动一个项目，直到到达最后一个元素。然后每个元素将由一个名称（`item`在本例中）引用，以便可以在循环体中对其进行操作。

在字典中，`for`将遍历字典的键（以未指定的顺序），因此`item`将包含字典的键。

在一个字符串中，它逐个遍历字符串的字母。等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:24:19.843

> X 如何取整数值

它不是。它正在获取您正在迭代的序列中包含的连续值，在这种情况下是字符串。

元素不必属于特定类型，甚至不必属于同一类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:56:33.163

更专业一点，`for`循环遍历由可迭代对象提供的迭代器。

可迭代对象可以是列表、字符串、元组等，迭代器是用于迭代的对象。

使用`for i in a:`，您请求 的迭代器`a`，这与使用 的方式完全相同`iter(a)`。

有时候是这样的

*   要么通过调用`the_iterator = a.__iter__()`
*   或者，如果这不起作用，但`a`有一个`__getitem__()`, 通过调用这个连续增长的索引直到`IndexError`被提升。

然后在每次循环运行时调用`.next()`（`.__next__()`在 Python 3 中）该迭代器，直到迭代器耗尽并引发`StopIteration`。

所以，换句话说：

```
for x in a: print x, len(x) 
```

内部工作就像

```
a_iter = iter(a)
while True:
    try: x = next(a)
    except StopIteration: break
    print x, len(x) 
```

但看起来好多了。

# javascript - 使用 JSON 加载文件

> ID：13511545
> 
> 赞同：-1
> 
> 时间：2012-11-22T11:16:19.527
> 
> 标签：javascript, html, jquery

是否可以加载多个数据文件（file1.xml、file2.xml、file3.xml、..）

```
jQuery.getJSON 
```

我的目标是在基于 JQuery+HTML5 的应用程序中加载数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:19:26.503

如果您的数据与执行 AJAX 请求的 javascript 代码在同一个域中，您可以通过一个简单的 jQuery get 请求来完成：

```
$.get("/url-to-source",function(response){
   //do what ever you want to do with response
}); 
```

如果数据位于与您的 javascript 代码不同的域中，则应使用 jsonp，请参见示例：

[http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

# java - 在 Java 中使用 CFF / Type1c / Type2 字体

> ID：13511554
> 
> 赞同：2
> 
> 时间：2012-11-22T11:16:53.550
> 
> 标签：java, pdf, fonts

我正在尝试在 Java 应用程序中使用一些嵌入在 PDF 文件中的字体。显然，Java 能够加载 Type1 和 TrueType 字体。根据几个网站的说法，PDF 中的 Type1c 字体基本上是 CFF 或 Type2 字体。Java 7 的一个新特性是加载 CFF 字体，但 Font.createFont() 这样不起作用。

那么我哪里错了？Type1c 字体真的是 CFF/OpenType 字体吗？是否需要任何转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:05:44.137

字体是子集的吗？（在这种情况下，它将只包含一些字符而不是整个字体）。

一般来说，嵌入在 PDF 中的 CFF 字体可能需要大量的转换工作才能使其普遍可用 - 如果您一直在我们的博客 (http://blog.idrsolutions.com) 上关注我们的 PDF 到 HTML5 转换器的开发，您将看过很多关于字体各种问题的帖子。

google (http://code.google.com/p/sfntly/) 有一个有趣的 Java 字体工具，如果您正在研究字体操作，fontforge 很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:06:06.207

恐怕你必须弄清楚你到底想打什么仗。不要相信有关字体的网站，请阅读 PDF 规范： http: [//www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)

具体来说，您正在寻找第 9.6 章 - 简单字体和 9.7 - 复合字体。

总而言之，PDF 文件中的字体可以是多种类型： - Type 0 - Type 1 - Type 3 - TrueType

Type 1 和 TrueType 是最简单的，您很可能在 PDF 文件中遇到它们。Type 3 是一种字体类型，您可以在其中使用图形来绘制字符。不是很常见。

Type 0 是一种更复杂的字体类型，最初设计用于允许您使用大型字符集（想想日文/中文），但现在它也由许多专业设计和布局应用程序常规生成。这种 Type 0 字体类型有两个子类型： - SubType 0，它是 Type 1 字体，被按摩到 Type 0 夹克中，以及 - SubType 2，它是 TrueType 字体被按摩到 Type 0 夹克中

在所有情况下，系统上的“真实”字体与嵌入在 PDF 文件中的相同字体之间存在显着差异。

首先查看包含您要使用的字体的 PDF 文件。使用 callas (http://www.callassoftware.com/callas/doku.php/en:download) 的 pdfToolbox 或 Enfocus (http://www.enfocus.com/en/products/browser) 的 Browser 等工具. 这两个工具都允许您研究 PDF 文件的低级结构，包括查看实际的页面描述代码和查看字体字典。pdfToolbox 特别擅长深入研究 PDF 文件中的字体，包括查看实际形状和用于绘制这些形状的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T03:53:58.323

FontVerter 是我不久前编写的一个开源 Java 库，它可以将来自 PDF 的裸 CFF* 和 Type0/复合字体转换为 OTF/TTF 和 WOFF1/2。它还可以尝试修复和规范化在浏览器中无法正常工作的 OTF/TTF 字体，我发现嵌入在 PDF 中的开放式字体通常存在各种问题，例如缺少表格，这会阻止 chrome 正确呈现它们。

[FontVerter github](https://github.com/m-abboud/FontVerter)

（*bare CFF = type1c 我相信？，已经有点过了，我忘记了哪个类型是哪个）

# c# - 基于无序参数集的重载方法

> ID：13511561
> 
> 赞同：2
> 
> 时间：2012-11-22T11:17:20.400
> 
> 标签：c#, .net, overloading, dynamictype

我有以下形状层次结构：

```
public abstract class Shape
{ ... }

public class Rectangle : Shape
{ ... }

public class Circle : Shape
{ ... }

public class Triangle : Shape
{ ... } 
```

我已经实现了以下功能来确定两个形状是否相交。我使用以下`IsOverlapping`扩展方法，它用于在运行时`dynamic`调用适当的重载`IsOverlappingSpecialisation`方法。我相信这被称为双重调度。

```
static class ShapeActions
{
    public static bool IsOverlapping(this Shape shape1, Shape shape2)
    {
        return IsOverlappingSpecialisation(shape1 as dynamic, shape2 as dynamic);
    }

    private static bool IsOverlappingSpecialisation(Rectangle rect, Circle circle)
    {
        // Do specialised geometry
        return true;
    }

    private static bool IsOverlappingSpecialisation(Rectangle rect, Triangle triangle)
    {
        // Do specialised geometry
        return true;
    } 
```

这意味着我可以执行以下操作：

```
Shape rect = new Rectangle();
Shape circle = new Circle();

bool isOverlap = rect.IsOverlapping(circle); 
```

我现在面临的问题是，我还必须实施以下`ShapeActions`工作`circle.IsOverlapping(rect)`：

```
private static bool IsOverlappingSpecialisation(Circle circle, Rectangle rect)
{
    // The same geometry maths is used here
    return IsOverlappingSpecialisation(rect, circle); 
} 
```

这是多余的（因为我需要为每个创建的新形状执行此操作）。有没有办法解决这个问题？我想过将`Tuple`参数传递给`IsOverlapping`，但我仍然有问题。本质上，我希望基于唯一的无序参数集发生重载（我知道这是不可能的，所以寻找解决方法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:48:12.597

我可能在这里使事情过于复杂，但它确实有效......

```
public static class OverlapCalculator
{
    private static readonly Dictionary<Tuple<Type, Type>, Delegate> Calculations = new Dictionary<Tuple<Type, Type>, Delegate>();

    public static bool IsOverlapping<TShape, TOtherShape>(this TShape shape, TOtherShape otherShape)
        where TShape : Shape
        where TOtherShape : Shape
    {
        var calculation = GetCalculationDelegate<TShape, TOtherShape>();
        if (calculation != null)
        {
            return calculation(shape, otherShape);
        }

        throw new InvalidOperationException(string.Format("Could not find calculation for {0} and {1}", typeof(TShape).Name, typeof(TOtherShape).Name));
    }

    public static void AddCalculation<TShape, TOtherShape>(Func<TShape, TOtherShape, bool> calculation)
        where TShape : Shape
        where TOtherShape : Shape
    {
        var key = new Tuple<Type, Type>(typeof(TShape), typeof(TOtherShape));
        Calculations[key] = calculation;

        var reverseKey = new Tuple<Type, Type>(typeof(TOtherShape), typeof(TShape));
        var reverseCalculation = new Func<TOtherShape, TShape, bool>((otherShape, shape) => calculation(shape, otherShape));
        Calculations[reverseKey] = reverseCalculation;
    }

    private static Func<TShape, TOtherShape, bool> GetCalculationDelegate<TShape, TOtherShape>()
    {
        var key = new Tuple<Type, Type>(typeof(TShape), typeof(TOtherShape));

        Delegate calculationDelegate;
        if (Calculations.TryGetValue(key, out calculationDelegate))
        {
            return (Func<TShape, TOtherShape, bool>) calculationDelegate;
        }

        return null;
    }
} 
```

这只是将代表存储在 a 中，并在您调用a`Dictionary`时尝试获取匹配的代表。`IsOverlapping``Shape`

你像这样使用它：

```
public class Program
{
    public static void Main()
    {
        // Add the calculation algorithm defined below.
        OverlapCalculator.AddCalculation<Rectangle, Triangle>(IsOverlapping);

        var rect = new Rectangle();
        var triangle = new Triangle();
        var circle = new Circle();

        // These will work since we have a two way calculation for Rectangle and Triangle
        rect.IsOverlapping(triangle);
        triangle.IsOverlapping(rect);

        // This will throw since we have no calculation between Circle and Triangle.
        circle.IsOverlapping(triangle);
    }

    private static bool IsOverlapping(Rectangle rectangle, Triangle triangle)
    {
        // Do specialised geometry
        return true;
    }
} 
```

这应该是解决您问题的简洁快速（无反射）的解决方案。

此解决方案的一个缺点是您必须使用该方法“声明”计算方法`AddCalculation`。

# c# - asp.net c#优化代码

> ID：13511565
> 
> 赞同：0
> 
> 时间：2012-11-22T11:17:21.197
> 
> 标签：c#, asp.net, optimization, refactoring

只是觉得我在这里浪费循环 = CPU 时间，并且想知道是否有办法优化这段代码，或者只是最小化它。

基本上，代码的作用是通过 editOkkInfo 控件中的每个控件。检查当前控件是否是一个文本框，如果是，那么它将执行一些操作，如果不是，它将跳转到下一个 if 语句。下一条语句检查我们是否计数了 14 次（因为我只有 14 个文本框），如果不是 14 次，则循环继续，如果计数为 14 次，则循环中断。

任何帮助表示赞赏，提前感谢，这里是代码，干杯。

```
iterate = 0;
foreach (System.Web.UI.Control ctrl in this.editOkkInfo.Controls)
{
    if (ctrl is TextBox)
    {
        tb = (TextBox)this.FindControl(ctrl.ClientID.ToString());
        tb.Text = dt.DefaultView[0][iterate++].ToString();
    }
    if (iterate == 14)
       break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:23:20.723

无需使用`FindControl`，因为您已经拥有了控制权。只需投射它：

```
iterate = 0;

foreach (System.Web.UI.Control ctrl in this.editOkkInfo.Controls)
{
    if (ctrl is TextBox)
    {
        tb = (TextBox)ctrl;
        tb.Text = dt.DefaultView[0][iterate++].ToString();
    }

    if (iterate == 14)
        break;
} 
```

额外的可读性改进将消除所有控件和`is`测试的循环：

```
foreach (TextBox ctrl in this.editOkkInfo.Controls)
{
    ctrl.Text = dt.DefaultView[0][iterate++].ToString();

    if (iterate == 14)
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:22:45.487

您可以通过转换 ctrl 变量来保存 FindControl() 解析：

```
tb = (TextBox) ctrl;
tb.Text = //... 
```

而且，我们应该知道editOkkInfo.Controls是由代码创建还是在aspx页面中声明。如果前者为真，则可以将对此类对象的引用保存在变量中，然后使用它而不是循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:23:50.967

```
if (ctrl is TextBox)
{
    tb = (TextBox)ctrl;
} 
```

这应该足够了，您正在查看`TextBox`using `FindControl`，知道您拥有它。因此，您可以将控件转换为`TextBox`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:43:34.833

我已经看到了一种更快的方法来查找特定类型的所有控件而不是循环。这似乎更有效率。 [使用 linq 获取网页中特定类型的 web 控件列表](https://stackoverflow.com/questions/3613561/using-linq-to-get-list-of-web-controls-of-certain-type-in-a-web-page) 希望对 Milind 有所帮助

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-22T15:09:04.163

我认为 foreach 一段时间更好，因为一段时间不会检查所有控件，直到数量为 14（可以或不检查所有控件，取决于！）

# sql - 如何跳过 sql 时间戳以获取特定日期的记录

> ID：13511567
> 
> 赞同：2
> 
> 时间：2012-11-22T11:17:26.473
> 
> 标签：sql

我想比较我的 sql 查询中的日期并获取特定日期的记录，但它以时间戳格式存储在 postgres 中。什么样的查询只能比较日期部分，因为我想要并跳过时间部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:18:52.590

试试这个：

```
SELECT * 
FROM tab 
where date_col::DATE BETWEEN '2012-01-01'::DATE AND '2012-01-05'::DATE 
```

## [SQL 小提琴](http://sqlfiddle.com/#!1/ae750/2/0)演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:19:59.843

此查询将为您提供类似“2012/11/22”的日期，您可以将其用于日期比较。

```
 SELECT CONVERT(VARCHAR(10),GETDATE(),111)
 //OR simply
 select CAST(GETDATE() as DATE) 
```

您可以在此处查看更多格式：- [CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

# c++ - 柠檬.eps中的自动坐标导出

> ID：13511569
> 
> 赞同：5
> 
> 时间：2012-11-22T11:17:29.510
> 
> 标签：c++, graph, coordinates, eps, lemon-graph-library

在 Lemon 教程中，所有示例在绘制图形时都指定坐标：

```
graphToEps(g,"graph_to_eps_demo_out_1_pure.eps").
    coords(coords).
    title("Sample .eps figure").
    copyright("(C) 2003-2009 LEMON Project").
    run(); 
```

是否有可能在不指定坐标的情况下将图形图像导出到 .eps 文件（或任何其他文件）？（我的意思是自动排列）

# iphone - 如何仅使用 Game Center 使用 wifi 玩游戏？

> ID：13511571
> 
> 赞同：0
> 
> 时间：2012-11-22T11:17:31.713
> 
> 标签：iphone, objective-c, ios, xcode, game-center

我是游戏中心的新手，使用游戏中心并获取本地 wifi 玩家 CKMatchmaker 提供了方法

```
-startBrowsingForNearbyPlayersWithReachableHandle 
```

但我不知道在哪里使用这种方法。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:34:24.883

这里有一个教程：[使用游戏中心进行多人游戏](http://upyun.cocimg.com/upload/g2/2012/10/session_519__multiplayer_gaming_with_game_center.pdf)。这是 Apple 关于[GKMatchmaker](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchmaker_Ref/Reference/Reference.html)的文档。

# iphone - 如何为 UISearchBar 着色，使其看起来与背景无缝

> ID：13511574
> 
> 赞同：1
> 
> 时间：2012-11-22T11:17:42.660
> 
> 标签：iphone, ios, uisearchbar, uisearchdisplaycontroller

我正在尝试为这个 UISearchBar 着色，使其看起来与背景无缝（如第二张图片中所示）。是否有可能做到这一点？我已经尝试在 IB 中以编程方式进行设置，但没有运气。

谢谢你的帮助

![UISearchBar 截图](../Images/850f77a2fd6f854805378a85b15d6587.png)

这是所需的外观：

![UISearchBar 屏幕截图 - 所需的外观](../Images/0a7c5455f6b3413161fd3e3bdbae0ed6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:23:17.090

```
 UITextField *searchField = [self.searchBar valueForKey:@"_searchField"];
    [searchField setBackground:[UIImage imageNamed:@"searchfield_bg"]];

    [self.searchBar setTintColor:[UIColor blackColor]];
    UIImage *searchimg = [UIImage imageNamed:@"search_panel.png"];

    for (UIView *subview in self.searchBar.subviews) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            UIView *bg = [[UIView alloc] initWithFrame:subview.frame];
            bg.backgroundColor = [UIColor colorWithPatternImage:searchimg];
            [self.searchBar insertSubview:bg aboveSubview:subview];
            [subview removeFromSuperview];
            [bg release];
            break;
        }
    } 
```

我使用这些图像，您也可以使用您的图像并更改颜色，我的要求是制作黑色搜索栏，所以我使用黑色

![在此处输入图像描述](../Images/7f452466654bb732a1cc8f684082e431.png) ![在此处输入图像描述](../Images/f5d0d9e8dcf9dd20585bbcc7ed9f343c.png)

它看起来像： ![在此处输入图像描述](../Images/2314fb6a54711bcb66ceeb342e732b55.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:26:53.950

像这样设置Tint颜色..

```
 [searchBar setBarStyle:UIBarStyleDefault];
    [searchBar setTintColor:[UIColor colorWithRed:.81 green:.14 blue:.19 alpha:1]];//set alpha with your requirement 
```

也与图像一起使用此代码它的工作很好..

```
 for (UIView *subview in searchBar.subviews) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            UIView *bg = [[UIView alloc] initWithFrame:subview.frame];
            bg.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"top-bar.png"]];
            [searchBar insertSubview:bg aboveSubview:subview];
            [subview removeFromSuperview];
            break;
        }
    } 
```

对于带有红色的整个搜索栏，然后简单地复制粘贴此代码伙伴..在这里我解决了这个问题

```
 for (UIView *subview in searchBar.subviews) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            UIView *bg = [[UIView alloc] initWithFrame:subview.frame];
            bg.backgroundColor = [UIColor redColor];
            [searchBar insertSubview:bg aboveSubview:subview];
            [subview removeFromSuperview];
            break;
        }
    }
    [searchBar setTintColor:[UIColor redColor]]; 
```

# c# - 我应该在 SQL 中还是在 LINQ 中执行 Where 子句？

> ID：13511583
> 
> 赞同：2
> 
> 时间：2012-11-22T11:18:06.487
> 
> 标签：c#, asp.net, linq

我有一个方法可以将 where 子句传递给查询。然后此方法返回一个 DataSet。

什么是更快和更有效的？要传递 where 子句以便 SQL Server 发送回更少的数据（但必须做更多的工作）还是让 Web 服务器通过 LINQ 处理它？

**编辑**：

这是假设 SQL Server 比 Web 服务器更强大（可能应该是这种情况）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T11:25:27.537

您是否直接使用 ADO.Net 来执行数据访问？如果是这样，那么是的 - 在您的 SQL 中使用 WHERE 子句并限制发送回您的应用程序的数据量。

SQL Server 在这方面很有效，您可以设计索引来帮助它访问数据，并且您将更少的数据传输回您的客户端应用程序。

假设您在一个表中有 20,000 行，但您只对其中的 100 行感兴趣。当然，仅从源中获取 100 行并将它们发送回比您在 Web 应用程序中过滤的全部行要有效得多。

您已标记 linq-to-sql，如果是这种情况，那么在 LINQ 语句中使用 WHERE 子句将在 SQL Server 上生成 WHERE 子句。

但是总体经验法则，只需获取您感兴趣的数据。通过网络传输的数据较少，查询通常会运行得更快（只要通过索引等进行了优化），并且您的客户端应用程序要做的工作更少，这是已经只得到了它感兴趣的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T11:24:08.750

事实上，SQL Server 擅长过滤数据：它就是为此而构建的，因此请始终使用它。如果你在 C# 中过滤；您将无法使用表上的任何索引。它的效率会低得多。

只选择所有行以丢弃许多/大部分是浪费的，它肯定会显示在性能中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:20:18.777

> 如果您不使用任何类型`ORM`的条件，请在数据库级别使用`where`条件，因为我认为过滤应该在数据库级别进行。

但是，如果您使用类似 ORM 的任何 ORM，`Entity Framework`或者`Linq to SQL`从性能的角度来看，它与您的`Linq` `Where`子句最终会被翻译成一个`SQL` `Where`子句，就您的 using`where`子句而言`IQuerable`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:29:28.113

从效率的角度来看，应该是 SQL Server 来完成这项工作。如果它不需要多次数据库调用，那么使用 SQL Server 总是更好的解决方案。但是，如果您已经拥有数据库中的数据集，则可以使用 LINQ 对其进行过滤

# asp.net-mvc - 需要 MVC 3/4 Razor 帮助

> ID：13511585
> 
> 赞同：1
> 
> 时间：2012-11-22T11:18:09.030
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我需要为母版页创建菜单。我遇到了以下问题

```
<ul class="main_menu">

    @foreach (var node in Model.Nodes) 
    {
        int i = 1;
        <li class="**HOW TO ADD HERE A CLASS like level+i.ToString()?????**">@Html.DisplayFor(m => node) | 
            @if (node.Children.Any()) {
                <ul class="menuchild" style="display: none;">
                    <li>
                        @Html.DisplayFor(m => node.Children)
                    </li>
                </ul>
            }
        </li>
    }
</ul> 
```

我需要为 Javascript 的菜单创建级别，比如 level1 、 level2 、 level3 ，如何在 Razor 中组合字符串。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:19:54.413

用@() 括起来

```
<li class="@("level" + i.ToString() )"> 
```

或者

```
<li class="@string.Format("level{0}", i)"> 
```

# .net - XMLDocument 使用带有命名空间的 XPATH 选择节点

> ID：13511586
> 
> 赞同：0
> 
> 时间：2012-11-22T11:18:11.103
> 
> 标签：.net, xpath, vb.net-2010, xmldocument, selectnodes

```
 <GetDataSetResult>
        <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
          <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
            <xs:complexType>
              <xs:choice minOccurs="0" maxOccurs="unbounded">
                <xs:element name="MyTable">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="myColumn" type="xs:string" minOccurs="0" />
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:choice>
            </xs:complexType>
          </xs:element>
        </xs:schema>
        <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
          <NewDataSet xmlns="">
            <MyTable diffgr:id="MyTable1" msdata:rowOrder="0">
              <myColumn>Ahmet</myColumn>
            </MyTable>
            <MyTable diffgr:id="MyTable2" msdata:rowOrder="1">
              <myColumn>Ali</myColumn>
            </MyTable>
            <MyTable diffgr:id="MyTable3" msdata:rowOrder="2">
              <myColumn>Veli</myColumn>
            </MyTable>
            <MyTable diffgr:id="MyTable4" msdata:rowOrder="3">
              <myColumn>Osman</myColumn>
            </MyTable>
            <MyTable diffgr:id="MyTable5" msdata:rowOrder="4">
              <myColumn>Mahmut</myColumn>
            </MyTable>
            <MyTable diffgr:id="MyTable6" msdata:rowOrder="5">
              <myColumn>Memed</myColumn>
            </MyTable>
          </NewDataSet>
        </diffgr:diffgram>
      </GetDataSetResult> 
```

在上面的 xml 中，如何`xs:element`使用属性进行选择`msdata:IsDataSet`？我尝试了下面的代码，但没有成功。

```
Dim doc As New XmlDocument()
doc.Load("test.xml")
Dim root As XmlNode = doc.DocumentElement

Dim nsmgr As New XmlNamespaceManager(doc.NameTable)
nsmgr.AddNamespace("xs", "http://www.w3.org/2001/XMLSchema")
nsmgr.AddNamespace("msdata", "urn:schemas-microsoft-com:xml-msdata")

Dim node As XmlNode = root.SelectSingleNode( _
     "descendant::xs:element[msdata:IsDataSet]", nsmgr)
Console.WriteLine(node.InnerXml) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:29:44.260

`IsDataSet`是一个属性，因此对于您的 XPath，您需要`descendant::xs:element[@msdata:IsDataSet]`选择存在该属性的`descendant::xs:element[@msdata:IsDataSet = 'true']`那些元素或选择该属性具有值的那些元素`true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:38:42.623

问题出在其他地方。在将 XML 从文件读取到内存时，它奇怪地包含`"&lt;"`and`"&gt;"`而不是`"<"`和`">"`for 一些内部节点。

我更换了这些，问题就消失了。

# javascript - Jquery/Javascript - 不能增加数字（tweet-id）

> ID：13511587
> 
> 赞同：3
> 
> 时间：2012-11-22T11:18:14.740
> 
> 标签：javascript, jquery, twitter, integer, increment

我不明白。
我无法增加 Tweet-ID ...

这是一个演示：http: [//jsbin.com/idupoq/1/edit](http://jsbin.com/idupoq/1/edit)

```
glb = {};
glb.lastTweetId = 0;

getTweets();

function getTweets()
{
    console.info('# LAST ID');
    console.log(glb.lastTweetId);

    console.info('# TEST 1');
    glb.lastTweetId++;
    console.log(glb.lastTweetId);  

    console.info('# TEST 2');
    glb.lastTweetId = glb.lastTweetId+1;
    console.log(glb.lastTweetId);  

    console.info('# TEST 3, OK IS INT BUT PARSE AGAIN ');
    glb.lastTweetId = parseInt(glb.lastTweetId);
    glb.lastTweetId++;
    console.log(glb.lastTweetId);  

    $.getJSON('http://search.twitter.com/search.json?q=%23wwm&since_id='+glb.lastTweetId+'&include_entities=true&result_type=mixed&lang=de&callback=?', function(data, textStatus)
    {
        if(data.results.length > 0)
        {
            glb.lastTweetId = data.results[0]['id'];
        }
        glb.tm= setTimeout('getTweets();',5000);
    });
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T11:26:41.377

发生这种情况是因为收到的 ID 超出了[数字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)格式的范围，例如

```
271567725082578940 + 1 = 271567725082578940 
```

您应该使用特殊库来处理大量数字。一些例子：

*   [https://github.com/jtobey/javascript-bignum](https://github.com/jtobey/javascript-bignum)
*   [http://jsfromhell.com/classes/bignumber](http://jsfromhell.com/classes/bignumber)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:56:01.197

正如其他人已经说过的，这是因为 Number 无法表达`271567725082578941`。如果你想要对这个数字做的只是加一，那么下面的函数应该是你所需要的：

```
function stringInc(v){
    var digits = v.toString().split('');
    var i = digits.length-1;
    while (digits[i]==9 && i>0){      
      digits[i] = 0;
      i--;
    }
    digits[i] = 1+parseInt(digits[i]);
    return digits.join('');
} 
```

如果您希望对数字做更多的事情，那么最好使用 VisioN 建议的 BigNumber 库。

无论哪种方式，您都应该注意您无法从 读取推文 ID `data.results[0]['id']`，因为它被解释为数字并四舍五入为`271567725082578940`。你需要使用`data.results[0]['id_str']`.

在此处查看更新的 jsbin：http: [//jsbin.com/idupoq/19/](http://jsbin.com/idupoq/19/)。请注意，控制台正在记录来自服务器的结果：

```
...

"geo":null,
"id":     271580395022217200,
"id_str":"271580395022217216",
"iso_language_code":"de"

... 
```

因此`271567725082578940`，您一直在观察的值也是不正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:43:51.683

脏但短
[http://jsbin.com/idupoq/18/edit](http://jsbin.com/idupoq/18/edit)

```
 glb.lastTweetId = ''+data.results[0]['id']+'';
    var lastTwoDig = parseInt(glb.lastTweetId.substr(glb.lastTweetId.length-2));
    var startDigit = glb.lastTweetId.substring(0, glb.lastTweetId.length-2);
    lastTwoDig++;
    if(lastTwoDig==01){ lastTwoDig = '01'; }
    console.log(glb.lastTweetId);
    console.log(' '+startDigit+''+lastTwoDig+' '); 
```

# javascript - 骨干模型默认值：null？空字符串？空数组？

> ID：13511588
> 
> 赞同：1
> 
> 时间：2012-11-22T11:18:17.220
> 
> 标签：javascript, json, web-services, backbone.js

在我的 Backbone 应用程序中，当我从 HTTP JSON API 检索数据时会实例化模型。值与此服务不同，因此我决定提供一致性，`defaults`以便所有模型至少共享相同的基本属性。例如，对模板很有用。

我只是想知道：分配给每个属性的最佳价值是什么？有些是字符串，有些是数字，有些是数组。不确定我是否应该`null`默认为每个人分配（这就是我现在正在做的事情），或者我是否应该为未来的字符串使用空字符串`""`，为未来的数组使用空`[]`数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:38:18.990

我通常分配`null`值。我不太可能将其`null`用作传递的实际值，因此如果我的应用程序中的某些内容仍然存在`null`，我可以判断某处出现了问题。

顺便说一句，通过`defaults`属性分配空数组或对象时要小心。当你这样做时，数组/对象在你的模型的每个实例中被引用，而不是复制到每个实例中，所以它们都会修改相同的数据。

# php - 如何在 ZF2 的 Zend\ServiceManager 中使用 Zend\Di？

> ID：13511594
> 
> 赞同：3
> 
> 时间：2012-11-22T11:18:48.610
> 
> 标签：php, dependency-injection, zend-framework2

我试图让 Zend\ServiceManager 使用 Zend\Di 创建我的实例，因为我已经预先扫描和缓存了 DI 定义。我意识到这可能会带来速度损失，但另一方面，我需要编写更少的元代码。

ServiceManager[文档](http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.intro.html)说

> ServiceManager 还提供与 Zend\Di 的可选联系，允许 Di 充当管理器的初始化器或抽象工厂。

但我没有找到任何关于如何让 ServiceManager 使用 Zend\Di 的示例。我什至不确定我应该在哪里设置它，也许在 Module::getServiceConfig() 中？谁能提供一些示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:47:16.707

以下对我有用。为了使 Zend\Di 与 Zend\ServiceManager 兼容，我从 Zend\Di\Di 扩展了一个 MyLib\Di\Di 类，它实现了 AbstractFactoryInterface。

```
namespace MyLib\Di;
use Zend\ServiceManager\AbstractFactoryInterface; 
use Zend\ServiceManager\ServiceLocatorInterface;

class Di extends \Zend\Di\Di implements AbstractFactoryInterface
{
    public function canCreateServiceWithName(ServiceLocatorInterface $serviceLocator, $name, $requestedName)
    {
        return true;
    }

    public function createServiceWithName(ServiceLocatorInterface $serviceLocator, $name, $requestedName)
    {
        return $this->get($requestedName);
    }
} 
```

现在，我可以使用 MyLib\Di\Di 作为 Zend\ServiceManager 的备用抽象工厂。这是我如何创建 IndexController 的示例。IndexController 的依赖项（构造函数参数）是自动注入的。

```
class Module
{
    ... 

    public function getServiceConfig()
    {        
        $this->di = new \MyLib\Di\Di;
        $this->configureDi($this->di); // Set up definitions and shared instances

        return array(
            'abstract_factories' => array($this->di),
        );
    }

    public function getControllerConfig()
    {
        return array(
            'factories' => array(
                'Survey\Controller\IndexController' => function() {
                    return $this->di->get('Survey\Controller\IndexController');
                },
            ),
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T23:59:43.170

一种选择 - 添加到 config/module.config.php

```
'service_manager' => array(
    'invokables' => array(
        'Application\Service\User'              => 'Application\Service\User',
    ),
  ), 
```

那么类需要实现 Zend\ServiceManager\ServiceManagerAwareInterface

启动时， serviceManager 实例将被注入，然后你可以在类中使用这样的东西：

```
$authService = $this->getServiceManager()->get('Zend\Authentication\AuthenticationService'); 
```

第二种选择是将其放入 Module.php

```
public function getServiceConfig() 
```

# oracle - 日期和时间预言错误

> ID：13511597
> 
> 赞同：0
> 
> 时间：2012-11-22T11:19:02.743
> 
> 标签：oracle, datetime, oracle10g

我试图在 oracle 中显示日期和时间，其中我已将日期和时间格式更改为：

```
ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY MM DD';
ALTER SESSION SET NLS_DATE_FORMAT = 'HH24:MI:SS';
insert into train 
  values(18103,'2011/apr/30 21:00:00','2011/apr/31 21:00:00','abl','ndl'); 
```

但我得到的错误是`ORA-01861: literal does not match format string`

我也尝试输入日期和时间，`2011/04/30 21:00:00`但仍然返回相同的错误！帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:37:51.840

您的 nls_date_format 与您插入的日期字符串的格式不匹配。它应该是：

```
SQL>ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY/MON/DD HH24:MI:SS';

session SET altered.

SQL>insert into dat 
    values('2011/apr/30 21:00:00');

1 rows inserted.

SQL>select d from dat;

D                    
----------------------
2011/APR/30 21:00:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:37:58.423

`ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY MM DD'; ALTER SESSION SET NLS_DATE_FORMAT = 'HH24:MI:SS';`

这些必须结合起来。例如

`ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY MM DD HH24:MI:SS'`

在您的插页上也一定要`TO_DATE`例如`to_date('2011/apr/31 21:00:00', 'yyyy/mon/dd hh24:mi:ss')`

# javascript - 在电台选择上显示各种内容

> ID：13511598
> 
> 赞同：0
> 
> 时间：2012-11-22T11:19:02.947
> 
> 标签：javascript, jquery, select, tabs, radio-button

我正在尝试根据您选择的收音机隐藏和显示不同的 div。不幸的是，到目前为止我还没有提出可行的解决方案。这是我的起始代码[http://jsbin.com/edokef/1/edit](http://jsbin.com/edokef/1/edit)

也许有人可以建议如何实现这一目标？我正在考虑获取每个收音机的索引，但每个收音机都在单独的 div 包装内，在这种情况下，索引始终为 0。

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:23:08.910

演示：http: [//jsbin.com/edokef/7/edit](http://jsbin.com/edokef/7/edit)

代码：

```
options.click(function(){
      var id = "opt" + $(this).val();
      $(".optDivs").hide();
      $("#" + id).show();

    }); 
```

另外，应该显示的每个 div 现在都有一个类 ( `optDivs`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:25:34.307

很抱歉没有为您提供完整的解决方案。

1）为什么要使用索引？每台收音机都有价值。改用那个。

2）“根据您选择的收音机隐藏和显示不同的div”对我来说听起来至少像一对多的关系。我建议为此任务使用发布者/订阅者。这种模式有很多可用的实现，例如。[https://github.com/federico-lox/pubsub.js](https://github.com/federico-lox/pubsub.js)

PS 尽量避免基于 jQuery 的 pubsub 实现（它们在 DOM 上操作并且有点慢）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:25:52.710

您可以使用[toggle()](http://api.jquery.com/toggle/)基于单选按钮的 div 显示或隐藏

```
 var options = $('#options').find('input');

  options.click(function(){

   $("#"+$(this).parent().attr('class')).toggle();

  });

})(); 
```

[**演示**](http://jsbin.com/edokef/10/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:25:55.403

可能这可以帮助你

```
$(function(){

  (function(){

  var options = $('#options').find('input');

    options.click(function(){
         if($(this).is(':checked'))
         {

          $('#' + $(this).parent().attr('class')).show();
         }
                  else
                  {
                  $('#' + $(this).parent().attr('class')).hide();
                  }

    });

  })();

  }); 
```

[演示](http://jsbin.com/edokef/5/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T11:26:38.727

这将起作用：

```
 <script>
  $(function(){

  (function(){

  var options = $('#options').find('input');

    $(options).click(function(){

      $('#opt1, #opt2, #opt3').hide();
      $('#' + $(this).parent().attr('class')).show();

    });

  })();

  });
  </script> 
```

# mysql - 合并唯一键包含多列的两个表

> ID：13511604
> 
> 赞同：0
> 
> 时间：2012-11-22T11:19:25.000
> 
> 标签：mysql, sql, tandem, hp-nonstop

我有两个表 A 和 B（具有相同的架构），我想通过将 A 中的所有条目插入 B 来合并它们。如果表 B 已经有与 A 中的键关联的数据，我想静默删除这些数据。

问题是表 B 有一个由三列组成的唯一键索引，所以我不能只说“ `WHERE A.key <> B.key`”。

我似乎无法按照以下方式制定 SQL 语句：

```
INSERT INTO B 
VALUES ((SELECT * FROM A WHERE ... NOT IN ...)) 
```

有没有办法将`INSERT`那些从 A 到 B 的行在 B 中不存在相应的三列键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:24:41.573

```
INSERT INTO B 
(Col1, Col2, Col3, ColN)
SELECT
A.Col1, A.Col2, A.Col3, COlN
FROM A
LEFT JOIN B
ON A.COL1 = B.Col1
AND A.COL2 = B.Col2
AND A.COL3 = B.Col3
WHERE B.Col1 IS NULL 
```

本质上用左连接连接 2 个表，并从 A 插入所有 B 为空的表（B 表中没有对应值用于 3 个键列上的连接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:27:37.023

你可以使用`NOT EXISTS`而不是`NOT IN`

```
INSERT B
SELECT  *
FROM    A
WHERE   NOT EXISTS
        (   SELECT  1
            FROM    B
            WHERE   A.Key1 = B.Key1
            AND     A.Key2 = B.Key2
        ) 
```

虽然根据[这个](https://stackoverflow.com/a/2246793/1048425)MySQL 优化`LEFT JOIN`/`IS NULL`比不存在更好：

```
INSERT B
SELECT  A.*
        LEFT JOIN B
            ON A.Key1 = B.Key1
            AND A.Key2 = B.Key2
WHERE   B.Key1 IS NULL 
```

# .net - 黑客是否能够查看隐藏字段的值

> ID：13511610
> 
> 赞同：1
> 
> 时间：2012-11-22T11:19:46.393
> 
> 标签：.net, html, security

我想使用 javaScrip 调用 Web 服务，但是 Web 服务调用包含用户名和密码，所以我正在考虑将用户名和密码的值存储在隐藏字段中，然后使用 javaScript 通过附加来构造 Web 服务 URL用户名和密码的值。如果我要为这些 Web 服务调用实现 https，那么将用户名和密码的值存储为 html 页面内的隐藏字段是否安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T11:21:18.470

**绝对是**的，黑客将能够看到隐藏字段的值。任何查看页面源代码的人都可以轻松看到 HTML 中的隐藏字段。

为了说明这一点，这里有一些来自谷歌登录页面的代码。

```
<form id="gaia_loginform"
      action="https://www.google.com/LoginAction2?service=mail" method="post"
      onsubmit="return(gaia_onLoginSubmit());">
<div id="gaia_loginbox">
<table class="form-noindent" cellspacing="3" cellpadding="5" width="100%" border="0">
  <tr>
  <td valign="top" style="text-align:center" nowrap="nowrap"
        bgcolor="ddf8cc">
  <input type="hidden" name="ltmpl"
             value="default">
  <input type="hidden" name="ltmplcache"
             value="2"> 
```

特别注意这一点：

隐藏意味着它不会显示在网页上，但仍包含在源代码中。所有人所要做的就是导航到该页面，查看源代码，然后他们可以找到任何隐藏的条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:21:35.700

是的，任何客户都可以看到它，不，它不安全。您只需要查看页面的源代码，甚至隐藏`<input>`的值都是可见的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T11:25:37.927

如果攻击者在网络上监听，它是安全的。正确使用 HTTPS 会阻止他学习任何有用的东西。如果用户名/密码是识别浏览器用户的对，那么这是正确的线程模型。如果用户名/密码对将您（服务器运营商）标识给第三方，则该模型不正确。

如果您将用户视为敌人，这是不安全的。他可以简单地让他的浏览器给他隐藏字段的值，或者他可以嗅探 SSL 连接（例如使用 javascript，或者挂钩 SSL 库，或者让他的 SSL 库发出日志文件的密钥）。您不能对您发送给客户的任何信息保密。

实际上，这意味着您应该使用用户的会话 ID 验证客户端，并使用服务器连接到外部 API。

# python - 将截断的 Python 浮点数格式化为字符串中的 int

> ID：13511612
> 
> 赞同：41
> 
> 时间：2012-11-22T11:19:50.757
> 
> 标签：python, format

一个快速的不费吹灰之力：

```
some_float = 1234.5678
print '%02d' % some_float  # 1234

some_float = 1234.5678
print '{WHAT?}'.format(some_float) # I want 1234 here too 
```

注意：`{:.0f}`不是一个选项，因为它会四舍五入（`1235`在本例中返回）。

`format(..., int(some_float))`正是我试图避免的事情，请不要建议。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2019-03-07T19:21:04.870

值得一提的是如何使用原始格式字符串呈现浮点数的内置行为。如果您事先知道小数部分相对于 0.5 的位置，则可以利用您最初尝试但发现它因四舍五入的副作用而不足的格式字符串`"{:0.0f}"`。查看以下示例...

```
>>> "{:0.0f}".format(1.999)
'2'
>>> "{:0.0f}".format(1.53)
'2'
>>> "{:0.0f}".format(1.500)
'2'
>>> "{:0.0f}".format(1.33)
'1'
>>> "{:0.0f}".format(0.501)
'1'
>>> "{:0.0f}".format(0.5)
'0'
>>> "{:0.0f}".format(0.1)
'0'
>>> "{:0.0f}".format(0.001)
'0' 
```

如您所见，幕后有舍入行为。在我有一个将整数转换为浮点数的数据库的情况下，我知道我正在处理一个非小数部分，并且只想在 html 模板中呈现浮点数的 int 部分作为解决方法。当然，如果您事先不知道小数部分，则需要先对浮点数执行某种截断操作。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-22T13:49:11.467

可以通过扩展类[string.Formatter](http://docs.python.org/2/library/string.html#string.Formatter)来扩展标准字符串格式化语言：

```
class MyFormatter(Formatter):
    def format_field(self, value, format_spec):
        if format_spec == 't':  # Truncate and render as int
            return str(int(value))
        return super(MyFormatter, self).format_field(value, format_spec)

MyFormatter().format("{0} {1:t}", "Hello", 4.567)  # returns "Hello 4" 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-22T11:25:21.940

这有效：

```
from math import trunc
some_float = 1234.5678

print '{:d}'.format(trunc(some_float))
=> 1234 
```

或者就这样做，就此而言：

```
print trunc(some_float)
=> 1234 
```

我认为这是一个可以接受的答案，它避免了转换为`int`. 请注意，在此代码段中：正在发生`'%02d' % some_float`隐式转换`int`，您无法避免以所需格式打印的某种转换。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2015-12-03T08:35:30.297

这也可以：

```
some_float = 1234.5678
f = lambda x: str(x)[:str(x).find('.')]
print '{}'.format(f(some_float))
=> 1234 
```

在进行 %timeit 测试后，它看起来比 trunc 方法快一点。

# html - 在 rtl 方向自动完成滚动

> ID：13511616
> 
> 赞同：3
> 
> 时间：2012-11-22T11:19:53.443
> 
> 标签：html, css, jquery-ui

当 overflow-y 添加到我的 .ui-autocomplete 列表中时，从左到右的外观看起来一切都很好。如果我切换到内容有 dir=rtl 的视图。滚动条位于右侧，但下拉列表似乎保留了右侧滚动条的位置，而滚动条本身位于左侧。

检查附加的图像，以更多地了解我的问题。

![在此处输入图像描述](../Images/8337e7d0bcc5206235d695dad6cac0f3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:07:50.243

这样做：

```
ul{
direction: ltr;
}

ul li{
text-align: right;
} 
```

# php - MySQL Count rows From Table WHERE userid 等于？- 代码点火器

> ID：13511624
> 
> 赞同：3
> 
> 时间：2012-11-22T11:20:06.987
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我在 CodeIgniter 中遇到 MySQL 问题，我有 3 列：

```
身份证 | 用户名 | 姓名 | 移动的
1 1 詹姆斯 55
2 1 约翰 66
3 2 安妮 33

```

我想计算 CodeIgniter 中 USERID 为 1 的行数，有人可以帮助我吗？

我希望输出为 2，因为有 2 条记录分配给 USERID 1。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:26:20.567

```
$this->db->where('USERID',1);
$this->db->from('my_table');
echo $this->db->count_all_results(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:24:41.733

尝试这个

```
select count(userid) from table where userid=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T10:33:13.287

**CodeIgniter 模型**

```
function count($userid){
    $this->db->select('*');
    $this->db->from('table_name');
    $this->db->where('userid',$userid);
   return  $this->db->get()->num_rows();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T11:22:29.947

尝试这个

```
$query = $this->db->query('SELECT * FROM my_table where USERID = 1');
echo $query->num_rows(); 
```

# ruby-on-rails-3 - Rails 获取不同月份的图像

> ID：13511625
> 
> 赞同：0
> 
> 时间：2012-11-22T11:20:09.873
> 
> 标签：ruby-on-rails-3, algorithm, search

我是一名 Rails 开发人员，正在从事一个需要展示不同图像集合的项目。我想实现一个算法，我想在不同的**时间跨度中获取****图像**，例如，**当前月份的 30% 图像和****上个月**的 20% 图像等等，然后将它们混在一起并创建一个集合，然后将其显示在网站。因此，它使我为**Image模型定位****created_at**属性并根据创建日期获取图像。

 ******我寻找了各种可能的解决方案。其中之一是**思考狮身人面像**。根据[文档](http://pat.github.com/ts/en/searching.html#fieldweights)，您可以为属性赋予**字段权重**。但我的问题是我想在属性内赋予权重，即第一个月 30%，第二个月 20%。所以我没有找到一个好的解决方案。

接下来我想使用**范围来实现相同的目标**

*图像模型*

```
class Image < ActiveRecord::Base
  scope :current_month, where("created_at < ? and created_at > ?", Time.now, 1.month.ago).shuffle.take(6)
  scope :previous_month, where("created_at < ? and created_at > ?", 1.month.ago, 2.month.ago).shuffle.take(5)
  scope :last_month, where("created_at < ? and created_at > ?", 2.month.ago, 3.month.ago).shuffle.take(4)
end 
```

*图像控制器*

```
class ImagesController < ApplicationController
  @total_images = Image.current_month + Image.previous_month + Image.last_month
end 
```

但这会为每个请求获取相同的图像集。而每次提出请求时我都需要**不同的图像。**此外，由于单个请求多次访问我的数据库，这将使我的网站**性能下降。**

请指导我更好，更正确的方法来实现这一点。提前致谢。******

# c++ - 如何获取 CTabCtrl 的背景颜色？

> ID：13511626
> 
> 赞同：1
> 
> 时间：2012-11-22T11:20:11.870
> 
> 标签：c++, windows, mfc, tabs

我的对话框上有一个`CTabCtrl`，上面有几个标签 ( `CStatic`)。问题是，选项卡控件有白色背景，标签有灰色背景。我知道为什么 - 标签的父级实际上是对话框，而不是选项卡控件。但是，我应该能够使用`CWnd::OnCtlColor`为标签提供自定义背景画笔：

```
HBRUSH MyDialog::OnCtlColor(CDC *pDC, CWnd *pWnd, UINT nCtlColor)
{
    HBRUSH hBrush = __super::OnCtlColor(pDC, pWnd, nCtlColor);

    const int dialogId = pWnd->GetDlgCtrlID();
    if (dialogId == IDC_MY_CONTROL)
    {
        pDC->SetBkMode(TRANSPARENT);
        hBrush = m_nullBrush;
    }

    return hBrush;
} 
```

在这里，我使用`m_nullBrush`提供了一个画笔来绘制标签的背景，唯一的麻烦是，我不知道如何获取选项卡的背景颜色，而是将其硬编码为`m_nullBrush.CreateStockObject(WHITE_BRUSH);`.

即使我将标签重新设置为标签控件的父级，它们仍然以灰色背景结束（即使标签控件具有白色背景）。

如何检索 a 的背景颜色`CTabCtrl`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:06:17.710

您可以将控件放在子对话框中，并且必须使用 为该子对话框启用主题`EnableThemeDialogTexture`。

```
#include "Uxtheme.h"

...

BOOL CTabDemoDlg::OnInitDialog()
{
    CDialogEx::OnInitDialog();

    COneDlg* OneDlg= new COneDlg;
    OneDlg->Create(IDD_ONE, this);
    AddPage(OneDlg, L"One");

    return TRUE;
}

void CTabDemoDlg::AddPage(CDialog *Dialog, const wchar_t* Title)
{
    if (IsAppThemed())
        EnableThemeDialogTexture(*Dialog, ETDT_ENABLETAB);  

    CRect Rect;
    TabCtl.GetWindowRect(Rect);

    Rect.top+= 20;
    Rect.InflateRect(-4, -4);

    ScreenToClient(Rect);

    Dialog->MoveWindow(Rect);

    TabCtl.InsertItem(0, Title);
}

IDD_ONE DIALOGEX 0, 0, 224, 111
STYLE DS_SETFONT | DS_FIXEDSYS | DS_CONTROL | WS_CHILD | WS_VISIBLE
EXSTYLE WS_EX_CONTROLPARENT
FONT 8, "MS Shell Dlg", 400, 0, 0x1
BEGIN
    CONTROL         "Check1",IDC_CHECK1,"Button",BS_AUTOCHECKBOX | WS_TABSTOP,20,16,39,10
    LTEXT           "Static",IDC_STATIC,20,36,19,8
    EDITTEXT        IDC_EDIT1,20,48,40,14,ES_AUTOHSCROLL
    PUSHBUTTON      "Button1",IDC_BUTTON1,84,16,50,14
END 
```

# symfony - symfony2 用 twig 生成静态 html

> ID：13511628
> 
> 赞同：5
> 
> 时间：2012-11-22T11:20:17.380
> 
> 标签：symfony, twig

有没有办法将 html 代码从树枝模板放入 html 文件中。我的意思是，在这种情况下

```
$html = $this->render('SiteBundle:Generated:home_news.html.twig', array('news' => $news))->getContent(); 
```

有没有办法可以做到这一点？

```
$html->output($html_file); 
```

它使用模板生成一个 html 文件。

我这样做是因为我有来自 wordpress 博客的新闻，我想在主页上显示最新消息。所以我想把我网站的新闻放在一个静态文件中，以避免在每个主页请求中生成它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T11:25:07.223

如果你更仔细地检查文档，你会发现[这一章](http://symfony.com/doc/current/book/controller.html#creating-static-pages)，它说：

```
$content = $this->renderView('AcmeHelloBundle:Hello:index.html.twig', array('name' => $name)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-06T14:09:03.343

要完成@VitalityZurian 的回答：

首先，生成您的标记：

```
$content = $this->renderView('AcmeHelloBundle:Hello:index.html.twig', array('name' => $name)); 
```

然后，写入文件：

```
$file = file_put_contents($filename, $content); 
```

你可以使用 Symfony2 帮助方法来处理你的包中的位置：

```
$bundleResourcesDir = $this->get('kernel')->locateResource('@AcmeAnotherBundle/Resources/views');
file_put_contents($bundleResourcesDir.'/index.html.twig` 
```

并检索它：

```
$view = $this->get('kernel')->locateResource('@AcmeAnotherBundle/Resources/views/index.html.twig'); 
```

# java - Android - 关于使用 jdbc 连接到 MSSQL 的 classnotfound

> ID：13511634
> 
> 赞同：0
> 
> 时间：2012-11-22T11:20:27.267
> 
> 标签：java, android, sql-server, jdbc, classnotfoundexception

我正在尝试制作一个从`MSSQL`Server 2008 读取数据的 android 应用程序。我找到了[一个](http://amitku.wordpress.com/2011/08/03/how-to-connect-and-access-sql-database-server-from-android-app/)关于 using的示例`JDBC`，但它对我不起作用。

我已经从 Roger Garza 的[这篇文章](https://stackoverflow.com/questions/12295264/java-lang-classnotfoundexception-net-sourceforge-jtds-jdbc-driver-on-android)中得到了答案，但仍然找不到该课程

我无法导入要发布的图像，但我在 Android 依赖项下有 jtds-1.3.0.jar。

我的代码是：

```
public void query2()
{
Log.i("Android"," MySQL Connect Example.");
Connection conn = null;
try {
String driver = "net.sourceforge.jtds.jdbc.Driver";
Class.forName(driver).newInstance();

String connString = "jdbc:jtds:sqlserver://MYIPSERVER:1433/SERVERNAME;encrypt=false;user=sa;password=password;instance=SQLEXPRESS";
String username = "sa";
String password = "password";
conn = DriverManager.getConnection(connString,username,password);
Log.w("Connection","open");
Statement stmt = conn.createStatement();
ResultSet reset = stmt.executeQuery("select TOP 10 * from MyTable ORDER BY Transac DESC");

//Print the data to the console
while(reset.next()){
Log.w("Data:",reset.getString(3));
//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.w("Data",reset.getString(2));
}
conn.close();

} catch (Exception e)
{
Log.w("Error connection","");
e.printStackTrace();
}
} 
```

错误就在这一行之后`Class.forName(driver).newInstance();`——因为我在之后评论了代码并且我有相同的错误日志。日志是：

```
11-21 16:05:55.480: I/Android(1679):  MySQL Connect Example.
11-21 16:05:55.499: W/System.err(1679): java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver
11-21 16:05:55.499: W/System.err(1679):     at java.lang.Class.classForName(Native Method)
11-21 16:05:55.509: W/System.err(1679):     at java.lang.Class.forName(Class.java:217)
11-21 16:05:55.509: W/System.err(1679):     at java.lang.Class.forName(Class.java:172)
11-21 16:05:55.509: W/System.err(1679):     at com.example.holz1.MainActivity.query2(MainActivity.java:46)
11-21 16:05:55.509: W/System.err(1679):     at com.example.holz1.MainActivity.onClick(MainActivity.java:35)
11-21 16:05:55.509: W/System.err(1679):     at java.lang.reflect.Method.invokeNative(Native Method)
11-21 16:05:55.509: W/System.err(1679):     at java.lang.reflect.Method.invoke(Method.java:511)
11-21 16:05:55.519: W/System.err(1679):     at android.view.View$1.onClick(View.java:3039)
11-21 16:05:55.519: W/System.err(1679):     at android.view.View.performClick(View.java:3511)
11-21 16:05:55.519: W/System.err(1679):     at android.view.View$PerformClick.run(View.java:14105)
11-21 16:05:55.529: W/System.err(1679):     at android.os.Handler.handleCallback(Handler.java:605)
11-21 16:05:55.529: W/System.err(1679):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-21 16:05:55.543: W/System.err(1679):     at android.os.Looper.loop(Looper.java:137)
11-21 16:05:55.543: W/System.err(1679):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-21 16:05:55.543: W/System.err(1679):     at java.lang.reflect.Method.invokeNative(Native Method)
11-21 16:05:55.549: W/System.err(1679):     at java.lang.reflect.Method.invoke(Method.java:511)
11-21 16:05:55.549: W/System.err(1679):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-21 16:05:55.549: W/System.err(1679):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-21 16:05:55.549: W/System.err(1679):     at dalvik.system.NativeStart.main(Native Method)
11-21 16:05:55.599: W/System.err(1679): Caused by: java.lang.NoClassDefFoundError: net/sourceforge/jtds/jdbc/Driver
11-21 16:05:55.599: W/System.err(1679):     ... 19 more
11-21 16:05:55.610: W/System.err(1679): Caused by: java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver
11-21 16:05:55.619: W/System.err(1679):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-21 16:05:55.619: W/System.err(1679):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-21 16:05:55.629: W/System.err(1679):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-21 16:05:55.629: W/System.err(1679):     ... 19 more
11-21 16:06:51.519: W/WindowManager(90): Failure taking screenshot for (180x300) to layer 21010
11-21 16:06:51.552: W/NetworkManagementSocketTagger(90): setKernelCountSet(10013, 1) failed with errno -2
11-21 16:06:52.499: W/NetworkManagementSocketTagger(90): setKernelCountSet(10047, 0) failed with errno -2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:24:52.280

我认为问题是由于jar引起的，请下载**sqljdbc-1.2.0.jar**并将其放在根目录的lib文件夹中

[下载sqljdbc-1.2.0.jar](http://www.java2s.com/Code/Jar/s/Downloadsqljdbc120jar.htm)

# c# - 使用 OpenFileDialog 和 Multiselect 搜索字符串

> ID：13511635
> 
> 赞同：1
> 
> 时间：2012-11-22T11:20:27.590
> 
> 标签：c#, winforms

我正在做一个练习，我需要在一组文件中找到一个字符串。

我设法找到单独选择每个文件的字符串。我怎样才能一次选择所有文件。

```
openFileDialog.Multiselect = true;
DialogResult result = openFileDialog.ShowDialog();
string filename = openFileDialog.SafeFileName;
FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read);
BufferedStream bs = new BufferedStream(fs);

StreamReader sr = new StreamReader(fs);
String s;
if (result == DialogResult.OK)
{
    while ((s = sr.ReadLine()) != null)
    {
        if(s.Contains("Specified string"))
        {
            MessageBox.Show(filename + " Contains the Specified string");
            break;
        }
    }

}
fs.Close();
sr.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:24:57.760

OpenFileDialog 具有返回所有选定文件的属性（ [FileNames](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filenames.aspx)、[SafeFileNames ）。](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.safefilenames.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:52:43.050

首先，您应该使用[SafeFileNames 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.safefilenames.aspx)：

```
if (result == DialogResult.OK)
{
    foreach(string filename = openFileDialog.SafeFileName)
    {
        FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read);
        BufferedStream bs = new BufferedStream(fs);

        StreamReader sr = new StreamReader(fs);
        String s;

            while ((s = sr.ReadLine()) != null)
            {
                if(s.Contains("Specified string"))
                {
                    MessageBox.Show(filename + " Contains the Specified string");
                    break;
                }
            }

        fs.Close();
        sr.Close();
    }
} 
```

其次，您可以使用[并行类](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.aspx)来同时处理文件。

# java - 如何检测 json 响应中超出的 twitter 限制

> ID：13511637
> 
> 赞同：0
> 
> 时间：2012-11-22T11:20:38.433
> 
> 标签：java, android, json, twitter, twitter4j

我正在解析结果

```
 http://search.twitter.com/search.json?q="+"from:" 
                        + searchTerm + "&rpp="+limit; 
```

不确定要查看什么/如何解析超出速率限制？在查找字符串中的推文之前，这是一种可靠的检查方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:09:15.583

目前，使用 OAuth 时的速率限制为每小时 350 个请求。我相信使用 Basic Auth 时它是 150，这将在 6 月被弃用。

我认为实现这一目标的最佳方法是每小时计算您自己的请求以避免突破此限制

# iphone - ios6与早期版本的兼容性

> ID：13511642
> 
> 赞同：0
> 
> 时间：2012-11-22T11:20:51.903
> 
> 标签：iphone

由于 iPhone 5 的尺寸更大，因此在 iPhone 4 上无法看到低于 460 的视图。有没有办法让它们兼容？例如，应根据全屏大小调整视图中项目的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:31:37.690

只是您可以检查您的设备是否更大......使用以下代码

```
int deviceType;

float height = [UIScreen mainScreen].bounds.size.height;

    if (height==568) {
        self.deviceType = 5;
    }
    else
    {
        self.deviceType = 4;
    } 
```

# asynchronous - 在 SQLAlchemy 中正确使用与异步服务器的会话

> ID：13511648
> 
> 赞同：2
> 
> 时间：2012-11-22T11:21:22.863
> 
> 标签：asynchronous, sqlalchemy, gunicorn, eventlet

**背景：**

我们有一个使用 SqlAlchemy 作为 ORM 的 Python Web 应用程序。我们目前使用 Gunicorn(sync worker) 运行这个应用程序。此应用程序仅用于响应**长时间运行的请求**（即服务大文件，请不要建议使用 X-Sendfile/X-Accel-Redirect，因为响应是从 Python 应用程序动态生成的）。

使用 Gunicorn 同步 worker，当我们运行 8 个 worker 时，只有 8 个请求同时被服务。由于所有这些响应都是 IO 绑定的，我们希望切换到异步工作器类型以获得更好的吞吐量。

我们在 Gunicorn 配置文件中将 worker 类型从 sync 切换为 eventlet。现在我们可以同时响应所有请求，但是又出现了另一个神秘（对我来说很神秘）的问题。

在应用程序中，我们在模块级别有一个作用域会话对象。以下代码来自我们的 orm.py 文件：

```
uri = 'mysql://%s:%s@%s/%s?charset=utf8&use_unicode=1' % (\
    config.MYSQL_USER,
    config.MYSQL_PASSWD,
    config.MYSQL_HOST,
    config.MYSQL_DB,
)

engine = create_engine(uri, echo=False)

session = scoped_session(sessionmaker(
    autocommit=False,
    autoflush=False,
    bind=engine,
    query_cls=CustomQuery,
    expire_on_commit=False    
)) 
```

我们的应用程序使用这样的会话：

```
from putio.models import session

f = session.query(File).first()
f.name = 'asdf'
session.add(f)
session.commit() 
```

当我们使用同步工作者时，会话一次从 1 个请求中使用。在我们切换到异步 eventlet worker 之后，同一个 worker 中的所有请求都共享同一个 session，这是不需要的。当会话在一个请求中提交或发生异常时，所有其他请求都会失败，因为会话是共享的。

在 SQLAlchemy 的文档中，说 scoped_session 用于线程环境中的单独会话。异步工作者中的 AFAIK 请求在同一线程中运行。

**问题：**

**我们希望异步工作者中的每个请求都有单独的会话。在 SQLAlchemy 中使用异步工作者会话的正确方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:33:57.407

使用[scoped_session 的 scopefunc 参数](https://docs.sqlalchemy.org/en/14/orm/contextual.html#using-custom-created-scopes)。

# google-analytics - 在 Google 分析中查找细分 ID？

> ID：13511650
> 
> 赞同：9
> 
> 时间：2012-11-22T11:21:26.583
> 
> 标签：google-analytics

我正在尝试使用名为[Oochart](http://oocharts.org/Guide/P?page=DrawingCharts2_1)的脚本输出 Google Analytics 段的内容。

为此，我需要分段 ID，如何找到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T22:36:51.463

没有简单的方法。您要么必须在应用分段时尝试从 URL 读取它，要么在查询资源管理器 (http://ga-dev-tools.appspot.com/explorer/) 中选择分段，然后显示分段 ID .

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-07T08:38:30.400

虽然最好的答案是来自 LCarey 的答案（要使用查询资源管理器：http://ga-dev-tools.appspot.com/explorer/ [）](http://ga-dev-tools.appspot.com/explorer/)，但我发现如果你想这样做，Pavel 的答案需要更新，因为 URL 结构已更改。

考虑以下 URL：

[https://analytics.google.com/analytics/web/#report/defaultid/a23080303w45291587p45450834/%3F_.useg%3DuserfSRDEURzSXe_Kspo6mxgXw/](https://analytics.google.com/analytics/web/#report/defaultid/a23080303w45291587p45450834/%3F_.useg%3DuserfSRDEURzSXe_Kspo6mxgXw/)

您正在寻找字符串“_.useg%3Duser”，然后是段 ID (fSRDEURzSXe_Kspo6mxgXw)。要在 API 中使用它，我会使用 gaid::fSRDEURzSXe_Kspo6mxgXw。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-01T22:30:39.913

高级细分提要提供所有默认和用户创建的高级细分的列表。您可以在此独立资源管理器中检索所有分段的 ID。（在 Try it! 标题下）：

[https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/segments/list#try-it](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/segments/list#try-it)

您需要使用 OAuth 2.0 对请求进行身份验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-23T08:37:38.137

正如 LCarey 简要提到的，您可以从 URL 中读取它。我将举例说明这一点。

应用细分并查看 URL。

示例： [https ://www.google.com/analytics/web/#report/visitors-overview/a27824002w53282758p54121492/%3F_.advseg%3Duser1417962107/](https://www.google.com/analytics/web/#report/visitors-overview/a27824002w53282758p54121492/%3F_.advseg%3Duser1417962107/)

您正在寻找*advseg*参数。在这种情况下，段 ID 是 user1417962107。字符*%3D*表示编码的等号“=”。

在 API 中，您将使用 segment=gaid::user1417962107

# data-binding - UpdateValueStrategy 和自定义将多个 GUI 元素转换为一个属性

> ID：13511653
> 
> 赞同：1
> 
> 时间：2012-11-22T11:21:29.637
> 
> 标签：data-binding, javabeans, eclipse-databinding

我将 Eclipse 数据绑定与 bean 和 SWT java 应用程序一起使用。我成功地将几个文本字段和复选框与我的模型绑定在一起。现在我有三个单选按钮：

*图形用户界面：*

```
...
Model model = new Model();
...
Button btnAllUsers = new Button(grpExport, SWT.RADIO);
Button btnBatchUsersOnly = new Button(grpExport, SWT.RADIO);
Button btnCurrentBatchOnly = new Button(grpExport, SWT.RADIO);
...

// here comes the big question mark... :(
IObservableValue swtObsBtnAllUsers  = SWTObservables.observeSelection(btnAllUsers);
IObservableValue beanObsUserFilter = BeansObservables.observeValue(model, "userFilter");
bindingContext.bindValue(swtObsBtnAllUsers, beanObsUserFilter);
... 
```

*模型：*

```
public class Model {
    public enum UserFilter {
        ALL_USERS, BATCH_USERS_ONLY, CURRENT_BATCH_ONLY
    }

    private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this);
    private UserFilter userFilter;

    public void addPropertyChangeListener(...) {...}

    public void removePropertyChangeListener(...) {...}
} 
```

现在我想将三个单选按钮绑定到属性`userFilter`。转换逻辑应该是这样的：

*GUI到模型的转换：*

```
if (btnAllUsers != null && btnBatchUsersOnly != null && btnCurrentBatchOnly != null) {
if (btnAllUsers.getSelection()) {
        model.userFilter = UserFilter.ALL_USERS;
    } else if (btnBatchUsersOnly.getSelection()) {
        model.userFilter = UserFilter.BATCH_USERS_ONLY;
 } else {
        model.userFilter = UserFilter.CURRENT_BATCH_ONLY;
    }
} 
```

*模型到 GUI 的转换：*

```
if (btnAllUsers != null && btnBatchUsersOnly != null && btnCurrentBatchOnly != null) {
    btnAllUsers.setSelection(model.getUserFilter() == UserFilter.ALL_USERS);
    btnBatchUsersOnly.setSelection(model.getUserFilter() == UserFilter.BATCH_USERS_ONLY);
    btnCurrentBatchOnly.setSelection(model.getUserFilter() == UserFilter.CURRENT_BATCH_ONLY);
} 
```

我阅读了有关特定 UpdateValueStrategies 和转换的信息，但并没有真正开始。有人可以帮我举一个简短的例子吗？提前致谢！

# php - 点击超链接时发送隐藏变量，安全sql

> ID：13511654
> 
> 赞同：0
> 
> 时间：2012-11-22T11:21:31.270
> 
> 标签：php, mysql

起初我想用 $_POST 传递一个隐藏变量，但我开始意识到用户可以像 $_GET 一样轻松地更改 $_POST。是否有可能以某种方式限制这种能力，还是有其他方法可以做到这一点？此外，您似乎不能在下面这个简单的示例中使用 $_POST ？：

索引.php

```
 <a href="test.php?variable=<?php echo $row['recipe_id'];?>"><view recipe</a> 
```

测试.php

```
 $variable = $_GET['variable'];
    $query = $database->query("SELECT name, description, date_added from recipe where recipe_id = $variable"); 
```

（编辑：我确实检查了输入确实是一个整数，尽管我在上面跳过了这个以最小化示例的代码。我应该早点说清楚）。我想用户在这里可以做的唯一边缘“恶意”事情是循环通过 recipe_id:s 来找出数据库中有多少食谱，甚至是通过更改 $variable 添加的第一个食谱。并不是说我在乎这种特殊情况，但我确信在涉及其他示例时我会。我意识到我想让信息可用，我只是想让它通过我猜的“适当渠道”。这只是事情的方式还是我错过了一些重要的事情？

人们总是写诸如“验证您的输入”之类的东西。我同意这一点。但在这种情况下，它只是用户“输入”的一个整数。除了验证之外还能做什么？再说一次，我在慢慢进步/学习这个，所以如果我似乎犯了简单的错误，请耐心等待。

（使用PHP、PDO、Mysql）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:26:10.490

这都是关于[**HTTP 请求**](http://en.wikipedia.org/wiki/Http)的。浏览器通过 HTTP 请求与服务器通信。无论您怎么看，这些对用户都是*完全透明的。*在浏览器（或 Firebug、Fiddler 或其他任何东西）中打开*Web Inspector并实时检查原始 HTTP 请求。*任何人都可以随时将这些请求发送到您的服务器，其中包含任何数据。

Understand this concept, it is important. There's no such thing as "secret" information in the communication between your server and the client (from the POV of the client). **You do not control the input to your server.** Neither can you "hide" any data that is going from the client to your server.

An HTTP request represents a, well, *request* for data or for some action. The server should, well, *serve* the request to the best of its abilities. If a request is invalid, the server must reject it. The server should judge the validity of each request independently of every other request, it should be stateless. The server cannot presume the validity of any request without validating it. It should only ever output information which is not security sensitive and treat all incoming data as suspicious. That's the fact of life.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:26:38.583

If you don't want users to see an incremental recipe ID that they can easily modify, then generate a unique random string to use to identify recipes. This will stop users from being able to play with the recipe ID in the GET or POST data.

They can still modify it but they will need to obtain the random string in order to pull out a recipe.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:27:54.290

The "variable" isn't restricted to be an integer at all in your code. An evil user could probably change the value of "variable" to "';truncate recipe;--". Execute this and whoops ... all recipes are gone.

always ensure that you use proper validation. search the interwebs for "sql injection" and have a look at functions like [mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php) (and it's documentation).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:04:46.223

The content of request fields, whether `$_POST` or `$_GET`, is not typed. It is just plain strings, which means that it's pretty much "open game" on the client side. It's the very reason we keep repeating that **client input cannot be trusted**, and must be validated on the server side.

Regarding your second question: recall that `$_GET` will contain the result of a form using the **get** `method`, while `$_POST` will contain data from **post** `method` forms. `$_GET` purpose is to contain url parameters, if they exist (to be precise, a *get* `method` form will pass all its parameters via the url).

On a side note, I should also tell you that you shouldn't use one verb for another, each one as a specific purpose. The *get* `method` is about getting data, not updating it, while *post*, *put*, *delete* are about updating data. This means that your example is following these rules, and should not try to use a *post* form instead (although this is technically feasible, you would just need to replace your link tags with forms).

see [the HTTP specs](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) on this matter.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-22T11:29:03.700

you may create a session based permission system that:

when user visited your site, and his/her browser rendered the link, in that php, you set a session variable for that link,

```
$_SESSION["permitted_recipe_id"] = $row['recipe_id']; 
```

Now you know exacly what recipe id that user can click,

with this check:

```
$variable = $_GET['variable'];
if($variable != @$_SESSION["permitted_recipe_id"]){
   exit("error you do not access to this result");
}

 $query = $database->query("SELECT name, description, date_added from recipe where recipe_id = $variable"); 
```

This will ensure that user visited the page before it send a request. This solution will prevent consecutive POST requests to fetch all website data,

if you show multiple links that user can click, you must implement $_SESSION["permitted_recipe_id"] as an array containing all ids' that send to user as links.

but beware, multi tab experiences may create bugs for this solution. This is the idea, you have to carefully work it out for a relase enviroment solution.

# android - 大可绘制 jpg 图像的问题

> ID：13511657
> 
> 赞同：0
> 
> 时间：2012-11-22T11:21:51.190
> 
> 标签：android, bitmap, drawable, jpeg, bitmapfactory

几天来，我一直在这里和互联网上寻找许多帖子的解决方案，以解决我加载或移动大型 jpg 图像（现在已定位为可绘制资源）的问题，我认为是时候问问自己了altought有许多非常相关的问题和解决方案。

我正在使用 OpenGL 开发 3D 地形模拟，问题是我正在使用一个非常大的 jpg 图像（2048x2048 = 1,94 MB）作为地形纹理。

让我们看一下我做过的一些解决方法：

第一个：

```
Bitmap terrainBitmap = BitmapFactory.decodeResource(getResources(),
R.drawable.terrain, options); 
```

这个立即崩溃，可能是因为图像太大

第二：

```
Uri path = Uri.parse("android.resource://com.jgc.my_app/" + R.drawable.terrain);
URL ulrn;ulrn = new URL(path.getPath());
HttpURLConnection con = (HttpURLConnection)ulrn.openConnection();
InputStream is = con.getInputStream();
Bitmap bmp = BitmapFactory.decodeStream(is); 
```

那可能是一次非常愚蠢的尝试

第三：

```
Bitmap terrainBitmap = BitmapFactory.decodeFile("android.resource://com.jgc.my_app/terrain.jpg", options); 
```

但结果我得到了一个非常令人沮丧的空位图......

考虑到的其他解决方法是，由于可绘制资源在应用程序“内部”，为什么不将它们移动到 sd 卡并在那里解码文件，但是，将位图或可绘制资源移动到我已经提供的 sdcard 的解决方案总是找到用户 BitmapFactory.decodeResource(getResources(), R.drawable.terrain, options);

我很感激任何建议，从那时起我将在我的项目中处理其他任务。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:06:23.627

好的，也许我很幸运，这是对我有用的 n 工作方法：

```
private static BitmapFactory.Options terrainBitmapOptions = new BitmapFactory.Options(); 
```

...

```
// Set our bitmaps to 16-bit, 565 format.
    terrainBitmapOptions.inPreferredConfig = Bitmap.Config.RGB_565; 
```

...

```
InputStream is = getResources().openRawResource(R.drawable.terrain);
Bitmap terrainBitmap;
try {
    terrainBitmap = BitmapFactory.decodeStream(is, null, terrainBitmapOptions);
} finally {
    try {
        is.close();
        } catch (IOException e) {
        // Ignore.
    }
} 
```

我希望它可以帮助其他人......

# c# - 从双二维数组创建位图

> ID：13511661
> 
> 赞同：3
> 
> 时间：2012-11-22T11:22:10.713
> 
> 标签：c#, arrays, image, pointers, bitmap

我有一个表示灰度图像的二维`double[,] rawImage`数组，数组中的每个元素都有一个从 0 ~ 1 的有理值，我需要将其转换为`Bitmap`图像，我使用了以下代码：

```
private Bitmap ToBitmap(double[,] rawImage)
{
     int width  = rawImage.GetLength(1);
     int height = rawImage.GetLength(0);

     Bitmap Image= new Bitmap(width, height);

     for (int i = 0; i < height; i++)
         for (int j = 0; j < YSize; j++)
              {
               double color = rawImage[j, i];
               int rgb = color * 255;
               Image.SetPixel(i, j, rgb , rgb , rgb);
              }

     return Image;
} 
```

但它似乎很慢。我不知道是否有办法使用`short`数据类型的指针来完成上述工作。

如何使用指针编写更快的代码来处理此函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T11:47:35.310

这对你来说应该足够了。示例就是根据这个[源代码编写](http://code.google.com/p/renderterrain/source/browse/trunk/Utilities/FastBitmap.cs?r=18)的。

```
private unsafe Bitmap ToBitmap(double[,] rawImage)
{
    int width = rawImage.GetLength(1);
    int height = rawImage.GetLength(0);

    Bitmap Image = new Bitmap(width, height);
    BitmapData bitmapData = Image.LockBits(
        new Rectangle(0, 0, width, height),
        ImageLockMode.ReadWrite,
        PixelFormat.Format32bppArgb
    );
    ColorARGB* startingPosition = (ColorARGB*) bitmapData.Scan0;

    for (int i = 0; i < height; i++)
        for (int j = 0; j < width; j++)
        {
            double color = rawImage[i, j];
            byte rgb = (byte)(color * 255);

            ColorARGB* position = startingPosition + j + i * width;
            position->A = 255;
            position->R = rgb;
            position->G = rgb;
            position->B = rgb;
        }

    Image.UnlockBits(bitmapData);
    return Image;
}

public struct ColorARGB
{
    public byte B;
    public byte G;
    public byte R;
    public byte A;

    public ColorARGB(Color color)
    {
        A = color.A;
        R = color.R;
        G = color.G;
        B = color.B;
    }

    public ColorARGB(byte a, byte r, byte g, byte b)
    {
        A = a;
        R = r;
        G = g;
        B = b;
    }

    public Color ToColor()
    {
        return Color.FromArgb(A, R, G, B);
    }
} 
```

# mysql - MySQL：同一个查询中的 SELECT 和 COUNT

> ID：13511664
> 
> 赞同：2
> 
> 时间：2012-11-22T11:22:25.450
> 
> 标签：mysql, count, simplify

我有这两张表：

**城市表**

![在此处输入图像描述](../Images/71bbed69fad78f144b3c82a4f39e01b4.png)

**俱乐部桌**

![在此处输入图像描述](../Images/823cc21485b6e2988c9bc0b3285ed09a.png)

我要做的是使用相同的查询选择包含已发布俱乐部（`published`字段设置为 1）的所有城市以及该城市发布的俱乐部总数。

目前，我分两步进行，但我想通过将它们合并到一个查询中来提高性能。

```
SELECT c.id, c.name, c.slug 
FROM city c, club cl 
WHERE c.id = cl.city_id 
AND ( SELECT COUNT(*) 
      FROM club cl, city c 
      WHERE cl.city_id = c.id AND cl.published = 1) > 0
GROUP BY c.id 
```

在此之后，我正在对每个城市进行查询以获取 COUNT。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:34:51.307

像这样的东西： -

```
SELECT city.id, city.name, city.slug, COUNT(club.id) AS club_count
FROM city
INNER JOIN club
ON city.id = club.city_id
WHERE club.published = 1
GROUP BY city.id, city.name, city.slug
HAVING club_count > 0 
```

# ios - ios自定义委托设置

> ID：13511667
> 
> 赞同：2
> 
> 时间：2012-11-22T11:22:30.363
> 
> 标签：ios, delegates, protocols

我正在尝试制作一个自定义协议，希望有人可以提供帮助。

我有一个带有标签的 mainViewController (mainVC)。当我按下 edwwVC 中的按钮时，该标签需要用字符串更新。

我正在使用 ARC 和故事板。

问题是当我按下 edwwVC 上的完成按钮时，调用了“完成”方法，但在 mainVC 中没有调用委托方法。然而，如果我通过 mainVC 调用 done 方法，则调用 done 方法和委托方法。所以我可以看到连接在那里，我只是不明白为什么当我按下 edwwVC 中的完成按钮时没有调用委托方法。

我想这与 edwwVC 的初始化有关。因为它已经由情节提要启动了，所以在我看来，好像我在 mainVC 的 viewDidLoad 方法中再次对其进行了初始化。但这就是我得到的:)

提前致谢！

edwwVC.h

```
#import <UIKit/UIKit.h>
#import "IIViewDeckController.h"

@class EDWWViewController;

@protocol EDWWViewControllerDelegate <NSObject>;
@optional
- (void)edwwVCDidFinish:(EDWWViewController *)edwwVC;
@end

@interface EDWWViewController : UIViewController <IIViewDeckControllerDelegate> {
__weak  id<EDWWViewControllerDelegate> delegate;
NSMutableArray *edwwPoints;
}

@property (weak) id<EDWWViewControllerDelegate> delegate;
@property (weak, nonatomic) IBOutlet UITableView *theTableView;
@property (strong, nonatomic)     NSString *testString;
- (IBAction)done:(id)sender;
- (IBAction)add:(id)sender;
@end 
```

edwwVC.m:

```
#pragma mark - delegate method
- (IBAction)done:(id)sender {
testString = @"This is the test string!";
[delegate edwwVCDidFinish:self];
[self.viewDeckController closeRightViewAnimated:YES];
NSLog(@"Done pressed");
} 
```

MainVC.m:

```
- (void)viewDidLoad
{
[super viewDidLoad];
edwwViewController = [[EDWWViewController alloc] init];
edwwViewController.delegate = self;
}  

- (void)edwwVCDidFinish:(EDWWViewController *)edwwVC {    
edwwLabel.text= edwwVC.testString;    
NSLog(@"delegate method called");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:31:08.740

删除线...

```
__weak  id<EDWWViewControllerDelegate> delegate; 
```

从 .h 并更改行...

```
[delegate edwwVCDidFinish:self]; 
```

到...

```
[self.delegate edwwVCDidFinish:self]; 
```

在他们中。

那应该排序它。

您设置 ivar 委托的方式与属性委托（实际上是一个名为 _delegate 的 ivar）不同（感谢@Joris Kluivers，只是为了清楚起见而添加）。他们指向不同的东西。

如果你在调用委托方法的地方添加一个断点，我想你会发现委托是零。而_delegate（或self.delegate）不是零。

：：编辑：：

啊……刚刚也发现了第二点。

如果您在情节提要中设置 edwwvc，那么您也应该分配它。

如果您正在对 edwwvc 进行转场，那么您应该像这样在 mainVC.m 中拦截转场...

```
- (void)prepareForSegue: //blah the rest of the name...
{
    if ([segue.identifier isEqualToString:@"the name of your segue"])
    {
        EDWWViewController *controller = segue.destinationViewController;

        controller.delegate = self;
    }
} 
```

这将从情节提要中获取您要推送到的控制器并将委托设置为它。

::另一个编辑::

如果 EDWWVC 在 containerViewController 中，那么您可以在 MainVC.m 中的 viewDidLoad 中执行此操作...

```
- (void)viewDidLoad
{
    // other stuff...

    for (UIViewController *controller in self.childViewControllers) {
        if ([controller isKindOfClass:[EDWWViewController class]]) {
            EDWWViewController *edwwvc = (EDWWViewController*)controller;

            eddwvc.delegate = self;
        }
    }
} 
```

您可能会发现此代码必须放入 viewDidAppear 或其他内容中，但我认为 viewDidLoad 应该可以正常工作。

您实际上可以通过使用情节提要直接设置委托属性（但我对此不是100％确定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:39:20.420

答案在两个控制器的 containerVC 中。我在哪里初始化视图控制器：containerVC m 文件的 viewDidLoad：

```
- (void)viewDidLoad
{
[super viewDidLoad];

mainVC = (MainViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"MainVC"];
edwwVC = (EDWWViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"EDWWVC"];
//THIS LINE WAS MISSING
edwwVC.delegate = mainVC;

self.centerController = mainVC;
self.rightController = edwwVC;    
} 
```

但是伙计们感谢您的帮助！:) 感谢它让我朝着正确的方向前进！：） 谢谢！:)

# vb.net - 通过 USB GSM 调制解调器发送短信

> ID：13511670
> 
> 赞同：1
> 
> 时间：2012-11-22T11:22:30.590
> 
> 标签：vb.net, serial-port

我正在尝试开发一个模块来从我的应用程序发送短信。问题是当我向连接的手机发送 AT 命令时，我的应用程序停止响应。我使用的是诺基亚 6720C，并且我已经安装了 Pc Suite。它也出现在 Com Ports 中。

我的代码如下。我究竟做错了什么？

```
Imports System
Imports System.IO.Ports
Imports System.Threading
Imports System.ComponentModel

Public Class Form1
Delegate Sub SetTextCallback(ByVal [text] As String)
Private Sub btnSend_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSend.Click

    With SerialPort1
        .PortName = "COM14"
        .DataBits = 8
        .Parity = IO.Ports.Parity.None
        .StopBits = StopBits.One
    End With

    SerialPort1.Open()
    SerialPort1.Write("AT" & vbCr)
    SerialPort1.Close()
End Sub

Private Sub SerialPort1_DataReceived(ByVal sender As Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived
    ReceivedText(SerialPort1.ReadExisting())
End Sub

Private Sub ReceivedText(ByVal [text] As String)
    'compares the ID of the creating Thread to the ID of the calling Thread
    If Me.TxtResponse.InvokeRequired Then
        Dim x As New SetTextCallback(AddressOf ReceivedText)
        Me.Invoke(x, New Object() {(text)})
    Else
        Me.TxtResponse.Text &= [text]
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:55:33.670

好吧，在 AT 命令的末尾你必须添加 Chr(13) 和 Chr(10)，你只使用了 Chr(13)（即 "vbCr"），尝试用 vbCrLf 替换它（Carriage-Return "Chr(13) )" 和换行符 "Chr(10)")。我认为这是问题所在（命令字符串不完整）。

如果问题仍然存在，请尝试以下方法来测试您的工作：

1.  尝试使用您的 VB.NET 代码与 GSM 调制解调器（而不是您的手机）进行通信。如果它工作正常，那么可能手机不接受 AT 命令。

2.  尝试使用终端程序向手机发送 AT 命令。终端程序可以是“超级终端”或“大师智能终端”（你可以在谷歌上搜索）。

我希望这有帮助，祝你好运。

# regex - css规则中“输入”的正则表达式

> ID：13511675
> 
> 赞同：1
> 
> 时间：2012-11-22T11:22:39.123
> 
> 标签：regex, css-selectors

我正在尝试从样式表中的任何 CSS 规则中过滤输入选择器（使用 javascript），但无法编写返回该规则中所有元素的正则表达式。我对javascript很好，但我不确定如何构建正确的正则表达式。

例如，从以下内容：

```
input, #testDiv input, div.test, input[type=radio] {
    width: 50px;
} 
```

我需要返回`input`，如果可能`#testDiv input`的`input[type=radio]`话（或者我可以修剪的接近的东西）。

任何知道他们的正则表达式的人都可以给我一些关于如何去做的见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:49:07.237

对于 CSS 文件的每一行，试试这个正则表达式：

```
r = new RegExp('[^,}]*input[^,{]*', 'g') 
```

示例：http: [//jsfiddle.net/8DRMz/1/](http://jsfiddle.net/8DRMz/1/)

这个怎么运作：

带有`input`can 的选择器包含不同的符号，但新选择器总是以换行符开头，在“，”或“}”之后。选择器也总是以“，”或“{”结尾。因此，我们使用除“，}”之外的任何附加符号和除“，{”之外的任何附加符号来寻找“输入”。

# c - 从标准输入读取字符串时遇到问题

> ID：13511677
> 
> 赞同：0
> 
> 时间：2012-11-22T11:22:42.917
> 
> 标签：c, string, getchar

我需要创建以这种格式从标准输入获取输入的程序：

```
abcde //number of characters in word = number of words => square shape
fghij
klmno
pqrst
uvwxy
        // \n separates first half from second
word1word //any amount of characters, any amount of words
word
word2
sdf
        // \n to end input 
```

我的代码有效，但只有大约 50% 的时间。我有几个示例输入，用于测试，但对于其中一些输入，我的 readwords 函数失败了。

这是我的功能，读取单词。由于我不知道有多少字或它们将是多长时间，所以我使用动态数组和 getchar() 函数。

```
void readWords(char **p,int *n,int w) /* before calling: n = 50; w = 20; p = 50x20 char array */
{
int i = 0,j = 0,x;
char tmp,prevtmp;

while (1)
{
    prevtmp = tmp;
    tmp = getchar();
    if ((prevtmp == '\n'  && tmp == '\n') || feof(stdin))
        break; /* no more words to read */

    if (tmp == '\n') /* end of word */
    {
        p[i][j] = '\0'; /* add \0 to create string format */

        i++;
        j = 0;
        if (i == *n) /* if there is more words than there is space for them, double the size */
            if (realloc(p,*n*2) != NULL)
                *n*=2;

        continue;
    }

    p[i][j] = tmp;
    j++;
    if (j == w) /* if width of word is larger than allocated space, double it */
    {
        for (x = 0; x < *n;x++);
            if(realloc (p[x],w*2) != NULL);

        w=w*2;
    }

}
*n = i;
} 
```

这是适用的输入示例（注意：此函数仅在行后读取后半部分，仅包含 \n）：

```
dsjellivhsanxrr
riemjudhgdffcfz
<skipping>
atnaltapsllcelo
ryedunuhyxhedfy

atlanta
saltlakecity

<skipping 15 words>

hartford
jeffersoncity 
```

这是我的函数无法正确读取的输入：

```
<skipping>
...oywdz.ykasm.pkfwb.zazqy...
....ynu...ftk...zlb...akn....

missouri
delaware

<skipping>

minnesota
southdakota 
```

我的函数从此输入中读取的内容：

```
e
yoming
xas
florida
lvania
ana
ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ 
```

这两个输入之间没有区别（除了不同的单词以及不同的单词数量和长度），无论如何都可以正确读取前半部分，但只有后半部分会出错。我该如何解决？

PS 很抱歉很长的帖子，如果你想看到没有跳过字节的完整输入，这里是 pastebin：[http://pastebin.com/hBGn2tej](http://pastebin.com/hBGn2tej)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:25:57.520

`realloc()`返回新分配内存的地址，它不会更新传递给它的参数。所以这个（以及 的其他用法`realloc()`）是不正确的：

```
if (realloc(p,*n*2) != NULL) 
```

并且会导致代码错误地访问内存，导致未定义的行为。将结果存储到临时变量并在更新前`realloc()`检查非。to 的参数还指示*字节*数，而不是*元素*的数量，因此 size 参数计算不正确，因为它应该是数组。但是，对调用者的更改将*不*可见。另请注意，唯一合法的参数是从先前调用或获得的指针。代码中的注释*p = 50x20 char array**建议*`NULL``p``realloc()`**`p``char*``realloc(p, sizeof(char*) * (*n * 2));``p`*`realloc()``malloc()``realloc()``calloc()`**不是这种情况。*****

 ***这是一个分配数组的小示例，`char*`它应该会有所帮助：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void f(char*** p)
{
    /* Allocate space for two 'char*' elements.
       Add a NULL pointer element as sentinel value
       so caller knows where to find end of list. */
    *p = malloc(sizeof(**p) * 3);

    /* Allocate space for the two strings
       and populate. */
    (*p)[0] = malloc(10);
    (*p)[1] = malloc(10);

    strcpy((*p)[0], "hello");
    strcpy((*p)[1], "world");
    (*p)[2] = NULL;

    /* Add a third string. */
    char** tmp = realloc(*p, sizeof(**p) * 4);
    if (tmp)
    {
        *p = tmp;
        (*p)[2] = malloc(10);
        strcpy((*p)[2], "again");
        (*p)[3] = NULL;
    }
}

int main()
{
    char** word_list = 0;
    f(&word_list);

    if (word_list)
    {
        for (int i = 0; word_list[i]; i++)
        {
            printf("%s\n", word_list[i]);
            free(word_list[i]);
        }
    }
    free(word_list);

    return 0;
} 
```

此外：

*   `prevtmp`首次使用时价值未知。
*   [`getchar()`](http://en.cppreference.com/w/c/io/getchar)实际上返回 a`int`而不是 a `char`。***

# javascript - 页面中的返回按钮

> ID：13511679
> 
> 赞同：61
> 
> 时间：2012-11-22T11:22:45.713
> 
> 标签：javascript

> **可能重复：**
> [返回上一页 返回](https://stackoverflow.com/questions/2548566/go-back-to-previous-page)
> [上一页](https://stackoverflow.com/questions/2968425/get-back-to-previous-page)

如何在 javascript 编码中获取上一页。单击后退按钮时转到上一页。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-22T11:28:22.453

这是代码

```
<input type="button" value="Back" onclick="window.history.back()" /> 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-22T11:24:54.467

您可以使用：

```
<button onclick="window.history.back()">Back</button> 
```

或者..

```
<button onclick="window.history.go(-1)">Back</button> 
```

当然，区别`back()`只是返回 1 页，但`go()`返回/转发您作为参数传递的页数，相对于您当前的页面。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-22T11:24:53.713

有几种方法，这是一种：

```
window.history.go(-1); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-22T11:27:35.630

`onclick="history.go(-1)"`简单地

# asp.net-mvc - 如何检测视网膜屏幕？

> ID：13511682
> 
> 赞同：0
> 
> 时间：2012-11-22T11:22:54.753
> 
> 标签：asp.net-mvc

使用 MVC 4.5 ...

我正在尝试为我的网站准备视网膜屏幕。

如果用户有 Retina 屏幕，我如何从代码隐藏（服务器上的代码）检测？

我不希望从 java 中执行此操作，而是从服务器上的代码执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:37:31.593

[Retina Display](http://en.wikipedia.org/wiki/Retina_Display)是一个品牌名称，没有严格定义。听起来您想检测它是否是较新版本的 iPad。检测这些的细节很普遍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:59:30.933

尝试这个：

```
(function(){
  if( document.cookie.indexOf('device_pixel_ratio') == -1
      && 'devicePixelRatio' in window
      && window.devicePixelRatio == 2 ){

    document.cookie = 'device_pixel_ratio=' + window.devicePixelRatio + ';';
    window.location.reload();
  }
})(); 
```

# tfs - 在 Tfs 2008 到 2010 升级如何在配置向导中指向另一台服务器的 tfs 数据库？

> ID：13511684
> 
> 赞同：0
> 
> 时间：2012-11-22T11:22:59.037
> 
> 标签：tfs, tfs-2010

Tfs 2008要升级到TFS 2010，我如何指向不同域中另一台服务器中的数据库？否则是否可以全新安装，然后将数据库从 TFS 2008 移动到 TFS 2010？是否可以选择直接将数据库从 TFS 2008 移动到 TFS 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:30:50.463

基本上，您备份数据库，在新服务器上恢复它们​​并使用配置向导升级它们。

有许多博客文章都有很好的演练。

[http://blog.hinshelwood.com/upgrading-team-foundation-server-2008-to-2010/](http://blog.hinshelwood.com/upgrading-team-foundation-server-2008-to-2010/)

# ios6 - Cocoapods：找不到要集成的 Xcode 项目

> ID：13511685
> 
> 赞同：2
> 
> 时间：2012-11-22T11:23:00.213
> 
> 标签：ios6, cocoapods

尝试将 cocoapods 集成到现有项目中：

```
pod install
Resolving dependencies of `./Podfile'
Updating spec repositories

Cocoapods 0.16.0.rc5 is available.

Resolving dependencies for target `default' (iOS 6.0)
Downloading dependencies
Installing AFNetworking (1.0)
Generating support files
[!] Unable to find an Xcode project to integrate 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T14:23:06.783

Xcode 项目是否与 Podfile 位于同一目录中？如果没有，您应该使用以下内容指定位置：

```
xcodeproj 'path/to/My.xcodeproj' 
```

# android - 获取列表视图行数据

> ID：13511686
> 
> 赞同：0
> 
> 时间：2012-11-22T11:23:02.443
> 
> 标签：android

我的应用程序中有一个列表视图。当我单击该行本身中的一个文本视图时，我想在该特定行中设置文本视图的值。所以，我尝试如下

```
likes.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

           TextView t=(TextView)v;
          TextView likesnumber1 = (TextView) findViewById(R.id.likesnumber);
            int i=  Integer.parseInt(likescount.get(position));

       if(like_or_ulike.get(position).equals("Like")){
            Log.e("inlike","like");
            like_or_ulike.set(position, "Unlike");
            t.setText(like_or_ulike.get(position));
            UrltoValue.getValuefromUrl("https://graph.facebook.com/"+objectid.get(position)+"/likes?access_token="+accesstoken+"&method="+"post");

           j=i+1;
           String s=Integer.toString(j);
        likescount.set(position, s);
         likesnumber1.setText(likescount.get(position));

        }
        else{
            Log.e("unlike","unlike");
            like_or_ulike.set(position, "Like");
            t.setText(like_or_ulike.get(position));
            UrltoValue.getValuefromUrl("https://graph.facebook.com/"+objectid.get(position)+"/likes?access_token="+accesstoken+"&method="+"DELETE");

               j=i-1;
             String s=Integer.toString(j);
            likescount.set(position, s);
             likesnumber1.setText(likescount.get(position));
        }
    }
});

the "likes" reference which I used is textview and I want to set the textview by getting the id of that particular row.

TextView likesnumber1 = (TextView) findViewById(R.id.likesnumber); 
```

当我使用它时，我得到了屏幕第一个可见行的 id。

如何在 textview 单击时获取该特定行的 textview 的 ID。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:09:16.353

我不确定您是如何用数据填充列表的，但是这是我使用的一种非常有效的方法。

数据模型

```
public class Publication {

public String string1;
public String string2;

public Publication()  {

}
public Publication(String string1, String string2) {
this.string1= string1;
this.string2= string2;
}

} 
```

创建阵列适配器

```
public class ContactArrayAdapter extends ArrayAdapter<ContactModel> {
private static final String tag = "ContactArrayAdapter";
private static final String ASSETS_DIR = "images/";
private Context context;
    //private ImageView _emotionIcon;
private TextView _name;
private TextView _email;
private CheckBox _checkBox;

private List<ContactModel> contactModelList = new ArrayList<ContactModel>();
public ContactArrayAdapter(Context context, int textViewResourceId,
                           List<ContactModel> objects) {
    super(context, textViewResourceId, objects);
    this.context = context;
    this.contactModelList = objects;
}

public int getCount() {
    return this.contactModelList.size();
}
public ContactModel getItem(int index) {
    return this.contactModelList.get(index);
}
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if (row == null) {
        // ROW INFLATION
        Log.d(tag, "Starting XML Row Inflation ... ");
        LayoutInflater inflater = (LayoutInflater) this.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.contact_list_entry, parent, false);
        Log.d(tag, "Successfully completed XML Row Inflation!");
    }

    // Get item
   final ContactModel contactModel = getItem(position);
    Resources res = this.getContext().getResources();
        //Here are some samples so I don't forget...
        //
        //_titleCount = (TextView) row.findViewById(R.id.category_count);

        //  _category.setText(categories1.Category);
        //
        //if (categories1.Category.equals("Angry")) {
        //Drawable angry = res.getDrawable(R.drawable.angry);
        //_emotionIcon.setImageDrawable(angry);
        //}
    _checkBox = (CheckBox) row.findViewById(R.id.contact_chk);
    _email = (TextView) row.findViewById(R.id.contact_Email);
    _name = (TextView)row.findViewById(R.id.contact_Name);

     //Set the values
    _checkBox.setChecked(contactModel.IsChecked);
    _email.setText(contactModel.Email);
    _name.setText(contactModel.Name);

    _checkBox.setOnClickListener(new CompoundButton.OnClickListener() {
        @Override
        public void onClick(View view) {
            if (contactModel.IsChecked) {
               contactModel.IsChecked = false;
               notifyDataSetChanged();
            }
            else {
                contactModel.IsChecked = true;
                notifyDataSetChanged();
            }

        }
    });

    return row;
}

} 
```

使用数组适配器填充您的列表

```
 ContactArrayAdapter contactArrayAdapter;
   //
   List<ContactModel> contactModelList;
   //Fill list with your method
   contactModelList = getAllPhoneContacts();
   //
   contactArrayAdapter = new ContactArrayAdapter(getApplicationContext(),          R.layout.contact_list_entry, contactModelList);
   //
  setListAdapter(contactArrayAdapter); 
```

填充数据的示例方法：

```
 public List<ContactModel> getAllPhoneContacts() {
    Log.d("START","Getting all Contacts");
    List<ContactModel> arrContacts = new Stack<ContactModel>();

    Uri uri = ContactsContract.CommonDataKinds.Email.CONTENT_URI;
    Cursor cursor = getContentResolver().query(uri, new String[] {ContactsContract.CommonDataKinds.Email.DATA1
            ,ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME
            ,ContactsContract.CommonDataKinds.Phone._ID}, null , null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");
    cursor.moveToFirst();
    while (cursor.isAfterLast() == false)
    {
        String email= cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
        String name =  cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        int phoneContactID = cursor.getInt(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone._ID));

        if (email != null)
        {
            ContactModel contactModel = new ContactModel();
            contactModel.Name = name;
            contactModel.Email = email;
            contactModel.IsChecked = false;
            arrContacts.add(contactModel);
        }

        cursor.moveToNext();
    }
    cursor.close();
    cursor = null;
    Log.d("END","Got all Contacts");
    return arrContacts;
} 
```

点击访问数据

```
final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        //Click handler for listview
    lv.setOnItemClickListener(new OnItemClickListener() {
       public void onItemClick(AdapterView parent, View view, int position, long id) {
            ContactModel contact= getItem(position);//This gets the data you want to change
            //
            some method here tochange set data
            contact.email = "new@email.com"
            //send notification
             contactArrayAdapter.notifyDataSetChanged();
        }
    }); 
```

# c# - EPPlus 的通用 Excel 生成器函数

> ID：13511690
> 
> 赞同：4
> 
> 时间：2012-11-22T11:23:11.380
> 
> 标签：c#, asp.net-mvc, linq, epplus

如何为您的 LINQ 查询构建通用 EPPlus 电子表格函数？

更新：需要专门针对 ASP.NET MVC 应用程序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T11:23:11.380

我所做的只是创建一个接受列表的通用函数。我使用反射来获取属性列表，这将成为我们的列标题。最后，我只是让 EPPlus 完成所有繁重的工作。

```
void ListToExcel<T>(List<T> query)
    {            
        using (ExcelPackage pck = new ExcelPackage())
        { 
            //Create the worksheet
            ExcelWorksheet ws = pck.Workbook.Worksheets.Add("Result");

            //get our column headings
            var t = typeof(T);
            var Headings = t.GetProperties();
            for (int i = 0; i < Headings.Count(); i++)
            {

                ws.Cells[1, i+1].Value = Headings[i].Name;
            }

            //populate our Data
            if (query.Count() > 0)
            {
                ws.Cells["A2"].LoadFromCollection(query);
            }

            //Format the header
            using (ExcelRange rng = ws.Cells["A1:BZ1"])
            {
                rng.Style.Font.Bold = true;
                rng.Style.Fill.PatternType = ExcelFillStyle.Solid;                      //Set Pattern for the background to Solid
                rng.Style.Fill.BackgroundColor.SetColor(Color.FromArgb(79, 129, 189));  //Set color to dark blue
                rng.Style.Font.Color.SetColor(Color.White);
            }

            //Write it back to the client
            Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
            Response.AddHeader("content-disposition", "attachment;  filename=ExcelDemo.xlsx");
            Response.BinaryWrite(pck.GetAsByteArray());
            Response.End();
        }
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-10-29T17:18:54.450

现在有一种更简单的方法可以使用 LoadFromCollection 方法实现此目的。

```
public void ExportToExcel(IEnumerable<Employee> employees, FileInfo targetFile)
{
    using (var excelFile = new ExcelPackage(targetFile))
    {
        var worksheet = excelFile.Workbook.Worksheets.Add("Sheet1");
        worksheet.Cells["A1"].LoadFromCollection(Collection: employees, PrintHeaders: true);
        excelFile.Save();
    }
} 
```

示例取自这里： http: [//gruffcode.com/2013/10/30/simple-excel-export-with-epplus/](http://gruffcode.com/2013/10/30/simple-excel-export-with-epplus/)

# c# - 尚未为此报告设置启用 externalimages 属性？

> ID：13511700
> 
> 赞同：8
> 
> 时间：2012-11-22T11:23:46.083
> 
> 标签：c#, reporting, rdlc

我正在尝试添加外部照片作为徽标以及`report.rdlc`文件上的报告。我有这个错误

> 尚未为此报告设置启用 externalimages 属性

![在此处输入图像描述](../Images/fcec8103aa2750ccb520a625bafc5d41.png)?

这是我的代码。

```
 try
{
    this.pedidosTableAdapter.Connection.ConnectionString = con.MysqlConnect();

    this.pedidosTableAdapter.Fill(this.fabricacaoDataSet8.pedidos, Pages.relatorios.num);
    this.reportViewer1.RefreshReport();
}
catch { }

// for external image
this.reportViewer1.LocalReport.EnableExternalImages = true;
ReportParameter parm = new ReportParameter();
parm=(new ReportParameter("path", @"C:\logo.jpg",true));
this.reportViewer1.LocalReport.SetParameters(parm);
this.reportViewer1.Refresh(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-26T10:04:43.600

我有使用代码启用外部图像的经验，它适用于本地/开发环境，但在服务器上部署时它不起作用并报告引发错误：

**“尚未为此报告设置启用外部图像属性”**

为了解决这个问题，`EnableExternalImages="true"`在你使用 ReportViewer 控件的 ASPX 或设计文件中使用属性，它将完美地工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-18T14:07:44.297

这里的问题实际上是，您`this.reportViewer1.RefreshReport();`在设置`this.reportViewer1.LocalReport.EnableExternalImages = true;`.

顺序在这里很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-19T15:04:52.823

我希望这张图片对您的 Windows 应用程序有帮助。激活您的 Reportviewer->Properties->LocalReport->EnableExternalImage 并将其设置为 True[![在此处输入图像描述](../Images/b2eacd07284e521f6fc7b075491d7d67.png)](https://i.stack.imgur.com/RkVBr.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-20T20:02:20.583

[这里](https://stackoverflow.com/questions/2070408/external-images-in-rdlc-data-reports-for-winforms)提到，图片的路径必须是URL格式，即`@"file:///C:\logo.jpg"`

或者你可以试试

```
var filepath = new Uri("C:\logo.jpg");
var path = new ReportParameter("Path", filepath.AbsolutePath);
this.reportViewer1.LocalReport.SetParameters(new ReportParameter {Path = path}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-16T19:21:08.573

对于 WinForm 应用程序，下面的代码将运行良好。

```
string templateImage = Application_Path + @"\Images\ReportLogo.jpg";
rvRptContainer.LocalReport.EnableExternalImages = true;
rvRptContainer.LocalReport.SetParameters(new ReportParameter("ReportLogo", "File:\\" + templateImage)); 
```

对于 ASP.Net 应用程序，请执行以下操作：

```
ReportViewer1.LocalReport.EnableExternalImages = true;

    string imagePath = new Uri(Server.MapPath("~/images/Mudassar.jpg")).AbsoluteUri;

    ReportParameter parameter = new ReportParameter("ImagePath", imagePath);

    ReportViewer1.LocalReport.SetParameters(parameter);

    ReportViewer1.LocalReport.Refresh(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-19T20:56:09.890

没有什么对我有用，但这很有效

```
 LocalReport localReport = new LocalReport();
        localReport.ReportPath = HostingEnvironment.MapPath("~/Reports/myreport.rdlc");
        localReport.EnableExternalImages = true;
        localReport.EnableHyperlinks = true; 
```

# java - int 数组初始化

> ID：13511702
> 
> 赞同：23
> 
> 时间：2012-11-22T11:23:50.033
> 
> 标签：java, arrays, initialization, int, default-value

我在这里有一个与 Java 相关的简单问题。假设您有一个 int 数组作为实例变量：

```
int[] in = new int[5]; 
```

因此，现在默认情况下它包含 5 个零。但是，如果您有与局部变量相同的数组怎么办。它是否被初始化为零？那不是家庭作业，我正在学习 Java 语言。最好的祝福

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-22T11:36:25.013

**首先**要了解的是，*本地变量*存储在*堆栈*中，这些堆栈没有使用它们的默认值显式初始化。虽然*实例变量*存储在*堆上*，并且默认情况下使用它们的*默认值*进行初始化。

此外，*对象*也在*Heap*上创建，无论实例引用变量是持有其引用还是局部引用变量。

* * *

现在，发生的情况是，当您将这样的数组引用声明为局部变量并使用数组对其进行初始化时：-

```
int[] in = new int[5]; 
```

数组引用`(in)`存储在*stack上，并为能够在**堆上保存**5 个整数*元素的数组分配内存（请记住，对象是在堆上创建的）。*然后，在堆上*分配5 个连续的内存位置，用于存储*整*数值。并且数组对象上的每个*索引*都按顺序保存对这些内存位置的*引用。*然后数组引用指向该数组。因此，由于在堆上分配了 5 个整数值的内存，它们被初始化为其默认值。*`(size = 5)`*

 ***而且，当你声明你的数组引用时，不要用任何数组对象初始化它： -

```
int[] in; 
```

数组引用是在*Stack*上创建的（因为它是一个局部变量），但默认情况下它不会初始化为数组，也不会`null`像实例变量那样初始化。

* * *

因此，当您使用数组声明和初始化的第一种方式时，这就是分配的样子：-

```
"Your array reference"
     "on stack"    

       |    |          "Array object on Heap"
       +----+                  
       | in |---------->  ([0, 0, 0, 0, 0])
       +----+
       "Stack"                  "Heap" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T11:35:43.437

如果你这样做是一样的：

`int[] in = new int[5]`作为实例变量或局部变量。在这两种情况下，数组对象`in`都将包含零。

不同之处在于您是否会执行以下操作：

1.  实例变量：`int[] in`; （它用**null**初始化），并且`in`对象将存在于*堆空间*中。

2.  局部变量：`int[] in`；（它必须由用户初始化）将存在于*堆栈中*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T11:37:46.030

对于原始类型数组，它被初始化为其默认值。在[文档](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html)中它说：

> 创建指定长度的一维数组，并将数组的每个组件初始化为其默认值

对于整数类型，默认值为 0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T11:35:57.937

是的，当你初始化一个数组时，内容将被设置为该类型的默认值，因为`int`它是 0 而对于引用类型它是`null`.

如果你初始化一个数组并检查内容，你可以自己看到：

```
...
final int[] in = new int[5];

for (int i = 0; i < in.length; i++) {
    System.out.println(in[i]);
}
... 
```

这将打印：

```
0
0
0
0
0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T11:25:06.123

是的

```
public void method() {
    int[] in = new int[5];
    System.out.pritnln(in[0]); //output in 0
} 
```

在这种情况下，您的**Array 是一个局部变量**，您所需要的只是**初始化您的数组**。一旦你初始化了你的数组，**瞧**你的**数组元素**s得到他们的**默认值**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-05T09:36:05.970

实例变量或局部变量中声明的数组是否会被初始化为默认值并不重要。

每个类变量、实例变量或数组组件在创建时都使用默认值进行初始化。

根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.3)

`An array initializer creates an array and provides initial values for all its components.`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T11:25:17.107

当您将其实例化为局部变量时，该数组不包含 5 个零。***

# python - 在 Python 中递增十六进制字符串

> ID：13511704
> 
> 赞同：3
> 
> 时间：2012-11-22T11:23:52.213
> 
> 标签：python

我正在尝试在 python 中增加以字符串表示的十六进制值，`'84B8042100FE'`我怎样才能用 1 来增加这个值`'84B8042100FF'`？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:27:12.213

```
>>> s = '84B8042100FE'
>>> num = int(s, 16) + 1
>>> hex(num)[2:].upper()
'84B8042100FF' 
```

我总是忘记更好的方法 - 谢谢@Martijn Pieters

```
>>> '{:X}'.format(num)
'84B8042100FF' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:29:22.670

```
In [15]: '{:X}'.format(int('84B8042100FE', 16)+1)
Out[15]: '84B8042100FF' 
```

# expressionengine - 表达式引擎 - 动态输出自定义图像大小及其高度和宽度

> ID：13511705
> 
> 赞同：0
> 
> 时间：2012-11-22T11:23:55.950
> 
> 标签：expressionengine

所以我有一个我想输出的自定义图像大小，我尝试了以下方法：

```
{profile_logo:thumbnail wrap="image"} 
```

但是你没有得到不理想的高度和宽度，所以我尝试了：

```
{profile_logo}
      <img src="{url:thumbnail}" alt="{title}" width="{width}" height="{height}" />
{/profile_logo} 
```

但是，这会输出原始文件的宽度和高度，所以我剩下的唯一选择是硬编码不理想的高度和宽度

```
{profile_logo}
      <img src="{url:thumbnail}" alt="{title}" width="80" height="52" />
{/profile_logo} 
```

反正有动态输出缩略图的高度和宽度吗？已尝试 {width:thumbnail} 但它不起作用。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:42:52.357

你是对的 - 没有库存方法可以从 EE 文件字段中输出具有自定义图像尺寸的**高度**和**宽度参数的图像标签。**

您可以查看[GWCode FileInfo 插件](http://devot-ee.com/add-ons/gwcode-fileinfo)，它可以从原始 URL 为您获取该信息（不要使用“包装”参数）。

```
{exp:gwcode_fileinfo:single file="{profile_logo:thumbnail}"}
    <img src="{file_url}" width="{image_width}" height="{image_height}" alt="" />
{/exp:gwcode_fileinfo:single} 
```

这些天来，我*从*不想在我的图像上使用这些参数，因为当使用流畅的图像进行响应式布局时，你的图像会不成比例地调整大小。

# java - DocumentList API 可恢复上传不起作用

> ID：13511706
> 
> 赞同：0
> 
> 时间：2012-11-22T11:23:57.637
> 
> 标签：java, google-drive-api, google-docs-api

最近似乎可恢复上传不起作用。我所有的上传请求都返回 500。

这是我收到的异常堆栈跟踪：

```
 Caused by: java.io.IOException: Server returned HTTP response code: 500 for URL: https://docs.google.com/feeds/upload/create-session/default/private/full/folder%3A0B6Qc9CKRbiEMNTQ2NWYzMjEtY2EwNC00NzRhLWFjNGQtNGEzNzEzNzc4MTRj/contents/?convert=false&upload_id=AEnB2UpuikBd2Rd1wk1j8BPAI3KKTJ1pWoAJEPm3KZCBqLIqj6Rm9uOy7NezC8dzROUghRpTI6Clblj8j4zhKO91ductHL2LBA
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
        at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:318)
        at GoogleDocsManager.uploadWithResumableUpload(GoogleDocsManager.java:1342) 
```

这是代码（自昨天（21-11-2012）以来没有进行任何更改）

```
 String link = initiateSession(mediaBytes, contentType, title, withConvert);

        URL url = new URL(link); 
        HttpURLConnection copyHttpUrlConn = (HttpURLConnection) url.openConnection(); 
        copyHttpUrlConn.setDoOutput(true); 
        copyHttpUrlConn.setRequestMethod("PUT"); 

        copyHttpUrlConn.setRequestProperty("Content-Type",contentType);
        copyHttpUrlConn.setRequestProperty("Content-Length", mediaBytes.length + "");

        String range = "bytes 0-" + (mediaBytes.length - 1) + "/" + (mediaBytes.length);

        copyHttpUrlConn.setRequestProperty("Content-Range", range);

        OutputStream outputStream = copyHttpUrlConn.getOutputStream(); 

        outputStream.write(mediaBytes);

        System.out.println("Code: " + copyHttpUrlConn.getResponseCode());// here I receive the exception 
```

现在我真的不知道在哪里写这种帖子......从旧的 DocumentList Api 组我被重定向到这里。

我希望这个问题能很快得到解决（我有 2 个不同的程序使用这个可恢复上传，昨天两个程序都正常，所以我想这个问题不在我这边）

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:30:25.610

Drive SDK 中的 500 错误是一种生活方式。我得到它们的几率约为 0.5%。尝试将您的 API 调用包装在指数退避中并重试。

由于您的错误是在上传时，您可能需要根据其 MIME 类型验证您上传的文件是否具有有效内容。（例如，如果它是文本/html，文件是否包含有效的 html）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:29:42.180

4 天后，错误停止（代码没有更改）。PS：有一段时间有一个奇怪的行为（在 google appengine 上不起作用，并且 localhost 是的）。

# php - 如果收到 x 则更新列，否则更新 y

> ID：13511707
> 
> 赞同：0
> 
> 时间：2012-11-22T11:23:58.277
> 
> 标签：php, mysql, sql, sql-update

如果我有一个包含 3 列的表：id、column1、column2。如果我只想在 URL 请求中接收“column1”参数时更新 column1，否则在 URL 地址中接收“column2”参数时更新 column2。那可能吗？我做到了，但我认为这是不正确的：

```
$sql= "UPDATE people SET 
answer_yes= '$answer_yes'+1,
answer_no='$answer_no'+1"; 
```

谢谢你的帮忙。

编辑：现在正在工作（基于理查德维维安的回答）

```
 If($answer_yes==1)
{

    $sql= "UPDATE people SET answer_yes= answer_yes +1"or die(mysql_error());
    mysql_query($sql);
    }
    else if ($answer_no==0)
    {
    $sql= "UPDATE people SET answer_no= answer_no+1" or die(mysql_error());
    mysql_query($sql);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:29:42.343

我不确定您使用的是哪个数据库模型，但`NULL`如果您没有要传递的值，逻辑将是传递一个值，并在更新之前检查这些值是否不为空。

**SQL 服务器**

```
UPDATE Table
SET Column1=ISNULL(@Column1,Column1),
    Column2=ISNULL(@Column2,Column2) 
```

**MySQL**

```
UPDATE Table
SET Column1=IFNULL($Column1,Column1),
    Column2=IFNULL($Column2,Column2) 
```

这里发生的`ISNULL/IFNULL`是检查传递给它的第一个值是否是`NULL`，如果是，则返回第二个值。第二个值与当前值相同，因此它用相同的值更新它（即不改变值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:31:30.897

您可以创建 2 个 SQL 语句选项：

```
If($answer_yes)
{
$sql= "UPDATE people SET answer_yes= '$answer_yes'+1"
}
else
{
$sql= "UPDATE people SET answer_no= '$answer_no'+1"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:28:54.400

你可以这样做：

```
UPDATE people 
SET answer_yes = COALESCE($answer_yes + 1, answer_yes),
    answer_no  = COALESCE($answer_no + 1, answer_no); 
```

[**`COALESCE`**](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)返回`NULL`传递给它的值中的第一个无效值。如果任何参数`$answer_yes`或被`$answer_no`传递了一个`NULL`值，那么`$answer_yes + 1`和`$answer_no + 1`也将被评估为`NULL`，那里`COALESCE`将返回列值，在这种情况下，该列将使用它的值更新，即它不会改变。

# objective-c - ABPeoplePickerNavigationController 自动关闭而不显示通讯录簿

> ID：13511710
> 
> 赞同：3
> 
> 时间：2012-11-22T11:24:12.567
> 
> 标签：objective-c, ios5, uiinterfaceorientation, ipad, addressbookui

我正在使用 ABPeoplePickerNavigationController 来选择用户的通讯录联系人。使用此代码背后的按钮操作：

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];

picker.peoplePickerDelegate = self;
picker.view.frame=self.view.frame;
[self presentModalViewController:picker animated:YES];
[picker release]; 
```

当此代码运行时，它将 Landscape UI 旋转为 Portrait 并最终关闭呈现此 ABPeoplePickerNavigationController 的控制器。

我只在 iOS 5、iPad 2 中遇到这个问题。它在 iOS 6 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T18:58:19.137

我不相信 5.x 这个选择器支持景观。但是，请尝试通过不同的 PresentationStyle 进行操作。我相信它应该在景观中工作，即：

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
picker.peoplePickerDelegate = self;
picker.modalPresentationStyle  = UIModalPresentationFormSheet;
[self presentModalViewController:picker animated:YES]; 
```

# primefaces - Primefaces Slider 不调用 setter

> ID：13511711
> 
> 赞同：7
> 
> 时间：2012-11-22T11:24:12.957
> 
> 标签：primefaces

我有一个 primefaces（3.4.2 版）滑块和一个 inputText 用于滑块值的输出值。问题是滑块的更改会更新 inputText 的显示值，但不会调用绑定到 inputText 的 setter。

这是我的滑块：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:a4j="http://richfaces.org/a4j">

    <h:head>
        <title>Zinsrechner</title>
    </h:head>

    <h:body>

        <h:form>
            <h:panelGrid columns="1" style="margin-bottom:10px">
                <p:inputText id="x" value="#{zinsrechner.monatlicherBeitrag}" />
                <p:slider minValue="0" maxValue="150" for="x" />
            </h:panelGrid>
        </h:form>

    </h:body>

</html> 
```

这是我的 Setter，它没有被调用：

```
public void setMonatlicherBeitrag( Double beitrag ) {
    monatlicherBeitrag = beitrag;
} 
```

吸气剂被称为：

```
public Double getMonatlicherBeitrag() {
    return GuiParameter.getSpareinlageProMonat();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T11:36:04.837

`<p:ajax>`在您的 Slider 内部 添加一个将达到目的。

例子：

```
<p:slider minValue="0" maxValue="150" for="x">
    <p:ajax event="slideEnd" process="x" />
</p:slider> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-04T17:05:55.183

我遇到了同样的问题，但在我的情况下，我将`<p:inputNumber .../>`标签设置为只读。我删除了该属性，一切正常。

# java - JPanel 中的无限循环

> ID：13511721
> 
> 赞同：0
> 
> 时间：2012-11-22T11:24:43.437
> 
> 标签：java, eclipse, jframe, jpanel

我想编写一个简单的 Snake。因此，我编写了一个自定义`JPanel`，它可以容纳一个`Scene`. A`Scene`只是画了一些东西，你可以用`public void run()`方法线程化它，所以它实现了`Runnable`.

现在，当我初始化场景时，我创建了一个`Thread`实例。

```
if (this.getThread() == null) {
    Thread sceneThread = new Thread(this);
    this.setThread(sceneThread);
    this.getThread().run();
} else {
    System.err.println("Scene is already running");
} 
```

场景终于开始在一个单独的线程中执行：

```
// Run thread
public void run () {
    try {
        while (true) {
            this.update();
            this.getGamePanel().sceneShouldRepaint();

            Thread.sleep(this.getFps());
        }
    }
    catch (Exception e) {
        System.err.println(e);
    }
} 
```

不知何故，这阻塞了 Windows 线程。它不再出现。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:42:49.640

您*没有*启动线程，而是直接调用它的`run`方法，因此您将事件线程本身阻塞在一个无限循环中 - 尝试通过调用来*启动*`start()`它。

另外，请务必阅读 Qwerky 指出的 Swing 应用程序中的多线程。

# android - 表创建时的Android sqlite异常

> ID：13511722
> 
> 赞同：0
> 
> 时间：2012-11-22T11:24:46.307
> 
> 标签：android, sqlite, android-sqlite

我正在尝试在 onCreate() 方法中创建一个表，但 sqlite 抛出语法错误的异常。但是如果我在 Firefox SQLite Manager 中尝试相同的查询，它会成功创建表。我不知道我的代码有什么问题。查询如下：

```
CREATE TABLE playlistSongs(
id INTEGER PRIMARY KEY,
playlist_id INTEGER,
FOREIGN KEY(playlist_id) REFERENCES playlists(id) ON DELETE CASCADE,
song_id INTEGER,
FOREIGN KEY(song_id) REFERENCES songs(id) ON DELETE CASCADE); 
```

**例外是：**

```
11-22 16:44:58.066: E/AndroidRuntime(11241): Caused by:
android.database.sqlite.SQLiteException: near "song_id": syntax error:
CREATE TABLE playlistSongs(id INTEGER PRIMARY KEY,playlist_id
INTEGER,FOREIGN KEY(playlist_id) REFERENCES playlists(id) ON DELETE
CASCADE,song_id INTEGER,FOREIGN KEY(song_id) REFERENCES songs(id) ON
DELETE CASCADE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:35:06.760

问题是外键声明。我在最后声明它们是这样的：

> CREATE TABLE playlistSongs(id INTEGER PRIMARY KEY,playlist_id INTEGER,song_id INTEGER,FOREIGN KEY(playlist_id) REFERENCES playlists(id) ON DELETE CASCADE,FOREIGN KEY(song_id) REFERENCES song(id) ON DELETE CASCADE);

感谢@njzk2

# c# - 如何在单击按钮时从服务器端显示弹出 div

> ID：13511728
> 
> 赞同：1
> 
> 时间：2012-11-22T11:24:59.180
> 
> 标签：c#, asp.net

我正在处理付款页面，我想显示一个弹出窗口来显示您的付款正在处理的消息。所以现在我正在使用 CustomValidator 和提交按钮。我想在 Args 有效时显示此弹出窗口。我的代码是。

```
<asp:CustomValidator ID="CustomValidator1" runat="server" ErrorMessage="" OnServerValidate="CustomValidator1_ServerValidate"
                                            EnableClientScript="true" ValidationGroup="Authorize"></asp:CustomValidator>

<asp:Button ID="SubmitButton" runat="server" Text="Pay now" CausesValidation="true" CssClass="blue paynow" style="width:200px;"
                                                ValidationGroup="Authorize" OnClick="SubmitButton_Click" OnClientClick="validate(ContentPlaceHolder1_chk_agree);" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:31:57.680

要在验证后显示消息框，您可以执行以下操作：
将以下 javascript 添加到您的`<head>`

```
<script language="javascript">
    function SubmitButton_ClientClick()
    {
       bool isValid = Page_ClientValidate("Authorize"); //triggers validation
       if (isValid)
       {
           alert('Your payment is processing');
       }

       return isValid;
    }
</script> 
```

然后，像这样更改您的按钮：

```
<asp:Button ID="SubmitButton" runat="server" Text="Pay now" CausesValidation="true" 
            CssClass="blue paynow" style="width:200px;"
            ValidationGroup="Authorize" OnClick="SubmitButton_Click"  
            OnClientClick="return SubmitButton_ClientClick();" /> 
```

**更好的方法是使用弹出 div** - 这是一个非常基本的示例：

在你的某处添加这个`<body>`

```
<div id="popup_box" style="height:300;width:300;position:absolute;top:150;left:350;border:3px solid red;background:#d8d8d8;display:none;">
    <h1>Payment is processing</h1>
    <button id="popupBoxClose" onclick="document.getElementById("popup_box").style.display = 'none';">Close</button>
</div> 
```

并修改`SubmitButton_ClientClick`如下：

```
function SubmitButton_ClientClick()
{
   bool isValid = Page_ClientValidate("Authorize"); //triggers validation
   if (isValid)
   {
      document.getElementById("popup_box").style.display = '';
   }

   return isValid;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:52:53.117

一种更好的方法是使用“updateProgress”。

将您的提交按钮放在 updatePanel 中，并在 updateProgress 中放置一个加载 gif 图像，当付款进度进行时，**它将在加载图像下方显示**，并在付款完成后自动关闭。

![在此处输入图像描述](../Images/6d067f08655e537e634de0d9f715f305.png) **正在加载....**

```
<asp:UpdateProgress id="updateProgress" runat="server">
     <ProgressTemplate>
            <asp:Image ID="imgUpdateProgress" runat="server" ImageUrl="~/images/loadingNew.gif" AlternateText="Loading ..." ToolTip="Loading ..."/>
     </ProgressTemplate>
</asp:UpdateProgress> 
```

# iphone - 如何使补充视图在 UICollectionView 中浮动，就像部分标题在 UITableView 普通样式中一样

> ID：13511733
> 
> 赞同：69
> 
> 时间：2012-11-22T11:25:11.653
> 
> 标签：iphone, uitableview, view, uicollectionview, supplementary

我正在努力使用`UICollectionView`. 如果没有大量的努力工作，在`UITableView`（默认行为）中已经足够简单的事情`UITableViewStylePlain`似乎是不可能的。`UICollectionView`我错过了显而易见的事情吗？

Apple 没有提供有关如何实现此目的的文档。似乎必须子类化`UICollectionViewLayout`并实现自定义布局才能达到此效果。这需要相当多的工作，实现以下方法：

覆盖的方法

每个布局对象都应该实现以下方法：

```
collectionViewContentSize
layoutAttributesForElementsInRect:
layoutAttributesForItemAtIndexPath:
layoutAttributesForSupplementaryViewOfKind:atIndexPath: (if your layout supports supplementary views)
layoutAttributesForDecorationViewOfKind:atIndexPath: (if your layout supports decoration views)
shouldInvalidateLayoutForBoundsChange: 
```

但是，我不清楚如何使补充视图漂浮在单元格上方并“粘”到视图顶部，直到到达下一部分。布局属性中是否有此标志？

我会使用`UITableView`，但我需要创建一个相当复杂的集合层次结构，这可以通过集合视图轻松实现。

任何指导或示例代码将不胜感激！

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-11-27T15:55:20.237

在 iOS9 中，Apple 很友好地在 called 中添加了一个简单的[`UICollectionViewFlowLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout)属性[`sectionHeadersPinToVisibleBounds`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout/1617699-sectionheaderspintovisiblebounds)。

有了这个，您可以使标题像在表格视图中那样浮动。

```
let layout = UICollectionViewFlowLayout()
layout.sectionHeadersPinToVisibleBounds = true
layout.minimumInteritemSpacing = 1
layout.minimumLineSpacing = 1
super.init(collectionViewLayout: layout) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-12-03T07:27:39.883

要么实现以下委托方法：

```
– collectionView:layout:sizeForItemAtIndexPath:
– collectionView:layout:insetForSectionAtIndex:
– collectionView:layout:minimumLineSpacingForSectionAtIndex:
– collectionView:layout:minimumInteritemSpacingForSectionAtIndex:
– collectionView:layout:referenceSizeForHeaderInSection:
– collectionView:layout:referenceSizeForFooterInSection: 
```

在具有您的`:cellForItemAtIndexPath`方法的视图控制器中（只需返回正确的值）。或者，您也可以直接在布局对象中设置这些值，而不是使用委托方法，例如`[layout setItemSize:size];`.

使用这些方法中的任何一种都可以让您在代码中设置您的设置，而不是在 IB 中设置，因为它们在您设置自定义布局时会被删除。记住也要添加`<UICollectionViewDelegateFlowLayout>`到您的 .h 文件中！

创建一个新的 Subclass `UICollectionViewFlowLayout`，随意调用它，并确保 H 文件具有：

```
#import <UIKit/UIKit.h>

@interface YourSubclassNameHere : UICollectionViewFlowLayout

@end 
```

在实现文件中确保它具有以下内容：

```
- (NSArray *) layoutAttributesForElementsInRect:(CGRect)rect {

    NSMutableArray *answer = [[super layoutAttributesForElementsInRect:rect] mutableCopy];
    UICollectionView * const cv = self.collectionView;
    CGPoint const contentOffset = cv.contentOffset;

    NSMutableIndexSet *missingSections = [NSMutableIndexSet indexSet];
    for (UICollectionViewLayoutAttributes *layoutAttributes in answer) {
        if (layoutAttributes.representedElementCategory == UICollectionElementCategoryCell) {
            [missingSections addIndex:layoutAttributes.indexPath.section];
        }
    }
    for (UICollectionViewLayoutAttributes *layoutAttributes in answer) {
        if ([layoutAttributes.representedElementKind isEqualToString:UICollectionElementKindSectionHeader]) {
            [missingSections removeIndex:layoutAttributes.indexPath.section];
        }
    }

    [missingSections enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {

        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:0 inSection:idx];

        UICollectionViewLayoutAttributes *layoutAttributes = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionHeader atIndexPath:indexPath];

        [answer addObject:layoutAttributes];

    }];

    for (UICollectionViewLayoutAttributes *layoutAttributes in answer) {

        if ([layoutAttributes.representedElementKind isEqualToString:UICollectionElementKindSectionHeader]) {

            NSInteger section = layoutAttributes.indexPath.section;
            NSInteger numberOfItemsInSection = [cv numberOfItemsInSection:section];

            NSIndexPath *firstCellIndexPath = [NSIndexPath indexPathForItem:0 inSection:section];
            NSIndexPath *lastCellIndexPath = [NSIndexPath indexPathForItem:MAX(0, (numberOfItemsInSection - 1)) inSection:section];

            NSIndexPath *firstObjectIndexPath = [NSIndexPath indexPathForItem:0 inSection:section];
            NSIndexPath *lastObjectIndexPath = [NSIndexPath indexPathForItem:MAX(0, (numberOfItemsInSection - 1)) inSection:section];

            UICollectionViewLayoutAttributes *firstObjectAttrs;
            UICollectionViewLayoutAttributes *lastObjectAttrs;

            if (numberOfItemsInSection > 0) {
                firstObjectAttrs = [self layoutAttributesForItemAtIndexPath:firstObjectIndexPath];
                lastObjectAttrs = [self layoutAttributesForItemAtIndexPath:lastObjectIndexPath];
            } else {
                firstObjectAttrs = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionHeader
                                                                    atIndexPath:firstObjectIndexPath];
                lastObjectAttrs = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionFooter
                                                                   atIndexPath:lastObjectIndexPath];
            }

            CGFloat headerHeight = CGRectGetHeight(layoutAttributes.frame);
            CGPoint origin = layoutAttributes.frame.origin;
            origin.y = MIN(
                           MAX(
                               contentOffset.y + cv.contentInset.top,
                               (CGRectGetMinY(firstObjectAttrs.frame) - headerHeight)
                               ),
                           (CGRectGetMaxY(lastObjectAttrs.frame) - headerHeight)
                           );

            layoutAttributes.zIndex = 1024;
            layoutAttributes.frame = (CGRect){
                .origin = origin,
                .size = layoutAttributes.frame.size
            };

        }

    }

    return answer;

}

- (BOOL) shouldInvalidateLayoutForBoundsChange:(CGRect)newBound {

    return YES;

} 
```

在 Interface Builder 中为 Flow Layout 选择“Custom”，选择您刚刚创建的“YourSubclassNameHere”类。跑！

（注意：上面的代码可能不尊重 contentInset.bottom 值，或者特别大或小的页脚对象，或者有 0 个对象但没有页脚的集合。）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-23T21:55:38.897

如果您有一个单独的标题视图，您希望将其固定到 UICollectionView 的顶部，这是一种相对简单的方法。请注意，这意味着尽可能简单 - 它假设您在单个部分中使用单个标题。

```
//Override UICollectionViewFlowLayout class
@interface FixedHeaderLayout : UICollectionViewFlowLayout
@end

@implementation FixedHeaderLayout
//Override shouldInvalidateLayoutForBoundsChange to require a layout update when we scroll 
- (BOOL) shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds {
    return YES;
}

//Override layoutAttributesForElementsInRect to provide layout attributes with a fixed origin for the header
- (NSArray *) layoutAttributesForElementsInRect:(CGRect)rect {

    NSMutableArray *result = [[super layoutAttributesForElementsInRect:rect] mutableCopy];

    //see if there's already a header attributes object in the results; if so, remove it
    NSArray *attrKinds = [result valueForKeyPath:@"representedElementKind"];
    NSUInteger headerIndex = [attrKinds indexOfObject:UICollectionElementKindSectionHeader];
    if (headerIndex != NSNotFound) {
        [result removeObjectAtIndex:headerIndex];
    }

    CGPoint const contentOffset = self.collectionView.contentOffset;
    CGSize headerSize = self.headerReferenceSize;

    //create new layout attributes for header
    UICollectionViewLayoutAttributes *newHeaderAttributes = [UICollectionViewLayoutAttributes layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionHeader withIndexPath:[NSIndexPath indexPathForItem:0 inSection:0]];
    CGRect frame = CGRectMake(0, contentOffset.y, headerSize.width, headerSize.height);  //offset y by the amount scrolled
    newHeaderAttributes.frame = frame;
    newHeaderAttributes.zIndex = 1024;

    [result addObject:newHeaderAttributes];

    return result;
}
@end 
```

见：[https ://gist.github.com/4613982](https://gist.github.com/4613982)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-11-26T21:31:03.823

这是我的看法，我认为它比上面所看到的要简单得多。简单的主要来源是我没有继承流布局，而是滚动我自己的布局（如果你问我，要容易得多）。

**请注意**，我假设您已经能够实现自己的自定义，该自定义`UICollectionViewLayout`将显示单元格和标题而无需实现浮动。一旦你编写了那个实现，只有这样下面的代码才有意义。同样，这是因为 OP 专门询问浮动标题部分。

一些奖金：

1.  我浮动两个标题，而不仅仅是一个
2.  标头将以前的标头推开
3.  看，快！

笔记：

1.  `supplementaryLayoutAttributes`包含所有没有浮动实现的标题属性
2.  我在 中使用此代码`prepareLayout`，因为我预先进行了所有计算。
3.  不要忘记覆盖`shouldInvalidateLayoutForBoundsChange`为真！

* * *

```
// float them headers
let yOffset = self.collectionView!.bounds.minY
let headersRect = CGRect(x: 0, y: yOffset, width: width, height: headersHeight)

var floatingAttributes = supplementaryLayoutAttributes.filter {
    $0.frame.minY < headersRect.maxY
}

// This is three, because I am floating 2 headers
// so 2 + 1 extra that will be pushed away
var index = 3
var floatingPoint = yOffset + dateHeaderHeight

while index-- > 0 && !floatingAttributes.isEmpty {

    let attribute = floatingAttributes.removeLast()
    attribute.frame.origin.y = max(floatingPoint, attribute.frame.origin.y)

    floatingPoint = attribute.frame.minY - dateHeaderHeight
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-07T06:50:56.360

`Storyboard`如果已经在或文件中设置了流布局，`Xib`那么试试这个，

```
(collectionView.collectionViewLayout as? UICollectionViewFlowLayout)?.sectionHeadersPinToVisibleBounds = true 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-04T03:31:43.580

如果有人在 Objective-C 中寻找解决方案，请将其放入 viewDidload：

```
 UICollectionViewFlowLayout *flowLayout = 
    (UICollectionViewFlowLayout*)_yourcollectionView.collectionViewLayout;
    [flowLayout setSectionHeadersPinToVisibleBounds:YES]; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-11-24T13:39:09.567

@iPrabu 有一个很好的[答案](https://stackoverflow.com/a/33960962/732792)`sectionHeadersPinToVisibleBounds`。我将补充一点，您也可以在 Interface Builder 中设置此属性：

1.  在文档导航器中选择流布局对象。（如果折叠，首先使用编辑器左下角的工具栏按钮将其展开。）

[![在文档导航器中选择流布局对象。](../Images/0fd02b041fed6bb1322ba6dc972bd9d0.png)](https://i.stack.imgur.com/jQjtx.png)

2.  打开身份检查器并添加一个用户定义的运行时属性，其中包含 key path `sectionHeadersPinToVisibleBounds`、类型*Boolean*和选中的复选框。

[![在身份检查器中设置运行时属性。](../Images/4d7087d7d6ef1e4ef806489410ecf4b0.png)](https://i.stack.imgur.com/G2Lbe.png)

默认标题视图具有透明背景。您可能希望使其（部分）不透明或添加模糊效果视图。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-12T09:02:22.410

我用**剧烈**编码的代码运行了这个。但是，该代码没有考虑 sectionInset。

所以我将这段代码更改为垂直滚动

```
origin.y = MIN(
              MAX(contentOffset.y, (CGRectGetMinY(firstCellAttrs.frame) - headerHeight)),
              (CGRectGetMaxY(lastCellAttrs.frame) - headerHeight)
           ); 
```

至

```
origin.y = MIN(
           MAX(contentOffset.y, (CGRectGetMinY(firstCellAttrs.frame) - headerHeight - self.sectionInset.top)),
           (CGRectGetMaxY(lastCellAttrs.frame) - headerHeight + self.sectionInset.bottom)
           ); 
```

如果你们想要水平滚动的代码，请参阅代码 aove。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-13T20:21:49.497

我遇到了同样的问题，并在我的谷歌搜索结果中发现了这个问题。首先，我要感谢 cocotutch 分享他的解决方案。但是，我希望我的 UICollectionView**水平滚动**并且标题粘在屏幕的左侧，所以我不得不稍微改变一下解决方案。

基本上我只是改变了这个：

```
 CGFloat headerHeight = CGRectGetHeight(layoutAttributes.frame);
        CGPoint origin = layoutAttributes.frame.origin;
        origin.y = MIN(
                       MAX(
                           contentOffset.y,
                           (CGRectGetMinY(firstCellAttrs.frame) - headerHeight)
                           ),
                       (CGRectGetMaxY(lastCellAttrs.frame) - headerHeight)
                       );

        layoutAttributes.zIndex = 1024;
        layoutAttributes.frame = (CGRect){
            .origin = origin,
            .size = layoutAttributes.frame.size
        }; 
```

对此：

```
 if (self.scrollDirection == UICollectionViewScrollDirectionVertical) {
            CGFloat headerHeight = CGRectGetHeight(layoutAttributes.frame);
            CGPoint origin = layoutAttributes.frame.origin;
            origin.y = MIN(
                           MAX(contentOffset.y, (CGRectGetMinY(firstCellAttrs.frame) - headerHeight)),
                           (CGRectGetMaxY(lastCellAttrs.frame) - headerHeight)
                           );

            layoutAttributes.zIndex = 1024;
            layoutAttributes.frame = (CGRect){
                .origin = origin,
                .size = layoutAttributes.frame.size
            };
        } else {
            CGFloat headerWidth = CGRectGetWidth(layoutAttributes.frame);
            CGPoint origin = layoutAttributes.frame.origin;
            origin.x = MIN(
                           MAX(contentOffset.x, (CGRectGetMinX(firstCellAttrs.frame) - headerWidth)),
                           (CGRectGetMaxX(lastCellAttrs.frame) - headerWidth)
                           );

            layoutAttributes.zIndex = 1024;
            layoutAttributes.frame = (CGRect){
                .origin = origin,
                .size = layoutAttributes.frame.size
            };
        } 
```

请参阅：[https](https://gist.github.com/vigorouscoding/5155703) ://gist.github.com/vigorouscoding/5155703或[http://www.vigorouscoding.com/2013/03/uicollectionview-with-sticky-headers/](http://www.vigorouscoding.com/2013/03/uicollectionview-with-sticky-headers/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-06-04T16:45:53.360

[我认为我在github](https://github.com/derrh/StickyViews)上添加了一个非常简单的示例。

基本上，策略是提供一个自定义布局，使边界更改无效，并为拥抱当前边界的补充视图提供布局属性。正如其他人所建议的那样。我希望代码有用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-08T04:49:32.653

cocotouch 的帖子中有一个错误。当节中没有项目并且节页脚设置为不显示时，节页眉将超出集合视图，用户将无法看到它。

事实上改变：

```
if (numberOfItemsInSection > 0) {
    firstObjectAttrs = [self layoutAttributesForItemAtIndexPath:firstObjectIndexPath];
    lastObjectAttrs = [self layoutAttributesForItemAtIndexPath:lastObjectIndexPath];
} else {
    firstObjectAttrs = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionHeader
                                                            atIndexPath:firstObjectIndexPath];
    lastObjectAttrs = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionFooter
                                                           atIndexPath:lastObjectIndexPath];
} 
```

进入：

```
if (numberOfItemsInSection > 0) {
    firstObjectAttrs = [self layoutAttributesForItemAtIndexPath:firstObjectIndexPath];
    lastObjectAttrs = [self layoutAttributesForItemAtIndexPath:lastObjectIndexPath];
} else {
    firstObjectAttrs = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionHeader
                                                            atIndexPath:firstObjectIndexPath];
    lastObjectAttrs = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionFooter
                                                           atIndexPath:lastObjectIndexPath];
    if (lastObjectAttrs == nil) {
        lastObjectAttrs = firstObjectAttrs;
    }
} 
```

将解决这个问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-19T05:05:48.987

**斯威夫特 5.0**

将以下内容放入您的 viewDidLoad：

```
if let layout = collectionView?.collectionViewLayout as? UICollectionViewFlowLayout {
    layout.sectionHeadersPinToVisibleBounds = true
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-11T04:21:03.843

[VCollectionViewGridLayout](https://github.com/vast-eng/uicollectionview-gridlayout/blob/master/VCollectionViewGridLayout/VCollectionViewGridLayout.h)做粘性标题。它是一个基于[TLIndexPathTools](https://github.com/wtmoose/TLIndexPathTools)的垂直滚动简单网格布局。尝试运行[Sticky Headers](https://github.com/vast-eng/uicollectionview-gridlayout/blob/master/Examples/Sticky%20Headers/Sticky%20Headers/StickyHeadersCollectionViewController.m)示例项目。

此布局还具有比`UICollectionViewFlowLayout`. 提供了几个示例项目，可让您在两种布局之间切换以演示改进。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-03-02T22:31:18.240

我似乎偶然发现了一个优雅的解决方案，其他人可能会觉得有用:)

```
 let layout = UICollectionViewCompositionalLayout(
        sectionProvider: { (_, layoutEnvironment) -> NSCollectionLayoutSection? in
            var configuration = UICollectionLayoutListConfiguration(appearance: .grouped)
            configuration.headerMode = .supplementary
            configuration.showsSeparators = true
            configuration.backgroundColor = UIColor.systemGray6

            var section = NSCollectionLayoutSection.list(
                using: configuration,
                layoutEnvironment: layoutEnvironment
            )
            let sectionSize = NSCollectionLayoutSize(
                widthDimension: .fractionalWidth(1.0),
                heightDimension: .estimated(1)
            )
            let sectionHeader = NSCollectionLayoutBoundarySupplementaryItem(
                layoutSize: sectionSize,
                elementKind: UICollectionView.elementKindSectionHeader,
                alignment: .top
            )
            sectionHeader.pinToVisibleBounds = true
            section.boundarySupplementaryItems = [sectionHeader]
            return section
    })
    let frame = CGRect(x: 0.0, y: 0.0, width: 300.0, height: 500.0)
    let view = UICollectionView(frame: frame, collectionViewLayout: layout) 
```

我在其他解决方案中一直遇到的问题是找不到固定标头*并*使其动画将另一个标头推到视野之外的方法。在下面的代码中，没有一个实例可以让您像上面的解决方案那样访问该`pinToVisibleBounds`属性：

```
 var configuration = UICollectionLayoutListConfiguration(appearance: .grouped)
    configuration.headerMode = .supplementary
    configuration.showsSeparators = true
    configuration.backgroundColor = UIColor.systemGray6
    let layout = UICollectionViewCompositionalLayout.list(using: configuration) 
```

# mysql - 谷歌地图按地址组件搜索

> ID：13511737
> 
> 赞同：-1
> 
> 时间：2012-11-22T11:25:26.730
> 
> 标签：mysql, google-maps

我已经在我的网络应用程序中实现了一个基本的 google 地方自动完成功能，例如说“Heraclion, Crete”并将其转换为我想要的 latlng 坐标。我还使用了 api 中的 mysql radius 示例来显示最近的条目。我在克里特岛的第二个区域也有位置，称为“Rethymnon”。

现在的问题如下。据说一种类型只是克里特岛。如何从 Heraclion 和 Rethymnon 获得所有条目？我的代码使用前面提到的半径方法。所以我需要其他东西来在一个矩形区域中定义它。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:00:49.767

如果结果包含视口（LatLngBounds），您可以使用它。

[地点结果](https://developers.google.com/maps/documentation/javascript/reference#PlaceGeometry)

几何：地方的几何相关信息。这包括：

*   location 提供地方的纬度和经度。
*   viewport 定义查看此地点时地图上的首选视口

# internet-explorer - Apache Solr 4.0 管理 UI 在 MSIE 下不起作用

> ID：13511739
> 
> 赞同：3
> 
> 时间：2012-11-22T11:25:27.557
> 
> 标签：internet-explorer, solr

从 Solr 3.6 迁移到 Solr 4.0 后，我发现 Sole Admin UI 在 MSIE 下不起作用。尝试了 7,8,9 版本 - 没有运气。死链接和控制台中的一堆javascript错误完全无法正常工作。但它适用于 Chrom 和 Firefox。

我做错了什么还是已知的事情？有人可以详细说明一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T17:38:06.840

根据 Mauricio 在评论中提供的[链接问题](https://issues.apache.org/jira/browse/SOLR-3876)，这是 Solr 4.0 Beta、4.0 Release Candidates 和初始 4.0 版本的一个已知问题。该问题已在 Solr 4.1 中解决。

# xml - Ebay 出口清单 XML 结构。将 DTD 转换为 XSD

> ID：13511747
> 
> 赞同：1
> 
> 时间：2012-11-22T11:25:53.620
> 
> 标签：xml, xsd, dtd, ebay-design-templates

任何人都可以理解 Ebay 的这种 XML 文件结构吗？

[http://pages.ebay.co.uk/help/sell/export-structure.html](http://pages.ebay.co.uk/help/sell/export-structure.html)

我不认为这是一个有效的模式，并且正在努力理解 XML 的结构。任何人都可以弄清楚吗？

我需要基于此构建一个导入脚本，但无法从任何地方获取正确的 XML 文件示例。

非常感谢

**编辑**

我发现它是一个 DTD 模式。因此，我需要以某种方式转换为 xsd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:27:19.730

您的链接指向的来自 ebay 的 DTD 无效，因此我不得不进行一些更正。

可能导致问题的一项更正是该`Published`元素有两个声明。`timestamp`我删除了有孩子的声明，因为`timestamp`没有声明。

更正后的 DTD、生成的 XSD 和示例实例如下所示。

XSD 和示例实例是使用[oXygen XML 编辑器](http://www.oxygenxml.com/)（我强烈推荐）生成的。

这至少应该让你开始......

**原始 DTD**（固定）

```
<!ELEMENT       ebay (StoreExport)>

<!ELEMENT       StoreExport (Settings, Products)>

<!ELEMENT   Settings (Published)>

<!-- The timestamp reflects when the Items have last changed. -->
<!ELEMENT       Published     EMPTY>
<!ATTLIST       Published
                timestamp     CDATA #REQUIRED>

<!ELEMENT       Products     (Product*)>

<!ELEMENT       Product      (Description,
                                Caption,
                                Url,
                                EndTime,
                                Category,
                                EndNodeCategory,
                                BuyItNow?,
                                ListingFormat,
                                Orderable,
                                SiteCurrency,
                                Pricing,
                                Availability?,
                                Quantity,
                                GalleryPicture?,
                                Site,
                                Country)>
<!ATTLIST       Product
        Id            CDATA        #REQUIRED>

<!ELEMENT   Description      (#PCDATA)>
<!ELEMENT   Caption          (#PCDATA)>
<!ELEMENT   Url              (#PCDATA)>
<!ELEMENT   EndTime          (#PCDATA)>
<!ELEMENT   Category         (#PCDATA)>
<!ELEMENT   EndNodeCategory  (#PCDATA)>
<!ELEMENT   BuyItNow         (#PCDATA)>
<!ELEMENT   ListingFormat    (#PCDATA)>
<!ELEMENT   Orderable        (#PCDATA)>
<!ELEMENT   SiteCurrency     (#PCDATA)>
<!ELEMENT   Pricing          (BasePrice,BuyItNowPrice?,ShippingCost?)>
<!ELEMENT   Availability     (#PCDATA)>
<!ELEMENT   Quantity         (#PCDATA)>
<!ELEMENT   GalleryPicture   (#PCDATA)>
<!ELEMENT   Site             (#PCDATA)>
<!ELEMENT   Country          (#PCDATA)>

<!ELEMENT   BasePrice        (#PCDATA)>
<!ELEMENT   BuyItNowPrice    (#PCDATA)>
<!ELEMENT   ShippingCost     (#PCDATA)> 
```

**XSD** (ebay.xsd)

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:element name="ebay" type="StoreExport"/>
    <xs:complexType name="StoreExport">
        <xs:sequence>
            <xs:element ref="StoreExport"/>
        </xs:sequence>
    </xs:complexType>
    <xs:element name="StoreExport">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="Settings"/>
                <xs:element ref="Products"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="Settings" type="Published"/>
    <!-- The timestamp reflects when the Items have last changed. -->
    <xs:complexType name="Published">
        <xs:sequence>
            <xs:element ref="Published"/>
        </xs:sequence>
    </xs:complexType>
    <xs:element name="Published">
        <xs:complexType>
            <xs:attributeGroup ref="attlist.Published"/>
        </xs:complexType>
    </xs:element>
    <xs:attributeGroup name="attlist.Published">
        <xs:attribute name="timestamp" use="required"/>
    </xs:attributeGroup>
    <xs:element name="Products">
        <xs:complexType>
            <xs:sequence>
                <xs:element minOccurs="0" maxOccurs="unbounded" ref="Product"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="Product">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="Description"/>
                <xs:element ref="Caption"/>
                <xs:element ref="Url"/>
                <xs:element ref="EndTime"/>
                <xs:element ref="Category"/>
                <xs:element ref="EndNodeCategory"/>
                <xs:element minOccurs="0" ref="BuyItNow"/>
                <xs:element ref="ListingFormat"/>
                <xs:element ref="Orderable"/>
                <xs:element ref="SiteCurrency"/>
                <xs:element ref="Pricing"/>
                <xs:element minOccurs="0" ref="Availability"/>
                <xs:element ref="Quantity"/>
                <xs:element minOccurs="0" ref="GalleryPicture"/>
                <xs:element ref="Site"/>
                <xs:element ref="Country"/>
            </xs:sequence>
            <xs:attributeGroup ref="attlist.Product"/>
        </xs:complexType>
    </xs:element>
    <xs:attributeGroup name="attlist.Product">
        <xs:attribute name="Id" use="required"/>
    </xs:attributeGroup>
    <xs:element name="Description" type="xs:string"/>
    <xs:element name="Caption" type="xs:string"/>
    <xs:element name="Url" type="xs:string"/>
    <xs:element name="EndTime" type="xs:string"/>
    <xs:element name="Category" type="xs:string"/>
    <xs:element name="EndNodeCategory" type="xs:string"/>
    <xs:element name="BuyItNow" type="xs:string"/>
    <xs:element name="ListingFormat" type="xs:string"/>
    <xs:element name="Orderable" type="xs:string"/>
    <xs:element name="SiteCurrency" type="xs:string"/>
    <xs:element name="Pricing">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="BasePrice"/>
                <xs:element minOccurs="0" ref="BuyItNowPrice"/>
                <xs:element minOccurs="0" ref="ShippingCost"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="Availability" type="xs:string"/>
    <xs:element name="Quantity" type="xs:string"/>
    <xs:element name="GalleryPicture" type="xs:string"/>
    <xs:element name="Site" type="xs:string"/>
    <xs:element name="Country" type="xs:string"/>
    <xs:element name="BasePrice" type="xs:string"/>
    <xs:element name="BuyItNowPrice" type="xs:string"/>
    <xs:element name="ShippingCost" type="xs:string"/>
</xs:schema> 
```

**示例 XML 实例**

```
<ebay xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="file:/C:/ebay.xsd">
    <StoreExport>
        <Settings>
            <Published timestamp="timestamp0"/>
        </Settings>
        <Products>
            <Product Id="Id0">
                <Description>Description0</Description>
                <Caption>Caption0</Caption>
                <Url>Url0</Url>
                <EndTime>EndTime0</EndTime>
                <Category>Category0</Category>
                <EndNodeCategory>EndNodeCategory0</EndNodeCategory>
                <BuyItNow>BuyItNow0</BuyItNow>
                <ListingFormat>ListingFormat0</ListingFormat>
                <Orderable>Orderable0</Orderable>
                <SiteCurrency>SiteCurrency0</SiteCurrency>
                <Pricing>
                    <BasePrice>BasePrice0</BasePrice>
                    <BuyItNowPrice>BuyItNowPrice0</BuyItNowPrice>
                    <ShippingCost>ShippingCost0</ShippingCost>
                </Pricing>
                <Availability>Availability0</Availability>
                <Quantity>Quantity0</Quantity>
                <GalleryPicture>GalleryPicture0</GalleryPicture>
                <Site>Site0</Site>
                <Country>Country0</Country>
            </Product>
            <Product Id="Id1">
                <Description>Description1</Description>
                <Caption>Caption1</Caption>
                <Url>Url1</Url>
                <EndTime>EndTime1</EndTime>
                <Category>Category1</Category>
                <EndNodeCategory>EndNodeCategory1</EndNodeCategory>
                <BuyItNow>BuyItNow1</BuyItNow>
                <ListingFormat>ListingFormat1</ListingFormat>
                <Orderable>Orderable1</Orderable>
                <SiteCurrency>SiteCurrency1</SiteCurrency>
                <Pricing>
                    <BasePrice>BasePrice1</BasePrice>
                    <BuyItNowPrice>BuyItNowPrice1</BuyItNowPrice>
                    <ShippingCost>ShippingCost1</ShippingCost>
                </Pricing>
                <Availability>Availability1</Availability>
                <Quantity>Quantity1</Quantity>
                <GalleryPicture>GalleryPicture1</GalleryPicture>
                <Site>Site1</Site>
                <Country>Country1</Country>
            </Product>
        </Products>
    </StoreExport>
</ebay> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:43:51.887

James Clark 的[trang](http://www.thaiopensource.com/relaxng/trang.html)是一个多格式模式转换器。如前所述，ebay 的 DTD 需要修复——“已发布”的两个元素声明；如果“已发布”的第一个适用，则“时间戳”没有元素声明；没有“PCDATA”声明值之类的东西（可能应该是“CDATA”）；在应用任何转换器之前，没有“#CDATA”声明的内容（应该是“#PCDATA”）。

# c# - 我如何从布尔开关打开/关闭 OR 运算符

> ID：13511753
> 
> 赞同：1
> 
> 时间：2012-11-22T11:26:10.987
> 
> 标签：c#, linq, operators, boolean-logic

我正在制作 Linq 代码来查询数据库，并且根据布尔值，我需要在使用语句和使用 !statement 之间切换（即 NOT），如果不使用下面的 if/else 我怎么能做到这一点？意味着我在两个地方有非常相同的代码。

请参见以下示例：

```
private string getFromDB(bool decision)
{
    if (decision)
    {
        return db.Where(p => (Types.Contains(p.CurrentOwner)));
    }
    else
    {
        return db.Where(p => !(Types.Contains(p.CurrentOwner)));
    }
} 
```

它必须可用于 LINQ 查询，上面的示例被简化为问题的本质。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:28:06.167

```
private string getFromDB(bool decision)
{
    return db.Where(p => (Types.Contains(p.CurrentOwner) == decision));
} 
```

# c - 为什么我不能释放 malloc 的字符串？

> ID：13511754
> 
> 赞同：2
> 
> 时间：2012-11-22T11:26:12.890
> 
> 标签：c, string, malloc, constants, free

我有这个代码：

```
#define ABC "abc"

void main()
{
char *s = malloc(sizeof(char)*3);
printf("%p ", s);
s = ABC;
printf("%p ", s);
free(s);
} 
```

这是输出：

> `0x8927008 0x8048574 Segmentation fault (core dumped)`

如您所见，字符串 s 的地址在赋值后发生了变化（我认为这就是 free() 给出 segfault 的原因）。谁能解释我为什么以及如何发生这种情况？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T11:28:39.160

线

```
s = ABC; 
```

更改`s`为指向可能位于只读内存中的不同字符串。尝试释放此类内存会导致未定义的行为。很可能会发生崩溃。

我想你想要

```
strcpy(s, ABC); 
```

反而。这会将 char 数组“abc”复制到`s`. 请注意，这将导致进一步的错误 -`s`太短并且没有空间用于结尾的 nul 终止符`ABC`。将分配更改为 4 个字节以解决此问题

```
char *s = malloc(4); 
```

或使用

```
char *s = malloc(sizeof(ABC)); 
```

if`ABC`是您要存储的最大长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:30:15.617

`void main()` **UB**：`main`返回`int`

`printf("%p", s)` **UB**：调用一个函数，该函数接受可变数量的参数，但范围内没有原型；**UB**：在需要类型值的`char*`地方使用类型值`void*`。

`free(s)` **UB** : s 不是 a 的结果`malloc()`

**UB**是[未定义的行为](http://c2.com/cgi/wiki?UndefinedBehavior)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T11:31:56.253

后

```
char *s = malloc(sizeof(char)*3); 
```

s 指向 malloc 分配的内存。

线

```
s = ABC; 
```

将更改为

```
s = "abc"; 
```

在占有之后。现在这一步`s`指向`"abc"`只读区域中的字符串文字。请注意，这也会泄漏分配的内存。

现在由于`s`指向非分配的只读内存，因此释放它是一种未定义的行为。

如果要将字符串复制`"abc"`到指向的内存中，则`s`需要`strcpy`用作：

```
strcpy(s, ABC); 
```

但请注意，要容纳`"abc"`,`s`必须至少有 4 个字符长，以容纳 NUL 字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T14:56:28.173

换行： char *s = malloc(sizeof(char)*3);

到

char *s = (char *)malloc(sizeof(char)*3);

这清除了许多编译器警告的警告。

不仅如此，我还建议您根据您的工作使您的代码更加灵活。如果由于某种原因您将 ABC 更改为“ABCD”，您将没有为所有字符分配足够的空间。

此外，字符串“ABC”实际上有 4 个字符（因为末尾有一个空字符来终止字符串）。如果没有那个额外的终结符，你会看到问题。

# meteor - 为什么使用 accounts.ui.config 会使我的应用程序崩溃？

> ID：13511756
> 
> 赞同：6
> 
> 时间：2012-11-22T11:26:18.737
> 
> 标签：meteor

代码（如[ui-config 文档](http://docs.meteor.com/#accounts_ui_config)中所建议的 ）：

```
Accounts.ui.config({
  passwordSignupFields: 'USERNAME_AND_OPTIONAL_EMAIL'
});

Error: TypeError: Cannot call method 'config' of undefined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T10:41:37.730

我发现在您的项目中创建的文件（yourprojectname.js）是客户端脚本。我的问题是我创建了一个名为“client.js”的新文件，尽管我不必这样做。愚蠢的我！

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-29T02:51:07.433

如果您有客户端文件的客户端文件夹，则可以将其添加到那里。我刚刚将它添加到我添加到我的客户端文件夹中的 config.js 文件中，它工作正常。

客户端/config.js

`Accounts.ui.config({ passwordSignupFields: 'USERNAME_AND_OPTIONAL_EMAIL' });`

# html - Rails field_with_errors 和 Bootstrap form-horizo ntal

> ID：13511770
> 
> 赞同：4
> 
> 时间：2012-11-22T11:26:52.107
> 
> 标签：html, css, ruby-on-rails, twitter-bootstrap

在我的`custom.css.scss`文件中，我有：

```
.field_with_errors {
  @extend .control-group;
  @extend .error;
} 
```

问题是对于 Bootstrap 水平表单，字段不会保持对齐。

HTML（由 rails 生成）是：

```
<div class="control-group">
    <div class="field_with_errors"><label class="control-label" for="bookmark_url">Url</label></div>
    <div class="controls">
      <div class="field_with_errors"><input id="bookmark_url" name="bookmark[url]" size="30" type="text" value=""></div>
    </div>
  </div> 
```

[这是一个 jsfiddle](http://jsfiddle.net/mihaifm/a78B5/2/)来说明问题。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T19:38:00.397

我用以下css修复了它：

```
.form-horizontal .field_with_errors
{
  margin: 0;
}

.form-horizontal .field_with_errors:before, .form-horizontal .field_with_errors::after 
{
  display: block;
  clear: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:45:27.630

你`.control-group`那里有一些无关的div。只需将`error`类添加到封闭的`control-group`div 即可获得所需的结果：

```
<div class="control-group error">
  <label class="control-label" for="bookmark_url">Url</label>
  <div class="controls">
    <input id="bookmark_url" name="bookmark[url]" size="30" type="text" value="">
  </div>
</div> 
```

# mysql - MySql：Check 语句中的 Select 语句

> ID：13511771
> 
> 赞同：4
> 
> 时间：2012-11-22T11:26:53.040
> 
> 标签：mysql, select

我必须创建一个表如下

借款人(customerNo,LoanNo)

如果客户没有超过3笔贷款，则可以贷款。

我创建了如下表

```
create table borrower(
customerno int(5),
LoanNo int(5),
primary key(customerno,loanno),
check( customerno not in 
(select customerno from borrower group by customerno having count(loanno)>=4))
); 
```

但它给了我一个错误说

```
[root@localhost:3306] ERROR 1146: Table 'test.borrower' doesn't exist 
```

有人能告诉我如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:14:08.173

它给出错误的原因是因为`CHECK`约束是指正在创建的表，但在解析语句时它并不存在。

但是我有一些坏消息要告诉你...... **mysql 忽略了`CHECK`约束**。它被允许作为语法仅用于与其他数据库中的 create 语句兼容。

请参阅[CREATE TABLE 的 mysql 文档](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)：

> CHECK 子句被解析，但被所有存储引擎忽略。

您必须使用触发器，但请注意，您不能从中引发异常。最好的希望是当您检测到问题时，执行诸如执行之类的操作`SELECT * FROM TOO_MANY_LOANS`，并希望调用者弄清楚错误“No such table TOO_MANY_LOANS”的真正含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:05:33.833

由于这属于业务规则而不是数据结构，因此您应该使用这样的存储过程

```
DELIMITER ;;
CREATE PROCEDURE `AddCustomerLoan`(IN Acustomerno int(5), IN ALoanNo int(5), OUT ResultCode INT)
BEGIN

SELECT COUNT(*)
INTO @LoanCount
FROM borrower
WHERE customerno = Acustomerno;

IF @LoanCount < 4 THEN

    INSERT INTO borrower ( customerno, LoanNo )
    VALUES ( Acustomerno, ALoanNo );

    SET ResultCode = 0;

ELSE

    -- Too many Entries
    SET ResultCode = 1;

END IF;

END;;
DELIMITER ; 
```

ResultCode 将通知您的应用程序是否成功，以及为什么不成功。

另一个优点是您可以修改最大条目数或获取每个客户的最大条目数，而无需更改应用程序代码。

# java - 如何在休眠中保存表的孩子

> ID：13511773
> 
> 赞同：0
> 
> 时间：2012-11-22T11:26:52.953
> 
> 标签：java, hibernate

我有三张桌子

客户、关系、状态

在我的`Client`实体内部，我有

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "relationId")
private Relation relationId; 
```

和

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "statusId")
private Status statusId; 
```

关系和状态实体只有 getter/setter，没有关系。

在这里，我正在保存/更新我的客户，并且我也想保存/创建这个关系

```
Session session = sessionFactory.openSession();

try
{

    Transaction tr = session.beginTransaction();
    updatedClient = (Client) session.get(Client.class, id);
    updatedClient.setClientPostCode(client.getClientPostCode());
    updatedClient.setRelationId(client.getRelationId());

    session.saveOrUpdate(client.getRelationId());
    session.update(updatedClient);
    tr.commit();
} 
```

这段代码没有异常，`Client`成功保存，`Relation`成功创建，但`relationID`创建的没有分配给`relationID`客户表中的列。

使用此代码创建的关系具有`relationID`(primarykey: 3) 但在 中的`relationId`列中`Client`，正在保存的值始终是在这种情况下`0`实际应该存在的值。`3`

知道我做错了什么吗？

是不是有可能得到`relationId`这条线之后？

```
session.saveOrUpdate(client.getRelationId()); 
```

这样我就可以在`relationId`不去数据库的情况下获得该 ID 并将该 ID 保存在我的`Client`表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:00:28.350

您可以尝试在注释中指定`cascade`参数：`@ManyToOne`

```
@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL) 
```

它默认没有级联操作。

# excel - Excel 公式到 PowerPivot 公式

> ID：13511780
> 
> 赞同：0
> 
> 时间：2012-11-22T11:27:14.073
> 
> 标签：excel, powerpivot

我需要将此 Excel 工作表公式转换为 PowerPivot 公式：

```
=IF(D3=0,"NA",B3/D3) 
```

B3 = F5
D3 = F13

需要将 IF 添加到此公式中：

```
=SUM('data'[F5]) / SUM('data'[F13]) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:43:06.217

这是你要求的：

```
= IF (SUM('data'[F13]) = 0, 0, SUM('data'[F5]) / SUM('data'[F13])) 
```

# jquery - 页面上的 jquery dblclick 显示错误 BodyContent_ondblclick() 未定义

> ID：13511787
> 
> 赞同：0
> 
> 时间：2012-11-22T11:27:35.130
> 
> 标签：jquery, jquery-mobile

在用户 dblclick 抛出的 jquery 页面中

错误 jScript:'BodyContent_ondblclik' 未定义，并在此代码处停止。脚本块 [动态]

```
function ondblclick(event)
{
  return BodyContent_ondblclick()
} 
```

我的应用程序是：移动 Asp.net MVC4。

jQuery 1.8.2

jQuery 移动版 1.2.0

我该怎么做才能避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:24:16.990

定义一个名为 BodyContent_ondblclick 的函数或删除该行

# jquery - jQuery Table 仅调用 td 值文本

> ID：13511789
> 
> 赞同：0
> 
> 时间：2012-11-22T11:27:40.393
> 
> 标签：jquery, html-table

我有一张桌子（id="deneme"）。

我需要遍历 td 值，确定用户选中了哪些复选框，对于选中复选框的行，获取中间列的唯一文本（文字）的值。

也许对于第一个字母可以定义一个算法。

```
<table id="docsTable">
    <tr bgcolor="#E7DDCC" class="liste-0">
        <td align="center"><input type="checkbox"/></td>
        <td>Document Title 1</td>
        <td>567</td>
    </tr>
    <tr bgcolor="#E7DDCC">
        <td align="center"><input type="checkbox"/></td>
        <td>accure</td>
        <td>134</td>
    </tr>
    <tr bgcolor="#E7DDCC">
        <td align="center"><input type="checkbox"/></td>
        <td>Zebra</td>
        <td>231</td>
    </tr>
</table>
<input type='button' id='btnTest' value='Get Rows' /> 
```

```
$(function() {
    $('#btnTest').click(function() {
        $('#docsTable input[type="checkbox"]:checked').each(function() {
            var $row = $(this).parents('tr');
            alert($row.find('td:eq(0) input').val());
            alert($row.find('td:eq(1)').html());
            alert($row.find('td:eq(2)').html());
        });
    });
}); 
```

演示：

[http://www.jsfiddle.net/3yYFY/](http://www.jsfiddle.net/3yYFY/)

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:32:46.700

您可以使用`has`和`map`方法并将值存储在数组中。

```
$('#btnTest').click(function() {
    var arr = $('#docsTable tr').has('input[type="checkbox"]:checked').map(function() {
        return $('td:eq(1)', this).text()
    }).get();
}); 
```

[http://jsfiddle.net/twn2W/](http://jsfiddle.net/twn2W/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:31:59.113

根据我从您的问题中了解到的情况，您应该使用最接近（）而不是 find（）方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:52:06.533

```
$(':checked')​.parent().next().each(function(){alert($(this).html())}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:43:33.533

```
$("#docsTable input:checked").closest("tr").find("td:eq(1)").map(function () {
  return $(this).text();
}).toArray() 
```

# android - 布局不是底部

> ID：13511793
> 
> 赞同：0
> 
> 时间：2012-11-22T11:27:52.980
> 
> 标签：android, android-layout

我在 .xml 文件中编写了以下内容，而不是指定

```
<LinearLayout 
    android:id="@+id/layoutContacts"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="50dp"
    android:visibility="gone"
    android:orientation="vertical">

    <AutoCompleteTextView
        android:id="@+id/autoCompleteTextViewContactEntered"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Contact Number" >

    <requestFocus />
    </AutoCompleteTextView>

    <LinearLayout 
        android:id="@+id/layoutDownButtons"
        android:gravity="bottom"
        android:layout_gravity="bottom"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <Button 
            android:text="Balance"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="showBalance"/>
        <Button 
            android:text="Settings"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.1"
            android:onClick="showSettings"/>

    </LinearLayout>
</LinearLayout> 
```

我想要 android:id="@+id/layoutDownButtons" 在底部。bot 它不会出现在底部。我写了 android:gravity="bottom" android:layout_gravity="bottom" 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:36:12.107

该解决方案对您有帮助吗？

```
<LinearLayout
    android:id="@+id/layoutContacts"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="50dp"
    android:layout_weight="1"
    android:orientation="vertical"
    android:visibility="gone" >

    <AutoCompleteTextView
        android:id="@+id/autoCompleteTextViewContactEntered"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Contact Number" >

        <requestFocus />
    </AutoCompleteTextView>
</LinearLayout>

<LinearLayout
    android:id="@+id/layoutDownButtons"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:gravity="bottom"
    android:orientation="horizontal" >

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="showBalance"
        android:text="Balance" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.1"
        android:onClick="showSettings"
        android:text="Settings" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:37:22.980

代替第一个“线性布局”，您可以使用“相对布局”，然后在您的 layoutDownButtons“LinearLayout”中写入 android:layout_alignParentBottom="true"。

# z3 - 如何使用注解：no-pattern

> ID：13511796
> 
> 赞同：1
> 
> 时间：2012-11-22T11:27:53.483
> 
> 标签：z3

我写了[以下断言](http://rise4fun.com/Z3/y5e8)：

```
(assert (!
    (forall ((A Set) (B Set))
        (= 
            (= A B) 
            (and (subset A B)(subset B A)))
:no-pattern))) 
```

为什么它会给出错误“ `invalid expression, unexpected input`”？为了检查语法错误，我复制了指南[中的](http://rise4fun.com/Z3/tutorialcontent/guide#h28)[示例](http://rise4fun.com/Z3/URDu)并将其替换为. 这[也会产生错误](http://rise4fun.com/Z3/dMG5)。`:pattern (…)``:no-pattern`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T19:27:54.430

注释`:no-pattern`需要一个表达式作为参数。如果一个普遍量化的公式`F`没有用模式注释，那么 Z3 将启发式地为`F`. 注释指示 Z3 中*出现*`:no-pattern`的哪些子表达式`F`不应用作模式。这是您的示例（也可在[http://rise4fun.com/Z3/KfO5](http://rise4fun.com/Z3/KfO5)获得）：

 *```
(declare-sort Set)
(declare-fun mysubset (Set Set) Bool)

(assert 
    (forall ((A Set) (B Set))
        (! (= 
            (= A B) 
            (and (mysubset A B) (mysubset B A)))
           :no-pattern (mysubset A B))))

(check-sat) 
```

*备注*：方程（例如，`(= A B)`）从未被 Z3 选为模式。

这是另一个示例[http://rise4fun.com/Z3/njVu](http://rise4fun.com/Z3/njVu)的链接。

顺便说一句，注释`:pattern`接受两种参数：表达式；或表达式*列表*。在 Z3 指南中，我们有注释：`:pattern ((f (g x))`，其中`((f (g x))`是一个长度为 1 的列表，其中包含表达式`(f (g x))`。如果我们用 替换`:pattern`，`:no-pattern`我们会得到一个错误，因为`((f (g x))`它不是一个表达式。另一方面，`:no-pattern (f (g x)`是一个有效的`:no-pattern`注解。

最后，`:pattern`接受表达式列表，因为 Z3 支持多模式（[指南](http://rise4fun.com/Z3/tutorial/guide)）。*

# gradle - 使用 Gradle 发布工件的依赖项

> ID：13511802
> 
> 赞同：2
> 
> 时间：2012-11-22T11:28:14.030
> 
> 标签：gradle

我正在寻找一种使用 Gradle 生成具有所有依赖项和传递依赖项的 Maven 存储库的方法。

例如，我的项目可以依赖休眠。我想在磁盘上的某个地方创建一个本地存储库，其中包含休眠及其自身的依赖项。

我尝试了几种方法但没有成功：

*   uploadArtifact：似乎无法上传工件的依赖项
*   同步任务：我没有 Maven 元数据并且我失去了传递依赖项

背景：我的产品有一个引擎和一个 webapp，可以部署为 War 存档、EAR 存档或不带 webapp，其中包含或不包含某些组件。我需要为用户提供一种配置所需内容的方法以及生成它的脚本。Gradle 似乎是一个不错的候选者，但我看不到如何创建一个包含所有可能需要的依赖项的本地存储库。

有人看到解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:57:22.033

目前还没有一种简单的方法可以通过 Gradle 实现这一目标。您必须编写自己的解决方案。特别是，您必须找到一种在发布存档时重新创建原始 POM 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:14:44.713

我找到了一个可能被其他人使用的解决方案。想法：使用 maven 生成存储库并使用程序集插件将项目打包为 zip。我用以下方式伪造 Maven：

```
<repositories>
    <repository>
        <id>my-internal-site</id>
        <url>file://${user.home}/.m2/repository</url>
    </repository>
</repositories> 
```

并这样称呼它：

```
mvn install -Dmaven.repo.local=./src/lib/ 
```

pom 将包含主要依赖项和 src dir 包含在“捆绑包”中的所有其他内容

# objective-c - 如何在 Objective-C（iOS 6 应用程序）中拥有全局可用的实例？

> ID：13511804
> 
> 赞同：1
> 
> 时间：2012-11-22T11:28:13.950
> 
> 标签：objective-c, ios, object, ios6, instance

全新的 Objective-C 和 iOS 开发（来自 C 背景）。我正在使用标签栏控制器并使用多个视图编写应用程序。我想在应用程序启动时初始化一个对象，然后让该实例可用于所有视图。

目前在我的 AppDelegate.m 中，我有：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    id myObject;
    myObject = [[MYObject alloc] init];

    return YES;
} 
```

如何访问我的其他视图控制器的 myObject？

谢谢！（请原谅新手的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:02:47.237

正如其他人所建议的那样，有很多选择：

**单例模式：**

```
+ (id)sharedFoo {
    static dispatch_once_t pred;
    static FooClass *cSharedInstance = nil;

    dispatch_once(&pred, ^{ cSharedInstance = [[super alloc] init]; });
    return cSharedInstance;
} 
```

...并在整个过程中访问该对象`[Foo sharedFoo]`。一些开发人员回避单例类，因为当开发人员意识到越来越多的对象需要成为全局对象时，它可能不仅会创建一个“上帝类”，而且还会创建此类类的万神殿。这种冲动通常与对应用程序设计的思考不完整有关。单例思想的一种变体使用单例来保存对所有全局数据的引用，例如`[MyApplicationData sharedData]`……就我个人而言，我认为它比`UIApplication`为此目的使用 's 委托要干净一些。

**依赖注入：**

由于您使用的是`UITabBarController`设计，因此您可以在用户选择选项卡时使用依赖注入（通过`UITabBarControllerDelegate`诸如 的方法`tabBarController:didSelectViewController:`）传播对象，然后将其进一步传播到控制器层次结构中。

**作为所有者的应用程序委托：**

像单例类一样，这有可能创建一个具有过多职责的类。委托不仅`UIApplication`负责应用程序的生命周期，它还负责各种其他不相关的状态和行为。但是，这种模式在我看到的代码中被广泛使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:32:49.243

您可能会使用单例模式： [https ://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW32](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW32)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:30:41.300

有很多可能性。只需在任何类实现之外声明对象，就像在普通的 C 中一样。或者您可以使用单例类作为所有全局数据的存储。

# javascript - 如何从 chrome 扩展调用 DLL 中的导出函数（使用 C 编写）

> ID：13511805
> 
> 赞同：1
> 
> 时间：2012-11-22T11:28:17.007
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想从我的 chrome 扩展中调用一个使用 C 语言编写的 Dll 中的导出函数。但没有获得关于如何做到这一点的足够信息。

在 Firefox 中，我在我的扩展 js 文件中使用下面提到的代码来执行此操作，但同样不适用于 chrome。

```
var InstallPath="C:\\FRViewPortExtn.dll";

Components.utils.import("resource://gre/modules/ctypes.jsm");

var lib = ctypes.open(InstallPath); 
/* Declare the signature of the function we are going to call */
passBrowserResizeData = lib.declare("SetViewPort",
ctypes.winapi_abi,
ctypes.void_t,
ctypes.int32_t,
ctypes.float32_t,
ctypes.int32_t,
ctypes.int32_t); 
```

并使用

```
passBrowserResizeData(6,7,8,9); 
```

请帮助我了解如何使用 chrome exteniosns 来完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:38:19.277

相对于清单文件放置 FRViewPortExtn.dll 并将以下代码添加到 manifest.json

```
"plugins": [
    { "path": "FRViewPortExtn.dll", "public": true },
  ], 
```

把这段代码放到你的 JS(content js\background js\extension js)

```
var plugin = document.getElementById("pluginId");
var result = plugin.passBrowserResizeData(6,7,8,9);  // call a method in your plugin 
```

有关更多信息，请参阅[https://developer.chrome.com/extensions/npapi.html](https://developer.chrome.com/extensions/npapi.html)

# javascript - javascript 用内部 createTextNode替换 \n

> ID：13511809
> 
> 赞同：3
> 
> 时间：2012-11-22T11:28:34.277
> 
> 标签：javascript, line-breaks, createtextnode

我在 Javascript 中有一个带有`\n`- 换行符的字符串，我想用`createTextNode()`Javascript 替换另一个文本。

```
<script type="text/javascript">

function changeText() {

var Explanation="Test\n Test2";

var parent3 = document.getElementById("The_Explanation"); 
parent3.innerHTML='';  
var myP3 = document.createElement("p");
var myText3 = document.createTextNode(""+Explanation);
myP3.appendChild(myText3);
parent3.appendChild(myP3);
}
</script> 
```

到目前为止，所有试图将换行符插入新文本的尝试都失败了。所有替换`\n`的功能`<br>`只会让我得到结果

```
"Test<br> Test2" 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T11:34:07.120

您不能将元素节点放在文本节点内。文本节点不能有子节点。

1.  在新行上拆分字符串
2.  循环遍历数组并为每个部分生成一个文本节点
3.  用于`createElement('br')`在每个文本节点之间创建换行符
4.  附加以上所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:32:41.833

您可以为此使用替换：

```
 Explanation.replace( /\n/g, "<br />" )l 
```

# collision-detection - 子弹与敌人之间的碰撞检测

> ID：13511810
> 
> 赞同：0
> 
> 时间：2012-11-22T11:28:35.260
> 
> 标签：collision-detection

我一直在尝试在我正在制作的简单游戏中实现碰撞检测。我环顾四周，一切都让我回到了我为我的 dist 所做的方程式。然而，它并不完全奏效。我错过了什么吗？还是我完全错了？

```
bool collisionquery(enemy z){ 
    double dist = sqrt((px - z.getpx()) * (px - z.getpx()) +
                       (py - z.getpy()) * (py - z.getpy()) +
                       (pz - z.getpz()) * (pz - z.getpz()));

    if (dist < 0.1*getbulletsize())
    {
        cout << "hit\n";
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:20:40.287

此代码不适用于哪些场景？我想这个算法会起作用（发现两个物体之间的距离小于它们的半径），当遇到大速度的物体时可能会出现严重的错误。

您可能遇到的一个问题是您无法准确确定碰撞时间，因为您假设碰撞只能发生在动画帧的结尾而不是帧期间。动画帧假设速度在 0 -> 1 之间恒定，其中加速度已用于计算 V。

为了简单起见，我建议将两个物体都近似为半径为 R1 和 R2 的球体。

如果是这种情况，您需要考虑：

1 - 两个物体的半径。在这种情况下，敌人将是一个半径为 0 的点，子弹的半径为 getBulletSize();

2 - 动画帧期间子弹和敌人的速度在 0<=t<=1 之间。

|r1 + r2| 时会发生碰撞的情况。< d，其中 d 是两个物体质心之间的距离。

d 为 P(t) - Q(t)，Q 和 P 是两个物体的质心。P(t) = P0 + Vp*t。Q(t) = Q0 + Vq*t。

Vp = P1 - P0；Vq = Q1 - Q0；

=> d = P(t) - Q(t)

求解 (R1 + R2)^2 = (P(t) - Q(t))^2 的情况将产生碰撞时间。不要害怕这个公式！它求解一个简单的二阶多项式，其中二次公式将求解 t。如果公式中B^2 > 0，则在时间最短时发生第一次表面碰撞！

碰撞案例：

在以下情况下发生：

1) 0 <= t <= 1。

初步检查：

2) 最小 d（半径条件的导数 = 0）必须 < R1 + R2

希望这可以帮助！！！让我知道我是否误解了你或在胡言乱语:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:03:51.340

只是与 dist 的比较太小了，我没有注意到。谢谢。

# javascript - 如何用jQuery替换来自textarea的元素中的文本

> ID：13511812
> 
> 赞同：0
> 
> 时间：2012-11-22T11:28:42.420
> 
> 标签：javascript, jquery, textarea

我有一些元素和一些数据。我需要为它创建不断变化的字段。所以我使用 textarea 来更改这个元素中的文本。一切正常，但是当我想用文本 langht 添加条件时，有些东西不能正常工作......这是我的代码和一些小提琴（[http://jsfiddle.net/qzzKA/](http://jsfiddle.net/qzzKA/)）。谢谢帮助...

```
<div class="textchange_box">
    <span class="desc">data<br>data
    </span>
    <textarea name="desc" class="textfield"></textarea>
    <span class="change">change</span>
    <span class="save">save</span>
</div>​ 
```

和jQuery：

```
$(".change").live('click', function () {
    $(this).prev('.textfield').css('display','block');
    $(this).prevAll('.desc').css('display','none');
    $(this).next('.save').css('display','block');
    $(this).css('display','none');
});
$(".save").live('click', function () {
    var default_value = $(this).prev('.desc').text().replace(/\r\n|\r|\n/g,"<br/>");
    var actual_value = $(this).prev('.textfield').text().replace(/\r\n|\r|\n/g,"<br />");
    $(this).prevAll('.textfield').css('display','none');
    $(this).prev('.change').css('display','block');
    $(this).css('display','none');
    if (actual_value.length < 0) {
        $(this).prev('.desc').replaceWith('<span class="desc">' + default_value +'</span>');
    }
    else if (actual_value.length > 0) {
        $(this).prev('.desc').replaceWith('<span class="desc">' + actual_value +'</span>');
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:33:31.470

替换您的以下行：

```
if (actual_value.length < 0) { 
```

对于这个：

```
if (actual_value.length <= 0) { 
```

因为当字符串为空时，它的长度为零而不是负数。

**更新：**
您还有其他错误，以下两行：

```
var default_value = $(this).prev('.desc').text().replace(/\r\n|\r|\n/g,"<br/>");
var actual_value = $(this).prev('.textfield').text().replace(/\r\n|\r|\n/g,"<br />"); 
```

应该是这样的：

```
var default_value = $(this).prevAll('.desc').text().replace(/\r\n|\r|\n/g,"<br/>");
var actual_value = $(this).prevAll('.textfield').val().replace(/\r\n|\r|\n/g,"<br />"); 
```

因此，使用`prevAll()`代替`prev()`和使用`val()`for textarea 而不是`text()`.

您还需要在`prevAll()`这里使用：

```
$(this).prev('.desc').replaceWith('<span class="desc">' + actual_value +'</span>'); 
```

所以它会是：

```
$(this).prevAll('.desc').replaceWith('<span class="desc">' + actual_value +'</span>'); 
```

见[**工作小提琴**](http://jsfiddle.net/qzzKA/2/)。

基本上最常见的错误是你认为`.prev()`会遍历所有以前的兄弟姐妹，而为此你必须使用`prevAll()`

# r - 在 R 中检查 write.csv 的成功

> ID：13511817
> 
> 赞同：12
> 
> 时间：2012-11-22T11:28:55.043
> 
> 标签：r

在 R 中，如何在`write.csv(my.data.frame, file='test.csv')`不重新读取的情况下验证它是否成功？它似乎没有返回任何东西。我正在考虑做一个`file.exists('test.csv')`，然后在之前和之后抓取一个时间戳，`write.csv()`并检查文件上的时间戳是否在两者之间？有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T13:04:49.943

您可以使用以下功能`try()`：

```
res <- try(write.csv(1:100, "SOME GOOD PATH/temp.csv"))
is.null(res)
# [1] TRUE
res <- try(write.csv(1:100, "SOME BAD PATH/temp.csv"))
is.null(res)
# [1] FALSE
class(res)
# [1] "try-error" 
```

# hadoop - Sqoop 导出到超过 64 MB 的 RDBMS .lzo .gz 文件加载重复项

> ID：13511818
> 
> 赞同：1
> 
> 时间：2012-11-22T11:29:00.550
> 
> 标签：hadoop, export, gzip, sqoop, lzo

使用 sqoop 1.3

尝试将 hdfs 输出导出到 mysql 表

加载大小超过 300MB 的未压缩文件时，一切正常

但是在加载大小为 75 MB 或 79 MB 的压缩文件（.gz 和 .lzo）时，我看到加载到表中的行数增加了一倍。当压缩文件的大小为 60MB 或更小（猜测与 64 MB 相关的块大小）时，不会发生这种情况。我在上述情况下所做的一些操作：

```
bash-3.2$ ls -ltr
-rw-r--r-- 1 bhargavn bhargavn 354844413 Nov 16 02:27 large_file
-rw-rw-r-- 1 bhargavn bhargavn  15669507 Nov 21 03:41 small_file.lzo
-rw-rw-r-- 1 bhargavn bhargavn  75173037 Nov 21 03:46 large_file.lzo

bash-3.2$ wc -l large_file
247060 large_file

bash-3.2$ sqoop export --connect 'jdbc:mysql://db.com/test?zeroDateTimeBehavior=round&    rewriteBatchedStatements=true' 
--table table_with_large_data 
--username sqoopuser 
--password sqoop 
--export-dir /user/bhargavn/workspace/data/sqoop-test/large_file.lzo 
--fields-terminated-by '\001' -m 1
[21/11/2012:05:52:28 PST] main      INFO org.apache.hadoop.mapred.JobClient:  map 0% reduce 0%
[21/11/2012:05:57:03 PST] main      INFO com.cloudera.sqoop.mapreduce.ExportJobBase:     Transferred 143.3814 MB in 312.2832 seconds (470.1584 KB/sec)
[21/11/2012:05:57:03 PST] main      INFO com.cloudera.sqoop.mapreduce.ExportJobBase:     Exported 494120 records.

mysql> select count(1) from table_with_large_data;
+----------+
| count(1) |
+----------+
|   494120 |
+----------+

mysql> truncate table_with_large_data;
bash-3.2$ sqoop export --connect 'jdbc:mysql://db.com/test?zeroDateTimeBehavior=round&    rewriteBatchedStatements=true' 
--table table_with_large_data 
--uername sqoopuser 
--password sqoop 
--export-dir /user/bhargavn/workspace/data/sqoop-test/large_file
--fields-terminated-by '\001' 
-m 1
[21/11/2012:06:05:35 PST] main      INFO org.apache.hadoop.mapred.JobClient:  map 0%     reduce 0%
[21/11/2012:06:08:06 PST] main      INFO org.apache.hadoop.mapred.JobClient:  map 100%     reduce 0%
[21/11/2012:06:08:06 PST] main      INFO com.cloudera.sqoop.mapreduce.ExportJobBase:     Transferred 338.4573 MB in 162.5891 seconds (2.0817 MB/sec)
[21/11/2012:06:08:06 PST] main      INFO com.cloudera.sqoop.mapreduce.ExportJobBase:     Exported 247060 records.
mysql> select count(1) from table_with_large_data;
+----------+
| count(1) |
+----------+
|   247060 |
+----------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:29:07.470

您可能会遇到 Sqoop 需要在他们这边修复的已知错误 [1]。

您介意签署 Sqoop 用户邮件列表 [2] 并在那里描述您的问题吗？我非常有信心 Sqoop 开发人员会介入解决这个特定问题。

雅尔切克

链接：

1：[https ://issues.apache.org/jira/browse/SQOOP-721](https://issues.apache.org/jira/browse/SQOOP-721)

2：[http ://sqoop.apache.org/mail-lists.html](http://sqoop.apache.org/mail-lists.html)

# joomla2.5 - Jomsocial 2.4 简体中文翻译

> ID：13511822
> 
> 赞同：0
> 
> 时间：2012-11-22T11:29:07.833
> 
> 标签：joomla2.5, jomsocial

我是 joomla 的新手，我正在寻找 jomsocial 2.4 的简体中文翻译包。网上有一些简体中文语言包，但是不兼容jomsocial 2.4。我正在使用 joomla 2.5.6 版。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:29:53.500

目前一个都没有。不过，您可以在[这里](https://www.transifex.com/projects/p/jomsocial/language/zh_CN/)找到最新进展——翻译完成后，此页面也会更新。

同样在不相关的说明中，您应该将您的 Joomla 版本升级到 2.5.8，因为 2.5.8 包含一个重要的安全修复程序

# jquery - facebook 在网站上分享弹出窗口（可能是 iframe 弹出窗口）

> ID：13511824
> 
> 赞同：0
> 
> 时间：2012-11-22T11:29:13.853
> 
> 标签：jquery, facebook

在网站上有 Facebook 分享按钮的最佳方式是什么。我想分享链接并在其中添加小图片。我需要任何钥匙或类似的东西吗？我希望不会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:33:14.643

我认为进行请求对话的最佳方式

请求对话框从一个用户（发送者）向一个或多个用户（接收者）发送请求。

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:34:00.993

您可以使用 tfe 以下链接：

```
https://www.facebook.com/dialog/feed?
  app_id=458358780877780&
  link=https://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=https://mighty-lowlands-6381.herokuapp.com/ 
```

您只需自定义标题、描述、链接等以满足您的需求。

# c++ - CUDA & 复制构造器

> ID：13511829
> 
> 赞同：0
> 
> 时间：2012-11-22T11:29:22.640
> 
> 标签：c++, object, cuda, copy-constructor

我一直在努力解决 CUDA 中的一个问题。我写了一个递归内核（最新允许）。.cu 文件是包含许多对象的大型项目的一部分。内核的参数之一是 Piece 对象（ Piece.cpp ），如下所示：

```
parallelKernel (Piece* piece, vector upcomingPieces) 
```

当我需要递归调用时，我会建立下一块索引，所以我写了这样的东西：

```
Piece *nextPiece = upcomingPieces[nextPieceIndex];
parallelKernel (nextPiece, upcomingPieces); 
```

但我在编译时得到一个错误：

```
error: cannot pass an argument with a user-provided copy-constructor to a device-side kernel launch 
```

现在，我一直在尝试编写一个复制构造函数，但我似乎无法做到正确。谁能提供更多有关此的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:49:57.690

CUDA 不能真正支持某些 C++ 构造，主要是围绕全局/共享内存的构造函数（以及复制构造函数）。问题是——谁来执行构造函数？所有线程？只有一根线？每一条线都是为了自己？

例如，这些是无效的：

```
__shared__ int x = 0;
__shared__ MyClassWithNontrivialConstructor obj; 
```

我猜你遇到了类似的问题。

是否有可能`upcomingPieces`位于共享或全局内存中的某个地方？如果是这种情况 - 考虑通过 const-reference 或指针传递参数。

# rspec - capybara-webkit 不再运行测试

> ID：13511832
> 
> 赞同：1
> 
> 时间：2012-11-22T11:29:30.283
> 
> 标签：rspec, capybara, capybara-webkit

我刚刚更新了 Capybara (0.13.0) 和 Rspec (2.12.0)，现在我的 capybara-webkit 测试只工作了大约 1/5 的时间。

“不工作”是指测试的内容根本没有运行。它只是冻结在那个测试上。它似乎没有做任何事情（Ruby 进程只使用 0.1% cpu）。

此外，我的一些`js: true`测试似乎 100% 有效。

当我在 Firefox 中运行测试时，一切正常。

其他人有这个问题吗？关于如何调试它的任何想法？

# twitter-bootstrap - 使用 Twitter Bootstrap 解除警报不起作用？

> ID：13511833
> 
> 赞同：15
> 
> 时间：2012-11-22T11:29:40.097
> 
> 标签：twitter-bootstrap, alert, dismiss

我正在使用谷歌浏览器。
使用[Twitter Bootstrap](http://twitter.github.com/bootstrap)，我想添加一个简单的警报，不幸的是，按下 x 时[警报不会消失！](http://twitter.github.com/bootstrap/components.html#alerts)

这是我基于[警报](http://twitter.github.com/bootstrap/components.html#alerts)文档的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  </head>
  <body>    
    <div class="alert">
        <button type="button" class="close" data-dismiss="alert">×</button>
        <strong>Warning!</strong> Best check yo self, you're not looking too good.
    </div>      
  </body>
</html> 
```

我也试过：

```
<!DOCTYPE html>
  <html>
    <head>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
      <!-- Bootstrap -->
      <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    </head>
    <body>    
    <div class="alert">
        <a href="#" class="close" data-dismiss="alert">×</a>
        <strong>Warning!</strong> Best check yo self, you're not looking too good.
    </div>      
    </body>
  </html> 
```

缺少什么让它解雇？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-22T11:57:16.783

感谢[davidkonrad](https://stackoverflow.com/users/1407478/davidkonrad)的评论。
解决方案很简单，通过添加：

```
 <script src="js/bootstrap.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T11:27:36.980

我编写了一个[小型的、可定制的 jquery 插件](https://github.com/davesag/jquery-bs3Alert)，它可以以最少的麻烦注入一个正确形成的 Bootstrap 3 警报（根据需要可以有或没有关闭按钮），并允许您在关闭框后轻松地重新生成它。

有关用法、测试和示例，请参阅[https://github.com/davesag/jquery-bs3Alert 。](https://github.com/davesag/jquery-bs3Alert)

# java - 休眠多对多映射

> ID：13511836
> 
> 赞同：0
> 
> 时间：2012-11-22T11:29:52.450
> 
> 标签：java, hibernate

我有这样的`ManyToMany`映射：

```
@XmlTransient
    @ManyToMany(cascade = {CascadeType.ALL})
    @JoinTable(name = "users_clients",
            joinColumns = {@JoinColumn(name = "user_id")},
            inverseJoinColumns = @JoinColumn(name = "client_id"))
    public List<Client> getClients() {
        return clients;
    } 
```

另一边：

```
@ManyToMany(mappedBy = "clients")
    private List<User> users = new ArrayList<User>(); 
```

所以你可以看到我有`JoinColumn name = user_id`，`client_id`但是休眠将这些列映射为名称 userS_id 和 clientS_id 作为它们的表名。为什么会这样？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:35:49.203

`@JoinColumn`尝试在注释中指定列名。此外，您在 inverseJoinColumns 周围缺少大括号

```
 @JoinTable(name = "users_clients",
      joinColumns = {
        @JoinColumn(name = "user_id", referencedColumnName="user_id")},
          inverseJoinColumns = {
        @JoinColumn(name = "client_id", referencedColumnName="client_id")}) 
```

# c++ - 如何在 sax 解析中获取 xml 标签中的文本

> ID：13511838
> 
> 赞同：3
> 
> 时间：2012-11-22T11:30:08.363
> 
> 标签：c++, sax, xerces

我在我的 c++ 程序中使用 xerces 3。我想有人指导我，如何在 sax 解析中提取开始和结束标记之间的文本。例如，假设我们有：

```
<?xml version="1.0"?>
<catalog>
   <book id="123">
      <author>Introduction to algorithm </author>
    </book>
</catalog> 
```

如何访问此文本：“算法简介”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:35:22.610

您应该能够使用：

```
void HandlerBase::characters    (   const XMLCh *const      chars,
    const XMLSize_t     length   
) 
```

请注意，这可能会被多次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:50:23.603

如果我没记错的话，您编写自己的处理程序，继承自`HandlerBase`. `startElement()`将被调用，`<author>`然后`endElement()`将被调用`</author>`。中间的所有文本都将传递给`characters()`，所以你需要知道你什么时候在里面`<author></author>`，并利用它来将字符保存到你的`characters()`函数内有用的地方：http: [//xerces.apache.org/xerces-c/ apiDocs-3/classHandlerBase.html](http://xerces.apache.org/xerces-c/apiDocs-3/classHandlerBase.html)

当我这样做时（前一段时间），我只是作弊并将所有内容都作为属性，传递给`startElement()`并节省了很多麻烦。

编辑：我做了我自己的例子并且遇到了同样的问题（你在问题中没有很好地描述，如果你提供你的代码会更容易解决，顺便说一句）。查看[文档](http://xerces.apache.org/xerces-c/apiDocs-3/classHandlerBase.html)（请注意，我没有仔细检查哪个版本，但仍然如此）：

```
virtual void characters (const XMLCh *const chars, const XMLSize_t length) 
```

然后检查实际的头文件。

```
virtual void characters
(
    const   XMLCh* const    chars
    , const unsigned int    length
); 
```

指出不同？使您自己的版本的签名与头文件匹配，它将起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-23T21:54:26.580

在您的方法中使用 override 关键字。这可能对您有所帮助

# c - 在 c 编程中使用 oop

> ID：13511847
> 
> 赞同：0
> 
> 时间：2012-11-22T11:31:12.763
> 
> 标签：c, oop

```
gcc (GCC) 4.7.2
c89 
```

我正在练习在 C 中使用一些面向对象的风格。因为我想为我们的一些大型项目这样做。

但是，在下面的代码中，我有一个父结构 car 和一个子 sports_cars。但是，所有通用属性或汽车结构都将出现在子结构中。

我有一个问题，那就是 init 和 destory 函数。因为它们很常见，所以我希望我的子结构能够继承 init 和 destroy。但我认为我做错了。

```
car->init = init_car; 
```

因为我有指向 init_car 的 init 函数指针，所以对我来说看起来不正确。

非常感谢您的任何建议，

```
#include <stdio.h>
#include <stdlib.h>

typedef struct tag_car car_t;
struct tag_car {
    size_t wheels;
    char *name;

    void (*init)(void *self);
    void (*destroy)(void *self);
    size_t (*wheels_get)(void *self);
    void (*wheels_set)(void *self, size_t num_wheels);
};

typedef struct tag_sports sports_t;
struct tag_sports {
    car_t base_car;

    size_t top_speed;
    size_t (*top_speed_get)(void *self);
    void (*top_speed_set)(void *self, size_t max_top_speed);
};

void destroy_car(void *self)
{
    car_t *car = self;

    free(car);
}

void init_car(void *self)
{
    car_t *car = car;

    car->wheels = 4;
    car->name = NULL;

    car->init = init_car;
    car->destroy = destroy_car;

}

size_t wheels_count_get(void *self)
{
    car_t *car = self;

    return car->wheels;
}

void wheels_count_set(void *self, size_t num_wheels)
{
    car_t *car = self;

    car->wheels = num_wheels;
}

size_t sports_top_speed_get(void *self)
{
    sports_t *sports_car = self;

    return sports_car->top_speed;
}

void sports_top_speed_set(void *self, size_t max_top_speed)
{
    sports_t *sports_car = self;

    sports_car->top_speed = max_top_speed;
}

sports_t* init_sports()
{
    sports_t *sports_car = malloc(sizeof(sports_t));

    /* Parent struct */
    sports_car->base_car.init = init_car; 
    sports_car->base_car.destroy = destroy_car;
    sports_car->base_car.wheels_get = wheels_count_get;
    sports_car->base_car.wheels_set = wheels_count_set;

    /* Child struct */
    sports_car->top_speed_set = sports_top_speed_set;
    sports_car->top_speed_get = sports_top_speed_get;

    return sports_car;
}

int main(void)
{
    sports_t *farreri = init_sports();
    sports_t *lamborghini = init_sports();

    farreri->base_car.wheels_set(farreri, 10);
    farreri->top_speed_set(farreri, 240);

    printf("farreri has wheel count [ %ld ]\n", farreri->base_car.wheels_get(farreri));
    printf("Farreri has a top speed [ %ld ]\n", farreri->top_speed_get(farreri));

    lamborghini->base_car.wheels_set(lamborghini, 6);
    lamborghini->top_speed_set(lamborghini, 220);

    printf("lamborghini has wheel count [ %ld ]\n", lamborghini->base_car.wheels_get(lamborghini));
    printf("Lamborghini has a top speed [ %ld ]\n", lamborghini->top_speed_get(lamborghini));

    farreri->base_car.destroy(farreri);
    lamborghini->base_car.destroy(lamborghini);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:51:16.923

在你`init_car`的台词

```
car->init = init_car;
car->destroy = destroy_car; 
```

不应该出现。您将构造行为与初始化混合在一起。在 C++ 中，构造函数负责两者；如果您想模拟相同的行为，您应该公开分配接口（例如，调用它`construct`），它将分配内存（您`malloc`并将对象“方法”设置为适当的函数）和初始化接口（它将执行 init 的东西: `car->wheels = 4; car->name = NULL;`)。分配方法可以调用初始化方法来实现C++行为。你会有这样的东西：

```
void init_car(void *self)
{
    car_t *car = self;

    car->wheels = 4;
    car->name = NULL;
}

sports_t* construct()
{
    sports_t *sports_car = malloc(sizeof(sports_t));

    /* Set the methods */
    sports_car->base_car.init = init_car; 
    sports_car->base_car.destroy = destroy_car;
    sports_car->base_car.wheels_get = wheels_count_get;
    sports_car->base_car.wheels_set = wheels_count_set;

    /* initialize the object */
    sports_car->base_car.init();

    return sports_car;
 }

int main(void)
{
    /* construct and init the objects */
    sports_t *ferrari = construct();
    sports_t *lamborghini = construct();

    /* do your manipulations */

    /* destroy the objects */
    ferrari->base_car.destroy(farreri);
    lamborghini->base_car.destroy(lamborghini);

    return 0;
} 
```

如果您不希望构造初始化对象，请不要从 调用初始化`construct`，在构造后通过调用调用它`sports_car->base_car.init`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:03:03.727

You could use pointer to structure wich contains pointers to functions - just like [hidden] vtable in C++. Also, `car_t *car = car;` is incorrect, i suppose you've meant 'self'

# haskell - Gtk2hs：自动选择鼠标焦点上的所有文本

> ID：13511848
> 
> 赞同：2
> 
> 时间：2012-11-22T11:31:17.383
> 
> 标签：haskell, gtk

我需要输入控件在收到焦点时自动选择所有文本。如果您运行代码并按 Tab 在两个控件之间切换焦点，则会自动选择控件中的所有文本。使用鼠标选择另一个控件时，我需要相同的行为。我的问题是：用鼠标单击条目控件时会发出什么 GTK 事件？

```
import Graphics.UI.Gtk

main :: IO ()
main = do
  initGUI

  vbox   <- vBoxNew False 4
  window <- windowNew
  set window [ containerBorderWidth := 8,
               containerChild := vbox ]

  mkEntry "Entry 1" vbox
  mkEntry "Entry 2" vbox

  onDestroy window mainQuit
  widgetShowAll window
  mainGUI

mkEntry :: String -> VBox -> IO Entry
mkEntry txt vbox = do
  entry <- entryNew
  entrySetText entry txt
  boxPackStart vbox entry PackNatural 0
  -- selects all text when tabbing into the control
  entry `on` entryActivate $ do editableSelectRegion entry 0 (-1)
  return entry 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-07T12:45:50.087

主要问题是单击本身导致条目选择被 GTK+ 本身更改。我得到了这个工作

1.  用作`focusInEvent`触发器
2.  一旦一切都充分“平静下来”，就在空闲回调中更改选择

放在一起：

```
-- selects all text when tabbing into the control
on entry focusInEvent $ do
    liftIO $ flip idleAdd priorityDefaultIdle $ do
        editableSelectRegion entry 0 (-1)
        return False
    return True 
```

# msbuild - f# 类型提供程序：从 powerpack 构建失败？

> ID：13511852
> 
> 赞同：0
> 
> 时间：2012-11-22T11:31:27.257
> 
> 标签：msbuild, f#, type-providers

如果查看 http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/70537#1231021 中的 (\compiler\3.0\Sep2012\src\fsharp\FSharp.Data.Typeproviders) [FSharp.Data.TypeProviders.fsproj](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/70537#1231021)说起来好像有点不靠谱……

```
<Import Project="$(FSharpSourcesRoot)\fs2Sharp.Data.TypeProviders\FSharp.Data.TypeProviders.Shared.fsproj"  
          Condition="'$(TargetFramework)' 25' AND 
                    '$(TargetFramework)' 23-wp' " />
  <ItemGroup>                             2
    <!--This is used for compiling the run2ype provider DLL for WP7, Silverlight etc. -->
    <!--This is the only file used. --> 
```

尤其是与`<ItemGroup> 2`... 此外，我猜想“run2ype 提供者”部分也表示一些错误。

尝试手动修复此问题似乎并不容易，因为我确实相信此文件中存在更多错误。

我已经根据说明构建了所有其他东西（编译器等），但是构建这些其他库并不是很容易。

有没有人能够设法构建包括类型提供程序在内的所有内容？如果是：如何？有没有人有任何指示？

# .net - 命名可执行文件 (EXE) 的最佳实践

> ID：13511855
> 
> 赞同：3
> 
> 时间：2012-11-22T11:31:34.780
> 
> 标签：.net, executable

我们的 .net 可执行项目名为“ `<CompanyName>.<ProductName>.Client`”，我们已经为项目“ `<ProductName>.exe`”设置了程序集名称 - 似乎合法，对吧？

一位同事问我：为什么我们不能简单地称它为“ `<CompanyName>.<ProductName>.Client.exe`”？，我无法用任何文章或最佳实践指南来支持任何答案。

命名可执行文件的最佳实践是什么，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:34:03.130

`c:\program files\company name\product name\executable_name.exe`

**@Oded 更新：** 如您所见，可执行文件的通常放置路径包含公司名称和产品名称，因此无需重复。

对于内部产品/工具，我个人使用全名。

不要在可执行文件名称中使用空格，它会让你在命令行中使用引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:34:30.963

没有“最佳实践”。你做有意义的事。

在命名方面`exe`，保持名称简短和描述性是有意义的，因此当用户看到它（在目录或进程列表中）时，它很简单，不会被他们不关心的额外内容所阻碍。在这些方面，它也使一些支持工作更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:43:23.760

在其根命名空间之后命名 DLL 是一种常见且合理的约定（但不是通用的：例如 WPF 程序集`WindowsBase.dll`，不是以命名空间命名的，可能是因为它实际上没有定义良好的根命名空间）。

但这对于可执行文件不是必需的。

`ProductName.exe`对可执行文件（而不是）使用不同约定的一个微小优势是`CompanyName.ProductName.Client.exe`可执行文件更容易在 Windows 资源管理器中找到 - 无需搜索具有相似名称的文件列表即可找到隐藏在中间的可执行文件：

```
CompanyName.ProductName.Component1.dll
CompanyName.ProductName.Component1.xml
CompanyName.ProductName.Component2.dll
CompanyName.ProductName.Component2.xml
CompanyName.ProductName.Component3.dll
CompanyName.ProductName.Component3.xml
... 
```

# reporting-services - SSRS：如何减少图表上显示的数据标签数量？

> ID：13511856
> 
> 赞同：1
> 
> 时间：2012-11-22T11:31:34.117
> 
> 标签：reporting-services, graph, sql-server-2008-r2, reportbuilder3.0

如果我运行在 SSRS / SQL Server 2008 R2 上运行的报告，该报告显示了一年多的数据，并打开了数据标签，它看起来像这样，这很好：

![超过 1 年的数据标签](../Images/1cb34f6d9d218e4e81fb1cfa2579f0cf.png)

但是当我将报告的时间段更改为运行 5 年以上时，它看起来像这样，这是一团糟：

![超过 5 年的数据标签](../Images/f01deca75ea0d0c5c02f73d99777e462.png)

有人可以告诉我是否有设置或更改数据标签显示的最大数量。可以看到SSRS已经自动过滤掉了很多X轴上的日期，这样看起来还可以；我希望数据标签也能发生同样的情况。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-31T06:41:41.880

计算适合您报告的行数。这将用于限制完整显示的数据标签。例如：`(countrows("Dataset1")>20)` 20 是适合所有数据标签的最佳记录数。然后为高密度标签中可以显示多少标签设置另一个标准。

例如：`RowNumber("Dataset1") mod 3 = 0`

```
=iif((countrows("Dataset1")>20),iif((RowNumber("Dataset1") mod 3 = 0),Fields!PercentageOff.Value ,Nothing), Fields!PercentageOff.Value ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-06T18:40:16.570

如果您使用的是 ssrs 2008 或更高版本，则可以选择使用 IIF 或任何其他逻辑运算符来验证标签可见属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-03T02:41:38.150

我只是想分享一个替代方案，因为我自己也遇到了这个问题。对于我的图表，我有一个“预算名称”系列组，其中有 2 个预算和 1 个“实际”。我想只显示 Actual 的值，所以我对系列标签数据使用了以下表达式： `=iif(Fields!Budget_Name.Value="ACTUAL",SUM(Fields!Amt.Value),Nothing)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T10:48:31.893

没有限制标签数量的选项。

我可以建议的唯一解决方法是删除标签并添加带有值的工具提示。它要求用户滚动每个点，但会生成可用的报告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-07T08:58:59.557

我想更改它以显示每个其他数据点的数据标签，并使用以下代码：

突出显示数据点并在属性框中“可见”输入

```
=IIF(RowNumber(Nothing) Mod 2 = 0, True, False) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-23T10:53:53.597

我想更改它以显示每个其他数据点的数据标签，并使用以下代码：

突出显示数据点并在属性框中`Visible`输入

`=IIF(RowNumber(Nothing) Mod 2 = 0, True, False)`

这对我来说非常有效。

# iphone - 多视图委托

> ID：13511867
> 
> 赞同：0
> 
> 时间：2012-11-22T11:32:27.763
> 
> 标签：iphone, ios, uiviewcontroller

我目前有一个包含多个视图处理数据的项目，我只需要澄清一下处理数据的最佳实践。

例如：`MainView`显示通过 modal 添加的信息表`AddInfoView`。
数据被传递给`MainView`使用良好的委托。然而，在`AddInfoView`其中有一个`tableView`单元格允许用户从一个选项列表中进行选择，该列表由 push segue 呈现到另一个视图，让我们称之为`OptionsView`。

正如我所看到的，我有两个最有效的选择。

选项 A：数据从堆栈向下传递 - 对象从其中传递`OptionsView`，`AddInfoView`然后将其传递`MainView`以显示。链中的每个视图都是代表。

或者

选项 B：`MainView`是两者的代表，`AddInfoView`并且`OptionsView`数据直接传递给要显示的视图。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:40:50.747

如果仅`OptionsView`显示 ，我会选择选项 A。`AddInfosView`因为它更有意义，您向下推到`OptionView`，所以它也应该通过 AddInfosView 向上推。

我同意，如果`AddInfosView`不需要`OptionView`返回任何数据，那么通过 thourhg 将是非常无用的`AddinfosView`，但为了保持一致，我仍然会通过，因为我们这样做是为了显示`OptionsView`.

# regex - 拆分字符串但保留分隔符

> ID：13511869
> 
> 赞同：0
> 
> 时间：2012-11-22T11:32:39.317
> 
> 标签：regex, arrays, vb.net, string, split

我有这个字符串：

> S40102S40078S40079S40080S40053S40052S40051S40050

但我的代码

```
Dim MyArray() As String = MyString.Split("S") 
```

删除了 S 但我想保留它，我试过 RegEx 但我无法让它工作，非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:41:34.973

您可以在“S”之前使用正向预测并在零长度匹配上拆分：`(?=S)`

我希望这适用于VB。

感谢@Oded 的评论。为避免在第一个 S 上拆分，您可以执行以下操作：`(?=[^\a]S)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:50:24.813

尝试在数字之间添加分隔符，`S`然后在该分隔符上拆分。例如

```
Dim MyArray() As String = Regex.Replace(MyString, "(\d)S", "$1-S").Split("-") 
```

注意：VB.NET 不是我的第一语言，所以请检查语法是否正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:33:34.093

我认为正则表达式可以解决这个问题。像这样的东西：

```
Dim input As String = "S40102S40078S40079S40080S40053S40052S40051S40050"
Dim regex As Regex = New Regex("([^S])*[S]")
Dim ms As MatchCollection = regex.Matches(input)
Dim MyArray() As String
Dim ctr As Integer = 0

'loop through them all
foreach(m As Match In ms)
{
    'assign to array
    MyArray(ctr) = m.Value

    'increase counter
    ctr += 1
} 
```

这是未经测试的，是 C# 的一个端口，因此语法可能有点偏离，但非常接近。

# neo4j - Neo4j vs OrientDB 对象映射选项 vs Tinkerpop Frames

> ID：13511871
> 
> 赞同：3
> 
> 时间：2012-11-22T11:32:43.370
> 
> 标签：neo4j, graph-databases, orientdb

我们正在开始一家新的社交创业公司，从我目前学到的知识来看，图形数据库是要走的路，我目前正在尝试找出使用哪一个。我开始比较 OrientDB 和 Neo4j，我们用 Java 编写，对象图映射对我们很重要。

我从 Tinkerpop Frames 开始（以便将来轻松迁移），但似乎只有一种方式映射（也许我遗漏了一些东西）从图形到对象，而且映射仅与接口（它更像是定义一个带有接口的架构，而不是将您的应用程序对象映射到图形 - 再次，也许我错过了一些东西：/）。

因为我不能使用 Tinkerpop，所以我需要选择一个特定的数据库（迁移会更困难：/），我看到 OrientDB 使用反射，neo4j 有使用注释的 jo4neo，我目前倾向于 jo4neo，因为它更熟悉并且没有反射似乎更快（我还没有测试过）

我很想听听有关这方面的任何意见，也许我错过了 Frames 的某些内容，真的任何意见都会有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:59:02.523

如果你想使用 jo4neo，那个项目已经过时了。对于注释驱动的 OGM，我会选择[http://www.springsource.org/spring-data/neo4j 。](http://www.springsource.org/spring-data/neo4j)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:31:15.143

[datanucleus](http://www.datanucleus.org/) JDO 实现同时支持 Neo4j 和 OrientDB

# android - 如何加载图像 url 以适合我在 android 中的 webview？

> ID：13511875
> 
> 赞同：3
> 
> 时间：2012-11-22T11:32:50.423
> 
> 标签：android, android-webview, android-websettings

我正在开发一个 android 应用程序。这里我在 webview 中显示一个 url 图像。但是该图像不适合我的网络视图。有人建议使用视口概念。但我无法完美地使用它。我以绘图形式附上了我的问题并附有解释。我用了

```
mWebView.getSettings().setUseWideViewPort (true); 
```

但没有得到好的结果。我需要在包括 7 英寸、10 英寸平板电脑在内的所有分辨率设备中显示拟合图像。因此，请查看随附的图片，并建议我将 url 图片放入我的 webview 位置的正确方法。我想显示与第三张图中相同的图像。

这是我加载图像的代码：

```
webView = (WebView) findViewById(R.id.webimage);
        WebSettings webSettings = imageView.getSettings(); 
        webSettings.setLoadsImagesAutomatically(true);
        webSettings.setSupportZoom(true) ;
        webSettings.setBuiltInZoomControls(true);
        webView.setBackgroundColor(Color.TRANSPARENT);
        webView.getSettings().setUseWideViewPort (true);
        webView.getSettings().setLoadWithOverviewMode(true);
        webView.setWebViewClient(new WebViewClient()
        {
        //some dialog implementation
        }
        webView.loadUrl(myurl); 
```

![在此处输入图像描述](../Images/8a31f4d7d45f753b1477c0c5c27c8403.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:56:10.347

您可以将**img的****宽度**属性设置为并且不设置高度属性**`100%`**

 **```
<body >
<img id="resizeImage" src="you_image.png" width="100%" alt="" />
</body> 
```

**编辑：** 其实我也有同样的问题。但是我仍然在等待正确的答案。

[你可以在这里](https://stackoverflow.com/questions/13507281/how-to-show-certain-part-of-webpage-inside-webview-with-fit-screen-to-all-device)参考我的问题

虽然我已经通过`managing height and Width`设备的技巧解决了这个问题。并使用`wv.setInitialScale(185);`默认情况下缩放将在左上角。

我把我的代码放在下面。

```
WindowManager mWinMgr;
    public static int displayWidth = 0, displayHeight = 0;

    @Override
    protected void onCreate(Bundle icicle) {
        // TODO Auto-generated method stub
        super.onCreate(icicle);
        // this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        // this.setProgressBarVisibility(true);
        mWinMgr = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
        displayWidth = mWinMgr.getDefaultDisplay().getWidth();
        displayHeight = mWinMgr.getDefaultDisplay().getHeight();

        setContentView(R.layout.view_my_poops);

        try {
            Map_Type = getIntent().getExtras().getString("MAP_TYPE");
        } catch (Exception e) {

        }
        Log.i(TAG, "MAP TYPE" + Map_Type);

    }

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        WebView wv;

        wv = (WebView) findViewById(R.id.webview_MyPoops);
        wv.getSettings().setJavaScriptEnabled(true);
        // this.setProgressBarVisibility(true);
        if (displayWidth >= 552 && displayHeight >= 976 || displayWidth >= 976
                && displayHeight >= 552) {
            wv.setInitialScale(185);
        } else {
            // wv.setInitialScale(150);
        }
        // wv.setInitialScale(30);

        URL = "YOUR_URL";

        Log.i(TAG, "Loading URL" + URL);

        final Activity activity = ViewMyPoop.this;

        wv.setWebChromeClient(new WebChromeClient() {

            public void onProgressChanged(WebView view, int progress) {
                // TODO Auto-generated method stub
                // Log.i(TAG, "Inside OnProgress Changed" + URL);
                activity.setTitle("Loading...");
                activity.setProgress(progress * 100);
                if (progress == 100)
                    activity.setTitle("My title");
            }
        });

        wv.loadUrl(URL);
        wv.setWebViewClient(new WebViewClient());
} 
```

希望它会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T04:30:01.850

您是否针对上述问题尝试以下代码：-

```
Display display = getWindowManager().getDefaultDisplay();
int width=display.getWidth();

String data="<html><head><title>Example</title><meta name=\"viewport\"\"content=\"width="+width+", initial-scale=0.65 \" /></head>";
data=data+"<body><center><img width=\""+width+"\" src=\""+url+"\" /></center></body></html>";
webView.loadData(data, "text/html", null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:52:11.150

你可以试试这个：

```
webView.setInitialScale(30);
WebSettings webSettings = webView.getSettings();
webSettings.setUseWideViewPort(true); 
```

参考：[链接](https://stackoverflow.com/questions/3923610/fit-image-in-webview)**

# android - 在 Android 中将联系人号码更新为 STARRED

> ID：13511877
> 
> 赞同：0
> 
> 时间：2012-11-22T11:32:54.170
> 
> 标签：android, android-contacts

我正在尝试将特定的联系电话标记为收藏（已加星标）。为此，我使用以下查询：

```
 String selectPhone = Phone._ID + "=?";
    String[] phoneArgs = new String[]{ NUMBER_ID }; 
    ContentValues values = new ContentValues();
    values.put(Phone.STARRED, 0);

    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>(); 
    ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI)
            .withSelection(selectPhone, phoneArgs)
            .withValue(Phone.STARRED, 1)
            .build()); 
    try {
        getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
    } catch (RemoteException e) {
        e.printStackTrace();
    } catch (OperationApplicationException e) {
        e.printStackTrace();
    } 
```

上面的代码没有抛出任何异常，但也没有更新数据库。如果您有解决方案，请告诉我。提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:24:43.943

这样做可以将特定联系人标记为已加星标。

```
ContentValues values = new ContentValues();
        String[] fv = new String[] { "Juned" };
        values.put(Contacts.STARRED, 1);
        getContentResolver().update(Contacts.CONTENT_URI, values,
                Contacts.DISPLAY_NAME + "= ?", fv); 
```

只需将此行中的第二个参数 1 更改为 0`values.put(Contacts.STARRED, 1);`即可取消加星标的联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-12T16:50:52.830

“加星标”属性属于联系人实体。至少，这是我从 ContactsContract.class 定义中得到的。我使用如下代码：

```
ops.add(ContentProviderOperation.newUpdate(ContactsContract.RawContacts.CONTENT_URI)
                    .withSelection(ContactsContract.Data._ID + " = ?",
                            new String[]{contactRawId})
                    .withValue(ContactsContract.Contacts.STARRED, isFavorite ? 1 : 0)
                    .build()); 
```

其中参数为 (int)contactRawId, (boolean)isFavorite

# joomla - 当他点击电子邮件中的激活链接时如何登录用户并发送到购物车

> ID：13511880
> 
> 赞同：0
> 
> 时间：2012-11-22T11:33:04.280
> 
> 标签：joomla, virtuemart

未注册用户可以将商品添加到购物车，但需要在下订单前注册。当用户点击激活链接时，他会看到类似“您的帐户已激活”的消息。登录以继续购物'。

我想激活并登录用户，并将他重定向到购物车。（很多用户只是忽略了这条消息，然后抱怨他们不能下订单......）

我的想法是在电子邮件激活 url 中插入一个变量（以在订购期间区分常规注册和注册），并在激活中 - 如果设置了变量，请登录并重定向。

确实设法将变量放入注册表（在 checkout_register_form.php 中）。com_user/controler.php 中有 activate 和 _sendMail 函数，它们应该完成其余的工作（在 _sendMail() 中找到 url 和消息，在 activate() 中找到登录和重定向的适当位置），但该脚本中的更改不会做任何事情:(

任何其他方式或建议为什么这不起作用？还是我在处理错误的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:36:16.933

根据您的要求，您可以通过两种方式完成此任务。

1) 注册和自动登录

*) 当用户进入注册表单结帐页面时，在表单中保留一个隐藏变量。

*) 然后在 com_users/controller/registration.php 中注册后包含注册成功部分重定向区域，仅从签出更改此部分。并强制该用户登录。

```
 $app    = JFactory::getApplication();
                    $options = array();
            $credentials['username'] = $_POST['email'];
            $credentials['password'] = $_POST['password'];
            $error = $app->login($credentials, $options);
            $mainframe = &JFactory::getApplication();
            $mainframe->redirect(JURI::root().'index.php?option=com_virtuemart&view=checkout1',false); 
```

这将在用户毫无疑问或困惑的同时进行注册和登录。也很安全。（大多数购物车都是这样工作的）。

2）通过电子邮件注册后。

您应该通过电子邮件链接传递一个密钥并检查该密钥并在激活后检查该密钥。然后推送该用户会话启用（这根本不是您要求的正确方法。）安全问题，您应该正确访问登录部分的过期网址。

我更喜欢第一种方法最安全和 joomla 标准。只需在用户管理器中激活用户在注册时启用并使用此方法。

希望这会有所帮助..

# awk - 我需要从斯洛伐克语文本文件中删除单词

> ID：13511884
> 
> 赞同：1
> 
> 时间：2012-11-22T11:33:10.070
> 
> 标签：awk, words

我有斯洛伐克语的文本文件：

```
SLOVESÁ
Sloveso, infinitív, obojvidové, afirmácia: abandonovať /VIj+
Sloveso, infinitív, obojvidové, negácia: abandonovať, neabandonovať /VIj-
Sloveso, prézent, obojvidové, singulár, 1\. osoba, všeobecný rod, afirmácia: abandonovať, abandonujem /VKjsah+
Sloveso, prézent, obojvidové, singulár, 2\. osoba, všeobecný rod, afirmácia: abandonovať, abandonuješ /VKjsbh+
Sloveso, prézent, obojvidové, singulár, 3\. osoba, mužský rod, afirmácia: abandonovať, abandonuje /VKjscm+ 
```

我需要删除每一行中的所有单词，直到“：”，然后是“/”之后的所有单词（包括“：”、“/”和所有第一行）。有人可以帮助我吗？什么最适合我使用？AWK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:43:09.090

如果你有 GNU grep 你可以这样做：

```
$ grep -oP "(?<=: ).*(?= /)" inputfile
abandonovať
abandonovať, neabandonovať
abandonovať, abandonujem
abandonovať, abandonuješ
abandonovať, abandonuje 
```

# algorithm - 查找可被给定数字整除的数组元素的最大总和

> ID：13511885
> 
> 赞同：11
> 
> 时间：2012-11-22T11:33:11.493
> 
> 标签：algorithm, dynamic-programming

它来自一个编程问题。

问题如下：

将给出一个数字数组以及我们必须与之相除的数字 k。我们必须从该数组中选择元素，使得这些元素的总和可以被 k 整除。这些元素的总和应尽可能大。

输入：

在第一行 n，表示元素的数量。

在下一行给出了 n 个数字。

在下一行 k 给出了我们必须划分的。

输出：

通过从该数组中选择元素来尽可能大的总和 st 总和可被 k 整除。

样本输入：

```
5 
1 6 2 9 5
8 
```

样本输出：

```
16 
```

请注意，16 可以通过不止一种数字组合获得，但我们在这里只关心最大和。

**我提出的解决方案：**

我遍历数组并在数组 b 中为给定的输入数组维护累积和，例如：

```
b=[1 7 9 18 23] 
```

并将数组 b 中的数字乘以 k 并将其存储到

```
c=[1 7 1 2 7] 
```

现在 c 中具有相同值的数字，即索引 0 和索引 2；索引 1 和索引 4。现在我得到了所有解决方案，答案是

```
max(b[2]-b[0],b[4]-b[1]) 
```

并且在一种情况下，三个索引在 c 中具有相同的值，即如果

```
c=[1 2 3 1 1 2] 
```

答案是

```
max(b[4]-b[0],b[5]-b[1]) 
```

基本上用最右边的数字减去最左边的数字。

**我的解决方案仅适用于存在连续元素 st 元素之和可被 k 整除的情况。期待正确解决方案的描述**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T11:53:29.137

我相信您的解决方案不正确，因为您只考虑连续数字。例如，如果输入是

```
4
1 6 2 9
8 
```

答案仍然是 16 (=1+6+9)。我不确定您的解决方案是否可以给出这个答案。

* * *

要有效解决此问题，请尝试动态规划。我会省略细节，但指出要点。

假设数字在一个数组`a[i]`中，`i`从`1`到`n`。

让表示通过从(ie )`f(i,j)`中选择数字可以获得的最大总和，并且总和模为。`a[1]``a[i]``a[1], a[2], ..., a[i]``k``j`

考虑`f(i,j)`，显然我们有两种选择：（1）包含`a[i]`在总和中；(2) 不包括`a[i]`。因此`f(i,j) = max{ f(i-1,x) + a[i], f(i-1,j) }`在哪里`x + a[i] == j (mod k)`。边界是`f(0,j) = 0`所有人的`j`

* * *

为实现该算法，基本骨架如下。

```
for (j = 0; j < k; j++) f[0][j] = 0;
for (i = 1; i <= n; i++)
  for (j = 0; j < k; j++) {
    x = (j + k - a[i]%k) % k;
    f[i][j] = max(f[i-1][x], f[i-1][j]);
  } 
```

为了节省内存，您还可以使用大小数组`[2][k]`代替`[n][k]`：

```
for (j = 0; j < k; j++) f[0][j] = 0;
for (i = 1; i <= n; i++)
  for (j = 0; j < k; j++) {
    x = (j + k - a[i]%k) % k;
    f[i%2][j] = max(f[(i-1)%2][x], f[(i-1)%2][j]);
  } 
```

您还可以使用`i&1`(and `(i-1)&1`) 来加速`2`.

* * *

关于动态规划的更多参考资料：

*   TopCoder 教程：[动态编程：从新手到高级](https://www.topcoder.com/community/data-science/data-science-tutorials/dynamic-programming-from-novice-to-advanced/)
*   *动态规划 -* Art Lew 教授和 Holger Mauch 博士的计算工具
*   *动态编程 -* Moshe Sniedovich 的基础和原理

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T11:59:11.627

听起来像是[子集总和](http://en.wikipedia.org/wiki/Subset_sum_problem)的变体：您想要总和可被 整除的最大子集`k`。

让`dp[i] = largest sum obtainable that gives remainder i modulo k`. 但是，为了避免两次使用相同的元素，我们必须使用两个数组，因为模数：包含`dp`( ) 的当前值的数组和包含(dp2)`dp1`的先前值的数组。`dp`我们有：

```
a = original array
dp1[*] = dp2[*] = 0 
for i = 1 to n do
  for j = k - 1 down to 0 do
    dp1[j] = max(dp1[j], dp2[(j - a[i]) mod k] + a[i])

  copy dp1 to dp2: on the next iteration, the current array will must become the
  previous one (*) 
```

**(*)**请注意，如果执行时间非常重要，您不必进行任何复制。您可以使用数组`dp[2, k]`并交替使用它的行：在奇数迭代中计算从`dp[0, _]`到`dp[1, _]`，在偶数迭代中反之。

答案将在`dp1[0, 0]`或中`dp2[0, 0]`。使用的内存是`O(n + k)`和时间复杂度`O(n * k)`。

**注意：**在实现这一点时，您可能需要以这种方式进行模运算以避免负值：`((j - a[i]) mod k + k) mod k`. 或者您可以使用 an并且仅在初始值为负`if`时才添加。`k`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-20T22:37:02.867

注意：对于数字为 的特殊情况`3`，很容易及时找到答案`O(n log n)`。

让`S = sum(array)`.
现在，如果`S % 3 == 0`，那么`S`就是答案。
如果`S % 3 == 1`，那么要使总和可被您整除，`3`您可以删除最小的元素，或者删除最小`i`的`i % 3 == 1`元素`j`，`k`例如`j % 3 == k % 3 == 2`。
如果`S % 3 == 2`，那么您可以删除最小的`i`这样的`i % 3 == 2`，或者最小的`j`，`k`这样的`j % 3 == k % 3 == 1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T14:08:07.307

```
import java.util.*;

public class MaxSumDivisible 
{

    static int max,divisor;

public static void main(String...okok)
{
    Scanner sc=new Scanner(System.in);
    String str=sc.nextLine();
    String ss[]=str.split(" ");
    LinkedList<Integer> list= new LinkedList<Integer>();
    for(int i=0;i<ss.length;i++)
    {
        list.add(Integer.parseInt(ss[i]));
    }
    divisor=sc.nextInt();
    FindMaxSum(list,0);
    System.out.println(max);
}
public static void FindMaxSum(LinkedList<Integer> list, int currentsum)
{
    if(currentsum%divisor==0 && currentsum>max)
    {
        max=currentsum;
    }

    for(int num:list)
    {
        LinkedList<Integer> li2= new LinkedList<Integer>(list);
        li2.remove(new Integer(num));
        FindMaxSum(li2,currentsum+num);

    }
}
} 
```

它适用于任何数字。（仅适用于 int）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-17T04:31:39.427

以下代码专门针对给定的数字 3。即。可被 3 整除的数组元素的总和。您可以进一步概括这一点。主要思想是跟踪每个 mod 3，可以达到的最大总和。时间复杂度：O(N)。空间复杂度：O(K)，其中 K 是整数，总和可以被它整除。这里 K = 3。

```
class Solution {
    public int maxSumDivThree(int[] nums) {
        int[] dp = new int[3];
        dp[1] = dp[2] = Integer.MIN_VALUE;
        for(int x : nums) {
            int[] dpNext = new int[3];
            dpNext[0] = Math.max(dp[x%3] + x, dp[0]);
            dpNext[1] = Math.max(dp[(x+1)%3] + x,dp[1]);
            dpNext[2] = Math.max(dp[(x+2)%3] + x,dp[2]);
            dp = dpNext;
        }
        return dp[0];
    }
} 
```

LeetCode 每周竞赛 163[链接到问题](https://leetcode.com/contest/weekly-contest-163/problems/greatest-sum-divisible-by-three/)。

# asp.net - linq中带有Arraylist的where子句

> ID：13511886
> 
> 赞同：1
> 
> 时间：2012-11-22T11:33:12.753
> 
> 标签：asp.net, linq

我有arraylist，我在其中动态存储字符串。

例：

```
Arraylist a = new Arraylist();
string[] Url = {"ram" ,"syam" }
foreach (var s in Url)
{
a.Insert(0,s);
var person = (from p in db.person
             where a.contain(p.name)
             select p).tolist(); 
} 
```

这是我的查询。但问题是查询过滤器仅适用于数组列表中添加的第一项。如果首先添加“syam”，然后添加“ram”，则只从数据库中获取“syam”记录。我想从数据库中获取这两个记录。所以我必须做..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:37:46.723

```
string[] Url = {"ram", "syam"};
var persons = (from p in db.person
              where Url.Contain(p.name)
              select p).ToList(); 
```

# r - R中的RandomForest - 所有因素在部分图中都有直线

> ID：13511893
> 
> 赞同：2
> 
> 时间：2012-11-22T11:33:35.027
> 
> 标签：r, random-forest

我正在尝试使用 R 中的包 randomForest 制作部分图。执行随机森林对象后，我键入

```
partialPlot(data.rforest, pred.data=act2, x.var=centroid, "C") 
```

`data.rforest`我的随机森林对象在哪里，`act2`是原始数据集，`centroid`是预测变量`C`之一，也是我的响应变量中的类之一。无论我尝试什么预测变量或响应类，我总是得到一条直线。同样，如果我将分类变量设置为预测变量，我会得到一个条形图，其中所有条形都具有相同的高度。我想我在这里做错了，因为对同一 rforest 对象的所有其他分析似乎都是正确的（例如`varImp`或`MDSplot`）。是否可能与随机森林对象中设置的某些选项有关？

# javascript - 如果其名称或 itemid 已知，如何知道在文本框中输入的值

> ID：13511895
> 
> 赞同：2
> 
> 时间：2012-11-22T11:33:40.837
> 
> 标签：javascript, jquery

我想在单击保存按钮时将值保存到数据库中。我有一个带有类的文本框。文本框已针对多个值重复。我将不同的项目 ID 传递给多个值。当我单击保存按钮时。我想知道在文本框中输入的值。我知道这里的项目 ID。我怎么能得到那个。

希望你能理解我的问题

问候， 斯里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:09:55.687

如果你有一个`id`of 属性，那就很简单了。

```
<input type="text" value="4" id="txt_4"/> 
```

jQuery

```
var val = $('#txt_4').val();
alert(val); 
```

* * *

如果您的 dom 看起来像这样，并且您没有`id`指定属性，那么您可以通过以下方式获取详细信息：

```
<input type="text" value="1"/>
<input type="text" value="2"/>
<input type="text" value="3"/>
<input type="text" value="4"/> <!-- Get this value. -->
<input type="text" value="5"/>
<input type="text" value="6"/> 
```

jQuery

```
var val = $('input').eq(3).val(); // The count starts from 0
alert(val); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:35:50.967

如果你知道 id 那么就这样使用

```
 $("#id").val() 
```

# vb.net - 获取 lnk 文件的完整路径

> ID：13511897
> 
> 赞同：0
> 
> 时间：2012-11-22T11:33:43.223
> 
> 标签：vb.net, visual-studio, text, text-files, streamwriter

我有一个内容如下的文本文件：

```
F:\-=Temporal=-\Documentos\DVD Temazos\Rock\Breaking Benjamin - Fade Away.mp3.lnk
F:\-=Temporal=-\Documentos\DVD Temazos\Rock\Breaking Benjamin - Lights Out.mp3.lnk
F:\-=Temporal=-\Documentos\DVD Temazos\Rock\Versaemerge - No Consequences.mp3.lnk
F:\-=Temporal=-\Documentos\DVD Temazos\Rock\VersaEmerge - Past Praying for.mp3.lnk
F:\-=Temporal=-\Documentos\DVD Temazos\Rock\Watch Commander - Clock & Compass.mp3.lnk 
```

我需要的是获取链接文件的所有真实路径，并将其存储在 var 中。

例如，如果文本文件包含这一行：

```
F:\-=Temporal=-\Documentos\DVD Temazos\Rock\VersaEmerge - Let Down.mp3.lnk 
```

然后我需要得到真实的位置，就是这样：

```
F:\Music\Songs\2010\Rock (English)\VersaEmerge - Let Down.mp3 
```

我使用下一种方法获取文件夹的所有“.lnk”文件，然后将文件名写入文本文件（我上面提到的文本文件）

PS：我发布这个是因为也许有人知道如何在这里为我的目的做一个技巧：

```
 Dim Temp_file As String = System.IO.Path.GetTempPath & "\PlayList_temp.m3u"

    Using objWriter As New System.IO.StreamWriter(Temp_file, False)
        For Each folder In ArgsArray
            If Not folder = Nothing Then
                Dim di As New IO.DirectoryInfo(folder)
                Dim files As IO.FileInfo() = di.GetFiles("*.lnk")
                Dim file As IO.FileInfo
                For Each file In files
                    objWriter.Write(file.FullName & vbCrLf)
                Next
            End If
        Next
        End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:08:10.473

我测试了这个解决方案[How to resolve a .lnk in c#](https://stackoverflow.com/questions/139010/how-to-resolve-a-lnk-in-c-sharp)这是用 C# 编写的。这是用 VB.NET 编写的解决方案：

```
Imports System.Runtime.InteropServices
Imports System.Text

Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Dim TargetFilename As String = ResolveShortcut("C:\Users\WinUser\Desktop\Test.pdf - Shortcut.lnk")
    End Sub

    <DllImport("shfolder.dll", CharSet:=CharSet.Auto)>
    Friend Shared Function SHGetFolderPath(hwndOwner As IntPtr, nFolder As Integer, hToken As IntPtr, dwFlags As Integer, lpszPath As StringBuilder) As Integer
    End Function

    <Flags()>
    Private Enum SLGP_FLAGS
        ''' <summary>Retrieves the standard short (8.3 format) file name</summary>
        SLGP_SHORTPATH = &H1
        ''' <summary>Retrieves the Universal Naming Convention (UNC) path name of the file</summary>
        SLGP_UNCPRIORITY = &H2
        ''' <summary>Retrieves the raw path name. A raw path is something that might not exist and may include environment variables that need to be expanded</summary>
        SLGP_RAWPATH = &H4
    End Enum

    <StructLayout(LayoutKind.Sequential, CharSet:=CharSet.Auto)>
    Private Structure WIN32_FIND_DATAW
        Public dwFileAttributes As UInteger
        Public ftCreationTime As Long
        Public ftLastAccessTime As Long
        Public ftLastWriteTime As Long
        Public nFileSizeHigh As UInteger
        Public nFileSizeLow As UInteger
        Public dwReserved0 As UInteger
        Public dwReserved1 As UInteger
        <MarshalAs(UnmanagedType.ByValTStr, SizeConst:=260)>
        Public cFileName As String
        <MarshalAs(UnmanagedType.ByValTStr, SizeConst:=14)>
        Public cAlternateFileName As String
    End Structure

    <Flags()>
    Private Enum SLR_FLAGS
        ''' <summary>
        ''' Do not display a dialog box if the link cannot be resolved. When SLR_NO_UI is set,
        ''' the high-order word of fFlags can be set to a time-out value that specifies the
        ''' maximum amount of time to be spent resolving the link. The function returns if the
        ''' link cannot be resolved within the time-out duration. If the high-order word is set
        ''' to zero, the time-out duration will be set to the default value of 3,000 milliseconds
        ''' (3 seconds). To specify a value, set the high word of fFlags to the desired time-out
        ''' duration, in milliseconds.
        ''' </summary>
        SLR_NO_UI = &H1
        ''' <summary>Obsolete and no longer used</summary>
        SLR_ANY_MATCH = &H2
        ''' <summary>If the link object has changed, update its path and list of identifiers.
        ''' If SLR_UPDATE is set, you do not need to call IPersistFile::IsDirty to determine
        ''' whether or not the link object has changed.</summary>
        SLR_UPDATE = &H4
        ''' <summary>Do not update the link information</summary>
        SLR_NOUPDATE = &H8
        ''' <summary>Do not execute the search heuristics</summary>
        SLR_NOSEARCH = &H10
        ''' <summary>Do not use distributed link tracking</summary>
        SLR_NOTRACK = &H20
        ''' <summary>Disable distributed link tracking. By default, distributed link tracking tracks
        ''' removable media across multiple devices based on the volume name. It also uses the
        ''' Universal Naming Convention (UNC) path to track remote file systems whose drive letter
        ''' has changed. Setting SLR_NOLINKINFO disables both types of tracking.</summary>
        SLR_NOLINKINFO = &H40
        ''' <summary>Call the Microsoft Windows Installer</summary>
        SLR_INVOKE_MSI = &H80
    End Enum

    ''' <summary>The IShellLink interface allows Shell links to be created, modified, and resolved</summary>
    <ComImport(), InterfaceType(ComInterfaceType.InterfaceIsIUnknown), Guid("000214F9-0000-0000-C000-000000000046")>
    Private Interface IShellLinkW
        ''' <summary>Retrieves the path and file name of a Shell link object</summary>
        Sub GetPath(<Out(), MarshalAs(UnmanagedType.LPWStr)> pszFile As StringBuilder, cchMaxPath As Integer, ByRef pfd As WIN32_FIND_DATAW, fFlags As SLGP_FLAGS)
        ''' <summary>Retrieves the list of item identifiers for a Shell link object</summary>
        Sub GetIDList(ByRef ppidl As IntPtr)
        ''' <summary>Sets the pointer to an item identifier list (PIDL) for a Shell link object.</summary>
        Sub SetIDList(pidl As IntPtr)
        ''' <summary>Retrieves the description string for a Shell link object</summary>
        Sub GetDescription(<Out(), MarshalAs(UnmanagedType.LPWStr)> pszName As StringBuilder, cchMaxName As Integer)
        ''' <summary>Sets the description for a Shell link object. The description can be any application-defined string</summary>
        Sub SetDescription(<MarshalAs(UnmanagedType.LPWStr)> pszName As String)
        ''' <summary>Retrieves the name of the working directory for a Shell link object</summary>
        Sub GetWorkingDirectory(<Out(), MarshalAs(UnmanagedType.LPWStr)> pszDir As StringBuilder, cchMaxPath As Integer)
        ''' <summary>Sets the name of the working directory for a Shell link object</summary>
        Sub SetWorkingDirectory(<MarshalAs(UnmanagedType.LPWStr)> pszDir As String)
        ''' <summary>Retrieves the command-line arguments associated with a Shell link object</summary>
        Sub GetArguments(<Out(), MarshalAs(UnmanagedType.LPWStr)> pszArgs As StringBuilder, cchMaxPath As Integer)
        ''' <summary>Sets the command-line arguments for a Shell link object</summary>
        Sub SetArguments(<MarshalAs(UnmanagedType.LPWStr)> pszArgs As String)
        ''' <summary>Retrieves the hot key for a Shell link object</summary>
        Sub GetHotkey(ByRef pwHotkey As Short)
        ''' <summary>Sets a hot key for a Shell link object</summary>
        Sub SetHotkey(wHotkey As Short)
        ''' <summary>Retrieves the show command for a Shell link object</summary>
        Sub GetShowCmd(ByRef piShowCmd As Integer)
        ''' <summary>Sets the show command for a Shell link object. The show command sets the initial show state of the window.</summary>
        Sub SetShowCmd(iShowCmd As Integer)
        ''' <summary>Retrieves the location (path and index) of the icon for a Shell link object</summary>
        Sub GetIconLocation(<Out(), MarshalAs(UnmanagedType.LPWStr)> pszIconPath As StringBuilder, cchIconPath As Integer, ByRef piIcon As Integer)
        ''' <summary>Sets the location (path and index) of the icon for a Shell link object</summary>
        Sub SetIconLocation(<MarshalAs(UnmanagedType.LPWStr)> pszIconPath As String, iIcon As Integer)
        ''' <summary>Sets the relative path to the Shell link object</summary>
        Sub SetRelativePath(<MarshalAs(UnmanagedType.LPWStr)> pszPathRel As String, dwReserved As Integer)
        ''' <summary>Attempts to find the target of a Shell link, even if it has been moved or renamed</summary>
        Sub Resolve(hwnd As IntPtr, fFlags As SLR_FLAGS)
        ''' <summary>Sets the path and file name of a Shell link object</summary>
        Sub SetPath(<MarshalAs(UnmanagedType.LPWStr)> pszFile As String)

    End Interface

    <ComImport(), Guid("0000010c-0000-0000-c000-000000000046"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)>
    Public Interface IPersist
        <PreserveSig()>
        Sub GetClassID(ByRef pClassID As Guid)
    End Interface

    <ComImport(), Guid("0000010b-0000-0000-C000-000000000046"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)>
    Public Interface IPersistFile
        Inherits IPersist
        Shadows Sub GetClassID(ByRef pClassID As Guid)
        <PreserveSig()>
        Function IsDirty() As Integer

        <PreserveSig()>
        Sub Load(<[In](), MarshalAs(UnmanagedType.LPWStr)> pszFileName As String, dwMode As UInteger)

        <PreserveSig()>
        Sub Save(<[In](), MarshalAs(UnmanagedType.LPWStr)> pszFileName As String, <[In](), MarshalAs(UnmanagedType.Bool)> fRemember As Boolean)

        <PreserveSig()>
        Sub SaveCompleted(<[In](), MarshalAs(UnmanagedType.LPWStr)> pszFileName As String)

        <PreserveSig()>
        Sub GetCurFile(<[In](), MarshalAs(UnmanagedType.LPWStr)> ppszFileName As String)
    End Interface

    Const STGM_READ As UInteger = 0
    Const MAX_PATH As Integer = 260

    ' CLSID_ShellLink from ShlGuid.h 
    <ComImport(), Guid("00021401-0000-0000-C000-000000000046")> Public Class ShellLink
    End Class

    Public Shared Function ResolveShortcut(filename As String) As String
        Dim link As New ShellLink()
        DirectCast(link, IPersistFile).Load(filename, STGM_READ)
        ' TODO: if I can get hold of the hwnd call resolve first. This handles moved and renamed files.  
        ' ((IShellLinkW)link).Resolve(hwnd, 0) 
        Dim sb As New StringBuilder(MAX_PATH)
        Dim data As New WIN32_FIND_DATAW()
        DirectCast(link, IShellLinkW).GetPath(sb, sb.Capacity, data, 0)
        Return sb.ToString()
    End Function

End Class 
```

# validation - Wicket ValidationError 未使用应用程序中指定的 IConverters

> ID：13511898
> 
> 赞同：2
> 
> 时间：2012-11-22T11:33:43.077
> 
> 标签：validation, localization, wicket, wicket-1.5

我正在尝试使用 Wicket 本地化验证错误消息并遇到这种情况。我使用自定义转换器将日期值转换为所需的格式（见下文）。但是，使用时`AbstractValidator`，`IValidationError`值转换不正确。默认转换 - 可能`#toString()`- 被使用。

**所需的错误消息**“... *20.12.2012* ”

**实际错误消息**“... *2012-12-20* ”

我们使用 Joda-time 处理模型中的日期和时间值。我们还希望无论向用户显示哪种语言，日期和时间都以芬兰语语言环境显示，即日期显示为`d.m.yyyy`，时间显示为`hh:mm`。

在我的 Application 类中，我指定了两种类型转换器，一种`LocalDate`用于`LocalTime`. 通常，两个转换器都可以正常工作。即，`new Label("id", new LocalDate(2013, 5, 7));`显示为“7.5.2013”​​。此外，转换与消息插值和`StringResourceModel`s 配合得很好。例如，属性`prop=The date was: ${date}`正确显示为“日期为 2012 年 12 月 20 日”。

日期验证逻辑是在业务层中完成的，其中会因验证错误而引发异常。异常可能包含需要作为反馈显示给用户的变量。以下是该情况的简化示例。

### 应用类

```
@Override
protected IConverterLocator newConverterLocator() {
    final ConverterLocator locator = new ConverterLocator();
    locator.set(LocalDate.class, new LocalDateConverter());
    locator.set(LocalTime.class, new LocalTimeConverter());
    return locator;
} 
```

### 验证器类

```
public class MyDateValidator extends AbstractValidator<LocalDate> {
...
@Override
protected void onValidate(IValidatable<LocalDate> validatable) {
    try {
        service.validateDate(validatable.getValue());
    } catch (MyValidationException e) {
        Map<String, Object> values = new HashMap<String, Object>();
        values.put("date", e.getDate());
        error(validatable, "DateValidator", values);
    }
} 
```

### 转换后的属性

```
DateValidator=There was an error on ${date} 
```

**编辑**：

罪魁祸首似乎是`MapVariableInterpolator#getValue(variableName)`哪个使用`Strings.toString`哪个轮流调用`object.toString()`。仍然需要了解它是如何正常工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:33:06.957

似乎这是在 6.0.0 版中修复的 Wicket 的一个错误，但在 1.5 版中未修复（[https://issues.apache.org/jira/browse/WICKET-4608](https://issues.apache.org/jira/browse/WICKET-4608)）。由于我们无法立即迁移到 wicket 6，因此我们需要自己实施修复。`String`目前，它使用应用程序的转换器将变量转换为对象。

```
@SuppressWarnings("unchecked")
public static <T> String convert(T value) {
    return Application.get().getConverterLocator().<T>getConverter((Class<T>) value.getClass())
            .convertToString(value, Session.get().getLocale());
} 
```

# javascript - 保存搜索以供将来使用表单和 javascript

> ID：13511900
> 
> 赞同：0
> 
> 时间：2012-11-22T11:33:45.203
> 
> 标签：javascript, jquery, ajax

这是我用来构建图表的函数：

```
$('#button_submit').click(function() {
    var start_date = $('#start_date').val();
    var end_date = $('#end_date').val();
    var type = $('#type').val();
    drawChart(start_date, end_date, type, unit) 
}); 

function drawChart(start_date, end_date, type, unit) {
    var jsonData = $.ajax({
        //url: "server.php?start_date=" + start_date + "&end_date=" + end_date + "&type=" + type,
        dataType: "json",
        async: false
    }).responseText;

    var obj = jQuery.parseJSON(jsonData);
    var data = google.visualization.arrayToDataTable(obj);
    (...) 
```

有没有办法根据这些参数保存我的图表搜索：`start_date`, `end_date`,`type`从表单中获取？我想保存用户在登录时所做的每一次搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:41:34.607

我想这可以让你开始：

```
$('#button_submit').click(function() {
    var start_date = $('#start_date').val();
    var end_date = $('#end_date').val();
    var type = $('#type').val();
    var tempArr = new Array();
    var json = window.sessionStorage['search'];
    if(json)
        tempArr = JSON.parse(json);
    tempArr.push(JSON.parse('{"start_date" : "'+start_date+'" , "end_date" : "'+end_date+'" , "type" : "'+type+'"}'));
    window.sessionStorage['search'] = JSON.stringify(tempArr);
    drawChart(start_date, end_date, type, unit) 
}); 
```

下次当您的用户登录时，从 window.sessionStorage['search'] 获取 search_details。当您想查看搜索历史记录时，可以使用 JSON.parse(window.sessionStorage['search']); 它会给你一个可以传递给服务器端处理的对象数组。

# wordpress - 仅获取自定义类型帖子“名称”和“标签”

> ID：13511904
> 
> 赞同：0
> 
> 时间：2012-11-22T11:33:57.060
> 
> 标签：wordpress, custom-post-type

我正在使用下面的代码来获取帖子名称和帖子标签。但我不想要所有自定义类型，如“post”、“page”和“attachment”。我只需要自定义帖子类型“名称”和“标签”。

```
 $types = get_post_types( array( 'exclude_from_search' => false ), 'objects' ); ?>

          <?php foreach ( $types as $type )
            {
              echo '<li>' . $type->name . '</li>';
              echo '<li>' . $type->singular_label . '</li>';
              }
          ?> 
```

如何仅获取自定义帖子类型“名称”和“标签”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:41:06.197

添加

```
'public'   => true,
'_builtin' => false 
```

你的论点是这样的：

```
$types = get_post_types( array( 'exclude_from_search' => false, 'public' => true, '_builtin' => false ), 'objects' ); 
```

这应该只显示您的自定义帖子类型。

# .net - EF 5：比较两个实体列表并在需要的地方执行插入、更新、删除

> ID：13511917
> 
> 赞同：3
> 
> 时间：2012-11-22T11:34:36.697
> 
> 标签：.net, list, entity, compare

这就是我在 Asp.net C# 中尝试做的事情。

我正在从每晚同步的文本文件中导入产品。同步后，我从文本文件创建产品实体列表并将它们导入数据库。到现在为止还挺好。但是在第一次同步完成后，我必须将数据库中的现有产品与文本文件中的产品进行比较，并对数据库执行更新、插入、删除。这是一段代码，但现在我被卡住了：

```
public class Product
{

    public int Id { get; set; }

    public int ProductNumber { get; set; }

    public string Brand { get; set; }

    public string Category { get; set; }

    public decimal Price { get; set; }

    //

    public virtual ICollection<StockItem> StockItems{ get; set; }

}

// Products from TXT have no Id-Property
List<Product> ProductsFromTXT = getProductsFromTXT();
List<Product> ProductsFromDB = getProductsFromDB(); 
```

是否可以比较实体产品及其属性更改的两个列表？（Id-property 除外）我如何获得新产品并知道要删除哪些产品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:22:34.573

您需要为`Product`该类定义一个相等比较器。假设您使用的是`ProductNumber`作为键：

```
public class ProductNumberEqualityComparer : IEqualityComparer<Product>
{
   public int GetHashCode(Product obj)
   {
      return (obj == null) ? 0 : obj.ProductNumber.GetHashCode();
   }

   public bool Equals(Product x, Product y)
   {
      if (ReferenceEquals(x, y)) return true;
      if (x == null || y == null) return false;
      return x.ProductNumber == y.ProductNumber;
   }
} 
```

然后，您可以使用它来查找要添加、编辑和删除的项目：

```
var comparer = new ProductNumberEqualityComparer();

var itemsToDelete = ProductsFromDB.Except(ProductsFromTXT, comparer).ToList();
foreach (Product item in itemsToDelete)
{
   // TODO: Delete the product
}

var itemsToUpdate = from dbProduct in ProductsFromDB
                    join txtProduct in ProductsFromTXT
                    on dbProduct.ProductNumber equals txtProduct.ProductNumber
                    select new
                    {
                       dbProduct,
                       txtProduct
                    };

foreach (var item in itemsToUpdate)
{
   // Update the product:
   item.dbProduct.Brand = item.txtProduct.Brand;
   item.dbProduct.Category = item.txtProduct.Category;
   item.dbProduct.Price = item.txtProduct.Price;

   // TODO: Update the stock items if required
}

var itemsToAdd = ProductsFromTXT.Except(ProductsFromDB, comparer).ToList();
foreach (Product item in itemsToAdd)
{
   // TODO: Add the product
} 
```

# c# - 如何使用 Windows Phone 7 中的应用程序栏导航到另一个页面？

> ID：13511918
> 
> 赞同：0
> 
> 时间：2012-11-22T11:34:39.330
> 
> 标签：c#, windows-phone-7

我想导航到另一个页面，首先在主页旁边我添加了新页面，另外我添加了应用程序栏，现在我想在单击应用程序栏中的菜单项后导航到第三页，带有菜单项的应用程序栏应该显示在第三页中，而不在第三页中删除它。我在 Visual Studio 2012 中工作。我怎样才能完成这项任务。我以这种方式定义了应用程序栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:49:38.617

@lokesh，似乎不可能以编程方式显示应用程序栏。看到这个[问题](https://stackoverflow.com/questions/4459664/show-applicationbar-menu-programmatically-wp7)

因此，您的任务的第一部分可以很容易地完成，只需将 menuItem 添加到您的应用程序栏，它将编组导航（可以通过委托完成）

```
appBarNavigateSomewhere.Click += delegate(object sender, EventArgs e)
        {
            appBarNavigateSomewhere_Click(sender, e, page);
        }; 
```

然后：

```
public void appBarNavigateSomewhere_Click(object sender, EventArgs e, PhoneApplicationPage page)
        {
            page.NavigationService.Navigate(new Uri(SomePage, UriKind.RelativeOrAbsolute));
        } 
```

但是无法在导航发生后立即在第三页显示此 appBar。

* * *

请注意，NavigationService.Navigate() 只能在某些页面中使用，这就是我将 PhoneApplicationPage 对象添加到该方法的原因。

# python - 将 OpenERP 与外部应用程序集成

> ID：13511919
> 
> 赞同：1
> 
> 时间：2012-11-22T11:34:43.533
> 
> 标签：python, integration, openerp

如何将 OpenERP 与外部应用程序集成？我的队友正在开发一个自定义应用程序作为更大系统的一部分，我需要访问他的应用程序以在 OpenERP 中提取一些数据（从中生成报告），如何实现？

我知道人们已经将 OpenERP 与 Magneto 和 Quickbooks 等其他应用程序集成，所以这当然是可能的，但我应该从哪里开始呢？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:51:17.043

它可以使用[OpenERP Web 服务来实现](http://doc.openerp.com/v6.1/developer/12_api.html#working-with-web-services)

# c# - 表单链接：如何在 C# 中访问复选框？

> ID：13511921
> 
> 赞同：0
> 
> 时间：2012-11-22T11:34:49.760
> 
> 标签：c#, checkbox

我有form1和form2，在form1上我有一个checkbox1，我需要在form2上知道那个checkbox1已启用。请帮忙！我正在制作一个算术学习系统，该系统在第一个表单上具有设置，因此如果选中加法（复选框1），则表单 2 将执行加法方程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:39:39.380

首先 - 你真的需要包含***代码***......

但是 - 假设您的复选框已由设计器添加 - 您所要做的就是转到复选框的属性并将该控件的“修改器”设置为“公共”：

![修改器设计器属性](../Images/49c68ffb47080adb78e09dafcddcce00.png)

然后，假设您有对您的引用，`Form1`您应该会看到您的复选框以智能感知出现在成员列表中。

请注意，这是公开控件的最短和最简单的方法 - 是否是*最明智*的方法是另一回事。但对于简单、封闭的项目，这是完全合理的。

# c# - 更改窗口不透明度，使儿童保持不变

> ID：13511922
> 
> 赞同：0
> 
> 时间：2012-11-22T11:34:54.567
> 
> 标签：c#, wpf

我在 WPF 中遇到了窗口不透明度的问题，我想做的是改变窗口的不透明度，但让孩子的不透明度保持不变。

这是我当前的代码：

```
 Window window = new Window();
  window.WindowStyle = WindowStyle.None;
  window.AllowsTransparency = true;
  window.Background = Brushes.Black;
  window.Opacity = 0.5;
  window.ShowInTaskbar = false;

  double taskBarHeight = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height - System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Height;
  window.Height = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height - taskBarHeight;
  window.Width = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width;
  window.Top = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Top;
  window.Left = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Left;

  LoginCtl ctl = new LoginCtl(this);

  window.Content = ctl;
  window.ShowDialog(); 
```

我知道孩子的不透明度不能比他们的父母高，但是有没有可能的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:37:14.650

也许它有助于理解窗口不透明度是如何工作的。它在硬件中实现，视频适配器的一项功能称为“覆盖”。它通过 WS_EX_LAYERED 窗口样式标志和[SetLayeredWindowAttributes() api 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633540%28v=vs.85%29.aspx)在 winapi 中公开。转到该功能的 MSDN 库页面以查看可能的功能。

视频适配器有一个混合器，可以组合两个视频内存缓冲区的像素。该混合器支持两种效果，阿尔法混合和颜色键控。分别是 api 函数中的 bAlpha 和 crKey 参数。Alpha 混合是您在这里所追求的，它使用乘数将两个缓冲区的像素组合在一起。alpha 乘数越低，像素对发送到监视器的最终像素值的贡献就越小。颜色键控是视频处理中的常见技巧，天气预报员在天气图前，当一个像素与颜色键匹配时，它将被另一个缓冲区中的像素替换。颜色键控不直接在 WPF 中公开，但在 Winforms 中具有 Form.TransparencyKey 属性。WPF 使用每像素 alpha，它使用包含 alpha 分量的 32bpp 像素进行绘制，

也许您现在可以说出为什么会遇到这个问题，winapi 将效果限制在一个窗口中。附加要求它必须是顶级窗口，与 WPF Window 类相同。因此，alpha 混合效果适用于窗口中的*所有*像素，您不能有选择地将其关闭用于渲染控件的窗口部分。

请注意链接文章中的评论，Windows 8 也支持为子窗口指定它。这几乎肯定是由桌面窗口管理器 DWM 完成的，并在启用 Aero 时启用。在软件而不是硬件中完成，窗口被渲染到内存，DWM 在将像素发送到视频适配器之前对它们进行合成。该功能尚未在 .NET 中公开，需要时间。反正对 WPF 不是很有用，因为 WPF 不像 Winforms 那样使用子窗口。

足够的介绍来理解你需要做什么来解决这个问题。你需要做自己的分层。你需要**两扇**窗户，一扇夹在另一扇上面。底部应该只是一个普通的窗口，只有不透明度集。它提供了背景。然后，您需要另一个包含控件的 Window，将其 WindowStyle 设置为 None 并将 Background 设置为 transparent，以便您可以看到底部窗口呈现的背景像素。它的所有者应该设置为底部窗口，因此它始终位于顶部，并且当用户移动底部窗口或调整其大小时，您需要移动它并调整其大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:46:51.663

好吧，你可以让你的窗口处于正常的不透明度，但改变背景的透明度（阿尔法通道）。如果这还不够，并且您还想更改 chrome 元素的不透明度，您可以尝试自己修改它。请参阅[此链接](http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:14:57.663

我使用的解决方案可以在[这里](http://codelog.blogial.com/2010/01/13/transparent-background-with-opaque-controls-on-top-of-it/)找到。

我所做的是创建一个只有一个网格和一个矩形的窗口：

```
 <Grid Name="MainGrid">
    <Rectangle Fill="Gray" Opacity="0.7" />
    </Grid> 
```

然后从后面的代码中执行以下操作：

```
 LoginWindow win = new LoginWindow();
  win.ShowInTaskbar = false;

  LoginCtl ctl = new LoginCtl(this);
  win.MainGrid.Children.Add(ctl);
  win.ShowDialog(); 
```

这样可以看到窗口的背景，但添加到其中的控件是不透明的。

希望这对某人有帮助！

# symfony1 - 如何在多个 Diem 安装中同步 dmPages 和 dmWidgets？

> ID：13511923
> 
> 赞同：1
> 
> 时间：2012-11-22T11:34:55.160
> 
> 标签：symfony1, symfony-1.4, diem

Diem 是很棒的 CMF，但它缺乏跨镜像站点同步页面（和小部件）的能力。

我是使用基于 Diem 的 CMS 的中型网站的首席开发人员。

如果我们（大约 50 人，不是所有开发人员，大多数人不是）可以在我们网站的非公开镜像上准备重大内容更改/更新，然后立即将它们推送到生产环境，那就太好了。

我一直在考虑一种在许多安装中同步 dmPages 的方法（当然，使用相同的 db 模式）。我看到了2个问题：

*   如何填充链接（页面：，媒体：）以确保它们在新安装中同步后可以工作
*   如何传输和填充小部件资产。

我使用（目前不存在）导入导出脚本想出了这样的工作流程：

1.  导出表单开发安装**D**选择的 dmPages、dmWidgets（如果适用：小部件资产和所属的自定义模型实体及其资产）到 tarball 存档（并可能压缩它）
2.  将存档导入生产安装**P**，解压缩并解压缩并处理它
    1.  分析是否有任何资产连接到小部件/模型实体，将其复制到适当的网络子文件夹，然后创建 dmMedia 并存储其 ID
    2.  分析是否有任何模型实体，创建它，获取和存储 ID
    3.  分析是否有任何小部件：
        *   在*模型*/显示页面中，只有一个小部件要创建：显示模型小部件。创建、存储、获取 ID。
        *   在非模型页面中可以有很多小部件。创建它们（如果适用，连接 2.1 中创建的 dmMedia），存储 ID
    4.  创建 dmPages，连接之前创建的 dmWidgets
    5.  分析（仅那些导入的！）小部件和模型实体是否存在*page:*或*media:*字符串（远离开发安装）**并将它们更改为匹配**生产安装中的 ID

**我的问题是**：到目前为止导入/导出 dmPages 有什么解决方案吗？如果没有 - 您对我的解决方案提出的工作流程有什么建议吗？

# tcl - TCL：正则表达式排除具有字符的字符串

> ID：13511925
> 
> 赞同：1
> 
> 时间：2012-11-22T11:34:56.960
> 
> 标签：tcl

我不太擅长 TCL 或使用 TCL 正则表达式。但是我需要一个 TCL 机制/正则表达式，如果给定一行/句子，它可以排除或让知道一个单词有一些特殊字符。

假设我有如下一行/句子：

```
 (space)(space)At 4:00:00AM (not sure) please do your work ... 
```

现在我尝试拆分行以使用 foreach 让每个单词循环：

```
% set fields [split "   At 4:00:00AM (not sure) please do your work" " " ]
{} {} {} At 4:00:00AM (not sure) please do your work 
```

但同样我不想要空字段：

```
% foreach val $fields {
       puts $val
}

At
4:00:00AM
(not
sure)
please
do
your
work 
```

除此之外，我想排除 foreach 循环中具有特殊字符的单词，例如：

```
(not
sure)
4:00:00AM 
```

排除在 start 、 end 或单词中任何位置具有 '(' 或 ':' 的单词。

请让我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:23:36.237

```
set str "   At 4:00:00AM (not sure) please do your work"

# split the string into space-delimited words
set words [regexp -inline -all {\S+} $str]

# eliminate words containing a character other than letters, numbers, underscore
set alnum_words [lsearch -inline -regexp -all -not $words {\W}] 
```

`alnum_words`现在包含列表`{At please do your work}`

如果您只想要仅由字母组成的单词，请使用

```
lsearch -inline -regexp -all $words {^[[:alpha:]]+$} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:59:47.883

不幸的是，Tcl 正则表达式不支持后视运算符。否则，可以使用单个正则表达式来实现。但是，您可以使用以下代码来构建您需要的单词列表：

```
set the_line "   At 4:00:00AM (not sure) please do your work"
set fields {}
foreach {- val} [regexp -all -inline -- {(?:^|\s)([^:()\s]+(?=\s|$))} $the_line] {
    lappend fields $val
} 
```

# mysql - 在文本框中显示当前登录的用户

> ID：13511928
> 
> 赞同：-3
> 
> 时间：2012-11-22T11:35:02.600
> 
> 标签：mysql, vb.net, login

嘿伙计们，我如何在文本框中显示当前的日志用户？同样，当我在数据库中插入数据时，它还将包括输入它的用户是谁。

这是我的代码：

```
Conn = New MySqlConnection("host=localhost; uid=root; pwd=root; database=lmsdbase")
    'Try
    Conn.Open()
    Dim mystr As String = "Select * from tbluser where Username = '" + txtUsername.Text + "' and Password = '" + txtPassword.Text + "'"
    Dim mydr As MySqlDataReader
    Dim myda As New MySqlDataAdapter
    Dim mycmd As New MySqlCommand
    mycmd.CommandText = mystr
    mycmd.Connection = Conn
    myda.SelectCommand = mycmd
    mydr = mycmd.ExecuteReader

    'If CheckBox1.Checked Then
    '    Dim mystr2 As String = "Select * from tbluser where Usertype = '" + 
    'End If

    If mydr.HasRows = 0 Then

        MessageBox.Show("Incorrect Username or Password.", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1)
        abc -= 1
        txtUsername.Clear()
        txtPassword.Clear()

    Else

        MessageBox.Show("Welcome!")

        Me.Visible = False
        txtUsername.Text = ""
        txtPassword.Text = ""

        frmMain.Show()
    End If

    If abc = 0 Then
        MsgBox("Program is closing due to login mistakes")
        MsgBox("Please make sure the the username/password is correct", MsgBoxStyle.OkOnly)
        End
    End If

End Sub 
```

我只需要将它放在文本框上..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:02:06.837

在发布此类问题之前，请尝试更具体并在 Google 上进行更多研究 :) 要为您指明正确的方向，请查看：

```
Dim User As New System.Security.Principal.WindowsIdentity(System.Security.Principal.WindowsIdentity.GetCurrent().Token) 
```

和 [http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.aspx](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.aspx)

# android - android中的java.lang.SecurityException

> ID：13511932
> 
> 赞同：0
> 
> 时间：2012-11-22T11:35:10.397
> 
> 标签：android, android-intent, android-manifest

当我尝试在模拟器上运行我的应用程序时，不直接调用 LoginActivity 类，而当我通过 USB 在设备中运行时，它会抛出以下异常，

这是一个奇怪的行为，当我删除我的 LoginActivity splashActivity 类被调用并且应用程序因为未找到 loginactivity 而关闭时，当我作为 MainActivity 恢复启动时一切正常

```
[2012-11-22 16:59:57 - medeclinicv2] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.kredence.medeclinicv2/.LoginActivity }

[2012-11-22 16:59:57 - medeclinicv2] ActivityManager: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.kredence.medeclinicv2/.LoginActivity } from null (pid=5929, uid=2000) requires null 
```

这是我的清单代码，我已经清理了我的项目

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.kredence.medeclinicv2"
    android:versionCode="2"
    android:versionName="1.0" >
   <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <application
        android:icon="@drawable/ic_launcher" 
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".splashActivity"
            android:label="@string/app_name">
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" />
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
        <activity
            android:name=".LoginActivity"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            clearTaskOnLaunch = "true" />
        <activity
            android:name=".viewAppointment"
            android:icon="@drawable/minilogo"
            android:label="Schedule/View Appointment"
            android:windowSoftInputMode="adjustPan"
            clearTaskOnLaunch = "true">            
        </activity>
        <activity
            android:name=".scheduleActivity"
            clearTaskOnLaunch = "true"
            android:theme="@android:style/Theme.Black.NoTitleBar">            
        </activity>
        <activity
            android:name=".scheduleAppointment"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            clearTaskOnLaunch = "true">            
        </activity>
        <activity
            android:name=".reScheduleAppointment"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            clearTaskOnLaunch = "true">            
        </activity>
      <!--  <service android:name=".MainActivity"></service> --> 
       <service android:name="com.commonsware.cwac.updater.UpdateService"/>
       <receiver android:name="com.commonsware.cwac.updater.WakefulReceiver"/>
    </application>
</manifest> 
```

飞溅活动

```
package com.kredence.medeclinicv2;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MotionEvent;

public class splashActivity extends Activity {

    protected int _splashTime = 5000;
    private Thread splashTread;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        final splashActivity sPlashScreen = this;
        // thread for displaying the SplashScreen
        splashTread = new Thread() {

            @Override
            public void run() {
                try {
                    synchronized (this) {
                        wait(_splashTime);
                    }
                } catch (InterruptedException e) {} finally {
                    finish();
                    Intent i = new Intent();
                    i.setClass(sPlashScreen, LoginActivity.class);
                }
            }
        };
        splashTread.start();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            synchronized (splashTread) {
                splashTread.notifyAll();
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:42:51.783

查看您的 Android 清单代码。

通常，`java.lang.SecurityException`是因为您可以输入两个指向同一活动的条目。删除第二个，你应该很高兴。

# sparql - 限制本地 DBpedia SPARQL 查询中的结果

> ID：13511936
> 
> 赞同：3
> 
> 时间：2012-11-22T11:35:20.963
> 
> 标签：sparql, dbpedia, virtuoso

我正在尝试使用 获取包含关键字的实例`bif:contains`，但我只想为每个`?s`（实例）获取一个标签，我不在乎是哪一个。我不能用类似的东西过滤它，`regex`因为它是用于一般查询。这是我的查询，但它从每个实例 () 中获取所有标签`?s`：

```
SELECT DISTINCT ?s,?o1,?sc,?l WHERE {
  ?s ?s1textp ?o1 .
  ?o1 bif:contains ' (madrid AND embargo) ' OPTION ( score ?sc ) . 
  ?s <http://www.w3.org/2000/01/rdf-schema#label> ?l      
}
ORDER BY DESC ( ?sc )
LIMIT 30
OFFSET 0 
```

我尝试使用嵌套查询，但是当我添加 a 时，`LIMIT`我没有得到任何结果。

```
SELECT DISTINCT ?s,?o1,?sc,?l WHERE {
  ?s ?s1textp ?o1 .   
  ?o1 bif:contains ' (madrid AND embargo) ' OPTION ( score ?sc ) .                 
  {
    SELECT DISTINCT ?s,?l WHERE {
      ?s <http://www.w3.org/2000/01/rdf-schema#label> ?l
    }
    LIMIT 1
  }      
}
ORDER BY DESC ( ?sc )
LIMIT 30
OFFSET 0 
```

我还看到了[`SAMPLE`](http://www.w3.org/TR/sparql11-query/#defn_aggSample)聚合函数；它完全符合我在 DBpedia 端点中的要求，但它不适用于我自己的 Virtuoso！（我使用的是开源版本。）

```
SELECT DISTINCT ?s,?o1,?sc,?l WHERE {
  ?s ?s1textp ?o1 .
  ?o1 bif:contains ' (madrid AND embargo) ' OPTION ( score ?sc ) . 
  {
    SELECT DISTINCT ?s,(SAMPLE(?l) AS ?l) WHERE {
      ?s <http://www.w3.org/2000/01/rdf-schema#label> ?l
    }
    GROUP BY ?s
  }
}
ORDER BY desc ( ?sc )
LIMIT 30
OFFSET 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:30:38.260

[官方 DBpedia 端点](http://dbpedia.org/sparql)在Virtuoso 上运行，因此如果这样做是正确的，您可能只需要更新自己的 Virtuoso 实例。VOS 目前在[`7.2.2`(或者`6.1.8`，如果你必须留在 v6)](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VOSNews) ~~`6.1.6`~~，并​​且 Virtuoso [Github 空间](https://github.com/openlink/virtuoso-opensource/)( [instructions](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VOSGitUsage) ) 保存最新的代码剪辑`stable/7`和`develop/7`(and `stable/6`and `develop/6`)，每个都提供路径建议的内容。

对于未来——特别是关于 Virtuoso 的问题通常最好在[公共 OpenLink 讨论论坛](http://boards.openlinksw.com/support/)、[Virtuoso 用户邮件列表](http://sourceforge.net/mailarchive/forum.php?forum_name=virtuoso-users)或[机密支持案例](http://support.openlinksw.com/support/online-support.vsp)中提出。

# rtc - 签入多个文件并将相同的注释关联到单个更改集

> ID：13511937
> 
> 赞同：2
> 
> 时间：2012-11-22T11:35:21.700
> 
> 标签：rtc

阅读此文档[http://pic.dhe.ibm.com/infocenter/rtc/v2r0m0/index.jsp?topic=/com.ibm.team.scm.doc/topics/r_scm_cli_scm.html](http://pic.dhe.ibm.com/infocenter/rtc/v2r0m0/index.jsp?topic=/com.ibm.team.scm.doc/topics/r_scm_cli_scm.html)我使用命令 ：

```
scm checkin myfile.txt 
```

我需要签入多个文件并将它们与相同的更改集（和评论）相关联。我怎样才能做到这一点 ？似乎没有关于如何将文件签入与评论相关联或如何将多个文件签入作为单个更改集的任何细节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:53:24.253

应将多个签入添加到*同一个*更改集，即一个[`scm status`](http://pic.dhe.ibm.com/infocenter/rtc/v2r0m0/index.jsp?topic=/com.ibm.team.scm.doc/topics/r_scm_cli_status.html)指示为“活动”：'@'。

因此，如果您首先创建变更集（`[`scm create --changeset `][2]`），则下一次签入应该在该活动变更集中（用于`scm changeset comment` 更新其注释）。

# java - 如何模拟手风琴点击事件来断言显示的文本

> ID：13511941
> 
> 赞同：0
> 
> 时间：2012-11-22T11:35:36.080
> 
> 标签：java, junit, wicket

我的页面中有以下手风琴：

```
<div id="accordion">
 <div wicket:id="foo"></div>
<div wicket:id="bar"></div>
</div> 
```

当有人点击 时`<div wicket:id="foo"></div>`，会显示一些文本。我的问题是：如何在此手风琴链接上模拟点击事件，以便我可以使用 junit 断言显示的文本。我尝试了以下方法：

```
wicketTester.clickLink("foo"); 
```

但我收到以下错误：

```
junit.framework.AssertionFailedError: Link foo is not a Link, AjaxLink, AjaxFallbackLink or AjaxSubmitLink 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:44:54.430

看看 wicketTester 的 executeAjaxEvent 和 executeBehavior 方法。我认为其中之一可以用来模拟用户对 div 的点击。

# php - 带有两个查询字符串的 URL 重定向 htaccess

> ID：13511951
> 
> 赞同：1
> 
> 时间：2012-11-22T11:36:08.700
> 
> 标签：php, mysql, .htaccess

我有一个这样的查询字符串：

```
product_details.php?id=17&name=dhruba 
```

我如何将其更改为：

```
product_details/dhruba 
```

请解释我如何从数据库中重定向带有标题的 id。我正在使用 id 进行所有计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:47:01.790

您将需要一个 .htaccess 文件中的 mod_rewrite 规则，它应该看起来像这样：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^product_details/(.*)$ product_details.php?name=$1
RewriteBase / 
```

尽管如果您还需要 ID，我建议将其作为参数传递给重写规则。

# wordpress - 主题我的登录配置文件和登录的不同模板

> ID：13511954
> 
> 赞同：0
> 
> 时间：2012-11-22T11:36:11.893
> 
> 标签：wordpress, templates, plugins

如何将两个不同的模板应用到个人资料页面和登录页面？我正在使用主题我的登录插件为 wordpress。

问题是无论是登录名还是个人资料，插件都会将用户带到同一页面。虽然它确实能够更改网址，但实际上登录和个人资料页面显示在同一页面上，我显然无法将两个不同的模板应用于同一页面。

在同一个 wordpress 页面上，我如何将两个不同的模板应用于它们？我可以为 profile-form 创建一个页面并为其分配一个不同的模板并显示它吗？

任何一种解决方法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T17:23:51.837

首先创建一个新模板并将其命名为 your-template.php 将此文件放在主题的根目录中。在该页面的顶部写

```
<?php
/*
Template Name: your-template-name
*/
?> 
```

保存文件。在 wordpress 中创建一个新页面并将这个新模板应用到右下角的该页面，您将找到该选项。您可以在该页面中编写自定义 HTML。如果您想创建 php 页面，那么我建议您复制登录页面并为其命名，例如 home.php 或 profile.php，然后将 your-template 应用到该页面并在登录后将用户重定向到该页面。希望这会有所帮助。

# windows-mobile - 适用于摩托罗拉 MC3100 的 Scanwedge/Datawedge

> ID：13511955
> 
> 赞同：0
> 
> 时间：2012-11-22T11:36:13.010
> 
> 标签：windows-mobile, motorola

最近我收到了摩托罗拉 MC3100 系列设备作为开发的一部分。我的要求之一是扫描条形码。在寻找 API 时，我遇到了 ScanWedge 和 DataWedge。我有几个问题，如果有人可以解决它。

1.  Scanwedge 和 Datawedge 有什么区别？哪个更适合扫描？
2.  我找不到 Scanwedge/Datawedge 的任何下载链接。可以免费下载吗？

我只能在网上找到一些参考资料。

任何帮助将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:45:19.133

ScanWedge 和 DataWedge 相同但名称不同。我不确定，但可能一个用于移动设备，另一个用于 CE。或者一个名称是由摩托罗拉创建的，另一个是由符号创建的。

如果您想完全控制何时何地可以在您的应用程序中进行扫描，您必须使用摩托罗拉 SDK (MDK) 之一。

如果设备运行 Windows CE，您需要平台 SDK 和 EMDK (http://support.symbol.com/support/searchEntry.do?languages=&rwTarget=%2FrfPlayerWidget.do&searchMode=GuidedSearch&searchString=sdk&productLine=SG_MOBILECOMPUTERS_1_1&product=SG_MC3100_1_2&document=DT_SOFTWARE_1_1&cmd =搜索&productFamily=&contextType=gs)。

EMDK 为条形码扫描仪和其他摩托罗拉相关功能提供 API。有用于 .Net、C 和 Java 的 EMDK。

平台 SDK 提供为 MC3100 CE 操作系统构建的 CE 平台文件。与 Windows Mobile 相比，Windows CE 设备在操作系统设计上是完全免费的，因此 OEM 应提供平台 SDK 以使开发人员能够针对该平台进行编程。

# css - FullCalendar 不适合移动设备

> ID：13511957
> 
> 赞同：0
> 
> 时间：2012-11-22T11:36:17.663
> 
> 标签：css, jquery-ui, jquery-mobile, fullcalendar

我在 jQuery Mobile 上做 fullcalendar，我在 chrome 的扩展上进行了测试，窗口大小调整为 320 X 480，它看起来不像下图那样完全适合，如果有事件，有些短有些更高。

如何让它完美地适应每一个移动设备？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:46:40.210

这是日历的默认行为，您在事件中添加的文本越多，您看到的该行的高度就越高。

如果您确实必须以相同的高度显示所有行，则可以对所有事件使用图标并在用户点击/单击时显示文本（绝对位置和 z-index 溢出）。

# javascript - 我可以有两个表，每个表都有不同的 REDIPIS.drag drop_option 值吗？

> ID：13511965
> 
> 赞同：1
> 
> 时间：2012-11-22T11:37:02.010
> 
> 标签：javascript, redips.drag

我正在使用出色的[REDIPS.drag 库](http://www.redips.net/javascript/redips-drag-documentation/)- 但我有多个表，我需要其中一个具有`drop_option`of `single`，另一个具有`drop_option`of `multiple`。

这可以实现吗？（我使用的是 4.x 版 - 尚未升级到新的 v5。）

提前致谢。

# asp.net-mvc-3 - 如何在 LINQ to SQL 中检查 DataContext 连接的状态？

> ID：13511966
> 
> 赞同：1
> 
> 时间：2012-11-22T11:37:01.640
> 
> 标签：asp.net-mvc-3, linq-to-sql, razor

我想知道 LINQ to SQL 上下文的连接状态。

我试过这样`db.Connection.State`。

我想检查数据库上下文的连接状态并在 mvc3 的视图中填充一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:36:07.687

db.Connection.State[属性](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.state.aspx)返回一个描述连接状态的字符串。将它传递给您的视图并没有真正的意义，除非可能是为了一些实验。

知道它是一个字符串，应该不会比返回“Hello, world!”更难。

```
public ActionResult Index()
{
    ViewData["HelloName"] = db.Connection.State;
    return View();
} 
```

# solr - Solr 4.0 在字符串字段中搜索

> ID：13511969
> 
> 赞同：3
> 
> 时间：2012-11-22T11:37:07.770
> 
> 标签：solr, indexing, migration

我们从 Solr 3.6 升级到 Solr 4.0。不幸的是，如何通过唯一键从索引中检索文档的行为显然已经改变。

在 Solr 3.6 中，以下查询检索单个文档：

```
key:conf/socc/AscottS09 
```

但是当使用具有相同文档集合（重新索引）的 Solr 4.0 时，会返回一个空的结果列表。似乎 Solr 4.0 正在处理/分析该术语`conf/socc/AscottS09`，即使它的类型是`solr.StrField`. 当用引号括起来的术语时，查询在 Solr 4.0 中按预期工作：

```
key:"conf/socc/AscottS09" 
```

架构.xml：

```
...
<fieldType name="string"  class="solr.StrField" sortMissingLast="true" mitNorms="true"/>
...
<field name="key" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
... 
```

这是一个错误还是 Solr 处理字符串字段的方式有任何变化？

编辑：我在 Solr 4.0 的迁移信息中没有找到任何相关信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:57:18.687

[https://issues.apache.org/jira/browse/SOLR-4276?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13545425#comment-13545425](https://issues.apache.org/jira/browse/SOLR-4276?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13545425#comment-13545425)

由于 Solr 4 支持查询中的正则表达式，因此查询中的标记需要转义：

```
QueryParser.escape("XXXX") 
```

我们正在使用这种方法，但这是在另一个使用 Solr/Lucene 3.6 的组件中完成的。

# plot - 以八度音阶绘制参数“地图”

> ID：13511971
> 
> 赞同：0
> 
> 时间：2012-11-22T11:37:11.630
> 
> 标签：plot, octave

我希望能够将二维点网格绘制到参数平面上。我想绘制每个点，但是根据该点的参数/坐标导致的结果以不同的方式绘制它。我正在寻找的一般效果是一种地图，可以指向图中的一个位置并说“在这个参数空间区域中，我们看到 X 发生了”，就像 Pourbaix 图的工作原理一样，但有更多颜色。有没有一种快速有效的方法可以在八度音阶中进行这种网格绘图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:07:11.423

如果没有具体的例子，很难给出一个准确的答案，但我认为你只需要绘制你的网格`imagesc()`并找到一个合适的颜色图。

# extjs - 从 EXTJS MVC 中的数据视图打开一个新窗口

> ID：13511972
> 
> 赞同：1
> 
> 时间：2012-11-22T11:37:17.413
> 
> 标签：extjs, extjs4, extjs-mvc

我试图在 EXTJS MVC 中打开一个新窗口。单击数据视图中的图标时会打开此窗口。我能够在萤火虫中看到对窗口的调用，但我只是在应用程序中得到一个空白屏幕。代码如下：

```
Ext.define('App.view.Test', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.test',
    initComponent: function () {

        var msgTxt = GENHTML.msgTxtOpen + LANG.ADDCOURSEF1 + GENHTML.msgTxtClose2

        var required = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>';

        var test_form = {
            xtype: 'panel',
            itemId: 'TESTPANEL',
            width: 400

            cls: 'msg effect1',
            layout: 'form',
            border: false,
            items: [{
                xtype: 'panel',
                //cls : 'winTitle',
                html: msgTxt,
                border: 0
            }, {
                xtype: 'form',
                itemId: 'TESTFORM',
                buttons: [{
                    text: LANG.BTSUBMIT,
                    iconCls: 'icon-submit-tb',
                    iconAlign: 'right',
                    cls: 'tip-btn',
                    id: 'BTGENSUBMIT',
                    action: 'buttonAction'
                }],
                items: [{
                    xtype: 'container',
                    anchor: '100%',
                    layout: 'fit',
                    items: [{
                        xtype: 'container',
                        baseCls: 'x-plain',
                        bodyStyle: 'padding: 5px 0 5px 5px',
                        items: [{
                            xtype: 'displayfield',
                            value: LANG.EDITCOURSEFL1
                        }, {
                            xtype: 'displayfield',
                            value: '<div class = "spacer10"/>'
                        }, {
                            xtype: 'textfield',
                            itemId: 'title',
                            name: 'title',
                            allowBlank: false,
                            fieldLabel: LANG.CATALOGUEWINFL1,
                            afterLabelTextTpl: required,
                            vtypeText: LANG.GENVT

                        }]
                    }]
                }]

                var config = {
                    xtype: 'window',
                    title: 'Edit Courses',
                    layout: 'fit',
                    itemID: 'TESTWINDOW',
                    id: 'TESTWINDOW',
                    closable: true,
                    modal: true,
                    items: [test_form]
                }

                var holder = Ext.getCmp('center');
                holder.remove(0);
                holder.add(Ext.apply(config));

                this.callParent(arguments);
            } 
```

控制器 ：

```
onTestViewSelectionChange: function (view, record, h, ind, evt) {

    var edit = evt.getTarget('a.icon-edit-32');
    if (edit != null) {

        var view = Ext.create('Campus.view.Test');
        view.show(record);
    }
} 
```

我不确定我是否正确创建了窗口，以及是否正确调用它。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:26:37.967

您的代码中有一些错误：

首先是使用**[show](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-method-show)**。我想你已经覆盖了它？我会选择`loadRecord()`并保持`show()`原样。

```
var view = Ext.create('Campus.view.Test');
view.show(record); 
```

其次是你的电话在`Ext.apply()`这里什么都不做。你根本不需要它。

```
holder.add(Ext.apply(config)); 
```

因此，我猜在您的情况下，将一些逻辑直接放入您的视图中，而不是全部放入控制器中是完全可以的。但请注意，我只知道您应用程序的一小部分。

第三是你需要调用`show()`一个窗口实例，因为它们默认是不可见的。但是您可以设置**[autoShow](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-autoShow)**属性，例如`autoShow: true`

四是`id`用你来设置道具是个坏习惯。如果可能，不要这样做并使用**[Ext.ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)**。

# java - 如何在 GET 请求上初始化 bean 属性？

> ID：13511974
> 
> 赞同：1
> 
> 时间：2012-11-22T11:37:28.753
> 
> 标签：java, database, jsf, shop

我希望索引页面直接显示产品列表，比如前 10 名最新的产品。我该怎么做呢？如何让 JSF 在 GET 请求上运行 backingbean 中的方法并显示结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:48:58.330

创建一个请求/会话范围的 bean，`@PostConstruct`使用要显示的数据更新属性，从 JSF 访问属性。

# c++ - 将字符串从组合框转换为双精度

> ID：13511976
> 
> 赞同：0
> 
> 时间：2012-11-22T11:37:34.350
> 
> 标签：c++, visual-c++, mfc

我正在尝试执行以下操作：

```
CCombobox m_obs;
CString temp;

m_obs.GetWindowTextA(temp);
double newObs = strtod(temp, NULL); 
```

但是，我得到的错误`strtod()`是不存在合适的转换函数 from `CString`to `const char *`。

如何将字符串从组合框转换为双精度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:35:08.803

尝试改为`CStringA`强制使用 Ansi 版本，否则 CString 取决于编译器开关，其中 UNICODE 是默认的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:43:38.343

`strtod()`期待`const char * str`第一个论点。你应该做：

```
const char* cstr = (LPCTSTR)temp;
double newObs = strtod(cstr, NULL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:29:14.683

感谢您的回复。

对于 UNICODE 项目，请执行以下操作：

```
double NewObs = wcstod(temp, NULL); 
```

# sql - 如何对批处理文件的输入进行排序

> ID：13511982
> 
> 赞同：2
> 
> 时间：2012-11-22T11:38:03.660
> 
> 标签：sql, batch-file, sqlcmd

我正在使用以下脚本来执行一堆**.sql**语句。

```
@echo off
ECHO %USERNAME% started the batch process at %TIME%  >output.txt

for %%s in (*.sql)  do (
sqlcmd.exe  -S.\ -E -i "%%s" >>output.txt
    )
pause 
```

但是，我想确保文件已排序（名称），因为我认为我不能保证列表是有序的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:46:11.447

您可以使用它按名称顺序循环它们

```
for /f %%s in ('dir *.sql /b /o:n') do (
sqlcmd.exe  -S.\ -E -i "%%s" >>output.txt
    )
pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:59:29.783

不用担心，FOR 按名称对文件进行排序（处理），但如果您想要另一种方式，您也可以对输出文件进行排序：

```
@echo off
ECHO %USERNAME% started the batch process at %TIME%  >output.txt

FOR %%s in ("*.sql")  do (sqlcmd.exe -S.\ -E -i "%%s" >> "%TEMP%\output.txt")

TYPE "%TEMP%\output.txt" | SORT > ".\Final_Output.txt"

Pause&Exit 
```

# regex - 简单的 Mod_rewrite 正则表达式调试

> ID：13511983
> 
> 赞同：2
> 
> 时间：2012-11-22T11:38:10.903
> 
> 标签：regex, .htaccess, mod-rewrite

很抱歉不得不问一个看似非常简单的问题，但我在其他任何地方都找不到答案。

我有以下带有此重写规则的 .htaccess 文件：

```
RewriteRule ^project/(.*)/(.*)$ project.php?projectID=$1&pageID=$2 
```

例如，设计为采用**domain.com/project/10/1**格式的 url ，它将重定向并显示项目 10 的页面 1。

该选项还存在仅查看**domain.com/project/10/**而不指定页码，如果缺少它将默认为第一页。

我对 RegEx 的问题是这种默认行为需要 projectID 的尾部斜杠，否则它会引发 404。

如何修改正则表达式，使其不需要（但*可以选择）示例“* **domain.com/project/10/** ”末尾的斜杠以成功重写为“ **project.php?projectID=$1** '。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:51:45.380

你可以写

```
^project/(.*)/?(.*)/?$ 
```

问号表示前面的符号是可选的

# python - 如何通过编写python脚本将所有py文件编译为文件夹中的pyc文件？

> ID：13511997
> 
> 赞同：11
> 
> 时间：2012-11-22T11:38:44.883
> 
> 标签：python

我在win系统上工作，我想知道一种方法可以使用可以在cmd行中运行的python脚本来批量编译py文件。我写了一个简单的python代码。

```
import py_compile, os, glob
dir = 'D:\\FAS\\config'
for f in glob.glob(dir + '\\*.py'):
    py_compile.compile(f)
    print "Success compile the file:   %s" % f 
```

它工作不方便，无法编译文件夹子文件夹中的文件。我希望你的帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T11:42:54.913

```
import compileall

compileall.compile_dir('D:/FAS/config', force=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-06T10:36:26.203

***从命令行编译当前目录和子目录中存在的所有文件***，您可以简单地使用以下命令。

```
python3 -m compileall . -q 
```

**如果您想要已编译文件的列表，请删除 -q。**

您可以使用 -l in**停止子目录中的递归**

```
python3 -m compileall . -l 
```

您也可以为此编写脚本。

```
import compileall

compileall.compile_dir('D:/FAS/config', force=True) 
```

即使时间戳是最新的，强制也会重建。

[你可以在这里读更多关于它的内容](https://docs.python.org/3/library/compileall.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-21T21:11:52.557

我在升级库模块时遇到了类似的问题。我在不同的 git 分支上有不同的模块版本，当我切换分支时，即使我使用 compileall 重新编译，它们也会停止工作。

我的简单解决方案是从库中删除所有`.pyc`文件并运行脚本，以便它自己编译所有必要的模块。有效！！

删除pyc文件的简单命令`find libs/ -name *.pyc -exec rm {} \;`