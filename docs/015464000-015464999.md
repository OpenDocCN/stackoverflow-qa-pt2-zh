# StackOverflow 问答 15464000-15464999

# c# - 如何优化此 LINQ to EF/Sql 查询（多对多关系）？

> ID：15464009
> 
> 赞同：4
> 
> 时间：2013-03-17T17:43:38.687
> 
> 标签：c#, sql, linq, entity-framework

我正在实现一个权限系统，其中用户在角色中，然后这个角色有权限，我正在考虑查询它们的最快方法：

![在此处输入图像描述](../Images/75bd6dc1b69dedf776efa3f72d7b6e8b.png)

目前我有以下 LINQ 查询：

```
var grant = db.Permissions.Any(p => p.Group == group && p.PermissionKey == permission
&& !p.Roles.Any(r => !r.IsAllowed && r.Role.Users.Any(u => u.UserName == user.Identity.Name)) 
&& p.Roles.Any(r => r.IsAllowed && r.Role.Users.Any(u => u.UserName == user.Identity.Name)));

return grant; 
```

在 EF 缓存实体后，这大约需要 1-2 毫秒（第一次需要 15 到 20 毫秒）。这不是很慢，但是因为这可以查询很多（例如，如果允许用户查看该项目，菜单系统会检查每个项目）**我问是否有更快的可能？**

目前我唯一能想到的就是创建一个 User<->Permission 缓存以在第一次调用之后完全摆脱查询，但是缓存对我来说始终是最后的手段（尤其是当您想到如果权限也发生变化，则清除它。）。

**更新：**按照 Marcin 的建议使用`Any`，但速度并不快......

**更新 2：**我将 移动`IsAllowed`到映射表并调整查询以仅使用一个...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:52:21.517

您应该将每个`Count() > 0`语句更改为`Any`方法调用，例如：

```
r => r.Users
      .Count(u => u.UserName == user.Identity.Name) > 0 
```

应替换为：

```
r => r.Users
      .Any(u => u.UserName == user.Identity.Name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:01:17.313

您是否尝试过在数据库中创建索引视图？

```
CREATE VIEW mySchema.UserRolePermission
WITH SCHEMABINDING
/* your SELECT goes here */
GO
CREATE UNIQUE CLUSTERED INDEX MyIndexName
ON mySchema.UserRolePermission (UserName, PermissionKey);
GO 
```

然后，您的 LINQ2SQL 查询将改为从此视图中直接选择。它可能会更快，因为 SQL Server 将在您用于进行搜索的 UserName 和 PermissionKey 字段上创建索引。由于这是一个权限系统，我假设您不会经常插入这些表（索引视图可能会减慢插入速度），但您会更频繁地从中读取。

由于 EF 缓存，第二次触发此查询也可能不会更快，但可能是因为 SQL 服务器缓存。不确定，但可能值得一试。

# android - Robotium：第二次测试未启动活动

> ID：15464015
> 
> 赞同：0
> 
> 时间：2013-03-17T17:43:56.520
> 
> 标签：android, junit, robotium

我已经能够使用一种测试方法成功运行 android junit 测试，但是当涉及多个测试方法时，它只运行第一个测试，并且在 tearDown 之后，活动不会重新启动以进行后续测试。结果，我所有的测试方法都失败了，保存第一个。

在调试时，我注意到 setUp 方法在运行第一个 testMethod 之前成功启动了 MainActivity，但是在第二个 testMethod 开始之前重新访问时，相同的活动不会重新启动。代码如下：

```
package PACKAGE.test;

import com.jayway.android.robotium.solo.Solo;
import android.test.ActivityInstrumentationTestCase2;

public class Login extends ActivityInstrumentationTestCase2 {
private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "*.*.MainActivity";
private static Class<?> launcherActivityClass;
static {
    try {
        launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
    } 
    catch (ClassNotFoundException e) {
        throw new RuntimeException(e);
    }
}

    @SuppressWarnings("unchecked")
    public Login() throws ClassNotFoundException {
    super(launcherActivityClass);
}

private Solo solo;

public void setUp() throws Exception {
    super.setUp();
    solo = new Solo(getInstrumentation(), getActivity());
}

@Test
public void testLoginScreen() {
    solo.enterText(0, "user-name");
    solo.enterText(1, "pwd");
    solo.clickOnButton("Login");
    solo.waitForActivity("*.*.*.nextActivity");
    solo.clickOnRadioButton(2);
}

@Test
public void testSearch(){
    solo.enterText(0, "user-name");
    solo.enterText(1, "pwd");
    solo.clickOnButton("Login");
    solo.waitForActivity("*.*.*.nextActivity");
    solo.clickOnRadioButton(1);
}

public  void    tearDown()  throws  Exception  { 
        solo.finishOpenedActivities();
        super.tearDown();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-03T20:22:54.690

您可能需要 @Override 您的拆卸方法

```
@Override
public void tearDown()  throws  Exception  { 
    solo.finishOpenedActivities();
    super.tearDown();
} 
```

# weka - 无法确定为 arff（原因：java.io.IOException：过早结束行，读取令牌 [EOL]，第 1182 行

> ID：15464017
> 
> 赞同：2
> 
> 时间：2013-03-17T17:44:00.013
> 
> 标签：weka, ioexception, arff

我有一些数据，我正在处理它并以一种生成 .arff 文件的方式对其进行转换，如下所示：

```
............

@attribute murdered_to numeric
@attribute envy.although_it numeric
@attribute vampire_that numeric
@attribute list_without numeric
@attribute award_at numeric
@attribute @% numeric
@attribute the_addict numeric
@attribute the_drag numeric
@attribute card_against numeric
@attribute communications_mainly numeric
@attribute clue_for numeric
@attribute justified.a numeric
@attribute superb_learning numeric
@attribute ford_escape numeric
@attribute a_life-changing numeric
.
.
. 
```

这只是属性列表的一部分。我需要在 weka 中打开 arff 文件，但它会引发主题中提到的错误。错误指向该行：

```
@attribute the_addict numeric 
```

我无法在引发错误的文件中找到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:13:26.343

我很确定错误在您引用的那一行之前

```
@attribute @% numeric 
```

您的属性名称无效，它必须以字母字符开头，如*etov*所指向的 ARFF 文档中所指定。

> @attribute 语句的格式为：
> 
> ```
> @attribute <attribute-name> <datatype> 
> ```
> 
> 其中必须以字母字符开头。如果名称中要包含空格，则必须引用整个名称。

# ios - 使用 Interface Builder 关闭 UITextField 上的键盘

> ID：15464024
> 
> 赞同：13
> 
> 时间：2013-03-17T17:45:03.580
> 
> 标签：ios, objective-c, uitextfield, uikeyboard

我见过这个，但不记得当按下返回键时，界面生成器究竟使用了什么绝地技术来关闭 uikeboard。任何人都知道如何做到这一点？

请不要发布有关使用 UITextFieldDelegate 的信息，我知道该方法，我只对在没有任何其他逻辑或协议构造的情况下按下返回键时强制关闭键盘感兴趣。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T18:30:28.750

在您的文本字段的 xib 中将 IBAction 与“退出时结束”事件连接起来

![](../Images/1abd9bb25d3ce9d1278d8ef26cd8f427.png)

```
-(IBAction)textFieldDidEndOnExit:(UITextField *)sender
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T06:07:39.623

```
override func touchesBegan(touches: Set<UITouch>, withEvent event: UIEvent?) {

    if let touch = touches.first{
        view.endEditing(true)
       }
} 
```

# iphone - 如何从当前视图控制器的实现文件中加载另一个视图控制器？

> ID：15464025
> 
> 赞同：8
> 
> 时间：2013-03-17T17:45:14.273
> 
> 标签：iphone, ios, objective-c, model-view-controller, ios5

我需要创建一个具有登录/注册表单和自定义 Google 地图的应用程序。我是 iOS 编程的新手，并试图快速学习这个应用程序所需的东西。

所以，我已经创建了登录表单的前端和后端，它可以工作。我有一个由“登录”按钮触发的操作，该按钮验证凭据并触发错误或显示谷歌地图。

我想在另一个控制另一个 xib 文件的视图控制器中显示谷歌地图。我创建了视图控制器和 xib 文件。

我的问题是如何从放置在当前视图控制器的实现文件中的操作加载另一个视图控制器？

现在，我有这个代码：

```
UIViewController *mapViewController =
                [[BSTGMapViewController alloc] initWithNibName:@"BSTGMapViewController"
                                                           bundle:nil]; 
```

我怎样才能使它成为窗口的“根视图控制器”并且可能具有过渡（考虑到我的逻辑是好的）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-17T17:51:37.000

如果你想`ViewController`从另一个打开，那么你应该在你的`IBAction`. `viewController`不过，制作 as 属性是个好主意。

**第一视图控制器.h**

```
@class SecondViewController;

@interface FirstViewController : UIViewController

@property(strong,nonatomic)SecondViewController *secondViewController;
@end 
```

**第一视图控制器.m**

```
-(IBAction)buttonClicked:(id)sender{
    self.secondViewController =
                    [[SecondViewController alloc] initWithNibName:@"SecondViewController"
                                                               bundle:nil];
   [self presentViewController:self.secondViewController animated:YES completion:nil]; 

} 
```

你应该`rootViewController`在你的`AppDelegate`类中制作一个 viewController 像这样

```
YourFirstViewController *firstViewController=[[YourFirstViewController alloc]initWithNibName:@"YourFirstViewController" bundle:nil];

self.window.rootViewController=yourFirstViewController; 
```

# android - 基于Googlemap V2 android中的缩放调整标记大小

> ID：15464041
> 
> 赞同：2
> 
> 时间：2013-03-17T17:46:16.557
> 
> 标签：android, google-maps

我在地图上放了一些标记。大小在缩放级别 19 上恰到好处（我制作了具有真实大小的位图并将它们传递给标记）。当用户在地图中放大或缩小时，如何在谷歌地图 v2 上重新调整标记的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:53:04.187

如果您不需要点击和信息窗口，我建议您改用[GroundOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/GroundOverlay)。

# javascript - 在 Handlebars.js 中循环遍历多维数组

> ID：15464042
> 
> 赞同：35
> 
> 时间：2013-03-17T17:46:20.317
> 
> 标签：javascript, html, handlebars.js

我让服务器传回这个 JSON，但我不确定如何遍历 Handlebars 中的二维数组。

```
"userSurvey":[[1],[2],[3]] 
```

我知道要使用`{{#each userSurvey}}`，但是我将如何处理`usersurvey`对象内部的数组？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-17T17:48:45.580

您必须循环 2 次：

```
{{#each userSurvey}}
  {{#each this}}
    {{ this }}
  {{/each}}
{{/each}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-25T13:45:21.377

在这种特殊情况下，如果您只想渲染“123”，您可以这样做：

```
{{#each userSurvey}}
    {{this.[0]}}
{{/each}} 
```

甚至更简单，因为数组会自动转换为字符串：

```
{{#each userSurvey}}
    {{this}}
{{/each}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T12:35:45.140

```
 {{#each Arr}}
        {{#each this}}
            <label>{{this.[0]}}</label> {{this.[1]}}<br>
        {{/each}}
    {{/each}} 
```

这是我循环数组数组的简单示例:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-11T06:15:06.163

对 obj 使用 #with 助手

```
{ catg: [ 'java', 'c', 'c++' ],
  quesarray: [ [ 2, 1 ], [ 0, 2, 10, 5, 11, 12 ], [ 7, 5, 3, 8, 0 ] ],
  _id: 5d778d52d410984dc4e3e278,
  username: 'student@gmail.com' } 
```

如果您想明智地访问数组 quesarray 索引，请执行此操作

```
{{#each qset}}
{{#with quesarray}}
{{[2]}}
{{/with}}
{{/each}} 
```

输出将是 7, 5, 3, 8, 0

# ruby-on-rails - 如何按用户的电子邮件地址过滤 rails 对象？

> ID：15464044
> 
> 赞同：1
> 
> 时间：2013-03-17T17:46:31.797
> 
> 标签：ruby-on-rails, model, controller

我有以下模型：

```
class Iosapp < ActiveRecord::Base
  belongs_to :user
  attr_accessible :active, :featured, :name, :partner

  validates :name, :presence => true
end 
```

我通过以下方式引用与视图中的 Iosapp 对象关联的用户：

```
<%= @iosapp.user.email %> 
```

在控制器中，我目前有以下内容。但是如何更改它以使其仅返回具有特定电子邮件地址的对象（例如 test@test.com）？

```
@iosapps = Iosapp.all 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:48:32.050

尝试这个：

```
@iosapps = Iosapp.joins(:user).where(:users => {:email => 'test@test.com'}).all 
```

**编辑：**

或者，如果您希望用户数据与 iosapp 数据一起返回，那么：

```
@iosapps = Iosapp.includes(:user).where(:users => {:email => 'test@test.com'}).all 
```

# twitter-bootstrap - 工具提示不显示

> ID：15464046
> 
> 赞同：1
> 
> 时间：2013-03-17T17:46:38.290
> 
> 标签：twitter-bootstrap

我想在我最新的项目中使用 Twitter Bootstrap 的工具提示。我的代码如下：

```
<img data-toggle="tooltip" data-placement="top" src="..." alt="post title" title="post title"> 
```

它不起作用，尽管我会在我的 html 中包含`bootstrap.min.js`and 。`bootstrap.css`我还尝试使它与 JavaScript 一起工作：

```
$('img').hover(function() {
    $(this).tooltip({
        placement: 'left'
    })
}); 
```

没有什么。有趣的是，正常的“白色”工具提示（浏览器的默认设置）也不会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:04:25.147

我不确定您正在加载什么文件等，但这里是如何使用它：

[http://jsfiddle.net/pkVjd/](http://jsfiddle.net/pkVjd/)

```
<div class="test" data-toggle="tooltip" data-placement="top" title="" data-original-title="Tooltip on top"></div>

$('.test').tooltip(); 
```

# backbone.js - 模型内的backbonejs永无止境的收集

> ID：15464048
> 
> 赞同：0
> 
> 时间：2013-03-17T17:46:44.017
> 
> 标签：backbone.js

为什么backbonejs 在模型中创建大量集合，我不知道它什么时候停止。

以[http://backbonetutorials.com/what-is-a-collection/](http://backbonetutorials.com/what-is-a-collection/)中的这个例子为例。如果您查看控制台并继续打开 d 对象，则其中总会有一个“集合”对象，它只是再次重复相同的对象。

我不知道这是一个错误还是什么，但我不太确定这是正常的。

有人请赐教。谢谢。

```
var Song = Backbone.Model.extend({
    defaults: {
        name: "Not specified",
        artist: "Not specified"
    },
    initialize: function(){
        console.log("Music is the answer");
    }
});

var Album = Backbone.Collection.extend({
    model: Song
});

var song1 = new Song({ name: "How Bizarre", artist: "OMC" });
var song2 = new Song({ name: "Sexual Healing", artist: "Marvin Gaye" });
var song3 = new Song({ name: "Talk It Over In Bed", artist: "OMC" });

var myAlbum = new Album([ song1, song2, song3]);
console.log( myAlbum.models ); // [song1, song2, song3] 
```

@ryan

是的，我知道模型可能包含对其集合的引用。但是有这种似乎没有尽头的链接对象有点奇怪。对象树是这样的：

```
[d, d ,d]
   0 > d
        > collection
            > models
                 0 > d
                      > collection
                           > models
                                0 > d
                                     > collection
                                           > models
                                                  0 > d
                                                   ...
                                                   keeps on and on and on 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:52:12.057

没有任何错误。它们只是参考。Every`Song`包含对其集合的引用，`Album`，一旦它被添加到该集合中。

更新。也许[这个简单的例子](http://jsfiddle.net/hMwqd/)会帮助你理解没有什么是不正常的。这基本上是骨干正在做的事情。它的唯一目的是使其易于导航`collection -> user`或导航`user -> collection`。

```
var site = { name: 'stackoverflow' };
var users = [{ name: 'pneftali' }];
for (var i = 0; i < users.length; i++) {
    users[i].site = site;
}
site.users = users;
console.log(site.users); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:05:22.993

每个`model`都有参考`collection`。并且每个`collection`都必须引用它的`models`. Javascript 仅保留对集合的引用。开发人员工具栏仅向您显示参考的详细信息。它们实际上并没有相互嵌套。有相同的对象。`cid`您可以从不改变链条的模型中确认这一点。

# jquery - 试图用 JS 保持切换状态

> ID：15464051
> 
> 赞同：0
> 
> 时间：2013-03-17T17:47:05.717
> 
> 标签：jquery, cookies

我试图保留 jQuery 的切换状态，我无法将 cookie 设置为不使用`.toggle()`

我的代码

```
jQuery(document).ready(function($) {
    $("#switch").click(function(event){
        if ($("#navbar").css("display")=='block') {
            $("#navbar").hide('fast');
            $(this).removeClass('close').addClass('open');
            $(this).children().children().html('+');
        } else {
            $("#navbar").show('fast');
            $(this).removeClass('open').addClass('close');
            $(this).children().children().html('-');
        }
    });
}); 
```

[**演示**](http://jsfiddle.net/kac83/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:51:11.967

你只需要一个`children()`。因为你的`+`文本跨度在点击内`<span>`（只是跨度的一个孩子）..

```
$(this).children().html('+'); 
```

尝试这个

```
jQuery(document).ready(function($) {
  $("#switch").click(function(event){
    if ($("#navbar").css("display")=='block') {
        $("#navbar").hide('fast');
        $(this).removeClass('close').addClass('open');
        $(this).children().html('+');
    } else {
        $("#navbar").show('fast');
        $(this).removeClass('open').addClass('close');
        $(this).children().html('-');
    }
  });
}); 
```

[在这里摆弄](http://jsfiddle.net/kac83/2/)

# css - CSS过渡效果使图像模糊/将图像移动1px，在Chrome中？

> ID：15464055
> 
> 赞同：166
> 
> 时间：2013-03-17T17:47:28.853
> 
> 标签：css, image, hover, positioning, translate-animation

我有一些 CSS 在悬停时，CSS 过渡效果会移动一个 div。

正如您在示例中看到的那样，问题是`translate`过渡具有可怕的副作用，即使 div 中的图像向下/向右移动 1px（并且可能会稍微调整大小？），因此它看起来不合适并且失焦...

故障似乎在应用悬停效果的整个过程中都存在，并且从反复试验的过程中，我可以肯定地说似乎只在平移转换移动 div 时发生（也应用了框阴影和不透明度，但对删除时的错误）。

该问题似乎仅在页面具有滚动条时发生。因此，只有一个 div 实例的示例很好，但是一旦添加了更多相同的 div 并且页面因此需要滚动条，问题再次出现......

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2013-03-18T08:22:55.877

### 2020 年更新

*   如果您遇到图像模糊的问题，请务必检查下面的答案，尤其是`image-rendering`CSS 属性。
*   [为了获得最佳实践可访问性和 SEO 明智，您可以使用object-fit](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit) CSS 属性将背景图像替换为`<img>`标签。

* * *

### 原始答案

**在你的CSS**中试试这个：

```
.your-class-name {
    /* ... */
    -webkit-backface-visibility: hidden;
    -webkit-transform: translateZ(0) scale(1, 1);
} 
```

这样做的目的是使该部门表现得“更加二维”。

*   背面是默认绘制的，以允许使用旋转等翻转事物。如果您只向左、向右、向上、向下、缩放或旋转（逆时针）顺时针，则没有必要这样做。
*   平移 Z 轴以始终具有零值。
*   Chrome 现在可以处理`backface-visibility`并且`transform`没有`-webkit-`前缀。我目前不知道这会如何影响其他浏览器的渲染（FF、IE），所以请谨慎使用不带前缀的版本。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2013-10-06T17:52:55.613

您需要对元素应用 3d 变换，因此它将获得自己的复合层。例如：

```
.element{
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
} 
```

或者

```
.element{
    -webkit-transform: translate3d(0,0,0);
    transform: translate3d(0,0,0);
} 
```

有关图层创建标准的更多信息，您可以在此处阅读：[Chrome 中的加速渲染](http://www.html5rocks.com/en/tutorials/speed/layers/)

* * *

**一个解释：**

示例（悬停绿色框）：

*   [问题：过渡可能会导致兄弟元素闪烁效果（OSx Lion、Chrome 30）](http://codepen.io/sol0mka/pen/AcDFE)
*   [解决方案：一个元素在它自己的复合层上](http://codepen.io/sol0mka/pen/LlgJH)

当您在元素上使用任何过渡时，它会导致浏览器重新计算样式，然后重新布局您的内容，即使过渡属性是可视的（在我的示例中它是不透明度）并最终绘制一个元素：

![截屏](../Images/c343b95ed89e59b5f529995927611b30.png)

这里的问题是内容的重新布局，可以在转换发生时在页面上产生“跳舞”或“闪烁”元素的效果。如果您将进入设置，选中“显示复合图层”复选框，然后将 3d 变换应用于元素，您将看到它拥有自己的图层，该图层带有橙色边框。

![截屏](../Images/6de1c4d722e9e5c3d3e733b5780e9529.png)

元素获得自己的图层后，浏览器只需在过渡时合成图层，无需重新布局甚至绘制操作，因此必须解决问题：

![截屏](../Images/7b68828e0c41faf5f6f6ac9639f48b0b.png)

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2015-02-17T15:48:42.000

嵌入的 youtube iframe 也有同样的问题（翻译用于居中 iframe 元素）。**在尝试重置 css 过滤器**和魔法发生之前，上述解决方案均无效。

**结构：**

```
<div class="translate">
     <iframe/>
</div> 
```

**风格[之前]**

```
.translate {
  transform: translateX(-50%);
  -webkit-transform: translateX(-50%);
} 
```

**风格[后]**

```
.translate {
  transform: translateX(-50%);
  -webkit-transform: translateX(-50%);
  filter: blur(0);
  -webkit-filter: blur(0);
} 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2015-03-05T16:13:41.447

我推荐了一个我在最新浏览器上测试过的实验性新属性 CSS，它很好：

```
image-rendering: optimizeSpeed;             /*                     */
image-rendering: -moz-crisp-edges;          /* Firefox             */
image-rendering: -o-crisp-edges;            /* Opera               */
image-rendering: -webkit-optimize-contrast; /* Chrome (and Safari) */
image-rendering: optimize-contrast;         /* CSS3 Proposed       */
-ms-interpolation-mode: nearest-neighbor;   /* IE8+                */ 
```

有了这个，浏览器就会知道渲染算法

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-12-14T10:11:57.613

刚刚找到了元素在转换时变得模糊的另一个原因。我`transform: translate3d(-5.5px, -18px, 0);`曾经在加载元素后重新定位元素，但是该元素变得模糊。

我尝试了上面的所有建议，但事实证明这是由于我对其中一个翻译值使用了十进制值。整数不会导致模糊，我离整数越远，模糊就越严重。

即`5.5px`模糊元素最多，`5.1px`最少。

只是想我会把这个扔在这里，以防它对任何人有帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-12T19:15:14.023

我使用逐步过渡欺骗了问题，不顺利

```
transition-timing-function: steps(10, end); 
```

这不是解决，而是作弊，不能到处应用。

我无法解释它，但它对我有用。没有其他答案可以帮助我（OSX、Chrome 63、非视网膜显示器）。

[https://jsfiddle.net/tuzae6a9/6/](https://jsfiddle.net/tuzae6a9/6/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-29T02:12:54.580

对我来说，现在是 2018 年。唯一解决我的问题（悬停时穿过图像的白色故障闪烁线）是将其应用于我的链接元素，该元素包含具有`transform: scale(1.05)`

```
a {
   -webkit-backface-visibility: hidden;
   backface-visibility: hidden;
   -webkit-transform: translateZ(0) scale(1.0, 1.0);
   transform: translateZ(0) scale(1.0, 1.0);
   -webkit-filter: blur(0);
   filter: blur(0);
}
a > .imageElement {
   transition: transform 3s ease-in-out;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-21T11:51:26.913

我已经尝试了大约 10 种可能的解决方案。将它们混合在一起，它们仍然无法正常工作。最后总是有 1px 的抖动。

我通过减少过滤器的转换时间来找到解决方案。

这没有用：

```
.elem {
  filter: blur(0);
  transition: filter 1.2s ease;
}
.elem:hover {
  filter: blur(7px);
} 
```

解决方案：

```
.elem {
  filter: blur(0);
  transition: filter .7s ease;
}
.elem:hover {
  filter: blur(7px);
} 
```

在小提琴中试试这个：

```
.blur {
  border: none;
  outline: none;
  width: 100px; height: 100px;
  background: #f0f;
  margin: 30px;
  -webkit-filter: blur(10px);
  transition: all .7s ease-out;
  /* transition: all .2s ease-out; */
}
.blur:hover {
  -webkit-filter: blur(0);
}

.blur2 {
  border: none;
  outline: none;
  width: 100px; height: 100px;
  background: tomato;
  margin: 30px;
  -webkit-filter: blur(10px);
  transition: all .2s ease-out;
}
.blur2:hover {
  -webkit-filter: blur(0);
}
```

```
<div class="blur"></div>

<div class="blur2"></div>
```

我希望这可以帮助别人。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-11T10:42:33.627

缩放到两倍并降低到一半`zoom`对我有用。

```
transform: scale(2);
zoom: 0.5; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-05T14:15:40.543

尝试`filter: blur(0);`

它对我有用

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-01-15T20:43:11.300

这些都不起作用，对我有用的是缩小图像。

因此，根据您想要图像的大小或图像的分辨率，您可以执行以下操作：

```
.ok {
      transform: perspective(100px) rotateY(0deg) scale(0.5);
      transition: transform 1s;
      object-fit:contain;
}
.ok:hover{
      transform: perspective(100px) rotateY(-10deg) scale(0.5);
}

/* Demo Preview Stuff */
.bad {
   max-width: 320px;
   object-fit:contain;
   transform: perspective(100px) rotateY(0deg);
   transition: transform 1s;
}
.bad:hover{
      transform: perspective(100px) rotateY(-10deg);
}

div {
     text-align: center;
     position: relative;
     display: flex;
}
h3{
    position: absolute;
    bottom: 30px;
    left: 0;
    right: 0;
}

.b {
    display: flex;
}
```

```
<center>
<h2>Hover on images</h2>
<div class="b">
<div>
  <img class="ok" src='https://www.howtogeek.com/wp-content/uploads/2018/10/preview-11.png'>
  <h3>Sharp</h3>
</div>

<div>
  <img class="bad" src='https://www.howtogeek.com/wp-content/uploads/2018/10/preview-11.png'>
  <h3>Blurry</h3>
</div>

</div>

</center>
```

图像应该按比例缩小，确保你有一个大的图像分辨率

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-01-29T23:36:06.123

我对模糊文本也有类似的问题，但只有后面的 div 受到影响。出于某种原因，在我进行转换之后的下一个 div 是模糊的。

我尝试了此线程中推荐的所有内容，但没有任何效果。对我来说，**重新排列我的 div**有效。我将模糊以下 div 的 div 移动到父母 div 的末尾。

如果有人知道为什么，请告诉我。

```
#before
<header class="container">
      <div class="transformed div">
          <span class="transform wrapper">
            <span class="transformed"></span>
            <span class="transformed"></span>
          </span>
       </div>
       <div class="affected div">
       </div>
     </header>

#after
<header class="container">
   <div class="affected div">
   </div>
  <div class="transformed div">
      <span class="transform wrapper">
        <span class="transformed"></span>
        <span class="transformed"></span>
      </span>
   </div>

 </header> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-01T09:13:40.223

```
filter: blur(0)
transition: filter .3s ease-out
transition-timing-function: steps(3, end) // add this string with steps equal duration 
```

`.3s`通过将转换持续时间的值设置为等于转换时间步长，我得到了帮助`.3s`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-22T00:10:23.923

在关键帧动画中为“转换”设置动画时，仅在 Chrome（Windows 和 Mac）中发生模糊。对我来说，-webkit-optimize-contrast 设置只是部分帮助。为了获得最佳效果，我还必须对 scaleX 使用“魔术值”（略大于 1 而不是 1）。

这是有效的代码：

```
img {
  image-rendering: -webkit-optimize-contrast;
}

@keyframes scale-in-left {
  0% {
    transform: scaleX(0);
    opacity: 0;
  }
  100% {
    transform: scaleX(1.000001);
    opacity: 1;
  }
} 
```

这是不起作用的代码（导致 Chrome 中的图像模糊）：

```
@keyframes scale-in-left {
  0% {
    transform: scaleX(0);
    opacity: 0;
  }
  100% {
    transform: scaleX(1);
    opacity: 1;
  }
} 
```

最后，“工作”代码消除了大部分模糊，但不是全部。Safari和Firefox在没有任何特殊设置的情况下仍然更清晰。

另请注意，仅调整浏览器窗口的大小就可以清除不需要的模糊，这表明可能是某些原因导致 Chrome 无法执行最终渲染过程 (?)。

# php - PHP脚本，SQL插入错误

> ID：15464057
> 
> 赞同：0
> 
> 时间：2013-03-17T17:47:49.563
> 
> 标签：php, mysql

我正在运行一个 wamp 服务器并创建了一系列 html 网页，用户输入的数据然后通过 PHP 脚本提交到 SQL 数据库。我用`Id. set to INT auto increment Crime. and Suspect. set as VARCHAR(40)`. 我可以连接到数据库，但现在当我尝试插入时出现错误：

> '插入问题：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'case (Id, Case, Suspect) VALUES('NULL', 'test', 'test12')' 附近使用正确的语法

所以我知道这是插入功能的问题，但无法修复它！

```
<?php
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$db = 'fid';

$case = (isset($_POST['case'])? $_POST['case']:"None");
$suspect= (isset($_POST['suspect'])? $_POST['suspect']:"None");

$conn = mysql_connect($dbhost,$dbuser,$dbpass);
if (!$conn)
die('Could not connect: ' . mysql_error());
mysql_select_db($db);
mysql_query("INSERT INTO case 
(Id, Case, Suspect) VALUES('NULL', '$case', '$suspect') ") 
or die(' Problem with insert: ' . mysql_error());  
echo 'Connected successfully';
mysql_close($conn);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:48:53.393

`case`是[保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。如果您要命名一个表和 columnj `case`，则需要将其放在刻度中：

```
INSERT INTO `case` (Id, `Case`, Suspect) VALUES('NULL', '$case', '$suspect') 
```

另外， [请不要`mysql_*`在新代码中使用函数](https://stackoverflow.com/questions/12859942)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# android - 如何关闭 Android 中 ContentProvider 中使用的数据库

> ID：15464058
> 
> 赞同：1
> 
> 时间：2013-03-17T17:47:51.287
> 
> 标签：android, database, android-cursorloader

我正在使用 CursorLoader 和 ContentProvider 将数据库的内容加载到 GridView 中。

该应用程序正在运行，但在日志中多次写入“close() 从未在数据库上显式调用。

我发现了一些关于这个问题的话题，并且对“在 ContentProvider 中关闭数据库是”的响应是：“内容提供者是在创建其托管进程时创建的，并且只要该进程存在就一直存在，因此无需关闭数据库”。

那么，怎么了？由于数据库是在 ContentProvider 中打开的，如果我关闭它，返回的光标将为空，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:04:20.393

当数据库在关闭之前被垃圾收集时，会打印该消息。这里有很多关于这个问题的讨论：

[在 ContentProvider 中关闭数据库](https://stackoverflow.com/questions/4547461/closing-the-database-in-a-contentprovider)

tl;博士：别担心。一般来说，关闭数据库实际上会适得其反。关闭您的事务和光标，让 android 管理数据库。

顺便说一句，注意在 onCreate 中打开数据库。如果您使用 SQLiteDatabaseHelper 打开数据库，则可能会调用 onUpdate 方法。在更新数据库的过程中，没有什么比让你的程序被 ANR 杀死更糟糕的了。

# java - DeadLock in producer Consumer

> ID：15464066
> 
> 赞同：0
> 
> 时间：2013-03-17T17:48:41.703
> 
> 标签：java, consumer, producer

```
 I have following classes :

    package com.akshu.multithreading;

    public class ThreadResource {

        static int a;
     static boolean Value =false;
        public synchronized int getA() {
            while(Value == false){
                try {
                    wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            Value= false;
            notify();

            return a;
        }

        public synchronized void setA(int a) {
            while(Value == true)
            {
                try {
                    wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            ThreadResource.a = a;
            Value=true;
            notify();

        }

    }

    ------------------

    /**
     * 
     */
    package com.akshu.multithreading;

    /**
     * @author akshu
     *
     */
    public class MyThreadA implements Runnable  {

        int a = 0;
        ThreadResource tR= new ThreadResource();

        @Override
        public void run() {

        for (int i = 0; i < 15; i++) {

            tR.setA(++a);
            System.out.println(" value of a :"+a);

        }

        }
    }

    ------------

    package com.akshu.multithreading;

    public class MyThreadB implements Runnable {

        @Override
    public void run() {
        // TODO Auto-generated method stub
        ThreadResource tR =new ThreadResource();
        for (int i = 0; i < 15; i++) {

        System.out.println("getA()"+tR.getA());

                }
    }
    }
    ----

    package com.akshu.multithreading;

    public class ThreadExecutionPoint {

        public static void main(String args[])  {

            Thread th1 = new Thread(new MyThreadA());
            Thread th2 = new Thread(new MyThreadB());

            th1.start();
            th2.start();
        }
    } 
```

I am trying to understand producer consumer problem via above code .When i execute the above code i am getting

```
 value of a :1
    getA()1 
```

Program gets stuck here only (do not gets terminate).

Someone Please explain what wrong i am doing here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:53:04.080

Declare `Value` as `volatile`
I.e. `static volatile boolean Value =false;`
You have declared your `set/get` methods `synchronized`. This means that they are lock on `this` (the object's intrinsic lock).
But in your code you instantiate a different `ThreadResource` for each thread thereby **not** making them `synchronized` since `this` is different for each case.
Change your code as follows:

```
public class MyThreadA implements Runnable {  
    ThreadResource tR;  

     public MyThreadA(ThreadResource tr) {  
        this.tR = tr;  
    }  
// your run method here NOT declaring a ThreadResource anymore!!!
} 
```

and same for `MyThreadB`

Then in `ThreadExecutionPoint`

```
ThreadResource tr = new ThreadResource();  
Thread th1 = new Thread(new MyThreadA(tr));  
Thread th2 = new Thread(new MyThreadB(tr)); 
```

# php - CSV 文件到多维 PHP 数组

> ID：15464068
> 
> 赞同：0
> 
> 时间：2013-03-17T17:48:48.167
> 
> 标签：php, csv

我正在处理这些数据：

```
name,address_one,address_two,address_postcode
Bob,1 A Street,A town,AA11AA
Andy,92 Church St,Manchester,M20 3JN
Sarah,893 London Road,Enfield,EN3 9HB
Freda,67 Green Close,Newcastle,Nw5 2ED 
```

这是一个格式良好的 .csv 文件。我需要能够解析它，然后将其转换为多维 PHP 数组，以便将其格式化为 XML。

一旦成功，我的阵列可能如下所示：

```
Array
(
['name']=> Bob
[0] => Array
    (
        [address] => Array
            (
                [one] => 1 A Street
                [two] => A town
                [postcode] => WC2 9GH

            )
    )
['name']=> Andy
[1] => Array
    (
        [address] => Array
            (
                [one] => 92 Chuch St
                [two] => Manchester
                [postcode] => M20 3JN

            )
    )
... omitted
) 
```

然后，我会将其转换为 XML，例如：

```
<?xml version="1.0"?>
<root>
<name>Bob</name>
<address>
<one>1 A Street</one>
<two>A town</two>
<postcode>AA11AA</postcode>
</address> 
<name>Andy</name>
<address>
<one>92 Chuch St</one>
<two>Manchester</two>
<postcode>M20 3JN</postcode>
</address>
...omitted
</root> 
```

我越来越接近这段代码：

```
public function parseFile($fileIn)
{

    if (($handle = fopen("$fileIn", "r")) !== FALSE) 
    {

        $header = NULL;
         while (($row = fgetcsv($handle, 1000, ',')) !== FALSE)
            {
                    if(!$header)
            {
                $header = $row;
                foreach($header as $k => $v)
                {                   
                    if($x = strpos("$v", '_'))
                    {
                        $child = substr("$v", $x+1);
                        array_push($header, $child);
                    }
                }
            } else {
                        $data[] = array_combine($header, $row);
            }
            }   

        print_r($data);

            fclose($handle);
    } else {
        throw new Exception('Unable to open the file!');
    }
} // parseFile 
```

但看来我的参数不同步。

```
Warning:  array_combine(): Both parameters should have an equal number of elements in 
```

和

```
var_dump($header); 
```

揭示：

```
Array
(
[0] => 
[1] => 
[2] => 
[3] => 
) 
```

如果我倒带一点：

```
$header = NULL;
while (($row = fgetcsv($handle, 1000, ',')) !== FALSE)
{
if(!$header) $header = $row;
else $data[] = array_combine($header, $row);
}   
print_r($data); 
```

我得到：

```
Array
(
[0] => Array
    (
        [name] => Bob
        [address_one] => 1 A Street
        [address_two] => A town
        [address_postcode] => AA11AA
    )

[1] => Array
    (
        [name] => Andy
        [address_one] => 92 Church St
        [address_two] => Manchester
        [address_postcode] => M20 3JN
    ) 
```

这很接近，但我需要能够将.csv文件的标题（在字符串'_'上）拆分为父子节点（考虑XML而不是数组）。

例如，address_one 将变为

```
Array
(
[0] => Array
    (
    [address] => Array
                (
                   [one] => 1 A Street
        )
)
) 
```

其中一个是地址的孩子。同样对于 csv 文件中包含下划线的所有其他标题。没有下划线的标题只是像往常一样映射到值。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:16:19.550

问题是你说“$header = $row;” 稍后您将额外的数据添加到标题（array_push（$header，$child））。

这为您提供了一个如下所示的数组：

```
array(
    [0] => name
    [1] => address_one
    [2] => address_two
    [3] => address_postcode
    [4] => one
    [5] => two
    [6] => postcode
); 
```

在过滤掉这些数据之前，您不应该设置默认值。所以你可以使用 $tmpHeaders = array(); 然后根据行中的数据填充它们。

像这样的东西：

```
$tmpHeaders = [];
foreach ($row as $key => $value) {
    if($x = strpos("$value", '_')) {
        $value = substr("$value", $x + 1);
    }

    array_push($tmpHeaders, $value);
}
$header = $tmpHeaders; 
```

这样，您的数据数组和标题数组包含相同数量的元素。现在您可以过滤掉名称并将地址字段分隔为一个数组字段。

# php - Facebook 应用通知请求被阻止

> ID：15464071
> 
> 赞同：1
> 
> 时间：2013-03-17T17:49:23.873
> 
> 标签：php, facebook-graph-api

我正在开发 Facebook 应用程序，但在向我的应用程序用户发送通知时遇到问题。我查看了此站点上类似问题的答案，并查阅了 Facebook SDK 页面并尝试应用以下策略：

```
<?php 

$app_id = YOUR_APP_ID;
$app_secret = YOUR_APP_SECRET;

$token_url = "https://graph.facebook.com/oauth/access_token?" .
"client_id=" . $app_id .
"&client_secret=" . $app_secret .
"&grant_type=client_credentials";

$app_access_token = file_get_contents($token_url);

$user_id = THE_CURRENT_USER_ID;

$apprequest_url ="https://graph.facebook.com/" .
$user_id .
"/apprequests?message='INSERT_UT8_STRING_MSG'" . 
"&data='INSERT_STRING_DATA'&"  .   
$app_access_token . "&method=post";

$result = file_get_contents($apprequest_url);
echo $result;

?> 
```

我得到的只是第二次调用 file_get_contents 时出错。错误指出：

```
failed to open stream: HTTP request failed! HTTP/1.0 403 Forbidden\r\n 
```

谁能告诉我发生了什么？我对 graph.facebook.com 的第一个请求工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:52:54.947

1.  检查 Facebook 是否正常：Facebook Platform Live Status 是否有任何相关信息？
2.  检查您在 HTTPS 中与 facebook.com 的连接是否存在问题：您能否在浏览器中打开 Facebook 平台页面的社交图的 URL？
3.  再次检查您尝试访问的实际 URL 是否有效并且该 URL 是否正确。
4.  返回此处并使用有问题的 URL 和您尝试访问的确切方法更新问题，或联系 Facebook 平台支持。

*[从Facebook 图形 api](https://stackoverflow.com/questions/5670970/facebook-graph-api-doesnt-response)被盗没有响应*

# image - Wordpress 多站点图像问题

> ID：15464072
> 
> 赞同：1
> 
> 时间：2013-03-17T17:49:24.847
> 
> 标签：image, wordpress, .htaccess

我正在运行 WP 3.5.1 多站点安装，但我站点上的图像突然停止显示；我想我已经将其追溯到 .htaccess 问题，但现在我被卡住了。

使用默认的 .htaccess 代码仅在我的网站上显示损坏的图像：

```
# BEGIN WordPress

<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L]
</IfModule>

# END WordPress 
```

...但是如果我用这个替换 RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L] 行，它几乎可以工作；常规图像显示正常，但 timthumb 返回的文件（使用相同的图像 URL）不起作用：

`RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-content/blogs.dir/3/files/$2 [L]`

...唯一的麻烦是，我的主题非常广泛地使用了 timthumb，并且它仍然通过 timthumb 显示损坏的图像，我不想为我维护的每个站点编辑 .htaccess 文件。我怎样才能解决这个问题？

# java - Maven 和 Apache Sling - 未找到插件

> ID：15464076
> 
> 赞同：0
> 
> 时间：2013-03-17T17:49:42.473
> 
> 标签：java, apache, maven, sling

完成 maven、sling 和 java 的新手，所以我提前道歉。我已经启动并运行了 maven，并且正在尝试使用 apache sling 让它运行。但是，当我尝试使用“mvn launchpad:run”启动 sling 时，我遇到了以下错误：

[错误] 在当前项目和插件组 [org.apache.plugins, org.codehaus.mojo] 中找不到前缀“launchpad”的插件，可从存储库 [local (MYLOCALPATH), central (http://repo .maven.apache.org/maven2]

非常感谢任何帮助，或者如果我能指出正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:37:14.023

我不是 Apache Sling 方面的专家，但根据错误消息，您似乎没有在 pom.xml 中定义 maven-launchpad-plugin，如下所示

```
<plugin>
   <groupId>org.apache.sling</groupId>
   <artifactId>maven-launchpad-plugin</artifactId>
   <version>2.2.0</version>
</plugin> 
```

# xslt - XSLT 组计数

> ID：15464083
> 
> 赞同：3
> 
> 时间：2013-03-17T17:50:06.567
> 
> 标签：xslt, count

我在为以下转换创建 XSLT 时遇到问题。我对 XSLT 转换比较陌生。问题是我想计算输入中来自不同国家的学生人数。我尝试过根据条件进行计数，但由于此计数是分组的，因此它不起作用。有人可以告诉我这是否可以做到是 XSLT 1.0。

我的输入是

```
<ns0:DetailsResponse xmlns:ns0="http://MySchema.XSLTSchema">
  <Class>1</Class>
  <Students>
    <StudentName>John</StudentName>
    <StudentSurname>Doe</StudentSurname>
    <Country>
      <CountryName>UK</CountryName>
    </Country>
  </Students>
  <Students>
    <StudentName>Cherry</StudentName>
    <StudentSurname>Blossom</StudentSurname>
    <Country>
      <CountryName>US</CountryName>
    </Country>
  </Students>
  <Students>
    <StudentName>Ankit</StudentName>
    <StudentSurname>Sood</StudentSurname>
    <Country>
      <CountryName>INDIA</CountryName>
    </Country>
  </Students>
  <Students>
    <StudentName>Peter</StudentName>
    <StudentSurname>Scott</StudentSurname>
    <Country>
      <CountryName>UK</CountryName>
    </Country>
  </Students>
  <Students>
    <StudentName>Joe</StudentName>
    <StudentSurname>Carter</StudentSurname>
    <Country>
      <CountryName>UK</CountryName>
    </Country>
  </Students>
  <Students>
    <StudentName>Anu</StudentName>
    <StudentSurname>Mehta</StudentSurname>
    <Country>
      <CountryName>INDIA</CountryName>
    </Country>
  </Students>
</ns0:DetailsResponse> 
```

我希望我的输出像

输出

```
<ns0:Root xmlns:ns0="http://MySchema.XSLTSchema_Destination">
  <DestinationClass>DestinationClass_0</DestinationClass>
  <Countries>
    <CountryWiseCount>
      <Country>INDIA</Country>
      <Count>2</Count>
    </CountryWiseCount>
    <CountryWiseCount>
      <Country>UK</Country>
      <Count>3</Count>
    </CountryWiseCount>
    <CountryWiseCount>
      <Country>US</Country>
      <Count>1</Count>
    </CountryWiseCount>
  </Countries>
</ns0:Root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:06:21.700

如果您使用的是 XSLT 1.0，那么 Muenchian Grouping 将成为您的朋友。

您正在按国家/地区名称对学生进行分组，因此您定义了一个键来查找学生，如下所示

```
<xsl:key name="students" match="Students" use="Country/CountryName"/> 
```

然后，要获得不同的国家/地区，您将匹配恰好是在其给定国家/地区的键中首先出现的元素的**学生元素。**

```
<xsl:template 
     match="Students[generate-id() = generate-id(key('students', Country/CountryName)[1])]"> 
```

然后要计算该国家所有学生的数量，您只需计算密钥：

```
<xsl:value-of select="count(key('students', Country/CountryName))"/> 
```

这是完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="students" match="Students" use="Country/CountryName"/>

   <xsl:template match="Students[generate-id() = generate-id(key('students', Country/CountryName)[1])]">
      <CountryWiseCount>
         <Country>
            <xsl:value-of select="Country/CountryName"/>
         </Country>
         <Count>
            <xsl:value-of select="count(key('students', Country/CountryName))"/>
         </Count>
      </CountryWiseCount>
   </xsl:template>

   <xsl:template match="Students"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<ns0:DetailsResponse xmlns:ns0="http://MySchema.XSLTSchema">
   <Class>1</Class>
   <CountryWiseCount>
      <Country>UK</Country>
      <Count>3</Count>
   </CountryWiseCount>
   <CountryWiseCount>
      <Country>US</Country>
      <Count>1</Count>
   </CountryWiseCount>
   <CountryWiseCount>
      <Country>INDIA</Country>
      <Count>2</Count>
   </CountryWiseCount>
</ns0:DetailsResponse> 
```

`<xsl:template match="Students"/>`请注意使用匹配非键中第一个**学生**元素的模板，以阻止它们被输出。XSLT 将始终优先考虑更具体的模板（使用 xpath 表达式），因此该模板不会忽略所有内容。

显然，您还需要使用模板扩展 XSLT 以匹配**类**，但我相信您可以解决这个问题。

# python - GAE后台线程未并行运行

> ID：15464086
> 
> 赞同：1
> 
> 时间：2013-03-17T17:50:10.640
> 
> 标签：python, multithreading, google-app-engine, python-2.7, queue

我需要一些帮助来解决 GAE 后台线程的问题。我想要做的是使用 GAE 后台线程和队列在多个线程上运行作业。代码在后端实例上运行，并被任务队列踢出。我得到的是线程中的作业是串行而不是并行运行的，这有点违背了目的。

```
from Queue import Queue
from google.appengine.api import background_thread
from google.appengine.api import taskqueue

q = Queue()

class Util():
   def work_in_background_thread(self):

       for p in portions:
            q.put(p)

        def _worker(index):
            portion = q.get()                
            do_work(portion)
            q.task_done()

        def do_work(snp_list):
            for snp in snp_list:
                self.find_snp_data(snp)

        for i in range(len(portions)):
            try:
                t = background_thread.BackgroundThread(target=_worker, args=[i])
                t.setDaemon(True)
                t.start()
            except:
                continue

        q.join() 
```

工作已经完成，但是线程一个接一个地运行，所以这项工作需要几个小时才能运行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:38:59.917

如果您使用的是后端，那么它将在单个实例上运行，而在开发服务器上，由于 python [Global Interpreter Lock (GIL)](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)不可能获得并发。我怀疑这可能是你的问题。也看看[这里](http://wiki.python.org/moin/GlobalInterpreterLock)了解python不能处理并发，但可以处理线程以提供更好的I/O

*编辑*

今天有一个新版本的 dev_server：引自[博客](http://googleappengine.blogspot.com.au/2013/03/app-engine-176-released.html)：

> 对 Python dev_appserver 进行了重大改造，该软件用于在开发过程中模拟 App Engine。新的 dev_appserver 是多线程的，这意味着开发速度更快，并提供更准确的生产环境模拟。

# google-apps-script - Google Apps Script ScriptDB 不再处于一致状态

> ID：15464087
> 
> 赞同：0
> 
> 时间：2013-03-17T17:50:12.373
> 
> 标签：google-apps-script

我的脚本的 ScriptDB 不再处于一致状态。他们返回无效的结果集。还有其他人遇到这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:51:11.317

是的，这里也一样。我偶尔会为查询返回空结果，这会导致数据库中出现重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:40:17.697

对我来说它工作正常。我所拥有的是我的错，因为我在查询中发送了一个整数，而一切都是字符串。

# javascript - Meteorjs 中的可重用表单

> ID：15464090
> 
> 赞同：0
> 
> 时间：2013-03-17T17:50:22.323
> 
> 标签：javascript, mongodb, meteor

我正在 MeteorJS 上编写 CRUD 应用程序。我有很多不同输入的 html 表单。在更新情况下，我无法为来自 mongodb 的 html 输入设置默认值。如何在创建和更新案例中使用相同的 html 表单？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:05:52.950

您可以在模板中使用一个表单`{{>template}}`并使用另一个表单，以便您可以分离事件绑定（如果您使用流星，否则您可以`{{>form}}`使用 JQuery

**客户端 HTML**

```
<template name="form">
    <form>
        <input type="text" value="{{values.fieldname1}}"/>
    </form>
</template>

<template name="crud">
   <h1>Update</h1>
   {{>update}}
   <hr/>
   <h1>New</h1>
   {{>create}}
</template>

<template name="update">
 {{>form}}
</template>

<template name="create">
 {{>form}}
</template> 
```

**客户端JS**

```
Template.update.values = function() {
    return MyCollection.findOne()
}

Template.update.events({
    'submit':function(event,context) {
        //update your stuff (your data would be in context.data)
        event.preventDefault()
    }
});

Template.create.events({
    'submit':function(event,context) {
        //create your new item
        event.preventDefault();
    }
}); 
```

# javascript - ajax onclick 监听器不起作用

> ID：15464092
> 
> 赞同：0
> 
> 时间：2013-03-17T17:50:24.077
> 
> 标签：javascript, jquery, ajax

我有一个包含许多页面的页面，`li`每个页面`li`都有一个这样的 onclick 侦听器：

```
<?php while ($row = $allFoods->fetch()) { ?>
        <li onclick="selectFood(' <?php echo $row['Name']; ?> ')">
            <?php echo $row['Name']; ?>
        </li>
    <?php } ?> 
```

效果很好

我有一个搜索按钮，当用户按下它时，我想从数据库中获取数据`ajax`，对于每个数据元素，我想将其放入 a 中`li`并将 onclick 侦听器应用于它。我是这样工作的：

```
$(document).ready(function() {
    $("#searchButton").click(function (){
        var foodToSearch = $("#foodToSearch").val();
        $.getJSON("http://localhost/TheEatTel/Food/search/"+foodToSearch+"/TRUE",function(data){
            var results = '';
            for(var i=0;i<data.length;i++){
                results +='<li onclick="selectFood('+ data[i] +')">';
                results+=data[i];
                results+='</li>';
            }
            alert(results);
            $(".afflFoods").html(results);
        });     
    });
}); 
```

数据显示如预期的那样好，但是 onclick 侦听器不起作用，我的意思是当我按下任何新项目（来自使用 ajax 的数据库）时，什么也没发生，为什么？有什么解决办法，谢谢指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:53:48.207

您可以将侦听器附加到`li`这个 -

```
$(document).on('click','li.selectFood',function(e){

          // do stuff that you'd do in selectFood()
             selectFood($(this).html());
}); 
```

为此，您需要`selectFood`在每个 li 上应用类 -

```
 <?php while ($row = $allFoods->fetch()) { ?>
        <li class="selectFood">
            <?php echo $row['Name']; ?>
        </li>
    <?php } ?> 
```

这样您就不必将事件侦听器重新附加到`li`来自 ajax 的新添加项目。在ajax中你可以简单地做 -

```
 ....
        for(var i=0;i<data.length;i++){
            results +='<li class=selectFood>';
            results+=data[i];
            results+='</li>';
        }
        ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:53:07.240

您没有引用传递给的字符串`selectFood`。

```
'<li onclick="selectFood(\''+ data[i] +'\')">'; 
```

# android - 自动获取安卓设备的位置

> ID：15464094
> 
> 赞同：0
> 
> 时间：2013-03-17T17:50:28.883
> 
> 标签：android, geolocation, android-location

我正在开发一个 android 应用程序，我需要知道 android 设备的位置。我尝试的所有方法都需要启用 GPS。如果未启用，我们可以通过打开设置意图来要求用户将其打开。

有没有办法通过代码启用它，甚至不让用户知道......并在应用程序完成其工作时将其关闭？

我正在开发的应用程序将记录设备的位置。它将在后台运行，并每 15 分钟记录一次位置。一直保持 GPS 开启会消耗大量电量。因此，我想在需要时打开它，并在完成时将其关闭，而无需询问用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:52:24.133

出于隐私原因，如果不植根设备，这将**永远**不可能。

未经同意，您无法获取用户的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:54:49.087

> 有没有办法通过代码启用它，甚至不让用户知道......并在应用程序完成其工作时将其关闭？

幸运的是，不，出于明显的隐私和安全原因。

> 因此，我想在需要时打开它，并在完成时将其关闭，而无需询问用户。

开启和关闭与启用和禁用不同。

仅仅因为用户允许*启用*GPS并不意味着它正在消耗电力。只有当应用程序请求位置数据时，GPS 无线电才会打开。因此，您无法*启用*GPS（只有用户可以），但如果启用了 GPS，您可以安排将其打开。当 GPS 打开时，用户仍会在状态栏中看到一个图标。

> 那么间谍应用程序是如何做到的呢？

他们要求用户启用 GPS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:04:38.050

要获得准确的位置，您需要启用 GPS。但是您可以使用NETWORK_PROVIDER，并获取纬度和经度。这不需要用户干预。但是，当然，它是一个大概的位置，但足以进行基于位置的搜索。

```
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
            locationListener); 
```

# java - JComboBox 中的 NullPointerException 错误

> ID：15464095
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:50:29.800
> 
> 标签：java, swing

我正在尝试这段代码（在 Netbeans 中），我总是得到一长串错误（这里只有第一行）

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at FootballFrame.jComboBox1ActionPerformed(FootballFrame.java:64
at FootballFrame.access$000(FootballFrame.java:3)
at FootballFrame$1.actionPerformed(FootballFrame.java:29)
at javax.swing.JComboBox.fireActionEvent(JComboBox.java:1260)
at javax.swing.JComboBox.setSelectedItem(JComboBox.java:588)
at javax.swing.JComboBox.setSelectedIndex(JComboBox.java:624)
at Javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(BasicComboPopup.java:835) 
```

...

代码如下：

```
 private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) 
  {                                          
      String support = (String)jComboBox1.getSelectedItem();
      league.setLeagueName(support);
  } 
```

方法league.setLeagueName(String aName) 在外面完美地工作......我真的不明白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:04:19.500

A`NullPointerException`表示您正在尝试对对象做某事`null`。在上面的代码中，可能导致问题的三件事：

*   `jComboBox1`可能`null`
*   的结果`jComboBox1.getSelectedItem()`可能是`null`（尽管这可能不会导致错误；它可能只是将值设置为`null`并稍后失败）
*   `league`可能`null`

因此，要找出是哪一个，您可以使用调试器，也可以将代码更改为以下内容：

```
private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) 
{                       
    System.out.println("jComboBox1 : " + jComboBox1);                   
    String support = (String)jComboBox1.getSelectedItem();
    System.out.println("support : " + support);
    System.out.println("league : " + league);
    league.setLeagueName(support);
} 
```

查看打印了哪个（或多个）打印语句`null`，然后从那里开始计算我们如何解决问题。

如果您选择使用调试器（您可能应该学习如何使用），您可以保留原始代码，然后在方法的第一行添加断点。然后，在调试模式下运行您的应用程序并查看变量。单步执行代码，看看是什么`null`以及为什么。

# ios - 当应用程序在后台时，如何检查我的 UIDocument 是否已通过 iCloud 更新？

> ID：15464102
> 
> 赞同：0
> 
> 时间：2013-03-17T17:51:14.417
> 
> 标签：ios, icloud, uidocument

我注意到 UIDocument 让应用程序知道更改的方法，例如`presentedItemDidChange`，只有在应用程序在前台运行时才会被调用。

我想知道的是，如果用户要切换应用程序或将我的应用程序发送到后台，我怎么知道 UIDocument 自从用户上次看到它后再次将应用程序带到前台时是否发生了变化？

或者，我是否应该在每次应用程序返回前台时更新所有内容，以防 UIDocument 已更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T10:27:10.363

uidocument 自己处理所有的变化通知，所以如果文档在其他设备上发生变化，会自动调用 loadFromContents:ofType:error: 来反映这些变化，所以你唯一需要做的就是实现这个方法。

# c# - 从一个站点在另一个站点的文件夹中创建文件夹

> ID：15464107
> 
> 赞同：0
> 
> 时间：2013-03-17T17:51:38.927
> 
> 标签：c#, asp.net-mvc

我的网站上有一个用于文件上传的文件夹，`http://mySite/Uploads/` 我想为每个用户创建一个新文件夹并将文件保存到其中。它适用于网站访问者/但我也有一个管理网站。员工应该能够在同一目录中上传文件。
Directory.CreateDirectory 返回一个错误，它无法处理 uri 地址。我路过`"http://mySite/Uploads/UserId"`。我错了吗？我应该使用其他机制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:53:35.633

> 我错了吗？

是的，您应该将物理文件夹`Directory.CreateDirectory`而不是 url 传递给该方法。例如：

```
Directory.CreateDirectory(Server.MapPath("~/uploads/UserId")); 
```

该`Server.MapPath`方法应该返回一个像这样的文件夹：`c:\inetpub\wwwroot\mysite\uploads\userid`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:54:19.080

您必须使用相对于系统根目录的路径。你可以用这个[`MapPath`](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)方法做到这一点。

```
var uploadsRoot = Server.MapPath("~Uploads");
var userUploadFolder = Path.Combine(UploadsRoot, userId.ToString());
Directory.CreateDirecty(userUploadFolder); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T14:06:33.997

如果有人感兴趣。我们在两个站点的 IIS 中创建了虚拟文件夹“上传”。在 iis 中右键单击您的站点 => 添加虚拟文件夹，或者不知何故，我的 iis 不是英文的。对两个站点都这样做。它的完整路径指向同一个文件夹，所以我可以使用`Server.MapPath("~Uploads")`；在管理站点中我得到`http://adminSite/Uploads/`了，在主站点中它是`http://mySite/Uploads/`。如果我通过一个地址上传文件，我总是可以通过另一个地址访问它们。

# datasheet - 索尼 IMX111PQ 数据表

> ID：15464108
> 
> 赞同：1
> 
> 时间：2013-03-17T17:51:40.553
> 
> 标签：datasheet, nexus-4

我将 Nexus 4 用于增强现实应用程序。

该手机配备索尼 IMX111PQ CMOS 传感器。你知道我应该在哪里在线搜索描述这种 CMOS 传感器逐行扫描模式的数据表吗？我找到了这张传单[http://www.sony.net/Products/SC-HP/cx_news/vol65/pdf/imx081_091_111pq.pdf](http://www.sony.net/Products/SC-HP/cx_news/vol65/pdf/imx081_091_111pq.pdf) 但它的信息量不如技术数据表。

谢谢

# php - 通过更改查询字符串参数在 Symfony2 中进行简单重定向，与路由无关

> ID：15464109
> 
> 赞同：5
> 
> 时间：2013-03-17T17:51:47.870
> 
> 标签：php, symfony

这应该很简单，我一直在谷歌上搜索，但我一直想出与“路线”相关的建议。

我只想执行重定向到同一页面并修改查询字符串参数之一（清除一个或设置一个）。

我在任何地方都看不到如何做到这一点。

一个选项可能是手动完全生成 URL 并使用这个我猜，但这似乎不是一个很好的方法：

```
$this->router->generate("http://domain.com?a=1") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T18:18:53.807

我希望我明白你打算做什么......在你的控制器（？）中使用

```
$this->generateUrl(
    $request->attributes->get('_route'),
    array_merge(
        $request->query->all(),
        array('param' => 'val') // change the param
    )
); 
```

生成网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:22:04.227

这种重定向的原因是什么？我想你想从控制器重定向，不是吗？我不确定你想要达到什么结果。您必须小心在控制器中重定向相同的动作控制器（重定向循环）。

但是，在控制器中，您可以通过以下方式做到这一点：

```
public function indexAction()
{
    // ...
    return $this->redirect($this->generateUrl($request->attributes->get('_route'), array('paramName' => $paramValue)));
} 
```

在我看来，你应该考虑编写一个事件监听器：[http ://symfony.com/doc/current/book/internals.html#handling-requests](http://symfony.com/doc/current/book/internals.html#handling-requests)

# java - 通过 Java 运行 cmd 命令

> ID：15464111
> 
> 赞同：70
> 
> 时间：2013-03-17T17:51:56.767
> 
> 标签：java, cmd, cd

我发现了几个通过 Java 类运行 cmd 命令的代码片段，但我无法理解。

这是打开cmd的代码

```
public void excCommand(String new_dir){
    Runtime rt = Runtime.getRuntime();
    try {
        rt.exec(new String[]{"cmd.exe","/c","start"});

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我找到了一些其他链接来添加其他命令，例如 cd [http://www.coderanch.com/t/109753/Linux-UNIX/exec-command-cd-command-java](http://www.coderanch.com/t/109753/Linux-UNIX/exec-command-cd-command-java)

[如何使用 Java 打开命令提示符并插入命令？](https://stackoverflow.com/questions/4688123/how-to-open-the-command-prompt-and-insert-commands-using-java)

任何人都可以帮助我了解如何 cd 一个目录，例如：

```
 cd C:\Program Files\Flowella 
```

然后在该目录上运行其他命令？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-03-17T18:23:25.843

将进程从不同目录运行到 Java 程序的工作目录的一种方法是更改​​目录，然后在同一命令行中运行该进程。您可以通过`cmd.exe`运行命令行（例如 `cd some_directory && some_program`.

以下示例更改为不同的目录并`dir`从那里运行。诚然，我可以只`dir`使用那个目录而不需要`cd`它，但这只是一个例子：

```
import java.io.*;

public class CmdTest {
    public static void main(String[] args) throws Exception {
        ProcessBuilder builder = new ProcessBuilder(
            "cmd.exe", "/c", "cd \"C:\\Program Files\\Microsoft SQL Server\" && dir");
        builder.redirectErrorStream(true);
        Process p = builder.start();
        BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line;
        while (true) {
            line = r.readLine();
            if (line == null) { break; }
            System.out.println(line);
        }
    }
} 
```

另请注意，我正在使用 a`ProcessBuilder`来运行命令。除其他外，这允许我通过调用将进程的标准错误重定向到其标准输出中`redirectErrorStream(true)`。这样做只给了我一个可供读取的流。

这给了我机器上的以下输出：

```
C:\Users\Luke\StackOverflow>java CmdTest
 Volume in drive C is Windows7
 Volume Serial Number is D8F0-C934

 Directory of C:\Program Files\Microsoft SQL Server

29/07/2011  11:03    <DIR>          .
29/07/2011  11:03    <DIR>          ..
21/01/2011  20:37    <DIR>          100
21/01/2011  20:35    <DIR>          80
21/01/2011  20:35    <DIR>          90
21/01/2011  20:39    <DIR>          MSSQL10_50.SQLEXPRESS
               0 File(s)              0 bytes
               6 Dir(s)  209,496,424,448 bytes free 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-17T17:53:39.057

你可以试试这个： -

```
Process p = Runtime.getRuntime().exec(command); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-13T22:59:02.430

如果您想执行类似的操作`cd`，请使用：

```
String[] command = {command_to_be_executed, arg1, arg2};
ProcessBuilder builder = new ProcessBuilder(command);
builder = builder.directory(new File("directory_location")); 
```

例子：

```
String[] command = {"ls", "-al"};
ProcessBuilder builder = new ProcessBuilder(command);
builder = builder.directory(new File("/ngs/app/abc"));
Process p = builder.start(); 
```

将命令和所有参数拆分为字符串数组的单独字符串很重要（否则`ProcessBuilder`API 将无法正确提供它们）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-27T16:19:09.390

这是一个更完整的命令行执行实现。

## 用法

```
executeCommand("ls"); 
```

**输出：**

```
12/27/2017 11:18:11:732: ls
12/27/2017 11:18:11:820: build.gradle
12/27/2017 11:18:11:820: gradle
12/27/2017 11:18:11:820: gradlew
12/27/2017 11:18:11:820: gradlew.bat
12/27/2017 11:18:11:820: out
12/27/2017 11:18:11:820: settings.gradle
12/27/2017 11:18:11:820: src 
```

## 代码

```
private void executeCommand(String command) {
    try {
        log(command);
        Process process = Runtime.getRuntime().exec(command);
        logOutput(process.getInputStream(), "");
        logOutput(process.getErrorStream(), "Error: ");
        process.waitFor();
    } catch (IOException | InterruptedException e) {
        e.printStackTrace();
    }
}

private void logOutput(InputStream inputStream, String prefix) {
    new Thread(() -> {
        Scanner scanner = new Scanner(inputStream, "UTF-8");
        while (scanner.hasNextLine()) {
            synchronized (this) {
                log(prefix + scanner.nextLine());
            }
        }
        scanner.close();
    }).start();
}

private static SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss:SSS");

private synchronized void log(String message) {
    System.out.println(format.format(new Date()) + ": " + message);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-17T18:08:32.090

我的例子（来自真实项目）

文件夹——文件。

zipFile，filesString — 字符串；

```
 final String command = "/bin/tar -xvf " + zipFile + " " + filesString;
        logger.info("Start unzipping: {}    into the folder {}", command, folder.getPath());
        final Runtime r = Runtime.getRuntime();
        final Process p = r.exec(command, null, folder);
        final int returnCode = p.waitFor();

        if (logger.isWarnEnabled()) {
            final BufferedReader is = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line;
            while ((line = is.readLine()) != null) {
                logger.warn(line);
            }
            final BufferedReader is2 = new BufferedReader(new InputStreamReader(p.getErrorStream()));
            while ((line = is2.readLine()) != null) {
                logger.warn(line);
            }
        } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-03T22:32:08.997

尝试这个：

```
Process runtime = Runtime.getRuntime().exec("cmd /c start notepad++.exe"); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-17T17:53:03.957

最简单的方法是使用[`Runtime.getRuntime.exec()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29).

例如，要获取 Windows 上默认浏览器的注册表值：

```
String command = "REG QUERY HKEY_CLASSES_ROOT\\http\\shell\\open\\command";
try
{
    Process process = Runtime.getRuntime().exec(command);
} catch (IOException e)
{
    e.printStackTrace();
} 
```

如有必要，然后使用 a`Scanner`获取命令的输出。

```
Scanner kb = new Scanner(process.getInputStream()); 
```

**注意**： the`\`是 a 中的转义字符`String`，必须转义才能正常工作（因此是`\\`）。

* * *

但是，没有名为 的可执行文件`cd`，因为它不能在单独的进程中实现。

当前工作目录很重要的一种情况是执行外部进程（使用[`ProcessBuilder`](http://download.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#directory%28java.io.File%29)or [`Runtime.exec()`](http://download.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)）。在这些情况下，您可以明确指定用于新启动进程的工作目录。

最简单的命令方式：

```
System.setProperty("user.dir", "C:\\Program Files\\Flowella"); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-17T18:02:36.907

一旦获得对 Process 的引用，就可以对其调用 getOutpuStream 以获取 cmd 提示符的标准输入。然后，您可以使用 write 方法在流上发送任何命令，就像使用任何其他流一样。

请注意，它是 process.getOutputStream() 连接到衍生进程上的标准输入。类似地，要获取任何命令的输出，您需要调用 getInputStream，然后将其作为任何其他输入流读取。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-11T16:50:14.420

公共类演示{公共静态无效主（字符串参数[]）抛出IOException{

```
 Process process = Runtime.getRuntime().exec("/Users/******/Library/Android/sdk/platform-tools/adb" + " shell dumpsys battery ");
    BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));
    String line = null;
    while (true) {
        line = in.readLine();
        if (line == null) { break; }
        System.out.println(line);
    }
}

} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-29T14:43:05.020

停止和禁用服务可以通过以下代码完成：

```
static void sdService() {
    String[] cmd = {"cmd.exe", "/c", "net", "stop", "MSSQLSERVER"};
    try {           
        Process process = new ProcessBuilder(cmd).start();
        process.waitFor();      
        String line = null;
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        while((line = bufferedReader.readLine()) != null) {
            System.out.println(line);
        }

        line = null;
        bufferedReader = null;
        Process p = Runtime.getRuntime().exec("sc config MSSQLSERVER start= disabled");
        p.waitFor();
        bufferedReader = new BufferedReader(new InputStreamReader(p.getInputStream()));
        while((line = bufferedReader.readLine()) != null) {
            System.out.println(line);
        }                   
    } catch (Exception e) {
        e.printStackTrace();
    }                   
} 
```

启用和启动服务可以通过以下代码完成

```
static void esService() {
    String[] cmd = {"cmd.exe", "/c", "net", "start", "MSSQLSERVER"};

    try {
        Process p = Runtime.getRuntime().exec("sc config MSSQLSERVER start= auto");
        //Process p = Runtime.getRuntime().exec("sc config MSSQLSERVER start= demand");
        p.waitFor();        
        String line = null;
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(p.getInputStream()));
        while((line = bufferedReader.readLine()) != null) {
            System.out.println(line);
        }

        line = null;
        bufferedReader = null;
        Process process = new ProcessBuilder(cmd).start();          
        process.waitFor();
        bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        while((line = bufferedReader.readLine()) != null) {
            System.out.println(line);
        }

    } catch (Exception e) {
        e.printStackTrace();
    }               
} 
```

可以通过以下代码从任何文件夹执行命令。

```
static void runFromSpecificFolder() {       
    try {
        ProcessBuilder processBuilder = new ProcessBuilder("cmd.exe", "/c", "cd \"C:\\Users\\himan\\Desktop\\Java_Test_Deployment\\jarfiles\" && dir");
        //processBuilder.directory(new File("C://Users//himan//Desktop//Java_Test_Deployment//jarfiles"));
        processBuilder.redirectErrorStream(true);
        Process p = processBuilder.start();
        p.waitFor();        
        String line = null;
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(p.getInputStream()));
        while((line = bufferedReader.readLine()) != null) {
            System.out.println(line);
        }                
    } catch (Exception e) {
        e.printStackTrace();
    }               
}

public static void main(String args[]) {
    sdService();
    runFromSpecificFolder();
    esService();
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-17T18:12:35.763

你不能这样运行`cd`，因为`cd`它不是一个真正的程序；它是命令行的内置部分，它所做的只是改变命令行的环境。在子进程中运行它是没有意义的，因为那时您正在更改该子进程的环境 - 但该子进程立即关闭，丢弃其环境。

要在您的实际 Java 程序中设置当前工作目录，您应该编写：

```
System.setProperty("user.dir", "C:\\Program Files\\Flowella"); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-18T02:42:32.613

从 java 执行 cmd 的方法之一！

```
public void executeCmd() {
    String anyCommand="your command";
    try {
        Process process = Runtime.getRuntime().exec("cmd /c start cmd.exe /K " + anyCommand);

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-04T21:21:41.580

这里的加法器是使用与号来批处理命令和正确的格式以使用 cd 更改驱动器。

```
public class CmdCommander {

public static void main(String[] args) throws Exception {
    //easyway to start native windows command prompt from Intellij

    /*
    Rules are:
    1.baseStart must be dual start
    2.first command must not have &.
    3.subsequent commands must be prepended with &
    4.drive change needs extra &
    5.use quotes at start and end of command batch
    */
    String startQuote = "\"";
    String endQuote = "\"";
    //String baseStart_not_taking_commands = " cmd  /K start ";
    String baseStart = " cmd  /K start cmd /K ";//dual start is must

    String first_command_chcp = " chcp 1251 ";
    String dirList = " &dir ";//& in front of commands after first command means enter
    //change drive....to yours
    String changeDir = " &cd &I: ";//extra & makes changing drive happen

    String javaLaunch = " &java ";//just another command
    String javaClass = " Encodes ";//parameter for java needs no &

    String javaCommand = javaLaunch + javaClass;
    //build batch command
    String totalCommand =
            baseStart +
                    startQuote +
                    first_command_chcp +
                    //javaCommand +
                    changeDir +
                    dirList +
                    endQuote;

    System.out.println(totalCommand);//prints into Intellij terminal
    runCmd(totalCommand);
    //Thread t = Thread.currentThread();
    //t.sleep(3000);
    System.out.println("loppu hep");//prints into Intellij terminal

}

public static void runCmd(String command) throws Exception {

    Runtime rt = Runtime.getRuntime();
    Process proc = rt.exec(command);

} 
```

}

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-24T10:49:35.280

最简单和最短的方法是使用[CmdTool](https://github.com/alekseysotnikov/CmdTool)库。

```
new Cmd()
         .configuring(new WorkDir("C:/Program Files/Flowella"))
         .command("cmd.exe", "/c", "start")
         .execute(); 
```

[您可以在此处](https://github.com/alekseysotnikov/CmdTool)找到更多示例。

# java - 用输入掩码替换正则表达式（200种）

> ID：15464113
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:52:08.853
> 
> 标签：java, regex

对于记录：

**X**代表任何东西

**Y**表示年份

**M**表示月份

**N**表示数字

**A**表示字母表

例如：

我来自数据库的输入掩码是这样的：

```
XXXYMXXXXXA 
```

我的意见是：

```
39JY412345O 
```

我想检查这个输入是有效还是无效，但我不能用掩码检查它，我想用这样的正则表达式替换掩码作为它的输入掩码：

```
 /^.{3}Y[0-9]{1}.{5}[a-zA-Z]{1}$/ 
```

我没有正则表达式，我只有输入掩码。我有输入验证，它使用正则表达式来检查有效或无效的输入。我应该用我的输入掩码（200种输入掩码）替换正则表达式，并使用它的正则表达式进行验证

我需要编写一个方法，将输入掩码（例如“XXXYMXXXXXA”）转换为 java.lang.regex.Pattern 格式的正则表达式（例如“.{3}Y[0-9]{1}. {5}[a-zA-Z]{1}")

这是我的方法代码：（**但我想要这个解决方案的最佳实践**）

```
private String replaceAll(String pattern, String value, String replaceValue) {
    String str = value;
    str = str.replaceAll(pattern, replaceValue.concat("{").concat("1").concat("}"));
    return str;
} 
```

和方法调用：

```
String anything = "[Xx]";
String alphabet = "[Aa]";
String number = "[Nn]";
String word = getName();

word = replaceAll(anything, word, ".");
word = replaceAll(alphabet, word, "[A-Za-z]");
word = replaceAll(number, word, "[0-9]"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:14:37.070

`'X'`假设一种通用方法，在掩码中的一个字符（例如）与正则表达式的一部分（例如 ）之间存在映射`'.'`，并且经常出现的掩码字符会产生一个数字量词（例如`{3}`）。

所以我把一个辅助类和一个简单的测试方法放在一起，所以也许这是一个起点。

助手类：

```
import java.util.HashMap;
import java.util.Map;

public class PatternBuilder {

    protected Map<Character, String> mappings = new HashMap<Character, String>();
    protected boolean caseSensitive = false;

    public PatternBuilder() {
    }

    public PatternBuilder(boolean caseSensitive) {
        this.caseSensitive = caseSensitive;
    }

    public PatternBuilder addDefinition(char input, String mapping) {
        if (this.caseSensitive) {
            this.mappings.put(input, mapping);
        } else {
            this.mappings.put(Character.toLowerCase(input), mapping);
        }
        return this;
    }

    public String buildRegexPattern(String mask) {
        if ((mask == null) || (mask.length() == 0))  {
            return "";
        }
        StringBuilder patternBuffer = new StringBuilder();
        char lastChar = 0;
        int count = 0;
        for (int i = 0; i < mask.length(); i++) {
            char c = mask.charAt(i);
            if (this.caseSensitive == false) {
                c = Character.toLowerCase(c);
            }
            if (c != lastChar) {
                if (count > 0) {
                    String mapped = mappings.get(lastChar);
                    if (mapped == null) {
                        // mapping for char not defined
                        return "";
                    }
                    patternBuffer.append(mapped);
                    patternBuffer.append("{").append(count).append("}");
                }
                lastChar = c;
                count = 1;
            } else {
                count++;
            }
        }
        if (count > 0) {
            String mapped = mappings.get(lastChar);
            if (mapped == null) {
                mapped = ".";
            }
            patternBuffer.append(mapped);
            patternBuffer.append("{").append(count).append("}");
        }
        return patternBuffer.toString();
    }

} 
```

用法：

```
PatternBuilder patternBuilder = new PatternBuilder()
        .addDefinition('X', ".")
        .addDefinition('Y', "Y")
        .addDefinition('M', "[0-9]")
        .addDefinition('N', "\\d")
        .addDefinition('A', "[a-zA-Z]");
String rePattern = patternBuilder.buildRegexPattern("XxxYMXXXXXA"); // case insensitive, x == X
System.out.println("Pattern: '" + rePattern + "'");
Pattern p = Pattern.compile(rePattern);

String[] tests = new String[]{
    "39JY412345O", // Original, match
    "39JY41234FO", // replaced 5 with F, still matching
    "39JY4123457", // replaced O with 7, no match
    "A9JY4123457"  // replaced 3 with A, no match
};        
for (String s : tests) {
    Matcher m = p.matcher(s);
    System.out.println("Test '" + s + "': " + m.matches());
} 
```

我的输出：

```
Pattern: '.{3}Y{1}[0-9]{1}.{5}[a-zA-Z]{1}'
Test '39JY412345O': true
Test '39JY41234FO': true
Test '39JY4123457': false
Test 'A9JY4123457': false 
```

# xslt - XSLT：将 XMS 复制到 XML 并更新文件结构

> ID：15464115
> 
> 赞同：0
> 
> 时间：2013-03-17T17:52:12.423
> 
> 标签：xslt, xml-parsing

我有一个`<Database>`包含两个子元素的元素的 XML 文件`<Patients> and <Hospitals>`。每个`<Patients>`都有一个子元素`<Patient>`，其名称指定为属性。每个医院都有一个属性名，例如：`<Hospital name="JR"`和一个子元素`<Patients>`，它有子元素`<Patient name="XY">`

我想通过复制患者的结构来更新文件，然后添加医院信息。作为患者姓名的附加属性，或作为子元素。有什么想法吗？

编辑：谢谢蒂姆，这是示例。

```
<Database>
<Patients>
    <Patient name="Salvatore"/>
    <Patient name="Luca"/>
</Patients>
<Hospitals>
    <Hospital name="JR">
        <Patients>
            <Patient name="Salvatore"/>
        </Patients>
    </Hospital>
    <Hospital name="LondonGeneral">
        <Patients>
            <Patient name="Luca"/>
        </Patients>
    </Hospital>
</Hospitals>
</Database> 
```

输出应如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
<Database>
    <Patients>
        <Patient name="Salvatore" hospital="JR"/>
        <Patient name="Luca" hospital="LondonGeneral"/>
    </Patients>
    <Hospitals>
        <Hospital name="JR">
            <Patients>
                <Patient name="Salvatore"/>
            </Patients>
        </Hospital>
        <Hospital name="LondonGeneral">
            <Patients>
                <Patient name="Luca"/>
            </Patients>
        </Hospital>
    </Hospitals>
</Database> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:38:10.393

假设每个患者姓名都包含在一个`Hospital`元素中，以下应该有效

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:key name="hospitalPatientByName"
           match="Hospital/Patients/Patient"
           use="@name" />

  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()"/></xsl:copy>
  </xsl:template>

  <xsl:template match="Patient[not(ancestor::Hospital)]">
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:attribute name="hospital">
        <xsl:value-of select="key('hospitalPatientByName', @name)/ancestor::Hospital/@name" />
      </xsl:attribute>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

在这里，我们处理每个顶级元素，方法是根据患者姓名从`Patient`元素下查找对应的元素，然后提取包含医院的名称。`Patient``Hospital`

如果同一个名称`Patient`可能不止一个`Hospital`，那么我会使用子元素而不是属性

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:key name="hospitalPatientByName"
           match="Hospital/Patients/Patient"
           use="@name" />

  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()"/></xsl:copy>
  </xsl:template>

  <xsl:template match="Patient[not(ancestor::Hospital)]">
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:apply-templates select="key('hospitalPatientByName', @name)/ancestor::Hospital" mode="in-patient" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Hospital" mode="in-patient">
    <xsl:copy><xsl:apply-templates select="@*" /></xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

鉴于您的样本输入，这将产生

```
<Database>
<Patients>
    <Patient name="Salvatore"><Hospital name="JR"/></Patient>
    <Patient name="Luca"><Hospital name="LondonGeneral"/></Patient>
</Patients>
<Hospitals>
    <Hospital name="JR">
        <Patients>
            <Patient name="Salvatore"/>
        </Patients>
    </Hospital>
    <Hospital name="LondonGeneral">
        <Patients>
            <Patient name="Luca"/>
        </Patients>
    </Hospital>
</Hospitals>
</Database> 
```

如果（比如说）Luca 也在 JR 患者名单中，那么你会列出两家医院，即

```
<Patient name="Luca">
  <Hospital name="JR"/>
  <Hospital name="LondonGeneral"/>
</Patient> 
```

# objective-c - 为什么这段代码会在 removeObject: 处中断？

> ID：15464117
> 
> 赞同：0
> 
> 时间：2013-03-17T17:52:22.437
> 
> 标签：objective-c, nsmutablearray

```
+ (NSString *)numberMatching: (NSString *)number and: (NSString *)secondNumber
{
   NSString *returnNumber;
   if ([number isEqualToString:secondNumber]) {
      returnNumber = number;
   } else {
      NSMutableArray *validNumber = [[self validNumbers] copy];
      [validNumber removeObject:number];
      [validNumber removeObject:secondNumber];
      returnNumber = validNumber[0];
   }
   return returnNumber;
} 
```

万一这很重要，这里是validNumber的代码：

```
+ (NSArray *)validNumbers
{
   static NSArray *validNumbers = nil;
   if (!validNumbers) validNumbers = @[@"one",@"two",@"three"];
   return validNumbers;
} 
```

运行时，我收到以下错误：

> -[_ *NSArrayI removeObject:]：无法识别的选择器发送到实例 0x1ed60f00 ...由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[* _NSArrayI removeObject:]：无法识别的选择器发送到实例 0x1ed60f00”

这似乎表明 removeObject 不是 NSMutableArray 的有效方法，但它是有效的。

本质上，我想做的是：如果两个参数匹配，我想返回值。如果它们不匹配，我想返回第三种可能性（不匹配任何一个参数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:54:10.907

因为`validNumber`是一个`NSArray`。您不能从`NSArray`. 使用`NSMutableArray`and`mutableCopy`代替：

```
NSMutableArray *validNumber = [[self validNumbers] mutableCopy];
[validNumber removeObject:number];
[validNumber removeObject:secondNumber]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:00:44.957

当您将`copy`消息发送到`NSArray`时，您获得的副本也是一个`NSArray`实例，您无法从不可变数组中删除对象。为了获得可变副本，您需要发送`mutableCopy`消息：

```
NSMutableArray *validNumber = [[self validNumbers] mutableCopy]; 
```

# java - 可以创建对象的类方法

> ID：15464119
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:52:28.550
> 
> 标签：java

1.  我有一个时间表项目，其中包含 Lecturer 和 Subject 两个类，还指定了已知对象。

2.  并且它们都必须在对象数组或数组列表中

3.  并且该项目应该允许用户能够创建或添加、删除、搜索和更新班级讲师的对象。

我真的不知道该怎么做我可以创建一个可以完成上述任务的方法，它应该是类方法还是主类中的方法？

如何让用户能够使用方法或任何其他方式创建对象？

我已经创建了类、对象和数组列表被卡住了

对不起，我也可以将用户创建的对象添加到数组列表中吗？

```
class Lecturer   {                
static int lec_id;                 
static String lec_name;
static String lec_rank;
static int lec_salary;
static String lec_department; 
```

}

```
class Subject   {                  /* initialisation for the class subject*/
String sub_code;
String sub_name;
String sub_department;
int sub_lec_id;                 /*sub lec id represent the lecturer taking the subject*/
String sub_day;
String sub_time;
String sub_venue; 
```

}

```
/* intialisation for the class lecturer*/

public class Timetable {

public static void main(String[] args) {
    /* the code below represent a created list of objects  */                       /* `Lecturer l =Lecturer ()(System.in);*/`

    Lecturer l1 =new Lecturer (1, "Dadson",  "Dr",   8000,  "Computing"); 
    Lecturer l2 =new Lecturer (2, "Hall",   "Prof", 12000,  "Computing");
    Lecturer l3 =new Lecturer (2, "Berry",   "Dr",   7500,  "Computing");
    Lecturer l4 =new Lecturer (2, "Bull",    "Dr",   9000,  "Engineering");
    Lecturer l5 =new Lecturer (2, "Viles",  "Prof", 13500,  "Engineering");
    Lecturer l6 =new Lecturer (2, "Dyson",   "Dr",   7200,  "Engineering");

    /*The code below represent the array list holding objects of the class Lecturer*/

   List<Lecturer> L=new ArrayList<Lecturer>();
   L.add(l1); 
   L.add(l2);
   L.add(l3);
   L.add(l4);
   L.add(l5);
   L.add(l6);

   /* the code below is to create the object for the class Subject*/ 
   Subject s1=new Subject ("EC3000", "Computing Basics",         "Computing",   1, "Mon",      "8-10am",  "S310");
   Subject s2=new Subject ("EE3000", "Engineering Basics",       "Engineering", 2, "Tuesday",  "10-12pm", "S310");
   Subject s3=new Subject ("EC3100", "Programming Fundamentals", "Engineering", 1, "Monday",   "1-3pm",   "S203");
   Subject s4=new Subject ("EE3100", "Engineeering Math",        "Computing",   4, "Thursday", "3-5pm",   "s420");
   Subject s5=new Subject ("EC3200", "Problem Solving",          "Computing",   3, "Friday",   "8-10pm",  "S208");
   Subject s6=new Subject ("EE3200", "Circuit",                  "Enginerring", 4, "Monday",   "10-12pm", "S104");
   Subject s7=new Subject ("EC3300", "Networking",               "Computing",   2, "Tuesday",  "1-3pm",   "S310");
   Subject s8=new Subject ("EE3300", "Electromagnetic",          "Engineering", 5, "Wednesday","1-3pm",   "S330");
   Subject s9=new Subject ("EC3400", "Project",                  "Computing",   3, "Thursday", "3-5pm",   "S312");
  Subject s10 =new Subject("EE3400", "Project",                  "Engineering", 6, "Tuesday",  "10-12pm", "S415");

  /*The code below represent the array list holding objects of the class Subject*/

  Subject[]S=new Subject[10];
  S[0]=s1;
  S[1]=s2;
  S[2]=s3;
  S[3]=s4;
  S[4]=s5;
  S[5]=s6;
  S[6]=s7;
  S[7]=s8;
  S[8]=s9;
  S[9]=s10;

} 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:17:23.103

“主题”应该是“讲师”的子类吗？

如果是这样，您可以通过以下方式在您的 main 方法中创建讲师数组列表：

```
ArrayList <Lecturer> al_lecturers = new ArrayList<Lecturer>();

//create 10 lecturers
for(int i = 0; i < 10; i++){
    al_lecturers.add(new Lecturer());
} 
```

通过使用 ArrayList，您可以利用该类提供的[add()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28E%29)、[remove()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove%28java.lang.Object%29)和[contains()方法来获得您所请求的一些功能。](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#contains%28java.lang.Object%29)

我希望对你有一点帮助。

为了允许用户添加自己的讲师，您可以创建自己的方法来执行此操作：

```
private void addLecturer(/*lecturer info vars*/){
    al_lecturers.add(new Lecturer());
} 
```

然后从用户输入此信息的位置调用此方法，大概是某种[ActionListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:23:15.050

如果您想要一种允许您创建`Lecturer`对象的方法，这里是您如何实现该目标的一个示例（可以有其他方法）

```
public void createLecturer(int num, String name,String title,int num2,String department)
{
   Lecturer lec = new Lecturer(num,name,title,num2,department);
   aList.add(lec);
} 
```

以上将从您传递给方法的参数创建一个新的 Lecturer 对象，并将讲师添加到您选择的列表中。

删除讲师可以简单地使用该`remove`方法完成，该方法接受 Lecturer 对象并将其删除。例如：

```
Lecturer lec = aList.get(0);
aList.remove(lec); 
```

这将从列表中删除第一位讲师。

您可以`contains`以类似的方式使用该方法`remove`来搜索讲师。

最后，更新 Lecturer 对象是使用该`set`方法，该方法获取要更新 Lecturer 详细信息的索引，以及具有新详细信息的 Lecturer 对象。

例如`set(0,lec2)`

希望这能给你一个起点。

# java - 如何退出 rmi 服务器应用程序

> ID：15464121
> 
> 赞同：0
> 
> 时间：2013-03-17T17:52:57.147
> 
> 标签：java, rmi

如果我们有一个 RMI 服务器应用程序，它通过 autosys 永久运行，然后在夜间关闭几个小时，如果应用程序是从命令行启动的，我们如何发送关闭消息。

例如，我们使用 jar 启动`java -jar server.jar`，现在应用程序正在运行。如果它包含一个`applicationClose()`方法，我们如何调用它 - 我们可以解析来自客户端的消息，但这当然是不可取的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:56:48.443

提供关闭请求方法是完全可以接受的，它返回 OK 然后调用`System.exit()`.

在调用它之前，您可能希望使用某种必需的凭据对其进行保护，但除此之外，您没有理由不能这样做。

另一个选项是让进程使用您自己的协议打开另一个 TCP 端口以进行关闭，或者安装 JMX 扩展以远程关闭服务。

# linux - SVN。访问权限

> ID：15464125
> 
> 赞同：2
> 
> 时间：2013-03-17T17:53:32.553
> 
> 标签：linux, svn, ubuntu

我无法正确配置访问权限。一旦规则似乎不起作用。一些目录 - 它应该是，有些不是。

我在两个文件夹中有一个存储库 -**一**、**二**。三个用户 - 管理员、用户、访客。需要的权利是：

*   admin - 读写 /
*   **user, guest - 只能在一个**文件夹中读写

我在 svnserve.conf 中写道：

```
 anon-access = none 
 auth-access = write 
 authz-db = /svn.acl 
```

添加到文件/etc/apache2/conf.d/svn：

```
AuthzSVNAccessFile /etc/apache2/svn.acl 
```

文件 svn.acl：

```
[/]
admin = rw
* = 

[/one]
user,quest = rw

[/two]
admin = rw
* = 
```

最终**用户**仍然看到这**两个**目录！有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:07:27.617

与 UNIX 目录权限一样，用户可以看到*他们*无权访问的目录存在，但他们看不到该目录的内容。没有用户应该能够看到里面`/two`。

# php - 将多条数据插入一张表

> ID：15464130
> 
> 赞同：0
> 
> 时间：2013-03-17T17:53:39.090
> 
> 标签：php, mysql, loops, for-loop

如何在数据库中插入多条数据？当我插入具有多个订单的数据时，数据库中只插入了一项。我需要帮助把它变成一个循环。

这是我目前正在使用的代码：

```
foreach ($_SESSION["cart_array"] as $each_items){
    $item_id = $each_items['item_id'];
    $quantity = $each_items['quantity'] ;
    $sql = mysql_query("SELECT * FROM product WHERE id = '$item_id'");
    while($row = mysql_fetch_array($sql)){
    $product_name = $row['name'];
    $price = $row['price'];
    $total_price = $price * $quantity;
    mysql_query("INSERT INTO customer_order(
    id,quantity,item_id,
    total_price,shipping_address,
    shipping_date,customer_id)
    VALUES ('','$quantity','$item_id','$total_price',
    '','',
    '$lastId')") or die (mysql_error());
    }
} 
```

这是我尝试过的，但它产生了语法错误：

```
foreach ($_SESSION["cart_array"] as $each_items){
    $item_id = $each_items['item_id'];
    $item_id_count = count($item_id) ;
    $quantity = $each_items['quantity'] ;
    $sql = mysql_query("SELECT * FROM product WHERE id = '$item_id'");
    while($row = mysql_fetch_array($sql)){
       $product_name = $row['name'];
       $price = $row['price'];
       $total_price = $price * $quantity;
       foreach($i=0,$i < $item_id_count,$i++){
          mysql_query("INSERT INTO customer_order(
          id,quantity,item_id,
          total_price,shipping_address,
          shipping_date,customer_id)
          VALUES ('','$quantity','$item_id','$total_price',
          '','',
          '$lastId')") or die (mysql_error());
       }
    }
} 
```

如何正确编写循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:06:12.293

你写`foreach($i=0,$i < $item_id_count,$i++)`的地方我认为你的意思

```
for ($i=0 ; $i < $item_id_count ; $i++ ) 
```

# objective-c - NSString 的 stringWithContentsOfURL 使用浏览器 cookie？

> ID：15464133
> 
> 赞同：2
> 
> 时间：2013-03-17T17:53:55.750
> 
> 标签：objective-c, cocoa, cookies, nsstring

我正在开发一个从社区网站下载网页并解析结果的objective-c 项目。下载代码如下所示：

```
NSError* error = nil;
    NSString* text = [NSString stringWithContentsOfURL:fileUrl encoding:NSASCIIStringEncoding error:&error];
    if(text) {
        return text;
    }
    else {
        NSLog(@"Error = %@", error);
        return nil;
    } 
```

奇怪的是，当我从该站点下载时，我看到的结果内容只有在登录该站点时才能看到（在我的浏览器中，我就是这样）。

该方法 (NSString stringWithContentsOfURL:encoding:error) 在执行请求时是否使用浏览器 cookie？如果是这样，它是专门集成的 Safari 吗？默认浏览器？我似乎找不到描述我所看到的行为的文档。我对这种行为没有意见（事实上，它更可取），但如果我完全理解发生了什么，我只想依赖它。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:51:33.410

Cookie 会自动处理并存储在应用程序的`NSHTTPCookieStorage`共享实例中。调用该`cookies`方法并检查您的 cookie 是否存在。如果是，那么这证实了你的怀疑。

编辑：我高度怀疑你`UIWebView`在你的应用程序中使用 a 并从那里登录。在这种情况下，是的，cookie 存储在您的应用程序的`NSHTTPCookieStorage`共享实例中，并将用于进一步的 URL 请求。

# django - Django 建模如何使用 select_related

> ID：15464135
> 
> 赞同：1
> 
> 时间：2013-03-17T17:54:01.107
> 
> 标签：django, django-models

我不是 100% 这是 Django 的新手。我想列出属于我的组的所有联系人名字。我只加载组以保存两次命中数据库，我被告知使用 select_related 来实现这一点。以下是我尝试过的。有人可以解释我做错了什么吗？谢谢你。

模型.py

```
class Group(models.Model):
    name = models.CharField(max_length=60)
    user = models.ForeignKey(User, related_name="user")

class Contact(models.Model):
    first_name = models.CharField(max_length=60)
    group = models.ForeignKey(Group) 
```

m view.py 的一部分

```
 if id:
        # If we have an id try and get it and populate instance.
        group = get_object_or_404(Group.objects.select_related(), pk=id)
        show_upload = True
        # If we have an instance check that it belongs to the login.
        if group.user != request.user:
            return HttpResponseForbidden() 
```

我试图列出联系人名字的模板部分

```
 {% for item in group.contact %}
        <tr>

        {{ item.first_name }}

        </tr>
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:07:32.717

你可以这样做：

```
group_instance.contact_set.all().values_list('first_name',flat=True) 
```

请参阅此页面上有关相关对象的[示例。](http://www.djangobook.com/en/2.0/chapter10.html)（“访问外键值”部分）

[select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related)用于数据库级别的 JOIN。

[此处](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#get-object-or-404)`get_object_or_404`描述了of 的使用。

```
def my_view(request):
    my_object = get_object_or_404(MyModel, pk=1) 
```

相当于

```
def my_view(request):
    try:
        my_object = MyModel.objects.get(pk=1)
    except MyModel.DoesNotExist:
        raise Http404 
```

# vim - 如何使用 vim 编辑我的命令行？

> ID：15464141
> 
> 赞同：1
> 
> 时间：2013-03-17T17:54:20.307
> 
> 标签：vim

例如，当我输入一个长命令并且我想删除第二个单词时，我希望能够键入`<Esc> b b dw`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T17:55:57.403

您可以使用`set -o vi`类似 Vim 的快捷方式。

为了使它永久化，你需要把它放在你的 shell 的 rc 文件中（例如 for `bash`， put `set -o vi`in `~/.bashrc`）。

然后，您应该注销并重新登录，或者只使用`$ source ~/.bashrc`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T18:25:41.073

最佳策略取决于您使用命令行的经验。

在开始学习 Vim 之前，我学习并习惯了 bash 中使用的默认的类似 emacs 的映射*。*它们在我的手指中根深蒂固，我什至无法考虑启用“vi 模式”。如果你使用 bash 的经验比使用 Vim 多，我会说“vi 模式”对你帮助不大。另一方面，如果您有更多的 Vim 经验或刚开始使用这两种方法，您可能会喜欢熟悉的“vi 模式”。

对于它的价值，我实际上认为“vi模式”非常接近无用。在命令行上，您正在插入文本，而 Vi[m] 在这方面并不比其他人好。当您想编辑命令时，“vi 模式”具有令人讨厌的光芒，无法与适当的编辑器的功能相提并论。

`<C-x><C-e>`提供您梦寐以求的最佳编辑体验，为什么还要为有限的“vi 模式”烦恼呢？

尝试`fc`并`fc -l`获得更多好处。

# mdx - 蒙德里安虚拟立方体不显示成员

> ID：15464143
> 
> 赞同：1
> 
> 时间：2013-03-17T17:54:34.080
> 
> 标签：mdx, mondrian

我有一个虚拟维度。当我查询多维数据集时结果是正确的，但是当我通过虚拟多维数据集查询时，没有显示成员。

查询：

```
--From cube:

SELECT
NON EMPTY {Hierarchize({[Measures].[MyMeasure]})} ON COLUMNS,
NON EMPTY {Hierarchize({{[MyVirtualDim Usage 0.New Hierarchy 0].[All MyVirtualDim Usage 0.New Hierarchy 0s]}, {[MyVirtualDim Usage 0.New Hierarchy 0].[New Level 0].Members}, {[MyVirtualDim Usage 0.New Hierarchy 0].[curs].Members}})} ON ROWS
FROM [MyCube]

--From virtual cube:

SELECT
NON EMPTY {Hierarchize({[Measures].[MyMeasure]})} ON COLUMNS,
NON EMPTY {Hierarchize({{[MyVirtualDim.New Hierarchy 0].[All MyVirtualDim.New Hierarchy 0s]}, {[MyVirtualDim.New Hierarchy 0].[New Level 0].Members}, {[MyVirtualDim.New Hierarchy 0].[curs].Members}})} ON ROWS
FROM [MyVirtualCube] 
```

结果：

```
--from cube (right)

Axis #0:
{}
Axis #1:
{[Measures].[MyMeasure]}
Axis #2:
{[MyVirtualDim Usage 0.New Hierarchy 0].[All MyVirtualDim Usage 0.New Hierarchy 0s]}
{[MyVirtualDim Usage 0.New Hierarchy 0].[1]}
{[MyVirtualDim Usage 0.New Hierarchy 0].[1].[1]}
{[MyVirtualDim Usage 0.New Hierarchy 0].[1].[2]}
Row #0: 5
Row #1: 5
Row #2: 3
Row #3: 2

--from virtual cube (bad)

Axis #0:
{}
Axis #1:
{[Measures].[MyMeasure]}
Axis #2:
{[MyVirtualDim.New Hierarchy 0].[All MyVirtualDim.New Hierarchy 0s]}
Row #0: 5 
```

这里模式定义：

```
<Schema name="New Schema1">

    <Dimension  visible="true" name="MyVirtualDim">
      <Hierarchy name="New Hierarchy 0" visible="true" hasAll="true">
        <Table name="dim2" schema="public" alias="">
        </Table>
        <Level name="New Level 0" visible="true" table="dim2" column="id_nivell" nameColumn="id_nivell" type="Integer" internalType="int" uniqueMembers="false" levelType="Regular" caption="nivell" captionColumn="nom_nivell">
          <Property name="nivell" column="nom_nivell" type="String" description="nivell">
          </Property>
        </Level>
        <Level name="curs" visible="true" table="dim2" column="id_curs" nameColumn="id_curs" type="Integer" internalType="int" uniqueMembers="false" levelType="Regular" captionColumn="nom_curs">
          <Property name="curs" column="nom_curs" type="String" description="curs">
          </Property>
        </Level>
      </Hierarchy>
    </Dimension>

  <Cube name="MyCube" visible="true" cache="true" enabled="true">
    <Table name="facts" schema="public">
    </Table>
    <DimensionUsage source="MyVirtualDim" name="MyVirtualDim Usage 0" visible="true" foreignKey="fk_dim2" >
    </DimensionUsage>
    <Measure name="MyMeasure" column="id" datatype="Integer" aggregator="count" visible="true">
    </Measure>
  </Cube>

  <VirtualCube enabled="true" name="MyVirtualCube" visible="true">

    <CubeUsages>
      <CubeUsage cubeName="MyCube" >
      </CubeUsage>
    </CubeUsages>

    <VirtualCubeDimension visible="true" name="MyVirtualDim">
    </VirtualCubeDimension>

    <VirtualCubeMeasure cubeName="MyCube" name="[Measures].[MyMeasure]" visible="true">
    </VirtualCubeMeasure>

  </VirtualCube>
</Schema> 
```

有人能看出问题出在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:06:15.277

解决了，

虚拟维度和虚拟多维数据集按预期运行。要解决我的问题，只需更改维度名称：

```
 <Cube name="MyCube" visible="true" cache="true" enabled="true">
    <Table name="facts" schema="public">
    </Table>
    <DimensionUsage source="MyVirtualDim" name="MyVirtualDim Usage 0" <--here! 
```

应该命名：`MyVirtualDim`而是`MyVirtualDim Usage 0`因为是多维数据集中维度的名称。

# vba - VBA查找值是否在值中

> ID：15464144
> 
> 赞同：7
> 
> 时间：2013-03-17T17:54:37.747
> 
> 标签：vba

我有一个值`y`，我想知道该值是否在这组值中：`x1, x2, ... xn`。

我可以这样做：

```
if(y = x1 or y = x2 or .....) 
```

但是有更好的方法吗？伪代码：

```
if(y in (x1, x2, ...., xn)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:19:38.393

你可以编写一个像这样的辅助函数：

```
Public Function FindValue(ByVal ValueToFind As Variant, ParamArray SearchIn() As Variant)

    Dim i As Integer

    For i = 0 To UBound(SearchIn)
        If SearchIn(i) = ValueToFind Then
            FindValue = True
            Exit Function
        End If
    Next

End Function 
```

第二个参数 ( `ParamArray`) 是一个数组，因此您实际上可以传递不定数量的参数。

因此，您可以将所有值传递给此函数——首先要查找的值，然后是要搜索的所有值：

```
Dim Found As Boolean

Found = FindValue(y, x1, x2, x3, xn) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-15T17:39:23.893

您可以以相同的方式使用 Select Case (if then else)：

```
Select Case Y
       Case X1, X2, X3, ...
            Do if True
       Case Else
            Do if False
End Select 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T17:56:51.477

使用数组：

```
dim x(10)

x(1)=....
x(2)=....

y=....

for i=1 to 10
    if x(i)=y then
         ....
    end if
next i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T20:49:41.423

**还有一种方式**

您可以访问 MS-Access 2000+ 吗？如果是这样，请添加 Access Objects 库引用，您将能够使用 Eval 函数：

```
result = Eval("'y' IN ('x1', 'x2', '...' 'xn')") 
```

它评估字符串表达式。`IN`可以使用一些 SQL 运算符，如。查看[文档](http://msdn.microsoft.com/en-us/library/office/aa159060%28v=office.10%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T18:06:53.167

```
dim values as string
values = "1,2,3,4,5,"  'Note that comma is a separator and added towards the end as well.

dim lookupValue as string
lookupValue = ",4,"

dim found as Boolean
found = (instr(1, values, lookupValue) <> 0)

if found then

end if 
```

编辑：另一种方式

```
dim lookupValue as long
lookupValue = 21000

dim values
set values = CreateObject("Scripting.Dictionary")

with values
   .Add 1, 1
   .Add 10, 1
   .Add 100, 1
   .Add 1000, 1
   .Add 10000, 1
end with

dim found as Boolean
found = values.Exists(lookupValue) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T18:09:54.410

检查值是否存在的很简单的想法是使用`Match`函数：

```
Dim myTBL As Variant
    myTBL = Array(20, 30, 40, 50, 60)

'if value '30' exists in array than the position (which is >0) will be returned
    Debug.Print WorksheetFunction.Match(30, myTBL, 0) 
```

唯一的问题是，如果该值不存在，则 Match 函数会返回错误。因此，您应该使用错误处理技术。

对于不存在的值“70”，这可能看起来像：

```
'if doesn't exists error would be returned
On Error Resume Next
    Debug.Print WorksheetFunction.Match(70, myTBL, 0)
If Err.Number <> 0 Then
    Debug.Print "not exists"
    Err.Clear
End If 
```

不幸的是，这只适用于 Excel。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-28T03:57:51.033

选择一个在任何值中都不存在的分隔符（例如管道“|”），您可以在一行中完成：

```
If "|x1|x2|...|xn|" Like "*|" & y & "|*" Then 
```

# php - Zend Framework 2 AbstractRestfulController - JSON 格式的异常

> ID：15464146
> 
> 赞同：0
> 
> 时间：2013-03-17T17:54:49.540
> 
> 标签：php, zend-framework2

我的目标是得到一个 JSON

```
{ 
  "meta": { 
    "error_type": "error type", 
    "code": 400, 
    "error_message": "error msg" 
  } 
} 
```

万一出了什么问题。我试图将 try catch 块放在其余控制器的操作和模型中，但我得到了整个异常堆栈（我的意思是布局 + 视图）

什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:33:06.983

> [我尝试将 try catch 块都放在动作休息控制器中]

我刚刚尝试过（我希望我的目标成为现实，但只有在出现问题时:)）

```
public function create($data) 
{ 
        try{ 
    $artist = $this->getRequest()->getPost('artist', null); 
        $title = $this->getRequest()->getPost('title', null); 
        $album = new Album(); 
        $album->exchangeArray(array('artist'=>$artist,'title'=>$title)); 
        $id = $this->getAlbumTable()->saveAlbum($album); 
        return $this->get($id);   
     } 
     catch (Exception $e) { 
      return new JsonModel(array( 
                'meta' =>array( 
                    'code'=>500, 
                    'error-num'=>$e->getCode(), 
                    'error-msg'=>$e->getMessage(), 
                ) 
            )); 
        } 

 } 
```

但如上所述，它不起作用而不是 json 数据，我得到了带有布局的整个默认异常堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:03:33.100

在控制器操作中捕获异常。

从包含异常信息的操作中返回一个 JsonModel：

```
public function someAction()
{
    try {
        throw new Exception();
    }
    catch (Exception $e) {
        return new JsonModel(array(
            'meta' => array(
                'code'          => $e->getCode(),
                'error_message' => $e->getMessage(),
                //...
            )
        ));
    }
    //...
} 
```

来源：[从 ZF2 控制器操作返回 JSON](http://akrabat.com/zend-framework-2/returning-json-from-a-zf2-controller-action/)

# java - 在 Spring JDBC 中检索具有关联的对象

> ID：15464148
> 
> 赞同：0
> 
> 时间：2013-03-17T17:54:58.830
> 
> 标签：java, spring, jdbc, spring-jdbc

我对使用 Spring JDBC 相当陌生，我现在要从数据库中检索与其他对象（一对多、一对一......）有关联的对象。我想知道这样做的正确方法是什么？我已经阅读了这个答案[Spring Framework JDBC DAO with agrgegation/composition](https://stackoverflow.com/questions/3085124/spring-framework-jdbc-dao-with-agrgegation-composition)，它基本上建议使用我不会导致性能的 ORM 框架，我发现 Spring JDBC 使用起来非常愉快。

该问题的原始海报显示了在另一个 dao/repository 类中使​​用一个存储库/dao 方法的示例。这也是我的猜测，但据我了解，您使用两个不同的连接，如果您还有其他存储库，它可能会增加。即使使用 Glassfish 提供的连接池，这很糟糕吗？

我不确定我是否理解对问题的回答，也不知道这是否是正确的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:27:47.037

Spring JDBC 总是在一个事务的范围内使用同一个连接，所以你不必担心连接数，你只需要确保对象的加载发生在单个事务内即可。

看看`DataSourceUtils.doGetConnection()`您是否对如何从数据源检索连接感兴趣。

# orchardcms - 在果园 CMS 中，填写必填字段

> ID：15464149
> 
> 赞同：0
> 
> 时间：2013-03-17T17:55:08.600
> 
> 标签：orchardcms

我正在编辑内容类型“博客文章”，并添加了自己的字段（类型分类）。现在我想将其设为必填字段，因此当用户添加新博客文章时它是强制性的。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:59:04.347

我相信您必须自己创建和处理“必需”属性 - 您应该能够通过查看 Orchard.Fields 项目中所有内置字段的完成方式来解决这个问题。例如，在 MediaPickerField 的驱动程序中：

```
 protected override DriverResult Editor(ContentPart part, Fields.MediaPickerField field, IUpdateModel updater, dynamic shapeHelper) {
            // if the model could not be bound, don't try to validate its properties
            if (updater.TryUpdateModel(field, GetPrefix(field, part), null, null)) {
                var settings = field.PartFieldDefinition.Settings.GetModel<MediaPickerFieldSettings>();

                var extensions = String.IsNullOrWhiteSpace(settings.AllowedExtensions)
                        ? new string[0]
                        : settings.AllowedExtensions.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries);

                if (extensions.Any() && field.Url != null && !extensions.Any(x => field.Url.EndsWith(x, StringComparison.OrdinalIgnoreCase))) {
                    updater.AddModelError("Url", T("The field {0} must have one of these extensions: {1}", field.Name.CamelFriendly(), settings.AllowedExtensions));
                }

                if (settings.Required && String.IsNullOrWhiteSpace(field.Url)) {
                    updater.AddModelError("Url", T("The field {0} is mandatory", field.Name.CamelFriendly()));
                }
            }

            return Editor(part, field, shapeHelper);
        } 
```

请注意，在返回编辑器之前，它会检查该字段是否已设置为必需，如果已设置并且有注释，则它会调用 updater.AddModelError()。我想您也必须为您的分类字段实现必需的属性。

# python - Python：如何使用带有 2 种输入类型的 txt 文件的循环

> ID：15464156
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:56:12.413
> 
> 标签：python, loops, input

我需要编写一个具有名称列表的程序，并且在每组名称（在 2 行中）下面是 2 组逗号（1,2）

所以像这样

```
Jane
Doe
14.5,12.3 
```

用相同的 3 行重复，直到循环到达 0,0，这就是终止循环的原因。

我如何准确地编写一个同时输入的循环，以及如何在字符串和数字之间分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:03:02.497

如果项目分为三行，我会使用：

```
data = []
with open('inputfile.txt') as inf:
    numbers = None
    while numbers != [0, 0]:
        name1 = next(inf).strip()
        name2 = next(inf).strip()
        numbers = [float(n) for n in next(inf).split(',')]
        data.append((name1, name2, numbers)) 
```

这将输入文件用作可迭代的，一次获取 3 行，直到`numbers`等于`[0, 0]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:45:17.867

可能有意义的第一步是将您的列表缩减为您需要的名称和数字。你可以很容易地做到这一点，因为你只对第一行之前的 '0,0' 列表部分感兴趣：你可以只取该行的索引并在那里切片列表以获得该部分：

```
your_data = ['Jane', 'Doe', '14.5,12.3', etc etc]
z_index = your_data.index('0,0')
new_data = your_data[:z_index + 1] # +1 to include '0,0' as the last element 
```

从那里开始，这取决于您想要对数据实际执行的操作。但是，假设您想要一个包含名称和数字的字典列表：

```
results = []
while new_data:
    results.append({'first':new_data[0],
                    'last':new_data[1],
                    'numbers':new_data[2]})
    new_data = new_data[3:] 
```

数字对在这里仍然是字符串，因为它是从您的 txt 文件中读取的。如果需要，您可以在将数字分配给字典时拆分数字并将它们转换为浮点数。

另外，我在这里做了一些假设：您的列表将始终包含“0,0”行，并且不可能丢失任何第一/最后/数字行。如果情况并非总是如此，您将需要一些逻辑来处理异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:16:53.713

我对它的使用`takewhile`和一个自定义函数使用`ast.literal_eval`，以及来自的`grouper`配方`itertools`，然后再将其转置一点，例如：

```
from itertools import takewhile, izip_longest
from ast import literal_eval

def until_0(text):
    try:
        return literal_eval(text) != (0, 0)
    except ValueError:
        return True

with open('/home/jon/data.txt') as fin:
    lines = (line.rstrip() for line in fin)
    data = list(takewhile(until_0, lines))

def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args)

print [list(el) for el in grouper(3, data, fillvalue='0,0')]
# [['Jane', 'Doe', '14.5,12.3'], ['Jane', 'Doe', '6.7,2.3'], ['John', 'Doe', '0,0']] 
```

# html - 带有 multipart/form-data 的多个提交按钮值

> ID：15464158
> 
> 赞同：0
> 
> 时间：2013-03-17T17:56:26.453
> 
> 标签：html, servlets, multipartform-data

处理多部分文件上传表单。将 Java 与 Servlet 3.0 一起使用。似乎与多部分，提交按钮的值没有传递给服务器？

例如

```
<form method="POST" enctype="multipart/form-data" action="/servlet">
    <input type="hidden" name="mode"   value="image">
    <input type="hidden" name="id"     value="123"> 
    <input type="file"   name="file" id="file">
    <input type="submit" name="action" value="Upload">
    <input type="submit" name="action" value="Delete">
</form> 
```

在常规帖子中，您只需检查“action”参数的值。您如何以多部分形式访问它？我尝试检查请求中的部件，但它不存在。

例如

```
Collection<Part> parts = request.getParts();
System.out.println("parts: "+parts.size());
for(Part part : parts){
    System.out.println(part.getName());
} 
```

输出：

```
parts: 3
mode
id
file 
```

如...

```
 String mode = request.getParameter("mode"); //reads "image"
    String id   = request.getParameter("id");   //read "123"
    String action = request.getParameter("action"); //reads null 
```

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:21:35.697

在提交之前，使用 Javascript 声明一个隐藏字段并根据单击的提交按钮设置其值

```
<input type="hidden" name="submitType" value=""> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:37:57.197

首先在您的程序中导入多部分 jar 文件，然后
尝试使用 multipartrequest 类从您的表单中访问多部分数据 -

```
MultipartRequest mpr=new MultipartRequest(request,"C:");
String ad=mpr.getParameter("made");                    // read "image"
String ad=mpr.getParameter("id");                    // read "123"
String ad=mpr.getParameter("action");    // if u submit from from upload then it read "upload" or submit from delete then it read "delete" String . 
```

# javascript - 从选择日期生成输入字段值

> ID：15464161
> 
> 赞同：0
> 
> 时间：2013-03-17T17:56:46.080
> 
> 标签：javascript, jquery

我有这个代码

这个：http: [//jsfiddle.net/fauzi/ByTtp/](http://jsfiddle.net/fauzi/ByTtp/)

所以我想生成输入字段值 birhtday 选项被选中。我制作 javascript，但混淆生成月份和年份。

```
$(document).ready(function() {

    $("#pelajar_tglahir_3i option").filter(function() {
        return $(this).val() == $("#pelajar_code").val();
    }).attr('selected', true);

    $("#pelajar_tglahir_3i").live("change", function() {
        $("#pelajar_code").val($(this).find("option:selected").attr("value"));
    });

}); 
```

Example When select birthday is `1 March 1990`and input field value is `1March1990`..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:21:29.683

最简单的方法就是连接值..在`on()`方法上像这样

```
var dateStr=$("#pelajar_tglahir_3i").val()+$("#pelajar_tglahir_2i").find("option:selected").text()+$("#pelajar_tglahir_1i").val();
$("#pelajar_code").val(dateStr); 
```

这是[jsfiddle](http://jsfiddle.net/ByTtp/4/) ..您可能需要进行一些验证..

# asp.net - 错误：“已声明为受保护的 WithEvents”

> ID：15464167
> 
> 赞同：2
> 
> 时间：2013-03-17T17:57:06.073
> 
> 标签：asp.net, vb.net

网页控制

```
<asp:TextBox id="txtUsername" runat="server" CssClass="input-block-level" placeholder="Username" type="text" required></asp:TextBox>
<asp:TextBox id="txtPassword" runat="server" CssClass="input-block-level" placeholder="Password" type="password" required></asp:TextBox> 
```

代码背后

```
Inherits System.Web.UI.MasterPage
Protected WithEvents txtUsername As System.Web.UI.WebControls.Literal
Protected WithEvents txtPassword As System.Web.UI.WebControls.Literal 
```

错误：

> 解析错误：“txtPassword”已声明为“Protected WithEvents txtPassword As System.Web.UI.Webcontrols.TextBox in”此类
> “txtUsername”已声明为“Protected WithEvents txtUsername As System.Web.UI.Webcontrols.TextBox in” ' 这节课

错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-13T15:47:50.273

我知道这已经晚了 3 年，但我刚刚解决了这个问题，我会分享我的解决方案来帮助任何在这里绊倒的人。

当我注释掉一个控件，在项目的其他部分工作，然后取消注释时，我得到了这个错误。

只需在 aspx 和 aspx.vb 中更改控件的 ID，错误就会消失。

```
<!-- changed from txt to text -->
<asp:TextBox id="textUsername" runat="server" CssClass="input-block-level" placeholder="Username" type="text" required></asp:TextBox>
<asp:TextBox id="textPassword" runat="server" CssClass="input-block-level" placeholder="Password" type="password" required></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:05:12.923

当您将控件添加到 aspx 页面时，您的控件将添加到与您的代码隐藏文件同名的部分类中。如果您再次将 then 添加到代码文件中，您将收到错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T20:58:47.473

您可能有两个或多个具有相同类名的 Web 窗体。

**somepage.aspx**和**anotherpage.aspx**的内容：

```
<%@ Page ... Inherits="somepage" %>
... 
```

**somepage.aspx.vb**和**anotherpage.aspx.vb**的内容：

```
Partial Class somepage
    ...
End Class 
```

在上面的示例代码中，更改**anotherpage.***文件中的`Inherits`属性和类名以解决问题。如果您使用 C#，代码隐藏看起来会有些不同，但这是相同的想法。**`anotherpage`**

# javascript - 如何在 JavaScript 中设置默认布尔值？

> ID：15464169
> 
> 赞同：64
> 
> 时间：2013-03-17T17:57:25.683
> 
> 标签：javascript, boolean

在 JavaScript 中设置默认可选值通常是通过`||`字符来完成的

```
var Car = function(color) {
  this.color = color || 'blue';
};

var myCar = new Car();
console.log(myCar.color); // 'blue'

var myOtherCar = new Car('yellow');
console.log(myOtherCar.color); // 'yellow' 
```

之所以有效，是因为`color`是`undefined`并且`undefined || String`始终是`String`. 当然，`String || undefined`反之亦然`String`。当两个`Strings`在场时，第一个获胜`'this' || 'that'`的是`'this'`。它不能按原样`'that' || 'this'`工作`'that'`。

问题是：如何使用布尔值实现相同的效果？

举个例子

```
var Car = function(hasWheels) {
  this.hasWheels = hasWheels || true;
}

var myCar = new Car();
console.log(myCar.hasWheels); // true

var myOtherCar = new Car(false)
console.log(myOtherCar.hasWheels); // ALSO true !!!!!! 
```

因为`myCar`它有效，因为`undefined || true`is`true`但正如您所见，它不适用于`myOtherCar`因为`false || true`is `true`。`true || false`改变顺序仍然没有帮助`true`。

因此，我在这里遗漏了什么还是以下设置默认值的唯一方法？

```
this.hasWheels = (hasWheels === false) ? false: true 
```

干杯!

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-03-17T18:01:15.980

你可以这样做：

```
this.hasWheels = hasWheels !== false; 
```

这会给你一个`true`值，除非`hasWheels`是显式的`false`。（其他虚假值，包括`null`and `undefined`，将导致`true`，我认为这是你想要的。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T18:00:40.830

怎么样：

```
this.hasWheels = (typeof hasWheels !== 'undefined') ? hasWheels : true; 
```

您的另一个选择是：

```
this.hasWheels = arguments.length > 0 ? hasWheels : true; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-02T02:52:10.977

从发布的答案中需要注意一些变化。

```
var Var = function( value ) {
    this.value0 = value !== false;
    this.value1 = value !== false && value !== 'false';
    this.value2 = arguments.length <= 0 ? true : arguments[0];
    this.value3 = arguments[0] === undefined ? true : arguments[0];
    this.value4 = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];
};

                     value0   value1   value2        value3         value4
---------------------------------------------------------------------------
Var("")              true     true     true          true           true
Var("''")            true     true     ''            ''             ''
Var("0")             true     true     0             0              0
Var("'0'")           true     true     '0'           '0'            '0'
Var("NaN")           true     true     NaN           NaN            NaN
Var("'NaN'")         true     true     'NaN'         'NaN'          'NaN'
Var("null")          true     true     null          null           null
Var("'null'")        true     true     'null'        'null'         'null'
Var("undefined")     true     true     undefined     true           true
Var("'undefined'")   true     true     'undefined'   'undefined'    'undefined'
Var("true")          true     true     true          true           true
Var("'true'")        true     true     'true'        'true'         'true'
Var("false")         false    false    false         false          false
Var("'false'")       true     false    'false'       'false'        'false' 
```

*   `value1`如果需要它是布尔假，则特别是由`value0`字符串“假”制成。我发现这种放松有时很有用。
*   `value2`并且`value3`是对原始发布答案的修改以保持一致性，而不改变结果。
*   `value4`是 Babel 编译默认参数的方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-01T16:58:01.067

您可以使用 ECMA6 中的[默认函数参数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters)功能。今天，ECMA6 仍然没有在浏览器中得到完全支持，但你可以使用[babel](https://babeljs.io/)并立即开始使用新功能。

因此，原始示例将变得如此简单：

```
// specify default value for the hasWheels parameter
var Car = function(hasWheels = true) {
  this.hasWheels = hasWheels;
}

var myCar = new Car();
console.log(myCar.hasWheels); // true

var myOtherCar = new Car(false)
console.log(myOtherCar.hasWheels); // false 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-17T10:36:38.990

没有太多混淆，您可以这样做以获得默认值。

`this.hasWheels=typeof hasWheels === 'boolean'?hasWheels:true`

获取默认 false

`this.hasWheels=typeof hasWheels === 'boolean'?false`

# php - 显示复选框数据mysql

> ID：15464171
> 
> 赞同：1
> 
> 时间：2013-03-17T17:57:36.710
> 
> 标签：php, html, mysql, checkbox, show

我有一些小错误，想知道是否有人可以提供帮助！

我正在为一所大学创建一个考勤系统。

**这个场景：**

学生成功登录，然后想要查看他/她对特定课程的出勤率。

**问题**：我希望它显示来自 mysql 的已检查和未检查数据，它当前显示一个空复选框（当它意味着要检查时）同时它显示大量重复数据，是否有可能我可以限制它，比如说例如每周显示一条记录，它显示所有数据并复制它。

```
<?php

$q3= "SELECT attendance.week_number_id, attendance.week_number, courses.course_id, students.student_id, course_attendance.present, course_attendance.notes
 FROM courses, course_attendance, attendance, students
WHERE course_attendance.student_id= ".$_SESSION['student_id']." AND course_attendance.course_id= courses.course_id AND course_attendance.week_id= attendance.week_number_id AND courses.course_id='101'  
 ";

$result = mysql_query($q3)  or die(mysql_error());

echo "<table border='1' align='center'><tr>  <th><strong>Week Number</strong></th> <th><strong>Present</strong></th> <th><strong>Notes</strong></th>  </tr> ";
while($row = mysql_fetch_assoc($result))
{
    extract($row);
echo 

"</td><td  width='200' align='center'>" .$row['week_number'].
"</td><td  width='400' align='center'><input type='checkbox' name='present'" .$row['present']. 
"</td><td  width='400' align='center'>" .$row['notes'].
"</td><tr>";
}
echo "</table>";
?> 
```

注意：我已成功连接到数据库，mysql 已启动并正在运行，我正在使用会话，目前它确实显示学生的数据但不显示现有的选中或未选中值，复选框为空。

谁能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:05:46.850

在您的代码中，您没有正确定义要检查的复选框。`checked="true"`如果“当前”字段为 1 ，则创建一个添加代码。

```
<?php

    $q3 = " SELECT attendance.week_number_id, attendance.week_number, courses.course_id, students.student_id, course_attendance.present, course_attendance.notes 
            FROM courses, course_attendance, attendance, students
            WHERE course_attendance.student_id= ".$_SESSION['student_id']." AND course_attendance.course_id= courses.course_id AND course_attendance.week_id= attendance.week_number_id AND courses.course_id='101'";

    $result = mysql_query($q3) or die(mysql_error());

    echo "
        <table border='1' align='center'>
            <tr>
                <th><strong>Week Number</strong></th>
                <th><strong>Present</strong></th> 
                <th><strong>Notes</strong></th>  
            </tr>
        ";

    while($row = mysql_fetch_assoc($result)) {
        $checked = '';
        if($row['present'] == 1) {
            $checked = ' checked="true"';
        }

        echo "
            <tr>
                <td width='200' align='center'>" . $row['week_number'] . "</td>
                <td width='400' align='center'>
                    <input type='checkbox' name='present'" .$checked . "/>
                </td>
                <td width='400' align='center'>" . $row['notes'] . "</td>
            </tr>
        ";
    }

    echo "</table>";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:07:19.777

您的

```
echo 
    "</td><td  width='200' align='center'>" .$row['week_number'].
    "</td><td  width='400' align='center'><input type='checkbox' name='present'" .$row['present']. 
    "</td><td  width='400' align='center'>" .$row['notes'].
    "</td><tr>"; 
```

声明应该是

```
$present = "";
if(.$row['present']==1)
{
   $present = "checked =checked/>";    
}
else
{
   $present = "/>";    
 } 
```

echo "" .$row['week_number']。"" .$row['notes']。"";

希望这对您有所帮助。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:35:58.897

```
$checked = '';
if($present == 1) {
    $checked = 'checked="checked"';
}

echo "</td><td  width='200' align='center'>" .$row['week_number'].
"</td><td  width='400' align='center'><input type='checkbox' name='present'" .$checked . "/>" . 
"</td><td  width='400' align='center'>" .$row['notes'].
"</td><tr>";
}
echo "</table>"; 
```

尝试。

# rvm - Capistrano 部署在部署期间找不到某些 gem（可能与 RVM 相关）

> ID：15464172
> 
> 赞同：0
> 
> 时间：2013-03-17T17:57:37.833
> 
> 标签：rvm, capistrano, ubuntu-12.04, linode, rvm-capistrano

我一直在尝试使用 Capistrano 部署到 VPS，以下命令给我带来了很多错误：

```
* executing "cd -- /home/work/for_linode/releases/20130317174830 && rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- /home/work/for_linode/shared/assets/manifest.yml /home/work/for_linode/releases/20130317174830/assets_manifest.yml" 
```

结果如下：

```
servers: ["50.116.11.160"]
    [50.116.11.160] executing command
*** [err :: 50.116.11.160] rake aborted!
*** [err :: 50.116.11.160] Could not find activesupport-3.2.11 in any of the sources
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/spec_set.rb:92:in `block in materialize'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/spec_set.rb:85:in `map!'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/spec_set.rb:85:in `materialize'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:114:in `specs'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:159:in `specs_for'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:148:in `requested_specs'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/environment.rb:18:in `requested_specs'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/runtime.rb:13:in `setup'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler.rb:120:in `setup'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/setup.rb:17:in `<top (required)>'
*** [err :: 50.116.11.160] /home/work/for_linode/releases/20130317174830/config/boot.rb:6:in `<top (required)>'
*** [err :: 50.116.11.160] /home/work/for_linode/releases/20130317174830/config/application.rb:1:in `<top (required)>'
*** [err :: 50.116.11.160] /home/work/for_linode/releases/20130317174830/Rakefile:5:in `<top (required)>'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `eval'
*** [err :: 50.116.11.160] /usr/local/rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `<main>'
*** [err :: 50.116.11.160] (See full trace by running task with --trace)
    command finished in 1888ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/work/for_linode/releases/20130317174830; true"
    servers: ["50.116.11.160"]
    [50.116.11.160] executing command
    command finished in 1591ms
failed: "rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'ruby-1.9.3-p392' -c 'cd -- /home/work/for_linode/releases/20130317174830 && rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- /home/work/for_linode/shared/assets/manifest.yml /home/work/for_linode/releases/20130317174830/assets_manifest.yml'" on 50.116.11.160 
```

我绝不是使用 capistrano 的专家，这里的类似问题与一个有点不同的问题有关，

请各位大神帮忙看看是怎么回事？

编辑：

```
set :application, "for_linode"
set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"")
set :bundle_without, [:development]
set :rvm_install_ruby_params, '--1.9.3-p194' # for jruby/rbx default to 1.9 mode
set :rvm_install_pkgs, %w[libyaml openssl] # package list from https://rvm.io/packages
set :rvm_install_ruby_params, '--with-opt-dir=/root/.rvm/usr' # package support

before 'deploy:setup', 'rvm:install_rvm'   # install RVM
before 'deploy:setup', 'rvm:install_pkgs'  # install RVM packages before Ruby
before 'deploy:setup', 'rvm:install_ruby'  # install Ruby and create gemset, or:
before 'deploy:setup', 'rvm:create_gemset' # only create gemset
before 'deploy:setup', 'rvm:import_gemset' # import gemset from file

require "rvm/capistrano"
require "bundler/capistrano"

set :repository,  "git://github.com/jlstr/for_linode.git"
# set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent guess based on known version control directory names
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`
set :branch, "master"
set :scm, :git
set :user, "root"
set :scm_username, "joe"
set :use_sudo, true
set :deploy_to, '/home/work/for_linode'
#set :rvm_ruby_string, 'ruby-1.9.3-p392'
set :rvm_type, :system

role :web, "50.116.11.160"                          # Your HTTP server, Apache/etc
role :app, "50.116.11.160"                          # This may be the same as your `Web` server
#role :db,  "", :primary => true # This is where Rails migrations will run
#role :db,  "your slave db-server here"

# if you want to clean up old releases on each deploy uncomment this:
# after "deploy:restart", "deploy:cleanup"

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:
# namespace :deploy do
#   task :start do ; end
#   task :stop do ; end
#   task :restart, :roles => :app, :except => { :no_release => true } do
#     run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
#   end
# end

require "rvm/capistrano"
load 'deploy/assets' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:45:26.307

将这段代码用于资产：

```
set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"")
set :bundle_without, [:development]
require "rvm/capistrano"
require "bundler/capistrano"
load 'deploy/assets' 
```

提取自 => [https://github.com/mpapis/ad/blob/master/config/deploy.rb](https://github.com/mpapis/ad/blob/master/config/deploy.rb)

# c++ - c++中字符串转八进制

> ID：15464173
> 
> 赞同：-2
> 
> 时间：2013-03-17T17:57:44.693
> 
> 标签：c++, string, octal

```
String hexstr = "0x12AB450912AB450912AB450912AB450912AB4509"; 
```

我有一个长度为 40 字节的字符串。

我需要将上面的字符串转换为八进制（到 20 个字节）

```
char *endp;
strtoul(hexstr , &endp, 8); 
```

要使用上述功能，它的工作时间很长，即 8 个字节。但我的字符串是 40 个字节。

有人能告诉我如何转换为八进制并存储回字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:05:30.917

该函数返回一个无符号长整数，因此它将返回的最大值是`8`字节，假设它不会疯狂​​地尝试转换`40`字节字符串。没有标准的整数类型保存`40`字节。您可以通过将数字转换为二进制并读取每 3 位来获取该数字的八进制版本来做到这一点

# php - PHP正则表达式删除点之前的前置内容

> ID：15464174
> 
> 赞同：0
> 
> 时间：2013-03-17T17:57:56.587
> 
> 标签：php, regex, preg-replace

我在 PHP 中有一个数组字符串，其中包含如下内容：

```
$a = array(
  array('inner' => 'N.person = P.id'),
  array('inner' => 'L.person = P.id'),
  array('left' => 'A.person = P.id AND A.excluded IS NULL')
); 
```

我想通知主键`P.id`并从 sql 中删除所有别名，结果如下：

```
$x = someFunctionThatSanitizeSQL('P.id', $a); 
```

print_r`$x`结果：

```
array(
  array('inner' => 'person = :pk'),
  array('inner' => 'person = :pk'),
  array('left' => 'person = :pk AND excluded IS NULL')
); 
```

提前致谢

@edit：错过了一个错字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:07:39.267

完成后`str_replace($pkreplace, ':pk', $mystring);`，我认为您正在寻找的正则表达式类似于：

```
/(?=(^|\w))[A-Z0-9_-]+\./ 
```

例如，要清除每个字符串，您可以执行

```
preg_replace('/(?=(^|\w))[A-Z0-9_-]+\./i', '', $mystring); 
```

但是，如果您要删除`A.`、`L.`等，则由于值不再位于数据库表下并可能导致不明确的值错误，您的查询可能会出现其他问题。您确定这是您在查询中想要的行为吗？

**编辑**

您的函数的最终实现类似于（假设您需要数组）：

```
function someFunctionThatSanitizeSQL($pkreplace, $dataarray) {
  if (!is_array($dataarray))
    return null;
  $retval = array();
  foreach ($dataarray as $key => & $curentry) {
    $curstring = str_replace($pkreplace, ':pk', $curentry);
    $curstring = preg_replace('/(?=(^|\w))[A-Z0-9_-]+\./i', '', $curstring);
    $retval[$key] = $curstring;
  }
  return $retval;
} 
```

# javascript - JavaScript - jQuery 切换选项

> ID：15464175
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:57:59.713
> 
> 标签：javascript, jquery

我有一个脚本可以根据选项变量执行一些任务。选项有一个默认值 1。可以通过单击某些链接来切换该值。然后设置一组操作，以执行该操作。示例布局将是这样的；

HTML

```
<a id="opt1">1</a><br><a id="opt2">2</a><br><a id="opt3">3</a><br>
<div id="mydiv">option1</div> 
```

JS

```
var opt=1;
$('#opt1').click(function() {
    opt=1;
});
$('#opt2').click(function() {
    opt=2;
});
$('#opt3').click(function() {
    opt=3;
});
if(opt == 1){
    $('#mydiv').text("option1");
}else if(opt == 2){
    $('#mydiv').text("option2");
}else{
    $('#mydiv').text("option3");
} 
```

JS 封装在文档就绪函数中。该示例旨在根据选项变量更改文本。抱歉，任务不能嵌套在里面`.click(function()`，完全取决于选项值。我怎样才能做到这一点？

这是小提琴[http://jsfiddle.net/Naw3y/](http://jsfiddle.net/Naw3y/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:03:12.780

问题是您的`if`条件仅在 document.ready 上调用一次.. 创建一个函数，添加您的条件并在单击事件中调用该函数

```
var opt=1;
$('#opt1').click(function() {
  opt=1;
  divText(opt); //calling divText(1) is shorter :)
});
$('#opt2').click(function() {
  opt=2;
  divText(opt)
});
$('#opt3').click(function() {
  opt=3;
  divText(opt)
});

function divText(opt){
 if(opt == 1){
  $('#mydiv').text("option1");
 }else if(opt == 2){
  $('#mydiv').text("option2");
}else{
  $('#mydiv').text("option3");
 }
} 
```

不知道你为什么不马上打电话.. 没有 if 和功能.. 但你去

```
$('#opt1').click(function() {
  $('#mydiv').text("option1");
});
$('#opt2').click(function() {
  $('#mydiv').text("option2");
});
$('#opt3').click(function() {
  $('#mydiv').text("option3");
}); 
```

[fiddle here](http://jsfiddle.net/Naw3y/2/)
[fiddle for second option](http://jsfiddle.net/Naw3y/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:48:06.100

我认为你在你的情况下需要的是你的财产的“封装”，这是其他答案所缺乏的：

```
var opt;
//setter function for opt that does the div update
function setOpt(value) {
    opt = value;
    $('#mydiv').text('option' + value);
}
$(document).ready(function() {
    //bind click handlers
    $('#opt1').click(function() {
        setOpt(1);
    });
    $('#opt2').click(function() {
        setOpt(2);
    });
    $('#opt3').click(function() {
        setOpt(3);
    });
    //set default value
    setOpt(1);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:03:54.660

这应该可以解决问题： http: [//jsfiddle.net/Naw3y/6/](http://jsfiddle.net/Naw3y/6/)：

```
var opt = 1;

$(function() {

$('#opt1').click(function() {
    opt=1;
    changeText();
});

$('#opt2').click(function() {
    opt=2;
    changeText();
});

$('#opt3').click(function() {
    opt=3;
    changeText();
});

});

function changeText(){
 if(opt == 1){
  $('#mydiv').text("option1");
 }else if(opt == 2){
  $('#mydiv').text("option2");
}else{
  $('#mydiv').text("option3");
 }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-17T18:04:19.563

```
$(document).ready(function(){
   $('a').click(function(){
       $('#mydiv').text('option'+$(this).html());
   });
}); 
```

抱歉，如果我没有很好地理解您的问题.. 尝试更好地解释..

# c - 在 XCode 中打开 OpenCv 项目 - 运行目标我的 Mac 64 位无效

> ID：15464176
> 
> 赞同：1
> 
> 时间：2013-03-17T17:58:09.807
> 
> 标签：c, xcode, macos, opencv

我下载了openCV并提取了项目。我导航到 Samples/FaceTracker 文件夹。双击项目 ( `FaceTracker.xcodeproj`)，然后在 XCOde 中加载项目时单击运行按钮。我收到以下错误，不允许我运行应用程序；

> 运行目标 My Mac 64 位对于运行方案“FaceTracker”无效。
> 
> 方案“FaceTracker”不包含可为 > 运行目标 My Mac 64 位支持的 SDK 构建的可构建项目。确保您的目标都指定了此版本 Xcode 支持的 SDK。

该文件`OpenCv.framework`丢失了，但我查找了它，但找不到具有该名称的文件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:13:45.483

1- 您的 XCode 项目无法找到所需的库，或者它找到了一个但它与您当前的操作系统/处理器/构建设置不兼容。缺少的框架和错误消息表明了这一点。

2-您可能需要构建 OpenCV SDK 以确保它与您的机器兼容，而不是先尝试构建示例。

3-我建议您使用 OS X 的包管理，而不是下载和构建 openCV，例如[MacPorts](http://www.macports.org/)。如果您不需要最先进`trunk`的版本，这是一个更好的选择，它会为您处理所有初始框架设置。

# azure - SQL Azure 中的备份非常慢

> ID：15464178
> 
> 赞同：1
> 
> 时间：2013-03-17T17:58:15.493
> 
> 标签：azure, backup, azure-sql-database, database-backups

在将我们的应用程序移植到 Azure 之前，我目前正在研究 SQL 数据库备份策略。目前，我们使用 SQL Server 维护任务每 15 分钟运行一次本地数据库备份，保留 1 小时（因此保留 4 个本地副本）。我们还运行 24 小时备份，该备份被推送到 Amazon S3。

现在在 Azure 中，到目前为止，我已经设法使用以下 T-SQL 建立了主数据库的备份（到另一个 sql 服务器实例）：

```
CREATE DATABASE targetserver.backupName AS COPY OF sourceserver.sourceName 
```

源数据库大小约为 3GB，并且每月扩展约 5-10%。我遇到的问题是复制过程非常缓慢！我在 30 多分钟前启动了一个副本，它仍在运行！这意味着在 Azure 中采用 15 分钟的备份计划似乎是站不住脚的。

所以我想知道我是否可以与其他用户一起限定一些事情：

1.  3GB 备份需要超过 30 分钟（并且还在继续）才能复制到另一个服务器实例是否正常？

2.  我应该将备份保存在与源相同的服务器上吗？我非常紧张，因为在 Azure 门户中单击几下可能会清除大量关键数据！我知道这是一个“黑天鹅”事件，但让所有东西都在单个服务器实例中运行并不容易。

3.  是否有更快的方法来备份 SQL Azure 数据库？我已经查看了[Red-Gate](http://cloudservices.red-gate.com/?utm_source=redgate&utm_medium=weblink&utm_term=sqlazurebackup&utm_content=richardmitchell&utm_campaign=cloudservices)，但进行次日增量备份似乎很昂贵。

对此的任何想法将不胜感激！

我应该补充一点，我很高兴完全重新考虑我的备份策略，以使其对 Azure 更加友好。关键是缓解管理员错误，例如由于笨拙的语句而丢弃重要数据的负载（备份间隔越短越好）以及将 24 小时备份推送到不同的存储方法，例如 blob 容器。

**更新 - - -**

我在等待 1 小时后取消了初始备份请求并重新启动。第二次备份在 5 分钟内完成。我现在回到 Red-Gate 看看他们的托管备份解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:36:37.920

运行复制数据库需要多长时间不仅取决于数据的大小，还取决于当时正在运行的事务数，因此此选项在您的情况下可能不成立。现在您有一个备份数据库，您可以通过备份备份来自己测试它并查看需要多长时间。

您的另一个选择是导出 .bacpac 文件并将其存储在 blob 存储中。有这方面的图书馆，但我没有手头的参考资料。这也将是一个更便宜的选择。我很确定这就是 Red Gate 在他们服务的掩护下所做的事情。

# c# - 为什么我在 Fluent API 中找不到 IsIndependent()？

> ID：15464180
> 
> 赞同：2
> 
> 时间：2013-03-17T17:58:43.193
> 
> 标签：c#, .net, entity-framework

我正在尝试通过关注[这篇](https://stackoverflow.com/questions/4939331/code-first-reference-one-to-many)文章来解决我的问题。但在我的代码中我找不到

```
.IsIndependent() 
```

扩展方法。

这是我的代码：

```
using System.Data.Entity;
modelBuilder.Entity<UnitInformation>()
.HasOptional(x => x.SectionInformations)
.WithMany()
.IsIndependent() 
```

`.IsIndependent()`不包含“IsIndependent”的定义，并且找不到接受第一个类型参数的扩展方法“IsIndependent”（您是否缺少 using 指令或程序集引用？

我是否缺少任何程序集参考？

我在用

```
Entity Framework 5.0
.Net 4.5
Visual Studio 2012 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T18:07:54.980

您很可能使用的是较新版本的实体框架。从 EF 4.1 CTP 开始，此方法已被删除。（因此在您使用的 EF 5 中也不存在。）

> **在 Code First 关系 API 中**整合 IsIndependent 。**在 Feature CTP5 中配置关系时，使用 IsIndependent 方法来识别该关系没有在对象模型中公开的外键属性。这现在通过调用 Map 方法来完成。HasForeignKey 仍用于在对象模型中公开外键属性的关系。**

 **来源：[可用的 EF 4.1 候选版本](https://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-release-candidate-available.aspx?Redirected=true)**

# css - 将 DFP 广告/广告素材设置为展示：无

> ID：15464184
> 
> 赞同：0
> 
> 时间：2013-03-17T17:59:08.357
> 
> 标签：css, google-dfp

如果您将 DFP (Google Ads) 广告/广告设置`display:none`为不可见。还会有印象吗？假设我有 31 个 DFP 广告，一个设置为`display:block`，另外 30 个设置为`display:none`.. 30 个不可见的广告中的每一个都会获得浏览/展示吗？假设我将 30 个广告设置为`display:none`，然后将它们切换到`display:block`当观众浏览器宽度超过 600 像素时……展示次数是否只计入广告变成`display:block`? 或者，在 DFP 的情况下，整个显示不显示如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:36:05.140

据我所知，如果您将 adunit 设置为不显示，则 JavaScript 仍会执行并且广告仍会加载到页面中，因此它算作一次展示。我很确定这将违反 Google DFP 服务条款，并且建议不要采用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T19:55:50.647

根据响应式广告单元规范，可以通过 CSS "display: none;" 隐藏它们。请参阅此页面底部的“隐藏广告单元”：https: [//support.google.com/adsense/answer/3543893?hl=en](https://support.google.com/adsense/answer/3543893?hl=en)

# cassandra - Cassandra 网络拓扑策略复制

> ID：15464187
> 
> 赞同：1
> 
> 时间：2013-03-17T17:59:32.093
> 
> 标签：cassandra

我在 Amazon EC2 的两台 linux 机器上安装并启动了 Cassandra。我还将 cassandra.yaml 设置为使用属性文件 snitch 并将 cassandra-topology.properties 文件配置如下：

```
 <external IP 1>=AWS1:R1
  <external IP 2>=AWS2:R1 
```

然后创建一个键空间，如下所示：

```
 create keyspace myks with strategy_options = [{AWS1:1,AWS2:1}]  and placement_strategy='NetworkTopologyStrategy'; 
```

然后我创建了一个列族并尝试插入一行......但是，当我尝试插入时，我从 CLI 得到一个空值。我错过了配置中的某些内容吗？

我怎样才能知道发生了什么？

另外——Cassandra 是否只在启动时读取 cassandra-topology？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:55:39.997

看起来键空间创建没有正确完成。这是一个简单的事实，每当您在填充时收到 UnavailableException() 时，理所当然地认为创建键空间存在问题。在您的情况下，您没有提到所需的placement_strategy 的完整类路径

```
CREATE KEYSPACE myks WITH placement_strategy = 'org.apache.cassandra.locator.NetworkTopologyStrategy'
AND strategy_options=[{AWS1:1,AWS2:1}]; 
```

是 Cassandra 仅在创建密钥空间（启动）时读取拓扑

# azure - Azure VM 中的 Active Directory - 仅用于 VM 身份？

> ID：15464188
> 
> 赞同：0
> 
> 时间：2013-03-17T17:59:46.033
> 
> 标签：azure, active-directory

在 Azure 中设置 Active Directory 是否明智，纯粹是为了管理虚拟环境中的身份？（*更新*：登录到 vm 时的身份不是我们的软件）。我们目前没有现场 AD 安装。我们是否也应该考虑将我们的现场系统与此 AD 控制器集成？

[是否有任何替代方法可以按照此处的 MSDN 说明](http://www.windowsazure.com/en-us/manage/services/networking/active-directory-forest/)将其安装在 VM 中？（主要是在初始配置期间作为没有真正系统管理员或 AD 经验的人做出错误决定的范围！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:24:45.847

当前正在运行一个预览，听起来更适合您的目的。当然，您是否与您的本地 AD 集成是您的决定。为此，您可以使用 ADFS 到 ACS 从您的 Azure 应用程序进行链接。

[http://www.windowsazure.com/en-us/home/features/identity/](http://www.windowsazure.com/en-us/home/features/identity/)

# c++ - 在迭代器问题 C++ 中访问结构

> ID：15464190
> 
> 赞同：0
> 
> 时间：2013-03-17T18:00:03.287
> 
> 标签：c++, c++11, mingw

我试图在 C++ 中的迭代器中访问结构元素，但编译器只是给我一个错误，即结构不包含该元素。我正在尝试执行以下操作：

```
typedef struct
{
   string str;
   int frequenzy;
} word;

bool isPresent = false;

for(std::vector<word>::iterator itr=words.begin(); itr!=words.end(); ++itr)
{
   if(*itr.str.compare(currentWord)==0){
    isPresent = true;
    *itr.frequenzy++;
    }
} 
```

我收到以下消息：

```
lab7.cc: In function 'int main()':
lab7.cc:27:13: error: 'std::vector<word>::iterator' has no member named 'str'
lab7.cc:29:11: error: 'std::vector<word>::iterator' has no member named 'frequen
zy' 
```

为什么这不可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T18:02:10.480

您可能应该以`for`这种方式重写循环体：

```
if (itr->str.compare(currentWord)==0)
//     ^^
{
    isPresent = true;
    itr->frequenzy++;
//     ^^
} 
```

运算符的`.`优先级高于`*`运算符。因此，如果你真的想使用这两个运算符，你应该这样重写上面的：

```
if ((*itr).str.compare(currentWord)==0)
//  ^^^^^^^
{
    isPresent = true;
    (*itr).frequenzy++;
//  ^^^^^^^
} 
```

# python - pip install -r pip-requires VS setup.py install 的区别

> ID：15464193
> 
> 赞同：2
> 
> 时间：2013-03-17T18:00:17.373
> 
> 标签：python, pip

如果我有一个名为“A”的 python 项目，它依赖于库 B、C、D、E、F。所以在我的 pip-requires 文件中，我有类似的内容：

```
B>=1.0
C
D
E<=0.7.2
F 
```

在这种情况下，我发现运行起来`setup.py install`有点`pip install -r pip-requires`混乱。我的理解是`setup.py install`安装项目本身没有依赖项，`pip install -r pip-requires`安装所有依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:16:21.520

`pip install -r pip-requires`只会安装`pip-requires`文件中提到的依赖项。`setup.py install`, 将安装项目本身*以及*其中提到的依赖`install_requires`项`setup.py`

# iphone - 故事板和 AppDelegate

> ID：15464204
> 
> 赞同：0
> 
> 时间：2013-03-17T18:00:56.490
> 
> 标签：iphone, ios6, uinavigationcontroller, storyboard

只是问一个我认为的小问题...我使用此代码打开以这种模式配置的情节提要：**导航控制器> TableView> DetailView**

这是代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *) launchOptions {

    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;

  PRPRecipesListViewController *controller = (PRPRecipesListViewController *)navigationController.topViewController;
  controller.dataSource = [[PRPRecipesSource alloc] init];

  return YES;
} 
```

现在的问题是如何在 TableView 之前实现一个 View 以在这种模式下配置我的故事板：**导航控制器 > 带按钮的 HomeView (Push) > TableView > DetailView**

解决这个问题的任何想法都是好的。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T08:21:29.097

在界面生成器上打开 xcode > 选择您的**TableView ，在 xcode** **Editor > Embed In > Navigation Controller**的顶部栏

# jquery - jquery悬停图像保持内容打开，直到mouseout

> ID：15464210
> 
> 赞同：0
> 
> 时间：2013-03-17T18:01:22.300
> 
> 标签：jquery, html

我如何获得这个脚本，点击功能转换为悬停功能效果。

`enter code here` [http://jsfiddle.net/K55ct/78/](http://jsfiddle.net/K55ct/78/)

我想将小框悬停，并且能够将鼠标悬停在下面的 div 内容上，只要我愿意，然后在鼠标移出时让 div 再次隐藏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:14:38.517

把html改成这个

```
<div id="footerSlideContainer"> 
   <div id="footerSlideButton"></div>
   <div id="footerSlideContent">
      <div id="footerSlideText">
         <div id="footer_higher">
            <div id="footer_content">
               <div class="footbox"></div>
                  <div class="clear"></div>
            </div>
         </div>
      </div>
   </div>
</div> 
```

现在 Button 在容器内。现在您可以将容器用于该`$('#footerSlideContainer').hover()`功能。这个函数允许两个参数，一个是鼠标输入的函数，一个是鼠标输出的函数，所以你的 jQuery 部分看起来像这样：

```
jQuery(function($) {
    $('#footerSlideContainer').hover(function () {
            $('#footerSlideContent').animate({ height: '230px' });
            $(this).css('backgroundPosition', 'top left');
        },
        function() {
            $('#footerSlideContent').animate({ height: '0px' });
            $(this).css('backgroundPosition', 'top left');
        }
    );      
}); 
```

演示：[jsFiddle](http://jsfiddle.net/MwChT/ "jsFiddle")

**编辑** 要保持颜色更改 CSS 为：

```
#footerSlideContainer{position:fixed;top:50px;width:360px;left:0px}
#footerSlideButton{background:red;position:fixed;top:0;left:0px;width:50px;height:50px}
#footerSlideContainer:hover #footerSlideButton{background:green}
#footerSlideContent{height:0;background:blue} 
```

# c# - 在 C# 中声明私有静态类的任何用途？

> ID：15464216
> 
> 赞同：0
> 
> 时间：2013-03-17T18:02:06.223
> 
> 标签：c#

将静态类声明为私有有什么用吗？下面是代码：

```
static class DerivedClass
{
    private static string GetVal()
    {
        return "Hello";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:04:41.047

您提供的示例代码实际上说明了一个内部类，而不是私有类。这很好，并且一直在完成。这意味着该类的方法可从同一模块内的其他类中使用，但不能在外部使用。

如果您的意思是声明静态类的私有成员，那么肯定有。

```
static class DerivedClass
{
    public static string GetVal()
    {
        return GetValInternal();
    }

    private static string GetValInternal()
    {
        return "Hello";
    }
} 
```

如果您的意思是声明私有静态嵌套类（因为根据[文档](http://msdn.microsoft.com/en-US/library/ms173121%28v=vs.80%29.aspx)，只有嵌套类可以是私有的），那么您可以这样做，但可能没有理由这样做。

```
class SomeClass
{
    private static class DerivedClass
    {
        public static string GetVal()
        {
            return "Hello";
        }
    }
} 
```

相当于

```
class SomeClass
{
    private static string GetVal()
    {
        return "Hello";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:29:22.363

默认情况下，没有像您的示例中那样的访问修饰符的类是*internal*，而不是*private*。请参阅此参考：http: [//msdn.microsoft.com/en-us/library/ms173121.aspx](http://msdn.microsoft.com/en-us/library/ms173121.aspx)。这意味着您可以从库/项目中的任何位置访问此类。这是有道理的，因为它允许您在内部使用该类，而不必将其暴露给外部世界。

但是，仅在我看来，在极少数情况下明确将其声明为*私有*是有意义的。我之前将它用于嵌套类，只是为了将某些东西组合在一起并使我的代码更漂亮/更具可读性。但是我发现，如果我正在创建嵌套类，这通常意味着我需要重新设计我的代码并将其中的一些代码放入单独的文件和单独的类中。而是尝试坚持每个文件一个类。

# wordpress - 一个 Amazon EC2 微型实例可以处理 4 个低流量的 WordPress 站点吗？

> ID：15464219
> 
> 赞同：4
> 
> 时间：2013-03-17T18:02:23.307
> 
> 标签：wordpress, web-services, amazon-ec2, amazon

我目前支付 15 欧元/月的服务器，但我并不经常使用它。运行 EC2 实例会更有效率。

*但是*，我还托管 4 个 WordPress 网站。他们的流量很少（每月不到 100 次访问）。

EC2 的微型实例能很好地处理它们吗？因为它是免费的一年，之后每月大约 5-7 美元。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:13:08.133

这将取决于您的 wordpress 代码。如果你使用很多插件并且有一堆动态内容，那么它会很慢。

这些网站大多是静态的吗？如果是这样，一种可能性是拥有微型实例，然后在更改时将 html 和内容推送到 S3。然后，您可以拥有非常慢的微实例，但从 S3 完成所有服务（按使用付费，它将根据您的需要进行扩展）。

可以通过插件或命令行进行导出（例如，您的微实例是 micro-wp.yourdomain.com）：

```
wget -k -K  -E -r -l 10 -p -N -F --restrict-file-names=windows -nH http://micro-wp.yourdomain.com 
```

然后，这会将所有 html、图像和支持文件转储到“yourdomain”文件夹，然后我们将它们 s3sync'ed 到 Amazon：

```
s3sync -p -r yourdomain/ www.yourdomain.com: 
```

奖励积分是在此之前使用 cloudfront（除非您的网站真的很受欢迎，否则速度更快且每月花费几美分）。

# asp-classic - 使用 ADODB.Stream 保存 POST 二进制数据

> ID：15464221
> 
> 赞同：2
> 
> 时间：2013-03-17T18:02:28.740
> 
> 标签：asp-classic, ado

另一个网站使用 POST 方法向我发送数据。

我想获取这些数据并将其插入数据库。

经过一些在线研究，我得出结论 ADODB.Stream 应该为我完成这项工作。

我在获取二进制数据方面没有问题`Request.TotalBytes`。使用以下代码，我没有收到错误，但它也没有保存数据。所以我一定是对 ADODB 流做错了。

```
 tot_bytes = Request.TotalBytes

    Set BinaryStream = CreateObject("ADODB.Stream")
    BinaryStream.Mode = 3
    BinaryStream.Type = 1
    BinaryStream.Open       
    gBinaryData = BinaryStream.Write(tot_bytes) 
    BinaryStream.Close
    Set BinaryStream = Nothing

    SQL = "INSERT INTO STATUSES (StatusMessage, StatusDateEntered) VALUES ('"& gBinaryData &"', '"& FormatDateMySQL(NOW) &"')"                                  
    Set objAddC = objConn.execute(SQL) 
```

.

```
Following a successful subscription, Facebook will proceed to call your endpoint every time that there are changes (to the chosen fields or connections). For each update, it will make an HTTP POST request.

The request will have content type of application/json and the body will comprise a JSON-encoded string containing one or more changes.

Note for PHP developers: In PHP, to get the encoded data you would use the following code:

$data = file_get_contents("php://input");
$json = json_decode($data); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T23:08:03.197

首先，[**Write**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675017%28v=vs.85%29.aspx)方法不返回任何内容，实际上它只是一个子程序。Request.TotalBytes 只是请求的长度（以字节为单位）。当您需要将请求数据读取为字节数组时，您应该使用 Request.BinaryRead(length of bytes)。因此，在 Stream 对象中，您需要在写入字节并将位置设置为开始之后 使用[**Read方法读取所有字节。**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676702%28v=vs.85%29.aspx)

但是，如果您必须将数据存储为二进制，在这种情况下似乎没有必要。
我假设您需要将数据作为文本，很可能是 json 字符串。因此，您应该将数据从字节转换为字符串。

请注意，您需要处理有关总字节数的异常。如果请求不包含任何内容，`Request.TotalBytes`则等于零并且因为`Request.BinaryRead`期望大于零且小于或等于总字节数的数字会发生错误。

```
Dim tot_bytes, postData
    tot_bytes = Request.TotalBytes
If tot_bytes > 0 Then
    With Server.CreateObject("Adodb.Stream")
        .Charset = "utf-8" 'specify the request encoding
        .Type = 1 'adTypeBinary, a binary stream
        .Open
        .Write Request.BinaryRead(tot_bytes) 'Write bytes
        .Position = 0 ' set position to the start
        .Type = 2 ' adTypeText, stream type is text now
        postData = .ReadText 'read all text
        .Close
    End With
    With Server.CreateObject("Adodb.Recordset")
        .Open "STATUSES", objConn , , 3
        .AddNew
        .Fields("StatusMessage").Value = postData
        .Fields("StatusDateEntered").Value = Now()
        .Update
        .Close
    End With
    Response.Write "data stored successfully"
Else
    Response.Write "no post data"
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:15:21.520

除了直接将数据插入这样的数据库（可能的 sql 注入）是一个非常糟糕的主意之外，您如何发布表单数据？CLassic ASP 也不能直接处理二进制数据。所以这根本行不通。

所以无论你发布什么，首先你必须确保你使用 form 发布`enctype="multiform/data"`。要将数据放入对象中，请尝试以下操作：

```
byteArray = Request.BinaryRead(Request.TotalBytes) 
```

但是要处理它，存储到数据库或保存到文件，您需要一个组件，例如[http://www.motobit.com/help/scptutl/upload.asp](http://www.motobit.com/help/scptutl/upload.asp)或尝试查看这篇文章（特别是当您上传更多只有一个文件）： http: [//www.codeguru.com/csharp/.net/net_asp/article.php/c19297/Pure-ASP-File-Upload.htm](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19297/Pure-ASP-File-Upload.htm)。

编辑：Antonin Fuller 还制作了一个示例 ASP 代码，而不使用他的 DLL。也试试这个：

```
Private Function RSBinaryToString(xBinary)
'Antonin Foller, http://www.motobit.com
'RSBinaryToString converts binary data (VT_UI1 | VT_ARRAY Or MultiByte string)
'to a string (BSTR) using ADO recordset

Dim Binary
'MultiByte data must be converted To VT_UI1 | VT_ARRAY first.
If vartype(xBinary)=8 Then Binary = MultiByteToBinary(xBinary) Else Binary = xBinary

Dim RS, LBinary
Const adLongVarChar = 201
Set RS = CreateObject("ADODB.Recordset")
LBinary = LenB(Binary)

If LBinary>0 Then
    RS.Fields.Append "mBinary", adLongVarChar, LBinary
    RS.Open
    RS.AddNew
    RS("mBinary").AppendChunk Binary 
    RS.Update
    RSBinaryToString = RS("mBinary")
Else  
    RSBinaryToString = ""
End If
End Function 
```

在此处查看更多信息：[http ://www.motobit.com/tips/detpg_binarytostring/](http://www.motobit.com/tips/detpg_binarytostring/)

最后，您应该获取流、转换它并使用它。

# ruby-on-rails - ajax，link_to remote in ruby on rails

> ID：15464224
> 
> 赞同：3
> 
> 时间：2013-03-17T18:02:44.443
> 
> 标签：ruby-on-rails, ajax, link-to

我是 ruby​​ on rails 的新手。我正在按照教程来了解 ajax 如何使用 link_to 和 remote=true 在 Rails 上工作。我有以下代码。

```
// in view/home/sample.html.erb

<head> <%= javascript_include_tag "prototype.js" %> </head>
<body>
<div id="time_div">
 <%= link_to("click here",  :update=>'time_div' ,:url=>{:action => :say_when} , :remote => true) %>
</div>
</body>

// in /controllers/home_controller.rb

def sample
end

def say_when
   render_text "<p>The time is <b>" + DateTime.now.to_s + "</b></p>"
end 
```

我已经将prototype.js 放在assets/javascripts 文件夹中。但我没有时间在浏览器上。请有人帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:25:41.180

您缺少将`div`使用 Ajax 请求的结果更新内容的 javascript。你可以这样尝试：

`say_when.js.erb`使用以下内容创建

```
$("time_div").update('<%= escape_javascript("<p>The time is <b>#{DateTime.now.to_s}</b></p>")%>'); 
```

您可以`say_when`从控制器中删除该方法，其中不再需要任何代码，Rails 将直接调用该`say_when.js.erb`文件。

看看这个[#205 Unobtrusive Javascript Railscast](http://railscasts.com/episodes/205-unobtrusive-javascript)可能会解释一些事情。

# php - 如何使用 php 和我的 sql 检索根节点的所有节点

> ID：15464225
> 
> 赞同：1
> 
> 时间：2013-03-17T18:02:44.570
> 
> 标签：php, mysql

我有这样的结构：

*   `A`（根节点）有两个孩子`B`（左孩子）和`C`（右孩子）。
*   同样`B`也有两个节点`D`（左孩子）和`E`（右孩子）。
*   同样`C`也有两个节点`F`（left child），`G`（right child）这样一个。

我的查询是：

*   如果我输入`A`（根节点），它会显示所有子节点在下面，输出是`A`这样`B`的，，，，，，，，，`C``D``E``F``G`
*   同样，如果我输入`B`，那么输出将是这样的`D`，`E`。

我的第二个查询是，如果我输入`A`，那么它将显示他的左孩子和右孩子。

我的表结构是这样的

```
id     c_n      p_n 

1       B        A

2       C        A

3       D        B

4       E        B 
```

像这样。

这里有三个字段，一个是`id`, `c_n`, `p_n`。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:12:15.187

给定您当前的架构，以下内容将根据您的请求，以逗号分隔的字符串（有条件地）从 1 级或 2 级层次结构中提取子节点

```
SELECT 
    CONCAT(
        GROUP_CONCAT(t1.c_n), 
        IF(COUNT(t2.c_n), ',', ''), 
        GROUP_CONCAT(t2.c_n)
    ) AS nodex
FROM table_name AS t1
LEFT JOIN table_name AS t2 ON t1.c_n = t2.p_n
WHERE t1.p_n = 'A'
GROUP BY t1.p_n 
```

但是，为了选择的简单性和速度，您应该考虑切换到`nested set`模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:12:39.403

您应该引入两个额外的字段`lft`和`rgt`，并为使用这两个列的表使用嵌套树模型。

解释此设置和使用的示例文档[在这里](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)。

这将允许您更有效地进行这些类型的查询。

例如，要获得整个树，您只需查询所有`lft`大于根的节点，以及小于根的节点`rgt`。

# java - 将标记坐标传递给变量

> ID：15464250
> 
> 赞同：0
> 
> 时间：2013-03-17T18:04:38.607
> 
> 标签：java, android, eclipse, google-maps

我正在构建一个应用程序，允许用户通过选择标记并单击信息窗口进行确认来设置接近警报。我需要能够从标记中获取纬度和经度，以便我可以使用坐标来设置半径。

```
 googleMap.setOnInfoWindowClickListener(
   new OnInfoWindowClickListener(){
     public void onInfoWindowClick(Marker marker) {

         //click function
      Toast.makeText(getBaseContext(), 
        "Info Window clicked@" + marker.getPosition(), 
        Toast.LENGTH_SHORT).show();

     LocationManager lm;
     double lat=0;
     double long1=0;    //Defining Latitude & Longitude
     float radius=3000;

    lm=(LocationManager) getSystemService(LOCATION_SERVICE);
    Intent i= new Intent("com.example.sleepertrain5.proximityalert");           //Custom Action
    PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(), -1, i, 0);
    lm.addProximityAlert(lat, long1, radius, -1, pi); 
```

到目前为止，我只能找到`marker.getLocation()`哪些不允许直接变量设置。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:45:26.327

你有没有试过这个：

```
map.setInfoWindowAdapter(new InfoWindowAdapter() {

// Use default InfoWindow frame
@Override
public View getInfoWindow(Marker args) {
    return null;
}

// Defines the contents of the InfoWindow
@Override 
public View getInfoContents(Marker args) 
{
    LatLng clickedMarkerLatLng = args.getPosition();
    double latitude =  clickedMarkerLatLng.latitude;
    double longitude =  clickedMarkerLatLng.longitude;
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:33:06.603

我希望这段代码可以帮助你：

> ```
> @Override
> public void onMapLongClick(LatLng point) {
> 
> Latitude lat = point.getLatitude(); 
> Longitude lng = point.getLongitude();
> 
> } 
> ```

# javascript - 将响应式菜单从 jQuery 转换为 MooTools 1.4.x

> ID：15464258
> 
> 赞同：2
> 
> 时间：2013-03-17T18:05:27.790
> 
> 标签：javascript, jquery, menu, mootools, responsive-design

这似乎是一个非常简单的 jQuery 菜单下拉效果。我了解正在发生的事情的机制；但是，我不明白 MooTools 的语法。任何人都可以帮忙吗？JSFiddle 链接：http: [//jsfiddle.net/S2ku7/4/](http://jsfiddle.net/S2ku7/4/)

# jQuery版本

```
var ww = document.body.clientWidth;

$(document).ready(function() {
    $(".nav li a").each(function() {
        if ($(this).next().length > 0) {
            $(this).addClass("parent");
        };
    })

    $(".toggleMenu").click(function(e) {
        e.preventDefault();
        $(this).toggleClass("active");
        $(".nav").toggle();
    });
    adjustMenu();
})

$(window).bind('resize orientationchange', function() {
    ww = document.body.clientWidth;
    adjustMenu();
});

var adjustMenu = function() {
    if (ww < 768) {
        $(".toggleMenu").css("display", "inline-block");
        if (!$(".toggleMenu").hasClass("active")) {
            $(".nav").hide();
        } else {
            $(".nav").show();
        }
        $(".nav li").unbind('mouseenter mouseleave');
        $(".nav li a.parent").unbind('click').bind('click', function(e) {
            // must be attached to anchor element to prevent bubbling
            e.preventDefault();
            $(this).parent("li").toggleClass("hover");
        });
    } 
    else if (ww >= 768) {
        $(".toggleMenu").css("display", "none");
        $(".nav").show();
        $(".nav li").removeClass("hover");
        $(".nav li a").unbind('click');
        $(".nav li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
             // must be attached to li so that mouseleave is not triggered when hover over submenu
             $(this).toggleClass('hover');
        });
    }
} 
```

# 我在 MooTools 中的最佳尝试

```
var ww = window.getSize();

window.addEvent('domready', function() {
    $$('ul.nav li a').each(function(link) {
        if(link.getSiblings().length > 0) {
            link.addClass('parent');
        }
    })

    $('a.toggleMenu').addEvent('click', function(elem) {
            elem.stop();
            $('.toggleMenu').toggleClass('active');
            $('.nav').toggle();
    });
    adjustMenu();
});

window.addEvent('resize', function() {  
    ww = window.getSize();
    adjustMenu();
});

var adjustMenu = function() {
    if (ww.x < 716) {
        $('a.toggleMenu').setStyle('display', 'inline-block');

        if (!$('a.toggleMenu').hasClass('active')) {
            $('ul.nav').setStyle('display', 'none');
        } else {
            $('ul.nav').setStyle('display', 'block');
        }

        $$('ul.nav li').each( function(elem) {      
            elem.removeEvent('mouseenter');
            elem.removeEvent('mouseleave');     
        });

        $$('ul.nav li a.parent').each( function(elem) {
            elem.removeEvent('click');      
            elem.addEvent('click', function(e){
                e.stop();
                elem.getParent('li').toggleClass('hover');
            });
        });
    } 
    else if(ww.x >= 716) {
        $('a.toggleMenu').setStyle('display', 'none');
        $('ul.nav').setStyle('display', 'block');

        $$('ul.nav li').each(function(elem) {
            elem.removeClass("hover");
        });

        $$('ul.nav li a').each(function(elem){      
            elem.removeEvent('click');
        });

        $$('ul.nav li').each( function(elem ){
            elem.removeEvent('mouseenter');
            elem.removeEvent('mouseleave');

            elem.addEvents({
                'mouseenter' : function(){ 
                    elem.toggleClass('hover');
                },
                'mouseleave' : function(){  
                    elem.toggleClass('hover');          
                }
            }); 
        });     
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:25:30.370

这里会更像 mootools：通过一些优化，如果您针对单个元素，给它一个 id 并使用 $() 函数（我在 jsfiddle 中做到了，链接也确实类似于 mootools。玩得开心在 mootools 世界！

jsfiddle：http: [//jsfiddle.net/S2ku7/14/](http://jsfiddle.net/S2ku7/14/)

```
var adjustMenu = function () {
var 
    ww = window.getSize(),
    menu = $('toggle-menu'),
    nav = $('nav');
if (ww.x < 768) {
    menu
        .setStyle('display', 'inline-block');

    nav
        .setStyle('display', menu.hasClass('active') ? 'block' : 'none')
        .getElements("li")
        .each(function (li) {
        li.removeEvents('mouseenter')
            .removeEvents('mouseleave')
            .getElements("a.parent").each(function (a) {
            a.removeEvents('click')
                .addEvent('click', function (e) {
                e.stop();
                li.toggleClass('hover');
            });
        });
    });
} else if (ww.x >= 768) {
    menu.setStyle('display', 'none');

    nav
        .setStyle('display', 'block')
        .getElements('li').each(function (li) {
        li.removeClass("hover")
            .removeEvents('mouseenter')
            .removeEvents('mouseleave')
            .addEvents({
                'mouseenter': function () {
                    li.toggleClass('hover');
                },
                'mouseleave': function () {
                    li.toggleClass('hover');
                }
            })
            .getElements("a").each(function (a) {
                a.removeEvents('click');
            });
    });
}
};

window.addEvents({
'domready': function () {

    $$('ul.nav li a').each(function (a) {
        if (a.getSiblings()) {
            a.addClass('parent');
        }
    });

    $('toggle-menu').addEvent('click', function (e) {
        e.stop();
        $('toggle-menu').toggleClass('active');
        $('nav').toggle();
    });
    adjustMenu();
},
'resize': function () {
    adjustMenu();
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:12:34.797

这是最终的 JSFiddle 链接：http: [//jsfiddle.net/S2ku7/13/](http://jsfiddle.net/S2ku7/13/)

# 最终代码

```
var ww = window.getSize();

var adjustMenu = function() {
    if (ww.x < 768) {
        $$('a.toggleMenu').setStyle('display', 'inline-block');

        if (!$$('a.toggleMenu').hasClass('active')) {
            $$('ul.nav').setStyle('display', 'none');
        } else {
            $$('ul.nav').setStyle('display', 'block');
        }

        $$('ul.nav li').each( function(elem) {      
            elem.removeEvents('mouseenter');
            elem.removeEvents('mouseleave');        
        });

        $$('ul.nav li a.parent').each(function(elem) {
            elem.removeEvents('click');     
            elem.addEvent('click', function(e){
                e.stop();
                elem.getParent('li').toggleClass('hover');
            });
        });
    } 
    else if(ww.x >= 768) {
        $$('a.toggleMenu').setStyle('display', 'none');
        $$('ul.nav').setStyle('display', 'block');

        $$('ul.nav li').each(function(elem) {
            elem.removeClass("hover");
        });

        $$('ul.nav li a').each(function(elem){      
            elem.removeEvents('click');
        });

        $$('ul.nav li').each( function(elem ){
            elem.removeEvents('mouseenter');
            elem.removeEvents('mouseleave');

            elem.addEvents({
                'mouseenter' : function(){
                    elem.toggleClass('hover');
                },
                'mouseleave' : function(){  
                    elem.toggleClass('hover');          
                }
            }); 
        });     
    }   
}

window.addEvent('domready', function() {
    $$('ul.nav li a').each(function(link) {
        if(link.getSiblings().length > 0) {
            link.addClass('parent');
        }
    })

    $$('a.toggleMenu').addEvent('click', function(elem) {
            elem.stop();
            $$('a.toggleMenu').toggleClass('active');
            $$('ul.nav').toggle();
    });
    adjustMenu();
});

window.addEvent('resize', function() {  
    ww = window.getSize();
    adjustMenu();
}); 
```

# 原件问题

*   选择课程时使用 '$$' 而不是 '$'
*   需要为 toggle() 函数调用启用 MooTools-More

感谢@n3on 在#mootools IRC 聊天中的所有帮助！

# django - 带有嗖嗖声的 Django-haystack 搜索返回“无结果”调试不成功

> ID：15464260
> 
> 赞同：4
> 
> 时间：2013-03-17T18:05:29.383
> 
> 标签：django, django-haystack, whoosh

我是 Django 和 Haystack 的新手。我已经完成了 Haystack 文档的“入门”页面和调试页面上的所有建议，但我看不出我的错误在哪里。 `sqs.count()`即使`rebuild_index`看起来可行，也返回 0，在被索引的表中提供正确数量的条目并将索引文件生成到`whoosh_index`目录中。

`search_indexes`有所需的`text =`行，我有一个 search_sites.py，我已经更改了 settings.py 和 urls.py，并且我在正确的目录中有 [model_name]_text.txt 文件。

我们正在一个大学服务器上工作，我们必须在安装 Haystack 后更新 Django 以与 Haystack 一起工作，因为我们意识到它是一个不兼容的版本（1.1 而不是 1.5） - 旧的 Django 会以某种方式与 Haystack 安装混淆吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:16:19.157

以下代码将向您显示已索引的内容 - 替换为您的设置的正确路径。

```
from whoosh.index import open_dir
ix = open_dir('<yourapp>/whoosh_indexes')
from pprint import pprint
pprint(list(ix.searcher().documents())) 
```

如果这不能说明任何问题，您将不得不发布代码的更多详细信息 - 特别是 search_indexes.py

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T11:20:01.100

这似乎很明显，但我遇到了同样的错误，从[http://django-haystack.readthedocs.org/en/latest/debugging.html](http://django-haystack.readthedocs.org/en/latest/debugging.html)阅读我发现我为返回的对象使用了错误的属性名称。

```
 ensure that {{ result.object.title }} corresponds to your model field
   for instance I had name as the model filed but kept wondering why I didn't get results.
   I had to change to {{ result.object.name }} to list my results 
```

name 是需要的属性。希望这可以帮助某人。

# c++ - 是否有任何从未使用过的字符（在 ASCII 或 Unicode 中）

> ID：15464262
> 
> 赞同：8
> 
> 时间：2013-03-17T18:05:37.097
> 
> 标签：c++

我只需要一个可以在字符数组中设置的字符，指示特定位置或一系列位置是空闲的并且可用于存储数据。

我需要这个，因为我正在制作一个简单的内存池并且需要重置释放的块并将它们指示为空闲。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:21:55.283

所有 ASCII 码点都用于字符，但有很多 Unicode 码点保证不是字符，例如[U+FFFF](http://www.fileformat.info/info/unicode/char/ffff/index.htm)。

不过，我不确定您会如何处理这些信息。虽然代码点不是有效字符，但您可以构造包含它的字符串。这些字符串在 Unicode 中是不合法的，但您似乎暗示您可以存储任何数据，而不仅仅是 Unicode 文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:13:12.307

虽然这不是最好的方法，但如果你必须这样做，我会使用`bell key`它，因为我从未见过有人在我的生活中使用它。

钟声`007`在十月。

![在此处输入图像描述](../Images/ca83789745d5e5515577f47e5c353083.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:25:30.253

如前所述，ASCII 码位都用于字符；但是，您可以轻松地限制您的字符串，以免在 ASCII 中使用某些字符。例如，垂直制表符很少用于普通文件的任何字符串中；因此，您可以要求您的字符数组全部排除字符垂直制表符，并使用这样的字符来执行您的要求。对 UNICODE 也可以这样做；尽管如前所述，它确实有一些保留的非字符代码。

# android - 将上下文作为 DialogFragment 的参数传递

> ID：15464263
> 
> 赞同：32
> 
> 时间：2013-03-17T18:05:42.653
> 
> 标签：android, android-dialogfragment, android-context

可以将上下文变量传递给 DialogFragment？

我在对话框中使用此代码来传递字符串：

```
public static ConfirmDialog newInstance( String f) {
    ConfirmDialog d = new ConfirmDialog();

    Bundle args = new Bundle();
    args.putString("FILE_NAME", f);
    d.setArguments(args);

    return d;
} 
```

但我没有找到像 putString 这样的函数来传递上下文。有可能这样做吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-17T18:08:47.583

您`DialogFragment`有一个非常方便的获取`Context`实例的方法：

```
getActivity() 
```

[`Fragment#getActivity()`](https://developer.android.com/reference/android/app/Fragment.html#getActivity%28%29)将返回附加到的`Activity`（即 a `Context`）的实例。在调用`Fragment`Fragment 之后使用它。`onAttach()`下图说明了[`Fragment`生命周期](http://developer.android.com/guide/components/fragments.html)，如您所见，使用`getActivity()`from `onCreate()`to`onDestroy()`应该是一个有效的调用。

![在此处输入图像描述](../Images/e63c2513f1dd0a9e5138386c5830bd2b.png)

有关更多信息，请阅读[`Fragment`](https://developer.android.com/reference/android/app/Fragment.html)文档

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-17T07:10:16.120

```
@Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);
    context=activity;
} 
```

需要使用 onAttach 方法：用于对话框片段

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-23T10:46:57.087

**onAttach(Activity activity)**现在已弃用，

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
} 
```

改用onAttach **(Context context)**

```
@Override
public void onAttach(Context context) {
    super.onAttach(context);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-11T09:03:41.367

像这样使用：

```
public class Dialog extends DialogFragment implements OnClickListener {
    public void onClick(View v) {
    switch (v.getId()) {
        case R.id.message: {
            this.startActivity(new Intent(context, Login.class));
                                 //or use getActivity() instead of context
            }
            break;
         }
    }
    @Override
    public void onAttach(Activity activity) {
        // TODO Auto-generated method stub
        super.onAttach(activity);
        context=activity;
    }
} 
```

# javascript - 如何访问由 $resource get() 填充的 AngularJS 控制器中的数组？

> ID：15464273
> 
> 赞同：0
> 
> 时间：2013-03-17T18:06:27.410
> 
> 标签：javascript, angularjs, angular-ui, angularjs-scope

我无法访问 AngularJS 控制器中的数组，但它可以在视图中使用。

在控制器中：`.results`返回未定义

```
function TwitterCtrl($scope, $resource){

  $scope.twitter = $resource('http://search.twitter.com/:action',
      {action:'search.json', q:'angularjs', callback:'JSON_CALLBACK'},
      {get:{method:'JSONP', params: {rpp: 4}}});

    $scope.twitterResult = $scope.twitter.get({q:"example"});

    //returns the resource object
    console.log($scope.twitterResult)

    //returns undefined
    console.log($scope.twitterResult.results);
} 
```

在视图中：`.results`返回推文数组

```
//This returns an array of tweets
{{$scope.twitterResult.results}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T20:41:48.420

$resource 调用是异步的，但 $resource 服务在`resource.get`调用时立即返回一个空白对象（或在调用时返回空数组`resource.query`）。然后，只有在 promise 得到解决（服务器返回响应）之后，$resource 服务才会将实际结果分配给`$scope.twitterResult`变量。

这就是为什么`$scope.twitterResult`立即访问（console.log）时为空白，但在您看来（似乎）“有效”。

您的视图表达式`{{$scope.twitterResult.results}}`一开始也是未定义的，但 Angular 的 $parse 服务（负责解析视图表达式）不会输出`undefined`，因为它被设计为不输出。一旦收到服务器响应，视图表达式就会更新并`twitterResult.results`显示出来。

# java - 如何在 Android 中动态更改 TextView 的行数？

> ID：15464280
> 
> 赞同：2
> 
> 时间：2013-03-17T18:07:24.070
> 
> 标签：java, android, textview

我有一个`TextView`我必须显示大量文本，但我不想显示所有文本，只显示三行并添加一个按钮`Click to read more`，点击它后，所有文本都必须展开。如何实现此功能并动态更改文本的行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:22:51.047

您很可能正在寻找[`setLines()`](http://developer.android.com/reference/android/widget/TextView.html#setLines%28int%29)方法。您需要为 Button 注册 OnClickListener 并执行适当的操作：

```
t = (TextView) findViewById(R.id.textViewId);
t.setLines(3);

btn.setOnClickListener(new OnClickListener() {          
   @Override
   public void onClick(View v) {
      t.setLines(8);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:18:45.787

您可以使用[`TextView.setMaxLines(...)`](http://developer.android.com/reference/android/widget/TextView.html#setMaxLines%28int%29)或[`TextView.setLines(...)`](http://developer.android.com/reference/android/widget/TextView.html#setLines%28int%29)。

# android - 带有适配器的上下文操作栏

> ID：15464288
> 
> 赞同：1
> 
> 时间：2013-03-17T18:07:56.237
> 
> 标签：android, contextual-action-bar

我第一次尝试使用上下文操作栏，但我遇到了这个设计问题：在我的主要活动中，我为我的列表设置了一个适配器：

```
 // Create an adapter
    Adapter = new ToDoItemAdapter(this, 
                                  R.layout.list_date_item, 
                                  toDoListCursor, 
                                  from, 
                                  to,
                                  toDoDBAdapter);
    List.setAdapter(Adapter); 
```

现在我需要`setOnLongClickListener`到每个列表项。我在哪里可以做到这一点，因为如果我在我的活动中编写它，我无法像在适配器中那样访问每个“视图”，但是如果我在适配器类中编写它，我将无权访问 ActionMode.Callback 或更重要的是 - 对我的逻辑方法，例如 - RemoveItem、ShareItem 等。

我想知道这样做的最佳做法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:28:09.030

## 我在 ListView 的项目单击中完成了此操作。

## 注意：我使用过[actionbarsherlock](http://actionbarsherlock.com/)库。

![在此处输入图像描述](../Images/9d263be24364111128210ffa636d0b55.png)

```
check this code:

package com.example.testapp;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListActivity;
import com.actionbarsherlock.view.ActionMode;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

public class MainActivity extends SherlockListActivity {

    private static final String[] COUNTRIES = new String[] { "Belgium",
            "France", "Italy", "Belgium", "France", "Italy", "Belgium",
            "France", "Italy" };

    private static final Integer[] img = new Integer[] {
            R.drawable.ic_launcher, R.drawable.dhaval1, R.drawable.ic_launcher,
            R.drawable.ic_launcher, R.drawable.dhaval1, R.drawable.ic_launcher,
            R.drawable.ic_launcher, R.drawable.dhaval1, R.drawable.ic_launcher };

    private static final String[] COUNTRIES_Detail = new String[] {
            "Belgium , officially the Kingdom of Belgium, is a federal state in Western Europe.",
            "France (English , officially the French Republic (French: République française ",
            "Italy i/ˈɪtəli/ (Italian: Italia [iˈtaːlja]), officially the Italian Republic ",
            "Belgium , officially the Kingdom of Belgium, is a federal state in Western Europe.",
            "France (English , officially the French Republic (French: République française ",
            "Italy i/ˈɪtəli/ (Italian: Italia [iˈtaːlja]), officially the Italian Republic ",
            "Belgium , officially the Kingdom of Belgium, is a federal state in Western Europe.",
            "France (English , officially the French Republic (French: République française ",
            "Italy i/ˈɪtəli/ (Italian: Italia [iˈtaːlja]), officially the Italian Republic " };
    private MyArrayAdapter adapter;
    Bundle savedInstanceState;

    private ActionMode mMode;

    private static ListView list;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        list = getListView();
        adapter = new MyArrayAdapter(MainActivity.this, COUNTRIES,
                getListView());
        getListView().setAdapter(adapter);
        if (COUNTRIES.length <= 0) {
            getListView().setEmptyView(findViewById(android.R.id.empty));
        }

    }

    protected void onRestart() {
        // adapter.notifyDataSetChanged();
        onCreate(savedInstanceState);
    };

    class MyArrayAdapter extends BaseAdapter {

        private LayoutInflater mInflater;
        private Context mcon;
        private String[] COUNTRIES_;
        private ListView listView_;

        public MyArrayAdapter(Activity con, String[] countries,
                ListView listView) {
            // TODO Auto-generated constructor stub
            mcon = con;
            COUNTRIES_ = countries;
            listView_ = listView;
            mInflater = LayoutInflater.from(con);
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return COUNTRIES_.length;
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.my_spinner_style, null);
                holder = new ListContent();
                holder.line = (LinearLayout) v.findViewById(R.id.line_);
                holder.name = (TextView) v.findViewById(R.id.textView1);
                holder.name1 = (TextView) v.findViewById(R.id.textView2);
                holder.name2 = (ImageView) v.findViewById(R.id.imageView1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.name.setText("" + Html.fromHtml("" + COUNTRIES_[position]));
            holder.name1.setText("" + Html.fromHtml("" + COUNTRIES_[position]));
            // holder.name2.setImageBitmap();

            holder.name.setOnClickListener(mOnTitleClickListener3);

            return v;
        }

    }

    class ListContent {

        TextView name;
        TextView name1;
        ImageView name2;
        LinearLayout line;

    }

    public OnClickListener mOnTitleClickListener3 = new OnClickListener() {
        public void onClick(View v) {
            final int position = list.getPositionForView((View) v.getParent());

            mMode = startActionMode(new AnActionModeOfEpicProportions());
            Log.d("you are click on Ratings", "you are click on Ratings");

        }
    };

    public class AnActionModeOfEpicProportions implements ActionMode.Callback {
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            // Used to put dark icons on light action bar

            menu.add("Save").setIcon(

            R.drawable.ic_launcher)
                    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Search").setIcon(R.drawable.ic_launcher)
                    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Search").setIcon(R.drawable.ic_launcher)
                    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Refresh").setIcon(R.drawable.ic_launcher)
                    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            return true;
        }

        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            Toast.makeText(MainActivity.this, "Got click: " + item,
                    Toast.LENGTH_SHORT).show();
            mode.finish();
            return true;
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {
        }

    }

} 
```

* * *

## activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## listview 行文件 my_spinner_style.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:id="@+id/line_"
    android:orientation="horizontal"
    android:weightSum="3" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:visibility="gone" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

* * *

## 我用过`OnClickListener`你必须用的同样的方法`OnLongClickListener`

```
public OnLongClickListener longclick = new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            mMode = startActionMode(new AnActionModeOfEpicProportions());
            Log.d("you are click on Ratings", "you are click on Ratings");
            return true;
        }
    }; 
```

* * *

编辑：没有actionbarsherlock

## 使用 AppCompart 支持库使用

```
startSupportActionMode 
```

没有 AppCompart

```
startSupportActionMode 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T08:58:17.680

我认为在你的情况下最好的方法是这样的

```
 List.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
            @Override

            public boolean onItemLongClick(AdapterView<?> adapterView, View view, int position, lon id) {
//              TextView childItem = (TextView) view.findViewById(android.R.id.text1);
                return true;
            }
        }); 
```

# tibco - 如何通过 CLI 将报告导入 Spotfire？

> ID：15464293
> 
> 赞同：0
> 
> 时间：2013-03-17T18:08:33.600
> 
> 标签：tibco, spotfire

我正在考虑将我们的 Spotfire 报告集成到我们的 CI 流程中。目前，我们通过 Spotfire 胖客户端手动将报告导出和导入到每个环境中。

我更愿意通过与我们的 SCM 集成的批处理脚本来控制它。我的主要问题是我无法找到有关 spotfire windows server CLI 的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:14:43.550

这里[https://docs.tibco.com/pub/spotfire_server/5.0.0-nov-2012/TIB_SSDoc_ServerInstallationManual.pdf](https://docs.tibco.com/pub/spotfire_server/5.0.0-nov-2012/TIB_SSDoc_ServerInstallationManual.pdf)有两个命令 export-library-content 从库中导出内容 import-library-content 将内容导入到库中

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:09:34.257

我不确定我有没有收到您的问题，但也许这可以帮助您[https://docs.tibco.com/products/tibco-spotfire-automation-services-5-0-0](https://docs.tibco.com/products/tibco-spotfire-automation-services-5-0-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:08:22.193

全面披露：我为 TIBCO Spotfire 工作。

5.0 中的服务器 CLI 支持库内容的导出和导入。请参阅[TIBCO Spotfire Server 5.0.1 安装和配置手册](https://docs.tibco.com/pub/spotfire_server/5.0.1-march-2013/TIB_SSDoc_5.0.1_ServerInstallationManual.pdf)中的第 209 页和第 215 页。

# c# - 在 MVC4 中使用 MySQL 的 SimpleMembershipProvider

> ID：15464295
> 
> 赞同：0
> 
> 时间：2013-03-17T18:08:48.140
> 
> 标签：c#, mysql, asp.net-mvc, simplemembership

我遇到了 SimpleMembershipProvider 的奇怪问题。我在 VS11 中运行了一个示例 MVC4 项目并创建了我自己的数据库，其中包含表“userprofile”和两个字段“UserId”和“UserName”。此外，我将我的 MySQL 数据库与实体框架连接并从数据库生成模型。

然后我尝试与会员提供商打交道，但遇到了一些问题。实际上，我已经完成了本文中所写的一切：

[http://deresegetachew.wordpress.com/2013/01/20/websecurity-initializeddatabaseconnection-throughs-an-exception-unable-to-find-the-requested-net-framework-data-provider/](http://deresegetachew.wordpress.com/2013/01/20/websecurity-initializedatabaseconnection-throughs-an-exception-unable-to-find-the-requested-net-framework-data-provider/)

没有理由符合：

```
WebSecurity.InitializeDatabaseConnection("ParserEntities", "userprofile", "UserId", "UserName", autoCreateTables: true); 
```

我遇到了一个例外：

> 无法初始化 ASP.NET 简单成员资格数据库。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=256588](http://go.microsoft.com/fwlink/?LinkId=256588) "}

这就是我的连接字符串的样子：

```
 <add name="ParserEntities" connectionString="metadata=res://*/ParserModel.csdl|res://*/ParserModel.ssdl|res://*/ParserModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;user id=root;database=parser&quot;" providerName="System.Data.EntityClient" /> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:54:34.677

我在 GitHub 上创建 MySqlSimpleMembershipProvider 并制作示例项目。

[https://github.com/xyz37/MySqlSimpleMembershipProvider](https://github.com/xyz37/MySqlSimpleMembershipProvider)

就这样。

感谢您对这个问题的回答。

点击示例截图：[https ://raw.github.com/xyz37/MySqlSimpleMembershipProvider/master/_ScreenShot/SimpleMembershipProviderTest.png](https://raw.github.com/xyz37/MySqlSimpleMembershipProvider/master/_ScreenShot/SimpleMembershipProviderTest.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:12:50.667

SimpleMembershipProvider 使用代码优先数据库上下文。它不适用于使用 EntityClient sql 提供程序的 DatabaseFirst（基于 edmx）连接字符串。

# c# - 正则表达式匹配偶数个双引号 (") 不匹配 CSV 单引号

> ID：15464299
> 
> 赞同：1
> 
> 时间：2013-03-17T18:09:46.187
> 
> 标签：c#, regex

我必须编写一个正则表达式来解析每个 CSV 行。例如，正则表达式是匹配包含偶数个双引号 (") 的双引号字符串，而不是单引号。

例如，CSV 分隔符是制表符 \t。我有这样的一行：

```
"first column ""end"\tsecond column\t"third \nNewLine\rcolumn\tend" 
```

正则表达式将允许我提取如下三列：

```
first column ""end
second column
third \nNewLine\rcolumn\tend 
```

请注意，第一列有两个双引号，但它可以允许偶数个双引号。

请注意，第三列中有 \t，\n 和 \r 也是如此。

如果便于编写正则表达式，可以引用第一列和第三列。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:25:39.773

当且仅当有偶数个引号时，如何在标签上拆分？

```
splitArray = Regex.Split(subject, 
    @"\t        # Match a tab
    (?=         # if the following regex matches after it:
     (?:        # Match...
      [^""]*""  # Any number of non-quotes, followed by a quote
      [^""]*""  # ditto, to ensure an even number of quotes
     )*         # Repeat as many times as needed
     [^""]*     # Then match any remaining non-quote characters
     $          # until the end of the string.
    )           # End of lookahead assertion", 
    RegexOptions.IgnorePatternWhitespace); 
```

# css - 使 CSS 浮动列在顶部对齐

> ID：15464300
> 
> 赞同：1
> 
> 时间：2013-03-17T18:09:47.913
> 
> 标签：css

[http://jsfiddle.net/y88mq/1/](http://jsfiddle.net/y88mq/1/)

我有一个包含三个容器的简单布局：一、二、三。我试图让三个在顶部与一个对齐。现在一和二向左浮动，三向右浮动。我尝试了清除组合，但似乎没有用。我想让它只与 CSS 一起工作。

```
<div class="left">one</div>
<div class="left">two</div>
<div class="right">three</div>

.left {
    background: red;
    width: 66%;
    height: 200px;
    margin-bottom: 10px;
    float: left;
}

.right {
    background: green;
    width: 33%;
    float: right;
    height: 200px;
} 
```

编辑：我想保持源顺序相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:12:34.000

由于 CSS 的性质及其邪恶的浮动，我建议您重新排列框的顺序。这将正常工作：

```
<div class="left">one</div>
<div class="right">three</div>
<div class="left">two</div> 
```

见：http: [//jsfiddle.net/y88mq/2/](http://jsfiddle.net/y88mq/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:31:57.603

如果您必须保持 HTML 的顺序相同，那么我能想到的就是使用：

```
position: absolute; 
```

我已经对您的 Fiddle 进行了更改：http: [//jsfiddle.net/hRdEf/](http://jsfiddle.net/hRdEf/)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:15:47.787

只需将“正确的 div”放在列出的 div 的顶部即可。

```
<div class="right">three</div>    
<div class="left">one</div>
<div class="left">two</div>

..//rest of code 
```

[http://jsfiddle.net/y88mq/7/](http://jsfiddle.net/y88mq/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T17:51:35.553

如果将第一列和第二列包装在一个 div 中，则可以有效地将包装器 div 和第三列并排浮动并在顶部对齐。包装器 div 将堆叠第一列和第二列。

这种方法的额外优势是，如果有更多可用空间，您可以选择在一行上对齐第一列和第二列。

从语义上讲，您的列仍然是相同的顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T18:31:59.800

```
<div class="left">one</div>
<div class="left">two</div>
<div class="right">three</div>

.left {
   background: red;
   width: 32%;
   height: 200px;
   margin-right:  20px;
   float: left;
}

.right {
   background: green;
   width: 33%;
   float: right;
   height: 200px;
} 
```

# node.js - jquery ajax 发布选项到 node.js 请求选项

> ID：15464303
> 
> 赞同：0
> 
> 时间：2013-03-17T18:10:07.020
> 
> 标签：node.js

我在我的 node.js 代码中使用了 jQuery 的 ajax 方法。我想将我的 jQuery ajax 函数的传递选项转换为节点的 http 模块的请求方法选项，因为现在我想使用请求方法。还有比这更好的方法吗？

```
 function checkSetOption(param){
    if(param === undefined){
        return false;
    }else{
        return true;    
    }

} // End checkSetOption
//
var ajax = function(params,callBack){

    request_options = {};

    // Parse for http request params
    params = new Array('dataType','url','method','success');
    params.forEach(function(option,index,array){
        if(checkSetOption(option)){

            request_options.option = params.option;
        }
    }); // End 'forEach' method

    http.request(param);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:57:13.707

如果我正确地回答了您的问题，您想从 node.js 调用 jquery ajax 到 URL。那么你不能`http.request`为此使用方法。顾名思义， AJAX 使用`XMLHttpRequest`和 http.request 就是这样。[两者](https://stackoverflow.com/questions/15038474/how-to-distinguish-http-request-and-xml-http-request-in-node-js-using-express)不同，因此您可能无法转换它。

为此在节点中使用[XMLHttpRequest](https://npmjs.org/package/xmlhttprequest)包。[jquery](https://npmjs.org/package/jquery)模块用于`XMLHttpRequest`调用 AJAX 。

看到这个[链接](https://stackoverflow.com/questions/8638820/jquery-ajax-in-node-js)

# javascript - 从纪元转换为日期字符串

> ID：15464304
> 
> 赞同：2
> 
> 时间：2013-03-17T18:10:16.990
> 
> 标签：javascript

我正在尝试将纪元时间（数字）转换为字符串日期。我有这两个值，从去年10月到今年3月：1349064000000,1362114000000。但是当我做 Date(num) 时，我得到了今天返回的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:13:39.850

您必须使用`new Date(num)`.

`Date()`，没有“new”，不会创建新的 Date 对象，它只返回当前日期作为字符串，而不管您传递的任何参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:14:15.763

它会提醒你想要的日期。

```
var utcSeconds = 1349064000;
var d = new Date(0); 
d.setUTCSeconds(utcSeconds);

alert(d); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:13:40.617

尝试这样的事情： -

```
var date = new Date(1349064000000); 
```

# javascript - jQuery删除除数字和小数以外的所有字符

> ID：15464306
> 
> 赞同：6
> 
> 时间：2013-03-17T18:10:34.267
> 
> 标签：javascript, replace, currency

```
var price = "$23.03";
var newPrice = price.replace('$', '') 
```

这可行，但价格也可以是：

```
var price = "23.03 euros"; 
```

和许多其他货币。

无论如何我只能留下数字和小数（。）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-17T18:13:45.980

```
var newPrice = price.replace(/[^0-9\.]/g, ''); 
```

不需要 jQuery。您还需要检查是否只有一个小数点，如下所示：

```
var decimalPoints = newPrice.match(/\./g);

// Annoyingly you have to check for null before trying to
// count the number of matches.
if (decimalPoints && decimalPoints.length > 1) {
    // do whatever you do when input is invalid.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:15:23.717

```
var newprice = price.replace( /\D+$/, ''); 
```

# java - 2个线程执行2个类似作业

> ID：15464309
> 
> 赞同：0
> 
> 时间：2013-03-17T18:10:52.363
> 
> 标签：java, multithreading

我有 2 个工作要在 JAVA 中执行。我有：

```
public static void main(String[] args) 
{
   takeInfofromDB();
   doSomeLongCalculationsWithThatData();

   takeInfofromDB2();
   doSomeLongCalculationsWithThatData2();

   GenerateAnswerFromBothAnswers();
} 
```

是否有可能以某种方式放入`takeInfofromDB();`2`doSomeLongCalculationsWithThatData();`个线程？并且`GenerateAnswerFromBothAnswers();`至少有一个仍在工作时无法执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:44:31.757

对于一个非常简单的轻量级方法，请尝试以下代码。但是，您可能想阅读更多关于线程和最终执行器的信息：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

```
Thread thread1 = new Thread() {
    private Object result;

    @Override
    public void run() {
        takeInfofromDB();
        result = doSomeLongCalculationsWithThatData();
    }

    public Object getResult() {
        return result;
    }
}

Thread thread2 = new Thread() {
    private Object result;

    @Override
    public void run() {
        takeInfofromDB2();
        result = doSomeLongCalculationsWithThatData2();
    }

    public Object getResult() {
        return result;
    }
}

thread1.start();
thread2.start();
thread1.join();
thread2.join();

Object result1 = thread1.getResult();
Object result2 = thread2.getResult();

GenerateAnswerFromBothAnswers(result1, result2); 
```

您不应该按原样运行此代码（我尚未对其进行测试，如果您`getResult`之前调用可能会发生奇怪的事情`join`），但它应该作为如何以基本方式使用线程的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:50:21.630

像这样...

```
public static void main(String[] args) 
{
   Thread t1 = new Thread(new Runnable() {
       public void run() {
           takeInfofromDB(); 
           doSomeLongCalculationsWithThatData();
       }});

   Thread t2 = new Thread(new Runnable() {
       public void run() {
         takeInfofromDB2();
         doSomeLongCalculationsWithThatData2();
       }});

   t1.start();
   t2.start();

   t1.join();
   t2.join();

   GenerateAnswerFromBothAnswers();
} 
```

# android - 使用 ksoap2 将 Byte[] 保存到远程数据库中？

> ID：15464310
> 
> 赞同：1
> 
> 时间：2013-03-17T18:11:07.950
> 
> 标签：android, ksoap2

我在我的 android 应用程序中使用 ksoap2 api 作为参考，将数据从我的 android 应用程序存储到远程 SQL Server 数据库。这个想法是保存用户数据，这些数据是为构建用户配置文件而收集的信息。我在下面使用了这个内部`doInBackground()`方法 ：`AsyncTask`

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);
request.addProperty("userName",username.getText().toString());
request.addProperty("eamil",email.getText().toString());
request.addProperty("gender",gender.getSelectedItem().toString());
request.addProperty("country",country.getSelectedItem().toString());
request.addProperty("about",about.getText().toString() );
request.addProperty("pic",byteArray);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);
envelope.dotNet = true;
try {
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL,20000);
                androidHttpTransport.call(SOAP_ACTION1, envelope);
                if (envelope.bodyIn instanceof SoapFault) {
                    String str= ((SoapFault) envelope.bodyIn).faultstring;
                    Log.i("fault", str);
                } else {
                    SoapObject result = (SoapObject)envelope.bodyIn;
                    if(result != null)
                    {
                          message=result.getProperty(0).toString();
                    }
                }
} catch (Exception e) {
 e.printStackTrace();
}
        return message; 
```

问题是，当我添加时 `request.addProperty("pic",byteArray);` **收到一个错误，指出无法序列化 Ksoap2，**但是当我将类型`byteArray`从类型`byte[ ]`更改为`string`正确执行的请求并将数据保存在我的数据库中时。这是我的网络服务的截图

```
Public Function AddUser(userName As String, email As String, gender As String, country As String, about As String, pic As Byte()) as String
// Some code to add data to databae 
Return "you are done"
 End Function 
```

任何有关此问题的帮助将不胜感激

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:40:30.317

我想我知道如何解决上述问题，如下所示：

**我没有向 Web 服务发送一个字节 []，而是改变了我的想法来发送如下构建的字符串：**

```
Bitmap selectedImage =  BitmapFactory.decodeFile(filePath);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    selectedImage.compress(Bitmap.CompressFormat.JPEG, 100, stream);
    byte[] byteArray = stream.toByteArray();
    String strBase64=Base64.encodeToString(byteArray, 0); 
```

然后我`strBase64`使用`request.addProperty("pic",strBase64);`

**然后要检索该字符串并再次使其成为图片，我只需从远程数据库中检索该字符串，然后执行以下操作：**

```
byte[] decodedString = Base64.decode(strBase64, Base64.DEFAULT);
Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
image.setImageBitmap(decodedByte); 
```

`strBase64`我从远程数据库中检索到的字符串在哪里。

# java - 未创建或检索 JPA 条目

> ID：15464311
> 
> 赞同：1
> 
> 时间：2013-03-17T18:11:12.683
> 
> 标签：java, database, jpa, eclipselink, entitymanager

我正在使用实体管理器创建 JPA 条目的程序。在此过程中，我**没有收到任何错误**。

```
...
factory = Persistence.createEntityManagerFactory("perst");
EntityManager entityManager = factory.createEntityManager();

entityManager.getTransaction().begin();
entityManager.persist(object);
entityManager.getTransaction().commit();

...

entityManager.close(); 
```

我创建了一个如下程序来读取数据，但它不返回任何数据，查询返回空。可能是什么原因 ？

这是读取数据的程序：

```
static List<String> classList = new ArrayList<String>();
    private static EntityManagerFactory factory;

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        factory = Persistence.createEntityManagerFactory("perst");
        EntityManager entityManager = factory.createEntityManager();

        classList.add("LeaveRequest");
        classList.add("person");

        for (Object classOjc : classList) {

            String className = classOjc.toString();

            Query query = entityManager.createQuery("SELECT p FROM " + className + " p");

            @SuppressWarnings("rawtypes")
            List resultList = query.getResultList();

            System.out.println(resultList.size());

            for (Object result : resultList) {

                System.out.println(result.toString());
            }
        }
    } 
```

xml坚持是：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence     
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

    <persistence-unit name="perst" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>LeaveRequest</class>
        <class>person</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
            <property name="javax.persistence.jdbc.url"
                value="jdbc:derby:/home/vogella/databases/simpleDb;create=true" />
            <property name="javax.persistence.jdbc.user" value="Sales" />
            <property name="javax.persistence.jdbc.password" value="" />
            <!-- EclipseLink should create the database schema automatically -->
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
            <property name="eclipselink.ddl-generation.output-mode"
                value="database" />
            <property name="eclipselink.logging.level" value="SEVERE" />
            <property name="eclipselink.logging.exceptions" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:10:49.323

您将 eclipselink 配置为在每次启动应用程序时删除并重新创建架构：

```
<property name="eclipselink.ddl-generation" value="drop-and-create-tables" /> 
```

很明显，如果您运行第一个应用程序来保留一些条目，然后运行第二个应用程序来尝试读取第一个条目所写的内容，您将找不到任何东西，因为 eclipselink 每次都会删除所有内容并重新创建模式。

# mysql - mysql错误：远程服务器的连接太多

> ID：15464317
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:11:59.023
> 
> 标签：mysql

我正在使用 3 台服务器和一台数据库服务器。我使用私有 ip 连接到 mysql 服务器。但是我多次遇到这种错误。

我试图在 php 中关闭 mysql.allow_persistent 并在 mysql 服务器中引发最大连接数和连接错误，但没有任何努力。

请帮我解决这个问题。

Link-ID == false，连接失败

mysql错误：连接太多

我还看到很多 TIME_WAIT 通过端口 3306 连接。如何正确调整 MySQL 服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:18:48.813

我相信`max_connections`设置不是对连接总数的限制，而是单个用户可以打开的连接数。

为了帮助解决此问题，请确保：

*   完成后您正在关闭连接，使用 mysql_close()
*   您没有使用持久连接 - 坏主意！
*   尝试`SET GLOBAL max_connections = ###`在 SQL 中运行，将 #s 替换为所需的数量。
*   查看并修改您的 my.cnf 文件以更改最大连接数 - 注意内存/负载问题。

# iphone - 为什么 Xcode 在字符串的末尾添加空格？

> ID：15464320
> 
> 赞同：1
> 
> 时间：2013-03-17T18:12:29.743
> 
> 标签：iphone, ios, string, whitespace, trim

我是 iphone 开发的菜鸟，我对 xcode 有一个非常奇怪的问题。出于某种原因，它会在我的字符串末尾随机添加尾随空格。我的初始字符串值是从 xml 解析的，然后我尝试从那里获取字符串的最后一部分。由于这个随机的空白，这被证明是困难的。任何帮助是极大的赞赏。

我的代码

```
//initial String 
<title>March 15 2013 Metals Commentary: Thomas Vitiello</title>

//Parsing
NSString *name = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
NSLog(@"myname: %@ %i", name, name.length);

//Log at this point
myname: March 15 PM Metals Commentary: Thomas Vitiello
         59

//Attempt at Removing Whitespace
NSArray *lastName=[name componentsSeparatedByString:@" "];
name = [[lastName objectAtIndex:6]stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
NSLog(@"myname: %@ %i", name, name.length);

//Log at this point
myname: Vitiello
9 //<--Should be 8, not 9\.  This annoying whitespace is also particularly long, taking more than 1 character space, despite obviously being 1 character long. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:20:14.703

您也可以尝试从字符串中删除换行符。您的字符串不仅包含空格，还包含换行符。

```
NSString *trimmmedContent = [contents stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:22:06.930

请注意，您可能没有`<title>March 15 2013 Metals Commentary: Thomas Vitiello</title>`. 您更有可能：

```
<title>March 15 2013 Metals Commentary: Thomas Vitiello
</title> 
```

除非您使用选项来阻止它，否则 XML 解析器通常会在标签之间包含空格，因此您会得到尾随的换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:21:38.427

您正在使用`whiteSpaceCharacterSet`，其描述如下：

> 返回仅包含行内空白字符空格 (U+0020) 和制表符 (U+0009) 的字符集。

但是从您自己的问题来看，您的字符串中似乎有一个换行符。请注意长度如何出现在与字符串不同的行上，即使您的格式字符串中没有换行符。换行符不是您要修剪的字符之一。要解决问题，请`whitespaceAndNewlineCharacterSet`改用。

# c++ - Hresult：发生了一个未确定的错误

> ID：15464330
> 
> 赞同：0
> 
> 时间：2013-03-17T18:13:12.100
> 
> 标签：c++, visual-studio-2010, shader, hresult

当我收到 HRESULT 错误“发生未确定的错误”（我正在使用 DXGetErrorDescription() 进行调试）时，我正在尝试使用 D3DX11CompileFromFile() 函数加载着色器文件。奇怪的是，我什至在 HRESULT 的 MSDN 文档中都找不到该错误。我有点不确定问题可能是什么，因为最近我的 Visual Studio 2010 C++ Express 一直在给我大量代码无关的错误。有没有其他人遇到过这个错误，如果有的话是什么问题？

自从上次完美运行以来，我只对该程序进行了一些小改动。我正在按照教程进行操作，因此人们希望代码是正确的，但是看到我是新手，我将列出自上次工作以来更改的区域，以防万一出现一些愚蠢的错误。

.fx 文件：

```
 VS_OUTPUT VS(float4 inPos : POSITION, float4 inColor : COLOR)
 {
     VS_OUTPUT output;

     output.Pos = inPos;
     output.Color = inColor;

     return output;
 }

 float4 PS(VS_OUTPUT input) : SV_TARGET
 {
      return input.Color;
 } 
```

其他已更改的代码：

```
 struct Vertex    //Overloaded Vertex Structure
   {
       Vertex(){}
       Vertex(float x, float y, float z, float cr, float cg, float cb, float ca)
           : pos(x,y,z), color(cr,cg,cb,ca){}

       XMFLOAT3 pos;
       XMFLOAT4 color;
   };

   //the layout, one element for each variable in the vertex struct
   D3D11_INPUT_ELEMENT_DESC layout[] =          
   {
       {"POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
       {"COLOR", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
   };
   UINT numElements = ARRAYSIZE(layout);        //the number of elements 
```

我还将新参数添加到我使用它们的地方的顶点结构中。

# php - 加入不起作用

> ID：15464331
> 
> 赞同：0
> 
> 时间：2013-03-17T18:13:18.177
> 
> 标签：php, mysql, codeigniter

我使用 SQL 连接编写了一个函数，但我不知道为什么它不起作用

这是一个模型

```
public function get_contract_user($user_id) 
{
    $this->db->select('contracts.*');
    $this->db->from('contracts');       
    $this->db->join('link', 'contracts.contract_id = link.contracts_contract_id');
    $this->db->where('link.users_user_id', $user_id); 
    $query = $this->db->get();  
    return $query->result(); 
} 
```

这是应用程序

```
$data['query'] = $this->admin_model->get_contract_user($contract_id); 
```

这是一个视图

```
foreach($query as $row) 
{       
    echo $row->contract_code; 
    echo $row->contract_num;
    echo $row->contract_start;
    echo $row->contract_end;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:48:59.693

您定义了方法`get_contract_user`，但您`get_contract`在提供的代码中使用。

您应该收到有关未定义函数/方法的错误。

# ruby-on-rails-3 - omn iauth-facebook 问题“Invalid_Credentials”

> ID：15464332
> 
> 赞同：1
> 
> 时间：2013-03-17T18:13:20.250
> 
> 标签：ruby-on-rails-3, facebook-graph-api, omniauth

我有一个非常奇怪的问题，但仅限于生产服务器。

我在我的 Gemfile 中使用了这个 Gem。

```
gem "omniauth-facebook", "~> 1.4.1" 
```

但突然开始在生产中出现以下错误，在本地工作正常。

```
heroku[router]: at=info method=GET path=/auth/failure?message=invalid_credentials&strategy=facebook host=www.myapp.com fwd="182.189.55.111" dyno=web.1 queue=0 wait=0ms connect=1ms service=90ms status=302 bytes=95 
```

在不同的论坛上搜索，人们说，一个临时的解决方案就是恢复到 1.4.0 版本，即

```
gem "omniauth-facebook", "1.4.0" 
```

它在本地也可以正常工作，但在生产中开始收到另一条错误消息。

```
OmniAuth::Strategies::Facebook::NoAuthorizationCodeError (must pass either a `code` parameter or a signed request (via `signed_request` parameter or a `fbsr_XXX` cookie)): 
```

[这个](https://stackoverflow.com/questions/12370056/omniauth-strategies-facebook-noauthorizationcodeerror-must-pass-either-a-code)链接说要再次升级到这个版本 1.4.1

这里似乎是死锁/循环情况。任何人都可以面对/解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T16:28:22.840

我假设您正在使用 JS SDK 登录？也许你的代码看起来像：

```
if (response.authResponse) {
  var url = "/auth/facebook/callback";
  window.location = url;
} 
```

我不确定为什么没有自动传递签名的请求，但我发现这种解决方法可以正常工作：

```
if (response.authResponse) {
  var url = "/auth/facebook/callback";
  url += '&' + $.param({ signed_request: response.authResponse.signedRequest });
  window.location = url;
} 
```

# html - 类似网格的文章布局

> ID：15464334
> 
> 赞同：2
> 
> 时间：2013-03-17T18:13:30.540
> 
> 标签：html, css, responsive-design

我正在使用 WP 3.5.1 ATM。我的目标是使文章宽度为 300 像素，然后将它们浮动到左侧，然后这些行以垂直和水平对齐方式直接堆叠在彼此下方。我遇到的问题是，当它到达第二行时，它不会垂直排列在第一行的正下方，而是水平排列。这有时会在第一行和第二行之间留下巨大的垂直间隙，如果第一行中的一篇文章很长，而其他文章很短。

我以前从未尝试过这种布局，所以我想知道是否可以从那些有过的人那里得到一些指示。我怎样才能做到这一点？或者也许是一个教程网站？我用谷歌搜索了它，但没有找到关于该方法的任何内容。

我的目标示例是 mysocialcloud.com、new.myspace.com、so.cl，尤其是这个：[http ://www.eleventhemes.com/gridly/](http://www.eleventhemes.com/gridly/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:43:47.777

如果您乐于使用 CSS3，那么您可以将所有内容包装在一个 div 中，然后使用 CSS 列：

```
-moz-column-count: 3;
-moz-column-gap: 1em;
-webkit-column-count: 3;
-webkit-column-gap: 1em;
column-count: 3;
column-gap: 1em; 
```

我做了一个小提琴[http://jsfiddle.net/DVfGP](http://jsfiddle.net/DVfGP)。

我创建了一个带有 css 列的 div，然后创建了一个 div 来包含每个元素。我将以下 css 应用于元素：

```
display: inline-block;
width: 100%; 
```

这将所有元素保留在同一列中。希望这就是你所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:24:31.460

或者，如果您正在寻找提供更好跨浏览器兼容性的基于 JS 的方法，请尝试使用[jQuery Masonry](http://masonry.desandro.com/)。

按照正常方式浮动您的元素，但 Masonry 将根据可用空间通过绝对定位重新定位您的元素。

# python - 循环python的迭代

> ID：15464338
> 
> 赞同：1
> 
> 时间：2013-03-17T18:13:41.117
> 
> 标签：python, for-loop, iteration

为什么会这样？

版本 1：

```
mylist= [1,2,3,4,5]
print mylist
for index, value in enumerate(mylist):
    value = 0
print mylist 
```

版本 2：

```
mylist= [[1],[2],[3],[4],[5]]
print mylist
for index, value in enumerate(mylist):
    value[0] = 0
print mylist 
```

输出 1：

```
[1, 2, 3, 4, 5]
[1, 2, 3, 4, 5] 
```

输出 2：

```
[[1], [2], [3], [4], [5]]
[[0], [0], [0], [0], [0]] 
```

我假设这两个版本都会创建一个局部变量并且不会覆盖列表本身。我想在第二个版本中情况并非如此。我正在使用python 2.7。显然，我可以在 for 循环中使用另一个变量来生成另一个值的副本。我花了一些时间才弄清楚这一点，它弄乱了我的代码功能。

解决方案：

```
value = list(value) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:14:52.510

您不是`value`在第二个版本中分配给，而是分配给包含在引用的列表中的*索引*`value`。

Python 名称是对值的引用，而不是内存位置。其中一些值是可变的，例如列表。列表包含对其他值的引用，列表也是如此，`value`并且`value[0]`是列表中包含的引用。

要更改第一个示例中的列表，请使用`index`from enumerate 更改列表中的索引：

```
for index, value in enumerate(somelist):
    somelist[index] = 0 
```

如果您*不*希望第二个示例中的嵌套列表发生更改，则应制作它们的副本：

```
for index, value in enumerate(somelist):
    value = value[:]  # full list slice, same as a copy. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:37:26.647

这是本地复制列表的另一种pythonic方法：

```
mylist= [[1],[2],[3],[4],[5]]
print mylist
mylst = []
for index, value in enumerate(mylist):
    mylst += [[value[0]]]
print mylst 
```

# javascript - 访问 wordpress 面板中的子菜单

> ID：15464341
> 
> 赞同：1
> 
> 时间：2013-03-17T18:14:00.213
> 
> 标签：javascript, wordpress, panel

我正在使用 WordPress 3.3.2。版本。当我将鼠标悬停在 wordpress 面板的左侧面板（即仪表板、帖子、媒体、链接、页面等）上时，我无法访问子菜单（即）所有帖子、添加新内容、类别、标签等。如果我禁用Java 脚本，它运行良好。

有人可以帮我解决这个问题吗？由于我是 wordpress 新手，我不知道在哪里可以找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:23:31.797

您的问题中没有足够的信息来制定完整的答案。您需要进行一些故障排除。

该错误很可能是由行为不当的插件对包含错误的 JavaScript 脚本文件进行排队引起的。尝试一个一个地禁用 Wordpress 中的插件，直到管理菜单再次起作用。[一旦您隔离了行为不端的插件，请尝试在https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)上询问该插件。请务必发布您遇到的任何错误消息。

# php - 更改杂货杂货中的自定义按钮操作

> ID：15464346
> 
> 赞同：0
> 
> 时间：2013-03-17T18:14:24.107
> 
> 标签：php, codeigniter, grocery-crud

我有将两个自定义按钮添加到杂货店的代码：

```
 try{
        $crud = new grocery_CRUD();
        $crud->set_table('my_table_1')->set_subject('something');
        $crud->add_action('food 1', 'http://taimapedia.org/images/e/e6/Nom_icon_64.png', '','ui-icon-image',array($this,'get_row_id' ));
        $crud->add_action('pillow', 'http://www.ademi.com/movilidad/Imagenes/ico_medica.png', '','ui-icon-image',array($this,'get_row_id'));
        $output = $crud->render();
        $this->_output_l($output);        
    }catch(Exception $e){
        show_error($e->getMessage().' --- '.$e->getTraceAsString());
    } 
```

然后根据我所在的行返回主键的函数

```
function get_row_id($primary_key , $row)
{
    return site_url('person/other/').'?id_person='.$row->id_person;
} 
```

我想传递`$which_url`应该重定向用户的地址以及参数，但它不起作用：

```
 function get_row_id($primary_key , $row, $which_url)
    {
        return site_url('person/'.$which_url.').'?id_person='.$row->id_person;
    } 
```

我怎么能添加这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:39:33.833

我认为这可能是一个错字？

尝试：

```
function get_row_id($primary_key, $row, $which_url)
{
    return site_url('person/' . $which_url) . '?id_person=' . $row->id_person;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:24:45.597

我试过

```
$crud->add_action('action1', 'http://taimapedia.org/images/e/e6/Nom_icon_64.png', 'person/address_one');
$crud->add_action('action2', 'http://www.ademi.com/movilidad/Imagenes/ico_medica.png', 'person/address_two'); 
```

# asp-classic - “Microsoft VBScript 运行时错误‘800a000d’‘800a000d’

> ID：15464347
> 
> 赞同：3
> 
> 时间：2013-03-17T18:14:25.903
> 
> 标签：asp-classic, vbscript

我有下一个代码，其工作原理如下：

1.  从 url 接收一些参数
2.  将此数据插入名为 clients 的表中
3.  然后我选择clients表中最后引入的数据
4.  最后，它尝试将此数据插入另一个名为 users 的表中。

但我收到了这个错误：

“Microsoft VBScript 运行时错误‘800a000d’‘800a000d’

类型不匹配：'[string: "INSERT INTO galileo."]'

/createClient.asp，第 50 行

第 50 行是这一行：

```
 <%
    Dim insertaUsuario
    Set insertaUsuario = Server.CreateObject("ADODB.Recordset")
    insertaUsuario.ActiveConnection = MM_trucks_STRING
    '" + Replace(posicionFechaFin__MMColParam, "'", "''") + "'
    insertaUsuario.Source = "INSERT INTO galileo.users (email,password,clientid) values ('"+(selecciona.Fields.Item("email").Value)+"','"+(selecciona.Fields.Item("password").Value)+"', '" + (selecciona.Fields.Item("id").Value)+ "'"
    insertaUsuario.Open()
    %> 
```

这是完整的代码：

```
 <%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>
    <!--#include file="connects/global.asp" -->
    <%
    Dim inserta__MMColParamEmail
    inserta__MMColParamEmail = "1"
    If (Request.QueryString("email") <> "") Then 
      inserta__MMColParamEmail = Request.QueryString("email")
    End If
    %>
    <%
    Dim inserta__MMColParamPassword
    inserta__MMColParamPasswordd = "1"
    If (Request.QueryString("password") <> "") Then 
      inserta__MMColParamPassword = Request.QueryString("password")
    End If
    %>

    <%
    Dim inserta
    Set inserta = Server.CreateObject("ADODB.Recordset")
    inserta.ActiveConnection = MM_trucks_STRING
    '" + Replace(posicionFechaFin__MMColParam, "'", "''") + "'
    inserta.Source = "INSERT INTO galileo.clients (email,password) values ('" + Replace(inserta__MMColParamEmail, "'", "''") + "','" + Replace(inserta__MMColParamPassword, "'", "''") + "')"
    inserta.Open()
    %>
    <%

    Dim selecciona
    Dim selecciona_numRows

    Set selecciona = Server.CreateObject("ADODB.Recordset")
    selecciona.ActiveConnection = MM_trucks_STRING
    selecciona.Source = "SELECT id, email, password from clients where email='" + Replace(inserta__MMColParamEmail, "'", "''") + "' and password='" + Replace(inserta__MMColParamPassword, "'", "''") + "'"
    selecciona.CursorType = 0
    selecciona.CursorLocation = 2
    selecciona.LockType = 1
    selecciona.Open()

    selecciona_numRows = 0
    %>
    <%= (selecciona.Fields.Item("id").Value)%>, <%= (selecciona.Fields.Item("email").Value) %>, <%= (selecciona.Fields.Item("password").Value) %>

    <%
    Dim insertaUsuario
    Set insertaUsuario = Server.CreateObject("ADODB.Recordset")
    insertaUsuario.ActiveConnection = MM_trucks_STRING
    '" + Replace(posicionFechaFin__MMColParam, "'", "''") + "'
    insertaUsuario.Source = "INSERT INTO galileo.users (email,password,clientid) values ('"+(selecciona.Fields.Item("email").Value)+"','"+(selecciona.Fields.Item("password").Value)+"', '" + (selecciona.Fields.Item("id").Value)+ "'"
    insertaUsuario.Open()
    %>

    <!--If it is all ok, it redirects-->
    <% Response.redirect ("default.asp")%> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:55:41.180

您在 SQL 字符串中的最后一个 ' 之后缺少一个 ')'。但是我不确定您为什么会收到这种错误消息。

# html - Dart CSS3 过渡白光不需要

> ID：15464351
> 
> 赞同：1
> 
> 时间：2013-03-17T18:14:45.963
> 
> 标签：html, css, dart

所以我才开始学习，所以我是初学者。我想要实现的是改变具有不同背景的 div，比如[这里](http://css3.bradshawenterprises.com/cfimg/#cfimg7)。在教程中完成了，但我想用背景属性来做，因为我不希望我的图像是可拖动的。

发生的情况是，不是每个图像相互流动并改变颜色，而是发生了一些白光。有什么帮助吗？

这是HTML

```
<p id="transitionControls">
  <span>Snap1</span>
  <span>Snap2</span>
  <span>Snap3</span>
  <span>Snap4</span>
  <span>Snap5</span>
  <span>Snap6</span>
  <span>Snap7</span>
</p>  

<div id="imageContainer" class='opaque'>
  <div id="Snap7"  class="snap"></div>
  <div id="Snap6"  class="snap"></div>
  <div id="Snap5"  class="snap"></div>
  <div id="Snap4"  class="snap"></div>
  <div id="Snap3"  class="snap"></div>
  <div id="Snap2"  class="snap"></div>
  <div id="Snap1"  class="snap"></div>
  </div> 
```

这是CSS：

```
div{
  position:absolute;
  -webkit-transition: opacity 1s ease-in-out;
  -moz-transition: opacity 1s ease-in-out;
  -o-transition: opacity 1s ease-in-out;
  background-size: 100% 100%;
  margin:auto;
  transition: opacity 1s ease-in-out;
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
}

div.snap {
  opacity:0;
}

div.opaque{
  opacity:1;
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
  filter: alpha(opacity=1);
 } 
```

每个 Snap 都有简单的 CSS

```
#Snap1 {
background: url('img/Snap_1.jpg') no-repeat;
width: 1680px;
height: 1350px;
} 
```

这是飞镖脚本

```
import 'dart:html';

DivElement div;
var counter = 0;

void main() {
  query("#transitionControls")
    ..onClick.listen(changeDiv);
}
//
void changeDiv(MouseEvent event) {

  SpanElement snap = event.target;
  var text = snap.text;
  div = query(".opaque");

  query("#$text").classes.add("opaque");

  div.classes.remove("opaque");
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T19:30:07.090

一些重新定位的 CSS 属性在这里和那里。一些 Dart 代码在这里和那里重构。在类下添加`#imageContainer`块元素`opaque`可能会阻止您的目标。您的示例如下所示：

对于 DOM：

```
<p id="transitionControls">
  <span>Snap1</span>
  <span>Snap2</span>
  <span>Snap3</span>
</p>

<div id="imageContainer">
  <div id="Snap1" class="opaque"></div>
  <div id="Snap2" class="snap"></div>
  <div id="Snap3" class="snap"></div>
</div> 
```

对于 CSS：

```
 #imageContainer {
    position: relative;
    height: 24rem;
    background-color: #ddd;
    margin: auto;
  }

  #imageContainer .snap,
  #imageContainer .opaque {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    -webkit-transition: opacity 1s ease-in-out;
    -moz-transition: opacity 1s ease-in-out;
    -o-transition: opacity 1s ease-in-out;
    transition: opacity 1s ease-in-out;
  }

  .snap {
    z-index: 1;
    opacity: 0;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  .opaque {
    z-index: 2;
    opacity: 1;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=1);
  }

  #Snap1 {
    background-color: green;
  }

  #Snap2 {
    background-color: blue;
  }

  #Snap3 {
    background-color: red;
  } 
```

Dart 很丑，可以重构。

```
import 'dart:html';

final triggers = query('#transitionControls');

main() {
  triggers.onClick.listen(changeDiv);
}

changeDiv(Event event) {
  SpanElement snap = event.target;

  // Fade the current opaque layer.
  query('#imageContainer .opaque').classes
      ..remove('opaque')
      ..add('snap');

  // Reveal the target layer.
  query('#${snap.text}').classes
      ..remove('snap')
      ..add('opaque');
} 
```

希望这可以帮助。

# android - 检索从android发送的servlt中的json

> ID：15464353
> 
> 赞同：1
> 
> 时间：2013-03-17T18:14:54.153
> 
> 标签：android, servlets

在从 Java Servelt 中的 android检索作为**HttpEntity发送的 JSON 对象时，我遇到了一个问题。**下面是我的代码

**安卓代码：**

**

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("order", d));
httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));    
httpResponse = httpClient.execute(httpPost); 
```

**

**小服务程序代码：**

```
InputStream in = request.getInputStream();
    StringBuffer xmlStr=new StringBuffer();
    int d;
    while((d=in.read()) != -1){
              xmlStr.append((char)d);
    }
    System.out.println("xmlStr1--"+xmlStr.toString()); 
```

servelt 代码中的上述语句打印 JSON 中的数据，但所有垃圾值都像这样

xmlStr1--order=%7B%22orderno%22%3A%223%22%2C%22tableid%22%3A%227%22%2C%22kotid%22%3A%223%22%2C%22stewardid%22%3A% 223%22%2C%22items%22%3A%220%22%7D

请帮我检索这个从应用程序作为**HttpEntity发送的 JSON。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:38:55.437

数据不是 JSON 格式或 XML 格式。您的代码创建 Url-Encoded 格式。 [URL 编码和解码 Java 中的特殊字符](https://stackoverflow.com/questions/4841331/url-encode-and-decode-special-character-in-java)描述了对您创建的内容进行解码的代码，但该代码有其自身的问题。

如果您希望将 NameValuePair 列表编码为 JSON 格式，您可以在 Android 上使用 GSON，在 servlet 中使用 GSON 或 Jackson。请参阅[https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/)和[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:38:44.663

你应该简单地使用

```
String order = request.getParameter("order"); 
```

# jsf - Intellij 将 web 文件夹放在错误的目录中？

> ID：15464363
> 
> 赞同：0
> 
> 时间：2013-03-17T18:15:57.367
> 
> 标签：jsf, maven, intellij-idea

根据我找到的消息来源，JSF 项目的 webapp 文件夹应该位于文件夹“java”所在的文件夹中。这些来源之一就是[这个](http://www.mkyong.com/jsf2/primefaces/primefaces-hello-world-example/)。

当我使用 IntelliJ 12 创建一个 maven 项目并添加 JSF 框架支持时，intellij 在文件夹“src”所在的位置创建一个名为“web”的文件夹。所以即使一切都很好，当我在文件夹中输入 mvn verify 时，maven 抱怨它找不到文件 web.xml。当我将文件夹“web”移动到应有的位置并将其重命名为“webapp”时，一切正常。

但是为什么在 IntelliJ 中会这样呢？

# c++ - 我对下面的代码有两个问题

> ID：15464365
> 
> 赞同：2
> 
> 时间：2013-03-17T18:16:08.330
> 
> 标签：c++, string, compiler-warnings, c-strings

在 VS2010 中运行此代码，我收到如下所示的警告，但控制台上会输出 C 字符串“f()”和“g()”。

问题 1：为什么 f() 会产生警告而 g() 不会？直到程序结束之前，字符串文字是否都保留在静态内存中？

问题 2：当我在 main() 中注释掉对 h() 的调用时，代码会崩溃。为什么会有不同的行为？

```
#include<iostream>

const char* const& f()
{
   return "f()";            //  warning C4172: returning address of local variable or temporary
}

const char* g()
{
    return "g()";           //  no warning
}

const std::string& h()
{
    return "h()";           //  warning C4172:
}

int main()
{
    std::cout << f() << '\n';
    std::cout << g() << '\n';
//  std::cout << h().c_str() << '\n';       //  comment out and program crashes
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:18:42.343

您正在返回对仅在本地使用的值的*引用。*这是未定义的行为。您可能想要的只是返回一个 char 指针或 a `std::string`，而不是 char 指针引用或 a `std::string&`。

您碰巧看到`f()`打印出来的事实只是抽奖的运气。它仍然是未定义的行为，不能指望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:19:44.897

**f() 产生未定义的行为**。未定义的行为会使您的程序处于无效状态，从而导致（伪随机）崩溃。

这是未定义的行为，因为**您返回对局部变量的引用**。函数调用后，局部变量将被销毁，让你的`char*`指向无处可去，真的。

如果您删除引用，该值将被复制，并且我们没有范围冲突。

# c# - 使用 HiddenField 将 jQuery 变量传递到 ASP.NET 代码中

> ID：15464370
> 
> 赞同：2
> 
> 时间：2013-03-17T18:16:28.430
> 
> 标签：c#, jquery, asp.net

我在使用隐藏字段和 jQuery 将 div 的物理大小（高度和宽度）传递到 ASP.NET 变量时遇到问题。

这是我的代码，但它不起作用：

```
$("<%=hfAdvertHeight.ClientID %>").val($("#Advert_Container").attr("height")); 
```

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T19:36:54.947

如果你的 ASP.NET 隐藏字段 ID 是“HiddenMyField”，那么使用这个：

```
<asp:HiddenField ID="HiddenMyField" runat="server" />

var input = $("[id$='HiddenMyField']").val();

$.ajax {
         url:.....,
         data: JSON.stringify(input),
         ...
} 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:52:45.623

在您的 html 中添加 "ClientIDMode="Static"" 作为隐藏控件属性，然后尝试： $("#hfAdvertHeight").val($("#Advert_Container").attr("height"));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:17:17.147

代码应包含 id 选择器`#`

```
$("#<%=hfAdvertHeight.ClientID %>").val($("#Advert_Container").attr("height")); 
```

如果您在页面加载时执行此操作，请确保将代码包装在`ready`函数中。

```
$(document).ready(function(){
    $("#<%=hfAdvertHeight.ClientID %>").val($("#Advert_Container").height());
}); 
```

另请注意，`attr`可以使用更轻松地检索而不是通过它检索高度属性`.height()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:17:47.303

您忘记了隐藏字段名称前的 #：

```
$("#<%=hfAdvertHeight.ClientID %>").val($("#Advert_Container").attr("height")); 
```

# python - 如果我无权访问指定的数据库，如何构建和测试 REST API 来指定？

> ID：15464371
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:16:36.400
> 
> 标签：python, database, api, http, rest

我需要编写一个 REST API（我正在用 Python 编写它，为了它的价值），它可以 GET、POST 和 PUT 到数据库 - 唯一的问题是数据库不存在，或者我没有访问权限给它。我如何模拟或创建一个非常简单的数据库，以便在构建和测试 API 时使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:20:16.947

您可以使用 sqlite [http://docs.python.org/2/library/sqlite3.html](http://docs.python.org/2/library/sqlite3.html)。如果您使用的是像 SQLAlchemy ( [http://www.sqlalchemy.org/](http://www.sqlalchemy.org/) ) 这样的 ORM，您可以先开始使用 sqlite，然后再切换到 MySQL 或 PGSql 等数据库。

# java - 具有多线程的 Java Swing

> ID：15464373
> 
> 赞同：2
> 
> 时间：2013-03-17T18:16:40.007
> 
> 标签：java, multithreading, swing, actionlistener

问题是：我有一个摇摆应用程序。只有一种带有 2 个 btns 的表单（“开始”、“停止”）。在这些 btns 上，我在里面添加了带有线程类的 ActionListener。

当我单击 btn“开始”时，我想在新线程中开始一些工作，并在单击 btn“停止”时结束该工作。与此有点相似的代码在控制台中可以正常工作，但在摇摆不定。任何帮助表示赞赏。提前致谢。)

```
 class Action implements ActionListener{
        class MyThread extends Thread{
             boolean live = true;

             @Override
             public void run() {            
                while(live)
                     System.out.println("doing...");
             }              

              public void shutDown(){   
                 live = false;
             }
        }
        @Override
        public void actionPerformed(ActionEvent e) {
             JButton source = (JButton) e.getSource();
             MyThread t = new MyThread();
             switch (source.getText()) {
             case "Start":
                  t.start();
                  break;
             case "Stop":
                  t.shutDown();
                  break;
    } 
```

还有那个简单的形式

```
 public class App extends JFrame {
        public static void main(String[] args) {
            App app = new App();
            app.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            app.setVisible(true);

            JButton btn1 = new JButton("Start");
            JButton btn2 = new JButton("Stop");

            app.getContentPane().add(btn1, BorderLayout.WEST);
            app.getContentPane().add(btn2, BorderLayout.EAST);

            Action action = new Action();

            btn1.addActionListener(action);
            btn2.addActionListener(action);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:20:42.277

每次单击按钮时，您都会创建一个新的 Thread 对象，因此您停止的线程与您启动的线程不同。您需要保留对您在启动时创建的线程的引用，以便以后可以再次停止它。

# jquery - XHTML 的 jQuery 追加获取结果失败

> ID：15464374
> 
> 赞同：3
> 
> 时间：2013-03-17T18:16:46.007
> 
> 标签：jquery, ajax, web-services, append

当我尝试`append()`将 XHTML 结果`$.get()`转换为容器元素时，

```
$.get("my-webservice", function(data){
    $("#some-container").append(data);
  }); 
```

我收到一个错误：

```
TypeError: 'null' is not an object (evaluating 'e.ownerDocument') 
```

我也试过：

```
$("#some-container").append($(data)); 
```

并得到同样的错误。`load()`工作正常，所以我知道网络服务正在返回良好的数据：

```
$("#some-container").load("my-webservice"); 
```

在 web 服务端，如果我在返回之前将 XHTML 编码为字符串`$.get()`，则一切都按预期工作。[append()](http://api.jquery.com/append/)文档说它接受字符串、DOM 元素或 jQuery 对象——我怀疑我弄错了。有什么建议么？

网络服务只是返回一些简单的引导 XHTML：

```
<div class="row">
  <div class="span5">Div stuff</div>
  <div class="span4">More div stuff</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:30:36.603

当您使用该`$.get`函数而不指定`dataType`. 作为`$.get`函数的最后一个参数，尝试添加 'html' 来指定`dataType`. 有关更多信息，请参阅[jQuery 文档](http://api.jquery.com/jQuery.get/)。

```
$.get("my-webservice", function(data){
    $("#some-container").append(data);
}, 'html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:22:49.783

尽管调试控制台提示浏览器将 Web 服务输出视为 DOM 对象，但我最终意识到内容类型设置不正确。对 web 服务的这些更改中的一个或两个都会导致 jQuery`dataType`正确猜测：

1.  将响应内容类型设置为`text/html`
2.  `<!DOCTYPE html>`响应前的输出

# c++ - 是否可以有一个指向第一个指针指向的变量的指针的指针？

> ID：15464377
> 
> 赞同：0
> 
> 时间：2013-03-17T18:17:04.783
> 
> 标签：c++, oop, pointers, memory, dynamic

这会起作用吗：

```
Class MyClass{

public:
    void Foo();

private:
    MyClass** ppMyClass;

};

MyClass* pMyClass = new MyClass;

ppMyClass = &pMyClass;

delete pMyClass;

ppMyClass-> Foo(); 
```

如果它不起作用，那么将指针分配给指针并使用它来访问它指向的类的函数的正确方法是什么？问题是，我想知道那里的错误是否是由内存泄漏引起的：[为什么我在这段代码中得到 WSAENOTSOCK 错误？](https://stackoverflow.com/questions/15462669/why-do-wsaasyncselect-fails-in-this-code)

那么，这行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:20:49.703

不，`ppMyClass->Foo();`不能像`ppMyClass`a`MyClass**`而不是 a那样工作`MyClass*`。

理论上你可以这样做`(*ppMyClass)->Foo()`，尽管在你的特定代码片段中，这将是你之前的未定义`delete`行为`pMyClass`。

# php - 如何在这个免费的 php 联系表单中实现一个非常简单的安全功能

> ID：15464385
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:17:29.020
> 
> 标签：php, forms, security, email, contact

嘿伙计们，我一直在搞乱我发现的免费 php/html 联系表格：[http](http://www.freecontactform.com/email_form.php) ://www.freecontactform.com/email_form.php这就是我正在做的网站的全部内容，但我需要稍微改进一下更安全，所以我要做的就是创建一个额外的盒子并让它接受 4 的值。问题是我在实现它时遇到了麻烦。如果安全值为 4，我希望表单执行，如果不是，则显示错误消息。我收到了错误消息，但它似乎不接受 4 的值。你能看看我的代码并告诉我哪里出错了吗？谢谢。

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "0000000000";
    $email_subject = "From the website";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['security']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $first_name = $_POST['first_name']; // required
    $last_name = $_POST['last_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $security = $_POST['security'];
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
    $string_sec = "4";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($security) < 4) {
    $error_message .= 'The security passphrase is not correct.';
  }if(strlen($comments) > 4) {
    $error_message .= 'The security passphrase is not correct.<br />';
  }

  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- include your own success html here -->

Thank you for contacting us. We will be in touch with you very soon.
<?php
}
?> 
```

* * *

我的网站的HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="Scripts/swfobject_modified.js" type="text/javascript"></script>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/text.css" />
<link rel="stylesheet" type="text/css" media="all" href="css/960.css" />
<link rel="stylesheet" type="text/css" media="all" href="css/style.css" />
<title>Japonica Flower Shop</title>
</head>

<body>
<div class="container_12" id="topContent">
  <div class="grid_4">
    <h1>Japonica Flower Shop</h1>
    <h2>For Fresh Flowers</h2>
    <h3>Secret Garden Centre, Keynsham</h3>
  </div>
  <div class="grid_8" id="rightTopContent"> <a href="index.html">home</a> | <a href="">gallery</a> | <a href="aboutus.html">about us</a> | <a href="http://blankwebsiteblog.blogspot.co.uk/">blog</a> | <a href="#">contact</a> </div>
</div>
<div class="clear">&nbsp;</div>
<div class="container_12">
  <div class="grid_4">
    <ul class="gallery">
      <li class="active">
        <table border="1" width ="100%"
cellpadding="40"  align="center">
            <tr>

          <td cell valign="top"  width ="300"><font color="black" face="Georgia, Arial, Garamond" >
            <form name="contactform" method="post" action="send_form_email.php">
              <table width="450px">
                  </tr>

                <tr>
               <p style="font-family:Helvetica;color:black;font-size:15px;">Fill out this form to send us a email, we aim to reply as soon as possible. </p>
                  <td valign="top"><label for="first_name">First Name *</label></td>
                  <td valign="top"><input  type="text" name="first_name" maxlength="50" size="30"></td>
                </tr>
                <tr>
                  <td valign="top""><label for="last_name">Last Name *</label></td>
                  <td valign="top"><input  type="text" name="last_name" maxlength="50" size="30"></td>
                </tr>
                <tr>
                  <td valign="top"><label for="email">Email Address *</label></td>
                  <td valign="top"><input  type="text" name="email" maxlength="80" size="30"></td>
                </tr>
                <tr>
                  <td valign="top"><label for="telephone">Telephone Number</label></td>
                  <td valign="top"><input  type="text" name="telephone" maxlength="30" size="30"></td>
                </tr>
                <tr>
                  <td valign="top"><label for="comments">Comments *</label></td>
                  <td valign="top"><textarea  name="comments" maxlength="1000" cols="25" rows="6"></textarea></td>
                </tr>

                 <tr>
                  <td valign="top"><label for="security">Security Passphrase</label></td>
                  <td valign="top"><input  type="number" name="security" maxlength="30" size="30">
                  <img src="./images/security.png" title="passphrase problem!" alt="1" align"left">
                  </td>
                <tr>
                  <td colspan="2" style="text-align:center"><input type="submit" value="Submit">
                    <a href="http://www.freecontactform.com/email_form.php">Email Form</a></td>
                </tr>
              </table>
            </form>
            &nbsp;
            </p></td>

            <td><p style="font-family:Helvetica;color:black;font-size:15px;">Japonica Flowershop,
Whitegate Nursieries,
The Secret Garden Centre,
Stockwood Hill,
Keynsham,
Bristol,
BS312AN,
Tel; 07848401140
</p>
<p style="font-family:Helvetica;color:black;font-size:15px;"> 
Opening Hours 10-4 closed Monday and Thursday
</p>
 </p><img src="./images/bonnet.png" title="Come on In!" alt="1" align"left"></td>
           <br />

              </font>
              </td>
          </tr>
        </table>
      </li>
    </ul>
  </div>
  <!-- end grid_4 -->
  <div class="grid_8">
    <div id="main_image"></div>
  </div>
</div>
<div class="clear">&nbsp;</div>
<div class="container_16">
  <div class="grid_2">
    <p>&nbsp;</p>
  </div>
  <div id="footer"><a href="index.html">home</a> | <a href="">gallery</a> | <a href="aboutus.html">about us</a> | <a href="http://blankwebsiteblog.blogspot.co.uk/">blog</a> | <a href="#">contact</a></div>
</div>
<div class="grid_2">
  <p>&nbsp;</p>
</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:25:10.427

您的代码中的行：

```
if(strlen($security) < 4) { 
```

似乎是错误的，因为 $security 的长度是**1**

要验证它，您需要比较确切的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:23:50.877

你根本没有使用`$string_sec = "4";`你设置的。

```
if(strlen($security) < 4) {
    $error_message .= 'The security passphrase is not correct.';
}
if(strlen($comments) > 4) {
    $error_message .= 'The security passphrase is not correct.<br />';
} 
```

所有这一切都是检查长度`$security`是否小于`4`。你想测试 if `$security`doesn't equals `$string_sec`，所以使用这个：

```
if ($security != $string_sec) {
    $error_message .= 'The security passphrase is not correct.';
} 
```

我不确定你在做什么测试`strlen($comments)`，你可能想把它拿出来？

# python - 如何在python tkinter中右键单击将值传递给弹出命令

> ID：15464386
> 
> 赞同：2
> 
> 时间：2013-03-17T18:17:36.680
> 
> 标签：python, python-2.7, tkinter

我正在开发一个 gui，我在其中创建了一个带有几个选项的右键单击弹出菜单。现在我的查询是如何将一些变量或值或参数或字符串传递给包含在弹出菜单中的命令。我使用下面的代码来生成弹出菜单。

```
from Tkinter import *

root = Tk()

w = Label(root, text="Right-click to display menu", width=40, height=20)
w.pack()

# create a menu
popup = Menu(root, tearoff=0)
popup.add_command(label="Next", command=next(a,b))
popup.add_command(label="Previous")
popup.add_separator()
popup.add_command(label="Home")

def do_popup(event,a,b):
    # display the popup menu
    try:
        popup.tk_popup(event.x_root, event.y_root)
    finally:
        # make sure to release the grab (Tk 8.0a1 only)
        popup.grab_release()
def next(event,a,b):
    print a
    print b

w.bind("<Button-3>",lambda e, a=1, b=2: do_popup(e,a,b))

b = Button(root, text="Quit", command=root.destroy)
b.pack()

mainloop() 
```

在上面的代码中，我想将 a 和 b 的值传递给 Next 命令。怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:40:14.577

您需要存储这些值以便在`next`事件处理程序中使用它们。您可以做一些解决方法，例如在 Menu 对象中添加引用`popup.values = (a, b)`，但最简洁的方法是使用类来表示您的 GUI。

请注意，它就像继承 Tkinter 小部件并添加您要存储的值一样简单：

```
from Tkinter import *

class App(Tk):
    def __init__(self):
        Tk.__init__(self)
        self.a = 1
        self.b = 2
        self.label = Label(self, text="Right-click to display menu", width=40, height=20)
        self.button = Button(self, text="Quit", command=self.destroy)
        self.label.bind("<Button-3>", self.do_popup)
        self.label.pack()
        self.button.pack()
    def do_popup(self, event):
        popup = Popup(self, self.a, self.b)
        try:
            popup.tk_popup(event.x_root, event.y_root)
        finally:
            popup.grab_release()

class Popup(Menu):
    def __init__(self, master, a, b):
        Menu.__init__(self, master, tearoff=0)
        self.a = a
        self.b = b
        self.add_command(label="Next", command=self.next)
        self.add_command(label="Previous")
        self.add_separator()
        self.add_command(label="Home")
    def next(self):
        print self.a, self.b

app = App()
app.mainloop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-14T09:09:50.113

@一种。Rodas 的回答很好，但这里有一个解决方案，它不需要为每次激活创建一个新的菜单实例（而是一个在需要时反复使用的菜单实例）：

```
from tkinter import *

class App(Tk):
    def __init__(self):
        Tk.__init__(self)
        self.a = 1
        self.b = 2
        self.menu = Popup(self)
        self.label = Label(self, text="Right-click to display menu",
                           width=40, height=20)
        self.button = Button(self, text="Quit", command=self.destroy)
        self.label.bind("<Button-3>",
                        lambda e: self.menu.popup(e.x_root, e.y_root,
                                                  self.a, self.b))
        self.label.pack()
        self.button.pack()

class Popup(Menu):
    def __init__(self, master):
        super().__init__(master, tearoff=0)
        self.a = None
        self.b = None
        self.add_command(label="Do something", command=self.act)
    def act(self):
        print(self.a, self.b)
    def popup(self, x, y, a, b):
        self.a = a
        self.b = b
        self.tk_popup(x, y)

app = App()
app.mainloop() 
```

注意我们是如何在调用菜单时传递参数的，而不是在实例化它时。

# python - 使用 Python 在 LAN 上查找活动节点

> ID：15464387
> 
> 赞同：5
> 
> 时间：2013-03-17T18:17:37.037
> 
> 标签：python, networking, ip, lan, python-sockets

我正在创建一个与 Python 2.7 和 Windows 中的 IP Messenger 相同的 Messenger。

我希望使用与 IP Messenger 相同的功能来**查找通过 LAN 运行相同软件的系统，**但我无法理解该技术。

有人可以帮我解决**使用**Python 2.7 和套接字库**在 LAN 上运行相同软件的计算机 IP 地址或主机名的问题。**

请建议一些可以在 Windows 上实现的东西，而不是 Nmap（仅限于 linux），如果解决方案是 Python 的 Socket Library 代码，这将非常有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T10:35:53.997

Windows 命令提示符的“ **net view** ”命令解决了我所说的问题。

通过这个命令，我可以找到通过 LAN 连接到我的计算机的所有计算机，然后我将向所有计算机发送数据包，并且回复我的数据包的计算机将是运行与我正在运行的相同软件的系统，这完全解决了我的问题。

此代码列出了通过 LAN 与我的计算机连接的所有计算机主机名。

```
import os
os.system('net view > conn.tmp')
f = open('conn.tmp', 'r')
f.readline();f.readline();f.readline()

conn = []
host = f.readline()
while host[0] == '\\':
    conn.append(host[2:host.find(' ')])
    host = f.readline()

print conn
f.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:29:14.697

您要做的是对活动节点的本地网络进行 ping 操作。像[这个](https://github.com/bwaldvogel/neighbourhood/blob/master/neighbourhood.py)使用[Scapy](http://www.secdev.org/projects/scapy/)的脚本可能就足够了。这种[纯 python 实现](https://github.com/jedie/python-ping/blob/master/ping.py)可能是另一个更轻量级的替代方案。

为了获取当前 IP 地址，您可能需要遵循[此问题](https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib)中给出的解决方案之一。

上述[Ping](https://github.com/jedie/python-ping/blob/master/ping.py)类的扩展可以让您将结果拉回以供阅读：

```
# TODO: This is a quick hack to retrieve the results 
# of the ping, you should probably do something a bit more elegant here!
class PingQuery(Ping):
    def __init__():
        super().__init__()
        result = false

    def print_success(self, delay, ip, packet_size, ip_header, icmp_header):
        result = ip 
```

然后，您可以遍历子网中的地址以找到您的活动机器列表：

```
subnet = "192.168.0." # TODO: Trim the last number off the IP address retrieved earlier
for i in range(1, 255):
    hostname = subnet + i
    p = PingQuery(hostname, 500, 55) # Timeout after 500ms per node
    p.run(1)
    if (p.result):
        print p.result + " is live" 
```

之后，您可以通过尝试使用您选择的端口连接到每台机器来询问正在运行的机器，检查是否有专门定制的 TCP 数据包来证明侦听程序实际上是您的软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T20:56:42.393

根据 aki92 的回答...

```
import re
import subprocess
# ...

nodes = re.findall(r'\\(.+?)(?: .*)?\n',subprocess.check_output('net view')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-13T05:50:21.667

使用 Simple HttpServer 添加了带有 JSON 响应的 http 层。

```
import time
import socket
import struct
import select
import random
import json
import asyncore
from netaddr import IPNetwork
import BaseHTTPServer

# From /usr/include/linux/icmp.h; your milage may vary.
ICMP_ECHO_REQUEST = 8 # Seems to be the same on Solaris.

ICMP_CODE = socket.getprotobyname('icmp')
ERROR_DESCR = {
    1: ' - Note that ICMP messages can only be '
       'sent from processes running as root.',
    10013: ' - Note that ICMP messages can only be sent by'
           ' users or processes with administrator rights.'
    }

__all__ = ['create_packet', 'do_one', 'verbose_ping', 'PingQuery',
           'multi_ping_query']

HOST_NAME = '0.0.0.0' # !!!REMEMBER TO CHANGE THIS!!!
PORT_NUMBER = 9000 # Maybe set this to 9000.
SUBNET = '10.10.20.1/24'
host_list = []
"""
Below class would handle all rest requests
"""
class MyHandler(BaseHTTPServer.BaseHTTPRequestHandler):
     def do_HEAD(self,s):
         s.send_response(200)
         s.send_header("Content-type", "text/html")
         s.end_headers()
     def do_GET(s):
        """Respond to a GET request."""  
        s.send_response(200)
        s.send_header("content_disposition", "attachment; filename=serverstatus.json")
        s.send_header("Content-type", "text/json")
        s.end_headers()

        for ip in IPNetwork(SUBNET):
            host_list.append(ip.format(None))

        #Create Object of SubnetMonitor
        monitor =  SubnetMonitor()

        responseData = {}
        for host, ping in monitor.multi_ping_query(host_list).iteritems():

            if ping is not None:
                print(host,'()',socket.gethostbyname(host)   , '=', ping)   
                responseData[host] = 'Is Up'    
            else:
                responseData[host] = 'Is Down'

        json_data = json.dumps(responseData, sort_keys=True, indent=4, separators=(',', ': '))

        s.wfile.write(json_data)

"""
Below class is used to send/receive all ping/icmp requests 
"""     
class PingQuery(asyncore.dispatcher):

    def __init__(self, host, p_id, timeout=0.5, ignore_errors=False,monitor=None):
        """
       Derived class from "asyncore.dispatcher" for sending and
       receiving an icmp echo request/reply.

       Usually this class is used in conjunction with the "loop"
       function of asyncore.

       Once the loop is over, you can retrieve the results with
       the "get_result" method. Assignment is possible through
       the "get_host" method.

       "host" represents the address under which the server can be reached.
       "timeout" is the interval which the host gets granted for its reply.
       "p_id" must be any unique integer or float except negatives and zeros.

       If "ignore_errors" is True, the default behaviour of asyncore
       will be overwritten with a function which does just nothing.

       """
        self.monitor = monitor
        asyncore.dispatcher.__init__(self)
        try:
            self.create_socket(socket.AF_INET, socket.SOCK_RAW, ICMP_CODE)
        except socket.error as e:
            if e.errno in ERROR_DESCR:
                # Operation not permitted
                raise socket.error(''.join((e.args[1], ERROR_DESCR[e.errno])))
            raise # raise the original error
        self.time_received = 0
        self.time_sent = 0
        self.timeout = timeout
        # Maximum for an unsigned short int c object counts to 65535 so
        # we have to sure that our packet id is not greater than that.
        self.packet_id = int((id(timeout) / p_id) % 65535)
        self.host = host
        self.packet = self.monitor.create_packet(self.packet_id)
        if ignore_errors:
            # If it does not care whether an error occured or not.
            self.handle_error = self.do_not_handle_errors
            self.handle_expt = self.do_not_handle_errors

    def writable(self):
        return self.time_sent == 0

    def handle_write(self):
        self.time_sent = time.time()
        while self.packet:
            # The icmp protocol does not use a port, but the function
            # below expects it, so we just give it a dummy port.
            sent = self.sendto(self.packet, (self.host, 1))
            self.packet = self.packet[sent:]

    def readable(self):
        # As long as we did not sent anything, the channel has to be left open.
        if (not self.writable()
            # Once we sent something, we should periodically check if the reply
            # timed out.
            and self.timeout < (time.time() - self.time_sent)):
            self.close()
            return False
        # If the channel should not be closed, we do not want to read something
        # until we did not sent anything.
        return not self.writable()

    def handle_read(self):
        read_time = time.time()
        packet, addr = self.recvfrom(1024)
        header = packet[20:28]
        type, code, checksum, p_id, sequence = struct.unpack("bbHHh", header)
        if p_id == self.packet_id:
            # This comparison is necessary because winsocks do not only get
            # the replies for their own sent packets.
            self.time_received = read_time
            self.close()

    def get_result(self):
        """Return the ping delay if possible, otherwise None."""
        if self.time_received > 0:
            return self.time_received - self.time_sent

    def get_host(self):
        """Return the host where to the request has or should been sent."""
        return self.host

    def do_not_handle_errors(self):
        # Just a dummy handler to stop traceback printing, if desired.
        pass

    def create_socket(self, family, type, proto):
        # Overwritten, because the original does not support the "proto" arg.
        sock = socket.socket(family, type, proto)
        sock.setblocking(0)
        self.set_socket(sock)
        # Part of the original but is not used. (at least at python 2.7)
        # Copied for possible compatiblity reasons.
        self.family_and_type = family, type

    # If the following methods would not be there, we would see some very
    # "useful" warnings from asyncore, maybe. But we do not want to, or do we?
    def handle_connect(self):
        pass

    def handle_accept(self):
        pass

    def handle_close(self):
        self.close()

class SubnetMonitor:

    def __init__(self):
        print("Subnet Monitor Started")     

    def checksum(self,source_string):
        # I'm not too confident that this is right but testing seems to
        # suggest that it gives the same answers as in_cksum in ping.c.
        sum = 0
        count_to = (len(source_string) / 2) * 2
        count = 0
        while count < count_to:
            this_val = ord(source_string[count + 1])*256+ord(source_string[count])
            sum = sum + this_val
            sum = sum & 0xffffffff # Necessary?
            count = count + 2
        if count_to < len(source_string):
            sum = sum + ord(source_string[len(source_string) - 1])
            sum = sum & 0xffffffff # Necessary?
        sum = (sum >> 16) + (sum & 0xffff)
        sum = sum + (sum >> 16)
        answer = ~sum
        answer = answer & 0xffff
        # Swap bytes. Bugger me if I know why.
        answer = answer >> 8 | (answer << 8 & 0xff00)
        return answer

    def create_packet(self,id):
        """Create a new echo request packet based on the given "id"."""
        # Header is type (8), code (8), checksum (16), id (16), sequence (16)
        header = struct.pack('bbHHh', ICMP_ECHO_REQUEST, 0, 0, id, 1)
        data = 192 * 'Q'
        # Calculate the checksum on the data and the dummy header.
        my_checksum = self.checksum(header + data)
        # Now that we have the right checksum, we put that in. It's just easier
        # to make up a new header than to stuff it into the dummy.
        header = struct.pack('bbHHh', ICMP_ECHO_REQUEST, 0,
                             socket.htons(my_checksum), id, 1)
        return header + data

    def do_one(self,dest_addr, timeout=1):
        """
        Sends one ping to the given "dest_addr" which can be an ip or hostname.
        "timeout" can be any integer or float except negatives and zero.
        Returns either the delay (in seconds) or None on timeout and an invalid
        address, respectively.
        """
        try:
            my_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, ICMP_CODE)
        except socket.error as e:
            if e.errno in ERROR_DESCR:
                # Operation not permitted
                raise socket.error(''.join((e.args[1], ERROR_DESCR[e.errno])))
            raise # raise the original error
        try:
            host = socket.gethostbyname(dest_addr)
        except socket.gaierror:
            return
        # Maximum for an unsigned short int c object counts to 65535 so
        # we have to sure that our packet id is not greater than that.
        packet_id = int((id(timeout) * random.random()) % 65535)
        packet = self.create_packet(packet_id)
        while packet:
            # The icmp protocol does not use a port, but the function
            # below expects it, so we just give it a dummy port.
            sent = my_socket.sendto(packet, (dest_addr, 1))
            packet = packet[sent:]
        delay = self.receive_ping(my_socket, packet_id, time.time(), timeout)
        my_socket.close()
        return delay

    def receive_ping(self,my_socket, packet_id, time_sent, timeout):
        # Receive the ping from the socket.
        time_left = timeout
        while True:
            started_select = time.time()
            ready = select.select([my_socket], [], [], time_left)
            how_long_in_select = time.time() - started_select
            if ready[0] == []: # Timeout
                return
            time_received = time.time()
            rec_packet, addr = my_socket.recvfrom(1024)
            icmp_header = rec_packet[20:28]
            type, code, checksum, p_id, sequence = struct.unpack(
                'bbHHh', icmp_header)
            if p_id == packet_id:
                return time_received - time_sent
            time_left -= time_received - time_sent
            if time_left <= 0:
                return

    def verbose_ping(self,dest_addr, timeout=2, count=4):
        """
        Sends one ping to the given "dest_addr" which can be an ip or hostname.
        "timeout" can be any integer or float except negatives and zero.
        "count" specifies how many pings will be sent.
        Displays the result on the screen.

        """
        for i in range(count):
            print('ping {}...'.format(dest_addr))
            delay = self.do_one(dest_addr, timeout)
            if delay == None:
                print('failed. (Timeout within {} seconds.)'.format(timeout))
            else:
                delay = round(delay * 1000.0, 4)
                print('get ping in {} milliseconds.'.format(delay))
        print('')

    def multi_ping_query(self,hosts, timeout=1, step=512, ignore_errors=False):
        """
        Sends multiple icmp echo requests at once.
        "hosts" is a list of ips or hostnames which should be pinged.
        "timeout" must be given and a integer or float greater than zero.
        "step" is the amount of sockets which should be watched at once.
        See the docstring of "PingQuery" for the meaning of "ignore_erros".
        """
        results, host_list, id = {}, [], 0
        for host in hosts:
            try:
                host_list.append(socket.gethostbyname(host))
            except socket.gaierror:
                results[host] = None
        while host_list:
            sock_list = []
            for ip in host_list[:step]: # select supports only a max of 512
                id += 1
                sock_list.append(PingQuery(ip, id, timeout, ignore_errors,self))
                host_list.remove(ip)
            # Remember to use a timeout here. The risk to get an infinite loop
            # is high, because noone can guarantee that each host will reply!
            asyncore.loop(timeout)
            for sock in sock_list:
                results[sock.get_host()] = sock.get_result()
        return results      

if __name__ == '__main__':
     server_class = BaseHTTPServer.HTTPServer
     httpd = server_class((HOST_NAME, PORT_NUMBER), MyHandler)
     print time.asctime(), "Server Starts - %s:%s" % (HOST_NAME, PORT_NUMBER)
     try:
         httpd.serve_forever()
     except KeyboardInterrupt:
         pass
     httpd.server_close()
     print time.asctime(), "Server Stops - %s:%s" % (HOST_NAME, PORT_NUMBER) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-03T03:05:25.483

**使用命令行arp -a**并使用 numpy 解析的 mac 解决方案。也可以使用此方法找到 Mac 地址。

```
import os
import numpy as np

# Perform LAN scan
os.system('arp -a > scan.tmp')
scan = np.loadtxt('scan.tmp', dtype='str', delimiter='nodelimiter')

# Discard empty nodes
empty_nodes = np.where(np.char.find(scan, 'incomplete') > 0)[0]
scan = np.delete(scan, empty_nodes)

# Parse IP address (solution for parsing mac address commented out)
for i, node in enumerate(scan):
    left, right = np.char.find(node,'(') + 1, np.char.find(node,')')
    # left, right = np.char.find(node,'at') + 3, np.char.find(node,'on') - 1
    scan[i] = node[left:right]

print(scan) 
```

# xcode - 从 plist 检索数据时从 nsarray 中删除不需要的括号

> ID：15464390
> 
> 赞同：0
> 
> 时间：2013-03-17T18:17:50.563
> 
> 标签：xcode, cocos2d-iphone, plist

我正在通过从 plist 中检索所有值来动态开发 Cocos2d 游戏。例如，我正在从此链接中给出的 plist 中检索一个值：

![在此处输入图像描述](../Images/fd95cc8505cb5b53b399a69322834dea.png)

那就是我想从 plist 中获取动画 CCRotateTo 的类型及其值。我在哪里做了，但价值来自一些像这样的附加括号：

![在此处输入图像描述](../Images/d8cf48e73b83ae7ecda0eceb088c95fc.png)

我在名为 seqarray 的数组中添加了所有动画，例如 CCRotateTo 、 CCScale 。由于在数组的每个索引值中添加了不需要的括号，因此在 CCSequence 中添加这些 seqarray 值时给我带来了巨大的问题。它在 GDB 中显示一些错误，如下所示：

![在此处输入图像描述](../Images/6b8f8cc411e5c32d459286eb0d259427.png)

任何人请帮我解决这个问题

编辑

//代码中给定的ActionValues有动画在plist中的路径如“Scene01.Child.animations”。在关键路径中，我将发送 ActionValues 内的路径，例如“Animate1.parameters”

```
[seqarray addobject: [self DictValue1:@"Scene01.Mario.animations" Keypath:@"Animate1.parameters"]]; 
```

我将把场景路径和动画路径传递给下面的方法

```
+(id)DictValue1 :(id)actionvalues Keypath:(NSString *)Key1
{
NSArray * multiarrays1 = [actionvalues valueForKeyPath:Key1];
for(id actions in multiarrays1)   
{    
if([[actions valueForKey:@"type"] isEqualToString:@"CCRotateTo"])
{
[sequenceArray addObject:[self RotateTo:actions]];
}
}
return sequenceArray
}

+(CCRotateTo *)RotateTo:(id)Fadevalues
{
if([Fadevalues isKindOfClass:[NSDictionary class]])
{
    CCLOG(@"Fadevalues %@",Fadevalues);//All values with duration angle and type
    CCLOG(@"Fadevalues %@",[Fadevalues valueForKey:@"parameters"]);// Duration value
    NSArray * sss = [Fadevalues valueForKey:@"parameters"];
    CCRotateTo * Rotate = [CCRotateTo  actionWithDuration:[[Fadevalues valueForKey:@"duration"] intValue] angle:[[sss objectAtIndex:0]intValue]];
    return FadeOut;
}
return nil; 
```

}

这就是我将值添加到数组的方式。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:22:01.443

括号不是你的问题。

让我们从后面开始： NSMutableArray 告诉您它收到了一条`duration`没有对应选择器的消息。这看起来像一个逻辑错误，您可能想将消息发送到存储在数组中的对象，而不是数组本身。

您看到的括号，例如：

```
<CCRotateTo = … | Tag = 1> 
```

它们来自记录对象。例如，如果您这样做：

```
NSLog(@"%@", rotateAction); 
```

它将运行对象的`description`方法。这通常以上述语法中的字符串形式返回对象、对象的类名、指针以及括在尖括号中的附加数据。

# objective-c - 使用负边界原点设置 NSView 的背景颜色

> ID：15464391
> 
> 赞同：0
> 
> 时间：2013-03-17T18:18:02.163
> 
> 标签：objective-c, cocoa, nsview, drawrect

我目前正在尝试为具有负边界原点的 NSView 设置背景颜色/图案。问题是，它只为视图的部分着色（x>0 && y>0 的部分）。

我明白，我必须在 -(void)drawRect: 函数中绘制背景。如何为整个视图着色，而不仅仅是坐标为正的那些部分？

![NSView](../Images/52479db3fd77a007cfb28a626f74721d.png) 原点：-65、-65 尺寸：130、130

我想给整个背景上色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:49:56.253

尝试使用`NSBezierPath`对象来设置视图的背景颜色：

```
NSColor *color; //your background colour
CustomView *view; //this is your view, you should init it with the his own class
[color set];
[NSBezierPath fillRect:[view bounds]]; //sets the given Rect with the set colour 
```

此代码应使用给定颜色为所有背景着色。`[path fillRect:[self bounds]]`请注意，如果代码在视图类的实现中，则应将最后一行替换为。

# linear-programming - 如何在 GLPK 中为我的变量编写 if 条件？

> ID：15464392
> 
> 赞同：6
> 
> 时间：2013-03-17T18:18:31.063
> 
> 标签：linear-programming, glpk, mathprog

这是我的全部问题：

![在此处输入图像描述](../Images/3f0f37dff515741c6c1fb9514c1654ea.png)

信息：

*最大限度。总投资：125美元

*支付是购买单位的总和 x 支付/单位

*每次投资成本：购买成本 + 成本/单位 x 单位数量（如果您购买至少一个单位）

*成本为每次投资成本的总和

约束：

*您不能同时投资 2 和 5。

*仅当您至少投资 2 和 3 之一时，您才可以投资 1。

*您必须至少投资 3,4,5 中的两个。

*您的投资不得超过最大单位数。

问题：最大化利润：回报 - 成本

```
 xi: # of units i ∈ {1,2,3,4,5}
 yi=1 if xi>0 else yi=0
 cost = sum{i in I} buyInCost_i * yi + cost-unit_i*xi
 pay-off = sum{i in I} (pay-off/unit)_i*xi
 profit = pay-off - cost

 Maximize profit

 Subject to

 y2+y5 <= 1
 y1<= y2+y3
 y3+y4+y5 >= 2
 x1<=5, x2<=4, x3<=5, x4<=7, x5<=3
 cost<=125 
```

这是我的问题：

例如我有这个二进制变量 y

```
 yi=1 if xi>0 else yi=0  and i ∈ {1,2,3,4,5} 
```

我将 i 声明为数据集

```
 set I;

 data;

 set I := 1 2 3 4 5; 
```

我不知道如何将 if else 条件添加到 glpk 中的 y 变量。你能帮帮我吗？

我的建模：

```
 set I;

 /*if x[i]>0 y[i]=1 else y[i]=0 ?????*/
 var y{i in I}, binary;

 param a{i in I};
 /* buy-in cost of investment i */

 param b{i in I};
 /* cost per unit of investment i */

 param c{i in I};
 /* pay-off per unit of investment i */

 param d{i in I};
 /* max number of units of investment i */

 var x{i in I} >=0;
 /* Number of units that is bought of investment i */

 var po := sum{i in I} c[i]*x[i];

 var cost := sum{i in I} a[i]*y[i] + b[i]*x[i];

 maximize profit: po-cost;

 s.t. c1: y[2]+y[5]<=1;
 s.t. c2: y[1]<y[2]+y[3];
 s.t. c3: y[3]+y[4]+y[5]>=2;
 s.t. c4: x[1]<=5 
     x[2]<=4
     x[3]<=5
     x[4]<=7
     x[5]<=3;

 s.t. c5: cost <=125;
 s.t. c6{i in I}: M * y[i] > x[i];   // if condition of y[i] 

 set I := 1 2 3 4 5;
 param a :=
1 25
2 35
3 28
4 20
5 40;

 param b :=
1 5
2 7
3 6
4 4
5 8;

 param c :=
1 15
2 25
3 17
4 13
5 18;

 param d :=
1 5
2 4
3 5
4 7
5 3;

 param M := 10000; 
```

我收到此语法错误：

```
 problem.mod:21: syntax error in variable statement 
      Context: ...I } ; param d { i in I } ; var x { i in I } >= 0 ; var po :=
      MathProg model processing error 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T12:43:16.493

您不能直接这样做（无法`if`在 LP 中“直接”编写约束）。

但是，有一些解决方法。例如，您可以编写：

```
M * yi > xi 
```

其中`M`是一个大常数（大于 的任何值`xi`）。

这边走：

*   如果`xi > 0`，则约束等价于`yi > 0`，即`yi == 1`因为`yi`是二元的（如果`M`足够大）。
*   如果`xi == 0`，则始终验证约束，并且`yi`将等于，`0`因为您的目标随着目标的增加`yi`而最小化。

在这两种情况下，约束都等同于`if`测试。

# php - CakePHP 表单选择值作为 table.id，选择选项文本作为 table.textfield

> ID：15464393
> 
> 赞同：3
> 
> 时间：2013-03-17T18:18:37.987
> 
> 标签：php, cakephp, select

我是蛋糕的新手。我已经设置了一些东西，相关的是“用户”和“配置文件”表、控制器、模型和视图。在我`profiles/add`看来，我正在尝试输出一个`select`输入，其值为 the `user.id`，选项文本为`user.username`. 最终，该值`user.id`将保存在`profile.user_id`.

我已经阅读了很多文档，并成功设置了`select`从表中输出选项`user`，但它`user.id`同时使用值和选项文本。

控制器：

```
 $this->set('users', $this->Profile->User->find('list')); 
```

看法：

```
 echo $this->Form->input('user_id'); 
```

似乎这种事情是例行公事，所以如果我完全忽略了它，请随时通过文档链接来回答。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T22:36:35.290

> 成功设置选择以输出用户表中的选项，但它使用 user.id 作为值和选项文本。

`find('list')`默认情况下使用主键作为键，模型`displayField`作为值。

如果模型没有显式`displayField`但有一个名为`title`or的字段`name`，Cake 将自动选择该字段，否则它不会猜测并简单地使用主键字段 - 这就是问题中发生的事情。

`find('list')`但是，您可以简单地在调用结果中指定您想要的字段。因此，要么：

## 设置模型显示字段

```
class User extends AppModel {

    public $displayField = 'username';

} 
```

然后使用：

```
$users = $this->User->find('list'); 
```

## 明确选择字段

```
$users = $this->User->find('list', array(
    'fields' => array('id', 'username')
)); 
```

在这两种情况下 - 结果将是例如：

```
array(
    1 => 'firstuser',
    ...
    76 => 'AD7six'
) 
```

# iphone - 从 NSArray 获取相同生日的名字

> ID：15464396
> 
> 赞同：0
> 
> 时间：2013-03-17T18:18:41.293
> 
> 标签：iphone, ios, nsstring, nsdate

我有一个字典数组，其中包含生日和姓名作为键。我想检索具有相同生日的名称的值。

```
 for (NSDictionary *contactDict in contactList) {
            NSString *birthdayStr = [contactDict objectForKey:BIRTHDAY_KEY];
} 
```

我应该怎么做才能获得相同生日的名称数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:47:41.913

这是你想要的？

```
for (NSDictionary *contactDict in contactList) {
    NSString *birthdayStr = [contactDict objectForKey:BIRTHDAY_KEY];

    // indexes of all array objects with same birthday:
    NSIndexSet *matching = [contactList indexesOfObjectsPassingTest:^BOOL(NSDictionary *contactDict, NSUInteger idx, BOOL *stop) {
        return [[contactDict objectForKey:BIRTHDAY_KEY] isEqualToString:birthdayStr];
    }];

    NSArray *matchingNames = [[contactList objectsAtIndexes:matching] valueForKey:NAME_KEY];
    NSLog(@"%@", matchingNames);
} 
```

或者，如果您只想为每个不同的生日使用一个名称数组：

```
// Set of all distinct birthdays:
NSSet *allBirthdays = [NSSet setWithArray:[contactList valueForKey:BIRTHDAY_KEY]];

for (NSString *birthdayStr in allBirthdays) {
    NSLog(@"birthday: %@", birthdayStr);

    NSIndexSet *matching = [contactList indexesOfObjectsPassingTest:^BOOL(NSDictionary *contactDict, NSUInteger idx, BOOL *stop) {
        return [[contactDict objectForKey:BIRTHDAY_KEY] isEqualToString:birthdayStr];
    }];

    NSArray *matchingNames = [[contactList objectsAtIndexes:matching] valueForKey:NAME_KEY];
    NSLog(@"names: %@", matchingNames);
} 
```

*样本数据的输出：*

```
birthday: 1/12/13
names: (
    A,
    B
)
birthday: 2/12/13
names: (
    C
) 
```

# ios - OpenGL 错误 0x0500 在 -[CCTextureAtlas drawNumberOfQuads:fromIndex:] 556

> ID：15464399
> 
> 赞同：3
> 
> 时间：2013-03-17T18:18:47.380
> 
> 标签：ios, opengl-es, cocos2d-iphone

我正在关注 Learn COCOS2D 书中的 BOX2D 教程，我开始在控制台上看到这个错误，比如每秒 10 次。我用谷歌搜索了这个错误，但找不到任何相关信息。有些人在谈论着色器文件，但我不知道那些是什么。有些人说不要使用多个 GLVIEW，但我不认为我正在这样做。下面是实现文件的完整代码。

**错误消息：OpenGL 错误 0x0500 在 -[CCTextureAtlas drawNumberOfQuads:fromIndex:] 556**

```
- (void)dealloc
{
    if(world){
        delete world;
        world = NULL;
    }
    if(debugDraw){
        delete debugDraw;
        debugDraw = nil;
    }
    [super dealloc];
}

+(id)scene{
    CCScene *scene = [CCScene node];
    PuzzleLayer *layer = [self node];
    [scene addChild:layer];
    return scene;
}

-(void)setupWorld{
    b2Vec2 gravity = b2Vec2(0.0f, -10.0f);
    //bool doSleep = true;
    world = new b2World(gravity);
}

-(void)createBoxAtLocation: (CGPoint)location withSize:(CGSize)size{
    CCLOG(@"Box location: %.0f, %.0f", location.x, location.y);
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);
    b2Body *body = world->CreateBody(&bodyDef);

    b2PolygonShape shape;
    shape.SetAsBox(size.width/2/PTM_RATIO, size.height/2/PTM_RATIO);
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &shape;
    fixtureDef.density = 1.0;
    body->CreateFixture(&fixtureDef);
}

-(void)setupDebugDraw{
    debugDraw = new GLESDebugDraw(PTM_RATIO * [[CCDirector sharedDirector] contentScaleFactor]);
    world->SetDebugDraw(debugDraw);
}

-(void)draw{
    glDisable(GL_TEXTURE_2D);
    world->DrawDebugData();
    glEnable(GL_TEXTURE_2D);
}

-(id)init{
    if(self = [super init]){
        [self setupWorld];
        [self setupDebugDraw];
        [self scheduleUpdate];
        self.isTouchEnabled = YES;
    }
    return self;
}

-(void)registerWithTouchDispatcher{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
}

-(void)update:(ccTime)dt{
    int32 velocityIterations = 3;
    int32 positionIterations = 2;
    world->Step(dt, velocityIterations, positionIterations);
}
-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{
    CGPoint touchLocation = [touch locationInView:[touch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];
    b2Vec2 locationWorld = b2Vec2(touchLocation.x/PTM_RATIO, touchLocation.y/PTM_RATIO);
    [self createBoxAtLocation:touchLocation withSize:CGSizeMake(50, 50)];
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T18:54:14.917

OpenGL 错误 0x0500 = GL_INVALID_ENUM，有关 openGL 错误的更多详细信息：[请查看此处](http://www.opengl.org/wiki/OpenGL_Error_Codes)

我猜你的 cocos2d 版本是 2.0 或更高。Cocos2d 2.0 使用 openGLES2.0，因为 opengl 立即模式调用是不允许的......看你的代码 glEnable 被使用。

将您的绘图功能替换为

```
-(void) draw
{
    [super draw];
    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );
    kmGLPushMatrix();
    self.world->DrawDebugData();    
    kmGLPopMatrix();
} 
```

这是[另一个线程，请参阅我的答案以获取更多详细信息](https://stackoverflow.com/questions/11662770/cocos2d-2-0-zillions-of-opengl-errors/11663486#11663486)：

# haskell - 在 Haskell 中合并 PDF 文件

> ID：15464409
> 
> 赞同：4
> 
> 时间：2013-03-17T18:19:17.333
> 
> 标签：haskell, pdf-generation

Mac 上的 Preview 应用程序允许合并多个 PDF 文件，尽管功能相当模糊。我正在用 Haskell 编写一个实用程序，它需要执行类似的任务，即将任意数量的 PDF 文件合并到一个新文件中。

有没有人建议从哪里开始？显然，如果有一个关于 Hackage 的库可以完成大部分开箱即用的工作，那将是理想的，但如果没有，那么一些关于从哪里开始的指针将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:42:51.057

我正在研究支持解析和生成的[pdf 库。](https://github.com/Yuras/pdf-toolbox)它是低级的，高级工具还在待办事项列表中（因为很难设计好的高级 API）。

[这](https://github.com/Yuras/pdf-toolbox/blob/master/examples/unpack-and-decrypt-pdf-file.hs)是一个对PDF文件进行解包和解密的例子。实现 PDF 合并很容易，但您需要熟悉 PDF 内部结构。

添加：我创建了一个在 Haskell 中合并 PDF 文件的[基本示例](https://github.com/Yuras/pdf-toolbox/blob/master/examples/merge-pdf-files.hs)。总共 150 行代码，但它缺少一些功能（请参阅文件顶部的注释）。它们很容易添加，所以如果您有兴趣，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:12:40.460

PDF 文件格式并不复杂。Adobe 在某处有一个官方规范文档。本质上，PDF 文件包含一组编号的“对象”。您必须从每个 PDF 文件中获取所有对象，重新编号以使它们唯一，然后您需要调整页面索引，以便实际显示所有页面。

Hackage 上似乎有几个用于*编写*PDF 文件的包，但我看不到太多可以*阅读*它们的包。您可能想查看源代码以`pdfsplit`获取想法。也`HPDF`。

# performance - 算法复杂性分析：实际使用 Knuth 的普通操作 (oops) 和内存操作 (mems) 方法

> ID：15464410
> 
> 赞同：4
> 
> 时间：2013-03-17T18:19:17.503
> 
> 标签：performance, algorithm, theory, computation-theory, forth

在实现大多数算法（排序、搜索、图遍历等）时，通常可以在减少内存访问方面做出权衡，但代价是额外的普通操作。

Knuth 有一个有用的方法来比较各种算法实现的复杂性，方法是将其从特定处理器中抽象出来，并且只区分普通操作 (oops) 和内存操作 (mems)。

在已编译的程序中，通常让编译器组织低级操作，并希望操作系统能够处理数据是保存在高速缓存中（更快）还是虚拟内存中（更慢）的问题。此外，编译器封装了指令的确切数量/成本。

使用 Forth，不再有这样的封装，而且更接近机器，尽管可能更接近在寄存器处理器之上运行的堆栈机器。

忽略操作系统的影响（因此没有内存停顿等），并假设目前是一个简单的处理器，

**(1) 谁能建议 Forth 中的普通*堆栈*操作（例如 dup、rot、over、swap 等）与 Forth 的内存访问 fetch (@) 或 store (!) 的成本相比如何？**

**(2) 是否有一个经验法则可以用来决定有多少普通操作来权衡保存内存访问？**

*我正在寻找的是“内存访问成本高达 50 个普通操作，或 500 个普通操作，或 5 个普通操作”之类的东西，Ballpark 绝对没问题。*

*我试图了解 fetch 和 store 与 rot、swap、dup、drop、over、正确到一个数量级的相对成本。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T01:50:51.370

本文[从记忆中提取一个单词需要多少时间？](https://stackoverflow.com/questions/3142779/how-much-time-does-it-take-to-fetch-one-word-from-memory)谈论主内存停顿时间，使用一些经验法则类型的数字，但基本上你可以在停顿主内存时执行大量指令。正如其他人所说，系统之间的数字差异很大。

主内存停顿是一个很大的关注领域，尤其是当 CPU 具有更多内核，但通常不会更快的内存带宽。围绕压缩主存储器中的数据也进行了一些研究，以便 CPU 可以利用“空闲”周期和紧凑的缓存线[http://oai.cwi.nl/oai/asset/15564/15564B.pdf](http://oai.cwi.nl/oai/asset/15564/15564B.pdf)

对于那些真正对细节感兴趣的人，大多数 CPU 制造商都会发布关于内存优化等的深度指南，主要针对高端和编译器编写者，但所有 2gl 和 3gl 程序员都可以阅读。

附言。前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-18T16:29:28.573

对于汇编程序来说，内存获取和寄存器操作之间的比较是可以的，因为它对于 c 编译器的输出也是如此，它实际上是一个汇编程序。在 Forth 中，这个问题几乎没有意义。首先，Forth 是一个解释器，在使用 Forth 时，人们放弃了最终的速度。当然，可以在 Forth 之上添加一个优化器，但这样问题就更没有意义了，因为 c-optimiser 和 Forth 优化器的输出会收敛到 - 你猜对了 - 一个最佳解决方案。

让我们看一下 Forth 中的一个基本运算，例如 AND。这被实现为

```
> CODE AND
>     POP AX
>     POP BX
>     AND AX, BX
>     PUSH AX
>     NEXT 
```

所以我们已经看到了三个内存操作，看起来像是一个基本的计算操作。Knuth 指标似乎不适用。此外，Forth 似乎正在失去大量时间。但事实并非如此。这些内存操作都在典型处理器的 L1 高速缓存上。这与小型 c 函数中的局部变量一样有效，我们可以使用 VARIABLE 和堆栈将堆栈操作与内存操作进行比较。答案很简单。VARIABLE 存在内存停滞的风险。堆栈操作几乎肯定会命中 L1 缓存。这是一个最重要的考虑点。但是问题明确要求不要考虑它！所以在那里。

# java - 将方法作为值放入映射中

> ID：15464411
> 
> 赞同：-4
> 
> 时间：2013-03-17T18:19:29.707
> 
> 标签：java

我想在控制台菜单中使用 map 并将返回的方法`void`作为一个值，并且我的方法会多次打印到控制台。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:23:51.597

将每个方法封装在一个对象中（例如 Runnable）：

```
Map<String, Runnable> commands = new HashMap<String, Runnable>();
commands.put("foo", new Runnable() {
    @Override
    public void run() {
        System.out.println("Hello foo");
    }
});
commands.put("bar", new Runnable() {
    @Override
    public void run() {
        System.out.println("Hello bar");
    }
}); 
```

# django - Django、boto、S3 和 easy_thumbnails 在生产环境中不起作用

> ID：15464413
> 
> 赞同：1
> 
> 时间：2013-03-17T18:19:43.390
> 
> 标签：django, amazon-s3, boto

我正在使用 Django、django-storages 和 S3 (boto) 以及简单的缩略图。在我的本地机器上，一切都按预期工作：如果缩略图不存在，它会被创建并上传到 S3 并保存在 easy-thumbnails 数据库表中。但问题是，当我将代码推送到生产服务器时，它不起作用，easy-thumbnails 输出一个空图像 SRC。

我已经注意到的是，当我在本地计算机上创建缩略图时，简单缩略图路径使用反斜杠，而我的 Linux 服务器需要正斜杠。如果我更改数据库中的斜线，缩略图会显示在我的 Linux 机器上，但它仍然无法在 Linux（生产）机器上生成缩略图。

简单的 django-storages 测试失败：

```
>>> import django
>>> from django.core.files.storage import default_storage
>>> file = default_storage.open('storage_test', 'w') 
```

输出：django.core.exceptions.ImproperlyConfigured：请求设置 DEFAULT_FILE_STORAGE，但未配置设置。您必须在访问设置之前定义环境变量 DJANGO_SETTINGS_MODULE 或调用 settings.configure()。

如果我做：

```
>>> from base.settings import staging
>>> from django.conf import settings
>>> settings.configure(staging) 
```

这有效（我有一个`settings`包含 4 个设置文件的目录：base.py、staging.py、development.py 和 production.py）

似乎在我的生产服务器上，配置文件没有正确加载（但是网站的其余部分工作正常）。如果我添加`THUMBNAIL_DEBUG = True`到我的设置文件中，但 easy-thumbnails 的调试仍然不起作用（它在我的本地机器上工作）。

有什么问题？我已经调试了 10 多个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:47:49.163

尝试重构您的设置以使用更面向对象的结构。[来自 Disqus 的 David Cramer 概述了一个很好的例子：

[http://justcramer.com/2011/01/13/settings-in-django/](http://justcramer.com/2011/01/13/settings-in-django/)

您将把任何特定于服务器的设置放在一个`local_settings.py`文件中，并且您可以将一个精简的版本`example_local_settings.py`存储在您的存储库中。

如果您有很多特定于暂存或审查服务器的设置，您仍然可以使用单独的设置文件，但您不希望将完整的数据库凭据存储在代码仓库中，因此您必须自定义这些文件`local_settings.py`。您可以通过在顶部添加导入来定义要包含的设置`local_settings.py`：

```
from project.conf.settings.dev import * 
```

然后，您可以将您的设置`DJANGO_SETTINGS_MODULE`为始终指向同一个地方。这将*代替*`settings.configure()`Django 文档中概述的调用：

[https://docs.djangoproject.com/en/dev/topics/settings/#either-configure-or-django-settings-module-is-required](https://docs.djangoproject.com/en/dev/topics/settings/#either-configure-or-django-settings-module-is-required)

这样，您就知道您在生产服务器上的设置肯定会被导入，因为`local_settings.py`总是被导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T20:10:28.910

出于某种原因，模板语言中的 S3 和简单缩略图似乎无法相互配合……一些路径问题可能在某个时候可以解决。

我的解决方案（阅读：解决方法）是将缩略图生成移动到图像字段本身的模型中，例如：

```
avatar = ThumbnailerImageField(upload_to = avatar_file_name, resize_source=dict(size=(125, 125), crop="smart"), blank = True) 
```

为了完整起见：

```
def avatar_file_name(instance, filename):
    path = "%s/avatar.%s" % (str(instance.user.username), filename.split('.')[1])
    if os.path.exists(settings.MEDIA_ROOT + path):
        os.remove(settings.MEDIA_ROOT + path)   
    return path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:06:18.743

首先尝试使用：

```
python manage.py shell --settings=settings/staging 
```

使用正确的设置文件加载 shell，然后尝试调试

# php - 实现 Mult 的更好方法。PHP 中 1 个帖子的类别？

> ID：15464418
> 
> 赞同：0
> 
> 时间：2013-03-17T18:20:20.123
> 
> 标签：php, mysql, sql, database-design

假设，我的数据库中有以下表格。

```
POSTS:
id, title, content

CATEGORIES:
id, name

RELATION:
post_id, cat_id 
```

在发布帖子时，我已经成功地将值插入到这些表中。

我还可以在我的主页上显示每个帖子下方的类别。但是，我担心我使用的方法非常耗费资源。

这是我在 MySQL/PHP 中所做的。

（您可以选择跳过代码，并阅读其描述以更好地理解）

```
//Get all the posts
$database = $connection->prepare("Select * FROM POSTS"); 
$database->execute(array()); 
$result = $database->fetchAll(PDO::FETCH_ASSOC);

foreach ($result as $r) {
        $articleid = $r['id'];

//Display Post title and other things here

//Get the Category Ids
$database = $connection->prepare("Select * FROM RELATION WHERE post_id = ".$article);   
$database->execute(array());
$ret_cat= $database->fetchAll(PDO::FETCH_ASSOC);

//Get names of category, and dislay them
    foreach($ret_cat as $rc)
                {
                    $catid = $rc['cat_id'];
                    $database = $connection->prepare("Select * FROM CATEGORIES WHERE cat_id= ".$catid); 
    $database->execute(array()); 
    $ret_cat_name= $database->fetch(PDO::FETCH_ASSOC);
                    echo "<a href='index.php?category=".$rc['cat_id']."'>".$ret_cat_name['name']."</a> ";
                }
    }//End First ForEach 
```

1.  `POSTS`从表中选择所有所需的帖子。
2.  使用 Foreach 循环显示每个帖子。
3.  在 foreach 循环中，我使用另一个 SELECT 语句`RELATION`通过匹配`POSTS.id`.
4.  然后，我使用另一个 foreach 循环来显示所有类别。

但是，由于表中只有类别 ID，因此`RELATION`我需要显示类别的名称。

1.  因此，我使用另一个 SELECT 语句从`CATEGORIES`表中获取类别的名称，方法是使用`RELATION.cat_id`.

代码运行良好，我得到了我想要的。但是，我觉得有很多 mysql 请求正在生成。因此，服务器上的负载会增加。

所以，我需要知道我在做什么是对还是错。或者，如果有更简单的方法来完成这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:43:39.610

为什么不使用 JOIN 来减少数据库往返次数？

例如，首先选择所需的帖子...

```
SELECT * FROM POSTS WHERE <some filter criteria for posts> 
```

...然后对于每个返回的行...

```
SELECT CATEGORIES.*
FROM RELATION JOIN CATEGORIES
    ON RELATION.cat_id = CATEGORIES.id
WHERE
    post_id = <value from the first query> 
```

* * *

或者甚至在一次往返中完成所有事情......

```
SELECT POSTS.*, cat_id, name
FROM POSTS
    JOIN RELATION
        ON POSTS.id = RELATION.post_id
    JOIN CATEGORIES
        ON RELATION.cat_id = CATEGORIES.id
WHERE
    <some filter criteria for posts> 
```

...在这种情况下，客户端代码需要“合并”具有相同`POSTS.id`.

* * *

顺便说一句，你几乎不应该做类似的事情......

```
Select * FROM POSTS 
```

...没有 WHERE 子句。这根本不会随着数据库的增长而扩展。

# mysql - 加入两张表出错了，我真的卡住了

> ID：15464423
> 
> 赞同：0
> 
> 时间：2013-03-17T18:20:52.013
> 
> 标签：mysql, join, prestashop

我有两个表（mysql），这些字段：

第一张表`ps_cart_product`：

*   `id_cart`,
*   `id_product`,
*   `quantity`（这是一个数字字段，包含订购的产品数量）
*   ...

第二张表`ps_product`：

*   `id_product`,
*   `reference`,
*   ...

我需要获取“数量”字段，该字段包含（给定第一个表中的某个 id_cart）为在第二个表值“票”中具有“参考”字段的每个产品订购的数量。然后我必须对返回行的字段值进行“求和”。

这是我拥有的 sql 代码：

```
SELECT DISTINCT cp.quantity
FROM ps_cart_product cp 
JOIN  ps_product p ON cp.id_cart = 84
AND p.reference = "ticket" 
```

结果是错误的......这个查询抛出所有字段（3行）具有值为'ticket'的字段，而不是只给出具有'AND'条件的2个字段，这是我想要的结果。有什么建议吗？无论如何，这是一个 Prestashop 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:38:28.700

您需要在末尾包含 where 子句以指定 ID。连接的目的是根据 where 子句中给定的值在相同记录上匹配表。

```
SELECT DISTINCT cp.quantity
FROM ps_cart_product cp 
INNER JOIN  ps_product p ON cp.id_cart = p.id_product
AND p.reference = "ticket"
Where cp.id_cart = 84 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:37:09.300

您当前的查询缺少`JOIN`两个表之间的条件。

```
select DISTINCT cp.quantity
from ps_cart_product cp
inner join ps_product  p
  on cp.id_product = p.id_product -- < this is missing
where p.reference = 'ticket'
  and cp.id_cart = 84 
```

然后如果你想要`sum()`数量，你可以使用：

```
select sum(cp.quantity) TotalQuantity
from ps_cart_product cp
inner join ps_product  p
  on cp.id_product = p.id_product
where p.reference = 'ticket'
  and cp.id_cart = 84 
```

# php - PHP - 搜索字符串然后删除直到该字符串的结尾

> ID：15464424
> 
> 赞同：0
> 
> 时间：2013-03-17T18:20:53.693
> 
> 标签：php, string

我有一个这样的字符串：

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. In et ipsum ac tellus hendrerit semper in sit amet nulla.'; 
```

如果找到 string `hendrerit semper`，则从该字符串中删除，直到该字符串的末尾。

结果应该是：

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. In et ipsum ac tellus'; 
```

各位大神能指导下怎么做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:23:25.843

`substring`获取子字符串并`strpos`找到位置

```
echo substr( $string, 0, strpos( $string, 'hendrerit semper' ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:25:59.293

使用[`substr`](http://www.php.net/manual/en/function.substr.php)和[`strpos`](http://php.net/manual/en/function.strpos.php)。请注意，`strpos`在进一步使用它之前，您应该始终检查返回值。

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. In et ipsum ac tellus hendrerit semper in sit amet nulla.';
$search = 'hendrerit semper';
if (strpos($string, $search) === false) {
    // $search not found in $string
    $result = false;
}
else {
    $result = substr($string, 0, strpos($string, $search));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:23:33.553

见[PHP：strstr](http://php.net/manual/en/function.strstr.php)

请注意，您有一个“针前”参数。

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. In et ipsum ac tellus hendrerit semper in sit amet nulla.';
echo strstr($string, 'hendrerit semper', true) . "\n";exit; 
```

会给你：“Lorem ipsum dolor sit amet, consectetur adipiscing elit. In et ipsum ac tellus”

# android - android蓝牙耳机getprofileproxy返回null

> ID：15464425
> 
> 赞同：2
> 
> 时间：2013-03-17T18:20:55.567
> 
> 标签：android, bluetooth, headset

我正在尝试使用 android 开发人员页面作为参考将蓝牙耳机连接到我的 android 设备。[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

我的问题是当我尝试调用 getProfileProxy(context, mProfileListener, BluetoothProfile.HEADSET) 方法时，我不确定要传递什么上下文？我从这里的问题中找到了这个错误： [无法连接到 android 中的蓝牙耳机](https://stackoverflow.com/questions/9532233/can-not-connect-to-bluetooth-headset-in-android)

我对此非常陌生，所以如果这是一个愚蠢的问题，我会提前道歉。我花了很多时间试图研究这个，但我发现的每个示例和文档都只传入了一个上下文变量，所以我不确定我哪里出错了。我的代码或多或少是 android 文档的副本：

// 建立与代理的连接。boolean mProfileProxy = mBluetoothAdapter.getProfileProxy（上下文，mProfileListener，BluetoothProfile.HEADSET）；Log.d(TAGP,"获取适配器成功："+mProfileProxy); Log.d(TAGP,"上下文："+上下文);

```
BluetoothProfile.ServiceListener mProfileListener = new BluetoothProfile.ServiceListener() {
    public void onServiceConnected(int profile, BluetoothProfile proxy) {
        if (profile == BluetoothProfile.HEADSET) {
            mBluetoothHeadset = (BluetoothHeadset) proxy;
            Log.d(TAGP,"BLuetooth Headset: "+mBluetoothHeadset);
            Log.d(TAGP,"Proxy: "+proxy);
        }
    }
    public void onServiceDisconnected(int profile) {
        if (profile == BluetoothProfile.HEADSET) {
            mBluetoothHeadset = null;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:30:42.793

**上下文**可以是活动**或**服务**上下文**。因此，如果上面的代码在扩展**Activity**或**Service**的类中，则可以传递**this**。[您可以在Using the Android RecognizerIntent with a bluetooth 耳机](https://stackoverflow.com/questions/14991158/using-the-android-recognizerintent-with-a-bluetooth-headset/14993590#14993590)
中使用我的答案

# c++ - 将 char* 转换为 double - as bytes

> ID：15464427
> 
> 赞同：3
> 
> 时间：2013-03-17T18:20:59.670
> 
> 标签：c++, casting, double, c-strings

我有一个代表双精度的字节数组：

```
char number[8]; 
```

我需要将其转换为实际的双精度（也有 8 个字节）。根据建议，我尝试了这个，但失败了：

```
std::cout<<(*((*double)number))<<" is my number.\n"; 
```

为什么它失败了，我该怎么办？当然，我可以使用一些`<<`魔法来提取数据，但我不想这样做——它会消耗内存并使代码过于健壮。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T18:24:15.593

> 为什么失败了？

你这里有一个错字。

```
std::cout<<(*((*double)number))<<" is my number.\n"; 
```

它应该是：

```
std::cout<<(*((double*)number))<<" is my number.\n"; 
```

> 我该怎么办？

您*可以*减少使用的括号数。

```
std::cout<< *(double*)number <<" is my number.\n"; 
```

您*应该*使用 C++ 强制转换而不是 C 强制转换，所以很清楚您在做什么。

```
std::cout<< *reinterpret_cast<double*>(number) <<" is my number.\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T18:22:15.113

如果您使用 c++，则使用**reinterpret_cast**。如您所见，C++ 的表现力要强得多。

```
// cool c++
double value = *reinterpret_cast<double*>(number);

// c style
double value = (*((double*)number)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:24:53.830

```
char number[8];
double d;
// number is assumed to be filled with a buffer representing a double.
memcpy(&d, &number, sizeof(double));
std::cout << d; 
```

不确定是否需要 sizeof。当假设双精度为 8 字节时，已经造成了损害。我不知道标准中关于双打的内容。

# mysql - 动态提取数据的mysql语法是什么

> ID：15464429
> 
> 赞同：2
> 
> 时间：2013-03-17T18:21:12.717
> 
> 标签：mysql, sql, join

我有一张包含一堆订单的表......其中一列是 order_status。该列中的数据范围从 1 到 5。每个数字都与一个名称相关，该名称存储在另一个表中，该表将该数字与相应的名称相关联。

```
SELECT order_id , order_status FROM tablename1 
```

以上将仅返回订单状态的数字 1、2、3、4、5。我如何在查询中即时查询以用它们各自的名称替换这些数字。

另外，用来描述这个的术语是什么。如果我知道合适的术语是什么，我会用谷歌搜索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:24:18.780

> 每个数字都与一个名称相关，该名称存储在另一个表中，该表将该数字与相应的名称相关联。

[**`JOIN`**](http://en.wikipedia.org/wiki/Join_%28SQL%29)它与另一张桌子：

```
SELECT 
  t.order_id, 
  s.StatusName
FROM tablename1 AS t
INNER JOIN the statusesTable AS s ON t.order_status = s.status_id; 
```

# android - 如何自定义 TimePicker？

> ID：15464431
> 
> 赞同：0
> 
> 时间：2013-03-17T18:21:28.890
> 
> 标签：android, time, customization

我正在创建一个具有倒数计时器的应用程序。我想通过 TimePicker 选择时间（单击按钮后）。我想只有几个选择。这是 15、30、45 分钟。

不幸的是 TimePicker 并不是我想要的。

是否有可能编辑 TimePicker，仅显示一组自定义值？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:37:44.057

您应该使用 a来代替`TimePicker`选择`15`或分钟`30``45``Spinner`

如果您不知道如何使用微调器，请在评论中告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:20:10.797

可以使用反射来做到这一点。我不确定这是否是正确的做法。

这是如何完成[的示例。](https://github.com/aragaer/jtt_android/blob/old_dirty/src/com/aragaer/jtt/JttPickerDialog.java)第 60 行用 3.0 之前的 android 中的 12 个日文符号替换了 24 小时微调器。第 74-76 行对 3.0+ 执行相同的操作。

使用微调器创建自己的对话框可能会更好，但对于我的代码，我想模仿本机 TimePicker。

# java - 尝试遵循基本的 How to connect Android with PHP, MySQL 教程：应用程序崩溃 - 无法导入 android.os.StrictMode

> ID：15464433
> 
> 赞同：1
> 
> 时间：2013-03-17T18:21:31.427
> 
> 标签：java, android, eclipse, multithreading, android-strictmode

好的 - 所以我正在使用以下教程：“如何将 Android 与 PHP、MySQL 连接起来”

然而，几乎所有尝试本教程的人（从评论来看）都遇到了强制关闭问题，因为该应用程序仅设计为在 API 级别 8 或更早版本上运行。

一些用户已经为此开发了一个修复程序，包括在 EditProductActivity.java 文件中添加以下代码行

// 这部分仅用于确定工作代码的放置位置

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.edit_product); 
```

// 注意 * 在 EditProductActivity.java 的导入部分插入下面的行 // import android.os.StrictMode;

// 现在代码可以避免 NetworkOnMainThreadException 错误

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
.permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

但是，我在 logcat 中收到消息，指出无法解析 StrictMode 并且无法将 StrictMode 解析为一种类型。我对此进行了一些研究，并且 StrictMode 包含在 API 级别 8 及更高级别中。考虑到这一点，我将 AndroidManifest.xml 中的 API 级别提高到：

```
 <uses-sdk android:minSdkVersion="9"
          android:targetSdkVersion="9"/> 
```

然后清理了我的项目 - 但是我仍然得到 StrictMode 无法解析为类型错误。

日志猫：

```
 03-17 14:06:57.924: D/AndroidRuntime(18472): Shutting down VM
    03-17 14:06:57.924: W/dalvikvm(18472): threadid=1: thread exiting with uncaught exception (group=0x41604930)
    03-17 14:06:57.924: E/AndroidRuntime(18472): FATAL EXCEPTION: main
    03-17 14:06:57.924: E/AndroidRuntime(18472): java.lang.Error: Unresolved compilation problems: 
    03-17 14:06:57.924: E/AndroidRuntime(18472):    The import android.os.StrictMode cannot be resolved
   03-17 14:06:57.924: E/AndroidRuntime(18472):     StrictMode cannot be resolved to a type
    03-17 14:06:57.924: E/AndroidRuntime(18472):    StrictMode cannot be resolved to a type
    03-17 14:06:57.924: E/AndroidRuntime(18472):    StrictMode cannot be resolved
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at com.example.androidhive.NewProductActivity.<init>(NewProductActivity.java:10)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at java.lang.Class.newInstanceImpl(Native Method)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at java.lang.Class.newInstance(Class.java:1319)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.os.Handler.dispatchMessage(Handler.java:99)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.os.Looper.loop(Looper.java:137)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at android.app.ActivityThread.main(ActivityThread.java:5039)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at java.lang.reflect.Method.invokeNative(Native Method)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at java.lang.reflect.Method.invoke(Method.java:511)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-17 14:06:57.924: E/AndroidRuntime(18472):    at dalvik.system.NativeStart.main(Native Method) 
```

爪哇：

```
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.os.StrictMode;

 public class EditProductActivity extends Activity {

EditText txtName;
EditText txtPrice;
EditText txtDesc;
EditText txtCreatedAt;
Button btnSave;
Button btnDelete;

String pid;

// Progress Dialog
private ProgressDialog pDialog;

// JSON parser class
JSONParser jsonParser = new JSONParser();

// single product url
private static final String url_product_detials =  "http://linkingmanager.zxq.net/get_product_details.php";

// url to update product
private static final String url_update_product = "http://linkingmanager.zxq.net/update_product.php";

// url to delete product
private static final String url_delete_product = "http://linkingmanager.zxq.net/delete_product.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCT = "product";
private static final String TAG_PID = "pid";
private static final String TAG_NAME = "name";
private static final String TAG_PRICE = "price";
private static final String TAG_DESCRIPTION = "description";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_product);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
    .permitAll().build();
    StrictMode.setThreadPolicy(policy);

    // save button
    btnSave = (Button) findViewById(R.id.btnSave);
    btnDelete = (Button) findViewById(R.id.btnDelete);

    // getting product details from intent
    Intent i = getIntent();

    // getting product id (pid) from intent
    pid = i.getStringExtra(TAG_PID);

    // Getting complete product details in background thread
    new GetProductDetails().execute();

    // save button click event
    btnSave.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // starting background task to update product
            new SaveProductDetails().execute();
        }
    });

    // Delete button click event
    btnDelete.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // deleting product in background thread
            new DeleteProduct().execute();
        }
    });

}

/**
 * Background Async Task to Get complete product details
 * */
class GetProductDetails extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(EditProductActivity.this);
        pDialog.setMessage("Loading product details. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Getting product details in background thread
     * */
    protected String doInBackground(String... params) {

        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new  ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("pid", pid));

                    // getting product details by making HTTP request
                    // Note that product details url will use GET request
                    JSONObject json = jsonParser.makeHttpRequest(
                            url_product_detials, "GET", params);

                    // check your log for json response
                    Log.d("Single Product Details", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {
                        // successfully received product details
                        JSONArray productObj = json
                                 .getJSONArray(TAG_PRODUCT); // JSON Array

                        // get first product object from   JSON Array
                        JSONObject product = productObj.getJSONObject(0);

                        // product with this pid found
                        // Edit Text
                        txtName = (EditText) findViewById(R.id.inputName);
                        txtPrice = (EditText) findViewById(R.id.inputPrice);
                        txtDesc = (EditText)  findViewById(R.id.inputDesc);

                        // display product data in EditText
                          txtName.setText(product.getString(TAG_NAME));
                        txtPrice.setText(product.getString(TAG_PRICE));
                        txtDesc.setText(product.getString(TAG_DESCRIPTION));

                    }else{
                        // product with pid not found
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        pDialog.dismiss();
    }
}

/**
 * Background Async Task to  Save product Details
 * */
class SaveProductDetails extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(EditProductActivity.this);
        pDialog.setMessage("Saving product ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Saving product
     * */
    protected String doInBackground(String... args) {

        // getting updated data from EditTexts
        String name = txtName.getText().toString();
        String price = txtPrice.getText().toString();
        String description = txtDesc.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair(TAG_PID, pid));
        params.add(new BasicNameValuePair(TAG_NAME, name));
        params.add(new BasicNameValuePair(TAG_PRICE, price));
        params.add(new BasicNameValuePair(TAG_DESCRIPTION, description));

        // sending modified data through http request
        // Notice that update product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_update_product,
                "POST", params);

        // check json success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully updated
                Intent i = getIntent();
                // send result code 100 to notify about product update
                setResult(100, i);
                finish();
            } else {
                // failed to update product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once product uupdated
        pDialog.dismiss();
    }
}

/*****************************************************************
 * Background Async Task to Delete Product
 * */
class DeleteProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(EditProductActivity.this);
        pDialog.setMessage("Deleting Product...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Deleting product
     * */
    protected String doInBackground(String... args) {

        // Check for success tag
        int success;
        try {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>    (); 
            params.add(new BasicNameValuePair("pid", pid));

            // getting product details by making HTTP request
            JSONObject json = jsonParser.makeHttpRequest(
                    url_delete_product, "POST", params);

            // check your log for json response
            Log.d("Delete Product", json.toString());

            // json success tag
            success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                // product successfully deleted
                // notify previous activity by sending code 100
                Intent i = getIntent();
                // send result code 100 to notify about product deletion
                setResult(100, i);
                finish();
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once product deleted
        pDialog.dismiss();

    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:31:18.860

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
.permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

由于您正在使用`AsyncTask`，因此无需设置`ThreadPolicy`。并且不要忘记 StrictMode 从 2.3 版本开始可用。

## 更新：

您的应用程序没有很好地指定。看这个

```
protected String doInBackground(String... params) {

        runOnUiThread(new Runnable() { 
           ...
           txtName = (EditText) findViewById(R.id.inputName);
           txtPrice = (EditText) findViewById(R.id.inputPrice);
           txtDesc = (EditText)  findViewById(R.id.inputDesc);

           // display product data in EditText
           txtName.setText(product.getString(TAG_NAME));
           txtPrice.setText(product.getString(TAG_PRICE));
           txtDesc.setText(product.getString(TAG_DESCRIPTION));
           ...
        }
} 
```

你为什么这样做？`doInBackground()`直接设计用于执行后台操作也已经在后台线程上运行，您不应该从中执行 UI 更新。你不应该混合它。

如果您想更新 UI，请`AsyncTask`提供适当的方法来实现它：

*   onPreExecute()
*   onProgressUpdate()
*   onPostExecute()

`publishProgress(<data>)`因此，如果您想使用有关自动调用方法的后台任务调用方法`onProgressUpdate()`及其更新 UI的进度的一些信息来更新您的UI。

在您的情况下，您正在执行不应该`UI`的方法中的元素初始化。`doInBackground()`

我建议你这样做：

1.  在方法中初始化您的小部件`onCreate()`。
2.  当您想使用从 `doInBackground()`方法中检索到的数据来更新它们时，调用`publishProgress()`该调用 `onProgressUpdate()`方法并在此处执行更新

这是示例：

```
@Override
protected void onProgressUpdate(String... params) {
   txtName.setText(<value>);
   ...
} 
```

基于上面提到的事情我猜你需要阅读 AsyncTask 教程：

*   [所以检查这个链接](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T07:26:36.920

只需确保您的服务器和 android 设备都连接到同一个 wifi 连接，将 ip 地址更改为您的服务器地址，例如：将其更改为 192.168.1.102（无论您的服务器上显示什么

代码运行良好，我试过了

# windows - WINAPI 控件“编辑”-文本框不接收用户输入

> ID：15464436
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:22:03.630
> 
> 标签：windows, winapi, textbox

我有一个未设置为“只读”的文本框，所以理论上我应该能够写入它。它通过 Edit_Enable(hwnd, true)、Edit_SetReadOnly(hwnd, false) 和 SetFocus(hwnd) 激活。我可以通过单击来给文本框焦点，我什至可以看到插入符号在闪烁，但是，当我按下任何键时，文本框不会收到任何输入。我可以用 Edit_SetText() 设置它的文本，但我不能手动向它写任何东西。

我使用以下代码创建此文本框：

```
DWORD dwStyle = WS_CHILD | WS_VISIBLE | WS_VSCROLL | ES_AUTOVSCROLL /*| ES_OEMCONVERT*/ | ES_LEFT /*| ES_WANTRETURN */| WS_TABSTOP;
        HWND h = CreateWindowEx(WS_EX_CLIENTEDGE, L"EDIT", (LPCWSTR)NULL, dwStyle, posX, posY, width, height, hParent, NULL, (HINSTANCE)GetModuleHandle(NULL), NULL); 
```

消息在此函数中处理。它被称为每一帧。

```
bool PumpMessages()
{
    MSG msg;
    ZeroMemory( &msg, sizeof(MSG) );

    bool bQuit = false;

    // Use PeekMessage() so we can use idle time to update the system. 
    while (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        // Translate and dispatch the message
        TranslateMessage(&msg);

        // message bug workaround
        if (msg.message == WM_QUIT)
        {
            bQuit = true;
        }

        DispatchMessage(&msg);
    }

    return bQuit;
} 
```

消息过程如下所示：

```
 LRESULT CALLBACK Window::WndProcThunk(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
   {
   if (msg == WM_CHAR)
       Log("WM_CHAR");
    ...
   // Finally, if the message isn't consumed by the window or any registered listeners, let Windows do its thing.
    return msgConsumed ? 0 : DefWindowProc(hWnd, msg, wParam, lParam);
   } 
```

第二个奇怪的事情发生在 WndProcThunk 消息过程中。不记录 WM_CHAR 消息。我认为这就是我的 TextBox 什么都不做的原因，因为它需要 WM_CHAR 消息来对用户按键做出反应。我必须找到没有发送 WM_CHAR 消息的原因，即使我在 PumpMessages 函数中使用了 TranslateMessage()。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:50:50.757

`PeekMessage`如果消息队列中没有消息，则返回`FALSE`，因此您的消息循环将几乎立即退出。您需要切换到使用`GetMessage`或重构循环，以便将`bQuit`标志用作测试而不是`PeekMessage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:11:55.553

我通过禁用 DirectInput API 解决了这个问题。DirectInput 8 实际上正在吃掉所有 WM_KEYDOWM 消息，这导致没有 WM_CHAR 消息被发送。但是文本框需要 WM_CHAR 消息来响应用户输入。这是 API 的一种奇怪行为。如果有人有想法在不禁用 DirectInput 的情况下解决此问题，请随时发布。但从现在开始，我将使用 GetAsyncKeyState() 进行键盘输入。

# bash - 执行命令的用户名

> ID：15464439
> 
> 赞同：2
> 
> 时间：2013-03-17T18:22:09.330
> 
> 标签：bash, shell

我想获取执行命令的用户的名称（例如`cat`）。

`fc -l`将提供一个列表，其中包含当前用户执行的最新命令，但有没有办法找出所有用户的历史记录？我阅读了手册，但找不到有用的东西

你知道其他可以完成这项工作的命令吗？我也试过`w`了`who`

我找到了这个解决方案：超级用户将在 .bash_history 中的“home”中搜索每个目录，并在该文件上为该命令创建一个 grep。它会起作用，但这是最优的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:03:15.890

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题") =)

```
awk -v monitoredcmd=cat '
    $1~"^#[0-9]{10,}\s*$"{
        sub(/#/,"")
        tmpdate=$1
    }
    $1==monitoredcmd{
        "date -d @"tmpdate | getline date
        close("date -d @"tmpdate) 
        print "command [" $0 "] by",
            gensub(/\/home\/([^\/]+).*/, "\\1", "", FILENAME),
            at,
            date
    }
' /home/*/.bash_history 
```

## 样本输出

```
command [cat file.txt] by sputnick  mer. févr. 13 15:34:44 CET 2013
command [cat l.py] by sputnick  mer. févr. 13 15:45:38 CET 2013
command [cat foobar.pl] by marc  mer. févr. 13 15:47:54 CET 2013 
```

# javascript - 将字符串转换为 JSON

> ID：15464443
> 
> 赞同：-9
> 
> 时间：2013-03-17T18:22:19.790
> 
> 标签：javascript, node.js

您好我有以下 JavaScript 对象，如何将其序列化为 JSON 数据交换格式的字符串？

```
var result = { "id": "358464" ,"t" : "MSFT" ,"e" : "NASDAQ" ,"l" : "28.03" ,"l_cur" : "28.04" ,"s": "0" ,"ltt":"4:00PM EDT" ,"lt" : "Mar 15, 4:00PM EDT" ,"c" : "-0.10" ,"cp" : "-0.36" ,"ccol" : "chr" } 
```

我试过了`JSON.stringify`，`JSON.parse`但都对我不起作用

问题是：

例如，`result.l`返回未定义。

这可能有哪些可能的原因？我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:27:05.150

是的，它确实有效：

```
var str = '{ "id": "358464" ,"t" : "MSFT" ,"e" : "NASDAQ" ,"l" : "28.03" ,"l_cur" : "28.04" ,"s": "0" ,"ltt":"4:00PM EDT" ,"lt" : "Mar 15, 4:00PM EDT" ,"c" : "-0.10" ,"cp" : "-0.36" ,"ccol" : "chr" }';
var jsObj = JSON.parse(str);
console.dir(jsObj);
var jsonStrAgain = JSON.stringify(jsObj);
console.log(jsonStrAgain); 
```

这也有效（与 JSON 无关，只是一个对象文字）：

```
var result = { "id": "358464" ,"t" : "MSFT" ,"e" : "NASDAQ" ,"l" : "28.03" ,"l_cur" : "28.04" ,"s": "0" ,"ltt":"4:00PM EDT" ,"lt" : "Mar 15, 4:00PM EDT" ,"c" : "-0.10" ,"cp" : "-0.36" ,"ccol" : "chr" };
console.log(result.l); // "28.03" 
```

# r - 根据第三个变量更改线型 - R

> ID：15464452
> 
> 赞同：4
> 
> 时间：2013-03-17T18:23:31.047
> 
> 标签：r, plot, ggplot2

按照我的数据框，使用 dput()：

```
structure(list(year = 1984:2007, ger.90.10.ratio = c(3.1, 3.09, 
2.98, 2.93, 2.98, 2.96, 2.95, 3.12, 3.16, 3.13, 3.24, 3.3, 3.28, 
3.24, 3.24, 3.17, 3.23, 3.31, 3.63, 3.69, 3.75, 3.91, 4.1, 3.99
), kanzler = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L), wahljahr = c(0L, 
0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 
0L, 1L, 0L, 0L, 1L, 0L, 0L), us.90.10.ratio = c(9.55, 9.69, 10.09, 
10.23, 10.21, 9.99, 10.12, 10.22, 10.34, 10.64, 10.57, 10.11, 
10.33, 10.6, 10.44, 10.42, 10.58, 10.63, 10.75, 11.22, 11.08, 
11.17, 11.08, 11.18), us.80.20.ratio = c(4.36, 4.38, 4.49, 4.48, 
4.45, 4.44, 4.42, 4.51, 4.6, 4.65, 4.68, 4.52, 4.61, 4.64, 4.65, 
4.62, 4.56, 4.65, 4.69, 4.83, 4.76, 4.78, 4.84, 4.93), ger.ratio.diff = c(NA, 
-0.0100000000000002, -0.11, -0.0499999999999998, 0.0499999999999998, 
-0.02, -0.00999999999999979, 0.17, 0.04, -0.0300000000000002, 
0.11, 0.0599999999999996, -0.02, -0.0399999999999996, 0, -0.0700000000000003, 
0.0600000000000001, 0.0800000000000001, 0.32, 0.0600000000000001, 
0.0600000000000001, 0.16, 0.19, -0.109999999999999), ger.ratio.change = c(0, 
-0.0100000000000002, -0.11, -0.0499999999999998, 0.0499999999999998, 
-0.02, -0.00999999999999979, 0.17, 0.04, -0.0300000000000002, 
0.11, 0.0599999999999996, -0.02, -0.0399999999999996, 0, -0.0700000000000003, 
0.0600000000000001, 0.0800000000000001, 0.32, 0.0600000000000001, 
0.0600000000000001, 0.16, 0.19, -0.109999999999999)), row.names = c(NA, 
-24L), .Names = c("year", "ger.90.10.ratio", "kanzler", "wahljahr", 
"us.90.10.ratio", "us.80.20.ratio", "ger.ratio.diff", "ger.ratio.change"
), class = "data.frame") 
```

我想要做的是创建一个线图，根据第三个变量的值改变线型。它应该如下图所示![根据总统党派的不同线型绘制](../Images/bc91bbdf7ed56bed822141be40371ca3.png)

用文字表示：在上面的数据框中，我想绘制 ger.90.10.ratio 与年份的关系，并根据 kanzler 列中的值更改线条的样式。

我到处搜索（也许我的 google-fu 不好？）但我真的很想知道这在 R 中是否可行。

感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:38:12.070

R 的基本图形不允许更改中线的线属性（类型/虚线图案、颜色等），因此您必须拆分数据并`lines()`在片段上使用，或者`segments()`.

这不是一个完整的解决方案，但它是一个开始：

设置图形参数（没必要但我喜欢）：

```
par(las=1,bty="l") 
```

生成一个用于拆分的变量（我们希望每个段都有区别）：

```
dat <- transform(dat,k2=c(0,cumsum(diff(kanzler)!=0))) 
```

拆分数据：

```
s <- split(dat,dat$k2) 
```

设置一个空地块：

```
plot(ger.90.10.ratio~year,data=dat,type="n") 
```

为每个部分添加行：

```
invisible(lapply(s,
     function(x) with(x,lines(year,ger.90.10.ratio,col=kanzler)))) 
```

![在此处输入图像描述](../Images/265706551a29ad1033a33448d37cedba.png)

您可以在 中更紧凑地（像往常一样）执行此操作`ggplot2`，但`k2`我们设置的变量仍然有用：

```
library("ggplot2")
qplot(year,ger.90.10.ratio,data=dat,colour=factor(kanzler),
      group=k2,geom="line") 
```

![在此处输入图像描述](../Images/21e195d6c79f46e424ccbc24fdadcf8d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:14:24.083

这是一个使用`lattice`包的解决方案来显示它与基本图形图的相似程度。我基本上使用@Ben 拆分数据的想法。我使用`lattice`面板来提供更多`compact`解决方案。

![在此处输入图像描述](../Images/e5d6edd6b2f20e10f0b92c349a0bebb1.png)

```
library(lattice)
dat <- transform(dat,k2=c(0,cumsum(diff(kanzler)!=0)))
s <- split(dat,dat$k2)
xyplot(ger.90.10.ratio~year,data=dat,type=c('p'),groups=kanzler,
       main = 'THE PARTISAL POLITICAL ECONOMY',
       auto.key=list(columns=2,cex=2,text=c('Democrats','Republicans')),
       panel=function(x,y,...) {
         panel.xyplot(x,y,...)
         lapply(s,function(x) 
          with(x,panel.lines(year,ger.90.10.ratio,col=kanzler)))
         panel.grid()
       }) 
```

# mysql - MySQL Connector net 为什么我们需要它？

> ID：15464457
> 
> 赞同：1
> 
> 时间：2013-03-17T18:23:45.437
> 
> 标签：mysql, sql-server, mysql-connector

嘿，有人能解释一下为什么我们需要下载 MySQL 连接器网络吗？我在 Visual Studio 2010 上创建了一个网站并将其与 phpMyAdmin 数据库链接......但是 MySQL 连接器实际上做了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:33:50.363

PhpMyAdmin是一个用php制作的mysql数据库客户端，连接mysql数据库，托管在Apache Server中。这里我们可以直接执行mysql dml/ddl查看即时结果。

MySql Connector Net 是一个库，Dot net 应用程序将通过它连接到 mysql 以进行进一步的数据库通信。

希望对你有帮助..

# python - 如何有效地用python编写csv？

> ID：15464466
> 
> 赞同：0
> 
> 时间：2013-03-17T18:24:28.293
> 
> 标签：python, csv

我正在计算大型文档中的 tf-idf。我的单词数超过80,000。我正在尝试在 csv 文件中编写稀疏矩阵。我正在使用类似于在此处回答的代码[如何使用 Python 向 CSV 文件添加新列？](https://stackoverflow.com/a/11070638/1496376)

输出文件太大，超过 700 MB，仅约 30,000 字。所以，我的问题是如何有效地编写它？谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T21:26:00.210

您可以使用 gzip 模块轻松地直接编写 gzip 文件：

```
import gzip
import csv

f=gzip.open("myfile.csv.gz", "w")
csv_w=csv.writer(f)
for row in to_write :
    csv_w.writerow(row)
f.close() 
```

不要忘记关闭文件，否则生成的 csv.gz 文件可能无法读取。

你也可以用更 Pythonic 的风格来做：

```
with gzip.open("myfile.csv.gz", "w") as f :
    csv_w = csv.writer(f)
    ... 
```

这保证了文件将被关闭。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:41:11.243

[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)就是 CSV，您对此无能为力。*如果你真的*想坚持使用 CSV，你可以简单地[gzip](http://docs.python.org/2/library/gzip.html)它，或者你可以使用一些更适合你需要的自定义格式。

 *例如，您可以使用字典并导出为[JSON](http://docs.python.org/2/library/json.html)格式，或者创建一个专门的对象来处理您的数据并将其[腌制](http://docs.python.org/2/library/pickle.html)。

当我使用 TF-IDF 时，我使用[sqlite](http://docs.python.org/2/library/sqlite3.html)（通过[sqlalchemy](http://www.sqlalchemy.org/)）来存储文档信息，TF 数据作为 JSON 格式的字典。从此我创建了 IDF 统计数据，然后使用[numpy完成了 TFIDF 的其余部分](http://www.numpy.org/)*

# tcl - 从日期获取时间（以毫秒为单位）

> ID：15464474
> 
> 赞同：0
> 
> 时间：2013-03-17T18:25:12.667
> 
> 标签：tcl

是否可以获取一串日期，例如`2013-02-26 10:45:54,082`并从 "epoch" 获取以毫秒为单位的时间？或类似的东西？

我知道`clock scan`以秒为单位返回时间。还会`clock scan`返回此特定格式的错误。

我找不到我想要的东西，我想在开始创建它之前确保它不存在......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:21:03.833

Tcl 不支持毫秒级偏移（因为它在实践中是一种相当罕见的格式），但您可以解决这个问题：

```
set str "2013-02-26 10:45:54,082"
regexp {^([^\.,]*)[\.,](\d+)$} $str -> datepart millipart; # split on the last occurrence of , or . 
set timestamp [clock scan $datepart -format "%Y-%m-%d %H:%M:%S" -gmt 1]
scan $millipart "%d" millis
set millistamp [expr {$timestamp*1000 + $millis}] 
```

（您不提供时区信息，所以我假设它是 UTC，即“GMT”。我还允许使用`.`而不是`,`作为毫秒分隔符，因为您获得的时间取决于创建时间的语言环境首先是字符串。）

# bluetooth - 如何在处理中设置串行通信到 /dev/rfcomm0

> ID：15464475
> 
> 赞同：6
> 
> 时间：2013-03-17T18:25:18.600
> 
> 标签：bluetooth, serial-port, processing, rfcomm

我正在尝试在 Ubuntu 12.04 和连接到 Arduino 的 JY-MCU 蓝牙串行模块之间执行串行通信。

我在 /etc/bluetooth/rfcomm.conf 中创建了这个配置

```
rfcomm0 {
#   # Automatically bind the device at startup
    bind yes;
#
#   # Bluetooth address of the device    
    device 00:12:11:19:08:54
#   # RFCOMM channel for the connection
    channel 1;
#   # Description of the connection
    comment "Linvor Bluetooth Module";
} 
```

我可以使用 putty 与 /dev/rfcomm0 串行端口进行通信，并且效果很好。

但是，尽管进行了多次尝试，但我根本看不到如何在 Processing 中创建一个以任何方式工作的串行端口。

例如 ：

```
println(Serial.list()); 
```

什么都不打印。

如果我执行：

```
String portName = "/dev/rfcomm0";
myPort = new Serial(this, portName, 9600);
println(myPort); 
```

我在显示器上看到了这个：

```
processing.serial.Serial@1712651 
```

但如果我再打电话：

```
 myPort.write('9'); 
```

我得到一个例外：

```
java.lang.NullPointerException
    at processing.serial.Serial.write(Serial.java:572)
    ... 
```

我不明白为什么这会失败。我一直在遵循 Tom Igoe 的“让事情说话”中的所有指示，但这并不像他所说的那样工作......

任何帮助都会很棒！

谢谢，

鲍勃

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T11:38:32.700

在高低搜索之后，我完成了这项工作。

关键问题是处理使用 rxtx java 库 (RXTX-2.1-7) 进行串行通信。

[RXTX wiki](http://rxtx.qbang.org/wiki/index.php/Trouble_shooting#How_does_rxtx_detect_ports.3F__Can_I_override_it.3F)说：

> “rxtx 尝试通过扫描 /dev 以查找与一组已知良好前缀中的任何一个匹配的文件来检测端口，例如 'ttyS'、'ttym' 以及自 2.2 以来的 'ttyUSB' 等等。”

并且由于蓝牙设备被命名 `rfcomm*`，因此无法检测到。

诀窍是创建一个符号链接来欺骗 rxtx（使用尚未分配的 ttyS 设备）：

```
$ sudo ln -s  /dev/rfcomm0 /dev/ttyS99 
```

然后，连接：

```
$ sudo rfcomm connect 0
 Connected /dev/rfcomm0 to 00:12:11:19:08:54 on channel 1
 Press CTRL-C for hangup 
```

此时JY-MCU上的红灯长亮，处理可以检测到：

```
println(Serial.list()); 
```

输出是：

```
[0] "/dev/ttyACM0" 
[1] "/dev/ttyS99" 
```

因此，串行通信可以工作。

总而言之，以下过程将允许处理脚本通过串行端口与 BlueZ linux 框架中的 JY-MCU 设备进行通信

一次性设置：

1.  给 JY-MCU 上电，

2.  使用以下命令获取其硬件地址，我的是 00:12:11:19:08:54

    ```
    $ hcitool scan 
    ```

3.  使用它来创建 /etc/bluetooth/rfcomm.conf 文件；你会注意到我为 rfcomm 设备选择了 0，我们稍后需要它来连接：

    ```
    $ cat /etc/bluetooth/rfcomm.conf
    rfcomm0 {
        bind yes;
        device 00:12:11:19:08:54;
        channel    1;
        comment "Linvor Bluetooth Module";
    } 
    ```

4.  使用 BlueMan 配对 JY-MCU。

每次想用JY-MCU

1.  创建符号链接：

    ```
    $ sudo ln -s  /dev/rfcomm0 /dev/ttyS99 
    ```

2.  连接 JY-MCU：

    ```
    $ sudo rfcomm connect 0
      Connected /dev/rfcomm0 to 00:12:11:19:08:54 on channel 1
      Press CTRL-C for hangup 
    ```

3.  您现在可以运行处理脚本并使用代码连接到 JY-MCU：

    ```
    String portName = "/dev/ttyS99";
    myPort = new Serial(this, portName, 9600); 
    ```

4.  运行处理脚本后，一定要在命令行按CTRL-C断开JY-MCU。

应该这样做！乔，鲍勃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:52:35.357

我脑子里突然冒出一件事。由于已经使用了通道 1，我遇到了类似的问题。如果您绑定到已经在使用的通道，则可能会发生不好的事情。

```
sdptool browse local 
```

使用该命令查看 Ubuntu 设备上可用的频道。

# xslt - XSLT：对带有索引的字符串进行迭代

> ID：15464476
> 
> 赞同：1
> 
> 时间：2013-03-17T18:25:22.247
> 
> 标签：xslt, indexing, split, iteration

我在进行非常简单的 XSLT 转换时遇到了麻烦。假设这是输入 XML 文档：

```
<root>
  <myString>ABBCD</myString>
</root> 
```

输出 XML 应该是：

```
<root>
    <myCharacters>
        <character>
            <id>1</id>
            <value>A</value>
        </character>
        <character>
            <id>2</id>
            <value>B</value>
        </character>
        <character>
            <id>3</id>
            <value>B</value>
        </character>
        <character>
            <id>4</id>
            <value>C</value>
        </character>
        <character>
            <id>5</id>
            <value>D</value>
        </character>
    </myCharacters>
</root> 
```

有没有一种简单的方法可以拆分这样的字符串并在其上增加索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:35:19.263

在 XSLT 2.0 中这很容易......

**XML 输入**

```
<root>
    <myString>ABBCD</myString>
</root> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="myString">
        <myCharacters>
            <xsl:analyze-string select="." regex=".">
            <xsl:matching-substring>
                <character>
                    <id><xsl:value-of select="position()"/></id>
                    <value><xsl:value-of select="."/></value>
                </character>
            </xsl:matching-substring>
        </xsl:analyze-string>
        </myCharacters>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<root>
   <myCharacters>
      <character>
         <id>1</id>
         <value>A</value>
      </character>
      <character>
         <id>2</id>
         <value>B</value>
      </character>
      <character>
         <id>3</id>
         <value>B</value>
      </character>
      <character>
         <id>4</id>
         <value>C</value>
      </character>
      <character>
         <id>5</id>
         <value>D</value>
      </character>
   </myCharacters>
</root> 
```

这在 1.0 中也不可怕。您可以使用递归模板。以下将产生相同的输出：

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="myString">
        <myCharacters>
            <xsl:call-template name="analyzeString">
                <xsl:with-param name="string" select="."/>
            </xsl:call-template>
        </myCharacters>
    </xsl:template>

    <xsl:template name="analyzeString">
        <xsl:param name="pos" select="1"/>
        <xsl:param name="string"/>
        <character>
            <id><xsl:value-of select="$pos"/></id>
            <value><xsl:value-of select="substring($string,1,1)"/></value>
        </character>
        <xsl:if test="string-length($string)>=2">
            <xsl:call-template name="analyzeString">
                <xsl:with-param name="pos" select="$pos+1"/>
                <xsl:with-param name="string" select="substring($string,2)"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:50:35.467

**一、XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:variable name="vStyle" select="document('')"/>

 <xsl:template match="myString">
  <xsl:variable name="vStr" select="."/>
  <root>
    <myCharacters>
      <xsl:for-each select=
      "($vStyle//node()|$vStyle//@*|$vStyle//namespace::*)
                      [not(position() > string-length($vStr))]">

        <character>
            <id><xsl:value-of select="position()"/></id>
            <value><xsl:value-of select="substring($vStr,position(),1)"/></value>
        </character>
      </xsl:for-each>
    </myCharacters>
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
  <myString>ABBCD</myString>
</root> 
```

**产生了想要的正确结果：**

```
 <root>
   <myCharacters>
      <character>
         <id>1</id>
         <value>A</value>
      </character>
      <character>
         <id>2</id>
         <value>B</value>
      </character>
      <character>
         <id>3</id>
         <value>B</value>
      </character>
      <character>
         <id>4</id>
         <value>C</value>
      </character>
      <character>
         <id>5</id>
         <value>D</value>
      </character>
   </myCharacters>
</root> 
```

**或者，使用 FXSL，可以使用如下`str-map`模板：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:testmap="testmap" xmlns:f="http://fxsl.sf.net/"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="xsl f ext testmap">
   <xsl:import href="str-dvc-map.xsl"/>
   <testmap:testmap/>
   <xsl:variable name="vTestMap" select="document('')/*/testmap:*[1]"/>

   <xsl:output omit-xml-declaration="yes" indent="yes"/>

   <xsl:template match="myString">
    <xsl:variable name="vrtfChars">
     <xsl:call-template name="str-map">
       <xsl:with-param name="pFun" select="$vTestMap"/>
       <xsl:with-param name="pStr" select="."/>
     </xsl:call-template>
    </xsl:variable>

    <myCharacters>
      <xsl:apply-templates select="ext:node-set($vrtfChars)/*"/>
    </myCharacters>
   </xsl:template>

    <xsl:template name="enumChars" match="*[namespace-uri() = 'testmap']"
    mode="f:FXSL">
      <xsl:param name="arg1"/>
        <character>
            <value><xsl:value-of select="$arg1"/></value>
        </character>
    </xsl:template>

    <xsl:template match="character">
     <character>
       <id><xsl:value-of select="position()"/></id>
       <xsl:copy-of select="*"/>
     </character>
    </xsl:template>
</xsl:stylesheet> 
```

**产生相同的正确结果**：

```
 <myCharacters>
   <character>
      <id>1</id>
      <value>A</value>
   </character>
   <character>
      <id>2</id>
      <value>B</value>
   </character>
   <character>
      <id>3</id>
      <value>B</value>
   </character>
   <character>
      <id>4</id>
      <value>C</value>
   </character>
   <character>
      <id>5</id>
      <value>D</value>
   </character>
</myCharacters> 
```

* * *

**二、XSLT 2.0 解决方案——比其他答案更短更简单：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="myString">
  <root>
    <myCharacters>
      <xsl:for-each select="string-to-codepoints(.)">
        <character>
            <id><xsl:value-of select="position()"/></id>
            <value><xsl:value-of select="codepoints-to-string(.)"/></value>
        </character>
      </xsl:for-each>
    </myCharacters>
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，会产生所需的正确结果：**

```
 <root>
   <myCharacters>
      <character>
         <id>1</id>
         <value>A</value>
      </character>
      <character>
         <id>2</id>
         <value>B</value>
      </character>
      <character>
         <id>3</id>
         <value>B</value>
      </character>
      <character>
         <id>4</id>
         <value>C</value>
      </character>
      <character>
         <id>5</id>
         <value>D</value>
      </character>
   </myCharacters>
</root> 
```

# c++ - C ++中parallel_invoke的意外输出

> ID：15464478
> 
> 赞同：0
> 
> 时间：2013-03-17T18:25:27.260
> 
> 标签：c++, ppl

我已经并行执行了 3 个任务：打印两个数字的最小值、最大值和平均值。第一个任务两次打印最小值，我希望它的输出是连续的。

```
int wmain()
{

__int64 elapsed;

    elapsed = time_call([&] 
    {
        double a = 1.0;
        double b = 5.0;
        parallel_invoke(
            [&]{for( size_t i = 0; i < 2; ++i )
                {
                    PrintMinValue(a, b);
                }},
            [&]{PrintMaxValue(a, b);},
            [&]{PrintAvgValue(a, b);});

    }); 

    wcout << L"parallel time: " << elapsed << L" ms" << endl << endl;
} 
```

我多次运行这个程序。所有输出，例如 5、3、1、1 或 3、1、1、5 都是可以理解的。但是，一些输出，例如 1, 5, 3, 1 并不明显。这意味着必须在连续块中打印两次“1”（最小值）的第一个任务被拆分。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:49:43.980

代码是并行执行的。为什么你*期望*块是连续的？关于并行编程的全部意义在于你放弃了这个保证——否则它不会是并行的，而是顺序的。

如果要保留执行顺序，则需要将连续块包装在[关键部分](http://msdn.microsoft.com/en-us/library/dd492843.aspx)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:38:56.073

对 wcout 或 cout 的每次调用都可以在 '<<' 运算符处拆分，如果要打印整行而不中断，请使用 printf 样式输出。

# lua - 碰撞过滤器未按预期运行

> ID：15464480
> 
> 赞同：2
> 
> 时间：2013-03-17T18:25:31.377
> 
> 标签：lua, coronasdk

我正在研究这个联盟过滤器代码一个多星期，但无法让它工作。每次发生碰撞时，它都会打印所有 4 个碰撞过滤器，例如：

你好我是 CollisionFilter1，
你好我是 CollisionFilter2，
你好我是 CollisionFilter3，
你好我是墙，

我不明白如何让这个工作，所以欢迎任何帮助。

编码：

```
badc1CollisionFilter = { categoryBits = 1, maskBits = 16 }
badc2CollisionFilter = { categoryBits = 2, maskBits = 16 }
badc3CollisionFilter = { categoryBits = 4, maskBits = 16 }
wallCollisionFilter = { categoryBits = 8, maskBits = 16 }
playerCollisionFilter = { categoryBits = 16, maskBits = 15 }

function getRandomStar()
    local temp = starTable[math.random(1, #starTable)]
    local randomStar = display.newImage(temp.imgpath)
    if ( temp.imgpath == "BCloud1.png" ) then
    physics.addBody( randomStar, { density=.1, bounce=0.1, friction=.2, radius=45, filter=badc1CollisionFilter } )
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    end

    if ( temp.imgpath == "BCloud2.png" ) then
    physics.addBody( randomStar, { density=.1, bounce=0.1, friction=.2, radius=45, filter=badc2CollisionFilter } )
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    end

    if ( temp.imgpath == "BCloud3.png" ) then
    physics.addBody( randomStar, { density=.1, bounce=0.1, friction=.2, radius=45, filter=badc3CollisionFilter } )
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    end        
    randomStar.myName = "star" -- Set the name of the object to star
    randomStar.movementSpeed = temp.movementSpeed; -- Set how fast the object will move
    randomStar.x = math.random(-30, _W);    
    randomStar.y = -35;
    randomStar.rotation = math.random(0,20) -- Rotate the object

    starMove = transition.to(randomStar, {
        time=randomStar.movementSpeed, 
        y=500,
        onComplete = function(self) self.parent:remove(self); self = nil; 
        end
        }) -- Move the star
end

    ceiling = display.newImage("invisibleTile.png")
    ceiling:setReferencePoint(display.BottomLeftReferencePoint)
    ceiling.x = 0
    ceiling.y = 0
    physics.addBody(ceiling, "static", {density=.1, bounce=0.1, friction=.2, filter=wallCollisionFilter } ) 

    screenGroup:insert(ceiling)

    theFloor = display.newImage("invisibleTile.png")
    theFloor:setReferencePoint(display.BottomLeftReferencePoint)
    theFloor.x = 0
    theFloor.y = 510
    physics.addBody(theFloor, "static", {density=.1, bounce=0.1, friction=.2, filter=wallCollisionFilter } )        
    screenGroup:insert(theFloor)

    playerSpriteSheet = sprite.newSpriteSheet("player.png", 113, 55)
    playerSprites = sprite.newSpriteSet(playerSpriteSheet, 1, 4)
    sprite.add(playerSprites, "players", 1, 4, 1000, 0)
    player = sprite.newSprite(playerSprites)
    player.x = -80
    player.y = 350
    player:prepare("players")
    player:play()
    player.collided = false
    player:setReferencePoint(display.CenterReferencePoint);    
    physics.addBody(player, "static", {density=.1, bounce=0.1, friction=.2, radius=10, filter=playerCollisionFilter } )    
    player.gravityScale = 0
    screenGroup:insert(player)
    playerIntro = transition.to(player,{time=2000, x=150, onComplete=playerReady})

 local badc1collision = function( event )
 if event.phase == 'began' then
   print("Hello i am CollisionFilter1")
 end
end

 local badc2collision = function( event )
 if event.phase == 'began' then
   print("Hello i am CollisionFilter2")
 end
end

 local badc3collision = function( event )
 if event.phase == 'began' then
   print("Hello i am CollisionFilter3")
 end
end

 local wallcollision = function( event )
 if event.phase == 'began' then
   print("Hello i am the wall")
 end
end

    Runtime:addEventListener("collision", badc1collision)
    Runtime:addEventListener("collision", badc2collision)
    Runtime:addEventListener("collision", badc3collision)   
    Runtime:addEventListener("collision", wallcollision) 
```

* * *

更新代码后：

```
playerSpriteSheet = sprite.newSpriteSheet("player.png", 113, 55)
playerSprites = sprite.newSpriteSet(playerSpriteSheet, 1, 4)
sprite.add(playerSprites, "players", 1, 4, 1000, 0)
player = sprite.newSprite(playerSprites)
local newCollisionHandler
player:addEventListener( "collision", newCollisionHandler )
player.x = -80
player.y = 350
player:prepare("players")
player:play()
player.collided = false
player:setReferencePoint(display.CenterReferencePoint);
physics.addBody(player, "static", {density=.1, bounce=0.1, friction=.2, radius=10, filter=playerCollisionFilter } ) 
player.gravityScale = 0
screenGroup:insert(player)
playerIntro = transition.to(player,{time=2000, x=150, onComplete=playerReady}) 
```

我仍然得到这个错误？

![在此处输入图像描述](../Images/ab2efff770736326227c2cbf00f8ec19.png)

问候凯文

* * *

好的，所以从你的评论中我做到了：

```
badc1CollisionFilter = { categoryBits = 1, maskBits = 16 }
badc2CollisionFilter = { categoryBits = 2, maskBits = 16 }
badc3CollisionFilter = { categoryBits = 4, maskBits = 16 }
wallCollisionFilter = { categoryBits = 8, maskBits = 16 }
playerCollisionFilter = { categoryBits = 16, maskBits = 15 }

function getRandomStar()
    local temp = starTable[math.random(1, #starTable)] -- Get a random star from starTable
    local randomStar = display.newImage(temp.imgpath) -- Set image path for object

    if ( temp.imgpath == "BCloud1.png" ) then
    physics.addBody( randomStar, { density=.1, bounce=0.1, friction=.2, radius=45, filter=badc1CollisionFilter } )
    randomStar.myName = "star1"
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    end

    if ( temp.imgpath == "BCloud2.png" ) then
    physics.addBody( randomStar, { density=.1, bounce=0.1, friction=.2, radius=45, filter=badc2CollisionFilter } )
    randomStar.myName = "star2"
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    end

    if ( temp.imgpath == "BCloud3.png" ) then
    physics.addBody( randomStar, { density=.1, bounce=0.1, friction=.2, radius=45, filter=badc3CollisionFilter } )
    randomStar.myName = "star3"
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    end

    randomStar.myName = "star" -- Set the name of the object to star
    randomStar.movementSpeed = temp.movementSpeed; -- Set how fast the object will move
    randomStar.x = math.random(-30, _W);    
    randomStar.y = -35;
    randomStar.rotation = math.random(0,20) -- Rotate the object

    starMove = transition.to(randomStar, {
        time=randomStar.movementSpeed, 
        y=500,
        onComplete = function(self) self.parent:remove(self); self = nil; 
        end
        }) -- Move the star
end--END getRandomStar()

    playerSpriteSheet = sprite.newSpriteSheet("player.png", 113, 55)
    playerSprites = sprite.newSpriteSet(playerSpriteSheet, 1, 4)
    sprite.add(playerSprites, "players", 1, 4, 1000, 0)
    player = sprite.newSprite(playerSprites)
    player.x = -80
    player.y = 350
    player:prepare("players")
    player:play()
    player.collided = false
    player:setReferencePoint(display.CenterReferencePoint);
    physics.addBody(player, "static", {density=.1, bounce=0.1, friction=.2, radius=10, filter=playerCollisionFilter } )      
    player.gravityScale = 0    
    screenGroup:insert(player)
    playerIntro = transition.to(player,{time=2000, x=150, onComplete=playerReady})

function newCollisionHandler( self, event )
   if event.other.myName == "star1" then
        print( "Collided with star1" )
   elseif event.other.myName == "star2" then
        print( "Collided with star2" )
   elseif event.other.myName == "star3" then
        print( "Collided with star3" )
   end
end

function scene:enterScene(event)
player.collision = newCollisionHandler
player:addEventListener( "collision", player)
end 
```

终端打印：“哦，你好，我有碰撞”，但不是“与 star1/2/3 碰撞”？

-凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:23:14.917

您可以尝试向玩家对象添加一个主要的碰撞功能：

```
local newCollisionHandler    
player:addEventListener( "collision", newCollisionHandler )

function newCollisionHandler( self, event )
-- self object is player object
-- event.other object is the other object in collision

-- by giving id's or object type to all objects you can find collision type
   if event.other.myName == "star1" then
        print( "Collided with star1" )
   elseif event.other.myName == "star2" then
        print( "Collided with star2" )
   elseif event.other.myName == "star3" then
        print( "Collided with star3" )
   elseif event.other.myName == "star4" then
        print( "Collided with star4" )
   elseif event.other.myName == "star5" then
        print( "Collided with star5" )
   end
end 
```

我只是组成了对象的 myName 值。你当然应该修改它。但我要解释的是，添加到物理中的所有对象都应该具有 myName 或 myType 属性。所以从这个属性中，你可以理解，什么与玩家对象发生了碰撞。

# git - Git - 本地存储库

> ID：15464481
> 
> 赞同：-3
> 
> 时间：2013-03-17T18:25:39.863
> 
> 标签：git

如何将本地 git 存储库转换为远程存储库？

我需要这个解决方案来从本地存储库中提取更改（在开发人员提交他的更改之后，以及在推送到主操作之前）并在推送操作之前测试产品（这可能会破坏远程主控）。

谢谢，莉尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:12:17.450

如果您不在开发人员的位置，则开发人员的本地存储库是远程存储库。除了允许您访问它（对 .git 文件夹的文件访问应该足够了）之外，不需要做任何事情来允许远程访问。只需为该开发人员的存储库设置一个遥控器并在拉取时使用它。

但是，除非开发人员已将其本地存储库中的一个分支标识为公共的，并且仅在完成代码后才提交，否则从其中提取可能会产生一些非常奇怪的结果。

已经开发了许多工作流程来帮助避免多个用户修改同一代码库可能导致的麻烦，并确保将其投入生产的代码已经过全面测试。搜索“git 工作流”会给你大量阅读，其中大部分是矛盾的；所有这些都有助于确定哪种工作流程最适合您的环境。

# scheme - 我在这个方案流实现中做错了什么？

> ID：15464485
> 
> 赞同：0
> 
> 时间：2013-03-17T18:25:52.363
> 
> 标签：scheme

我正在尝试为分配实现流，但我错过了一些重要的东西。

这个stream-cons应该创建一个对，它是cdr的一个值和一个promise（稍后会评估）..

`(define (str1) (stream-cons 1 2))`

但是，当我打电话时`(stream-car str1)`它抱怨“预期违反合同：对？”

我不明白为什么 str1 不是有效的对 - 我该怎么做才能使这项工作？

抢

```
#lang racket

(define-syntax delay
  (syntax-rules () ((delay expr) (lambda () expr))))

(define (force delayed-obj)
  (delayed-obj))

(define-syntax stream-cons
  (syntax-rules() ((stream-cons x y)
                   (cons x (delay y)))))

(define (stream-car stream)
  (car stream))

(define (stream-cdr stream)
  (force (cdr stream)))

(define the-empty-stream '())

;;; 

; TESTS
(define (str1) (stream-cons 1 2))

(stream-car str1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:30:17.097

您的线路：

```
(define (str1) (stream-cons 1 2)) 
```

正在定义一个名为 str1 的函数，因此 str1 不是一对。它应该是：

```
(define str1 (stream-cons 1 2)) 
```

# jquery - jTable jquery验证引擎错误

> ID：15464487
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:26:00.987
> 
> 标签：jquery, asp.net, validation, jquery-jtable

我正在使用 jTable jquery crud 网格，它工作正常。我也在使用它的验证引擎文件并且工作正常。

但罪魁祸首是在验证引擎文件中， .live() 函数会给出错误。它说该功能不存在。然后我删除了 .live 和 .die 并在验证引擎文件 js 中替换为 .on 和 .off 函数。

替换后，验证也可以正常工作。但我发现的一个错误是；当我使用新功能更新验证引擎时。在关闭 jquery 对话框时；它提示错误红色标签并关闭该对话框。我很困惑; 为什么当我单击关闭 jquery 对话框的 X 符号时会提示该红色标签。

即使在实时 jtable 站点上，如果您在添加记录链接上关闭对话框或打开对话框，.live 函数也会出错，这就是不产生错误的原因。

如果对此有任何解决方法或更新，我想在关闭对话框时摆脱那个红色标签提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:18:38.647

在更新与 .on 和 .off 功能兼容的validationEngine 文件后，我终于让它工作了。并且还摆脱了失去焦点的错误（仅在提交时显示错误）。

替换代码：

```
formCreated: function (event, data) {
                    data.form.validationEngine();
                }
TO
formCreated: function (event, data) {
                    data.form.validationEngine('attach', {
                        binded: true
                    });
                } 
```

# c - 使用 C 控制 cmd 提示符

> ID：15464488
> 
> 赞同：3
> 
> 时间：2013-03-17T18:26:18.363
> 
> 标签：c, windows, cmd, command-prompt

我正在尝试编写一个 C 程序来控制 windows cmd 提示符。例如，打开 cmd 提示符，转到特定目录（例如：C:/Program Files/...），然后在该文件夹中运行 exe。

这可以用C编程来完成吗？如果是这样，怎么做？到目前为止，我只知道 system("cmd.exe") 打开 cmd 提示符。我将如何进一步与 cmd 提示符交互？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:32:37.080

这不会很便携。`system`调用通常不受欢迎，但只是为了回答您的问题，该`system`功能确实适用于您打算使用的命令。

例如：

```
system("notepad.exe my_file.txt");
system("del my_file.txt");
system("pause"); 
```

这将在记事本中打开一个名为 my_file.txt 的文件，将其删除并暂停程序。

同样，这不是便携式的。它特定于 Windows 操作系统。事实上，我什至不认为它可以在所有 Windows 版本上运行。（不要引用我的话。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:40:06.527

主题：您可以通过“CreateProcess”启动 cmd，并通过窗口消息（“SendMessage”）发送键输入。

我认为您应该重新考虑您希望如何完成工作。命令提示符不是一种在 Windows 上执行操作的 API 基础。它是一种无需编写自己的程序即可做事和获取信息的工具。如果您编写自己的程序，则应直接使用 WinAPI。

开始你可以谷歌“winapi [whatever you want to do]”。在您的示例“winapi start executable”中，您将找到“CreateProcess”和“ShellExecute”等函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T01:05:09.760

也许这里有一个误解（如果是，我很抱歉），但是“与cmd提示进一步交互”的标准方式是通过命令行命令，而“编写程序来控制windows cmd提示”的标准方式是通过批处理文件。例如，以下批处理文件打开 cmd 提示符（通过在资源管理器中双击执行时），转到特定目录（C:/Program Files/）并在该文件夹中运行 exe：

```
@echo off
cd "C:/Program Files/"
nameOfTheProgram.exe 
```

# java - Java 更新后 Eclipse 中的 FileNotFoundException

> ID：15464490
> 
> 赞同：0
> 
> 时间：2013-03-17T18:26:46.007
> 
> 标签：java, servlets, file-upload

我有一个程序，其中客户端上传文件并将文件存储在数据库中。在我的计算机上更新 Java 之前，我的项目运行良好。现在我得到一个`FileNotFoundException`. Eclipse 告诉我：

> JAR 文件 C:\Program Files\Java\jre7\lib\rt.jar 没有源附件。

有人遇到过这个问题吗？

我上传文件的 servlet 代码是标准的：

```
if (!ServletFileUpload.isMultipartContent(request))
    {return;}

try 
{ 
  List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
  courseID = items.get(0).getString();
  homeworkID = items.get(1).getString();
  File storeFile = new File(items.get(2).getName());
  String fileName = storeFile.getName();
  String mimeType = new MimetypesFileTypeMap().getContentType(storeFile); //for putting file into database
  putFileIntoDB(uName, courseID, homeworkID, fileName, mimeType, storeFile);
}//try
 catch (Exception ex)
 {
   request.setAttribute("msg", "There was an error: " + ex.getMessage());
   request.getRequestDispatcher("/upload.jsp").forward(request, response);
  } 
```

在 fis=new FileInputStream(f) 行创建 FileInputStream 时 putFileIntoDB 方法出现错误：

```
void putFileIntoDB(String username, String courseID, String homeworkID, String fileName, String mime, File f) throws SQLException, IOException
{   
    FileInputStream fis = null;
    java.sql.PreparedStatement pstmt = null;
    java.sql.Connection conn = null;
    try {
            conn = ConnectionManager.getConnection();
            conn.setAutoCommit(true);

            fis = new FileInputStream(f);

            pstmt = conn.prepareStatement("insert into files(username, courseID, assignmentID, fileName, mimeType, contents) values (?, ?, ?, ?, ?, ?)");
            pstmt.setString(1, username);
            pstmt.setString(2, courseID);
            pstmt.setString(3, homeworkID);
            pstmt.setString(4, fileName);
            pstmt.setString(5, mime);
            pstmt.setAsciiStream(6, fis, (int) f.length());

            pstmt.executeUpdate();
            conn.commit();
        }
    catch (Exception e)
    {
      System.err.println("Error: " + e.getMessage());
      e.printStackTrace();
    } 
    finally
    {
      pstmt.close();
      fis.close();
      conn.close();
    }
} 
```

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:01:25.080

尝试以下步骤；

第 1 步 - 将 Ecilpse 配置为使用 JDK 而不是 JRE。

```
Window->Preferences->Java->Installed JREs
Click "Add", "Standard VM", "Next"
For "JRE Home" click "Directory"
Locate your JDK directory...
Ex: C:\java\jdk1.6.0_24
Click "Finish"
Next check the JDK vs the JRE that is listed.
Click "Ok" 
```

第 2 步 - 将您的项目配置为使用 JDK，因为它是使用 JRE 作为“已安装的 JRE”创建的。新项目应该没问题。

```
Right click the project's name.
Choose "Properties", "Java Build Path"
Click the tab "Libraries".
Click "Add Libraries", select "JRE System Library", Next
Select the bottom item: Workspace default JRE (jdk1.x.x. etc....)
(Notice that it is now a JDK and not the JRE!)
Click "Finish"
Now remove the JRE libarary so you only have the JDK library.
ex: JRE System Library [JavaSE-1.6]
Click "OK" 
```

# ios - NSArray 元素到 NSString

> ID：15464491
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:26:50.263
> 
> 标签：ios, nsstring, nsarray

我有应用程序，我从套接字消息接收到：**"\r\nIDLE|03/17/2013 19:48\n"**。我将此消息转换为带有代码的 UTF8 字符串：

```
NSString* newStr = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

然后我尝试从这个字符串中分离命令和时间：

```
NSArray *nums = [command componentsSeparatedByString:[NSString stringWithFormat:@"%c", (char)13]];
NSLog(@"First separate = %@", nums);
if ([nums count] == 3)
{
    NSArray *nums1 = [[nums objectAtIndex:1] componentsSeparatedByString:@"|"];
    NSLog(@"second separate = %@", nums1);
    if ([nums1 count] == 2)
    {
        NSString* strState = [(NSString *)[nums1 objectAtIndex:0] description];
        NSLog(@"State = %@", strState);

        ...
    }
} 
```

在我接下来看到的日志中：

```
 First separate = (
    "IDLE|03/17/2013 19:48",
    "\n"
second separate = (
    "IDLE",
    "03/17/2013 19:48"
State = I 
```

在 0 元素中第二次分离后，我有文本**IDLE**，但是当我尝试获取此文本时，我 **strState**变量，我只看到此文本的第一个字符。任何人都可以帮助我完全掌握这个元素吗？

谢谢你。

**UPDATE1** 正如我之前所说，我从套接字消息中得到：**“\r\nIDLE|03/17/2013 19:48\n”** 我确信服务器会向我发送此消息。在 Socket 读取回调中，我使用下一个代码来读取此消息：

```
int result = CFReadStreamRead(_inputStream, (UInt8*)[data mutableBytes], length);
NSString* newStr = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

这里应用程序读取了 50 个字节，这是否适合此消息？您可以在下一张图片中看到我的调试器： ![套接字中的调试器](../Images/0a1c350df56d5d6349ef7d6047d328b1.png)

但在**newStr**成员中，我只看到*\r*。然后我发送尝试将这条消息与我上面编写的代码分开。当我尝试单独的消息记录器时，显示所有消息而不是*\r*： ![分开后的数组](../Images/304d8ddc9f79fdf42072a2229b2e1d26.png) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:26:29.410

有一种相当简单的方法可以使用该方法完成您想要的`-[NSString stringByTrimmingCharactersInSet:]`。传递空格和换行符集允许您从字符串中修剪前导和尾随空格和换行符，然后您只需要对`componentsSeparatedByString:`.

```
NSString *raw = @"\r\nIDLE|03/17/2013 19:48\n";
NSString *trimmedString = [raw stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSArray *components = [trimmedString componentsSeparatedByString:@"|"];
NSString *command = components[0];
NSString *time = components[1];
NSLog(@"command = %@, time = %@",command,time); 
```

此代码产生以下输出：

```
command = IDLE, time = 03/17/2013 19:48 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:47:10.877

您是否考虑过使用 sscanf()？

```
 char command[COMMAND_SIZE_LIMIT];   
  char date[DATE_SIZE_LIMIT];
  char time[TIME_SIZE_LIMIT];

  sscanf (input, "\r\n%[^|]%*[|]%s%s\n", command, date, time); 
```

（注意：以上是示例代码；如果扫描的字符串包含过大的命令或日期时间子字符串，则会出现安全问题。）

```
# test
ebg@ebg$ ./foo
Input: '
IDLE|03/17/2013 19:48
'
Command: 'IDLE'
Date: '03/17/2013'
Time: '19:48' 
```

转换 NSString <==> C 字符串很容易。

# actionscript-3 - Flash AS3 在加载之前什么都不做

> ID：15464493
> 
> 赞同：0
> 
> 时间：2013-03-17T18:27:01.250
> 
> 标签：actionscript-3, text, load

我有这个程序，它需要加载一个文本文件，它可以这样做，但由于 AS3 上的所有内容都是多线程的，即使它没有加载，它也会继续执行该程序。就像，如果我要创建一个加载文本的函数，然后让它返回加载的文本，它总是会返回“未定义”。我必须在完成时添加一个事件侦听器，但是我必须处理文本返回的方式很尴尬。有什么方法可以让程序等待，或者在加载之前什么都不做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:00:32.503

听起来您正在寻找的是同步加载数据，以便您可以进行加载调用并立即返回，如下所示：

```
# (this actually is not actionscript)
fileDataContents = open("file.txt", "r"); 
```

然后让 fileDataContents 立即可用。

*按照设计，这不是 Flash 的工作方式。*

在闪存中加载外部数据不是多线程的，而是**异步**的。未完成同步加载的一个很好的原因是它会导致程序在操作期间阻塞/锁定，从而可能导致糟糕的用户体验。

举个例子，如果这是通过网络加载文件：如果用户的互联网连接刚刚中断/中断或在服务器上突然移动/删除/修改怎么办？或者，如果文件大小适中但用户正在拨号，该怎么办？

在大多数情况下，这是您无法控制的，由此产生的行为可能是它导致 flash 在尝试加载时“永远”冻结在用户的浏览器窗口中，可能会导致整个浏览器崩溃，最终导致用户不佳经验。通过在该循环中阻止/锁定程序，您将无法适当地恢复或响应用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:03:30.533

不，你不能。

像现在这样监听 COMPLETE 事件是等待并在完成后继续应用程序流程的正确方法。我看不出这会如何变得尴尬 - 我建议更新您的问题，以包含有关让您对事件系统感到不舒服的原因的信息，以便我可以从那里为您提供帮助。

也许您只是没有以一种与事件系统配合良好的方式来构建您的代码。以下是如何设置一种非常简洁、直接的方式来加载一些数据并在完成后启动应用程序。

这是文档类，它可以纯粹用作加载文本数据的通道，这些数据将被转发到实际应用程序类的新实例：

```
public class Main extends Sprite
{

    private var _application:Application;
    private var _loader:URLLoader;

    public function Main()
    {
        var fileUrl:URLRequest = new URLRequest("file.txt");

        _loader = new URLLoader(fileUrl);
        _loader.addEventListener(Event.COMPLETE, _textLoaded);
    }

    private function _textLoaded(e:Event):void
    {
        _loader.removeEventListener(Event.COMPLETE, _textLoaded);

        // Load the main Application with the required text data.
        _application = new Application( _loader.data );
    }

} 
```

然后是你的`Application`，你可以考虑你的中心类。：

```
public class Application
{

    public function Application(textData:String)
    {
        // Here we have access to the required text, and we can
        // begin preparing the main Application.
        trace(textData);
    }

} 
```

# c# - 公共与公共静态方法

> ID：15464497
> 
> 赞同：5
> 
> 时间：2013-03-17T18:27:16.603
> 
> 标签：c#, static

阅读了 C# 编程教程中的访问修饰符后，我得出结论，定义一个方法`public`足以让它从另一个`Form`相同的命名空间“看到”。

然而，在实践中，每当我尝试实现这一点时，我还必须定义该方法`static`，以便从其他`Forms`相同的命名空间中引用它。

我失去了什么吗？我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T18:28:59.520

对于`public static`方法，您不需要对对象的引用。该方法是静态的，可以在`class`级别上访问。

如果您无法访问公共方法，那么您需要对该对象的引用，那么您可以。

```
public class AClass
{
    public void DoSomething() {}
    public static void DoSomethingElse() {}
} 
```

您可以按如下方式使用它们：

```
AClass.DoSomethingElse(); // no object reference required
AClass.DoSomething(); // will give compiler error, since you have no object reference.
var anObject = new AClass();
anObject.DoSomething(); // will work fine.
anObject.DoSomethingElse(); // compile error (thx hvd). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:35:50.463

`public static`方法不需要对象实例，它们可以在不创建类的任何实例的情况下使用

`ClassName.MyStaticPublicMethodName()`

其中`public`（非静态）方法需要类的实例，公共（非静态）方法通常可以帮助您使用对象的数据成员（字段）。

要使用非静态公共方法，您需要创建类的实例

```
ClassName obj = new ClassName();
obj.MyPublicMethod(); 
```

# php - 如何为codeigniter中的所有子控制器组织一个主控制器

> ID：15464498
> 
> 赞同：1
> 
> 时间：2013-03-17T18:27:19.963
> 
> 标签：php, codeigniter

我想做这样的事情：

```
Main_Controller -> {

   child1_controller

   child2_controller

   child3_controller

} 
```

目的是每次执行子类时执行主类的构造函数，它看起来像某种多重扩展，例如，如果我想检查主构造函数是否是管理员，但问题是当我这样做

```
child1_controller extends Main_Controller 
```

我收到一个错误找不到类“Main_Controller”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:31:30.343

使用内置的[核心类扩展机制](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)，如果您适当地命名您的基本控制器类（使用默认前缀`MY_`）并将其放在`application/core`CI 下应该会选择它。

`MY_Controller`设置完成后，您可以让您的子控制器扩展`application/controllers/`它，并`parent::__construct()`在它们的`__construct`.

# javascript - Onclick 功能不运行第一次点击

> ID：15464499
> 
> 赞同：3
> 
> 时间：2013-03-17T18:27:30.253
> 
> 标签：javascript, jquery, html

此功能使用动画从导航滚动到#id，并将其着色为 bg-color color 几秒钟。

这是我用来从导航向下滚动到页面上使用的内容的功能，方法是在锚标记中使用它的 id`<h1 id="#someid">`和属性。`href="#someid"`该功能工作正常，但是，它在加载页面后第一次单击时不起作用。知道如何解决它以及导致它的原因吗？

```
//EXTERNAL JAVASCRIPT

function link(){
          $('a[href^="#"]').click(function() {
              var target = $(this.hash);
              if (target.length == 0) target = $('a[name="' + this.hash.substr(1) + '"]');
              if (target.length == 0) target = $('html');
              $('html, body').animate({ scrollTop: target.offset().top }, 100); 
              target[0].style.backgroundColor = 'red';
              setTimeout(function(){
                  target[0].style.backgroundColor = 'dodgerBlue';
             }, 8000);
              return false;
     });
} 
```

这是我的 HTML，我只是通过将锚点 onclick 属性链接到我的函数来覆盖它`link();`，您可以在此文本上方看到它。

```
//HTML 
<li class="sub-menu-element"><a href="#DERMATOLOG" onclick="javascript:link()">DERMATOLOG</a></li> 
```

有任何想法吗？非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:42:03.153

您正在`link()`从内联 javascript 调用函数并再次调用`link()`函数内部的 click 事件。这没有任何意义，根本不需要......

尝试这个

```
$(function(){ //call the codes after this when document is ready...
  $('a[href^="#"]').click(function() {  //call the click event
          var target = $(this.hash);
          if (target.length == 0) target = $('a[name="' + this.hash.substr(1) + '"]');
          if (target.length == 0) target = $('html');
          $('html, body').animate({ scrollTop: target.offset().top }, 100); 
          target[0].style.backgroundColor = 'red';
          setTimeout(function(){
              target[0].style.backgroundColor = 'dodgerBlue';

         }, 8000);
          return false; 
  });
}); 
```

有了这个..你也不需要onclick内联

```
<li class="sub-menu-element"><a href="#DERMATOLOG">DERMATOLOG</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:53:27.400

试试这个代码：

```
 $(document).ready(function(e){
      $('a[href^="#"]').click(function() {
          var target = $(this.hash);
          if (target.length == 0) target = $('a[name="' + this.hash.substr(1) + '"]');
          if (target.length == 0) target = $('html');
          $('html, body').animate({ scrollTop: target.offset().top }, 100); 
          target[0].style.backgroundColor = 'red';
          setTimeout(function(){
              target[0].style.backgroundColor = 'dodgerBlue';
              return false;
         }, 8000);

      });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:50:02.790

```
$(document).ready(function(){ //call the codes after this when document is ready...
$('a[id="demo"]').click(function() {  //call the click event
      var target = $(this.hash);
      if (target.length == 0) target = $('a[name="' + this.hash.substr(1) + '"]');
      if (target.length == 0) target = $('html');
      $('html, body').animate({ scrollTop: target.offset().top }, 100); 
      target[0].style.backgroundColor = 'red';
      setTimeout(function(){
          target[0].style.backgroundColor = 'dodgerBlue';

     }, 8000);
      return false; 
```

}); });

```
<li class="sub-menu-element"><a href="#" id='demo'>DERMATOLOG</a></li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:34:12.377

该`link`功能仅*设置*滚动事物。因此，在第二次单击时，处理程序将实际执行。

`javascript:`用错误的语法扔掉那个内联处理程序，然后放一个

```
$(document).ready(link); 
```

在您的外部 js 中，它将在加载 DOM 时执行设置功能。另外，我认为您应该将第一`return false;`行从超时移到处理程序。

# ios - MasterDetail 模板中的属性和 ivars

> ID：15464500
> 
> 赞同：2
> 
> 时间：2013-03-17T18:27:31.313
> 
> 标签：ios, objective-c, xcode, cocoa-touch, cocoa

在阅读了 Objective C 中的属性和 ivars 之后，我仍然对 XCode 中 iOS 的 MasterDetail 模板感到困惑。

MasterViewController 为 DetailViewController 声明属性：

```
@class DetailViewController;

@interface MasterViewController : UITableViewController

@property (strong, nonatomic) DetailViewController *detailViewController;

@end 
```

以及用于对象数组的 ivar：

```
@interface MasterViewController () {
    NSMutableArray *_objects;
}
@end 
```

为什么会这样？我只是不明白为什么这两件事的声明方式不同。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:30:08.877

将某物声明为“ `property`”允许其他对象访问和使用它。在上述情况下，将“ `detailViewController`”作为属性添加到 MasterViewController 意味着其他对象可以访问和使用 DetailViewController 公开的方法和属性。

而“ `_objects`”变量是 MasterViewController 的内部（或私有）变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:30:39.367

Apple 的文档通常非常出色。Apple 的模板……有时会受到一些挑战。随着语言的改进（或更新不规律），它们有时也更新缓慢。该`objects`数组实际上应该是私有属性，而不是实现声明的 ivar。无论如何，不​​要对此进行过多的阅读。

请记住，视图控制器甚至不应该保存数据；它应该从模型类（模板不提供）中获取它。其中一些是为了使模板更易于使用（它们实际上不是示例代码；它们是模板）。一些奇怪的代码是由于模板引擎的限制。（他们过去不能给你的类名加上前缀，即使他们告诉你必须给你的类名加上前缀；这很烦人。）

不幸的是，在示例代码中看到某些内容也不一定意味着它是正确的编码方式。Apple 的许多示例代码在生产代码中完全不合适（他们的大多数示例都缺少适当的模型类，或者无法正确处理错误）。但同样，这是示例代码的本质。专注于[编码指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)。它们比从模板和示例中学习更有用。

# c# - MVC3 访问控制器中的存储库

> ID：15464501
> 
> 赞同：1
> 
> 时间：2013-03-17T18:27:43.857
> 
> 标签：c#, asp.net-mvc, repository

谢谢您的帮助！我下面的解决方案已更新为正确答案。

我有一个关于如何访问我的控制器的存储库的简单问题。如果您查看我的 addMovie 方法，我想我可以在控制器继承 IMovieRepository 之后在 ModelState.IsValid 中执行 movies.AddMovie(movie) 。

IMovie 存储库：

```
public interface IMovieRepository : IDisposable
{
    IEnumerable<Movies> GetMovies();
    Movies GetMovieByID(int id);
    void AddMovie(Movies movie);
    void UpdateMovie(Movies movie);
    void DeleteMovie(int id);
    void save(Movies movie);
} 
```

电影资料库：

```
public class MovieRepository : BaseRepository, IMovieRepository
{
    private MovieContext db;

    public MovieRepository(MovieContext repo)
    {
        db = repo;
    }

    public IEnumerable<Movies> GetMovies()
    {
        return db.Movies.ToList();
    }

    public Movies GetMovieByID(int id)
    {
        return db.Movies.Find(id);
    }

    public void AddMovie(Movies movie)
    {
        db.Movies.Add(movie);
    }

    public void UpdateMovie(Movies movie)
    {
        db.Entry(movie).State = EntityState.Modified;
    }

    public void DeleteMovie(int id)
    {
        Movies movie = db.Movies.Find(id);
        db.Movies.Remove(movie);
    }

    public void save(Movies movie)
    {
        if (movie.movieID == 0)
            db.Movies.Add(movie);
        else
            db.Entry<Movies>(movie).State = System.Data.EntityState.Modified;

        db.SaveChanges();
    }
} 
```

NinjectDependencyResolve：

```
Bind<IMovieRepository>().To<MovieRepository>(); 
```

电影控制器：

```
public class MoviesController : Controller
{
    private IMovieRepository movieRepository;

    public MoviesController()
    {
        this.movieRepository = new MovieRepository(new MovieContext());
    }

    public MoviesController(IMovieRepository movieRepository)
    {
        this.movieRepository = movieRepository;
    }
    #region "GET"
    //
    // GET: /Admin/Movies/

    public ActionResult Index()
    {
        return View();
    }
    #endregion

    #region "POST"
    [HttpPost]
    public ActionResult addMovie(Movies movie)
    {
        if (ModelState.IsValid)
        {
            movieRepository.AddMovie(movie);
            movieRepository.save(movie);
            return RedirectToAction("index", "movies");
        }
        return View(movie);
    }
    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:32:11.537

您需要向控制器添加一个构造函数：

```
private IMovieRepository _Repository;

[Inject]
public MovieController(IMovieRepository repository)
{
    _Repository = repository;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:33:43.710

```
private IMovieRepository _repository;

public MoviesController(IMovieRepository repository)
{
  _repository =repository; 
} 
```

使用构造函数注入

# javascript - javascript中的空格

> ID：15464503
> 
> 赞同：1
> 
> 时间：2013-03-17T18:27:54.830
> 
> 标签：javascript, css, space

我有一个小问题。我有一个带有表单输入的代码，但是表单输入类被命名为

`text-input small-input`

由于 CSS 问题，我无法更改它，这就是问题所在，因为当我在我的 javascript 代码中添加空格时，我的代码不再起作用

Javascript代码

```
$(document).ready(function() {
    $('.text-input*small-input').keyup(function() {
        var search_term = $(this) .val();
        $.post('search.php', {search_term:search_term}, function(data) {
            $('.result').html(data);

            $('.result li').click(function() {
                var result_value = $(this).text();
                $('.text-input*small-input') .val(result_value);
                $('.result').html(' ');
            });

        });

    });
}); 
```

所以在*号处，需要有一个空格。有什么办法可以解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:30:28.283

你不想要一个空间，你什么都不想要。只是`.text-input.small-input`告诉选择器引擎寻找具有这两个类的元素。

[这](http://css-tricks.com/multiple-class-id-selectors/)是一篇很好的文章，解释了多部分选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:33:38.303

你有两个问题。你不想要一个空间，你确实想要二等舱上的一个点。

要在 CSS 选择器中为同一对象指定两个类的要求，请在两个类名之间不留空格：

```
$('.text-input.small-input')    // find single object with both classes on it 
```

有了空格，它会做一些不同的事情：

```
$('.text-input .small-input')    // find .small-input with ancestor .text-input 
```

当您在它们之间放置一个空格时，会创建一个选择器，该选择器会找到一个匹配的对象`.text-input`和一个匹配的子对象，而匹配`.small-input`的对​​象就是子对象。它们之间没有空格意味着两个类必须在同一个对象上。这就是 CSS 规范的工作方式，而不是特定于 jQuery 的。

* * *

仅供参考，你试图用这个做什么：

```
$('.text-input small-input')  // find <small-input> with ancestor that is .text-input 
```

试图找到一个带有`<small-input>`ancesotr 的标签的对象，`.text-input`因为您没有在前面放置特殊字符，`small-input`因此它被解释为标签名称。

# meteor - 理解“不允许。不受信任的代码只能按 ID 更新文档。” 流星错误

> ID：15464507
> 
> 赞同：31
> 
> 时间：2013-03-17T18:28:06.657
> 
> 标签：meteor

在[Meteor 0.5.8](http://github.com/meteor/meteor/blob/master/History.md)中引入了以下更改：

> 在不受信任的代码中调用更新和删除集合函数可能不再使用任意选择器。从客户端调用这些函数时（除了在方法存根中），您必须指定单个文档 ID。

因此，现在如果您想从客户端控制台向数据库推送任意更新，您必须执行以下操作：

```
People.update({_id:People.findOne({name:'Bob'})['_id']}, {$set:{lastName:'Johns'}}); 
```

代替：

```
People.update({name:'Bob'}, {$set:{lastName:'Johns'}}); 
```

我认为这个安全问题是通过设置 Meteor.Collection.allow 和 .deny 函数以及自动发布和不安全包来控制的。我喜欢能够从 Chrome JavaScript 控制台与数据库交互。

Meteor 0.5.8 变化的动机是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-17T19:37:05.233

来自[流星博客](http://meteor.com/blog)：

> ## 更改允许/拒绝规则
> 
> 从 0.5.8 开始，仅客户端代码（例如事件处理程序）一次只能更新或删除一个文档，由 _id 指定。方法代码仍然可以使用任意 Mongo 选择器一次操作任意数量的文档。要从事件处理程序运行复杂的更新，只需使用 Meteor.methods 定义一个方法并从事件处理程序调用它。
> 
> 此更改显着简化了允许/拒绝 API，鼓励更好的应用程序结构，避免潜在的 DoS 攻击，其中攻击者可以强制服务器执行大量工作以确定操作是否被授权，并修复了 @ 报告的安全问题jan-glx。
> 
> 要更新您的代码，请将您的允许和拒绝处理程序更改为获取单个文档而不是文档数组。这应该会显着简化您的代码。还要检查您的事件处理程序中是否有任何使用 Mongo 选择器的更新或删除调用（这种情况很少见），如果有，请将它们移动到方法中。有关详细信息，请参阅[更新](http://docs.meteor.com/#update)和[删除](http://docs.meteor.com/#remove)文档。

所以基本上，从我的角度来看，你几乎不希望行为能够在没有任何更具体的知识（如文档的 id）的情况下从客户端更新和删除任意文档集。

当原型设计——我猜这就是你正在做的事情——我想它可能会妨碍你，但是如果你想让你的代码投入生产，我相信利大于弊。这也归结为安全声明 (`allow`和`deny`) 在此更改后更容易指定。

希望能给你更多的信息。

# java - 当我尝试进行计算时，Java 无法识别双精度数

> ID：15464514
> 
> 赞同：0
> 
> 时间：2013-03-17T18:28:46.770
> 
> 标签：java

所以对于这个程序，我必须使用 java GUI 来获取温度和风速，然后从那里计算 Windchill。我有它，所以当用户单击“计算风寒”按钮时，它应该使用我输入的公式来计算它。但是我不断收到围绕这个双重的各种错误，我不知道为什么。您可以在 actionPerformed 部分找到错误，它是“windChillInt”收到此错误。谢谢。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
public class Windchill extends JFrame implements ActionListener{
    private static final int FRAME_WIDTH = 300;
    private static final int FRAME_HEIGHT = 200;
    private static final int FRAME_X_ORIGIN = 150;
    private static final int FRAME_Y_ORIGIN = 250;
    private String degree;
    private String wind;
    private int degreeInt;
    private int windInt;
    private double windChillInt;
    private JButton windButton;
    private JLabel prompt;
    private JLabel prompt1;
    private JTextField inputLine;
    private JTextField inputLine1;

    public Windchill(){
        setTitle("Windchill");
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        setLocation(FRAME_X_ORIGIN, FRAME_Y_ORIGIN);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container contentPane = getContentPane();
        contentPane.setLayout(new FlowLayout());    
        inputLine = new JTextField();
        inputLine.setColumns(3);
        inputLine.addActionListener(this);
        contentPane.add(inputLine);
        prompt = new JLabel();
        prompt.setText("Enter the degrees in Farienheight       ");
        prompt.setSize(150,25);
        contentPane.add(prompt);
        inputLine1 = new JTextField();
        inputLine1.setColumns(3);
        inputLine1.addActionListener(this);
        contentPane.add(inputLine1);

        prompt1 = new JLabel();
        prompt1.setText("Enter the wind speed in MPH");
        prompt1.setSize(150,25);
        contentPane.add(prompt1);

        windButton = new JButton("Calculate windchill");
        contentPane.add(windButton);
        windButton.addActionListener(this);
    }
    public void actionPerformed(ActionEvent event){
        if (event.getSource() instanceof JButton){
            JButton clickedButton = (JButton) event.getSource();
            if (clickedButton == windButton){
                degree = inputLine.getText();
                degreeInt = Integer.parseInt(degree);
                wind = inputLine1.getText();
                windInt = Integer.parseInt(wind);
                windChillInt = 0.08(degreeInt - 91.4)        (3.71*math.sqrt(windInt) + 5.81 - 0.25 *windInt) + 91.4;

            }

        }
    }
    public static void main(String[] args) {
        Windchill frame;
        frame = new Windchill();
        frame.setVisible(true);
    }
} 
```

好的，谢谢大家，我让它工作了，但现在我遇到了另一个问题，它不会像我想要的那样在 GUI 上显示新的 windChillInt。这就是我把它改成的。

```
public void actionPerformed(ActionEvent event){
        if (event.getSource() instanceof JButton){
            JButton clickedButton = (JButton) event.getSource();
            if (clickedButton == windButton){
                degree = inputLine.getText();
                degreeInt = Integer.parseInt(degree);
                wind = inputLine1.getText();
                windInt = Integer.parseInt(wind);
                windChillInt = 0.08 * (degreeInt - 91.4)*(3.71* (Math.sqrt(windInt)) + 5.81 - 0.25 *windInt) + 91.4;

                prompt2 = new JLabel();
                prompt2.setText("The windchill is " + windChillInt);
                prompt2.setSize(150,25);
                Container contentPane = getContentPane();
                contentPane.setLayout(new FlowLayout());
                contentPane.add(prompt2);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:32:25.313

我相信问题出在这条线上：

```
windChillInt = 0.08(degreeInt - 91.4)        (3.71 * math.sqrt(windInt) + 5.81 - 0.25 *windInt) + 91.4; 
```

* * *

`windChillInt = 0.08(degreeInt - 91.4)`应该是`windChillInt = 0.08 * (degreeInt - 91.4)`。

然后，您要么需要相乘`windChillInt = 0.08 * (degreeInt - 91.4)`并加`(3.71 * math.sqrt(windInt) + 5.81 - 0.25 *windInt) + 91.4`在一起，要么`(3.71 * math.sqrt(windInt) + 5.81 - 0.25 *windInt) + 91.4`向下移动到它自己的语句并将其分配给某些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:32:35.317

将运算符放在两个表达式之间。

例如

```
result = exp1 operator exp2 
```

在你的情况下

```
windChillInt = 0.08 * (degreeInt - 91.4) * (3.71*math.sqrt(windInt) + 5.81 - 0.25 *windInt) + 91.4; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:33:10.707

你有一个语法错误： `0.08(degreeInt - 91.4)`。您是否缺少乘法运算符？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T04:56:44.513

好吧，考虑到您尚未发布错误消息，我假设问题是语法错误，`unexpected token '('`可能是关于 的？我没有尝试编译和运行它，但是根据代码，问题似乎是你通过简单地在它旁边写它来乘以，然后用两个括号表达式再次做同样的事情`0.08`。`degreeInt - 91.4`

从概念上讲，这很好，但不幸的事实是大多数编程语言都不是数学。即使您习惯于`2x`整天编写使用表达式的方程式，在 Java、C、C++、Python、Ruby 或您能想到的任何其他语言的世界中（Mathematica 除外，它旨在支持语法这反映了数学符号），您必须改为编写`2 * x`。

我会更换

```
windChillInt = 0.08(degreeInt - 91.4)        (3.71*math.sqrt(windInt) + 5.81 - 0.25 *windInt) + 91.4;` 
```

和

```
windChillInt = 0.08 * (degreeInt - 91.4) * (3.71 * math.sqrt(windInt) + 5.81 - 0.25 * windInt) + 91.4; 
```

我还清理了一些格式。当你刚开始时，像

```
0.25 *windInt 
```

很好，但是随着您的代码库变得越来越大，您将希望能够快速浏览您的任何代码，而不会暂时被它的编写方式所迷惑。选择一些你喜欢的格式约定，并坚持下去。要么*总是*写`x*y`，要么*总是*写`x * y`，但不能两者兼而有之，并且远离`x *y`,`x* y`或任何其他类似的东西。我还注意到您在行中间添加了一个制表符，可能是因为它看起来像一个带有您正在使用的缩进设置的空格。没什么大不了的，但有点奇怪。

另外，我知道这是您关于堆栈溢出的第一个问题，所以我不想太苛刻，但下次尝试只关注导致问题的代码，如果人们需要更多信息，请提供其余部分编码。不要只是给他们一堵文字墙并要求他们在其中扎根以寻找错误。此外，错误消息对试图诊断问题的人非常有帮助，所以下次也考虑发布。

最后，我在您的代码中看到了一堆数字常量。我对 Windchill 背后的数学了解不多，所以我不确定将这些更改为其他值是否有意义，但一般来说，采用任何可能在代码中更改的常量并放入它们在某处的变量中。

“可以改变的常数是什么意思？根据定义，常数不是常数吗？” 有时，如果你修改了某些数字，它们仍然是有意义的。例如，如果您正在编写游戏，则在计算中包含地球上的重力

```
// assuming yVelocity is in meters/second
yVelocity = yVelocity - 9.8 * timeElapsedThisFrame; 
```

你现在有一个问题，因为如果你想改变游戏以在火星上设置一个关卡，你必须找到你指定重力的地方并添加类似这样的东西

```
if (planet == EARTH) {
    yVelocity = yVelocity - 9.8 * timeElapsedThisFrame;
} else if (planet == MARS) {
    yVelocity = yVelocity - /* whatever the gravity is on mars */ * timeElapsedThisFrame;
} 
```

这很快变得非常笨重且难以维护，更好的解决方案是从一开始就用变量替换重力常数

```
// at the top of your class:
double forceOfGravity = 9.8;
// in your "move" method:
yVelocity = yVelocity - forceOfGravity * timeElapsedThisFrame; 
```

如果你想改变重力，这非常简单。这是一个可以改变的常数的例子。

我建议对`0.08`, `91.4`, `3.71`, `5.81`, `0.25`, 和做同样的事情`91.4`。我不知道这些数字是什么，但可能其中一些与气压有关，在这种情况下，您的应用程序将无法在珠穆朗玛峰上运行，或者可能与人体温度有关，其中万一您的应用程序不适用于猫。我对问题域了解不多，但这些做法总是一个好主意。此外，它们使代码更具可读性，因为常量的名称描述了它们的作用。

无论如何，你是新人，你正在学习，那太好了！快乐编码！

# php - 使用com编辑word文档

> ID：15464515
> 
> 赞同：0
> 
> 时间：2013-03-17T18:28:51.893
> 
> 标签：php, ms-word

使用以下代码

```
<?php
$test="C:/wamp/www/test.doc";
com_load_typelib('Word.Application');
$word = new COM("word.application");
$word->Documents->Open($test);
$word->Visible = 1;
$word->ActiveDocument->FormFields("Text1")->Result = "test";
$word->ActiveDocument->Close(false);
$word->Quit();
unset($word);
?> 
```

我遇到以下问题 ![在此处输入图像描述](../Images/dededa9cc4e8b7006ebe8790250bf778.png)

第7行是 `$word->ActiveDocument->FormFields("Text1")->Result = "test";` 什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T14:51:16.953

我们在 Windows 7 上使用 wamp 时遇到了同样的问题。我们最终通过执行此 php.net 评论中给出的操作解决了这个问题（尽管它们应该对 IIS 有用）： http: [//php.net/manual/en /class.com.php#90814](http://php.net/manual/en/class.com.php#90814)

我在这里复制主要部分以防原始评论消失：

*   执行“dcomcnfg”
*   打开组件服务 > 计算机 > 我的电脑 > DCOM 配置
*   搜索 Microsoft Office Word 97-2003 文档（它会像这样翻译成您的语言，所以花点时间搜索一下）
*   右键单击它并打开属性
*   选择“身份”选项卡
*   通常这被设置为“启动用户”。您必须将其更改为“交互式用户”或您选择的管理员用户。
*   应用这些新设置并测试您的 COM 应用程序。它现在应该可以正常工作了。

# c# - 模型上的字符串集合属性未在数据库中创建

> ID：15464519
> 
> 赞同：0
> 
> 时间：2013-03-17T18:29:09.677
> 
> 标签：c#, entity-framework, code-first

我创建了一个名为`Tag`.

```
public class Tag
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int TagId { get; set; }

    public string Name { get; set; }

    public virtual ICollection<string> Synonyms { get; set; }
} 
```

我如何将`Synonyms`属性放入数据库？

我必须为它创建一个模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:38:24.027

是的，您必须创建一个`Model`，也许这样做：

```
public class Tag
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int TagId { get; set; }

    public string Name { get; set; }

    public virtual ICollection<Synonym> Synonyms { get; set; }
} 
```

然后你的同义词模型：

```
public class Synonym
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [HiddenInput(DisplayValue = false)]
    public int SynonymId { get; set; }

    [ForeignKey("Tag"), DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int TagId { get; set; }

    public string Name { get; set; }

    public virtual Tag Tag { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:39:36.067

您必须将其包装在实体类中

例如

```
public class Synonym
{
  int SynonymId {get; set;}
  string Synonym {get; set;}
} 
```

或将您的收藏展平为单独的字符串字段

例如：

```
public class Tag
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int TagId { get; set; }

    public string Name { get; set; }
    public string SynStore {get; set;}
    public IEnumerable<string> Synonyms 
{
    set { SynStore = String.Join(',', value);}
    get{ return SynStore.split(','); }
}
} 
```

# node.js - 带有 socket.io 和 redis 存储的 Nodejs express 应用程序 - 为什么有超过 1 个到 Redis 的连接

> ID：15464525
> 
> 赞同：1
> 
> 时间：2013-03-17T18:29:41.890
> 
> 标签：node.js, express, redis, socket.io, node-redis

我有一个使用 Redis 进行会话存储的 express 应用程序（特别是 express.io - 一个结合 express 和 socket.io 以方便使用的存储库）。

在我的开发机器上，当我启动我的应用程序时，它似乎与 Redis 建立了多个 (7) 连接。为什么是这样？

![在此处输入图像描述](../Images/f3926a3c5b915bc16a5505ec3cdbf4f4.png)

更新：这是我从 redis-cli MONITOR 看到的输出 ![在此处输入图像描述](../Images/a19c8737e19606146d71712833ddcf91.png)

# user-interface - GtkD 中的 MainWindows show() 和 showAll() 方法有什么区别？

> ID：15464526
> 
> 赞同：4
> 
> 时间：2013-03-17T18:29:46.007
> 
> 标签：user-interface, d, gtkd

这是我的测试：

```
import gtk.Main;
import gtk.MainWindow;
import gtk.Label;

void main(string[] args)
{
    Main.init(args);
    auto window = new MainWindow("My Window");
    window.add(new Label("Label1"));
    window.show();
    Main.run();
} 
```

当我用它替换`Main.show()`时，`Main.showAll()`它按预期工作，但是我在这里找不到任何一个函数的任何文档：[http](http://api.gtkd.org/src/gtk/MainWindow.html) ://api.gtkd.org/src/gtk/MainWindow.html这两种方法有什么区别，在哪里可以我找到文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T18:57:46.830

这些来自官方 GTK+ 文档的链接应该会有所帮助：[`gtk_widget_show`](https://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-show), [`gtk_widget_show_all`](https://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-show-all). 简而言之，`show`仅显示调用它的小部件，并且`show_all`在应用于容器时，递归地显示该容器中的所有小部件。

GtkD 的 API 文档非常差，几乎不可能使用，尽管这似乎不是 GtkD 的问题，而是 D 工具的问题。您所指的方法是在`GtkWidget`类上定义的，但不幸的是[页面`gtk.Widget`](http://api.gtkd.org/src/gtk/Widget.html)是空的（大部分）。

# objective-c - Objective C JSON获取数组中字段的值

> ID：15464527
> 
> 赞同：0
> 
> 时间：2013-03-17T18:30:05.883
> 
> 标签：objective-c, arrays, json

我有一个数组（称为结果）：

```
@interface FourViewController : UIViewController
{    
    NSArray *results;
    NSMutableData *data;
}

NSURL *url = [NSURL URLWithString:@"http://website/json.php"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[[NSURLConnection alloc] initWithRequest:request delegate:self];

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    data = [[NSMutableData alloc] init];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    results = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
} 
```

当我运行这个 for 循环时，它会正确返回数组中的所有键，其中每个 JSON 字符串位于：

```
int i;

for (i = 0; i < [results count]; i++) {
     NSLog(@"Result: %i = %@", i, results[i]);
} 
```

但是在 for 循环中我需要这样的东西，但我找不到文档来做到这一点：

```
int i;

for (i = 0; i < [results count]; i++) {
    location.latitude = results[i][lat];
    location.longitude = results[i][long];
    myAnn.coordinate = location;
    myAnn.title = results[i][title];
    myAnn.subtitle = results[i][strap];
    [locations addObject:myAnn];
} 
```

lat、long、title 和 strap 都是 JSON 键/ID，但我无法访问它们；有没有办法让我访问数组内每次迭代中的每个键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:36:40.727

```
location.latitude = (double)[[[results objectAtIndex:i] objectForKey:lat] floatValue];
location.longitude = (double)[[[results objectAtIndex:i] objectForKey:long] floatValue]; 
```

希望这可以帮助...

```
myAnn.title = (double)[[[results objectAtIndex:i] objectForKey:title] floatValue];
myAnn.subtitle = (double)[[[results objectAtIndex:i] objectForKey:strap] floatValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:35:07.937

当您提到“钥匙”一词时，我认为您的答案已经差不多了。

数组中的每个对象都是“”对象的可能性很高（我需要通过将代码放入测试项目来验证这一点），`NSDictionary`您可以从中获取“ `lat`”、“ `long`”、“ `title`”键的值。

# php - PHP 连接到远程 MySQL 服务器

> ID：15464529
> 
> 赞同：3
> 
> 时间：2013-03-17T18:30:12.097
> 
> 标签：php, mysql, pdo

当我尝试通过远程 MySQL 服务器上的本地计算机的 shell 进行连接时，我可以成功连接：

```
> mysql -h remotehost -u myuser -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g. 
```

但是当我尝试使用 PHP 脚本连接时

```
$serverName = "remotehost"; // here I put the actual IP address
$userName = "myuser";
$passCode = "actualpassword";
mysql_connect($serverName,$userName,$passCode); 
```

我收到以下错误

> 警告：mysql_connect()：用户“myuser”@“localhost”的访问被拒绝（使用密码：是）

远程MySQL服务器版本为5.1.52，本机PHP版本为5.3.10-1ubuntu3.4

我发现了一个类似的问题，但答案并没有解决我的问题： [problem connected to remote mysql database using php](https://stackoverflow.com/questions/6445293/problem-connecting-to-remote-mysql-database-using-php)

我真的很感激一些帮助！

**编辑**：

**的输出** `php -i | grep "mysql"`

```
/etc/php5/cli/conf.d/mysql.ini,

/etc/php5/cli/conf.d/mysqli.ini,

/etc/php5/cli/conf.d/pdo_mysql.ini

mysql

MYSQL_SOCKET => /var/run/mysqld/mysqld.sock

MYSQL_INCLUDE => -I/usr/include/mysql

MYSQL_LIBS => -L/usr/lib/i386-linux-gnu -lmysqlclient_r

mysql.allow_local_infile => On => On

mysql.allow_persistent => On => On

mysql.connect_timeout => 60 => 60

mysql.default_host => no value => no value

mysql.default_password => no value => no value

mysql.default_port => no value => no value

mysql.default_socket => /var/run/mysqld/mysqld.sock => /var/run/mysqld/mysqld.sock

mysql.default_user => no value => no value

mysql.max_links => Unlimited => Unlimited

mysql.max_persistent => Unlimited => Unlimited

mysql.trace_mode => Off => Off

mysqli

MYSQLI_SOCKET => /var/run/mysqld/mysqld.sock

mysqli.allow_local_infile => On => On

mysqli.allow_persistent => On => On

mysqli.default_host => no value => no value

mysqli.default_port => 3306 => 3306

mysqli.default_pw => no value => no value

mysqli.default_socket => /var/run/mysqld/mysqld.sock => /var/run/mysqld/mysqld.sock

mysqli.default_user => no value => no value

mysqli.max_links => Unlimited => Unlimited

mysqli.max_persistent => Unlimited => Unlimited

mysqli.reconnect => Off => Off

PDO drivers => mysql

pdo_mysql

pdo_mysql.default_socket => /var/run/mysqld/mysqld.sock => /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T13:55:13.910

Use `SHOW GRANTS` to see if the user you are trying to login with has permission to connect from the web server's IP or domain name.

```
mysql> SHOW GRANTS;
+----------------------------------------------------------------------------------------------------------------------------------------+
| Grants for root@localhost                                                                                                              |
+----------------------------------------------------------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY PASSWORD '*6381FFD48B21F7ED17AE12AF4F8BE4458F4B0AC7' WITH GRANT OPTION |
+----------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

Use the `GRANT` command to give remote access to your *web user*, so to speak. Something like this.

```
mysql> GRANT SELECT ON database.table TO 'myuser'@'web_server_IP_or_domain_name' IDENTIFIED BY 'actualPassword'; 
```

Reference the MySQL 5.1 manual for exact syntax. [MySQL 5.1 Manual: GRANT](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:42:42.320

您需要允许远程访问 mySQL（在您拥有 mySQL 数据库的服务器上）。如果您使用的是 CPanel 或 Plesk，您可以在控制面板中进行操作。我遇到了这个问题，显然 mySQL 默认配置是只允许本地主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:43:07.417

您需要授予该用户访问权限，以便您的服务器的 IP 地址可以访问该用户。MySQL 用户经常被锁定到本地主机。

一个快速的方法是查看表`mysql.users`并查看该用户是否被锁定到本地主机。

有许多不错的 GUI 可以帮助添加主机，但最手动的方法可能是向数据库添加另一行。您可以将主机更改为 '%' 以进行测试，但这会打开一些东西并且不太安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:36:33.793

您是否发布了实际代码？如果是这样，您忘记将字符串括在引号中：

```
$serverName = "remotehost"; // here I put the actual IP address
$userName   = "myuser";
$passCode   = "actualpassword";
mysql_connect($serverName,$userName,$passCode); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T18:35:26.767

在继续之前，请确认 $serverName 变量确实是远程地址，主机名或 IP 地址。然后...

*   确保您已在 SQL 服务器上启用远程访问。有关详细信息，请参阅此链接：[http ://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)
*   确保您已告知远程 MySQL 服务器允许本地 IP 地址访问。
*   确保用户名和密码正确。

# php - 内部连接删除不起作用

> ID：15464532
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:30:12.857
> 
> 标签：php, html, mysql, inner-join, sql-delete

我正在尝试同时删除患者记录和与其患者 ID 相关的任何约会，但两者都不起作用，有人可以告诉我哪里出错了吗？

我的代码是：

```
<?php
include("includes/staffmenu.php");
include("includes/staffsession.php");
@require_once("includes/dbconfig.inc");

$patid = $_GET['patid'];

$patientname = mysql_query("SELECT * From patient WHERE Patient_ID=$patid");
    while($row = mysql_fetch_array($patientname))
        {   $pfname=$row['Patient_First_Name'];
            $pmname=$row['Patient_Middle_Name'];
            $psname=$row['Patient_Surname'];
        }

  echo "<h1>Success $pfname $pmname $psname (Patient ID: $patid) has been removed from our database, along with any appointments in their name</h1>";

    mysql_query("DELETE FROM appointment, patient 
    USING patient INNER JOIN appointment ON (patient.Patient_ID = appointment.Patient_ID) 
    WHERE patient.Patient_ID='$patid'");

  ?> 
```

它肯定会得到患者 ID，因为患者 ID 的名称呼应得很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:52:11.637

```
DELETE patients, appointments FROM patients
LEFT JOIN appointments USING(Patient_ID)
WHERE Patient_ID = 1 
```

参考[http://dev.mysql.com/doc/refman/5.5/en/delete.html](http://dev.mysql.com/doc/refman/5.5/en/delete.html)

附言。考虑使用参数来传递 patid，因为您正在使用直接来自 GET 的值打开自己的 sql 注入

[http://php.net/manual/en/mysqli-stmt.bind-param.php](http://php.net/manual/en/mysqli-stmt.bind-param.php)

pps。你也应该把回声放在最后，因为你当时还没有真正删除:)

# r - which.min 在 reshape2 的 dcast() 中？

> ID：15464544
> 
> 赞同：0
> 
> 时间：2013-03-17T18:30:55.870
> 
> 标签：r, plyr, reshape, reshape2

我想提取与每个建筑月组合中 var1 的最小值相对应的 var2 的值。这是我的（假）数据集：

```
 head(mydata)

 #  building month      var1     var2
 #1        A     1 -26.96333 376.9633
 #2        A     1 165.38759 317.3993
 #3        A     1  47.46345 271.0137
 #4        A     2  73.47784 294.8171
 #5        A     2 107.80130 371.7668
 #6        A     2  10.16384 308.7975 
```

可重现的代码：

```
## create fake data set:
set.seed(142)
mydata1 = data.frame(building = rep(LETTERS[1:5],6),month = sort(rep(1:6,5)),var1=rnorm(30,50,35),var2 = runif(30,200,400))
mydata2 = data.frame(building = rep(LETTERS[1:5],6),month = sort(rep(1:6,5)),var1=rnorm(30,60,35),var2 = runif(30,150,400))
mydata3 = data.frame(building = rep(LETTERS[1:5],6),month = sort(rep(1:6,5)),var1=rnorm(30,40,35),var2 = runif(30,250,400))
mydata = rbind(mydata1,mydata2,mydata3)
mydata = mydata[ order(mydata[,"building"], mydata[,"month"]), ]
row.names(mydata) = 1:nrow(mydata)

## here is how I pull the minimum value of v1 for each building-month combination:
require(reshape2)
m1 = melt(mydata, id.var=1:2)
d1 = dcast(m1, building ~ month, function(x) min(max(x,0), na.rm=T),
           subset = .(variable == "var1")) 
```

这会为每个建筑月组合提取 var1 的最小值......

```
head(d1)

#  building         1         2        3         4         5         6
#1        A 165.38759 107.80130 93.32816  73.23279  98.55546 107.58780
#2        B  92.08704  98.94959 57.79610  94.10530  80.86883  99.75983
#3        C  93.38284 100.13564 52.26178  62.37837  91.98839  97.44797
#4        D  82.43440  72.43868 66.83636 105.46263 133.02281  94.56457
#5        E  70.09756  61.44406 30.78444  68.24334  94.35605  61.60610 
```

但是，我想要的是一个与 d1 完全相同的数据框，它显示 var2 的值，该值对应于拉取的最小值`var1`（如上所示`d1`）。我的直觉告诉我它应该是 的变体`which.min()`，但还没有让它与`dcast()`or一起使用`ddply()`。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:36:57.147

一步可能有可能，但我对 plyr 比 reshape2 更熟悉，

```
dcast(ddply(mydata, .(building, month), summarize, value = var2[which.min(var1)]), 
      building ~ month) 
```

# linux - 如何删除 DNS、bind9 中的查询“NULL”和“WKS”？

> ID：15464545
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:31:07.720
> 
> 标签：linux, bind

我的问题是，通过桌面程序“你的自由”正在浏览 dns。

我的 DNS 服务器有 iptables，隔离在 ubuntu 服务器 10.04.4 的服务器上。

日志是 dns (query.log)：

```
**IN ANY**

17-Mar-2013 00:46:09.948 client 192.168.5.35#63175: query: ems07.your-freedom.de IN ANY + (192.168.1.9)

**IN NULL**

17-Mar-2013 01:09:41.972 client 192.168.5.35#61993: query: cF.U3lL1bd3QrllYjXCBUT53dE5GmCV18qvsv7ZqXzm96K4aoF9EHnPw7x1xq6LbYu.UKLkXn9UdIV0LrAfe5m0RSrDSlS57oQlZ5ouMasvIYD8NPxWSX0dBk87KnyRUYw.RS1IYgcG25jRUst7sADK86a1gSbvXG6IPj8NOKHrJvkQzaQJUAAR1kXcUTr.s07.1yf.de IN NULL +E (192.168.1.9)
17-Mar-2013 01:09:42.255 client 192.168.5.35#61994: query: cF.UDmlC8KJRLtiZBBzapjRbkuTOGgBVi1GvwlXIPf6dxoYdsF9EHnPw7x1xq6LbYu.Uugjw3kSv1tvyzYV8ZDTOyEQ7EDBSzfbqAkkOsoU4GZXcjzcMkal15cQAR6MDqy.R6T9ThodZFYlUPhflwDHU9queHLMYezYWPX9tBjavp6VID4pYS3UpoLmIJj.s07.1yf.de IN NULL +E (192.168.1.9)
17-Mar-2013 01:09:42.370 client 192.168.5.35#61994: query: cF.UDmlC8KJRLtiZBBzapjRbkuTOGgBVi1GvwlXIPf6dxoYdsF9EHnPw7x1xq6LbYu.Uugjw3kSv1tvyzYV8ZDTOyEQ7EDBSzfbqAkkOsoU4GZXcjzcMkal15cQAR6MDqy.R6T9ThodZFYlUPhflwDHU9queHLMYezYWPX9tBjavp6VID4pYS3UpoLmIJj.s07.1yf.de IN NULL +E (192.168.1.9)

**IN WKS**

17-Mar-2013 00:51:25.581 client 192.168.5.35.#61646: query: aD.Dw6Frkm3B6M0DSqer4hsquc3ikieVVCwnFOPygtO.s07.1yf.de IN WKS +E (192.168.1.9)
17-Mar-2013 00:51:25.592 client 192.168.5.35#61651: query: aD.D10EGWGYiyd8Zk0j5dLxPr3DlkieVVCwnFOPygtO.s07.1yf.de IN WKS +E (192.168.1.9)
17-Mar-2013 00:52:53.997 client 192.168.5.35#61694: query: bU.UmW0ZpDeMopiCIrS3263my9jdVuTsjwWVNQgRFl4ANMb2JavJU0py0bG6RCkU4u.UnGuqzINLRihL183WKS4w743SsdWYoyUTN9LSVCP9bYMkLdAJbt07QK4DvXfPLh.g4IPH2vOfb.s07.1yf.de IN NULL +E (192.168.1.9)
17-Mar-2013 01:04:22.474 client 192.168.5.35#61934: query: test.s07.1yf.de IN WKS +E (192.168.1.9)
17-Mar-2013 01:07:41.281 client 192.168.5.35#61956: query: test.s07.1yf.de IN WKS +E (192.168.1.9) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:29:23.417

在当前的**Bind**状态下没有。

有关更多信息，请参阅[此](https://serverfault.com/questions/488949/bind9-how-stop-to-answer-specific-queries)答案。

# java - 通过检查 HSV 颜色，图片中最常用的色调

> ID：15464548
> 
> 赞同：1
> 
> 时间：2013-03-17T18:31:21.227
> 
> 标签：java, android, image-processing, hsv

我希望你能帮助我。

我正在 Android 中拍照，生成缩略图，然后使用此缩略图分析像素以获得最常用的色调。

我认为使用 RGB 很难对它们进行分组，所以我将每个像素颜色都变成了 HSV 颜色。如您所见，我使用 Float3，因此它`hsv.x`与`hsv.h`、`hsv.y`is`hsv.s`和`hsv.z`equals相同`hsv.v`。

`scores`是一个`int[]`数组，我在那里存储每个色调的像素数量。该算法在寻找蓝色调（海蓝宝石、浅蓝色和深蓝色）时效果很好，但很难识别单色（它将它们移至黄色分数）和暖色（它将橙色与黄色“混淆”）。另外，作为最后一个问题，我不知道如何识别棕色（这是我认为我错过的最后一个“大颜色”。算法如下：

```
for (Float3 hsv: hsvs) {
    if(hsv.y < 0.15)
    {
        if(hsv.z < 0.2)
            scores[BLACK]++;
        else if(hsv.z < 0.6)
            scores[GREY]++;
        else
            scores[WHITE]++;
    }
    else if (hsv.x < 15f || hsv.x > 345f)
        scores[RED]++;
    else if (hsv.x < 40)
        scores[ORANGE]++;
    else if (hsv.x < 70)
        scores[YELLOW]++;
    else if (hsv.x < 120)
        scores[GREEN]++;
    else if (hsv.x < 160)
        scores[AQUAMARINE]++;
    else if (hsv.x < 200)
        scores[LIGHT_BLUE]++;
    else if (hsv.x < 240)
        scores[DARK_BLUE]++;
    else if (hsv.x < 300)
        scores[PURPLE]++;
    else
        scores[PINK]++;
} 
```

您认为我可以通过更改一些数字来改进算法，还是应该从不同的方法开始？

**编辑：**

让我把你放在上下文中。我的应用程序拍摄一张照片，抓取一个方形缩略图（出于实际原因）并分析生成的图片。因为它是一个拇指，它会丢失一些细节和尺寸（比如我创建了 200x200 像素的拇指），所以在我的特殊情况下，总是会有 40000 像素。我对这张图片所做的是检查最常用的色调。

在大多数情况下，我将它们定义为**出现在超过 3000 像素**（约 7.5% 的图像）中的色调。我没有对它们进行排名，我只是检查了一些以任意颜色命名的复选框（可能是显示给您的颜色加上棕色）。然后，用户选中或取消选中他认为合适的颜色。事实上，正如 Geobits 所指出的，这是一个人类问题，**最常用的颜色并不意味着最相关的颜色**。这就是为什么这个工具不需要完美，只是为了避免在选择完全不适合包装的颜色时失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:31:50.093

如果我这样做，而不是让每个像素落入几个桶中的一个，我会看到每种色调与每种颜色的距离。例如，您可以从每个“目标色调”中获取差异，然后总结所有差异。循环遍历所有像素后总数最低的那个应该是“最常用的”。当然，它并不完美，但命名颜色对于计算机来说并非易事。

例如，要获得“绿色”的总数（我的任意世界中的色调 120）：

```
float runningTotalForGreen = 0;
for(Float3 hsv: hsvs) 
{
    float diff = (hsv.x - 120) % 180; // mod 180 to normalize cw/ccw on the wheel
    runningTotalForGreen += diff; // lower = closer to green
} 
```

您可能希望将目标颜色和总数存储在数组中以便于循环，但这是一般的想法。

**编辑：**

我认为这会比“桶”更好的原因是：考虑一张图片，其中大约 35% 的图片是红色的。其他 65% 位于浅蓝色/深蓝色边界的某个位置。因此，假设 34% 属于浅蓝色桶，31% 属于深蓝色。你的方法说它是红色的，因为 35% 大于两者。使用色调差异很可能会返回其中一种蓝色。

当然，大多数方法都会有*一些*它失败的图像。关键是找到错误最少的那个。这在很大程度上取决于它是什么类型的图像。我同意您需要对某些颜色（黑色/白色/棕色/等）进行特殊处理。

* * *

这里的主要问题是这是一个人的问题。对于我上面的示例图像，有些人会说浅蓝色。有人会说深蓝色。有些人甚至可能会说红色，这取决于它的生动/对比程度，特别是如果蓝色是背景，前面是红色。除非它基本上是单色的，否则说“这张图片是*x*颜色”是不一致的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:24:02.960

不能说这是否是一个好方法。[在颜色名称](http://www.workwithcolor.com/color-names-01.htm)上查看此页面。当您单击色轮中的颜色时，它将为您提供用于定义颜色名称的色调范围。

# mysql - 如何优化此查询，因为 in 数组似乎会显着减慢速度

> ID：15464552
> 
> 赞同：0
> 
> 时间：2013-03-17T18:31:53.763
> 
> 标签：mysql, optimization

我正在寻找优化这样的查询的最佳方法：

```
SELECT
  a.ID,
  a.ECPCodeID,
  a.RegDate,
  a.BusName,
  a.City,
  a.AccountNum,
  b.ID         as RepCodeID,
  b.RepCode
FROM ECPs_Registration a,
  Reps_Codes b
WHERE (SUBSTR(a.PostalCode,1,5)IN(SELECT
                    SUBSTR(Zip,1,5)
                  FROM Reps_Zip
                  WHERE RepCodeID = b.ID)
       AND a.AccountNum NOT IN(SELECT
                 ShipTo
                   FROM Reps_ShipTo))
     OR a.AccountNum IN(SELECT
              ShipTo
            FROM Reps_ShipTo
            WHERE RepCodeID = b.ID)
ORDER BY b.RepCode,a.BusName,a.City 
```

我知道还有更多因素涉及，例如索引等，我现在只是询问它的查询部分。主要是因为我必须通过 Reps_ShipTo 和 Reps_Zip 表来获取大量记录。我想过改变类似的东西：

```
a.AccountNum NOT IN (SELECT ShipTo FROM Reps_ShipTo)
INTO
(SELECT count(*) FROM Reps_ShipTo WHERE a.AccountNum = ShipTo) = 0 
```

不确定这是否正确或是否有更好的方法。任何帮助，将不胜感激。谢谢。

编辑：

架构：

```
CREATE TABLE IF NOT EXISTS `ECPs_Codes` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ECPCode` char(4) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ECPCode` (`ECPCode`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ;

CREATE TABLE IF NOT EXISTS `ECPs_Registration` (
  `RegDate` datetime NOT NULL,
  `ID` int(10) NOT NULL AUTO_INCREMENT,
  `ECPCodeID` int(11) NOT NULL,
  `FirstName` varchar(200) NOT NULL,
  `LastName` varchar(200) NOT NULL,
  `BusName` varchar(200) NOT NULL,
  `Address` varchar(200) NOT NULL,
  `Address2` varchar(200) NOT NULL,
  `City` varchar(100) NOT NULL,
  `Province` char(2) NOT NULL,
  `Country` varchar(100) NOT NULL,
  `PostalCode` varchar(10) NOT NULL,
  `Email` varchar(200) NOT NULL,
  `AccountNum` int(8) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ECPCodeID` (`ECPCodeID`),
  KEY `PostalCode` (`PostalCode`),
  KEY `AccountNum` (`AccountNum`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `Reps_Codes` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(50) NOT NULL,
  `RepCode` varchar(16) NOT NULL,
  `AllAccess` tinyint(4) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `RepCode` (`RepCode`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `Reps_ShipTo` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `RepCodeID` int(11) NOT NULL,
  `ShipTo` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `RepID` (`RepCodeID`),
  KEY `ShipTo` (`ShipTo`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE IF NOT EXISTS `Reps_Zip` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `RepCodeID` int(11) NOT NULL,
  `Zip` varchar(10) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `RepCodeID` (`RepCodeID`),
  KEY `Zip` (`Zip`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:39:24.540

有两件事会严重损害您的查询性能。

1.  您通过组合多个条件来连接两个表，每个条件都需要子查询
2.  您正在使用 SUBSTR(Zip,1,5)=SUBSTR(postalcode,1,5) 对两个表进行连接

您的查询背后的逻辑似乎是这样的：

> 对于每个 使用以下规则`ECPs_Registration`找到匹配记录：`Rep_Codes`
> 
> *   如果 , 中存在匹配记录`Reps_ShipTo`，则用于该注册，使用该表查找（主要匹配）
> *   如果 中没有匹配的记录`Reps_ShipTo`，则通过`Reps_Zip`Zipcode-match (secondary) 寻找匹配的 RepCode

现在，如果以上完全描述了您的情况，您可能应该从重新设计数据库开始。

该表在和`Reps_ShipTo`之间创建 0:N 关系。这样的关系不需要额外的表 - 它们可以简单地存储为可为空的外键 - 在您的情况下， a in可以解决问题，并且会从数据库中删除整个 Reps_ShipTo 表。`ECPs_Registration``Rep_Codes``RepCodeId``ECPs_Registration`

您可能还应该创建（是的，冗余的）额外列，仅将邮政编码的前 5 个字母存储在`ECPs_Registration`和中`Reps_Zip`。这将允许简单的相等匹配而不是 SUBSTR 函数。或者，您可能决定对每条记录只进行一次匹配，并将结果存储在上面`RepCodeId`，这*完全消除*了双重连接。

以下查询假设您出于某种原因不想或无法更改您的数据库：

```
SELECT 
  a.ID,  a.ECPCodeID,  a.RegDate,  a.BusName,  a.City,  a.AccountNum,
  CASE (b1.ID IS NOT NULL, b1.ID, b2.ID) as RepCodeID,
  CASE (b1.ID IS NOT NULL, b1.RepCode, b2.RepCode) as MyRepCode
FROM ECPs_Registration a
    LEFT JOIN Reps_ShipTo  ON (Reps_ShipTo.Shipto=a.AccountNum)
    LEFT JOIN Rep_Codes b1 ON (b1.ID=Reps_ShipTo.RepCodeId)
    LEFT JOIN Reps_Zip     ON (SUBSTR(Zip,1,5)=SUBSTR(a.postalcode,1,5))
    LEFT JOIN Rep_Codes b2 ON (b2.ID=Reps_Zip.RepCodeID)
ORDER BY MyRepCode,a.BusName,a.City 
```

如果没有您的数据库架构和示例数据，我无法测试上述查询是否真的有效并且与您的原始结果相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:08:59.953

```
SELECT
  a.ID,
  a.ECPCodeID,
  a.RegDate,
  a.BusName,
  a.City,
  a.AccountNum,
  b.ID         as RepCodeID,
  b.RepCode
FROM ECPs_Registration a,   Reps_Codes b
INNER JOIN Reps_Zip as r on SUBSTR(a.PostalCode,1,5) = SUBSTR(r.Zip,1,5)
LEFT JOIN Reps_ShipTo as rs on a.AccountNum = rs.ShipTo
LEFT JOIN ShipTo as s on a.AccountNum = s.ShipTo
WHERE (s.id is null or rs.id is null) 
ORDER BY b.RepCode,a.BusName,a.City 
```

# c# - 整数列表转换为整数数组

> ID：15464554
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:31:56.120
> 
> 标签：c#

我在一个变量中将整数作为 123456 输入到我的控制器中。

现在我想将每个数字转换为以逗号分隔的数字数组作为`{ 1, 2, 3, 4, 5 }`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:41:27.620

尝试这个：

```
int[] array = new int["123456".ToArray().Count()];
            int i = 0;
            foreach (var item in "123456".ToArray())
            {
                array[i++] = int.Parse(item.ToString());
            } 
```

或者

```
 int[] array = "123456".ToArray().Select(data=>(int)data).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:38:31.230

尝试这个

```
var integers = "123456";
var enumOfInts = integers.ToCharArray().Select(x => Char.GetNumericValue(x)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:39:04.987

如果您将参数作为字符串获取，那么

Linq 方式：

```
string str_num = "123456"
var arrayOfInts = str_num.ToCharArray().Select(x => x - 48).ToArray(); 
```

对于上面的 Linq 表达式，假设所有字符都在`48`&之间`57`

非 Linq 方式：

```
int[] GetIntArray(string str_num)
{
    int num = Int32.Parse(str_num);
    List<int> listOfInts = new List<int>();
    while(num > 0)
    {
        listOfInts.Add(num % 10);
        num = num / 10;
    }
    listOfInts.Reverse();
    return listOfInts.ToArray();
} 
```

解决方案扩展自：[如何在 c# 中将数字拆分为单个数字？](https://stackoverflow.com/questions/4808612/how-to-split-a-number-into-individual-digits)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:38:40.760

```
{
    string s = "1234567890";
    var lst = new List<int>();

    for (int n = 0; n < s.Length; n++)
    {
        int x;
        if (int.TryParse(s[n].ToString(), out x))
            lst.Add(x);
    }

    int[] arr = lst.ToArray();
} 
```

# android - java.lang.stackoverflow 错误

> ID：15464560
> 
> 赞同：0
> 
> 时间：2013-03-17T18:32:16.010
> 
> 标签：android, viewflipper, stack-overflow

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content">
 <ViewFlipper 
  android:id="@+id/vf1"
  android:layout_width="fill_parent"
  android:layout_height="match_parent">    
   <RelativeLayout
    android:id="@+id/a1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent">
 <Button
        android:id="@+id/left1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/left64"/>
     <Button
        android:id="@+id/left2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/left128"/>
 <RadioGroup
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
     <RadioButton
        android:id="@+id/radio12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="set0"
        android:text="Select"/>
 <RadioButton
        android:id="@+id/radio11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="set0"
        android:text="Select" />
     </RadioGroup>
   </RelativeLayout>
.
.
N more relative layouts like this then

 </ViewFlipper>
</RelativeLayout> 
```

当 N<=3 时它工作正常，但是当 N>3 java.lang.stackoverflow 错误直接出现在解析 xml 文件同时切换到图形布局时。我在 API 17 上构建它。我在许多博客中读到，由于布局的层次结构非常深，会发生此错误，但我认为我的层次结构并不太深。是吗？还有什么方法可以增加android中的堆栈大小？如果有任何1发现它，请向我提供它的解决方案

# mysql - 连接两个表mysql，一对多关系

> ID：15464564
> 
> 赞同：1
> 
> 时间：2013-03-17T18:32:34.720
> 
> 标签：mysql, sql, join, aggregate-functions

我有两张桌子：

积分 ->

```
id           bigint(20)   NO   PRI  NULL   auto_increment
created_at   datetime     NO        NULL   
ip           varchar(255) NO        NULL   
item_id      bigint(20)   NO   MUL  NULL   
updated_at   timestamp    YES       NULL 
```

和项目->

```
id           bigint(20)    NO  PRI  NULL   auto_increment
author       varchar(255)  NO       NULL   
created_at   datetime      NO       NULL   
description  varchar(255)  NO       NULL   
link         varchar(255)  NO       NULL   
source       varchar(255)  NO       NULL   
title        varchar(180)  NO       NULL   
url_encoded  varchar(255)  NO  UNI  NULL   
updated_at   timestamp     YES      NULL 
```

我希望在一个查询中加入他们，这样我就会得到`item.*`相对于他们的总点数。我还想仅对在过去 24 小时内为其创建任何积分的项目执行此操作。

到目前为止，这是我的查询：

```
SELECT `items`.*, COUNT(points.item_id) as points
FROM `items`
INNER JOIN `points` ON `items`.`id` = `points`.`item_id`
WHERE `points`.`created_at` > '2013-03-16 16:00:14'
ORDER BY points DESC
LIMIT 30; 
```

不幸的是，当它应该是两个时，它只给了我一排，当它应该是一个时，它给了我两分。在我的数据库中，有两个项目，每个项目一个点。请帮我解决这个问题并了解如何改进我的查询以获得两个结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:44:24.460

您需要使用`GROUP BY`来解释要根据哪些分组进行计数。如您所见，没有`GROUP BY`您只需获得整个结果集的一组。

在标准 SQL 中，有必要在子句中包含`GROUP BY`每个包含在子句中的非聚合表达式`SELECT`，但 MySQL 允许您不这样做，允许使用如下表达式。（至少，当不处于严格模式时；我不确定严格模式是否会加强此要求以匹配标准 SQL）

```
SELECT `items`.*, COUNT(1) AS points
FROM `items` INNER JOIN `points` ON `items`.`id` = `points`.`item_id`
WHERE ...
GROUP BY `items`.`id` 
```

假设这`items.id`是该表的主键，因此它不会出现在多于一行中`items`，这应该具有预期的效果。

介绍后，了解和子句`GROUP BY`之间的区别很重要。前者在应用组和聚合*之前*应用条件，而后者在应用*之后*应用。这意味着如果要根据该计数执行条件，则必须使用；初始示例中的子句将在聚合之前应用，因此结果将是在给定日期之后创建的点数。`WHERE``HAVING`**`HAVING``WHERE`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:41:08.997

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T16:11:02.887

创建表链接。随着领域`id`，，`itemid``pointsid`

输入：

```
Row1: 1, items-id1, points-id-1
Row2: 2, items-id-1, points-id-2
Row3: 3, items-id-1, points-id-3 
```

```
SELECT * FROM points, field WHERE tablelink.itemid=items.id AND tablelink.pointsid=points.id; 
```

一项有很多点。**

# tsql - 在 Visual Studio 2012 中使用数据库项目和 SQL 数据工具：如何获取要解析的临时表？

> ID：15464567
> 
> 赞同：7
> 
> 时间：2013-03-17T18:32:54.910
> 
> 标签：tsql, visual-studio-2012, database-project, sql-server-data-tools

我正在学习 Visual Studio 2012 的“数据库项目”系统，使用带有 Update 1 的 Visual Studio 2012 以及 SSDT。

我发现它非常擅长在我的数据库中发现真正的问题，尤其是存储过程中的编程错误，其中有人从数据库表中删除了一个字段，但没有检查并验证所有存储过程是否执行没有错误。因此，通过 Visual Studio 2012 中的“build”命令验证您的 .sql 脚本非常方便。我舍不得放弃它。

但我还注意到，每当在存储过程中使用 #TEMPTABLE 时，即使关闭了“为公共对象启用扩展 Transact-SQL 验证”，我仍然会遇到涉及存储过程中 #temptable.field 引用的“构建错误”。

数据库项目采取哪些步骤来确定临时表的架构？由于根据定义，我的临时表不存在于主架构中，因此当我在创建数据库后立即通过“导入数据库”选项将真正的生产 SQL 数据库导入 Visual Studio 时，它们没有进入我的数据库项目。

我应该创建“#TEMPTABLE.SQL”文件并将它们添加到我的项目中吗？

示例错误：

```
c:\dev\...\dbo\Stored Procedures\xyz.sql(95,96): Warning:  SQL71502: Procedure: [dbo].[proc123] has an unresolved reference to object [#temptable1].[somefield1]. 
```

如果有一种方法可以包含一个脚本，该脚本定义了一次使用的临时表，并将其包含在需要了解这些的各个地方，如果要彻底验证 T-SQL，那很好，如果 Turning扩展验证做了我认为应该做的事情，那么也许什么都不需要了。

[论坛帖子表明这是不可能解决的，我所能做的就是在文件级别有效地关闭这个警告，这有点可怕。](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/6fc46451-db21-4de8-bdad-68f05c53a7df/)

[一个关于同一主题但针对 Visual Studio 2010 的问题](https://stackoverflow.com/questions/6210725/how-to-deal-with-temp-tables-when-compiling-database-project)表明，这是一个该技术已经完全被破坏的领域，微软多年来一直知道它并且对此没有采取任何行动。VS2012.U1+SSDT_Dec2012 现在有什么更好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-29T16:22:25.943

那是临时表的问题，您应该使用表值函数。

# python - pycharm 无法识别 pygame 包

> ID：15464568
> 
> 赞同：3
> 
> 时间：2013-03-17T18:32:55.267
> 
> 标签：python, pygame, pycharm

我正在使用`mac OsX 10.8.2`, `pyCharm 2.7.1`。`python 2.7.2`

我想将`pygame`包与`pycharm`. 我按照`pygame`网站上的说明成功安装了 pygame 1.9.1。当我写“import pygame”时，pycharm 找不到包。

我尝试安装 python、pycharm 和 pygame 的最新更新。我尝试使用首选项中的“安装”窗口。它安装了“pygamess”、“pygameui”和“pyviewx.pygame”，但是当我尝试安装“pygame_loaders”时，它写道“安装包失败：安装包pygame_loaders时出错”。

如果你可以请给出简单的指导，因为我不是一个沉重的 mac 用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:13:44.600

要在 OS X 下使用 pygame，需要在 32 位解释器下运行 Python。[它通常被称为“python2.7-32”之类的东西，如果从http://www.python.org/](http://www.python.org/)上的包安装，则在 /usr/local/bin 中

要在 PyCharm 中使用此功能，请打开一个项目，然后打开首选项（“apple”-“comma”），转到“python解释器”，然后单击右侧窗格中的“+”按钮。

应该会出现一个列表，您会看到“/usr/local/bin/python2.7-32”，选择它，然后将其设为 PyGame 项目的默认值。

如果你还没有从 python.org 安装 Python，我建议你这样做；当前版本是 2.7.3。

上面的设置是我在周日让 PyGame 在 PyCharm 中工作的方式，所以它应该仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T12:29:43.470

如果你在 pyCharm 中运行了 2.7 virtualenvs，你可以手动安装 pygame。通过终端导航到磁盘上的虚拟环境：

```
cd ~/.virtualenvs/Pygame 
```

或您拥有的任何目录。现在我们激活了 virtualenv，就像我们在 pyCharm 中不工作时一样。

```
source ./bin/acivate 
```

你应该看到这样的东西

```
(Pygame)mbp-2:Pygame pietje$ 
```

现在我们可以在这个环境中安装 pygame。

```
pip install hg+http://bitbucket.org/pygame/pygame 
```

就是这样，一切都应该在 PyCharm 中正常工作。它在我的机器上工作:)

# sql - 可空外键

> ID：15464570
> 
> 赞同：0
> 
> 时间：2013-03-17T18:33:07.293
> 
> 标签：sql, sql-server, sql-server-2008

我有以下 sql 语句：

```
SELECT Useraccount.Name, Company.Name  
 FROM Useraccount, Company
WHERE Useraccount.CompanyId = Company.ID 
```

此语句显示所有用户帐户名称及其公司名称。

但我也有公司 ID 为 0 的用户帐户，我也想让它们显示（在这种情况下，公司名称可能是一个空字符串）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:37:53.740

A`LEFT JOIN`会为您解决问题：

```
SELECT Useraccount.Name, Company.Name  
FROM Useraccount
 LEFT JOIN Company ON Useraccount.CompanyId = Company.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:35:07.197

改用`LEFT JOIN`：

```
SELECT 
  Useraccount.Name, 
  Company.Name  
FROM Useraccount
LEFT JOIN Company ON Useraccount.CompanyId = Company.ID; 
```

您正在`INNER JOIN`使用旧`JOIN`语法 ing 两个表。请避免使用这种旧的连接语法并使用 ANSI SQL-92 显式语法和`JOIN`关键字。有关更多信息，请参见：

*   [要改掉的坏习惯：使用老式的 JOIN。](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)

有关不同联接类型的更多信息：

*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:44:05.990

当您使用**LEFT JOIN**时，无论行的匹配状态如何，您都将从左表中获取所有行。

```
SELECT 
Useraccount.Name AS UserAccountName, 
Company.Name AS CompanyName 
FROM Useraccount
LEFT JOIN Company 
ON Useraccount.CompanyId = Company.ID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:37:54.260

您可以使用 -

```
SELECT Useraccount.Name, Company.Name  
 FROM Useraccount, Company
WHERE Useraccount.CompanyId = Company.ID or Useraccount.CompanyId =0 
```

# label - 如何使用 Gnuplot 在绘图的特定点放置符号

> ID：15464571
> 
> 赞同：1
> 
> 时间：2013-03-17T18:33:09.090
> 
> 标签：label, gnuplot

[这里](http://gnuplot-tricks.blogspot.it/2009/05/gnuplot-tricks-many-say-that-it-is.html)提供了一个使用 Gnuplot 绘制的绘图中的换行示例。

使用箭头，如上面链接中所建议的，结果取决于轴，即我不能简单地处理箭头的角度。下图是上面链接中的例子得到的丑陋换行的例子。 ![在此处输入图像描述](../Images/4cd85d1f15a83de41f3d1ee27c90d39c.png)

为了获得那些丑陋的箭头，我做了类似的事情：

```
x1 = 32
yb = 0
yt = 100
tiny=2
set arrow 1 from x1-tiny, yb-tiny to x1+tiny, yb+tiny nohead
set arrow 2 from x1-tiny, yt-tiny to x1+tiny, yt+tiny nohead 
```

对于第一个情节和：

```
x2 = 33
set arrow 1 from x2-tiny, yb-tiny to x2+tiny, yb+tiny nohead
set arrow 2 from x2-tiny, yt-tiny to x2+tiny, yt+tiny nohead 
```

第二个。

因此，我不想使用箭头，而是希望使用一个符号放在轴的末端。符号在 pt 中，不随轴长变化。我认为应该通过将标签放在特定点的中心来完成。

**在 Gnuplot 中执行此操作的代码是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:57:48.957

分别为第一个和后一个图尝试以下行：

```
set label "/" at x1, yb center font "Symbol,24"
set label "/" at x1, yt center font "Symbol,24"

set label "/" at x2, yb center font "Symbol,24"
set label "/" at x2, yt center font "Symbol,24" 
```

这应该工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:59:39.477

以固定角度指定箭头的技巧是在图形坐标中工作。

（请注意，我的分轴方法不适用于 postcipt 驱动程序。不知道为什么）

```
set terminal png
set yrange [0:20]
set multiplot
set ytics nomirror
set xrange [0:10]
set border 7  #left,top,bottom
set key left
dy = .025  #height of slash in graph coordinates
dx = dy/tan(10*pi/180)  # 10 degree angle
set arrow nohead lt -1 from graph 1-dx,-dy to graph 1+dx,dy
set origin 0,0
set size .5,.8 
set xtics (0,4,8)
plot sqrt(x)
set origin .5,0
set xrange [100:200]
set border 13 #right,top,bottom
unset ytics
set nokey
unset arrow
set arrow nohead lt -1 from graph -dx,-dy to graph dx,dy 
set xtics (125,150,175,200)
plot sqrt(x) 
```

请注意，如果您有对数刻度，这将正常工作..

![在此处输入图像描述](../Images/949c64d195bcd24607bbc8ae18241d16.png)

哎呀忘了顶部，因为你只是这样做

```
set arrow nohead lt -1 from graph 1-dx,-dy+1 to graph 1+dx,dy+1 
```

# sql - 使用 google bigquery 构建直方图

> ID：15464574
> 
> 赞同：11
> 
> 时间：2013-03-17T18:33:21.980
> 
> 标签：sql, google-bigquery

如何编写使直方图渲染更容易的查询？

例如，我们有 1 亿人的年龄，我们想绘制年龄 0-10、11-20、21-30 等的直方图/桶……查询是什么样的？

有人做过吗？您是否尝试将查询结果连接到谷歌电子表格以绘制直方图？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-12T23:01:24.603

您还可以使用[`quantiles`](https://developers.google.com/bigquery/query-reference#aggfunctions)聚合运算符快速查看年龄分布。

```
SELECT
  quantiles(age, 10)
FROM mytable 
```

此查询的每一行将对应于年龄列表中该点的年龄。第一个结果是年龄排序列表的 1/10 岁，第二个结果是 2/10 岁，3/10 岁等。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-18T17:47:28.977

使用 #standardSQL --Fh查看[2019 年更新](https://stackoverflow.com/a/56447260/132438)

* * *

子查询的想法有效，“CASE WHEN”也是如此，然后通过以下方式进行分组：

```
SELECT COUNT(field1), bucket 
FROM (
    SELECT field1, CASE WHEN age >=  0 AND age < 10 THEN 1
                        WHEN age >= 10 AND age < 20 THEN 2
                        WHEN age >= 20 AND age < 30 THEN 3
                        ...
                        ELSE -1 END as bucket
    FROM table1) 
GROUP BY bucket 
```

或者，如果桶是规则的——你可以只划分并转换为一个整数：

```
SELECT COUNT(field1), bucket 
FROM (
    SELECT field1, INTEGER(age / 10) as bucket FROM table1)
GROUP BY bucket 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-06-04T15:46:11.270

使用#standardSQL 和辅助`stats`查询，我们可以定义直方图应查看的范围。

在 SFO 和 JFK 之间飞行的时间在这里 - 有 10 个桶：

```
WITH data AS ( 
    SELECT *, ActualElapsedTime datapoint
    FROM `fh-bigquery.flights.ontime_201903`
    WHERE FlightDate_year = "2018-01-01" 
    AND Origin = 'SFO' AND Dest = 'JFK'
)
, stats AS (
  SELECT min+step*i min, min+step*(i+1)max
  FROM (
    SELECT max-min diff, min, max, (max-min)/10 step, GENERATE_ARRAY(0, 10, 1) i
    FROM (
      SELECT MIN(datapoint) min, MAX(datapoint) max
      FROM data
    )
  ), UNNEST(i) i
)

SELECT COUNT(*) count, (min+max)/2 avg
FROM data 
JOIN stats
ON data.datapoint >= stats.min AND data.datapoint<stats.max
GROUP BY avg
ORDER BY avg 
```

如果您需要整数，请参阅：[https ://stackoverflow.com/a/60159876/132438](https://stackoverflow.com/a/60159876/132438)

[![在此处输入图像描述](../Images/a4a65bd0a2654b5cc525631283cf4aee.png)](https://i.stack.imgur.com/Gv8aU.png)

[![在此处输入图像描述](../Images/71ff5de0d3d7b0173c06f6535727b26a.png)](https://i.stack.imgur.com/0tthc.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T07:41:01.567

像这样写一个子查询：

```
(SELECT '1' AS agegroup, count(*) FROM people WHERE AGE <= 10 AND AGE >= 0) 
```

然后你可以做这样的事情：

```
SELECT * FROM
(SELECT '1' AS agegroup, count(*) FROM people WHERE AGE <= 10 AND AGE >= 0),
(SELECT '2' AS agegroup, count(*) FROM people WHERE AGE <= 20 AND AGE >= 10),
(SELECT '3' AS agegroup, count(*) FROM people WHERE AGE <= 120 AND AGE >= 20) 
```

结果将如下所示：

```
Row agegroup count 
1   1       somenumber
2   2       somenumber
3   3       another number 
```

我希望这可以帮助你。当然在这个年龄段你可以写任何东西：'0 to 10'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-12T15:28:52.723

现在标准 SQL 中有[APPROX_QUANTILES](https://cloud.google.com/bigquery/docs/reference/standard-sql/approximate_aggregate_functions#approx_quantiles)聚合函数。

```
SELECT
    APPROX_QUANTILES(column, number_of_bins)
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T17:55:24.837

您正在寻找一个单一的信息向量。我通常会这样查询：

```
select
  count(*) as num,
  integer( age / 10 ) as age_group
from mytable
group by age_group 
```

`case`任意组都需要一个重要的声明。它会很简单，但会更长。如果每个桶包含 N 年，我的示例应该没问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-02T18:48:23.200

使用交叉连接来获取您的最小值和最大值（在单个元组上并不那么昂贵），您可以获得任何给定存储桶计数的标准化存储桶列表：

```
select
  min(data.VAL) as min,
  max(data.VAL) as max,
  count(data.VAL) as num,
  integer((data.VAL-value.min)/(value.max-value.min)*8) as group
from [table] data
CROSS JOIN (SELECT MAX(VAL) as max, MIN(VAL) as min, from [table]) value
GROUP BY group
ORDER BY group 
```

在这个例子中，我们得到了 8 个桶（非常不言自明）加上一个用于 null VAL

# string - C ++将十六进制数字转换为人类可读的字符串表示

> ID：15464575
> 
> 赞同：0
> 
> 时间：2013-03-17T18:33:22.277
> 
> 标签：string, hex

我有一个由 ASCII 字符组成的 char[32]，其中一些可能是不可打印的字符，但是它们都在 0 到 255 的有效范围内。

假设它包含这些数字： { 9A 2E 5C 66 26 3D 5A 88 76 26 F1 09 B5 32 DE 10 91 3E 68 2F EA 7B C9 52 66 23 9D 77 16 BB C9 42 }

我想将 std::string 打印出来或存储为“9A2E5C66263D5A887626F109B532DE10913E682FEA7BC95266239D7716BBC942”，但是，如果我使用 printf 或 sprintf 将其打印出来，它将产生每个数字的 ASCII 代表，而是打印出“ö. \f&=Zàv&Ò µ2fië>h/Í{…Rf#ùwª…B"，这是正确的 ASCII 字符表示，因为：ö = 9a, . = 2e, ...

如何可靠地获取十六进制数字的字符串表示形式？即：我希望 char[64] 包含“9A2E5C66263D5A887626F109B532DE10913E682FEA7BC95266239D7716BBC942”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:52:44.873

```
void bytesToHex(char* dest, char* src, int size) {
    for (unsigned int i = 0; i < size; i++) {
        sprintf(&dest[i * 2], "%02x", src[i]);
    }
} 
```

您必须在这里分配自己的内存。它将像这样使用：

```
char myBuffer[32]
char result[65];
bytesToHex(result, myBuffer, 32);
result[64] = 0;

// print it
printf(result);

// or store it in an std::string
std::string str = string(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:34:24.243

我试过了：

```
 char szStringRep[64];
  for ( int i = 0; i < 32; i++ ) {
    sprintf( &szStringRep[i*2], "%x", szHash[i] );
  } 
```

它按预期工作，但如果遇到 < 0x10 数字，它将在打印 0 时终止

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:35:32.010

您可以将您的字符串编码到另一个系统，如 Base64，在使用加密算法时被广泛使用。

# java - Spring验证框架多个模型属性错误消息不显示在jsp上

> ID：15464580
> 
> 赞同：0
> 
> 时间：2013-03-17T18:34:05.123
> 
> 标签：java, spring, validation, spring-mvc, jsp-tags

我正在尝试使用弹簧验证框架在一个操作上验证 2 个模型属性。目的是在单击“搜索”按钮时验证lookUpbean（搜索条件），然后验证生成的bean，即一旦我们从服务中获取它的memberShipbean，以便我们可以在结果中的某些字段为空时向用户显示警告豆。

```
<form:form method="POST" modelAttribute="lookupPageBean" id="lookupForm" name="lookupForm" 
action="lookupMembership.htm">

   <td class="error">
  <form:errors path="membershipNumber" />   

  <form:input class="medium-textbox" id="membershipNumber" path="membershipNumber" />

  <button type="submit" class="Active-button-small">

  <fmt:message key="button.go" />
  </button>`

@RequestMapping(method = RequestMethod.POST, value = URLMappingConstant.MEMBERSHIP_LOOKUP)

public String viewMembership(ModelMap modelMap, HttpServletRequest request, HttpServletResponse   response,

@ModelAttribute(UIConstant.LOOKUP_PAGE_BEAN) LookupPageBean lookupPageBean, BindingResult result,

@ModelAttribute(UIConstant.MEMBERSHIP_BEAN) MembershipPageBean membershipPageBean, BindingResult error) throws WebMTracksException 
{
 membershipValidator.validate(lookupPageBean, result);
membershipValidator.validate(membershipPageBean, error);

} 
```

现在发生的事情是第一次验证工作正常，但是在第二次验证期间，错误消息没有显示在结果 jsp 上，但是在“错误”绑定结果中直到这个控制器层才报告错误。

同样在验证层

```
 ValidationUtils.rejectIfEmpty(errors, UIConstant.BUSINESSNAME,ValidationMSGConstants.BUSINESS_NAME) 
```

即使该字段不为空，此方法也始终返回验证错误。

第一个问题是我们能否在一个动作中拥有多个模型属性。我在互联网上的某个地方读到它，但找不到任何相同的实现。请帮我解决这个问题。如果您能想到任何其他可行的解决方案来解决这个问题，也请告诉我，但我只想使用 spring 框架进行验证，因为这有助于维护应用程序的现有设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:23:17.847

我认为您没有将多个模型属性绑定到同一个表单，我相信这就是您要问的。从 HTTP 的角度来看，我什至不确定该请求会是什么样子，因为我不相信 Spring 有办法解开所有 bean 的属性，尤其是在名称重叠的情况下。您可能想要考虑将 LookupPageBean 和 MembershipPageBean 包装到一个“表单 bean”中。

至于错误消息，您可能需要查看[spring:bind](http://static.springsource.org/spring/docs/1.1.5/taglib/tag/BindTag.html)标签。它可能会执行您从第二个模型属性获取绑定错误所需的操作。

# asp.net-mvc - WebApi 和 Controller 矫枉过正

> ID：15464584
> 
> 赞同：6
> 
> 时间：2013-03-17T18:34:21.890
> 
> 标签：asp.net-mvc, rest, asp.net-web-api

我开始将 WebApi 和 OData 集成到测试台应用程序中。让我们保持简单，并坚持使用一个域实体，客户。显然我会有一个 MVC 控制器。搜索得到它自己的视图模型（基于 Lucene 索引），所以这将是单独的控制器，现在是 ODataController。但由于视图/编辑页面将有自己的视图模型，它们将成为自己的控制器。这开始感觉像是矫枉过正。

试图找出一个好的设计来完成这项工作，并且仍然使用代表实体的 URL 的想法。URL 中的实体是否应该是 Customer 并且我以某种方式基于 URL 参数提供不同的表示？或者 Customer/CustomerSearch/CustomerEdit 应该是不同的实体（这听起来不对）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:42:12.370

我假设这个 WebAPI 应用程序将是一个独立于您要构建的 ASP.NET MVC 解决方案的解决方案。简而言之，WebAPI 将是业务/域层，而 MVC 将是表示层。

因此，在谈到 WebAPI 解决方案时，您只需要一个`ApiController`用于上面介绍的 Customer 示例。查看/编辑请求可能有自己的视图模型......或没有。根据您制作视图模型的方式，您可能能够为客户提供单个视图模型，或者您可以开发客户视图层次结构，其中基本视图模型保存与搜索相关的数据，而后代视图模型充实细节.

您的路由请求可能如下所示：

```
GET - /Customer/                  retrieve multiple customers 
                                  (supplying OData parameters in query string)
GET - /Customer/{id}              retrieve a single customer
PUT - /Customer/{id}              edit customer 
```

看起来您将需要两条路线，一条`ApiController`用于客户，三种请求方法用于您描述的内容。我不建议`ApiController`为 OData 单独使用，因为该功能取决于实体。

# c# - asp.net c#中的SQL运行时错误

> ID：15464586
> 
> 赞同：0
> 
> 时间：2013-03-17T18:34:33.027
> 
> 标签：c#, asp.net, sql

我在 asp.net 中不断收到运行时 SQL 查询错误。我正在使用 c#。错误总是以“（某些单词）”附近的不正确语法开头。我已经检查并重新检查了我的代码是否有任何语法错误，但从未发现任何错误。在下面的代码中，错误是“用户”附近的语法不正确。请帮忙。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class LogIn : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection();
    SqlCommand cmd = new SqlCommand();

    protected void Page_Load(object sender, EventArgs e)
    {
        con.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users        \Sony\Documents\Library\App_Data\Library.mdf;Integrated Security=True;User     Instance=True";
        cmd.Connection=con;
        con.Open();

    }
protected void  txt_user_TextChanged(object sender, EventArgs e)
{

}
protected void  txt_pass_TextChanged(object sender, EventArgs e)
{

}
protected void  btn_log_Click(object sender, EventArgs e)
{
    cmd.CommandText="select count(*) from user where Username='"+txt_user.Text+"' and     Password='"+txt_pass.Text+"'";
        int count =Convert.ToInt16(cmd.ExecuteScalar());
        if (count==1)
        {
            Response.Redirect("Home.aspx");
        }
        else
        {
            Label1.Text="Invalid Username or Password. Please try again..";
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:41:39.513

你的错误的原因是这个词`user`。它是 SqlServer 的保留关键字。
你需要用方括号封装它

```
select count(*) from [user] .... 
```

话虽如此，现在让我们解决您的代码的最大问题。[Sql 注入](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)

```
cmd.CommandText="select count(*) from [user] where Username=@uname " + 
                "and Password=@upass";
cmd.Parameters.AddWithValue("@uname", txt_user.Text)
cmd.Parameters.AddWithValue("@upass", txt_pass.Text);
int count =Convert.ToInt16(cmd.ExecuteScalar());
...... 
```

使用这样的参数化查询可以保护您的应用程序免受恶意输入（请参阅引用的问题）的影响，这些输入可能会破坏（或破坏）存储在数据库中的信息。您还可以避免包含问题字符的输入问题，例如带有单引号或数字小数分隔符的字符串或日期格式困难。

从上面的代码中我可以看到另一个问题。不要将连接存储在全局变量中。如果您在需要时打开连接并在之后关闭，则不会影响性能。它被称为[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)，当您不使用它时，您不会锁定有价值的资源。

所以总结一下：

```
protected void  btn_log_Click(object sender, EventArgs e)
{

   using(SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=" +
                                 @"C:\Users\Sony\Documents\Library\App_Data\Library.mdf;" + 
                                 @"Integrated Security=True;User Instance=True")
    {
        con.Open();
        using(SqlCommand cmd = new SqlCommand("select count(*) from [user] where "+ 
                                   "Username=@uname and Password=@upass", con)
        {
            cmd.Parameters.AddWithValue("@uname", txt_user.Text)
            cmd.Parameters.AddWithValue("@upass", txt_pass.Text);
            int count =Convert.ToInt16(cmd.ExecuteScalar());
            ......
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:42:20.677

问题是，“用户”是 SQL 中的保留字。除了注入问题，您的查询应该是：

`select ... from [user] where`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:42:39.753

'User' 是 [SQL server 中的保留关键字](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)。如果你有一个表名'user'，你应该在查询中把它放在括号中

```
select count(*) from [user] where ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T20:28:06.480

我完全同意史蒂夫、罗曼和亚历克斯所说的一切。

如果我要添加一些内容，那就是您应该尽量减少临时查询的使用，本示例中已使用该查询。相反，您应该更喜欢将大部分 sql 代码放在 sql 函数和存储过程中，因为这可以极大地提高性能，因为这些查询可以在第一次执行时编译，而在数据库之后执行的时间可以专注于检索数据。对于临时查询，每次都必须编译查询，这实际上可能需要一些时间来处理更复杂的查询。

然后，您可以像这样执行存储过程：

```
using(SqlCommand cmd = new SqlCommand("dbo.IsValidLogin", con)
{
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@username", txt_user.Text)
    cmd.Parameters.AddWithValue("@password", txt_pass.Text);
    var isValidLogin =Convert.ToBool(cmd.ExecuteScalar());
    ...
} 
```

如果您在数据库中声明了一个过程，如下所示：

```
CREATE PROC dbo.IsValidLogin
@username nvarchar(50),
@password nvarchar(50)
AS
BEGIN
  SELECT count(1) 
  FROM [user] 
  WHERE Username=@username
  AND Password=@password
END; 
```

[在此处查看 Sql Fiddle 示例。](http://sqlfiddle.com/#!6/d62ea)

# php - 为什么ajax的响应总是返回json的名称

> ID：15464591
> 
> 赞同：0
> 
> 时间：2013-03-17T18:35:07.913
> 
> 标签：php, ajax, json

我有这个ajax函数

```
$.ajax({
    type: 'POST',
    url: '?ajax=1',
    data: { 
        checkEmail : { 'email' : $(this).val() }
    },
    success:function(data){
    }
}) 
```

谁能告诉我为什么它总是返回“checkEmail”名称？就像在回复中它会给出：'checkEmailThis email has already been registered。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:40:09.497

因为数据语法应该是这样的：

```
 data: { key1: "value1", key2: "value2" } 
```

[在此处](http://api.jquery.com/jQuery.ajax/)查看一些示例

# algorithm - 寻找具有最大最小度的生成树

> ID：15464592
> 
> 赞同：3
> 
> 时间：2013-03-17T18:35:09.957
> 
> 标签：algorithm, graph, graph-algorithm

给定一个连通的无向图，找到具有最小最大度的生成树的问题已得到充分研究（M. Fürer，B. Raghvachari，“将最小度生成树逼近到最佳度的一个范围内”， ACM-SIAM 离散算法研讨会 (SODA)，1992 年）。该问题是 NP-hard 问题，参考文献中已经描述了一种近似算法。

我对以下问题感兴趣 - 给定一个连接的无向图 G = (V1,V2,E)，在所有内部节点（非叶节点）上找到具有最大最小度的生成树。有人可以告诉我这个问题是否已经研究过；它是 NP-hard 还是存在解决它的多项式时间算法？此外，为方便起见，该图可以被认为是二分图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:47:10.617

看起来 3 组的精确覆盖可以减少到这个问题。用 4 度的顶点表示 3 组，每组都有 3 条边将其连接到 3 个节点，这些节点表示其在原始问题实例中的元素。附加的第 4 条边将所有“3-set”节点连接到单个顶点 V。

这个图是二分的——每条边都在一个“3-set”节点和一个“element”节点（或 V）之间。现在，当且仅当原始问题有解决方案时，此图具有最大最小度 = 4 的生成树。

显然需要有足够的 3 组，以便节点 V 不会降低树的最大最小度数，但是这个限制不会改变问题的 NP 难度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:50:31.130

正如 Evgeny Kluev 的评论中所指出的，（有限）树的叶子的度数为 1。（否则，循环将存在并且结构不会是树。）

相反，如果您的意思是从连通无向图 G 上的所有可能生成树中找到具有最大度数的节点的生成树，则只需形成一棵生成树，其根 R 是 G 的所有节点中度数最大的节点 M G 的节点，M 的所有邻居都是 R 的子节点。

# jquery - "$(document).on('pageshow'" 不适用于 jQuery 1.9.1 + JQM 1.3.0-stable

> ID：15464594
> 
> 赞同：6
> 
> 时间：2013-03-17T18:35:14.467
> 
> 标签：jquery, jquery-mobile

使用 jQuery 1.8.3

```
<!DOCTYPE html>
<html>
    <head>
        <script src="js/jquery-1.8.3.min.js"></script>
        <script src="js/jquery.mobile-1.3.0.min.js"></script>
        <script>
      $.support.cors = true;
      $.mobile.allowCrossDomainPages = true;

      $("#home").live("pageshow", function( event ) {
        alert( "Ok. This is Home!" );
      });
        </script>
    </head>
    <body>

    <!--- HOME --->
    <div data-role="page" id="home">
    <h2>Hello World</h2>
    </div>
    </body>
</html> 
```

警报工作正常。

但是，使用 jQuery 1.9.1（请注意，我更改了版本并使用“on”“live”。

```
<!DOCTYPE html>
<html>
    <head>
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/jquery.mobile-1.3.0.min.js"></script>
        <script>
      $.support.cors = true;
      $.mobile.allowCrossDomainPages = true;

      $("#home").on("pageshow", function( event ) {
        alert( "Ok. This is Home!" );
      });
        </script>
    </head>
    <body>

    <!--- HOME --->
    <div data-role="page" id="home">
    <h2>Hello World</h2>
    </div>
    </body>
</html> 
```

警报不起作用。我确定我做错了什么。我一直在阅读 jQuery Mobile 1.3.0-stable 将使用 jQuery 1.9.1，但也许我错了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T18:36:18.973

改变

```
 $("#home").on("pageshow", function( event ) { 
```

到

```
 $(document).on("pageshow", "#home", function( event ) { 
```

的语法与 的语法不同`on`：`live`当您进行绑定时，将接收和委托事件的元素必须存在。

# c - Pascal 和 C：不同的输出

> ID：15464600
> 
> 赞同：3
> 
> 时间：2013-03-17T18:35:38.017
> 
> 标签：c, pascal, output

StackOverflow 上的第一个问题...我有 2 个程序，一个在 C 中，一个在 Pascal 中，应该给我相同的输出，但它们没有。

帕斯卡：

```
program ssgf108;
uses crt;
var n,q,r,s,i:integer;
var a:array[1..10] of integer;

begin
        a[1]:=3;
        a[2]:=-5;
        a[3]:=12;
        a[4]:=7;
        a[5]:=-4;
        a[6]:=-3;
        a[7]:=2;
        a[8]:=8;
        a[9]:=4;
        a[10]:=10;
        readln(n);
        q:=0;
        r:=0;
        s:=1;
        for i:=1 to n do
        begin
                q:=i*a[i];
                r:=i+a[i];
                s:=s+q*r;
        end;
        writeln(q,' ',r,' ',s);
end. 
```

C：

```
#include <stdio.h>

int main(){
        int a[10],n,q,r,s,i;
        scanf("%d",&n);
        a[0]=3;
        a[1]=-5;
        a[2]=12;
        a[3]=7;
        a[4]=-4;
        a[5]=-3;
        a[6]=2;
        a[7]=8;
        a[8]=4;
        a[9]=10;
        q=0;
        r=0;
        s=1;
        for (i=0;i<=n-1;i++){
                q=i*a[i];
                r=i+a[i];
                s=s+q*r;
        }
        printf("%d %d %d",q,r,s);
        return 0;
} 
```

在输入 5 作为 n 时，Pascal 输出 -20 1 871 而 C 输出 -16 0 567。错误在哪里？这个问题的背景：我正在学校做一个解决问题的比赛，下一个挑战很接近，有些问题需要编程，我已经用 Bash 和 Pascal 完成了前 2 个挑战，现在我正在学习 C，所以我会喜欢在 C 中做。但我必须避免错误的结果，因为它们意味着失分。这是比赛网站上的培训，将伪代码转换为代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:38:24.817

价值

```
q = i * a[i];
r = i + a[i]; 
```

取决于`i`循环内部的值，这在基于 1 和基于 0 的索引循环之间是不同的。您需要`i+1`在 C 循环内进行算术运算：

```
for (i = 0; i < n; i++) {
    int i1 = i + 1;
    q = i1 * a[i];
    r = i1 * a[i];
    s += q * r;
} 
```

# process - Erlang：杀死所有在后台运行的进程

> ID：15464606
> 
> 赞同：2
> 
> 时间：2013-03-17T18:36:08.357
> 
> 标签：process, erlang, kill

我使用以下方法在后台启动了一个进程：

```
erl -s system start -detached 
```

我需要终止进程。有没有办法杀死所有在后台运行的进程？

我试过：

```
init:reboot() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T06:48:03.453

如果你想杀死系统上所有正在运行的 erlang 进程，如果可能的话，可能以超级用户身份运行它。在 bash 外壳中：

```
对于我在`ps -ef | grep erl | awk '{打印 $2}'`; 回声 $i; 杀死 -9 $i; 完毕

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:26:05.210

实现此目的的一种方法是启动另一个 erlang 控制台，将其附加到第一个控制台并执行所有必要的操作以正确终止它。

1.  您需要知道目标节点的名称。从您的示例节点开始时没有任何名称，您可以通过添加`-name` `-sname`如下标志来提供它：`erl -sname node_1 -s system start -detached`

2.  启动另一个具有不同名称的节点：`erl -sname node_2`

3.  按下`^G`终端上的（控制 G）`node_2`

4.  按`r`并输入第一个节点的名称`node_1@localhost`：（或任何名称）

5.  按`c`

`Eshell V5.10.1 (abort with ^G)
(node_2@localhost)1>
User switch command
--> r 'node_1@localhost'
--> c
Eshell V5.10.1 (abort with ^G)
(node_1@localhost)1>`

您会看到带有第一个节点名称的新提示。现在您的所有命令都将在第一个节点上执行。要终止第一个节点，您可以键入`erlang:halt().`

# opengl - 打包布局类型的 GLSL 优化

> ID：15464609
> 
> 赞同：2
> 
> 时间：2013-03-17T18:36:27.100
> 
> 标签：opengl, glsl

我正在尝试使用嵌套结构来模拟 GLSL 中的多态性之类的东西。

```
struct Primitve{
   Sphere s;
   Plane p;
   Triangle t;
   int type;
}; 
```

整数类型指定了这个原语的真正含义。通过这种方式，我可以将所有原语放在一个数组中。一个缺点是内存的浪费。

所以我的问题是关于“打包”布局类型。当我使用这种类型创建着色器存储缓冲区时

```
layout(packed) buffer PrimitiveBuffer{
   Primitive primitives[];
}; 
```

是否会通过不为根本不使用的成员分配数据来优化此数据块？Wiki 对打包布局说：“此外，如果实现发现块的成员不影响着色器的结果，则可以对其进行优化。”

我是正确的还是由于对齐限制而仅涉及划桨？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:02:21.880

*编译器*可以优化元素吗？*是的。*会*吗？仅当它可以*静态*确定它们未使用时。*

 *考虑这个函数：

```
void ProcessPrimitive(int index)
{
  if(primitives[index].type == 0)
  {
    primitives[index].s ...
  }
  else if(primitives[index].type == 1)
  {
    primitives[index].p ...
  }
  else
  {
    primitives[index].t ...
  }
} 
```

编译器如何知道，对于*特定*索引，该`type`字段将是什么？它怎么知道一个特定的索引将是一个球体或其他什么？它不能。因此，它无法优化任何东西。

如果你想节省空间，你将不得不自己实现数据转换。因此，您必须在 Primitive 中存储通用的信息“浮点数”，可以根据类型字段将其转换为 Sphere/etc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:46:15.530

这取决于您是否要在多个着色器程序之间共享缓冲区。

如果你不这样做，你可以使用一个**打包**的内存布局，基本上告诉你的实现：“这个块中的任何变量，没有使用（因为不影响着色器阶段的结果）可能会被优化掉。”

但请记住，在这种情况下，您必须显式[查询](http://www.opengl.org/wiki/Uniform_Buffer_Object#Layout_queries)块内成员的位置。

最后，由您的 GLSL 实现来找出“不影响着色器的结果”的内容。我想你必须做一些分析。*

# iphone - Cocos2D - 图层背景颜色不变

> ID：15464612
> 
> 赞同：3
> 
> 时间：2013-03-17T18:36:39.843
> 
> 标签：iphone, ios, objective-c, ipad, cocos2d-iphone

我想将 cocos2d 集成到我的一个视图中。所以，我有一个普通的视图控制器（`MapEditorViewController`）和一个视图，在我的视图控制器中，（我创建了一个`IBOutlet UIView *openGLView`）我希望 cocos2d 在其中。在我的视图控制器中，我有一个方法 setupCocos2D ：

```
- (void)setupCocos2D {
    CCGLView *glView = [CCGLView viewWithFrame:self.openGLView.bounds
                                   pixelFormat:kEAGLColorFormatRGB565   // kEAGLColorFormatRGBA8
                                   depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                        ];
    glView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.openGLView insertSubview:glView atIndex:0];
    [[CCDirector sharedDirector] setOpenGLView:glView];
    CCScene *scene = [HelloWorldLayer scene];
    [[CCDirector sharedDirector] runWithScene:scene];
} 
```

`setupCocos2D``viewDidLoad`在类中被调用`MapEditorViewController`。

我有一个层（`HelloWorldLayer`），基本上就是[http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-的教程中的代码教程](http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-tutorial)

```
// Helper class method that creates a Scene with the HelloWorldLayer as the only child.
+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

- (void) addMonster {

    CCSprite * monster = [CCSprite spriteWithFile:@"backbutton.png"];

    // Determine where to spawn the monster along the Y axis
    CGSize winSize = [CCDirector sharedDirector].winSize;
    int minY = monster.contentSize.height / 2;
    int maxY = winSize.height - monster.contentSize.height/2;
    int rangeY = maxY - minY;
    int actualY = (arc4random() % rangeY) + minY;

    // Create the monster slightly off-screen along the right edge,
    // and along a random position along the Y axis as calculated above
    monster.position = ccp(winSize.width + monster.contentSize.width/2, actualY);
    [self addChild:monster];

    // Determine speed of the monster
    int minDuration = 2.0;
    int maxDuration = 4.0;
    int rangeDuration = maxDuration - minDuration;
    int actualDuration = (arc4random() % rangeDuration) + minDuration;

    // Create the actions
    CCMoveTo * actionMove = [CCMoveTo actionWithDuration:actualDuration
                                                position:ccp(-monster.contentSize.width/2, actualY)];
    CCCallBlockN * actionMoveDone = [CCCallBlockN actionWithBlock:^(CCNode *node) {
        [node removeFromParentAndCleanup:YES];
    }];
    [monster runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];

}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super's" return value
    if( (self=[super initWithColor:ccc4(255,0,255,255)]) ) {

        CGSize winSize = [CCDirector sharedDirector].winSize;
        CCSprite *player = [CCSprite spriteWithFile:@"carteIntrouvable.png"];
        player.position = ccp(player.contentSize.width/2, winSize.height/2);
        [self addChild:player];

        [self setIsTouchEnabled:YES];

        [self schedule:@selector(gameLogic:) interval:1.0];

            }
    return self;
}

-(void)gameLogic:(ccTime)dt {
    [self addMonster];
} 
```

现在，我不知道我做错了什么，图层出现但它是**黑色**的，即使我`initWithColor`在`-(id) init`.

**如何更改图层的背景颜色，因为如果我不将 cocos2d 与 UIKit 集成，代码可以工作...？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T18:48:24.453

替代解决方案：将 CCLayerColor 添加到基础层。

```
-(void) onEnter
{
    [super onEnter];
    ccColor4B color = {255,255,0,255};
    CCLayerColor *colorLayer = [CCLayerColor layerWithColor:color];
    [self addChild:colorLayer z:LAST_LAYER_PLUS_1];
} 
```

# c++ - Qt中的PaintEvent为类的每个实例绘制相同的所有小部件

> ID：15464614
> 
> 赞同：0
> 
> 时间：2013-03-17T18:36:44.510
> 
> 标签：c++, qt, qpainter, paintevent

我有一个名为 MotionVectorDisplay 的类，它继承自 QWidget 并且我覆盖了paintevent，我对这个类所做的是为大小为 16x16 的特定宏块绘制运动矢量，并且一帧中有多个这些宏块，所以我创建了一个新的为每个宏块创建此类的实例，传入多个参数以构建运动矢量，并将该小部件作为父小部件传递给另一个小部件以进行显示。这一切都按预期工作，但我得到这样的输出![框架](../Images/d9d347e1981884e286464011d77a4f9f.png)

在我看来，当调用paintevent时，它会记住最后一次调用paint事件并保留绘制的线条并在图片中创建丑陋的混乱，这应该为几个宏块显示几行而不是全部他们。这是代码

```
mv = new MotionVectorDisplay(pics[frameCounter].motionVect, 
                             pics[frameCounter].subMotionVector,
                             macBlockParent);
mv->stackUnder(cooefsLink);
QGraphicsOpacityEffect* effect = 
        new QGraphicsOpacityEffect(mv);
effect->setOpacity(0.9);
mv->setGraphicsEffect(effect);
if(mvToggle->checkState() == Qt::Checked)
{
    mv->show();
}
else
{
    mv->hide();
}
motionVectorsContain.push_back(mv); 
```

在 MainWindow 类中构造宏块，这是 MotionVectorDisplay 类中的构造函数和 PaintEvent

```
MotionVectorDisplay::MotionVectorDisplay(const pair<string, string>& motionVect,
                                         const vector<pair<string, string> >& subMotionVect,
                                         QWidget* parent)
                                         : QWidget(parent)
{
    this->setFixedSize(16, 16);
    this->setStyleSheet("background-color: transparent;");
    motionVectors = &motionVect;
    subMotionVectors = &subMotionVect;
}

void MotionVectorDisplay::paintEvent(QPaintEvent *event)
{
    QPainter painter(this);
    painter.setPen(QPen(Qt::black, 1.5));

    for(int subMotVects = 0; subMotVects < subMotionVectors->size(); subMotVects++)
    {
        string x = subMotionVectors->at(subMotVects).first;
        string y = subMotionVectors->at(subMotVects).second;
        if(subMotVects == 0)
        {
            painter.drawLine(0, 0, atoi(x.c_str()), atoi(y.c_str()));
        }
        else if(subMotVects == 1)
        {
            painter.drawLine(4, 4, atoi(x.c_str()), atoi(y.c_str()));
        }
        else if(subMotVects == 2)
        {
            painter.drawLine(8, 8, atoi(x.c_str()), atoi(y.c_str()));
        }
        else
        {
            painter.drawLine(12, 12, atoi(x.c_str()), atoi(y.c_str()));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:28:56.637

我怀疑您需要将小部件上的 OpaquePaintEvent 标志设置为 false：

```
this->setAttribute(Qt::WA_OpaquePaintEvent, false); 
```

或者（并且更常见），您将在每个绘制事件中重新绘制小部件的每个像素，以便它基本上覆盖之前绘制的任何内容，就像在绘制事件开始时这样：

```
painter.setBrush( Qt::black ); // Or whatever your background color is
painter.drawRect( rect() ); 
```

# java - java中的32位十六进制字符串到浮点数

> ID：15464618
> 
> 赞同：0
> 
> 时间：2013-03-17T18:37:02.790
> 
> 标签：java, floating-point

我有以下字符串“ `0x4B196DAF`”。我想得到像“ `10055087.000000`”这样的输出。

我的一段代码显示了一个奇怪的输出，比如“ `1.0055087E7`”

```
long l = Long.parseLong(hexval, 16);
return Float.intBitsToFloat(l.intValue()); 
```

我也试过

```
long l = Long.parseLong(hexval, 16);
return Double.longBitsToDouble(l.longValue()); 
```

但没有任何帮助。我检查了几个显示正确输出的网站。我无法准确找出问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:40:33.270

我假设您想将其打印为字符串，请在某处调用 toString()。达到限制后，它将给出科学计数法。

您可以尝试使用：

```
int hex = 0x4B196DAF;
float f = Float.intBitsToFloat(hex);
System.out.println(f);
System.out.printf("%f", f); 
```

输出 ....

```
1.0055087E7
10055087.00000010055087 
```

或者，如果您愿意，可以尝试使用 NumberFormat，这将允许您设置最小小数位数：

```
NumberFormat nf = NumberFormat.getInstance();
nf.setGroupingUsed(false);
nf.setMinimumFractionDigits(6);

System.out.println(nf.format(f)); 
```

输出 ....

```
10055087.000000 
```

我希望它会有所帮助。

# c++ - 以下 5 行代码是否会导致内存泄漏？

> ID：15464621
> 
> 赞同：0
> 
> 时间：2013-03-17T18:37:27.380
> 
> 标签：c++, oop, pointers, memory, memory-leaks

这是否会导致内存泄漏，因为 pWinsock 没有在函数内被删除？

```
Winsock* CreateWinsock()
{
    Winsock* pWinsock=new Winsock;

    return pWinsock;
} 
```

编辑：实际上，我无法删除我的指针，因为它是 Game (pWinsock) 的成员，它在上面的代码中接收了新创建的 Winsock。这有什么问题吗？

```
class Game{
public:
    Game();
    ~Game();

    void CreateWindowClass(HINSTANCE);
    void CreateRessources(HINSTANCE);

    void ShowLoginScreen();

    HWND Getm_hWnd();

public:
    D2DResources* pD2DResources;
    Winsock* pWinsock;
    MessageLog* pMessageLog;

private:
    HWND m_hWnd;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:42:22.590

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:43:20.630

如果这个函数的调用者在使用后删除了指针，就没有泄漏。因此，仅给出这段代码就无法评论内存泄漏。

要避免**调用者忘记删除对象的**这种情况，请使用[共享指针](http://en.cppreference.com/w/cpp/memory/shared_ptr)或其他[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:44:26.823

不，所做的只是将指针传回给 Winsock。例如

```
Winsock* ws = CreateWinsock();
ws->doSomething();
//......
//some more stuff
//......
//Finished using Winsock
delete ws; 
```

如果在您使用完 Winsock 后没有在那里调用 delete，那么这将被视为内存泄漏，因为当 Winsock 不再使用时，内存将被占用。

# dojox.grid.datagrid - 带有空数据的 Dojox.grid.DataGrid

> ID：15464626
> 
> 赞同：0
> 
> 时间：2013-03-17T18:38:01.977
> 
> 标签：dojox.grid.datagrid, dojo

我的问题是数据网格没有出现我需要它为空，以便我可以添加项目以与现有的 FilteringSelect Formatter 建立关系。

```
function formatter1() {
            var x = new FilteringSelect({
            name: "Account Select",
            //value: "1",
            store: remoteData,
            searchAttr: "name",
            onChange: function () {
                console.log("EI");
            }

        });
        x._destroyOnRemove=true;
        return x;
} 
```

// 关系数据网格

```
var DataRelations = { identifier: "id", items: [] };

storeRelations = new Write({data: DataRelations, clearOnClose: true });

var layoutRelations = [
    {'name': "Words", field: "word", width: 40 },
    {'name': "Account", field: "id", width: 40, formatter: formatter1 }

    //,{'name': "Accounts Available", field: "AccountsAvailable", width: 20, formatter: formatter1}
];

var gridRelations = new DataGrid({
        id: 'gridRelations',
        store: storeRelations,
        structure: layoutRelations,
    rowSelector: '10px'
});

/*append the new grid to the div*/
gridRelations.placeAt("gridDivRelations");

/*Call startup() to render the grid*/
gridRelations.startup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:07:08.320

这是一个基于您的代码的工作 jsfiddle：

[http://jsfiddle.net/LFk8Z/](http://jsfiddle.net/LFk8Z/)

您需要为网格的 DIV 容器指定宽度和高度。也许这就是最初的问题。您还需要加载网格 css 资源。您的格式化程序函数没有参数，但您需要指定一个：

```
function formatter1(x) {
// Format cell value (which is in x) in here.
} 
```

# sql - 使用 google bigquery 做同期群分析

> ID：15464633
> 
> 赞同：0
> 
> 时间：2013-03-17T18:38:24.147
> 
> 标签：sql, google-bigquery

假设我们有非规范化数据：( 100M of )

```
{
   user_cohort:      number, // weekly cohort
   user_action_date: number, // number of weeks after registration
   user_action:      string, // 
   ...
} 
```

如何编写生成队列报告的查询？（假设每周或每月分析）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:23:51.200

开始队列分析的一个好方法是根据时间段对结果进行分组。

SELECT user_action_date FROM [table] WHERE user_action = 'something' and user_cohort = 4 GROUP BY user_action_date;

如果您使用更精细的时间戳数据，则有一个集合可以从 TIMESTAMP 数据类型中提取 DAY 等，或者从 POSIX 时间戳中以整数格式返回 HOUR、DAY、MONTH 等。

# javascript - 如何使用jQuery选择隐藏表格中的行

> ID：15464636
> 
> 赞同：0
> 
> 时间：2013-03-17T18:38:26.817
> 
> 标签：javascript, jquery

这是我的桌子：http: [//i.stack.imgur.com/sFwZR.jpg](http://i.stack.imgur.com/sFwZR.jpg)

这里我有一个表，我需要隐藏所有行（tr），其中 Course（表的 td）是 2（例如），并留下其他行。第二种情况是保留课程为 2 的所有例外（例如）。拜托，你能建议我如何正确地做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:46:42.073

这应该工作正常..

```
$('#yourTableID tr').each(function(){
    if($(this).find('td:eq(1)').text().trim()=='2'){
        $(this).hide();
    }
}); 
```

# sql - 为什么当两个表内部连接时结果集中缺少一些行

> ID：15464645
> 
> 赞同：-3
> 
> 时间：2013-03-17T18:38:55.927
> 
> 标签：sql, sql-server, left-join

我的查询没有显示整个零行。我的意思是..在我的输出中有一些行，在所有列中其输出为零。我的输出中没有显示特定的行。我希望在我的输出中什至零行

我得到这样的输出

```
 abc  1  2  3 
    def  4  5  6
    xyz  2  5  4
    mng  2  5  6 
```

但我需要的实际输出是

```
 abc  1  2  3 
    def  4  5  6
    ghf  0  0  0
    xyz  2  5  4
    mng  2  5  6
    jkl  0  0  0 
```

正在消除包含零的行。

我在两个表之间使用连接.. 我使用的第一列按阶段分组。其余列是总和的结果..

输出中为零的原因是，我在辅助表中没有这些名称的数据..不存在任何数据..但我想显示为零而不是错过整个列。

这是我使用的查询.....

```
SELECT 
    [ASACCT].ACCT_MO_I as 'Types'
    ,sum(CASE when [TECH_V].[CLOS_T]='N4' THEN 1 ELSE 0 END) AS 'N4'
    ,SUM(CASE when [TECH_V].[CLOS_T]='N3' THEN 1 ELSE 0 END) AS 'N3'
    ,SUM(CASE when [TECH_V].[CLOS_T]='N2' THEN 1 ELSE 0 END) AS 'N2'
FROM [supt_oper_anls_dw].[dbo].[TECH_V] as [TECH_V]
LEFT OUTER JOIN [supt_oper_anls_dw].[dbo].ACCT_DATE_DIM AS [ASACCT] 
    ON CONVERT(varchar(10),[ASACCT].GREG_D, 101) = CONVERT(varchar(10), [TECH_V].[OPEN_TS], 101)
WHERE 
    [TECH_INCDT_V].[KGRP_I] ='73fd71ecf84f5080217683869fd819c3'
    and ((
            [ASACCT].ACCT_MO_I >(datepart(MONTH,getdate()))-1-6 
            and [ASACCT].ACCT_MO_I <=(datepart (MONTH,getdate()))-1 
            and [ASACCT].ACCT_YR_I = (datepart(year,getdate()))
        )
        or (
            [ASACCT].ACCT_MO_I>(datepart(MONTH,getdate()))-6-1+12 
            and [ASACCT].ACCT_YR_I = (datepart(year,getdate()))-1
        ))
    and [TECH_V].Notes like '%MFTFD%'
    and [TECH_V].notes like '%DEV%'
group by 
    [ASACCT].ACCT_MO_I,[ASACCT].ACCT_YR_I 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:42:28.463

尝试这个

```
use left or right join 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:23:54.143

`LEFT JOIN`在您的查询中尝试 a 。如果你这样做了，`A LEFT JOIN B`那么一切都`A`将在结果中。尝试这个

```
create table #a_table 
( a int)
insert into #a_table
values
( 100),
( 200),
( 300),
( 400)

create table #b_table 
( b int)
insert into #b_table
values
( 100),
( 200),
( 300),
( 600),
( 700),
( 900)

--inner join
select * 
from   #a_table a
    inner join #b_table b
        on a.a = b.b

--left outer join   
select * 
from   #a_table a
       left outer join #b_table b
        on a.a = b.b 
```

然后尝试注释掉查询的各个部分，以查看脚本的其他部分是否限制了返回的内容。

我怀疑如果您注释掉大部分`WHERE`子句，那么您想要的行将在结果集中。

在我的简化示例中，我可以添加以下`WHERE`子句....

```
select * 
from   #a_table a
       left outer join #b_table b
        on a.a = b.b
where b.b >10 
```

...该行现在已经从结果中消失了。所以现在你需要开始应用`ISNULL`or`COALESCE`函数......

```
select * 
from   #a_table a
       left outer join #b_table b
        on a.a = b.b
where ISNULL(b.b,11) >10 
```

# jquery - 具有接触边界的 div 网格 - 停止加倍

> ID：15464646
> 
> 赞同：0
> 
> 时间：2013-03-17T18:38:59.290
> 
> 标签：jquery, html, css

我正在尝试创建一个 div 网格（不使用表格！）。我不希望发生任何加倍的边界，它应该都是 1px。

我已经完成了以下工作，当网格已满时效果很好：

[http://jsfiddle.net/vrLhY/](http://jsfiddle.net/vrLhY/)

其基础是以下css：

```
.box {
    width: 33%;
    float: left;
    box-sizing: border-box;
    display:inline-block;           
    border-left:1px solid black;
    border-top:1px solid black;
}

.outer {
    width: 100%;
    height: auto;
    line-height: 0;
    border-right:1px solid black;
    border-bottom:1px solid black;
} 
```

但是，当项目丢失时（如上面的示例），会出现一些缺失的边框（div 6 的底部，div 8 的右侧），正如我使用的解决方案所预期的那样。

有没有人有更好的方法来做到这一点？我真的不想添加空白 div，但会接受 jQuery 解决方案。

编辑：宽度可能并不总是 33% - 有时可能是 25% 甚至 10%，所以这里的 css 表格解决方案可能也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:25:30.257

不确定这是否会涵盖所有可能的情况，但您可能想要切换它并给外框一个上/左边框，每个单独的 div 一个下/右边框：

```
.box {
    width: 33%;
    float: left;
    box-sizing: border-box;
    display:inline-block;           
    border-right:1px solid black;
    border-bottom:1px solid black;
}

.outer {
    width: 100%;
    height: auto;
    line-height: 0;
    border-left:1px solid black;
    border-top:1px solid black;
}

.clearboth {
    clear: both;
} 
```

见：http: [//jsfiddle.net/senff/vrLhY/41/](http://jsfiddle.net/senff/vrLhY/41/)

如果您还需要右下角的边框（其中有一个 DIV“缺失”），那么您可以给外框也设置一个右下角边框，然后使用一些负边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:48:09.090

尝试使用显示表格，表格单元格......像这样的东西： -

```
<div class="outer">
    <div class="boxrow">
    <div class="box">
         <h2>DIV</h2>

    </div>
    <div class="box">
         <h2>DIV</h2>

    </div>
    <div class="box">
         <h2>DIV</h2>

    </div>
    </div>
    <div class="boxrow">
    <div class="box">
         <h2>DIV</h2>

    </div>
    <div class="box">
         <h2>DIV</h2>

    </div>
    <div class="box">
         <h2>DIV</h2>

    </div>
    </div>
    <div class="boxrow">
    <div class="box">
         <h2>DIV</h2>

    </div>
    <div class="box">
         <h2>DIV</h2>

    </div>
    </div>

</div>

.box {
    display:table-cell;
    border:1px solid;
}
.outer {
    display: table;
    border:1px solid;
}
.clearboth {
    clear: both;
}
.boxrow{
    display:table-row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:53:37.600

动态添加类对您来说是一个可行的选择吗？

您可以在每一行的末尾添加最后一个类，然后在最后一行的每个项目中添加一个底部类。

```
.last {border-right:0;}
.bottom {border-bottom:0;} 
```

然后会给你这样的东西 - [http://jsfiddle.net/vrLhY/39/](http://jsfiddle.net/vrLhY/39/)

# android - Android Listview浮动第一行

> ID：15464649
> 
> 赞同：8
> 
> 时间：2013-03-17T18:39:07.183
> 
> 标签：android, facebook, user-interface

我正在尝试找到实现 Facebook 的最佳方法，例如列表视图上的浮动行

![状态、照片、签到](../Images/f26ff77884a2dd7c97ab880326cbdc38.png)

向下滚动时，status-photo-checkin 会消失，以便为列表留出更多空间，向上滚动时会再次出现。任何人都知道如何实现这个或将我引导到现有的组件/库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T01:17:55.930

它被称为快速返回模式，Roman 在这里通过示例对其进行了详细解释：

[https://plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt](https://plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T20:12:10.700

您可以在这两个页面上找到实现：

*   [https://github.com/LarsWerkman/QuickReturnListView](https://github.com/LarsWerkman/QuickReturnListView)
*   [https://github.com/ManuelPeinado/QuickReturnHeader](https://github.com/ManuelPeinado/QuickReturnHeader)

我建议您阅读以下博客文章，其中讨论何时使用和不使用此 ui 模式：[http ://www.androiduipatterns.com/2012/08/an-emerging-ui-pattern-quick-return.html](http://www.androiduipatterns.com/2012/08/an-emerging-ui-pattern-quick-return.html)

# netsuite - 如何在保存的搜索中包含复杂的公式字段

> ID：15464650
> 
> 赞同：1
> 
> 时间：2013-03-17T18:39:08.093
> 
> 标签：netsuite

我是 Netsuite 的新手。我想在保存的搜索中计算一个复杂的分组结果字段，例如平均（价格）* 最大值（数量）。

我知道 SQL，以及 Netsuite 中称为公式的东西。我曾尝试编写一个公式来计算它，但失败了。

是否可以用公式计算如此复杂的字段？如果没有，怎么办？Javascript自定义代码？请给我一点提示，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:02:15.397

在自定义搜索的“结果”选项卡上，选择要检索平均值和最大值的字段，然后在“摘要类型”上根据字段选择平均值或最大值。

然后您添加另一个字段，该字段将是“公式（数字）”并在您放置的“公式”列中

```
{averageField} * {maxField} 
```

有一个弹出窗口可以帮助您。

```
- Hope I was clear, good luck.

- Also I hope I answered on time. 
```

# c - 在 C 程序中使用#define

> ID：15464652
> 
> 赞同：27
> 
> 时间：2013-03-17T18:39:12.410
> 
> 标签：c, c-preprocessor

我正在尝试`#define`在我的程序中定义一个常量。我意识到我可以使用`const`，但我试图很好地理解`#define`. 有人可以解释为什么下面的代码不起作用，而是应该做吗？

```
#include <stdio.h>
#define M 20;
typedef int Marray_t[M][M]; //I can't define an M x M array

int main() {
  Marray_t A;
  int i;

  for (i = 0; i < M; ++i) { //Can't iterate up to M
    A[i] = i;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-17T18:40:29.100

你必须删除`;`之后`20`，像这样

```
#define M 20 
```

# vbscript - 如何防止隐藏文件夹被搜索？

> ID：15464657
> 
> 赞同：0
> 
> 时间：2013-03-17T18:39:38.690
> 
> 标签：vbscript, hidden, fso

我是 vbscript 的新手，但我需要编写一个 vbscript 来创建一个新目录并将其属性设置为隐藏...现在我希望它不应该在用户搜索隐藏文件夹时显示。有人可以帮助我如何实现这一目标吗？这是我的小代码

```
Dim objFSO, objFolder, strDiretory, 

strDirectory = "E:\logs"

Set objFSO = CreateObject("Scripting.FileSystemObject")

      Set objFolder = objFSO.CreateFolder(strDirectory)

   Set objFolder = objFSO.getFolder(strDirectory)
   objFolder.Attributes = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:00:10.153

如果我没记错的话，隐藏文件夹使用属性 2，而不是 1。尝试使用以下代码代替您的代码来设置属性：

```
If objFolder.Attributes = objFolder.Attributes AND 2 Then
    objFolder.Attributes = objFolder.Attributes XOR 2
End If 
```

# xcode - 将 segue 推到滚动视图显示错误

> ID：15464658
> 
> 赞同：0
> 
> 时间：2013-03-17T18:39:45.343
> 
> 标签：xcode, scrollview, push

也许这是一个相当简单的问题。我不知道。我在论坛中搜索了答案，但找不到答案。我有两种看法。我从一个表格单元推到包含滚动视图（960 x 455）的第二个视图。此滚动视图在加载时居中。

每当我进入这个视图时，不应该立即可见的滚动左侧部分会显示几秒钟。当我向后推时也会发生同样的情况。有没有办法进入第二个视图并且只显示滚动视图的中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:29:27.793

我会认为这是因为视图正在加载，然后位置被设置，这可能需要一段时间，当视图第一次被加载时，因为在设置位置之前正在处理其他事情。

我假设您正在使用界面构建器，如果因此我建议在其中将 UIScrollViews 可见/隐藏属性设置为 true，然后在 viewDidLoad 方法中将其位置设置为中心，然后您可以将其设置为再次可见。

# eclipse - 让 JavaSE-1.7 与 Eclipse 一起工作

> ID：15464659
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:39:53.127
> 
> 标签：eclipse, java

好的，所以，我已经安装了 Java。而这里的JDK [http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)我的`jre7`文件夹在`C:\Program Files\Java`. 那种事情，当我去 Eclipse 时，我得到了这个：

![在此处输入图像描述](../Images/6dc9188f9cd694b2725e819ad0cc9e67.png)

JavaSE-1.7 在哪里？我猜我有 1.6... 我正在尝试下载 jdk7 但显然，我已经安装了它。

我运行 Windows 7（32 位）。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:43:19.200

Java 7 对 Eclipse 的支持不是 Indigo 版本的一部分（看起来您正在运行）。我相信您必须[下载](http://download.eclipse.org/eclipse/downloads/)最新版本的 Eclipse 才能获得 Java 7 支持。

有关详细信息，请参阅

*   [http://wiki.eclipse.org/JDT_Core/Java7](http://wiki.eclipse.org/JDT_Core/Java7)
*   [http://wiki.eclipse.org/JDT/Eclipse_Java_7_Support_%28BETA%29](http://wiki.eclipse.org/JDT/Eclipse_Java_7_Support_%28BETA%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:51:18.903

我认为在 Indigo SR1 中对 Java 7 的支持已经存在了一段时间。

[http://eclipse.org/org/press-release/20110929_indigosr1.php](http://eclipse.org/org/press-release/20110929_indigosr1.php)

你要做的是；

配置“默认 jre”或配置“项目特定 jre”

（然后单击一些看起来相关的按钮：http: [//xkcd.com/627/](http://xkcd.com/627/)）

然后您可能还需要更改项目属性中的 java 编译器级别设置。

# search - 在 SOLR 4.1 中对带有空格的短语使用 termfreq(field,term) 函数

> ID：15464660
> 
> 赞同：2
> 
> 时间：2013-03-17T18:39:57.483
> 
> 标签：search, solr, analyzer, term, phrase

我正在使用 termfreq(field,term) [SOLR 函数](http://wiki.apache.org/solr/FunctionQuery#termfreq)。这有效：

```
?fl=product_name,termfreq(product_name,"iphon")&q=iphone 4s     //Found freq 
```

但问题是有像“iphone 4s”这样的词有空格

```
?fl=product_name,termfreq(product_name,"iphon 4s")&q=iphone 4s  //Return 0 freq 
```

尽管文档中存在该术语（短语），但返回 0 频率。所以，问题是，我可以使用带有完整短语的 termfreq() 函数，如“iphone 4s”，如何？

我正在使用 SOLR 4.1。字段分析器是

```
<fieldType name="text_ws" class="solr.TextField">
    <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
</fieldType> 
```

字段是

```
<field name="product_name" type="text_ws" indexed="true" stored="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:21:12.797

当您使用时，`WhitespaceTokenizerFactory`该术语`iphone 4s`不会作为术语存在。
您可以使用 KeywordTokenizerFactory 进行索引，它不会标记单词并且短语应该可用。
否则，您可以检查可以为您分组单词的 shingle 选项。

# r - 在 R 中缩放 data.table 列的子集

> ID：15464661
> 
> 赞同：4
> 
> 时间：2013-03-17T18:40:05.107
> 
> 标签：r, data.table

我想`scale`在我的`data.table`. 其中有很多我想要的，`scale`所以我想避免按名称指定它们。未缩放的列，我只想按原样返回。这是我希望的工作，但它没有：

```
require(data.table)
x = data.table(id=1:10, a=sample(1:10,10), b=sample(1:10,10), c=sample(1:10,10))
> dput(x)
structure(list(id = 1:10, a = c(1L, 6L, 10L, 7L, 5L, 3L, 2L, 
4L, 9L, 8L), b = c(4L, 9L, 5L, 7L, 6L, 1L, 8L, 10L, 3L, 2L), 
    c = c(2L, 7L, 5L, 6L, 4L, 1L, 10L, 9L, 8L, 3L)), .Names = c("id", 
"a", "b", "c"), row.names = c(NA, -10L), class = c("data.table", 
"data.frame"), .internal.selfref = <pointer: 0x1a85d088>)

sx = x[,c(id, lapply(.SD, function(v) as.vector(scale(v)))), .SDcols = colnames(x)[2:4]]
   Error in eval(expr, envir, enclos) : object 'id' not found 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T21:25:05.457

您还可以在数据表的副本中通过引用分配

```
sc <- names(x)[2:4]

sx <- copy(x)[ , (sc) := as.data.table(scale(.SD)), .SDcols = sc] 
```

scale 返回一个矩阵，而 iirc data.table 不喜欢矩阵列。

或者，

```
sx <- copy(x)[ , (sc) := lapply(.SD,scale), .SDcols = sc] 
```

[ 周围的括号`(sc)`告诉从调用范围内的变量值而不是列名本身`data.table`中获取 LHS 值。`sc`]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T18:49:49.717

```
sx = cbind(x[,-(2:4)],data.table(scale(x[,2:4]))) 
```

我怀疑，您的工作流程将 data.table 转换为长格式会更好。

# javascript - 提交表单并将其显示在 javascript div 而不是 iframe 中？

> ID：15464670
> 
> 赞同：0
> 
> 时间：2013-03-17T18:40:28.553
> 
> 标签：javascript, ajax, html, iframe

有人告诉我使用 Javascript Div 而不是 iframe，我对此完全陌生，所以请慢点，哈哈

基本上，我想发布从外部站点获取的表单结果，以将其显示在我的当前页面或其他页面上。

未提交时隐藏

希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:54:03.140

正如@MattDiamant 建议的那样，您应该尝试 AJAX。我可以推荐的一个很好的介绍性参考是[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

如果您对问题的性质更清楚一点，我本可以提供更直接的解决方案，但通常 AJAX 似乎是与服务器交换数据和更新网页部分的非常好的方法 - 无需重新加载整个页面.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:49:00.533

=====可能的解决方案===============

浏览您计划使用的外部页面后。这是我建议你做的事情。

1.  您将需要研究站点搜索结果的 URL。举个例子，我会搜索follo： 下车： 相同地点 取车地点： New York, NY (JFK-John F Kennedy Intl) 取车日期： 03/22/2013 时间： 3:00pm 下车日期： 03/30/2013 时间: 7:00pm 你有租车公司的偏好吗？没有偏好

这是结果页面的链接：

[https://booking.montrosetravel.com/travel/car/availability.rvlx?country_code=US&pickup_city=JFK&return_city=JFK&pickup_month=03&pickup_day=22&pickup_time=15&return_month=03&return_day=30&return_time=19&pickup_time_minutes=0&return_time_minutes=0&car_type=ACAR_non_location=ACAR_com &pickup_year=2013&return_year=2013&car_renter_age=0&transmission=automatic&air_conditioning=ac&SESSID=23eb40d2087e58696a40c68dfaa1b0f2](https://booking.montrosetravel.com/travel/car/availability.rvlx?country_code=US&pickup_city=JFK&return_city=JFK&pickup_month=03&pickup_day=22&pickup_time=15&return_month=03&return_day=30&return_time=19&pickup_time_minutes=0&return_time_minutes=0&car_type=ACAR&car_company=&nonairport_location=A&car_sort=&country_code=&pickup_year=2013&return_year=2013&car_renter_age=0&transmission=automatic&air_conditioning=ac&SESSID=23eb40d2087e58696a40c68dfaa1b0f2)

将这个 URL 分解成几部分，它会让你了解网站的工作原理，你需要做的就是弄清楚传递给他们的搜索引擎的参数。

如果您能够执行上述操作，则可以通过您的站点提供任何参数，然后执行以下第二步即可获得所需的结果。

1.  传递正确的参数后，您可以使用 iframe 在您的网站上显示整个页面，如下所示：

    ```
     <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

     <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

          <body>

                <iframe src="https://booking.montrosetravel.com/travel/car/availability.rvlx?country_code=US&pickup_city=JFK&return_city=JFK&pickup_month=03&pickup_day=22&pickup_time=15&return_month=03&return_day=30&return_time=19&pickup_time_minutes=0&return_time_minutes=0&car_type=ACAR&car_company=&nonairport_location=A&car_sort=&country_code=&pickup_year=2013&return_year=2013&car_renter_age=0&transmission=automatic&air_conditioning=ac&SESSID=23eb40d2087e58696a40c68dfaa1b0f2">
                     <p>Your browser does not support iframes.</p>
                </iframe>

          </body>
    </html> 
    ```

我希望这有帮助

调频

# node.js - 通过 Heroku 部署第一个 Node 应用程序时出现问题

> ID：15464672
> 
> 赞同：2
> 
> 时间：2013-03-17T18:40:29.373
> 
> 标签：node.js, heroku, express

按照 12devs of Xmas 教程创建我的第一个 Node.js 应用程序（[http://12devsofxmas.co.uk/post/2012-12-28-day-3-realtime-collaborative-drawing-with-nodejs](http://12devsofxmas.co.uk/post/2012-12-28-day-3-realtime-collaborative-drawing-with-nodejs)）我'我现在尝试按照 Rob Dodson 的教程通过 Heroku 部署它（[http://robdodson.me/blog/2012/06/04/deploying-your-first-node-dot-js-and-socket-dot-io-应用程序到heroku/](http://robdodson.me/blog/2012/06/04/deploying-your-first-node-dot-js-and-socket-dot-io-app-to-heroku/)）

但是，在提交到 github 后，当我尝试推送到 Heroku 时，我得到以下错误输出：

```
-----> Installing dependencies with npm
       npm WARN package.json Draw@0.0.1 No README.md file found!
       npm http GET https://registry.npmjs.org/express
       npm http 200 https://registry.npmjs.org/express
       npm http GET https://registry.npmjs.org/express/-/express-2.5.11.tgz
       npm http 200 https://registry.npmjs.org/express/-/express-2.5.11.tgz
       npm ERR! Refusing to delete: /tmp/build_1t6d7hbd2psal/node_modules/.bin/express not in /tmp/build_1t6d7hbd2psal/node_modules/express
       File exists: /tmp/build_1t6d7hbd2psal/node_modules/.bin/express
       Move it away, and try again.

       npm ERR! System Linux 2.6.32-350-ec2
       npm ERR! command "/tmp/node-node-Fenl/bin/node" "/tmp/node-npm-6pyT/cli.js" "install" "--production"
       npm ERR! cwd /tmp/build_1t6d7hbd2psal
       npm ERR! node -v v0.6.20
       npm ERR! npm -v 1.1.65
       npm ERR! path /tmp/build_1t6d7hbd2psal/node_modules/.bin/express
       npm ERR! code EEXIST
       npm ERR!
       npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_1t6d7hbd2psal/npm-debug.log
       npm ERR! not ok code undefined
       npm ERR! not ok code 1
!     Failed to install --production dependencies with npm

!     Heroku push rejected, failed to compile Node.js app

To git@heroku.com:secure-dawn-2437.git

! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:secure-dawn-2437.git' 
```

我的 package.json 文件如下：

```
{
    "name": "Draw",
    "version": "0.0.1",
    "private": true,
    "dependencies": {
      "express": "~2.x",
      "socket.io": "~0.9.x"
    },
    "engines": {
      "node": "0.6.x",
      "npm": "1.1.x"
    }
} 
```

对不起 - 我对这种开发完全陌生，在学校期间主要使用 Java 工作，但我很想学习。我认为问题出在 express 上，但我不确定“将其移开，然后重试”是什么意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T18:49:57.857

我可以通过暂时禁用 Heroku 对缓存的使用来解决这个问题：

`heroku config:set NODE_MODULES_CACHE=false`

推送构建，然后重新打开缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:38:41.383

`Procfile`您尝试部署的应用程序中有文件吗？

如果没有，请查看 Heroku 网站上提供的文档：

[https://devcenter.heroku.com/articles/nodejs#declare-process-types-with-procfile](https://devcenter.heroku.com/articles/nodejs#declare-process-types-with-procfile)

**编辑：**

我强烈建议您首先部署一个非常简单的 Node.js 应用程序（例如 Hello World），这样您就可以追溯错误的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:01:11.723

尝试从 .gitignore 中删除 bin 和 .bin 或将 node_modules 添加到 .gitignore。更多信息：[无法将 node.js 应用程序部署到 heroku](https://stackoverflow.com/questions/13321231/fail-to-deploy-node-js-application-to-heroku/15559443#15559443)

# c - 如何在同一个文本文件中读取多行？

> ID：15464675
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:40:33.207
> 
> 标签：c

此代码仅读取文本文件中的第一行。如何在同一个文本文件中读取多行？谢谢你。
lname fname 的 GPA 为 88.0
lname fname 的 GPA 为 90.0

```
#include <stdio.h>
#include <stdlib.h>
struct stud{
char fname[21];
char lname[21];
float gpa;
} str;

int getStudData(struct stud *current_ptr); // struct function format 

int main(void){
struct stud str;
getStudData(&str);

printf("Last Name: %s\n First Name: %s\n GPA: %.2f\n"
    , str.fname, str.lname, str.gpa);
return 0;
}

int getStudData(struct stud *current_ptr){

FILE *studFile; // declaring a pointer file variable

studFile = fopen("StudData.txt", "r"); // format for fopen; file-variable = fopen(file_name, mode);

if ( studFile == NULL){ 
    printf("Error: Unable to open StudData.txt file\n"); //test for error
}
else {
    fscanf(studFile, "%20s %20s has a GPA of %f\n"
        , current_ptr->fname, current_ptr->lname, &current_ptr->gpa);
    // fscanf(file, format, &parameter-1, ...) 

    fclose(studFile); // The function fclose will close the file. 
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:47:44.633

要从输入文件中读取多行，通常指定行尾 (EOL) 字符。在大多数情况下，这是换行符（'\n'），并且从输入文件中读取设置为循环。除非必须读取一行、停止、读取一行、停止和重复……您可以创建一个循环结构来逐行读取文件，直到文件结尾 (EOF)到达。

下面的代码只读取一行然后关闭文件。

```
fscanf(studFile, "%20s %20s has a GPA of %f\n"
        , current_ptr->fname, current_ptr->lname, &current_ptr->gpa);
    // fscanf(file, format, &parameter-1, ...) 

    fclose(studFile); // The function fclose will close the file 
```

# c - C中的素数优化

> ID：15464677
> 
> 赞同：0
> 
> 时间：2013-03-17T18:41:05.567
> 
> 标签：c, primes

我尝试打印素数；2到100万。但是控制台上没有打印任何内容。你能检查我的代码吗？我怎样才能使这段代码更加优化？

这是我的代码：

```
#include <stdio.h>
#include <math.h>

main()
{
   int num, sr, num2;

   for (num = 2; num <= 1000000; num++) {
      sr = (int) sqrt(num);
      for (num2 = 2; sr % num2 != 0; num2++) {
         if (sr == num2) {
            printf("%d\n", sr);
         }
      }
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:49:25.953

它编译了吗？

第 4 行：`main()`应该是？**`int`** `main()`

另一件事：sr = 1。1 模任何数都是 1。

最后。sr 永远不会等于 num2，因为 sr 是 1 而 num2 是 2 或更大，所以它永远不会打印任何东西。

这会让你进入一个什么都不做的无限循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:17:44.313

如果你想优化它，你应该使用像eratosthenes筛子这样的东西。它很容易在你的数据范围内操作。你可以在这里阅读更多关于它的信息： [http ://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:08:35.060

```
 #include <stdio.h>
    #include <math.h>

    int main(){
    int num, sr, num2;
    int isPrime = 1; // this is a check parameter; isPrime = 0 if number is not prime.
    for(num=2; num<=100; num++){
        sr = (int) sqrt(num);
        for(num2=2; num2 <= sr; num2++){
            //num2 <== sr to stop the innner loop
            if(num%num2 == 0){
                //printf("=========== %d|%d\n", num,num2); // uncomment this to see if a number is divisable
                isPrime = 0; // this number is not prime, cos num can be divided by num2
                break;
            }
        }
        if(isPrime){
            printf("Prime number is %d\n", num);
            isPrime = 1; // reset the check parameter
        }else{
            isPrime = 1; // reset the check parameter
        }
    }
         return 0;
    } 
```

此代码有效。既然它有效，我会让你玩它并优化它。如果你不能让我们知道。我们会尽力帮助您。

我喜欢你如何使用 sqrt 来优化代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T20:34:25.267

您可以使用的一种优化是，**所有大于 3 的素数都是 6n+1 或 6n-1 的形式**，并且如果一个数可以被素数整除，那么它就不是素数。这是一些使用该事实的代码：

```
#include <stdio.h>
#include <math.h>

int is_prime(long num)
{
    int k = 1, a = 0, b = 0;
    long sr;
    switch(num)
        {
        case 1: return 0;
        case 2: return 1;
        case 3: return 1;
        case 4: return 0;
        case 5: return 1;
        case 6: return 0;
        case 7: return 1;
    }
    if (num % 2 == 0) return 0;
    if (num % 3 == 0) return 0;
    sr = (int) sqrt(num);
    while (b < sr) {
        a = (6 * k) - 1;
        b = (6 * k) + 1;
        if (num % a == 0)
            return 0;
        if (num % b == 0)
            return 0;
        k += 1;
    }
    return 1;
}

void main(void)
{
    int j;

    for (j = 0; j<100; j++){
        if (is_prime(j))
            printf("%d is a prime\n", j);
    }
} 
```

如果 num 是素数，则此函数返回 1。

# tcp - akka io tcp 服务器

> ID：15464682
> 
> 赞同：0
> 
> 时间：2013-03-17T18:41:13.600
> 
> 标签：tcp, io, akka

我正在使用新的 Akka IO 并遵循本[教程](http://doc.akka.io/docs/akka/snapshot/java/io.html)（这是一个简单的服务器-客户端应用程序）。我的服务器参与者系统代码如下所示：

```
// create the sever system
    ActorSystem tcpServerSystem = ActorSystem.create("tcp-server-system");

    // create the tcp actor
    final ActorRef tcpServer = Tcp.get(tcpServerSystem).manager();

    // create the server actor;
    ActorRef serverActor = tcpServerSystem.actorOf(new Props(ServerActor.class).withRouter(new RoundRobinRouter(5)), "server");

    // tell the tcp server to use an actor for listen connection on;
    final List<Inet.SocketOption> options = new ArrayList<Inet.SocketOption>();
    options.add(TcpSO.reuseAddress(true));

    tcpServer.tell(TcpMessage.bind(serverActor, new InetSocketAddress("127.0.0.1", 12345), 10, options),
            serverActor); 
```

**ServerActor**类只是一个普通的演员，它的onReceive**执行**以下操作：

```
logger.info("Received: " + o);
    if (o instanceof Tcp.Connected){
        connectionActor = getSender();
        connectionActor.tell(TcpMessage.register(getSelf()), getSelf());
        ByteStringBuilder byteStringBuilder = new ByteStringBuilder();
        byteStringBuilder.putBytes("Hello Worlds".getBytes());
        connectionActor.tell(TcpMessage.write(byteStringBuilder.result()), getSelf());
    } 
```

我正在尝试使用 netcat 测试服务器参与者并具有这种“奇怪”的行为：只有第一个连接到服务器的客户端正在接收从服务器发送的消息。nexts 客户端可以连接到服务器但没有收到消息。同样在调试模式下，服务器参与者没有收到**Tcp.Connected**消息（第一个连接的客户端除外），因此无法向客户端发送注册消息，尽管下一个客户端可以连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:15:40.623

这是 2.2-M1 里程碑中的一个已知问题，其中问题是 TcpListener 没有在选择器上注册 AcceptInterest，除非它达到配置的 BatchAcceptLimit，导致如果只有几个连接，它不会收到新接受的通知待办的。

它已被修复，并将成为下一个里程碑版本的一部分。

# c++ - 写入文件的最后 32 个字符

> ID：15464689
> 
> 赞同：1
> 
> 时间：2013-03-17T18:41:48.640
> 
> 标签：c++, file, ofstream, file-processing

我想将信息写入二进制文件的最后 32 个字符。但是当我调用我的 writeInfo 函数时，它会删除整个内容。我可以在写之前读取数据，但是在我用这个函数写之后，它会删除整个内容，而不是写。

```
void Info::writeInfo(char *filedestination)
{
ofstream test;
test.open(filedestination, ios::binary); 
test.seekp(-32, ios::end); // not sure about seekp
test.write(info, 31);
test.close();
} 
```

希望能帮到你，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:50:48.120

您必须以读写模式打开文件以防止调用`open`截断它：

```
test.open(filedestination, ios::binary | ios::in | ios::out); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:44:49.337

[http://www.cplusplus.com/reference/cstdio/fseek/](http://www.cplusplus.com/reference/cstdio/fseek/)

尝试使用 fseek()。上面的链接是文档

# java - 在java中将String / char转换为指定数字的二进制字符串，反之亦然

> ID：15464692
> 
> 赞同：1
> 
> 时间：2013-03-17T18:42:07.717
> 
> 标签：java, string, binary, char

我正在尝试将字符串（或单个字符）转换为 java 中给定位数的二进制字符串。假设给定的数字是 5，所以字符串“zx~q”变为 01101、10110、11011、10011（我已经编写了二进制文件）。但是，我需要再次将这些二进制文件恢复为“abcd”。如果给定的数字发生变化，则数字（因此二进制文件）将发生变化。

有人有想法吗？

PS：`Integer.toBinaryString()`变成8位二进制数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:45:41.870

看起来像`Integer.toString(int i, int radix)`并且`Integer.parseInt(string s, int radix)`会做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:49:06.107

你可以这样实现。

要将**abcd**转换为 1010101111001101，

```
class Demo {
    public static void main(String args[]) {  
        String str = "abcd";
        for(int i = 0; i < str.length(); i++) {
            int number = Integer.parseInt(String.valueOf(str.charAt(i)), 16);
            String binary = Integer.toBinaryString(number);
            System.out.print(binary);
        }
    }
} 
```

将 1010101111001101 转换为 abcd

```
String str = "1010101111001101";
String binary = Long.toHexString(Long.parseLong(str,2));
System.out.print(binary); 
```

# javascript - 为什么这个函数不返回任何东西？

> ID：15464700
> 
> 赞同：0
> 
> 时间：2013-03-17T18:42:56.187
> 
> 标签：javascript, jquery, javascript-events

我正在尝试调试一些测试 - 我有以下代码：

```
test('Can get the test Side',
        function () {
            stop();
            debugger;
            var result = getTestSide();
            debugger;
            changeTestSide(result);
        }
    );

    // Step 1: Get test side
    function getTestSide() {
        $.ajax({
            type: 'GET',
            url: urlWithId,
            success: function (result) {
                return "test success";
                debugger;
                ok(true, "GET succeeded.");
                if (!result.SideId === testSideId) {
                    throw "GET result does not equal testSideId";
                } else {
                    ok(true, "Returned key matches testSide Id.");
                    return result;
                }
            },
            error: function (result) {
                return "test failure";
                debugger;
                throw "Error";
            }
        });
    }; 
```

无论如何，top 方法中的“结果”始终是未定义的。为什么是这样？无论 getTestSide 成功还是失败，我都会返回一个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:49:00.480

`changeTestSide`您应该从`success`and`error`处理程序调用方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:51:20.713

您需要在这里解决一些问题：

```
success: function (result) {
    return "test success";
    debugger;
    ok(true, "GET succeeded.");
    if (!result.SideId === testSideId) {
        throw "GET result does not equal testSideId";
    } else {
        ok(true, "Returned key matches testSide Id.");
        return result;
    }
}, 
```

首先，您需要`changeTestSide(result);`从`success`AJAX 中的函数调用。这是因为 AJAX 默认是异步调用，这意味着您的 javascript 在继续执行函数之前不会等待`getTestSide()`完成执行`test`。其次，在你的`success`函数中，你要做的第一件事就是`return "test success";`让函数返回，并且下面的代码都没有真正运行。这是一个更好的示例，说明您的代码需要是什么样的：

```
success: function (result) {
    debugger;
    ok(true, "GET succeeded.");
    if (!result.SideId === testSideId) {
        throw "GET result does not equal testSideId";
    } else {
        ok(true, "Returned key matches testSide Id.");
        changeTestSide(result);
    }
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:52:44.950

`return`在嵌套内部使用`function`仅从该函数返回。您的代码的结构必须完全不同才能获得您想要的效果。一种方法是将回调函数传递给`getTestSide`它将处理响应，如下所示：

```
test('Can get the test Side',
    function () {
        stop();
        debugger;
        getTestSide(function (result) {
            changeTestSide(result);
        });
    }
);

// Step 1: Get test side
function getTestSide(cb) {
    $.ajax({
        type: 'GET',
        url: urlWithId,
        success: function (result) {
            // removed this because it stops the rest from running
            // return "test success";
            ok(true, "GET succeeded.");
            if (!result.SideId === testSideId) {
                throw "GET result does not equal testSideId";
            } else {
                ok(true, "Returned key matches testSide Id.");
                // Call the callback instead of returning.
                cb(result);
            }
        },
        error: function (result) {
            // removed this because it stops the rest from running
            // return "test failure";
            debugger;
            throw "Error";
        }
    });
}; 
```

您还在`throw`成功和错误回调中使用过；这些也不会像我认为您期望的那样做，因为当这些函数运行时，您的测试函数已经返回，因此您无法捕获这些异常。无论如何，您的代码没有显示任何捕获异常的尝试，所以我没有尝试解决这个问题，但是您可以通过遵循与`$.ajax`函数类似的模式并提供调用者可以实现的回调`success`和回调来解决它。`error`

# android - android - 如何使用 SlidingMenu 库更新 Fragment

> ID：15464701
> 
> 赞同：3
> 
> 时间：2013-03-17T18:43:05.903
> 
> 标签：android, fragment, slidingmenu

我正在使用 jfeinstein10 的 SlidingMenu 库（[点击这里！！！](https://github.com/jfeinstein10/SlidingMenu)）。

在我的 ListFragment 中，我有一个带有动态项的适配器。

但是当我想添加项目时，当我打开我的菜单时，这个项目是不显示的。

**为什么 ？如何更新我的 ListFragment ？**

我调试了我的应用程序，但我的 ListFragment 中的另一种方法在我打开菜单时永远不会调用。

**我的基本活动**

```
public class BaseActivity extends SlidingFragmentActivity {

protected ListFragment mFrag;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // set the Behind View
    setBehindContentView(R.layout.menu_frame);
    FragmentTransaction t = this.getSupportFragmentManager().beginTransaction();
    mFrag = MenuFragment.newInstance(100);
    t.replace(R.id.menu_frame, mFrag);
    t.commit();

    // customize the SlidingMenu
    SlidingMenu sm = getSlidingMenu();
    sm.setShadowWidthRes(R.dimen.shadow_width);
    sm.setShadowDrawable(R.drawable.shadow);
    sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    sm.setFadeDegree(0.35f);
    sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

} 
```

}

**我的菜单片段**

```
public class MenuFragment extends ListFragment {

public MenuFragment() {

}

public static final MenuFragment newInstance(int request) {

    MenuFragment f = new MenuFragment();
    Bundle bdl = new Bundle();

    bdl.putInt("my_request",request);
    f.setArguments(bdl);
    return f;
}

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    return inflater.inflate(R.layout.list, null);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    MenuAdapter adapter = new MenuAdapter(getActivity(),getArguments().getString("current"));
    setListAdapter(adapter);
    getListView().setDividerHeight(0);

} 
```

# java - 即使任务未完成，如何停止执行程序服务线程？

> ID：15464710
> 
> 赞同：2
> 
> 时间：2013-03-17T18:43:48.057
> 
> 标签：java, multithreading, executorservice

我使用执行器服务启动了一些线程以从网络获取一些文件。我希望线程在一段时间后停止执行，即使它们的运行方法没有完成。怎么做？甚至 executor 的 shutdown() 和 awaitTermination(...) 方法也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T18:52:48.467

简单的答案是你不能。Thread.stop() 很久以前（很久很久以前）就被弃用了，因为它不可靠并且容易留下脏资源。

您唯一可以做的另一件事是让您的线程在其工作负载期间暂停并检查退出条件（例如被中断或超过某个预定义的时间限制）。

# visual-studio-2010 - ~\Microsoft Visual Studio 10.0\VC\include 中没有文件

> ID：15464711
> 
> 赞同：3
> 
> 时间：2013-03-17T18:43:49.167
> 
> 标签：visual-studio-2010, windows-8

我刚刚在我的笔记本电脑（运行 Windows8）上安装了 Visual C++ 2010 Express，并创建了一个新项目（Win32 控制台应用程序）。

VS 10 生成所有文件，当我构建解决方案时，我收到以下消息

```
1>------ Rebuild All started: Project: toDelete, Configuration: Debug Win32 ------
1>  stdafx.cpp
1>c:\users\arthur\documents\visual studio 2010\projects\todelete\todelete\stdafx.h(10):     fatal error C1083: Cannot open include file: 'stdio.h': No such file or directory
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

根据我在其他论坛上阅读的内容，我应该在目录中有文件 stdio.h （和其他）

> C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include

看来这个目录只包含一个文件 srv.h 如果我的理解是正确的，Visual C++ Redistributable 会在这个目录下安装这样的文件。我已经重新安装了它，没有任何改变！

请您确认我的理解是正确的，即目录

> C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include

应该包含诸如 stdio.h 之类的文件，然后您知道如何获取它们吗？？？

非常感谢！

# visual-studio-2008 - 从 Crystal Report Viewer 打印时，正在打印无关的页眉和页脚

> ID：15464720
> 
> 赞同：0
> 
> 时间：2013-03-17T18:45:05.393
> 
> 标签：visual-studio-2008, printing, crystal-reports, report

在我的 Visual Studio 2008 Web 应用程序中打印报表时，Crystal Report Viewer 会在报表的左上角打印单词 CrystalReportViewer。报表查看器页面的 url 位于报表的右上角。第 N 页（共 N 页）位于报告的左下方，打印日期和时间位于右下方。基本上我根本不想要这些页眉和页脚行。有没有可以删除它们的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:08:21.090

忘掉这个。不是问题。多余的页眉和页脚实际上是由新版本的 Firefox 默认值引起的。我进入页面设置-页边距/页眉和页脚选项卡并将它们全部设置为空白。这使它恢复到应有的状态。

# html - XPath 选择显式元素比较值

> ID：15464721
> 
> 赞同：0
> 
> 时间：2013-03-17T18:45:05.787
> 
> 标签：html, xpath, siblings

这是我到目前为止所尝试的..

```
//div[@id='information']//div[div=='Site']
//div[text()='Site']//span//a[@href] 
```

我正在摆弄一个 XPath 表达式，但它没有成功。我想选择锚的 href 属性。没问题，但它需要在a with AND a**之后**明确显示。`div``class` `h3``value = "Site"`

```
<div id="information">
    <div class="h3">Location</div>
    <div class="h3">Site</div>
    <span>
        //Here is sometimes a <br/>
        <a href='http://www.test.at'>Klick</a>
    </span>
    <div class="h3">Referenz</div>
    <span>12345</span>
</div> 
```

id="information" 的 div 内可以有任意多个 div 元素，因此无法在索引上进行选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:55:47.660

像这样的东西应该工作：

```
//div[@class = 'h3'][. = 'Site']/following-sibling::*/descendant-or-self::a/@href 
```

这将提取文档顺序中“站点”div 之后但仍包含在同一父元素中`href`的所有标签的属性（示例中的“信息”div）。`a`如果您不介意最后一点，即您想包含出现*在*“信息”div 之后以及其中的`a`标签，那么您可以使用更简单的

 *```
//div[@class = 'h3'][. = 'Site']/following::a/@href 
```*

# php - 试图从子类访问父级

> ID：15464723
> 
> 赞同：0
> 
> 时间：2013-03-17T18:45:20.713
> 
> 标签：php, oop, pdo

我有一个使用 (PDO::FETCH CLASS, 'Product') 填充的产品类，然后将每个项目回显到页面。每个类别有很多项目。这被用于我的“按类别显示项目”页面。

```
 class Product {

// All attributes correspond to database columns.
// All attributes are protected.
protected $productID = null;
protected $name = null;
protected $description = null;
protected $price = null;
protected $image = null;

// Method returns the product ID:
function getProductID() {
    return $this->productID;
}    

// and other methods to return each variable 
 } 
```

然后单击传递 productID 的链接，使用 MVC 模型，以显示产品详细信息页面，我想更详细地显示一个项目。来自上述产品类和我在下面创建的子类的信息。

然后我将这个类扩展为一个 Stock 类，其中包含每个产品的所有选项。即尺寸、颜色、数量。例如……一件 T 恤可以有 3 种不同的尺码、2 种不同的颜色，并且这些变体中的每一种都可以有一个数量。

我也使用 PDO::FETCH CLASS 方法填充 Stock 类。

扩展类是：

```
 class Stock extends Product{

// All attributes correspond to database columns.
// All attributes are protected.
protected $productID = null;
protected $qty = null;
protected $colour = null;
protected $colourHEX = null;
protected $sizeName = null;

// Method returns the product ID:
function getproductID() {
    return $this->productID;
}

// Method returns the product ID:
function getQty() {
    return $this->qty;
} 
```

我的问题是我在单独的网页上分别创建了这两个类，我不知道如何从子类访问父类。我整天都在试图理解这一点。我知道我没有在股票子类和父类之间创建关联，但不知道如何做到这一点，因此我可以访问父类方法来显示名称、价格等。

我是否提供了足够的信息？

我真的真的很挣扎

# javascript - 另一个标签html中的一个标签

> ID：15464726
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:45:30.623
> 
> 标签：javascript

```
.button1{

  background: #E68A00 url(wooden.jpg) repeat-x;
  border: 2px solid #eee;
  height: 28px;
  width: 115px;
  margin: 50px 0 0 50px;
  padding: 0 0 0 7px;
  overflow: hidden;
  display: block;
  text-decoration:none;
  font-family: 'Sacramento', cursive;
  color : white;
  font-size: 30px;

  /*Rounded Corners*/
-webkit-border-radius: 15px;
-moz-border-radius: 15px;
border-radius: 15px;

/*Gradient*/
background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
background-image: linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));

/*Transition*/
-webkit-transition: All 0.5s ease;
-moz-transition: All 0.5s ease;
-o-transition: All 0.5s ease;
-ms-transition: All 0.5s ease;
transition: All 0.5s ease;

}

pg.button1{ 
position:absolute;
right:0px;
top:100px;

}

pg:hover {
  width: 200px;
}

<pg <a class = "button1" href="http://www.google.com">Small $14 </a>  </pg>## Heading ## 
```

上面的标签是一个链接，直到我引入了标签 pg，它是为了在屏幕上定位链接。原因是我仍然想将该类与其他对象一起使用！所以我不必复制我的代码！我已经创建了像 p1 p2 p3 p4 这样的标签来与同一个类一起使用它实际上定位它，但它不再是一个链接！这是为什么 ？我怎样才能让它再次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:50:24.567

与其发明新标签，不如使用多个类。在这种情况下，根据您*实际*尝试执行的操作，您可以执行以下操作：

```
<a class="button1 pg" href="...">Small $14</a> 
```

或这个：

```
<div class="pg"><a class="button1" href="...">Small $14</a></div> 
```

# android - Android：JSONArray[0] 不是 JSONObject

> ID：15464727
> 
> 赞同：1
> 
> 时间：2013-03-17T18:45:34.550
> 
> 标签：android, arrays, json, object

我在 Android 中有一个项目，这里有我需要解析的 JSON，以便我可以使用数据：（我尝试在 JSONLint.com 验证我的 JSON，一切都很好）

```
{
    "traces": [
        "{\"lat\": \"42.842097\", \"lng\": \"-31.258422\", \"idTrace\": \"444e8079\"}",
        "{\"lat\": \"56.842097\", \"lng\": \"-73.258422\", \"idTrace\": \"088b591a\"}"
    ]
} 
```

问题是当我尝试在 JSONArray 中获取 2 个 JSONObjects 时总是出错。

这是我的代码片段：

```
 (...)

     StringBuilder builder = new StringBuilder();

     for (String line = null; (line = reader.readLine()) != null;) 
     {
          builder.append(line).append("\n");
     }

    JSONObject result = new JSONObject(builder.toString());
    JSONArray list = result.getJSONArray("traces");

    try{
        for (int i = 0; i < list.length(); i++)
            {     //this is where I get the error "JSONArray[0] is not a JSONObject"
              JSONObject jsonObject = list.optJSONObject(i); 

              //String id = jsonObject.getString("idTrace");
              //String lat = jsonObject.getString("lat");
              //String lng = jsonObject.getString("lng");

                 (...)
             }
      (...) 
```

我搜索了很多以找出问题所在，但人们似乎在做与我完全相同的事情......我找不到它不起作用的原因！

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:47:19.707

这个 JSON 是从您控制的 API 中返回的吗？我认为破坏性的是 JSONArray 中项目周围的引号 - JSON 应该如下所示：

```
{"traces": [
    {"lat": "42.842097", "lng": "-31.258422", "idTrace": "444e8079"},
    {"lat": "56.842097", "lng": "-73.258422", "idTrace": "088b591a"} 
]} 
```

请注意，每个 JSONObject 周围没有引号。你现在拥有的更像是一个字符串数组......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:48:21.843

这是你的拼写错误，

```
liste.optJSONObject(i); this should be list.optJSONObject(i); 
```

# android - 是否有具有 Android 报告功能的谷歌分析库？

> ID：15464728
> 
> 赞同：0
> 
> 时间：2013-03-17T18:45:37.597
> 
> 标签：android, google-analytics-api

我正在寻找一种在 Android 设备上访问 Google Analytics 报告功能的方法。

据我所知，只有Google Analytics 和 Andoid 的[跟踪库。](https://developers.google.com/analytics/devguides/platform/ "官方 GA SDK 页面")所以我的问题是：**在 Android 设备上获取 Google Analytics 报告的方法是什么？**

我试图使用 Google 插件为 Eclipse 安装的 Java6 Google Analytics API，但由于多个错误而失败，这似乎与 Java6 的不同 jars 内容及其 Android 实现有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:55:24.393

您正在寻找的是 Google Analytics [Core Reporting API](https://developers.google.com/analytics/devguides/reporting/core/v3/)。有一个适用于 Android的[Java 客户端库。](https://developers.google.com/analytics/devguides/reporting/core/v3/gdataLibraries)

# php - 从字符串中提取前 5 个单词

> ID：15464730
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:45:44.923
> 
> 标签：php

我需要提取前 5 个单词，允许使用 PHP 从该字符串中提取点、数字和括号：

*在你的眼睛之下 3.2 (2013) 未评级来自数据库*

我想要这样的**输出**...

*在你的眼睛下方 3.2 (2013)*

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:49:26.393

```
$string = "Below your Eyes 3.2 (2013) Unrated From database";
echo implode(' ', array_slice(explode(' ', $string), 0, 5)); 
```

**输出**

```
Below your Eyes 3.2 (2013) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:52:39.240

1.  将您的字符串拆分为一个大小为 6 的数组。前五个每个包含一个单词，最后一个包含其余的。
2.  删除最后一个数组元素。
3.  将剩余的 5 个数组元素重新组合成一个字符串。

以下代码将打印“Below your Eyes 3.2 (2013)”。

```
$str = "Below your Eyes 3.2 (2013) Unrated From database";
$words = explode(" ", $str, 6);
array_pop($words);
$words = implode(" ", $words);
print $words; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T18:49:07.607

尝试这样的事情：

```
$inputstring = "Below your Eyes 3.2 (2013) Unrated From database";
$firstwordsArr = explode(" ", $inputstring, 6);
array_pop($firstwordsArr);
$firstwords = implode(" ", $firstwordsArr);
echo $firstwords; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-17T18:56:06.227

你可以使用

```
$string = "Below your Eyes 3.2 (2013) Unrated From database";
$nice = substr($string, 0, 26);
echo $nice; 
```

该`substr()`方法比其他答案容易得多。

PHP `substr`： http: [//php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

# c++ - 为什么“重写 & 运算符并返回 *this* 是愚蠢的”？

> ID：15464731
> 
> 赞同：3
> 
> 时间：2013-03-17T18:45:45.233
> 
> 标签：c++, operator-overloading

诚然，我想不出任何理由为什么**要**覆盖一元运算`&`符，但在[https://stackoverflow.com/a/4542813/368896](https://stackoverflow.com/a/4542813/368896)中，关于某些类的海报状态`X`：

> ...除非 X 做了一些非常愚蠢的事情，比如重载一元 & 来返回这个

（注意：我假设此评论指的是`&`运算符返回`this`的事实，而不是覆盖`&`运算符本身的事实。）

当我想到那条评论时，我突然想到“返回这个”*正是*操作员所做的`&`——即使在多重继承的情况下也是如此。

鉴于人们可能永远*不想*覆盖一元运算`&`符，但是为什么让它返回`this`（如果您确实决定覆盖它）会很愚蠢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T18:57:34.690

> 我突然想到“返回这个”正是 & 运算符所做的

你是对的，尽管 C++ 也**禁止获取临时对象的地址**。

[在您引用的问题](https://stackoverflow.com/questions/4542789)的上下文中，这是关于确定对象是否是临时对象：

如果您实现自己的`operator &`返回`this`，您将通过告诉编译器`&(expression)`始终有效来绕过此保护。考虑：

```
struct foo
{
};

struct bar
{
    bar* operator&()
    {
        return this;
    }
};

template <typename T>
void test(const T*)
{
    // no temporaries, can't take address of temporary...right?
}

int main()
{
    foo x;
    test(&x); // okay, x is an lvalue

    /*
    test(&(foo())); // not okay, cannot take address of temporary
    */

    bar y;
    test(&y); // still okay, y is an lvalue

    test(&(bar())); // huh?! not taking address of temporary, calling operator&
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:47:18.933

**它的用途确实非常有限。** 例如，一个用例是智能指针，因为它们经常在 Direct3D 中用于包装`IUnknown`对象。

我假设您不熟悉 Direct3D，所以我将对此进行更多讨论。许多 Direct3D 类派生自[`IUnknown`](http://doc.51windows.net/Directx9_SDK/?url=/directx9_sdk/intro/program/com/iunknown_interface.htm)它们并在使用后必须调用`Release`. 是的，D3D 内部使用引用计数。人们往往会忘记打电话`Release`，这真的很乏味。所以一个人所做的就是将它包装`IUnknown`成一个`smartpointer`它将在幕后进行发布。

```
smart_pointer<ID3D11Device> device = // .. 
```

因此，通过声明`&device`您不想要 的地址`smart_pointer<ID3D11Device>`，您想要 的地址`ID3D11Device`。

```
template <class T>
class com_ptr
{
private:
    T *inst;

public:
   // many other methods/overloadings

    T** operator & ()
    {
        return &inst;
    }
}; 
```

**底线：**这样，您可以`Release`在析构函数中调用，而不必在其余代码中关心它。

**底线 2：**更好的方法是添加一个`get()`返回实习生对象的方法。

```
 T** get()
    {
        return &inst;
    } 
```

# javascript - 回车编码

> ID：15464734
> 
> 赞同：0
> 
> 时间：2013-03-17T18:46:43.273
> 
> 标签：javascript, html, encode

通过对数据库的查询，我正在检索以前通过**HTML** `textarea`或`input`. 当我从我的数据库中获得响应时，在一个`JSON`对象中，该`text`字段如下所示：

```
 obj :  {
           text :  [some_text] ↵ [some_text]
         } 
```

我试图用这个替换`function`：

```
 string_convert = function(string){
  return string.replace("&#8629",'<br>')
               .replace('&crarr','<br>')
               .replace('/[\n\r]/g','<br>');
 } 
```

我必须在**HTML**中显示这个字符串，但它似乎不起作用。我在用着`UTF-8`

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:13:37.323

您遇到的问题是您已将正则表达式括在引号中。这是不正确的。

```
.replace('/[\n\r]/g','<br>');
         ^         ^
       remove these two quotes 
```

引号是不必要的，因为正则表达式已经由斜线分隔。

通过在其中添加引号，您实际上已经告诉它您要替换固定字符串而不是正则表达式。固定字符串可能看起来像一个表达式，但如果加上引号，它只会被视为普通字符串。

删除引号，它将被视为一个表达式，并且可以正常工作。

不过，还有一件事——为了让你的正则表达式完美地工作，我还建议稍微修改一下。就目前而言，它只会用 . 替换所有`\n`和`\r`字符`<br>`。但在某些情况下，它们可能会`\r\n`成对出现。这应该是一个换行符，但您的表达式将用两个`<br>`s 替换它。

您可以改用这样的表达式：

```
/\r\n|\n|\r/g 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:55:49.907

您的代码中缺少结尾分号`;`：

```
string_convert = function(aString){
  return aString.replace("&#8629;",'<br>').replace('&crarr;','<br>');
} 
```

这不一定能解决您的问题，但很可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:56:00.953

来自：[试图将回车翻译成
Javascript 中的 html 标记？](https://stackoverflow.com/a/6975822/139917)

```
text = text.replace(/(\r\n|\n|\r)/g,"<br />"); 
```

# javascript - jQuery Accordion 的基本问题

> ID：15464735
> 
> 赞同：0
> 
> 时间：2013-03-17T18:47:01.133
> 
> 标签：javascript, jquery, html, css, accordion

我正在使用 jQuery Accordion 进行侧边栏导航。目前我有 2 个链接，它们下面都有“孩子”。

这是我的 jsFiddle：http: [//jsfiddle.net/6Eh8C/](http://jsfiddle.net/6Eh8C/)

您会注意到，当您单击“关于我们”时，图库会关闭。这不应该发生。只有当我单击“画廊”时，画廊才会关闭。

我该如何解决？

**这是我的 jQuery：**

```
jQuery(function($) {

        $('#accordion > li > a').click(function (e) {
            if ($(this).next('ul').length == 0) {
                // link is for navigation, do not set up accordion here
                return;
            }

            // link is for accordion pane

            //remove all the "Over" class, so that the arrow reset to default
            $('#accordion > li > a').not(this).each(function () {
                if ($(this).attr('rel')!='') {
                    $(this).removeClass($(this).attr('rel') + 'Over');
                }

                $(this).siblings('ul').slideUp("slow");
            });

            //showhide the selected submenu
            $(this).siblings('ul').slideToggle("slow");

            //addremove Over class, so that the arrow pointing downup
            $(this).toggleClass($(this).attr('rel') + 'Over');
            e.preventDefault();
        });     

        $('.slides_item').children('div').css('background','#ededed')

    }); 
```

非常感谢任何指针:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:54:16.813

我想你只想删除一行：

```
$('#accordion > li > a').not(this).each(function () {
    if ($(this).attr('rel')!='') {
        $(this).removeClass($(this).attr('rel') + 'Over');
    }

    // Remove this line, you don't want to slide up other uls.
    // $(this).siblings('ul').slideUp("slow");
}); 
```

**示例：http:** [//jsfiddle.net/6Eh8C/1/](http://jsfiddle.net/6Eh8C/1/)

# python - 修改python代码以使其“可导入”

> ID：15464739
> 
> 赞同：0
> 
> 时间：2013-03-17T18:47:26.380
> 
> 标签：python, object, import

我一直在尝试修改下面的代码，以便可以导入 lcd 类并调用 writeLCD 函数作为对另一个类中对象的函数调用。我现在被卡住了，因为当我尝试'import lcd' python 解释器时，它出错并说 driver1 没有在该行中定义

`self.lcd1 = HD47780(driver1, rows=2, width =16)`

```
import time

class LCD_23017(object):
    # Timing constants
    E_PULSE = 0.00005
    E_DELAY = 0.00005

    def __init__(self, bus, addr, port, rs, en):
        self.bus = bus
        self.addr = addr
        self.rs = rs
        self.en = en

      self.DIRECTION = 0x00 if port == 'A' else 0x01
      self.DATA = 0x12 if port == 'A' else 0x13

      self.bus.write_byte_data(addr, self.DIRECTION, 0x00)

def lcd_byte(self, data, rs):
    rs <<= self.rs
    en = 1 << self.en
    for nybble in (data&0xf0, data<<4):
        self.bus.write_byte_data(self.addr, self.DATA, nybble | rs)
        time.sleep(self.E_DELAY)
        self.bus.write_byte_data(self.addr, self.DATA, nybble | rs | en)
        time.sleep(self.E_PULSE)
        self.bus.write_byte_data(self.addr, self.DATA, nybble | rs)

class HD47780(object):
    LCD_CHR = True
    LCD_CMD = False
    # Base addresses for lines on a 20x4 display
    LCD_BASE = 0x80, 0xC0, 0x94, 0xD4

    def __init__(self, driver, rows=2, width=16):
        self.rows = rows
        self.width = width
        self.driver = driver
        self.lcd_init()

    def lcd_init(self):
        # Initialise display
        lcd_byte = self.driver.lcd_byte
        for i in 0x33, 0x32, 0x28, 0x0C, 0x06, 0x01:
            lcd_byte(i, self.LCD_CMD)

    def lcd_string(self, message, line=0):
        # Send string to display
        lcd_byte = self.driver.lcd_byte
        lcd_byte(self.LCD_BASE[line], self.LCD_CMD)
        for i in bytearray(message.ljust(self.width)):
            lcd_byte(i, self.LCD_CHR)

class lcd:
    def __init__(self, smbus):
    driver1 = LCD_23017(bus=smbus.SMBus(0), addr=0x20, port='B', rs=0, en=1)
    # driver2 = LCD_23017(bus=smbus.SMBus(1), addr=0x20, port='B', rs=0, en=2)

    self.lcd1 = HD47780(driver1, rows=2, width=16)
    # lcd2 = HD47780(driver=driver2, rows=2, width=16)

def writeLCD(self, line, message):
    self.lcd1.lcd_string(message, line)
    # lcd2.lcd_string("     London")

#def main():
#    test_i2c()

if __name__ == "__main__":
    main() 
```

# .net - System.IO.Compression 和 ZipFile - 提取和覆盖

> ID：15464740
> 
> 赞同：22
> 
> 时间：2013-03-17T18:47:37.387
> 
> 标签：.net, vb.net, zip, compression, system.io.compression

我正在使用标准 VB.NET 库来提取和压缩文件。它也可以，但是当我必须提取并且文件已经存在时，问题就来了。

我使用的代码

进口：

```
Imports System.IO.Compression 
```

崩溃时我调用的方法

```
ZipFile.ExtractToDirectory(archivedir, BaseDir) 
```

archivedir 和 BaseDir 也已设置，实际上如果没有要覆盖的文件，它就可以工作。问题恰好在有的时候出现。

如何在不使用第三方库的情况下覆盖提取文件？

（注意我使用 System.IO.Compression 和 System.IO.Compression.Filesystem 作为参考）

由于文件放在多个文件夹中已经存在文件我会避免手动

```
IO.File.Delete(..) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-18T00:53:37.763

使用[ExtractToFile](http://msdn.microsoft.com/en-us/library/hh485718.aspx) with overwrite as true 覆盖与目标文件同名的现有文件

```
 Dim zipPath As String = "c:\example\start.zip" 
    Dim extractPath As String = "c:\example\extract" 

    Using archive As ZipArchive = ZipFile.OpenRead(zipPath)
        For Each entry As ZipArchiveEntry In archive.Entries
            entry.ExtractToFile(Path.Combine(extractPath, entry.FullName), True)
        Next 
    End Using 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-01T21:57:40.800

我发现以下实现完全可以解决上述问题，运行时没有错误，并成功覆盖现有文件并根据需要创建目录。

```
 ' Extract the files - v2
        Using archive As ZipArchive = ZipFile.OpenRead(fullPath)
            For Each entry As ZipArchiveEntry In archive.Entries
                Dim entryFullname = Path.Combine(ExtractToPath, entry.FullName)
                Dim entryPath = Path.GetDirectoryName(entryFullName)
                If (Not (Directory.Exists(entryPath))) Then
                    Directory.CreateDirectory(entryPath)
                End If

                Dim entryFn = Path.GetFileName(entryFullname)
                If (Not String.IsNullOrEmpty(entryFn)) Then
                    entry.ExtractToFile(entryFullname, True)
                End If
            Next
        End Using 
```

# unit-testing - 这是一个正确的单元测试吗？

> ID：15464748
> 
> 赞同：0
> 
> 时间：2013-03-17T18:48:12.627
> 
> 标签：unit-testing, testing

我正在尝试了解单元测试的基础知识，并且所有教程都使用大量示例。我还编写了以下代码和测试，想知道这是否正确：

```
class Foo
{
  public bool TwoDecisions(int X, int Y)
  {
    if(X>Y)
       return true;
    else return false;
  }
}

TEST
 public class FooTests  
   {  
     [Test]  
     public void TwoDecisions_TRUE()  
     {  
      Foo f=new Foo();
      bool expected = true;  
      bool actual = FooTests.TwoDecision(10,9)
       Assert.AreEqual(expected, actual);  
     }  
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:50:26.753

这是*一个*单元测试，所以这样是正确的。但它是这个类需要的唯一测试吗？不。您只是在测试`if`返回 true 的语句分支。您还应该测试 X<Y 的情况，以便完全“覆盖”您的代码。

# matlab - 如何将 .dat 文件的编号序列读入 MATLAB

> ID：15464751
> 
> 赞同：0
> 
> 时间：2013-03-17T18:48:24.113
> 
> 标签：matlab

我正在尝试将以 a01.dat、a02.dat...a51.dat 的形式命名的“.dat”编号序列加载到 MATLAB 中。我在下面的代码中使用了 eval() 函数。

```
%% To load each ".dat" file for the 51 attributes to an array.

a = dir('*.dat');

for i = 1:length(a)
eval(['load ' a(i).name ' -ascii']);
end

attributes = length(a); 
```

我遇到了问题，因为我无法轻松地操作使用 eval 函数加载的数据。我发现社区强烈反对使用 eval。我将 csvread() 与下面的代码一起使用。

```
% Scan folder for number of ".dat" files
datfiles = dir('*.dat'); 

% Count Number of ".dat" files
numfiles = length(datfiles); 

% Read files in to MATLAB
for i = 1:1:numfiles
    A{i} = csvread(datfiles(i).name);
end 
```

csvread() 对我有用，但它读取文件但在读取文件时弄乱了顺序。它首先读取 a01.dat，然后读取 a10.dat 和 a11.dat 等等，而不是 a01.dat、a02.dat... 每个文件的内容都是带符号的数字。有些是逗号分隔的单列，这是一个偶数拆分。所以a01.dat 的内容是用逗号分隔的，a02.dat 的内容在一个列中。

请问我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:07:04.633

您的问题似乎是文件的排序。借鉴[mathworks 上的问题](http://www.mathworks.com/matlabcentral/answers/13978)，这应该可以帮助您：

```
datfiles = dir('*.mat');
name = {datfiles.name};
[~, index] = sort(name);
name = name(index); 
```

然后你可以只循环`name`：

```
% Read files in to MATLAB
for i = 1:1:numfiles
    A{i} = csvread(name{i});
end 
```

# arrays - 如何将图像加载到二维数组元素中？

> ID：15464753
> 
> 赞同：0
> 
> 时间：2013-03-17T18:48:29.493
> 
> 标签：arrays, delphi, multidimensional-array, pascal, timage

我目前正在做我的 A-Level Computing 项目，我正在为此制作我自己的经典游戏 Space Invaders 版本。

为了创建空间入侵者的浪潮，我想使用二维图像数组，其中图像从磁盘加载，然后显示在表单上，​​但我不确定如何将图像加载到数组中，然后将数组显示在形式。

当前的数组是：

```
ImagePaths:array [1..3] of string =('SpaceInvader1.jpg', 'SpaceInvader2.jpg', 'SpaceInvader3.jpg'); 

Wave:array[1..11, 1..5] of TImage; x,y:integer; 
```

我想知道的是：如何将图像加载到数组元素中？例如，如何将“SpaceInvader1.jpg”加载到数组元素 [1,1]？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:59:21.760

如果您要编写图形动画，您可能不想直接在表单上进行。尝试四处移动可能会很棘手，特别是如果您想要流畅地制作动画并且不会出现大量闪烁和图形伪影。

最好使用渲染库。工作流程是这样的：

*   在表单上创建渲染上下文。这是一个为图形动画运行提供表面的控件。
*   将您的三个图像加载到内存中。
*   创建一个对象数组来表示与怪物相关的游戏数据。（位置、运动方向和速度等）它可以是平面的或 2D 的，以更适合您的方式为准。
*   设置一个渲染循环，如下所示：
    *   对于阵列中的每个怪物，将其绘制在其位置。
    *   画出玩家的船和所有的射弹。
    *   检查碰撞并适当处理。
    *   检查玩家输入并适当处理。

[您可以在Pascal Game Development](http://www.pascalgamedevelopment.com)的论坛中找到大量有关 Delphi 渲染库的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:16:50.497

您有以下声明：

```
ImagePaths:array [1..3] of string =(
  'SpaceInvader1.jpg', 
  'SpaceInvader2.jpg', 
  'SpaceInvader3.jpg'
); 
Wave: array[1..11, 1..5] of TImage; 
```

您想知道如何填充图像数组。当 3 个就足够时创建 55 个图像是相当浪费的。所以取而代之的是，使用间接。存储对图像的引用。并且`TImage`是一个视觉组件，因此不适合精灵。

我会将图像保存在这样的数组中：

```
Sprites: array [1..3] of TBitmap; 
```

并填充它

```
JPEGImage := TJPEGImage.Create;
try
  for i := 1 to 3 do 
  begin
    JPEGImage.LoadFromFile(ImagePaths[i]);
    Sprites[i] := TBitmap.Create;
    Sprites[i].Assign(JPEGImage);
  end;
finally
  JPEGImage.Free;
end; 
```

然后像这样填充您的`Wave`数组，例如：

```
Wave: array[1..11, 1..5] of TBitmap; 
....
for i := 1 to 11 do
  for j := 1 to 5 do
    Wave[i,j] := Sprites[1];// or whichever sprite you want 
```

当然，您的精灵使用真实姓名而不是数组可能会更好。

* * *

其他一些评论：

1.  JPEG 对于游戏精灵来说是一种糟糕的格式。这是一种有损格式。一个普通的 Windows 位图就可以了，GIF 或 PNG 也可以。
2.  我更愿意将图像视为嵌入式资源。然后您的可执行文件可以独立存在。
3.  我也宁愿看到你的`Waves`数组保存每个入侵者的状态。然后您将创建一个函数，将该状态呈现到画布上。

# c# - 输入十进制时，十进制 TryParse 失败

> ID：15464754
> 
> 赞同：-2
> 
> 时间：2013-03-17T18:48:32.003
> 
> 标签：c#, .net, parsing

关于我创建的用于检查用户输入的 TryParse 方法，我还有另一个问题。很抱歉我的额外问题，但我遇到了另一个并发症并希望得到更多帮助，所以我提出了另一个问题，因为我的最后一个问题已经很老了。如果我将其发布在最后一个问题上，我担心没有人会看到这个问题。

没有错误，但是当我尝试运行它来测试用户的输入时，对于我输入的所有内容，包括整数、小数、（1.00、1.0、1,000.0），它仍然给了我 Messagebox.Show。这是我创建的：

```
 {
        // Arrange the variables to the correct TextBox.
        decimal Medical;

        if (!decimal.TryParse(ChargeLabel.Text, out Medical))
        {
            MessageBox.Show("Please enter a decimal number.");
        }
        decimal Surgical;
        if (!decimal.TryParse(ChargeLabel.Text, out Surgical))
        {
            MessageBox.Show("Please enter a decimal number.");
        }
        decimal Lab;
        if (!decimal.TryParse(ChargeLabel.Text, out Lab))
        {
            MessageBox.Show("Please enter a decimal number.");
        }
        decimal Rehab;
        if (!decimal.TryParse(ChargeLabel.Text, out Rehab))
        {
            MessageBox.Show("Please enter a decimal number.");
        }

        // Find the cost of Miscs by adding the Misc Costs together.
        decimal MiscCharges = Medical + Surgical + Lab + Rehab;
        ChargeLabel.Text = MiscCharges.ToString("c"); 
```

换句话说，我尝试在 Medical、Surgical、Lab 和 Rehab 文本框中输入任何形式的数字，但它仍然给我相同的 MessageBox。有人会帮助我如何让我的应用程序正确检查我的用户输入吗？谢谢你，再次抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:51:02.317

您在每个解析语句中使用相同的标签。

```
decimal.TryParse(ChargeLabel.Text, out Medical)
decimal.TryParse(ChargeLabel.Text, out Surgical)
decimal.TryParse(ChargeLabel.Text, out Lab)
decimal.TryParse(ChargeLabel.Text, out Rehab) 
```

**编辑**我建议在每一`MessageBox.Show`行中放置一个断点，然后查看您正在解析的字符串值是什么。

您还可以在显示的消息中提供更多信息：

```
decimal Rehab;
if (!decimal.TryParse(ChargeLabel.Text, out Rehab))
{
    MessageBox.Show(string.Format("Unable to parse '{0}' as a decimal number.", ChargeLabel.Text));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:51:59.507

确保您以文化正确的格式输入数字。一些文化使用逗号作为分隔符，其他文化使用点。试试“123,4”和“123.4”

# javascript - 将来自 console.log 的 webkit 控制台中的值放入变量中

> ID：15464757
> 
> 赞同：3
> 
> 时间：2013-03-17T18:48:57.290
> 
> 标签：javascript, google-chrome, webkit, web-inspector

如果 chrome/safari webkit 检查器中的输出包含打印出的对象，例如：

![在此处输入图像描述](../Images/a0fe938858a186b3e13130c321de3bd7.png)

嵌套对象的负载只会更加复杂（这就是复制/粘贴不会做的原因）

有没有办法将它放在一个变量中以进一步检查并在它被打印到控制台（它的打印通过`console.log`）之后处理它，只是在它已经在控制台中之后？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T18:55:57.657

`$_`会给你控制台的最后输出。因此，在控制台中，您可以分配给变量。

![在此处输入图像描述](../Images/432e66762bcc73caef6de9ae68e73a6f.png)

请注意，您只能在控制台中执行此操作，而不能从您自己的代码中执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T19:09:45.210

这是一种*无需*包装`console.log`自定义日志函数的方法：

```
var justLogged;
var oldLog = console.log;

console.log = function () {
    oldLog.apply(console, arguments);
    justLogged = arguments;
};

console.log('test');

// if necessary, restore console.log to its original behavior when you're finished with it
console.log = oldLog; 
```

的值`justLogged`将是`['test']`，因为您刚刚记录了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T19:01:31.393

如果您希望获得最后的*输出*，[请按照 Mohsen 的建议进行操作](https://stackoverflow.com/questions/15464757/put-a-value-in-webkit-console-from-console-log-into-a-variable/15464845#15464845)。

如果您想获得 的最后一个输出`console.log`，最好的选择是包装函数。这可以 (1) 做你想做的事 (2) 在生产中很容易被禁用，这对旧 IE 很有帮助并隐藏调试消息。

```
var log = (function() {
    var lastOutput;
    var fn = function() {
        lastOutput = arguments[0];              // save the last argument
        console.log.apply(console, arguments);  // defer to console.log
    };
    fn.last = function() {
        return lastOutput;
    };
    return fn;
})();

log("abc123");
log.last();     // => "abc123" 
```

# opengl - 合并球体和圆柱体

> ID：15464762
> 
> 赞同：1
> 
> 时间：2013-03-17T18:49:18.897
> 
> 标签：opengl, geometry, vertex-buffer, cylindrical

我想使用球体和圆柱体渲染弹簧。每个圆柱体的每一端都有两个球体，所有圆柱体都沿着弹簧中心线放置。我可以做到这一点..并且渲染很好。我目前正在使用 gluSphere 和 gluCylinder 进行操作。

现在，当我查看性能时，它并不好，它非常慢。所以我想知道以下是否可行：

是否有可能我结合球体和圆柱体的表面并只渲染外壳而不渲染球体的内部覆盖部分......？

我还阅读了有关 VBO 的文章 .. 是否可以将 gluSphere 和 gluCylinder 与 VBO 一起使用 .. ？我不能使用显示列表，因为弹簧的属性不断变化......！

有人可以提出更好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:23:02.457

您可能需要重新考虑绘制弹簧的方式。在我看来，有两种有效的方法。

1.  [使用Assimp](http://assimp.sourceforge.net/)或其他易于与 OpenGL 集成的模型加载软件加载弹簧模型。可以在[Turbo Squid](http://www.turbosquid.com/)或通过 Google 的 3D 仓库（在 Google Sketch-Up 中）找到免费的 3D 模型。

2.  纯粹在 OpenGL 中绘制对象。使用后固定函数 OpenGL 管道绘制此类对象的惯用方法是绘制体积 3D 线。您绘制的线越多，您可以为弹簧提供更多的曲率，但会以渲染时间为代价。

    对于绘制弹簧，我建议您定义一组定义弹簧形状的点（具有邻接关系），并使用原始类型 GL_LINE_STRIP_ADJACENCY 绘制这些点。然后，在着色器程序中使用几何着色器将这个像素绑定的线带扩展为一组由三角形带组成的体积 3D 线。

    [这篇](http://prideout.net/blog/?p=61)博客文章很好地描述了这项技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:25:16.183

您最好的选择可能是在任何 3D 建模软件中学习一个快速教程（想到[Blender ），然后使用](http://www.blender.org/)[CSG](http://en.wikipedia.org/wiki/Constructive_solid_geometry)操作对处于静止姿势的弹簧进行建模。

这种方法不仅使您摆脱了多余的基元，而且使您的模型与 VBO 一起使用变得非常容易。您所要做的就是解析 Blender 的输出文件（最简单的是[.obj](http://en.wikipedia.org/wiki/Wavefront_.obj_file)），检索填充了顶点数据（位置、法线，可能是纹理坐标）的数组。

最后，要“动画”你的弹簧，你可以使用顶点着色器。你只需要传递另一个描述弹簧变形程度的制服，然后在那里进行其余的变换。

# sql - 随机 SQL 删除

> ID：15464763
> 
> 赞同：1
> 
> 时间：2013-03-17T18:49:22.557
> 
> 标签：sql, connection

我看到生产 SQL 框出现间歇性问题，并返回错误：

System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

运行 perfmon 显示最多有 15 个用户连接打开 - 在许多情况下，我们打开的次数比过去多得多。所以我认为这排除了未打开的连接。此外，这是一个生产应用程序，在过去几个月中没有发生任何变化，并且一直运行良好。

我在想可能是 DNS 问题，或者可能是 siwtch 问题，因为 Web 和 SQL 框在同一个网络上运行，中间没有防火墙。

其他任何人都可以阐明任何观点。

另一个注意事项 - 对“提供者：命名管道提供者，错误：40 - 无法打开到 SQL Server 的连接”的引用 - 我假设这表示通过命名管道的连接。我实际上早先禁用了命名管道以尝试强制 TCP？

# java - 字符串的二叉搜索树

> ID：15464765
> 
> 赞同：1
> 
> 时间：2013-03-17T18:49:26.157
> 
> 标签：java, binary-tree, binary-search-tree

我有一个关于字符串二叉搜索树究竟是如何工作的问题。我知道并且已经通过检查新数据是否<=父数据然后通过左分支（如果它更小或右分支如果它更大）来实现整数的二进制搜索树。但是，我对如何用字符串节点实现这一点有点困惑。

使用整数或字符，我可以将数组插入到我编程的树的插入方法中，并正确构建树节点。我的问题是如何使用字符串数组进行处理。你如何让琴弦在树上正确分支？例如，如果我有一系列问题，我将如何正确地对 BST 进行分支，以便最终得到正确的答案。

例如看下面的简单树示例。

```
 land animal?            
                   have tentacles?------------^-------------indoor animal
          have claws?-----^----jellyfish    live in jungle?----^----does it bark?      
eat plankton?----^----lobster             bear----^----lion        cat----^----dog
shark----^----whale 
```

您将如何填充这样的树，以便节点在您想要的位置填充。我正在尝试制作一个用于故障排除的 BST，但我很困惑如何填充字符串的节点，以便它们出现在正确的位置。您需要对节点进行硬编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:52:16.370

更新 2，构建*二叉决策树*：

可以将二叉决策树视为一堆问题，这些问题会产生关于叶节点方面的布尔响应 - 方面要么存在/保持真实，要么不存在。也就是说，*对于特定节点/边的每个后代，*我们必须能够说“这个问题/答案成立”（答案可以是“真”或“假”）。例如，树皮是（正常）狗的一个侧面，但触须*不是*鲸鱼的一个侧面。在呈现的树中，假边总是通向左子树：这是避免用真/假或 Y/N 标记每条边的惯例。

这棵树*只能*从*现有/外部知识*构建，允许人们回答每只动物的每个问题。

这里有一个粗略的算法可以用来构建这样一棵树：

1.  从一组可能的动物开始，称之为 A，一组问题，称之为 Q。
2.  从 Q 中选择一个问题 q，其中 count(True(q, a in A)) 最接近于 count(False(q, a in A)) - 如果生成的树是*平衡*二叉树，则这些计数将总是平等地问最好的问题。
3.  从 Q 中删除 q 并将其用作询问当前节点的问题。将所有 False(q,a) 放入左侧子节点可用的动物集合 (A') 中，并将所有 True(q,a) 放入右侧子节点可用的动物集合 (A'') 中。
4.  在每个边缘/分支（假=左，真=右）之后，从剩余的 Q 中选择一个合适的问题并重复（根据需要使用 A' 或 A'' 代表 A）。

（当然，网上有很多更完整/详细/准确的资源作为[课程材料](http://www.cs.tau.ac.il/~mansour/ml-course-10/scribe12.pdf)或[白皮书](http://www.cs.nyu.edu/~roweis/csc2515-2006/readings/murthy_dt.pdf)。更不用说大多数大学校园里合适的书籍选择了..）

* * *

更新，对于 [binary][*决策树*](http://en.wikipedia.org/wiki/Decision_tree)：

在这种特殊情况下（通过添加的图表可以清楚地看到），图表基于代表节点之间*边缘的问题的“是”或“否”响应。*也就是说，树不是*使用*字符串值本身的排序来构建的。在这种情况下，总是让左分支“假”和右分支“真”可能是有意义的，尽管如果允许非二进制响应，每个节点可能有更多的边/子节点。

决策树必须经过[“训练”（谷歌搜索）](http://www.google.com/?q=train%20decision%20tree)。也就是说，必须首先基于问题/响应来构建图，这与仅基于节点之间排序的 BST 不同。最初的图构建不能仅仅从一系列问题中完成，因为边不遵循内在的顺序。

* * *

初始响应，对于[*二叉搜索树*](http://en.wikipedia.org/wiki/Binary_search_tree)：

与整数相同的方式：算法不会改变。

考虑一个函数，`compareTo(a,b)`它将分别为 a < b、a == b 和 a > b 返回 -1、0 或 1。

然后考虑 a 和 b 的类型都无关紧要（只要它们相同），如果这种类型支持排序，则在使用此合约实现函数时：它将是整数的“原始”并使用宿主语言的相应字符串比较对于字符串类型。

# android - 将不同的模块集成到一个 android 应用程序中

> ID：15464767
> 
> 赞同：1
> 
> 时间：2013-03-17T18:49:36.077
> 
> 标签：android, integration

我将我的 android 项目分解为多个模块。这些模块包括 pdf 查看器、ocr 应用程序和 XMPP 应用程序。现在我以 3 个不同的应用程序的形式拥有这 3 个模块。我如何集成这 3 个应用程序，以便我拥有一个正在运行的应用程序。基本上，我想将这 3 个应用程序合并为 1 个。当然，将代码重写到一个项目中会很困难。有人可以建议我如何做到这一点吗？请提供所有可能。我正在考虑将这 3 个 android 项目作为库项目并将它们用作第 4 个项目的依赖项，但我不知道这实际上是如何工作的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:57:56.457

在您的第四个项目中添加这 3 个项目作为库！

如果您不知道如何将项目设置为库，[设置为库项目 (Vogella.com)](http://www.vogella.com/articles/AndroidLibraryProjects/article.html#tutorial_library_flag) 和[使用库项目 (Vogella.com)](http://www.vogella.com/articles/AndroidLibraryProjects/article.html#tutorial_library_usage)对您很有帮助！

# c++ - 从 matlab 到 c++ 的代码

> ID：15464769
> 
> 赞同：1
> 
> 时间：2013-03-17T18:49:47.653
> 
> 标签：c++, matlab, plot, dynamic-allocation

在执行此操作时，是否有任何最佳方法或模板可供遵循？我特别想说两件事，因为对我来说，想象它在 C++ 中的表现是有问题的：

*   在运行中扩展数组，它们在程序期间被扩展，我不知道最终大小是 10 还是 100000。
*   情节。我从来没有在 C++ 中做过任何绘图，因为我总是在必要时在 matlab 中做它。

那么我应该遵循哪些模板或规则，我该如何应对这两件事呢？我发现 eigen 库对矩阵很有用（也可以动态扩展？），但我不确定，想先问一下以确定正确的方法。我对情节一无所知。

如果有用，请添加一些链接供我学习。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:58:54.587

*   **在运行中扩展数组，它们在程序期间被扩展，我不知道最终大小是 10 还是 100000。**

解决方案很简单：查找`std::vector`（或`std::deque`）都提供这种行为。（在双端队列和向量之间存在“细微”差异）。

*   **情节。我从来没有在 C++ 中做过任何绘图，因为我总是在必要时在 matlab 中做它。**

为此，您必须搜索可以执行此操作的库，首先您必须查看图形窗口库，例如 Qt。然后你必须查找一些可以以图表形式绘制数据的库。
虽然对于这个 matlab 可能永远是“更容易/更好”的选择；C++ 对此没有任何帮助。

还要记住：先学语言，再学图书馆！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:00:25.660

对于使用 QT 进行绘图，[QWT](http://qwt.sourceforge.net/)基本上是您所需要的，因为它提供了人们可能需要的所有非平凡的图表。

# c# - 将多个值从 ASP.Net gridview 传递到查询字符串

> ID：15464773
> 
> 赞同：0
> 
> 时间：2013-03-17T18:50:00.180
> 
> 标签：c#, asp.net, gridview, query-string

我正在创建一个售票应用程序，但在传递我需要的一些最终值时遇到了一些麻烦。
我需要正在购买的门票中的活动 ID，但我已经用门票 ID 填写了我需要的表格。当我选择我需要的事件时，它已经在上一页的页面上传递。
我需要一种方法来从隐藏在页面上的标签转换事件 ID，并将其与票证 ID 一起传递到最后一页（票证 ID 是正在传递的内容）。
这是我正在使用的内容：

```
<asp:GridView ID="grdvSeats" runat="server" DataKeyNames="SeatID" 
              AutoGenerateColumns="False" allowsorting="false" AllowPaging="false" 
              emptydatatext="No records match the criteria provided." BorderWidth = "1px">
     <Columns>
        <asp:HyperLinkField DataTextField="SeatName" 
                            DataNavigateUrlFields="SeatID" 
                            DataNavigateUrlFormatString="~/CheckOut.aspx?id={0}**&eID=lblEventID.Text**" 
                            HeaderText="Name" SortExpression="SeatName" /> 
     </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:38:56.937

好的，我不完全遵循这一点，但我认为你的意思是，从第一页开始，你传递事件 ID，然后在这个页面上，你分配座位 ID，然后你同时传递它们到最后一页。我的建议是基于这个假设，但如果我的顺序有误，你可以适当调整。

您可能必须`DataNavigateUrlFormatString`从代码隐藏中设置您的。我假设（因为您提到在标签中设置的事件 ID）您可以在代码隐藏中使用它。因此，在调用 之前`DataBind`，请`GridView`执行以下代码：

```
// I'm assuming this is the 1st column, as it was in your grid example
HyperLinkField hfield = grdvSeats.Columns[0] as HyperLinkField;           
string urlFormat = "~/CheckOut.aspx?id={0}&eID=" + eventID.ToString();
hfield.DataNavigateUrlFormatString = urlFormat; 
```

因此，您`DataNavigateUrlFormatString`将反映您的 EventID，并且数据绑定将在您的 GridView 中分配 SeatID。

# java - 在java中根据姓氏对名称进行排序

> ID：15464776
> 
> 赞同：-5
> 
> 时间：2013-03-17T18:50:07.080
> 
> 标签：java

我编写了如下代码，使用 Comparator 根据姓氏进行排序：

```
class Order{

    private static ArrayList<String> personlist = new ArrayList<String>();
    Iterator iter1 = personlist.iterator();
    while (iter1.hasNext()) {
        System.out.println(iter1.next());
    }
    Collections.sort(personlist, new LastnameComparator());
    Iterator iter2 = personlist.iterator();
    while (iter2.hasNext()) {
        System.out.println(iter2.next());
    }
}

class String implements Comparable {
    String firstName, lastName;
    public String(String f, String l) {
        this.firstName = f;
        this.lastName = l;
    }
    public String getFirstName() {
        return firstName;
    }
    public String getLastName() {
        return lastName;
    }
    public String toString() {
        return "[ firstname=" + firstName + ",lastname=" + lastName + "]";
    }
    public int compareTo(Object obj) {
        String emp = (String) obj;
        int comp = firstName.compareTo(emp.getFirstName());
        return ((comp == 0) ? lastName.compareTo(emp.getLastName()) : comp);
    }
    public boolean equals(Object obj) {
        if (!(obj instanceof String)) {
          return false;
        }
        String emp = (String) obj;
        return firstName.equals(emp.getFirstName()) &&                 lastName.equals(emp.getLastName());
    }
}
class LastnameComparator implements Comparator<String> {
    @Override
    public int compare(String lastname1, String lastname2) {
        int lnameComp = lastname1.getLastName().compareTo(lastname2.getLastName());
        return ((lnameComp == 0) ? lastname1.getFirstName().compareTo(lastname2.getFirstName()) :
        lnameComp);     
    }
} 
```

但是这段代码不能正常工作并给我错误。personlist 包含以下名称：

```
John C. Shafer
Ariel Fuxman
Roberto J. Bayardo Jr.
Alexandre V. Evfimievski
Dmitri Asonov
Kristen LeFevre 
```

我希望它以下列方式显示

```
Dmitri Asonov
Alexandre V. Evfimievski
Ariel Fuxman
Roberto J. Bayardo Jr.
Kristen LeFevre
John C. Shafer 
```

我应该在这段代码中做什么来修复它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:10:07.863

```
public int compareTo(Object obj) {
    String emp = (String) obj;
    int comp = firstName.compareTo(emp.getFirstName());
    return ((comp == 0) ? lastName.compareTo(emp.getLastName()) : comp);
} 
```

应该，

```
public int compareTo(Object obj) {
    String emp = (String) obj;
    int comp = lastName.compareTo(emp.getLastName());
    return ((comp == 0) ? firstName.compareTo(emp.getFirstName()) : comp);
} 
```

// 你也应该避免将一个类命名为 String

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-17T18:59:04.630

**注意**如果您执行以下代码之类的操作，世界实际上将在几**秒钟内结束**！请不要怪我，我警告过你。

只需使用 normal `String`s 并使用这样的自定义 Comparator ：

```
public class PersonComparator implements Comparator<String> {
    @Override
    public int compare(String o1, String o2) {
        String[] o1Data = o1.split(" ");
        String[] o2Data = o2.split(" ");
        String o1Last = o1Data[o1Data.length-1];
        String o2Last = o2Data[o2Data.length-1];
        return o1Last.compareTo(o2Last);
    }
} 
```

只需提取名称的最后一部分，然后比较它们。

# list - Haskell：列表边界

> ID：15464786
> 
> 赞同：0
> 
> 时间：2013-03-17T18:51:06.417
> 
> 标签：list, haskell, limit, list-comprehension, predicate

我有一个双打列表（myList），我想将其添加到一个新列表（someList）中，但是一旦新列表达到设定的大小，即 25，我想停止添加它。我曾尝试使用 sum 实现此功能，但没有成功。下面的示例代码。
一些列表 = [(a)| a <- myList, sum someList < 30]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:44:35.717

@DanielFischer 表达问题的方式与 Haskell 的思维方式兼容。

> 您是否希望 someList 成为 myList 的总和 < 30 的最长前缀？

这是我的处理方法：假设我们的列表是

```
>>> let list = [1..20] 
```

我们可以使用以下方法找到“累积和”：

```
>>> let sums = tail . scanl (+) 0
>>> sums list
[1,3,6,10,15,21,28,36,45,55,66,78,91,105,120,136,153,171,190,210] 
```

现在将其与原始列表压缩以获得总和到该点的元素对

```
>>> zip list (sums list)
[(1,1),(2,3),(3,6),(4,10),(5,15),(6,21),(7,28),(8,36),
 (9,45),(10,55),(11,66),(12,78),(13,91),(14,105),(15,120),
 (16,136),(17,153),(18,171),(19,190),(20,210)] 
```

然后我们可以通过`takeWhile`这个列表来获取我们想要的前缀：

```
>>> takeWhile (\x -> snd x < 30) (zip list (sums list))
[(1,1),(2,3),(3,6),(4,10),(5,15),(6,21),(7,28)] 
```

最后，我们可以摆脱用于执行此计算的累积和：

```
>>> map fst (takeWhile (\x -> snd x < 30) (zip list (sums list)))
[1,2,3,4,5,6,7] 
```

请注意，由于懒惰，这与递归解决方案一样有效——只需计算它们未通过测试的总和。可以看出这是因为该解决方案适用于无限列表（因为如果我们需要计算所有总和，我们将永远无法完成）。

我可能会抽象这个并将限制作为参数：

```
>>> :{
... let initial lim list =
...        map fst (takeWhile (\x -> snd x < lim) (zip list (sums list)))
... :} 
```

这个函数有一个明显的属性它应该满足，即列表的总和应该总是小于限制（只要限制大于0）。所以我们可以使用 QuickCheck 来确保我们做对了：

```
>>> import Test.QuickCheck
>>> quickCheck (\lim list -> lim > 0 ==> sum (initial lim list) < lim)
+++ OK, passed 100 tests. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:58:14.930

```
someList = makeList myList [] 0 where
    makeList (x:xs) ys total = let newTot = total + x
                               in if newTot >= 25
                                  then ys
                                  else makeList xs (ys ++ [x]) newTot 
```

这会从 myList 中获取元素，只要它们的总和小于 25。

逻辑发生在`makeList`. 它获取输入列表的第一个元素并将其添加到运行总数中，看看它是否大于 25。如果是，我们不应该将它添加到输出列表中，我们完成递归。否则，我们将`x`输出列表 ( `ys`) 放在末尾，并继续处理输入列表的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:15:45.253

你想要的行为是

```
ghci> appendWhileUnder 25 [1..5] [1..5]
[1,2,3,4,5,1,2,3] 
```

因为总和是 21，加上 4 会变成 25。

好的，解决此问题的一种方法是仅将它们附加，`++`然后获取 25 岁以下的初始段。

```
appendWhileUnder n xs ys = takeWhileUnder n (xs++ys) 
```

我**不想**继续对中间列表求和，所以我会跟踪我被允许的数量（`n`）。

```
takeWhileUnder n [] = []
takeWhileUnder n (x:xs) | x < n = x:takeWhileUnder (n-x) xs
                        | otherwise = [] 
```

在这里我允许`x`通过，如果它不带我超出我剩余的津贴。

可能不受欢迎的副作用：如果总和超过 25，它将删除原始列表的位。解决方法：使用

```
appendWhileUnder' n xs ys = xs ++ takeWhileUnder (n - sum xs) 
```

`xs`无论它是否带你过来，它都会保留整个`n`。

# vb.net - 在检查无效数据时，已经是与此命令关联的打开的 DataReader

> ID：15464787
> 
> 赞同：0
> 
> 时间：2013-03-17T18:51:18.433
> 
> 标签：vb.net, sqldatareader

```
Private Sub txt_sname_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles txt_sname.GotFocus
        Dim fcs As String
        fcs = "select fname,dept from nstudent where stid = '" & txt_sid.Text & "'"
        scmd1 = New SqlCommand(fcs, con)
        dr1 = scmd1.ExecuteReader
        If dr1.HasRows Then
            Do While (dr1.Read)
                txt_sname.Text = dr1.Item(0)
                cmb_dept.Text = dr1.Item(1)
            Loop
        Else
            MsgBox("Not Found")
        End If
        scmd1.Dispose()
        If Not dr1.IsClosed Then dr1.Close()
End Sub 
```

以上代码用于数据库中的数据并传递到文本框。当我运行程序并检查数据库中已经存在的数据时，它工作正常。但是检查其他一些数据（数据库中不存在）以下错误正在发生并退出。

错误：“已经有一个打开的 DataReader 与此命令关联，必须先关闭。”

请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:07:30.637

一些观察：

不要使用全局命令对象，而是使用本地命令对象。特别是因为无论如何您都在创建一个新命令。看起来dr1也是如此。

您并没有阻止 SQL 注入，因此有人可以`txt_sid`通过删除数据、删除表或访问数据库中的其他数据来键入导致安全问题的文本。

您正在循环并多次设置相同的变量。如果只有一条记录，请不要打扰循环。

将整个事情包裹在 try/catch 周围

```
Private Sub txt_sname_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles txt_sname.GotFocus
    Dim cmd1 As SqlCommand = New SqlCommand(fcs, "select fname,dept from nstudent where stid = @stid")
    cmd1.Parameters.Parameters.AddWithValue("@stid", txt_sid.Text)

    Dim studentReader as SqlDataReader

    Try
        studentReader = scmd1.ExecuteReader
        If studentReader.Read Then
            txt_sname.Text = studentReader.Item(0)
            cmb_dept.Text = studentReader.Item(1)
        Else
            MsgBox("Not Found")
        End If
    Finally
        studentReader.Close()
        cmd1.Dispose()
    End Try
End Sub 
```

最后，我认为您可能希望在 txt_sid 更改时实际执行此操作，而不是在 txt_sname 获得焦点时执行此操作。

# javascript - chrome 扩展中所有 web 请求的列表

> ID：15464790
> 
> 赞同：0
> 
> 时间：2013-03-17T18:51:25.270
> 
> 标签：javascript, google-chrome-extension

我正在玩弄我的第一个 chrome 扩展。我正在制作一个小扩展来监视页面所做的网络请求。这意味着我正在听： chrome.webRequest.onBeforeRequest.addListener 事件

我对如何在我加载的每个页面上执行此代码感到有些困惑。如果我打开扩展网页并在此上下文中运行代码，它适用于任何页面。但是，无论页面是否打开，我都希望它运行。我该怎么做呢？

我查看了 content_scripts，但还没有弄清楚它们是否是正确的路径——即使它们是我如何从我的内容脚本向我的网页发送一条消息，通知它运行代码。据我了解，内容脚本在页面加载后首先运行，因此如果我调用我的页面并添加侦听器并不重要，因为节目已经结束 - 这是正确的吗？

我理解这是我无法在内容脚本中添加侦听器 - 因此需要制作这个消息传递的东西 - 这是正确的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:57:56.753

您可以将`onBeforeRequest`侦听器放在 中[`background page`](http://developer.chrome.com/extensions/background_pages.html)，特别是它的持久变体。调用事件时，将运行处理程序中的任何内容。

# python - 将字典保存到文件 Python

> ID：15464791
> 
> 赞同：4
> 
> 时间：2013-03-17T18:51:25.280
> 
> 标签：python, serialization, file-io, dictionary, deserialization

假设我有一本这样的字典：

```
Test = {"apple":[3,{1:1,3:5,6:7}],"banana":[4,{1:1,3:5,6:7,11:2}]} 
```

现在我想将这本字典保存到一个临时文件中，以便以后可以重建字典。（我在做外部排序XD）

有好心人能帮帮我吗？我知道有一种方法可以将其保存为 csv 格式，但这是一种特殊的字典。多谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T19:00:29.667

为了将数据结构保存到文件中，您需要确定序列化格式。序列化格式采用内存中的数据结构并将其转换为可以写入文件的字节序列。将该字节序列转换回数据结构的过程称为*反序列*化。

Python 提供了许多具有不同特征的序列化选项。以下是两种常见的选择及其权衡：

*   [pickle](http://docs.python.org/2/library/pickle.html)使用一种紧凑的格式，几乎可以表示任何 Python 对象。但是，它特定于 Python，因此只有 Python 程序可以（轻松）稍后解码文件。格式的详细信息也可能因 Python 版本而异，因此最好仅在使用与创建它的 Python 版本相同或更新版本的 Python 重新读取数据文件时才使用 pickle。Pickle 能够处理递归数据结构。最后，pickle 不适合读取其他可能是恶意程序提供的数据，因为解码 pickle 数据结构会导致任意代码在您的应用程序中运行以重建复杂对象。

*   [json](http://docs.python.org/2/library/json.html)使用人类可读的基于文本的格式，只能表示一小组数据类型：数字、字符串`None`、布尔值、列表和字典。但是，它是一种标准格式，可以被许多其他编程语言中的等效库读取，并且它不会因 Python 版本而异。JSON 不支持递归数据结构，但从未知来源解码 JSON 对象通常是安全的，当然生成的数据结构可能会使用大量内存。

在这两个模块中，`dump`函数都可以将数据结构写入文件，然后`load`函数可以恢复它。不同之处在于写入文件的数据格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T18:57:14.727

[pickle](http://docs.python.org/2/library/pickle.html)模块对于序列化 python 数据非常方便。它也可能是转储和重新加载 python 数据结构的最快方法。

```
>>> import pickle
>>> Test = {"apple":[3,{1:1,3:5,6:7}],"banana":[4,{1:1,3:5,6:7,11:2}]}
>>> pickle.dump(Test, open('test_file', 'w'))
>>> pickle.load(open('test_file', 'r'))
{'apple': [3, {1: 1, 3: 5, 6: 7}], 'banana': [4, {1: 1, 3: 5, 11: 2, 6: 7}]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:38:48.033

对我来说，显然最好的序列化程序是*msgpack*。

[http://jmoiron.net/blog/python-serialization/](http://jmoiron.net/blog/python-serialization/)

与其他方法相同。

# razor - 如何读取多个文本框并插入数据库？

> ID：15464792
> 
> 赞同：0
> 
> 时间：2013-03-17T18:51:29.833
> 
> 标签：razor

如何使用 ASP.NET 网页（剃刀语法）更新数据库中的多个文本框。我想编辑学生的电子邮件。并且包含文本框的行数是变化的或动态的。有人帮忙。

```
 <tr>
    <th>Name</th>
    <th>Email</th>
    </tr>
    <tr>
    <td>Jason</td>
    <td><input type="text" name="txtbox1"></td>
    </tr>

      <tr>
    <td>Kripkee</td>
    <td><input type="text" name="txtbox2"></td>
    </tr>

          <tr>
    <td>Kane</td>
    <td><input type="text" name="txtbox3"></td>
    </tr>

          <tr>
    <td>Michael</td>
    <td><input type="text" name="txtbox4"></td>
    </tr>
    <tr>
    <td><input type="submit" value="Update"></td>    
    </tr>
    </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T02:11:10.053

你可以试试这个：

假设您有一个提供学生列表的视图模型。

看法 -

```
@foreach (var student in Model.Students)
                    {
                        <tr>
                            <td>@student.Name</td>
                            <td><input name="studentEmails[@student.Id]"/></td>
                        </tr>                    
                    } 
```

控制器 -

```
public ActionResult UpdateEmails(IDictionary<int, string> studentEmails) 
```

# r - 在 r 中恢复向量/矩阵的原始顺序

> ID：15464793
> 
> 赞同：1
> 
> 时间：2013-03-17T18:51:46.853
> 
> 标签：r, sorting

所以我有一个矢量图

```
> A<-c(19:30,1:5,6,100:80) 
```

然后我用

```
> A<-sort(A,index.return=T)
> valueA<-A$x
> indexA<-A$ix 
```

对向量进行排序并获得一个表示值的向量。然后我对 valueA 执行了一些算术运算，需要首先对其进行排序，现在我想将新值按照 A 最初的顺序（保存在向量 indexA 中）。

这是一回事吗？某种“恢复”或“取消排序”或其他什么？我试过环顾四周，似乎有些东西很接近，但要么不正确，要么我不理解。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T18:55:23.573

你想要的`base`功能`order`。

```
ord <- order(A)
A <- A[ord] #same as sort(A)
#do stuff, then revert
A <- A[order(ord)] 
```

# excel - Excel VBA 错误 - 函数或接口标记为受限。或函数使用 Visual Basic 不支持的自动化类型

> ID：15464801
> 
> 赞同：0
> 
> 时间：2013-03-17T18:52:41.300
> 
> 标签：excel, compiler-errors, vba

我正在用 VBA 编写一个小分数查找程序，下面的代码在标题中给出了错误，我是 VBA 的新手，错误指向 Excel 本身生成的第一行。

```
Private Sub btnSearch_Click()
    Name = txtSearch.Text
    AmountOfEntries = Range("i10")
    For i = 1 To AmountOfEntries
        If Range("a" + i) = Name Then
            cell = i
        Else
            cell = "Error"
        End If
    Next i

    If cell = "Error" Then
        lblScore.Caption = "Your Username is Incorrect. Please Try Again"
    Else
        lblScore.Caption = "Your Score Is : " + Range("b" + cell)
    End If
End Sub 
```

我的电子表格在“A”列中包含一个名称列表，然后在“B”列中包含一个分数列表。在“I10”中有一个字段包含列表中的条目数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:28:53.973

您应该尽量避免使用“名称”、“单元格”等（VBA 中的通用术语）作为变量名称。尝试定义你的变量`Dim strName as String, i as Integer, intCell as Integer, intAmountOfEntries as Integer`。

此外，您的范围语句应更改为使用`&`并指定您要使用 VALUE 而不是对象的 RANGE 方面：

`Range("a" & i).Value`和`Range("b" & intCell).Value`

编辑==============

在下面回复您的评论：

我认为问题是由于您使用单元格作为整数（行号）和字符串（“错误”）。我会创建一个新变量来检测是否有错误：

`Dim blnError as Boolean`

然后替换这个：

`cell = "Error"`和`blnError = True`

您下面的 If 语句将需要修改为`If blnError = True Then`

您能否确认您有一张名为“Sheet1”的工作表？如果不是，那么这就是`Sheets("Sheet1")`代码不起作用的原因。我通常使用 VBA 名称代替工作表 - 在 VBE 中，您可以看到它们在项目资源管理器中的内容（括号前的名称），您可以使用属性窗口更改它们。然后你只需使用`sheetname.Range("A1")`.

# apache - svn 更新和提交停止工作

> ID：15464802
> 
> 赞同：9
> 
> 时间：2013-03-17T18:52:44.387
> 
> 标签：apache, svn

我已经在 Ubuntu 服务器上使用 apache2 启动并运行 subversion 大约一年了。直到 4 天前，我几乎每天都在使用它，没有任何问题。我可以通过网络浏览器浏览我的存储库，也可以使用列出我的存储库

`svn list http://xx.xxx.xxx.xxx/svn/repository`

但是当我尝试更新或提交某些内容时，服务器会挂起，我必须等待大约一分钟才能再次访问它。我到处搜索，但似乎找不到任何解决方案。apache error.log 说

```
[Sun Mar 17 16:36:36 2013] [notice] caught SIGTERM, shutting down
PHP Warning:  Module 'ssh2' already loaded in Unknown on line 0
[Sun Mar 17 16:36:37 2013] [notice] Apache/2.2.22 (Ubuntu) DAV/2 SVN/1.6.17 PHP/5.3.10-1ubuntu3.6 with Suhosin-Patch configured -- resuming normal operations 
```

而 other_vhosts_access.log 说

```
- [17/Mar/2013:16:37:44 +0100] "OPTIONS /svn/repository HTTP/1.1" 401 677 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
- [17/Mar/2013:16:37:44 +0100] "OPTIONS /svn/repository HTTP/1.1" 401 677 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "OPTIONS /svn/repository HTTP/1.1" 200 876 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "OPTIONS /svn/repository HTTP/1.1" 200 876 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository HTTP/1.1" 207 554 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository HTTP/1.1" 207 554 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository HTTP/1.1" 207 554 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository HTTP/1.1" 207 554 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository/!svn/vcc/default HTTP/1.1" 207 453 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository/!svn/vcc/default HTTP/1.1" 207 453 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository/!svn/bln/20 HTTP/1.1" 207 468 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository/!svn/bln/20 HTTP/1.1" 207 468 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository HTTP/1.1" 207 554 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:44 +0100] "PROPFIND /svn/repository HTTP/1.1" 207 554 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:45 +0100] "PROPFIND /svn/repository/!svn/vcc/default HTTP/1.1" 207 453 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:45 +0100] "PROPFIND /svn/repository/!svn/vcc/default HTTP/1.1" 207 453 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:45 +0100] "PROPFIND /svn/repository/!svn/bln/20 HTTP/1.1" 207 468 "-" "SVN/1.6.18 (r1303927) neon/0.29.0"
user [17/Mar/2013:16:37:45 +0100] "PROPFIND /svn/repository/!svn/bln/20 HTTP/1.1" 207 468 "-" "SVN/1.6.18 (r1303927) neon/0.29.0" 
```

我尝试重新安装 subversion，重新启动计算机，验证并恢复我的存储库，但没有任何帮助。有谁知道问题可能是什么？

**更新：**查看[模块 'ssh2' 已经加载到 Unknown on line 0](https://stackoverflow.com/questions/4726070/module-ssh2-already-loaded-in-unknown-on-line-0)后，错误日志显示以下内容：

```
[Wed Mar 20 22:27:45 2013] [notice] caught SIGTERM, shutting down [Wed Mar 20 22:27:46 2013] [notice] Apache/2.2.22 (Ubuntu) DAV/2 SVN/1.7.8 PHP/5.3.10-1ubuntu3.6 with Suhosin-Patch configured -- resuming normal operations 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:38:42.907

不是您正在寻找的答案，但这里有：

*切换到[Git](http://git-scm.com)。*

你不会后悔的！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:04:48.877

我曾经遇到过类似的问题，这是由预提交挂钩中的错误引起的。

创建一个新的测试存储库（没有任何钩子），看看你是否可以在那里提交。

您还应该检查存储库的完整性。`svnadmin verify`不会捕获所有错误 - 尝试`svnadmin dump REPOS > /dev/nul`。

# objective-c - 将协议添加到 NSDictionary

> ID：15464807
> 
> 赞同：0
> 
> 时间：2013-03-17T18:52:50.277
> 
> 标签：objective-c, nsmutabledictionary

我在 Objective-C 中有一个协议。我在另一个类中尝试将实现此协议的对象添加到 NSMutableDictionary。

```
- (void) addValue:(NSString*)myString withObject:(id<MyProtocol>*)protocolThing
{
    [dictionary insertValue:protocolThing inPropertyWithKey:myString];
} 
```

这给了我一个错误，说“ARC不允许将间接指针隐式转换为指向'id'的Objective-C指针”

我怎样才能做到这一点？

这来自 Java，我可以在其中声明一个接口，然后将实现该接口的对象视为常规对象，然后将它们添加到 HashMaps。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:54:14.973

你的问题是它`id<MyProtocol>`已经是一个指针类型。将您的签名更改为

```
- (void) addValue:(NSString*)myString withObject:(id<MyProtocol>)protocolThing 
```

它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:54:46.210

使用`id`时不要使用 *

用这个：

```
- (void) addValue:(NSString*)myString withObject:(id<MyProtocol>)protocolThing 
```

# selenium - 如何使用 Selenium WebDriver 在框架集中导航子框架？

> ID：15464808
> 
> 赞同：4
> 
> 时间：2013-03-17T18:52:53.440
> 
> 标签：selenium, frame

我需要从表“td”中得到结果。但在我能做到这一点之前，我需要导航一个包含它的框架。框架是属于 mainFrame 的框架集元素之一。我尝试使用所有类型的导航“子”子框架，这些都不起作用：

```
 driver.switchTo().defaultContent();
    Thread.sleep(1000);
     driver.switchTo().frame("mainFrame.0.fr_resultsNav~ResultsMaxGroupTemplate0.9766101221774707");
    driver.switchTo().frame("main.Frame.1.fr_resultsNav~ResultsMaxGroupTemplate0.8811790466176727");

// even: driver.switchTo().frame("mainFrame.0.fs_main"); 
```

以下是网页的简要布局：

```
<frame src="banner.asp" name="topFrame" scrolling="no" noresize="noresize" id="topFrame" title="topFrame">

<frame src="" name="mainFrame" id="mainFrame" title="mainFrame" wd_frame_id_="5f4c10bc7e0960070bfda831655b8b0c">

    <frameset id="fs_main" border="0" frameborder="no" framespacing="0" rows="70,87,*">
.....................

        <frameset id="fs_content" cols="23%,*" framespacing="0" frameborder="no">
.....................
            <frameset cols="*,9" id="LeftFrameSet" framespacing="0" frameborder="no">
.....................
            <frame frameborder="0" name="fr_classification~ResultsMaxGroupTemplate0.609021034867735" title="Results Classification Frame" id="fr_classification~ResultsMaxGroupTemplate0.609021034867735" src="/lnacui2api/results/shared/waitMessage.do?wmibIdRand=61_T16938265013_rand_1363544453847" scrolling="Auto" onload="paintResultsBorder('ResultsMaxGroupTemplate0.609021034867735');">

....................

<form name="results_listview_ResultsListForm" method="post" action="/lnacui2api/results/listview/listview.do" id="results_listview_ResultsListForm">

..........

<td nowrap="" height="20"> <span id="new">&nbsp;All Results</span> (294)</td>
</form>

.................... 
```

在导航子框架之前是否需要导航框架集？我阅读了文档。所有互联网示例都给出了一个简单的示例代码：driver.switchTo().frame("mainFrame.0.child")。在这种情况下它不起作用。请看一下上面的脚本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T00:50:11.270

我同意，您不能直接切换到子框架。此外，每次要切换帧时，请务必切换到`defaultContent`( )。`driver.switchTo.defaultContent`关于你的例子，`driver.switchTo().frame("mainFrame.0.child")`---这也可以工作，但你需要去掉不必要的引号。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T07:31:59.740

从零开始找到主框架的索引然后使用

```
driver.switchTo.frame(mainFrameindex); 
```

然后在主框架中找到子框架的索引

```
driver.switchTo.frame(subFrameIndex); 
```

如果不先切换到父框架，则无法直接切换到子框架。这就是它的工作原理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-15T22:04:08.133

通过将方法链接在一起，一旦您`switchTo().defaultContent`，您可以通过 tagName 的 findElements() 创建可用帧的临时列表并转到该特定帧的索引...

例如

```
driver.switchTo()defaultContent();
driver.switchTo().frame(driver.findElement(By.tagName("frameset")).findElements(By.tagName("frame")).get(2)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-22T21:05:18.303

您可以使用 xPath 直接切换到所需的帧。通过 Developer 控制台获取 Xpath，然后：

`driver.switch_to.frame(driver.find_element_by_xpath('html / frameset / frameset / frame[1]'))`

# python - 通过管道将 Haskell 程序连接到 Python 程序（在 Python 中）

> ID：15464809
> 
> 赞同：5
> 
> 时间：2013-03-17T18:52:53.800
> 
> 标签：python, user-interface, haskell, pipeline

请耐心等待，因为我对编程还很陌生。我的基本问题是这个。我有一个用 Haskell 编写的程序，我想将它的标准输出连接到 Python 程序的标准输入（它将管理与 GUI 相关的东西）。同样，我想将 Python 程序的标准输出连接到 Haskell 程序的标准输入，以便它可以将有关用户单击/键入的内容的信息发送到 Haskell 程序。

第一个问题是，如果我在两者之间建立一个管道，假设 Python 程序的标准输出连接到 Haskell 程序，如果我使用 Tkinter 创建小部件和东西，它们仍然会显示在屏幕上吗？

第二个问题是我将如何建立这个管道？考虑以下示例代码..

```
main :: IO ()
main = do
    -- putStrLn "Enter a number." <- this will be displayed in Python
    string <- getLine
    putStrLn $ 5 + read string::Int -- or any equivalent function to send to stdout 
```

Python 代码看起来像这样。

```
from Tkinter import *
root = Tk()

label = Label(root, text = "Enter a number.")
label.pack()

enternum = Entry(root)
enternum.pack()
enternum.bind("<Return>", print_num)

-- print_num would essentially be a function to send the Haskell program the number
-- which would be received by the getLine function the way I have it. 
```

很抱歉，如果之前已经问过这个问题，但感谢您帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:54:43.713

我使用[Twisted](http://twistedmatrix.com/)完成了它，因为它提供了比轮询更好的抽象。基本上，您需要首先定义 Python 和 Haskell 程序如何相互通信的方式（在 Twisted 中称为协议），例如，数据包有多长，如何处理错误等。然后您只需将它们编码。

这是haskell代码：

```
-- File "./Hs.hs"

import Control.Concurrent                                                   
import System.IO

main = do
  -- Important
  hSetBuffering stdout NoBuffering

  -- Read a line
  line <- getLine

  -- parse the line and add one and print it back
  putStrLn (show (read line + 1))

  -- Emphasize the importance of hSetBuffering :P
  threadDelay 10000000 
```

这是Python代码：

```
# File "./pyrun.py"

import os                                                                   
here = os.path.dirname(os.path.abspath(__file__))

from twisted.internet import tksupport, reactor, protocol
from twisted.protocols.basic import LineReceiver

from Tkinter import Tk, Label, Entry, StringVar

# Protocol to handle the actual communication
class HsProtocol(protocol.ProcessProtocol):
    def __init__(self, text):
        self.text = text

    def connectionMade(self):
        # When haskell prog is opened
        towrite = self.text + '\n'

        # Write a line to the haskell side
        self.transport.write(towrite)

    def outReceived(self, data):
        # When haskell prog write something to the stdout
        # Change the label in the tk window to be the received data
        label_var.set(data[:-1])

def send_num_to_hs(_event):
    content = enternum.get()

    # The abspath of the haskell program
    prog = os.path.join(here, 'Hs')
    reactor.spawnProcess(HsProtocol(content), # communication protocol to use                                           
                         prog, # path
                         [prog] # args to the prog
                         )

# Setting up tk
root = Tk()

# On main window close, stop the tk reactor
root.protocol('WM_DELETE_WINDOW', reactor.stop)

# Since I'm going to change that label..
label_var = StringVar(root, 'Enter a number')

# Label whose content will be changed
label = Label(root, textvariable=label_var)
label.pack()

# Input box
enternum = Entry(root)
enternum.pack()
enternum.bind('<Return>', send_num_to_hs)

# Patch the twisted reactor
tksupport.install(root)

# Start tk's (and twisted's) mainloop
reactor.run() 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-18T04:02:51.997

您还可以从命令 shell 建立管道：

我的python.py | myhaskell.hs

Haskell 程序将像对任何其他类型的标准输入一样响应，如下所示：

myhaskell.hs

# c - 警告：初始化使指针从整数而不在 C 中进行强制转换

> ID：15464820
> 
> 赞同：2
> 
> 时间：2013-03-17T18:53:41.593
> 
> 标签：c

我收到警告：初始化从整数生成指针，而没有在 C 中进行强制转换。什么是强制转换？我应该怎么办？

```
void UpdateElement(Console* console)
{
    DynamicVector* CostList=getAllCosts(console->ctrl);
    int i,n;
    printf("Give the position of the element you want to delete:");
    scanf("%d",&n);
    for(i=n-1;i<getLen(CostList);i++)
    {
        Cost* c=(Cost*)getElementAtPosition(CostList,i);
        Cost* c2=AddCost(console); **//here I get the warning**
        update_an_element(console->ctrl,c,c2,i);
    }
}

Console* initConsole(Controller* ctrl)
{
    Console* console=(Console*)malloc(sizeof(Console));
    console->ctrl=ctrl;
    return console;
}

int createCost(Controller* ctrl, char* day, char* type, int sum)
{
    Cost* c=initCost(day,type,sum);
    save(ctrl->repo,c);
    return c; **//now here I get the warning**

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T23:31:16.907

C/C++ 假定返回类型是整数，除非由标头或其声明指定。您可能调用了一个未在程序中预先声明且没有标头的函数。它假设它是一个 int 并给你一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:59:49.903

我相信：

```
AddCost(console); 
```

正在返回一个整数，然后将其转换为指针（警告所说的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T19:00:44.863

`c`是 type`Cost*`并且函数`createCost`返回`int`. 两者都不兼容，这就是编译器抱怨缺少强制转换的原因，但在这种情况下你不想强制转换。

将该函数的返回类型更改为`Cost*`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:56:16.617

您可能需要使用

```
Cost* c2=(Cost*)AddCost(console); 
```

但它可能是不安全的，因为 AddCost(...) 正在返回另一种类型。

至于功能

```
int createCost(Controller* ctrl, char* day, char* type, int sum) 
```

它应该被声明为

```
Cost* createCost(Controller* ctrl, char* day, char* type, int sum) 
```

为什么它被声明为 int ？

# iphone - 常见 UI 字符串的本地化

> ID：15464830
> 
> 赞同：4
> 
> 时间：2013-03-17T18:54:19.987
> 
> 标签：iphone, ios, cocoa-touch, localization

我的文件中有要本地化的字符串。其中许多是常见的，并且已经在整个 iOS 中使用。例如“保存”、“加载”、“返回”、“收藏”、“拍照”。为了提供与其他应用程序和内置应用程序一致的用户体验，有没有办法挂钩这些本地化？还是在某处有翻译列表，以便我可以复制粘贴其他人使用的相同措辞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:56:04.867

如果您有 iOS 设备，您可以自己发现它们。从您知道的应用程序开始，比如用美式英语，更改您的默认语言，再次启动应用程序并记下映射。

另外，请在此处查看：[Apple 是否提供其使用的本地化术语的索引？](https://stackoverflow.com/q/5897777/1286639)

您可以找到[第三方本地化供应商](https://developer.apple.com/internationalization/)。

# css - 具有 Rowspan 悬停和斑马效果的表格

> ID：15464831
> 
> 赞同：9
> 
> 时间：2013-03-17T18:54:25.167
> 
> 标签：css, hover, css-tables

我正在尝试创建一个具有行跨度、斑马效果并在悬停时突出显示该行的表。我有点让它工作但不完全。

它应该是这样的：[http](http://codepen.io/chriscoyier/pen/wLGDz) ://codepen.io/chriscoyier/pen/wLGDz加上行上的斑马效果。不幸的是，使用 jQuery 或 CSS 的斑马效果对我不起作用，因为如果我这样做，悬停时线条不会改变。

有什么建议么？

 `* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-17T19:09:42.743

这是一份工作`tbody`。至少早在 HTML4 中就允许在一个表格中使用多个 tbody 元素，它们旨在将相关行组合在一起。这样，您根本不需要 JavaScript。

```
body {
  padding: 1em;
}

table {
  width: 100%;
  border-collapse: collapse;
}

td,
th {
  padding: .25em;
  border: 1px solid black;
}

tbody:nth-child(odd) {
  background: #CCC;
}

tbody:hover td[rowspan],
tr:hover td {
  background: red;
}
```

```
<table>
  <tbody>
    <tr>
      <td rowspan="3"></td>
      <td>a</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>b</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>c</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>

  <tbody>
    <tr>
      <td rowspan="3"></td>
      <td>a</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>b</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>c</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>

  <tbody>
    <tr>
      <td rowspan="3"></td>
      <td>a</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>b</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>c</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-17T18:59:50.357

就像是：

```
// stripe
tr:nth-child(even) {
    background-color: #ccc;
}
// hover
tr:hover {
     background-color: #c00;
} 
```

应该管用。把你的代码贴出来。`

# javascript - 如何在 azure 移动服务（服务器脚本）中查询行“其中 id IN [some-array-of-numbers]”

> ID：15464832
> 
> 赞同：2
> 
> 时间：2013-03-17T18:54:35.663
> 
> 标签：javascript, azure, azure-mobile-services

我的任务是通过给定的 ID 列表`deviceTokens`从我的表中查询。`clientDevices`然后向该客户端发送推送通知。

我通过将以下数据插入`pushRequests`表来获取 ID 列表：

```
{
  "alert": "Hello customer!",
  "badge": 1,
  "recipients": [2, 4, 5]
} 
```

我写了这个服务器端插入函数：

```
function insert(item, user, request) {
  if (item.recipients) {
    tables.getTable('clientDevices').where(function(ids) {
      return (ids.indexOf(this.id) > -1)
    }, item.recipients).read({
      success: function(results) {
        // . . .
        // Send push notifications to this guys
        // . . .
      }
    })
    item.recipients = JSON.stringify(item.recipients)
  }
  request.execute()
} 
```

但我得到一个奇怪的错误：

```
Error in script '/table/pushRequests.insert.js'. Error: The expression 'ids.indexOf(this.id)'' is not supported. 
```

如果`indexOf`不支持函数，那么如何制作“字段 IN 数组”样式过滤器？我可以将数组`mssql.query(sql, params, options)`作为查询参数传递吗？

*PS：我真的不想从给定的数组中手动​​构建 where 表达式。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T01:55:18.137

您可以使用带有 in 运算符的 JS 的 Mobile Services LINQ 样式语法，例如：

```
// find all TodoItem records with id = 2 or 3
var todos = tables.getTable("TodoItem");
todos.where(function(arr) {
    return this.id in arr;
}, [2, 3]).read({
    success: console.log(results);
}); 
```

语法是：

```
table.where(function, parameters).read(options); 
```

该函数类似于通过比较当前行 (this) 上的属性返回 true 或 false 的 lambda。一件奇怪的事情是，参数必须在函数签名上指定为参数并单独传递，正如您在上面的 2 和 3 中看到的那样。

# android - Nexus 10 高分辨率资源

> ID：15464837
> 
> 赞同：1
> 
> 时间：2013-03-17T18:55:21.873
> 
> 标签：android, screen-resolution, android-resources, nexus-10

我正在nexus 10上测试我的应用程序，我想知道如何为其提供后台资源。

详细地说，问题在于 Nexus 10 的分辨率为**2560x1600**，但属于[**xhdpi**](https://plus.google.com/118292708268361843293/posts/ePQya3KsTjW)类别，与 Galaxy Nexus 和 Nexus 4 属于同一类别。我试图了解如何提供 2560x1600 分辨率的特定背景图像到 Nexus 10，而不是默认使用专为 1280x720 类似屏幕设计的 Galaxy Nexus 背景。通常，我会通过将背景图像放在相应的可绘制文件夹（此处为 drawable-xhdpi）中并让 android 自动选择正确的资源来做到这一点。

**可能的解决方案**：我应该将 2560x1600 分辨率的图像放在 drawable-sw720p-xhdpi 文件夹中吗？将nexus 10归类为具有xhdpi特性的sw720dp设备（10+“）是否正确？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-17T19:26:03.223

Nexus 10 应该是 xxhdpi。只需创建一个文件夹 res/drawable-xxhdpi、res/drawable-sw720p-xxhdpi 等，它应该可以工作。

# javascript - 在一定时间后根据 Key 加载 JSON 数据

> ID：15464841
> 
> 赞同：0
> 
> 时间：2013-03-17T18:55:46.243
> 
> 标签：javascript, json

嗨，我遇到了`JSON`密钥问题。假设我有一个外部`JSON`文件，例如

```
{
   "key 1":[
      {
         "linkName":"key name 1.1",
         "linkUrl":"key URL 1.1"
      },
      {
         "linkName":"key name 1.2",
         "linkUrl":"key URL 1.2"
      }
   ],
   "key 2":[
      {
         "linkName":"key name 2.1",
         "linkUrl":"key URL 2.1"
      }
   ],
   "key 3":[
      {
         "linkName":"key name 3.1",
         "linkUrl":"key URL 3.1"
      },
      {
         "linkName":"key name 3.2",
         "linkUrl":"key URL 3.2"
      }
   ]
} 
```

另外，假设我有一个`setInterval`功能，数据应该按键加载，即在页面加载后`key 1`是默认值，然后在一定时间后`key 2`加载数据，然后在一定时间后再次`key 3`加载数据，等等。我正在尝试如下脚本：

```
$.getJSON("demo.json",function(data){
   $.each(data,function(key,value){
     if(data.hasOwnProperty(key)){
       var total = new Array();
       for(var i=0; i<2; i++){
       total[i] = key;
       $("#topmost").append('<div>'+total+'</div>');
     }
   }
});
}); 
```

topmost 是仅在`body/html`as中的 div

```
<div id="topmost"></div> 
```

请提供必要的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:28:47.757

好的，我解决了你的问题。这是您发送给我的代码（部分粘贴）：

```
<script type="text/javascript">
    $(document).ready(function(){       
        $.getJSON("demonew2.json",function(data){
            $.each(data,function(key,value){
                $("#topmost").append('<div>'+key+'</div>');
                if(data.hasOwnProperty(key)){
                    //alert(key);
                    var total = new Array();
                    for(var i=0; i<4; i++){ // Here 4 should be something like counts of the keys, as in this json file it is 4
                        total[i] = key;
                        $("#topmost").append('<div>'+total+'</div>');

                        setInterval (function(){alert(key)},5000);
                        // I NEED THE DATA TO BE LOADED KEY BY KEY, SAY AFTER PAGE LOAD IT WILL DISPLAY THE VALUES OF key_1, THEN AFTER 5 SECONDS<br />
                        // IT SHOULD DISPLAY key_2 VALUES AND SO ON.
                    }
                }
            });
        });
    });
</script>

</head>

<body>

<div style="background:#ccc; border:2px solid #ccc; padding:10px;" id="topmost"></div>

</body> 
```

您的代码中有两个主要问题：

1）如果您希望在延迟后完成作业，则必须使用“setTimeout”而不是“setInterval”以给定间隔重复作业。2）对所有作业使用相同的延迟量将迫使它们几乎在同一时刻完成，因此您必须增加延迟量。

此外，将值直接传递给 setTimeout 或 setInterval 方法并不是一个好主意，因为它们会启动一个新线程并且跨线程值注入可能会出现异常行为，因此我更喜欢使用代理函数来避免直接注入所以这是最终的工作代码：

```
 <script type="text/javascript">

        $(document).ready(function () {

            $.getJSON("demonew2.json", function (data) {

                var delay = 0;

                $.each(data, function (key, value) {

                    delay += 5000;

                    showData(key, value, delay);
                });
            });
        });

        function showData(key, value, delay) {

            setTimeout(function () {

                $("#topmost").append('<div>' + key + " = " + JSON.stringify(value) + '</div>');

            }, delay);
        }
    </script>
</head>
<body>
    <div style="background:#ccc; border:2px solid #ccc; padding:10px;" id="topmost"></div>
</body> 
```

所以让我知道这是否解决了你的问题。玩得开心。;)

更新：我添加了完整的页面代码供您轻松使用，还稍微更改了附加部分以具有淡入淡出效果并使其更有趣：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            $.getJSON("demonew2.json", function (data) {

                var delay = 0;

                $.each(data, function (key, value) {

                    delay += 5000;

                    showData(key, value, delay);
                });
            });
        });

        function showData(key, value, delay) {

            setTimeout(function () {

                $("#topmost").fadeOut(function() {
                $("#topmost").append('<div>' + key + " = " + JSON.stringify(value) + '</div>').fadeIn();
            });

            }, delay);
        }
    </script>
</head>
<body>
    <div style="background:#ccc; border:2px solid #ccc; padding:10px;" id="topmost"></div>
</body>
</html> 
```

# jquery - 触摸/滑动后恢复 flexslider

> ID：15464844
> 
> 赞同：6
> 
> 时间：2013-03-17T18:55:51.843
> 
> 标签：jquery, flexslider

有没有办法在触摸事件后恢复 Flexslider 幻灯片的自动播放？现在看来，一旦我滑动导航，幻灯片就会停止。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-09T20:14:29.490

**FLEXISLIDER 2 的更新**

事件`resume()`不再存在，正确的解决方案是使用**after**回调并`after`在初始化中使用事件

```
$('.flexslider').flexslider(
    ...
    after: function(slider){ 
        slider.pause(); 
        slider.play(); 
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:41:21.740

看看这里： [https ://github.com/woothemes/FlexSlider/issues/21](https://github.com/woothemes/FlexSlider/issues/21)

之前已经提出过这个问题，答案是可以按照您的要求进行操作，但是，它是滑块设计的特定部分，它在触摸事件时停止，只是为了更好的可用性。

# sql - 插入语句要求我插入自动增量列

> ID：15464852
> 
> 赞同：11
> 
> 时间：2013-03-17T18:56:27.910
> 
> 标签：sql, postgresql, auto-increment

我使用 PostgreSQL，我创建了下表：

```
CREATE TABLE "Task"
(
  "taskID" serial NOT NULL,
  "taskType" text NOT NULL,
  "taskComment" text NOT NULL,
  "taskDate" date NOT NULL,
  CONSTRAINT "Task_pkey" PRIMARY KEY ("taskID")
) 
```

我将 taskID 作为`serial`要自动递增的数据类型。现在我很困惑如何使用该`INSERT`语句，因为表中的第一列应该自动递增，但 `INSERT`语句要求我自己插入一个值！任何的想法？

这是我的插入语句：

```
INSERT INTO "Task" VALUES ('HomeWork', 'No Comment', '3/3/2013'); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-17T19:15:57.460

[@mvp's answer](https://stackoverflow.com/a/15464912/939860)几乎涵盖了这一点。除了出于某种原因您（必须）`id`在列列表中添加列的情况。然后您可以使用关键字`DEFAULT`默认为定义的默认值。是的，这句话中有很多“默认”，但应该是正确的。:)

```
INSERT INTO "Task"("taskID", "taskType", "taskComment", "taskDate")
VALUES (DEFAULT, 'HomeWork', 'No Comment', '2013-03-03'); 
```

您还最好使用 ISO 8601 日期格式 ( `YYYY-MM-DD`)，它独立于区域设置工作。您的区域有效格式容易损坏。

* * *

但是，如果您一开始就远离使用[混合大小写标识符](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)的愚蠢行为，那么您在 PostgreSQL 中的生活将会简单得多：

```
CREATE TABLE task (
  task_id serial NOT NULL PRIMARY KEY,
  task_type text NOT NULL,
  task_comment text NOT NULL,
  task_date date NOT NULL
);

INSERT INTO task
VALUES (DEFAULT, 'HomeWork', 'No Comment', '2013-03-03'); 
```

或者*更好：*

```
INSERT INTO task (task_type, task_comment, task_date)
VALUES ('HomeWork', 'No Comment', '2013-03-03'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T19:01:09.917

你不应该**在**语句中列出这个自动递增的列`INSERT`，它会像你期望的那样工作：

```
INSERT INTO "Task" (
    "taskType", "taskComment", "taskDate"
) VALUES (
    'abc', 'my comment', '2013-03-17'
) 
```

如果您确实将其列在其中`INSERT`，则必须确保提供的值不会与任何使用的值冲突——这通常很难满足，除非您始终使用`nextval('some_sequence')`.

# ruby - 如何显示 Ruby on Rails 应用程序的 Facebook 权限对话框？

> ID：15464853
> 
> 赞同：0
> 
> 时间：2013-03-17T18:56:39.907
> 
> 标签：ruby, facebook-graph-api, rubygems

我正在将 Ruby on Rails 与 koala gem 和 heroku 主机一起使用。当用户访问 myapp.heroku.com 并在其上进行身份验证时，一切正常。但是，如果他们访问apps.facebook.com/myapp，没有人可以看到权限对话框。我了解到这是因为 facebook 拒绝在其 iframe 中调用 facebook url。不过，他们可以在网站上授权后使用该应用程序。所以我的问题是如何在 facebook 画布内进行身份验证或请求权限？即显示权限对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:42:11.247

认为我需要使用 myapp.herokuapp.com 而不是 myapp.heroku.com 作为我的 SITE_URL 和画布 url 才能在 Facebook 中工作。我还使用 Facebook JS SDK 登录更改了登录流程。问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T01:34:44.013

我也有同样的问题。但是，我不是在 Heroku 上托管，所以我很好奇 myapp.herokuapp.com 与 myapp.heroku.com 的行为方式有何不同。问题是omniauth-fecebook 强制重定向以显示权限框，而Canvas 不允许重定向，因此它保持空白。

# android - 如何完全删除可运行的计时器？

> ID：15464856
> 
> 赞同：2
> 
> 时间：2013-03-17T18:57:04.080
> 
> 标签：android, runnable, timertask

我有一个很好用的计时器，它会每 10 秒输出一次我的 Toast。我以为我很好地理解了以下代码，但显然我没有，因为我无法删除计时器，这是我的代码：

```
private void TimerMethod() {
    this.runOnUiThread(Timer_Tick);
}

private Runnable Timer_Tick = new Runnable() {
    public void run() {
        Toast.makeText(Map.this, "You are going to " + destination,Toast.LENGTH_SHORT).show();
    }
};

public void time() {

    myTimer.schedule(new TimerTask() {
        @Override
        public void run() {
            TimerMethod();
        }

    }, 0, timerAmount);
} 
```

我试过：

```
myTimer.cancel(); 
```

但根据 Android 中的帮助，显然这只不会影响任何当前正在运行的任务。我测试了它，它没有工作。

我想也许我可以用可运行的对象做点什么，`Timer_Tick`但我能做的不多。

总的来说，我迷失在我发布的代码中，因为我不确定现在做什么，我希望能解释一下如何删除导致计时器运行的任何部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:10:20.093

只需创建你自己的`Handler`，`post()`你自己`TimerTick`的。如果你不想让你`TimerTick`运行，那么只需调用`removeCallbacks()`你的`Handler`.

（我想这就是你要问的......）

# javascript - 多个 xmlhttprequest

> ID：15464859
> 
> 赞同：1
> 
> 时间：2013-03-17T18:57:21.823
> 
> 标签：javascript, xmlhttprequest

可以用javascript吗？还是我需要创建两个发件人？

因为这不起作用

```
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("textBox="+textBox.value);
xmlhttp.send("textBoxID="+textBox.parentNode.id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:01:43.127

你可以试试这个

```
xmlhttp.send("textBox="+textBox.value+"&textBoxID="+textBox.parentNode.id); 
```

一起发送多个参数。

# android - listview Android每一项的选项

> ID：15464869
> 
> 赞同：5
> 
> 时间：2013-03-17T18:58:14.443
> 
> 标签：android, drop-down-menu, android-listview, google-now

我想为每个`ListView`项目创建选项，例如 Google Now Android 应用程序。

我已经创建了一个自定义`ListView`项，其中的每个项目`ListView`都会有一个溢出图像，就像 Google Now 应用程序的 UI 卡中一样。

现在，当我单击该溢出图像时，我想要一个下拉列表，显示我可以对 ListView 中的相应项目执行的操作列表。

任何人都可以有解决方案或替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:04:28.417

是的，有一个名为的库`CardUI`，您可以使用它来完成您的任务！

要了解有关`CardUI`库的更多信息，请访问[androidviews.com 上的 CardUI](http://www.androidviews.net/2012/12/cardsui/)

要下载此库，请转到[此](https://github.com/nadavfima/cardsui-for-android)链接并单击`Zip`按钮。这会将库下载为 .rar 文件

# git - 如何从 GitHub 存储库中找出最新的克隆/获取/拉取？

> ID：15464871
> 
> 赞同：4
> 
> 时间：2013-03-17T18:58:16.313
> 
> 标签：git, github

GitHub 是否提供 repo 的最新 pull/fetch/clone 的时间（至少对于那些对 repo 具有写访问权限的人）？

当然，对这些信息的兴趣来自于想要衡量`git push -f`在 repo 上做一个基本上会覆盖最后几个提交的安全性：如果自最早的提交以来没有发生拉/取/克隆 - be-overwritten 被推送到 GitHub，那么覆盖可能就OK了……

* * *

也许一个例子可以澄清我的问题。为简单起见，我们假设只有一个本地分支 ( `master`) 和一个远程分支 ( `origin/master`)。（IOW，远程仓库只有一个分支，我正在用我们唯一的本地分支跟踪它。）

首先考虑一个完全本地的场景：我做了一个提交，不久之后意识到这个提交有问题。在这种情况下，我只需使用正确的提交*覆盖*`git commit --amend ...`此提交。

现在想象完全相同的场景，不同之处在于，在注意到提交问题之前，我将错误提交推送到远程 (GitHub) 存储库。

如果我是这个 repo 的唯一用户，那么我可以像以前一样简单地覆盖本地提交，然后使用`git push -f ...`覆盖远程（GitHub）repo 中的错误提交。

但是，如果我不是这个 repo 的唯一用户，那么上述过程是有问题的，因为在我推送错误提交之后但在我覆盖之前，其他用户可能已经从远程 (GitHub) repo 克隆或获取远程仓库中的错误提交。

将这种可能性降到最低的一种方法是检查自我将错误提交推送到远程存储库以来在远程存储库上执行的所有拉取、获取和克隆操作的记录。如果这个记录至少显示了一个这样的操作，那么这意味着我们正好遇到了上一段中描述的问题场景。

另一方面，如果记录显示没有这样的操作，那么我仍然有希望覆盖远程 repo 中的错误提交，而不会导致前面描述的问题场景。（当然，这是一个竞争条件，所以没有 100% 的保证。）

然而，所有这一切都取决于远程仓库上此类拉取、获取和克隆操作记录的可用性。我的问题是 GitHub 是否提供这样的记录，至少对于那些对 repo 有写访问权限的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:04:48.680

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:09:42.273

因为在您的问题中，您发布了真正的意图：

> ..来自想要衡量执行 git push -f 的安全性...

我认为改变你的工作流程会让生活更轻松。我建议执行以下操作：

不要直接提交重要的更改`master`（基本上是您以后可能想要更改的任何内容）。一旦发生变化，`master`就永远不要碰它。这是一个例子：

```
# assuming starting on master branch
git checkout -b new_cool_idea
# commit a few things
git push origin new_cool_idea
# realize there was a bug preventing you from finishing the
# implementation of new_cool_idea
git checkout -b cool_idea_bug_fix master
# commit the bug fix
# if you have any reviewers, push to remote
git push origin cool_idea_bug_fix
# when bug fix is all good, cleanup and finish new_cool_idea
git checkout master
git merge cool_idea_bug_fix
git branch -d cool_idea_bug_fix
git push origin :cool_idea_bug_fix
git checkout new_cool_idea
git rebase master
# may possibly have conflicts, go ahead and resolve
# now finish implementing new_cool_idea
# if you only want to update one remote branch add <remote> <branch>
# otherwise all remotes will be updated
git push -f <remote> <branch> 
```

这应该有助于防止需要`--rebase`on `master`。这又不应该发生。您可能想要使用一种更高级的技术。假设`bug_fix`分支需要一些时间来修复，但您还希望`new_idea`在测试错误修复的同时继续开发。所以说我们从以下开始：

```
o-----o-----o             master
      |      \
      |       o-----o     bug_fix
       \
        o-----o           cool_idea 
```

所以我们想要的是应用这些更改`cool_idea`，`bug_fix`以便我们可以协同工作。下面是你如何做到这一点：

```
git checkout cool_idea
git rebase --onto bug_fix master cool_idea 
```

那么你的历史将如下所示：

```
o-----o-----o                   master
             \
              o-----o           bug_fix
                     \
                      o-----o   cool_idea 
```

`--rebase`如果您真的考虑使用这种方法，那么如果您需要添加提交到或分支，我将编写清理步骤`bug_fix`。

# python - 他们如何给云实例提供假负载？

> ID：15464872
> 
> 赞同：3
> 
> 时间：2013-03-17T18:58:23.227
> 
> 标签：python, amazon-ec2, load, eucalyptus

[视频链接](http://www.youtube.com/watch?v=pfl4O7csYh8&list=UU7O0HKt8GPjJ0qMIJlwYJPg&index=1)

无论如何，我将解释视频中发生的事情：

单个 eucalyptus 实例正在运行，他为实例提供了某种类型的负载，并且它达到了自动部署另一个实例以帮助维持负载的程度。

过了一会儿，当创建 ec2 实例时，他进一步增加了负载，我也帮助维持负载。当他减少负载时，实例被终止以节省成本等，

我的问题是，他用什么来给正在运行的实例提供假负载以及如何确定它的任何指示？

是否有可能在python中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T21:25:10.797

您可以使用[Siege](http://www.joedog.org/siege-manual/)来测试服务器性能。您可以从命令行模拟实例上的 HTTP 负载，使用并发用户 (-c) 和连接持续时间 (-t) 等选项：

```
siege -c20 -t30 http://www.yoururl.com/ 
```

如果您只想在服务器上产生负载，请使用[Stress](http://weather.ou.edu/~apw/projects/stress/)之类的工具来创建 CPU/IO/内存负载。

负责任地使用 Siege。

# javascript - 如何将透明度应用于平滑更改颜色的背景

> ID：15464873
> 
> 赞同：0
> 
> 时间：2013-03-17T18:58:25.287
> 
> 标签：javascript, background, transparency, mousemove

我想让一个透明背景的 div 平滑地改变颜色，问题是我需要在 div 上有一些不透明的内容。

我发现这是为了改变颜色

```
<head>
<script 
   src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js">
</script>
<script type="text/javascript">
$(document).ready(function() {
setInterval ( "spectrum()", 1000 );
   }); 

function spectrum(){
var hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + 
   (Math.floor(Math.random() * 256)) + ',' + 
   (Math.floor(Math.random() * 256)) + ')';
$('body').css( { backgroundColor: hue });

}

</script>
</head>
</body>
</html> 
```

但我不知道如何在其中添加透明度。

我想要的另一件事是通过移动光标来更改颜色。我认为应该可以将它与 jQuery`.mousemove()`函数结合起来。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:00:47.127

使用 CSS 进行过渡：

```
body{
  -webkit-transition: background-color 1s linear;
} 
```

实时代码：http: [//jsbin.com/oqesub/1/edit](http://jsbin.com/oqesub/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:00:58.560

更改`rgb`为`rgba`。

```
rgba(red,green,blue,opacity) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:01:09.807

半透明颜色的格式是`rgba( R, G, B, A)`, 其中`R`, `G`,`B`是您已经拥有的，并且`A`是介于 0（完全透明）和 1（完全不透明）之间的数字。由您决定您需要的确切数字是多少。

# javascript - 隐藏 div cookie javascript 问题

> ID：15464875
> 
> 赞同：0
> 
> 时间：2013-03-17T18:58:36.300
> 
> 标签：javascript, cookies

我有一个问题正在杀死我，我尝试将 div 隐藏 24 小时（跨越窗口的 div），但我犯了一些错误，但没有奏效。请有人检查我的测试链接[http://testare.besaba.com](http://testare.besaba.com)，我使用下面的代码，错误可能在我的 css [http://testare.besaba.com/fx.base/site/css/commontest.css](http://testare.besaba.com/fx.base/site/css/commontest.css)中在文件 #span {display: none;} 的末尾添加了这一行。我看到代码在这里 jsfiddle.net/Nd4xb/ 工作正常，只是在我的网站上它不起作用。

谢谢

html代码：

```
<div id="span" class="promo_header">

  <a href="javascript:void(0)" class="close_promo_header" id="close" onclick="hidePromoPanel('/');"><font color="white">Close </font><span>X</span></a>

<button>Clear cookie</button></div> 
```

JavaScript 代码：

```
<script>
$(document).ready(function () {

if (!readCookie('hide')) {
    $('#span').show();
}
/*else {
    $('#span').hide();
}*/

$('#close').click(function () {
    $('#span').slideUp("slow");
    createCookie('hide', true, 1)
    return false;
 });

 $('button').click(function() {
    eraseCookie('hide');
 })

 });

 function hidePromoPanel() {}

 function createCookie(name, value, days) {
 if (days) {
    var date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    var expires = "; expires=" + date.toGMTString();
 } else var expires = "";
 document.cookie = name + "=" + value + expires + "; path=/";
 }

 function readCookie(name) {
 var nameEQ = name + "=";
 var ca = document.cookie.split(';');
 for (var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
 }
 return null;
 }

 function eraseCookie(name) {
 createCookie(name, "", -1);
 } </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:08:53.803

尝试这样的事情。只是在 jsFiddle 中构建它，但由于它很有趣而无法保存它:(

```
<div id="promo" style="display:none">
    Some message here 
    <button>Ok</button>
</div>

<script>
function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    if (exdays) exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays) ? '; expires=' + exdate.toUTCString() : '');
    document.cookie = c_name + "=" + c_value;
}

function getCookie(name) {
    var re = new RegExp(name + "=([^;,]+)");
    var value = re.exec(document.cookie);
    return (value !== null) ? unescape(value[1]) : null;
}

if (!getCookie('promo')) {
    document.getElementById('promo').style.display = 'block';
}

document.getElementById('promo').getElementsByTagName('button')[0].onclick = function () {
    document.getElementById('promo').style.display = 'none';
    setCookie('promo', '1', 1);
};
</script> 
```

# php - Composer 的自动加载程序找不到应用程序类。为什么？

> ID：15464880
> 
> 赞同：2
> 
> 时间：2013-03-17T18:58:59.797
> 
> 标签：php, autoload, composer-php

我有以下文件结构：

```
src/Models/Entity.php 
vendor/*
index.php
composer.* 
```

Entity.php 包含

```
<?php
namespace Vendor\App\Models;

class Entity {} 
```

index.php 包含

```
<?php
namespace Vendor\App;

require 'vendor/autoload.php';

use Vendor\App\Models\Entity;

$entity = new Entity(); 
```

composer.json 包含：

```
{
    "autoload": {
        "psr-0": {"Vendor\\App\\": "src/"}
    }
} 
```

供应商/作曲家/autoload_namespaces.php 包含

```
<?php

// autoload_namespaces.php generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'Vendor\\App\\' => $baseDir . '/src/',
); 
```

我明白了`127.0.0.1:37409 [500]: / - Class 'Vendor\App\Models\Entity' not found in ...`。

错误在哪里？composer.json 中复杂的命名空间和/或源目录的格式是什么？

**更新**：我找到了解决方法（将 src/Models 移动到 src/Vendor/App/Models），但这是正常行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T21:07:06.117

Composer/PSR-0 自动加载约定相当混乱。每次创建新的 Packagist 项目时，我都必须查找它。

当您创建 composer.json 文件并设置自动加载信息时，如下所示：

```
{
    "autoload": {
        "psr-0": { "Vendor\\App\\": "src/" }
    }
} 
```

您要说的是“可以在`project_root/src`.内的另一个嵌套文件夹。

这就是为什么你需要把你的类放在`project_root/src/Vendor/App`这个自动加载方案中才能找到。

**旁注：**如果您碰巧在类名中使用了任何下划线，这也可能导致其工作方式出现问题，因为下划线还暗示嵌套文件夹（即`App\Models\Type\Entity`，指向 的`src/App/Models/Type/Entity.php`，被视为与 相同`App/Models/Type_Entity.php`）。所以要小心下划线！

# java - 从 eclipe 获取可执行的 Java 程序

> ID：15464881
> 
> 赞同：-1
> 
> 时间：2013-03-17T18:59:00.750
> 
> 标签：java, eclipse, ubuntu

我的目的是测试一个小程序，比如

```
public class World
{
    public static void main(String[] args)
    {
        System.out.println("Foobar World");
    }
} 
```

在终端上执行。我在 stackoverflow 中使用了解释清楚的文档 -**如何在 Eclipse 中构建 Java 项目？**. 但是在执行 World.jar 时......

```
$ java World
    Exception in thread "main" java.lang.NoClassDefFoundError: World
    Caused by: java.lang.ClassNotFoundException: World
            at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    Could not find the main class: World. Program will exit. 
```

类路径是否导致此错误？我以为eclipse为我安排了这一切......执行应该没问题

```
-rw-rw-r-- 1 Foo Foo 1254 Mar 17 19:40 World.jar 
```

我错过了什么，一旦它工作，我可以将文件复制到具有相同操作系统的另一台 PC 而不设置任何类路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:01:21.340

您需要将`.jar`文件作为`java -jar World.jar`. 此外，您的`.jar`文件中需要一个文件，其中`META-INF/MANIFEST.MF`包含一个`Main-Class:`标头，告诉 Java`.jar`要执行其中的哪个类。

Eclipse*可以*适当地打包您的代码并生成此标头，但默认情况下它不会这样做。你需要在它的 JAR 设置中四处寻找，在`File > Export > Java > Jar`. （根据[这个](http://wiki.eclipse.org/FAQ_How_do_I_create_an_executable_JAR_file_for_a_stand-alone_SWT_program?)可能已经过时的常见问题解答。）还有一种方法可以告诉 Eclipse 在构建时自动生成这样的 JAR。

还要记住，这在使用第三方库时是不够的。不知道 Eclipse 是否对此有任何帮助。您要么必须设置清单条目，要么使用[Maven 的 shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/index.html)或像[Jar Jar Links](https://code.google.com/p/jarjar/)`Class-Path:`这样的独立工具可能更方便。

# ms-word - 借助脚本进行 MSword 对齐

> ID：15464883
> 
> 赞同：2
> 
> 时间：2013-03-17T18:59:08.810
> 
> 标签：ms-word

场景是给我一个word文档，我需要做一些对齐，比如如果它以Caps开头，如果不是单个空格，则在句号后给出双空格。类似的东西可以用脚本完成而不是做大量的手工工作吗？如果是，请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:33:52.303

可以使用 Apache POI。它是用于 MS 文档的 java API。还有 Apache POI - HWPF - 它是处理 MSWord 文件的 java API

# java - Jackson JSON：动态改变视图

> ID：15464886
> 
> 赞同：0
> 
> 时间：2013-03-17T18:59:28.217
> 
> 标签：java, json, jackson, javassist

美好时光！

假设有这样一个类：

```
public class Individual {

   @JsonProperty("passport")
   private Passport passport;

   // getters ans setters
} 
```

有两个用例。首先，当收入/传出 json 必须是短格式时：

```
{
   individual:{
       passport:'123456789'  <-- this is the indentifier
   }
} 
```

第二 - 扩展格式：

```
{
   individual:{
       passport:{
             series:'1234',
             number:'1234'
      }
   }
} 
```

为了处理这种情况，可以创建 2 个类，例如 **IndividualSh**和**IndividualExt**并使用注释`@JsonSerializer`并`@JsonDeserializer`自定义输入/输出。我想尝试其他方法来保留唯一的一个**Individual**类，因为它有很多字段，其中一半需要自定义。第一个想法是编写几个序列化器/反序列化器和一个工厂，这将使用 javassist 库使用所需的序列化器/反序列化器注释标记问题字段，但它似乎是一种开销。

*jlabedo* [here](https://stackoverflow.com/questions/12676249/how-do-i-serialize-an-associated-object-differently-using-jackson-and-annotation)有一个很好的例子，但我不知道如何在我的情况下使用它。

请建议，如何正确地做。提前致谢。

# c - 是否可以用 C 编写零成本的异常处理？

> ID：15464891
> 
> 赞同：13
> 
> 时间：2013-03-17T18:59:55.457
> 
> 标签：c, exception, optimization, elf

g++编译器具有零成本异常处理的特点。据我了解，`try`什么都不做，但是当抛出异常时，会执行异常处理程序的子例程。像这样：

```
void foo() {
    try {
        bar(); // throws.
    } catch (Type exc) {
        baz();
    }
} 
```

在伪代码（c-stylish）中看起来像这样：

```
void foo() {
    bar();
    return;
catch1_Type:
    baz();
} 
```

bar() 抛出。异常例程执行以下操作：

啊，返回地址在函数 foo() 中！并且返回地址在第一个 try-catch 块中，我们抛出类型 Type，所以异常处理程序的地址是 foo+catch1_Type。所以清理堆栈，这样我们就到了那里！

现在我的问题是：有没有办法在 C 中实现它？（可以是 C99 或更新版本，虽然我对 gcc 支持的 C 方言感兴趣）。我知道我可以使用例如 libunwind 进行堆栈检查和遍历，尽管我不知道如何获取`catch1_Type`标签的地址。这可能是不可能的。

异常处理程序可能是一个不同的函数，这同样可以，但是如何`foo`在另一个函数中获取堆栈帧的局部变量的地址？这似乎也是不可能的。

那么……有什么办法吗？我不想用这个进入汇编程序，但如果其他一切都失败了也是可以接受的（尽管局部变量 - 伙计，如果使用不同的优化级别，你永远不知道它们在哪里）。

并且要明确 - 这个问题的目的是**避免**setjmp/longjmp 方法。

**编辑：我发现了一个很酷的想法，但并不完全有效：**

gcc 中的嵌套函数。他们能做什么？

*   可以访问局部变量，
*   有可能在父函数中转到本地标签！
*   可以被我们函数的被调用者调用，前提是我们传递一个指向嵌套函数的指针，因此它可以通过被调用者中的指针获得。

不利的一面是阻止我做任何零成本的事情：

*   如果它们未使用，它们即使在 -O0 级别也会被优化。我能对此做些什么吗？如果可以的话，我可以在抛出异常时通过符号名称获取地址，它只会完成实现异常的工作，而这些异常在不抛出时不会花费任何成本......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:57:20.890

我已经找到了一些时间来玩这个想法，而且我非常接近为我自己的问题找到解决方案。以下是详细信息：

*   gcc 允许嵌套函数，它可以访问父函数的局部变量，并且可以转到父函数中的标签！
*   如果仅定义但未引用，gcc 将不会发出内部函数的代码。您可以定义内联无操作函数，该函数获取指向本地函数的指针，并在父函数中调用它。这将强制为内部函数生成代码，并且成本为零（在更高的优化级别，内联无操作调用将被删除）。不过，在最近的 gcc 中优化内联调用可能会阻止生成内部函数的代码。
*   不好的是，我看不到强制嵌套（内部）函数成为全局符号的方法。它们始终是本地的，因此不可能使用 dlsym 获取地址。
*   另一个坏消息，如果程序使用这样的嵌套函数，valgrind 会崩溃；）我能够验证我的简单测试程序，但我无法使用 valgrind 来验证没有内存违规。

我用于检查的代码有明显的缺陷：它不是“零成本”，因为必须在函数执行期间设置指向异常处理例程的全局指针。要是我们能做这个编译时间就好了！

好吧，毕竟如果想要正确使用内部函数，比如将指向它的指针传递给被调用者，这样他们就可以在抛出异常的情况下调用它，我们可能会有非常快速的异常处理，比 setjmp/ 快得多长...

我会继续破解，也许我会找到一种方法（一些汇编程序代码强制 GAS 将函数注册为父级的个性例程？）。

```
#include <stdio.h>
#include <dlfcn.h>
#include <stdlib.h>

typedef void (*catch_routine)(void*);

catch_routine g_r = NULL;

void tostr_internal(char* str, int a)
{
    int result = a + 'a';
    if (result < 'a' || result > 'z')
    {
        // handle exception
        if(g_r)
        {
            g_r(&a);
        }
        else
        {
            fprintf(stderr, "Exception not caught!");
            abort();
        }
    }
    else
    {
        str[0] = result;
        str[1] = '\0';
    }
}

char* tostring(int a)
{
    __label__ exhandler;
    char* string = (char*)malloc(2*sizeof(char));

    void personality(void* exid) {
        fprintf(stderr, "Number %d is not a character!\n", *(int*)(exid));
        free(string);
        goto exhandler;
    }
    g_r = personality;

    tostr_internal(string, a);
    return string;

exhandler:
    return NULL;
}

int main(int a, char** b)
{
    int i = 0;

    for(i = 0; i < 10000; i++)
    {
        int trythisbastard = i % 95;
        char* result = tostring(trythisbastard);
        if (result)
        {
            fprintf(stderr, "Number %d is %s\n", trythisbastard, result);
            free(result);
        }
    }

    return 0;
} 
```

# javascript - 获取 CPU/GPU/内存信息

> ID：15464896
> 
> 赞同：43
> 
> 时间：2013-03-17T19:00:24.020
> 
> 标签：javascript, memory, webgl, cpu, gpu

我需要获取有关 CPU/GPU/内存的任何信息。核心数、内存值、内存和 cpu 使用情况......我找到了一种为 IE 执行此操作的方法：[如何使用 JavaScript 查找硬件信息](http://www.devarticles.com/c/a/JavaScript/How-to-Use-JavaScript-for-Hardware-Knowledge/)

我不知道其他浏览器的解决方案。知道怎么做吗？也许 webgl 可以访问有关您计算机的信息？或闪光？或任何其他技术？

非常感谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-08-15T07:20:51.547

此代码将打印 GPU 信息，并将列出您可以使用此浏览器的性能对象获得的所有信息（BOM 没有标准，因此每个浏览器都会更改）。

```
<html>

<body>
  <canvas id="glcanvas" width="0" height="0"></canvas>
  <script>
    var performance = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance || {};

    document.write("<br>");
    for (var value in performance) {
      document.write(value + "<br>");
    }

    document.write("<br><br><br>");

    var canvas;
    canvas = document.getElementById("glcanvas");
    var gl = canvas.getContext("experimental-webgl");

    document.write(gl.getParameter(gl.RENDERER) + "<br>");
    document.write(gl.getParameter(gl.VENDOR) + "<br>");
    document.write(getUnmaskedInfo(gl).vendor + "<br>");
    document.write(getUnmaskedInfo(gl).renderer + "<br>");

    function getUnmaskedInfo(gl) {
      var unMaskedInfo = {
        renderer: '',
        vendor: ''
      };

      var dbgRenderInfo = gl.getExtension("WEBGL_debug_renderer_info");
      if (dbgRenderInfo != null) {
        unMaskedInfo.renderer = gl.getParameter(dbgRenderInfo.UNMASKED_RENDERER_WEBGL);
        unMaskedInfo.vendor = gl.getParameter(dbgRenderInfo.UNMASKED_VENDOR_WEBGL);
      }

      return unMaskedInfo;
    }
  </script>
</body>
```

在 Chrome 中输出：

```
onresourcetimingbufferfull
onwebkitresourcetimingbufferfull
timing
navigation
memory
now
getEntries
getEntriesByType
getEntriesByName
clearResourceTimings
setResourceTimingBufferSize
webkitClearResourceTimings
webkitSetResourceTimingBufferSize
mark
clearMarks
measure
clearMeasures
addEventListener
removeEventListener
dispatchEvent

WebKit WebGL
WebKit
NVIDIA Corporation
NVIDIA GeForce GTX 775M OpenGL Engine 
```

Firfox 中的输出：

```
now
getEntries
getEntriesByType
getEntriesByName
clearResourceTimings
setResourceTimingBufferSize
mark
clearMarks
measure
clearMeasures
toJSON
timing
navigation
onresourcetimingbufferfull

Mozilla
Mozilla 
```

Safari 中的输出：

```
navigation
timing
now

WebKit WebGL
WebKit
NVIDIA Corporation
NVIDIA GeForce GTX 775M OpenGL Engine 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-15T12:41:03.720

目前 Chrome Canary 支持使用以下方法返回 CPU 内核数量：

```
navigator.hardwareConcurrency 
```

这[在](http://basvdijk.com/get-the-number-of-cpu-cores-in-javascript/)Chrome Canary 37 中对我有用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-09T17:50:17.037

我写了这个快速脚本来获得 CPU 速度：

```
var _speedconstant = 8.9997e-9; //if speed=(c*a)/t, then constant=(s*t)/a and time=(a*c)/s
var d = new Date();
var amount = 150000000;
var estprocessor = 1.7; //average processor speed, in GHZ
console.log("JSBenchmark by Aaron Becker, running loop "+amount+" times.     Estimated time (for "+estprocessor+"ghz processor) is "+(Math.round(((_speedconstant*amount)/estprocessor)*100)/100)+"s");
for (var i = amount; i>0; i--) {} 
var newd = new Date();
var accnewd = Number(String(newd.getSeconds())+"."+String(newd.getMilliseconds()));
var accd = Number(String(d.getSeconds())+"."+String(d.getMilliseconds())); 
var di = accnewd-accd;
//console.log(accnewd,accd,di);
if (d.getMinutes() != newd.getMinutes()) {
di = (60*(newd.getMinutes()-d.getMinutes()))+di}
spd = ((_speedconstant*amount)/di);
console.log("Time: "+Math.round(di*1000)/1000+"s, estimated speed: "+Math.round(spd*1000)/1000+"GHZ"); 
```

请注意，这取决于浏览器选项卡、内存使用等，但我发现如果你只运行一次它就非常准确，比如在加载页面时。

对于桌面设备，尤其是 PC，这可能不准确，但我仅在第一个解决方案等其他解决方案失败时在我的网站中使用它，以便仅使用客户端获得移动设备的平均速度（允许我估计使用的核心） JS。它可能不是最好的，但它做得很好。

如果你想改变 _speedconstant 来改变速度，只需用公式 (knowncpuspeed*knowntimetocomplete)/knowncycles 计算它。希望你觉得这个有用！

* * *

2017 年 10 月 19 日更新：为新的 chrome V8 JS 引擎更改了 _speedconstant，并添加了关于我使用它的部分。

# java - Java中的日期计算

> ID：15464901
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:00:43.007
> 
> 标签：java, date

我有一个人的出生日期。还有一个日期，比如 d1。我想知道这个人是否在 d1 日期的最后一年内达到 40 岁。日期为“yyyyMMdd”格式

我想到了一些与找出时间和做一些减法有关的事情，然后检查它是否是 40 等等。

进行此计算的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:40:26.170

有很多方法可以实现这一点，从使用毫秒和简单的减法和转换到年到使用[Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)对象。

您可能还想看看[joda-time](http://joda-time.sourceforge.net/)（一个方便的 3rd 方 java api 来处理日期）和

这是一种使用[日历的方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

```
@Test
public void compareDates() throws ParseException {
    Date d1 = new SimpleDateFormat("yyyyMMdd").parse("20130317");
    Date birthDate1 = new SimpleDateFormat("yyyyMMdd").parse("19700101");
    Date birthDate2 = new SimpleDateFormat("yyyyMMdd").parse("19900101");

    GregorianCalendar cd1 = new GregorianCalendar();
    cd1.setTime(d1);
    cd1.set(Calendar.YEAR, cd1.get(Calendar.YEAR)-1); // one year ago

    GregorianCalendar cbd1 = new GregorianCalendar();
    cbd1.setTime(birthDate1);

    GregorianCalendar cbd2 = new GregorianCalendar();
    cbd2.setTime(birthDate2);

    Assert.assertTrue((cd1.get(Calendar.YEAR) - cbd1.get(Calendar.YEAR)) > 40);
    Assert.assertFalse((cd1.get(Calendar.YEAR) - cbd2.get(Calendar.YEAR)) > 40);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:12:07.733

**`getTime()`将以毫秒为单位返回时间。**

```
long diff = d2.getTime() - d1.getTime(); // the difference in milliseconds 
```

我将把这些毫秒转换为年作为一种练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:06:32.960

```
public class DateTester{

    private static final long MILLISECONDS_IN_YEAR = 31556926279L;

    public static void main(String[] args) {
            //Note:  These constructors are deprecated
            //I'm just using them for a quick test

    Date startDate = new Date(2013,03,01);
    Date birthday = new Date(1981,01,1981);//Returns false
    Date birthday2 = new Date(1972,03,20); //Returns true
    Date birthday3 = new Date(1973,02,27); //Test edge cases  //Returns false
    Date birthday4 = new Date(1972,02,27); //Test edge cases, //Returns false

    System.out.println(withinYear(birthday, startDate,40));
    System.out.println(withinYear(birthday2, startDate,40));
    System.out.println(withinYear(birthday3, startDate,40));
    System.out.println(withinYear(birthday4, startDate,40));

        System.out.println(withinYear(birthday, startDate,40));
        System.out.println(withinYear(birthday2, startDate,40));
    }

    public static boolean withinYear(Date birthday, Date startDate, int years){
        if(birthday.before(startDate)){
            long difference = Math.abs(birthday.getTime() - startDate.getTime());
            int yearDifference = (int) (difference/MILLISECONDS_IN_YEAR);
            return yearDifference  < (years +1) && yearDifference >= years;
        }
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-03T09:54:03.120

# php - 将链接与文本分开

> ID：15464906
> 
> 赞同：0
> 
> 时间：2013-03-17T19:00:48.747
> 
> 标签：php, regex, preg-match, preg-match-all

在阅读 rss 提要时，我尝试将图像和视频的链接与文本分开。这是一个RSS提要`http://stopgame.ru/rss/rss_news.xml`

有一些带有 youtube 链接描述的文本，例如它以
`<br><br>http://www.youtube.com/...`

或一些以图像结尾

```
<br><a href="link"></a><br>
<br><a href="link"></a><br> 
```

有些有视频和图片

```
<br><br>http://www.youtube.com/...<br>
<br><a href="link"></a><br>
<br><a href="link"></a><br> 
```

我需要将所有指向数组的图像链接和指向数组`$images`的视频链接分开`$video`。现在 PHP 是这样的代码：

```
 if (preg_match_all("/\<br\>\<a href=\"http:\/\/images.stopgame.ru\/(.*)\"\>\<\/a\>\<br\>/", $item->description, $images)) {
        $item->description = preg_replace("/\<br\>\<a href=\"http:\/\/images.stopgame.ru\/(.*)\"\>\<\/a\>\<br\>/", "", $item->description);
    } else {
        $images = null;
    }

    if (preg_match_all("/http:\/\/www.youtube.com\/(.*)\<\/p\>/", $item->description, $video)) {
        $item->description = preg_replace("/\<br\>\<br\>http:\/\/www.youtube.com\/(.*)\<\/p\>/", "", $item->description);
    } else {
        $video = null;
    } 
```

但它显示的结果不是很好：
**var_dump($video) 返回如下内容：**

```
array(2) { [0]=> array(1) { [0]=> string(46) "http://www.youtube.com/watch?v=ZJc2W8SBE5U

" } [1]=> array(1) { [0]=> string(19) "watch?v=ZJc2W8SBE5U" } } 
```

**var_dump($images) 返回如下内容：**

```
array(2) { [0]=> array(1) { [0]=> string(237) "

" } [1]=> array(1) { [0]=> string(188) "news/2013/03/15/1363362690.jpg"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:24:26.543

使用 simplexml：
不幸的是，您没有以让我理解其结构的方式发布 xml 文件，所以我不知道如何判断链接是指图像还是视频。
除非您发布一些启发性的 XML 片段，否则我将提供一个通用解决方案来从 -nodes 中提取所有 href-Attributes：

```
$xml = simplexml_load_file('yourfile.xml');

$urls = $xml->xpath("//a/@href");

foreach ($urls as $url) {

    echo $url;
} 
```

# ios - NSString 中的 Unicode 字符

> ID：15464910
> 
> 赞同：3
> 
> 时间：2013-03-17T19:01:02.260
> 
> 标签：ios, objective-c, unicode

这是我的代码和日志，它会比长篇大论更有效率:)

```
NSString* cat = [categories objectAtIndex:i];
NSLog(@"category : :%@:", cat);
NSString* decodedString = [NSString stringWithUTF8String:[cat cStringUsingEncoding:[NSString defaultCStringEncoding]]];
NSLog(@"category decoede : %@", decodedString); 
```

日志 : 类别 : : Boissons fra?ches:

之后，我得到了这个异常：`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** +[NSString stringWithUTF8String:]: NULL cString'`

我只想在“Boissons fraîches”中转换像“Boissons fra?ches”这样的字符串。我能怎么做 ？

**编辑**

我只想获取 CSV 文件的内容。我的完整代码是：

```
// Getting content of CSV file
NSError* error;
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"categories" ofType:@"csv"];
NSString* data = [NSString stringWithContentsOfFile:filePath encoding:NSASCIIStringEncoding error:&error];
NSArray* categories = [data componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

for (int i = 0; i < categories.count; ++i) {
    NSString* cat = [categories objectAtIndex:i];
    NSLog(@"categorie : :%@:", [categories objectAtIndex:i]);
    NSString* decodedString = [NSString stringWithUTF8String:[cat cStringUsingEncoding:[NSString defaultCStringEncoding]]];
    NSLog(@"categorie : %@", decodedString);
    [self.categories addObject:decodedString];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:04:20.870

C 字符串转换失败，因为原始字符串中有一个字符无法以默认 C 字符串编码（即 MacRoman，一种类似于 ISO Latin-1 的较旧的 8 位编码）表示。

我不完全确定您要做什么，但`[NSString defaultCStringEncoding]`几乎从来都不是您要使用的编码。如果您能详细说明，我也许可以提供另一种解决问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:29:02.000

Instead of using `NSASCIIStringEncoding` in `[NSString stringWithContentsOfFile:filePath encoding:NSASCIIStringEncoding error:&error]`, you need to find out the encoding of the text file and use the appropriate enum value.

# c++ - 可变模板错误

> ID：15464918
> 
> 赞同：1
> 
> 时间：2013-03-17T19:01:40.727
> 
> 标签：c++, c++11, variadic-templates

这是我第一次真正使用可变参数模板。下面的代码没有太多用处，它只是用于学习目的，但它与`std::async`（这是我打算实现的）有相似之处。

```
std::queue<std::function<void()>> functions;

template<typename Function, typename... Args>
void DeferCall(Function&& f, Args&& args...)
{
    functions.push([=]{ f(args...); });
}

void func(int x, int y)
{
    std::cout << x << ' ' << y << '\n';
}

int main()
{
    DeferCall(func, 1, 2);
    DeferCall([]{ func(6, 7); });

    while(!functions.empty())
    {
        functions.front()();
        functions.pop();
    }
} 
```

我正在`'Args' : parameter pack must be expanded in this context`签名`DeferCall`。

除了想知道如何使上述工作总体上正常工作之外，我还有一个关于如何改进的问题：`f`并且`args`旨在按值存储在 lambda 中，但是由于它们被纳入`DeferCall`，因此理论上可以被`std::forward`编辑，这可能会结束被复制或可能最终被移动。我认为没有任何方法可以用 lambda 做到这一点吗？我认为我被迫复制。如果我想这样做（并且我确实这样做了），我需要制作自己的仿函数来允许它正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:03:05.153

在函数或方法的参数列表中，参数包必须继续对象的类型，并且出现*在对象名称之前*。所以将相关代码改成如下：

```
void DeferCall(Function&& f, Args&&... args) 
```

# php - 从 MySQL 中的多个表中选择并显示

> ID：15464921
> 
> 赞同：0
> 
> 时间：2013-03-17T19:01:59.713
> 
> 标签：php, mysql, ajax, codeigniter

我的主页是 www.respectmyplanet.org，我正在 Codeigniter 上写作。免责声明：我是一名金融分析师，只是一名业余程序员，没有受过正规的编程教育。

要查看下面我所写内容的示例：如果您在我的主页上单击我的地图上的任何标记，您会从 AJAX 调用中获得一个信息窗口，该调用从我的地理模型运行此方法：

```
public function get_well_infowindow ($permit) {
    $sql = sprintf("SELECT * FROM mi_oil_well_info WHERE Permit_No = '%s' LIMIT 1 ",
    mysql_real_escape_string($permit));
    $query = $this->db->query($sql);
    return $query->result();
} 
```

如果您查看信息窗口，您将看到操作员的四位数字和地质构造的四位代码。所有数据都来自 MDEQ 提供的密歇根州数据库，我只是将其推入 MySQL。

我想让我的信息窗口在“大表”中显示“Encana Gas Company”而不是“6450”，并且我希望它为 Collingwood 页岩地层显示“Collingwood”而不是“大表”中的 CLGD。我从密歇根州添加了另外两个表格，按代码列出了所有公司和按代码列出的所有结构，但我不知道如何从多个表格中提取我需要的数据并让我的信息窗口使用更易于阅读的信息。

其他表非常简单：

```
column1 - OpNo     column2 - OpName
6450               Encana Gas Company

column1-ObjForm    column2 - FormName
CLGD               Collingwood Shale 
```

目前，我`$marker_info[0]->OpNo`从`$marker_info[0]->ObjForm`对“大表”的一次调用中回显，我想回显`$marker_info[0]->OpName`，`$marker_info[0]->FormName`但它们来自其他表，我不知道如何从多个表中检索或回显出去。

任何人都可以帮助我：从我的“大表”中选择所有内容，就像我现在所做的那样工作得很好，但是将公司代码换成公司名称，将地质地层代码换成地质地层的详细描述以及如何将其回显出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:28:07.470

通过连接 SQL 中的表来做到这一点。我没有在您的问题中看到其他两个表的名称，所以我将第一个称为 other_table_1。

替换这个：

```
SELECT * FROM mi_oil_well_info WHERE Permit_No = '%s' LIMIT 1 
```

有了这个：

```
SELECT mi_oil_well_info.*, other_table_1.OpName
FROM mi_oil_well_info
LEFT JOIN other_table_1 ON mi_oil_well_info.OpNo=other_table_1.OpNo
WHERE Permit_No = '%s' LIMIT 1 
```

您也可以通过运行另一个 select 语句来查找给定 Permit_No 的名称来执行此操作，但不要这样做。如果您加入表并让数据库查找其他字段，它将运行得更快更有效。

有关 MySQL SELECT 语句的更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# breeze - BreezeJS 在失败保存时打破了 Q 的承诺

> ID：15464925
> 
> 赞同：0
> 
> 时间：2013-03-17T19:02:56.013
> 
> 标签：breeze, q

当查询执行失败（例如保存时违反数据库约束）我可以在控制台中看到。

> 应该为空：[]

这是示例（您可以在控制台中看到*应该为空：[]*））：

```
 breeze.EntityQuery
     .from("EntityThatDoesnotExist")
     .using(new breeze.EntityManager("http://todo.breezejs.com/api/todos"))
     .execute()
     .then(function () { })
     .fail(function () { }); 
```

[http://jsfiddle.net/vMhkg/3/](http://jsfiddle.net/vMhkg/3/)

我是 Breeze 和 Q 的新手，所以我的问题是：我应该忽略这个吗？还是我做错了什么？或者它可能只是一个需要报告的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:46:48.533

其实我不认为这是一个错误。

这实际上是 Q（微风使用的承诺库）的“设计”行为，在承诺链没有被 done() 或 end() 调用终止的情况下。

从这个链接：[https ://groups.google.com/forum/#!topic/q-continuum/TfV8TIYaCpc](https://groups.google.com/forum/#!topic/q-continuum/TfV8TIYaCpc)

> 该消息应该只在第一次构造被拒绝的承诺时写入浏览器中的控制台。这是一种防止未处理的拒绝被忽视的机制，如果程序员忘记使用 .done()、.end() 或 .nodeify() 终止一系列承诺，就会发生这种情况。不幸的是，一旦将消息写入控制台，就无法将其删除。但是，浏览器控制台提供了数组内容的实时视图。当拒绝得到处理时，Q 从数组中删除“原因”。因此，如果您在控制台上看到应该为空：[]，则没有任何问题。

此外，为了完整起见，如果您要实际处理失败案例，您将在 e.message 中收到有意义的错误消息，即

```
breeze.EntityQuery
     .from("EntityThatDoesnotExist")
     .using(new breeze.EntityManager("http://todo.breezejs.com/api/todos"))
     .execute()
     .then(function () { 
        // will not get here.
     }) .fail(function (e) { 
        // e.message will contain a message something like: 
        //   No HTTP resource was found that matches the request URI  
        //   http://localhost:7149/api/NorthwindIBModel/EntityThatDoesnotExist'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:13:29.967

这是一个完整的长镜头。我在过去 2 小时内遇到了同样的错误，非常困惑。我最终调试到了breath.debug.js，发现我试图保存的日期无效。一旦我更正了日期问题（将所有内容都转换为 UTC），应该为空：[] 消息就消失了。无论如何，我可以在第 3604 行看到在 Breeze 中的 validateTarget 方法中失败的实际验证，实际检查是在第 3615 行执行的。

不确定这是否会对您有所帮助，但由于我刚刚看到同样的错误，我认为分享我的经验会很痛苦。

仅供参考，这里是我调试的验证方法以获取更多信息。

```
 function validateTarget(target) {
        var ok = true;
        var stype = target.entityType || target.complexType;
        var aspect = target.entityAspect || target.complexAspect;
        var entityAspect = target.entityAspect || target.complexAspect.entityAspect;

        stype.getProperties().forEach(function (p) {
            var value = target.getProperty(p.name);
            var propName = aspect.propertyPath ? aspect.propertyPath + "." + p.name : p.name;
            if (p.validators.length > 0) {
                var context = { entity: entityAspect.entity, property: p, propertyName: propName };
                ok = entityAspect._validateProperty(value, context) && ok; //This is where I put my break point to see what was actually failing.
            }
            if (p.isComplexProperty) {
                ok = validateTarget(value) && ok;
            }
        }); 
```

# c++ - 清理 C++ 构造函数中的重复代码

> ID：15464926
> 
> 赞同：0
> 
> 时间：2013-03-17T19:03:00.040
> 
> 标签：c++, constructor

我在 C++ 中有一个头文件，它为用户提供了几个构造函数（这是一个要求）：

```
#ifndef IMANDEL_H_
#define IMANDEL_H_

class IMandel{

public:
    IMandel();
    IMandel(int aWidth, int aLength);
    IMandel(int threads, int aWidth, int aLength);
    //other stuff!
private:
    int max_iterations, thread_count, height, width;
    int* buffer; 
};

#endif 
```

因此，在我相应的 cpp 文件中，我分别实现了这些构造函数：

```
//default constructor
IMandel::IMandel(){
    height = 10000;
    width = 10000;

    //this code segements gets repeated in every constructor! Messy!
    max_iterations = 255;
    thread_count = 1;
    buffer = new int[width*height];
}

IMandel::IMandel(int aWidth, int aLength){
    width = aWidth;
    height = aLength;

     //this code segements gets repeated in every constructor! Messy!
    max_iterations = 255;
    thread_count = 1;
    buffer = new int[width*height];
}

IMandel::IMandel(int threads, int aWidth, int aLength){
    thread_count = threads;
    width = aWidth;
    height = aLength;

     //this code segements gets repeated in every constructor! Messy!
    max_iterations = 255;
    buffer = new int[width*height];
} 
```

如您所见，我的构造函数并不健康，它们到处都有重复的代码块，这太可怕了！

在 java 中，我通过使用构造函数相互调用找到了解决此问题的方法。基本上我重复使用如下构造函数（Java 示例）：

```
public myClass(){
    this(1, 10000, 10000);
}

public myClass(int aWidth, int aLength){
   this(1, aWidth, aLentgh);
}

public myClass(int threads, int aWidth, int aLength){
   thread_count = threads;
   width = aWidth;
   height = aLength;
   max_iterations = 255;
   buffer = new int[width*height];
} 
```

正如您在这个 Java 示例中看到的那样，各种构造函数之间没有重复的代码。问题：

1.  有没有办法在 C++ 中实现同样的效果？
2.  如果有怎么办？你能提供一个样品吗？
3.  如果不是，您推荐什么解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T19:12:33.153

实际的解决方案会有所不同，具体取决于您使用的 C++ 版本。

**在 C++03**中，一种常见*（但不完美 - 请参阅底部有用的注释）的*方法是创建一个`init()`所有构造函数都调用的函数。所有三个构造函数都可以是一行调用这样的函数：

```
void IMandel::init(int threads, int aWidth, int aLength){
    thread_count = threads;
    width = aWidth;
    height = aLength;

     //this code segements gets repeated in every constructor! Messy!
    max_iterations = 255;
    buffer = new int[width*height];
}

//default constructor
IMandel::IMandel(){
    init( 1, 10000, 10000 );
}

IMandel::IMandel(int aWidth, int aLength){
    init( 1, aWidth, aLength );
}

IMandel::IMandel(int threads, int aWidth, int aLength){
    init( threads, aWidth, aLength );
} 
```

**正如@chris 所评论的，在 C++11**中，允许构造函数调用其他构造函数。您可以通过以下方式更改构造函数：

```
//default constructor
IMandel::IMandel()
: IMandel( 1, 10000, 10000 )
{
}

IMandel::IMandel(int aWidth, int aLength)
: IMandel( 1, aWidth, aLength )
{
}

IMandel::IMandel(int threads, int aWidth, int aLength){
    thread_count = threads;
    width = aWidth;
    height = aLength;

     //this code segements gets repeated in every constructor! Messy!
    max_iterations = 255;
    buffer = new int[width*height];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T19:20:18.123

采用什么解决方案取决于具体情况。

这是您当前的类定义：

```
class IMandel
{
public:
    IMandel();
    IMandel(int aWidth, int aLength);
    IMandel(int threads, int aWidth, int aLength);
    //other stuff!
private:
    int max_iterations, thread_count, height, width;
    int* buffer; 
}; 
```

这是我将如何定义它：

```
class IMandel
{
public:
    IMandel( int aWidth = 10000, int aLength = 10000, int threads = 1 );
    //other stuff!
private:
    int max_iterations, thread_count, height, width;
    std::vector<int> buffer;
}; 
```

请注意，这仍然为您提供了最初拥有的*明显*构造函数，但参数顺序除外。

没有必要让事情变得比必要的更复杂，也就是说，**保持简单**。但是，其他 C++03 方法包括一个通用`init`函数（如果适用，则不在此处）和一个通用人工基类。其他 C++11 方法包括构造函数转发。

* * *

顺便说一句，请注意您的原始代码违反了“三原则”，即它需要禁止或明确支持复制，但未能做到这一点。上面提出的简化不存在这个问题。你能看出为什么吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T19:16:59.613

如果您的编译器支持 C++11 的委托构造函数，可以减少构造函数中的重复代码。不过，在您的情况下，您似乎只需要为构造函数参数提供默认值。

```
#ifndef IMANDEL_H_
#define IMANDEL_H_

class IMandel{

public:
    IMandel(int aWidth = 10000, int aLength = 10000, int threads = 1);
private:
    int max_iterations, thread_count, height, width;
    int* buffer; 
};

#endif

IMandel::IMandel(int aWidth, int aLength, int threads)
: max_iterations(255)
, thread_count(threads)
, height(aLength)
, width(aWidth)
, buffer(new int[width*height])
{
} 
```

上面的构造函数做了你展示的 3 所做的一切。另外，考虑使用`vector<int>`for`buffer`而不是自己管理内存。

# vb.net - Visual Basic - 如何将子程序中的值发送回主程序？

> ID：15464927
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:03:00.850
> 
> 标签：vb.net, subroutine

我在 Visual basic 中有一个作业，我不知道该怎么做。我将创建 2 个子例程和 1 个将值发送回主调用程序的函数。主程序填充组合框并在列表框中显示信息，仅此而已。

第一个 sub 从组合框中选择一个条目，即名称和 ID。子程序进行计算并将名称、ID 和计算值发送回调用程序。

我的问题是如何将这 3 个值发送回主调用程序？我假设没有byRef。如果这不是一个独特的问题，但我无法找到答案，我提前道歉。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:16:37.153

假设通过“我的作业”，您正在谈论学校，我会假设作业的重点是让您学习和理解将参数传递给子程序。在这种情况下，请阅读[ByVal](http://msdn.microsoft.com/en-us/library/h2b185t2.aspx)与[ByRef](http://msdn.microsoft.com/en-us/library/c84t73c2.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:51:15.643

您可以创建一个具有三个属性的类并将其传递。

# css - Div 与图像垂直对齐

> ID：15464930
> 
> 赞同：2
> 
> 时间：2013-03-17T19:03:06.433
> 
> 标签：css, html, alignment, center

我知道这已经被问过很多次了，但我仍然无法独自完成我想要的。我查看了各种网站以寻求帮助，例如[Here](https://stackoverflow.com/questions/5429056/vertical-alignment-of-image-inside-a-div)和[Here](http://www.w3.org/Style/Examples/007/center.en.html)以及使用具有垂直对齐、行高等的显示表。

这是我想要完成的（我知道我可能需要添加更多 div）。文本并不总是恒定的，所以我不能只设置填充并完成它，因为红色和蓝色的文本可能会改变长度。

![我的 div 的图像](../Images/a144eccd7f239eb5424a6480cf80eb27.png)

这是我目前拥有的一个简单的 jsFiddle：http: [//jsfiddle.net/gP2U8/9/](http://jsfiddle.net/gP2U8/9/)

```
<div class="container">
    <div class="left">
        <img src="http://www.gadgets-for-men.co.uk/wp-content/themes/revolution_tech-20/images/rss-icon-50.gif" />
        <span>This is text below the image</span>
    </div>
    <div class="right">
        <span>This is text to the right of the image, will usualy contain a lot of text. This is text to the right of the image, will usualy contain a lot of text. This is text to the right of the image, will usualy contain a lot of text. This is text to the right of the image, will usualy contain a lot of text.</span>
    </div>
</div>

.container{
    border: 1px solid black;
    width: 400px;
    height: auto;
    position: relative;
    display: inline-block;
}

.left{
    float:left;
    width: 25%;
}

.right{
     float: right;
    width: 75%;
}

.left, .right{
     margin-top: 25px;
    margin-bottom: 25px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:08:08.533

你离得太近了！只需将图像设置为`display: block`

[http://jsfiddle.net/d4DaV/1/](http://jsfiddle.net/d4DaV/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:21:07.927

您可以使用`display: table`and`display: table-cell`进行垂直对齐。

见[http://jsfiddle.net/d4DaV/3/](http://jsfiddle.net/d4DaV/3/)

不适用于 IE6 和 IE7 但从 IE8 向上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:29:53.107

不要使用浮动元素。相反，使用内联元素（您可以在其上使用样式），用and`vertical-align`粘合在一起，如**[这个演示小提琴](http://jsfiddle.net/NGLN/gP2U8/13/)**所示。`white-space: nowrap``font-size: 0`

标记（未更改）：

```
<div class="container">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

样式表：

```
.container{
    border: 1px solid black;
    width: 400px;
    padding: 25px 0;
    white-space: nowrap;
    font-size: 0;
}
.left, .right {
    display: inline-block;
    vertical-align: middle;
    white-space: normal;
    font-size: 12pt;
}
.left{
    width: 25%;
}
.right{
    width: 75%;
}
img {
    display: block;
} 
```

# java - 运行 yuicompressor 时出现 Java 错误

> ID：15464932
> 
> 赞同：0
> 
> 时间：2013-03-17T19:03:09.637
> 
> 标签：java, php, symfony, assetic

我在本地开发服务器上运行 YUI 压缩器 jar，但在 Web 服务器上我收到此错误：

```
Fatal error: Uncaught exception 'Assetic\Exception\FilterException' 
with message 'An error occurred while running: 
'/usr/bin/java' '-jar' 
'/path/to/includes/resources/java/yuicompressor-2.4.6.jar' 
'-o' '/tmp/YUI-OUT-FGs8hh' '--type' 'js' '/tmp/YUI-IN-54MHwK' 
Error Output: Exception in thread "main" java.lang.NullPointerException 
at java.lang.VMClassLoader.defineClass(libgcj.so.10) at 
java.lang.ClassLoader.defineClass(libgcj.so.10) at 
java.security.SecureClassLoader.defineClass(libgcj.so.10) at 
java.net.URLClassLoader.findClass(libgcj.so.10) at 
gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.10) at 
java.lang.ClassLoader.loadClass(libgcj.so.10) at 
java.lang.ClassLoader.loadClass(libgcj.so.10) at 
gnu.java.lang.MainThread.run(libgcj.so.10) 
Input: /*! * jQuery JavaScript Library v1.7.2 * 
http://jquery.com/ * * Copyright 2011, John Resig * 
Dual licensed under the MIT or GPL Version 2 licenses. * 
http://jquery.org/license * * Incl in 
/path/to/includes/modules/Assetic/Exception/FilterException.php 
on line 40 
```

我已经检查了服务器支持，他们说要联系开发人员。关于这可能是什么的任何线索？我也在 Github 上发布过，但没有运气。

这是Java版本：

```
# java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06)
Java HotSpot(TM) Server VM (build 20.12-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:12:04.220

请参阅此[类似线程](https://serverfault.com/questions/432391/unable-to-start-tomcat6-java-error-exception-in-thread-main)或[此讨论](http://smartsvn.1697.n6.nabble.com/java-errors-when-running-smartsvn-sh-td3707810.html)- 基本上，您应该联系您的服务器支持以将他们的 java 运行时环境更改为适当的东西，而不是 GCJ。使用常规的 JDK 可以解决这个问题。

如果他们坚持使用 GCJ，他们至少需要将其修复为可运行。

# javascript - jQuery覆盖包含选项，只允许兄弟元素未使用的空间

> ID：15464934
> 
> 赞同：1
> 
> 时间：2013-03-17T19:03:13.923
> 
> 标签：javascript, jquery, jquery-ui-resizable

我想要一个自定义小部件，它允许一个元素调整大小，其高度和宽度受其父元素的限制。可调整大小的小部件上的包含选项允许这样做，但我需要一个额外的标准。我只需要允许元素在兄弟元素未使用的空间中调整大小...如果您在元素 .xyz 上使用可调整大小的小部件，它将限制 .xyz 到父元素边界，但会将元素 .xyz 的兄弟元素推到父元素边界！我怎样才能实施这个额外的标准？

如果您不明白我要做什么，我可能会更好地解释它，请告诉我。

我以前做过一次，但我对如何实现它并不满意。我在另一个论坛上发帖，但从未得到任何帮助。

[http://www.webdeveloper.com/forum/showthread.php?274379-jQuery-UI-Resizable-Widget&p=1254637#post1254637](http://www.webdeveloper.com/forum/showthread.php?274379-jQuery-UI-Resizable-Widget&p=1254637#post1254637)

编辑：

我能够以比我发布到 webdevelper.com 的方式更好的方式做到这一点。我将自定义 $.ui.plugin.add 方法附加到“可调整大小”小部件。现在我可以将可调整大小的小部件传递给“兄弟姐妹：父母”的选项，这允许我上面提到的标准。如果您知道更好的方法来做到这一点，请告诉我。我认为必须有一种更直接的方法来减少代码复制。我复制了整个遏制方法并将其用作我的兄弟姐妹方法。

```
function num(v) {
     return parseInt(v, 10) || 0;
}

$.ui.plugin.add("resizable", "siblings", {

    start: function() {

        var element, p, co, ch, cw, width, height,
        that = $(this).data("ui-resizable"),
        o = that.options,
        el = that.element,
        oc = o.siblings,
        ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0)
 : oc;

    if (!ce) {
        return;
    }

    that.containerElement = $(ce);

    if (/document/.test(oc) || oc === document) {
        that.containerOffset = {
            left: 0, 
            top: 0
        };
        that.containerPosition = {
            left: 0, 
            top: 0
        };

        that.parentData = {
            element: $(document), 
            left: 0, 
            top: 0,
            width: $(document).width(), 
            height: $(document).height() || document.body.parentNode.scrollHeight
        };
    }

    // i'm a node, so compute top, left, right, bottom
    else {
        element = $(ce);
        p = [];
        //set the padding of the container element
        $([ "Top", "Right", "Left", "Bottom" ]).each(function(i, name) {
            p[i] = num(element.css("padding" + name));   
        });

        //collection of sibling elements
        var siblings = el.siblings();
        var sHeight = 0;

        siblings.each(function(){
            console.log($(this).height());
            var element = $("#" + this.id);
            var marginHeight = parseInt(element.css("margin-top")) +  
 parseInt(element.css("margin-bottom"));
            var borderHeight = parseInt(element.css("border-top-width")) + 
  parseInt(element.css("border-bottom-width")); 
            sHeight = sHeight + ($(this).height() + marginHeight + borderHeight);
        });

        that.containerOffset = element.offset();
        that.containerPosition = element.position();
        that.containerSize = {
            height: ((element.innerHeight() - p[3]) - sHeight), 
            width: (element.innerWidth() - p[1])
        };

        co = that.containerOffset;
        ch = that.containerSize.height;
        cw = that.containerSize.width;
        width = ($.ui.hasScroll(ce, "left") ? ce.scrollWidth : cw );
        height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);

        that.parentData = {
            element: ce, 
            left: co.left, 
            top: co.top, 
            width: width, 
            height: height
        };
    }
},

resize: function( event ) {

    console.log("resizing");

    var woset, hoset, isParent, isOffsetRelative,
    that = $(this).data("ui-resizable"),
    o = that.options,
    co = that.containerOffset, cp = that.position,
    pRatio = that._aspectRatio || event.shiftKey,
    cop = {
        top:0, 
        left:0
    }, ce = that.containerElement;

    if (ce[0] !== document && (/static/).test(ce.css("position"))) {
        cop = co;
    }

    if (cp.left < (that._helper ? co.left : 0)) {
        that.size.width = that.size.width + (that._helper ? (that.position.left - 
co.left) : (that.position.left - cop.left));
        if (pRatio) {
            that.size.height = that.size.width / that.aspectRatio;
        }
        that.position.left = o.helper ? co.left : 0;
    }

    if (cp.top < (that._helper ? co.top : 0)) {
        that.size.height = that.size.height + (that._helper ? (that.position.top - 
co.top) : that.position.top);
        if (pRatio) {
            that.size.width = that.size.height * that.aspectRatio;
        }
        that.position.top = that._helper ? co.top : 0;
    }

    that.offset.left = that.parentData.left+that.position.left;
    that.offset.top = that.parentData.top+that.position.top;

    woset = Math.abs( (that._helper ? that.offset.left - cop.left : (that.offset.left
     - cop.left)) + that.sizeDiff.width );
    hoset = Math.abs( (that._helper ? that.offset.top - cop.top : (that.offset.top - 
    co.top)) + that.sizeDiff.height );

    isParent = that.containerElement.get(0) === that.element.parent().get(0);
    isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));

    if(isParent && isOffsetRelative) {
        woset -= that.parentData.left;
    }

    if (woset + that.size.width >= that.parentData.width) {
        that.size.width = that.parentData.width - woset;
        if (pRatio) {
            that.size.height = that.size.width / that.aspectRatio;
        }
    }

    if (hoset + that.size.height >= that.parentData.height) {
        that.size.height = that.parentData.height - hoset;
        if (pRatio) {
            that.size.width = that.size.height * that.aspectRatio;
        }
    }
},

stop: function(){
    var that = $(this).data("ui-resizable"),
    o = that.options,
    co = that.containerOffset,
    cop = that.containerPosition,
    ce = that.containerElement,
    helper = $(that.helper),
    ho = helper.offset(),
    w = helper.outerWidth() - that.sizeDiff.width,
    h = helper.outerHeight() - that.sizeDiff.height;

    if (that._helper && !o.animate && (/relative/).test(ce.css("position"))) {
        $(this).css({
            left: ho.left - cop.left - co.left, 
            width: w, 
            height: h
        });
    }

        if (that._helper && !o.animate && (/static/).test(ce.css("position"))) {
            $(this).css({
                left: ho.left - cop.left - co.left, 
                width: w, 
                height: h
            });
        }

    }
});

$(function(){

        $( "#resizable1").resizable({
            siblings: "parent"
        });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:33:22.533

这是我的解决方案，我将兄弟功能包装在一个名为 staticblock 的新小部件中。我计划进一步扩展 staticblock 小部件，但它现在的方式将知道兄弟元素，因此在重新调整元素大小时不会将兄弟元素推到父元素之外。

```
 function num(v) {
        return parseInt(v, 10) || 0;
    }

    $.widget("pf.staticblock", {

        _create: function() {
            var ele = this.element;

            this._makeResizable(ele);
        },

        _makeResizable: function(ele) {
            ele.resizable({
                siblings: "parent"
            });
        }

    });

    $.ui.plugin.add("resizable", "siblings", {

        start: function() {
            console.log("started");

            var element, p, co, ch, cw, width, height,
            that = $(this).data("ui-resizable"),
            o = that.options,
            el = that.element,
            oc = o.siblings,
            ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0) : oc;

            if (!ce) {
                return;
            }

            that.containerElement = $(ce);

            if (/document/.test(oc) || oc === document) {
                that.containerOffset = {
                    left: 0, 
                    top: 0
                };
                that.containerPosition = {
                    left: 0, 
                    top: 0
                };

                that.parentData = {
                    element: $(document), 
                    left: 0, 
                    top: 0,
                    width: $(document).width(), 
                    height: $(document).height() || document.body.parentNode.scrollHeight
                };
            }

            // i'm a node, so compute top, left, right, bottom
            else {
                element = $(ce);
                p = [];
                //set the padding of the container element
                $([ "Top", "Right", "Left", "Bottom" ]).each(function(i, name) {
                    p[i] = num(element.css("padding" + name));   
                });

                //collection of sibling elements
                var siblings = el.siblings();
                var sHeight = 0;
                console.log(this.id);
                siblings.each(function(){
                    console.log($(this).height());
                    var element = $("#" + this.id);
                    var marginHeight = parseInt(element.css("margin-top")) + parseInt(element.css("margin-bottom"));
                    var borderHeight = parseInt(element.css("border-top-width")) + parseInt(element.css("border-bottom-width")); 
                    sHeight = sHeight + ($(this).height() + marginHeight + borderHeight);
                });

                that.containerOffset = element.offset();
                that.containerPosition = element.position();
                that.containerSize = {
                    height: ((element.innerHeight() - p[3]) - sHeight), 
                    width: (element.innerWidth() - p[1])
                };

                co = that.containerOffset;
                ch = that.containerSize.height;
                cw = that.containerSize.width;
                width = ($.ui.hasScroll(ce, "left") ? ce.scrollWidth : cw );
                height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);

                that.parentData = {
                    element: ce, 
                    left: co.left, 
                    top: co.top, 
                    width: width, 
                    height: height
                };
            }
        },

        resize: function( event ) {

            console.log("resizing");

            var woset, hoset, isParent, isOffsetRelative,
            that = $(this).data("ui-resizable"),
            o = that.options,
            co = that.containerOffset, cp = that.position,
            pRatio = that._aspectRatio || event.shiftKey,
            cop = {
                top:0, 
                left:0
            }, ce = that.containerElement;

            if (ce[0] !== document && (/static/).test(ce.css("position"))) {
                cop = co;
            }

            if (cp.left < (that._helper ? co.left : 0)) {
                that.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));
                if (pRatio) {
                    that.size.height = that.size.width / that.aspectRatio;
                }
                that.position.left = o.helper ? co.left : 0;
            }

            if (cp.top < (that._helper ? co.top : 0)) {
                that.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);
                if (pRatio) {
                    that.size.width = that.size.height * that.aspectRatio;
                }
                that.position.top = that._helper ? co.top : 0;
            }

            that.offset.left = that.parentData.left+that.position.left;
            that.offset.top = that.parentData.top+that.position.top;

            woset = Math.abs( (that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width );
            hoset = Math.abs( (that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height );

            isParent = that.containerElement.get(0) === that.element.parent().get(0);
            isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));

            if(isParent && isOffsetRelative) {
                woset -= that.parentData.left;
            }

            if (woset + that.size.width >= that.parentData.width) {
                that.size.width = that.parentData.width - woset;
                if (pRatio) {
                    that.size.height = that.size.width / that.aspectRatio;
                }
            }

            if (hoset + that.size.height >= that.parentData.height) {
                that.size.height = that.parentData.height - hoset;
                if (pRatio) {
                    that.size.width = that.size.height * that.aspectRatio;
                }
            }
        },

        stop: function(){
            var that = $(this).data("ui-resizable"),
            o = that.options,
            co = that.containerOffset,
            cop = that.containerPosition,
            ce = that.containerElement,
            helper = $(that.helper),
            ho = helper.offset(),
            w = helper.outerWidth() - that.sizeDiff.width,
            h = helper.outerHeight() - that.sizeDiff.height;

            if (that._helper && !o.animate && (/relative/).test(ce.css("position"))) {
                $(this).css({
                    left: ho.left - cop.left - co.left, 
                    width: w, 
                    height: h
                });
            }

            if (that._helper && !o.animate && (/static/).test(ce.css("position"))) {
                $(this).css({
                    left: ho.left - cop.left - co.left, 
                    width: w, 
                    height: h
                });
            }

        }
    });

    $(function(){

            $( "#resizable1").staticblock({});
            $( "#resizable2").staticblock({});
            $( "#resizable3").staticblock({});
            $( "#resizable4").staticblock({});

    }); 
```

**CSS：**

```
#parent { width:600px; height: 600px; background: blue;}    

#resizable1 { width: 130px; height: 131px; padding: 0em; background: yellow; }
#resizable1 h3 { text-align: center; margin: 0; }

#resizable2 { width: 85px; height: 50px; padding: 0em; background: yellow; }
#resizable2 h3 { text-align: center; margin: 0; }

#resizable3 { width: 41px; height: 70px; padding: 0em; background: yellow; }
#resizable3 h3 { text-align: center; margin: 0; }

#resizable4 { width: 11px; height: 99px; padding: 0em; background: yellow; }
#resizable4 h3 { text-align: center; margin: 0; } 
```

**HTML：**

```
<div id="parent">
    <div id="resizable1" class="ui-widget-content">
       test
    </div>
    <div id="resizable2" class="ui-widget-content">
       test
    </div>
    <div id="resizable3" class="ui-widget-content">
       test
    </div>
    <div id="resizable4" class="ui-widget-content">
       test
    </div>
</div> 
```

# tomcat - 托管另一个 ROOT.war Tomcat 应用程序

> ID：15464938
> 
> 赞同：0
> 
> 时间：2013-03-17T19:03:44.273
> 
> 标签：tomcat

Tomcat 目前正在托管我的生产`ROOT.war`应用程序。

我需要测试一个新的`ROOT.war,`，但我不想阻止我的生产应用程序运行。请注意，该应用程序需要部署在该`ROOT`文件夹中。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:18:46.977

Tomcat 可以像 Apache HTTPD 一样进行基于名称的虚拟主机。你需要

*   将第二个`<Host>`元素添加到您的`server.xml`, 内部相同`Engine`但具有不同值的 the`name`和`appBase`

```
<Host name="app2.example.com" appBase="app2-webapps"
   unpackWARs="true" autoDeploy="true"
   xmlValidation="false" xmlNamespaceAware="false"/> 
```

*   将您的第二个 ROOT.war 放入`app2-webapps`
*   如果您的 Tomcat 位于反向代理后面，请确保`Host`标头未触及（对于带有 mod_proxy 的 Apache HTTPD，这意味着设置`ProxyPreserveHost On`

现在请求`http://app2.example.com/*`将由您的新应用程序处理，而对任何其他主机名的请求将转到旧应用程序。

我使用这种技术在一个 Tomcat 中托管多个不同的生产应用程序，但我不建议将同一个 Tomcat 用于生产和开发/测试应用程序的混合。相反，使用不同的服务器或在不同端口上运行的第二个 Tomcat 实例会更安全。

# cocos2d-iphone - 如何使用 KKInput 在 Kobold2d 中实现拖动？

> ID：15464939
> 
> 赞同：0
> 
> 时间：2013-03-17T19:03:55.670
> 
> 标签：cocos2d-iphone, kobold2d

这一定是一个相当简单的解决方案，我只是想念它。如何使用 KKInput 实现简单的拖放？

我正在更新方法中尝试这样的事情。

```
KKInput* input = [KKInput sharedInput];
if ([input touchesAvailable]){
    if ([input isAnyTouchOnNode:[self getChildByTag:0] touchPhase:KKTouchPhaseAny]) {
        [sprite setPosition:[input locationOfAnyTouchInPhase:KKTouchPhaseAny]];
    }
} 
```

它工作正常，但有两个问题。1\. 你可以通过快速移动来摆脱拖拽 2\. 如果你用下面的标签拖动精灵，它会抓住那个。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:47:17.167

在 LearnCocos2D 的一些帮助之后，这就是我所做的。

首先，我创建了一个名为 isDragging 的 BOOL，并在 init 中将其设置为 no。我还创建了一个属性来跟踪正在触摸的精灵。

```
if ([input touchesAvailable] && isDragging == NO){
    if ([input isAnyTouchOnNode:[self getChildByTag:0] touchPhase:KKTouchPhaseAny]) {
        draggedSprite = zero; // Grab this pointer for use next
        isDragging = YES; 
    }
} 
```

然后我将拖动设置为 NO 是没有可用的触摸。

```
if (![input touchesAvailable]) {
    isDragging = NO;
} 
```

然后简单地更新当前被拖动到触摸位置的精灵。

```
if (isDragging){
    draggedSprite.position = [input locationOfAnyTouchInPhase:KKTouchPhaseAny];
} 
```

# input - 用于数字传感器的 XBee 数字输入

> ID：15464948
> 
> 赞同：1
> 
> 时间：2013-03-17T19:04:29.037
> 
> 标签：input, sensors, digital, xbee

是否可以使用 XBee 模块来捕获[DHT11 数字传感器](http://www.adafruit.com/products/386)的值？如果我将 DIO1 设置为数字输入，我应该将值接收为两个字节，但如果传感器返回两个以上字节，如何使用 XBee 模块读取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:49:31.813

为了解码这样的信号，您需要一个辅助处理器。您可能想看看[Digi 的 Programmable XBee 模块](http://www.digi.com/products/wireless-wired-embedded-solutions/zigbee-rf-modules/zigbee-mesh-module/xbee-zb-module?tab=productdocs&pid=4624#docs)，其中包括一个飞思卡尔 HCS08 处理器，用于您编写的附加代码。adafruit 页面说它“需要谨慎的时间来获取数据”。

Digi 网页上有示例代码，标题为“使用可编程 XBee 开发基于定时器的位冲击脉冲”。

# ruby-on-rails - ActiveRecord "where" 产生与 "pluck" 不同的对象

> ID：15464953
> 
> 赞同：0
> 
> 时间：2013-03-17T19:05:01.510
> 
> 标签：ruby-on-rails, object, activerecord, lazy-loading, where

我需要消除这个过程中的一个步骤。

我首先使用“where”来查找具有匹配 id 的配置文件

```
@facebook_profile = FacebookProfile.where(:facebook_id => session[:facebook_profile_id]) 
```

这会产生一个看起来像这样的对象（注意周围的方括号）

```
[#<FacebookProfile id: 94, etc.] 
```

如果我做：

```
$ @facebook_profile.id 
```

结果是

```
#<NoMethodError: undefined method `id' for #<ActiveRecord::Relation:0x007f919cb0b3c0>> 
```

然后我使用 pluck 来生成一个不同的对象，但这需要我使用之前的关系 @facebook_profile。

```
@new_facebook_profile = FacebookProfile.find_by_my_column(@facebook_profile.pluck(:my_column)) 
```

这会产生一个没有方括号的关系：

```
#<FacebookProfile id: 94, etc.> 
```

在这个对象上，我可以调用：

```
@new_facebook_profile.id 
```

并得到我的正确结果

我怎样才能做到@facebook_profile.id 并获得正确的结果而不是错误？我怀疑这与延迟加载有关，但我不能确定。我知道这与关系周围的括号有关。我想摆脱“采摘”步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:08:54.770

尝试使用：

```
@facebook_profile = FacebookProfile.where(:facebook_id => session[:facebook_profile_id]).first 
```

然后就可以`@facebook_profile.id`直接使用了。

该`#first`调用实际上执行了`where()`关系描述的查询，限制为 1，如果有匹配的记录，则返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:09:33.960

正如您从错误中看到的，`where`不返回单个对象，而是返回符合您指定条件的对象的可枚举集合。这就是为什么您的`id`方法在对象上不存在的原因。

您可以追加`.first`到末尾`@facebook_profile = FacebookProfile.where(:facebook_id => session[:facebook_profile_id])`以达到您想要的结果。

# javascript - 是否可以使用同位素进行列排序？（jQuery 库）

> ID：15464955
> 
> 赞同：0
> 
> 时间：2013-03-17T19:05:32.010
> 
> 标签：javascript, jquery, css, jquery-masonry, jquery-isotope

我有一个带有图片的 2 行水平滚动列表，我想按列对元素进行排序，所以第二个在第一个下面，第三个在下一列，第四个在下面，依此类推......像这样：

```
[1]  [3]  [5]  [7]  ...  ...
[2]  [4]  [6]  [8]  ...  ... 
```

这可能吗？如何？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:04:05.643

我相信您会想要类似`masonryHorizontal`or的东西`fitColumns`，请参见此处：

[http://isotope.metafizzy.co/demos/layout-modes.html](http://isotope.metafizzy.co/demos/layout-modes.html)

# javascript - HTML输入元素范围检测何时拖动结束

> ID：15464956
> 
> 赞同：10
> 
> 时间：2013-03-17T19:05:33.260
> 
> 标签：javascript, html, input

```
<input type="range" min="0" max="1" step="0.01" value="1" /> 
```

使用 Javascript 如何检测用户何时完成拖动 input:range 元素？

我尝试过使用 onblur、onmouseout 和 ondragend 事件。

寻找原生 javascript 解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:08:19.143

您可以使用`onchange`或`onmouseup`

[jsfiddle](http://jsfiddle.net/pKp4M/2/)

# ruby-on-rails - 如何纠正来自 reek 的 DuplicateMethodCall

> ID：15464957
> 
> 赞同：2
> 
> 时间：2013-03-17T19:05:35.790
> 
> 标签：ruby-on-rails, reek

如何`DuplicateMethodCall`从以下电话中纠正臭味

```
def to_str
    foo.blank? ? 'Value' : foo
end 
```

我应该如何处理 params[:some] 我应该单独声明它。

```
if params[:some] == 'Action1'

elsif params[:some] == 'Action2'

elsif params[:some] == 'Action3'

elsif params[:some] == 'Action4'

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T12:31:43.903

对于使用 params 哈希的代码，您应该认识到它`params[:some]`与`params.[](:some)`. 因此，Reek 假设您`:[]`在对象 ( ) 上重复调用相同的方法 ( `params`)。

在 params 哈希的情况下，这个警告看起来有点傻，因为哈希键查找非常快。但是，要更正此问题，您可以将`params[:some]`值分配给局部变量：

```
some = params[:some]

if some == 'Action1'

elsif some == 'Action2'

elsif some == 'Action3'

elsif some == 'Action4' 
```

尽管性能提升很小，但此代码（可以说）更具可读性且更易于维护。

请记住，虽然简单地修复报告的问题是有帮助的，但代码度量的真正威力在于它们将您集中在代码中的问题区域，让您有机会重新考虑您的方法。消除或重构代码异味比仅仅修补它以平息代码指标投诉要好。

# android - 如何纠正致命异常 - 异步任务

> ID：15464958
> 
> 赞同：0
> 
> 时间：2013-03-17T19:05:38.317
> 
> 标签：android, eclipse, android-asynctask

我尝试按照以下教程将 Android 与 PHP、MySQL 连接起来：

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

但是，我和大多数遵循本教程的用户在直接从下载的教程源运行应用程序并单击任一按钮时都会遇到强制关闭错误。

（看看评论部分 - 几乎每个人都对本教程有疑问）

# 日志猫：

```
03-17 14:40:10.064: D/dalvikvm(2936): GC_CONCURRENT freed 177K, 5% free 7488K/7812K, paused 2ms+11ms, total 33ms
03-17 14:40:16.294: D/dalvikvm(2936): GC_CONCURRENT freed 80K, 4% free 7856K/8140K, paused 3ms+2ms, total 26ms
03-17 14:40:16.784: E/JSON Parser(2936): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
03-17 14:40:16.794: W/dalvikvm(2936): threadid=15: thread exiting with uncaught exception (group=0x41d42930)
03-17 14:40:16.794: E/AndroidRuntime(2936): FATAL EXCEPTION: AsyncTask #5
03-17 14:40:16.794: E/AndroidRuntime(2936): java.lang.RuntimeException: An error occured while executing doInBackground()
03-17 14:40:16.794: E/AndroidRuntime(2936):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at java.lang.Thread.run(Thread.java:856)
03-17 14:40:16.794: E/AndroidRuntime(2936): Caused by: java.lang.NullPointerException
03-17 14:40:16.794: E/AndroidRuntime(2936):     at com.example.androidhive.NewProductActivity$CreateNewProduct.doInBackground(NewProductActivity.java:98)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at com.example.androidhive.NewProductActivity$CreateNewProduct.doInBackground(NewProductActivity.java:1)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-17 14:40:16.794: E/AndroidRuntime(2936):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-17 14:40:16.794: E/AndroidRuntime(2936):     ... 3 more
03-17 14:40:17.284: E/WindowManager(2936): Activity com.example.androidhive.NewProductActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{42488ea0 V.E..... R.....ID 0,0-296,153} that was originally added here
03-17 14:40:17.284: E/WindowManager(2936): android.view.WindowLeaked: Activity com.example.androidhive.NewProductActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{42488ea0 V.E..... R.....ID 0,0-296,153} that was originally added here
03-17 14:40:17.284: E/WindowManager(2936):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
03-17 14:40:17.284: E/WindowManager(2936):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
03-17 14:40:17.284: E/WindowManager(2936):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
03-17 14:40:17.284: E/WindowManager(2936):  at android.app.Dialog.show(Dialog.java:281)
03-17 14:40:17.284: E/WindowManager(2936):  at com.example.androidhive.NewProductActivity$CreateNewProduct.onPreExecute(NewProductActivity.java:75)
03-17 14:40:17.284: E/WindowManager(2936):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
03-17 14:40:17.284: E/WindowManager(2936):  at android.os.AsyncTask.execute(AsyncTask.java:534)
03-17 14:40:17.284: E/WindowManager(2936):  at com.example.androidhive.NewProductActivity$1.onClick(NewProductActivity.java:55)
03-17 14:40:17.284: E/WindowManager(2936):  at android.view.View.performClick(View.java:4204)
03-17 14:40:17.284: E/WindowManager(2936):  at android.view.View$PerformClick.run(View.java:17355)
03-17 14:40:17.284: E/WindowManager(2936):  at android.os.Handler.handleCallback(Handler.java:725)
03-17 14:40:17.284: E/WindowManager(2936):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-17 14:40:17.284: E/WindowManager(2936):  at android.os.Looper.loop(Looper.java:137)
03-17 14:40:17.284: E/WindowManager(2936):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-17 14:40:17.284: E/WindowManager(2936):  at java.lang.reflect.Method.invokeNative(Native Method)
03-17 14:40:17.284: E/WindowManager(2936):  at java.lang.reflect.Method.invoke(Method.java:511)
03-17 14:40:17.284: E/WindowManager(2936):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-17 14:40:17.284: E/WindowManager(2936):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-17 14:40:17.284: E/WindowManager(2936):  at dalvik.system.NativeStart.main(Native Method)

JAVA:    NewProductActivity.java

package com.example.androidhive;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class NewProductActivity extends Activity {

// Progress Dialog
private ProgressDialog pDialog;

JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputPrice;
EditText inputDesc;

// url to create new product
private static String url_create_product =    "http://linkingmanager.zxq.net/create_product.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_product);

    // Edit Text
    inputName = (EditText) findViewById(R.id.inputName);
    inputPrice = (EditText) findViewById(R.id.inputPrice);
    inputDesc = (EditText) findViewById(R.id.inputDesc);

    // Create button
    Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct);

    // button click event
    btnCreateProduct.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // creating new product in background thread
            new CreateNewProduct().execute();
        }
    });
}

/**
 * Background Async Task to Create new product
 * */
class CreateNewProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(NewProductActivity.this);
        pDialog.setMessage("Creating Product..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Creating product
     * */
    protected String doInBackground(String... args) {
        String name = inputName.getText().toString();
        String price = inputPrice.getText().toString();
        String description = inputDesc.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("price", price));
        params.add(new BasicNameValuePair("description", description));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params);

        // check log cat fro response
        Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully created product
                Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);
                startActivity(i);

                // closing this screen
                finish();
            } else {
                // failed to create product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

}
}

XML: add_product.xml

<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<!-- Name Label -->
<TextView android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Product Name"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:paddingTop="10dip"
    android:textSize="17dip"/>

<!-- Input Name -->
<EditText android:id="@+id/inputName"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:layout_marginBottom="15dip"
    android:singleLine="true"/>

<!-- Price Label -->
<TextView android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Price"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:paddingTop="10dip"
    android:textSize="17dip"/>

<!-- Input Price -->
<EditText android:id="@+id/inputPrice" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:layout_marginBottom="15dip"
    android:singleLine="true"
    android:inputType="numberDecimal"/>

<!-- Description Label -->
<TextView android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Description"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:paddingTop="10dip"
    android:textSize="17dip"/>

<!-- Input description -->
<EditText android:id="@+id/inputDesc" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:layout_marginBottom="15dip"
    android:lines="4"
    android:gravity="top"/>

<!-- Button Create Product -->
<Button android:id="@+id/btnCreateProduct" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Create Product"/>

 </LinearLayout>

JAVA: AllProductsActivity.java

package com.example.androidhive;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
public class AllProductsActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://linkingmanager.zxq.net/get_all_products.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PRODUCTS = "products";
    private static final String TAG_PID = "pid";
    private static final String TAG_NAME = "name";

    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_products);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        // Get listview
        ListView lv = getListView();

        // on seleting single product
        // launching Edit Product Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                        .toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        EditProductActivity.class);
                // sending pid to next activity
                in.putExtra(TAG_PID, pid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        });

    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllProductsActivity.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        productsList.add(map);
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AllProductsActivity.this, productsList,
                            R.layout.list_item, new String[] { TAG_PID,
                                    TAG_NAME},
                            new int[] { R.id.pid, R.id.name });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
}

XML: all_products.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<!-- Main ListView 
     Always give id value as list(@android:id/list)
-->
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:15:19.087

```
Caused by: java.lang.NullPointerException
03-17 14:40:16.794: E/AndroidRuntime(2936):     at com.example.androidhive.NewProductActivity$CreateNewProduct.doInBackground(NewProductActivity.java:98) 
```

如果我没记错的话就是这条线

```
Log.d("Create Response", json.toString()); 
```

所以这意味着由于某种原因你在这里得到 null

```
JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params); 
```

也许您的网址不正确。

# c# - 方法是默认“虚拟”还是“非虚拟”？：

> ID：15464959
> 
> 赞同：4
> 
> 时间：2013-03-17T19:05:52.260
> 
> 标签：c#, oop

根据[这个](https://stackoverflow.com/questions/15420029/is-c-sharp-method-sealed-or-virtual-by-default)类似的 StackOverflow 问题和其他文章，默认情况下 C# 方法是“非虚拟的”，我认为这意味着您不能在派生类中覆盖它们。

如果这是真的，请您向我解释一下，在下面的示例中，我如何能够在继承自 Base 类的 Child 类中实现属性 LastName ，而不会在基类中将该属性标记为“虚拟”？Child.LastName 属性是否“隐藏”（VB“阴影”）基类中的相同属性？如果是这样，为什么 Child.LastName 属性中没有使用“新”关键字来表示这一点？

这个测试示例似乎向我建议默认情况下方法和*虚拟*，并且在 LastName 属性的情况下，隐含“覆盖”，但我很确定情况并非如此。

我错过了什么？

```
public class BaseClass
{

    private string _FirstName;
    public virtual string FirstName {
        get { return _FirstName; }
        set { _FirstName = value; }
    }

    private string _LastName;
    public string LastName {
        get { return _LastName; }
        set { _LastName = value; }
    }

    public void Go()
    {
        MessageBox.Show("Going at default speed in Base Class");
    }

    public void Go(int speed)
    {
        MessageBox.Show("Going at " + speed.ToString() + " in Base Class");
    }
}

public class Child : BaseClass
{

    public override string FirstName {
        get { return "Childs First  Name"; }
        set { base.FirstName = value; }
    }

    public string LastName {
        get { return "Child's Last Name"; }
        set { base.LastName = value; }
    }

    public void Go()
    {
        MessageBox.Show("Going in Child Class");
    }

    public void Go(int speed)
    {
        MessageBox.Show("Going at " + speed.ToString() + " in Child Class");
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:09:06.053

默认情况下，方法在 C# 中不是虚拟的。Child 类中的 LastName 对 BaseClass 隐藏了 LastName。据我记得，这段代码甚至可以编译，但是编译器会提供警告，告诉应该使用 new 关键字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T19:10:02.183

默认情况下它们是非虚拟的。

子类*隐藏*了基类的`LastName`属性。

如果你写：

```
BaseClass b = new Child(...);
Console.WriteLine(b.LastName); 
```

您将看到调用了基本实现。

当你编译上面的代码时，编译器会警告你。将隐藏基地成员的成员标记为 是标准做法`new`。

```
public new string LastName {
    get { return "Child's Last Name"; }
    set { base.LastName = value; }
} 
```

这是一个非常常见的 C# 编程面试问题 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T19:16:19.263

对多态性的良好理解将清楚这一点：

[多态性（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.110%29.aspx)

用新成员隐藏基类成员

* * *

如果希望派生成员与基类中的成员具有相同的名称，但不希望它参与虚拟调用，则可以使用 new 关键字。new 关键字放在被替换的类成员的返回类型之前。以下代码提供了一个示例：

```
public class BaseClass
{
    public void DoWork() { WorkField++; }
    public int WorkField;
    public int WorkProperty
    {
        get { return 0; }
    }
}

public class DerivedClass : BaseClass
{
    public new void DoWork() { WorkField++; }
    public new int WorkField;
    public new int WorkProperty
    {
        get { return 0; }
    }
} 
```

通过将派生类的实例转换为基类的实例，仍然可以从客户端代码访问隐藏的基类成员。例如：

```
DerivedClass B = new DerivedClass();
B.DoWork();  // Calls the new method.

BaseClass A = (BaseClass)B;
A.DoWork();  // Calls the old method. 
```

防止派生类覆盖虚拟成员

* * *

无论在虚拟成员和最初声明它的类之间声明了多少类，虚拟成员都无限期地保持虚拟。如果 A 类声明了一个虚拟成员，B 类从 A 派生，C 类从 B 派生，则 C 类继承该虚拟成员，并且可以选择覆盖它，无论 B 类是否为该成员声明了覆盖。以下代码提供了一个示例：

```
public class A
{
    public virtual void DoWork() { }
}
public class B : A
{
    public override void DoWork() { }
} 
```

派生类可以通过将覆盖声明为密封来停止虚拟继承。这需要在类成员声明中将sealed 关键字放在覆盖关键字之前。以下代码提供了一个示例：

```
public class C : B
{
    public sealed override void DoWork() { }
} 
```

在前面的示例中，DoWork 方法对于任何从 C 派生的类都不再是虚拟的。它对于 C 的实例仍然是虚拟的，即使它们被强制转换为类型 B 或类型 A。密封的方法可以通过使用替换为派生类new 关键字，如以下示例所示：

```
public class D : C
{
    public new void DoWork() { }
} 
```

在这种情况下，如果使用 D 类型的变量在 D 上调用 DoWork，则调用新的 DoWork。如果使用 C、B 或 A 类型的变量访问 D 的实例，对 DoWork 的调用将遵循虚拟继承规则，将这些调用路由到 C 类上的 DoWork 实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T19:11:27.547

好吧，你没看错。如果它不是虚拟的，它将被隐藏。

关键字在`new`继承层次链中阻止虚拟覆盖。

阅读的简单示例：*[C# 中的多态性、方法隐藏和覆盖](http://www.akadia.com/services/dotnet_polymorphism.html)*

# java - Oracle 11g 连接重置错误

> ID：15464963
> 
> 赞同：11
> 
> 时间：2013-03-17T19:06:09.067
> 
> 标签：java, sockets, networking, jdbc, oracle11g

尝试使用瘦 jdbc 驱动程序在 64 位 Red Hat Linux 上连接到 Oracle 11g 时看到以下错误。如果有人能更多地了解如何解决这个问题，我们将不胜感激。

```
 Caused by: java.net.SocketException: Connection reset
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:113)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at oracle.net.ns.DataPacket.send(DataPacket.java:199)
    at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)
    at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)
    at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)
    at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)
    at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)
    at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:123)
    at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:79)
    at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1122)
    at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1099)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:288)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)
    at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:366)
    at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:752)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:366) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-04T04:31:40.830

我们有一些非常相似的东西，将程序从 32 位操作系统移动到 64 位操作系统，并且许多并发进程会抛出 IO 错误：连接重置。

偶然发现了这个修复它：

[https://community.oracle.com/message/3701989](https://community.oracle.com/message/3701989)

基本上添加 -Djava.security.egd=file:/dev/./urandom 参数，这很好:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-17T19:45:13.077

你没有包括问题的任何细节，比如发生了什么变化？这是您的新配置还是突然停止工作？你知道你是否有足够的可用连接吗？每个连接都会发生这种情况还是间歇性的？

考虑到在登录过程中发生错误，有几种可能性：

1.  网络故障
2.  您已经用尽了最大连接数，所以 Oracle 挂断了您。
3.  防火墙限制
4.  数据库服务器或侦听器有问题。为您的会话提供服务的处理在打开后可能会崩溃。

检查以下有关如何检查活动连接数和最大值的 stackoverflow 线程。如果这是问题所在，我预计会出现“ORA-00018：超出最大会话数”错误，所以它可能不是。但值得检查。

[如何检查允许连接到 Oracle 数据库的最大数量？](https://stackoverflow.com/questions/162255/how-to-check-the-maximum-number-of-allowed-connections-to-an-oracle-database)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-29T06:27:08.203

我在使用 Sqoop Oracle 导入时遇到了类似的问题，并且我已经实施了此[链接建议的修复](http://sqoop.apache.org/docs/1.4.2/SqoopUserGuide.html#_oracle_connection_reset_errors)

此设置有助于解决问题：

`-Dmapred.child.java.opts="-Djava.security.egd=file:///dev/urandom"`

我已将 mapred-site.xml 配置属性名称值更改为：

`mapreduce.admin.map.child.java.opts -Djava.security.egd=file:///dev/urandom`

这有点特定于 sqoop，但我认为设置 JVM 选项 `-Djava.security.egd=file:///dev/urandom"` 将帮助您解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T19:35:06.647

由于堆栈没有指示任何 ORA，因此您有潜在的网络问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-06T11:54:50.930

导致我出现此问题的其他原因是**HOSTNAME**设置错误。我的连接尝试挂在：

```
"main" prio=10 tid=0x00007f7cc8009000 nid=0x2f3a runnable [0x00007f7cce69e000]
   java.lang.Thread.State: RUNNABLE
        at java.net.Inet4AddressImpl.getLocalHostName(Native Method)
        at java.net.InetAddress.getLocalHost(InetAddress.java:1444)
        at sun.security.provider.SeedGenerator$1.run(SeedGenerator.java:176)
        at sun.security.provider.SeedGenerator$1.run(SeedGenerator.java:162)
        at java.security.AccessController.doPrivileged(Native Method) 
```

因此，请确保您在`/etc/hosts/`.

如果您发出这样的`hostname`命令：

```
$ hostname
my.server.com 
```

你需要一行`/etc/hosts`：

```
127.0.0.1 my my.server.com 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-05T21:48:01.633

在我的应用程序中，我创建了两次 BasicDataSource 并且使用 java 1.8 32 位失败。当我迁移到 java 1.8 64 位时问题得到解决

# ssl - phpmailer、requre() 和 include_path 组合

> ID：15464967
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:06:37.117
> 
> 标签：ssl, openssl, phpmailer

经过 5 天漫长的尝试设置从 php 脚本发送电子邮件后，我终于从本地服务器完成了，我使用 apache。

楼主，我做不到。我得到这个错误->

SMTP 错误：无法连接到 SMTP 主机

所以，我搜索了堆栈溢出等。我尝试使用 SMTPSecure = 'ssl'，什么也没做。我检查了 extension=php_openssl.dll 是否被注释掉，但它甚至不存在于我的主机上。我的意思是，php.ini 中没有名为 php_openssl.dll 的文件。只有在 Curl 部分下安装了 Openssl 以及它是什么版本的信息。在 openssl 部分下说它已启用。我的电脑和主机上的配置相同，但邮件不会在主机上发送。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:51:55.810

您的主机设置将与本地服务器不同，因此您需要不同的配置。您的主机似乎已安装了电子邮件服务器。除非您在本地机器上设置了一个，否则您的 PHP 脚本在使用相同的设置时会失败。此外，您的主机可能对其电子邮件服务器有限制，这意味着您可能无法使用它从本地服务器发送电子邮件。（你应该问他们）。这篇文章中概述了替代方案：

[如何在 Windows Vista 上配置 PHP 的邮件功能？](https://stackoverflow.com/questions/612277/how-can-i-configure-the-mail-function-of-php-on-windows-vista)

如果您在主机上发送邮件时遇到问题，您应该向他们询问如何连接到电子邮件服务器的详细信息。他们很可能会限制使用来阻止垃圾邮件的发送。

# ruby-on-rails-3 - rails 3 observe_form

> ID：15464973
> 
> 赞同：0
> 
> 时间：2013-03-17T19:07:04.080
> 
> 标签：ruby-on-rails-3, ruby-on-rails-2

我正在将 rails_2 项目升级到 rails_3。从 :( 旧环境：rails 2.3.2，ruby 1.8.7 现在加载数据时遇到问题：rails 3.2.11，ruby 1.9.3

我有一个 form_for @lead 和 observe_form 视图

{ :action => :update_price }, :frequency => 0.1 %>

但是当我运行 rails server 时，我在浏览器中看到空白页面:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:16:18.607

<%= form_for %> 你在form标签里加了“=”？？？– 萨钦 R

# ruby-on-rails - 如何从雅虎财经页面获取 RSS 提要并显示在我的 Rails 应用程序中？

> ID：15464979
> 
> 赞同：0
> 
> 时间：2013-03-17T19:07:30.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rss, yahoo-finance

在过去的 6 个月里，我一直在使用 Ruby 和 Rails 进行编程，现在我已经很适应了。但是，在使用我的 Rails 应用程序之前，我从来不需要处理 RSS 提要。对于我当前的项目，我有一个显示页面，显示不同的市场指数及其开盘价、最高价、最低价和成交量值。现在，我想从 yahoo Finance 带来 RSS 提要，并希望在同一页面中显示它们。我想从这个链接[http://finance.yahoo.com/rssindex](http://finance.yahoo.com/rssindex)获取 RSS 提要，然后我想在我的 Rails 应用程序的显示页面中显示它们。在寻找这个问题的解决方案时，我遇到了这个：[Generating RSS feed in Rails 3](https://stackoverflow.com/questions/4827232/generating-rss-feed-in-rails-3)

但是，我认为这是为一个应用程序生成 RSS 提要。我相信我的需求与此不同。我想获取 RSS 提要并在我的显示页面中显示它们。为了获取 RSS 提要，我发现了一个名为 feedzirra 的 ruby​​ gem，它看起来很棒。但是，我仍然对如何使用我的 Rails 应用程序实际显示新闻提要感到有些困惑？我的意思是，我需要为此创建任何模型、视图和控制器吗？我是否需要将新闻提要保存在我的数据库中以便在我的显示页面中显示它们？或者，有什么方法可以使用 feedzirra 获取并在我的显示页面中显示它们？我只是不确定如何从这个位置前进。解决此问题的最佳 Rails 方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:09:31.350

[瑞安·贝茨（Ryan Bates）有一个解决问题的方法： http](http://railscasts.com/episodes/168-feed-parsing) ://railscasts.com/episodes/168-feed-parsing

你绝对应该有这个数据的模型。目标应该是让模型处理数据的获取和解析。

如果您对将信息保存到自己的数据库不感兴趣（如 railscast 剧集中所示），请注意，在每次页面加载时向 yahoo 发出请求会导致性能下降。

这是您可以添加到模型中的方法的简单示例。

```
def self.lookup_stock_titles(stock_name)
  titles = Array.new
  Feedzirra::Feed.fetch_and_parse("http://feeds.finance.yahoo.com/rss/2.0/headline?s=#{stock_name}&region=US&lang=en-US").entries.each do |entry|
     titles << entry.title
  end
  return titles
end 
```

这将为您提供来自 rss 提要的一系列标题，您可以根据需要将它们集成到控制器或视图中。

```
<% ModelName.lookup_stock_titles("ABC").each do |title| %>
  <h2><%= title %></h2>
<% end %> 
```

还要确保雅虎允许您以您想要的方式使用他们的数据，将其保存到数据库中，每小时的请求数，您需要给他们什么样的信用等等。

# prolog - 如何使用 SWI prolog 从用户那里获取两个值

> ID：15464980
> 
> 赞同：-1
> 
> 时间：2013-03-17T19:07:38.690
> 
> 标签：prolog

我正在使用 SWI prolog 要求用户根据以下代码插入两个不同的值：

```
base:-
   write('\n Please enter the base and exponent or 0 and 0 to stop the program:'),
   read   (X),
   read(Y),
   bas(X,Y).

bas(0,0):- !.
bas(X,Y):-
   f is X*Y,
   write('The power of '),write(x),
   write(' raised to '),write(y),
   write(' is '),write(f),
   base. 
```

但是在我进行咨询之后，第一行将显示（插入数字）但是当我插入它为我显示的值时出现错误。那么错误是什么以及为什么程序无法读取我的不同值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:51:44.483

here a slight reformulation

```
base :-
    writeln('enter base and exponent (terminate with .) or 0 and 0 to stop the program'),
    read(X),
    read(Y),
    bas(X,Y).

bas(0,0):- !.
bas(X,Y):-
    P is X ^ Y,
    format('The power of ~w raised to ~w is ~w~n', [X,Y,P]),
    base. 
```

to me, such interaction seems a bit weird:

```
?- base.
enter base and exponent (terminate with .) or 0 and 0 to stop the program
|: 4.
|: 2.
The power of 4 raised to 2 is 16
enter base and exponent (terminate with .) or 0 and 0 to stop the program
|: 0.
|: 0.
true. 
```

# css - LESS 有“扩展”功能吗？

> ID：15464982
> 
> 赞同：98
> 
> 时间：2013-03-17T19:07:45.383
> 
> 标签：css, sass, less, extend

SASS 有一个称为`@extend`允许选择器继承另一个选择器的属性的功能，但无需复制属性（如 mixins）。

LESS也有这个功能吗？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-03-17T19:07:45.383

是的，Less.js[`extend`](http://lesscss.org/features/#extend-feature)在[v1.4.0](https://github.com/cloudhead/less.js/blob/master/CHANGELOG.md)中引入。

```
:extend() 
```

LESS 没有实现 SASS 和 Stylus 使用的 at-rule ( `@extend`) 语法，而是实现了伪类语法，这使 LESS 的实现可以灵活地直接应用于选择器本身，或者在语句内部。所以这两个都可以工作：

```
.sidenav:extend(.nav) {...} 
```

或者

```
.sidenav {
    &:extend(.nav);
    ...
} 
```

此外，您还可以使用该`all`指令来扩展“嵌套”类：

```
.sidenav:extend(.nav all){}; 
```

你可以添加一个逗号分隔的你想扩展的类列表：

```
.global-nav {
    &:extend(.navbar, .nav all, .navbar-fixed-top all, .navbar-inverse);
    height: 70px;
} 
```

扩展嵌套选择器时，您应该注意到不同之处：

嵌套选择器`.selector1`和`selector2`：

```
.selector1 {
  property1: a;
   .selector2 {
    property2: b;
   }
} 
```

现在`.selector3:extend(.selector1 .selector2){};`输出：

```
.selector1 {
  property1: a;
}
.selector1 .selector2,
.selector3 {
  property2: b;
} 
```

，`.selector3:extend(.selector1 all){};`输出：

```
.selector1,
.selector3 {
  property1: a;
}
.selector1 .selector2,
.selector3 .selector2 {
  property2: b;
} 
```

,`.selector3:extend(.selector2){};`输出

```
.selector1 {
  property1: a;
}
.selector1 .selector2 {
  property2: b;
} 
```

最后`.selector3:extend(.selector2 all){};`：

```
.selector1 {
  property1: a;
}
.selector1 .selector2,
.selector1 .selector3 {
  property2: b;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-09T06:38:56.483

## 在 Less 框架中扩展功能的简单方法

```
.sibling-1 {
    color: red
}
.sibling-2 {
    background-color: #fff;
    .sibling-1();
} 
```

> 输出

```
.sibling-1 {
  color: red
}
.sibling-2 {
  background-color: #fff;
  color: red
} 
```

参考[https://codepen.io/sprushika/pen/MVZoGB/](https://codepen.io/sprushika/pen/MVZoGB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-03T13:34:27.080

Less 允许我们做 :extend(.class) 或 :extend(#id)

# python - 使用 Django 访问 JSON 数据

> ID：15464984
> 
> 赞同：1
> 
> 时间：2013-03-17T19:07:58.950
> 
> 标签：python, django, json

**免责声明：**我对解析和访问 JSON 完全陌生，而且我才刚刚开始了解 django。

**细节：**

我正在尝试访问我在 django 模板中获得的 JSON 对象内的一些数据：

示例 JSON：

```
{"entry":[
{"id":"1234567","hash":"1234567",
..."name":{"givenName":"John","familyName":"Doel","formatted":"John H. Doe"},
..."currentLocation":"Los Angeles, CA",
..."emails":[{"primary":"true","value":"jdoe@example.com"}],
..."accounts":[
    ...{"domain":"facebook.com","url":"http:\/\/www.facebook.com\/john.doe",..."shortname":"facebook"},
    ...{"domain":"twitter.com","display":"@jdoe411","url":"http:\/\/twitter.com\/jdoe411",..."shortname":"twitter"}],
..."urls":[{"value":"http:\/\/www.example.com","title":"example url"},]}
]} 
```

使用 Django 模板标签获得：

```
@register.inclusion_tag('includes/gravatar_links.html')
def gravatar_links(email, first_name):
    url = "http://www.gravatar.com/" + hashlib.md5(email.lower()).hexdigest()
    url += '.json'

    response = urllib2.urlopen(url)
    interm = simplejson.load(response)
    data = simplejson.dumps(interm)
    name = first_name

return {'gravatar_links': {'name': name, 'data': data}} 
```

我只是调用`{{ gravatar_links.name }}`and `{{ gravatar_links.data }}`，我可以看到用户名和所描述的 JSON 数据。

**目标：**

我想访问 JSON 对象中的特定键，即`"accounts"`and `"urls"`，并自定义输出，（例如）`"Follow {{ gravatar_links.name }} on <a href="{{ gravatar_links.data.accounts.url }}">{{ gravatar_links.data.accounts.shortname }}</a> and see their work at <a href="{{ gravatar_links.data.urls.url }}">{{ gravatar_links.data.urls.title }}</a>"`

理想情况下会产生：

`"Follow John on Twitter and Facebook and see their work at example url"`

**问题：**

1.  ~~我应该只使用 django/python 来执行此操作，还是由 jQuery 更好地处理？~~
2.  如果`"accounts"`以列表形式出现，如何将其输出为逗号分隔列表？
3.  使用此方法是否有任何我应该注意的安全问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:55:07.907

模板标签应该是：

```
@register.inclusion_tag('includes/gravatar_links.html')
def gravatar_links(email, first_name):
    url = "http://www.gravatar.com/" + hashlib.md5(email.lower()).hexdigest()
    url += '.json'

    response = urllib2.urlopen(url)
    interm = simplejson.load(response)
    accounts_list = interm["entry"][0]["accounts"]
    data = simplejson.dumps(interm)

    return {'gravatar_links': {'accounts': accounts_list, 'name': first_name, 'data': data}} 
```

然后访问 json 对象的元素，我们可以继续使用类似的东西，`accounts_list = interm["entry"][0]["accounts"]`除了`"urls"`我们有`urls_list = interm["entry"][0]["urls"]`

对于具有不止一种可能`dictionary`的元素，`[element: {key1=>value1, ...}, {key2=>value2, ...}]`只需在模板中设置一个 for 循环并遍历这些项目，如下所示：

```
and follow {{ gravatar_links.name }} on 

{% for o in gravatar_links.accounts %}
    {% if not forloop.first and not forloop.last %}, {% endif %}
    {% if forloop.last %} and {% endif %}

    <a href="{{ o.url }}">{{ o.shortname }}</a>

    {% if forloop.last %}.{% endif %}
{% endfor %} 
```

额外的`if forloop`语句将组成我们的输出：

`and follow John on facebook and twitter.`

超过 2 个网址： `and follow John on facebook, linkedin, and twitter.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:08:08.243

对于逗号分隔的列表，您使用`join`来自 Django 的模板标签（[https://docs.djangoproject.com/en/dev/ref/templates/builtins/](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)）：

```
{{ accounts|join:", " }} 
```

如果您想更花哨，您可以编写自己的模板标签（并不像看起来那么难！）。

# php - md5 密码不匹配

> ID：15464991
> 
> 赞同：0
> 
> 时间：2013-03-17T19:08:47.360
> 
> 标签：php, login, md5

我用密码md5加密设置了signup.php，当我在phpmyadmin检查它时它工作正常，但是当我将md5应用于login.php时它与密码不匹配？它说总是错误的密码可能是语法但无法弄清楚......

**注册.php**

```
if (isset($_POST['user']))
{
    $user = sanitizeString($_POST['user']);
    $pass = sanitizeString($_POST['pass']);

    if ($user == "" || $pass == "")
        $error = "Not all fields were entered<br /><br />";
    else
    {
        if (mysql_num_rows(queryMysql("SELECT * FROM members
              WHERE user='$user'")))
            $error = "That username already exists<br /><br />";
        else
          {
            queryMysql("INSERT INTO members VALUES('$user', '".md5('$pass')."')");
            die("<h4>Account created</h4>Please Log in.<br /><br />");
        }
    }
} 
```

**登录.php**

```
if(isset($_POST['user'])) {
    $user = sanitizeString($_POST['user']);
    $pass = sanitizeString($_POST['pass']);

    if ($user == "" || $pass == "") {
    $error = "Not all fields were entered<br />";
    } else {
        $query = "SELECT user,pass FROM members WHERE user = '$user' AND pass = \'\".md5('$pass').\"\'";

        if(mysql_num_rows(queryMysql($query)) == 0) {
            $error = "<span class='error'>Username/Password invalid</span><br /><br />";
        } else {
            $_SESSION['user'] = $user;
            $_SESSION['pass'] = $pass;
            die("You are now logged in. Please <a href='society.php?view=$user'>" . 
                "click here</a> to continue.<br /><br />");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:11:57.060

我认为错误的部分`md5('$pass')`来自

```
queryMysql("INSERT INTO members VALUES('$user', '".md5('$pass')."')"); 
```

因为你有一个未插值的字符串 - 尝试：

```
queryMysql("INSERT INTO members VALUES('$user', '".md5($pass)."')"); 
```