# StackOverflow 问答 15128000-15128999

# ios6 - 如何在 iphone 中创建自定义类的对象？

> ID：15128002
> 
> 赞同：0
> 
> 时间：2013-02-28T05:15:03.557
> 
> 标签：ios6

我想创建我的类别类别的对象。我是 iphone 开发新手，不知道该怎么做。它是我的类 .h 文件 Category.h

@interface 类别：NSObject

@property (nonatomic, 保留) NSString *uid; @property (nonatomic, 保留) NSString *title;

@结尾

在java中它可以做到。类别类别 = 新类别（）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:34:45.303

```
Category *category = [Category alloc]init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:36:25.297

# 在 .h 文件中导入“Category.h”

现在我们已经通过这样写来为其分配内存

```
Category * categoryObj = [[Category alloc] init]; 
```

现在我们可以在你想要的地方使用那个对象，就像这个
categoryObj.uid = @"your data";
categoryObj.title = @"你的数据";

我希望这能帮到您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T05:42:35.170

在 Objective-c 中，我们像这样创建对象：

类别 * categoryObject = [[类别分配] init];

现在您可以插入如下数据：

类别对象。uid=@"2356-4fr5-ok8u-52o8-85ki-km76-l5bt-09ij-kf65-8ij6";

类别对象。title=@"示例项目";

享受编码

# c# - 如何访问使用 TLBIMP 创建的托管 .NET 对象的底层 COM 对象

> ID：15128004
> 
> 赞同：0
> 
> 时间：2013-02-28T05:15:14.050
> 
> 标签：c#, com, com-interop

我有许多需要从 WF4 活动访问的 COM 库，因此我曾经`tlbimp`为它们生成托管包装器。这很好用，但在某些情况下，有一个 COM 方法需要一个 Variants 数组作为其参数之一，并且该数组的元素之一是来自另一个 DLL 的 COM 类的实例，我可以'即使我有对表示同一对象的托管包装器的引用，也看不到如何获得引用。

例如，假设我有两个名为`ABC`and的 COM 库`DEF`，为此我创建了名为`ABCManaged`and `DEFManaged`using的托管包装器`tlbimp`。假设`DEF`有一个具有以下签名的方法（请原谅 VB 风格的签名，这就是它在文档中的方式）：

```
CallFunction (parmArray() as Variant) as Long 
```

这表示`DEFManaged`如下：

```
int CallFunction(ref object parmArray) 
```

到现在为止还挺好。现在，作为参数的变量数组的元素是`CallFunction()`不同类型的，所以在我的例子中，第一个元素是 a`double`而第二个元素是`ABC`. 以下是我如何构建我的数组以传递给我的 managed `CallFunction()`：

```
// obtain our managed ABC from the workflow context
ABCManaged abc = context.GetValue(this.InputABC);
object[] parameters =  new object[2];
parameters[0] = new double();
parameters[1] = abc;

DEFManaged def = new DEFManaged();
def.CallFunction(parameters); 
```

这编译得很好，但不起作用 - 调用`CallFunction()`抛出这个异常：

```
System.ArgumentException: Value does not fall within the expected range. 
```

我的猜测是，`def`它没有正确编组到底层的非托管`DEF`类型，可能是因为签名只是有一个数组`object`，并且确定数组元素的真实类型的逻辑在 COM 方法的实现中的某个地方`CallFunction()`。在将对象粘贴到数组中以传递给我的 managed 之前，我无法弄清楚如何手动将我的`def`对象编组为非托管类型。`DEF``CallFunction()`

在这里也不能选择直接使用 P/Invoke；我当然可以编写代码，但其中一项要求是 WF4 活动的用户能够访问`DEFManaged`对象的属性和方法，因此它们需要是托管对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:37:41.780

事实证明，数组中的各个对象被正确编组，但数组本身是按值而不是按引用传递的（COM 对象要求它按引用传递 - `VT_BYREF`）。当我能够将调试器附加到 COM 对象时，这浮出水面。

通过引用从 C# 向 COM 传递数组并不简单。我最初通过在 VB6 (!) 中有一个不需要通过引用传递的中间代理 COM 对象来解决这个问题，并从我的代理对象调用原始 COM 对象（VB6 总是通过引用传递）。

[这并不理想，但事实证明，可以通过反射和ParameterModifier](http://msdn.microsoft.com/en-us/library/system.reflection.parametermodifier(v=vs.100).aspx)使用后期绑定来强制 C# 通过引用将参数传递给 COM 方法，正如[我对主题的问题的](https://stackoverflow.com/questions/15216951/how-to-pass-an-array-from-c-sharp-to-unmanaged-com-by-reference-vt-byref)[回答](https://stackoverflow.com/a/15229618/533676)中所述。

这是它的工作方式：

```
// obtain our managed ABC from the workflow context
ABCManaged abc = context.GetValue(this.InputABC);

object[] parameters =  new object[2]; // method argument, i.e. parmArray value
parameters[0] = new double();
parameters[1] = abc;

DEFManaged d = new DEFManaged(); // managed wrapper for our COM object

var t = typeof(DEFManaged);
object[] args = new object[1]; // array which will contain all method arguments
args[0] = data; // data is the first argument, i.e. first element of args array

ParameterModifier[] pms = new ParameterModifier[1];
ParameterModifier pm = new ParameterModifier(1);
pm[0] = true; // pass the 1st argument by reference
pms[0] = pm;  // add pm to the array of modifiers 

// invoke CallFunction by name via IDispatch interface
var ret = t.InvokeMember("CallFunction", System.Reflection.BindingFlags.InvokeMethod, null, d, args, pms, null, null);
Console.Out.WriteLine("Result = " + ret); 
```

正如原始答案中所建议的，我将其制成`DEFManaged`接口上的扩展方法，因此托管包装器的用户可以简单地直接调用扩展方法并为他们处理反射。

# ruby - 以编程方式从 OAuth 获取 access_token - 使用 JIRA-Ruby gem

> ID：15128006
> 
> 赞同：1
> 
> 时间：2013-02-28T05:15:17.480
> 
> 标签：ruby, session, oauth, jira

我正在尝试编写一个 JIRA-ruby 脚本（只能从命令行使用）来标记一些 JIRA 问题自动关闭。

[我从这里](https://github.com/trineo/jira-ruby/blob/master/example.rb)借了一个例子，因为我使用的是“jira-ruby”gem。

这可行，但是它会弹出一个浏览器，要求您单击“允许”以获取 access_token。我想以编程方式执行此操作，但我不认为 API 是为此目的而构建的。由于 access_token 每次都在变化，并且这个脚本会在一个 cronjob 中定期运行，所以我们需要有一种方法来做到这一点。知道我们还有什么其他方法可以做到这一点吗？

```
require 'jira'

@jira = JIRA::Client.new({:site => 'http://localhost:2990', :context_path => '/jira', :consumer_key => 'test-jira', :private_key_file => "rsakey.pem"})

if ARGV.length == 0
  # If not passed any command line arguments, open a browser and prompt the
  # user for the OAuth verifier.
  request_token = @jira.request_token
  puts "Opening #{request_token.authorize_url}"
  system "open #{request_token.authorize_url}"

  puts "Enter the oauth_verifier: "
  oauth_verifier = gets.strip

  access_token = @jira.init_access_token(:oauth_verifier => oauth_verifier)
  puts "Access token: #{access_token.token} secret: #{access_token.secret}"
elsif ARGV.length == 2
  # Otherwise assume the arguments are a previous access token and secret.
  access_token = @jira.set_access_token(ARGV[0], ARGV[1])
else
  # Script must be passed 0 or 2 arguments
  raise "Usage: #{$0} [ token secret ]"
end

# Show all projects
projects = @jira.Project.all

projects.each do |project|
  puts "Project -> key: #{project.key}, name: #{project.name}"
end
issue = @jira.Issue.find('DEMO-1')
puts issue 
```

我知道有一种方法可以使用长寿命访问令牌，但如果 Jira 支持它，则不会真正使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T13:13:11.190

起初我使用的是 jira-ruby gem，但我发现性能很糟糕。我最终只使用 curl 代替，因为我只需要要求不那么臃肿的 JSON gem。让您的 Jira 管理员创建一个永远不会更改具有管理员权限的密码的用户，然后执行以下操作以找到“DEMO-1”

```
require 'json'

username = "admin"
password = "abc123"

issue = JSON.parse(%x[curl -u #{username}:#{password} \"http://jira/rest/api/latest/issue/DEMO-1\"]) 
```

这是[Jira REST API 文档的链接](https://docs.atlassian.com/jira/REST/)，只需选择您正在使用的相同版本的 Jira。这将绕过 oauth 和弹出窗口的任何问题。

# java - 无法弄清楚正则表达式问题

> ID：15128009
> 
> 赞同：1
> 
> 时间：2013-02-28T05:15:55.843
> 
> 标签：java, regex, exception, illegalstateexception

我正在尝试提取标题元素中的文本并忽略其他所有内容。

我看过这些文章，但它们似乎没有帮助：\
[正则表达式提取方括号之间的文本](https://stackoverflow.com/questions/2403122/regular-expression-to-extract-text-between-square-brackets)
[Java Java 正则表达式中的字符串模式匹配以](https://stackoverflow.com/questions/7938033/string-pattern-matching-in-java)
[从 HTML 锚 (<a>...</a >) 标签](https://stackoverflow.com/questions/4628715/java-regex-to-get-the-text-from-html-anchor-a-a-tags)

主要问题是我在尝试破解我自己的代码时无法理解响应者在说什么。

这是我通过阅读[Pattern 文章](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)中的 Java API 所获得的。

```
<title>(.*?)</title> 
```

这是我返回标题的代码。

```
String title = null;
Matcher match = Pattern.compile("[<title>](.*?)[</title>]").matcher(this.webPage);
try{
    title = match.group();
}
catch(IllegalStateException e)
{
    e.printStackTrace();
} 
```

我收到了 IllegalStateException，它是这样说的：

```
java.lang.IllegalStateException: No match found
    at java.util.regex.Matcher.group(Matcher.java:485)
    at java.util.regex.Matcher.group(Matcher.java:445)
    at BrowserModal.getWebPageTitle(BrowserModal.java:21)
    at BrowserTest.main(BrowserTest.java:7) 
```

第 21 行将是“title = match.group();”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:18:38.050

[领先的 Java HTML 解析器的优缺点是什么？](https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers)列出了一堆 HTML 解析器。将您的 HTML 解析为 DOM，然后用于`getElementsByClassName("title")`获取标题元素，并通过查看应该是文本节点的子节点来获取文本内容。

* * *

> ```
> title = match.group(); 
> ```

这是失败的，因为`group()`返回了整个匹配的文本。 `group(1)`将只返回第一个括号组的内容。

* * *

> ```
> [<title>](.*?)[</title>] 
> ```

方括号只是打破它。 `[<title>]`将匹配任何单个字符，即尖括号或单词“title”中的字母。

```
<title>(.*?)</title> 
```

更好，但只会匹配一行中的标题（因为`.`默认情况下不匹配换行符，并且不会匹配诸如

```
<title lang=en>Foo</title> 
```

它也将无法在 HTML 中正确找到标题，例如

```
<html>
<head>
<!-- <title>Old commented out title</title> -->
<title>Spiffy new title</title> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T05:21:47.713

试试这个：-

```
 String title = null;
        String subjectString = "<title>TextWithinTags</title>";
        Pattern titleFinder = Pattern.compile("<title[^>]*>(.*?)</title>", Pattern.DOTALL | Pattern.CASE_INSENSITIVE);
        Matcher regexMatcher = titleFinder.matcher(subjectString);
        while (regexMatcher.find()) {
            title = regexMatcher.group(1);
        } 
```

**编辑：- 正则表达式解释：-**

**[^>]*** :- 任何东西`>`都可以接受。这是因为我们可以在标签中拥有属性。

**(.*?)** :-`Dot`表示除换行符以外的任何字符。`*?`表示重复任意次数，但尽可能少。

有关正则表达式的更多详细信息，请查看[此](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T05:30:05.643

这仅在一行 java 代码中获得了标题：

```
String title = html.replaceAll("(?s).*<title>(.*)</title>.*", "$1"); 
```

这个正则表达式假定 HTML 是“简单的”，并且使用“DOTALL”开关`(?s)`（这意味着点也匹配换行符），它将适用于多行输入，甚至是多行标题。

# android - 检测触摸事件导致崩溃

> ID：15128013
> 
> 赞同：1
> 
> 时间：2013-02-28T05:16:22.943
> 
> 标签：android, swipe-gesture

当我为我的应用程序实现触摸事件时，我遇到了崩溃。我想为我的应用程序实现滑动功能。这是我的代码：

**Guetures实现：**

```
package com.example.EventsView;

import android.app.Activity;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;

public class GuesterFilter extends SimpleOnGestureListener{

public final static int SWIPE_UP    = 1;
public final static int SWIPE_DOWN  = 2;
public final static int SWIPE_LEFT  = 3;
public final static int SWIPE_RIGHT = 4;

public final static int MODE_TRANSPARENT = 0;
public final static int MODE_SOLID       = 1;
public final static int MODE_DYNAMIC     = 2;

private final static int ACTION_FAKE = -13; //just an unlikely number
private int swipe_Min_Distance = 100;
private int swipe_Max_Distance = 350;
private int swipe_Min_Velocity = 100;

private int mode      = MODE_DYNAMIC;
private boolean running = true;
private boolean tapIndicator = false;

private Activity context;
private GestureDetector detector;
private SimpleGestureListener listener;

public GuesterFilter(Activity context,SimpleGestureListener sgl) {

 this.context = context;
 this.detector = new GestureDetector(context, this);
 this.listener = sgl; 
}

public void onTouchEvent(MotionEvent event){

  if(!this.running)
 return;  

  boolean result = this.detector.onTouchEvent(event); 

  if(this.mode == MODE_SOLID)
event.setAction(MotionEvent.ACTION_CANCEL);
  else if (this.mode == MODE_DYNAMIC) {

 if(event.getAction() == ACTION_FAKE) 
   event.setAction(MotionEvent.ACTION_UP);
    else if (result)
   event.setAction(MotionEvent.ACTION_CANCEL); 
 else if(this.tapIndicator){
  event.setAction(MotionEvent.ACTION_DOWN);
  this.tapIndicator = false;
 }

     }
          //else just do nothing, it's Transparent
     }

     public void setMode(int m){
      this.mode = m;
     }

     public int getMode(){
      return this.mode;
     }

     public void setEnabled(boolean status){
      this.running = status;
     }

  public void setSwipeMaxDistance(int distance){
   this.swipe_Max_Distance = distance;
  }

  public void setSwipeMinDistance(int distance){
   this.swipe_Min_Distance = distance;
  }

  public void setSwipeMinVelocity(int distance){
   this.swipe_Min_Velocity = distance;
  }

  public int getSwipeMaxDistance(){
   return this.swipe_Max_Distance;
  }

  public int getSwipeMinDistance(){
   return this.swipe_Min_Distance;
  }

  public int getSwipeMinVelocity(){
       return this.swipe_Min_Velocity;
  }

  @Override
  public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
    float velocityY) {

   final float xDistance = Math.abs(e1.getX() - e2.getX());
   final float yDistance = Math.abs(e1.getY() - e2.getY());

   if(xDistance > this.swipe_Max_Distance || yDistance > this.swipe_Max_Distance)
    return false;

   velocityX = Math.abs(velocityX);
        velocityY = Math.abs(velocityY);
         boolean result = false;

   if(velocityX > this.swipe_Min_Velocity && xDistance > this.swipe_Min_Distance){
    if(e1.getX() > e2.getX()) // right to left
     this.listener.onSwipe(SWIPE_LEFT);
    else
     this.listener.onSwipe(SWIPE_RIGHT);

    result = true;
   }
   else if(velocityY > this.swipe_Min_Velocity && yDistance > this.swipe_Min_Distance){
    if(e1.getY() > e2.getY()) // bottom to up 
     this.listener.onSwipe(SWIPE_UP);
    else
     this.listener.onSwipe(SWIPE_DOWN);

    result = true;
   }

    return result;
  }

      @Override
       public boolean onSingleTapUp(MotionEvent e) {
        this.tapIndicator = true;
        return false;
       }

       @Override
       public boolean onDoubleTap(MotionEvent arg0) {
        this.listener.onDoubleTap();;
        return true;
       }

       @Override
       public boolean onDoubleTapEvent(MotionEvent arg0) {
        return true;
      }

       @Override
  public boolean onSingleTapConfirmed(MotionEvent arg0) {

   if(this.mode == MODE_DYNAMIC){        // we owe an ACTION_UP, so we fake an       
      arg0.setAction(ACTION_FAKE);      //action which will be converted to an ACTION_UP      later.                                    
      this.context.dispatchTouchEvent(arg0);  
   }   

   return false;
  }

     static interface SimpleGestureListener{
      void onSwipe(int direction);
      void onDoubleTap();
  }

 } 
```

**查看活动实施：**

```
package com.example.EventsView;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.Window;
import android.view.WindowManager;  
import android.widget.Toast;

import com.example.mobilefit.GuesterFilter.SimpleGestureListener;

public class BeginYourWorkout  extends Activity implements SimpleGestureListener
{
    private GuesterFilter detector; 
    protected void onCreate(Bundle savedInstanceState)
    {
         requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.eventsView);
    }

     public boolean dispatchTouchEvent(MotionEvent me)

     { 
        this.detector.onTouchEvent(me);
      return super.dispatchTouchEvent(me); 

     }

    @Override
public void onSwipe(int direction) 
{
      String str = "";

      switch (direction) {

      case GuesterFilter.SWIPE_RIGHT : str = "Swipe Right";
                                               break;
      case GuesterFilter.SWIPE_LEFT :  str = "Swipe Left";
                                                     break;
      case GuesterFilter.SWIPE_DOWN :  str = "Swipe Down";
                                                     break;
      case GuesterFilter.SWIPE_UP :    str = "Swipe Up";
                                                     break;

      } 
       Toast.makeText(this, str, Toast.LENGTH_SHORT).show();
     }
@Override
public void onDoubleTap()
{
    Toast.makeText(this, "Double Tap", Toast.LENGTH_SHORT).show(); 
}
 public boolean onSingleTapUp(MotionEvent e) 
 {
     Toast.makeText(this, "Double Tap", Toast.LENGTH_SHORT).show(); 
      return false;
}
} 
```

**日志错误：**

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at com.example.myPackage.EventsView.dispatchTouchEvent(EventsView.java:27)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
at android.view.View.dispatchPointerEvent(View.java:7419)
at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
at android.os.MessageQueue.nativePollOnce(Native Method)
at android.os.MessageQueue.next(MessageQueue.java:125)
at android.os.Looper.loop(Looper.java:124)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:26:56.853

`public GuesterFilter(Activity context,SimpleGestureListener sgl)`可能永远不会被调用。

`this.context`至少必须调用它来初始化。

试试这个代码：

```
public class BeginYourWorkout  extends Activity implements SimpleGestureListener
{
    private GuesterFilter detector; 
    protected void onCreate(Bundle savedInstanceState)
    {
         requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.eventsView);

        this.detector = new GuesterFilter(this, this);
    }

    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:22:46.177

你永远不会用 new 实例化一个检测器。

# actionscript - 影片剪辑：附加/删除影片剪辑 VS 隐藏和显示移动剪辑

> ID：15128015
> 
> 赞同：0
> 
> 时间：2013-02-28T05:16:37.923
> 
> 标签：actionscript, hide, show

我有这个经常创建的工具提示。什么是合适的动作礼仪？

A. 在需要时创建和删除工具提示移动剪辑？

或者

B. 在需要时隐藏和显示工具提示动画片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:10:32.217

有了这些 A 和 B，答案就是 B，因为多次创建然后删除对象会在内存中创建大量垃圾，最终导致垃圾收集器调用，从而降低 SWF 的性能。您可以轻松地使用单个工具提示 MC，只需在显示之前用与新鼠标坐标对应的信息填充它。

还有另一个问题，不像你的那么简单，关于如何通过`visible`属性或通过`addChild()`和`removeChild()`（仅限 AS3）隐藏和显示影片剪辑。如果您使用的是 AS2 或 AS1，请使用`visible`属性来隐藏和显示您的工具提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:06:01.933

在 Actionscript 中有三种隐藏内容的方法：Alpha、可见和删除子项。

**Apha：**如果您将 alpha 设为零，则渲染器始终会到达此 displayObject 并将其渲染为 alpha 零。所以对象总是被渲染你只是看不到它。

**Visible == false**在这种情况下，该对象仍然存在于您的显示列表中。所以渲染器来到了对象。看到它的属性是假的并离开它，但它仍然存在于显示列表中。

**removeChild**这意味着您要从显示列表中删除对象。这意味着渲染器甚至不必检查它。这使它成为最快的选择。

addChild 不像可见检查那样占用那么多计算能力。我相信你可以找到这方面的基准。

如果您的屏幕上没有很多对象，并且工具提示每秒钟都在那里，那么我认为可见的是错误的。在所有其他情况下，请使用第三个选项。

附带说明一下，我发现使用 toolTipManager 管理它们总是更容易。确保您在屏幕上有一个工具提示的类，因为通常用户只使用一个工具提示。所以这让我的事情变得更容易。我总是创建必要的工具提示，并在需要时将它们添加到显示列表中并删除它们。（不重新创建它们）同时在舞台上只有一个工具提示。

# vb.net - vb.net httpweb请求登录EmpireAvenue.com

> ID：15128016
> 
> 赞同：0
> 
> 时间：2013-02-28T05:16:52.527
> 
> 标签：vb.net, httpwebrequest

这让我发疯。我知道我必须接近这一点。据我所知，我的请求与真实请求匹配，只是 cookie 有点不同。我似乎错过了谷歌分析。不确定这是否是问题所在。我像我应该的那样被重定向，但在重定向页面上它要求我再次登录。任何帮助表示赞赏。这是我的代码：

```
Private Function eaLogin(ByVal ticker As String, ByVal password As String)

    Try

        ServicePointManager.Expect100Continue = False
        Dim request As HttpWebRequest = httpWebRequest.Create("http://www.empireavenue.com")
        request.Credentials = CredentialCache.DefaultCredentials
        request.CookieContainer = cookieJar
        Dim response As HttpWebResponse = request.GetResponse()
         Dim dataStream As Stream = response.GetResponseStream()
        Dim reader As New StreamReader(dataStream)
        Dim responseFromServer As String = reader.ReadToEnd()
        reader.Close()
        response.Close()

        Dim session As String = ""

        ServicePointManager.Expect100Continue = False
        'Set the initial parameters
        Dim UserID As String = ticker ' Username
        Dim PWord As String = HttpUtility.UrlEncode(password) ' Password
        Dim domain As String = "https://www.empireavenue.com/user/login/do"
        Dim encoding As New System.Text.ASCIIEncoding

        ' Use the appropriate HTML field names to stuff into the post header
        Dim PostData As String = _
            "login_username=" & ticker & _
            "&login_password=" & PWord

        Dim Data() As Byte = encoding.GetBytes(PostData)

        ' Initialise the request
        Dim LoginReq As Net.HttpWebRequest = Net.WebRequest.Create(domain) ' Login location taken from the form action
        With LoginReq
            .KeepAlive = True
            .Method = "POST"
            ' Note: if the page uses a redirect if will fail
            .AllowAutoRedirect = False
            .ContentType = "application/x-www-form-urlencoded"
            .ContentLength = Data.Length
            ' Set empty container
            .CookieContainer = cookieJar
            .Referer = "http://www.empireavenue.com/"
            .UserAgent = userAgent
            .Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            .Host = "www.empireavenue.com"
        End With

        ' Add the POST data
        Dim SendReq As IO.Stream = LoginReq.GetRequestStream
        LoginReq.Headers.Add("Accept-Language", "en-US,en;q=0.5")
        LoginReq.Headers.Add("Accept-Encoding", "gzip, deflate")

        SendReq.Write(Data, 0, Data.Length)
        SendReq.Close()

        ' Obtain the response
        Dim LoginRes As Net.HttpWebResponse = LoginReq.GetResponse()

        ' Retreive the headers from the request (e.g. the location header)

        Dim Redirect As String = LoginRes.Headers("Location")
        ' Add any returned cookies to the cookie collection
        cookieJar.Add(LoginRes.Cookies)

        ' Move to the redirected page as a GET request...
        Dim newUrl As String = ""
        If Not (Redirect Is Nothing) Then
            If Redirect.StartsWith("http://") Then
                newUrl = Redirect
            Else
                newUrl = "https://www.empireavenue.com" & Redirect
            End If

            LoginReq = Net.WebRequest.Create(newUrl)
            With LoginReq
                .KeepAlive = False
                .Method = "GET"
                .ContentType = "application/x-www-form-urlencoded"
                .AllowAutoRedirect = True
                .CookieContainer = cookieJar
            End With

            ' Perform the navigate and output the HTML
            LoginRes = LoginReq.GetResponse()
            Dim sReader As IO.StreamReader = New IO.StreamReader(LoginRes.GetResponseStream)
            Dim HTML As String = sReader.ReadToEnd

            If HTML.Contains(ticker) Then
                MessageBox.Show("yay!")
                Return True
            Else
                MessageBox.Show("no!")
                Return False
            End If
        Else
            MessageBox.Show("no too!")
            Return False
        End If

    Catch ex As Exception

        MessageBox.Show(ex.Message.ToString)
        Return False

    End Try

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:30:24.980

由于工作限制，我无法在 Empirevenue 上尝试，但试试这个：

```
Dim tempCookies As CookieContainer

ServicePointManager.Expect100Continue = False
Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("https://www.empireavenue.com/user/login/do"), HttpWebRequest)
Dim postData As String = "login_username=" & ticker & "&login_password=" & PWord
Dim encoding As New UTF8Encoding
Dim byteData As Byte() = encoding.GetBytes(postData)
postReq.Method = "POST"
postReq.KeepAlive = True
postReq.CookieContainer = tempCookies
postReq.ContentType = "application/x-www-form-urlencoded"
postReq.Referer = "http://www.empireavenue.com/"
postReq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20120427 Firefox/15.0a1"
postReq.ContentLength = byteData.Length
Dim postreqstream As Stream = postReq.GetRequestStream()
postreqstream.Write(byteData, 0, byteData.Length)
postreqstream.Close()
Dim postresponse As HttpWebResponse
postresponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
tempCookies.Add(postresponse.Cookies)
logincookie = tempCookies
Dim postreqreader As New StreamReader(postresponse.GetResponseStream())
Dim thepage As String = postreqreader.ReadToEnd 
```

希望它对你有用

# c# - 将 DataGrid 绑定到 ObservableCollection 正在创建 2 个不同的 DataGrid 实例，仅显示默认值

> ID：15128020
> 
> 赞同：0
> 
> 时间：2013-02-28T05:17:19.513
> 
> 标签：c#, wpf, data-binding, observablecollection, datacontext

数据绑定按我的意图工作，有点......我现在遇到的真正问题是我认为是我的用户控件的 2 个不同实例，但只有我实现的原始调试列表显示。

简而言之，我正在构建 2 个在技术上绑定到数据网格的列表，我在默认构造函数中创建的默认调试列表，然后是我创建的绑定到数据网格的真实列表。

每次我单击带有数据网格的用户控件时，默认构造函数都会在我的调试列表中添加另一行并将其显示在屏幕上。

每次我单击在单独的用户控件上构建选定选项列表的按钮时，我都可以看到我的选项添加到我一直在创建的选项列表中，并在技术上将其设置为数据网格的数据上下文，相同默认调试列表的方式，除非当我单击返回到数据网格用户控件时，默认构造函数再次运行，将另一行添加到我的调试列表中，并显示正在构建的调试列表。

这是该类的副本，其中包含我添加的几行以帮助调试问题。

```
 public partial class QuotePreview : UserControl
{
    private SelectionList _selectionList;
    private SelectionList temp;

    public QuotePreview()
    {
        InitializeComponent();
        _selectionList = (SelectionList)this.DataContext;
    }

    private void QuotePreview_Loaded(object sender, RoutedEventArgs e)
    {

        //Adds item to Debugging list
        _selectionList.SelectedOptions.Add(
            new Selection
            {
                ModelNumber = "this",
                Description = "really",
                Price = "sucks"
            });

    }

    public QuotePreview(SelectionList selectedOptions)
    {

        InitializeComponent();
        _selectionList = (SelectionList)this.DataContext;

        temp = selectedOptions;

        //The list I am actually trying to display
        _selectionList.AddRange(selectedOptions);

        QuotePreview_Loaded();
    }

    private void QuotePreview_Loaded()
    {
        foreach (var options in temp.SelectedOptions)
        {
            _selectionList.SelectedOptions.Add(options);
        }

        QuotePreviewDataGrid.ItemsSource = _selectionList.SelectedOptions;
    }
} 
```

每次单击用户控件/选项卡时都会调用默认构造函数的实现。发生这种情况时，_selectionList 被设置为用户控件的数据上下文，然后是 Loaded Event，它在我的数据网格中添加了一行。

在另一个用户控件中，我选择要添加到数据网格用户控件的选项，单击一个按钮，该按钮创建要添加的选项列表并调用我编写的自定义构造函数。构造函数完成后，它会调用我为狗屎和傻笑创建的自定义 Loaded Event 方法，该方法将选定的选项添加到我的 _selectionList。

现在，一旦我再次单击数据网格用户控件，它就会经历整个默认过程，并添加另一个默认行。

如果我返回一个选项卡并再次说我想要这些选项并返回数据网格，它会再次执行默认过程并添加另一个默认行。

最有趣的是我可以看到两个 selectionLists 的构建，因为我没有清除进程之间的内容。我看到了我要显示的选项的列表构建和默认选项构建的列表构建...

哦，还有，SelectionList 确实实现了 ObservableCollection

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:39:01.190

我终于想出了解决问题的办法。

```
public static class QuotePreview
{
    public static ObservableCollection<PurchasableItem> LineItems { get; private set; }

    static QuotePreview()
    {
        LineItems = new ObservableCollection<PurchasableItem>();
    }

    public static void Add(List<PurchasableItems> selections)
    {
        foreach (var selection in selections)
        {
            LineItems.Add(selection);
        }
    }

    public static void Clear()
    {
        LineItems.Clear();
    }
}

public class QuoteTab : TabItem
{
    public ObservableCollection<PurchasableItem> PreviewItems { get; private set; }

    public QuoteTab()
    {          
        Initialize()

        PreviewItems = QuotePreview.LineItems;

        DataGrid.ItemSource = PreviewItems
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:44:40.223

我不完全按照您的要求进行操作，但是只要需要加载，加载事件就会触发，并且在您在视图之间切换的情况下，TabControl 在需要之前不会呈现其内容！

```
 bool _isDefaultItemAdded = false
private void QuotePreview_Loaded(object sender, RoutedEventArgs e)
{
    if(!_isDefaultItemAdded)
    {
       //Adds item to Debugging list
         _selectionList.SelectedOptions.Add(
        new Selection
        {
            ModelNumber = "this",
            Description = "really",
            Price = "sucks"
        });
        _isDefaultItemAdded = true;
    }

} 
```

# git - Git 存储库损坏

> ID：15128022
> 
> 赞同：0
> 
> 时间：2013-02-28T05:17:23.657
> 
> 标签：git, version-control

我试图学习如何使用 Git 进行本地版本控制。我使用 Xcode 作为我的 IDE。当我发现有 3000 个未暂存的更改时，我尝试添加我的最新更改。我在不知不觉中上演了他们。然后我去了我的项目根目录，在里面找到相同的目录，里面有相同的文件等等。我删除了它，并且由于暂存文件丢失，存储库进入了损坏状态。我实际上应该做什么，这怎么可能发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:01:19.677

如果您删除了该`.git`文件夹，则您删除了实际的本地存储库克隆。挽救你的资源（希望你在某个地方有一个好的版本）并从头开始用它们初始化一个新的存储库。

* * *

如果您想创建一个备份存储库，当您已经有一个可以工作的存储库时，这可能是最简单的方法，在确保没有要保留的未提交更改（bash 命令，但即使您不要使用 bash，我敢肯定）：

```
cd work/myproject
cd ../..
mkdir backup-upstream
cd backup-upstream
git clone --no-checkout ../work/myproject 
```

然后，您将不再需要直接触摸该备份。现在你可以设置你当前的工作/项目来遵循它，但是只做一个新的克隆是最简单且最不容易出错的，从上面继续：

```
cd ../work
mv myproject myproject-backup
git clone ../backup-upstream/myproject
cd myproject 
```

现在检查这些文件的差异，看看实际发生了什么变化可能会很有启发性：

```
cat .git/config
cat ../myproject-backup/.git/config 
```

然后你`work/myproject`照常工作，当你想创建备份时，只需`git push`. backup-upstream 下的克隆应该被认为是任何远程上游 repo，例如来自 github，它实际上是从本地文件系统访问并不重要。请注意，如果您创建新分支，则需要单独推送它们，请参阅：[如何将本地 Git 分支复制到远程仓库](https://stackoverflow.com/questions/805222/how-to-copy-a-local-git-branch-to-a-remote-repo)

# css - 用 Class 定义 TH，这可能吗？

> ID：15128023
> 
> 赞同：6
> 
> 时间：2013-02-28T05:17:23.747
> 
> 标签：css

拿起一个朋友的 CSS 项目来帮忙。我不是CSS专家，这里是：

我似乎找不到直接的答案。我正在创建一个表，我想要 2 种类型的 TH 类在表中使用不同的背景颜色。

（我也可能需要一些关于 DIV 标签的帮助）

我正在使用的 css 是这样的，有人可以告诉我我做错了什么吗？

```
<div class="one"><div class="two">
<table>
<TR><TH> one color </TH></TR>
<TR><TH class="color">differnet color </TH></TR>
</table></div></div>

.one .two th {
padding: 5px 10px;
border: 1px solid #d9d9d9;
background: #000000;
}
.one .two th .color{
padding: 5px 10px;
border: 1px solid #d9d9d9;
background: #ffffff;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T05:18:33.857

删除和之间的`th`空间`.color`

否则，您将在`.color`内部寻找后代元素，而不是在其自身上寻找`th`类。`th`

# ios - 仅包含特定类型对象的数组

> ID：15128024
> 
> 赞同：0
> 
> 时间：2013-02-28T05:17:34.770
> 
> 标签：ios, objective-c

我想要一个只能包含某种类型对象的数组。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:21:04.300

你不能做这个。An`NSMutableArray`有`addObject`方法，其参数是一个 id，可以是任何基于 NSObject 的对象。

如果您想保护您的数组免于意外填充来自其他类的错误数据，请将其设为私有 ivar 并使用公共 @property 或方法访问它。公共方法将在实际调用之前检查调用者试图添加到数组中的对象的类`addObject`。

# javascript - queryString 包含多行阿拉伯文本

> ID：15128025
> 
> 赞同：1
> 
> 时间：2013-02-28T05:17:36.937
> 
> 标签：javascript, jquery, asp.net-mvc

我需要从带有阿拉伯语文本的 queryString 的 javascript 调用 asp.net 页面。上网时显示错误，但在本地服务器上运行正常。当阿拉伯语值较小时，当阿拉伯语文本位于多行时，就会出现问题。

```
 $.ajax({
        url: "Empty/emptyGovt2.aspx",
        data: "arKeyword="+encodeURIComponent($("#txt_arKeywords").val(),
        success: function(data) {    
             diaL("Details Updated Successfully");                  

         },
          error: function(){
              diaL('Error Occurred');
          }
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:21:10.350

不要`get`与长而复杂的数据一起使用`post`

```
$.ajax({
        url: "Empty/emptyGovt2.aspx",
        type:"POST",
        data: {
            "arKeyword" :$("#txt_arKeywords").val(),
            "OrgId" : newParentOfficeID 
             // etc
           },
        success: function(data) {    
             diaL("Details Updated Successfully");                  

         },
          error: function(){
              diaL('Error Occurred');
          }
 }); 
```

在 php 上，您可以访问值`$_POST['OrgId']`等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:35:19.387

我建议您使用`POST`and `dataType:'json'`or `'text'`：

```
$.ajax({
    url: "Empty/emptyGovt2.aspx",
    type: 'POST',
    data: {"arKeyword" : $("#txt_arKeywords").val()}, //<----json objects
    dataType: 'json',                                 //<----dataType
    success: function(data) {  
      // retriev json response 
       var respData = $.parseJSON(data);
       $.each(respData, function(i, item){
          console.log(item);
       });

         diaL("Details Updated Successfully");                  

     },
      error: function(){
          diaL('Error Occurred');
      }
 }); 
```

并确保从`'Empty/emptyGovt2.aspx'`

# matlab - 偏度函数与偏度公式结果的区别

> ID：15128029
> 
> 赞同：1
> 
> 时间：2013-02-28T05:17:43.913
> 
> 标签：matlab

考虑矩阵

```
c =

 1     2
 3     4

m = 2;
n = 2;
% mean
% sum1 = uint32(0);
b4 = sum(c);
b5 = sum(b4');
c5 = b5 / ( m * n )

% standard deviation
sum2 = uint32(0);

for i = 1 : m
   for j = 1 : n
     b = ( double(c(i,j)) - c5 ) ^ 2 ;
     sum2 = sum2 + b ;
   end
end
sum3 = sum2 / ( m * n );
std_dev = sqrt(double(sum3))

% skewness

sum9 = 0;
for i = 1 : m
    for j = 1 : n
        skewness_old = ( ( double(c(i,j)) - c5 ) / ( std_dev) )^ 3 ;
        sum9 = sum9 + skewness_old ;
    end
end
skewness_new = sum9 / ( m * n ) 
```

偏度结果为 0

如果我使用 matlab 函数偏度，

```
skewness(c) 
```

c =

```
 1     2
 3     4 
```

> > 偏度(c)

答案=

```
 0     0 
```

为什么函数偏度返回两个 0，而公式只返回一个 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:31:12.387

默认情况下， MATLAB 函数[SKEWNESS](http://www.mathworks.com/help/stats/skewness.html)分别计算每列的偏度。对于整个矩阵做`skewness(c(:))`.

# java - 每次调用 query() 时 JdbcTemplate 是否都会创建一个新连接？

> ID：15128035
> 
> 赞同：6
> 
> 时间：2013-02-28T05:18:12.240
> 
> 标签：java, mysql

在下面的示例中，JdbcTemplate 是创建两个连接还是一个？

```
public class MyDao {

     private JdbcTemplate jdbcTemplate;

     public List<Data1> getData1() {
          return jdbcTemplate.query(mySql, myParams, myCallback);
     }

     public List<Data2> getData2() {
          jdbcTemplate.query(mySql2, myParams2, myCallback2);
     }
}

public class Main {
    public static void main(String[] args) {
         MyDao dao = new MyDao();
         List<Data1> d1 = dao.getData1();
         List<Data2> d2 = dao.getData2();
         doStuff(d1, d2);
    }
} 
```

也就是说，它是否重用了第一个查询的连接？我们假设它是使用基本数据源（不是池数据源）构建的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T05:26:04.647

这取决于 JdbcTempate 的 DataSource。如果您提供了一个连接池，例如 Apache commons-dbcp，那么 DBCP 将尽最大努力重用连接。如果您使用 Spring JDBC 的 DriverManagerDataSource，则将在每个 JdbcTemplate.query 调用上创建/关闭一个新连接。

# sql - SSIS DataFlowTask DefaultBufferSize 和 DefaultBufferMaxRows

> ID：15128044
> 
> 赞同：5
> 
> 时间：2013-02-28T05:18:49.833
> 
> 标签：sql, sql-server-2008, ssis, bids, dataflowtask

我有一个使用数据流任务将记录从 Oracle db 提取到我们的 SQL 的任务。这个包每天运行大约 45 分钟。这个包将刷新大约 15 个表。除了一个，其他都是增量更新。所以几乎每个任务都运行 2 到 10 分钟。

完全更换的一个包运行时间长达 25 分钟。我想调整这个数据流任务以更快地运行。

表中只有 400k 行。我确实阅读了一些关于 DefaultBufferSize 和 DefaultBufferMaxRows 的文章。我有以下疑问。

1.  如果我可以将 DefaultBufferSize 设置为 100 MB，是否有任何地方可以查看或分析我可以提供多少。

2.  DefaultBufferMaxRows 设置为 10k。即使我给了 50k 并且我为 DefaultBufferSize 提供了 10 MB，如果它只能容纳大约 20k，那么 SSIS 会做什么。只是忽略那些 30k 记录或者它仍然会拉所有那些 50k rocords（假脱机）？

3.  我可以使用日志记录选项来设置适当的限制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:44:14.607

作为一般做法（如果你有足够的内存），较少数量的大缓冲区比大量的小缓冲区更好，但直到你有分页到磁盘的时候（这很糟糕，原因很明显）

要对其进行测试，您可以记录事件 BufferSizeTuning，它将显示每个缓冲区中有多少行。

此外，在开始调整缓冲区大小之前，您可以做出的最重要的改进是通过删除不需要的列和适当地配置数据类型来减小每行数据的大小。

# python - 使用 Flask 时如何创建模板文件夹？

> ID：15128046
> 
> 赞同：0
> 
> 时间：2013-02-28T05:18:54.377
> 
> 标签：python, frameworks, web, flask

[http://flask.pocoo.org/docs/quickstart/#a-minimal-application](http://flask.pocoo.org/docs/quickstart/#a-minimal-application)

当“渲染模板”下的说明指示您创建模板文件夹时，您究竟是在哪里制作的？在您的项目目录中？如何？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:23:11.860

如果您在粘贴的链接中进一步阅读，您会发现：

> Flask 将在模板文件夹中查找模板。因此，如果您的应用程序是一个模块，则此文件夹位于该模块旁边，如果它是一个包，则它实际上在您的包中：
> 
> 案例1：一个模块：

```
 /application.py
 /templates
     /hello.html 
```

> 案例2：一个包：

```
 /application
     /__init__.py
     /templates
         /hello.html 
```

最常见的是案例 1 - 您只需创建一个名为的目录`templates`并在其中添加模板。没什么特别的。

# scala - 玩与检票口？

> ID：15128047
> 
> 赞同：-2
> 
> 时间：2013-02-28T05:18:55.050
> 
> 标签：scala, playframework, wicket

我打算在 scala 中开发一个 Web 应用程序。我是 scala 的新手，对可用的框架感到困惑。我应该去玩还是去检票口。我有一些使用 MVC 架构的经验。请解释我使用它们的优点和缺点。我可以将它们相互结合使用吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:14:54.707

Play 和 Wicket 都是具有可靠设计和出色、活跃且响应迅速的社区的框架。我在一个中型项目中使用了 Wicket，每当我在[Wicket 邮件列表](http://wicket.apache.org/help/email.html)上提出问题时，我几乎都能立即得到反馈。

两个框架之间的主要区别之一是它们处理*状态*的方式：Wicket 将状态存储在服务器上，而 Play 非常严格地遵循 REST“无状态”原则，支持客户端（或 URL）上的状态。

例如，考虑一个简单的 AJAX 计数器：

*   在典型的 Wicket 实现中（请参阅[Wicket Ajax 计数器示例](http://wicket.apache.org/learn/examples/ajaxcounter.html)），您会将计数器存储*在服务器上*（在 a 中`Model[Integer]`）。当您单击该链接时，将对服务器进行 AJAX 调用，其中模型被更新（即，计数器递增），并且更新后的计数器的 HTML 标记被发回并显示。
*   Play 实现很可能会将计数器存储*在客户端的网页上，并使用*[jQuery](http://jquery.org)之类的东西来更新计数器。

在服务器上存储状态有其优点（例如，程序员易于使用）和缺点（会话超时时状态丢失），因此根据您的业务需求，一种框架可能比另一种更适合。

# build - 希望在每次 CVS 更改时都在 Jenkins 中进行新构建，但每两天不超过一个构建

> ID：15128051
> 
> 赞同：0
> 
> 时间：2013-02-28T05:19:07.880
> 
> 标签：build, jenkins, schedule

如何安排时间来满足这个要求？

1.  如果最近两天有上一个版本，并且 CVS 发生了变化，那么下一个版本将在两天后从上一个版本开始
2.  如果 CVS 发生变化，并且之前的构建在两天前完成，请立即启动此构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:35:11.203

您需要一个自定义的“智能”触发器来构建。

我有类似的需求，我使用 Jenkins [ScriptTrigger](https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin)插件来执行一个“智能”shell 脚本，该脚本将评估条件并决定是否开始构建。

脚本中的示例逻辑：

1.  检查距离上次构建是否已过去两天
2.  如果是这样，请检查 VCS 与上次构建相比是否也发生了变化
3.  如果是这样，退出 0，并允许构建开始

我希望这有帮助。

# php - JQuery UI Dialog Ajax PHP在第二次提交时不起作用

> ID：15128052
> 
> 赞同：0
> 
> 时间：2013-02-28T05:19:10.937
> 
> 标签：php, jquery, jquery-ui-dialog

我有一个标准设置。我有一个提供数据的 php 页面。数据中有一些编辑链接。我的问题是，在我编辑一些数据后，第二次单击编辑链接时，我的 JQuery-UI 会在传递给它的 url 上打开，而不是填充 JQuery-UI.dialog。

**基本页面 Java (view.php)**

```
 var editParyAddress = $('#edit_party_address').dialog({
      autoOpen: false,
      width:'auto',
      modal: true,
      buttons: {
        'Save': function(){
          $.ajax({
            url: '/party_address/save.php',
            type: 'POST',
            data: $('#edit_party_address_form').serialize(),
            success: function(data){
              $.get('helper.php?function=partyaddress&id=<?php echo $_GET['id'];?>',function(data){$('#partyaddress').html(data);});
              //$('#edit_party_address').dialog('close');
              $('#edit_party_address').dialog("destroy").remove();
            }
          });
        }
      }
    });

    $('.edit_party_address').click(function(e){
      e.preventDefault();
      $.ajax({
        url: $(this).attr('href'),
        type: 'POST',
        success: function(data){
          editParyAddress.html(data);
          editParyAddress.dialog('open');
          return false;
        }
      });
    }); 
```

**将数据提供给 JQuery-UI.dailog (edit.php) 的 PHP 页面**

```
$sql="SELECT dbo.format_full_name(p.first_name,p.middle_name,p.last_name) name, dp.party_id, pa.id partyaddressid, pa.address1,pa.address2,pa.city,pa.state,pa.zip_code,pa.address_indicator_id,pa.is_active
FROM [".DB1."].[DBO].[party_address] pa
INNER JOIN debt_party dp on dp.party_id=pa.party_id
INNER JOIN party p on p.id=pa.party_id
where pa.id=".$_GET['party_address_id'];
$HTML='';
$conn =db_connect();
$stmt = sqlsrv_query($conn, $sql,array(),array( "Scrollable" => 'keyset' ));
if( $stmt === false) { error($_SERVER['PHP_SELF'],__FUNCTION__,__LINE__);return;}

$HTML= '<form name="edit_party_address_form" id="edit_party_address_form" style="width:100%" action="">';
if ($stmt===false) {return;}
if (sqlsrv_has_rows( $stmt )=== false){return;}
$row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC);
$HTML.='<fieldset>';
$HTML.='<ol>';
$HTML.='<li><label for="address_address1">Address 1:</label><input class="text-input" id="address1" name="address1" size="30" type="text" value="'.$row['address1'].'"></li>';
$HTML.='<li><label for="address_address2">Address 2:</label><input class="text-input" id="address2" name="address2" size="30" type="text" value="'.$row['address2'].'"></li>';
$HTML.='<li><label for="address_city">City:</label><input class="address" id="address_city" name="address_city" size="30" type="text" value="'.$row['city'].'"></li>';
$HTML.='<li><label for="address_state">State:</label><input class="state" id="address_state" name="address_state" maxlength="2" size="2" type="text" value="'.$row['state'].'"></li>';
$HTML.='<li><label for="address_zip_code">Zip Code:</label><input class="zip_code" id="address_zip_code" maxlength="10" name="address_zip_code" size="10" type="text" value="'.$row['zip_code'].'"></li>';
$HTML.='<li><label for="name">Indicator:</label>'.HTMLOptions(DB1,'dbo','address_indicator','id','name',$row['address_indicator_id']).'</li>';
$HTML.='<li><label for="is_active">Active:</label><input '.($row['is_active']==1? ' checked="checked"':'').' name="is_active" maxlength="2" size="2" type="checkbox" value="'.$row['is_active'].'"></li>';
$HTML.='<li><input id="party_address_id" name="party_address_id" type="hidden" value="'.$_GET['party_address_id'].'"></li>';
$HTML.='</ol>';

$HTML.='</fieldset>';
$HTML.='</form>';
sqlsrv_free_stmt( $stmt);
echo $HTML; 
```

**PHP 保存页面 (save.php)**

```
$sql="UPDATE party_address SET address1='".$_POST['address1']."',address2='".$_POST['address2']."'  WHERE id=".$_POST['party_address_id'];   

    $conn =db_connect();
    $stmt = sqlsrv_query($conn, $sql,array(),array( "Scrollable" => 'keyset' ));
    if( $stmt === false) { error($_SERVER['PHP_SELF'],__FUNCTION__,__LINE__);return;}
    sqlsrv_free_stmt( $stmt); 
```

当我单击如下所示的编辑链接时：`/party_address/edit.php?party_address_id=1468941`一切正常。一旦我提交了发布的表单更改，它就会更新数据库和 view.php 基本页面。提交更改后，第二次单击任何编辑链接时，该链接使用默认行为，浏览器地址更改为编辑链接。这只是显示了我的 view.php 页面的内部 HTML。它应该在 JQuery-UI.dialog 中打开`<div id="edit_party_address" title="Edit Party Address"></div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:22:19.523

我在我的 **Base Page Java (view.php)**中更改了两行， 为了清楚起见，我只是将它们留在这里评论。现在可以了！！！

```
var editParyAddress = $('#edit_party_address').dialog({
  autoOpen: false,  width:'auto',  modal: true,
  buttons: {
    'Save': function(){
      $.ajax({
        url: '/party_address/save.php',
        type: 'POST',
        data: $('#edit_party_address_form').serialize(),

        success: function(data){
          alert(data);
          $.get('helper.php?function=partyaddress&id=<?php echo $_GET['id'];?>',function(data){$('#partyaddress').html(data);});
          $('#edit_party_address').dialog('close');
          //$('#edit_party_address').dialog("destroy").remove();
        }
      });
    }
  }
});
// $('.edit_party_address').click(function(e){
$(document).on('click', '.edit_party_address', function (e) {
    e.preventDefault();
    $.ajax({
    url: $(this).attr('href'),
    type: 'POST',
    success: function(data){
      editParyAddress.html(data);
      editParyAddress.dialog('open');
      return false;
    }
  });
}); 
```

# wordpress - 禁用大写主题的响应式设计 - Wordpress

> ID：15128053
> 
> 赞同：0
> 
> 时间：2013-02-28T05:19:19.143
> 
> 标签：wordpress, responsive-design

我正在创建一个网站，我正在尝试禁用响应式设计功能。当我调整浏览器的大小时，有些事情会变得混乱，而且我对响应式设计编码没有经验。这是我网站的链接

[http://www.jiddrs.com](http://www.jiddrs.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:24:40.653

对此没有简单的答案，尤其是在不知道代码的情况下。看起来搜索栏的 CSS 不合适。Wordpress 是一个 CMS，它使用 PHP 从服务器传送内容。它在一个长期运行的条件语句列表上进行编译，这些条件语句根据需要提供内容。

响应式 CSS 由媒体查询完成。在您的主题文件夹中可能有一个样式表，标签为 responsive.css 或类似的东西。

媒体查询看起来像这样

```
@media screen and (max-width:640px) {
.classChange { style }
} 
```

# python - jython 单元测试

> ID：15128055
> 
> 赞同：2
> 
> 时间：2013-02-28T05:19:22.960
> 
> 标签：python, unit-testing, jython

我可以知道为什么这个测试失败了，即使函数实际上抛出了异常？

```
def testDateCreation(self):
   self.assertRaises(ValueError, datetime.date(2013, 2, 29)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:10:16.373

您要么必须使用[`assertRaises`](http://docs.python.org/2/library/unittest.html#unittest.TestCase.assertRaises)上下文管理器（如果运行 python 2.7）：

```
with self.assertRaises(ValueError):
    datetime.date(2013, 2, 29) 
```

或提供一个[`assertRaises`](http://docs.python.org/2/library/unittest.html#unittest.TestCase.assertRaises)可以调用的函数：

```
self.assertRaises(ValueError, lambda: datetime.date(2013, 2, 29)) 
```

*否则，在调用之前* 引发异常`assertRaises`，因此无法处理。

# ios - 支持 BOSH 的 ios XMPP 客户端库

> ID：15128060
> 
> 赞同：4
> 
> 时间：2013-02-28T05:19:50.377
> 
> 标签：ios, objective-c, xmpp, xmppframework

我正在为我的 iPad 应用程序寻找一个支持 BOSH 的 Objective C XMPP 客户端库。我遇到了 XMPPFramework，但我了解到它不支持 BOSH 还是支持？

任何人都可以指向某个库或者我如何使用具有 BOSH 支持的 XMPPFrameWork？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:39:19.580

我无法为我的项目使用 Jabber/XMPP 找到一个，所以我最终在我的项目中使用了[libstrophe](http://strophe.im)。它完美地工作，如果你需要一个 Objective-C 对象，你可以简单地用发送者和接收者包装方法调用。

# asp.net - 如何在silverlight应用程序中获取所有串口com

> ID：15128062
> 
> 赞同：1
> 
> 时间：2013-02-28T05:20:15.107
> 
> 标签：asp.net, silverlight-5.0

我有 vs 2012，我想要 2 获取计算机的所有串行端口，为此我编写了代码

```
 //  com = AutomationFactory.CreateObject("ComInterOp_SeeLevel828_Utility");
           com = AutomationFactory.GetObject("InteropComObjects.IO.Ports.SerialPort");
            dynamic count = com.GetDeviceCount();
            StringBuilder sb = new StringBuilder();

            List<dynamic> devices = new List<dynamic>();
            for (int i = 1; i <= 9; i++)
            {
                devices.Add("COM" + i);
            }

            for (int i = 0; i < count; i++)
            {
                devices.Add(com.GetDevice(i));

            }
            cmdSerial.ItemsSource = devices; 
```

但我在这条线上遇到了错误

```
com = AutomationFactory.GetObject("InteropComObjects.IO.Ports.SerialPort"); 
```

因为没有找到为指定 ProgID 注册的对象。

# windows - Github Windows 客户端合并失败

> ID：15128063
> 
> 赞同：0
> 
> 时间：2013-02-28T05:20:17.873
> 
> 标签：windows, github, git-merge

我们目前有 2 名开发人员在做一个项目，并使用 Github 和 Windows 版 Github-Client。

## 我们的 Github 分支：

1.  掌握
2.  pre_production（从主机克隆）
3.  dev_1（从主机克隆）
4.  dev_2（从主服务器克隆）

基本思想是，2个开发分支，然后推送到pre_production，然后在pre_production服务器中进行测试；然后当一切正常时，推到掌握。

我不确定以上是否是正确的工作流程，因为我对 Git 还很陌生。无论如何，我们正在测试工作流程，我们执行了以下步骤：

## 在 Dev1 机器上

1.  在本地 dev_1 中进行了更改，与远程 dev_1 同步
2.  将本地 dev_1 合并到本地 pre_production（因为 pre_production 尚未更改）
3.  将本地 pre_production 与远程 pre_production 同步。
4.  将本地 pre_production 合并到本地 dev_1
5.  将 local_dev1 与远程 dev_1 同步

## 在 Dev2 机器上

1.  在本地 dev_2 中进行了更改，与远程 dev_2 同步
2.  切换到本地 pre_production 并与远程 pre_production 同步
3.  将本地 dev_2 合并到本地 pre_production
4.  本地 pre_production 与远程 pre_production 同步
5.  将本地 pre_production 合并到本地 dev_2

到目前为止，它工作得很好。然后，当我们尝试将 dev2 所做的更改合并到 dev1 中时，在将本地 dev_1 与远程 dev_1 同步时失败（在第 5 步）。

由于我们是 Git 新手，因此很高兴能得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:02:59.967

好的，看起来我找到了我的问题的答案。

在第 5 步中，我们没有尝试“同步”local_dev 和 remote_dev，而是简单地强制推送到 remote_dev。我们可以安全地执行此操作，因为 local_dev 将拥有最新的更改，而不是远程的。

是否使用以下命令：

**git push git_url local_branch:remote_branch**

希望这可以帮助某人。

# java - 将 CSV 文件转换为 Java - 向后复制

> ID：15128066
> 
> 赞同：0
> 
> 时间：2013-02-28T05:20:25.640
> 
> 标签：java, csv, multidimensional-array

我之前问过一个关于在 java 中将 CSV 文件转换为二维数组的问题。我完全重写了我的代码，它几乎是在重写。我现在唯一的问题是它正在向后打印。换句话说，列正在打印行应该在的位置，反之亦然。这是我的代码：

```
 int [][] board = new int [25][25];

     String line = null;
     BufferedReader stream = null;
     ArrayList <String> csvData = new ArrayList <String>();

     stream = new BufferedReader(new FileReader(fileName));
        while ((line = stream.readLine()) != null) {
            String[] splitted = line.split(",");
            ArrayList<String> dataLine = new ArrayList<String>(splitted.length);
            for (String data : splitted)
                dataLine.add(data);
            csvData.addAll(dataLine);

        }

        int [] number = new int [csvData.size()];

        for(int z = 0; z < csvData.size(); z++)
        {
            number[z] = Integer.parseInt(csvData.get(z));
        }

        for(int q = 0; q < number.length; q++)
        {
            System.out.println(number[q]);
        }

        for(int i = 0; i< number.length; i++)
        {
            System.out.println(number[i]);
        }

        for(int i=0; i<25;i++)
            {
               for(int j=0;j<25;j++)
               {
                   board[i][j] = number[(j*25) + i]; 

            }
            } 
```

基本上，二维数组应该有 25 行和 25 列。在读取 CSV 文件时，我将其保存到 String ArrayList 中，然后将其转换为一维 int 数组。任何输入将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:51:40.250

所以你想在 java 中读取一个 CSV 文件，那么你可能想使用 OPEN CSV

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import au.com.bytecode.opencsv.CSVReader;

public class CsvFileReader {
    public static void main(String[] args) {

        try {
            System.out.println("\n**** readLineByLineExample ****");
            String csvFilename = "C:/Users/hussain.a/Desktop/sample.csv";
            CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
            String[] col = null;
            while ((col = csvReader.readNext()) != null) 
            {
                System.out.println(col[0] );
                //System.out.println(col[0]);
            }
            csvReader.close();
        }
        catch(ArrayIndexOutOfBoundsException ae)
        {
            System.out.println(ae+" : error here");
        }catch (FileNotFoundException e) 
        {
            System.out.println("asd");
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("");
            e.printStackTrace();
        }
    }
} 
```

[你可以从这里](http://mirrors.ibiblio.org/pub/mirrors/maven2/milyn/opencsv/1.6/opencsv-1.6.jar)获取相关的jar文件

# json - 在 Pig 中解析复杂的 JSON 字符串

> ID：15128068
> 
> 赞同：3
> 
> 时间：2013-02-28T05:20:44.753
> 
> 标签：json, hadoop, apache-pig

我想在 Pig 中解析一串复杂的 JSON。具体来说，我希望 Pig 将我的 JSON 数组理解为一个包而不是单个字符数组。使用 JsonLoader 时，我可以通过指定架构轻松做到这一点，就像在[这个问题](https://stackoverflow.com/questions/14094768/parsing-complex-json-with-pig)中一样。有没有办法让 Pig 为我找出我的模式，或者在 Pig 解析字符串时指定它？我一直在使用[JsonStringToMap](https://github.com/kevinweil/elephant-bird/blob/master/src/java/com/twitter/elephantbird/pig/piggybank/JsonStringToMap.java)，但找不到指定模式的方法，或者无法让它正确理解我的 JSON 数组是一个数组而不是单个字符数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T04:31:34.003

我最终在[Mozilla 的 Akela 库中为 pig使用了](https://github.com/mozilla-metrics/akela)[JsonTupleMap()](https://github.com/mozilla-metrics/akela/blob/master/src/main/java/com/mozilla/pig/eval/json/JsonTupleMap.java)。它通过解析我的所有 JSON 来完成我想要的，即使它很复杂，即使我不提供模式也这样做。如果您遇到与我相同的问题，请使用它。

示例用法：

```
REGISTER '/path/to/akela-0.5-SNAPSHOT.jar';
DEFINE JsonTupleMap com.mozilla.pig.eval.json.JsonTupleMap();
loaded = LOAD '$INPUT' AS (json_string:chararray, ...);
jsonified = FOREACH loaded GENERATE JsonTupleMap(json_string) AS json:map[], ...;
some_generate = FOREACH jsonified GENERATE json#'key'#'sub_key'; 
```

# c++ - 如果我使用结构来携带argc和argv，我如何将地址argv分配给结构内的变量？

> ID：15128070
> 
> 赞同：1
> 
> 时间：2013-02-28T05:20:57.583
> 
> 标签：c++, struct, pass-by-reference, argv

我在 main 之上定义了一些结构：

```
struct arguments
{
   int c;
   char *v[];
}; 
```

现在我想主要这样做：

```
int main(int argc, char *argv[])
{
    arguments arg;

    arg.c = argc;
    arg.v = argv; /* error: incompatible types in assignment of 'char** to char* [0]' */
} 
```

所以，我不完全理解我在做什么，但本能地我重新制作了结构，`char *v[];`但是`char **v[];`，这意味着当我通过引用我的结构`arg`时，如果我想取消引用并获取 的值`arg.v[0]`，这将是程序名称，我现在必须这样做`*arg.v[0]`，这不再适用于`*arg.v[1]`.

我有一个功能，例如：

```
void argument_reader(arguments &arg)
{
   cout << "Number of arguments: " << arg.c << endl << endl;
   cout << "Array\t\tValue\n";
   cout_bar(40);
   for (int i = 0; i < arg.c; i++)
   {
      cout << "argv[" << i << "]\t\t" << *arg.v[i] << endl;
   }
   return;
} 
```

但是当我调用`*arg.v[i]`程序结束时没有打印第二个参数或任何其他参数的值。

所以我的问题是，有没有什么方法可以使用结构在函数之间传递，这样我就可以`arg.v[some_index < arg.c]`在另一个函数内部调用，方法是按照我的意图使线路`arg.v = argv`在 main 工作中（存储`argv`in的地址`arg.v`）

结构所做的一切就是使它不必传递`argc`和传递`argv`给具有如下声明的函数：`void func(int &argc, char *argv[]);`我可以将具有变量名的新结构类型传递`arg`给声明为类似的函数`void func(arguments &arg)`，这基本上就是我想要的结构. 所以如果我不能这样做，那么我可以回到第一种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T05:22:29.430

你需要写：

```
struct arguments
{
    int    c;
    char **v;
}; 
```

现在你的`main()`意志奏效了。（这种混乱是我总是使用的原因`int main(int argc, char **argv)`，但这是个人的怪癖。）

如果您在 C99 或更高版本中工作，那么您使用结构创建的就是所谓的[“灵活数组成员”](https://stackoverflow.com/questions/13804398/the-difference-of-the-pointer-and-a-array/13804535#13804535)（FAM），它是 C99 对 C89 的补充（因此也超过了 C++98）。我没有注意到您正在使用 C++ 工作！C 中有关于 FAM 的特殊规则，您不能像使用灵活数组成员那样进行赋值。

但是，该修复程序在 C++ 中与在 C 中一样有效；您使用 FAM 并不一定是正确的。您是否使用支持 FAM 作为扩展的 C++ 编译器？

在您的输出行中，您有：

```
cout << "argv[" << i << "]\t\t" << *arg.v[i] << endl; 
```

这将打印参数的第一个字符；删除`*`，你会得到第一个参数作为字符串：

```
cout << "argv[" << i << "]\t\t" << arg.v[i] << endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T05:28:57.317

将您的结构更改为：

```
struct arguments
{
   int c;
   char **v;
}; 
```

C 风格的数组和指针非常相似，您可以像您的版本或原始`argv`参数一样使用上述结构。

实际上，通常 main 函数是这样声明的，而不是使用 []：

```
int main(int argc, char **argv) 
```

请注意，使用此答案代码`v`指向指向 char 的原始`argv`指针数组，不会复制指针。如果您确实想要一个副本，则需要动态分配 char 指针数组并进行复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T05:26:11.257

两件事情：

```
struct arguments
{
   int c;
   char *v[]; /*unknown length, hence structure is incomplete*/
}; 
```

你需要一个双指针，它保存着`argv`

```
 struct arguments {
       int c;
       char **v;
    }; 
```

# android - 循环播放音乐 x 次时出现暂停问题

> ID：15128076
> 
> 赞同：0
> 
> 时间：2013-02-28T05:21:21.067
> 
> 标签：android, loops, media-player

一切正常，唯一的问题是暂停。我想将一些长媒体重复 5 次，并且我想在需要时暂停媒体。

但是当我按下暂停/播放按钮时，该`playsound();`方法被一次又一次地调用，因此音乐播放超过 5 次。

这是我的代码

```
ImageButton bv.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mp.isPlaying()){
                mp.pause();
                bv.setImageResource(R.drawable.play);
            } else {
                bv.setImageResource(R.drawable.pause);
                playsound();
            }
        }
    });
public void playsound() {
    mp.setOnCompletionListener(new OnCompletionListener() {
          int count = 1; 
        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
            if(count < 5) {
                  count++;
                  mp.start();   
                  mp.seekTo(0);
                }
        }
    });  mp.start();
} 
```

知道如何解决这个问题吗？

# javascript - Fine Uploader ie9 上传失败

> ID：15128084
> 
> 赞同：1
> 
> 时间：2013-02-28T05:21:46.370
> 
> 标签：javascript, jquery, file-upload, internet-explorer-9, fine-uploader

我对精细上传器（3.0）有一个奇怪的问题，它适用于除 ie9 之外的所有浏览器。

没有js错误，只是上传一个0byte失败。我正在使用 valums php，但在这里失败了：

```
$realSize = stream_copy_to_stream($input, $temp);
        fclose($input);
        //This results in an error in ie9
        if ($realSize != $this->getSize()){            
            return false;
        } 
```

如果我评论返回它会创建一个 0 字节的文件，看起来 ie9 没有发送任何数据。你们中有人知道可能是什么问题吗？

非常感谢你。

编辑：

根据需要的客户端代码：

```
if($('#fine-uploader_main').length > 0){

        var method = $('#fine-uploader_main_method').val();
        var fileCount = 0;
        $('#fine-uploader_main').fineUploader({
            request: {
                endpoint: base_url+"ajax/"+method,//base_url+'ajax/upload_afile/can_id/'+$('#fine-uploader-can_id').val(),
            },
            text: {
                uploadButton: '<i class="icon-upload icon-white"></i> Upload'
            },
            template: '<div class="qq-uploader span12">' +
                  '<pre class="qq-upload-drop-area span12"><span>{dragZoneText}</span></pre>' +
                  '<div class="qq-upload-button btn btn-success" style="width: auto;">{uploadButtonText}</div>' +
                  '<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>' +
                  '<ul class="qq-upload-list" style="margin-top: 10px; text-align: center;"></ul>' +
                '</div>',
            classes: {
                success: 'alert alert-success',
                fail: 'alert alert-error'
            }
        }).on('complete', function(event, id, fileName,response) {
            if(response.success==true){
                $.ajax({
                    type: "POST", url: base_url+"ajax/"+method+"_return",data:"filename="+response.filename,
                    success: function(html){
                        $("#uploader_container").hide();
                        $("#uploader_success").html(html).show();
                        $("#fileupload-check").removeClass('required');
                    }
                });
            } else {
                //console.log(response);
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:25:52.593

很可能您根本没有处理 Multipart Encoded 请求，这些请求仅由 IE9 以及 3.0 中的更早版本默认发送。您的服务器端代码必须正确处理这些请求以支持 IE9 及更早版本以及 Android 2.3.x。

# javascript - 带有冒号的 Javascript 内部函数

> ID：15128088
> 
> 赞同：3
> 
> 时间：2013-02-28T05:22:15.543
> 
> 标签：javascript, function, colon

我想知道内部功能是什么样的？我知道你可以写以下

```
var obj = {
       test: 'something'
} 
```

但是在这段代码中，innerfunction 不是指一个变量，而是一个函数。还有其他方法可以编写/调用内部函数吗？

```
function outer(){

    var a = "Outerfunction";
    console.log(a)

    innerFct: function InnerFct()    {                                              
            var c = "Inner";
            console.log(c)
    }innerFct();
}
window.outer(); 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:29:52.293

这里发生了几件不同的事情。

在这段代码中：

```
var obj = {
    test: 'something'
} 
```

您正在使用“文字对象表示法”来创建——嗯，一个具有一个属性的对象，`test`该属性的值为`something`

在第二种情况下，您正在创建一个代码块（是的，对象和代码块都使用相同的语法`{...}`来定义它们很有趣。

在代码块内部，`innerFct:`成为标签。标签与一些控制流语句一起使用来跳转。忘记它们，你真的最好不要使用它们。

```
function outer(){
    var a = "Outerfunction";
    console.log(a)

    function innerFct()    {                                              
        var c = "Inner";
        console.log(c)
    }
    innerFct();
}
outer(); 
```

甚至

```
function outer(){
    var a = "Outerfunction";
    console.log(a)

    var innerFct = function ()    {                                              
        var c = "Inner";
        console.log(c)
    }
    innerFct();
}
outer(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:29:12.273

你`functions`对`objects`.

使用对象时，冒号用于显示键值对。

```
var object = {
  innerFct: function(){
    console.log('rawr');
  },
  someVariable: 7
}

object.innerFct(); //logs rawr
object.someVariable = 4; //just changed from 7 to 4 
```

在示例中使用冒号是不正确的语法。此外，当您在这样的对象中创建函数时，您不会再次命名该函数，因为您已经将它分配给对象上的名称。

然后，您可以随时通过执行以下操作来编辑该函数：

```
object.innerFct = function(){
  //new code
} 
```

做`object.innerFct()`会调用函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T05:46:26.383

其他答案已经充分涵盖了对象语法并在范围内调用函数。正如我在评论中提到的，你可以这样做：

```
function outer(){
    (function () {
        var c = "inner";
        console.log(c)
    })();
}
window.outer(); 
```

它记录`inner`得很好。

**编辑：**原始代码示例中的私有/隐藏变量`innerFct`也可以在闭包中捕获。

```
outer = function() {
    var innerFct = function () { console.log("inner"); }
    // innerFct is captured in the closure of the following functions
    // so it is defined within the scope of those functions, when they are called
    // even though it isn't defined before or after they complete
    window.wrapper = function() { innerFct(); }
    return function() { innerFct(); }
}
outer();

// each of these next three lines logs "inner"
window.wrapper();   // assigned to global variable
outer()();          // calling the returned function
var innerFctBackFromTheDead = outer(); // saving the returned function
innerFctBackFromTheDead(); 
```

还有对象构造函数/原型语法。

```
function Outer() {
    this.inner = function() {
        this.c = "inner";
        console.log(this.c);
    }
}

var out = new Outer();
out.c;       // undefined
out.inner(); // logs "inner"
out.c;       // "inner" 
```

有关新关键字和原型的更多信息：http: [//pivotallabs.com/javascript-constructors-prototypes-and-the-new-keyword/](http://pivotallabs.com/javascript-constructors-prototypes-and-the-new-keyword/)

# django - 翻译 Django 通用视图的最佳方法

> ID：15128094
> 
> 赞同：1
> 
> 时间：2013-02-28T05:23:08.750
> 
> 标签：django, django-views

我正在升级到 Django 1.5，它已经弃用了通用视图。我正在使用使用通用视图的 django-voting。我不确定如何将其转换为基于类的视图：

```
from django.conf.urls.defaults import *
from django.views.generic.list_detail import object_list
from django.core.context_processors import request
from django.shortcuts import get_object_or_404, render_to_response
from blog.models import Blog
from voting.views import vote_on_object
from voting.models import Vote
import operator 

urlpatterns = patterns('',

    url(r'^links/(?P<object_id>\d+)/(?P<direction>up|down|clear)vote/?$',
        vote_on_object,
        dict(
            model=Blog,
            template_object_name='link',
            template_name='blog/link_confirm_vote.html',
            allow_xmlhttprequest=True,
            ),
        name="link_vote",)

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:51:03.613

视图.py

```
class BlogDetailView(DetailView):
    model = Blog
    template_name = 'idea/link_confirm_vote.html' 
```

网址.py

```
from .views import BlogDetailView   

urlpatterns = patterns('',
    url(
        regex=r'^links/(?P<object_id>\d+)/(?P<direction>up|down|clear)vote/?$',
        view=BlogDetailView.as_view(),
        name='link_vote'
    ),
) 
```

# android - 应用程序的屏幕尺寸问题

> ID：15128097
> 
> 赞同：1
> 
> 时间：2013-02-28T05:23:18.260
> 
> 标签：android, android-layout, android-screen

因此，我正在浏览我的应用程序的主布局，并且我有一个布局文件夹“布局”，我的应用程序的活动有许多文本视图和按钮，以便能够使用相对布局来移动 1 个东西并弄乱整个布局。我一直在想办法让应用程序进入我当前的布局（仅使用边距的框架布局）的屏幕兼容模式，并且它显示的一切都是混乱和讨厌的。

有谁知道支持不同屏幕的更好方法？

另外，您的第一个问题的答案是：是的。我已经浏览了文档中的支持多屏幕和屏幕兼容模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:13:36.140

使用嵌套布局。对于 10 英寸平板电脑，您必须指定 layout-xlarge 对于 9 英寸平板电脑，请指定 layout-sw720dp，有关详细信息，请参阅以下链接 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:32:40.340

我的建议是使用嵌套线性布局，对于不同的屏幕尺寸，您必须在应用程序中创建不同的布局文件夹，例如 layout_small、layout_large、layout_xlarge、layout_land，然后将您的 xml 文件复制到这些文件夹中并根据这些文件夹进行更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T05:43:15.027

嗨，威廉姆斯，您可以为屏幕尺寸创建不同的布局，例如

大布局，小布局，大布局，

所以你可以通过创建不同的布局文件夹来管理屏幕尺寸。然后将您的布局 XML 文件复制到不同的布局中，您可以将文本字段、按钮等修改为屏幕大小。

# android - 使点击按钮生成随机数而不重复

> ID：15128098
> 
> 赞同：0
> 
> 时间：2013-02-28T05:23:51.773
> 
> 标签：android, button, random, numbers, click

我想制作一个生成随机消息而不重复的应用程序（仅用于学习目的）。

我在 onCreate 方法中有这段代码：

```
imgbutton2 = (ImageButton) findViewById(R.id.imgbutton2);

int n=3;
int v1[] = new int[n];
v1[0] = 0;
v1[1] = 0;
v1[2] = 0;

int i, j;

for(i=0;i<n;i++){
    for(j=0; ;j++){
        Random rn = new Random();
        int range = 3;
        int r = rn.nextInt(range) 1;

        if(r != v1[0] & r != v1[1] & r != v1[2]) {
            v1[i] = r v1[i];

            textView1=new TextView(this); 

            switch (r) {
                case 1:
                    textView1 = (TextView) findViewById(R.id.textView1); 
                    textView1.setText("Message 1");
                break;

                case 2:
                    textView1 = (TextView) findViewById(R.id.textView1); 
                    textView1.setText("Message 2");
                break;

                case 3:
                    textView1 = (TextView) findViewById(R.id.textView1); 
                    textView1.setText("Message 3");
                break;
            }
            break;
        }
    }

    imgbutton2.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
            Intent i = null;
        }});
    } 
```

我在 imgbutton2 中放置了一个空函数（位于第一个 FOR 中），等待用户单击，然后继续阅读以再次在第一个 FOR 中输入 i=1），但它不起作用。

这个想法是在单击按钮时生成一条新消息。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:04:26.907

Android 提供了获取随机数的 API：在您的按钮单击事件中使用此 API 并获取不重复的随机数。

```
 Random myRandom = new Random();
 int randomNumber = myRandom.nextInt();
 Log.i("RandomNumber:" + randomNumber); 
```

# javascript - 如何从backbone.js url中删除id属性

> ID：15128100
> 
> 赞同：2
> 
> 时间：2013-02-28T05:23:58.680
> 
> 标签：javascript, backbone.js

我第一次发送请求时，该方法似乎是 POST 并且 url 似乎很好，但下一次 url 似乎被修改并附加了一个 id。

```
=>
POST {"foo":"bar"} /things
<=
200 OK {"foo":"bar","id":"a36f933"} 
```

下次我发送请求时，似乎生成了一个 id。

```
=>
POST {"foo":"bar","id":"12345abc"} /things/12345abc
<=
200 OK {"foo":"bar","id":"12345abc"} 
```

我怎样才能避免将 id 发送到我的 web 服务，它给我一个禁止的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:45:54.110

更多信息会有所帮助，但我敢打赌：

*   在第一次通话中，您正在创建一个新模型。所以它没有ID，服务器会提供一个。
*   在接下来的调用中，Backbone 传递 ID，以便服务器知道必须更新哪个模型。

因此，您必须在服务器上进行修复，而不是在 Backbone 上。

# android - 如何在 Android 的多级列表中折叠/展开...？

> ID：15128101
> 
> 赞同：2
> 
> 时间：2013-02-28T05:24:00.337
> 
> 标签：android, expandablelistview

// 自过去 3 天以来，我一直在寻找这个问题的解决方案，但没有找到任何有用的东西。我必须创建一个具有折叠/展开功能的多级列表（Expandablelist）。

例如：

```
 ques1:
               q1.1
               q1.2:
                    q1.1.1
          ques2:
               q2.1
               q2.2
               q2.3 
```

请帮我实现这个功能......非常感谢

# android - 多子扩展列表android

> ID：15128106
> 
> 赞同：4
> 
> 时间：2013-02-28T05:24:21.597
> 
> 标签：android, expandablelistview

我想创建一个可扩展的列表视图，其中包含子布局内的子布局我想要子子布局，如下所示..

![在此处输入图像描述](../Images/6112c9b38aaccb07ab8f2d245ab22029.png)

# c# - 无法将 char 分配给 char[0] 元素

> ID：15128107
> 
> 赞同：0
> 
> 时间：2013-02-28T05:24:25.250
> 
> 标签：c#

我是 C 的初学者。我知道 C，但我对对象和类并不陌生。

我想用 C# 做一些练习。所以我想对字符串的每个字符进行编码。所以我计划将字符串 (login_name) 转换为 char[] 数组，然后循环遍历 char[] 数组的每个元素并执行少量操作，并为每个字符提供一些编码值。最后将这些值分配给另一个 char[] 序列并将这个 char[] 序列转换回字符串。

我已经写了基本的想法。看看这个

```
char[] array = login_name.ToCharArray(); // Converted string to char array
char[] sery = null; //created a new array.is it neccessary to specify the size?
// convert the characters to int and perfom some opeartion;
// here i have ex-ored with 123 
int a =((int)array[0]) ^ 123; 
// now convert the encoded value to char and assign it to each element of char[] sery    
sery[0] = (char) a; but this statement gives run time error 
```

给出一个运行时错误：创建一个新的 char 实例。

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:27:45.753

您需要定义数组的大小，否则在当前形式下您`sery`是`null`

```
char[] sery = new char[array.Length]; //if the elements number would be same as array 
```

或者你可以使用`List<T>`

```
List<char> seryList = new List<char>(); 
```

# c# - 使用 C# 获取具有组名的 windows 用户

> ID：15128111
> 
> 赞同：1
> 
> 时间：2013-02-28T05:24:58.217
> 
> 标签：c#, windows, active-directory

我想获取远程 Windows 操作系统中所有用户的列表以及他们所属的组。

我正在使用以下获取用户名的代码：

```
DirectoryEntry directoryEntry = new DirectoryEntry("WinNT://" + CurrentOS.Attribute("ip").Value);
directoryEntry.Username = CurrentOS.Attribute("username").Value;
directoryEntry.Password = CurrentOS.Attribute("password").Value;

foreach (DirectoryEntry child in directoryEntry.Children)
{
    if (child.SchemaClassName.Equals("User", StringComparison.OrdinalIgnoreCase))
    {
        FoundUsers.Add(new UserDetail(child.Name,""));
    }
} 
```

有人可以指导我如何使用以前的代码获取用户所属的组（例如测试、管理员）。

# php - 修改 Javascript/PHP sendEmail 函数以使用 Mailgun HTTP POST

> ID：15128115
> 
> 赞同：0
> 
> 时间：2013-02-28T05:25:39.920
> 
> 标签：php, javascript, curl, postfix-mta, mailgun

我有一个 sendEmail 函数作为我上网的一个更大的 php 脚本的一部分，我需要修改它以使用我的新 Mailgun 帐户。我对 PHP 还很陌生，对邮件服务器等还是比较陌生，所以这在上周一直是一个挑战。Mailgun 文档提供了一个[使用 PHP 通过 HTTP POST 发送的示例](http://documentation.mailgun.net/user_manual.html#sending-messages)（单击顶部的 PHP 按钮）：

```
function send_simple_message() {
  $ch = curl_init();

  curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
  curl_setopt($ch, CURLOPT_USERPWD, 'api:my-api-key-here');
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
  curl_setopt($ch, CURLOPT_URL, 'https://api.mailgun.net/v2');
  curl_setopt($ch, CURLOPT_POSTFIELDS, array('from' => 'Excited User <me@samples.mailgun.org>',
                                             'to' => 'obukhov.sergey.nickolayevich@yandex.ru',
                                             'subject' => 'Hello',
                                             'text' => 'Testing some Mailgun awesomness!'));

  $result = curl_exec($ch);
  curl_close($ch);

  return $result;

} 
```

我现有的 sendEmail 函数如下所示：

```
public function sendEmail($to, $subj, $msg, $shortcodes = '', $bcc = false) {

    if ( !empty($shortcodes) && is_array($shortcodes) ) :

        foreach ($shortcodes as $code => $value)
            $msg = str_replace('{{'.$code.'}}', $value, $msg);

    endif;

    /* Multiple recepients? */
    if ( is_array( $to ) )
        $to = implode(', ', $to);

    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers .= 'From: ' . address . "\r\n";

    /* BCC address. */
    if ( $bcc ) {
        $headers .= 'Bcc: ' . $to . "\r\n";
        $to = null;
    }

    $headers .= 'Reply-To: ' . address . "\r\n";
    $headers .= 'Return-Path: ' . address . "\r\n";

    /*
     * If running postfix, need a fifth parameter since Return-Path doesn't always work.
     */
    // $optionalParams = '-r' . address;
    $optionalParams = '';

    return mail($to, $subj, nl2br(html_entity_decode($msg)), $headers, $optionalParams);

} 
```

我知道我不想在我的函数中指定主题、文本等，因为它是从其他现有区域绘制的，所以我尝试在函数中的某一点添加类似的内容（对不起，我不知道如何这一切看起来都放在一起，因为它太乱了，以至于我抓挠它重新开始：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array('from' => 'Webmaster <webmaster@mydomain.com>',
                                             'to' => $to,
                                             'subject' => $subj,
                                             'text' => $msg)); 
```

我还在`$ch = curl_init();`sendEmail 函数中添加了所有`curl_setopt`行。除此之外，我迷路了，你可能猜到了，什么也没发生。

有人可以告诉我如何将两者结合起来，为什么或指出我在与这种事情非常相似的地方吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:39:07.957

根据我对您的问题的理解，您将底部代码作为您正在使用的脚本的一部分，但是实际的邮件需要按照顶部给出的示例 Mailgun 代码的行来完成？

我已经将这两个功能混合在一起了。**它没有经过测试**。可能有错误。

该函数具有相同的名称，并以与以前完全相同的方式被调用，接受相同的参数。你会看到我已经删除了代码的底部——实际上是发送了电子邮件——并用示例代码替换了它。在其中，我用函数在顶部接收的值替换了它提供的占位符文本`$to`：`$subj`和`$msg`。我还删除了所有`$headers`行，因为这些行专门指的是`mail()`我们不再使用的函数。[编辑：现在也应该使用 bcc 选项。]

您仍然需要更改一些内容：`my-api-key-here`和`Excited User <me@samples.mailgun.org>`. 此信息应可从您的 Mailgun 帐户获得。

```
public function sendEmail($to, $subj, $msg, $shortcodes = '', $bcc = false) {

  if ( !empty($shortcodes) && is_array($shortcodes) ) :

      foreach ($shortcodes as $code => $value)
          $msg = str_replace('{{'.$code.'}}', $value, $msg);

  endif;    

  /* Multiple recepients? */
  if ( is_array( $to ) )
      $to = implode(', ', $to);

  /* BCC address. */
  $bccrecip = '';
  if ( $bcc ) {
      $bccrecip = $to;
      $to = '';
  }

  $ch = curl_init();

  curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
  curl_setopt($ch, CURLOPT_USERPWD, 'api:my-api-key-here');
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
  curl_setopt($ch, CURLOPT_URL, 'https://api.mailgun.net/v2');
  curl_setopt($ch, CURLOPT_POSTFIELDS, array('from' => 'Excited User <me@samples.mailgun.org>',
                                             'to' => $to,
                                             'bcc' => $bccrecip,
                                             'subject' => $subj,
                                             'text' => $msg));

  $result = curl_exec($ch);
  curl_close($ch);

  return $result;

} 
```

# asp.net - 无法连接到sql server box

> ID：15128116
> 
> 赞同：1
> 
> 时间：2013-02-28T05:25:45.027
> 
> 标签：asp.net, sql-server, firewall, telnet

我正在尝试连接到防火墙后面的 SQL Server 数据库。DMZ 中的 asp.net 应用程序尝试连接到数据库，但是我收到一个错误（*该 webapp 在我的本地机器上运行良好*）：

![在此处输入图像描述](../Images/b8e6d6e729e7c7f76ebb6ef4774d5594.png)

当我远程登录时：

```
open 0.0.0.0 1433 
```

它说：

```
Connecting to 0.0.0.0 ...
Connection to host lost 
```

这是否意味着防火墙正在阻止传入的请求？或者这是别的什么？（IT 支持向我保证端口已打开）

连接字符串：

```
data source=0.0.0.0; initial catalog=mydb;user id=xxxx;password=xxxx;persist security info=True;packet size=4096; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:12:48.333

在您的 ASP 服务器上创建一个新的 UDL 文件。打开UDL文件，使用界面成功连接SQL server并保存文件。在文本编辑器中打开 UDL 文件并将连接字符串复制到您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:34:52.830

如果您的 sql 服务器位于防火墙后面（这是一件好事），那么您的 Web 应用程序不应直接连接到它。相反，它应该通过某种服务层。这可以通过不同的技术以多种方式实现。该服务物理上应该位于可以访问 db 的机器上，并且不应允许 Web 服务器直接连接到 db 机器（或集群）。

因此，话虽如此，让我们解决您的连接字符串。尝试添加“集成安全 = true”。这是一个例子：

```
<连接字符串>
    <add name="ConnStringDb1" connectionString="数据源=MY_SERVER_NAME_OR_IP；初始目录=MyDataBaseName；集成安全=True；" providerName="System.Data.SqlClient" />
  </connectionStrings>

```

同样，需要注意的是，Web 应用程序本身应该只调用这个服务层（可能是 WCF，或者可能是一个 COM 组件），而不是直接连接到数据访问层。有很多关于如何设计这些类型的应用程序的示例。这是一个希望能有所帮助的。[http://www.c-sharpcorner.com/UploadFile/SukeshMarla/3-tier-architecture-using-Asp-Net/](http://www.c-sharpcorner.com/UploadFile/SukeshMarla/3-tier-architecture-using-Asp-Net/)。祝你好运。

# android - 在airplay中实现android作为服务器（接收器）

> ID：15128124
> 
> 赞同：12
> 
> 时间：2013-02-28T05:26:08.197
> 
> 标签：android, airplay, jmdns

我想在 android 中创建 airplay，其中我的 android 设备将用作 airplay 服务器（接收器），而 iPhone 设备将用作接收器。我在我的应用程序中使用了 jmdns，它是 java 中用于 airplay 的开源库。它对音频工作正常。但是当我看到视频和图像时，即使发现了设备，我也有很多挣扎。这是我创建和注册服务的代码：

```
 ServiceInfo info = ServiceInfo.create(identifier + "@" + name + "._raop._tcp.local", identifier + "@" + name, port, "tp=UDP sm=false sv=false ek=1 et=0,1 cn=0,1 ch=2 ss=16 sr=44100 pw=false vn=3 txtvers=1");

        dns = JmmDNS.Factory.getInstance();
        ((JmmDNSImpl)dns).inetAddressAdded(new NetworkTopologyEventImpl(JmDNS.create(InetAddress.getByName("localhost")), InetAddress.getByName("localhost")));

        try {
            Thread.sleep(1000); // If this isn't done the Announcement sometimes doesn't go out on the local interface
        } catch (InterruptedException e) {
            e.printStackTrace(System.err);
        }

        dns.registerService(info); 
```

当我将第一行中的 ._raop 更改为 ._airplay 时，已经为 iPad 中的图像和音频发现了该设备。当我选择播放视频的设备时，它会显示消息“**此视频正在播放 android（服务器名称）** ”。但是在服务器端，我没有得到任何要处理的数据包。我学习了很多 Jmdns。但我不知道如何使用 jmdns 在空中播放中实现视频和图像。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:14:10.133

你需要一个流媒体服务器。[FFmpeg](http://ffmpeg.org)在我看来是一个有趣的起点。请参阅[ffserver](http://ffmpeg.org/ffserver.html)组件。

这是一个很好的教程，介绍如何将其包装在[ffmpeg-java](http://fmj-sf.net/ffmpeg-java/getting_started.php)中。

# signalr - 如何在 hubpipleline 之外使用 SignalR 集线器实例

> ID：15128125
> 
> 赞同：82
> 
> 时间：2013-02-28T05:26:08.153
> 
> 标签：signalr, signalr-hub

我正在使用 SignalR 向我的所有客户广播消息。我需要在我的集线器类之外触发广播，如下所示：

`var broadcast = new chatHub(); broadcast.Send("Admin","stop the chat");`

我收到错误消息：

> 不支持使用不是由 HubPipeline 创建的 Hub 实例。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-02-28T05:39:01.177

您需要使用`GetHubContext`：

```
var context = GlobalHost.ConnectionManager.GetHubContext<chatHub>();
context.Clients.All.Send("Admin", "stop the chat"); 
```

[这在http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server#callfromoutsidehub](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server#callfromoutsidehub)中有更详细的描述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-12T06:54:20.183

对于那些可能想知道`GlobalHost`它去了哪里的人来说，这是一个小更新。SignalR 已针对 .net 核心完全重写。因此，如果您使用 SignalR.Core 包（[SignalR 版本之间](https://docs.microsoft.com/en-us/aspnet/core/signalr/version-differences?view=aspnetcore-2.1)的差异），您可以通过将 SignalR 集线器上下文注入到您的服务中来获取它：

```
public class MyNeedyService
{
    private readonly IHubContext<MyHub> ctx;

    public MyNeedyService(IHubContext<MyHub> ctx)
    {
        this.ctx = ctx;
    }

    public async Task MyMethod()
    {
        await this.ctx.All.SendAsync("clientCall");
    }
} 
```

并在`Startup.cs`：

```
services.AddSignalR()/*.AddAzureSignalR("...")*/; 
```

Microsoft 文档在这里：[从集线器外部发送 SignalR 消息](https://docs.microsoft.com/en-us/aspnet/core/signalr/hubcontext?view=aspnetcore-2.1)。

# jquery - jQuery droppable 获取被删除的对象上下文

> ID：15128129
> 
> 赞同：1
> 
> 时间：2013-02-28T05:26:27.197
> 
> 标签：jquery, draggable, droppable, jquery-widgets

您如何获得已被拖放到可拖放目标上的 jQuery 小部件的上下文？

例如，这是使用此代码可拖动的小部件：

```
In the code that makes the images be draggable

ContentImageHolder.prototype = {

    options: {
        contentInfo: null,
    },

    getContentInfo: function(){
        return this.options.contentInfo;
    },

    makeContentDraggable: function(){

        $(this.element).draggable({
            revert: true,
            scroll: false,

            start:  $.proxy(this, 'dragStart'),
            stop:   $.proxy(this, 'dragStop'),
        });
    },

    _init: function() {
        this.makeContentDraggable();
    }

$.widget("basereality.contentImageHolder", ContentImageHolder); 
```

然后这是我的代码，使垃圾桶可以接受图像。

```
TrashCan.prototype = {

    trashContent: function (event, ui){
        //What do I do here to be able to access the functions of the dropped object
        //droppedObject.getContentInfo();
    },

    _init: function() {
        $(this.element).droppable({
            drop: $.proxy(this, 'trashContent'),
        });
    },
}
$.widget.bridge('trashCan', TrashCan); 
```

是否可以获取拖到可放置对象上的 ContentImageHolder 的上下文，以便我可以调用对象上的函数？

这里所有使用相似关键字的问题都说要使用`ui.draggable`，但引用的是 DOM 对象，而不是 jQuery 小部件。那么是否有可能获得 jQuery 小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:18:58.147

只要你有一个 DOM 对象，它上面初始化了一个 jQuery 小部件或 UI 元素，你就可以通过你用来创建它的函数来访问小部件或 UI 元素的函数和属性。

我的意思是，如果你想调用 .getContentInfo() 那么你可以这样做：

```
trashContent: function (event, ui){
    // Set a property of contentImageHolder
    $(ui.draggable).contentImageHolder("option", "contentInfo", "something")

    // Access a method of contentImageHolder
    $(ui.draggable).contentImageHolder("getContentInfo");

    // Do whatever....
}, 
```

注意：根据 ContentImageHolder 的对象类型，您可能希望像这样声明它：

```
ContentImageHolder = {

    options: {
        contentInfo: null,
    },

    getContentInfo: function(){
        return this.options.contentInfo;
    },

    makeContentDraggable: function(){

        $(this.element).draggable({
            revert: true,
            scroll: false,

            start:  $.proxy(this, 'dragStart'),
            stop:   $.proxy(this, 'dragStop'),
        });
    },

    _init: function() {
        this.makeContentDraggable();
    }
} 
```

IE：如果不合适，请不要更改原型，否则您最终可能会将函数放在它们不属于的地方，例如所有对象。

有关更多信息，请查看 jQuery Widget Factory 文档：[http ://api.jqueryui.com/jQuery.widget/](http://api.jqueryui.com/jQuery.widget/)

希望有帮助！

**== 编辑 ==** 如果您不知道将要删除的对象的类型，但您想调用一个具有通用名称的函数，那么我能想到的最简单的方法就是添加一个参数到对象的 jQuery 数据，例如：

```
// Inside ContentImageHolder._init() :
$(this.element).data("basereality.type", "contentImageHolder") 
```

这将允许您检查可拖动处理程序中的类型：

```
trashContent: function (event, ui){
    // Get its type like this:
    var elemType = $(ui.draggable).data("basereality.type");

    // Call the getContentInfo function
    $(ui.draggable)[elemType]("getContentInfo");

    // Do stuff
}, 
```

Then you just need to make sure that the value within the "basereality.type" is the same as that name for the initializer function under jQuery.

# iphone - UIButton 带到滚动视图的前面

> ID：15128132
> 
> 赞同：1
> 
> 时间：2013-02-28T05:26:42.827
> 
> 标签：iphone, xcode, autocomplete, uibutton

我遇到了一个大问题。我有一个`textfield`我正在做的自动完成功能，可以在点击里面时显示项目列表。我在`tableView`（自动完成表视图）中显示项目。我有一个`UIbutton`下面`textfield`。现在，当我从自动完成文本字段中选择一个项目并单击它没有响应的按钮时。我不知道为什么。

我把它放在前面，`didendediting`也放在前面，`didSelectrow`但没有用。我添加了一个`UIbutton`到`ScrollView`（testScroll）

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
           Name.text = selectedCell.textLabel.text;
           [Name resignFirstResponder];
           [testScroll bringSubviewToFront:btnSearch];
           autocompleteTableView.hidden=true;
}
-(void)textFieldDidEndEditing:(UITextField *)textField{
 if(textField==CompanyName)
    {

        [testScroll bringSubviewToFront:btnSearch];

} 
```

}

我要去哪里错了？

编辑：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if(textField==Name)
    {

        autocompleteTableView.hidden = NO;

        NSString *substring = [NSString stringWithString:textField.text];
        substring = [substring stringByReplacingCharactersInRange:range withString:string];
        [self searchAutocompleteEntriesWithSubstring:substring];
        return YES;
        if([Name.text length]==0)
        {
            autocompleteTableView.hidden = YES;

        }
    }

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection

{

        parser = [[NSXMLParser alloc] initWithData:receivedData];
        [parser setDelegate:self];
        [parser setShouldProcessNamespaces:NO];
        [parser setShouldReportNamespacePrefixes:NO];
        [parser setShouldResolveExternalEntities:NO];
        [parser parse];
        [parser release];

        if([arr4 count]!=0)
        {
            self.autocompleteUrls = [[[NSMutableArray alloc] init]autorelease];
            viewForautoCompleteTableView = [[UIView alloc]initWithFrame:CGRectMake(220, 370, 295, 230)];

            if(autocompleteTableView)
                [autocompleteTableView removeFromSuperview];

            autocompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(0,0,295,150) style:UITableViewStyleGrouped];
            autocompleteTableView.delegate = self;
            autocompleteTableView.dataSource = self;
            autocompleteTableView.scrollEnabled = YES;
            autocompleteTableView.backgroundColor = [UIColor lightTextColor];
            autocompleteTableView.rowHeight=28;

            autocompleteTableView.backgroundView = nil;
            autocompleteTableView.backgroundColor = [UIColor whiteColor];

            autocompleteTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
            [autocompleteTableView setSeparatorColor:[UIColor orangeColor]];
            [viewForautoCompleteTableView setFrame:CGRectMake(220,370 ,295,autocompleteTableView.frame.size.height)];

            [viewForautoCompleteTableView addSubview:autocompleteTableView];
            [self.view addSubview:viewForautoCompleteTableView];

            [autocompleteUrls removeAllObjects];
            for(int i=0;i<[arr4 count];i++)
            {
             NSString *curString = [NSString stringWithFormat:@"%@ %@",[[arr4 objectAtIndex:i] valueForKey:@"Name"],[[arr4 objectAtIndex:i]valueForKey:@"LastName"]];

                [autocompleteUrls addObject:curString];

            }

        }
        [autocompleteTableView reloadData];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:35:13.887

我遇到了同样的问题，并在下面的代码的帮助下修复了。

编辑以下两个功能：

```
in .h:

 int isValueSelected; 
```

以 .m 为单位：

在 viewDidLoad: isValueSelected =0;

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

        if (isValueSelected == 1)
        {
            autocompleteTableView.hidden = YES;
            isValueSelected = 0;
        }else{
            NSString *substring = [NSString stringWithString:textField.text];
            substring = [substring stringByReplacingCharactersInRange:range withString:string];
            [self searchAutocompleteEntriesWithSubstring:substring];
            if((substring.length ==0) || ([substring characterAtIndex:0] == 10) || (autocompleteUrls.count == 0)){
                autocompleteTableView.hidden = YES;
            }else{
                autocompleteTableView.hidden = NO;
            }

        }

        return YES;
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
        urlField.text = selectedCell.textLabel.text;
        isValueSelected = 1;
        autocompleteTableView.hidden = YES;

    } 
```

# django - 设置 DEBUG = False 会导致 500 错误

> ID：15128135
> 
> 赞同：316
> 
> 时间：2013-02-28T05:27:06.070
> 
> 标签：django, settings, django-1.5

一旦我更改了`DEBUG = False`，我的站点将生成 500（使用 wsgi & manage.py runserver），并且 Apache 错误日志中没有错误信息，当我更改`debug`为`True`.

我正在使用 Django 1.5 和 Python 2.7.3 这里是 Apache 访问日志并且没有任何日志在 apache 错误日志中

```
www.beta800.net:80 222.247.56.11 - - [28/Feb/2013:13:42:28 +0800] "GET / HTTP/1.1" 500 257 "-" "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22"
www.beta800.net:80 222.247.56.11 - - [28/Feb/2013:13:42:28 +0800] "GET /favicon.ico HTTP/1.1" 500 257 "-" "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22"
www.beta800.net:80 222.247.56.11 - - [28/Feb/2013:13:42:28 +0800] "GET /favicon.ico HTTP/1.1" 500 257 "-" "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22" 
```

这是我的设置文件：

```
import os.path    
DEBUG = False 
#TEMPLATE_DEBUG = DEBUG

HERE = os.path.dirname(__file__)
ADMINS = (
    ('admin', 'xyzadmin@qq.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'zdm',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'passwd',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
#STATIC_ROOT = os.path.join(HERE, 'static').replace('\\','/')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'
#STATIC_ROOT = os.path.join(HERE, 'static').replace('\\','/')
S= os.path.join(HERE, 'static').replace('\\','/')

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/home/zdm/static',
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '9a7!^gp8ojyk-^^d@*whuw!0rml+r+uaie4ur$(do9zz_6!hy0'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'zdm.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'zdm.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/home/zdm/templates',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'zdm',
    'portal',
    'admin',
    'tagging',
) 
```

* * *

## 回答 #1

> 赞同：421
> 
> 时间：2013-02-28T05:43:00.677

出于安全原因，Django 1.5 引入了[允许的主机设置。](https://docs.djangoproject.com/en/2.2/releases/1.5/#allowed-hosts-required-in-production)使用 Django 1.5 创建的设置文件有这个新部分，您需要添加：

```
# Hosts/domain names that are valid for this site; required if DEBUG is False
# See https://docs.djangoproject.com/en/1.9/ref/settings/#allowed-hosts
ALLOWED_HOSTS = [] 
```

在此处添加您的主机，`['www.beta800.net']`或`['*']`用于快速测试，[但不要`['*']`用于生产](https://docs.djangoproject.com/en/2.2/ref/settings/#allowed-hosts)。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2016-05-13T20:02:23.167

我知道这已经晚了，但我最终在这里搜索了我的错误 500 `DEBUG=False`，在我的情况下，它确实是，`ALLOWED_HOSTS`但我`os.environ.get('variable')`用来填充主机，直到我启用日志记录，我才注意到这一点，你可以将所有错误记录到以下文件中，即使在以下情况下也会记录`DEBUG=False`：

```
# settings.py
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'verbose': {
            'format' : "[%(asctime)s] %(levelname)s [%(name)s:%(lineno)s] %(message)s",
            'datefmt' : "%d/%b/%Y %H:%M:%S"
        },
        'simple': {
            'format': '%(levelname)s %(message)s'
        },
    },
    'handlers': {
        'file': {
            'level': 'DEBUG',
            'class': 'logging.FileHandler',
            'filename': 'mysite.log',
            'formatter': 'verbose'
        },
    },
    'loggers': {
        'django': {
            'handlers':['file'],
            'propagate': True,
            'level':'DEBUG',
        },
        'MYAPP': {
            'handlers': ['file'],
            'level': 'DEBUG',
        },
    }
} 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2018-02-10T19:16:28.290

我最近在 Django 2.0 中遇到了同样的问题。我能够通过设置找出问题所在`DEBUG_PROPAGATE_EXCEPTIONS = True`。见这里：[https ://docs.djangoproject.com/en/2.0/ref/settings/#debug-propagate-exceptions](https://docs.djangoproject.com/en/2.0/ref/settings/#debug-propagate-exceptions)

就我而言，错误是`ValueError: Missing staticfiles manifest entry for 'admin/css/base.css'`. 我通过本地运行解决了这个问题`python manage.py collectstatic`。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2015-06-22T19:03:09.773

In my case, reading docs of third party apps properly saved me.

The culprit? django_compressor

I had

```
{% load compress %}
{% compress css %}
 ... css files linked here ..
{% endcompress %} 
```

`DEBUG = True` always gave me 500\. To fix it, I needed a line in my settings to get it running

```
COMPRESS_ENABLED = os.environ.get('COMPRESS_ENABLED', False) 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-05-17T15:35:51.203

对，在 Django 1.5 if`DEBUG = False`中，配置 ALLOWED_HOSTS，添加没有端口号的域。例子：

```
ALLOWED_HOSTS = ['localhost'] 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-06-18T08:23:41.587

您还必须到处检查您的网址。当`DEBUG`设置为 时`False`，所有没有尾随的 URL`/`都将被视为错误，与您设置时不同`DEBUG = True`，在这种情况下，Django 将`/`在丢失的任何地方追加。所以，简而言之，确保所有链接都以斜线结尾。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2016-05-06T23:44:40.997

**补充主要答案**在开发和生产之间切换时
更改 ALLOWED_HOSTS 和 DEBUG 全局常量很烦人。`settings.py`我正在使用此代码自动设置这些设置：

```
import socket

if socket.gethostname() == "server_name":
    DEBUG = False
    ALLOWED_HOSTS = [".your_domain_name.com",]
    ...
else:
    DEBUG = True
    ALLOWED_HOSTS = ["localhost", "127.0.0.1",]
    ... 
```

如果您使用 macOS，您可以编写更通用的代码：

```
if socket.gethostname().endswith(".local"): # True in your local computer
    DEBUG = True
    ALLOWED_HOSTS = ["localhost", "127.0.0.1",]
else:
    ... 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-05-22T15:02:48.663

它是 2019 年中期，在使用 Django 开发几年后，我遇到了这个错误。让我迷惑了一晚上！不允许主机（应该抛出 400），检查其他所有内容，最后做了一些错误记录，只是发现一些丢失/或混乱的静态文件清单（在 collectstatic 之后）正在搞砸设置。长话短说，对于那些正在使用 WHITENOISE 或带有缓存（清单静态文件）的 DJANGO STATICFILE 后端的人来说，也许这是给你的。

1.  确保您设置了所有内容（就像我为 whitenoise 后端所做的那样……django 后端仍在阅读） [http://whitenoise.evans.io/en/stable/django.html](http://whitenoise.evans.io/en/stable/django.html)

2.  如果错误代码 500 仍然让您失望，请记下您的 settings.STATICFILES_STORAGE。

将其设置为任一（对于带压缩的白噪声后端）

```
STATICFILES_STORAGE = 'whitenoise.storage.CompressedStaticFilesStorage' 
```

或（保留为 django 默认值）

```
STATICFILES_STORAGE = django.contrib.staticfiles.storage.StaticFilesStorage 
```

总而言之，问题似乎来自这个白噪声缓存 + 压缩后端 -->

```
STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage' 
```

或者 django 自己的缓存后端 -->

```
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.ManifestStaticFilesStorage' 
```

...对我来说效果不佳，因为我的 css 引用了一些其他来源，这些来源可能在 collectstatic / 后端缓存期间混淆。这个问题也可能在[http://whitenoise.evans.io/en/stable/django.html#storage-troubleshoot中突出显示](http://whitenoise.evans.io/en/stable/django.html#storage-troubleshoot)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-10-09T09:55:32.057

我有一个有趣的故事。到达此页面后，我说“尤里卡！我得救了。这一定是我的问题。” 所以我在 setting.py 中插入了所需的`ALLOWED_HOSTS`列表，然后......什么也没有。相同的旧 500 错误。不，这不是因为缺少 404.html 文件。

所以这两天我忙于疯狂的理论，比如它与提供静态文件有关（理解我是一个菜鸟，菜鸟不知道他们在做什么）。

那是什么？现在是主持人先生，我们来了一个有用的提示。而我的开发 Django 版本是 1.5.something，我的生产服务器版本是 1.5.something+1... 或者可能加 2。随便。因此，在我将*settings.py*`ALLOWED_HOSTS`添加到桌面版本之后，它缺少 hwjp 请求的内容——“settings.py 中的默认值，可能带有解释性注释”——我在生产服务器上做了同样的事情它的正确域。

 *但是我没有注意到在具有更高版本 Django 的生产服务器上，settings.py 中有一个默认值，并带有解释性注释。它远低于我进入的地方，在监视器上看不见。当然，列表是空的。因此我浪费时间。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2017-04-30T00:59:36.770

我正在搜索和测试有关此问题的更多信息，我意识到在 settings.py 中指定的静态文件目录可能是导致此问题的原因，所以首先，我们需要运行此命令

```
python manage.py collectstatic 
```

在 settings.py 中，代码应如下所示：

```
STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(BASE_DIR, 'static'),
)

STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles') 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2014-01-05T18:36:43.663

`DEBUG = False`对于它的价值 - 我只在某些页面上获得了 500 。使用 pdb 追溯异常发现了一个缺失的资产（我怀疑`{% static ... %}`模板标签是 500.x 的罪魁祸首。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-11-23T18:17:31.823

ALLOWED_HOSTS is NOT the only issue, for me I had to make a 404.html and put it in the base level of my templates (not app level) - Also, you can make a 404 view and add a 404handler url but I think thats optional. 404.html fixed it

in mainproject.urls

```
handler404 = 'app.views.custom_404' 
```

in app.views

```
def custom_404(request):
    return render(request, '404.html', {}, status=404) 
```

then make a templates/404.html template

got this from another S/O post that I cannot find it

**EDIT**

also, I get 500 errors when I serve assets with whitenoise. Could not figure that out for the life of me, error was ValueError from whitenoise not being able to find an asset that I also could not find, had to go with default django serving for now

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2016-06-24T20:28:44.733

我知道这是一个非常古老的问题，但也许我可以帮助其他人。如果在设置 DEBUG=False 后出现 500 错误，您始终可以在命令行中运行 manage.py runserver 以查看不会出现在任何 Web 错误日志中的任何错误。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2015-02-02T06:58:56.503

当我这样做时，我遇到了同样的问题`DEBUG = FALSE`。这是一个综合解决方案，分散在上面的答案和其他帖子中。

默认情况下，在 settings.py 我们有`ALLOWED_HOSTS = []`. 以下是您必须`ALLOWED_HOSTS`根据场景对值进行的可能更改以消除错误：

1：您的域名：

```
ALLOWED_HOSTS = ['www.example.com'] # Your domain name here 
```

2：如果您还没有域名，您部署的服务器 IP（这是我的情况，就像一个魅力）：

```
ALLOWED_HOSTS = ['123.123.198.123'] # Enter your IP here 
```

3：如果您在本地服务器上进行测试，您可以将您的`settings.py`或编辑`settings_local.py`为：

```
ALLOWED_HOSTS = ['localhost', '127.0.0.1'] 
```

4：您也可以在`ALLOWED_HOSTS`值中提供'*'，但出于安全原因**不建议在生产环境中使用：**

```
ALLOWED_HOSTS = ['*'] # Not recommended in production environment 
```

我还在我的[博客](http://www.alirazabhayani.com/2015/01/django-setting-debug-false-causes-500-error-solved.html)上发布了详细的解决方案，您可能需要参考。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2020-05-20T05:25:13.737

您可能希望`python manage.py collectstatic`在设置后运行`DEBUG = False`并`ALLOWED_HOSTS = ['127.0.0.1']`在`settings.py`. 在这两个步骤之后，即使在 DEBUG=False 模式下，我的 Web 应用程序也可以在我的本地服务器上运行良好。

顺便说一句，我在`settings.py`.

```
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware', # what i added
    'django.middleware.common.CommonMiddleware', # and so on...
]

STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage' 
```

我假设白噪声设置可能与 collectstatic 命令有关。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-04-18T19:19:48.247

我有类似的问题，在我的情况下，它是由于在 body 标记内有一个 Commented 脚本引起的。

```
<!--<script>  </script>--> 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-04-30T15:06:41.567

我知道这篇文章已经很老了，但它今天仍然完全相关。

`DEBUG = False`对于它的价值 - 我的网站上的所有页面都获得了 500分。

我在调试时没有回溯。

我必须浏览我网站内模板中的每个静态链接，并在我的图像源前面找到一个 /（正斜杠）。{％ 静止的 ... ％}。这导致了 500 错误，但在没有错误的情况下`DEBUG = False`工作得很好。`Debug = True`很烦人！被警告！由于正斜杠浪费了许多时间......

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-02-15T00:35:55.827

这可能对其他人有所帮助，在我的情况下是缺少图标的问题。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2013-10-10T18:06:10.960

我认为它也可能是http服务器设置。我的仍然坏了，一直都有 ALLOWED_HOSTS 。我可以在本地访问它（我使用 gunicorn），但当 DEBUG=False 时不能通过域名。当我尝试使用域名时，它会给我错误，所以让我认为这是一个与 nginx 相关的问题。

这是我的 nginx 配置文件：

```
server {
    listen   80;
    server_name localhost myproject.ca www.myproject.ca;
    root /var/web/myproject/deli_cms;

    # serve directly - analogous for static/staticfiles
    location /media/ {
        # if asset versioning is used
        if ($query_string) {
            expires max;
        }
    }
    location /admin/media/ {
        # this changes depending on your python version
        root /var/web/myproject/lib/python2.6/site-packages/django/contrib;
    }
    location /static/ {
    alias /var/web/myproject/deli_cms/static_root/;
    }

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    }
    # what to serve if upstream is not available or crashes
    error_page 500 502 503 504 /media/50x.html;
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-09-18T10:39:04.573

我遇到了这个问题。原来我在模板中包含了`static`一个不再存在的文件，使用模板标签。查看日志向我显示了问题。

我想这只是这种错误的许多可能原因之一。

故事的寓意：始终记录错误并始终检查日志。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-12-26T13:56:22.003

感谢@squarebear，在日志文件中，我发现了错误： `ValueError: The file 'myapp/styles.css' could not be found with <whitenoise.storage.CompressedManifestStaticFilesStorage ...>`.

我的 django 应用程序有一些问题。我删除了
`STATICFILES_STORAGE = 'whitenoise.django.GzipManifestStaticFilesStorage'`从 heroku 的文档中找到的行。

我还必须在 django 应用程序的根目录中添加额外的目录（感谢[另一个 SO answer](https://stackoverflow.com/a/44232706/6210807)） ，即使我没有使用它。然后在运行服务器之前运行命令解决了问题。最后，它开始正常工作。`static``myapp/static``python manage.py collectstatic`

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-08-27T20:30:27.300

我开始以以下形式获得 debug=False 的 500

```
django.urls.exceptions.NoReverseMatch: Reverse for 'home' not found.
or...
django.urls.exceptions.NoReverseMatch: Reverse for 'about' not found. 
```

当提高**django.core.exceptions.ValidationError**而不是提高**rest_framework.serializers.ValidationError**

公平地说，它之前已经提高了 500，但是作为 ValidationError，debug=False，这变成了 NoReverseMatch。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-10-29T10:22:46.450

聚会有点晚了，当然可能会有很多问题，但我遇到了类似的问题，结果发现我的 html 备注中有 {% %} 特殊字符......

```
<!-- <img src="{% static "my_app/myexample.jpg" %}" alt="My image"/> --> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-01-10T01:35:11.437

我知道这是一个老问题，但是当 DEBUG=False 时我也收到 500 错误。几个小时后，我意识到我忘记在我的 base.html 中用斜杠结束一些链接。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-05-02T12:23:56.573

我有一个视图在 debug=false 中抛出 500 错误，但在 debug=true 中工作。对于遇到这种情况并且允许的主机不是问题的任何人，我通过更新指向错误位置的模板的静态标签来修复我的观点。

所以我建议在使用的任何模板中检查链接和标签是否密封，也许某些东西在调试时会漏网，但在生产中会出错。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2022-01-23T20:56:29.533

我的问题是错误的 404.html 模板 - 我复制并粘贴了

```
<a href="{% url 'home:index' %}"> 
```

而不是（在我的情况下）

```
 <a href="{% url 'posts:index' %}"> 
```

这就是为什么出现 500

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-10-07T20:53:04.013

这是旧的，我的问题最终与问题有关，但与 OP 无关，但我的解决方案适用于尝试上述方法无济于事的其他人。

我在 Django 的修改版本中有一个设置，用于缩小仅在 DEBUG 关闭时运行的 CSS 和 JS 文件。我的服务器没有安装 CSS minifier 并抛出了错误。如果您使用的是 Django-Mako-Plus，这可能是您的问题。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-03-01T15:05:22.513

需要注意的一件小事，如果数组中包含 None，那么所有后续允许的主机都将被忽略。

```
ALLOWED_HOSTS = [
    "localhost",
    None,
    'example.com', # First DNS alias (set up in the app)
    #'www.example.com', # Second DNS alias (set up in the app)
] 
```

`Django version 1.8.4`

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-07-18T22:10:49.387

我遇到了与此类似的问题，我将报告我是如何解决我的问题的，因为可能有人也遇到了同样的问题。

在我的情况下，错误是由于服务器没有从主页中找到一些静态文件引起的。

所以请确保错误只发生在`index`或发生在另一个页面上。如果问题仅发生在索引中，很可能您需要检查静态文件。我建议打开 Chrome 预览控制台并检查是否有任何错误。

就我而言，服务器找不到`favicon.ico`其他两个 CSS。

为了解决这个问题，我通过了`python manage.py collectstatic`，它奏效了。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-10-10T20:39:48.323

当 DEBUG=False 时，我发现了另一个导致 500 错误的原因。我使用 Django`compressor`实用程序，我们的前端工程师在 Django 模板的块*内添加了对字体文件的引用。*`compress css`像这样：

```
{% compress css %}
    <link href="{% static "css/bootstrap.css" %}" rel="stylesheet">
    <link href="{% static "css/bootstrap-spinedit.css" %}" rel="stylesheet">
    <link href="{% static "djangular/css/styles.css" %}" rel="stylesheet">
    <link href="{% static "fonts/fontawesome-webfont.ttf" %}" rel="stylesheet">
{% endcompress %} 
```

解决方案是将链接移动到`ttf`该行下方的文件`endcompress`。

* * *

## 回答 #31

> 赞同：-5
> 
> 时间：2020-03-21T16:18:36.593

好吧，在尝试了很多事情之后，正确的解决方案是......

您需要设置`DEBUG = 'FALSE'`not `False`or `FALSE`，但`'FALSE'`使用`''`

* * *

## 回答 #32

> 赞同：-6
> 
> 时间：2013-12-17T06:51:12.653

如果要允许所有主机。使用 ALLOWED_HOSTS = ['*',] 而不是 ALLOWED_HOSTS = ['*']*

# jquery - jQuery：复制内容，剥离 标签，并创建换行符

> ID：15128136
> 
> 赞同：0
> 
> 时间：2013-02-28T05:27:16.503
> 
> 标签：jquery, tags, textarea, markup, strip

我成功地创建了一种将 div 容器的内容复制到 textarea 字段中的行为：

```
$('a').click(function() {
    var contents = $('.content').html();
    $('textarea').val(contents);    
}); 
```

[http://jsfiddle.net/foomarks/E5sPj/6/](http://jsfiddle.net/foomarks/E5sPj/6/)

然而，我被难住了：

1.  如何去除段落标签。
2.  如何创建一个换行符来表示段落标签将被剥离的位置。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:31:27.707

尝试这个

```
$('a').click(function() {

var contents = $('.content').html();
contents = contents.replace(/<p>(.*?)<\/p>/gi,"$1\n");
$('textarea').val(contents);    

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:31:33.667

```
$('a').click(function() {

    var contents = $('.content').html();

    contents = contents.replace(/<p>/g, '');
    contents = contents.replace(/<\/?p>/g, '\r\n');

    $('textarea').val(contents);

}); 
```

[http://jsfiddle.net/samliew/E5sPj/9/](http://jsfiddle.net/samliew/E5sPj/9/)

如果您也想替换前导空格，请执行以下操作：

```
$('a').click(function() {

    var contents = $('.content').html();

    contents = contents.replace(/\s{2,}/g, '');
    contents = contents.replace(/<p>/g, '');
    contents = contents.replace(/<\/?p>/g, '\r\n\r\n');

    $('textarea').val(contents);

}); 
```

[http://jsfiddle.net/samliew/E5sPj/11/](http://jsfiddle.net/samliew/E5sPj/11/)

# git - Git没有反映实时变化

> ID：15128137
> 
> 赞同：-1
> 
> 时间：2013-02-28T05:27:18.583
> 
> 标签：git

我设置 Git 存储库的方式是 Workstation -> Production。用户进行更改、提交、推送，然后在生产环境中看到它们。至少这是我希望的样子。

根据我的研究和[这篇](http://joemaller.com/990/a-web-focused-git-workflow/)文章，每个都设置为 Workstation -> Staging -> Production。不幸的是，由于新服务器的成本以及从事该项目的所有人员都是远程的，我无法采用这条路线。

我的问题是：一旦更改提交并推送到 master，我怎样才能使更改反映在网站上？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:10:59.597

首先：git 与构建代码或将其部署到生产环境无关。这只是一个VCS。因此，您必须找到一种从 git 触发构建和部署的方法。

Git 有一个[钩子](http://www.kernel.org/pub//software/scm/git/docs/githooks.html)的概念，它在某些情况下可以帮助你。如果您是`Production`repo 的维护者（我相信它是 repo），只需`post-receive`在其上配置 hook 以触发您需要的内容。但我需要承认，钩子是一种低级解决方案，您必须为所有要执行的操作编写批处理。

使用[github](https://github.com/)或[bitbucket](https://bitbucket.org/)没有问题，只需转到`Settings`-> `Service Hooks`(github) 或`Administration`-> `Services`(bitbucket) 并在那里为 repo 配置 hooks。这样做的缺陷是您只能触发一小部分公共服务，并且它可能无法与您的 Intranet 软件一起使用。

恕我直言，最强大的方法是维护您自己的[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)服务器（[Travis CI](https://travis-ci.org/)可以在简单的情况下适合您）并将其配置为轮询您的 repo 并自动构建发布分支（包含您需要的所有测试！）在后期部署阶段. 在这种情况下，您将完全控制发布代码的过程。

# bash - 试图从用户选择数组中获取目录名称

> ID：15128138
> 
> 赞同：0
> 
> 时间：2013-02-28T05:27:20.793
> 
> 标签：bash

我构建了这个数组来列出目录的内容，允许用户输入数字而不是确切的目录名称。我不知道如何从只有数字的输入中获取选择的目录名称？我需要它来确定从将要使用的数组中选择的确切目录。感谢所有愿意提供帮助的人。

```
if [ -d $TDDIR ]; then
# List folders in $TDDIR
VAR1=1
FILES=( `ls $TDDIR` )
FILECNT=${#FILES[*]}
# List number of folders available
clear
echo "Current list of folders to pick from."
echo
while [ $VAR1 -lt $FILECNT ]; do 
    echo -e "[$VAR1] \t ${FILES[VAR1]}"
    let "VAR1 += 1"
done
# Reduce VAR1 by one
let "VAR1 -= 1" 
# Have user choose which to use for scan
read -p "Which file would you like to scan 1 - $VAR1 or 0 to exit? :" INPUT
  if [ $INPUT -eq '0' ]; then 
    echo "You chose to quit. Exiting now." 
    sleep 2
    exit 0
  fi
while (( $INPUT > $FILECNT || $INPUT < 1 || $INPUT > $VAR1 )); do
echo
echo "You selected $INPUT."
read -p "$INPUT is not valid.  Choose a valid option: " INPUT
done
else    exit
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:22:12.813

```
echo ${FILES[(($VAR - 1))]} 
```

-1 是因为 bash 数组的索引从 0 开始。

附带说明， ls 不适合该任务（请参阅：[解析 ls 输出](http://mywiki.wooledge.org/ParsingLs)s）

此外，您可以尝试使用 select 作为菜单（请参阅：[Bash Script Menus and Functions](http://grover.open2space.com/content/bash-script-menus-and-functions)）

# c# - 如何将列表转换为数据表

> ID：15128140
> 
> 赞同：3
> 
> 时间：2013-02-28T05:27:32.857
> 
> 标签：c#, list, ado.net, datatable, datarow

我从另一个数据表中获取值作为列表的输入。现在我需要将这些列表值保存到另一个 DataTable 中。

列表：

```
List<DataRow> list = slectedFieldsTable.AsEnumerable().ToList();
foreach (DataRow dr in slectedFieldsTable.Rows)
{
    list.Add(dr);
} 
```

新数据表：

```
DataRow newRow = tempTable.NewRow();
newRow["Field Name"] = fieldLabel;
newRow["Field Type"] = fieldType;

for(int gg =0 ; gg<list.Count; gg++)
{
    tempTable.Rows.Add(????);
} 
```

我被困在这里将行添加到新数据表中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-28T10:29:37.790

```
public static DataTable ToDataTable<T>(List<T> items)
{
        DataTable dataTable = new DataTable(typeof(T).Name);

        //Get all the properties
        PropertyInfo[] Props = typeof(T).GetProperties(BindingFlags.Public | BindingFlags.Instance);
        foreach (PropertyInfo prop in Props)
        {
            //Setting column names as Property names
            dataTable.Columns.Add(prop.Name);
        }
        foreach (T item in items)
        {
           var values = new object[Props.Length];
           for (int i = 0; i < Props.Length; i++)
           {
                //inserting property values to datatable rows
                values[i] = Props[i].GetValue(item, null);
           }
           dataTable.Rows.Add(values);
      }
      //put a breakpoint here and check datatable
      return dataTable;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-23T15:38:59.407

变量声明：

```
 DataTable tempTable = new DataTable();
    DataTable slectedFieldsTable = new DataTable();
    DataRow newRow;
    List<object> list = new List<object>(); 
```

在数据表中添加列：

```
 slectedFieldsTable = new DataTable();
    slectedFieldsTable.Columns.Add("Field Name");
    slectedFieldsTable.Columns.Add("Field Type"); 
```

在 DataTable 中添加值：

```
 slectedFieldsTable.Rows.Add("1", "AAA");
    slectedFieldsTable.Rows.Add("2", "BBB");
    slectedFieldsTable.Rows.Add("3", "CCC"); 
```

将数据表转换为列表：

```
 foreach (DataRow dr in slectedFieldsTable.Rows)
    {
        list.Add(dr);
    } 
```

在另一个数据表中添加列：

```
 tempTable.Columns.Add("Field Name", typeof(string));
    tempTable.Columns.Add("Field Type", typeof(string)); 
```

将列表转换为数据表：

```
 foreach(DataRow dr in list)
    {
        newRow = tempTable.NewRow();
        newRow["Field Name"] = dr.ItemArray[0].ToString();
        newRow["Field Type"] = dr.ItemArray[1].ToString();
        tempTable.Rows.Add(newRow);
        tempTable.AcceptChanges();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T05:38:06.547

使用 CopyToDataTable() 方法。 [复制到数据表](http://msdn.microsoft.com/en-us/library/bb396189.aspx)

```
IEnumerable<DataRow> query = TempselectedFieldsTable.AsEnumerable().ToList();

// Create a table from the query.
DataTable boundTable = query.CopyToDataTable<DataRow>(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-18T19:53:30.927

提供的答案`ToDataTable`是一个非常好的开始，但它缺少一些关键要素。也就是说，它忽略了`List`项目属性可能：

*   ...被标记`ReadOnly`
*   ...使用`DisplayName`属性
*   ...有一个`DefaultValue`应该`DataColumn`知道的
*   ...是`Nullable`
*   ...被标记`BrowsableAttribute(false)`

以下是返回 a 的扩展方法`DataTable`，或者说明上述情况，或者为您的代码提供应用它们的方法。它还使用 an`Interface`从类对象中获取值，而不是`Reflection`.

```
public static DataTable ToDataTable<T>(this IList<T> lst, bool includeAll = true)
{
    DataTable dt = new DataTable();
    DataColumn dc;
    PropertyDescriptor pd;
    bool Browsable;

    PropertyDescriptorCollection propCol = TypeDescriptor.GetProperties(typeof(T));

    for (int n = 0; n < propCol.Count; n++)
    {
        pd = propCol[n];
        Type propT = pd.PropertyType;

        dc = new DataColumn(pd.Name);

        // if Nullable, get underlying type
        // the first test may not be needed
        if (propT.IsGenericType && Nullable.GetUnderlyingType(propT) != null )
        {
            propT = Nullable.GetUnderlyingType(propT);
            dc.DataType = propT;
            dc.AllowDBNull = true;
        }
        else
        {
            dc.DataType = propT;
            dc.AllowDBNull = false;
        }

        // is it readonly?
        if (pd.Attributes[typeof(ReadOnlyAttribute)] != null)
        {
            dc.ReadOnly = ((ReadOnlyAttribute)pd.
                     Attributes[typeof(ReadOnlyAttribute)]).IsReadOnly;
        }         

        // DefaultValue ...
        if (pd.Attributes[typeof(DefaultValueAttribute)] != null)
        {
            dc.DefaultValue = ((DefaultValueAttribute)pd.
                   Attributes[typeof(DefaultValueAttribute)]).Value;
        }

        // caption / display name
        dc.ExtendedProperties.Add("DisplayName", dc.Caption);
        if (pd.Attributes[typeof(DisplayNameAttribute)] != null)
        {
            // these are usually present but blank
            string theName = ((DisplayNameAttribute)pd.
                   Attributes[typeof(DisplayNameAttribute)]).DisplayName;
            dc.Caption = string.IsNullOrEmpty(theName) ? dc.Caption : theName;
            // DGV doesnt use Caption...save for later
            dc.ExtendedProperties["DisplayName"] = dc.Caption;
        }

        Browsable = true;
        dc.ExtendedProperties.Add("Browsable", Browsable);
        var foo = pd.Attributes[typeof(BrowsableAttribute)];
        if (pd.Attributes[typeof(BrowsableAttribute)] != null) 
        {
            Browsable = ((BrowsableAttribute)pd.Attributes[typeof(BrowsableAttribute)]).Browsable;
            // no such thing as a NonBrowsable DataColumn
            dc.ExtendedProperties["Browsable"] = Browsable;
        }

        // ToDo: add support for custom attributes

        if (includeAll || Browsable)
        {
            dt.Columns.Add(dc);
        }
    }

    // the lst could be empty such as creating a typed table
    if (lst.Count == 0) return dt;

    if (lst[0] is IDataValuesProvider)
    {
        IDataValuesProvider dvp;
        // copy the data - let the class do the work
        foreach (T item in lst)
        {
            dvp = (IDataValuesProvider)item;
            dt.Rows.Add(dvp.GetDataValues(includeAll).ToArray());
        }
    }
    else
    {
        List<object> values;
        foreach (T item in lst)
        {
            values =  new List<object>();
            // only Browsable columns added
            for (int n = 0; n < dt.Columns.Count; n++)
            {
                 values.Add(propCol[dt.Columns[n].ColumnName].GetValue(item));
            }
            dt.Rows.Add(values.ToArray());
        }
    }   

    return dt;
} 
```

该方法允许您指定是否`Browsable`应将非属性的列添加到`DataTable`. 如果需要，您可以完全省略它们，而不是稍后隐藏这些列。

接口证明了按顺序从集合成员获取数据值的方法（作为反射循环的替代方案）：

```
public interface IDataValuesProvider
{
    IEnumerable<object> GetDataValues(bool includeAll);
}

... on the class:
public class StockItem : IDataValuesProvider
{
    public int Id { get; set; }
    public string ItemName {get; set;}
    [Browsable(false), DisplayName("Ignore")]
    public string propA {get; set;}
    [ReadOnly(true)]
    public string Zone { get; set; }
    public string Size {get; set;}
    [DisplayName("Nullable")]
    public int? Foo { get; set; }
    public int OnHand {get; set;}
    public string ProdCode {get; set;}
    [Browsable(false)]
    public string propB { get; set; }
    public DateTime ItemDate {get; set;}

    // IDataValuesProvider implementation
    public IEnumerable<object> GetDataValues(bool IncludeAll)
    {
        List<object> values = new List<object>();

        values.AddRange(new object[] {Id, ItemName });
        if (IncludeAll) values.Add(propA);

        values.AddRange(new object[] { Zone, Size, Foo, OnHand, ProdCode });
        if (IncludeAll) values.Add(propB);

        values.Add(ItemDate);

        return values;
    }
} 
```

以与类中列出的顺序相同的顺序添加数据值；添加属性时请务必更新它。反射版本仍然存在，因此您可以使用任何一种方式。

最后，还有一些 common`Attribute`没有相关`DataColumn`属性。该方法为您存储这些，`ExtendedProperties`以便您轻松地将它们应用于 DGV：

```
var dtX = someData.ToDataTable();

dgvB.SuspendLayout();
dgvB.DataSource = dtX;

// process extended props
foreach (DataColumn dc in dtX.Columns)
{
    // no need to test, the code adds them everytime
    //if (dc.ExtendedProperties.ContainsKey("DisplayName"))
    //{ 
        dgvB.Columns[dc.ColumnName].HeaderText = dc.ExtendedProperties["DisplayName"].ToString(); 
    //}
    //if (dc.ExtendedProperties.ContainsKey("Browsable"))
    //{
        dgvB.Columns[dc.ColumnName].Visible = (bool)dc.ExtendedProperties["Browsable"];
    //}
}
dgvB.ResumeLayout(); 
```

使用上面显示的类列表的结果：

[![在此处输入图像描述](../Images/5a462d2b163884ec84c887aca066cd6e.png)](https://i.stack.imgur.com/0LrfP.jpg)

Both `OnHand`and`Foo`显示`DisplayName`and both `PropA`and`PropB`被隐藏。最重要的是，为`ReadOnly`和`Nullable`属性创建的列会相应地起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T05:52:26.710

尝试这个：

```
 foreach (DataRow dr in list)
     {
        tempTable.Rows.Add(dr);
     } 
```

# mongodb - 在mongodb中搜索多个数组

> ID：15128145
> 
> 赞同：0
> 
> 时间：2013-02-28T05:27:48.870
> 
> 标签：mongodb, mongodb-php

我想在数组中搜索一个值

```
`[_id] => MongoId Object (
[$id] => 511f4ce622efc34f15000001
)
[metadata] => Array (
[filename] => 6410-funny_face.gif
[parrent] => myfolder/newfolder2
[user] => Array ( >>>>>>>> i need to fetch all users
    [root] => 7  
    [admin] => 7
    [user] => 0
)
[group] => Array (
    [23] => 2
)
)
[filename] => 6410-funny_face.gif
[uploadDate] => MongoDate Object (
[sec] => 1361005798
[usec] => 799000
)
[length] => 3083
[chunkSize] => 262144
[md5] => eb3846f78f461165e5bf59a05707edd1` 
```

我需要在 PHP 或 MongoShell 中找到用户的键和值，即时`db.collection.find(array(metadata.filename: 6410-funny_face.gif));`给出正确答案，但在查找时 `db.collection.find(array(metadata.user: array(7)));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:01:52.480

```
db.collection.find({"metadata.user.root":7}) 
```

如果我理解你的问题，这应该有效。

# uitabbarcontroller - 包含 UISplitViewController 的 UITabBarController 无法正确处理 iPad 上的旋转

> ID：15128146
> 
> 赞同：1
> 
> 时间：2013-02-28T05:27:59.020
> 
> 标签：uitabbarcontroller, uisplitviewcontroller, ios6.1

我在 iOS 6.1.2 中的 iPad 上使用带有 UISplitViewController 的 UITabBarController（主视图控制器具有 UITableViewController）时遇到异常行为。如果我有多个选项卡，其中至少一个选项卡包含拆分视图控制器，并且在查看包含拆分视图控制器的选项卡时处于横向模式，然后我切换到另一个选项卡，然后移动到纵向模式，然后按包含拆分视图控制器的选项卡，接下来发生的是主视图控制器（表视图控制器）将在详细视图顶部显示表视图，而它显然不应该在那里。此行为仅在应用程序第一次加载时发生，但行为一致。

这个场景很容易通过简单地创建一个项目来重新创建，该项目是一个使用 iPad 设备和 Core Data 的拆分视图应用程序（没有使用 Core Data 就没有尝试过）。创建项目后，使用情节提要并添加标签栏控制器并使其成为初始视图控制器，然后将标签栏控制器的视图控制器序列添加到拆分视图控制器。之后，只需要在代码中进行一项更改，即更改 AppDelegate.m 中 application:didfinishLaunchingWithOptions 中的一行：

更改以下模板代码：

```
UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController; 
```

至：

```
UITabBarController *tbc = (UITabBarController *)self.window.rootViewController;
UISplitViewController *splitViewController = [tbc.viewControllers lastObject]; 
```

也许我违反了一些 iOS 规则，并试图做一些我不应该做的事情？我想做的就是能够在几个不同的拆分视图控制器之间切换。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T12:39:00.057

看看这个 Git。

[https://github.com/nalyd88/DCToolkit/tree/master/DCToolkit/DCToolkit](https://github.com/nalyd88/DCToolkit/tree/master/DCToolkit/DCToolkit)

据我了解，问题源于拆分视图控制器在不可见时未更新其方向。

这里使用了一个子类选项卡视图控制器和拆分视图控制器来传递消息。

感谢[http://objectiveseesharp.wordpress.com/](http://objectiveseesharp.wordpress.com/)上的 Dylan 提供的解决方案！我刚找到它。

# android - 在 Android 中使用推送通知触发 BroadcastReceiver

> ID：15128151
> 
> 赞同：0
> 
> 时间：2013-02-28T05:28:55.773
> 
> 标签：android, push-notification

如何一点击通知就触发广播！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:05:02.383

在 onMessage() 中扩展 GCMBaseIntentService 的类上调用 setNotificationMethod 如下

```
private void setNotification(int defaults, String message, int flag) {

    NotificationManager mNotificationManager;
    int MOOD_NOTIFICATIONS = 12345;

    mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    // This method sets the defaults on the notification before posting it.
    Intent handleNotification = new Intent(this, PushNotifier.class);
    handleNotification.putExtra("Result", resultfrmServer);

    // This is who should be launched if the user selects our notification.
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            handleNotification, PendingIntent.FLAG_UPDATE_CURRENT);

    final Notification notification = new Notification(
            R.drawable.ic_launcher, // the icon for the status bar
            message, // the text to display in the ticker
            System.currentTimeMillis()); // the timestamp for the
                                            // notification
    notification.setLatestEventInfo(this, // the context to use
            getText(R.string.app_name),
            // the title for the notification
            message, // the details to display in the notification
            contentIntent); // the contentIntent (see above)

    notification.defaults = defaults;

    notification.flags = flag;
    mNotificationManager.notify(MOOD_NOTIFICATIONS,notification);
} 
```

现在，当单击通知时，PushNotifier 类将启动。在这里，您可以决定是要启动其他活动还是注册广播接收器。此外，如果您需要在 pushnotification 中收到的信息，您可以相应地使用待处理的意图和用户将其发送到 pushNotifier 类。

# php - PHP表单邮件发送空白附件

> ID：15128153
> 
> 赞同：1
> 
> 时间：2013-02-28T05:28:57.697
> 
> 标签：php, forms, email, email-attachments

我正在尝试从 PHP 表单中获取两份简历到我的电子邮件 ID。我完美地获取了所有信息，但附件是空白的。我找不到原因。

任何帮助将不胜感激。请在下面找到 HTML 和 PHP 代码。提前致谢。

<------------------------HTML 代码------------------------ ----------------->

```
<form name="Form5" method="post" action="js/curent-job.php" onsubmit="return ValidateForm2()">
<table width="55%" align="left" cellpadding="0"  cellspacing="0">
<tr>
<td colspan="3" style="height:70px;">

<p>Please submit your updated resume with the below details. </p>

</td>
</tr>

<tr>
<td width="93"><label for="Full_Name" class="required">Name:</label></td>
<td width="40">&nbsp;</td>
<td width="252"><input name="Full_Name" id="Full_Name" maxlength="80" style="width: 250px; height:20px" type="text"></td>
</tr>

<tr style="height:5px">
<td colspan="3"></td>
</tr>

<tr>
<td><label for="Tel_No" class="required">Telephone:</label></td>
<td>&nbsp;</td>
<td><input name="Tel_No" id="Tel_No" maxlength="100" style="width: 250px; height:20px" type="text"></td>
</tr>

<tr style="height:5px">
<td colspan="3"></td>
</tr>

<tr>
<td> <label for="Email_Address" class="required">Email Id:</label></td>
<td>&nbsp;</td>
<td> <input name="Email_Address" id="Email_Address" maxlength="100" style="width: 250px; height:20px" type="text"></td>
</tr>

<tr style="height:5px">
<td colspan="3"></td>
</tr>

<tr>
<td> <label for="Resume" class="required">Resume 1:</label></td>
<td>&nbsp;</td>
<td> <input name="Resume" id="Resume" maxlength="100" type="file"></td>
</tr>

<tr>
<td> <label for="Resume2" class="required">Resume 2 :</label></td>
<td>&nbsp;</td>
<td> <input name="Resume2" id="Resume2" maxlength="100" type="file"></td>
</tr>

<tr style="height:5px">
<td colspan="3"></td>
</tr>

<tr>
<td><label for="Description" class="required">Description:</label></td>
<td>&nbsp;</td>
<td><textarea style="width: 250px; height: 60px;" name="Description" id="Description" maxlength="3000"></textarea></td>
</tr>

<tr style="height:5px">
<td colspan="3"></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="image" src="images/button.png" width="75" height="30" /></td>
</tr>

</table>
</form>

<------------------------PHP CODE---------------------------------------->

<?php 

if(isset($_POST['Email_Address'])) {

    $files = array("Resume.docx", "Resume2.docx");

    $email_to = "abc@mydomain.com";
    $email_subject = "My Company - Career Enquiry";
    $thankyou = "http://www.mydomain.com/thanks.html";
    $email_sender = "admin@mydomain.com";

    // boundary
    $semi_rand = md5(time());
    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

    function died($error) {
        echo "Sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    $full_name = $_POST['Full_Name']; // required
    $email_from = $_POST['Email_Address']; // required
    $telephone = $_POST['Tel_No']; //required
    $comments = $_POST['Description']; // required

    $email_message = "Message details below.\r\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Full Name: ".clean_string($full_name)."\r\n";
    $email_message .= "Email: ".clean_string($email_from)."\r\n";
    $email_message .= "Contact Number: ".clean_string($telephone)."\r\n";
    $email_message .= "Message: ".clean_string($comments)."\r\n";

    // multipart boundary
$email_message .= "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $email_message . "\n\n";
$email_message .= "--{$mime_boundary}\n";

// preparing attachments
 for($x=0;$x<count($files);$x++){
    $file = fopen($files[$x],"rb");
    $data = fread($file,filesize($files[$x]));
    fclose($file);
    $data = chunk_split(base64_encode($data));
    $email_message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$files[$x]\"\n" .
    "Content-Disposition: attachment;\n" . " filename=\"$files[$x]\"\n" .
    "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
    $email_message .= "--{$mime_boundary}\n";
}

$headers = 'From: '.$email_sender."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
// headers for attachment
    $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\""; 
@mail($email_to, $email_subject, $email_message, $headers);
header("Location: $thankyou");
?>
<script>location.replace('<?php echo $thankyou;?>')</script>
<?php
}
die();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:31:58.277

`enctype="multipart/form-data"`在您的开始表单标签中是必需的，这允许表单将文件传输到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:40:52.363

它正在发送电子邮件，因为您手动描述了文件

```
$files = array("Resume.docx", "Resume2.docx"); 
```

未添加多部分/表单数据

```
enctype="multipart/form" 
```

并处理上传的文件，如果上传它会正常工作

# android - 使用 GraphView 库获取 android 实时图的固定值

> ID：15128155
> 
> 赞同：2
> 
> 时间：2013-02-28T05:29:00.173
> 
> 标签：android, real-time, android-graphview

[我正在尝试使用jjoe64GraphView](https://github.com/jjoe64/GraphView)中的 GraphView 库在 android 中创建实时图形视图。现在得到一个 Y 轴值不断变化的实时图表。任何人都可以帮助我更改这个具有固定值 Y 轴的实时图表吗？

谢谢....

# android - 在eclipse中增加内存大小

> ID：15128170
> 
> 赞同：0
> 
> 时间：2013-02-28T05:30:46.303
> 
> 标签：android, eclipse, android-emulator

我在 Eclipse 中运行 android 应用程序。它非常慢（显示总堆大小为 230）。我有 8GB RAM，所以我想增加堆大小以使我的应用程序运行得更快。谁能给我建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:36:37.920

在 Eclipse 根目录中打开 eclipse.ini 文件并将值 -Xms 和 -Xmx 更改为您希望 Eclipse 使用的最小和最大内存量，在您的情况下，可以使用这些设置：

-Xms1024m -Xmx2048m

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:36:04.303

转到 eclipse 安装文件夹并打开`eclipse.ini`并用 .Now 替换最后一行
`-Xmx1024m`。现在将为 eclipse 保留 1gb RAM。您可以根据需要提供任何尺寸。

# c++ - 从串口读取数据时出错

> ID：15128172
> 
> 赞同：1
> 
> 时间：2013-02-28T05:30:47.627
> 
> 标签：c++, visual-c++, serial-port

我正在用 Visual C++ 编写一个程序来访问串行端口。代码如下：-

```
#include "stdafx.h"
#include <windows.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <commdlg.h>

int nread,nwrite;

void main()
{

 COMMTIMEOUTS timeouts;
 COMMCONFIG dcbSerialParams;
 char *words,*buffRead, *buffWrite;
 DWORD dwBytesWritten,dwBytesRead;

 HANDLE hSerial= CreateFile(L"COM1", GENERIC_READ | GENERIC_WRITE,
                       0,0,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,0);
 if ( hSerial == INVALID_HANDLE_VALUE) 
 {
 if (GetLastError() == ERROR_FILE_NOT_FOUND)
 {
 printf(" serial port does not exist \n");
 }
 printf(" some other error occured. Inform user.\n");
 }

 //DCB   dcbSerialParams ;
 //GetCommState( hSerial, &dcbSerialParams.dcb);
 if (!GetCommState(hSerial, &dcbSerialParams.dcb)) 
 {
 printf("error getting state \n");
 }

 dcbSerialParams.dcb.DCBlength = sizeof(dcbSerialParams.dcb);

 dcbSerialParams.dcb.BaudRate = CBR_1200;
 dcbSerialParams.dcb.ByteSize = 8;
 dcbSerialParams.dcb.StopBits = ONESTOPBIT;
 dcbSerialParams.dcb.Parity = NOPARITY;

 dcbSerialParams.dcb.fBinary = TRUE;
 dcbSerialParams.dcb.fDtrControl = DTR_CONTROL_DISABLE;
 dcbSerialParams.dcb.fRtsControl = RTS_CONTROL_DISABLE;
 dcbSerialParams.dcb.fOutxCtsFlow = FALSE;
 dcbSerialParams.dcb.fOutxDsrFlow = FALSE;
 dcbSerialParams.dcb.fDsrSensitivity= FALSE;
 dcbSerialParams.dcb.fAbortOnError = TRUE;

if (!SetCommState(hSerial, &dcbSerialParams.dcb)) 
{
printf(" error setting serial port state \n");
}

GetCommTimeouts(hSerial,&timeouts);

timeouts.ReadIntervalTimeout = 1000;
timeouts.ReadTotalTimeoutConstant = 1000;
timeouts.ReadTotalTimeoutMultiplier = 1000;
timeouts.WriteTotalTimeoutConstant = 1000;
timeouts.WriteTotalTimeoutMultiplier= 1000;

if(!SetCommTimeouts(hSerial, &timeouts)) 
{
printf("error setting port state \n");
}

//****************Write Operation*********************//
words = "B";
nwrite = strlen(words);

buffWrite = words;
dwBytesWritten = 0;

if (!WriteFile(hSerial, buffWrite, nwrite, &dwBytesWritten, NULL)) 
{ 
printf("error writing to output buffer \n");
}
printf("Data written to write buffer is\n %s \n",buffWrite);

//***************Read Operation******************//
buffRead = 0;
dwBytesRead = 0;
nread = strlen(words);

if (!ReadFile(hSerial, buffRead, nread, &dwBytesRead, NULL)) 
{
printf("error reading from input buffer \n");
}
printf("Data read from read buffer is \n %s \n",buffRead);

CloseHandle(hSerial);

} 
```

上面的程序在**写操作**（即在串口上写数据）时工作正常，但在**读操作**时它不是从串口读取数据。

我在控制台窗口上得到输出如下： -

```
Data written to write buffer is
B
error reading from input buffer
Data read from read buffer is
<null> 
```

我想知道我在哪里出错以及如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:30:26.250

第二个 ReadFile 参数不能为 NULL。它应该是指向某个缓冲区的有效指针，例如：

```
dwBytesRead = 0;
nread = strlen(words);
buffRead = new char[nread + 1];
memset(buffRead, 0, nread+1];   // ensure that string will be null-terminated

if (!ReadFile(hSerial, buffRead, nread, &dwBytesRead, NULL)) 
{
    printf("error reading from input buffer \n");
}

...
delete[] buffRead; 
```

# javascript - windows 8 移动应用程序 - 获取在线数据并显示 javascript

> ID：15128173
> 
> 赞同：4
> 
> 时间：2013-02-28T05:30:57.867
> 
> 标签：javascript, windows-8, microsoft-metro, windows-store-apps, winjs

我是 Windows 8 移动应用程序开发的新手。

我正在 Javascript/HTML5 中自定义一个“网格应用程序”，并尝试修改 data.js 以获取数据并填充“SampleDate”数组。

从 Web 提要中获取数据已完成，但问题是由于请求是异步的，因此无需等待响应即可继续执行。

数组总是为空，但是当我尝试将数组数据记录到控制台时，它会在获取后正确记录。

请给我一个解决方案，以便我可以填充和查看获取的数据。

这就是我更改默认`generateSampleData()`方法的方式；

```
WinJS.xhr({ url: "http://www.yamu.lk/feed/" })
       .done(function complete(result) {

           console.log(result.responseXML);
           var items = result.responseXML.querySelectorAll("item");
           for (var n = 0; n < items.length; n++) {
               sampleItems[n] = { group: sampleGroups[0], title: items[n].querySelector("title").textContent, subtitle: "Item Subtitle: 1", description: items[n].querySelector("description").textContent, content: itemContent, backgroundImage: lightGray };
               console.log(items[n].querySelector("title").textContent);

           }

           },
           function error(error) {

           },
           function progress(result) {

           });

        return sampleItems; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:29:39.570

您的问题源于您的 ListView 没有直接绑定到 sampleItems 数组，而是绑定到将 sampleItems 推送到其上的绑定列表。查看 data.js 的第 12 行：

```
 generateSampleData().forEach(function (item) {
    list.push(item);
}); 
```

您要做的是等待将您的数据推送到绑定列表中，直到从 Web 服务中检索到它。一种方法是让 generateSampleData() 函数返回 WinJS.xhr 承诺而不是 sampleItems 数组。所以 generateSampleData() 变成：

```
return WinJS.xhr({ url: "http://www.yamu.lk/feed/" }); 
```

第 12 行变为：

```
generateSampleData().done(function complete(result) {
       console.log(result.responseXML);
       var items = result.responseXML.querySelectorAll("item");
       for (var n = 0; n < items.length; n++) {
           list.push({ group: sampleGroups[0], title: items[n].querySelector("title").textContent, subtitle: "Item Subtitle: 1", description: items[n].querySelector("description").textContent, content: itemContent, backgroundImage: lightGray });
           console.log(items[n].querySelector("title").textContent);
       }}); 
```

或类似的规定。

一定要查看[绑定列表](http://msdn.microsoft.com/en-us/library/windows/apps/hh700774.aspx)如何工作以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:50:54.903

1) 声明一个像*IsWaitingForData*这样的全局变量。

2) 发送请求前设置值为True；

3）在done函数中，数据重做时将变量设置为false；

4）使用数组。

你应该阅读 JavaScript 中的 Promise：[链接](http://dev.bennage.com/blog/2012/08/21/winjs-unpacking-promises/)

这是关于异步编程的文章：[链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh700330.aspx)

这是关于承诺的好文章：[链接](http://lostechies.com/derickbailey/2012/07/19/want-to-build-win8winjs-apps-you-need-to-understand-promises/)

```
var promises=WinJS.xhr({ url: "http://www.yamu.lk/feed/" });
WinJS.Promise.join(promises).then(function () {
        //do something with array
    }); 
```

# python - 遍历字符串以获取模式？

> ID：15128176
> 
> 赞同：1
> 
> 时间：2013-02-28T05:31:03.557
> 
> 标签：python, string, loops

我正在做一个 python 练习题，我必须区分模式。例如，一种模式是我必须计算被几个 x 包围的“oo”。

```
line = "xooxxxxooxxxxoxoxxxxoxoxxxxxxxoxoxxoooxxxxxxxxxxxx" 
```

被 x 包围的“oo”只是其他几种模式之一。我尝试使用 for 循环，但令人尴尬的是它不起作用。有没有办法可以通过字符串来获取某些模式以添加到计数变量中？如果我学会了如何做这个，我相信我可以找到这个练习的其他模式。：） 谢谢！

我试过了

```
for "oo" in line:
    count += 1 
```

但它不起作用。循环真的很糟糕，对不起。预期输出是此模式的计数：2 o's 被 x's 包围

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:51:13.303

首先，你有一个文字 ( `"oo"`)，你需要一个变量来让你的循环工作：

```
for "oo" in line:
#   ^literal not allowed here 
```

为了用循环做这样的事情，你可能想要循环*索引*，检查字符串的一部分并查看它是否匹配特定的子字符串：

```
count = 0
for i in range(len(line)):
    if line[i:i+4] == 'xoox':
       count += 1 
```

请注意，这样做绝对不是“pythonic”。一个pythonic解决方案是：

```
line.count('xoox')  #  Batteries included :-) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:00:36.893

三种解决方案，满足您的需求：

> 我尝试使用 for 循环，但令人尴尬的是它不起作用。有没有办法可以通过字符串来获取某些模式以添加到计数变量中？如果我学会了如何做这个，我相信我可以找到这个练习的其他模式。

.

# 解决方案 1

```
line = "Bxooxxx xoox  xxoxoxxxoxoxxxox#xoooxxoox"
print line,'\n'

def explore(X):
    it = iter(X)
    prec = it.next()
    print 'prec  ch1  next  next'
    for ch in it:
        print ' %r  %r' % (prec,ch),
        if (prec,ch)==('x','o'):
            prec = it.next()
            print ' %r' % prec,
            if prec=='o':
                prec = it.next()
                if prec =='x':
                    print '  %r    OK !!' % prec
                    yield 1
                else:
                    print '  %r   not good' % prec
            else:
                print '  stop'
        else:
            print
            prec = ch
print sum(explore(line)) 
```

结果

```
Bxooxxx xoox  xxoxoxxxoxoxxxox#xoooxxoox 

prec  ch1  next  next
 'B'  'x'
 'x'  'o'  'o'   'x'    OK !!
 'x'  'x'
 'x'  'x'
 'x'  ' '
 ' '  'x'
 'x'  'o'  'o'   'x'    OK !!
 'x'  ' '
 ' '  ' '
 ' '  'x'
 'x'  'x'
 'x'  'o'  'x'   stop
 'x'  'o'  'x'   stop
 'x'  'x'
 'x'  'x'
 'x'  'o'  'x'   stop
 'x'  'o'  'x'   stop
 'x'  'x'
 'x'  'x'
 'x'  'o'  'x'   stop
 'x'  '#'
 '#'  'x'
 'x'  'o'  'o'   'o'   not good
 'o'  'x'
 'x'  'x'
 'x'  'o'  'o'   'x'    OK !!
3 
```

* * *

# 解决方案 2

```
line = "Bxooxxx xoox  xxoxoxxxoxoxxxox#xoooxxoox"
print line,'\n'

def expl(X):
    it4 = iter(X)
    it4.next();it4.next();it4.next()
    it3 = iter(X)
    it3.next();it3.next()
    it2 = iter(X)
    it2.next()
    it1 = iter(X)
    for a in it4:
        if (it1.next(),it2.next(),it3.next(),a)==('x','o','o','x'):
            yield 1

print sum(expl(line)) 
```

结果

```
Bxooxxx xoox  xxoxoxxxoxoxxxox#xoooxxoox 

3 
```

* * *

# 解决方案 3

```
line = "Bxooxxx xoox  xxoxoxxxoxoxxxox#xoooxxoox"
print line,'\n'

import re
reg = re.compile('(?<=x)oox')
print len(reg.findall(line)) 
```

结果

```
Bxooxxx xoox  xxoxoxxxoxoxxxox#xoooxxoox 

3 
```

.

所以，想想迭代器和生成器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T05:52:03.567

你的代码应该提供一个`SyntaxError`, 就像你一样`can't assign to literal`。您期望遍历`'oo's`字符串中的所有内容，但这不是正在发生的事情，也不是应该发生的事情。

您可能想到的是遍历字符串并查看有多少个 'oo'，在这种情况下无法完成。

有一个很棒的内置函数，叫做`count()`which... 很重要。你如何使用它是：

```
yourstring.count(str) # str here is what you want to count, 
                      # yourstring is where you are counting 
```

它返回一个整数，所以这是你想要的代码：

```
>>> line = "xooxxxxooxxxxoxoxxxxoxoxxxxxxxoxoxxoooxxxxxxxxxxxx"
>>> line.count('oo')
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T05:52:57.843

如果没有直接给您答案，该`split`功能可能对您有用.... [http://docs.python.org/2/howto/regex.html#splitting-strings](http://docs.python.org/2/howto/regex.html#splitting-strings)

```
test = "xxxxooxxxxoooxxxx"
test.split("oo") 
```

该代码返回`['xxxx', 'xxxx', 'oxxxx']`

希望有帮助。换句话说，如果您有以“x”结尾的连续字符串，而另一个以“x”开头，则您需要计算出现次数。

# php - 具有阿拉伯值的数组未正确显示并插入到 ini 文件中

> ID：15128180
> 
> 赞同：0
> 
> 时间：2013-02-28T05:31:28.003
> 
> 标签：php, utf-8, ini

我正在使用 ini 文件实现语言模块。所以我将 lable 及其值插入到 ini 文件中，但插入的值就像 ??? ？？？用阿拉伯语。

我已经添加了

```
//in header section 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">     

 //in php section 
   ini_set('default_charset','utf-8');     
    header("Content-Type: text/html; charset=UTF-8"); 
```

而且我在为ini文件制作字符串时添加了以下行

```
utf8_encode($elem); 
```

我想添加并更新已经添加的 ini 值。请告诉我如何做所有事情。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:34:31.393

这个对我有用。你能提供一些你试过的代码吗？

**t.php**

```
$ file -bi t.php
text/html; charset=us-ascii

<?
if ($_POST && isset($_POST['t'])) {
    $h = fopen('/tmp/h.txt', 'w');
    fwrite($h, $_POST['t']);
    fclose($h);

    readfile('/tmp/h.txt');
    exit;
}

?>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">     
    </head>
    <body>
        <form method="post">
            <input type="text" name="t">
            <input type="submit">
        </form>
    </body>
</html> 
```

**提交后输出**

![在此处输入图像描述](../Images/8165779fcc86cbf059eb66be791214c7.png)

**提交后归档**

```
$ file -bi /tmp/h.txt
text/plain; charset=utf-8 
```

**和网页并提交数据**

![在此处输入图像描述](../Images/d24b00e07614bb4cbf0451d0d8c6d7e2.png)

# c# - 为什么在 TextBlock 中选择文本会在 WinRT 中引发异常

> ID：15128182
> 
> 赞同：1
> 
> 时间：2013-02-28T05:31:34.980
> 
> 标签：c#, windows-runtime, winrt-xaml

以下代码片段引发系统异常。

```
TextBlock selectionText = new TextBlock();                        
                    selectionText.IsTextSelectionEnabled = true;                        
                    selectionText.Text = "Hello world";                        
                    selectionText.Foreground = new SolidColorBrush(global::Windows.UI.Color.FromArgb(255, 255, 0, 0));
                    selectionText.SelectAll(); 
```

我的代码有什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:49:55.807

您应该确保`selectionText`在调用它之前显示`SelectAll()`它，即您应该将它添加到当前页面内的面板中：

```
TextBlock selectionText = new TextBlock();
selectionText.IsTextSelectionEnabled = true;
selectionText.Text = "Hello world";
selectionText.Foreground = new SolidColorBrush(global::Windows.UI.Color.FromArgb(255, 255, 0, 0));
MainPanel.Children.Add(selectionText);
Dispatcher.RunAsync(CoreDispatcherPriority.Normal, selectionText.SelectAll); 
```

注意两个变化：

*   `MainPanel.Children.Add()`对where的调用`MainPanel`是页面上面板控件的名称。
*   `selectionText.SelectAll()`调用 via`Dispatcher`以确保`selectionText`在调用执行之前实际添加到面板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:55:41.180

我的猜测是原色

```
Color.FromArgb(255, 255, 0, 0) 
```

第一个数字代表“Alpha”级别，即透明度。Windows RT 可能无法处理。

试试这个

```
Color.FromArgb(0, 255, 0, 0) 
```

# c++ - Emacs CEDET Semantic no autocomplete for `this` 关键字。(C++)

> ID：15128186
> 
> 赞同：1
> 
> 时间：2013-02-28T05:31:43.987
> 
> 标签：c++, emacs, cedet

```
#include <iostream>

class SomeStructure
{
  int mMemberOne;
  float mMemberTwo;

  char MemberFunction()
    {
      int test = 0;
      ++test;
      this->  
    }
};

  int main()
  {
    SomeStructure abc;
    abc.MemberFunctionMemberFunction
  } 
```

除非我尝试自动完成，否则任何其他自动完成都可以在此文件中使用`this->`。我没有得到任何建议。跑步`semantic-analyze-debug-assist`给了我这个：

> ```
> Unable to find symbol this.
> 
> The prefix lookup code threw the following error:
>   (error "Cannot find definition for \"this\"")
> 
> To debug this error you can do this:
>   M-x toggle-debug-on-error RET   [ Do It ]
> and then re-run the debug analyzer. 
> ```

`M-x bovinate`给我：

```
(("iostream" include   (:system-flag t)   (unlink-hook    (semantic--tag-unlink-secondary-overlays)    secondary-overlays    (#<overlay from 1 to 20 in junk.cpp>)    dependency-file "c:/Program Files (x86)/Microsoft Visual Studio 11.0/VC/include/iostream" link-hook    (semantic--tag-link-secondary-overlays)    unlink-copy-hook    (semantic--tag-unlink-copy-secondary-overlays)    :filename "d:/project/client/junk.cpp")   #<overlay from 1 to 20 in junk.cpp>)  ("SomeStructure" type   (:members    (("mMemberOne" variable
     (:type "int")
     (reparse-symbol classsubparts)
     #<overlay from 46 to 61 in junk.cpp>)
    ("mMemberTwo" variable
     (:type "float")
     (reparse-symbol classsubparts)
     #<overlay from 64 to 81 in junk.cpp>)
    ("MemberFunction" function
     (:type "char")
     (unlink-copy-hook
      (semantic--tag-unlink-copy-secondary-overlays)
      link-hook
      (semantic--tag-link-secondary-overlays)
      reparse-symbol classsubparts secondary-overlays
      (#<overlay from 85 to 107 in junk.cpp>)
      unlink-hook
      (semantic--tag-unlink-secondary-overlays))
     #<overlay from 85 to 165 in junk.cpp>))    :type "class")   (unlink-copy-hook    (semantic--tag-unlink-copy-secondary-overlays)    link-hook    (semantic--tag-link-secondary-overlays)    secondary-overlays    (#<overlay from 22 to 42 in junk.cpp>)    unlink-hook    (semantic--tag-unlink-secondary-overlays))   #<overlay from 22 to 168 in junk.cpp>)  ("main" function   (:type "int")   (unlink-copy-hook    (semantic--tag-unlink-copy-secondary-overlays)    link-hook    (semantic--tag-link-secondary-overlays)    secondary-overlays    (#<overlay from 172 to 183 in junk.cpp>)    unlink-hook    (semantic--tag-unlink-secondary-overlays))   #<overlay from 172 to 250 in junk.cpp>)) 
```

所以看起来`SomeStructure`结构被正确解析了。看起来语义有某种问题`this`。

我也遵循了错误的建议，即启用重新运行`toggle-debug-on-error`，但是即使启用，调试器似乎也不会因错误而中断。

使用最新版本的 emacs (24) 和 cedet (trunk)。

我不敢相信我是唯一一个遇到这个问题的人，这一定是我做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:26:40.830

我已经与其中一位维护者（David Engster）通信，他非常积极地为此提供了修复。从修订版 8490 开始，可以在 CEDET 的 bzr 存储库中找到该修复程序

# angularjs - AngularJS表达式在更改后将数字转换为字符串

> ID：15128188
> 
> 赞同：1
> 
> 时间：2013-02-28T05:31:49.083
> 
> 标签：angularjs

我有几个这样的输入：

```
<input type='range' min='15' max='{{plan.retirementAge - 1}}' name='age' ng-model='plan.age' />
<input type='range' min='{{plan.age + 1}}' max='90' name='retirementAge' ng model='plan.retirementAge' /> 
```

这在页面第一次加载时可以正常工作，但是如果我更改任何一个值，另一个值会将绑定视为字符串并将其更改为“37”+ 1 =“371”而不是 38。任何人都知道为什么会这样?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:46:33.370

这可能是因为 Angular 还没有实现处理程序，`type="range"`就像它对`type="number"`, 等所做的那样。你可能应该在他们的 Github 网站上报告这个（在问题下）。

同时，您可以像这样绕过它。也就是说，创建您自己的`range-model`并添加一个解析器`ngModelController`，将值转换为数字。

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.angularjs.org/1.0.5/angular.min.js"></script>
    <script>
    angular.module('myApp', []).controller('Ctrl', function($scope) {
        $scope.age = 10;
        $scope.retirementAge = 65;
    })
    .directive('rangeModel', function() {
        return {
            require: 'ngModel',
            link: function($scope, elem, attrs, ctrl) {
                ctrl.$parsers.push(function(val) {
                    return parseInt(val, 10);
                });
            }
        };
    });
    </script>
</head>
<body ng-controller="Ctrl">
    <input type='range' min='15' max='{{retirementAge - 1}}' range-model name='age' ng-model='age' />
    {{age}}
    <input type='range' min='{{age + 1}}' max='90' name='retirementAge' range-model ng-model='retirementAge' />
    {{retirementAge}}
</body>
</html> 
```

# c# - SQL：使用 LIMIT 进行 INNER JOIN 更新

> ID：15128189
> 
> 赞同：2
> 
> 时间：2013-02-28T05:31:55.510
> 
> 标签：c#, mysql, .net, sql

我正在尝试更新数据库中的特定列。

此查询有效：

```
UPDATE table1 A INNER JOIN table2 B 
ON A.type = B.typeName
SET A.closed = 0, A.sample = 0 
WHERE A.`status` IN ('Finished', 'Exception', 'Query') AND A.date BETWEEN '2013-01-01' AND '2013-01-31' 
AND A.code IN ('ex1','ex2','ex3') 
AND A.closed = 0 AND B.order = 'Non-Order' AND A.userName = 'test'; 
```

但是当我试图设定一个限制时，它说：

```
Incorrect usage of UPDATE and LIMIT

UPDATE table1 A INNER JOIN table2 B 
ON A.type = B.typeName
SET A.closed = 0, A.sample = 0 
WHERE A.`status` IN ('Finished', 'Exception', 'Query') AND A.date BETWEEN '2013-01-01' AND '2013-01-31' 
AND A.code IN ('ex1','ex2','ex3') 
AND A.closed = 0 AND B.order = 'Non-Order' AND A.userName = 'test' LIMIT 3; 
```

如何使用限制进行此更新？多谢！

```
[EDIT] 
```

我已经做了我想做的事，但是速度很慢，需要 6 秒才能更新 3 行。

这是查询：

```
UPDATE table1 SET closed=1, sample=1
 WHERE id IN (
     SELECT id FROM (
         SELECT id FROM table1 A
         INNER JOIN table2 B ON A.type = B.typeName
         WHERE A.`status` IN ('Finished', 'Exception', 'Query') AND A.date BETWEEN '2013-01-01' AND '2013-01-31' 
    AND A.code IN ('ex1','ex2','ex3') 
    AND A.closed = 0 AND B.order = 'Non-Order' AND A.userName = 'test' LIMIT 3
     ) tmp
 ); 
```

我怎样才能优化这个查询再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T05:35:15.973

你就是不能。

根据[UPDATE 的 MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)：

```
For the multiple-table syntax, UPDATE updates rows in each table named in
table_references that satisfy the conditions. In this case, ORDER BY and LIMIT
cannot be used. 
```

**更新 1**

```
UPDATE  table1 a
        INNER JOIN
        (
            SELECT  id 
            FROM    table1 A
                    INNER JOIN table2 B 
                        ON A.type = B.typeName
            WHERE   A.status IN ('Finished', 'Exception', 'Query') AND 
                    A.date BETWEEN '2013-01-01' AND '2013-01-31' AND 
                    A.code IN ('ex1','ex2','ex3') AND 
                    A.closed = 0 AND 
                    B.order = 'Non-Order' AND 
                    A.userName = 'test' 
            LIMIT   3
        ) tmp ON a.ID = tmp.ID
SET     a.closed = 1, 
        a.sample = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:35:34.043

`LIMIT`只能用于`SELECT`语句。如果你想限制没有。对于您的 UPDATE 语句受影响的记录，您必须使用 WHERE。

# redirect - URL 正在添加根文件夹

> ID：15128191
> 
> 赞同：0
> 
> 时间：2013-02-28T05:32:00.010
> 
> 标签：redirect, apache2, directory, virtualhost

我正在使用带有 Apache2 的 Ubuntu Server 来托管我的网站。

我有两个域，www.test.com 和 www.domain.com（不是实名）

在我的可用站点中，我有一个指向我的 www.test.com 域的默认值，然后我在里面为 www.domain.com 创建了一个：

```
<VirtualHost *:80>
ServerName www.domain.com
ServerAlias domain.com
DocumentRoot /var/www/domainfolder
<Directory />
Options +FollowSymLinks
AllowOverride all
</Directory>
</VirtualHost> 
```

现在该网站正常工作，我可以导航到它并使用它，但是由于我将它用于 wordpress，所以当我点击说 Admin CP 时，它会尝试导航到 www.domain.com/domainfolder/admin-cp/ 我'我只是不确定为什么它试图访问它存储的文件夹？

使用 .htaccess 只会给我一个内部服务器错误，因为它总是在一个目录下，这是代码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_URI} !(.*)folder 
RewriteRule ^(.*)$ domainfolder/$1 [L] 
```

# javascript - 嵌套 Backbone.js 获取

> ID：15128192
> 
> 赞同：0
> 
> 时间：2013-02-28T05:32:00.860
> 
> 标签：javascript, backbone.js, underscore.js

```
this.Model.fetch({
    success: function() {
        ...
        <some code>
        ...

        this.Model.save({
            success: function() {
               alert("Success");
            }
        });
    }
}); 
```

我正在尝试保存模型，它运行良好。但是在保存模型后，警报不会被触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:44:40.793

试试这个代码

```
this.Model.fetch({
    success: function() {
        ...
        <some code>
        ...

        this.Model.save(null, {
            success: function() {
               alert("Success");
            }
        });
    }
}); 
```

[http://backbonejs.org/#Model-save](http://backbonejs.org/#Model-save)

```
model.save([attributes], [options]) 
```

保存函数具有第一个参数作为属性

# symfony - 在 symfony2.0 的控制器中包含类文件

> ID：15128193
> 
> 赞同：-5
> 
> 时间：2013-02-28T05:32:13.560
> 
> 标签：symfony

我需要在`web`目录中的控制器中包含一个类文件。

到目前为止，我在`src`目录下的命名空间中看到了包含文件的示例。

我如何包含这个类文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:46:39.623

您不应该将 PHP 类放在`web`目录下。您可以将此类文件放在`vendor`带有命名空间的包下或包内。然后就可以使用类了。例如：

```
<?php

namespace YourBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

use YourBundle\Lib\YourClass;

class YourController extends Controller
{
    public function someAction()
    {
        $yourClass = new YourClass();
    }

    // ... 
```

# c - Flex 和 Bison 计算器

> ID：15128194
> 
> 赞同：1
> 
> 时间：2013-02-28T05:32:16.203
> 
> 标签：c, bison, yacc, lex, flex-lexer

我正在尝试为 nor 表达式实现计算器，例如`true nor true nor (false nor false)`使用 Flex 和 Bison，但我不断收到错误消息。这是我的 .l 文件：

```
%{
#include <stdlib.h>
#include "y.tab.h"
%}

%% 
("true"|"false")    {return BOOLEAN;}

.|\n    {yyerror();}

%%

int main(void)
{
    yyparse();
    return 0;
}

int yywrap(void)
{
     return 0;
}
int yyerror(void)
{
     printf("Error\n");
} 
```

这是我的 .y 文件：

```
/* Bison declarations.  */
 %token BOOLEAN
 %left 'nor'

 %% /* The grammar follows.  */
 input:
   /* empty */
 | input line
 ;

 line:
   '\n'
 | exp '\n'  { printf ("%s",$1); }
 ;

 exp:
   BOOLEAN            { $$ = $1;           }
 | exp 'nor' exp      { $$ = !($1 || $3);  }
 | '(' exp ')'        { $$ = $2;           }
 ;
 %% 
```

有没有人看到问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:52:45.163

出现错误的原因是您的词法分析器仅识别一种类型的标记，即`BOOLEAN`，但不能识别换行符、括号或`nor`（并且您会为其他所有内容产生错误）。对于像括号和换行符这样的单字母标记，您可以将字符本身作为标记类型返回：

```
\n { return '\n'; } 
```

考虑一下，`nor`您应该像之前那样引入一个标记类型`BOOLEAN`，并向词法分析器添加一个适当的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:13:09.403

处理所有单字符标记的简单方法（正如@vitaut 正确地表示您根本还没有处理）是返回`yytext[0]`点规则，并让解析器找出哪些是合法的。

您还丢失了布尔值“true”和“false”的值，它们应该分别作为 1 和 0 存储到 yylval 中，然后它们会出现在`$1,` `$3`等等。如果你要在长期内拥有更多的数据类型，您需要查看`%union`指令。

# c - 包括空终止符的 C 字符串大小

> ID：15128196
> 
> 赞同：-1
> 
> 时间：2013-02-28T05:32:19.250
> 
> 标签：c, cstring

```
 char* str = “ABC\n”; 
```

当被问到“为这个字符串分配了多少个字符？” 为什么答案是 5？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:33:49.153

3 个字母字符 + 1 个转义字符 + 1 个字符串结尾 [ `\0`] 字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T05:42:58.733

3 个字节用于 A、B 和 C，1 个用于换行符，1 个用于空字符，即 \0 字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:31:01.017

**3 Albhabets** (ABC) 和**一个新行**(\n)，**最后为 null（或字符串结尾），即 \0**。

所以总数是五个。

# c - 从c代码调用freebsd中的内核变量

> ID：15128197
> 
> 赞同：0
> 
> 时间：2013-02-28T05:32:19.373
> 
> 标签：c, global-variables, variable-assignment, freebsd

我找到了一些关于这个主题的在线资源，但仍然无法理解它是如何工作的。

假设我在文件中有一个具有以下规范的全局变量：/sys/sys/sysctl.h

```
#define USER_TZNAME_MAX     20   /*test var*/ 
```

并在文件 /usr/src/sys/kern/kern_mib.ca

```
SYSCTL_INT(_user, USER_TZNAME_MAX, tzname_max, CTLFLAG_RW, 0, 0, "something"); 
```

任何人都可以实际展示如何更改变量值并在 ac 源文件中设置另一个值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:55:01.973

`#define USER_TZNAME_MAX`没有定义全局变量，它是一个预处理器宏**。**

在编译器编译代码之前，运行预处理器以扩展宏并包含/排除定义所定义的代码。

在这样的示例中，预处理器将源中字符串“USER_TZNAME_MAX”的所有实例替换为字符串“20”：

```
// this
int i = USER_TZNAME_MAX;

// will be expanded to this:
int i = 20; 
```

因此，您**不能**在运行时更改此变量，因为 a) 它不是变量，并且 b) 它是常量。

如果您正在谈论更改您自己的代码中使用的值，您可以这样做：

```
#ifdef USER_TZNAME_MAX
#undef USER_TZNAME_MAX
#endif

#define USER_TZNAME_MAX (32) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:16:25.803

在程序中，您应该使用[sysctl(3)](http://www.freebsd.org/cgi/man.cgi?query=sysctl&sektion=3)来获取或设置系统信息。

# c++ - C++ 检查函数的“标志参数”

> ID：15128202
> 
> 赞同：0
> 
> 时间：2013-02-28T05:32:34.853
> 
> 标签：c++

我们如何创建或显示错误或警告，告诉用户他/她不能输入与另一个已经输入的标志具有相反值的标志？我们如何证明用户使用了无效的参数？

演示问题的示例：

```
struct Flags
{
    enum Values
    {
        None = 0,
        Yes = 1,
        No = 2,
        Good = 4,
        Bad = 8
    };
};

void Function( __in int p_Flag )
{
    if( p_Flag & Flags::Yes )
        std::cout << "Yes\n";
    else if( p_Flag & Flags::No )
        std::cout << "No\n";

    if( p_Flag & Flags::Good )
        std::cout << "Good\n";
    else if( p_Flag & Flags::Bad )
        std::cout << "Bad\n";
};

int main( void )
{
    Function( Flags::Yes | Flags::No );         // Error/warning (not OK)
    Function( Flags::Good | Flags::Bad );       // Error/warning (not OK)
    Function( Flags::Yes | Flags::Bad );        // OK!

    return( 0 );
}; 
```

尽管会选择第一个相反的标志而不是另一个，但我们仍然应该显示警告或错误，以确保用户知道他/她真正需要哪个标志。

```
Function( Flags::Yes | Flags::No ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:41:55.400

```
#include <cassert>

assert(p_Flag & (Flags::Yes|Flags::No) != (Flags::Yes|Flags::No)) 
```

# android - 在 ImageView 中显示后如何获取位图的大小

> ID：15128204
> 
> 赞同：7
> 
> 时间：2013-02-28T05:32:39.573
> 
> 标签：android, bitmap, imageview, android-imageview, bitmapimage

我有一个图像视图

```
<ImageView
        android:id="@+id/imgCaptured"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/captured_image" /> 
```

我从相机捕捉图像，将该图像转换为位图。

```
Bitmap thumbnail;
thumbnail = MediaStore.Images.Media.getBitmap(getActivity()
                    .getContentResolver(), imageUri); 
```

当我在上面的图像视图中显示该位图之前获得该位图的分辨率时，例如

```
Log.i("ImageWidth = " + thumbnail.getWidth(), "ImageHeight = "
                + thumbnail.getHeight()); 
```

它让我回归`ImageWidth = 2592 ImageHeight = 1936`

在此之后，我在上面的 imageview 中显示了这个位图，`imgCaptured.setImageBitmap(thumbnail);` 然后我将 imageview 的大小设置为

```
Log.i("ImageView Width = " + imgCaptured.getWidth(),
                "ImageView Height = " + imgCaptured.getHeight()); 
```

这让我回来了`ImageView Width = 480 ImageView Height = 720`

**现在我的问题是**

*   在我的图像视图中显示该位图**后**，如何获得该位图的大小。我知道这可以通过使用这个来完成

    ```
    image.buildDrawingCache();
    Bitmap bmap = image.getDrawingCache(); 
    ```

    但这将创建一个大小等于 imageview 的新位图。

*   我也想知道，图像在图像视图中显示后是否会自动调整大小。如果是，那么有什么方法可以在不调整图像大小的情况下在 imageview 中显示图像。

**编辑**

实际上我已经捕获了 2592x1936 的图像。我在我的 imageView 中显示了这张图片，对这张图片做了一些其他的操作。现在我想以相同的 2592x1936 分辨率保存此图像。是否可以？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T05:59:09.257

`Bitmap`在 a中显示 a后`ImageView`，`ImageView`会创建一个 BitmapDrawable 对象以在 ImageView 的 Canvas 中绘制它。因此，您可以调用`ImageView.getDrawable()`方法来获取 的引用，并通过调用) 方法`BitmapDrawable`获取边界。`Drawable.getBounds(Rect rect`通过边界，您可以计算绘制的位图的宽度和高度`ImageView`

```
Drawable drawable = ImageView.getDrawable();
//you should call after the bitmap drawn
Rect bounds = drawable.getBounds();
int width = bounds.width();
int height = bounds.height();
int bitmapWidth = drawable.getIntrinsicWidth(); //this is the bitmap's width
int bitmapHeight = drawable.getIntrinsicHeight(); //this is the bitmap's height 
```

# javascript - Third level in HTML un-ordered list

> ID：15128205
> 
> 赞同：0
> 
> 时间：2013-02-28T05:32:39.533
> 
> 标签：javascript, jquery, html, css

I've been trying to make an un-ordered list(navigation menu), in which the third level will drop downwards instead of right side on click of a button. Something similar to the one here -

[http://themeforest.net/item/adminica-the-professional-admin-template/full_screen_preview/160638](http://themeforest.net/item/adminica-the-professional-admin-template/full_screen_preview/160638)

I've the script for it which makes the third level appear on click of a button. But i'm not able to bring the third level down. Its coming on the right side.

My code -

```
<ul class="drop">
            <li><a href="#">Home</a></li>
            <li>Dashboard
                <ul>
                    <li><a href="#">Student Activity</a></li>
                    <li><a href="#">Departments</a></li>
                    <li><a href="#">Gallery</a></li>
                    <li><a href="#">News and Events</a></li>
                    <li><a href="#">Content Management</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact Us</a></li>                 
                </ul>
            </li>
            <li>Student Info
                 <ul>
                    <li><a href="#">Example 1</a>
                        <ul class="drawer">
                            <li><a href="#">Third level 1</a></li>
                            <li><a href="#">Third level 2</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Example 2</a>
                        <ul class="drawer">
                            <li><a href="#">Third level 1</a></li>
                            <li><a href="#">Third level 2</a></li>
                            <li><a href="#">Third level 3</a></li>
                            <li><a href="#">Third level 4</a></li>
                            <li><a href="#">Third level 5</a></li>
                            <li><a href="#">Third level 6</a></li>
                        </ul>
                    </li>                        
                </ul>
            </li>
            <li><a href="#">Teacher Info</a></li>
            <li><a href="#">Add+</a></li>
            <li><a href="#">Student Report</a></li>
            <li><a href="#">Teacher Report</a></li>
</ul> 
```

CSS -

```
ul.drop a {
display:block; 
}
ul.drop, ul.drop li, ul.drop ul { 
margin: 0; 
padding: 0; 
border: 1px solid #fff; 
background: #555; 
color: #fff;
}
ul.drop { 
position: relative; 
z-index: 597; 
float: left; 
}
ul.drop li { 
float: left; 
line-height: 1.3em; 
vertical-align: middle; 
zoom: 1; 
padding: 5px 10px; 
}
ul.drop li.hover, ul.drop li:hover { 
position: relative; 
z-index: 599; 
cursor: default; 
background: #1e7c9a; 
}
ul.drop ul { 
visibility: hidden; 
position: absolute; 
top: 100%; 
left: 0; 
z-index: 598; 
width: 195px; 
background: #555; 
border: 1px solid #fff; 
}
ul.drop ul li { 
float: none; 
}
ul.drop ul ul { 
top: -2px; 
left: 100%;  
}
ul.drop li:hover > ul { 
visibility: visible 
} 
```

I'm looking for a help :) Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:47:34.527

Update the CSS like this(commented lines are old statements):

```
ul.drop ul ul {
  position:static;
  display:none;
  width:100%;
  /*top: -2px; */
  /*left: 100%;  */
}
ul.drop li:hover > ul { 
  visibility: visible;
  display: block;
} 
```

However, you'll probably want to further adjust the styling for the third level menu.

Example: [jsFiddle](http://jsfiddle.net/earthdesigner/4pDHG/ "jsFiddle")

# asp.net - “X-UA-Compatible IE=edge”标头不应该覆盖 IE10 中的“在兼容性视图中显示 Intranet 站点”吗？

> ID：15128210
> 
> 赞同：27
> 
> 时间：2013-02-28T05:33:40.043
> 
> 标签：asp.net, html, iis, internet-explorer-10

我有一个简单的 HTML5 / ASP.NET 网站，自从它为 Win7 发布以来，我今天开始在 IE10 中进行测试。

这是我组织内的一个 Intranet 站点，我相信不久前部署了一个组策略以默认启用**在兼容性视图中显示 Intranet 站点。**

我今天在测试中注意到的是，即使我添加了**X-UA-Compatible IE=edge** HTTP 标头（通过我的 web.config），该站点在 IE 中显示为：

```
Browser Mode: IE10 Compat View
Document Mode: Standards 
```

我相信我的 HTML 实际上没问题，因为我可以简单地*取消选中*在兼容性视图中**显示 Intranet 站点**设置，当它重新加载时，它会立即切换到：

```
Browser Mode: IE10
Document Mode: Standards 
```

所以我的问题很简单，**IE=edge**标头值不应该覆盖**在兼容性视图中显示 Intranet 站点**设置吗？

如果没有，有什么办法*可以*覆盖它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-20T10:25:07.657

（我会把这个放在这里，因为这个问题在我的谷歌搜索中排名更高，但经过更多挖掘后，我实际上找到了另一个 SO 问题的答案：[https](https://stackoverflow.com/a/13287226/1563) ://stackoverflow.com/a/13287226/1563 。我不确定如果他们应该合并（至少不是没有一些问题编辑））

这可能是因为 IE 设置为“在兼容性视图中显示 Intranet 站点”（`Alt`+ `T`| 兼容性视图设置）

您不能使用`X-UA-Compatible` *元标记*覆盖此设置，但您可以通过发送`X-UA-Compatible` *http 标头*：

```
X-UA-Compatible: IE=edge 
```

[感谢 Lavinski](https://stackoverflow.com/users/200442/lavinski)发现这个

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-15T16:30:43.693

这对我有用，请尝试在添加新标题或任何其他标题之前清除现有标题。

```
<httpProtocol>
    <customHeaders>
        <clear />
        <add name="X-UA-Compatible" value="IE=Edge" />
    </customHeaders>
</httpProtocol> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:01:56.547

我相信在“兼容性视图”同时打开 IE7*浏览器*和*文档*`X-UA-Compatible`模式时强制*文档*模式 -> 文档模式实际上被.**`X-UA-Compatible`**

 **请参阅[Internet Explorer 中“浏览器模式”和“文档模式”之间的区别](https://stackoverflow.com/questions/6661313/difference-between-browser-mode-and-document-mode-in-internet-explorer)**

# python - python中self关键字的问题

> ID：15128212
> 
> 赞同：0
> 
> 时间：2013-02-28T05:33:48.903
> 
> 标签：python

我正在 ubuntu 中创建一个浏览器 ..
在我编译时使用 Glade 显示“NameError: name 'self' is not defined”
代码：

```
self.reload = self.bulider.get_object("reload")
def on_pressbutton_clicked(self, widget): print"reload" 
```

它只是检查按钮操作的示例代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:43:43.807

根据您提供的内容，这可能是说明性的。要访问方法中的类属性，请使用 self. 在方法之外，您可以简单地按名称定义变量。

```
class test:
  var = "I'm var"
  def printvar(self):
    print(self.var)

>>>a = test()
>>>a.printvar()
I'm var 
```

# php - 我可以在 if 语句中将函数串起来并返回一个变量吗？

> ID：15128217
> 
> 赞同：2
> 
> 时间：2013-02-28T05:34:12.807
> 
> 标签：php, if-statement

我很好奇是否有可能在 if 语句中将函数的几种可能性串起来，将它们链接到单个变量并返回有效的变量（如果有）。

以下内容不起作用，但它演示了这个想法。我希望以下内容返回`2`，因为该函数仅在传递给它`myFn()`时才返回 true 。`2`

但取而代之的是以下返回`true: 1`。

```
if ($b = myFn(1) || $b = myFn(2) || $b = myFn(3)) {
    echo 'true: ' . $b;
} else {
    echo 'false: ' . $b;
}

function myFn($a) {
    if ($a == 2) return $a;
    return false;
} 
```

除了添加一系列`elseif`s，有没有办法在一系列`OR`s 中将函数串起来，同时只返回成功的一个？

键盘：[http ://codepad.org/ldiCxY4j](http://codepad.org/ldiCxY4j)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T05:37:21.150

只需将每个作业括在括号中：

`(($b = myFn(1)) || ($b = myFn(2)) || ($b = myFn(3)))`

请参阅：[PHP 运算符优先级](http://php.net/manual/en/language.operators.precedence.php)

当使用[逻辑](http://www.php.net/manual/en/language.operators.logical.php)运算符时，PHP 将结果强制为布尔值。如果没有额外的括号，它会回显，`'1'`因为回显`true`会强制`'1'`.

使用循环可能会更好：

```
/**
 * Get the first $array value that passes the $test, or else null.
 * @return mixed|null 
 */
function find ($array, $test) {
    foreach ($array as $index => $value) {
        if (call_user_func($test, $value, $index, $array))
            return $value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:19:36.370

对于这样的赋值连接，PHP 有`or`运算符，它与 . 相同，`||`但[优先级](http://php.net/manual/en/language.operators.precedence.php)低于`=`. 这意味着

```
if ($b = myFn(1) or $b = myFn(2) or $b = myFn(3)) 
```

被视为：

```
if (($b = myFn(1)) or ($b = myFn(2)) or ($b = myFn(3))) 
```

**尽管**

```
if ($b = myFn(1) || $b = myFn(2) || $b = myFn(3)) 
```

被视为：

```
if ($b = (myFn(1) || $b = (myFn(2) || $b = myFn(3)))) 
```

# css - 字间距查询

> ID：15128219
> 
> 赞同：0
> 
> 时间：2013-02-28T05:34:16.253
> 
> 标签：css

我有一个似乎无法解决的字间距问题。

网页是 www.c5d.co.uk/captaintwo.php

顶部图像下的字间距看起来很荒谬。然而据我所知，CSS 是一样的。

我错过了什么？如果我在 Wrigley 之后放置 /p 标签，它可以正常工作但验证失败，因为没有打开 p 标签

相关的HTML和CSS如下：

```
.captain{word-spacing:185px;display:inline;} 
.pres {display:inline; }
.ladycaptain{word-spacing:120px;display:inline; }  

  <img class="lewis" src="http://www.c5d.co.uk/captain.png" alt="The Captain">
  <img class="socialtwo" src="http://www.c5d.co.uk/president.png" alt="President">
  <p class="pres">
  <br>Captain: John</p> <p class="captain">Lewis President:</p> Bill Wrigley
  <img class="lewis" src="http://www.c5d.co.uk/ladycaptain.png" alt="Lady Captain">
  <img class="socialtwo" src="http://www.c5d.co.uk/juniorcaptain.png" alt="Junior Captain">
  <p class="pres">
  <br>Lady Captain: Beryl</p> <p class="ladycaptain">Harrison Junior</p> Captain: Kieran Metcalf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:41:38.630

`<br>`已过时。请改用自动关闭`<br />`。名称应该包含在某些东西（p、span、h3、something）中。有 2 种样式（一种内联（在文档内）和一种附加到 #header）在那里增加了大约 500 像素的空间。这就是为什么有很大的差距。

考虑让自己更轻松.. 使用 1 个类来定义每种类型的对象。

```
#people {
  styles for container div
}
.box {
  styles for the individual boxes
}
.photo {
  styles for <img>
}
.title {
  styles for names of people
} 
```

然后就像这样将类应用于适当的项目

```
<div id="people"> 
  <div class="box">
    <img src="path/image.jpg" class="photo" />
      <h3 class="title">Position, name</h3>
  </div>
  <div class="box">
    <img src="path/image.jpg" class="photo" />
      <h3 class="title">Position, name</h3>
  </div>
  etc...
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:44:53.777

进行以下更改：

```
.pres {
    /* display: inline (remove) */
    display: inline-block;
    width: 270px;
    text-align: center;
}

.captain {
    /* display: inline (remove) */
    display: inline-block;
    width: 270px;
    text-align: center;
} 
```

# ruby-on-rails - 在rails中将大型数据库记录集呈现为JSON

> ID：15128221
> 
> 赞同：1
> 
> 时间：2013-02-28T05:34:22.993
> 
> 标签：ruby-on-rails, json, mongodb, mongoid

有没有办法在不消耗大量内存的情况下以 JSON 格式呈现大型记录集？例如，我有以下查询：

```
...
records = Records.where(query)
respond_to do |format|
  format.html
  format.json  { render :json => records.to_json }
end 
```

有时记录将包含数千个条目，并且 JSON 严格用于在不使用分页的情况下获取数据，并且此类数据必须适合内存才能返回。一个`Record`条目还会包含很多字段（我使用的是 MongoDB/Mongoid），并且必须包含这些字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:17:02.283

返回数据库中的每个资源几乎总是一个坏主意。

您可以使用有限的结果集进行响应并提供记录总数。

例如：

```
{
  total: 503
  records: [
    { id: 1 },
    { id: 2 }
  ]
} 
```

并添加使用`limit`和`offset`参数来遍历所有页面的可能性。

免费电子书[Web API 设计](http://pages.apigee.com/web-api-design-ebook.html)中有名为**Pagination 的章节和部分响应**描述了它。

我建议你读那本书。它仅包含 30 页。

**upd**：在您的情况下，您可以使用`limit`和`skip`mongoid 的方法对结果进行分页。

```
records = Records.where(query).limit(params[:limit]).skip(params[:offset])
respond_to do |format|
  format.html
  format.json  { render :json => { total: records.count, records: records }.to_json }
end 
```

# sql - 如何根据事件关联 3 个表

> ID：15128222
> 
> 赞同：3
> 
> 时间：2013-02-28T05:34:28.687
> 
> 标签：sql, database-design, foreign-keys, relational-database

我有一张表格，其中包含有关可以由两类**公民和工人中的人完成的不同类型事件的信息**

所以对于他们每个人，我都有各自的桌子

```
civil{  civil_id, name, age,telephone...} the  primary key is civil_id

worker{ worker_id, name, duty, department...} the  primary key is worker_id 
```

那么事件表有一个所有可能事件的列表

```
event {type_of_event} the  primary key is type_of_event 
```

然后我打算将信息存储在其他表中

使用 eventype，完成工作的人（工人或公民）

```
id  event_type       date      person
-----------------------------------
1   type1         12-12-12     x 
2   type1         05-12-10     y
3   type2         02-12-12     y 
```

现在在这个设计中，我不知道如何联系谁做这项工作，如果我只有一种人（又名民事），我只会在最后一张表中的 person 字段中存储 Civil_id....但是如何知道是公务员还是工人，我需要其他中间表吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T12:15:25.017

一般来说，有一些方法可以模拟这种情况......

## 使用独占外键

![在此处输入图像描述](../Images/8d16c057f9fee774a9ad6e94f8530ebc.png)

在`event`,`civil_id`和`worker_id`都可以为 NULL，但也有一个约束确保它们中的**一个**在任何给定时间都是非 NULL 的：

```
CHECK (
    (civil_id IS NOT NULL AND worker_id IS NULL)
    OR (civil_id IS NULL AND worker_id IS NOT NULL)
) 
```

## 使用继承¹

![在此处输入图像描述](../Images/d062d2fe2050ee6ccd2d69d387613f47.png)

有关继承的更多信息，请查看[ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)和[这篇文章](https://stackoverflow.com/a/12037398/533120)中的“子类型关系”一章。

* * *

*¹阿卡。类别、子类型、子类化、泛化层次...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:41:13.640

在这个罐子里，你不能设置一个`foreign key`，因为你有多个父母。为了进行快速搜索或避免在表`full table scan`上的列上定义索引并使用. 例如，`person``event``LEFT JOIN`

```
SELECT  ....,
        COALESCE(b.name, c.name) AS personname
FROM    event a
        LEFT JOIN civil b
            ON a.person = b.civil_id
        LEFT JOIN worker c
            ON a.person = c.worker_ID 
```

添加`INDEX`

```
ALTER TABLE event ADD INDEX (person) 
```

# python-2.7 - 用于读取和写入注册表路径的python脚本

> ID：15128225
> 
> 赞同：19
> 
> 时间：2013-02-28T05:34:40.183
> 
> 标签：python-2.7, winreg

我开发了一个 python 脚本，其中有一个设置窗口，可以选择安装软件的路径。单击设置窗口的确定按钮时，我想将所有选定的路径写入注册表并读取再次打开设置窗口时相同。我的代码如下所示。

```
def OnOk(self, event):
    data1=self.field1.GetValue() #path selected in setting window
    aReg = ConnectRegistry(None,HKEY_LOCAL_MACHINE)
    keyVal=OpenKey(aReg,r"SOFTWARE\my path to\Registry", 0,KEY_WRITE)
    try:
       SetValueEx(keyVal,"Log file",0,REG_SZ,data1)
    except EnvironmentError:
       pass
    CloseKey(keyVal)
    CloseKey(aReg) 
```

我收到如下错误：

```
Traceback (most recent call last):
File "D:\PROJECT\project.py", line 305, in OnOk
keyVal=OpenKey(aReg,r"SOFTWARE\my path to\Registry", 0,KEY_WRITE)
WindowsError: [Error 5] Access is denied 
```

要从注册表中读取，保存的注册表必须显示在设置窗口中。我尝试使用以下代码。虽然它可以工作，但对我的编程方式不满意。帮助我获得更好的解决方案

```
key = OpenKey(HKEY_CURRENT_USER, r'Software\my path to\Registry', 0, KEY_READ)
    for i in range(4): 
        try:
            n,v,t = EnumValue(key,i)
            if i==0:
                self.field2.SetValue(v)
            elif i==1:
                self.field3.SetValue(v)
            elif i==2:
                self.field4.SetValue(v)
            elif i==3:
                self.field1.SetValue(v)
        except EnvironmentError:                                               
            pass
CloseKey(key) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-02-09T07:57:07.113

```
#Python3 version of hugo24's snippet
import winreg

REG_PATH = r"Control Panel\Mouse"

def set_reg(name, value):
    try:
        winreg.CreateKey(winreg.HKEY_CURRENT_USER, REG_PATH)
        registry_key = winreg.OpenKey(winreg.HKEY_CURRENT_USER, REG_PATH, 0, 
                                       winreg.KEY_WRITE)
        winreg.SetValueEx(registry_key, name, 0, winreg.REG_SZ, value)
        winreg.CloseKey(registry_key)
        return True
    except WindowsError:
        return False

def get_reg(name):
    try:
        registry_key = winreg.OpenKey(winreg.HKEY_CURRENT_USER, REG_PATH, 0,
                                       winreg.KEY_READ)
        value, regtype = winreg.QueryValueEx(registry_key, name)
        winreg.CloseKey(registry_key)
        return value
    except WindowsError:
        return None

#Example MouseSensitivity
#Read value 
print (get_reg('MouseSensitivity'))

#Set Value 1/20 (will just write the value to reg, the changed mouse val requires a win re-log to apply*)
set_reg('MouseSensitivity', str(10))

#*For instant apply of SystemParameters like the mouse speed on-write, you can use win32gui/SPI
#http://docs.activestate.com/activepython/3.4/pywin32/win32gui__SystemParametersInfo_meth.html 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-13T06:26:58.337

与@Aramanethota 相同，但带有 pep8 和 func def 以便于使用。

```
REG_PATH = r"SOFTWARE\my_program\Settings"

def set_reg(name, value):
    try:
        _winreg.CreateKey(_winreg.HKEY_CURRENT_USER, REG_PATH)
        registry_key = _winreg.OpenKey(_winreg.HKEY_CURRENT_USER, REG_PATH, 0, 
                                       _winreg.KEY_WRITE)
        _winreg.SetValueEx(registry_key, name, 0, _winreg.REG_SZ, value)
        _winreg.CloseKey(registry_key)
        return True
    except WindowsError:
        return False

def get_reg(name):
    try:
        registry_key = _winreg.OpenKey(_winreg.HKEY_CURRENT_USER, REG_PATH, 0,
                                       _winreg.KEY_READ)
        value, regtype = _winreg.QueryValueEx(registry_key, name)
        _winreg.CloseKey(registry_key)
        return value
    except WindowsError:
        return None 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-03T04:12:12.047

从注册表读取的 Python 脚本如下：

```
try:
    root_key=OpenKey(HKEY_CURRENT_USER, r'SOFTWARE\my path to\Registry', 0, KEY_READ)
    [Pathname,regtype]=(QueryValueEx(root_key,"Pathname"))
    CloseKey(root_key)
    if (""==Pathname):
        raise WindowsError
except WindowsError:
    return [""] 
```

写入注册表的 Python 脚本是：

```
try:
    keyval=r"SOFTWARE\my path to\Registry"
    if not os.path.exists("keyval"):
        key = CreateKey(HKEY_CURRENT_USER,keyval)
    Registrykey= OpenKey(HKEY_CURRENT_USER, r"SOFTWARE\my path to\Registry", 0,KEY_WRITE)
    SetValueEx(Registrykey,"Pathname",0,REG_SZ,Pathname)
    CloseKey(Registrykey)
    return True
except WindowsError:
    return False 
```

希望对大家有帮助。干杯:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-21T03:19:03.877

读取注册表项：

```
def read(path, root=HKEY_CURRENT_USER):
    path, name = os.path.split(path)
    with suppress(FileNotFoundError), OpenKey(root, path) as key:
        return QueryValueEx(key, name)[0] 
```

并写：

```
def write(path, value, root=HKEY_CURRENT_USER):
    path, name = os.path.split(path)
    with OpenKey(root, path, 0, KEY_WRITE) as key:
        SetValueEx(key, name, 0, REG_SZ, value) 
```

扩展用于类型处理。提供类型作为参数，匹配注册表中的当前类型或 python 值类型。

```
def write(path, value, root=HKEY_CURRENT_USER, regtype=None):
    path, name = os.path.split(path)
    with OpenKey(root, path, 0, KEY_WRITE|KEY_READ) as key:
        with suppress(FileNotFoundError):
            regtype = regtype or QueryValueEx(key, name)[1]

        SetValueEx(key, name, 0, regtype or REG_DWORD if isinstance(value, int) else REG_SZ, str(value) if regtype==REG_SZ else value) 
```

> **注意：**对于旧版本，使用contextlib.suppress [()](https://docs.python.org/3/library/contextlib.html#contextlib.suppress)（从 开始可用`python 3.4`）可以用 try..except..pass 代替。winreg的[上下文管理器](https://docs.python.org/2/library/_winreg.html#_winreg.PyHKEY.__enter__)接口是在`python 2.6`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T05:39:29.010

您似乎没有编辑注册表的权限。如果您是管理员，请在提升状态下运行此脚本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-03T11:09:18.523

在注册表项中创建/写入值：

```
from winreg import*
import winreg

keyVal = r'SOFTWARE\\python'

try:
    key = OpenKey(HKEY_LOCAL_MACHINE, keyVal, 0, KEY_ALL_ACCESS)
except:
    key = CreateKey(HKEY_LOCAL_MACHINE, keyVal)
SetValueEx(key, "Start Page", 0, REG_SZ, "snakes")
CloseKey(key) 
```

如果访问被拒绝 - 尝试在管理模式下运行命令（CMd 或 IDE）

用于读取注册表项中的值

```
from winreg import*
Registry = ConnectRegistry(None, HKEY_LOCAL_MACHINE)
RawKey = OpenKey(Registry, "SOFTWARE\\python")
try:
    i = 0
    while 1:
        name, value, type = EnumValue(RawKey, i)
        print("name:",name,"value:", value,"i:", i)
        i += 1
except WindowsError:
    print("") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-16T09:41:10.253

这是我编写的一个类（python 2），它能够在您完成操作注册表时恢复状态。该类未正确测试，因此可能包含一些错误：

```
import _winreg as winreg

class Registry(object):
    def __init__(self, restore_state=False):
        self.m_backup = {}
        self.m_restore_state = restore_state

    def get_key(self, hkey, subkey, access, create_if_doesnt_exist=True):
        created_key = False
        registry_key = None
        try:
            registry_key = winreg.OpenKey(hkey, subkey, 0, access)
        except WindowsError:
            try:
                if create_if_doesnt_exist:
                    registry_key = winreg.CreateKey(hkey, subkey)
                    if registry_key not in self.m_backup:
                        self.m_backup[registry_key] = ({}, (hkey, subkey))
                else:
                    registry_key = None
            except WindowsError:
                if registry_key:
                    self.close_key(registry_key)
                raise Exception('Registry does not exist and could not be created.')
        return registry_key   

    def close_key(self, registry_key):
        closed = False
        if registry_key:
            try:
                winreg.CloseKey(registry_key)
                closed = True
            except:
                closed = False
        return closed          

    def get_reg_value(self, hkey, subkey, name):
        value = None
        registry_key = self.get_key(hkey, subkey, winreg.KEY_READ, False)
        if registry_key:
            try:
                value, _ = winreg.QueryValueEx(registry_key, name)
            except WindowsError:
                value = None
            finally:
                self.close_key(registry_key)
        return value

    def set_reg_value(self, hkey, subkey, name, type, value):
        registry_key = self.get_key(hkey, subkey, winreg.KEY_WRITE, True)
        backed_up = False
        was_set = False
        if registry_key:
            if self.m_restore_state:
                if registry_key not in self.m_backup:
                    self.m_backup[registry_key] = ({}, None)
                existing_value = self.get_reg_value(hkey, subkey, name)
                if existing_value:
                    self.m_backup[registry_key][0][name] = (existing_value, type, False)
                else:
                    self.m_backup[registry_key][0][name] = (None, None, True)
                backed_up = True                
            try:
                winreg.SetValueEx(registry_key, name, 0, type, value)
                was_set = True
            except WindowsError:
                was_set = False
            finally:
                if not backed_up:
                    self.close_key(registry_key)
        return was_set

    def restore_state(self):
        if self.m_restore_state:
            for registry_key, data in self.m_backup.iteritems():
                backup_dict, key_info = data
                try:
                    for name, backup_data in backup_dict.iteritems():
                        value, type, was_created = backup_data
                        if was_created:
                            print registry_key, name
                            winreg.DeleteValue(registry_key, name)
                        else:
                            winreg.SetValueEx(registry_key, name, 0, type, value)
                    if key_info:
                        hkey, subkey = key_info
                        winreg.DeleteKey(hkey, subkey)
                except:
                    raise Exception('Could not restore value')
                self.close_key(registry_key)

    def __del__(self):
        if self.m_restore_state:
            self.restore_state() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-24T12:58:18.253

'winreg' 模块是如此......奇怪的工作模块，所以，我编写了一个名为 'WindowsRegistry' 的类，用于更轻松地使用 Windows 注册表和 'winreg' 模块。我希望它会更有用：

```
import winreg
import re

class WindowsRegistry:
    """Class WindowsRegistry is using for easy manipulating Windows registry.

    Methods
    -------
    query_value(full_path : str)
        Check value for existing.

    get_value(full_path : str)
        Get value's data.

    set_value(full_path : str, value : str, value_type='REG_SZ' : str)
        Create a new value with data or set data to an existing value.

    delete_value(full_path : str)
        Delete an existing value.

    query_key(full_path : str)
        Check key for existing.

    delete_key(full_path : str)
        Delete an existing key(only without subkeys).

    Examples:
        WindowsRegistry.set_value('HKCU/Software/Microsoft/Windows/CurrentVersion/Run', 'Program', r'"c:\Dir1\program.exe"')
        WindowsRegistry.delete_value('HKEY_CURRENT_USER/Software/Microsoft/Windows/CurrentVersion/Run/Program')
    """
    @staticmethod
    def __parse_data(full_path):
        full_path = re.sub(r'/', r'\\', full_path)
        hive = re.sub(r'\\.*$', '', full_path)
        if not hive:
            raise ValueError('Invalid \'full_path\' param.')
        if len(hive) <= 4:
            if hive == 'HKLM':
                hive = 'HKEY_LOCAL_MACHINE'
            elif hive == 'HKCU':
                hive = 'HKEY_CURRENT_USER'
            elif hive == 'HKCR':
                hive = 'HKEY_CLASSES_ROOT'
            elif hive == 'HKU':
                hive = 'HKEY_USERS'
        reg_key = re.sub(r'^[A-Z_]*\\', '', full_path)
        reg_key = re.sub(r'\\[^\\]+$', '', reg_key)
        reg_value = re.sub(r'^.*\\', '', full_path)

        return hive, reg_key, reg_value

    @staticmethod
    def query_value(full_path):
        value_list = WindowsRegistry.__parse_data(full_path)
        try:
            opened_key = winreg.OpenKey(getattr(winreg, value_list[0]), value_list[1], 0, winreg.KEY_READ)
            winreg.QueryValueEx(opened_key, value_list[2])
            winreg.CloseKey(opened_key)
            return True
        except WindowsError:
            return False

    @staticmethod
    def get_value(full_path):
        value_list = WindowsRegistry.__parse_data(full_path)
        try:
            opened_key = winreg.OpenKey(getattr(winreg, value_list[0]), value_list[1], 0, winreg.KEY_READ)
            value_of_value, value_type = winreg.QueryValueEx(opened_key, value_list[2])
            winreg.CloseKey(opened_key)
            return value_of_value
        except WindowsError:
            return None

    @staticmethod
    def set_value(full_path, value, value_type='REG_SZ'):
        value_list = WindowsRegistry.__parse_data(full_path)
        try:
            winreg.CreateKey(getattr(winreg, value_list[0]), value_list[1])
            opened_key = winreg.OpenKey(getattr(winreg, value_list[0]), value_list[1], 0, winreg.KEY_WRITE)
            winreg.SetValueEx(opened_key, value_list[2], 0, getattr(winreg, value_type), value)
            winreg.CloseKey(opened_key)
            return True
        except WindowsError:
            return False

    @staticmethod
    def delete_value(full_path):
        value_list = WindowsRegistry.__parse_data(full_path)
        try:
            opened_key = winreg.OpenKey(getattr(winreg, value_list[0]), value_list[1], 0, winreg.KEY_WRITE)
            winreg.DeleteValue(opened_key, value_list[2])
            winreg.CloseKey(opened_key)
            return True
        except WindowsError:
            return False

    @staticmethod
    def query_key(full_path):
        value_list = WindowsRegistry.__parse_data(full_path)
        try:
            opened_key = winreg.OpenKey(getattr(winreg, value_list[0]), value_list[1] + r'\\' + value_list[2], 0, winreg.KEY_READ)
            winreg.CloseKey(opened_key)
            return True
        except WindowsError:
            return False

    @staticmethod
    def delete_key(full_path):
        value_list = WindowsRegistry.__parse_data(full_path)
        try:
            winreg.DeleteKey(getattr(winreg, value_list[0]), value_list[1] + r'\\' + value_list[2])
            return True
        except WindowsError:
            return False 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-17T12:12:31.450

我的解决方案：

```
def add_key(name,pathh):
    try:
        keyval=r"System\my path\Register"
        if not os.path.exists("keyval"):
            key = winreg.CreateKey(winreg.HKEY_CURRENT_USER,keyval)
        Registrykey = winreg.OpenKey(winreg.HKEY_CURRENT_USER, r"System\my path\Register", 0,winreg.KEY_WRITE)
        winreg.SetValueEx(Registrykey,name,1,winreg.REG_SZ,pathh)
        winreg.CloseKey(Registrykey)
        return True
    except WindowsError:
        return False 
```

# java - 从非托管 bean 访问 DAO 服务方法

> ID：15128228
> 
> 赞同：0
> 
> 时间：2013-02-28T05:34:47.220
> 
> 标签：java, spring, hibernate, managed-bean

我正在使用 Spring 3 和 Hibernate 4

如何在非 ManagedBean 中使用以下内容

```
@Inject 
EmployeeService employeeService 
```

或者，如果我想访问 DAO 方法，我必须将其设为 ManagedBean

```
@Named("mymanagedbean")
@ViewAccessScoped 
```

我有几个`Converter`类，为了访问`DAO`服务方法，我必须将其用作 ManagedBean，即使它们不是 ManagedBeans。

调用`DAO`服务方法的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:27:57.530

如果你想保持你的`Converter`类干净并使用依赖*注入*（强烈推荐这是为了能够轻松地测试类）而不是手动引入它的依赖项，你可以使用 Spring 配置预先存在的对象的能力在应用程序上下文之外创建。[请在此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable)查看 Spring 参考文档中的相关部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:50:22.453

这是一个工作示例（与 zagyi 的答案相关）。应用程序使用 Spring Roo，因此使用 aspectj。

```
@FacesConverter("example.entity.converter")
@Configurable
public class EntityConverter implements Converter {

    @Resource
    MyDAO dao;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
        String value) {

        Entity obj;

        try {
            obj = dao.getEntity(Long.valueOf(value));
        } catch( NumberFormatException e ) {
            throw new ConverterException( message );
        }
        return obj;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
         Object value) {

        Entity obj = (Entity) value;
        return (obj != null) ? obj.getId().toString() : "";
    }
} 
```

* * *

道类

```
@Repository("myDAO")
public class MyDAOImpl implements MyDAO {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T05:56:11.280

您将需要实现 Spring 接口`ApplicationContextAware`，然后设置 ApplicationContext。然后你需要提供静态方法来获取 bean 实例。

```
public class SpringApplicationContext implements ApplicationContextAware {

private static ApplicationContext CONTEXT;

public void setApplicationContext(ApplicationContext context)
        throws BeansException {
    CONTEXT = context;
}
    public static Object getBean(String beanName) { ...}
    public static <T> T getBean(Class<T> arg0) {...} 
```

然后在您的非托管 bean 中，您可以`SpringApplicationContext.getBean`通过`EmployeeService.class`作为参数或 bean 名称作为参数传入来调用方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:31:45.450

我已经设法在`Converter`不`@Inject`使用以下内容的情况下获得DAO方法，并且在我定义为的`EmployeeService`类中实现了`Interface``@Service(value="employeeService")`

```
EmployeeService employeeService = 
(EmployeeService)facesContext.getApplication().getELResolver().
getValue(facesContext.getELContext(), null,
"employeeService"); 
```

# ios - 查找 URL 是否有效以及是否存在？

> ID：15128237
> 
> 赞同：1
> 
> 时间：2013-02-28T05:35:18.533
> 
> 标签：ios, objective-c

我想知道我给出的 URL 是否有效，以及它是否存在于互联网中。

有没有办法使用objective-C来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:46:11.863

您可以通过执行以下操作来查看 URL 是否有效：

```
NSString *urlString = ... // some URL to check
NSURL *url = [NSURL URLWithString:urlString];
if (url) {
    // valid URL (meaning it is the proper format)
} 
```

要查看该 URL 是否存在于 Internet 中，您需要执行 HEAD 请求并检查结果。这比加载 URL 的所有数据更有效。

```
NSMutableURLRequest request = [NSMutableURLRequest requestWithURL:inURL];
[request setHTTPMethod:@"HEAD"];

NSURLConnection connection = [NSURLConnection connectionWithRequest:request delegate:self];

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    if ([(NSHTTPURLResponse *)response statusCode] == 200) {
        // url exists
    }
} 
```

# android - Android - 选择建议后不会重写搜索视图中的查询文本

> ID：15128242
> 
> 赞同：3
> 
> 时间：2013-02-28T05:35:56.147
> 
> 标签：android, search

我正在尝试为我的应用程序实现一个 SuggestionProvider。我已经让它运行了，但我面临的问题是，在点击一个建议后 - 它的值不会在上面的查询文本中被替换。基本上 - 单击它 - 执行预期的操作，但之后 - 搜索视图中的文本与用户编写的文本保持相同，而不是从建议中选择的文本。

在我的搜索配置中`android:searchMode="queryRewriteFromText"`，我在我的 SearchProvider 中使用`SearchManager.SUGGEST_COLUMN_QUERY`，并将其设置为与搜索建议的值相同的值。

点击后我需要做一些特别的事情来更新它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T18:35:42.213

好吧，现在可能已经晚了，但也许可以帮助某人。无论你得到什么意图，你都可以像这样获取查询：

```
if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
  String query = intent.getStringExtra(SearchManager.QUERY);
  mSearchView.setQueryText(query, false);
} else if (Intent.ACTION_VIEW.equals(namera.getAction())) {
  String query = intent.getStringExtra(SearchManager.QUERY);
  mSearchView.setQuery(query, false);
} 
```

# c# - 如何在构建时将计算值放入 RESX C#

> ID：15128244
> 
> 赞同：1
> 
> 时间：2013-02-28T05:36:06.893
> 
> 标签：c#

我有一种情况，我有一个字符串，其中应该包含今天的日期。问题是我需要将该字符串包括今天的日期放在 .resx 文件中。有什么办法吗？例如，关于版权字符串，它应该是 copyright-2012-abc 是今天的日期是 2012 年，它应该是 copyright-2013-abc 是今天的日期是 2013 年

编辑：我将仅将资源文件用于此版权内容。对于所有其他事物，它将是静态的，就像示例中一样，该年份的值将随着每一年的变化而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:16:47.793

没有将“当前环境”值添加到 RESX（或任何其他 C# 相关文件）的内置方法。

但是您可以相对容易地创建预构建规则，该规则将调用您的自定义脚本/工具，根据您的喜好修改您的 RESX 文件。

一种选择是创建工具，该工具将生成稍后包含在 RESX 文件中的文件。这样可以避免修改 RESX 文件本身（如果 RESX 受源代码控制，这可能会出现问题）。根据您的需要，简单`date /t > ..\..\out.txt`的 out.txt 包含在 RESX 中可能就足够了。

将构建时创建的文件包含到 RESX 中的步骤：

*   将 TextFile1.txt 添加到您的项目中
*   将该文件放在 {resourceFileName}.RESX 上（在设计模式下）
*   检查 {resourceFileName}.Designer.cs 是否使用新属性更新以访问新资源的内容
*   在解决方案资源管理器中选择项目的属性并打开“构建事件”选项卡
*   将“date /t > ....\TextFile1.txt”添加到预构建步骤（将当前日期转储到“TextFile1.txt”
*   构建和使用新的资源变量，即`Console.WriteLine(Resource1.TextFile1)`

RESX 示例内容：

```
 <data name="TextFile1" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>textfile1.txt;System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089;utf-8</value>
  </data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:49:50.033

resx 用于存储静态资源。尽管在运行时或在开发期间通过某种脚本来更改 resx 可能会有一些技巧，但是，这两种方法都为小功能引入了太多的复杂性。

如果您能阐明此类版权字符串的用例，读者也许可以提供更具体的建议。比如说，您是否仅将字符串用于在“关于”框中显示？还是程序集属性？

# jquery - JRating插件改变星图

> ID：15128245
> 
> 赞同：2
> 
> 时间：2013-02-28T05:36:07.440
> 
> 标签：jquery, css, jquery-plugins

我正在使用 jQuery [JRating](http://demos.myjqueryplugins.com/jrating/)插件进行评级。我想用另一个图像更改星形图像。但是当我更换它时，它没有正确显示。任何人有想法改变？

我想用下图替换星星。我已经像这样更改了插件中的图像

```
var defaults = {
  /** String vars **/
  bigStarsPath: '/images/white.png', // path of the icon stars.png
  smallStarsPath: '/images/small.png', // path of the icon small.png
  phpPath: 'jrating/php/jRating.php', // path of the php file jRating.php
  type: 'big', // can be set to 'small' or 'big'
}

jQuery(document).ready(function () {
  jQuery(".basic").jRating();
}); 
```

它永远不会正确显示

# php - 如何连接多个表和 SUM 值？

> ID：15128246
> 
> 赞同：1
> 
> 时间：2013-02-28T05:36:10.213
> 
> 标签：php, mysql, codeigniter

我有以下表格（和示例值）：

```
**table1**
data_id (1, 2)

**table2:**
data_id (1, 2, 1, 2)
month(01, 01, 02, 02)
data(10, 5, 11, 2)

**table3**
data_id (1, 2, 1, 2)
month(01, 01, 02, 02)
data(10, 5, 11, 2)

**table4**
data_id (1, 2, 1, 2)
month(01, 01, 02, 02)
data(10, 5, 11, 2) 
```

所有表都由“data_id”连接。我需要汇总数据字段并按月分组。表结果如下所示：

```
**result**
month(01, 02)
table2.data(15, 13)
table3.data(15, 13)
table4.data(15, 13) 
```

获取结果表的 SQL 语句是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:45:37.850

试试这个查询编辑

```
SELECT t2.month, sum(t2.data), sum(t3.data), sum(t4.data)
FROM table1 t1, table2 t2, table3 t3, table4 t4
WHERE t1.data_id = t2.data_id AND t1.data_id = t3.data_id AND t1.data_id = t4.data_id
AND t2.month = t3.month AND t3.month = t4.month
GROUP BY t2.month; 
```

它按月汇总数据字段的值

[小提琴](http://sqlfiddle.com/#!2/21f68e/9)

# java - 用于拖放图像文件的面板，带有 java swing

> ID：15128247
> 
> 赞同：0
> 
> 时间：2013-02-28T05:36:17.703
> 
> 标签：java, image, swing, drag-and-drop

我正在尝试制作一个 java swing 面板，您可以在其中拖放图像。并保存面板上显示的图像。我发现[这](http://www.java2s.com/Code/Java/Swing-Components/GlassPaneDragDrop.htm)对我有很大帮助。但在我的装有 windows 7 的电脑上不起作用。我无法将图像拖到应用程序中。我会很感激任何建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:10:21.523

规则一，不要乱搞你不明白的东西；）

规则二，假装它直到你成功;）

将`initComponents`方法替换为...

```
private void initComponents() {

    listScroller = new javax.swing.JScrollPane();

    imageList = new JList();
    imageList.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
    imageList.setLayoutOrientation(javax.swing.JList.HORIZONTAL_WRAP);
    imageList.setVisibleRowCount(-1);
    listScroller.setViewportView(imageList);

    setLayout(new BorderLayout());
    add(listScroller);
}// </editor-fold>//GEN-END:initComponents 
```

在`GlassPaneDragAndDrop`构造函数中，`paintComponent`将“drop pane”的方法替换为...

```
setContentPane(new JPanel(new BorderLayout()) {
    private BufferedImage image = null;

    @Override
    public boolean isOpaque() {
        return imageList.getModel().getSize() > 0;
    }

    @Override
    protected void paintComponent(Graphics g) {
        Rectangle clip = g.getClipBounds();

        g.setColor(Color.WHITE);
        g.fillRect(clip.x, clip.y, clip.width, clip.height);
    }
}); 
```

这将允许它运行。在 Windows 7 下，您可能不喜欢这样的结果......

# ruby-on-rails - 使用 Devise 身份验证登录后显示 ajax 请求的空白页面

> ID：15128250
> 
> 赞同：1
> 
> 时间：2013-02-28T05:36:34.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

当用户未登录时，它会显示`"You need to sign in or sign up before continuing"`他尝试执行需要身份验证的操作后的时间。

这就是我想要的，所以没关系。

但是，问题在于，当用户登录后，它会将用户带到空白页面（这是 ajax 请求的 url，所以它是空白的）。

是否可以让他留在同一上一页，并让它执行 ajax 请求`remote=>true`？

我该如何处理这种问题？

[更新]

**users_controller.rb**

```
before_filter :authenticate_user!, :only => [:follow, :unfollow]

def follow
    @user = User.find_by_username(params[:id])
    current_user.follow(@user)
    respond_to do |format|
        format.js {render :action=>"follow.js"}
    end
end 
```

**看法**

```
 <% if current_user.following?(user) %>
    <%= link_to(unfollow_user_path(user), :remote => true) do %>
     Following
    <% end %>
  <% else %>
    <%= link_to(follow_user_path(user) ,:remote => true) do %>
     Follow
    <%end%>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:27:48.390

当用户未登录并执行请求时，他被强制登录，当他成功登录时，他被重定向到上一个页面，即redirect_to :back，但是当他执行ajax请求时，没有html页面呈现ajax 动作（默认跟随）。

```
def follow
   @user = User.find_by_username(params[:id])
   current_user.follow(@user)
   if request.xhr?  # ajax request
     respond_to do |format|
       format.js {render :action=>"follow.js"}
     end
   else
       redirect_to home_path # or any other path
   end
end 
```

# r - R 中的错 误消息告诉它无法分配一定大小的内存

> ID：15128253
> 
> 赞同：-5
> 
> 时间：2013-02-28T05:36:49.423
> 
> 标签：r

在模拟大小为 500 的模拟程序中，图中显示了以下错误消息：

![在此处输入图像描述](../Images/9fa6e285c63b187ae9cddbff2fd77e98.png)

我在网上读到 32 位机器可能有这个问题。现在，这也给了我一些输出。我的问题是，计算是否正确进入循环但 R 无法显示？或者计算本身实际上并没有在循环内工作？

如果计算在循环中正常进行，但 R 不能只显示结果，我可能会为此烦恼。谁能告诉我？

**编辑：** 我在 R 方面的经验不足（实际上在任何编程语言中都会遇到一些困难，对此我深表歉意）。这是我的完整代码，您想在评论中看到。由于这是一个很长的代码，所以我以为你不想看到它！

```
sink("kopaltaikharap.txt")

###Hypothesis Testing: Under Null for Model A

size=500

WLR<-rep(0,size)    #vector of standardized test statistics

count.WLR<-rep(0,size)

##for NLR test:

NLR<-rep(0,size)    #vector of standardized test statistics

count.NLR<-rep(0,size)

for(j in 1:size){   #loop j begins

##############################################################################
##Data Generation:

n<-300 #total patients

x<-rbinom(n,1,0.5) #Indicator of treatment A. 

r<-rbinom(n,1,0.5)

#Generating t0 from exponential with mean 1.5 years:

t0<-rep(0,n)
for(i in 1:n){
t0[i]<-ifelse(r[i]==0,rexp(1,1/1.5),0)
}

#Generating tr from exponential with mean 0.5 year:

tr<-rep(0,n)
for(i in 1:n){
tr[i]<-ifelse(r[i]==1,rexp(1,1/0.5),0)
}

#Generating B treatment indicator:

z<-rbinom(n,1,0.5)  

#Generating ts (time after remission) from exponential with mean 2.5 and 1.5 years:

ts<-rep(0,n)
for(i in 1:n){
ts[i]<-ifelse(z[i]==1,rexp(1,1/2.5),rexp(1,1/1.5))
}

#Generating survival time t(i):

t<-rep(0,n)
for(i in 1:n){
t[i]<-(1-r[i])*t0[i]+r[i]*(tr[i]+ts[i])
}

d<-data.frame(x,r,t0,tr,z,ts,t)
d

# As no censoring is mentioned in model A, so cenc is set equal to (max(d$t)+1).

d$cenc<-rep((max(d$t)+1),n) #so that u(i)=min(t(i),cenc(i))=t(i) and censoring has no effect.

d$delta<-rep(0,n)
for(i in 1:n){
d$delta[i]<-ifelse(d$t[i]<d$cenc[i],1,0)
}

d$u<-rep(0,n)
for(i in 1:n){
d$u[i]<-min(d$t[i],d$cenc[i])
}

p1<-sum(d$z*d$r*(d$tr<d$cenc)*(d$x==1))/sum(d$r*(d$tr<d$cenc)*(d$x==1))
p1
p2<-sum(d$z*d$r*(d$tr<d$cenc)*(d$x==0))/sum(d$r*(d$tr<d$cenc)*(d$x==0))
p2

d<-d[order(d$u),]
d   #data frame sorted by u.

#taking unique u's.

du<-unique(d$u)

##############################################################################

##############################################################################
##Test Statistic:

#we define indices i for d and k for du.

zn.wlr<-rep(0,length(du))

K.hat<-rep(0,length(du))

Q1<-rep(0,length(du))
Q2<-rep(0,length(du))

sum.wt1dn1<-rep(0,length(du))
sum.wt2dn2<-rep(0,length(du))
sum.wt1y1<-rep(0,length(du))
sum.wt2y2<-rep(0,length(du))

sum.dn1<-rep(0,length(du))
sum.dn2<-rep(0,length(du))
sum.y1<-rep(0,length(du))
sum.y2<-rep(0,length(du))

lambda.hat<-rep(0,length(du))

q1<-rep(0,length(du))
q2<-rep(0,length(du))

##for NLR test:

zn.nlr<-rep(0,length(du))

q4var.nlr<-rep(0,length(du))

sum.dn11<-rep(0,length(du))
sum.dn21<-rep(0,length(du))
sum.y11<-rep(0,length(du))
sum.y21<-rep(0,length(du))

for(k in 1:length(du)){ #loop k (for each death time point) begins

wt1<-rep(0,n)
wt2<-rep(0,n)
dn1<-rep(0,n)
dn2<-rep(0,n)
y1<-rep(0,n)
y2<-rep(0,n)

##for NLR test:

dn11<-rep(0,n)
dn21<-rep(0,n)
y11<-rep(0,n)
y21<-rep(0,n)

for(i in 1:n){  #loop i (for each individual) begins

wt1[i]<-(1-d$r[i]*(d$tr[i]<=du[k])+d$r[i]*(d$tr[i]<=du[k])*d$z[i]/p1)*(d$x[i]==1)

wt2[i]<-(1-d$r[i]*(d$tr[i]<=du[k])+d$r[i]*(d$tr[i]<=du[k])*d$z[i]/p2)*(d$x[i]==0)

y1[i]<-(d$u[i]>=du[k])*(d$x[i]==1)

y2[i]<-(d$u[i]>=du[k])*(d$x[i]==0)

dn1[i]<-(d$u[i]==du[k])*d$delta[i]*(d$x[i]==1)

dn2[i]<-(d$u[i]==du[k])*d$delta[i]*(d$x[i]==0)

sum.wt1dn1[k]<-sum.wt1dn1[k]+wt1[i]*dn1[i]

sum.wt2dn2[k]<-sum.wt2dn2[k]+wt2[i]*dn2[i]

sum.wt1y1[k]<-sum.wt1y1[k]+wt1[i]*y1[i]

sum.wt2y2[k]<-sum.wt2y2[k]+wt2[i]*y2[i]

sum.dn1[k]<-sum.dn1[k]+dn1[i]

sum.dn2[k]<-sum.dn2[k]+dn2[i]

sum.y1[k]<-sum.y1[k]+y1[i]

sum.y2[k]<-sum.y2[k]+y2[i]

##if(y1[i]==0 & y2[i]==0) lambda.hat[k]<-0 else lambda.hat[k]<-(dn1[i]+dn2[i])/(y1[i]+y2[i])    

##this is actually h(u_k) hat (estimated hazard function, not cumulative hazard).

##for NLR test:

dn11[i]<-(d$u[i]==du[k])*d$delta[i]*(d$x[i]==1)*(d$z[i]==1)

dn21[i]<-(d$u[i]==du[k])*d$delta[i]*(d$x[i]==0)*(d$z[i]==1)

y11[i]<-(d$u[i]>=du[k])*(d$x[i]==1)*(d$z[i]==1)

y21[i]<-(d$u[i]>=du[k])*(d$x[i]==0)*(d$z[i]==1)

sum.dn11[k]<-sum.dn11[k]+dn11[i]

sum.dn21[k]<-sum.dn21[k]+dn21[i]

sum.y11[k]<-sum.y11[k]+y11[i]

sum.y21[k]<-sum.y21[k]+y21[i]

}   #loop i ends.

if(sum.wt1y1[k]==0 & sum.wt2y2[k]==0) zn.wlr[k]<-0 else zn.wlr[k]<-(sum.wt1dn1[k]*sum.wt2y2[k]-sum.wt2dn2[k]*sum.wt1y1[k])/(sum.wt1y1[k]+sum.wt2y2[k])

# "|" is the "or" operator. 

if(sum.wt1y1[k]==0 & sum.wt2y2[k]==0) K.hat[k]<-0 else K.hat[k]<-sum.wt2y2[k]/(sum.wt1y1[k]+sum.wt2y2[k])

if(sum.y1[k]==0 & sum.y2[k]==0) lambda.hat[k]<-0 else lambda.hat[k]<-(sum.dn1[k]+sum.dn2[k])/(sum.y1[k]+sum.y2[k])  

wt1<-rep(0,n)
wt2<-rep(0,n)
dn1<-rep(0,n)
dn2<-rep(0,n)
y1<-rep(0,n)
y2<-rep(0,n)

for(i in 1:n){  #loop i (for each individual) begins

wt1[i]<-(1-d$r[i]*(d$tr[i]<=du[k])+d$r[i]*(d$tr[i]<=du[k])*d$z[i]/p1)*(d$x[i]==1)

wt2[i]<-(1-d$r[i]*(d$tr[i]<=du[k])+d$r[i]*(d$tr[i]<=du[k])*d$z[i]/p2)*(d$x[i]==0)

y1[i]<-(d$u[i]>=du[k])*(d$x[i]==1)

y2[i]<-(d$u[i]>=du[k])*(d$x[i]==0)

dn1[i]<-(d$u[i]==du[k])*d$delta[i]*(d$x[i]==1)

dn2[i]<-(d$u[i]==du[k])*d$delta[i]*(d$x[i]==0)

q1[k]<-q1[k]+wt1[i]*(dn1[i]-lambda.hat[k]*y1[i])

q2[k]<-q2[k]+wt2[i]*(dn2[i]-lambda.hat[k]*y2[i])

}   #loop i ends.

Q1[k]<-K.hat[k]*q1[k]

Q2[k]<-(1-K.hat[k])*q2[k]

##for NLR test:

if(sum.y11[k]==0 & sum.y21[k]==0) zn.nlr[k]<-0 else zn.nlr[k]<-(sum.dn11[k]*sum.y21[k]-sum.dn21[k]*sum.y11[k])/(sum.y11[k]+sum.y21[k])

if(sum.y11[k]==0 & sum.y21[k]==0) q4var.nlr[k]<-0 else q4var.nlr[k]<-(sum.y11[k]*sum.y21[k]/(sum.y11[k]+sum.y21[k]))*((sum.dn11[k]+sum.dn21[k])/(sum.y11[k]+sum.y21[k]))

}   #loop k ends.

Zn.WLR<-sum(zn.wlr)

sigmasq.hat.WLR<-mean((Q1)^2)+mean((Q2)^2)

WLR[j]<-(n^(-0.5)*Zn.WLR)/sqrt(sigmasq.hat.WLR)

#count.WLR[j]<-ifelse(WLR[j]>=-1.96 & WLR[j]<1.96,0,1)

count.WLR[j]<-ifelse(abs(WLR[j])>1.96,1,0)

##for NLR test:

Zn.NLR<-sum(zn.nlr)

sigmasq.hat.NLR<-n^(-1)*sum(q4var.nlr)

NLR[j]<-(n^(-0.5)*Zn.NLR)/sqrt(sigmasq.hat.NLR)

#count.NLR[j]<-ifelse(NLR[j]>=-1.96 & NLR[j]<1.96,0,1)

count.NLR[j]<-ifelse(abs(NLR[j])>1.96,1,0)

}   #loop j ends.

meanWLR<-mean(WLR)  #sample mean of the normalized test statistic
meanWLR
RR.WLR<-sum(count.WLR)/size
RR.WLR
meanNLR<-mean(NLR)  #sample mean of the normalized test statistic
meanNLR
RR.NLR<-sum(count.NLR)/size
RR.NLR

sink()

##sometimes shows this message:

#Error in if (sum.wt1y1 == 0 | sum.wt2y2 == 0) zn[k] <- 0 else zn[k] <- (sum.wt1y1 *  : 
#  missing value where TRUE/FALSE needed

# count.WLR and count.NLR always come 0, 0, 0,..., 0\. Is it okay? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:17:56.333

你需要问自己为什么一个小的模拟会创建一个 300MB 的向量。（说“模拟大小为 500”并不是特别有意义。）您还运行了多个 R 实例。每个实例都将竞争连续的 RAM。您还要求我们都加载“mind.reading”包，但我们中只有少数人能够正确编译它。

# java - 由两个显示对象组成的Java时钟

> ID：15128256
> 
> 赞同：1
> 
> 时间：2013-02-28T05:37:19.387
> 
> 标签：java

我有这个让我难过的家庭作业。我有一个**24 小时制的时钟**，它由两个 numberDisplay**对象**组成。 **numberDisplay**对象有一个限制器来控制它们，因此当分钟数达到 60 时，它会回滚到零并增加小时数。当小时数达到 24 时，它会回滚到零。

**我的任务是将其从 24 小时制更改为 12 小时制，但我无法更改对象的任何内容。只有他们如何互动**

到目前为止，我已经做到了：

```
private void updateDisplay()
{
    int functionHours = Integer.parseInt(hours.getDisplayValue());
    String amPM = "AM";
    if ( functionHours == 0 ) {
        hours.setValue(12);
        amPM = "AM";
    }
    else if ( functionHours > 0 && functionHours < 12 )
    {
        hours.setValue(functionHours);
        amPM = "AM";
    }
    else if ( functionHours == 12 ) {
        hours.setValue(functionHours);
        amPM = "PM";
    }
    else if ( functionHours > 12 && functionHours <= 23 ) {
        functionHours -= 12;
        hours.setValue(functionHours);
        amPM ="PM";
    }
    displayString = hours.getDisplayValue() + ":" + minutes.getDisplayValue() + " " + amPM;
} 
```

但是，当 hours.value 从 23 变回零时，时钟拒绝变回 AM。我很难过如何做到这一点。

NumberDisplay 对象：

```
/**
 * The NumberDisplay class represents a digital number display that can hold
 * values from zero to a given limit. The limit can be specified when creating
 * the display. The values range from zero (inclusive) to limit-1\. If used,
 * for example, for the seconds on a digital clock, the limit would be 60, 
 * resulting in display values from 0 to 59\. When incremented, the display 
 * automatically rolls over to zero when reaching the limit.
 * 
 * @author Michael Kölling and David J. Barnes
 * @version 2011.07.31
 */
public class NumberDisplay
{
    private int limit;
    private int value;

    /**
     * Constructor for objects of class NumberDisplay.
     * Set the limit at which the display rolls over.
     */
    public NumberDisplay(int rollOverLimit)
    {
        limit = rollOverLimit;
        value = 0;
    }

    /**
     * Return the current value.
     */
    public int getValue()
    {
        return value;
    }

    /**
     * Return the display value (that is, the current value as a two-digit
     * String. If the value is less than ten, it will be padded with a leading
     * zero).
     */
    public String getDisplayValue()
    {
        if(value < 10) {
            return "0" + value;
        }
        else {
            return "" + value;
        }
    }

    /**
     * Set the value of the display to the new specified value. If the new
     * value is less than zero or over the limit, do nothing.
     */
    public void setValue(int replacementValue)
    {
        if((replacementValue >= 0) && (replacementValue < limit)) {
            value = replacementValue;
        }
    }

    /**
     * Increment the display value by one, rolling over to zero if the
     * limit is reached.
     */
    public void increment()
    {
        value = (value + 1) % limit;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:01:08.733

考虑一下如果`hours.getDisplayValue() == 23`在您的代码中会发生什么。在最后一个块中，您可以这样更改：

```
// functionHours is 23.
else if ( functionHours > 12 && functionHours <= 23 ) { // OK
    functionHours -= 12;  // now functionHours is 11
    hours.setValue(functionHours); // set hours.value to 11 !!
    amPM ="PM"; 
```

下一次更新，可能`hours.value`会增加 1，然后它的值将是`12`. 但是在您的代码中，该值必须小于 12 才能使 amPM 变为“AM”。这就是为什么它停留在“PM”。

我不完全了解您的要求，但可能您不应该修改`hours`对象中的值，而是使用装饰器模式在其上添加 12 小时功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:33:21.643

谢谢你的逻辑，有道理。我是这样做的：

```
/**
 * Update the internal string that represents the display.
 */
private void updateDisplay()
{
    int functionHours = Integer.parseInt(hours.getDisplayValue());
    if ( functionHours == 0 ) {
        displayString = "12:" + minutes.getDisplayValue() + " AM";
    }
    else if ( functionHours >= 0 && functionHours < 12 ) {
        displayString = hours.getDisplayValue() + ":" + minutes.getDisplayValue() + " AM";
    }
    else if ( functionHours == 12 ) {
        displayString = hours.getDisplayValue() + ":" + minutes.getDisplayValue() + " PM";
    }
    else if ( functionHours >= 12 && functionHours < 22 ) {
        int tempHours = ( hours.getValue() - 12 );
        displayString = "0" + Integer.toString(tempHours) + ":" + minutes.getDisplayValue() + " PM";
    }
    else if ( functionHours >21 && functionHours < 24 ) {
        displayString = hours.getDisplayValue() + ":" + minutes.getDisplayValue() + " PM";
    }      
} 
```

# android - 是否可以在listview的addHeaderView方法中添加viewgroup？

> ID：15128258
> 
> 赞同：0
> 
> 时间：2013-02-28T05:37:25.590
> 
> 标签：android, listview, viewgroup

我使用下面的代码在 listview 的 addHeaderView 方法中添加 viewgroup：

```
 MyViewGroup myvg = new MyViewGroup(this);
 listView.addHeaderView(myvg, null, false); 
```

但是headerView不能在listview中显示。是可以在listview的addHeaderView方法中添加viewgroup吗？还是不能在addHeaderView中添加viewgroup？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:38:54.407

调用 setAdapter 后将显示标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:45:29.180

从您发布的代码看来，标题是不可见的，因为您添加的视图组是空的。并在添加标题后设置适配器。

# spring-mvc - Spring MVC中单元测试出错：找不到上下文配置文件

> ID：15128259
> 
> 赞同：2
> 
> 时间：2013-02-28T05:37:39.537
> 
> 标签：spring-mvc, junit4

这是项目设置

![在此处输入图像描述](../Images/2bbca2de649148ab94c9445dd0b4724a.png)

**测试控制器.java**

```
@Component
public class TestController {

    public String getDefaultMessage() {
        return "Some default msg";
    }
} 
```

**测试控制器测试.java**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("spring-servlet.xml")
public class TestControllerTest {

    TestController controller;

    @Test
    public void itShouldTest(){
        String msg = controller.getDefaultMessage();
        assertThat(msg, is("Some default msg"));
    }
} 
```

**问题 1**：spring-servlet.xml 的正确位置

如果我说 /WEB-INF/spring-servlet.xml，它说找不到文件。当我选择项目属性 > 部署程序集时，我可以看到 /WebContent 的部署路径是 /。

我也尝试过“classpath:/WEB-INF/spring-servlet.xml”、“classpath:spring-servlet.xml”和“classpath:/spring-servlet.xml”

**问题 2**：如果我在 test.edu.amty.testdemo.controllers 中复制 spring-servlet.xml，它会找到它，但在 JUnit 窗口上出现以下错误；

```
java.lang.NoClassDefFoundError: javax/servlet/ServletContext
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.buildLifecycleMetadata(InitDestroyAnnotationBeanPostProcessor.java:196)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.findLifecycleMetadata(InitDestroyAnnotationBeanPostProcessor.java:178)
    at ... 
```

并在控制台上关注

```
09:15:14,288 DEBUG SpringJUnit4ClassRunner:106 - SpringJUnit4ClassRunner constructor called with [class test.edu.amty.testdemo.controllers.TestControllerTest].
09:15:14,309 DEBUG TestContext:97 - Retrieved @ContextConfiguration [@org.springframework.test.context.ContextConfiguration(classes=[], locations=[], loader=interface org.springframework.test.context.ContextLoader, value=[spring-servlet.xml], inheritLocations=true)] for class [class test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,321 DEBUG ContextLoaderUtils:130 - Processing ContextLoader for @ContextConfiguration [@org.springframework.test.context.ContextConfiguration(classes=[], locations=[], loader=interface org.springframework.test.context.ContextLoader, value=[spring-servlet.xml], inheritLocations=true)] and declaring class [class test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,322 DEBUG ContextLoaderUtils:150 - Using default ContextLoader class [org.springframework.test.context.support.DelegatingSmartContextLoader] for test class [class test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,372 DEBUG ContextLoaderUtils:196 - Retrieved @ContextConfiguration [@org.springframework.test.context.ContextConfiguration(classes=[], locations=[], loader=interface org.springframework.test.context.ContextLoader, value=[spring-servlet.xml], inheritLocations=true)] for declaring class [class test.edu.amty.testdemo.controllers.TestControllerTest].
09:15:14,391 DEBUG ContextLoaderUtils:203 - Resolved context configuration attributes: [ContextConfigurationAttributes@4ca42b declaringClass = 'test.edu.amty.testdemo.controllers.TestControllerTest', locations = '{spring-servlet.xml}', classes = '{}', inheritLocations = true, contextLoaderClass = 'org.springframework.test.context.ContextLoader']
09:15:14,392 DEBUG ContextLoaderUtils:305 - Processing locations and classes for context configuration attributes [[ContextConfigurationAttributes@4ca42b declaringClass = 'test.edu.amty.testdemo.controllers.TestControllerTest', locations = '{spring-servlet.xml}', classes = '{}', inheritLocations = true, contextLoaderClass = 'org.springframework.test.context.ContextLoader']]
09:15:14,393 DEBUG DelegatingSmartContextLoader:75 - Delegating to GenericXmlContextLoader to process context configuration [ContextConfigurationAttributes@4ca42b declaringClass = 'test.edu.amty.testdemo.controllers.TestControllerTest', locations = '{spring-servlet.xml}', classes = '{}', inheritLocations = true, contextLoaderClass = 'org.springframework.test.context.ContextLoader'].
09:15:14,404 DEBUG ContextLoaderUtils:236 - Could not find an 'annotation declaring class' for annotation type [interface org.springframework.test.context.ActiveProfiles] and class [class test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,409  INFO TestContextManager:185 - @TestExecutionListeners is not present for class [class test.edu.amty.testdemo.controllers.TestControllerTest]: using defaults.
09:15:14,441 DEBUG TestContextManager:137 - Registering TestExecutionListener: org.springframework.test.context.support.DependencyInjectionTestExecutionListener@b80017
09:15:14,441 DEBUG TestContextManager:137 - Registering TestExecutionListener: org.springframework.test.context.support.DirtiesContextTestExecutionListener@239525
09:15:14,442 DEBUG TestContextManager:137 - Registering TestExecutionListener: org.springframework.test.context.transaction.TransactionalTestExecutionListener@497536
09:15:14,457 DEBUG ProfileValueUtils:68 - Retrieved @ProfileValueSourceConfiguration [null] for test class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,458 DEBUG ProfileValueUtils:80 - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,465 DEBUG ProfileValueUtils:68 - Retrieved @ProfileValueSourceConfiguration [null] for test class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,466 DEBUG ProfileValueUtils:80 - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,474 DEBUG ProfileValueUtils:68 - Retrieved @ProfileValueSourceConfiguration [null] for test class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,475 DEBUG ProfileValueUtils:80 - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,478 DEBUG ProfileValueUtils:68 - Retrieved @ProfileValueSourceConfiguration [null] for test class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,478 DEBUG ProfileValueUtils:80 - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,480 DEBUG ProfileValueUtils:68 - Retrieved @ProfileValueSourceConfiguration [null] for test class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,483 DEBUG ProfileValueUtils:80 - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,487 DEBUG TestContextManager:282 - beforeTestClass(): class [class test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,489 DEBUG ProfileValueUtils:68 - Retrieved @ProfileValueSourceConfiguration [null] for test class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,489 DEBUG ProfileValueUtils:80 - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:14,494 DEBUG TestContextManager:315 - prepareTestInstance(): instance [test.edu.amty.testdemo.controllers.TestControllerTest@1ab6c1c]
09:15:14,495 DEBUG DependencyInjectionTestExecutionListener:73 - Performing dependency injection for test context [[TestContext@dd7786 testClass = TestControllerTest, testInstance = test.edu.amty.testdemo.controllers.TestControllerTest@1ab6c1c, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1d23e75 testClass = TestControllerTest, locations = '{classpath:/test/edu/amty/testdemo/controllers/spring-servlet.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]].
09:15:14,496 DEBUG DelegatingSmartContextLoader:226 - Delegating to GenericXmlContextLoader to load context from [MergedContextConfiguration@1d23e75 testClass = TestControllerTest, locations = '{classpath:/test/edu/amty/testdemo/controllers/spring-servlet.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader'].
09:15:14,497 DEBUG AbstractGenericContextLoader:93 - Loading ApplicationContext for merged context configuration [[MergedContextConfiguration@1d23e75 testClass = TestControllerTest, locations = '{classpath:/test/edu/amty/testdemo/controllers/spring-servlet.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']].
09:15:14,633 DEBUG StandardEnvironment:114 - Initializing new StandardEnvironment
09:15:14,636 DEBUG StandardEnvironment:103 - Adding [systemProperties] PropertySource with lowest search precedence
09:15:14,640 DEBUG StandardEnvironment:103 - Adding [systemEnvironment] PropertySource with lowest search precedence
09:15:14,642 DEBUG StandardEnvironment:120 - Initialized StandardEnvironment with PropertySources [systemProperties,systemEnvironment]
09:15:14,808 DEBUG StandardEnvironment:114 - Initializing new StandardEnvironment
09:15:14,809 DEBUG StandardEnvironment:103 - Adding [systemProperties] PropertySource with lowest search precedence
09:15:14,810 DEBUG StandardEnvironment:103 - Adding [systemEnvironment] PropertySource with lowest search precedence
09:15:14,811 DEBUG StandardEnvironment:120 - Initialized StandardEnvironment with PropertySources [systemProperties,systemEnvironment]
09:15:14,830  INFO XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [test/edu/amty/testdemo/controllers/spring-servlet.xml]
09:15:14,881 DEBUG DefaultDocumentLoader:72 - Using JAXP provider [com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl]
09:15:14,965 DEBUG PluggableSchemaResolver:105 - Trying to resolve XML entity with public id [null] and system id [http://www.springframework.org/schema/beans/spring-beans-3.0.xsd]
09:15:14,967 DEBUG PluggableSchemaResolver:140 - Loading schema mappings from [META-INF/spring.schemas]
09:15:14,976 DEBUG PluggableSchemaResolver:146 - Loaded schema mappings: {http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd=org/springframework/oxm/config/spring-oxm-3.0.xsd, ...
09:15:14,980 DEBUG PluggableSchemaResolver:118 - Found XML schema [http://www.springframework.org/schema/beans/spring-beans-3.0.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-3.0.xsd
09:15:15,094 DEBUG PluggableSchemaResolver:105 - Trying to resolve XML entity with public id [null] and system id [http://www.springframework.org/schema/context/spring-context-3.0.xsd]
09:15:15,096 DEBUG PluggableSchemaResolver:118 - Found XML schema [http://www.springframework.org/schema/context/spring-context-3.0.xsd] in classpath: org/springframework/context/config/spring-context-3.0.xsd
09:15:15,107 DEBUG PluggableSchemaResolver:105 - Trying to resolve XML entity with public id [null] and system id [http://www.springframework.org/schema/tool/spring-tool-3.0.xsd]
09:15:15,109 DEBUG PluggableSchemaResolver:118 - Found XML schema [http://www.springframework.org/schema/tool/spring-tool-3.0.xsd] in classpath: org/springframework/beans/factory/xml/spring-tool-3.0.xsd
09:15:15,134 DEBUG DefaultBeanDefinitionDocumentReader:108 - Loading bean definitions
09:15:15,173 DEBUG DefaultNamespaceHandlerResolver:156 - Loaded NamespaceHandler mappings: {http://www.springframework.org/schema/p=org.springframework.beans.factory.xml.SimplePropertyNamespaceHandler, http://www.springframework.org/schema/mvc=org.springframework.web.servlet.config.MvcNamespaceHandler, http://www.springframework.org/schema/util=org.springframework.beans.factory.xml.UtilNamespaceHandler, http://www.springframework.org/schema/jee=org.springframework.ejb.config.JeeNamespaceHandler, http://www.springframework.org/schema/aop=org.springframework.aop.config.AopNamespaceHandler, http://www.springframework.org/schema/oxm=org.springframework.oxm.config.OxmNamespaceHandler, http://www.springframework.org/schema/cache=org.springframework.cache.config.CacheNamespaceHandler, http://www.springframework.org/schema/c=org.springframework.beans.factory.xml.SimpleConstructorNamespaceHandler, http://www.springframework.org/schema/tx=org.springframework.transaction.config.TxNamespaceHandler, http://www.springframework.org/schema/jms=org.springframework.jms.config.JmsNamespaceHandler, http://www.springframework.org/schema/task=org.springframework.scheduling.config.TaskNamespaceHandler, http://www.springframework.org/schema/lang=org.springframework.scripting.config.LangNamespaceHandler, http://www.springframework.org/schema/context=org.springframework.context.config.ContextNamespaceHandler}
09:15:15,226 DEBUG PathMatchingResourcePatternResolver:550 - Looking for matching resources in directory tree [I:\Running\workspaces\projectSetup\TestDemo\build\classes\main\edu\amty\testdemo]
09:15:15,227 DEBUG PathMatchingResourcePatternResolver:612 - Searching directory [I:\Running\workspaces\projectSetup\TestDemo\build\classes\main\edu\amty\testdemo] for files matching pattern [I:/Running/workspaces/projectSetup/TestDemo/build/classes/main/edu/amty/testdemo/**/*.class]
09:15:15,233 DEBUG PathMatchingResourcePatternResolver:612 - Searching directory [I:\Running\workspaces\projectSetup\TestDemo\build\classes\main\edu\amty\testdemo\controllers] for files matching pattern [I:/Running/workspaces/projectSetup/TestDemo/build/classes/main/edu/amty/testdemo/**/*.class]
09:15:15,239 DEBUG PathMatchingResourcePatternResolver:351 - Resolved location pattern [classpath*:main/edu/amty/testdemo/**/*.class] to resources [file [I:\Running\workspaces\projectSetup\TestDemo\build\classes\main\edu\amty\testdemo\controllers\TestController.class]]
09:15:15,240 DEBUG ClassPathBeanDefinitionScanner:233 - Scanning file [I:\Running\workspaces\projectSetup\TestDemo\build\classes\main\edu\amty\testdemo\controllers\TestController.class]
09:15:15,310 DEBUG ClassPathBeanDefinitionScanner:244 - Identified candidate component class: file [I:\Running\workspaces\projectSetup\TestDemo\build\classes\main\edu\amty\testdemo\controllers\TestController.class]
09:15:15,350 DEBUG XmlBeanDefinitionReader:216 - Loaded 6 bean definitions from location pattern [classpath:/test/edu/amty/testdemo/controllers/spring-servlet.xml]
09:15:15,354  INFO GenericApplicationContext:495 - Refreshing org.springframework.context.support.GenericApplicationContext@ae7b77: startup date [Thu Feb 28 09:15:15 IST 2013]; root of context hierarchy
09:15:15,355 DEBUG GenericApplicationContext:525 - Bean factory for org.springframework.context.support.GenericApplicationContext@ae7b77: org.springframework.beans.factory.support.DefaultListableBeanFactory@a4871e: defining beans [testController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,viewResolver]; root of factory hierarchy
09:15:15,386 DEBUG DefaultListableBeanFactory:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
09:15:15,387 DEBUG DefaultListableBeanFactory:430 - Creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
09:15:15,437 DEBUG DefaultListableBeanFactory:504 - Eagerly caching bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor' to allow for resolving potential circular references
09:15:15,440 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
09:15:15,491 DEBUG DefaultListableBeanFactory:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
09:15:15,492 DEBUG DefaultListableBeanFactory:430 - Creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
09:15:15,494 DEBUG DefaultListableBeanFactory:504 - Eagerly caching bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor' to allow for resolving potential circular references
09:15:15,495 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
09:15:15,495 DEBUG DefaultListableBeanFactory:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
09:15:15,496 DEBUG DefaultListableBeanFactory:430 - Creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
09:15:15,497 DEBUG DefaultListableBeanFactory:504 - Eagerly caching bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor' to allow for resolving potential circular references
09:15:15,498 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
09:15:15,498 DEBUG DefaultListableBeanFactory:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
09:15:15,499 DEBUG DefaultListableBeanFactory:430 - Creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
09:15:15,508 DEBUG DefaultListableBeanFactory:504 - Eagerly caching bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor' to allow for resolving potential circular references
09:15:15,509 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
09:15:15,510 DEBUG DefaultListableBeanFactory:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
09:15:15,510 DEBUG DefaultListableBeanFactory:430 - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
09:15:15,511 DEBUG DefaultListableBeanFactory:504 - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0' to allow for resolving potential circular references
09:15:15,511 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
09:15:15,517 DEBUG GenericApplicationContext:794 - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@c7eb9d]
09:15:15,523 DEBUG GenericApplicationContext:818 - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@1f68572]
09:15:15,525  INFO DefaultListableBeanFactory:557 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a4871e: defining beans [testController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,viewResolver,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
09:15:15,526 DEBUG DefaultListableBeanFactory:217 - Creating shared instance of singleton bean 'testController'
09:15:15,527 DEBUG DefaultListableBeanFactory:430 - Creating instance of bean 'testController'
09:15:15,534 DEBUG DefaultListableBeanFactory:504 - Eagerly caching bean 'testController' to allow for resolving potential circular references
09:15:15,539 DEBUG CachedIntrospectionResults:222 - Getting BeanInfo for class [main.edu.amty.testdemo.controllers.TestController]
09:15:15,550 DEBUG CachedIntrospectionResults:238 - Caching PropertyDescriptors for class [main.edu.amty.testdemo.controllers.TestController]
09:15:15,557 DEBUG CachedIntrospectionResults:250 - Found bean property 'class' of type [java.lang.Class]
09:15:15,559 DEBUG CachedIntrospectionResults:250 - Found bean property 'defaultMessage' of type [java.lang.String]
09:15:15,568 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'testController'
09:15:15,569 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
09:15:15,570 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
09:15:15,570 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
09:15:15,571 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
09:15:15,571 DEBUG DefaultListableBeanFactory:217 - Creating shared instance of singleton bean 'viewResolver'
09:15:15,572 DEBUG DefaultListableBeanFactory:430 - Creating instance of bean 'viewResolver'
09:15:15,590 DEBUG TestContextManager:439 - afterTestClass(): class [class test.edu.amty.testdemo.controllers.TestControllerTest]
09:15:15,591 DEBUG DirtiesContextTestExecutionListener:113 - After test class: context [[TestContext@dd7786 testClass = TestControllerTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1d23e75 testClass = TestControllerTest, locations = '{classpath:/test/edu/amty/testdemo/controllers/spring-servlet.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]], dirtiesContext [false]. 
```

*我正在手动添加依赖项，而不是使用 maven 或其他构建工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:47:10.913

下的文件`/WEB-INF`不在类路径上（与下的资源和下的`/WEB-INF/classes`jar相对`/WEB-INF/lib`），这就是您无法`spring-servlet.xml`从该位置加载的原因。

如果您想测试那里定义的一些 bean，您需要将该部分分解到另一个配置文件中，该文件位于类路径上（例如，在 下`/resources/spring`）。然后您可以从 导入它`spring-servlet.xml`，并从您的测试类中引用它（使用`@ContextConfiguration`）。如果您只测试一些控制器，这也可以解决`NoClassDefFoundError`问题，因为它们通常不依赖于 Servlet API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:15:10.113

我正在查看**属性 > 部署程序集**以检查类路径中的资源。但需要从项目运行/调试配置中进行设置。

第二个问题是由于项目中缺少依赖项而出现的。j2ee.jar 被留下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T21:17:42.980

添加 j2ee.jar 作为测试依赖项为我解决了 NoClassDefFoundError 问题。

# c# - 垂直滚动条没有出现在列表框中

> ID：15128260
> 
> 赞同：0
> 
> 时间：2013-02-28T05:37:45.953
> 
> 标签：c#, wpf, xaml, listbox, visual-studio-extensions

我正在设计一个视觉工作室扩展，我需要一个停靠面板窗口。我可以使用 WPF 获取此窗口。在这个特定的窗口中，我正在显示一些超过 100 的字符串的动态列表。为此，我在该窗口中使用列表框。

由于此列表包含 100 多个字符串，因此所有字符串均不可见。我应该能够垂直滚动列表以访问所有字符串。但我没有得到垂直滚动条。我尝试了一些东西，但它们不起作用。我是新手，所以我不知道该怎么做。代码如下。

```
<UserControl d:DesignHeight="300" d:DesignWidth="300">      
<Grid >
    <StackPanel Orientation="Vertical" CanVerticallyScroll="True" CanHorizontallyScroll="True"  >
        <TextBlock Margin="10" HorizontalAlignment="Center" Foreground="{DynamicResource {x:Static vsfx:VsBrushes.ToolWindowTextKey}}" Text="Available Projects"></TextBlock>

        <ListBox Name="AllProjects" TabIndex="0"  Height="Auto" ScrollViewer.CanContentScroll="True" ScrollViewer.VerticalScrollBarVisibility="Visible" />           
    </StackPanel>
</Grid> </UserControl> 
```

我只以 xaml 形式做这些事情，而在后端 c# 代码中什么都没有。你们能告诉我我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:01:48.927

使用这个你会看到滚动条

```
<Grid >
    <StackPanel Orientation="Vertical" CanVerticallyScroll="True" CanHorizontallyScroll="True"  >
        <TextBlock Margin="10" HorizontalAlignment="Center" Text="Available Projects"></TextBlock>
        <ListBox Name="AllProjects" TabIndex="0" ScrollViewer.VerticalScrollBarVisibility="Visible" Height="100"  />
    </StackPanel>
</Grid> 
```

只需将高度属性固定为常数即可。

# spring - 自动装配 bean

> ID：15128261
> 
> 赞同：0
> 
> 时间：2013-02-28T05:37:56.867
> 
> 标签：spring

我是春天的新手，我有一个关于自动装配 bean 的问题

所以基本上在我的上下文文件中我定义了一个名为

```
<bean id="offerpricedao" class="com.impl.OfferPriceDAOImpl" >
    <constructor-arg index="0" ref="offerpriceclass"></constructor-arg>
    <constructor-arg index="1" ref="myrole"></constructor-arg>
    <constructor-arg index="2"><null/></constructor-arg>
</bean> 
```

我在这里定义的所有其他bean都在引用..这段代码在src main java中..在src main test中我有一个加载这个配置文件的testng测试，在我的测试中我有这样的东西

```
@ContextConfiguration(locations = { "classpath:Context.xml" })
public class SetOfferPricesTest extends AbstractTestNGSpringContextTests {

     @Autowired
      IOfferPriceDAO test;
} 
```

并且这个自动装配工作正常......我认为我们应该在我的配置文件中包含这个用于自动装配工作..没有这个我的自动装配是如何工作的......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:48:42.843

上面的配置和代码不足以说明它是如何工作的。

由于它可以工作，因此 bean 是在**Context.xml中的****某个位置**或在 context.xml 中导入的 xml 文件中定义的。

 **dhanush 说的也是真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:47:39.583

您可能`default-autowire="byName"`在上下文 xml 中有类似的东西。当您添加时，`@Autowired`Spring 会找到该接口的实现并自动装配它。在您的情况下，实施是`com.impl.OfferPriceDAOImpl`

注释还`@ContextConfiguration`从类路径加载上下文 xml**

# java - 在 JBoss esb 服务器中找不到我的 bean

> ID：15128269
> 
> 赞同：1
> 
> 时间：2013-02-28T05:38:37.450
> 
> 标签：java, jakarta-ee, jboss, ejb, esb

我有 jbossesb-server-4.11 和 eclipse-jee-juno。我想创建一些简单的 EJB 应用程序，将其部署在服务器上并从客户端调用一些方法。一切似乎都清楚了。我在这里找到了一个简单的 Hello world 应用程序：[https ://sites.google.com/a/thedevinfo.com/thedevinfo/Home/jboss/jboss-application-server/ejb3-session-bean-tutorial-using-jboss-和日食](https://sites.google.com/a/thedevinfo.com/thedevinfo/Home/jboss/jboss-application-server/ejb3-session-bean-tutorial-using-jboss-and-eclipse)。我做了同样的事情，我也尝试从这个站点下载这个例子，但它对我不起作用。我在 Eclipse 中创建了 JBoss 服务器，然后在该服务器上运行我的 ejb 应用程序，然后我尝试以这种方式获取我的 bean：

```
InitialContext ctx = new InitialContext(props);         
MyBeanRemote bean = (MyBeanRemote) ctx.lookup("MyBean/remote"); 
```

但我有以下错误：“javax.naming.NameNotFoundException：MyBean 未绑定”。这是我在 ejb 项目中的简单代码：

```
@Remote
public interface MyBeanRemote extends IMyBean{}
@Local
public interface MyBeanLocal extends IMyBean {}
@Stateless  
public class MyBean implements MyBeanLocal, MyBeanRemote {
    public void doSomething() {
        System.out.println("Hello World!");         
    }
} 
```

请指教我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:07:21.897

看起来独立`jbossesb-server`是非常狭窄的专业产品。它提供特定于 ESB 的功能，但缺乏 EJB 支持。不过，您的测试应用程序在 vanilla 上部署并运行良好（我认为`JBossAS 4.2.3.GA`AS 4.2.3 是基础）。`jbossesb-server-4.11`

如果 ESB 对您来说是必须的，我建议安装 JBoss ESB 作为普通`JBoss 4.2.3.GA`或更新的 5.x、6.x 系列的扩展（尚不支持 AFAIK 7.x）。为此，您需要下载`jboss-4.2.3.GA`而`jbossesb-4.11.zip`不是 jbossesb - **server** -4.11.zip。然后，您需要按照[此](http://docs.jboss.org/jbossesb/docs/4.11/manuals/html/Getting_Started_Guide/index.html#sect-installing_to_as)说明进行操作。注意有两个版本`JBossAS 4.2.3`：

*   `jboss-4.2.3.GA.zip`- 对于 JDK5
*   `jboss-4.2.3.GA-jdk6.zip`- 适用于 JDK6+

5.x 系列也是如此（6.x 和 7.x 需要 JDK6+）。

另一种选择是使用完整的商业 SOA 解决方案：RedHat 的`SOA Platform`. 不过它并不便宜。

# javascript - Jquery 不能与 phoneGap 一起使用

> ID：15128270
> 
> 赞同：0
> 
> 时间：2013-02-28T05:38:39.673
> 
> 标签：javascript, android, jquery, cordova

我正在使用phonegap，并且此代码在我的android手机中完美加载。但是当我单击按钮时，它不显示文本。

```
 <!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("#btn1").click(function(){
    $("#test1").text("Hello world!");
  });
});
</script>
</head>

<body>
<p id="test1"></p>
<button id="btn1">Set Text</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:02:37.530

我不认为 JQuery 被加载到页面中。

您已将其引用为

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> 
```

它说使用当前页面作为服务器的任何协议。在移动设备上，您从 file:// 获得服务，因此浏览器获取脚本的实际请求是：

```
file://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js 
```

您需要指定要使用的方案，或者将其包含在 PG 项目本身中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:44:25.790

在使用移动设备时，强烈建议您使用移动版的jquery，`jquery.mobile.js`

然后你可以使用[vclick](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)一切正常：

> 用于处理触摸设备上的 touchend 或鼠标单击事件的规范化事件。

```
$(document).ready(function(){
     $("#btn1").vclick(function(){
       $("#test1").text("Hello world!");
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T05:58:50.997

尝试使用这个：

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
  </script>
  <script>
     $(document).on('pageinit', function(event){
        $("#btn1").click(function(){
            $("#test1").text("Hello world!");
        });
     });
  </script>
  <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js">
  </script>
</head>

<body>
   <p id="test1"></p>
   <button id="btn1">Set Text</button>

</body>
</html> 
```

如果为移动应用程序开发，而不是`doc ready`使用`pageinit`jQuerymobile。

# c - 在 C 中的当前范围内无法访问的变量

> ID：15128275
> 
> 赞同：1
> 
> 时间：2013-02-28T05:39:17.543
> 
> 标签：c, variables, scope

我听说过在当前范围内无法访问的实时变量的概念。我能想到的三个例子是：

1.  `ptr = malloc(size * sizeof(ptr_type); ptr = different_ptr;`,

2.  被调用函数内部不再在作用域内的静态变量，或

3.  不在范围内的文件中的非外部全局变量。

我对此有两个问题。我是否正确理解了这个概念？如果我这样做，标准 C 中还有哪些其他示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:11:24.417

1.  是的，您似乎准确地理解了这个概念。

2.  嵌套范围：

    ```
    void pointless(int x)
    {
        int y = x;
        if (y > 0)
        {
            int x = y + 1;  // This x means the argument is out of scope (hidden)
            if (x > 10)
            {
                 int y = x - 10;  // This y hides the previous y
                 printf("%d %d\n", x, y);
            }
        }
    } 
    ```

    这不是好的代码，但有时代码生成器会做一些没有意义的事情，但使用嵌套变量声明有点类似。

# javascript - 在 Titanium 应用程序中嵌入远程网站的一些内容

> ID：15128276
> 
> 赞同：2
> 
> 时间：2013-02-28T05:39:21.763
> 
> 标签：javascript, android, ios, titanium

我正在尝试在我的应用程序中显示远程网页的一些特定内容，因为我正在使用 Titanium Appcelerator 但我无法执行此操作，因为我想添加我需要的任何网站的内容，例如我不想添加的 Amazon.com在我的应用中显示不必要的内容。请给我一些指导，以便我可以继续我的工作。

正如我在 webview 中显示 cnn.com 的完整网页所做的那样，但我想在我自己的格式化视图中显示其特定内容。

但我必须展示它的一些特定内容......请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:46:01.267

**不可能。**

您不能将网站的一部分抓取到您的 webview 中，因为 webview 需要 url 而我直到现在还没有听说过部分 url。你？

# excel - 突出显示仅包含字母的单元格

> ID：15128277
> 
> 赞同：0
> 
> 时间：2013-02-28T05:39:23.330
> 
> 标签：excel, excel-formula, excel-2010

如何在 excel 中使用条件格式仅突出显示仅包含字母字符的字母数字字符串。所以一个字符串可能有：

*   142425aasj
*   424252 asd
*   65566
*   21123123
*   123123123
*   222

它只会突出显示前 3 行。

非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:31:43.113

您可以使用该`ISNUMBER`功能来实现这一点：只需将其用作自定义公式：

```
=不（ISNUMBER（A1））

```

要应用此公式，请选择单元格 A1，然后选择完整的 A 列（调整到您的列）。然后去*Conditional Formatting* -> *New Rule* -> *Use a formula to determine which cells to format*。在这里，插入 aove 公式并设置格式。

完毕！

如果您的数字存储为文本，请改用以下公式：

```
=ISERROR（值（A1））

```

# python - 如何从字符串中删除所有符号和空格？

> ID：15128279
> 
> 赞同：0
> 
> 时间：2013-02-28T05:39:28.913
> 
> 标签：python, function, csv

我正在通过 读取 csv 文件`csv.reader()`，我想从各种符号或空格中读取值，并且以小写形式读取，例如：

```
a = " Kingston-(USB) = 1GB, 2GB, 32GB . . . " 
```

像这样转换'a'：

```
a = "kingstonusb1gb2gb32gb" 
```

我只想要数据中的字母和数字。
应删除任何类型的符号。
我已经使用`.lower()`函数和`.strip()`函数来做到这一点。但是 strip 函数只是删除单词之间的空格，而我想删除每种符号。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:43:22.783

您可以使用正则表达式：

```
>>> import re
>>> a = " Kingston-(USB) = 1GB, 2GB, 32GB . . . "
>>> re.sub(r'[^a-z0-9]', '', a.lower())
'kingstonusb1gb2gb32gb' 
```

或发电机：

```
>>> import string
>>> allowed = string.lowercase + string.digits
>>> ''.join(c for c in a.lower() if c in allowed)
'kingstonusb1gb2gb32gb' 
```

或者快速的东西：

```
>>> import string
>>> allowed = set(string.lowercase + string.digits)
>>> ''.join(filter(allowed.__contains__, a.lower()))
'kingstonusb1gb2gb32gb' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T06:02:07.703

如果您使用的是 ascii，则可以使用 str.translate 从小写字符串中删除所有无数字和字母的内容

```
>>> from string import ascii_letters, digits
>>> ascii = set(chr(e) for e in range(128))
>>> ascii_sans_alpha = ''.join(ascii.difference(ascii_letters + digits))
>>> a = " Kingston-(USB) = 1GB, 2GB, 32GB . . . "
>>> a.lower().translate(None,ascii_sans_alpha)
'kingstonusb1gb2gb32gb' 
```

这有多快？使用 timeit 参考

```
>>> def mgilson(a, good = set(string.ascii_lowercase + string.digits)):
    return ''.join(x for x in a.lower() if x in good)

>>> def blender_re(a):
    return re.sub(r'[^a-z0-9]', '', a.lower())

>>> def blender_gen(a, allowed = string.lowercase + string.digits):
    return ''.join(c for c in a.lower() if c in allowed)

>>> def blender_fast(a, allowed = set(string.lowercase + string.digits)):
    return ''.join(filter(allowed.__contains__, a.lower()))

>>> def abhijit(a, ascii_sans_alpha = ''.join(set(chr(e) for e in range(128)).difference(ascii_letters + digits))):
    return a.lower().translate(None,ascii_sans_alpha)

>>> time_dict = {"abhijit": "from __main__ import string, a",
             "blender_re":"from __main__ import re, a, abhijit",
             "blender_gen": "from __main__ import string, a",
             "blender_fast": "from __main__ import string, a",
             "mgilson": "from __main__ import string, a"}
>>> for k, v in time_dict.items():
    t = timeit.Timer(stmt="{}(a)".format(k),setup = "{},{}".format(v,k))
    print "Timing for {} is {}".format(k, t.timeit(100000))

Timing for blender_fast is 0.573348026237
Timing for blender_re is 0.632169556846
Timing for blender_gen is 0.720916486331
Timing for mgilson is 0.586592185393
Timing for abhijit is 0.203489867547
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T05:42:56.290

我可能会做类似的事情：

```
import string
good = set(string.ascii_lowercase + string.digits)
a = ''.join(x for x in a.lower() if x in good) 
```

它可能不是最有效的，但它应该可以工作并且很容易阅读/理解。

# javascript - 当鼠标移动到覆盖元素的东西时不要触发 onmouseout

> ID：15128281
> 
> 赞同：0
> 
> 时间：2013-02-28T05:40:10.913
> 
> 标签：javascript, jquery, html, css, iframe

我有一个 iframe和一个出现在它上面`#viewer`的绝对定位元素。`#appear_above_viewer`我想`#appear_above_viewer`在鼠标经过时`#viewer`淡入，在鼠标离开时淡出。

到目前为止，我有这个代码：

```
$("#viewer").hover(
    function(){ $("#appear_above_viewer").animate({ opacity: 1 }, 'slow'); },
    function(){ $("#appear_above_viewer").animate({ opacity: 0 }, 'slow'); }
); 
```

它似乎有效，直到您将鼠标悬停在 上`#appear_above_viewer`，它会方便地消失。我认为这是因为绝对定位的元素被认为与 iframe 不同，它在屏幕上的位置没有区别。

我只想`#appear_above_viewer`在鼠标离开时消失`#viewer`，以及它上面的任何东西完全消失。这可能吗？

（我已经阅读了有关此的其他问题，但似乎没有一个适合我的情况）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:51:28.510

仍然不是肯定的，我确切地知道预期的行为，但您可能只需要将`pointer-events`css 中的属性应用到`none`您的`appear_above_viewer`.

这是一个[jsFiddle](http://jsfiddle.net/3bcX8/)演示类似于我认为你想要的东西。

编辑

您可以将此问题用于跨浏览器解决方案：

[单击 DIV 到底层元素](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements/4839672#4839672)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T11:17:18.443

你可以试试这个。

```
onmouseout =function(e){
   if ( e && e.preventDefault )
        e.preventDefault();
        e.stopPropagation();
    else
        window.event.cancelBubble = true;
        window.event.returnValue = false;
    return false;
  } 
```

# c++ - 如何从 QAbstractItemView 中删除小部件

> ID：15128282
> 
> 赞同：3
> 
> 时间：2013-02-28T05:40:20.273
> 
> 标签：c++, pyqt, pyside, qtreeview

QAbstractItemView 有[`setIndexWidget](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setIndexWidget)但没有“删除”功能。

当我想从视图中删除它们时，我试图通过存储传递给`QAbstractItemView`和`hide`/`delete`它们的小部件来解决它，这最终导致`RuntimeError: wrapped C/C++ object of %S has been deleted`错误。我认为这是由于小部件的所有权被传递给视口，正如文档所说：

```
Sets the given widget on the item at the given index, passing the ownership of the widget to the viewport. 
```

如何删除小部件？

我正在使用`PyQt`，但我认为这也是一个有效的`C++`问题`PySide`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:52:20.633

`QAbstractItemView`是**基于模型的视图的基础**。这意味着您应该从模型中删除项目，而不是从视图中。然后模型负责通过适当的信号通知视图。

您可能对[`QAbstractItemModel`](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html)方法感兴趣，例如`removeRow`. 如果您自己实现模型，则您有责任自己实现它们并发出信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:00:49.020

如果您`None`作为新小部件传递，它将删除旧小部件并且什么都不放，从而有效地删除旧小部件：

```
foo.setIndexWidget(index, None) 
```

注意：这类似于传递`None`as `parent`，没有`removeParent`但只有`setParent`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:43:39.003

找到了适合我的解决方法。使用[QAbstractItemModel::reset()](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#reset)似乎也删除了由 setIndexWidget() 设置的小部件。

这对我来说不是很直观，因为我将小部件设置为`QAbstractView`not `ItemModel`。

更准确地说，API doc 建议使用`beginResetModel()`and`endResetModel()`而不是`reset()`我遵循的。

# shell - 如何使用 PowerShell 脚本调用工作流活动？

> ID：15128283
> 
> 赞同：0
> 
> 时间：2013-02-28T05:40:34.377
> 
> 标签：shell, powershell, workflow, workflow-foundation, workflow-activity

如何使用 PowerShell 脚本启动工作流（包含在自定义程序集中）？

# eclipse - Eclipse 的 egit 插件

> ID：15128294
> 
> 赞同：3
> 
> 时间：2013-02-28T05:41:47.710
> 
> 标签：eclipse, egit, gitlab

我已经创建了一个 gitlab 存储库，并按照安装说明进行操作，它成功了（我想......我可以在线浏览存储库），现在我想将 egit 插件从 eclipse 连接到这个远程存储库。

我使用 SVN 有一段时间了，现在我们需要切换到 git，我很困惑。egit 只为我提供了创建本地存储库的选项，但我对如何将代码推送/获取到我的在线存储库有点迷茫。

任何建议将不胜感激:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:22:04.620

使用 Gitlab（使用 ssh url），这意味着您必须先在 Egit 中注册您的公共和私有 ssh 密钥，然后才能克隆它。

请参阅[EGit ssh 配置](http://wiki.eclipse.org/EGit/User_Guide/Remote#Eclipse_SSH_Configuration)

![EGit ssh 配置](../Images/7fe22c8c2a2d1641234abdfc7611029e.png)

然后你可以[克隆它](http://wiki.eclipse.org/EGit/User_Guide/Remote#Cloning_remote_Repositories)。

是的，你需要在本地克隆完整的 repo 来处理它，这就是 a 之间的区别：

*   CVCS（集中式版本控制系统）类似于 SVN
*   DVCS：*分布式*版本控制系统。

有关更多信息，请参阅“[向我推销分布式修订控制](https://stackoverflow.com/questions/2563836/sell-me-distributed-revision-control/2563917#2563917)”和“[描述使用版本控制（VCS 或 DVCS）的工作流程](https://stackoverflow.com/questions/2704996/describe-your-workflow-of-using-version-control-vcs-or-dvcs?lq=1)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:44:34.497

首先，您需要使用 克隆远程存储库`git clone <repository>`，然后您可以使用 egit 将其导入到 eclipse

或者

您可以使用 EGit 提供的克隆功能将远程仓库克隆到本地系统

# jquery - 如何使用nodejs渲染服务器中的所有js文件

> ID：15128299
> 
> 赞同：0
> 
> 时间：2013-02-28T05:42:10.867
> 
> 标签：jquery, html, node.js

我已经使用带有 jquery 的 html 设计了我的网页。我的网页加载速度非常慢，因为我包含更多的 js 库。如果我将执行一些动态操作，它将调用 javascript 库并在客户端进行一些操作，因此加载速度很慢。

现在我来回答我的问题：

我想使用 nodejs 在服务器端编译我的所有 javascript 文件。我必须只向客户端提供 html 输出，因为客户端不会进行任何操作，它只会显示 html。

我想要这样：

1.如果服务器请求一个页面 2.请求转到nodejs服务器 3.nodejs应该编译所有链接的js,css 4.最后它会将动态内容渲染成单个html 5.返回浏览器 6.浏览器将显示html文件

我不确定在nodejs中是否可行，因为我是这个nodejs技术的初学者。如果你能提前感谢，请帮助我。

如果我的问题是错的，请原谅我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:24:03.837

```
var express = require('express')
  , app = express()
  , http = require('http')
  , server = http.createServer(app);

server.listen(3000);
console.log('Server Started @ 3000');

app.get('/', function (req, res) {
    res.sendfile(__dirname + '/index.html');
});
app.get('/index.html', function (req, res) {
    res.sendfile(__dirname + '/index.html');
});
app.get('/game.html', function (req, res) {
    res.sendfile(__dirname + '/game.html');
});
app.get('/:url', function (req, res) {  
    res.sendfile(__dirname + req.url);
});
app.get('/:url[.js]', function (req, res) {
    res.sendfile(__dirname + req.url);
});
app.get('/:url[.css]', function (req, res) {    
    res.sendfile(__dirname + req.url);
});
app.get('/images/:url[.png]', function (req, res) {
    res.sendfile(__dirname + req.url);
}); 
```

试试这个，希望你能有所了解

*如果我的回答是错误的，请原谅我*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:38:59.147

IMO，您需要一个 Node.js Web 应用程序框架。网上有很多。

一些例子：

*   [表达](http://expressjs.com)

*   [复合JS](http://compoundjs.com)

# r - 如何使用 R 中的小波变换为时间序列数据实现 ARX（AutoRegressive with Exogenous）模型？

> ID：15128305
> 
> 赞同：2
> 
> 时间：2013-02-28T05:42:46.357
> 
> 标签：r, wavelet

有我想建立一个 ARX 模型的时间序列数据。数据是这样的：

```
Time             Volume
00:00hr          4632131
01:00hr          4564653
02:00hr          6313986
.......          .......
.......          .......
23:00hr          7986456 
```

谁能帮我解决上述问题。上述时间序列的外生输入为：

```
-644691181
-121187080
353422690
417492115
-504192375
420646272
-47480551
260350503
2151074145
1251550732
788874753
540183268
396739715
948170766
-1433091907
-148444555
-840182654
-893652578
-1738734435
-1431476210
24974246
93873803
-324033231
479813749 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:06:35.273

我使用`fastVAR`包。我不是时间序列专家，所以我不能从结果中确定。

```
exos <- c(-644691181, -121187080, 353422690, 417492115, -504192375, 420646272, 
  -47480551, 260350503, 2151074145, 1251550732, 788874753, 540183268, 
  396739715, 948170766, -1433091907, -148444555, -840182654, -893652578, 
  -1738734435, -1431476210, 24974246, 93873803, -324033231, 479813749
)

dat <- sample(4632131:100000,24 )
library(fastVAR)
fastVARX(matrix(dat),matrix(exos),3,2,getdiag=FALSE)
Call:
lm(formula = varxz$y.p ~ varxz$Z)

Coefficients:
(Intercept)   varxz$Z.l1   varxz$Z.l2   varxz$Z.l3   varxz$Z.l1   varxz$Z.l2  
  4.642e+06   -2.182e-01   -2.607e-01   -4.587e-01    2.963e-04   -3.743e-04 
```

# cuda - CUDA 中间接访问导致的未合并全局内存访问

> ID：15128310
> 
> 赞同：6
> 
> 时间：2013-02-28T05:43:03.913
> 
> 标签：cuda, gpu, gpgpu

我的 CUDA 程序正遭受未合并的全局内存访问。虽然第 idx 线程只处理数组中的第 [idx] 单元格，但有许多间接内存访问，如下所示。

```
int idx=blockDim.x*blockIdx.x+threadIdx.x;

.... = FF[m_front[m_fside[idx]]]; 
```

对于 m_fisde[idx]，我们有合并访问，但我们真正需要的是 FF[m_front[m_fside[idx]]]。有两级间接访问。

我试图在 m_front 或 m_fsied 中找到一些数据模式，以使其成为直接顺序访问，但发现它们几乎是“随机的”。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T22:16:43.613

**加速全局内存随机访问：使 L1 缓存行无效**

Fermi 和 Kepler 架构支持来自全局内存的两种类型的负载。**完全缓存**是默认模式，它尝试在 L1、L2、GMEM 中命中，加载粒度为 128 字节行。**L2-only**尝试在 L2 中命中，然后是 GMEM，加载粒度为 32 字节。对于某些随机访问模式，可以通过使 L1 无效并利用 L2 的较低粒度来提高内存效率。这可以通过编译`–Xptxas –dlcm=cg`选项来完成`nvcc`。

**加速全局内存访问的一般准则：禁用 ECC 支持**

Fermi 和 Kepler GPU 支持纠错码 (ECC)，默认启用 ECC。ECC 降低了峰值内存带宽，并被要求增强医学成像和大规模集群计算等应用程序中的数据完整性。如果不需要，可以使用 Linux 上的 nvidia-smi 实用程序（请参阅[链接](http://johanneshabich.blogspot.it/2011/04/nvidia-cuda-disableenable-ecc.html)）或通过 Microsoft Windows 系统上的控制面板禁用它以提高性能。请注意，打开或关闭 ECC 需要重新启动才能生效。

**在 Kepler 上加速全局内存访问的一般准则：使用只读数据缓存**

Kepler 具有一个 48KB 的缓存，用于存储已知在函数执行期间为只读的数据。使用只读路径是有益的，因为它减轻了共享/L1 缓存路径的负担，并且支持全速非对齐内存访问。只读路径的使用可以由编译器自动管理（使用`const __restrict`关键字）或`__ldg()`由程序员显式管理（使用内在函数）。

# email - 显示 Html 标记的 PHP 邮件

> ID：15128314
> 
> 赞同：-2
> 
> 时间：2013-02-28T05:43:15.357
> 
> 标签：email, phpmailer, php

它没有添加以下标题信息，而是在 PHP 邮件中显示 HTML 标记。

```
 $headers  = "From: ".$name."<".$email.">\r\n";
    $headers .= "Reply To: ".$email."\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "X-Mailer: PHP v".phpversion()."\r\n";         
    $headers .= "Content-Type: text/html; charset=iso-8859-1\r\n";
    $headers .= "Content-Transfer-Encoding: 8bit\r\n"; 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:49:36.230

尝试这个，

```
 $subject = 'Mail Subject';
  $message = 'Test';
  $headers = 'MIME-Version: 1.0' . "\r\n" . 'Content-type: text/html; charset=UTF-8' . "\r\n";
  $headers .= "X-Mailer: PHP \r\n";
  $headers .= 'From: ".$name."<".$email.">' . "\r\n";
  $headers .= 'Reply-To: ".$email."' . "\r\n";
  mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:47:47.693

我的邮件示例（）

```
$header = "From: Backapp.ru <noreply@backapp.ru>\r\nContent-type: text/html; charset=utf-8"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T05:52:11.620

`mail()`函数 with的基本用法`headers`是：

```
 <?php
    $to = "you@local.com";
    $subject = "My email test.";
    $message = "Hello";

    $headers = "From: myplace@local.com\r\n";
    $headers .= "Reply-To: myplace2@local.com\r\n";
    $headers .= "Return-Path: myplace@local.com\r\n";
    $headers .= "CC: sombodyelse@local.com\r\n";
    $headers .= "BCC: hidden@special.com\r\n";

    if ( mail($to,$subject,$message,$headers) ) {
       echo "The email has been sent!";
       } else {
       echo "The email has failed!";
       }
    ?> 
```

您没有将您的输出发送给我们，所以我们不知道问题出在哪里。

# iphone - 使用 NSMutableArray 进行地图标注

> ID：15128317
> 
> 赞同：3
> 
> 时间：2013-02-28T05:43:27.603
> 
> 标签：iphone, objective-c, sdk

我已经用我的 XML praser 中的对象填充了 NSMutablearray。我现在用它来填充我的地图注释。我有这个数组为我的表工作，它将对象带入单元格，但我想为我的地图使用相同的 NSMutablearray。

```
//currentBranch is filled with my Objects
Mapdets *currentBranch = [[xmlParser branch]];

[mapview setMapType:MKMapTypeStandard];
[mapview setZoomEnabled:YES];
[mapview setScrollEnabled:YES];

MKCoordinateRegion region = {{0.0, 0.0}, {0.0,0.0 }};
region.center.latitude = -33.86434888;
region.center.longitude = 151.2090236;
region.span.longitudeDelta = 0.10f;
region.span.latitudeDelta = 0.10f;
[mapview setRegion:region animated:YES];

 //Annotation code will go here. Need help with that. 
```

好的，这就是我所在的位置。我有一个填充了标题、子图块、纬度、经度的对象的数组，我想基本上 xpolde 那个数组并使用这些元素。

谢谢您的帮助。

如果我运行 NSLog(@"%@", currentBranch);

```
2013-02-28 07:53:53.537 SAMPLE[13642:207] (
    "<Mapdets: 0x754d3b0>",
    "<Mapdets: 0x754d5c0>",
    "<Mapdets: 0x754d710>"
) 
```

在我的 XMLpraser 文件中，我像这样填充它。

```
- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
{
    if (isStatues) 
    {
        if ([elementname isEqualToString:@"title"]) 
        {
            currentBranch.title = currentNodeContent;

        }
        if ([elementname isEqualToString:@"street_address"]) 
        {
            currentBranch.subtitle = currentNodeContent;
        }
        if ([elementname isEqualToString:@"lng"]) 
        {
            currentBranch.lng = currentNodeContent;
        }
        if ([elementname isEqualToString:@"lat"]) 
        {
            currentBranch.lat = currentNodeContent;
        }
    }
    if ([elementname isEqualToString:@"branch"]) 
    {
        [self.branch addObject:currentBranch];
        currentBranch = nil;
        currentNodeContent = nil; 
```

这一切正常，我现在只想在另一个类中为我的地图使用这个 NSMutablearray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:18:35.023

`NSMutableArray`在 Appdelegate 中获取 Branch( ) 和

在你的 .h 文件中获取 AppDelegate 参考

```
AppDelegate *appDelegate; 
```

并在 .m 文件中的 ViewDidLoad 方法中写下这一行

```
appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

并添加这一行`[appdelegate.branch addObject:currentBranch]`；而不是 `[self.branch addObject:currentBranch]`;

...现在您可以在您的应用程序中的任何位置使用此 appdelegate.branch(Array)。

# javascript - 如何一起更改子菜单和子菜单边框的css

> ID：15128318
> 
> 赞同：2
> 
> 时间：2013-02-28T05:43:27.740
> 
> 标签：javascript, jquery, html, css

我的任务是创建一个水平菜单。每个菜单都有子菜单，这些子菜单有子子菜单。但是当我选择子菜单时，这些子菜单和子子菜单之间存在分离。我想在选择时清除孩子的右侧边框，并丢弃第一个子孩子的左边框。您可以在[http://jsfiddle.net/ucpcA/](http://jsfiddle.net/ucpcA/)上查看。我怎么解决这个问题？CSS页面是

```
 #wrapper {
     width:100%;
     height:500px;
 }
 h2 {
     color:#787878;
 }
 #menu, #menu ul {
     list-style: none;
     padding: 2px;
 }
 #nav{
     border-bottom: 1px solid #CCCCCC;
     border-spacing: 0;
     display: table;
     float: left;
     height: 25px;
     width: 100%;
 }
 #nav ul {
     margin: 0;
     padding: 0;
 }
 #nav > ul > li:hover {
     background: none repeat scroll 0 0 #FFFFFF;
     border-color: #ccc #ccc #FFFFFF;
     border-style: solid;
     border-width: 1px;
     padding-bottom: 0;
     border-radius:1px;
 }

 .menu-child {
     width:160px;
     display:block !important;

 }
 /*
 #menu ul li ul {
     border-radius:0px;
     border-color:#fff #ccc #ccc #ccc !important;
 }
 */
 #nav ul li ul li:hover {
     //border:0px;
     //border-color: #ccc #FFFFFF #FFFFFF #ccc;
 }
 #nav ul li ul :hover {
     //border:0px;
     //border-color: #FFFFFF #ccc #ccc;

 }
 #menu {
     float: left;
     height: 25px;
 }
 #menu> li {
     float: left;
 }
 #menu li a {
     display: block;
     height: 2em;
     line-height: 2em;
     padding: 0 1.5em;
     text-decoration: none;
 }
 #menu ul {
     position: absolute;
     display: none;
     z-index: 999;
 }
 #menu ul li a {
     /*width: 80px;*/
 }
 #menu li:hover ul {
     display: block;
 }
 #menu {
     font-family: Arial;
     font-size: 12px;
     //background: #F8F8F8;
 }
 #menu > li > a {
     font-family: Verdana, Arial, sans-serif;
     font-style: normal;
     color:#787878;
     font-weight: bold;
 }
 #menu > li > a:hover {
     /*color: #000;*/
 }
 #menu ul {
     background: none repeat scroll 0 0 #FFFFFF;
    border-radius: 0 0 5px 5px;
    margin-top: 1px;
 }
 #menu ul li a {
     color: #000;
 }
 #menu ul li a:hover {
     background: #E0E0E0;
 }
 .logout {
     float:right;
     width:300px;
 }
 .title {
     float:left;
     width:300px;
 }
 #footer {
     width:100%;
     height:100px;
     float:left;
 }
 .subchild-list {
     margin:0;

     position: absolute !important;
     top:0;
     right:-89px;
     //border-color: #ccc #FFFFFF #ccc #FFFFFF;
 }
 .child-list ul {
     display: none !important;
     position: absolute !important;
     z-index: 999 !important;
 }
 .child-list li {
     position:relative !important;

 }
 .child-list li:hover ul {
     display: block !important;
 }

.child-list li{

    border-left:1px solid #C0C0C0; 
    border-right:1px solid #C0C0C0;
}

.child-list ul{
    border-top:1px solid #C0C0C0; 
    border-bottom:5px solid #C0C0C0; 
}

.child-list{
    border-bottom:5px solid #C0C0C0; 
}
.nav-subchild
{
border-color: #ccc #FFFFFF #ccc #FFFFFF;
} 
```

![在此处输入图像描述](../Images/c35957b9884a048af85d4402c06c9db8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:59:17.920

以下 2 个 css 属性可以满足需要。

```
ul#menu li ul.child-list li.menu-child:hover { border-right:0 !important; }

li.menu-child ul li:first-child { border-left:0 !important; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:18:16.370

你为什么要重新发明轮子？您可以使用 jquery [menu](http://jqueryui.com/menu/)，如果您希望它是水平的，那么也有[行之有效](http://www.sophrosynelife.com/2012/11/make-jquery-menu-widget-horizontal/)的方法。每当我想解决一个非常古老和经典的问题时，我都会这样做。

赢得一场战斗的最好方法是不必打一场。

# linux - 在哪里将 samtools 二进制文件复制到某些目录

> ID：15128323
> 
> 赞同：0
> 
> 时间：2013-02-28T05:44:21.893
> 
> 标签：linux, bioinformatics, samtools

我在我的 Mac OS X 上安装袖扣，下面是说明：

[http://cufflinks.cbcb.umd.edu/tutorial.html](http://cufflinks.cbcb.umd.edu/tutorial.html)

在**安装 SAM 工具**下，我按照以下说明进行操作

1.  下载 SAM 工具
2.  将 SAM 工具 tarball 和 cd 解压到 SAM 工具源目录。
3.  通过在命令行键入 make 来构建 SAM 工具。
4.  选择您希望将 SAM 工具二进制文件、包含的库 libbam.a 和库头文件复制到其中的目录。一个常见的选择是 /usr/local/。
5.  将 libbam.a 复制到您在上面选择的文件夹中的 lib/ 目录（例如 /usr/local/lib/）
6.  在 include/ 目录中创建一个名为“bam”的目录（例如 /usr/local/include/bam）
7.  将标头（以 .h 结尾的文件）复制到您在上面创建的 include/bam 目录（例如 /usr/local/include/bam）
8.  将 samtools 二进制文件复制到 PATH 中的某个目录。

我已经完成了前 7 个步骤，但我不确定如何继续最后一步（#8）：我应该使用命令：

```
sudo cp -a samtools-0.1.18 /usr/local/ 
```

或进入其他目录？步骤 8中的**PATH表示什么？**谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:48:09.813

为了回答您的问题，我将介绍一些有助于我理解二进制文件及其位置的基本 linux 知识。

在 linux 中，您可以通过输入二进制文件的完整路径来运行二进制文件，然后二进制文件就会运行。例如，如果我有一个名为`foo`in的二进制文件`/usr/local/bin`，我将运行该命令`/usr/local/bin/foo`并运行该`foo`二进制文件。

PATH 的目的是一种快捷方式，因此您无需输入二进制文件的完整路径，只需输入二进制文件的名称即可。PATH 是一个变量，其中包含您希望应用快捷方式的二进制文件的所有目录。因此，参考前面的示例，如果`/usr/local/bin`在我的 PATH 变量中，那么我可以运行`foo`.

因此，要回答您的问题，您可以通过运行命令来判断 PATH 中的哪些目录，`echo $PATH`以及如果其中一个目录是您的 samtools 二进制文件所在的位置，那您很好！如果没有，您可以将您的 samtools 二进制文件移动到这些目录之一，这样您就不必在每次运行二进制文件时都输入完整路径。

# arrays - 空格分隔符数组 Shell 脚本

> ID：15128325
> 
> 赞同：0
> 
> 时间：2013-02-28T05:44:30.957
> 
> 标签：arrays, shell, delimiter

数组将“空格”作为默认分隔符：

```
str="HI I GOT;IT"

arr2=$(echo $str | tr ";" " ")
for x in $arr2
do
echo " $x"
done 
```

输出：

你好

一世

拿到

它

我希望输出为：

嗨，我知道了

它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:50:15.457

你还没有说这是哪个外壳，但它看起来像`bash`，所以我会去那个。这是 的工作`IFS`，它决定了如何`bash`拆分单词。在这里，我们将其设置`;`为单个命令，以拆分您的字符串。

您还需要正确地遍历数组（使用引号和`[@]`），以便此时不会再次被 bash 拆分。

```
str="HI I GOT;IT"
IFS=\; arr=($str)
for x in "${arr[@]}"
do
    echo "$x"
done 
```

# ruby-on-rails - postgres.app，为什么我必须让它运行？

> ID：15128326
> 
> 赞同：-1
> 
> 时间：2013-02-28T05:44:34.093
> 
> 标签：ruby-on-rails, database, sqlite, postgresql, postgres.app

我使用 heroku 的 postgres.app 安装了 postgres，在我的应用程序上工作时我需要不断地打开它。我相信在我使用自制软件之前没有任何东西在运行，而且我知道 sqlite 不需要在后台运行任何东西。为什么应用程序必须始终打开才能正常工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:59:13.797

这正是 Postgres.app 设计的工作方式；这是一种较新的方法，旨在比跟踪启动守护进程更快、更容易。（有点像 Heroku 是如何通过单击使大量插件工作的，而不是大量的命令行配置——它在 90% 的情况下使事情变得更简单，而牺牲了另外 10% 的成本。）

Postgres 本质上是一个客户端-服务器结构，因此使用 Postgres 数据库总是需要有效地连接到服务器——即使该服务器是 localhost。对于 Postgres.app，该服务器仅在应用程序运行时运行。在您之前的 homebrew 安装中，它应该是一个后台进程；即使您看不到它正在运行，它也在那里。

SQLite 是另一种野兽；它使用本地文件支持的存储，而不是连接到服务器，所以你是对的，在这种情况下没有后台进程可以连接。

您仍然可以使用 MacPorts（详见[此处](http://www.postgresql.org/download/macosx/)）或从源代码编译来获得传统的 Postgres 安装。显然它也包含在[OS X Server](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CEEQFjAA&url=https%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fos-x-server%2Fid537441259%3Fmt%3D12&ei=b_AuUaWdFYTziQLBhIH4BQ&usg=AFQjCNGVKAThwIbE8qLcgcP6nn_y1a0TuQ&bvm=bv.43148975,d.cGE)中。其中任何一个都是后台进程，而不是依赖于正在运行的应用程序。

# ruby-on-rails - Heroku 上的 Bootstrap::FrameworkNotFound？

> ID：15128327
> 
> 赞同：1
> 
> 时间：2013-02-28T05:44:34.557
> 
> 标签：ruby-on-rails, heroku, twitter-bootstrap, bootstrap-sass

我正在使用 rails 3.2 并在我的开发服务器上构建了一个应用程序，它工作正常。但是当我将相同的应用程序部署到我的 heroku 帐户时，我收到了这个错误：

```
/app/vendor/bundle/ruby/1.9.1/gems/bootstrap-sass-2.3.0.1/lib/bootstrap-sass.rb:18:in `load!': bootstrap-sass requires either Rails > 3.1 or Compass, neither of which are loaded (Bootstrap::FrameworkNotFound) 
```

有谁知道如何修理它。bootstrap-sass gem 是 rails_admin gem 的依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:14:12.290

将此添加到您的 gemfile

```
 gem 'less-rails' 
```

试试这个，它可能对你有用。我遇到了一些类似的错误，我用这个解决了。

# iphone - ios自定义标签不支持字体系列只支持Lucida Grande？

> ID：15128340
> 
> 赞同：0
> 
> 时间：2013-02-28T05:45:57.340
> 
> 标签：iphone, ios, objective-c, uilabel, xcode4.5

我正在使用 Lucida Grande 字体系列，它工作正常。

```
FontLabel *label4 = [[FontLabel alloc] initWithFrame:CGRectMake(10, 6, 250, 50)];
        ZMutableAttributedString *str = [[ZMutableAttributedString alloc] initWithString:cmd_string
                                                                              attributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                                                          [[FontManager sharedManager] zFontWithName:@"Lucida Grande" pointSize:12],
                                                                                          ZFontAttributeName,
                                                                                          nil]];
        label4.backgroundColor=[UIColor clearColor];
        [str addAttribute:ZFontAttributeName value:[[FontManager sharedManager] zFontWithName:@"Lucida Grande" pointSize:12] range:NSMakeRange(0, name_length)];
        [str addAttribute:ZForegroundColorAttributeName value:[UIColor colorWithRed:241/255.0f green:73.0/255.0f blue:2.0/255.0f alpha:1.0]range:NSMakeRange(0, name_length)];
        [str addAttribute:ZForegroundColorAttributeName value:[UIColor colorWithRed:128.0/255.0f green:121.0/255.0f blue:98.0/255.0f alpha:1.0]range:NSMakeRange(name_length, cmd_str_len-name_length)];
        label4.zAttributedText = str;
        label4.numberOfLines=0;
        [label4 sizeToFit]; 
```

我正在使用 Helvetica-Bold 字体系列它无法正常工作应用程序崩溃，请帮助我。

```
FontLabel *label4 = [[FontLabel alloc] initWithFrame:CGRectMake(10, 6, 250, 50)];
        ZMutableAttributedString *str = [[ZMutableAttributedString alloc] initWithString:cmd_string
                                                                              attributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                                                          [[FontManager sharedManager] zFontWithName:@"Helvetica-Bold" pointSize:12],
                                                                                          ZFontAttributeName,
                                                                                          nil]];
        label4.backgroundColor=[UIColor clearColor];
        [str addAttribute:ZFontAttributeName value:[[FontManager sharedManager] zFontWithName:@"Helvetica-Bold" pointSize:12] range:NSMakeRange(0, name_length)];
        [str addAttribute:ZForegroundColorAttributeName value:[UIColor colorWithRed:241/255.0f green:73.0/255.0f blue:2.0/255.0f alpha:1.0]range:NSMakeRange(0, name_length)];
        [str addAttribute:ZForegroundColorAttributeName value:[UIColor colorWithRed:128.0/255.0f green:121.0/255.0f blue:98.0/255.0f alpha:1.0]range:NSMakeRange(name_length, cmd_str_len-name_length)];
        label4.zAttributedText = str;
        label4.numberOfLines=0;
        [label4 sizeToFit]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:20:48.753

Lucinda Grande 在 iOS 中不可用，仅在 Mac OS X 上可用。

# php - 带有超薄框架的错误 404

> ID：15128346
> 
> 赞同：1
> 
> 时间：2013-02-28T05:46:22.830
> 
> 标签：php, api, wamp, slim

我正在学习用 PHP 和 mysql 编写代码，并且需要能够使用 wampserver 运行 PHP 文件。我已经正确安装了 wamp 并通过 Windows 8 将其联机，但是当我运行我的 PHP 文件时，我总是收到错误 404。我确保我的 Slim 文件和 .php 文件位于正确的目录中，并且我也进行了修改.htaccess 以便在找不到 URL 时重新路由到正确的文件，因为我正在本地机器上测试它。这是我的一些示例代码：

```
require 'C:\wamp\www\easysites\codeguy-Slim-b8181de\Slim\Slim.php';
        \Slim\Slim::registerAutoloader();

        $api = new \Slim\Slim();

        $api->run(); 
```

我已经将错误追踪到 $api->run() 并且有一次从调用堆栈中得到一个错误，表明 Slim 的 environment.php 在第 123 行第一次处理 URL 时发生了错误。如果我运行 Netbeans 生成的基本 index.php 文件，我会得到提醒我它正在工作的常用文本，但是尝试使用 Slim 运行 php 文件，它会出错，它位于根目录下的同一子目录中。Slim 由 php 文件正确加载，但不允许我运行任何其他内容，从而阻止我查看已导入的数据库。

有谁知道可能出了什么问题？我有一位同事已成功运行该文件，但我们无法使用相同类型的更改使其在我的机器上运行。

.htaccess 文件如下：

```
RewriteEngine ON

RewriteRule ^API(.*)$ /API/api.php [QSA, L] 
```

我要运行的文件位于名为 API 的根目录中的文件夹中，而我要运行的文件是 api.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T22:24:05.577

当我完全按照安装 slim 的所有说明（在本地 Windows 机器上的 easyphp 上安装它）时，我收到错误 404。

我将 .htaccess 更改为以下内容，然后它工作正常：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ %{ENV:BASE}index.php [QSA,L] 
```

# ruby-on-rails - 轮胎 + 弹性搜索 - 强制导入

> ID：15128348
> 
> 赞同：4
> 
> 时间：2013-02-28T05:46:32.903
> 
> 标签：ruby-on-rails, indexing, elasticsearch, tire

在轮胎宝石的自述文件中，我看到他们提出了两种导入模型的方法：

```
rake environment tire:import CLASS='Article'
rake environment tire:import CLASS='Article' FORCE=true 
```

我可以理解 FORCE=true 会在重新索引之前删除索引，但是这样做有什么好处呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:53:15.800

从头开始删除和重新创建索引主要在您在开发期间更改模型映射时很有用。

# matlab - 将经过训练的神经网络的权重矩阵与测试向量相乘

> ID：15128353
> 
> 赞同：0
> 
> 时间：2013-02-28T05:47:20.313
> 
> 标签：matlab, neural-network, linear-algebra, matrix-multiplication

我训练了感知器神经网络并使用matlab获得了权重矩阵。

得到的权重矩阵的维度是<50x1 double>

现在，在提供测试输入时，我有一个 <1x1 double> 值，需要对其进行测试。

如果我将权重矩阵乘以该值，我得到 <50x1 double>。如何设置 <50x1 double> 值的阈值。

有没有办法解决这个问题？

这是代码

```
tic
clc; clear all; close all; 
%function [ w1, bias ] = percep1( x )

zzz = xlsread('D:\matlab\NN_FILES\train_mean.xlsx')
s = zzz;
learning_rate = 0.1; % go with the loop mohan
theta = 10000;
w1=0; 
for j = 1:50
    x=s(:,j);t=1; bias=0; stopp=1; count=0;
while stopp
    yin = bias + (w1*x);
    % activation function
    if yin > theta
         y = 1;
    elseif yin < -theta
        y = -1;
    else
        y = 0;
    end

    if (t ~= y)
    %     for i = 1 : 7
            %if ( x(i) ~= 0 )
                w1 = w1 + ( learning_rate * t * x);
            %end
    %    end
        bias = bias + ( learning_rate * t);
    end

    count = count + 1;

    if t==y
       stopp = 0;
       count;
    end
 end

 w(j,:) = w1;
 b1(j) = bias;
 e1(j) = count;
 end
 new_weights_2 = w(50,:)
 yyy= xlsread('D:\matlab\NN_FILES\test_mean.xlsx');
 st=yyy;
 theta2 = 1.0e+04 * 1.2 ;
 for j=1:20
     x=st(:,j);
     yin=(new_weights_2(1))*(x)
     output(j) = yin;     
     if yin > theta2
         y = 1;
     elseif yin < -theta2
         y = -1;
     else y = 0;
 end
 y1(j)=y;

end
toc 
```

现在我只使用了权重矩阵的第一个值以满足乘法规则。有没有办法将权重矩阵与测试输入相乘？

# java - 如何在 android 中使用 Timidity++？

> ID：15128354
> 
> 赞同：0
> 
> 时间：2013-02-28T05:47:29.613
> 
> 标签：java, android, audio, android-ndk, midi

我有一个场景，我需要在我的 android 应用程序中将 .midi 文件转换为 .wav 文件格式，我用谷歌搜索了很多，发现 Timidity++ 是将 .midi 转换为 wav 等的开源软件（但源代码在C）

所以首先我可以用它来完成我的任务，如果是，请建议我如何在 android 中做到这一点..比如如何将软件包含到我的 android 项目中。

提前致谢

# java - swing下载在windows xp中不起作用

> ID：15128360
> 
> 赞同：0
> 
> 时间：2013-02-28T05:47:52.457
> 
> 标签：java, swing

我有一个示例代码可以从 Web 及其 Swing 应用程序下载一些数据（pdf、gif 和 mp3）。它在 Windows 7 中完美运行，但在 Windows xp 中无法运行。

我的代码是

```
 public static Float downloadFile(String targetUrl,File filePath)
        {
            try
            {

                Integer count=0;
                URL url = new URL(targetUrl);
                HttpURLConnection connection=(HttpURLConnection) url.openConnection();
                connection.setRequestMethod("GET");
                connection.setDoOutput(true);
                connection.setConnectTimeout(10000);
                connection.connect();

                int lenghtOfFile = connection.getContentLength();
                Thread.sleep(100);
                InputStream input = new BufferedInputStream(url.openStream());
                Thread.sleep(100);
                OutputStream output = new FileOutputStream(filePath);
                byte data[] = new byte[input.available()];
                long total = 0;
                while ((count = input.read(data)) != -1)
                {
                    total += count;
                    output.write(data, 0, count);
                }
                output.flush();
                output.close();
                input.close();
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
            return 2.5f;
            }  
    } 
```

它通过将代码设置为0进入无限while循环

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:57:08.557

问：初始化缓冲区时，什么是“input.available()”？如果那一刻恰好是“0”，你会很难过。

一种解决方案是使用固定长度的缓冲区（例如 8192）。

# c# - 从 MS Access 数据库中获取数据并将其显示在列表框中

> ID：15128361
> 
> 赞同：5
> 
> 时间：2013-02-28T05:47:52.667
> 
> 标签：c#, ms-access, listbox

如何读取 ms access 数据库中的数据并将其显示在列表框中。我有代码在这里，但我得到了错误。

```
 private void button3_Click(object sender, EventArgs e)
    {
        using (OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=\\Sisc-stronghold\mis!\wilbert.beltran\DataBase\DataStructure.accdb"))
        using(OleDbCommand cmd = new OleDbCommand(" SELECT * from TableAcct", conn))
        {
            conn.Open();
            OleDbDataReader Reader = cmd.ExecuteReader();
            //if (Reader.HasRows)
            if (Reader.HasRows)
            {
                Reader.Read();
                listBox1.Text = Reader.GetString("FirstName");
            }
        } 
```

错误在这里： 1\. 错误 1 ​​匹配'System.Data.Common.DbDataReader.GetString(int)' 的最佳重载方法有一些无效参数。2\. 错误 2 参数 '1'：无法从 'string' 转换为 'int'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T06:39:19.413

试试这个，

```
 List<String> firstName = new List<String>();
       List<String> lastName = new List<String>();

       private void loadButton_Click(object sender, EventArgs e)
       {
                cn.Open();
                OleDbDataReader reader = null;
                cmd = new OleDbCommand("select* from Records", cn);
                reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    firstName.Add(reader["FirstName"].ToString());
                    lastName.Add(reader["LastName"].ToString());
                }
                cn.Close();
       } 
```

然后在你的搜索按钮中，插入这个，

```
private void searchButton_Click(object sender, EventArgs e)
        {
            clearSearchResult();
            try
            {
                int totalItems = FirstName.Count;
                int count = 0;
                while (count < totalItems)
                {
                    if (textBox6.Text == FirstName[count].ToString())
                    {
                        listBox1.Items.Add(FirstName[count].ToString());
                        count = 100;
                    }
                    else
                    {
                        count++;
                    } 
```

`"FirstName"`当你想在如果你想显示的信息时使用它是很好的`listBox1_SelectedIndexChanged`。这是一个例子，

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
                int totalItems = lastName.Count;
                int count = 0;
                while (count < totalItems)
                {
                    if ((listBox1.SelectedItem.ToString()) == firstName[count].ToString()))
                    {
                        textBox1.Text = firstName[count].ToString();
                        textBox2.Text = lastName[count].ToString();
                        count = 100;
                    }
                    else
                    {
                        count++;
                    }
               } 
```

希望这可以帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:51:39.627

`GetString()`将 int 作为参数而不是字符串。这意味着您必须使用列的索引。

在您的特定情况下，“FirstName”是索引为 1 的第二列：

```
listBox1.Text = Reader.GetString(1); 
```

[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader.getstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader.getstring.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T05:54:25.507

改变

```
listBox1.Text = Reader.GetString("FirstName"); 
```

到

```
listBox1.Text = Reader.GetString(0); // zero base ordinal of column 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T06:03:09.253

你使用 While 循环

```
while(reader.Read())
{
   listbox1.Items.Add(reader["FirstName"]);
} 
```

这将遍历您选择的所有行。如果没有更多行则`reader.Read()`返回。`false`

另外：如果您想从列中检索 valmue，我建议您使用`reader`实例上的索引来完成。就像我的例子。

```
var value = reader["ColumnName"]; 
```

与

```
var value = reader.GetString(0); 
```

**更新**

如果您只想显示第一个值 - 我建议您使用`cmd.ExecuteScalar()`并调整您的 sql 以仅返回您需要的值：

```
using(OleDbCommand cmd = new OleDbCommand("SELECT firstname from TableAcct", conn))
{
   conn.Open();
   var firstName = cmd.ExecuteScalar();
} 
```

请注意，这将为您提供表中的*第一个*“名字”。而且由于没有`"order by firstname"`或`"where someKey = 1"`- 这可能不会像您预期的那样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-02T13:28:17.943

如果您想创建 MS Access 数据库并访问它，并在某些组件中显示数据，像这里我将向您展示。如何连接 MS Access 数据库并在标签中显示数据库中的数据。 ***首先创建任何 Access 数据库，例如此处的“PirFahimDataBase”。现在在您的 Visual Studio 中，转到菜单并执行此操作***

1.  点击数据
2.  添加新数据库
3.  点击下一步
4.  单击新建连接
5.  现在通过单击更改更改数据源并选择 Microsoft Access 数据库文件
6.  单击浏览以选择您创建的数据库

现在在 Button ClickEvent 中粘贴这些代码，这些代码将从数据库中获取数据并将其显示在标签中

```
using System.Windows.Forms; //these two lines should be written before namespace at top of the program
using System.Data.OleDb;

private void button1_Click(object sender, EventArgs e)
    {        
      System.Data.OleDb.OleDbConnection conn = new System.Data.OleDb.OleDbConnection();
     conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;" +
    @"Data source= C:\Users\pir fahim shah\Documents\PirFahimDataBase.accdb";

    try
     {
     conn.Open();
     MessageBox.Show("connected successfuly");
     OleDbDataReader reader  = null;  // This is OleDb Reader
   OleDbCommand cmd = new OleDbCommand("select TicketNo from Table1 where Sellprice='6000' ", conn);
    reader = cmd.ExecuteReader();
    while (reader.Read())
    {
     label1.Text= reader["TicketNo"].ToString();           

    }

}
    catch (Exception ex)
{
    MessageBox.Show("Failed to connect to data source");
}
finally
{
    conn.Close();
}    
 }//end of button click event 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T05:52:26.937

您的错误在这一行：

```
listBox1.Text = Reader.GetString("FirstName"); 
```

`GetString()`您必须在函数中传递一个数字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-07T04:48:49.077

```
DataColumn[] PrimaryKeyColumn = new DataColumn[1]; //Define Primary coloumn
DataSet dataSet = new DataSet();
DataTable dataTable = new DataTable();
ReadAndUpdateExcel.ReadExcel(strPath, sheetName, out dataSet);
dataSet.Tables.Add(dataTable);
PrimaryKeyColumn[0] = dataSet.Tables[0].Columns[0];
dataSet.Tables[0].PrimaryKey = PrimaryKeyColumn;
string num = dataSet.Tables[0].Rows[dataSet.Tables[0].Rows.IndexOf(dataSet.Tables[0].Rows.Find(strTCName))]["ACNO"].ToString();
//string country 
```

# javascript - 根据输入值向div添加内容

> ID：15128362
> 
> 赞同：2
> 
> 时间：2013-02-28T05:48:04.330
> 
> 标签：javascript, html, input

我知道这是一个非常简单的问题，但是当用户在输入字段中输入内容并按 Enter 键时，如何将内容添加到 div 中？

我试过了：

```
document.addEventListener('keydown', function(e){
    if(e.keyCode === 13) {
        function bleh() {
            var from = document.getElementById('setter').value;
            x = document.getElementById("mything");
            x.innerHTML = from;
        }
    }
}) 
```

我的 HTML 是：

```
 <input type="text" autofocus="autofocus" id="setter" 

   onkeydown="writeit(this, event);moveIt(this.value.length, event)"  

    onkeyup="writeit(this, event)" onkeypress="writeit(this, event);"></input> 
```

如果您想查看它的实际效果，请访问 thomaswd.com/cmd。开始输入并按回车键。

再一次，这听起来像一个非常简单的问题，但我无法让它发挥作用。谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T05:58:55.390

你真的很亲密：

```
document.getElementById("setter").addEventListener('keydown', function(e){
    if(e.keyCode === 13) {
    var from = this.value;
    x = document.getElementById("mything");
    x.innerHTML = from;
    }
}) 
```

JSFiddle：http: [//jsfiddle.net/9bbR2/](http://jsfiddle.net/9bbR2/)

虽然我建议使用 jQuery，但它更简单。

```
$(function() {
  $("#setter").keydown(function(e) {
    if(e.keyCode === 13) {
        $("#mything").text($(this).val());
    }
  });
}); 
```

# php - 教义 2 的问题

> ID：15128364
> 
> 赞同：0
> 
> 时间：2013-02-28T05:48:08.083
> 
> 标签：php, doctrine-orm

我的代码：

**引导程序.php**

```
use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;
use Doctrine\ORM\Mapping\Driver\AnnotationDriver;
use Doctrine\Common\Annotations\AnnotationReader;
use Doctrine\Common\Annotations\AnnotationRegistry;

$paths = array(dirname(__FILE__)."/entities");
require_once __DIR__ . '/entities/Users.php';

$isDevMode = false;
// the connection configuration
$dbParams = array(
    'driver'   => 'pdo_mysql',
    'user'     => 'root',
    'password' => 'pass',
    'dbname'   => 'p1db',
);

$config = Setup::createConfiguration($isDevMode);
$driver = new AnnotationDriver(new AnnotationReader(), $paths);

// registering noop annotation autoloader - allow all annotations by default
AnnotationRegistry::registerLoader('class_exists');
$config->setMetadataDriverImpl($driver);
$config->setSQLLogger(new \Doctrine\DBAL\Logging\EchoSQLLogger());

$em = EntityManager::create($dbParams, $config); 
```

**测试.php**

```
<?php 
include 'bootstrap.php';
....
 try {
     $user = new Users();
     $user->setName($_POST['name']);
     $user->setEmail($_POST['email']);
     $user->setPassword(sha1($_POST['password'] . $_SALT_));
     $user->setPhone($_POST['phone']);
     $em->persist($user);
     $em->flush();
 } catch (Exception $e) {
     $em->getConnection()->rollback();
     $em->close();
     throw $e;
 } 
```

我不明白为什么它不起作用。当它运行时，`$em->flush()`我的页面冻结了 3-4 秒，然后`Error 103 (net::ERR_CONNECTION_ABORTED): Unknown error` 我在这里做了一些调试。我设置了 mysql 日志记录，这是执行上述代码后 MySQL 日志中的内容：

```
 13 Query START TRANSACTION
   13 Query INSERT INTO users (email, password, name, added_date, phone) VALUES ('foo@example.com', 'ec4cea0c00610c486f52e62e2850fa7e8b95fb04', 'test name', NULL, '5555555') 
```

如果我在 MySQL shell 中执行此查询 - 它们工作正常。我发现问题出在`\Doctrine\ORM\UnitOfWork->commit()`，就行了`$conn->beginTransaction();`。`beginTransaction()`在这里定义`\Doctrine\DBAL\Driver\Connection->beginTransaction()` 但这只是一个接口......我不知道这里发生了什么。

MySQL v 5.1.48，pdo_mysql

```
PDO Driver for MySQL    enabled
Client API version  mysqlnd 5.0.8-dev - 20102224 - $Revision: 308673 $ 
```

# iphone - 在父 ViewController 中获取当前 ViewController 名称

> ID：15128365
> 
> 赞同：1
> 
> 时间：2013-02-28T05:48:13.933
> 
> 标签：iphone, ios, uiviewcontroller, viewcontroller

我有如下视图控制器

父视图控制器

```
@interface Parent : UIViewController
{
} 
```

子视图控制器

```
@interface Child : Parent
{
} 
```

现在我想要父视图控制器中的当前视图控制器名称，我已经搜索但得到了简单的线索。

如果它是基于导航的应用程序，您可以通过以下方式获取当前视图控制器，

```
UIViewController *currentVC = self.navigationController.visibleViewController; 
```

但是在父视图控制器中访问当前视图控制器名称的正确过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:27:24.530

我已经建立了答案，

在父视图控制器中：

```
- (void)viewDidLoad
{
    UIViewController *currentVC = self.navigationController.visibleViewController;
    NSLog(@"The Current Class : %@", [self getClassName:currentVC]);
}

- (NSString*) getClassName:(id) obj
{   
    const char* className = class_getName([obj class]);
    NSString *clsName = [@"" stringByAppendingFormat:@"%s",className];

    return clsName;
} 
```

当我们从 Child ViewController 调用 [super viewDidLoad] 时，Parent ViewController 被初始化，这里我取当前视图控制器的类名。所以在我的应用程序中，我不想在每个视图控制器中编写这行代码，而是在父视图控制器中编写。

注意：这仅适用于基于导航的应用程序，因为我们从 navigationController 获取当前 visibleViewController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:06:57.770

尝试这个

```
 for(UIViewController * view in self.navigationController.viewControllers)
    {
        if([view isKindOfClass:[Child class]])
        {
           //child VC is displayed on screen
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:20:22.877

下面的代码可以提供帮助。我没有尝试过，但让我知道它是否有效

在Parent类中编写如下方法

```
 -(void)getClassName:(NSString*)className{
   NSLog(className);
   //Your code here
 } 
```

以下行您需要访问当前视图控制器名称

```
 [self getClassName:NSStringFromClass([self class])]; 
```

希望这篇文章有帮助

# seo - Emberjs 显示实际路由 href="" 以增加站点可浏览性

> ID：15128366
> 
> 赞同：1
> 
> 时间：2013-02-28T05:48:17.113
> 
> 标签：seo, ember.js, browsable

我使用 100% Ember 使用 pushState 重新设计和部署了我们的商业网站，以增加搜索引擎浏览网站内容的能力。

但是，我有一个问题，我不知道如何解决。我正在使用“操作”重定向到 Ember App 路由。

例如，这里有一个“a”标签：

```
<a {{action "doSales"}} title="Sales and after sales services">Sales and after sales services</a> 
```

相关动作：

```
doSales: function(router, event) {
    router.transitionTo('sales');
}, 
```

和路线：

```
sales: Ember.Route.extend({
    route: '/:locale/sales', 
```

**但是**，在 DOM 中，最终的 a 标签将如下所示：

```
<a data-ember-action="9" title="Sales and after sales services">Sales and after sales services</a> 
```

如您所见，没有**href="/en/sales"**

这意味着如果我让浏览器浏览我的网站，它将无法挖掘网站结构。

有谁知道

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:12:25.473

新路由器删除了 Action href 支持。如果你想在你的锚标签上添加href，你要么需要使用`{{#linkTo}}`帮助器（它会自动生成它们），要么手动添加href值。

# filesystems - micrium 文件系统获取剩余空间量

> ID：15128367
> 
> 赞同：2
> 
> 时间：2013-02-28T05:48:18.130
> 
> 标签：filesystems, micrium

我想知道 uC/FS 是否有任何内置函数来获取 FAT32 格式的 SD 卡上剩余的内存量。

非常感谢。

PS。我环顾四周，但似乎无法在手册上找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:20:23.497

为了检索 µC/FS 卷上的可用空间量，您使用 FSVol_Query() 函数并使用 FS_VOL_INFO 结构中返回的数据计算可用空间量。

```
FS_VOL_INFO  vol_info;
CPU_INT64U   size_rem;
FS_ERR       err;

FSVol_Query("sdcard:0:", &vol_info, err);
if (err != FS_ERR_NONE) {
    /* oops, something went wrong, handle error */
}

size_rem = vol_info.VolFreeSecCnt * vol_info.DevSecSize; 
```

其中“sdcard:0:”应替换为您要检索可用空间量的卷名。该功能记录在用户手册的 A-7-12 节中。

如果使用以前的 (V3.X) 版本，请检查 FS_GetVolumeInfo() 函数。

# jquery - 一个 html 页面中有两个不同的 jQuery

> ID：15128368
> 
> 赞同：-8
> 
> 时间：2013-02-28T05:48:35.950
> 
> 标签：jquery, html

同一页面上有两个不同的 jQuery，并且要包含的页面具有最新的 jQuery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T05:50:30.860

通过阅读您提供的内容，

您可以通过在无冲突模式下运行您的 jQuery 版本来实现这一点。“无冲突”模式是让 jQuery 在具有其他框架（如原型）的页面上工作的典型解决方案，也可以在这里使用，因为它本质上为您加载的每个版本的 jQuery 命名空间。

```
<!-- load jQuery 1.8 -->
<script type="text/javascript" src="http://example.com/jquery-1.8.js"></script>
<script type="text/javascript">
var jQuery_1_8 = $.noConflict(true);
</script>

<!-- load jQuery 1.9 -->
<script type="text/javascript" src="http://example.com/jquery-1.9.js"></script>
<script type="text/javascript">
var jQuery_1_9 = $.noConflict(true);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:55:22.347

假设您的问题是：“**如何在一页上使用两个版本的 jQuery？** ”

答案是：您可以使用**[jQuery.noConflict(true)](http://api.jquery.com/jQuery.noConflict/)**。

# iphone - 延迟返回值而不是整个方法

> ID：15128372
> 
> 赞同：2
> 
> 时间：2013-02-28T05:49:02.400
> 
> 标签：iphone, objective-c, xcode, ipad

是否可以仅延迟返回值而不是整个方法，例如：

```
-(CGFloat)getValue
{
    // code implementation
    return floatvalue; // return float value with some delay.
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T06:02:04.940

使用块以延迟返回值回调；

```
- (void)ayncGetValue:(void(^)(id value))returnBlock {

  dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 10.f * NSEC_PER_SEC); // delay 10 seconds
  dispatch_after(popTime, dispatch_get_main_queue(), ^{
    returnBlock(@"hello block");
  });
}
// Usage
[obj ayncGetValue:^(id value) {
  // continue  
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:55:34.970

你能做的是。将此功能保持为正常功能：

```
-(void)getValue
{
       // code implementation
       [self performSelector:@selector(returnData) withObject:nil afterDelay:0.5];
} 
```

添加这个将返回数据的新函数：

```
-(CGFloat)returnData
{
       return floatvalue;
} 
```

这里唯一重要的是您必须将 floatvalue 变量声明为类杠杆而不是函数杠杆。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T05:57:22.737

```
-(void)getValue
{
// code implementation

  [self performSelector:@selector(getValue:) withObject:value afterDelay:2];
}

-(CGFloat)getValue:(CGFloat *)float1
{
  return float1;
} 
```

# objective-c - 如何自定义像'stringWithFormat'这样的方法？

> ID：15128373
> 
> 赞同：2
> 
> 时间：2013-02-28T05:49:22.947
> 
> 标签：objective-c, format, cstring, stringwithformat

我想自定义一个带有格式化字符串输入和（const char *）返回的方法，但问题如下所示......谁能告诉我如何解决它？谢谢。 ![我想自定义一个带有格式化字符串输入和（const char *）返回的方法，但问题如下所示......谁能告诉我如何解决它？ 谢谢。](../Images/6af7fe3afbe39a4cff234fae72e558c9.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T06:24:33.867

```
-(const char *)stringWithFormat:(NSString *)format, ...
{
    va_list args;
    va_start(args, format);
    NSString *lString = [[NSString alloc] initWithFormat:format arguments:args];
    [lString autorelease];
    va_end(args);
    return [lString cStringUsingEncoding:NSUTF8StringEncoding];

} 
```

# git - 无法与 Gitosis 一起正常工作

> ID：15128378
> 
> 赞同：1
> 
> 时间：2013-02-28T05:49:55.243
> 
> 标签：git, ssh-keys, gitosis

在我使用 Git 的过程中，我请求帮助解决一个奇怪的错误。

我已经安装了 Gitosis。这是我的配置：

```
cat /root/gitosis-admin/gitosis.conf 
[gitosis]
loglevel = DEBUG

[group gitosis-admin]
writable = gitosis-admin
members = admin

[group sugar-dev]
writable = sugar-dev
members = eyablokov 
```

所以我将一个 SSH 密钥“admin”指向管理 Gitosis。我还创建了“sugar-dev”回购并将另一个密钥指定为成员。“admin”键在一台机器上，没关系。其次，“eyablokov”密钥是我另一台机器上的常用成员密钥。我计划仅将此密钥用作开发人员。

我已经通过正常方式配置并将更改推送到 gitosis-admin repo 中。两个键都在 keydir/ 目录中，并且也被远程推送。

之后，在另一台存储“eyablokov”密钥的机器上，我创建了一个本地目录：`mkdir ~/Projects/sugar-dev`. 输入：`cd ~/Projects/sugar-dev`。下一个：`git init`和之后：`git remote add origin git@SERVER:sugar-dev.git`。没关系。

例如，在我尝试之后，添加一些东西并提交并推送并遇到问题：

```
echo 'Please, describe the project.' > DESCRIPTION
git add DESCRIPTION 
git commit -am "Added description file" 
```

并向我`git push origin master`展示

```
Pushing to git@SERVER:sugar-dev.git
fatal: cannot exec '/Users/gular/.ssh/eyablokov_dsa': Permission denied
fatal: unable to fork
```

我不知道该怎么办。git 必须看到我的 eyablokov，而不是 eyablokov_dsa，密钥。dsa 是我的另一个关键。我尝试过 chmod，尝试移动 .ssh/config 文件，其中 IdentityFile 指向 dsa 键。没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:14:34.053

当您使用基于 ssh 的 git 服务器时（例如 gitosis，或者更好的是[gitolite](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358) ，因为 gitosis 已过时且不再维护），您需要一个`~/.ssh/config`文件来指定您想要使用的确切 ssh 密钥文件名。
（在“[用户在使用 gitolite 时被要求输入密码](https://stackoverflow.com/a/10909791/6309)”中也有说明）

在你的情况下：

```
Host eyablokov
    HostName SERVER 
    User git
    IdentityFile /Users/gular/.ssh/eyablokov 
```

这允许您使用这种 url：

```
git clone eyablokov:sugar-dev.git 
```

在 Windows 上，确保您使用的是[git-cmd.bat](https://github.com/msysgit/msysgit/blob/master/git-cmd.bat)实例（包含在 msysgit 中），它将正确设置您的`HOME`环境变量（Windows 默认情况下未设置）。

# android - Android 应用程序中的 Twitter 集成

> ID：15128381
> 
> 赞同：0
> 
> 时间：2013-02-28T05:49:57.883
> 
> 标签：android, twitter4j

我已经在 Twitter 开发者网站上注册了我的应用程序并获得了一些 OAuth 凭据（消费者密钥、消费者秘密、请求令牌 URL 等）。我将回调 url 留空。应用程序是为 IOS 和 Android 开发的。没有回调 url 应用程序在 IOS 中工作但在 android 中不工作。当我尝试过时

```
requestToken = twitter
                    .getOAuthRequestToken(Constants.TWITTER_CALLBACK_URL); 
```

我得到了例外

> 02-28 10:52:27.337: W/System.err(666): 401: 身份验证凭据 ( [https://dev.twitter.com/pages/auth](https://dev.twitter.com/pages/auth) ) 丢失或不正确。确保您已设置有效的使用者密钥/秘密、访问令牌/秘密，并且系统时钟同步。02-28 10:52:27.337: W/System.err(666): 02-28 10:52:27.337: W/System.err(666): 02-28 10:52:27.337: W/System.err (666):
> /oauth/request_token 02-28 10:52:27.337: W/System.err(666): 桌面应用程序仅支持 oauth_callback 值 'oob'

然后我试过没有回调网址

```
requestToken = twitter
                    .getOAuthRequestToken(); 
```

当我尝试登录时，我被重定向到一个页面（仍在网络活动中），祝贺我已授予我的应用程序访问我的 Twitter 帐户的权限，并给了我一个 pin 以在需要的地方输入，而不是重定向到我的应用程序。

如何在 Android 中不使用回调 url 登录 Twitter？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:05:37.590

1.  创建您自己的 WebViewClient 子类。

2.覆盖 shouldOverrideUrlLoading(WebView view, String url) 方法。

3.在 shouldOverrideUrlLoading() 中，检查 url.startsWith(YOUR_CALLBACK_URL) 是否为真。

4.如果为true，则从URL中检索“oauth_verifier”参数并返回true（来自shouldOverrideUrlLoading()的true会阻止WebView实例加载URL）。

使用第 4 步中获取的参数值获取访问令牌。您的应用程序可以在第 4 步之后从 WebView 实例中取回控制权。

如果上述步骤听起来很麻烦，请尝试 TwitterOAuthView。它的用法很简单。打电话

view.start(CONSUMER_KEY, CONSUMER_SECRET, CALLBACK_URL, true, listener); 并通过如下定义的 TwitterOAuthView.Listener 接口接收结果。

void onSuccess(TwitterOAuthView view, AccessToken accessToken); void onFailure（TwitterOAuthView 视图，TwitterOAuthView.Result 结果）；如果将 TwitterOAuthView.start() 方法作为第四个参数赋予 true，则 TwitterOAuthView 不会访问回调 URL，我认为这种行为是您想要实现的。源代码 TwitterOAuthView.java 可能会有所帮助。

# c++ - 如何从文件中读取数据块，然后从该块读取到向量中？

> ID：15128383
> 
> 赞同：3
> 
> 时间：2013-02-28T05:50:03.083
> 
> 标签：c++, database, memory, memory-management

假设我有一个包含 x 条记录的文件。一个“块”保存 m 条记录。文件中的总块数 n=x/m。如果我知道一条记录的大小，比如 b 字节（一个块的大小 = b*m），我可以使用系统命令 read() 一次读取完整的块（还有其他方法吗？）。现在，我如何从这个块中读取每条记录并将每条记录作为一个单独的元素放入一个向量中。

我之所以要这样做，首先是为了减少磁盘 i/o 操作。根据我所学到的，由于磁盘 i/o 操作要昂贵得多。还是与我从文件中逐条读取记录并直接将其放入向量而不是逐块读取时所花费的时间相同？在逐块读取时，我将只有 n 个磁盘 I/O，而如果我逐记录读取，则有 x 个 I/O。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:13:07.593

您应该考虑使用[`mmap()`](http://linux.die.net/man/2/mmap)而不是使用`read()`.

好的`mmap`是您可以将文件内容视为简单地映射到您的进程空间，就好像您已经拥有指向文件内容的指针一样。通过简单地检查内存内容并将其视为一个数组，或者通过使用复制数据，`memcpy()`您将隐式执行读取操作，但仅在必要时 - 操作系统虚拟内存子系统足够智能，可以非常有效地执行此操作。

避免 mmap 的唯一可能原因可能是您在 32 位操作系统上运行并且文件大小超过 2 GB（或略小于该大小）。在这种情况下，操作系统可能无法为您的`mmap`-ed 内存分配地址空间。但是在 64 位操作系统上使用`mmap`应该永远不会成为问题。

此外，`mmap`如果您要写入大量数据，并且预先不知道数据的大小，这可能会很麻烦。除此之外，在`read`.

实际上，大多数现代操作系统都`mmap`广泛依赖。例如，在 Linux 中，要执行一些二进制文件，您的可执行文件只需`mmap`-ed 并从内存中执行，就好像它是由 复制到那里一样`read`，而不是实际执行`read`它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T05:57:57.683

一次读取一个块并不一定会减少 I/O 操作的数量。标准库在从文件中读取数据时已经进行了缓冲，因此您（通常）*不会*期望每次尝试从流（或任何接近的内容）中读取时都会看到实际的磁盘输入操作。

一次读取一个块仍然可能会减少 I/O 操作的数量。如果您的块大于流默认使用的缓冲区，那么您会看到用于读取数据的 I/O 操作更少。另一方面，您可以通过简单地调整流使用的缓冲区大小来完成相同的操作（这可能要容易得多）。

# php - 用最后一个非零值替换数组元素

> ID：15128385
> 
> 赞同：0
> 
> 时间：2013-02-28T05:50:21.293
> 
> 标签：php, arrays, multidimensional-array

我有一个结果数组，如下所示：

```
Array
(
    [2013-02-27] => Array
        (
            [CPD] => 0
            [Display] => 0
            [Incent] => 0
            [Organic] => 1464
            [uncategorized] => 0
            [total] => 0
        )

    [2013-02-26] => Array
        (
            [CPD] => 0
            [Display] => 0
            [Incent] => 0
            [Organic] => 1463
            [uncategorized] => 0
            [total] => 0
        )

    [2013-02-25] => Array
        (
            [CPD] => 0
            [Display] => 0
            [Incent] => 0
            [Organic] => 1459
            [uncategorized] => 0
            [total] => 0
        )

    [2013-02-24] => Array
        (
            [CPD] => 0
            [Display] => 2
            [Incent] => 0
            [Organic] => 1449
            [uncategorized] => 0
            [total] => 0
        ) 
```

这基本上是一个运行总计，如果有的话，我需要将零值替换为更高的值。我的意思是我有 2 作为 2013-02-24 的 Display 计数。因此，我需要将其作为显示类别的其他日期的计数。为了让事情更清楚一点，这是一个产品的下载次数，我正在计算每天从各种来源获得的下载次数。因此，如果它在 24 日之前的计数为 2，那么如果当天的下载量为零，那么它在接下来的几天内必须是相同的。如果再次发生下载，它将累加。所以我正在做的是循环数组并检查零值。如果特定部分的值为零，例如显示，则必须将其替换为上一个日期的较高数字（如果有）。那么我该怎么做呢？

我使用了以下代码：

```
foreach ($result as $key=>$value){
            foreach($categories as $cat){
                if($value[$cat->category]==0){
          $prev_day = date("Y-m-d",strtotime ( '-1 day' , strtotime ( $key ) )) ;
          while ($prev_day>=$from) {
            if($result[$prev_day][$cat->category]!=0){
              $prev_high_value[$cat->category]=$result[$prev_day][$cat->category];
              break;
            }
            $prev_day = strtotime ( '-1 day' , strtotime ( $prev_day ) ) ;
          }
          $result[$key][$cat->category]=$prev_high_value[$cat->category];
            }
        }
    } 
```

其中 $category 是具有类别值的对象，例如 Display an others

# android - 相机预览越来越长

> ID：15128388
> 
> 赞同：7
> 
> 时间：2013-02-28T05:50:34.367
> 
> 标签：android, android-camera

我写了一个用于显示相机的代码。以下是我的布局文件的代码，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <FrameLayout
        android:id="@+id/previewLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </FrameLayout>

    <LinearLayout
        android:id="@+id/startBar"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:background="@drawable/leftbarbg"
        android:orientation="vertical" 
        android:gravity="center">

        <ImageView
            android:id="@+id/MuteBtn"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="2"
            android:src="@drawable/mutebtn" />

        <ImageView
            android:id="@+id/VideosBtn"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="2"
            android:src="@drawable/videosbtn" />

        <ImageView
            android:id="@+id/RecBtn"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="3"
            android:src="@drawable/action_rec_selected" />

        <ImageView
            android:id="@+id/SettingsBtn"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="2"
            android:src="@drawable/settingsbtn" />

        <ImageView
            android:id="@+id/ChatBtn"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="2"
            android:src="@drawable/chatbtn" >
        </ImageView>
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/stopBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="3dp"
        android:visibility="gone" >

        <ImageView
            android:id="@+id/StopBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/stopbtn" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="70dp"
        android:layout_marginTop="20dp" >

        <ImageView
            android:id="@+id/MenuBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:src="@drawable/menubtn" />

        <ImageView
            android:id="@+id/LiveModeBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:src="@drawable/livemodeoff" />

        <Chronometer
            android:id="@+id/video_chronometer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:textSize="28sp"
            android:textStyle="bold" />
    </RelativeLayout>

</RelativeLayout> 
```

这是我的 CameraSurfaceview 代码，

```
public class CameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder holder;
    private Camera camera;
    private MediaRecorder mediaRecorder;
    private Boolean previewing;
    private AutoFocusManager autoFocusManager;
    private CameraDetectionObserver cameraDetectionObserver;

    public CameraSurfaceView(Context context, AutoFocusManager autoFocusManager, CameraDetectionObserver cameraDetectionObserver) {
        super(context);
        this.holder = this.getHolder();
        this.holder.addCallback(this);
        this.holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        this.autoFocusManager= autoFocusManager;
        this.cameraDetectionObserver= cameraDetectionObserver;  
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        if (camera != null) {

            Camera.Parameters parameters = camera.getParameters();
            List< String > FlashModes = parameters.getSupportedFlashModes();
            if (FlashModes.contains(Parameters.FLASH_MODE_AUTO)) {
                parameters.setFlashMode(Parameters.FLASH_MODE_AUTO);
                System.out.println("FLASH_MODE_AUTO");
            }
            List< String > WhiteBalance = parameters.getSupportedWhiteBalance();
            if (WhiteBalance.contains(Parameters.WHITE_BALANCE_AUTO)) {
                parameters.setFlashMode(Parameters.WHITE_BALANCE_AUTO);
                System.out.println("WHITE_BALANCE_AUTO");
            }

            List< String > Antibanding = parameters.getSupportedAntibanding();
            if (Antibanding.contains(Parameters.ANTIBANDING_AUTO)) {
                parameters.setAntibanding(Camera.Parameters.ANTIBANDING_AUTO);
                System.out.println("ANTIBANDING_AUTO");
            }

            List<Size> previews = parameters.getSupportedPreviewSizes();
            int i = 0;

            parameters.setPreviewSize( previews.get(4).width, previews.get(4).height );
            camera.setParameters(parameters);
            camera.startPreview();
            autoFocusManager.startAutoFocus(camera);
        }
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {

        if (camera != null) {
            camera.release();
            camera = null;
        }

        try {
            camera = Camera.open(findBackFacingCamera());
            camera.setPreviewDisplay(holder);
            previewing = true;
            cameraDetectionObserver.cameraInitializationStatus(true);
        } catch (IOException e) {
            camera.release();
            camera = null;
        }catch (Exception e) {
            e.printStackTrace();
            cameraDetectionObserver.cameraInitializationStatus(false);
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        if (previewing) {
            camera.stopPreview();
            camera.release();
            camera = null;
            previewing = false;
            autoFocusManager.stopAutoFocus();
            System.out.println("surface destroyed"); 
        }
    }

    public void stopPreview(){
        if (previewing) {
            camera.stopPreview();
            camera.release();
            camera = null; 
            previewing = false;
            autoFocusManager.stopAutoFocus();
            System.out.println("surface destroyed");    
        }
    }

    public Camera getCamera()
    {
        return this.camera;
    }

    public MediaRecorder getMediaRecorder(){
        mediaRecorder = new MediaRecorder();
        camera.unlock();
        mediaRecorder.setCamera(camera);
        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        mediaRecorder.setPreviewDisplay(holder.getSurface());
        mediaRecorder.setVideoFrameRate(29);
        mediaRecorder.setVideoSize(ByteArraysForLogin.VideoDimention.vWidth,ByteArraysForLogin.VideoDimention.vHeight);
        return mediaRecorder;
    }

    private int findBackFacingCamera() {
        int cameraId = -1;
        // Search for the back facing camera
        int numberOfCameras = Camera.getNumberOfCameras();
        for (int i = 0; i < numberOfCameras; i++) {
            CameraInfo info = new CameraInfo();
            Camera.getCameraInfo(i, info);
            if (info.facing == CameraInfo.CAMERA_FACING_BACK) {
                cameraId = i;
                break;
            }
        }
        return cameraId;
    }
} 
```

上面的代码工作正常，但它在横向和纵向模式下以拉伸格式显示相机预览，如下图所示。

> ![在此处输入图像描述](../Images/d1fae352529db8d826046f47873a53f6.png) ![在此处输入图像描述](../Images/60b653901e4688140914e7ade107b5f9.png)

然而，最终的相机图像没有被拉伸，它在正常模式下只有预览被拉伸。

PS我试过[这个后问这个问题](https://stackoverflow.com/search?q=%5Bandroid%5D%2bCamera%2bPreview%20Stretched)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:15:54.050

尝试添加

```
getWindow().setFormat(PixelFormat.UNKNOWN); 
```

在你的 onCreate

如果这没有帮助，也许设置旋转会？

```
camera.setDisplayOrientation(90); 
```

如果这仍然没有帮助，谷歌上的所有结果都说 SurfaceView 的纵横比必须与相机的纵横比相匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:19:04.937

尝试使用不同的分辨率并增加帧的宽度和高度

# algorithm - 确定镜像的延迟（通过使用 rsync 和 rsh 完成镜像）

> ID：15128389
> 
> 赞同：0
> 
> 时间：2013-02-28T05:50:48.610
> 
> 标签：algorithm, bash, rsync, mirroring, rsh

我有一个主服务器，它在网络上抓取数据并进行索引。之后，它开始镜像到所有镜像服务器。

为此，我使用**rsync 和 rsh**。

但是在镜像服务器开始更新之前，需要一些时间。我想找到延迟发生的位置。

**我的理解**

反向 DNS 查找可能需要一些时间。

**我的问题**

**已编辑**

1.  **在rsh.c**代码 **或 rsync 代码**中添加一些日志是否正确
***   如果第一个问题的答案是肯定的，那么我想列出**启用**反向 DNS 查找和**禁用**反向 DNS 查找时消耗的时间，那么请告诉我可以做什么？**

 **告诉我在哪里可以添加日志来记录消耗的时间？

如果我的理解和问题不符合我想要的任务或相关的问题，那么请纠正我，给我更好的路径，以便我实现我的目标。

提前致谢。寻找您的善意回应。

**编辑第 2 号**

基本上我正在分析确定延迟原因所花费的时间。无需修改现有代码。

我的任务是分析代码，找出延迟的原因。而已。

我想现在我任务的所有事情你都清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:02:20.827

在更改 rsh 之前，您可以尝试使用 strace 来查看哪些系统调用需要更长的时间。

strace -c 将生成系统调用列表和这些调用使用的时间百分比。（也应该有助于解决第二个问题）

为了使 DNS 查找变得明显，您可以使用 ltrace：

例子：

```
ltrace -c -o log.txt wget http://dkjflsdfjka/ 
```

然后 log.txt 将具有以下内容：

```
root@host:~# head log.txt 
% time seconds usecs/call calls function 
------ ----------- ----------- --------- -------------------- 
74.27 0.130779 130779 1 getaddrinfo 
6.63 0.011680 33 344 strlen 
3.05 0.005371 35 152 free 
2.98 0.005255 35 147 malloc 
2.74 0.004830 38 127 fgets 
```

然后你可以看到...... getaddrinfo 调用花费了大部分时间**

# dart - 为什么《Web UI 入门》教程的第一步会报错，报错是什么意思？

> ID：15128391
> 
> 赞同：0
> 
> 时间：2013-02-28T05:50:58.857
> 
> 标签：dart, dart-webui, dart-pub

我正在浏览 dartlang.org 上的“目标”（教程）。我在[目标 6：Web UI 入门，](http://www.dartlang.org/docs/tutorials/web-ui/)并在“在 Dart 编辑器中设置后台编译”部分下的第 1 步遇到错误。

有人可以解释为什么会发生这个错误，或者我能做些什么来解决它？错误如下。

```
Error setting breakpoint at 'main': 'package:logging/logging.dart': 
Error: line 250 pos 24: wrong number of type arguments in type 'Comparable'
class Level implements Comparable<Level> {
                   ^ 
```

我没有更改任何日志记录包中的任何内容，也没有弄乱任何 Comparable 类。是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:43:25.953

看看[这个](https://stackoverflow.com/questions/15086309/compiler-error-running-ootb-web-ui-sample)问题。我实际上不知道为什么会发生这种情况（如果 dart 开发团队的某个人正在阅读此内容，请解释一下：D），但似乎他们更改了 M3 中的 Comparable 接口结构，并且忘记更新日志记录包;)

要解决您的问题，请转到“logging.dart”文件并进行以下更改：

从：

```
class Level implements Comparable<Level> { 
```

到：

```
class Level implements Comparable { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:57:49.340

这可能与您运行的 SDK 版本与 web_ui 版本不兼容有关。如果您拥有两者的最新版本，则它们可以一起工作。如果您不想使用最新版本，则必须在 pubspec.yaml 文件中显式管理版本。

我正在使用 Dart Editor 版本：0.4.0_r18915 和 web_ui 版本：0.4.0，它工作正常。

尝试获取最新版本的 Dart Editor，删除 pubspec.lock 文件，然后再次运行 pub install。

同时，我将在关于管理版本的教程中弄清楚如何加强语言。

希望这可以帮助。内存

# safari - safari visibleContentsAsDataURL() 未定义

> ID：15128392
> 
> 赞同：1
> 
> 时间：2013-02-28T05:50:59.083
> 
> 标签：safari, safari-extension

我的目标是通过扩展使用 safari 6 截取网页截图。我在我的扩展全局页面中使用它：

```
function handle_message(event) {
         event.target.page.dispatchMessage("handle_message",
  {image:
   safari.application.activeBrowserWindow.activeTab.visibleContentsAsDataURL()
  }
}

safari.application.addEventListener("message",handle_message,false); 
```

在接收端，事件 message.image 未定义。有什么我需要做的不同的事情吗？我可以成功发送其他选项卡属性，例如 url，而不是截图数据图像 url。任何想法？

谢谢，斯坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:17:41.253

我自己找到的，方法需要回调（当然）

```
safari.application.activeBrowserWindow.activeTab.visibleContentsAsDataURL(
  function(image_url){
       //do something with image_url
  }
) 
```

# ipad - 如何在导航栏中添加两个按钮并留出一些空间

> ID：15128394
> 
> 赞同：1
> 
> 时间：2013-02-28T05:51:04.997
> 
> 标签：ipad, uibutton, uinavigationbar

我在导航栏中添加了两个按钮，它们工作正常，但我希望它们之间有空间，它们都结合在一起，我希望它们之间有一点空间

```
 UIBarButtonItem *btnAdd = [[UIBarButtonItem alloc] initWithTitle:@"Add"
                                                           style:UIBarButtonItemStylePlain
                                                          target:self
                                                          action:@selector(Add)];

UIBarButtonItem *btnEdit = [[UIBarButtonItem alloc] initWithTitle:@"Add"
                                                           style:UIBarButtonItemStylePlain
                                                          target:self
                                                          action:@selector(Add)];

UIToolbar *rightToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 100, 44)];
rightToolBar.backgroundColor = [UIColor clearColor];
rightToolBar.tintColor = [UIColor colorWithRed:40.0/255.0 green:48.0/255.0 blue:51.0/255.0 alpha:0.0];
NSArray *buttonsRight = [NSArray arrayWithObjects:btnEdit, btnAdd, nil];
[rightToolBar setItems:buttonsRight];

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:rightToolBar]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:20:46.603

您可以在您的`UIBarButtonItem`

```
UIBarButtonItem *fixed = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil]

UIBarButtonItem *flexible = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil] 
```

请注意，要设置 Fixed Space 的宽度`UIBarButtonItem`，您需要设置`.width`属性

```
[fixed setWidth:455.0f]; 
```

# wxpython - 在 wxpython 中的单选按钮旁边添加图像

> ID：15128404
> 
> 赞同：0
> 
> 时间：2013-02-28T05:51:51.240
> 
> 标签：wxpython

我正在 wxpython 中制作一个 GUI。我想将图像放在单选按钮旁边。我应该如何在 wxpython 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:04:30.617

如果您使用的是 2.9，我建议使用带有位图标签的 wx.ToggleButton，或者如果您仍在使用 2.8，则建议使用 wx.lib.buttons 中的位图切换按钮类之一。然后，您可以通过在其中一个按钮被切换时取消切换组中的所有其他按钮来自己实现“单选按钮”功能。使用位图本身作为单选按钮会更好看并且会节省空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:29:32.257

我不确定你是什么意思。您是否想要图像而不是实际的单选按钮本身？这是不支持的。如果除了单选按钮之外还需要图像，则只需使用一组水平框尺寸器或一个网格尺寸器。添加图像，然后添加单选按钮。你完成了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T10:22:18.813

我对以下内容感到满意：

*   图像图标留给单选按钮，
*   单击图像激活单选按钮。

似乎可用性并没有受到影响。

```
def make_radio_with_icon(parent_window, bitmap, label):
  sizer = wx.BoxSizer(orient=wx.HORIZONTAL)
  sizer.Add(bitmap)
  r = wx.RadioButton(parent_window, label=label)
  sizer.Add(r)
  def on_click(evt):
    r.SetValue(1)
  bitmap.Bind(wx.EVT_LEFT_DOWN, on_click)
  return sizer 
```

通过类比，您可以实现排序：单选按钮本身、图像、标签。

# macos - 您如何授予 WWW::Mechanize::Firefox 启动 Firefox 的权限？

> ID：15128410
> 
> 赞同：2
> 
> 时间：2013-02-28T05:52:17.060
> 
> 标签：macos, scripting, permission-denied, www-mechanize-firefox

我在 Mac 上。我有一个简单的 Perl 脚本，它使用 WWW::Mechanize::Firefox 来拉取网页。

当 Firefox 已经打开并在我的计算机上运行时，该脚本可以完美运行。这是创建对象的行：

```
my $mech = WWW::Mechanize::Firefox->new(
  launch => '/Applications/Firefox.app'
); 
```

但是，当 Firefox 关闭并运行脚本时，出现以下错误：

```
exec failed: Permission denied at /Library/Perl/5.12/MozRepl/RemoteObject.pm line 463
 at /Library/Perl/5.12/MozRepl/RemoteObject.pm line 463 
```

我该怎么做才能授予 perl 脚本启动 Firefox 的权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:53:12.367

尝试：

```
my $mech = WWW::Mechanize::Firefox->new(
  launch => '/Applications/Firefox.app/Contents/MacOS/firefox'
); 
```

`/Applications/Firefox.app`是应用程序包装器，是一个包含构成应用程序的各种文件的目录。应用程序包装器中的文件`Contents/MacOS/firefox`是应用程序的主要可执行文件。

# python-3.x - 为 OSX 下载 Python 后终端中的 Python 版本

> ID：15128411
> 
> 赞同：1
> 
> 时间：2013-02-28T05:52:17.503
> 
> 标签：python-3.x

我下载并成功安装了适用于 OSX 的 Python 3.3。在终端中执行“python”后，它打开了 python 终端窗口，说明：“Python 2.7.2（默认，2012 年 6 月 20 日...）

我还需要做其他更新吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:49:07.817

python3 应该为您启动正确的版本。

# vb.net - 如何在 VB.NET 中移动 Ushort 16 位整数中的位？

> ID：15128412
> 
> 赞同：-1
> 
> 时间：2013-02-28T05:52:18.970
> 
> 标签：vb.net, 16-bit, uint

我有一个 16 位无符号整数，它的值是这样的：

```
byte_val1 = 1000000000000001 
```

从这里我需要右移它并使它像这样：

```
 1100000000000000 
```

我已经这样做了：

```
 byte_val1 = byte_val1 >> 1 
```

并得到`byte_val1 = 100000000000000`.

之后我做了

```
 byte_val1 = byte_val1 Or &H80 
```

但我没有得到想要的结果......相反，我得到了`100000010000000`.

那么我应该怎么做才能得到这个结果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:03:55.707

当您使用无符号数据类型时，不会发生符号位传播。使用有符号整数来获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:07:02.467

这次我做对了。我这样做了：

```
byte_val1 = byte_val1 >> 1

byte_val1 = byte_val1 Or &H8000 
```

它奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T18:24:39.693

您似乎真正想要的是*旋转*位，而不是移动它们：

```
Module Module1

    Function RORUInt16(n As UInt16, r As Integer) As UInt16
        ' ensure number of places to shift is valid
        r = r And 15
        If r = 0 Then
            ' nothing to do
            Return n
        End If

        ' get bits from RHS
        Dim RHS = Convert.ToUInt16(n And ((2 << r) - 1))
        ' shift the original bits right (loses the RHS saved previously)
        Dim rb = Convert.ToUInt16(n >> r)
        ' put back the lost bits on the LHS
        rb = Convert.ToUInt16(rb Or (RHS << (16 - r)))
        Return rb
    End Function

    Sub Main()

        Dim b1 As UInt16 = Convert.ToUInt16("0000001000000111", 2)

        Console.WriteLine(Convert.ToString(b1, 2).PadLeft(16, "0"c))
        Console.WriteLine(Convert.ToString(RORUInt16(b1, 1), 2).PadLeft(16, "0"c))
        Console.ReadLine()

    End Sub

End Module 
```

# java - Android 汇率 API

> ID：15128415
> 
> 赞同：2
> 
> 时间：2013-02-28T05:52:30.730
> 
> 标签：java, android, eclipse, exchangewebservices

我需要创建一个 android 应用程序，它可以获取实时更新的货币汇率。是否有任何 android（免费）API 用于此目的？我做了一个搜索，没有找到与android相关的东西。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T05:58:55.987

对于后代，它们与其他可能的答案一起：

**谷歌汇率查询（已解析）**

请求：[http](http://rate-exchange.appspot.com/currency?from=USD&to=EUR) ://rate-exchange.appspot.com/currency?from=USD&to=EUR 响应：

```
{"to": "EUR", "rate": 0.76911244400000001, "from": "USD"} 
```

基于此评论。

**开放汇率 API**

每月最多可免费获得 1000 次点击。请求： http: [//openexchangerates.org/latest.json](http://openexchangerates.org/latest.json) 响应：

```
{

 "disclaimer": "This data is collected from various providers ...",
  "license": "all code open-source under GPL v3 ...",
  "timestamp": 1323115901,
  "base": "USD",
  "rates": {
  "AED": 3.66999725,
  "ALL": 102.09382091,
  "ANG": 1.78992886,
  // 115 more currency rates here ...
 }
} 
```

**欧洲中央银行饲料**

文档： http: [//www.ecb.int/stats/exchange/eurofxref/html/index.en.html#dev](http://www.ecb.int/stats/exchange/eurofxref/html/index.en.html#dev) 请求： http: [//www.ecb.int/stats/eurofxref/eurofxref-daily.xml](http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml) 响应：作为响应，它将返回一个包含 28 种货币的 xml 文件。

**~~雅虎金融 API~~**

（*更新 - 2017 年 11 月*）自 2017 年 11 月 6 日起停产，并带有以下消息：

> 我们注意到这项服务的使用违反了雅虎服务条款。因此，该服务将被终止。有关所有未来市场和股票数据研究，请参阅 Finance.yahoo.com。

请求： http: [//finance.yahoo.com/d/quotes.csv?](http://finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=USDINR=X) e=.csv&f=sl1d1t1&s=USDINR=X 作为响应，它将返回一个 csv 文件。

[更新] 一个名为 Curry 的 jQuery 插件正在使用这个 CSV。如果您需要的不仅仅是 CSV，可能会很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T05:58:50.680

**谷歌汇率查询（已解析）**

请求：[http](http://rate-exchange.appspot.com/currency?from=USD&to=EUR) ://rate-exchange.appspot.com/currency?from=USD&to=EUR 响应：

```
{"to": "EUR", "rate": 0.76911244400000001, "from": "USD"} 
```

这是另一个 JSON(P) API

[http://rate-exchange.appspot.com/currency?from=USD&to=EUR&q=1](http://rate-exchange.appspot.com/currency?from=USD&to=EUR&q=1)基于 Google API。

如果您想使用 RSS Feed，请使用

[http://themoneyconverter.com/RSSFeeds.aspx](http://themoneyconverter.com/RSSFeeds.aspx)

试试这些链接来轻松学习 JSON：

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T05:57:07.380

嗨，您可能会问货币汇率，对吗？试试**谷歌金融 API**：

[谷歌财经](http://rate-exchange.appspot.com/currency?from=USD&to=EUR)

* * *

~~试试**雅虎财经**~~

**[更新] 雅虎金融 API 已于 2017-11-06 停用**

在网址中

[http://finance.yahoo.com/d/quotes.csv?e=goog.csv&f=sl1d1t1&s=INRUSD=x](http://finance.yahoo.com/d/quotes.csv?e=goog.csv&f=sl1d1t1&s=INRUSD=x)

INR - 是印度卢比 - 从 USD - 美元 - 到

给出任何国家卢比的名称。

例子 ：

```
countrieshash.put("India", "INR");
        countrieshash.put("USA", "USD");
        countrieshash.put("GreatBritain", "GBP");
        countrieshash.put("Japan", "JPY");
        countrieshash.put("Australia", "AUD");
        countrieshash.put("Europe", "EUR");
        countrieshash.put("Canada", "CAD");
        countrieshash.put("France", "CHF");
        countrieshash.put("China", "CNY");
        countrieshash.put("kuwait", "KWD");
        countrieshash.put("UAE", "AED"); 
```

[雅虎财经](http://finance.yahoo.com/d/quotes.csv?e=goog.csv&f=sl1d1t1&s=INDUSD=x)

# wcf - 在 Biztalk 中配置动态 WCF 端口

> ID：15128416
> 
> 赞同：0
> 
> 时间：2013-02-28T05:52:33.653
> 
> 标签：wcf, dynamic, binding, biztalk

我有一个 WCF 端口（我从添加生成的项目>>使用 WCF 服务中获得）。我在我想使用的另一台服务器上拥有完全相同的服务。我重用了以前使用的服务的所有工件，并且只在 Biztalk 管理端使用不同的服务地址制作了 WCF 端口的副本，然后我将两个端口与适当的虚拟端口绑定，它工作正常。但是有没有可能在运行时根据输入数据动态更新 WCF 端口的绑定信息（意味着我不想在 Visual Studio 中创建多个类似的虚拟端口），我只想添加另一个服务端口我不要一次又一次地改变我的编排。我只在 Biztalk 管理控制台端创建物理端口并将其与一些虚拟端口绑定，然后它开始工作......

请让我知道是否有一些混淆......有问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T06:43:47.703

我使用角色链接将数据动态发送到不同的服务器。但绑定文件保持不变。无需为每个服务添加额外的绑定文件，也无需一次又一次地修改 BizTalk 项目。只需配置端口并进行其他聚会，您就完成了。

# java - 如何使用 NameValuePair 将数组值发送到 servlet？

> ID：15128417
> 
> 赞同：0
> 
> 时间：2013-02-28T05:52:39.383
> 
> 标签：java, google-app-engine, servlets

我正在尝试将布尔值数组发送到 servlet。这是我到目前为止所做的，我很困惑：

```
HttpClient client = new DefaultHttpClient();  
    String postURL = "http://APP_NAME.appspot.com/listenforrestclient";
    HttpPost post = new HttpPost(postURL);
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        for (int i=0; i<arrBool.length; i++) {
        arrBool[i] = r.nextBoolean();
        String[] user = {"","","","","",""};
        if (arrBool[i] == true) {
            params.add(new BasicNameValuePair("user[i]", arrBool.toString()));
        }
        else if (arrBool[i] == false) {
            params.add(new BasicNameValuePair("user[i]", arrBool.toString()));
    }
        }
        UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);
        post.setEntity(ent);
        HttpResponse responsePOST = client.execute(post);  
        HttpEntity resEntity = responsePOST.getEntity();  
        if (resEntity != null) {    
            System.out.printf("RESPONSE: ", EntityUtils.toString(resEntity));
        }
} catch (Exception e) {
    e.printStackTrace();
} 
```

我试图只做用户[i]，“用户[i]”，用户。还是没找到。

在 servlet 上我有：

```
 public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException, ServletException 
{
    resp.setContentType("text/plain");

    for (int i=0; i<mmaa.length; i++) {
        mmaa = req.getParameterValues("user");
        resp.getWriter().println(mmaa[i]);
    } 
```

}

我在网上搜索了很多，找不到合适的。如果有人能帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:10:42.290

你有`params.add(new BasicNameValuePair("user[i]", arrBool.toString()));`

但你的关键是字符串`"user[i]"`。改为使用`String.format("user[%d]", i)`。所以，改变

```
params.add(new BasicNameValuePair("user[i]", arrBool.toString())); 
```

至

```
params.add(new BasicNameValuePair(String.format("user[%d]", i), arrBool.toString())); 
```

在 servlet 中，您可以通过以下方式获取参数值：

```
for(int i = 0; i < ...){
    String value = request.getParameter(String.format("user[%d]", i);
    //process value  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:36:53.610

您正在添加新对象`params.add(new BasicNameValuePair("user[i]", arrBool.toString()));`而不是这个尝试做

```
params.add(new BasicNameValuePair(user[i].toString(), arrBool.toString())); 
```

首先在servlet中，您需要从请求参数中获取数组列表，并为数组列表中的每个值创建一个具有相同BeanNameValuePair的对象并使用检查从中检索值`getValue()`是否在servlet中正确获取值首先检查是否您通过调试正确获取 ArrayList。

# emacs - 有没有办法在 nrepl 中进行历史搜索？

> ID：15128418
> 
> 赞同：6
> 
> 时间：2013-02-28T05:52:39.347
> 
> 标签：emacs, clojure, nrepl

您知道当您在 bash 中点击向上箭头时，它会如何填写您输入的最后一个命令吗？有什么办法可以在 nrepl 中做到这一点？

到目前为止，我一直在进行反向搜索 ( `C-r`)，输入相关行的前几个字符，终止行 ( `C-k`)，跳到缓冲区的末尾 ( `M->`) 并拉出终止行 ( `C-y`)。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T06:51:32.693

您可以使用`M-p`和`M-n`在输入历史记录中上下导航。此外，当前输入可以用作搜索模式，即键入要匹配的命令的开头，然后`M-p`将带您到下一个匹配。这使用函数`nrepl-previous-input`和`nrepl-next-input`。如果你不喜欢这些键绑定，你也可以重新绑定到`<up>`and `<down>`：

```
(define-key nrepl-mode-map (kbd "<up>") 'nrepl-previous-input)
(define-key nrepl-mode-map (kbd "<down>") 'nrepl-next-input) 
```

只需将其添加到您的（如果您不想重新启动 Emacs，请在每行之后`.emacs`进行评估）。`C-x C-e`另外，请注意，`M-n`并且`M-p`可能会绑定到其他 REPL 和类似模式中的类似功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-13T04:43:02.243

如果您使用的是[Cider](https://github.com/clojure-emacs/cider)，则可以将以下内容添加到您的用户配置中：

```
(define-key cider-repl-mode-map (kbd "<up>") 'cider-repl-previous-input)
(define-key cider-repl-mode-map (kbd "<down>") 'cider-repl-next-input) 
```

要在下次打开 repl 时保留历史记录，您还可以使用以下选项：

```
(setq cider-repl-wrap-history t)
(setq cider-repl-history-size 1000)
(setq cider-repl-history-file "~/.cider-repl-history") 
```

`cider-repl-history-file`如果你想要一个持久的历史记录是必需的。如果您使用相对路径，则历史记录将是当前项目的本地记录。

# php - 从带有句点分隔符的字符串中选择第一个或最后一个字符组

> ID：15128421
> 
> 赞同：0
> 
> 时间：2013-02-28T05:53:01.950
> 
> 标签：php, string

我正在寻求有关 php 代码的帮助，以操作我从 SQL 数据库中检索的字符串。该字符串采用以下格式：由句点分隔的 3-5 个字母数字组。字符串中字母数字组的数量变化很大（从 1 到 20 个或更多组）。

*   *示例 1：J89.NEWTT.IIU.MZZ.OXI。*
*   *示例 2：ORD6.BAE.J89.DLH.YRL.N5500.W9700.NUGSM.N6500。*

我需要用这些做两件事：

1.  **仅将句点之间的前 3 组**分隔成一个新字符串（在示例 1 中，结果将为“J89.NEWTT.IIU”）
2.  **仅将句点之间的最后 3 组**分隔成一个新字符串（在示例 2 中，结果将为“W9700.NUGSM.N6500”）

我很难让普通玩家使用它。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:58:35.013

拆分它（`explode`），切出您想要的部分，然后将它们重新组合在一起`.`。

这是一种奇怪的格式，选择前/后三个块似乎真的很随意。是结构化数据吗？如果是这样，为什么要将它存储在数据库的单个字段中？

# php - 获取取消选择的选项多选的值

> ID：15128423
> 
> 赞同：1
> 
> 时间：2013-02-28T05:53:23.613
> 
> 标签：php, javascript, jquery

我有一个表单，其中包含 2 个用于依赖列表的选择框。

我正在根据第一个列表中选择的值加载第二个列表，即多选。

```
<select id="list1" multiple='multiple'>
    <option value="a">a value</option>
    <option value="b">b value</option>
    <option value="c">c value</option>
</select>
<select id="list2">
</select> 
```

对于添加到 list2 的每个选项，我还添加了一个与 list2 值相对应的值为 list1 的类。

为了加载所选选项的元素，我使用以下代码：

```
$('#list1').on('change', function(){
    var list1vals = $('#list1').val().split(',');
    var newval = '';
    for(x in list1vals)
    {
        // Checking for selected value of list1 which doesn't have
        // corresponding values in list2.

        if($('.'+list1vals[x]).length == 0) 
        {
            newval = list1vals[x];
        }
    }
    $.ajax({
        type : "GET",
        url : "/xyz.php?action=getlist2&list1="+newval,
        success : function(response)
        {
            if($.trim(response) != '')
            {
                $('#list2').append(response);
            }
        }
    });
}); 
```

xyz.php

```
$action=$_GET['action'];
$listval1=$_GET['list1'];
switch($action)
{
    /////////////////

    case 'getlist2':
            $list2 = fetchlist2($list1val);
            foreach($list2 as $listobj)
            {
                $optionlist = '<option class="'.$list1val.'" value="'.$listobj['id'].'">'.$listobj['value'].'</option>';
            }
            echo $optionlist;
            break;

    ////////////////
} 
```

有什么方法可以从list2中删除list1中未选择的元素？

即当一个选项未被选中时，我想删除 list2 中具有未选中元素的类值的所有元素。

注意：获取列表的操作`fetchlist2`很昂贵，因此我想处理 javascript 中元素的删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:55:12.980

如果您只想将 list1 中未选择的选项从 list2 中删除，则可以尝试此操作：

```
 $('#list1').change(function(){          
      var lists = $('#list1').val();
      var str = '';          
      if (lists != null){
        for(var i=0;i<lists.length;i++){
          str += '<option value="'+lists[i]+'">' + $('#list1 option[value="'+  lists[i]+'"]').text() + '</option>';
        }
      }
      $('#list2').html(str);          
    }); 
```

或者，如果您只想删除一个选项元素，其类是 list1 中未选择元素的值：

```
$('#list1 option:not(:selected)').click(function(){           
   $('#list2 option[class="'+ $(this).val() +'"]').remove();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:40:10.847

如果我无法正确表达我的问题，我很抱歉。

这是两个不同的列表，第一个列表的值决定了第二个列表中要加载的内容，类似于选择类别并根据所选类别加载子类别。

我有点想办法做到这一点。这就是我做我想做的事：

```
 var list1vals = ($('#list1').val()+'').split(',');
    var newval = '';
    for(x in list1vals)
    {
        /// Checking list2 elements to see 
        /// which list1 selected element is not present

        if($('.'+list1vals[x]).length == 0) 
        {
            newval = list1vals[x];
        }
    }
    if(newval == '')
    {
        /// Some Element removed, checking which
        /// options remain selected

        var options1,list2options = [];
        $('#list1 option:selected').each(function(){
            options1 = $('#list2 option[class="'+ $(this).val() +'"]');
            list2options.push(options1);
        });
        $('#list2').html('');
        $('#list2').append(list2options);
    }
    else
    {
    $.ajax({
        type:"GET",
        url:"/xyz.php?action=getlist2&list1="+newval,
        success:function(response)
        {
            selectbox = $('#list2');
            var list2 = $.parseJSON(response);

            /// Adding options returned for newval to list2
            /// with class set as newval

            for(x in list2)
            {
                var option = $('<option></option>');
                $(option).attr('value',list2[x].value);
                $(option).html(list2[x].value);
                $(option).addClass(newval);
                $(selectbox).append(option);
            }
        }
        });
      } 
```

# python - 递归和辅助函数

> ID：15128424
> 
> 赞同：8
> 
> 时间：2013-02-28T05:53:26.537
> 
> 标签：python

抱歉，如果这是一个普遍的问题，但我是 Python 的初学者，很多时候当我看到其他人使用递归进行编码时，他们为 main 函数创建了一个辅助函数，然后调用该辅助函数，它本身就是递归的。

这似乎与最简单的递归情况有些不同，例如（列表总和，阶乘），其中函数仅调用自身。

有人可以通过示例更仔细地解释这种技术吗？

非常感激。

示例 1：（使用递归反转链表）

```
def revert_list(self):
    self.head = self._revert_helper(self.head)

def _revert_helper(self, node):
    temp = None
    if node.forward == None: 
        return node
    else:
        temp = self._revert_helper(node.forward)
        node.forward.forward = node
        node.forward = None
    return temp 
```

示例 2：（二叉搜索树）

```
def __contains__(self, key):
    return self._bstSearch(self._root, key)

# Returns the value associated with the key.
def valueOf(self, key):
    node = self._bstSearch(self._root, key)
    assert node is not None, "Invalid may key."
    return node.value

# Helper method that recursively searches the tree for a target key:
# returns a reference to the Node. This allows 
# us to use the same helper method to implement
# both the contains and valueOf() methods of the Map class.

def _bstSearch(self, subtree, target):
    if subtree is None:  # base case
        return None
    elif target < subtree.key: # target is left of the subtree root
        return self._bstSearch(subtree.left) 
    elif target > subtree.key: # target is right of the subtree root
        return self.bstSearch(subtree.right) 
    else:                      # base case
        return subtree 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T06:05:31.183

这实际上在其他语言中更常用，因为 python 通常可以使用可选参数来模拟这种行为。这个想法是递归获得了一些用户不需要提供的初始参数，这有助于跟踪问题。

```
def sum(lst):
    return sumhelper(lst, 0)

def sumhelper(lst, acc):
    if lst:
        acc += lst[0]
        return sumhelper(lst[1:], acc)
    return acc 
```

此处用于将起始参数设置为 0，因此用户不必提供它。但是，在 python 中，您可以通过将其设为`acc`可选来模拟它：

```
def sum(lst, acc=0):
    if lst:
        acc += lst[0]
        return sum(lst[1:], acc)
    return acc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T06:03:22.500

通常当我这样做时，是因为递归函数调用起来很棘手或烦人，所以我有一个更方便的包装器。例如，想象一个迷宫求解器函数。递归函数需要一个数据结构来跟踪迷宫内的访问点，但为了方便调用者我只希望调用者需要通过迷宫来解决。您可以使用 Python 中的默认变量来处理这个问题。

我这样做的另一个主要原因是速度。递归函数非常可靠，并假设它的参数都是有效的；它只是在递归中全速前进。然后包装函数在第一次调用递归函数之前仔细检查所有参数。作为一个简单的例子，阶乘：

```
def _fact(n):
    if n == 0:   # still need to handle the basis case
        return 1
    return n*_fact(n-1)

def fact(n):
    n0 = int(n)
    if n0 != n:
        raise ValueError("argument must make sense as an int")
    if n < 0:
        raise ValueError("negative numbers not allowed")
    return _fact(n) 
```

我已经从原始版本中编辑了这个，现在它实际上是一个非常合理的例子。我们将参数强制转换为整数（“duck typing”），但我们要求`!=`运算符不要通过这种强制指示它的值发生了变化；如果将其转换为`int`更改值（例如，`float`小数部分被截断的值），我们将拒绝该参数。同样，我们检查是否定的并拒绝该论点。那么实际的递归函数是非常可信的，根本不包含任何检查。

如果您发布了一个启发这个问题的代码示例，我可以给出不那么模糊的答案。

编辑：好的，讨论你的例子。

*   示例 1：（使用递归反转链表）

非常简单：“helper”函数是一个通用递归函数，它可以在类中具有链表的任何节点上工作。然后包装器是一个方法函数，它知道如何查找`self.head`列表的头部。这个“助手”是一个类成员函数，但它也可以是通用数据结构库中的一个简单函数。（这在 Python 中比在 C 之类的语言中更有意义，因为这样的函数可以与任何链表一起使用，该链表是一个类，其成员称为`forward`“下一个指针”值。所以你真的可以写一次然后使用它具有多个实现链表的类。）

*   示例 2：（二叉搜索树）

`None`如果在指定的 . 中找不到节点，则实际的递归函数返回`key`。然后有*两个*包装器：一个实现了`__contains__()`，如果它返回就可以了`None`；和`valueOf()`，如果找不到密钥，则会引发异常。正如评论所指出的，两个包装器让我们可以用一个递归函数解决两个不同的问题。

此外，就像第一个示例一样，两个包装器在特定位置开始搜索：`self._root`树的根。实际的递归函数可以在树内的任何地方启动。

如果`__contains__()`使用要搜索的节点的默认参数实现，并且默认设置为某个唯一值，则它可以检查特殊值并在这种情况下从根开始。然后当`__contains__()`正常调用时，会传入唯一值，递归函数可以知道需要查看特殊位置`self._root`。（不能只`self._root`作为默认值传入，因为默认值是在编译时设置的，之后类实例可以更改，因此无法正常工作。）

```
class UniqueValue:
    pass

def __contains__(self, key, subtree=UniqueValue):
    if subtree is UniqueValue:
        subtree = self._root

    if subtree is None:  # base case
        return None
    elif key < subtree.key: # target is left of the subtree root
        return self.__contains__(key, subtree.left) 
    elif key > subtree.key: # target is right of the subtree root
        return self.__contains__(key, subtree.right) 
    else:                      # base case
        return subtree 
```

请注意，虽然我说它*可以*像我在这里展示的那样实现，但我并没有说我更喜欢它。实际上我更喜欢两个包装器版本。这有点棘手，每次递归调用检查是否`subtree is UniqueValue`. 更复杂，浪费时间......不是胜利！只需编写两个包装器，它们在正确的位置开始。简单的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T06:04:25.070

根据我的经验（仅我的经验），我在以下情况下使用这种编码风格

1.  递归只在较大的函数中有用（不是很推荐，但我有一些不好的习惯）

2.  需要为函数做准备，但只需要一次（而不是标志或其他开关）

我使用它的一种方法是用于记录目的，同时避免重新记录级别

```
def _factorial(x):
    如果 x == 0 则返回 1 否则 x*_factorial(x)

@log #假设一些日志装饰器“日志”
默认阶乘（x）：
    返回 _factorial(x)

```

否则，`log`将为阶乘函数的每个递归级别调用，这是我可能不希望的。

另一种用法是解析默认参数。

```
def some_function(x = None):
    x = x 或 set() #或其他
    #一些东西
    返回一些函数（）

```

会检查`x`每次迭代是否为假，而我真正需要的是装饰器，或者作为替代方案：

```
def some_function(x = None):
   return _some_function(x if x else set())

```

`_some_function`辅助函数在哪里。

具体来说`2`，它允许一些抽象的自由。如果由于某种原因你不想使用 bstsearch，你可以将它换成其他函数`__contains__`（你也可以在不同的地方重用代码）

# c# - 如何获取应用程序正在使用的 .NET 框架版本

> ID：15128426
> 
> 赞同：7
> 
> 时间：2013-02-28T05:53:30.103
> 
> 标签：c#

我提到了堆栈溢出问题*[是否有一种简单的方法来检查 .NET Framework 版本？](https://stackoverflow.com/questions/951856)*. 但是那里给出的建议不适用于以下目的。

我们如何识别 C# 控制台应用程序正在使用的 .NET 版本？

**环境：**

*   视觉工作室 2010
*   .NET Framework：3.5（请参见随附的屏幕截图）

**代码**

```
using System;
using System.Globalization;
using Microsoft.Win32;
namespace TESTConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            //.NET version: Approach 1
            RegistryKey installed_versions = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\NET Framework Setup\NDP");
            string[] version_names = installed_versions.GetSubKeyNames();
            double latestFramework = Convert.ToDouble(version_names[version_names.Length - 1].Remove(0, 1), CultureInfo.InvariantCulture);
            int SP = Convert.ToInt32(installed_versions.OpenSubKey(version_names[version_names.Length - 1]).GetValue("SP", 0));
            Console.WriteLine(latestFramework);

            //Approach 2
            string versionval = Environment.Version.ToString();
            Console.WriteLine(versionval);

            //Approach 3
            string systemVersionVal = System.Runtime.InteropServices.RuntimeEnvironment.GetSystemVersion().ToString();
            Console.WriteLine(systemVersionVal);

            Console.ReadLine();
        }
    }
} 
```

**输出**

![在此处输入图像描述](../Images/059d14c700c364f8ec5c70d394b6434a.png)

**版本设置**

![在此处输入图像描述](../Images/703c505ad28a60abcfc9cc427d757bc6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:07:38.747

接近的第 2 和第 3 是`CLR version numbers`.

.NET Framework 2 和 .NET Framework 3.5 正在使用`CLR 2.0`.

而且没有 CLR 3.0 或 3.5。

# java - 框架内部日志进入 system.out (websphere 7.0)

> ID：15128427
> 
> 赞同：0
> 
> 时间：2013-02-28T05:53:34.837
> 
> 标签：java, logging, configuration, log4j, websphere

我`Log4j`在我的应用程序中使用并且应用程序日志记录工作正常，而我的应用程序中的框架正在内部使用`commons-logging`并且日志将要使用，`System.out`但我想将它们重定向到一个单独的文件并且还想启用`DEBUG`级别。

在tomcat上测试了这个并且工作正常。在各自的文件中生成所有日志。但是当我在 WAS7.0 上部署代码时，只`INFO`生成了 SystemOut.log 级别的框架日志。（我`log4j.xml`的很好，因为它在 tomcat 上运行良好）

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:01:52.070

我遇到了同样的问题。我在 Websphere Docs 中找到了答案。

> 注意：跟踪信息（包括 Fine、Finer 和 Finest 级别的事件）只能写入跟踪日志。因此，如果您不启用诊断跟踪，将日志详细级别设置为 Fine、Finer 或 Finest 不会影响记录的数据。

参考：[http ://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.base.doc%2Finfo%2Faes%2Fae%2Frtrb_loglevels.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.base.doc%2Finfo%2Faes%2Fae%2Frtrb_loglevels.html)

在 Java Utility Logging 中，FINE = DEBUG，因此 DEBUG 及以下级别不会出现在 System.out 中，只会出现在 WAS 跟踪日志中。

# asp-classic - ASP内联密码？

> ID：15128428
> 
> 赞同：0
> 
> 时间：2013-02-28T05:53:37.637
> 
> 标签：asp-classic, passwords

我对黑客技术和安全漏洞不是很熟悉，但我开始有点担心我们网站的安全性，它建立在 ASP Classic 之上，运行 IIS 7.5

我们使用 ASP 内联身份验证。在 ASP 文件中，我设置了用户名和密码。我已将某个用户名的访问限制为特定 IP 地址（员工使用的用户名），其他用户名使用手机短信收到的确认密码。

1.  基于 IP 的身份验证安全吗？我听说过通过某些端口输入某个 IP 地址，从而从该某个 IP 地址获得访问权限。
2.  ASP 文件的内容会被黑客入侵和读取吗？
3.  生成 SMS 时，ASP 脚本通过 XMLHTTP ' [https://generate.sms-company-domain.com/?password=](https://generate.sms-company-domain.com/?password=) &acount=&message=Your Confirm password is ' 打开一个链接。有人可以收听被调用的 URL 并轻松获取 SMS 密码吗？
4.  你能想到我们的登录方法有什么漏洞吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:54:24.877

如果 URL 以这种方式暴露，任何人都可以通过 fiddler 等工具读取密码或信息，那么您的第三点看起来像问题。

为了保护您的网站免受黑客攻击，请确保 1）您的网站使用了 SQL 注入技术 2）所有重要数据都通过 post 方法提交。3）需要注意跨站点脚本攻击，例如当有人加载页面时，它会在 cookie 中保存一个加密值，并在代码中读取该 cookie 值，以便我们可以确认该页面不是从其他地方调用的。

# javascript - 我可以将此 JS 代码用于 Google adsense

> ID：15128430
> 
> 赞同：1
> 
> 时间：2013-02-28T05:53:41.527
> 
> 标签：javascript, adsense

我在很多网站上都看到了这种类型的 JS 代码，用于 Google adsense 广告单元。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Adsense Test</title>
</head>
<body>
<script type="text/javascript">
google_ad_type     = 'text';
google_gl          = 'default';
google_kw          = 'vps';
google_kw_type     = 'broad';
google_ad_client   = 'ca-xxxxxxxxxxxxxxxx';
google_ad_output   = 'js';
google_adtest      = 'on';
google_feedback    = 'on';
google_language    = 'en';
google_encoding    = 'utf8';
google_max_num_ads = '20';
function google_ad_request_done(google_ads)
{
var s = '';
var i;
for (i=0;i<google_ads.length;++i)
{
s += '<div class="gad-slot"><pre>';
s += '<a href="'+google_ads[i].url+'" target="_blank"><strong>'+google_ads[i].line1+'</strong></a><br />';
s += google_ads[i].line2+ '<br />' + google_ads[i].line3+'<br />';
s += '<small>' + google_ads[i].visible_url + '</small></pre></div>';
}
document.write(s);
return;
}
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</body>
</html> 
```

我也想在我的网站上使用这种类型的代码。

请告诉我 Google Adsense 政策是否合法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:19:03.730

您不能使用此代码，因为它仅适用于高级发布者

[https://www.google.com/adsense/premium-login](https://www.google.com/adsense/premium-login)

# mysql - Mysql选择多条记录

> ID：15128440
> 
> 赞同：0
> 
> 时间：2013-02-28T05:54:18.003
> 
> 标签：mysql, performance

我有 3 个表`a b c`ab 和 c 都通过一个 id 关联`a.id = b.id = c.id`

我的任务是从 ab 和 c 中选择所有`a.date`超过 6 个月的行并将它们插入到新的数据库中进行归档。

这是我到目前为止所拥有的：

```
insert into dbArchive.a select * from db.a where receivedDate < CURRENT_DATE() - INTERVAL 6 MONTH;` 
```

这似乎从表 a 中选择所有超过 6 个月的条目并将它们插入到归档数据库表 a 中。

从表 b 和 c 中查找具有相同 id 的所有行并将它们插入到归档数据库表 b 和 c 中的最佳和最有效的方法是什么？

我有超过 100 万条超过 6 个月的记录，所以我对性能问题感到厌烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:57:58.370

因此，在玩了一段时间之后，这似乎是我发现实际可行的最佳方法：

```
INSERT INTO archive.b SELECT * FROM db.b WHERE `id` IN( SELECT `id` FROM archive.a ) 
```

我不确定这是否是最有效的方法，但它可以完成工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:28:52.837

像您在此处所做的那样插入后，您可以运行以下命令以同样的方式`dbArchive.a`插入.`dbArchive.b``dbArchive.c`

```
INSERT INTO dbArchive.b(id, etc..) 
  SELECT db.b.id, etc.. 
  FROM dbArchive.a INNER JOIN db.b ON dbArchive.a.id = db.b.id; 
```

# javascript - 使用 $() 构造函数在 JQuery 中创建嵌套元素

> ID：15128441
> 
> 赞同：1
> 
> 时间：2013-02-28T05:54:21.883
> 
> 标签：javascript, jquery, html, dom

我无法让 JQuery 的 $() 元素构造函数正常工作。以下工作正常（使用 expect.js 进行`expect()`调用）：

```
var p = $('<div id="1"><div id="2">middle div</div></div>');
expect(p.children('div')).not.to.be(undefined); //passes
expect(p.children('div').attr('id')).to.equal('2'); //passes 
```

但以下不起作用

```
var p = $('<p id="1"><div id="2">middle div</div></p>');
expect(p.children('div')).not.to.be(undefined); //passes
expect(p.children('div').attr('id')).to.equal('2'); //fails 
```

有关如何使其正常工作的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:58:15.907

HTML 标记错误。您不能将块级元素`<div>`放入`<p>`元素中。这就是为什么 HTML 实际上（我认为这取决于浏览器）最有可能被解析为：

```
<p id="1"></p><div id="2">middle div</div> 
```

或（在铬）：

```
<p id="1"></p><div id="2">middle div</div><p></p> 
```

您可以通过以下方式轻松验证这一点`console.log(p);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:02:33.467

你应该试试这个：

```
expect($('#1').find('div').attr('id').to.equal('2'); 
```

编辑： Niko 和系统是正确的.. 一个 div 不能在 ap 虽然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T05:58:00.380

正在被弹出，`<div>`因为`<div>`在`<p>`.

# workflow - WF 中的规则管理

> ID：15128443
> 
> 赞同：0
> 
> 时间：2013-02-28T05:54:37.560
> 
> 标签：workflow, workflow-foundation-4, workflow-foundation

我是 Microsoft Workflow 的初学者。我用它做了一些小项目，我对此有所了解。

现在我有一个问题：工作流如何管理规则？它有规则引擎吗？我们如何执行规则？

我必须创建另一个管理规则的应用程序吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-14T20:17:12.767

艾哈迈德，根据您对问题的评论，您对编写和执行部分业务规则感兴趣。从 WF 中，您可以得到最好的结果是[https://msdn.microsoft.com/en-us/library/dd797584(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/dd797584(v=vs.110).aspx)，它允许您使用 RuleSet 对象 (WF 3.5) 和 Policy4 活动来执行他们。问题在于，它不是关于如何在任何标准规则建模方法中真正编写业务规则的规则方法，例如[决策表、决策模型和符号、树和流，用于规则或决策](http://www.flexrule.com/archives/modeling-business-rule-and-decision/)。恕我直言，Workflow Foundation (WF) 顾名思义，适用于 Workflow，但绝不适用于业务规则。根本不擅长管理它们。另一种选择是使用任何其他提供[决策即服务](http://www.flexrule.com/archives/decision-as-a-service/)功能，然后您的 WF 活动可以简单地调用这些功能。

# c++ - C++ 从函数定义位于 main 的类中的函数指针向量调用函数

> ID：15128444
> 
> 赞同：16
> 
> 时间：2013-02-28T05:54:37.307
> 
> 标签：c++, class, function, pointers, vector

好吧，我主要有：

```
void somefunction();
int main()
{
    //bla bla bla
    SomeClass myclass = SomeClass();
    void(*pointerfunc)() = somefunction;
    myclass.addThingy(pointerfunc);

    //then later i do
    myclass.actionWithDiffrentOutcomes();
}

void somefunction()
{
    //some code
} 
```

在课堂上：

```
class SomeClass()
{
    public:
        void addThingy(void (*function)());
        void actionWithDiffrentOutcomes();
    private:
        std::vector<void (**)()> vectoroffunctions;
}
SomeClass::addThingy(void (*function)())
{
    vectoroffunctions.push_back(&function);
}
SomeClass::actionWithDiffrentOutcomes()
{
    (*vectoroffunctions[0])();;
} 
```

我对指针有点新意，但我阅读了我的 c++ 书籍，谷歌搜索，分机。这似乎是正确的，可以编译，运行，但是当我调用“actionWithDiffrentOutcomes()”时，我遇到了访问冲突。我不知道该怎么办。这似乎是正确的，但显然有些地方是错误的。那么，当定义在另一个类中时，如何从一个类中调用一个函数呢？

我这样做是因为我无法将每个选项硬编码到 switch 语句中。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-28T05:59:34.673

您的代码几乎是正确的。您的向量错误地持有指向函数的指针，而不仅仅是指向函数的指针。`addThingy`正在将指针的地址添加`function`到 中`vector`，但该指针在下一行超出范围。

更改您的代码如下：

```
//Store pointers to functions, rather than
//pointers to pointers to functions
std::vector<void (*)()> vectoroffunctions;

SomeClass::addThingy(void (*function)())
{
    //Don't take the address of the address:
    vectoroffunctions.push_back(function);
} 
```

此外，其余代码中有很多语法错误，这应该会阻止代码甚至编译。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-28T06:00:20.460

问题在这里：

```
vectoroffunctions.push_back(&function); 
```

您正在添加**局部**变量的地址。一旦你从函数返回，局部变量就会被销毁。向量存储的地址指向一个被破坏的对象，这就是你在运行时出现*“访问冲突”*错误的原因。

要解决此问题，请执行以下操作：

先改这个

```
std::vector<void (**)()> vectoroffunctions; 
```

对此：

```
std::vector<void (*)()> _functions; //vector of function-pointer-type
                                    //I changed the name also! 
```

这实际上与：

```
std::vector<void()> _functions; //vector of function-type 
```

现在这样做：

```
_functions.push_back(function); //add copy! 
```

* * *

为了使其更灵活，您可以将模板与`std::function`as 一起使用：

```
class A
{
    public:
        template<typename Function>
        void add(Function && fn) 
        {  
            _functions.push_back(std::forward<Function>(fn)); 
        }
        void invoke_all()
        {
           for(auto && fn : _functions)
                fn();
        }
    private:
        std::vector<std::function<void()>> _functions;
}; 
```

现在您可以使用它来存储函数和函子：

```
void myfunction() { std::cout << "myfunction" << std::endl ; }

struct myfunctor
{
       void operator()() { std::cout << "myfunctor" << std::endl ; }
};

A a;
a.add(myfunction);   //add function
a.add(myfunctor());  //add functor!
a.invoke_all(); 
```

输出（[在线演示](http://stacked-crooked.com/view?id=c96b4d51c9ac8b90cd4f69be1cd767b6)）：

```
myfunction
myfunctor 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:05:00.793

函数指针更易读`typedefs`：

```
typedef void (*RequiredFunction)(); 
```

然后你可以`addThingy()`这样声明：

```
 void addThingy(RequiredFunction function); 
```

`vectoroffunctions`就像这样：

```
 std::vector<RequiredFunction> vectoroffunctions; 
```

will的定义`addThingy`是：

```
void SomeClass::addThingy(RequiredFunction function)
{
    vectoroffunctions.push_back(function);
} 
```

你`main()`会看起来更像：

```
int main()
{
    SomeClass sc;
    RequiredFunction pointerfunc = somefunction;
    sc.addThingy(pointerfunc);
    sc.actionWithDiffrentOutcomes();
} 
```

犯错的`*`s和s要少得多！`&`

# windows - Windows Azure 目标机在使用模拟器时主动拒绝连接

> ID：15128447
> 
> 赞同：1
> 
> 时间：2013-02-28T05:54:41.817
> 
> 标签：windows, caching, azure, connection

所以就在最近，我的主计算机开始出现 Window Azure 模拟器的问题。当我尝试使用模拟器调试我的解决方案时，它最终会循环尝试连接。

这是我在输出窗口中得到的：

```
> iisexpress.exe Warning: 0 : WARNING: <SimpleSendReceiveModule> d8c9fa85-ded3-48ad-94a3-ec31e2123bb3:Request - 1, result - Status=ChannelOpenFailed[System.Net.Sockets.SocketException (0x80004005): No connection could be made because the target machine actively refused it 127.255.0.0:20004
  at Microsoft.ApplicationServer.Caching.AsyncResultNoResult.EndInvoke()
  at Microsoft.ApplicationServer.Caching.AsyncResult`1.EndInvoke()
  at Microsoft.ApplicationServer.Caching.TcpClientChannelFactory.EndConnect(IAsyncResult asyncResult)
  at 

Microsoft.ApplicationServer.Caching.TcpClientChannel.ConnectionCallback(IAsyncResult result)] for end point [net.tcp://127.255.0.0:20004]
Microsoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting
Microsoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready
Microsoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting
Microsoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready
Microsoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting
Microsoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready
Microsoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting
Microsoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready
iisexpress.exe Warning: 0 : WARNING: <DistributedCache.SocketClientChannel.1> Request 1 to host net.tcp://127.255.0.0:20004/ failed Status=ChannelOpenFailed[System.Net.Sockets.SocketException (0x80004005): No connection could be made because the target machine actively refused it 127.255.0.0:20004
   at Microsoft.ApplicationServer.Caching.AsyncResultNoResult.EndInvoke()
   at Microsoft.ApplicationServer.Caching.AsyncResult`1.EndInvoke()
   at Microsoft.ApplicationServer.Caching.TcpClientChannelFactory.EndConnect(IAsyncResult asyncResult)
   at Microsoft.ApplicationServer.Caching.TcpClientChannel.ConnectionCallback(IAsyncResult result)]
iisexpress.exe Warning: 0 : WARNING: <SimpleSendReceiveModule> d8c9fa85-ded3-48ad-94a3-ec31e2123bb3:Request - 1, result - Status=ChannelOpenFailed[System.Net.Sockets.SocketException (0x80004005): No connection could be made because the target machine actively refused it 127.255.0.0:20004 
```

通过研究，我发现`127.255.X.X`ip 是模拟器从其内部负载均衡器中生成的 ip。我不明白为什么我的机器决定它不想接受这个连接。我已经关闭了所有防火墙，重新安装了 Visual Studio，完全重新安装了 Windows azure，但仍然没有运气。它绝对不是基于代码的，因为我的同事和我的辅助机器没有问题。但是，使用我的第二台机器并不可取，所以我想让这台机器正常工作，我想找到一个不涉及完全格式化我的机器的解决方案，这与我目前的知识有关。

当前运行 2012 年 10 月发布的 azure、visual studio 2012 和 .net 4.5。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T17:44:48.440

我在 Windows 8 下使用 Azure SDK 2.0 时遇到了类似的问题，而在 Windows 7 下使用 Azure SDK 1.8 时我没有问题。和你一样，我最初想到的是与网络相关的问题。然后我尝试禁用缓存，并注意到我的云项目中的其他角色正确地注意到缓存服务不可用，并出现另一个错误消息。

根据我的经验，这个问题很可能与您的区域设置有关，特别是与指定 Long Time 格式的方式有关。我从这个[SO question](https://stackoverflow.com/questions/15281333/azure-datacache-problems-with-windows-azure-emulator-but-no-error-generated-app)发现缓存模拟器[`logman.exe`](http://technet.microsoft.com/en-us/library/bb490956.aspx)用于记录目的，它使用区域设置中的 Long Time 格式将持续时间传递给`cnf`参数（例如`HH.mm.ss`在我的 Windows 8 机器中使用意大利语设置）——但实际上`cnf`需要持续时间完全符合格式`HH:mm:ss`（用冒号而不是点）。在我更改了长时间格式后，缓存开始在计算机模拟器中正常工作。

您还可以考虑以下解决方案：

*   [按照MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/fb4b3505-aca9-44f3-843b-dc98de83a9d9/)此线程中的建议，重新启动您的计算机；
*   [如此SO thread](https://stackoverflow.com/questions/11519783/windows-azure-cache-preview)中所建议的，使用两个实例作为缓存。

# wso2 - JMX 数据代理支持带有 WSO2 BAM 的远程处理-jmx 协议

> ID：15128448
> 
> 赞同：1
> 
> 时间：2013-02-28T05:54:43.357
> 
> 标签：wso2, wso2carbon, wso2bam

我试图使用 JMX 数据代理监视 WS02 BAM 2.2.0 中的 jboss EAP 6.0/jboss AS 7 MBean。我按照[教程](http://magnus-k-karlsson.blogspot.in/2013/01/how-to-remote-connect-jconsole-to-jboss.html)在 jconsole 中远程公开了 JBOSS MBean。

在 WSO2 BAM 中添加 JMX 服务器配置文件时，我输入 URL：

```
service:jmx:remoting-jmx://{host_name}:{port}] 
```

它说不支持协议。我怀疑不支持协议remoting-jmx，在以前的情况下，我看到支持rmi 协议。如何将 Remote JBOSS AS 7 MBean 导入 WSO2 BAM 2.2.0 ？

# sql - SQL查询从两个表中获取匹配数据的计数

> ID：15128452
> 
> 赞同：0
> 
> 时间：2013-02-28T05:54:56.777
> 
> 标签：sql, ms-access-2007

我有两张桌子：

Travellers_Report

```
Name    Country Place_of_visit  Return_date
A   United States   Los Angeles 2/27/2013
B   United Arab Emirates    DUBAI   2/21/2013
C   Puerto Rico San Juan    2/28/2013
D   United States   Los Angeles 2/27/2013
E   United States   Boston  2/27/2013
F   Malaysia    Kulalampur  3/1/2013
G   United Arab Emirates    DUBAI   2/15/2013
H   Malaysia    Kulalampur  3/15/2013
I   United States   Los Angeles 2/27/2013 
```

公司_存在

```
Country City
United States   Los Angeles
United Arab Emirates    DUBAI
United States   Boston 
```

我需要将“Travellers_Report”表的“Place_of_visit”字段与“Company_presence”表的“City 字段”进行比较并获取计数。

预期输出为：

```
Country               Place_of_visit    Count
United States         Los Angeles       3
United Arab Emirates  DUBAI             2
United States         Boston            1 
```

截至目前，我在下面有两个查询，但我不知道如何将它们组合起来以获得预期的结果。

```
sqlstr = "SELECT * " & _
  "FROM Travellers_report " & _
  "WHERE Travellers_report.Return_Date >= #" & DOI & "# AND    
Travellers_report.Return_Date <=#" & tempd & "#;" 
```

和

```
SELECT Travellers_report.Place_of_Visit, count(1) FROM Travellers_report 
GROUP BY Place_of_Visit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:58:45.217

```
SELECT  a.Country, a.City, COUNT(b.Place_of_visit) totalCount
FROM    Company_Presence a
        LEFT JOIN Travellers_Report b
            ON  a.Country = b.Country AND
                a.City = b.Place_of_visit AND
                b.return_DATE BETWEEN #date1_HERE# AND #date2_HERE#
GROUP   BY a.Country, a.City 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:06:20.977

@kiran 试试这个...
`SELECT c.country,c.city,count(*) from company_presence as c,Travellers_Report as t where t.city=c.city group by c.city;`

# ios - 在 iPhone 上切换耳机和扬声器

> ID：15128455
> 
> 赞同：1
> 
> 时间：2013-02-28T05:55:03.623
> 
> 标签：ios, audio, avfoundation, avplayer, audiotoolbox

我正在尝试为 iPhone 应用程序输出设置音频路由。我正在使用路由更改侦听器来检测音频路由何时更改。侦听器会检测到变化，例如插入和拔出耳机的时间。默认情况下，扬声器播放音频，然后我插入耳机，音频通过耳机正常传输。从那里开始，任何更改都不会发生，即使路由更改侦听器正在检测它们。

任何帮助将非常感激。

```
NSError *sessionError = nil;
[[AVAudioSession sharedInstance] setDelegate:self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord
                                       error:&sessionError];
UInt32 sessionCategory = kAudioSessionCategory_PlayAndRecord;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory),
                        &sessionCategory);
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,
                        sizeof(sessionCategory), &sessionCategory);
AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange,
                            RouteChangeListener, (__bridge void *)(self));
AudioSessionSetActive(YES); 
```

回调监听器：

```
void RouteChangeListener(
                         void                      *inUserData,
                         AudioSessionPropertyID    inPropertyID,
                         UInt32                    inPropertyValueSize,
                         const void                *inPropertyValue)
{
    if (inPropertyID == kAudioSessionProperty_AudioRouteChange) {
        CFStringRef newRoute;
        UInt32 size = sizeof(CFStringRef);
        AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &size, &newRoute);
        if (newRoute) {
            CFShow(newRoute);
            if (CFStringCompare(newRoute, CFSTR("SpeakerAndMicrophone"),
                                (UInt32)NULL) == kCFCompareEqualTo) {
                UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
                AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,
                                         sizeof(audioRouteOverride), &audioRouteOverride);
            } else if (CFStringCompare(newRoute, CFSTR("HeadphonesAndMicrophone"),
                                       (UInt32)NULL) == kCFCompareEqualTo) {
                UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_None;
                AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,
                                         sizeof(audioRouteOverride), &audioRouteOverride);
                    [[[AVAudioSession sharedInstance] player] play];
            }
        }
    }
} 
```

# backbone.js - 我需要帮助理解backbone.js

> ID：15128457
> 
> 赞同：0
> 
> 时间：2013-02-28T05:55:03.287
> 
> 标签：backbone.js

我已经尝试了一段时间来了解backbone.js 的目的是什么，但我似乎无法理解它。

使用backbone.js 来渲染视图而不是像Laravel 或Symfony 这样的PHP 框架有什么好处？

它是否意味着与服务器端框架结合使用，在服务器从数据库发送它需要的所有内容的情况下，然后用户可以在不加载的情况下有效地更改数据库条目，完成后，骨干发送更新的数据到服务器？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:17:19.003

Backbone 是一个用于开发丰富的单一网页应用程序的框架。它为您提供了一些简单的工具来保持您的 Javascript 代码有序。Backbone 让您决定如何最好地使用此工具来制作您想要的东西。

当您使用您提到的框架时，每次用户从一个页面移动到另一个页面时，他都必须重新加载整个页面。使用 Backbone，用户与服务器交换的唯一内容是 JSON 对象来显示、创建或编辑您的信息。

正如您提到的要能够使用 Backbone，您将需要一个在后面运行的 API 服务器。如果您需要使用服务器，则服务器是负责管理数据库的服务器。正如我之前提到的，JSON 对象从服务器发送到服务器以编辑数据库中的信息。

我不是 PHP 专家，但我相信如果您可以使用这些 PHP 框架创建服务器 API，那么您可以使用它们。我通常使用 Ruby on Rails 作为我的后端服务器。但是您可以使用任何带有 RESTful API 的框架。

如果您想了解更多信息，可以查看以下几个链接：

*   [开发 Backbone.js 应用程序](http://addyosmani.github.com/backbone-fundamentals/)
*   [骨干教程](http://backbonetutorials.com/)
*   [骨干主站](http://backbonejs.org/)
*   [NetTuts 骨干文章](http://net.tutsplus.com/tag/backbone/)

希望这可以帮助！

# iphone - UILabel 在 iPhone 应用程序中没有显示非常大的文本

> ID：15128459
> 
> 赞同：1
> 
> 时间：2013-02-28T05:55:17.013
> 
> 标签：iphone, ios, objective-c

![在此处输入图像描述](../Images/800929936770d35fc78e8b7186548f0a.png)我正在创建一个 UILabel 用于在 iphone 应用程序中显示大约 16,000 行的文本。它在 ios 6 之前运行良好，但现在在 ios 6.0 或更高版本中无法正确显示。

标签中没有显示任何内容。它之前工作正常并且不知道其中出了什么问题。我在 Scrollview 上添加了 UILabel。标签的代码如下所示：=

```
infoUILabel.text = stringForLargeDescrition;
CGSize constraintSize;
    constraintSize.width = 285.0f;
    constraintSize.height = MAXFLOAT;

stringSizeforDescription = [strignForLabel sizeWithFont: [UIFont boldSystemFontOfSize: 5] constrainedToSize: constraintSize lineBreakMode: UILineBreakModeWordWrap];
        infoUILabel.layer.cornerRadius = 10;    
        infoUILabel.layer.masksToBounds = YES;
        [infoUILabel setFrame:CGRectMake(20,135, 285, stringSizeforDescription.height)];
        CGRect frame = infoUILabel.frame;
        frame.size = [infoUILabel sizeThatFits:CGSizeMake(285, stringSizeforDescription.height)];
        infoUILabel.frame = frame;
        [infoUILabel alignTop];//this function will align the text to top of label
         backScrollView.contentSize = CGSizeMake(320, 230 + infoUILabel.frame.size.height);
     backScrollView.clipsToBounds = YES; 
```

请建议，提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:50:30.797

使用 textview 显示动态文本解决了我的问题，代码如下：

```
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 135, 285, 200)];
    textView.text = @"Very large text";
    textView.scrollEnabled = NO;
    textView.delegate = self;
    textView.font = [UIFont fontWithName:@"Helvetica" size:12.0f];
    textView.textColor = [UIColor darkGrayColor];
    textView.layer.cornerRadius = 10;
    textView.layer.masksToBounds = YES;
    textView.backgroundColor= [UIColor whiteColor];
    CGRect rect      = textView.frame;

 CGSize constraintSize;
constraintSize.width = 285.0f;
constraintSize.height = MAXFLOAT;
stringSizeforDescription = [strignForLabel sizeWithFont: [UIFont boldSystemFontOfSize: 12] constrainedToSize: constraintSize lineBreakMode: UILineBreakModeWordWrap];
    rect.size.height = stringSizeforDescription.height + 20;//20 is some extra margin value 
    textView.frame   = rect;

[scrollView addSubview:textView];
[textView sizeToFit]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:59:56.297

您错过了要设置的 numberOfLines 属性。

添加 ：

```
infoUILabel.numberOfLines = 0; 
```

它应该工作。还要从您的代码中删除这两行：

```
frame.size = [infoUILabel sizeThatFits:CGSizeMake(285, stringSizeforDescription.height)];
infoUILabel.frame = frame; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:19:07.097

试试这个对我有用：

```
CGFloat height = 44.0;

CGSize labelSize = CGSizeMake(200.0, 20.0);

NSString *strTemp;

NSString *sectionData = @"Lengthy text.......Lengthy text.......Lengthy text.......";

labelSize = [sectionData sizeWithFont: [UIFont boldSystemFontOfSize:12.0] constrainedToSize: CGSizeMake(labelSize.width, 1000) lineBreakMode: UILineBreakModeWordWrap];

height =  (labelSize.height+40);

CGRect rect = lbl.frame;

rect.size.height = height;

lbl.frame = rect; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T06:05:53.083

添加

```
infoLabel.numberOfLines=0; 
```

确保 MAXFLOAT 的值大于预期值

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-28T07:32:17.187

您能否在设置 UILabel 的所有属性后，尝试在最后将文本设置为 UILabel。

# javascript - jQuery 事件绑定和处理

> ID：15128463
> 
> 赞同：5
> 
> 时间：2013-02-28T05:55:35.860
> 
> 标签：javascript, jquery, javascript-events

我见过很多这样的 jQuery 代码，不用说我不喜欢它：

```
<div id="myDiv">
    <a class="clickable" href="#">Click Me</a>
    <a class="clickable" href="#">Click Me</a>
    <a class="clickable" href="#">Click Me</a>
    <a class="clickable" href="#">Click Me</a>
</div>

<script>
    $(document).ready(function(){
        $('clickable').click(function(){
            // Do some stuff...
        });
    });
</script> 
```

我意识到人们这样做是因为上述事件绑定和处理需要页面上可用的 html 结构，但这会导致在整个网站的视图中混合呈现、逻辑和配置。此外，使用几乎任何调试器都很难调试逻辑。

所以，我已经开始像这样在一个单独的 .js 文件上编码[（这里是小提琴）](http://jsfiddle.net/8pE6z/1/)：

```
// BEGIN: Event Handlers
    var onLoad = function(){
        $('.clickable').data('clicked', false);
    };
    var onMyDivClick = function(){
        var clicked = $(this).data('clicked');
        if (clicked) {
            $(this).trigger('myCustomEvent');
        } else {
            alert('you clicked me');
            $(this).data('clicked', true);
        }
    };
    var onMyCustomEvent = function(){
        $(this).css('color', 'dimGray');
        alert('please don\'t click me again');
    };
// END: Event Handlers

// BEGIN: Event Binding
    $(window).on('load', onLoad);
    $(document).on('click', '.clickable', onMyDivClick);
    $(document).on('myCustomEvent', '.clickable', onMyCustomEvent);
// END: Event Binding 
```

现在，我不需要关心页面上的结构。我不需要将所有内容都包装在里面`$(document).ready(function(){});`而且我不需要关心结构是否要加载 ajax。

**问题 1** 这种方法有什么缺点吗？到目前为止，我还没有找到任何东西。但在重构​​我们网站上的大部分代码之前，我想听听可能的警告。

**问题 2** 如何使用最新的 jQuery 功能进一步采用这种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:11:18.270

我知道这种方法有一个缺点。它写在 中的**事件性能** 部分[`.on()`](http://api.jquery.com/on/)。

> 在文档树顶部附近附加许多委托事件处理程序会降低性能。每次事件发生时，jQuery 必须将该类型的所有附加事件的所有选择器与从事件目标到文档顶部的路径中的每个元素进行比较。为了获得最佳性能，请将委托事件附加到尽可能靠近目标元素的文档位置。避免过度使用**document**或**document.body**来处理大型文档的委托事件。

因此，在将所有事件绑定到 之后`document`，它的性能会更差。

并且在**附加说明**中，有些东西不能用这种方法工作，例如`load`,`scroll`和`error`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:04:20.057

查看框架，他们已经为您完成了样板工作。到目前为止，我只使用了淘汰赛，但我会链接到其他一些。

*   淘汰赛非常适合数据/事件绑定 - [http://knockoutjs.com/](http://knockoutjs.com/)
*   骨干网 - [http://backbonejs.org/](http://backbonejs.org/)
*   余烬 js - [http://emberjs.com/](http://emberjs.com/)
*   角度 js - [http://angularjs.org/](http://angularjs.org/)

淘汰赛中的“Hello World”：

[http://knockoutjs.com/examples/helloWorld.html](http://knockoutjs.com/examples/helloWorld.html)

```
<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>
<h2>Hello, <span data-bind="text: fullName"> </span>!</h2>

// Here's my data model
var ViewModel = function(first, last) {
    this.firstName = ko.observable(first);
    this.lastName = ko.observable(last);
    this.fullName = ko.computed(function() {
        // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
        return this.firstName() + " " + this.lastName();
    }, this);
};

ko.applyBindings(new ViewModel("Planet", "Earth")); // This makes Knockout get to work 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:31:57.467

这对我来说是对工程的尖叫。为了避免 document.ready 中的代码，并避免视图中的视图逻辑，您引入了更多的复杂性。

您的方法直接绑定到文档，然后检查 dom 中的点击内容。然后，您为单击的内容触发第二个事件，这就是您的逻辑所在的位置。

这对于一两个元素来说很好。这不是您的典型应用程序。当你有 5 个元素都需要做不同的事情时会发生什么？10个怎么样？也许15？

您的“简单”事件处理程序将成为一个不错的大开关（或更糟糕的是，ifs 和嵌套 ifs）。突然添加一个新的处理程序并不是那么容易。也不会改变现有的事件。

你最好寻找一个为你提供你正在寻找的分离的框架。试图用类似这样的东西来“帮助”组织你的代码会回来咬你。代码中的大多数复杂性源于工程师，使其“简单”、“更好”和“面向未来”。

这不是要打击你或你的想法。你有正确的想法：责任分离是一件好事。我只是不认为你的方法是最好的。

正如另一个帖子所回答的那样，角度和主干以及余烬（以及更多）提供了实现您想要的方法。另外，您不必维护您选择的任何库:)

# php - 无法使用 PDO 连接到 mySQL 服务器

> ID：15128468
> 
> 赞同：0
> 
> 时间：2013-02-28T05:56:06.483
> 
> 标签：php, mysql, pdo, mysql-connect

我是 mySQL 的新手，而我使用的正在运行的代码显然已经过时了，所以我切换到了 PDO。我试图尽可能准确地将我的编码从旧样式转移到 PDO，但现在我无法连接，我确定我只是在做一些愚蠢的事情来搞砸它。

这是我的旧代码有效：

```
//insert.php
mysql_connect("localhost","root","root");//database connection
mysql_select_db("Menu_Items");

$name = $_POST['food'];
$order = "INSERT INTO foods
            (name)
            VALUES
            ('$name')";
//inserting data order
//declare in the order variable
$result = mysql_query($order);
if($result){
    echo("<br>Input data is succeed");
}else{
    echo("<br>Input data is fail");
} 
```

这是我的新 PDO 代码，它不起作用：

```
$dbc    = "mysql:host=localhost;dbname=Menu_Items";
$user   = "root";
$pass   = "root";

$pdo    = new pdo($dbc, $user, $pass);
$name   = $_POST['food'];
$insert     = "INSERT INTO foods (name) VALUES ('$name')";

$result = pdo -> query($insert);
if($result){
    echo("<br>Input data is succeed");
}else{
    echo("<br>Input data is fail");
} 
```

问题出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:00:07.190

尝试一些错误处理。例如：

```
<?php
try {
    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
    foreach($dbh->query('SELECT * from FOO') as $row) {
        print_r($row);
    }
    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}
?> 
```

如果您遇到连接错误，至少您可以看到错误是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:06:49.243

使用 PDO 的主要原因之一是它具有帮助您避免 SQL 注入的工具。所以这：

```
$insert = "INSERT INTO foods (name) VALUES ('$name')"; 
```

是一个很大的禁忌。至少确保您使用的是参数化查询：

```
$insert = $pdo->prepare("INSERT INTO foods (name) VALUES (:name)");
$insert->bindParam(":name", $name);
$insert->execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:10:54.210

所以正如我在评论中提到的，

```
pdo -> query($insert); 
```

应该

```
$pdo->query($insert); 
```

# matlab - Matlab %#ok 注释标志

> ID：15128478
> 
> 赞同：1
> 
> 时间：2013-02-28T05:57:16.360
> 
> 标签：matlab, flags

Matlab 代码中会定期出现许多注释标志，例如

```
%#ok<SAGROW>
%#ok<INUSD>
%#ok<INUSL> 
```

这些是什么意思？更重要的是，我在哪里可以找到所有这些的列表？

# ios - 是否可以以编程方式在 ios 的 textview 中为文本的选定部分赋予颜色

> ID：15128480
> 
> 赞同：1
> 
> 时间：2013-02-28T05:57:24.563
> 
> 标签：ios, highlighting, selectedtext

我想更改 textview 中选定的文本部分或突出显示 textView 中选定的文本。是否可以通过 textView 的任何委托方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:07:56.957

实现`textViewDidChangeSelection:`选择更改时通知的委托方法。然后使用该`UITextView selectedRange`属性来获取选定的范围。

使用该`UITextView attributedText`属性获取文本视图的属性文本。从中创造`NSMutableAttributedText`。然后将所需的颜色属性应用于适当的范围。最后，将更新后的属性文本应用到文本视图。

所有这些都需要 iOS 6.0 或更高版本。

# php - 修复joomla规范问题的php代码

> ID：15128484
> 
> 赞同：0
> 
> 时间：2013-02-28T05:57:39.853
> 
> 标签：php, function, if-statement, joomla, canonical-link

众所周知，joomla 在规范问题方面存在一些相当大的问题，并不是真正解决这个问题的方法......我编写了一个代码来检查 url 并添加 rel= 规范链接......

代码是这样的：

```
<?php 
$canonicalLink =  "http://".$_SERVER['HTTP_HOST'].$_SERVER["REQUEST_URI"]; 
if ($canonicalLink == 'http://domain.edu.au/index.php')
echo '<link rel="canonical" href="http://domain.edu.au/">';
if ($canonicalLink == 'http://domain.edu.au/?view=featured')
echo '<link rel="canonical" href="http://domain.edu.au/">';
?> 
```

这行得通，但我的问题是：

我的网站上有太多页面，这个 if 语句会非常庞大

有没有办法将其转换为函数？那将从列表中读取网址？

就像是：

```
list:

http://domain.edu.au/?view=featured | http://domain.edu.au/
http://domain.edu.au/?view=contact | http://domain.edu.au/contact-us
http://domain.edu.au/?view=about | http://domain.edu.au/about-us
http://domain.edu.au/category-a/subcategory-a | http://domain.edu.au/category-main/subcategory-main 
```

功能：

```
function (a | b){
if (a)
echo 'b'
} 
```

并使其在加载时的所有列表中循环运行...

这有意义吗？还是我完全离开这里？

干杯，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:02:29.030

你可以这样做：

```
//populate $list with the end of the actual uri as the key
//and what you want the actual uri to be as the value
$list = array(
  '/index.php'=>'',
  '/?view=featured'=>'',
  '/?view=contact'=>'contact-us',
  '/?view=about'=>'about-us',
  '/category-a/subcategory-a'=>'category-main/subcategory-main'
);

echo '<link rel="canonical" href="http://domain.edu.au/'.$list[$_SERVER["REQUEST_URI"]].'">'; 
```

这使得你不必做任何`if`逻辑。它成为一个直接查找值。

# perl - MediaWiki API 部分名称编码

> ID：15128485
> 
> 赞同：2
> 
> 时间：2013-02-28T05:57:52.770
> 
> 标签：perl, encoding, character-encoding, mediawiki, url-encoding

对于**[[Test#?]]**，我从一点 MediaWiki API 中得到“ **Test#.3F ”。**`action=parse`这种编码是什么？如何使用[Perl](http://www.perl.org)的[CPAN](https://metacpan.org)将其转换为人类可读的格式？

[URI::Encode](https://metacpan.org/module/URI%3a%3aEncode)适用于百分比解码，但不适用于部分名称之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:57:22.353

它是 UTF-8 百分比编码，但用下划线`.`代替, 和空格；`%`此外，多个连续的空格被折叠，并被`:`保留（不编码为`.3A`）。

处理它的确切代码是[Parser::guessSectionNameFromWikiText()](https://github.com/wikimedia/mediawiki-core/blob/master/includes/parser/Parser.php#L5633)，但是如果您不想深入研究大量代码，请在[anchorencode中检查较旧的MediaWiki版本（兼容，除了一些边缘情况）中更简单的实现()](http://phpxref.com/xref/mediawiki/includes/CoreParserFunctions.php.source.html#l174) :

```
str_replace( '%', '.', str_replace('+', '_', urlencode( $text ) ) ); 
```

# drupal - Drupal 7 使用子网格创建网格的视图

> ID：15128486
> 
> 赞同：0
> 
> 时间：2013-02-28T05:57:55.047
> 
> 标签：drupal, views

我想创建这样的 Drupal 7 视图：

```
---------------------------------------------------------------------------
| [ ]  |  Category Name                                                   |
---------------------------------------------------------------------------
| [+]  |  Computers & Software                                            |
---------------------------------------------------------------------------
| [+]  |  Computers & Hardware                                            |
---------------------------------------------------------------------------
| [-]  |  Laptops                                                         |
---------------------------------------------------------------------------
       |  Company Name   |  Qty                                           |
       --------------------------------------------------------------------
       |  HP             |  1000                                          |
       --------------------------------------------------------------------
       |  DELL           |  2000                                          |
--------------------------------------------------------------------------- 
```

它应该像上面那样。当单击带有 [+] 符号的类别时，它将折叠并显示带有其他数据（如公司名称、数量等）的子网格...

在带有视图模块的 Drupal 7 中是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:43:31.990

我认为您需要“视图字段集”模块 [http://drupal.org/project/views_fieldsets](http://drupal.org/project/views_fieldsets)

我无法获得视图字段集的教程，但我们将它用于我们的项目以应对类似情况。

但这与您需要的相似

看到这篇文章“ [http://drupal.org/node/1169632](http://drupal.org/node/1169632) ”

# php - 链接到用户的私人文件夹

> ID：15128489
> 
> 赞同：0
> 
> 时间：2013-02-28T05:58:09.980
> 
> 标签：php, mysql, html

我的主页上有 2 个文件夹：公共和私人。我希望 Private 文件夹只能由该特定用户查看。我应该如何将用户 ID 与私人文件夹内容相关联，以便用户在登录时只能查看他/她的私人文件夹？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:02:37.937

最好的方法是使用一种代理文件来检查用户是否有权访问该文件。

# tsql - 如何从存储过程返回临时表以在 C# 数据读取器中使用？

> ID：15128493
> 
> 赞同：3
> 
> 时间：2013-02-28T05:58:30.180
> 
> 标签：tsql, stored-procedures, sqldatareader

我有以下存储过程（T-SQL），我想`command.ExecuteReader`在 C# 代码中使用它来调用它，以便我可以循环遍历引发的任何错误**或**直接从 SQL 调用它。

但是，我不确定如何返回临时表 - 我只是得到一个“0”？

```
CREATE PROCEDURE validate
AS
BEGIN
DECLARE @ValidationResults TABLE
  ROWNUM int,
  ATP varchar(max),
  ATD varchar(max),
  ERROR varchar(max)
  )
  SET NOCOUNT ON;

  INSERT INTO @ValidationResults
  SELECT ROWNUM, ATP, ATD, 'ATP must be two characters'
  FROM cb with (TABLOCKX)
  WHERE LEN(ATP) <> 2

  RETURN SELECT * FROM @ValidationResults   
END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:03:57.983

不要使用 return，只需从中选择行`@ValidationResults`。[本文](http://www.codeproject.com/Articles/19010/Executing-Stored-Procedure-with-Data-Reader)可能会帮助您从存储过程中获取数据。

[这](http://www.akadia.com/services/dotnet_data_reader.html)是另一篇有用的文章

# php - 检查数组中包含重复值的有效方法是什么？

> ID：15128495
> 
> 赞同：1
> 
> 时间：2013-02-28T05:58:31.367
> 
> 标签：php, arrays

检查数组是否包含重复值的有效方法是什么？我有一个包含电子邮件的数组。我想知道是否有任何电子邮件 ID 重复。

**更新：**我对重复值不感兴趣。我想知道“它包含重复值”还是“它不包含重复值”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:01:13.720

试试这个：

```
if (count(array_unique($arr)) == count($arr)) 
  echo "Array does not contain duplicate elements"; 
else
  echo "Array contains duplicate elements"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:01:39.173

一种应该非常有效的简单方法是使数组唯一，然后将其与原始数组进行比较以查看是否已删除任何元素：

```
count(array_unique($emails)) == count($emails) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:04:55.477

这就是我从数组中提取重复值的方式

```
 <?php
function array_not_unique( $a = array() )
{
  return array_diff_key( $a , array_unique( $a ) );
}
?> 
```

它返回重复的条目。这是最简单有效的方法。

当你编辑你的帖子时，最有效的方法是只知道它是否有重复，这是大多数人建议的方式。

count(array_unique($array)) == count($array)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T06:14:43.007

如果有人想要不区分大小写的数组唯一值，请在下面尝试

```
function array_iunique($array) {

return array_intersect_key($array,array_unique(
                array_map('strtolower',$array) ) );
} 
```

* * *

```
$array[1] = "test@google.com";
$array[2] = "test@hotmail.com";
$array[3] = "TEST@google.com";
$array[4] = "Test@hotmail.com";

//print_r(array_unique($array));

print_r(array_iunique($array)); 
```

// 结果数组 ( [1] => test@google.com [2] => test@hotmail.com )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:04:05.963

您应该使用`array_count_values()`方法来查找元素的出现次数。这是一种简单有效的方法。

```
$array = array('a', 'o', 'p', 'b', 'a', 'p', 'k', 'k', 'k');

print_r(array_count_values($array)); 
```

输出

```
Array
(
   [a] => 2
   [o] => 1
   [p] => 2
   etc...
) 
```

# java - Servlet中的abour Servlet生命周期方法

> ID：15128498
> 
> 赞同：0
> 
> 时间：2013-02-28T05:58:40.293
> 
> 标签：java, jakarta-ee

当我们覆盖`init(ServletConfig)`Servlet中的方法时，我们需要调用`super.init(config)`，但是为什么在这种情况下需要调用，为什么在覆盖默认方法时不需要调用`init()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:07:38.870

```
code in GenericServlet 

 public void init(ServletConfig config) throws ServletException {
      this.config = config;
      this.init();
 }

 ServletConfig intialization takes place in init(ServletConfig config) 
```

如果您不调用 super.init(config) 则子类 init(config) 方法将执行
，然后 ServletConfig 对象初始化将不会发生。

如果重写 init()，通常会调用超类 init(config)，然后调用子类 init() 作为辅助方法。在这种情况下，将发生 ServltConfig 对象初始化

# magento - 如何在购物车中找到特定的产品数量？

> ID：15128502
> 
> 赞同：2
> 
> 时间：2013-02-28T05:58:52.240
> 
> 标签：magento

我有一个产品的产品 ID。如果它已经在购物车中（如果它存在用于登录用户），我想从购物车中获取该产品的数量。

如果用户（注册）用户将产品添加到购物车离开站点。然后在某个时候他登录回站点并将相同的产品添加到购物车。此时我想检查购物车中是否有相同的产品以及什么是产品的数量？

```
$cart_m = Mage::getModel('checkout/cart')->getQuote();

foreach ($cart_m->getAllItems() as $item)
{
    $cart_productId = $item->getProduct()->getId();
    $productPrice = $item->getProduct()->getPrice();
    $productQuantity = $item->getProduct()->getQty();//I want to get specific product quantity,If I have product ID

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:13:08.547

```
$cart_m = Mage::getModel('checkout/cart')->getQuote();
$yourProductId = 10;
$needQty = 0; 
foreach ($cart_m->getAllItems() as $item)
{

    $cart_productId = $item->getProduct()->getId();
    $productPrice = $item->getProduct()->getPrice();
    $productQuantity = $item->getProduct()->getQty();

    if ($yourProductId == $cart_productId){
        $needQty = $productQuantity;
        break;
    }
}

if (!$needQty){
    echo "This Product Not In Cart";
}else{
    echo $needQty;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-23T13:04:01.780

您可以在不循环所有项目的情况下获取产品数量：

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$_item = $quote->getItemByProduct($product);
$qty = $_item->getQty(); 
```

# http - REST 存储的正确返回代码

> ID：15128507
> 
> 赞同：2
> 
> 时间：2013-02-28T05:59:05.857
> 
> 标签：http, rest, protocols, http-method

我正在尝试找出 REST 商店的正确响应。我很清楚相关的 RFC 2616；相关部分是[9 方法定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)

现在...

简短的问题：

如果我使用 POST 或 PUT 创建资源，并且不想返回当前资源数据，我应该使用什么代码？204可以吗？（ 我对此表示怀疑）

我在这里概述了如何在[JsonRestStore](https://github.com/mercmobily/JsonRestStores)中实现这些方法：[https ://github.com/mercmobily/JsonRestStores/blob/master/jsonrest.md](https://github.com/mercmobily/JsonRestStores/blob/master/jsonrest.md)

好的，这是更长的版本。

起点：

*   PUT CREATES 或 OVERWRITES 资源（取决于资源是否已经存在）
*   POST CREATES 或 MODIFIES 资源（取决于传递的 ID [到“附加到它”，即“POST 传递特定 ID”]，或未传递 [到创建]）
*   商店可能会返回服务器上的资源，或者不返回任何内容

这就是商店经常使用的方式。是的，您可以将资源 ID 传递给 POST——这听起来可能很奇怪，但这样做已经完成了。

# 问题一：PUTting a NEW 资源而不返回内容的情况

RFC 说：

> 如果创建了新资源，源服务器必须通过 201 (Created) 响应通知用户代理。如果修改了现有资源，则应发送 200（OK）或 204（No Content）响应代码以指示请求成功完成。

*   案例 1：PUT 正在修改现有资源：
    *   200（OK）如果你想返回当前资源
    *   204（无内容）如果您想说“OK”而不返回任何内容。
*   案例 2：正在创建新资源
    *   201（已创建）如果要返回当前资源
    *   ？？？如果您不想退货

那么，如果您创建了一个新资源，但不想将其当前状态返回给服务器呢？可以返回带有 EMPTY 内容的 201 吗？这不是204的东西吗？但是我不能这样做，因为（根据 RFC）我*必须*返回 201。

# 问题2：POST一个NEW资源，不返回内容的情况

关于 POST，RFC 不得不说：

> POST 方法执行的操作可能不会产生可由 URI 标识的资源。在这种情况下，200（正常）或 204（无内容）是适当的响应状态，具体取决于响应是否包含描述结果的实体。
> 
> 如果在源服务器上创建了资源，则响应应该是 201（已创建）并包含描述请求状态并引用新资源的实体和 Location 标头（参见第 14.30 节）。

如果我接受第二部分实际上并不适用于 REST 存储，因为 POST 总是会导致以某种方式可以访问的资源，我最终会得到：

*   案例 1：现有资源被“附加到”，又名“带有 ID 的 POST”（未创建资源）

    *   ？？？如果要返回当前资源
    *   ？？？如果您不想返回当前资源
*   案例 2：正在创建新资源（通常通过不传递 ID）

    *   201（已创建）如果要返回当前资源
    *   ？？？如果您不想返回当前资源

但是，如果我决定将 RFC“POST 方法执行的操作可能不会导致 (...)”解释为“如果您执行 Post append”，这是一个 huuuuge 延伸，那么我最终会得到：

*   案例 1：现有资源被“附加到”，又名“带有 ID 的 POST”（未创建资源）

    *   200（OK）如果你想返回当前资源
    *   204（无内容）如果您不想返回当前资源
*   案例 2：正在创建新资源（通常通过不传递 ID）

    *   201（已创建）如果要返回当前资源
    *   ？？？如果您不想返回当前资源

*因此，即使尽可能广泛地*解释 RFC ，我仍然会遇到一个问题：如果我创建了资源，并且不想返回当前的资源数据，我应该使用什么代码？204可以吗？（ 我对此表示怀疑）

再见，

默克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:35:47.527

您可能需要检查 HTTP/1.1 修订版（正在进行中），特别是[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-22.html#header.content-location](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-22.html#header.content-location)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:07:54.240

我总是返回一个 201，你被告知你必须返回一个。

请注意您自己的报价：

> 并包含一个描述请求状态的实体

请注意，这*并不是*说您必须将*资源*作为内容包含在内。只是描述状态的实体。但如果只有一种可能的状态，我认为没有内容没有问题。

# c++ - 对于 double 或 float 的总和，EXPECT_EQ 出错

> ID：15128510
> 
> 赞同：29
> 
> 时间：2013-02-28T05:59:16.437
> 
> 标签：c++, unit-testing, floating-point, googletest

我无法理解为什么在对双数或浮点数求和的情况下测试用例会失败。它适用于整数数据类型。

//simple_method.h 中的方法

```
double sum ( double a, double b)
{
    double res = a+b;
    return res;
} 
```

// 这个方法的测试用例

```
TEST(simpleSum, sumOfFloat)
{
    EXPECT_EQ(4.56, sum(0.56, 4.0));
} 
```

// 输出是

```
Running main() from gtest_main.cc
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from simpleSum
[ RUN      ] simpleSum.sumOfFloat
/home/pcadmin/Desktop/so/so3/simple_method_test.cpp:7: Failure
Value of: sum(0.56, 4.0)
  Actual: 4.56
Expected: 4.56
[  FAILED  ] simpleSum.sumOfFloat (0 ms)
[----------] 1 test from simpleSum (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (0 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] simpleSum.sumOfFloat

 1 FAILED TEST 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-28T06:06:54.237

改用[`EXPECT_NEAR`](https://github.com/google/googletest/blob/master/docs/reference/assertions.md#expect_near-expect_near)或[`DoubleEq`](https://github.com/google/googletest/blob/master/docs/reference/assertions.md#expect_double_eq-expect_double_eq)匹配器。浮点运算可能会导致[舍入误差](https://stackoverflow.com/questions/249467/what-is-a-simple-example-of-floating-point-rounding-error)，从而使结果略有不同。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-28T06:09:00.373

请参阅[浮点比较文档](https://github.com/google/googletest/blob/master/docs/advanced.md#floating-point-comparison)

`EXPECT_EQ`使用完全匹配。但是你不能完全匹配两个浮点数。（至少很容易。）

您可以使用`EXPECT_FLOAT_EQ`或`EXPECT_DOUBLE_EQ`。（带有启发式边界）此外，您可以使用`EXPECT_NEAR`特定的边界。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-22T07:09:46.677

来自[https://testing.googleblog.com/2008/10/tott-floating-point-comparison.html](https://testing.googleblog.com/2008/10/tott-floating-point-comparison.html)

> 比较浮点值时，检查是否相等可能会导致意外结果。舍入误差可能导致结果接近预期，但不相等。因此，即使程序正确实现，在检查两个浮点数是否相等时，断言也可能会失败。
> 
> Google C++ 测试框架提供了比较两个浮点数到给定精度的函数。

```
ASSERT_FLOAT_EQ(expected, actual);
ASSERT_DOUBLE_EQ(expected, actual);

EXPECT_FLOAT_EQ(expected, actual);
EXPECT_DOUBLE_EQ(expected, actual); 
```

在你的情况下，

```
TEST(simpleSum, sumOfFloat)
{
    EXPECT_DOUBLE_EQ(4.56, sum(0.56, 4.0));
} 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-01-19T10:17:40.600

这只是 Googletest 中的一个错误。文本输出应该证明失败，但它的格式没有精确指定。

# python - TypeError：对象不支持索引

> ID：15128514
> 
> 赞同：1
> 
> 时间：2013-02-28T05:59:30.723
> 
> 标签：python, pygame

```
...
 return cls(P2[0] - P1[0], P2[1] - P1[1])
TypeError: 'Vector' object does not support indexing 
```

我是 pygame 和 python 的新手。我一直在尝试练习构建类和向量，非常挣扎。

这是我的类文件

```
import math

class Vector(object):

    #defaults are set at 0.0 for x and y
    def __init__(self, x=0.0, y=0.0):
        self.x = x
        self.y = y

    #allows us to return a string for print
    def __str__(self):
        return "(%s, %s)"%(self.x, self.y)

    # from_points generates a vector between 2 pairs of (x,y) coordinates
    @classmethod
    def from_points(cls, P1, P2):
        return cls(P2[0] - P1[0], P2[1] - P1[1])

    #calculate magnitude(distance of the line from points a to points b
    def get_magnitude(self):
        return math.sqrt(self.x**2+self.y**2)

    #normalizes the vector (divides it by a magnitude and finds the direction)
    def normalize(self):
        magnitude = self.get_magnitude()
        self.x/= magnitude
        self.y/= magnitude

    #adds two vectors and returns the results(a new line from start of line ab to end of line bc)
    def __add__(self, rhs):
        return Vector(self.x +rhs.x, self.y+rhs.y)

    #subtracts two vectors
    def __sub__(self, rhs):
        return Vector(self.x - rhs.x, self.y-rhs.y)

    #negates or returns a vector back in the opposite direction
    def __neg__(self):
        return Vector(-self.x, -self.y)

    #multiply the vector (scales its size) multiplying by negative reverses the direction
    def __mul__(self, scalar):
        return Vector(self.x*scalar, self.y*scalar)

    #divides the vector (scales its size down)
    def __div__(self, scalar):
        return Vector(self.x/scalar, self.y/scalar)

    #gives my vector class an ability to return a tuple
    def tuple(self):
        return (self.x, self.y) 
```

这是我的程序代码

```
#The simple mouse move game by Ramon Cabral

#imports
import pygame, sys, Vector
from pygame.locals import *
from Vector import *

#game init
pygame.init()

#screen
screen = pygame.display.set_mode((800,600),0,32)

#images
mouse_file = 'mouse.png'
MOUSE = pygame.image.load(mouse_file).convert_alpha()

#variables
bgcolor = (255,255,255)
position = Vector(100.0,100.0)
heading = Vector()

#clock and speed
clock = pygame.time.Clock()
speed = 250.0

#main game function
while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()

        if event.type == MOUSEBUTTONDOWN:
            destination = pygame.mouse.get_pos()
            heading = Vector.from_points(position, destination)
            heading.normalize()

    screen.fill(bgcolor)
    screen.blit(MOUSE, position.tuple())

    time_passed = clock.tick(30.)
    time_passed_seconds = time_passed/1000.0

    distance_moved = time_passed_seconds*speed
    position += heading * distance_moved
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:01:09.380

它应该是：

```
@classmethod
def from_points(cls, P1, P2):
    return cls(P2.x - P1.x, P2.y - P1.y) 
```

原因是你的类没有`__getitem__`方法，所以你不能*索引*它：

```
P2[0]  #not allowed since this calls `__getitem__` and your class doesn't define it. 
```

# javascript - 想在使用 WshShell.Exec 方法时隐藏命令提示符窗口

> ID：15128517
> 
> 赞同：6
> 
> 时间：2013-02-28T05:59:55.390
> 
> 标签：javascript

我想从 javascript 执行一个 java 程序并想要获得输出。

Intailly我尝试了以下代码：

```
WshShell = new ActiveXObject("WScript.Shell");
var launch="cmd.exe /c java -classpath . HelloWorld ";
var cmdRun = WshShell.Run(launch,0,true); 
```

通过 Run 方法，我无法获得类的输出。

然后我尝试使用以下代码：

```
WshShell = new ActiveXObject("WScript.Shell");
var launch="cmd.exe /c p java classpath . HelloWorld ";
var cmdRun = WshShell.Exec(launch);
while (cmdRun.Status == 0) // wait for the command to finish
{
sleep(100);
}
var output = cmdRun.StdOut.ReadAll();
alert(output); 
```

现在我能够以可变输出获得输出。

我的问题是使用 Run 方法我可以隐藏命令提示符（通过传递参数 WshShell.Run(launch,0,true)） 而通过使用 Exec 方法我无法隐藏命令提示符。我希望隐藏此命令提示符。

你能在这方面帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T06:07:07.103

是的，这困扰着所有 wsh 脚本编写者。没有办法隐藏`wshExec`对象，只`.Run`允许这个选项，但`StdOut`在这种情况下不允许。很快，唯一的方法就是将输出重定向到文件。

```
WshShell   = new ActiveXObject("WScript.Shell");
var launch ="cmd.exe /c java -classpath . HelloWorld > output.txt";
var cmdRun = WshShell.Run(launch,0,true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-14T03:40:16.823

我知道这个线程已经很老了，但我刚刚遇到了同样的问题，并通过在命令字符串中添加“exit”找到了解决方案，从而关闭了窗口。

从 Microsoft Docs 的 cmd 页面：
您可以为 [string] 指定多个命令。用命令分隔符 && 分隔它们，并用引号将它们括起来。例如：

“[command1]&&[command2]&&[command3]”

因此，您传递给 WshShell.Exec 的完整命令字符串如下所示：

```
 cmd.exe /c "java -classpath . HelloWorld&&exit" 
```

# java - 如何实现Android和HBase的连接？

> ID：15128522
> 
> 赞同：1
> 
> 时间：2013-02-28T06:00:14.783
> 
> 标签：java, android, database, apache, hbase

我正在运行 Hbase 0.94.0 伪分布式模式。我有几百万条记录。现在我创建了一个需要与 hbase 通信的 android 应用程序，我需要从 HBase 检索数据并在操作后将其放回 Hbase。

我已经在互联网上搜索了。我找不到任何有用的东西。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:48:23.307

您想查看 HBase (Stargate) 的 REST API

[http://wiki.apache.org/hadoop/Hbase/Stargate](http://wiki.apache.org/hadoop/Hbase/Stargate)

# php - php邮件截断PDF附件

> ID：15128526
> 
> 赞同：0
> 
> 时间：2013-02-28T06:00:35.453
> 
> 标签：php, email, pdf

我正在尝试使用 php 的邮件功能发送带有 pdf 附件的邮件。我在邮件中收到其他东西，但附件大小为零。任何人都可以查看我的代码并建议这里有什么问题吗？

谢谢！下面是代码：

```
public static function sendMailWithAttachment($to, $from, $from_name, $subject, $msg,$attachmentName, $attachmentPath){
// Setting a timezone, mail() uses this.
//date_default_timezone_set('America/New_York');
$semi_rand = md5(time());
$data = chunk_split(base64_encode($data));

$fileatt_type = "application/pdf"; // File Type
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

// set header ........................
$headers = "From: ".$from;
$headers .= "\nMIME-Version: 1.0\n" .
"Content-Type: multipart/mixed;\n" .
" boundary=\"{$mime_boundary}\"";

// set email message......................
//$email_message = "Thanks for visiting ";
//$email_message .= "Thanks for visiting.<br>";// Message that the email has in it
$email_message=$msg;
$email_message .= "This is a multi-part message in MIME format.\n\n" .
"--{$mime_boundary}\n" .
"Content-Type:text/html; charset=\"iso-8859-1\"\n" .
"Content-Transfer-Encoding: 7bit\n\n" .
$email_message .= "\n\n";
$email_message .= "--{$mime_boundary}\n" .
"Content-Type: {$fileatt_type};\n" .
" name=\"{$attachmentPath}\"\n" .
"Content-Disposition: attachment;\n" .
" filename=\"{$attachmentName}\"\n" .
"Content-Transfer-Encoding: base64\n\n" .
$data .= "\n\n" .
"--{$mime_boundary}--\n";

$sent = @mail($to, $subject, $email_message, $headers);
if($sent) {
echo "Your email attachment send successfully.";
} else {
die("Sorry but the email could not be sent. Please try again!");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:17:56.993

我不知道您为什么使用这种方法来发送带有附件的邮件，并且很难调试。看看我的功能。

```
<?php
function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
    $file = $path.$filename;
    $file_size = filesize($file);
    $handle = fopen($file, "r");
    $content = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($content));
    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mailto, $subject, "", $header)) {
        echo "mail send ... OK"; // or use booleans here
    } else {
        echo "mail send ... ERROR!";
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:27:30.510

我个人建议使用久经考验的邮件组件来处理我的所有邮件活动。我过去使用的一个是`PHPMailer`（在[此处](http://phpmailer.worxware.com)找到），它似乎开箱即用（而且它是免费的！）。

我编写了以下包装类来简化使用：

```
<?php
require_once "PHPMailer.php";

/**
 * class SimpleMailer
 * Very basic mail wrapper around PHPMailer,
 * helps to abstract some of PHPMailer's huge feature list
 * and keep the complexity as low as possible
 *
 * @author Jason Larke
 * @date  10/10/2012
 */
class SimpleMailer {
    /**
     * bool send(array, string, string, mixed, array)
     * Send a basic email to a list of recipients
     *
     * @param $recipients an array of recipients to this email. Each array entry should be either an email address, or a key-value pair of email=>value and name=>value
     * @param $subject Email subject string
     * @param $body Email body string
     * @param $from mixed, can either be a single email address or an associative array specifying both email and name keys i.e array('email'=>'admin@example.com','name'=>'Example')
     * @param $attachments An array of file-paths to files that should be attached to the email
     */
    public static function send($recipients, $subject, $body, $from, $attachments=array()) {
        // sanitize
        $recipients = (array)$recipients;
        $attachments = (array)$attachments;

        $client = new PHPMailer();
        $client->IsMail(); // use PHP's internal 'mail' function, for simplicity.

        $senderEmail = is_array($from) && !empty($from['email']) ? $from['email'] : $from;
        $senderName = is_array($from) && !empty($from['name']) ? $from['name'] : $senderEmail;

        $client->SetFrom($senderEmail, $senderName);
        $client->Subject = $subject;
        $client->MsgHTML($body);

        foreach($recipients as $to) {
            $email = is_array($to) && !empty($to['email']) ? $to['email'] : $to;
            $name = is_array($to) && !empty($to['name']) ? $to['name'] : $email;
            $client->AddAddress($email, $name);
        }

        foreach($attachments as $attach)
            $client->AddAttachment($attach);

        $result = $client->Send();
        if (!$result) {
            // todo: Log any information about why the mail failed to send (accessed by $client->ErrorInfo)
        }
        return $result;
    }
}
?> 
```

该类的示例用法如下：

```
SimpleMailer::send(
    'foobar@example.com', // to-address
    'This is a test email', // subject
    'Hello Foo Bar, we're testing our email service.' // content
    array('email' => 'admin@example.com', 'name' => 'Example.com'), // sender
    '/local/docs/example.pdf' // attachments (can be an array)
); 
```

# android - 位置的ListView按钮未单击在android中正确单击

> ID：15128528
> 
> 赞同：0
> 
> 时间：2013-02-28T06:00:52.190
> 
> 标签：android, listview, download, position

我使用自定义 Baseadapter 类显示了列表项。我的问题是，当我单击位置 1 的 listview 按钮时，也单击了位置 other 的按钮。但是我下载了完整的视频。但是 listview 显示不正确。我该如何克服这个问题？

这是我的代码：

```
public class TestHopeListNew extends Activity {
    ListView lv;
    ArrayList<Url_Dto> list = new ArrayList<Url_Dto>();
    MyListAdapter adtf;
    public static String prf_date_view = "";
    String str_start;
    Button all_detail;
    Button accepted_all, mainDownloadBtn;
    public static SQLiteDatabase db;
    String name;
    File download;
    int i = 0;
    private ArrayList<ProgressBarSeek> progreeSeekList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test_hope_list_new);
        progreeSeekList = new ArrayList<ProgressBarSeek>();
        list = DBAdapter.getUrl_Detail();
        Log.v("log_tag", "list  :: " + list.size());
        lv = (ListView) findViewById(R.id.main_list_meet);
        mainDownloadBtn = (Button) findViewById(R.id.not_shown);
        adtf = new MyListAdapter(this);
        lv.setAdapter(adtf);
        adtf.notifyDataSetChanged();

        SqliteAdpter dba = SqliteAdpter
                .getAdapterInstance(getApplicationContext());
        dba.createdatabase();
        db = dba.openDataBase();

        mainDownloadBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                adtf.setAllDownload();
            }
        });

    }

    public class MyListAdapter extends BaseAdapter {
        private LayoutInflater mInflater;
        ProgressBar pr;
        ProgressBar[] prArray = new ProgressBar[list.size()];
        Button cl, dl;
        ImageView im;
        DownloadFileFromURL downloadFileFromURL;
        ViewHolder holder = null;

        public MyListAdapter(Context context) {
            mInflater = LayoutInflater.from(context);

        }

        public int getCount() {
            return list.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public void setAllDownload() {
            if (prArray.length > 0) {
                for (int i = 0; i < prArray.length; i++) {
                    try {
                        Thread.sleep(5000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                    Log.v("log_tag", "list.get(i).url_video   "
                            + list.get(i).url_video);
                    downloadFileFromURL = new DownloadFileFromURL(dl, cl);
                    downloadFileFromURL.execute(pr, list.get(i).url_video, i);
                }
            }
        }

        private class ViewHolder {
            public Button cl;
            public Button dl;
            public ProgressBar pr;
            public ImageView im;

        };
        public View getView(final int position, View convertView,
                ViewGroup parent) {

            /*convertView = mInflater.inflate(R.layout.custome_list_view, null);
            cl = (Button) convertView.findViewById(R.id.cancle_sedual);
            dl = (Button) convertView.findViewById(R.id.download_sedual);
            pr = (ProgressBar) convertView.findViewById(R.id.listprogressbar);
            prArray[position] = pr;
            im = (ImageView) convertView.findViewById(R.id.list_image);
            im.setImageResource(list.get(position).images[position]);*/

            //final ViewHolder holder = null;

            if (convertView == null) {
                LayoutInflater mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = mInflater.inflate(R.layout.custome_list_view,
                        null);
                holder = new ViewHolder();
                prArray[position] = pr;
                holder.cl = (Button) convertView
                        .findViewById(R.id.cancle_sedual);
                holder.dl = (Button) convertView
                        .findViewById(R.id.download_sedual);
                holder.pr = (ProgressBar) convertView
                        .findViewById(R.id.listprogressbar);
                holder.im = (ImageView) convertView
                        .findViewById(R.id.list_image);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.im.setImageResource(list.get(position).images[position]);
            // pr.setProgress(getItem(position));

            holder.cl.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.v("log_tag", "Cancle Button Click");

                    holder.dl.setVisibility(View.VISIBLE);
                    holder.cl.setVisibility(View.GONE);
                    //downloadFileFromURL = new DownloadFileFromURL(dl, cl);
                     downloadFileFromURL.cancel(true);
                    downloadFileFromURL.downloadFile();
                    holder.pr.setProgress(0);
                    notifyDataSetChanged();
                }
            });

            holder.dl.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    holder.dl.setFocusable(false);
                    str_start = list.get(position).url_video;
                    holder.dl.setVisibility(View.GONE);
                    holder.cl.setVisibility(View.VISIBLE);
                    Log.v("log_tag", "Start Button Click ");

                    // new DownloadFileFromURL().execute(str_start);
                    downloadFileFromURL = new DownloadFileFromURL(holder.dl, holder.cl);
                    downloadFileFromURL.execute(holder.pr, str_start, position);
                    notifyDataSetChanged();
                }
            });

            getProgress(holder.pr, position, holder.dl, holder.cl);
        //  convertView.setTag(holder);
            return convertView;
        }

    }

    class DownloadFileFromURL extends AsyncTask<Object, String, Integer> {

        int count = 0;
        ProgressDialog dialog;
        ProgressBar progressBar;
        int myProgress;
        int position;
        Button start, cancel;
        boolean download1 = false;

        public DownloadFileFromURL(Button start, Button cancel) {
            this.start = start;
            this.cancel = cancel;
        }

        /**
         * Before starting background thread Show Progress Bar Dialog
         * */

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            ProgressBar progressBar;
            download1 = true;

        }

        public void downloadFile() {
            this.download1 = false;

        }

        @Override
        protected void onCancelled() {
            super.onCancelled();

        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected Integer doInBackground(Object... params) {

            int count;
            progressBar = (ProgressBar) params[0];
            position = (Integer) params[2];
            try {

                URL url = new URL((String) params[1]);

                name = ((String) params[1]).substring(((String) params[1])
                        .lastIndexOf("/") + 1);
                // Log.v("log_tag", "name Substring ::: " + name);
                URLConnection conection = url.openConnection();
                conection.setConnectTimeout(2000);
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);
                download = new File(Environment.getExternalStorageDirectory()
                        + "/download/");
                if (!download.exists()) {
                    download.mkdir();
                }
                String strDownloaDuRL = download + "/" + name;
                Log.v("log_tag", " down url   " + strDownloaDuRL);
                FileOutputStream output = new FileOutputStream(strDownloaDuRL);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    if (this.download1) {

                        if(isCancelled()){
                            break;
                        }
                        total += count;

                        // writing data to file
                        progressBar
                                .setProgress((int) ((total * 100) / lenghtOfFile));
                        output.write(data, 0, count);
                        setProgress(progressBar, position, start, cancel, this);

                    } else {
                        File delete = new File(strDownloaDuRL);
                        delete.delete();
                    }
                }
                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }
            return 0;

        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... values) {

            super.onProgressUpdate(values);
            // Log.v("log_tag", "progress :: " + values);
            // setting progress percentage
            // pDialog.setProgress(Integer.parseInt(progress[0]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

            Log.v("log", "login  ::: 4::: " + download);
            String videoPath = download + "/" + name;
            String chpName = name;
            Log.v("log_tag", "chpName  ::::" + chpName + "  videoPath "
                    + videoPath);
            db.execSQL("insert into videoStatus (chapterNo,videoPath) values(\""
                    + chpName + "\",\"" + videoPath + "\" )");

        }

    }

    private void setProgress(final ProgressBar pr, final int position,
            final Button Start, final Button cancel,
            final DownloadFileFromURL downloadFileFromURL) {
        ProgressBarSeek pbarSeek = new ProgressBarSeek();
        pbarSeek.setPosition(position);
        pbarSeek.setProgressValue(pr.getProgress());
        // Log.v("log_tag", position + "  progress  " + pr.getProgress());
        progreeSeekList.add(pbarSeek);
        cancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Log.v("log_tag", "Cancle Button Click Set progress");
                Start.setVisibility(View.VISIBLE);
                cancel.setVisibility(View.GONE);
                downloadFileFromURL.cancel(true);
                downloadFileFromURL.downloadFile();
                pr.setProgress(0);
            }
        });
        Start.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.v("log_tag", "Start Button Click set Progress");
                str_start = list.get(position).url_video;
                Start.setVisibility(View.GONE);
                cancel.setVisibility(View.VISIBLE);
                Log.v("log_tag", "str_start  " + str_start);
                //
                // new DownloadFileFromURL().execute(str_start);
                DownloadFileFromURL downloadFileFromU = new DownloadFileFromURL(
                        Start, cancel);
                downloadFileFromU.execute(pr, str_start, position);
            }
        });
    }

    private void getProgress(ProgressBar pr, int position, Button dl, Button cl) {
        if (progreeSeekList.size() > 0) {
            for (int j = 0; j < progreeSeekList.size(); j++) {
                if (position == progreeSeekList.get(j).getPosition()) {
                    pr.setProgress(progreeSeekList.get(j).getProgressValue());
                    dl.setVisibility(View.GONE);
                    cl.setVisibility(View.VISIBLE);
                }
            }
        }
    }
} 
```

![在此处输入图像描述](../Images/5b8d65d10dd25e8f545abc8c093eb7bd.png)

我单击第二个按钮但显示其他按钮 clickeble 但第二个按钮背景下载在 sd 卡中但显示不正确。如何解决它以及我的代码有什么问题，请帮助我！！！

# asp.net-mvc-3 - 从 asp.net MVC3 中的模型生成 DropDownList

> ID：15128529
> 
> 赞同：0
> 
> 时间：2013-02-28T06:00:52.633
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, html.dropdownlistfor, html-select

我有一个模型

```
 [Required]
    public string Username { get; set; }
    [Required]
    public string Password { get; set; }

    public IEnumerable<Connection> Connections { get; set; } 
```

连接类是

```
 public class Connection
{

    public int ConnectionId { get; set; }
    public string Name { get; set; }
} 
```

我想从下拉列表中选择一个具有用户名和密码的数据库。

在我的控制器中，我创建了如下所示的连接列表

```
public ActionResult Create()
    {
        var databaseConnection = new DatabaseConnection();

        databaseConnection.Connections = new List<Connection>
            {
                new Connection()
                    {
                        ConnectionId = 1,
                        Name = @"10.44.171.39\SQL2K8R2"
                    },
                new Connection()
                    {
                        ConnectionId = 2,
                        Name = "TestDb"
                    }
            };

        return View(databaseConnection);
    } 
```

对应的视图是

```
<div>
        <span>Select Database</span>
        <p>
            <select name="Section">
                <option value="" selected="selected">Select Section</option>
                @foreach (var item in Model.Connections)
                {
                    <option value="@item.ConnectionId">@item.Name</option>
                }
            </select>
        </p>
    </div> 
```

当我发布表单时，我得到了用户名和密码，但没有得到

连接名称和 ID 。

任何帮助将不胜感激在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:17:12.043

`<select>`像这样修改你的

```
<div>
        <span>Select Database</span>
        <p>
            @Html.DropDownListFor(
                m => m.Connections.ConnectionId,
                new SelectList(Model.Connections, "ConnectionId", "Name"),   
                "Select a Connection"
            )
        </p>
</div> 
```

当您发布表单后，它将自动绑定到 ConnectionId 属性。

现在向您的控制器添加一个发布操作。

```
[HttpPost]
public ActionResult Create(DatabaseConnection connection)
{
    //get the selected value from dropdown.
    var selected=connection.Connections.ConnectionId;
    //do other stuff..
    return View();
} 
```

# actionscript-3 - 如何设置电影剪辑名称以由数组引用

> ID：15128533
> 
> 赞同：0
> 
> 时间：2013-02-28T06:01:10.847
> 
> 标签：actionscript-3, flash, flash-builder, flash-cs5, flashdevelop

好的，我有一堆名为 p1、p2、p3、...、pn 的影片剪辑，它们的动作脚本标识符与它们的名称相同。

然后我想说，对于一个遍历所有这些数组的数组，取“P”+ iy 并更改它。

所以我想这样做：

```
if (e.offsetY == 1) {
    "thisp" + currentPage.y ++;
} 
```

即使将其设为变量也不起作用

```
var movieclipName = "thisp" + .toString(currentPage)
novieclipName.y ++; 
```

??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:16:43.910

尝试以下方法：

```
var currentPage:int = 0;
var movieclipName:MovieClip = this["p"+currentPage];
movieclipName.y ++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:05:51.020

这应该会有所帮助：[getChildByName()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getChildByName%28%29)。

您将它们都命名为“P”加上一个数字。好的，这样调用：

```
var thisp:DisplayObject=this.getChildByName('p'+currentPage);
thisp.y++; 
```

# silverlight - 有一个中央静态 ClientContext 用于从 silverlight 客户端到 sharepoint 的通信是一个好主意吗？

> ID：15128537
> 
> 赞同：1
> 
> 时间：2013-02-28T06:01:32.127
> 
> 标签：silverlight, sharepoint, sharepoint-2010

我正在尝试通过从共享点检索列表项来呈现 UI？那么异步执行此操作的最佳方法是什么？

# php - 如何使用 Graph API 拉取用户的 facebook 状态消息

> ID：15128540
> 
> 赞同：0
> 
> 时间：2013-02-28T06:01:42.627
> 
> 标签：php, facebook-graph-api

我尝试使用 Graph API 使用此方法，但它不返回状态消息......无论如何我可以拉那些吗？我怎样才能获得用户关注的 Facebook 页面的提要 .. 例如可口可乐的页面 .. 如果我喜欢它，我该如何检索它的提要？答案将不胜感激！

```
$status = $facebook->api("/690196511"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:15:06.877

试试这个代码：

```
<?php

$facebook_appid         = "facebook_appid";                                 // Facebook appplication id
$facebook_secret        = "facebook_secret";                // Facebook secret id
$facebook_pageid        = "facebook_pageid";                                // Facebook secret id
$redirect_uri           = "https://localhost/facebook_page/events.php";   // return url to our application after facebook login ## should be SAME as in facebook application
//$redirect_uri         = "https://localhost/facebook_page/fb_login.php";   // return url to our application after facebook login ## should be SAME as in facebook application
$scope                  = "user_photos,email,user_birthday,user_online_presence,offline_access,manage_pages,publish_stream,user_events,friends_events"; // User permission for facebook

$code                   = $_REQUEST["code"]?$_REQUEST["code"]:"";

if(empty($code)) {
    $_SESSION['state']  = time(); // CSRF protection
    $dialog_url         = "https://www.facebook.com/dialog/oauth?client_id=". $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri) . "&state=". $_SESSION['state'] . "&scope=".$scope;
    header("location:".$dialog_url);
}

if($_SESSION['state'] && ($_SESSION['state'] == $_REQUEST['state'])) {
    $token_url          = "https://graph.facebook.com/oauth/access_token?". "client_id=" . $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri). "&client_secret=" . $facebook_secret . "&code=" . $code;
    $response           = @file_get_contents($token_url);

    $params             = null;
    parse_str($response, $params);

    $account_url        = "https://graph.facebook.com/".$facebook_pageid."?fields=access_token&access_token=".$params['access_token'];
    $resp               = @file_get_contents($account_url);

    $dt                 =   json_decode($resp);

    echo $dt->access_token;
    echo "<br>";
    echo $dt->id;

    $offer_url        = "https://graph.facebook.com/".$dt->id."/feed?access_token=".$dt->access_token;
    $off                = @file_get_contents($offer_url);
    $dto                = json_decode($off);

    echo "<pre>";
    print_r($dto);

}

?> 
```

# git - 如何将现有的 Git 存储库推送到 Team Foundation Service

> ID：15128541
> 
> 赞同：43
> 
> 时间：2013-02-28T06:01:45.957
> 
> 标签：git, migration, azure-devops

Microsoft 现在在其 Team Foundation Service 上支持 Git 存储库。我在 Team Foundation Service 上有一个帐户，我想将现有的 Git 存储库推送到那里的项目。

每当我尝试进行搜索时，我都会不断寻找 TFS-GIT 或 GIT-TF 之类的东西。我很确定我不想要这些，因为我认为这些更改为代码存储库的 Team Foundation Server 模型，而这不是我想要的。

具体来说，我有一个想要推送到 TFService 的现有 Git 存储库。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-02T23:11:54.137

好吧，我显然过于复杂了。这就是我所做的。

1.  在 TFService 中创建了一个新项目
2.  在 Visual Studio 中连接到该项目
3.  在 Visual Studio 中克隆该项目
4.  `git pull c:\source\oldGitProject`

就是这样，它从旧位置提取了所有更改，我可以轻松地将其推送到 TFService。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-28T07:12:47.297

> “如何将现有的 git 存储库推送到 TFService？”

在 tfs.visualstudio.com（见下文）上声明一个 git repo 后，将该 git repo url 添加到您自己的本地 repo 的远程：

```
cd /path/to/local/repo
git remote add tfs url://tfs/git/repo
git push --mirror tfs 
```

这足以将本地存储库的完整历史推回 TFS 上的新上游存储库。

同样，这个想法是在上游端（TFS）创建一个新的空仓库，并将您的本地仓库推送到它。

* * *

（原答案）

如果我了解[Scott Hanselman 的博客文章](http://www.hanselman.com/blog/GitSupportForVisualStudioGitTFSAndVSPutIntoContext.aspx)：

> 此 Git 支持将需要 VS2012.2（当前为预览版），因此您需要先安装它，然后获取 VSIX。当 VS2012.2 发布时，您将能够更新两者，Git VSIX 将继续通过 VS Gallery 自动更新。
> 
> 它是 VS 的完整源代码提供程序，因此您可以在不离开 VS 的情况下使用它来做大多数事情，或者您可以在命令行中闲逛并使用它来直观地提醒您的存储库的状态。
> 
> 对于团队，您可以访问[http://tfs.visualstudio.com](http://tfs.visualstudio.com)并注册一个帐户并免费获得 5 个用户。您可以选择 Git 或 Team Foundation 版本控制 (TFVC) 作为源提供程序，并为您的 ALM 工具使用所有 Team Foundation 敏捷、scrum 或其他模板

[此处说明](http://blogs.msdn.com/b/girishp/archive/2013/01/31/tfs-announces-git-support-wooha.aspx)了 Git 项目的注册过程，再次指出在[VS 2012 Update 2 (VS2012.2)](http://www.microsoft.com/en-us/download/details.aspx?id=36539)的“社区技术预览”之上，您需要[Git VSIX](http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c)的“社区技术预览” 。

![TFS 中的 Git 项目](../Images/b0a8a18e63a24c95182b4d7c0d69fcc5.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-06T18:57:23.067

上面有一些很好的答案，但我发现这更容易。

*   创建本地 Git 存储库。（或者在我的情况下，我将我的 SVN 存储库转换为 Git。）
*   转到 visualstudio.com 并创建新项目，将 Git 指定为源代码控制。
*   单击 VisualStudio.com 中新项目中的“代码”菜单选项。
*   该屏幕将显示推送现有存储库的确切 Git 命令，**包括您的唯一存储库的 URL**。您所要做的就是将该命令复制并粘贴到您的 Git 命令提示符中。

    `git clone <repository url>`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-25T10:12:57.477

我们需要做的就是更改现有本地解决方案/repo 的服务器目标 url。

所以：

1.  在云（TFService）中，创建一个新项目并获取它的 url。
2.  在本地计算机上，在 Visual Studio 中打开现有解决方案/存储库，然后在包管理控制台 (PMC) 中运行以下命令

    git 远程 set-url 来源[https://new.url.here](https://new.url.here)

3.  使用 View>Team Explorer>Unsynched Commits 将现有解决方案/存储库推送到新项目。

这会将本地存储库（包括所有以前的提交）推送到云中的新 TFS 项目。

Git 命令行 FTW。

所有这些操作都是更新 .git 文件夹中的配置文件中的 [url origin] 属性，因此如果您想打开和编辑此文件，您可以使用记事本。恕我直言，此命令更简洁，因为您不会冒意外编辑其他设置的风险，也不必离开 VS。

注意：如果在 step: 3 中的 Push 选项被禁用，那么您可能必须执行另一个本地提交才能“弄脏”源代码树的头部，从而启用 push 命令。我敢肯定还会有另一个 git 命令来执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T16:26:43.870

我今天早上发现的一个博客链接了这个文档：

[http://blogs.msdn.com/b/visualstudioalm/archive/2013/02/06/set-up-connect-and-publish-using-visual-studio-with-git.aspx#publish-tfs](http://blogs.msdn.com/b/visualstudioalm/archive/2013/02/06/set-up-connect-and-publish-using-visual-studio-with-git.aspx#publish-tfs)

他们似乎有一个名为 publish 的内部命令（可能正在使用 @VonC 提到的 --mirror 命令？）

我也不确定这是否有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T15:43:53.140

今天遇到了这个问题。VonC 的回答，将 TFS 添加为远程并使用`git push --mirror tfs`，对我有用。但是，提及一些有关此的其他内容可能会有所帮助。

1.  推送后，Visual Studio 仍然无法识别此本地存储库是否以任何方式连接到 Team Foundation Service。因此，您仍然需要选择“连接到团队项目...”并使用界面进行“克隆”。来自 TFS 的 repo 将被克隆，所有内容都将被推送。在此之后，您将连接到 TFS，并且应该能够在克隆中正常工作。

2.  使用“--mirror”将推送所有本地引用，可能包括一些您并不真正希望在中央存储库中拥有的本地分支。如果是这种情况，在使用 '--mirror' 推送后，您应该使用`git push tfs :<branchname>`从 TFS 中删除一个分支，以避免其他人稍后拉取您的本地分支。

3.  或者，应该可以将所需的 refs 推送到 TFS 存储库中，而不是“--mirror”，就像您对任何其他 git repo: 一样`git push tfs <refspec>`。由于在这个阶段 TFS 存储库仍然是空的，一堆一个接一个的分支名称应该足以作为`<refspec>`. 如果使用此方法，您也可以使用 use `git push -u`，这也会使您推送的分支进入空的 repo 跟踪分支。

**编辑：**正如 Edward Thomson 的评论中提到的，如果您的原始存储库配置为从 TFS 远程跟踪分支，则从 TFS 克隆应该是不必要的。因此`git push -u <refspec>`，既应将 repo 推送到空的 TFS repo，又应允许 IDE 识别原始本地 repo，因为它设置了跟踪。

# c# - 通过 hwid 从文本文件中阻止 ip

> ID：15128546
> 
> 赞同：0
> 
> 时间：2013-02-28T06:01:57.510
> 
> 标签：c#, .net

我正在工作一个项目，该项目通过 TCPListen 从终止特定进程的客户端发送来监视特定端口上的 IP 和 HWID。

监视器工作完美，我收到 ip 和 hwid 并设法保存到 .txt 文件，但我想做的是在服务器中实现一种方法，如何通过从文本文件中读取 hwid 来阻止 ip。如果有人可以帮助我，我会非常感激。

这是客户端（发送），服务器（接收）代码的一部分：

服务器：

```
textFromClient = ("From:  " + tcpClient.Client.RemoteEndPoint + " HWID:" + encoder.GetString(message, 0, bytesRead)); 
```

客户：

```
byte[] outStream = System.Text.Encoding.ASCII.GetBytes(getUniqueID("C"));
serverStream.Write(outStream, 0, outStream.Length);
serverStream.Flush(); 
```

* * *

我想我明白了，但也许我解释得不对。好吧，我的服务器监听端口 8000 上的任何 ip。客户端自动连接到服务器 ip 和端口：例如：127.0.0.1:8000。客户端的工作原理是这样的：当客户端连接到服务器时，它运行一个应用程序“.exe”。客户端按名称杀死某些应用程序的进程。我制作了一个计时器，用于在客户端运行时终止进程。当进程被杀死时，客户端从进程被杀死的 pc 和 HWID 代码向服务器发送 IP：`byte[] outStream = System.Text.Encoding.ASCII.GetBytes(getUniqueID("C")); serverStream.Write(outStream, 0, outStream.Length); serverStream.Flush();`服务器在列表框中接收 ip 和 hwid。嗯，我正在考虑这样做。示例：在此接收消息代码中，我从客户端获取 HWID`encoder.GetString(message, 0, bytesRead)`以执行以下操作：

```
if (encoder.GetString(message, 0, bytesRead) = LoadBlockHWID(new FileInfo(@"c:\testfileHWID.txt"))); 
```

{

//用于阻止来自 hwid 上指定 IP 的连接的代码。

}

我希望该服务器不应该让客户端通过 HWID 连接到服务器。我想我必须编辑服务器以查看连接的 ip 和 hwid，客户端在连接时发送 hwid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:43:14.603

在开始接受连接之前，通过读取文件将 HWID 加载到列表/字典中。

在您获得 tcpClient.Client.RemoteEndPoint 的代码中，仅从中提取 IPAddress。

然后将 IPAddress 与阻止列表进行比较，如果匹配，则查看 HWID 是否匹配，如果匹配则不执行任务，否则就执行。

```
mBlockCheck = new SO15147104(); 
```

这是一个给你的例子。只需实例化类并在您可能想要阻止请求的行中，只需

```
if (!mBlockCheck.BlockRequest(ip, hwid))
{
    //Do the operation
} 
```

这是您应该能够从中找出的类代码。

```
using System.Collections.Generic;
using System.IO;
using System.Net;

public class SO15147104
{
    private List<string> HWIDLookup;
    private List<IPAddress> IPAddressLookup;

    public SO15147104()
    {
        HWIDLookup = LoadBlockHWID(new FileInfo(@"c:\testfileHWID.txt"));
        IPAddressLookup = LoadBlockIPAddresses(new FileInfo(
                                               @"c:\testfileIPAddresses.txt"));
    }

    public bool BlockRequest(IPAddress ip, string HWIDtoCheck)
    {
        if (IPAddressLookup.Contains(ip) &&
            HWIDLookup.Contains(HWIDtoCheck.ToUpperInvariant().Trim()))
        {
            return true;
        }
        return false;
    }

    private List<IPAddress> LoadBlockIPAddresses(FileInfo fi)
    {
        List<IPAddress> result = new List<IPAddress>();

        using (StreamReader sr = fi.OpenText())
        {
            while (!sr.EndOfStream)
            {
                IPAddress theIP = IPAddress.Any;
                string thisLine = sr.ReadLine().Trim();
                //This should allow IPv6 and IPv4 to be listed 1IP per Line
                if (IPAddress.TryParse(thisLine, out theIP))
                {
                    result.Add(theIP);
                }
            }
        }
        return result;
    }

    private List<string> LoadBlockHWID(FileInfo fi)
    {
        List<string> result = new List<string>();

        using (StreamReader sr = fi.OpenText())
        {
            while (!sr.EndOfStream)
            {
                result.Add(sr.ReadLine().Trim().ToUpperInvariant());
            }
        }
        return result;
    } 
```

# asp.net - 数据库未在 iis 中连接

> ID：15128547
> 
> 赞同：0
> 
> 时间：2013-02-28T06:01:59.403
> 
> 标签：asp.net, mysql, iis

我有两个数据库。

```
<add name="OdonovanTestConnectionString" connectionString="Data Source=ODO-SRV004\;Initial Catalog=OdonovanTest;Integrated Security=True" providerName="System.Data.SqlClient" />
<add name="rackleyConnectionString1" connectionString="Data Source=ODO-SRV004\;Initial Catalog=rackleyTest;Integrated Security=true"  providerName="System.Data.SqlClient" /> 
```

当我在 iis 中托管我的 asp .net 应用程序时。第一个数据库正在连接，它是 odonovantest。

但是数据库 rackletTest 没有连接。两个数据库都位于同一个 sql server 中。

任何人都可以给我解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:10:10.587

您可以像下面的代码一样显式调用您的连接字符串：

```
string connectionString = SampleApplication.Properties.Settings.Default.rackleyConnectionString1;
using (SqlConnection con = new SqlConnection(connectionString))
{
    con.Open();
    // put code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:32:47.967

确保您使用的是 Windows 身份验证或 Sql Server 身份验证。在 Web.config 中：对于 Sql Server 身份验证：

对于 Windows 身份验证：

然后你还必须在代码隐藏中定义。

# javascript - 使用 java 脚本跳转到 asp.net 中的下一个选项卡

> ID：15128548
> 
> 赞同：1
> 
> 时间：2013-02-28T06:02:04.270
> 
> 标签：javascript, asp.net, aspbutton

我正在使用`jquery`标签。知道我想跳到`onclick`按钮的下一个选项卡。这是我的代码

```
 <div id="tabs">
             <ul>
                 <li><a href="#tabs-1">Basic Information</a></li>
                 <li><a href="#tabs-2">Authors</a></li>
             </ul>
        <div id="tabs-1">
     <asp:Button ID="btnSaveAuthors" runat="server" Text="Save" CssClass="button medium green" />
        </div>
        <div id="tabs-2">
        </div>
 </div> 
```

但是当我使用这个javascript函数时。

```
 <script type="text/javascript">
        $(document).ready(function () {
            $("#<%=btnSaveAuthors.ClientId%>").click(function (event) 
            {
                $('#tabs').tabs('select', 1);
                return false;
            });
        });
    </script> 
```

它给了我以下错误

```
Error   5   'System.Web.UI.WebControls.Button' does not contain a definition for 'ClientId' and no extension method 'ClientId' accepting a first argument of type 'System.Web.UI.WebControls.Button' could be found (are you missing a using directive or an assembly reference?) 
```

请帮我解决这个问题。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:04:20.520

“ClientId”中的“d”应为大写：“ClientID”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:04:20.457

我敢打赌您使用的是区分大小写的 C#，正确的名称应该是**“ClientID”**： [Control.ClientID 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)

# c++ - 如何正确使用头文件成为一个完整的类？

> ID：15128559
> 
> 赞同：12
> 
> 时间：2013-02-28T06:02:42.647
> 
> 标签：c++, class

（初学者程序员..）我遵循头文件的样式，它运行良好，但我试图弄清楚我在编译时如何不断收到所有这些错误。我在 Cygwin 中使用 g++ 进行编译。

```
Ingredient.h:8:13: error: expected unqualified-id before ‘)’ token
Ingredient.h:9:25: error: expected ‘)’ before ‘n’
Ingredient.h:19:15: error: declaration of ‘std::string <anonymous class>::name’
Ingredient.h:12:14: error: conflicts with previous declaration ‘std::string<anonymous class>::name()’
Ingredient.h:20:7: error: declaration of ‘int <anonymous class>::quantity’
Ingredient.h:13:6: error: conflicts with previous declaration ‘int<anonymous class>::quantity()’
Ingredient.h: In member function ‘std::string<anonymous class>::name()’:
Ingredient.h:12:30: error: conversion from ‘&lt;unresolved overloaded function type>’ to non-scalar type ‘std::string’ requested
Ingredient.h: In member function ‘int<anonymous class>::quantity()’:
Ingredient.h:13:25: error: argument of type ‘int (<anonymous class>::)()’ does not match ‘int’
Ingredient.h: At global scope:
Ingredient.h:4:18: error: an anonymous struct cannot have function members
Ingredient.h:21:2: error: abstract declarator ‘&lt;anonymous class>’ used as declaration 
```

这是我的类头文件...

```
#ifndef Ingredient
#define Ingredient

class Ingredient {

public:
  // constructor
    Ingredient() : name(""), quantity(0) {} 
    Ingredient(std::string n, int q) : name(n), quantity(q) {}

  // accessors
    std::string name() { return name; }
    int quantity() {return quantity; }

  // modifier

private:
  // representation
  std::string name;
  int quantity;
};

#endif 
```

我对这些错误感到困惑，并且真的不知道我在类的实现方面做错了什么..

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T06:04:24.223

这很有趣。您实际上是在杀死您的班级名称`#define Ingredient`- 所有出现的`Ingredient`都将被删除。这就是为什么包含警卫通常采用`#define INGREDIENT_H`.

您还同时使用`name`了成员函数和 getter 函数（可能是为了翻译 C#？）。这在 C++ 中是不允许的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T06:05:20.370

如何查看错误？变量和函数不能有相同的名称。并且包含守卫永远不应该使用诸如类之类的名称。

```
#ifndef INGREDIENT_H
#define INGREDIENT_H

class Ingredient {

public:
  // constructor
    Ingredient() : name(""), quantity(0) {} 
    Ingredient(std::string n, int q) : name(n), quantity(q) {}

  // accessors
    std::string get_name() const { return name; }
    int get_quantity() const {return quantity; }

  // modifier

private:
  // representation
  std::string name;
  int quantity;
};

#endif 
```

# php - 在 PHP 中将多个 CSS 文件合并为一个

> ID：15128561
> 
> 赞同：0
> 
> 时间：2013-02-28T06:02:51.743
> 
> 标签：php, css-parsing

我正在研究一个将多个 CSS 合二为一的脚本。这是脚本。

```
 $full_string = "";

    foreach($allfiles as $curfile => $file) {           
        $file = $PATH[$curfile] . $file;
        $file_open = fopen($file , 'r');
        $concat = "\n" . fread($file_open , filesize($file)) . "\n";
        $full_string .= $concat;
        fclose($file_open);
    }

    return $full_string; 
```

在这里，我将所有 CSS 文件合并为一个。但现在的问题是我必须将当前的 CSS($file) 与另一个 css 进行比较（让我们将其视为`overrider.css`）。如果 $file 具有类似的样式，

```
h1 {
    color: white; 
    background: teal; 
    FONT-FAMILY: arial, helvetica, lucida-sans, sans-serif; 
    FONT-SIZE: 18pt; 
    FONT-STYLE: normal; 
    FONT-VARIANT: normal;
}

body 
{
    font-family: arial;
    FONT-SIZE: 14px; 
} 
```

如果 overrider.css 具有类似的样式，

```
body 
{
    font-family: Calibri;
    color: #3E83F1; 
} 
```

那么最终生成的 CSS(output.css) 应该是，

```
h1 {
    color: white; 
    background: teal; 
    FONT-FAMILY: arial, helvetica, lucida-sans, sans-serif; 
    FONT-SIZE: 18pt; 
    FONT-STYLE: normal; 
    FONT-VARIANT: normal;
}

body 
{
    font-family: Calibri;
    FONT-SIZE: 14px;
    color: #3E83F1;
} 
```

在这里，由于 body 中的 style `override.css`，`font-family`它替换了原始 CSS 中的 font-family 属性，并且由于颜色是原始 CSS 文件 ($file) 中不存在的新属性，因此它应该将该属性添加到 original CSS 文件。那么如何在 PHP 中实现这一点，因为我对解析 CSS 没有任何想法。对此的任何想法将不胜感激。

请注意，我需要通过将输入作为 file1($file) 和 file2(override.css) 来生成一个新的 CSS 文件，并且我们需要生成 output.css 并覆盖样式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:49:43.670

有一些可用的 CSS 解析器（谷歌“php css 解析器”），比如我没有尝试过的[这个，但看起来很有趣。](https://github.com/sabberworm/PHP-CSS-Parser)但就我个人而言，我会自己进行解析 - 遵循那种伪 PHP 算法

*   将所有文件读入一个字符串`Str`，将所有“\n”、“\r”和“\t”替换为空格（以使解析（有点）更容易）

然后，处理函数（选择器 => 规则）

```
func deal with selectors and rules:

rules = array()
do {
  S = string from current pos to next `{` excluded (selectors)
  R = string from '{' to next '}' (rules)
  r = explode(';', R) 
  lr = make array of rules from r trimmed elements
  s = explode (',', S)
  ls = make array of [selector => lr]

  // same sel: latest rule overwrite existing, added if not exist
  merge ls into rules 
} while (not '}' and not '@' and not EOF); // the '}' would be the closing media

return rules 
```

处理媒体的main函数，然后调用上面的函数

```
medias = array();

func deal with Str
do {
  if (first non blank char is @) {
     media = array of listed medias
     eat fist '{'
  }
  else {
     media = array ('GLOBAL')
  }
  selectorsrules = deal with selectors and rules(rest of Str)

  foreach (media as m) {
    merge in medias(m) selectorsrules, same procedure as above
  }
} while (not EOF); 
```

有趣的项目，但我没有时间完全实施它。结果在`medias`数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:05:03.637

如果您想`font-family: arial;`申请，请将其添加为`font-family: arial !important;`

您无需担心合并它们，因为浏览器会自动将颜色从第一个 css 中找到的第二个 css 颜色添加到 body 标签，然后它会用第二个 css 覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:13:55.563

您有 2 个选择：

1.  简单的方法是更改​​您的 css 文件并添加 !important 在那里很重要的地方。例如，在 css 中有超过 1 次的“body”是正确的。每当您要覆盖的样式时，请离开它。当然，这种方法大多是手动的。您必须知道它将被覆盖的位置以及不会覆盖的位置。

2.  第二种方法需要字符串解析、正则表达式，我的意思是你应该知道如何解析它们。您应该获取每个文件的内容，将它们保存为字符串，并且您应该使用正则表达式将它们与两者中是否存在标签进行比较，然后合并标签内容。这种方式说起来容易做起来难。

# api - 为所有类型的客户端设备设计 REST API 的策略

> ID：15128562
> 
> 赞同：0
> 
> 时间：2013-02-28T06:02:57.833
> 
> 标签：api, rest

该问题更针对服务器端开发。

在编写 REST API 时，我想以这样一种方式编写它，以便桌面和移动应用程序都可以使用它。

可以看到两种可能的方法：

1.  每个 API 都应该支持分页，并且应该将一次性获取多少数据的责任委托给客户端。因此，移动应用程序将一次性要求更少的页面，而桌面应用程序将要求更多。

2.  单独托管的移动设备的单独 API。前端 Web 服务器可以检查用户代理（即请求的来源），如果它是移动设备，则将请求重新路由到托管移动设备 API 的服务器。

有兴趣了解有关此的更多策略。

感谢您的投入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:21:09.710

我会推荐更接近选项（1）的东西。如果客户端之间的主要区别在于它们一次请求的数据量，那么在 REST API 中添加某种查询参数或 HTTP 标头来指示要返回的记录数似乎是微不足道的。

依靠检查`User-Agent`标头可能需要您维护已知客户端用户代理的列表并与它们匹配，这将是单独 API 的额外维护成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:46:36.360

我会建议（1）和（2）两者，这就是方法。

与其为移动设备本身重新构建全新的 api，不如为所有受支持的设备提供适配器。即在您的 REST API 实现之上有一个层，它呈现/指示底层服务返回适合所选移动设备的内容。

来到分页，您可以将分页参数化为上述抽象的输入。

# html - 需要显示一定的列表样式

> ID：15128565
> 
> 赞同：0
> 
> 时间：2013-02-28T06:03:15.807
> 
> 标签：html, css

我需要在我的 ul 列表中显示 ➢ 列表类型而不是默认的项目符号类型。

是否有会显示它的列表类型？还是只能显示为背景图片？拥有该列表类型的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:16:51.693

属性中没有这样的子弹`list-style-type`，但幸运的是还有其他方法可以做到：

1.  `list-style-image`属性 - 只需指定图像的 url 。
2.  `:after`or`:before`伪类：

```
li{
    list-style-type: none
}
li:before{
    content: "➢"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:07:48.823

我不相信该特定图像有默认的项目符号类型，但是，您可以[添加自定义项目符号](http://www.macworld.com/article/1048296/januarycreate.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:14:15.773

我将使用这个 CSS：

```
ul{
    list-style-image: url('yourlisticon.gif');
} 
```

# asp.net - 实体框架：关系错误

> ID：15128574
> 
> 赞同：1
> 
> 时间：2013-02-28T06:03:55.863
> 
> 标签：asp.net, entity-framework

我试图优化我的网站的性能，所以我在执行关于在编译时生成视图的要点时遵循了[这些规则](http://msdn.microsoft.com/en-us/library/cc853327.aspx) ，我必须创建`.edmx`文件，在创建此文件后并按照我面临的所有步骤操作这个问题：

```
Schema specified is not valid. Errors: 
The property for the relationship 'FK_dbo_X_dbo_Y_x_id' contains a Role 'X' has a type 'Site.Models.X' that is not valid for a relationship End. Change the End Role to an EntityType. 
```

对于我拥有的每一个关系。

谁能告诉我如何解决这个错误？

**更新 ：**

我如何定义我的关系

在模型中：

```
 [ForeignKey("foreign_id")]
    public EntityCollection<MyClass> relation_obj { get; set; } 
```

在 DbContext 中：

```
modelBuilder.Entity<X>().HasMany(m => m.relation_obj ); 
```

关系组装：

```
[assembly: EdmRelationshipAttribute("DBModel", "FK_dbo_X_dbo_Y_x_id", "X", System.Data.Metadata.Edm.RelationshipMultiplicity.One, typeof(Site.Models.X), "Y", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(Site.Models.Y), true)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:13:27.667

您的问题是您定义为没有映射到数据库的导航属性类（您自己定义的类）。不要这样做。实体框架无法使用此类导航属性。[您可以在此处](http://blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first)阅读有关导航属性的更多信息。

问题在这里：

```
[assembly: EdmRelationshipAttribute("DBModel", "FK_dbo_X_dbo_Y_x_id", "X", System.Data.Metadata.Edm.RelationshipMultiplicity.One, typeof(Site.Models.X), "Y", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(Site.Models.Y), true)] 
```

来自 MSDN：

"

```
public EdmRelationshipAttribute(
    string relationshipNamespaceName,
    string relationshipName,
    string role1Name,
    RelationshipMultiplicity role1Multiplicity,
    Type role1Type,
    string role2Name,
    RelationshipMultiplicity role2Multiplicity,
    Type role2Type
) 
```

参数

relationshipNamespaceName 类型：System.String 此实体参与的关联的命名空间的名称。

relationshipName 类型：System.String 此实体参与的关系的名称。

role1Name 类型：System.String 关联一端类型的角色名称。

role1Multiplicity 类型：System.Data.Metadata.Edm.RelationshipMultiplicity 一个表示关联一端的多重性的值，例如一个或多个。

role1Type 类型：System.Type关联一端的**实体类型。**

role2Name 类型：System.String 关联另一端类型的角色名称。

role2Multiplicity 类型：System.Data.Metadata.Edm.RelationshipMultiplicity 一个表示关联另一端的多重性的值，例如一个或多个。

role2Type 类型：System.Type关联另一端的**实体类型。**"

所以 role1Type 和 role2Type 应该是实体。不是您自己定义的类。

# xml - XML Schema 中元素内的元素

> ID：15128578
> 
> 赞同：0
> 
> 时间：2013-02-28T06:04:12.510
> 
> 标签：xml, xsd

是否可以在“帐户”元素下强制要求至少一项选择？（或）是否可以在“帐户”元素下默认一个选项？

```
<xs:element name="Account">
  <xs:complexType>
   <xs:choice>
     <xs:element name="User" type="tns:users"/>
     <xs:element name="Group" type="tns:groups"/>
   </xs:choice>
  </xs:complexType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:25:24.997

如果“要求至少一个选择”是指要求至少出现一个用户或组，那么是的，你可以，你展示的 XSD 片段就是这样做的。如果您的意思是要求用户（例如）在每个帐户下至少出现一次，那么再次是的，您可以，但在这种情况下，您显示的片段不会这样做。

如果通过“默认一个选择”，您的意思是如果文档实例既不包含用户也不包含组，则假设用户（例如），那么不，我所知道的任何 XML 模式语言都没有这种能力（但当然是您的行为处理软件仅受您自己的聪明才智的限制）。另一方面，如果“默认选项”是指在 XML 文档实例包含空的 Group 元素时为 Group 提供默认值，那么是的，如果 Group 具有简单类型，则这是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:57:28.783

如果我正确理解了问题的第一部分，则`Account`元素必须有一个子元素`User`或一个子元素`Group`或两者兼有——但它不能没有子元素，也不能有多个`User`或`Group`子元素。

如果这是要求，请使用：

```
<xs:element name="Account">
  <xs:complexType>
    <xs:choice>
      <xs:sequence>
        <xs:element name="User" type="tns:users"/>
        <xs:element name="Group" type="tns:groups" minOccurs="0"/>
      </xs:sequence>
      <xs:element name="Group" type="tns:groups"/>
    </xs:choice>
  </xs:complexType>
</xs:element> 
```

I am not sure what you mean by 'default one choice' in the second part of the question.

# c# - 需要消息编辑器的行为与 Windows Phone 8 中的行为相同

> ID：15128581
> 
> 赞同：1
> 
> 时间：2013-02-28T06:04:15.560
> 
> 标签：c#, windows-phone-8

我正在开发 Windows Phone 8 应用程序。

在 windows phone 8 中，当我们想要通过单击“+”（新）图标来发送新文本时，屏幕显示为 To：并带有加号图标以添加联系人和消息文本框以发送消息，默认焦点为 To：当我们当我们选择它放置的任何联系人时，键入它搜索并在列表中显示以下联系人的文本“;” 在每个联系人之后，我们可以添加多个联系人以将消息发送给所有人。

而当我们尝试清除“;”之后的内容时 它将清除整个文本。

通过单击选定的联系人，它会被重定向到特定联系人的另一个页面，其中包含“打开”、“删除”、“复制”、“取消”..

我的项目中需要与我们在应用程序中提供消息传递行为相同的功能。我收集了我的联系人......我在此[链接](http://windowsphonegeek.com/articles/autocompletebox-for-wp7-in-depth)中看到了“AutoCompleteBox”，但我不允许选择多个联系人......我们可以实现这个..我在telerik中也看到过“自动完成框”同样的问题。我们如何选择多个联系人，用分号清除功能并使它们可以像在windows phone 8中一样点击......请任何人帮我解决我的问题....

# javascript - .is() 在 Cheerio 中不存在吗？

> ID：15128582
> 
> 赞同：0
> 
> 时间：2013-02-28T06:04:16.103
> 
> 标签：javascript, jquery, css, node.js, cheerio

我需要检查一个元素是否是这样的最后一个孩子

[确定元素是否是其父元素的最后一个子元素](https://stackoverflow.com/questions/4209605/determining-if-the-element-is-the-last-child-of-its-parent)

但是我在node.js上使用cheerio而不是jquery（为了更轻的重量）

[https://github.com/MatthewMueller/cheerio](https://github.com/MatthewMueller/cheerio)

它给了我错误：

```
TypeError: Object XXXXXXX has no method 'is' 
```

有人可以确认吗？如果是这样，检查节点是否是最后一个孩子的优雅方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:07:00.373

这是一个示例，它添加了一种`isLastSibling`方法来检查元素是否是最后一个兄弟元素。

```
var cheerio = require('cheerio'),
    $ = cheerio.load('<p><a>1</a><b>2</b><i>3</i></p>'),
    $fn = Object.getPrototypeOf($());

$fn.isLastSibling = function() {
    return this.parent().children().last()[0] === this[0];
};

console.log(
    $('a').isLastSibling(),
    $('b').isLastSibling(),
    $('i').isLastSibling()
); 
```

您应该得到的输出是`false false true`因为`<a>`and`<b>`元素不是最后一个兄弟，但`<i>`元素是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:12:42.037

尝试

```
<script type="text/javascript">

    $(function()
    {
        $('dom').each(function()
        {
            var $this = $(this);
            if ( $this === $this.parent().last())
            {
                alert('got me!');
            }
        })
    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:23:33.823

检查`jquery version`它正在使用？

你可以用`last-child-selector`这个

例如： `$("div span:last-child").css('background','red');`

这是文档[http://api.jquery.com/last-child-selector/](http://api.jquery.com/last-child-selector/)

# vim - 书呆子树插件安装后的 Vim 语法高亮显示

> ID：15128592
> 
> 赞同：0
> 
> 时间：2013-02-28T06:04:32.400
> 
> 标签：vim, apache-pig, nerdtree

我有用于 Vim 的 Pig 插件，到目前为止它运行良好。但是在我尝试加载第二个猪脚本文件后突然语法突出显示消失了。只有当我加载单个 Pig 文件时它才能正常工作。当我尝试通过拆分或书呆子树加载另一个 Pig 文件时，第二个 Pig 文件没有语法突出显示。我刚刚安装了书呆子树插件，安装后我看到了这个奇怪的问题。与书呆子树插件是否有任何冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:48:16.367

当你这样做

```
:autocmd filetypedetect BufRead *.pig 
```

`setf pig`应该列出一行。如果不是，则说明您没有正确安装文件类型检测，如[插件页面](http://www.vim.org/scripts/script.php?script_id=2186)中所述。顺便说一句，与那里的说明相反，脚本片段最好放在`~/.vim/filetype.vim`, not中`~/.vimrc`，但这没关系。

因此，将以下内容放入`~/.vim/filetype.vim`：

```
augroup filetypedetect
    autocmd BufNewFile,BufRead *.pig setf pig
augroup END 
```

重启 Vim，然后检查；这条线现在应该在那里。

# windows - 从 mac 访问 windows localhost

> ID：15128595
> 
> 赞同：2
> 
> 时间：2013-02-28T06:04:54.090
> 
> 标签：windows, macos, virtual

我在我的 Mac 上安装了并行程序，并将 Windows 8 安装为虚拟机。我能够在 Windows 8 的 mac localhost 上运行一个应用程序，但现在我想在 mac 上运行一个 .net 应用程序（即`localhost:50055`）。我已经阅读了许多解决方案，但没有一个对我有用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T22:43:39.110

我也为此猛烈抨击了几个小时，我认为最后，我缺少的部分是关闭 Windows 8 的防火墙。

这个被接受的解决方案是让我关闭防火墙的原因，只要我这样做了，它就起作用了。 [从 Mac 访问 Parallels Windows localhost](https://stackoverflow.com/questions/2673595/access-parallels-windows-localhost-from-mac)

根据 Matt Gibson 的解决方案，您可能还必须在 IIS 管理器的身份验证设置中“启用”匿名身份验证。

我最终做了什么：

*   通过拉起命令提示符并键入 ipconfig 找到 VM 的 IP 地址
*   通过添加 VM 的 IP 地址更新了我的 Mac 的主机文件（在我的例子中是 10.211.55.3）
*   检查 Parallels VM 设置 -> 配置 -> 硬件设置为共享网络
*   Windows 防火墙 - 为专用网络设置关闭（控制面板\系统和安全\Windows 防火墙\自定义设置）
*   检查 IIS 身份验证 -> 启用匿名身份验证

这对我有用，希望它也对你有用。

# virtual-machine - 如何在虚拟机和主机之间共享数据？

> ID：15128597
> 
> 赞同：1
> 
> 时间：2013-02-28T06:04:55.617
> 
> 标签：virtual-machine

我已经安装了 Windows7 32 位虚拟机和 Win7 64 位作为主机。我想在虚拟机和主机之间共享数据。如何在两台机器之间共享数据？

我正在使用 VMWare 运行虚拟机。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:12:16.930

[https://www.vmware.com/support/ws4/doc/running_sharefold_ws.html](https://www.vmware.com/support/ws4/doc/running_sharefold_ws.html)

您可以安装 VMWare 工具来共享文件夹，以便在来宾操作系统和主机操作系统之间共享文件。在上述文章中，不包括 Windows 7，您可以跨 Windows 7 共享文件。

# form-submit - 向多个 url 提交表单

> ID：15128598
> 
> 赞同：0
> 
> 时间：2013-02-28T06:04:55.970
> 
> 标签：form-submit

如何在一次点击中向多个 URL 提交表单？如下（假设）：

```
<form action="url1" action="url2" method="post">
  ...
  <input type=submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:07:25.707

您可以进行顺序提交。

提交到第一个 URL，并使用原始表单中的所有字段创建一个隐藏表单。

处理完表单后，如果需要，通过javascript调用提交动作，进入第二个动作。

# java - JButton 在动作上的平滑移动

> ID：15128611
> 
> 赞同：1
> 
> 时间：2013-02-28T06:05:31.523
> 
> 标签：java, swing, animation, concurrency, jbutton

如果执行了操作（例如按下按钮），我如何才能顺利移动 JButton。这是我的例子，但它不能正常工作：

```
 public void actionPerformed(ActionEvent event) {
   for(int i = 0; i<50; i++){
          ww.button.setLocation(ww.button.getLocation().x+1, ww.button.getLocation().y);//ww is a JFrame child
      try {
        Thread.sleep(20);

    } catch (InterruptedException e) {
        e.printStackTrace();
    }

   } 
```

执行操作后，我得到了 20*50 毫秒的延迟，并且按钮位置设置在前一个 loc + 50px 中，没有中间位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:08:50.497

`Thread`在使用 Swing 时始终尽量避免。在您的代码中，它会使 EDT 主线程进入睡眠状态，这就是您无法查看中间位置的原因。使用[Swing Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)试试这个，你会得到它按预期工作。看看这里：[如何使用 Swing Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)并尝试使用[Swing workers](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

# json - 使用json数组时获取列表中的最后一个元素

> ID：15128618
> 
> 赞同：0
> 
> 时间：2013-02-28T06:05:52.160
> 
> 标签：json, list, jsp

在将列表传递给 json 对象时，我无法读取所有元素 .. 它仅显示我最后存储的列表

```
 List<String> list = new ArrayList<String>();   
 for (int i=0 ; i<columnCount ; i++)
 {
     while (rs.next())
     {
         list.add(rs.getString(rsMetaData.getColumnName(i+1)));
     }
     json.put(rsMetaData.getColumnName(i+1), list);

     //json.accumulate(rsMetaData.getColumnName(i+1), list);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:04:33.990

1.  ResultSet 是一个迭代器，只针对第一列迭代一次。
2.  List-Object 只创建一次，并多次存储到 json。即使您存储第一列的列表，您也会在第二列中更改此第一列的值。

试试这个：

```
while (rs.next()) {
    for (int i=0; i < columnCount; i++) {
        String columnName = rsMetaData.getColumnName(i+1);
        List<String> list = new ArrayList<String>();
        if (json.get(columnName) == null) {
            json.put(columnName, list);
        } else {
            list = (List<String>)json.get(columnName);
        }
        list.add(rs.getString(columnName));

    }
} 
```

顺便说一句：json 不支持重复的 columnNames

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:13:12.203

最后我得到了答案……这是我的代码

尝试 { HashMap map= new HashMap(); 列表列表 = 新的 ArrayList();

```
 int col = 0;
                while (rs.next())
                 {
                    values = new JSONObject(); 
                    for (int i=0 ; i<columnCount ; i++)
                     {
                         values.put(rsMetaData.getColumnName(i+1),rs.getString(rsMetaData.getColumnName(i+1)));
                     }      
                     list.add(col, values.toString());
                     System.out.println(list.toString());
                     col++;
                 }
                json.put("gaea", list);

            }//try block end 
```

# asp.net-mvc-4 - 如何在 MVC4 中实现单点登录

> ID：15128624
> 
> 赞同：4
> 
> 时间：2013-02-28T06:06:15.580
> 
> 标签：asp.net-mvc-4, cross-domain, single-sign-on

如何在跨域 MVC4 Web 应用程序中实现单点登录 (SSO)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T06:41:45.347

`domain`通过将表单身份验证 cookie 的属性设置为根域并为两个应用程序配置相同的机器密钥，可以轻松实现相同的域 SSO 。

跨域 SSO 更具挑战性。有不同的技术来实现它。例如 StackExchange 使用 HTML5 本地存储。它们的机制在 中进行了描述[`this blog post`](https://blog.stackoverflow.com/2010/09/global-network-auto-login/)。

以下是一些基本步骤：

1.  设置主域供用户登录。例如 logon.com
2.  当未经身份验证的用户尝试访问 2 个应用程序中的一些应用程序上的受保护资源时，他将被重定向到登录域进行身份验证。
3.  用户进行身份验证，登录域生成一个会话标识符，其中包含登录用户的用户名。此会话 id 使用对称算法加密，并在 3 个域之间共享秘密。登录域还设置了一个表单身份验证 cookie，以指示用户已经在那里进行了身份验证。
4.  登录域重定向回传递会话标识符的受保护资源。
5.  持有受保护资源的应用程序解密会话 id 以提取用户名并在其域上设置表单身份验证 cookie。
6.  用户请求第二个域上的受保护资源。
7.  由于他尚未通过身份验证，他被重定向到登录域。
8.  用户已在登录域上通过身份验证，并且使用相同技术生成会话标识符并传回
9.  第二个域解密会话标识符以提取用户名并为第二个域发出表单身份验证cookie。

作为将用户名加密到会话标识符中的替代方法，登录域可以将此信息简单地存储到共享（在 3 个域之间）数据存储中，并且会话标识符将只是此记录的标识符，以便其他域可以检索此共享数据存储中的用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:15:08.643

最后，我能够实施。以下是我已经完成的步骤

*   登录 App1
*   获取使用 App2 登录的选项
*   点击“使用 App2 登录”</li>
*   重定向到 App2 的登录屏幕
*   单击重定向到 SSOInMVCWcfService 的 App2 的登录按钮。这里Login方法调用App1的服务即SSOAuthService的方法Authenticate。如果经过身份验证，则为该用户名生成令牌，并从 App1 的服务中检索用户 ID。
*   一旦为这个经过身份验证的用户生成令牌并检索到用户 ID，这些值就会输入到数据库中的表中，比如“SessionDetails”。
*   然后将当前用户的 userid 和 token 发送到 App2。
*   现在 App2 通过将这些值添加为响应对象中的 cookie 将返回 URL （即 app1 的经过身份验证的页面 url）连同用户 ID 和令牌一起发送到 App1 的登录页面。
*   现在在 App1 登录页面上，检索这些 cookie，并根据用户 ID 从“SessionDetails”表中检索当前用户名。

# iphone - 传递 NSTimer 有参数

> ID：15128636
> 
> 赞同：0
> 
> 时间：2013-02-28T06:07:02.130
> 
> 标签：iphone, objective-c, unit-testing, ocunit

我有一个方法，它`NSTimer`的参数在 A 类中

```
-(void)demoMethod:(NSTimer *)timer{
    //Do something!
} 
```

现在我已经涵盖了该方法的测试用例：

```
-(void)testDemoMethodPassNilTimer{

    //Created class Instance for the ClassA

    ClassA *testA = [[ClassA alloc]init];

    //[test testDemoMethod:nil];

    STAssertThrows([testA testDemoMethod:nil],@"should throw exception");

}

-(void)testDemoMethodPassTimer{

    ClassA *testA = [[ClassA alloc]init];
    STAssertNoThrows([testA testDemoMethod:??????]);
} 
```

`NSTimer`为测试用例方法传递 Object 参数的正确方法应该是什么`testDemoMethodPassTimer`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:02:03.807

给它一个实际的计时器对象，但不要将它安排在运行循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:42:23.940

我也需要将参数解析为 NSTimer。所以我想出了创建类别类，这对我有帮助。

**以下是在 NSTimer 上创建 Category 类的步骤。**

1.  右键单击项目并选择“新建文件”
2.  Cacoa Touch > Objective-C 分类 > Next
3.  给类别：添加和类别：NSTimer
4.  在 .h 文件中只需创建 placeId 的属性
5.  在 .m 中使用 @dynamic 合成它并创建 setter、getter
6.  在您的文件中导入该 .h 文件。

**NSTimer+additions.h 文件**

```
#import <Foundation/Foundation.h>

@interface NSTimer (additions)

     @property(nonatomic,retain)    NSString  *additionalTag;

@end 
```

**NSTimer+additions.m 文件**

```
#import "NSTimer+additions.h"
#import <objc/runtime.h>

NSString *const additionalTagKey = @"additionalTagKey";

@implementation NSTimer (additions)
@dynamic additionalTag;

- (void)setAdditionalTag:(NSString*)aObject
{
    objc_setAssociatedObject(self, additionalTagKey, aObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}
- (NSString*)additionalTag
{
    return objc_getAssociatedObject(self, additionalTagKey);
}

@end 
```

**现在`#import "NSTimer+additions.h"`在你的课堂上使用 NSTimer**

**将参数传递给 NSTimer**

```
-(void)testDemoMethodPassTimer{

    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0f
                              target:self
                              selector:@selector(timerTick:)
                              userInfo:nil
                              repeats:YES];
    timer.additionalTag = @"parameter passed to timer";

    ClassA *testA = [[ClassA alloc]init];
    STAssertNoThrows([testA testDemoMethod:timer]);
} 
```

**从计时器中检索参数**

```
-(void)demoMethod:(NSTimer *)timer{
    NSLog(@"My Parameter: %@",timer.additionalTag);
} 
```

涉及许多步骤，但希望对您有所帮助。:)

# html - css中div的替代行颜色

> ID：15128643
> 
> 赞同：1
> 
> 时间：2013-02-28T06:07:36.920
> 
> 标签：html, css, css-selectors, pseudo-class

我正在尝试通过使用向 div 添加替代行颜色`nth-child(odd)`。

我需要为具有类名的 div 添加替代颜色，`alternative_cls`而不是为具有不同类名的 div 添加替代颜色。

但问题是它没有跳过具有不同类名的 div，替代颜色正在应用，包括名为 div 的不同类。

这是[**代码小提琴**](http://jsfiddle.net/Dfy59/2/)

我想要的是

![在此处输入图像描述](../Images/5380f806297773c38827d973e31aee6d.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T06:36:36.407

你去[http://jsfiddle.net/Dfy59/6/](http://jsfiddle.net/Dfy59/6/)

**解释：**

根据[定义](http://www.w3schools.com/cssref/sel_nth-child.asp)，一个 CSS`n-th:child`选择器

*匹配其父元素的第 n 个子元素，无论其类型如何。*

因此，让我们以您的代码为例（并首先删除 no_bg 节点）：

```
.alternative_cls:nth-child(odd){
    background:#ccc;
} 
```

像这样应用：

```
<div class="alternative_cls"> <!-- alternative_cls(n)=1, odd so apply = (grey) -->
    ssf
</div>
<div class="alternative_cls"> <!-- alternative_cls(n)=2, even so don't apply = (transparent) -->
    ssf
</div>
<div class="alternative_cls"> <!-- alternative_cls(n)=3, odd so apply = (grey)-->
    ssf
</div>
<div class="alternative_cls"> <!-- alternative_cls(n)=4, even so don't apply = (transparent) -->
    ssf
</div>
..
etc 
```

当您在其间插入具有不同类的 div 时会发生混淆，当这种情况发生时，css 仍将入侵者 div 视为 的兄弟`.alternative_cls`，但随后不会将 css 应用于它：

```
<div class="alternative_cls">  <!-- alternative_cls(n)=1, odd so apply = (grey) -->
    ssf
</div>
<div class="no_bg">  <!--alternative_cls(n)=2, but don't apply alternative_cls, just apply no_bg = (pink) -->
    ssf
</div>
<div class="alternative_cls">  <!-- n=3, odd so apply = (grey) NOTE: you'd expect the nth-child selector to skip the last node.. but it didn't, which caused the confusion -->
    ssf
</div>
<div class="alternative_cls"> <!-- n=2, even so don't apply = (transparent) -->
    ssf
</div>
<div class="alternative_cls">  <!-- n=3, odd so apply = (grey)-->
    ssf
</div>
<div class="alternative_cls">  <!-- n=4, even so don't apply = (transparent) -->
    ssf
</div> 
```

我知道这一点的方法是查看我的 chrome 开发工具并使用 jquery 选择器：

```
$('.alternative_cls:nth-child(1)') 
```

返回

```
[<div class="alternative_cls">
    ssf
</div>] 
```

但是（**这是违反直觉的部分**）

```
$('.alternative_cls:nth-child(2)') 
```

返回

```
[] 
```

您希望此选择器在 no_bg div 之后立即返回节点。**但事实并非如此！**

继续..

```
 $('.alternative_cls:nth-child(3)') 
```

返回

```
[<div class="alternative_cls">
    ssf
</div>] 
```

（我建议你自己试试这个概念）

所以要解决这个问题，您只需将 css 设置为

```
.alternative_cls{
    width:100%;
    height:60px
}
.alternative_cls:nth-child(1), .alternative_cls:nth-child(even){
    background:#ccc;
}
.no_bg{
     width:100%;
    height:60px;
    background:#f8d6d6
} 
```

这发生了

```
<div class="alternative_cls">  <!-- n=1, apply the nth-child(1) rule = (grey) -->
    ssf
</div>
<div class="no_bg">   <!--alternative_cls(n)=2, but don't apply alternative_cls, just apply no_bg = (pink) -->
    ssf
</div>
<div class="alternative_cls">  <!-- n=3, odd, so don't apply any rule = (transparent)-->
    ssf
</div>
<div class="alternative_cls"> <!-- n=2, even so apply the nth-child(even) rule = (grey) -->
    ssf
</div>
<div class="alternative_cls">  <!-- n=3, odd, so don't apply any rule = (transparent)-->
    ssf
</div>
<div class="alternative_cls">  <!-- n=4, even so apply the nth-child(even) rule = (grey) -->
    ssf
</div> 
```

我希望这清楚.. 所以有了这些知识，你可以继续使用第 n 个子选择器，你只需要考虑这个特殊性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T06:35:32.890

这是否适合您的需求？：

```
.alternative_cls:first-child,
.alternative_cls:nth-child(2n){
  background:#ccc;
} 
```

[jsFiddle](http://jsfiddle.net/earthdesigner/DWcHD/1/ "jsFiddle")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:01:44.063

我已将 .no_bg div 移至 .alternative_cls，现在它工作正常。

```
<div class="alternative_cls">
    ssf
    <div class="no_bg">
    ssf
</div>
</div>
<div class="alternative_cls">
    ssf
</div>
<div class="alternative_cls">
    ssf
</div>
<div class="alternative_cls">
    ssf
</div>
<div class="alternative_cls">
    ssf
</div> 
```

**[演示](http://jsfiddle.net/Dfy59/7/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:07:36.840

正如其他答案中已经说过的那样，第 n 个子选择器会计算子代数，仅此而已；你可以做任何事情来改变它。如前所述，您可以将导致问题的 div 放在第一级子级之外。

如果这是一个问题，另一种方法是将该元素更改为另一种不是**div**的类型。然后，您可以使用仅计算 div**的 div:nth-of-type(even)**。

另一种方式是，您需要以某种方式更改您的 DOM。

# ruby-on-rails - 作为标签上的行为无法找到属于包含空格和非英文字符（例如åäö）的标签的项目

> ID：15128647
> 
> 赞同：0
> 
> 时间：2013-02-28T06:07:39.467
> 
> 标签：ruby-on-rails, ruby, acts-as-taggable-on

我正在使用以下代码来检索所有带有特定标签的产品。

```
tag = The tag for the products which you would like to find

Product.tagged_with(tag, :on => "product_tags").each do |product|
  # CODE
end 
```

这适用于大多数标记的项目。但我无法检索标有包含瑞典字符 åäö 和空格的标签的产品。

Act as taggable 将找到带有“ab c”标签的产品，但无法找到带有“å ä ö”标签的产品。

用“å ä ö”标记产品效果很好。当请求带有“å ä ö”标签的产品的所有标签时，该标签将显示。唯一的问题是找到所有标有“å ä ö”的产品。

我应该怎么做才能让作为标记的行为与 åäö 一起正常工作？这可能是编码问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:35:06.360

您可以在执行时向我们展示数据库查询吗

```
Product.tagged_with(tag, :on => "product_tags") 
```

它将帮助您确定是acts_as_taggable 问题还是您的数据库列编码。

# java - 欧拉问题10 没有得到输出

> ID：15128651
> 
> 赞同：-3
> 
> 时间：2013-02-28T06:07:58.383
> 
> 标签：java

我在 20 多分钟内得到输出有什么办法可以减少快速输出的时间

```
public class Problem10 {
public static void main(String[] args) {
long temp =0;   
 int n=2000000;
 for(long i=2; i<n; i++){
 System.out.println((i));
     boolean isprime = true;
  for(long j=2; j<i; j++){
       if(i%j==0){
        isprime =false;    
           break;
          }
      }

  if(isprime)
   {temp +=i;

   }

  }
   System.out.println(temp);

} 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:17:20.207

如果我计算您的程序的复杂度大致为`BigO(n*n)`. 在这里，如果`n`value 是`2000000`，那么将需要`2000000 * 2000000`迭代来完成整个任务。

这是非常大量的时间。我建议您将`println`with 放入循环中，以提醒您它仍在运行。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:21:58.563

Your data type is too small to hold the value so change it either in **long** or BigInteger type to optimization you can change your lncorrect logic to other logic. see the project euler site

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:09:11.757

将 temp 和 int 的数据类型更改为 long 它会起作用

# android - 如何将（垂直）分隔线添加到水平 LinearLayout？

> ID：15128652
> 
> 赞同：98
> 
> 时间：2013-02-28T06:08:16.003
> 
> 标签：android, android-layout, android-linearlayout, divider

我正在尝试将分隔线添加到水平线性布局，但无处可去。分隔线只是没有显示。我是 Android 的新手。

这是我的布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/llTopBar"
        android:orientation="horizontal"
        android:divider="#00ff00"
        android:dividerPadding="22dip"
        android:showDividers="middle">

        <Button
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:text="asdf" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:text="asdf" />

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-02-28T06:17:09.770

将此用于水平分隔线

```
<View
    android:layout_width="1dp"
    android:layout_height="match_parent"
    android:background="@color/honeycombish_blue" /> 
```

这对于垂直分隔线

```
<View
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="@color/honeycombish_blue" /> 
```

或者，如果您可以使用 LinearLayout 分隔线，用于水平分隔线

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <size android:height="1dp"/>
    <solid android:color="#f6f6f6"/>
</shape> 
```

在线性布局中

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="@drawable/divider"
    android:orientation="vertical"
    android:showDividers="middle" > 
```

如果您想使用垂直分隔线，则代替`android:height="1dp"`形状使用`android:width="1dp"`

提示：**不要忘记**该`android:showDividers`项目。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-02-28T06:24:31.967

试试这个，在`res/drawable`文件夹中创建一个分隔符：

vertical_divider_1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">    
    <size android:width="1dip" />
    <solid android:color="#666666" />    
</shape> 
```

并`divider`像这样使用 LinearLayout 中的属性：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:orientation="horizontal"
    android:divider="@drawable/vertical_divider_1"
    android:dividerPadding="12dip"
    android:showDividers="middle"
    android:background="#ffffff" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

**注意：** `android:divider`仅适用于 Android 3.0（API 级别 11）或更高版本。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-10-21T06:51:33.717

在布局中添加分隔线很容易，我们不需要单独的视图。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:divider="?android:listDivider"
    android:dividerPadding="2.5dp"
    android:orientation="horizontal"
    android:showDividers="middle"
    android:weightSum="2" ></LinearLayout> 
```

上面的代码为`LinearLayout`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-03-13T16:08:36.000

### 更新：使用 AppCompat 的 pre-Honeycomb

如果您使用的是 AppCompat 库 v7，您可能需要使用该`LinearLayoutCompat`视图。使用这种方法，您可以在 Android 2.1、2.2 和 2.3 上使用可绘制分隔线。

**示例代码：**

```
<android.support.v7.widget.LinearLayoutCompat
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:showDividers="middle"
        app:divider="@drawable/divider"> 
```

**drawable/divider.xml：（**顶部和底部有一些填充的分隔线）

```
<?xml version="1.0" encoding="UTF-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
        android:insetBottom="2dp"
        android:insetTop="2dp">
    <shape>
        <size android:width="1dp" />
        <solid android:color="#FFCCCCCC" />
    </shape>
</inset> 
```

**非常重要的注意事项：**视图`LinearLayoutCompat`不会扩展`LinearLayout`，因此您不应使用`android:showDividers`or`android:divider`属性，而应使用自定义属性：`app:showDividers`and `app:divider`。在代码中，您还应该使用`LinearLayoutCompat.LayoutParams`not `LinearLayout.LayoutParams`！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-03-31T16:55:13.483

我今天遇到了同样的问题。正如前面的答案所示，问题源于在分隔标签中使用颜色，而不是可绘制对象。但是，与其编写自己的可绘制 xml，我更喜欢尽可能多地使用主题属性。您可以使用 android:attr/dividerHorizo​​ntal 和 android:attr/dividerVertical 来获取预定义的可绘制对象：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:showDividers="middle"
    android:divider="?android:attr/dividerVertical"
    android:orientation="horizontal">
    <!-- other views -->
</LinearLayout> 
```

这些属性在 API 11 及更高版本中可用。

此外，正如 bocekm 在他的回答中所提到的，dividerPadding 属性不会像人们假设的那样在垂直分隔线的任一侧添加额外的填充。相反，它定义了顶部和底部填充，因此如果它太大，可能会截断分隔线。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-29T16:53:21.617

您可以使用内置的分隔器，这将适用于两个方向。

```
<LinearLayout
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:divider="?android:attr/listDivider"
  android:orientation="horizontal"
  android:showDividers="middle"> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-28T22:04:32.413

令人沮丧的是，您必须在活动中启用显示代码中的分隔符。例如：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set the view to your layout
    setContentView(R.layout.yourlayout);

    // Find the LinearLayout within and enable the divider
    ((LinearLayout)v.findViewById(R.id.llTopBar)).
        setShowDividers(LinearLayout.SHOW_DIVIDER_MIDDLE);

} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-04-08T11:28:07.753

[如果Kapil Vats](https://stackoverflow.com/users/1360732/kapil-vats "卡皮尔大桶")的答案不起作用，请尝试以下操作：

**可绘制/divider_horizo​​ntal_green_22.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">

    <size android:width="22dip"/>
    <solid android:color="#00ff00"/>

</shape> 
```

**布局/your_layout.xml**

```
LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/llTopBar"
            android:orientation="horizontal"
            android:divider="@drawable/divider_horizontal_green_22"
            android:showDividers="middle"
           > 
```

我遇到了 padding 属性不起作用的问题，因此我必须直接在分隔符中设置分隔符的高度。

**笔记：**

如果你想在垂直LinearLayout中使用它，就新建一个，像这样： **drawable/divider_vertical_green_22.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">

    <size android:height="22dip"/>
    <solid android:color="#00ff00"/>

</shape> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-05-15T16:09:29.660

由于 dividerPadding 太大，您的分隔线可能不会显示。您设置了 22dip，这意味着分隔线从顶部截断 22dip，从底部截断 22dip。如果您的布局高度小于或等于 44dip，则没有分隔线可见。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-06T17:47:31.437

为了被绘制，分隔线`LinearLayout`必须有一些高度，而`ColorDrawable`（本质上`#00ff00`与任何其他硬编码颜色一样）没有。解决此问题的简单（正确）方法是将颜色包装成`Drawable`具有预定义高度的颜色，例如`shape`可绘制

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-28T06:20:25.293

您必须为诸如 textview 或 imageview 之类的分隔符创建任何视图，然后为其设置背景，如果您有图像，则使用颜色作为背景。

希望这对您有所帮助。

# sql - 需要计算 SQL Query 中总计数的百分比

> ID：15128653
> 
> 赞同：1
> 
> 时间：2013-02-28T06:08:17.763
> 
> 标签：sql, ms-access

我有一张表，其中有两列，一列是日期时间列 (Test_Complete)，另一列是字母数字记录 ID 列 (RecordID)。

我需要准备按月处理的记录 ID 计数。我已经为此创建了一个查询。

```
SELECT (Format([Test_Complete],"mmm"" '""yy")) AS Evaluation_Month, 
Count(tbl_TestStatus.Record_ID) AS CountOfRecord_ID
FROM tbl_TestStatus
WHERE (((tbl_TestStatus.[Test_Complete]) Is Not Null))
GROUP BY (Format([Test_Complete],"mmm"" '""yy")),
(Year([Test_Complete])*12+Month([Test_Complete])-1); 
```

此查询运行良好，并给我这样的输出：

```
Evaluation_Month     CountOfRecord_ID
------------------   -----------------
 Jan'12                   20
 Feb'12                   90
 Mar'12                   40
 Apr'12                   50 
```

现在我需要计算 CountOfRecord_ID 值相对于每个 Evaluation_Month 的百分比，并将百分比附加到 Evaluation_Month 数据中的值。

在上面的结果集中，所有 CountOfRecord_ID 的总和是 200。所以需要计算百分比，将 200 视为 100%，这样我的结果如下所示：

```
Evaluation_Month     CountOfRecord_ID
------------------   -----------------
 Jan'12 (10%)                20
 Feb'12 (45%)                90
 Mar'12 (20%)                40
 Apr'12 (25%)                50 
```

如何修改我的 SQL 查询来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:14:16.487

您只需要在`select`语句中添加一个包含记录总数的“子查询字段”。像这样的东西：

```
SELECT 
    (Format([Test_Complete],"mmm"" '""yy")) AS Evaluation_Month, 
    Count(tbl_TestStatus.Record_ID) AS CountOfRecord_ID,
    Count(tbl_TestStatus.Record_ID) / (select count(tbl_testStatus.recordId
     from tbl_testStatus
     where tbl_testStatus.test_complete is not null) as percent
FROM 
    tbl_TestStatus
WHERE 
    (((tbl_TestStatus.[Test_Complete]) Is Not Null))
GROUP BY 
    (Format([Test_Complete],"mmm"" '""yy")),
    (Year([Test_Complete])*12+Month([Test_Complete])-1); 
```

# qt - 在 Qt 中读取图像的 exif 元数据

> ID：15128656
> 
> 赞同：1
> 
> 时间：2013-02-28T06:08:41.117
> 
> 标签：qt, exif

在我的 Qt 应用程序中，我想读取图像的 exif 数据。`QImage`或者`QPixmap`似乎没有提供这样的钩子。

Qt 中是否有任何 API 允许在不使用外部库的情况下读取 exif `libexif`？

编辑：这是这个的[副本](https://stackoverflow.com/questions/4105534/what-exif-lib-can-i-use-from-a-qt-program-on-embedded-linux?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:34:02.823

从 qt 扩展框架中尝试[QExifImageHeader 。](http://doc.qt.digia.com/qtextended4.4/qexifimageheader.html)qtextended.org 对我不可用？但您可以搜索其他下载镜像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T11:25:55.663

QImageReader 有一个名为 transformation() 的方法，它是在 5.5 版本中引入的，首先你应该尝试一下。

您还可以查看以下链接，了解如何在 Qt 中使用 Windows GDI，[http://amin-ahmadi.com/2015/12/17/how-to-read-image-orientation-in-qt-using-存储的exif /](http://amin-ahmadi.com/2015/12/17/how-to-read-image-orientation-in-qt-using-stored-exif/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-11T12:12:25.837

对我来说，最好的选择是[Mayank Lahiri 的 easyexif](https://github.com/mayanklahiri/easyexif)。您只需要将两个文件 exif.cpp 和 exif.h 添加到您的项目中。

```
int main(int argc, char *argv[])
{
    for (int i=1; i<argc; ++i){
        QFile file(argv[i]);
        if (file.open(QIODevice::ReadOnly)){
            QByteArray data = file.readAll();
            easyexif::EXIFInfo info;
            if (int code = info.parseFrom((unsigned char *)data.data(), data.size())){
                qDebug() << "Error parsing EXIF: code " << code;
                continue;
            }
            qDebug() << "Camera model         : " << info.Model.c_str();
            qDebug() << "Original date/time   : " << info.DateTimeOriginal.c_str();
        } else
            qDebug() << "Can't open file:" << argv[i];           
    }

    return 0;
} 
```

# authorization - ServiceStack JsonServiceClient 发送基本而不是基本的授权标头

> ID：15128663
> 
> 赞同：1
> 
> 时间：2013-02-28T06:09:22.097
> 
> 标签：authorization, servicestack

我正在使用 JsonServiceClient 客户端与外部供应商托管在 IIS 7 上的 RESTful 服务进行通信。

这是我用来调用他们的 Get 方法的一些示例代码。

```
ServiceStack.ServiceClient.Web.JsonServiceClient client = new ServiceStack.ServiceClient.Web.JsonServiceClient("UrlToVendor"));

client.SetCredentials("userName", "password");

client.AlwaysSendBasicAuthHeader = true; 
DTOReturn result = client.Get<DTOReturn>(string.Empty); 
```

我总是遇到授权失败。我们放置了一个嗅探器，并且 Authorization 标头被发送为：

> 基本用户名：密码

代替

> 基本用户名：密码

我们能够使用标准的 .Net 调用来让它工作

```
System.Net.HttpWebRequest req = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(
                "UrlToVendor");

string authInfo = "userName:password";
authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));

req.Accept = "application/json"; //text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
req.PreAuthenticate = true;
req.Method = "GET";
req.Headers["Authorization"] = string.Format("Basic {0}", authInfo);

System.Net.HttpWebResponse res = (System.Net.HttpWebResponse)req.GetResponse(); 
```

如果我们将“Basic”更改为“basic”，这些标准调用与 JasonServiceClient 相同。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:52:14.913

看起来有人遇到了同样的问题。最近的提交将身份验证方案从“基本”更改为“基本”。[https://github.com/ServiceStack/ServiceStack/commit/d4f21c5355ab87d7315e142372eef9a40e096b5f](https://github.com/ServiceStack/ServiceStack/commit/d4f21c5355ab87d7315e142372eef9a40e096b5f) 您应该能够只更新您的 dll。

根据 RFC 2617 sec 1.2，**auth-scheme 是不区分大小写的**。见[https://www.rfc-editor.org/rfc/rfc1945#page-47](https://www.rfc-editor.org/rfc/rfc1945#page-47)。我很好奇为什么供应商服务不接受它。

# html - 删除 HTML/CSS 横幅上的空白？

> ID：15128664
> 
> 赞同：0
> 
> 时间：2013-02-28T06:09:46.630
> 
> 标签：html, css, wordpress

我已经尝试了所有我知道的 CSS 技巧来删除这个空白，包括单元格填充、边距、填充等。

知道如何删除此横幅上“注册”下方的空白区域吗？

[http://oil.wpengine.com/](http://oil.wpengine.com/)

![在此处输入图像描述](../Images/45a56e5b05aec98ab5a67ae75a3e1b7f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:21:20.597

这是一个切片问题。修复此图像

```
<img width="75" height="10" alt="" src="images/OFC_Home_Header_15.png"> 
```

这**解决**了问题：

```
<img width="75" height="10" alt="" src="images/OFC_Home_Header_15.png" style="margin-top:-2px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:18:36.870

在带有“注册”的行*下方*的行中添加`vertical-align: top`此内容。我在这里做了内联，但你可能想要一个类。`<img>`*`<img>`*

 *```
<img src="images/OFC_Home_Header_15.png" width="75" height="10" style="vertical-align: top"> 
```

> ![在此处输入图像描述](../Images/f7a6445126ceb2713bf37e623a46f5b1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:24:11.493

用这个

```
 <img src="images/OFC_Home_Header_15.png" width="75" height="10" alt="" 
style="margin-top: -3px;"/> 
```*

# c++ - 如何为一组对重载比较运算符？

> ID：15128665
> 
> 赞同：3
> 
> 时间：2013-02-28T06:09:48.087
> 
> 标签：c++, set, overloading, comparator, std-pair

如何重载并将`<`（小于）比较器传递给一组整数对？这是我当前的代码：

```
class A{
public:
    typedef std::pair<int, int> pair_type;  

    bool operator<(const pair_type& a, const pair_type& b){ 
        if (a.first < b.first) return true;
        else if ( (a.first == b.first) && (a.second < b.second) ) return true;
        else return false;
    }

private:
    std::set< pair_type > edge_;
}; 
```

如果我尝试编译此代码，则会收到以下错误：

```
error: 'bool A::operator<(const pair_type&, const pair_type&)' must take exactly one argument 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T18:20:45.003

```
class A{
public:
    typedef std::pair<int, int> pair_type;  

    struct compare {
        bool operator()(const pair_type& a, const pair_type& b) {
          if (a.first < b.first) return true;
          else if ( (a.first == b.first) && (a.second < b.second) ) return true;
          else return false;
        }   
    };

  private:
    std::set<pair_type, compare> edge_;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T06:15:34.733

您应该将运算符重载定义为类成员（使用单个参数，通常是同一类的另一个实例）：

```
class pair_type : public std::pair<int, int>
{
public:
    bool operator<(const pair_type &comp) const
    {
        if (this->first < comp.first) return true;
        else if ( (this->first == comp.first) && (this->second < comp.second) ) return true;
        else return false;
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T06:11:13.563

您的运算符应该是自由函数（不是成员函数），因为它与类没有任何关系`A`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-06T19:27:58.783

从[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)开始，您还可以使用[lambda 表达式](http://en.cppreference.com/w/cpp/language/lambda)而不是定义比较器结构：

```
using pair_type = std::pair<int, int>;

auto comp = [](const pair_type& a, const pair_type& b) {
    return (a.first < b.first) || ((a.first == b.first) && (a.second < b.second));
}; 
```

我还压缩了您的比较器代码以节省两行。现在，您可以通过以下方式定义您的集合：

```
std::set<pair_type, decltype(comp)> edge_(comp); 
```

但是，如果您想将上述比较器用于作为类成员的集合，那么它会不太舒服，因为您还必须将比较器传递给[set 的构造函数](http://en.cppreference.com/w/cpp/container/set/set)，如上所示。这意味着，您必须在构造函数定义的初始化列表中交出比较器：

```
class A{
public:
    A() : edge_(comp) {}

private:
    std::set<pair_type, decltype(comp)> edge_;
}; 
```

[Ideone 上的代码](https://ideone.com/2DVqKX)

# python - 如何加载用户代码？

> ID：15128670
> 
> 赞同：2
> 
> 时间：2013-02-28T06:10:11.193
> 
> 标签：python, python-3.x

我有一个程序可以从用户提供的 JSON 代码中自动生成数据结构。我还想提供一个选项，允许用户编写自己的函数以编程方式生成此数据结构。Python有没有办法通过路径加载任意模块并返回该模块的命名空间，以便我可以从我的程序中调用用户的函数？

例如，我想要以下内容：

```
def make(custom):
    if not custom:
        return helper('example.json')
    else:
        return load('path/to/user-script.py').make()  # this line here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:18:48.100

您可以使用;导入命名`.py`文件，就好像它是一个模块一样。`imp.load_source`看到[这个问题](https://stackoverflow.com/questions/67631/how-to-import-a-module-given-the-full-path)。

这通常是一件很奇怪的事情，但是加载不存在于 Python 模块层次结构中的用户钩子似乎是一个不错的借口。:)

* * *

[这个 Python 错误](http://bugs.python.org/issue14551)声称`load_source`在 Python 3 中已过时，并建议使用更繁琐且不太明显的调用：

```
importlib.SourceFileLoader(name, path).load_module(name) 
```

# php - php/mysql + 填充 3 下拉菜单

> ID：15128671
> 
> 赞同：1
> 
> 时间：2013-02-28T06:10:11.397
> 
> 标签：php, mysql, drop-down-menu, dreamweaver

嘿伙计们，我正在开发一个页面，我在其中填充多个**下拉菜单**，其中包含从数据库中检索到的数据，但问题是我只能填充一个**下拉菜单**如果有人可以帮助我，如何能够填充多个下拉菜单

# 函数.inc.php

```
<?php
 require_once('db.inc.php'); 

function connect(){
   mysql_connect(DB_Host, DB_User ,DB_Pass )or die("could not connect to the database" .mysql_error());

   mysql_select_db(DB_Name)or die("could not select database");

}
  function close(){

  mysql_close();

  }

  function countryQuery(){

  $countryData = mysql_query("SELECT * FROM country");

  while($record = mysql_fetch_array($countryData)){

     echo'<option value="' . $record['country_name'] .  '">' . $record['country_name'] . '</option>';

  }

}

function specializationQuery(){

$specData = mysql_query("SELECT * FROM specialization");

  while($recordJob = mysql_fetch_array($specData)){

     echo'<option value="' . $recordJob['specialization_name'] .  '">' . $recordJob['specialization_name'] . '</option>';

  }

}
?> 
```

# 索引.php

```
<?php
  require_once('func.inc.php'); 
  connect(); 

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>testDroplistdown</title>
</head>

<body>
<p align="center">
<select name="dropdown">
  <?php countryQuery(); ?>
</select>
  <?php close(); ?>
</p>
<p align="left">
<select name="dropdown2">
  <?php specializationQuery(); ?>
</select>
  <?php close(); ?>
</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:34:29.997

您似乎正在关闭连接而不是重新连接。删除第一个 close() 并尝试一下

# php - 如果共享源是通过 facebook 或 twitter 测量病毒系数

> ID：15128673
> 
> 赞同：0
> 
> 时间：2013-02-28T06:10:19.513
> 
> 标签：php, javascript, jquery

因此，衡量病毒系数的标准方法是通过电子邮件地址，即当前用户 xyz@xyz.com 通过电子邮件邀请 10 人，这样您就有了他们的电子邮件地址，并且可以知道有多少人注册，从而可以计算病毒系数。

如果当前用户 xyz@xyz.com 在您的页面上分享到 facebook 或 twitter 的链接，您将如何计算和编程病毒系数，因为您不知道他们邀请了多少人或拥有他们的电子邮件地址。即使您估计有 100 人推荐您的网站，您如何知道新用户是否来自用户 xyz@xyz.com？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:13:18.750

为每个用户提供一个自定义链接，例如：`example.com/register?refer=foobar`

每当有人注册时，查找 GET 参数`refer`，您就会知道是谁推荐了这个新用户。

# java - VTD-XML 大文件拆分 - 内存不足

> ID：15128679
> 
> 赞同：1
> 
> 时间：2013-02-28T06:10:55.010
> 
> 标签：java, xpath, xml-parsing, vtd-xml

我看到 VTD-XML parseGzip() 将完整的文件加载到内存中，从而导致 OutOfMemory。

我的 Eclipse -Xms20m 和 -Xmx100m 和 Gzipped Xml 文件大小为 50MB。我正在使用的示例代码如下，任何摆脱内存限制的命中都值得赞赏 VTDGen vg = new VTDGen();

```
 isParsable = vg.parseGZIPFile(xmlFile, true);
    long loadingTime = System.nanoTime();
    System.out.println("read the file..");
    if (isParsable) {
        VTDNav vn = vg.getNav();
        AutoPilot ap = new AutoPilot(vn);
        ap.selectXPath("/records/record[bankbalance >100900]");
        i = -1;
        int j = 0;
        while ((i = ap.evalXPath()) != -1) {
            long l = vn.getElementFragment();
            byte[] bytes = vn.getXML().getBytes();

            fileOutputStream = new FileOutputStream(
                    "C:\\workspace\\TestFunc\\test\\out" + j + ".xml");
            fileOutputStream.write(bytes, (int) l, (int) (l >> 32));
            j++;
        } 
```

# docx - Docx.dll SaveAs 方法抛出异常

> ID：15128682
> 
> 赞同：0
> 
> 时间：2013-02-28T06:11:00.573
> 
> 标签：docx

我们使用[codeplex](http://docx.codeplex.com/)将 docx 保存在网络路径上。

但是这个 dll 的 SaveAs(string path) 函数会间歇性地失败。

提供给函数的路径与预期的一样。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:46:47.967

这是我用来创建和下载 docx 文档的代码：

```
DocX g_document;
g_document = WhitePageReport(dt, dtSub);
MemoryStream ms = new MemoryStream();
g_document.SaveAs(ms);
Response.Clear();
Response.AddHeader("content-disposition", "attachment; filename=\"WhitePageReport.doc\"");
Response.ContentType = "application/msword";
ms.WriteTo(Response.OutputStream);
Response.End(); 
```

# android - 当连接服务器 xmpp 有错误

> ID：15128684
> 
> 赞同：0
> 
> 时间：2013-02-28T06:11:09.203
> 
> 标签：android, xmpp

有人用过androidpn吗？我连接服务器时，xmpp出现这个错误：

```
02-27 21:24:34.720: D/RegisterTask.PacketListener(3144): packet=<iq id="8dMsj-0" from="kwant.cn" type="error"><query xmlns="jabber:iq:register"><password>abc</password><username>abc</username></query><error code="400" type="MODIFY"><bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>
02-27 21:24:34.720: E/Androidpn_XmppManager(3144): Unknown error while registering XMPP account! bad-request 
```

提示：XMPP 连接成功。但它不能一直登录。我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:41:52.433

我使用以下代码在 Android 中使用 Smack API 进行连接和登录，它运行起来就像一个魅力：

```
 private XMPPClient xmppClient;
        private XMPPConnection connection;
        private ArrayList<String> messages = new ArrayList(); 

public void login(String userName, String password) throws XMPPException
            {
            ConnectionConfiguration config = new ConnectionConfiguration("HOST",PORT, "SERVICE");
            connection = new XMPPConnection(config);
            connection.connect();

            //LOGIN USING THE FOLLWING login() 

            connection.login(userName, password);
            xmppClient.setConnection(connection); 
            } 
```

# excel - 如何将行和列连接到Excel中的单元格？

> ID：15128690
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:11:29.687
> 
> 标签：excel

我需要像这样在 Excel 表中连接单元格 = 行和列：

```
 a   b   c

1       a1  b1  c1

2       a2  b2  c2

3       a3  b3  c3 
```

但是当我选择 4 个第一个角单元并拖动复制时。它不像我预期的那样工作。我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:15:48.260

![在此处输入图像描述](../Images/a8f7bd95e56751d1daf3ea74ebee4864.png)

解决方案见附图。您需要使用 $ 冻结行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:24:14.527

如果您要获取列而不是行的数字，则需要使用用户定义的函数将列转换为字母。

您可以从 Microsoft 网站 ( [http://support.microsoft.com/kb/833402](http://support.microsoft.com/kb/833402) ) 使用这个：

```
Function ConvertToLetter(iCol As Integer) As String
   Dim iAlpha As Integer
   Dim iRemainder As Integer
   iAlpha = Int(iCol / 27)
   iRemainder = iCol - (iAlpha * 26)
   If iAlpha > 0 Then
      ConvertToLetter = Chr(iAlpha + 64)
   End If
   If iRemainder > 0 Then
      ConvertToLetter = ConvertToLetter & Chr(iRemainder + 64)
   End If
End Function 
```

然后，您只需将公式调整为：

```
=ConvertToLetter(COLUMN())&ROW() 
```

您可能还想检查`INDIRECT`和`ADDRESS`功能（[http://support.microsoft.com/kb/213933](http://support.microsoft.com/kb/213933)）和（[http://office.microsoft.com/en-au/excel-help/address-function-HP010062407。 .aspx](http://office.microsoft.com/en-au/excel-help/address-function-HP010062407.aspx) )

# php - 使用 PHPexcel 输出的复选框处理

> ID：15128691
> 
> 赞同：0
> 
> 时间：2013-02-28T06:11:35.203
> 
> 标签：php, checkbox, phpexcel, fpdf

这是我的剧本...

```
$students=isset ($_POST['students'])  ? $_POST['students'] : '';
for($i = 1; $i <= $students; $i++)
{
    $student = isset ($_POST['student'.$i]) ? $_POST['student'.$i]: '';

    $nilai= mysql_query ("SELECT * FROM student,s_semester where
    student.id=s_semester.student_id_fk AND student.id='$student' GROUP by student.id");

    $rowNya = 2;
    $no = 0;

    while ($data=mysql_fetch_array($nilai)) {
        $no = $no +1;

        $objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue("A$rowNya", $no)
            ->setCellValue("B$rowNya", $student)
            ->setCellValue("C$rowNya", $data['idcard'])
            ->setCellValue("D$rowNya", $data['status']);
        $rowNya = $rowNya + 1;
    }

    // Rename sheet
    $objPHPExcel->getActiveSheet()->setTitle('Simple');
}

header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="database_anggota.xls"');
header('Cache-Control: max-age=0');
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save('php://output');
exit; 
```

我的问题是，excel只输出一条出现的数据记录，我之前使用了复选框。我检查了3/4/5等，只出现了1条……如果输出pdf并且我使用FPDF，这个脚本运行良好。 .

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:37:18.353

`$rowNya = 2;`移到循环**之前**，`for`否则它将为每个学生 id 重置...否则您将在每个学生之后将其重置为 2，因此它将覆盖以前的学生详细信息

# go - 尝试使用 interface{} 切片来选择随机元素

> ID：15128692
> 
> 赞同：1
> 
> 时间：2013-02-28T06:11:39.310
> 
> 标签：go

我一直在尝试实现一个可以从任何类型的切片中随机选择一个元素的函数（比如 python 的 random.choice 函数）

```
func RandomChoice(a []interface{}, r *rand.Rand) interface{} {
    i := r.Int()%len(a)
    return a[i]
} 
```

但是，当我尝试将 []float32 类型的切片传入第一个参数时，会发生此错误：

`cannot use my_array (type []float32) as type []interface {} in function argument`

这是对 interface{} 的根本滥用吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:22:42.063

回复：*有没有更好的方法来做到这一点？*

海事组织有。OP 方法效率低下至简单：

```
var v []T
...

// Select a random element of 'v'
e := v[r.Intn(len(v))]   
... 
```

请注意，在`len(v) == 0`对此进行预检查之前，这两种方法都会恐慌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:02:19.647

使用反射：

```
func RandomChoice(slice interface{}, r *rand.Rand) interface{} {
    x := reflect.ValueOf(slice)
    return x.Index(r.Intn(x.Len())).Interface()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:07:50.533

从[语言规范](http://golang.org/ref/spec#Properties_of_types_and_values)：

> 两种类型要么相同，要么不同。
> 
> 如果两个命名类型的类型名称源自相同的 TypeSpec，则它们是相同的。命名类型和未命名类型总是不同的。如果对应的类型字面量相同，即如果它们具有相同的字面量结构并且对应的组件具有相同的类型，则两个未命名类型是相同的。详细地：
> 
> *   如果两个数组类型具有相同的元素类型和相同的数组长度，则它们是相同的。
> *   如果两个切片类型具有相同的元素类型，则它们是相同的。
> *   如果两个结构类型具有相同的字段序列，并且相应的字段具有相同的名称、相同的类型和相同的标签，则它们是相同的。两个匿名字段被认为具有相同的名称。来自不同包的小写字段名称总是不同的。
> *   如果两个指针类型具有相同的基类型，则它们是相同的。
> *   如果两个函数类型相同，如果它们具有相同数量的参数和结果值，对应的参数和结果类型相同，并且两个函数都是可变参数，或者两者都不是。参数和结果名称不需要匹配。
> *   如果两个接口类型具有相同名称和相同函数类型的相同方法集，则它们是相同的。来自不同包的小写方法名称总是不同的。方法的顺序无关紧要。
> *   如果两个映射类型具有相同的键和值类型，则它们是相同的。
> *   如果两个通道类型具有相同的值类型和相同的方向，则它们是相同的。

和：

> 在以下任何一种情况下，值 x 都可分配给 T 类型的变量（“x 可分配给 T”）：
> 
> *   x 的类型与 T 相同。
> *   x 的类型 V 和 T 具有相同的基础类型，并且 V 或 T 中的至少一个不是命名类型。
> *   T 是一个接口类型，x 实现了 T。
> *   x 为双向通道值，T 为通道类型，x 的类型 V 和 T 具有相同的元素类型，且 V 或 T 至少有一个不是命名类型。
> *   x 是预先声明的标识符 nil，T 是指针、函数、切片、映射、通道或接口类型。
> *   x 是一个无类型的常量，可以用 T 类型的值表示。
> 
> 任何值都可以分配给空白标识符。

这两个结果的组合表明您无法将 []MyType 分配给 []interface{}。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:36:22.957

好吧，经过所有的搜索，我几乎无法相信，第一个列出的相关问题是：[在 go 中类型转换接口切片，](https://stackoverflow.com/questions/12753805/type-converting-slices-of-interfaces-in-go?rq=1)其中几乎包含了答案。将 RandomChoice 更改为使用该问题的答案中描述的 InterfaceSlice 函数会产生：

```
func RandomChoice(slice interface{}, r *rand.Rand) interface{} {
    islice := InterfaceSlice(slice)
    i := r.Int()%len(islice)
    return islice[i] 
} 
```

虽然显然这个答案的表现不是很好，因为它需要将整个切片转换为 []interface{} ...

# php - 如何在 PHP 中构建高级查询构建器

> ID：15128695
> 
> 赞同：0
> 
> 时间：2013-02-28T06:11:48.920
> 
> 标签：php, preg-match, query-builder

我想使用 PHP 代码创建高级查询生成器。

输入 ：

`search_String_1 AND( search_String_2 OR search_String_3)`... 很快

目标 ：

检查 AND / OR 运算符规则，包括 () 括号并将其转换为以下字符串：查询：

```
db.table.search_field LIKE '
search_String_1' AND ( db.table.search_field LIKE 'search_String_2' OR db.table.search_field LIKE 'search_String_3')' 
```

我的努力：

我用过`preg_match()`，但我不知道如何通过最佳解决方案检查所有运算符和查询序列。此外，我还通过 " `blank_space`" 扩展了用户输入，因此我将所有令牌都放在一个数组中。我仍在努力寻找解决方案。如果我错了或有好的解决方案，请建议我这样做。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:26:57.687

看看这堂课。它可能有用。

[http://www.phpclasses.org/browse/file/12314.html](http://www.phpclasses.org/browse/file/12314.html)

# c# - 报告期间方法“Fill”没有重载采用“2”参数

> ID：15128696
> 
> 赞同：0
> 
> 时间：2013-02-28T06:11:50.627
> 
> 标签：c#

我在 Visual Studio 2008 中报告“方法 'Fill' 没有重载需要 '2' 个参数”时出现错误。但我在另一个程序中给出了 2 个参数。它工作正常。但现在它在编译时产生错误。

```
private void button1_Click(object sender, EventArgs e)
{
    if (comboBox1.SelectedItem == "ID")
    {
        this.admissionTableAdapter.Fill(this.Database1DataSet1.admission,Int32.Parse(txtCriteria.Text)); // this is error line
        this.reportViewer1.RefreshReport();

    }
    else
    {
        MessageBox.Show("Please Select some search criteria.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:34:42.103

[在这里](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.fill%28v=vs.85%29.aspx)，您可以查看 fill 的所有重载方法。这里不存在您提供的采取 (DatatTbale, int) 的重载方法。

可能的重载如下

> DataAdapter.Fill (数据集)
> 
> DataAdapter.Fill (DataTable, IDataReader)
> 
> DataAdapter.Fill (DataTable[], IDataReader, Int32, Int32)
> 
> DataAdapter.Fill（数据集、字符串、IDataReader、Int32、Int32）

# javascript - function() {} 和 new function() {} 之间的区别

> ID：15128697
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:12:05.500
> 
> 标签：javascript

在这个问题中，我不想问“功能”，我想问“功能”难题

```
<script type="text/javascript">
    var test = function() {
        alert('a');
    };

    var test1 = new function() {
        alert('b');
    };
</script> 
```

为什么会弹出“b”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:16:39.833

函数 (p1, p2, ... , pn, body)

当使用一些参数 p1、p2、...、pn、body 调用 Function 函数时（其中 n 可能为 0，即没有“p”参数，并且也可能不提供 body），以下步骤是采取：

创建并返回一个新的 Function 对象，就像在具有相同参数的新表达式中使用标准内置构造函数 Function 一样。

检查：[JavaScript 的“new”关键字被认为是有害的吗？](https://stackoverflow.com/questions/383402/is-javascript-s-new-keyword-considered-harmful)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:17:47.973

`new`用于 Javascript 中的工厂模式。它通过执行构造函数创建并返回一个对象。在您的情况下，使用`new`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:18:55.763

如果您不传递任何参数，则构建用作构造函数的函数不需要括号：

```
var Person = function () { this.is_alive = true; },
    bob = new Person;

bob.is_alive; 
```

...但是任何函数都可以作为构造函数调用，无论您是否使用返回的对象...

```
new function () { console.log("Bob"); } 
```

这不会将函数保存在任何地方——它会立即就地运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:14:39.183

`new function`将执行该函数，您也可以使用 IIFE（立即调用函数表达式）：

```
var test1 = (function() {
  alert('b');
}()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:19:33.687

请参阅[JavaScript 中的“新”关键字是什么？](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)有关新关键字的基本描述。

本质上，您将构造函数调用到一个新对象。我来给你展示。

```
var Animal = function(name) {
    alert("Animal Created: " + name);
}

jaguar = new Animal("Cool"); 
```

与您所做的唯一区别是在定义新对象的同一行中声明函数：

```
jaguar = new function(name) {
    alert("Animal Created: " + name);
} 
```

这就是为什么“b”被打印出来的原因。

# iphone - 通过 NSRegularExpression 获取 Javascript 函数之间的特定值？

> ID：15128700
> 
> 赞同：0
> 
> 时间：2013-02-28T06:12:19.870
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

**我正在创建一个用于学习目的的项目：**

**FOR INFO：**我没用过`UIWebView`

在我的项目中，我从服务器`HTML`获取数据（*内容）。*此数据包含有关地点的所有信息（*来自谷歌地图*）。为了从内容中获取特定数据，`HTML`我需要解析`HTML`. 我`HTML`使用[`Hpple`](https://github.com/topfunky/hpple). 而且我可以成功解析 HTML 以获取特定数据（*例如姓名、地址……等*），但是当**我需要**从`HTML`内容中解析纬度和经度时，我对如何获取地点的纬度和经度感到困惑，因为这些是`Javascript`. 我的意思是这些纬度和经度数据在`Javascript's` 函数中可用。

**我从服务器获得的 Javascript 内容：（** *我的限制是，我只能放一段 javascript 代码，因为这段代码很长）*

```
function()
{
window.gHomeVPage=
{
   title:'Hostel, Bhavnagar, Gujarat, India - Google Maps',url:'/?q\\x3dHostel,+Bhavnagar,+Gujarat,+India\\x26hq\\x3dHostel,\\x26hnear\\x3dBhavnagar,+Gujarat,+India\\x26t\\x3dm\\x26ie\\x3dUTF8',urlViewport:false,ei:'jp8tUb3uNK2ciAeQroGACw',
  form:{
        selected:'q',
        q:{q:'Hostel, Bhavnagar, Gujarat, India',what:'Hostel,',near:'Bhavnagar, Gujarat, India'},d:{saddr:'',daddr:'',dfaddr:'Bhavnagar, Gujarat, India'},geocode:''},
        query:{type:'l'},viewport:{center:{lat:21.757528,lng:72.15303},span:{lat:0.034314,lng:0.039956},zoom:14,mapType:'m',source:0},modules:['','strr','pphover','act_s','appiw','rst'],
    overlays:{sxcar:false,
       markers:
           [{id:'A',cid:'7569356420090555589',latlng:{lat:21.747064,lng:72.169678},image:'http://maps.gstatic.com/intl/en_ALL/mapfiles/markers2/circleA.png',sprite:{width:20,height:34,top:0,image:'http://maps.gstatic.com/mapfiles/markers2/red_circle_markers_A_J2.png'},icon_id:'A',ext:{width:20,height:34,shadow:'http://maps.gstatic.com/intl/en_ALL/mapfiles/circle-shadow45.png',shadow_width:37,shadow_height:34,mask:false},drg:true,laddr:'Shree Sahajanand Girls Ptc Hostel, Ghogha Road, Bhavnagar, Gujarat 364001, India',geocode:'CfYWJFjKQj0mFXjVSwEdzjhNBCmN5-3pPlpfOTHF7NFVj8ELaQ',sxti:'Shree Sahajanand Girls Ptc Hostel',name:'Shree Sahajanand Girls Ptc Hostel',infoWindow:{title:'Shree Sahajanand Girls Ptc \\x3cb\\x3eHostel\\x3c/b\\x3e',addressLines:['Ghogha Road','Bhavnagar, Gujarat 364001, India'],phones:[{number:'0278 2562529'}],basics:'\\x3cdiv transclude\\x3d\\x22iw\\x22\\x3e\\x3c/div\\x3e',moreInfo:'more info',place_url:'http://maps.google.com/local_url?dq\\x3dHostel,+Bhavnagar,+Gujarat,+India\\x26q\\x3dhttps://plus.google.com/106028699675431268945/about%3Fhl%3Den\\x26s\\x3dANYYN7mCKtIBT1JPxwi6G2b9gVDdCuVyyA',zrvOk:true,loginUrl:'https://www.google.com/accounts/ServiceLogin?service\\x3dlocal\\x26hl\\x3den\\x26nui\\x3d1\\x26continue\\x3dhttp://maps.google.com/maps/place%3Fcid%3D7569356420090555589%26q%3DHostel,%2BBhavnagar,%2BGujarat,%2BIndia%26t%3Dm%26cd%3D1%26cad%3Dsrc:ppwrev%26ei%3Djp8tUb3uNK2ciAeQroGACw%26action%3Dopenratings',lbcurl:'http://www.google.com/local/add/choice?hl\\x3den\\x26gl\\x3dIN\\x26latlng\\x3d7569356420090555589\\x26q\\x3dHostel,\\x26near\\x3dBhavnagar,+Gujarat,+India',link_jsaction:''},ss:{edit:true,detailseditable:true,deleted:false,rapenabled:true,mmenabled:true},b_s:2,approx:true,elms:[4,1,6,2,12,1,9,1,5,2,11]
           }
} 
```

**`lat:`**在上面的代码中，我想从中获取**`lon:`**价值`latlng:{lat:21.747064,lng:72.169678}`

为了从 javascript 中获取它，**我用谷歌搜索**并发现我需要使用[`NSRegularExpression`](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)类来获取特定匹配项（*的 Data*）表单内容。

然后我尝试使用以下代码

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(?-imsx:latlng:)" options:NSRegularExpressionCaseInsensitive error:&error];

NSArray *arrayOfAllMatches = [regex matchesInString:locationStr options:0 range:NSMakeRange(0, [locationStr length])];

for (NSTextCheckingResult *match in arrayOfAllMatches)
{
        NSString* substringForMatch = [locationStr substringWithRange:match.range];
        NSLog(@"%@",substringForMatch);
} 
```

我在控制台中得到这样的输出：

```
2013-02-28 11:35:25.051 MapExample[949:13d03] latlng:
2013-02-28 11:35:25.766 MapExample[949:13d03] latlng:
2013-02-28 11:35:26.208 MapExample[949:13d03] latlng:
2013-02-28 11:35:26.799 MapExample[949:13d03] latlng:
2013-02-28 11:35:27.303 MapExample[949:13d03] latlng:
2013-02-28 11:35:27.722 MapExample[949:13d03] latlng: 
```

如何从中获取搜索节点的内容`NSRegularExpression`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:24:10.410

如果你真的想使用正则表达式，下面的模式应该可以工作：

```
NSString *pattern = @"latlng:\\{lat:([0-9.]+),lng:([0-9.]+)\\}"; 
```

`[0-9.]+`匹配一个或多个数字或字符`.`，并且它周围的括号使其成为“捕获组”，因此与模式的这一部分匹配的字符串部分可以使用`rangeAtIndex:`.

为了验证这一点，我已将您问题中的确切输入数据作为资源文件“data.txt”添加到我的测试应用程序中，并使用

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"data.txt" withExtension:nil];
NSError *error;
NSString *locationStr = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error]; 
```

然后用正则表达式解析字符串

```
NSString *pattern = @"latlng:\\{lat:([0-9.]+),lng:([0-9.]+)\\}";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:&error];

NSArray *matches = [regex matchesInString:locationStr options:0 range:NSMakeRange(0, [locationStr length])];

for (NSTextCheckingResult *match in matches)
{
    NSString *lat = [locationStr substringWithRange:[match rangeAtIndex:1]];
    NSString *lng = [locationStr substringWithRange:[match rangeAtIndex:2]];
    NSLog(@"latidude = %@, longitude = %@", lat, lng);
} 
```

*输出：*

```
latidude = 21.747064, longitude = 72.169678 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:02:32.837

虽然不是直接回答您的问题，但实际上有一种更简单的方法可以使用 UIWebView：

```
+(NSString *)valueFromJSON:(NSString *)json andKey:(NSString *)key {
    UIWebView webView = [[UIWebView alloc] init];
    return [webView stringByEvaluatingJavaScriptFromString:[NSString withFormat:@"(function(){ var v = %@; return var.%@; }())", json, key]];
} 
```

对于由于不在我的 Mac 上并且已经很晚而总是犯的任何语法错误，我会提前道歉。如果您重复调用此代码，最好不要每次都初始化一个新的 WebView。这利用了 WebKit 的 Javascript 引擎为您进行简单的 JSON 解析的能力。替换 Javascript 函数中的 return 以匹配您的数据结构。

# endeca - 右表中的数据未显示在 Dev Studio 中使用左连接

> ID：15128702
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:12:27.970
> 
> 标签：endeca

我使用 Endeca Dev studio 执行左连接。我有记录适配器 Items 和 ItemDetail 具有唯一键 itmno ，我将其用于左连接。遵循所有文档步骤。1) 创建两个记录适配器 2) 为 ItemDetail 创建缓存并在索引中添加 itmno 3) 创建记录组装器，在 Left Join 设置中指定 itmno 作为 Items 和 ItemDetailCache 的键。

我没有收到任何错误，但来自 ItemDetail 的数据没有显示在 jsp 应用程序中。我是新手，所以任何指导都会有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:12:57.493

调试提示 - 在每个步骤之后添加输出记录适配器或使用 --printRecords [number] 标志运行 forge。这些都是捕获​​记录状态以进行调试和审查的技术。这应该可以帮助您了解连接没有发生的原因。

# django - 如何使用 Django 的 ORM 向表中插入一行数据

> ID：15128705
> 
> 赞同：14
> 
> 时间：2013-02-28T06:12:49.460
> 
> 标签：django, django-models

如何使用 Django ORM 将 Django 中的数据插入到 SQL 表中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T06:25:32.013

如果您需要插入一行数据，请参阅模型上的方法的“[保存对象](https://docs.djangoproject.com/en/dev/ref/models/instances/#saving-objects)”文档。`save`

仅供参考，您可以执行批量插入。请参阅该[`bulk_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)方法的文档。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-28T06:23:01.407

事实上，在“[编写你的第一个 Django 应用程序](https://docs.djangoproject.com/en/dev/intro/tutorial01/)”教程的第一部分中已经提到过。

如“使用 API”部分所述：

```
>>> from django.utils import timezone
>>> p = Poll(question="What's new?", pub_date=timezone.now())

# Save the object into the database. You have to call save() explicitly.
>>> p.save()

# Now it has an ID. Note that this might say "1L" instead of "1", depending
# on which database you're using. That's no biggie; it just means your
# database backend prefers to return integers as Python long integer
# objects.
>>> p.id
1 
```

[本教程的第 4 部分](https://docs.djangoproject.com/en/dev/intro/tutorial04/) 解释了如何使用表单以及如何使用用户提交的数据保存对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-04-24T09:00:11.960

如果不想显式调用 save() 方法，可以使用创建记录`MyModel.objects.create(p1=v1, p2=v1, ...)`

```
fruit = Fruit.objects.create(name='Apple')
# get fruit id
print(fruit.id) 
```

[查看文档](https://docs.djangoproject.com/en/3.2/topics/db/models/)

# android - Android EditText 展开为对话框

> ID：15128706
> 
> 赞同：4
> 
> 时间：2013-02-28T06:12:49.720
> 
> 标签：android, android-edittext, landscape, expand

我有这个布局

![在此处输入图像描述](../Images/50df3769a4bb52a47d28a530ff95458f.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:id="@+id/viewer_top"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/background_dark"
        android:orientation="horizontal" >

        <RelativeLayout 
            android:layout_width="0dp"
            android:layout_height="wrap_content" 
            android:layout_marginLeft="4dp"
            android:layout_marginRight="4dp"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="3dp"
            android:layout_weight="1" >
            <EditText
                android:id="@+id/viewer_filter"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/hint_filter"
                android:background="@android:color/white"
                android:drawableLeft="@android:drawable/ic_menu_search"
                android:inputType="text"
                android:paddingLeft="4dp"
                android:selectAllOnFocus="true" >
            </EditText>
            <ImageView
                android:id="@+id/viewer_filterX"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_alignTop="@id/viewer_filter"
                android:layout_alignRight="@id/viewer_filter"
                android:src="@android:drawable/ic_menu_close_clear_cancel"
                android:visibility="invisible" >
            </ImageView>
        </RelativeLayout>

        <RelativeLayout 
            android:layout_width="0dp"
            android:layout_height="wrap_content" 
            android:layout_marginLeft="4dp"
            android:layout_marginRight="4dp"
            android:layout_marginTop="3dp"
            android:layout_marginBottom="5dp"
            android:layout_weight="1" >
            <EditText
                android:id="@+id/viewer_search"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/hint_search"
                android:background="@android:color/white"
                android:drawableLeft="@android:drawable/ic_menu_search"
                android:inputType="text"
                android:paddingLeft="4dp"
                android:selectAllOnFocus="true" >
            </EditText>
            <ImageView
                android:id="@+id/viewer_searchGo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_alignTop="@id/viewer_search"
                android:layout_alignRight="@id/viewer_search"
                android:src="@android:drawable/ic_menu_send"
                android:visibility="invisible" >
            </ImageView>
            <ImageView
                android:id="@+id/viewer_searchX"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_alignTop="@id/viewer_search"
                android:layout_toLeftOf="@id/viewer_searchGo"
                android:src="@android:drawable/ic_menu_close_clear_cancel"
                android:visibility="invisible" >
            </ImageView>
        </RelativeLayout>
    </LinearLayout>

    <HorizontalScrollView
        android:id="@+id/viewer_hscroll"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/viewer_top" >
        <ListView
            android:id="@+id/viewer_list"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </ListView>
    </HorizontalScrollView>

</RelativeLayout> 
```

当我单击任一 EditText 时，它会扩展到此对话框：

![在此处输入图像描述](../Images/278707fbd53427944b264ae87a406ea4.png)

在纵向模式下，EditTexts 可以按原样编辑而无需扩展。肖像的 XML 是类似的，只有 EditTexts 是一个在另一个之下并且是屏幕宽的。

如何防止此 EditText 扩展？
EditText + 虚拟键盘不仅隐藏了整个手机屏幕，而且我放置在 EditText 上的可点击图像也不可见。

*   我试图将 EditText layout_width 设置为 0dp，但它们没有显示。
*   我没有使用 SearchViews，因为它们窃取了焦点，我无法使用后退键返回上一个活动。

**更新**
我删除了 layout-land XML 并为纵向和横向使用了相同的 XML。
在纵向模式下很好，没有扩展，在横向模式下有扩展。
所以它在某种程度上与处于横向模式有关。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T07:20:30.350

将此行添加到您的编辑文本中

```
android:imeOptions="flagNoFullscreen" 
```

编辑文本看起来像这样

```
<EditText
                android:id="@+id/viewer_filter"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="hint_filter"
                android:background="@android:color/white"
                android:drawableLeft="@android:drawable/ic_menu_search"
                android:inputType="text"
                android:paddingLeft="4dp"
                android:selectAllOnFocus="true" 
                android:imeOptions="flagNoFullscreen"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:18:04.713

尝试`android:maxLines="1"`使用`EditText`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:38:41.660

我有类似的问题。您可以使用 mEditText.setSingleLine(true); 你在哪里使用它。这将解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:57:12.460

[这篇文章](https://stackoverflow.com/questions/7889853/edittext-resizes-in-landscape-mode-when-softkeyboard-appears)解决了同样的问题并有解决方案

需要添加

```
android:imeOptions="flagNoExtractUi" 
```

以防止这种行为。

如果有人知道如何，请将此帖子标记为重复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:02:52.027

**您好，请在您的编辑文本声明为description.setMaxLines(1)**的 Java 代码中添加此行；

# button - Autohotkey - 在窗口中单击某个按钮时触发脚本

> ID：15128707
> 
> 赞同：0
> 
> 时间：2013-02-28T06:12:51.387
> 
> 标签：button, handle, autohotkey, buttonclick, hwnd

我知道实际按钮的手柄。我想检查是否单击了该按钮，如果是，则会触发自动热键脚本。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:52:41.453

您是否尝试过使用 ImgSearch 来“动态”找到按钮的 XY 坐标，然后执行 if (MouseX => ImageX and MouseX =< ImageX + ImageWidth)？

# 伪代码（未测试）：

```
Settimer, FindButton, 1000
Settitlematchmode, 2
Return

FindButton:
IfWinActive, YourAppWindowTitle
    ImageSearch, ImageX, ImageY, 0, 0, A_ScreenWidth, A_ScreenHeight, C:\ButtonImage.bmp
Return

#IfWinActive, YourAppWindowTitle
~LButton::
MouseGetPos, MouseX, MouseY
if (MouseX => ImageX and MouseX =< ImageX + ImageWidth)
{
    if (MouseY => ImageY and MouseY =< ImageY + ImageHeight)
    {
        Run your code here
    }
}
Return
#IfWinActive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:36:16.133

你说的对。您可以使用它来代替 ImgSearch。

```
ControlGetPos, x, y, w, h, button1, ahk_class CalcFrame
MsgBox, %x% %y% %w% %h%
return 
```

因此，您必须在每次鼠标单击后运行 ControlGetPos（仅当目标窗口标题处于活动状态时），然后将实际鼠标坐标与按钮单击区域进行比较。

这是计算器的一些代码：

```
#SingleInstance Force
#Persistent

#IfWinActive, ahk_class CalcFrame
    ~LButton::
    MouseGetPos, MouseX, MouseY
    ControlGetPos, ButtonX, ButtonY, ButtonW, ButtonH, button1, ahk_class CalcFrame
    ButtonX2:=ButtonX + ButtonW
    ButtonY2:=ButtonY + ButtonH
    if MouseX between %ButtonX% and %ButtonX2%
    {
        if MouseY between %ButtonY% and %ButtonY2%
        {
            MsgBox, You pressed the MC button
        }
    }
    Return
#IfWinActive 
```

# qt - 实现可点击字符串列表以调用函数的简洁直观的方法？

> ID：15128711
> 
> 赞同：0
> 
> 时间：2013-02-28T06:13:07.953
> 
> 标签：qt, opengl, user-interface, event-handling

对于我正在编写的 Qt 应用程序，我想要一个可单击函数的列表，当单击该函数时，将允许用户提供所需的输入参数。

我特别寻找的是一系列小部件，它们为以下任务提供干净直观的界面：

*   用户滚动浏览执行计算的函数列表（在我的例子中，从`glm`）。

*   一旦找到一个功能，用户点击该项目；将打开一个弹出窗口，其中指定所需的输入参数（例如`vec3`、`vec4`等）。

这里的想法是函数本身已经存在：它们只需要一个接口，简而言之，它提供了一个伪解释器来处理它们的结果并将其输出到 GLWidget，GLWidget 将相应地更新传递的数据，将其发送到相应的着色器.

我查看了[QListView](http://qt-project.org/doc/qt-4.8/qlistview.html)及其 Widget 变体，但它似乎更适合文件系统数据，例如图像或文本文件，尽管我不太确定。到目前为止，它似乎是唯一可以被认为在这种情况下实际可用的东西。

有推荐的方法吗？总的来说，我对 Qt 相当陌生，因此我的知识非常有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:53:50.893

在您的情况下，视图并不重要。您需要创建/重用适应的模型。该模型必须包含您的视图显示的内容与您要启动的操作之间的关系。

例如，如果您的命令是类似 bash 命令的文本，您可以创建一个显示“列表文件”、“复制文件”的视图和一个包含数据的模型（“列表文件”='ls -l'），（“复制文件” = 'ls -l') 等。

您可以将不同的数据（使用 QVariant）存储在具有不同角色的同一项目中：Qt::DisplayRole 对应于视图显示的数据，而 Qt::UserRole 对应于您想要的数据。

因此，如果您只需要存储与名称相关联的命令行，则可以使用 Qt::UserRole 将名称存储在带有 Qt::DisplayRole 的项目中，并将命令行作为 QString（或其他）存储。

有关详细信息，请参阅 QAbstractItemModel::data() 和 QAbstractItemModel::setData()。

# html - w3c验证中的html 5选框标签错误

> ID：15128716
> 
> 赞同：3
> 
> 时间：2013-02-28T06:13:21.060
> 
> 标签：html, w3c-validation, marquee

我在选取框标签中有一些文字。

```
<marquee direction="left" scrollamount="4">
 Test Test Test Test Test
</marquee> 
```

我正在使用 html 5 和 css 3。当我在 w3c 验证器中检查我的 html 时，它显示以下错误。

```
 Element marquee not allowed as child of element div in this context. (Suppressing further errors from this subtree.)

        <marquee direction="left" scrollamount="4"> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:38:49.573

Marquee 标记不是 html5（根本不是 html，而是 1995 年以来的 Microsoft 专有标记）

你可以 ：

*   使用 javascript 为您的文本设置动画
*   使用 css 动画（[不完全兼容浏览器](http://caniuse.com/#feat=css-animation)）
*   使用[css3 marquee](http://www.w3.org/TR/css3-marquee/)（不完全兼容浏览器）
*   使用 marquee 并忽略 W3C 警告（marquee 完全兼容浏览器，即使在 iOS safari 中也是如此！）
*   不要使用选框效果（很难看）

小心 W3C 验证器，它并不总是知道所有 W3C 规范！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-03T12:26:49.220

marquee 标签在 HTML5 中已经过时，但在 CSS3 中返回（参见 [http://www.w3.org/TR/css3-marquee/](http://www.w3.org/TR/css3-marquee/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T07:23:45.923

使用 CSS3 Marquee 代替它

**html**

```
<p class="marquee"><span>This is your sample text.</span></p> 
```

**css**

```
/* Make it a marquee */
.marquee {
    width: 450px;
    margin: 0 auto;
    white-space: nowrap;
    overflow: hidden;
    box-sizing: border-box;
}

.marquee span {
    display: inline-block;
    padding-left: 100%;
    text-indent: 0;
    animation: marquee 15s linear infinite;
}

.marquee span:hover {
    animation-play-state: paused
}

/* Make it move */
@keyframes marquee {
    0%   { transform: translate(0, 0); }
    100% { transform: translate(-100%, 0); }
} 
```

# c# - 阻止与 Skype4com 的联系

> ID：15128721
> 
> 赞同：1
> 
> 时间：2013-02-28T06:13:53.157
> 
> 标签：c#, skype, skype4com

我不确定如何使用 Visual C# 的“SKYPE4COMlib”扩展来实际阻止或删除用户。我可以更改我的状态，返回消息，但我不知道该怎么做。如果有人知道任何其他有用的命令，也请在此处列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:41:52.310

用户 Liama​​Cloud 是正确的。

*用户*界面中有一个**IsBlocked**属性。

 *你可以这样做：

```
ISkype skype = _skype;
var tbb = skype.Friends.Cast<User>().Where(u => u.FullName.Contains("xxx");
foreach(User notAFriend in tbb)
{
   notAFriend.IsBlocked = true;
   MessageBox.Show(friend.FullName + " " + friend.IsBlocked);
} 
```

我已经对其进行了测试，并且可以正常工作。

最好的*

# html - iframe 不会占用全部空间，具体取决于 doctype

> ID：15128723
> 
> 赞同：0
> 
> 时间：2013-02-28T06:14:02.847
> 
> 标签：html, css, doctype

我有一个这样的 iframe：

```
<body><iframe id="tree" name="tree" src="foobar.html" frameborder="0" marginheight="5" marginwidth="5" width="100%" height="100%" scrolling="auto"></iframe></body> 
```

有了这个它可以工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

但这样它只显示为 100px 高：

```
<!DOCTYPE html> 
```

我还尝试了将 css 样式高度：100% 应用于 iframe 和正文，但这并没有做任何事情。

如何让 iframe 占据整页但仍使用

```
<!DOCTYPE html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:16:46.487

在 HTML 5 中，an 的 width 和 height 属性的值`<iframe>`必须在`px`not中定义`%`

它可能会将您解析`100%`为`100px`..只需根据您的需要调整`width/height`值，`px`您就很好了..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:17:34.533

`position:absolute`使用或使用您的 CSS 类`style="position:absolute;`

# android - 如何将我的 android 项目更改为特定版本计数（0.1、0.2、0.3...）？

> ID：15128724
> 
> 赞同：0
> 
> 时间：2013-02-28T06:14:11.690
> 
> 标签：android, version

在我将我的应用程序上传到 Play 商店之前，有没有办法计算我的应用程序的版本？版本 0.1 和更高版本 0.2 等等。

# linux - 获取 JAVA_HOME 的两个值

> ID：15128729
> 
> 赞同：2
> 
> 时间：2013-02-28T06:14:23.423
> 
> 标签：linux, environment-variables, java

我得到这个奇怪的东西。我的 JAVA_HOME 设置为 /usr/lib/jvm/java-6-openjdk-amd64。当我回显变量时，我得到相同的结果。但是当我使用 ant 构建项目时，我收到了这个错误。

```
Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "/usr/lib/jvm/java-6-openjdk-amd64/jre" 
```

这怎么可能？我安装了从 oracle 网站下载的 jdk 6，但后来我重命名了它。脚本很长。所以我给了pastebin链接： http: [//pastebin.com/mgJ1VbZ8](http://pastebin.com/mgJ1VbZ8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:37:35.233

从脚本中我看到您正在检查 JAVA_HOME/lib/tools.jar 是否存在，并基于此假设您正在运行 JDK 而不是 JRE。但是似乎正在发生的事情是您的 JDK bin 文件夹不在 PATH 上，而您的 JRE bin 文件夹在 PATH 上。未找到 Javac。执行 ant build.xml 时，确保 JDK/bin 文件夹在 PATH 上。最简单的测试方法是查看“javac”是否是有效命令。

# xml - 将 XML 源中的元素字符串写入 Powershell 中的纯文本文件时如何发出 Windows 行尾？

> ID：15128730
> 
> 赞同：1
> 
> 时间：2013-02-28T06:14:30.303
> 
> 标签：xml, powershell, newline, xmlreader

我有一个 PowerShell 脚本，它读取非常大的 XML 文件并提取代表嵌入式 C# 代码的某些元素的文本值。然后，该脚本将元素文本保存到与 XML 文件结构匹配的目录结构中的 .cs 代码文件中。出于性能考虑，我使用 XmlReader，因为文件太大（有时 > 200 MB）。

原始 XML 文件具有 Windows 行结尾 (CRLF)，但 .NET Framework XmlReader 类在从文件中读取时将行结尾从 CRLF“规范化”为仅 LF（符合 XML 规范）。

我的问题是：如何强制 PowerShell 在将文件写出到磁盘时将行结尾恢复为 Windows 标准，这样我就不会因为行结尾的变化而得到源代码控制“噪音”？

我目前正在使用以下 PowerShell 语句编写文件：`New-Item -Path $path -Force -ItemType file -Value $reader.ReadElementString()`

该`$reader`变量是 的一个实例`[System.Xml.XmlReader]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:51:21.267

你可以这样做：

```
$reader.ReadElementString().Replace("`n","`r`n") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:15:57.063

我建议`System.Xml.Reader`完全放弃。PowerShell 的内置 XML 处理更易于管理：

```
[xml]$data = Get-Content "C:\foo.xml"

$data.SelectNodes("//foo") | % {
  $_.bar
  $_.baz
} | Out-File "C:\out.txt" 
```

# blackberry-webworks - 如何在 BB10 dev alpha 设备上启动应用程序

> ID：15128734
> 
> 赞同：0
> 
> 时间：2013-02-28T06:14:44.800
> 
> 标签：blackberry-webworks, blackberry-10

嗨，我是黑莓新手，我为 BB10 开发了一个应用程序。我已经在模拟器上对其进行了测试，它工作正常。但是当我尝试在 BB10 dev alpha 设备上启动应用程序时，它会给出错误“由于错误 22 无法启动应用程序”。我使用的步骤：

首先，我使用以下方法创建了开发人员证书：

```
blackberry-signer -register -csjpin <csj pin> -storepass <KeystorePassword> <client-RDK-xxxxxx.csj file><client-PBDT-xxxxx.csj file> 
```

其次，我使用以下方法创建了一个调试令牌：

```
blackberry-debugtokenrequest -storepass <KeystorePassword> -devicepin <device PIN> <debug_token_file_name.bar> 
```

然后我使用以下命令在 dev alpha 设备中安装了调试令牌：

```
blackberry-deploy -installDebugToken <path to debug token> -device <IP address of device> -password <device password> 
```

然后我使用以下方法编译了应用程序：

```
bbwp [drive:][path]archive -d [-o dir] 
```

然后我使用以下语法部署了应用程序：

```
blackberry-deploy -installApp -password <device password> -device <IP address of device> -package <BAR file path> 
```

该应用程序已正确安装在设备中，但是当我单击应用程序图标时出现错误 22。

请帮助我，以便我可以在设备上启动应用程序。

------ *-------* ------ *-------* ------ *-------* ------ *----- --* ------ *-------* ------ *--------*

当我尝试通过涟漪启动应用程序时，我也遇到了同样的错误。这是我在 cmd 提示符下看到的内容。

```
2013-02-28 11:13:31 GET /ripple/build_status/6362 200
Info: Sending request: Install and Launch

Info: Action: Install and Launch

Info: File size: 411108

Info: Installing App.testDev_App___dbc068a4...
Info: Processing 411108 bytes

Info: Progress 96%...

Info: Progress 100%...

actual_dname::App.testDev_App___dbc068a4
actual_id::testDev_App___dbc068a4
actual_version::2.0.0.0
result::success
Info: Launching App.testDev_App___dbc068a4...

Error: Error loading application package: Invalid argument 
```

请帮助，以便我可以继续。提前致谢。

**更新**

```
<?xml version="1.0" encoding="utf-8"?>
<widget xmlns="http://www.w3.org/ns/widgets"
        xmlns:rim="http://www.blackberry.com/ns/widgets"
        version="2.0.0.0" id="someId">

  <author href="https://www.example.com/"
          rim:copyright="Copyright 1998-2012 My Corp">quepp</author>

  <name>appName</name>

  <description>
    description
  </description>

  <!--<icon src="icon"/>-->

  <content src="index.html"/>

  <feature id="blackberry.app">
    <param name="backgroundColor" value="FFFFFF" />
  </feature>

  <feature id="blackberry.app">
    <param name="orientation" value="portrait" />
  </feature>

  <feature id="blackberry.ui.dialog"/>
  <feature id="blackberry.identity" />

 <access uri="*" subdomains="true" />

  <license href="" />

  <rim:permissions>
    <rim:permit>access_shared</rim:permit>
    <rim:permit>read_device_identifying_information</rim:permit>
  </rim:permissions>

</widget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T12:05:44.273

我使用签名密钥，所以只需使用它们。（命令行参数可以更改）cd C:\Program Files\Research in Motion\BlackBerry 10 WebWorks SDK 1.0.4.11

之后，签署应用程序

```
bbwp FOLDER_APP -g PASS_KEY --buildId NUMBER -o OPUTPUT FOLDER -d 
```

在哪里：

```
-d => debug
FOLDER APP => where you have your webworks app
PASS_KEY => the password to sign an app(I supose you can ignore this parameter) 
```

之后，前往

```
cd dependencies\tools\bin 
```

并部署应用程序：

```
blackberry-deploy -installApp -password PASS_DEVICE -device IP -package BAR FILE 
```

在哪里：

```
password => the password of your device fixed AFTER activating the development mode.
IP => the IP of your device(I deploy via WIFI).
BAR FILE => path to your previously generated bar file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T14:24:22.443

您的应用程序是否需要访问某些受限资源，例如相机或文件？

在这种情况下，您需要在 config.xml 中添加相关权限。

# c++ - WP8：像 CRT 库一样的 C++ 内存泄漏检测

> ID：15128736
> 
> 赞同：2
> 
> 时间：2013-02-28T06:15:12.320
> 
> 标签：c++, memory-leaks, windows-phone-8, visual-studio-debugging

Microsoft Visual Studio为内存泄漏“检测”提供了 CRT 库 ( [http://msdn.microsoft.com/en-us/library/x98tx3cf.aspx )。](http://msdn.microsoft.com/en-us/library/x98tx3cf.aspx)但是这个库在 Windows Phone 8 上不起作用。是否有可比较的方法/库来分析 Windows Phone 8 C/C++ 代码中的内存泄漏？

问候，

# iphone - 如何在应用购买中实现多个产品标识符

> ID：15128737
> 
> 赞同：0
> 
> 时间：2013-02-28T06:15:12.870
> 
> 标签：iphone, objective-c, in-app-purchase

使用非消耗性产品（first_view 和 second_view）完成付款后，我有两个按钮打开两个新视图，我的代码在一个产品上运行良好，但我不知道如何将多个产品用于多个产品这是我的第一次体验使用应用内购买编码。我想我需要更新下面我正在使用此代码的 productsRequest 方法：

```
implementation ViewController

@synthesize firstBTN, secondBTN,;

#define kStoredData @"first_view"

-(BOOL)IAPItemPurchased {

NSError *error = nil;
NSString *password = [SFHFKeychainUtils getPasswordForUsername:@"username" andServiceName:kStoredData error:&error];

if ([password isEqualToString:@"password"]) return YES; else return NO;

}

-(IBAction)firstBTNPressed:(id)sender {

if ([self IAPItemPurchased]) {

    firstViewController *controller = [[firstViewController alloc] initWithNibName:@"firstView" bundle:nil];

[self presentModalViewController:controller animated:YES];

[controller release];

} else {
    // not purchased so show a view to prompt for purchase
    askToPurchase = [[UIAlertView alloc] 
                        initWithTitle:@"Feature Locked" 
                        message:@"Purchase Feature?"
                        delegate:self 
                        cancelButtonTitle:nil
                        otherButtonTitles:@"Yes", @"No", nil]; 
    askToPurchase.delegate = self;
    [askToPurchase show];
    [askToPurchase release];
}
}

-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {
for (SKPaymentTransaction *transaction in transactions) {
    switch (transaction.transactionState) {
        case SKPaymentTransactionStatePurchasing:

            break;

        case SKPaymentTransactionStatePurchased:

            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

            UIAlertView *tmp = [[UIAlertView alloc] 
                                initWithTitle:@"Complete" 
                                message:@"You have unlocked Feature 2!"
                                delegate:self 
                                cancelButtonTitle:nil 
                                otherButtonTitles:@"Ok", nil]; 
            [tmp show];
            [tmp release];

            NSError *error = nil;
            [SFHFKeychainUtils storeUsername:@"username" andPassword:@"password" forServiceName:kStoredData updateExisting:YES error:&error];

            [firstBTN setBackgroundImage:nil forState:UIControlStateNormal];

            break;

        case SKPaymentTransactionStateRestored:
            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

            break;

        case SKPaymentTransactionStateFailed:

            if (transaction.error.code != SKErrorPaymentCancelled) {
                NSLog(@"Error payment cancelled");
            }
            [[SKPaymentQueue defaultQueue]  finishTransaction:transaction];

            break;

        default:
            break;
    }
}
}

 -(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:     (SKProductsResponse *)response
{

SKProduct *validProduct = nil;
int count = [response.products count];

if (count>0) {

validProduct = [response.products objectAtIndex:0];

    SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"first_view"];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];

    }

else {
    UIAlertView *tmp = [[UIAlertView alloc]
                        initWithTitle:@"Not Available"
                        message:@"No products to purchase"
                        delegate:self
                        cancelButtonTitle:nil
                        otherButtonTitles:@"Ok", nil];
    [tmp show];
    [tmp release];
}

}

-(void)requestDidFinish:(SKRequest *)request  
{  
[request release];  
}  

-(void)request:(SKRequest *)request didFailWithError:(NSError *)error  
{  
NSLog(@"Failed to connect with error: %@", [error localizedDescription]);  
}  

#pragma mark AlertView Delegate
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex: (NSInteger)buttonIndex {

if (alertView==askToPurchase) {
    if (buttonIndex==0) {

        if ([SKPaymentQueue canMakePayments]) { 

            SKProductsRequest *request = [[SKProductsRequest alloc]  initWithProductIdentifiers:[NSSet setWithObject:@"first_view"]];  

            request.delegate = self;  
            [request start];  

        } else {
            UIAlertView *tmp = [[UIAlertView alloc] 
                                initWithTitle:@"Prohibited" 
                                message:@"Parental Control is enabled, cannot make a purchase!"
                                delegate:self 
                                cancelButtonTitle:nil 
                                otherButtonTitles:@"Ok", nil]; 
            [tmp show];
            [tmp release];
        }
    }
}

}

- (void)viewDidLoad
{
[super viewDidLoad];

if ([self IAPItemPurchased]) {
    [firstBTN setBackgroundImage:nil forState:UIControlStateNormal];

} else {
    [firstBTN setBackgroundImage:[UIImage imageNamed:@"Locked.png"]  forState:UIControlStateNormal];

}

} 
```

你能帮我用打开第二个视图的第二个按钮做同样的事情吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:39:08.323

first_view 应该是您在 iTunes 连接中的产品标识符。只需为您的其他产品传递另一个产品标识符。从产品请求类中，您可以确定购买了哪个产品标识符。

让我知道这是否有帮助。（你也许应该阅读一些关于这个的苹果文档，它解释得很清楚）

# pdo - 如何使用 fetchColumn 和 bindParam 获取行数

> ID：15128740
> 
> 赞同：0
> 
> 时间：2013-02-28T06:15:25.980
> 
> 标签：pdo, prepared-statement, rowcount, prepare, sqlbindparameter

为什么这不起作用

```
 $sth = $pdo->prepare("SELECT * FROM tempusers WHERE tempusers.username = :username AND   tempuser.email = :email AND password = :password");

   $sth->bindParam(':username', $register_data['username'], PDO::PARAM_STR);
   $sth->bindParam(':email', $register_data['email'], PDO::PARAM_STR);
   $sth->bindParam(':password', $register_data['password'], PDO::PARAM_STR);
   $sth->execute();
  if($sth->fetchColumn() > 0) {
      echo 'yes';
  }else{
      echo 'no';
  } 
```

然后当我运行这段代码时它可以工作

```
 $sth = $pdo->prepare("SELECT * FROM tempusers WHERE tempusers.username = :username");
   $sth->bindParam(':username', $register_data['username'], PDO::PARAM_STR);
   $sth->execute();
  if($sth->fetchColumn() > 0) {
      echo 'yes';
  }else{
      echo 'no';
  } 
```

当我尝试在 bindParam 值上使用更多时，代码会崩溃。为什么不能有更多的一个值来检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:31:19.387

要使用 fetchColumn 获取行数，您必须**在查询中选择此数字**

所以，而不是

```
SELECT * FROM 
```

你必须成功

```
SELECT count(*) FROM 
```

你就会有那个号码。

bindParam 必须像往常一样使用，就像以前一样。
但是，您必须避免代码中的拼写错误和类似错误。
当然，您必须设置适当的错误报告，以使自己能够发现所有错误。

> 为什么这不起作用

**始终按照**[标签 wiki](https://stackoverflow.com/tags/pdo/info)中的说明连接到 PDO
，您就会知道。

# android - Android 页面适配器问题：java.lang.NoSuchMethodError: android.webkit.WebView.setLayerType

> ID：15128747
> 
> 赞同：0
> 
> 时间：2013-02-28T06:16:02.180
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

我正在使用 pagerAdapter 来显示具有 Fragment 支持的内容。我收到错误

> java.lang.NoSuchMethodError: android.webkit.WebView.setLayerType

当我在 Android 2.2 或更低版本上运行应用程序时。但在装有 Android 4.0 的设备上，这一切正常。请检查出现错误的日志详细信息：

> java.lang.NoSuchMethodError: android.webkit.WebView.setLayerType
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 com.dealdetails.MyFragment.onCreateView(MyFragment.java:415)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.app.FragmentStatePagerAdapter.finishUpdate(FragmentStatePagerAdapter.java:160)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.view.ViewPager.populate(ViewPager.java:895)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.view.ViewPager.populate(ViewPager.java:772)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 android.support.v4.view.ViewPager.setAdapter(ViewPager.java:380)
> 
> 02-28 11:19:08.205: 错误/AndroidRuntime(27823): 在 my_package.main_View_Pager(my_java_class.java:1214)

请建议我如何在操作系统级别 < 2.2 的设备上运行该应用程序而不会出错

提前致谢

蒂姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:04:36.883

> 请建议我如何在操作系统级别 < 2.2 的设备上运行该应用程序而不会出错

不要在以下版本`Honeycomb`（API 级别 11）上使用该方法，因为它不存在，它是从开始引入的`Honeycomb`，您可以通过查看[class的](http://developer.android.com/reference/android/webkit/WebView.html#setLayerType%28int,%20android.graphics.Paint%29)[文档`WebView`](http://developer.android.com/reference/android/webkit/WebView.html#setLayerType%28int,%20android.graphics.Paint%29)来看到这一点。我不知道您如何解决较低 API 版本的问题。

# opencv - 在 Opencv 中使用 calcOpticalFlowPyrLK 函数做光流时的链接错误

> ID：15128749
> 
> 赞同：0
> 
> 时间：2013-02-28T06:16:10.327
> 
> 标签：opencv, graphics

我试图编写一个程序来使用opencv测试光流，但是当它链接时它给出了这个错误：

```
error LNK2019: unresolved external symbol "void __cdecl cv::calcOpticalFlowPyrLK(class  
cv::_InputArray const &,class cv::_InputArray const &,class cv::_InputArray const  
&,class cv::_OutputArray const &,class cv::_OutputArray const &,class cv::_OutputArray
const &,class cv::Size_<int>,int,class cv::TermCriteria,double,int,double)" (?
calcOpticalFlowPyrLK@cv@@YAXABV_InputArray@1@00ABV_OutputArray@1@11V?
$Size_@H@1@HVTermCriteria@1@NHN@Z) referenced in function _main 
E:\Documents\Projects\VisualStudio\LKMethod2\LKMethod2\main.obj 
```

通常是因为没有包含链接库，但这次我在 Linker->Input->Additional Dependencies 中包含了这些 opencv 的库，如下所示：

```
C:\sdks\opencv\build\x86\vc11\lib\Release\opencv_calib3d244.lib
...
...
C:\sdks\opencv\build\x86\vc11\install\lib\opencv_video244.lib
C:\sdks\opencv\build\x86\vc11\install\lib\opencv_videostab244.lib 
```

最奇怪的是只有这个calcOpticalFlowPyrLK函数有链接错误，而其他函数没有这样的错误。（但确实我已经包含了opencv_video）。我试图重建 opencv 库，但徒劳无功。请帮我解决，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T06:16:51.787

你应该使用

*   `opencv_calib3d244d.lib`反而`opencv_calib3d244.lib`

*   `opencv_video244d.lib`反而`opencv_video244.lib`

*   `pencv_videostab244d.lib`反而`pencv_videostab244.lib`

# javascript - 浏览器调整大小时如何正确调整div大小？

> ID：15128750
> 
> 赞同：0
> 
> 时间：2013-02-28T06:16:10.523
> 
> 标签：javascript, html

假设我有下表：

```
<div style="padding:10px">
<table style="width:100%">
<tr><td style="width:10%">Jordan Roger</td><td style="width:100%"><div width="200px" style="background:red"></div></td></tr>
</table>
</div> 
```

我如何使用 javascript 来做到这一点，以便在调整浏览器大小时 200px div 始终填充到屏幕右侧的空间（尊重 10px 填充）？（高度可以保持不变，宽度优先。

注意：百分比不是 div 的选项。通常我会使用像 100% 这样的百分比，但这不是一个选项，因为我只能将 div 的宽度设置为以 px 为单位的特定值，而不是使用“thediv.setSize(width, height)”的百分比。

如果可能的话，我正在考虑以下作为这样做的潜在方法，但不知道如何正确利用它，因为 200px div 不会占用浏览器的整个高度和宽度，因为它位于桌子。

```
$(window).resize(function() 
{    
    mydiv.setSize($(document).width(), $(document).height()));   
}); 
```

如果有一些“正确”的方式我应该使用这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:18:18.073

您必须使用宽度百分比 - 即“相对”宽度。

* * *

**编辑以反映更改的要求。**

为什么不像这里那样用 JS 设置样式呢？[如何在 JavaScript 中以百分比设置 div 的宽度？](https://stackoverflow.com/questions/2460662/how-to-set-width-of-a-div-in-percent-in-javascript)

或者，您可以将侦听器绑定到：[http://api.jquery.com/resize/](http://api.jquery.com/resize/)，它检查页面的宽度，并调用该 setSize 函数

# java - 使用 Hibernate 更新表中“许多”项目的计数

> ID：15128752
> 
> 赞同：0
> 
> 时间：2013-02-28T06:16:37.957
> 
> 标签：java, hibernate, orm, count, one-to-many

我的数据库中有一个简单的一对多关系。以下是对应的类：

```
class Department
{
    int deptId;
    int count; //This corresponds to the total number of Employees in a department
    List<Employee> employees; //An employee belongs to only one department
}

class Employee
{
    int employeeId;
    Department dept;
} 
```

为了保持`count`更新，我`count`在每个`CUD`操作上都设置了。是否有一种自动的方式来更新`count`每个员工向部门添加/删除的信息？（注释/限制或什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:15:06.223

为什么要在员工人数中保留一个全局变量？添加一个返回员工列表大小的方法更安全、更优雅。

```
public class Department {

   private int deptId;
   private List<Employee> employees;

   public int getCount() {
      if (employees == null) {
         return 0;
      }
      return employees.size();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:31:46.087

据我所知，Hibernate 中没有自动方式。

无论如何，通常这有可能产生错误的结果。如果一个用户添加了一名员工，同时第二个用户删除了另一名员工，会发生什么？（这种情况仍然可以在 Hibernate 中处理。）或者如果 dba 通过插入语句添加一些员工或从备份加载数据会发生什么？

在数据库模型看来，这是多余的信息，应该省略。相反，`SELECT COUNT(*) FROM employee WHERE dept =:deptId`应该使用 a。

计数列的唯一原因是如果您经常需要计数并且您在使用 select(*) 时遇到性能问题。对于这种特殊情况，没有 Hibernate 自动化。

编辑：

我现在才看到 Overmeulens 的回答。这也行得通。如果您只需要计数，那么`SELECT COUNT(*)`（也可以在 HQL 中完成）更快，如果您仍然需要员工记录，那么 Overmeulens 解决方案具有更好的性能。

# java - 二次读取法

> ID：15128758
> 
> 赞同：8
> 
> 时间：2013-02-28T06:16:48.387
> 
> 标签：java, math, quadratic

我必须为二次类编写一个读取方法，其中以 ax^2 + bx + c 的形式输入二次。类的描述是这样的：

添加一个读取方法，要求用户输入标准格式的方程并正确设置三个实例变量。（因此，如果用户键入 3x^2 - x，则将实例变量设置为 3、-1 和 0）。这将需要您之前完成的字符串处理。显示按原样输入的实际方程并正确标记为预期输出。

我能够通过使用字符串操作和 if else 语句来完成 ax^2 部分。但我不确定如何处理等式的 bx 和 c 部分，因为 bx 和 c 前面可能有符号。这是我如何执行该方法的 ax^2 部分。

```
public void read()
{
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Please enter a quadratic equation in standard format.");
    String formula = keyboard.next();
    String a = formula.substring(0, formula.indexOf("x^2"));
    int a2 = Integer.parseInt(a);
    if (a2 == 0)
    {
        System.out.println("a = 0");
    }
    else if (a2 == 1)
    {
        System.out.println("a = 1");
    }
    else
    {
        System.out.println("a = " + a2);
    }
 } 
```

随意编写任何代码作为示例。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:08:44.697

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Mini {

    public static void main(String[] args) {
        int a = 0;
        int b = 0;
        int c = 0;

    String formula = " -x^2 + 6x - 5";
    formula = formula.replaceAll(" ", "");

    if (!formula.startsWith("+") && !formula.startsWith("-"))
        formula = "+" + formula;

        String exp = "^((.*)x\\^2)?((.*)x)?([\\+\\s\\-\\d]*)?$";
        Pattern p = Pattern.compile(exp);
        Matcher m = p.matcher(formula);

        System.out.println("Formula is " + formula);
        System.out.println("Pattern is " + m.pattern());

        while (m.find()) {
            a = getDigit(m.group(2));
            b = getDigit(m.group(4));
            c = getDigit(m.group(5));
        }

        System.out.println("a: " + a + " b: " + b + " c: " + c);

    }

    private static int getDigit(String data) {
        if (data == null) {
            return 0;
        } 
        else 
        {

            if (data.equals("+"))
            {
                return 1;
            }
            else if (data.equals("-"))
            {
                return -1;
            }
            else
            {
                try
                {
                    int num = (int) Float.parseFloat(data);
                    return num;
                }
                catch (NumberFormatException ex)
                {
                    return 0;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:44:18.687

这是一个如何使用正则表达式的示例。到目前为止，这只有在方程以 ax^2 + bx + c 格式给出时才能正常工作。可以进一步调整它以允许更改子术语的顺序、缺失的术语等。为此，我可能会尝试为每个子术语提出正则表达式。无论如何，这应该可以为您提供总体思路：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

class ParseEquation {
    static Pattern match = Pattern.compile("([\\+\\-]?[0-9]*)x\\^2([\\+\\-]?[0-9]*)x([\\+\\-]?[0-9]*)");

    static String parseEquation(String formula) {
        // remove all whitespace
        formula = formula.replaceAll(" ", "");
        String a = "1";
        String b = "1";
        String c = "0";
        Matcher m = match.matcher(formula);
        if (!m.matches()) return "syntax error";
        a = m.group(1);
        if (a.length() == 0) a = "1";
        if (a.length() == 1 && (a.charAt(0) == '+' || a.charAt(0) == '-')) a += "1";
        b = m.group(2);
        if (b.length() == 0) b = "1";
        if (b.length() == 1 && (b.charAt(0) == '+' || b.charAt(0) == '-')) b += "1";
        c = m.group(3);
        return a + "x^2" + b + "x" + c;
    }

    public static void main(String[] args) {
        System.out.println(parseEquation("2x^2 + 3x - 25"));
        System.out.println(parseEquation("-2x^2 + 3x + 25"));
        System.out.println(parseEquation("+2x^2 + 3x + 25"));
        System.out.println(parseEquation("x^2 + 3x + 25"));
        System.out.println(parseEquation("2x^2 + x + 25"));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T12:33:12.640

通过正则表达式：

```
sub quadParse {
    my ($inputStr) = @_;
    my $str = "+".$inputStr;        # as the first needn't have a sign
    $str =~ s/\s+//g;               # normalise
    my $squared = $1 if ($str =~ m/([+-][0-9])*x\^2/);
    my $ex = $1 if ($str =~ m/([+-][0-9]*)x(?!\^)/);
    my $const = $1 if ($str =~ m/([+-][0-9]+)(?!x)/);
    return "${squared}, ${ex}, ${const}";
} 
```

对于字符串解析，Perl。

哦，那就继续吧：

```
public static String coeff(String str, String regex) {
    Pattern patt = Pattern.compile(regex);
    Matcher match = patt.matcher(str);
    // missing coefficient default
    String coeff = "+0"; 
    if(match.find()) 
        coeff = match.group(1);
    // always have sign, handle implicit 1
    return (coeff.length() == 1) ? coeff + "1" 
        : coeff;
}
public static String[] quadParse(String arg) {
    String str = ("+" + arg).replaceAll("\\s", "");
    String quad = coeff(str, "([+-][0-9]*)x\\^2" );
    String ex = coeff(str, "([+-][0-9]*)x(?!\\^)");
    String cnst = coeff(str, "([+-][0-9]+)(?!x)" );
    return new String[] {quad, ex, cnst};
} 
```

[ideone 中的 Java 测试](http://ideone.com/clone/SXf4k2)。

它们以任何顺序处理公式，第一个术语有或没有初始符号，并正确处理缺失的术语。Perl 版本没有将 '+' 修复为 '+1' 等，或者为缺少的术语提供明确的 '0'，因为我已经没有时间了。

# git - vimdiff 文件的当前版本和上一个 git 版本之间的差异

> ID：15128761
> 
> 赞同：20
> 
> 时间：2013-02-28T06:17:06.760
> 
> 标签：git, vim, vimdiff

有没有办法使用 vimdiff 比较文件的当前版本和**同一**文件 n git 版本之前的版本？

*例如*，我正在处理**master**分支上的文件**foo.c。**我想在**master~10**的 foo.c 和 foo.c 之间做一个 vimdiff ，从旧版本复制一两行。

 ****PS我知道**git cherry pick**，但这是针对整个文件，而不仅仅是几行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-28T06:26:19.930

呸！实时调频。我正在添加一个关于这不是**git difftool**用例的 PPS ，然后开始想知道“ *git difftool 到底做了什么......* ”。

解决方案是：

```
git difftool master master~10 -- foo.c 
```

也就是说，假设 difftool 已经在 ~/.gitconfig 中正确设置：

```
[diff]
  tool = vimdiff
[difftool]
  prompt = false 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-28T08:16:04.727

对于在 Vim 下使用 Git，[fugitive.vim - 一个非常棒的 Git 包装器，它应该是非法](http://www.vim.org/scripts/script.php?script_id=2975)的插件非常有用。一探究竟！

vimdiff 可以用`:Gdiff [revision]`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-29T11:07:28.450

在不覆盖 git 配置的情况下工作的解决方案是

```
vimdiff file.tex <( git show master~2:file.tex ) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T06:29:00.513

[使用 vimdiff 查看所有 `git diffs`](https://stackoverflow.com/questions/3713765/viewing-all-git-diffs-with-vimdiff)的可能重复项****

# html - 想通过 jquery 形成一个数组来发布该数组

> ID：15128763
> 
> 赞同：0
> 
> 时间：2013-02-28T06:17:09.573
> 
> 标签：html, jquery

我想通过使用 for 循环来发布包含 12 个月值的数组值来形成一个数组。我正在使用如下代码：

```
 $('#savebudget').live('click', function () {
            var obj = {
                for (var i = 1; i < 13; i++) {
                    var bud=$('#bud_'+i).attr("value"),
                    'm'.i:bud;
                }
            }
            $.ajax({
                type: 'POST',
                data: obj,
                url:root+'team/sales?json',
                success: function (data) {
                    alert("Budget Saved Successfully");
                },
                datatype: 'json'
            }); 
```

我想用 ajax 发布“obj”，其中包含 12 个月的预算值。我也尝试过如下：

```
for (var i = 1; i < 13; i++) {
                        var bud=$('#bud_'+i).attr("value"),
                        'm'+i:bud;
                    } 
```

谁能告诉我如何制作“obj”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:20:26.447

使用`.map`和`.join`jQuery 方法会有所帮助。

```
var passStr = $('input[id^="#bud_"]').map(function()
{
    return $(this).val();
}).get().join(","); 
```

然后发送到`$.ajax`.

请记住，上面不会创建`Object`它会创建字符串并替换`.live()`为，`.on()`因为`.live()`新版本已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:25:23.520

```
var data = {};

$('input').each(function (i) {
    var key = 'm' + i;
    data[key] = this.value;
}); 
```

# c# - 使用 Console.WriteLine (C#) 或 printfn (F#) 编写粗体文本？

> ID：15128766
> 
> 赞同：17
> 
> 时间：2013-02-28T06:17:12.550
> 
> 标签：c#, .net, windows, f#, console

`Console.WriteLine`有没有一种使用( *C#* ) 或`printfn`( *F#* )快速编写粗体文本的方法？

如果不是粗体，也许是其他类型的视觉差异，比如带下划线的文本？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T06:18:47.680

您可以设置[Console.ForegroundColor](http://msdn.microsoft.com/en-us/library/system.console.foregroundcolor.aspx)。点击链接，MSDN 中提供了一个非常好的例子。

字体和样式不按单词提供。要获得粗体、斜体、下划线或大小，您必须更改控制台中的*所有*文本。

```
Console.ForegroundColor = ConsoleColor.Red;
Console.WriteLine("Test Text");

Console.ForegroundColor = ConsoleColor.Blue;
Console.BackgroundColor = ConsoleColor.White;
Console.WriteLine("Test Text 2");

Console.ResetColor(); // To return colors back 
```

# java - 虽然我的布尔方法正确返回 true 或 false，但我不能在 main 中使用 return

> ID：15128767
> 
> 赞同：0
> 
> 时间：2013-02-28T06:17:16.047
> 
> 标签：java, methods, boolean, call

所以我的布尔方法运行并返回正确的真或假......但我需要某种扫描仪函数来获取返回的内容以遵循 if 语句。这是我的主要代码。任何帮助表示赞赏！另外，我的柜台不工作:(我是新来的。

```
import java.util.Random;
import java.util.Scanner;

public class CrapsP5 {
public static void main(String[] args) {

    int number = 0, total, counter;

    total = counter = 0;
    String response;
    Scanner console = new Scanner(System. in );
    //1
    System.out.println("Would you like to play craps? (Y/N)");
    response = console.next();
    if (response.equalsIgnoreCase("N")) {
        System.exit(0);
    }
    //2       
    System.out.println("Welcome to craps. Would you like to see the rules? (Y/N)");
    response = console.next();
    if (response.equalsIgnoreCase("Y")) {
        rules();
    }
    //3 call play method

    play();
    //I need something here to act like the scanner console does?? yes?? but what?
    if (true) {

        System.out.println("Congrats! You've won!");
        counter++; //add 1 to win count (w) 
        total = counter;
        play();

    }
    if (false) {
        System.out.println("I'm sorry, you've lost.");
        System.exit(0);
    }
    //4
    System.out.println("Thanks for playing! You won " + total + " number of times before     losing."); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:22:47.957

这是你的布尔方法？玩（）？如果是这样

```
boolean result = play();
if(result){
...
}
else{
...
} 
```

或者

```
if(play()){
    ...
} else {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:29:19.313

尝试：

```
if(play())
{
  ....
}
else
{

} 
```

如果你的 play() 返回布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T15:41:37.237

我想指出这一点：

```
play();
if (true) {

    System.out.println("Congrats! You've won!");
    counter++; //add 1 to win count (w) 
    total = counter;
    play();

} 
```

说，用户第一次玩，如果他赢了，则流程进入条件块，再次调用play。无论用户第二次玩输赢，计数器都不会改变，游戏结束，执行：

```
System.out.println("Thanks for playing! You won " + total + " number of times before losing."); 
```

我建议使用 while 循环继续播放，直到用户输掉。如：

```
while(play()){
    System.out.println("Congrats! You've won!");
    counter++; 
    total = counter;        
}
//It is assumed that the counter and eventually the game should restart on losing
System.out.println("I'm sorry, you've lost.");
System.out.println("Thanks for playing! You won " + total + " number of times before losing."); 
```

# sql-server - SQL Server 中两种选择所有列的区别？

> ID：15128768
> 
> 赞同：1
> 
> 时间：2013-02-28T06:17:20.090
> 
> 标签：sql-server, select

除了代码长度之外，这两个 SQL 查询有什么区别？

```
SELECT * from tblPerson

SELECT id, name age from tblPerson 
```

注意：我在这里选择所有列，在第二个代码中，即表格的所有列，我没有选择特定位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:20:16.713

一个明显的区别确实是代码的长度。另一个区别是可维护性（不知道如何写那个词），即稍后向'tblPerson' 添加一列将改变结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:18:56.243

没有区别。

`SELECT *`表示您正在选择要在结果列表中显示的所有列。
`SELECT col1, ...`仅指定要显示的列。

# css - 如何在html中统一对齐这些按钮

> ID：15128770
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:17:20.847
> 
> 标签：css, html, button

我有两个按钮。一个带有值“a”的按钮和另一个带有“/”的按钮。两个按钮的宽度不同。如何使其统一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:22:25.353

你可以用类似的东西来固定宽度

```
width: 20px; 
```

# javascript - 跳过给出相同来源错误或只是不加载的 iframe 源

> ID：15128771
> 
> 赞同：0
> 
> 时间：2013-02-28T06:17:34.413
> 
> 标签：javascript

我有一个脚本，它从数组中获取 url，然后将它们一个接一个地放入 iframe：

```
<script type="text/javascript">
    $(document).ready(function () {
        var array = ['http://www.example1.come', 'http://www.example2.com', 'http://www.example3.com'];
        var beforeLoad = (new Date()).getTime();
        var loadTimes = [];
        $('#1').on('load', function () {
            loadTimes.push((new Date()).getTime());
            $('#1').attr('src', array.pop());
            if (array.length === 0) {
                $.each(loadTimes, function (index, value) {
                    $("#loadingtime" + index).html(value - beforeLoad);
                });
            }
        }).attr('src', array.pop());
    });
</script> 
```

我的问题是，如果我输入像“google.com”或“youtube.com”这样的网址 - 它不会加载，从而使其他来源卡住并且也不会加载。如果我尝试将 google.com 作为 iframe 的来源，我会在 chrome 控制台模式下收到此错误：`Refused to display 'http://www.google.com/' in a frame because it set 'X-Frame-Options' to 'SAMEORIGIN'.`

如果我的 url 列表中有这样一个 url 给出了这个错误并且不会加载，我怎么能做到这一点，它会跳过那个 url 并加载下一个？我可以设置一个超时或什么的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:29:41.607

不幸的是，我认为你无法摆脱这个错误，因为它是防止[点击劫持](http://en.wikipedia.org/wiki/Clickjacking)的安全功能。

[有关更多信息，请参阅 MDN](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)。据它介绍，现在[所有主要桌面浏览器都](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options#Browser_compatibility)支持 X-Frame-Options 标头。

有几个想法供您尝试：

1.  您的代码似乎可以在 Firefox 中运行（Firefox Nightly，2013-01-06），因此如果可以选择更改浏览器，您可以尝试。
2.  使用 Ajax，您可以在更改 iframe.src 属性之前检查网站的标题。如果其中一个标题是“X-Frame-Options”，您可以选择继续访问另一个 URL。
    当然，使用这种方法你会偶然[发现 CORS ，但是](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)[在 Firefox](https://stackoverflow.com/a/7598825/782609)和[Chrome](https://stackoverflow.com/a/3177718/782609)中都可以禁用此功能。
    显然，在您的情况下，通过 Ajax 加载网页然后测量它的加载时间似乎不是一个好主意。但是，您可以尝试加载子页面（例如“ [http://youtube.com/SOMETHING](http://youtube.com/SOMETHING) ”）而不是根页面，以避免缓存您正在测量的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:15:48.663

从技术上讲，您可以尝试在您的 Web 服务器上下载该页面，然后显示该文件。

法律上不允许你这样做。

# vba - 我需要从一个工作簿中的某些列中提取数据并将其附加到另一个工作簿中的现有数据中

> ID：15128783
> 
> 赞同：0
> 
> 时间：2013-02-28T06:18:28.603
> 
> 标签：vba

老实说，我已经搜索和搜索，虽然可能有一个类似问题的现有答案，但我似乎无法找到它。那说：

*   我在两个不同的工作簿中有数据，我需要从每周生成的文件中选定数量的非连续列中复制数据，并将其附加到主文件中现有数据的特定列

*   我每周都会收到一个名为 results.data.xls 的新文件，它包含 5 列具有可变记录数的数据 - 有时可能是两行，有时可能是 200+

*   我希望能够复制出现在 results.data.xls 中的列“B”（`'PRODUCT_FORMAT_CAPACITY'`）、列“D”（`'CUSTOMER'`）和列“E”（`BILLTO_CUSTOMER_NUM`）中的数据，并将其附加到 master 中类似标题的列中的现有数据.data.xls

*   录制宏并没有让我走得太远，因为我显然无法理解附加数据的需要 - 我已经看到 VBA 命令可以实现这一点，但我不知道如何将简单的录制修改为让它做我需要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T19:28:56.373

宏记录器非常适合发现复杂的单语句键盘命令的语法。但是，如果您执行 A 然后 B 然后 C，记录器将这些记录为三个完全独立的命令，即使它们是单个命令的阶段。

测试下面的代码：

*   我创建了工作簿“master.data.xls”，并在其中创建了工作表“组合”。你没有提到你的工作表名称，所以我自己编了。我以三列“PRODUCT_FORMAT_CAPACITY”、“CUSTOMER”和“BILLTO_CUSTOMER_NUM”为标题，但不在 B、D 和 E 列中。我在这些列中放置了一些随机数据。
*   我创建了工作簿“results.data.xls”，并在其中创建了工作表“周”。我在 B、D 和 E 列的标题为“PRODUCT_FORMAT_CAPACITY”、“CUSTOMER”和“BILLTO_CUSTOMER_NUM”。我在这些列中放置了一些随机数据。
*   我在单独的工作簿中创建了宏。我更喜欢将我的宏保存在单独的工作簿中，这样用户 (1) 就不会被它们打扰，并且 (2) 无法更改它们。

您不会说您是编程新手还是 VBA 新手。我假设您是编程新手。下面的大部分代码都是关于检查您的假设，如果事情不符合预期，则优雅地失败。

有几种替代技术可用于查找最底行或最右列，但在每种情况下都不起作用。我为下面的代码选择了其中一种技术。有关一些替代方案的演示，请参阅我的这个答案：[https](https://stackoverflow.com/a/18220846/973283) ://stackoverflow.com/a/18220846/973283 。

希望这可以帮助。

```
' "Option Explicit" stops a mispelt name becoming a declaration.  Without
' "Option Explicit" the following will define a new variable Conut.  Such
' errors can be very difficult to find:
'    Dim Count As Long
'    Conut = Count + 1
Option Explicit

  ' Use constants for values that will not change during a run of the macro
  ' particularly if you have to use them several times or if purpose of the
  ' value is not obvious.  "Cells(Row,2)" is a lot harder to understand than
  ' "Cells(Row,ColResultProduct)".  I have used WBkMasterName several times.
  ' If the workbook is renamed, changing the constant declaration fixes the
  ' problem.
  Const ColResultProduct As Long = 2
  Const ColBillToName As String = "BILLTO_CUSTOMER_NUM"
  Const ColCustomerName As String = "CUSTOMER"
  Const ColProductName As String = "PRODUCT_FORMAT_CAPACITY"
  Const WBkMasterName As String = "master.data.xls"
  Const WBkResultName As String = "results.data.xls"
  Const WShtMasterName As String = "Combined"
  Const WShtResultName As String = "Week"

  ' My naming convention is ABC where A is the type (Col for column, WBk for
  ' workbook, etc), B identifies the particular A (for example, for Col, B
  ' identifies the worksheet) and C identifies which AB if there is more than
  ' one (for ColMaster I have ColMasterProduct, ColMasterBillTo, ColMasterCrnt
  ' (Crnt = Current), etc.  You may not like my naming convention. Fine, pick
  ' your own or, better still, agree one with colleagues.  Conventions mean
  ' you can look at the program you wrote twelve months ago or your colleague
  ' wrote and understand the variables.

  ' My comments tell you my objective or my reason for selecting method A and
  ' not B. They do not explain VBA syntax.  For example, once you know the
  ' Workbooks.Open statement exists, it is easy to find an explanation of its
  ' syntax within the VBA help or via an internet search,

Sub Demo()

  Dim ColMasterBillTo As Long
  Dim ColMasterCrnt As Long
  Dim ColMasterCustomer As Long
  Dim ColMasterLast As Long
  Dim ColMasterProduct As Long
  Dim ColResultBillTo As Long
  Dim ColResultCustomer As String
  Dim CountMasterColFoundCrnt As Long
  Dim CountMasterColFoundTotal As Long
  Dim InxWBkCrnt As Long
  Dim PathCrnt As String
  Dim RngResult As Range
  Dim RowMasterNext As Long
  Dim RowResultLast As Long
  Dim TempStg As String
  Dim WBkMaster As Workbook
  Dim WBkResult As Workbook
  Dim WShtMaster As Worksheet
  Dim WShtResult As Worksheet

  ' ThisWorkbook identifies the workbook containing the macro.
  ' I will assume the data workbooks are in the same folder as
  ' the macro workbook.
  PathCrnt = ThisWorkbook.Path

  ' You do not want to run this macro when someone has the data workbooks open
  ' so check for them being within the collection of open workbooks.
  For InxWBkCrnt = 1 To Workbooks.Count
    If Workbooks(InxWBkCrnt).Name = WBkMasterName Then
      Call MsgBox("Please close workbook '" & WBkMasterName & _
                                   "' before running this macro.", vbOKOnly)
      Exit Sub
    End If
    If Workbooks(InxWBkCrnt).Name = WBkResultName Then
      Call MsgBox("Please close workbook '" & WBkResultName & _
                                   "' before running this macro.", vbOKOnly)
      Exit Sub
    End If
  Next

  ' The next blocks of code check that the workbooks exist and contain the
  ' expected worksheets with the expected columns. You may think that this
  ' code is unnecessary and I hope you are right.  However, if something is
  ' wrong, do you want your macro to fail unexpectedly with a yellow statement
  ' and an error message a programmer may find difficult to understand or
  ' corrupt data because columns have moved or do you want the macro to close
  ' tidily with an error message that the user understands?

  ' "On Error Resume Next" Statement "On Error GoTo 0" switches off normal
  ' error processing for "Statement". You can then check if "Statement"
  ' has had the expected result. Some statements set Err.Number and
  ' Err.Description if they fail but Workbooks.Open does not.

  ' You can use Dir$() to check for the file existing but (1) I think the
  ' approach below is marginally easier and (2) Dir$() checks for existence
  ' not openability.

  ' Try to open data workbooks.  Report failure to the user.
  On Error Resume Next
  Workbooks.Open PathCrnt & "\" & WBkMasterName
  On Error GoTo 0

  If ActiveWorkbook.Name = ThisWorkbook.Name Then
    Call MsgBox("I was unable to open workbook " & _
                                              WBkMasterName & "'.", vbOKOnly)
    Exit Sub
  End If
  Set WBkMaster = ActiveWorkbook

  On Error Resume Next
  Workbooks.Open PathCrnt & "\" & WBkResultName
  On Error GoTo 0

  If ActiveWorkbook.Name = WBkMaster.Name Then
    Call MsgBox("I was unable to open workbook '" & _
                                              WBkResultName & "'.", vbOKOnly)
      ' Tidy up by closing open workbook and releasing resource
      WBkMaster.Close SaveChanges:=False
      Set WBkMaster = Nothing
    Exit Sub
  End If
  Set WBkResult = ActiveWorkbook

  ' Try to reference worksheets
  With WBkMaster
    On Error Resume Next
    Set WShtMaster = .Worksheets(WShtMasterName)
    On Error GoTo 0
    If WShtMaster Is Nothing Then
      Call MsgBox("Workbook '" & WBkMasterName & "' does not contain " & _
                  "worksheet '" & WShtMasterName & "'.", vbOKOnly)
      WBkMaster.Close SaveChanges:=False
      WBkResult.Close SaveChanges:=False
      Set WBkMaster = Nothing
      Set WBkResult = Nothing
      Exit Sub
    End If
  End With

  With WBkResult
    On Error Resume Next
    Set WShtResult = .Worksheets(WShtResultName)
    On Error GoTo 0
    If WShtResult Is Nothing Then
      Call MsgBox("Workbook '" & WBkResultName & "' does not contain " & _
                  "worksheet '" & WShtResultName & "'.", vbOKOnly)
      WBkMaster.Close SaveChanges:=False
      WBkResult.Close SaveChanges:=False
      Set WBkMaster = Nothing
      Set WBkResult = Nothing
      Exit Sub
    End If
  End With

  With WShtResult

    ' I have defined 'ColResultProduct' with a constant.  That will be the best
    ' approach unless you know to expect a particular type of change.

    ' I use "Debug.Assert Boolean-expression" extensively during development.
    ' In particular, I place "Debug.Assert False" above every alternative path
    ' through my code. When I hit a "Debug.Assert False" during testing, I
    ' comment it out.  If any remain at the end of testing I know that either
    ' my testing was not as thorough as it should be or I have allowed for
    ' a situation that does not exist.  Either way, the code needs review.
    ' Leaving a "Debug.Assert" statement in code you release to users would be
    ' very unprofessional.
    Debug.Assert .Cells(1, ColResultProduct).Value = ColProductName

    ' In a Cells object, the column can be a number or a letter.  Use whichever
    ' you prefer. I do not like statements like this buried in the code. This
    ' should be a constant statement at the top of the module.
    ColResultCustomer = "D"

    If .Cells(1, ColResultCustomer).Value <> ColCustomerName Then
      ' Note the use of property Address as an easy way of converting a VBA
      ' style address to a user style address.  Note also the use of Replace to
      ' remove the dollar signs from "$D$1" to give "D1"
      Call MsgBox("Cell " & Replace(.Cells(1, ColResultCustomer).Address, "$", "") _
           & " of worksheet '" & WShtResultName & "' of workbook '" & _
           WBkResultName & "' is not " & ColCustomerName & ".", vbOKOnly)
      WBkMaster.Close SaveChanges:=False
      WBkResult.Close SaveChanges:=False
      Set WBkMaster = Nothing
      Set WBkResult = Nothing
      Exit Sub
    End If

    ColResultBillTo = 5         ' Again, this should be a constant
    If .Cells(1, ColResultBillTo).Value <> ColBillToName Then
      Call MsgBox("Cell " & Replace(.Cells(1, ColResultBillTo).Address, "$", "") _
           & " of worksheet '" & WShtResultName & "' of workbook '" & _
           WBkResultName & "' is not " & ColBillToName & ".", vbOKOnly)
      WBkMaster.Close SaveChanges:=False
      WBkResult.Close SaveChanges:=False
      Set WBkMaster = Nothing
      Set WBkResult = Nothing
      Exit Sub
    End If
  End With

  With WShtMaster

    ' Do not consider anything like this code unless columns are moved
    ' regularly. It is so easy to waste time preparing for situations that will
    ' never occur. You could amend three constants many times more quickly than
    ' you can get code like this debugged.  I have code like this because I
    ' have situations in which columns moving is likely to occur and I do
    ' not want my diverse users coming back to me when it does.

    ColMasterLast = .Cells(1, Columns.Count).End(xlToLeft).Column
    CountMasterColFoundTotal = 0
    ColMasterBillTo = 0
    ColMasterCustomer = 0
    ColMasterProduct = 0
    ' Look for the three headers and record their columns.  Record
    ' number of headers found.
    For ColMasterCrnt = 1 To ColMasterLast
      If .Cells(1, ColMasterCrnt).Value = ColBillToName Then
        CountMasterColFoundTotal = CountMasterColFoundTotal + 1
        ColMasterBillTo = ColMasterCrnt
      ElseIf .Cells(1, ColMasterCrnt).Value = ColCustomerName Then
        CountMasterColFoundTotal = CountMasterColFoundTotal + 1
        ColMasterCustomer = ColMasterCrnt
      ElseIf .Cells(1, ColMasterCrnt).Value = ColProductName Then
        CountMasterColFoundTotal = CountMasterColFoundTotal + 1
        ColMasterProduct = ColMasterCrnt
      End If
    Next
    If CountMasterColFoundTotal <> 3 Then
      ' One or more column has not been found
      CountMasterColFoundCrnt = 3
      TempStg = "I cannot find column headings"
      If ColMasterProduct = 0 Then
        'Debug.Assert False
        TempStg = TempStg & " " & ColProductName
        CountMasterColFoundCrnt = CountMasterColFoundCrnt - 1
        If CountMasterColFoundCrnt - 1 >= CountMasterColFoundTotal Then
          'Debug.Assert False
          TempStg = TempStg & " or"
        'Else
          'Debug.Assert False
        End If
      'Else
        'Debug.Assert False
      End If
      If ColMasterCustomer = 0 Then
        'Debug.Assert False
        TempStg = TempStg & " " & ColCustomerName
        CountMasterColFoundCrnt = CountMasterColFoundCrnt - 1
        If CountMasterColFoundCrnt - 1 >= CountMasterColFoundTotal Then
          'Debug.Assert False
          TempStg = TempStg & " or"
        'Else
          Debug.Assert False
        End If
      'Else
        'Debug.Assert False
      End If
      If ColMasterBillTo = 0 Then
        'Debug.Assert False
        TempStg = TempStg & " " & ColBillToName
      'Else
        'Debug.Assert False
      End If
      TempStg = TempStg & " in row 1 of worksheet '" & _
                WShtMasterName & "' of workbook '" & WBkMasterName & "'."
      Call MsgBox(TempStg, vbOKOnly)
      WBkMaster.Close SaveChanges:=False
      WBkResult.Close SaveChanges:=False
      Set WBkMaster = Nothing
      Set WBkResult = Nothing
      Exit Sub
    End If
  End With

  ' If get here then both workbooks are as required.

  ' Find last row of results worksheet and next row of master worksheet
  ' Copy product column from results to master
  With WShtResult
    RowResultLast = .UsedRange.Row + .UsedRange.Rows.Count - 1
    Set RngResult = .Range(.Cells(2, ColResultProduct), _
                           .Cells(RowResultLast, ColResultProduct))
  End With
  With WShtMaster
    RowMasterNext = .UsedRange.Row + .UsedRange.Rows.Count
    RngResult.Copy Destination:=.Cells(RowMasterNext, ColMasterProduct)
  End With

  ' Copy customer column from results to master
  With WShtResult
    Set RngResult = .Range(.Cells(2, ColResultCustomer), _
                           .Cells(RowResultLast, ColResultCustomer))
  End With
  With WShtMaster
    RngResult.Copy Destination:=.Cells(RowMasterNext, ColMasterCustomer)
  End With

  ' Copy bill to column from results to master
  With WShtResult
    Set RngResult = .Range(.Cells(2, ColResultBillTo), _
                           .Cells(RowResultLast, ColResultBillTo))
  End With
  With WShtMaster
    RngResult.Copy Destination:=.Cells(RowMasterNext, ColMasterBillTo)
  End With

  WBkMaster.Close SaveChanges:=True
  WBkResult.Close SaveChanges:=False

End Sub 
```

# c++ - 将二维数组索引传递给函数？

> ID：15128785
> 
> 赞同：0
> 
> 时间：2013-02-28T06:18:39.353
> 
> 标签：c++, arrays, pointers, multidimensional-array

我有一个填充二维数组的循环，我想将这个填充创建的值传递给一个函数来进行其他计算。我是 C++ 的初学者，所以清晰的解释会很有帮助。这是我的代码：

```
for (int car = 1; car <= 27; car++) {

    int test[27][3] = {{car, mpg[car], speed[car]}};

    float speed = speed[car];

    timeGen(speed);

    cout << car << "\t" << mpg[car] << "\t" << speed[car] << endl;
} 
```

这是`timeGen`功能：

```
float timeGen(float x)
{
int distance = 50;
float speed = x;
float time = distance/x;
return time;
} 
```

似乎一切都会正常工作，但发生的情况是我收到一条错误消息，说“下标需要数组或指针类型”。我对他们的意思有点困惑。它是在告诉我创建一个指向该索引的指针，然后在`timeGen`函数中调用该指针吗？一个解释会很棒！

非常感谢。此外，值`mpg`, `speed`, 取自我的代码的另一部分，它工作正常。关于如何解决我现在遇到的问题的说明，会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:14:52.933

您需要定义**float car_speed**而不是***float speed***。它将解决您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:24:04.820

即使您有一个`speed`在定义之前命名的数组`float speed`，它也会在此定义之后立即超出范围。尝试这个：

```
float Cur_speed = speed[car];
timeGen(Cur_speed); 
```

或者

```
timeGen(speed[car]); // without the float speed 
```

另一件事是，在每次迭代中，您都在创建一个新的`test`. 看起来您真正想要的是拥有一个`test`数组：

```
int test[27][3];
for (int car = 0; car < 27; car++) {
 test[car][0] = car;
 test[car][1] = mpg[car];
 test[car][2] = speed[car]; 
```

确保这`mpg`是一个包含 27 个元素的数组，并且始终使用从 0 到 26 的索引。`speed`数组也是如此。当我们说 时`test[car][0]`，我们指的是 的第一个元素`test[car]`，由于您的定义，它总共有 3 个元素。本质上，这些行`test[car][X] = Y;`与您想要做的事情相同`test[27][3] = {{car, mpg[car], speed[car]}}`，但是该语法仅在您第一次声明数组时才有效。并且您编写它的方式使用相同的数据初始化所有 27 个元素。

# crystal-reports - 抑制交叉表水晶报表中的零行

> ID：15128786
> 
> 赞同：0
> 
> 时间：2013-02-28T06:18:39.773
> 
> 标签：crystal-reports, crystal-reports-2008, crosstab

我有交叉表看起来像这样

```
 Jan           Feb
Emp1      500           600
Emp2      600           700
Emp3       0             0 
```

我想隐藏 row3，因为它的值为零。我在交叉表表达式中看到了抑制空行，但这并没有达到目的。我想要这样的输出

```
 Jan           Feb
Emp1      500           600
Emp2      600           700 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:57:52.683

创建一个返回 NULL 的 SQL 表达式：

```
-- {@DB_NULL}
-- Oracle syntax
(
SELECT NULL FROM DUAL
)

-- {@DB_NULL}
-- MS SQL syntax
(
SELECT NULL
) 
```

创建一个公式字段以将 0 转换为 NULL：

```
-- {@data}
If {table.field}=0 Then
  {@DB_NULL}
Else
  {table.field} 
```

在您的交叉表中引用此字段，而不是`{table.field}`. 您可能必须重置“抑制空行”设置。

# asp.net - Asp.net MVC SEO 友好 URL

> ID：15128789
> 
> 赞同：12
> 
> 时间：2013-02-28T06:18:49.460
> 
> 标签：asp.net, asp.net-mvc-3, url-rewriting, asp.net-mvc-routing

我想为我的 ASP.NET MVC 网站实现一个 SEO 友好的 URL。

目前我有一个像这样的网址：

[http://www.domain.com/product?id=productid](http://www.domain.com/product?id=productid)

但现在我想重写我的网址，如：

[http://www.domain.com/productname](http://www.domain.com/productname)

所以请任何人都可以在上面帮助我......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T07:00:31.373

这是初学者的最佳文章-> [SEO Friendly URls](http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx)
该文章还解释了如何删除空格和破折号。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-28T07:25:41.950

请尝试以下解决方案。在`global.asax.cs`

```
routes.MapRoute(
    "Product",
    "{productName}",
    new { controller = "Product", action = "Index" },
    new { productName = UrlParameter.Optional  }
); 
```

但是您**需要在产品控制器的索引操作中保持唯一性**并`productName`获取记录（即在产品控制器中：

```
public ActionResult index(string productName)
{
     //do something regarding get product by productname
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-28T06:32:19.430

您可以通过这种方式将 Route 添加到您的 MVC 路由引擎 -

在`Global.asax.cs`

```
routes.MapRoute(
    "Product",
    "{controller}/{productId}/{productName}",
    new { controller = "Product", action = "Index" },
    new { productId = UrlParameter.Optional , productName = UrlParameter.Optional  }
); 
```

这将允许您拥有类似的 URL

```
www.domain.com/productid/productname 
```

您可能无法实现的原因

```
www.domain.com/productname 
```

是 productname 不是标识符，不能用于唯一地查找记录。您需要在 url 中添加一个标识符。

例如 - 在 SO 中查看此问题的 URL，它具有 ID，然后附加 SEO 友好测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:38:33.530

在 Global.asax 中创建一个新路由来处理这个问题：

```
 routes.MapRoute(
        "productId",                  // Route name
        "productId/{id}/{name}",      // URL with parameters
        new { controller = "Home", action = "productId", id = 1234, name = widget }  // Parameter defaults
    ); 
```

Asp.Net MVC 内置了路由，因此不需要 Url Rewriter。

更多细节[在这里](http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-03T06:43:42.983

复制以下代码并将其粘贴进去。{ routes.MapRoute }

```
routes.MapRuote
{

       name: "productname",
       routeTempalate: "services {controller}{aciton}{id}
       defaults: new (id = RouteParameter.Optionl;)

} 
```

但是对于您来说，`"routeTemplate"`用您的要求替换。对你来说，它看起来像这样：

```
routeTemplate: "services{controller}/{productname}" 
```

我希望这会帮助你。

# android - 单击时文本颜色不变

> ID：15128795
> 
> 赞同：1
> 
> 时间：2013-02-28T06:18:59.943
> 
> 标签：android, android-layout

我有一个列表视图，我正在使用选择器设置列表项的背景。

list_selecter.xml ：

```
 <?xml version="1.0" encoding="utf-8"?> 
```

```
<!-- focused and pressed -->
<item android:drawable="@color/darkred" android:state_pressed="true"/>
<item android:drawable="@android:color/transparent" android:state_pressed="false"/>
<!-- pressed -->
<item android:drawable="@color/darkred"/> 
```

列表项的布局是：

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:background="@drawable/list_selecter"
  android:orientation="vertical"
  android:padding="10dp" >

<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/newsHeadingText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="20dp"
    android:textColor="@color/text_selector" />

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="5dp"
    android:background="@drawable/aerow" />

<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/newsText"
    android:layout_width="200dip"
    android:layout_height="wrap_content"
    android:layout_below="@id/newsHeadingText"
    android:textColor="#736F6E" />

</RelativeLayout> 
```

文本颜色更改的 text_selector.xml ：

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

  <item android:state_selected="true" android:color="@android:color/white"/>
  <item android:state_focused="true" android:color="@android:color/white"/>
  <item android:state_pressed="true" android:color="@android:color/white"/>
  <item android:color="@android:color/black"/>

 </selector> 
```

选择的文本颜色没有改变。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:25:09.127

`android:duplicateParentState='true'`在您的指定`TextView`

# javascript - IE8 - 使用 javascript 回调函数的 jQuery 加载问题

> ID：15128798
> 
> 赞同：1
> 
> 时间：2013-02-28T06:19:14.217
> 
> 标签：javascript, jquery, callback

我正在使用 JavaScript 动态加载 jQuery。为了加载 jQuery，定义了回调函数，并在其回调函数中调用了一些 jQuery 的东西。

正如预期的那样在 Firefox、chrome 和 IE9 中运行良好，但在 IE8 中给出错误消息，如**“$ 未定义”**意味着 IE8 中的回调函数执行存在问题。我花了一整天的时间寻找解决方案，但没有任何办法。

```
<body>    
<script language="javascript" type="text/javascript">
    function loadjQuery(callback) {
        var ver = getInternetExplorerVersion();

        var body = document.getElementsByTagName('body')[0];
        var script = document.createElement('script');
        script.type = 'text/javascript';
        if (ver == 8.0) {
            script.onload = callback.call();
        }
        else {
            script.onload = callback;
        }
        script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js';
        body.appendChild(script);
    }
    loadjQuery(function () {
        alert($(window).height());       
    });

    function getInternetExplorerVersion() {
        var rv = -1;
        if (navigator.appName == 'Microsoft Internet Explorer') {
            var ua = navigator.userAgent;
            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null)
                rv = parseFloat(RegExp.$1);
        }
        return rv;
    }
    </script>
</body> 
```

我完全被困住了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:22:38.443

我曾经也编写过这个函数，下面的代码看起来很完美：

```
 // Attach handlers for all browsers
            script.onload = script.onreadystatechange = function() {

                if (!done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {
                    done = true;                        
                    // callback function provided as param
                    if(success != null)
                    {
                        success();
                    }
                    script.onload = script.onreadystatechange = null;
                    //head.removeChild(script);                     
                };              
            }; 
```

# javascript - 无法在 Firefox 画布中绘制斜体文本

> ID：15128803
> 
> 赞同：2
> 
> 时间：2013-02-28T06:19:26.073
> 
> 标签：javascript, firefox, canvas, italic

在画布中绘制斜体文本时，Firefox 会将它们呈现为正常的字体，如`Impact`.

```
var ctx = canvas.getContext('2d');
ctx.font = "italic 40px Impact";
ctx.fillText("Impact", 0, 40); 
```

[在 jsFiddle 上查看](http://jsfiddle.net/3TYKq/)

**火狐**

![](../Images/6b06d3d9b648ec5626dbbf32d6d9aed6.png)

**铬合金**

![](../Images/282337acc9e006e3a9f4eb132db696f9.png)

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:40:03.570

这是因为 Impact 没有斜体版本。当您在字体查看器（如 Mac Font Book）中查看它时，您可以看到这一点。浏览器在没有斜体的字体上伪造斜体，但 Firefox 还没有在画布中伪造它。如果您尝试使用带有斜体的字体，例如 Arial，它可以在画布中使用。

这里有一些讨论：[Italic doesn't work on all fonts in Firefox](https://groups.google.com/forum/?fromgroups=#!msg/fabricjs/eqGPHYBb7tQ/RAMN0R3sxFcJ)

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/UhDR7/)]]]

```
ctx.font = "italic 40px Arial"; 
```

![用宋体](../Images/9e7363ac1ef66da8c5783233a106fd50.png)

# php - 将旧 wordpress.com 网站统计信息移至自托管博客

> ID：15128804
> 
> 赞同：0
> 
> 时间：2013-02-28T06:19:25.980
> 
> 标签：php, wordpress, blogs, jetpack

我最近将我的旧 wordpress.com 博客移动到使用我自己的域名的自托管博客中。到目前为止，我已经完成了这些事情。

1.  转移我的旧文章和帖子。
2.  安装并激活 Jetpack 插件。
3.  在 wordpress 支持团队的帮助下转移了我的旧博客关注者。

现在我想将我的旧博客站点统计信息转移到新站点中。有可能这样做吗？至少有解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:49:46.843

根据我的研究，尽管不是太深入，但绝大多数结果似乎都表明这是不可能的。

请参阅 ->[此处](http://wordpress.org/support/topic/how-to-transfer-stats-between-blogs)<- 了解更多信息。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:39:20.907

就个人而言，我不使用 Jetpack 进行统计，但深入研究 jetpack 似乎统计数据是根据域名传输的。

参考：

[http://en.forums.wordpress.com/topic/moving-jetpacked-wporg-installation-to-another-site](http://en.forums.wordpress.com/topic/moving-jetpacked-wporg-installation-to-another-site)

因此，从技术上讲，只要您拥有相同的 mysite.com 地址，它就应该保留统计信息。

至于将 wordpress 转移到您自己的服务器上，我已经这样做了几次，似乎对我来说最有效的是这个过程。

从旧服务器：

```
Export MySQL database

Copy the whole file directory 
```

从新服务器：

```
Install a copy of Wordpress on your server (just to create the DB and file structure)

Empty the newly created MySQL DB and import the database from the Old Server.

Copy/Replace all files from the old server to the new one except for wp-config.php (since it has new credentials)

Lastly I go into wp-admin -> Settings and save the permalinks to have it resetup the .htaccess 
```

希望这可以帮助。

# java - 如何使用 ANT 仅编译更改的源文件

> ID：15128824
> 
> 赞同：7
> 
> 时间：2013-02-28T06:20:49.380
> 
> 标签：java, performance, ant, compilation

我正在尝试编写用于编译源文件夹的 ant build，这是我的编译脚本**目标**。

```
 <target name="compile" depends="init">
        <javac srcdir="${src.dir}" destdir="${classes.dir}" debug="true">
            <classpath refid="master-classpath"/>
        </javac>

    </target> 
```

在我的项目中，我有近 1000 个`.java`文件。当单个`.java`文件在目标之上更改时，往往会编译所有`.java`文件。这使得开发非常缓慢。我只想知道是否有任何方法或代码可以更改任务的行为以仅编译修改或更改的`.java`文件而不是所有`.java`文件。

请帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T06:52:25.720

据我了解，仅编译修改后的 java 文件是 ant javac 任务的默认行为。Ant 使用 .java 文件的时间戳及其对应的 .class 文件来确定是否需要重新编译 Java 文件。我在很多项目中都使用过它，从来没有遇到过问题。

您可以检查以下几点

1.  您的源代码树目录结构是否与您的 Java 包结构匹配？请参阅[为什么 ant 总是重新编译我所有的 Java 文件？](http://ant.apache.org/faq.html#always-recompiles). 这可能是第 1 个原因，因为它在常见问题解答中。

2.  我看到你的`compile`目标取决于`init`目标？`init`目标是做什么的？它是否取决于任何`clean`目标或是否清理 .class 文件？

3.  你的蚂蚁版本是什么？你可以尝试不同的ant版本，看看你是否仍然有同样的问题？

4.  如果以上都没有解决你的问题，编译后，你可以手动检查.class文件的时间戳，并与对应的.java文件的时间戳进行比较吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-03T12:01:21.470

因此，如果您不删除任何依赖任务中的类目录，请说“清理”，javac 任务本质上只编译更改的 java 文件。这是 javac 任务提供的开箱即用功能。希望能帮助到你。

# excel - 未指定长度的差异数组的间接平均值

> ID：15128826
> 
> 赞同：0
> 
> 时间：2013-02-28T06:20:51.763
> 
> 标签：excel, excel-2007

我有以下间接参考：

```
=AVERAGE(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3)) 
```

在'Pages'！D3 我有另一个页面'1D_3'，在'Pages'！J3 我有 2:2。

我需要更改上面的代码以找到每个连续值之间差异的平均值。我只能更改 'Pages'!J3 (2:2) 中的值，并且可以更改上面的等式。

从这个参考[http://www.excelforum.com/excel-general/742194-difference-between-consecutive-number.html](http://www.excelforum.com/excel-general/742194-difference-between-consecutive-number.html)我已经想出了如何在每个连续之间做差异，但前提是我有一个已知的范围。前任。对于元素 A1:G1，

```
=SUM(A1:F1-B1:G1) 
```

然后我可以对平均值执行以下操作：

```
=SUM(A1:F1-B1:G1)/(COUNT(1:1)-1) 
```

但是如果我有一个未指定的范围，我不知道如何做 SUM 部分。我也不确定如何在 INDIRECT 函数中实现这一点。

只是一些额外的背景信息可以澄清这一点，数组中的值是秒表的时间。假设每个值都是时间差，但它只是秒表上的时间（例如 0.0015、1.0034、2.356 等）。我想找到每个值之间的平均持续时间。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:29:37.463

在解决您寻求的公式之前，让我指出您所需要的只是`(EndValue-StartValue)/NumberOfEntries`- 无需首先计算每个时间点的差异，因为无论如何这将在最终计算中自行抵消。

现在假设`Pages!J3`仍然只包含行号，即公式`=INDIRECT("'" & Pages!D5 & "'!" & Pages!J3)`将返回对该行的引用。在以下公式中，我将`X`其用作 INDIRECT 公式的替代品，以使其更具可读性：

```
=(OFFSET(X,0,0,1,1)-OFFSET(X,0,COUNT(X),1,1))/COUNT(X)

```

现在你只需要用`X`上面的公式替换 - 或者简单地用公式添加一个命名范围。如果你把它结合起来，你最终会得到这个公式：

```
=(OFFSET(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3),0,0,1,1)-OFFSET(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3),0,COUNT(X),1,1))/COUNT(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3))

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:51:02.330

我尝试了另一张海报的建议，但即使更换了剩余的“X”，它也不起作用。我在 Excel 中研究了其他一些示例，最终得出以下结论。为了不让这迷失在互联网的沙滩上，我决定发布我自己的解决方案。所以我想要时间值之间差异的平均值。本质上，我想要总次数（平均值）的总和。困难在于间接引用和间接引用中的间接引用。

所以我所拥有的是另一个工作表上的多个工作表、页面（B 到 E 列上的页面）和范围（J 列上的页面）上的数据，以及另一个工作表上的结果操作。

```
=SUM(INDIRECT("'"&Pages!D5&"'!C2"):INDIRECT("'"&Pages!D5&"'!"&SUBSTITUTE(ADDRESS(2,COUNTA(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3)),4),"1",""))-INDIRECT("'"&Pages!D5&"'!B2"):INDIRECT("'"&Pages!D5&"'!"&SUBSTITUTE(ADDRESS(2,COUNTA(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3))-1,4),"1","")))/(COUNT(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3))-1) 
```

要将其分解为多个部分，我们有：

```
=SUM(junk)/COUNT(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3))-1 
```

而“垃圾”部分如下。最终，它的形式是：

```
=SUM(A1:F1-B1:G1) 
```

如果没有 INDIRECT，如果我们有一页名为“8D_2FU”的数据：

```
=SUM('8D_2FU'!C2:AW2-'8D_2FU'!B2:AV2)/(COUNT('8D_2FU'!2:2)-1) 
```

请注意，对于此实现，我们在 AW 上选择了一个最大值列，该列适用于所有可能的数据集。

对“垃圾”还有另一部分的兴趣。您不能在 INDIRECT 引用中进行 INDIRECT 引用，因此为了欺骗 Excel，我们可以使用 SUBSTITUTE 命令并通过转换 INDIRECT 引用中包含的地址来获得相同的结果。

```
SUBSTITUTE(ADDRESS(2,COUNTA(INDIRECT("'" & Pages!D5 & "'!" & Pages!J3)),4),"1","")) 
```

最后，要使用它，您必须通过键入 CTRL+SHIFT+Enter 而不是键入“Enter”来使其成为数组操作。使用蛮力测试用例也确认了结果。

# jquery - 下拉菜单选项可将“必需”类添加到另一个下拉菜单，但在选中时删除其他选项的类

> ID：15128830
> 
> 赞同：0
> 
> 时间：2013-02-28T06:21:17.337
> 
> 标签：jquery, forms, class, select, required

我需要某些字段是“必需的”，所以使用了 jquery.validate.js 和 class="required" 等。

唯一的问题是，当在下拉输入中选择某个选项时，我通过使用以下方法使隐藏的 div 变得可见，从而使表单扩展：Display：None，然后 Display：Block。

扩展 div 中的字段之一需要是必填字段，但如果我将其设置为 class="required"。即使该字段被隐藏且不需要，验证仍将需要该字段的值。

**因此，我需要做的是添加或删除 class="required" 或在更改始终显示在表单中的观察选择输入时切换。**

以下是我尝试对其进行编码的方式，但它似乎不起作用 非常感谢任何可以提供帮助的人，我希望我的解释是有道理的。

第一个位通过在选择下拉选项时显示隐藏的 div 来扩展表单。

```
 <script type="text/javascript"> 
    // <![CDATA[ 
    function display(obj,id1,id2,id3) { 
    txt = obj.options[obj.selectedIndex].value; 
    document.getElementById(id1).style.display = 'none'; 
    document.getElementById(id2).style.display = 'none'; 
    document.getElementById(id3).style.display = 'none'; 
    if ( txt.match(id1) ) { 
    document.getElementById(id1).style.display = 'block'; 
    } 
    if ( txt.match(id2) ) { 
    document.getElementById(id2).style.display = 'block'; 
    } 
    if ( txt.match(id3) ) { 
    document.getElementById(id3).style.display = 'block'; 
    }  
    } 
    // ]]> 
    </script> 

    // This is how I have tried to add & remove the required class.

    <script type="text/javascript">

    $('#category').change(function(){
        if ( $('#category').val() =='id1' ) {
        $('#size').addClass('required');
    } else {
        $('#size').removeClass('required');
    }
    }

    </script>

    <html>

    <form class="orderform" action="FormNext.php" method="post" name="OrderForm" id="OrderForm">

    <select id="category" name="category" class="required" onchange="display(this,'id1','id2','id3');">
                                      <option value="">- please select -</option>
                                      <option value="id1">Category1</option>
                                      <option value="id2">Category2</option>
                                      <option value="id3">Category3</option>
    </select>

<div id="id1">

    <select name="size" id="size" class="">
      <option value="">Please Select</option>
      <option value="xsmall">extra small </option>
      <option value="small">small </option>
      <option value="medium">medium</option>
      <option value="large">large </option>
      <option value="xlarge">extra large</option>
    </select>

</div>
    </form>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:29:11.383

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
 <script>  
    function display(obj,id1,id2,id3) { 
        txt = obj.options[obj.selectedIndex].value; 
        document.getElementById(id1).style.display = 'none'; 
        document.getElementById(id2).style.display = 'none'; 
        document.getElementById(id3).style.display = 'none'; 
        if ( txt.match(id1) ) {
            document.getElementById(id1).style.display = 'block'; 
        } 
        if ( txt.match(id2) ) { 
            document.getElementById(id2).style.display = 'block'; 
        } 
        if ( txt.match(id3) ) { 
            document.getElementById(id3).style.display = 'block'; 
        }  
    }

    $(document).ready(function(){
        $('#category').change(function(){
            var selectedValue = $('#category').val();
            $('#size').removeClass('required');
            $('#' + selectedValue + ' > select').addClass('required');
        });
    });
    </script>
</head>
<body>

<form class="orderform" action="FormNext.php" method="post" name="OrderForm" id="OrderForm">

<select id="category" name="category" class="required" onchange="display(this,'id1','id2','id3');">
    <option value="">- please select -</option>
    <option value="id1">Category1</option>
    <option value="id2">Category2</option>
    <option value="id3">Category3</option>
</select>

<div id="id1" style="display:none">

    <select name="size" id="size" class="">
        <option value="">Please Select</option>
        <option value="xsmall">extra small </option>
        <option value="small">small </option>
        <option value="medium">medium</option>
        <option value="large">large </option>
        <option value="xlarge">extra large</option>
    </select>

</div>
<div id="id2" style="display:none">

    <select name="size" id="size" class="">
        <option value="">Please Select</option>
        <option value="xsmall">extra small </option>
        <option value="small">small </option>
        <option value="medium">medium</option>
        <option value="large">large </option>
        <option value="xlarge">extra large</option>
    </select>

</div>
<div id="id3" style="display:none">

    <select name="size" id="size" class="">
        <option value="">Please Select</option>
        <option value="xsmall">extra small </option>
        <option value="small">small </option>
        <option value="medium">medium</option>
        <option value="large">large </option>
        <option value="xlarge">extra large</option>
    </select>

</div>
</form> 
```

我假设您错过了 # 的大小和类别。试着让我知道

# 用于通过 id 和 进行选择。用于按类名选择标签，如果要选择元素，则直接提及。

```
Like this
$('#id').doStuff();
$('.className').doStuff();
$(div).doStuff();
$('[name="ElementNameHere"]').doStuff(); 
```

# jquery - 鼠标悬停无法正常工作

> ID：15128834
> 
> 赞同：0
> 
> 时间：2013-02-28T06:21:43.810
> 
> 标签：jquery, html, css

我正在创建一个简单的菜单，它会在单击菜单时显示菜单项，并在从 menuitem 鼠标移出时隐藏。

[http://jsfiddle.net/MMHVv/3/](http://jsfiddle.net/MMHVv/3/)

在 Firefox 中这不起作用，`menuItem`鼠标悬停时隐藏

在 chrome 中它可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:47:08.177

您通常应该避免使用内联 javascript，请参阅： [http ://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/](http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/)

您应该改用 mouseover 和 mouseout 函数：http: [//api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

```
$(function() {
   $('#menu').mouseover(function() {
       $('#TestMenu').show();
   }).mouseout(function(){
    $('#TestMenu').hide();
   });; 
```

});

[http://jsfiddle.net/MMHVv/16/](http://jsfiddle.net/MMHVv/16/)

TestMenu 也应该放在第一个 div 内，因此当您将鼠标悬停在 TestMenu 上时，鼠标悬停也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:41:30.910

我看过你的代码..

我不知道`mousemove`Firefox 中的事件出了什么问题

如果你`mousemove`用它代替`mouseover`它工作正常..

```
onmouseover="return ShowMenu($(this));" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:05:18.907

仅使用您的结构尝试此操作，但要进行一次编辑 [ *`removed the id for the menuitems`*]：

```
$(function () {
  $('.menu').on({
    mouseover: function () {
        $('.menuItem').slideUp();
        $(this).next().slideDown();
    }
  });
  $('.menuItem').on({
    mouseleave: function () {
        $(this).slideUp();
    }
  });
}); 
```

**看看[小提琴](http://jsfiddle.net/MMHVv/19/)**

# javascript - PhoneGap.exec 到 Cordova.exec

> ID：15128835
> 
> 赞同：0
> 
> 时间：2013-02-28T06:21:49.223
> 
> 标签：javascript, ios, cordova

我在我的 Cordova 项目中使用了一个插件，它安装正确，但不起作用。在查看 JS 文件时，我发现了这两行

```
PhoneGap.exec("SMSComposer.showSMSComposer",args);
PhoneGap.addConstructor(function() { 
```

显然问题在于PhoneGap.exec 函数不再存在，现在是Cordova.exec。我怎样才能得到这个工作？该插件不是那么旧，只有几个月，所以它应该可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:02:22.853

你能给你正在使用的cordova版本吗？如果你使用的是新的phonegap版本，请使用该版本的插件。如果它是您的自定义插件，请遵循此 [插件开发指南](http://docs.phonegap.com/en/2.4.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)。或查看此[升级指南](http://docs.phonegap.com/en/2.0.0/guide_upgrading_index.md.html#Upgrading%20Guides)。

*   cordova.exec(function(winParam) {}, function(error) {}, "service", "action", ["firstArgument", "secondArgument", 42, false]); 参数解释更详细：

function(winParam) {} - 成功函数回调。假设您的 exec 调用成功完成，将调用此函数（可选地使用您传回给它的任何参数） function(error) {} - 错误函数回调。如果操作没有成功完成，这个函数将被调用（可选地带有一个错误参数） “service” - 在本机端调用的服务名称。这将映射到本机类。在“action”下方的本机指南中对此进行了更多介绍 - 要调用的操作名称。这由接收 exec 调用的本机类拾取，并且根据平台，本质上映射到类的方法。有关更多详细信息，请查看位于本文末尾的本地指南。[/* arguments */] - 传入本地环境的参数

链接到最新的短信作曲家插件：IOS [Link](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/SMSComposer)，Android：[链接](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMSPluginForCordovaVersion3.2)

我想它可以帮助你

# php - 将我的单页网站转换为 html5

> ID：15128841
> 
> 赞同：0
> 
> 时间：2013-02-28T06:22:29.007
> 
> 标签：php, html, xhtml

目前我有一个大约 2 年前为某人创建的单页网站 (html/php)。我即将添加一个管理面板并计划从 html5 开始。我很好奇除了`<!doctype>`将`html`.

这是我的单页`index.php`：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="descriptions" content="meta desc">
    <meta name="keywords" content="meta, keywords">

    <!--imports the main css file-->
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
    <script type="text/javascript" src="js/jquery.form.js"></script>
</head>
<body></body>
</html> 
```

我首先知道我会将我的文档类型更改为，`<!doctype html>`但我是否还必须删除我的`link`和`script`标签的额外属性？即`type`财产？

目前这是一个简单的单页网站，所以我认为这将是一个很好的起点。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:24:24.663

应该是这样的。这样做，然后将 URL 放入[http://validator.w3.org/](http://validator.w3.org/)以查看您有哪些 html 5 错误。

此外，由于它不是 XML，我认为您需要从元标记和链接标记的末尾删除正斜杠。请参阅下面关于类型属性的无用代码评论。

验证器会告诉您每个问题，直到您的 html 5 有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:13:19.463

HTML 5 代码如下所示：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="meta desc">
    <meta name="keywords" content="meta, keywords">

    <title>Title</title>

    <!--imports the main css file-->
    <link rel="stylesheet" href="css/style.css" media="screen">
    <script src="js/jquery.form.js"></script>
</head>
<body></body>
</html> 
```

一些解释：

*   不再需要 xmlns。HTML5 中的元素不需要显式声明。
*   我会在标题之前使用字符集元。否则，IE 用户可能会在 XSS 攻击面前暴露无遗。（[https://code.google.com/p/doctype-mirror/wiki/ArticleUtf7](https://code.google.com/p/doctype-mirror/wiki/ArticleUtf7)）
*   在第二个元上，名称属性应该是描述，而不是描述。
*   不需要在 html 中进行转发（在元数据的末尾，链接）。这些在 xhtml 中是强制性的。
*   引用链接和脚本时，可以选择不提及 type 属性。它被认为是多余的，因为默认值会起作用（对于链接，您可能会使用 css，对于脚本 js）

如果您想了解有关 HTML 5 的更多信息 - 这里有一些很好的起点（与实际标准相比，您可以阅读和享受的内容）：

*   [http://diveintohtml5.info/](http://diveintohtml5.info/) - Mark Pilgrim 的免费电子书

# jsf - 显示 2 个具有关系的不同实体表的数据表

> ID：15128844
> 
> 赞同：1
> 
> 时间：2013-02-28T06:22:44.153
> 
> 标签：jsf

我的数据表

```
<h:form>
    <h:panelGroup>
        <h:dataTable columnClasses="input-radio,input-label" id="account-table" value="#{accountController.items}" var="item" border="0">
            <h:column>
                <h:outputText value="#{item.id}"/>
            </h:column>
            <h:column>
                <h:outputText value="#{item.name}"/>
            </h:column> 
        </h:dataTable>
    </h:panelGroup>
</h:form> 
```

我有一个与用户实体相关的帐户实体。有没有办法从帐户中检索用户数据，而不是为帐户和用户制作 2 个数据表？

getItems 方法

```
public DataModel getItems() {
    if (items == null) {
        items = getPagination().createPageDataModel();
    }
    return items;

} 
```

使用 JSF 2 并且使用 CRUD 自动生成管理 bean

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:35:24.873

如果`DataModel`该类可以访问`user`实体，则可以通过链接对象来遍历 JSF 页面中的关系：

*   `#{item.name}`- 访问项目名称
*   `#{item.user.name}`- 如果用户在 item 中有 getter，则访问用户名

例如你的`DataModel`：

```
public class DataModel {

    private Long id;
    private String name;
    private User user;
    ...
} 
```

JSF 页面：

```
<h:form>
    <h:panelGroup>
        <h:dataTable columnClasses="input-radio,input-label" id="account-table" value="#{accountController.items}" var="item" border="0">
            <h:column>
                <h:outputText value="#{item.id}"/>
            </h:column>
            <h:column>
                <h:outputText value="#{item.user.name}"/> <!-- traverse to user entity here -->
            </h:column> 
        </h:dataTable>
    </h:panelGroup>
</h:form> 
```

# node.js - 在 express 中使用 URL 中的多个参数

> ID：15128849
> 
> 赞同：89
> 
> 时间：2013-02-28T06:22:51.567
> 
> 标签：node.js, express

我将 Express 与 Node 一起使用，并且我有一个要求，用户可以将 URL 请求为：`http://myhost/fruit/apple/red`.

这样的请求将返回 JSON 响应。

上述调用之前的 JSON 数据如下所示：

```
{
    "fruit": {
        "apple": "foo"
    }
} 
```

对于上述请求，响应 JSON 数据应为：

```
{
    "apple": "foo",
    "color": "red"
} 
```

我已将 express 配置为路由如下：

```
app.get('/fruit/:fruitName/:fruitColor', function(request, response) {
    /*return the response JSON data as above using request.params.fruitName and 
request.params.fruitColor to fetch the fruit apple and update its color to red*/
    }); 
```

但这不起作用。我不确定如何传递多个参数，也就是说，我不确定`/fruit/:fruitName/:fruitColor`这样做是否正确。是吗？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-02-28T06:37:37.253

```
app.get('/fruit/:fruitName/:fruitColor', function(req, res) {
    var data = {
        "fruit": {
            "apple": req.params.fruitName,
            "color": req.params.fruitColor
        }
    }; 

    send.json(data);
}); 
```

如果这不起作用，请尝试使用 console.log(req.params) 看看它给了你什么。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-09-14T03:23:28.073

对于你想要的，我会用

```
 app.get('/fruit/:fruitName&:fruitColor', function(request, response) {
       const name = request.params.fruitName 
       const color = request.params.fruitColor 
    }); 
```

或者更好

```
 app.get('/fruit/:fruit', function(request, response) {
       const fruit = request.params.fruit
       console.log(fruit)
    }); 
```

水果是一个对象。因此，在客户端应用程序中，您只需调用

```
https://mydomain.dm/fruit/{"name":"My fruit name", "color":"The color of the fruit"} 
```

作为回应，您应该看到：

```
 //  client side response
    // { name: My fruit name, color:The color of the fruit} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-21T11:07:50.937

两种方式都是正确的，您可以使用其中任何一种方式

```
app.get('/fruit/:one/:two', function(req, res) {
    console.log(req.params.one, req.params.two)
}); 
```

使用 & 符号的另一种方式

```
app.get('/fruit/:one&:two', function(req, res) {
    console.log(req.params.one, req.params.two)
}); 
```

# php - 如何从 PHP 中的 URL 请求参数值？

> ID：15128850
> 
> 赞同：0
> 
> 时间：2013-02-28T06:22:54.813
> 
> 标签：php

```
http://localhost/mysite/#id=98b7ee047f0a4fd6530d2538f7f929cc&com=289916 
```

我需要获取“id”和“com”的值。我必须将'#'符号放在前面的参数中，因为我需要页面而不刷新自身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:25:17.720

尝试这个 ：

```
$url = 'http://localhost/mysite/#id=98b7ee047f0a4fd6530d2538f7f929cc&com=289916';

echo "<pre>";
print_r(parse_url($url)); 
```

输出 ：

```
Array
(
    [scheme] => http
    [host] => localhost
    [path] => /mysite/
    [fragment] => id=98b7ee047f0a4fd6530d2538f7f929cc&com=289916
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T06:37:29.367

要获取您可以使用的网址

```
$url = $_SERVER['REQUEST_URI']; 
```

那么您可以应用 Prasanth Bendra 引用的上述方法。

> 回声“”；print_r(parse_url($url));

# java - Java如何计算日/月/年的年龄？

> ID：15128851
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:22:55.430
> 
> 标签：java, date, calendar

如何计算`17/08/1992`和`18/06/2013`( `day/month/year`)之间的年龄

我想要结果日月年

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:59:46.617

这似乎工作

```
 GregorianCalendar d1 = new GregorianCalendar(1992, 8 - 1, 17);
    GregorianCalendar d2 = new GregorianCalendar(2013, 6 - 1, 18);

    d2.add(Calendar.YEAR, -d1.get(Calendar.YEAR));
    d2.add(Calendar.MONTH, -d1.get(Calendar.MONTH));
    d2.add(Calendar.DAY_OF_MONTH, -d1.get(Calendar.DAY_OF_MONTH) + 1);

    int y = d2.get(Calendar.YEAR);
    int m = d2.get(Calendar.MONTH);
    int d = d2.get(Calendar.DAY_OF_MONTH) - 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:27:09.877

虽然我不应该回答这个问题，但在看到您对@Harry Joy 评论的回复后，我已经回答了这个问题：P

```
Date date1 = new SimpleDateFormat("dd/MM/yyyy").parse(dateOfBirth);
Date date2 = new SimpleDateFormat("dd/MM/yyyy").parse(currentDate);
cal1.setTime(date1);
cal2.setTime(date2);
if(cal2.get(Calendar.DAY_OF_YEAR) < cal1.get(Calendar.DAY_OF_YEAR)) {
      factor = -1; 
}
age = cal2.get(Calendar.YEAR) - cal1.get(Calendar.YEAR) + factor;
System.out.println("Your age is: "+age); 
```

# php - 倒计时在 IE 中无法正常工作

> ID：15128853
> 
> 赞同：0
> 
> 时间：2013-02-28T06:23:04.200
> 
> 标签：php, javascript

我在我的项目中为交易页面运行倒计时，它在 chrome 和 Firefox 中运行良好，但在 IE 中，它在我的代码的每个框中给出 NAN，就像在 c 中的值一样；我的项目的链接是 [http://blog.merimobiles.com/deals/customer.php](http://blog.merimobiles.com/deals/customer.php) var c = '02 28 2013, 23:59:59';

```
var count=0;
$(document).ready(function ()
{
var c = <?php echo $date ;?>; 
$('#superoffer'+count).epiclock({mode: $.epiclock.modes.countdown, time: new Date(c)});
count++;
}); 
```

![在此处输入图像描述](../Images/4197f43fad546a7a38ee34f8ceec34ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:26:50.370

你可以阅读这个问题，它可以让你解决你的问题。请检查接受的答案。

[Date 构造函数在 IE 中返回 NaN，但在 Firefox 和 Chrome 中有效](https://stackoverflow.com/questions/2182246/javascript-dates-in-ie-nan-firefox-chrome-ok)

> JavaScript 中的 Date 构造函数需要 parse() 方法支持的日期格式之一的字符串。

# html - 使跨度表现得像一个按钮

> ID：15128855
> 
> 赞同：5
> 
> 时间：2013-02-28T06:23:11.920
> 
> 标签：html, css

我有以下html

```
<div class="btns">

<div id="green">    <span class="btn btn-block btn-large btn-success disabled green_btn">Green</span>

 <div class="num">(1)</div>
</div>
<div id="red">
    <form class="button_to" >
        <div>
            <input class="btn btn-block btn-large btn-danger red_btn"
            type="submit" value="Red">
        </div>
    </form>
    <div class="num">(0)</div>
</div>
</div> 
```

和CSS

```
.btns {
    position: relative;
}

.num {
    position: absolute;
    bottom: 0;
    width: 100%;
    text-align: center;
}

#green, #red {
    display: inline-block;
    width: 49%;
    position: relative;
}

.green_btn, .red_btn {
    margin-bottom: 4px;
} 
```

我无法弄清楚为什么绿色跨度下的 (1) 不像红色按钮下的 (0) 那样表现。如果我删除`bottom:0;`它会修复绿色但会弄乱红色。

这是一个 jsfiddle 来说明问题[http://jsfiddle.net/HajHV/](http://jsfiddle.net/HajHV/)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:28:06.337

试试这个

```
.btn
{
    background-color: rgb(7, 55, 99);
    color: white;
    border: none;
    cursor: pointer;
    padding: 2px 12px 3px 12px;
    text-decoration: none;

} 
```

HTML

```
<span class="btn">Submit</span> 
```

删除输出后输出是 ![在此处输入图像描述](../Images/10826e0f4516f37b50fa9f3473931121.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T06:29:31.860

`<form>`Twitter Bootstrap（您正在使用）为元素添加了一些底部边距。

试试这个来标准化两个按钮：

```
.button_to { margin-bottom:0; } /* Target the <form> in the red button */ 
```

演示：http: [//jsfiddle.net/HajHV/3/](http://jsfiddle.net/HajHV/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T06:30:10.173

这是因为表格的边距。

```
margin: 0 0 20px; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T06:27:01.200

```
 <div class="num" style="height:5px;">(1)</div> 
```

在你的使用它`<div>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:34:49.640

基本上这是表格的边距问题。我删除了你的 CSS 并简单地添加了这个：

```
form { margin: 0; }
#green, #red {
    width: 48%;
    float:left;
    position: relative;
}
.num { margin: 0 auto; width: 10px; } 
```

[固定的](http://jsfiddle.net/HajHV/4/)

# python - SQLAlchemy 和遍历：如何为从数据库检索的对象添加遍历所需的属性？

> ID：15128857
> 
> 赞同：1
> 
> 时间：2013-02-28T06:23:30.843
> 
> 标签：python, sqlalchemy, pyramid, traversal

我有一个这样的资源树结构：

```
Root
|
|
\-- Article
|     |
|     \-- 1
|     \-- 2
|
\-- User
      |
      \-- 1
      \-- 2 
```

当用户访问“/Article”时，我将显示所有文章的列表：

```
@view_config(context='resource.ArticleDispatcher', renderer='nothing-related')
def article_list(context, resource):
    articles = request.db.query(Article)
    return {'articles': articles} 
```

但是在模板中，我发现我无法调用“req.resource_url(ARTICLE_OBJECT)”，因为我从数据库中检索到的对象“文章”既没有**名称**也没有**父**集。

现在我不知道如何在这种情况下生成 URL ... :-( 我的设计不正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T21:19:00.703

为了让您的 Article 对象自动正确插入到遍历树中，最直接的方法是通过 parent 的`__getitem__`方法访问它们，如果您正在访问单个文章，这将工作得很好：`/Articles/123`

当您显示列表时，您并没有真正遍历到单个文章，您希望在 处显示文章列表只是一个巧合`/Articles`，因此这种情况不直接被遍历覆盖（这是关于*遍历 URI*） . 有一些快速修复可以使它看起来像遍历：

```
@view_config(context='resource.ArticleDispatcher')
def article_list(context, request):
    all_articles_ids = context.magically_get_ids_of_all_articles()
    articles = [context[id] for id in all_articles_ids]
    return {'articles': articles} 
```

在这里，您以某种方式知道您需要的所有文章的所有 id，并且只需通过遍历将子代插入到遍历上下文中。在许多情况下（尤其是使用 SQL 后端），这不会很有效，因为您需要为每个对象发出单独的查询。

二、更现实的例子：手动将文章插入到遍历上下文中：

```
@view_config(context='resource.ArticleDispatcher')
def article_list(context, request):
    articles = context.adopt_children(request.db.query(Article))
    return {'articles': articles}

class ArticleDispatcher(object):
    def adopt_children(self, children):
        for child in children:
            child.__name__ = child.id # actually I'd made __name__ a property of the Article model
            child.__parent__ = self
        return children 
```

第三个例子：不要假装你正在浏览文章，只需做类似的事情

```
req.resource_url(ARTICLE_DISPATCHER) + '/' + article.id 
```

在这种情况下，您甚至可能不需要查询完整的 Article 对象，您可能只需要查询 name 和 id（在某些情况下可能会更快）：

```
@view_config(context='resource.ArticleDispatcher')
def article_list(context, resource):
    name_id_tuples = request.db.query(Article.id, Article.name).all()
    return {'articles': name_id_tuples} 
```

# regex - 正则表达式在 Perl 中查找包含至少两个大写字母的字符串

> ID：15128860
> 
> 赞同：0
> 
> 时间：2013-02-28T06:23:36.570
> 
> 标签：regex, string, perl

我正在寻找一个匹配特定字符串的正则表达式，该字符串在 Perl 中至少有两个大写字母。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T06:46:57.057

为什么只使用 ASCII 字母？

这将匹配使用[Unicode 字符属性](http://www.regular-expressions.info/unicode.html#prop)的任何语言中的两个大写字母。

```
/\p{Lu}.*\p{Lu}/ 
```

`\p{Lu}`是一个[Unicode 字符属性](http://www.regular-expressions.info/unicode.html#prop)，匹配具有小写变体的大写字母

另请参阅[perlretut：有关字符、字符串和字符类的更多信息](http://perldoc.perl.org/perlretut.html#More-on-characters,-strings,-and-character-classes)

一个小测试：

```
my @input = ("foobar", "Foobar", "FooBar", "FÖobar", "fÖobÁr");

foreach my $item (@input) {
    if ($item =~ /\p{Lu}.*\p{Lu}/) {
        print $item . " has at least 2 uppercase!\n"
    } else {
        print $item . " has less than 2 uppercase!\n"
    }
} 
```

输出：

> foob​​ar 的大写字母少于 2 个！
> Foobar 的大写字母少于 2 个！
> FooBar 至少有 2 个大写字母！
> FÖobar 至少有 2 个大写字母！
> fÖobÁr 至少有 2 个大写字母！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:28:24.410

尝试使用这个：

`/^.*[A-Z].*[A-Z].*$/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:36:54.827

我不知道你需要什么：

```
perl -lane 'for(@F){if(/[A-Z]/){$count++ for m/[A-Z]/g}if($count >=2){print $_};$count=0}' 
```

下面测试

```
> echo "ABC DEf Ghi" | perl -lane 'for(@F){if(/[A-Z]/){$count++ for m/[A-Z]/g}if($count >=2){print $_};$count=0}'
ABC
DEf 
```

# c# - 如何初始化这个字典

> ID：15128861
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:23:39.533
> 
> 标签：c#

我想初始化一个`string,datetime`字典，我想要每个字符串的“实时”时间值。稍后我想将字符串作为键插入下拉列表，将日期时间作为值插入。

```
1 hour (string)- datetime(1 hour value)  
5 hour (string)- datetime(5 hour value)  
2 days (string)- datetime(2 days value)  
3 weeks (string)-datetime(3 weeks value) 
```

我如何制作这种字典？

```
public Dictionary<string,DateTime> TimeStep()
    {
        Dictionary<string,DateTime> timestep = 
        { "1  Hour", "2  Hours", "5  Hours", "10 Hours", "15 Hours", "24 Hours", "Two Days", "Five Days", "Ten Days", "Two Weeks", "Month" };
        return timestep ;        
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T06:27:01.653

```
var dic = new Dictionary<string, TimeSpan>()
          {
                {"1  Hour", TimeSpan.FromHours(1)},
                {"Two days", TimeSpan.FromDays(2)}
          }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:25:55.810

而不是`DateTime`你应该使用[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

```
Dictionary<string, TimeSpan> dictionary = new Dictionary<string, TimeSpan>();
dictionary.Add("1 hour", new TimeSpan(1, 0, 0)); //1 hour
dictionary.Add("2 days", new TimeSpan(2, 0, 0, 0));//2 days 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:32:56.667

试试这个：

```
Dictionary<string, TimeSpan> testDictionary = new Dictionary<string, TimeSpan>() 
{ 
    {"1 hour", TimeSpan.FromHours(1) },
    {"2 hour", TimeSpan.FromHours(2) },
    {"3 hour", TimeSpan.FromHours(3) }
}; 
```

或使用Dictionary 的**Add方法，如下所示：**

```
Dictionary<string, TimeSpan> testDictionary = new Dictionary<string, TimeSpan>();
testDictionary.Add("1 Hour", TimeSpan.FromHours(1)); 
```

# javascript - java脚本服务器异步事件

> ID：15128863
> 
> 赞同：2
> 
> 时间：2013-02-28T06:24:01.123
> 
> 标签：javascript, jquery, python, mysql, server-sent-events

我有一个 Web 服务器，当服务器检测到数据库发生变化时，我想向客户端发送数据。我希望客户端无需轮询即可接收数据。

实现这一目标的最佳方法是什么？

（我读了一些关于 SSE - 服务器发送事件，但不确定这是要走的路）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T19:13:30.813

是的，服务器发送事件是监听服务器变化的合适技术。

如果您只是在听，那么 SSE 比 2-way WebSocket 更好（更快、轻量级、HTTP 兼容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:51:50.037

答案会因您使用客户端 Javascript 的自由度而异。

如果您的应用程序为您提供完全的自由，您甚至可以将您的客户端设置为 JMS 侦听器，并将 JMS 消息从客户端传递到服务器。例如，您可以使用[Apache Ajax](http://activemq.apache.org/ajax.html)。

另一种选择是将您的 Web 客户端设置为使用例如[Webdis的 redis 客户端](http://webd.is/)

正如您所提到的，Server-sent-events 也是一种选择，WebSockets 也是一种选择。您需要根据您的限制进行选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:27:01.330

如果轮询不是一个选项，你可以考虑更好的技术，WebSockets，如果你的服务器支持它（和你的目标浏览器！）。但是，无论如何，您需要客户端打开到服务器的连接。

# ruby-on-rails - 选定的值在 ruby on rails 的页面重新加载中重置

> ID：15128866
> 
> 赞同：1
> 
> 时间：2013-02-28T06:24:05.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我是 ruby​​ on rails 的新手。我想显示从下拉菜单中选择的值，并在页面重新加载中选中单选按钮。重新加载页面时，下拉菜单和单选按钮的选定值正在重置。所以请让我知道如何解决此问题。这是我正在使用的代码。

```
 <%= form_tag :action => 'show' do%>
<strong>Select device: </strong> <%= collection_select(:device, :id, @devices, :id, :name, options ={:prompt => "-Select a device"}) %>
<br></br>
<strong>Chose:</strong><%=  radio_button_tag :name,:time, false, :onclick => "this.parentNode.submit();"%>Time
<%=  radio_button_tag :name,:graph%>Graph
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:50:47.350

尝试：

```
 collection_select(:device, :id, @devices, :id, :name, {:selected => @your_selected_value, :prompt => "-Select a device"}) 
```

参见[radio_button_tag(name, value, checked = false, options = {})](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/radio_button_tag)

```
<%=  radio_button_tag :name,:time, @your_checked_value.eql?('time'), :onclick => "this.parentNode.submit();"%>Time
<%=  radio_button_tag :name,:graph, @your_checked_value.eql?('graph') %>Graph 
```

# android - 显示非常小的宽度的选项菜单对话框

> ID：15128870
> 
> 赞同：0
> 
> 时间：2013-02-28T06:24:17.643
> 
> 标签：android, android-dialog, android-optionsmenu

我有一个选项菜单，上面的项目显示一个对话框。由于某种原因，它以非常小的宽度显示。我想知道为什么。下面是对话框代码和 optionsuserdetails xml。我知道我错过了一些非常愚蠢的东西。抱歉，代码很长，但问题可能出在此选项菜单显示的任何地方。

```
case God.USER_DETAILS:
            userDetails = new Dialog(this);
            userDetails.requestWindowFeature(Window.FEATURE_NO_TITLE);
            userDetails.setContentView(R.layout.optionsuserdetails);
            userDetails.setCancelable(true);
            userName = (TextView) userDetails.findViewById(R.id.userName);
            userName.setText(God.appConfiguration.getString(God.nameKey, "-"));
            drivingLicense = (TextView) userDetails.findViewById(R.id.drivingLicense);
            drivingLicense.setText(God.appConfiguration.getString(God.drivingLicenseKey, "-"));
            vehicleNumber = (TextView) userDetails.findViewById(R.id.vehicleNumber);
            vehicleNumber.setText(God.appConfiguration.getString(God.vehicleRegistrationNumberKey,
                    "-"));
            phoneNumber = (TextView) userDetails.findViewById(R.id.phoneNumber);
            phoneNumber.setText(God.appConfiguration.getString(God.phoneNumberKey, "-"));
            userDetails.show();
            break;

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/roundcornersgreyback"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Personal Details"
        android:textColor="#990000"
        android:textSize="20sp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="These are the details you have provided during registration."
        android:textColor="#666666"
        android:textSize="10sp" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#cccccc" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Name"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/userName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="This is the name you provided during registration."
        android:textColor="#222222"
        android:textSize="12sp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Driving License Number"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/drivingLicense"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is the driving license number you provided during registration."
        android:textColor="#222222"
        android:textSize="12sp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="License Plate (Vehicle)"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/vehicleNumber"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is the license plate number of the vehicle you are driving."
        android:textColor="#222222"
        android:textSize="12sp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Phone Number"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/phoneNumber"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is the phone number you provided during registration."
        android:textColor="#222222"
        android:textSize="12sp" />

</LinearLayout> 
```

编辑：可绘制

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="#eeeeee" />

    <stroke
        android:width="2dp"
        android:color="#cccccc" />

    <padding
        android:bottom="5dp"
        android:left="5dp"
        android:right="5dp"
        android:top="5dp" />

    <corners
        android:bottomLeftRadius="7dp"
        android:bottomRightRadius="7dp"
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />

</shape> 
```

![taxeeta 主屏幕](../Images/70c68843bb92c60fa5aff7a769103aa4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:34:23.757

尝试在 userDetails.setContentView() 之后添加它

```
userDetails.getWindow().setLayout(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:45:48.473

好的。那么如果 userDetails 是一个对话框，而不是使用 setContentView() ，为什么不使用 setContentView(id,layout params) 。如果要确定对话框中元素的间距，则可以使用 userDetails.setView(mEditText, 10, 10, 10, 10);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:33:53.830

似乎您正在使用的drawable，即roundcornersgreyback 的宽度非常小。尝试使用更大的图像。确保根据设备目标和图像分辨率（即 hdpi、mdpi、ldpi 等）将图像放置在正确的可绘制文件夹中

# android - 无法检索字符串中项目的父项

> ID：15128871
> 
> 赞同：2
> 
> 时间：2013-02-28T06:24:22.323
> 
> 标签：android

我的项目运行失败并在检索项目的父项时出错

**错误**是

```
 Error retrieving parent for item: No resource found that matches the given name 
@style/Theme.Sherlock.Light.DarkActionBar at line 3 
```

**xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="NoAnimation.Theme.Sherlock.Light.DarkActionBar"    parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="android:windowAnimationStyle">@null</item>        
</style>

<style name="transparent_progress">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:background">@android:color/transparent</item>
</style>

<style name="NotificationText">
  <item name="android:textColor">?android:attr/textColorPrimary</item>
</style>

<style name="NotificationTitle">
  <item name="android:textColor">?android:attr/textColorPrimary</item>
  <item name="android:textStyle">bold</item>
</style>

<style name="Registration.Description" parent="@android:style/TextAppearance">
    <item name="android:textSize">16.0sp</item>
    <item name="android:typeface">sans</item>
    <item name="android:textStyle">normal</item>
    <item name="android:textColor">#ff333333</item>
    <item name="android:gravity">left</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:shadowColor">#ffffff</item>
    <item name="android:shadowDx">1.0</item>
    <item name="android:shadowDy">1.0</item>
    <item name="android:shadowRadius">0.0</item>
    <item name="android:lineSpacingMultiplier">1.25</item>
</style>

<style name="Registration.Label" parent="@android:style/TextAppearance">
    <item name="android:textSize">12.0sp</item>
    <item name="android:typeface">sans</item>
    <item name="android:textStyle">normal</item>
    <item name="android:textColor">#ff808080</item>
    <item name="android:gravity">left</item>
    <item name="android:layout_gravity">left</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:shadowColor">#ffffff</item>
    <item name="android:shadowDx">1.0</item>
    <item name="android:shadowDy">1.0</item>
    <item name="android:shadowRadius">0.0</item>
    <item name="android:lineSpacingMultiplier">1.25</item>
</style>

<style name="Registration.BigLabel" parent="@style/Registration.Label">
    <item name="android:textSize">20sp</item>
</style>

<style name="Registration.Constant" parent="@android:style/TextAppearance">
    <item name="android:typeface">sans</item>
    <item name="android:textStyle">normal</item>
    <item name="android:textColor">#ff808080</item>
    <item name="android:shadowColor">#ffffff</item>
    <item name="android:shadowDx">1.0</item>
    <item name="android:shadowDy">1.0</item>
    <item name="android:shadowRadius">0.0</item>
    <item name="android:lineSpacingMultiplier">1.25</item>        
</style>

</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:44:24.263

在 ActionBarSherlock 示例中，他没有在父属性中包含“@style/”。请参阅此处的示例：http: [//actionbarsherlock.com/theming.html](http://actionbarsherlock.com/theming.html)

我现在无法验证，但我认为以下更改可能有效：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="NoAnimation.Theme.Sherlock.Light.DarkActionBar"    parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:windowAnimationStyle">@null</item>        
</style> 
```

# java - 所有请求重定向特定 url

> ID：15128875
> 
> 赞同：0
> 
> 时间：2013-02-28T06:24:59.173
> 
> 标签：java, jsp, tomcat, servlets, web

我在 localhost:8084/ues/ 中提供我的应用程序。我想将所有请求从 localhost:8084/ues/* 重定向到 localhost:8084/ues/index.jsp。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:36:15.867

在部署描述符中定义一个过滤器，例如

```
 <filter>
    <filter-name>Filter-Name</filter-name>
    <filter-class>Fully-Qualified-Class-Name</filter-class>
</filter>
  <filter-mapping>
    <filter-name>Filter-Name</filter-name>
    <url-pattern>ues/*</url-pattern>
  </filter-mapping> 
```

并从`Filter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:37:21.737

在你`web.xml`有下面的代码，

```
<servlet-mapping>
  <servlet-name>MyServlet</servlet-name>
  <url-pattern>/ues/*</url-pattern>
</servlet-mapping>

<servlet>
  <servlet-name>MyServlet</servlet-name>
  <servlet-class>com.myPackage.redirectServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>

public class redirectServletextends HttpServlet{
public void doPost(HttpServletRequest request, HttpServletResponse response) 
{

        try 
        {
            RequestDispatcher dispatcher = request.getRequestDispatcher("/pages/index.jsp");
            dispatcher.forward(request, response);
        } 
        catch(Exception e)
                {
                  //catch your exceptions
                }
}
} 
```

# c++ - JsonCpp 包装器

> ID：15128876
> 
> 赞同：1
> 
> 时间：2013-02-28T06:25:05.887
> 
> 标签：c++, class, implementation, wrapper, jsoncpp

## 问题描述

我正在尝试为[JsonCpp](http://jsoncpp.sourceforge.net/)编写包装器。我的包装器必须具有以下功能

*   `Parse(const string& input)`
*   `GetString(string& output, const string name, bool optional = true)`
*   `SetString(const string& value, const string name, bool optional = true)`
*   `GetObject(const string& objectName)`

我打电话给我的包装类`Parser`

```
class Parser
{
private:
    Json::Value mJsonObject;

public:
    bool Parse(const string& input);
    bool GetString(string& output, const string name, bool optional = true);
    bool SetString(const string& value, const string name, bool optional = true);
    Parser& GetObject(const string& objectName);
}; 
```

在我想写的代码中：

```
void foo()
{
    Parser::GetObject("IN").GetObject("Params").SetString("Param1", "this is json");
} 
```

通过调用这个我想创建以下 JSON

```
{
    "IN" : {
        "Params" : {
            "Param1":"this is json"
        }
    }
} 
```

## 问题

***我必须如何实施`GetObject`和`SetString`运作才能获得预期的结果？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:39:57.203

首先，祝你好运：）

我不确定你到底遇到了什么问题，但这里有一些你需要做的事情：

*   `GetObject`返回`*this`，以便您可以链接`GetObject`调用
*   `Json::Value`包含一个`operator[]`执行您期望的操作 - 获取关联的值，如果它不存在则创建它。`GetObject`可以简单地包装它。`mJsonObject`请记住使用子对象更新您的本地。
*   `SetString`简单地换行，然后通过字符串参数`GetObject`构造一个新的`Json::Value`

# java - 使用 POI 写入现有的 excel 文件

> ID：15128887
> 
> 赞同：0
> 
> 时间：2013-02-28T06:26:08.733
> 
> 标签：java, apache-poi

我使用 POI 读取/写入 Excel 工作表。当使用 POI 写入新工作表时，它起作用了。但是，当我尝试使用 POI 在现有的 excel 工作簿中写入时，它不起作用。我该如何纠正这个问题？

```
 workBook =  getWorkbookSheet(workBookName);
    sheet1 = workBook.getSheetAt(1);
    sheet2 = workBook.getSheetAt(2);

    while(sheetStart<sheet1.getLastRowNum() + 1)
    {
        HSSFRow rowSheet1 = sheet1.getRow(sheetStart);
        HSSFCell cellSheet1 = rowSheet1.getCell(4);
        if(cellSheet1.getStringCellValue().trim().equals(valY))
        {                                           cellSheet1.setCellValue("N");
        }
        else
            //do nothing 
            sheetStart++;
    }
    fileOutSheet1 = new FileOutputStream(sheet1.getSheetName());
    workBook.write(fileOutSheet1);
    fileOutSheet1.flush();
    fileOutSheet1.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T01:16:26.727

`fileOutSheet1 = new FileOutputStream(sheet1.getSheetName());`似乎不正确。你应该给出工作簿的路径而不是 sheet1.getSheetName。因为即使在单个单元格内容更改之后，您仍在编写整个工作簿。

例如它应该像

```
 FileOutputStream fileOut = new FileOutputStream("C:\\MyWorkbook.xlsx");
    wb.write(fileOut);
    fileOut.close(); 
```

详情请访问[这里](http://poi.apache.org/spreadsheet/quick-guide.html)

# ascii - 将 PI 数字转换为文本字符串

> ID：15128888
> 
> 赞同：3
> 
> 时间：2013-02-28T06:26:12.073
> 
> 标签：ascii, analytics, pi

有趣的是，pi 的十进制表示永远不会结束，也永远不会变成永久的重复模式。这意味着 pi 很可能包含所有可能的数字组合。

这家伙计算了 5 万亿 5x(10^12) 个 pi :D [http://www.numberworld.org/misc_runs/pi-5t/details.html](http://www.numberworld.org/misc_runs/pi-5t/details.html)

来自互联网：“转换为 ASCII 文本，在那无限的数字串中的某处是你将爱的每个人的名字，你死亡的日期、时间和方式，以及宇宙所有重大问题的答案。 "

想知道是否有人已经转换并分析了已知字母序列（单词/句子）的结果字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-08T20:07:21.593

查看此页面： http: [//pi.nersc.gov/](http://pi.nersc.gov/)。

它允许您搜索字符串和十六进制序列。请注意，该搜索引擎仅索引了 pi 的前 40 亿位小数，并在索引后使用了任意位置的二进制或十六进制数字的公式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-24T05:00:23.700

Pi 包含所有事物的想法是一个好主意，但如果它是正确的，那意味着关于所有事物的错误信息也是无限的。例如，如果 Pi 包含一个你会爱的人的列表，那么它也会有一个人的列表，看起来它是你会爱的人的列表，但实际上它只是一个名字的混合使其看起来合法的模式。

按照同样的想法，你死亡的日期、时间和方式也可能是“伪造的”。例如，假设您是一个名叫 Jason Delara 的人，您在晚上 11:35 在睡梦中死去，享年 83 岁。在 Pi 的某个地方，它可以用 ASCII 文本说“Jason Delara 将在 83 岁时死去，晚上 11:35，在睡梦中去世。” 它还会在其他地方说“杰森德拉拉将在 35 岁时去世，早上 6:00，死于一场车祸。” 这些错误预测的数量可能是“无限的”。

还有一个事实是，如果按照上面的想法，除了一个之外，这个数字中宇宙的一个重大问题的答案都是错误的，即使许多答案是有道理的。我想了很多，我想“如果有一部分数字说明了哪些事实是正确的，哪些不是？” 答案是“那么数字中有无数的虚假列表声称与真实列表相同。” 简而言之，将 Pi 转换为 ASCII 文本来尝试解决所有问题是没有意义的。

我知道我晚了一点，但我写这篇文章是为了任何来这里以无穷无尽的、不重复的小数寻找宇宙答案的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-06T12:41:45.667

pi 是一个无理数，我们仍在寻找数字，这非常方便，就好像您在序列中找不到您想要的一样，然后根据定义，它恰好在稍后出现。

至于它包含隐藏信息 - 如果您创建任何足够长的随机序列，您将能够从结果输出中创建简单的单词。

阴谋论者只是喜欢在没有模式的地方看到模式。他们忘记了其他的噪音，对纯粹的巧合无休止地着迷。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-21T03:51:31.453

只想为这个问题提供进一步的背景。是的，关键是 PI 会无限进行。这意味着句子结构和字母组合有无限可能。这意味着每个字母组合都会发生并且正在 PI 中发生。所以从技术上讲，PI 中的所有内容都可以应用于我们周围可观察世界中的所有内容。

# php - 在选项标签中显示空格

> ID：15128892
> 
> 赞同：4
> 
> 时间：2013-02-28T06:26:14.023
> 
> 标签：php, css, html

我想将我的清单安排如下：

```
Subject         Chapter         MCQ     Duration(min)
Physics 1            10          40               40
Chemistry 1           9          30               30
Math 1               10          40               40
Biology 1            12          40               20 
```

因此，我尝试了以下操作：

```
<div style="font-family: "Lucida Sans Unicode"">
    <?php
        include_once('funcs.php');
        $f = new funcs();
        $res = $f->get_ques(); 
        printf("%-'.20s", 'Subject');
        printf("%-'.20s", 'Chapter');
        printf("%-'.20s", 'Marks');
        printf("%-'.20s", 'Duration');
   ?>
   <br/>
   <select>
   <?php
       while( $q = mysql_fetch_array( $res ) ) {
           echo '<option>', printf("%-'-20s", $f->get_sub($q['q_id'])), printf("%-'.20s", $q['chapter']), printf("%-'.20s", $q['mcq']), printf("%-'.20s", $q['time']), '</option>';
       }
   ?>
   </select>
</div> 
```

我的输出是：

![在此处输入图像描述](../Images/f887709261b04081ae69d50eb8e5e6a3.png)

线条是曲折的。我希望这些线是严格的。我尝试使用固定长度字体但失败了。我应该删除这些点。也是。任何人请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:35:15.420

改变这个

```
echo '<option>', printf("%-'-20s", $f->get_sub($q['q_id'])), printf("%-'.20s", $q['chapter']), printf("%-'.20s", $q['mcq']), printf("%-'.20s", $q['time']), '</option>'; 
```

至

```
echo '<option>', printf("% /&nbsp20s", $f->get_sub($q['q_id'])), printf("% /&nbsp20s", $q['chapter']), printf("% /&nbsp20s", $q['mcq']), printf("% /&nbsp20s", $q['time']), '</option>'; 
```

用于`&nbsp`空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:00:16.897

您可以将 use`&nbsp;`用于空格 not `-`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:45:55.230

由于每个字符的宽度彼此不同，因此不可能使用不同的类型和字体。只有一种方法可以做您需要的事情。在选项中使用等宽字体 Courier 或任何其他等宽字体。我知道 Courier 的所有字符宽度相同。只需将字体名称更改为 courier 并查看您需要的所需想法。

使用样式表证明 id 是 select 和 option 并将 css 规则描述为：

```
 <select id=abc>
     <option id=abc> def </option>
 </select> 
```

在CSS中

```
 #abc {font-family:.......}. 
```

将得到解决

# sql-server - 未启动 Messenger 服务 - 不会发送 NetSend 通知

> ID：15128896
> 
> 赞同：8
> 
> 时间：2013-02-28T06:26:32.977
> 
> 标签：sql-server, sql-server-2008-r2, sql-server-agent

在我的 SQL Server 代理中，我没有设置任何通知，那么为什么会出现这个错误？

我运行 pakg 通过`dtsexec`它成功执行，并且我运行了一个简单的作业来插入它成功运行的记录，但是当在作业步骤中我选择文件系统并提供包路径并运行作业时，它给了我这个错误：

> 未启动 Messenger 服务 - 不会发送 NetSend 通知

我签入`services.msc`但没有像window messenger这样的服务，我也签入了`gpedit`，有一个window messenger，我应用了它的所有三个选项启用，禁用，没有一一配置，但没有摆脱那个错误。

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:07:11.073

这是一条显示的信息性消息，如果您不使用网络发送警报，可以安全地忽略它。

如果您希望发送网络发送警报，那么您必须将 Messenger 服务设置为至少手动启动，最好是自动。然后你必须启动服务。

它会检查 Messenger 服务是否正在运行，如果没有，那么它会生成此消息作为“我无法发送网络发送”的信息，但这并不一定意味着如果您没有使用则存在问题网络发送警报。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T03:10:24.307

Windows server 2008 根本没有信使服务。[msdn 论坛](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/b9c7c635-d6be-4cbb-a96f-fd1ccb9ccffd/)主题，包含有关您的问题的其他信息。忽略它。

# android - 为什么我在 getColumnIndex 方法中得到 -1

> ID：15128899
> 
> 赞同：0
> 
> 时间：2013-02-28T06:26:37.930
> 
> 标签：android, database, sqlite, android-cursor

```
 private static final String DATABASE_CREATE = "CREATE TABLE "
          + DATABASE_TABLE_USERS + "(" + KEY_ROW_ID + 
         " INTEGER PRIMARY KEY AUTOINCREMENT," + KEY_NAME
          + " TEXT NOT NULL," + KEY_PASSWORD + " TEXT NOT NULL," + KEY_LOGIN_ATTEMPTS + " INTEGER NOT NULL," + KEY_ZIP + " TEXT," +
          KEY_STREET + " TEXT," + KEY_EMAIL + " TEXT NOT NULL," + KEY_PHONE + " TEXT);"; 
```

我在 on_create 方法中创建数据库： db.execSQL(DATABASE_CREATE);

我有这个方法：

```
 public int getLoginAttempts(String u_name) {

    String [] columns = new String [] {DB_Helper.KEY_NAME};
    Cursor c = database.query(DB_Helper.DATABASE_TABLE_USERS, columns, DB_Helper.KEY_NAME + "= ?",
             new String[] {u_name},
             null,
             null,
             null);

    if(!c.moveToFirst()) return -1;

    int c_index = c.getColumnIndex(DB_Helper.KEY_LOGIN_ATTEMPTS);

    int num = c.getInt(c_index);
    c.close();
    return num;
} 
```

c_index 始终等于 -1。这意味着该列不存在。但确实如此。并且应该只返回一条记录（因为 u_names 是唯一的）。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:30:35.610

那是因为在查询中您只选择名称列

替换这一行

```
String [] columns = new String [] {DB_Helper.KEY_NAME}; 
```

和

```
String [] columns = new String [] {DB_Helper.KEY_NAME, DB_Helper.KEY_LOGIN_ATTEMPTS}; 
```

# file - 错误 1200：无法使用参数 '[:::]' 实例化 'PigStorage'

> ID：15128900
> 
> 赞同：1
> 
> 时间：2013-02-28T06:26:37.157
> 
> 标签：file, delimiter, apache-pig

我的本地 HDFS 中有文件，它由“:::”分隔。

但是，当我使用以下命令时

> A = 使用 PigStorage(':::') 加载 '/user/vishal/WordCount/hw3data/c0001' 作为 (a, b, c);

它给了我以下错误----

> 错误 1200：无法使用参数 '[:::]' 实例化 'PigStorage'

究竟可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:02:58.727

PigStorage 仅支持*单字符分隔符*。如果您不想创建自定义加载程序，
一个解决方案是遵循 Donald 的[回答](https://stackoverflow.com/questions/7419865/pig-load-problem-with-multiple-delimiters)或查看[MyRegExLoader 。](http://pig.apache.org/docs/r0.11.0/api/org/apache/pig/piggybank/storage/MyRegExLoader.html)在您的情况下，它看起来像这样：

```
REGISTER '/my_pig_home/contrib/piggybank/java/piggybank.jar'
A = LOAD '/user/vishal/WordCount/hw3data/c0001' 
  USING org.apache.pig.piggybank.storage.MyRegExLoader(
    '([^\\:]+):::([^\\:]+):::([^\\:]+)') 
      as (a:chararray, b:chararray, c:chararray); 
```

# node.js - 将 angular.js $resource 与 express 框架一起使用

> ID：15128908
> 
> 赞同：2
> 
> 时间：2013-02-28T06:27:01.990
> 
> 标签：node.js, express, angularjs

我是 Angular JS 和 node.js/express 框架的新手。我正在开发一个使用 angular 和 express 框架的小型应用程序。我有几个端点运行的快速应用程序。一个用于 POST 操作，一个用于 GET 操作。我正在使用 node-mysql 模块来存储和从 mysql 数据库中获取。

这个应用程序正在我的笔记本电脑上运行。

## **angular.js 客户端：**

### 控制器

```
function ItemController($scope, storageService) {
   $scope.savedItems = storageService.savedItems();
   alert($scope.savedItems);
} 
```

### 服务

```
myApp.service('storageService', function($resource) {

    var Item = $resource('http://localhost\\:3000/item/:id',
      {
         id:'@id',
      },

      {
         query: {
            method: 'GET',
            isArray: true
      }
    );

    this.savedItems = function() {
      Item.query(function(data){
      //alert(data);
          return data;
       });
    } 
```

## 带有 mysql 数据库的 Express 服务器：

```
...
app.get('/item', item.list);
...

items.js
---------
exports.list = function(req, res) {

   var sql = 'select * from item';

   connect: function() {
      var mysql = require('mysql');
      var connection = mysql.createConnection({
        host     : 'localhost',
        user     : 'admin',
        database : 'test'
      });
      return connection;
   },

   query: function(sql) {
      var connection = this.connect();
      return connection.query(sql, function(err, results) {
         if (err) throw err;
         return results;
      });
   },
   res.send(results);
}; 
```

当我从服务器发送静态项目数组（json）时， $scope.savedItems() 正在被填充。

但是当我访问数据库中的项目时，即使服务器正在返回项目，客户端中的 $scope.savedItems 也是空的。直接使用 $http 也无济于事。

我从 angular.js 文档中阅读了 $resource 和 $http 的异步性质，但我仍然遗漏了什么或做错了什么。

在此先感谢并感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:46:31.257

这与角度 $resource 的异步性质有关。

```
$scope.savedItems = storageService.savedItems(); 
```

立即返回一个空数组，该数组在数据返回后填充。因此，您`alert($scope.savedItems);`将只显示一个空数组。`$scope.savedItems`如果你稍后再看你的，你会发现它已经被填充了。如果您想在数据返回后立即使用数据，可以使用回调：

```
$scope.savedItems = storageService.savedItems(function(result) {alert(result); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:39:05.040

就像一个快速说明。您还可以观看已保存的项目。

```
function ItemController($scope, storageService) {
   $scope.savedItems = storageService.savedItems();
   $scope.$watch(function() {
      return $scope.savedItems;
   }, function(newValue, oldValue) {
      if (typeof newValue !== 'undefined') {
         // Do something cool
      }
   },
   true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T06:09:41.687

我怀疑，节点没有返回 mysql 结果。它适用于静态文件而不适用于 mysql 的事实排除了角度问题。您可以为 http 调用或 chrome 开发人员日志添加 firebug 日志吗？这可以更清楚地说明问题

# javascript - YouTube JS API 的重大变化？自 2013 年 2 月 27 日起，将不再在没有 videoid 参数的情况下进行初始化

> ID：15128910
> 
> 赞同：0
> 
> 时间：2013-02-28T06:27:17.617
> 
> 标签：javascript, youtube, youtube-api

为了演示我今天发现的重大变化，我采用了基本的 JS API 示例页面，可以通过下面的链接找到该页面，并简单地注释掉 videoId 参数：

演示初始化错误的 YT 示例代码：http: [//www.multitask123.com/fmgem/YT_Sample2.htm](http://www.multitask123.com/fmgem/YT_Sample2.htm)

删除 videoId 参数后，播放器现在将在嵌入式播放器中显示/初始化以下错误消息：“发生错误。请稍后再试。” 直到今天下午才出现这种情况。

在过去的三个月里，我可以按如下方式调用 onYouTubePlayerAPIReady 并且不会出现错误消息：

```
function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
            height: '390',
            width: '640',
            //videoId: 'JW5meKfy3fY', - COMMENTED OUT INTENTIONALLY! HARD REQUIREMENT!
            events: {
                'onReady': onPlayerReady,
                'onError': onPlayerError,
                'onStateChange': onPlayerStateChange
            }
        });
    } 
```

该错误在初始化期间被 onPlayerError 事件处理程序捕获，并且该错误与“evt”参数的数据属性一起出现。所以 onPlayerError(evt) 在初始化和 evt.data = 2 时被调用。这个值被记录为“请求包含一个无效的参数值”，这显然是 API 需要一个 videoId。

我不想讲太多细节，但我花了无数个小时让播放器的初始化正常工作，因为有许多跨浏览器初始化问题。我需要隐藏播放器，直到我真正需要它来播放某些东西。

我忘记了哪个浏览器是罪魁祸首，但其中一个实际上迫使我显示播放器，即使没有播放视频。

我发现我不能延迟加载/JIT 嵌入式播放器，因为它是异步加载的，所以如果我尝试仅在我的用户希望实际观看视频或涉及的 URL 的其他参数将加载播放列表（例如播放器）时加载它会犹豫，因为我不能同时初始化播放器并要求它播放视频。

所以底线是在页面加载时需要初始化播放器，但不需要使用 videoId 参数，因为很简单，我不知道在 90% 的情况下会播放什么，即使我这样做了对不同 API 的不同异步调用的结果。我这样说是因为用 videoid 初始化它的解决方案是不可接受的。

YouTube API 非常棒，我非常喜欢它，以至于我花了 18 个月的时间来开发[http://www.fmgem.com](http://www.fmgem.com)，现在这个重大变化正在破坏 beta 用户对我的应用程序的第一印象。因此，如果 YT API 团队确实对此进行了监控，请将其改回。很高兴在上面加糖。:))

几周前发生了类似的事情，加载时使用相同函数的 wmode 属性。

//wmode: 'opaque' //--- 在 Chrome 中导致邪恶的错误 - 我能够将不透明更改为透明，所以没有什么大不了的，但这需要我审查我的整个架构并有条不紊地处理 apx 9 不同的异步使用 -再次加载的案例都有跨浏览器的怪癖。

所以我不能被动反应，我不得不在[http://www.fmgem.com](http://www.fmgem.com)的实时代码中放入一个“打喷嚏的熊猫宝宝”videoId，但这看起来很不专业，它只是一个创可贴，直到我可以查看整个架构，除非 YT 团队确实承认这是一个重大更改，然后将其恢复为之前的行为。

这在 2013 年 2 月 27 日下午的某个时间被一些用户检测到，我在谷歌群组上读到 YouTube 的开发人员监控 SO。

任何答案、解决方案、指导或确认将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:09:03.380

您最初可以加载空白的 0 秒电影。或者您可以稍微重新安排您的代码。

不要`onYouTubePlayerAPIReady`自己调用函数。改用标志变量：

```
var playerAPIReady;
var player; 
```

设置 API 文件调用`onYouTubePlayerAPIReady`函数时的第一个变量：

```
function onYouTubePlayerAPIReady() {
    playerAPIReady = true;
} 
```

当用户选择播放第一个视频时设置第二个变量：

```
function createPlayerAndPlayVideo(id) {
    if(! playerAPIReady) {
        // player API file not loaded
        return;
    }
    if (! player) {
        player = new YT.Player('player', {
            height: '390',
            width: '640',
            videoId: id
            events: {
                'onReady': onPlayerReady,
                'onError': onPlayerError,
                'onStateChange': onPlayerStateChange
            }
        });
    } else {
        player.loadVideoById(id);
    }
} 
```

如块所示，为后续视频重复使用相同的播放器`else`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:40:48.760

虽然这是一个毫无疑问的突破性变化，因为我睡了一夜好觉，但我找到了解决我自己的延迟加载/JIT 播放器问题的方法。

我有一个概念证明并且目前正在实施的解决方案就像设置一个全局变量来测试我是否有一个 videoid 一样简单。

```
var cleared = false;
    function onYouTubePlayerAPIReady(videoid) {
        if (!cleared) return;
        ..... 
```

然后，当我真正想播放视频时，我只查看变量是否为 false，如果是，我调用 onYouTubePlayerAPIReady 函数并将 videoid 传递给它并对其进行初始化。我的错误是尝试初始化，然后在同一个调用中调用 play() 函数。对我来说，解决方案是使用 id 调用初始化程序，或者如果已经初始化，则调用 playbyid 函数。

虽然我确实喜欢 YT 公共 API 和我使用的其他 API，但它确实为许多重大更改打开了大门，这始终是对一个人的架构和精神毅力的考验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:59:42.947

我不排除在 2 月 27 日可能发生了一些变化，但其意图始终`videoId`是在初始化 iframe 播放器时需要（或列表 ID）。[它没有在文档](https://developers.google.com/youtube/iframe_api_reference)中明确说明，但同时，它从未暗示该参数是可选的，并且所有给出的示例都包含`videoId`.

所以我不会指望这种行为将来会改变。

当您有一个 YouTube iframe 播放器想要初始化且不可见时，最常见的做法是使用 CSS 将其位置设置在浏览器的可视区域之外（例如使用负数`x`和`y`坐标）。您可以使用所需的任何占位符视频初始化播放器，然后`loadVideoById()`在准备好播放真实视频时调用，当您`onStateChange`使用`YT.PlayerState.BUFFERING`或检测时`YT.PlayerState.PLAYING`，您可以将播放器移动到适当的可见位置。

或者，您可以延迟加载播放器，直到您需要它。

# asp.net - 如何从 C#.net 发送电子邮件？

> ID：15128915
> 
> 赞同：1
> 
> 时间：2013-02-28T06:27:53.193
> 
> 标签：asp.net

我正在研究框架 2。我想通过我的门户发送电子邮件。我访问了许多站点。从中我能够理解很多。这是我的代码。我已经创建了页面设计。什么是 smtpserver。这段代码给了我错误.

> System.Web.HttpException：服务器拒绝发件人地址

```
 MailMessage Msg = new MailMessage();
        // Sender e-mail address.
        Msg.From = txtFrom.Text;
        // Recipient e-mail address.
        Msg.To = txtTo.Text;
        Msg.Subject = txtSubject.Text;
        Msg.Body = txtBody.Text;
        // your remote SMTP server IP.
        SmtpMail.SmtpServer = "smtp.gmail.com";
        SmtpMail.Send(Msg);
        Msg = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:34:31.433

试试下面的代码

```
 Using System.Net.Mail;
 public void SendEmail(string from, string to, string bcc, string cc, string subject,
 string body)
 {
 try
 {  
    MailMessage NewEmail = new MailMessage();
    NewEmail.From = new MailAddress(from);
    NewEmail.To.Add(new MailAddress(to));
    if (!String.IsNullOrEmpty(bcc))
    {
        NewEmail.Bcc.Add(new MailAddress(bcc));
    }
    if (!String.IsNullOrEmpty(cc))
    {
        NewEmail.CC.Add(new MailAddress(cc));
    }
    NewEmail.Subject = subject;
    NewEmail.Body = body;
    NewEmail.IsBodyHtml = true;
    SmtpClient mSmtpClient = new SmtpClient();
    // Send the mail message
    mSmtpClient.Send(NewEmail);
    this.Label1.Text = "Email sent successful.";
}
catch
{
    this.Label1.Text = "Email sent failed";
}
}

protected void Button1_Click(object sender, EventArgs e)
{
  string from = "sender address";// like username@server.com
   string to = TextBox1.Text; //Recipient address.
   string bcc = "";
   string cc = "";
   string subject = "text";
   string body = "text";
   SendEmail(from, to, bcc, cc, subject, body); 
 }

  Web.Config:
   <system.net>
    <mailSettings>
        <smtp>
         <network host="your stmp server" port="25" userName="your from email"               password="your password"/>
       </smtp>
     </mailSettings>
     </system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:47:21.807

在 sendMail 方法中传递如下值

```
 sMailFrom=your Mail Id
 sMailTo=To Mail Id
 sSubj=Subject of Mail 
 sContent= Content of ur mail
  bHTMLFormat=true

 public static string sendMail(string sMailFrom, string sMailTo, 
                   string sSubj, string   sContent, bool bHTMLFormat)

    {

        try

        {

            System.Net.Mail.MailMessage mmsg = new System.Net.Mail.MailMessage();

            System.Net.Mail.SmtpClient smtpClient = new System.Net.Mail.SmtpClient();

            //System.Web.Mail.MailMessage mmsg = new MailMessage();

            string smtpServer = ConfigurationSettings.AppSettings.Get("smtphost").ToString();

            mmsg.From = new System.Net.Mail.MailAddress(sMailFrom);
            mmsg.To.Add(sMailTo);
            mmsg.Subject = sSubj;
            mmsg.Body = sContent;

            //mmsg.BodyFormat = (bHTMLFormat ? MailFormat.Html : MailFormat.Text);
            mmsg.IsBodyHtml = bHTMLFormat;

            smtpClient.Host = smtpServer;
            if (ConfigurationSettings.AppSettings.Get("smtpport").ToString() != "")
                smtpClient.Port = Convert.ToInt32(ConfigurationSettings.AppSettings.Get("smtpport").ToString());

            smtpClient.UseDefaultCredentials = false;

            System.Net.NetworkCredential mailCredential = new System.Net.NetworkCredential(ConfigurationSettings.AppSettings.Get("EmailID").ToString(), ConfigurationSettings.AppSettings.Get("Password").ToString());

            smtpClient.Credentials = mailCredential;
            smtpClient.EnableSsl = true;
            smtpClient.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;

            smtpClient.Send(mmsg);
            return "";
        }
        catch (Exception err)
        {
            return err.Message.ToString();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:33:22.780

如果您想使用 gmail 帐户发送邮件而不是使用此代码

```
sing System.Net;
using System.Net.Mail;

var fromAddress = new MailAddress("from_add@gmail.com", "name");
var toAddress = new MailAddress("to_add@example.com", "name");
const string fromPassword = "password";
const string subject = "Subject";
const string body = "Body";

var smtp = new SmtpClient
{
     Host = "smtp.gmail.com",
     Port = 587,
     EnableSsl = true,
     DeliveryMethod = SmtpDeliveryMethod.Network,
     UseDefaultCredentials = false,
     Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
};
using (var message = new MailMessage(fromAddress, toAddress)
     {
              Subject = subject,
              Body = body
     })
{
    smtp.Send(message);
} 
```

完整来源：[如何通过 VB.NET 或 C# 从您的 GMAIL 帐户发送邮件。Windows 编程，有一点自定义](http://www.codeproject.com/Articles/20546/How-to-Send-Mails-from-your-GMAIL-Account-through)

# ruby - 在 Ruby 中附加文件名？

> ID：15128916
> 
> 赞同：0
> 
> 时间：2013-02-28T06:27:57.377
> 
> 标签：ruby, append, filenames

我对 Ruby 非常陌生，并且在过去的第一个脚本中分支，询问我最喜欢的颜色是什么，然后重复给我。我正在做我认为相对简单的任务，移动文件和更改名称。

我在子目录中有一堆文件，我需要将它们移动到单个目录，然后附加所有文件的文件名。具体需要保留原名并在末尾添加IE AAB701.jpg -> AAB701_01.jpg。

我已经设法找到文件并移动它们（可能效率低下），但我没有运气附加到文件名。谷歌搜索，stackoverflow 等，没有运气。

这是我现在拥有的代码。

```
require 'find'
require "fileutils"

file_paths = []
Find.find('../../../Downloads') do |path|
  file_paths << path if path =~ /.*\.jpg$/
end

file_paths.each do |filename|
  name = File.basename('filename')
  dest_folder = "../../../Desktop/Testing/"
  FileUtils.cp(filename, dest_folder)
end

file_paths.each do |fullname|
append_txt = '_01'
filename = "*.jpg"
fullname = File.join(filename, append_txt)

end 
```

实际路径无关紧要，但我对 File.join 或 gsub 不够熟悉，无法弄清楚什么是错误的/最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:17:59.657

首先，我将一些工作提取到一个小方法中：

```
def new_name(fn, dest = '../../../Desktop/Testing/', append = '_01')
  ext = File.extname(fn)
  File.join( dest, File.basename(fn, ext) + append + ext )
end 
```

然后我会为您的目录遍历和处理应用更实用的样式：

```
Dir[ '../../../Downloads/**/*.jpg' ].
select { |fn| File.file? fn }.
each   { |fn| FileUtils.cp fn, new_name(fn) } 
```

另外，我看不到该`Find`模块为您买了什么[`Dir#[]`](http://ruby-doc.org/core-1.9.3/Dir.html#method-c-5B-5D)，而 dir glob 让您免费过滤为 jpgs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-10T16:40:51.187

一个更简单的答案是文件：

```
require 'pathname'

new_name =Pathname(orig_fn).sub_ext("01#{Pathname(orig_fn).extname}").to_s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:34:26.707

我会修改您对 FileUtils.cp 的调用。

```
append_txt = '_01'
file_paths.each do |filename|
  name = File.basename('filename')
  newname = name + append_txt # + File.extension()
  dest_folder = "../../../Desktop/Testing/"
  FileUtils.cp(filename, dest_folder + newname)
end 
```

请注意，此代码对恶意文件名并不安全；您应该在文件处理文档中搜索另一种方法来执行此操作。

# javascript - JSP 下拉列表有 3 个相互链接的选项

> ID：15128922
> 
> 赞同：1
> 
> 时间：2013-02-28T06:29:03.670
> 
> 标签：javascript, jsp

我是jsp的新手。我正在处理下拉菜单。这里的问题是 - 将有一个 3 下拉菜单作为“choice1、choice2 和choice3”。最初“choice1”有 3 个选项。“choice2 和choice3”将是无。根据“choice1”下拉列表选择的选项，“choice 2”需要通过一些 2 个选项来触发。并且根据“choice2”下拉列表中选择的选项，“choice 3”需要通过一些 2 个选项来触发。我该如何实现这一点。带有示例代码的解决方案会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:10:29.833

使用 AJAX 你做同样的事情

有关示例，请参见以下链接：

```
http://jsfprimefacesblog.blogspot.in/2006/02/ajax-jsp-to-populate-dependent-dropdown.html

http://stackoverflow.com/questions/8643096/jsp-ajax-populate-drop-down-list-based-on-the-selected-value

http://www.roseindia.net/answers/viewqa/Ajax/15250-DropDown-in-ajax+jsp.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:39:42.143

```
 var xmlHttp;
    function getPort(){
        var companyId= document.formName.companyId.value;
        var str= document.formname.team.options[document.formname.team.selectedIndex].value;
        var userId = document.formname.userId.value;
        if (str=="all"){
            for (var i = 1; i < document.formname.team.options.length ; i++) {
                document.formname.team.options[i].selected = true;
            }
            document.formname.team.options[0].selected = false;
        }
        var opt = document.formname.team;
        var TeamValue = new Array;
        var j = 0;
        for (i=0; i<document.formname.team.length; i++){
            if (opt[i].selected == true){  
               TeamValue[j] = "'"+opt[i].value+"'";  
               //TeamValue[j] = opt[i].value;
               j++;  
            }
        }
        TeamValue = TeamValue.join(",");
        //alert(TeamValue);
        if (typeof XMLHttpRequest != "undefined"){
              xmlHttp= new XMLHttpRequest();
        }else if (window.ActiveXObject){
            xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");
        }
        if (xmlHttp==null){
            //alert("Browser does not support XMLHTTP Request")
            return;
        } 
        var url="GetPortList.jsp?teamId="+TeamValue+"&companyId="+companyId+"&userId="+userId;
        //alert(url);
        xmlHttp.onreadystatechange = changeValue;
        xmlHttp.open("GET", url, true);
        xmlHttp.send(null);
    }
    function changeValue(){
        if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){
            result = xmlHttp.responseText;
            //alert(result);
            document.getElementById("portnum").innerHTML="<select name='collectorCode' size='4' style='width:155px;><option value='select'>Select All</option>"+result+"</select>";   
        }
    } 
```

使用html代码...

```
<html:select  style="width:155px;" property="team" value="" onchange="getPort()" /> 
```

上面的 ajax 代码修改了下面复选框的值并将其放在一个 div 标签中，比如......

```
<div id="portnum">
<html:select property="collectorCode" value=""  style="width:155px;">
</div> 
```

它适用于 2 个复选框...根据第一个复选框选择的值更改了第二个复选框值

# gruntjs - [mac os]-bash：咕噜声：找不到命令

> ID：15128929
> 
> 赞同：3
> 
> 时间：2013-02-28T06:29:19.263
> 
> 标签：gruntjs

无论我安装哪个 grunt，比如，

> sudo npm install -g grunt

或者

> sudo npm install -g grunt-cli

我总是在我的 Macbook 中得到“-bash: grunt: command not found”。

有谁知道我可以解决它吗？谢谢！

# java - Java util.timer 固定延迟不起作用？

> ID：15128937
> 
> 赞同：2
> 
> 时间：2013-02-28T06:29:42.937
> 
> 标签：java, timer

我试图查看计时器的固定延迟方法（时间表）如何工作，但看起来我失败了。

这是我的代码：

```
public class Timer_Test {    
  static Timer _a_timer;
  static int num_o_proc = 0;
  static int timer_call = 0;
  static double prog_begin_time;

public static void main(String[] args) {
    prog_begin_time = System.currentTimeMillis();

    _a_timer = new Timer();

    _a_timer.schedule(new TimerTask() {
        @Override
        public void run() {
            timer_call++;
            System.out.println(timer_call + " timer start   at " + (System.currentTimeMillis() - prog_begin_time));
            process();

            System.out.println(timer_call + " timer end   at " + (System.currentTimeMillis() - prog_begin_time));
            if (timer_call >= 5) {
                System.exit(0);
            }
        }
    }, 1000, 2000);
}

public static void process() {
    num_o_proc++;
    int local_num_o_proc = num_o_proc;
    System.out.println(local_num_o_proc + " process start   at " + (System.currentTimeMillis() - prog_begin_time));

    double _a_ = 0;
    for(int x=0; x<Integer.MAX_VALUE/2; x++) {
        _a_++;
    }
    System.out.println(local_num_o_proc + " process end   at " + (System.currentTimeMillis() - prog_begin_time));
  }
} 
```

这就是我得到的：

1 个计时器从 1000.0 开始

1 个进程从 1000.0 开始

1 个进程在 2109.0 结束

1 个计时器在 2109.0 结束

2 计时器从 3000.0 开始

2 进程从 3000.0 开始

2 进程结束于 4109.0

2 定时器在 4109.0 结束

3 计时器从 5000.0 开始

3 进程从 5000.0 开始

3 进程结束于 6109.0 .....

自从第一个计时器任务在 2109 (2109 + 2000) 结束后，计时器 2 不应该从 4109（而不是 3000）开始吗？我尝试使用'scheduleAtFixedRate'，它给了我完全相同的结果。我做错什么了吗？还是有一些我无法理解的概念？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:34:05.380

不，这就是它的工作方式。时间段是开始时间之间的时间段，而不是结束时间和下一次开始时间之间的时间段。

基本上你用简单的英语告诉它“从 1 秒开始，然后每两秒执行一次”，所以 1、3、5、7 等是合乎逻辑的解释。

# php - 用于 mysql 更新的交错数组

> ID：15128938
> 
> 赞同：0
> 
> 时间：2013-02-28T06:29:57.597
> 
> 标签：php, mysql, arrays

我有两个数组，一个包含内爆到名为 $fields 的字符串中的字段名称，另一个包含内爆到 $data 中的数据。当第一次使用`INSERT`命令输入数据时，查询看起来像......

```
mysql_query("UPDATE table ($fields) VALUES ($data)") 
```

（顺便说一句：所有数据都经过消毒）

我的目标是构建一个 mysql UPDATE 语句，其中语法是

```
mysql_query("UPDATE table SET $field1=$data1, $field2=$data2 ...") 
```

并一次更新所有字段，因此我需要组合这两个数组来构建交替的字段/数据/字段/数据结构，而不是所有字段后跟所有数据。

我的想法是使用`array_combine`or`array_merge`然后`implode`进入一个字符串，然后将函数设置为

```
mysql_query("UPDATE table SET $imploded-combined-arrays") 
```

我认识到这不会起作用，因为 implode 语句的“胶水”有两个不同的值，具体取决于它是相等还是分隔字段/数据对。

如何逐步遍历两个数组并构建适合`UPDATE`语法的字符串？

谢谢，

凸轮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:52:26.177

试试这个

```
$a = array('key1', 'key2', 'key3');
$b = array('value1', 'value2', 'value3');
$c = array_combine($a, $b);
foreach($c as $key=> $value){
    $result[]=$key."='". $value."'";
}
$updatefields= implode (', ', $result);

echo ("update table set " .$updatefields); 
```

**输出**

```
update table set key1='value1', key2='value2', key3='value3' 
```

[演示](http://codepad.viper-7.com/r3xlPL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:37:32.500

```
$names = array ('foo', 'bar');
$values = array ('hello', 'world');
$pairs = array ();

foreach ($names as $i => $name)
{
    $value = $values [$i];

//  $name = mysql_real_escape_string ($name);
//  $value = mysql_real_escape_string ($value);

    $pairs [] = "`$name` = '$value'";
}

echo ("UPDATE t SET " . implode (', ', $pairs)); 
```

对我来说输出是：

```
UPDATE t SET `foo` = 'hello', `bar` = 'world' 
```

# perl - perl 脚本在 linux 中实现 sudo 登录

> ID：15128941
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:30:01.943
> 
> 标签：perl, unix

我在 perl 中编写了一个脚本，它实际上应该`sudo`使用密码在 linux 中进行 root。登录后，它必须调用一个shell脚本。但是，一旦登录完成，所有其他命令都将成为后台进程，因此不会执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:57:28.207

您不能`sudo`在 Perl 上编写等价物。这是 cus Perl 是脚本语言，并且包含`#!/usr/bin/perl`在开头。所以，当你运行它时，实际上是**exec** -s into `/usr/bin/perl sudo.pl`. 当然，Perl 二进制文件没有 suid 标志。

另外，你的问题......它看起来“恶意”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:07:29.753

对于交互式会话，您可以使用 perl Expect 包。 [https://metacpan.org/pod/distribution/Expect/Expect.pod](https://metacpan.org/pod/distribution/Expect/Expect.pod)

# iis - IIS 垃圾是否在空闲时收集托管的服务应用程序？

> ID：15128942
> 
> 赞同：0
> 
> 时间：2013-02-28T06:30:03.140
> 
> 标签：iis, garbage-collection, iis-7.5, wcf-data-services

全部，

我开发了一个 WCF ODATA 服务应用程序并将其托管在 IIS7 中。服务应用程序有一个内存缓存，如果客户端空闲大约 15 分钟左右，它会丢失所有缓存值。

在进行故障排除时，我发现应用程序逻辑是正确的，并且不会从缓存中批量删除对象。

所以，如果 IIS 在很长一段时间内没有连接到它的客户端时是否会清除服务对象，我会感到困惑。？

这种 GC 行为是真的吗？如果是这样，我该如何控制它？

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:06:40.510

默认情况下，IIS7 应用程序池设置了 20 分钟的空闲超时值，之后应用程序池与所有缓存数据一起从内存中卸载。

您可以通过在 IIS 管理器中选择托管您的站点的应用程序池，在“操作”窗格中选择“高级属性”，然后设置“空闲时间”的值来[增加空闲超时](http://technet.microsoft.com/en-us/library/cc771956%28v=ws.10%29.aspx)甚至将其设置为“0”，从而使其永不超时-out（分钟）值'到您想要的新超时，然后单击确定。（在 Brad Kinsley 的博客[“IIS7 应用程序池空闲超时设置”中有几个屏幕截图](http://brad.kingsleyblog.com/IIS7-Application-Pool-Idle-Time-out-Settings/)

要考虑的一种选择是设置进程外缓存，这样即使 IIS 确实回收了您的应用程序，内存缓存也会保留或为现有缓存设置后备存储，以便在应用程序池回收时缓存重新填充后备商店。

Enterprise Library 的缓存应用程序块是具有这种后备存储的缓存解决方案的一个示例。有关更多信息，请参阅[“缓存应用程序块和数据库后备存储”](http://itworksonmymachine.wordpress.com/2009/02/06/caching-application-block-and-database-backing-store/)。

# c# - Adding to a listView

> ID：15128943
> 
> 赞同：0
> 
> 时间：2013-02-28T06:30:03.983
> 
> 标签：c#, winforms, listview

I CAN ALREADY add names to a listView box. When I click the add button the first name appear, when I add a new name it adds it to the SAME LINE (ex. "john bob greg"). WHAT I WANT TO DO IS have every new name added appear on a new line. Any suggestions as to what might need changing on the listView??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:36:32.827

as your problem you can try this..

```
listView1.Items.Add(textbox1.text); // ask a run time value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:28:42.863

listView has a property called "View" which has 5 different views to choose from. Choose "List".

# grails - 动态命名查询

> ID：15128944
> 
> 赞同：1
> 
> 时间：2013-02-28T06:30:03.427
> 
> 标签：grails, groovy, named-query

他们是 grails 上的动态命名查询吗？我不确定它是否正确，但我的意思是对所有人都适用的命名查询。

就像是：

```
namedQueries = {
 dynamicQuery{ term, name, value ->
   term(name, value)
 }
} 
```

然后它可能被称为但不完全是：

```
def testClass = TestClass.dynamicQuery('eq', 'lastname', 'Bill').list() 
```

所以你也称它为：

```
def testClass = TestClass.dynamicQuery('gt', 'id', 12).list() 
```

这个可能行不通，但它们在 grails 中有类似的东西吗？

**更新** 这个想法是这样我可以尽可能多地链接它：

```
 def testClass = TestClass.dynamicQuery('gt', 'id', 12).dynamicQuery('eq', 'stat', 11).list() 
```

这样我就不必创建许多命名查询。我希望我可以创建一个并多次使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:35:53.120

Grails 的[createCriteria](http://grails.org/doc/2.2.x/ref/Domain%20Classes/createCriteria.html)方法生成Grails [HibernateCriteriaBuilder](http://grails.org/doc/2.2.x/api/grails/orm/HibernateCriteriaBuilder.html)实例，在该实例中可以调用[invokeMethod](http://grails.org/doc/2.2.x/api/grails/orm/HibernateCriteriaBuilder.html#invokeMethod%28java.lang.String,%20java.lang.Object%29)方法动态创建查询条件，通常由标准DSL 定义。

这是某些控制器中的示例：

```
private String dynamicCriteriaTest(String term, name,  value) {
    def c = TestClass.createCriteria()
    def param = []
    param << name
    param << value
    def result =  c.list{
        c.invokeMethod(term, param as Object[])
    }
    return result.toString()
} 

def test() {
    render dynamicCriteriaTest('eq','lastname','Bill')
} 
```

那会得到你想要的东西。

* * *

**更新**

如果要多次调用此方法，请在列表中传递条件参数，然后执行查询：

```
 private List dynamicCriteriaTest(List param) {
        def c = TestClass.createCriteria()
        def paramList = param.collate(3)    //split the parameters into groups
        def result =  c.list{
            paramList.each { paramInstance ->
                def command = paramInstance[0]
                paramInstance.remove(0)
                c.invokeMethod(command, paramInstance as Object[])
            }
        }
        return result
    }

    def test() {
        ArrayList param = new ArrayList()
            //the 1st criteria
        param << 'gt'
        param << 'id'
        param << (long)12    //you have to check the Grails [HibernateCriteriaBuilder] API to make sure the parameter passed to `invokeMethod` is in the right type (e.g. **long** in this case)

            //the 2nd one
        param << 'eq'
        param << 'stat'
        param << (long)11

            //even more
        param << 'like'
        param << 'description'
        param << 'some text%'    

        render dynamicCriteriaTest(param)
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:36:15.757

在 Grails 中，您有 NamedQueries 和 Where Queries。您提供的示例可以通过使用命名查询并将其放在抽象域类中来实现。您的域类应该扩展这个抽象域。

# jsf - 仅带有复选框选择的 Primefaces 数据表

> ID：15128945
> 
> 赞同：9
> 
> 时间：2013-02-28T06:30:06.367
> 
> 标签：jsf, primefaces

在我的项目中，我使用数据表，`<p:column selectionMode="multiple" />` 以便可以使用复选框多次选择条目。

但是，当用户单击一行时，之前的所有选择都将被取消选择，并且仅选择该行。这种行为出乎意料且令人讨厌。我想在行单击时禁用 rowSelect 和 rowUnselect 的行为，但似乎我没有办法，只能破解 datatable.js 的源。

以前有人实施过吗？谢谢回答。

使用：

素面3.5

莫哈拉 2.1.6

玻璃鱼 3.1.2.2

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-02-12T12:52:28.600

根据此[功能请求，Primefaces 版本](https://code.google.com/p/primefaces/issues/detail?id=7103)**5.0.3**和**5.1**现在支持此功能，只需将 rowSelectMode="checkbox" 添加到数据表即可。

文档参考（PF 5.1）：

> 使用 rowSelectMode 选项自定义启用多选数据表的行单击的默认行为。默认值为“new”，清除先前的选择，“add”模式保持先前的选择与元键打开时通过鼠标单击选择行相同，“checkbox”模式仅允许使用复选框选择行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T16:12:50.237

将它放在您的页面中，可能有助于在您单击一行时停止选择。

```
$(document).ready(
    function() {
        $("tr td").click(function(event) {
            if (!$(this).find("div").hasClass("ui-chkbox") 
                  || $(this).find("div").find("div").hasClass("ui-state-disabled")
                  || this == event.target) {
                event.stopPropagation();
        }
    });
}); 
```

`this == event.target`单击复选框外的复选框列本身时，需要最后一个条件 ( )。

# python - 具有不可散列类型的 Python 反向映射/字典？

> ID：15128948
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:30:10.450
> 
> 标签：python

我创建了一个字典

```
d = {1: {"a":1, "b":2}, 2: {"a":1, "b":2}} 
```

我正在遍历对象以创建像上面这样的字典。

我还想在循环时创建上述字典的反向，它应该看起来像

```
d2 = {{"a":1, "b":2}: 1, {"a":1, "b":2}: 2} 
```

我知道字典是一种不可散列的类型，但同时我希望能够在不遍历字典的情况下反向查找值。

有没有办法在python中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:31:59.990

> 我还想在循环时创建上述字典的反向，它应该看起来像

1.  不，你不能。字典的所有键都应该是可散列的，而字典不是可散列的
2.  键不能有重复的条目

> 有没有办法在python中做到这一点？

除非您不希望键是字典，否则您可以转换为其他数据结构。可能`frozenset of item lists`吗？

如果您需要重复键，请使用`frozenset of item lists`MultiMap [1.0.3](https://pypi.python.org/pypi/MultiMap)

谷歌给我返回了一个[freeze dict](http://bob.ippoli.to/archives/2005/03/04/frozendict/)的实现，你可以将它与[MultiMap 1.0.3一起使用](https://pypi.python.org/pypi/MultiMap)

# jquery - Asp.net Web 应用程序中的 Html 页面模板

> ID：15128952
> 
> 赞同：1
> 
> 时间：2013-02-28T06:30:29.760
> 
> 标签：jquery, asp.net, entity-framework, c#-4.0

我公司将 UI 设计外包给了另一家公司。那家公司给了我们 html 模板。目前，我们显示数据的方式是我们从 jquery ajax 调用 Web 服务，并且 Web 服务从数据访问层请求对象集合（例如客户对象集合）。之后，集合被转换为 json 字符串，并作为结果返回给 Jquery Ajax。然后，Jquery 将 json 字符串中的值相应地替换为 html 字符串并附加到 div。该html字符串是外包公司提供的模板。下面是 Jquery 的例子。

```
function ShowAllTransactions() {
try
{

    var isBest = "false";

    $.ajax({
        type: "POST",
        url: "Transaction.asmx/GetTransactionRecords",
        data: "{'categoryID':'" + categores +"' }",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            GetTransactions(msg);
        }
    }).done(initProductInfo);
    }
catch (ex) {
    alert(ex);
}
}

var GetTransactions = function (msg) {
    var p = $.parseJSON(msg.d);
    var str = '';
 for (var i = 0; i < p.length; i++) {
        var OrderCreateDateTime = p[i].OrderCreateDateTime;
        str += "<ul class=\"transitem\">";
        str += "<li class=\"itemdate\">" + OrderCreateDateTime + "  </li> ";
        str += "</ul> <div class=\"clear\"></div>";
       }
    str += "<div class=\"clear\"></div> <div class=\"endline\"></div>";

    $("#records").empty().append(str);
} 
```

通常，html 字符串很长，难以维护和排除故障。有没有更好的方法来解决这个问题？我们正在为 DAL 使用实体框架。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:02:48.580

[这](http://stephenwalther.com/archive/2010/11/30/an-introduction-to-jquery-templates.aspx)看起来是一篇关于使用`jquery templates`. 不知道它是如何工作的，因为我从未使用过它。我使用了类似的方法，但模板实际上是 HTML 和 Javascript 的混合体。模板看起来与[T4 模板](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)相似。

这是一段解析模板的代码：

```
$.fn.parseTemplate = function (data) {
    //alert(JSON.stringify(data));
    var str = (this).html();
    //alert(str);
    var _tmplCache = {}
    var err = "";
    try {
        var func = _tmplCache[str];
        if (!func) {
            var strFunc =
            "var p=[],print=function(){p.push.apply(p,arguments);};" +
                        "with(obj){p.push('" +
            str.replace(/[\r\t\n]/g, " ")
               .replace(/'(?=[^\$]*\$>)/g, "\t")
               .split("'").join("\\'")
               .split("\t").join("'")
               .replace(/<\$=(.+?)\$>/g, "',$1,'")
               .split("<$").join("');")
               .split("$>").join("p.push('")
               + "');}return p.join('');";

            //alert(strFunc);
            //console.log(strFunc);
            func = new Function("obj", strFunc);
            _tmplCache[str] = func;
        }
        return func(data);
    } catch (e) { err = e.message; }
    return "ERROR: " + err.toString();
} 
```

这是一个模板示例（脚本由于类型而被浏览器忽略）：

```
<script id="MyTemplate" type="text/template">
<$
for(var i = 0; i < obj.length; i++) {
$>
<div><$= obj[i] $></div>
<$
}
$>
</script> 
```

这就是我使用模板的方式：

```
<script type="text/javascript">
function loadDataIntoHtml() {
  var data = ["Javascript", "HTML", "Templates"];
  var html = $("#MyTemplate").parseTemplate(data);
  $("#divContainer").html(html);
}
</script> 
```

可以是`divContainer`任何 html 元素（div、span 等）。我通常将模板存储在单独的文件中并将它们加载到服务器上：

```
<script runat="server" type="text/C#">
var templateContent = System.IO.File.ReadAllText(Server.MapPath("~/Templates/MyTemplate.htm"));
</script>
...

<script id="MyTemplate" type="text/template">
<%= templateContent %>
</script> 
```

这种方式很容易编辑模板。它并不完美，但我永远不必担心调试长的 HTML 字符串。

# c# - C# 使用 Windows 服务和 xml 运行计划任务

> ID：15128953
> 
> 赞同：0
> 
> 时间：2013-02-28T06:30:32.393
> 
> 标签：c#, xml, windows-services

```
<Day>
 <Monday>true</Monday>
 <Tuesday>false</Tuesday>
 <Wednesday>true</Wednesday>
 <Thursday>false</Thursday>
 <Friday>true</Friday>
 <Saturday>false</Saturday>
 <Sunday>true</Sunday>
 </Day>
<Time>
 <time>17:18</time>
</Time> 
```

我有上面的 xml，我想通过 Windows 服务运行特定任务。例如：windows 服务应该在周一和周日晚上 17:18 打开记事本。

请让我知道如何在 C# 中实现这一点。如何创建 Windows 服务并要求该服务查看上述 XML 并在到达预定时间和日期时启动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:35:13.703

考虑使用[Quartz.net](http://quartznet.sourceforge.net/)之类的调度程序，而不是构建定制的调度程序。它可能会为您节省一些时间和精力。

请注意，Quartz.net 使用 CRON 样式的调度语法，这与您的 XML 不同。但它仍然是可配置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:05:20.277

我会建议两种方法： 1\. 如果 XML 的使用不重要，那么更好的方法是创建一个 windows 计划任务并根据需要进行配置。之后，您可以创建一些控制台应用程序，该应用程序将按配置的时间表运行。2\. 如果必须以任何方式使用 XML，您可以创建一个 Windows 服务，例如每 5 分钟运行一次。每次它必须读取 XML 的内容并将其与系统的 DateTime.Now 进行比较。

您可以在互联网上找到很多关于如何创建 Windows 服务的文章。例如这个[http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:42:32.763

[CodeProject 的本教程](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)介绍了如何在 C# 中创建 Windows 服务。

我推荐[Quartz.net](http://quartznet.sourceforge.net)进行调度。如果您对使用自定义 XML 解决方案一无所知，并且您使用的是 .NET 3.5 或更高版本，请查看[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。

根据您希望服务执行的程序（例如记事本之类的 GUI 应用程序），您可能需要考虑Vista 及更高版本上的[会话 0 隔离](http://msdn.microsoft.com/en-us/library/bb756986.aspx)。

# c++ - QAbstractTableModel 检索数据更改的自定义对象

> ID：15128956
> 
> 赞同：2
> 
> 时间：2013-02-28T06:30:43.787
> 
> 标签：c++, qt, selectionchanged, qabstracttablemodel, custom-object

我最近再次拿起了Qt，并开始刷新我的记忆。为表创建自定义数据模型非常简单。

现在我正在尝试检索选定的数据。请注意，我使用自定义数据对象。

我的自定义模型示例：

平台.h

```
class Platform
{
public:
    Platform();
    Platform(QString name);
    QString getName();
    void setName(QString name);
private:
    QString m_name;
}; 
```

用于测试目的的非常简单的数据结构。然后我实现了一个 QAbstractTableModel，Data() 方法如下所示：

平台模型.cpp

```
QVariant PlatformModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
        return QVariant();

    if (index.row() >= m_platforms.size() || index.row() < 0)
        return QVariant();

    if (role == Qt::DisplayRole) {
        Platform platform = m_platforms.at(index.row());
        qDebug() << platform.getName();
        return platform.getName();
    }
    return QVariant();
} 
```

我从这段代码中了解到，对于可选择的项目，总是返回一个字符串，而不是一个平台对象。

为了显示，这很好用，我在视图中看到了实际的对象。现在我想从模型中选择实际的对象，而不仅仅是一个 QString。

所以方法体应该是这样的：

```
void MainWindow::selectionChangedSlot(const QItemSelection &, const QItemSelection &)
{
    //get the text of the selected item
    const QModelIndex index = ui->lvPlatforms->selectionModel()->currentIndex();
    Platform selectedPlatform = index.data();//This returns a QVariant and will fail at compile time, but I want to achieve something along this line.
    setWindowTitle(selectedPlatform.getName());
} 
```

Ps 也许我试图搜索错误的东西，我可以找到使用自定义对象的示例，但没有人谈论检索所选项目。

必须有一种更好的方法，然后检索字符串，然后遍历平台列表并将名称与所选项目进行比较。如果我有一个大列表，则必须遍历每个项目并进行字符串比较不是很有效.

我希望我的问题足够清楚。如果缺少重要的东西，请告诉我，以便我可以编辑我的示例。

### 编辑

我试过 Q_DECLARE_METATYPE(Platform);

是的，它可以工作，它可以将它存储在 QVariant 中，问题是，因为为了显示，总是需要一个字符串，或者无论如何都要 9/10 次。到目前为止，似乎不可能同时显示文本并从选择模型中获取完整的平台对象（我可以单独做这两个.. 非常没用..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:31:06.827

您可以使用宏 Q_DECLARE_METATYPE 创建与 QVariant 兼容的自定义类型。如果您将您的类声明为元类型，则可以将其存储在 QVariant 中并使用强制转换提取它。

这是一个示例，展示了如何创建一个自定义委托，该委托可以使用 QVariant 显示来自自定义类的数据：

```
class Data {
private:
    QString name;
    int value;
public:
    Data() : name(""), value(-1){}
    Data( QString n, int v ) : name(n), value(v){}
    QString text() {
        return QString( "Test %1 - %2" ).arg( name ).arg( value );
    }
};

Q_DECLARE_METATYPE( Data )

class Delegate : public QStyledItemDelegate {
protected:
    void paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const {
        Data d = index.data().value<Data>();
        painter->drawText( option.rect, d.text() );
    }
};

int main( int argc, char **argv) {
    QApplication app(argc, argv, true);

    QVariant var0, var1, var2;
    var0.setValue(Data( "Item A", 0 ));
    var1.setValue(Data( "Item B", 1 ));
    var2.setValue(Data( "Item C", 2 ));

    QListView *view = new QListView();
    QStandardItemModel model(3, 1);

    model.setData( model.index( 0, 0 ), var0 );
    model.setData( model.index( 1, 0 ), var1 );
    model.setData( model.index( 2, 0 ), var2 );
    view->setModel( &model );
    view->show();
    view->setItemDelegate( new Delegate() );
    return app.exec();
} 
```

# magento - 将等级价格添加到追加销售块

> ID：15128962
> 
> 赞同：1
> 
> 时间：2013-02-28T06:31:14.120
> 
> 标签：magento

我在谷歌上搜索了这个答案。我需要在产品页面的加售块上显示产品的等级价格。

我试过这个：

```
<?php echo $this->getTierPriceHtml() ?> 
```

但是，它与页面上主要产品的等级价格相呼应，而不是追加销售块中产品的等级价格。

有谁知道这里的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:38:33.100

你几乎已经完成

```
$this->getTierPriceHtml($_link); 
```

实际上，此方法接受 $product 显示的参数，如果您不设置它，它将显示 Mage::registry('current_product') aka 主要产品的价格，只需将 upsold 产品作为参数传递，您没事。

# flex4 - 按钮皮肤没有同时应用过滤器和渐变颜色

> ID：15128964
> 
> 赞同：0
> 
> 时间：2013-02-28T06:31:18.653
> 
> 标签：flex4, flash-builder, gradient, skinning, linear-gradients

我在 flash builder 4 中使用 Flex 4 创建了一个示例桌面应用程序，其中我在 BorderContainer 中使用了一个按钮。我已将皮肤应用于按钮，其中包括下拉阴影、发光滤镜、斜面滤镜和渐变颜色。

但是我面临同时使用滤镜和渐变填充的问题。使用过滤器时，渐变填充不显示，反之亦然。请让我知道我在哪里犯错。

这是 main.mxml 代码：

```
<s:BorderContainer backgroundColor="#003C7B" verticalCenter="0" horizontalCenter="0" height="350" width="450">
    <s:Button id="btn" label="Select" color="white" verticalCenter="0"  skinClass="BlueButtonSkin" horizontalCenter="0"/>
</s:BorderContainer> 
```

滤镜和渐变填充的皮肤类代码如下：

```
<s:Rect id="backgroundAndShadow" left="0" right="0" top="0" bottom="0" radiusX="5" radiusY="5"
        topLeftRadiusX="5" topLeftRadiusY="5" topRightRadiusX="5" topRightRadiusY="5"
        bottomLeftRadiusX="5" bottomLeftRadiusY="5" bottomRightRadiusX="5" bottomRightRadiusY="5">
    <s:fill>
        <s:LinearGradient rotation="90">
            <s:GradientEntry  color="#00366E"/>
            <s:GradientEntry color="#013A8B" />
        </s:LinearGradient>
    </s:fill>
    <s:filters>
        <s:GlowFilter alpha="0.9"  color="#ffffff" inner="false"  knockout="true"  blurX="8" blurY="8" />
        <s:BevelFilter angle="270" distance="5" />
    </s:filters>
</s:Rect>

<s:RectangularDropShadow id="dropShadow" blurX="8" blurY="8" alpha="0.5" distance="5" tlRadius="5" trRadius="5" blRadius="5" brRadius="5"
                         angle="45" color="#000000" left="2" top="0" right="0" bottom="0"/>
<s:Rect id="border" left="0" right="0" top="0" bottom="0" width="75" height="15" 
        topLeftRadiusX="5" topLeftRadiusY="5" topRightRadiusX="5" topRightRadiusY="5"
        bottomLeftRadiusX="5" bottomLeftRadiusY="5" bottomRightRadiusX="5" bottomRightRadiusY="5">
    <s:stroke>
        <s:SolidColorStroke joints="bevel" caps="round" color="#84C2F2" weight="0.3" alpha="0.3"/>
    </s:stroke>
</s:Rect>

<s:Label id="labelDisplay"
         textAlign="center" 
         verticalAlign="middle" 
         maxDisplayedLines="2" 
         horizontalCenter="0" verticalCenter="0"
         left="10" right="10" top="2" bottom="2">
</s:Label> 
```

对此有何建议？

我附上了所需的查找按钮以供参考：

![供参考的按钮图像](../Images/02f1a4bfc53d7de7e2a847931a7119a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:57:27.100

在您的`<s:GlowFilter />`中，您已将`knockout`属性设置为`true`. 因此，在应用该过滤器时，它实际上会剔除应用过滤器的项目的内容。完全删除该属性，或者您可以将其设置为 false，这是默认设置。

以下是[GlowFilter 文档对该](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/filters/GlowFilter.html)属性的`knockout`说明：

> 指定对象是否具有剔除效果。挖空效果使对象的填充透明并显示文档的背景颜色。值 true 指定击倒效果；默认值为 false（无淘汰效果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:04:14.590

好吧，我终于做到了……

玩过代码，发现这段代码可以很好地满足要求：

```
<s:Rect id="backgroundAndShadow2" left="0" right="0" top="0" bottom="0" 
        topLeftRadiusX="5" topLeftRadiusY="5" topRightRadiusX="5" topRightRadiusY="5"
        bottomLeftRadiusX="5" bottomLeftRadiusY="5" bottomRightRadiusX="5" bottomRightRadiusY="5">
    <s:fill>
        <s:SolidColor color="#4B7CB6" alpha="0.5"/>
    </s:fill>
    <s:filters>
        <s:DropShadowFilter blurX="5" blurY="5" quality="3" strength="0.65" distance="4" />
        <s:GlowFilter blurX="7" blurY="7" quality="3" color="#004DAF"/>
        <s:BevelFilter blurX="1" blurY="1" quality="3" strength="2" highlightColor="#9FC7F5" angle="60" distance="1"/>
        <s:BlurFilter blurX="1.5" blurY="1.5"/>
    </s:filters>
</s:Rect>

<s:Rect id="backgroundAndShadow" left="1.5" right="1.5" top="1.5" bottom="1.5" 
        topLeftRadiusX="5" topLeftRadiusY="5" topRightRadiusX="5" topRightRadiusY="5"
        bottomLeftRadiusX="5" bottomLeftRadiusY="5" bottomRightRadiusX="5" bottomRightRadiusY="5">
    <s:fill>
        <s:LinearGradient scaleX="51" rotation="90">
            <s:GradientEntry ratio="0" color="#013465"/>
            <s:GradientEntry ratio="0.32156863" color="#013A7F"/>
            <s:GradientEntry ratio="1" color="#003990"/>
        </s:LinearGradient>
    </s:fill>
    <s:filters>
        <s:DropShadowFilter inner="true" angle="-130" blurX="2" blurY="0.8" strength="0.5" color="#00275C" alpha="0.8"/>
    </s:filters>
</s:Rect>

<s:Label id="labelDisplay"
         textAlign="center" 
         verticalAlign="middle" 
         maxDisplayedLines="2" 
         horizontalCenter="0" verticalCenter="0"
         left="10" right="10" top="2" bottom="2">
</s:Label> 
```

修改了skinclass，得到了结果！

# android - 摄像头捕获活动 MediaStore.ACTION_IMAGE_CAPTURE 不写入 Uri

> ID：15128969
> 
> 赞同：0
> 
> 时间：2013-02-28T06:31:53.300
> 
> 标签：android, android-intent, android-camera

这很奇怪。以下代码几周前可以工作，现在不行了：

```
private void onClick()
{
   Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
   mOriginalUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),"original" + String.valueOf(System.currentTimeMillis()) + ".jpg"));
   Log.d("path", mOriginalUri.getPath());
   intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mOriginalUri);
   intent.putExtra("return-data", true);
   startActivityForResult(intent, CAMERA_REQUEST);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
   switch( requestCode )
   {
   case CAMERA_REQUEST:
       if(resultCode == MainActivity.RESULT_OK)
          Log.d("path", mOriginalUri.getPath());
       break;
   }
} 
```

不知何故，相机捕捉活动正在丢失我的 Uri 并将其设置为空。在 onActivityResult 中打印路径时出现 NPE。我该如何解决这个问题？我在 Galaxy Nexus 上使用 Android 4.1.2 API 16。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:17:50.807

我遇到了类似的相机问题，有时会返回图像，有时会返回 null。我有将图像写入文件的相同设置。

我从 onCreate() 而不是 onClick() 方法开始了相机意图。

当我锁定意图的屏幕方向（纵向，但这没关系）时，问题就消失了。可能想尝试一下并报告是否有影响。

这也可能是相关的： [当屏幕方向改变时，导致 uri 变为空的相机活动](https://stackoverflow.com/questions/9214350/camera-activity-causing-uri-to-go-to-null-when-screen-orientation-changes/15892730#15892730)

# iphone - 如何在storyBoard中添加navigationController控制器

> ID：15128973
> 
> 赞同：1
> 
> 时间：2013-02-28T06:32:12.730
> 
> 标签：iphone, ios, storyboard

我有 3 个视图控制器。我的第一个视图控制器我的意思是根视图控制器是普通视图控制器，而不是导航控制器。我希望我的第二个视图控制器作为一个导航控制器来推送第三个和第四个视图控制器。下图显示了我的故事线，但是当我导航它不工作时，请指导我哪里做错了。

这是我用来导航到另一个视图控制器的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ViewController2 *yourViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController2"];
    [self.navigationController pushViewController:yourViewController animated:YES];

} 
```

![在此处输入图像描述](../Images/8604aa9ed16ce50768dc94655406774b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:01:15.477

将第一个视图控制器连接到导航控制器并以模态方式呈现。然后将导航控制器连接到表格视图控制器。将 tableViewCell 连接到详细视图并推送它

![在此处输入图像描述](../Images/032fbe9dfe9c981f064f5a8be857cb8a.png)

# wpf - 如何通过绑定转换器引用 TreeViewItem 中的另一个控件？

> ID：15128974
> 
> 赞同：0
> 
> 时间：2013-02-28T06:32:16.967
> 
> 标签：wpf, binding, converter

我想在同一个 TreeViewItemContainer中绑定一个`TextBox`基于 SelectedItem的 Visibility。`ComboBox`我想我可以使用转换器进行绑定，但我不知道如何将`ComboBox`项目作为`TextBox`绑定的参数发送。这可以做到吗？

```
<TreeView>
    <TreeView.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <ComboBox Margin="2,0" Name="SkillSelectCB" ItemsSource="{Binding PotentialChildren}" />
                <TextBox Margin="2,0" Width="50" Visibility="{Binding ??}" />
                <Button Margin="2,0" Content="Add" />
            </StackPanel>
        </DataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

这实际上是在 HierarchicalDataTemplate 中，上面的示例非常少。“添加”`Button`将`TreeView`根据在`ComboBox`. 可见性`TextBox`会根据`ComboBox`SelectedItem 的某些属性而改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:32:12.530

所以 Xaml 的`TextBox`：

```
<TextBox Margin="2,0"Width="50" Visibility="{Binding SelectedItem, ElementName=SkillSelectCB, Converter={StaticResource SkillToVisibilityConverter}}" /> 
```

和转换器：

```
public class SkillToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var s = (Skill)value;
        return (s == null || !s.Specialized) ? "Hidden" : "Visible";
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# c# - 如何绕过 GWT 客户端代码中的不受信任的证书错误？

> ID：15128977
> 
> 赞同：1
> 
> 时间：2013-02-28T06:32:30.117
> 
> 标签：c#, gwt, https, x509

我创建了一个在我的机器`HTTPS WCF`上运行的自托管 Web 服务。现在，我从托管在某个域上`Localhost`的基于应用程序向此 Web 服务发出请求。`GWT`

我使用`self-signed` `X.509`尚未批准的证书。每当我的`GWT`应用程序发出请求时，它都会显示一个错误，因为`untrusted Certificate`. 我可以从我的`GWT client`代码中绕过这个错误或建议我一个替代解决方案吗？

是否有任何其他协议支持`WCF`我们可以用于通信并且不会从浏览器触发安全警报的服务？

## 更新

整体场景：

*   您在系统中安装了一个`exe`，它负责`WCF`Web 服务并将证书导入本地计算机。

*   `GWT`您从浏览器打开一个基于网站的网站。比方说`some.com`

*   `some.com`不断地向他/她的本地机器轮询请求。让我们说`https://localhost:8098/{someendpoint}`

但正因为如此`HTTPS`和`untrusted certificate`。它无法提出请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:36:50.013

既然你说

> 让我们从本地测试开始

将您的自签名证书安装到您正在测试 GWT 的机器上怎么样？

您应该能够双击证书并按照提示/向导安装它。

这仅适用于开发（对于生产，您需要适当的证书）

# java - FileOutputStream 为相对路径抛出 java.io.FileNotFoundException

> ID：15128978
> 
> 赞同：0
> 
> 时间：2013-02-28T06:32:40.237
> 
> 标签：java

在我的应用程序中使用相对路径访问图像时：

```
FileOutputStream fos = new FileOutputStream("/images/imag.jpg"); 
```

我得到一个 java.io.FileNotFoundException，但如果我提供它的整个路径

```
FileOutputStream fos = new FileOutputStream(
    "C:/Users/seema/Documents/NetBeansProjects/SpiceCareers/web/images/imag.jpg"); 
```

我需要在我的项目中使用相对路径，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:33:56.517

我认为你应该删除路径中的第一个斜杠，因为它试图在根目录中找到它。相反，它应该是：

```
new FileOutputStream("images/imag.jpg"); 
```

# php - PHP：如何选择单选按钮选择并将其提交到数据库（myphpadmin）

> ID：15128979
> 
> 赞同：0
> 
> 时间：2013-02-28T06:32:40.493
> 
> 标签：php, javascript, html

我正在制作一个联系人页面，您可以在其中将联系人添加到一本书中，查看它们，并在不同的分组中查看它们，等等......

我有一组称为“组”的单选按钮，我想知道我是否使用正确的代码来选择单选按钮并将其提交到我的“myPhpAdmin”表。我已经尝试如下：

```
<?php
 session_start();session_destroy();
 session_start();

if( $_GET["newFname"] && $_GET["newLname"] && $_GET["newPhone"] && $_GET["newEmail"] && $_GET["newAddress"          ] && $_GET["group"] value (or $_POST) )
    {
    if($_GET["regpass1"]==$_GET["regpass2"])
        {
        $servername="**********";
        $username="********";
        $pass="********";
        $conn=  mysql_connect($servername,$username,$pass)or die(mysql_error());
        mysql_select_db("******",$conn);
        $sql="insert into Contacts (newFname,newLname,newPhone,newAddress,group)                        values('$_GET[newFname]','$_GET[newLname]','$_GET[newPhone]','$_GET[newEmail]','$_GET[newAddress]','$_GET[group] value (or $_POST)')";
        $result=mysql_query($sql,$conn) or die(mysql_error());      
        print "Contact has been added";

        } else print "ERROR: Passwords Don't Match...";

    }else print"ERROR: Invaild Input Data...";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:37:40.210

最简单的方法是使用 JavaScript。

```
<form id="yourform" method="POST" action="">
     <input id="variable_a" type=text name="variable_a" wrap="virtual" value="<?php echo $_POST["variable_a"]; ?>" size=3 maxlength=10 onClick = "document.getElementById('yourform').submit();">
</form> 
```

或在 PHP 中：

```
$v1 = 'unchecked';
$v2 = 'unchecked';

if ( isset( $_POST['Submit'] ) ) {
    $selected_radio = $_POST['variable_a'];
    if ( $selected_radio == 'v1' ) {
       $v1 = 'checked';
    } else if ( $selected_radio == 'v2') {
       $v2 = 'checked';
    }
}

V-1 <Input type = 'Radio' Name ='variable_a' value= '1'
<?PHP echo $v1; ?>

V-2 <Input type = 'Radio' Name ='variable_a' value= '2'
<?PHP echo $v2; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:38:22.407

您不应该使用`$_GET`来获取所有表单值。改为使用`$_POST`。

如果您将单选按钮作为数组传递，您可以像这样访问，

```
$groupVal = $_POST['group']; // It will pass your selected options as an array.

$group = implode(",", $groupVal); // This will convert your array to string with ',' seperator 
```

现在您可以插入`$group`到您的数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:39:57.350

无论是通过 post 方法还是 get 方法发送，您都可以使用`$_REQUEST`包含`$_GET`和的变量。`$_POST`你应该用javascript检查哪个收音机被检查了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:43:46.303

使用`$_POST`并在一组单选按钮中为这些按钮提供相似的名称和 ID，并获得 `$groupVal = $_POST['Name OR ID'];`不需要内爆的值。

# android - Android：在操作栏中创建一个可以动态更新的通知信标

> ID：15128980
> 
> 赞同：0
> 
> 时间：2013-02-28T06:32:43.907
> 
> 标签：android, notifications, android-actionbar, actionbarsherlock

也许我只是没有搜索正确的关键字，但我试图替换主页图标 w。通知信标，默认为灰色，但变为红色并在图标内显示一个数字，表示用户有多少新通知，类似于大多数主要社交网络应用程序（facebook、g+、foursquare 等）中的通知。 )

如果要求一个片段太多，有人至少可以大致概述我将如何创建这样一个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T07:49:46.653

我也在找这个。你只是看看。`http://stackoverflow.com/questions/9033367/custom-notification-view`这可能会有所帮助。

# php - 不支持的方法，在使用 facebook score api 时发布

> ID：15128985
> 
> 赞同：1
> 
> 时间：2013-02-28T06:33:10.980
> 
> 标签：php, facebook-graph-api

我的问题是，当我使用 facebook php sdk 发布分数时，它总是给出错误作为不受支持的方法，发布。

这是我使用的代码：

```
$app_AccessToken = $obj_facebook->getAccessToken();
$obj_facebook->api('/100003470602309/scores/', 'post ', array('access_token' => $app_AccessToken, 'score' => '154125')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:44:29.370

使用类似的东西

```
$obj_facebook->api('/me/scores', 'POST', array( 'score' => 100, 'access_token' => $obj_facebook->getAppId().'|'.$obj_facebook->getApiSecret() )); 
```

试试这个：p可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:37:11.550

这可能是由于访问令牌。确保您有一个[**应用访问令牌**](https://developers.facebook.com/docs/howtos/login/login-as-app/)。

# perl - perl 模板：将正则表达式应用于 .tt2 文件中的变量

> ID：15128986
> 
> 赞同：1
> 
> 时间：2013-02-28T06:33:14.997
> 
> 标签：perl, template-toolkit, openbsd

我绝对不会说`perl`或[`perl` `Template`](http://www.template-toolkit.org/)！

我有一个`perl`文件和一个处理文件`use Template;`的调用。在文件中，会打印一个变量，如下所示：.`->process``.tt2``.tt2``[% path | html %]`

我如何将`s/,-.*//`（删除`,-`和后续内容）应用于`[% path | html %]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:35:07.837

标量有一个[`.remove`vmethod](http://www.template-toolkit.org/docs/manual/VMethods.html#method_remove)。

```
[% path.remove(',-.*') | html %] 
```

# jquery - 使用 jQuery delegate() 替换 live()

> ID：15128992
> 
> 赞同：1
> 
> 时间：2013-02-28T06:33:40.723
> 
> 标签：jquery, jquery-delegate

我目前正在使用 jQuery 创建内容。

`Live()`，根据 jQuery API 描述：*为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。*. 我需要这行代码才能在将来工作。

`$(".trash").delegate('.delete_gallery', 'click', function(event) {`// 不工作 `$(".delete_gallery").live("click", function(event) {`// 工作

我怎样才能让代表工作？我不想使用已弃用的功能。

`.on()`不是一个选择。希望这也不是一个重复的问题，我找不到任何解决这个问题的方法，他们都只是说该怎么做。

谢谢！雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:39:53.293

尝试

```
$(document).delegate('.delete_gallery', 'click', function(event) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:41:07.397

您最好将事件处理程序委托给 $(document) 而不是 $(".trash') 因为这意味着您不依赖它存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:41:35.087

你还有`.bind()`。

**例子**

```
$(".trash").bind('click', function(event) { 
```

# android - 我可以在画布上使用 s-pen 悬停吗？

> ID：15128993
> 
> 赞同：1
> 
> 时间：2013-02-28T06:33:50.760
> 
> 标签：android, hover, ellipsis, onhover

我在画布上绘制了省略号标签（例如“Sour ...”）。现在，当我进行 S-Pen 悬停时，如何显示原始字符串（在本例中为“Sourabh”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-17T17:50:10.350

我曾经有一个带有 Lollipop 的 Note 3，非常简单。使用`:hover`语句（如桌面）。 **注意**：`:hover`当用户触摸元素时也会触发。

```
.myelement:hover {
    content: "I hovered my S Pen over the element";
} 
```

# python - Scrapy SgmlLinkExtractor 引用者无

> ID：15128995
> 
> 赞同：1
> 
> 时间：2013-02-28T06:33:52.983
> 
> 标签：python, scrapy

我正试图让我的蜘蛛工作。这是我在蜘蛛中的代码：

```
start_urls = ["http://www.khmer24.com/"]   

rules = (
Rule(SgmlLinkExtractor(allow=(r'ad/\w+/67-\d+\.html',),
    ), 
    callback='parse_items'),
) 
```

示例网址如下所示： [http](http://www.khmer24.com/ad/honda-click-2012-98/67-258149.html)

://www.khmer24.com/ad/honda-click-2012-98/67-258149.html 我想保留“ad”和“67-”

的输出`scrapy crawl khmer24`是：

```
Crawled (200) <GET http://www.khmer24.com/> (referer: None) 
```

我不知道为什么这是我的整个代码：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector

class MySpider(CrawlSpider):
    name = "khmer24"
    allowed_domains = ["khmer24.com"]
    start_urls = ["http://www.khmer24.com/"]   

    rules = (
    Rule(SgmlLinkExtractor(allow=(r'ad/\w+/67-\d+\.html',),
        ), 
        callback='parse_items'),
    )

    def parse_items(self, response):
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//div[@class='innerbox']/h1/text()")
        return(titles) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:01:38.910

所以你的问题是，“*为什么我的推荐人没有？* ”

日志输出中的行

```
Crawled (200) <GET http://www.khmer24.com/> (referer: None) 
```

来自`start_urls`，而不是链接提取器。默认情况下，发出的请求`start_urls`不包含引用标头。您可以通过自己发出[请求](http://doc.scrapy.org/en/latest/topics/request-response.html#request-objects)来手动添加标头。

# sql-server - 将 xml 字符串参数传递给 SQL Server 存储过程

> ID：15128999
> 
> 赞同：3
> 
> 时间：2013-02-28T06:33:56.937
> 
> 标签：sql-server, sql-server-2008, tsql

我正在将一个 xml 字符串传递给 SQL Server 中的存储过程，以便将 10000 条记录插入我的表中。在这当我调用这个存储过程。想用我传递的那个 xml 字符串检查 SQL Server 表，如果记录存在我不想插入，如果它是新记录，则必须单独插入记录。给出一些解决方案。谢谢。

```
 ALTER procedure [dbo].[SP_CMSUSER1]
      (@xmlString ntext)
    as
    begin

      DECLARE @idoc INT
      DECLARE @data nvarchar(100)

      EXEC sp_xml_preparedocument @idoc OUTPUT, @xmlString

    INSERT INTO dbo.Seg_RecipientsTemp (ContactID,first_name,last_name,company,email,last_updated)
    SELECT ContactID,
    first_name,
    last_name,
    company,
    email,
    last_updated FROM OPENXML(@idoc,

    '/NewDataSet/ContactData', 6)

    WITH

    (ContactID int ,
    first_name nvarchar(50), 
    last_name  nvarchar(50), 
    company    nvarchar(max),
    email nvarchar(100), 
    last_updated datetime 

    )
    end 
```

我的 XML 是：

```
 <NewDataSet>
  <Table>
    <ContactID>2</ContactID>
    <last_name>klklk</last_name>
  </Table>
  <Table>
    <ContactID>4</ContactID>
    <first_name>k</first_name>
    <last_name>kk</last_name>
    <company>k</company>
  </Table>
  <Table>
    <ContactID>6</ContactID>
    <first_name>naveen</first_name>
    <last_name />
    <company>inno</company>
  </Table>
  <Table>
    <ContactID>7</ContactID>
    <first_name>sridar</first_name>
    <last_name />
    <company>mahindara</company>
  </Table>
  <Table>
    <ContactID>1</ContactID>
    <first_name>terst</first_name>
  </Table>
  <Table>
    <ContactID>2</ContactID>
    <first_name />
    <last_name>ask</last_name>
    <company />
  </Table>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T09:29:11.100

定义您的存储过程以采用**XML**类型的参数（不要再使用`ntext`了！它已被弃用）。并且不要`sp_`为您的存储过程使用前缀 - 它是 Microsoft 内部使用的保留前缀并导致性能下降 - 使用其他东西！（或者根本不使用任何前缀）

```
 ALTER procedure [dbo].InsertCmsUser
      @xmlString XML
 AS
     ...... 
```

试试这个（使用SQL Server **2005和更新版本中的****本机**XQuery 方法，而不是相当混乱的界面......）：**`OPENXML`**

 **```
;WITH CTE AS
(
    SELECT
        ContactID = XTbl.value('(ContactID)[1]', 'int'),
        FirstName = XTbl.value('(first_name)[1]', 'varchar(50)'),
        LastName = XTbl.value('(last_name)[1]', 'varchar(50)'),
        Company = XTbl.value('(company)[1]', 'varchar(50)')
    FROM 
        @input.nodes('/NewDataSet/Table') AS XD(XTbl)
)
INSERT INTO 
    dbo.Seg_RecipientsTemp (ContactID, first_name, last_name, company, last_updated)
    SELECT 
        ContactID,
        FirstName,
        LastName,
        Company,
        GETDATE()
    FROM
        CTE
    WHERE
        NOT EXISTS (SELECT * FROM dbo.Seg_RecipientsTemp WHERE ContactID = CTE.ContactID) 
```

我没有`email`在您的 XML 中找到任何属性 - 不确定您想从哪里获得它......

**更新：好的，所以您的****真实**XML 中似乎也有`<last_updated>`元素....

 **```
<last_updated>2012-09-12T22:59:10.813+05:30</last_updated> 
```

这对我来说很像`DATETIMEOFFSET`- 因为它`+05:30`添加了时区。

在这种情况下，请改用以下代码：

```
;WITH CTE AS
(
    SELECT
        ContactID = XTbl.value('(ContactID)[1]', 'int'),
        FirstName = XTbl.value('(first_name)[1]', 'varchar(50)'),
        LastName = XTbl.value('(last_name)[1]', 'varchar(50)'),
        Company = XTbl.value('(company)[1]', 'varchar(50)'),
            LastUpdated = XTbl.value('(last_updated)[1]', 'datetimeoffset')
    FROM 
        @input.nodes('/NewDataSet/Table') AS XD(XTbl)
)
INSERT INTO 
    dbo.Seg_RecipientsTemp (ContactID, first_name, last_name, company, last_updated)
    SELECT 
        ContactID,
        FirstName,
        LastName,
        Company,
        LastUpdated
    FROM
        CTE
    WHERE
        NOT EXISTS (SELECT * FROM dbo.Seg_RecipientsTemp WHERE ContactID = CTE.ContactID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T12:33:38.957

I'm not allowed to comment yet, but hoping to help even though this isn't a real answer. This page offers a great detailed explanation:

[https://www.red-gate.com/simple-talk/sql/learn-sql-server/the-xml-methods-in-sql-server/](https://www.red-gate.com/simple-talk/sql/learn-sql-server/the-xml-methods-in-sql-server/) (not affiliated)

> The nodes() method The nodes() method can be a bit more slippery to understand than the other XML methods. To begin with, rather than returning XML or scalar values, ***the nodes() method returns what is essentially a table that includes one column***. That means you should use the method only in those parts of a statement that can handle rowset views, such as the FROM clause. It also means that, when you call the nodes() method, you must assign a table alias and column alias to the rowset view returned by the method, as shown in the following syntax:
> 
> DbObject.nodes('XQuery') AS TableAlias(ColumnAlias)****