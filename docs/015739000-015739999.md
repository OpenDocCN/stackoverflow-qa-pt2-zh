# StackOverflow 问答 15739000-15739999

# android - 向已存储在电话簿中的选定联系人 [收件人] 发送短信

> ID：15739004
> 
> 赞同：0
> 
> 时间：2013-04-01T06:55:32.803
> 
> 标签：android

我正在制作一个应用程序，在该应用程序中**我正在访问电话簿**，*然后选择一个联系人向该特定收件人发送短信*，但是每当我尝试发送短信时，我都会在我的代码的 Catch 块中给出*错误消息*失败案例：" "**短信失败，请稍后再试！**“”

**注意：**我也在真实设备上尝试过这个，并且在那里遇到同样的问题......以及。

**联系.java::**

```
 public interface Contact {

public int getId();

public String getName();

public List<RawContact> getRawContacts(); 
```

}

**生日编辑器.java::**

```
public class BirthdayEditor extends Activity implements OnItemClickListener {
private static final int CREATE_BIRTHDAY = 0;
private static final int EDIT_BIRTHDAY = 1;
private static final int DELETE_BIRTHDAY = 2;
private ImageButton saveGreeting;

public static final String CONTACT_ID = "contact_id";
private static final int NO_CONTACT_ID = Integer.MIN_VALUE;

private TextView name;
private ListView list;
private Database db;
private Contact contact;

ImageButton buttonSend;
EditText textSMS;

private Map<String, AuthenticatorDescription> map = new LinkedHashMap<String, AuthenticatorDescription>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editor);

    // bind GUI components
    this.name = (TextView) findViewById(R.id.editor_name);
    this.list = (ListView) findViewById(R.id.editor_list);

    // check if contact id is valid
    this.db = new Database(getContentResolver());
    final int contactId = getIntent().getIntExtra(CONTACT_ID, NO_CONTACT_ID);
    this.contact = this.db.getContact(contactId);
    if (this.contact == null) {
        finish();
    }
    this.name.setText(this.contact.getName());

    // pre-load information about all account types
    AuthenticatorDescription[] authTypes = AccountManager.get(this).getAuthenticatorTypes();
    for (AuthenticatorDescription authDesc : authTypes) {
        this.map.put(authDesc.type, authDesc);
    }

    // bind list events
    this.list.setOnItemClickListener(this);
    this.list.setOnCreateContextMenuListener(this);

    // create the GUI
    updateView();               

    buttonSend = (ImageButton) findViewById(R.id.buttonSend);
    textSMS = (EditText) findViewById(R.id.editTextSMS);
    buttonSend.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

          String recepient = contact.getName().toString();
              Log.d(LOG_TAG, "onClick(" + recepient + ")");
          String sms = textSMS.getText().toString();

          try {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(recepient, null, sms, null, null);
            Toast.makeText(getApplicationContext(), "SMS Sent!",
                        Toast.LENGTH_LONG).show();
          } catch (Exception e) {
            Toast.makeText(getApplicationContext(),
                "SMS faild, please try again later!",
                Toast.LENGTH_LONG).show();
            e.printStackTrace();
          }

        }
    });
} 
```

**Logcat 说：**

```
04-01 14:12:29.211: D/BirthdayEditor(950): ButtonSend onClick RECEPIENT Stephen
04-01 14:12:29.211: D/BirthdayEditor(950): ButtonSend onClick MESSAGE Congrats
04-01 14:12:29.251: W/System.err(950): java.lang.NullPointerException
04-01 14:12:29.261: W/System.err(950):  at android.os.Parcel.readException(Parcel.java:1431)
04-01 14:12:29.261: W/System.err(950):  at android.os.Parcel.readException(Parcel.java:1379)
04-01 14:12:29.261: W/System.err(950):  at com.android.internal.telephony.ISms$Stub$Proxy.sendText(ISms.java:434)
04-01 14:12:29.261: W/System.err(950):  at android.telephony.SmsManager.sendTextMessage(SmsManager.java:87)
04-01 14:12:29.261: W/System.err(950):  at com.chr.tatu.sample.friendslist.contacts.BirthdayEditor$2.onClick(BirthdayEditor.java:110)
04-01 14:12:29.261: W/System.err(950):  at android.view.View.performClick(View.java:4202)
04-01 14:12:29.272: W/System.err(950):  at android.view.View$PerformClick.run(View.java:17340)
04-01 14:12:29.272: W/System.err(950):  at android.os.Handler.handleCallback(Handler.java:725)
04-01 14:12:29.272: W/System.err(950):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-01 14:12:29.272: W/System.err(950):  at android.os.Looper.loop(Looper.java:137)
04-01 14:12:29.272: W/System.err(950):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-01 14:12:29.272: W/System.err(950):  at java.lang.reflect.Method.invokeNative(Native Method)
04-01 14:12:29.272: W/System.err(950):  at java.lang.reflect.Method.invoke(Method.java:511)
04-01 14:12:29.272: W/System.err(950):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-01 14:12:29.272: W/System.err(950):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
```

**清单.xml：**

我已授予*发送短信的权限*

```
 <uses-permission 
    android:name="android.permission.SEND_SMS" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:25:00.380

@吉米希尔

你仍然得到接收者的名字，因为你正在使用你的 Contact.java 类的**getName()方法下面的行：**

```
 String recepient = contact.getName().toString(); 
```

**但是要使用getRawContacts()**获取数字代替名称，您只需将上面的行替换为下面的行，因为通过使用这一行，您可以从代码中的联系人列表中获取原始联系人，只需再次检查 Contact.java：

```
 String recepient = contact.getRawContacts().toString(); 
```

我相信它会对你有用，如果出现任何问题，请告诉我......

# opengl - 使用 OpenGL 加载器生成器优于 GLEW 的性能优势？

> ID：15739005
> 
> 赞同：5
> 
> 时间：2013-04-01T06:55:38.733
> 
> 标签：opengl, glew

标题几乎说明了一切。我昨天在浏览 Stack 时第一次听说了[OpenGL Loader Generator](https://bitbucket.org/alfonse/glloadgen/wiki/Home)项目，我检查了它以研究它比[GLEW](http://glew.sourceforge.net/)有什么优势。在项目网站上，他们声明：

> 这个加载器生成系统用于为您的特定需求创建 OpenGL 头文件和加载代码。与其将每个扩展和核心枚举器/函数都放在一个巨大的标题中，不如只得到你真正想要和要求的东西。

虽然我知道这种方法肯定比 GLEW 更简洁，但我不明白这种方法如何改进编译时间、应用程序性能或与 OpenGL 驱动程序的交互。此外，使用它的过程似乎需要更多维护，因为每次需要使用附加扩展时都必须重新生成扩展源。在使用 GLEW 时（与不使用相比）我从未注意到任何性能损失，所以我很好奇为什么这个项目的开发人员觉得他们有问题需要解决。我错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T08:55:36.797

为了全面披露，我编写了 OpenGL Loader Generator。

> 虽然我知道这种方法肯定比 GLEW 更简洁，但我不明白这种方法如何改进编译时间、应用程序性能或与 OpenGL 驱动程序的交互。

它是一个 OpenGL 函数加载库。除了[“Function CPP”风格](https://bitbucket.org/alfonse/glloadgen/wiki/Style_Function_CPP)*的*内联转发函数之外，它只是调用函数指针。就像 GLEW 一样。

两者之间唯一可能的性能差异在于加载这些函数所需的时间（即：初始化例程）。由于这是一个初始化函数，它的一次性性能是无关紧要的，除非它非常慢。

简而言之，提高“应用程序性能或与 OpenGL 驱动程序的交互”不是该工具的*目的。*它存在干净的标头，其中包含您打算使用的 OpenGL 部分。此外，它还可以让您轻松使用 GLEW 或 GLee 风格的函数初始化，只要您认为合适。

至于“编译时间”性能，我想编译一个 100KB 的标头比一个 800KB 的标头便宜。但由于 GLEW 和我的工具都没有使用元编程或模板等高级 C++ 技术，因此任何编译时间节省的可能性都非常小。

> 此外，使用它的过程似乎需要更多维护，因为每次需要使用附加扩展时都必须重新生成扩展源。

这当然是使用该工具的一种方式。使用该工具的另一种方法是提前找出适合您的扩展，然后使用它们。

一般来说，当您编写真正的 OpenGL 应用程序时，您会针对特定的 OpenGL 版本编写该代码。此版本由您要支持的最低硬件决定。如果你想支持从过时的 Intel 945“GPU”到 AMD 和 NVIDIA 最新的高端产品的所有东西，你必须针对 GL 1.4（也许是 2.1，如果你感觉*真的很*勇敢并且愿意做很多事情的话）针对英特尔驱动程序进行测试）。如果您想支持更新的硬件，您可以针对 OpenGL 3.x 版本之一（3.1）编写代码，具体取决于您希望为英特尔 GPU 提供多少支持。

从那里，您可以决定您打算支持哪些更高版本的可选功能，或者仅支持特定于硬件的功能。您有一个您打算使用的东西的列表，因此您检查这些扩展并根据需要有条件地使用或不使用它。

这就是该工具的用途：当您确定了一组特定的扩展和 OpenGL 版本时。如果您想更加灵活，您可以只生成一个包含更多扩展的标头，即使您不使用它们。或者你可以使用 GLEW；我的工具是一个*选项*，而不是一个要求。

该工具并不意味着适合所有人。它适用于那些知道自己想要什么的人，他们想要拥有不包含[他们](http://www.opengl.org/registry/specs/ARB/texture_env_crossbar.txt)[永远](http://www.opengl.org/registry/specs/ARB/texture_env_dot3.txt)[不会使用的](http://www.opengl.org/registry/specs/EXT/direct_state_access.txt)[千字节](http://www.opengl.org/registry/specs/ARB/vertex_blend.txt) [垃圾](http://www.opengl.org/registry/specs/ARB/matrix_palette.txt) [扩展](http://www.opengl.org/registry/specs/ARB/texture_env_combine.txt) 的标题。

它也适用于自动完成等。有了一个*干净*的标题，你必须筛选出更少的垃圾，你根本不想跟注。哦，它有助于*防止*您意外使用您忘记检查的扩展程序中的某些内容。因为它不在您的标头中，所以任何调用此类函数或使用这些枚举的尝试都将导致编译器错误。

另一个好处是易于使用。看看[这个网站上有多少关于 GLEW 和“未解决的外部”](https://stackoverflow.com/search?q=GLEW+unresolved+external)的问题。出现这种情况的部分原因是 GLEW 可以编译为静态或动态库。因此，您必须在代码中使用 a`#define`在它们之间切换（在 Windows 上）。那很糟。

使用生成器，您只需将标题和源代码粘贴到您的常规构建中。没有要构建或链接的库。只是几个额外的头文件和源文件。

这就是我编写该工具的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:30:36.993

我认为没有明显的性能提升，但是您只需使用 OpenGL 函数声明获得更小的头文件/源文件。

GLEW/GLEE 在库中具有*所有*版本组合 + 扩展 - 这使得它非常大。例如 GLEW 1.7 的头文件有 834kb。

OpenGL Loader为所需的 OpenGL 版本制作*自定义文件。*这些要小得多（例如（对于核心 opengl 4.2，大约 120kb 标头 + 130kb 源文件）。这将比GLEW 库**编译得更快**，当然它的输出代码更小。

# java - 给定相对或绝对路径及其相对的绝对路径时如何获取文件的绝对路径

> ID：15739007
> 
> 赞同：1
> 
> 时间：2013-04-01T06:55:41.327
> 
> 标签：java, file

假设我有一个绝对的“基本”路径：

```
/home/someone/dir1/dir2/ 
```

用户可以向我传递一个新路径，该路径可以是绝对路径，也可以是相对于基本路径的相对路径，因此以下内容均有效：

```
..
/home/someone/dir1/ 
```

我如何让 java 给我正确的绝对路径，即对于这两种情况：

```
/home/someone/dir1/ 
```

并以独立于平台的方式做到这一点？

我尝试了以下方法：

```
File resolvedFile = new File((new File(basePath).toURI().resolve(new File(newPath).toURI()))); 
```

但是，如果 newPath 是相对的，newFile(newPath) 会根据当前工作目录自动解析它，而不是我想要提供的 basePath。

有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:44:14.627

回答我自己的问题..

似乎可以使用 Path 在 java 7 中完成：

```
Path p1 = Paths.get("/home/joe/foo");
// Result is /home/joe/foo/bar
System.out.format("%s%n", p1.resolve("bar")); 
```

由于我无法为我的 mac 10.5.8 获​​取 java 7，我将使用类似的东西（NB 没有经过全面测试！）：

`static String getAbsolutePath(String basePath, String relativeOrAbsolutePath) throws IOException {`

 ````
 boolean isAbsolute = false;
    File relativeOrAbsoluteFile = new File(relativeOrAbsolutePath);

    if (relativeOrAbsoluteFile.isAbsolute()){
        isAbsolute = true;
    }

    if (isAbsolute){
        return relativeOrAbsolutePath;
    }
    else {
        File absoluteFile = new File(basePath, relativeOrAbsolutePath);
        return absoluteFile.toString();
    }

} 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:01:56.423

看一眼[`File#getCanonicalPath`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath%28%29)

来自 JavaDocs：

> 返回此抽象路径名的规范路径名字符串。规范路径名是绝对且唯一的。规范形式的精确定义取决于系统。如果需要，此方法首先将此路径名转换为绝对形式，就像调用 getAbsolutePath() 方法一样，然后以系统相关的方式将其映射到其唯一形式。这通常涉及删除冗余名称，例如“。” 和路径名中的“..”，解析符号链接（在 UNIX 平台上），并将驱动器号转换为标准大小写（在 Microsoft Windows 平台上）。
> 
> 每个表示现有文件或目录的路径名都有唯一的规范形式。每个表示不存在的文件或目录的路径名也具有唯一的规范形式。不存在的文件或目录的路径名的规范形式可能与创建文件或目录后相同路径名的规范形式不同。类似地，现有文件或目录的路径名的规范形式可能与删除文件或目录后相同路径名的规范形式不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:46:41.463

在你的代码中试试这个。

System.setProperty("user.dir", "your_base_path")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T16:16:55.553

不确定这是否适用于我的设置（Windows 平台，JRE 1.6.x）

但以下工作就像一个把戏：

```
File path = new File(relativeOrAbsoluteGoldpath);
absolutePath = path.getCanonicalPath(); 
```

where`relativeOrAbsoluteGoldpath`是一个任意路径名，它可能是相对的，也可能不是相对的。`

# android - 使用画布在弧内绘制文本

> ID：15739009
> 
> 赞同：12
> 
> 时间：2013-04-01T06:55:43.577
> 
> 标签：android, android-canvas

我正在一个android应用程序中绘制一个圆圈并将它们平均分割，并将文本绑定在圆圈的分割部分内（如picart）。我画了一个圆圈并将它们平均划分，但我想在划分的部分内绑定文本。请查看我的代码并给出解决方案。提前致谢。

![在此处输入图像描述](https://i.stack.imgur.com/5vnq8.png)

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    float values[] = { 130, 130, 130, 130, 130 };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        LinearLayout linear = (LinearLayout) findViewById(R.id.linearlay);
        values = calculateData(values);
        linear.addView(new MyGraphview(this, values));
    }

    private float[] calculateData(float[] data) {

        float total = 0;
        for (int i = 0; i < data.length; i++) {
            total += data[i];
        }
        for (int i = 0; i < data.length; i++) {
            data[i] = 360 * (data[i] / total);
        }
        return data;

    }

    public class MyGraphview extends View {

        private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);     
        private float[] value_degree;
        private int[] COLORS = { Color.YELLOW, Color.GREEN, Color.WHITE,
                Color.CYAN, Color.RED };
        RectF rectf = new RectF(10, 10, 300, 300);
        Rect rect = new Rect(10, 10, 300, 300);
        int temp = 0;
        String rotatedtext;
        Path path;

        public MyGraphview(Context context, float[] values) {
            super(context);
            path = new Path();
            value_degree = new float[values.length];
            for (int i = 0; i < values.length; i++) {
                value_degree[i] = values[i];
            }

            paint.setTextSize(16);
            rotatedtext = "Rotated  :)";
        }

        @Override
        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);

            for (int i = 0; i < value_degree.length; i++) {
                if (i == 0) {

                    paint.setColor(COLORS[i]);
                    canvas.drawArc(rectf, 0, value_degree[i], true, paint);

                } else {

                    temp += (int) value_degree[i - 1];
                    paint.setColor(COLORS[i]);
                    canvas.drawArc(rectf, temp, value_degree[i], true, paint); //

                }
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-14T02:37:49.813

尝试这个：

```
private String[] STRINGS = { "Yellow", "GREEN", "WHITE", "CYAN", "RED" }; // Array of strings, just for the sample

    @Override
    protected void onDraw(Canvas canvas) 
    {           
        super.onDraw(canvas);

        temp = 0;

        int centerX = (rect.left + rect.right) / 2;
        int centerY = (rect.top + rect.bottom) / 2;
        int radius = (rect.right - rect.left) / 2;

        radius *= 0.5; // 1 will put the text in the border, 0 will put the text in the center. Play with this to set the distance of your text.

        for (int i = 0; i < data.length; i++) 
        {
            if (i > 0) 
                temp += (int) data[i - 1]; // rewrote your code here a bit, to avoid duplicate code.

            paint.setColor(COLORS[i]);
            canvas.drawArc(rectf, temp, data[i], true, paint);

            paint.setColor(Color.BLACK); // set this to the text color.
            float medianAngle = (temp + (data[i] / 2f)) * (float)Math.PI / 180f; // this angle will place the text in the center of the arc.
            canvas.drawText(STRINGS[i], (float)(centerX + (radius * Math.cos(medianAngle))), (float)(centerY + (radius * Math.sin(medianAngle))), paint);
        }
    } 
```

此外，为了获得更好的结果，请确保在绘制任何文本之前在绘图中设置 Align.CENTER 属性：

```
paint.setTextSize(16);
paint.setTextAlign(Align.CENTER); 
```

希望这可以帮助 ：）

# arrays - Groovy 将整数数组传递给 PLSQL

> ID：15739012
> 
> 赞同：0
> 
> 时间：2013-04-01T06:55:47.473
> 
> 标签：arrays, groovy, plsql, integer

我正在调用一个将输入作为数字数组的存储过程。

从 Groovy 方面，我将 int[] 传递给该存储过程。

但是我得到“无效的列类型”作为存储过程的结果。

有人可以建议我如何从 Groovy 端传递一组数字吗？

我在存储过程方面创建的 TYPE 是；创建或替换 TYPE NUMBER_LIST IS TABLE OF NUMBER；

groovy 中的 int[] 是；int[] boxIntArr = new int[5];

我们可以通过 boxIntArr 代替 NUMBER_LIST 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:00:02.943

You should be passing in an instance of [`java.sql.Array`](http://docs.oracle.com/javase/7/docs/api/java/sql/Array.html) rather than a raw `int[]`. You can convert the Java array to a SQL array with [`java.sql.Connection.createArrayOf()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#createArrayOf%28java.lang.String,%20java.lang.Object%5b%5d%29).

EDIT:

Oracle doesn't support the standard `Connection.createArrayOf()` method. Use the Oracle specific [`OracleConnection.createARRAY()`](http://docs.oracle.com/cd/E18283_01/appdev.112/e13995/oracle/jdbc/OracleConnection.html#createARRAY_java_lang_String__java_lang_Object_) method instead.

# c# - 在 .NET 中验证签名

> ID：15739015
> 
> 赞同：0
> 
> 时间：2013-04-01T06:55:55.417
> 
> 标签：c#, asp.net, vb.net

我正在使用 OPENSSL 使用 pem 文件（公钥）验证签名

```
openssl dgst -sha1 -verify pubkey.pem -signature signature.bin signedData.txt 
```

我想在 C#/VB.NET 中做同样的事情，而不使用任何 .NET 的 OPENSSL 包装器，而只使用 .NET。

怎么做？

# android - 如何从列表视图中的数据库中获取填充在列表充气器中的数据的 ID

> ID：15739016
> 
> 赞同：0
> 
> 时间：2013-04-01T06:55:56.890
> 
> 标签：android, database

我有一个带有editext和复选框的自定义列表视图。数据从数据库填充到列表中，我需要检查哪个复选框被选中并将该选中复选框的填充文本视图的ID存储到数据库中。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final TestListPojo objTest = testList.get(position);
    final String testitem = objTest.getTestname();
    barcode = objTest.getBarcode();
    if (convertView == null) {
        LayoutInflater layoutInflater = LayoutInflater.from(myContext);
        convertView = layoutInflater.inflate(R.layout.testlist_inflator,
                null);
        ViewHolder holder = new ViewHolder();
        holder.test = (TextView) convertView.findViewById(R.id.test);
        holder.ch_check = (CheckBox) convertView
                .findViewById(R.id.ch_check);
        holder.et_barcode = (EditText) convertView
                .findViewById(R.id.et_testbarcode);
        convertView.setTag(holder);
        if (!barcode.equalsIgnoreCase("") && !(barcode == null)) {
            holder.et_barcode.setText(barcode);
            /*for (int i = 0; i < barcode.length(); i++) {
                StringBuilder sb = new StringBuilder(barcode);
                // StringBuffer sb = new StringBuffer(barcode);
                String save=sb.append(",").append(i).toString();

            }
*/
        }

    }

    final ViewHolder holder = (ViewHolder) convertView.getTag();
    final TextView test = (TextView) convertView
            .findViewById(R.id.textView1);
    holder.test.setText(testitem);
    holder.test.setClickable(true);
    holder.test.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
        test.getText().toString();
        System.out.println(test.getText().toString());

        }
    });

    holder.ch_check
            .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    CheckBox ch = (CheckBox) buttonView;
                    if (ch.isChecked()) {

                        /*ch.get
                        System.out.println(ch.getImeActionLabel().toString());
*/
                    }

                }
            });

    return convertView;
}

static class ViewHolder {
    TextView test;
    CheckBox ch_check;
    EditText et_barcode;
}

}

| testname1   barcode1   checkbox |
| testname2   barcode1   checkbox |
|   '            '            '   |
|   '            '            '   |
|                                 |
|                                 | 
```

测试名称和条形码是从数据库中填充的，我需要检查是否选择了哪个测试。并更新在 db 中选择了这个测试。

# spring - h:commandLink 的 action 属性是否可以有多个操作？

> ID：15739017
> 
> 赞同：0
> 
> 时间：2013-04-01T06:55:58.907
> 
> 标签：spring, jsf, commandlink

标签的`action`属性可以有多个动作吗？`h:commandLink`我想在单击`h:commandLink`标签呈现的链接时执行两个操作。需要在 Spring bean 中执行一个动作，并弹出一个显示某个网页的窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:04:25.250

不，不可能在`action`属性中调用两个方法。我不认为这是主要的缺点。将逻辑封装在托管 bean 中的一个方法中，并从该方法调用这些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:30:23.450

不，commandLink 操作中不可能有多个操作。如果你想执行一些逻辑**并**显示一个弹出窗口，只需将你的逻辑包装在一个方法中，并在底部添加一个 FacesMessage 到上下文中。您可以对 h:messages 组件进行 AJAX 部分刷新，以将消息显示为“弹出窗口”，而无需重新加载页面。

# primefaces - Primefaces Ajax 组件问题

> ID：15739021
> 
> 赞同：-2
> 
> 时间：2013-04-01T06:56:05.740
> 
> 标签：primefaces

框架：Primefaces 3.4.2

问题：我的代码有一个非 ajax 命令按钮和两个 Ajax 命令按钮。当我通过非 ajax 按钮提交表单时，一旦再次加载页面（来到同一页面并更新了一些其他数据）。现在，如果我单击 Ajax 按钮，它们将不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T08:30:56.340

可能您已经忘记了该`update=""`属性，但是很难判断您是否没有附加代码。

# c# - 如何创建多选

> ID：15739022
> 
> 赞同：1
> 
> 时间：2013-04-01T06:56:07.510
> 
> 标签：c#, winforms, user-controls, controls

在一个表单上，我有多个`usercontrols`在每次`button`点击时动态创建的表单。我希望用户能够选择它们以复制删除等。就像我们用鼠标选择图标，然后删除它们。为此，我创建了另一个用户控件，它是在鼠标位置创建的。我不知道如何绘制该用户控件。到目前为止我的代码：

```
//method that creates usercontrols
 private void _butttnAddControls_Click(object sender, EventArgs e)
    {
            TControl tcontrol = new TControl();               
            tcontrol.BringToFront();
        }
protected override void OnMouseDown(MouseEventArgs e)
    {
        base.OnMouseDown(e);
        SelectPanel pselect = new SelectPanel();//pselect is the control used to create     the rectangle for selection 
        pselect.Visible = true;
        Point p = PointToClient(Cursor.Position);
        pselect.Location = p;
        pselect.SelectionPanel = true;
        this.Controls.Add(pselect);
    }
     protected override void OnMouseUp(MouseEventArgs e)
    {
        base.OnMouseUp(e);
        pselect.Visible = false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:00:38.023

如果您使用的是 WinForms，您可以使用控件的`DrawToBitmap()`方法来获取您动态创建的用户控件的图像。

检查此链接以获取更多信息[Control.DrawToBitmap 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx)

然后您可以将所有控件数组绘制到图片框中，并在那里使用鼠标事件。

# python - Python：当我使用 grep 时出现 UnicodeEncodeError

> ID：15739029
> 
> 赞同：13
> 
> 时间：2013-04-01T06:56:38.493
> 
> 标签：python, grep, python-requests

我正在使用一个简单的 python 脚本来获取我的 CID 的预订结果: **`simple.py`**:

```
data = {"minorRev":"current minorRev #","cid":"xxx","apiKey":"xxx","customerIpAddress":"  ","creationDateStart":"03/31/2013","}

url = 'http://someservice/services/rs/'                      
req = requests.get(url,params=data)                        
print req                                                                 
print req.text                                                                
print req.status_code 
```

现在在命令提示符下，如果我这样做`python simple.py`，它会完美运行并打印`req.text`变量

但是，当我尝试做

```
python simple.py | grep pattern 
```

我明白了

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 1314: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-01T09:27:07.360

`print` **需要**在发送到 stdout 之前对字符串进行编码，但是当进程在管道中时，值为`sys.stdout.encoding`is `None`，因此`print`接收一个`unicode`对象，然后它尝试使用编解码器对该对象进行编码——如果此对象中`ascii`有非 ASCII 字符`unicode`，将引发异常。

`unicode`您可以在将所有对象发送到标准输出*之前*对其进行编码来解决此问题（但您需要猜测要使用哪个编解码器）。请参阅以下示例：

文件`wrong.py`：

```
# coding: utf-8

print u'Álvaro' 
```

结果：

```
alvaro@ideas:/tmp
$ python wrong.py 
Álvaro
alvaro@ideas:/tmp
$ python wrong.py | grep a
Traceback (most recent call last):
  File "wrong.py", line 3, in <module>
    print u'Álvaro'
UnicodeEncodeError: 'ascii' codec can't encode character u'\xc1' in position 0: ordinal not in range(128) 
```

文件`right.py`：

```
# coding: utf-8

print u'Álvaro'.encode('utf-8')
# unicode object encoded == `str` in Python 2 
```

结果：

```
alvaro@ideas:/tmp
$ python right.py 
Álvaro
alvaro@ideas:/tmp
$ python right.py | grep a
Álvaro 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-30T11:39:34.643

如果`sys.stdout.isatty()`为 false（输出被重定向到文件/管道），则`PYTHONIOENCODING`在脚本之外配置 envvar。始终打印 Unicode，不要在脚本中硬编码环境的字符编码：

```
$ PYTHONIOENCODING=utf-8 python simple.py | grep pattern 
```

# ruby - 循环遍历数组以搜索具有某些属性的元素 - 使用尽可能短/简洁的代码

> ID：15739030
> 
> 赞同：0
> 
> 时间：2013-04-01T06:56:42.503
> 
> 标签：ruby, arrays

我的**check_processors**方法应该通过一个处理器数组（由**processor_list**参数提供）并输出一个包含相同处理器的新数组。

**processor_list**参数是*nil*或处理器数组，例如：

```
 [
      <Processor _id: 5158713883c336812100007f, _type: nil, created_at: 2013-03-31 17:24:08 UTC, updated_at: 2013-03-31 17:24:08 UTC, name: "my_mapping_processor", value: {"something"=>{"something_else"}}, type: "mapping", order: 0>,
      <Processor _id: 5158713883c3368121000080, _type: nil, created_at: 2013-03-31 17:24:08 UTC, updated_at: 2013-03-31 17:24:08 UTC, name: "my_presentation_processor", value: {"something"=>{"something_else"}}, type: "presentation", order: 1>,
      <Processor _id: 5348143r83c93641210d0080, _ty...
    ] 
```

check_processors方法应验证是否存在 2 个特定处理器（由处理器的**类型***属性*识别）。如果没有找到*type* == "mapping" 的处理器，**create_mapping_processor**应该它。或者，如果没有找到*type* == "presentation" 的处理器，**create_presentation_processor**应该创建它。

下面的代码可以工作，但它所做的工作非常简单，必须用更少的代码就可以实现。

```
 def check_processors(processor_list = nil)

      processors = []

      if processor_list == nil
        mapping_processor = create_mapping_processor
        presentation_processor = create_presentation_processor
        processors.push(mapping_processor)
        processors.push(presentation_processor)
      else
        mapping_processor_exists = false
        presentation_processor_exists = false
        processor_list.each do |processor|
          processors.push(processor)
          mapping_processor_exists = true if processor.type == "mapping"
          presentation_processor_exists = true if processor.type == "presentation"
        end

        if mapping_processor_exists == false
          mapping_processor = create_mapping_processor
          processors.push(mapping_processor)
        end

        if presentation_processor_exists == false
          presentation_processor = create_presentation_processor
          processors.push(presentation_processor)
        end
      end
      processors #=> [<Processor _id: 5158713883c336812100007f, _type: nil, created_at: 2013-03-31 17:24:08 UTC, updated_at: 2013-03-31 17:24:08 UTC, name: "my_mapping_processor", value: {"something"=>{"something_else"}}, type: "mapping", order: 0>, <Processor _id: 5158713883c3368121000080, _type: nil, created_at: 2013-03-31 17:24:08 UTC, updated_at: 2013-03-31 17:24:08 UTC, name: "my_presentation_processor", value: {"something"=>{"something_else"}}, type: "presentation", order: 1>, <Processor _id: 5348143r83c93641210d0080, _ty...]
    end

    def create_mapping_processor
      mapping_processor = Processor.new(:name => "my_mapping_processor", :value => {"something"=>{"something_else"}}, :type => "mapping", :order => 0)
      mapping_processor
    end

    def create_presentation_processor
      presentation_processor = Processor.new(:name => "my_presentation_processor", :value => {"something"=>{"something_else"}}, :type => "presentation", :order => 1)
      presentation_processor
    end 
```

# javascript - 不同颜色的Javascript活动状态

> ID：15739031
> 
> 赞同：0
> 
> 时间：2013-04-01T06:56:43.743
> 
> 标签：javascript, css

我想为所选状态制作一个具有三种不同颜色的导航菜单 - 每个菜单项一个。

我到处搜索，但我发现的只是这段代码，只有一个选定的状态。

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<style type="text/css">
 .one{
   background-color:none;
   color:black;
}
  .one_active a {
      color:red;
}
  .two_active a {
      color:yellow;
}
  .three_active a {
      color:#e3e3e3;
}

</style>
<script type="text/javascript">
    var divSelected = null;
    function SelectOrUnSelect(a) {
        if (divSelected != null) divSelected.className = 'one';
        divSelected = document.getElementById(a);
        document.getElementById(a).className = 'one_active';
    }   
</script>

</head>
<body>
 <ul>
  <li class="one" id="t1"><a href="#1" onclick="SelectOrUnSelect('t1')">one</a></li>
  <li class="two" id="t2"><a href="#2" onclick="SelectOrUnSelect('t2')">two</a></li>
  <li class="three" id="t3"><a href="#3" onclick="SelectOrUnSelect('t3')">three</a></li>

 </ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:44:41.603

这可能是您想要的，请参阅演示。

```
var items = document.getElementsByTagName('li');

for(var i = 0;i < items.length;i++){
    items[i].onclick = function(){
        var siblings = this.parentNode.childNodes;
        for(var j = 0;j < siblings.length;j++){
            if(siblings[j].selected){
                siblings[j].className =  siblings[j].className.replace('_active', '');
                siblings[j].selected = false;
            }
        }
        this.className = this.className + '_active';
        this.selected = true;
    }
} 
```

演示：http: [//jsfiddle.net/louisbros/H4zwj/](http://jsfiddle.net/louisbros/H4zwj/)

# linux - 如何在 linux 上获取网络接口的正常运行时间/创建时间

> ID：15739033
> 
> 赞同：0
> 
> 时间：2013-04-01T06:56:49.380
> 
> 标签：linux, interface, uptime

您能否帮助获取，如何获取 linux 上网络接口的正常运行时间或创建时间？

谢谢小号萨拉特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:44:21.333

AFAIK 没有针对 Linux 中的网络接口的标准正常运行时间跟踪。大多数 linux 发行版都允许对网络接口事件进行挂钩，您可以使用这些挂钩来设置自己的跟踪（这些是特定于发行版的）。

请参阅此答案：[获取有关 Linux 上网络接口更改的通知](https://stackoverflow.com/questions/2261759/get-notified-about-network-interface-change-on-linux)

# excel - 从 XLS 到 CSV - 宏另存为可视选项

> ID：15739036
> 
> 赞同：1
> 
> 时间：2013-04-01T06:57:07.897
> 
> 标签：vba, excel, excel-2010, vba

我很高兴和优秀的程序员一起来到这里，希望我能学到很多东西。我也是这种编程的新手，所以对于给您带来的不便，我深表歉意。

我正在使用下面的[vba](/questions/tagged/vba "显示标记为“vba”的问题")代码将我的文件`XLS`从`CSV`. 将`xls`文件转换为`csv`格式后，它会自动将我新创建的`csv`文件保存在与原始文件相同的目录中`xls`。

我想为我的文件名提供一个**`Save As`**选项`csv`

先感谢您。

```
' ---------------------- Directory Choosing Helper Functions -----------------------
' Excel and VBA do not provide any convenient directory chooser or file chooser
' dialogs, but these functions will provide a reference to a system DLL
' with the necessary capabilities
Private Type BROWSEINFO ' used by the function GetFolderName
    hOwner As Long
    pidlRoot As Long
    pszDisplayName As String
    lpszTitle As String
    ulFlags As Long
    lpfn As Long
    lParam As Long
    iImage As Long
End Type

Private Declare Function SHGetPathFromIDList Lib "shell32.dll" _
    Alias "SHGetPathFromIDListA" (ByVal pidl As Long, ByVal pszPath As String) As Long
Private Declare Function SHBrowseForFolder Lib "shell32.dll" _
    Alias "SHBrowseForFolderA" (lpBrowseInfo As BROWSEINFO) As Long

Function GetFolderName(Msg As String) As String
' returns the name of the folder selected by the user
Dim bInfo As BROWSEINFO, path As String, r As Long
Dim X As Long, pos As Integer
    bInfo.pidlRoot = 0& ' Root folder = Desktop
    If IsMissing(Msg) Then
        bInfo.lpszTitle = "Select a folder."
        ' the dialog title
    Else
        bInfo.lpszTitle = Msg ' the dialog title
    End If
    bInfo.ulFlags = &H1 ' Type of directory to return
    X = SHBrowseForFolder(bInfo) ' display the dialog
    ' Parse the result
    path = Space$(512)
    r = SHGetPathFromIDList(ByVal X, ByVal path)
    If r Then
        pos = InStr(path, Chr$(0))
        GetFolderName = Left(path, pos - 1)
    Else
        GetFolderName = ""
    End If
End Function
'---------------------- END Directory Chooser Helper Functions ----------------------

Public Sub DoTheExport()
Dim FName As Variant
Dim Sep As String
Dim wsSheet As Worksheet
Dim nFileNum As Integer
Dim csvPath As String

Sep = ";"

csvPath = Application.ActiveWorkbook.path

Dim brojac As Integer
brojac = 0
For Each wsSheet In Worksheets
If brojac > 0 Then Exit For
    wsSheet.Activate
        nFileNum = FreeFile
        Open csvPath & "\" & _
          Left(ActiveWorkbook.Name, Len(ActiveWorkbook.Name) - 5) & ".csv" For Output As #nFileNum    ' wsSheet.Name
        ExportToTextFile CStr(nFileNum), Sep, False
        Close nFileNum
    brojac = brojac + 1
Next wsSheet

End Sub

Public Sub ExportToTextFile(nFileNum As Integer, _
Sep As String, SelectionOnly As Boolean)

Dim WholeLine As String
Dim RowNdx As Long
Dim ColNdx As Integer
Dim StartRow As Long
Dim EndRow As Long
Dim StartCol As Integer
Dim EndCol As Integer
Dim CellValue As String

Application.ScreenUpdating = False
On Error GoTo EndMacro:

If SelectionOnly = True Then
With Selection
StartRow = .Cells(1).Row
StartCol = .Cells(1).Column
EndRow = .Cells(.Cells.Count).Row
EndCol = .Cells(.Cells.Count).Column
End With
Else
With ActiveSheet.UsedRange
StartRow = .Cells(1).Row
StartCol = .Cells(1).Column
EndRow = .Cells(.Cells.Count).Row
EndCol = .Cells(.Cells.Count).Column
End With
End If

For RowNdx = StartRow To EndRow
WholeLine = ""
For ColNdx = StartCol To EndCol
If Cells(RowNdx, ColNdx).Value = "" Then
CellValue = ""
Else
CellValue = Cells(RowNdx, ColNdx).Value
End If
WholeLine = WholeLine & CellValue & Sep
Next ColNdx
WholeLine = Left(WholeLine, Len(WholeLine) - Len(Sep))
Print #nFileNum, WholeLine
Next RowNdx

EndMacro:
On Error GoTo 0
Application.ScreenUpdating = True

End Sub 
```

问题大概就在这里。这部分代码必须重新编写或更正。这是调用其他函数的主要函数。

```
Public Sub DoTheExport()
Dim FName As Variant
Dim Sep As String
Dim wsSheet As Worksheet
Dim nFileNum As Integer
Dim csvPath As String

Sep = ";"

csvPath = Application.ActiveWorkbook.path

Dim brojac As Integer
brojac = 0
For Each wsSheet In Worksheets
If brojac > 0 Then Exit For
    wsSheet.Activate
        nFileNum = FreeFile
        Open csvPath & "\" & _
          Left(ActiveWorkbook.Name, Len(ActiveWorkbook.Name) - 5) & ".csv" For Output As #nFileNum    ' wsSheet.Name
        ExportToTextFile CStr(nFileNum), Sep, False
        Close nFileNum
    brojac = brojac + 1
Next wsSheet

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:43:22.567

1.  此更新后的代码为您提供了 SaveAs 名称选项（默认为*WorkbookName.csv*）
2.  更有效的代码使用变体数组来制作下面的 csv。

这些是三个关键更新行：

```
strFileName = Application.GetSaveAsFilename(Left$(ActiveWorkbook.Name, Len(ActiveWorkbook.Name) - 5), "CSV (Comma delimited) (*.csv), *.csv")
If strFileName = "False" Then Exit Sub
Open strFileName For Output As #nFileNum 
```

**更新代码**

```
Public Sub DoTheExport()
Dim FName As Variant
Dim Sep As String
Dim wsSheet As Worksheet
Dim nFileNum As Integer
Dim csvPath As String
Dim strFileName As String

Sep = ";"
csvPath = Application.ActiveWorkbook.path

Dim brojac As Long
brojac = 0
For Each wsSheet In Worksheets
If brojac > 0 Then Exit For
    wsSheet.Activate
        nFileNum = FreeFile
        strFileName = Application.GetSaveAsFilename(Left$(ActiveWorkbook.Name, Len(ActiveWorkbook.Name) - 5), "CSV (Comma delimited) (*.csv), *.csv")
        If strFileName = "False" Then Exit Sub
        Open strFileName For Output As #nFileNum
        ExportToTextFile CStr(nFileNum), Sep, False
        Close nFileNum
    brojac = brojac + 1
Next wsSheet
End Sub 
```

**更高效的 csv 代码**

从[使用 Excel VBA 创建和写入 CSV 文件](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_3509-Creating-and-Writing-to-a-CSV-File-Using-Excel-VBA.html)

1.  此代码必须从常规 VBA 代码模块运行。否则，如果用户尝试从`ThisWorkbook`使用`Const`.
2.  值得注意的是`ThisWorkbook`，Sheet 和 Sheet 代码部分应仅用于事件编码，“正常”VBA 应从标准代码模块运行。
3.  请注意，出于示例代码的目的，CSV 输出文件的文件路径被“硬编码”为： `C:\test\myfile.csv`在代码的顶部。您可能希望以编程方式设置输出文件，例如作为函数参数。
4.  如前面提到的; 例如，此代码*转置列和行*；也就是说，输出文件包含所选范围内每一列的一个 CSV 行。通常，CSV 输出将逐行显示，与屏幕上可见的布局相呼应，但我想证明使用 VBA 代码生成输出提供的选项超出了可用的选项，例如，使用`Save As... CSV Text`菜单选项。

**代码**

```
Const sFilePath = "C:\test\myfile.csv"
Const strDelim = ","
Sub CreateCSV_Output()
    Dim ws As Worksheet
    Dim rng1 As Range
    Dim X
    Dim lRow As Long
    Dim lCol As Long
    Dim strTmp As String
    Dim lFnum As Long

    lFnum = FreeFile
    Open sFilePath For Output As lFnum

    For Each ws In ActiveWorkbook.Worksheets
        'test that sheet has been used
        Set rng1 = ws.UsedRange
        If Not rng1 Is Nothing Then
            'only multi-cell ranges can be written to a 2D array
            If rng1.Cells.Count > 1 Then
                X = ws.UsedRange.Value2
                'The code TRANSPOSES COLUMNS AND ROWS by writing strings column by column
                For lCol = 1 To UBound(X, 2)
                    'write initial value outside the loop
                     strTmp = IIf(InStr(X(1, lCol), strDelim) > 0, """" & X(1, lCol) & """", X(1, lCol))
                    For lRow = 2 To UBound(X, 1)
                        'concatenate long string & (short string with short string)
                        strTmp = strTmp & (strDelim & IIf(InStr(X(lRow, lCol), strDelim) > 0, """" & X(lRow, lCol) & """", X(lRow, lCol)))
                    Next lRow
                    'write each line to CSV
                    Print #lFnum, strTmp
                Next lCol
            Else
                Print #lFnum, IIf(InStr(ws.UsedRange.Value, strDelim) > 0, """" & ws.UsedRange.Value & """", ws.UsedRange.Value)
            End If
        End If
    Next ws

    Close lFnum
    MsgBox "Done!", vbOKOnly

End Sub

Sub CreateCSV_FSO()
    Dim objFSO
    Dim objTF
    Dim ws As Worksheet
    Dim lRow As Long
    Dim lCol As Long
    Dim strTmp As String
    Dim lFnum As Long

    Set objFSO = CreateObject("scripting.filesystemobject")
    Set objTF = objFSO.createtextfile(sFilePath, True, False)

    For Each ws In ActiveWorkbook.Worksheets
        'test that sheet has been used
        Set rng1 = ws.UsedRange
        If Not rng1 Is Nothing Then
            'only multi-cell ranges can be written to a 2D array
            If rng1.Cells.Count > 1 Then
                X = ws.UsedRange.Value2
                'The code TRANSPOSES COLUMNS AND ROWS by writing strings column by column
                For lCol = 1 To UBound(X, 2)
                    'write initial value outside the loop
                    strTmp = IIf(InStr(X(1, lCol), strDelim) > 0, """" & X(1, lCol) & """", X(1, lCol))
                    For lRow = 2 To UBound(X, 1)
                        'concatenate long string & (short string with short string)
                        strTmp = strTmp & (strDelim & IIf(InStr(X(lRow, lCol), strDelim) > 0, """" & X(lRow, lCol) & """", X(lRow, lCol)))
                    Next lRow
                    'write each line to CSV
                    objTF.writeline strTmp
                Next lCol
            Else
                objTF.writeline IIf(InStr(ws.UsedRange.Value, strDelim) > 0, """" & ws.UsedRange.Value & """", ws.UsedRange.Value)
            End If
        End If
    Next ws

    objTF.Close
    Set objFSO = Nothing
    MsgBox "Done!", vbOKOnly

End Sub 
```

# c# - 为什么我的 C# 标签文本值不会更新？

> ID：15739038
> 
> 赞同：10
> 
> 时间：2013-04-01T06:57:19.493
> 
> 标签：c#, winforms, visual-studio-2012

我设置了 ac# 程序，如果选中复选框，它应该接受数量输入。然后它将数量乘以价格，并用总成本更新相应的标签。

但是，当我运行程序时，它不会更新标签。我运行了调试器，系统中标签的 .text 值是正确的，但它仍然没有出现在实际表单上。

Visual Studio 中是否存在阻止呈现更改的标签属性？

这是负责更新 label.Text 值的片段

```
 if (chkSesame.Checked)
    {
        intSesameQty = Convert.ToInt32(txtSesameQty.Text);
        decSesameTotal = intSesameQty * decBAGEL_PRICE;
        lblSesameSeedTotal.Text = decSesameTotal.ToString("c");
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T07:24:47.657

`lblSesameSeedTotal.Refresh()`如果不了解更多关于表单结构以及如何调用代码的信息，除了在设置文本后尝试调用之外，很难给您任何其他建议。

调用 Refresh（MSDN [Control.Refresh](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx)链接）有效地使控件无效并强制运行时重绘控件，当然，这包括更新其文本。

您可能必须这样做的原因有很多；重绘是一项昂贵的操作，因此，一般来说，如果您在表单的其他地方处理事件，它可能不会更新某些控件。对于值趋于保持不变的标签和类似控件尤其如此（例如，带有文本的文本框的标签：*在此处输入名称*实际上不需要更改）。

# azure - DiagnosticMonitorTraceListener 在 Azure 中不起作用

> ID：15739039
> 
> 赞同：2
> 
> 时间：2013-04-01T06:57:30.527
> 
> 标签：azure, azure-diagnostics

我有一个使用 Azure 部署的应用程序，我正试图让普通的香草跟踪工作

我浏览了所有这些文章： [https ://stackoverflow.com/search?q=diagnosticmonitortracelistener](https://stackoverflow.com/search?q=diagnosticmonitortracelistener)

这是我的角色入口点：

```
public class WebRole :RoleEntryPoint {
    public override bool OnStart() {
        if (RoleEnvironment.IsAvailable) {
            LocalResource localResource = RoleEnvironment.GetLocalResource("MyCustomLogs");
            DirectoryConfiguration dirConfig = new DirectoryConfiguration();
            dirConfig.Container = "diagnostics-mycustomlogs-container";
            dirConfig.DirectoryQuotaInMB = localResource.MaximumSizeInMegabytes;
            dirConfig.Path = localResource.RootPath;
            DiagnosticMonitorConfiguration diagMonitorConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();
            diagMonitorConfig.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1.0);
            diagMonitorConfig.Directories.DataSources.Add(dirConfig);
            DiagnosticMonitor diagMonitor = DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagMonitorConfig);

            Trace.Listeners.Add(new Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener());
            Trace.AutoFlush = true;
            Trace.WriteLine("Role Starting");
        }
        return base.OnStart();
    }
} 
```

还将跟踪侦听器放在 global.asax.cs 中：

```
 if (RoleEnvironment.IsAvailable) {
            Trace.Listeners.Add(new Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener());
            Trace.AutoFlush = true;
        } 
```

我也试过直接粘贴到 web.config

```
 <trace>
     <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, 
            Microsoft.WindowsAzure.Diagnostics, 
            Version=1.8.0.0, 
            Culture=neutral, 
            PublicKeyToken=31bf3856ad364e35"
            name="AzureDiagnostics">
            <filter type="" />
</add> 
```

此目录在我的 Azure VM 中创建 `C:\Resources\Directory\d63aeab4198d458a9c0b1d0f818e4054.CorpQna.Web.MyCustomLogs`

这是在我的`ServiceDefinition.csdef`文件中：

```
<LocalResources>
  <LocalStorage name="MyCustomLogs" cleanOnRoleRecycle="false" sizeInMB="10" />
</LocalResources> 
```

当我`TextWriterTraceListener`在本地计算模拟器中添加一个时，它可以工作：

```
<trace autoflush="true">
  <listeners>
                    <add type="System.Diagnostics.TextWriterTraceListener" name="TextWriter"
                             initializeData="c:\trace.log" />
  </listeners>
</trace> 
```

但是，这在 Azure 上不起作用。（我怀疑权限？）

在这一点上，我处于静止状态。任何地方都没有错误，但也没有日志。在我的 Blob 存储中没有创建 Blob 的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:53:20.867

道格，你在这里混淆了几个不同的概念：

1.  诊断跟踪到文件
2.  `Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener`
3.  WAD 目录配置

在 .NET 中，诊断跟踪将写入所有已注册的侦听器。这`Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener`是一个跟踪侦听器，它基本上写入 Azure 存储中的 WADLogsTable 表。 `Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener`不会写入本地文件，例如您的 MyCustomLogs 文件夹。WAD`DirectoryConfiguration`将上传文件，但这实际上与 .NET 诊断跟踪没有任何关系，除非您还添加了`TextWriterTraceListener`.

因此，您的代码原样可能工作正常，但您在错误的位置查找数据。它不会位于来自 MyCustomLogs 文件夹的 blob 中，而是位于 WADLogsTable 表中。如果您希望跟踪也位于 MyCustomLogs 文件夹中，则可以添加另一个 TextWriterTraceListener 类型的侦听器，指向 MyCustomLogs 文件夹中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:07:32.123

您是否在服务配置中检查过是否使用正确的存储帐户进行诊断。

默认情况下，它指向本地开发存储。您可能必须使用有效的存储帐户进行更改。

```
 <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="UseDevelopmentStorage=true" /> 
```

# jquery - 在手风琴中一次打开一个标签

> ID：15739045
> 
> 赞同：1
> 
> 时间：2013-04-01T06:58:07.987
> 
> 标签：jquery, jquery-ui, css, accordion

我有一个手风琴，它工作得很好，但我需要的是一次只打开一个标签，这意味着当打开一个标签时，应该关闭另一个标签。

目前您可以看到我们可以通过单击选项卡链接打开所有选项卡。

代码在这里

```
$("#accordion > li > span").click(function() {
  $(this).siblings("div").slideToggle(250);
        $(this).toggleClass("active");

}); 
```

这是**[小提琴](http://jsfiddle.net/RX5J6/1/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:08:04.320

`**[LIVE DEMO](http://jsfiddle.net/RX5J6/5/)**`

```
$("#accordion > li > span").click(function() {
    $(this).closest('li').siblings().find('span').removeClass('active').next('div').slideUp(250);
    $(this).toggleClass("active").next('div').slideToggle(250);
}); 
```

* * *

或者像： `**[LIVE DEMO](http://jsfiddle.net/RX5J6/6/)**`

```
$("#accordion > li > span").click(function() {
    $(this).toggleClass("active").next('div').slideToggle(250)
    .closest('li').siblings().find('span').removeClass('active').next('div').slideUp(250);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T11:08:25.020

您还可以通过添加`beforeActivate`回调来关闭其他手风琴：

```
$( ".myAccordion" ).accordion({
      collapsible: true,
      active: false,
    heightStyle: "content",
    beforeActivate: function(event, ui) {
   $( ".myAccordion" ).not(this).accordion('option', 'active', false);
} 
```

# python - 是否可以使用哈希和范围键以外的字段查询 dynamodb

> ID：15739047
> 
> 赞同：0
> 
> 时间：2013-04-01T06:58:12.093
> 
> 标签：python, amazon-dynamodb

我正在使用 boto 在 python 中连接 dynamodb。我没有看到任何用于查询 dynamodb 的适当教程。

“我需要的是，我需要获取表的内容，其中名字或姓氏中存在名字，其中名字和姓氏是使用 dynamodb 的两个字段”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:46:22.200

DynamoDB 的[查询](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_Query.html)操作只允许您指定哈希和范围键。 [Scan](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_Scan.html)将允许您提供其他字段，但不建议将其用于一般应用程序使用。我对 boto 不熟悉，但是如果您想进一步过滤结果，则必须查询是否可以，然后在应用程序中对结果进行后处理。否则，您将不得不扫描，这将允许您`CONTAINS`一次在一个字段上使用比较。您不能同时检查两个字段，因为必须在两个字段中找到名称，而不仅仅是一个字段。`ScanFilter` 有关可能的更多信息，请参阅扫描页面上调用的表条目。

# javascript - 在移动视图中使用 jQuery 我应该使用多少个 jQuery 库？

> ID：15739050
> 
> 赞同：0
> 
> 时间：2013-04-01T06:58:24.203
> 
> 标签：javascript, jquery, jquery-mobile, jquery-plugins

我正在 ROR 中建立一个网站，对于移动视图，我正在使用 mobile_fu gem。

在我的移动视图设计师为我提供了一个包含大量使用 jQuery 滑块、jQuery 播放器、图像滑块、下拉菜单、光标等的设计。

所以我通过使用互联网上提供的 jQuery 插件来实现所有这些。但是现在我的项目除了默认的 jQuery 之外还包含 7 个 jQuery 库，我仍然认为这个数字会增加。

但是现在我担心来自移动设备的用户将不得不等待很长时间才能加载页面。

如果用户使用简单的 gprs 2G 网络或低带宽以及像 wifi 这样的高带宽，任何人都可以告诉我应该在我们的移动视图中使用的 jQuery 插件的最小或最大数量是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:17:15.743

对于必须拥有多少个库没有硬性规定。但是考虑到您的用户只有 2G 连接的情况，七个插件对于数据连接速度来说有点沉重。

如果用户有 3G 或 4G 接入，你可以去七个插件，因为没有太大问题。但再次记住入门级设备和中档设备将存在处理能力不足的问题。

或者考虑使用缓存清单在本地[缓存](http://www.html5rocks.com/en/tutorials/appcache/beginner/)您的 jQuery 框架、插件、其他 JS 文件等技术。这将使用户能够一次下载文件，下次文件将从手机的缓存存储中获取。

# ios - 在没有ARC的情况下，我需要在哪里释放iOS中的内存？

> ID：15739052
> 
> 赞同：0
> 
> 时间：2013-04-01T06:58:28.937
> 
> 标签：ios, objective-c, memory-management

我有一个方法并且不使用 ARC：

```
-(void)readAppPlist
{
    NSString *plistPath = [self getDataFileDestinationPath];
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    NSMutableDictionary *temp = (NSMutableDictionary *) [NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
    if (!temp) {
        NSLog(@"Error reading plist: %@, formatL %d", errorDesc, format);
    }
    items = [[temp objectForKey:@"Items"] mutableCopy];
} 
```

根据内存管理的规则，我需要在哪里释放变量 plistPath、plistXML、errorDesc、temp 的内存？我应该使用另一种方法，在此处释放它们还是将它们放入此类的 dealloc 全局方法中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T07:00:56.477

**假设**您正确遵循了命名约定（这可能是一个很大的飞跃），答案将是：

plistPath：否
plistXML：否
errorDesc：否
temp：否

规则是如果你`alloc` `copy`或`retain`它，你必须释放它（`new`算作`alloc`）

# android - 如何在特定视图上显示进度对话框

> ID：15739053
> 
> 赞同：1
> 
> 时间：2013-04-01T06:58:33.993
> 
> 标签：android

像这样的东西：

```
ProgressDialog pd = new ProgressDialog(this);
pd.setMessage("Loading");
pd.show(); 
```

将显示一个对话框，覆盖整个屏幕，使所有其他视图处于非活动状态。

如何在特定视图上显示对话框，例如在 ImageView 上说，直到图像被下载。同时保持其他视图处于活动状态。

**示例：亚马逊应用程序**

显示`Spinner/Progress dialog`为完全不同的视图，而其他视图是活动的（可点击）。它是某种自定义视图吗？

![在此处输入图像描述](https://i.stack.imgur.com/0wBeM.png)

**我尝试了什么：**

我试图将需要时间来加载的`ImageView`或类似的东西保留在不同的地方，直到加载，a like gets . 必须有一个非常简单的方法？`view``Fragment``view``spinner``image``animated(rotated)`

我试过 a ，`TextView`白色背景是动画的。`fragment``TextView`

![在此处输入图像描述](https://i.stack.imgur.com/ha3vU.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:10:46.510

对于自定义进度，您需要按照以下链接来帮助您创建所需的内容。

[带有消息的 Android 自定义 ProgressDialog](https://stackoverflow.com/questions/12115350/android-custom-progressdialog-with-message)

[http://www.hrupin.com/2011/09/how-to-make-custom-indeterminate-progressbar-in-android-or-how-to-change-progressbar-style-or-color](http://www.hrupin.com/2011/09/how-to-make-custom-indeterminate-progressbar-in-android-or-how-to-change-progressbar-style-or-color)

[ProgressBar/ProgressDialog 的自定义 Drawable](https://stackoverflow.com/questions/2819778/custom-drawable-for-progressbar-progressdialog)

希望这会帮助你。

# meteor - Meteor 的最佳分页模式

> ID：15739054
> 
> 赞同：8
> 
> 时间：2013-04-01T06:58:45.130
> 
> 标签：meteor, infinite-scroll

[分页模式](https://trello.com/card/pattern-for-easy-pagination/508721606e02bb9d570016ae/67)目前在 Meteor 1.0 之后的路线图上。现在有什么例子或建议吗？那么当用户滚动到底部时，如何通过订阅新元素和新元素来很好地进行无限滚动呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-08T16:15:44.470

我建议你试试我的包，页面：[https ://github.com/alethes/meteor-pages](https://github.com/alethes/meteor-pages)

它非常易于使用（只需一行 JavaScript 即可设置），而且非常可定制。它具有：增量订阅、本地缓存、邻居预取、请求限制、易于集成、每页多个分页、引导 2/3 样式、故障抵抗、内置铁路由器支持和许多可以在飞，无需重新加载页面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T07:41:11.933

在大气.meteor.com 上有一个用于分页的包，可以帮助您入门

*   [https://github.com/egtann/meteor-pagination](https://github.com/egtann/meteor-pagination)（分页）
*   [https://github.com/tmeasday/meteor-paginated-subscription](https://github.com/tmeasday/meteor-paginated-subscription)（分页与发布）

第二个实际上一次发送一页数据而不是一次发送所有数据，因此如果您有大量数据，它可能会有所帮助。对于无限滚动，您必须附加一个手动滚动侦听器并通过在向下滚动时增加页面大小来输入新数据（不是专门移动到第 2 页）。

我有点不确定具体使用什么模式，因为使用页面大小可能会有点麻烦，除非你能够让它与反应性一起正常工作，如果你能够分离你的`{{#each}}`块助手，那么这应该是可能的每次向下滚动时，它可能会使用`Meteor.render`，以便不再重新呈现已经可用的整个数据集。

如果您将数据放在`div`包含滚动溢出而不是上面的块中，它也可能有效，以便它重新渲染但它们在滚动中的位置保持不变，实际上使重新渲染不明显。

# extjs4.1 - 在 DROP 位置显示面板

> ID：15739055
> 
> 赞同：0
> 
> 时间：2013-04-01T06:58:46.437
> 
> 标签：extjs4.1

我正在使用具有边框布局的面板，其中西部区域包含树，中心区域包含从具有列布局的面板扩展的面板。树正在从 json 加载数据（可拖动）。当用户删除节点表单树时，项目正在添加到中心区域的面板中。但是为了在面板中添加项目，我使用的是 panel.add 方法，该方法总是在最后一个位置添加。但我想在用户丢弃它的任何地方添加它。

尝试使用 panel.add(droppeditem).showAt(e.getXY())

但它给出的错误是 Uncaught TypeError: Cannot call method 'translatePoints' of undefined。

任何人都可以帮助我实现这一目标

问候网址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T20:09:47.670

我在树面板上的上下文菜单中遇到了同样的错误。当我使用 xtype 和 autoCreate 设置为 true 将上下文菜单视图添加到控制器内的 refs 时，它解决了问题。这几乎就像对象（上下文菜单）没有被实例化。例子：

```
var contextMenu = this.getPortletMenuContext();
contextMenu.showAt(event.getXY()); 
```

在我添加之前，我在上面遇到了同样的错误：

```
{ ref: 'portletMenuContext', selector: 'portletmenucontext', xtype: 'portletmenucontext', autoCreate: true } 
```

给我的控制器内的参考。

# javascript - CanJS 表格点击事件

> ID：15739061
> 
> 赞同：1
> 
> 时间：2013-04-01T06:59:06.840
> 
> 标签：javascript, canjs, canjs-control

我正在编写一个 canJS 应用程序，到目前为止成功地处理了一个 html 表的点击事件。使用以下代码。

```
 'table td click':function(el,event){
        console.log('clicked ',el.text());
     } 
```

1.  如何只收听表格的第一列点击而不是整个 td？
2.  如何从 td (el) 中检索特定列的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:02:18.790

试试这个：

```
'table td:nth-child(1) click' 
```

第二个问题的可能答案，首先处理整个 tr：

```
'table tr:nth-child(1) click':function(el,event){
    console.log(el.find('td').eq(0).html()); // gets first column
 } 
```

# javascript - 零剪贴板——通过函数调用（参数）

> ID：15739062
> 
> 赞同：1
> 
> 时间：2013-04-01T06:59:17.197
> 
> 标签：javascript, zeroclipboard

请帮我获取使用函数调用调用零剪贴板的代码 - 参数

- 例如

```
 function zero_clip_board('text to copy')
     {
         --- function to copy to clipboard via zeroclipboard
     } 
```

如果有人知道这样的功能，请提前发布此功能的代码，谢谢

否则，如果有人知道为所有浏览器将文本复制到剪贴板而不使用 Flash 也欢迎使用 ----------------------------- -----提前感谢---我正在等待重播和帖子

# c# - 一个存储过程也可以更新整个表或单个列

> ID：15739063
> 
> 赞同：2
> 
> 时间：2013-04-01T06:59:19.360
> 
> 标签：c#, asp.net, sql-server, stored-procedures

我有一个`userdata`包含这些列的表：

```
userId
userName
userEmail
userContact
userDob
userAdd
userImage
userPass 
```

我正在使用存储过程从该表中选择数据。

现在我想用一个存储过程更新这个表。我可以使用存储过程更新此表，但我的要求是`profile.aspx`允许用户使用存储过程更新所有列。但在其他形式中，我希望用户只更新几列，例如在`setting.aspx`页面上我允许用户只更新`userPass`列。

所以我必须制作另一个存储过程。我有很多这样的桌子。而且我想知道我必须创建多少存储过程来更新具有不同列的许多表。

任何人都可以建议一种简短的方法，以便我可以使用每个表只使用一个存储过程来更新整个表或单个列，或者任何 c# 代码来缩短它？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:20:52.420

您可以[`ISNULL`](https://msdn.microsoft.com/en-IN/library/ms184325.aspx)在 MS SQL Server 中使用该功能，MSDN 的以下语句对此进行了解释。

> 用指定的替换值替换 NULL。

您可以编写一个存储过程，在各种操作中更新您要更新的所有字段。从所有页面调用相同的过程。然后从一个页面只传递该页面的相关参数和其余参数（与该页面无关） pass [`null`](https://technet.microsoft.com/en-us/library/ms191504%28v=sql.105%29.aspx)。

你的存储过程应该是这样的

```
UPDATE dbo.userTable SET
userName = ISNull(@userName, userName),
userEmail= ISNull(@userEmail, userEmail),
-- list of all your table fields goes here
WHERE userID = @userID 
```

如果您传递参数，这将做的是；它将更新该字段的值；如果您传递[`null`](https://technet.microsoft.com/en-us/library/ms191504%28v=sql.105%29.aspx)任何字段，它将使用其现有值更新该字段。这样该字段在更新操作中不会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:10:17.560

您可以使用具有多个`if.. else..`条件的单个存储过程来控制每个字段的更新。然后您可以将它们作为参数传递以控制要更新的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:18:48.230

我认为您可以这样做：在首页，您应该将不想更新的字段设置为不可编辑，但将值作为参数传递给存储过程。在存储过程中，您将这些字段的旧值设置为对应的参数，如果不相等，则更新它，否则，对这些字段不做任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T07:24:22.133

你可以使用这样的东西：

```
UPDATE tbl t
   SET t.userName =  CASE WHEN @userName  IS NULL THEN t.userName  ELSE @userName  END
     , t.userEmail = CASE WHEN @userEmail IS NULL THEN t.userEmail ELSE @userEmail END
     ,  ...
   WHERE t.userName = CASE WHEN @WHERE_userName IS NULL THEN t.userName ELSE @WHERE_userName END
     AND ... 
```

因此，如果您不想更新特定字段，只需将代码中的 DBNull.Value 传递给该参数的过程调用。请记住，这仅在您不打算使用 NULL 值更新字段时才有效。如果您需要空值，则可以重写一点代码以使其与空值一起使用。如果您需要进一步的帮助，请发表评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T07:48:49.653

获取需要更新的 Datatable 中的所有数据。使用 datatable.WriteXML 方法并在**Stream**对象中获取所有字符串，使用 XmlWriteMode.IgnoreSchema 仅获取数据。

```
 DataTable dt = new DataTable();
        dt.WriteXml(stream object ,XmlWriteMode.IgnoreSchema) 
```

现在创建接受 Varchar(max) 参数并将**Stream**对象传递给该过程的过程。

之后，您可以使用 Openxml 或在 Sqlserver 的 XML 变量中获取所有这些东西，在 @tablevariable 或 #temp 表中获取所有数据。

[sqlserver](http://msdn.microsoft.com/en-us/library/ms186918.aspx "在 Sqlserver 中打开 XML")中的 Openxml 或 [用于 XML 变量的 XML](http://msdn.microsoft.com/en-us/library/ms178107.aspx "对于 XML")

然后你会得到一个表中的所有东西，使用该表根据你的主键 ID 更新你的数据库表，比如....

SQL qquery 如下所示

```
Update "Database Table Name"
set .........
from "GetDatafromc#table" 
```

# iphone - 如何将数据从一个实体传递到另一个实体类？

> ID：15739066
> 
> 赞同：1
> 
> 时间：2013-04-01T06:59:34.980
> 
> 标签：iphone, ios, json, web-services

我正在获取我的 chapterDC 类中的所有章节并获取区域，我在我的 chapterDC 类中有一个 selectedRegion 的属性，并且想通过 chapterDC 将我的区域数据传递到 regionDC，但我的日志消息始终为 0 和 null，我不知道我在做什么错

```
-(NSMutableArray *)getAllChapters
{
    NSMutableArray *returnArray = [[NSMutableArray alloc] init];

    NSString *url = [NSString stringWithFormat:@"%@get_all_chapters",kWSURL];
    NSDictionary * returnDict = (NSDictionary *) [self callWebService:url];
    if([[returnDict objectForKey:@"status"] isEqualToString:@"success"])
    {
        NSDictionary * responseDict = (NSDictionary *) [returnDict objectForKey:@"response"];
        NSArray *resultArray = [responseDict objectForKey:@"result"];

        for(NSDictionary *chapterDict in resultArray)
        {
            ChapterDC * chapter = [[ChapterDC alloc] init];
            chapter.ChapterDC_ChapterID=[[chapterDict objectForKey:@"ChapterID"]intValue];
            chapter.ChapterDC_ChapterName = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"ChapterName"]];
            chapter.selectedRegion.RegionDC_RegionID=[ [chapterDict objectForKey:@"RegionID"]intValue];
             NSLog(@"%d",chapter.selectedRegion.RegionDC_RegionID);
            chapter.ChapterDC_AddressLine1 = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"AddressLine1"]];
            chapter.ChapterDC_AddressLine2 = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"AddressLine2"]];
            chapter.ChapterDC_AddressLine3 = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"AddressLine3"]];
            chapter.ChapterDC_Email = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"Email"]];
            chapter.ChapterDC_URL = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"URL"]];
            chapter.ChapterDC_FacebookURL =[ NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"FacebookURL"]];
            chapter.ChapterDC_LinkedInURL = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"LinkedInURL"]];
            chapter.ChapterDC_PhoneNumber =[ NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"PhoneNumber"]];
            chapter.ChapterDC_Postcode = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"Postcode"]];
            chapter.ChapterDC_TwitterURL = [NSString stringWithFormat:@"%@", [chapterDict objectForKey:@"TwitterURL"]];

            NSDictionary * regionDict = (NSDictionary *) [returnDict objectForKey:@"region"];

            {
            chapter.selectedRegion = [[RegionDC alloc] init];
            chapter.selectedRegion.RegionDC_RegionID = [[regionDict objectForKey:@"RegionID"]intValue];
            NSLog(@"%d",chapter.selectedRegion.RegionDC_RegionID);
            chapter.selectedRegion.RegionDC_RegionName = [NSString stringWithFormat:@"%@", [regionDict objectForKey:@"RegionName"]];
                NSLog(@"%@",chapter.selectedRegion.RegionDC_RegionName);
            chapter.selectedRegion.RegionDC_ContactName = [NSString stringWithFormat:@"%@", [regionDict objectForKey:@"ContactName"]];
            chapter.selectedRegion.RegionDC_Mobile = [NSString stringWithFormat:@"%@", [regionDict objectForKey:@"Mobile"]];
            chapter.selectedRegion.RegionDC_Landline = [NSString stringWithFormat:@"%@", [regionDict objectForKey:@"Landline"]];
            chapter.selectedRegion.RegionDC_TrainingURL = [NSString stringWithFormat:@"%@", [regionDict objectForKey:@"TrainingURL"]];
            }
            [returnArray addObject:chapter];
        }
    }
    return returnArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:59:57.220

替换 `NSDictionary * regionDict = (NSDictionary *) [returnDict objectForKey:@"region"];` 为

```
NSDictionary * regionDict = (NSDictionary *) [chapterDict objectForKey:@"region"]; 
```

# mysql - vb.net 中任何数据源的通用数据访问层

> ID：15739070
> 
> 赞同：0
> 
> 时间：2013-04-01T06:59:43.983
> 
> 标签：mysql, vb.net

我有一个 Vb.net 项目，它具有带有 DAO 对象的 Msacess 数据库。

现在我想使用 ado.net 从 msaccess 迁移到 mysql。

谁能建议我为任何类型的数据源设计 DAL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:09:02.967

尝试使用像[NHibernate](http://nhforge.org/ "休眠")这样的 ORM 工具（对象关系映射） 。大多数 ORM 工具可以配置为与许多不同的数据库一起使用。

# android - 由于 SQL 查询而出现强制关闭错误

> ID：15739072
> 
> 赞同：0
> 
> 时间：2013-04-01T06:59:58.790
> 
> 标签：android, android-sqlite

我正在尝试搜索标题以“n”开头的笔记，但我不知道我的查询出了什么问题，我遇到了强制关闭错误。
这是我的日志：

```
04-01 12:19:37.833: D/AndroidRuntime(676): Shutting down VM  
04-01 12:19:37.833: W/dalvikvm(676): threadid=1: thread exiting with uncaught exception (group=0x40015560)  
04-01 12:19:37.913: E/AndroidRuntime(676): FATAL EXCEPTION: main  
04-01 12:19:37.913: E/AndroidRuntime(676): android.database.sqlite.SQLiteException: near "%": syntax error: , while compiling: SELECT DISTINCT _id, title, body, cdate, passw FROM notes WHERE title LIKE n%  
04-01 12:19:37.913: E/AndroidRuntime(676):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-01 12:19:37.913: E/AndroidRuntime(676):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92) 
```

这是代码：

```
public Cursor search(String title) {
    Cursor mCursor =
            mDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                    KEY_TITLE, KEY_BODY,KEY_CDATE,KEY_PASS}, KEY_TITLE + " LIKE" +" " + title +  '%', null,
                    null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:05:38.620

你需要文字之间的文字

```
public Cursor search(String title) {
    Cursor mCursor =
            mDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                    KEY_TITLE, KEY_BODY,KEY_CDATE,KEY_PASS}, KEY_TITLE + " LIKE '" + title +  "%'", null,
                    null, null, null, null);

            mCursor.moveToFirst();

        return mCursor;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:07:51.777

检查这两个链接：[一](https://stackoverflow.com/a/9076679/1168654)和[二](https://stackoverflow.com/a/1243378/1168654)

或者只是改变这个：

```
query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                KEY_TITLE, KEY_BODY,KEY_CDATE,KEY_PASS}, KEY_TITLE + " LIKE "+"'" + title +  "%'", null,
                null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:13:03.587

查询应该是这样的：

```
select * from 'product' where product_name like 'crocin%' 
```

添加`' (single quote)`查询后，它应该可以工作。

# tcp - 具有要求的 C# TCP 多线程服务器和客户端

> ID：15739081
> 
> 赞同：0
> 
> 时间：2013-04-01T07:00:35.457
> 
> 标签：tcp

我目前正在研究用 C# 编写的 TCP 多线程服务器和客户端。我在 Google 上环顾四周，尝试了超过 5 个示例，但似乎没有一个可以满足所有要求。由于我不熟悉网络，所以如果有人能指出我正确的方向，我将不胜感激。

以下是我需要的要求：

1.  多线程，我需要一个可以处理多个客户端的服务器，尽管这些客户端不需要相互通信。
2.  连续操作，客户端连接到服务器后，需要不断地相互发送消息，直到服务器丢弃所有客户端。服务器需要识别每个客户端。客户端通常不需要自行断开与服务器的连接。
3.  断线通知，谷歌上找到的大部分例子都没有这个功能，我需要服务器知道连接的客户端何时断开，这样服务器才能通知用户。

实际上我发现的最接近的例子是：http: [//www.codeproject.com/Articles/22918/How-To-Use-the-SocketAsyncEventArgs-Class](http://www.codeproject.com/Articles/22918/How-To-Use-the-SocketAsyncEventArgs-Class)

但我面临的问题是消息在 Token 类中，我将所有这些类都包含在我的 Window Form Application 中，这是我的主要应用程序。客户 ID、客户状态或对客户的操作等信息将在表单中执行。我不知道如何将这些变量从 Token 类带到我的表单中。

这是另一个例子似乎可以适合我的目的： http: [//www.codeproject.com/Articles/2866/Multi-threaded-NET-TCP-Server-Examples](http://www.codeproject.com/Articles/2866/Multi-threaded-NET-TCP-Server-Examples)

但我不确定如何更改它，因为它阻止了我的表单显示。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T07:54:49.470

几个月后...首先，您必须记住窗口窗体不是异步原生的，您必须实现调用方法才能使用 tcp AsyncCallback。在其他地方处理客户，你必须创建一个新的字典，如：

```
Dictionary<string, System.Net.Sockets> clientList; 
```

如果是数据库 ID，它可能是 int ，或者您可以简单地使用本机系统句柄：

`this.anonymousSock.Client.Handle`

并像这样添加它们：

```
clientList.Add("ID", this.anonymousSock); 
```

最后：

```
public void Send(string data, string id)
    {
        Socket Client = this.clientList[id];
        byte[] byteData = Encoding.ASCII.GetBytes(data);
        Client.BeginSend(byteData, 0, 
            byteData.Length, 0, 
            new AsyncCallback(SendCallback), Client);
    } 
```

在接收时，在这种情况下，您可以通过检查您的套接字条目或使用令牌来识别客户端。

然后没有线程消耗cpu /内存。

# android - Android App购买说明

> ID：15739082
> 
> 赞同：0
> 
> 时间：2013-04-01T07:00:35.770
> 
> 标签：android, in-app-purchase, subscription

我正在android中开发一个应用程序。我想为我的用户免费提供一些功能。他们还需要购买才能获得应用程序的其他功能。我怎样才能做到这一点？任何人都可以帮助我仅购买某些功能。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:28:41.673

共有 3 种类型的应用内购买项目可用

1.  托管（消耗品和非消耗品）
2.  非托管（从应用内版本 3 中删除）
3.  订阅（每月和每年）

有关详细信息，请查看上面@usman 在评论中给出的链接。

# r - R程序不断得到数字（0）答案

> ID：15739084
> 
> 赞同：1
> 
> 时间：2013-04-01T07:00:44.307
> 
> 标签：r, probability

我是 R 的初学者。这是我试图编写的公式，以找到使某些二元组的对数似然最大化的 lambda。当找不到二元组时，P_b（二元组）函数会失败，但 P_u（一元组）函数应该提供一元组结果（lambda = 0）。

它适用于找到的二元组。当找不到它们时，我只得到数字（0），而不是一元组结果。

![在此处输入图像描述](https://i.stack.imgur.com/qpSVf.jpg)

```
p.mix <- function(w2, w1) {

  (1-lambda) * uni.dfrm$prob[uni.dfrm$token==w2] + lambda * p.bi(w2,w1)

} 
```

由于索引，p.bi() 函数看起来很复杂，所以我不愿意发布它，但是当找到二元组时它确实有效。它只是查找 w' 在 w 之后出现的次数并将其除以 w 出现的次数，但我必须通过另一个词汇向量向量，所以它看起来很难看。

当 w' 从未出现在 w 之后，而不是零计数时，根本就没有行，这显然是导致 numeric(0) 结果的原因。这就是混合模型应该解决的问题，但我无法让它发挥作用。任何想法这是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:28:13.497

`w2`您可以为以下情况添加测试，`numeric(0)`例如：

```
p.mix <- function(w2, w1) {
  if(length(w2)>0){
    res <- (1-lambda) * uni.dfrm$prob[uni.dfrm$token==w2] +
                lambda * p.bi(w2,w1)
  }else res <- 0

  res
} 
```

**编辑**

```
p.mix <- function(w2, w1) {
  if(length(w2) && length(uni.dfrm$prob[uni.dfrm$token==w2]) > 0)
    (1-lambda) * uni.dfrm$prob[uni.dfrm$token==w2] + lambda * p.bi(w2,w1)
  else 0
} 
```

# python - 计算大型列表的方法

> ID：15739086
> 
> 赞同：1
> 
> 时间：2013-04-01T07:00:51.417
> 
> 标签：python, large-data

假设，我需要计算各种哈希方案的冲突。输入序列中的元素数为 1e10^8 或更多。不知道如何分析计算，所以使用蛮力。

显然不要将这个哈希列表保存在 RAM 中。这是为我的需要编写代码的最佳方式吗？我应该将它转储到数据库中还是什么？首选使用哪些库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:06:54.447

我建议保留一组文件，每个文件都以其中包含的哈希前缀命名（例如，如果您使用前缀长度为 6，那么命名的文件`ffa23b.txt`可能包含哈希`ffa23b11d4334`、 ...`ffa23b712f3`等）。每次读取散列时，都将其附加到文件中，其名称对应于散列的前 N ​​个字符。

您还可以使用[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)快速排除大部分哈希是唯一的，而无需将所有哈希存储在内存中。这样，如果对布隆过滤器的检查表明您之前可能确实见过它，那么您只需要回退到搜索给定的前缀文件——这种情况很少发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:31:02.633

**简短的回答**：如果你有几 GB 的 RAM，请使用 Python 字典，这是最简单的实现方法（并且可能运行得更快）。你可以这样做：

```
>>> mydict = {}
>>> for i in some_iterator:
        mydict[i] = '' 
```

然后检查映射中是否存在密钥：

```
>>> 0 in mydict
True

>>> 123456789 in mydict
False 
```

**长答案**：您可以使用持久键值存储，例如[GDBM](http://docs.python.org/2/library/gdbm.html)（它看起来像 Berkeley DB）或其他类型的数据库——但这种方法比仅使用 Python 字典要*慢*得多；另一方面，通过这种方法，您将获得持久性（如果需要）。

您可以将 GDBM 理解为保存在单个文件中的字典（键值存储）。您可以按如下方式使用它：

```
>>> import gdbm
>>> kv = gdbm.open('my.db', 'cf') 
```

然后`my.db`将创建该文件（请参阅[Python GDBM 文档](http://docs.python.org/2/library/gdbm.html)以了解其`cf`含义）。

但它有一些限制，因为只支持字符串作为键和值：

```
>>> kv[0] = 0
Traceback (most recent call last)
[...]
TypeError: gdbm mappings have string indices only

>>> kv['0'] = 0
Traceback (most recent call last)
[...]
TypeError: gdbm mappings have string elements only

>>> kv['0'] = '0' 
```

您可以使用具有虚拟值的所有键填充 gdbm 数据库：

```
>>> for i in some_iterator:
        kv[str(i)] = '' 
```

然后检查映射中是否存在密钥：

```
>>> '0' in kv
True

>>> '123456789' in kv
False 
```

# python - Python mechanize - 表单提交 - 选择正确的表单

> ID：15739089
> 
> 赞同：0
> 
> 时间：2013-04-01T07:01:05.273
> 
> 标签：python, web-scraping, mechanize

尝试使用 Python mechanize 登录网页。由于我在查找正确表单时遇到问题，因此我将在此处复制一些代码以供未来用户使用，而不是发布 URL（代码可能会更改）。我读[了这个](https://stackoverflow.com/questions/8570920/submitting-forms-with-mechanize-python)，但似乎没有一个明确的答案。

无论如何，我在[本教程](http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/)中使用 mechanize 完成了所有操作，直到获得表格为止。

当我打电话时：

```
for form in br.forms():
    print form 
```

我回来了：

```
POST https://www.myexample.com/x-www-form-urlencoded
HiddenControl(utf8=✓) (readonly)
HiddenControl(authenticity_token=BfqPL1ilOXeg08Or/CEBAiK4duWgncY=      
CheckboxControl(affiliate[remember_me]=[1]) 
```

查看我看到的原始 HTML：

```
<label for="affiliate_email">Email<./label>
<.input autofocus="autofocus" id="affiliate_email" 
    name="affiliate[email]" size="30" type="email" /> 
```

但是，当我尝试选择电子邮件字段时，我收到一个未找到表单的错误。

```
br.select_form(name="affiliate[email]")
# updated to 
br.select_form(nr=0)
# Now what do I do here to enter something into that form?
br.form['someIDhere']='myEmail@example.com' 
```

我也尝试过使用表单 ID 和许多其他可能的表单名称。我不明白为什么用 br.forms() 打印表单会返回那些奇怪的结果，这是否意味着该站点正在使用 javascript 登录表单？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:09:42.713

`affiliate[email]`不是表单的名称，而是表单中输入的名称。尝试使用：

```
br.select_form(nr=0) 
```

如果表单没有名称并且是页面上的第一个/唯一表单。

# php - Jquery：选中或取消选中复选框时无法显示加载相应的页面

> ID：15739093
> 
> 赞同：1
> 
> 时间：2013-04-01T07:01:59.077
> 
> 标签：php, javascript, jquery

我有一个复选框。我想根据复选框`checked`和`uncheck`状态调用两个不同的 php 页面。

但下面的代码只是调用检查的 php 页面。可能是什么原因？

```
 <script type="text/javascript">
     $(function()
     {
     $('input[id^="test"]').on('click',function()
       {
         if ($('input[id^="test"]').checked)//when users click to on checkbox to check
         {

           $.ajax({
               url: "updatestatus.php?id="+$(this).val()+"&status=1",
               success: function(data){ 
                alert('Successfully updated...');
               }
             });
     } 
     else//when users uncheck the checkbox
       {    $.ajax({
               url: "updatestatus.php?id="+$(this).val()+"&status=2",
               success: function(data){
                 alert("uncheckde...");
               }
             });
        } 
        });
    });
         </script> 
```

并在页面

```
<?php //checkbox in a while loop

            echo " <input type='checkbox' id='test' value='".$row['id']."'/> ";
         ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:11:13.983

这是您的检查是否已检查不起作用。请改用该`.is(':checked')`方法。

```
$(document).ready(function() {
    $('input[name=cbx]').change(function() {
        if ($(this).is(':checked')) {
            alert('Checked');
        } else {
            alert('Not Checked');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:47:46.670

按照要求：

尝试`$('input[id^="test"]').is(':checked')`用作条件。您还可以使用`$(this)`来引用触发事件的特定复选框。所以，这是你的代码清理了一下：

```
<script>
    $(function() {
        $('input[id^="test"]').on('click',function(e) {
            if ($(this).is(':checked') {
                $.ajax({
                    url: "updatestatus.php?id="+$(this).val()+"&status=1",
                    success: function(data){ 
                        alert('Successfully updated...');
                    }
                });
            } 
            else {    
                $.ajax({
                    url: "updatestatus.php?id="+$(this).val()+"&status=2",
                    success: function(data){
                        alert("uncheckde...");
                    }
                });
            } 
        });
    });
</script> 
```

我要做的另一项更改是将一个类分配给您的复选框，并以它为目标，而不是使用“开头为”选择器（因为并非每个浏览器都支持它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:09:42.803

像这样试试

```
$(function()
     {
     $('input[id^="test"]').on('click',function()
       {
         if ($(this).attr("checked") == "checked")//when users click to on checkbox to check
         {

           $.ajax({
               url: "updatestatus.php?id="+$(this).val()+"&status=1",
               success: function(data){ 
                alert('Successfully updated...');
               }
             });
     } 
     else//when users uncheck the checkbox
       {    $.ajax({
               url: "updatestatus.php?id="+$(this).val()+"&status=2",
               success: function(data){
                 alert("uncheckde...");
               }
             });
        } 
        });
    }); 
```

# android - 在 listView 项中设置图像

> ID：15739097
> 
> 赞同：0
> 
> 时间：2013-04-01T07:02:34.843
> 
> 标签：android, listview

我已经制作了 MainActivity 类，我想在列表视图中设置图标

代码在这里

```
 public class MainActivity extends ListActivity {

static  String classes[]={"StartingPoint","Example1","Example2","Example3","Example4","Example5","Example6","Example7"};
    static final Integer[] imgid = {R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher};
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setListAdapter(new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String  cheese=classes[position];

        try {
            Class myclass=Class.forName("com.example.listmenu."+cheese);
            Intent i=new Intent(MainActivity.this,myclass);
            startActivity(i);
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我想在列表视图项中设置图标....请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:11:43.800

制作您的自定义适配器并传递文本和图像数组

```
 public class AboutAdapter extends BaseAdapter {
        private LayoutInflater inflater;
        private Context mcontext;
        private Strig[] arrayList;

        public AboutAdapter(Context context, Strig[] arrayList) {
            this.mcontext = context;
            this.arrayList= arrayList;
            inflater = LayoutInflater.from(mcontext);
        }

        @Override
        public int getCount() {
            return arrayList.length;
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        public class Holder {
            TextView txtname;
            ImageView imag;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View vi = convertView;
            Holder holder;
            if (vi == null) {
                vi = inflater.inflate(R.layout.raw_aboutlist, null);
                holder = new Holder();

                holder.txtname = (TextView) vi
                        .findViewById(R.id.raw_about_txt_name);
                holder.imag = (ImageView) vi
                        .findViewById(R.id.raw_about_img);

                vi.setTag(holder);

            } else {
                holder = (Holder) vi.getTag();
            }

 holder.txtname.setText(arrayList[position]);

// same as for image pass array of image and set 

    holder.imag.setBackgroundResource(R.drawable.explr_img_selector);
            return vi;
        }

    } 
```

然后在listview中设置适配器如下图

```
AboutAdapter aboutAdapter = new AboutAdapter(AboutActivity.this, arrayList);
listView.setAdapter(aboutAdapter); 
```

# java - 另一个类的静态函数不修改传入的引用

> ID：15739099
> 
> 赞同：2
> 
> 时间：2013-04-01T07:02:56.377
> 
> 标签：java

只是很困惑为什么会这样：

```
public class OneClass {
    public static void main(String[] args) {
        StringBuilder sb = new StringBuilder("1111");
        AnotherClass.updateParameter(sb);
        System.out.print(sb);
    }
}

public class AnotherClass {
    public static void updateParameter(StringBuilder args) {
        args.append("2222");
    }
}

Output: 1111 
```

谁能解释一下，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T07:05:51.707

您显示的代码没有您描述的行为（而是打印`11112222`）。

最可能的解释是您没有运行您认为正在运行的代码（例如，您有多个不同的副本`AnotherClass`，或者您忘记保存文件或重新编译它等）

# android - 在activiy启动时执行listview的onclick事件

> ID：15739105
> 
> 赞同：-1
> 
> 时间：2013-04-01T07:03:34.380
> 
> 标签：android, android-listview

我想在活动开始时执行我的自定义列表视图的 OnClick 事件。但它不工作。

```
 listTimer = (ListView) findViewById(R.id.listTimer);
    TimerAdapter tadapt = new TimerAdapter(RoutineList, this);
            listTimer.setAdapter(tadapt); 
```

我已经尝试了下面提到的所有可能性：

```
//listTimer.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    //listTimer.setSelection(1);
    //listTimer.setSelected(true);
    //listTimer.requestFocus();
    //listTimer.performItemClick(listTimer, 1, listTimer.getItemIdAtPosition(1));
   // listTimer.requestFocus(); 
```

但是没有一个人帮助我摆脱了这个问题。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:27:09.447

我只是闻到你试图实现自动点击列表视图的第一行，最初你必须`list-view and override onItemClickListner`像下面这样初始化：

```
listview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                Toast.makeText(MainActivity.this, "clicked"+mList.get(arg2), Toast.LENGTH_LONG).show();
                Log.d("clicked", "^^^^^^");

                v = arg0;
                id=arg3;

            }
        }); 
```

现在在 onItemclickLister中创建`View` 和全局对象并分配：`long`

```
View v=null;
long id; 
```

最后把下面的代码放在里面`onResume();`，正如你提到的，你想点击第一个项目，然后`0`根据要求传递（零）else。

```
@Override
    protected void onResume() {
        listview.performItemClick(v, 0, id);
        super.onResume();
    } 
```

# css - 浏览器屏幕缩小时如何显示水平滚动条

> ID：15739112
> 
> 赞同：1
> 
> 时间：2013-04-01T07:03:52.907
> 
> 标签：css, asp.net-mvc, browser, scrollbar

这就是我制作的仪表板。其中包含 4 `DIVs`。![当浏览器屏幕完全打开时](https://i.stack.imgur.com/nxguM.png) 当我减小浏览器的屏幕尺寸 时浏览器完全打开 ![当我减小浏览器屏幕时。](https://i.stack.imgur.com/A3i56.png)

每当浏览器屏幕减小时，我都希望...仪表板`DIVs`应该得到`horizontal scroll bar`而不是削减显示。这是我如何在主视图中呈现部分视图的代码。

```
<fieldset>
    <%using (Ajax.BeginForm(new AjaxOptions { InsertionMode = InsertionMode.Replace}))/*, UpdateTargetId = "RecentDiv" }))*/
      { %>

    <div id="MainDashboardDiv">
        <div class="LiveTile">
            <div id="RecentDiv"> 
                    <h4 class="RequestTitle">
                    <%: Html.ActionLink("Recent Requests", "CRMRequestsList", new { requestType = "Recent" })%>
                    </h4>
                <%Html.RenderAction("RecentRequests",Model); %>
            </div>
            <!--End of RecentDiv -->

            <div id="PriorityDiv">
                <h4 class="RequestTitle">
                    <%: Html.ActionLink("High Priority Requests", "CRMRequestsList", new { requestType = "Priority" })%>
                 </h4>

                <%Html.RenderAction("PriorityRequests", Model); %>
            </div>
            <!--End of PriorityDiv -->
        </div>
        <!--End of UpperLiveTiles -->
        <div class="LiveTile">

             <div id="PendingDiv">
                <h4 class="RequestTitle">
                <%: Html.ActionLink("Pending Requests", "CRMRequestsList", new { requestType = "Pending" })%>
                </h4>
                <%Html.RenderAction("PendingRequests", Model); %>

            </div>
            <!--End of PendingDiv -->
            <div id="ApprovedDiv">
                    <h4 class="RequestTitle">
                    <%: Html.ActionLink("Approved Requests", "CRMRequestsList", new { requestType = "Approved" })%>
                    </h4>
                <%Html.RenderAction("ApprovedRequests", Model); %>

             </div>
            <!--End of ApprovedDiv -->

        </div>
        <!--End of LowerLiveTiles -->
    </div>
    <!--End of MainDashboardDiv -->
    <%} %>
    </fieldset> 
```

这是我应用的 CSS：

```
#MainDashboardDiv {
    height: auto;
    width: 100%;
    margin: 0 auto;  
    padding-bottom: 4%; 
    overflow: hidden;

}
.LiveTile{
    height: 260px;
    overflow: hidden;
    padding-top: 1%;
    position: relative;
    width: 100%;
}

#RecentDiv, #PendingDiv
{
    width: 48%; 
    display: inline-block; 
    position: relative; 
    height:inherit;
    overflow: scroll;
    float: left;
    margin-bottom: 1%;
    margin-right: 1%;
    -webkit-border-radius: 12px;
    -moz-border-radius: 12px;
    border-radius: 12px;
    background:rgba(0,117,149,0.9);
}
#PriorityDiv,#ApprovedDiv
{

    width: 48%;  
    position: relative; 
    height:inherit;
    display: inline-block;
    overflow: scroll;
    float: left;
    margin-bottom: 1%;
    margin-right: 1%;
    -webkit-border-radius: 12px;
    -moz-border-radius: 12px;
    border-radius: 12px;
    background:rgba(0,117,149,0.9);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:07:01.247

这种风格是罪魁祸首。

```
.LiveTile{
    overflow: hidden;
} 
```

你告诉它隐藏任何不符合界限的东西。尝试`scroll`或`auto`。

```
.LiveTile{
    overflow: scroll;
} 
```

或者

```
.LiveTile{
    overflow: auto;
} 
```

**编辑：**

抱歉，我想我把你的标记弄混了，你想定位标题下的 div。尝试将`Html.RenderAction("RecentRequests",Model);`,`Html.RenderAction("PriorityRequests",Model);`等包装在 div 中并将其应用到该 div 中。

**HTML**

```
<div id="RecentDiv"> 
        <h4 class="RequestTitle">
        <%: Html.ActionLink("Recent Requests", "CRMRequestsList", new { requestType = "Recent" })%>
    </h4>
    <div class="InnerDiv">
        <%Html.RenderAction("RecentRequests",Model); %>
    </div>
</div> 
```

**CSS**

```
.InnerDiv {
    overflow:scroll;
} 
```

# matlab - 获取图像大小时输入参数不足

> ID：15739113
> 
> 赞同：0
> 
> 时间：2013-04-01T07:03:55.770
> 
> 标签：matlab

我尝试进行手指静脉特征提取我有两个文件我收到了这个错误（第 29 行），它在第二个文件中

```
[img_h, img_w] = size(img); 
```

没有足够的输入参数。第一的

```
% This script shows how the finger region and edges can be detected.

img = im2double(imread('finger.png')); % Read image
img = imresize(img, 0.5);              % Downscale image

mask_height=4; % Height of the mask
mask_width=20; % Width of the mask
[fvr, edges] = lee_region(img,mask_height,mask_width);

% Create a nice image for showing the edges
edge_img = zeros(size(img));
edge_img(edges(1,:) + size(img,1)*[0:size(img,2)-1]) = 1;
edge_img(edges(2,:) + size(img,1)*[0:size(img,2)-1]) = 1;

rgb = zeros([size(img) 3]);
rgb(:,:,1) = (img - img.*edge_img) + edge_img;
rgb(:,:,2) = (img - img.*edge_img);
rgb(:,:,3) = (img - img.*edge_img);

% Show the original, detected region and edges in one figure
figure;
subplot(3,1,1)
  imshow(img,[])
  title('Original image')
subplot(3,1,2)
  imshow(fvr)
  title('Finger region')
 subplot(3,1,3)
  imshow(rgb)
  title('Finger edges') 
```

这是第二个文件

```
function [region, edges] = lee_region(img, mask_h, mask_w)
% Localise the finger region

% Parameters:
%  img    - Input vascular image
%  mask_h - Height of the mask
%  mask_w - Width of the mask

% Returns:
%  region - Binary mask indicating the finger region
%  edges  - Matrix containing two rows, first row corresponds to the 
%           y-positions of the upper finger edge and the second row
%           corresponds to the y-positions of the lower finger edge.

% Reference:
% Finger vein recognition using minutia-based alignment and local binary
%   pattern-based feature extraction
% E.C. Lee, H.C. Lee and K.R. Park
% International Journal of Imaging Systems and Technology
%   Volume 19, Issue 3, September 2009, Pages 175-178   
% doi: 10.1002/ima.20193

% Author:  Bram Ton <b.t.ton@alumnus.utwente.nl>
% Date:    20th March 2012
% License: Simplified BSD License

[img_h, img_w] = size(img);

% Determine lower half starting point
if mod(img_h,2) == 0
    half_img_h = img_h/2 + 1;
else
    half_img_h = ceil(img_h/2);
end

% Construct mask for filtering
mask = zeros(mask_h,mask_w);
mask(1:mask_h/2,:) = -1;
mask(mask_h/2 + 1:end,:) = 1;

% Filter image using mask
img_filt = imfilter(img, mask,'replicate'); 
%figure; imshow(img_filt)

% Upper part of filtred image
img_filt_up = img_filt(1:floor(img_h/2),:);
[~, y_up] = max(img_filt_up); 

% Lower part of filtred image
img_filt_lo = img_filt(half_img_h:end,:);
[~,y_lo] = min(img_filt_lo);

% Fill region between upper and lower edges
region = zeros(size(img));
for i=1:img_w
    region(y_up(i):y_lo(i)+size(img_filt_lo,1), i) = 1;
end

% Save y-position of finger edges
edges = zeros(2,img_w);
edges(1,:) = y_up;
edges(2,:) = round(y_lo + size(img_filt_lo,1)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:41:18.037

一个可能的原因是您定义了一个名为“size”的函数。如果是这样，请将您定义的函数重命名为另一个名称。

如果没有，如果您的工作文件夹只有两个文件，如果输入是彩色图像，那么您将在线上的主文件中遇到错误`edge_img(edges(1,:) + size(img,1)*[0:size(img,2)-1]) = 1;`，而不是在第二个文件中。我刚刚测试了它。要解决此错误，您需要将所有输入图像（finger.png）转换为灰度。您可以通过这种方式更改主文件：

```
% This script shows how the finger region and edges can be detected.

img = im2double(imread('finger.png')); % Read image
img = imresize(img, 0.5);              % Downscale image

img = rgb2gray(img);

mask_height=4; % Height of the mask
mask_width=20; % Width of the mask
[fvr, edges] = lee_region(img,mask_height,mask_width);
... 
```

对了，我用的matlab版本是MATLAB2012B；并且如果输入图像为 M*N*3，则`[h,w] = size(img)`返回如下： h = M; w = N*3。不会有错误。

# java - java 无法使用 FlatXmlDataSet 读取 XML 文件

> ID：15739114
> 
> 赞同：0
> 
> 时间：2013-04-01T07:04:08.083
> 
> 标签：java, mysql, dbunit

我正在尝试使用 dbunit 将 XML 文件加载到 mySql，我的 FlatXmlDataSet 显示

“注意：这个元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc”

但是得到 AsserionFailedError:null

dbunit 版本 -->2.4.9 mySql --> 5.2

```
public class DbUnitSampleTest extends TestCase {

public static final String TABLE_LOGIN ="login";
private FlatXmlDataSet loadedDataSet;

protected IDatabaseConnection getConnection() throws Exception
{
Class.forName("com.mysql.jdbc.Driver");
Connection jdbcConnection =DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");

return new DatabaseConnection(jdbcConnection);
}

@SuppressWarnings("deprecation")
protected IDataSet getDataSet() throws Exception
{               
        loadedDataSet = new FlatXmlDataSet(this.getClass().getClassLoader().getResourceAsStream("input.xml"));

        return loadedDataSet;
}   

public void testCheckLoginDataLoaded() throws Exception
{       
assertNotNull(loadedDataSet);
int rowCount = loadedDataSet.getTable(TABLE_LOGIN).getRowCount();
TestCase.assertEquals(2, rowCount);
}
} 
```

错误：

```
junit.framework.AssertionFailedError: null
at junit.framework.Assert.fail(Assert.java:47)
at junit.framework.Assert.assertTrue(Assert.java:20)
at junit.framework.Assert.assertNotNull(Assert.java:214)
at junit.framework.Assert.assertNotNull(Assert.java:207)
at DbUnitSampleTest.testCheckLoginDataLoaded(DbUnitSampleTest.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:22:02.190

问题就在这里

```
loadedDataSet = new FlatXmlDataSet(this.getClass().getClassLoader().getResourceAsStream("input.xml")); 
```

DBUnit 的错误消息很差。问题是资源加载器找不到您的 input.xml 文件。试着像这样把它分开。

```
InputStream is = this.getClass().getClassLoader().getResourceAsStream("input.xml")
if(is != null)
   loadedDataSet = new FlatXmlDataSet(is);
else
   System.out.println("Can't find input.xml :("); 
```

从那里您应该能够找到找不到 input.xml 的原因。

# apache - 重写 CSS 路径

> ID：15739119
> 
> 赞同：0
> 
> 时间：2013-04-01T07:04:52.527
> 
> 标签：apache, .htaccess, mod-rewrite

我环顾四周，但找不到任何能真正解释的东西。我以前使用过 htaccess 重写没有太多问题，但我似乎找不到这个失败的地方。我认为这与初始（原始）URL 有关，但我似乎找不到有效的组合。

HTML：

```
<link rel="stylesheet" type="text/css" href="http://localhost/site/vnd/style/main.css?p=desktop"> 
```

.ht 访问：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^style/([A-Z]+\.css)\?p=(.*)$ style/$2/$1 [R=301,L] 
```

预期的重定向（文件实际所在的位置）：

```
style/desktop/main.css 
```

在正则表达式测试器中，它拆分并重新创建它就好了，但我看不到 Apache 看到的内容，因此很难调试。我尝试过绝对路径和相对路径、尾随和无尾随斜杠等的组合。

在控制台中，正在输出 404，告诉我重定向根本不起作用，并且仍在寻找原始 URL。标题：

```
Request URL: http://localhost/Patterns/mvc/style/main.css?p=desktop
Request Method: GET
Status Code: 404 Not Found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:19:29.647

`RewriteRule`s 无法提取查询字符串。您需要使用条件来捕获它，并相应地传递它：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING} ^p=(.*)
RewriteRule ^style/([a-z]+)\.css$ style/%1/$1.css [R=301,L,NC] 
```

请注意，我已将`p`键移至`QUERY_STRING`条件，并且已将`NC`标志添加到规则中（这意味着它将忽略字符串的大小写）。

# jquery - JQuery - 评估 TR 类，从匹配结果中删除 IMG

> ID：15739124
> 
> 赞同：0
> 
> 时间：2013-04-01T07:05:11.027
> 
> 标签：jquery

已经为此工作了一段时间。

作为更大努力的一部分，我需要删除驻留在特定 TR 类中的图像。我有一个 JSFiddle 工作（我混合了我在 SO 上找到的两种不同的方法），但问题是 IF 语句对表中三个 TR 中的两个解析为 true，但它删除了所有图像。即使是不匹配的。

我知道这可能很简单。

两个 TR 类：

```
<TR class=rowToClick> 
```

和

```
<TR class=hiddenRow> 
```

我需要保留图像

```
<TR class=rowToClick> 
```

我注释掉了非常简单的 JQuery 块。两者产生相同的结果。

谢谢！

[http://jsfiddle.net/DDjFz/148/](http://jsfiddle.net/DDjFz/148/)

```
// if ($('TR').hasClass('hiddenRow')) {$('td > img').remove();}

$.each(jQuery("TR"),function(){
   if (jQuery(this).hasClass("hiddenRow")) {
       $('td > img').remove();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:34:52.510

尝试：

```
$.each(jQuery("TR"),function(){
   if (jQuery(this).hasClass("hiddenRow")) {
       $(this).find('td > img').remove();
    }
}); 
```

工作演示：http: [//jsfiddle.net/DDjFz/149/](http://jsfiddle.net/DDjFz/149/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:10:09.370

您当前的选择器`'td > img'`将匹配*所有 tds 的直接后代的所有图像元素*-而不是仅匹配 match 内的那些元素`tr`。

改变

`$('td > img').remove();`

到

`$(this).find('td > img').remove();`

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:27:39.697

试试这个，工作[小提琴](http://jsfiddle.net/rajesh007/fp9M6/)

```
 $.each(jQuery("TR"),function(){
   if (jQuery(this).hasClass("hiddenRow")) {
     $('td > img',this).remove();
   }
}); 
```

# java - Java使用不同的参数类型覆盖抽象方法

> ID：15739127
> 
> 赞同：1
> 
> 时间：2013-04-01T07:05:22.020
> 
> 标签：java, oop

我是 java 新手，我有一个`Networks`扩展基本 dao 类的 dao 类`MyDao`。将来我将拥有许多 dao 类，这些类将扩展`MyDao`我的想法，即在其中创建一个抽象方法`MyDao`并将超类指定`MyModel`为参数类型。例子：

```
public class Network extends MyModel
{
}

abstract public class MyDao<T> {
    public abstract long save(T model);
    public abstract List<T> getAll();
}

public class Networks extends MyDao<Network> {
    @Override
    public long save(Network model)
    {
      /* do stuff */
    }

    @Override
    public List<Network> getAll()
    {
      /* do stuff */
    }     
} 
```

我想知道这种方法在java中是否可行，应该如何完成类似的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:16:03.270

这是`Generic`在java中使用的方式。解释可能`save`是特定于具体`Networks`类的通用方法。

# jquery - 在长段落中的一定数量的单词之后插入标签

> ID：15739128
> 
> 赞同：0
> 
> 时间：2013-04-01T07:05:26.480
> 
> 标签：jquery, string

我有一个很长的文本（用户通过编辑器输入），我想分页。为此，我打算使用一个基于 jQuery 的分页插件，
但所有这些插件都需要一组元素，它们分成分页，例如。某些插件可能要求元素位于`<ul><li></li>....</ul>`模式中。

如何使用jQuery在段落中重复插入特定数量的单词后插入特定元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:21:44.300

尝试：

```
string = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.";
modifiedString = string.replace(/(.{10})/g,"$1<br>"); 
```

`<br>`这将用标签替换每 10 个字符。

# javascript - 替换具有两个可能 id 的容器

> ID：15739129
> 
> 赞同：0
> 
> 时间：2013-04-01T07:05:34.367
> 
> 标签：javascript, jquery

这是我的代码：

```
function changeimage2()
{
    /*$("#container1").css({'visibility':'hidden'});*/

    $("#PicInRightTitle").css({'visibility':'hidden'});

    $("Img").click(function(){
        $(document).ready(function(){   
            $("#container1").replaceWith($('#container2'));
            $("#container2").show();
            $("#slider").easySlider({
                auto: false, 
                continuous: true
            });
        }); 
    });
} 
```

上面的代码将 container1 替换为 container2 。它可以工作。但是我正在尝试用 container3 替换具有 container1 或 container2 的 div 我试过这个，但它不起作用。

```
 ($("#container1") || $("#container3")).replaceWith($('#container2')); 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:09:44.943

如果它在页面上，它将`#container1`替换，否则将替换`#container2`

```
if ($("#container1").length > 0)
    $("#container1").replaceWith($('#container3'));
else
    $("#container2").replaceWith($('#container3')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:10:01.457

您可以使用以下公共类：

`$('.containers').replaceWith($('#container2'));`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T07:12:40.767

尝试这个：

```
$("#container1,#container3").replaceWith($('#container2')); 
```

# sql-server - 如何在网络上的共享文件夹中安装 SQL Server 2008？

> ID：15739131
> 
> 赞同：0
> 
> 时间：2013-04-01T07:05:37.263
> 
> 标签：sql-server, sql-server-2008, networking, vpn

我需要在系统的特定文件夹中安装 SQL Server 2008。该文件夹与连接到我的网络的所有系统共享。

1.  如何在特定路径中安装 SQL Server？
2.  如何设置所有系统都可以访问 SQL Server？

注意：通过**VPN**连接的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:26:02.443

你不能，你也没有。

要共享 SQL Server 实例，请将其安装在一台服务器上，并授予对客户端的访问权限。文件共享与它**无关**。阅读[服务器网络配置](http://msdn.microsoft.com/en-us/library/ms189083.aspx)。

您必须正确许可所有访问您的共享服务器的用户和机器。

# c# - 使软件根据版本选择改变其行为

> ID：15739137
> 
> 赞同：0
> 
> 时间：2013-04-01T07:05:54.967
> 
> 标签：c#, .net, wcf, client-server

我有一个像服务器一样的软件。客户端通过公开的接口与该软件进行通信。我们公司想为我们的软件引入新功能。

版本 1：客户端 <---> 接口 X1、Y1、Z1 <----> 服务器

版本 2：

客户端 <---> 接口 X2, Y2, Z2 ----> 服务器

客户希望能够随时切换到旧版本。当然，如果他们想切换到不同的服务器版本，他们会将界面更改为旧版本。我们公司希望我们有一个下拉菜单来选择不同的版本。选择最新版本应该会公开新功能。选择以前的版本应该隐藏新功能。现在，问题是新功能也修改了现有功能的行为！一些公开的接口已更改。这包括现有方法签名更改、一些方法删除和一些新方法添加。但现有方法中的主要代码更改尚未完成。每当切换版本时，客户端软件都会进行更改以适应服务器更改。我们的服务器代码维护是主要关注点，因为代码库非常大。所以我们公司既不希望我们添加 if/else 条件检查来实现这个目标，也不希望我们重复代码。该软件使用.NET 3.5 和 WCF 用 C# 编写。客户端使用 SOAP 与该软件进行通信。

请建议我实现这一目标的最佳方法。我可以参考的任何文档/设计/代码也受到赞赏。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:19:09.980

[这](http://msdn.microsoft.com/en-us/library/ms731060.aspx)是 wcf 服务指南的一个很好的起点。WCF 开发人员在开发时牢记版本控制，因此大多数问题都是已知的并在 wcf 文档中进行了描述

如果您的合同是可变的，而您对此无能为力，那么您可以保留旧接口并实现新接口

假设你有合同

```
interface IContractV1
{
   void M();
   void N();
} 
```

现在在您的第二个版本中，您想要删除一个方法，并添加另一个

```
interface IContractV2
{
   void M();
   void P();
} 
```

您的服务可以使用不同的 URI 来维护两个合同

```
youraddress/service/v1
youraddress/service/v2 
```

现在旧客户端可以连接到旧服务，新客户端可以连接到新服务

请注意，您可以重用数据合同，如指南中所述，但同样您也不能从那里删除任何属性

# php - 如何将 Syntastic 应用于 PHP5.4 功能

> ID：15739141
> 
> 赞同：0
> 
> 时间：2013-04-01T07:06:16.357
> 
> 标签：php, vim

当我使用 [] 而不是 array() 这是 PHP5.4 的新功能时，Syntastic 会导致错误“解析错误”

我想避免这个错误信息。

你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:34:03.173

Syntastic 使用三个程序来检查您的代码：`php`它本身`phpmd`和`phpcs`. 验证实际使用了哪些，并查看是否以及如何配置它以消除此错误。

此外，这些程序中的一个、部分或全部可能不是 5.4 就绪的。

# opencv - 如何在 IplImage 上写文本？

> ID：15739143
> 
> 赞同：1
> 
> 时间：2013-04-01T07:06:34.283
> 
> 标签：opencv, javacv

我正在探索 javacv 中的人脸检测程序，它运行良好。它捕获视频，以 20fps 的速度将其传递给 FaceDetection 类以检测人脸。然后将处理后的图像发送回实时源。如果检测到人脸，则会在人脸周围绘制一个矩形。我需要在人脸检测图像中添加一些文本以及矩形。我尝试使用 cvPutText 方法。但它显示一个错误，“cvPutText 未为 FaceDetection 类型定义”。

FaceDetection.java 的代码：

```
import static com.googlecode.javacv.cpp.opencv_core.CV_AA;
import static com.googlecode.javacv.cpp.opencv_core.IPL_DEPTH_8U;
import static com.googlecode.javacv.cpp.opencv_core.cvClearMemStorage;
import static com.googlecode.javacv.cpp.opencv_core.cvGetSeqElem;
import static com.googlecode.javacv.cpp.opencv_core.cvLoad;
import static com.googlecode.javacv.cpp.opencv_core.cvPoint;
import static com.googlecode.javacv.cpp.opencv_core.cvRectangle;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_BGR2GRAY;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_INTER_LINEAR;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvCvtColor;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvEqualizeHist;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvResize;
import static com.googlecode.javacv.cpp.opencv_objdetect.CV_HAAR_DO_CANNY_PRUNING;
import static com.googlecode.javacv.cpp.opencv_objdetect.cvHaarDetectObjects;
import static com.googlecode.javacv.cpp.opencv_objdetect.cvReleaseHaarClassifierCascade;
import java.io.FileWriter;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import com.googlecode.javacv.cpp.opencv_core.CvFont;
import com.googlecode.javacv.cpp.opencv_core.CvMemStorage;
import com.googlecode.javacv.cpp.opencv_core.CvRect;
import com.googlecode.javacv.cpp.opencv_core.CvScalar;
import com.googlecode.javacv.cpp.opencv_core.CvSeq;
import com.googlecode.javacv.cpp.opencv_core.Cv_iplCreateImageHeader;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import com.googlecode.javacv.cpp.opencv_imgproc.CvDistanceFunction;
import com.googlecode.javacv.cpp.opencv_objdetect.CvHaarClassifierCascade;

@SuppressWarnings("unused")
public class FaceDetection 
{
     private static final int SCALE = 2;
                            public int j=0,k=0,no,total;
                            public String timeStamp;
                            public int w=0,h=0,distance=0;
                            public String viewers,dist;
                            FileWriter out;

     public IplImage FaceDetections(IplImage origImg,int no) throws IOException 
     {          
                out = new FileWriter("D:/log.csv",true);               
                String timeStamp = new SimpleDateFormat("ddMMyyyy_HHmmss").format(Calendar.getInstance().getTime());
                if(no==1)
                {
                   out.append("\n From "+timeStamp+"\n");
                   out.append("Serial No,Face Coordinates,Face No,TimeStamp,Distance,count\n");
                }
                    String CASCADE_FILE ="C:/opencv/data/haarcascades/haarcascade_frontalface_alt2.xml"; 
                            try
                            {                              
                                            IplImage grayImg = IplImage.create(origImg.width(),origImg.height(), IPL_DEPTH_8U, 1);
                                            cvCvtColor(origImg, grayImg, CV_BGR2GRAY);
                                            IplImage smallImg = IplImage.create(grayImg.width()/SCALE,grayImg.height()/SCALE, IPL_DEPTH_8U, 1); 
                                            cvResize(grayImg, smallImg, CV_INTER_LINEAR);                                             
                                            IplImage equImg = IplImage.create(smallImg.width(),smallImg.height(), IPL_DEPTH_8U, 1);
                                            cvEqualizeHist(smallImg, equImg);                                           
                                            CvMemStorage storage = CvMemStorage.create();
                                            CvHaarClassifierCascade cascade =new CvHaarClassifierCascade(cvLoad(CASCADE_FILE));                                                 
                                            CvSeq faces = cvHaarDetectObjects(equImg, cascade, storage,1.1, 3, CV_HAAR_DO_CANNY_PRUNING);                                        
                                            cvClearMemStorage(storage);    
                                            cvReleaseHaarClassifierCascade(cascade);
                                            total = faces.total();                                                            
                                            for (int i = 1; i <= total; i++) 
                                            {
                                                            CvRect r = new CvRect(cvGetSeqElem(faces, i));                       
                                                            cvRectangle(origImg, cvPoint( r.x()*SCALE, r.y()*SCALE ),cvPoint( (r.x() + r.width())*SCALE,(r.y() + r.height())*SCALE ),CvScalar.BLUE, 2, CV_AA, 0);         
                                                            String strRect = String.format("%d-%d-%d-%d ", r.x(), r.y(), r.width(), r.height());                                                                                                                                                                             
                                                            out.append(no+","+strRect+","+i+" ,"+timeStamp+","+distance+","+total+"\n");
                                                            System.out.println(" "+strRect); 

                                                            CvFont font;
                                                            cvInitFont(font, CV_FONT_HERSHEY_SIMPLEX, 0.5, 0.5);
                                                            cvPutText(origImg,"male",cvPoint(100,200),&font,CvScalar.BLUE);                                                    
                                            }
                                            out.flush();
                                            out.close();
                                            CvSeq.deallocateReferences();
                            }

                catch(Exception e)
                {
                            System.out.println("Exception FD"+e);

                }
                            IplImage equImg = null;
                            IplImage smallImg=null;
                            IplImage grayImg =null;
                            return origImg; 
            } 
```

}

有没有其他方法可以向 iplimage 添加文本？我正在使用 opencv 2.4.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:28:12.657

[cvPutText() 是](https://stackoverflow.com/a/9504144/176769) [要走](https://stackoverflow.com/a/12878686/176769)[的路](https://stackoverflow.com/a/9504144/176769) 。

[错误消息](http://java.syntaxerrors.info/index.php?title=The_method_Foo%28%29_is_undefined_for_the_type_Bar)很有趣，您调用 没有问题`cvPutText()`，所以问题一定出在代码的其他部分。确保您正在导入：

```
import static com.googlecode.javacv.cpp.opencv_core.cvPutText; 
```

# spring - 如何在 XA 事务中加入 Spring JDBC 事务？

> ID：15739147
> 
> 赞同：2
> 
> 时间：2013-04-01T07:06:51.053
> 
> 标签：spring, jpa, jdbc, jboss, jta

使用 spring 的 [3.1] SimpleJdbcCall 调用 Oracle 数据库中的存储过程。同样，还有另一个使用 JPA 2.0 [hibernate 3.6.8] 的事务。它们都需要在单个 xa 事务中提交。我想为 JTA 使用 JBoss AS 的 [7.1.1] 事务管理器。

从我的 applicationContext.xml >

```
 <!-- injecting jdbc datasource -->
<bean id="CbsTransactionRepository"
    class="com.misl.treasury.cbsIntegration.repository.CbsTransactionRepositoryJDBC">
    <property name="dataSource" ref="dataSource" />
</bean>

<jee:jndi-lookup id="dataSource" jndi-name="java:/jboss/datasources/CoreDS"/>
<jee:jndi-lookup id="treasuryDataSource" jndi-name="java:/jboss/datasources/TreasuryDS"/>

<!-- JPA entity manager -->
<bean id="treasuryEntityManager"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        </bean>
    </property>
    <property name="dataSource" ref="treasuryDataSource" />
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="persistenceXmlLocation" value="classpath*:META-INF/hibernatepersistence.xml" />

</bean>

<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="txManager"
    class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManagerName" value="java:jboss/TransactionManager" />
    <property name="userTransactionName" value="java:jboss/UserTransaction" /> 
</bean> 
<tx:annotation-driven transaction-manager="txManager" />
<tx:jta-transaction-manager /> 
```

现在，如何在 JTA 事务管理器的范围内登记 spring jdbc 事务，以便我可以使用声明性 @Transactional 注释从单个方法进行数据访问调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:22:06.333

我的假设是因为我没有看到“数据源”[它是 Spring JDBC 的数据源]和事务管理器之间的任何链接，我必须做一些额外的事情来强制 JDBC 事务被纳入 JTA 事务管理器。当我在调试时，我还发现 Spring JDBC 事务一离开 simpleJDBCCallobject.execute 方法就被提交了。这就是为什么我认为我做错了。实际上，applicationContext 配置很好。我的 jndi 数据源不是 XADatasources！在 JBoss AS 7.1 中配置 XADatasources 时，我不得不使用多个属性来描述 url [而不是单个 URL 属性]：

```
 <datasources>
 <xa-datasource jndi-name="java:jboss/datasources/TreasuryDS" pool-name="TreasuryDS" enabled="true" use-ccm="false">
                <xa-datasource-property name="ServerName">
                    192.168.1.197
                </xa-datasource-property>
                <xa-datasource-property name="User">
                    treasury
                </xa-datasource-property>
                <xa-datasource-property name="Password">
                    treasury
                </xa-datasource-property>
                <xa-datasource-property name="PortNumber">
                    1521
                </xa-datasource-property>
                <xa-datasource-property name="DatabaseName">
                    XE
                </xa-datasource-property>
                <xa-datasource-property name="DriverType">
                    thin
                </xa-datasource-property>
                <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
                <driver>OracleJDBCDriver</driver>
                <xa-pool>
                    <is-same-rm-override>false</is-same-rm-override>
                    <interleaving>false</interleaving>
                    <pad-xid>false</pad-xid>
                    <wrap-xa-resource>false</wrap-xa-resource>
                </xa-pool>
                <security>
                    <user-name>treasury</user-name>
                    <password>treasury</password>
                </security>
                <validation>
                    <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker"/>
                    <validate-on-match>false</validate-on-match>
                    <background-validation>false</background-validation>
                    <stale-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleStaleConnectionChecker"/>
                    <exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter"/>
                </validation>
                <statement>
                    <share-prepared-statements>false</share-prepared-statements>
                </statement>
            </xa-datasource>

         <!---
         ...... here goes another XA Datasource .....
         ---->

            <drivers>
                <driver name="OracleJDBCDriver" module="com.oracle.jdbc">
                    <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
                    <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
                </driver>
                <driver name="h2" module="com.h2database.h2">
                    <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                </driver>
            </drivers>
     </datasources> 
```

# php - 转发：查询留言列表

> ID：15739154
> 
> 赞同：1
> 
> 时间：2013-04-01T07:07:23.300
> 
> 标签：php, mysql, sugarcrm

好吧，我再次发布相同的问题但是这次使用可能有效的替代解决方案。

我有以下字段的消息表。

1) id(pk),from_id(fk),to_id(fk),date_entered,message

我的要求如下。

我需要向其他用户显示登录用户的最后一条消息。例如

“mahendra”是一个登录用户与“john”进行通信让我们说 5 条消息，并与“smith”3 条消息进行通信。

在这 5 和 3 条消息中，登录用户（mahendra）可以是发送者（from_id）或接收者（to_id）

我需要向每个用户显示与登录用户的最后一次通信。像这样的东西

1) mahendra-john - 这是 mahendra 和 john 之间的最后一条消息 2) mahendra-smith - 这是 mahendra 和 smith 之间的最后一条消息

在我的上一篇文章中，我无法查询来实现这一点。所以这就是我所做的。

```
$result=mysql_query("SELECT * FROM messages WHERE from_id=$_SESSION['userid'] OR to_id=$_SESSION['userid'] ORDER BY date_entered DESC"); 
```

现在我有登录用户是发送者或接收者的所有记录。

现在我需要过滤其他用户（john 和 smith）和 mahendra 中的最后一条消息并将其放入其他数组；

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:20:41.253

```
SELECT  b.Name Fromname,
        c.name ToName,
        a.date_entered,
        a.Message
FROM
        (
            SELECT  *
            FROM    Messages
            where   (LEAST(from_id, to_id), GREATEST(from_id, to_id), date_entered) IN
                    (
                        SELECT  LEAST(from_id, to_id) as fromID, 
                                GREATEST(from_id, to_id) as toID, 
                                MAX(date_entered) as date_entered
                        FROM    Messages 
                        GROUP   BY fromID, toID
                    )
        ) a
        INNER JOIN UserList b
            ON a.from_id = b.ID 
        INNER JOIN UserList c
            ON a.to_ID = c.ID
WHERE   'Mahendra' IN (b.name, c.Name) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7ca13/3)

* * *

**简要说明**

让我们分解完整的查询。这个问题的核心是，

```
SELECT  *
FROM    Messages
where   (LEAST(from_id, to_id), GREATEST(from_id, to_id), date_entered) IN
        (
            SELECT  LEAST(from_id, to_id) as fromID, 
                    GREATEST(from_id, to_id) as toID, 
                    MAX(date_entered) as date_entered
            FROM    Messages 
            GROUP   BY fromID, toID
        ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7ca13/2)

`Messages`查询的作用是借助MySQL中的使用`LEAST()`和功能从表中获取每个用户的最新对话。两次加入表（*包含用户名列表的表*`GREATEST()`）上的子查询的原因是因为有两列：，依赖于该表。`UserList`*`from_id``to_id`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:59:57.550

也许你想看看这个，在[SQL Fiddle中回答](http://www.sqlfiddle.com/#!2/836fa/6)

这是我的查询：

```
SET @user_id = 1;

SELECT COUNT(M.Id) AS MessageCount 
    , IF(M.from_id = @user_id, M.to_id, M.from_id) AS CommunicatedWith
    , (SELECT message FROM messages WHERE id = MAX(M.id)) AS LastMessage
    FROM messages AS M
    WHERE M.from_id = @user_id OR M.to_id = @user_id
    GROUP BY CommunicatedWith; 
```

这只是**查询**版本，如果您使用的是`stored procedure`，我建议您将会话变量替换`@user_id`为本地变量。*

# android - Android JDBC/JTDS 连接到 MSSQL

> ID：15739159
> 
> 赞同：1
> 
> 时间：2013-04-01T07:07:36.387
> 
> 标签：android, sql-server, jdbc, database-connection, jtds

所以我已经看了大约 10 个其他线程，主要是在这里，但也在其他地方，并尝试了我能想到的一切，但仍然没有成功。我需要在我的 Android 应用程序中与我的 MSSQL 服务器建立一个简单的连接。我知道这对安全的影响！:)

所以我已经包含了 jtds-1.2.7.jar（有人提到 1.3.0 不适用于 Android）并且我正在尝试使用此代码（我尝试了其他几种代码组合，但到目前为止没有运气） ：

进口：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import net.sourceforge.jtds.jdbc.Driver; 
```

实际代码：

```
Connection conn = null;
try {
String driver = "net.sourceforge.jtds.jdbc.Driver";
Class.forName(driver).newInstance();
String connString = "jdbc:jtds:sqlserver://10.0.0.27:1433;encrypt=false;user=test;password=test;instance=SQLEXPRESS";
String username = "test";
String password = "test";
conn = DriverManager.getConnection(connString,username,password); 
```

LogCat 告诉我它失败了 `conn = DriverManager.getConnection(connString,username,password);`

* * *

```
04-01 08:46:07.540: W/Error connection(13554): null
04-01 08:46:07.700: W/IInputConnectionWrapper(13554): showStatusIcon on inactive InputConnection 
```

* * *

我下载了一个应用程序，它可以让您连接到 MSSQL 服务器并运行查询。在该应用程序中，它通过测试/测试很好地连接到 10.0.0.27，因此据我所知，这不是连接问题。

# jquery - 子手风琴启动父手风琴手风琴激活事件

> ID：15739161
> 
> 赞同：0
> 
> 时间：2013-04-01T07:07:38.507
> 
> 标签：jquery, jquery-ui

我有一个手风琴，当打开一个面板时，它会从服务器获取 html，并将其呈现为手风琴作为前一个手风琴的子级。当我单击子手风琴时，它会触发父 onactivate 事件

```
@model IEnumerable<String>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>

    <style type="text/css">

        body {
            font: normal 13px auto "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
            color: #4f6b72;
            background: #E6EAE9;
        }

        a {
            color: #c75f3e;
        }

        #mytable 
        {
            width: 1400px;
            padding: 0;
            margin: 0;
        }

        th {
            font: bold 13px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
            color: #4f6b72;
            border-right: 1px solid #C1DAD7;
            border-bottom: 1px solid #C1DAD7;
            border-top: 1px solid #C1DAD7;
            letter-spacing: 2px;
            text-transform: uppercase;
            text-align: left;
            padding: 6px 6px 6px 12px;
            background: #CAE8EA url(images/bg_header.jpg) no-repeat;
        }

        th.nobg {
            border-top: 0;
            border-left: 0;
            border-right: 1px solid #C1DAD7;
            background: none;
        }

        td {
            border-right: 1px solid #C1DAD7;
            border-bottom: 1px solid #C1DAD7;
            background: #fff;
            padding: 3px 3px 3px 6px;
            color: #4f6b72;
        }

        td.alt {
            background: #F5FAFA;
            color: #797268;
        }

    </style>
</head>
<body>
        @Html.Hidden("SelectedDate", ViewData["SelectedDate"])
        @using (Html.BeginForm())
        {
            @Html.TextBox("DateSelector", "", new { style = "display:table-cell; width:90%", @id = "DatePicker" })
            <input type="submit" value="Get"/>
            <br />
            <div id="Nxts" class="accordion">
                @foreach (var nxtFileName in Model)
                {
                    <h3>@*<img src="@if (item.ExtractedSuccessfully()){<text>../../Images/GreenTick.png</text>} else{<text>../../Images/RedCross.png</text>}"/>*@ @nxtFileName </h3>
                        <div></div>
                }
            </div>

        }

</body>
</html>
    <script src="../../Scripts/jquery-1.9.1.js"></script>
    <script src="../../Scripts/jquery-ui-1.10.1.js"></script>
    <link rel="stylesheet" href="../../CSS/jquery-ui.css" />
<script type="text/javascript">

    $(function () {
        $("#DatePicker").datepicker();
    });

    function PopulatePanel(selectedPanel, NxtFileLocation,Date) {
        $.ajax({
            url: '@Url.Action("ExtractedXMLFiles", "Summary")',
            type: 'POST',
            async: true,
            data: { "NxtFileLocation": NxtFileLocation, "Date": Date },
            success: function (result) {
                selectedPanel.append(result);
                SetupAccordion();
            }
        });
    }

    function SetupAccordion() {
        $(".accordion").accordion({
            collapsible: true,
            heightStyle: "content"
        });
    }

    $(function () {
        $(".accordion").accordion({
            collapsible: true,
            heightStyle: "content", 
            active: false
        });
        $("#Nxts").on("accordionactivate", function (event, ui) {
            if (ui.newPanel.length > 0) {
                if (ui.newPanel.html() == "") {
                    var date = $('#SelectedDate').val();
                    var active = $("#Nxts").accordion("option", "active");
                    var text = $.trim($("#Nxts h3").eq(active).text());
                    PopulatePanel(ui.newPanel, text, date);
                }
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:14:04.823

这是因为事件冒泡，意味着由子元素触发的事件将一直冒泡到文档对象。

在您的情况下，您需要测试触发事件的元素是使用 events`target`属性还是使用`ui`的新标头。

然后

```
 $("#Nxts").on("accordionactivate", function (event, ui) {
        if ($(ui.newHeader).parent().is('#Nxts') && ui.newPanel.length > 0) {
            if (ui.newPanel.html() == "") {
                var date = $('#SelectedDate').val();
                var active = $("#Nxts").accordion("option", "active");
                var text = $.trim($("#Nxts h3").eq(active).text());
                PopulatePanel(ui.newPanel, text, date);
            }
        }
    }); 
```

问题：[演示](http://plnkr.co/edit/DH7S47?p=preview)
解决方案：[演示](http://plnkr.co/edit/gdjxSB?p=preview)

防止从子手风琴传播事件

```
$("#Nxts").on("accordionactivate", '.accordion', function(e){
    e.stopPropagation():
}); 
```

# c# - 使用 winmm.dll 在 C# 中录制

> ID：15739164
> 
> 赞同：0
> 
> 时间：2013-04-01T07:07:52.143
> 
> 标签：c#

我想用 winmm.dll 在我的应用程序中记录，这是我的代码：

```
mciSendString("open new Type waveaudio Alias recsound", "", 0, 0);
mciSendString("record recsound", "", 0, 0);

string command = "set capture time format ms bitspersample 16 channels 1 samplespersec 16000 alignment 4";
mciSendString(command, "", 0, 0); 
```

但波形文件的格式与我设置的不完全一样。录制时如何设置比特率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T10:19:35.157

在调用“记录”之前，您需要先调用“设置”。

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd798661%28v=vs.85%29.aspx)：

> 创建存储数据的文件时，定义了波形音频数据的几个属性。这些属性描述了数据在文件中的结构，一旦开始记录就无法更改

作为旁注；根据我的经验，您需要一次性设置所有参数。您不能单独设置通道，然后再设置 bitspersample。我还没有在任何地方找到这个文档，但是反复试验+谷歌这么说。

这是我的做法：

```
string command = "set recsound time format ms";
command += " bitspersample " + WaveBitsPerSample;
command += " channels " + WaveChannels;
command += " samplespersec " + WaveSamplesPerSec;
command += " bytespersec " + WaveBytesPerSec;
command += " alignment " + WaveAlignment;
error = mciSendString(command, _mciReturnData, 0, IntPtr.Zero); 
```

bytespersec 与 bitspersample、channels 和 samplespersec 相关，对齐方式与 bitspersample 和通道相关。

```
bytespersec = bitspersample * channels * samplespersec / 8
alignment = bitspersample * channels / 8 
```

# ios - 如何识别 App 何时被卸载

> ID：15739165
> 
> 赞同：5
> 
> 时间：2013-04-01T07:07:54.427
> 
> 标签：ios, cordova, plugins, resource-cleanup

当我的应用程序被用户卸载时，我想执行一个功能。

使用 Cordova，有没有一种方法可以**检测卸载事件并执行某些操作？**例如，清理资源。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-01T02:12:54.273

无论有没有 Cordova，都无法做到这一点。iOS 将为您清理所有文件。

# apache - apache 重写模块不传输 $_GET 数组

> ID：15739166
> 
> 赞同：1
> 
> 时间：2013-04-01T07:08:00.600
> 
> 标签：apache, .htaccess, url, mod-rewrite, url-rewriting

我在我的应用程序中使用了一个简单的 URL 重写。

```
RewriteEngine On

RewriteRule ^show/([a-zA-Z0-9]+)/([0-9]+)$ /show.php?d=$1&id=$2
RewriteRule ^sitemap/([a-zA-Z0-9]+)$ /sitemap.php?d=$1
RewriteRule ^sitemap/([a-zA-Z0-9]+)/([0-9]+)$ /sitemap.php?d=$1&page=$2 
```

它们都可以很好地重定向，但问题在于它们没有在过程中传输的 url 参数。

即，我到达了，`example.com/show/district/id`但脚本的行为就像它到达了`example.com/show.php`. 我`var_dump()`在php中使用调试并`var_dump($_GET)`返回一个空数组。

**注意：我是 htaccess 和 url 重写的新手，所以实际上无法从任何其他问题中找到我的答案，请帮忙。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:37:14.990

尝试使用以下修改后的代码：

```
Options -MultiViews
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^show/([a-zA-Z0-9]+)/([0-9]+)$ show.php?d=$1&id=$2 [L,QSA]
RewriteRule ^sitemap/([a-zA-Z0-9]+)$ sitemap.php?d=$1 [L,QSA]
RewriteRule ^sitemap/([a-zA-Z0-9]+)/([0-9]+)$ sitemap.php?d=$1&page=$2 [L,QSA] 
```

**关于多视图的说明：**

如果您不使用`-MultiViews`，服务器会自动假定您正在尝试`show.php`直接运行，因为它会查找`show.*`. 它知道该文件`show`不存在，因此会搜索`show`开头有的文件。

有关详细信息，请参阅[此文档](http://httpd.apache.org/docs/2.2/content-negotiation.html#multiviews)。

# security - 我通过电子邮件收到了我的密码，想确认这不安全

> ID：15739172
> 
> 赞同：1
> 
> 时间：2013-04-01T07:08:40.773
> 
> 标签：security, passwords, password-storage

我最近忘记了一个网站的密码，并通过他们的支持流程来解决这个问题。他们通过电子邮件将我的原始密码以明文形式发送给我。

我给他们发了一封严厉的电子邮件，指出电子邮件不是一种安全的传输协议，并且通过向我发送我的密码的明文版本，他们表明他们没有存储我密码的散列版本。我接着说，任何有权访问他们的数据库或入侵他们的系统的人都可以访问密码。

这些断言正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:15:35.813

是的，你的断言是正确的。

虽然我们不能确定他们是否以明文格式存储密码，但很明显它是以无损形式存储的，而且他们（也可能是攻击者）有可能计算出明文密码。

无论如何，这是很差的安全性。

作为用户，您可以采取的一种减轻此类风险的方法是为每个站点分配一个唯一的随机密码。有许多软件工具可让您管理此类密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:11:23.340

如果它是您的原始密码，那么它可能是不安全的。他们可能正在加密它，但不太可能。即使是这样，加密密码也只比以纯文本保存密码好一点。

# knockout-validation - 淘汰赛验证：将errorElementClass应用于输入父级的任何选项？

> ID：15739173
> 
> 赞同：7
> 
> 时间：2013-04-01T07:08:54.403
> 
> 标签：knockout-validation

Knockout 验证插件是否有任何选项可以将错误类应用于错误输入的父级或父级父级？如果没有，有人可以建议一种修改淘汰赛验证的方法来做到这一点吗？

请参阅以下小提琴以获取我正在尝试实现的示例。开箱即用剔除验证设置输入的类，但我希望它设置包含控件组的类：

[http://jsfiddle.net/fbA4m/1/](http://jsfiddle.net/fbA4m/1/)

**看法**

```
<p>Clear the field and tab out of it to "see" the current behaviour - error class is added directly to the input by knockout validation. But I want to add class "error" to control-group containing the input instead of directly to the input.</p>
<div class="form-horizontal">
<div class="control-group">
<label class="control-label">Field</label>
<div class="controls">
<input type="text" data-bind="value: testField" class="">
</div>
</div>
    <button data-bind="click: setErrorOnControlGroup">Click to see desired effect</button>
</div> 
```

Javascript

```
ko.validation.configure({
    registerExtenders: true,
    messagesOnModified: true,
    decorateElement: true,
    errorClass: 'error',
    insertMessages: false,
    parseInputAttributes: true,
    messageTemplate: null
});

var viewModel = {
    testField: ko.observable("123").extend({required: true}),
    setErrorOnControlGroup: function() {
        $("input.error").removeClass("error");
        $(".control-group").addClass("error");
    }
};

ko.applyBindings(viewModel); 
```

**样式表**（仅供说明 - 我不应该需要它，因为我想使用 twitter 引导样式）

```
/*NOTE: This is not actually the style I want, it just illustrates the default behaviour of knockout validation*/
input.error {
    background-color: #aaffaa;
} 
```

我问是因为我正在使用 twitter 引导样式，它使用输入的父控件组元素来设置“错误”输入的样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T21:57:56.110

我调整了互斥锁的小提琴以达到效果。 [http://jsfiddle.net/3vGVC/9/](http://jsfiddle.net/3vGVC/9/)。不过还有改进的余地，也许可以指定要应用的 css 类。这里是bindingHandler，可以应用到容器上。

```
ko.bindingHandlers.validationElement = {
update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    var valueIsValid = valueAccessor().isValid();
    if(!valueIsValid) {
        $(element).addClass("error");
    }
    else {
        $(element).removeClass("error");
    }
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T05:40:01.743

您可以编写自己的绑定。查看`validationElement`敲除验证源中的绑定源。

# android - Android - 无法从 WCF 数据服务中检索 $metadata

> ID：15739176
> 
> 赞同：0
> 
> 时间：2013-04-01T07:09:12.493
> 
> 标签：android, wcf-data-services, restlet

我正在使用 Restlet-Framework 2.1.2，从我的 Android 应用程序中，我尝试从 WCF 数据服务中检索数据并收到 LogCat 错误消息：

```
启动 HTTP 客户端
在 http:// 获取 http://Server.domain.local:82/northdata.svc/ 的元数据
Server.domain.local:82/northdata.svc/$metadata
GC_CONCURRENT 释放 1154K，56% 释放 2966K/6727K，外部 1625K/2137K，暂停 4ms+6ms
无法获取 http://Server.domain.local:82/northdata.svc/ 的元数据
java.io.IOException：无法创建自定义 SAX 源
...

```

我的步骤：我在 Manifest 文件中允许 INTERNET 权限：

```
uses-permission android:name="android.permission.INTERNET"
uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" 
```

我替换 HTTP 客户端：

```
Engine.getInstance().getRegisteredClients().clear();
Engine.getInstance().getRegisteredClients().add(new HttpClientHelper(null)); 
```

并使用严格模式：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

我使用 AsyncTask，我的代码：

```
protected String doInBackground(Object... params) {
        {

        try {

            NorthdataService service = new NorthdataService();
            Query<Customers> queryCustomers = service
                    .createCustomersQuery("/Customers");
            }

        } catch (Exception e) {
            // return e;
        }
        return customers;
    } 
```

会是什么呢？我如何检查\从 $metadata 获取数据？

PS我在Android内部浏览器中打开我的数据服务链接，它打开了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:03:19.900

我解决了我的问题：
1.我创建了新的 Android 项目
2.将文件从 Restlet-Framework 复制到 libs 文件夹（在我的项目中）：

> org.restlet.jar
> org.restlet.ext.atom.jar
> org.restlet.ext.html.jar
> org.restlet.ext.httpclient.jar
> org.restlet.ext.net.jar
> org.restlet.ext.odata.jar
> org.restlet.ext.ssl.jar
> org.restlet.ext.xml.jar

3.创建新包“northwindmodel”
4.导入自动生成的java类fom WCF DataService 5.添加权限：

> 使用权限 android:name="android.permission.INTERNET"
> 使用权限 android:name="android.permission.WRITE_EXTERNAL_STORAGE"
> 使用权限 android:name="android.permission.READ_EXTERNAL_STORAGE"
> 使用权限 android:name=" android.permission.ACCESS_NETWORK_STATE"

6.onCreate中的Incert代码：

```
 NorthdataService service = new NorthdataService();
    Query<Customers> query = service.createCustomersQuery("/Customers"); 

    Log.d(log_tag, query.toString());

    for (Customers cust : query){
        Log.d(log_tag, "Customer Name - " + cust.getContactName());
    } 
```

在此之前我做了同样的事情，但是在重新创建项目后问题得到了解决。

# android - 处理来自 Playstore android 的传入 Facebook 应用程序请求 ID

> ID：15739182
> 
> 赞同：1
> 
> 时间：2013-04-01T07:09:41.510
> 
> 标签：android, facebook

我的问题是，当用户在 facebook 上单击应用程序请求通知时，如果已经安装了应用程序，它会获取并处理应用程序“请求 ID”。这是代码

```
Uri intentUri = getIntent().getData();
        if (intentUri != null) {
            String requestIdParam = intentUri.getQueryParameter("request_ids");
            if (requestIdParam != null) {

                String array[] = requestIdParam.split(",");
                requestId = array[0];
                Log.v("Application Request ID***","APP ID: "+requestId);

            }
        } 
```

但是，当应用程序尚未安装在设备上时，它会将用户带到 Playstore，然后用户单击安装。在这种情况下，我无法接收应用程序“requestId”。

在这种特殊情况下，“requestId”丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:36:42.107

这是默认行为。如果用户需要从 Play 商店安装应用程序，Facebook SDK 目前不支持获取该信息。

# ssis - 如何让 SSIS 处理格式错误的 csv 文件？

> ID：15739187
> 
> 赞同：0
> 
> 时间：2013-04-01T07:09:51.453
> 
> 标签：ssis, sql-server-2008-r2

根据我们的项目要求，我将 SQLserver 2000 服务器中的 DTS 迁移到 SQL server 2008 R2 中的 SSIS。现在 DTS 完全可以使用以下 Csv 文件。

> Col1;Col2;Col2;Col41;Col5;Col6;Col71;Col8;Col9;Col10;Col11,
> ;Val1,
> ;Val2,
> ;Val3,
> ;Val4,
> ;Val5,
> ;Val6,
> ;Val7,
> ;Val8,
> ;Val9,
> ; Val10,
> ;Val11,
> ;Val12,
> ;Val13,
> ;Val14,

但是 SSIS 工作不正常，并且出现问题

DTS 将平面文件转换为表格，如下图所示 ![SQL Server 2000 中的表视图](https://i.stack.imgur.com/WbK3v.png)

在 SSIS 中，它正在转换，如下图所示 ![SQL Server 2008 R2 中的表视图](https://i.stack.imgur.com/OmIb3.png)

如何解决这个问题？我们无法更改 csv 文件的格式，因为它是由某些第三方服务生成的。我们必须在 SSIS 端解决这个问题。

# android - 如何使 AlertDialog 上的 SingleChoiceItem 看起来更紧凑？

> ID：15739200
> 
> 赞同：1
> 
> 时间：2013-04-01T07:10:37.383
> 
> 标签：android, styles, customization, android-alertdialog

默认的 AlertDialog 具有更大的 textSize 和更大的填充。

我可以像这样使用 Style 来控制 textSize

```
ContextThemeWrapper cw = new ContextThemeWrapper( this, R.style.AlertDialogTheme );
AlertDialog.Builder builder = new AlertDialog.Builder(cw); 
```

然后

```
<style name="AlertDialogTheme" parent="android:Theme.Dialog">
    <item name="android:textSize">18sp</item>
</style> 
```

现在如何调整 AlertDialog 的垂直间距/填充？下面的样式不会影响任何东西。或者至少我们也可以调整 RadioButton 的大小？

```
<style name="AlertDialogTheme" parent="android:Theme.Dialog">
    <item name="android:paddingTop">0dp</item>
    <item name="android:paddingBottom">0dp</item>
</style> 
```

这条线是我想使用带有样式自定义的默认 AlertDialog。我不想创建自定义适配器只是为了为 AlertDialog 制作自定义视图。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T01:40:28.013

我想除了使用适配器构建完整的自定义对话框之外别无选择。不管怎么说，还是要谢谢你。

# java - 我无法创建临时文件

> ID：15739201
> 
> 赞同：0
> 
> 时间：2013-04-01T07:10:38.600
> 
> 标签：java

我正在尝试使用 java 创建一个临时文件。但是当我运行我的代码时，它显示以下错误。

```
number.java:7: cannot find symbol
symbol  : class Path
location: class number
    Path tempFile = Files.createTempFile(null, ".txt");
    ^
number.java:7: cannot find symbol
symbol  : method createTempFile(<nulltype>,java.lang.String)
location: class Files
    Path tempFile = Files.createTempFile(null, ".txt");
                         ^
2 errors 
```

这是代码，当我导入 java.io.file;.then 显示错误包不存在

```
import java.io.*;

public class number{
public static void main(String args[])
{try {
    Path tempFile = Files.createTempFile(null, ".txt");
    System.out.format("The temporary file" +
        " has been created: %s%n", tempFile);
} catch (IOException x) {
    System.err.format("IOException: %s%n", x);
}
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:11:15.057

`Files.createTempFile(null, ".txt");`第一个参数不能为空，它可以是任何前缀（基本上是为了在许多其他文件中识别您的临时文件）。传递一些非空值。

```
Files.createTempFile("myfile", ".txt"); 
```

另外，正确导入如下

```
import java.nio.file.*;
import java.io.*; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:18:22.997

Java SE 7 版本中引入的 Path 类是 java.nio.file 包的主要入口点之一。如果您的应用程序使用文件 I/O，您将​​需要了解此类的强大功能。有关更多信息，请参见：http: [//docs.oracle.com/javase/tutorial/essential/io/pathClass.html](http://docs.oracle.com/javase/tutorial/essential/io/pathClass.html)

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html)

# shell - 寻找昨天 | Unix Shell 脚本中的上周五等日期

> ID：15739202
> 
> 赞同：2
> 
> 时间：2013-04-01T07:10:45.047
> 
> 标签：shell, unix, date

我用下面的代码找出了昨天和上周五的日期。它在server1中工作。

```
YESTERDAY=$(date --date="yesterday" +"%m%d%Y")
echo YESTERDAY: $YESTERDAY;

LASTFRIDAY=$(date --date='last Friday' +"%m%d%Y")
echo LAST FRIDAY: $LASTFRIDAY; 
```

我需要将脚本移动到 Server2，它会给出以下错误。

```
date: illegal option -- date=yesterday
usage:  date [-u] mmddHHMM[[cc]yy][.SS]
        date [-u] [+format]
        date -a [-]sss[.fff]
YESTERDAY:
date: illegal option -- date=last Friday
usage:  date [-u] mmddHHMM[[cc]yy][.SS]
        date [-u] [+format]
        date -a [-]sss[.fff]
LAST FRIDAY: 
```

谁能帮我解决这个问题。任何其他可靠的方法来获得这个可以在任何服务器上工作。

# sencha-touch - sencha 构建包后无法调用未定义的方法“getWindowHeight”

> ID：15739208
> 
> 赞同：0
> 
> 时间：2013-04-01T07:11:20.173
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1, sencha-cmd

我开发了一个应用程序，它需要根据设备的高度和宽度绘制一些容器，所以我使用了

```
[Ext.Viewport.getWindowHeight()][1] &     
Ext.Viewport.getWindowWidth() 
```

在我的代码中的几个地方，它工作正常，直到我这样做`sencha app build package`。当我尝试打开打包的应用程序时，出现此错误：

```
Uncaught TypeError: Cannot call method 'getWindowHeight' of undefined       app.js:1 (anonymous function) 
```

过去在 Sencha 论坛中提出了类似的问题，但没有得到答复： [http ://www.sencha.com/forum/showthread.php?240494-Call-method-getWindowHeight-of-undefined](http://www.sencha.com/forum/showthread.php?240494-Call-method-getWindowHeight-of-undefined)

根据 Sencha docs：**Ext.Viewport 是使用 Ext.setup 时创建的实例**，**如果使用 Ext.onReady，则不会创建 Ext.Viewport 的此实例**。但在我的 app.js 中，我使用的是`Ext.application()`not`Ext.setup`或`Ext.onReady`,

这是没有创建单例的原因吗？如果是，我该如何解决？

我正在使用 Sencha Cmd Ver 3.0.2.288 & Sencha Touch ver 2.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T17:37:53.073

我对这个问题的解决方案是使用低级 javascript 而不是 Sencha 的框架。

如此处所述：http: [//www.howtocreate.co.uk/tutorials/javascript/browserwindow](http://www.howtocreate.co.uk/tutorials/javascript/browserwindow)

就我而言，使用

```
window.innerHeight 
```

就足够了，因为我的用户不会使用 IE。

# java - 将文本从 TextView 复制到剪贴板

> ID：15739219
> 
> 赞同：1
> 
> 时间：2013-04-01T07:12:03.440
> 
> 标签：java, android, textview, android-button

目的是为屏幕本身的复制按钮添加功能。它的作用是在文本视图中复制 text9 ）并将其复制到用户的剪贴板，从而使其可用于转发该文本并在其他应用程序中使用它。我该怎么办？

```
#Java File.
package com.dreamgoogle.gihf;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.ImageButton;
import android.widget.TextView;

public class Quotes extends Activity {

    ImageButton next;
    ImageButton previous;
    ImageButton copytext;
    TextView q;
    TextView nm;
    String[] str;
    int i, s;

... 
.... 
.... 
... 
... 
... 

        copytext.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

            }
        });
    } 
```

# q 是要复制其文本的文本视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:18:33.433

[clipBorad 管理器](http://developer.android.com/reference/android/content/ClipboardManager.html)可用，但适用于 api 11 及更高版本。对于 11 之前的设备，我相信没有选择。[在这里阅读](http://developer.android.com/guide/topics/text/copy-paste.html)。另外搜索更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:19:01.647

使用 ClipBoardManager 的 setText 方法：

```
copytext.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

//
    q = (TextView) findViewById(R.id.txt); // fetch the textview from the layout
    ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
         ClipData clip = ClipData.newPlainText("label", q.getText().toString());
         clipboard.setPrimaryClip(clip);

            }
        }); 
```

[原Q/A](https://stackoverflow.com/a/238297/1221203)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:19:20.250

仅复制文本将此代码放入您的`copytext.onclicklist..`方法中：

```
 ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
 ClipData clip = ClipData.newPlainText("label", ""+edittext.getText().toString());
 clipboard.setPrimaryClip(clip); 
```

# javascript - 我是否总是必须应用一个函数（匿名或其他）来为事件处理程序传递 JavaScript 参数？

> ID：15739220
> 
> 赞同：0
> 
> 时间：2013-04-01T07:12:04.730
> 
> 标签：javascript, event-handling

我很难找到有关在 JavaScript 中为事件传递参数的完全正确语法的详细信息。看来我总是必须创建一个函数才能从事件处理程序中获取函数的参数......而且它看起来很奇怪而且没有必要。这是示例代码：

```
function styleSet(id1,id2,styleType)
{
    document.getElementById(id1).style[styleType] = document.getElementById(id2).value;
}

document.getElementById("pFamilyID").onkeyup = function(){styleSet("paraID","pFamilyID","fontFamily")}; 
```

该事件可以正常工作，但我创建了一个匿名函数来应用参数。如果我尝试只传递以下参数：

```
element.onkeyup = styleSet("paraID","pFamilyID","fontFamily"); 
```

......那么它就行不通了。所以问题是；传递参数时是否总是必须创建该函数，还是有更有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:21:52.100

当你做两件不同的事情时它不起作用

工作的函数是一个属性**赋值**，当事件发生时属性（函数）被调用

第二个是**调用**，因为您将函数的结果分配给在 keydown 上调用的属性，该属性不起作用。

请注意，大多数事件驱动函数将事件作为第一个参数接收（除其他参数外，检查`arguments`）。

因此，您必须将其包装在一个匿名函数中，或者至少提供一个与调用 keyup 事件的签名相匹配的函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:29:47.330

也许你在调用函数时弄乱了函数的声明。this.onkeyup=function(params){...} 只是一个声明，当你调用它时，使用“this.onkeyup(params);”。以这种方式编写函数的目的是保持 OO 风格。OO风格与js中的java或c#略有不同。

# itextsharp - 如何在 itextsharp 中实现小型大写字母

> ID：15739221
> 
> 赞同：1
> 
> 时间：2013-04-01T07:12:14.563
> 
> 标签：itextsharp

![在此处输入图像描述](https://i.stack.imgur.com/Xi5sx.png)在一个 PDf 中，我得到了小型大写字母，字体大小为 0.0。我已经提取字体

```
using:------  

iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(curBaseline[Vector.I1], curBaseline[Vector.I2], topRight[Vector.I1], topRight[Vector.I2]);
Single curFontSize = rect.Height; 
```

int 这段代码 curfontsize 我得到了 0.0。但我能够提取字体系列。但无法提取字体大小。所以文本没有显示。任何人都可以为此提供解决方案。有没有其他方法。？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:08:52.390

我只是试图重现您的`rec.Height == 0.0`问题

```
iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(curBaseline[Vector.I1],
    curBaseline[Vector.I2], topRight[Vector.I1], topRight[Vector.I2]);
Single curFontSize = rect.Height 
```

这样做我假设您选择`curBaseline`表示基线的起点和`topRight`表示上升线的终点。`Rectangle rect`我的结果（分别为 my 收到的每个`TextRenderInfo`对象输出宽度和高度以及文本`RenderListener`）：

```
[140,29,   6,66] "nagement en beleid. Via omscholing ("
[ 11,87,   5,00] "PDB"
[  4,95,   6,66] ", "
[  9,36,   5,00] "MB"
[  4,37,   5,00] "A"
[ 26,76,   6,66] ", deels "
[ 11,28,   5,00] "SPD"
[  5,82,   6,66] ") "
[ 88,66,   6,66] "ben ik in het financiële v" 
```

因此，“PDB”、“MB”、“A”和“SPD”的高度**不是**0.0，而是 5.00。

此结果是使用相当最新的 iText 版本生成的。因此，您可能希望首先更新您的库。如果这没有帮助，您可能希望在此处显示您的源代码以进行查看。

**编辑**

正如这里的评论中所讨论的，我扩展了测试类以提取实际字体大小（**Tf**操作数的大小以及应用当前转换和文本矩阵后的大小）。结果：

```
[140,29,   6,66,   8,50] "nagement en beleid. Via omscholing (" ([, , , AAHACD+SlimbachStd-Book] at   1,00)
[ 11,87,   5,00,   6,38] "PDB" ([, , , AAGNLJ+SlimbachStd-Book-SC750] at   1,00)
[  4,95,   6,66,   8,50] ", " ([, , , AAGNLJ+SlimbachStd-Book-SC750] at   1,00)
[  9,36,   5,00,   6,38] "MB" ([, , , AAGNLJ+SlimbachStd-Book-SC750] at   1,00)
[  4,37,   5,00,   6,38] "A" ([, , , AAGNLJ+SlimbachStd-Book-SC750] at   1,00)
[ 26,76,   6,66,   8,50] ", deels " ([, , , AAHACD+SlimbachStd-Book] at   1,00)
[ 11,28,   5,00,   6,38] "SPD" ([, , , AAGNLJ+SlimbachStd-Book-SC750] at   1,00)
[  5,82,   6,66,   8,50] ") " ([, , , AAHACD+SlimbachStd-Book] at   1,00)
[ 88,66,   6,66,   8,50] "ben ik in het financiële v" ([, , , AAHACD+SlimbachStd-Book] at   1,00) 
```

如您所见，**Tf**字体大小始终为 1.0，小型大写字母的有效字体大小（缩放后）为 6.38。

由于我主要使用 iText（不是 iTextSharp），因此我也在 Java 中完成了必要的反射和自省工作。这是`RenderText`我使用的实现代码：

```
public void renderText(TextRenderInfo renderInfo)
{
    LineSegment curBaseline = renderInfo.getBaseline();
    LineSegment curAscentline = renderInfo.getAscentLine();
    Rectangle rect = new Rectangle(curBaseline.getStartPoint().get(Vector.I1),
            curBaseline.getStartPoint().get(Vector.I2),
            curAscentline.getEndPoint().get(Vector.I1),
            curAscentline.getEndPoint().get(Vector.I2));

    try {
        System.out.printf("  [%6.2f, %6.2f, %6.2f] \"%s\" (%s at %6.2f)\n",
                rect.getWidth(), rect.getHeight(),
                getEffectiveFontSize(renderInfo),
                renderInfo.getText(),
                Arrays.asList(renderInfo.getFont().getFullFontName()[0]),
                getFontSize(renderInfo));
    } catch (Exception e) {
        e.printStackTrace();
    }
}

float getEffectiveFontSize(TextRenderInfo renderInfo)
        throws IllegalArgumentException, SecurityException,
            IllegalAccessException, InvocationTargetException,
            NoSuchFieldException, NoSuchMethodException
{
    Method convertHeight = TextRenderInfo.class.getDeclaredMethod("convertHeightFromTextSpaceToUserSpace", Float.TYPE);
    convertHeight.setAccessible(true);
    return (Float)convertHeight.invoke(renderInfo, getFontSize(renderInfo));
}

float getFontSize(TextRenderInfo renderInfo)
        throws SecurityException, NoSuchFieldException,
            IllegalArgumentException, IllegalAccessException
{
    Field gsField = TextRenderInfo.class.getDeclaredField("gs");
    gsField.setAccessible(true);
    GraphicsState gs = (GraphicsState) gsField.get(renderInfo);
    return gs.getFontSize();
} 
```

.Net 内省和反射机制应该可以实现类似的技巧。

# javascript - 无法调用javascript函数

> ID：15739225
> 
> 赞同：0
> 
> 时间：2013-04-01T07:12:39.437
> 
> 标签：javascript

我想在 innerhtml 中写 div，但我无法在 div 上写 onclick。请帮忙！！

下面是我写的一段代码：

```
var td = document.createElement('td');
var act = "SSC00457";
innerHtml = "<div class='subMenuDiv' id='"+act+"'    onclick='alert(this);callMenu(this);'>"+act+"</div>";
td.innerHTML = innerHtml;

function callMenu(obj)
{
alert('id : '+obj );
} 
```

在这里，我可以在调用 callMenu 之前看到警报，但我无法在 callMenu 函数中打印警报。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:22:54.033

像这样做：

```
var td = document.createElement('td');
var act = "SSC00457";

var subMenuDiv = document.createElement('div');
subMenuDiv.className = 'subMenuDiv';
subMenuDiv.id = act;
subMenuDiv.innerHTML = act;
td.appendChild(subMenuDiv);

subMenuDiv.addEventListener('click', function(){
    alert(this);
    callMenu(this);
});

function callMenu(obj){
    alert('id : '+obj );
} 
```

[小提琴](http://jsfiddle.net/8GeA9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:27:01.303

尝试这个..

```
document.getElementById(act).addEventListener('click',function(){
alert(this.id)
},false); 
```

# php - zend 框架工作索引动作给出 404

> ID：15739230
> 
> 赞同：0
> 
> 时间：2013-04-01T07:13:12.050
> 
> 标签：php, apache, .htaccess, zend-framework, mod-rewrite

我今天遇到了一个奇怪的问题，我试图通过谷歌修复它到目前为止没有运气。

问题是我在 zend 框架应用程序中有一个 IndexController.php 文件，它有一个简单的操作叫做 about 但是当我试图通过它访问它时

`http://mysite/index/about`它会给我 404

如果尝试过

`http://mysite/Index/about`它会正确加载（使用大写 I）这个案例问题只给索引控制器我的其他控制器在 ubuntu 上运行良好

这里是我的 htaccess 文件，我启用了 mod_rewirte 并且 allowe_overried 已设置为 all

```
# Rewrite Rules for Zend Framework
RewriteEngine On
# Add File Names or Extentions of files that you want to be able to access
#RewriteRule !alternate.php|.(js|css|ico|bmp|gif|jpg|png|xml|xsl|eot|svg|ttf|woff)$ index.php
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]

# Security: Do not allow Browsing of Directories
Options -Indexes

# additional headers related to security
<IfModule mod_headers.c>
    # defends against 'ClickJacking' attacks by disallowing this site to be displayed in an IFRAME
    Header always append X-Frame-Options DENY
    # helps prevent attacks based on MIME-type confusion by rejecting css/js responses with incorrect MIME type
    Header always append X-Content-Type-Options nosniff
</IfModule> 
```

如果你们有任何想法，请发表

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:00:44.393

尝试添加此行以确保选项正确：

```
Options +FollowSymlinks -MultiViews 
```

# cryptography - 多线程/TPL 应用程序中的静态加密/解密问题

> ID：15739231
> 
> 赞同：1
> 
> 时间：2013-04-01T07:13:14.713
> 
> 标签：cryptography, task-parallel-library, static-methods, rijndaelmanaged

我的一个库中有一个带有静态方法的静态加密/解密类。代码有点大，所以我把它贴在这里： http: [//pastebin.com/zRZtNmjU](http://pastebin.com/zRZtNmjU)

直到它开始在调用中执行的某些代码的执行堆栈中使用之前，我对这段代码没有任何问题`Parallel.ForEach()`。我尝试在一些 MemoryStream 和 CryptoStream 变量上添加一些使用，`lock`但这似乎没有帮助。我这样做是因为我相当肯定这个问题是由从多个线程访问这个静态类和方法引起的。

我不断得到的例外是：“填充无效，无法删除。”

当执行到达`decryptedTextStream.FlushFinalBlock();`名为 Decrypt 的代码中的最后一个方法（第 250 行）时，会发生此异常。

我的问题是 - 我无法弄清楚代码有什么问题，我想知道唯一的问题是类和方法是静态的吗？几个月来，我一直在使用此代码而没有出现任何问题，并且最近才开始在其他一些 TPL 代码中使用它时遇到问题。我应该将这个类重构为基于实例的，还是不能解决我遇到的异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:21:43.010

您的代码根本不是线程安全的......会发生什么？目前，您有一个 iCryptoTransform 被创建一次（静态构造函数），因此每个加密/解密调用都将使用该对象......

有两个问题：

1.  如果 2 个或更多线程尝试并行加密/解密怎么办？您的系统有一个在所有调用中共享的内部状态，这是不好的，因为在具有 IV 的操作模式下，每个加密块都依赖于之前的块......这对安全性有好处......但如果块被加密则非常糟糕before 不属于当前的块流，因为另一个胎面管道同时通过同一实例...

2.  你不在乎你的 iCryptoTransform 是否可重用......在你的情况下，它是，但通常，你需要检查 CanReuseTransform 成员或为每个操作创建一个新成员

建议：

让您的 ICryptoTransform 存在于 Encrypt()/Decrypt() 方法中...不要使用静态变量...

# ios - UIDocumentInteractionController 的 Open In 功能？

> ID：15739232
> 
> 赞同：1
> 
> 时间：2013-04-01T07:13:17.023
> 
> 标签：ios

如何为 UIDocumentInteractionController 的 Open In 功能指定特定的“白”应用程序列表？我在 UIDocumentInteractionController 文档中找不到任何关于它的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T22:55:28.287

我不认为这是可能的。UIDocumentInteraction 控制器不允许您限制用户决定如何打开您的文档。

请参阅：[有没有办法限制 UIDocumentInteractionController 中显示的应用程序？](https://stackoverflow.com/questions/11977635/is-there-a-way-to-limit-the-applications-shown-in-a-uidocumentinteractioncontrol)

唯一的例外是在 iOS 7 中，您可以将托管/非托管应用程序限制在托管和受监督设备的“打开方式”功能上。

# iphone - 如何将标题设置为 UIPopOverController 的导航栏？

> ID：15739243
> 
> 赞同：0
> 
> 时间：2013-04-01T07:14:01.167
> 
> 标签：iphone, ios, ipad, avfoundation, uipopovercontroller

我正在开发 iPad 应用程序。这里它由 PopOver 组成。我需要显示相机并捕获图像。为此，我使用的是 AVFoundation 框架，默认导航栏没有出现。所以我按照以下步骤操作

```
cameraVC = [[CameraViewController alloc] initWithNibName:@"CameraViewController" bundle:nil ];
cameraVC.navigationItem.title = @"Take Photo";

UINavigationController *naviCon = [[UINavigationController alloc]initWithRootViewController:cameraVC];

UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:naviCon];
 self.popoverController = popover;
 self.popoverController.delegate = self;
 self.popover.popoverContentSize = CGSizeMake(450, 350);

[self.popoverController presentPopoverFromRect:CGRectMake(295, 40, 0, 0) inView:appDelegate.splitview.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

如果你已经解决了，请指导我哪里错了。在此先感谢

![在此处输入图像描述](https://i.stack.imgur.com/a3ScC.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T07:41:39.700

修改代码如下并检查

```
cameraVC = [[CameraViewController alloc] init];

UINavigationController *naviCon = [[UINavigationController alloc]initWithRootViewController:cameraVC];

UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:naviCon];
 [self.presentPopOverController presentPopoverFromBarButtonItem:self.yourBarButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

然后在编写以下代码的`viewDidLoad`方法中`CameraViewController`

```
self.navigationItem.title = @"your title"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T08:23:44.940

如果导航栏没有出现，请在您的 cameraViewController 中添加一个 UIToolBar 来执行您想要的功能。

我在我的项目中做了这样的事情，我在 popOVer 中得到了导航栏。

```
 PageSelectorViewController *pageSelector=[[PageSelectorViewController  alloc]initWithStyle:UITableViewStylePlain] ;
        UINavigationController *navControl=[[UINavigationController alloc]initWithRootViewController:pageSelector];

        self.selectedPagesPopOver=[[UIPopoverController alloc]initWithContentViewController:navControl];
        [self.selectedPagesPopOver presentPopoverFromBarButtonItem:showPages permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

我想从自定义矩形呈现 popOver 是问题，尝试从 BarButton 呈现并尝试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T11:05:17.317

这可以帮助你……</p>

```
MyController* controller = [[MyController alloc] initWithNibName:@"MyController" bundle:nil];
UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:controller];

controller.title = @"My Title"; //or you can put this line in MyController class viewDidLoad method as self.title = @"My Title";

controller.contentSizeForViewInPopover = CGSizeMake(320.0, 480.0);

_myPopover = [[UIPopoverController alloc] initWithContentViewController:navController];

[_myPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

# javascript - ember 中的三态复选框

> ID：15739244
> 
> 赞同：2
> 
> 时间：2013-04-01T07:14:02.787
> 
> 标签：javascript, ember.js, handlebars.js, ember-data

我必须在 ember 中快速实现一个三态复选框，所以我想知道是否有人可以给我一个指向在 ember 中实现三态复选框的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-25T17:19:27.377

`indeterminate`Ember 的当前版本 (2.0) 已通过该属性支持此功能。

```
{{input type="checkbox" 
    name=name 
    checked=isChecked 
    indeterminate=isIndeterminate}} 
```

[http://emberjs.com/api/classes/Ember.Templates.helpers.html#toc_checkbox](http://emberjs.com/api/classes/Ember.Templates.helpers.html#toc_checkbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T07:54:55.270

不知道你是否还需要这个，这是我用的：

```
FM.TriStateCheckbox = Ember.Checkbox.extend({
  attributeBindings: ['indeterminate'],
  indeterminate: false
}) 
```

你可以像普通复选框一样使用它

```
...
<th>{{view FM.TriStateCheckbox checkedBinding="allSelected" indeterminateBinding="someSelected"}}</th>
... 
```

Please note that the binding for indeterminate (ie this case `someSelected`) should also return `false`when all is selected.

```
someSelected: function(key, value) {
  if (this.get('allSelected')) { return false }
  return this.get('children').someProperty('isSelected', true)
}.property('children.@each.isSelected') 
```

# sql-server - 如何合并两个存储过程

> ID：15739246
> 
> 赞同：0
> 
> 时间：2013-04-01T07:14:19.603
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我有两个存储过程，一个用于 INSERT，第二个用于更新，我想将它们合并为一个，所以您能告诉我应该使用哪个状态吗？

```
CREATE PROCEDURE Tools
(@CategoryID_1 int,
 @CategoryName_2 nvarchar(100),
 @Description_3 ntext)

AS INSERT INTO Categories 
 (CategoryID,
 CategoryName,
 Description) 

VALUES 
(@CategoryID_1,
 @CategoryName_2,
 @Description_3) 
```

去

```
CREATE PROCEDURE Tools1

     (@CategoryID_1     [int],
 @CategoryID_2  [int],
 @CategoryName_3    [nvarchar](50),
 @Description_4     [ntext],

AS UPDATE [Teachdb].[dbo].[Categories] 

SET  [CategoryID]    = @CategoryID_2,
 [CategoryName]  = @CategoryName_3,
 [Description]   = @Description_4,

WHERE 
( [CategoryID]   = @CategoryID_1)
go 
```

去

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:14:23.660

在这里，您可以通过传递@Mode 值以下列方式合并两个存储过程代码..

```
/*
For Insert 
exec Tools @Mode='Insert', @CategoryID='1', @CategoryName='DemoCat', @Description='demoDesc'

For Update
exec Tools @Mode='UPDATE', @CategoryID='1', @CategoryName='DemoCatupdate', @Description='demoDescupdate'

*/

CREATE PROCEDURE Tools
(
    @Mode nvarchar(100), -- Use for insert or Update
    @CategoryID int,
    @CategoryName nvarchar(100),
    @Description ntext
)

AS 
BEGIN 
    IF @Mode = 'INSERT'
    BEGIN
        INSERT INTO Categories (CategoryID, CategoryName, Description) 
        VALUES (@CategoryID, @CategoryName, @Description)
    END
    ELSE IF @Mode = 'UPDATE'
    BEGIN
        UPDATE [dbo].[Categories] 
            SET  [CategoryID]    = @CategoryID,
                [CategoryName]  = @CategoryName,
                [Description]   = @Description
        WHERE ([CategoryID]   = @CategoryID)
    END
END
go 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:25:42.743

如果无法更改存储过程的结构（通过添加附加参数），则可以使用 MERGE 语句。

[http://msdn.microsoft.com/en-us/library/bb510625(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/bb510625(v=sql.100).aspx)

不过，请注意 - 虽然我喜欢 MERGE 语句，但似乎发现了[越来越多的错误](http://www.sqlperformance.com/2013/02/t-sql-queries/another-merge-bug)。我建议不要使用它，除非您了解自己在做什么（没有货物崇拜编程），并且已经审查了问题以查看您的场景是否包括在内。

# c# - ScreenState 故障 XNA 4 C#

> ID：15739249
> 
> 赞同：0
> 
> 时间：2013-04-01T07:14:41.207
> 
> 标签：c#, xna, xna-4.0

我在将 SplashScreen 切换到播放状态时遇到了麻烦。我在 Game1.cs 中声明了游戏状态的枚举

```
public enum GameState { SplashScreen, Playing }
public GameState currentState; 
```

然后我在 Game1.cs 的 LoadContent 中有这个

```
protected override void LoadContent()
{
    // Create a new SpriteBatch, which can be used to draw textures.
    spriteBatch = new SpriteBatch(GraphicsDevice);

    splashScreen.LoadContent(Content);
    playState.LoadContent(Content);
} 
```

在 Game1.cs 中更新

```
protected override void Update(GameTime gameTime)
{
    // Allows the game to exit
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        this.Exit();

    switch (currentState)
    {
        case GameState.SplashScreen:
        {
            splashScreen.Update(gameTime);
            break;
        }
        case GameState.Playing:
        {
            playState.Update(gameTime);
            break;
        }
    }

    base.Update(gameTime);
} 
```

最后在 Game1.cs 我有我的平局

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    spriteBatch.Begin();

    switch (currentState)
    {
        case GameState.SplashScreen:
        {
            splashScreen.Draw(spriteBatch);
            break;
        }
        case GameState.Playing:
        {
            playState.Draw(spriteBatch) ;
            break;
        }
    }

    spriteBatch.End();

    base.Draw(gameTime);
} 
```

这是我的 SplashScreen.cs

```
public class SplashScreen
{
    Texture2D tSplash;
    Vector2 vSplash = Vector2.Zero;

    Game1 main = new Game1();

    public void LoadContent(ContentManager Content)
    {
        tSplash = Content.Load<Texture2D>("splash");
    }

    public void Update(GameTime gameTime)
    {
        if (Keyboard.GetState().IsKeyDown(Keys.X))
        {
            main.currentState = Game1.GameState.Playing;
        }

    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(tSplash, vSplash, Color.White);
    }
} 
```

还有我的 Playing.cs

```
class Playing
{
    Texture2D tBack;
    Vector2 vBack = Vector2.Zero;

    Game1 mainG = new Game1();

    public void Initialize()
    {
    }

    public void LoadContent(ContentManager contentManager)
    {
        tBack = contentManager.Load<Texture2D>("playing");
    }

    public void Update(GameTime gameTime)
    {

    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(tBack, vBack, Color.White);
    }
} 
```

SplashScreen 图像显示，但当我按 X 时 PlatyingState 不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:10:59.823

`Game`您正在为每个屏幕声明一个全新的对象。永远不要这样做。一个`Game`是为了代表你的整个游戏。

但是，对一个对象有多个*引用是可以的。*`Game`

`Game`在最顶层保留一个对象；您已经拥有它来保存您的屏幕对象。您甚至可以将`main`and`mainG`变量保留在屏幕中，但让它们指向您的单`Game`：

```
public class SplashScreen
{
    Game1 main;
    public SplashScreen(Game1 g)
    {
        main = g;
    }

    //rest can be largely the same
} 
```

对 Playing 执行基本相同的操作（接受 a`Game1`并设置引用而不是重新声明）。

然后在 Game1.cs 中：

```
protected override void LoadContent()
{
    // Create a new SpriteBatch, which can be used to draw textures.
    spriteBatch = new SpriteBatch(GraphicsDevice);

    splashScreen = new SplashScreen(this);
    splashScreen.LoadContent(Content);
    playState = new Playing(this);
    playState.LoadContent(Content);
} 
```

这将是一个很好的第一步，尽管我建议更进一步并为所有屏幕创建一个基类。查看用于游戏屏幕管理的[官方 XNA 示例以帮助您入门。](http://xbox.create.msdn.com/en-US/education/catalog/sample/game_state_management)

# meteor - Meteor：不同的集合，不同的数据库

> ID：15739250
> 
> 赞同：1
> 
> 时间：2013-04-01T07:14:51.820
> 
> 标签：meteor

我的网站将有两种类型的用户：客户和管理员。他们都需要帐户。对于帐户，内置的流星帐户系统利用了该`users`集合。有什么方法可以将这两种类型的用户分成单独的集合（例如`customers`和`admins`），而不是将它们全部放在一个集合中？我可能还希望将这些类型的用户放在不同的数据库中（在不同的服务器上）：一个数据库`customers`用于`admins`. 那么，如何告诉 Meteor 哪个数据库用于哪个集合呢？

这是一个电子商务类型的网站。谁能告诉我为什么一个集合更适合客户和管理员使用？在创建网店时使用一个集合而不是两个集合有什么优缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:31:41.730

您可能想尝试角色角色包。[https://github.com/alanning/meteor-roles](https://github.com/alanning/meteor-roles)

您不需要分离集合，只需为不同的用户分配不同的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:26:11.453

为什么不将您的流星分成 2 个实例，一个用于您的客户端，一个用于您的管理界面。就我个人而言，我会使用角色，但如果这是你的偏好，那就没有太大的错误：

**您的管理员流星客户端 js 代码**

```
OtherMeteor = Meteor.connect("http://other_meteor_url")

//get user with username "admin"/connect to a custom method
OtherMeteor.call("getuser",{username:admin}, function(err,result) {
    console.log("result")
}) 
```

或者您可以直接附加到另一个流星实例上的集合

```
remote_meteor = Meteor.connect("http://other_meteor_url");
users2 = new Meteor.Collection("users", {manager: remote_meteor})

//wait for the subscription to finish first then use:
console.log(users2.find().fetch())
users2.up 
```

另一个执行自定义功能的流星中的代码：

**服务器js：**

```
Meteor.methods({
    'getuser':function(query) {
        return Meteor.users.find(query).fetch();
    },
    'updateuser':function(query,modifier) {
        return Meteor.users.update(query,modifier);
    }
}) 
```

# javascript - JS：动态多次调用函数

> ID：15739251
> 
> 赞同：1
> 
> 时间：2013-04-01T07:14:53.457
> 
> 标签：javascript, function

我正在尝试编写一个小函数来调用其他函数指定的次数。

我已经设法做到了，但是指定所述函数的参数的最佳方法是什么？

```
var doTimes = function (times, fn, params) {
    for (i=0; i<times; i++) {
        fn(params);
    }
} 
```

实际上，我只能获取一个参数，例如：

```
doTimes( 3, fn, param ); 
```

将与编写相同：

```
fn(param); fn(param); fn(param); 
```

但如果我想去怎么办

```
fn(param1,param2,param3); 
```

不写3次，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:18:53.483

一个非常有用和强大的方法是`.apply()`在 javascript 中使用函数的方法。该`.apply()`方法允许您传递一个数组，它将重新排列为多个参数。所以基本上你可以这样做：

```
function doTimes (times, fn, paramsArray) {
    for (i=0; i<times; i++) {
        fn.apply(null,paramsArray);
    }
} 
```

注意：`null`参数指定`this`被调用函数中关键字指向的内容。如果它不重要，请将其设置为任何值（在这种情况下为 null）。`this`如果它很重要，请将其设置为应该引用的对象。

阅读 call 的文档并申请：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply) [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:17:43.380

您可以使用`arguments`来获取传递给函数调用的所有参数。

[jsFiddle](http://jsfiddle.net/Tyriar/w4yZh/)

```
var doTimes = function (times, fn) {
    for (i=0; i<times; i++) {
        fn(arguments[2], arguments[3], arguments[4]);
    }
}

function test(a, b, c) {
    alert(a + '\n' + b + '\n' + c);
}

doTimes(2, test, 1, 2, 3); 
```

请注意，这`arguments`只是一个数组，因此您可以测试有多少正在使用`arguments.length`.

# c++ - 删除函数定义中未使用的参数名称（编码标准）。

> ID：15739252
> 
> 赞同：5
> 
> 时间：2013-04-01T07:14:57.120
> 
> 标签：c++

Herb Suttter C++ 编码标准说，删除函数中未使用的参数名称以编写零警告程序是一种很好的做法。

例子：

```
int increment(int number, int power=0){
   return number++;
} 
```

应该

```
int increment(int number, int /*power*/=0){
   return number++;
} 
```

如果参数有“未使用的变量警告” `power`。这适用于程序（没有编译错误），所以新的函数定义将是

`int increment(int number, int =0)`

那么`int=0`对编译器意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:16:36.690

未命名的形式参数，默认值为 0。

第一种情况（最流行）是 中的一种用法`function-declaration`，例如

```
int increment(int, int = 0); 
```

并且在定义参数中将被命名。

```
int increment(int number, int power)
{
   //
} 
```

第二种情况是用于调试目的，或用于尚未实现的某些功能，或用于虚拟功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T07:34:56.050

如果这是一个独立的功能，当然，您可以更改方法的签名注释掉最后一个参数

```
int increment(int number/*, int power=0*/); 
```

但是，您可能希望保持方法的签名不变，以防万一：

*   这是一个将覆盖基类中声明的方法的方法
*   它是您不想更改的模块公共接口的一部分

此外，当您在函数声明中使用未命名参数的默认值以及稍后在 cpp 文件中的某个位置您仍然为该变量指定名称时，它的默认值可能很有用。

```
// Forward declaration
int increment(int number, int =0);

// Somewhere in cpp file:
int increment(int number, int power)
  {
  return pow(number, power);
  } 
```

# c++ - 在 makefile 中包含 valgrind

> ID：15739253
> 
> 赞同：1
> 
> 时间：2013-04-01T07:15:01.923
> 
> 标签：c++, linux

是否可以在交互式应用程序的 makefile 中包含 valgrind 选项？如果是，那么如何？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-24T13:30:34.177

您实际上为 a 执行以下操作`mycode.c`：

### 生成文件

```
CFLAGS = -Wall -g

all: mycode

valgrind:
        valgrind ./mycode

clean:
        rm -f mycode 
```

你可以运行：

```
 make clean all valgrind 
```

彻底清理、构建和触发 valgrind。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-01T10:31:16.880

我不是 valgrind 的专家，我不知道是否可以在 makefile 中包含，但是包含 valgrind 的原因是什么？要使用 valgrind，您只需要执行之前调用 valgrind 的程序，如下所示：

yourprompt$valgrind ./YourProgram

无论如何，如果有人详细了解valgrind，我也有兴趣知道答案

问候

# opengl - 在 glBlendFunc() 中使用 GL_SRC1_COLOR

> ID：15739256
> 
> 赞同：2
> 
> 时间：2013-04-01T07:15:28.517
> 
> 标签：opengl, opengl-3, blending, color-blending

我正在使用 glBindFragDataLocationIndexed() 并在片段着色器中编写两种颜色。以下是我的代码：

```
glBindFragDataLocationIndexed(shader_data.psId, 0, 0, "Frag_Out_Color0");
glBindFragDataLocationIndexed(shader_data.psId, 0, 1, "Frag_Out_Color1");

glActiveTexture ( GL_TEXTURE0 );
LoadTexture(texture1);    
glBindTexture ( GL_TEXTURE_2D, tex_id1);
glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA,width, height, 0, GL_RGBA,GL_UNSIGNED_BYTE, texture1_data);

glActiveTexture ( GL_TEXTURE1 );
LoadTexture(texture2);
glBindTexture ( GL_TEXTURE_2D, tex_id2);
glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA,width, height, 0, GL_RGBA,GL_UNSIGNED_BYTE, texture2_data);

glEnable(GL_BLEND);
glBlendFunc(GL_SRC_COLOR, GL_SRC1_COLOR);

glDrawArrays(GL_TRIANGLE_FAN, 0, 4); 
```

片段着色器是：

```
#version 150
in vec2 texcoord;

uniform sampler2D basetexture1;
uniform sampler2D basetexture2;

out vec4 Frag_Out_Color0;
out vec4 Frag_Out_Color1;

void main(void)
{
    Frag_Out_Color0 = texture2D(basetexture1, texcoord);

    Frag_Out_Color1 = texture2D(basetexture2, texcoord);

} 
```

OGL3.3 规范说：

```
Data written to the ﬁrst of these outputs becomes the ﬁrst source
color input to the blender (corresponding to SRC_COLOR and SRC_ALPHA). Data
written to the second of these outputs generates the second source color input to
the blender (corresponding to SRC1_COLOR and SRC1_ALPHA). 
```

我已将 GL_SRC_COLOR、GL_SRC1_COLOR 作为输入传递给 glBlendFunc()。我不确定结果是否正确。请查找附件图片。此外，如果我通过 GL_ONE,GL_ONE ，则仅渲染第一个纹理，根本没有第二个纹理的迹象。如何验证我的其余代码是否正常（并且混合是否正确完成）？

以下分别是纹理 1、纹理 2 和结果。

![纹理 1](https://i.stack.imgur.com/pyI1P.png) ![纹理 2](https://i.stack.imgur.com/WyEix.png) ![结果](https://i.stack.imgur.com/9SWy6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:06:55.537

假设目标颜色为黑色，您的结果就是您所期望的。目前尚不清楚您到底打算`glBlendFunc(GL_SRC_COLOR, GL_SRC1_COLOR);`做什么。但它会做的[就是混合*总是*做](http://www.opengl.org/wiki/Blending#Blend_Equations)的。

源因子 ( `GL_SRC_COLOR`) 将乘以源颜色（或者，更准确地说，是 source0 颜色）。目标因子 ( `GL_SRC1_COLOR`) 将乘以目标颜色。这些乘法的结果将相加。

在您的情况下，这意味着 source0 颜色将自行相乘*（*因此使结果更暗）。目标颜色将乘以 source1 颜色；如果目标为零，则为 0。因此，您将 source0 颜色乘以自身作为输出。

*只有当您需要在两种源颜色和目标颜色之间执行一些操作时，*[双源混合](http://www.opengl.org/wiki/Blending#Dual_Source_Blending)才有*用*（因为这是您无法在着色器中执行的操作）。如果它可以表示为，那么这就是你应该在着色器中做的事情。*`(Src0 op Src1) op Dest`*

# mysql - mysql：删除记录直到

> ID：15739259
> 
> 赞同：0
> 
> 时间：2013-04-01T07:15:51.570
> 
> 标签：mysql

在某些情况发生之前，如何删除所有记录？例如按日期排序。例如，如果条件是非零值，则必须删除前 2 条记录：

```
 val date
 0   10.10.2011
 0   11.10.2011
 3   12.10.2011
 0   13.10.2011
 1   14.10.2011 
```

可以通过 2 个请求来完成，但我问是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:19:24.847

您可以将 DELETE 与 WHERE 子句一起使用：

```
DELETE FROM `your_table` 
WHERE (val = 0 OR date < '2011-01-31') 
```

# java - IntelliJ 无法同步目标文件夹中的更改

> ID：15739261
> 
> 赞同：4
> 
> 时间：2013-04-01T07:15:56.650
> 
> 标签：java, linux, maven, intellij-idea, target

Linux Mint 13 上的 Intellij 12.0.4（内部版本 123.169）。

当我从命令行运行 maven 测试时，我可以`target`在文件资源管理器中看到文件夹的更改内容，但在 IntelliJ 中看不到。

我已经尝试了`Synchronize`上下文菜单中的选项以及不同级别的 Ctrl+Alt+Y 快捷方式 - 子文件夹、文件夹和模块。我也无法使用 Ctrl+Shift+N 打开/搜索打开文件。

idea.log 看起来并不可疑：

```
2013-04-01 08:51:07,808 [3911692]   INFO - indexing.UnindexedFilesUpdater - Indexable files iterated in 26 ms 
2013-04-01 08:51:07,808 [3911692]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to update 
2013-04-01 08:51:07,808 [3911692]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update done in 0 ms 
```

还有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T07:54:35.000

我发现[了这个相关的问题](https://stackoverflow.com/questions/14273153/intellij-idea-always-show-mavens-target-directory)。问题是该`target`文件夹根本不可见。

我必须转到设置-> 项目设置-> Maven-> 导入。然后取消选中`Exclude build directory`，重新导入模块，它就可以工作了。

仍然奇怪的是，在我的情况下，该文件夹可见但不可更新。

# javascript - 幻影JS；单击一个元素

> ID：15739263
> 
> 赞同：82
> 
> 时间：2013-04-01T07:16:09.800
> 
> 标签：javascript, click, phantomjs

如何单击 PhantomJS 中的元素？

```
page.evaluate(function() {
    document.getElementById('idButtonSpan').click();  
}); 
```

这给了我一个错误“未定义不是函数......”

如果我改为

```
 return document.getElementById('idButtonSpan'); 
```

然后打印出来，

然后它打印[object object]，所以元素确实存在。

该元素充当按钮，但它实际上只是一个 span 元素，而不是提交输入。

我可以点击这个按钮来使用 Casper，但 Casper 有其他限制，所以我回到了 PhantomJS。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-11T12:06:10.853

`.click()`不是标准的。您需要创建一个事件并调度它：

```
function click(el){
    var ev = document.createEvent("MouseEvent");
    ev.initMouseEvent(
        "click",
        true /* bubble */, true /* cancelable */,
        window, null,
        0, 0, 0, 0, /* coordinates */
        false, false, false, false, /* modifier keys */
        0 /*left*/, null
    );
    el.dispatchEvent(ev);
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-07-22T14:18:10.137

除了@torazaburo 的响应，您可以`HTMLElement.prototype.click`在 PhantomJS 中运行时存根。例如，我们使用 PhantomJS + QUnit 来运行我们的测试，`qunit-config.js`我们有这样的东西：

```
if (window._phantom) {
  // Patch since PhantomJS does not implement click() on HTMLElement. In some 
  // cases we need to execute the native click on an element. However, jQuery's 
  // $.fn.click() does not dispatch to the native function on <a> elements, so we
  // can't use it in our implementations: $el[0].click() to correctly dispatch.
  if (!HTMLElement.prototype.click) {
    HTMLElement.prototype.click = function() {
      var ev = document.createEvent('MouseEvent');
      ev.initMouseEvent(
          'click',
          /*bubble*/true, /*cancelable*/true,
          window, null,
          0, 0, 0, 0, /*coordinates*/
          false, false, false, false, /*modifier keys*/
          0/*button=left*/, null
      );
      this.dispatchEvent(ev);
    };
  }
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-06-03T23:27:29.807

它不漂亮，但我一直在使用它来允许我使用 jQuery 进行选择：

```
var rect = page.evaluate(function() {
    return $('a.whatever')[0].getBoundingClientRect();
});
page.sendEvent('click', rect.left + rect.width / 2, rect.top + rect.height / 2); 
```

但如果不使用 jQuery ，你总是可以替换`$(s)[0]`为。`document.querySelector(s)`

（它确实依赖于考虑到的元素，即您的 viewportSize.height 足够大）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-08-07T11:00:30.247

希望下面的方法有用。它在 1.9 版中对我有用

```
page.evaluate(function(){
    var a = document.getElementById("spr-sign-in-btn-standard");
    var e = document.createEvent('MouseEvents');
    e.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    a.dispatchEvent(e);
    waitforload = true;
}); 
```

这对我有用。希望这对其他人也有用

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-16T19:41:54.737

这对`1.9.2`我有用，点击处理程序被触发：

```
var a = page.evaluate(function() {
    return document.querySelector('a.open');
});

page.sendEvent('click', a.offsetLeft, a.offsetTop); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-03-09T10:04:11.163

使用简单的 JavaScript `evaluate`，如下所示：

```
page.evaluate(function() {
    document.getElementById('yourId').click();
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-02T08:29:50.447

我永远无法直接单击该元素。相反，我查看了 html 以找到使用 onclick 调用的函数，然后调用了该函数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-15T15:46:40.253

Document.querySelector(element).click() 在使用 Phantomjs 2.0 时有效

```
click: function (selector, options, callback) {
    var self = this;
    var deferred = Q.defer();
    options = options || {timeout:1000}; 
    setTimeout(function () { 
        self.page.evaluate(function(targetSelector) {
            $(document).ready(function() {
                document.querySelector(targetSelector).click();
            }) ;
        }, function () {
                deferred.resolve();
        }, selector);
    }, options.timeout);
    return deferred.promise.nodeify(callback);
}, 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-13T09:16:33.083

PhantomJS 也可以双击。

# 受到推崇的

这改编自[stovroz](https://stackoverflow.com/users/68602/stovroz)[的答案](https://stackoverflow.com/a/24026636/1816580)，并触发了包括,和事件（每个两个）的本地。`dblclick``mousedown``mouseup``click`

```
var rect = page.evaluate(function(selector){
    return document.querySelector(selector).getBoundingClientRect();
}, selector);
page.sendEvent('doubleclick', rect.left + rect.width / 2, rect.top + rect.height / 2); 
```

# 其他方法

以下两种方式只触发`dblclick`事件，而不是应该在它之前的其他事件。

改编自[torazaburo](https://stackoverflow.com/users/663031/torazaburo)的[这个答案](https://stackoverflow.com/a/15948355/1816580)：

```
page.evaluate(function(selector){
    var el = document.querySelector(sel);
    var ev = document.createEvent("MouseEvent");
    ev.initMouseEvent(
        'dblclick',
        true /* bubble */, true /* cancelable */,
        window, null,
        0, 0, 0, 0, /* coordinates */
        false, false, false, false, /* modifier keys */
        0 /*left*/, null
    );
    el.dispatchEvent(ev);
}, selector); 
```

改编自[Jobins John](https://stackoverflow.com/users/3431942/jobins-john)的[这个答案](https://stackoverflow.com/a/25180804/1816580)：

```
page.evaluate(function(selector){
    var el = document.querySelector(sel);
    var e = document.createEvent('MouseEvents');
    e.initMouseEvent('dblclick', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    el.dispatchEvent(e);
}, selector); 
```

[**完整的测试脚本**](https://gist.github.com/artjomb/54f4ab35940170f7449a1cf274c63bec)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-21T09:25:55.153

最简单的方法是使用 jQuery。

```
page.evaluate(function() {
  page.includeJs("your_jquery_file.js", function() {
    page.evaluate(function() {
      $('button[data-control-name="see_more"]').click();
    });
  });
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-24T19:39:38.373

对于使用 JQuery 的用户，JQuery UI 创建了一个实用程序来模拟这些：[jquery-simulate](https://github.com/eduardolundgren/jquery-simulate)。我在 PhantomJS 和 Chrome 中使用它

```
$ele..simulate( "click" ); 
```

# c# - 关于 C# 中的 Devexpress Gridcontrol 的问题？

> ID：15739265
> 
> 赞同：0
> 
> 时间：2013-04-01T07:16:23.907
> 
> 标签：c#, devexpress, gridcontrol, devexpress-windows-ui

我有一个 devexpress gridcontrol 并加载了一个 Xml .. 如果 XMl 有属性，那么数据源会正确加载.. 否则它会失败并抛出异常

```
 <?xml version="1.0" encoding="utf-8" ?> 
   - <hj>
          <hj /> 
     </hj>

       DataSet dsnew = new DataSet();
        StreamReader sReader = new StreamReader("C:\\test.xml");
        string sRdr = sReader.ReadToEnd();
        if (!string.IsNullOrEmpty(sRdr))
        {
            dsnew.ReadXml("C:\\test.xml");
                  if (dsnew.Tables.Count > 0)
            {
                gridControl1.DataSource = dsnew.Tables[0];
                SetGridView();
            } 
```

仅当缺少属性时，我才会收到异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:43:58.133

我从来没有发现很难将 xmlDataSource 绑定到 Devexpress 的 GridContorl。这是我的代码

```
 string strXMLPath = "Your Path Of Xml"; /* c://myxml.xml */
            FileStream fs = new FileStream(strXMLPath, FileMode.Open, FileAccess.Read);
            ds = new DataSet();
            ds.ReadXml(fs);
            fs.Dispose();
            grdControl.DataSource = ds.Tables[0]; 
```

# apache - 在 joomla 3.0 中使用 .htaccess 重写 url

> ID：15739269
> 
> 赞同：0
> 
> 时间：2013-04-01T07:16:58.037
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我需要使用 .htaccess 重写 url。

这是我的网址`index.php/component/mb2portfolio/project/2-cum-sociis`

我怎样才能将其更改为`/skill_pages/2_skill_name.html`.htaccess 中是否可能

注意：我尝试使用`RewriteRule`in`.htaccess`并且它工作正常，但对于其他以 .html 作为后缀的默认 URL，由于此脚本而无法正常工作。

# ios - 将 linphone 集成到 iOS

> ID：15739270
> 
> 赞同：2
> 
> 时间：2013-04-01T07:17:07.430
> 
> 标签：ios, xcode, linphone

我正在尝试将 linphone lib 添加到我现有的 iOS 应用程序中，但无法构建

我的过程：

1.  在我现有的项目中添加了所有必需的框架作品。
2.  将所有 lib 从 linphone-iphone/liblinphone-sdk/apple-darwin/lib/ 复制到 myproject/lib
3.  将 linphone-iphone/Resources 复制到 myproject/Resources
4.  然后我添加了 LinphoneManager.h & .m 以及相关文件。
5.  然后我开始构建应用程序，我在 Linphonecore 中找不到文件 #include "ortp/ortp.h"（但文件可用）。

我从错误中了解到，我需要修改构建设置来搜索文件。我已经这样做了，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:29:34.947

请参阅构建设置中的**标题搜索路径**。并从 Linphone 示例应用程序中复制粘贴它们。![在此处输入图像描述](https://i.stack.imgur.com/wwzMD.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T15:18:34.693

我在[这里写了一个答案](https://stackoverflow.com/questions/18081140/integrate-linphone-app-to-my-ios-app/31458185#31458185)。有点长，但我真诚地希望它足够清晰，并能帮助您（以及未来的其他人）构建和集成 Linphone！

最好的，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T05:14:07.933

对于“ortp/ortp.h”文件未找到错误！

1.  如果添加到项目中，请检查您的“linphone-sdk”折叠
2.  如果添加，请检查 linphone-sdk/apple-darwin/lib/ 中的 libOrtp.a
3.  如果存在，请检查“构建阶段”->“将二进制文件与库链接”，如果包含“libOrtp.a”
4.  以上都完成后，勾选“Build settings”->“header search paths”，添加“$(SRCROOT)/liblinphone-sdk/apple-darwin/include”

问题解决了！

# css - 为什么我应该在我的移动网站上使用精灵？

> ID：15739272
> 
> 赞同：0
> 
> 时间：2013-04-01T07:17:09.227
> 
> 标签：css, sprite, tritium

为什么我应该在我的移动网站上使用精灵来构建 CSS？以及如何在 Tritium 中实现它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T07:17:09.227

### 为什么

简单地说：节省网络请求。在网络上，一个 10kB 的 sprite 请求比十个 1kB 图像的十个请求快得多。

此外，一个压缩的图像精灵将在网络上产生巨大的节省。例如，拍摄 13 张图像，每张大约 4kB。那是 52kB 超过 13 个网络请求。使用精灵，它可以通过 1 个网络请求减少到 1 个 12kB 的图像。巨额储蓄！

您不必制作自己的精灵 - Moovweb 可以自动为您生成它们。

### 执行

在**图像**目录中创建一个名为**sprites**的文件夹- 将所有图像放在此处。**（你可以在sprites**文件夹中有多个文件夹。） Moovweb 自动生成 sprite 并在**stylesheets/globals**目录中创建一个名为. 不要忘记将这个样式表导入到.******`_sprites.scss``main.scss`******

 ******例如，要使用站点中的所有小猫图片创建一个 sprite，请将所有小猫图像放在**images文件夹中名为****sprites**的文件夹中。Moovweb 在**images**文件夹中创建一个更大的精灵图像。它还在**stylesheets/globals**文件夹中创建了一个样式表。****`_sprites.scss`****

 ******在样式表中，Moovweb 为每个图像定义了一组类、mixin 和变量。他们的名字格式是`sprites-filename`. 例如，在我们上面的 sprite 文件夹示例中，`cat.png`sprites 文件夹中的图标将具有 class `.sprites-cat`。

您可以通过以下三种方式之一使用图像：

1.  在样式表中使用`@extend`或`@include`在另一个类/ID 下应用图像中的相同样式

2.  使用带有图像类的 Tritium 插入一个新元素：`insert("div", class:"sprites-filename")`

3.  使用 Tritium 在现有元素上添加一个类：`add_class("sprites-filename")`************

# ruby-on-rails - 使用 respond_to 对 controller_action.js.erb (AJAX) 进行 Rails 渲染 - 不能用 coffe/haml 完成吗？

> ID：15739274
> 
> 赞同：0
> 
> 时间：2013-04-01T07:17:13.787
> 
> 标签：ruby-on-rails, ajax, coffeescript, haml

我是那些使用 HAML 而不是 ERB 和 Coffeescript “而不是” Javascript 的人之一。我的应用程序使用了很多 AJAX 响应，例如：

```
def controller_action

  # Lots of code here...

  respond_to do |format|
    format.html {
    }
    format.js
  end
end 
```

他们呈现的 controller_action.js.erb 可能如下所示：

```
var some_partial;
some_partial = $("#some_partial");
some_partial.children().remove();
$('#some_partial').append('<%= j render("some_partial") %>'); 
```

因为我直接使用 HAML 和 Coffeescript，因此无法理解 ERB 和 Javascript 语法（我知道有一些很酷的网站，如 js2coffee.org 和 html2haml.heroku.com，但我宁愿我的应用程序使用我的代码语言理解）。

这让我想到了我的问题：真的不可能有 controller_action.js.coffee.html.haml 或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:32:21.517

默认情况下，rails 3.2.13 支持以下内容格式：

```
irb(main):003:0> Mime::SET.map(&:to_sym)
=> [:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip] 
```

其他格式需要手动添加，例如在 config/initializers/mime_types.rb 中：

```
Mime::Type.register "text/markdown", :markdown 
```

# css - 在响应式友好设计中以 em 单位定义容器宽度时？

> ID：15739280
> 
> 赞同：0
> 
> 时间：2013-04-01T07:18:05.793
> 
> 标签：css

我正在学习响应式设计的相对测量单位。但是看到许多设计师使用 em 单位来定义他们的容器宽度，我有点困惑。我在定义媒体查询时也看到过，断点是在 em.xml 中定义的。在布局中使用 em 有什么好处。我会感谢你能向我展示 em 在布局中使用的现实生活中的好处。我在我的设计布局中使用了 em。我期待 em 在挤压浏览器窗口时表现得像百分比，但它表现得像像素。那么，为什么设计师更喜欢 em 而不是 px 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:47:38.103

这已经在堆栈溢出中引发。

去[这里](https://stackoverflow.com/questions/609517/why-em-instead-of-px) 吧。

# java - 将包部署到 glassfish 后无法获取 EJBContext

> ID：15739282
> 
> 赞同：0
> 
> 时间：2013-04-01T07:18:08.007
> 
> 标签：java, ejb, osgi, glassfish-3

我的问题基于**[Can't get SessionContext on EJB](https://stackoverflow.com/questions/9487185/cant-get-sessioncontext-on-ejb)**，我想注入`EJBContext`我的代码

我的代码是：

```
import javax.ws.rs.core.Context;

public class EjbContextTest {
    @Resource
    private EJBContext ejbContext;
    @Resource
    private SessionContext sessionContext;
    ......
} 
```

我在激活器中有一个简单的测试，只是想验证是否可以使用 CDI 获得 EJBContext：

```
public void start(BundleContext context) throws Exception {

    EjbContextTest test = new EjbContextTest();

    if (test.getEjbContext() == null) {
       System.out.println("ejbContext is: null" );
    } else
       System.out.println("ejbContext rollback only is: " + 
           test.getEjbContext().getRollbackOnly());
    } 
```

将包部署到 glassfish 3.1.2 时，我无法获得 EJBContext 的实例：

```
2013-03-29 17:11:20,547|信息|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|
_ThreadID=15;_ThreadName=Thread-2;|-----------> ejbContext 为：null*|#]

```

拜托，如果您有任何建议，我很乐意尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T13:20:49.193

您不能通过调用它们的构造函数来访问 EJB 会话 bean 或 CDI bean。以下两个中的任何一个都应该起作用：

1.  使用 CDI（或 CDI-EJB 集成）注入

    ```
    @Inject
    private EjbContextTest test; 
    ```

2.  使用纯 EJB 注解注入

    ```
    @EJB
    private EjbContextTest test; 
    ```

然后你可以调用 test.getEjbContext()。

这样，@Resource 注释就被处理了。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T14:04:53.007

对于那些将来仍然需要...

注射使用：

```
@Resource
private SessionContext ejbContext; 
```

或者

```
@Resource(mappedName = "java:comp/EJBContext") // adding 'mappedName' with JNDI name
private EJBContext ejbContext; 
```

# javascript - 将宽度设置为 iframe 的父 div 标签

> ID：15739283
> 
> 赞同：0
> 
> 时间：2013-04-01T07:18:20.140
> 
> 标签：javascript, jquery, css, html

我在 div（作为弹出窗口）中有一个 iframe，其高度和宽度可以是可变的。我尝试以所有可能的方式设置高度和宽度，但我没有成功。
我无法理解原因。
有人可以帮帮我吗？这是一个[jsbin](http://jsbin.com/oxemet/1/)

**这是我猜应该可以工作的代码：**

```
<!DOCTYPE HTML PUBLIC>
<html>
 <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>

<style type="text/css">
   #irmNPopupContainer {
       border: 2px solid;
       display: none;
       top: 10px;
       left: 10px;
   }

   #irmNPopupHdr {
       height: 30px;
       width: 100%;
       background: #F0F0F0;
   }
</style>
 </head>

 <body>

  <button onClick="showIrmNPopup('Window Title','http://www.w3schools.com',200,200)">W3 Schools</button> <br/> 

  <div id="irmNPopupContainer" >
     <div id="irmNPopupHdr"><span></span><span><img src="round_black_close2.png" title="Close">X</span></div>
     <div id="irmNPopupContent" >
       <iframe frameborder=0 id="irmNPopupContentFrame" name="irmNPopupContentFrame" scrolling=auto width="100%" height="100%">
       </iframe>
     </div>
  </div>
 </body>

  <script>
  function showIrmNPopup(_title,_src,_width,_height){
  //Assign source to iframe and set width and height of the iframe
   var iframeObj = document.getElementById('irmNPopupContentFrame');
   iframeObj.src = _src;

   $('#irmNPopupHdr span:first-child').text(_title);
   $('#irmNPopupContainer').show(600);   
  // $('#irmNPopupContainer').outerWidth(_width);
   //$('#irmNPopupContainer').outerHeight(_height);
   $('#irmNPopupContainer').css({width:_width+"px",height:_height+"px"});
 // document.getElementById('irmNPopupContainer').style.width = _width+"px";
 }
 $('#irmNPopupHdr span:last-child').click(function(){
   $('#irmNPopupContainer').hide(600);  
 })
  </script>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:54:02.783

如果我正确理解您的问题，您必须在设置 iframe src 之前设置“irmNPopupContent”的高度和宽度。开始你的脚本： `$('#irmNPopupContainer').css({width:_width+"px",height:_height+"px"});`

看看这个jsbin：[jsbin.com/oxemet/4](http://jsbin.com/oxemet/4)

# python - 美味派中的动态模型

> ID：15739287
> 
> 赞同：1
> 
> 时间：2013-04-01T07:18:32.450
> 
> 标签：python, django, tastypie

我有一个返回 json 的类

```
[{      
            'title': 'Test Blog Title 1',
            'content': 'Blog Content',
            'author_name': 'User 1'
 },
 {
            'title': 'Test Blog Title 2',
            'content': 'Blog Content 2',
            'author_name': 'User 2'
 }] 
```

我想根据返回的 Json 创建 Tastypie 模型资源

我尝试了以下网址，但我不想声明它应该是动态的字段

[http://thehungrycoder.com/python/using-non-orm-data-sources-with-tastypie-in-django.html](http://thehungrycoder.com/python/using-non-orm-data-sources-with-tastypie-in-django.html)

```
class BlogResource(Resource):
    #i dont want the fields below instead want it to be dynamic based on json
    title = fields.CharField(attribute='title')
    content = fields.CharField(attribute='content')
    author = fields.CharField(attribute='author_name')

    class Meta:
        resource_name = 'blogs' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T06:10:45.000

如果您不声明字段，它们将无法在包中访问。但是，它们始终可以在请求中访问。

您需要至少有一个预定义字段，用作主键。虽然您不需要明确地创建它，但您应该知道如果用户对某个对象发出 GET 请求时要返回什么对象。

# java - 我的菜单中未应用动态 css (tiles + spring 3.0)

> ID：15739290
> 
> 赞同：18
> 
> 时间：2013-04-01T07:18:46.170
> 
> 标签：java, jquery, tiles, spring-3, dynamic-css

我正在使用 Spring 3.0 + 瓷砖。我已经为所有页面创建了带有锚标记的通用菜单，并应用了相同的 css。我正在使用 Jquery 在单击菜单时动态更改菜单的 css 类。

选择菜单/链接时，将应用“selectedTab”css 类，并且对于所有普通链接，将应用“tab”css 类。我面临的问题是，每次请求/单击菜单时都会应用样式类，然后在响应之后再次取消应用。也就是说，样式在请求和响应之间保持应用。但不是在回应之后。菜单链接的代码如下：

```
<div id="menu" class=" mainPageLayout clearFix" style="width:980px;margin:0 auto;">
    <a id="dashboard" class="selectedTab" href="dashboard.html" onclick="return changeCss('dashboard');">
        <span>Dashboard</span>
    </a>

    <a id="projects" class="tab" href="projectscontroller.html" onclick="return changeCss('projects');">
        <span>Projects</span>
    </a>

    <a id="milestones" class="tab" href="milestones.html" onclick="return changeCss('milestones');">
        <span>Milestones</span>
    </a>

    <a id="tasks" class="tab" href="tasks.html" onclick="return changeCss('tasks');">
        <span>Tasks</span>
    </a>

    <a id="discussions" class="tab" href="messages.html" onclick="return changeCss('discussions');">
        <span>Discussions</span>
    </a>

    <a id="reports" class="tab" href="reports.html" onclick="return changeCss('reports');">
        <span>Reports</span>
    </a>

    <a id="history" class="tab" href="projects/history.html" onclick="return changeCss('history');">
        <span>History</span>
    </a>

    <a id="templates" class="tab" style="float: right;" href="projects/users.html" onclick="return changeCss('templates');">
        <span>Project templates</span>
    </a>

    <a id="users" class="tab" style="float: right;" href="projects/projectTemp.html" onclick="return changeCss('users');">
        <span>Users</span>
    </a>
</div> 
```

相同的Jquery是：

function changeCss(aid) { //alert(aid);

```
jQuery("#menu a").removeClass("selectedTab");
jQuery("#menu a").addClass("tab");

jQuery("#"+ aid).removeClass("tab");
jQuery("#" + aid).addClass("selectedTab"); 
```

}

菜单的 Css 类是：

a.selectedTab:hover, .studioTopNavigationPanel .contentSection .navigationBox a.selectedTab:active { background-color: #B8D9ED; 背景图像：url（“../images/tab_selected_bg.png”）；背景位置：中心顶部；背景重复：重复-x；颜色：#333333；光标：指针；显示：块；向左飘浮; 字体大小：14px；右边距：3px；填充：5px 12px；文字装饰：无；}

```
.studioTopNavigationPanel .contentSection .navigationBox a.tab, 
.studioTopNavigationPanel .contentSection .navigationBox a.tab:visited, 
.studioTopNavigationPanel .contentSection .navigationBox a.tab:hover, 
.studioTopNavigationPanel .contentSection .navigationBox a.tab:active 
{
    background-color: #ECF3F7;
    background-image: url("../images/tab_bg.png");
    background-position: center top;
    background-repeat: repeat-x;
    color: #333333;
    cursor: pointer;
    display: block;
    float: left;
    font-size: 14px;
    margin-right: 3px;
    padding: 5px 12px;
    text-decoration: none;
}

.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab, 
.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab:visited, 
.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab:hover, 
.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab:active 
{
    background-color: #B8D9ED;
    background-image: url("../images/tab_selected_bg.png");
    background-position: center top;
    background-repeat: repeat-x;
    color: #333333;
    cursor: pointer;
    display: block;
    float: left;
    font-size: 14px;
    margin-right: 3px;
    padding: 5px 12px;
    text-decoration: none;
} 
```

请告诉我哪里错了，并尽快提供适当的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T12:27:47.967

```
<html>
<head>
<style type="text/css">
 .about_normal
 {
   background-color:red;
   color:blue;
 }
 .about_active
 {
   background-color:black;
   color:green;
 }
</style>
<script type="text/javascript">
var divSelected = null;
function SelectOrUnSelect(x)
{
if(divSelected != null) divSelected.className = 'about_normal';
divSelected = x;
x.className = 'about_active';
}
</script>
</head>
<body>
 <ul>
  <li class="about_normal" id="t1"><a href="#1" onclick="SelectOrUnSelect(t1)">Our Mission</a></li>
  <li class="about_normal" id="t2"><a href="#2" onclick="SelectOrUnSelect(t2)">Company Info</a></li>
  <li class="about_normal" id="t3"><a href="#3" onclick="SelectOrUnSelect(t3)">All Services</a></li>
  <li class="about_normal" id="t4"><a href="#4" onclick="SelectOrUnSelect(t4)">Press</a></li>
  <li class="about_normal" id="t5"><a href="#5" onclick="SelectOrUnSelect(t5)">Careers</a></li>
 </ul>
</body>
</html> 
```

简单地尝试一下。只有您必须根据需要更改样式，它才会起作用。它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T05:38:13.027

```
 $(function(){
    $("#menu a").on("click",function(){
      var ths = $(this);
      if($('#test').hasClass("selectedTab")){ths.removeClass("selectedTab").addClass("tab");}
      else{ths.removeClass("tab").addClass("selectedTab");}
    });
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T07:07:35.730

尝试这个

```
.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab, 
.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab:visited, 
.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab:hover, 
.studioTopNavigationPanel .contentSection .navigationBox a.selectedTab:active 
{
background-color: #B8D9ED !important;
background-image: url("../images/tab_selected_bg.png");
background-position: center top;
background-repeat: repeat-x;
color: #333333!important;
cursor: pointer;
display: block;
float: left;
font-size: 14px;
margin-right: 3px;
padding: 5px 12px;
text-decoration: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:00:02.250

我还认为服务器端菜单结构，将 selectedTab 应用于当前相关元素是最好的解决方案，正如 Quaternion 所揭示的那样。

但是如果你**真的**做不到，你也可以（*小心...污垢*）解析 js 中的 document.location.href 以知道你在哪个页面上，然后将 selectedTab 类应用于正确的元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-24T04:52:25.307

```
jQuery(function(){
  jQuery("#menu a").on("click",function(){
    jQuery("#menu a").removeClass("selectedTab");
    jQuery("#menu a").addClass("tab");
    jQuery(this).removeClass("tab");
    jQuery(this).addClass("selectedTab");
 })
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-20T01:48:16.297

也许你可以尝试这样的事情：

```
var urlProjectsController = 'http://yourdomain.com/projectscontroller.html';
var urlMilestones = 'http://yourdomain.com/milestones.html';
if (window.location.href == urlProjectsController ){
  jQuery("#projects").removeClass("tab");
  jQuery("#projects").addClass("selectedTab");
}else if (window.location.href == urlMilestones ){
  jQuery("#milestones").removeClass("tab");
  jQuery("#milestones").addClass("selectedTab");
}
......
......
and so on for the remaining links. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-31T13:22:11.067

```
jQuery(function(){
  jQuery("#menu a").on("click",function(){
    if($('#test').attr('class')=="selectedTab")
      jQuery("#menu a").removeClass("selectedTab");
      jQuery("#menu a").addClass("tab");
   }
   else{ jQuery(this).removeClass("tab");
     jQuery(this).addClass("selectedTab");
    }
   });
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-30T11:04:32.863

```
 $(document).on("click", "#message", function(event) {

    $('.chat-type-msg').css('background-color','#FAFAFA');
    $('.chat-type-msg').css('color','#535353');
   }); 
```

# grails - Grails“无法发出重定向”问题

> ID：15739292
> 
> 赞同：0
> 
> 时间：2013-04-01T07:18:52.513
> 
> 标签：grails

正在发生以下问题：

```
def someAction() {
    ...
    if (someCondition)
        redirect action: 'index'
        return
    }

    if (someOtherCondition)
        redirect action: 'index'
        return
    }

    ...

    redirect action: 'success'
} 
```

这完美地工作。但是，一旦我将其包装在交易中：

```
def someAction() {
    MyDomainClass.withTransaction { status ->

        if (someCondition)
            status.setRollbackOnly()
            redirect action: 'index'
            return
        }

        if (someOtherCondition)
            status.setRollbackOnly()
            redirect action: 'index'
            return
        }

        ...

    }

    redirect action: 'success'
} 
```

这会导致抛出异常：

> > 无法在此处发出重定向（..）。响应已经通过另一个重定向或直接写入响应提交。堆栈跟踪如下：消息：无法在此处发出重定向（..）。响应已经通过另一个重定向或直接写入响应提交。

奇怪的是我在另一段代码中做了完全相同的事情，而且效果很好。唯一的区别是我是链接而不是重定向。我已经尝试在上面的代码中链接，但它仍然抛出异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:24:18.697

这`return`来自：

```
MyDomainClass.withTransaction { status ->

        if (someCondition)
            status.setRollbackOnly()
            redirect action: 'index'
            return   //   <-- !!! this one !!!
        }
} 
```

正在从关闭块中返回您，而不是从操作中返回。所以它调用`redirect action: 'index'`，从闭包中退出，并在之后执行块，并带有另一个重定向：

```
redirect action: 'success' 
```

最后一个导致此异常。

作为一种解决方法，您可以记住重定向状态并检查最后一步，例如：

```
boolean redirected = false
MyDomainClass.withTransaction { status ->

        if (someCondition)
            status.setRollbackOnly()
            redirected = true
            redirect action: 'index'
            return
        }
}
if (!redirected) { 
    redirect action: 'success'
} 
```

或者只是检查尚未提交响应（但这种方式似乎有点hacky）：

```
if (!response.commited) {
    redirect action: 'success'
} 
```

# dart - 这个使用 Streams 的代码是错误的还是我应该提交一个错误？

> ID：15739298
> 
> 赞同：1
> 
> 时间：2013-04-01T07:19:15.217
> 
> 标签：dart

我写的代码可能有点长，但是我想看看是否有错误，以便我可以将其提交到 dartbug.com 。如果没有错误，我想知道我做错了什么。

代码的想法是将点的位置与网格（分别为 Square 类和 Grid 类）同步。

Square.onPosChange 是一个发送前一个位置的 Stream。

当一个正方形被添加到网格（Grid.add）时，有一个对 onPosChange 的订阅，它所做的是改变正方形在网格中的位置；首先它将它从前一个位置删除（只是分配 null），然后将它分配给当前位置。

当我期望前一个位置为空时，我的测试失败了。现在下面是代码，请注意我认为可能是问题的注释行。

编辑：以防万一，这不是愚人节问题：P

```
import 'dart:async';
import 'package:unittest/unittest.dart';

void main() {
  test('grid',(){
    Square s = new Square(3, 5);
    Grid g = new Grid(10,10);
    g.add(s);
    expect(g._cols[3].squares[5], s);//pass
    s.x = 6;
    expect(g._cols[6].squares[5], s);//pass
    expect(g._cols[3].squares[5], isNull);//fails

  });
}

class Grid{
  List<GridCol> _cols;
  int w, h;
  Grid(this.w, this.h){
    _cols = new List<GridCol>.filled(w, new GridCol(h));
  }
  add(Square square){
    if(!isOut(square)){
      //add square to grid
      _cols[square.x].squares[square.y] = square;
      //listen to onPosChanged event stream
      square.onPosChanged.listen((Point previousPos){
        //remove from previous position
        _cols[previousPos.x].squares[previousPos.y] = null;
        //if is not out of bounds, add in new position
        if(!isOut(square)){
          /*
           * Up until this point, (3,5) is null, as was set earlier.
           * (6,5) is also null since it was never set.
           * 
           * But after the following line, strangely,
           *  both (3,5) and (6,5) are set to the square.
           */
          _cols[square.x].squares[square.y] = square;

          print("(3,5): ${_cols[3].squares[5]}");//(3,5): (6,5)
          print("(6,5): ${_cols[6].squares[5]}");//(6,5): (6,5)
        }

      });
    }
  }

  isOut(Point p) => 
      p.x < 0 || p.y < 0 || p.x >= w || p.y >= h;
}

class GridCol{
  List<Square> squares;
  GridCol(int h): squares = new List<Square>(h);
}

class Square extends Point{
  int get x => super.x;
      set x (value){
        var prev = super.x;
        super.x = value;
        _sc.add(p(prev, y));
      }
  int get y => super.y;
      set y (value){
        var prev = super.y;
        super.y = value;
       _sc.add(p(x,prev));
      }

  StreamController<Point> _sc;
  Stream get onPosChanged => _sc.stream;
  Square(x, y)
  {
    super.x = x;
    super.y = y;
    _sc = new StreamController<Point>.broadcast();
  }
}

 class Point{
    int x = 0;
    int y = 0; 
    Point([this.x, this.y]);
    String toString() => '($x,$y)';
}

p(x, y) => new Point(x, y); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T09:30:45.870

这是一个很难追踪的问题，但这是你的解决方法，它与 Streams 无关。

Grid 的构造函数如下所示：

```
Grid(this.w, this.h){ 
  _cols = new List<GridCol>.filled(w, new GridCol(h));
} 
```

您希望其中的每个元素都`_cols`用`new GridCol(h);`. 实际上，您得到的（以及代码实际所说的）是用相同的实例填充每个元素`GridCol`。稍微重写为：

```
Grid(this.w, this.h){
  var gridCol = new GridCol(h);  // create a single instance of a GridCol
  _cols = new List<GridCol>.filled(w, gridCol); // add that instance to every element
} 
```

这意味着当你添加你的第一个方块时，每一个`GridCol`都是相同的，单个实例，你最终会得到一个看起来像这样的网格（其中`-`为 null 并且`S`是你的方块）：

```
---S------
---S------
---S------
---S------
---S------
---S------
---S------
---S------
---S------
---S------ 
```

这发生在`add`函数的开头，在涉及任何流之前，就在注释之后：`//add square to grid`。

如果您使用以下代码初始化网格中的每个元素，则您的测试通过。

```
Grid(this.w, this.h){
  _cols = new List<GridCol>(w); // create the list
  // fill each element with a different GridCol
  for (int i = 0; i < _cols.length; i++) {
   _cols[i] = new GridCol(h); // insert a new GridCol for every element.
  }
} 
```

# c++ - C++CLI 的 *var* 关键字

> ID：15739305
> 
> 赞同：2
> 
> 时间：2013-04-01T07:19:49.440
> 
> 标签：c++, c++-cli

我想将一行数据库数据存储到一个对象中，但我不知道在 C# 中是否存在类似**var**的关键字。因为我想检索整行数据，而不是单独检索任何特定列。

C＃：

```
var data=from t in TableX 
         where t.id==100
         select t; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T07:24:01.847

在 C++ /CLI 中有与C# 中`auto`含义相同的关键字。`var`

```
auto data=... 
```

见[这里](https://stackoverflow.com/questions/2007976/is-there-an-equivalent-to-the-c-sharp-var-keyword-in-c-cli)。

# java - 安卓计算器事业部

> ID：15739308
> 
> 赞同：0
> 
> 时间：2013-04-01T07:20:26.243
> 
> 标签：java, android, calculator, division

我开发了一个简单的计算器..一切正常...计算器将添加 mul sub 和 div 两个数字问题在于除法部分..如果第一个数字大于第二个数字，t 将正常工作，否则应用程序将意外停止 味精会来...我现在只是给我的 div 代码...

```
divBtn.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
    firstNum = new BigDecimal(firstVal.getText().toString());
    secNum = new BigDecimal(secondVal.getText().toString());
    {
        result.setText(secNum.divide(firstNum).toString());
    }
    result.setText(firstNum.divide(secNum).toString());
    }
}); 
```

这是我的日志猫

```
04-01 13:08:19.647: V/TLINE(377): new: android.text.TextLine@408d45a0
04-01 13:08:19.787: V/TLINE(377): new: android.text.TextLine@408da4a0
04-01 13:08:28.146: D/AndroidRuntime(377): Shutting down VM
04-01 13:08:28.146: W/dalvikvm(377): threadid=1: thread exiting with uncaught exception (group=0x40014760)
04-01 13:08:28.156: E/AndroidRuntime(377): FATAL EXCEPTION: main
04-01 13:08:28.156: E/AndroidRuntime(377): java.lang.ArithmeticException: Non-terminating decimal expansion; no exact representable decimal result
04-01 13:08:28.156: E/AndroidRuntime(377):  at java.math.BigDecimal.divide(BigDecimal.java:1280)
04-01 13:08:28.156: E/AndroidRuntime(377):  at com.example.simplecalculator2.MainActivity$4.onClick(MainActivity.java:109)
04-01 13:08:28.156: E/AndroidRuntime(377):  at android.view.View.performClick(View.java:3110)
04-01 13:08:28.156: E/AndroidRuntime(377):  at android.view.View$PerformClick.run(View.java:11928)
04-01 13:08:28.156: E/AndroidRuntime(377):  at android.os.Handler.handleCallback(Handler.java:587)
04-01 13:08:28.156: E/AndroidRuntime(377):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-01 13:08:28.156: E/AndroidRuntime(377):  at android.os.Looper.loop(Looper.java:132)
04-01 13:08:28.156: E/AndroidRuntime(377):  at android.app.ActivityThread.main(ActivityThread.java:4025)
04-01 13:08:28.156: E/AndroidRuntime(377):  at java.lang.reflect.Method.invokeNative(Native Method)
04-01 13:08:28.156: E/AndroidRuntime(377):  at java.lang.reflect.Method.invoke(Method.java:491)
04-01 13:08:28.156: E/AndroidRuntime(377):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-01 13:08:28.156: E/AndroidRuntime(377):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-01 13:08:28.156: E/AndroidRuntime(377):  at dalvik.system.NativeStart.main(Native Method) 
```

# python - 在 python 中漂亮的打印

> ID：15739310
> 
> 赞同：1
> 
> 时间：2013-04-01T07:20:30.683
> 
> 标签：python

我想以一种漂亮的方式打印以下几行。

```
Putting a value ... OK
Getting value with only row key ... OK
Getting value with only row key and family... OK
Getting value with only row key and family and qualifier... OK
Getting value with row key which is not put... OK 
```

我希望所有内容都`OK`应该在一列中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T07:24:03.133

```
lines = ['Putting a value ...',
         'Getting value with only row key ...',
         'Getting value with only row key and family...',
         'Getting value with only row key and family and qualifier...',
         'Getting value with row key which is not put...']

for line in lines:
  print '%-59s' % line,
  # ...
  print 'OK' 
```

这打印

```
Putting a value ...                                         OK
Getting value with only row key ...                         OK
Getting value with only row key and family...               OK
Getting value with only row key and family and qualifier... OK
Getting value with row key which is not put...              OK 
```

对于这项工作，您需要知道最长字符串的长度（`59`在上面的示例中）。

# php - 在不刷新主页的情况下加载 div 中的内容

> ID：15739313
> 
> 赞同：2
> 
> 时间：2013-04-01T07:20:47.977
> 
> 标签：php, jquery, iframe, dynamic, embed

您好，我想在一个主页（`index.html`）中运行 3 个页面，类似于“应用程序样式”

页面是： `form.html`，表单`results.php`和`link.html`页面

我希望它像这个演示一样加载：删除（站点关闭）但不使用嵌入或 iframe。

提交表单后，`form.html`它会进入`results.php`页面，该页面假装加载，然后在 5 秒左右后进入 `link.html`页面，我希望这一切都能在不重新加载的情况下发生`index.html`

我已经查看了动态页面并尝试使用 jQuery 隐藏/显示内容但我似乎无法使用计时器和表单提交让事情变得困难。

任何帮助都会令人难以置信的感激我已经搞砸了一段时间，我只知道 html 和 css，并且只玩过 JavaScript 和 php。

我会很高兴看到一些使用下面的脚本的带有表单和计时器的工作代码。但即使指向正确的方向也会有所帮助。如果这个问题不适合这个网站，谢谢和抱歉。

我的代码：`index.html`

```
<html>
   <head>
      <title>index main page</title>
      <style>
         /** http://cssreset.com */html, body, div, span, applet, object, iframe,h1, h2, h3, h4, h5, h6, p, blockquote, pre,a, abbr, acronym, address, big, cite, code,del, dfn, em, img, ins, kbd, q, s, samp,small, strike, strong, sub, sup, tt, var,b, u, i, center,dl, dt, dd, ol, ul, li,fieldset, form, label, legend,table, caption, tbody, tfoot, thead, tr, th, td,article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary,time, mark, audio, video {    margin: 0;  padding: 0; border: 0;  font-size: 100%;    font: inherit;  vertical-align: baseline;}/* HTML5 display-role reset for older browsers */article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {    display: block;}body {  line-height: 1;}ol, ul {    list-style: none;}blockquote, q {   quotes: none;}blockquote:before, blockquote:after,q:before, q:after {   content: '';    content: none;}table {  border-collapse: collapse;  border-spacing: 0;}
         body{
             background-image:url(http://i.imgur.com/z69OCGn.png);
             background-repeat:repeat; 
             height:100%;
             width:100%;
             position:fixed;
         }
         #wrap{
             background-image:url(http://i.imgur.com/Xuyys5X.png);
             background-repeat:repeat; 
             width:800px;
             height:100%;
         }
         #header{
             width:600px;
             height:100px;
         }
         #load{
             background-color:#fff;
             margin-top:100px;
             width:600px;
             height:300px;
         }
         .centre{
             margin-left:auto;
             margin-right:auto;
         }
      </style>
   </head>
   <body>
      <div id="wrap" class="centre">
         <div id="header">
            </br></br></br></br>
            <p align="center" style="color:#fff;"> The Page doesn't refresh or reload </p>
         </div>
         <div id="load" style=""  class="centre">
            <embed src="form.html" width="600px" height="300px" style="border:1px solid">
         </div>
      </div>
   </body>
</html> 
```

`form.html`

```
<html>
   <head>
      <title>Page 1</title>
   </head>
   <body>
      <div id="div3">
         <div id="form">
            <form action="results.php" method="post" >
               <input id="field" name="field" required>
               <input id="submit" name="submit" type="submit" value="submit">
            </form>
         </div>
      </div>
   </body>
</html> 
```

`result.php`

```
<html>
   <head>
      <title>Page 2</title>
      <script type="text/javascript">
         function countdown() {
             var i = document.getElementById('counter');
             if (parseInt(i.innerHTML)>=100) {
                 location.href = 'link.html';
                 clearInterval(t);
                 exit;
             }
             i.innerHTML = parseInt(i.innerHTML)+1;
         }
         var t = setInterval(function(){ countdown(); },100);
      </script>
   </head>
   <body>
      <div id="div1">
         <p>this will be displayed on the results page. its not, just for reference. </p>
         <p>Submit: </p>
         <font color="#33CC00"><?php echo $_POST["field"]; ?> </font>
         <div style="margin-left:55px; margin-top:20px;">
            <p>Page change in: <font color="#33CC00"><span id="counter"> 10</span></font></p>
         </div>
         <img src="http://i.imgur.com/LLzENHe.gif">
      </div>
   </body>
</html> 
```

`link.html`

```
<html>
   <head>
      <title>Page 3</title>
   </head>
   <body>
      <div id="div3">
         <p>this is a link <a href="#">Link</a></p>
      </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:46:50.420

您可以通过将三个 div 设置为 '#home-page'、'#result-page' 和 'link-page' 来实现这一点。隐藏最后两页。然后对表单提交进行ajax调用并显示对#result-page div的响应并隐藏表单。几秒钟后，您将显示#link-page 并隐藏#result-page。

这是给你的[jsfiddle](http://jsfiddle.net/Uwcuz/5/)。我希望这是你想要的。

### HTML

```
<form method="post" action="results.php"> 
    <h2>Form Page</h2>
    Your form elements here
</form>
<div id="result-page" style="display:none">
    <h2>Result Page:</h2>
    Result of the ajax call here
</div>
<div id="link-page" style="display: none;">
    <h2>Link page:</h2>
    Link page content here
</div> 
```

在页面加载时，附加一个表单提交事件，在其中进行 ajax 调用并将响应附加到结果页面 div

### JS

```
$("form[ajax=true]").submit(function (e) {
$.ajax({
        url: 'results.php',
        type: 'POST',
        success: function (data) {
            $("#result-page").append(data).show(); // appending data response to result-page div
            $('form').hide();  //hiding form
            setTimeout(function () {
                $("#result-page").hide(); 
                $("#link-page").show();
            }, 5000);
        }
    });
}); 
```

# c - 多线程素数生成器

> ID：15739318
> 
> 赞同：1
> 
> 时间：2013-04-01T07:21:07.613
> 
> 标签：c, multithreading, pthreads, posix, primes

我有：

```
input1: n to generate primes up to
input2: no of threads to generate primes 
```

我实现了这个并且它可以工作，但**问题**是每个线程都会生成自己的 primes 列表`[2, n]`。

但我希望两个线程都在生成素数的同一任务上工作，彼此切换，而不是独立地。如何划分`n`线程数？

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

void *BusyWork(void *threadid)
{
long tid;
tid = (long)threadid;
printf("Hello World! It's me, thread # %ld\n", tid);

double s,d;
int n,i,c,k,p,cs,nsqrt;     
printf( "Input an integer n > 1 to generate primes upto this n:   " ); // prompt 
scanf("%d",&n); 
printf( "Entered integer: %d\n",n);
int array[n];
for(i=0;i<n;i++)
    array[i]=0;
s=sqrt(n);
d=floor(s);
nsqrt = (int) d;

for ( c= 2; c <= nsqrt; c++ )// note here < is not working <= is working here.
    {
        if(array[c]==0)
            {
                cs = c*c;
                k=0;
                for(p=cs; p<n; p=(cs+k*c))
                    {
                        k++;
                        array[p] = 1;
                }//for
            }//if
    }//for

    for ( i = 2; i < n; i++ )
    { 
        if (array[i]==0)
        {
            printf("%5d",i);
        }//if
    }// for
    printf("\n");

    printf("Above prime numbers are generated from me i.e. thread # %ld GOOD BYE!!! \n ", tid);

    pthread_exit((void*) threadid);
    }

  int main (int argc, char *argv[])
  {

   //////// time cal ///////////////////

     struct timespec start, finish;
     double elapsed;

      clock_gettime(CLOCK_MONOTONIC, &start);
     /////////////////////////////////////

    int NUM_THREADS;
     printf("Please Input Total Number of Threads you want to make:-  ");
     scanf("%d",&NUM_THREADS);

     pthread_t thread[NUM_THREADS];
     pthread_attr_t attr;
       int rc;
     long t;
     void *status;

       /* Initialize and set thread detached attribute */
     pthread_attr_init(&attr);
       pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);

      for(t=0; t<NUM_THREADS; t++) {
        printf("Main: creating thread %ld\n", t);
        rc = pthread_create(&thread[t], &attr, BusyWork, (void *)t); 
        if (rc) {
           printf("ERROR; return code from pthread_create() is %d\n", rc);
           exit(-1);
          }
        }

      /* Free attribute and wait for the other threads */
       pthread_attr_destroy(&attr);
      for(t=0; t<NUM_THREADS; t++) {
       rc = pthread_join(thread[t], &status);
      if (rc) {
       printf("ERROR; return code from pthread_join() is %d\n", rc);
       exit(-1);
       }
       printf("Main: completed join with thread %ld having a status of %ld\n",t,  (long)status);
      }

  printf("Main: program completed. Exiting.\n");
   ////////////// time end ////////////////////////
    clock_gettime(CLOCK_MONOTONIC, &finish);

   elapsed = (finish.tv_sec - start.tv_sec);
      elapsed += (finish.tv_nsec - start.tv_nsec) / 1000000000.0;
   printf("Total time spent by the main:  %e \n", elapsed);
    //////////////////////////////////////////////////////////
   pthread_exit(NULL);
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:04:45.497

抱歉，如果我误解了您的帖子，但我怀疑您误解了多线程的含义。您的代码和最后一个问题表明您认为启动多个相同的线程意味着它们会以某种方式自动在它们之间划分任务。这从根本上是不正确的。我们都希望是这样，但事实并非如此。

有几种方法。有一种“手动”方法，您可以利用问题中的并行性机会并为每个位编写一个线程（或使用不同的参数多次启动同一个线程。无论哪种方式线程+数据都不相同）。然后，您可以并行运行这些线程。本质上，这就是 Kirol Kirov 建议的方法。

另一种可以很好地解决长循环数学问题的替代方法是使用编译器，该编译器可以在运行时自动将循环分解为单独的线程。这意味着您编写普通的单线程代码并告诉编译器在可以确定这样做安全的地方生成线程。为您节省大量工作，并在适当的情况下产生有效的结果。Sun C 编译器可以在 Solaris 上执行此操作，而 Intel 编译器也可以执行此操作（可能仅在 Windows 上）。对最新和最伟大的研究进行一些研究可能是值得的。但是，这不会教您任何有关多线程编程的知识。

另一种方法是使用 openMPI 之类的东西（我认为）它允许您在 for 循环之前放置 #pragma 语句，以表示您希望并行执行 tile 循环。有点像 Intel 和 Sun 编译器的手动版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T07:37:48.273

你想要的远非微不足道。但这里有一个思想、研究和测试两个线程的想法。

为此，您需要在两个线程之间“拆分”作业。例如，让第一个线程在 之间查找素数`[ 2, k ]`，让第二个线程在 之间查找素数`[ k+1, x ]`。

这是微不足道的部分。问题来了——如何找到`x`？（`k`很容易 - `x / 2`）。

您应该研究 - 例如，如何找到给定区间内的素数数量。[**这**](https://math.stackexchange.com/questions/264544/how-to-find-number-of-prime-numbers-up-to-to-n)可能很有用：它说，您可以使用：

```
N ~~ x / ln(x) 
```

其中`N`是质数的个数，小于 x。

好吧，我不是数学家，我现在不能给你解决方案，但应该有办法，`N`必须找到`x`.

请注意，这适用于大量数字。

所以，有了这个，一旦你找到 x，你就可以在两个线程之间拆分工作。

如您所见，这真的远非微不足道，并且没有精确（精确）的方法来找到`x`( `N`)。

* * *

当然，另一种简单的方法（并且更容易但不是那么好）是知道范围`N`并将其分成两个间​​隔。或者，找到第一个，比如说，100 个素数并不是什么大问题。但是找到前 1000 个是另一回事。例如，在这种情况下，您可以为每个 +500 个素数启动额外的线程。

* * *

另一个想法是进行研究以找到`N`第 - 个素数的近似值。这可能会有所帮助：[有没有办法找到第 n 个素数的近似值？](https://stackoverflow.com/questions/1042717/is-there-a-way-to-find-the-approximate-value-of-the-nth-prime)

# linux - Linux 文件系统的挂钩函数

> ID：15739320
> 
> 赞同：5
> 
> 时间：2013-04-01T07:21:19.713
> 
> 标签：linux, linux-kernel, filesystems, hook

我想在将数据写入硬盘之前做一些事情。我不知道任何解决方案。为避免编辑内核源代码，是否有任何位置可以使用钩子函数作为可加载模块？

更新：谢谢大家，LSM 对 API 挂钩很有用。但我想找到其他提供机制挂钩读/写数据块的解决方案。它可以避免在更新文件后重新加密所有文件。

我认为我可以在文件系统（ext2、ext3、...）和缓冲区缓存之间进行修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:32:39.197

使用[Linux 安全模块](http://en.wikipedia.org/wiki/Linux_Security_Modules)。这些是可加载的内核模块，它们提供挂钩来调解对内核中各种内部对象的访问。您可以根据需要使用文件系统或 inode 的挂钩。一个很好的起点是阅读 Greg Kroah Hartman关于 LSM的[论文。](http://www.kroah.com/linux/talks/ols_2002_lsm_paper/lsm.pdf)然后您可以访问此[链接](http://blog.ptsecurity.com/2012/09/writing-linux-security-module.html)，其中显示了如何使用 LSM 挂钩的示例。该示例仅在插入特定 USB 时调解对系统的访问，并且是有关如何开始使用 LSM 挂钩的一个很好的参考点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:01:01.033

嗯，这是个有趣的问题。

不幸的是，即使是 LSM 也无济于事。作为一种可能的解决方案，我会推荐使用`address_space_operations`表和钩子`writepage`函数。例如，查看[ext3_writeback_aops](http://lxr.free-electrons.com/source/fs/ext3/inode.c#L1984)：

```
1984 static const struct address_space_operations ext3_writeback_aops = {
1985         .readpage               = ext3_readpage,
1986         .readpages              = ext3_readpages,
1987         .writepage              = ext3_writeback_writepage,
1988         .write_begin            = ext3_write_begin,
1989         .write_end              = ext3_writeback_write_end,
1990         .bmap                   = ext3_bmap,
1991         .invalidatepage         = ext3_invalidatepage,
1992         .releasepage            = ext3_releasepage,
1993         .direct_IO              = ext3_direct_IO,
1994         .migratepage            = buffer_migrate_page,
1995         .is_partially_uptodate  = block_is_partially_uptodate,
1996         .error_remove_page      = generic_error_remove_page,
1997 }; 
```

因此，在`ext3`文件系统的情况下，我们需要在内存中找到这个结构并替换`writepage`指向`our_writepage`包装器的指针。另请注意，此表位于只读内存中，您需要正确处理它。

编辑：

使用 LSM，可以挂钩打开操作并就地`inode`更换。`inode->i_mapping->a_ops`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T20:44:01.527

试试**FUSE** ( [https://github.com/libfuse/libfuse](https://github.com/libfuse/libfuse) )。

这是用户空间中的文件系统。您可以在用户空间中编写文件 I/O 处理程序，然后简单地将其挂载为应用程序的执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-04T03:42:48.810

这个示例示例演示了如何破解 libc 函数，例如 open\close\read\write 等。

您可以制作一个动态库文件*your_write_lib.so*，它实现了一个新的*写入*功能。

```
/* your_write_lib.c */

#define _GNU_SOURCE

#include <stdlib.h>
#include <stdio.h>
#include <dlfcn.h>
#include <stdarg.h>

ssize_t write (int fd, const void * buf, size_t count){
    ssize_t (*glibc_write)(int fd, const void * buf, size_t count);

    glibc_write = dlsym(RTLD_NEXT, "write");

    // do whatever you want

    return glibc_write(fd, buffer, strlen(buffer));
} 
```

*将 your_write_lib.c*编译成*.so*文件：

```
gcc -Wall -fPIC -shared -o your_write_lib.so your_write_lib.c  -ldl 
```

然后像这样运行您的应用程序：

```
LD_PRELOAD=./your_write_lib.so your_application 
```

*在LD_PRELOAD=./your_write_lib.so*的帮助下，Linux 操作系统将首先加载*your_write_lib.so*，然后是*glibc*。新的*open*会将glibc的 origin *open功能隐藏到您的应用程序中。*你可以在新的*open*函数中做任何事情，比如“写之前做点什么”。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-02T10:53:03.487

我不认为这是可能的。当用户空间调用文件 I/O 时，将从 VFS 调用文件系统实现或通用实现。您需要更改此函数指针以指向您的模块，该模块会加密您的数据，然后调用文件系统函数。

我在大学里做过类似的事情，但它是一个旧内核，你必须设置一个特定的配置标志。如果我记得这个标志已经消失了，因为您不希望内核模块在其范围之外乱用函数指针。

无论如何，您都可以在这里找到该模块：[https ://motzblog.wordpress.com/2007/10/27/linux-monitoring-module/](https://motzblog.wordpress.com/2007/10/27/linux-monitoring-module/)

但请注意，这是一个大学项目，所以代码质量不是你想要的，除了 Linux 内核代码。

# c# - 尝试展开列表中的项目时调试停止

> ID：15739323
> 
> 赞同：1
> 
> 时间：2013-04-01T07:21:47.557
> 
> 标签：c#, list, generics, visual-studio-debugging

出于某种原因，当我尝试扩展`_nodeDependencies`列表中的每个项目时`IEnumerable<Node<T>>`，它显示有 13 个项目，但是当我开始扩展它们时，它说它无法向我显示内容，并且在我点击后调试器最终退出许多 + 以展开列表中的项目。我不知道这是泛型在运行时的工作方式还是什么。

```
public class Tree<T> where T : INode
{

    private readonly IEnumerable<T> _sourceDependencies;
    private IEnumerable<Node<T>> _nodeDependencies;
    public Node<T> RootNode { get; set; }
    public Dictionary<Node<T>, IList<Node<T>>> FlattenedMap { get; private set; }

    public Tree(T rootNode, IEnumerable<T> dependencies)
    {
        RootNode = new Node<T>(rootNode); 
        _sourceDependencies = dependencies;
    }

    public void BuildTree()
    {
        _nodeDependencies = ConvertDependenciesToNodes(_sourceDependencies);
        AddChildren();
    }

    private IEnumerable<Node<T>> ConvertDependenciesToNodes(IEnumerable<T> listToConvert)
    {
        IEnumerable<Node<T>> nodeList = listToConvert.Select(sourceNode => new Node<T>(sourceNode)).ToList();

        return nodeList;
    }
} 
```

当我将鼠标悬停时，意义重大`_nodeDependencies = ConvertDependenciesToNodes(_sourceDependencies);`

`_nodeDependencies`说 13 项，所以我展开列表，然后尝试展开一项或两项，它对我保释并停止调试

![在此处输入图像描述](https://i.stack.imgur.com/OsYKQ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:10:26.673

值得怀疑的是，这与泛型的使用有关。正如 Lanorkin 所提到的，这更有可能是超时的结果。

您可能会尝试创建一些解决方法 - 增强您在“监视”窗口中实际观察的内容，进行深入研究。

换句话说，不是（或除此之外）手表 on ，而是`_nodeDependencies`尝试在手表上创建手表`_nodeDependencies[0]`，看看会发生什么。继续这个向下钻取过程，直到你到达你真正想要检查的层。

这可能有用的原因（尤其是在挖掘`IQueryable`数据库结果或在 Web 上下文中操作时）是系统自动向下钻取所需的时间比您单击所需的时间要少*得多*使用 IDE 的一系列结果 - 因此您有更好的机会在任何类型的超时发生之前查看您想要的内容。

# python - Python：如何以 HH:MM 格式获取 2 个日期的差异？

> ID：15739324
> 
> 赞同：1
> 
> 时间：2013-04-01T07:21:51.113
> 
> 标签：python, date, time, subtraction

我有 2 个日期时间对象：

```
a 
datetime.datetime(2013,2,11,15,35)

b
datetime.datetime(2013,2,11,18,55) 
```

时差是 3:20

我怎样才能在python中获得这个？

我愿意：

```
(b-a).seconds/3600 
```

但我得到 3 而不是 3:20

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T07:29:26.267

可以接受人工施工吗？如果你减去两个日期时间，你会得到一个 timedelta 对象。然后从中获取值：

```
>>> diff = b - a
>>> diff
datetime.timedelta(0, 12000)

>>> hrs = diff.seconds / 3600
>>> hrs
3
>>> mins = diff.seconds % 3600 / 60
>>> mins
20
>>> "%s:%s" % (hrs, mins)
'3:20' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T07:35:28.913

```
>>> diff = b - a
>>> diff
datetime.timedelta(0, 12000)
>>> (datetime.datetime(2010, 1, 1, 0, 0, 0) + diff).strftime("%H:%M")
'03:20' 
```

也可能是一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:44:39.150

也许我认为时间是：

```
(b-a).days*24 +(b-a).seconds/3600 
```

这是另一种方式：

```
x = (b-a).seconds/3600.0 + (b-a).days*24
hours = int(x)
mins = int((x - hours)*60) 
```

# android - 可以以编程方式显示 ListView 布局生成动态吗

> ID：15739329
> 
> 赞同：0
> 
> 时间：2013-04-01T07:22:10.573
> 
> 标签：android, listview, dynamic

我有一个活动，我想在其中显示像 datagrid 这样的 ListView。arraylist ITransducer[] 是动态的，我想使用arraylist 来生成listview 的列。

# 列表显示

ITransducer1 | ITransducer2 | ITransducer3

# aa1 | aa2 | aa3

我已经覆盖了 getView() 方法，但是我必须像这样为 listview 加载一个布局 view = vi.inflate(R.layout.historical_data_details_item, null);

我可以通过 ITransducer[] 动态生成列表视图布局吗？

```
public class HistoricalDataDetailsActivity extends Activity {
ListView lvDetails;
Context context;
IDAL idal;
TransducerFactory tFactory;

@Override
protected void onCreate(Bundle savedInBundleState) {
    super.onCreate(savedInBundleState);
    setContentView(R.layout.historical_data_details);
    context = this;
    tFactory = new TransducerFactory();
    lvDetails = (ListView) findViewById(R.id.lvDetails);
}

@Override
protected void onStart() {
    super.onStart();
    ITransducer[] its = new ITransducer[]{
        new AbsTransducer("aa1", TransducerType.AirPressure),
        new AbsTransducer("aa2", TransducerType.AirPressure),
        new AbsTransducer("aa3", TransducerType.Temperature)
    }; 
```

// ListViewItemAdapter 适配器 = new ListViewItemAdapter(this, R.layout.historical_data_details_item,its); // lvDetails.setAdapter(适配器); }

```
class ListViewItemAdapter extends ArrayAdapter<ITransducer>{
    boolean HasHeader = false;

    public ListViewItemAdapter(Context context, int textViewResourceId, ITransducer[] objects){
        super(context, textViewResourceId, objects);

    }

    public View getView(int position, View convertView, ViewGroup parent){
        View view = convertView;
        if(view == null){
            LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.historical_data_details_item, null);

            TextView tvDate = new TextView(context);
            tvDate.setLayoutParams(new ActionBar.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            tvDate.setText("DateTime");

            LinearLayout layout = (LinearLayout) view.findViewById(R.id.tLayout);
            layout.addView(tvDate);
            view = layout;

        }else
            view = convertView;

        return view;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:59:29.107

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

       if (aa1!= null) {
            holder.aa1_tv.setText(aa1.getName());
        }
       if (aa2!= null) {
            holder.aa2_tv.setText(aa2.getName());
        }
       if (aa3!= null) {
            holder.aa3_tv.setText(aa3.getName());
        }
} 
```

这`aa1/aa2/aa3`是代表列的类的对象，您可以使用数据库对其进行初始化。

# visual-studio-2012 - microsoft visual studio 2012 pro 安装失败

> ID：15739335
> 
> 赞同：0
> 
> 时间：2013-04-01T07:22:50.937
> 
> 标签：visual-studio-2012, installation

我安装了 Visual Studio 2010 和 2008。现在我尝试安装 Visual Studio Pro 2012。但是它抛出了一个错误，如图所示。Visual Studio 安装错误消息是

```
Microsoft Visual C++ 2012 x64 Minimum Run time - 11.0.507.
Cannot find the requested object. 
```

如果任何机构有相同的问题或任何机构知道解决方案，请让我知道，我处于困惑状态

更新：

当时我的 Windows 7 没有更新。一旦我`check updates`安装了所有推荐的和可选的更新。然后我就可以安装带有 Web 开发人员选项的 Visual Studio 2012。

`Finally my issue got resolved`谢谢你的时间。

我的建议：

请确保您`closed all application`和您`windows was updated`在安装 Visual Studio 2012 之前和我的建议是使用`*.iso`文件而不是`*.exe`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:40:29.897

就我个人而言，我也遇到了这个问题，而且我的 ISO 文件已损坏..

我使用 md5summer 检查 SHA1 密钥，然后再次下载它的工作

检查以下步骤：

1.  确保您的 VS2012 安装程序没有损坏，您可以从此处的 Microsoft 官方网站下载一个新的安装程序：http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-premium-2012](http://www.microsoft.com/visualstudio/eng/products/visual-studio-premium-2012)
2.  您用于安装 VS2012 Premium 的用户帐户应该是管理员组之一。
3.  用户帐户应具有对 C:\ProgramData\Package Cache 文件夹的完全访问权限。

# java - firebug（和 Chrome 的网络监视器）是否监视 java applet 的 http POST/GET？

> ID：15739338
> 
> 赞同：0
> 
> 时间：2013-04-01T07:23:10.060
> 
> 标签：java, applet, firebug, monitor

firebug（和 Chrome 的网络监视器）是否监视 java 小程序的 http 帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:48:18.630

似乎没有……我用 Fiddler 代替……

# php - 获取坐标是否在折线内

> ID：15739339
> 
> 赞同：2
> 
> 时间：2013-04-01T07:23:16.430
> 
> 标签：php, maps, coordinates

给定地图中的坐标折线，我如何知道坐标是否在该折线内？

例如，在这张图片中：

[![多想饼干](https://i.stack.imgur.com/EL2Vv.png)](https://i.stack.imgur.com/EL2Vv.png)

我怎么知道 40.744818,-73.989701（例如）是否在里面？

最好在 PHP 中：P

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:31:59.670

这个问题已经解决（使用javascript），请阅读：[https ://gis.stackexchange.com/questions/26225/solving-the-point-in-polygon-problem-using-google-maps-and-fusion-tables](https://gis.stackexchange.com/questions/26225/solving-the-point-in-polygon-problem-using-google-maps-and-fusion-tables)

这是数学描述： [http](http://en.wikipedia.org/wiki/Point_in_polygon) ://en.wikipedia.org/wiki/Point_in_polygon ，这里有一些不同的算法，你可以使用。我向您推荐`Ray casting algorithm`( `RCA`) 从这里： [http ://rosettacode.org/wiki/Ray-casting_algorithm](http://rosettacode.org/wiki/Ray-casting_algorithm)

有一个伪代码可以在 php 中实现；）

为了解决数学问题，推荐浏览这个项目：[http](http://www.phpmath.com/home) ://www.phpmath.com/home 并希望你能找到一个已实现的 php 解决方案来解决你的问题；）

如果您需要更高的性能，您可以`collusion detection`在 2D 中进行处理。第一步：在你的多边形周围创建一个外矩形，看是矩形中的点。如果在里面，你有机会你的点在多边形里面，然后运行`Ray Casting Algorithm`​​. 看：

```
$px //the x coordinate of your point
$py //the y coordinate of your point
$ppy //the y coordinates of points of your polygon (in the correct order)
$ppx //the x coordinates of points of your polygon (in the correct order)

$isInside = 
    (max($ppy)>$py && min($ppy)<$px && max($ppx)>$px && min($ppy)<$px)?
    RCA($px,$py,$ppx,$ppy): 
    false;    
}

/**
 * @description decide, is a point in poligon
 * @param float $px the x coordinate of your point
 * @param float $py the y coordinate of your point
 * @param array(float) $ppx the x coordinates of the points of polygon
 *             array(x1,x2,...) 
 * @param array(float) $ppy the y coordinates of the points of polygon
 *             array(y1,y2,...) 
 *             points of polygon: [x1,y1],[x2,y2],...
 * @return boolean : Is the point inside the polygon?
 */
function RCA($px,$py,array $ppx,array $ppy){
      //the implementation
} 
```

（如果在你的使用中，外矩形外有很多坐标，这段代码跑得更快。2、2、2、2`max`条件`min`测试比运行）`<``>``RCA``RCA`

（下面的解决方案不是面向对象的。如果您使用`OOP`该解决方案可能会更好:)）

帮助链接在哪里是 php 中的实现：http: [//assemblysys.com/php-point-in-polygon-algorithm/](http://assemblysys.com/php-point-in-polygon-algorithm/)（不完全是我写的，但应该可以）

# html - Zurb Foundation 4 默认正文字体大小更改导致布局宽度问题

> ID：15739340
> 
> 赞同：4
> 
> 时间：2013-04-01T07:23:22.213
> 
> 标签：html, css, zurb-foundation

我的要求是，如果开发人员在网页上的任何位置键入一些没有特定标签（`<p>`等）的文本，则字体大小应与`<p>`标签的字体大小相同。

在`foundation.css`我改变了`html,body { font-size:0.85 }`. 通过此编辑，整个布局（整个站点模板）正在缩小。增加尺寸会导致反之亦然。

有没有其他方法可以安全地将我们自己的默认正文字体大小引入基础而不损害模板？

是否有任何建议可以在不向内容包装 div 引入新的 font-size 属性的情况下实现我的要求？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T08:19:57.153

Zurb 使用您在 html, body {} 样式中指定的字体大小来计算网站的宽度。无论您将 font-size 值设置为什么，整个站点都将变为 1em。如果您进一步查看 css，您会发现 .row {} 的定义类似于 max-width: 62.5em。

可以想象，当您减小 1em 的值时，行的 62.5em 值也会变小。我不太了解使用 zurb 的 css 版本对其进行修改，因为我一直使用 sass gem，但您可以调整行宽的 em 数量。

尝试：

所需的站点宽度/以 px 为单位的正文字体大小 = 您的行最大宽度应该是的 em 数。

例如

如果你想要 960 宽度，基本字体大小为 12px

960 / 12 = 80

因此，您可以将行最大宽度设置为 80em。

我相信会有更好的资格的人出现并给出更好的答案，但这就是我理解网格的方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-08T22:18:15.927

看起来您没有使用 sass，所以这对这个特定的人没有帮助，但**如果有人使用 sass**，请注意以下基础源代码中的注释`components/_variables.scss`：

> 典型的默认浏览器字体大小为 16 像素，用于计算网格。**如果您希望基本字体大小不同并且不影响网格断点**，请将 $em-base 设置为 $base-font-size 并确保 $base-font-size 是 px 值。

（重点补充）

因此，在您导入任何或所有基础 sass 文件之前，您将编写如下内容：

```
$base-font-size: 12px;
$em-base: $base-font-size; 
```

注意：上面的“典型的默认浏览器字体大小是 16px”。Foundation 使用 normalize.css，而 normalize 会将其设置为默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T01:08:58.903

不要修改`foundation.css`，而是在您自己的“单独”css 文件中定义您自己的样式。例如，如果您这样做：

```
body {
    font-size: 1.5em;
} 
```

并且具有以下布局，您将看到网格仍然响应您的设备/浏览器的宽度。

```
<div class="large-12 columns">    
    <div class="row">
        <div class="large-4 columns">
            <div class="panel">
                <p>Four columns</p>
            </div>
        </div>
        <div class="large-4 columns">
            <div class="panel">
                <p>Four columns</p>
            </div>
        </div>
        <div class="large-4 columns">
            <div class="panel">
                <p>Four columns</p>
            </div>
        </div>
    </div>
</div> 
```

[在此处查看实际操作](http://jsfiddle.net/SADkk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T02:11:00.260

我能想到的最简单的解决方案是在您的内容区域（或整个页面）周围创建一个包装元素并更改字体大小，如下所示：

```
<div class="content">
<p>My stuff</p>
<a href="#" class="button">A button</a>
</div> 
```

然后在你的 CSS 中：

```
.content * {
font-size: 90% !important;
} 
```

未经测试，但我相当肯定我过去做过类似的事情。

# android - 为什么 targetSdkVersion 不影响 NetworkOnMainThreadException？

> ID：15739346
> 
> 赞同：3
> 
> 时间：2013-04-01T07:23:39.393
> 
> 标签：android, networking, android-2.3-gingerbread

我正在编写一个针对 SDK 版本 10 (Android 2.3.3) 的 Android 应用程序。它碰巧在主线程中进行了一些联网，这会在 Android 4.0 模拟器上导致 NetworkOnMainThreadException。现在，我知道在主线程中进行联网是错误的，我会修复它，但问题不在于那个。

我在 mainfest 中将目标 SDK 版本设置为 10：

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="10" /> 
```

[关于异常的文档](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)说：

> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

那么，如果 API 10 中不应该出现异常，为什么会引发异常呢？

# linux - 如何在不同的端口上启动多个 memcached 服务器

> ID：15739348
> 
> 赞同：-2
> 
> 时间：2013-04-01T07:23:54.637
> 
> 标签：linux, ubuntu, memcached

memcached 实例在默认端口安装后自动启动。重启我的 Ubuntu 机器后，如何在不同的端口（比如 11212 或 11213）上启动多个 memcached 服务器。

sudo apt-get install memcached

ps -ef | grep memcached 内存缓存 21315 1 0 07:04 ？00:00:00 /usr/bin/memcached -m 64 -p 11211 -u memcache -l 127.0.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:32:15.937

您应该阅读解释配置和故障排除的 memcached 教程：

**使用 Memcached 提高 Java 企业性能**，**第 1 部分**：架构和设置 [http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html](http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html)

**使用 Memcached 提高 Java 企业性能，第 2 部分**：数据库驱动的 Web 应用程序 [http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html](http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html)

# javascript - 用 javascript 关闭标签

> ID：15739352
> 
> 赞同：0
> 
> 时间：2013-04-01T07:24:03.533
> 
> 标签：javascript, html, text-formatting

我正在尝试使用 javascript 关闭标签，但是当它写入文档时，正斜杠总是丢失。我试过在它前面加上一个反斜杠（“\/”），但它似乎有帮助。我一直`<pre>`在页面源上看到。这是代码：

```
var temp_index = 0,
    line_count = 0;
while (temp_index < text.length) {
    if ((text.charAt(temp_index) == "\n") && (line != line_count)) {
        if (line_count < line) line_count++;
        if (line_count == line) {
            text = text.substring(0, temp_index) + "<pre id='line'>" + text.substring(temp_index);
            temp_index++;
            while ((text.charAt(temp_index) != "\n") && (temp_index < text.length)) temp_index++;
            text = text.substring(0, temp_index - 1) + "<\pre>" + text.substring(temp_index);
        }
    }
    temp_index++;
}
return text; 
```

我期望得到：

```
Heres's the last line
<pre id='line'>Here's the current line</pre>
Here's the next line
Here's the final line 
```

但我得到：

```
Here's the last line
<pre id='line'>Here's the current line
Here's the next line
Here's the final line</pre> 
```

我通过用标签替换行尾的 \n 来快速修复。即使它解决了这个问题，它也会导致键盘输入出现错误。这是更新的代码。

```
if (line_count == line) {
    text = text.substring(0, temp_index) + "<pre id=\"line\">" + text.substring(temp_index);
    temp_index++;
    while ((text.charAt(temp_index) != "\n") && (temp_index < text.length)) temp_index++;
    text = text.substring(0, temp_index - 1) + "</pre>" + text.substring(temp_index);
    break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:44:29.720

这段代码在语法上是正确的——初始化`temp_index`并`text`省略`break`了循环的外部：

```
temp_index = 0;
text = "this is \n a test \n of some info";

text =  text.substring( 0, temp_index )
     + "<pre id=\"line\">"
     + text.substring( temp_index );

temp_index++;

while( ( text.charAt( temp_index ) != "\n" ) && ( temp_index < text.length ) ) temp_index++;

text = text.substring( 0, temp_index - 1 )
     + "</pre>"
     + text.substring( temp_index - 1 );

alert(text); 
```

结果是

```
<pre id="line">this is</pre> 
 a test 
 of some info 
```

您还可以使用`replace`重写当前行并获得与上述相同的结果：

```
text = "this is \n a test \n of some info";
text = text.replace(/(.+?)\n/, "<pre id=\"line\">$1</pre>\n"); 
```

如果您知道当前行并且想在它前面加上它`<pre id=\"line\">`，`</pre`我会使用`split()`and `join()`：

```
// update line 2
line = 2;

// sample text
text = "this is\n"+
       "a test\n"+
       "of some info";

// split to an array on newlines
vals = text.split("\n");

// replace the second line, which has an index of 1 (or line-1)
vals[line-1] = "<pre id=\"line\">" + vals[line-1] + "</pre>";

// join back to an array using newlines
text = vals.join("\n"); 
```

结果：

```
this is
<pre id="line">a test</pre>
of some info 
```

# java - 无法将数据写入文件

> ID：15739353
> 
> 赞同：0
> 
> 时间：2013-04-01T07:24:09.123
> 
> 标签：java, android, file-io

我正在尝试将数据写入 android 中的文件，但我无法这样做。请检查我的代码并指导我。

```
public static final File SCANNED = new File(Environment.getExternalStorageDirectory() + File.separator + "/scanned.txt");
private void WriteIntoScannedFile(String tmp) { 

        try{
        FileWriter writer = new FileWriter(Constants.SCANNED,true);
        LineNumberReader  lnr = new LineNumberReader(new FileReader(Constants.pincode_records));

        //writer.append("App has been activated successfully");
        writer.append(tmp);
writer.append(#);
        writer.close();

        }catch(Exception e){
             e.printStackTrace();
        }
    } 
```

原木猫

```
04-01 12:40:24.260: W/System.err(2300): java.io.FileNotFoundException: /mnt/sdcard/scanned.txt (Is a directory)
04-01 12:40:24.260: W/System.err(2300):     at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
04-01 12:40:24.260: W/System.err(2300):     at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
04-01 12:40:24.260: W/System.err(2300):     at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
04-01 12:40:24.260: W/System.err(2300):     at java.io.FileWriter.<init>(FileWriter.java:58)
04-01 12:40:24.260: W/System.err(2300):     at com.ecomm.android.ScanShipments.WriteIntoScannedFile(ScanShipments.java:334)
04-01 12:40:24.260: W/System.err(2300):     at com.ecomm.android.ScanShipments.MatchedShipment(ScanShipments.java:238)
04-01 12:40:24.260: W/System.err(2300):     at com.ecomm.android.ScanShipments.AddRecord(ScanShipments.java:208)
04-01 12:40:24.260: W/System.err(2300):     at com.ecomm.android.ScanShipments.access$5(ScanShipments.java:202)
04-01 12:40:24.260: W/System.err(2300):     at com.ecomm.android.ScanShipments$2.onKey(ScanShipments.java:110)
04-01 12:40:24.260: W/System.err(2300):     at android.view.View.dispatchKeyEvent(View.java:3850)
04-01 12:40:24.260: W/System.err(2300):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-01 12:40:24.260: W/System.err(2300):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-01 12:40:24.260: W/System.err(2300):     at android.widget.ScrollView.dispatchKeyEvent(ScrollView.java:386)
04-01 12:40:24.260: W/System.err(2300):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-01 12:40:24.260: W/System.err(2300):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-01 12:40:24.260: W/System.err(2300):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-01 12:40:24.260: W/System.err(2300):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1746)
04-01 12:40:24.260: W/System.err(2300):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1130)
04-01 12:40:24.260: W/System.err(2300):     at android.app.Activity.dispatchKeyEvent(Activity.java:2073)
04-01 12:40:24.260: W/System.err(2300):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1722)
04-01 12:40:24.260: W/System.err(2300):     at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2627)
04-01 12:40:24.260: W/System.err(2300):     at android.view.ViewRoot.handleMessage(ViewRoot.java:2030)
04-01 12:40:24.260: W/System.err(2300):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 12:40:24.260: W/System.err(2300):     at android.os.Looper.loop(Looper.java:130)
04-01 12:40:24.260: W/System.err(2300):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-01 12:40:24.260: W/System.err(2300):     at java.lang.reflect.Method.invokeNative(Native Method)
04-01 12:40:24.260: W/System.err(2300):     at java.lang.reflect.Method.invoke(Method.java:507)
04-01 12:40:24.260: W/System.err(2300):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-01 12:40:24.260: W/System.err(2300):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-01 12:40:24.260: W/System.err(2300):     at dalvik.system.NativeStart.main(Native Method)
04-01 12:40:24.260: I/System.out(2300): returning from verified
04-01 12:40:24.310: W/KeyCharacterMap(2300): No keyboard for id 0
04-01 12:40:24.310: W/KeyCharacterMap(2300): Using default keymap
04-01 12:41:13.800: W/IInputConnectionWrapper(2300): showStatusIcon on inactive InputConnection 
```

**请告诉我如何在 android 应用程序中写入数据，即在应用程序内部的文件中**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:27:08.913

你得到`java.io.FileNotFoundException: /mnt/sdcard/scanned.txt (Is a directory)`是因为你在 sdcard 中没有那个文件，但你想写那个文件。

你必须这样做：

```
File sdcard = Environment.getExternalStorageDirectory();

//Get the text file
File file = new File(sdcard,"scanned.txt");

//Read text from file
StringBuilder text = new StringBuilder();

try {
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line;

    while ((line = br.readLine()) != null) {
        text.append(line);
        text.append('\n');
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here
} 
```

您必须在 androidmanifest 文件中添加此权限；

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:29:24.830

写入前请先创建文件。

```
File SCANNED  = new File(Environment.getExternalStorageDirectory() + File.separator + "scanned.txt");
SCANNED.createNewFile(); 
```

并在 android manifest 文件中授予写权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# python - 选择 * 我们有参考值的地方多次存在

> ID：15739357
> 
> 赞同：0
> 
> 时间：2013-04-01T07:24:27.213
> 
> 标签：python, sql, django

嗨，我需要通过引用某个值来获取数据，但问题是该值多次存在

![在此处输入图像描述](https://i.stack.imgur.com/VwCU0.png)

我需要使用对用户 ID 的引用来获取所有值

我认为的功能是

```
> def rewardhistory(request):
>     cursor = connection.cursor()
>     reward = Rewardpoints_log.objects.get(userid='894490') 
>     return render_to_response('credits.html',{'reward':reward},context_instance=RequestContext(request)) 
```

但它抛出错误多个值存在

我该怎么做请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:57:59.053

使用[`filter()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#filter)而不是`get()`. `get`只获取一个结果。

```
def rewardhistory(request):
    reward = Rewardpoints_log.objects.filter(userid='894490') 
    return render_to_response('credits.html', 'reward':reward},context_instance=RequestContext(request)) 
```

我猜你没有使用你的模型之间的任何关系。我建议你开始这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:09:01.617

通过使用它提供的过滤器

Rewardpoints_log: 202 >,

在 HTML 文件中使用这个

{{ 报酬 }}

当我尝试

{{ 奖励.rewardpoints }}

它什么也不返回

# asp.net-mvc - 为什么许多 MVC html Helpers 使用 Delegates 作为输入参数

> ID：15739358
> 
> 赞同：2
> 
> 时间：2013-04-01T07:24:31.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3, delegates, html-helper, mvc-editor-templates

在 MVC 中，如果您想为属性创建编辑器或显示属性，您可以执行以下操作：

```
@Html.EditorFor(m=> m.MyModelsProperty);
@Html.DisplayFor(m=> m.MyModlesProperty); 
```

为什么我们必须传递一个委托为什么我们不能直接传递模型的属性？例如：

```
@html.EditorFor(Model.MyModlesProperty); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:24:53.513

原因是元数据。您知道，您可以在模型上添加的所有属性，例如`[Required]`, `[DisplayName]`, `[DisplayFormat]`, ... 所有这些属性都是从 lambda 表达式中提取的。如果您只是传递了一个值，那么助手将无法从中提取任何元数据。这只是一个虚拟值。

lambda 表达式允许分析模型上的属性并从中读取元数据。然后助手变得智能并且根据您指定的属性将采取不同的行动。

因此，通过使用 lambda 表达式，助手可以做更多的事情，而不仅仅是显示一些值。它能够格式化这个值，它能够验证这个值，......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:46:33.847

我想补充一点，除了元数据和使 Html 帮助程序强类型为 Model 类型之外，还有另一个原因：

表达式允许您知道属性的**名称**，而无需将字符串硬编码到项目中。如果您检查由 MVC 生成的 HTML，您会看到您的输入字段已命名`"ModelType_PropertyName"`，然后允许`Model Binder`创建复杂类型并传递给您的控制器操作，如下所示：

```
public ActionResult Foo(MyModel model) { ... } 
```

另一个原因是`Linq to SQL`。表达式树是将 Lambda 转换为 SQL 查询所必需的魔法。~~因此，如果您要执行以下操作：~~

 ~~```
Html.DisplayFor(p => p.Addresses.Where(j => j.Country == "USA")) 
```~~ 

~~并且您的 DbContext 仍处于打开状态，它将执行查询。~~

**UPDATE**
划出一个错误。你每天学习新的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:29:03.830

第一个示例提供了一个**强类型**参数。它迫使您从模型中选择一个属性。在第二个类型更**松散的**地方，您可以在其中放入任何内容，甚至是模型的无效属性。

**编辑：** 令人惊讶的是，我找不到强类型和松散类型的好例子/定义，所以我只给出一个简短的例子。

如果签名是，`@html.EditorFor(string propertyName);`那么我在输入名称时可能会打错字，直到运行时才会被发现。更糟糕的是，如果模型上的属性发生变化，它不会引发编译器错误，并且直到运行时才会再次被检测到。这可能会浪费大量时间调试问题。

另一方面，使用 lambda，如果模型的属性发生更改，您会收到编译器错误，如果您想编译程序，则必须修复它。**编译时检查总是优于运行时检查**。这消除了人为错误或疏忽的机会。

# firebase - Firebase：.priority 值

> ID：15739359
> 
> 赞同：11
> 
> 时间：2013-04-01T07:24:41.057
> 
> 标签：firebase

*   如何检查我的“Forge”中的 .priority 值？
*   根据文档，较小的 .priority 值位于较大的 .priority 值之前。如果我使用自纪元以来的秒数作为优先级，并且我希望最新的孩子出现在顶部，我应该将 .priority 设置为 1/秒吗？

> 接下来是优先考虑数字的孩子。它们按优先级（从小到大）按数字排序，然后按名称按字典顺序排序（a 到 z）。

*   通过实验，我确定如果我将 .priority 设置为 java.util.Date#getTime，则在使用 prevChildName 进行排名时，年龄最大的孩子会出现在我的 Forge 中，但最新的孩子会出现在我的 Javascript on() 中。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:50:50.473

您可以`.priority`通过 Forge 的“导出 JSON”在 json 中看到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-18T12:15:20.877

利用

```
snapshot.getPriority(); 
```

更多在 [https://www.firebase.com/docs/javascript/firebase/setwithpriority.html](https://www.firebase.com/docs/javascript/firebase/setwithpriority.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-14T02:10:01.457

Forge 不提供它**，但**您可以从 JSON 格式中看到它：

`https://YOURAPP.firebaseio.com/.json?print=pretty&format=export`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T06:15:57.493

现在在 Forge 中无法查看实际的优先级值，但孩子们将被正确排序。

如果您想要按时间倒序对项目进行排序，我建议只需将优先级设置为正常时间戳（或使用推送 - 它会自动对它们进行排序）。然后，您可以简单地向后渲染它们以实现您想要的相反顺序。例如，您可以在第一个元素之前插入新消息，而不是将新消息附加到应用程序列表的底部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-08T22:26:11.283

`snapshot.exportVal()`

> 将 DataSnapshot 的全部内容导出为 Javascript 对象。这类似于 val()，除了包含优先级信息（如果可用），使其适合备份您的数据。
> 
> 导出格式是一个 Javascript 对象，其中添加了“.priority”条目到具有优先级的任何对象。对于具有优先级的原始值（字符串、数字或布尔值），该值被包装在具有“.value”和“.priority”属性的对象中。在没有优先级的原始值的情况下，返回原始值。

资料来源：[https ://www.firebase.com/docs/web/api/datasnapshot/exportval.html](https://www.firebase.com/docs/web/api/datasnapshot/exportval.html)

# javascript - 数字> = 100的jquery验证

> ID：15739366
> 
> 赞同：0
> 
> 时间：2013-04-01T07:25:34.127
> 
> 标签：javascript, jquery

我必须像以下场景一样进行验证。

如果下拉的值为“yes”，则检查文本框值是否>= 100并返回true，否则返回false

```
Rules:{
valid:{
    required: function() {
    return $('#req').val() == 1; //this checks if the drop down value is yes
    //here after this value becomes true, i want to check if the value in "valid" field    is >=100 and based on that i want to return true. 
      }
    }
},
Messages:{
 required : "Enter years",
 IsNumeric: "Enter numbers only"
} 
```

文本框 (id = valid) 取决于 dropdown(req) 字段。如果req 为yes，则检查有效字段是否只有数字，并检查有效字段中的值是否>=100。如果不是数字仅验证它（这已经完成）。如果数字 >=100，则显示一条消息。有人可以帮忙验证输入的数字是否 >=100

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:39:17.187

```
valid:{
    required: function() {
      var $dropdown=$('#req');
      var $textBox=$("#valid");
      var number = parseInt($textBox.val(),10);
      number = isNaN(number) ? 0 : number;
      if($dropdown.val() == 1){
        return number >= 100;
      } 
      // other values for $dropdown that might need to be checked:
      return true;
} 
```

如果下拉列表为 1 且数字大于 100，则返回 true；如果下拉列表不为 1，则返回 true。注释“其他值...”是您可以结合其他元素添加对下拉列表的其他检查的地方。

# c# - C# 将字符串转换为字节 [] 和字节 [] 转换为字符串时出现内存不足异常

> ID：15739367
> 
> 赞同：2
> 
> 时间：2013-04-01T07:25:47.520
> 
> 标签：c#, encryption, compression

我正在实现一个读取 xml 文件、加密和压缩它们然后作为流发送到 Web 服务的系统我的测试 xml 文件大小从 1KB 到 26MB 不同。当我将代码作为单线程运行时，它似乎运行良好。但是，当将我的代码更新为多线程时，它会在操作大文件时在代码的不同部分抛出内存异常。

这是我的代码引发异常的代码块：

1.

```
RijndaelManaged sessionKey = new RijndaelManaged();
sessionKey.KeySize = 256;
EncryptedXml eXml = new EncryptedXml();
byte[] encryptedElement = eXml.EncryptData(xmlDoc.DocumentElement, sessionKey, false); 
```

2.

```
EncryptedXml.ReplaceElement(xmlDoc.DocumentElement, edElement, false); 
```

3.

```
private static string CompressStream(string data)
        {
            byte[] byteData = System.Text.ASCIIEncoding.ASCII.GetBytes(data);
            byte[] compressedData = QuickCompression.Compress(byteData, CompressionMethod.Deflated, CompressionLevel.Highest);
            return Convert.ToBase64String(compressedData);
        } 
```

在第三部分中，代码可以在任何行抛出异常，但尤其是在第三行抛出异常

```
Convert.ToBase64String(compressedData); 
```

同时，我在代码运行时通过任务管理器检查我的内存，似乎有很多可用内存可供使用！

我的假设是，即使总共有可用内存，也没有足够的可用内存来适应字节数组大小作为统一块。

你怎么看待这件事？

如果我的假设是正确的，那么

有没有办法强制内存合并可用内存块以获得大的可用块？或者有什么方法可以强制我的代码等到有足够的可用内存来适应字节数组大小作为统一块？

如果我的假设是错误的，那么可能是什么问题？

谢谢

**编辑**

有一个名为[MemoryFailPoint](http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx)的类，它可以帮助我解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T16:21:26.183

估计是`new string`里面`Convert.ToBase64String`的

我可能有类似的问题。简单地分配巨大的内存块并`new string`抛出内存异常。在我的盒子（8 GB 主内存）上，170 MB 及以上。

# cakephp - CakePhp find 不获取 hasMany 关系

> ID：15739368
> 
> 赞同：0
> 
> 时间：2013-04-01T07:25:48.403
> 
> 标签：cakephp, find, has-many

我有这些简单的模型：

```
// 活动日志
类 ActivityLog 扩展 AppModel {

    公共 $name = '活动日志';

    公共 $useTable = "activity_logs";

    public $hasMeny = array("ActivityLogMedia");

}

// 活动日志媒体
类 ActivityLogMedia 扩展 AppModel {

    公共 $name = 'ActivityLogMedia';

    公共 $useTable = "activity_logs_media";

    public $belongsTo = array('ActivityLog','Media');

}

// 媒体
类媒体扩展 AppModel {

    公共 $name = '媒体';

    公共 $useTable = "媒体";

    public $hasMeny = "ActivityLogMedia";

}

```

当我尝试这样做时发现：

```
$this->ActivityLog->find('all', array(
    '条件' => 数组('ActivityLog.id' => $ret['ActivityLog']['id']),
    '递归' => 2
));

```

Cake 不返回任何与 ActivityLog 相关的模型。
谁能给我一个解释和/或解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:41:12.957

你有错别字，`$hasMeny`应该是`$hasMany`。

# ios - 如何在iOS中每1秒自动调用一个方法。？

> ID：15739370
> 
> 赞同：-2
> 
> 时间：2013-04-01T07:25:58.970
> 
> 标签：ios

我想在 iOS 中的一个方法中编写一些代码，并且应该每 1 秒调用一次该方法。谁能帮我做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:35:36.347

```
[NSTimer scheduledTimerWithTimeInterval:1.0
    target:self
    selector:@selector(thisIsCalledEvery1Second:)
    userInfo:nil
    repeats:YES]; 
```

阅读[NSTimer的 Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

# knockout.js - 带有敲除的按钮集实现

> ID：15739375
> 
> 赞同：0
> 
> 时间：2013-04-01T07:26:09.800
> 
> 标签：knockout.js

我使用这个 Metro 风格的框架： http: [//metroui.org.ua/](http://metroui.org.ua/)并且有一个按钮设置功能： http: [//metroui.org.ua/buttons-set.php](http://metroui.org.ua/buttons-set.php)

下面是基本实现：

```
<div class="button-set" data-role="button-set">
      <button>button 1</button>
      <button class="active">button 2</button>
      <button>button 3</button>
</div> 
```

**我想知道是否可以将它与淘汰赛一起使用？**Let's say I would like to bind it to an observable property of my viewModel, how can I proceed to have my value updated automatically when selected button change?

我知道我们还有其他解决方案，例如：http: [//jsfiddle.net/cuhuak/Rswbk/](http://jsfiddle.net/cuhuak/Rswbk/)但如果我能成功解决这个问题可能会很好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:38:50.040

使用 ko 自定义绑定...

```
ko.bindingHandlers.buttonSet = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor();
        value($(element).find('button.active').data('value'));
        $(element).find('button').on('click', function () {
            $(element).find('button.active').removeClass('active');
            value($(this).data("value"));
            $(this).addClass('active');
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor();
        $(element).find('button.active').removeClass('active');
        $(element).find('button[data-value=' + value().toString() + ']').addClass('active');
    }
}; 
```

对于 HTML：

```
<div class="button-set" data-role="button-set" data-bind="buttonSet: val">
      <button data-value="1">button 1</button>
      <button data-value="2" class="active">button 2</button>
      <button data-value="3">button 3</button>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T21:48:10.310

这是一种不需要大量 jQuery 解析的替代方法。事实上，根本没有 jQuery——只是纯粹的淘汰赛。

从[淘汰赛文档](http://knockoutjs.com/documentation/click-binding.html)

> 注 1：将“当前项”作为参数传递给处理函数
> 
> 调用您的处理程序时，Knockout 将提供当前模型值作为第一个参数。如果您正在为集合中的每个项目呈现一些 UI，并且您需要知道单击了哪个项目的 UI，这将特别有用。

**HTML**

我们将从 a 加载项目`ko.observableArray()`所以我们可以通过 JS 轻松操作它。为了在视图中显示这一点，我们使用`foreach`.

通过 Knockout HTML 注释，我们可以设置两个条件，显示`li`是否有`active`类。

```
<ul data-bind="foreach: places">
    <li>
        <!-- ko if: $root.activeItem() !== $data -->
          <span data-bind="text: $data, click: $parent.setActive"></span>
        <!-- /ko -->
        <!-- ko ifnot: $root.activeItem() !== $data -->
          <span data-bind="text: $data, click: $parent.setActive, attr: { class: 'active'}"></span>
        <!-- /ko -->
    </li>
</ul> 
```

现在我们只需将 传递`place`给函数`setActive()`。这将自己分配给`ko.observable()` `activeItem`. 在上面的标记中，会询问每个项目是否`activeItem`在循环中。

**JavaScript**

```
function MyViewModel() {
  var self = this;
  self.places = ko.observableArray(['London', 'Paris', 'Tokyo']);
  self.setActive = function(place) { self.activeItem(place) }
  self.activeItem = ko.observable()
}
ko.applyBindings(new MyViewModel()); 
```

**例子**

[http://codepen.io/ajkochanowicz/pen/maylx](http://codepen.io/ajkochanowicz/pen/maylx)

# ios - 在iOS上的特定时间运行功能？

> ID：15739376
> 
> 赞同：0
> 
> 时间：2013-04-01T07:26:10.467
> 
> 标签：ios, notifications, recurring-events

我希望我的 iPhone 应用程序在用户设置并且可以更改的时间运行一个功能。

该函数获取一个 xml 文件，对其进行解析，并在必要时向用户发送通知。

如何安排函数在特定时间/日期运行？我知道在 Android 上有 BroadcastReceiver 和 AlarmManager。iOS上有没有类似的功能？

编辑：即使应用程序关闭，该功能仍需要运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:30:49.067

在指定的时间内读取文件/userdefualts 等。

启动计时器。

如果时间匹配或已过，请点击该方法。

# android - 制作半透明按钮，使按钮颜色可见且背景可见

> ID：15739377
> 
> 赞同：4
> 
> 时间：2013-04-01T07:26:14.567
> 
> 标签：android, button, transparency

我一直在尝试实现这个半透明按钮，但我总是无法做到。我已经提到过很多这样[的](https://stackoverflow.com/questions/2838757/how-to-set-opacity-alpha-for-view-in-android)。但仍然没有运气。我也试过`android:color="#66FF0000"`了，但它并没有使它成为半透明的。下面是我的代码。

```
<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:text="select"
        android:onClick="selectClick"
        android:color="#80000000" 
      /> 
```

我想要这种类型的半透明矩形按钮，这样按钮的蓝色应该可见，活动的绿色也应该可见。有人可以建议我吗？**在下图中，我无法在按钮上绘制绿色以显示我想要的内容。但我想我的上述解释是可以理解的。**

或者，如果无法使蓝色可见，至少我希望它看起来像让用户感觉有一个按钮并且绿色应该是可见的。

![在此处输入图像描述](https://i.stack.imgur.com/3ddB4.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T07:41:04.603

采用

安卓：背景=“#80000000”

代替

安卓：颜色=“#80000000”

# jquery - jquery改变图片

> ID：15739380
> 
> 赞同：1
> 
> 时间：2013-04-01T07:26:31.967
> 
> 标签：jquery, arrays, image

我有这个脚本：

```
<script>
var images = [
    "webit.png",
    "analog.png",
    "projectica.png"
];

currentImage = 0;

function ChangeImage()
{
    currentImage++;

    if (currentImage > images.length - 1)
        currentImage = 0;
    $("#screenBackImage").css("background-image", "url(images/works/" + images[currentImage] + ")");

    $("#screenImage").fadeOut(500, function() {
        $("#screenImage").attr("src", "images/works/" + images[currentImage]);
        $("#screenImage").fadeIn(500);
    });
    setTimeout(function() {
        ChangeImage();
    }, 5000);
}

ChangeImage();
</script> 
```

当图像第一次改变时，它会跳过图像数组中的第二个图像，到“projectica.png”，然后到数组中的第一个图像，然后它就可以正常工作（第一次，第二次，第三次，再一次第一的..），

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:29:21.233

您正在通过`currentImage++;`初始化 currentImage 来增加索引变量来使用数组的第二个索引，`-1`这将解决您的第一次问题，并且您将通过以下方式获得零索引（*第一个元素*）`currentImage++;`

*改变*

```
currentImage = 0; 
```

*至*

```
currentImage = -1; 
```

你的代码是

```
var images = [
    "webit.png",
    "analog.png",
    "projectica.png"
];

currentImage = -1;

function ChangeImage()
{
    currentImage++;

    if (currentImage > images.length - 1)
        currentImage = 0;
    $("#screenBackImage").css("background-image", "url(images/works/" + images[currentImage] + ")");

    $("#screenImage").fadeOut(500, function() {
        $("#screenImage").attr("src", "images/works/" + images[currentImage]);
        $("#screenImage").fadeIn(500);
    });
    setTimeout(function() {
        ChangeImage();
    }, 5000);
}

ChangeImage(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:30:30.087

我认为你应该这样做：

```
if (currentImage > images.length - 1) currentImage = 0;
$("#screenBackImage").css("background-image", "url(images/works/" + images[currentImage] + ")");

$("#screenImage").fadeOut(500, function () {
    $("#screenImage").attr("src", "images/works/" + images[currentImage]);
    $("#screenImage").fadeIn(500);
});

// Increment the currentImage variable here, not in the begining...
currentImage++; 
```

[**在这里演示**](http://jsfiddle.net/mZUpp/1/)

# google-maps - 多个标记地图具有单个标记的放大问题

> ID：15739381
> 
> 赞同：0
> 
> 时间：2013-04-01T07:26:32.397
> 
> 标签：google-maps, google-maps-api-3

下面是显示带有多个标记的谷歌地图的代码。标记数据来自数据库，因此它可以包含 1 个位置或多个位置。
对于多个标记，地图居中并自动缩放。问题是如果只有 1 个标记，地图会放大到最大级别。有人可以指导我如何修复单个标记的缩放。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

var markers = <?php echo $marker;?>;

$(document).ready(function() {
    // Handler for .ready() called.

    initializeMaps();
});

function initializeMaps() {
    var myOptions = {
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: true,
        zoom: 6
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
    var infowindow = new google.maps.InfoWindow(); 
    var marker, i;
    var bounds = new google.maps.LatLngBounds();

    for (i = 0; i < markers.length; i++) { 
        var pos = new google.maps.LatLng(markers[i][1], markers[i][2]);
        map.setCenter(pos);
        if(i==0){
            map.setZoom(5);
        }

        bounds.extend(pos);
        marker = new google.maps.Marker({
            position: pos,
            map: map
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {

                infowindow.setContent(markers[i][0]);
                infowindow.open(map, marker);
                //alert('asdfsdfdsaf');

            }
        })(marker, i));
    }
    map.fitBounds(bounds);
}
</script>

<div id="map_canvas" style="width:100%; height:400px"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:07:12.223

`map.fitBounds(bounds)`仅在有超过 1 个标记时调用

# java - 用“”（空白）替换 html 字符并将样式应用于其中的文本

> ID：15739386
> 
> 赞同：0
> 
> 时间：2013-04-01T07:27:07.163
> 
> 标签：java, android, regex, string, replace

我有一个这样的字符串：

```
String s="12 year old Manick is &lt;b&gt;three&lt;/b&gt; times as old as his brother Rahul. How old will Manick be when he is twice as old as Rahul ?"; 
```

当我将此字符串设置为 TextView 时，输出如下所示：

![输出](https://i.stack.imgur.com/bvM0v.png)

**我想要的是，输出是这样的：**

12 岁的 Manick 是他兄弟 Rahul 的三倍**。**当 Manick 是 Rahul 的两倍时，他会多大？

**应该对原始字符串做什么才能在 TextView 中获得所需的输出？**

实际上，我的要求是提取 HTML 标签内的文本，将粗体格式应用于标签内的文本，并在 TextView 中显示之前从字符串中删除标签。

提前致谢！

PS：字符串来自 XML 文件，因此可能会有所不同！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:30:01.833

您可以尝试在 strings.xml 中为 TextView 定义文本。然后，如果您从 html 设置，则它可能会根据屏幕大小换行：

所以你可以试试这个：

```
<string name="nice_html">
<![CDATA["12 year old Manick is &lt;b&gt;three&lt;/b&gt; times as old as his brother Rahul. How old will Manick be when he is twice as old as Rahul ?";
]]></string> 
```

然后，在您的代码中：

```
TextView foo = (TextView)findViewById(R.id.foo); foo.setText(Html.fromHtml(getString(R.string.nice_html))); 
```

**编辑：**

只需将最后一个代码更改为

```
//string s already defined in the question

TextView foo = (TextView)findViewById(R.id.foo); 
foo.setText(Html.fromHtml(getString(s))); 
```

# c# - ASP 文本框 ID 分配使用一个 for 循环。？

> ID：15739388
> 
> 赞同：0
> 
> 时间：2013-04-01T07:27:09.413
> 
> 标签：c#, asp.net, text, textbox

我是一个菜鸟，我一直在试图弄清楚我们如何`asp:TextBox`在使用 c# 在 ASP.NET 中创建标签时为标签分配一个 ID。

**例子：**

我需要创建一个可能有多个文本框的线程。

当用户单击按钮时，必须生成一个带有`ID`say的文本框`txt01`。在第二次被点击时，`ID`生成的文本框必须是`txt02`等等..取决于点击次数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:39:22.033

在您的 aspx 页面中获取和`placeholder`：例如：`<asp:PlaceHolder runat="server" ID="pholder" />`

在后面的代码中：

```
TextBox txtMyText = new TextBox();
tb1.ID = YourDynamicId;
pholder.Controls.Add(txtMyText); 
```

您可以在 ViewState 中保存当前 id 并获取相同的 id 并将递增的 id 分配给您的动态文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:38:22.913

我想这就是你要找的 -

你会注意到我已经使用了`Page_Init`，因为如果你创建/添加控件`Page_Load`then`FindControl`将返回 null in `PostBack`。而且，您在动态添加的控件中输入的任何数据都不会在回发期间保留。

但是在加载或加载数据`Page_Init`之前调用。因此，您不能使用或任何其他控件来保持控件计数。所以我习惯于保持计数。`ViewState``PostBack``ViewState``Session`

试试看，让我知道你的想法。

## ASPX 页面

```
<form id="form1" runat="server">
    <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
    <asp:Button ID="btnCreate" runat="server" Text="Create" OnClick="btnCreate_Click" />
    <asp:Button ID="btnRead" runat="server" Text="Read" OnClick="btnRead_Click" />
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</form> 
```

## 代码背后

```
protected int NumberOfControls
{
    get { return Convert.ToInt32(Session["noCon"]); }
    set { Session["noCon"] = value.ToString(); }
}

private void Page_Init(object sender, System.EventArgs e)
{
    if (!Page.IsPostBack)
        //Initiate the counter of dynamically added controls
        this.NumberOfControls = 0;
    else
        //Controls must be repeatedly be created on postback
        this.createControls();
}
private void Page_Load(object sender, System.EventArgs e)
{

}

protected void btnCreate_Click(object sender, EventArgs e)
{
    TextBox tbx = new TextBox();
    tbx.ID = "txtData"+NumberOfControls;
    NumberOfControls++;

    PlaceHolder1.Controls.Add(tbx);
}
protected void btnRead_Click(object sender, EventArgs e)
{
    int count = this.NumberOfControls;

    for (int i = 0; i < count; i++)
    {
        TextBox tx = (TextBox)PlaceHolder1.FindControl("txtData" + i.ToString());
        //Add the Controls to the container of your choice
        Label1.Text += tx.Text + ",";
    }
}

private void createControls()
{
    int count = this.NumberOfControls;

    for (int i = 0; i < count; i++)
    {
        TextBox tx = new TextBox();
        tx.ID = "txtData" + i.ToString();
        //Add the Controls to the container of your choice
        PlaceHolder1.Controls.Add(tx);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:58:34.190

将 id 存储在`ViewState`类似这样的东西中 首先初始化一个与此类似的计数变量。在你`class`写这个

```
protected int replyCount     //declare the variable
{
    get { return (int)ViewState["replyCount"]; }
    set { ViewState["replyCount"] = value; }
} 
```

如果不是回发，在您的页面 Load 中写入以初始化replyCount；

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!page.IsPostBack)
   {
     replyCount = 0;           //initialise the variable
   }
} 
```

然后在创建动态文本框时

```
protected void Button_Click(Object sender, EventArgs e)
{
   TextBox tb = new TextBox();
   tb.id = "tb" + replycount;   //use the variable
   replycount++;                 // and after using increment it.
   form.controls.add(tb);        // assuming your form name is "form"
} 
```

这就是你应该做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T07:33:49.183

记住某个变量中的最后一个 ID，例如`int lastID`，然后在创建新 TextBox 时在按钮的 onClick 方法中分配其`ID="txt"+lastID;`.

您必须在页面回发期间保留 lastID，您可以将其存储在`ViewState`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T07:54:58.143

尝试这个：

```
 int i = 1;
        if (ViewState["i"] == null)
        {
            ViewState["i"] = i;
        }
        else
            i = (int)ViewState["i"];
        PlaceHolder1.Controls.Clear();
        for (int j = 1; j <= i; j++)
        {
            TextBox TextBox = new TextBox();
            TextBox.ID = "TextBox" + j.ToString();
            PlaceHolder1.Controls.Add(TextBox);
        }
        ViewState["i"] = i + 1; 
```

将此添加到您的 .aspx 页面上

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder> 
```

希望这有帮助。

# jquery - 使用 jquery 验证器验证具有相同名称的多个文本框仅验证第一个输入

> ID：15739390
> 
> 赞同：8
> 
> 时间：2013-04-01T07:27:12.627
> 
> 标签：jquery, forms, jquery-validate

我正在尝试使用 jquery 验证器验证具有相同名称的两个输入。

```
<script src='
            http://code.jquery.com/jquery-latest.min.js '></script>
            <script src='http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js'></script>
            <script>
            $(document).ready(function(){

            $('#frm').validate();

            $("[name=inp_text]").each(function(){
            $(this).rules("add", {
            required: true,
            checkValue: true
             });   
           });

                $.validator.addMethod("checkValue", function(value, element) {
                var response = ((value > 0)&&(value <= 100))||((value == 'test1')||(value =='test2'));
               return response;
               }, "invalid value");

            })

            </script>

            <form id='frm' method='post'>
            <input type='text' name='inp_text'/><br>
                <input type='text' name='inp_text'/><br>
            <input type='submit' name=''/>
            </frm> 
```

但是当我运行这段代码时，它只验证第一个输入，而第二个输入被忽略

我也尝试过使用`<input type='text' name='inp_text[]'/><br>`但仍然无法正常工作。

我应该改变什么...？

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-01T14:24:39.877

> *“我正在尝试使用 jquery 验证器验证具有相同名称的两个输入......”*

```
<input type='text' name='inp_text'/>
<input type='text' name='inp_text'/> 
```

> *“但是当我运行这段代码时，它只验证第一个输入，而第二个输入被忽略”*

您不能有两个相同的`input`字段，否则此插件将无法正常工作。该属性**必须**是唯一的。 *（唯一的一个例外**是，复选框或单选输入的“分组”将共享相同**的内容，因为相应的提交是单点数据。但是，对于**复选框和单选元素的每个分组，仍然必须是唯一的。）*`type="text"``name``name`***`name``name``name`***

 **> *“我应该改变什么……？* ”

使每个`name`属性独一无二。

```
<input type='text' name='inp_text[1]'/>
<input type='text' name='inp_text[2]'/> 
```

然后使用“开始于”选择器，`^=`...

```
$("[name^=inp_text]").each(function () {
    $(this).rules("add", {
        required: true,
        checkValue: true
    });
}); 
```

**工作演示：http: [//jsfiddle.net/PgLh3/](http://jsfiddle.net/PgLh3/)**

**注意**：您也可以`id`在使用该`rules('add')`方法时定位元素，但是在这种情况下，什么都没有解决，因为插件仍然需要每个元素的*唯一性。* `name``input`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T01:54:20.253

添加如下配置，例如规则或消息

```
multipleInputSharedName: {
        inp_text: true
    } 
```

更改 jquery.validate.js 中的代码方法名称：elements

替换以下

```
if ( this.name in rulesCache || !validator.objectLength( $( this ).rules() ) ) {
                return false;
            } 
```

与以下

```
if ( (!validator.settings.multipleInputSharedName[this.name] && this.name in rulesCache) || !validator.objectLength( $( this ).rules() ) ) {
                return false;
            } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T12:12:56.277

是的，JQuery validate 只会验证第一次出现。您对文本框使用不同的名称。或者您可以使用相同的名称但不同的 ID。并根据身份证申请支票。

> $("#myform").validate({ rules: { #id_of_field: { required: true, checkValue: true } } });

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-13T19:40:42.963

朋友们！

为了验证具有相同名称的文本框/复选框/选择，请使用以下内容，它对我来说工作正常。

这里的“ctryId”是选择框的名称。

```
function validateCountry(){
    inp = document.getElementsByTagName("select");
    for ( var i = 0; i < inp.length; ++i )    {
        if (inp[i].name =="ctryId" && inp[i].value==''){
            alert('plesae select a country!');
                return false;
            }
        }
    return true;
 } 
```

这里 'minVal' 是文本框的名称

```
function validateMinimumVal(){
    inp = document.getElementsByTagName("TEXT");
    for ( var i = 0; i < inp.length; ++i )    {
        if (inp[i].name =="minVal" && inp[i].value==''){
            alert('plesae Add a MINIMUM VALUE!!');
                return false;
            }
        }
    return true;
 } 
```

希望这可以帮助！！贾根**

# sql - 使用 SQL 查询获取在多个部门工作的员工

> ID：15739396
> 
> 赞同：1
> 
> 时间：2013-04-01T07:27:33.543
> 
> 标签：sql, oracle, count, jointable

我试图找出一个查询，该查询显示在两个以上部门工作的员工的姓名以及他们的工资和联系方式。我有两张表员工和部门。这两个都有 EmployeeName 字段。我知道我们必须使用 Count 函数，但不知道如何创建查询。

这里的表名和字段：

*   `Employee`（员工姓名、工资、联系电话）
*   `Department`(employeeName, departmentNo, hours, startDate)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T07:31:02.180

您的 SQL 查询将如下所示

```
 SELECT e.employeeName, count(departmentNo) FROM Employee e 
  INNER JOIN Department d ON e.employeeName=d.employeeName 
  GROUP BY e.employeeName 
  HAVING COUNT(departmentNo)>2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-18T10:52:32.953

您可以使用以下查询：

```
SELECT e.employeeName, count(d.departmentname) 
FROM Employee e, Department d  
where e.deptid=d.deptid 
GROUP BY e.employeeName 
HAVING COUNT(e.deptid)>=2 
```

# php - 如何在php中创建带有日期的文件夹

> ID：15739401
> 
> 赞同：-4
> 
> 时间：2013-04-01T07:27:50.090
> 
> 标签：php

我有一个任务是将一些文件拖放到占位符上并将它们上传到服务器，然后创建一个下载链接。所以我使用 PHP、JavaScript 和 HTML5。但我想在日期明智的文件夹中管理这些上传的文件。

谁能帮我用 dat 管理这些文件？文件夹将根据系统日期创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:34:46.747

这是您要制作文件夹的内容吗？

```
$d = date('h-i-s'); 
mkdir("/path/whatever/" . $d , 0700); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:32:43.153

尝试一下！

```
$desired_dir= "system_date";<br>
$file_name = 'uploads/'.time().rand(0,999);<br>
if(is_dir($desired_dir)==false)
{
 mkdir("$desired_dir", 0700);
} 
```

# android - Android：如何在不使用 PHP 或任何网络服务的情况下将数据发送到远程数据库？

> ID：15739407
> 
> 赞同：3
> 
> 时间：2013-04-01T07:28:22.730
> 
> 标签：android, mysql, jdbc

我正在尝试将数据从 android 应用程序发送到 localhost MySQL 数据库。我已经在 J​​AVA 中创建了应用程序，它工作正常。但是相同的代码在android中不起作用。什么问题。下面是安卓的代码。

```
public class MainActivity extends Activity{

private Connection conn = null;  
private String url = "jdbc:mysql://localhost:3306/";
private String dbName = "testDB";
private String driver = "com.mysql.jdbc.Driver";  
private String userName = "root"; 
private String password = "";   
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 
try {
        Class.forName(driver).newInstance();
        conn = DriverManager.getConnection(url+dbName,userName,password);
        System.out.println("Connected to the database");
        Statement stmt = conn.createStatement();
        String sql = "INSERT INTO test " +
                "VALUES ('XYZ')";
        stmt.executeUpdate(sql); 

        conn.close();
        System.out.println("Disconnected from database");
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

我收到错误消息：

```
04-01 12:52:31.114: W/System.err(910): java.sql.SQLException: Unable to connect to any hosts due to exception: java.net.SocketException: java.net.ConnectException: localhost/127.0.0.1:3306 - Connection refused
04-01 12:52:31.114: W/System.err(910): ** BEGIN NESTED EXCEPTION ** 
04-01 12:52:31.114: W/System.err(910): java.net.SocketException
04-01 12:52:31.114: W/System.err(910): MESSAGE: java.net.ConnectException: localhost/127.0.0.1:3306 - Connection refused
04-01 12:52:31.114: W/System.err(910): STACKTRACE:
04-01 12:52:31.124: W/System.err(910): java.net.SocketException: java.net.ConnectException: localhost/127.0.0.1:3306 - Connection refused
04-01 12:52:31.124: W/System.err(910):  at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:143)
04-01 12:52:31.124: W/System.err(910):  at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:225)
04-01 12:52:31.124: W/System.err(910):  at com.mysql.jdbc.Connection.createNewIO(Connection.java:1805)
04-01 12:52:31.124: W/System.err(910):  at com.mysql.jdbc.Connection.<init>(Connection.java:452)
04-01 12:52:31.124: W/System.err(910):  at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:411)
04-01 12:52:31.124: W/System.err(910):  at java.sql.DriverManager.getConnection(DriverManager.java:191)
04-01 12:52:31.124: W/System.err(910):  at java.sql.DriverManager.getConnection(DriverManager.java:226)
04-01 12:52:31.124: W/System.err(910):  at com.example.getip.MainActivity.onCreate(MainActivity.java:138)
04-01 12:52:31.124: W/System.err(910):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 12:52:31.124: W/System.err(910):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-01 12:52:31.124: W/System.err(910):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-01 12:52:31.124: W/System.err(910):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-01 12:52:31.124: W/System.err(910):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-01 12:52:31.124: W/System.err(910):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 12:52:31.124: W/System.err(910):  at android.os.Looper.loop(Looper.java:123)
04-01 12:52:31.124: W/System.err(910):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-01 12:52:31.124: W/System.err(910):  at java.lang.reflect.Method.invokeNative(Native Method)
04-01 12:52:31.124: W/System.err(910):  at java.lang.reflect.Method.invoke(Method.java:521)
04-01 12:52:31.134: W/System.err(910):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-01 12:52:31.134: W/System.err(910):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-01 12:52:31.134: W/System.err(910):  at dalvik.system.NativeStart.main(Native Method)
04-01 12:52:31.134: W/System.err(910): ** END NESTED EXCEPTION **
04-01 12:52:31.144: W/System.err(910):  at com.mysql.jdbc.Connection.createNewIO(Connection.java:1875)
04-01 12:52:31.144: W/System.err(910):  at com.mysql.jdbc.Connection.<init>(Connection.java:452)
04-01 12:52:31.144: W/System.err(910):  at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:411)
04-01 12:52:31.156: W/System.err(910):  at java.sql.DriverManager.getConnection(DriverManager.java:191)
04-01 12:52:31.156: W/System.err(910):  at java.sql.DriverManager.getConnection(DriverManager.java:226)
04-01 12:52:31.156: W/System.err(910):  at com.example.getip.MainActivity.onCreate(MainActivity.java:138)
04-01 12:52:31.156: W/System.err(910):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 12:52:31.156: W/System.err(910):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-01 12:52:31.156: W/System.err(910):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-01 12:52:31.156: W/System.err(910):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-01 12:52:31.156: W/System.err(910):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-01 12:52:31.156: W/System.err(910):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 12:52:31.156: W/System.err(910):  at android.os.Looper.loop(Looper.java:123)
04-01 12:52:31.156: W/System.err(910):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-01 12:52:31.156: W/System.err(910):  at java.lang.reflect.Method.invokeNative(Native Method)
04-01 12:52:31.164: W/System.err(910):  at java.lang.reflect.Method.invoke(Method.java:521)
04-01 12:52:31.164: W/System.err(910):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-01 12:52:31.164: W/System.err(910):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-01 12:52:31.164: W/System.err(910):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:36:08.560

我通过用 10.0.2.2 替换 localhost 解决了

# android-ndk - 如何摆脱 NDK 编译器警告：“APP_PLATFORM is large..”和“Invalid package”

> ID：15739409
> 
> 赞同：11
> 
> 时间：2013-04-01T07:28:50.077
> 
> 标签：android-ndk

我有以下 Application.mk

```
APP_PLATFORM := android-9
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions -O2 -mfpu=neon -mfloat-abi=softfp
APP_ABI := armeabi-v7a
LOCAL_ARM_NEON := true 
```

并且在运行 ndk-build 时，我总是会收到警告：

```
Invalid attribute name: 
    package
/Users/tmanthey/Documents/android/android-ndk-r8d/build/core/add-application.mk:128: Android NDK: WARNING: APP_PLATFORM android-14 is larger than android:minSdkVersion  in ./AndroidManifest.xml    
Invalid attribute name: 
    package 
```

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.evotegra.aCoDriver"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="9" android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.VIBRATE"/>

    <application
        android:name=".ACoDriverApp"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:allowBackup="true">
        <activity
            android:name=".ACoDriverActivity"
            android:label="@string/app_name" android:launchMode="singleTask">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="PreferencesActivity" />
        <activity android:name="GaugeSelectActivity" />
    </application>

</manifest> 
```

我怎样才能摆脱这些警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:21:07.027

关于“包”，这很可能是您的 XML 文件的一些**crlf**问题。检查那里的行尾字符。`project.properties`或者，您的文件可能有问题。

APP_PLATFORM 警告实际上是正确的：您的 APP_PLATFORM (android-14) 大于您在 AndroidManifest.xml 中设置的 android:minSdkVersion。这只是提醒您注意这种（合法）情况的警告，因此在某些阶段您决定放弃对非常过时的设备的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-15T07:50:05.513

对于 NDK rev r9（也适用于其他人，但行号可能不同）

${NDK}/build/core/add-application.mk 第 138 行

在行首添加“#”。

# $(call __ndk_info,WARNING: APP_PLATFORM $(APP_PLATFORM) is greater than android:minSdkVersion $(APP_MIN_PLATFORM_LEVEL) in $(APP_MANIFEST))

一个字符，30 秒修复……去调试原生代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T13:59:47.883

您可以通过在 Eclipse 中执行以下步骤来解决此问题：

*   窗口 -> 首选项 -> C/C++ -> 构建 -> 设置
*   选择 CDT GNU C/C++ 错误解析器
*   在底部的错误解析器选项中，添加一个包含以下内容的新条目：

严重性：警告

模式： (. *?):(\d+): Android NDK: WARNING:(.* )

文件：1美元

线路：2美元

描述：3美元

这应该将其转换为警告，您也可以选择忽略它 - 取决于它将显示在“问题”视图中的严重程度。

# .net - 如何为 ServiceStack AllowFileExtensions 条目指定 mime 类型？

> ID：15739411
> 
> 赞同：1
> 
> 时间：2013-04-01T07:29:07.017
> 
> 标签：.net, iis, servicestack

为了提供静态内容，比如 svg 文件，我添加了这样的扩展：

```
endpointHostConfig.AllowFileExtensions.Add("svg"); 
```

但是 ServiceStack 忽略了 IIS mime 类型并使用了自己错误的 mime 类型“application/svg”。如何为 svg 扩展指定正确的 mime 类型，例如“image/svg+xml”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:46:29.613

您可以通过将其添加到以下位置来添加您自己的自定义 mime 类型：

```
MimeTypes.ExtensionMimeTypes["svg"] = "image/svg+xml"; 
```

我还[刚刚将 SVG mime 类型添加到 AllowedFileExtensions 的默认列表中，](https://github.com/ServiceStack/ServiceStack/commit/9cd3c117623d2b3afff5cf639a68dbb341022a6c)因此在 ServiceStack v3.9.44+ 的下一个版本中默认允许这样做。

# html - html - 在容器中水平分布五个图像？

> ID：15739412
> 
> 赞同：0
> 
> 时间：2013-04-01T07:29:17.203
> 
> 标签：html, css

我有 div 容器和里面的五个图像。我需要将它们分布在容器内（它具有动态宽度），以便图像之间的间距相同，左图左对齐，右图右对齐。

**UPD：** 图像必须具有固定宽度（例如 100 像素），但容器 div 大于 500 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:33:40.273

将所有图像保留在's 中，`div`然后将`width: 20%;`、和/赋予这些元素。这应该可以解决问题。`min-width:100px;``text-align: center``float:left``display: inline-block``div`

```
div container
   --> div (5)
     --> images (5) 
```

对于您的第一个子元素，使用`:first-child`伪类，对于最后一个子元素，使用`:last-child`伪类，然后分别给出`text-align :left`和`text-aling: right`。

**HTML**

```
<div>
    <div><img src="https://www.google.com.au/images/srpr/logo4w.png" /></div>
    <div><img src="https://www.google.com.au/images/srpr/logo4w.png" /></div>
    <div><img src="https://www.google.com.au/images/srpr/logo4w.png" /></div>
    <div><img src="https://www.google.com.au/images/srpr/logo4w.png" /></div>
    <div><img src="https://www.google.com.au/images/srpr/logo4w.png" /></div>
</div> 
```

**CSS**

```
div>div {
    width:20%;
    float:left; /* display: inline-block; */
    min-width:100px; /* equal to the width of the image */
    text-align:center;
}

img{width:100px;}

div:first-child{text-align:left;}
div:last-child{text-align:right;} 
```

**[工作小提琴](http://jsfiddle.net/FfAsk/1/)**

**[更新小提琴](http://jsfiddle.net/FfAsk/9/)**（*使用 javascript*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:32:36.060

只需使用`width:20%;`和`float;left;`。

[jsFiddle](http://jsfiddle.net/Tyriar/FfAsk/)

```
img {
    width:20%;
    float:left;

    box-sizing:border-box;
    border:1px solid #000;
} 
```

您现在可以添加`box-sizing:border-box`，您的`padding`和`border`尺寸将包含在您的中`width`，因此它们不会溢出到下一行。

# ruby-on-rails - Rails 在模型/控制器中未定义的视图中使用变量

> ID：15739415
> 
> 赞同：0
> 
> 时间：2013-04-01T07:29:26.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要在我的视图中使用一个变量来从文本框中获取一个值，尽管这不是直接存储的。

例如：

```
<%= text_field_tag :tempVar, NIL %> 
```

temp var 将在控制器中用于生成模型的实际值。像这样说：

```
@controller_name.final_value = concatenate (params[:tempVar] + xyz) 
```

已编辑：发布时参数是否错误。

这是可行的吗？

此外，问题的第二部分是，如果我想为已经存在的控制器创建一个新视图（带有一些视图）。我怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:41:23.427

:tempVar 变量可以通过 params[] 在控制器中使用。尝试这个：

```
@controller_name.final_value = concatenate (params[:tempVar] + xyz) 
```

# vim - 在vim中如何忽略换行符向前搜索？

> ID：15739421
> 
> 赞同：0
> 
> 时间：2013-04-01T07:29:39.930
> 
> 标签：vim

在 vim`f >`中将我带到同一行的下一次出现，但如果出现在另一行上`>`则不起作用。`>`如何让前向搜索忽略换行符？

我在附近的帮助文本中找不到答案`:h f`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:42:00.147

`fFtT`是“左右运动”，因此仅适用于当前行。这是设计使然，没有任何选择可以改变这种行为。

您要么使用`?/`(awesome with `set incsearch`) 这是“向后搜索”和“向前搜索”的实际快捷方式，要么使用[ft_improved](https://github.com/chrisbra/improvedft)、[Fanf、ingTastic 之类的插件；](https://github.com/dahu/vim-fanfingtastic), [PreciseJump](http://www.vim.org/scripts/script.php?script_id=3437)或[EasyMotion](https://github.com/Lokaltog/vim-easymotion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:41:33.667

[easymotion.vim](https://github.com/Lokaltog/vim-easymotion)插件是你需要的。

# capybara - 使用 Capybara 和 Poltergeist 驱动程序将文件下载到特定文件夹

> ID：15739423
> 
> 赞同：20
> 
> 时间：2013-04-01T07:29:48.003
> 
> 标签：capybara, poltergeist

我正在使用 Capybara 和 Poltergeist 驱动程序编写验收测试。我需要验证下载的 CSV 文件的内容。

1.  我尝试了各种方法来呈现页面本身的内容，而不是下载它。
2.  还尝试更改 mime 类型，但它不起作用。

最后，我想选择将文件下载到特定文件夹中，然后使用核心 ruby​​ 库读取 CSV 文件。

为了实现这一点，当 poltergeist 驱动程序单击下载链接时，我希望它处理弹出窗口并直接在给定文件夹中下载文件。

在 Selenium 的 chrome 和 firefox 驱动程序中，我可以选择配置配置文件来处理弹出窗口和配置下载目录。

使用 poltergeist 有没有这样的选择？任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T14:28:57.477

Poltergeist 不可能，您只需检查标题即可。

```
 step 'I should get zipped file' do
    page.response_headers['Content-Disposition'].should include("filename=\"file.zip\"")
 end 
```

但是 Chrome 驱动程序以及最新版本的 Firefox 和 Selenium Webdriver 也可以。不幸的是，它通过 Selenium 运行 - 即不是无头的......请参阅这篇文章：[http ://collectiveidea.com/blog/archives/2012/01/27/testing-file-downloads-with-capybara-and-chromedriver/](http://collectiveidea.com/blog/archives/2012/01/27/testing-file-downloads-with-capybara-and-chromedriver/)

我的方法 - 在使用 Spinach 和 Rubyzip 时略有不同：

将以下内容添加到您的**Gemfile**

```
group :test do
  gem 'chromedriver-helper'  # for Chrome <= 28
  gem 'chromedriver2-helper' # for Chrome >= 29
  gem 'selenium-webdriver'
end 
```

**features/support/capybara.rb** - 我将 Poltergeist 用于带有`@javascript`标签的场景，将 Chrome 用于带有`@download`标签的场景。

```
require 'spinach/capybara'
require 'capybara/poltergeist'
require 'selenium/webdriver'

# ChromeDriver 1.x, for Chrome <= 28 
Capybara.register_driver :chrome do |app|
  profile = Selenium::WebDriver::Chrome::Profile.new
  profile['download.default_directory'] = DownloadHelper::PATH.to_s
  args = ["--window-size=1024,768"]
  Capybara::Selenium::Driver.new(app, browser: :chrome, profile: profile, args: args)
end

# ChromeDriver 2.x, for Chrome >= 29 
Capybara.register_driver :chrome do |app|
  prefs = {
    download: {
      prompt_for_download: false,
      default_directory: DownloadHelper::PATH.to_s
    }
  }
  args = ['--window-size=1024,768']
  Capybara::Selenium::Driver.new(app, browser: :chrome, prefs: prefs, args: args)
end

# Tested with Firefox 27 and Selenium Webdriver 2.39
Capybara.register_driver :firefox do |app|
  profile = Selenium::WebDriver::Firefox::Profile.new
  profile['browser.download.dir'] = DownloadHelper::PATH.to_s
  profile['browser.download.folderList'] = 2 # 2 - save to user defined location
  profile['browser.helperApps.neverAsk.saveToDisk'] = 'application/zip'
  Capybara::Selenium::Driver.new(app, browser: :firefox, profile: profile)
end

Capybara.javascript_driver = :poltergeist # :webkit :selenium :poltergeist :chrome

Spinach.hooks.on_tag("javascript") do
  Capybara.current_driver = Capybara.javascript_driver
  Capybara.default_wait_time = 5
end

Spinach.hooks.on_tag("download") do
  Capybara.current_driver = :chrome # or :firefox
  Capybara.default_wait_time = 50
end 
```

**功能/支持/downloads.rb**

```
module DownloadHelper
  TIMEOUT = 10
  PATH    = Rails.root.join("tmp/downloads")

  extend self

  def downloads
    Dir[PATH.join("*")]
  end

  def download_path
    wait_for_download
    downloads.first
  end

  def download_content
    wait_for_download
    File.read(download_path)
  end

  def wait_for_download
    Timeout.timeout(TIMEOUT) do
      sleep 0.1 until downloaded?
    end
  end

  def downloaded?
    downloads.any? && !downloading?
  end

  def downloading?
    downloads.grep(/\.crdownload$/).any?
  end

  def clear_downloads
    FileUtils.rm_f(downloads)
  end

end

Spinach.hooks.before_scenario do |scenario|
  DownloadHelper.clear_downloads
end

Spinach.hooks.after_scenario do
  DownloadHelper.clear_downloads
end 
```

**功能/file_download.feature**

```
Feature: File download
   As a user
   I want to be able to download my files

Background:
  Given I am logged in as a user
  And I have uploaded files in the system

@download
Scenario: Successfull download
  When I click on the download button
  Then I should get zipped files 
```

**features/steps/file_download.rb** - 请注意，您不能使用`page.response_headers`它，因为 Selenium/ChromeDriver 不支持它。但是您可以使用`File.basename()`.

```
class Spinach::Features::FileDownload < Spinach::FeatureSteps
  include SharedAuthentication

  step 'I click on the download button' do
    click_link "Download"
  end

  step 'I should get zipped files' do
    File.basename(DownloadHelper.download_path).should == 'file.zip'
    Zip::ZipFile.open(DownloadHelper.download_path) do |zipfile|
      zipfile.find_entry('myfile.txt').should_not be_nil
      zipfile.find_entry('myphoto.jpg').should_not be_nil
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-14T14:48:02.857

我不得不在我的 Rails 应用程序中做类似的事情。我的解决方案是使用 Javascript 向 URL 发出 XMLHttpRequest，下载文件，将文件内容返回给 Capybara，然后使用 ruby​​ 将文件保存在磁盘上的某个位置。然后在另一个步骤中，我检查下载的 CSV 文件的内容。

这是下载文件的步骤定义：

```
Then /^I download the csv file$/ do
  page.execute_script("window.downloadCSVXHR = function(){ var url = window.location.protocol + '//' + window.location.host + '/file.csv'; return getFile(url); }")
  page.execute_script("window.getFile = function(url) { var xhr = new XMLHttpRequest();  xhr.open('GET', url, false);  xhr.send(null); return xhr.responseText; }")

  data = page.evaluate_script("downloadCSVXHR()")
  File.open(File.join(Rails.root, "tmp", "csv.data"), "w") { |f| f.write(data) }
end 
```

**将 Javascript 代码中的 URL 更改为 CSV 的位置。**

最后，这是我验证 CSV 文件内容的步骤定义：

```
And /^the contents of the downloaded csv should be:$/ do |contents|
  file = File.open(File.join(Rails.root, "tmp", "csv.data"), "r")
  file_contents = file.read
  file_contents.chop!
  file_contents.should == contents
end 
```

祝你好运。希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T12:31:35.757

Poltergeist 目前无法做到这一点。

我认为你最好为这个不使用 Capybara 的 CSV 编写一个测试。（例如，通过使用内置的 Rails 集成测试东西并将响应解析为 CSV。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-18T23:05:00.573

有一张支持在 PhantomJS/Poltergeist 中下载文件的票，并且有一个或两个分支声称它们以某种方式使其工作。见[https://github.com/ariya/phantomjs/issues/10052](https://github.com/ariya/phantomjs/issues/10052)

# java - a4j:commandlink 中未触发操作

> ID：15739427
> 
> 赞同：0
> 
> 时间：2013-04-01T07:29:55.807
> 
> 标签：java, ajax, jsf, richfaces

我是新手，但我的动作没有被触发。在 a4j:commandLink id="linklogout" 我添加了一个不起作用的新操作 menubean.resetMenuActionVariables。我可以在同一个文件中使用 menubean 并且它可以工作。但是这个动作没有被触发。我在论坛上搜索并尝试在命令链接周围添加 a4j:region 或 a4j:form 但仍然不起作用。有任何想法吗？代码如下：

```
<div id="adminView_div" class="header">
    <a4j:outputPanel id="headerInfo">
        <h:form id="header_info">
            <h:panelGrid id="header_out1" columnClasses="left, right"  columns="2" width="98%" >    
                <h:panelGrid id="header_pnl1" columns="1" width="98%" >             
                    <h:graphicImage id="imglogo" value="../images/50.jpg" style="vertical-align: middle"/>      
                </h:panelGrid>

                <h:panelGrid id="user_info_pnl1" columns="1" >  
                    <h:panelGrid id="img_pnlGrid" cellpadding="0" cellspacing="0">
                        <h:graphicImage id="notimg_img" value="../images/#{msgs.notimg}" 
                            rendered="#{!sbean.forUse}" />
                    </h:panelGrid>  
                    <h:panelGrid id="user_info_pnl2" columns="1" >  
                        <h:panelGroup id="about_userInfoPnlGroup">
                            <h:outputText id="is_daysLeft" styleClass="warning-msg" value="#{instadminbean.daysLeft}"/>
                            <rich:spacer width="100"/>
                            <h:outputText id="welcomeMessage_lbl" value="#{msgs.welcomeMessage}!" style="font-size=13px; solid black; font-family:tahoma; margin-right:4px; text-align:right;"/>
                            <rich:spacer width="10"/>
                            <h:outputText id="is_aboutuserName"  value="#{userAccount.userName}" styleClass="label-name" />
                            <rich:spacer width="100"/>
                            <a4j:commandLink id="linklogout" value="#{msgs.logout}" 
                            action="#{menubean.resetMenuActionVariables}" 
                            onclick="javascript:window.location = '../reports/logout.html'; return false;" 
                            rendered="true" style="margin-right:4px;color: #4F2170;"/>
                            <rich:spacer width="10"/>
                            <h:commandLink id="linkhelp" value="#{msgs.help}" rendered="true" onclick="window.open('pdf/#{msgs.homeguidename}#nameddest=About')" type="button" style="margin-right:4px;color: #4F2170;"/>
                        </h:panelGroup>
                    </h:panelGrid>      
                </h:panelGrid>          
            </h:panelGrid>
        </h:form> 
    </a4j:outputPanel>
</div> 
```

谢谢，

多里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:02:49.650

您的链接包含以下内容：

```
onclick="javascript:window.location = '../reports/logout.html'; return false;" 
```

这`return false`将阻止链接对服务器进行任何回发。您必须删除此代码，它应该可以工作。

# linux - PCIe 内存的 get_user_pages 失败

> ID：15739428
> 
> 赞同：0
> 
> 时间：2013-04-01T07:29:57.910
> 
> 标签：linux, linux-kernel, linux-device-driver

我已经在用户空间中映射了 pci 内存，例如

```
fs = open("/dev/mem",O_RDWR | O_SYNC);

mmap_src = mmap(NULL, BUFF_COUNT, PROT_READ | PROT_WRITE, MAP_SHARED, fs, 0xe0000000); 
```

`0xe0000000`是 pci 内存设备的地址。

mmaped 成功后，我使用 ioctl 函数将该地址传递给驱动程序。

在驱动程序代码中，

我`get_user_pages`从从 ioctl 获得的那个地址打电话。

在执行中，`get_user_pages`调用失败。

关于如何解决这个问题的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T16:07:17.413

get_user_pages 返回有效物理内存而不是 IO 内存的 struct page 指针，因此预计 get_user_pages 对于 PCI 内存将失败。除非您提供有关您的设计的更多详细信息，否则很难建议如何修复它。

# asp.net - 重定向到公共页面时未终止会话时的安全问题

> ID：15739431
> 
> 赞同：-1
> 
> 时间：2013-04-01T07:30:10.507
> 
> 标签：asp.net, security, session

我正在开发一个金融应用程序，例如网上银行。我想知道当用户浏览应用程序不包含的页面（例如 google.com）时可能会出现什么问题。

我的客户希望我不要终止会话，以便用户可以像 facebook 一样返回应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:07:25.260

如果您使用浏览器导航功能，我知道的网上银行系统甚至会终止会话。我认为这不是必需的，实际上我认为这是矫枉过正。当用户离开您的页面时终止会话（不要忘记它并不安全，因为您需要 JavaScript）可能没问题。但关键是：只有在用户不注销并离开 PC 时，才会有风险，因此其他人可以继续他的会话。如果离开页面后放弃会话会让事情变得更安全......很难说。我认为很多人离开网上银行系统时都不会想到很快就会回来。所以，我建议：注销用户（再一次：由于 JavaScript，你不能保证）。

更新：有个主意。您可以使用一些服务器端令牌，让您知道用户是否浏览了页面导航或使用了浏览器导航或地址栏。有了这个，你就不需要 JS 并且我认为它是安全的，但我不确定。在这种情况下，我会向谷歌询问最佳做法。

# javascript - For循环仅给出计数的最后一个值作为输出

> ID：15739432
> 
> 赞同：0
> 
> 时间：2013-04-01T07:30:13.220
> 
> 标签：javascript

我有以下脚本： -

```
<script type="text/javascript">
var fruits = array('banana','apple','orange');
for (var i = 0;i < fruits.length; i++) {
  document.getElementById("td1").innerHTML = fruits;
}
</script> 
<table id="table">
   <tr id="tr1">
      <td id="td1"></td>
   </tr>
   <tr id="tr2">
      <td id="td2"></td>
   </tr>
</table> 
```

执行上述操作后，我只得到输出橙色。我想使用上面的循环得到输出 'banana','apple','orange'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:35:03.110

```
<script type="text/javascript">
    var fruits = ['banana','apple','orange'];
    document.getElementById("td1").innerHTML = fruits.join();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:50:32.583

对不起老板它不是数组->数组，试试这个并发布输出

```
 var fru='';
        var fruits = Array('banana','apple','orange');
        for (var i = 0;i < fruits.length; i++) {
          fru+=" "+fruits[i]+",";}
        document.getElementById('td1').innerHTML=fru; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:02:08.410

这是错误：

```
document.getElementById("td1").innerHTML = fruits;
                                         ^
                                         |
                                         |
                             you're overwriting previous text here 
```

你可能的意思是`+=`相反。

# php - 如何检测浏览器/选项卡已关闭

> ID：15739434
> 
> 赞同：1
> 
> 时间：2013-04-01T07:30:20.443
> 
> 标签：php, javascript, jquery, codeigniter

我想在浏览器关闭或浏览器选项卡关闭时发出警告框。我有一些代码，但在这 1 条额外消息中即将到来.. 我想知道它从哪里出现在警报框中。如果您有任何其他代码然后发送给我或告诉我应该怎么做..实际上我想避免第二个用户登录（为此我创建1个会话ID并在每次用户登录时保存在数据库中，它检查会话ID是如果然后用户可以登录，是否在 DB 中，当用户注销会话 id 也被删除但浏览器或选项卡关闭时，会话 id 不会被删除。为此，我想检测那个，然后我想将控件发送到 ajax控制器）这就是为什么我想知道 1 条额外消息来自何处。请解决我的问题..

```
<script type="text/javascript" >
var validNavigation = false;

function wireUpEvents() {

  var dont_confirm_leave = 0; //set dont_confirm_leave to 1 when you want the user to be able to leave withou confirmation
  var leave_message = 'You sure you want to leave?'
  function goodbye(e) {
    if (!validNavigation) {
      if (dont_confirm_leave!==1) {
        if(!e) e = window.event;
        //e.cancelBubble is supported by IE - this will kill the bubbling process.
        e.cancelBubble = true;
        e.returnValue = leave_message;
        //e.stopPropagation works in Firefox.
        if (e.stopPropagation) {
          e.stopPropagation();
          e.preventDefault();
        }
        //return works for Chrome and Safari
        return leave_message;
      }
    }
  }
  window.onbeforeunload=goodbye;

  // Attach the event keypress to exclude the F5 refresh
  $('document').bind('keypress', function(e) {
    if (e.keyCode == 116){
      validNavigation = true;
    }
  });

  // Attach the event click for all links in the page
  $("a").bind("click", function() {

    validNavigation = true;
  });

  // Attach the event submit for all forms in the page
  $("form").bind("submit", function() {
    validNavigation = true;
  });

  // Attach the event click for all inputs in the page
  $("input[type=submit]").bind("click", function() {
    validNavigation = true;
  });

}

// Wire up the events as soon as the DOM tree is ready
$(document).ready(function() {
  wireUpEvents();
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:38:45.673

您不能通过使用 javascript 代码来限制用户，如果用户在浏览器设置中禁用了 javascript 怎么办。

我认为你应该使用 PHP 和数据库（mysql）来处理它

当用户注册/登录时，在数据库的 login_session 表中插入一个带有时间和日期的新条目，在登录之前检查条目是否存在，如果存在，则在他上次登录时过去了多长时间，如果上次登录时间超过 5 分钟或无论您认为适合自己的时间，更新条目并创建新会话。

在这里查看这个类似的帖子 [PHP /SESSION: Login one per user?](https://stackoverflow.com/questions/3643591/php-session-login-one-per-user)

# java - 时间戳错误 bouncycastle

> ID：15739437
> 
> 赞同：0
> 
> 时间：2013-04-01T07:30:34.933
> 
> 标签：java, timestamp

我试图从 tsa 服务器获取时间戳，但出现此错误。我不知道问题出在哪里。

```
java.lang.IllegalArgumentException: unknown object in 'TimeStampResp' factory : org.bouncycastle.asn1.DERUnknownTag 
```

在这份声明中

```
TimeStampResp resp = TimeStampResp.getInstance(new ASN1InputStream(in).readObject()); 
```

这是我的代码：

```
 String TSA_URL    = "http://tsa.starfieldtech.com/";
    //String TSA_URL = "http://ca.signfiles.com/TSAServer.aspx";
    //String TSA_URL = "http://timestamping.edelweb.fr/service/tsp";
    try {
        //byte[] digest = calcularMessageDigest(leerByteFichero("C:\\deskSign.txt"));
        byte[] digest = leerByteFichero("C:\\deskSign.txt");

        TimeStampRequestGenerator reqgen = new TimeStampRequestGenerator();
        TimeStampRequest req = reqgen.generate(TSPAlgorithms.SHA1, digest);
        byte request[] = req.getEncoded();

        URL url = new URL(TSA_URL);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();

        con.setDoOutput(true);
        con.setDoInput(true);
        con.setRequestMethod("POST");
        con.setRequestProperty("Content-type:", "application/timestamp-query");
        con.setRequestProperty("Content-length:", String.valueOf(request.length));

        if (con.getResponseCode() != HttpURLConnection.HTTP_OK) {
            throw new IOException("Received HTTP error: " + con.getResponseCode() + " - " + con.getResponseMessage());
        }
        InputStream in = con.getInputStream();
        TimeStampResp resp = TimeStampResp.getInstance(new ASN1InputStream(in).readObject());
        TimeStampResponse response = new TimeStampResponse(resp);
        response.validate(req);
        System.out.println(response.getTimeStampToken().getTimeStampInfo().getGenTime()); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T13:58:18.497

你犯了两个错误：

1.  Content-type 和 Content-length 后面没有冒号
2.  你忘了实际发送请求

这是您的代码的改编版：

```
TimeStampRequest request;
HttpURLConnection con = (HttpURLConnection)url.openConnection();
con.setDoOutput(true);
con.setDoInput(true);
con.setRequestMethod("POST");
con.setRequestProperty("Content-Type", "application/timestamp-query");
con.setRequestProperty("Content-length", String.valueOf(request.getEncoded().length));
Authenticator.setDefault(new Authenticator() { 
con.getOutputStream().write(request.getEncoded());

if (con.getResponseCode() != HttpURLConnection.HTTP_OK) {
throw new IOException("Received HTTP error: " + con.getResponseCode() + " - " + con.getResponseMessage());
}
InputStream in = con.getInputStream();

TimeStampResp resp = TimeStampResp.getInstance(new ASN1InputStream(in).readObject());
TimeStampResponse response = new TimeStampResponse(resp); 
```

# dynamics-crm-2011 - 如何在 CRM 2011 的活动表单中添加文件附件

> ID：15739440
> 
> 赞同：0
> 
> 时间：2013-04-01T07:30:41.373
> 
> 标签：dynamics-crm-2011, dynamics-crm

我的 CRM 是在 Outlook 中配置的，我需要在活动表单中添加文件附件，我尝试了自定义->表单...但我在字段资源管理器中找不到文件附件。

![在此处输入图像描述](https://i.stack.imgur.com/kB0Ga.jpg)

那么如何添加这个，如图所示......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:09:31.377

在 CRM Dynamics 2011 中，无法控制文件资源管理器。您必须通过指向 aspx 页面的 Webresource（HTML5 或 Silverlight）或 Iframe 添加类似的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:24:22.567

在 Silverlight 中敲出一些东西并不难。注释实体只是一个普通实体，可以像任何其他实体一样写入。这是集成到普通 CRM 表单中的屏幕截图。该控件允许您拖放文件或单击上传按钮以显示文件对话框

![文件上传器截图](https://i.stack.imgur.com/s4CPR.png)

哦，最后一个帮助点，文档作为 base64 编码字符串存储在属性“DocumentBody”中。然后您可以读取它并将其转换为字节数组以保存到磁盘等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:51:24.487

您的屏幕截图看起来像是不是标准控件的自定义开发。也就是说，您可能只需将注释网格添加到表单中即可实现您想要的。笔记可以有附件并且有一个标准的文件浏览器。

返回自定义表单，单击功能区上的插入选项卡，单击注释。

![在此处输入图像描述](https://i.stack.imgur.com/PeJUI.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/Mg3Vx.jpg)

# android - 用于 Textviews 的 setText 并读取 HTML 标签

> ID：15739441
> 
> 赞同：-1
> 
> 时间：2013-04-01T07:30:41.810
> 
> 标签：android, html, textbox

我有一个 String ，这个字符串可能包含任何值（我的意思是它可能包含 HTML 标签）。我在 java 中创建了一个 TextView，现在我需要将此文本设置为 textview。一般来说

```
String str;
Textview tv = new TextView(this);

tv.setText(str); 
```

但是如果 str = < b &rt **这是测试** < /b &rt 那么在这种情况下，我必须用粗体设置 textview 的文本（需要读取 HTML 标签并根据它进行分配）。

java中是否有任何API可用于读取HTML，我该如何继续..

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:32:56.117

这样做。

```
String htmlStr = "&lt b &rt this is testing &lt /b &rt";
tv.setText(Html.fromHtml(htmlStr)); 
```

> 方法 Html.fromHtml(String) -
> 
> 从提供的 HTML 字符串返回可显示的样式文本。HTML 中的任何标签都将显示为通用替换图像，然后您的程序可以通过它并用真实图像替换。这使用 TagSoup 来处理真实的 HTML，包括在野外发现的所有损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:33:51.840

你可以这样做：

```
String myHtml = "&lt b &rt  <b> this is testing </b>     &lt /b &rt";
myTextView.setText(Html.fromHtml(myHtml)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:41:46.417

您可以将您的 html 内容放入 strings.xml 并在那里引用它。如果您的 html 内容很大，您可以将内容放在 strings.xml 中的 ![CDATA[ 和 ]] 之间。

在你的 strings.xml 添加

```
<string name="myhtml><![CDATA[<html>  your html conten </html> ]]> </string> 
```

在你的活动中

```
Textview tv= new TextView(this);
tv.setText(Html.fromHtml(getString(R.string.myhtml)); 
```

# javascript - 滑动/隐藏 Divs 问题

> ID：15739446
> 
> 赞同：1
> 
> 时间：2013-04-01T07:31:05.613
> 
> 标签：javascript, jquery, html

所以我试图为我网站的项目部分制作各种手风琴，我遇到了一个非常奇怪的问题（或者我可能真的很累）。第一次单击以展开选择工作正常，但是当再次单击标题以返回原始状态时，先前展开的标题的内容将被隐藏。此外，在第一个包含边框消失后的任何时间再次单击相同的标题以展开。

要查看我的问题，只需访问我的网站：

[http://cole.quinnchrzan.com/cc2](http://cole.quinnchrzan.com/cc2)

并通过单击项目部分亲自查看。

如果你只是想看看这里的代码，它是：

```
$(document).ready(function() {
var sign = 1;
    $('#projects > div:not(.header)').on('click', function() {
        if (sign == 1) {
            $(this).css('border-bottom', 'none');
            $(this).children().slideDown(400);
            $(this).siblings().slideUp(400);
        }
        else {
            $(this).css('border-bottom', '1px solid black');
            $(this).children().slideUp(400);
            $(this).siblings().slideDown(400);
            $(this).css({
                'height': '29px',
                'z-index': '2'
            });
        }
        sign = sign*-1;
    });
}); 
```

和 HTML：

```
<section id="projects">
    <div class="header">Websites</div>
    <div><a href="#">Saia LTL, Inc.</a>
        <div></div>
    </div>
    <div><a href="#">Insurance House</a></div>
    <div><a href="#">Scandinavian Collectors Club</a></div>
    <div><a href="#">Casey Sills Photography</a></div>
    <div class="header">Personal Projects</div>
    <div><a href="#">cTV</a></div>
    <div><a href="#">PoE DPS calculator</a></div>
    <div><a href="#">tSlide</a></div>
</section> 
```

我添加了一些额外的 css`'height': '29px'` `'z-index': '2'`来尝试再次显示受影响的标题，但它只会创建一个空 div。没有这个 css，div 就没有高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:24:37.210

试试这个。

现场演示[**在这里**](http://jsfiddle.net/8n8ga/)

**HTML**

```
<section id="projects">PROJECTS
    <div class="header">Websites</div>
    <div><a href="#">Saia LTL, Inc.</a></div>
    <div><a href="#">Insurance House</a></div>
    <div><a href="#">Scandinavian Collectors Club</a></div>
    <div><a href="#">Casey Sills Photography</a></div>
    <div class="header">Personal Projects</div>
    <div><a href="#">cTV</a></div>
    <div><a href="#">PoE DPS calculator</a></div>
    <div><a href="#">tSlide</a></div>
</section> 
```

**JavaScript**

```
var sign = 1;
$('#projects > div:not(.header)').on('click', function() {
    if (sign == 1) {
        $(this).css('border-bottom', 'none');
        $(this).children().slideDown(400);
        $(this).siblings().slideUp(400);
    }
    else {
        $(this).css('border-bottom', '1px solid black');
        $(this).siblings().slideDown(400);
        $(!$(this).children(":first")).slideUp(400);
    }
    sign = sign*-1;
}); 
```

**-------------------------------------------------- -------------------------------------------------- --------------------------------**

**替代解决方案**

现场演示[**在这里**](http://jsfiddle.net/nXg2e/2/)

**HTML**

```
<section id="projects">PROJECTS
    <div class="header">Websites</div>
    <div><a href="#" class="ShowThis">Saia LTL, Inc.</a></div>
    <div><a href="#" class="ShowThis">Insurance House</a></div>
    <div><a href="#" class="ShowThis">Scandinavian Collectors Club</a></div>
    <div><a href="#" class="ShowThis">Casey Sills Photography</a></div>
    <div class="header">Personal Projects</div>
    <div><a href="#" class="ShowThis">cTV</a></div>
    <div><a href="#" class="ShowThis">PoE DPS calculator</a></div>
    <div><a href="#" class="ShowThis">tSlide</a></div>
</section> 
```

**JavaScript**

```
var sign = 1;
$('#projects > div:not(.header) > .ShowThis').on('click', function() {
    if (sign == 1) {
        $(this).css('border-bottom', 'none');
        $(this).children().slideDown(400);
        $(this).parent().siblings().slideUp(400);
    }
    else {
        $(this).parent().css('border-bottom', '1px solid black');
        $(this).parent().siblings().slideDown(400);        
        $(this).children().slideUp(400);
    }
    sign = sign*-1;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:46:49.920

这是一个愚蠢的错误。我只是忘记在隐藏/显示时只选择`div`孩子，所以`a`孩子们保持隐藏状态或其他东西。换句话说，我改变了这个：

```
$(this).children() 
```

对此：

```
$(this).children('div') 
```

感谢 pfried 的指示！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:48:37.507

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script>
    $(document).ready(function() {
    $('div.header div.slide').css('display','none');
        $('div.header').toggle(
            function(){$('div.header').hide('fast'); $(this).show('slow'); $('div.slide').css('display','block');},
            function(){$('div.slide').css('display','none'); $('div.header').show('fast');});
    });
    $(document).ready(function(){
        var text = $('div.cont');
        $('div.slide').toggle(
            function(){$('div.slide').hide('fast'); $(this).show('slow'); $('div.cont').css('display','block');},
            function(){ $('div.cont').css('display','none'); $('div.slide').show('fast');});
    })
    </script>
    <style>
        .off{display: none;}
        .on{ display: block;}
        div.cont{ display: none;}
        .slide{ display:none;}
    </style>
</head>
<body>
   <div id="projects">
        <div class="header">Websites
            <div class='slide'><a href="#">Saia LTL, Inc.</a>
              <div class='cont'>a;dasndiasfhnip</div>
            </div>
            <div class='slide'><a href="#">Insurance House</a><div class='cont'>dasndiasfhnip</div></div>
            <div class='slide'><a href="#">Scandinavian Collectors Club</a><div class='cont'>dasndiasfhnip</div></div>
            <div class='slide'><a href="#">Casey Sills Photography</a><div class='cont'>dasndiasfhnip</div></div></div>
        <div class="header">Personal Projects
            <div class='slide'><a href="#">cTV</a><div class='cont'>dasndiasfhnip</div></div>
            <div class='slide'><a href="#">PoE DPS calculator</a><div class='cont'>dasndiasfhnip</div></div>
            <div class='slide'><a href="#">tSlide</a><div class='cont'>dasndiasfhnip</div></div></div>
    </div>
</body> 
```

我更喜欢这个，试一试

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T08:44:10.567

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>$(document).ready(function() {
    var sign = 1;
        $('#projects > div.header').on('click', function() {
            if (sign == 1) {
                $(this).css('border-bottom', 'none');
                $(this).children().slideDown(400);
                $(this).siblings().slideUp(400);
            }
            else {
                $(this).children().slideUp(400);
                $(this).siblings().slideDown(400);
                $(this).css({
                    'height': '29px',
                    'z-index': '2'
                });
            }
            sign = sign*-1;
        });
        $('div.slide').click(function(){
            $('div.cont').slideToggle('slow');
        });
    });
    </script>
    <style>
        div.cont{ display: none;}
    </style>
</head>
<body>
   <div id="projects">
        <div class="header">Websites</div>
            <div class='slide'><a href="#">Saia LTL, Inc.</a>
              <div class='cont'></div>
            </div>
            <div class='slide'><a href="#">Insurance House</a><div class='cont'></div></div>
            <div class='slide'><a href="#">Scandinavian Collectors Club</a><div class='cont'></div></div>
            <div class='slide'><a href="#">Casey Sills Photography</a><div class='cont'></div></div>
        <div class="header">Personal Projects</div>
            <div class='slide'><a href="#">cTV</a><div class='cont'></div></div>
            <div class='slide'><a href="#">PoE DPS calculator</a><div class='cont'></div></div>
            <div class='slide'><a href="#">tSlide</a><div class='cont'></div></div>
    </div>
</body> 
```

我只是尝试为兄弟姐妹添加一个类来具体表示他们----你是在看我很高兴还是有什么特别的事情请评论我-----谢谢

# java - 带有接口的对象类继承

> ID：15739450
> 
> 赞同：1
> 
> 时间：2013-04-01T07:31:28.130
> 
> 标签：java

对象类引用变量是否可以引用某些接口引用变量所占用的引用。正如我们所知，接口不能扩展任何类。所以 Object 类的默认继承是否适用于这种情况。显然答案是肯定的，但这背后的逻辑是什么。？

```
 public interface ToTest {

    }

    public class ToTestImpl implements ToTest{

    }

    public class ToTestClass {

        public static void main(String args[]){
            ToTest test = new ToTestImpl();
            Object o = test;
            System.out.println(o);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:33:37.460

逻辑是每个 Java 类都是 的后代`Object`，与它实现的任何接口无关。因此，任何引用都可以向上转换为`Object`.

适用于您的案例的机制在[§5.5.1 中有详细说明。参考类型转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1)和[§5.5.3。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.3)在 JLS[运行时检查演员表。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.3)细节有点复杂，因为既有编译时组件又有运行时组件。相关报价为：

> 这是检查`R`对象的运行时类型是否与类型兼容的算法`T`...
> 
> 如果`R`是一个接口：
> 
> *   如果`T`是类类型，则`T`必须是`Object`（第 4.3.2 节），否则会引发运行时异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:34:58.497

是的，它会工作。因为，编译器知道`interfaces`并不意味着要实例化。因此，即使您分配了对 的`interface`引用`Object`，很明显它的任何实现都`interface`将来自`Object`的层次结构。

# testing - 与 Selenium Grid 并行运行多个 Rspec 文件

> ID：15739455
> 
> 赞同：2
> 
> 时间：2013-04-01T07:32:01.743
> 
> 标签：testing, selenium-webdriver, rspec

我一直在研究 Rspec/Selenium Webdriver 测试框架，我需要在同一目录 spec/*_test.rb 中运行分布在多个文件中的 Rspec 测试。我正在寻找可用的现有解决方案并偶然发现了深度测试 gem（[https ://github.com/qxjit/deep-test](https://github.com/qxjit/deep-test)）这有助于利用 selenium 网格并行驱动测试，但我无法根据可用的文档来实现它，并且看起来没有正在进行的积极开发。是有任何移植版本的深度测试可用于 RSpec > 2.0。

我还研究了 parallel_tests ( [https://github.com/grosser/parallel_tests](https://github.com/grosser/parallel_tests) )，但不确定我们如何使用它在同一个 cpu 上运行多个进程，每个进程运行不同的 rSpec 测试。

这是我的一个规范文件中的一个片段，

```
require 'selenium-webdriver'
require File.join(File.dirname(__FILE__),'../support/Setup')
require 'rspec'
require File.join(File.dirname(__FILE__),'../support/spec_helper')
require File.join(File.dirname(__FILE__),'../support/Helper')

describe "Test", :type => :selenium do

  it "should search for flights" do
     airline.home_page.queryFlight('oneWay', 'ATL', 'ORD', 'today')
  end

  it "should list all the flight results and select one flight" do
     airline.flight_list_page.selectFlight
  end
end 
```

同样，我有其他规范文件，我正在尝试并行运行。

# java - response.sendRedirect 到 Chrome 中的文件 URL

> ID：15739457
> 
> 赞同：1
> 
> 时间：2013-04-01T07:32:13.033
> 
> 标签：java, http, google-chrome, servlets, redirect

我有一个 URL 缩短器应用程序（类似于 tinyurl.com、bit.ly 等），它也重定向到 file:// URL。

在内部，这是一个基于 Servlet 的 web 应用程序，我所做的就是从服务器端检索`targetURL`并执行一个。`response.sendRedirect(targetURL)`

这也适用于`file://`URL。但是，最近，这已停止在 Chrome 上运行。当我尝试重定向到`file://foo.txt`（通过 a`response.sendRedirect('file://foo.txt')`时，事情只是失败了（Chrome 调试器显示“已取消”）。

然而，在 FF 和 IE 中一切正常。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:57:56.277

我会说这是一个坏主意，我很高兴至少 chrome 否认了这一点（尽管我怀疑其他浏览器也会这样做）。如果您可以指示其他人的浏览器打开任意文件，那将是一个相当大的安全漏洞。

其次，你为什么要这样做？这将要求用户在其计算机上的相同位置实际拥有相同的文件。似乎是一个非常狭窄的用例。我用 bit.ly 测试了你的用例，如果你尝试在`file:///`那里添加一个 url，它被认为是一个无效的 URL，不能被缩短。

[编辑：这里](https://security.stackexchange.com/questions/18685/are-there-any-know-browsers-that-support-file-url-redirection)有一个很好的答案，涵盖了相同的主题。它引用了这个关于[重定向安全限制的](https://code.google.com/p/browsersec/wiki/Part2#Redirection_restrictions)有用资源。

您还指定这是针对内部应用程序的。如果您尝试进行某种文档共享，我会说您应该为此研究专用系统。另一种选择是使用“保管箱灯”扩展您的服务，您的用户可以在其中将相关文件上传到存储服务，并且您可以根据通过常规 http/https 从存储中提供文件来生成缩短的 url。

# java - 在 Alfresco 中删除特定版本的文档

> ID：15739458
> 
> 赞同：3
> 
> 时间：2013-04-01T07:32:18.213
> 
> 标签：java, alfresco, opencmis

我们可以在 Alfresco 中删除特定版本的 Document 吗？当我试图通过我的代码删除文档时，它会删除带有版本历史记录的文档。我想删除特定版本的 Document。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:16:40.480

您想要[VersionService.deleteVersion(NodeRef, Version)](http://dev.alfresco.com/resource/docs/java/repository/org/alfresco/service/cmr/version/VersionService.html#deleteVersion%28org.alfresco.service.cmr.repository.NodeRef,%20org.alfresco.service.cmr.version.Version%29) - 这将让您从历史记录中删除一个版本

执行以下操作：

```
VersionHistory history = versionService.getVersionHistory(nodeRef);
for (Version version : history.getAllVersions())
{
     if (version.getVersionLabel().equals("2.99"))
     {
         versionService.deleteVersion(nodeRef, version);
         break;
     }
} 
```

或者：

```
VersionHistory history = versionService.getVersionHistory(nodeRef);
try {
    Version version = history.getVersion("1.42");
    versionService.deleteVersion(nodeRef, version);
} catch(VersionDoesNotExistException e) {
    System.err.println("It seems to have already gone!");
} 
```

# c# - 从 global.asax 中的 Session_end 重定向到另一个页面

> ID：15739461
> 
> 赞同：1
> 
> 时间：2013-04-01T07:32:28.267
> 
> 标签：c#, .net, global-asax, sessionend

我需要在会话超时时将用户重定向到登录页面。global.asax 中 Session_End 方法的问题是：

1.  它不支持 Response.Redirect 或 Server.Transfer
2.  任何使用 HttpContext.Current.Response 的尝试都会导致“对象引用未设置为对象的实例”错误

第二个错误是可以理解的，因为在会话超时时，当前会话将被终止并设置为空。
我想知道的是是否可以将用户直接（特别是）从 session_end 重定向到另一个页面。有些方法有效（不使用 session_end 方法），但它们都需要向服务器发出请求（例如刷新，我不想要）。我可以在不使用 javascript 的情况下执行此操作吗？（更重要的是，我应该这样做吗？）
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:36:13.850

Session_End 不是直接在服务器上提出的，没有用户的任何交互吗？

当我转到您的页面（并开始会话），关闭浏览器窗口并且永不返回时会发生什么？那么就可以理解了，那`HttpContext.Current.Response`就是null。

# php - 带有多行标签的php jpgraph barplot

> ID：15739462
> 
> 赞同：0
> 
> 时间：2013-04-01T07:32:33.873
> 
> 标签：php, bar-chart, jpgraph

我想为我的条形图设置多行标签。我一直在使用`str_replace()`将所有空格替换为`\r\n or \n`但没有一个有效。标签没有分成多行。

有谁知道如何使它正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:17:17.187

好的，我已经解决了，只是一些语法错误。

代替`str_replace(' ', '\n', str)`

我应该使用`str_replace(' ', "\n", str)`

# php - 无法在 HTML/PHP 中显示 MySQL 表

> ID：15739468
> 
> 赞同：2
> 
> 时间：2013-04-01T07:32:56.560
> 
> 标签：php, mysql, html-table

我很难弄清楚如何让我的表格显示为网页。

其他一切工作正常。我已经能够使用表格将记录写入表格，但我根本无法显示表格。

这是我的代码：

```
$host = "***";
$userName = "***";
$passWord = "***";
$db = "doctorWho";

mysql_connect($host,$userName,$passWord);
mysql_select_db($db) or die( "Unable to access database");
$query = "SELECT * FROM patients";

$result = mysql_query($query);

echo "<table border='1'>
    <tr>
    <th>Last Name</th>
    <th>First Name</th>
    <th>Address</th>
    <th>Age</th>
    <th>Sex</th>
    <th>Marital Status</th>
    <th>Medication</th>
    <th>Date Rx'd</th>
    <th>Quantity</th>
    </tr>";

while($row = mysqli_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['lastName'] . "</td>";
  echo "<td>" . $row['firstName'] . "</td>";
  echo "<td>" . $row['address'] . "</td>";
  echo "<td>" . $row['age'] . "</td>";
  echo "<td>" . $row['sex'] . "</td>";
  echo "<td>" . $row['maritalStatus'] . "</td>";
  echo "<td>" . $row['medication'] . "</td>";
  echo "<td>" . $row['medsWhen'] . "</td>";
  echo "<td>" . $row['medsQuant'] . "</td>";
  echo "</tr>";

  }
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:35:12.157

你想要[`mysql_fetch_array()`](http://www.php.net/manual/en/function.mysql-fetch-array.php)。目前，您正在混合两种不同的扩展。每个都需要不同的东西，与扩展相关。

除此之外，您应该考虑 PDO 或 MySQLi，这是您尝试使用的错误函数的来源。 [这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该可以帮助你决定你可以使用哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:37:49.547

```
// I think your connection should look like this
$conn = mysql_connect($host,$userName,$passWord);
mysql_select_db($conn,$db) or die( "Unable to access database");

// another is your using mysql as connection so you can use mysqli functions on that rofl.
//Instead use mysql functions
mysql_fetch_array(); 
```

*注意：另一种是不使用`@`符号来处理错误。`ini_set()`使用..或配置`php.ini`处理错误显示的最佳实践要多得多。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:38:11.970

从 php 参考。

```
mixed mysqli_fetch_array ( mysqli_result $result [, int $resulttype = MYSQLI_BOTH ] ) 
```

`mysqli_fetch_array`需要`mysqli_result`，但你正在使用`mysql_query`，你应该试试`mysql_fetch_array`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:48:23.480

只是改变：-

```
while($row = mysqli_fetch_array($result)) 
```

到

```
while($row = mysql_fetch_array($result)) 
```

# django - django cms 占位符中的 STATIC_URL

> ID：15739469
> 
> 赞同：1
> 
> 时间：2013-04-01T07:33:01.770
> 
> 标签：django, django-cms

我的模板中有一个占位符：

`{% placeholder slider_content %}`

`{{ STATIC_URL }}`在管理员中编辑占位符内容时是否可以访问，如下所示：

`<img src="{{ STATIC_URL }}/images/slides/01.png" alt="" /></div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:42:22.863

这取决于您使用的插件。文本插件不会将所见即所得的内容呈现为模板，它只会将它们呈现为 HTML，因此您包含的任何标签（如`{{ STATIC_URL }}`您的示例中）都将呈现为文本。

使用`placeholder`模板标签（实际上是`django-classy-tags`模板标签的一个实例）时，标签所传递的上下文取决于视图使用的上下文类型。这应该是`RequestContext`显示 CMS 页面时的一个，因此您应该可以访问您的所有`TEMPLATE_CONTEXT_PROCESSORS`（例如`STATIC_URL`）。因此，类似地，当插件呈现其模板时，它应该可以访问该上下文以及与之相关的任何变量。

# html - Firefox 溢出隐藏需要浮动

> ID：15739470
> 
> 赞同：0
> 
> 时间：2013-04-01T07:33:18.860
> 
> 标签：html, css, firefox, styles

我在 Chrome、Opera 甚至 Internet Explorer 上进行了测试，我下面的 css 按预期工作。

```
.carousel
{
    position:relative;
    overflow:hidden;
    width:100%;
    margin-bottom:0px;
}

.carousel-inner
{
    font-size:0;
    position:absolute;
    width:6882px;
}

.carousel-item
{
    background-repeat:no-repeat;
    background-position:0px 0px;
    display:inline-block;
    cursor:pointer;
    margin:0px 16px;
} 
```

但是当我在 Firefox 上测试时，`.carousel-inner`并没有隐藏溢出的元素。

为了添加相同的效果，我需要添加`float:left`to `.carousel-inner`，这会导致`width:100%`被忽略。

是否有另一种针对 Firefox 的解决方法？

我试过`clear:both`没有运气。

这是jsfiddle[示例](http://jsfiddle.net/samueladam/VKPku/3/)

和图像（Chrome、IE、Opera）：

![图片](https://i.stack.imgur.com/wQ5he.jpg)

火狐：

![火狐](https://i.stack.imgur.com/xIMAr.jpg)

干杯！

# sql - 如何在 SQL 中将 DATE 列转换为 DATETIME，查询 Access 数据库？

> ID：15739476
> 
> 赞同：0
> 
> 时间：2013-04-01T07:33:50.937
> 
> 标签：sql, date, ms-access, datetime

我有一个 SQL 查询，我需要将`DATE`列`DATETIME`从 Access 数据库转换为的位置。

要转换的列是：

```
CHECKINOUT.CHECKTIME
CHECKINOUT.DefaultIn
CHECKINOUT.DefaultOut 
```

这是我的查询：

```
SELECT       
   USERINFO.NAME, USERINFO.EmployeeCode, CHECKINOUT.CHECKTYPE,
   CHECKINOUT.DefaultIn, CHECKINOUT.DefaultOut, CHECKINOUT.DefaultBreckIn, 
   CHECKINOUT.DefaultBreakOut, CHECKINOUT.CHECKTIME, USERINFO.TITLE
FROM           
   (CHECKINOUT 
    INNER JOIN USERINFO ON CHECKINOUT.USERID = USERINFO.USERID)
WHERE 
   (CHECKINOUT.CHECKTIME >= ?) 
   AND (CHECKINOUT.CHECKTIME <= ?) 
   AND (CHECKINOUT.USERID = ? OR ? = - 1) 
   AND (CHECKINOUT.DefaultIn <=  CHECKINOUT.CHECKTIME OR
        CHECKINOUT.DefaultOut >= CHECKINOUT.CHECKTIME ) 
```

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:03:24.770

您必须在查询中使用 Format 函数，例如：

```
Format([datetime column],'dd-mm-yyyy @ hh:nn:ss AM/PM') 
```

在你的 SQL 中：

```
SELECT Format([CHECKINOUT.CHECKTIME],'dd-mm-yyyy @ hh:nn:ss AM/PM') AS DT_CHECKTIME ... 
```

# count - 如何计算表中外键ID的重复实例

> ID：15739479
> 
> 赞同：0
> 
> 时间：2013-04-01T07:34:01.573
> 
> 标签：count, oracle11g, foreign-keys

`course_id`我想通过计算提供表中的来找出提供最多的课程名称。

**课程：**

```
+-----------+--------------+-----------------+-------------+
| course_id | course_title | course_duration | course_cost |
+-----------+--------------+-----------------+-------------+ 
```

**提供：**

```
+-------------+-----------+-------------------+-----------------+-------------------+
| offering_id | course_id | course_start_date | course_location | course_instructor |
+-------------+-----------+-------------------+-----------------+-------------------+ 
```

我尝试了以下查询，但我不知道为什么，但我收到一条错误消息：

```
SELECT COURSE.COURSE_TITLE,
  OFFERING.OFFERING_ID,
  OFFERING.COURSE_ID
  COUNT (OFFERING.COURSE_ID) as Mostly_Offered_Course
FROM OFFERING
INNER JOIN COURSE
ON COURSE.COURSE_ID = OFFERING.COURSE_ID 
```

我对 oracle 和 SQL 还很陌生，你能指出我在哪里犯了错误，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:50:38.343

```
SELECT course_title FROM Course WHERE course_id = 
    (
      SELECT course_id FROM
      (
        SELECT course_id, COUNT(course_id) AS course FROM Offering 
        GROUP BY course_id
        ORDER BY course DESC
      ) AS a LIMIT 1
    ) 
```

这将获得最常用的标题。在mysql上测试。在 MSSQL 上，只需在第二个选择中删除“LIMIT 1”并将“course_id”修改为“First(course_id)”。

# javascript - 使 cookie 持续时间比会话长

> ID：15739481
> 
> 赞同：0
> 
> 时间：2013-04-01T07:34:10.980
> 
> 标签：javascript

我正在使用以下 javascript 来设置 cookie，但它将过期时间设置为`session`而不是指定的日期

```
 var d1 = new Date (),
  d2 = new Date ( d1 );
  d2.setMinutes ( d1.getMinutes() + timedelay );
  document.cookie=itemid + "=" + itemid; + 'expires=' + d2 + '; path=/'; 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:36:41.217

你失去了一个`;`：

```
document.cookie=itemid + "=" + itemid + ';expires=' + d2 + '; path=/'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:38:23.583

语法似乎是错误的

尝试

```
 document.cookie=itemid + "=" + itemid + ';expires=' + d2 + '; path=/'; 
```

# matlab - 如何在 Matlab 中将颜色图例放入绘图中？

> ID：15739484
> 
> 赞同：0
> 
> 时间：2013-04-01T07:34:16.807
> 
> 标签：matlab, plot, legend

我在Matlab中画了一张如下图。我尝试了很多方法在图片末尾添加漂亮的颜色图例，每种颜色代表一个变量，例如“通货膨胀”、“利率”、“汇率”等。问题是我无法正确添加它们。我绘制图表的代码附在下面。

我使用命令

```
fill 
```

画图，数据是一个矩阵（后面代码中没有提供，太大了）。有人会教我如何在图表底部绘制颜色图例吗？谢谢！

![在此处输入图像描述](https://i.stack.imgur.com/CBOOA.jpg)

```
%% Graph 1
z1 = squeeze(z(i_var(1),:,:));
xmin = x(1);
xmax = x(end);
ix = z1 > 0;
ymax = max(sum(z1.*ix));
ix = z1 < 0;
ymin = min(sum(z1.*ix));
if ymax-ymin < 1e-6
end

  figure('Name',endo_names(i_var(1),:)); 
subplot(2,1,1)
plot(x(2:end),z1(end,:),'k-','LineWidth',2)
hold on;
for i=1:gend
    i_1 = i-1;
    yp = 0;
    ym = 0;
    for k = 1:comp_nbr 
        zz = z1(k,i);
        if zz > 0
            fill([x(i) x(i) x(i+1) x(i+1)],[yp yp+zz yp+zz yp],k);
            yp = yp+zz;
        else
            fill([x(i) x(i) x(i+1) x(i+1)],[ym ym+zz ym+zz ym],k);
            ym = ym+zz;
        end
        hold on;
    end
end
plot(x(2:end),z1(end,:),'k-','LineWidth',2),
    set(gca,'xtick',[0 22 44 66 88 110]),
   set(gca,'xticklabel',{'1985q1', '1990q3', '1996q1', '2001q3', '2007q3',    '2013q1'}),title('Output gap')

axis([0 110 -3 3])
hold off;

%% Graph 2
z1 = squeeze(z(i_var(2),:,:));
xmin = x(1);
xmax = x(end);
ix = z1 > 0;
ymax = max(sum(z1.*ix));
ix = z1 < 0;
ymin = min(sum(z1.*ix));
if ymax-ymin < 1e-6
end

subplot(2,1,2)
plot(x(2:end),z1(end,:),'k-','LineWidth',2)
hold on;
for i=1:gend
    i_1 = i-1;
    yp = 0;
    ym = 0;
    for k = 1:comp_nbr 
        zz = z1(k,i);
        if zz > 0
            fill([x(i) x(i) x(i+1) x(i+1)],[yp yp+zz yp+zz yp],k);
            yp = yp+zz;
        else
            fill([x(i) x(i) x(i+1) x(i+1)],[ym ym+zz ym+zz ym],k);
            ym = ym+zz;
        end
        hold on;
    end
end
plot(x(2:end),z1(end,:),'k-','LineWidth',2),set(gca,'xtick',[0 22 44 66 88 110])  
set(gca,'xticklabel',{'1985q1', '1990q3', '1996q1', '2001q3', '2007q3', '2013q1'}), title('CPI inflation')

axis([0 110 -3 3])
hold off; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:08:05.280

我不确定`fill`有没有办法使用传统的`legend`，所以这就是我要尝试的方法：在每个图表创建虚拟图并使用它们的颜色与您的`fill`对象相同，然后使用常规图例：

```
hold on
L1 = plot(NaN,NaN,'r',NaN,NaN,'b',NaN,NaN,'y');
legend(L1,'inflation', 'interest rate' ,'exchange rate'); 
```

要设置图例的位置，请参阅[文档](http://www.mathworks.com/help/matlab/ref/legend.html)，例如：

```
 legend(L1,'inflation', 'interest rate' ,'exchange rate','Location','SouthOutside','Orientation','horizontal'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:41:43.617

为了您的目的，我会使用 command: **colorbar 。**该命令允许使用一些输入参数来选择用适当的词表示哪种颜色。试试看。

# scala - 如何在客户端使用 scala.concurrent.Future？

> ID：15739487
> 
> 赞同：0
> 
> 时间：2013-04-01T07:34:25.063
> 
> 标签：scala, playframework, future, playframework-2.1

我需要在服务器端进行一些消耗性的计算（例如数据库查询和数据分析）。结果需要在浏览器中打印。为此，我将 Future 结果从服务器发送到客户端（立即加载网页并逐渐从服务器打印未来结果）。例如，在服务器端

```
import scala.concurrent.Future
import scala.concurrent.ExecutionContext.Implicits.global
def futureResult = Future { 
  val cc = ConsumingCalculations();
  "some result" 
} 
```

在客户端

```
@import scala.concurrent.ExecutionContext.Implicits.global
@main{
  @futureResult.onSuccess{ case res =>
    @println("This line is printed in console: "+res);
    <div>Any html code is NOT printed in browser</div>
  }
  Future result is NOT posted
} 
```

在服务器控制台中，我们有：“此行打印在控制台中：一些结果”

但在浏览器中，我们只有：“未发布未来结果”

目前使用的是 Play 2.1、scala 2.10。什么可能是错的，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:26:45.210

未来不能在客户端发送，它必须在显示给客户端之前在服务器端解析。

经典的例子是在你的控制器中映射你未来的结果

```
def myAction = Action {
    Async {
        futureResult.map(result =>
             Ok(views.html.myView(result))
        )
    }
} 
```

在你的模板中，使用结果，而不是未来。

# cpu-registers - 程序计数器和指令寄存器

> ID：15739489
> 
> 赞同：49
> 
> 时间：2013-04-01T07:34:31.993
> 
> 标签：cpu-registers, cpu-architecture, program-counter

程序计数器保存下一个应该执行的指令的地址，而指令寄存器保存要执行的实际指令。其中一个还不够吗？

每个寄存器的长度是多少？

谢谢。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-09T14:50:56.357

您将始终需要两者。程序计数器 (PC) 保存要执行的下一条指令的地址，而指令寄存器 (IR) 保存编码指令。在获取指令时，程序计数器增加一个“地址值”（到下一条指令的位置）。然后该指令被适当地解码和执行。

你需要两者的原因是因为如果你只有一个程序计数器并将它用于这两个目的，你会得到以下麻烦的系统：

【程序执行开始】

1.  PC 包含 0x00000000 （假设这是内存中程序的起始地址）
2.  编码指令从内存中取出并放入 PC。
3.  指令被解码并执行。
4.  现在是时候进入下一条指令了，所以我们回到 PC 看看下一条指令的地址是什么。但是，我们遇到了一个问题，因为 PC 的前一个地址被删除了，所以我们不知道下一条指令在哪里。

因此，我们需要另一个寄存器来保存从内存中获取的实际指令。一旦我们获取该内存，我们就增加 PC 以便我们知道从哪里获取下一条指令。

PS 寄存器的宽度取决于架构的字长。例如，对于 32 位处理器，字长为 32 位。因此，CPU 上的寄存器将是 32 位。指令寄存器在维度上没有区别。区别在于行为和解释。指令以各种形式编码，但是，它们仍然占用 32 位寄存器。例如，Altera 的 Nios II 处理器包含 3 种不同的指令类型，每种都以不同的方式编码。请参阅[ftp://ftp.altera.com/up/pub/Tutorials/DE2/Computer_Organization/tut_nios2_introduction.pdf的第 6 页](ftp://ftp.altera.com/up/pub/Tutorials/DE2/Computer_Organization/tut_nios2_introduction.pdf)

您也可以从上面的链接中了解有关 Nios II 处理器结构的更多信息。它是一个简单的 IP CPU。当然，英特尔有自己的规范/设计，并且会有所不同。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-09T14:41:22.273

正如您所说，[程序计数器（PC）](http://en.wikipedia.org/wiki/Program_counter)保存下一条要执行的指令的地址，[指令寄存器（IR）](http://en.wikipedia.org/wiki/Instruction_register)存储要执行的实际指令（但不是它的地址）。

与这些寄存器的长度有关，当前的机器有 64 位 PC。IR 的长度（从逻辑的角度来看）取决于架构：

*   RISC 机器通常有固定长度的指令。例如，大多数 SPARC 指令以 32 位格式编码。
*   CISC 机器（英特尔、AMD）具有可变长度指令。例如，请参阅[英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

由于这些机器能够在每个周期获取、解码和执行多条指令，因此 IR 的物理实现并不容易用几行来描述。

# c++ - 应该使用 size_t 或 ssize_t

> ID：15739490
> 
> 赞同：108
> 
> 时间：2013-04-01T07:34:37.090
> 
> 标签：c++, unsigned, signed, size-t

在我的代码中，我不使用 int 或 unsigned int。我只将 size_t 或 ssize_t 用于便携式。例如：

```
typedef size_t intc;    // (instead of unsigned int)
typedef ssize_t uintc;  // (instead of int) 
```

因为`strlen`，，……都用`string`，所以我一般都用。我只在它可能是负面的时候使用。`vector``size_t``size_t``ssize_t`

但我发现：

> 无符号整数类型非常适合将存储视为位数组的用途。使用 unsigned 而不是 int 来获得更多位来表示正整数几乎从来都不是一个好主意。通过声明变量 unsigned 来确保某些值是正数的尝试通常会被隐式转换规则所挫败。

[在C++ 编程语言](https://rads.stackoverflow.com/amzn/click/com/0321563840)一书中。

所以我很困惑。我错了吗？为什么 STL 不遵守书上的建议？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-04-01T07:50:43.357

`ssize_t`用于返回值可以是有效大小或负值以指示错误的函数。保证至少能够在范围内存储值`[-1, SSIZE_MAX]`（`SSIZE_MAX`取决于系统）。

因此，只要您打算返回`size_t`以字节为单位的大小，并且`ssize_t`无论何时要返回以字节为单位的大小或（负）错误值，都应该使用。

见： http: [//pubs.opengroup.org/onlinepubs/007908775/xsh/systypes.h.html](http://pubs.opengroup.org/onlinepubs/007908775/xsh/systypes.h.html)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-01T07:59:48.483

`ssize_t`不包含在标准中并且不可移植。`size_t`应该在处理对象的大小时使用（也有`ptrdiff_t`指针差异）。

# c++ - c++ 预定义实例

> ID：15739496
> 
> 赞同：1
> 
> 时间：2013-04-01T07:35:00.313
> 
> 标签：c++

我正在设计一个 Vector3D 类，并希望能够轻松访问一些常用向量，例如笛卡尔基向量和 origo。下面是一种使用静态成员的方法。这是实现这一目标的正确方法吗？性能将是一个关键点。

**矢量.h**

```
#include <iostream>

class Vector3D {

public:
    Vector3D(double x=0.0, double y=0.0, double z=0.0) :
        x_(x),
        y_(y),
        z_(z) {};

    inline void print() const {
        std::cout << x_ << " " << y_ << " " << z_ << std::endl;
    }

    // Predefined Vectors
    static Vector3D ZERO;
    static Vector3D X;
    static Vector3D Y;
    static Vector3D Z;

    double x_, y_, z_;
}; 
```

**向量.cpp**

```
#include "vector.h"

// Predefined vectors
Vector3D Vector3D::ZERO = Vector3D(0.0f, 0.0f, 0.0f);
Vector3D Vector3D::X    = Vector3D(1.0f, 0.0f, 0.0f);
Vector3D Vector3D::Y    = Vector3D(0.0f, 1.0f, 0.0f);
Vector3D Vector3D::Z    = Vector3D(0.0f, 0.0f, 1.0f); 
```

然后可以像这样使用该类：

**主文件**

```
#include "vector.h"

int main()
{
    Vector3D o = Vector3D::ZERO;
    Vector3D x = Vector3D::X;
    Vector3D y = Vector3D::Y;
    Vector3D z = Vector3D::Z;

    o.print();
    x.print();
    y.print();
    z.print();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:43:00.093

您缺少`const`标识符。你不希望有人不小心修改零 =)

您也可以使用静态方法：

```
struct Vector3D
{
  //...

  static Vector3D const & ZERO()
  {
     static Vector3D zero_(0,0,0);
     return zero_;
  }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:43:54.273

> **尽可能使用 const - Scott Meyers**

  您的代码很好，此外您还可以使用`const`

```
class Vector3D
{
    // ...
    static const Vector3D ZERO;
    static const Vector3D X;
    static const Vector3D Y;
    static const Vector3D Z;
};

const Vector3D Vector3D::ZERO = Vector3D(0.0f, 0.0f, 0.0f);
const Vector3D Vector3D::X    = Vector3D(1.0f, 0.0f, 0.0f);
const Vector3D Vector3D::Y    = Vector3D(0.0f, 1.0f, 0.0f);
const Vector3D Vector3D::Z    = Vector3D(0.0f, 0.0f, 1.0f); 
```

*（我不确定）`const`关键字可以帮助编译器进行更好的优化。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:43:26.363

主函数的前四行应该是分配静态成员向量地址的指针。

见： http: [//www.learncpp.com/cpp-tutorial/811-static-member-variables/](http://www.learncpp.com/cpp-tutorial/811-static-member-variables/) “一个类的成员变量可以使用static关键字变成静态的。静态成员变量在程序中只存在一次，无论如何定义了多少类对象！考虑它的一种方法是类的所有对象共享静态变量。

您可能想要更改类/文件的名称，vector 是标准库模板类。

# c - 如何阅读这个原型？

> ID：15739500
> 
> 赞同：4
> 
> 时间：2013-04-01T07:35:21.563
> 
> 标签：c, prototype, function-pointers, declaration

帮助我理解以下原型。最后`(int)`在做什么？

```
void ( *signal(int sig, void (*handler)(int)) ) (int); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T11:35:17.123

找到最左边的标识符并找出路，记住它`[]`并`()`在之前绑定`*`；IOW，`*a[]`是指针数组，是指向数组的指针，`(*a)[]`是`*f()`返回指针的函数，`(*f)()`是指向函数的指针。因此，

```
void ( *signal(int sig, void (*handler)(int)) ) (int); 
```

分解为

```
 signal                                          -- signal
        signal(                               )         -- is a function
        signal(    sig                        )         -- with a parameter named sig
        signal(int sig,                       )         --   of type int
        signal(int sig,        handler        )         -- and a parameter named handler
        signal(int sig,       *handler        )         --   which is a pointer
        signal(int sig,      (*handler)(   )) )         --   to a function
        signal(int sig,      (*handler)(int)) )         --   taking an int parameter
        signal(int sig, void (*handler)(int)) )         --   and returning void
       *signal(int sig, void (*handler)(int)) )         -- returning a pointer
     ( *signal(int sig, void (*handler)(int)) )(   )    -- to a function
     ( *signal(int sig, void (*handler)(int)) )(int)    --   taking an int parameter
void ( *signal(int sig, void (*handler)(int)) )(int);   --   and returning void 
```

该`signal`函数将信号 ( `sig`) 与*回调函数*( `handler`) 相关联，如下所示：

```
#include <signal.h>

static int interrupt = 0;

/**
 * The following function will be called when a SIGINT is
 * detected (such as when someone types Ctrl-C)
 */
void interrupt_handler( int sig )
{
  interrupt = 1;
}

int main( void )
{
  /**
   * Declare a pointer to the old interrupt handler function
   */
  void (*old_interrupt_handler )(int);

  /**
   * Save the old interrupt handler while setting the new one
   */
  old_interrupt_handler = signal( SIGINT, interrupt_handler );
  while ( !interrupt )
  {
    // do stuff until someone hits Ctrl-C
  };

  /**
   * restore the original interrupt handler
   */
  signal( SIGINT, old_interrupt_handler );
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-01T07:41:14.493

整个事情声明了一个名为的函数`signal`：

*   `signal`接受一个 int 和一个函数指针
    *   这个函数指针接受一个`int`并返回`void`
*   `signal`返回一个函数指针
    *   这个函数指针**接受一个`int`**并返回一个`void`

这就是最后一个`int`进来的地方。

* * *

您可以使用[螺旋规则](http://c-faq.com/decl/spiral.anderson.html)来理解此类声明或程序`cdecl(1)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T09:39:03.577

正如我在对另一个最近的问题的回答中指出的那样，理解这些声明的一种方法是将参数列表和数组声明符与其左边的东西交换，然后向后阅读声明。在这种情况下，给你

```
void ( *signal(int sig, void (*handler)(int)) ) (int) 
```

->

```
void (int)( *(int sig, void (int)(*handler))signal ) 
```

读作“`signal 是一个函数，它接受两个参数并返回一个指向函数的指针，该函数接受一个 int 参数并返回 void”。这两个参数是一个 int (sig) 和一个指向接受 int 参数并返回 void 的函数的指针（处理程序）。

或者你可以在心理上进行交换，这与螺旋规则相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:47:06.990

它是一个返回指向返回 void 的函数的指针的函数。来源：DEEP C SECRETS 中的“Unscrambling C Declarations”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T07:40:41.807

`void (*handler)(int);`handler 是指向具有返回类型的函数（例如 Fn1）的指针，`void`并接受`int`

`void (*signal(int sig, Fn1)) (int);`

`(*signal(int sig, Fn1);`此函数具有返回类型`void`，并以`int`and`function pointer`作为参数。

这个函数的返回类型，它的指针`signal`可能是一个函数指针，它接受一个返回类型为`int`[final `int`]的函数`void`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T07:52:39.430

上面的原型可以写成：

```
typedef void (*sig_t) (int);

sig_t signal(int sig, sig_t handler); 
```

现在，我希望你会清楚。

# java - 启动新线程时出现黑色视图

> ID：15739505
> 
> 赞同：0
> 
> 时间：2013-04-01T07:35:37.717
> 
> 标签：java, android, multithreading

在我的 android 应用程序中，我希望每 60 秒自动刷新一次。所以我这样尝试：

```
public void refresh_check() {
        Thread myThread = new Thread()
        {
            int counter = 0;
            @Override
            public void run() {
                MyActivity.this.runOnUiThread(new Runnable(){
                    @Override
                    public void run() {
                        while (counter < 60) {
                            try {
                                Thread.sleep(1000);
                                counter += 1;
                                System.out.println("Counter: " + counter);
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                        refresh();
                    }});
                super.run();
            }
        };
        myThread.start();       
    } 
```

这以将计数器打印到 logcat 中的方式起作用，但在我的应用程序中，我得到一个黑色视图。`refresh()`只是一个带有http请求的函数，它单独工作，所以错误必须在任何地方的线程中：/有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:48:06.117

您没有`Thread`正确使用。在 UI 线程上运行长任务就像根本不使用 a 一样`Thread`。为了完成你需要的，你应该这样做：

```
public void refresh_check() {
        Thread myThread = new Thread()
        {
            int counter = 0;
            @Override
            public void run() {
                while (counter < 60) {
                            try {
                                Thread.sleep(1000);
                                counter += 1;
                                System.out.println("Counter: " + counter); //I think this may cause exception, if it does try removing it
                            } catch (InterruptedException e) { 
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                        refresh(); // In refresh(), use TextView.post(runnable) to post update the TextView from outside the UI thread or use handlers
                    }});
                super.run();
            };
        myThread.start();       
    } 
```

另外，看看 AsyncTask 类，它使您能够在 UI 线程 ( ) 之外运行长任务，并使用 ( )`doInBackground()`的结果更新 UI`onPostExecute()`

# ruby - 哪个是为网站中的用户添加个人资料图片代码的最佳方法

> ID：15739506
> 
> 赞同：0
> 
> 时间：2013-04-01T07:35:40.493
> 
> 标签：ruby, html

您好我正在创建一个有很多用户的网站，我想为每个用户添加个人资料图片并显示它。使用服务器脚本 (Ruby) 或通过 HTML 和 java 脚本添加的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:02:38.397

最简单的方法之一（独立于任何技术）是让您的网站在可用时使用[Gravatars](https://en.gravatar.com/)（“全球认可的头像”）。然后，您可以使用简单的 img 以您想要的任何尺寸显示它：

```
<img src="http://www.gravatar.com/avatar/205e460b479e2e5b48aec07710c08d50" /> 
```

请参阅[此处](https://en.gravatar.com/site/implement/images/)了解更多信息。

# c# - 为什么我的课程不符合 CLS？

> ID：15739511
> 
> 赞同：8
> 
> 时间：2013-04-01T07:36:02.383
> 
> 标签：c#, .net-4.5, cls-compliant

这真的让我很困惑。我已经尝试删除只读的，更改名称..我在这里做错了什么？

```
public abstract class CatalogBase<T> where T : class
{
    protected readonly String DataPath;
    protected readonly XmlSerializer Serializer;
    private readonly XmlSerializerNamespaces _namespaces;

    protected CatalogBase(String dataPath)
    {
        DataPath = dataPath;
        Serializer = new XmlSerializer(typeof (T));
        _namespaces = new XmlSerializerNamespaces();
        _namespaces.Add(String.Empty, String.Empty);
    }

    public virtual void Write(T obj)
    {
        var streamWriter = new StreamWriter(DataPath);

        Serializer.Serialize(streamWriter, obj, _namespaces);
        streamWriter.Close();
    }

    public abstract IDictionary<String, T> Read();
} 
```

编辑：

警告：

> *警告 1“Ar.ViewModel.Workspaces.MaterialCatalogBase”：基本类型“Or.Files.CatalogBase”不符合 CLS C:_Center_Work_Programming_Cs\Ar\Ar\ViewModel\Workspaces\MaterialCatalogBase.cs 9 18 Ar*

# 编辑2：

即使我如下更改类，我仍然会收到错误：

```
public abstract class CatalogBase<T> where T : class
{
    protected readonly String DataPath;
    protected readonly XmlSerializer Serializer;
    private readonly XmlSerializerNamespaces namespaces;

    protected CatalogBase(String dataPath)
    {
        DataPath = dataPath;
        Serializer = new XmlSerializer(typeof (T));
        namespaces = new XmlSerializerNamespaces();
        namespaces.Add(String.Empty, String.Empty);
    }

    public virtual void Write(T obj)
    {
        var streamWriter = new StreamWriter(DataPath);

        Serializer.Serialize(streamWriter, obj, namespaces);
        streamWriter.Close();
    }

    public abstract IDictionary<String, T> Read();
} 
```

另外，我忘了提到由于某种原因我得到了两个（完全相同的错误）..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T08:41:41.867

看起来你有以下内容：

*   大会 A 声明`CatalogBase<T>`。程序集 A**未**标记为 CLSCompliant
*   程序集 B 引用程序集 A。程序集 B 声明`MaterialCatalogBase : CatalogBase<T>`. 程序集 B**被**标记为 CLSCompliant

如果是你的情况 - 那么你的`CatalogBase<T>`类所在的程序集应该用 CLSCompliant 属性标记：

```
[assembly: CLSCompliant(true)] 
```

# php - xmlHttp.send() 似乎没有发送

> ID：15739516
> 
> 赞同：0
> 
> 时间：2013-04-01T07:36:24.870
> 
> 标签：php, ajax

我正在尝试为自己整理一个基本的 Ajax 示例，以便以后可以在游戏中实现它。我遇到的问题是无法使用 xmlHttp.send() 方法将数据发送到 .php 文件。我的代码如下：

HTML

```
<input type='text' id='level' value='0'> 
```

JavaScript

```
function MakeRequest()
{
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function()
  {
    if(xmlHttp.readyState == 4)
    {
      HandleResponse(xmlHttp.responseText);
    }
  }

  xmlHttp.open("GET", "ajax.php", true); 
  xmlHttp.send("level=" + document.getElementById('level').value);
} 
```

PHP

```
$level = $_GET["level"];
echo "Result is: " . $level; 
```

我究竟做错了什么？我真的看不到任何问题，我尝试将“GET”更改为“POST”或编写“ajax.php?level=90”而不仅仅是“ajax.php”。似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:38:00.343

使用 AJAX 发送 GET 请求：参数应附加 URL：

```
xmlHttp.open("GET", "ajax.php?level=" + document.getElementById('level').value, true); 
xmlHttp.send(); 
```

在发送 PSOT 时，您可以使用：

```
 xmlHttp.open("POST", "ajax.php", true); 
 xmlHttp.send("level=" + document.getElementById('level').value); 
```

# jquery - $.ajax() 调用返回数据但 $.post() 返回“未定义”

> ID：15739519
> 
> 赞同：2
> 
> 时间：2013-04-01T07:36:33.690
> 
> 标签：jquery, ajax

有人可以帮我弄清楚为什么当我用 $.ajax() 调用 Web 服务时它会返回预期的数据，而当我用 $.post() 调用相同的服务时，返回的数据是“未定义的”？

请注意，在使用 google 的工具（对于 .post() 调用）检查响应时，我可以看到从服务器发回的数据，但不知何故，它对 .post() 调用的 .done() 函数不可用。

程序完成没有错误。

这是整个代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test01</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#btn01").click(function () {
                //.ajax type call
                $.ajax({
                    type: "POST",
                    url: "WebService1.asmx/GetData",
                    data: "{KenID:'11'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data)
                    {
                        $("#div01").html(data.d);
                    }
                });
            });
            $("#btn02").click(function () {
                // .post() type call
                $.post("WebService1.asmx/GetData", { KenID: "11" })
                    .done(function (data, status)
                    {
                        $("#div01").html("Data: " + data.d + "</br>Status: " + status);
                    })
                    .fail(function () { alert("error"); })
                    .always(function () { alert("completed"); });
            });
        });
    </script>
</head>
<body>
    <div id="div01">Here comes the result</div>
    <button id="btn01">Load Data with $.ajax : </button>
    <button id="btn02">Load Data with $.post : </button>
    <input id="KenID" value="11" />
</body>
</html> 
```

谢谢，

亚采克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:38:35.810

您需要定义响应`json`在`$.post`.

**例子**

```
$.post(
    "WebService1.asmx/GetData",
    { KenID: "11" },
    function(response)
    {
        //code
    }, 'json' // <-- HERE
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:51:26.160

它基本上是 $.post 是返回 xml 基本数据类型。如果您在控制台日志和响应选项卡中的 firebug 中看到，您将找到响应类型。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">test</string> 
```

因此，我建议您将 XML 响应转换为字符串数据类型。为此，请参阅： [http](http://api.jquery.com/jQuery.parseXML/) ://api.jquery.com/jQuery.parseXML/ 。

希望它会帮助你。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:02:18.053

请参考下面的代码片段。

```
$.post(""WebService1.asmx/GetData",", {id : $("#hID").val()}, function(data)
{
  doSomething( data.toString() );
});

function doSomething( data)
{
  // whatever
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T13:54:44.980

在启动服务器之前，您需要使用**urlencoded**解析 JSON 请求。

请注意在使用 urlencoder**之后而不是之前启动您的 http 服务器。**

例如。

```
app.use(express.urlencoded());

http.createServer(app).listen(3000) 
```

没有：$ node server.js

> 不明确的

与：$节点server.js

> { 描述： ''}
> 
> 数据已发布到服务器！

# android - 居中位图标记（Google Maps Android API v2）

> ID：15739526
> 
> 赞同：56
> 
> 时间：2013-04-01T07:37:10.780
> 
> 标签：android, centering, google-maps-android-api-2, android-drawable

当我从自定义位图中添加标记时，标记未以我指定的点为中心。

我像这样添加它：

```
 // ID tramo
    final int tramoId = tr.getId();
    // Nodos
    final Nodo[] nodos = tr.getNodos();

    final PolylineOptions p = new PolylineOptions();
    MarkerOptions m = new MarkerOptions();
    // Seteamos posicion de linea y marker
    m.position(semisuma(nodos));
    for (final Nodo n : nodos) {
        p.add(n.getLatLng());
    }
    // Color de linea y marker
    BitmapDescriptor icon = null;
    if (tr.getCapacidad() == 0) {
        p.color(0xFF000000);
        m = null;
    } else if (tr.getCapacidad() - tr.getPlazasOcupadas() == 0) {
        p.color(0xEEFF0000);
        final TextDrawable drawable = new TextDrawable(0, 0xEEFF0000,
                0xFFFFFFFF);
        icon = BitmapDescriptorFactory.fromBitmap(fromDrawable(drawable));
    } else {
        p.color(0xEE00FFFF);
        final TextDrawable drawable = new TextDrawable(0, 0xEE00FFFF,
                0xFFFFFFFF);
        icon = BitmapDescriptorFactory.fromBitmap(fromDrawable(drawable));
    }
    if (m != null) {
        m.title(String.valueOf(tramoId));
        m.icon(icon);
    }
    if (polylinesTramo.get(idTramo) != null) {
        polylinesTramo.get(idTramo).remove();
    }
    if (markersTramo.get(idTramo) != null) {
        markersTramo.get(idTramo).remove();
    }
    polylinesTramo.put(idTramo, map.getMap().addPolyline(p));
    if (marker != null) {
        markersTramo.put(idTramo, map.getMap().addMarker(m));
    } 
```

这是TextDrawable的代码：

```
package com.cidaut.blueparking.ui;

import android.graphics.Canvas;
import android.graphics.ColorFilter;
import android.graphics.Paint;
import android.graphics.PixelFormat;
import android.graphics.drawable.Drawable;

public class TextDrawable extends Drawable {

    private final String text;
    private final Paint paint;
    private final int centroX = 13;
    private final int centroY = 16;
    private final float textSize;
    private final float whereToDrawX;
    private final int bgColor;

    public TextDrawable(final int text, final int bgColor, final int textColor) {
        this(String.valueOf(text), bgColor, textColor);
    }

    public TextDrawable(final String text, final int bgColor, final int textColor) {
        this.text = text;
        this.bgColor = bgColor;
        this.paint = new Paint();
        paint.setColor(textColor);
        paint.setTextSize(14f);
        paint.setAntiAlias(true);
        paint.setFakeBoldText(true);
        paint.setStyle(Paint.Style.FILL);
        paint.setTextAlign(Paint.Align.LEFT);
        textSize = paint.measureText(text);
        whereToDrawX = centroX - (textSize / 2);
    }

    @Override
    public void draw(final Canvas canvas) {
        canvas.drawColor(bgColor);
        canvas.drawText(text, whereToDrawX, centroY, paint);
    }

    @Override
    public void setAlpha(final int alpha) {
        paint.setAlpha(alpha);
    }

    @Override
    public void setColorFilter(final ColorFilter cf) {
        paint.setColorFilter(cf);
    }

    @Override
    public int getOpacity() {
        return PixelFormat.TRANSLUCENT;
    }
} 
```

这是`fromDrawable`方法

```
protected Bitmap fromDrawable(final Drawable drawable) {
    final Bitmap bitmap = Bitmap.createBitmap(25, 25, Config.ARGB_8888);
    final Canvas canvas = new Canvas(bitmap);
    drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
    drawable.draw(canvas);
    return bitmap;
} 
```

我应该在我的代码中添加什么以使标记在其位置居中？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-08-13T13:20:58.650

只需将标记的锚点设置为 0.5 和 0.5（图标中间）。

```
...
MarkerOptions m = new MarkerOptions();
m.anchor(0.5f, 0.5f);
... 
```

默认锚点值为 (0.5f, 1.0f)。您可以在此处阅读有关[标记的信息](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html#setAnchor%28float,%20float%29)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T13:43:55.340

如果您使用[标记](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html)，则需要重新指定锚点以使图像居中。正如文档所说：“锚点：图像上将放置在标记的 LatLng 位置的点。默认为图像左侧和图像底部的 50%。”。

如果您希望图像默认居中，您可能应该考虑使用 GroundOverlay 而不是 Marker。请参阅[GroundOverlay](http://developer.android.com/reference/com/google/android/gms/maps/model/GroundOverlay.html)，“默认情况下，锚点距离图像顶部 50%，距离图像左侧 50%。”

# c# - WCF 主机服务，不带元数据的扩展，可在客户端使用已知合同

> ID：15739527
> 
> 赞同：1
> 
> 时间：2013-04-01T07:37:11.857
> 
> 标签：c#, wcf

有没有办法托管 wcf 服务：

*   无扩展
*   具有相对端点地址（服务器地址应该是自动知道的）
*   没有元数据（合同可供客户使用）
*   基本Http绑定

如果某事无法实现，我会接受。已经尝试过一种方法，但没有元数据 ->[其他问题](https://stackoverflow.com/questions/15728079/routetable-routes-make-my-own-proxy)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:45:29.257

如果您在 IIS 中托管 WCF (SOAP) 服务，则需要一个`service.svc`文件（或至少一个具有`.svc`扩展名的端点，在 .NET 4 中使用*无文件服务激活*），以便 IIS 了解这是一个 WCF SOAP 端点并且相应地路由请求。在 IIS 中，服务所在的虚拟目录基本上决定了服务端点的地址，因此您可以使用相对地址（相对于虚拟目录）来定义服务的端点地址。

如果您在托管应用程序（Windows NT 服务，或只是一个普通的 .NET 控制台应用程序）中自托管 WCF 服务，那么您不需要`.svc`文件 - 您的托管应用程序处理请求 - 但同时，因为没有“托管基础设施”，您需要定义一个**完全限定的“端点地址 - 您不能只使用相对地址（相对于什么？？）

因此，您可以*拥有*相对地址（在 IIS 中，但使用`.svc`文件），也可以*没有扩展名*（使用自托管，但必须提供完全限定的服务端点地址）。你不能同时拥有两者。

您的服务端点是否具有并公开元数据只是将服务行为添加（或*不*添加）`ServiceMetaData`到您的服务定义的问题。

# php - 删除 CI ubuntu 12.04 中的 index.php 文件

> ID：15739532
> 
> 赞同：3
> 
> 时间：2013-04-01T07:37:28.820
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite

我想从 CI 的文件路径中删除 index.php 文件。我正在使用 ubuntu 12.04 。我尝试了几乎所有的论坛结果，但没有成功。

我将 CI 文件夹放在此路径。

```
http://localhost/xxx/CI/ 
```

我有 apache rewrite mod enable 。

```
sudo a2enmod rewrite
Module rewrite already enabled 
```

我的 conf.php 文件中也有这个

```
$config['uri_protocol'] = 'AUTO';
$config['base_url'] = 'http://localhost/xxx/CI/'; 
$config['index_page'] = '';
$config['index_url'] = ''; 
```

我的 .htaccess 文件中有这个

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

.htaccess 文件位于此路径

```
http://localhost/xxx/CI/.htaccess 
```

它也可以通过 apache 启用

```
/etc/apache2/sites-available/default
AllowOverride All 
```

当我访问这样的文件时出现此错误

```
 http://localhost/xxx/CI/login/
 404 Error
 The requested URL /xxx/CI/login/ was not found on this server. 
```

任何帮助将不胜感激 。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T08:42:07.467

尝试使用以下`.htaccess`文件：

```
RewriteEngine On
RewriteBase /xxx/CI/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L,QSA] 
```

然后，将您的`uri_protocol`from更改`AUTO`为`PATH_INFO`：

```
$config['uri_protocol'] = 'PATH_INFO'; 
```

如果这开始将所有内容重新路由到默认控制器，则将其更改为`ORIG_PATH_INFO`：

```
$config['uri_protocol'] = 'ORIG_PATH_INFO'; 
```

**附加信息**

将这些行插入到您的文件中：

```
Options -Multiviews +FollowSymLinks
AllowOverride All 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:45:43.303

试试下面：

```
RewriteEngine On
RewriteBase /xxx/CI/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /folder/index.php/$1 [L] 
```

并检查必须启用 apache 的“rewrite_module”。

并且你的配置中的 index_page 应该是空白 $config['index_page'] = '';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:43:20.387

您的 htaccess 文件中有此代码吗

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# c# - 如何在引号内阅读 textbox1？

> ID：15739534
> 
> 赞同：0
> 
> 时间：2013-04-01T07:37:35.760
> 
> 标签：c#

我知道标题措辞不好，但我真的不知道如何解释它。我正在尝试读取文本框的值并使用它。下面是一个例子。

```
Jtag.Call(0x82254940, -1, 0, "c \"textBox1.Text\""); 
```

那是行不通的，因为它在一些引号之间，我也尝试过 +textBox1+ 但无济于事，所以我需要一些帮助让它工作。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T07:40:17.903

为了进行字符串插值（将变量的值插入到字符串中），在 C# 中，您可以使用任何一种`string.Format`（通常是首选方式）：

```
string command = string.Format("c \"{0}\"", textBox1.Text);
Jtag.Call(0x82254940, -1, 0, command); 
```

或字符串连接（使用`+`）：

```
string command = "c \"" + textBox1.Text + "\"";
Jtag.Call(0x82254940, -1, 0, command); 
```

我认为您的示例中令人困惑的部分是您需要引用该值，使用`\"`. 这会转义引号符号并使文字`"`出现在字符串中；它不标记字符串一部分的结尾。您需要关闭字符串：

```
string first = "string ending with a quote, here \"";
string second = "\" this one starts with a quote."; 
```

如果您在 Visual Studio 中启用了语法着色，那么应该很明显什么是字符串，什么不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:41:55.760

```
Jtag.Call(0x82254940, -1, 0, "c \"" + textBox1.Text + "\""); 
```

但为了清楚起见，我会接受罗杰斯的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:43:10.097

```
Jtag.Call(0x82254940, -1, 0, "c \"" + textBox1.Text + "\""); 
```

或使用`String.Format`：

```
Jtag.Call(0x82254940, -1, 0, String.Format("c \"{0}\"", textBox1.Text )); 
```

# php - 在 php/mysql 中哪个更快？文件操作或连接池

> ID：15739540
> 
> 赞同：0
> 
> 时间：2013-04-01T07:38:21.730
> 
> 标签：php, pdo, mysqli

我必须决定是否应该更改我的网络主机，因为我当前的主机不支持`mysqli`。目前我通过保存数据文件和使用`fopen, fwrite, fread`. 我正在考虑使用连接池将数据保存在 mysql 中。除了安全性（坦率地说，这并不是什么大问题）之外，mysql 中的数据搜索要容易得多。然而，用户每隔几秒就会访问一次 mysql 数据库，因此连接池是必须的，处理时间也是如此。

我已经计算过，没有连接池，mysql中的处理时间比文件操作慢很多倍。我想知道连接池和文件操作之间的延迟差异，以及连接池是否比通过 php 进行文件操作快得多。

如果我选择连接池，主机服务器上的处理负载会有什么不同。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:03:11.243

在大文件中查询和操作数据可能会比没有连接池的 mysql 更慢、更乏味。还有你必须处理的文件锁定、并发问题。

无论如何，尽量不要做任何过早的优化。使用适当的数据库，然后从那里收集性能统计信息。仅在必要时进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:44:28.523

每次用户从 Web 服务器请求特定资源时，PHP 脚本都会执行，然后终止。因此脚本不能共享资源，因此 PHP 中没有连接池；一旦脚本到达 EOF，apache 将释放所有资源。

**编辑**，至于您的实际问题，几乎不可能给出一个更快的通用答案，这取决于太多参数，例如磁盘类型、网络连接、服务器和数据库之间的跃点等。你会必须对不同的方法进行基准测试并将结果相互比较，以获得针对您的特定设置的明确答案。

在搜索类似主题时我发现了这个，它提供了关于 PHP 中的[连接池（PHP](https://stackoverflow.com/questions/39753/connection-pooling-in-php)中的连接池）的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:26:44.730

恐怕你的假设都是错误的。

首先，将文件与数据库进行比较。从来没有这样的问题。世界上所有的网络程序员都**已经在**使用各种数据库，无论是否使用连接池。从几MB的数据大小开始，数据库是**唯一**的解决方案。

第二，关于连接池。至少 90% 的站点在没有任何连接池的情况下愉快地工作，每秒甚至可以维持数十个请求。

我不知道你从哪里得到你的计算数字，但恐怕这个来源很不可靠。更好地使用 DB 启动您的站点，而无需连接池。解决您将面临的所有众多问题，将您的网站扩大到一百个在线用户，然后开始考虑连接池。

顺便说一句，如果您当前的主机确实支持 PDO，您甚至不需要移动。由于 PDO 似乎是当今 PHP**唯一可靠的 mysql 驱动程序。**但甚至不要从 mysqli 开始——它完全无法使用。

# javascript - Javascript：通过 Graph API 将图像从 Canvas 上传到 FB

> ID：15739555
> 
> 赞同：4
> 
> 时间：2013-04-01T07:39:50.710
> 
> 标签：javascript, facebook-graph-api, html5-canvas, multipartform-data

我正在画布中合成图像，通过使用和修剪附加信息来获取**base64图像数据。**`canvas.toDataURL('png')`

```
 var dataUrl = canvas.toDataURL('png');
 var escapedBase64Data = dataUrl.replace("data:image/png;base64,",""); 
```

之后，我尝试使用以下方式发布到 Facebook：

```
FB.api('/me/photos', 'post', { source:data}); 
```

照片（[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)）具有源属性。您将在此处放置照片的数据内容 ( **multipart/form-data** )。

我通过指定标头将我的**base64**编码数据转换为 **multipart/form-data 。**

结果如下所示：

```
--0.2242348059080541
Content-Disposition: file; name="file"; filename="image.png"
Content-Type: image/png
Content-Transfer-Encoding: base64

iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAYAAADL1t+KAAAbBElEQVR4Xu3dP4jre0LG4V2xsFVYEKy
...    
QAAAABJRU5ErkJggg==

--0.2242348059080541-- 
```

完成 FB api 调用后，我收到以下错误：

```
Object {message: "(#324) Requires upload file", type: "OAuthException", code: 324} 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:18:21.857

这是一个工作代码示例：

```
var boundary = '----ThisIsTheBoundary1234567890';
var formData = '--' + boundary + '\r\n'
formData += 'Content-Disposition: form-data; name="source"; filename="' + filename + '"\r\n';
formData += 'Content-Type: ' + mimeType + '\r\n\r\n';

for (var i = 0; i < imageData.length; ++i)
{
    formData += String.fromCharCode(imageData[ i ] & 0xff);
}

formData += '\r\n';
formData += '--' + boundary + '\r\n';
formData += 'Content-Disposition: form-data; name="message"\r\n\r\n';
formData += f.message + '\r\n'
formData += '--' + boundary + '--\r\n';

var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://graph.facebook.com/me/photos?access_token=' + authToken, true);
xhr.onload = xhr.onerror = function() {
    // error managment
};
xhr.setRequestHeader("Content-Type", "multipart/form-data; boundary=" + boundary);

//Send the request
xhr.sendAsBinary(formData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T23:44:16.167

这是一个简单的解决方案：

```
const dataURItoBlob = (dataURI) => {
    let byteString = atob(dataURI.split(',')[1]);
    let ab = new ArrayBuffer(byteString.length);
    let ia = new Uint8Array(ab);
    for (let i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }
    return new Blob([ia], {
        type: 'image/jpeg'
    });
}
const upload = async (response) => {
    let canvas = document.getElementById('canvas');
    let dataURL = canvas.toDataURL('image/jpeg', 1.0);
    let blob = dataURItoBlob(dataURL);
    let formData = new FormData();
    formData.append('access_token', response.authResponse.accessToken);
    formData.append('source', blob);

    let responseFB = await fetch(`https://graph.facebook.com/me/photos`, {
        body: formData,
        method: 'post'
    });
    responseFB = await responseFB.json();
    console.log(responseFB);
};
document.getElementById('upload').addEventListener('click', () => {
    FB.login((response) => {
        //TODO check if user is logged in and authorized publish_actions
        upload(response);
    }, {scope: 'publish_actions'})
}) 
```

来源： http: [//www.devils-heaven.com/facebook-javascript-sdk-photo-upload-from-canvas/](http://www.devils-heaven.com/facebook-javascript-sdk-photo-upload-from-canvas/)

# mysql - 查询不使用索引

> ID：15739558
> 
> 赞同：0
> 
> 时间：2013-04-01T07:40:05.427
> 
> 标签：mysql, indexing

我正在对 2 个表运行查询，但由于某种原因它没有使用索引。我一辈子都想不通。

这是我的表：`table1`和`table2`。表 1 是包含 154 行的类别列表。表 1 的表结构如下所示：

```
category_id (int11) - also has an index on it
name (varchar30) - also has an index on it
urltext (text)
nametext (text)

category_id     name    urltext   nametext
1           category1    blahblah     blahblah
2           category2    blahblah     blahblah
3           category3    blahblah     blahblah
4           category4    blahblah     blahblah
etc to rows
154           category154    blahblah     blahblah 
```

表 2 有 1+ 百万行，并且与产品类别相关。表字段结构如下所示：

```
row_id (bigint11) - also has an index
category_id (int3) - also has an index
product_id (int9) - also has an index 
```

表 2 中的数据如下所示：

```
row_id     category_id     product_id 
1               1            123456
2               4            123456
3               17            456789
4               42            456789
5               7            456789
6               88            888555 
```

这是我的查询：

```
select * 
from table2 
INNER JOIN table1 
ON table2.category_id=table1.category_id 
where table2.product_id = 123456; 
```

现在，当我对此查询进行解释时：

```
id   select_type  table type  possible_keys     key       key_len  ref                 rows  Extra
1    simple       table1 ALL    PRIMARY          NULL      NULL     NULL                 154
1    simple       table2 ref    product_id,...   poduct_id  10      category_id, const   1     Using Where 
```

任何产品通常只涉及 1 到 4 个不同的类别。因此，您会认为如果正确使用索引，而不是在解释结果中看到 table1 的 154 行，您会看到最多 4 行。

我最初将 table1.name 设置为`text`而不是`varchar(30)`，但结果仍然没有改变。如果这是一个随机使用的查询，这并不重要，但是这个查询每天都会被点击数万次。

我在这里做错了什么，这个查询没有使用可用的索引来大量减少行数？

我希望我提供了正确的信息。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:53:40.857

您的查询可以重新格式化为：

```
SELECT *
FROM table2
INNER JOIN table1 ON table2.category_id = table1.category_id
WHERE table2.product_id = 123456 
```

为了使其快速，应存在以下索引：

```
table1(category_id) 
```

快速查找`table1.category_id`。

和

```
table2(category_id, product_id) 
```

或者

```
table2(product_id, category_id) 
```

这个多列（复合）索引将同时满足`JOIN`条件和`WHERE`条件。

请注意，在`product_id`and上有单独的索引`category_id`是不够的。但是，如果您有复合索引 on `(category_id, product_id)`，您可以删除索引 on `(category_id)`，除非它是唯一索引（如主键）。

# iphone - Facebook curl 喜欢使用开放图的发布请求

> ID：15739559
> 
> 赞同：5
> 
> 时间：2013-04-01T07:40:13.763
> 
> 标签：iphone, ios, objective-c, facebook-graph-api, curl

我想`iOS`通过使用在我的应用程序中创建类似按钮

```
curl -X POST \
  -F 'access_token=USER_ACCESS_TOKEN' \
  -F 'object=OG_OBJECT_URL' \
  https://graph.facebook.com/[User FB ID]/og 
```

.likes 由`Open graph api`.

为此，我提出了发布请求，即

```
 NSString *stringurl=[NSString stringWithFormat:@"{access_token=AAAE08AxGmwghghghOWAxMZBz6jZAaRTUYTRMakJln3VdAeUju6E6tFn2I9feY5wtGatTm2KIgXoXYFZB0pTPQt2Oj0sNaRuX3AZDZD}&{object=http://www.google.com}&https://graph.facebook.com/100002097766610/og.likes"];

NSURL *url = [NSURL URLWithString: stringurl];
NSMutableURLRequest *request1 = [NSMutableURLRequest requestWithURL:url];

[request1 setURL:url];
[request1 setHTTPMethod:@"POST"];
[request1 setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

NSError *error;
NSURLResponse *response;
NSData *data = [NSURLConnection sendSynchronousRequest:request1 returningResponse:&response error:&error];
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"string..:%@",string); 
```

但我得到空字符串。可能是我制作了错误的 url 字符串。如果有人知道如何提出 curl post 请求。请给我一些想法。

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:09:02.220

我在下面附上了一些代码：

Http POST 请求的正文数据应该位于“Body”中，所以我使用了“setHttpBody:”方法。

```
NSString *userId = @"Your ID Facebook ID";
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/og.likes", userId]];
NSMutableURLRequest *request1 = [NSMutableURLRequest requestWithURL:url];
[request1 setURL:url];
[request1 setHTTPMethod:@"POST"];
NSString *body=[NSString stringWithFormat:@"access_token=YOUR_APP_ACCESS_TOKEN&object=OG_OBJECT_URL"];
[request1 setHTTPBody:[body dataUsingEncoding:NSUTF8StringEncoding]];

NSError *error;
NSURLResponse *response;
NSData *data = [NSURLConnection sendSynchronousRequest:request1 returningResponse:&response error:&error];
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"string..:%@",string); 
```

# magento - Magento如何在顶部菜单中显示菜单

> ID：15739561
> 
> 赞同：2
> 
> 时间：2013-04-01T07:40:22.973
> 
> 标签：magento, magento-1.7

我真的是 Magento 的新手。我有这段代码来显示顶部菜单。

```
<?php $_menu = $this->renderCategoriesMenuHtml(0,'level-top') ?>
<div class="nav-container">
    <ul id="nav">
        <li class="level0 first homelink"><a href="<?php echo $this->getBaseUrl(); ?>"><span><?php echo $this->__('Home') ?></span></a></li>
        <?php if($_menu): ?>
            <?php echo $_menu ?>
        <?php endif ?>
        <?php $additionalLink = themeOptions('additionalLink'); ?>
        <?php $additionalLinkUrl = themeOptions('additionalLinkUrl'); ?>
        <?php if($additionalLinkUrl && $additionalLink): ?>
            <li class="level0 clearence"><a href="<?php echo $additionalLinkUrl ?>" title="<?php echo $additionalLink ?>"><span><?php echo $additionalLink ?></span></a></li>
        <?php endif ?>        
    </ul>
</div> 
```

现在这仅将 Home 显示为菜单。我想显示其他菜单，例如关于我们、联系人，并且还会有一些带有子类别的类别。我希望我的菜单看起来像这样 [http://8theme.com/demo/decostore/](http://8theme.com/demo/decostore/)。那么有人可以告诉我该怎么做吗？任何帮助和建议都将是非常可观的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:43:40.590

在这里，您在主题文件夹 /template/page/html/topMenu.phtml 文件中使用了顶部菜单（已创建）

这里包括类别以及使用 with 块设置的客户 url

# vb.net - 此错误的解决方案“InvalidArgument='0' 的值对 'index' 无效。”

> ID：15739570
> 
> 赞同：0
> 
> 时间：2013-04-01T07:41:01.947
> 
> 标签：vb.net

错误的原因是当我触发事件时，我试图禁用它以防止错误。但是，再次启用它时。当触发事件时，错误将再次出现。

我搜索了一些解决方案，例如检查 ListView 中是否存在项目

```
If ListView2.Items.Count > 0 Then 
```

我还发现了一些处理事件的代码。但是，它似乎什么也没做。

```
AddHandler ListView2.SelectedIndexChanged, AddressOf ListView2_SelectedIndexChanged 
```

我认为删除项目将删除错误。但是，它没有用。

这是代码：

```
For i = ListView2.Items.Count - 1 To 0 Step -1
  ListView2.Items.Remove(ListView2.Items(i))
Next i 
```

以下是活动的完整代码：

```
Private Sub ListView2_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ListView2.SelectedIndexChanged
    If ListView2.Items.Count > 0 Then
        TransactionID.Text = ListView2.SelectedItems(0).Text
        Label6.Left -= 190
        Label7.Left -= 190
        GroupBox1.Left -= 190
        ListView2.Left -= 190

        Button2.Visible = True
        ListView1.Visible = True
        GroupBox2.Visible = True
        Label4.Visible = True
        Label5.Visible = True
        ListView2.Enabled = False
        AddHandler ListView2.SelectedIndexChanged, AddressOf ListView2_SelectedIndexChanged
    End If
End Sub 
```

我发现错误的原因是我正在尝试选择 ListView2，但是我无法再访问它，Listview 中没有项目或者我没有选择它。奇怪的是，我确保 Listview 有项目并且 Listview 已启用。

所以是的......这可能是什么解决方案？

编辑：添加了绑定列表视图的代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If ComboBox1.Text = "" Then
        MsgBox("Please specify status of transaction!")
        ComboBox1.Focus()
    End If
    Dim conn As MySqlConnection
    conn = New MySqlConnection()
    Label6.Text = 0

    time = dateTo.Text
    format = "yyyy-MM-dd"
    outTo = (time.ToString(format))
    outTo = outTo & " " & "23:59:59"

    time = dateFrom.Text
    format = "yyyy-MM-dd"
    outFrom = (time.ToString(format))
    outFrom = outFrom & " " & "00:00:00"

    conn.ConnectionString = "server=localhost;user id=root;password=zhakige;database=singin"
    Dim strSQL = "SELECT transaction_id, transaction_status, transaction_staffusername ,transaction_date, transaction_totalprice FROM `transaction` WHERE transaction_date BETWEEN '" & outFrom & "' AND '" & outTo & "' AND transaction_status = '" & ComboBox1.Text & "';"
    conn.Open()
    Dim cmd = New MySqlCommand(strSQL, conn)
    Dim dr = cmd.ExecuteReader()
    ListView2.Items.Clear()

    Do While dr.Read()
        a = (dr.Item("transaction_id").ToString())
        b = (dr.Item("transaction_status").ToString())
        c = (dr.Item("transaction_staffusername").ToString())
        time = (dr.Item("transaction_date"))
        format = "yyyy-MM-dd"
        output = (time.ToString(format))
        d = output
        e2 = (dr.Item("transaction_totalprice").ToString())

        Dim lv As ListViewItem = ListView2.Items.Add(a)
        lv.SubItems.Add(b)
        lv.SubItems.Add(c)
        lv.SubItems.Add(d)
        lv.SubItems.Add(e2)
        Label6.Text += Val(e2)

    Loop
    If ListView2.Items.Count <= 0 Then
        MsgBox("No record found for specified options")
    End If

    dr.Close()
    cmd.Dispose()
    conn.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:07:28.187

更改此代码

```
For i = ListView2.Items.Count - 1 To 0 Step -1
  ListView2.Items.Remove(ListView2.Items(i))
Next i 
```

至

```
If ListView2.Items.Count > 0 Then
  For i = ListView2.Items.Count - 1 To 0 Step - 1
    ListView2.Items.Remove(ListView2.Items(i))
  Next i
End If 
```

# 更新

在这段代码中

```
Private Sub ListView2_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ListView2.SelectedIndexChanged
  If ListView2.Items.Count > 0 Then
    TransactionID.Text = ListView2.SelectedItems(0).Text
    Label6.Left -= 190
    Label7.Left -= 190
    GroupBox1.Left -= 190
    ListView2.Left -= 190

    Button2.Visible = True
    ListView1.Visible = True
    GroupBox2.Visible = True
    Label4.Visible = True
    Label5.Visible = True
    ListView2.Enabled = False
    AddHandler ListView2.SelectedIndexChanged, AddressOf ListView2_SelectedIndexChanged
  End If
End Sub 
```

说的那一行

```
 ListView2.Enabled = False 
```

禁用 ListView2，因此应该解释 ListView2 被禁用的原因和位置

还有……这条线

```
AddHandler ListView2.SelectedIndexChanged, AddressOf ListView2_SelectedIndexChanged 
```

尝试将事件处理程序分配给声明它的同一例程！

```
Private Sub ListView2_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ListView2.SelectedIndexChanged 
```

所以它很可能根本没有什么新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:46:34.870

[MSDN 说](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selecteditems.aspx)

> 一个 ListView.SelectedListViewItemCollection，其中包含控件中选定的项目。如果当前未选择任何项目，则返回一个空的 ListView.SelectedListViewItemCollection。

因此，如果您没有任何 SelectedItems，则不能使用索引 0 来读取某些值。将您的代码更改为

```
If ListView2.SelectedItems.Count > 0 Then
   .... 
```

# perl - Bioperl 和 Samtools

> ID：15739579
> 
> 赞同：0
> 
> 时间：2013-04-01T07:41:35.170
> 
> 标签：perl, bioperl

如何使用 Bioperl 运行“mpileup”？

尝试使用 Bio::Tools::Run::Samtools 运行 mpileup 时，我得到 'mpileup' 未注册。我究竟做错了什么？任何指向正确方向的指针表示赞赏......谢谢你们......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:18:49.070

简短的回答是您无法`mpileup`使用 BioPerl-Run 运行，因为正如您的错误消息所述，该命令似乎没有被列为可用于 samtools 的命令。你可能想在 bioperl-listserv 上提出这个问题，希望有人会添加这个功能。

# titanium - 使用 Titanium 的窗口中心的 iOS 后退按钮

> ID：15739582
> 
> 赞同：0
> 
> 时间：2013-04-01T07:41:40.410
> 
> 标签：titanium, titanium-mobile

我正在尝试在窗口中心放置一个后退按钮。我可以使用图像视图来实现相同的目的。但是，导航到除最后一个窗口之外的前一个窗口都失败了。

假设我已经遍历了三个窗口 A->B->C。从窗口'C'按钮将我带到窗口'B'。但是从窗口“B”单击相同的按钮不会引起任何响应（理想情况下，它应该带我到窗口“A”）

我使用的代码如下

```
{
    var imgView = Ti.UI.createImageView({
        top:'50%',
        left : 0,
        image : "icons/back.png"
    });

    imgView.addEventListener('click', function(){
        self.close();
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:30:29.597

在包含新窗口的每个文件中添加上述行，因为您使用 url 方法打开新窗口。

```
var currentWindow = Ti.UI.currentWindow; 
```

然后关闭窗口如下

```
imgView.addEventListener('click', function(){
    currentWindow.close();
}); 
```

这将关闭当前窗口，因为[currentWindow](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI-property-currentWindow)代表活动窗口

我将添加工作示例：

**应用程序.js**

```
var win = Ti.UI.createWindow({
    backgroundColor : 'white'
});

var back = Ti.UI.createButton({
    title : 'To win1 ',
    width   : '70%'
});

back.addEventListener('click', function(){
    var win1 = Ti.UI.createWindow({
        url : 'win1.js',
        backgroundColor : 'white',
        layout  : 'vertical'
    });
    win1.open();
});
win.add(back);
win.open(); 
```

**win1.js**

```
var self = Ti.UI.currentWindow;

var back = Ti.UI.createButton({
    title : 'Back to home',
    top     : 20,
    width   : '70%'
});

var next = Ti.UI.createButton({
    title : 'To win2',
    top     : 20,
    width   : '70%'
});

self.add(back);
self.add(next);

back.addEventListener('click',function(){
    self.close();
});

next.addEventListener('click', function(){
    var win2 = Ti.UI.createWindow({
        url : 'win2.js',
        backgroundColor : 'white',
        layout      : 'vertical'
    });
    win2.open();
}); 
```

**win2.js**

```
var self = Ti.UI.currentWindow;

var back = Ti.UI.createButton({
    title : 'Back to win1',
    top     : 20,
    width   : '70%'
});

self.add(back);

back.addEventListener('click',function(){
    self.close();
}); 
```

# ajax - spring mvc + thymeleaf 应用中的ajax

> ID：15739584
> 
> 赞同：2
> 
> 时间：2013-04-01T07:41:51.133
> 
> 标签：ajax, spring-mvc, thymeleaf

我在玩spring mvc + thymeleaf。

但是我想与 ajax 集成（部分页面渲染）。

你能推荐我一些示例代码/教程吗？

我只发现以下内容：

*   spring mvc + thymeleaf + spring web flow + apache tile + spring javascript ( [http://blog.springsource.org/2013/03/26/bringing-new-life-to-spring-travel-with-thymeleaf/](http://blog.springsource.org/2013/03/26/bringing-new-life-to-spring-travel-with-thymeleaf/) )
*   spring mvc + apache tile + spring javascript ( [http://maciekmoczkowski.blogspot.de/2009/09/partial-rendering-with-spring-mvc-and.html](http://maciekmoczkowski.blogspot.de/2009/09/partial-rendering-with-spring-mvc-and.html) )

但是我根本对使用 apache tile 或 spring web flow 不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:16:19.280

为此目的，瓷砖是强制性的 - 根据站点文档
[http://docs.spring.io/spring-webflow/docs/current/reference/html/spring-js.html#spring-js-ajax](http://docs.spring.io/spring-webflow/docs/current/reference/html/spring-js.html#spring-js-ajax)

请参阅标题为“12.5\. 处理 Ajax 请求”的部分

此链接告诉您所需的只是您请求的一个参数，名为片段
[http://brosan.net/2012/09/25/partials-with-spring-mvc-3-1-and-apache-tiles/](http://brosan.net/2012/09/25/partials-with-spring-mvc-3-1-and-apache-tiles/)

# android - .ser 文件在 Android 中的最大大小

> ID：15739585
> 
> 赞同：0
> 
> 时间：2013-04-01T07:41:53.340
> 
> 标签：android, file, size

我已经使用**Map Dictionary=new Hashtable() 在 Android 中实现了字典；**. 我已将字典值写入 .ser 文件，如下所示。

```
 FileOutputStream fos = new FileOutputStream(dictionaryfile);
 ObjectOutputStream oos = new ObjectOutputStream(fos);
 oos.writeObject(map);
 oos.close(); 
```

字典文件是一个 .ser 文件。我想知道 .ser 文件的最大大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:44:22.487

如果您在 SD 卡上保存，则文件的最大大小是卡上允许的最大大小。如果是 FAT32 格式，则为 4 GB。

# nservicebus - System.Net.HttpListenerException：无法侦听前缀“xxxx”，因为它与机器上的现有注册冲突

> ID：15739590
> 
> 赞同：1
> 
> 时间：2013-04-01T07:42:02.390
> 
> 标签：nservicebus, nservicebus3, nservicebus-distributor

每当部署我们的组件时，我们都会收到以下异常。有时组件本身不会启动，有时服务控制台可能会说已启动但服务不会处理任何消息。错误非常简单。还有一个 HttpListener 仍在监听前缀。

```
NServiceBus.Hosting.GenericHost System.Exception: Failed to start listener for http://localhost/products/ make sure that you have admin priviliges ---> System.Net.HttpListenerException: Failed to listen on prefix 'http://localhost:80/products/' because it conflicts with an existing registration on the machine.
   at System.Net.HttpListener.AddAllPrefixes()
   at System.Net.HttpListener.Start()
   at NServiceBus.Gateway.Channels.Http.HttpChannelReceiver.Start(String address, Int32 numWorkerThreads) in c:\BuildAgent\work\nsb.master_6\src\gateway\NServiceBus.Gateway\Channels\Http\HttpChannelReceiver.cs:line 30
   --- End of inner exception stack trace ---
   at NServiceBus.Gateway.Channels.Http.HttpChannelReceiver.Start(String address, Int32 numWorkerThreads) in c:\BuildAgent\work\nsb.master_6\src\gateway\NServiceBus.Gateway\Channels\Http\HttpChannelReceiver.cs:line 37
   at NServiceBus.Gateway.Receiving.GatewayReceiver.Start(Address localAddress) in c:\BuildAgent\work\nsb.master_6\src\gateway\NServiceBus.Gateway\Receiving\GatewayReceiver.cs:line 38
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start(Action startupAction) in c:\BuildAgent\work\nsb.master_6\src\unicast\NServiceBus.Unicast\UnicastBus.cs:line 867
   at NServiceBus.Hosting.GenericHost.Start() in c:\BuildAgent\work\nsb.master_6\src\hosting\NServiceBus.Hosting\GenericHost.cs:line 34 
```

当我们进行深度分析时。

1.  此问题仅在您运行 NServiceBus.Master 配置文件时发生
2.  仅当您从服务控制台执行服务重新启动时才会发生此问题
3.  无论你运行多少个 WorkerThread

让我们困惑的是，当我们更深入地阅读 NSB 代码时，我们发现在对象 Dispose 期间 HttpListener 是关闭的。除此之外，当您停止服务时，整个进程本身都会被杀死，因此机器上不会有任何对象来监听给定的 URL 前缀。但是，我们错了。当我们分析很多闭包时，我们发现即使在 Service-Console 认为该服务已停止之后， NServinceBus.Host 进程仍在运行。每当我们在服务控制台上停止服务时，该进程在机器上仍然处于活动状态，并且需要更长的时间才能完全关闭。因此，当我们执行重新启动时，有可能存在多个当前服务的进程实例——一个正在尝试启动，另一个仍在尝试停止。我们确认重启过程会抛出上述异常。

我们对正在关闭的进程进行了转储。我们发现，尽管服务控制台显示状态为已停止，但进程中仍有后台线程处于活动状态。Dispose 期间有很多锁/ObjWait。确保停止的服务尚未关闭 HttpListener 对象。

```
 Child SP               IP Call Site
000000001f19e048 00000000778818ca [GCFrame: 000000001f19e048] 
000000001f19e118 00000000778818ca [HelperMethodFrame_1OBJ: 000000001f19e118] System.Threading.Monitor.ObjWait(Boolean, Int32, System.Object)
000000001f19e230 000007fe99d57ccb System.Transactions.CommittableTransaction.Commit()
000000001f19e2d0 000007fe99d577df System.Transactions.TransactionScope.InternalDispose()
000000001f19e3c0 000007fe99d56f1c System.Transactions.TransactionScope.Dispose()
000000001f19e590 000007fe99c4a3b5 NServiceBus.Utils.TransactionWrapper.RunInTransaction(System.Action, System.Transactions.IsolationLevel, System.TimeSpan)
000000001f19e610 000007fe99c45b2b NServiceBus.Unicast.Transport.Transactional.TransactionalTransport.Process()
000000001f19e680 000007fe99c455cb NServiceBus.Utils.WorkerThread.Loop()
000000001f19e6d0 000007fef6fdf8a5 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
000000001f19e830 000007fef6fdf609 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
000000001f19e860 000007fef6fdf5c7 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
000000001f19e8b0 000007fef6ff2d21 System.Threading.ThreadHelper.ThreadStart()
000000001f19ebc8 000007fef81cf713 [GCFrame: 000000001f19ebc8] 
000000001f19eef8 000007fef81cf713 [DebuggerU2MCatchHandlerFrame: 000000001f19eef8] 
000000001f19f0d8 000007fef81cf713 [ContextTransitionFrame: 000000001f19f0d8] 
000000001f19f2c8 000007fef81cf713 [DebuggerU2MCatchHandlerFrame: 000000001f19f2c8] 
```

我们发现，HttpListener 处于活动状态并正在侦听。

```
 Child SP               IP Call Site
000000002038e2f8 000000007788135a [InlinedCallFrame: 000000002038e2f8] System.Net.UnsafeNclNativeMethods+HttpApi.HttpReceiveHttpRequest(System.Runtime.InteropServices.CriticalHandle, UInt64, UInt32, HTTP_REQUEST*, UInt32, UInt32*, System.Threading.NativeOverlapped*)
000000002038e2f8 000007fe99c6a2f8 [InlinedCallFrame: 000000002038e2f8] System.Net.UnsafeNclNativeMethods+HttpApi.HttpReceiveHttpRequest(System.Runtime.InteropServices.CriticalHandle, UInt64, UInt32, HTTP_REQUEST*, UInt32, UInt32*, System.Threading.NativeOverlapped*)
000000002038e2b0 000007fe99c6a2f8 DomainBoundILStubClass.IL_STUB_PInvoke(System.Runtime.InteropServices.CriticalHandle, UInt64, UInt32, HTTP_REQUEST*, UInt32, UInt32*, System.Threading.NativeOverlapped*)
000000002038e3b0 000007fe99c697a4 System.Net.HttpListener.GetContext()
000000002038e4d0 000007fe99c6924f NServiceBus.Gateway.Channels.Http.HttpChannelReceiver.HttpServer()
000000002038e530 000007fef6fdf8a5 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
000000002038e690 000007fef6fdf609 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
000000002038e6c0 000007fef6fdf5c7 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
000000002038e710 000007fef6ff2d21 System.Threading.ThreadHelper.ThreadStart()
000000002038ea28 000007fef81cf713 [GCFrame: 000000002038ea28] 
000000002038ed58 000007fef81cf713 [DebuggerU2MCatchHandlerFrame: 000000002038ed58] 
000000002038ef38 000007fef81cf713 [ContextTransitionFrame: 000000002038ef38] 
000000002038f128 000007fef81cf713 [DebuggerU2MCatchHandlerFrame: 000000002038f128] 
```

**问题：为什么服务控制台报告服务已停止，即使该进程在计算机上仍处于活动状态**

**注意：**要重现此问题，您必须使用 NServiceBus.Master 配置文件将主机安装为 Windows 服务并尝试重新启动服务，您可能需要更多尝试才能解决此问题。

**更新：**

当我在 HttpChannelReceiver.Start() 上阅读 NSB 代码时，它会在新线程上启动侦听器。

1.  此侦听器线程是前台线程。（所有其他工作线程都是 BG 线程）
2.  没有停止信号进入这个前台线程
3.  没有保存此线程引用的变量/字段 - 中止是不可能的。

这个监听线程只有在ServiceHost杀死当前进程的内存时才回收，直到ServicHost收集到它，这个线程才会被阻止退出当前进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:23:52.017

这应该已经在 v4 中修复，请参阅[https://github.com/NServiceBus/NServiceBus/blob/4.0.0/src/NServiceBus.Core/Gateway/Channels/Http/HttpChannelReceiver.cs#L41](https://github.com/NServiceBus/NServiceBus/blob/4.0.0/src/NServiceBus.Core/Gateway/Channels/Http/HttpChannelReceiver.cs#L41)

# c# - 为什么 NLog 在记录大量消息时会丢失一些消息？

> ID：15739591
> 
> 赞同：9
> 
> 时间：2013-04-01T07:42:09.557
> 
> 标签：c#, .net, logging, nlog

我尝试使用设置测试 NLog 性能（最新版本）：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" autoReload="true">
    <variable name="basePath" value="c:\logs\" />
    <variable name="msgFormat" value="${message}" />
    <targets async="true">
        <target name="file"
                xsi:type="File"
                fileName="${basePath}/${logger}/${date:format=yyyy}/${date:format=MMMM}/log-${date:format=yyMMdd}-${level}.log"
                layout="${msgFormat}"
                concurrentWrites="true" />
    </targets>
    <rules>
        <logger name="*" minlevel="Debug" writeTo="file"/>
    </rules>
</nlog> 
```

并运行此代码：

```
var msg = "this is example string for logging test. it's not very long, but not very short";
var count = 20000;
Parallel.For(0, count, x => nlog.Info(msg)); 
```

NLog 写入文件，但当文件大小达到 1MB 时，它会停止写入。我尝试使用简单的`for`循环，但它对我没有帮助。而且我尝试使用[内部日志记录](https://github.com/NLog/NLog/wiki/Internal-logging)，但没有错误，顺便说一句，我在那里看到了这个字符串：

> 2013-04-01 11:36:18.2458 跟踪打开 c:\logs/NLogTest/2013/April/log-130401-Info.log 与 concurrentWrite=False

很奇怪，因为[concurrentWrites](https://github.com/NLog/NLog/wiki/File-target#performance-tuning-options)默认值是`true`，而且我已经在 config.xml 中设置了这个值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T20:20:41.490

问题在于`AsyncWrapper`s的默认值`QueueLimit`，即 10000。

该值决定了允许写入的消息队列有多大，问题出现是因为在将任何内容写入文件之前，所有 20000 条消息都已排队，这会导致 NLog 丢弃最后 10000 条消息。

不幸的是，使用该属性时无法更改`async`，您必须`AsyncWrapper`手动定义才能控制`QueueLimit`，这是这样完成的：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" autoReload="true">
    <variable name="basePath" value="c:\logs\" />
    <variable name="msgFormat" value="${message}" />
    <targets async>
        <target name="asyncWrapper" xsi:Type="AsyncWrapper" queueLimit="20000">
            <target name="file"
                xsi:type="File"
                fileName="${basePath}/${logger}/${date:format=yyyy}/${date:format=MMMM}/log-${date:format=yyMMdd}-${level}.log"
                layout="${msgFormat}"
                concurrentWrites="true" />
       </target>
    </targets>
    <rules>
        <logger name="*" minlevel="Debug" writeTo="file"/>
    </rules>
</nlog> 
```

其中 QueueLimit 设置为 20000。

`OverflowAction`如果您需要对未放入队列的丢弃消息执行其他操作，您还可以更改，请参阅[AsyncWrapper](https://github.com/NLog/NLog/wiki/AsyncWrapper-target)文档以获取更多信息。选项是阻止、丢弃或增长。

# ios - ios Javascript OnClick 函数

> ID：15739592
> 
> 赞同：0
> 
> 时间：2013-04-01T07:42:15.930
> 
> 标签：ios, objective-c

我已经从服务器加载了一个 HTML 文件并将其显示在`UIWebview`其中，其中包含`OnClick`该文件中的一个函数，当用户 OnClicks 时，我将获得一个视频 URL。我想在**iOS** `videoplayer`中打开该视频网址。我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:36:39.373

如果您有一个 javascript 函数，该函数在单击“获取视频 URL”按钮时返回 URL，如下所示：

```
function getVideoURL() {
  // do processing to fetch the actual video URL here

  window.location = "http://www.domain.com/videos/1";
} 
```

并且按钮处理程序设置为如下所示：

```
<a target="_blank" href="javascript:getVideoURL();" class="btn-image GetVideo">&#32;</a> 
```

那么您必须在视图控制器类中为 UIWebView 的以下委托方法提供实现：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

在此之后，您可以使用 java 脚本请求中的相对路径

```
 request.mainDocumentURL.relativePath 
```

在委托中引用从 Java 脚本方法返回的 URL。您可以使用获取的 URL 打开 iOS 视频播放器并播放视频，如下所示：

```
MPMoviePlayerController* moviePlayer=[[MPMoviePlayerController alloc]initWithContentURL:[NSURL URLWithString: strurl]];
moviePlayer.fullscreen = YES;  
[moviePlayer play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:15:22.783

您可以使用`stringByEvaluatingJavaScriptFromString`.

但是我们需要知道具体的`onClick`功能是什么？它是否直接返回视频URL？或者它会修改 HMTL 以显示该视频 URL？

如果直接返回 videoURL：

```
NSString *videoURL = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById("yourElementID").click();"]; 
```

如果没有，则需要在调用 onClick 函数后解析 videoURL 的 HTML。

# jquery - 单击后在 Bootstrap 选项卡中加载内容

> ID：15739593
> 
> 赞同：0
> 
> 时间：2013-04-01T07:42:16.540
> 
> 标签：jquery, twitter-bootstrap

单击选项卡后，我正在尝试在选项卡中加载内容。我的代码在推特引导程序中是这样的：

```
<div id="myTabContent" class="tab-content">
    <div class="tab-pane active in" id="home">
        <!-- content 1-->
    </div>

    <div class="tab-pane fade" id="alumnos">
        <!-- content 2-->
    </div>
</div> <!-- <div id="myTabContent"> --> 
```

现在我正在加载页面上的所有选项卡内容，但是当我单击选项卡时，我不知道如何包含外部内容。有谁能够帮我？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:41:40.047

您可以将按钮放在想要加载的区域，以便在单击它们时加载。

# spring - 未调用自定义 JSR 303 验证

> ID：15739597
> 
> 赞同：2
> 
> 时间：2013-04-01T07:42:48.500
> 
> 标签：spring, spring-mvc

我的自定义 JSR 303 验证没有被调用。这是我的代码

我的弹簧配置有

```
<mvc:annotation-driven /> 
```

我的控制器的处理程序方法：

```
@RequestMapping(value="update", method = RequestMethod.POST , 
                consumes="application/json" , 
                produces="application/json"))
@ResponseBody
public  String update(@Valid @RequestBody MyBean myBean){
    return process(myBean);
} 
```

MyBean（使用 ValidMyBeanRequest 注释）：

```
@ValidMyBeanRequest
public class MyBean {

    private int id;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }
} 
```

ValidMyBeanRequest 注释：

```
@Target({ TYPE })
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = {MyBeanValidator.class})
public @interface ValidMyBeanRequest {
    String message() default "{validMyBeanRequest.message}";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
} 
```

MyBeanValidator 类：

```
public class MyBeanValidator implements 
             ConstraintValidator<ValidMyBeanRequest, MyBean> {

    @Override
    public void initialize(ValidMyBeanRequest constraintAnnotation) {
        // TODO Auto-generated method stub
    }

    @Override
    public boolean isValid(MyBean myBean, ConstraintValidatorContext context) {
        boolean isValid = true;

        int id = myBean.getId();
        if(id == 0){
            isValid = false;
        }
        return isValid;
    }
} 
```

我的 http POST 请求具有以下 JSON 数据：

```
{id:100} 
```

问题是 MyBeanValidator 的 isValid 没有被调用。我正在使用 Spring 3.1.0 并且 HibernateValidator 在类路径中。

请看看我错过了什么？

**更新**：更新处理程序方法以包括 POST 请求类型和消费，产生值。还包括我的带有 JSON 数据的 http 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:09:10.837

假设您确实获得了正确的模型，在这种情况下，您所做的一切都是正确的，除了一件事：您需要手动处理验证结果。

为此，您需要将[BindingResult](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/BindingResult.html)对象添加到处理程序参数列表中，然后以您希望的方式处理验证约束：

```
@RequestMapping(value="update")
@ResponseBody
public  String update(@Valid @ModelAttribute @RequestBody MyBean myBean, BindingResult result) {
    if (result.hasErrors()){
        return processErrors(myBean);
    }
    return process(myBean);
} 
```

# java - 如果用户未能选择 RadioButton，则使用 JAR 访问 PDF 文件

> ID：15739599
> 
> 赞同：0
> 
> 时间：2013-04-01T07:42:54.917
> 
> 标签：java, jar

如果用户未能选择单选按钮，我想从我的 JAR 中复制一个 PDF 文件。我遇到的问题是控制台报告 java.io.FileNotFoundException: file:/home/geeky/workspace/TabSync/bin/ndg/co/uk/TabSync/nullpdf.pdf (No such file or directory) 即使文件在那里。如果我将声明为 No such file... 的路径复制到 Thunar 中，则文件会立即打开，因此路径是正确的。

代码如下：

```
 URL nopathbrain = getClass().getResource("/ndg/co/uk/TabSync/nullpdf.pdf");

////////////////////////////////////////////////////////////////////////////////////////
        public void actionPerformed(ActionEvent arg0) {

            try{
            //set the busy cursor while building the sync files
             setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));

            if (radioButton1.isSelected()) {
                filepathbrain1 = txtPath1.getText();
                System.out.println(filepathbrain1);
            } else {
                System.out.println(nopathbrain);
                filepathbrain1 = String.valueOf(nopathbrain); 
            }
copysource(); 
```

copysource() 看起来像这样

```
public void copysource() {
    try{

        File afile =new File(filepathbrain1);
        File bfile =new File(buildpath +"/documents/1.pdf");

        FileInputStream inStream = new FileInputStream(afile);
        FileOutputStream outStream = new FileOutputStream(bfile);

        byte[] buffer = new byte[1024];

        int length;
        //copy the file content in bytes 
        while ((length = inStream.read(buffer)) > 0){

            outStream.write(buffer, 0, length);
        } //end while
        inStream.close();
        outStream.close(); 
```

jar -tvf 的输出是：

```
 0 Sun Mar 31 09:51:56 BST 2013 ngd/
     0 Sun Mar 31 09:51:56 BST 2013 ngd/co/
     0 Sun Mar 31 09:51:56 BST 2013 ngd/co/uk/
     0 Sun Mar 31 09:51:56 BST 2013 ngd/co/uk/TabSync/
   806 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/About$1.class
   556 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/About$2.class
  4762 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/About.class
  1802 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/Help.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$1.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$10.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$11.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$12.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$13.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$14.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$15.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$16.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$17.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$18.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$19.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$2.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$20.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$21.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$22.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$23.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$24.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$25.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$26.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$27.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$28.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$29.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$3.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$30.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$31.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$32.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$33.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$34.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$35.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$36.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$37.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$38.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$39.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$4.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$40.class
  4765 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$41.class
   723 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$42.class
  1185 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$43.class
   697 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$44.class
  1220 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$45.class
   995 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$46.class
   781 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$47.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$5.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$6.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$7.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$8.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$9.class
  2097 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$Field1Listener.class
 47217 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main.class
  1260 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/FileFiltererpdf.class
  1260 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/FileFiltererjpg.class
991552 Wed Jul 27 19:13:00 BST 2011 ngd/co/uk/TabSync/Coalition_v2.ttf
991552 Wed Jul 27 19:13:00 BST 2011 Coalition_v2.ttf
409717 Thu Mar 21 14:15:32 GMT 2013 nullpdf.pdf 
```

我遇到的问题是，当未选择单选按钮时，JAR 中的 PDF 副本不起作用。如果我在桌面上提供文件的手动路径，那么副本工作正常（所以我很高兴 copysource() 工作正常，它只是为了完整性而包含在内）。

在这里编辑：

我现在正在尝试通过临时文件访问 pdf，因为似乎我应该使用 Stream 来获取资源，但我仍然收到文件未找到异常。代码：

```
//write the null file to tmp for copy
         try {
                java.io.InputStream iss = getClass().getResourceAsStream("/nullpdf.pdf");
                byte[] data = new byte[iss.available()];
                iss.read(data);
                iss.close();
                String tempFile = "file";
                File temp = File.createTempFile(tempFile, ".pdf");
                FileOutputStream fos = new FileOutputStream(temp);
                fos.write(data);
                fos.flush();
                fos.close();
            nopathbrain = tempFile +".pdf";
            } catch (IOException ex) {
                ex.printStackTrace();
                System.out.println("TEMP FILE NOT CREATED - ERROR in brainradiocheck");
            } 
```

我认为临时文件创建正常，但是如何将其文件路径作为字符串返回？我想将临时文件的文件路径设置为 nopathbrain。

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:44:02.247

```
//write the null file to tmp for copy
         try {
                java.io.InputStream iss = getClass().getResourceAsStream("/nullpdf.pdf");
                byte[] data = new byte[iss.available()];
                iss.read(data);
                iss.close();
                String tempFile = "file";
                File temp = File.createTempFile(tempFile, ".pdf");
                FileOutputStream fos = new FileOutputStream(temp);
                fos.write(data);
                fos.flush();
                fos.close();
            nopathbrain = temp.getAbsolutePath();
            System.out.println(tempFile);
            System.out.println(nopathbrain);
            } catch (IOException ex) {
                ex.printStackTrace();
                System.out.println("TEMP FILE NOT CREATED - ERROR in brainradiocheck");
            } 
```

如果其他人面临类似情况，请回答自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:55:14.997

要访问资源 jar，我使用以下语句：

```
this.getClass().getResourceAsStream("/es/app/firstTry/resources/button.jpg") 
```

这将返回一个 InputStream，因此您可以打开它或复制到任何目录。

# java - 我们如何优化 ArrayList 上的插入？

> ID：15739601
> 
> 赞同：7
> 
> 时间：2013-04-01T07:42:57.533
> 
> 标签：java, algorithm

其实这是前几天问的面试题。

面试官要我表达 和 的区别`ArrayList`，`LinkedList`并要求优化插入操作`ArrayList`，换句话说，重新实现`add(int index, E element)`，当然`get(int index)`可以牺牲操作的复杂性。

我的答案是将数组分成 k 个子数组并更新一个计数数组，该数组表示相应子数组中已有的元素数。并且每个子数组的内存都是以预期的初始大小动态分配的。当我需要向 中插入数据时`ArrayList`，我可以先定位一个子数组，然后在一个小数组内进行操作。并且如果插入不是太频繁或者索引是均匀分布的，插入的时间复杂度可以是`O(log(k) + n/k + k)`平均的，这`log(k)`意味着我们应该首先对计数数组的和数组进行二进制搜索来定位子数组，`n/k`用于数据移动甚至内存重新分配，k代表sum数组的更新。

我确信有更好的解决方案。我确实需要一些建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-23T14:01:04.717

解决方案之一可能是：

*   `add(int index, E element)`总是将元素添加到数组的末尾（您还必须存储应该添加该元素的索引） - 复杂度 O(1)
*   `get(int index)`必须恢复数组的正确顺序（如果在最后一次调用之后添加了一些元素） - 知道每个元素应该在的位置，您可以在 O(n) 中恢复正确的顺序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T02:54:01.537

您可以在平衡二叉树中实现它，这样 add() 和 get() 的成本都是 O(logn)

一个示例实现将如下所示（此处为手工制作，不会编译，未涵盖极端情况）：

```
class Node {
  int subTreeSize;
  Node left,right;
  Element e;
  // all i 0-indexed
  Node get(int i) {
    if (i >= subTreeSize) {
      return null;
    }
    if (left != null) {
      if(left.subTreeSize > i) {
        return left.get(i);
      } else {
        i -= left.subTreeSize;
      }
    }
    if (i == 0) {
      return this;
    }
    return right.get(i-1);
  }

  // add e to the last of the subtree
  void append(Element e) {
    if(right == null){
      right = new Node(e);
    } else {
      right.append(e);
      right = right.balance();
    }
    subTreeSize += 1;
  }

  // add e to i-th position
  void add(int i, Element e) {
    if (left != null) {
      if(left.subTreeSize > i) {
        add(i,left);
        left=left.balance();
      } else {
        i -= left.subTreeSize;
      }
    }
    if (i == 0) {
      if (left == null){
        left = new Node(e);
      } else {
        left.append(e);
        left = left.balance();
      }
    } else {
      if (right  == null) {
        // also in this case i == 1
        right = new Node(e);
      } else {
        right.add(i-1, e);
        right = right.balance();
      }
    }
    subTreeSize += 1;
  }
  // the common balance operation used in balance tree like AVL or RB
  // usually just left or right rotation
  Node balance() {
    ...
  }
}

public class Tree {
  Node root;
  public Element get(int i) {
    return root.get(i).e;
  }
  public void add(int i, Element e) {
    if (root == null) {
      root = new Node(e);
    } else {
      root.add(i,e);
      root = root.balance();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-12T17:11:45.883

[订单统计树](https://en.wikipedia.org/wiki/Order_statistic_tree)的变体将允许您按 O(log n) 中的索引添加和获取。

基本思路如下：

*   让每个节点存储以该节点为根的子树的大小。
*   节点的索引将对应于它在树[的有序遍历中的位置。](https://en.wikipedia.org/wiki/Tree_traversal#In-order)

    这意味着节点的顺序是根据它们在树中出现的位置确定的——这不是[二叉搜索树](https://en.wikipedia.org/wiki/Binary_search_tree)通常的工作方式，其中节点的元素具有一些不依赖于它出现在树中的位置的顺序（ eg`f`大于`a`按字典顺序排序的常规 BST，但在我们的例子`f`中可能小于或大于`a`，因为它是根据 和 的索引*排序*的。`f``a`

*   要添加或获取，我们从根开始并递归地遍历树，根据目标索引和子树大小确定我们的插入或查找位置是在左侧还是右侧。

    更具体地说，我们有以下递归定义：（
    对于空节点和实际插入节点增加了一些复杂性）

    ```
    node.add(index, element):
       if index <= left.subtreeSize
          left.add(index, element)
       else
          // anything to the right is after left subtree and current node, so those must be excluded
          right.add(index - left.subtreeSize - 1, element)

    node.get(index, element):
       if index == left.subtreeSize
          return node
       if index < left.subtreeSize
          return left.get(index)
       else
          return right.get(index - left.subtreeSize - 1) 
    ```

为了更好地理解这一点，以下示例树可能会有所帮助：

```
Values:                   Indices (in-order pos):   Subtree sizes:
    a                         5                         8
   / \                       / \                       / \
  b   g                     1   6                     5   2
 / \   \                   / \   \                   / \   \
f   c   h                 0   3   7                 1   3   1
   / \                       / \                       / \
  e   d                     2   4                     1   1 
```

例如，如果我们想在位置 5 插入一个新节点，它将被插入到`d`.

下面是一个小测试程序来演示这一点（创建上面显示的树）。

请注意，仍然需要进行[平衡以实现每个操作的 O(log n) 运行时间。](https://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)

```
class Test
{
   static class Node<T>
   {
      Node<T> left, right;
      T data;
      int subtreeCount;
      Node(T data) { this.data = data; subtreeCount = 1; }

      public String toString(int spaces, char leftRight)
      {
         return String.format("%" + spaces + "s%c: %s\n", "", leftRight, data.toString())
                 + (left != null ? left.toString(spaces+3, 'L') : "")
                 + (right != null ? right.toString(spaces+3, 'R') : "");
      }

      int subtreeSize(Node<T> node)
      {
         if (node == null)
            return 0;
         return node.subtreeCount;
      }

      // combined add and get into 1 function for simplicity
      // if data is null, it is an get, otherwise it's an add
      private T addGet(int index, T data)
      {
         if (data != null)
            subtreeCount++;
         if (index == subtreeSize(left) && data == null)
            return this.data;
         if (index <= subtreeSize(left))
         {
            if (left == null && data != null)
               return (left = new Node<>(data)).data;
            else
               return left.addGet(index, data);
         }
         else if (right == null && data != null)
            return (right = new Node<>(data)).data;
         else
            return right.addGet(index-subtreeSize(left)-1, data);
      }
   }

   static class TreeArray<T>
   {
      private Node<T> root;
      public int size() { return (root == null ? 0 : root.subtreeCount); }

      void add(int index, T data)
      {
         if (index < 0 || index > size())
            throw new IndexOutOfBoundsException("Index: " + index + ", Size: " + size());
         if (root == null)
            root = new Node<>(data);
         else
            root.addGet(index, data);
      }

      T get(int index)
      {
         if (index < 0 || index >= size())
            throw new IndexOutOfBoundsException("Index: " + index + ", Size: " + size());
         return root.addGet(index, null);
      }

      @Override
      public String toString() { return root == null ? "Empty" : root.toString(1, 'X'); }
   }

   public static void main(String[] args)
   {
      TreeArray<String> tree = new TreeArray<>();
      tree.add(0, "a");
      tree.add(0, "b");
      tree.add(1, "c");
      tree.add(2, "d");
      tree.add(1, "e");
      tree.add(0, "f");
      tree.add(6, "g");
      tree.add(7, "h");
      System.out.println("Tree view:");
      System.out.print(tree);
      System.out.println("Elements in order:");
      for (int i = 0; i < tree.size(); i++)
         System.out.println(i + ": " + tree.get(i));
   }
} 
```

这输出：

```
Tree view:
 X: a
    L: b
       L: f
       R: c
          L: e
          R: d
    R: g
       R: h
Elements in order:
0: f
1: b
2: e
3: c
4: d
5: a
6: g
7: h 
```

[现场演示](https://ideone.com/EsjvZW)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T09:21:41.470

LinkedList 是一个链表，访问\插入\删除需要 O(n)，链表支持顺序访问 O(n)。

ArrayList 是一个数组，插入\删除需要 O(2n)，但访问需要 O(1)，数组支持随机访问 O(1)。

要找到更优化的混合结构，您可以从以下开始：

```
template <T>
public class LinkedArrayList
{
    LinkedList<ArrayList<T>> list;

    public LinkedArrayList ()
    {
        list = new LinkedList<ArrayList<T>> ();
    }

    // ..
} 
```

您必须在访问复杂性和插入\删除复杂性之间平衡列表中的段（数组）

# solr - SOLR web admin的分析功能

> ID：15739603
> 
> 赞同：0
> 
> 时间：2013-04-01T07:43:06.600
> 
> 标签：solr

我想知道是否可以在我的脚本中使用 SOLR Web 管理员（4.1）的“分析”功能。即在给定字符串的情况下得到分析结果。我猜 SOLR 网络管理员应该使用一些 API

或者我想找到一种在某些字符串上运行分析器的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:46:08.010

分析管理页面只是利用幕后的[AnaylsisRequestHandler来显示结果。](http://wiki.apache.org/solr/AnalysisRequestHandler)请参阅链接以获取更多详细信息和示例。

# ruby-on-rails - Rails 检测更新前是否更改了属性 - SystemStackError：堆栈级别太深

> ID：15739604
> 
> 赞同：2
> 
> 时间：2013-04-01T07:43:07.843
> 
> 标签：ruby-on-rails, model, attributes, callback

我想在模型更新之前检测属性是否发生了变化。

我有以下（基于：[http](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html) ://api.rubyonrails.org/classes/ActiveModel/Dirty.html ）：

```
before_update :changed_attributes

def changed_attributes
    self.path_changed? ? puts('Path was changed') : puts('Path was not changed')
end 
```

但是现在当我尝试编辑 Model.path 属性时，我收到以下错误：

```
SystemStackError: stack level too deep 
```

有人告诉我，这意味着正在发生无限递归。

在不创建 SystemStackError 的情况下执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:52:18.333

问题是 ActiveRecord 已经有一个名为[`changed_attributes`](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html#method-i-changed_attributes). 最有可能`path_changed?`调用`changed_attributes`，但您已经重新定义`changed_attributes`并且它包含`path_changed?`. 这会导致无休止的递归并最终导致堆栈级别过深。

尝试将您的方法名称更改为`check_changed_attributes`：

```
before_update :check_changed_attributes

def check_changed_attributes
  self.path_changed? ? puts 'Path was changed' : puts 'Path was not changed'
end 
```

# vb.net - Multi - Winsock 发送数据

> ID：15739609
> 
> 赞同：0
> 
> 时间：2013-04-01T07:43:22.333
> 
> 标签：vb.net

我有一个MSWinsock的问题，问题是：我有一个带有多个winsock控件的VB.NET应用程序，它们都同时工作，但是当它们都发送数据（Obj.Senddata（data））时，数据其中一些没有被对方收回。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:36:09.243

```
Private Function PublishTemplateToTerminal()

    lblStatus.Text = "Publish in progress..."

    Dim DataToSend As String

    DataToSend = CType(Me.ParentForm, PublishTemplate).ALFullTemplateDetails.Item(Index)
    Index += 1
    Winsock.SendData(DataToSend)
    Application.DoEvents()

End Function

Private Sub Winsock_DataArrival(ByVal sender As System.Object, ByVal e As AxMSWinsockLib.DMSWinsockControlEvents_DataArrivalEvent) Handles Winsock.DataArrival

    Dim Msg As String = ""

    Winsock.GetData(Msg)
    ReceivedData &= Msg

    If ReceivedData.StartsWith("#999#") = True And ReceivedData.EndsWith("#END#") = True Then

         ReceivedData = ReceivedData.Substring(5)
        ReceivedData = ReceivedData.Substring(0, ReceivedData.Length - 5)

        If ReceivedData.StartsWith("ERROR") = True Then

            Winsock.Close()

            lblStatus.Text = "Error publish template to terminal!"
            lblStatus.BackColor = Color.Red

        End If

        If ReceivedData.StartsWith("DONE") = True Then

            ProgressBar.Value += 1

            If Index < CType(Me.ParentForm, PublishTemplate).ALFullTemplateDetails.Count Then

                Dim DataToSend As String
                DataToSend = CType(Me.ParentForm, PublishTemplate).ALFullTemplateDetails.Item(Index)
                Index += 1

                Winsock.SendData(DataToSend)
                Application.DoEvents()

            Else

                Winsock.Close()

                lblStatus.Text = "Publish Complete"
                lblStatus.BackColor = Color.Green

            End If

        End If

        ReceivedData = ""

    End If

End Sub 
```

# magento - 覆盖/扩展 Magento 抽象类？

> ID：15739628
> 
> 赞同：8
> 
> 时间：2013-04-01T07:45:03.297
> 
> 标签：magento, zend-framework, overriding, extend

我只需要在 Mage_Core_Model_Abstract 类中添加一个方法。

为此，在我的 config.php 我有

```
<models>
     <mymodule>
         <class>Mynamespace_Mymodule_Model</class>
     </mymodule>
     <core>
         <rewrite>
             <mage_core_model_abstract>Mynamespace_Mymodule_Model_Abstract</mage_core_model_abstract>
         </rewrite>
     </core>
</models> 
```

实在不行。。

我知道有一种通过将包括类文件在内的所有文件夹结构复制到我的模块中来“覆盖”的方法，但是我想知道在我的模块中是否有一种方法可以使它更花哨 - 类似于上面的东西..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T11:14:43.213

您只能重写直接实例化的类，从`config.xml`.

`config.xml`在通过工厂创建对象时会使用中的各种值（例如`Mage::getModel($class)`、`Mage::getSingleton($class)`、`Mage::helper($class)`等）。参数的值`$class`用于转换`catalog/product`为`Mage_Catalog_Model_Product`.

这意味着不可能*重写*（在 Magento 意义上）用作超类的类，包括抽象类（根据定义）。

如果要*重新定义*用作超类的任何类，则需要将文件放在包含路径上方的正确位置。在这种情况下，您需要在`app/code/local/Mage/Core/Model/Abstract.php`.

# php - 无需源代码即可部署网站

> ID：15739631
> 
> 赞同：3
> 
> 时间：2013-04-01T07:45:25.977
> 
> 标签：php, javascript, jquery, html

我用php开发了网站。我想在没有源代码的情况下部署它。用php可以吗？

我可以将我的网站代码转换为某种中间形式然后部署它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T07:48:36.240

你可以使用 Zend 守卫来编码你的代码，这样它就不能被逆向工程......

[http://www.zend.com/en/products/guard/](http://www.zend.com/en/products/guard/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T08:13:18.223

PHP HTML 和 JavaScript 是开源语言，因此您无法对无法解码的它们进行编码。一种方法是[Zend Guard -](http://www.zend.com/en/products/guard/)为 php 编码您的 PHP 应用程序，这些应用程序可以被以下[网站解码： Zend 在线解码器网站。](http://digsitevalue.org/k/zend-decoder-online)

> 但好消息是，如果您始终使用 Zend Guard 的最新版本，它就无法逆转，因为仍然没有解码器可供使用。

另一种方法是，您购买[VPS（虚拟专用服务器）](http://en.wikipedia.org/wiki/Virtual_private_server)或[专用服务器](http://en.wikipedia.org/wiki/Dedicated_hosting_service)并在其中部署您的源代码，然后您只需将您的 Web 应用程序使用情况出售给您的客户（而不是源代码）。因此，您拥有主机的用户名和密码，没有人可以看到您的应用程序代码。

* * *

**更新**

最近，我使用[了 ionCube](http://www.ioncube.com/)。没关系。但是，您需要稍微更改部署过程。在将代码传输到部署服务器之前，您需要使用 ionCube 对其进行加密。之后，您应该在服务器上安装 ionCube 加载器，php 可以通过该加载器加载加密代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T07:49:39.293

如果您打算在共享主机或任何第三方主机上托管您的网站，您可以使用 zend 编码器或 ioncube php 编码器，它们将保护您的源代码。

[http://www.zend.com/en/products/guard](http://www.zend.com/en/products/guard/)

[http://www.ioncube.com/sa_encoder.php](http://www.ioncube.com/sa_encoder.php)

# hibernate - 像Hibernate中的“选择新构造函数”这样的hql导致多个sql执行

> ID：15739634
> 
> 赞同：3
> 
> 时间：2013-04-01T07:45:31.663
> 
> 标签：hibernate, hql, jpql

当我在 hql 中使用构造函数作为打击时：

~~String jpql = "select top 10 new Result(a,b) from A a,B b where a.id=b.id" Query query = entityManager.createQuery(jpql);~~

控制台打印出 20 条 sql 语句。不是我预期的一条。但是当构造函数只包含表 A 和 B 的字段时，它只执行一个 sql。我想知道为什么会这样。感谢您的帮助！

抱歉不清楚，这里有一些细节：

```
List list = baseDao.findListByQL("select new List(a,b) from A a,B b where a.id=b.id"); 
```

方法“findListByQL”刚刚使用“Query query = entityManager.createQuery(jpql);”调用了一个方法 得到一些结果。

和休眠打印一些sql如下：

```
Hibernate: select a0_.id as col_0_0_, b1_.id as col_1_0_ from dbo.A a0_, dbo.B b1_ where a0_.id=b1_.id
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=?
Hibernate: select a0_.id as id103_0_, a0_.name as name103_0_ from dbo.A a0_ where a0_.id=?
Hibernate: select b0_.id as id106_0_, b0_.score as score106_0_ from dbo.B b0_ where b0_.id=? 
```

但是当 "new List" 构造函数使用一些字段属性如 "new List(a.name,b.score)" 时，它只打印一个 sql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-19T10:19:30.980

当您执行以下 HQL 时：

```
select new List(a,b) from A a,B b where a.id=b.i 
```

您正在返回整个实体 A 和 B。即使没有看到这些实体的代码，它们也可能映射了一些**EAGER 关系**`@ManyToOne`，例如or `@OneToOne`。

在一个 EAGER 关系中，每次你用这个关系点击一个实体，它都会把这个实体关联起来。这可以解释这多个 SQL。

但是，当您执行以下 HQL 时：

```
select new List(a.name,b.score) from A a,B b where a.id=b.i 
```

您只返回一些字段。在这种情况下，EAGER 关系被“忽略”，因为您没有使用实体类。

如果您提供有关实体类 A 和 B 的更多详细信息，我们可以指定关于您的实体中的这种行为以及如何改变这种行为的确切解释。

# android - 如何从android中的异步任务返回值

> ID：15739635
> 
> 赞同：7
> 
> 时间：2013-04-01T07:45:35.053
> 
> 标签：android, android-asynctask

我创建了一个异步任务来调用我的服务器以从数据库获取数据。
我需要处理从 http 服务器调用返回的结果。
从我的活动中，我在很多地方调用了异步任务。所以我不能使用成员变量来访问结果。有什么办法吗？

```
public Result CallServer(String params)
{

    try
    {
    new MainAynscTask().execute(params);
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
    return aResultM;//Need to get back the result

}  

    private class MainAynscTask extends AsyncTask<String, Void, Result> {

    @Override
    protected Result doInBackground(String... ParamsP) {    
        //calling server codes
        return aResultL;
    }       
    @Override
       protected void onPostExecute(Result result) {
          super.onPostExecute(result);
          //how i will pass this result where i called this task?
       } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-21T11:13:38.793

在调用 execute() 方法后尝试调用 AsyncTask 的 get() 方法。这对我有用

[http://developer.android.com/reference/android/os/AsyncTask.html#get()](http://developer.android.com/reference/android/os/AsyncTask.html#get())

```
public Result CallServer(String params)
{
   try
   {
       MainAynscTask task = new MainAynscTask();
       task.execute(params);
       Result aResultM = task.get();  //Add this
   }
   catch(Exception ex)
   {
       ex.printStackTrace();
   }
   return aResultM;//Need to get back the result

} 
...
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T07:52:23.777

我可以建议两种方法-

1.  `onPostExecute(Result)`在`AsyncTask`. 请参阅[http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute(Result)](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute(Result))

2.  发送带有结果的广播作为额外的。

`AsyncTask`是一个异步任务，因此将结果返回给调用者是没有意义的。而是处理结果，`onPostExecute()`例如将值设置为`TextView`等。或者发送广播，以便其他侦听器可以处理结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T04:18:10.960

这是我解决这个问题的方法：

1）创建一个接口类，该类定义一个方法的签名以在完成时执行：

```
public interface AsyncIfc {
    public void onComplete();
} 
```

2) 在 AsyncTask 类上设置一个属性来保存委托方法：

```
 public AsyncIfc completionCode; 
```

3) 从 AsyncTask 中的 onPostExecute() 触发委托：

```
completionCode.onComplete(); 
```

4) 从您的调用逻辑中，将委托属性设置为匿名方法：

```
task.completionCode = new AsyncIfc() {

    @Override
    public void onComplete() {
    // Any logic you want to happen after execution
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T07:57:01.003

当一个异步任务被执行时，任务会经过 4 个步骤：

1.  onPreExecute()，在任务执行之前在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2.  doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

3.  onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.  onPostExecute(Result)，**在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。**

使用处理程序

在你的活动中

```
 Handler mHandler = new Handler() { 
    @Override public void handleMessage(Message msg) { 
        String s=(String)msg.obj;
        tv.setText(s);
    }
};

//result is soap object in this case.
protected void onPostExecute(SoapObject result) {
    pd.dismiss();
    if(result != null) {
        Message msg=new Message();
        msg.obj=result.getProperty(0).toString();
        mHandler.sendMessage(msg);
    } 
```

# macos - AppleScript 读取包含文件名的文本文件，搜索每个文件名，如果找到文件，则将其复制到文件夹

> ID：15739636
> 
> 赞同：1
> 
> 时间：2013-04-01T07:45:37.290
> 
> 标签：macos, applescript, finder

很抱歉在没有粘贴我的编码尝试的情况下提出问题，但我以前从未使用过 AppleScript，我不知道我将如何做到这一点。我在网上找到了一些代码，这些代码可以完成每个步骤的一小部分，但有些关键部分我不知道该怎么做。如果我能弄清楚这一点，它将节省很多时间。基本上我的问题是客户发送了数千张照片，所有这些照片都在多个级别的子文件夹中，以及一个包含大约 300 个文件名的 Excel 文档，我需要提取和使用这些文件名。我可以将 Excel 文档中的文件名复制到纯文本文件中，以多行或逗号分隔。

所以这就是我需要做的：

*   打开文件夹选择器对话框以选择目标文件夹
*   打开文件选择器对话框以选择文本文件
*   循环遍历文本文件的每一行（或逗号分隔值）
*   获取该字符串并搜索包含该字符串的文件名
*   将第一个结果复制到一个文件夹中（比如说 Desktop:Found Photos）
*   如果找不到与字符串匹配的文件，则将搜索字符串添加到文本文件中（这样我可以将其通过电子邮件发送给客户并要求他们将其发送给我）

如果您无法对整个过程进行编码，是否可以帮助我遍历文本文件，搜索文件名并将第一个结果复制到另一个文件夹，如果文件不是，则将文件名添加到文本文件中没找到，那我大概可以把它拼凑起来。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:44:08.313

您可以尝试以下方式：

```
set newFolder to POSIX path of (path to desktop as text) & "Found Photos"
do shell script "mkdir -p " & quoted form of newFolder
set filePaths to paragraphs of (read (choose file with prompt "Select file list") as «class utf8»)
set fileFolder to POSIX path of (choose folder with prompt "Select folder containing files")

set foundFiles to {}
repeat with fileName in filePaths
    set fileName to (contents of fileName)
    set xxx to do shell script "find " & quoted form of fileFolder & " -name " & quoted form of fileName
    if xxx ≠ "" then
        tell application "System Events" to move file xxx to newFolder
        set end of foundFiles to fileName & return
    end if
end repeat

set foundFiles to (foundFiles as text)
do shell script "echo " & quoted form of foundFiles & " > " & quoted form of POSIX path of ((path to desktop as text) & "FoundFiles.txt") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:22:18.290

使用 shell 脚本可能更容易：

```
IFS=$'\n'
mkdir -p ~/Desktop/target/
for l in $(cat ~/Desktop/files.txt); do
    found=$(find ~/Documents/source -type f -name "*$l*")
    [[ -n $found ]] && cp $found ~/Desktop/target/ || echo "$l"
done 
```

# jquery - 使用 Jquery 将 html 附加到 css？

> ID：15739638
> 
> 赞同：1
> 
> 时间：2013-04-01T07:45:53.213
> 
> 标签：jquery, css, styling

我想创建一个带有一些样式的 html 链接。

现在我正在使用：

```
$('<a/>').text('sample')
         .attr('href', 'http://www.google.com/').appendTo('body');

$('a').css({
               float: 'right',
               fontFamily: 'Verdana, Arial, Helvetica, sans-serif',
               position: 'static',
               display: 'inline',
               visibility: 'inherit'
          }); 
```

而是创建并引用标签 2 次，有没有更简单的方法呢？像：

```
$('<a/>').text('sample')
         .attr('href', 'http://www.google.com/').appendTo('body');
         .css({
               float: 'right',
               fontFamily: 'Verdana, Arial, Helvetica, sans-serif',
               position: 'static',
               display: 'inline',
               visibility: 'inherit'
          }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:47:06.393

您在终止方法链接的错误位置有分号。

```
 .attr('href', 'http://www.google.com/').appendTo('body');
                                                        ^^^ 
```

你的代码是

```
$('<a/>').text('sample')
     .attr('href', 'http://www.google.com/').appendTo('body')
     .css({
           float: 'right',
           fontFamily: 'Verdana, Arial, Helvetica, sans-serif',
           position: 'static',
           display: 'inline',
           visibility: 'inherit'
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:49:08.510

尝试

```
$('<a/>').text('sample')
     .attr('href', 'http://www.google.com/').appendTo('body')
     .css({
           float: 'right',
           fontFamily: 'Verdana, Arial, Helvetica, sans-serif',
           position: 'static',
           display: 'inline',
           visibility: 'inherit'
      }); 
```

您在给出“appendTo”后终止方法链接，因此“css”将不适用于那里....尝试删除该分号';' 在 appendTo('body') 的末尾也包括“css”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:49:33.307

```
$('<a>').text('sample')
         .attr('href', 'http://www.google.com/')
         .css({
               float: 'right',
               fontFamily: 'Verdana, Arial, Helvetica, sans-serif',
               position: 'static',
               display: 'inline',
               visibility: 'inherit'
          }).appendTo('body'); 
```

演示：http: [//jsfiddle.net/wQLmw/](http://jsfiddle.net/wQLmw/)

# extjs - plupload AddFile 点击事件不起作用

> ID：15739640
> 
> 赞同：2
> 
> 时间：2013-04-01T07:45:57.923
> 
> 标签：extjs, file-upload, extjs4, plupload

仅在 Internet Explorer（8-9 版本）中存在问题。在我的 ext.js 项目中，我使用 plupload。在我的本地 PC 上它工作正常（在 IE 和其他浏览器中）但在服务器上的 AddFile 按钮单击事件不起作用。我之前在 plupload.full.js 文件中添加了警报`p.bind("Silverlight:Init", function () {`并开始`alert`工作，但在下一行中没有下降（进入绑定`Silverlight:Init`函数）。在我的本地 PC 上，两者都可以正常工作。你有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:15:50.453

不要忘记在 IIS 上注册 xap 文件扩展名。

# javascript - 在javascript中为数组元素添加点击事件

> ID：15739652
> 
> 赞同：2
> 
> 时间：2013-04-01T07:47:02.623
> 
> 标签：javascript, jquery, arrays

我是 javascript 新手，我有一个多维数组，其中包含“li”。我想为我的多维数组中的所有 li 添加单击事件侦听器我的数组是这样的

```
newItems = [ 
  [li.pL14, li, li.pR15], 
  [li.pL14, li, li.pR15], 
  [li.pL14, li, li.pL14], 
  [li, li.pR15, li.description], 
  [li.pL14, li, li.pR15], 
  [li.pL14, li]
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:55:28.677

假设它`newItems`包含节点数组，而不是字符串。

变体 #1。简单`for loop`：

```
for (var i = newItems.length; i--;) for (var j = newItems[i].length; j--;)
$(newItems[i][j]).click(function() {
    // click
}); 
```

演示：http: [//jsfiddle.net/ymuHR/](http://jsfiddle.net/ymuHR/)

变体 #2*。展平数组并转换为 jQuery 集合：

```
$([].concat.apply([], newItems)).click(function() {
    alert(this.id);
}); 
```

演示：http: [//jsfiddle.net/ymuHR/1/](http://jsfiddle.net/ymuHR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T10:52:06.803

或者你可以使用jquery的map函数

```
$.map( newItems , function( val, i ) {
            $('#'+val).click(function(){
                //do something.
            });
        }); 
```

我知道为时已晚。但它是新的改进迟到了。问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:55:12.463

试试这个...让你的 newItems 是元素“li”的多维变量

```
for(var i=0;i<newItems.length;i++)
{
  for(var j=0;j<newItems[i].length;j++)
  {
    newItems[i][j].addEventListener('click',function(){
      // Your On Click code

    },false);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-01T15:44:00.527

HTML

```
<div id="abc1"><a href="#">linl 01</a></div>
<div id="abc2"><a href="#">linl 02</a></div>
<div id="abc3"><a href="#">linl 02</a></div>
<div id="abc4"><a href="#">linl 02</a></div> 
```

jQuery

```
var ids = ["#abc1", "#abc2", "#abc3", "#abc4"];
for(var i=0;i<ids.length;i++) {
    $(ids[i]).click(function(){
        $(this).find("a").css({
            'font-weight':'bold'
        });
    });
} 
```

# java - 为什么当我的 Weblogic 服务器打开时我无法进行 Ant 构建？

> ID：15739655
> 
> 赞同：0
> 
> 时间：2013-04-01T07:47:17.513
> 
> 标签：java, ant, weblogic, jndi

当我的服务器设置为运行或调试模式时，当我执行通常的

```
ant clean build stage 
```

在命令提示符中，我收到此错误消息。

```
 BUILD FAILED
C:\Work\lrs\Dev\projects\buildcfg\build.xml:80: Unable to delete file C:\Oracle\
Middleware\user_projects\domains\lrs_domain\lrs\lrsEar\APP-INF\classes\ars.jndi.
properties 
```

当我关闭服务器后尝试构建时，构建效果很好。为什么会这样？

# php - 在php中存储字符串

> ID：15739659
> 
> 赞同：-1
> 
> 时间：2013-04-01T07:47:28.973
> 
> 标签：php, c++, string

我从 html 页面获取输入，然后数据进入 php 页面并存储在变量 $code 中。问题是当我提交时：-

```
 #include<iostream>
    using namespace std;
    int main( ) {
    cout<<"1";
    } 
```

那么存储在 $code 中的是：-

```
#include<iostream>
using namespace std;
int main( ) {
cout<<\"1\";          //Notice the change , these backslashes at cout.
} 
```

我怎样才能避免这种情况？我正在使用 000webhost.com 并且这件事不会发生在我的本地主机中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:29:36.597

最佳解决方案 在您的 php.ini 文件中，magic_quotes_gpc 指令可能设置为 on。出于安全原因，应禁用此功能。如果您无权访问 php.ini 文件（例如，在共享主机上），您始终可以使用 .htaccess 指令完成相同的操作（假设这是一个 apache 服务器）。

在你的 php.ini

```
magic_quotes_gpc Off 
```

在 .htaccess 文件中：

```
php_flag magic_quotes_gpc Off 
```

为什么会这样？

发生这种情况的原因是由于以下逻辑过程。

需要转义的字符串被发送到服务器。这是我的字符串。这很棒。Magic Quotes 在到达您的代码之前转义了撇号。这是我的字符串。太棒了 mysql_real_escape_string 现在有两个字符要转义，反斜杠 \ 以及撇号 \'。这是我的字符串。It\\'s awesome 这个新的超级转义字符串存储在数据库中。当从数据库中检索字符串时，它被传递给 stripslashes。这将删除在步骤 3 中添加的两个转义，但由于其中一个反斜杠已被转义，因此 stripslashes 认为它​​属于。这是我的字符串。太棒了 当您将这些字符串重新提交到数据库时，这个问题真的会失控，因为每次反斜杠的数量都会成倍增加。

替代解决方案 一个快速简单的替代方法是在将字符串传递给 mysql_real_escape_string 之前简单地删除由 magic_quotes 添加的斜线。

```
$str = stripslashes($code);
$str = mysql_real_escape_string($str); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T07:52:18.610

这是因为引号被转义了，所以会发生这种情况：假设您正在存储“苹果”，如果引号没有被转义，就会发生这种情况

```
$var = ""apple""; 
```

在此工作时导致错误：

```
$var = "\"apple\""; 
```

如果您打算回显我认为的数据，您可以使用`stripslashes();`来摆脱正斜杠。

# iphone - 为什么 self.editing 和 self.tableView.editing 工作相同/正确？

> ID：15739661
> 
> 赞同：2
> 
> 时间：2013-04-01T07:47:30.610
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我正在创建我拥有的项目`FirstViewController`。在`FirstViewController`我已经放入`UITableView`，并以正确的方式显示所有数据。在**myTableView**我把功能编辑`UITabelView`（*删除或插入行*）

我打开了**EditBtton** ( `UIBarButtonItem`) `UINavigationBar`，当我点击它时，我`UITableView`进入了编辑模式。

```
- (void) EditTable:(id)sender
{
    if(self.editing)
    {
        [super setEditing:NO animated:NO];
        [self.tblView setEditing:NO animated:NO];

        [self.navigationItem.rightBarButtonItem setTitle:@"Edit"];
        [self.navigationItem.rightBarButtonItem setStyle:UIBarButtonItemStylePlain];

        [self myCustomMethod]; // custom method

    }
    else
    {
        [super setEditing:YES animated:YES];
        [self.tblView setEditing:YES animated:YES];
        [self.tblView reloadData];
        [self.navigationItem.rightBarButtonItem setTitle:@"Done"];
        [self.navigationItem.rightBarButtonItem setStyle:UIBarButtonItemStyleDone];
    }
} 
```

* * *

**供您参考：**所有工作都正确无误。

* * *

我只想知道如何进入`UITableView`编辑模式，即使我没有使用过`UITableViewController`类似的

```
@interface FirstViewController : UIViewController // here i have UIViewController not UITableViewController 
```

那么当我写出我使用的条件时怎么可能，

`if(self.editing)`然后检查正确的方法，一般应该是`if(self.tableViewObj.editing)`

> **注意：**我没有任何错误但我只想知道，这怎么可能？它是如何工作的？**if(self.editing)**或**if(self.tableViewObj.editing)**哪个最适合我

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:06:25.130

这都是关于你的 UIBarButtonItem。它将您的控制器切换到编辑状态。正如文件所说：

@property(nonatomic, getter=isEditing) BOOL 编辑讨论 如果是，视图控制器当前允许编辑；否则，否。

如果视图是可编辑的，并且相关的导航控制器包含一个编辑完成按钮，则显示一个完成按钮；否则，将显示编辑按钮。单击任一按钮可切换此属性的状态。通过将导航项的自定义左视图或右视图设置为 editButtonItem 方法返回的值来添加一个编辑完成按钮。将编辑属性设置为视图的初始状态。如果视图已经显示，则使用 setEditing:animated: 方法作为操作方法来动画此状态的转换。**

# java - 使用 Java bean 提取 xls 文件中的数据

> ID：15739665
> 
> 赞同：0
> 
> 时间：2013-04-01T07:47:44.627
> 
> 标签：java, javabeans

如何使用 Java bean 提取 xls 文件中的数据。因为，我不熟悉beans，所以有人可以解释一下如何从下面的代码中获取xls文件中的结果并进行系统调用以打开xls文件。

私有静态字符串 getDGrid(){ 字符串 jsonObj=null;

```
 OppDownListBean dropDownBean = new OppDownListBean();

    List dataDDL=opptyMgmtDAO.getOppViewData();

    StringBuffer sb = new StringBuffer("{\"items\":[");
    int slno=0;
    if (dataDDL != null) {
        for (int i = 0; i<dataDDL.size(); i++) {
            slno=i+1;
            odb=(OppDataBean)dataDDL.get(i);
            sb.append("{\"slno.\":" + "\"" + slno + "\"," +"\"customer\":" + "\"" + odb.getCustomerName() + "\"," + "\"programType\":"+ "\"" 
                    + odb.getProgramType() +"\"," + "\"oppoType\":"+ "\""
                    + odb.getOppType() +"\"," + "\"requestor\":"+ "\""
                    + odb.getRequestor() +"\"," + "\"oppOwner\":"+ "\""
                    + odb.getOppOwner() +"\"," + "\"primaryTSA\":"+ "\""
                    + odb.getPrimaryTSA() +"\"," + "\"market\":"+ "\""
                    + odb.getMktShortName() +"\"," + "\"geography\":"+ "\""
                    + odb.getGeoShortName() +"\"," + "\"region\":"+ "\""
                    + odb.getRegName() +"\"," + "\"country\":"+ "\""
                    + odb.getCountry()+ "\"" +  "}");
            if (i!=dataDDL.size()-1) {
                sb.append(",");

            }
        }

    }
    sb.append("]}");
    jsonObj=sb.toString();

    return jsonObj;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:00:49.677

看看[Apache Poi](http://poi.apache.org)

另外我建议使用[json library](http://json-lib.sourceforge.net/)。

# c# - 使用 ajax 发布表单并在 div 中显示错误以防出错

> ID：15739666
> 
> 赞同：0
> 
> 时间：2013-04-01T07:47:45.253
> 
> 标签：c#, .net, ajax, asp.net-mvc, asp.net-mvc-4

在下面的代码中，我有一个包含一些员工信息的表单。我想感受一下密码和帖子。如果密码正确，用户将被重定向到该密码是`/Dashboard`可以的。

当密码错误时，我想`_ErrorPartial`在 div 中显示错误 ( )`MyError`并且仍然可以看到表单。我想在 div ( `MyError`) 中查看表单和消息。使用下面的代码，当密码错误时，我看到错误消息，但在空白页面上，而不是带有布局 + 表单 + 错误消息的页面

任何的想法 ？

谢谢，

**我的页面 ：**

```
 @model MyApp.EmployeeModel
    <script type="text/javascript">
        $(document).ready(function () {
            $(".").click(function () {

                $.ajax({
                    url: '/Account/Login',
                    type: "Post",
                    data: $('#MyForm').serialize(),
                    success: function (result) {
                            alert('Im here');
                        $("#MyError").html(result);
                        //Here is code to detect error or not but removed
                    }
                });

            });
        });
    </script>

    <div id="MyError"></div>
    @using (Html.BeginForm("Login", "Account", FormMethod.Post, new { id = "MyForm" }))
    {
        @Html.AntiForgeryToken()
        <div>
            @Html.LabelFor( m => m.FirstName)
            <div>
                @Html.HiddenFor(model => model.Username)
                @Html.LabelFor( m => m.Password)
                @Html.PasswordFor(m => m.Password)
                <input type="submit" class="jqClick" />
            </div>
        </div>
    } 
```

**控制器 ：**

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Login(EmployeeModel employeeModel)
{
    var Errors = new List<string>();
    var employee = .... //Get employee from DB
    if (employee == null)
    {
        Errors.Add("Employee trouble");
        return PartialView("_ErrorPartial", Errors.AsEnumerable());
    }

    return RedirectToAction("Index", "Dashboard");
} 
```

**我的 _ErrorPartial 视图：**

```
@model IEnumerable<string>
<div id="DisplayError">
    @{ var error = string.Empty; }

    @foreach (var err in Model){
        error += err + "<br>";
    }
    @Html.Raw(error)
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:33:56.243

您必须对您的 javascript 代码进行一些更改。首先，将 jQuery 选择器替换`$(".")`为特定的选择器，例如`$(".jqClick")`. 其次，**永远不要**`/Account/Login`像在你的代码中那样硬编码 url ，为此使用[UrlHelper](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper%28v=vs.100%29.aspx)。第三件事是，您必须防止提交按钮的默认行为。查看更改：

```
$(document).ready(function () {
    $(".jqClick").click(function (e) {
        e.preventDefault();
        $.ajax({
            url: '@Url.Action("Login", "Account")',
            type: "Post",
            data: $('#MyForm').serialize(),
            success: function (result) {
                alert('Im here');
                if (result.redirectUrl)
                    window.location.href = result.redirectUrl;
                else
                    $("#MyError").html(result);
                //Here is code to detect error or not but removed
            }
        });
    });
}); 
```

如果登录成功，您还需要`Login`稍微更改操作以进行重定向：

```
public ActionResult Login(EmployeeModel employeeModel)
{
    var Errors = new List<string>();
    var employee = .... //Get employee from DB
    if (employee == null)
    {
        Errors.Add("Employee trouble");
        return PartialView("_ErrorPartial", Errors.AsEnumerable());
    }
    return Json(new { redirectUrl = Url.Action("Index", "Dashboard") });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:53:10.963

您从服务器端抛出的可能错误不会出现在成功函数中。相反，您应该在下面

```
error:function(response)
{

   //your code here

} 
```

只需从控制器抛出异常。

# iphone - iOS“CABasicAnimation”在动画完成后将组件带到原始位置

> ID：15739667
> 
> 赞同：0
> 
> 时间：2013-04-01T07:47:52.783
> 
> 标签：iphone, ios, core-animation

我正在使用 iOS 核心动画“CABasicAnimation”为 UIImageView 设置动画，对我来说一切正常，但唯一的问题是当我动画到该位置时，在完成动画后它会回到原来的位置。我该如何克服呢？我需要将 UIImageView 保持在移动位置。

注意：我见过很少有关于这个问题的成功答案，但我不知道为什么我的不像他们说的那样工作。

[使用 CABasicAnimation 旋转 CALayer 后，图层跳回未旋转的位置](https://stackoverflow.com/questions/1376753/after-rotating-a-calayer-using-cabasicanimation-the-layer-jumps-back-to-its-unr)

这是我的示例代码，

```
 CGPoint endPt = CGPointMake(160, 53);
    CABasicAnimation *anim5 = [CABasicAnimation animationWithKeyPath:@"position"];
    [anim5 setBeginTime:CACurrentMediaTime()+0.4];
    anim5.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    anim5.fromValue = [NSValue valueWithCGPoint:imgRef.layer.position];
    anim5.toValue = [NSValue valueWithCGPoint:endPt];
    anim5.duration = 1.5;
    anim5.speed = 2;
    [imgRef.layer addAnimation:anim5 forKey:@"position"];

    //this is what other answers ask to do
    [anim5 setFillMode:kCAFillModeForwards];
    [anim5 setRemovedOnCompletion:NO]; 
```

顺便说一句`[imgRef.layer setPosition:CGPointMake(160, 53)];`，因为我将动画延迟了 4 毫秒，所以对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:56:23.253

根本原因是动画只是在两个值之间转换属性，它实际上并没有改变结束值。您需要在动画完成时更改结束值，有三种方法可以做到这一点。1) 使用 CAAnimation 超类的委托属性来通知动画何时完成。此时，您可以将属性设置为其最终值。请参阅：[https ://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation)animationDidStop:finished: 是您需要在委托上实现的方法。2) 在周围的 CATransaction 上设置一个完成块。您需要手动启动 CATransaction 而不是让 CABasicAnimation 自动为您执行此操作。请参阅：[Objective-C - CABasicAnimation 在动画后应用更改？](https://stackoverflow.com/questions/11515647/objective-c-cabasicanimation-applying-changes-after-animation) 3）见下面OMZ的评论......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:35:08.583

正确的答案是设置图层的位置属性，但正如您所指出的，这会使其变得更加困难，因为您希望在位置更改之前有 0.4 秒的延迟。有什么原因你不能先执行延迟然后再做动画吗？像这样的东西：

```
- (IBAction)didTapMove:(id)sender
{
  [self performSelector:@selector(animate) withObject:nil afterDelay:0.4];
}

- (void)animate
{
  CGPoint endPt = CGPointMake(160, 53);
  CABasicAnimation *anim5 = [CABasicAnimation animationWithKeyPath:@"position"];
  anim5.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
  anim5.fromValue = [NSValue valueWithCGPoint:_imageView.layer.position];
  anim5.toValue = [NSValue valueWithCGPoint:endPt];
  anim5.duration = 1.5;
  anim5.speed = 2;

  [_imageView.layer addAnimation:anim5 forKey:@"position"];

  [_imageView.layer setPosition:CGPointMake(160, 53)];
} 
```

注意到我已经从动画中删除了你的开始时间，因为延迟发生在执行选择器调用中。

# windows - IBM Worklight - Windows - “'WEBWORKS_HOME' 环境变量未定义”

> ID：15739668
> 
> 赞同：1
> 
> 时间：2013-04-01T07:47:58.173
> 
> 标签：windows, environment-variables, blackberry-10, ibm-mobilefirst

从[BlackBerry 开发教程](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/01_05_Setting_up_your_BlackBerry_10_development_environment.pdf)中，我知道首先我需要安装 BlackBerry 10 WebWorks SDK，然后使用 SDK 路径设置创建 WEBWORKS_HOME 环境变量。

我不知道如何在 Eclipse 中创建环境变量。我通过计算机-> 属性-> 高级设置-> 环境变量-> 用户变量设置它，但它没有用。

当我将 BlackBerry 10 环境添加到我的应用程序时，它在 Eclipse Worklight 控制台中出现以下错误：

> E: blackberry10 build failed: 'WEBWORKS_HOME' 环境变量未定义。有关详细信息，请参阅 Worklight 信息中心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T08:48:18.633

环境变量以您描述的方式创建 - 具有名称`WEBWORKS_HOME`和值的专用环境变量，例如：`C:\Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.4.11`.

*   不需要在 Eclipse 中创建
*   您可以通过打开 CMD 窗口并键入来检查它是否正确存在`set`

重新启动 Eclipse，构建操作现在应该可以通过 BlackBerry 10 环境了。

# c# - 从“C#”后面生成文本框控件

> ID：15739669
> 
> 赞同：2
> 
> 时间：2013-04-01T07:48:13.160
> 
> 标签：c#, asp.net

我对asp.net有点陌生，而且我的英语也不是很好，无论如何我希望你仍然能明白我的意思。不，我在这里有一个问题，基本上我试图将我的应用程序与 LinkedIn 集成，所以我使用的是 REST API，当我单击一个按钮时，它会将我的页面重定向到从 LinkedIn 请求数据，它返回 XML 数据，它包含用户的教育数据，用户的教育数据的数量是不确定的，所以我决定从后面（“C#”）生成文本框控件。我这样做：

```
 TextBox txt;
            int i;

            foreach (var element in person)
            {
                if ((element.Name == "first-name") || (element.Name == "last-name"))
                {
                    tbName.Text = tbName.Text + " " + element.Value;
                }
                else if (element.Name == "skills")
                {
                    i = 1;

                    foreach (var child in element.Elements())
                    {
                        if (child.Name == "skill")
                        {
                            txt = new TextBox();
                            txt.ID = "tbSkills" + i;
                            txt.Width = 200;
                            txt.Visible = true;
                            txt.ReadOnly = true;
                            txt.Text = child.Element("skill").Element("name").Value;
                            form1.FindControl("divMoreSkills").Controls.Add(txt);
                            i++;
                        }
                    }
                }
                else if (element.Name == "industry")
                {
                    tbIndustry.Text = element.Value;
                }
                else if (element.Name == "educations")
                {
                    i = 1;

                    foreach (var child in element.Elements())
                    {
                        if (child.Name == "education")
                        {

                            txt = new TextBox();
                            txt.ID = "tbEducations" + i;
                            txt.Width = 200;
                            txt.Visible = true;
                            txt.ReadOnly = true;
                            txt.Text = child.Element("school-name").Value;
                            form1.FindControl("divMoreEducations").Controls.Add(txt);
                            i++;
                        }
                    }
                }

            }
        } 
```

我的问题是，如果我想使用之前生成的文本框，C# 会识别它吗？因为我生成的控件没有 runat server 属性。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:52:20.570

> 如果我想使用之前生成的文本框，C# 会识别它吗？因为我生成的控件没有 runat server 属性。

您不必指定`runat="server"`，因为您将通过后面的代码创建服务器端控件。`runat="server"`在`aspx`页面上用于识别服务器端控件。

要找到它，您需要确保这些控件在回邮中可用。您可以像在`form1`. 使用[Page.FindControl](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:50:32.687

是的，它会..您可以使用添加的控件，例如

```
TextBox txt = (TextBox )Page.FindControl("tbSkills0"); 
```

# r - 更改绘图中轴的方向标签

> ID：15739670
> 
> 赞同：1
> 
> 时间：2013-04-01T07:48:23.550
> 
> 标签：r, graphics, plot

在用 R 绘制绘图时，X 轴标签是水平的，我想要一个垂直标签。这可能吗？

例如，这样的：

![图。1](https://i.stack.imgur.com/YXTGI.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:19:01.423

轮播重复广告的问题在这里得到了多次回答。但我添加这个答案有两个原因：

1.  刻度标签很长，所以我们需要在底部添加边距
2.  刻度标签有点复杂，使用创建`plotmath`

![在此处输入图像描述](https://i.stack.imgur.com/U8SIj.png) 这是代码：

```
par(mar=c(8, 4, 2, 4))
plot(1:5,1:5,xaxt='n',frame.plot=FALSE,xlab='')
expr1 <- expression(L[2](delta[J~S](X,W),theta))
expr2 <- expression(L[4](delta[J~S](X,W),theta))
axis(1,las=2,labels=c(expr1,expr1),at=2:3,pos=1)
arrows(0,1,5,1) 
```

# php - PHP用对象数组的值填充无序列表

> ID：15739671
> 
> 赞同：0
> 
> 时间：2013-04-01T07:48:24.223
> 
> 标签：php, arrays, object, html-lists, unique

一个 MYSQL 查询让我得到了这个对象数组（缩短了一点）：

```
Array
 (
    [0] => stdClass Object
        (
            [parentTitle] => Winner 2009
            [catTitle] => Max Muster
            [title] => drm202
        )

    [1] => stdClass Object
        (
            [parentTitle] => Winner 2009
            [catTitle] => Max Muster
            [title] => drm202
        )

    [2] => stdClass Object
        (
            [parentTitle] => Winner 2011
            [catTitle] => Josh Frank
            [title] => A bird in the cage
        )

    [3] => stdClass Object
        (
            [parentTitle] => Winner 2011
            [catTitle] => Josh Frank
            [title] => cue & repeat
        )
    ...
) 
```

如何从这个数组中构建一个无序的 Html 列表，如下所示：

```
<ul id="content">

    <li>Winner 2009
       <ul>
          <li>Max Muster
             <ul>
                  <li>drm202</li> 
             </ul>
          </li>
       </ul>
   </li>

    <li>Winner 2011
       <ul>
          <li>Josh Frank
             <ul>
                  <li>A bird in the cage</li> 
                  <li>cue & repeat</li> 
             </ul>
          </li>
       </ul>
   </li>

</ul> 
```

前两个对象是相同的，因此在 ul 中，person + title 应该只在 parent 获胜者 2009 下列出一次。2011 年的获胜者有两个获胜项目，因此这两个不同的项目应该列在他的下面。

我的方法是有一个填充数组的 foreach 循环

```
foreach ($results as $object) { 

    // fill array
    $array[] = "</ul><ul><li><h2> " . $object->parentTitle . "</h2>\n</li>";
    $array[] = "<li><h5>" . $object->catTitle . "</h5></li>\n";
    $array[] = "<li> - " . $object->title . "</li>\n";

} 
```

并踢出双打

```
$array = array_unique($array); 
```

这种方式似乎非常不方便和错误。

谢谢你的帮助，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:49:58.373

您可以使用[`array_walk`](http://www.php.net/manual/en/function.array-walk.php)：

```
$source=json_decode('[{"parentTitle":"Winner 2009","catTitle":"Mas Muster","title":"drm202"},{"parentTitle":"Winner 2009","catTitle":"Mas Muster","title":"drm202"},{"parentTitle":"Winner 2011","catTitle":"Josh Frank","title":"A bird in the cage"},{"parentTitle":"Winner 2011","catTitle":"Josh Frank","title":"cue & repeat"}]');
$result=array();
array_walk($source,function($v,$i)use(&$result){
    if(!isset($result[$v->parentTitle])) $result[$v->parentTitle]=array();
    if(!isset($result[$v->parentTitle][$v->catTitle])) $result[$v->parentTitle][$v->catTitle]=array();
    if(!in_array($v->title,$result[$v->parentTitle][$v->catTitle])) $result[$v->parentTitle][$v->catTitle][]=$v->title;
});
print_r($result); // just to debug
echo "<ul>";
foreach($result as $key=>$sub){
    echo "<li>".htmlentities($key,ENT_COMPAT,"UTF-8");
    echo "<ul>";
    foreach($sub as $k=>$s){
        echo "<li>".htmlentities($k,ENT_COMPAT,"UTF-8");
        echo "<ul>";
        foreach($s as $i=>$v){
            echo "<li>".htmlentities($v,ENT_COMPAT,"UTF-8")."</li>";
        }
        echo "</ul></li>";
    }
    echo "</ul></li>";
}
echo "</ul>"; 
```

[现场演示](http://3v4l.org/hfio7)

`print_r`输出：

```
Array
(
    [Winner 2009] => Array
        (
            [Mas Muster] => Array
                (
                    [0] => drm202
                )

        )

    [Winner 2011] => Array
        (
            [Josh Frank] => Array
                (
                    [0] => A bird in the cage
                    [1] => cue & repeat
                )

        )

) 
```

HTML 输出（不缩进）：

```
<ul><li>Winner 2009
<ul><li>Mas Muster
<ul><li>drm202</li>
</ul>
</li></ul>
</li><li>Winner 2011
<ul><li>Josh Frank
<ul><li>A bird in the cage</li>
<li>cue &amp; repeat</li>
</ul>
</li></ul>
</li></ul> 
```

如果您想更花哨，可以将`foreach`子句更改为另一个`array_walk`或`array_reduce`类似的内容。

# javascript - 用jquery从href标签中提取值

> ID：15739672
> 
> 赞同：0
> 
> 时间：2013-04-01T07:48:34.693
> 
> 标签：javascript, jquery

Url是这样生成的

```
/Home/LoadData?page=2&activeTab=House 
```

如何获取 activeTab 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:51:54.090

```
function getURLParameter(name) {
    return decodeURI(
        (RegExp(name+ '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
} 
```

并将其称为`getURLParameter('activeTab');`

[从这里](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T07:53:17.943

请在您的 javascript 中添加此功能

你可以传递参数名称，你可以获得价值

```
function getParameterByName(name)
{
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.search);
    if(results == null)
        return "";
    else
        return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

希望对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T07:50:13.843

您可以使用拆分

**[现场演示](http://jsfiddle.net/65EXN/)**

```
url.split('activeTab=')[1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T07:53:28.747

您可以使用 javascript`substr()`和`.lastIndexOf()`:

```
var url = '/Home/LoadData?page=2&activeTab=House'; // window.location.href;

var activeTab = url.substr(url.lastIndexOf('=')+1); // outputs House 
```

### [在 FIDDLE 中查找](http://jsfiddle.net/gjkrZ/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T07:56:40.123

尝试这样的事情

```
 $(document).ready(function(){
    var url = 'http://stackoverflow.com/Home/LoadData?page=2&activeTab=House';
    alert(decodeURI(
            (RegExp('activeTab=' + '(.+?)(&|$)').exec(url)||[,null])[1]
        ));
}); 
```

# android - Android 推送通知消息格式

> ID：15739676
> 
> 赞同：4
> 
> 时间：2013-04-01T07:48:53.180
> 
> 标签：android, push-notification, google-cloud-messaging

我正在开发一个应用程序并为此实现了推送通知。以前一切正常。在类的`onMessage()`方法中`GCMIntentService`，我收到的消息格式如下：

```
{ 
   "collapse_key": "null",
   "time_to_live": 108,
   "delay_while_idle": true,
   "data": {
       "message": "Hello android",
   },
   "registration_ids":["4", "8", "15", "16", "23", "42"]
} 
```

这是我从服务器发送的内容，并且能够正确解析它。`onMessage()`我的意思是包含“数据”，“registration_ids”的意图......

但是我的问题现在出现了 - 我没有收到以下格式的消息：

```
"data": {
       "message": "Hello android",
}, 
```

相反，我只得到“消息”的价值，没有“数据”的价值。它是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-15T13:11:29.093

我的建议是你把你需要的一切都放在“消息”键中，因为这就是你所得到的。当您收到消息时，您可以使用自己的结构将其解析回来。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:09:03.363

您应该只获取数据字典中包含的键及其值。所以在你的情况下，你应该得到的只是消息。

# c - 函数签名的 C 编码约定

> ID：15739677
> 
> 赞同：4
> 
> 时间：2013-04-01T07:49:00.320
> 
> 标签：c, coding-style

我总是遵循我使用的任何语言的现有编码约定，并且我最近开始使用 C。我注意到有些书显示的函数的返回值高于函数签名的其余部分，如下所示 -

```
int
foo(int bar)
{
...
...
...
} 
```

我还没有在我使用过的任何其他语言中看到这一点。这是目前呈现 C 函数的标准方式，还是一些不再普遍使用的旧约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:54:29.917

C 中的代码格式没有通用约定。流行的样式由项目（例如“Linux 内核”）或组织（GNU）或书籍（K&R）或类似的东西命名。

[维基百科有一个样式列表。](http://en.wikipedia.org/wiki/Indent_style#Styles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:28:10.447

更多的是让 ctags 之类的东西有效地工作。或者，能够通过简单地搜索以 funcname 开头的行来找到函数体本身（而不是对其进行任何调用）。

前任：`/^funcname`

只要您在那之后使用任何合理的缩进样式，它将是（在整个代码库中）以这种方式出现在行首的唯一位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:04:38.780

您可以在 1990 年的 Indian Hill Style 手册[http://www.cs.arizona.edu/~mccann/cstyle.html](http://www.cs.arizona.edu/~mccann/cstyle.html)中看到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T11:23:07.447

这只是风格问题，主要是习惯问题。编译器不关心这一点。使用一种你觉得舒服的风格，以及其他人在阅读你的代码时容易遵循的风格。

# java - Java Input 无法识别右键或向下键

> ID：15739683
> 
> 赞同：0
> 
> 时间：2013-04-01T07:49:10.873
> 
> 标签：java, keyboard, lwjgl, slick2d

所以我刚刚开始将 LWJGL 与 Slick2D 一起使用，由于某种原因，我的代码无法用于向右和向下键来移动我的播放器。但是，向上和向左键确实有效。这是我的代码：

```
@Override
public void update(GameContainer gc, int delta) throws SlickException {

    Input input = gc.getInput();

    if(input.isKeyDown(Input.KEY_UP)) {
        player.y -= (delta * 0.1f);
    } else if(input.isKeyDown(Input.KEY_DOWN)) {
        player.y += (delta * 0.1f);
    } else if(input.isKeyDown(Input.KEY_LEFT)) {
        player.x -= (delta * 0.1f);
    } else if(input.isKeyDown(Input.KEY_RIGHT)) {
        player.x += (delta * 0.1f);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:56:36.913

我将玩家位置从整数更改为浮点数，现在它可以工作了。

# android - Mediacodec 和摄像头，色彩空间不正确

> ID：15739684
> 
> 赞同：6
> 
> 时间：2013-04-01T07:49:11.243
> 
> 标签：android, colors, h.264

通过参考Aegonis的[作品1](https://stackoverflow.com/questions/13458289/encoding-h-264-from-camera-with-android-mediacodec)和[作品2](https://stackoverflow.com/questions/13703596/mediacodec-and-camera-colorspaces-dont-match)，我也得到了H.264码流，但是颜色不正确。我正在使用 HTC Butterfly 进行开发。这是我的代码的一部分：

相机：

```
parameters.setPreviewSize(width, height);
parameters.setPreviewFormat(ImageFormat.YV12);
parameters.setPreviewFrameRate(frameRate); 
```

媒体编解码器：

```
mediaCodec = MediaCodec.createEncoderByType("video/avc");
MediaFormat mediaFormat = MediaFormat.createVideoFormat("video/avc", 320, 240);
mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 500000);
mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, 15);
mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420SemiPlanar);
mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 5);   
mediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE); 
mediaCodec.start(); 
```

使用**COLOR_FormatYUV420Planar**时，错误显示“[OMX.qcom.video.encoder.avc] 不支持颜色格式 19”，所以我只能使用“ **COLOR_FormatYUV420SemiPlanar** ”。有人知道不支持的原因吗？

明白了，通过使用：

```
int colorFormat = 0;
    MediaCodecInfo.CodecCapabilities capabilities = codecInfo.getCapabilitiesForType(mimeType);
    for (int i = 0; i < capabilities.colorFormats.length && colorFormat == 0; i++) {
        int format = capabilities.colorFormats[i];
        Log.e(TAG, "Using color format " + format);           
    } 
```

我们可以有颜色格式**21**（COLOR_FormatYUV420SemiPlanar）和**2130708361**（没有对应的格式），我认为格式会改变取决于设备。

然后，我尝试了[工作 1](https://stackoverflow.com/questions/13458289/encoding-h-264-from-camera-with-android-mediacodec)和[工作 2](https://stackoverflow.com/questions/13703596/mediacodec-and-camera-colorspaces-dont-match)中的建议提供的颜色转换：

```
public static byte[] YV12toYUV420PackedSemiPlanar(final byte[] input, final byte[] output, final int width, final int height) {
    /* 
     * COLOR_TI_FormatYUV420PackedSemiPlanar is NV12
     * We convert by putting the corresponding U and V bytes together (interleaved).
     */
    final int frameSize = width * height;
    final int qFrameSize = frameSize/4;

    System.arraycopy(input, 0, output, 0, frameSize); // Y

    for (int i = 0; i < qFrameSize; i++) {
        output[frameSize + i*2] = input[frameSize + i + qFrameSize]; // Cb (U)
        output[frameSize + i*2 + 1] = input[frameSize + i]; // Cr (V)
    }
    return output;
}

public static byte[] YV12toYUV420Planar(byte[] input, byte[] output, int width, int height) {
    /* 
     * COLOR_FormatYUV420Planar is I420 which is like YV12, but with U and V reversed.
     * So we just have to reverse U and V.
     */
    final int frameSize = width * height;
    final int qFrameSize = frameSize/4;

    System.arraycopy(input, 0, output, 0, frameSize); // Y
    System.arraycopy(input, frameSize, output, frameSize + qFrameSize, qFrameSize); // Cr (V)
    System.arraycopy(input, frameSize + qFrameSize, output, frameSize, qFrameSize); // Cb (U)

    return output;
}

public static byte[] swapYV12toI420(byte[] yv12bytes, int width, int height) {
    byte[] i420bytes = new byte[yv12bytes.length];
    for (int i = 0; i < width*height; i++)
        i420bytes[i] = yv12bytes[i];
    for (int i = width*height; i < width*height + (width/2*height/2); i++)
        i420bytes[i] = yv12bytes[i + (width/2*height/2)];
    for (int i = width*height + (width/2*height/2); i < width*height + 2*(width/2*height/2); i++)
        i420bytes[i] = yv12bytes[i - (width/2*height/2)];
    return i420bytes;
} 
```

显然，**YV12toYUV420PackedSemiPlanar**的颜色变换比其他两个表现得更好。它相对更好，但与真实颜色相比仍然看起来不同。我的代码有问题吗？任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:40:14.850

明白了，现在颜色看起来不错，测试是基于HTC Butterfly。将分辨率设置为 320x240 时，您的颜色变换应如下所示：

```
 System.arraycopy(input, 0, output, 0, frameSize);
    for (int i = 0; i < (qFrameSize); i++) {  
        output[frameSize + i*2] = (input[frameSize + qFrameSize + i - 32 - 320]);  
        output[frameSize + i*2 + 1] = (input[frameSize + i - 32 - 320]);            
    } 
```

对于 640x480 及以上分辨率，

```
System.arraycopy(input, 0, output, 0, frameSize);    
    for (int i = 0; i < (qFrameSize); i++) {  
        output[frameSize + i*2] = (input[frameSize + qFrameSize + i]);  
        output[frameSize + i*2 + 1] = (input[frameSize + i]);   
    } 
```

对于帧率问题，我们可以使用 getSupportedPreviewFpsRange() 来检查我们设备支持的帧率范围：

```
List<int[]> fpsRange = parameters.getSupportedPreviewFpsRange();
for (int[] temp3 : fpsRange) {
System.out.println(Arrays.toString(temp3));} 
```

播放编码的 H.264 ES 时，以下设置正确，

```
parameters.setPreviewFpsRange(29000, 30000);    
//parameters.setPreviewFpsRange(4000,60000);//this one results fast playback when I use the FRONT CAMERA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T09:50:51.757

在阅读[了这个讨论](https://groups.google.com/d/msg/android-platform/awaNwgb6EbY/a-YiIOwaL0QJ)之后，事实证明，对各种分辨率的帧进行编码的更通用的方法是在将帧发送到`MediaCodec`. 这是我相信 HTC Butterfly 拥有的`QualComm`( `OMX.qcom.video.encoder.avc`) 编码器的实际情况，但仍然不适用于所有分辨率。`720x480`并且`176x144`仍然有根据输出视频未对齐的色度平面。此外，请避免尺寸不能被 16 整除的分辨率。

转换非常简单：

```
int padding = 0;
if (mediaCodecInfo.getName().contains("OMX.qcom")) {
  padding = (width * height) % 2048;
}
byte[] inputFrameBuffer = new byte[frame.length];
byte[] inputFrameBufferWithPadding = new byte[padding + frame.length];

ColorHelper.NV21toNV12(frame, inputFrameBuffer, width, height);
# copy Y plane
System.arraycopy(inputFrameBuffer, 0, inputFrameBufferWithPadding, 0, inputFrameBuffer.length);
int offset = width * height;
# copy U and V planes aligned by <padding> boundary
System.arraycopy(inputFrameBuffer, offset, inputFrameBufferWithPadding, offset + padding, inputFrameBuffer.length - offset); 
```

# php - 如何在 Heroku 上的 Rails 应用程序中的子 URI 上运行 Wordpress 博客

> ID：15739685
> 
> 赞同：0
> 
> 时间：2013-04-01T07:49:18.103
> 
> 标签：php, ruby-on-rails, wordpress, heroku, rack

我有一个需要博客的 Rails 应用程序。我查看了各种 rails cms 和博客引擎，但没有一个能满足我的需求。我想在子 uri www.example.com/blog 上添加 Wordpress。我的应用程序托管在 Heroku 上。我可以在 heroku 上独立安装 wordpress 作为单独的应用程序，我尝试使用 .htaccess 文件将 wordpress 添加到公共文件夹，如下所示：

```
RewriteEngine On  
RewriteRule ^([^\.]+[^/])$ http://%{HTTP_HOST}/$1/ [R=301,L]  
RewriteBase /  
RewriteCond RewriteCond %{REQUEST_URI} ^/blog.*$
RewriteCond %{DOCUMENT_ROOT}/-%2 -d  
RewriteRule ^(.*)$ -%2/$1 [QSA,L] 
```

但无济于事。我不能使用反向代理，因为我希望在 Rails 应用程序和 wordpress 安装之间有 SSO（和共享导航栏等，并且真的不希望 wordpress 和我的应用程序成为 heroku 上的“单独”应用程序）。有没有办法做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:25:50.793

我会看看[wordpress-heroku](https://github.com/mhoofman/wordpress-heroku)

就子 URI 而言，当没有必要时，您会开始让事情变得更复杂。如果您愿意，您可以运行两个 Heroku 应用程序，但不要使用文件夹路径，而是使用子域，以便您的主应用程序在 www.example.com 上运行，而您的博客在 blog.example.com 上运行。子域的使用在这样的用途中受到极大的尊重，并使事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:58:16.953

您是否能够访问服务器的虚拟主机文件？如果是这样，那么在服务器中添加以下内容可能是您的答案：

```
<VirtualHost ...>
  ServerName ...
  DocumentRoot ...
  <Location /blog>
     PassengerEnabled off
     <IfModule mod_rewrite.c>
       RewriteEngine On
       RewriteBase /blog/
       RewriteCond %{REQUEST_FILENAME} !-f
       RewriteCond %{REQUEST_FILENAME} !-d
       RewriteRule . /blog/index.php [L]
     </IfModule>
  </Location>
</VirtualHost> 
```

但是我想这也取决于 rails 应用程序的部署方式以及公用文件夹是否在部署时更新。您可能需要对公用文件夹进行符号链接，以便在每次部署站点时都不会更新它。

我不能说这是否适用于从未使用过他们服务的 Heroku，但希望它会有所帮助。

来源：http: [//ziyedbd.wordpress.com/2012/05/11/deploying-wordpress-blog-inside-ruby-on-rails-application/](http://ziyedbd.wordpress.com/2012/05/11/deploying-wordpress-blog-inside-ruby-on-rails-application/)

符号链接信息： http: [//linux.byexamples.com/archives/19/how-to-create-symlink/](http://linux.byexamples.com/archives/19/how-to-create-symlink/)

# cakephp - 控制 Cake 中 ACL 拒绝访问时的重定向

> ID：15739691
> 
> 赞同：0
> 
> 时间：2013-04-01T07:49:39.813
> 
> 标签：cakephp

我在 Cake 2.2.4 中实现了 ACL（仅限组级），如下所示：

**Group.1**可以访问控制器

**Group.2**有权访问控制器/招聘人员

**Group.3**可以访问控制者/求职者

这一切都很好，但问题是当**Group.2**中的某人试图访问**控制器/求职者**中的某些内容时，我能做的最好的事情就是向他们显示一条消息`$this->Session->flash('auth')`，告诉他们他们无权访问。这在一定程度上是可以的，因为我对 Flash 消息有很多控制权，包括能够设置消息，甚至可以自定义通过元素生成的 HTML。

但是，该应用程序的用户抱怨说，仅仅刷新错误的同一页面是违反直觉的。这主要是因为在某些情况下，应用程序需要能够让一个用户同时在**Group.2**和**Group.3**中，因此 Flash 消息需要向用户传达如何“升级”他们的帐户以同时在这两个组中。

正因为如此，是否感觉立即重定向到带有“帐户更新”表单的新控制器操作会比带有表单链接的 Flash 消息或带有 (urgh) 嵌入表单的 Flash 消息更直观在里面（又是一次！）

问题是我想不出重定向用户的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:49:39.813

这已经在 CakePHP 2.3 中解决了，增加了`AuthComponent::$unauthorizedRedirect`

更多信息：[http ://book.cakephp.org/2.0/en/appendices/2-3-migration-guide.html#authcomponent](http://book.cakephp.org/2.0/en/appendices/2-3-migration-guide.html#authcomponent)

# perl - 在 perl 中创建 ZIP 文件而不使用 CPAN 模块

> ID：15739694
> 
> 赞同：-5
> 
> 时间：2013-04-01T07:49:54.800
> 
> 标签：perl, zip

我需要在 perl.enter 代码中创建一个 zip 文件，例如现有文件名是 2.csv 我想要一个脚本来使它成为 2.zip 我已经尝试过

```
my $file = 'dispatch_report_seg_flo.csv' ;
# Retrieve the namme of the file to archive.
print("Name the file to archive: ");

# Confirm the file exists, if not exit the program.
(-e $file) or die("Cannot find file `$file_nm`.\n");

# Zip the file.
print("Trying file name '$file.zip'");
system("zip 'dispatch.zip' '$file'");
my $file1 = 'dispatch.zip'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T09:10:31.537

除非文件名中包含单引号，否则这应该有效。这里有两种更好的方法：

1.  `system($EXECUTABLE, @ARGS)`，它不会不必要地生成 shell。

    ```
    system("zip", "dispatch.zip", $file); 
    ```

2.  `system($SHELL_COMMAND)`，这需要创建一个 shell 命令。

    ```
    # A poor substitute for String::ShellQuote's shell_quote
    sub shell_quote {
        my @s = @_;
        for (@s) { s/'/'\\''/g; $_ = "'$_'"; }
        return join(' ', @s);
    }

    system(shell_quote("zip", "dispatch.zip", $file)); 
    ```

    显然，第一个解决方案更好，但如果您想做某种 shell 重定向，您可能想要使用这个解决方案。

    ```
    system(shell_quote("zip", "dispatch.zip", $file) . ' >/dev/null'); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:08:49.987

此链接可能对您有所帮助... 如果您想使用 perl 模块[压缩文件，请在 perl 中创建和读取 tar.bz2 文件，然后使用](https://stackoverflow.com/questions/13613737/create-and-read-tar-bz2-files-in-perl)

```
use IO::Compress::Zip qw(:all);

  zip [ glob("*.xls") ] => "test_zip.zip"
    or die "some problem: $ZipError" ; 
```

如果需要，将这些行添加到使用脚本中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T07:52:52.613

删除 ' 字符：

```
system("zip dispatch.zip $file"); 
```

# wpf - “路径”属性的简单 WPF 数据绑定语法

> ID：15739695
> 
> 赞同：1
> 
> 时间：2013-04-01T07:50:03.247
> 
> 标签：wpf, data-binding, binding, syntax, path

谁能解释为什么在设置绑定时，有时您会在绑定路径周围加上引号 -

```
<myObject.myProperty>
    <Binding Path="myData" />
<myObject.myProperty/> 
```

有时没有——

```
<myObject myProperty="{Binding Path=myData}" /> 
```

?

微软（[http://msdn.microsoft.com/en-us/library/ms752059.aspx#xaml_syntax_in_brief](http://msdn.microsoft.com/en-us/library/ms752059.aspx#xaml_syntax_in_brief)）状态 -

```
"An attribute syntax names the property that is 
 being set in attribute syntax, followed by the 
 assignment operator (=). The value of an attribute 
 is always specified as a string that is contained
 within quotation marks." 
```

但是这里我们总是在不带引号的情况下指定 Binding 元素的 Path 属性。我不了解 {} 语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:02:23.920

这不是数据绑定*本身*的特性。这同样适用于任何标记扩展。例如，您描述的引号/无引号变体也可以通过`StaticResource`标记扩展找到，如本示例所示：

```
<StackPanel>
    <StackPanel.Resources>
        <SolidColorBrush x:Key="b" Color="Red" />
    </StackPanel.Resources>

    <TextBlock
        Foreground="{StaticResource b}"
        Text="Foo"/>
    <TextBlock
        Text="Foo">
        <TextBlock.Foreground>
            <StaticResource ResourceKey="b" />
        </TextBlock.Foreground>
    </TextBlock>
</StackPanel> 
```

归结为：如果您使用 XML 元素来实例化标记扩展（例如`Binding`or `StaticResource`）并且如果您将属性设置为属性，则 XML 的语法规则需要引号。这不在 XAML 的控制范围内 - XML 语法要求所有属性值都用引号引起来。

但是，如果您使用标记语法扩展（即 {...}），引号对于您在这些大括号内设置的属性是可选的。这是因为标记扩展语法不是 XML 的特性。这是 XAML 的一项功能，因此 Microsoft 可以控制语法。标记扩展的一个目标是减少冗长，并且由于 Microsoft 可以将引号设为可选，因此他们这样做了。（事实上​​，需要引号会很麻烦，因为这样您就容易陷入转义问题 - 当标记扩展是属性的值时，它已经用引号括起来了，因此需要嵌套引号可能会变得很混乱。）

顺便说一句，还有第三种语法：

```
<myObject.myProperty>
    <Binding>
        <Binding.Path>myData</Binding.Path>
    </Binding>
<myObject.myProperty/> 
```

A`Binding`与 XAML 中的任何其他对象一样只是一个对象，因此您可以使用属性或属性元素设置其属性。通过设置`Path`为属性元素，我可以将其值作为该属性元素的内容提供。XML 语法规则不需要在元素内容周围加上引号，因此我再次省略了引号。

所以这一切都归结为 XML 的数据需要引用的规则。它与 XAML 没有太大关系，并且完全不特定于数据绑定。

# java - javax.annotation.security 不是基于角色的访问控制？

> ID：15739698
> 
> 赞同：1
> 
> 时间：2013-04-01T07:50:16.933
> 
> 标签：java, security, annotations, rbac

当我查看[基于角色的访问控制](http://en.wikipedia.org/wiki/Role-based_access_control)(RBAC) 时，我看到了一个模型，其中用户是一个或多个角色的成员，并且角色拥有授予操作的权限。也就是说，操作（例如方法）必须确保主体授予该操作的权限。主体的角色拥有这些权限。

```
 [subject] * <-> * [role] * <-> * [permission] * <-> * [operation] 
```

但是，当我查看 javax.annotation.security 包时，它定义了一个更简单的模型，该操作只检查角色名称。据我所知，这不是 RBAC，而是相当于基于组的权限检查。管理员无法将操作分配给角色，但仍坚持开发人员的决定。我希望这会显着增加角色的数量，并使系统更难维护。

```
 [subject] * <-> * [role] * <-> * [operation] 
```

我对此的理解是正确的还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-13T04:47:55.093

权限是（资源，操作），而不是`[subject] * <-> * [role] * <-> * [permission] * <-> * [operation]`.

包装很旧，`javax.annotation.security`不是很灵活。您可以使用 Casbin：[https ://casbin.org/](https://casbin.org/)

# c++ - 绘制小地图（游戏）

> ID：15739702
> 
> 赞同：1
> 
> 时间：2013-04-01T07:50:37.180
> 
> 标签：c++, opengl, sdl

我正在制作一个 rts 游戏，并创建了一个包含地图图块的二维数组。我想将其传输到图像（无符号整数或 sdl 表面？），我可能会将其绘制到 gl Quad 上。我可能只使用 2 个 for 循环来绘制每帧的整个地图。问题是，我不知道如何做到这一点的语法。

我希望地图大小灵活（可能总是正方形），因此小地图也必须灵活。

如果我能找到如何从头开始创建图像的语法（或了解如何将 unsigned int 解释为图像？）并绘制每个像素，这将完全解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:51:44.517

您可以首先使用[SDL_CreateRGBSurface](http://sdl.beuc.net/sdl.wiki/SDL_CreateRGBSurface)（链接有教程）创建一个[SDL_Surface ，并使用所需的地图高度和宽度。](http://sdl.beuc.net/sdl.wiki/SDL_Surface)

```
SDL_Surface *map = SDL_CreateRGBSurface(Uint32 flags, int width, int height, int bitsPerPixel, Uint32 Rmask, Uint32 Gmask, Uint32 Bmask, Uint32 Amask); 
```

获得表面后，您可以使用以下方法访问表面的像素

```
map->pixels    //pointer to the start of pixel data for map 
```

当您想要调整地图大小时，您可以使用新大小创建一个新的 SDL_Surface 并使用图像缩放算法将像素转换为它，然后删除旧表面并将新表面用作地图

# ios - 在核心数据中插入对象后如何重新加载表格视图

> ID：15739704
> 
> 赞同：4
> 
> 时间：2013-04-01T07:50:42.890
> 
> 标签：ios, objective-c, core-data

我正在尝试通过此代码在 Core Data 中插入一些对象

```
- (void)insertNewObject: (NSArray *) userInfo // Заносит блюдо в локальную базу данных
{
   for (int i = 0; i < userInfo.count; i++) {
       billContent * bc = [userInfo objectAtIndex:i];
       NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
       NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
       NSManagedObject *nmo = [NSEntityDescription insertNewObjectForEntityForName:[entity name]
                                                                      inManagedObjectContext:context];
       [nmo setValue:CountID forKey:@"billId"];
       [nmo setValue:bc.billAmount forKey:@"courseCount"];
       [nmo setValue:bc.billCourseId forKey:@"courseId"];
       [nmo setValue:bc.billPrice forKey:@"coursePrice"];
       [nmo setValue:bc.billTitle forKey:@"courseTitle"];
       [self saveContext];
   }
}

- (void)saveContext {
   NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
   NSError *error = nil;
   if (![context save:&error]) {
       NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
       abort();
   }
} 
```

如何在我的表格视图中查看这些对象？

在插入后，我试图通过这段代码从核心数据中获取

```
[self makeAList]; 
```

和这里

```
-(void) makeAList {
id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:0];
for (int i = 0; i < [sectionInfo numberOfObjects]; i ++) {
    NSIndexPath *ip = [NSIndexPath indexPathForRow: i inSection:0];
    billContent *bc = [[billContent alloc] init];
    NSManagedObject *mo = [self.fetchedResultsController objectAtIndexPath:ip];
    bc.billId = [[mo valueForKey:@"billId"] description];
    bc.billTitle = [[mo valueForKey:@"courseTitle"] description];
    bc.billPrice = [[mo valueForKey:@"coursePrice"] description];
    bc.billAmount = [[mo valueForKey:@"courseCount"] description];
    bc.depId = [[mo valueForKey:@"departmentId"] description];
    bc.billCourseId = [mo valueForKey:@"courseId"];
    [saved addObject:bc];
}
[countView1 reloadData]; 
```

}

但没有任何效果。但是如果我退出这个类，并再次输入它（加载 viewDidLoad）我可以看到新值，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T08:13:45.113

您应该覆盖 fetchedResultController 中的一些标准方法。看下面的代码：-

```
 -(void) controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

-(void) controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
}

-(void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

UITableView *tableView = self.tableView;

switch (type) {
    case NSFetchedResultsChangeInsert:
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeUpdate: {
        Course *changedCourse = [self.fetchedResultsController objectAtIndexPath:indexPath];
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        cell.textLabel.text = ...;
    }
        break;

    case NSFetchedResultsChangeMove:
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;
} 
```

}

```
-(void) controller:(NSFetchedResultsController *)controller didChangeSection:(id<NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
switch (type) {
    case NSFetchedResultsChangeInsert:
        [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;
    case NSFetchedResultsChangeDelete:
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;
} 
```

}

# javascript - ASP MVC css/js 包：包参数的长度和名称“?v=1234567890”

> ID：15739706
> 
> 赞同：0
> 
> 时间：2013-04-01T07:50:54.743
> 
> 标签：javascript, asp.net-mvc, bundle

在 ASP MVC 中，您可以使用 bundles 函数。

该代码通常会产生类似的结果：

```
/js/jquery?v=1A_Qqa6eu1hIFc9O--lfxRqvbqGj9Zd6uAr93zLdrWM1 
```

是否有任何选项可以控制参数“v”的名称并控制令牌的长度？

可以说我期待一个较短的版本，其模式如下：

```
/js/jquery?x=3457936 
```

有什么选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:01:07.980

> 是否有任何选项可以控制参数“v”的名称并控制令牌的长度？

不，没有。这些值在`System.Web.Optimization`程序集中硬编码。这是执行此操作的内部方法的摘录：

```
internal string GetBundleUrl(BundleContext context, [Optional, DefaultParameterValue(true)] bool includeContentHash)
{
    string bundleVirtualPath = context.BundleVirtualPath;
    if (includeContentHash)
    {
        bundleVirtualPath = bundleVirtualPath + "?v=" + this.GetBundleResponse(context).GetContentHashCode();
    }
    return AssetManager.GetInstance(context.HttpContext).ResolveVirtualPath(bundleVirtualPath);
} 
```

该`GetContentHashCode`方法计算文件内容的 SHA256 校验和。

# java - 将 ActionListener 添加到 Panel - Panel 实现 ActionListener vs Panel HAS A ActionListener

> ID：15739710
> 
> 赞同：1
> 
> 时间：2013-04-01T07:51:27.707
> 
> 标签：java, swing, inheritance, actionlistener, composition

我为我的程序制作了一个面板。它仅由 RadioButtons 组成。选择单选按钮时，我想在其他代码中设置一个布尔值。该面板将用作更大面板或框架的组件，该面板或框架也应该能够侦听该面板内发生的事件。

那么，我应该选择以下哪个选项来收听事件 -

1 -

```
RadioButtonPanel extends JPanel implements ActionListener{

  public void actionPerformed(ActionEvent e){}
  //code to add the action listener to the radio buttons 
  oneRadioButton.addActionListener(this);   
} 
```

2 -

```
RadioButtonPanel extends JPanel{

  class InnerStrength implements ActionListener{
     public void actionPerformed(ActionEvent e){} 
   }    

  //code to add the action listener to the radio buttons     
  oneRadioButton.addActionListener(Anonymous InnerStrength) 

} 
```

3 - 还有其他我没有想到的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:21:26.777

*选项 3\. 如果您可以通过使用*它来达到目标​​，则根本不要*扩展*JPanel :-)

 *所有 JSomething 都具有旨在按原样使用的内置功能。JPanel 的内置功能是通用容器的功能。由于您所做的只是添加子项，因此无需扩展 - 可以在...配置代码中配置带有侦听器的子项。

如果扩展确实增加了功能（对于可能正在实现自定义背景绘制的 JPanel），一般规则是 - 与行为良好的 OO 公民一样 -*永远不要*公开不打算供公众使用的公共 api：因此，变体 1 是不是一个选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T07:57:13.537

将`add/RemoveActionListener`方法添加到您的面板。使用这些作为代理单选按钮并`ActionListener`直接注册到它

或者，您可以提供一个`isSelected`返回单选按钮状态的方法。*

# android - 如何使用onListItemClick导航到android中的另一个屏幕

> ID：15739723
> 
> 赞同：0
> 
> 时间：2013-04-01T07:52:35.310
> 
> 标签：android, android-layout, listitem

我对 Android 开发有点陌生。您能否告诉我，如何使用`onListItemClick`. 我有 200 个项目`ListView`。如果我从 中单击一个项目`ListView`，它必须导航到另一个屏幕，该屏幕应显示所单击项目的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:05:22.353

我假设您正在从数据库中获取演员的列表和详细信息。我使用相同的演练在我的应用程序中显示所选食谱的食谱详细信息。

```
 public class ActorList extends Activity {

       ListView myActorList=null;

public final static String selectedActor_ID="will Keep Actor ID";

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

        setContentView(R.layout.layout_actor_list);     

        //initialize controls

            myActorList.setAdapter(adapter);

            myActorList.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View v,
                        int position, long id) {
                    // TODO Auto-generated method stub

                    Intent i= new Intent(ActorList.this,ActorDetail.class);
                    // you have to pass the actor id to next activity
                    // you can get this actor id from argument of type "long"
                    i.putExtra(selectedActor_ID, String.valueOf(id));
                    startActivity(i);

                }           

            });

    }

}

//Other Activity To show Detail..

//get the ID of Selected Actor on other activity say "ActorDetail"

public class ActorDetail extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_actor_detail);

        ActorID=getIntent().getStringExtra(ActorList.selectedActor_ID);
// now as you have the id here for that particular actor
//fetch the detail of that selected actor thru id and bind it to your layout.       

    }

} 
```

您还需要像这样在清单文件中注册其他活动

```
<activity 
            android:name=".otherscreenActivity" 

        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:14:11.193

为了得到你想要的，你可以做这样的事情......

1>使用某些控件创建另一个活动，您可以在其中放置您的值...

2>在listview的itemclick（）上... a>创建意图并设置值以传递给新活动b>以此意图开始新活动。

3>在新活动的oncreate()中a>从意图中检索值b>使用这些值填充您的控件...

# ruby-on-rails - 在 Rails 中的请求之间如何保持 Flash 消息？

> ID：15739733
> 
> 赞同：3
> 
> 时间：2013-04-01T07:53:23.363
> 
> 标签：ruby-on-rails

我正在关注的教程有以下代码，它提到的代码不太正确，因为错误闪存持续一个请求的时间比预期的要长，因为`render`不算作请求。解决方案是`flash.now`改用。

但是错误闪现怎么可能持续一个额外的请求呢？鉴于 Rails 是无状态的，如何为下一个请求存储闪存的信息？

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      # Sign the user in and redirect to the user's show page.
    else
      flash[:error] = 'Invalid email/password combination' # Not quite right!
      render 'new'
    end
  end

  def destroy
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-04T09:27:09.620

使用`flash.now`而不是`flash`.

flash 变量旨在在重定向之前使用，它会在一个请求的结果页面上持续存在。这意味着如果我们不重定向，而是简单地渲染一个页面，flash 消息将持续存在两个请求：它出现在渲染的页面上但仍在等待重定向（即第二个请求），因此消息如果您单击链接，将再次出现。

为了避免这种奇怪的行为，在渲染而不是重定向时，我们使用 flash.now 而不是 flash。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:58:23.783

flash 存储在用户的[Session](http://guides.rubyonrails.org/action_controller_overview.html#session)中，该 Session 在使用 HTTP cookie 的后续请求中与他们相关联。闪存只是会话的一部分，其数据会在下一次请求时自动刷新。有关详细信息，请参阅[动作控制器的 Rails 指南](http://guides.rubyonrails.org/action_controller_overview.html)。

# javascript - 如何以不同的方式命名每个 jQuery Raty 隐藏输入元素？

> ID：15739735
> 
> 赞同：3
> 
> 时间：2013-04-01T07:53:30.813
> 
> 标签：javascript, jquery, jquery-plugins, jstl, raty

我正在使用[jQuery Raty 插件](http://wbotelhos.com/raty/ "jQuery Raty 插件")在我的网站上启用星级评分系统。

我有一组 4 个可评分的问题（也可以是 5 个），我使用循环动态显示这些问题。因此，为了显示我正在使用的 div id 的星星，如下所示：

```
 <c:forEach items="${myQuestionList}" var="singleQuestion" varStatus="status">

        <p>${singleQuestion.text}</p>

        <div id="star${status.index+1}"></div>

    </c:forEach> 
```

而Raty初始化代码如下：

```
$("div[id^=star]").raty({ 
                         width: 300
                      }); 
```

这工作得很好。我所有的 4（或 5）个问题都会显示出来，Raty 星星也会显示出来。

现在的问题是这个评级是在一个表单中并且需要提交。但问题是 Raty`<input type="hidden" name="score">`为每个 Raty 附加了一个，因此当提交表单时，不可能说出哪个评级是针对哪个问题的。

有没有办法可以为每个 Raty 隐藏输入元素分配一个不同的名称，这将有助于我将其与所提出的问题联系起来。

Raty 文档说我可以将乐谱名称更改为任何名称：

```
$('#star').raty({ scoreName: 'myscore' }); 
```

但这对我没有帮助，因为我正在为所有元素初始化一次 raty 插件。

我怎么解决这个问题？请指导。我被困住了。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:26:51.590

好的，我自己解决了。

以下是任何卡在同一点上的人的解决方案：

```
scoreName: function(){
                    return $(this).attr('id');
                } 
```

这会将分数名称设置为 id 名称。您也可以将其设置为其他任何值。

# ios - 如何在tableView中加载更多单元格

> ID：15739739
> 
> 赞同：0
> 
> 时间：2013-04-01T07:54:05.873
> 
> 标签：ios, objective-c, ipad

我正在编写一个 iPad 应用程序并在我的应用程序中显示 tableView。我在 tableview 中有两个选项：

1.  `includeAll`
2.  `ExcludeAll`

一旦我点击`IncludeAll`所有的单元格应该被选中。我正在加载超过 10000 条记录。一旦我选择包含所有我收到一条错误消息。

错误信息是

```
malloc: *** mmap(size=2097152) 失败（错误代码=12）
*** 错误：无法分配区域
*** 在 malloc_error_break 中设置断点进行调试

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T08:47:08.957

谷歌搜索将揭示很多关于使用仪器来了解你的记忆发生了什么的教程：

如何调试内存泄漏：（教程） [http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

另一个：查找 Obj-C 内存泄漏（视频） [http://www.youtube.com/watch?v=R449qEuexNs&feature=related](http://www.youtube.com/watch?v=R449qEuexNs&feature=related)

可能是因为您的模拟器能够分配约 500Mb 的内存，而您的 iPad 无法做到这一点。我认为你应该重新考虑你在做什么

你真的需要这么多内存吗？它不只是一个计算错误吗？（可能是错误的 sizeof 或其他）在任何情况下，这确实是需要处理的数据太多

# ruby-on-rails - 部分形式的 div 标签问题

> ID：15739741
> 
> 赞同：1
> 
> 时间：2013-04-01T07:54:08.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我使用了 div id 标签，它曾经让我在 index.html 中下拉它工作正常，当我以部分形式使用它时，div 部分不起作用。我也使用过 JavaScript 和 Ajax。

代码是这样的。。

`<div title="Show More" class="show_more"></div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:35:05.957

如果问题是在添加部分之后，您的代码可能需要添加

```
locals: 
```

或者

```
collection: 
```

有关如何将[变量传递到部分 Rails 3 的更多信息，请参阅这篇文章？](https://stackoverflow.com/questions/4700617/pass-a-variable-into-a-partial-rails-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:29:46.403

javascript没有被调用，所以我不得不以我的部分形式再次使用它并且它有效。

# android - 是否可以使用 Native Android Map v2 在 android map polyline 中指示对象的方向？

> ID：15739746
> 
> 赞同：2
> 
> 时间：2013-04-01T07:54:22.167
> 
> 标签：android, google-maps

我使用 Google Map API V2 在 Google Map 上绘制折线。这条折线正确连接了我的所有标记。但我需要在折线上显示箭头标记以指示物体的移动。

*   是否可以在 Native Android Map V2 API 中执行？还是我想移动 Webview 谷歌地图？
*   我读了[webview 地图不支持捏选项](https://stackoverflow.com/questions/5947253/use-google-maps-javascript-api-in-a-webview-or-mapview-directlyadvantages-and-d)，所以放大，缩小选项仅在按钮中可用。是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:05:19.367

据我所知，Google Map API V2 不支持`polylines`当前时间的定向，我认为这存在一个问题：

[code.google.com/p/gmaps-api-issues/issues/detail?id=4884](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4884) （感谢@MaciejGórski）

我从未使用过 webView 地图，所以我不知道。

**更新**

最近，Google 在 Google Maps Android API v2 中为折线实现了此功能，并将问题 4884 标记为已修复。

他们添加了使用自定义位图自定义多段线的起点和终点的功能。使用它，您将能够向折线添加箭头。

[请参阅形状指南](https://developers.google.com/maps/documentation/android-api/shapes#line_caps)中有关线帽的信息。请参阅折线和多边形教程中的[示例](https://developers.google.com/maps/documentation/android-api/polygon-tutorial#add_custom_styling_to_your_polyline)。

您还可以在此处阅读相应的博客文章：

[https://maps-apis.googleblog.com/2017/02/styling-and-custom-data-for-polylines.html](https://maps-apis.googleblog.com/2017/02/styling-and-custom-data-for-polylines.html)

# javascript - 从 javascript 函数中退出

> ID：15739753
> 
> 赞同：2
> 
> 时间：2013-04-01T07:55:16.790
> 
> 标签：javascript, jquery

我在很多地方看到了类似的问题，但无法解决。

这是我的功能：

```
function validate_form(){
     $('#form_data input[type="text"]').each(function(){
            value = $(this).val().trim();
            if(value != '' && value != null && value != 0 ){
                   return true;
            }
     });
     return false;      
} 
```

它没有退出`return true;`。我也试过`e.preventDefault()`但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:59:00.137

`return`将从它所在的函数返回。在您的代码中，这是您传递给`each`. 请参阅[每个文档](http://api.jquery.com/each/)：

> 您可以通过返回从回调函数中停止循环`false`。

您正在返回`true`，而不是`false`因此您没有停止循环。转到函数`true`的`false`第 5 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:06:00.710

```
function validate_form(){
     $texts=$('#form_data input[type="text"]'); //cache the object
     var len = $texts.length;
     var validItems=0;
     $texts.each(function(){
            value = $(this).val().trim();
            if(value === ''){ // value of a text input cannot be null
                              // or zero unless you've changed in with JS
                   return false;
            }
            validItems++;
     });
     return len===validItems;      
} 
```

该函数不会准确显示哪些项目无效，如果任何项目无效，则仅返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:57:32.833

`.each()`在从主函数体返回之前，您必须先完成。您可以保留遇到的有效条目的计数器，并让返回值取决于：

```
function validate_form()
{
    var items = $('#form_data input[type="text"]'),
    count = items.length,
    valid = 0;

    items.each(function() {
        value = $(this).val().trim();
        if (value != '' && value != null && value != 0 ) {
            ++valid;
        }
    });

    return valid !== count;
} 
```

`false`顺便说一句，如果至少有一个无效条目，我已将返回值更改为；假设您将其用作`onsubmit="return validate_form()"`.

# windows - 如何使用批处理文件将程序最小化到托盘

> ID：15739758
> 
> 赞同：0
> 
> 时间：2013-04-01T07:56:03.393
> 
> 标签：windows, batch-file, cmd

您将如何使用批处理文件或 cmd 最小化正在运行的 Windows 服务让我们说 firefox.exe 启动并最小化或最小化到系统托盘运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T08:33:44.633

您调用 start /min firefox 它将开始最小化。但是，请注意不要在 Firefox 窗口打开的情况下执行此操作，因为除非您启动新会话，否则它不会执行此操作。除非软件本身具有为此的开关，否则批处理无法在系统托盘中启动事物。但这不是批次问题

# facebook - 应该修复的按钮警告

> ID：15739759
> 
> 赞同：5
> 
> 时间：2013-04-01T07:56:05.357
> 
> 标签：facebook, facebook-like

当我使用 Facebook 调试器检查[我的网站](https://sites.google.com/site/wheresthezbfairlane/)时，它会给出以下消息：

> **应该修复的按钮警告**
> 
> *缺少管理员和应用 ID：*
> 
> 缺少 fb:admins 和 fb:app_id 标签。这些标签对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。
> 
> *喜欢按钮标签丢失：*
> 
> og：类型丢失。og:type 元标记对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。
> 
> *喜欢按钮标签丢失：*
> 
> og：图像丢失。og:image 元标记对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。*

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T00:12:07.623

我遇到了同样的问题，并通过在我的 HTML 的元标记中包含一些开放的图形数据来解决它：

```
<meta property="og:type" content="website" />
<meta property="og:title" content="My Site">
<meta property="og:image" content="http://mysite.com/logo.png">
<meta property="og:url" content="http://mysite.com"> 
```

# vim - “范围”函数是否可以返回值

> ID：15739762
> 
> 赞同：1
> 
> 时间：2013-04-01T07:56:23.230
> 
> 标签：vim

以下简单函数应该计算并返回视觉选择的行数：

```
fu! TQ84_fu_test() range 

    return line("'> ")  - line("'<") + 1

endfu 
```

如果我试着这样称呼它

```
:'<,'>echo TQ84_fu_test() 
```

Vim 给了我错误`E481 No range allowed`（以某种方式记录）

是否还有一种方法可以规避这种行为，以便我可以“获取”在某个范围内运行的函数的返回值。

我假设我可以在函数中设置一个全局变量，并在函数被调用后读取这个全局变量，但是，如果可能的话，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:49:54.873

您不需要`'<,'>`在命令行中，因为该`:echo`命令不对范围进行操作。这不会阻止您的函数使用仍然可以解决的`<`和标记。`>`

因此，只需在点击`:`use `Ctrl`-`U`后删除标记并使用`:echo TQ84_fu_test()`. 这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:22:58.743

`range`只适用于`:call`，不适用`:echo`。由于您不使用`a:firstline`/`a:lastline`附带的特殊变量`range`，因此您无需在此处打扰（使用视觉模式及其标记），无论如何。

# angularjs - Testacular：遇到声明异常

> ID：15739763
> 
> 赞同：4
> 
> 时间：2013-04-01T07:56:27.980
> 
> 标签：angularjs, jasmine, karma-runner

我在 angular.js 中定义了一个空模块：

```
angular.module('todoList', [], function () {

}) 
```

然后我想测试它，在我的 中`conf.js`，我加载了这些 javascript：

```
files = [
  JASMINE,
  JASMINE_ADAPTER,
  // lib
  '../js/lib/angular.min.js',
  '../js/lib/jquery-1.9.1.min.js',

  // our app
  '../js/project.js',

  // test file
  "test/*.js"
]; 
```

然后我想在测试文件中测试它：

```
describe('My own function', function(){
    beforeEach(module('todoList'));
}); 
```

但这一步告诉我

`FAILED My own function encountered a declaration exception`

我不明白为什么只是一个加载模块语句会导致错误

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:55:29.253

尝试在配置文件中包含 angular-mocks.js。

# f# - F# 工作流/开发过程

> ID：15739764
> 
> 赞同：8
> 
> 时间：2013-04-01T07:56:28.587
> 
> 标签：f#, tdd

（我使用的是“工作流程”这个词——不是异步工作流程的意义——而是“git 工作流程”的意义，也就是说，你如何将它用作你的开发的一部分）

在使用 F# 一段时间后，我开始开发我的第一个 F# 应用程序。我来自 c#/vb。在观看了各种演示/演讲（无论对错）后，我开始使用 fsi 作为主要的开发“引擎”并在该领域进行工作。如果我遇到需要调试的问题，我倾向于将有问题的函数分解成更小的部分并检查这些工作以尝试调试问题。

但是，为了使 fsi 中的代码量保持可管理性，一旦我对所做的工作感到满意，我会将其移动到 .fs 中并将 .fs 重新加载到 fsi 中。随着应用程序变得越来越大，这可能会开始变得有点笨拙，因为当我需要重构时，我最终不得不从 fs 文件中带回内容更改它运行的东西以使某些东西再次工作，然后再将代码推回进入 .fs 文件。此外，这种风格并不是真正的测试优先方法，因此我没有从构建一组测试中受益。（我也可能错过设置断点/步进代码的能力，在某些情况下，例如递归，诊断错误比分解函数的某些部分更快 - 尽管这可能在 VS11 中可用并且我没有设置对）..所以我想我'

我想知道其他人是否可以提供他们如何开发应用程序。您主要使用 fsi 还是从 tdd 开始。tdd 方法是否应该是主要的开发工具，而 FSI 是否应该更有选择性地用于帮助实现更复杂的算法、数据探索等

我看过[这个问题](https://stackoverflow.com/questions/1989487/f-development-and-unit-testing?rq=1)，显然它有助于指向 F# 的各种 tdd 框架，但我仍然有兴趣了解经验丰富的 F# 开发人员的工作流程。

很多谢谢

小号

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T09:16:42.750

我认为你在正确的轨道上。

开发过程是一个品味问题。无论如何，我会分享我的方法。

*   从几个`fs`文件开始。每个文件代表一个模块，它由一组彼此密切相关的功能组成。它不必从一开始就精确；你经常在模块之间移动东西。
*   准备好模块骨架后，创建一些`fsx`文件以进行快速测试。
*   创建一个测试项目并设置 NuGet 包。我经常一起使用 NUnit 和[FsUnit](https://github.com/dmohl/FsUnit)。
*   每当`fsx`脚本给出正确的结果时，将它们移至测试用例。*反复这样做。*
*   将 a 包含`Program.fs`到主项目中并编译为可执行文件，以便在需要时进行调试。

一般来说，F# REPL 是主要的开发引擎。它为我提供即时反馈并允许增量更改，这对原型设计非常有帮助。在 F# 中，TDD 不太重要，因为错误率远低于其他语言。而且我不会测试所有东西，只关注主要功能并确保高测试覆盖率。使用[testdriven.net](http://www.testdriven.net/)插件或[Visual Studio 2012 Premium 和 Ultimate](http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/19/visual-studio-2012-rc-what-s-new-in-code-coverage.aspx)可以为您提供有关测试覆盖率的有用统计信息。

使用 F# REPL 和 TDD，我几乎不必使用调试。每当出现错误行为时，我都会停下来思考。由于您的代码没有副作用，因此您可以轻松地对其进行推理。在很多时候推理和一些打印命令可以给我正确的答案。

您可以在 F# REPL 中通过[Unquote](https://code.google.com/p/unquote/)和[FsCheck](http://fscheck.codeplex.com/)使用 TDD 。前者通过报价提供测试，这令人印象深刻。后者使用随机测试方法，这在处理代码的极端情况时很有吸引力。当您的程序必须满足某些属性时，我发现它非常有用。但是，学习正确使用这些框架可能需要一些时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:05:09.917

[pad](https://stackoverflow.com/a/15740708/1243762)给出了一个很好的答案，对于 F# 的新手来说非常实用和有用。我将给出不同的方法，这样其他人就不会认为 F#'ers 只有一种方法。

注意：如果您对编程非常陌生，请坚持使用pad的答案，这对新程序员来说要好得多。

在[面向对象](http://en.wikipedia.org/wiki/Object-oriented_programming)的世界中，人们用对象来思考，在这样的语言中，我会从在纸上写下对象开始，并使用各种图表，如[用例](http://en.wikipedia.org/wiki/Use_case)、[状态转换](http://en.wikipedia.org/wiki/State_diagram)、[序列图](http://en.wikipedia.org/wiki/Sequence_diagram)等，直到我觉得我已经足够开始了在 C# cs 文件中创建对象，用方法、属性、事件等充实对象。

在函数世界中，我通常从抽象概念开始，并将它们转换为F# fs 文件中的可[区分联合](http://msdn.microsoft.com/en-us/library/dd233226.aspx)(DU)，跳过使用[REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)，即[F# Interactive](http://msdn.microsoft.com/en-us/library/dd233175.aspx)，然后开始添加一些函数。在我拥有一些功能后，我通过[NuGet使用](http://nuget.org/)[NUnit](http://www.nunit.org/)和[FsUnit](http://www.nunit.org/)设置了一个测试项目。由于 DU 是抽象的，测试用例通常更难编写，因此我为 DU 创建打印机，然后将它们插入到测试用例中，我在 NUnit 工具中捕获打印机输出的结果，以便剪切并粘贴回测试用例根据需要进行更改。有关为什么我不从头开始编写它们的示例，请参阅[这些示例。](https://github.com/jack-pappas/fsharp-logic-examples/blob/master/FSharpx.Books.AutomatedReasoning.Tests/completion.fs)

一旦我完成了抽象 DU，我就可以转到代码将人/具体形式转换为抽象 DU，并将抽象 DU 转换为人/具体形式。在某些情况下，这些将是[解析器](http://en.wikipedia.org/wiki/Parsing)和[漂亮的打印机](http://en.wikipedia.org/wiki/Prettyprint)。

我要说明的要点是，我不关注我使用的工具，而是关注问题的抽象概念，并在需要时引入工具。

我会注意到我也在[PROLOG](http://en.wikipedia.org/wiki/Prolog)中编程，并且我确实从 REPL 开始，并在逻辑工作后将代码移动到存储中。所以我不反对使用 REPL，它只是解决问题的另一种方式。

编辑

根据[Ken](https://stackoverflow.com/users/825637/ken)的请求，举个例子。

请参阅：[Discriminate Unions (F#)](http://msdn.microsoft.com/en-us/library/dd233226.aspx)并查找该部分
`Using Discriminated Unions Instead of Object Hierarchies`

因此，不是具有继承类型的圆形、等边三角形、正方形和矩形的基本形状类型，而是创建一个可区分的联合，如前所述：

```
type Shape =
| Circle of float
| EquilateralTriangle of double
| Square of double
| Rectangle of double * double 
```

由于您的问题会提出一个更好的独立问题，并获得比我所能提供的更详细的答案，因此我建议您提出这个问题。

此外，如果您搜索这方面的信息，也可以使用以下替换来搜索受歧视的联合 (DU)：

*   [代数数据类型](http://en.wikipedia.org/wiki/Algebraic_data_type)
*   [广义代数数据类型 (GADT)](http://en.wikipedia.org/wiki/Generalized_algebraic_data_type)
*   [标记工会](http://en.wikipedia.org/wiki/Tagged_union)
*   [变体](http://en.wikipedia.org/wiki/Variant_type)
*   变异记录
*   [不相交的联合](http://en.wikipedia.org/wiki/Disjoint_union)
*   总和类型

# javascript - 如何在javascript中更改上传到服务器的文件名？

> ID：15739768
> 
> 赞同：0
> 
> 时间：2013-04-01T07:57:07.473
> 
> 标签：javascript, jquery, html, file-upload

我有一个像这样的文件上传脚本

**HTML**

```
<input type = "file" name = "football" > 
```

上传名为**messi.png的文件时**

**PHP**

```
print_r($_FILE['football']['name']); 
```

输出是**messi.png**

我想在 javascript 中将文件名**messi.png**更改为**messi_fan.png**即

```
print_r($_FILE['football']['name']); 
```

给出**messi_fan.png**。请给我一个javascript解决方案。不需要php解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:52:35.813

我认为您应该在 JavaScript 中获取类型文件的值

```
var  url ='messi.png'; 
var name = url.replace(/^.*\/|\.[^.]*$/g, '') 
```

并使用带有url名称的额外字符串添加单独的字符串。同样使用concat字符串作为您的图像名称。您可以在php中通过$_post获取图像的值

# facebook-graph-api - 从 Graph API Explorer 到有效 url

> ID：15739769
> 
> 赞同：1
> 
> 时间：2013-04-01T07:57:12.717
> 
> 标签：facebook-graph-api, url-routing

如何**从 Graph API Explorer 进行转换：** GET=> [https://graph.facebook.com/1261653562?fields=id,name,albums.fields(photos.fields(picture,name),updated_time)](https://graph.facebook.com/1261653562?fields=id,name,albums.fields(photos.fields(picture,name),updated_time)) + Access_token=AAAC .... **到一个有效的 URL？**

**我试过** [https://graph.facebook.com/1261653562?method=GET&fields=id,name,albums.fields(photos.fields(picture,name),updated_time)?access_token=AAAC](https://graph.facebook.com/1261653562?method=GET&fields=id,name,albums.fields(photos.fields(picture,name),updated_time)?access_token=AAAC) .....

但这返回了我这个错误：

```
{
   "error": {
      "message": "Syntax error \"Expected end of string instead of \"a\".\" at character 63: id,name,albums.fields(photos.fields(picture,name),updated_time)access_token=AAACEdEose.........",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-15T03:59:02.307

改变 ”？” 在 access_token 到 "&" 之前

[https://graph.facebook.com/1261653562?method=GET&fields=id,name,albums.fields(photos.fields(picture,name),updated_time)?access_token=AAAC](https://graph.facebook.com/1261653562?method=GET&fields=id,name,albums.fields(photos.fields(picture,name),updated_time)?access_token=AAAC)

像这样：

[https://graph.facebook.com/1261653562?method=GET&fields=id,name,albums.fields(photos.fields(picture,name),updated_time)&access_token=AAAC](https://graph.facebook.com/1261653562?method=GET&fields=id,name,albums.fields(photos.fields(picture,name),updated_time)&access_token=AAAC)

# jquery - Flexslider 没有响应它的脚本？

> ID：15739771
> 
> 赞同：0
> 
> 时间：2013-04-01T07:57:15.747
> 
> 标签：jquery, wordpress, flexslider, autoplay

我正在建立一个 wordpress 站点并使用 flexslider 2.0 在页面上进行 som 幻灯片放映。我的问题是我似乎无法让幻灯片响应我在他们的脚本中所做的更改......即我设置了' `slideshow: false,`'但幻灯片仍然在页面上自动播放。我在代码中所做的其他更改似乎也没有效果。

该网站是： [http ://bjornkamdesign.no/?page_id=7](http://bjornkamdesign.no/?page_id=7)

我猜问题出在，`<head>`但我不知道从哪里开始！

这是来自我的 jquery.flexslider.js 文件

```
 //FlexSlider: Default Settings
  $.flexslider.defaults = {
    namespace: "flex-",             //{NEW} String: Prefix string attached to the class of every element generated by the plugin
    selector: ".slides > li",       //{NEW} Selector: Must match a simple pattern. '{container} > {slide}' -- Ignore pattern at your own peril
    animation: "slide",              //String: Select your animation type, "fade" or "slide"
    easing: "swing",               //{NEW} String: Determines the easing method used in jQuery transitions. jQuery easing plugin is supported!
    direction: "horizontal",        //String: Select the sliding direction, "horizontal" or "vertical"
    reverse: false,                 //{NEW} Boolean: Reverse the animation direction
    animationLoop: true,             //Boolean: Should the animation loop? If false, directionNav will received "disable" classes at either end
    smoothHeight: false,            //{NEW} Boolean: Allow height of the slider to animate smoothly in horizontal mode
    startAt: 0,                     //Integer: The slide that the slider should start on. Array notation (0 = first slide)
    slideshow: false,               //Boolean: Animate slider automatically
    slideshowSpeed: 2000,           //Integer: Set the speed of the slideshow cycling, in milliseconds
    animationSpeed: 600,            //Integer: Set the speed of animations, in milliseconds
    initDelay: 0,                   //{NEW} Integer: Set an initialization delay, in milliseconds
    randomize: false,               //Boolean: Randomize slide order

    // Usability features
    pauseOnAction: true,            //Boolean: Pause the slideshow when interacting with control elements, highly recommended.
    pauseOnHover: true,            //Boolean: Pause the slideshow when hovering over slider, then resume when no longer hovering
    useCSS: true,                   //{NEW} Boolean: Slider will use CSS3 transitions if available
    touch: true,                    //{NEW} Boolean: Allow touch swipe navigation of the slider on touch-enabled devices
    video: false,                   //{NEW} Boolean: If using video in the slider, will prevent CSS3 3D Transforms to avoid graphical glitches

    // Primary Controls
    controlNav: true,               //Boolean: Create navigation for paging control of each clide? Note: Leave true for manualControls usage
    directionNav: true,             //Boolean: Create navigation for previous/next navigation? (true/false)
    prevText: "Forrige",           //String: Set the text for the "previous" directionNav item
    nextText: "Neste",               //String: Set the text for the "next" directionNav item

    // Secondary Navigation
    keyboard: false,                 //Boolean: Allow slider navigating via keyboard left/right keys
    multipleKeyboard: false,        //{NEW} Boolean: Allow keyboard navigation to affect multiple sliders. Default behavior cuts out keyboard navigation with more than one slider present.
    mousewheel: false,              //{UPDATED} Boolean: Requires jquery.mousewheel.js (https://github.com/brandonaaron/jquery-mousewheel) - Allows slider navigating via mousewheel
    pausePlay: false,               //Boolean: Create pause/play dynamic element
    pauseText: "Pause",             //String: Set the text for the "pause" pausePlay item
    playText: "Play",               //String: Set the text for the "play" pausePlay item

    // Special properties
    controlsContainer: "",          //{UPDATED} jQuery Object/Selector: Declare which container the navigation elements should be appended too. Default container is the FlexSlider element. Example use would be $(".flexslider-container"). Property is ignored if given element is not found.
    manualControls: "",             //{UPDATED} jQuery Object/Selector: Declare custom control navigation. Examples would be $(".flex-control-nav li") or "#tabs-nav li img", etc. The number of elements in your controlNav should match the number of slides/tabs.
    sync: "",                       //{NEW} Selector: Mirror the actions performed on this slider with another slider. Use with care.
    asNavFor: "",                   //{NEW} Selector: Internal property exposed for turning the slider into a thumbnail navigation for another slider

    // Carousel Options
    itemWidth: 0,                   //{NEW} Integer: Box-model width of individual carousel items, including horizontal borders and padding.
    itemMargin: 0,                  //{NEW} Integer: Margin between carousel items.
    minItems: 0,                    //{NEW} Integer: Minimum number of carousel items that should be visible. Items will resize fluidly when below this.
    maxItems: 0,                    //{NEW} Integer: Maxmimum number of carousel items that should be visible. Items will resize fluidly when above this limit.
    move: 0,                        //{NEW} Integer: Number of carousel items that should move on animation. If 0, slider will move all visible items. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T11:56:21.327

我也有这个问题。我改变了前端并解决了。

```
 <script type="text/javascript" charset="utf-8">
     $(document).ready(function () {
       $('.flexslider').flexslider({
         slideshow: false
       });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:11:53.493

前端级别可能有一些覆盖，例如：

```
 <script type="text/javascript">
   jQuery(window).load(function(){
     jQuery('.flexslider').flexslider({
        slideshow: true,  
        });
    <script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T15:09:00.570

[这里](http://www.webtechresources.com/2012/01/flexslider-jquery-slider-plugin/)列出了您可以使用的其他选项。

# javascript - 如何为我的 JQuery 数组指定正确的列表？

> ID：15739774
> 
> 赞同：0
> 
> 时间：2013-04-01T07:57:38.377
> 
> 标签：javascript, jquery, asp.net

我的视图中有两个下拉列表，我正在尝试将其中一个放入数组中。第一个下拉列表名为“listOfDays”，第二个下拉列表名为“instructorString”。由于某种原因，代码从两个列表中检索文本并将它们放入数组中。如何为我的 JQuery 数组指定正确的列表？这是脚本。谢谢你的帮助。

```
 $(document).ready(function () {
            var trial = $('#instructorString').val();

            $('#saveBtn').click(function () {
                var checkList = new Array();
                $("select option:selected").each(function () {
                    if ($(this).is(':selected')) {
                        checkList.push($(this).val());

                    }
                    else
                        checkList.push('unchecked');
                });
                alert(checkList);
            });

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:05:54.750

指定您需要的选择的 ID ..并且您不需要`is(:selected)`部分，因为您的选择器 `option:selected`选择了所有仅选择的选项..

```
$('#saveBtn').click(function () {
            var checkList = new Array();
            $("#corectSelectID  option:selected").each(function () {
               // if ($(this).is(':selected')) { <---//you don't need this as the selector selects only selected option
                    checkList.push($(this).val());

            });
            console.log(checkList);
        }); 
```

如果您需要数组中未选中的值，则选择选择器中的所有选项

```
 $('#saveBtn').click(function () {
            var checkList = new Array();
            $("#corectSelectID  option").each(function () {
               if ($(this).is(':selected')) 
                    checkList.push($(this).val());
               else
                    checkList.push('unchecked');

            });
            console.log(checkList);
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:05:59.063

您只选择选定的选项，因此检查没有意义`is(':selected')`，因为它们都将被选中。要选择所有选项并根据状态推送不同的值：

```
$(document).ready(function () {
     var trial = $('#instructorString').val();
     $('#saveBtn').on('click', function () {
         var checkList = [];
         $("select[name='listOfDays'] option").each(function () {
             if ($(this).is(':selected')) {
                 checkList.push( this.value );
             } else { // you where missing brackets
                 checkList.push('unchecked');
             }
         });
         //alert(checkList); You can't alert an array
         console.log( checkList )
     });
}); 
```

要选择一个`select`基于名称，你会做`$("select[name='listOfDays'] option")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:08:32.660

代替`$("select option:selected")`

尝试 `$('select.Class_of_Correctlist ')`

`$("select option:selected")`将选择所有被选中的下拉选项。

```
$("select.correctList option").each(function () { 
              //correctlist is the class for the correct drop down
             if ($(this).is(':selected')) {
                 checkList.push( this.value );
             } else { //
                 checkList.push('unchecked');
             }
         }); 
```

# javascript - 在数字前添加标签或文本

> ID：15739781
> 
> 赞同：-1
> 
> 时间：2013-04-01T07:58:03.407
> 
> 标签：javascript, regex

我想在`<br>`此文本中添加一个

```
SD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURTSD0000000266675 - HORACIO PALACIOS 
```

像这样的东西（添加`br`标签）：

```
SD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURT<br>SD0000000266688 - HORACIO PALACIOS 
```

问题：文本**是动态生成的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:06:59.770

```
var t = "SD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURTSD0000000266675 - HORACIO PALACIOS"
var p = t.indexOf(t.split(/\s/)[0], 1);
t.substr(0, p) + '<br>' + t.substr(p) 
```

含义：取第一个单词（直到第一个空格），在字符串中的其他位置找到它，然后插入您要插入的任何内容。

编辑：根据您的评论，对于多行：

```
var t = "SD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURTSD0000000266675 - HORACIO PALACIOSSD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURTSD0000000266675 - HORACIO PALACIOSSD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURTSD0000000266675 - HORACIO PALACIOSSD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURTSD0000000266675 - HORACIO PALACIOSSD0000000266675 - JAIME ANDRES SAAVEDRA BETANCURTSD0000000266675 - HORACIO PALACIOS"
var d = t.split(/\s/)[0];
var s = t.split(new RegExp('(?=' + d + ')'));
s.shift();
s.join('<br/>') 
```

（仅在保证标识符不包含任何奇怪字符时才有效；如果不是，则改写或使用其中一个[`RegExp.escape`函数](https://stackoverflow.com/a/6318729/240443)都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:19:57.097

如果 Serial 以 SD 开头并且长度至少为 13，请尝试此 RE（正则表达式）：

```
Replace this:
/(SD[0-9]{13,}[\s]{0,1}-[\s]{0,1}.*?)/i
with:
<br>$1 
```

*在 php 中，您将为此使用 preg_replace 函数。*

# mysql - 如何查询最后一条记录

> ID：15739782
> 
> 赞同：0
> 
> 时间：2013-04-01T07:58:08.430
> 
> 标签：mysql, sql

所以，如果我有这张桌子：

```
 | ID  |   Date   |  Status  |  Value  |

    | 1   | 2-2-2012 |  A       |  5      |
    | 2   | 3-4-2012 |  B       |  3      |
    | 1   | 5-6-2012 |  C       |  1      |
    | 2   | 1-1-2012 |  D       |  4      | 
```

我需要获取每个 ID 的总值和“最新”状态，如何查询？我尝试使用 group by ，但查询结果中显示的只是最旧的状态。

我需要让数据变成这样：

```
 | ID  |   Date   |  Status  |sum(Value)|

    | 2   | 3-4-2012 |  B       |  7       |
    | 1   | 5-6-2012 |  C       |  6       | 
```

我是这个 SQL 的新手，不是 IT 人员，只是因为我的老板要求从我们的数据库中提取一些数据....

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:59:33.200

由于您没有提到任何 RDBM，因此下面的查询几乎适用于所有 RDBMS。

这使用一个子查询，它分别获取最新的`date`（*假设日期的数据类型实际上存储为`DATE`而不是作为字符串*）`ID`。然后将子查询的结果连接回表本身以获取其他列。

```
SELECT  a.ID, a.Date, a.Status, b.TotalSum
FROM    tableName a
        INNER JOIN
        (
            SELECT  ID, MAX(date) max_date, SUM(Value) totalSum
            FROM    tableName
            GROUP   BY ID
        ) b ON  a.ID = b.ID AND
                a.date = b.max_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0a3aa/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:01:28.893

如果您使用的是mysql，那么这将起作用

```
 SELECT id,date,status,sum(value) 
 FROM (select * from yourTable order by DATE desc ) t  
 group by ID 
 order by ID desc 
```

# c# - ASP.NET 网站不断随机退出

> ID：15739784
> 
> 赞同：1
> 
> 时间：2013-04-01T07:58:15.303
> 
> 标签：c#, asp.net

在我网站的本地版本上，您可以毫无问题地自由漫游。但是，当在网络上运行构建版本时，您会随机注销。

每当我点击离开 Internet 窗口时就会发生这种情况，但它也会在页面加载之间发生。

我的网络配置如下所示，

```
 <!--CONNECTION STRING-->
<connectionStrings>
<add name="RaiseFantasyLeagueConnectionString" connectionString="Data Source=MATT-PC\SQLEXPRESS;Initial Catalog=Raise;Integrated Security=True;MultipleActiveResultSets=True" providerName="System.Data.SqlClient"/>
</connectionStrings>
<system.web>
<customErrors mode="Off"></customErrors>
<sessionState timeout="30"></sessionState>
<!--MEMBERSHIP-->
<roleManager enabled="true" defaultProvider="SqlRoleManager">
    <providers>
        <add name="SqlRoleManager" type="System.Web.Security.SqlRoleProvider" connectionStringName="RaiseFantasyLeagueConnectionString" applicationName="MyApplication" />
    </providers>
</roleManager>
<membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="30">
    <providers>
    <clear/>
    <add name="SqlProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="RaiseFantasyLeagueConnectionString" applicationName="Raise Fantasy League" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0"/>
    </providers>
    </membership>
    <!--AUTHENTICATION-->
    <authentication mode="Forms">
        <forms name="RaiseFLAuthentication" loginUrl="home.aspx" cookieless="UseCookies" defaultUrl="/myPredictions.aspx" timeout="240"/></authentication>
    <!--AUTHORIZATION-->
    <authorization>
        <deny users="?"/>
        <allow users="*"/>
    </authorization> 
```

我被告知要放入我的网络配置中，但这并没有解决问题。

谁能告诉我我错过了什么？

我遇到的另一个问题是，如果我从主页登录，我不会被带到默认的 URL，而只是一个 404 页面。URL 甚至不会从默认地址更改。

谁能明白为什么会发生这种情况？

# c# - Linq - 如何进行两个选择查询？

> ID：15739785
> 
> 赞同：2
> 
> 时间：2013-04-01T07:58:22.493
> 
> 标签：c#, linq

```
SELECT userid FROM userTable 
WHERE userid in (select writeuserid FROM boardTable) 
```

C# LINQ 表达式，如何使用查询？

我一直在使用EF4。userTable、boardTable 连接到 DbContext。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:00:41.600

为什么不使用两个不同的 LINQ 查询，这样您的内部查询**就不会针对**外部查询的每次迭代执行。

```
var query1 = (from t in dbContext.boardTable
            select t.writeuserid).ToArray();

var query2 = from r in dbContext.userTable
             where query1.Contains(r.userid)
             select r.userid; 
```

如果您的情况与问题一样简单，那么您会导致[加入 linq](http://www.dotnetperls.com/join)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:06:02.977

为什么不使用加入？

```
var result = (from u in dbcontext.userTable 
join u1 in dbcontext.boardTable on u.userid equals u1.writeuserid
select u.userid).FirstOrDefault();

if (result != null)
 // do anything else
else
 // user not exists 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T08:03:06.947

假设在这里你使用了Entity FrameWork，所以你可以使用[`Join`](http://msdn.microsoft.com/en-us/library/bb534675.aspx)来获取结果，下面是使用lambda表达式：

```
var result = dbContext.Users.Join(dbContext.Boards, 
                                  user => user.UserId, 
                                  board => board.WriteUserId,
                                  (u, b) => u.UserId); 
```

# cakephp - 在 CakePHP 中使用指定的 ACL 组名而不是组 id 保存用户

> ID：15739786
> 
> 赞同：1
> 
> 时间：2013-04-01T07:58:23.723
> 
> 标签：cakephp

我按照[本教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)设置了一个带有 ACL 的 Cake 2.3.1 应用程序，所以我有一个用户表和一个组表。

一切正常，但我对如何保存新用户有点困惑，因为我不希望用户能够选择他们自己的组。该组将根据用户在表单上输入的许多内容进行选择，因此它将由控制器中的条件语句确定。

目前我正在这样做：

`$this->request->data['User']['group_id'] = '2';`（或 1、3 或 4，具体取决于控制器中的条件语句）。

然后，我正在保存`$this->data`. 这可行，但我希望能够指定组**名**而不是硬编码 id，这样当我们进入生产环境并清除数据库时，是否以不同的顺序添加组都没有关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:24:19.513

我看到了两种方法。

第一个我没有尝试过，但是它将组表的主键更改为组的名称并在组模型中设置primaryKey变量以及所有其他模型中与该表的所有后续引用和关联. 这可能会给您带来更多的头痛，我不推荐它，因为您可能会以某种方式破坏 ACL 组件。

另一种方法是我会做的，它需要您进行一些编程（据我所知，Cake 没有一种简单的方法来做到这一点）。在 User 模型中，放置一个 beforeSave 并在该函数中，使用组名创建一个虚拟变量，查找名称并插入正确的 id，然后删除该变量。

在 User.ctp 模型上

```
public function beforeSave() {
    if (isset($this->data[$this->alias]['group_name'])) {
        //do the lookup with the group_name
        $group = $this->Group->find('first', array('conditions'=>array('name'=>$this->data[$this->alias]['group_name'])));
        if (count($group) <= 0)
           //... throw an Exception or handle any way you want this case

        $real_group_id = $group['Group']['id'];
        $this->data[$this->alias]['group_id'] = $real_group_id;
        unset($this->data[$this->alias]['group_name']);
    }

    return true; //remember this is important! otherwise the save will stop
} 
```

当您想要更改用户的组或添加另一个用户时，只需在控制器中执行此操作， `$data_to_save['User']['group_name'] = 'webuser';` beforeSave 函数将处理其余部分。

我意识到您要求使用 Cake-easy 方法来执行此操作，但我想没有（虽然不确定，请随时纠正我），beforeSave 函数可以为您节省大量控制器上的重复代码。清除数据库或更改组 ID 时唯一需要小心的是将它们与数据库中已有的用户正确重新关联，但由于是“迁移到生产”更改，因此已经预定义的用户应该很少或没有任何。

# jquery - 页面中存在jQuery断言具有特定ID的元素的方式吗？

> ID：15739788
> 
> 赞同：1
> 
> 时间：2013-04-01T07:58:31.873
> 
> 标签：jquery

我打算`$("#foo") !== null`断言`id="foo"`页面中确实存在带有 的元素，但事实证明即使该元素不存在，选择器`$("#foo")`仍然返回一个对象。

所以要测试选择器是否能找到一个元素，应该

```
assert($("#foo").length >= 1); 
```

使用？我也想过使用`assert($("#foo").is("div")`but 如果 HTML 被更改，并且元素不是 a`div`而是变成`p`or `span`，那么它将破坏断言。断言元素确实存在的一种好的标准方法是什么？

jsfiddle 示例：http: [//jsfiddle.net/qnbAn/1/](http://jsfiddle.net/qnbAn/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:03:39.277

为什么不只是：

```
if ($("#foo").length){
    // element with id foo existed
} 
```

由于元素的 id 是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:04:30.650

利用

```
$('#elementId').Length > 0 
```

喜欢

[jQuery 是否有“存在”功能？](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:01:54.260

是的，您应该使用[长度](http://api.jquery.com/length/)来检查给定的选择器是否匹配任何内容。

不匹配的选择器会产生空的 jQuery 对象，但即使是空的 jQuery 对象也是有效的实例，并且`true`在布尔上下文中求值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:13:27.357

像这样简单地做到这一点

```
if($("#mydiv").length){
 // mydiv exist
} 
```

# php - 这段代码有什么问题 - 从主题选项中获取分类

> ID：15739793
> 
> 赞同：0
> 
> 时间：2013-04-01T07:59:09.777
> 
> 标签：php, arrays, wordpress, taxonomy, custom-post-type

我需要从自定义帖子分类中查询帖子（由用户从 WordPress 主题选项面板中设置）。

我正在使用以下代码：

```
<?php

 if ( function_exists( 'get_option_tree') ) {
     $taxonomy = get_option_tree( 'taxonomy_option' );
 }

 $args = array(
    'project_type' => $taxonomy,
    'show_count'   => 6,
    );

 query_posts($args); 

?> 
```

只要我输入，代码就可以工作`'project_type' => 'my taxonomy name'`。上面的代码有什么问题？如何将选项（选项树）放入 args 数组？稍后编辑：optiontree 函数呈现分类 ID。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:12:10.027

该函数`get_option_tree()`可能会给你一个数组，你应该检查一下

```
echo "<pre>".print_r($taxonomy,true)."</pre>"; 
```

**更新：**

在与@Ad Reactor 讨论后，我们发现`$taxonomy`输出是一个数字而不是 slug。为了得到蛞蝓，我们可以使用

```
$term = get_term( 1234, 'project_type' ); 
$slug= $term->slug; 
```

在哪里`1234`被真实的取代`term_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:03:43.520

我能看到的唯一问题`$taxonomy`是未初始化，因此如果您的条件不满足，`$taxonomy`则将是未定义的。

所以在你的条件`$taxonomy`之上定义。`if`

```
$taxonomy = '';
if ( function_exists( 'get_option_tree') ) {
..... 
```

# java - 访问静态字段时出现 NullPointerException

> ID：15739800
> 
> 赞同：2
> 
> 时间：2013-04-01T07:59:59.017
> 
> 标签：java, nullpointerexception

正如他们所说，System 是最终类，它的类型为 PrintStream 作为字段成员，而 println 是 PrintStream 类中的方法。

我创建了一个类型`UseNumber`为 no 的静态字段的类`Number`，只是想访问 Number 类的一个方法，但它正在抛出`NullPointerException`

```
public class Number {

    private int first;
    private int second;

    public int getFirst() {
        return first;
    }

    public void setFirst(int first) {
        this.first = first;
    }

    public int getSecond() {
        return second;
    }

    public void setSecond(int second) {
        this.second = second;
    }

} 
```

和 UseNumber 类

```
public class UseNumber {
    private static Number no;

    public static void main(String[] args) {
        UseNumber.no.setFirst(12); //throwing nullpointer exception here
        UseNumber.no.setSecond(22);
        System.out.println(UseNumber.no.getFirst()+UseNumber.no.getSecond());

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:04:54.273

## 回复：空指针异常

`setFirst`不是静态方法，它**需要**一个 Number 的实例。你没有创造一个。您刚刚声明了一个名为 的 Number 变量`no`。由于默认情况下它被初始化为 null，因此您将获得一个`NullPointerException`.

一种解决方法：

```
private static Number no = new Number(); 
```

在 UseNumber 中声明为静态的变量`no`仅意味着您将能够在*没有*UseNumber 实例的情况下访问该对象。但是这个静态声明不会级联到`no`. 正如您遇到的错误所强调的那样，它们仍然需要一个实例。

## 回复：System.out

`out`是的静态成员`System`- 但它已经是一个*实例化*的对象。

事实上，如果你查看 的代码`System`，你会发现这一行：

```
out = com.ibm.jvm.io.ConsolePrintStream.localize(new BufferedOutputStream(new FileOutputStream(FileDescriptor.out)), true); 
```

所以当你说：

```
System.out 
```

*系统*会给你它初始化的 PrintStream 对象调用*。*本质上，`System.out.println`这只是一个捷径：

```
PrintStream p = System.out;
p.println(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:17:33.370

当您尝试通过“.”访问空对象时，将引发 nullpointerException。操作员。在您指示抛出异常的行中，no 对象为 null，并且您尝试访问其 setFirst 方法，该方法当然会抛出 nullpointer 异常。

要修复错误，请初始化您的 no 对象，可能是这样的：

```
public class UseNumber {
private static Number no;

public static void main(String[] args) {
    UseNumber.no = new Number(); // Initialize here your no object 
    UseNumber.no.setFirst(12); //This line will no longer throw an exception.
    UseNumber.no.setSecond(22);
    System.out.println(UseNumber.no.getFirst()+UseNumber.no.getSecond());

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:12:09.113

也许你可以写一个接口方法来获取no的实例。在该方法中，您可以检查它是否为空，类似于我们使用单例模式的方式。

```
public class UseNumber {
 private static Number no;
 public static getNumberInstance() {
      if(no == NULL) {
         no = new Number(); //This will get executed only once, for first call.
      }
     return no;
 }
 public static void main(String[] args) {
    UseNumber.getNumberInstance().setFirst(12); 
    UseNumber.getNumberInstance().setSecond(22);
    System.out.println(UseNumber.getNumberInstance().getFirst() 
       +UseNumber.getNumberInstance().getSecond());

  }
} 
```

# linux - 如何从“#34 PREEMPT Mon Mar 25 14:24:26 SGT 2013” 中检索 34

> ID：15739805
> 
> 赞同：1
> 
> 时间：2013-04-01T08:00:30.550
> 
> 标签：linux

我是 Linux 新手，如何从`uname -v`命令中检索“34”？

我的`uname -v`命令结果是`#34 PREEMPT Mon Mar 25 14:24:26 SGT 2013`

我只想要34号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:02:13.607

怎么样：

```
[cnicutar@ariel ~]$ echo '#34 PREEMPT ...' | sed 's/^#\([0-9]\+\).*/\1/'
34 
```

您还可以使用以下方法使这更容易`-r`：

```
sed -r 's/^#([0-9]+).*/\1/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:02:52.707

使用[grep](/questions/tagged/grep "显示标记为“grep”的问题")仅显示`-o`与 a`#`后跟一个或多个 ( `+`) 数字 ( ) 匹配的行 ( ) 的匹配部分`[0-9]`：

```
uname -v | grep -o '#[0-9]\+' 
```

# java - 如何从电话联系人中获取联系人列表

> ID：15739807
> 
> 赞同：0
> 
> 时间：2013-04-01T08:00:44.273
> 
> 标签：java, android

```
btngal.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent i=new Intent(Intent.ACTION_PICK,android.provider.ContactsContract.Contacts.CONTENT_GROUP_URI);
                startActivityForResult(i,0);        
            }
        }); 

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // super.onActivityResult(requestCode, resultCode, data);
        if (resultCode != RESULT_CANCELED) {
            if (requestCode == 0) {
                Uri selectContact=data.getData();
                String[] filePathColumn={Contacts.CONTENT_URI.toString()};
                Cursor cursor = getContentResolver().query(selectContact,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
             filePath = cursor.getString(columnIndex);
                cursor.close();

            }
        }

    } 
```

在执行此操作时，我遇到以下错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.PICK dat=content://com.android.contacts/contacts/group } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:37:36.983

为了从本机 android 应用程序读取联系人，您需要权限，就像 manifest.xml 中的这样

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

确保你有那个。

# drupal-7 - Drupal 7 从内容类型获取图像

> ID：15739811
> 
> 赞同：0
> 
> 时间：2013-04-01T08:00:53.773
> 
> 标签：drupal-7

在我的静态 html 网站中，我有：

```
 <li><a href="img/img2.jpg" rel="gallery"  
class="pirobox_gall" title=""><img src="img/img2.jpg" alt=""/>
</a></li> 
```

在 Drupal 7 中，我如何从名为 Galery 的内容类型中获取指向图像的链接，其中包含以下字段：title 和 field_img(IMAGE)。需要PHP代码...

例如（它不工作）：

```
<?php
  $mycontent = getcontentby_name('Galery');
  foreach ($mycontent as $pic)
  {
     $link_to_pic = $pic['field_img']['link'];
     print $link_to_pic;   
  }
> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:24:57.087

```
<?php

    $result = db_query('SELECT n.nid FROM {node} n WHERE n.type = :ntype', array(':ntype' => 'galery'));

    foreach ($result as $record) {
    $node = node_load($record->nid);
    print '<img src="';
    print file_create_url($node->field_img['und'][0]['uri']);
    print '" alt=""/>';
    print file_create_url($node->field_img['und'][0]['uri']);
    }
?> 
```

此代码如果有 1 条“画廊”记录 - 1 张图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:15:13.610

通过 node_load($node_id) 加载您拥有图像/图像的节点，在此对象中您将拥有与该特定节点相关的几乎所有信息。

# php - 不允许在 mysql 表中插入同一行数据

> ID：15739813
> 
> 赞同：-2
> 
> 时间：2013-04-01T08:01:02.463
> 
> 标签：php, mysql

假设你有一个网站，用户可以提交他们的名字来参加一些课程。用户将填写一个表格，然后点击提交，他们的名字和电话号码将进入一个 mysql 数据库中的表格。我想做的是我想通过检查电话号码是否相同来防止用户两次提交他/她的姓名（我知道这样很傻，但我只是作为一个例子）。那我该怎么办？我是使用此方法将表单数据插入数据库：

```
 $pdo = new PDO('mysql:host=localhost;dbname=form', 'formuser', 'password');
    $fname = $_REQUEST['fname']; //first name from the form
    $lname = $_REQUEST['lname']; //last name from the form
    $pnumber = $_REQUEST['pnumber']   //phone number from the form
    $query = 'INSERT INTO list SET
          firstname = "' . $fname . '",
          lastname = "' . $lname . '",
          phonenumber ="' . $pnumber . '",
          date = CURDATE()';
    $pdo->exec($query); 
```

而且我知道这不是将数据插入数据库的安全方法。我再次尝试找出一种方法，然后部署更好的解决方案来提交数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:10:40.487

首先你需要检查电话号码
if (isset($_POST['your_button']))
{
$phone = $_POST['phonenumber'];
$query = "SELECT * FROM LIST WHERe phonenumber = '$phone'";
$result=mysql_query($query) 或死(mysql_error());
$row=mysql_fetch_array($result);
if($row>0){
echo "电话号码存在！"}
else{

$fname = $_REQUEST['fname']; //名字来自表单
$lname = $_REQUEST['lname']; //表格中的姓氏
$pnumber = $_REQUEST['pnumber'] //表格中的电话号码
$query = 'INSERT INTO list SET
firstname = "' . $fname .'",
lastname = "' . $lname . '",
phonenumber ="' . $pnumber . '",
date = CURDATE()';
$pdo->exec($query);

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:13:38.110

就像您在问题中所说的那样，您与 table 的通信是不安全的。

但要回答您的问题，这里有一个示例查询：

```
SELECT IF(COUNT(*) > 0, TRUE, FALSE)
    FROM list
    WHERE firstname = $fname
        AND lastname = $lname
        AND phonenumber = $pnumber 
```

我不熟悉`php`，也许你可以解决这个问题。*如果名字*、*姓氏*和*电话号码*`TRUE`重复，则查询输出。如果查询输出，您可以防止将记录插入到您的表中。***`TRUE`***

# php - 如何更改while循环中的重复次数？

> ID：15739815
> 
> 赞同：0
> 
> 时间：2013-04-01T08:01:27.877
> 
> 标签：php, mysql

我有一个 php 页面，其中有两个循环。此循环用于从数据库列中检索数据并按 stud_no 列以行组的形式打印。

这是一个代码：

```
<?php  
     $link=mysql_connect("localhost","xyz","toor") or die("Cannot Connect to the database!");
     mysql_select_db("dbase",$link) or die ("Cannot select the database!");
     $query2="SELECT stud_no FROM fees_master ORDER BY stud_no  ;";
     $resource2=mysql_query($query2,$link);

     $i=1;
     while($res=mysql_fetch_array($resource2)) {
        $lsd=$res[0];
        $query="SELECT stud_no,inst_amt FROM fees_master WHERE stud_no LIKE $lsd ;";

        $resource=mysql_query($query,$link);
        echo"<table align=\"center\" border=\"0.5\"> <tr>";

        while($result=mysql_fetch_array($resource)){ 

           echo "<td>".$i."</td>,";
           echo "<td>".$result[0].",</td>";
           echo "<td>".$result[1].",</td>,";
          if($result[0]!==$lsd)
          {
              echo"</tr></table>";
              break;
          }
        } 
}
?> 
```

运行此代码后，我得到以下输出：

[http://i.stack.imgur.com/qLvE5.png](http://i.stack.imgur.com/qLvE5.png)

请帮忙。我只想打印每个不同的行一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:10:10.303

更改 $query2 如下

```
$query2="SELECT DISTINCT stud_no FROM fees_master ORDER BY stud_no  ;"; 
```

# visual-studio-2010 - opencv 发生 max_analyze_duration 5000000 达到 5000000

> ID：15739817
> 
> 赞同：1
> 
> 时间：2013-04-01T08:01:29.507
> 
> 标签：visual-studio-2010, opencv, avi

我用opencv在vs2010中创建了一个项目，很简单，但是当我运行它时出现错误：

![在此处输入图像描述](https://i.stack.imgur.com/0HGj9.jpg)

这是我的代码：

```
#include "highgui.h"

int main() { 
cvNamedWindow( "VideoShow", CV_WINDOW_AUTOSIZE );
CvCapture* capture = cvCreateFileCapture("aa.avi");
IplImage* frame;
while(1) {
    frame = cvQueryFrame( capture );
    if( !frame ) break;
    cvShowImage( "VideoShow", frame );
    char c = cvWaitKey(33);
    if( c == 27 ) break;
}
cvReleaseCapture( &capture );
cvDestroyWindow( "VideoShow" );
return 0;
} 
```

# mysql - 将文件导入本地 mysql 服务器

> ID：15739819
> 
> 赞同：0
> 
> 时间：2013-04-01T08:01:44.687
> 
> 标签：mysql

我想知道如何获取 .sql 文件并将其导入到同一台机器上的本地数据库列表中。我发现的 Mose 搜索指示我通过 ssh 连接到远程服务器等。

我希望能够使用：

```
mysql -uroot -p -h localhost databasename < /Downloads/database.sql 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:03:47.607

关于空间的注意事项：

```
mysql -u root -p -h localhost databasename < ~/Downloads/database.sql 
```

# iphone - 可以在 Monotouch.Dialog 上只读 EntryElement 吗？

> ID：15739820
> 
> 赞同：4
> 
> 时间：2013-04-01T08:01:46.377
> 
> 标签：iphone, xamarin.ios, monotouch.dialog

我正在使用 Monotouch.Dialog 在我的 iphone monotouch 应用程序中创建一个页面。问题是有没有办法让入口元素在表中只读？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:47:00.807

继承 EntryElement 并覆盖 CreateTextField

```
 protected override UITextField CreateTextField(System.Drawing.RectangleF frame)
    {
        var field = base.CreateTextField(frame);
        field.Enabled = false;
        return field;
    } 
```

# ios - 如何创建一个按钮，突出显示散点图中的下一个点？IOS

> ID：15739824
> 
> 赞同：0
> 
> 时间：2013-04-01T08:02:14.783
> 
> 标签：ios, button, highlight, point, scatter-plot

我想创建一个按钮，突出显示散点图中当前突出显示的点之后的下一个点。

我应该在按钮的 addTarget 中调用方法 -(void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index 吗？或者有什么解决办法？

我试过这样做，但它不起作用。我收到此错误“NSInvalidArgumentException”，原因：“-[GraficViewController scatterPlot:aaplPlot:plotSymbolWasSelectedAtRecordIndex:ind:]：无法识别的选择器发送到实例 0x2c2e80”。

```
UIButton * button = [[UIButton alloc] initWithFrame:CGRectMake(100, 100, 100, 50)];
[button setImage:[UIImage imageNamed:@"grafic-info-button.png"] forState:UIControlStateNormal];
[self.view addSubview:button];
int ind = selectedIndex + 1;
[button addTarget:self action:@selector(symbolforScatterPlot:aaplPlot: recordIndex:ind:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:30:18.700

在选择器按钮侦听器上，您添加分散突出显示选项使用 Core Plot 。

# java - 如何关闭列表活动单击上的滑动菜单

> ID：15739835
> 
> 赞同：0
> 
> 时间：2013-04-01T08:03:15.973
> 
> 标签：java, android, android-activity, fragment, slide

**我有一个从jfeinstein10**实现滑动菜单的应用程序。我所有的应用程序都没有使用片段。所以我将片段列表更改为列表活动。当我单击该列表时，它会开始另一个活动。但是滑动菜单没有关闭。它仍然处于幻灯片模式。我只想“当我单击列表活动中的项目时，它会关闭幻灯片菜单并开始活动。” 我试过这样。

```
@Override
public void onListItemClick(ListView lv, View v, int position, long id) {
    Fragment newContent = null;
    Fragment Intent = null;
    switch (position) {
    case 0:
        Intent intent2 = new Intent();
        intent2.setClass(getActivity(), tab.class);
        intent2.putExtra("index", position);
        startActivity(intent2);
        break;
    case 1:
        Intent intent = new Intent();
        intent.setClass(getActivity(), about.class);
        intent.putExtra("index", position);
        startActivity(intent);
        break;
    case 2:
        Intent intent3 = new Intent();
        intent3.setClass(getActivity(), tab1.class);
        intent3.putExtra("index", position);
        startActivity(intent3);
        break;
    case 3:
        Intent intent4 = new Intent();
        intent4.setClass(getActivity(), latin.class);
        intent4.putExtra("index", position);
        startActivity(intent4);
        break;
    case 4:
        newContent = new ColorFragment(android.R.color.black);
        break;
    }
    if (newContent != null)
        switchFragment(newContent);
    if (Intent != null)
        switchFragment(Intent);

} 
```

我知道使用`Fragment Intent = null;`And很愚蠢`If (Intent != Null) switchFragment(Intent);`。我知道它仅适用于片段，但是还有其他方法可以像这样切换它吗？因此，当单击时，幻灯片菜单关闭并启动活动。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:08:03.387

尝试使用这种代码来切换滑动菜单的状态

```
@Override
public void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);
    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            toggle();
        }
    }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T16:11:38.993

如果您使用 ListFragment 并且您的 onListItemClick 放置在那里。您可以使用：

`((MainActivity) this.getActivity()).menu.toggle();`

或者：

`((MainActivity) this.getActivity()).getMenu().toggle();`

# facebook - 使用 Facebook 评论插件的评论在刷新后消失

> ID：15739837
> 
> 赞同：0
> 
> 时间：2013-04-01T08:03:27.600
> 
> 标签：facebook, plugins, facebook-comments, social-media

我使用了此页面上生成的代码：

[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

但是，由于我的页面是动态的，我替换了这部分：

```
<div class="fb-comments" data-href="http://example.com" data-width="470" data-num-posts="10"></div> 
```

和...

```
<div class="fb-comments" data-href="http://www.mywebsite.com/index.php?a=[some dynamic name]" data-width="470" data-num-posts="10"></div> 
```

当我尝试发布时，评论会出现，但当我刷新页面时，它会消失。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:36:21.060

是的，您的网址有获取参数。

facebook like 按钮、评论框等，它们不使用 get 参数，所以你有这个：

```
http://www.mywebsite.com/index.php?a=[some dynamic name] 
```

或这个：

```
http://www.mywebsite.com/index.php 
```

全部都是一样

# resttemplate - 使用 Spring RestTemplate-BadRequest 400 的 POST 请求

> ID：15739838
> 
> 赞同：1
> 
> 时间：2013-04-01T08:03:28.120
> 
> 标签：resttemplate

希望 Spring 大师可以帮助我，我正在开发一个多 Web 服务应用程序，所有这些 Web 服务都基于一个名为 based-server 的 Jar，它获得了所有可以在需要的地方继承的基类。所以这个基础服务器项目我有一个 BaseClient 类，它有一个 spring RestTemplate 属性。当我尝试在实际实现的 Web 服务类中使用此客户端（由于继承）时，当我尝试执行 POST 请求时，它给了我 http 400 Bad Request 错误。但是，它不会给 GET 请求带来任何麻烦。Appriciate 如果有人可以指出我哪里弄错了。

基本服务器中的 RestTemplate

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
   <constructor-arg ref="httpClientFactory"/> 

    <property name="messageConverters">
        <list>
            <bean id="jsonViewResolver" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" >
               <property name="objectMapper" ref="JacksonObjectMapper" />               
               <property name="supportedMediaTypes">
                          <list>
                            <bean class="org.springframework.http.MediaType">
                               <constructor-arg value="application" />
                               <constructor-arg value="json" />
                               <constructor-arg value="#{T(java.nio.charset.Charset).forName('UTF-8')}"/>
                             </bean>
                          </list>
                </property>
            </bean> 
            <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
            <bean class="org.springframework.http.converter.StringHttpMessageConverter" />                              
        </list>
    </property>
</bean>
<bean id="JacksonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper" />

 <bean id="httpClient" class="org.apache.commons.httpclient.HttpClient">
    <constructor-arg ref="httpClientParams"/>
</bean>

 <bean id="httpClientParams" class="org.apache.commons.httpclient.params.HttpClientParams">

    <property name="connectionManagerClass"
              value="org.apache.commons.httpclient.MultiThreadedHttpConnectionManager"/>
</bean>

<bean id="httpClientFactory" class="org.springframework.http.client.CommonsClientHttpRequestFactory">
    <constructor-arg ref="httpClient"/>
</bean>

 <bean id="baseClient" class="com.tapgift.base.client.BaseClientImpl" >
    <property name="restTemplate" ref="restTemplate" />
 </bean> 
```

这个resttemplate的实际使用

```
@Override
public BaseResponse updateItemAvailableQuantity(final String token,final Integer qty, final Integer itemId) {
    LOG.info("Entering method: updateItemAvailableQuantity : param:- token= "+ token+", qty= "+ qty+", itemId= "+ itemId);
    MultiValueMap<String, String> map = new LinkedMultiValueMap<String, String>();
    map.add("token", token);
    map.add("itemId", itemId.toString());
    map.add("qty", qty.toString());
    return getRestTemplate().postForEntity("http://localhost:8080/merchant/api/merchant/update_item_qty",
    map, BaseResponse.class).getBody();
} 
```

此方法不执行，它给我 BadRequest 错误，以下是其他 Web 服务的终点。

```
@RequestMapping(value = "/merchant/update_item_qty", method = RequestMethod.POST)
public @ResponseBody BaseResponse updateAvailableQuantity(@RequestParam("token") String token,
        @RequestParam("itemId") final Integer itemId, @RequestParam("qty") final Integer qty)
{

    return getItemSupport().updateAvailableQuantity(token, qty,itemId);
} 
```

这是最大的错误。

```
 13:21:41,851 ERROR [STDERR] org.springframework.web.client.HttpClientErrorException: 400 Bad Request

13:21:41,854 ERROR [STDERR]     at org.springframework.web.client.DefaultResponseErrorHandler.handle
Error(DefaultResponseErrorHandler.java:76)
13:21:41,865 ERROR [STDERR]     at org.springframework.web.client.RestTemplate.handleResponseError(R
estTemplate.java:486)
13:21:41,867 ERROR [STDERR]     at org.springframework.web.client.RestTemplate.doExecute(RestTemplat
e.java:443)
13:21:41,868 ERROR [STDERR]     at org.springframework.web.client.RestTemplate.execute(RestTemplate.
java:401)
13:21:41,869 ERROR [STDERR]     at org.springframework.web.client.RestTemplate.postForEntity(RestTem
plate.java:302)
13:21:41,870 ERROR [STDERR]     at com.tapgift.gift.client.impl.GiftClientImpl.updateItemAvailableQu
antity(GiftClientImpl.java:87)
13:21:41,871 ERROR [STDERR]     at com.tapgift.gift.support.impl.GiftSupportImpl.sendGiftToWinner(Gi
ftSupportImpl.java:152)
13:21:41,872 ERROR [STDERR]     at com.tapgift.gift.controller.GiftController.sendGiftToWinner(GiftC
ontroller.java:43)
13:21:41,873 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
13:21:41,874 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorI
mpl.java:57)
13:21:41,875 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodA
ccessorImpl.java:43)
13:21:41,876 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:601)
13:21:41,877 ERROR [STDERR]     at org.springframework.web.method.support.InvocableHandlerMethod.inv
oke(InvocableHandlerMethod.java:212)
13:21:41,878 ERROR [STDERR]     at org.springframework.web.method.support.InvocableHandlerMethod.inv
okeForRequest(InvocableHandlerMethod.java:126)
13:21:41,879 ERROR [STDERR]     at org.springframework.web.servlet.mvc.method.annotation.ServletInvo
cableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
13:21:41,880 ERROR [STDERR]     at org.springframework.web.servlet.mvc.method.annotation.RequestMapp
ingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
13:21:41,881 ERROR [STDERR]     at org.springframework.web.servlet.mvc.method.annotation.RequestMapp
ingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
13:21:41,882 ERROR [STDERR]     at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodA
dapter.handle(AbstractHandlerMethodAdapter.java:80)
13:21:41,884 ERROR [STDERR]     at org.springframework.web.servlet.DispatcherServlet.doDispatch(Disp
atcherServlet.java:900)
13:21:41,884 ERROR [STDERR]     at org.springframework.web.servlet.DispatcherServlet.doService(Dispa
tcherServlet.java:827)
13:21:41,886 ERROR [STDERR]     at org.springframework.web.servlet.FrameworkServlet.processRequest(F
rameworkServlet.java:882)
13:21:41,887 ERROR [STDERR]     at org.springframework.web.servlet.FrameworkServlet.doPost(Framework
Servlet.java:789)
13:21:41,888 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
13:21:41,889 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
13:21:41,891 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(
ApplicationFilterChain.java:324)
13:21:41,892 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(Applicat
ionFilterChain.java:242)
13:21:41,894 ERROR [STDERR]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrap
perValve.java:275)
13:21:41,895 ERROR [STDERR]     at org.apache.catalina.core.StandardContextValve.invoke(StandardCont
extValve.java:161)
13:21:41,896 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(Sec
urityAssociationValve.java:181)
13:21:41,897 ERROR [STDERR]     at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValv
e.event(CatalinaContext.java:285)
13:21:41,898 ERROR [STDERR]     at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValv
e.invoke(CatalinaContext.java:261)
13:21:41,900 ERROR [STDERR]     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContext
Valve.java:88)
13:21:41,901 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.i
nvoke(SecurityContextEstablishmentValve.java:100)
13:21:41,902 ERROR [STDERR]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostVal
ve.java:159)
13:21:41,904 ERROR [STDERR]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportVal
ve.java:102)
13:21:41,905 ERROR [STDERR]     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(Cac
hedConnectionValve.java:158)
13:21:41,906 ERROR [STDERR]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngin
eValve.java:109)
13:21:41,907 ERROR [STDERR]     at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheVa
lve.invoke(ActiveRequestResponseCacheValve.java:53)
13:21:41,909 ERROR [STDERR]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter
.java:362)
13:21:41,910 ERROR [STDERR]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.
java:877)
13:21:41,911 ERROR [STDERR]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.p
rocess(Http11Protocol.java:654)
13:21:41,912 ERROR [STDERR]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.jav
a:951)
13:21:41,913 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:722)
13:21:41,914 INFO  [STDOUT] FATAL: com.tapgift.gift.support.impl.GiftSupportImpl - ERROR: 400 Bad Re
quest 
```

此 RestTemplate 适用于 GET 方法。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:40:41.897

好吧，我终于找到了失败的原因，这确实是一个非常有趣的解决方案。我所做的是改变了bean的`messagesConverters`bean的顺序`restTemplate` 。

早些时候，

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate"> 
```

```
<property name="messageConverters">
    <list>
        <bean id="jsonViewResolver" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" >
           <property name="objectMapper" ref="JacksonObjectMapper" />               
           <property name="supportedMediaTypes">
                      <list>
                        <bean class="org.springframework.http.MediaType">
                           <constructor-arg value="application" />
                           <constructor-arg value="json" />
                           <constructor-arg value="#{T(java.nio.charset.Charset).forName('UTF-8')}"/>
                         </bean>
                      </list>
            </property>
        </bean> 
        <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
        <bean class="org.springframework.http.converter.StringHttpMessageConverter" />                              
    </list>
</property> 
```

我将其更改为以下顺序，

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
   <constructor-arg ref="httpClientFactory"/> 

    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
            <bean class="org.springframework.http.converter.StringHttpMessageConverter" /> 
            <bean id="jsonViewResolver" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" >
               <property name="objectMapper" ref="JacksonObjectMapper" />               
               <property name="supportedMediaTypes">
                          <list>
                            <bean class="org.springframework.http.MediaType">
                               <constructor-arg value="application" />
                               <constructor-arg value="json" />
                               <constructor-arg value="#{T(java.nio.charset.Charset).forName('UTF-8')}"/>
                             </bean>
                          </list>
                </property>
            </bean> 

        </list>
    </property>
</bean> 
```

它奏效了。这不是一个有趣的解决方案吗？

# php - 哪个孙子叫我？

> ID：15739847
> 
> 赞同：3
> 
> 时间：2013-04-01T08:03:58.870
> 
> 标签：php, late-static-binding

说我有这门课

```
class Grandpa
{
    public function call(){
        // Well, I want to know who calls me here
    }
}

class Father extends Grandpa
{
}

class GrandsonOne extends Father
{
}

class GrandsonTwo extends Father
{
} 
```

现在，我从 Grandson 类中调用函数，如下所示：

```
GrandsonOne::call();
GrandsonTwo::call(); 
```

我怎么知道是谁打来的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T08:17:15.893

您正在寻找的是[get_call_class](http://php.net/manual/en/function.get-called-class.php)函数。来自 PHP 文档：-

```
Gets the name of the class the static method is called in. 
```

所以

```
class Grandpa
{
    public function call()
    {
        // Well, I want to know who calls me here
        echo get_called_class();
    }
} 
```

将输出被调用类的名称。

# html - 如何将 $ 符号添加到 $("#total").text(total); 在jQuery中

> ID：15739848
> 
> 赞同：0
> 
> 时间：2013-04-01T08:04:05.397
> 
> 标签：html, ajax, jquery

一旦我完成我的表格，回答我的所有问题并点击计算，我想要什么，我希望能够看到结果为 1234 美元而不是 1234 美元。有没有办法做到这一点。

另外我可能想这样显示您的总成本是：1234 美元（基于提交的数据），然后是添加到配置文件之类的按钮。请帮忙！先感谢您！

脚本：

```
<script>function calculate() {
var total = (parseInt($('#studenttut option:selected').val()) + parseInt($('#campusrb>option:selected').val())) * parseInt($('#yearsatten>option:selected').val());
$("#total").text(total);
}
</script> 
```

HTML：

```
<form>
<div id="1">
<table width="100%">
<tr>
    <td>Are you an In-State-Student?</td>
    <td align="right">
        <select id="studenttut">
            <option value="<?php echo $NIST; ?>">Yes $<?php echo $IST; ?></option>
            <option value="<?php echo $NOST; ?>">No $<?php echo $OST; ?></option>
        </select>
    </td>
</tr>
</table>
</div>

<div id="2">
<table width="100%">
<tr>
    <td>Are you staying on campus?</td>
    <td align="right">
        <select id="campusrb">
            <option value="<?php echo $NBS; ?>">Yes $<?php echo $BS; ?</option>
            <option value="1">No $0</option>
        </select>
    </td>
</tr>
</table>
</div>

<div id="3">
<table width="100%">
<tr>
    <td>How many years are you planning to attend?</td>
    <td align="right">
        <select id="yearsatten">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="2">3</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </select>
    </td>
</tr>
</table>
</div>

<div id="4">
<div id="total"><input type="button" onClick="calculate()" value="calculate"/></div>
</form>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:05:34.637

这只是基本的[字符串连接](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#String_operators)：

```
$("#total").text("$" + total); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:08:04.070

**只需将$**符号附加到总数

```
var total = (parseInt($('#studenttut option:selected').val()) + parseInt($('#campusrb>option:selected').val())) * parseInt($('#yearsatten>option:selected').val());

var orginal ='$'+total;
$("#total").text(orginal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:09:28.603

你可以试试这个：

```
<script>
   function calculate() {
     var total = '$' + ((parseInt($('#studenttut option:selected').val()) + parseInt($('#campusrb>option:selected').val())) * parseInt($('#yearsatten>option:selected').val()));
     $("#total").text(total);
   }
</script> 
```

或更简单的方法：

```
$("#total").text('$' + total); 
```

# nosql - NoSQL 中的表关系

> ID：15739850
> 
> 赞同：0
> 
> 时间：2013-04-01T08:04:15.667
> 
> 标签：nosql

我正在尝试从 mysql 转移到 nosql。目前我的数据库中有 2 个表。文件和目录。

我的文件表中的字段是 {FileID, FileName, ParentDirID, FileAttributes} 我的目录表中的字段是 {DirID, DirName, ParentDirID, FileAttributes}

如果我使用任何 NoSQL 数据库（Mongo/Couch/AmazonSimpleDB），我是否必须维护两个相似的结构文件和目录，否则会有不同的东西。

我还读到您可以使用 Json 在 nosql db 中插入。

那么以下插入是否可能，我可以使用单个 json 添加目录和其中的文件

```
{dirid:"101",
dirName:"C",
ParentID:"100",
Files:{
[FileID:"201",
FileName:"a.txt"],
[FileID:"202",
FileName:"b.txt"]
}
} 
```

如果是，那么如何创建更新查询，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:09:56.163

从关系（MySQL）到 NoSQL 需要一些快速的背景知识。

在关系世界中，我们希望规范化我们的数据。目标是让数据只存在于一个地方。这迫使我们制作相当多的表格来表示数据。

在 NoSQL 世界（或至少其中的某些部分）中，关键词是非规范化。这意味着现在可以在数据库的不同部分拥有相同的数据。例如，我们可能将用户名存储在 10 个不同的结构中。如果您想更改用户名，您必须去 10 个地方并更改它（可能）。

由于上述原因，相当多的 NoSQL 解决方案不支持关系意义上的联接。不是单独存储结构然后加入，而是将所有内容存储在一起。

对于您的特定用例，您似乎已经偶然发现了这个想法。您有一个目录文档，然后将所有文件信息嵌入到该文档中。

关于如何使用 NoSQL 对数据进行非规范化的一些快速建议……如果您嵌入的对象变化很大，请仅存储对它们的引用并将对象分开。否则，您最终会将它们全部嵌入，并且几乎不可能进行实时更新。

# entity-framework - 首先在实体框架代码中存储原始数据类型集合的最佳方法

> ID：15739852
> 
> 赞同：4
> 
> 时间：2013-04-01T08:04:22.713
> 
> 标签：entity-framework, entity-framework-4, ef-code-first, entity-framework-4.1, entity-framework-5

我首先使用 EF 代码作为我的项目的 ORM 技术，其中域模型具有如此多的原始数据类型集合。 **存储原始数据类型集合的可能解决方案是什么，哪个是最佳解决方案**

**我知道的解决方案如下：**

1.**创建一个不同的类，它将保存我们要使用其集合的原始数据类型的属性，而不是直接使用该原始类型的集合，而是使用新创建的类的集合，**更好地解释这种情况是****

[实体框架代码优先原始集合](https://stackoverflow.com/questions/7236630/entity-framework-code-first-primitive-collections)

2.在单个列中序列化原始数据类型列表并使用一些分隔符来提取项目并编写自己的逻辑以将原始数据类型列表保存为单个列并使用逻辑将接收到的数据库值解析回各自的数据类型集合。

所以，以上两个是我已知的解决方案但我想知道哪个是存储原始数据类型集合的最佳解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:53:44.450

在阅读并尝试了这么多选项之后，我发现上述两种策略都会增加复杂性、数据检索和保存。

因此，最好的方法（在我看来）是将原始数据类型的集合序列化为数据库中的字节数组并反序列化数据数据库：

```
Class Sample
{
    [NotMapped]
    Public List<String>Strings { get; set; }

    Public Byte[] StringBytes
    {
        get
        {
            var binaryfomrate = new BinaryFormatter();

            var memoryStream = new MemoryStream();

            binaryFormatter.searilze(ms, this.Strings);

            return ms.ToArray();
        }
        set
        {
            var binaryfomrater = new BinaryFormatter();
            this.Strings = binaryFormtter.Deserialize(value) as List<String>();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:13:07.943

第一个解决方案是将集合类型存储在数据库中的最佳方式。换句话说，您必须为原始类型定义一个类，然后在两个类之间建立关系。

# c - 使用 Win32 API 逐行读取文本文件

> ID：15739860
> 
> 赞同：1
> 
> 时间：2013-04-01T08:04:57.337
> 
> 标签：c, windows, file, winapi

我在我的程序中创建了一个文本文件，其中保存了连接到我的服务器的客户端的 IP 地址和端口号。每 30 秒后，我想从文本文件中读取客户端的 IP 和端口号，向该客户端发送一些数据，等待回复，读取第二个客户端的 IP 和端口号，以此类推客户。

我做了什么：

```
fgets ( line, sizeof line, fp ); /* read a line */
{
    MessageBox(NULL,
               line,
               "First Line of File",
               MB_ICONINFORMATION);
}
fp=fp++; //move to the next line
fgets ( line, sizeof line, fp ); /* read a line */
{
    MessageBox(NULL,
               line,
               "Second Line of File",
               MB_ICONINFORMATION);
} 
```

执行上述代码时，从文本文件中读取的第一行和第二行是相同的。

我的文本文件如下所示：

```
10.0.1.25
56732

10.0.1.25
56733

10.0.1.25
56733

10.0.1.25
56733 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:50:24.270

你必须从你的代码中删除这一行

```
fp=fp++; //move to the next line 
```

该`fgets()`函数将读取文件的位置自动移动到下一行

读取和拆分文件的数据（IP + 端口），我建议您使用`fscanf()`而不是`fgets()`

**例子：**

```
char ip[16];
int port;

while (fscanf(fp, " %s %d", ip, &port) > 0) {
    printf("ip: %s, port: %d", ip, port);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:11:09.230

我的建议：`strtok`剪掉每一行。第一部分是ip，第二部分是端口。

`fgets`以文本形式读取您的文件。而且你误用`fgets`了，在读取同一个文件的时候，不需要改变 的第三个参数`fgets`，可以循环调用，直到它返回NULL。每次调用时`fgets`，`strtok`用来截断读取行（具体使用方法`strtok`请google `strtok`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T08:48:45.330

您可以使用此代码从文件中获取行。现在您可以根据需要提前解析它。

```
#include <stdlib.h> /* exit, malloc, realloc, free */
#include <stdio.h>  /* fopen, fgetc, fputs, fwrite */

struct line_reader {
    /* All members are private. */
    FILE    *f;
    char    *buf;
    size_t   siz;
};

/*
 * Initializes a line reader _lr_ for the stream _f_.
 */
void
lr_init(struct line_reader *lr, FILE *f)
{
    lr->f = f;
    lr->buf = NULL;
    lr->siz = 0;
}

/*
 * Reads the next line. If successful, returns a pointer to the line,
 * and sets *len to the number of characters, at least 1\. The result is
 * _not_ a C string; it has no terminating '\0'. The returned pointer
 * remains valid until the next call to next_line() or lr_free() with
 * the same _lr_.
 *
 * next_line() returns NULL at end of file, or if there is an error (on
 * the stream, or with memory allocation).
 */
char *
next_line(struct line_reader *lr, size_t *len)
{
    size_t newsiz;
    int c;
    char *newbuf;

    *len = 0;           /* Start with empty line. */
    for (;;) {
        c = fgetc(lr->f);   /* Read next character. */
        if (ferror(lr->f))
            return NULL;

        if (c == EOF) {
            /*
             * End of file is also end of last line,
        `    * unless this last line would be empty.
             */
            if (*len == 0)
                return NULL;
            else
                return lr->buf;
        } else {
            /* Append c to the buffer. */
            if (*len == lr->siz) {
                /* Need a bigger buffer! */
                newsiz = lr->siz + 4096;
                newbuf = realloc(lr->buf, newsiz);
                if (newbuf == NULL)
                    return NULL;
                lr->buf = newbuf;
                lr->siz = newsiz;
            }
            lr->buf[(*len)++] = c;

            /* '\n' is end of line. */
            if (c == '\n')
                return lr->buf;
        }
    }
}

/*
 * Frees internal memory used by _lr_.
 */
void
lr_free(struct line_reader *lr)
{
    free(lr->buf);
    lr->buf = NULL;
    lr->siz = 0;
}

/*
 * Read a file line by line.
 * http://rosettacode.org/wiki/Read_a_file_line_by_line
 */
int
main()
{
    struct line_reader lr;
    FILE *f;
    size_t len;
    char *line;

    f = fopen("foobar.txt", "r");
    if (f == NULL) {
        perror("foobar.txt");
        exit(1);
    }

    /*
     * This loop reads each line.
     * Remember that line is not a C string.
     * There is no terminating '\0'.
     */
    lr_init(&lr, f);
    while (line = next_line(&lr, &len)) {
        /*
         * Do something with line.
         */
        fputs("LINE: ", stdout);
        fwrite(line, len, 1, stdout);
    }
    if (!feof(f)) {
        perror("next_line");
        exit(1);
    }
    lr_free(&lr);

    return 0;
} 
```

你可以在[http://rosettacode.org/wiki/Read_a_file_line_by_line获得更多的东西](http://rosettacode.org/wiki/Read_a_file_line_by_line)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T09:04:01.443

下面的 while 循环将执行读取部分

```
while (fgets(buffer, sizeof(buffer), fp)) 
```

我在你的代码中看到的一个严重错误是

```
fp = fp++; 
```

# javascript - 骨干.js 获取模型 + django

> ID：15739861
> 
> 赞同：0
> 
> 时间：2013-04-01T08:05:01.400
> 
> 标签：javascript, django, backbone.js

我尝试为 django +bone.js 创建 rest-api，但我遇到了麻烦，model.fetch() 不会更新默认模型值。我在哪里犯错了？

骨干.js 模型

```
 window.User = Backbone.Model.extend({
     urlRoot: '/user/',
     initialize: function() {
    console.log("init Model User");
     }
     defaults: {
    name: "Default title",
    pass: 2011,
     }
 }); 
```

主干.js 视图

```
window.UserView = Backbone.View.extend({

    initialize:function () {
        console.log('Initializing User View');
        this.model.bind('change', this.render, this);

        this.model.fetch ({
             success: function () {
                 alert('success');
             }
        });
        console.log(this.model);

        this.render();
    },

    render:function () {
        console.log('Print tpl UserView');
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

创建视图

```
var userView = new UserView({model: new User()}); 
```

django 响应 [{"name": "LOLOLO", "pass": "12345"}]

控制台.log(this.model)

打印

```
attributes: Object
0: Object
name: "LOLOLO"
pass: "12345"
__proto__: Object
name: "Default title"
pass: 2011 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:13:57.833

您的电话`console.log(this.model)`就在`fetch`通话后。

很有可能当您记录模型时，响应尚未从服务器到达，因此您只能获得默认值。

尝试将 console.log 调用放在 fetch 的成功回调中

# python - 找不到 libavformat.so

> ID：15739863
> 
> 赞同：1
> 
> 时间：2013-04-01T08:05:09.247
> 
> 标签：python, pyffmpeg

我在运行 pyfmpeg 时遇到问题，当我尝试在下面导入代码时出现错误：

> libavformat.so 找不到

我该如何解决这个问题我找不到足够的信息。谢谢..

操作系统：Ubuntu 12.04 Python版本：2.7

```
import pyffmpeg

stream = pyffmpeg.VideoStream()
stream.open('test.mp4')
image = stream.GetFrameNo(0)
image.save('firstframe.png') 
```

**已解决的问题：** 我从这里下载了库[http://rpmfind.net/linux/rpm2html/search.php?query=libavformats52](http://rpmfind.net/linux/rpm2html/search.php?query=libavformats52)并复制到 /usr/lib/

但是现在存在新问题，它给出了错误：

> 错误的 ELF 类：ELFCLASS32

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:06:32.637

在安装所有依赖的库之前，这可能无法正常工作，因此请使用以下命令安装 ffmpeg 库`apt-get`：

```
sudo apt-get install ffmpeg 
```

这将安装可能需要 pyffmpeg 库的“ffmpeg 编码/解码”的所有依赖项。

# javascript - 在jQuery中的间距后添加逗号到文本框

> ID：15739864
> 
> 赞同：2
> 
> 时间：2013-04-01T08:05:14.653
> 
> 标签：javascript, jquery

我需要创建一个脚本，在用户按下空格键时将逗号和空格（在逗号之后）添加到文本框。如果没有插入文本，则不应添加逗号。我到处寻找解决方案。

**例子**

```
This, Is, A, Keyword 
```

**这是我当前用于此文本框的 jQuery**

```
<script type="text/javascript">
   $('#tags').keyup(function(){
      this.value = this.value.toLowerCase();
   });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T08:07:35.437

你可以这样做 ：

```
$('#tags').keyup(function(){
   var str = this.value.replace(/(\w)[\s,]+(\w?)/g, '$1, $2');
   if (str!=this.value) this.value = str; 
}); 
```

与天真的方法相反，如果用户继续输入并添加其他空格，它也将起作用。

[示范](http://jsbin.com/ekeziq/5)

编辑：我更改以测试值是否更改，因为我想让用户使用箭头导航。

# gwt - 在另一个具有自己的入口点类的 GWT 模块中继承一个具有入口点类的 GWT 模块

> ID：15739873
> 
> 赞同：2
> 
> 时间：2013-04-01T08:06:10.470
> 
> 标签：gwt

我们能否将具有入口点类的 GWT 模块继承到另一个具有自己的入口点类的 GWT 模块中。

我所做的只是在另一个模块中继承了一个模块，但它向两个模块加载了任何建议如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:52:33.803

是的，我们可以将一个 GWT 模块继承到另一个模块中，即使两者都有`EntryPoint Classes`。

截至目前，您可能会指定如下：

```
<inherits name="package.EntryPointClass2" /> 
```

是的，这确实会调用`onModuleLoad`of `EntryPointClass2`。但是您可能不需要该功能。

为了同时使用这两个模块，您可以遵循@David 的[解决方案](http://turbomanage.wordpress.com/2009/11/19/tips-on-organizing-gwt-modules/)来组织 GWT 模块。

[似乎“正确”的答案是“视情况而定”。](http://www.summa-tech.com/blog/2011/02/22/structuring-gwt-modules-for-large-applications/)

# c# - 当 Collection 为 Null 时添加到 Collection

> ID：15739874
> 
> 赞同：1
> 
> 时间：2013-04-01T08:06:11.460
> 
> 标签：c#, generics, collections, ienumerable

尝试通过下面的属性添加到列表时，我不断在子列表上获得空引用

```
 public class Node<T> where T : INode
    {
        private readonly T _item;

        public IList<Node<T>> Children { get; set; } 

        public Node(T item)
        {
            _item = item;
            ParentNodeId = item.ParentNodeId;
        }

        public void AddChild(T childNode)
        {
            Children.Add(new Node<T>(childNode));
        }
.... 
```

而且我认为您不会在每次遇到此属性时都启动子列表，那么每次调用代码需要填充它时，我应该怎么做才能添加到该节点的子节点中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:14:07.857

你可以尝试这样的事情

```
 public void AddChild(T childNode)
    {
        if(this.Children == null)
        {
           this.Children = new List<Node<T>>();
        }
        this.Children.Add(new Node<T>(childNode));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T08:12:14.420

添加默认构造函数。

```
public Node()
{
    Children = new List<Node<T>>();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T08:14:35.617

我认为在构造函数中添加初始化程序没有任何问题：

```
public Node(T item)
{
    _item = item;
    ParentNodeId = item.ParentNodeId;
    Children = new List<T>();
} 
```

或者，如果你真的希望它是延迟加载的，在`add`方法中：

```
public void AddChild(T childNode)
{
    Children = Children ?? new List<T>();
    Children.Add(new Node<T>(childNode));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T12:09:17.467

其他人提供了很好的答案，但我想指出，没有人给出进行延迟初始化的最佳方法：

```
public class Node<T> where T : INode
{
    private readonly T _item;
    private readonly Lazy<List<Node<T>>> _children = new Lazy<List<Node<T>>>(
        () => new List<Node<T>>());

    public IList<Node<T>> Children { get { return _children.Value; } }

    public Node(T item)
    {
        _item = item;
        ParentNodeId = item.ParentNodeId;
    }

    public void AddChild(T childNode)
    {
        Children.Add(new Node<T>(childNode));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T08:10:09.407

您有两个选择：在构造函数中初始化集合或在 AddChild 中延迟。但基本上最好有像这样的非空集合，因为它是公共的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T16:26:29.413

有几种不同的使用场景，这取决于`Children`属性是否应该返回数据的持久快照、实时视图或临时只读视图，如果数据被修改，将明确失效，或者临时只读视图，如果数据被修改，其行为将未指定。

在使用可变对象 [例如 ] 时，我建议遵循的一个关键规则`List<T>`是，如果对对象的引用可能会暴露给可能会改变其状态的某些方面的代码，那么最多应该有一个（通常正好是一个）系统中的对象，该对象将该对象的状态视为其自身的一部分。.NET 和 Java 都没有提供任何约定来指示对象是否持有一个字段，以封装其目标持有的可变状态；必须手动跟踪它。

可变类型的读写属性仅适用于明确公开该属性的对象对其所引用的对象没有所有权利益的情况。例如，a`List<Control>`封装了其引用包含在其中的对象的*身份；*`Control`这些控件的可变方面（例如它们的位置）不构成`List<Control>`. 然而，像你这样的东西`Node<T>`似乎应该拥有`Children`，因为添加一个孩子`SomeNode.Children`将被视为对`SomeNode`. 因此，`Children`属性应该是不可变的 [不仅仅是只读！] 类型（在这种情况下所有权无关紧要），否则它应该是只读属性。`Children`否则，如果代码试图设置为`List<T>`某个其他对象拥有的a ，就无法避免模糊语义。

如果作为对拥有的`Children`a 的只读引用公开，则必须在第一次尝试读取属性返回之前创建一个 new （在 的构造函数中创建 可能是最简单的）。另一种方法是定义一个私有类，该类包含对 a 的引用并实现并访问该节点的内部字段。使用这种方法，即使没有添加任何对象，a也必须创建轻量级对象[它可以在访问时延迟创建，但在构造函数中创建它可能更好]，但是诸如或之类的东西的实现`List<T>``Node<T>``List<T>``Children``List<T>``Node<T>``Node.ChildList``Node<T>``IList<T>``ICollection``Node<T>``Node.ChildList``Children``ChildList``ICollection.Count``IEnumerable<T>.GetEnumerator()`可以首先测试节点是否已经创建了一个集合，如果没有，则简单地返回适合空集合的东西。

顺便说一句，如果`T`是一个类类型并且许多节点将只有一个孩子，那么`Node<T>`存储 a`Count`和 an可能`Object`比存储 a更有利`List<T>`。如果一个节点没有子节点，`Object[]`则`null`; 对于一个孩子，它会持有一个`T`；对于更多的孩子，要么 a`T[]`要么 a `List<T>`。当访问节点的子节点时，这将需要更复杂的类型检查逻辑，但对于具有零个或一个子节点的节点，它将消除一些堆分配。

# sql-server-2008 - SQL Server 表验证

> ID：15739878
> 
> 赞同：0
> 
> 时间：2013-04-01T08:06:24.253
> 
> 标签：sql-server-2008

我有一个包含 17 列的表。我需要在这个表上执行验证，如果验证通过，条目将转移到另一个表。

我需要做以下验证。

1.  任何列都不应该包含任何空白值（如果它包含我需要跟踪列名和行号）
2.  一列说 SSN 号码不应该有重复的条目（我不能将其作为主键）

如果任何条件失败，我需要在第一种情况下获取列名和行号，因为`SSN`我需要知道这些 SSN 号

请建议。

# c++ - 对大字符串进行更快的操作

> ID：15739879
> 
> 赞同：1
> 
> 时间：2013-04-01T08:06:24.613
> 
> 标签：c++, string, algorithm

假设我有一个像这样的大随机字符串......

```
_W:,aLH#J&A4=IY;    ?RVUc?W+</59JG4WSGW6G6$QEHQ:>,*b60$BYR=D=-^8-4(0    "??YaI0Y    SD9 FJ;MZ,V+'S]0:9L%;#a23cO%bMY[O6^S;ULRV2XA    8&  6_5W21E+Y$RYY$K"Q.0J+:cJC301M3H![7
L%K
Q5(4I9/9DAFR,-8<BJ=4H>9M,OX!.A4aQ:
BK<a"1ID.=U-US`R_])>GG)UL\!G?U$RRG_
HcW 3;<U5`X.?:6K@H*ZD3[M!ZU#KJXbE<Y*VV#ZYU#=]?Q
5:a^]#T

XRT.V]>57#W"U1=K$X]&JIY)::AE :K'7!_DV1B>SJ9D_`]>aC"N'US$;CaHK<N#-
"cJ,%RT)!J0DLFUb[[FOCQX(/.E3#
U
L$("+$) ;TDZ
;T#XS-'6U4`UKZ0a85D&+a]I.C/-7LDM_#/aS9OYA!#^G1II*XKL`;c
ES62Wa^=BQHK6E&A .X+4FDZ:   3UOaJ
#1<BY:;@D:`^`8E\-[9&7PXPH

... a lot more 
```

我想对整个字符串进行操作，比如在分号后插入换行符。

```
#include <iostream>
#include <cmath>
#include <algorithm>

int main()
{
    std::string buffer = "";
    std::string line = "";
    while (std::getline(std::cin, line))
        buffer += line + std::string("\n");

    auto it = std::find(buffer.begin(), buffer.end(), ';');
    while (it != buffer.end())
    {
        buffer.insert(it, '\n');
        it = std::find(it+1, buffer.end(), ';');
    }
    std::cout << buffer << std::endl;
    return 0;
} 
```

这显然需要很长时间。我该怎么办？如果我将它们分成更小的字符串会更好吗？如果没有，我怎样才能让它更快？

**编辑**

我是个白痴。我在这条线上有一个无限循环

```
- it = std::find(buffer.begin(), buffer.end(), ';');
+ it = std::find(it+1, buffer.end(), ';'); 
```

尽管我仍然赞扬提供了一个很好答案的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:53:18.933

虽然我通常更喜欢使用 C++ 标准库，但在这种特殊情况下，我认为老式的 C 风格代码可能是更好的选择。

如果您要进行的处理仅取决于一次解释一个字符（例如，在分号后插入换行符），然后一次读入一个字符，然后写出一个（或两个，如果字符是分号和必须跟一个额外的换行符）如果输入和输出都被缓冲，将会非常快。

如果字符的处理`n`只依赖于字符`1`to `n`，那么类似的方法会起作用——只需要根据目前看到的字符预先决定处理动作，或者存储所有前面的字符，以便动作可以根据所有字符`1`来决定`n`。

在这两种情况下，都不需要将字符插入字符串的中间，因此必须移动大块内存。

只有当对字符的处理`n`（例如是否在该字符之后插入一个字符）取决于字符后面的字符`n`时，才需要在处理之前读入所有文本。即使这样，对于所有插入的字符，必须移动的内存量也可以减少到不超过`N`字符，其中`N`是已处理字符串的总长度（如果需要，还有其他字符），通过使用类似的函数以下：

```
void copyWithProcessing (char *from, char *to) {
    while (*from) {
        // do any pre-processing
        *to++ = *from++;
        // do any post-processing
     }
 } 
```

这假设我们可以为指向的字符数组预先分配足够的空间，`to`因为我们事先知道由于即将发生的处理需要多少额外的字符。或者，如果我们不需要将生成的字符串存储在内存中，我们可以在每个字符的处理完成后逐个字符地写出来，这意味着我们根本不需要为它分配任何空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:02:54.790

您不需要为此求助于 C 风格的编程，在 C++ 中，您可以使用 a[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)作为结果并在您阅读的每一行中立即插入换行符：

```
#include <iostream>
#include <string>
#include <sstream>

int main()
{
    std::ostringstream buffer;
    std::string line;
    while (std::getline(std::cin, line))
    {
        auto prev = 0;
        auto pos = line.find(';');
        while (pos != std::string::npos)
        {
            ++pos;
            buffer.write(&line[prev],pos-prev);
            buffer.put('\n');
            prev = pos;
            pos = line.find(';',pos);
        }
        buffer.write(&line[prev],line.size()-prev);
        buffer.put('\n');
    }

    std::cout << buffer.str() << std::endl;
    return 0;
 } 
```

# blackberry-webworks - blackberry.pim.calendar 不适合我

> ID：15739884
> 
> 赞同：0
> 
> 时间：2013-04-01T08:06:58.567
> 
> 标签：blackberry-webworks, blackberry-10

我刚开始为 BB10 编写一个应用程序，并使用 calendarEvent 对象。

```
function createEvents(location, summary, startTime, endTime, frequency, dayInWeek, expires) {

var testing = blackberry.pim.calendar;
document.write("<p>My First app</p>");

var evt,
calendar = blackberry.pim.calendar,
CalendarRepeatRule = calendar.CalendarRepeatRule;
var start = new Date(startTime);
var end = new Date(endTime);
var location = location;
var summary = summary;
.
.
.
} 
```

我在涟漪中运行它，但是当我运行这个函数时它甚至不会打印出“我的第一个应用程序”。在我的 config.xml 我有

被困了几个小时，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:51:17.507

Ripple 不支持 blackberry.pim.calendar API： [https ://developer.blackberry.com/html5/apis/blackberry.pim.calendar.html](https://developer.blackberry.com/html5/apis/blackberry.pim.calendar.html)

**我怀疑在 createEvents 中设置测试**变量时发生了运行时错误。打开 Web 检查器进行确认。

建议进行特征检测以确保您将要使用的对象可用。

```
 function createEvents(location, summary, startTime, endTime, frequency, dayInWeek, expires) {

   if (window.blackberry && blackberry.pim) {
      var testing = blackberry.pim.calendar;
      document.write("<p>My First app</p>");

      var evt,
         calendar = blackberry.pim.calendar,
         CalendarRepeatRule = calendar.CalendarRepeatRule;
      var start = new Date(startTime);
      var end = new Date(endTime);
      var location = location;
      var summary = summary;
   } else {
      alert("blackberry.pim is not supported");
   }
.
.
.
} 
```

# c# - 将字节数组转换为 pdf 并将结果绑定到 iframe 的 src

> ID：15739888
> 
> 赞同：0
> 
> 时间：2013-04-01T08:07:22.133
> 
> 标签：c#, iframe

我目前正在从 DB 读取字节数组。我想将此字节数组转换为 Pdf 并希望在 iframe 中显示此转换后的 pdf。如何在 c# 中将响应数据分配给 iframe 的 src？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:15:14.513

两个选项：[base-64 将其编码为数据 uri](https://stackoverflow.com/questions/1038922/setting-the-src-attribute-of-an-iframe-to-dataapplication-pdfbase64)（注意并非所有浏览器都这样），或者使用引用正常获取数据的路由（单独的 http 请求）的常规 uri。这可以通过将转换推迟到第二个请求来完成，或者通过将生成的输出存储在请求之间的某个临时位置来完成。

# xslt - 根据标签将单个 XML 拆分为多个 XML

> ID：15739902
> 
> 赞同：0
> 
> 时间：2013-04-01T08:08:11.743
> 
> 标签：xslt

我想根据标签将一个 XML 拆分为两个单独的 XML。假设，我有一个源 xml：Source

```
 <PRSet>
     <PR>
      <PRNUM>100</PRNUM> 
      <VENDOR>XYZ LLC</VENDOR> 
      <PRLINE>
       <PRLINENUM>101</PRLINENUM>
       <DESCRIPTION>Burner Lamp</DESCRIPTION> 
      </PRLINE>

      <PRLINE>
       <PRLINENUM>102</PRLINENUM>
       <DESCRIPTION>Stove</DESCRIPTION>
      </PRLINE>
   </PR>
   </PRSet> 
```

我想根据 PRLINE 标签将此 xml 拆分为两个。所以输出应该是：

来源1：

```
 <PRSet>
     <PR>
     <PRNUM>100</PRNUM> 
     <VENDOR>XYZ LLC</VENDOR> 
     <PRLINE>
      <PRLINENUM>101</PRLINENUM>
      <DESCRIPTION>Burner Lamp</DESCRIPTION> 
     </PRLINE>

   </PR>
   </PRSet> 
```

来源 2：

```
 <PRSet>
    <PR>
     <PRNUM>100</PRNUM> 
     <VENDOR>XYZ LLC</VENDOR> 
     <PRLINE>
      <PRLINENUM>102</PRLINENUM>
      <DESCRIPTION>Stove</DESCRIPTION>
    </PRLINE>
  </PR>
 </PRSet> 
```

任何人都可以帮助我实现这一目标。我正在使用 XSLT 1.0。

非常感谢，尼蒂卡

# mysql - mysql 错误代码：1052 与 Zend_Db

> ID：15739903
> 
> 赞同：0
> 
> 时间：2013-04-01T08:08:15.573
> 
> 标签：mysql, zend-framework, join, zend-db

我有 2 张桌子

1 =“问题历史”

2 =“问题历史状态”

“issue_history_id”是两个表中的列名。

“issue_history”中的 PK 和“issue_history_status”中的 FK

这是我的查询

```
$sql = $this->_db->select()
    ->from(array('ih'  => 'issue_history'),array('COUNT(issue_history_id) as tot','DATE(date_created)AS date'))
    ->join(array('ihs' => 'issue_history_status'),'ih.issue_history_id = ihs.issue_history_id'); 
```

但它给了我错误

```
Error Code : 1052 Column 'issue_history_id' in field list is ambiguous 
```

这是我的完整代码

```
public function getDataForGraph($sd,$ed,$issues,$os,$pf,$model,$version){

      $sql = $this->_db->select()
             ->from(array('ih'  => 'issue_history'),array('COUNT(issue_history_id) as tot','DATE(date_created)AS date','issue_history_id'))
             ->join(array('ihs' => 'issue_history_status'),'ih.issue_history_id = ihs.issue_history_id');

  if(Engine::notEmpty($sd) && $sd != 'sd' && SG_Support_Engine::notEmpty($ed) && $ed != 'ed'){
                $sql->where('DATE(ih.date_created) >= ?',$sd );
                $sql->where('DATE(ih.date_created) <= ?',$ed );
            }
  if(Engine::notEmpty($issues) && $issues != 'issues'){
               $issues = implode(',', $issues);
               $sql->where('ihs.issue_id IN('.$issues.')');
           }

 if(Engine::notEmpty($os) && $os != 'os'){
                $sql->where('ih.phone_service_os IN (?)',$os );
            }

  if(Engine::notEmpty($pf) && $pf != 'pf'){
                $sql->where('ih.phone_service_device IN (?)',$pf );
            }

    if(Engine::notEmpty($model) && $model != 'model'){
                $sql->where('ih.phone_service_model IN (?)',$model );
            }

    if(Engine::notEmpty($version) && $version != 'ver'){
               $sql->where('ih.phone_service_version IN (?)',$version );
            }

          $sql->group('DATE(ih.date_created)');
          $sql->order('DATE(ih.date_created)');

          echo $sql->__toString(); exit;

           return $sql->query()->fetchAll();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:11:14.577

`COUNT(issue_history_id)`

该字段在两个表中，因此存在歧义。您还需要提及表名才能使其正常工作。您要计算哪个 issue_history_id

```
COUNT(ih.issue_history_id) 
```

或者

```
COUNT(ihs.issue_history_id) 
```

# jquery - 悬停时从 div 中删除类

> ID：15739904
> 
> 赞同：3
> 
> 时间：2013-04-01T08:08:16.510
> 
> 标签：jquery

我是 jquery 的菜鸟，并且一直在努力让以下工作变得沮丧。我敢肯定，经验丰富的开发人员会立即上手，这很简单。

我在 1 个列表中有一个菜单，在页面上的其他 div 中有一个列表。当用户将鼠标悬停在菜单上时，列表中的项目将被突出显示。我已经走到这一步了。但是因为列表很长，所以我需要一个点击事件来在用户向下滚动页面时突出显示这些项目。

没关系。但是，当用户在菜单中的下一个项目上移动时，我无法弄清楚如何从突出显示的项目中删除点击类。

```
$('#buttons li').hover(function () {
    $('.item-' + this.className).addClass('clients-hover');
},
function () {
    $('.item-' + this.className).removeClass('clients-hover');
});
$(function() {
  $('#buttons li').click(function() {
    $(this).addClass('clients-hover');
  });
}); 
```

例如，在下面的小提琴中，当用户悬停或单击 Artists/Bands 时，div 中的项目会亮起，但是当用户将鼠标悬停在 Comedians 上时，该类中的项目会突出显示，并且 Artists/Bands 会恢复正常。

[http://jsfiddle.net/toddyhotpants/RCMaP/4/](http://jsfiddle.net/toddyhotpants/RCMaP/4/)

这是页面上的（没有点击事件）： [http ://whitesky.com.au/clients/](http://whitesky.com.au/clients/)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T08:12:11.997

只需删除`clients-hover`单击元素的其他兄弟姐妹的类：

```
$(this).addClass('clients-hover').siblings().removeClass('clients-hover'); 
```

演示：http: [//jsfiddle.net/RCMaP/6/](http://jsfiddle.net/RCMaP/6/)

* * *

根据您的评论，只需将鼠标悬停在菜单导航上时修改您的代码：

```
$('#buttons li').hover(function () {
    $('.item-' + this.className).addClass('clients-hover')
    .parent().siblings().children().removeClass('clients-hover');
},

function () {
    $('.item-' + this.className).addClass('clients-hover');
}); 
```

演示：http: [//jsfiddle.net/RCMaP/12/](http://jsfiddle.net/RCMaP/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:11:42.633

使用`$.toggleClass()`而不是 $.addClass() :)

[小提琴！](http://jsfiddle.net/RCMaP/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:18:41.657

用于`siblings()`在点击事件中删除其他类..更新了一些代码..您不需要两个 document.ready 功能....

尝试这个

```
$('#buttons li').hover(function () {
   $("div[class^='item']").removeClass('clients-hover'); //<--here removesclass from all div
    $('.item-' + this.className).addClass('clients-hover');
},

$(function () {
  $('.item-' + this.className).removeClass('clients-hover'); // moved for other document.ready function 
  $('#buttons li').click(function () {
    $(this).siblings().removeClass('clients-hover'); //<--- here remove class from other li 
    $(this).addClass('clients-hover');
  });
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/RCMaP/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:21:29.803

像这样的东西？

```
$('#buttons li').hover(function () {
    $('.item-' + this.className).addClass('clients-hover');
    },
    function () {
    $('.item-' + this.className).removeClass('clients-hover');
});

$(function() {
   $('#buttons li').click(function() {
      $("[class^=item]").not($('.item-' + this.className)).removeClass('clients-hover');
      $(this).addClass('clients-hover');
      $(this).siblings().removeClass('clients-hover');
      $('.item-' + this.className).addClass('clients-hover');
   });
}); 
```

# web-applications - 如何制作可以直接输入僧伽罗语 Unicode 的文本框？

> ID：15739906
> 
> 赞同：0
> 
> 时间：2013-04-01T08:08:30.137
> 
> 标签：web-applications, unicode

我想制作一个网页，用户可以使用僧伽罗语 Unicode 搜索某些内容，只需在文本框中输入，而不是使用这样的[转换器](http://www.ucsc.cmb.ac.lk/ltrl/services/feconverter/t1.html)复制和粘贴。

我[在一个论坛上](http://www.htmlforums.com/html-xhtml/t-unicode-textbox-40281.html)发现了一个关于我到底想要什么的问题，但我没搞清楚。它告诉使用`<input type="text" style="font-family: Sinhalese">`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-18T22:40:50.967

试试 www.EasySinhalaTyping.com。在这里，您可以在线输入僧伽罗语，还可以在您的 PC 上下载和安装僧伽罗语打字软件 - 因此即使没有互联网连接，您也可以输入僧伽罗语。

# android - 列表视图的itemclick事件上的Nullpointerexception

> ID：15739907
> 
> 赞同：2
> 
> 时间：2013-04-01T08:08:30.373
> 
> 标签：android

```
protected void onResume(){
        listTimer = (ListView) findViewById(R.id.listTimer);
        fetchData();
        tadapt = new TimerAdapter(RoutineList, this);
        listTimer.setAdapter(tadapt);
        listTimer.performItemClick(v1, 0, listval);
        super.onResume();
    }

listTimer.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub

                v1 = arg0;
                pos = arg2;
                listval = arg3;
                View v = arg0.getChildAt(arg2);
                TextView tvM = (TextView) v.findViewById(R.id.tvETimer);
} 
```

注意：我在 View 上得到了 Nullpointerexception。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:21:14.973

视图已经在变量 arg1.. 中，无需再次分配给另一个变量 v..

试试这个...

```
listTimer.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

            v1 = arg0;
            pos = arg2;
            listval = arg3;
            TextView tvM = (TextView) arg1.findViewById(R.id.tvETimer);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T08:12:55.900

检查您是否在方法之前调用了[setContentView](http://developer.android.com/reference/android/app/Activity.html#setContentView%28android.view.View%29)`onResume`并且该布局包含`listTimer`. 这可能是您的观点的原因`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T08:12:28.947

首先，始终将`super.onResume()`其作为`Activity.onResume()`方法的第一个语句。

当您也使用`findViewById()`for `ListView`set时`OnItemClickListener`。我认为它会解决你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:51:56.637

尝试替换此字符串：

```
View v = arg0.getChildAt(arg2); 
```

和

```
View v = arg1; 
```

# actionscript-3 - 如何使用源将电影剪辑添加到特定帧（带有整个事件）的舞台？

> ID：15739909
> 
> 赞同：0
> 
> 时间：2013-04-01T08:08:32.933
> 
> 标签：actionscript-3, flash, flash-cs5

这是我的角色类，我希望可以将引用该类的角色电影剪辑添加到特定帧中的舞台。所以当我点击按钮开始时，它会添加角色的电影剪辑。如果有人可以帮助我，我将不胜感激......

```
package com.ply 
{
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;

import flash.ui.Keyboard;

public class Heli extends MovieClip
{
    //Settings
    public var xAcceleration:Number = 0;
    public var yAcceleration:Number = 0;
    private var xSpeed:Number = 0;
    private var ySpeed:Number = 0;

    private var up:Boolean = false;
    private var down:Boolean = false;
    private var left:Boolean = false;
    private var right:Boolean = false;

    private var bullets:Array;
    private var missiles:Array;

    public function Heli()
    {
        init();
    }

    private function init():void
    {
        addEventListener(Event.ENTER_FRAME, runGame);           
    }

    private function runGame(event:Event):void
    {
        xSpeed += xAcceleration ;       //increase the speed by the acceleration
        ySpeed += yAcceleration ;       //increase the speed by the acceleration

        xSpeed *= 0.95;                 //apply friction
        ySpeed *= 0.95;                 //so the speed lowers after time

        if(Math.abs(xSpeed) < 0.02)     //if the speed is really low
        {
            xSpeed = 0;                 //set it to 0
                                //Otherwise I'd go very small but never really 0
        }
        if(Math.abs(ySpeed) < 0.02)     //same for the y speed
        {
            ySpeed = 0;
        }

        xSpeed = Math.max(Math.min(xSpeed, 10), -10);       //dont let the speed get bigger as 10
        ySpeed = Math.max(Math.min(ySpeed, 10), -10);       //and dont let it get lower than -10

        this.x += xSpeed;               //increase the position by the speed
        this.y += ySpeed;               //idem

    }

    /**
     * Keyboard Handlers in main class 
     */

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:32:19.303

我不完全理解这里的问题，你想做什么，但试试这个。将您的构造函数更改为以下代码：

```
public function Heli()
{
   addEventListener(Event.ADDED_TO_STAGE, init);
} 
```

比，将 init() 函数更改为`init(e:Event):void`. 这将确保在您将 MovieClip 添加到舞台后完成任何初始化。哦，在 init() 函数的顶部添加这一行： `removeEventListener(Event.ADDED_TO_STAGE, init);`

然后，在按钮 START 的事件处理程序中，创建类的新实例，并添加到舞台（或父容器，取决于您的游戏结构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:52:34.317

如果你想在某个框架中添加角色，那就去做吧。你有两种方法：

1.  使用 Timer 创建角色类 Heli() 的实例

    `var timer:Timer = new Timer(count_seconds, repeat_parameter)` `timer.addEventListener(TimerEvent.TIMER_COMPLETE, onEventHandler)` `timer.start();`

    `function onEventHandler(e:TimerEvent):void` `{ create the unstance of Heli here }`

2.  您可以在 EnterFrame 处理程序中计算帧数，并在一些计数值之后创建角色 Heli 的实例

# python - 通过 SWIG 将 numpy bool 数组传递给 C++ 类模板

> ID：15739913
> 
> 赞同：2
> 
> 时间：2013-04-01T08:09:03.983
> 
> 标签：python, swig

我正在尝试使用 SWIG 将 numpy bool 数组传递给 C++ 类模板，其构造函数具有标准的 %apply 语句。

在蟒蛇中：

```
x = numpy.array( [True,False,True], dtype='bool' ) 
```

在 *.i 文件中：

```
%apply(bool* INPLACE_ARRAY1, int DIM1) {(bool* atValueIn, int iDim1In)} 
```

在 C++ 类模板（构造函数）中：

```
Data<bool,1>( bool* x, int size ); // Should be resolved by compiler to this 
```

我收到错误消息，告诉我它找不到正确的构造函数。错误消息列出的可能构造函数列表包括我上面显示的那个。我尝试在 python 中没有成功`dtype='bool8'`。`dtype='bool_'`我还尝试在 C++ 级别使用 unsigned char ，但没有成功。

请注意，此代码适用于其他数据类型，如 int32 (int)、float32 (float) 等。

请注意，我还有另一种情况，我将一个非 numpy 布尔值传递给另一个 C++ 模板构造函数，该构造函数的参数是一个布尔标量并且工作正常。

有什么帮助吗？

# aem - 是否可以在 cq:Widget (textarea) 中使用正则表达式字段？

> ID：15739914
> 
> 赞同：2
> 
> 时间：2013-04-01T08:09:08.903
> 
> 标签：aem

我在属性编辑器中输入了有效的正则表达式，但它不起作用。属性名称是`regex`，它肯定存在于 5.3 和 5.6 中（我有 5.5）。

我收到一个错误`Uncaught TypeError: Object /^/content/trainingSite/(.*)$/ has no method 'test'`，从 javascript 调试器中看到，这`this.regex`是一个字符串。当然，字符串没有`test`方法。

由于属性编辑器中没有 RegExp 类型，并且 CQ 只是将小部件的值转储为字符串，因此它根本无法工作。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T17:37:47.270

在 ExtJS 表单字段中，只有[TextField](http://dev.day.com/content/docs/en/cq/current/widgets-api/index.html?class=CQ.Ext.form.TextField)具有`regex`and`regexText`属性。

ExtJS 表单字段的通用验证框架是[**vtypes**（= 验证类型）](http://dev.day.com/content/docs/en/cq/current/widgets-api/index.html?class=CQ.Ext.form.VTypes)：

```
var config = {
    xtype: "textfield",
    fieldLabel: "Path:",
    vtype: "my_path_structure"
} 
```

并且 vtypes 需要在以下位置注册`CQ.Ext.form.VTypes`：

```
CQ.Ext.form.VTypes["my_path_structure"] = /^/content/trainingSite/(.*)$/;
CQ.Ext.form.VTypes["my_path_structureText"] = "Invalid path"; 
```

*   第一个条目 ( `<name>`) 可以是函数或 javascript 正则表达式。
*   `<name>Text`验证失败时将显示该条目。
*   还有`<name>Mask`一个选项允许您提供一个可选的掩码，该掩码在用户在字段中输入内容时实时验证。

[相关问题](https://stackoverflow.com/questions/13417268/extjs-custom-vtype)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T19:07:54.473

我有一个类似的问题，只是输入值会抛出一个控制台错误，说 .test 无效。当我以这种语法输入正则表达式值时，我的问题得到了解决：

```
regex="new RegExp(&quot;/content/dam/(.*)/(.*)&quot;)" 
```

来自 eclipse 并在 crxde-lite 中导入或如下所示：

```
Name:regex Type:String Value:new RegExp("/content/(.*)/(.*)/(.*)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T15:56:42.090

首先，我们可以使用`String.prototype.match`字符串参数。此外，至少在 AEM6 中，我们可以将正则表达式编写为两端带有斜杠的字符串文字：`"/^\\/content\\/trainingSite\\/(.*)$/"`它会正常工作。

# jquery-ui - 使用 Ajax 源的 jQuery UI 自动完成搜索结果中的第一个字符

> ID：15739915
> 
> 赞同：0
> 
> 时间：2013-04-01T08:09:09.470
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我遇到了使用带有 Ajax 响应的 jQuery UI 自动完成的问题。仅当使用 Ajax 请求作为源时，我无法搜索与第一个字符匹配的结果。

这是我所做的：

```
$( "#date" ).autocomplete({
  minLength: 0,
  source: function( request, response ) {
      var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
      response( $.grep('http://myajaxrequesturl.com/period_id/', function( item ){
          return matcher.test( item.label );
      }) );
  }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:19:40.920

恕我直言，您应该在服务器端过滤您的数据。

# sql - 访问SQL，不同域，相同服务器（VPS）

> ID：15739917
> 
> 赞同：0
> 
> 时间：2013-04-01T08:09:23.990
> 
> 标签：sql, cross-domain

我有一个带有 WHM + cPanel 的 VPS 服务器。我在 WHM 中创建了两个帐户，即“域 A”和“域 B”。以供参考：

域 A：www.abc.com 域 B：www.xyz.com

假设 www.abc.com 是一个包含所有类别的新闻网站，一个庞大的数据库，但完全没有分段，因为它确实具有所有类别的新闻。

现在我买了域名 B，www.xyz.com，我希望它也成为一个新闻网站，但以小众为重点，所以它会有完全不同的布局和设计，但它只会有一个新闻类别。新闻当然与 www.abc.com 相同，但它再次只有一个类别。不必在双方都添加相同的消息（完全相同，但请暂时忽略 SEO 和其他所有内容）。我希望这个站点使用 www.abc.com 的数据库，并修改查询（添加类别的条件）。

这可能吗，如果可以，请告诉我如何。

目前我收到：警告：mysql_query() [function.mysql-query]：第 19 行 /home/user/public_html/index.php 中的用户 'legend'@'localhost'（使用密码：NO）的访问被拒绝。

警告：mysql_query() [function.mysql-query]：无法在第 19 行的 /home/user/public_html/index.php 中建立到服务器的链接。

注意：index.php 中的第一件事是连接到 sql 数据库。访问 /mysql.php 会返回成功连接的回声。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:15:04.107

最简单的解决方案是使用附加域，在同一个 cPanel 帐户上添加附加域。

或者您可以通过授予来自另一个 cPanel 帐户的用户访问数据库的权限来尝试数据库用户方法（我没有测试过这个）[http://forums.cpanel.net/f5/mysql-access-between-cpanel-帐户-126409.html](http://forums.cpanel.net/f5/mysql-access-between-cpanel-accounts-126409.html)

# java - 使用 DataHandler 将文件上传到 MySQL

> ID：15739923
> 
> 赞同：0
> 
> 时间：2013-04-01T08:10:30.533
> 
> 标签：java, mysql, web-services, cxf, datahandler

我目前无法使用 .mp3 将一个非常小的文件 (.mp3) 上传到 MySQL 数据库`DataHandler`。我正在本地尝试代码，然后将其转换为 Web 服务。以下“粗略”代码尝试上传文件。现在我不确定上传部分是否混乱或下载部分无法正常工作。因为我用一个非常简单的文本文件测试了代码，当我下载它时（从数据库） - 它充满了垃圾数据。这里是我用于这两个部分的代码

**上传部分**

```
public void uploadFile(FileUploader Dfile)
{

        DataHandler handler = Dfile.getDfile();
        InputStream is = handler.getInputStream();

        //Move input stream to byteArray
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] tmp = new byte[4096];
        int ret = 0;

        while((ret = is.read(tmp)) > 0)
        {
            bos.write(tmp, 0, ret);
        }

        byte[] myArray = bos.toByteArray();

        MySQL s = new MySQL();

        s.InsertFile(Dfile.getName(), myArray);
        is.close();
}//End method 
```

这是数组被转储到数据库中的地方

```
public void InsertFile(String Fname , byte[] myArray )
{
   String sql = "INSERT INTO `uploadtest`.`File` (`Filename`,`Data`) VALUES ( \"" + Fname + "\",\"" + myArray + "\");" ;
   try 
   {
       //Insert it into the Db
       int a = stat.executeUpdate (sql);
   } 
   catch (IOException e)
   {
       e.printStackTrace();
   }
   catch (SQLException e) 
   {
    e.printStackTrace();
   }
}//end method 
```

**下载部分**

这是我用于测试上传是否成功的代码

```
 String sql = "SELECT Data FROM uploadtest.File where filename=\"" + name + "\"";
    try 
       {
           ResultSet rs = stat.executeQuery(sql);
           Blob blob = null;
           InputStream inputStream = null;

           if(rs.next())
           {
            inputStream = rs.getBinaryStream("Data");
           }

            OutputStream out = new FileOutputStream(new File("d:\\somefile.mp3")); // Just to test if file retrieved from DB(blob type) was correct

            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = inputStream.read(bytes)) != -1)
            {
                out.write(bytes, 0, read);
            }

            inputStream.close();
            out.flush();
            out.close(); 
```

关于我可能会出错的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:56:40.350

这是你出错的地方：

```
String sql = "INSERT INTO `uploadtest`.`File` (`Filename`,`Data`) VALUES ( \"" + Fname + "\",\"" + myArray + "\");" ; 
```

就像您在下载部分使用流获取方法一样，您需要使用流方法将数据插入数据库。您现在所做的只是连接对象 myArray 的字符串表示形式。只是为了得到一个想法，尝试记录或打印变量 sql 中的值以查看它包含的内容并查看将执行的语句。

至于如何解决这个问题，您可以使用 PreparedStatement 然后使用 setBinaryStream() 或 setBlob() 并直接从数据处理程序中提交您的流，而无需字节流。这是一个示例：[使用 JDBC 将文件数据插入 MySQL 数据库](http://www.codejava.net/java-se/jdbc/insert-file-data-into-mysql-database-using-jdbc)

关于这一点的最后一点说明：整个数据将在内存中传递，当文件变大时，您可能会从 java 或 mysql 获得与内存相关的问题。如果插入大文件，可以考虑将文件分块存储。您也可以考虑不将文件插入数据库。将文件保存在文件系统上并将它们组织到目录和子目录中。并且只将文件的路径存储在数据库中。

# facebook-graph-api - FQL 和 facebook 相册和图片

> ID：15739926
> 
> 赞同：0
> 
> 时间：2013-04-01T08:10:50.050
> 
> 标签：facebook-graph-api, facebook-fql, photos

我正在开发一个小型应用程序，该应用程序允许用户从他的 Facebook 相册中选择一张照片，最好是从个人资料或封面相册中选择。
我正在使用以下代码。测试网址[http://babysoftblog.com/megapicture/albums.php](http://babysoftblog.com/megapicture/albums.php)

```
<?php
  $app_id = 'XXXXX';
  $app_secret = 'XXXXX';
  $my_url = 'http://babysoftblog.com/megapicture/albums.php';

  $code = $_REQUEST["code"];

 // auth user
 if(empty($code)) {
    $dialog_url = 'https://www.facebook.com/dialog/oauth/?client_id='.$app_id.'&redirect_uri='.urlencode($my_url).'&scope=user_photos';
                   echo("<script>top.location.href='" . $dialog_url . "'</script>");
  }

  //get user access_token

              $token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
                . $app_id . '&redirect_uri=' . urlencode($my_url) 
                . '&client_secret=' . $app_secret 
                . '&code=' . $code;
  try {
              $access_token = file_get_contents(@$token_url);
  }
   catch (Exception $e)
           { echo "OOPs look like something went wrong"; }

             //$fql_query_url = 'https://graph.facebook.com/'.'fql?q=SELECT+pid,src_small+FROM+photo+WHERE+aid+IN+(SELECT+aid+FROM+album+WHERE+owner=+me())&'.$access_token;

           try{
            $fql_query_url = 'https://graph.facebook.com/'.'fql?q=SELECT+aid,name+FROM+album+WHERE+owner=+me()&'.$access_token;
            $fql_query_result = file_get_contents($fql_query_url);
            $fql_query_obj = json_decode($fql_query_result, true);
           }
           catch (Exception $e)
           { echo "oops something went wrong"; }
?> 
```

但是当我刷新页面时使用上面的代码..它给出了异常，请参见这里 [http://babysoftblog.com/megapicture/albums.php](http://babysoftblog.com/megapicture/albums.php) 以及如何直接选择个人资料和封面相册的照片。

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:20:00.503

我看到你的应用程序，我认为你已经改变了页面的来源。错误在于查询本身，

```
SELECT pid,src FROM photo WHERE aid =100001475149878_7668 
```

这个查询应该写成

```
SELECT pid,src FROM photo WHERE aid ='100001475149878_7668'; 
```

或者

```
SELECT pid,src FROM photo WHERE aid ="100001475149878_7668"; 
```

错误是因为aid 包含一个 _ ，它是字符串的一部分，所以它应该包含在 ' 或 " 中。

# c# - C# 随机颜色生成器无法正常工作

> ID：15739929
> 
> 赞同：1
> 
> 时间：2013-04-01T08:11:11.060
> 
> 标签：c#, colors, grid, geometry, drawing

这部分代码行为不端。我想从一组 7 种颜色的列表中绘制一个用户定义的圆圈网格，每个圆圈都有一种随机颜色。随机数生成器应该这样做。圆圈的网格画得很好，它的颜色让我很伤心。我似乎每个网格最多有两种颜色，前十种是一种颜色，其余的是第二种颜色。这很奇怪，因为代码应该循环通过颜色生成器，然后画一个圆圈并重复。请帮我找出麻烦的台词，自己花了太长时间尝试！

忽略对 JEWEL_HEIGHT 和类似的引用，它们只是与程序相关的变量名。

```
 int columns = int.Parse(textBoxColumns.Text);
            int rows = int.Parse(textBoxRows.Text);

            for (int y = 0; (y < rows * 20); y += JEWEL_HEIGHT)
            {
                for (int x = 0; (x < columns * 20); x += JEWEL_WIDTH)
                {

                    Color brushColor = (Color.Red);
                    Random randGen = new Random();
                    int randColor = randGen.Next(7);
                    if (randColor == 0)
                        brushColor = (Color.Red);
                    else if (randColor == 1)
                        brushColor = (Color.Orange);
                    else if (randColor == 2)
                        brushColor = (Color.Yellow);
                    else if (randColor == 3)
                        brushColor = (Color.Green);
                    else if (randColor == 4)
                        brushColor = (Color.Blue);
                    else if (randColor == 5)
                        brushColor = (Color.Indigo);
                    else if (randColor == 6)
                        brushColor = (Color.Violet);

                    Graphics paper = pictureBoxJewels.CreateGraphics();
                    SolidBrush brush = new SolidBrush(brushColor);

                    paper.FillEllipse(brush, x, y, JEWEL_WIDTH, JEWEL_HEIGHT); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:14:16.873

不确定，因为我无法测试它，但 Random randGen = new Random(); 不应在 for 循环内。将它放在第一个 for 循环之前并保留 randGen.Next(7); 在循环内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:44:44.997

这是`Random`默认构造函数（.NET 4.5，反编译）：

```
public Random()
      : this(Environment.TickCount)
    {
    } 
```

提示：很有可能你最终会**使用相同的种子，在****循环**之前移动`Random`创建

 **一些附加信息：

*随机数生成从种子值开始。如果重复使用相同的种子，则会生成相同的数字序列。产生不同序列的一种方法是使种子值与时间相关，从而为每个新的 Random 实例产生不同的序列。默认情况下，Random 类的无参构造函数使用系统时钟生成其种子值，而其有参构造函数可以根据当前时间的刻度数取一个 Int32 值。*

但是由于您的内部循环运行得非常快，并且您在每次迭代时都创建了新实例，因此有`TickCount` **可能不会改变**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:19:21.750

你每次都初始化 randgen。这里 Random() 并不是真正随机的，它遵循一些逻辑.. 它的时间依赖性导致它执行速度快你可能不会得到不同的数字，因为它可能在系统中获得相同的滴答计数。

我编辑了我的答案**

# php - 使用 HTML 表单将 Smarty 变量传递给 php 文件。

> ID：15739932
> 
> 赞同：2
> 
> 时间：2013-04-01T08:11:33.310
> 
> 标签：php, html, forms, variables, smarty

我在 Smarty 模板文件中有这个表格：

```
<form method="post" action="manswer.php">
        <table border="0" cellpadding="5" cellspacing="0" >
            <tr>
                <td style = "vertical-align:top;">Answer:</td>
                <td><textarea rows="8" cols="50" name='answer_text' ></textarea></td>
            <tr>
                <td><br/></td>
                <td><input  id = 'answerbutton' type='submit'  value='Cevapla!' /></td>
            </tr>
            </tr>
        </table>
</form> 
```

我在该模板文件中也有**{$q_id}**变量。如何使用该 HTML 表单将此变量传递给 manswer.php？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:17:33.503

使用隐藏字段。

```
<input type="hidden" value="{$q_id}" name="something" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T08:14:10.417

使用隐藏的输入字段。

```
<input type="hidden" value="<?php echo $q_id;?>" name="something" /> 
```

然后使用 CodeIgniter 检索它

```
...
$something = $this->input->post('something');
... 
```

# jquery - 部署站点后需要使用 jquery 的确切域名

> ID：15739934
> 
> 赞同：0
> 
> 时间：2013-04-01T08:11:53.403
> 
> 标签：jquery

我要部署我的站点，部署站点后我需要获取域名。如果地址是`www.domain.com`然后域名是非常简单的，`domain.com` 但是如果客户端将站点部署为子域，`subdomain.domain.com`那么我怎样才能获得确切的域名？我已经有了主机名

```
window.location.hostname 
```

部署站点后我需要确切的域名来设置 cookie 我不知道客户端将使用哪个域

*   选项 1 www.domain.com
*   选项 2 domain.com
*   选项 3 subdomain.domain.com
*   选项 4 subdomain.domain.com.us
*   选项 5 domain.com.us 等

我要编写什么函数来申请所有条件并在 jQuery 中获取准确的域名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:36:42.360

这应该可以正常工作：

```
var hostname = window.location.hostname;
var parts = hostname.split('.');
var domain = parts.slice(-2, parts.length).join('.'); 
```

# java - 如何避免线程在元胞自动机中竞争相同的像素

> ID：15739938
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:12:17.407
> 
> 标签：java, multithreading, cellular-automata

我正在编写一个随机元胞自动机，其中有 Cells（定义为一组像素）在网格上播放。网格在主程序中，我有一个 Cell 对象的类和一个继承 Thread 的类，用于 Cell 行为的随机计算。我的问题是，当两个细胞接触时，它们可以同时随机获取网格的相同像素，或者一个可以在另一个不知道的情况下获取它。因此，它会导致一些错误，其中像素不属于 Cell 但 Cell 仍将其识别为“自身”。

我的问题是：如何同步（或“优先化”？）线程，以便它们不会同时修改相同的公共组件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:19:55.633

使用 Java 关键字`synchronized`或新的数据结构，如Java Synchronizer Framework`Mutex`或`ReentrantLock`来自 Java Synchronizer Framework。

但在此之前，我建议阅读线程编程的介绍......

# java - 易失性数组的替代品

> ID：15739942
> 
> 赞同：3
> 
> 时间：2013-04-01T08:12:56.463
> 
> 标签：java, arrays, synchronized, volatile, java1.4

从其他问题中，我了解到 volatile 数组的元素不是 volatile。只有引用本身是易变的。

```
volatile[] int data;

Thread A: data[4] = 457;
Thread B: System.out.println(data[4]); 
```

在这里，线程 B 可能永远不会看到更新的值。

我必须使用哪些选项/替代方案来实现相同的目标？我想避免必须同步数组，因为它几乎从未改变过。但是，一些线程正在阅读它。同步它很可能会降低吞吐量，这在本例中非常重要。

我唯一的选择是写时复制数据结构吗？也就是说，将数组复制到一个新数组中，然后更新数组引用。

还有其他选择吗？我在某处读到将数组封装到一个类中（只有一个成员，数组）实现了同样的事情，但我怀疑这是真的。我看不出这有什么帮助。

**请注意，我的目标 JVM 是 1.4。这意味着我不能使用这个`java.util.concurrent`包。**

**-------------- 编辑编辑编辑 --------------**

在[Java 易失性数组中？](https://stackoverflow.com/questions/5173614/java-volatile-array?rq=1)我读到重新分配数组引用可以实现波动语义。这应该给出正确的结果：

```
volatile[] int data;

Thread A: data[4] = 457;
Thread A: data = data;
Thread B: System.out.println(data[4]); 
```

这在较旧的 JVM 上有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:29:28.930

数组被标记为 volatile，即只有引用被标记为 volatile。数组本身的元素根本不继承 volatile 关键字的内存可见性语义。

我可以建议`AtomicIntergerArray`您自己建立一个课程。您可以在哪里保留`final int[] data`参考并正确同步它。

还要看看`AtomicIntergerArray` [实现代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/atomic/AtomicIntegerArray.java)。

否则您可以使用[**Backport api**](http://backport-jsr166.sourceforge.net/index.php)的[`AtomicIntegerArray`](http://backport-jsr166.sourceforge.net/doc/api/edu/emory/mathcs/backport/java/util/concurrent/atomic/AtomicIntegerArray.html).

该项目旨在提供一个并发库，该库可在当前使用的所有 Java 平台上以不折不扣的性能工作，从而允许开发完全可移植的并发应用程序。更准确地说，traget 范围是 Java 1.3 及更高版本，如果为 Java 1.2 提供一些有限的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-12T07:59:50.080

只需使用包装器：

```
class VolatileInt{
    volatile int value;
}

VolatileInt[] create(int size){
    VolatileInt[] array = new VolatileInt[size];
    for(int k=0;k<size;k++)
        array[k]=new VolatileInt();
    return array; 
}

VolatileInt[] array = create(10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-24T14:01:38.863

使用`arr=arr`manages Java重写数组的存储地址（数组在Java中也是对象）。数组字段`arr[i]`不会获得 volatile 属性。

在某些情况下，`arr=arr`可能会因为未知原因而起作用，但它不会让您安全。

如果您想保持安全，请使用这些`Atomic*Array`东西。是的，额外的原子性是昂贵的，但我想如果你考虑访问时间和存储空间，它比链接结构更好。

如果要避免全局锁，可以考虑将数组拆分为子集。这使得锁只影响一个子集，并且您仍然保持所有值的波动性。

我分享你的问题，最好的选择是`Atomic*Arrays`。

# mongodb - MongoDb 数据库建模

> ID：15739943
> 
> 赞同：0
> 
> 时间：2013-04-01T08:13:06.913
> 
> 标签：mongodb

我对 1 个对象的数据大小有疑问。而且我不知道我的数据模型是真的吗？情况如下：我有 25 个服务器、200 个服务器计数器和 1440 分钟数据。我的目的是保存服务器计数器的每日数据。但是查询性能对我来说很重要。

## 我脑子里有 3 个模型，但我不知道哪一个更适合我的项目。

## 1-服务器根：

我的数据模型：

```
{ "_id":Object(....), 
    "serverId":0
    "counters": [ 
                     { "counterId":0 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,
                                                .
                                                .1440 times "counterId":0
                                                .
                     { "counterId":1 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,        
                                               .
                                                .1440 times "counterId":1
                                                .
                    .
                    .  200 Counters
                    .
                     { "counterId":200 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333}         
                                               .
                                                .1440 times "counterId":200
                                                .
                       ] },
        .
        .
        .25 Server
        .
        .
{ "_id":Object(....), 
    "serverId":25
    "counters": [ 
                     { "counterId":0 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,
                                                .
                                                .1440 times "counterId":0
                                                .
                     { "counterId":1 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,        
                                               .
                                                .1440 times "counterId":1
                                                .
                    .
                    .  200 Counters
                    .
                     { "counterId":200 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333}         
                                               .
                                                .1440 times "counterId":200
                                                .
                       ] }, 
```

问题：----查询聚合框架的性能-：当我尝试查找 1 天的平均计数器值时，需要：12 秒 ---数据大小----不可能像 16 Mb 那样建模我尝试时吃饱了。

* * *

## 2-计数器根：

我的数据模型：

```
 { "_id":Object(....),
        "counterId":0  
        "servers": [ 
                         {  "serverId":0, "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,
                                                    .
                                                    .1440 times "serverId":0
                                                    .
                         { "serverId":1 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,        
                                                   .
                                                    .1440 times "serverId":1
                                                    .
                        .
                        .  25 Server
                        .
                         { "serverId":25 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333}         
                                                   .
                                                    .1440 times "serverId":200
                                                    .
                           ] },
            .
            .
            .200 Counter
            .
            .
    { "_id":Object(....),
        "counterId":200  
        "servers": [ 
                         {  "serverId":0, "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,
                                                    .
                                                    .1440 times "serverId":0
                                                    .
                         { "serverId":1 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333} ,        
                                                   .
                                                    .1440 times "serverId":1
                                                    .
                        .
                        .  25 Server
                        .
                         { "serverId":25 , "inserted": ISODate(...) , "counterValue":122.2131 , "min":121 , "max":33333}         
                                                   .
                                                    .1440 times "serverId":200
                                                    .
                           ] }, 
```

问题：----查询聚合框架的性能-：当我尝试查找 1 天的平均计数器值时，需要：7 秒 ---数据大小----不可能像 16 Mb 那样建模当我尝试时已经吃饱了。但是我把它分成了 2 块。

* * *

## 3-没有根：

我的数据模型：

```
{ "_id" : ObjectId("515921e3bbea58d25eb07b22"), "serverId" : 0, "counterId" : 0, "inserted" : ISODate("2013-03-21T00:26:30Z"), "counterValue" : 0.03256159112788737, "min" : -29.967438408872113, "max" : 20.032561591127887 }
.
.7 billion data
. 
```

问题：----查询聚合框架的性能--：当我尝试查找 1 天的平均计数器值时，需要：7 秒

SO：我无法决定必须使用哪种数据模型，

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:19:31.043

不知道你为什么在这里选择 monogodb。我会使用您的第三个选项，但缺少索引。为 serverid 和 counterid 字段添加索引，您将获得更好的时间。

此外，您可能最终拥有单独的读写集合，即

- 像在第三个选项中一样使用一个集合 - 一次和小时/天/周（很可能是一天）运行查询以获取聚合数据并将其放入另一个集合中，也包含索引，您将从一开始就查询. 之后，如果您不再需要汇总数据，您将删除它。

这是关于索引和[常见问题的](http://docs.mongodb.org/manual/faq/indexes/)[帮助页面](http://docs.mongodb.org/manual/reference/method/db.collection.ensureIndex/)

在你的情况下，它将是

```
 db.events.ensureIndex({counterId:1,serverId:2, datetime:3 }) 
```

您可以使用索引中的字段序列，因为它可能会导致不同的结果。

另外，如果您要按照我所说的每小时聚合一次，则最好将 datetime 作为第一个索引字段

```
 db.events.ensureIndex({datetime:1, counterId:2,serverId:3 }) 
```

注意：显然添加索引会提高从集合中读取数据的速度，但会减慢向其写入数据的速度。

# arrays - 写入进度条直到 Get-Job 返回“正在运行”PowerShell

> ID：15739944
> 
> 赞同：1
> 
> 时间：2013-04-01T08:13:07.410
> 
> 标签：arrays, powershell

我有一组正在运行的工作。

```
PS C:\vinith> Get-Job

Id     Name            PSJobTypeName   State         HasMoreData     Location             Command
--     ----            -------------   -----         -----------     --------             -------
2      scvmm2012-vin   BackgroundJob   Running       True            localhost            Param...
4      scom2012sp1-vin BackgroundJob   Running       True            localhost            Param...
6      scorch2012-vin  BackgroundJob   Running       True            localhost            Param...
8      scsm2012sp1-vin BackgroundJob   Running       True            localhost            Param...
10     spfoundation    BackgroundJob   Running       True            localhost            Param... 
```

我想要一个进度条显示，直到作业正在运行，并且当作业状态在 powershell 中变为“完成”时应该说已完成

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:45:45.187

用于`Write-Progress`进度条。用于`Get-Job`接收当前作业的数量。像这样，

```
# Some dummy jobs for illustration purposes
start-job -ScriptBlock { start-sleep -Seconds 5 }
start-job -ScriptBlock { start-sleep -Seconds 10 }
start-job -ScriptBlock { start-sleep -Seconds 15 }
start-job -ScriptBlock { start-sleep -Seconds 20 }
start-job -ScriptBlock { start-sleep -Seconds 25 }

# Get all the running jobs
$jobs = get-job | ? { $_.state -eq "running" }
$total = $jobs.count
$runningjobs = $jobs.count

# Loop while there are running jobs
while($runningjobs -gt 0) {
    # Update progress based on how many jobs are done yet.
    write-progress -activity "Events" -status "Progress:" `
   -percentcomplete (($total-$runningjobs)/$total*100)

    # After updating the progress bar, get current job count
    $runningjobs = (get-job | ? { $_.state -eq "running" }).Count
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-31T13:45:28.283

在您的 while 块中使用以下内容在进度条中也有一个值

```
while($runningjobs -gt 0) {
# Update progress based on how many jobs are done yet.
$percent=[math]::Round((($total-$runningjobs)/$total * 100),2)
write-progress -activity "Starting Provisioning Modules Instances" -status "Progress: $percent%" -percentcomplete (($total-$runningjobs)/$total*100)

# After updating the progress bar, get current job count
$runningjobs = (get-job | ? { $_.state -eq "running" }).Count 
```

# jsf-2 - 访问多级层次结构中的方法时出现 JSF2 异常

> ID：15739948
> 
> 赞同：0
> 
> 时间：2013-04-01T08:13:31.333
> 
> 标签：jsf-2, javabeans

我有一个带有动物园对象数组列表的动物园类，在动物园中有动物列表。访问动物属性很酷，但访问 membermethods 会导致异常。

**//Zoos 类，对象为 Animals,Trees**

```
@ManagedBean
public @SessionScoped class Zoos {
    private String name;
    private String description;

        private Animals animals=new Animals ();

    public void setAnimals(Animals animals) {
        this.Animals = Animals;
    }

    public Animals getAnimals() {
        return animals;
    }
        //All the getters and setters
} 
```

**//动物类**

```
public class Animals implements Serializable {

    private static final long serialVersionUID = 1L;
    private String name; 
    private String breed;
        static final ArrayList<Animal> apbp 
    = new ArrayList<Animal>(); 

       //Getters and setters...
       //Add animal in the list
    public String addAnimal()
        { 
            Animal abp = new Animal(name);
            abp.setbreed(breed);
            apbp.add(abp);
        name="";
        natPoolName="";
        defaultPublicFlag=false;
        defaultShareableFlag=false;
        enabled=false;
        return "success";

        }

} 
```

**//动物类**

```
public class Animal{

    private String name; 
    private String breed;

       //Getters and setters

} 
```

**将 Animals 类的属性调用为** zoos.animal.name**效果很好。**

**但是从 *.xhtml 调用成员函数 zoos.animals.addAnimal 为

```
<h:commandButton id="ok" value="Ok" action="#{zoos.animals.addAnimal}" oncomplete="#{rich:element('mypanel')}.style.display='none'; return false;" /> 
```

这不起作用并给出异常为**

```
javax.servlet.ServletException
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:325)
root cause
java.lang.NullPointerException
    com.sun.faces.application.view.StateManagementStrategyImpl$4.invokeContextCallback(StateManagementStrategyImpl.java:289)
    javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:1253)
    javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:672)
    com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:284)
    com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:177)
    com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:131)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:430)
    com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:143)
    javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:288)
    com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:199)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:110)
    com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:312) 
```

我无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:18:31.093

我认为 NullPointerException 用于将 jsf 生命周期`#{zoos.animals.addAnimal}` 视为动物 setter 和 getter ，所以我更喜欢在你的 bean 中添加方法并直接使用它：

```
@ManagedBean
public @SessionScoped class Zoos {
    private String name;
    private String description;

        private Animals animals=new Animals ();

    public void setAnimals(Animals animals) {
        this.Animals = Animals;
    }

    public Animals getAnimals() {
        return animals;
    }

    public void addAnimalInZoo(){
        if(getAnimals()!=null) {
                getAnimals().addAnimal();
        }
    }
        //All the getters and setters
} 
```

并在您的页面中`addAnimalInZoo()`直接使用：

```
<h:commandButton id="ok" value="Ok" action="#{zoos.addAnimalInZoo}" oncomplete="#{rich:element('mypanel')}.style.display='none'; return false;" /> 
```

# event-handling - 面板上的 Jquery EasyUI 捕获事件：区域：西调整大小

> ID：15739957
> 
> 赞同：0
> 
> 时间：2013-04-01T08:14:22.600
> 
> 标签：event-handling, panel, jquery-easyui

如何在 Jquery EasyUI Panel:Region:west 或 region:center resize 中捕获事件？在用户重新调整中心或东部区域的大小后，我需要刷新一些内容。

```
<div id="cc" class="easyui-panel" title="Nested Panel" style="height:200px;padding:10px;">
    <div class="easyui-layout" data-options="fit:true">
        <div id="dd" data-options="region:'west',split:true" style="width:100px;padding:10px">
            Left Content
        </div>
        <div id="ee" data-options="region:'center'" style="padding:10px">
            Right Content
        </div>
    </div>
</div> 
```

如何在上面的示例中捕获 Div dd 或 ee ？以下代码也仅适用于首次加载。调整 div dd 或 ee 大小时不起作用

```
<script>
$(document).ready(function () {
    $(function(){
        $('#cc').panel();
        $('#cc').panel({
            onResize:function(){
                alert("dd");
            }
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-29T17:11:30.860

如果您仍在寻找答案，以下代码允许我保存和恢复 easyUI 布局面板的大小：

```
$(document).ready(function() {
    var panel = $('#main-layout').layout('panel', 'south'),
        hsize = localStorage.getItem('SouthPanel_h');

    panel.panel({
        height: hsize > 0 ? hsize : 50,
        onResize: function(height,width) {
            localStorage.setItem('SouthPanel_h', height);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:20:29.457

jQuery 没有这样的事件。你可以试试这个。

[http://benalman.com/projects/jquery-resize-plugin](http://benalman.com/projects/jquery-resize-plugin)

# angularjs - AngularJS 如何在内部捕获诸如“onclick”、“onchange”之类的事件？

> ID：15739960
> 
> 赞同：8
> 
> 时间：2013-04-01T08:14:36.670
> 
> 标签：angularjs

我在输入元素中使用了“ng-model”，并使用 chrome 检查器观察了该元素。但是输入元素的每个 onxxx 属性（包括 onchange）都是空的。那么，AngularJS如何捕捉用户输入触发的“onchange”事件呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T08:44:47.903

如果在 Chrome 的事件侦听器选项卡中检查标准文本输入元素（附加了 ng-model），您将看到它附加了两个事件侦听器：`$destroy`和`input`.

默认情况下，Angular 会监听`input`事件，如果浏览器不支持它，它将回退到`keydown`+`change`事件。

事件与 jQlite 的 bind 方法绑定（除非您还包含完整的 jQuery，在这种情况下，它的 bind 方法将接管）。

[您可以在input [email]](http://docs.angularjs.org/api/ng.directive%3ainput.email)指令文档页面上找到您可以自行检查的示例输入元素。

[Angular 源代码 (v1.2.0rc1)](https://github.com/angular/angular.js/blob/v1.2.0rc1/src/ng/directive/input.js#L413)中负责处理输入事件的确切行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T08:19:17.217

您可以使用以下方法将事件侦听器附加到任何 DOM 节点：

node.addEventListener(eventName, listenerMethod, useCapture)

当您在将方法分配给 node.onchange 之前使用 addEventListener 时，您必须将事件侦听器附加到事件“更改”或“单击”。

请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)

# qt - Qstring：在 qt4 Qstring 类中查找方法对应项

> ID：15739962
> 
> 赞同：0
> 
> 时间：2013-04-01T08:14:37.333
> 
> 标签：qt, qt4

我在 qt3 中移植了一些代码，我找不到 QT4 Qstring 类的 find 方法。qt3 的 Qstring::find 方法的对应部分是什么。我应该使用哪一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:36:28.220

[QString::indexOf()](http://qt-project.org/doc/qt-4.8/qstring.html#indexOf)。QString的[Qt 3 支持页面](http://qt-project.org/doc/qt-4.8/qstring-qt3.html#find-2)（从 QString 主页链接）记录了这一点。

# php - 如何在完整日历中使用 json 在每个日期添加、更新、删除新数据

> ID：15739963
> 
> 赞同：1
> 
> 时间：2013-04-01T08:14:47.473
> 
> 标签：php, json, fullcalendar

我是“ **Fullcalendar** ”的新手，所以我不知道如何在“弹出页面”上添加/修改/删除事件，该事件具有描述（事件描述）、开始时间和结束时间等三个字段。也开始 timecurrenttime 所以如果你有解决方案请帮助我。我没有更多的知识，所以建议和建议都是可以接受的

脚本代码：

```
 <script type='text/javascript'>

        $(document).ready(function() {  
                var count=0;
            /* initialize the calendar
            -----------------------------------------------------------------*/

            $('#calendar').fullCalendar({
                header: {

                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                     viewDisplay: function(view) {
                                if(view.name=="month" && count==0){
                                        var a=$(".fc-day-number").prepend("<img src='/assets/images/add.jpg' width='20' height='20'style='margin-right:80px;' name='date'>");                                    
                                        count++;
                                    }
                                if(view.name=="agendaDay" || view.name=="agendaWeek"){
                                    $("#popup").hide();
                                    count++;
                                }

                            },
                        slotMinutes:5,
                editable: true,
                droppable: true, // this allows things to be dropped onto the calendar !!!
                            eventClick : function (calEvent, jsEvent, view){
                    console.log(calEvent);
                },
                dayClick : function (date, allDay, jsEvent, view){
                    console.log(jsEvent);   
                    $('#popup').show();
                    $('#popup').css({left : jsEvent.clientX, top : jsEvent.clientY});
    //                                    function viewDetail(date,allDay,jsEvent,view)
    //                                    {
    //                                      
    //                                    }
    //                                if(view.name=="agendaWeek" || view.name=="agendaDay"){
    //                                    $('#popup1').show();
    //                                    $('#popup1').css({left: jsEvent.clientX, top : jsEvent.clientY});
    //                                }
                }

        });
    });
    </script> 
```

* * *

CSS代码：

```
 <style>
    /*
    */      body {
            text-align: left;
            font-size: 14px;
            font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
            }
        #calendar {
            width: 70%;
            margin: 0 auto;
                    text-align:left;
            }
        #popup{
            height: auto;
            width: 30%;
            position: absolute;
            background-color: white;
                    border-color: #0033ff;
                    border-style: solid;
        }
            #popup input{
                width:90%;
            } 
            #popup table label{
                font-size: 100px;
            }
            #startTime{
                background-image: url('/assets/images/calendar.png');
                background-position:right center;
                background-repeat:no-repeat;
            }
            #endTime{
                background-image: url('/assets/images/calendar.png');
                background-position:right center;
                background-repeat:no-repeat;
            }
    </style> 
```

* * *

html代码：

```
 <div class="wrapper">
    <div id='calendar'></div>
    <div id="popup" style="display:none"> 
        <table>
            <tr>
                <td><lable for="eventName">Description:</lable></td>
                <td><input name="eventName" id="eventName"></td>
                </tr>
                <tr>
                    <td><lable for="startTime">Start: </td>
                    <td><input type="text" id="startTime"/></td>
                </tr>
                <tr>
                    <td><lable for="endTime">End: </td>
                    <td><input type="text" id="endTime"/></td>
                  </tr>
                  <tr>
                      <td align="left"colspan="2"><button type="submit"class="k-button" name="submit" id="submit">Submit</button>//THis Not WOrking i do not know why
                 <button type="reset" name="reset" value="Reset" class="k-button" id="reset">Reset</button>//THis Not WOrking i do not know why
                         </td>
                      </tr>
            </table>

  <script>

        $('#startTime').click(
                function(e) {
                    var a="";
                        $('#startTime').AnyTime_noPicker().AnyTime_picker().focus();
                        e.preventDefault();
                        var a=$('#startTime').val("");

                });

        $('#endTime').click(
                function(e) {
                    $('#endTime').AnyTime_noPicker().AnyTime_picker().focus();
                    e.preventDefault();
                });          
  </script>
    </div>
</div> 
```

# javascript - 本地存储与云存储

> ID：15739966
> 
> 赞同：0
> 
> 时间：2013-04-01T08:15:11.997
> 
> 标签：javascript, html, local-storage

我是一个新手，正在尝试使用 HTML5 和 JavaScript 概念化我的第一个移动应用程序。我正在努力考虑将我的数据存储在哪里以用于生产本机应用程序。因此，例如，如果我有一个待办事项应用程序，我应该将待办事项列表存储在 HTML5 本地存储选项上还是使用云数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:17:05.940

如果要在同一用户使用的设备之间共享 TODO 数据，理想情况下，它将存储在云上，并*与*设备 localStorage 进行同步。如果没有，可能根本不需要超越本地存储。

# angularjs - 微风路线图？

> ID：15739967
> 
> 赞同：4
> 
> 时间：2013-04-01T08:15:12.643
> 
> 标签：angularjs, breeze

我很想将 Breeze 与 AngularJS 结合使用。然而，我的经理担心产品的成熟度及其发展方向。

是否有任何文件可以传递给我的经理，以向他保证 Breeze 在未来仍然存在。风险如何。现在有多少人开始使用 Breeze <> AngularJS 并且存在风险。如果没有更多的微风怎么办，如果有的话，还有什么选择。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-01T19:04:02.040

我可以理解你的经理的担忧。我们都在尝试对技术进行合理的押注。这并不容易。当您开始认为供应商的规模是一个很好的指导时……他们放弃了一项主要技术（我想到了微软的 Silverlight 和[Google Reader](http://googlereader.blogspot.com/2013/03/powering-down-google-reader.html)，但例子不胜枚举）。没有任何保证。

我们知道什么？

## 商业可行性

*   IdeaBlade（Breeze 的制造商）**自 2002 年以来**一直从事数据管理业务（我是创始人，所以我知道）。这并不能证明我们明天会在这里。它确实证明了我们有持久力并且知道如何经营企业。

*   Breeze 已经制作了一年多，大约 6 个月前发布了它的第一个版本。同样重要的是，设计和实施是 10 多年构建和销售商业产品 (DevForce) 以应对相同挑战的成果。**这说明了产品的成熟度**。在现实世界客户的持续压力下，我们吸取了很多教训。我们有一个很好的机会，我们已经从你还没有看到的错误中恢复过来。

*   当像我们这样规模的营利性公司将其大部分最好的工程和产品营销资源投入到 Breeze 中时，它就体现了承诺。这对我们来说是一个巨大的赌注和巨大的投资。我们不能轻易离开它。你的经理会知道的。

*   Breeze 是 MIT 许可和开源的。我们无法改变，也不想改变。原则上，我们可以分拆商业版本并放弃进一步开发开源分支。但是（a）这必须具有商业意义，而在主要是免费的 JavaScript 库的时代，它并不具有商业意义，并且（b）任何人都可以分叉当前代码并维护它。

*   Breeze是公开开发的。你看到我们在做什么，因为我们正在做。

*   Breeze 文档比您在大多数付费产品中找到的更广泛。它比您在大多数 JavaScript 库中找到的要领先得多……包括您提到的一个。这有关系吗？我们在构建商业产品方面有着长期的经验……足够长的时间来理解“比特”只是技术产品的一部分。你决定。

*   微软虽然对 Breeze 足够好，可以在他们的[单页应用程序网页上](http://www.asp.net/single-page-application/overview/templates)展示它，并与 IdeaBlade 合作开发可与 Visual Studio 一起使用的基于 Breeze 的应用程序模板。Breeze 不是 Microsoft 产品。但它已经跨越了一个门槛，足以让微软以这种方式舒适地展示它。这很重要。

*   我们应该发布我们的路线图。它部分是由您通过[用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)和堆栈溢出问题提出的建议驱动的。Angular 支持在这些论坛中非常受欢迎。这也是由我们对市场机会的解读所驱动的……Angular 再次成为明智的战略选择。

*   我们与 Angular 产品团队有着良好的关系，共同致力于推进单页应用程序的开发……。这种关系的一些成果：[Breeze/Angular 模板](http://www.asp.net/single-page-application/overview/templates/breezeangular-template)和[我在 Google Mt. View Campus 上关于 Angular 和 Breeze 的演讲](http://www.youtube.com/watch?v=P2ErSQj3SN8)。

## 技术

*   把我放在你的位置上，我也想知道我的替代方案是什么。Ember.Data 是另一个基准。据我所知，不适用于 Angular。但它确实告诉您很多关于复杂数据管理的挑战以及如何充分解决这些挑战。

*   “自己建造”总是有可能的。如果你想知道那是什么样的，请四处看看。或者用你的头脑和你的经验。你有多少次能够比一个致力于它十年的团队更好地编写自己的框架？也许你可以。你所要做的就是说服老板。

*   让我们假设你可以。仅仅因为你*可以*并不意味着你*应该*。您也可以编写自己的“Angular”。基础设施开发是最有效地利用您的人才吗？还是应该将您的时间和精力重新投入到具有感知客户价值的应用程序开发上？

*   也许最谨慎的做法是使用 API 将 Breeze 内容封装在服务层中，该 API 具有您希望应用程序组件与之通信的抽象。如果出现问题，您已将问题隔离到您的服务层。我们所有的示例都采用这种方法：查找名为“datacontext”和“dataservice”的模块。

*   目前，我们的 Angular 支持并未扩展到缺少 ECMAScript 5 对 getter/setter 属性支持的浏览器……正如 FastReload 所观察到的那样。我们没有计划解决这个问题。我们的研究告诉我们，大多数构建单页应用程序 (SPA) 的人都针对给定 EC5 浏览器的移动场景。我严重怀疑这种以 JavaScript 为中心的应用程序能否在旧版浏览器上充分发挥作用。但是你应该和你的经理讨论你为什么要走这条路以及你想接触谁。如果您需要在较旧的浏览器上运行，我不会打赌 Breeze 会帮助您使用 Angular 应用程序。您可以考虑切换到我们的 Hot Towel/Knockout/Breeze 堆栈，该堆栈适用于旧版浏览器；请参阅Pluralsight 上的 John Papa 的“[单页应用程序快速入门”课程。](http://pluralsight.com/training/Courses/TableOfContents/single-page-apps-jumpstart)

*   Angular 依赖脏检查来检测变化，而 Breeze 依赖于内部事件。这些是不同的方法；它们不是不相容的。例如，Angular 将自身挂钩到 DOM 事件和 XHR 回调中。Angular 团队了解我们在做什么，他们也不认为我们不兼容。您必须注意规则（例如，在适当的时候调用 $scope.$apply）。这对 Angular 开发人员来说不是新闻。

*   您需要微风功能吗？取决于你在做什么。以下是 Breeze 在 Angular 中找不到的一些功能：客户端查询语言、对象图导航、更改跟踪（与更改检测不同）、模型验证、客户端缓存、临时密钥生成/解析，以及捆绑/交易保存。这不是对 Angular 的批评。这意味着我们有不同且互补的重点领域。Angular 专注于应用程序逻辑和表示，而 Breeze 专注于与持久数据模型相关的事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:03:59.460

似乎作者公开开发了这个项目 6 个月，第一个发布版本是 0.53。如果我们假设他们确实有 2 天的迭代（有点与发布后的迭代长度相关），那么应用程序大约有 1 年的历史。

两位主要作者是他们`CTO`的`VP Tech`公司[Idea Blade](http://www.ideablade.com/company/about-us.aspx)。

该公司成立于 2004 年。

除此之外，我没有看到任何路线图，也没有看到将继续进行的项目的承诺。我认为只要它被使用，*只要他们的公司获得利润*，他们就会开发它。请注意，该公司销售“企业”产品；所以他们可能会改变想法来停止开源项目，也许不会，但没有承诺。

对我来说有两个主要问题，

> Todo-Angular 在现代浏览器中运行，例如 IE9、IE10，以及最近的 Chrome、Safari、Firefox 和 WebKit 浏览器。Breeze 不支持在缺少 ECMAScript 5 属性 getter 和 setter 的旧浏览器中运行的 AngularJS 应用程序。

虽然，我很感激*不*支持`<IE9`，如果你要向你的老板解释，那么这将是一个问题。还有一件事，`breeze`依赖于`getters`and `setters`，也就是`change listeners`angular 做相反的事情：`dirty checking`. 他们采用完全不同的方案，因此很可能会在这里和那里存在兼容性问题。

我*严格*的个人结论是不要使用它。主要是因为在使用 Angular 时，无论如何您都不需要大多数功能。随着项目的发展，它可能是一种负担，而不是对项目的支持。

# javascript - 将函数绑定到由 javascript 创建的元素

> ID：15739979
> 
> 赞同：0
> 
> 时间：2013-04-01T08:16:21.343
> 
> 标签：javascript

我想用 javascript 创建一个日历：

我通过这个函数创建元素：

```
createElem : function (name, attrs){
     var el = document.createElement(name);
     for(var key in attrs) {
        el.setAttribute(key, attrs[key]);
     }
     return el;
} 
```

桌子 ：

```
var tb=this.createElem("table", {"class":"p-calendar", id: "p-calendar"}); 
```

行和单元格：

```
for(var i=2; i<to; i++){
    tb.insertRow(i);
    for(var j=0; j < 7; j++){
       tb.rows[i].insertCell(j);
       .
       . 
```

* * *

所以在我的循环中：

```
tb.rows[i].cells[j].className="day"; // it's work 
```

但 ：

```
tb.rows[i].cells[j].onclick = function(){
    tb.rows[i].cells[j].id = "today";
}  // Unable to set property 'id' of undefined or null reference 
```

1.  **为什么会报错？！**
2.  **将函数绑定到由 javascript 创建的元素的最佳方法是什么？**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:34:01.390

**简短的回答：**您需要一个`closure`onclick 处理程序。

**长答案：** 您的索引`i`和循环`j`递增。当您实际单击元素时，稍后会调用您的处理程序`for`。猜猜 then的`onclick`值是多少。它们超出 和 的元素数组的范围。这意味着每个元素都使用相同的值，并且它们都没有在元素数组的范围内获取值。您可以通过记录当前处理程序的值和内部值来验证这一点。`i``j``rows``cells``i``j``i``j``onclick`

**解决方案：**

替换块：

```
tb.rows[i].cells[j].onclick = function(){ ... } 
```

和：

```
var getOnclickMethod = function (i, j) {
    var cur_i = i * 1;
    var cur_j = j * 1;
    var callback = function(){
        tb.rows[cur_i].cells[cur_j].id = "today";
    };
    return callback;
};

tb.rows[i].cells[j].onclick = getOnclickMethod(i, j); 
```

# ios - 是否必须升级到最新的 fb sdk？

> ID：15739980
> 
> 赞同：0
> 
> 时间：2013-04-01T08:16:23.397
> 
> 标签：ios, facebook

新应用要上传到appstore，是否必须升级到最新的fb sdk？旧的 sdk 会导致任何类型的拒绝吗？我知道很少有图形 api 支持已停止直接发布在朋友墙上。但我们只使用对话框。谁能提供一个链接来确认升级到最新的 sdk 是否是强制性的？

# ruby-on-rails - 如何将包装类添加到 simple_form 自定义集合单选

> ID：15739981
> 
> 赞同：2
> 
> 时间：2013-04-01T08:16:24.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我创建了一个 SimpleForm 自定义输入，并且还想根据其值将类名添加到某个项目的包装元素，以便通过 CSS 装饰该项目。但我不知道如何访问每个项目的价值。请参考我下面的代码：

```
class ProductOptionInput < SimpleForm::Inputs::CollectionRadioButtonsInput
    def input
        label_method, value_method = detect_collection_methods

        @builder.send("collection_radio_buttons",
                    attribute_name, collection, value_method, label_method,
                    input_options, input_html_options, &collection_block_for_nested_boolean_style
        )
    end

    def build_nested_boolean_style_item_tag(collection_builder)
        template.shirt_option_icon(attribute_name, collection_builder.value) + \
        collection_builder.radio_button + \
        template.content_tag(:div, collection_builder.text, class: :name)
    end

    def item_wrapper_class
        classes = super
        classes << ' highlight' if @builder.object.product.send(attribute_name) == [current item's value]
        classes
    end
end 
```

# java - 可序列化的简单对象 IOException

> ID：15739983
> 
> 赞同：0
> 
> 时间：2013-04-01T08:16:48.467
> 
> 标签：java, android, ioexception, serializable, objectoutputstream

**找到解决方案：** 您必须像这样打开 Streams：

```
FileInputStream  inputStream = openFileInput(FILENAME);
ObjectInputStream ois = new ObjectInputStream(inputStream); 
```

与输出相同。如果有人在寻找答案时偶然发现这个问题，这对我来说是固定的。

**原始问题：** 通过对`Toast`s 的一些测试，我发现当我调用构造函数时，`ObjectOutputStream`我会`IOException`被抛出。

我的代码看起来像这样。请注意，这只是一个测试项目，我什至无法让这个项目工作。

```
 Button b = new Button(this);
    b.setText("write");
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            try {
                File f = new File("Filepath");
                if (!f.exists()) {
                    f.createNewFile();
                }

                ObjectOutputStream oos = new ObjectOutputStream(
                        new FileOutputStream(f)); //IOException here!

                Series x = new Series("Test", 20, 12);
                // oos.writeObject(x);

                oos.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });

    tv = new TextView(this);
    tv.setText("Not read anything yet!");

    Button r = new Button(this);
    r.setText("Read");
    r.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            try {
                ObjectInputStream ois = new ObjectInputStream(
                        new FileInputStream(new File("Filepath")));
                Series y = (Series) ois.readObject();
                tv.setText(y.getName() + "-" + y.getNumOfSeason() + "-"
                        + y.getNumOfEpisode());
                ois.close();
            } catch (StreamCorruptedException e) {
                e.printStackTrace();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }); 
```

问题似乎是我的构造函数调用。在我添加部分之前

```
if (!f.exists()) {
                f.createNewFile();
            } 
```

我有一个`FileNotFoundException`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:27:08.290

[这是FileOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html)的 Oracle 文档的摘录

> 如果文件存在但是是目录而不是常规文件，不存在但无法创建，或者由于任何其他原因无法打开，则抛出 FileNotFoundException。

在您的情况下，我认为该文件被视为目录，因为它没有扩展名，因此引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:20:03.883

当程序在磁盘中或您试图访问该文件的任何地方找不到该文件时，将引发 FileNotFoundException。检查您的文件路径，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:23:30.013

我对此不确定，但我认为您可以尝试使用格式化程序，如果文件不存在，格式化程序会创建文件。

```
Formatter formatter = new Formatter (file); 
```

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:00:06.667

**找到解决方案：** 您必须像这样打开 Streams：

```
FileInputStream  inputStream = openFileInput(FILENAME);
ObjectInputStream ois = new ObjectInputStream(inputStream); 
```

与输出相同。如果有人在寻找答案时偶然发现这个问题，这对我来说是固定的。

# c# - 为什么是 Pair 和 Triplet 类 System.Web.UI（我可以在控制台应用程序中使用它们）？

> ID：15739985
> 
> 赞同：2
> 
> 时间：2013-04-01T08:16:52.470
> 
> 标签：c#, asp.net, .net, collections, tuples

碰到古老的 .NET [Pair Class](http://msdn.microsoft.com/en-us/library/system.web.ui.pair%28v=vs.100%29.aspx)和[Triplet Class](http://msdn.microsoft.com/en-us/library/system.web.ui.triplet.aspx)

为什么它们在 System.Web.UI 命名空间中？
我可以在桌面（Windows 窗体）或控制台应用程序中使用它们吗？

更新：
有一个类似的问题[Triplet 类的用途是什么？它与元组有关吗？](https://stackoverflow.com/questions/5702396/what-is-the-triplet-class-used-for-is-it-related-to-tuples?rq=1)
我没有将它混入问题中以避免使这个问题重复

**更新2：**
这个问题的主要目的是了解在.NET框架中将类划分为命名空间的原则和基本原理，即避免在单独和意想不到的地方（文档和命名空间）找到某些东西的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T10:40:12.040

或者，您可以使用`System.Tuple<T1, T2, T...>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:19:37.343

**是的，您可以**，只要您不介意添加对`System.Web.UI`...的引用

这真的很奇怪，他们属于那里，但它的实现非常容易，您可以设计自己的，并随时添加功能。

# arrays - Coffeescript，数组长度未定义

> ID：15739989
> 
> 赞同：3
> 
> 时间：2013-04-01T08:17:05.820
> 
> 标签：arrays, coffeescript

谁能解释一下为什么长度总是空的？

```
jsCountries = 
  0:
    country: "Brazil"
    photo:  "source.png"

alert jsCountries.length 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T13:12:00.610

我不知道你想做什么。如果您想使用您的代码而不是访问权限

```
Object.keys(jsCountries).length 
```

但是，如果您的意图是创建一个国家对象数组，那么我建议您以不同的方式初始化您的 jsCountries 变量

```
jsCountries = [
   {country: "Brazil", photo:  "source.png"},
   {country: "Argentina", photo:  "aregentina_source.png"},
   ...
] 
```

然后以下将起作用

```
jsCountries.length 
```

无论如何，我强烈建议不要对对象使用数字键，即使它可能也是如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T09:35:34.987

您正在声明一个带有属性`0`集的对象，而不是一个数组。

你要：

```
jsCountries = [
  country: "Brazil"
  photo:  "source.png"
]

alert jsCountries.length 
```

# python - 我如何找到哈希的字符串？

> ID：15739990
> 
> 赞同：0
> 
> 时间：2013-04-01T08:17:12.370
> 
> 标签：python, string, security, hash, passwords

这是我老师写的代码（python）。（我使用蛮力发现的素数）。我还有一些带有匹配哈希的密码的测试数据（现在我已经找到了函数中使用的两个素数，这并不重要）。

任何人都可以帮助我找到“扭转”这种情况的方法，或者至少给我一个小费吗？

```
def prime_number_hash(s , 17299, 209569):
    """
    Will hash the string s using the two prime numbers p and n.
    """
    h = 0
    for k,l in enumerate(s):
        v = ord(l)
        # k is the index of the letter 
        h += v * pow(p,k)
    return h % n 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:23:02.123

简单的答案是您无法根据哈希值重构输入字符串。该函数具有`209569`不同的输出值，并且有更多可能的输入字符串。参见[鸽洞原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)。

如果任务是找到具有给定哈希*的*字符串，那是一个不同的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:30:10.960

我成功了。我只做了 6 个循环并尝试了每个字母组合。当我发现它时，它是一个例外。5秒内被发现。

# java - 如何从mysql数据库中打开图像？

> ID：15739991
> 
> 赞同：-3
> 
> 时间：2013-04-01T08:17:12.823
> 
> 标签：java, mysql, blob

我可以将图像存储在数据类型为 blob 的 mySql 数据库中。我以二进制图像格式存储了图像。我已经在这段代码的帮助下将图像存储在 MYSQL 中

```
File file = new File("G:/photos/New Folder (2)/bhavana_gallery_10.jpg");

            byte[] bFile = new byte[(int) file.length()];

            try {

             FileInputStream fileInputStream = new FileInputStream(file);

             fileInputStream.read(bFile);

             fileInputStream.close();

            } catch (Exception e) {

             e.printStackTrace();

            }

    inpatient.setImagefile(bFile); 
```

但是我可以在网络应用程序中打开图像，我可以进行任何转换吗，请告诉我什么类型的转换............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:23:57.440

您的文件路径有空格（'New Folder (2)'）。将此折叠的名称更改为“NewFolder”或其他不带空格的名称

# java - 在 android 中解析数据 org.json.JSONException 时出错

> ID：15739992
> 
> 赞同：0
> 
> 时间：2013-04-01T08:17:14.103
> 
> 标签：java, android, json

我有一个 url，我想获取这些数据并使用 JSON 将其显示到列表视图中，但是当我运行它时，出现了一些错误，即：

> JSONArray 无法转换为 JSONObject

这是我的代码：

```
 JSONArray jsonArray = new JSONArray ();

        for (int i = 0; i < jsonArray.length(); i++) {
            JSONArray innerJsonArray = jsonArray.getJSONArray(i);
            JSONObject c = innerJsonArray.getJSONObject(0);

            HashMap<String, String> map = new HashMap<String, String>();
            // Storing each json item in variable
            map.put("atasan", c.get("atasan").toString());
            map.put("kode_agen", c.get("kode_agen").toString());
            map.put("jenis", c.get("jenis").toString());
            map.put("no_aaji", c.get("no_aaji").toString());
            map.put("nama_agen", c.get("nama_agen").toString());

            AgenList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return null;
}

ListAdapter adapter = new SimpleAdapter(
            MainActivity.this, AgenList, R.layout.list_item,
            new String[] {ATASAN, KODE_AGEN, JENIS, NO_AAJI, NAMA_AGEN}, new int [] {R.id.atasan, R.id.kode_agen, R.id.jenis, R.id.no_aaji, R.id.nama_agen});

setListAdapter(adapter); 
```

我不知道我的错在哪里，我希望有人能帮我解决这个问题吗？

这是我要采用的示例数据：{“atasan”：“THOMAS SUNARDI”，“kode_agen”：“024932”，“jenis”：“Regional”，“no_aaji”：“11529943*”，“nama_agen”： “约纳坦·阿德里扬托·威贾贾”}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:28:06.277

所以这样做..

```
JSONObject jsonObj= new JSONObject(new String(buffer));

JSONArray data = jsonObj.getJSONArray("data");

 for(int i =0; i < data .length(); i++){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:26:48.327

我还没有看到 JSON 但我认为错误必须在这一行

```
JSONObject c = innerJsonArray.getJSONObject(0); 
```

尝试这个：

```
JSONArray c = innerJsonArray.getJSONArray(0); 
```

# ios - 什么可以阻止 TestFlight 上传日志？

> ID：15739993
> 
> 赞同：1
> 
> 时间：2013-04-01T08:17:14.613
> 
> 标签：ios, testflight

我正在使用 TestFlight 来测试 iOS 应用程序，并使用`TFLog`Checkpoints。

日志和事件不会从某个设备到达，尽管它们可以在我自己使用的设备上正常工作。对于该设备，我看到会话计数器上升，但没有会话日志，甚至是匿名日志。

不幸的是，那个设备是我们客户在另一个国家的，我不能让那个人尝试这个那个。我知道 TestFlight 不会立即发送数据，但从会话数 (5) 来看，我认为至少有一些事情会通过。

（设备）特定的东西可以阻止 TestFlight 的日志上传吗？还是这里唯一的建议是让应用程序运行并“再给它一秒钟，它会进入太空”？

# java - JSP - 将变量传递给 servlet

> ID：15739995
> 
> 赞同：2
> 
> 时间：2013-04-01T08:17:16.400
> 
> 标签：java, jsp, variables, include

如何将 value=x 从 JSP 传递给 servlet？我搜索了许多相关问题，但无法得到答案。这里 x 是一个变量。

```
<html>
<body>
<%@ page import="java.lang.*"%>
<%!int x,y; %>
<% String a,b;
a=request.getParameter("jobs");
b=request.getParameter("process");
x=0;
y=0;
try
{
 x=Integer.parseInt(a);
   y=Integer.parseInt(b);
}
catch(Exception e)
{ }
  out.println("You selected - <br>");
  out.println("Jobs - "+x+"<br>");
  out.println("Process - "+y);
   String path="table?input=x";
   %>

  <jsp:include page="table" > 
   <jsp:param name="input"  value=x/>
  </jsp:include>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:36:19.747

由于变量**x**在 scriptlet 中，您需要使用 <%= %>

```
<jsp:include page="table" > 
    <jsp:param name="input"  value="<%=x%>"/>
</jsp:include> 
```

# c# - xaml 中的框架导航返回 false

> ID：15739996
> 
> 赞同：6
> 
> 时间：2013-04-01T08:17:24.590
> 
> 标签：c#, xaml, windows-8, navigation

您好，
我正在使用 xaml 和 c# 编写一个简单的 Windows 8 应用程序。我正在使用 VS 2012 模板创建页面，包括导航系统。

我正在加载大量数据，因此我决定添加一个带有 ProgressRing 的加载页面，并在加载数据完成后导航到第一个应用程序页面：

`//loading page
protected async override void OnNavigatedTo(NavigationEventArgs e) {
...
await topCookerManager.GetBlogsAsync();
this.Frame.Navigate(typeof(MainPage));
...
}` 

它在应用程序启动时运行良好，但是当我在应用程序的第一页上并且当我单击后退按钮时，我会重定向到加载页面。因此，在加载页面中，我正在检查是否加载了数据，如果是，我将重定向到第一页。

`if (dataManager.Blogs != null && dataManager.Blogs.Count > 0)
this.Frame.Navigate(typeof(MainPage));`

**这就是问题**：我无法从这一点开始导航。导航方法返回 false ！我已经测试了 *GoFormard* 方法，它没有抛出异常，但导航没有完成，我停留在加载页面上......

你能告诉我我的错误在哪里吗？或者如何实现加载页面。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-01T12:44:53.320

您不能`Navigate`在该`OnNavigatedTo`方法中使用，因为之前的导航方法此时仍在执行。相反，您可以通过调度程序运行新的导航调用来等待它被加载。

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{
     //your other code
     //...
     Dispatcher.RunAsync(CoreDispatcherPriority.Normal, 
                            () => Frame.Navigate(typeof(MainPage))); 
} 
```

它可能在您的代码中第一次工作的原因是因为您正在等待一些时间来加载博客。在这段时间内，导航方法已完成加载，因此可以再次调用它。

话虽如此，请考虑您是否真的想要一个加载页面，而不仅仅是评论中提到的 Xyroid 某种覆盖。