# StackOverflow 问答 14760000-14760999

# javascript - 图像上的引导弹出框

> ID：14760006
> 
> 赞同：1
> 
> 时间：2013-02-07T20:05:11.020
> 
> 标签：javascript, twitter-bootstrap

所以我有一个图标列表，当您将鼠标悬停在图标上时，我试图激活一个弹出框，我似乎无法让它工作，任何帮助将不胜感激。

```
<img class="icon" rel="popover" trigger: "hover" data-placement="top" data content="This is a popover"src="images/brandable.png"><br>Brandable</br></li> 
```

我在一个单独的 js 文件中有这个

```
$('.icon').popover({placement:'top'}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-28T08:35:39.980

将属性放在 jquery 变量中而不是标签中

```
<img class="icon" rel="popover" src="images/brandable.png"/> 
```

添加脚本如下

```
<script>
$('document').ready(function() {
    var popOverSettings = {
        placement: 'top',
        selector: '.icon',
        title:'Brandable',
        trigger: "hover",
        content:'This is a popover'
    };
$(this).popover(popOverSettings);
});
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T13:26:25.210

这已经晚了一年多，但我发现这个工作： [Fiddler Link](http://jsfiddle.net/dalecameron/QZj5P/11/)
using this JS：

```
$(function(){
    $('[data-toggle=popover]').popover({
      trigger: 'focus',
      html: true,
      title: 'Toolbox'
}) 
}); 
```

这个html：

```
 <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcS-eTmHxgicEfq4K-sEz_X52cq56uBP2l8cr_q8ivOavSIca5TYtQ"
        data-toggle="popover" tabindex="50" data-content="test <b>text</b>" data-placement="right"/> 
```

您需要使用 tabindex 属性允许图像接受焦点。这对我来说是关键。如果您希望弹出框在点击事件上保持打开状态，请删除“触发器：'焦点'行......
希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T03:35:08.217

对于您的代码，您有：

```
<img class="icon" rel="popover" trigger: "hover" data-placement="top" data content="This is a popover"src="images/brandable.png"><br>Brandable</br></li> 
```

`trigger: "hover"`不是有效的 html。Bootstrap 帮助文档注释，“选项可以通过数据属性或 JavaScript 传递。对于数据属性，将选项名称附加到 data-，如`data-animation=""`.”

因此，您可能想要包含 data-trigger="hover" ，看起来您之前缺少一个空格`src=`。

此外，您在 html 和 javascript 中都有放置顶部。您只需在一处申报。因此，您可以从 img 标记中删除 data-placement="top" ，或者在您的 javascript 中删除它，这样就可以了`$('.icon').popover({placement:'top'});`

`$`你的函数前面还有“ ”。根据该代码所在的位置，您可能会遇到 jquery 冲突。需要注意的是，您需要在错误日志中发布您看到的任何错误。如果您使用 chrome 右键单击​​ > web 检查 > 单击底部的红色 x 并复制您在其中看到的任何错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T20:36:17.277

也许最简单的方法是使用此答案中描述的`OnMouseOver`和事件： [https ://stackoverflow.com/a/10709196/121737](https://stackoverflow.com/a/10709196/121737)`OnMouseOut`

我更喜欢使用一个图像来执行此操作，该图像的宽度与普通图标相同，但高度是其两倍。此图像将显示两个图标，一个在另一个之上，上一个是普通图标，下一个是翻转图标：

```
img.icon {
    display: block;
    width: 4ex; height: 4ex;
    background-size: 4ex 8ex;
    background-position: 0 0;
}

img.icon:hover {
    background-position: 0 -4ex;
}

img.icon#twitter {
    background-image:url('icons/twitter.jpg');
}

img.icon#facebook {
    background-image:url('icons/facebook.jpg');
} 
```

在此之后，在 HTML 中声明图标更加清晰：

```
<img class="icon" id="twitter" />
<img class="icon" id="facebook" />
<img class="icon" style="background-image:url('icons/other_icon.jpg')" /> 
```

# perl - Perl 新手 - CSV - 查找字符串并打印该列中的所有数字

> ID：14760012
> 
> 赞同：1
> 
> 时间：2013-02-07T20:05:20.117
> 
> 标签：perl, csv

我在 CSV 文件中有一堆数据，第一行是所有字符串（所有文本和下划线），所有后续行都填充了与所述字符串相关的数字。

我试图解析第一行并找到特定的字符串，记住该字符串所在的列，然后遍历文件的其余部分并获取同一列中的数据。我需要对三个字符串执行此操作。

我一直在使用 Text::CSV 但我不知道如何让它增加一个计数器，直到它在第一行找到字符串然后转到下一行，从同一列获取数据等. 等等 这是我迄今为止尝试过的：

```
while (<CSV>) {
    if ($csv->parse($data)) {
        my @field = $csv->fields;
        my $count = 0;
            for $column (@field) {
            print ++$count, " => ", $column, "\n";
        }
    } else {
        my $err = $csv->error_input;
        print "Failed to parse line: $err";
    }
} 
```

由于 $data 在第 1 行，它会打印 25 次“1 $data”（CSV 文件中的行数）。我如何让它记住它在哪一列中找到了 $data？另外，因为我知道所有字符串都在第 1 行，我如何让它只解析第 1 行，找到 @data 中的所有字符串，然后解析文件的其余部分，从必要的列并将其放入矩阵或数组数组中？
谢谢您的帮助！

编辑：我意识到我的问题措辞有点糟糕。我不知道如何从 CSV 获取列号。这是怎么做到的？
另外，一旦我得到了列号，我如何告诉它 CSV 遍历后续行并仅从该列中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:48:39.230

尝试这样的事情：

```
use strict;
use warnings;
use Text::CSV;

my $csv = Text::CSV->new({binary=>1});

my $thing_to_match = "blah";
my $matched_index;
my @stored_data = ();

while(my $row= $csv->getline(*DATA)) #grabs lines below __DATA__ 
                                     #(near the end of the script)
{
    my @fields = @$row;

    #If we haven't found the matched index, yet, search for it.
    if(not defined $matched_index)
    {
        foreach my $i(0..$#fields)
        {
            $matched_index = $i if($fields[$i] eq $thing_to_match);
        }
    }

    #NOTE: We're pushing a *reference* to an array!
    #Look at perldoc perldata
    push @stored_data,\@fields;
}

die "Column for '$thing_to_match' not found!" unless defined $matched_index;

foreach my $row(@stored_data)
{
    print $row->[$matched_index] . "\n";
}

__DATA__
stuff,more stuff,yet more stuff
"yes, this thing, is one item",blah,blarg
1,2,3 
```

输出是：

```
more stuff
blah
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:49:24.557

我没有时间写一个完整的例子，但我写了一个可以帮助你做到这一点的模块。[Tie::Array::CSV](http://metacpan.org/module/Tie%3a%3aArray%3a%3aCSV)使用了一些魔法来让你的 csv 文件表现得像 Perl 的 arrayrefs 数组。通过这种方式，您可以使用您的 Perl 知识与文件进行交互。

一句警告的话！我的模块的一个好处是它是读/写的。由于您只想阅读，请注意不要分配给它！

# r - outline=FALSE 用什么方法判断异常值？

> ID：14760013
> 
> 赞同：4
> 
> 时间：2013-02-07T20:05:21.580
> 
> 标签：r, boxplot, outliers

在 R 中，我使用了 outline=FALSE 参数在为特定集合绘制框和胡须时排除异常值。它的工作非常出色，但让我想知道它究竟是如何确定哪些元素是异常值。

```
boxplot(x, horizontal = TRUE, axes = FALSE, outline = FALSE) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T20:27:29.643

盒须图术语中的“异常值”是数据集中任何点与中位数的距离超过指定距离，通常*约为*中位数与 0.25（下限）或 0.75（下限）之间差异的 2.5 倍（上）分位数。要到达那里，请参阅`?boxplot.stats`：首先，查看`out`输出中的定义

> `out``if(do.out)`: 超出胡须 ( )极值的任何数据点的值。

这些是“异常值”。

二、看胡须的定义，根据`coef`参数，默认为1.5：

> 胡须延伸到最极端的数据点，该数据点不超过`coef`盒子距离盒子长度的倍数。

最后，看看“铰链”的定义，它们是盒子的两端：

> 两个“铰链”是第一个和第三个四分位数的版本，即接近 quantile(x, c(1,3)/4)。

把这些放在一起，你会得到异常值（大约）定义为离中位数比中位数和相关四分位数之间距离的 2.5 倍更远的点。这些有些令人费解的定义的原因（我认为）部分是历史性的，部分是希望图表的组成部分反映数据中存在的实际值（而不是说，两个数据点之间的中点）尽可能。（您可能需要返回帮助页面中引用的原始文献以获得完整的理由和解释。）

需要注意的是，**由该算法定义为“异常值”的点不一定是通常统计意义上的异常值（例如，基于数据的特定统计模型而出人意料地极端的点）**。特别是，如果您有一个大数据集，您必然会看到很多“异常值”（这表明您可能希望切换到更需要数据的图形摘要，例如小提琴图或豆状图）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:25:49.177

对于`boxplot`，异常值是高于或低于“晶须”的点。默认情况下，这些数据点扩展到不超过四分位距乘以`range`框内参数的数据点。默认`range`值为 1.5，但您可以更改它，因此您也可以更改异常值列表。

您还可以`boxplot.stats`通过执行绘图使用的计算的函数看到这一点。

例如，如果您有以下向量：

```
v <- c(runif(10), -0.5, -1)
boxplot(v) 
```

![在此处输入图像描述](../Images/e23119bbe361908f9078537602a06e09.png)

默认情况下，只有 -1 值被视为异常值。你可以看到它`boxplot.stats`：

```
boxplot.stats(v)$out
[1] -1 
```

但是，如果您更改`range`参数（或`coef`for的参数`boxplot.stats`），则 -1 不再被视为异常值：

```
boxplot(v, range=2) 
```

![在此处输入图像描述](../Images/19bd0679e3f4fcc3f99232366914e971.png)

```
boxplot.stats(v, coef=2)$out
numeric(0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:23:02.807

诚然，这并不能立即从`boxplot()`. 看`range`参数：

> 这决定了绘图胡须从盒子伸出多远。如果“范围”是正数，则须线延伸到最极端的数据点，该数据点不超过“范围”乘以方框的四分位间距。零值会导致晶须延伸到数据极值。

因此，`range`使用 的值，连同四分位数范围和框（由四分位数给出）来确定胡须的结束位置。胡须之外的一切都是异常值。

我将是第一个同意这个定义不直观的人。可悲的是，它现在已经成立。

# bash - 在 bash 脚本中定义 wget 的属性

> ID：14760014
> 
> 赞同：0
> 
> 时间：2013-02-07T20:05:24.617
> 
> 标签：bash, attributes, wget

我正在尝试在程序开始时为 wget 设置属性，以便将它们用于所有 wget 实例。

```
WGET_LOG_FILE=path/to/wget_log
USER_AGENT='Mozilla/5.0 (X11; Linux i686; rv:18.0) Gecko/20100101 Firefox/18.0x'

WGET="wget -U $USER_AGENT -a $WGET_LOG_FILE --no-clobber --wait=2 --random-wait"

$WGET www.webpage.com 
```

问题是它忽略了日志并将所有内容定向到输出或给出“path/to/wget_log 不存在”的错误，因此我想它也忽略了用户代理字符串......

那么我做错了什么？我尝试将 " 更改为 ' 或 $() ...

奇怪的是，如果我在终端中执行：

```
wget -U $USER_AGENT -a $WGET_LOG_FILE --no-clobber --wait=2 --random-wait www.webpage.com 
```

它可以工作，所以我猜它是在某个子shell中执行的，这就是它没有得到它的原因。

所以问题是：

1.  如何在 bash 脚本中正确设置 wget 的属性？切普纳回答
2.  如何检查 wget 是否正在使用指定的用户代理？只需 wget 任何用户代理检查网页，例如：[http ://whatsmyuseragent.com/](http://whatsmyuseragent.com/)
3.  2 秒是获取网页的良好等待率吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:19:57.637

通常，您不应依赖将参数扩展为要运行的命令及其参数的名称；对于简单的情况，它可以按预期工作，但您很快就会遇到麻烦。我无法准确解释您看到的错误（因为您没有引用`$USER_AGENT`，所以即使您的第三个示例有效，我也很惊讶）。

由于您正在使用`bash`，因此您应该使用数组来保存参数，然后`wget`显式调用并扩展数组以提供参数。

```
WGET_LOG_FILE=path/to/wget_log
USER_AGENT='Mozilla/5.0 (X11; Linux i686; rv:18.0) Gecko/20100101 Firefox/18.0x'

wget_args=( "-U" "$USER_AGENT"
            "-a" "$WGET_LOG_FILE"
            "--no-clobber"
            "--wait=2"
            "--random-wait")

wget "${wget_args[@]}" www.webpage.com 
```

# ruby-on-rails - 如何让 Facebook 刮板进入动态的、经过身份验证的页面

> ID：14760016
> 
> 赞同：1
> 
> 时间：2013-02-07T20:05:27.493
> 
> 标签：ruby-on-rails, ruby, facebook, facebook-opengraph, scraper

我有一个社交网络，需要在用户进入之前进行身份验证和电子邮件验证。一旦进入，用户只能看到他们朋友的内容。它实际上非常简单，即使听起来不那么简单。这是我在过滤器之前的身份验证：

```
 def authenticate
    if logged_in?
      redirect_to authentication_url if current_user.account_disabled
    else
      redirect_to root_url
    end
  end 
```

我遇到的问题是让 Facebook 刮板从一些动态页面中获取元标记。我[读到](https://stackoverflow.com/questions/8859013/whats-the-ip-address-range-of-facebooks-open-graph-crawler)`robots.txt`您可以允许 Facebook 的用户代理进入非公共页面，但对于文件中受保护的页面不是这样吗？我没有使用刮刀的经验，但肯定需要一个 cookie 和一个启用的帐户来刮取我网站上的动态信息？我什至不确定如何实际编写让刮刀进入的方法或在哪里编写。

我会考虑`SecureRandom.urlsafe_base64`为刮刀生成一个令牌，并在普通用户无法访问的空白页面（带有元数据）上进行异常处理，但从技术上讲，这并不安全，考虑到如果你看过在正确的 JS 文件（用于 Open Graph 操作 POST 中的 URL 引用）和元标记中，您可以获得受保护的用户数据。这个想法似乎并不接近正确......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-07T18:25:04.050

用户代理很容易被伪造。小心允许仅基于用户代理的访问。

我相信他们有办法允许通过 api 进行抓取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:17:54.390

只要您的内容具有每个用户看到的唯一 URL（通常受登录过滤器保护），您就可以通过检查源 IP 或用户代理以匹配 Facebook 抓取工具来允许访问。

但是，与大多数社交网站一样，您可能会使用相同的 URL 来返回为当前登录用户呈现的自定义内容。这本质上是不可回收的——因为每个用户都有不同版本的 say '/profile'。

# java - 在android中自动滚动textview

> ID：14760033
> 
> 赞同：0
> 
> 时间：2013-02-07T20:06:03.353
> 
> 标签：java, android

我正在构建一个类似聊天的应用程序，它使用滚动视图将用户输入的文本显示到屏幕上。我想做的是在屏幕上附加更多文本时使滚动视图自动滚动。我正在使用文本视图来显示输入。滚动视图的xml部分如下：

```
 <ScrollView
        android:id="@+id/scroller"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/buttons"       
      >

 <LinearLayout
    android:id="@+id/start_chat"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    >

 </LinearLayout>

</ScrollView> 
```

我该怎么做呢？我尝试将布局的重力设置为“底部”，但这不能正常工作（当滚动视图向下滚动时向上移动的输入文本无法再次查看）。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:32:24.910

如果要滚动到绝对底部（添加新 TextView 的位置） ，请在添加 TextView 时在 ScrollView 上使用[fullScroll 。](http://developer.android.com/reference/android/widget/ScrollView.html#fullScroll%28int%29)

```
ScrollView my_scrollview = (ScrollView) findViewById(R.id.scroller);
my_scrollview.fullScroll(ScrollView.FOCUS_DOWN); 
```

相反，如果您想从用户正在查看的当前位置相对滚动，我会尝试类似[smoothScrollBy](http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollBy%28int,%20int%29)或[scrollBy](http://developer.android.com/reference/android/view/View.html#scrollBy%28int,%20int%29)

```
/* recently_added_textview being the TextView that was added to trigger this */
ScrollView my_scrollview = (ScrollView) findViewById(R.id.scroller);
int height = recently_added_textview.getHeight();
my_scrollview.smoothScrollBy(0, height);
/* x being 0 assuming you don't want to scroll left and right */ 
```

这样，如果用户正在阅读顶部或中间的内容，则不会将用户发送到 ScrollView 的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:26:26.077

您可以在文本视图中添加新聊天后添加它

```
scroller.post(new Runnable() {
    public void run() {
        //ScrollView.FOCUS_DOWN if you want to scroll down
        //ScrollView.FOCUS_UP if you want to scroll up
        svComments.fullScroll(ScrollView.FOCUS_DOWN);
    }
}); 
```

# php - 在没有数据库访问的主机上创建基于 php 的博客

> ID：14760035
> 
> 赞同：3
> 
> 时间：2013-02-07T20:06:09.597
> 
> 标签：php, hosting, blogs

我将为大学创建一个类似博客的应用程序。我被授予访问他们服务器的权限，但我没有被授予访问他们数据库的权限。服务器安装了 PHP，所以我打算使用它。

至少，我想让用户能够发布博客。虽然这不是一个严格的要求，但对每篇博客文章发表评论的能力会很好。

如果我要保持应用程序非常简单，我可以只使用平面文件来存储博客文章。然而，在合并注释时使用平面文件会相当笨拙。另一种选择是使用 SQLite，尽管我还没有确认它是否安装在主机上。

以上选项都不是理想的。我也一直在研究 Google 的 Blogger API。这似乎是一个不错的选择，但限制相当，嗯，有限（最多 100 个帖子，每个帖子 1MB 等）。还有其他提供博客网络服务的网站吗？我当然不是在寻找像 Wordpress.com 或 Blog.com 这样的东西，因为我想编写自定义软件。我正在严格寻找一种免费存储和组织信息的方法。谷歌存储听起来也是一种选择，但如果网站获得太多流量，我不想开始付费（尽管它会是一个相当低流量的网站）。

感谢您的任何想法！

**编辑：寻找免费的解决方案！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:13:23.973

您有两个选项，它们使用基于文件的数据库或基于网络。SQLite 或 Access 是您的选项，它们是基于文件的数据库。对于您的情况，SQLite 更好。

另一种选择是从某个地方购买或租用（或找到免费的）数据库或服务器，并在您的应用程序上使用它。您将连接此服务器而不是连接 localhost。确保托管服务提供商允许远程访问数据库，我的意思是数据库的端口应该可以访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T22:08:05.713

我决定使用 Google 的 Blogger API ( [https://developers.google.com/blogger/](https://developers.google.com/blogger/) )。在我的问题中，我提到限制包括最多 100 个帖子。我错了；它实际上每个帐户限制为 100 个博客（这是一堆！），每个博客可以有无限数量的帖子和评论。我认为这个选项非常适合任何为博客寻找免费存储空间的人，只要您愿意遵守他们的数据模型。

对于可能遇到此问题的任何人，Blogger API 允许您使用 RESTful 接口在博客上执行 CRUD 操作。Google 会为您存储所有数据。如果您不介意您的应用程序向 Internet 的一系列管道发出请求，那么 Blogger API 就可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-01T20:35:48.867

不知道为什么 Rocket Store 的建议被否决了。它本质上是一个快速的键/值存储，因此您不必自己编写一个很好的文件操作封装的麻烦。代码质量似乎也很可靠。它不是一个完整的 NoSQL 数据库，但它可以完成速度很重要的简单任务。

我刚刚在 Raspberry Pi 2 上尝试过，它每秒插入 35000 条记录（当然是简单的记录）。语法很简单，作者页面的代码示例比我见过的大多数其他项目都多。

如果您不是在寻找远程存储，那么 Rocket Store ("paragi\rocket-store") 绝对值得一试。

（来源：[https](https://packagist.org/packages/paragi/rocket-store) ://packagist.org/packages/paragi/rocket-store ）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-31T23:03:18.230

我在 PHP 中编写了一个简单的机制，目的是在平面文件中存储检索大量数据。它完全独立于其他服务。

它使用简单，使用文件系统以非常易于使用的方式完成存储和检索记录的工作。最重要的是闪电般的速度。

你可以在这里找到它：[https ://packagist.org/packages/paragi/rocket-store](https://packagist.org/packages/paragi/rocket-store)

您只需要包含一个文件即可使用它，并且没有依赖关系。

# android - AppMsg - Crouton 库 - 支持片段？

> ID：14760042
> 
> 赞同：2
> 
> 时间：2013-02-07T20:07:06.587
> 
> 标签：android, android-fragments, android-alertdialog, crouton

我一直在使用 AppMsg，这是一个第三方库，用于以非侵入性方式显示警报（最初由 Cyril Motier 构思）。图书馆的日常活动很好，但是有人知道如何使用图书馆`Fragments`吗？

[https://github.com/johnkil/Android-AppMsg](https://github.com/johnkil/Android-AppMsg)

可以看出，主要功能`makeText`需要一个活动`context`。我如何传递`Fragment`给这个方法？

```
public static AppMsg makeText(Activity context, int resId, Style style)
{
    return makeText(context, context.getResources().getText(resId), style);
} 
```

谢谢，托里。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T11:21:03.813

您可以为此使用我的[Crouton](https://github.com/keyboardsurfer/Crouton)库。

为了在片段中显示面包圈，只需调用

```
Crouton.makeText(Activity, String, Style, (ViewGroup) getView()).show(); 
```

或者

```
Crouton.showText(Activity, String, Style, (ViewGroup) getView()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:12:03.270

> 如何将 Fragment 传递给此方法？

通过下载其源代码并根据需要进行修改。目前，AppMsg 仅支持在活动级别显示面包块。

`getActivity()`您可以通过将片段的活动（通过 获得）传递给方法，通过 AppMsg 从片段设置油煎面包丁`makeText()`。但是，这仍将显示活动的面包块，而不是单个片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T05:55:17.963

AppMsg 库已经更新，可以将面包块附加到您提供的任何自定义视图上。寻找`setParent`方法。

在片段中，只要您有对容器视图的引用，它就应该是直截了当的。

# xaml - XAML WP8 - ScrollViewer 不考虑方向

> ID：14760049
> 
> 赞同：1
> 
> 时间：2013-02-07T20:07:37.253
> 
> 标签：xaml, windows-phone-8, scrollviewer

我正在为 Win Phone 8 开发一个应用程序，需要制作一个设置屏幕。我为此创建了一个用户控件。

...省略了开头的内容...

```
<Grid x:Name="LayoutRoot" Opacity="0.995" VerticalAlignment="Top">
    <ScrollViewer
        Name="scrollViewer"
        Margin="0" 
        VerticalAlignment="Top" 
        VerticalScrollBarVisibility="Hidden" Background="#CC000000" Opacity="0.995" HorizontalScrollBarVisibility="Disabled">

        <StackPanel Orientation="Vertical" VerticalAlignment="Top" Margin="0">
            <RichTextBox x:Name="MenuLabel" Height="100" HorizontalAlignment="Left" VerticalAlignment="Center">
                <Paragraph>
                    <Run Text="[Menu]"/>
                </Paragraph>
            </RichTextBox> 
```

我在堆栈面板中有所有设置选项。当我处于纵向时，一切正常，正确列出，通过从手机底部向上滑动到顶部正确滚动。但是，当我将手机旋转到横向时，控件显示正确，但滑动保持不变。因此，在从一侧向上滑动到另一侧时，我仍然需要从手机底部滑动到顶部——本质上是从右向左滑动以使控件向上滚动。

我错过了什么吗？我是不是忘记了某个地方的设置？我在互联网上搜寻任何线索/建议，但找不到任何相关的东西。任何帮助或建议将不胜感激。

谢谢，-G

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T22:20:49.317

删除 ScrollViewer 和 Grid 上的 Opacity 属性，它将起作用！

```
 <Grid x:Name="LayoutRoot"
      VerticalAlignment="Top">
    <ScrollViewer Name="scrollViewer"
                  Margin="0"
                  VerticalAlignment="Top"
                  VerticalScrollBarVisibility="Hidden"
                  Background="#CC000000"
                  HorizontalScrollBarVisibility="Disabled">
        <StackPanel Orientation="Vertical"
                    VerticalAlignment="Top"
                    Margin="0">
            <RichTextBox x:Name="MenuLabel"
                         Height="100"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Center">
                <Paragraph>
                    <Run Text="[Menu]" />
                </Paragraph>
            </RichTextBox> 
```

# php - FOR 循环同时从 $_POST 获取部分数据

> ID：14760052
> 
> 赞同：1
> 
> 时间：2013-02-07T20:07:48.610
> 
> 标签：php, mysql, loops, for-loop

自从我弄乱 for 循环以来已经有一段时间了，并且想知道这是否可能：这是我所拥有的：

```
$mn = $_POST['mnpoints'];                   
$mi = $_POST['mipoints'];
$in = $_POST['inpoints'];
$wi = $_POST['wipoints']; 
```

单击提交按钮后，这些从表单中获取的数字将使用以下代码更新 MySQL 数据库

```
for ($i = 0; $i <=4; $i++ )
{
  mysql_query("UPDATE " . $db_table . " SET `score` = `score` + <VARIABLE HERE> WHERE id=$i") or die (mysql_error());
} 
```

实现这一目标的最佳方法是什么？我总是可以将变量更改为 $m1 - $m4 并且只使用 $m$i

只是想知道是否有另一种方法或更好的方法谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:11:22.913

将变量放入数组中：

```
$values = array($mn, $mi, $in, $wi); 
```

然后使用 对其进行迭代`foreach`，或使用 对其进行索引`$i`。

**注意：**您的代码容易受到 SQL 注入攻击。我强烈建议您阅读*mysqli*、*prepared statements*等：

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

mysql 接口已正式**弃用**，不应再使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T20:10:30.557

'mnpoints' 和 'inpoints' 等...与“分数”有什么关系？如果您只是想转储所有这些值并将它们加在一起，那么：

```
$score = $mn + $mi  + $in +  $wi;
$sql = "UPDATE ... SET score=score+$score"; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-07T20:11:29.540

```
function bulkUpdateSingleColumn($table, $id_column, $update_column, array &$idstovals){
    $sql = "update $table set $update_column = CASE $id_column ";
    foreach($idstovals as $id=>$val){
        $sql .= " WHEN '$id' THEN '$val' \n";
    }
    $sql .= " END
    WHERE $id_column in (" . implode(',', array_keys($idstovals)) . ")";
//debugging info
    echo '<small>'.$sql.'</small>';
    $idstovals=array();       
    db_query($sql);      
    done();       
} 
```

# asp.net-mvc - 在 Azure Compute Emulator 中调试 ASP.NET MVC 系统代码

> ID：14760057
> 
> 赞同：0
> 
> 时间：2013-02-07T20:08:07.040
> 
> 标签：asp.net-mvc, azure

我正在开发一个 ASP.NET MVC（仍然是 v2）Azure Web 应用程序。我遇到了一个似乎需要我单步执行 MVC 代码本身的问题。我可以做到这一点，但还需要能够在我步进时检查代码，所以我需要在调试器中成为未优化版本（以免得到“无法获取本地或参数的值......”）消息.

规避优化的标准方法（[http://blogs.msdn.com/b/sburke/archive/2008/01/29/how-to-disable-optimizations-when-debugging-reference-source.aspx](http://blogs.msdn.com/b/sburke/archive/2008/01/29/how-to-disable-optimizations-when-debugging-reference-source.aspx)）没有t 似乎适用于在 Compute Emulator 中运行。

我还通过创建 System.Web.Mvc 项目的本地调试版本来尝试此操作，但是当我尝试在 Compute Emulator 中启动它时，我的 Web 角色挂起。

所以...任何对以下任何一项的帮助将不胜感激：

在 Visual Studio (2010) 中运行 Azure Web 应用程序，以便它忽略系统 dll 中的代码优化。

或者

创建本地系统调试版本，以便在计算模拟器中调试的 Azure Web 应用可以引用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:34:25.120

在计算模拟器中调试时，我终于能够获得未优化的 ASP.NET 代码。MSDN ( [http://msdn.microsoft.com/en-us/library/9dd8z24x%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/9dd8z24x%28v=vs.100%29.aspx) ) 和其他地方 ( [http://martin.bz/blog/asp- net-mvc-source-debugging-the-easy-way](http://martin.bz/blog/asp-net-mvc-source-debugging-the-easy-way)等）是放置一个 .ini 文件，告诉 JIT 编译器不要在与 DLL 相同的目录中进行优化。

第一个挑战是确定它在哪里；我终于明白要查看 Compute Emulator UI 中的日志并查看它们从何处加载 DLL（在本例中为 System.Web.Mvc）。

第二个挑战是在那里获取 .ini 文件。Windows 资源管理器不起作用，因为它使用不同的方式来查看程序集缓存，无法直接访问文件。我读过的一篇文章提醒我，使用命令提示符可能会给我这种访问权限，而且确实如此。最后一步是意识到，当命令提示符不允许我将 .ini 文件移动到程序集目录时，我需要以管理员身份运行命令提示符。

一旦我可以在调试时查看变量，我很快就意识到我的错误在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:09:39.937

如果 Azure Compute Emulator 出现问题，您可以使用 IIS Express 运行 MVC 项目。只需右键单击并选择调试/启动新实例。

# javascript - 根据 div 类动态创建按钮的属性

> ID：14760058
> 
> 赞同：0
> 
> 时间：2013-02-07T20:08:12.997
> 
> 标签：javascript, jquery, html

我有一个让我发疯的大问题：我有一个包含很多 div 的滚动页面，每个 id 都有不同的 id，一个在另一个之下，并且它们之间没有间隙。视口底部是 4 个固定按钮，它们都具有点击功能：

```
 $("#button1").click(function() { 
    $('#firstdiv').css("background-image", "url(bg1.jpg)");

 $("#button2").click(function() { 
    $('#firstdiv').css("background-image", "url(bg2.jpg)");

 $("#button3").click(function() { 
    $('#firstdiv').css("background-image", "url(bg3.jpg)");

 $("#button4").click(function() { 
    $('#firstdiv').css("background-image", "url(bg4.jpg)"); 
```

如您所见，这些按钮用于更改当前 div 的背景图像。

当我向下滚动并且下一个 div 进入其中时，会触发一个事件。在这种情况下，我想更改具有不同属性的每个按钮的功能，例如

```
 $("#button1_2").click(function() { 
    $('#seconddiv').css("background-image", "url(bg5.jpg)"); 
```

等等..

功能是相同的，但它适用于第二个 div 和另一个 bg 图像......有人可以给我一种动态执行此操作的方法，我不必为所有 div 制作 25 个单击功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:12:00.693

更改您的按钮，使它们看起来像这样（属性是重要的东西）：

```
<button class="image-button" data-image="bg1.jpg">Text</button> 
```

然后您可以一次将您的事件处理程序应用于所有这些：

```
$(".image-button").click(function() { 
    var url = 'url(' + $(this).data('image') + ')';

    $('#firstdiv').css('background-image', url);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:11:47.913

你可以这样做：

```
<span class="btn" data-num="1">button1</span>
<span class="btn" data-num="2">button2</span> 
```

jQuery：

```
$(".btn").click(function(){
    $('#firstdiv').css("background-image", "url(bg"+$(this).attr("data-num")+".jpg)");
}) 
```

# mysql - MySQL：将列值分配给变量

> ID：14760060
> 
> 赞同：0
> 
> 时间：2013-02-07T20:08:21.783
> 
> 标签：mysql

制作一个消息系统并在收件箱页面上工作。

收件箱页面以类似“线程”的方式组织，我想展示两方之间的最新通信。想想 facebook 收件箱（左侧部分），无论您发送消息还是对方发送消息，它都会显示最新发送的消息。

这是我当前的查询：

```
SELECT 
    m.*, 
    s.*, 
    c.*, 
    u.*,
    CASE    
     WHEN m.uid_recipient <> 292 THEN @user_id := m.uid_recipient
     WHEN m.uid_sender <> 292 THEN @user_id := m.uid_sender
    END 
FROM messages m
JOIN signup s ON s.uid = @user_id
LEFT JOIN companies c ON c.uid = s.uid
LEFT JOIN users u ON u.uid = s.uid
WHERE COALESCE(u.uid, c.uid) IS NOT NULL
    AND (m.uid_recipient = 292 AND deleted_recipient = '0')
    OR (m.uid_sender = 292 AND deleted_sender = '0')
ORDER BY datetime DESC 
```

此查询运行但返回一个空结果集，它应该返回 3 个结果。

消息在带有发件人 ID 和收件人 ID 的表中。现在我要做的是将对方的信息加入行。所以我的 case 语句会评估接收者 id 是否是当前用户的 id，如果不是，它应该将 @user_id 变量设置为对方的 id，这样它就可以用于将对方的信息加入该行。

消息表如下所示（相关列）：

```
----------------------------------------------
|uid_sender    |uid_recipient    |message    |
----------------------------------------------
|292           |1040             |Test 3     |
----------------------------------------------
|1040          |292              |Test reply |
----------------------------------------------
|292           |1040             |First msg  |
---------------------------------------------- 
```

我倾向于认为列的值未分配给变量，但我不知道如何调试此查询以返回分配给@user_id 的值。无论如何在mysql查询中转储值？

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:46:38.003

这个表达式：

```
CASE    
 WHEN m.uid_recipient <> 292 THEN @user_id := m.uid_recipient
 WHEN m.uid_sender <> 292 THEN @user_id := m.uid_sender
END 
```

我相信，将值分配给 @user_id 变量。没有关于何时相对于查询中的其他表达式评估 this 的规则。我会做出一个有根据的猜测，`SELECT`子句中的表达式总是在 join 和 group bys 之后进行评估。在这种情况下，`from`子句中使用的值始终是初始值。

我认为您应该将其移至`from`子句：

```
FROM messages m join
     signup s
     ON s.uid = (CASE WHEN m.uid_recipient <> 292 THEN m.uid_recipient
                      WHEN m.uid_sender <> 292 THEN  m.uid_sender
                 END) 
```

可能还有其他方式来表达这一点，但这是一个开始。

# java - Java中的T和继承

> ID：14760064
> 
> 赞同：3
> 
> 时间：2013-02-07T20:08:58.203
> 
> 标签：java, generics

我有一个带有静态字段 F 的 A 类：

```
class A {
    public static String F = null;
} 
```

B类：

```
class B extends A {
   public static String F = "somestring";
} 
```

和一个使用字段 F 的方法的类型化类：

```
class C<T extends A> {
   public void someMethod() {
      String someString = T.F;
      // Manipulations with someString
   }
} 
```

然后是我调用它的代码。

```
C<B> c = new C<B>();
c.someMethod(); 
```

并且在尝试使用 someString 进行操作时出现空指针异常。所以，TF 是 null，但 T 是 B，所以它应该是“somestring”！为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T20:14:41.583

您不能覆盖字段。由于它是扩展 A，它将始终使用 A 中的字段。

在类 A 和 B 中添加一个返回 F 的 getter。从那里，用 B 中的方法覆盖 A 中的方法。

```
class A {
    public String getF(){
        return null;
    }
}

class B {
    @Override
    public String getF(){
        return "someString";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:15:38.173

这与泛型无关。

类的字段不能被子类覆盖——只有方法可以。因此，即使您在子类中定义了一个与超类中同名的字段，您也只是创建了一个新字段，该字段恰好具有相同的名称，但实际上隐藏（而不是覆盖）前一个字段。

考虑在子类的构造函数中使用字段的默认值进行赋值。然后它应该工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T20:24:48.967

Java 中的静态成员可以隐藏，但不能被覆盖。对静态成员的引用在编译时解析 - 在编译时，唯一已知的 T 类型是 A。

请参阅[http://www.coderanch.com/how-to/java/OverridingVsHiding](http://www.coderanch.com/how-to/java/OverridingVsHiding)。

编辑：一个字段无论如何都不能被覆盖，无论它是静态的还是实例的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T20:26:21.947

1.  发生这种情况是因为 的所有`static`成员`A`都是`A`单独的，不能被 继承`B`。

2.  没有出现在 中的新`static`成员不能出现在`A`中`B`。

3.  实际上，当你说

    `class C < T extends A > { ... }`

您只能使用方法（静态和实例 - 除非`@Override`n）和`A`. 因此，由于`F`不是实例字段，因此它不会被覆盖，并且 JVM 会`F`在 A 中找到 的出现。

因此，您获得了 NPE。

# c# - 测试 C# MySQL 连接池失败并出现异常：连接必须有效且打开

> ID：14760066
> 
> 赞同：0
> 
> 时间：2013-02-07T20:09:01.957
> 
> 标签：c#, mysql, multithreading, connection-pooling

我正在尝试在 MySQL 的 .net 连接器 6.6.4.0 上使用连接池来使用以下代码为多个线程提供服务：

```
static public uint uNonQuery(string query)
        {

                using (Connection = new MySqlConnection(ConnectionString))
                {
                    if (Connection.State == ConnectionState.Open)
                    {
                        Console.WriteLine("Its open..>!!!!");
                    }

                    Connection.Open();

                    MySqlCommand cmd = new MySqlCommand(query, Connection);
                    cmd.ExecuteNonQuery();

                    MySqlDataAdapter adapter = new MySqlDataAdapter("SELECT LAST_INSERT_ID() AS 'identity'", Connection);
                    DataTable dt = new DataTable();
                    adapter.Fill(dt);
                    uint ret = 0;

                    if (dt.Rows.Count > 0)
                    {
                        try
                        {
                            ret = Convert.ToUInt32(dt.Rows[0]["identity"]);
                        }
                        catch
                        {
                            ret = 0;
                        }
                    }

                    else
                        ret = 0;

                    Connection.Close();
                    return ret;
                }
        } 
```

我的连接字符串是

```
"server = 127.0.0.1; user id = ****; password = ****; database = testdb; pooling=true; maximumpoolsize=500;" 
```

测试的线程是

```
static void DoInserts(object o)
{
    int i = (int)o;
    Console.WriteLine("Insert Thread {0} launched", i);

    for(int x = 0; x < 1000; x++)
    {
        uint insertId = DataLayer.uNonQuery(String.Format("INSERT INTO testdb.dbtest (writeNo,strNo) VALUES ({0},'x={0} thread={1}')", x, i));
    }

    Console.WriteLine("Insert Thread {0} completed", i);

} 
```

我得到异常**Exception: Connection must be valid and open。**在 2 个并发线程上进行大约 6 次插入后，我还需要做些什么才能使池正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:43:46.433

在您的行`using (Connection = new MySqlConnection(ConnectionString))`中，您正在使用变量`Connection`. 这个变量在哪里定义？是静态的吗？您应该在`uNonQuery`. 如果变量是静态的，那么在新的函数调用打开它`Connection`之后，连接可能会关闭。`uNonQuery`

示例： - 线程 1 调用`uNonQuery`并打开，执行它的操作。- 线程 2 调用`uNonQuery`，打开连接， - 线程 1 关闭`Connection` - 线程 2 不能做它的事情，因为连接突然关闭。

如果上述不是您问题的原因，我需要更多代码来检查问题。

# mysql - 如何将数据更新到由 MYSQL 中的查询产生的表中

> ID：14760073
> 
> 赞同：0
> 
> 时间：2013-02-07T20:09:38.997
> 
> 标签：mysql, sql

我在这里查询这张表

```
SELECT
  a.ESN,
  b.URL,
  a.Status,
  a.GroupID,
  a.RouteID
FROM STx a
  LEFT JOIN Routes b
    ON a.RouteID = b.RouteID
WHERE a.GroupID = 39
    AND a.Status = "Provisioned"
order by a.ESN; 
```

现在从这个结果集中，我想修改表**Routes的****url**以从第一个查询的结果中**测试****url**列中的所有行。我怎样才能在查询中做到这一点？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:14:27.943

如果我正确理解您的问题，您希望将从原始查询中获得的所有结果的 URL 列更新为“测试”。

```
UPDATE Routes
SET URL = 'Test'
FROM STx AS A
LEFT JOIN Routes AS B
ON a.RouteID = b.RouteID
WHERE a.GroupID = 39 AND a.Status = 'Provisioned' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:13:19.160

```
update Routes set url = 'test' 
where id in (
    select b.id 
    from Stx a left join routes b on a.routeid = b.routeid 
    where a.groupid = 39 and a.status = 'Provisioned'
); 
```******

# c# - 文件访问被拒绝更改权限

> ID：14760074
> 
> 赞同：0
> 
> 时间：2013-02-07T20:09:42.423
> 
> 标签：c#, file-io, .net

我正在尝试做一个自动备份程序，该程序需要一个文件夹并将其复制到另一个文件夹中。很简单的任务：

```
File.Copy(Source, Destination); 
```

Source 类似于`C:\Users\SomeUser\MyDocuments\SavedFiles`
Destination 类似于`D:\BackUp`

但是当我运行我的程序时，我得到“错误访问路径`C:\blabla.....`访问被拒绝。

我必须更改任何类型的权限才能使用该`Copy`方法吗？我想是的..我看了一点，但我找不到在哪里改变这样的东西。
任何想法 ？

* * *

更新

![在此处输入图像描述](../Images/d1c58658bd882a6af208162e7ea08e39.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:22:33.813

您必须假设您可能无权访问硬盘驱动器上的某些文件和文件夹。

一种解决方案是使用管理员级别的权限手动运行您的应用程序，但更容易修改清单文件，以便应用程序在运行时自动寻求管理员级别。

您可以通过将 mainifest 文件添加到您的项目来做到这一点（添加新项目...）。

然后换行

```
<requestedExecutionLevel level="asInvoker" uiAccess="false" />" 
```

至

```
<requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />" 
```

显然，如果打算运行该程序的用户没有管理员级别的帐户，这可能无法解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T21:13:49.070

谷歌影子复制服务。这就是现成包的工作原理。

# c# - MessageBox.Show 导致在 ComboBox.SelectionChangeCommitted 期间恢复所选值

> ID：14760076
> 
> 赞同：0
> 
> 时间：2013-02-07T20:09:43.883
> 
> 标签：c#, winforms, .net-3.5

我在[`ComboBox.SelectionChangeCommitted`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted(v=vs.90).aspx)事件中遇到了一些奇怪的行为，我想知道是否有人对此有解释。

在我的事件处理程序的某个地方，我调用[`MessageBox.Show`](http://msdn.microsoft.com/en-us/library/1dac1663(v=vs.90).aspx). 如果我在我的 中选择一个新值`ComboBox`，并且我的代码导致`MessageBox`弹出，我会看到我选择的值恢复为原始值。

调试时，我看到之前选择的值是正确的`MessageBox.Show`。 `MessageBox.Show`将控制权交还给用户，直到我单击“是”或“否”。单击其中一个选项后，控制权返回到调试器，并且 my 的值`ComboBox`恢复为更改前的原始值。

我没有以编程方式在其他地方设置选定的值，所以我不知道为什么该值会被还原。如果事件处理程序没有弹出`MessageBox`，则选择不会恢复。

在我处理完事件之前我将控制权交还给 UI 是否可能与它有任何关系。如果是这样，有没有一种干净的方法来解决它？目前我在弹出之前捕获我选择的值`MessageBox`，然后在之后重置它，但我宁愿不必诉诸“黑客”来解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:28:03.093

问题很可能是显示消息框的行为导致组合框下拉菜单关闭，从而放弃用户可能做出的任何未提交的选择。

这基本上与下拉组合框，突出显示列表中的项目，然后按下`Esc`键相同。请注意，突出显示的项目不会成为选定的项目，因为您在组合框被解除之前从未选择过它。（您可以在“运行”对话框中自己轻松尝试。）

这就是为什么到处乱扔消息框是个坏主意的众多原因之一（其他原因包括消息框对用户的视觉冲击，而且他们中的[大多数人甚至都懒得去阅读它们](http://www.joelonsoftware.com/uibook/chapters/fog0000000062.html)） . 喜欢使用消息框作为调试辅助工具的程序员在尝试调试 UI 代码时经常被这种情况所困扰。

解决方案是：

1.  将验证推迟到*整个表单*被提交/提交，此时您可以显示一个消息框，而不会冒放弃任何当前下拉组合框的风险。

2.  寻找显示验证错误的替代（即非模态）方式。WinForms 提供了一个[`ErrorProvider`](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)可用于此目的的控件。典型用法是在带有无效值的控件旁边显示一个小的警告或错误图标；用户可以将鼠标悬停在该图标上以显示工具提示，其中包含有关确切错误的更多信息。

或者可能是这两种方法的组合，允许用户获得即时反馈，同时确保您永远不必在输入表单之外处理格式错误的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:27:32.163

我的假设是不正确的，即`ComboBox`我使用的子类没有添加任何相关功能。问题最终是由于`LostFocus`我不知道的事件处理程序导致`ComboBox`恢复其值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:32:50.450

我无法使用下面的代码重新创建您的问题，这对于您所说的所做的至关重要。组合框中的值得到更新。通过发布 SelectionChangeCommitted 代码，您可以获得更好的解决方案。

```
private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
        {
            try
            {
                ComboBox cb = (ComboBox)sender;
                string check1 = cb.Text;
                MessageBox.Show("Messagebox check");
                string check2 = cb.Text;
                MessageBox.Show(check1 + "\n\n" + check2);
                //check 1 and 2 show the old value.  Once the method leaves then the value in the combobox is updated.
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

# r - 用堆积面积图设置 ylim

> ID：14760079
> 
> 赞同：0
> 
> 时间：2013-02-07T20:09:50.493
> 
> 标签：r, plot, ggplot2, area, stacked-area-chart

我正在尝试做一个堆积面积图，以便比较三种情况下的结果。

```
ggplot(FIREP_All,aes(x = Time, y = Houses, fill=Risk_Class, group=  Risk_Class))+ geom_line(aes(ymax=Houses), position="stack", colour='darkgrey')+ geom_area(alpha=.75) +
  scale_fill_brewer(type="seq", palette=18,name = "Fire Risk Class")+facet_grid(~Scenario) 
```

![在此处输入图像描述](../Images/013c786c367f550d286416455caea5df.png)

虽然我知道堆叠面积图是累积的，但我想设置一个 ylim，以便更容易看到场景之间的差异。最好是 ylim(1e7,2.5e7)。问题是它干扰了计算。

```
 ggplot(FIREP_All,aes(x = Time, y = Houses, fill=Risk_Class, group=  Risk_Class))+ geom_line(aes(ymax=Houses), position="stack", colour='darkgrey')+ geom_area(alpha=.75) + scale_fill_brewer(type="seq", palette=18,name = "Fire Risk Class")+facet_grid(~Scenario)  

+ylim(1e7,2.5e7) 
```

![在此处输入图像描述](../Images/93ba8affadc71b4a3edf360855211a9d.png)

关于变通的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:14:23.060

要缩放绘图，您应该使用`coord_cartesian()`with`ylim=`作为参数。

```
 + coord_cartesian(ylim=c(1e7,2.5e7)) 
```

# java - 错误：找不到与给定名称匹配的资源（在“条目”处，值为“@array/pref_sync_frequency_titles”）

> ID：14760086
> 
> 赞同：1
> 
> 时间：2013-02-07T20:10:11.553
> 
> 标签：java, android, eclipse

我正在尝试导入一个旧的 Android 项目，但我遇到了几个这样的错误：

```
error: Error: No resource found that matches the given name (at 'entries' 
with value '@array/pref_sync_frequency_titles'). 
```

在 xml 文件夹中。所有四个文件都因相同类型的错误而损坏。我不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:21:58.813

这意味着您没有`pref_sync_frequency_titles`定义数组。您的其他文件需要定义这样的数组，正如您所说，这些文件已“损坏”。由于未找到它们，因此引发错误。这样的数组应该是目录中的 XML`pref_sync_frequency_titles.xml`文件`res/values`。您可以直接从 Eclipse ADT 创建它（如果您正在使用它进行开发） - 只需右键单击项目并选择*New Android XML file*。

有两种类型的数组：

*   整数
*   打字

第一种类型在这里描述：http: [//developer.android.com/guide/topics/resources/more-resources.html#IntegerArray](http://developer.android.com/guide/topics/resources/more-resources.html#IntegerArray)

第二个 - 这里：http: [//developer.android.com/guide/topics/resources/more-resources.html#TypedArray](http://developer.android.com/guide/topics/resources/more-resources.html#TypedArray)

不幸的是，我无法告诉您必须创建哪种类型，因为这取决于使用此类数组的上下文。但是，这两个链接都说明了将它们放在哪个目录中，如何从其他 XML 文件中引用它们，并包含应该真正帮助您创建它们的示例。

# android - Android 系统应用更新，有/无平台签名

> ID：14760089
> 
> 赞同：8
> 
> 时间：2013-02-07T20:10:17.950
> 
> 标签：android, system, google-play, signature, platform

我有一个 OEM 使用系统映像安装的系统应用程序，但由我签名。如果我将更新的 apk 上传到市场，市场应用会自动静默安装此更新吗？

如果我的系统应用程序使用平台签名而不是我的签名，这意味着任何更新也必须使用平台签名进行签名，对吗？可以从市场上更新平台签名的 apk 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T08:45:02.757

让我们首先澄清所有类型的应用程序之间的区别。

系统应用程序是位于`/system/app`文件夹中的应用程序。这些应用程序有一个标志`ApplicationInfo.FLAG_SYSTEM`集。在普通设备中，分区`/system`被安装为只读访问。因此，系统应用程序无法更新，因为它位于只读位置。这些应用程序只能作为 OTA 更新的一部分进行更新。

普通应用程序位于/data 分区，是可读写的。因此，这些应用程序可以由系统更新。

现在让我们谈谈签名。某些 Android 组件受签名类型权限的保护。这意味着如果您想访问受此类权限保护的组件，您的应用程序必须使用与受保护组件相同的证书进行签名。这不仅适用于Android系统，也适用于Android应用程序，即在您的应用程序中，您可以拥有一个受签名权限保护的组件，因此，只有具有相同签名的应用程序才能访问该组件。

我们需要回答您的问题的第三个论点是，Android 禁止安装具有相同包名但不同签名的包。

因此，

> 我有一个 OEM 使用系统映像安装的系统应用程序，但由我签名。如果我将更新的 apk 上传到市场，市场应用会自动静默安装此更新吗？
> 
> 如果我的系统应用程序使用平台签名而不是我的签名，这意味着任何更新也必须使用平台签名进行签名，对吗？可以从市场上更新平台签名的 apk 吗？

答案是不。尽管 /system/app 中的应用程序可以使用与平台不同的证书进行签名，但这些应用程序的更新只能通过系统更新来实现。

要解决您的问题，您可以更改应用程序的包名，使用您的（如果应用程序不需要访问受保护的 Android 组件）或平台（如果应用程序应该可以访问受保护的组件并且您可以访问此签名）并将此应用程序投放市场。然后，您将通过市场收到您的应用程序的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T19:29:19.257

除非签名与 /system/ap 中的签名匹配，否则系统不会将 /data/app 中的 apk 视为更新

# c# - 在运行时向子控件添加控件

> ID：14760095
> 
> 赞同：0
> 
> 时间：2013-02-07T20:10:26.733
> 
> 标签：c#, wpf, xaml

我正在尝试在运行时将控件添加到另一个控件。这是我到目前为止所拥有的：

必须在 .net 3.5 中完成

```
public void addItem(Type addType, Type parentType, string name,string parentName, string fpath)
    {

        try
        {
            if (asdf != null)
            {
            }
            else
            {
                StackPanel stkPnl = (StackPanel)_loadXaml.Content;
                foreach (UIElement child in stkPnl.Children)
                {
                    if ((child.GetType() == parentType))
                    {
                        Control theChild = (Control)child;
                        string theChildsName = theChild.Name;
                        if (theChildsName == parentName)
                        {
                            //I want to create and add the control under "theChild"
                            break;
                        }
                    }
                }
            }
        }
        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        }
    } 
```

AddType：是控件的类型
parentType：是要添加的对象的父对象的类型
name：是要添加的对象的名称
parentName：是要创建的对象的父对象的名称在下面

我试过 .Children.Add不是“theChild”
的选项，.content 也不是“theChild”的选项

有没有办法在运行时将控件添加到其父级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:23:30.520

在 Wpf 中有两种主要类型的控件：内容控件和项目控件。内容控件只有一个可视子项，另一方面，项目控件有许多可视子项。如果您想在运行时将项目添加到可视元素中，我认为您必须将该项目强制转换为项目控件，然后添加您想要的项目。希望这可以帮助您解决您的问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:58:31.953

根据您的 UI 结构，可能会发生许多不同的变化。一些可能是您的子元素的常见元素类别`StackPanel`：

*   `Decorator`- 这很可能是一个`Border`，但还有其他的。带 1 名儿童入住`Child`。
*   `Panel`- `StackPanel`, `Grid`,`Canvas`等。可以通过添加到`Children`属性中来拥有任意数量的孩子。
*   `ContentControl`- 除了使用基类本身还包括诸如`Button`, `Label`,之类的东西`Expander`。`Content`可以在该物业上接受 1 个孩子，但与`Decorator.Child`此不同的是类型`object`，可以带任何东西。设置的`Content`也不是直接的可视化树子`Decorator`，而是注入到控件的`ControlTemplate`. 如果`Content`设置为非 UI 元素，也可以使用`DataTemplate`.
*   `ItemsControl`- `ListBox`, `ComboBox`,`ItemsControl`等。类似于`ContentControl`但通过 Items 或 ItemsSource 属性获取内容集合（用法略有不同，只能使用其中一个）。通过添加`Items`或添加到绑定到的任何集合来添加子级`ItemsSource`。
*   其他不带孩子的 - `TextBlock`, `TextBox`, `Slider`, 许多其他人。

还有其他可能性，但这些是最常见的。Casting to`Control`不会给您带来任何好处，因为它们可能属于最后 3 个类别中的任何一个，并且会错过前 2 个类别。您应该准确定义您期望在其中找到的内容`StackPanel`并限制您将接受的类型为`parentType`然后转换为前 4 种类型之一以设置子项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:19:26.117

你试过 thisChild.AddVisualChild(controlToAdd) 吗？

[请参阅此处](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.addvisualchild.aspx)的文章

# python - 在 Windows 上构建 matplotlib

> ID：14760100
> 
> 赞同：0
> 
> 时间：2013-02-07T20:10:56.733
> 
> 标签：python, visual-studio, matplotlib

我需要在 Win 7 x64 (Python 2.7 x64) 上安装 matplotlib。我安装了 MS VS 10（使用 MS C++ 编译器）。

跑步时

```
pip install matplotlib 
```

我在 pip.log 中得到了这个：

...

```
cxxextensions.c

  c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\amd64\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:C:\Python27\libs /LIBPATH:C:\Python27\PCbuild\amd64 freetype.lib z.lib /EXPORT:initft2font build\temp.win-amd64-2.7\Release\src/ft2font.obj build\temp.win-amd64-2.7\Release\src/mplutils.obj build\temp.win-amd64-2.7\Release\CXX\cxxsupport.obj build\temp.win-amd64-2.7\Release\CXX\cxx_extensions.obj build\temp.win-amd64-2.7\Release\CXX\IndirectPythonInterface.obj build\temp.win-amd64-2.7\Release\CXX\cxxextensions.obj /OUT:build\lib.win-amd64-2.7\matplotlib\ft2font.pyd /IMPLIB:build\temp.win-amd64-2.7\Release\src\ft2font.lib /MANIFESTFILE:build\temp.win-amd64-2.7\Release\src\ft2font.pyd.manifest

LINK : fatal error LNK1181: cannot open input file 'z.lib'

error: command '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\amd64\link.exe"' failed with exit status 1181 
```

WTH 是 z.lib？它不是用于压缩的 zlib，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:51:29.223

是的，`z.lib`是一个 zlib 库。但是 matplotlib[为 Windows 提供二进制安装程序，](http://matplotlib.org/downloads.html)因此您不需要从带有`pip`.

# database - 持久存储文件系统层次结构信息

> ID：14760103
> 
> 赞同：2
> 
> 时间：2013-02-07T20:11:01.400
> 
> 标签：database, sqlite, filesystems, persistence, hierarchy

我希望我的程序（用 Python 编写）监视给定文件系统的层次结构，将其记录到持久数据存储中，并能够在文件系统更改时对其进行更新。它可能会被读入易失性存储器以便快速访问。

[**我在这里**](https://stackoverflow.com/questions/10868362/what-is-the-preferred-method-for-storing-application-persistent-data-a-flat-fil)和[**这里**](https://stackoverflow.com/questions/10896395/selecting-between-shelve-and-sqlite-for-really-large-dictionary-python)找到了一些建议“与 Python 一起使用的最佳持久存储方法”的帖子，以及在[**此处**](https://stackoverflow.com/questions/6802539/hierarchical-tree-database-for-directories-in-filesystem)回答“如何在关系数据库中表示文件系统”的另一篇帖子。

从上面的链接来看，SQLite 似乎是一个不错的持久化选择，因为它很快。但是，对于使用数据库存储和表示文件系统层次结构有多好，我找不到太多意见。

我对所实施方法的考虑是：

*   性能/速度
*   Scalibality：我需要监控并保持更新可能多达数十万个文件的层次结构
*   易用性：当我将文件系统层次结构读入内存时
*   还有其他建议的注意事项吗？

使用 RDBMS 来表示文件系统层次结构是个好主意吗？这种方法的优缺点是什么？您是否有其他建议的方法，这些方法的优缺点是什么？

# ms-access - 在第一个非字母数字之前抓取字母数字字符

> ID：14760105
> 
> 赞同：1
> 
> 时间：2013-02-07T20:11:08.543
> 
> 标签：ms-access

我对访问非常陌生。我的列中有一个与此类似的数据：

`JONES/KEN`

`SMITH/TAMMY`

`MILLER FRED`

`PICARD.JOHN`

我能抓住第一个非字母数字之前的字母吗？

所以我的结果是：

`JONES`

`SMITH`

`MILER`

`PICARD`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:32:08.200

不幸的是，我不知道某些语言中可用的“Word”功能。我会使用 Instr 进行蛮力检查，然后使用 Mid 来提取代码。要获得各种角色，该构造将非常复杂。

我使用了 iif 函数并将其嵌套 - 这是这里的基本格式：

```
iif (instr (fieldname,"{the character}") > 0, 
     mid(fieldname,1, instr(fieldname,"{the character}")-1, 
     fieldname{or go further into ifs}) 
```

使用您的示例数据，其中客户名称作为字段和 3 个条件 - 空格、/和句点。IT 确实有效，但很丑陋 - 您必须向右滚动很远才能获得所有内容：

```
ShortName: IIf(InStr(1,[client_name]," ")>0,
               mid(client_name,1,InStr(1,[client_name]," ")-1),
               IIf(InStr(1,[client_name],"/")>0,
                   mid(client_name,1,InStr(1,[client_name],"/")-1),
                            IIf(InStr(1,[client_name],".")>0,
                            mid(client_name,1,InStr(1,client_name],".")-1),
                            Client_Name))) 
```

将其放入基于您的表的查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:50:02.037

派生表怎么样：

```
SELECT Left([Surname],InStr([Surname],[NonAlpha])-1) AS LeftName, 
       MainTable.Surname
FROM MainTable, 
   (SELECT " " As NonAlpha From Table1
    UNION
    SELECT "." As NonAlpha From Table1
    UNION
    SELECT "," As NonAlpha From Table1
    UNION
    SELECT "/" As NonAlpha From Table1)  AS n
WHERE (((MainTable.Surname) Like "*" & [nonalpha] & "*")); 
```

Table1 是一个临时表，它确实包含记录，但查询将只
返回四个分配的行 (,./)
Maintable 是带有字段 Surname 的表，该字段是要拆分的字段。

# php - 将变量拉入AJAX post函数的数据中

> ID：14760107
> 
> 赞同：0
> 
> 时间：2013-02-07T20:11:17.267
> 
> 标签：php, javascript, ajax, post

我有以下函数调用，我试图将变量 data 的值拉入 data: 函数的部分。我已经做到了这一点，但没有这样的运气让它发挥作用。在 php 中，我使用 $_POST['test'] 来尝试拉取值。

谢谢

```
function fnc()
 {
   var oButton = document.getElementById("addData");
   var data = document.getElementById("dataInput");
   var display = document.getElementById("display");

     display.innerHTML += "<a id='dispchk'>"+ data.value +"</a>" +"<br />" ;
}
$.ajax({
    type: "POST",
    url: "chkinpost.php?eventid=<?php echo $_GET['eventid']; ?>&eventname=<?php echo $_GET['eventname']; ?>",
    data: "test="+ data.value
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:15:25.103

要么不使用`function fnc()`：

```
var oButton = document.getElementById("addData");
var data = document.getElementById("dataInput");
var display = document.getElementById("display");
display.innerHTML += "<a id='dispchk'>"+ data.value +"</a>" +"<br />" ;
$.ajax({
    type: "POST",
    url: "chkinpost.php?eventid=<?php echo $_GET['eventid']; ?>&eventname=<?php echo $_GET['eventname']; ?>",
    data: "test="+ data.value
}); 
```

*或*将您的 AJAX 请求移至`function fnc()`：

```
function fnc()
{
  var oButton = document.getElementById("addData");
  var data = document.getElementById("dataInput");
  var display = document.getElementById("display");
  display.innerHTML += "<a id='dispchk'>"+ data.value +"</a>" +"<br />" ;
  $.ajax({
    type: "POST",
    url: "chkinpost.php?eventid=<?php echo $_GET['eventid']; ?>&eventname=<?php echo $_GET['eventname']; ?>",
    data: "test="+ data.value
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:16:33.307

[**将字符串**或**普通对象**作为数据参数传递](http://api.jquery.com/jQuery.post/)

```
var url = "chkinpost.php?eventid=<?php echo $_GET['eventid']; ?>&eventname=<?php echo $_GET['eventname']; ?>"

//var data = { value: "some value"}
//or
var data = 'this is a chicken';

$.ajax({
  type: "POST",
  url: url,
  data: data,
}); 
```

# ajax - MVC4 Ajax-将完整模型传递给控制器

> ID：14760114
> 
> 赞同：0
> 
> 时间：2013-02-07T20:11:58.603
> 
> 标签：ajax, asp.net-mvc-4

我有我的 AJAX 电话

```
$.ajax({
    type: 'post',
    url: "/Store/LoadStoreIndex",
    data: , //Entire Model Here!!
    dataType: "text",
    success: function (result) {
        $('#Postback').html(result);
    }
}); 
```

我需要将整个模型发送回控制器，但经过大量搜索后找不到任何东西......有人可以告诉我我需要做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:16:52.993

控制器获取操作

```
public ActionResult Index(YourModel model)
{
    YourModel model = new YourModel();

    return View(model);
} 
```

看法

```
@model YourModel
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { id = "form1" }))
{
    @Html.TextBoxFor(x => x.EmailAddress)
    @Html.TextBoxFor(x => x.Name)
    ...
} 
```

脚本

```
$(function () {
    $('form').submit(function () {
        if ($(this).valid()) {
            $.ajax({
                url: this.action,
                type: this.method,
                // you can post your model with this line
                data: $(this).serialize(),  
                beforeSend: function () {

                },
                complete: function () {

                },
                success: function (result) {

                },
                error: function () {

                }
            });
        }
        return false;
    });
}); 
```

控制器发布操作

```
[HttpPost]
public ActionResult Index(YourModel model)
{
    return View();
} 
```

# php - PHP中具有不同链接的不同帐户类型

> ID：14760119
> 
> 赞同：-1
> 
> 时间：2013-02-07T20:12:06.343
> 
> 标签：php, mysql

尝试制作一个简单的网站，用户可以在其中拥有不同的帐户级别。例如，帐户类型为“a”和“b”的用户将在顶部看到一个链接/按钮，上面写着基本，而帐户类型为“c”的用户将看到一个链接/按钮，上面写着完整会员。

我有一个代码几乎可以满足我的需要，它将用户保存在数据库中不同的 A/B/C 类别中。

如上所述，我只需要知道我必须做什么才能显示指向不同帐户类型的不同链接？

另外，我知道下面的代码不是最好的代码，但只需要用我所拥有的来实现我现在所追求的结果。

```
<?php
session_start(); // Must start session first thing

// See if they are a logged in member by checking Session data
$toplinks = "";
if (isset($_SESSION['id'])) {
    // Put stored session variables into local php variable
    $userid = $_SESSION['id'];
    $username = $_SESSION['username'];
    $toplinks = '<a href="member_profile.php?id=' . $userid . '">' . $username . '</a> &bull; 
    <a href="member_account.php">Account</a> &bull; 
    <a href="logout.php">Log Out</a>';
} else {
    echo 'Please <a href="login.php">log in</a> to access your account';
    exit(); 
}
?>
<?php
//Connect to the database through our include 
include_once "scripts/connect_to_mysql.php";
// Query member data from the database and ready it for display
$sql = mysql_query("SELECT * FROM members WHERE id='$userid'"); 
while($row = mysql_fetch_array($sql)){
$country = $row["country"];
$state = $row["state"];
$city = $row["city"];
$accounttype = $row["accounttype"]; 
$bio = $row["bio"]; 
}
// Give different options or display depending on which user type it is
if ($accounttype == "a") {
    $userOptions = "You get options for Expert User";
} else if ($accounttype == "b") {
    $userOptions = "You get options for Expert User";
} else if ($accounttype == "c") {
    $userOptions = "You get options for Expert User";
} else {
    $userOptions = "You get options for Super User";
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Member Account</title>
<link rel="stylesheet" type="text/css" href="style/style.css">
<style type="text/css">
<!--
body {
    margin: 0px;
    background-image: url(imgs/bgnoise.png);
    background-repeat: repeat;
}
-->
</style>

</head>
<body>
<?php include_once("temps/template_header.php");?>
<table style="background-image: url(imgs/horizontal_nav_bg.jpg);"  repeat="x" width="100%" border="0" cellpadding="0">
  <tr>
    <td height="94" ><table style=" margin-left:20px; " width="734" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="156"><p><a href="edit_info.php" target="_self"><img src="imgs/info.png" width="35" height="35" border="0" "/>Edit Information</a></p></td>
        <td width="179"><a href="edit_pic.php" target="_self"><img src="imgs/very.png" width="35" height="35" border="0" />Verify Your Identity</a></td>
        <td width="126"><a href="member_profile.php?id=<?php echo "$userid"; ?>" target="_self"><img src="imgs/profile.png" width="35" height="35" border="0" />View Profile</a></td>

        <td width="138"><img src="imgs/basket.png" width="35" height="35" /><a href="http://somesite.com">Buy Bitcoin</a></td>
        <td width="135"><img src="imgs/user.png" width="35" height="35" alt="user" /><?php echo "$username"; ?></td>
        </tr>
      </table>      <h1>&nbsp;</h1></td>
  </tr>
</table>

<table width="700" align="right" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td><h3></h3></td>
  </tr>
</table>
<table width=950" cellpadding="3" cellspacing="3" style="line-height:1.5em;">
  <tr>
    <td width="118" valign="top" bgcolor="#E4E4E4"><h6>YOUR ACCOUNT<br />
        <a href="edit_info.php" target="_self">Edit Information </a><br />
        <a href="edit_pic.php" target="_self">Verify Your Identity</a><br />    
        <a href="member_profile.php?id=<?php echo "$userid"; ?>" target="_self">View Profile</a></h6>
      <h6><?php echo "$bio"; ?><br />
   </h6></td>
     <!-- See the more advanced member system tutorial to see how to place default placeholder pic until member uploads one -->
    <td width="160" valign="top"><div align="center"><img src="memberFiles/<?php echo "$userid"; ?>/pic1.jpg" alt="Ad" width="150" /></div></td>
    <td width="201" valign="top">
      Country: <?php echo "$country"; ?> <br />
      State: <?php echo "$state"; ?><br />
      City: <?php echo "$city"; ?>
      <table width="50" border="0" cellspacing="0" cellpadding="0">
        <tr>
        </tr>
      </table>      <br />
    </td>
    <td width="430" margin="left" style="margin-right:0px;" rowspan="2" valign="top"><div id="veri"><img src="imgs/verifynote.png" width="430" height="600" /> </div></td>
  </tr>
  <tr>
    <td colspan="3" valign="top"><br />
      <br />
    <br />
    <div style="overflow:hidden; width:100%px;">
  <iframe width="565" height="400"  scrolling="no" frameBorder="0"
  src="http://bitcoin.clarkmoody.com/widget/chart/" 
  style="width:728px; height:270px; border:none; margin-left:-60px;"/>  
</div>
    </td>
  </tr>
</table>

<?php include_once("temps/template_footer.php");?>
</body>
</html>` 
```

请温柔一点，因为我是 PHP 新手，刚刚学习曲线。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:38:20.957

我不确定我是否正确理解了这一点，但如果您想根据用户组显示不同的链接，只需执行以下操作：

```
if ($accounttype == "a") {
echo '<a href="">Page for user a</a>';
} 

else if ($accounttype == "b") {
    echo '<a href="">Page for user b</a>';

} else if ($accounttype == "c") {
    echo '<a href="">Page for user c</a>';
} else {
    echo '<a href="">Page for others</a>';
} 
```

另外我建议你使用mysqli。它与mysql非常相似。[http://php.net/manual/en/book.mysqli.php（Myqsl](http://php.net/manual/en/book.mysqli.php)正在被移除）

# c# - 为什么绑定到用户控件上的 DepenencyProperty 使用用户控件的数据上下文？

> ID：14760121
> 
> 赞同：1
> 
> 时间：2013-02-07T20:12:31.303
> 
> 标签：c#, .net, wpf, binding

假设我在 MainWindow.xaml 中有一个 WPF 应用程序 (exe)：

```
<Grid>
    <extraControls:MyMVVMUserControl MyDependencyProperty="{Binding Something}"/>
    <extraControls:MyUserControl MyDependencyProperty="{Binding Something}" />
</Grid> 
```

我的 MainWindow.xaml.cs 看起来像这样：

```
public MainWindow()
{
    DataContext = new MainWindowVM();
    InitializeComponent();
} 
```

我的 MainWindowVM.cs 有一个属性设置，用于`Something`通知属性更改。

用户控件是在单独的 dll 中制作的。正如您可能猜到的那样，`MyMVVMUserControl`将 DataContext 设置为视图模型。

```
public MyMVVMUserControl()
{
    DataContext = new MyMVVMUserControlVM();
    InitializeComponent();
} 
```

`MyUserControl`在后面的代码中没有设置 DataContext。

所以有趣的是，它们的`MyDependencyProperty`设置完全相同。

但是 MVVM 版本不起作用。

在深入研究之后，我发现**MainWindow.xaml**`{Binding Something}`中的 View Model 设置为 MyMVVMUserControl 用作 DataContext（而不是 MainWindow.cs 中设置的 DataContext（设置为 MainWindowVM））。

 ****我的问题是为什么？**

为什么 WPF 会查看用户控件内部并将其 DataContext 用于实际应用程序中的绑定？

（注意：我知道我可以通过在绑定中设置源来解决这个问题，但我希望其他人能够使用我的用户控件。但是有了这个问题，我现在有一个内置的“陷阱”供我想要的任何人使用使用我的用户控件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:41:53.067

我想我理解你的问题，我会给出一个适合我的解决方案（我以前遇到过这个问题）。`DataContext`想法是你在后面的代码中为你设置的接缝，`MyMVVMUserControl`然后它从中获取绑定。

我为此找到的解决方案是在后面的代码中设置数据上下文，而不是在用户控件中。设置 的`UserControl`子项的数据上下文。例如，假设这是您的 UserControl 的 Xaml：

```
<UserControl ... x:Name="userControl">
    <Grid x:Name="rootContainer">
         ...
    </Grid>
</UserControl> 
```

然后在后面的代码中设置`rootContainer`'s 的数据上下文，这样所有的视觉孩子都可以访问控件数据上下文，并且用户控件的数据上下文是空的。

```
...
rootContainer.DataContext = new UserControlViewModel();
... 
```

希望这可以帮助您解决您的问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:21:46.790

你真的不应该`DataContext`从. 通过这样做，您可以防止任何其他内容传递给 . ，这破坏了 WPF 拥有独立 UI 和数据层的最大优势之一。`UserControl``UserControl``DataContext``UserControl`

如果 wpf 对象未设置为其他任何值，则 WPF 对象仅从`DataContext`父对象继承它们。`DataContext`创建时，您`MyMVVMUserControl`将 设置`DataContext`为 new `MyMVVMUserControlVM`，以防止`DataContext`从 继承`MainWindow`。

因此，您`MVVMUserControl`将其`DataContext`设置为 your是正常的`MyMVVMUserControlVM`，因为您在 UserControl 的构造函数中明确设置了它。

这是设计使然。WPF/MVVM 中的 UI 对象仅是数据层的可视化表示，因此设置数据层然后尝试将您的属性绑定到不在数据层上的东西没有多大意义。

例如，以这行代码为例：

```
 <UserControl DataContext="{Binding ClassA}" Content="{Binding Name}" /> 
```

这会将`Content`属性绑定到`UserControl.DataContext.Name`，即`ClassA.Name`。如果这会导致绑定到`UserControl.Parent.DataContext.Name`，那将没有多大意义，因为绑定应该引用当前对象的`DataContext`，而不是父对象的`DataContext`。

所以我唯一一次从内部设置`DataContext`a是它自己的独立对象，它永远不会与来自应用程序其余部分的数据进行交互。迄今为止从未有过:)`UserControl``UserControl``UserControl`

通常我`UserControls`的几乎总是两件事之一：

*   a `ViewModel`(or `Model`) 的可视化表示，例如 a `CustomerUserControl`for a `CustomerViewModel`，在这种情况下，我将它们传递给`DataContext`它们使用时所需的

    例如，

    ```
    <local:CustomerUserControl DataContext="{Binding SelectedCustomer}" /> 
    ```

    或者

    ```
    <DataTemplate DataType="{x:Type local:CustomerModel}">
        <local:CustomerUserControl />
    </DataTemplate> 
    ```

*   或者一个自我维持的 UI 对象，它通过 custom 接收它需要的任何外部数据`DependencyProperties`，并在控件的代码隐藏中执行任何其他逻辑，例如具有依赖属性的`DatePicker`控件`SelectedDate`，或者`CalculatorUserControl`具有依赖属性的控件`Equation`和`Value`

    ```
    <local:DatePickerUserControl SelectedDate="{Binding SomeDate}" />

    <local:CalculatorUserControl Equation="{Binding SomeString}" 
                                 Value="{Binding SomeDouble}" /> 
    ```

在您的情况下，听起来您应该使用第一种情况，并且应该将 a 传递给`ViewModel`包含`UserControl`它需要的数据的您。

```
<extraControls:MyMVVMUserControl DataContext="{Binding MyMVVMUserControlVM}"
                                 MyDependencyProperty="{Binding Something}"> 
```

或者

```
<extraControls:MyMVVMUserControl MyDependencyProperty="{Binding Something}">
    <extraControls:MyMVVMUserControl.DataContext>
        <viewModels:MyMVVMUserControlVM />
    </extraControls:MyMVVMUserControl.DataContext>
<extraControls:MyMVVMUserControl /> 
```**

# makefile - 如何将 GNU makefile 文件列表拆分为单独的行

> ID：14760124
> 
> 赞同：2
> 
> 时间：2013-02-07T20:12:47.777
> 
> 标签：makefile, gnu-make, freebsd, solaris-10

我有一个变量，其中包含用 string 分隔的文件列表`_NEWLINE_`。我需要将该变量输出到一个文件中，以便每个文件位于单独的行中。诀窍是它需要在 FreeBSD 和 Solaris 上运行。

这就是我现在正在尝试的：

```
echo "lib/alarms-1.2/priv/snmp_conf/agent.conf: lib/alarms/priv/snmp_conf/agent.conf_NEWLINE_lib/alarms-1.2/priv/snmp_conf/agent.conf.src: lib/alarms/priv/snmp_conf/agent.conf.src_NEWLINE_lib/alarms-1.2/priv/snmp_conf/community.conf: lib/alarms/priv/snmp_conf/community.conf" | sed 's|_NEWLINE_|\'$'\n|g' 
```

这适用于 FreeBSD 和 Solaris 上的 shell。但是当在 Solaris 上的 GNUmakefile 中运行时，我得到了这个（注意每行末尾的 $）：

```
lib/alarms-1.2/priv/snmp_conf/agent.conf: lib/alarms/priv/snmp_conf/agent.conf$
lib/alarms-1.2/priv/snmp_conf/agent.conf.src: lib/alarms/priv/snmp_conf/agent.conf.src$
lib/alarms-1.2/priv/snmp_conf/community.conf: lib/alarms/priv/snmp_conf/community.conf$ 
```

如果我`\'$'`从 sed 中删除，那么它可以在 Solaris 上运行，但不能在 FreeBSD 上运行。也许有一种方法可以根据执行makefile的系统来告诉使用哪个版本？

**编辑：感谢****bobbogo** 提出的解决方案，我创建了一个示例生成文件，它提供了所需的结果，并且似乎在 FreeBSD 和 Solaris 上都可以使用：

```
one-line := lib/alarms-1.2/priv/snmp_conf/agent.conf: lib/alarms/priv/snmp_conf/agent.conf_NEWLINE_lib/alarms-1.2/\
priv/snmp_conf/agent.conf.src: lib/alarms/priv/snmp_conf/agent.conf.src_NEWLINE_lib/alarms-1.2/priv/snmp_conf/comm\
unity.conf: lib/alarms/priv/snmp_conf/community.conf

many-lines := { echo '$(subst _NEWLINE_,' && echo ',${one-line})'; }

.PHONY: all
all:
  $(shell $(many-lines) > test.txt) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:01:28.767

尝试了许多不同的解决方案，包括`\n`在这个答案中提到的定义：[Add a newline in Makefile 'foreach' loop](https://stackoverflow.com/questions/4788276/add-a-newline-in-makefile-foreach-loop)

真正的问题是跨平台的命令实现不一致，以及默认情况下使用 调用 shell 命令`echo`的事实，这本身是非常不灵活的。`make``sh`

由于这个答案，我找到了一个更好的方法：[直接调用和通过 shell 脚本调用时的“echo -e”](https://stackoverflow.com/questions/10591467/echo-e-when-called-directly-and-when-called-via-a-shell-script)

**更好的方法是使用`printf`而不是`echo`**

构造字符串，`\n`而不是`_NEWLINE_`分隔进入输出文件中单独行的部分：

```
some_string = lib/alarms-1.2/priv/snmp_conf/target_params.conf: lib/alarms/priv/snmp_conf/target_params.conf\nlib/alarms-1.2/priv/snmp_conf/community.conf: lib/alarms/priv/snmp_conf/community.conf\n 
```

然后在makefile中简单地打印它：

```
@printf "$(some_string)" >> $(some_file) 
```

适用于 FreeBSD 和 Solaris。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:41:45.017

如果这是 GNU make，那么一切都在 make 中完成。

```
one-line := lib/alarms-1.2/priv/snmp_conf/agent.conf: lib/alarms/priv/snmp_conf/agent.conf_NEWLINE_lib/alarms-1.2/priv/snmp_conf/agent.conf.src: lib/alarms/priv/snmp_conf/agent.conf.src_NEWLINE_lib/alarms-1.2/priv/snmp_conf/community.conf: lib/alarms/priv/snmp_conf/community.conf

define \n

endef

many-lines := $(subst _NEWLINE_,${\n},${one-line}) 
```

现在`${many-lines}`有你想要的。令人讨厌的是，它很难在 shell 行中使用。如果你这样做：

```
tgt:
    echo '${many-lines}' 
```

*make 将为每一*行调用一个*单独*的shell 。第一次 shell 调用将得到一个未配对并退出并出现错误。*`'`*

 *```
.ONESHELL:
tgt:
    echo '${many-lines}' 
```

将以一种侵入性的方式工作。正确的解决方法是确保每一行`${many-lines}`都有有效的 sh 语法。一些满嘴的像：

```
echolines = $(subst ${\n},'${\n}echo ',echo '${many-lines}')
.PHONY: aa
aa:
    $(call echolines,${many-lines}) 
```

嘘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:29:26.790

免责声明：我没有使用 Solaris 或 FreeBSD 的经验……无论如何。

在 make 中，您可以使用 $(patsubst pattern,replacement,text) 替换模式。试试这个...

```
FILENAMES := "lib/alarms-1.2/priv/snmp_conf/agent.conf: lib/alarms/priv/snmp_conf/agent.conf_NEWLINE_lib/alarms-1.2/priv/snmp_conf/agent.conf.src: lib/alarms/priv/snmp_conf/agent.conf.src_NEWLINE_lib/alarms-1.2/priv/snmp_conf/community.conf: lib/alarms/priv/snmp_conf/community.conf"

.PHONY: all

all:
    @echo $(patsubst _NEWLINE_,${\n},$(FILENAMES)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T02:29:30.000

作为替代方案，我认为你的第一种方法会起作用，如果你只是加倍`$`“逃避”它：

```
sed 's|_NEWLINE_|\'$$'\n|g' 
```*

# android - 如何生成本地化的相对时间跨度字符串，例如 Android 警报？

> ID：14760125
> 
> 赞同：3
> 
> 时间：2013-02-07T20:12:51.507
> 
> 标签：android

我想在设置警报时生成与 Android 警报类似的字符串。

*示例：*
-“警报设置为从现在起 6 天 10 小时 9 分钟。”
- “闹钟设置为 10 小时 9 分钟后。”
- “从现在开始设置 9 分钟的警报。”

我可以使用：

```
DateUtils.getRelativeTimeSpanString(alarm.triggerTime, 
                    System.currentTimeMillis(), 
                    DateUtils.MINUTE_IN_MILLIS, 
                    flags).toString(); 
```

这会产生类似于***"in 19 hours"***的消息。我似乎无法制作更像***“在 19 小时 5 分钟内”***或***“在 5 天 10 小时 30 分钟内”***的东西。

如果可能的话，我想弄清楚如何使用 Android 本地化帮助程序类来实现这一点，例如`DateUtils`. 我讨厌不得不缝合可能会导致其他语言出现问题的字符串。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T04:52:51.153

如果您正在使用`Eclipse IDE`，请尝试`GrepCode_Plugin`从本教程安装[GrepCode_Plugin](http://grepcode.com/eclipse)

完成后，`GrepCode Search`使用`android.text.format.DateUtils`. 它会列出你所有的文件。尝试下载最新的。

从该文件中获取方法并根据您的需要进行修改。

供您参考，我将把列出的方法放在`android 4.1.1_r1`

```
public static CharSequence getRelativeTimeSpanString(long time, long now, long minResolution,
            int flags) {
    Resources r = Resources.getSystem();
    boolean abbrevRelative = (flags & (FORMAT_ABBREV_RELATIVE | FORMAT_ABBREV_ALL)) != 0;

    boolean past = (now >= time);
    long duration = Math.abs(now - time);

    int resId;
    long count;
    if (duration < MINUTE_IN_MILLIS && minResolution < MINUTE_IN_MILLIS) {
        count = duration / SECOND_IN_MILLIS;
        if (past) {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_num_seconds_ago;
            } else {
                resId = com.android.internal.R.plurals.num_seconds_ago;
            }
        } else {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_in_num_seconds;
            } else {
                resId = com.android.internal.R.plurals.in_num_seconds;
            }
        }
    } else if (duration < HOUR_IN_MILLIS && minResolution < HOUR_IN_MILLIS) {
        count = duration / MINUTE_IN_MILLIS;
        if (past) {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_num_minutes_ago;
            } else {
                resId = com.android.internal.R.plurals.num_minutes_ago;
            }
        } else {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_in_num_minutes;
            } else {
                resId = com.android.internal.R.plurals.in_num_minutes;
            }
        }
    } else if (duration < DAY_IN_MILLIS && minResolution < DAY_IN_MILLIS) {
        count = duration / HOUR_IN_MILLIS;
        if (past) {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_num_hours_ago;
            } else {
                resId = com.android.internal.R.plurals.num_hours_ago;
            }
        } else {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_in_num_hours;
            } else {
                resId = com.android.internal.R.plurals.in_num_hours;
            }
        }
    } else if (duration < WEEK_IN_MILLIS && minResolution < WEEK_IN_MILLIS) {
        count = getNumberOfDaysPassed(time, now);
        if (past) {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_num_days_ago;
            } else {
                resId = com.android.internal.R.plurals.num_days_ago;
            }
        } else {
            if (abbrevRelative) {
                resId = com.android.internal.R.plurals.abbrev_in_num_days;
            } else {
                resId = com.android.internal.R.plurals.in_num_days;
            }
        }
    } else {
        // We know that we won't be showing the time, so it is safe to pass
        // in a null context.
        return formatDateRange(null, time, time, flags);
    }

    String format = r.getQuantityString(resId, (int) count);
    return String.format(format, count);
} 
```

# image - 谷歌地图与街景 - 倒转音高参数？

> ID：14760126
> 
> 赞同：0
> 
> 时间：2013-02-07T20:12:51.150
> 
> 标签：image, api, google-maps, google-maps-api-3, google-street-view

我写了一些 PHP 脚本，在给脚本通常的谷歌地图 URL 后，从街景静态图像 API 获取静态图像。

但是，然后我将街景的位置设置为地面，并运行我的脚本，我得到了天空的图像，反之亦然。

这是一个例子。

常用谷歌地图网址： [https](https://maps.google.com/?ll=54.899267,23.884749&spn=0.022086,0.062485&t=m&z=15&layer=c&cbll=54.898264,23.885077&panoid=eu75VjoUqNejdSOUJEoCdA&cbp=12,17.61,,0,36.53) ://maps.google.com/?ll=54.899267,23.884749&spn=0.022086,0.062485&t=m&z=15&layer=c&cbll=54.898264,23.885077&panoid=eu75VjoUqNejdSOUJEoCdA&cbp, 36.3,7,3,3 - 间距 = 36.53)

这是来自 API 的静态图像： [http](http://maps.googleapis.com/maps/api/streetview?size=640x400&location=54.898264,23.885077&heading=17.61&pitch=36.53&fov=70&sensor=false) ://maps.googleapis.com/maps/api/streetview?size=640x400&location=54.898264,23.885077&heading=17.61&pitch=36.53&fov=70&sensor=false 正如你所看到的，音高是一样的大小，但图片显示的是天空。

如果你反转音高（-36.53），那么一切都很好。（我不能显示我，因为声誉，不超过 2 个链接）。

这是一个错误还是什么？我没有找到关于这件事的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:09:03.583

确实看起来值是倒置的，但没有错误。

Google-Maps AFAIK 的参数没有官方记录，所以这里的错误是您依赖这些参数。

但街景图像 API的[参数](https://developers.google.com/maps/documentation/streetview/#url_parameters)
已记录在案： * `pitch`（默认为 0）指定相机相对于街景车辆的向上或向下角度。这通常但不总是平坦的水平。正值使相机向上倾斜（90 度表示笔直向上）；**负值使相机向下倾斜**（-90 表示垂直向下）。*

# android - 编辑通知对象？

> ID：14760128
> 
> 赞同：1
> 
> 时间：2013-02-07T20:12:54.387
> 
> 标签：android, notifications

我已经创建了通知对象`NotificationCompat.Builder`，然后在我想更新的服务中的其他地方`value`。这样做的正确方法是什么？我应该取消这个对象并建立另一个吗？

```
 Intent intent = new Intent(this, MainActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent pendIntent = PendingIntent.getActivity(this, 0, intent, 0);

     Notification noti = new NotificationCompat.Builder(this)
     .setContentTitle("App")
     .setContentText("estimated value:" + String.valueOf(value))  // <---- wanna update this
     .setSmallIcon(R.drawable.ic_launcher)
     .setContentIntent(pendIntent)
     .build();

     startForeground(1235, noti); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:27:48.663

您无需取消之前的通知。相反，您可以简单地运行具有不同内容文本的相同代码（在这种情况下，更改`value`）。

有关详细信息，请参阅 Android 文档的[更新通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating)部分。

# java - 我应该在 Actions 中创建 Swing 组件吗？

> ID：14760130
> 
> 赞同：1
> 
> 时间：2013-02-07T20:13:02.517
> 
> 标签：java, swing, user-interface

我正在为我的 Swing 组件创建动作，但是，它们通常需要生成确认 JDialog。我应该在 Action 本身内创建这个 JDialog，我应该将它传递给 Action，还是有替代方法？

例子

```
public static class Create extends AbstractAction {
    @Override
    public void actionPerformed(ActionEvent event) {
        int selection = JOptionPane.showConfirmDialog(...);
        // ... processing
    }        
} 
```

这个例子很难进行单元测试，因为它涉及自动选择 JDialog（感觉就像代码味道）。

**解决方案？**

```
public static class Create extends AbstractAction {

    private JDialog dialog = null;

    public Create(JDialog dialog) {
        this.dialog = dialog;
    }

    @Override
    public void actionPerformed(ActionEvent event) {
        dialog.display();
        // ... processing
    }        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:43:08.617

大致像这样的东西怎么样：

```
class Dialogs {
    public static Dialogs INSTANCE = new Dialogs();

    public int confirm(String message) {
        return JOptionPane.showConfirmDialog(null, message);
    }
} 
```

然后打电话`Dialogs.INSTANCE.confirm()`到你想打电话的任何地方`JOptionPane.showConfirmDialog()`。对于测试，设置`Dialogs.INSTANCE`为模拟值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:27:41.003

我会将对话框创建保留在 actionPerformed 中，并将以下处理逻辑移动到单独的方法中，然后*仅*对该方法进行单元测试。对话框创建工作正常，无需对其进行单元测试。

# c++ - 为什么删除列表的 _first_ 元素会使 `.rend()` 无效？

> ID：14760134
> 
> 赞同：11
> 
> 时间：2013-02-07T20:13:19.880
> 
> 标签：c++, stdlist, reverse-iterator

使用 XCode 4.6 在 Mac OS X 上测试。

此示例代码显示了`std::list`按我的预期删除作品的最后一个元素：迭代器引用`list::end()`仍然是“结束后 1”并且仍然有效，***即使通过删除最后一个元素也是如此***。

但第二个例子与我的直觉相反。删除列表中的*第一个*元素**changes`list::rend()`**，我认为这是“1 过去的开头”。

我的预期错了吗？为什么错了？为什么通过删除最后一个元素对“结束后的 1”的引用仍然有效（不应该吗？），但`.rend()`在删除前面的元素后对“开头（）前面的 1”的引用变得无效？

```
void printList( list<int>& os )
{
  for( int& i : os )
    printf( "%d ", i ) ;
  puts("");
}

void testList()
{
  list< int > os ;
  os.push_back( 1 ) ;
  os.push_back( 2 ) ;
  os.push_back( 3 ) ;
  os.push_back( 4 ) ;
  os.push_back( 5 ) ;  

  // Forward iterators:  reference to .end() not invalidated when remove last elt.
  list<int>::iterator fwdEnd = os.end() ;
  printList( os ) ;
  os.erase( --os.end() ) ; // remove the 5 (last elt)
  printList( os ) ;
  if( fwdEnd == os.end() )  puts( "YES, fwdEnd==os.end() still, iterators not invalidated" ) ;  // I get __this__ result
  else puts( "NO: fwdEnd INVALIDATED" ) ;

  list<int>::reverse_iterator revEnd = os.rend() ;
  // remove the front element
  printList( os ) ;
  os.erase( os.begin() ) ; // removes the 1
  printList( os ) ;
  if( revEnd == os.rend() )  puts( "YES revEnd is still valid" ) ;
  else  puts( "NO: revEnd NOT valid" ) ; // I get __this__ result
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-07T20:23:38.190

这是因为反向迭代器的引用逻辑与常规迭代器略有不同：它指向一个元素，但在取消引用时，它会产生对前一个元素的引用。

如果您尝试以下操作，您将很容易看到这一点：

```
#include <vector>
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
    vector<int> v = { 1, 2, 3, 4, 5, 6 };
    auto i = find(begin(v), end(v), 3);
    cout << *i << endl;

    vector<int>::const_reverse_iterator ri(i);
    cout << *ri << endl;
} 
```

输出应该是：

```
3
2 
```

当反向迭代器在*物理*上指向某个元素时，它在*逻辑上*指向它之前的元素。因此，反向迭代器在物理上指向具有 index 的集合中的元素`i`，当取消引用时，会产生（引用）具有 index 的元素`i-1`：

```
 i, *i
                       |
    -      1     2     3     4     5     6     -
                 |     | 
                 *ri   ri 
```

这就是为什么迭代器 return by`rend()`实际上指向集合中的第一个元素，而不是第一个元素之前的元素。因此，删除第一个元素会使它无效。

```
 begin, *begin                       end, *end
           |                                   |
    -      1     2     3     4     5     6     -
    |      |                             |     |
*rend      rend                    *rbegin     rbegin 
```

这不仅适用于列表，还适用于所有提供双向迭代器的集合。

# c# - SPSite.dispose() 和 SPWeb.dispose() 是否总是需要调用？

> ID：14760139
> 
> 赞同：1
> 
> 时间：2013-02-07T20:14:04.050
> 
> 标签：c#, .net, sharepoint, dispose

这几天我一直在讨论这个话题。我查看了几个博客并使用 SPDisposeChecker.exe 进行了一些测试。关于何时必须调用 Dispose() 似乎有各种想法。例如 Christian Glessner 的这个博客：

[http://www.ilovesharepoint.com/2010/03/sharepoint-disposing-myths.html](http://www.ilovesharepoint.com/2010/03/sharepoint-disposing-myths.html)

表示不必一直使用 SPWeb 处理 Web。

但是，Microsoft 最佳实践建议处置任何 Openweb。[http://msdn.microsoft.com/en-us/library/aa973248(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/aa973248(v=office.12).aspx)

在以下代码块上（有点旧并且不在 Using 块内）：：

```
 try
      {

          SPSite site = new SPSite("http://mysite.aspx");
          web = site.OpenWeb();
          site.Dispose();
          site = null;
      }
      catch (System.IO.FileNotFoundException x)
      {
          return;
      } 
```

如果我使用 SPDisposeCheck 进行快速检查，则会出现错误：

“一次性类型不处置”在 web = site.OpenWeb(); 的行上

但是当我放一个 finally 块时：

```
 finally
      {
        if (web != null)
         web.Dispose();
      } 
```

SPDisposeCheck 给出以下错误：“注意：不应在此对象上调用 Dispose”

做了一些研究，我发现 SPDispose 有一些错误，正如这个博客所解释的那样

[http://social.msdn.microsoft.com/Forums/is/sharepointdevelopmentlegacy/thread/3fe362b3-cc03-43e5-a076-bf37dd8175c9](http://social.msdn.microsoft.com/Forums/is/sharepointdevelopmentlegacy/thread/3fe362b3-cc03-43e5-a076-bf37dd8175c9)

所以我对我的研究仍然有点不满意。我的意思是，遵循 Microsoft 的最佳实践是好的，它建议始终使用 Dispose()。但是，对于何时以及何时不处置，我仍然不完全满意。

此外，“当您处理 SPSite 时，它​​会遍历“m_openedWebs”中的所有 SPWeb 并在每个上调用 Close 方法”这是正确的说法吗？

回到我的代码块，这里真的需要一个 SPWeb.Dispose（在 finally 块上）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:29:54.210

我是 SharePoint 的 MCSD，我在 SharePoint 上进行了大量维护编程。在谈到 SharePoint API 时，我倾向于保守，因为我经历了它们的演变过程，并且见证了它们成长的许多痛苦。

我对您的建议是，如果您打开一个 Web（或其他 SharePoint 一次性对象），最好在完成后立即将其丢弃。即使在 SPWeb 被自动处置的情况下，回收该对象的资源也可能符合您的最佳利益。如果一个网站有 1,000 个网站，您是否希望在遍历它们时保持它们全部打开？可能不是。显然，如果你收到一个上下文对象，你应该留下它们——你不是在创建它们，所以它们并不是你真正的责任。

[SPSite.OpenWeb 的最佳实践是](http://msdn.microsoft.com/en-us/library/aa973248%28v=office.12%29.aspx#sharepointobjmodel__spwebobjects)“（OpenWeb 返回的 SPWeb）没有存储在 SPSite 对象中，也没有在 SPSite 类中的任何位置处理。因此，您应该处理通过这些方法创建的任何对象。所以`m_openedWebs`“ _ ，是的，从技术上讲，它是正确的。您能否依靠 m_openedWebs 来包含您打开的每个站点？可能不是。因此，我将添加 finally 块并确保 SPWeb 得到正确处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:17:27.360

您不应该处置不是您创建的 SPSite/Web，尤其是`SPContext.Current`在运行某个功能的事件处理程序时传递给您的站点/Web。

其余的时间你都应该处理它，通常使用 a`using`是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:25:58.757

我注意到并非所有事情都像文档保证那样关闭和处置。恰当的例子：Microsoft JET 或 ACE Acces 在使用 Ole 对象时不会关闭连接。

以下讨论适用于正确实施的项目`IDispose`：

*   我发现如果我只想定期访问一个方法（大约一小时一次），我可以等待垃圾收集器 (GC) 为我处理该项目。

*   如果我正在进行一个将迭代多个项目的调用，那么最好`Dispose()`在我完成它时实际调用我创建的对象。

所以，我想这一切都取决于你如何在代码中使用它。

我希望这有帮助。不过，这并不是一个很好的答案。

# php - XML-JSON 内容协商

> ID：14760140
> 
> 赞同：1
> 
> 时间：2013-02-07T20:14:04.387
> 
> 标签：php, xml, json

我希望只显示以下页面中的某些内容：[http](http://sc2ranks.com/api/psearch/am/MxGPezz/1t/division/Felanis%20Sierra?appKey=sentinelgaming.net) ://sc2ranks.com/api/psearch/am/MxGPezz/1t/division/Felanis%20Sierra?appKey=sentinelgaming.net 。到目前为止，我可以使用下面的 php 显示一些东西，但它甚至不是正确的数字。有人能告诉我如何从这个 XML 网页显示这个播放器的“成就点”吗？

```
$url = 'http://sc2ranks.com/api/psearch/am/MxGPezz/1t/division/Felanis%20Sierra?appKey=sentinelgaming.net';
$xml = file_get_contents($url);

echo $xml->achievement-points; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:33:50.763

此文件的内容类型因`Accept`标头或`format`查询参数而异。看来您至少可以检索 XML 或 JSON。

您获得的默认值`file_get_contents()`将是 JSON，因为它不包含请求标头，但来自浏览器的默认值将是 XML，因为浏览器通常在其请求标头`Accept`中包含 XML mime 类型。`Accept`

要获取 JSON：

```
$url = 'http://sc2ranks.com/api/psearch/am/MxGPezz/1t/division/Felanis%20Sierra?appKey=sentinelgaming.net';

// &format=json is not strictly necessary,
// but it will give you fewer surprises
$json = file_get_contents($url.'&format=json');
$records = json_decode($json);
echo $records[0]->achievement_points, "\n"; 
```

要获取 XML：

```
$sxe = simplexml_load_file($url.'&format=xml');
echo (string) $sxe->record->{'achievement-points'}, "\n"; 
```

要使用该`$sxe`对象，请参阅[此 SimpleXML 备忘单](https://stackoverflow.com/a/14421571/1002469)。

`format`您可以设置`Accept`标题，而不是使用参数。您还可以添加一些抽象来获取 url，以便您也可以检索内容类型和编码。请参见下面的示例。

```
function get_url($url, $context=null) {
    $response = file_get_contents($url, false, $context);
    $ctypeheaders = preg_grep('/^Content-Type:\s/i', $http_response_header);
    $ctype = NULL;
    if ($ctypeheaders) {
        $ctype = end($ctypeheaders);
        $ctype = end(explode(':', $ctype, 2));
        $ctype = explode(';', $ctype, 2);
        $charset = isset($ctype[1]) ? $ctype[1] : '';
        if ($charset && preg_match('/charset\s*=\s*([^\s]+)/i', $charset, $matches)) {
            $charset = $matches[1];
        }
        $ctype[1] = $charset;
        $ctype = array_map('trim', $ctype);
    }
    return array($response, $ctype);
} 
```

然后你可以`get_url()`像这样使用：

```
// With no accept header, just see what we get:
list($content, $contenttype) = get_url($url);
list($type, $encoding) = $contenttype;
// $type will be 'application/xml' or 'application/json'
// $encoding is very handy to know too

// Or we can specify an accept header:
$opt_accept_xml = stream_context_create(array(
    'http' => array(
        'header' => "Accept: application/xml\r\n"
    )
));

list($content, $contenttype) = get_url($url, $opt_accept_xml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:24:53.170

也许：

```
 echo $xml->record[0]->achievement-points; 
```

# javascript - .val() 检索默认值，而不是类型值

> ID：14760141
> 
> 赞同：0
> 
> 时间：2013-02-07T20:14:13.660
> 
> 标签：javascript, jquery, forms

里面`$(document).ready()`是一个`.on('click')`事件处理程序。它绑定到一个空的 div，我们称它为 parentContainer。

点击处理程序如下所示：

```
$('#parentContainer').on('click', #buttonthatWILLexisteventually, (function() { doStuff(); })); 
```

问题是，我最终想要使用的对象**还不存在**。我有另一个函数，它使用 .appendTo() jQuery 函数将输入文本字段、按钮（包括 #buttonthatWILLexisteventually）和其他东西插入到 #parentContainer 中。

我想要#buttonthatWILLexisteventually（以下称为#btwee）做的是在单击按钮时读取附加的文本字段的**当前值。**

当我取消所有 $(document).ready 并插入 HTML 废话并坚持使用静态 HTML 时，它在 jsfiddle 中工作。

```
<div class="parentContainer">
        <h2>Server Log</h2>
        <div>
            <input type="text" name="Filter" id="logfilter" value="Filter Log by [id]" />
            <input type="checkbox" id="logdebug" />
            <label for="logdebug">Display Debug Messages</label>
            <button class="changeNestedSetting" id="logclear">Clear</button>
            <button class="changeNestedSetting" id="logview">View Log</button>
        </div>
        <div id="iframediv"></div>
    </div>

  (function () {
    $(document).ready(function () {
        $('.parentContainer').on('click', '#logview',(function(){
            console.log($("#logfilter").val());
            $('<div width="100%" height="600" id="logiframe"></div>').appendTo('div#iframediv');
            var logurlparam =  { filterlog: $("#logfilter").val() };
            var logurl = "echo/html?ID=" + logurlparam["filterlog"];
            $.ajax({
                type: "GET",
                url: logurl,
                dataType: "html",
                success: function (html) {
                    $('<pre>' + html + '</pre>').appendTo('div.log');
                    $('div#logiframe').contents().find('body').append('<pre>' + html + '</pre>');
                }
            });
        }));
    });
    }()); 
```

[http://jsfiddle.net/Rx3dV/15/](http://jsfiddle.net/Rx3dV/15/)

不幸的是，现实世界的例子似乎创造了一个catch-22；将点击处理程序绑定到父级似乎意味着当我在该父级内部创建按钮时，点击处理程序绑定但我失去了动态读取文本字段内容的能力；该值始终是默认值（参见：http: [//jsfiddle.net/k5rD2/1/](http://jsfiddle.net/k5rD2/1/)）。另一方面，尝试在与创建内部内容的代码相同的代码中执行点击事件意味着它不会绑定。

我在此看到的大多数其他线程都建议使用 .keyup() 或 .keypress() 来“猜测”输入的内容；对于一个相当简单的问题，这似乎是一个糟糕的解决方案，但到目前为止我还没有找到更好的解决方案。

**更新：**今晚让一个 JavaScript 程序员和我一起检查我的代码，看看我做错了什么。我设法难倒了他；我们唯一能想到的可能是 jquery-ui（页面上其他地方正在使用它）与它有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:59:34.707

所以代码*正在*工作......在不可见选项卡内容中的同名 div 中，这是我在 DOM 中工作的那个之前的。

修复我在 jquery-ui 中使用选项卡的方式使问题消失了。

# javascript - 如何在 Google Apps 表格（网格）中使用 CSS 样式

> ID：14760143
> 
> 赞同：1
> 
> 时间：2013-02-07T20:14:24.363
> 
> 标签：javascript, google-apps-script

我是一个初学者，正在寻找一些帮助来设计由 Google Apps 脚本生成的表格，它是一个显示 Google 联系人列表的表格，并从[这个站点](https://sites.google.com/site/appsscripttutorial/contacts-services/display-contacts-in-a-table)的代码开始。

我一直在尝试通过添加`.setStyleAttributes({})`to来设置它的样式`app.createGrid`，但我似乎无法找到一种方法来定位所有浏览器上的元素。当前页面在 Chrome 中看起来不错，但我什至无法在 Firefox 中折叠边框...`grid.setWidget``app.createLabel``<td>`

我想要的是能够：

*   让 Firefox 上的边框崩溃（现在完成，谢谢）
*   设置单元格边框的样式以获得水平蓝线且没有垂直线（或白色垂直线）

无论如何，这是生成表格的代码，任何建议或帮助将不胜感激。

```
//Create grid to hold the contacts data, styles set <table> inline styles
var grid = app.createGrid(sorted_contacts.length+1,6)
  .setBorderWidth(1)
  .setCellPadding(5)
  .setStyleAttributes({borderCollapse: "collapse", border: "1px solid #D1E2FF", borderBottom: "1px solid #D1E2FF", borderTop: "1px solid #D1E2FF", borderLeft: "1px solid #fff", borderRight: "1px solid #fff"});

//Create the header row
grid.setWidget(0, 0, app.createLabel('Name').setStyleAttributes({fontFamily: "Verdana, sans-serif", fontWeight: "bold", color: "#384C80"}))
    .setWidget(0, 1, app.createLabel('Email').setStyleAttributes({fontFamily: "Verdana, sans-serif", fontWeight: "bold", color: "#384C80"}))
    .setWidget(0, 2, app.createLabel('Home').setStyleAttributes({fontFamily: "Verdana, sans-serif", fontWeight: "bold", color: "#384C80"}))
    .setWidget(0, 3, app.createLabel('Work').setStyleAttributes({fontFamily: "Verdana, sans-serif", fontWeight: "bold", color: "#384C80"}))
    .setWidget(0, 4, app.createLabel('Mobile').setStyleAttributes({fontFamily: "Verdana, sans-serif", fontWeight: "bold", color: "#384C80"}))
    .setWidget(0, 5, app.createLabel('Address').setStyleAttributes({fontFamily: "Verdana, sans-serif", fontWeight: "bold", color: "#384C80"}))

//Write all the contacts in grid/table
for (var i=0; i<sorted_contacts.length; i++){

  //Display the first name + surname or just the surname
  if(sorted_contacts[i][0]!='') grid.setWidget(i+1, 0, app.createLabel(sorted_contacts[i][0]+' '+sorted_contacts[i][1]).setStyleAttributes({fontFamily: "Verdana, sans-serif", color: "#2E2E2E"}));
  else
    grid.setWidget(i+1, 0, app.createLabel(sorted_contacts[i][1]).setStyleAttributes({fontFamily: "Verdana, sans-serif", color: "#2E2E2E"}));

  //Display the rest of the fields
  grid.setWidget(i+1, 1, app.createLabel(sorted_contacts[i][2]).setStyleAttributes({fontFamily: "Verdana, sans-serif", color: "#2E2E2E"}));
  grid.setWidget(i+1, 2, app.createLabel(sorted_contacts[i][3]).setStyleAttributes({fontFamily: "Verdana, sans-serif", color: "#2E2E2E"}));
  grid.setWidget(i+1, 3, app.createLabel(sorted_contacts[i][4]).setStyleAttributes({fontFamily: "Verdana, sans-serif", color: "#2E2E2E"}));
  grid.setWidget(i+1, 4, app.createLabel(sorted_contacts[i][5]).setStyleAttributes({fontFamily: "Verdana, sans-serif", color: "#2E2E2E"}));
  grid.setWidget(i+1, 5, app.createLabel(sorted_contacts[i][6]).setStyleAttributes({fontFamily: "Verdana, sans-serif", color: "#2E2E2E"}));
}

//add the grid/table to the panel
panel.add(grid);

//add the panel to the application
app.add(panel);
return app; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:49:53.670

也许您想要`grid.setRowStyleAttributes(rowNum, styles)`，或者`grid.setColumnStyleAttributes(colNum, styles)`是针对个人的特殊网格版本的 setStyleAttributes `<td>`-`grid.setStyleAttributes(rowNum, colNum, styles)`

# javascript - if else 语句中的 javascript 警报未触发

> ID：14760148
> 
> 赞同：2
> 
> 时间：2013-02-07T20:14:36.383
> 
> 标签：javascript, alert

如果语句的第一部分失败，我会尝试发送警报。但我无法弄清楚为什么警报没有触发。是的，我强迫声明失败。

```
$("#btnSubmit").click(function (e)
    {
    if (<?php echo $browser; ?> >= 1)
        {
        var user = $("#ownerPost input").val();
        var oid = <?php echo $Owner; ?>;
            $.ajax(
                    { 
                    type: 'POST', 
                    url: 'follow.php', 
                    data: "oid="+oid, 
                    dataType: 'json',
                    success: function(data)
                        {
                        var id = data[0];
                        var name = data[1];
                        $('#output2').html("<b>id: </b>"+id+"<b> name: </b>"+name);
                        } 
                    }
                    );

        $("#output").html("<b>You are now following: </b>" + user);
        e.preventDefault();
        }
        else
        {
        alert("You must log in to follow");
        }
    }
    ); 
```

以下是查看源代码的输出：实际数字是 56，这使得陈述正确且正确。当语句为假时，它不会触发 else 并因此触发警报。如果我在 else 之前放置一个警报，它将显示警报，因为第一部分是正确的。

```
 $("#btnSubmit").click(function (e)
    {if (56 >= 1){
        var user = $("#ownerPost input").val();
        var oid = 56;
        $.ajax({ 
            type: 'POST', 
            url: 'follow.php', 
            data: "oid="+oid, 
            dataType: 'json',
            success: function(data){
                var id = data[0];
                var name = data[1];
                $('#output2').html("<b>id: </b>"+id+"<b> name: </b>"+name);} });
            $("#output").html("<b>You are now following: </b>" + user);
            e.preventDefault();
            }else{alert("You must log in to follow");}}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:02:51.200

我认为您有语法错误。我打算建议一个 try/catch，但这对语法错误没有帮助。请编辑您的问题并按照其他人的建议放入“视图>页面源”。另外，您可以使用 Firebug 或等效的工具来查看控制台吗？

**编辑：** 我确实收到此代码的警报。请注意，我将浏览器设置为 0。

```
blah = function(e) {
    if (0 >= 1) {
        var user = $("#ownerPost input").val();
        var oid = 56;
        $.ajax({
            type : 'POST',
            url : 'follow.php',
            data : "oid=" + oid,
            dataType : 'json',
            success : function(data) {
                var id = data[0];
                var name = data[1];
                $('#output2')
                .html("<b>id: </b>" + id + "<b> name: </b>" + name);
            }
        });
        $("#output").html("<b>You are now following: </b>" + user);
        e.preventDefault();
    } else {
        alert("You must log in to follow");
    }
};
blah.call(); 
```

# jquery - 使用下拉显示/隐藏 div

> ID：14760149
> 
> 赞同：0
> 
> 时间：2013-02-07T20:14:39.673
> 
> 标签：jquery

我正在使用下拉菜单根据所选选项显示/隐藏 div。显示/隐藏正在工作，但是我只需要隐藏与每个下拉菜单相关的 div，而不是每次都隐藏页面上的所有 div。

如何仅选择与每个下拉菜单相关的 div？

[http://jsfiddle.net/infatti/fj63g/7/](http://jsfiddle.net/infatti/fj63g/7/)

```
<select id="dropDown">
    <option>Choose</option>
    <option value="div1">Show Div 1</option>
    <option value="div2">Show Div 2</option>
</select>

<div  id="div1" class="drop-down-show-hide">div 1</div>
<div  id="div2" class="drop-down-show-hide">div 2</div>

<hr />

<select id="dropDown2">
    <option>Choose</option>
    <option value="div3">Show Div 3</option>
    <option value="div4">Show Div 4</option>
</select>

<div  id="div3" class="drop-down-show-hide">div 3</div>
<div  id="div4" class="drop-down-show-hide">div 4</div>

$('.drop-down-show-hide').hide();

$('#dropDown').change(function(){

    $('.drop-down-show-hide').hide();
    $('#' + this.value).show();

});

$('#dropDown2').change(function(){

    $('.drop-down-show-hide').hide();
    $('#' + this.value).show();

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:19:06.303

试试这个 ：

```
$('#dropDown').change(function(){
   $(this).find("option").each(function(){
      $('#' + this.value).hide();
    });
    $('#' + this.value).show();

}); 
```

演示：http: [//jsfiddle.net/fj63g/8/](http://jsfiddle.net/fj63g/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:20:28.803

```
$('.drop-down-show-hide').hide();

$('#dropDown, #dropDown2').change(function(){

    $(this).find('option').each(function(){
        $('#'+$(this).val()).hide();
    });

    $('#' + this.value).show();

}); 
```

[http://jsfiddle.net/3aRxW/1/](http://jsfiddle.net/3aRxW/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:21:30.390

如何将每组 div 的类更改为唯一？像：

```
<select id="dropDown">
    <option>Choose</option>
    <option value="div1">Show Div 1</option>
    <option value="div2">Show Div 2</option>
</select>

<div  id="div1" class="drop-down-show-hide">div 1</div>
<div  id="div2" class="drop-down-show-hide">div 2</div>

<hr />

<select id="dropDown2">
    <option>Choose</option>
    <option value="div3">Show Div 3</option>
    <option value="div4">Show Div 4</option>
</select>

<div  id="div3" class="drop-down-show-hide2">div 3</div>
<div  id="div4" class="drop-down-show-hide2">div 4</div>

$('.drop-down-show-hide').hide();

$('#dropDown').change(function(){

    $('.drop-down-show-hide').hide();
    $('#' + this.value).show();

});

$('#dropDown2').change(function(){

    $('.drop-down-show-hide2').hide();
    $('#' + this.value).show();

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T20:21:55.480

使用下拉特定类组：

```
<div  id="div1" class="dd_group1">div 1</div>
<div  id="div2" class="dd_group1">div 2</div>

<div  id="div3" class="dd_group1">div 3</div>
<div  id="div4" class="dd_group1">div 4</div>

$('#dropDown').change(function(){

    $('.dd_group1').hide();
    $('#' + this.value).show();

});

$('#dropDown2').change(function(){

    $('.dd_group2').hide();
    $('#' + this.value).show();

}); 
```

# jquery - 没有 PHP 的 jQuery 无限滚动可能吗？

> ID：14760153
> 
> 赞同：0
> 
> 时间：2013-02-07T20:14:53.043
> 
> 标签：jquery, infinite-scroll

我一直在花很多时间在 jQuery 上寻找一个具有无限滚动功能的插件。大多数情况下，它总是一起使用 PHP，MySQL。你对前端无限滚动有什么建议吗？我正在建立一个加载近 500 张图片的图片库。

```
 <section class="work">

            <figure class="new_release">
                <a rel="new_release" class="fancybox" href="images/big/1.png" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean eleifend mauris tincidunt dui mattis lacinia vel nec orci. Aliquam eget.">
                    <img src="images/1.png" alt="afadsf" />
                    <dl>
                        <dt>Client</dt>
                            <dd>Envato</dd>
                        <dt>Role</dt>
                            <dd>Popularity</dd> 
                    </dl>
                </a>    
            </figure>   

            <figure class="Popularity">
                <a rel="Popularity" class="fancybox" href="images/big/2.png" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean eleifend mauris tincidunt dui mattis lacinia vel nec orci. Aliquam eget.">
                    <img src="images/2.png" alt="" />
                    <dl>
                        <dt>Client</dt>
                            <dd>Envato</dd>
                        <dt>Role</dt>
                            <dd>Popularity</dd> 
                    </dl>
                </a>    
            </figure>   
                            .....
                            .....
                            .....
        </section> 
```

Figure 容器将是显示其他图像的重复代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:32:38.957

Infinite Scroll 允许您在开始时保持页面内容较小，然后根据请求通过 Ajax 进行扩展。当您滚动到边缘（通常是页面底部）时，会显示某种加载微调器。

通常为此使用 jQuery，因为跨浏览器滚动检测可能有些费力。所以像这样的一些片段对于这种类型的检测很常见：

```
//Bind Scroll Event Listener
    $(window).scroll(function () {
       if ($(window).scrollTop() + $(window).height() == $(document).height())
          // End of page reached...
          // Show loading spinner
          // Make Ajax Call
          // When Ajax Call finishes, hide spinner, append retrieved data
          // Update some counter
          // Page height is now expanded, and process can repeat
    } 
```

通常会保留某种计数器来确定到目前为止已加载了多少“页面”。这被传递给服务器端脚本以将结果集限制为特定页面。

或者，使用一些 JavaScript/jQuery，您可以删除以前的内容，只有在您滚动回顶部时才能恢复它。

在您的情况下，您可能最终会维护一些包含图像数组的硬编码 JavaScript 对象作为分页过程，并在显示微调器时预加载它们，在所有预加载完成后附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:18:29.607

我遇到了这个，它看起来像是一个 wordpress 插件和 jquery 插件。

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

我假设一旦你有了一个图像列表，你就可以在不使用 PHP 和 mySQL 的情况下轻松管理它。人们可能正在使用 PHP 和 mySQL 进行数据分页。

# c# - 响应 TransmitFile - 什么也没发生

> ID：14760154
> 
> 赞同：0
> 
> 时间：2013-02-07T20:14:55.437
> 
> 标签：c#, asp.net, httpresponse

## Response.TransmitFile 帮助

在发帖之前，我在这里搜索了几个类似的帖子，就像这个一样

[Response.WriteFile / Response.BinaryWrite / Response.TransmitFile (ASP.NET) 出现问题](https://stackoverflow.com/q/9670453/153923)

解决方案包括`Response.End();`

好吧，我已经包含了最后一行，但仍然没有发生任何事情。

我什`<asp:Label ID="lblErrMsg" runat="server" />`至在 ASPX 页面的正文中包含了一个，但也没有写入任何内容。

```
public void DownloadFile(string nameOnly) {
  if (!String.IsNullOrEmpty(nameOnly)) {
    lblErrMsg.Text = "Transfer request for " + nameOnly;
    string filename = Server.MapPath(nameOnly);
    try {
      if (!String.IsNullOrEmpty(filename)) {
        Response.Buffer = true;
        Response.Clear(); // clear the buffer
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        if (-1 < filename.IndexOf(".avi")) {
          Response.ContentType = "video/x-msvideo";
          lblErrMsg.Text = "Content Type Set to Video.";
        } else if (-1 < filename.IndexOf(".pdf")) {
          Response.ContentType = "Application/pdf";
          lblErrMsg.Text = "Content Type Set to PDF.";
        } else if (-1 < filename.IndexOf(".rar")) {
          Response.ContentType = "Application/x-rar-compressed";
          lblErrMsg.Text = "Content Type Set to RAR.";
        } else {
          Response.ContentType = "Application/octet-stream";
          lblErrMsg.Text = "Content Type Set to Octet Steam.";
        }
        FileInfo file = new FileInfo(filename);
        Response.AddHeader("Content-Disposition", "attachment; filename=" + nameOnly);
        Response.AddHeader("Content-Length", file.Length.ToString());
        lblErrMsg.Text = "Content Headers added.";
        Response.TransmitFile(file.FullName);
        lblErrMsg.Text = "Transfer Completing...";
        Response.End();
        lblErrMsg.Text = "Transfer Complete.";
      } else {
        throw new Exception(string.Format("Server was unable to locate file \"{0}\".", nameOnly));
      }
    } catch (Exception err) {
      lblErrMsg.Text = err.Message;
    }
  }
} 
```

*   有谁看到我做错了什么？

就像我说的那样，`lblErrMsg.Text`它是空白的，但没有出现下载对话框，而且似乎什么也没有发生。

**更新：**

我正在与 Aristos 合作。我使用他的建议修改了我的方法，但我的示例下载文件仍然没有显示：

```
private string Download(string nameOnly) {
  string outputLine = null;
  if (!String.IsNullOrEmpty(nameOnly)) {
    string filename = Server.MapPath(nameOnly);
    if (!String.IsNullOrEmpty(filename)) {
      try {
        Response.Buffer = false;
        Response.Clear(); // clear the buffer
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        if (-1 < filename.IndexOf(".avi")) {
          Response.ContentType = "video/x-msvideo";
        } else if (-1 < filename.IndexOf(".pdf")) {
          Response.ContentType = "Application/pdf";
        } else if (-1 < filename.IndexOf(".rar")) {
          Response.ContentType = "Application/x-rar-compressed";
        } else {
          Response.ContentType = "Application/octet-stream";
        }
        FileInfo file = new FileInfo(filename);
        Response.AddHeader("Content-Disposition", "attachment; filename=" + nameOnly);
        Response.AddHeader("Content-Length", file.Length.ToString());
        Response.TransmitFile(file.FullName);
      } catch (Exception err) {
        outputLine = err.Message;
      } finally {
        Response.Flush();
      }
    } else {
      outputLine = string.Format("Server was unable to locate file \"{0}\".", nameOnly);
    }
  }
  if (String.IsNullOrEmpty(outputLine)) {
    Response.Redirect("~/Default.aspx");
  }
  return outputLine;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:27:22.537

尝试了解您有一个返回浏览器数据的管道。

在您的代码中，您的行为就像您发送回两种数据，一种发送到页面，另一种发送到下载数据——但您实际上不能这样做。就像您尝试在两个不同的文件上写入 - 将一个流打开到一个文件。

所以选择以太发送文件，以太更新页面。

我在这里描述了我认为下载文件的最佳方式：
[Response.WriteFile() 之后没有发生附带操作](https://stackoverflow.com/questions/14744981/asp-net-service-side-actions-not-happening-after-response-writefile/14745111#14745111)
[什么是从服务器下载文件的最佳方式](https://stackoverflow.com/questions/10912164/what-is-the-best-way-to-download-file-from-server)
[从 ASP.NET Web 处理程序 (.ashx) 下载文件时的错误处理)](https://stackoverflow.com/questions/14609389/error-handling-when-downloading-file-from-asp-net-web-handler-ashx/14616216#14616216)

# android - 在 Junit 测试中调用 findViewById()

> ID：14760156
> 
> 赞同：1
> 
> 时间：2013-02-07T20:15:02.603
> 
> 标签：android, junit4

我是单元测试的新手，我有一个简单的测试方法不起作用。这是我所拥有的：

```
@Test
public void testLayoutAvailable() {
    View v = mMainActivity.findViewById(R.layout.main_activity);
    assertNotNull(v);
} 
```

我的问题`v`是总是`null`。我逐步完成了代码，但 mMainActivity 没有`null`，我的其他测试方法都可以正常工作。所以我确信有一些简单的东西我还不知道。我检查了我的进口，我也试过`com.packagename.R.layout.main_activity`了，那也回来了`null`。然而，应用程序本身工作正常，所以我知道布局在那里，这个测试应该通过。

有什么建议么？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:27:30.037

当您在 Android 上运行正常的 JUnit 测试时，应用程序的其余部分并未完全构建。

然而，Android 提供了一些帮助类来构建足够多的应用程序，以便您能够对其进行测试。看看[http://developer.android.com/tools/testing/activity_testing.html](http://developer.android.com/tools/testing/activity_testing.html)

我以前主要用过[`ActivityInstrumentationTestCase2`](http://developer.android.com/reference/android/test/ActivityInstrumentationTestCase2.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T19:05:26.167

我发现问题是我将布局而不是 id 传递给`findViewById()`.

# sql - SQL 查询中的 case 语句

> ID：14760163
> 
> 赞同：1
> 
> 时间：2013-02-07T20:15:15.707
> 
> 标签：sql, sql-server-2005

我试图在 SQL Server 2005 中像这样的 select 语句中使用 case 语句，但我收到错误“当 EXISTS 未引入子查询时，只能在选择列表中指定一个表达式。” 不能在 SQL 查询中使用 Case 吗？！

```
declare @TypeofDayID int
set @TypeofDayID = (Select TypeofDayID from RepInfo where RepInfoID = @RepInfoID)

Select CASE 
    WHEN @TypeofDayID = 1 
        THEN (Select * from RepInfo RD inner join SellingInfo S on S.RepInfoID = @RepInfoID)
    WHEN @TypeofDayID = 2
        THEN (Select * from RepInfo RD inner join UpgradingInfo U on U.RepInfoID = @RepDailyID)
    WHEN @TypeofDayID = 9 or @TypeofDayID = 10
        THEN (Select * from RepInfo RD inner join DeliveryInfo D on D.RepDailyID = @RepDailyID)
    END
from RepInfo RD 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:19:33.250

`CASE`不用于逻辑流控制...使用`IF`/`ELSE IF`代替：

```
declare @TypeofDayID int
set @TypeofDayID = (Select TypeofDayID from RepInfo where RepInfoID = @RepInfoID)

IF @TypeofDayID = 1 
  Select * 
  from RepInfo RD inner join SellingInfo S on S.RepInfoID = @RepInfoID
ELSE IF @TypeofDayID = 2
  Select * 
  from RepInfo RD inner join UpgradingInfo U on U.RepInfoID = @RepDailyID
ELSE IF @TypeofDayID = 9 or @TypeofDayID = 10
  Select * 
  from RepInfo RD inner join DeliveryInfo D on D.RepDailyID = @RepDailyID 
```

请记住...由于您正在使用`SELECT *`，并基于 加入不同的表`@TypeOfDayID`，您最终可能会得到一个参差不齐的结果集，这意味着您将拥有不同数量的列，具体取决于采用哪个分支.

以编程方式处理这可能会很痛苦，因此`SELECT *`出于这个原因以及其他原因，最好避免...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:21:06.260

我认为您尝试做的事情可以通过这种方式得到更好的处理。

```
declare @TypeofDayID int
set @TypeofDayID = (Select TypeofDayID from RepInfo where RepInfoID = @RepInfoID)

IF @TypeofDayID = 1 
    Select * 
    from RepInfo RD 
    inner join SellingInfo S on S.RepInfoID = @RepInfoID
ELSE IF @TypeofDayID = 2
    Select * 
    from RepInfo RD 
    inner join UpgradingInfo U on U.RepInfoID = @RepDailyID
ELSE IF @TypeofDayID = 9 or @TypeofDayID = 10
    Select * 
    from RepInfo RD 
    inner join DeliveryInfo D on D.RepDailyID = @RepDailyID 
```

# java - 为什么 Java 'Comparable' 比仅使用 compareTo 方法更好？

> ID：14760165
> 
> 赞同：1
> 
> 时间：2013-02-07T20:15:24.660
> 
> 标签：java, comparable, compareto

1.  我看到该`Comparable`接口只允许实现该`compareTo`方法。那么为什么我们甚至需要这个接口呢？为什么我们不能简单地在我们想要的任何类中定义和声明方法，而不必实现`Comparable`接口？

2.  我知道这是正确的：`SortedSet<String> exampleSet = new TreeSet<String>();`<--`TreeSet`实现`SortedSet`接口。因此，如果我有一个名为 " `Date`" 的类实现`Comparable`，这是否正确：`Comparable<Date> example = new Date<Date>();`. 如果是，我到底能得到什么？我的意思是我得到什么样的对象？它有什么属性？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:17:20.570

> 为什么我们不能简单地在我们想要的任何类中定义和声明方法，而不必实现 Comparable 接口？

在这种情况下，您希望排序方法如何工作？

能够对任何元素都相互可比的集合进行排序真的很方便——而接口就是表达这一点的方式。

> 它是否正确：`Comparable<Date> example = new Date<Date>();`

不，除非`Date`它本身是通用的。你*可以*写：

```
Comparable<Date> example = new Date(); 
```

...但这样做会很奇怪。通常`Comparable`由想要比较*现有*对象的代码使用 - 例如，它会从集合中获取值并将它们相互比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:30:04.457

> 为什么我们不能简单地在我们想要的任何类中定义和声明方法，而不必实现 Comparable 接口？

有些`Collections`喜欢`TreeMap`，需要比较两个对象，即使是简单的`add()`操作。这样的树需要在内部将“较小”的对象放入左侧树中，并在右侧子树中放入较大的对象（有点简化）。
因为这样的通用集合（如 TreeMap）被设计为适用于所有对象，所以对象必须知道如何执行 compareTo()。

HashMaps 等其他集合不需要对象实现 Comparable（它们使用`hashcode`()）

# c++ - C++ SDL Code::blocks：在头文件中声明指向全局可验证的指针，同时避免多重包含问题

> ID：14760170
> 
> 赞同：1
> 
> 时间：2013-02-07T20:15:42.090
> 
> 标签：c++, sdl, codeblocks

我正在从[http://lazyfoo.net](http://lazyfoo.net)修改游戏状态。让它作为单个 .cpp 工作；我已将所有代码分成多个文件，现在遇到了问题。我试图在 globals.h 文件中初始化**，**然后在**globals.cpp**文件中声明。其他**.cpp**文件需要访问**currentState**指针，而不会出现多个包含问题。

```
//globals.h
  cGameState *currentState;

//globals.cpp
  //Game state object
  cGameState *currentState = NULL; 
```

我尝试在头文件中的初始化之前添加 Extern，它会抛出一个不喜欢该类型的错误。有没有全局指针之类的东西？抱歉，如果我使用了错误的词汇，我远非专家，但我感觉如此接近；我仍然缺少一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:25:07.937

`extern`正是您在头文件中想要的，但它必须是小写 E。您的术语不太正确 - 您的头文件需要一个*声明*，而正是一个（感谢“一个定义规则”）.cpp 文件想要一个*定义*。

例如在头文件中：

```
//globals.h
extern cGameState *currentState; // declare currentState 
```

并在 .cpp 文件中：

```
// this makes the compiler check the types match
#include "globals.h" 
//globals.cpp
//Game state object
cGameState *currentState = NULL; 
```

就个人而言，尽管我希望避免在您的应用程序中出现大量全局状态。

# javascript - 粘性页脚和动画

> ID：14760171
> 
> 赞同：0
> 
> 时间：2013-02-07T20:15:43.160
> 
> 标签：javascript, jquery, footer, sticky

我在stackoverflow上找到了这个jsfiddle，但是这个人提供的解决方案非常跳跃。[http://jsfiddle.net/BramVanroy/ZVzEe/](http://jsfiddle.net/BramVanroy/ZVzEe/)我需要一些非常流畅的东西。

```
var secondary = $("#secondary-footer");

secondary.hide().addClass("fixed").fadeIn("fast");

$(window).scroll(function() {
if (secondary.offset().top >= ($(document).height() - 350)) {
    secondary.removeClass("fixed");
}
else if(secondary + ":not('.fixed')") {
    secondary.addClass("fixed");
}
}); 
```

我需要粘性页脚工作的方式是让它在页面底部将页脚显示为一个窄条，同时仍然滚动浏览内容。滚动条到达页面底部后，页脚将扩展高度。

提供的 jsfiddle 非常接近我需要它的工作方式，但我需要一些非常流畅的东西。还有一点需要注意的是，完全展开的页脚的高度不是固定的。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:43:11.457

[***演示***](http://jsfiddle.net/bWyF4/)

**jQuery**

```
var secondary = $("#secondary-footer");

secondary.hide().addClass("fixed").fadeIn("fast");

$(window).scroll(function() {
    var scrollBottom = $(window).scrollTop() + $(window).height();

    $("#content").css("bottom",secondary.height());

    var maxHeight = 350; // set maximum height of the footer here
    var minHeight = 120; // set the minimum height of the footer here

    secondary.height(maxHeight - ($(document).height() - scrollBottom));
    if (secondary.height() <= minHeight) secondary.height(minHeight);
}); 
```

**CSS**

```
#content {
    width: 90%;
    margin: 0 auto;
    padding: 0.5em;
    background: #dedede;
    position:relative; /* added this */
}
#secondary-footer {
    width: 100%;
    height: 120px;
    background: #666;
    position: fixed;
    bottom: 0;
    left: 0;
}

/* removed #secondary-footer.fixed  and merged content with #secondary-footer */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:47:03.780

Another solution: [http://jsfiddle.net/27rNu/](http://jsfiddle.net/27rNu/)

jQuery

```
$(document).ready(function() {
var secondary = $("#secondary-footer");
secondary.addClass("fixed");
var windowH = $('#wrapper').outerHeight(true);
$(window).scroll(function() {
    var scrollVal = $(this).scrollTop();
    if (scrollVal < (windowH - 350 * 2)) {
        secondary.addClass("fixed");
    }
    else {
        secondary.removeClass("fixed");
    }
}); 
```

});

I also added a "wrapper" div around the whole html.

# python - Twisted：使用 pyglet-twisted 时如何从 EndPoint 调用 Deferred

> ID：14760172
> 
> 赞同：1
> 
> 时间：2013-02-07T20:15:42.723
> 
> 标签：python, twisted, pyglet, twisted.internet, cocos2d-python

下面的代码取自 Twisted 关于 AMP 的文档（[链接](http://twistedmatrix.com/documents/current/core/howto/amp.html)）。当回调被添加到 d 时，会自动添加一个“协议”参数，并且在调用 reactor.run() 时会自动运行延迟。

```
def connect():
    endpoint = TCP4ClientEndpoint(reactor, "127.0.0.1", 8750)
    factory = Factory()
    factory.protocol = AMP
    return endpoint.connect(factory)

d = connect()
def connected(protocol):
    return protocol.callRemote(
        RegisterUser,
        username=u'alice'
d.addCallback(connected)

reactor.run() 
```

在我的代码中，一切都完全相同，除了我一直在使用 pyglet-twisted ( [link](http://code.google.com/p/pyglet-twisted/) ) 和 cocos2d，所以我不能调用 reactor.run() 因为反应器与应用程序同时启动。

如果我调用 reactor.run()，我会收到一条错误消息，指出反应器已经在运行。

如果我不这样做，deferred 似乎不会被调用。

我一直在尝试用 reactor.callLater、reactor.callWhenRunning 来调用它，但两者都需要一个参数。传递 None 不起作用。

所以我的问题是，我应该如何在不调用 reactor.run() 的情况下使其延迟运行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:57:26.003

经过更多研究，我发现没有调用`deferred`返回 的原因是 cocos2d 的错误。`endpoint.connect()`

在底部`cocos.director`， where`pyglet.app.event_loop`被分配来处理导演的事件`director.event = event_loop.event`。

这需要改为使用`pygletreactor`'s `eventloop`。所以上面的代码需要改成如下：

```
import pygletreactor
event_loop = pygletreactor.EventLoop()
director = Director()
director.event = event_loop.event 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:36:32.200

如果没有运行的反应器，很少有 Twisted 的 API 会成功。反应器负责*执行*I/O。您必须有一个正在运行的反应器才能建立连接（无论您使用的是端点对象还是其他 API）。

据我所知，pyglet 集成反应器不会自动启动。有些东西必须调用它的`run`方法。您的问题表明您没有调用它，所以我很好奇它*的名称是*什么。

当我修改您的示例以使其完整且可运行并添加错误报告时，如下所示：

```
from pygletreactor import install
install()

from twisted.internet import reactor
from twisted.internet.endpoints import TCP4ClientEndpoint
from twisted.internet.protocol import Factory
from twisted.protocols.amp import AMP
from twisted.python.log import err

def connect():
    endpoint = TCP4ClientEndpoint(reactor, "127.0.0.1", 8750)
    factory = Factory()
    factory.protocol = AMP
    return endpoint.connect(factory)

d = connect()
def connected(protocol):
    return protocol.callRemote(
        RegisterUser,
        username=u'alice')
d.addCallback(connected)
d.addErrback(err)

reactor.run() 
```

然后我得到了我期望的行为，即尝试连接然后失败（因为我没有在任何地方运行 AMP 服务器）：

```
Unhandled Error
Traceback (most recent call last):
Failure: twisted.internet.error.ConnectionRefusedError: Connection was refused by other side: 111: Connection refused. 
```

也许您可以将其与您的完整程序进行比较，并找到一个重要的区别。

# nuget - 如何在 Visual Studio 2010 中安装旧版本的 NuGet？

> ID：14760174
> 
> 赞同：0
> 
> 时间：2013-02-07T20:15:47.050
> 
> 标签：nuget, nugetgallery

如何在 vs2010 中安装旧版本的 NuGet？

不使用 NuGet 安装旧版本的其他东西，而是安装说 NuGet v1.5 而不是 NuGet v2.2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:46:05.193

可以从发布页面上的[codeplex](http://nuget.codeplex.com/releases)下载旧版本的 NuGet 。

例如，可以从 codeplex 下载[NuGet 1.5 ：](http://nuget.codeplex.com/releases/view/65353) [NuGet.Tools-1.5.vsix](http://nuget.codeplex.com/releases/view/65353)。

# java - Tomcat 连接池配置：数据源类型和“连接过多”错误

> ID：14760177
> 
> 赞同：7
> 
> 时间：2013-02-07T20:15:54.240
> 
> 标签：java, mysql, tomcat, database-connection, connection-pooling

我正在通过 JNDI 资源使用 tomcat 连接池。

在`context.xml`：

```
<Resource name="jdbc/mydb" auth="Container" type="javax.sql.DataSource"
          username="root" password="root" driverClassName="com.mysql.jdbc.Driver"
          maxActive="1000" maxIdle="100" maxWait="10000"
          url="jdbc:mysql://localhost:3306/mydatabase" 
          factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" /> 
```

在`web.xml`：

```
<resource-ref>
<description>DB Connection</description>
<res-ref-name>jdbc/mydb</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref> 
```

从我需要数据库连接的 java 类中，我进行以下查找：

```
Context initContext = new InitialContext();
DataSource ds = (DataSource)initContext.lookup("java:/comp/env/jdbc/mydb"); 
```

我的第一个疑问是 DataSource 类型。使用`javax.sql.DataSource`or是一样的`org.apache.tomcat.jdbc.pool.DataSource`吗？

此外，有时我会收到“连接太多”错误。我已经阅读了许多关于此的 stackoverflow 问题/答案，但我没有成功理解问题可能出在哪里。

我遵循了 tomcat 文档，并正确关闭了结果集、语句和连接。

**编辑**

我的tomcat版本是7.0.26。所以应该有一个错误（见informatik01用户建议的链接）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T01:47:47.973

如果您将 JDBC 资源放在 $CATALINA_HOME/conf/context.xml 中，它会为您部署的每个 webapp 加载资源。（这可能意味着大量的连接）如果您将该资源移动到您的 web 应用程序的 META-INF/context.xml，它只会在部署该特定 web 应用程序时加载。[http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html)

也可能是你的 maxActive 和 maxIdle 太多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:22:21.940

`javax.sql.DataSource`是一个接口，`org.apache.tomcat.jdbc.pool.DataSource`也是一个类。我不确定 tomcat 是否允许我们直接实例化`org.apache.tomcat.jdbc.pool.DataSource`. 如果是，您可以使用其中任何一种。

与连接相关的错误可能是由于

`maxActive="1000" maxIdle="100" maxWait="10000"`在你的 Tomcat 配置文件中。

将其设置为`maxActive="10" maxIdle="10" maxWait="10"`- 10 个活动连接，10 个空闲连接，最长等待时间为 10 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T20:07:08.660

确保没有资源泄漏：示例 java.sql.Connection not getting closed

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T21:25:25.687

You may need to increase the max connection on mysql , the default max is 151\.

# powershell - For循环模运算符

> ID：14760178
> 
> 赞同：2
> 
> 时间：2013-02-07T20:15:59.683
> 
> 标签：powershell, modulo

我明天要考试，其中一道练习题如下：

```
for ($i = 3; $i++; $i %= 9) { Write-Host $i } 
```

这个问题的答案应该是这条线的最小可能数字等于 4，最大数字等于 9。

但是，如果你问我，最高数字是 8 吗？因为当 $i 变为 9 时，计算结果为 0？

如果（显然）错了，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:20:35.340

它也会打印一个`9`。**[`For loop.`](http://en.wikipedia.org/wiki/For_loop)**.

```
for (INITIALIZATION; CONDITION; AFTERTHOUGHT) {..} 
```

`AFTERTHOUGHT`在循环**结束**时执行。因此，它将执行`Write-Host 9`然后执行`i = 9 % 9` *= 0*，此时，然后检查的条件变为 false。

* * *

此外：

`i++`后增量是条件检查显示 0 并退出循环的原因。如果它是 a `++i`，那里就会有一个无限循环。

# asp.net - .NET/html，选择 dropdown.ClientID 时元素不存在错误

> ID：14760184
> 
> 赞同：2
> 
> 时间：2013-02-07T20:16:17.877
> 
> 标签：asp.net, html

单击按钮时，我想获取下拉列表的值，但由于某种原因，当我进入代码时，它失败并出现错误“Exdd”在当前上下文中不存在。ExTypeDD 在我的列表视图中作为下拉列表，我只是想从中获取价值。服务器端正在生成此代码，而不是我的浏览器。

```
$('.Updt')
 .click(function() {

            var parent = $(this).parent().prev();

            var TypeNode = parent.children("#<%=Exdd.ClientID %>").first();

 <asp:ListView runat="server" id="ListView1" >
        <LayoutTemplate>
            <table id="tablesorter" style="border:solid 1px black;width:55%;">
                <thead>
                    <tr>
                        <th>
                            <a href="#">Address</a>
                         </th>                                                                                                            
                    </tr>
                </thead>
                <tbody>
                    <tr id="itemPlaceholder" runat="server" />
                </tbody>
                <tfoot>
                </tfoot>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                &nbsp;&nbsp;<select id="Exdd"
                             class="Nbr1" style="width: 90px" >
                            <option value=""><%# Eval("Type")%></option>
                            <option value="0">Home</option></select>
                </td>
    <td>
              <input type="button" id="btn_update" class="Updt" value="Update" />
    </td>
             </tr>
        </ItemTemplate>
    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:08:06.073

您在 ListView 中。你`ExTypeDD`有多少行。所以不能`ExTypeDD`在item模板之外成功引用（不止一个）

您可以尝试（将其包装在 a 中之后`$(document).ready`）

```
$('.Updt')
 .click(function() {
            var tr = $(this).closest('tr');

            var TypeNode = tr.find("select.Nbr1").first();
         //...
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:21:33.890

这是因为您试图将服务器端的 HTML 元素作为服务器端控件进行访问。您可以通过简单地像这样将`select`元素添加到服务器端控件中：`runat="server"`

```
<select id="ExTypeDD" runat="server" class="Nbr1" style="width:90px"> 
```

但是在那之后你仍然会遇到这个问题，虽然这个控件现在可以在服务器端访问，但它没有 ExTypeDD 的 id，因为它是在 ListView 的 ItemTemplate 中动态创建的，它为每个新创建的生成一个唯一的 ID 值控制 。您可以通过查看浏览器中呈现的页面上的源代码并检查选择元素上的 ID 值来验证这一点。

要在服务器端执行您尝试执行的操作，您需要执行以下操作：

将 onItemCreated 事件处理程序添加到您的 ListView：

```
<asp:ListView runat="server" id="ListView1" onItemCreated="ListView1ItemCreated"> 
```

替换这个：

```
<input type="button" id="btn_update" class="Updt" value="Update" /> 
```

有了这个：

```
<asp:button id="btn_update" text="Update" runat="server" /> 
```

将事件处理程序添加到后面的代码中：

```
protected void ListView1ItemCreated(object sender, ListViewItemEventArgs e){
   var myselect = (HtmlSelect)e.Item.FindControl("ExTypeDD");
   var mybutton = (Button)e.Item.FindControl("btn_update");
   mybutton.OnSubmit += (o,e) => {  
      // do something with myselect selected value
      var selectedvalue = myselect.Value;
   };
} 
```

**注意：上面的代码未经测试，可能无法编译，您需要进行必要的更正，但它应该为您提供解决问题的方法的想法。希望能帮助到你。**

# jquery - 动态项目符号列表

> ID：14760191
> 
> 赞同：1
> 
> 时间：2013-02-07T20:16:40.570
> 
> 标签：jquery

这就是我想要做的，但我是一个 jquery 菜鸟。

当页面加载时，我有 jquery 调用 `levelone.php`，它们打印类似的内容`BEACH{!}OFFICE{!}HOME{!}` 并创建我的第一个项目符号级别。

当点击一个子弹时，我怎么能调用 `leveltwo.php?lvlone=HOME`它来创建新的子弹，比如：`BED ROOM{!}KITCHEN{!}`等等

在新的子弹上也是 如此`levelthree.php?lvlone=HOME&lvltwo=KITCHEN`，它会用类似的东西创建新的子弹：`TABLE{!}CHAIR{!}`等等

到目前为止我的代码：

```
$(document).ready(function(){
    $.get("load_locations.php", function( my_var ) {
        var my_varspl = my_var.split('{!}');
        $('#myDiv').append("<ul id='newList'></ul>");
        for (var i = 0, e = my_varspl.length; i < e; i++) {
            if(my_varspl[i]!=''){
                $("#newList").append('<li>'+my_varspl[i]+'</li>');
            }
        }
     });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:40:03.633

您是否希望完全替换页面内容？或者只是将它们添加到页面中？如果您只想用新列表替换页面，只需将每个项目设置为链接。如果没有，以下应该有效：

```
<ul>
    <li id="home-wrap"><a href="" id="home" lvl="one">Home</a></li>
    ....
</ul>
<script language = "javascript">
//When the document is ready
$(document).ready(function() {
    //and someone clicks a link
    $("a").click(function(e) {
        //keep the page from reloading
        e.preventDefault();
        //get the id (in this case "home") of the clicked link
        var id = $(this).attr('id');
        //get the level of the clicked link
        var lvl = $(this).attr('lvl');
        //set the name of the space you want to use jQuery to load the new content in
        var wrapper = id + "-wrap";
        //load the page you want (in this case, pagename.php?lvlone=home) in the list item wrapper.
        $(wrapper).load("pagename.php?lvl" + lvl + "=" + id);
    });
});
</script> 
```

因此，如果您单击主页，它应该将 url "pagename.php?lvlone=home" 处的页面加载到您单击的 <li> 中。为了向原始列表添加第二个子列表，“pagename.php?lvlone=home”应该输出另一个无序列表。说得通？

# ruby-on-rails - 基于另一个字段的值的 Rails 字段验证

> ID：14760195
> 
> 赞同：0
> 
> 时间：2013-02-07T20:16:55.923
> 
> 标签：ruby-on-rails, single-table-inheritance

我需要验证字段（：discount）的值是字符串数组之一。:discount 字段也可以为空，除非 :type 字段为“FixedDeal” (STI)

验证：折扣，包含：{in：VALID_DISCOUNTS}，allow_blank：true 除非：type == 'FixedDeal'

上面的代码用于验证 :discount 的值，但即使类型为“FixedDeal”，也允许该字段为空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:18:54.390

在您的 FixedDeal 类上添加以下验证：

```
validates_presence_of :discount 
```

那应该对你有用。

# python - 如何在 Emacs 的 python-shell-send-buffer 上重新加载 python 模块？

> ID：14760196
> 
> 赞同：2
> 
> 时间：2013-02-07T20:16:56.880
> 
> 标签：python, emacs

当我使用`python-shell-send-buffer`(Cc Cc) 时，我可以在 python shell 中看到我的主缓冲区的变化。

但是，如果我的缓冲区已导入模块，则不会重新加载它们。如何修复？

例如：
**main.py：**

```
from functions import foo
print 'a' 
```

**函数.py：**

```
def foo():
    print 'bcdef' 
```

因此，如果我更改`foo()`并`python-shell-send-buffer`在 main.py 上运行-它给我的结果与`foo()`第一次读取 的相同

```
a
bcdef   # never changed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:20:41.903

如果你想这样做 - 使用 ipython。

创建配置“dev”（或其他）：

```
ipython profile create dev
[ProfileCreate] Generating default config file: u'/home/username/.config/ipython/profile_dev/ipython_config.py' 
```

并将这些行添加到“ipython_config.py”：

```
c.InteractiveShellApp.extensions = ['autoreload']
c.InteractiveShellApp.exec_lines = ['%autoreload 2'] 
```

然后在 Emacs 配置中为 python-mode 设置变量：

```
(setq
   python-shell-interpreter "ipython"
   python-shell-interpreter-args "--profile=dev"
) 
```

以这个配置启动的 IPython 将在您重新发送代码时重新加载模块。

# python - 基于像素在python中格式化字符串

> ID：14760197
> 
> 赞同：1
> 
> 时间：2013-02-07T20:17:05.470
> 
> 标签：python

我正在用python读取一个xml文件，然后在web gui上显示它阅读代码非常简单

```
def home ():
    file = "sample.xml"
    contents = open(file).read()
    contents = contents.decode('utf-8') 
```

然后有一大堆由html和css组成的前端代码......

但是...显示它..我希望每行不超过 200px？

即在n个像素之后插入一个换行符（？？）..

我怎么能在python中做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:40:35.807

如果您有权访问您正在使用的字体文件，则可以使用像 freetype 这样的库来加载字体字形数据。这允许您计算文本字符串的宽度。

在 python 中有几个资源可以做到这一点，[freetype-py](https://github.com/davidcox/freetype-py)就是其中之一。它包含一些可供查看的示例。另请参阅[freetype lib](http://www.freetype.org/freetype2/)以获取文档。

# python - Pyramid 的 Cheetah 模板绑定是什么样的？

> ID：14760198
> 
> 赞同：2
> 
> 时间：2013-02-07T20:17:11.010
> 
> 标签：python, pyramid, cheetah

我找到[了这个话题](https://stackoverflow.com/questions/8169606/how-to-change-the-template-engine-in-pyramid)，它谈到了 Pystache，我在 Github 上看到了一些其他引擎的绑定，但我对如何让 Cheetah 与 Pyramid 一起工作感到困惑。任何指针或代码可能是什么样的？

# java - 将动态属性映射读入 Spring 托管 bean

> ID：14760200
> 
> 赞同：10
> 
> 时间：2013-02-07T20:17:24.037
> 
> 标签：java, spring, dynamic, map, javabeans

我有一个这样的属性文件：

```
my.properties file:
app.One.id=1
app.One.val=60

app.Two.id=5
app.Two.val=75 
```

我将这些值读入 Spring 配置文件中 bean 的 map 属性中，如下所示：

```
spring-config.xml:
<bean id="myBean" class="myClass" scope="singleton">
    <property name="myMap">
        <map>
            <entry key="${app.One.id}" value="${app.One.val}"/>
            <entry key="${app.Two.id}" value="${app.Two.val}"/>
        </map>
    </property>
</bean> 
```

这样，如果我向属性文件添加新的 id/val，我必须在 config xml 中添加一行，以便在 myMap.xml 中拥有新的 id/val。

我的问题是，有没有办法在 spring 配置文件中指定 key-val 对，以便 xml 中定义的 key-val 的数量可以找出属性文件中的项目并创建一个映射。基本上我想在不同的环境中使用这个 xml 文件，我们在属性文件中使用不同数量的键值项。我只是不想更改每个环境中的 xml 文件来读取所有这些值。

如果您需要任何其他详细信息，请告诉我。任何想法/意见表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T07:12:12.140

这是通过 Spring EL 和自定义处理完成的。

尝试一下对我来说很有趣。有用 ：）

**应用程序.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
    ">

    <util:properties id="values" location="values.properties" />

    <bean id="hello" class="my.Hello">
        <property name="map"
            value="#{T(my.Utils).propsToMap(values, '^(app\.\w*)\.id$', '{idGroup}.val')}" />
    </bean>

</beans> 
```

**实用程序.java**

```
package my;

import java.util.Enumeration;
import java.util.HashMap;
import java.util.Map;
import java.util.Properties;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Utils {

    public static Map<String, String> propsToMap(Properties props,
            String idPatternString, String valuePatternString) {

        Map<String, String> map = new HashMap<String, String>();

        Pattern idPattern = Pattern.compile(idPatternString);

        for (Enumeration<?> en = props.propertyNames(); en.hasMoreElements();) {
            String key = (String) en.nextElement();
            String mapKey = (String) props.getProperty(key);

            if (mapKey != null) {
                Matcher idMatcher = idPattern.matcher(key);
                if (idMatcher.matches()) {

                    String valueName = valuePatternString.replace("{idGroup}",
                            idMatcher.group(1));
                    String mapValue = props.getProperty(valueName);

                    if (mapValue != null) {
                        map.put(mapKey, mapValue);
                    }
                }
            }
        }

        return map;
    }
} 
```

**你好.java**

```
package my;

import java.util.Map;

public class Hello {

    private Map<String, String> map;

    public Map<String, String> getMap() {
        return map;
    }

    public void setMap(Map<String, String> map) {
        this.map = map;
    }
} 
```

**值.属性**

```
app.One.id=1
app.One.val=60

app.Two.id=5
app.Two.val=75 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T15:00:22.153

也许我没有完全理解这里的问题......
简化方法怎么样？

```
my.properties file:
1=60
5=75 
```

应用程序上下文

```
<bean id="myProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="locations">
        <list>
        <value>classpath: my.properties</value>
        </list>
    </property>
</bean> 
<bean id="myClass" class="com.pakage.MyClass">
    <property name="myMap" ref=" myProperties"/>
</bean> 
```

爪哇豆

```
public class MyClass {
    private Map<String , String> myMap;

    public void setMyMap(Map<String, String> myMap) {
        this.myMap = myMap;
    }

    public Map<String , String> getMyMap(){
        return myMap;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:19:46.840

这是一个经典的环境问题。

有两种方法可以做到这一点：

1.  在适当的 .properties 文件末尾添加环境字符串；在启动时将该值传递给应用程序，让 Spring 选择正确的值。
2.  将这些动态属性放入数据库并在启动时查询它们。数据库的 JNDI 将选择正确的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T19:46:19.513

我没有找到解决此问题的理想方法，将动态地图属性读入弹簧配置信息。使用 DB 也不是我们的选择。这是我发现的最佳选择：

*   在属性文件中使用标准格式的映射键/值对，例如：key1 | 值 1，键 2 | val2，键 3 | val3, ..., 键 | valn

*   将其读取到配置 bean 中的 String 属性或 List 属性，如下所示：[Use String to List](https://stackoverflow.com/questions/5274362/reading-a-dynamic-property-list-into-a-spring-managed-bean)

*   让注入的 java 类在 setter 中将项目拆分为映射。

我将把它标记为答案。如果其他人有更好的方法来做到这一点，请将其注释掉，我将对其进行更改以回答。

# .net - 比较小数的最佳方法是什么？

> ID：14760203
> 
> 赞同：4
> 
> 时间：2013-02-07T20:17:33.240
> 
> 标签：.net, compare, int, floating-accuracy, fuzzy-comparison

比较小数的最佳方法是什么？

假设我有 2 个值，比如`3.45`and `3.44`，可靠比较它们的最佳方法是什么？

我正在考虑将所有数字存储为`345`，`344`以便我只比较整数，并且只向用户显示带小数点的格式化数字。

另一种解决方案是使用自定义函数来测试差异，当差异小于数字时`0.01`，数字应该相等。

还有哪些其他可能的解决方案（更好的解决方案）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:23:05.200

最常见的技术是使用 epsilon（您描述的第二件事）。但是，制作一个适用于所有输入数字的通用 epsilon 可能非常困难/不可能。如果您正在处理 0.00001 左右的数字或 1000000000 左右的数字，那么 0.01 的 epsilon 对您来说可能会很糟糕。阅读[本文](http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/)以获得对 epsilon 技术的全面分析。

您描述的第一个解决方案在时间数学中非常常见。一切都以整数刻度表示。刻度可以代表 1 秒或 1 毫秒，或任何你想要的。然后，您可以根据需要将它们转换为另一个单位的小数，或进行比较。唯一的事情是您确实需要选择一个刻度大小，并且没有任何东西可以表示小于 1 个刻度单位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:45:34.977

这也称为“模糊比较”，允许两个值略有不同（容差，也称为“epsilon”）。通常，这样的 epsilon 值约为`1E-6`，`1E-10`但您会发现更小或更大的值更适合的应用程序：在您的示例中，epsilon 不应小于`1E-2 = 0.01`。

一旦找到适合您需要的 epsilon 值，您就可以编写以下一组比较函数，如下所示（用 C 和 C++ 的公共子集编写；它们应该适用于几乎所有面向对象/过程语言，只需稍作更改） ：

```
const double fuzzyEpsilon = 1E-6;  // just an example!

bool fuzzyEqual(double a, double b) {
    return (abs(a - b) <= fuzzyEpsilon);
}

bool fuzzyUnqual(double a, double b) {
    return (abs(a - b) > fuzzyEpsilon);
}

int fuzzyCompare(double a, double b) {
    return ((a - b) > fuzzyEpsilon) - ((b - a) > fuzzyEpsilon);
} 
```

第三个函数分别通过模糊比较（类似于）返回`-1`, `0`, `1`if `a < b`,`a == b`的代码。该实现假定编程语言将布尔值隐式转换为(false) 和(true)。如果没有，请使用以下内容：`a > b``strcmp``0``1`

```
int fuzzyCompare(double a, double b) {
    return (a - b) > fuzzyEpsilon ? 1 :
          ((b - a) > fuzzyEpsilon ? -1 : 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:46:29.620

用二进制实数表示十进制值是近似的，导致各种奇怪的行为。精度通常会随着进一步的算术而降低，尤其是附近值的减法。但是，可以通过在比较它们之前四舍五入到最小位数来清理单个值以进行比较。例如 V = round (V * 1e14)/1e14 将任何值 V 舍入为 14 位十进制数字。可以自信地比较两个这样的值是否相等。64 位实数具有 15.65 小数精度，因此四舍五入到 14 位（或更少）提供了一些错误空间。

是的，乘法、舍入（）和除法序列很昂贵。然而，十进制是一种人机界面，通常用于不能容忍“有趣”算术的货币应用程序。犯错通常比缓慢更糟糕。

# sublimetext2 - sublime text 2 浏览器构建系统快捷方式

> ID：14760205
> 
> 赞同：1
> 
> 时间：2013-02-07T20:17:47.043
> 
> 标签：sublimetext2

我是 Windows 和 Linux 用户。我找到了解决方案

```
{
"cmd": ["PATH_TO_YOUR_CHROME", "$file"]
} 
```

我的问题是如何定义快捷方式，将其更改为其他内容而不是`Ctrl+B`？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:22:59.220

在 Sublime 中为此设置用户键绑定。请参阅[此处](http://docs.sublimetext.info/en/latest/customization/key_bindings.html)了解如何操作。

转到 'Key Bindings - Default' 搜索 '"build"'，你会发现：

```
{ "keys": ["f7"], "command": "build" },
{ "keys": ["ctrl+b"], "command": "build" }, 
```

将此复制到“键绑定 - 用户”，然后粘贴。现在您可以将快捷方式设置为您喜欢的任何内容。例如。

```
{ "keys": ["f1"], "command": "build" },
{ "keys": ["ctrl+z"], "command": "build" }, 
```

# ios - Xcode 4.6 中的“po”命令第一次非常慢

> ID：14760206
> 
> 赞同：35
> 
> 时间：2013-02-07T20:17:47.380
> 
> 标签：ios, xcode, xcode4.6

我升级到 Xcode 4.6，每当我调试并第一次执行“po”来检查对象时，调试器需要大约 1 分钟才能返回。之后，每个“po”命令都会像往常一样快速运行。

你们也看到这个了吗？有什么修复吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:31:26.450

在 Xcode 中升级到 4.6.2 为我解决了这个问题

# java - Robocode：如何以编程方式编译机器人？

> ID：14760208
> 
> 赞同：0
> 
> 时间：2013-02-07T20:17:53.760
> 
> 标签：java, compilation, robot, robocode

我创建了一个生成 Robocode 机器人的程序，将它们保存为通常的 .java 文件。我遇到的问题是编译它们以用于战斗！我需要在代码中自动执行此操作，但无法完全解决。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:06:59.583

我为此使用的解决方案是运行操作系统命令以使用 javac 编译生成的 java 文件。

# android - 活动没有改变 - 崩溃

> ID：14760209
> 
> 赞同：-2
> 
> 时间：2013-02-07T20:17:56.780
> 
> 标签：android, mobile, error-handling

尝试更改活动时出现错误。它曾经工作，但我不知道发生了什么。

我查看了第 25 行，但看不出有什么问题。难道我做错了什么？

```
02-07 20:05:02.414: E/AndroidRuntime(1278): FATAL EXCEPTION: Thread-105
02-07 20:05:02.414: E/AndroidRuntime(1278): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.MainActivity }
02-07 20:05:02.414: E/AndroidRuntime(1278):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)
02-07 20:05:02.414: E/AndroidRuntime(1278):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
02-07 20:05:02.414: E/AndroidRuntime(1278):     at android.app.Activity.startActivityForResult(Activity.java:3370)
02-07 20:05:02.414: E/AndroidRuntime(1278):     at android.app.Activity.startActivityForResult(Activity.java:3331)
02-07 20:05:02.414: E/AndroidRuntime(1278):     at android.app.Activity.startActivity(Activity.java:3566)
02-07 20:05:02.414: E/AndroidRuntime(1278):     at android.app.Activity.startActivity(Activity.java:3534)
02-07 20:05:02.414: E/AndroidRuntime(1278):     at com.example.quizapp.Splash$1.run(Splash.java:25) 
```

这是我的 Splash.java 类：

```
package com.example.quizapp;

import com.example.quizapp.R;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

    Thread t1 = new Thread() {
        public void run() {
            try {
                sleep(3000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                Intent openMainActivity = new Intent(
                        "android.intent.action.MainActivity");
                startActivity(openMainActivity);
            }
        }
    };
    t1.start();
    }

    @Override
    protected void onPause() {
        super.onPause();
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:21:35.817

尝试更改此代码

```
Intent openMainActivity = new Intent(
                        "android.intent.action.MainActivity"); 
```

有了这个

```
Intent openMainActivity = new Intent(Splash.this, MainActivity.class); 
```

还要确保您已在清单文件中声明您的 MainActivity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:22:00.497

```
package com.example.quizapp; 
```

这是你的包裹。

你需要引用你的整个类+包名：

```
 Intent openMainActivity = new Intent(
                        "com.example.quizapp.MainActivity"); 
```

# java - 在 Mac 上使用 Java Runtime.getRuntime().exec 执行终端命令时出现权限被拒绝异常

> ID：14760211
> 
> 赞同：0
> 
> 时间：2013-02-07T20:18:09.493
> 
> 标签：java, macos, exception, permission-denied

我正在尝试使用 启动终端并自动运行命令`Runtime.getRuntime().exec()`，但它给了我以下异常：

```
java.io.IOException: Cannot run program "/Applications/Utilities": error=13, Permission denied 
```

我找到了终端应用程序并将权限更改为，`read&write`因为我有管理员帐户，但它仍然给了我同样的例外。

我尝试使用相同的方式在我的 Mac 上打开其他文档，它显示有相同的异常。有没有其他方法可以在运行时在终端上执行命令？

这是我的代码：

```
import java.io.IOException;

public class OpenTerminal {

    public static void main(String[] args) {

        OpenTerminal ot = new OpenTerminal();
        try {
            Runtime.getRuntime().exec("/Applications/Utilities open - a Terminal");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:20:33.043

/Applications/Utilities 是一个目录。你不能执行它。

# php - 用短语号替换字符串中的数字

> ID：14760212
> 
> 赞同：0
> 
> 时间：2013-02-07T20:18:10.073
> 
> 标签：php, regex, string, preg-replace

在 PHP 中，我有一个字符串，其值类似于`1 OR 2`或可能`1 AND (20 OR 3)`。我想用一个后跟数字的短语替换这些数字，以产生类似的`condition1`含义：

`1 OR 2`=>`condition1 OR condition2`

`1 AND (20 OR 3)`=>`condition1 AND (condition20 OR condition3)`

我想我可以使用 preg_replace 来做到这一点，但我不知道怎么做。我很难在更换期间保留数字的价值。

如果它更容易，我也会接受 javascript 中的答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:20:09.850

如果运算符的参数是字符串中唯一的数字，您可以执行以下操作：

```
$new = preg_replace( '/(\d+)/', 'condition$1', $input); 
```

这匹配任何连续的数字，并将它们捕获到一个捕获组中，我们稍后在替换中将其引用为`$1`.

您可以从此[演示](http://viper-7.com/I1ycTe)中看到，对于您的测试用例，输出：

```
condition1 OR condition2
condition1 AND (condition20 OR condition3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:22:10.643

你可以使用 str_replace($search, $replace, $string)

```
$search can be array whatever you want to replace
$replace can alse be an array wherever you want to replace in a string
$string is a string where you want to change 
```

它是您的问题的解决方案还是您想要其他东西？

# php - 使用 DEFINE 变量时 Prestashop 中的翻译

> ID：14760217
> 
> 赞同：0
> 
> 时间：2013-02-07T20:18:29.407
> 
> 标签：php, translation, prestashop

例如，当我定义define(MYTEXT, 'My Text') 并在Prestashop 模块$this->l(MYTEXT) 中使用它时，它工作正常（因此我可以在单独的包含文件中分隔大块文本）。

但是，当我将翻译（工具）用于另一种语言时，使用 DEFINE 变量的每个此类文本都不再显示了吗？

所以我不知道将这些翻译成另一种语言，也许无法识别带有 md5 编码的结构......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:15:19.703

我不确定您为什么要使用文本翻译的定义？但这会使事情变得更加复杂。只需将文本放在模块中

```
$this->l('Your text here'); 
```

就是这样，您可以将该文本翻译成任意多种语言。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T07:28:23.407

这是中的“l”函数`classes/module/Module.php`

```
abstract class ModuleCore
{
    public function l($string, $specific = false)
    {
       ............
    }
} 
```

所以子类扩展自`ModuleCore`可以使用`l`翻译文本的功能。在您的情况下，您应该在模块类中使用函数`$this->('your text')`。

# java - Guice AssistedInject 不会注入工厂

> ID：14760219
> 
> 赞同：1
> 
> 时间：2013-02-07T20:18:34.610
> 
> 标签：java, nullpointerexception, guice, factory, assisted-inject

我正在尝试使用 Guice 3.0 `AssistedInject`，它不会实例化工厂。

SSCCE 代码：

### 家长班

```
public class ParentClass() {
  @Inject private MyFactory myFactory;
  private final Foo foo;
  private final Bar bar;
  public ParentClass() {
    if(myFactory == null) System.err.println("Error: I should have injected by now!");
    foo = myFactory.create(new Map<String, Object>());
    // etc.
  }
} 
```

### 工厂接口

```
public interface MyFactory {
  Foo create(Map<String, Object> mapA);
  Bar create(Map<String, Object> mapB, Map<String, Object> mapC);
} 
```

### 模块

```
public class ParentModule extends AbstractModule {
  @Override
  protected void configure() {
    install(new FactoryModuleBuilder()
        .implement(Foo.class, FooImpl.class)
        .implement(Bar.class, BarImpl.class)
        .build(MyFactory.class));
  } 
```

### FooImpl

```
public class FooImpl implements Foo {
  private final Map<String, Object> mapA;
  @AssistedInject
  public FooImpl(@Assisted Map<String, Object> mapA) {
    this.mapA = mapA;
  }
} 
```

`BarImpl`非常相似`FooImpl`。这里出了什么问题？另请注意，我尝试了两者`@AssistedInject`和`@Inject`这里，两者都导致错误。

输出：

```
Error: I should have injected by now!
Exception in thread "main" com.google.inject.ProvisionException: Guice provision errors:

1) Error injecting constructor, java.lang.NullPointerException
  at ParentClass.<init>(ParentClass.java:7)
  while locating com.my.package.ParentClass

1 error
        at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:987)
        at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1013)
        at com.my.package.ParentMain.main(ParentMain.java:16)
Caused by: java.lang.NullPointerException
        at com.my.package.ParentClass.<init>(ParentClass.java:9)
        at com.my.package.ParentClass$$FastClassByGuice$$d4b3063a.newInstance(<generated>)
        at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)
        ... 8 more 
```

请注意，第 9 行是第一次调用`myFactory.create()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T20:45:17.383

根据 Guice 的[javadoc](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Inject.html)，字段注入是***在***构造函数注入之后执行的。

我假设您的`ParentClass`实例是由 Guice 创建的。当你`ParentClass`的构造函数被执行时，它的`myFactory`字段还没有被注入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T20:49:15.500

两件事情。要在构造函数中使用注入，必须使用构造函数注入：

```
public class ParentClass {

    private final Foo foo;
    private final Bar bar;

    @Inject
    public ParentClass(MyFactory myFactory) {
        if(myFactory == null) System.err.println("Error: I should have injected by now!");
        this.foo = myFactory.create(new HashMap<String, Object>());
        this.bar = myFactory.create(new HashMap<String, Object>(), new HashMap<String, Object>());
    }
} 
```

另外，由于你的工厂有两个相同类型的参数，你需要给它们命名：

```
public interface MyFactory {
    Foo create(Map<String, Object> mapA);
    Bar create(@Assisted("B") Map<String, Object> mapB, @Assisted("C") Map<String, Object> mapC);
} 
```

和

```
public class BarImpl implements Bar {

    private final Map<String, Object> mapA;
    private final Map<String, Object> mapB;

    @AssistedInject
    public BarImpl(@Assisted("B") Map<String, Object> mapA, @Assisted("C")  Map<String, Object> mapB) {
        this.mapA = mapA;
        this.mapB =mapB;
    }
} 
```

# git - 不同网络上 2 个存储库的增量同步

> ID：14760221
> 
> 赞同：1
> 
> 时间：2013-02-07T20:18:37.433
> 
> 标签：git, version-control

在我的设置中，我有一个正在处理的 Git 存储库。在另一个网络上（无法访问我的主网络），我有另一个 Git 存储库，它是只读的，我想与主存储库保持同步。我想偶尔这样做，以确保关闭的存储库与主存储库是最新的。我还想避免每次要更新已关闭的存储库时都必须发送存储库的完整克隆。

以前，我会使用 Subversion 的 svnadmin dump 和 restore 命令来对已关闭的存储库进行增量更新，但不确定如何使用 Git 执行此操作？

是否有允许我执行此操作的 Git 命令，或者理想情况下是 Git UI？

Git 修补是执行此操作的首选方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:18:56.900

我怀疑在你的情况下，我只是偶尔将我的笔记本电脑连接到“其他”网络并从我的本地克隆推送分支。但是，您可能想查看[git bundle](http://www.kernel.org/pub/software/scm/git/docs/git-bundle.html)，它基本上允许通过sneaker-net 进行推/拉。您可以创建一个包含一组提交的捆绑文件（例如：）`git bundle create update.bundle last-update-tag HEAD`，然后将此捆绑包带到您的非联网设备，然后您可以拉取它（`git pull update.bundle`）。对于 USB 记忆棒传输非常有用。

# php - 使用表单更新已完成的数据库条目？

> ID：14760226
> 
> 赞同：0
> 
> 时间：2013-02-07T20:18:57.247
> 
> 标签：php, html, mysql

我有一个包含下拉框以及文本字段和复选框的表单。我想要做的是，当用户进入此页面并且地址栏显示 /updatephoneform.php?id=1 时，表单会显示 id1（我的数据库中的电话 ID）的信息，因此可以编辑和更新。我将如何修改我的表单来做到这一点？变量和形式如下：

变量

```
$ManufacturerID = $row->ManufacturerID;
$Model = $row->Model;
$OSID = $row->OSID;
$Description = $row->Description;
$ScreenSize = $row->ScreenSize;
$Price = $row->Price;
$StockQuantity = $row->StockQuantity;
$StorageSize = $row->StorageSize;
$thumb= $row->ThumbImg;
$large= $row->LargeImg; 
```

形式

```
<h1>Update an existing phone</h1>
<form action="updatephone.php" method="post" enctype="multipart/form-data">
<p>Brand: <select name="ManufacturerID">
<option value="1">Apple</option>
<option value="2">LG</option>
<option value="3">BlackBerry</option>
<option value="4">HTC</option>
<option value="5">Nokia</option>
<option value="6">Samsung</option>
<option value="7">Sony</option>
<option value="8">Huawei</option>
<option value="9">Motorola</option>
</select>

<p>Model: <input type="text" name="Model"></p>
<p>Operating System: <select name="OSID">
<option value="1">iOS</option>
<option value="2">Android</option>
<option value="3">BlackBerry</option>
<option value="4">Windows Phone 8</option></p>
</select>

<p>Description: <input type="text" name="Description"></p>
<p>Screen Size (inches): <input type="text" name="ScreenSize"></p>
<p>Price: &pound;<input type="text" name="Price"></p>
<p>Stock Quantity: <input type="text" name="StockQuantity"></p>
<p>Storage Size: <input type="text" name="StorageSize"></p>
<p>Large Image(340x340):<input type="text" name="LargeImg"></p>
<p>Thumbnail(100x100):<input type="text" name="ThumbImg"></p>
<p>Flagged?: <input type="checkbox" name="IsFlagged"></p>
<input type="submit" value"Submit">
</form> 
```

谢谢你。

**编辑**：我得到了表格以提取我想要编辑的电话形式的值，这很好，但我希望表格中的“大图像（340x340）”和“缩略图（100x100）”文本字段显示手机图像的文件名（如果有）。图像被上传到服务器，大图像和缩略图的文件名（即 iphone5.jpg）被插入到名为 LargeImg 和 ThumbImg 的字段中。我怎样才能让它做到这一点？

另外，当我去编辑一些东西并提交表单时，我得到了错误：

**注意：未定义的变量：第 51 行的 PhoneID** 下面是第 32 到 51 行，第 51 行是 '$sql =' 部分

```
$ManufacturerID = $_POST['ManufacturerID'];
$Model = $_POST['Model'];
$OSID = $_POST['OSID'];
$Description = $_POST['Description'];
$ScreenSize = $_POST['ScreenSize'];
$Price = $_POST['Price'];
$StockQuantity = $_POST['StockQuantity'];
$StorageSize = $_POST['StorageSize'];
$thumb= $_POST['ThumbImg'];
$large= $_POST['LargeImg'];
if (!isset($IsFlagged))
{
$IsFlagged= 0;
}
else
{
    $IsFlagged = $_POST['IsFlagged'];
}

$sql = "UPDATE phones SET ManufacturerID='$ManufacturerID', Model='$Model', OSID='$OSID', Description='$Description', ScreenSize='$ScreenSize', Price='$Price', StockQuantity='$StockQuantity', StorageSize='$StorageSize', ThumbImg='$thumb', LargeImg='$large', IsFlagged='$IsFlagged' WHERE PhoneID='$PhoneID' "; 
```

我不确定问题是什么。例如，如果未选中该复选框或在文本框中未输入图像文件名，我还需要阻止它引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:22:23.980

```
<option value="1" 
    <? if($varForThisSelect == 'Apple') echo "selected = 'selected'" ?>>
Apple
</option> 
```

您需要将该 PHP 添加到每个选项中。可能有更好的方法（更少的代码行），但这是我过去所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:23:23.150

基本上，您要做的是向`<input>`标签添加一个值，这将导致输入预填充该值中的任何内容。在您的情况下，您将对`<input>`标签执行以下操作：

```
<p>Description: <input type="text" name="Description" 
        value="<?php echo htmlspecialchars($Description);?>"></p> 
```

对于`<select>`标签，您将检查每个选项中的值是否等于您的变量，然后显示`selected="selected"`每个选项。例如：

```
<option value="1" <?php if($ManufacturerID == 1) echo 'selected="selected"';?>>Apple</option> 
```

如果您在服务器上启用了 PHP 短标签，您可以将上面的行稍微压缩一下，使其成为三元操作。但请记住，并非所有服务器都启用了短标签。

```
<option value="1" <?= $ManufacturerID == 1 ? 'selected="selected"' : ''?>>Apple</option> 
```

# wcf - 如何增加绑定上的 SendTimout 值？

> ID：14760228
> 
> 赞同：1
> 
> 时间：2013-02-07T20:19:11.347
> 
> 标签：wcf

当我在客户端上执行命令时，它会等待响应。我知道这个命令需要很长时间，但默认超时似乎是 1 分钟左右。每次我从客户端调用命令时，我都会收到此错误：

```
System.TimeoutException was unhandled
  HResult=-2146233083
  Message=The request channel timed out while waiting for a reply after 00:00:59.9809981\. Increase the timeout value passed to the call to Request or increase the SendTimeout value on the Binding. The time allotted to this operation may have been a portion of a longer timeout.
  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
       at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at Client.CommandServices.CommandService.Execute(Object command)
       at Client.CommandServices.CommandServiceClient.Execute(Object command) in c:\TFS\Solid\Client\Service References\CommandServices\Reference.cs:line 58
       at Client.Code.WcfServiceCommandHandlerProxy`1.Handle(TCommand command) in c:\TFS\Solid\Client\Code\WcfServiceCommandHandlerProxy.cs:line 13
       at Client.Controllers.CommandExampleController.ExecuteGenericCommand() in c:\TFS\Solid\Client\Controllers\CommandExampleController.cs:line 62
       at Client.Program.Main(String[] args) in c:\TFS\Solid\Client\Program.cs:line 25
  InnerException: System.TimeoutException
       HResult=-2146233083
       Message=The HTTP request to 'http://localhost:9999/CommandService.svc' has exceeded the allotted timeout of 00:00:59.9870000\. The time allotted to this operation may have been a portion of a longer timeout.
       Source=System.ServiceModel
       StackTrace:
            at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
            at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
            at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
       InnerException: System.Net.WebException
            HResult=-2146233079
            Message=The operation has timed out
            Source=System
            StackTrace:
                 at System.Net.HttpWebRequest.GetResponse()
                 at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
            InnerException: 

"The HTTP request to 'http://localhost:9999/CommandService.svc' has exceeded the allotted timeout of 00:00:59.9870000\. The time allotted to this operation may have been a portion of a longer timeout."}

The HTTP request to 'http://localhost:9999/CommandService.svc' has exceeded the allotted timeout of 00:00:59.9870000\. The time allotted to this operation may have been a portion of a longer timeout. 
```

这是客户端中的 app.config。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_CommandService" />
                <binding name="BasicHttpBinding_QueryService" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:9999/CommandService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_CommandService"
                contract="CommandServices.CommandService" name="BasicHttpBinding_CommandService" />
            <endpoint address="http://localhost:9999/QueryService.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_QueryService" contract="QueryServices.QueryService"
                name="BasicHttpBinding_QueryService"/>
        </client>
    </system.serviceModel>
</configuration> 
```

...这是 WCF 服务的 web.config。

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
  <connectionStrings>
    <add name="MainframeEntities" connectionString="metadata=res://*/MainframeEntities.csdl|res://*/MainframeEntities.ssdl|res://*/MainframeEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=IT-DEV;initial catalog=Mainframe;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>

</configuration> 
```

我不确定在哪里更改时间。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:21:14.500

social.msdn.microsoft.com/Forums/en-US/wcf/thread/84551e45-19a2-4d0d-bcc0-516a4041943d/
[http://blogs.msdn.com/b/hongmeig/archive/2010/03/06/超时-in-wcf-and-their-default-values.aspx](http://blogs.msdn.com/b/hongmeig/archive/2010/03/06/timeouts-in-wcf-and-their-default-values.aspx)

```
<wsHttpBinding>

 <binding name="httpBinding"

 closeTimeout="00:05:00" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T07:17:14.870

检查您的接收超时

一个 TimeSpan 值，它指定为完成接收操作提供的时间间隔。此值应大于或等于零。默认值为 00:10:00。

# android - Android 和签名 .apk 文件问题

> ID：14760233
> 
> 赞同：0
> 
> 时间：2013-02-07T20:19:29.913
> 
> 标签：android, code-signing

好的，所以我首先执行以下操作：

```
C:\Program Files\Java\jre7\bin>
keytool -genkey -v -keystore -keystore.mycompany 
-alias keystore_mycompany_android -keyalg rsa -validity 10000 
```

（我填写密码、组织、城市和国家）

然后我执行以下操作：

```
D:\DevTools\SunJava\1_6_0__19\bin>
jarsigner -verbose -keystore "C:\Program Files\Java\jre7\lib\security\cacerts" 
"W:\eclipse-android-keytools\apk\myapp.apk" keystore_mycompany_android 
```

然后我输入相同的密码，但得到错误：

> jarsigner 错误：java.lang.RuntimeException：密钥库加载：密钥库被篡改，或密码不正确

我做错了什么明显的错误吗？（是的，我应该更新 SDK）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:29:06.943

如果您的项目在 Eclipse 中，您可以使用命令：文件 -> 导出 -> Android -> 导出 Android 应用程序。然后你会看到简单的创建者来签署你导出的 apk，如果你还没有它，你也可以在那里生成密钥来签署你的应用程序。

# java - JBoss 7.1.x 不会在 Fedora 18 中启动

> ID：14760235
> 
> 赞同：0
> 
> 时间：2013-02-07T20:19:33.967
> 
> 标签：java, jboss, fedora

这是一个问题 - JBoss 在启动时抛出以下错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at org.jboss.as.server.Main.main(Main.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.modules.Module.run(Module.java:260)
    at org.jboss.modules.Main.main(Main.java:291)
Caused by: java.lang.IllegalStateException: The LogManager was not properly installed (you must set the "java.util.logging.manager" system property to "org.jboss.logmanager.LogManager")
    at org.jboss.logmanager.Logger.getLogger(Logger.java:60)
    at org.jboss.logmanager.log4j.BridgeRepositorySelector.<clinit>(BridgeRepositorySelector.java:42) 
```

这是一个老问题，我相信不久前就[在这里](https://issues.jboss.org/browse/JBAS-7427)解决了。这里的区别是我在启动时没有 jmx 参数。

我注意到的事情：

*   在 Oracle 和 OpenJDK jdk 中都会弹出相同的错误
*   [按照此处](https://stackoverflow.com/questions/12531004/cannot-start-jboss-7-0-2-on-windows)的建议将参数 -Djava.util.logging.manager=org.jboss.logmanager.LogManager 添加到 /bin/standalone.conf只会产生相同的错误（而不是预期的 ClassNotFound）
*   我还尝试将 jboss-logmanager-xxx.jar 移动到 /bin 目录但没有运气

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:44:26.857

当我回到 Oracle 的 JDK 并在替代品中更改了这个新的 jdk 时，问题就解决了。

# ruby-on-rails - rails - png 文件的 assets_host 路由问题

> ID：14760236
> 
> 赞同：0
> 
> 时间：2013-02-07T20:19:35.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes, asset-pipeline

我有一个生成 .png 文件的 QRCode 生成器。

二维码生成器的路径是带有 PNG mime 类型的 SHOW 方法。

我正在使用 assets_sync ：

```
# Asset Sync
  config.action_controller.asset_host = "https://#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com" 
```

在请求 PNG 时，我被重定向到：

```
https://mysite-assets.s3.amazonaws.com/restaurants/50f17f4137ff3ef955000001.png 
```

但是我需要：

```
https://mysite.com/restaurants/50f17f4137ff3ef955000001.png 
```

我正在使用的路由虽然非常丑陋，但它是：

```
<%= image_tag(restaurant_path(restaurant)+".png") %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:55:35.220

糟糕，我只需要使用：

```
<%= image_tag(restaurant_url(restaurant)+".png") %> 
```

URL 而不是路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T18:18:02.173

稍微不那么丑（在我看来）可能是：

```
<%= "#{image_tag restaurant_url(restaurant)}.url" %> 
```

# java - 在多线程环境中读取的值

> ID：14760239
> 
> 赞同：7
> 
> 时间：2013-02-07T20:19:42.283
> 
> 标签：java, multithreading

我正在阅读关于线程和锁的 JLS 文档[http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)。

```
class FinalFieldExample { 
final int x;
int y; 
static FinalFieldExample f;

public FinalFieldExample() {
    x = 3; 
    y = 4; 
} 

static void writer() {
    f = new FinalFieldExample();
} 

static void reader() {
    if (f != null) {
        int i = f.x;  // guaranteed to see 3  
        int j = f.y;  // could see 0
    } 
} 
} 
```

我对本节中提到的上述示例（例如第 17.5-1 号）感到困惑，关于如何将 fy 视为零。Reader Threads 要么将对象 f 读取为 null，在这种情况下它不会执行任何操作，要么它将读取带有一些引用的对象 f。如果对象 f 有一个引用，那么即使多个写入线程正在运行，构造函数也必须完成其执行，以便可以将引用分配给 f，如果构造函数已经执行，则 fy 应该被视为 4。

在什么条件下 fy =0 是可能的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T20:44:37.490

> 在什么条件下 fy =0 是可能的？

Java 内存模型允许 JIT 编译器在构造函数*之外重新排序**非 final*字段的初始化。该字段是最终的，因此它必须由 JVM 初始化，但不是最终的。所以有可能是分配并设置了，但是字段的初始化还没有完成。*`x``y``FinalFieldExample``static FinalFieldExample f``y`*

 *引用 17.5-1：

> 因为 writer 方法在对象的构造函数完成后写入 f，所以 reader 方法将保证看到正确初始化的 fx 值：它将读取值 3。因此，不能保证 reader 方法看到它的值 4。

因为`f.y`不是最终的，所以不能保证它在构造函数完成并`static f`分配时已经设置。因此，创建了一个竞争条件，根据这场比赛，`reader`可能会看到3 或 0。`y`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:36:20.607

如果一个线程写入一个变量而另一个线程读取它，那么即使读取发生在稍后的时间，第二个线程也可能看不到新值。例如，如果两个线程在不同的处理器上执行，并且写入的值缓存在本地处理器寄存器中，则可能会发生这种情况。

Java 规范使这种非直观的行为成为可能，以提高性能（如果这不可能，那么处理器就不能使用它们的本地内存）

因此，每当您阅读 Java 内存模型中的“之前发生”关系时，请记住，“物理”之前发生在程序逻辑中不一定是“发生之前”。您需要明确地建立两个线程之间的“之前发生”关系，例如通过同步、使用 volatile 变量或在本例中使用 final 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:43:14.037

这不仅仅是指令重新排序。即使对 fy 的写入在对 f 的写入之前，它也可能发生。对象和类都是人类的烟雾和镜子。在 CPU 级别，它都是加载内存位置和存储内存位置。数据最初进入 CPU 缓存。让我们假设在这种情况下 f 进入一个高速缓存行，而 fy 进入另一个高速缓存行。writer 线程执行其他操作以使第一个高速缓存行（保持 f）对其余 CPU 可见。拿着 fy 的那个还不可见（没有指示 CPU 这样做）。内存位置仍然为 0。当读取器线程在不同的 CPU 上运行时，它将加载内存位置，因为没有任何东西告诉 CPU 该位置在另一个 CPU 缓存中有待处理的更改。这意味着第二个 CPU 将从内存中加载 f 和 fy。f 保存最新的值，但最新的 fy 仍在缓存中，因此内存位置为 0。通过放置 volatile、final 等，您实际上是在告诉编译器生成告诉 CPU 发布数据的代码。这只是一个例子，还有更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T20:48:21.117

> `f.y`可以看成`0`如下方式：

假设两个`threads`T1 和 T2 正在运行。T1 正在访问该方法`writer`，而 T2正在访问`reader`同一对象的方法`FinalFieldExample`。

1.  T1 调用方法`writer()`。`f.x`已经初始化为 3，因为它被声明为 final，这使它成为编译时间常数，因此它在类的初始化期间被初始化为给定值，`FinalFieldExample`这发生在类实例的创建之前。由于`f`没有这样声明，`volatile`因此编译器以下列方式重新调整创建对象的步骤顺序：（a）`f`声明为非空（b）`FinalFieldExample` 创建的对象（b）`f`是对该对象的引用。但是在点 (a) 被 T1 执行后， T1 被 T2 抢占
2.  T2 调用方法`reader()`。它发现`f`不为空，因此它进入 if 块。`f.x`已初始化为，`3`因此`i`已分配 value `3`。但是`f.y`直到现在初始化为默认值`0`，因为在上面给出的步骤 1 中没有完成对象的构造。`j`赋值为 0 也是如此。

> 所以我们看到，不将变量声明`f`为 volatile 可以 `compiler`自由地优化代码，以便在执行时内联调用`constructor`，**并且**共享变量`f`在线程之间共享，`T1`并且`T2`一旦分配了存储空间就可以立即更新，但是在内联构造函数初始化对象之前。*

# css - 使用 LESS 创建相对路径 mixin

> ID：14760243
> 
> 赞同：1
> 
> 时间：2013-02-07T20:19:47.573
> 
> 标签：css, less

我有一堆 svg 作为背景图片。我正在寻找一种方法来创建带有变量的部分路径，然后只将文件名传递给我的 mixin。像这样的东西：

```
@url: "url('../images/icons/_mm/";
.bg(@fileName){
background-image:@url @fileName;
background-size: contain;
background-repeat: no-repeat;
background-position: center center;
} 
```

不幸的是，这不能正确连接。当我传入这样的参数时：

```
.mmWrap{
.bg('swoosh.svg');
} 
```

生成的 CSS 是这样的：

```
.mmWrap {
  background-image: "url('../images/icons/_mm/" 'swoosh.svg';
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center center;
} 
```

...一团糟。如果我尝试不带引号传递参数，LESS 编译器会抛出错误。我知道答案可能涉及转义 ~ 字符串，但我完全没有想法。任何人都可以在这里帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:38:35.713

要做这样的事情，你必须求助于字符串插值..

```
@image_dir: '../images/';

.bg(@filename) {
    background-image: url('@{image_dir}@{filename}');
} 
```

这是我知道使用 LESS 的唯一方法。希望这可以帮助！

# html - 无法悬停在包装器 Div 上工作

> ID：14760246
> 
> 赞同：0
> 
> 时间：2013-02-07T20:19:51.683
> 
> 标签：html, css

我需要你的帮助。

我似乎无法让悬停在包装器/容器 DIV 上正常工作

CSS：

```
#myhover:hover {
    border: 1px solid red;
} 
```

HTML：

```
<div id="myhover" style="background: #ffffff; 
      width: 177px; height: 20px; border: 1px solid #808080;">
    <div style="float: left;">
        <input id="refdocs" style="padding-left: 4px; padding-right: 3px; 
                  height: 15px; width: 158px; border: none;" type="text">
    </div>
    <div style="line-height:18px; font-size: 11pt;  color: #779297;">+</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:21:42.750

因为内联样式是级联中最具体的，所以它们可以覆盖您不希望它们覆盖的东西。将您的`#myhover`样式移动到样式表中，然后它应该可以正常工作。

例如：

```
#myhover {
    background: #ffffff; 
    width: 177px; 
    height: 20px; 
    border: 1px solid #808080;
} 
```

**jsfiddle：http: [//jsfiddle.net/va8Bz/](http://jsfiddle.net/va8Bz/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:23:18.547

您的`style`属性正在覆盖您的样式表选择器。它更具体。

您在这里有三个选择：

1.  将您的样式移出`style`属性。
2.  将您的样式移出`style`属性。
3.  添加`!important`到应该覆盖`style`属性中的样式声明。

我建议您将样式从`style`属性中移出到样式表中。

**示例：http: [//jsfiddle.net/Y7NW9/](http://jsfiddle.net/Y7NW9/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:37:05.373

您需要将所有 CSS 粘贴在样式表中，而不是使用内联样式。

你想要完成的事情也可以用更少的标记来完成：

```
<div class="container">
    <input class="refdocs" type="text">
    <div class="icon">+</div>
</div> 
```

然后在您的 CSS 样式表中：

```
.container {
    display: inline-block;
    position: relative;
}

.input-wrapper {
    float: left;
}

.refdocs {
    border: 1px solid #808080;
    padding: 2px;
    padding-right: 14px;
    margin: 0;
}

.refdocs:hover {
    border: 1px solid red;
}

.icon {
    font-size: 11pt;
    position: absolute;
    top: 3px;
    right: 5px;
} 
```

**[这是一个工作演示](http://jsbin.com/alaveq/1/edit)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T20:25:12.773

我在您之前的问题中为您解决了这个问题：

```
#add {
    float: right;
    width: 20px;
    height: 20px;
    cursor: pointer;
    text-align: center;
}
#add:hover {
    color: #f00;   
} 
```

[http://jsfiddle.net/kUSBM/](http://jsfiddle.net/kUSBM/)

请回答问题或接受答案。

# php - 如何显示不同或所有类别的内容？

> ID：14760249
> 
> 赞同：1
> 
> 时间：2013-02-07T20:19:56.717
> 
> 标签：php, mysql

我有一个名为“categories.php”的页面。我用它来显示不同类别的不同内容。

例子：

```
mysite.com/categories.php?cat=dance (shows dancing content)
mysite.com/categories.php?cat=sing (show singing content)
Etc... 
```

该数据库有两个不同的表：

```
Categories
categories_id
categories_title

Categories_content
cat_content_id
categories_id
categories_text
categories_image 
```

到现在为止还挺好。但现在我面临的问题。假设我想显示所有类别的内容。通常我必须为所有类别一一添加相同的内容。但我认为应该有一种方法可以只添加一次并在所有页面上显示。

我忘了提到我使用了一个带有下拉菜单的表单，其中的类别是我想为其添加内容的列表。

任何想法如何做到这一点？我必须使用多个 SQL 查询来实现这一点吗？

也许我只是让自己变得困难，对此有一个简单的解决方案。

提前致谢。兆瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:29:37.550

您应该能够在没有 where 子句的情况下使用 SQL。它应该返回所有 id，而不管 categories_id。

```
Select cat_content_id from categories_content; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:30:02.907

如果您创建一个名为“all”或其他名称的新类别，您可以在查询中实现这一点。

所以而不是：

```
SELECT * FROM Categories JOIN [...] WHERE categories_title = '{$_GET['cat']}' 
```

采用：

```
SELECT * FROM Categories JOIN [...] WHERE categories_title = '{$_GET['cat']}' OR categories_title = 'all' 
```

然后在类别列表中，过滤掉“全部”。

有很多方法可以做到这一点，我的可能不是最好的，但它是我头脑中最好的。

# c# - 找不到类型或命名空间名称“动态”

> ID：14760254
> 
> 赞同：6
> 
> 时间：2013-02-07T20:20:11.517
> 
> 标签：c#, asp.net, .net, json, visual-studio-2010

Microsoft Visual Studio 2010 Ultimate（版本 10.0.40219.1 SP1Rel）。

Microsoft .NET 框架版本 4.5.50709 SP1Rel

我正在编译为 .net 框架 4.0。

每当我尝试使用动态或 var 数据类型时，都会收到主题行中显示的错误：

找不到类型或命名空间名称“动态”。

找不到类型或命名空间名称“var”。

我正在尝试使用 JsonFX 解析从另一个 Web 服务接收到的数据。有时用数据会代表一个“信息”，有时它会代表一个“轨迹”。根据this [JsonFx Documentation](https://github.com/jsonfx/jsonfx%20JsonFX%20Documentation)，我应该能够遵循“序列化到/从动态类型（默认为.NET 4.0）”的示例：

我在我的网站上添加了一个名为 test 的页面。下面的代码块来自 Test.aspx.cs 我尝试使用的代码是这样的：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using JsonFx;
using JsonFx.Json;
using Microsoft.CSharp;

public partial class Test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string Data = "";
        Data = @"[{""meta"":{""account"":""orbitinte"",""event"":""track""},""payload"":{""id"":410827200397312213,""id_str"":""410827200397312213"",""asset"":""359551031717134"",""recorded_at"":""2013-02-07T15:59:04Z"",""received_at"":""2013-02-07T16:00:37Z"",""fields"":{}}},{""meta"":{""account"":""orbitinte"",""event"":""track""},""payload"":{""id"":410827200409895125,""id_str"":""410827200409895125"",""asset"":""359551031717134"",""recorded_at"":""2013-02-07T16:00:04Z"",""received_at"":""2013-02-07T16:00:37Z"",""fields"":{}}}]";
        Data = @"[{""meta"":{""account"":""orbitinte"",""event"":""message""},""payload"":{""id"":410865901198377173,""thread_id"":null,""parent_id"":410865891354345685,""id_str"":""410865901198377173"",""thread_id_str"":"""",""parent_id_str"":""410865891354345685"",""type"":""message"",""channel"":""com.mdi.services.adminProtocol"",""sender"":""359551031717134"",""recipient"":""@@server@@"",""asset"":""359551031717134"",""b64_payload"":""eyJlcnJvciI6ImNhbm5vdCBwYXJzZSBjb21tYW5kIn0="",""recorded_at"":""2013-02-07T18:34:25Z"",""received_at"":""2013-02-07T18:34:24Z""}}]";

        JsonReader Reader = new JsonReader();
        dynamic Output = Reader.Read(Data);

        Notifications oNotifications = new Notifications();
        oNotifications.ProcessNotifications(Data);
    }
} 
```

在 web.config 文件中：

```
 <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v4.0"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom> 
```

我对 C# 和 asp.net 相当陌生。但我一直在寻找解决这个问题的方法。我看到的所有内容都提到了编译器版本和 .net 框架版本。我想我已经提供了所有相关的细节，但如果我还有什么需要补充的，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T20:29:35.507

确保您在项目中有参考`Microsoft.CSharp`。

可以在[此处](https://stackoverflow.com/a/2460934/128217)找到有关此 DLL 的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T20:56:32.753

您在 IIS 中的网站是否配置为使用 .NET 2.0？这就是我听起来的样子。首先检查配置..您的测试是否在本地工作？

您的编译器应如下所示：

```
<compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"> 
```

你的设置为 Version=2.0.0.0

# python - 解析 XML RSS 提要字节流 标签

> ID：14760255
> 
> 赞同：1
> 
> 时间：2013-02-07T20:20:11.630
> 
> 标签：python, xml, parsing, rss, beautifulsoup

我正在尝试为元素“”的第一个实例解析 RSS 提要。

```
def pageReader(url):
try:
    readPage = urllib2.urlopen(url)
except urllib2.URLError, e:
#   print 'We failed to reach a server.'
#   print 'Reason: ', e.reason
    return 404  
except urllib2.HTTPError, e:
#   print('The server couldn\'t fulfill the request.')
#   print('Error code: ', e.code)   
    return 404  
else:
    outputPage = readPage.read()        
return outputPage 
```

假设传递的参数是正确的。该函数返回一个 str 对象，其值只是一个完整的 rss 提要 - 我已经确认了类型：

```
a = isinstance(value, str)
if not a:
   return -1 
```

因此，函数调用返回了整个 rss 提要，这一点我碰壁了——我尝试使用 BeautifulSoup、lxml 和其他各种库解析提要，但没有成功（我在 BeautifulSoup 方面取得了*一些*成功，但它无法从父级中提取某些子元素，例如 . 我正准备求助于编写自己的解析器，但我想知道是否有人有任何建议。

要重新创建我的错误，只需使用类似于以下的参数调用上述函数：

[http://www.cert.org/nav/cert_announcements.rss](http://www.cert.org/nav/cert_announcements.rss)

你会看到我正试图返回第一个孩子。

```
<item>
<title>New Blog Entry: Common Sense Guide to Mitigating Insider Threats - Best Practice 16 (of 19)</title>
<link>http://www.cert.org/blogs/insider_threat/2013/02/common_sense_guide_to_mitigating_insider_threats_-_best_practice_16_of_19.html</link>
<description>This sixteenth of 19 blog posts about the fourth edition of the Common   Sense Guide to Mitigating Insider Threats describes Practice 16: Develop a formalized insider threat program.</description>
<pubDate>Wed, 06 Feb 2013 06:38:07 -0500</pubDate>
</item> 
```

正如我所说，BeautifulSoup 无法找到对我的应用程序至关重要的 pubDate 和 Link。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:45:29.237

我使用 BeautifulStoneSoup 并像这样传递小写标签取得了一些成功：

```
from BeautifulSoup import BeautifulStoneSoup
xml = '<item><title>New Blog Entry: Common Sense Guide to Mitigating Insider Threats - Best Practice 16 (of 19)</title><link>http://www.cert.org/blogs/insider_threat/2013/02/common_sense_guide_to_mitigating_insider_threats_-_best_practice_16_of_19.html</link><description>This sixteenth of 19 blog posts about the fourth edition of the Common   Sense Guide to Mitigating Insider Threats describes Practice 16: Develop a formalized insider threat program.</description><pubDate>Wed, 06 Feb 2013 06:38:07 -0500</pubDate></item>'

soup = BeautifulStoneSoup(xml)
item = soup('item')[0]
print item('pubdate'), item('link') 
```

# java - 争论俘虏模仿者

> ID：14760256
> 
> 赞同：19
> 
> 时间：2013-02-07T20:20:18.877
> 
> 标签：java, unit-testing, mockito

我一直在读一些关于论据俘虏的书，我读得越多，我就越迷失。有人可以用一个例子来解释它吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-07T20:33:59.983

根据文档，这已被弃用。您应该使用工厂方法 forClass(Class) 来创建捕获器以避免 NullPointerExceptions。看[这里](http://mockito.googlecode.com/svn/tags/1.8.0/javadoc/org/mockito/ArgumentCaptor.html)

例子：

```
 ArgumentCaptor<Person> argument = ArgumentCaptor.forClass(Person.class);
  verify(mock).doSomething(argument.capture());
  assertEquals("John", argument.getValue().getName()); 
```

# c# - 引用循环中创建的上一个对象以更新 SQL

> ID：14760263
> 
> 赞同：0
> 
> 时间：2013-02-07T20:20:41.953
> 
> 标签：c#, sql, object, checkbox

我有一个设置表单的循环，它是以下代码（在表单加载事件中）。这将显示一个带有人员姓名的复选框。如果位字段为 1，它会检查复选框。

```
int xAxisCheckbox = 130;
int yAxisCheckbox = 30;

for (int i = 0; i < selectDS.Tables[0].Rows.Count; i++)
{
    this.myCheckBox = new CheckBox();
    myCheckBox.Location = new Point(xAxisCheckbox, yAxisCheckbox);
    myCheckBox.Size = new Size(120, 20);
    myCheckBox.Text = selectDS.Tables[0].Rows[i]["FullName"].ToString();
    myCheckBox.Checked = (bool)selectDS.Tables[0].Rows[i]["InOperation"];
    yAxisCheckbox = yAxisCheckbox + 80;
} 
```

稍后在代码中（对于保存按钮单击事件），它运行相同的选择，但也运行大量更新以根据刻度将 InOperation 字段设置为 true/false。如果您被添加到操作中，它还会重置操作顺序。

```
for (int i = 0; i < selectDataSet.Tables[0].Rows.Count; i++)
{
     userID = (int)selectDataSet.Tables[0].Rows[i]["UserID"];
     if (myCheckBox.Checked)
     {
         connection.runUpdate("UPDATE Users SET InOperation = 1, OperationOrder = CASE WHEN OperationOrder = 1 THEN 1 ELSE CASE WHEN InOperation=1 THEN OperationOrder ELSE (SELECT COUNT(*)+1 FROM Users WHERE InOperation=1 AND OperationOrder > 0) END END WHERE UserID=" + userID);
         connection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder END WHERE InOperation=1");
      }
      else
      {
          connection.runUpdate("UPDATE Users SET InOperation = 0, OperationOrder = 0 WHERE UserID=" + userID);
          connection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder -1 = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder -1 END WHERE InOperation=1");
       }
   } 
```

这样做的问题是它会根据创建的最后一个对象更新每一行（例如，如果有 5 行，则只有底部的复选框会计算运行 SQL，并且它适用于所有这些）。如何更新每一行，有没有一种方法可以引用我创建的每个对象，而不仅仅是创建的最后一个对象？

更新：这是一些导致错误的新代码。公共部分类 SelectUsers : Form { public int userID; 公开列出我的盒子；

```
 public SelectUsers()
    {
        InitializeComponent();
    }

    private void SelectUsers_Load(object sender, EventArgs e)
    {
        DataSet ds = myconnection.runSelect(new DataSet(), "THE SELECT");

        int xAxisCheckbox = 40;
        int yAxisCheckbox = 50;

        myBoxes = new List<CheckBox>();

        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            this.myCheckBox = new CheckBox();
            myCheckBox.Location = new Point(xAxisCheckbox, yAxisCheckbox);
            myCheckBox.Size = new Size(120, 20);
            myCheckBox.Text = ds.Tables[0].Rows[i]["FullName"].ToString();
            myCheckBox.Checked = (bool)ds.Tables[0].Rows[i]["InOperation"];
            yAxisCheckbox = yAxisCheckbox + 80;
            myBoxes.Add(myCheckBox);
        }
    }

    private void saveBtn_Click(object sender, EventArgs e)
    {
        DataSet ds = myconnection.runSelect(new DataSet(), "THE SELECT");

        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            userID = (int)ds.Tables[0].Rows[i]["UserID"];
            if (myBoxes[i].Checked)
            {
                myconnection.runUpdate("UPDATE Users SET InOperation = 1, OperationOrder = CASE WHEN OperationOrder = 1 THEN 1 ELSE CASE WHEN InOperation=1 THEN OperationOrder ELSE (SELECT COUNT(*)+1 FROM Users WHERE InOperation=1 AND OperationOrder > 0) END END WHERE UserID=" + userID);
                myconnection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder END WHERE InOperation=1");
            }
            else
            {
                myconnection.runUpdate("UPDATE Users SET InOperation = 0, OperationOrder = 0 WHERE UserID=" + userID);
                myconnection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder -1 = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder -1 END WHERE InOperation=1");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:31:41.090

您应该保留一系列复选框，而不仅仅是单个复选框

```
int xAxisCheckbox = 130;
int yAxisCheckbox = 30;

List<CheckBox> myBoxes = new List<CheckBox>();

for (int i = 0; i < selectDS.Tables[0].Rows.Count; i++)
{
    this.myCheckBox = new CheckBox();
    myCheckBox.Location = new Point(xAxisCheckbox, yAxisCheckbox);
    myCheckBox.Size = new Size(120, 20);
    myCheckBox.Text = selectDS.Tables[0].Rows[i]["FullName"].ToString();
    myCheckBox.Checked = (bool)selectDS.Tables[0].Rows[i]["InOperation"];
    yAxisCheckbox = yAxisCheckbox + 80;
    myBoxes.Add(myCheckBox);
} 
```

后来你的for循环：

```
for (int i = 0; i < selectDataSet.Tables[0].Rows.Count; i++)
{
     userID = (int)selectDataSet.Tables[0].Rows[i]["UserID"];
     if (myBoxes[i].Checked)
     {
         connection.runUpdate("UPDATE Users SET InOperation = 1, OperationOrder = CASE WHEN OperationOrder = 1 THEN 1 ELSE CASE WHEN InOperation=1 THEN OperationOrder ELSE (SELECT COUNT(*)+1 FROM Users WHERE InOperation=1 AND OperationOrder > 0) END END WHERE UserID=" + userID);
         connection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder END WHERE InOperation=1");
      }
      else
      {
          connection.runUpdate("UPDATE Users SET InOperation = 0, OperationOrder = 0 WHERE UserID=" + userID);
          connection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder -1 = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder -1 END WHERE InOperation=1");
       }
   } 
```

那应该这样做。

不用说，直接在你的表单中执行 SQL 语句不是一个好主意，但那是另一回事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:37:03.350

如果您可以简单地遍历表单上的所有复选框，从那里构建一个 SQL 更新脚本并在最后执行所述脚本的 .runUpdate() ，那会不会快很多？

想到的事情：

*   确保使用 stringBuilder
*   第一部分仅更新 InOperation 字段
*   然后在 1 个单一的 UPDATE 中更新 OperationOrder

您需要一种方法将复选框与相关的 UserId 联系起来。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T17:12:34.077

Carlos Grappa 的回答是使用数组为我指明了正确的方向，但设置错误。在阅读了编程书籍后，我发现你创建了一个数组，如下所示：

```
// Global
CheckBox[] myCheckBox;
DataSet ds;

private void SelectUsers_Load(object sender, EventArgs e) {

    ds = myconnection.runSelect(new DataSet(), "THE SELECT");

    int xAxisCheckbox = 40;
    int yAxisCheckbox = 50;

    // Create the CheckBox array (amount based on number of rows)
    myBoxes = new CheckBox[ds.Tables[0].Rows.Count];

    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {
        // Create a new Checkbox
        myCheckBox[i] = new CheckBox();

        myCheckBox.Location = new Point(xAxisCheckbox, yAxisCheckbox);
        myCheckBox.Size = new Size(120, 20);
        myCheckBox.Text = ds.Tables[0].Rows[i]["FullName"].ToString();
        myCheckBox.Checked = (bool)ds.Tables[0].Rows[i]["InOperation"];
        yAxisCheckbox = yAxisCheckbox + 80;

        // Add the Checkbox
        Controls.Add(myCheckBox[i]);
    }
}

private void saveBtn_Click(object sender, EventArgs e) {
    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {
        userID = (int)ds.Tables[0].Rows[i]["UserID"];

        if (myBoxes[i].Checked)
        {
            myconnection.runUpdate("UPDATE Users SET InOperation = 1, OperationOrder = CASE WHEN OperationOrder = 1 THEN 1 ELSE CASE WHEN InOperation=1 THEN OperationOrder ELSE (SELECT COUNT(*)+1 FROM Users WHERE InOperation=1 AND OperationOrder > 0) END END WHERE UserID=" + userID);
            myconnection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder END WHERE InOperation=1");
        }
        else
        {
            myconnection.runUpdate("UPDATE Users SET InOperation = 0, OperationOrder = 0 WHERE UserID=" + userID);
            myconnection.runUpdate("UPDATE Users SET OperationOrder = CASE WHEN OperationOrder -1 = 0 THEN (SELECT COUNT(*) FROM Users WHERE InOperation=1) ELSE OperationOrder -1 END WHERE InOperation=1");
        }
    }
} 
```

Deroby 你可能是对的，但是我不知道该怎么做。

# java - 为什么 int 类型值没有装箱为 Integer

> ID：14760264
> 
> 赞同：4
> 
> 时间：2013-02-07T20:20:45.713
> 
> 标签：java

```
public class Test {
static void test(Integer x) {
    System.out.println("Integer");
}

static void test(long x) {
    System.out.println("long");
}

static void test(Byte x) {
    System.out.println("byte");
}

static void test(Short x) {
    System.out.println("short");
}

public static void main(String[] args) {
    int i = 5;
    test(i);
}
} 
```

输出值为“long”。

只能告诉我为什么它不是“整数”，因为在 Java 中，int 值应该是自动装箱的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T20:22:33.150

当编译器可以选择将 an 扩展`int`为 a`long`或将 an 装箱`int`为 an`Integer`时，它会选择最便宜的转换：扩展为 a `long`。方法调用上下文中的转换规则在[Java 语言规范的第 5.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)中描述，当有多个潜在匹配时选择匹配方法的规则在[第 15.12.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)（特别是[第 15.12.2.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)）中描述，但是警告说这是非常密集的阅读）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:27:55.823

这些只接受`integer`您的测试方法的类实例，它不是 java 的原始整数类型。`Integer`是 java 的一个类，而不是类的原始`int`类型`String`。另一方面`long`，它是一个原始类型，它有一个子集，`int`所以它选择了那个参数，因为它是最接近的匹配。您也可以尝试使用双参数。当 int 或 long 是方法参数中缺少签名时，它选择使用`double`'s ，因为它是最接近的匹配项。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)

尝试这个：

```
public static void main(String[] args) {
    int i = 5;
    test(i);

    Integer smartInt= new Integer(5);
    test(smartInt); 
} 
```

# rally - Rally SDK 2：如何从用户故事中获取 PortfolioItem/Initiative

> ID：14760265
> 
> 赞同：1
> 
> 时间：2013-02-07T20:20:48.973
> 
> 标签：rally

我想查询用户故事和每个故事所属的倡议。我的 fetch 属性如下所示：

```
...
model: 'UserStory',
fetch: ['Name', 'PortfolioItem', 'Parent'],
... 
```

这会获取 PortfolioItem/Feature 对象、PortfolioItem/FeatureGroup 对象，但不会获取 PortfolioItem/Initiative。FeatureGroup 对象不显示“父”属性。

简而言之，如何在不单独查询倡议并比较“_ref”或类似内容的情况下获取父母的父母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:12:11.610

出于服务器性能的原因，每个请求只会为一个级别填充层次关系。您必须提出后续请求来构建剩余的层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:46:29.040

如果您点击新的 Lookback API（Kyle 第一次回答时未发布，现在处于开放预览状态），返回的快照包含一个字段 _ItemHierarchy，其中将包括所有祖先的 ObjectID，包括一直到 Portfolio Items。

[您可以在此处](https://rally1.rallydev.com/analytics/doc/)找到有关 LBAPI 的信息。App SDK 2.0 的 SnapshotStore 支持查询。请注意，SDK 2.0p6（即将发布）有一些改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T19:22:22.067

老问题，老问题。但我最近对整棵树做了同样的事情。我没有使用回溯 API。我创建了一个模型并存储了数据，并检查了每个投资组合项目的父级。

也许不是最有效的方法，但它确实有效。

# php - 用 PHP 屏蔽文件名查找 URL

> ID：14760285
> 
> 赞同：1
> 
> 时间：2013-02-07T20:22:01.020
> 
> 标签：php, .htaccess, url-masking

因为这是第一次有人让我点击一些推荐链接，所以我很好奇。在屏幕截图中，您将看到一个被屏蔽的 url，它直接指向其他站点中的某个推荐链接。 ![蒙面推荐链接](../Images/9044151185de4e93546ccf3b4e50b868.png)

引起我注意的有趣部分以及我单击链接的原因是该链接具有文件扩展名，您会注意到。我可以想到 PHP 重定向、.htaccess 重定向，但不能完全想到文件名屏蔽的解决方案。

通常我们可以解析 .htaccess 中的 url 并将 .zip 扩展名重定向到 php 文件，以检查文件是否是有效的文件名或数据库中重定向的键值（这也是一个解决方案）但我没有注意到任何重定向在这个链接上。

还有其他可能的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:34:44.580

您可以使用 .htaccess 重定向任何请求。例如：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

会将所有请求重定向到`index.php`，您可以通过查看来检查用户是否`file.zip`想要`$SERVER['REQUEST_URI']`。然后为他提供您想要的文件：

```
$zip = '/path/to/zip/file/outside/the/web/root.zip';

// set correct headers, so the browser identifies the response as a zip file
header('Content-type: application/zip;');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($zip) . ';');
header('Content-Disposition: attachment; filename="whatever.zip";');

// output the file contents
readfile($zip); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:34:21.493

使用`.htaccess`它可以重写任何请求。链接看起来像 zip 文件，但请求被发送到某个 php 脚本。

这个 php 文件解析请求的 URI，做它应该做的事情（增量计数器，发送钱，..）并且只有在所有这些东西给你文件之后。

# php - Symfony 2：根据请求全局设置参数

> ID：14760287
> 
> 赞同：2
> 
> 时间：2013-02-07T20:22:19.250
> 
> 标签：php, symfony

我将尝试在这里*非常*具体。

我正在使用[BazingaGeocoderBundle](https://github.com/willdurand/BazingaGeocoderBundle)将[Geocoder-php](http://geocoder-php.org/)库集成到 Symfony2 中。在 config.yml 中，您可以使用其参数设置地理位置提供程序

**配置.yml**

```
bazinga_geocoder:
    providers:
        google_maps:
            locale: en
            region: US 
```

我还有一个服务监听器，用来根据域名知道我应该使用哪个 api。如果有人访问，我将访问特定的 api url

```
www.domain.us -> api.en.anotherdomain.com
www.domain.it -> api.it.anotherimaginarydomain.com 
```

服务监听器设置在 config.yml

```
services:
    kernel.listener.domain_listener:
        class: MyOwn\Bundle\WebBundle\Listener\DomainListener
        arguments:
        - %tld_allowed%
        tags:
        - { name: kernel.event_listener, event: kernel.request, method: onDomainGet } 
```

在每次请求时，我都会使用相应的 api 域设置会话值。

我希望能够指定 bazinga_geocoder 参数，因此我可以根据访问的域设置 google_maps 提供程序参数（区域设置、区域）。

我怎样才能做到这一点？我走错了路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:27:55.643

我不知道这个捆绑包是如何工作的，但看看代码：

*   当找到新的提供者时（通过配置），[扩展](https://github.com/willdurand/BazingaGeocoderBundle/blob/master/DependencyInjection/BazingaGeocoderExtension.php#L196)将创建一个新`Definition`的 id`bazinga_geocoder.provider.$name`
*   该定义将具有标签`bazinga_geocoder.provider`和**私有**可见性
*   [编译器传递](https://github.com/willdurand/BazingaGeocoderBundle/blob/master/DependencyInjection/Compiler/AddProvidersPass.php#L47)将查找标记为的服务并`bazinga_geocoder.provider`调用服务`registerProvider`，`bazinga_geocoder.geocoder`即[`Geocoder`](https://github.com/willdurand/Geocoder/blob/master/src/Geocoder/Geocoder.php).

`bazinga_geocoder.provider.google_maps`也许这可能有效：在您的请求侦听器中注入服务，然后调用`$provider->setLocale($locale)`. 我不知道设置区域的热度，因为[`AbstractProvider`](https://github.com/willdurand/Geocoder/blob/master/src/Geocoder/Provider/AbstractProvider.php)类中没有设置器（在 中也没有[`GoogleMapsProvider`](https://github.com/willdurand/Geocoder/blob/master/src/Geocoder/Provider/GoogleMapsProvider.php)）。

一个“残酷”的解决方案是`GoogleMapsProvider`在请求侦听器中创建一个新实例，并将其添加到地理编码器中。侦听器应该接受这些服务：

*   `bazinga_geocoder.geocoder.adapter`
*   `bazinga_geocoder.geocoder`

那是：

```
use Geocoder\Geocoder;
use Geocoder\Provider\GoogleMapsProvider;
use Geocoder\HttpAdapter\HttpAdapterInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class RequestListener
{
    private $adapter;
    private $geo;

    public function __construct(HttpAdapterInterface $adapter, Geocoder $geo)
    {
        $this->adapter = $adapter;
        $this->geo = $geo;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        // Get locale and region in some way

        // Create and register the provider, dynamically
        $provider = new GoogleMapsProvider($this->adapter, $locale, $region);
        $this->geo->registerProvider($provider);
    }
} 
```

# linux - 纯 ipv6 设备的 linux 设备驱动程序

> ID：14760301
> 
> 赞同：0
> 
> 时间：2013-02-07T20:22:52.890
> 
> 标签：linux, linux-device-driver, ipv6

我目前正在为纯 IPv6 驱动程序设计一个 linux 驱动程序。有没有办法让内核模块只支持IPv6，只能分配IPv6地址？linux中设置地址的命令是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:26:35.027

**添加IP：**

使用`ip`命令：

```
$sudo /sbin/ip -6 addr add 2001:0db8:0:f101::1/64 dev eth0 
```

使用`ifconfig`命令：

```
$sudo /sbin/ifconfig eth0 inet6 add 2001:0db8:0:f101::1/64 
```

**删除IP：**

使用`ip`

```
$sudo /sbin/ip -6 addr del 2001:0db8:0:f101::1/64 dev eth0 
```

使用`ifconfig`

```
$sudo /sbin/ifconfig eth0 inet6 del 2001:0db8:0:f101::1/64 
```

# c# - StreamReader缓冲GZIP的流式HTTP？

> ID：14760303
> 
> 赞同：4
> 
> 时间：2013-02-07T20:22:58.440
> 
> 标签：c#, http, httpwebrequest, gzip, http-streaming

努力寻找遇到类似问题或类似问题的人。

`reader.ReadLine()`我目前正在使用具有 GZip 要求的 http (json) 流，并且从发送数据到读取数据时遇到延迟。有人建议我这可能与将数据保存在缓冲区中的解码有关？

这就是我目前所拥有的，除了延迟之外它工作得很好。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(endPoint);
request.Method = "GET";

request.PreAuthenticate = true;
request.Credentials = new NetworkCredential(username, password);

request.AutomaticDecompression = DecompressionMethods.GZip;
request.ContentType = "application/json";
request.Accept = "application/json";
request.Timeout = 30;
request.BeginGetResponse(AsyncCallback, request); 
```

然后在 AsyncCallback 方法中我有：

```
HttpWebRequest request = result.AsyncState as HttpWebRequest;

using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result))
using (Stream stream = response.GetResponseStream())
using (StreamReader reader = new StreamReader(stream, Encoding.UTF8))
{

    while (!reader.EndOfStream)
    {
        string line = reader.ReadLine();
        if (string.IsNullOrWhiteSpace(line)) continue;

        Console.WriteLine(line);
    }
} 
```

它会一直等待，`reader.Readline()`直到收到更多数据，然后甚至会保留其中的一些数据。还收到了保持活动的换行符，当它决定阅读某些内容时，这些通常会被一次性读出。

我已经在运行 curl 命令的情况下测试了并行运行的流，curl 命令可以很好地接收和解压缩数据。

任何见解都会很棒。谢谢，

担

**编辑** 在流式阅读器上使用缓冲区大小没有运气。

```
new StreamReader(stream, Encoding.UTF8, true, 1) 
```

**编辑** 也没有运气更新到 .NET 4.5 并使用

```
request.AllowReadStreamBuffering = false; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T17:31:49.943

**更新**：这似乎在很长一段时间内会出现问题，并且体积率较高，并且应该仅用于缓冲区影响应用程序功能的小体积。从那以后，我切换回了`StreamReader`.

所以这就是我最终想出的。这有效，没有延迟。这不会被自动 GZip 解压缩缓冲。

```
using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result))
using (Stream stream = response.GetResponseStream())
using (MemoryStream memory = new MemoryStream())
using (GZipStream gzip = new GZipStream(memory, CompressionMode.Decompress))
{
    byte[] compressedBuffer = new byte[8192];
    byte[] uncompressedBuffer = new byte[8192];
    List<byte> output = new List<byte>();

    while (stream.CanRead)
    {
        int readCount = stream.Read(compressedBuffer, 0, compressedBuffer.Length);

        memory.Write(compressedBuffer.Take(readCount).ToArray(), 0, readCount);
        memory.Position = 0;

        int uncompressedLength = gzip.Read(uncompressedBuffer, 0, uncompressedBuffer.Length);

        output.AddRange(uncompressedBuffer.Take(uncompressedLength));

        if (!output.Contains(0x0A)) continue;

        byte[] bytesToDecode = output.Take(output.LastIndexOf(0x0A) + 1).ToArray();
        string outputString = Encoding.UTF8.GetString(bytesToDecode);
        output.RemoveRange(0, bytesToDecode.Length);

        string[] lines = outputString.Split(new[] { Environment.NewLine }, new StringSplitOptions());
        for (int i = 0; i < (lines.Length - 1); i++)
        {
            Console.WriteLine(lines[i]);
        }

        memory.SetLength(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:08:11.920

延迟的 ACK C.Evenhuis 讨论的内容可能有些问题，但我有一种奇怪的直觉，它`StreamReader`让你头疼……你可以尝试这样的事情：

```
public void AsyncCallback(IAsyncResult result)
{
    HttpWebRequest request = result.AsyncState as HttpWebRequest;   
    using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result))
    using (Stream stream = response.GetResponseStream())
    {
        var buffer = new byte[2048];
        while(stream.CanRead)
        {
            var readCount = stream.Read(buffer, 0, buffer.Length);
            var line = Encoding.UTF8.GetString(buffer.Take(readCount).ToArray());
            Console.WriteLine(line);
        }
    }
} 
```

编辑：这是我用来测试这个理论的完整工具（也许与你的情况不同会突然出现）

（LINQPad 就绪）

```
void Main()
{
    Task.Factory.StartNew(() => Listener());
    _blocker.WaitOne();
    Request();
}

public bool _running;
public ManualResetEvent _blocker = new ManualResetEvent(false);

public void Listener()
{
    var listener = new HttpListener();
    listener.Prefixes.Add("http://localhost:8080/");
    listener.Start();
    "Listener is listening...".Dump();;
    _running = true;
    _blocker.Set();
    var ctx = listener.GetContext();
    "Listener got context".Dump();
    ctx.Response.KeepAlive = true;
    ctx.Response.ContentType = "application/json";
    var outputStream = ctx.Response.OutputStream;
    using(var zipStream = new GZipStream(outputStream, CompressionMode.Compress))
    using(var writer = new StreamWriter(outputStream))
    {
        var lineCount = 0;
        while(_running && lineCount++ < 10)
        {
            writer.WriteLine("{ \"foo\": \"bar\"}");
            "Listener wrote line, taking a nap...".Dump();
            writer.Flush();
            Thread.Sleep(1000);
        }
    }
    listener.Stop();
}

public void Request()
{
    var endPoint = "http://localhost:8080";
    var username = "";
    var password = "";
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(endPoint);
    request.Method = "GET";

    request.PreAuthenticate = true;
    request.Credentials = new NetworkCredential(username, password);

    request.AutomaticDecompression = DecompressionMethods.GZip;
    request.ContentType = "application/json";
    request.Accept = "application/json";
    request.Timeout = 30;
    request.BeginGetResponse(AsyncCallback, request);
}

public void AsyncCallback(IAsyncResult result)
{
    Console.WriteLine("In AsyncCallback");    
    HttpWebRequest request = result.AsyncState as HttpWebRequest;    
    using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result))
    using (Stream stream = response.GetResponseStream())
    {
        while(stream.CanRead)
        {
            var buffer = new byte[2048];
            var readCount = stream.Read(buffer, 0, buffer.Length);
            var line = Encoding.UTF8.GetString(buffer.Take(readCount).ToArray());
            Console.WriteLine("Reader got:" + line);
        }
    }
} 
```

输出：

```
Listener is listening...
Listener got context
Listener wrote line, taking a nap...
In AsyncCallback
Reader got:{ "foo": "bar"}

Listener wrote line, taking a nap...
Reader got:{ "foo": "bar"}

Listener wrote line, taking a nap...
Reader got:{ "foo": "bar"}

Listener wrote line, taking a nap...
Reader got:{ "foo": "bar"}

Listener wrote line, taking a nap...
Reader got:{ "foo": "bar"}

Listener wrote line, taking a nap...
Reader got:{ "foo": "bar"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:53:14.823

这可能与[延迟 ACK](http://en.wikipedia.org/wiki/TCP_delayed_acknowledgment)结合 Nagle 算法有关。当服务器连续发送多个小响应时会发生这种情况。

在服务器端，发送第一个响应，但只有在服务器收到来自客户端的 ACK 后，或者直到有足够的数据可以发送大数据包（Nagle 算法）时，才会发送后续响应数据块。

在客户端，收到响应的第一位，但不会立即发送 ACK - 由于传统应用程序具有请求-响应-请求-响应行为，它假设它可以将 ACK 与下一个请求一起发送 - 在你的情况不会发生。

在一段固定的时间（500 毫秒？）之后，它决定发送 ACK，导致服务器发送它迄今为止积累的下一个包。

问题（如果这确实是您遇到的问题）可以通过设置`NoDelay`属性在服务器端在套接字级别修复，禁用 Nagle 算法。我认为您也可以在整个操作系统范围内禁用它。

您还可以在客户端暂时禁用延迟 ACK（我知道 windows 有一个注册表项）以查看这是否确实是问题所在，而无需更改服务器上的任何内容。延迟 ACK 可防止 DDOS 攻击，因此请确保事后恢复设置。

不那么频繁地发送 keepalive 也可能会有所帮助，但您仍然有可能出现问题。

# python - django-admin startproject 没有按预期工作

> ID：14760307
> 
> 赞同：0
> 
> 时间：2013-02-07T20:23:18.143
> 
> 标签：python, django

我正在阅读 Django 教程，并尝试使用它`django-admin startproject NAME`来创建项目文件夹。根据教程，输入后我应该得到以下内容：

```
NAME/
    __init__.py
    manage.py
    settings.py
    urls.py 
```

我是在 Powershell 中输入的。没有出现错误消息，但它没有在当前目录中创建任何内容。我究竟做错了什么？我正在使用 Python 2.7 开发 Vista x32。我已经安装了 Django 1.4.2。我也有`C:/Python27`环境变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:23:51.923

`python C:\Python27\Scripts\django-admin.py startproject NAME`无需通过 virtualenc 即可使用。

这是我得到的链接：

[django-admin.py startproject 不工作](https://stackoverflow.com/questions/3681216/django-admin-py-startproject-is-not-working)

# jsf - 合并多个 JSF 项目

> ID：14760309
> 
> 赞同：-1
> 
> 时间：2013-02-07T20:23:19.843
> 
> 标签：jsf, jakarta-ee, jsf-2

我有 3 个 JSF 项目（比如说 A、B、C），每个项目都有相同的数据库、服务器。我想将项目 A、B 合并为一个并通过 Internet 提供，同样将项目 A、C 合并为一个并通过 Intranet 提供。

内网网站需要一个认证层，我可能会添加 JDBCRealm 认证。

执行此操作的最佳程序是什么，我希望代码可重用。我需要使用 EJB 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:23:52.900

不确定我是否理解这个问题。但是，如果您只是想要关于如何管理项目和它们之间的依赖关系的建议，我会看看 maven。 [http://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)

我有一个我非常喜欢的设置，它是基本的，但我还是会描述它：

**myproject-webapp**：这个模块/项目有 JSF facelets、控制器和其他特定于 web 门户的东西。就依赖项而言，它是最顶层的项目。

**myproject**：该模块具有领域类和特定的业务逻辑。

每当我开始一个新项目时，它都是由这两个部分组成的。现在，每当我编写一些其他项目可以从中受益的领域或业务逻辑代码时，我都会将该代码放在它自己的名为“core”的模块中。

每当我编写一些可能（并且应该）不具体的 jsf 或 web 感知代码时，我也会将其设为通用并将其放入“web-util”中。

所以每当我创建一个新项目时，我首先要做的就是声明对“core”和“web-util”的依赖。这使得每个项目在代码方面都非常苗条，而且直截了当。样板代码，例如通用 dao、自定义转换器、自定义拦截器/生产者/事件等立即可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:31:01.890

*   将您的所有关注点分开，即身份验证和其他特定于环境的信息（a、b、&c）

    *   创建构建目标特定或部署目标环境特定的部署脚本。

    *   请注意，上述内容有所不同（用户以最安全的为准）。

# svn - 使用 svn checkout 保留 mtime，或更新 svn export

> ID：14760315
> 
> 赞同：1
> 
> 时间：2013-02-07T20:23:33.837
> 
> 标签：svn, export, svn-checkout, filemtime

我想在网络服务器上发布一个副本，`svn checkout`必须`svn up`每天更新。

我想保留这样一个签出的 svn 存储库副本的文件（和目录，如果可能的话）的 mtime。

我发现这`svn export`可能会完成这项工作，但事实证明你不能`svn export`多次运行（即获取最近的更改），除非你使用`--force`，这似乎会导致整个旧副本被破坏，以及一个全新的要签出的副本 - 不是我要找的。

**在必须每天更新的只读 svn 结帐上保持正确的 mtime 的最佳方法是什么？**

# ruby-on-rails - Rails 表单：忽略占位符文本

> ID：14760317
> 
> 赞同：1
> 
> 时间：2013-02-07T20:23:39.017
> 
> 标签：ruby-on-rails, templates, placeholder

这条线是我的一种形式：

```
<%= question.answer %><%= f.text_field :answer, :placeholder => "Respond..." %> 
```

它显示问题的答案并显示一个文本字段以更新该答案。

唯一的问题是永远不会显示占位符文本，并且内容始终设置为答案内容，而不是“响应...”作为占位符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T20:25:36.453

试试这个：

```
<%= question.answer %><%= f.text_field :answer, '', :placeholder => "Respond..." %> 
```

您将占位符设置为值参数： text_field_tag(name, value = nil, options = {})

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:08:52.627

`<%= question.answer %><%= f.text_field :answer, :value => "", :placeholder => "Respond..." %>`

看起来有技巧吗，这是@Yogzzz答案的修改版本-他应该得到信任。他没有更改他的答案，所以我不能接受它是正确的。

# actionscript-3 - 带有 FLVPlayback 组件的 RTMP 流 MP4

> ID：14760318
> 
> 赞同：1
> 
> 时间：2013-02-07T20:23:41.187
> 
> 标签：actionscript-3, streaming, video-streaming, osmf

我不得不从 ollllddd 项目中更改视频。它是使用 AS3 FLVPlayback 组件构建的。当时的视频是 FLV 并且从出风头服务器流式传输。

我收到的新视频是 h264 MP4，不是流式传输的。有没有人能够使用 FLVPlayback 组件成功流式传输 mp4 文件？

我再也不用这个组件了。从那以后我开始使用 OSMF 播放器，我可以流式传输 MP4 没问题

编辑：这个程序相当大，并且高度依赖于 FLVPlayback 组件，所以现在不能将它换掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:53:31.530

我已经想通了。网址不一样。应该知道，因为它的格式与 OSMF 播放器相同。URL 的格式必须如下：

```
rtmp://youserver.llnwd.net/xxxx/mp4:xxx/u/clients/xxxx/vov/vov_low_version2' 
```

注意文件名的位置，而*不是*文件名`mp4:`的前面或后面

# php - AJAX/MySQL,JavaScript - 数据库和倒计时

> ID：14760321
> 
> 赞同：0
> 
> 时间：2013-02-07T20:23:52.493
> 
> 标签：php, javascript, mysql, ajax, countdown

我正在通过 Ajax 显示数据库中的数据，我需要添加带有数据库时间的倒数计时器。是否有可能做到这一点，因为我正在为此苦苦挣扎约 24 小时。您可以在此处查看主要代码[http://www.egrupper.pl](http://www.egrupper.pl)并且您会看到倒数计时器不起作用。AJAX 代码：

```
function showDeals(sid,limit,cat)
{
sid=typeof sid !== 'undefined' ? a : 1;
limit = typeof limit !== 'undefined' ? limit : 0.7;
if(sid=="" || limit==""){
    document.getElementById("con").innerHTML="";
    return;
}
if(window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();
}else{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function(){
    if(xmlhttp.readyState==4 && xmlhttp.status==200){
        document.getElementById("con").innerHTML=xmlhttp.responseText;
$('#con').masonry({
      itemSelector: '.clsDeal_Blk_Cont'
    });

    }
}
xmlhttp.open("GET","getdeals.php?sid="+sid+"&limit="+limit+"&cat="+cat,true);
xmlhttp.send();
} 
```

在 getdeals.php 我有倒数计时器代码，如下所示：

```
$(document).ready(function(){
            $("#countdown_<?php echo $id; ?>").countdown({
                date: "date_from_database",
                format: "on"
            },

            function() {
                // callback function
            });
        }); 
```

感谢@user2008945 的帮助，这对我很有用，但无论如何我在页面上需要多个倒数计时器，我虽然这样的事情会做，但不幸的是不会：

```
success:function(rows){

for (var i in rows){
var row=rows[i];
var id=row[0];
var end_date=row[1];
$("#countdown_"+id).countdown({
            date: end_date,
            format: "on"
        },

        function() {
            // callback function
        });
}
} 
```

和

```
$data=array();
while($row=mysql_fetch_row($result))
{
    $data[]=$row;
}
die (json_encode($data)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:38:33.097

除非你熟悉 jquery ajax，否则这段代码不会有太大帮助，但如果你决定使用 jquery ajax，那么你可以使用这段代码：

```
$(document).ready(function(){

$.ajax({
url:"getdeals.php?sid="+sid+"&limit="+limit+"&cat="+cat,
type:"GET",
dataType:'json',
success:function(data){

//data contains value like {countDownId:'someid',countDownDate:'somedate'},
//its in json format,
// in your getdeals.php write some thing like this 
// die (json_encode(array('countDownId'=>'someid','countDownDate'=>'somedate')));

$("#countdown_"+data.countDownId).countdown({
                date: data.countDownDate,
                format: "on"
            },

            function() {
                // callback function
            });

}
});

        }); 
```

# java - LibGDX TiledMap 不渲染

> ID：14760324
> 
> 赞同：0
> 
> 时间：2013-02-07T20:24:00.500
> 
> 标签：java, render, libgdx, tile, tmx

我已经开始从 slick2d 转移到 Libgdx，我正在尝试让 .tmx 文件与 libgdx 一起使用。我遵循了 libgdx wiki 上的 TileMap 教程，但我似乎无法让我的 .tmx 文件进行渲染。当我运行它时，我没有收到任何错误，我的其他纹理渲染得很好，但是 .tmx 在哪里看不到。

我使用 libgdx-texturepacker-gui 创建包文件。如果我不得不猜测问题出在哪里，我会猜测是包文件，但我不确定它有什么问题或如何修复它。我遇到了项目桌面版本的问题（我没有尝试过任何其他版本），所有资产都在 android 资产文件夹中。

我将整个项目与资产一起上传到[dropbox](https://www.dropbox.com/s/dgqvnfa26m6e9tq/ProjectFirefly.zip)的 zip 文件中，因为我认为这样可能更容易。您能给我的任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:38:22.597

我尝试了一百万种不同的方法来让它发挥作用，但没有一个奏效。最后，我从使用“TileAtlas”更改为“SimpleTileAtlas”，不再搞乱包文件，现在它工作正常。

# c - 函数中的 C 指针赋值

> ID：14760328
> 
> 赞同：5
> 
> 时间：2013-02-07T20:24:24.553
> 
> 标签：c, function, pointers, variable-assignment

为什么我不能在函数中分配一个点。正如您在以下代码中注意到的那样。函数返回后，我无法分配指向正确地址的指针 p1。但是使用全局指针*p，我可以存储地址信息。

```
#include <stdio.h>
#include <stdlib.h>

int *p = NULL;
void test(int * pt1, int**pt2){
    p = (int*)malloc(sizeof(int));    
    pt1 = p;
    *pt2 = p;
    printf("p points to %p\n", p);
    printf("pt1 points to %p\n", pt1);
    printf("pt2 points to %p\n", *pt2);
}

int main(void) {
    int *p1 = NULL; 
    int *p2 = NULL;

    printf("p points to %p\n", p);
    printf("p1 points to %p\n", p1);
    printf("p2 points to %p\n", p2);

    test(p1, &p2);

    printf("p points to %p\n", p);
    printf("p1 points to %p\n", p1);
    printf("p2 points to %p\n", p2);

    return 0;
} 
```

输出：

```
p points to (nil)
p1 points to (nil)
p2 points to (nil)
p points to 0x8acb008
pt1 points to 0x8acb008
pt2 points to 0x8acb008
p points to 0x8acb008
p1 points to (nil)
p2 points to 0x8acb008 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T20:30:22.763

在`test`变量内部`pt1`是一个独立的指针。也就是说，它*不仅仅是*的别名`p1`，而是仅在调用生命周期内存在的副本。

因此，您对它所做的任何分配都只会在该调用期间退出，并且不会传播到它之外。当您从`test`指针返回`pt1`时不再存在并且任何更改都不会复制回来。

除了像您使用的那样使用额外的“层”指针之外，`pt2`有时还适合使用返回值与更广泛的受众“分享”更改：

```
#include <stdio.h>
#include <stdlib.h>

int *p = NULL;
int *test(int * pt1, int**pt2){
    p = (int*)malloc(sizeof(int));    
    pt1 = p;
    *pt2 = p;
    printf("p points to %p\n", p);
    printf("pt1 points to %p\n", pt1);
    printf("pt2 points to %p\n", *pt2);
    return pt1;
}

int main(void) {
    int *p1 = NULL; 
    int *p2 = NULL;

    printf("p points to %p\n", p);
    printf("p1 points to %p\n", p1);
    printf("p2 points to %p\n", p2);

    p1=test(p1, &p2);

    printf("p points to %p\n", p);
    printf("p1 points to %p\n", p1);
    printf("p2 points to %p\n", p2);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:30:04.447

您是`p1`按值传递的，因此它不会在`main`函数中更新。但是，您是通过`p2`引用传递（注意您写的是`&p2`），因此可以更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:29:24.983

您按值传递 p1 ，因此更改仅在该函数的范围内可见。传递一个指向该指针的指针，就像你对 p2 所做的那样，你很好。

```
#include <stdio.h>
#include <stdlib.h>

int *p = NULL;
void test(int **pt1, int**pt2){
    p = (int*)malloc(sizeof(int));    
    *pt1 = p;
    *pt2 = p;
    printf("p points to %p\n", p);
    printf("pt1 points to %p\n", pt1);
    printf("pt2 points to %p\n", *pt2);
}

int main(void) {
    int *p1 = NULL; 
    int *p2 = NULL;

    printf("p points to %p\n", p);
    printf("p1 points to %p\n", p1);
    printf("p2 points to %p\n", p2);

    test(&p1, &p2);

    printf("p points to %p\n", p);
    printf("p1 points to %p\n", p1);
    printf("p2 points to %p\n", p2);

    return 0;
} 
```

# ios - 允许不同的导航控制器视图有不同的方向规则

> ID：14760329
> 
> 赞同：7
> 
> 时间：2013-02-07T20:24:34.240
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller, orientation

我正在尝试遵循上一个问题，以允许导航控制器视图控制器具有不同的方向规则。[上一个问题](https://stackoverflow.com/questions/12630359/ios-6-how-do-i-restrict-some-views-to-portrait-and-allow-others-to-rotate)

例如，我有两个视图控制器，第一个是 Welcome，第二个是 Home。我希望第一个视图控制器只能是 Potrait，第二个（Home）允许端口/景观。

我不确定我是否完全了解如何完成此操作。一旦我这样做了，我打算创建一个单独的项目来解释如何做到这一点，并将该问题添加到 Github/share 以供将来参考。

在这个特定的项目中，我使用了一个侧视图控制器 github 项目。PPRevealSideViewController。

我的应用代表如下：

```
// Then we setup the reveal side view controller with the root view controller as the navigation controller
welcomeViewController = [[MESWelcomeViewController alloc] init];
UINavigationController *navController = [[MESNavViewControllerSubClass alloc] initWithRootViewController:welcomeViewController];

self.revealSideViewController = [[PPRevealSideViewController alloc] initWithRootViewController:navController];
[self.revealSideViewController setDirectionsToShowBounce:PPRevealSideDirectionNone];
[self.revealSideViewController setPanInteractionsWhenClosed:PPRevealSideInteractionContentView | PPRevealSideInteractionNavigationBar];

//self.window.rootViewController = welcomeViewController;
self.window.rootViewController = self.revealSideViewController;
[self.window makeKeyAndVisible]; 
```

从上面你可以看到我已经将导航控制器子类化为 MESNavViewController。这是我对这个文件的看法：

```
@interface MESNavViewControllerSubClass : UINavigationController {
    BOOL setLandscapeOK;
} 
```

MESNavViewController 的 Imp 文件：

```
-(void)viewDidLoad {
    NSLog(@"subclass called");
}

- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    if (self->setLandscapeOK) {
        // for iPhone, you could also return UIInterfaceOrientationMaskAllButUpsideDown
        return UIInterfaceOrientationMaskAll;
    }
    return UIInterfaceOrientationMaskPortrait;
} 
```

在我的第一个（欢迎）视图控制器中，我有以下内容：

```
-(void)viewWillAppear {
    BOOL setLandscapeOK = NO;
}
- (NSInteger)supportedInterfaceOrientations {
    // Restriction for the welcome page to only allow potrait orientation
    return UIInterfaceOrientationMaskPortrait;
} 
```

在我的第二个（主页）视图控制器中，我只有以下内容：

```
-(void)viewWillAppear {
    BOOL setLandscapeOK = YES;
} 
```

我看到的是导航中的两个视图控制器都允许任何方向。我不确定我是否理解正确。希望我提供了足够的信息。

编辑-----我已经更新了 PPRevealSidePanel 子类，它是最顶层的控制器。然后它持有导航控制器，而导航控制器又持有视图控制器。方向应由显示的视图控制器决定。

PPRevealSidePanel 子类 - ![在此处输入图像描述](../Images/886bccaf8356e2199baf5f147ef28689.png)

其次，我收到一个错误，试图在实际的视图控制器上更新这个子类的设置器 setLandscapeOK。登录视图控制器 - ![在此处输入图像描述](../Images/65a6db8410dd2ce021d3a476a944e974.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:28:46.190

你能检查一下下面关于使用导航控制器处理方向的线程吗

[导航控制器应该自动旋转](https://stackoverflow.com/questions/12827804/ios-6-boolshouldautorotate-not-getting-called-for-navigation-controllers-pus)

-anoop

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:50:49.080

在您的情况下出现的问题是您在该 UINavigationController 子类中覆盖了 -supportedInterfaceOrientations，因此该方法永远不会传递给它的子 ViewControllers。此外，您在 viewWillAppear 中声明了一个新的 setLandscapeOK BOOL，而不是更改全局。奇怪的是，根据您发布的代码，您的应用程序应该停留在纵向，不允许所有方向，因为您似乎从未在 UINavigationController 子类中将 setLandscapeOK 布尔值设置为 YES。

但是您似乎使事情变得比应有的复杂得多。你不应该需要那个 setLandscapeOK 布尔值，你不应该仅仅为了旋转问题而将 UINavigationController 或 PPRevealSideViewController 子类化。PPRevealSideViewController 和 UINavigationController 都是容器 ViewControllers，也就是包含子 ViewControllers 的父 ViewControllers。默认情况下，当在父 ViewController 上调用方向回调时，它将调用并返回与子 ViewController 相同的方法。

当在 PPRevealSideViewController 上调用 -shouldAutoRotate、-supportedInterfaceOrientations 或 -shouldAutoRotateToInterfaceOrientation 时，它将在其 rootViewController 上调用相同的方法，在您的情况下是 UINavigationController。UINavigationController 也是一个容器 ViewController 并将在当前可见的 ViewController 上调用相同的方法，在您的情况下是 WelcomeViewController 或 HomeViewController。

因此，您需要做的就是在 WelcomeViewController（仅返回纵向）和 HomeViewController（全部返回）中覆盖 -supportedInterfaceOrientations 和 -shouldAutoRotateToInterfaceOrientation。不要在 MESNavViewController 中重写这些方法，你甚至不需要这个子类。你不需要做任何其他事情。您也可以在所有 ViewController 中删除该 setLandscapeOK 布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:47:50.530

是否调用了您的 viewWillAppear 方法？实际的方法是`- (void)viewWillAppear:(BOOL)animated`。

除此之外，问题是在 viewWillAppear 之前调用了 supportedInterfaceOrientations。尝试在 initWithNibName 方法中设置 BOOL 标志。

编辑：

像这样的东西：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.setLandscapeOK = YES;
    }
    return self;
} 
```

编辑2：

我刚刚注意到您在 viewWillAppear 中将 setLandscapeOK 重新声明为一个新变量。这隐藏了该变量的超类实例。尝试使用 self.setLandscapeOK 而不是 BOOL setLandscapeOK

编辑 3：

由于您没有对主导航控制器进行子类化，因此上述内容将不起作用。您需要一种明确的方式来通知您的导航控制器它的子视图不希望它支持某些方向。当您推送仅纵向的视图控制器时，setLandscapeOK 应设置为 NO。

# php - 将无限滚动与砌体插件集成并从 MYSQL 数据库加载数据

> ID：14760330
> 
> 赞同：0
> 
> 时间：2013-02-07T20:24:43.197
> 
> 标签：php, scroll, jquery-masonry

有人可以解释一下我做错了什么吗？我尝试将无限滚动与砌体布局集成并从我的数据库加载内容。我想在向下滚动时从我的数据库中加载图片，限制为 15 张图片。

砌体布局工作正常，但我不知道无限滚动有什么问题。

这是我到目前为止所拥有的。

代码

```
<div id="container">

    <?php

    $sql_res=mysql_query("SELECT * FROM test ORDER BY id DESC LIMIT 15");
    while($row=mysql_fetch_array($sql_res))
        {
    $image_name=$row['image_name'];
    $id=$row['id'];

    ?>

<div class="box">

<a href="content.php?id=<?php echo $row['id']; ?>" ><img src="/content/<?php echo   
$image_name; ?>"></a>

</div>

<?php } ?>

</div>

<nav id="page-nav">
<a href="#"></a>
</nav> 
```

砌体的 JS 代码

```
<script src="jquery-1.7.1.min.js"></script>
<script src="jquery.masonry.min.js"></script>
<script src="jquery.infinitescroll.min.js"></script>

<script >
$(document).ready(function() {

// Initialize Masonry
$('#container').masonry({
}).imagesLoaded(function() {
    $(this).masonry('reload');
});

$container.infinitescroll({
  navSelector  : '#page-nav',    // selector for the paged navigation 
  nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
  itemSelector : '.box',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
    }
  },
  // trigger Masonry as a callback
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $( newElements ).css({ opacity: 0 });
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, true ); 
    });
  }
);

});

</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:27:05.967

Based on your example HTML, you're missing the appropriate infinite scroll setup.

```
 $container.infinitescroll({
      navSelector  : '#page-nav',    // selector for the paged navigation 
      nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2) 
```

This part of the code establishes what URL should be grabbed to load the next content. Your example is blank. You need to put in `<nav id="page-nav"><a href="#"></a></nav>` a valid URL for the infinite scroll jquery plugin to access. When it does, it will look at that page's content to append to the current page. You've appropriately configured it to look at the `.box`, but you don't have a page two to look at!

See: [Infinite Scroll | jQuery plugin](http://www.infinite-scroll.com/)

# sql - 使用联结表从两个表中获取数据

> ID：14760334
> 
> 赞同：-1
> 
> 时间：2013-02-07T20:24:52.367
> 
> 标签：sql, sql-server-2008

所以我有一个用户表，其中包含 userId 和 schoolId，它指向一个由 userId 和 courseId 组成的 userInstitution 表。指向 userInstitution 表的还有 course 表，它由 courseId 和 schoolId 组成。

用户表 --> 用户机构表 <-- 课程表

我想更新用户以分配给他们特定的课程，并且我还想知道如何选择具有特定课程的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:45:21.370

将课程分配给用户。

```
insert into userInstitution 
(userid, courseid)
values
(the ids for the course and user) 
```

为特定课程选择用户

```
select u.name
from users u join userInstitution ui on u.userid = ui.userid
join course c on ui.courseid = c.courseid
where c.name = 'name of course' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:51:53.173

Select user.* from user Join userInstitution On user.id = userInstitution.userId Join course On course.id = userInstitution.courseId Where course.id=321

This sql will give you all users which are enrolled to course with id 321

# utf8-decode - 表格中的 R&OS php pdf €

> ID：14760336
> 
> 赞同：0
> 
> 时间：2013-02-07T20:24:59.707
> 
> 标签：utf8-decode, ezpdf

我都是，我`R&OS`用来生成PDF。在我开始制作发票之前一切都很好，因为我需要打印货币。我用了我所有的知识，但没有解决我的问题。

代码在这里：

```
$pdf->ezText(utf8_encode(getDescription()),12,array('justification' => 'center')); 
$pdf->ezSetDy(-10);
$pdf->ezText(utf8_encode(getCurrency()), 12, array('justification' => 'center')); 
$pdf->ezSetDy(-10); 
```

`getDescription()`返回包含诸如“é,à,ç”之类的字符并`getCurrency()`返回诸如“€、$、£”之类的值的字符串 PDF 的描述很好，我可以看到特殊字符，但货币总是错误的。

有关信息，utf8_decode 打印“？” utf_encode 打印“â,-”（类似于最后一个字符）

我正在寻求帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:59:52.067

首先，我强烈建议您使用最新版本。使用此版本，您可以构建 unicode 文档（如有必要），但这需要 unicode 字体 (*.ufm)

对于 ansi 输出，我已经用欧元字形修改了字体示例，所以请看一下： [this example](http://pdf-php.sourceforge.net/pdf-php-code/examples/fonts.php) built using [this php code](http://pdf-php.sourceforge.net/pdf-php-code/examples/fonts.phps)。

# python - 如何从 Python 中的字符串中删除换行符和缩进？

> ID：14760337
> 
> 赞同：1
> 
> 时间：2013-02-07T20:25:07.930
> 
> 标签：python, string

在我的 Python 脚本中，我有一个永远持续下去的 SQL 语句，如下所示：

```
query = """
    SELECT * FROM
        many_many
        tables
    WHERE
        this = that,
        a_bunch_of = other_conditions
""" 
```

让它像单行一样阅读的最佳方法是什么？我试过这个：

```
def formattedQuery(query):
    lines = query.split('\n')

    for line in lines:
        line = line.lstrip()
        line = line.rstrip()

    return ' '.join(lines) 
```

它确实删除了换行符，但没有从缩进中删除空格。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T20:27:25.457

你可以这样做：

```
query = " ".join(query.split()) 
```

`select * from users where name = 'Jura X'`但如果您的 SQL 查询包含带有空格或制表符的字符串（例如），它就不会很好地工作。这是使用`string.replace`正则表达式的其他解决方案的问题。所以你的方法还不错，但你的代码需要修复。

您的函数实际上有什么问题 - 您返回原始值， lsplit 和 rsplit 的返回值被放弃。你可以像这样修复它：

```
def formattedQuery(query):
  lines = query.split('\n')
  r = []

  for line in lines:
    line = line.lstrip()
    line = line.rstrip()
    r.append(line)

  return ' '.join(r) 
```

另一种方法：

```
def formattedQuery(q): return " ".join([s.strip() for s in q.splitlines()]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:34:34.987

另一行：

```
>>> import re

>>> re.sub(r'\s', ' ', query)

'SELECT * FROM many_many tables WHERE this = that, a_bunch_of = other_conditions' 
```

这会将字符串中的所有空格字符替换`query`为单个`' '`空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:33:26.923

string.translate 可以删除字符（只需为第二个参数提供 None ，因此它也不会转换字符）：

```
import string
string.translate(query, None, "\n\t") 
```

# java - 片段内的非法封闭实例

> ID：14760339
> 
> 赞同：1
> 
> 时间：2013-02-07T20:25:11.207
> 
> 标签：java, android, class

我有这个代码：

```
MainFragmentActivity a = new MainFragmentActivity();
MainFragmentActivity.MasterFrag mm = a.new MasterFrag(); // a.new
MainFragmentActivity.MasterFrag.MasterTask e = mm.new MasterTask();
e.execute(); 
```

在`a.new`上面引用的行中，它有一个问题`a`。它说：

```
Illegal enclosing instance specification for type MainFragmentActivity.MasterFrag 
```

此代码块位于 a 内`Fragment`（非静态）内的静态方法内`FragmentActivity`。我不确定如何声明这个`a`变量？拨打这个`static`电话也不是一种选择......我怎样才能获得对`MainFragmentActivity`实例的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-25T20:08:16.317

如果内部类 MasterFrag 被声明为静态，我相信你会得到这个编译错误。实例化它的正确方法是：

```
MainFragmentActivity.MasterFrag mm = new MainFragmentActivity.MasterFrag(); 
```

# c# - 在 div 中包装 foreach 循环的一部分

> ID：14760344
> 
> 赞同：2
> 
> 时间：2013-02-07T20:25:26.540
> 
> 标签：c#, razor, asp.net-mvc-4

我试图在文档中的第二项之后包装所有内容。这是不起作用的代码。它正在 Razor 视图中使用。

```
@{var j = 0; var count = 10;}
@foreach (var reply in comment.CommentReply.OrderBy(x => x.DateCreated))
{

    if (j == 2 && count > 2) {
        <div class="hidden-replies">
    } 

    Html.RenderPartial("_Reply", reply);

    j++;
    if (j == count && count > 2) {
        </div>
    }

} 
```

我相信它仍在等待关闭 div，因此不会读取 else 。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T20:28:36.737

您需要在半标签前面加上前缀，`@:`以防止 Razor 解析 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:50:14.167

我误解了原来的问题。忽略以下内容：

尝试这样的事情：

```
@{var j = 0; var count = 10;}
@foreach (var item in replies)
{    
    if(j <= 2)
    {
        Html.RenderPartial("_Reply", item);
    }

    if (j == 3) {
        <div class="hidden-replies">
    }

    j++;

    if (j == count) {
        </div>
    }
} 
```

# ruby - Instagram Ruby 标签喜欢获取 TypeError

> ID：14760345
> 
> 赞同：0
> 
> 时间：2013-02-07T20:25:28.563
> 
> 标签：ruby, tags, instagram

我想显示标签所具有的每种媒体的喜好。我得到了正确的号码。的喜欢在终端，但该网站返回一个错误：

TypeError: nil 不能被强制转换为 Fixnum

文件：base.rb 位置：+ 行：96

```
 mtag = Instagram.tag_recent_media("tag")

 if mtag.has_key? "data"
    mtag.data.each do |media| 
      if media["likes"]["count"] > 0
        puts media["likes"]["count"]
      end
    end
 end 
```

多谢，

埃斯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:28:42.300

看起来 media["likes"] 为 nil 或 media["likes"]["count"] 为 nil

尝试：

```
if mtag.has_key? "data"
  mtag.data.each do |media| 
      puts "#{media['likes']}  <<< MEDIA LIKES"
  if media["likes"] &&  media["likes"]["count"]
      puts media["likes"]["count"]
    end
  end
end 
```

它会输出什么？

# regex - 正则表达式中的前瞻

> ID：14760355
> 
> 赞同：1
> 
> 时间：2013-02-07T20:26:25.350
> 
> 标签：regex, lookahead

我正在尝试从包含使用正则表达式的几篇文章的文件中提取场地。我知道场地以 For/From 开头，然后是日期，该日期以一周中的某一天开头，如果缺少日期，则以作者姓名开头，我编写了以下正则表达式来匹配场地，但它始终匹配所有内容，直到作者的名字，这意味着如果该文章有日期，日期也会出现在场地中。

```
"""((?<=\n)(?:(?:\bFrom\b)|(?:\bFor\b)).*?(?=(?:(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)|(?:[A-Z]+))))""".r 
```

如果遇到我的代码为什么不匹配日期，而是继续匹配作者姓名 [AZ]。

输入：“国家间敌对行动的后果

来自纽约邮报。

1787 年 11 月 20 日，星期二。

汉密尔顿

致纽约州人民：”

“1787 年 11 月 20 日，星期二”这一行。是可选的，可能不会出现在所有文章中。我希望输出为“来自纽约邮包”。对于没有日期的文章，我得到了正确的输出，但是我得到了“来自纽约邮包”的输出。

1787 年 11 月 20 日，星期二。”查看包含日期的文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:18:07.243

根据您的编辑，您真正需要的是

```
^(From|For).* 
```

带有多行标志。

* * *

> 我知道场地以 For/From 开头
> 
> 后跟以星期几开头的日期或作者姓名（如果缺少日期）
> 
> 它总是匹配直到作者姓名的所有内容，这意味着如果该文章有日期，日期也会出现在场地中。

听起来您想在以“From”或“For”开头的文本文件中查找整行

```
^(From|For) 
```

*（设置多行标志以`^`匹配行的开头而不是输入的开头）。*

后跟一个可选日期

```
\s+(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)? 
```

后跟作者姓名

```
\s+\w+\s+\w+ 
```

紧随其后，直到行尾

```
.* 
```

**除非，当然，**您的意思是要跳过日期并仅匹配 For/From 和作者姓名（而不是日期）。这不能仅在 Regex 中完成 - 不过，您可以使用分组来提取所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T17:11:18.177

您只需要捕获以 For 或 From 开头的整行，因此您可以简单地使用它：

```
^(For|From).*$ 
```

^ 和 $ 将匹配锚定到行的开头和结尾，而 .* 匹配中间的所有内容。

在这里，用您喜欢的任何示例[进行尝试。](https://regex101.com/r/XBJBbM/1)

如果这需要更复杂，我会更新我的答案。

# xhtml - 索引 XML 属性以及 CLucene 中的纯文本

> ID：14760362
> 
> 赞同：0
> 
> 时间：2013-02-07T20:26:37.047
> 
> 标签：xhtml, indexing, document, payload, clucene

我已经能够在 iOS 上编译 CLucene 项目，目前正尝试在我的 iOS 应用程序中使用它。我正在尝试索引 xhtml 文档，并且已经能够通过从这些文档中提取文本节点来做到这一点，然后通过将它们连接在一起来在 lucene 中进行索引，以便一个 xhtml 文档中的所有文本出现在一个单一的Lucene 文档。

但是，我的 xhtml 文档的每个文本节点都有自定义属性，因此当对索引文本进行搜索时，我也应该能够获得与该文本关联的属性。

我的 xml 数据如下所示：

```
<span data-value="/1/2/3">This is a sample text for this span</span>
<span data-value="/2/3/4">This is a example text for another span</span>
<span data-value="/3/4/5">Searching for this span text</span> 
```

因此，当我从 Lucene 索引中搜索单词样本时，我应该能够检索归因于单词 Sample 关联的数据值。在上述情况下，它将是 data-value="/1/2/3"。

我创建索引的方式是将数据值属性和文本节点字段连接在一起，然后由 Lucene 对其进行索引。这样，每当我的搜索结果返回时，它也会返回与之一起属性的数据值。我可以评估属性值，并且在搜索时会从显示结果中完全删除该属性。但是，对于包含在跨度文本中的大文本，情况并非如此，其中可能会返回搜索的单词，但数据值属性可能不是搜索结果的一部分，在显示时可以进一步剥离。

但是，我认为这不是索引 XML 属性及其文本数据的最佳方式。

如果有人可以帮助我使用该方法来索引文本与其属性之间的关系，我将不胜感激。

更新：我发现从文本生成的令牌可以有与之关联的有效负载，所以我在想，如果我们可以将 XML 属性内置为我的整个字符串的有效负载，可以将其视为单个令牌（如果我不分析文本），可能对我的目的有用。我想知道是否有人可以帮助我确定这是否适合我的情况。非常感谢您的帮助。

谢谢和问候， 阿希什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:46:10.323

如果您想将所有 XHTML 文本保存为一个 Lucene 文档，那么有效负载可能是您要走的路。

另一种方法是创建一个文档 ID 字段（如“documentID:42”和一个表示此 Lucene 文档是连接在一起的整个文档的字段（如“AllOfDocument:42”）。这将允许您单独索引每个文本节点并将属性限制为该节点的属性，同时仍将该文本节点绑定到整个文档。使用这种方法，您可以将属性放在文本节点 Lucene 文档中自己的字段中，而不必使用有效负载。可能更简单.

# twilio - TwimlResponse 与 openvbx 的 twiml.php 中的响应

> ID：14760363
> 
> 赞同：0
> 
> 时间：2013-02-07T20:26:42.707
> 
> 标签：twilio

许多旧插件使用 $Response = new Response() 而不是当前插件文档显示的内容： $Response = new TwimlResponse;

我使用 openvbx 1.2 版创建了一个插件，但是当推送到 0.9 版生产时，它似乎无法将 TwimlResponse 识别为一种方法。

我将 TwimlResponse 替换为 Response，但看起来 .9 无法识别 $_REQUEST['From']。有谁知道 0.9 中从号码中拉出呼叫的方法是什么？

升级我们的生产 OpenVBX 实例是否有任何顾虑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:37:16.520

这不是 OpenVBX 本身的问题，而是幕后的 Twilio PHP 库。正如您所看到的，在这些 OpenVBX 版本之间有许多库更新，这给您带来了压力。

我的建议是备份您的 0.9 安装并测试升级到 1.2.x，如果一切正常，则进行真正的升级。

# go - 如何对 Go 程序进行沙箱化

> ID：14760365
> 
> 赞同：9
> 
> 时间：2013-02-07T20:26:56.707
> 
> 标签：go, sandbox

问：有没有办法对 Go 程序进行沙箱化？
答：是的。请参阅[带有 Go](http://developers.google.com/appengine/docs/go/)或[play.golang.org 的GAE](http://play.golang.org)

这是怎么做到的？

在我的特殊情况下，我希望允许用 Go 编写不受信任的扩展。我想 Go Playground 正是我所需要的。它是开源的吗？或者至少有一些关于如何构建类似服务的文档？

### 笔记：

[code.google.com/p/go-playground](http://code.google.com/p/go-playground)是 Go Playground 编辑器的源代码。但是沙盒隐藏在 POST 的后面`http://golang.org/compile?output=json`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T20:57:58.137

操场沙盒技术，AFAIK，不是开源的。我认为，其中一个原因是，公开披露实施细节将使任何攻击尝试变得更加容易。

如果滚动您自己的沙箱，我建议提供 {unsafe,runtime,net,os,syscall} 包的假/空/受限版本，并禁止 GOMAXPROCS 高于 1。但设计必须根据您的定义量身定制的沙盒。文件访问是/否/限制？网络是/否/受限？等等...最后但并非最不重要的一点是，可能应该禁用 CGO、汇编代码甚至可能构建标签。

考虑到上面的列表是不完整的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-23T09:55:33.610

根据[http://blog.golang.org/playground](http://blog.golang.org/playground)，go playground 中的沙箱使用 NaCl 来限制 CPU 和 RAM 的使用。它的代码已合并到 go 版本 1.3。

# java - infinispan 缓存服务器过期失败

> ID：14760367
> 
> 赞同：2
> 
> 时间：2013-02-07T20:27:05.270
> 
> 标签：java, caching, infinispan

我使用 infinispan-5.1.6.FINAL 作为远程缓存服务器和热棒协议来访问它。但发现它没有按预期工作，即按照下面的配置，在 1ms 后不会驱逐键的缓存值

```
<infinispan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:infinispan="urn:infinispan:config:5.1"
    xsi:schemaLocation="urn:config:5.1 http://www.infinispan.org/schemas/infinispan-config-5.1.xsd">
    <global >
        <globalJmxStatistics enabled="true"/>
    </global>

    <namedCache name="my-cache">
        <expiration lifespan="1" maxIdle="1" reaperEnabled="true" wakeUpInterval="1" />
    </namedCache>
</infinispan> 
```

我爆炸了战争（infinispan-5.1.6.FINAL/modules/rest/infinispan-server-rest.war），保存了上面的配置，更改了web.xml以使用它并部署在tomcat 6.0.32

通过这个资源，我能够放入缓存并从中检索

```
http://localhost:8080/infinispan-server-rest/rest/my-cache/1 
```

但即使在 10 分钟后，该条目也不会被驱逐。顺便说一句，相同的配置在嵌入式缓存模式下工作。

我错过了什么？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:30:18.660

REST 服务器的默认行为是无限期地存储条目，而不管缓存设置如何。如果要使用缓存的默认过期设置，则必须指定`timeToLiveSeconds=0`和`maxIdleTimeSeconds=0`。

这可能会在未来的版本中发生变化，请参阅[https://community.jboss.org/message/796785#796785](https://community.jboss.org/message/796785#796785)。

# ios - 在运行时更改 UIBackgroundModes 音频

> ID：14760370
> 
> 赞同：3
> 
> 时间：2013-02-07T20:27:15.637
> 
> 标签：ios, info.plist

我有一个播放音乐的应用程序，我想启用背景模式。我的音频类别设置为 kAudioSessionCategory_MediaPlayback，如果我在 info.plist 文件中的 UIBackgroundModes 中添加**音频****字符串**，它会继续播放音频。到目前为止，一切都很好。

 **现在我想给我的用户这个选项，选择音频是否在后台播放。我尝试获取文件并删除密钥，但到目前为止没有任何反应。我所做的是（在由 UIButton 处理的选择器中）：

```
 -(void) disableBackgroundAudio:(UIButton*)button{
        NSDictionary *plistDict = [[NSBundle mainBundle] infoDictionary];
        [plistDict setValue:@"" forKey:@"UIBackgroundModes"];
    } 
```

如果我在控制台之前和之后打印这个值，我可以看到它之前有“音频”，在调用它之后，我得到一个空白字符串。但是，如果我然后按下主页按钮，无论我是否禁用音频，音频都会一直播放。

我的猜测是，这可能不是更新 info.plist 文件的方法（尽管我不确定它是否可能）。这可能吗？毕竟我认为给用户一个选择对我的特定应用程序来说更好，而且我已经看到其他应用程序这样做了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:39:56.637

这`Info.plist`是您应用程序包的一部分。**此捆绑包中的所有文件都是不可变的。**

保留该`audio`值并在应用程序进入后台时暂停音乐（以防用户关闭该选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:30:52.290

为什么要以这种方式解决它？如果用户不想听到背景音频，只需在应用程序进入后台时关闭音乐......无论如何，您可能不应该在运行时修改应用程序 plist..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:31:46.797

如果用户不希望后台运行，您不能在您的应用程序进入后台时停止音频吗？此外，如果您希望您的应用程序在用户不希望后台运行时在后台完全退出，则调用 exit(...) 函数。

但是在回答您的问题时，不，您不能在运行时更改背景模式（或 info.plist 中的任何内容）。**

# javascript - Twitter引导导航栏选项卡“隐藏”事件？

> ID：14760380
> 
> 赞同：1
> 
> 时间：2013-02-07T20:27:51.660
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 twitter-bootstrap 导航栏与选项卡结合通过 ajax 加载表单（我使用 Django 来提供表单）

```
<ul class="nav nav-pills" id="tabs">
    <li><a href="#form1" data-toggle="tab">Form1</a></li>
    <li><a href="#form2" data-toggle="tab">Form2</a></li>
    <li><a href="#form3" data-toggle="tab">Form3</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane" id="form1" data-src="{% url form1 %}"></div>
    <div class="tab-pane" id="form2" data-src="{% url form2 %}"></div>
    <div class="tab-pane" id="form3" data-src="{% url form3 %}"></div>
</div> 
```

这与 jquery 相结合：

```
$('#tabs').bind('show', function(element) {
  paneID = $(element.target).attr('href');
  src = $(paneID).attr('data-src');
  $(paneID).load(src);
}); 
```

首先，我的一部分想知道这是否是一个坏主意。我想不出一个原因，但如果有人可以向我指出这种方法是否有任何缺点，我将不胜感激。

其次，当我离开选项卡时，我想触发该选项卡内容的“onunload”事件。但是，当导航离开时，我似乎找不到从选项卡“卸载”数据的方法。

```
$('#tabs').bind('hide', function(element) {
  doStuff();
}); 
```

显然无效。任何帮助/指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T02:30:53.300

Bootstrap 选项卡在显示选项卡时触发一个事件。

[http://getbootstrap.com/2.3.2/javascript.html#tabs](http://getbootstrap.com/2.3.2/javascript.html#tabs)

取自引导程序：

```
$('a[data-toggle="tab"]').on('shown', function (e) {
  e.target // activated tab
  e.relatedTarget // previous tab
}) 
```

您可以使用relatedTarget。那是刚刚“卸载”的选项卡。

# r - 如何控制 lattice xyplot 中多个因变量中的每一个的绘图类型？

> ID：14760384
> 
> 赞同：2
> 
> 时间：2013-02-07T20:28:01.813
> 
> 标签：r, lattice

假设您有一个数据集，其中一个因变量具有多个因变量。您可以将`xyplot`它们简单地绘制为`xyplot(y1+y2~x, data=d)`. 您将如何`y1`使用一种绘图类型（例如点）和`y2`不同的绘图类型（例如线条）进行绘图？

一个可重现的例子：

```
my.df <- data.frame(time=c(1:20), lower.lim=runif(n=20, min=1,max=4),
                    upper.lim=runif(n=20, min=6,max=9),
                    observed=runif(n=20,min=0,max=10))

xyplot(lower.lim + upper.lim + observed ~ time, data=my.df, type=c("p","l")) 
```

绘制`lower.lim`和`upper.lim`as`type="s"`和`observed`as`type=c("p","l")`

我认为这应该可以通过自定义`panel`函数实现，但我无法弄清楚如何分别对每个因变量进行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T00:06:34.710

您可以与参数一起使用`panel.groups`within来检测当前正在绘制哪个变量。`panel.superpose``group.number`

```
panelfun <- function(...,type,group.number) {
    if (group.number==3) {
        panel.points(...)
        panel.lines(...)
    } else {
        panel.points(...,type="s")
    }
}

xyplot(lower.lim+upper.lim+observed ~ time, data=my.df,
    panel=function(...) panel.superpose(...,panel.groups=panelfun),
       col=c(1,1,2)) 
```

# c - 如何让 Cilk 与 Cygwin 一起工作？

> ID：14760385
> 
> 赞同：0
> 
> 时间：2013-02-07T20:28:02.877
> 
> 标签：c, cygwin, cilk, cilk-plus

我已经下载了这两个程序，但我在谷歌上没有看到让 Cilk 在 Cygwin 上工作的说明。有没有可以工作的 Cygwin 软件包？我正在用 C 编程并安装了 gcc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:33:14.783

从源代码构建它。

这将链接`cygwin32.dll`到与 cygwin 一起工作所必需的二进制文件。

这是一个指南：[http](http://groups.csail.mit.edu/sct/wiki/index.php?title=Cilk_Plus_Installation_Guide) ://groups.csail.mit.edu/sct/wiki/index.php?title=Cilk_Plus_Installation_Guide从源代码构建它`gcc`。

# richfaces - ajax调用呈现时A4j不调用动作

> ID：14760387
> 
> 赞同：0
> 
> 时间：2013-02-07T20:28:07.133
> 
> 标签：richfaces, ajax4jsf

我正在使用 RichFaces 4.2.3 和 JSF 2.1。

我正在尝试在使用以下代码在屏幕上单击按钮后呈现的块内执行 ajax 请求。

```
<a4j:commandLink value="Deletar"
     execute="@form"
     render="result"
     action="#{transacaoBean.deletar(10) }"/> 
```

呈现结果时，我在 javascript 控制台中收到以下错误：

```
Uncaught TypeError: undefined is not a function (program):1 - (anonymous function) (program):1
runScripts jsf.js.xhtml:335 - doUpdate jsf.js.xhtml:961
response jsf.js.xhtml:2062 - richfaces.queue.response richfaces-queue.js.xhtml:413
jsf.ajax.response richfaces-queue.js.xhtml:50 - onComplete jsf.js.xhtml:1236
AjaxEngine.req.xmlReq.onreadystatechange jsf.js.xhtml:1217 
```

如果我尝试使用相同的`a4j:commandLink`代码，但在加载页面时呈现标签，它可以工作。当 a4j 呈现为部分响应时，我是否必须做一些不同的事情才能使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:20:04.010

问题出在莫哈拉身上。我在屏幕上有两个表格，但屏幕上有多个表格存在问题。现在我在所有东西上都使用了一个大表格，它工作正常。

# ruby-on-rails - Ruby on Rails：Twitter Bootstrap 单选按钮不起作用（选择不会保留）

> ID：14760389
> 
> 赞同：1
> 
> 时间：2013-02-07T20:28:14.513
> 
> 标签：ruby-on-rails, button, twitter-bootstrap, radio-button

我正在开发一个同时使用 Twitter Bootstrap 和 jQuery UI 的 Ruby on Rails 应用程序。据我所知，两者之间的大多数（也许是全部？）不兼容问题都已解决（并且我已安装并包含在资产管道中的最新 gem）。这个问题与jQuery UI并没有太大关系，我只是认为这可能是一个很好的知识，以防万一我不知道那里存在兼容性问题......

无论如何 - 我只是试图在用户页面上包含一些垂直堆叠的单选按钮，并且由于某种原因单选按钮的行为就像常规按钮一样。起初，我将此归因于可能的错字`data-toggle="buttons-raadio"`或类似的愚蠢，但经过检查，我没有发现我的代码和[文档](http://twitter.github.com/bootstrap/javascript.html#buttons "文件")中建议的格式有任何区别。最终，我感到沮丧，只是直接从[文档](http://twitter.github.com/bootstrap/javascript.html#buttons "文件")中复制粘贴代码（HTML 和 Javascript 以启用按钮）进行石蕊测试，我得到了相同的行为。

所以，如果你没有点击链接，[文档](http://twitter.github.com/bootstrap/javascript.html#buttons "文件")给出了一个简单的例子，如下所示：

```
 <!-- HTML -->
    <div class="btn-group" data-toggle="buttons-radio">
      <button type="button" class="btn btn-primary">Left</button>
      <button type="button" class="btn btn-primary">Middle</button>
      <button type="button" class="btn btn-primary">Right</button>
    </div>

    /Javascript
    <script> 
      $('.nav-tabs').button();
    </script> 
```

那么，有什么关系呢？为什么单击时未将“活动”类添加到单选按钮？我确实发现它说在课堂上使用它很有趣`.nav-tabs`，而不是`.btn`（我试图无济于事，它只是弄乱了 btn-primary 的漂亮格式，但仍然没有提供正确的功能），但我猜`.nav-tabs`过滤到沿线某处的按钮。

另外，所以我决定检查[文档](http://twitter.github.com/bootstrap/javascript.html#buttons "文件")上的 html ，果然我得到了完全相同的 HTML 加上相同的 JavaScript 调用......我不知所措。

提前感谢您的任何和所有答案。

-毫米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:26:43.327

我做了更多的研究，这似乎是 twitter bootstrap 和 jquery-ui 之间的兼容性问题，两者的具体宝石如下：

*   宝石'bootstrap-sass'，'2.1'
*   gem "jquery-ui-rails", "~> 4.0.0"

所以我实际上并没有使用 bootstrap/jquery-ui 捆绑的 gem，这可能是我的问题的一部分。单击按钮时，我会收到一个 Javascript 错误：

```
 Uncaught Error: cannot call methods on button prior to initialization; attempted to call method 'toggle' (jquery.js: 552)
   Full trace:
    Uncaught Error: cannot call methods on button prior to initialization; attempted to call method 'toggle' jquery.js:552
    jQuery.extend.error jquery.js:552
    (anonymous function) jquery.ui.widget.js:183
    jQuery.extend.each jquery.js:661
    jQuery.fn.jQuery.each jquery.js:272
    $.fn.(anonymous function) jquery.ui.widget.js:179
    (anonymous function) bootstrap-button.js:93
    jQuery.event.dispatch jquery.js:3333
    elemData.handle.eventHandle jquery.js:2942 
```

如果我用该`.button()`方法实例化每个按钮，我会收到一个不同的错误：

```
 Uncaught Error: no such method 'toggle' for button widget instance (jquery.js:552)
    Full error trace:
     Uncaught Error: no such method 'toggle' for button widget instance jquery.js:552
     jQuery.extend.error jquery.js:552
     (anonymous function) jquery.ui.widget.js:187
     jQuery.extend.each jquery.js:661
     jQuery.fn.jQuery.each jquery.js:272
     $.fn.(anonymous function) jquery.ui.widget.js:179
     (anonymous function) bootstrap-button.js:93
     jQuery.event.dispatch jquery.js:3333
     elemData.handle.eventHandle jquery.js:2942 
```

为了解决这个问题，我`my-button`为每个按钮添加了一个类，并自己进行点击处理（请记住，您必须确保`active`根据单击的按钮添加和删除类，我正在通过`addClass()`和`removeClass()`方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:49:39.410

在您的最后评论之后，我已经更改了我的答案。这是我的一个网站中运行良好的示例。我无需拨打任何电话即可启用单选按钮功能。我已经在我的页面上包含了所有正在加载的引导 js 文件的列表。您的站点中可能没有加载 bootstrap-button.js 文件。

```
<head>
    <script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-affix.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>

</head>

<div class="stx-button-row">
    <div class="btn-group" data-toggle="buttons-radio">
        <button class="btn stx-button active" id="stx-and" type="button">
            AND
        </button>
        <button class="btn stx-button" id="stx-or" type="button">
            OR
        </button>
    </div>
</div> 
```

# ios - 如何在我的 MKMapView 中获得更细粒度的跨度

> ID：14760390
> 
> 赞同：2
> 
> 时间：2013-02-07T20:28:19.663
> 
> 标签：ios, mkmapview

我正在使用 MKMapView 并且我正在像这样初始化：

```
homeLocation.latitude = 42.033126;
homeLocation.longitude = -70.168621;

[self.mapView setCenterCoordinate:homeLocation animated:NO];

MKCoordinateRegion viewRegion;

viewRegion.center = homeLocation;
viewRegion.span = MKCoordinateSpanMake(1.7, 1.7);

[self.mapView setRegion:[self.mapView regionThatFits:viewRegion] animated:NO]; 
```

这是我的应用程序

![在此处输入图像描述](../Images/e35d1cd735e86dda4b36bea4cba5e3e4.png)

没关系，除了我的应用程序我需要把它缩小一点。但是当我尝试这个时：

```
viewRegion.span = MKCoordinateSpanMake(1.8, 1.8);   // use span of 1.8, not 1.7 
```

我明白了：

![在此处输入图像描述](../Images/f8044019e569aea3a5384e576dfb4abd.png)

它被缩小了。如果我查看 MKMapView 的区域，latitudeDelta 我是 3.54981，longitudeDelta 是 3.51562。

如何将跨度设置为 1.7 到 3.5 之间的值？对于这个特定的应用程序，我很想达到 2.25 左右。

注意：mapview 捏缩放到我想要的任何跨度都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T23:10:41.140

MKCoordinateSpanMake 使用度数，1 度约为 69 英里。如果您想要更细粒度的设置，请改用 MKCoordinateRegionMakeWithDistance。

```
CLLocationCoordinate2D homeLocation;
homeLocation.latitude = 42.033126;
homeLocation.longitude = -70.168621;

[self.mapView setCenterCoordinate:homeLocation animated:NO];

 MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance( homeLocation, 200000, 200000);
// 200000 meter is approximately 1.8 degree
[self.mapView setRegion:[self.mapView regionThatFits:viewRegion] animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:32:51.047

你在设备上试过吗？有时我对设备上的缩放级别的控制比在模拟器上的控制要多。

# css - CSS 下拉菜单在 IE7 中不起作用

> ID：14760392
> 
> 赞同：0
> 
> 时间：2013-02-07T20:28:26.597
> 
> 标签：css, internet-explorer, internet-explorer-7, hover

我有一些下拉菜单在除 IE7 之外的所有应用中都非常好用，不幸的是，我的老板在兼容模式下运行 IE8，所以他希望修复它们……我不确定问题是什么：

```
.m-main-nav li ul {
display: none;
top: 24px;
left: -41px;
float: left;
width: 190px;
z-index: 999999;
position: absolute;
background: none;
background-color: none;
opacity: .9;}

.m-main-nav li:hover > ul {display: block;}

.m-main-nav li ul li {
min-width: 180px;
padding: 0;
background-image: none;
text-decoration: none;
border: solid 1px #bfa049;
border-top:0px;
vertical-align: bottom} 
```

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:45:25.603

您确定 IE7 在标准模式下运行吗？确保您有正确的文档类型，例如

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

在你的 html 中。否则`:hover`将不适用于任意元素，而仅适用于`<A>`.

# java - 如何使用带有jsoup的html解析来获取图像

> ID：14760396
> 
> 赞同：0
> 
> 时间：2013-02-07T20:28:37.773
> 
> 标签：java, android, html-parsing, jsoup

我想使用带有jsoup的html解析来获取所有图像。我使用下面的代码；

```
Elements images = doc.select("img[src~=(?i)\\.(jpe?g)]");
        for (Element image : images) {

            //System.out.println("\nsrc : " + image.attr("src"));
            arrImageItem.add(image.attr("src"));

        } 
```

我解析这个方法所有的图像，但我想解析这个 url

> [http://tvrehberi.hurriyet.com.tr/images/742/403742.jpg](http://tvrehberi.hurriyet.com.tr/images/742/403742.jpg)

我想解析这个网址的开头

> [http://tvrehberi.hurriyet.com.tr/images](http://tvrehberi.hurriyet.com.tr/images) .....jpg

如何得到这样的解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:48:21.447

这可能会给你你所要求的，虽然你的问题有点不清楚，所以我不能确定。

```
public static void main(String args[]){

    Document doc = null;
    String url = "http://tvrehberi.hurriyet.com.tr";
    try {
        doc = Jsoup.connect(url).get();
    } catch (IOException e1) {
        e1.printStackTrace();
    }

    for (Element e : doc.select("img[src~=(?i)\\.(jpe?g)]")) {
        if(e.attr("src").startsWith("http://tvrehberi.hurriyet.com.tr/images")){
            System.out.println(e.attr("src"));
        }
    }
} 
```

因此，这可能不是一个非常“干净”的解决方案，但 if 语句将确保它只打印服务器上 /images/ 目录中的图像 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:19:18.210

如果我理解正确，您希望检索到某一点的 URL 路径并切断其余部分。你甚至每次都必须这样做吗？如果您在示例中仅使用来自一个站点的 URL，则可以将其存储`"http://tvrehberi.hurriyet.com.tr/images"`为常量，因为它永远不会改变。另一方面，如果您从许多不同的站点获取 URL，则可以按照[此处](https://stackoverflow.com/questions/3990640/could-you-share-a-link-to-an-url-parsing-implementation/3990658#3990658)所述解析您的 URL 。
无论如何，如果您分享解析 URL 的目的，我们当然可以为您提供更多帮助。

# wordpress - 将这些重写 apache 规则转换为 nginx

> ID：14760402
> 
> 赞同：0
> 
> 时间：2013-02-07T20:29:12.120
> 
> 标签：wordpress, apache, .htaccess, nginx

在我的 Wordpress 中，我更改了帖子的永久链接结构。为了不让旧链接出现 404 错误，我想将旧的永久链接重定向到新的永久链接。[据此](http://yoast.com/wp-content/permalink-helper.php)，必须在我的 .htacess 中添加以下代码，以便我可以从旧帖子链接到新帖子链接的重定向工作：

```
RedirectMatch 301 ^/([0-9]{4})/([0-9]{2})/([^/]+).html$ http://myurl.com/$3 
```

这很好，但是，我不使用 Apache——我使用 nginx。如何将此规则转换为 nginx？我已经尝试过 apache 到 nginx 在线转换器，但没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:49:24.903

我相信这就是你想要的。根据[this](http://wiki.nginx.org/HttpRewriteModule) page，“永久”是301。

```
rewrite "^/([0-9]{4})/([0-9]{2})/([^/]+).html$" http://myurl.com/$3 permanent; 
```

# android - 无法使用 Google API 作为目标创建 AVD

> ID：14760409
> 
> 赞同：3
> 
> 时间：2013-02-07T20:29:34.403
> 
> 标签：android

在 Mac 上的 Eclipse 中，我`Google APIs`在 下安装了包`Android 4.2 (API 17)`，但是当我为设备创建 AVD 时，`3.7" WVGA (480 x 800: hdpi)`在.`Target``Google APIs (Google Inc.) - API Level 17)`

但是在我在 Windows 上的 Eclipse 中，该选项就在那里。

![在此处输入图像描述](../Images/64a2733a2a271764c155b78fef2906a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:47:08.893

你在 mac 上也有这个选项，它与 Windows 没有什么不同：

![在此处输入图像描述](../Images/a625b548edf43fb944c21458b95acec6.png)

# ruby-on-rails - 如何使用 nginx 和 capistrano 在 rails 中正确部署静态和编译资产？

> ID：14760411
> 
> 赞同：2
> 
> 时间：2013-02-07T20:29:36.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline, rvm-capistrano

在我的项目中，我尝试将我的大部分 js 库捆绑到 gems 中，以便可以在必要时更新和拉入它们，但是，我最近设置了我们的生产服务器，并且在资产编译和静态资产方面遇到了问题/公共/资产。

具体来说，当我不使用资产管道时，我对尝试使用的数据表或任何其他 JS 库或 css 没有任何问题。我在生产环境中预编译我的资产并使用典型的 nginx 设置（基于 railscast #335）为它们提供服务。

静态资产如下 -

公共/资产

```
javascript/jquery.formatCurrency-1.4.0.min.js
stylesheets/datepicker.css
twitter/bootstrap/bootstrap-datepicker.js 
```

公共/资产是这些的正确位置吗？

当我使用 capistrano 部署时，这些资产在加载页面时会得到 404，并且实际上并未复制到服务器上的 /public/assets 目录。

加载其他页面时，我正在调用数据表插件，如下所示

```
$('#inventory_item_list_datatable').dataTable
  sDom: "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
  sPaginationType: "bootstrap",
  iDisplayLength: 100 
```

Datatables 被编译到我的 application.js 中并且不会引发错误，但该表从未真正呈现。我想知道这是否与编译所有内容的顺序有关？

应用程序/资产/javascripts/application.js

```
//= require jquery
//= require jquery_ujs
//= require jquery_nested_form
//= require twitter/bootstrap
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.bootstrap
//= require_tree . 
```

应用程序/视图/布局/application.html.erb

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<link href="/assets/stylesheets/datepicker.css" media="all" rel="stylesheet" type="text/css" />

<%= javascript_include_tag "application" %>
<script src="/assets/twitter/bootstrap/bootstrap-datepicker.js" type="text/javascript"></script> 
```

---编辑数据表问题

使用 jquery-datatables-rails gem 时，它必须在 gemfile 中的资产组之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:58:09.960

默认情况下，asset-pipeline 带有 3 个放置资源的位置`app/assets`：`lib/assets`和`vendor/assets`。你必须把你的资产放在那里（如果你想依赖管道），而不是放在`public/`. 在生产环境中，所有资产都被压缩并转换为一个文件（分别用于`.js`和`.css`）`application.*`：.

编辑：在这种情况下，`assets`目录的结构不同。在与@theIV 和@Kosmonaut 聊天后，我们找到了解决方案：将资产移动到`vendor/assets`具有结构的目录：

对于 Javascript 资产：

```
 vendor/assets/javascripts/specific_javasripts 
```

对于 CSS：

```
vendor/assets/stylesheets/specific_stylesheets 
```

默认情况下，`vendor/assets/`目录不包含`javascripts`也不包含`stylesheets`目录，它们应该被创建。

# dynamics-crm-2011 - CRM 实体上的计算字段

> ID：14760420
> 
> 赞同：3
> 
> 时间：2013-02-07T20:30:04.507
> 
> 标签：dynamics-crm-2011, dynamics-crm

我在 Dynamics CRM 中的帐户和投资组合之间存在 1:N 的关系，即每个帐户都有多个投资组合，每个投资组合都有特定的资产。

我正在尝试在帐户表单上创建一个字段，该字段计算帐户的“所有相关投资组合的所有资产”的总和并将其显示在帐户表单上

作为一种解决方法，我尝试创建一个按帐户分组的投资组合视图，但它没有求和并将投资组合资产汇总到帐户级别。

![在此处输入图像描述](../Images/5d24647955e9e487df117380ec66c087.png)

![在此处输入图像描述](../Images/7ed77f5f3da37654841d691912dbe068.png)

因此，在帐户表单上，我试图创建一个文本字段，在此示例中计算总帐户资产为 25,000 美元

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:03:28.673

```
function setupGridRefresh() {
var targetgrid = document.getElementById("NAME OF SUBGRID");

// If already loaded
if (targetgrid.readyState == 'complete') {
    targetgrid.attachEvent("onrefresh", subGridOnload);
}
else {
    targetgrid.onreadystatechange = function applyRefreshEvent() {
        var targetgrid = document.getElementById("NAME OF SUBGRID");
        if (targetgrid.readyState == 'complete') {
            targetgrid.attachEvent("onrefresh", subGridOnload);
        }
    }
}
subGridOnload();
}

function subGridOnload() {
//debugger;
var grid = Xrm.Page.ui.controls.get('NAME OF SUBGRID')._control;
var sum = 0.00;

if (grid.get_innerControl() == null) {
    setTimeout(subGridOnload, 1000);
    return;
}
else if (grid.get_innerControl()._element.innerText.search("Loading") != -1) {
    setTimeout(subGridOnload, 1000);
    return;
}

var ids = grid.get_innerControl().get_allRecordIds();
var cellValue;
for (i = 0; i < ids.length; i++) {
    if (grid.get_innerControl().getCellValue('FIELD NAME LOWER CASE', ids[i]) != "") {
        cellValue = grid.get_innerControl().getCellValue('FIELD NAME LOWER CASE', ids[i]);
        cellValue = cellValue.substring(2);
        cellValue = parseFloat(cellValue);
        sum = sum + cellValue;
    }

}

var currentSum = Xrm.Page.getAttribute('DESTINATION FIELD').getValue();
if (sum > 0 || (currentSum != sum && currentSum != null)) {
    Xrm.Page.getAttribute('DESTINATION FIELD').setValue(sum);
}
} 
```

我从几个来源拼凑起来，目前使用它作为我的解决方案之一。如果您需要更多帮助或者我误读了问题，请告诉我。（顺便说一句，此解决方案基于以下假设：当子网格添加或删除条目时，您需要更改总数。如果这不是要求，我建议调用 RetrieveMultiple OData。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:41:30.333

看看[Gap Consulting 的 AutoSummary](http://www.gapconsulting.co.uk/solutions/essentials/auto-summary)，物有所值。或者花时间建立自己的。您需要客户记录上的一个字段，每次您执行以下操作时都会更新该字段：

*   创建投资组合记录
*   更新投资组合记录中的值
*   删除投资组合记录
*   将 Partfolio 记录从一个帐户重新父级到另一个帐户

前两个很容易在投资组合的 onSave 事件中使用工作流或 javascript。第三只能通过工作流完成，而不是javascript（我认为）。最后一个需要 onLoad javascript 来存储 Account 查找的当前值，以便 onSave 可以进行比较，然后递减一个并递增另一个。这四个都可以通过插件完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T18:44:39.460

尽管已经回答了这个问题，但我会为您提供第二个选项。也可以看看North 52 的[FormulaManager](http://north52.com/formulamanager.html)。您可以免费获得一定数量的公式，因此它可能是一个更具成本效益的解决方案。

**更新** 补充一点，如果该字段仅用于报告一个值（并且不需要保存到数据库中），那么您可以构建一个执行 Aggregated FetchXml 查询的 Web 资源，而不是使用物理字段和插件只显示结果值。

同样，这是我知道 Formula Manager 开箱即用的东西。从未使用过自动摘要。

# php - jQuery Mobile 菜单中的提交列表

> ID：14760425
> 
> 赞同：0
> 
> 时间：2013-02-07T20:30:27.443
> 
> 标签：php, jquery, jquery-mobile

我正在使用具有多个提交的表单来检测单击了哪个按钮，但该列表未正确显示在 jQuery Mobile 菜单中。我希望它看起来像[JQM 文档](http://jquerymobile.com/test/docs/pages/popup/index.html)中的样子（单击“菜单”按钮），但它看起来像[这张图片](http://i.imgur.com/GNY2L0q.png)中的样子。（如果不明显，黑框是我编辑的名字。）我需要做什么才能将提交按钮折叠成一个像文档中的漂亮列表？

```
<a href="#navmenu" data-rel="popup" data-role="button">Navigate to different section</a>
    <div data-role="popup" id="navmenu">
        <form name="navmenuform" action="X.php" method="post">
            <ul data-role="listview" data-inset="true">
            <li data-role="divider">Navigate to:</li>
            <?php foreach ($array as $category) { ?>
            <li><input type="submit" name="nav<?php echo $category[0]; ?>" value="Section <?php echo $category[0] . ": " . $category[1]; ?>"></li>
            <?php } ?>
            </ul>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:08:46.850

简短的回答是不要在列表视图项目中放置提交按钮（至少可见）。问题是按钮和 lisview 项目的内容区域有它们的样式`padding`, `margin`,`border`等。您可以利用 jQM 为您提供的东西，而不是与样式作斗争。

恕我直言，实现您想要的最简单的方法，**如果您可以使用`GET`而不是`POST`**，是放弃表单并`href`使用带有参数的适当 url 的锚点填充列表项，并`rel="external"`像这样使用：

```
<div data-role="popup" id="navmenu" style="min-width:210px;">
    <ul data-role="listview" data-inset="true">
        <li data-role="divider">Navigate to:</li>
        <li><a rel="external" href="X.php?nav1=Section 1:1">Section 1:1</a></li>
        <li><a rel="external" href="X.php?nav2=Section 1:2">Section 1:2</a></li>
        <li><a rel="external" href="X.php?nav3=Section 1:3">Section 1:3</a></li>
        <li><a rel="external" href="X.php?nav4=Section 1:4">Section 1:4</a></li>
    </ul>
</div> 
```

如果您希望能够使用`POST`您的表单，您可以使用隐藏的输入和一些 JS 代码。假设您将生成以下标记：

```
<div data-role="popup" id="navmenu" style="min-width:210px;">
    <form name="navmenuform" action="X.php" method="post" data-ajax="false">
        <ul data-role="listview" data-inset="true">
            <li data-role="divider">Navigate to:</li>
            <li><a href="nav1">Section 1:1</a></li>
            <li><a href="nav2">Section 1:2</a></li>
            <li><a href="nav3">Section 1:3</a></li>
            <li><a href="nav4">Section 1:4</a></li>
        </ul>
        <input id="param" type="hidden" name="" value="">
    </form>
</div> 
```

不要忘记贴上`data-ajax="false"`你的`form`标签，否则 jQM 默认会尝试通过 ajax 提交表单。

然后，您在列表项上使用`click`事件，更改隐藏输入中的名称和值并提交表单：

```
$(document).on("pageinit", "#page1", function(){
    $("#navmenu ul li a").click(function(e){
        //Prevent default behavior since we need to submit the form instead of following the link
        e.preventDefault();
        //Change name and value attributes in out hidden input
        $("#param").attr("name", $(this).attr("href")).val($(this).text());
        //Submit the form
        $("form[name=navmenuform]").submit();
    });
}); 
```

这是[jsFiddle](http://jsfiddle.net/pmatseykanets/Xt4vJ/)

# ssrs-2008 - SSRS 2008 呈现 HTML 标记（不允许 .xml 链接）

> ID：14760427
> 
> 赞同：0
> 
> 时间：2013-02-07T20:30:36.907
> 
> 标签：ssrs-2008, outlook-2007, infopath-2007

我正在尝试创建指向存储在 sharepoint 中的 infopath 表单的链接。这是 MOSS 3，因此它们不是基于 Web 的表单。如果我通过占位符中的 HTML 标记创建链接，它会呈现良好，直到我将其设为 .xml 扩展名。我正在使用 HTML 标记，因为它们也需要在 Outlook 2007 中显示。我错过了一些方法来完成这项工作吗？

```
="<a href=""" & "http://sharepoint/production/Library/Form " & CStr(Fields!FormNumber.Value) & ".gif"& """> test </a>" 
```

^工作正常

```
="<a href=""" & "http://sharepoint/production/Library/Form " & CStr(Fields!FormNumber.Value) & ".xml"& """> test </a>" 
```

^不出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:36:33.597

解决方案是：

去掉和`space`之间`...Form``&...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:21:37.113

我已经复制了您的 xml url，并且在 SSRS 2008R2 中工作正常（无法在 SSRS 2008 中对其进行测试）。也许您应该尝试使用 Action->Go To Url 而不是 HTML murkup？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:26:06.160

只是在这里更新我的问题，因为它比我想象的更复杂。这是该问题的[参考](http://weblogs.asp.net/mnissen/archive/2009/03/26/reporting-services-does-not-display-hyperlink-for-placeholder-with-go-to-url-action.aspx)。它与 xml 链接或间距无关。它实际上是无法呈现的有效链接，错误页面的错误链接可以正常工作。（令人困惑？我知道，对吗？） javascript 解决方案对我不起作用 b/c 我需要它[与 Outlook 2007 一起使用](http://support.microsoft.com/kb/885755)。最终起作用的是反转斜线，例如

```
 http:\\sharepoint 
```

# tfs - 将 TFS 分支恢复为原始分支

> ID：14760428
> 
> 赞同：5
> 
> 时间：2013-02-07T20:30:39.433
> 
> 标签：tfs, branch

我正在使用 TFS。在我的分支上，我签入了一堆更改，现在我想撤消这些更改。

我可以单击 TFS 源代码控制中的分支，查看历史记录，然后获取原始分支，但是当我将其签出以进行编辑时……它会恢复到我绑定的分支。

我尝试了“查看历史记录”，然后右键单击原始“创建”分支，然后“获取此版本”

而且我还尝试右键单击分支和“获取特定版本”。

我还尝试删除此分支的本地文件。

我如何才能获得原始版本？

（注意：删除+重新创建分支是一个巨大的过程，所以我想远离那个）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:39:58.167

根据您使用的 TFS 版本以及是否安装了 TFS 电动工具，您可以在“历史记录”面板中（在“回滚”项下）找到它。您总是可以从命令行使用

> > tf.exe 回滚

# xcode - 添加 OCMock 会导致 Test 启动主应用程序而不是运行测试

> ID：14760435
> 
> 赞同：6
> 
> 时间：2013-02-07T20:31:16.623
> 
> 标签：xcode, unit-testing, compilation, ocmock

我正在尝试将 OCMock 添加到我现有的 Cocoa 项目中，但遇到了一个奇怪的问题，我没有看到其他人涵盖。

我最终将其隔离为以下内容：如果我只是将 OCMock.framework 引用添加到我的项目（即以某种方式将其拖入 Link Binary With Libraries 构建阶段），当我运行测试时，会启动真正的应用程序。

没有OCMock，输出正常：

```
Test Suite 'Multiple Selected Tests' started at 2013-02-07 20:07:03 +0000 
```

使用 OCMock 框架链接（部分输出）：

```
Error loading MyProjTests.octest/Contents/MacOS/MyProjTests
Library not loaded: @rpath/OCMock.framework/Versions/A/OCMock
Reason: image not found
IDEBundleInjection.c: Error loading bundle '/Users/alex/Library/Developer/Xcode/DerivedData/MyProj-bqwyxyspdiudktfnjcdgibdmpgsa/Build/Products/Debug/MyProjTests.octest' 
```

此后，其他应用程序输出将正常显示。当应用程序运行时，测试进度在项目导航器的最后一个选项卡上旋转，并且在您退出应用程序之前不会停止。因此，测试应该在您的应用程序运行的整个过程中都在进行中。

清除测试主机或捆绑加载器并没有解决问题，只会产生错误架构的链接错误。

我正在使用最新的 Xcode，4.6。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T20:31:16.623

好的，终于想通了，在我点击这里提交之前，所以我想我会分享答案。问题是 OCMock.framework 在运行时不可用。

官方的 OCMock 步骤只是说下载并添加到目标，但没有告诉您添加复制阶段。我在测试目标中添加了一个新阶段，将框架复制到产品目录中，测试现在运行良好。

主应用程序会启动是非常出乎意料的，我希望这对其他人有所帮助。

编辑：

添加了图片。每个人都喜欢图片

**第1步** [![构建阶段 -> 新副本文件阶段](../Images/be51f56d080e8441b89c527a86ff16e2.png)](https://i.stack.imgur.com/HEPow.png)

**第2步** [![产品目录](../Images/01a5b6268dc1fac0022a1d3486b33633.png)](https://i.stack.imgur.com/l2XI6.png)

**第 3 步** [![在此处输入图像描述](../Images/720a84c4e3de32ae618912f8568b0f90.png)](https://i.stack.imgur.com/VW8D9.png)

**第4步** [![成功！](../Images/9642d3ebb3024aa2cc307a7efad3e51e.png)](https://i.stack.imgur.com/ei7AR.png)

# windows-phone-7 - 是否可以以编程方式添加 TiltEffect？

> ID：14760443
> 
> 赞同：1
> 
> 时间：2013-02-07T20:31:58.607
> 
> 标签：windows-phone-7, wpftoolkit

我有一些图像，我根据列表选择器的选择以编程方式添加。我已经能够将点击事件添加到 .cs 中的这些图像中，现在我正在寻找是否也可以通过代码添加倾斜效果。

有谁知道这是否可能以及如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:49:29.970

您只需添加这行代码

```
TiltEffect.SetIsTiltEnabled(<UIobject>, true); 
```

样本：

```
Button MyButton = new Button() { Content = "I have Tilt effect!!" };
TiltEffect.SetIsTiltEnabled(MyButton, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:18:43.053

**Button**控件可以将大多数控件作为其内容（不仅仅是文本），因此您不需要将图像伪装成按钮，相反，您只需在 Button 中放置一个 Image 控件，如下所示：

```
<Button BorderThickness="0">
    <Image Source="/image.jpg"/>
</Button> 
```

或以编程方式：

```
Button myButton = new Button();
Image img = new Image();
myButton.BorderThickness = new Thickness(0);
myButton.Content = img; 
```

建议使用默认的 Button 控件而不是挂钩到图像点击事件，这样您就不必担心诸如为触摸目标设置适当的边距等事情。

使用 Button 控件的另一个优点是倾斜效果将直接起作用（您只需要`toolkit:TiltEffect.IsTiltEnabled="True"`在您的`Page`.

# xml - VB中的XML到对象

> ID：14760445
> 
> 赞同：1
> 
> 时间：2013-02-07T20:32:00.977
> 
> 标签：xml, vb.net, object, serialization, deserialization

我想要做的是获取任何给定的 .xml 文件并将其转换为 VB 代码中的对象。我的程序将从网站上抓取一个 .xml 文件并将其更改为一个对象。然后我将对从 .xml 文件创建的这些对象运行查询。然后我会将这些查询输出到数据网格。

事情是我知道如何使用一个特定的 .xml 文件来完成所有这些工作。我只是在 .xml 文件中放置对字段的引用以将其更改为对象。但是，当涉及到更改任何可能由用户上传的具有许多不同字段的 .xml 时，我感到很茫然。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:37:59.003

`System.Xml`您可以使用和命名空间编写 XML 编译器`System.Reflection.Emit`。

但是您仍将面临查询其结构直到运行时才知道的对象的挑战。

更好的选择可能是将 xml 加载到一个`XmlDocument`并针对它们运行 XPath 或 LINQ 查询。考虑到对象的海森堡性质，XPath 最有可能。

```
Dim tDoc as XmlDocument = New XmlDocument
Dim tNodes As XmlNodeList = Nothing

tDoc.Load(file_path)
tNodes = tDoc.SelectNodes("xpath query goes here")
For Each tNode As XmlNode In tNodes
  ' Do something with the Node
Next 
```

# visual-studio - HTTP 错误 403.14 - 一个 URL 被禁止

> ID：14760446
> 
> 赞同：4
> 
> 时间：2013-02-07T20:32:03.183
> 
> 标签：visual-studio, iis, asp.net-mvc-4

我正在使用 Visual Studio 2012 MVC .Net 4.5, IIS Express 运行一个网站。
它在我的本地电脑上运行良好，但突然一个 URL 不再打开并给我这个错误：HTTP Error 403.14 - Forbidden [http://puu.sh/1YWWm](http://puu.sh/1YWWm)

当我在这个网站上打开 IIS 时，它给了我这个错误[http://puu.sh/1YWY8](http://puu.sh/1YWY8)，我该如何解决这个问题，我应该重新安装一些东西，如果可能的话，请告诉我步骤

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:49:06.700

我发现了我的错误，我的网站在网站根目录中创建了一个与我的控制器操作路径同名的文件夹，接缝我的代码中的一个错误做到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:25:30.443

应该是文件夹问题。在这个场景中有 95% 的时间。检查你的根目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T18:46:44.393

我解决了在 Windows 上启用 .NET/ISS 资源的问题。此选项在我的机器中取消选中。

# c# - 如何正确实现泛型方法？

> ID：14760452
> 
> 赞同：0
> 
> 时间：2013-02-07T20:32:20.823
> 
> 标签：c#, linq, generics

有人可以帮我弄清楚如何一般地实现这个方法吗？编译器抱怨它无法解析 t.Id。这是有道理的，但是，我如何告诉它所有通过的对象都将具有 Id 属性。这是我为 T 定义的接口：

```
namespace LiveWire.Model
{
    public interface ILiveWireModel
    {
        Guid Id { get; }
    }
} 
```

所有存储库的接口：

```
internal interface ILiveWireRepository<T>
{
    ICacheProvider Cache { get; }
    string CacheKey { get; }

    SqlConnection CreateConnection();

    IEnumerable<T> GetData<TD>();

    IEnumerable<T> LoadData<TD>();

    Dictionary<Guid, T> GetCachedData<TD>();

    void ClearCache();
} 
```

还有我的方法：

```
public IEnumerable<T> GetData<TD>()
        where TD : ILiveWireModel
    {
        var data = GetCachedData<TD>();

        if (data == null)
        {
            data = LoadData<TD>().ToDictionary(t => t.Id);

            if (data.Any())
            {
                Cache.Set(CacheKey, data, 30);
            }
        }

        return data.Values;
    } 
```

我把整个班级都包括在这里，我希望能澄清一些事情。

```
internal abstract class LiveWireRepositoryBase<T> : ILiveWireRepository<T>
{
    public ICacheProvider Cache { get; private set; }
    public string CacheKey { get; private set; }

    internal LiveWireRepositoryBase()
    {
        Cache = new DefaultCacheProvider();
    }

    public SqlConnection CreateConnection()
    {
        return new SqlConnection(
            ConfigurationManager
            .ConnectionStrings["LiveWire4Database"]
            .ConnectionString);
    }

    public IEnumerable<T> GetData<TD>()
        where TD : ILiveWireModel
    {
        var data = GetCachedData<TD>();

        if (data == null)
        {
            data = LoadData<TD>().ToDictionary(t => t.Id);

            if (data.Any())
            {
                Cache.Set(CacheKey, data, 30);
            }
        }

        return data.Values;
    }

    public IEnumerable<T> LoadData<TD>()
    {
        return new List<T>();
    }

    public Dictionary<Guid, T> GetCachedData<TD>()
    {
        throw new NotImplementedException();
    }

    public void ClearCache()
    {
        throw new NotImplementedException();
    }
} 
```

我收到了这个我不明白的错误。我尝试使用显式接口实现，但这最终使我删除了 where 约束。

> 方法“LiveWire.Data.Repositories.LiveWireRepositoryBase.GetData()”的类型参数“TD”的约束必须匹配接口方法“LiveWire.Data.Repositories.ILiveWireRepository.GetData()”的类型参数“TD”的约束。考虑改用显式接口实现。C:\projects\LiveWire\Solution\LiveWire.Data\Repositories\LiveWireRepositoryBase.cs 32 31 LiveWire.Data

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:36:03.843

您可以通过将类的签名更改为

```
public sealed class MyCache<T> where T : ILiveWireModel 
```

（或者，如果该类位于不同的命名空间中，则`where T : LiveWire.Model.ILiveWireModel`）。

也就是说，我不确定此更改是否会解决您的问题。我只看到了您项目代码的几个片段，所以我可能是错的，并且对以下内容持保留态度：

将 GUID 键控和整数键控值保存在同一个缓存中真的是最好的设计吗？据推测，您从两个不同的来源获取数据，一个使用 GUID 键，另一个使用整数键。但是在未来，如果你添加第三个来源，它也使用整数键呢？来自两个整数键源的键可能会发生冲突，并且对于某些查询，您的缓存总是错误的。就个人而言，我会在某个知道从对象到键的映射的地方维护第二个表或函数（可能保留一个整数值键的映射表，只需通过 GUID 值键），并在我需要时使用该函数检查对象是否被缓存。那么，在其余时间，您的缓存可以直接根据键和值工作，而不必与不同类型的键混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:36:57.183

```
public IEnumerable<T> GetData<T>() where T:LiveWire.Model.ILiveWireModel { 
  //.../

} 
```

泛型专业化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:45:57.303

您需要先修复声明

```
public IEnumerable<T> GetData<T>() 
```

然后，为了知道你可以在 ON T 上使用什么，你必须告诉它 T 被允许是什么。

```
public IEnumerable<T> GetData<T>() where T : ILiveWireModel 
```

最后，您还没有告诉我们`var data`实际包含什么，那将在函数`GetCachedData`和`LoadData`函数内部，您没有将 T 传递给它，我们也不知道它返回什么。

我希望看到这样的东西

```
public IEnumerable<T> GetData<T>() where T : ILiveWireModel
{
    var data = GetCachedData<T>();

    if (data == null)
    {
        data = LoadData<T>().ToDictionary(t => t.Id);

        if (data.Any())
        {
            Cache.Set(CacheKey, data, 30);
        }
    }

    return data.Values;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T22:31:56.837

你在这个阶段得到的异常只是说接口定义

```
IEnumerable<T> GetData<TD>(); 
```

`where`类型参数没有`TD`与实现相同的约束（即）

```
public IEnumerable<T> GetData<TD>() where TD : ILiveWireModel 
```

您需要在界面中放置相同的约束。

# angularjs - Angularjs：ng-repeat，在 ng-repeat 中放置一个“分隔符”以分隔最近加载的数据

> ID：14760458
> 
> 赞同：4
> 
> 时间：2013-02-07T20:32:47.987
> 
> 标签：angularjs

当页面加载时，用户会看到一组产品，然后如果他/她单击一个按钮，则会获取更多产品并将其附加到列表中。我正在尝试找到一种 Angular 方法来放置一行以将已加载的产品与最近附加的产品分开。我不想直接操作 DOM，也不能将空行推送到产品数组，因为数组的长度在其他地方使用。

我怎么能这样做？

[这是一个基本的 Bin](http://jsbin.com/afoyij/1/edit)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-05T15:22:51.643

如果您不想在最后一项之后使用分隔线，只需使用：

```
<... ng-repeat="...">
   <hr ng-show="!$last" />
   ...
</...> 
```

[如果重复元素在迭代器中是最后一个，则 $last 为真。](https://docs.angularjs.org/api/ng/directive/ngRepeat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:54:16.733

我认为您需要自己在另一个 $scope (array) 属性中跟踪这一点。在您的 ng-repeat 循环中，检查 $index 是否在此数组中。如果是这样，添加/显示 <hr>。

```
<... ng-repeat="...">
   <span ng-show="showHr($index)"><hr></span>
   ...
</...> 
```

`true`当您想要显示 <hr> 时，函数 showHr() 应该返回。

你也可以使用 ng-switch 代替 ng-show。

# asp.net - AjaxControlToolkit AsyncFileUpload - 如何在 UploadedComplete 事件中修改标签文本值

> ID：14760462
> 
> 赞同：0
> 
> 时间：2013-02-07T20:33:18.763
> 
> 标签：asp.net, ajaxcontroltoolkit

我正在尝试使用 AjaxControlToolkit 中的 AsyncFileUpload 组件将文件上传到服务器后设置标签文本值。但是它接缝它是无效的，虽然上传后文件上传器是绿色的，并且上传工作。

```
protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    string filename  = System.IO.Path.GetFileName(AsyncFileUpload1.FileName);
    AsyncFileUpload1.SaveAs(Server.MapPath("Uploads/") + filename); 
    sourceLabel.Text="saved to "+filename; //this has no effect. I assume this is because the event is Async, but how can I set the value of  sourceLabel?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:49:07.657

AsyncFileUpload 控件使用隐藏框架进行文件提交，因此所有控件更新都将丢失。检查此链接并注意`uploadResult`标签的文本如何从 `AsyncFileUpload1_UploadedComplete`方法更改：[Ajax Control Toolkit source code](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/a2a6dc6854e0#SampleWebSites/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T04:19:38.270

它对我有用：[https ://stackoverflow.com/a/12472235/2247978](https://stackoverflow.com/a/12472235/2247978)

..................................................... ..................................................... .

将 HiddenField 控件添加到窗体中：

```
<asp:HiddenField runat="server" ID="UploadedPathHiddenField" /> 
```

重写 UploadComplete 方法如下：

```
protected void UploadComplete(object sender, AsyncFileUploadEventArgs e)
{
    var fileName = GeneratePrefixFileName() +  System.IO.Path.GetFileName(e.FileName);
    var relativePath = "~/Image/" + fileName;
    var filePath = Server.MapPath(relativePath);
    AsyncFileUpload1.SaveAs(filePath);
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "filePath", "top.$get(\"" + UploadedPathHiddenField.ClientID + "\").value = '" + ResolveClientUrl(relativePath) + "';", true);
} 
```

之后，您可以通过以下方式在 showConfirmation 方法中获取保存图像的路径：

```
var src = $get("<%= UploadedPathHiddenField.ClientID %>").value; 
```

..................................................... ..................................................... .

```
protected void BtnUpload_Click(object sender, EventArgs e)
{
    UploadMessage.Text = UploadedPathHiddenField.Value;
} 
```

# javascript - Google Graph API 自定义工具提示粗体

> ID：14760466
> 
> 赞同：4
> 
> 时间：2013-02-07T20:33:29.997
> 
> 标签：javascript, google-visualization

我正在尝试复制 Google Graph API 使用的默认工具提示样式：

![默认工具提示](../Images/314dd7e6873b063e65b683da76c3e053.png)

特别是上面看到的一些文本的粗体。一旦我添加了自己的工具提示，我就不能再像在默认视图中那样将文本的部分加粗。

该标签`tooltip.textStyle`仅提供一种更改整个显示文本颜色的选项`{color: <string>, fontName: <string>, fontSize: <number>}`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:06:50.427

默认视图样式为粗体，而自定义工具提示则不是。

根据您的图表类型，您可以启用 HTML 工具提示并使用它们来自定义格式，如此[处](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content#enabling_html_tooltip)所述。这将适用于：

*   面积图
*   条形图
*   烛台图
*   柱形图
*   组合图
*   折线图
*   散点图

设置起来很复杂，但它可以让您在工具提示的显示方式上拥有最大的灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-30T11:19:32.323

根据：@jmac 的回答，这很容易。但如果您不能加粗字体（根据 Google Charts Docs），请设置自定义字体系列，例如：

```
function createCustomHTMLContent(date, label, value) {
return '<div style=" font-family:Arial; /* other styles... */">' +
        '<div><b>' + date + '</b></div>'+
        '<div><b>' + label + ':</b> ' + value + ' </div>'+
    ' </div>'
} 
```

我很长一段时间都找不到任何解决方案，并且在设置字体系列属性后一切正常:)

# ruby-on-rails-3 - Rails：计算可选标签，同时在一个查询中使用条件标签

> ID：14760468
> 
> 赞同：0
> 
> 时间：2013-02-07T20:33:39.167
> 
> 标签：ruby-on-rails-3, activerecord, tags, conditional, optional

我想找到匹配尽可能多的**可选标签**的产品，这些标签由所有**条件标签标记**，按匹配的**可选标签**数量排序。

我想出了这个来计算**可选标签**：

```
optional_tags = [1,2,3]
conditional_tags = [4]

products = Product.select('COUNT(*) AS count_all, products.*')
                  .joins(:tags).where('tags.id IN (?)', optional_tags)
                  .group('products.id')
                  .order('count_all DESC') 
```

我成功获得了产品 ID 和匹配的**可选标签**的数量：

```
products: {30=>4, 26=>3, 29=>3, 27=>2, 28=>1} 
```

当我尝试添加**条件标签**时，我只得到一个空哈希。我试过这样：

```
products = Product.where('tags.id IN (?)', conditional_tags)
                  .select('COUNT(*) AS count_all, products.*')
                  .joins(:tags).where('tags.id IN (?)', optional_tags)
                  .group('products.id')
                  .order('count_all DESC') 
```

Rails 优化了查询并结合了所有**where**部分......

如何将**条件标签**添加到我的构造中？谢谢你的帮助！

**例子：**

产品的类型很重要，但人们并不关心细节。

条件标签 = [ **1** *辆车*]

optional_tags = [ **2** *红色*，**3** *奔驰*，**4** *快速*]

一辆*红色的* **汽车**是可以的，但一辆*梅赛德斯*的*红色快速* **摩托车**不应该出现在结果列表中，即使有更多匹配的标签。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:41:40.700

我不知道你是否知道，但我认为你的第二个查询相当于：

```
products = Product.select('COUNT(*) AS count_all, products.*')
                  .joins(:tags)
                  .where('tags.id IN (?) AND tags.id IN (?)', optional_tags, conditional_tags)
                  .group('products.id')
                  .order('count_all DESC') 
```

也许你在追求更接近这个的东西？

```
products = Product.select('COUNT(*) AS count_all, products.*')
                  .joins(:tags)
                  .where('tags.id IN (?)', optional_tags | conditional_tags)
                  .group('products.id')
                  .order('count_all DESC') 
```

我的猜测可能不正确，因为我不完全理解您要做什么。不过，也许这会让你走得更远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:07:18.317

好吧，我想我终于想通了：

```
class Product < ActiveRecord::Base
  scope :having_tags, -> { |tags|
    joins(:tags).where('tags.id IN (?)', tags)
  }

  scope :ordered_by_tag_count, -> { |tags|
    joins(:tags)
    .where('tags.id IN (?)', tags)
    .group('products.id')
    .order('count_all DESC')
  }
end 
```

所以如果你有这些标签：

> 条件标签 = [1 辆车]
> 
> optional_tags = [2 red, 3 mercedes, 4 fast]

你可以这样做：

```
Product.having_tags([1]).ordered_by_tag_count([2, 3, 4]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:54:19.503

谢谢你的帮助，杰森。**我想我想通了...我对可选标签**的主查询中的**条件标签**执行子查询。

 **我的产品范围：

```
scope :tagged, lambda { |tag_ids|
  joins(:tags)
  .where('tags.id IN (?)', tag_ids)
  .group('products.id')
}
scope :matched, lambda { |product_ids, tag_ids|
  select('COUNT(*) AS count_all, products.*')
  .joins(:tags)
  .where('products.id IN (?) AND tags.id IN (?)', product_ids, tag_ids)
  .group('products.id')
  .order('count_all DESC')
} 
```

我的查询构造：

```
result = Product.matched(Product.tagged(branch_ids).map(&:id), tag_ids) 
```

我有点担心性能，因为 Rails 必须执行两个单独的查询。好消息是，我可以将 .limit() 添加到“主”查询中。

如果有人知道如何在一个查询中解决这个问题，请告诉我！谢谢！***

# wordpress - WP_Query 返回所有内容但发布内容

> ID：14760472
> 
> 赞同：0
> 
> 时间：2013-02-07T20:34:02.820
> 
> 标签：wordpress, loops

我只是想在模板页面上显示类别 7 中的帖子内容。我在模板页面上使用以下内容：

```
<?php 
  $custom_query = new WP_Query('cat=7');
  while($custom_query->have_posts()) : $custom_query->the_post();
echo get_the_title();
endwhile;
  wp_reset_postdata();
?> 
```

此代码仅返回类别 7 中帖子的标题，而不是输出实际的帖子内容。我添加了 get_the_title() 行只是为了查看查询是否实际上是在查询帖子。由于它按预期返回了标题，因此我认为它正在按应有的方式查询帖子。但是为什么没有内容？目前这是一个本地站点，所以我无法提供链接。上面的代码有什么明显的缺失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:40:22.850

您肯定需要添加`the_content();`查询以使帖子内容可见吗？

# entity-framework - EF 急切加载多个子子集合

> ID：14760475
> 
> 赞同：4
> 
> 时间：2013-02-07T20:34:13.533
> 
> 标签：entity-framework

我似乎无法找到如何在 EF 中急切加载多个子子集合。所以我可以这样做：

```
blawConext.Blaws
    .Include(b => b.ChildCollection
             .Select(cc => cc.ChildChildCollection)
     ) 
```

我什至可以毫无问题地越来越深入，但我无法获得 umm 同行？收藏，以下不起作用

```
blawConext.Blaws
    .Include(b => b.ChildCollection
             .Select(cc => cc.ChildChildCollection1)
             .Select(cc => cc.ChildChildCollection2)
     ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:38:32.523

您可以指定多个包括：

```
blawConext.Blaws
    .Include(b => b.ChildCollection.Select(cc => cc.ChildChildCollection1))
    .Include(b => b.ChildCollection.Select(cc => cc.ChildChildCollection2)) 
```

# python - 如何在 Python 中使用文本表作为字典数据

> ID：14760476
> 
> 赞同：-1
> 
> 时间：2013-02-07T20:34:16.390
> 
> 标签：python, string, python-2.7

我正在尝试在 python 中制作一些串行通信脚本。我有一个带有模板的文件，一个带有文本表的文件。如何使用文本表作为替换源？

示例输入：模板文件：

```
Hello <name>,
We will be hosting some event in <town> bla bla... 
```

带值的表

```
name      town       age   gender
Phillip   New York   22    male
Sonia     Warsaw     19    female 
```

预期输出是 2 个带有自定义文本的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:24:09.673

这有两个部分。首先是解析您的文本表以获取模板占位符到需要插入的值的映射列表。第二个是将值实际替换到模板中。两者都相当容易。

假设表中的列由多个空格分隔，并且多个空格从不构成实际列标题或值的一部分，您可以使用[正则表达式](http://docs.python.org/2/library/re.html)将每一行相当容易和干净地拆分为字段，然后替换这些值进入模板是微不足道的。

```
import re

text_table = <something> # Replace with whatever you do to load the table
template_text = <something> # Replace with whatever you do to load the template

row_splitter = re.compile("  +") # Finds a sequence of two or more spaces
rows = text_table.split('\n') # Split the table into a list of rows
headings_row = rows[0]
headings = row_splitter.split(headings_row)

# Next we get a list of dictionaries mapping template placeholders to values
template_dicts = []
for row in rows:
    values = row_splitter.split(row)
    template_dict = dict(zip(headings, values))
    template_dicts.append(template_dict)

# Next we substitute the values sets into the template one by one:
for template_dict in template_dicts:
    result_text = template_text
    for key, value in template_dict.iteritems():
        result_text = result_text.replace('<'+key+'>', value)
    print result_text # Or do whatever you like with it 
```

请注意，如果您可以控制模板文件，您可能希望将三角括号占位符替换为大括号占位符（如`'Hello {name}, I see you are {age} years old'`）。然后，您可以使用[String.format](http://docs.python.org/2/library/string.html#string-formatting)为您将值替换到模板中，从而使代码更加简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:33:04.217

重新进口

```
table_lines = open('your_table', 'r').read()
table = [ re.split(' +', l) for l in table_file[1:] ]

mail = open('your_template_dir', 'r').read()

for name,town,age,gender in table :
    re.sub('<name>', name, mail)
    re.sub('<town>', town, mail)
    re.sub('<age>', age, mail)
    re.sub('<gender>', gender, mail)

print mail 
```

Personaly 我建议您使用 SQLite 作为您的表。

# regex - 将正则表达式搜索保持在一行

> ID：14760477
> 
> 赞同：1
> 
> 时间：2013-02-07T20:34:20.667
> 
> 标签：regex

我使用 Wget 抓取了一个网站以迁移到新平台。我正在尝试清理页面并删除其中的所有视图状态代码。我正在使用以下正则表达式来执行此操作：

```
<input type="hidden" name="__VIEWSTATE" value=.*/> 
```

这适用于 Dreamweaver 等程序。我喜欢使用另一个名为 Wild Edit 的应用程序，它可以非常快速地搜索和替换大量文件。当我使用相同的表达式时，它将匹配`/>`页面上的最后一个，删除很多好的代码。我也尝试`<input type="hidden" name="__VIEWSTATE" value=.*/>$` 过同样的结果。

我将如何限制它以使其保持在 /> 的第一场比赛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:36:26.543

正则表达式太贪心了。试试这个：

```
<input type="hidden" name="__VIEWSTATE" value=.*?/> 
```

默认情况下，正则表达式引擎尝试使匹配尽可能大。例如，正则表达式`a.*z`将`az (some other middle stuff) az`作为一个大匹配进行匹配，因为它*确实*以 .开头`a`和结尾`z`。

该`?`修饰符告诉正则表达式引擎不要贪婪，而要偷懒：不要抓取*最大*可能的匹配项，而是抓取*最小*的. 在前面的示例中，正则表达式`a.*?z`将只匹配 2`az`个子字符串，因为它是惰性的：一旦它看到`z`，它就会停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:36:26.943

尝试

```
<input type="hidden" name="__VIEWSTATE" value=.*?/> 
```

,`?`如果支持它会使搜索变得不贪婪，因此它只会匹配到第*一个* `/>`而不是最后一个。

如果这不起作用，您最好的选择可能是：

```
<input type="hidden" name="__VIEWSTATE" value=[^/]+/> 
```

# gwt - 可以连接到我的 tomcat 主页，但不能连接到我的 GWT 服务器主页

> ID：14760479
> 
> 赞同：0
> 
> 时间：2013-02-07T20:34:23.160
> 
> 标签：gwt

我有我认为是安全设置问题。我有一个运行在我的 Win7 电脑上的 tomcat 实例，在 8080 上监听，我可以从另一台电脑很好地连接到它。然后我有一个 GWT 应用程序在端口 8888 上运行，但我无法连接到它。Win7 上是否有一个设置，我必须将我希望允许远程连接进入的端口列入白名单。我暂时关闭了防火墙，但这没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:37:17.433

当开发模式启动时，默认情况下它不允许从远程 IP 访问您的服务器。要激活此功能，您必须指定服务器应绑定到的地址。从[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#What_options_can_be_passed_to_development_mode](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#What_options_can_be_passed_to_development_mode)这通常是通过将以下内容添加到您的参数中来完成的，有时在模块之前

```
-bindAddress 0.0.0.0 
```

这会将服务器绑定到 JVM 可用的所有 IP 地址。

# solr - 仅将 Solr 过滤器查询应用于部分搜索结果

> ID：14760482
> 
> 赞同：1
> 
> 时间：2013-02-07T20:34:25.467
> 
> 标签：solr, filter, grouping

我有一个 Solr 解决方案需要两个查询，但我正在寻找一种在单个查询中完成它的方法。我的想法是，如果我能找到一种方法来做到这一点，我就不必承担 Solr 集群上两倍负载的开销。

详细信息：我正在运行一个简单的查询，如“q=camera”，查询过滤器为“fq=type:digital”。第二个查询与第一个查询相同，但过滤器是相反的，例如“fq=-type:digital” topDocs，然后使用第二个过滤器生成第二个集合，结果可以合并并返回（排序是否采用和混合这两个集合并不重要）。

我尝试通过在索引期间标记特定字段来将数据划分为两个不同的组，然后使用 Solr“分组”查询，但这些响应时间在我的设置中是不可接受的。

我正在寻找与 Solr 最一致的实验方法的建议：调整以提高两个查询解决方案的性能，或研究一种自定义 Solr 后过滤器（我阅读了 Yonik 的 2/2012 博客文章）。

我必须在 Solr 3.5 中实现这一点，尽管如果在 4.0 中有灌篮解决方案，我最终将能够实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:57:20.770

I can think of two alternate approaches :-

1.  Instead of filter the results, use a variable higher boost so that all the results for `type:digital` come on top and rest of the documents would follow. No need for separate queries. The boost can be changes as per the type value.

2.  Other approach is not to display the results for type other then digital. However, you can display the facets for the other types with the counts for the same for users to know if the other types exist for the search term. You can check on [tagging and excluding filters](http://wiki.apache.org/solr/SimpleFacetParameters#Tagging_and_excluding_Filters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:35:46.550

[结果分组](https://wiki.apache.org/solr/FieldCollapsing)可能会给你你想要的。只需按该参数分组并指定每个组中足够多的文档数。

但我会测试它的性能是否比两个查询好。只是因为它在限制部分提到了性能。

# android - Android：并发行为确实是顺序的

> ID：14760488
> 
> 赞同：0
> 
> 时间：2013-02-07T20:34:48.760
> 
> 标签：android, multithreading, concurrency, android-mapview

在我的 Android 应用程序中，我需要知道 MapView 缩放过程何时完成。没有内置的解决方案，所以我有了重写 dispatchDraw 的想法。

只要地图正在缩放（以及在地图上滚动，但这并不重要），就会调用dispatchDraw，我的想法是通过覆盖一个名为dispatchDrawInvoked的变量来不断检查是否调用了dispatchDraw。当第一次调用 MapView 上的缩放时（这意味着缩放过程开始时），我启动了一个新线程，该线程每秒连续将 dispatchDrawInvoked 设置为 false。这个想法是dispatchDraw方法在这一秒内用true覆盖了dispatchDrawInvoked很多次，当第二秒结束并且dispatchDraw仍然为true时，这意味着缩放还没有完成。在大多数情况下，缩放完成并且 dispatchDraw 在循环第二次运行后保持为假，因此至少需要 2 秒。

到现在为止还挺好。问题是，这整个实现不表现并发。它的行为是连续的，并且 MapView 卡住了 2 秒。为什么会这样，请看我的代码：

```
public class ZoomListeningMapView extends MapView {
    private final static String TAG = ZoomListeningMapView.class.getSimpleName();

    private final static int DEFAULT_ZOOM_LEVEL = 14;
    private int lastZoomLevel = DEFAULT_ZOOM_LEVEL;
    private volatile boolean zooming = false;
    private volatile boolean dispatchDrawInvoked = false;

    public ZoomListeningMapView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ZoomListeningMapView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ZoomListeningMapView(Context context, String apiKey) {
        super(context, apiKey);
    }

    public boolean isZooming() {
        return zooming;
    }

    public static int getDefaultZoomLevel() {
        return DEFAULT_ZOOM_LEVEL;
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);

        dispatchDrawInvoked = true;

        Log.i(TAG, "setting dispatchDrawInvoked to true");
        Log.i(TAG, "zooming:" + zooming);

        if (getZoomLevel() != lastZoomLevel) {
            lastZoomLevel = getZoomLevel();

            Log.i(TAG, "zoom level changed");

            zooming = true;

            Log.i(TAG, "zooming:" + zooming);

            new Thread(new ZoomRunnable()).start();
        }
    }

    private class ZoomRunnable implements Runnable {

        private final String TAG = ZoomRunnable.class.getSimpleName();

        @Override
        public void run() {
            try {
                while (zooming)  {
                    dispatchDrawInvoked = false;

                    Log.i(TAG, "setting dispatchDrawInvoked to false");

                    Thread.sleep(1000);

                    if (dispatchDrawInvoked == false)  {
                        zooming = false;

                        Log.i(TAG, "dispatchDrawInvoked is still false, so Map zooming is finished.");
                    }
                }
            } 
            catch (InterruptedException e) {
                Log.e(TAG, "InterruptedException: " + e.getMessage());

                return;
            }
        }
    }
} 
```

这是始终相同的日志。它表明没有并发：

![日志](../Images/4748fa66de6263077004354a55819d2d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:26:16.590

Runnable 不负责在线程上创建和执行，它只是提供线程启动时将执行的 run() 方法。所以你只是同步调用 run() 方法。您需要实际使用将启动另一个线程的东西。

`new Thread(new MapThread()).start()`

会照顾你的意图，但你应该重命名 MapThread 因为它实际上只是一个可运行的，如果你打算发布很多可运行的并且不想为每个线程创建一个线程，我建议你熟悉[Handlers](http://developer.android.com/reference/android/os/Handler.html)和[HandlerThreads 。](http://developer.android.com/reference/android/os/HandlerThread.html)

# c++ - 扫描和检测图像中的物体颜色

> ID：14760490
> 
> 赞同：1
> 
> 时间：2013-02-07T20:34:51.910
> 
> 标签：c++, image-processing, opencv

我正在开发一种检测拳击手出拳动作的软件。目前我使用`inRange`函数使用基于颜色的分割并将其设置为检测蓝色最小值和蓝色最大值。问题是范围很广，我的摄像头有时会挑选出噪音并分割不感兴趣的对象。为了改进软件，我通过扫描拳击手套的图像并在进一步处理之前建立准确的蓝色值。

将这个值存储在 Vector 中并在 inRange 小说中调用它对我来说是有意义的

```
// My current function which takes the Minimum and Maximum values of Blue Color
Mat range_out;
inRange(blur_out, Scalar(100, 100, 100), Scalar(120, 255, 255), range_out); 
```

所以我会将向量成像到这里的某个地方。

![在此处输入图像描述](../Images/4dd47f93b5c3780ac5ee8c1063a51e52.png)

1.  扫描上图计算蓝色值
2.  将此值存储在数组中
3.  在 inRange 函数中调用数组

有人可以建议解决此问题或将我引导到可以寻找答案的信息源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:29:26.180

因为您正在检测运动中的拳击手手套，所以首先使用运动将其与场景中的其他元素分开……使用帧微分或光流将手套和其他运动区域与非运动区域分开……现在在那些运动中区域尝试一些颜色检测...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:01:30.167

1.  *将亮度和色度分开*- 您的固定范围在不同的光照条件下不会很好地工作。您的范围很广，可能是因为您试图同时在黑暗和光线下看到“蓝色”。将图像转换为 HSV（或 La*b*）并丢弃 V（或 L），保留 H 和 S（或 a* 和 b*）。

2.  *学习颜色分布而不是简单的范围*- 获取一些样本并计算手套上像素的 H 和 S（a* 或 b*）上的 2D 颜色直方图。此直方图将成为对象颜色分布的模型。然后，使用[c2.calcBackProjection](http://docs.opencv.org/modules/imgproc/doc/histograms.html?highlight=backprojection#calcbackproject)检测场景中感兴趣的像素。

3.  *使用形态关闭操作清理结果*

重要提示：在步骤 2 中，使用不同的量化值（即不同数量的 bin）进行一些操作。

# jquery - 使用 jQuery 以仿嵌套方式切换表行

> ID：14760491
> 
> 赞同：0
> 
> 时间：2013-02-07T20:34:52.613
> 
> 标签：jquery, show-hide

我一直在尝试解决根据所有者切换表的多行的问题。

*   主行
    *   组行
        *   帐户行
        *   帐户行
    *   组行
        *   帐户行
        *   帐户行

我从只显示主行开始，然后当我单击切换主行时，它只显示组行，如果我单击组行，它会显示任何包含的帐户行。

我可以再次关闭它们，但如果我在仍有帐户行打开时关闭整个主行，它们将保持打开状态。

**这是我迄今为止一直在使用的方法：http: [//jsfiddle.net/fHKcy/](http://jsfiddle.net/fHKcy/)**

现在，我知道，我应该使用嵌套的 div .. 但我被旧的 CMS 困住了，并且被要求使用表格..！

我有一种模糊的感觉，我可以通过将每个“组”包装在一个 tbody 中来做到这一点.. 嗯，可能会在晚餐后进行测试..

我正在尝试的一件事是在之后添加以下内容`$('[data-owner="' + parentId +'"]').hide();`

```
if(accountType == 'master') {
    $('[data-owner="' + parentId +'"]').find('[data-account-level="account"]').hide();
} 
```

但我就是无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:52:29.077

用一个简单的表试试这个 [jsfiddle](http://jsfiddle.net/sHHnA/)

```
$(document).ready(function () {
    $(".hide").hide();
    $(".show").click(function () {
        $(this).nextUntil(".show").toggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:50:40.773

没有什么比睡一觉更能帮助解决问题了。

正如我在原始帖子中所怀疑的那样 - 使用带有 data-owner 属性的 tbody 元素会起作用。

所以现在主级别“拥有”一个跟随它的 tbody 元素：

```
<!-- MASTER ACCOUNT -->
<tr id="test1" class="pa-dt-master-account-level" data-account-level="master">
    <td class="pa-dt-account-details">
        <a class="pa-dt-toggle" href="#">Toggle</a><br />
        Test1
    </td>
</tr>
<tbody data-owner="test1">
    <tr> // etc
</tbody> 
```

javascript没有改变。

```
// Define our button for toggling
var button = $( "table.pa-dynamic-table a.pa-dt-toggle" );

button.click(function() {
    // get the parent ID
    var parentId = $(this).parents('tr').attr("id");
    // get the parent account level
    var accountType = $(this).parents('tr').attr("data-account-level");

    console.log(parentId);
    console.log(accountType);

    if ($(this).hasClass("pa-dt-toggle-active")) {
        $(this).removeClass('pa-dt-toggle-active');
        $('[data-owner="' + parentId +'"]').hide();

    } else {
        $(this).addClass('pa-dt-toggle-active');
        $('[data-owner="' + parentId +'"]').show();
    }
}); 
```

你可以看到它在这里工作：http: [//jsfiddle.net/dKpxV/2/](http://jsfiddle.net/dKpxV/2/)

唯一的问题是这种方法可能不适用于比当前更多的级别。但是它确实具有保留组级别项目的打开/关闭状态的优点。

是的，使用嵌套列表肯定会容易得多..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:20:03.393

您可以通过将类添加到表格行来非常简单地做到这一点。给子行一个依赖于其父行的类，然后在选择父行时仅显示子行（并隐藏先前选择的父行的任何子行）。

# javascript - 在图像上定位图像

> ID：14760492
> 
> 赞同：0
> 
> 时间：2013-02-07T20:34:56.730
> 
> 标签：javascript, jquery, html, css

我正在创建一个滑块（轮播），到目前为止我很成功，但我被困在一个地方这是我的代码

剧本

```
$(document).ready(function() {

//rotation speed and timer
var speed = 5000;
var run = setInterval('rotate()', speed);

//grab the width and calculate left value
var item_width = $('.slides li').outerWidth(); 
var left_value = item_width * (-1); 

//move the last item before first item, just in case user click prev button
$('.slides li:first').before($('.slides li:last'));

//set the default item to the correct position 
$('.slides ul').css({'left' : left_value});

//if user clicked on prev button
$('.prev').click(function() {

    //get the right position            
    var left_indent = parseInt($('.slides ul').css('left')) + item_width;

    //slide the item            
    $('.slides ul:not(:animated)').animate({'left' : left_indent}, 1000,function(){    

        //move the last item and put it as first item               
        $('.slides li:first').before($('.slides li:last'));           

        //set the default item to correct position
        $('.slides ul').css({'left' : left_value});

    });

    //cancel the link behavior            
    return false;

});

//if user clicked on next button
$('.next').click(function() {

    //get the right position
    var left_indent = parseInt($('.slides ul').css('left')) - item_width;

    //slide the item
    $('.slides ul:not(:animated)').animate({'left' : left_indent}, 1000, function () {

        //move the first item and put it as last item
        $('.slides li:last').after($('.slides li:first'));                  

        //set the default item to correct position
        $('.slides ul').css({'left' : left_value});

    });

    //cancel the link behavior
    return false;

});        

//if mouse hover, pause the auto rotation, otherwise rotate it
$('.slides').hover(

    function() {
        clearInterval(run);
    }, 
    function() {
        run = setInterval('rotate()', speed);   
    }
); 

});

   //a simple function to click next link
  //a timer will call this function, and the rotation will begin
  function rotate() {
$('.next').click();
   }

   </script> 
```

而CSS是

```
 <style>
 .carousel {
margin:0 auto;
overflow:hidden;
            }

  .slides {
overflow:hidden;
/* fix ie overflow issue */
position:relative;
width:735px;
height:198px;
padding-bottom:13px;
         }

    /* remove the list styles, width : item width * total items */  
    .slides ul {
left:0;
top:0;
list-style:none;
margin:0;
padding:0;  
width:3000px;
float:left;
position:absolute;
               }

    /* width of the item, in this case I put 250x250x gif */
    .slides li {
float:left;
list-style:none;
width:735px;
               }

    .slides li img {
padding:0;
                   }

    /* Styling for prev and next buttons */
    .slides ul li.buttons {
display:block;  
position:relative;

    }

    .buttons a {
display:block;
width:22px; 
height:46px;
text-indent:-999em;
float:left;
               }

     a.prev {
background:url(Wireframes_Carousels/sprite/sprite.png) 0px -100px no-repeat;
            }

    a.prev:hover {
background:url(Wireframes_Carousels/sprite/sprite.png) -60px -100px no-repeat;
                 }

    a.next {
background:url(Wireframes_Carousels/sprite/sprite.png) -30px -100px no-repeat;

          }

    a.next:hover {
background:url(Wireframes_Carousels/sprite/sprite.png) -90px -100px no-repeat;
                 }

    .txt{
float:left;
text-align:left;
position:absolute;
margin-top:26px;
margin-bottom:19px;
}

    .txt h1{
margin-left:34px;
display:inline;
font: "Trebuchet MS", bold, 25px;
color:#003399;

}

    .txt p{
margin-left:34px;
font:Verdana,Reg.,18px;
color:#444;
line-height:23px;
}
    .learn_btn
    {
margin-left:32px;
display:block;
background:url(Wireframes_Carousels/sprite/sprite.png) 0px 0px no-repeat;
width:133px;
height:42px;
margin-bottom:-13px;

    }
    .learn_btn:hover
    {
background:url(Wireframes_Carousels/sprite/sprite.png) 0 -50px no-repeat;

}

    .slide_pos
    {
padding-left:300px;
margin-bottom:15px;

}
    .slide_pos ul li img
    {
    }
    </style> 
```

HTML是：

```
 <body>

     <div class="carousel">

 <div class="slides"> 

    <ul>

        <li>                
                <span class="buttons">
                <a href="#" class="prev">prev</a>
                </span>
                <span class="buttons" style="float:right">
                <a href="#" class="next">next</a>
                </span>
            <span class="txt">

                    <h1>New to Intuit App Center?</h1>
                    <p>Discover the right apps <br/> for QuickBooks</p>
                    <a class="learn_btn" href="#"></a>

            </span>

            <img src="Wireframes_Carousels/sprite/hero-banner1.jpg"  alt="Slide 1"/>

        </li>

        <li>

            <span class="txt">
                    <h1>New to Intuit App Center?</h1>
                    <p>Discover the right apps <br/> for QuickBooks</p>
                    <a class="learn_btn" href="#"></a>                                                

            </span>

            <img src="Wireframes_Carousels/sprite/hero-banner2.jpg" alt="Slide 2"/>

        </li>

        <li>

            <span class="txt">
                    <h1>New to Intuit App Center?</h1>
                    <p>Discover the right apps <br/> for QuickBooks</p>
                    <a class="learn_btn" href="#"></a>                                                

            </span>

            <img src="Wireframes_Carousels/sprite/hero-banner3.jpg" alt="Slide 3"/>

        </li>

        <li>

            <span class="txt">
                    <h1>New to Intuit App Center?</h1>
                    <p>Discover the right apps <br/> for QuickBooks</p>
                    <a class="learn_btn" href="#"></a>                                                

            </span>

            <img src="Wireframes_Carousels/sprite/hero-banner4.jpg" alt="Slide 4"/>

        </li>

    </ul>

</div>

    </div>

    </body> 
```

我希望我的导航按钮 prev 和 next 分别位于滑动图像的左侧和右侧，但我无法做到这一点......我尝试将位置更改为绝对等，但我不知道该怎么做，因为它似乎是不工作...这些按钮不应该与图像一起滑动...请帮帮我...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:54:51.540

如果我理解正确，您只希望将下一个和上一个按钮放在其他所有内容之上并进行修复，这样它们就不会随着每张幻灯片一起滑动？在这种情况下，它不是 jquery 或 javascript 问题，而只是您的 CSS。我会试试这个。

将它们从跨度中取出，并将类添加`buttons`到每个`<a>`以及`left`和`right`。

```
.buttons{position:absolute; z-index:999;}
.left{left:20px; bottom:20px;}
.right{right:20px; bottom 20px;} 
```

显然，如果你想要它，你需要在不同的位置更改上面的内容。

您还需要将它们从`<li>`标签中取出并直接放入滑块支架容器中，该容器的位置应为`relative`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:57:17.953

您需要首先确保按钮周围的容器的样式为 ，`position: relative;` 并且按钮的样式都为`position: absolute;`。这允许容器内的按钮位于容器内的`positioned`任何位置，`relative`使用称为`top`、`bottom`、的样式`left`，`right`后跟百分比或像素。

**jsfiddle：http: [//jsfiddle.net/hZ9f4/](http://jsfiddle.net/hZ9f4/)**

- 或者 -

例子：

```
.buttons {
    position: absolute;
    z-index: 99999; /* to insure the buttons stay above the images at all times */
}
#prev {
    top:0;
    left:0;
}
#next {
    top:0;
    right:0;
} 
```

# php - 当代理*总是*声称安全连接时检测 SSL

> ID：14760493
> 
> 赞同：6
> 
> 时间：2013-02-07T20:35:02.180
> 
> 标签：php, javascript, https, proxy

我想**检测**用户是否正在查看**安全页面**，如果没有则重定向（用于登录）。

但是，在我看到服务器变量之前，我的网站会通过代理，并且代理（现在）告诉我，这`$_SERVER['HTTPS']`是`'on'`URI 明确指示的时候。它还显示`'on'`用户何时“安全”导航。

浏览`http://`并`https://`输出`$_SERVER['SERVER_PORT']`= `443`。

我没有能力对代理进行任何更改，所以我想知道：

*   PHP 是否有任何其他选项可供我检测真相或...
*   我是否坚持诉诸 JavaScript 的检测和重定向机制。

[我从这个问题](https://stackoverflow.com/questions/1175096/how-to-find-out-if-you-are-using-https-without-serverhttps)中挖掘了一些想法，但它们主要围绕着`$_SERVER['HTTPS']`值得信赖的变量。呸!

看来[这个问题](https://stackoverflow.com/questions/4512316/get-full-url-in-php-to-redirect-to-ssl/)至少正在经历类似的事情，但他/她能够通过调整 apache 解决方案来解决它。

是否有任何其他 PHP SERVER 变量或技巧可用于检测用户的 URI 以什么开头？在查看我的站点 http 与 https 时，$_SERVER 变量之间的唯一区别如下：

*   _FCGI_X_PIPE_（随机出现）
*   HTTP_COOKIE（sto-id-47873 包含在*非安全*版本中，但我**没有**放在那里）
*   REMOTE_ADDR（这个和接下来的两个*一直在*莫名其妙地变化！）
*   远程主机
*   REMOTE_PORT（'代理人员'，你为什么不断地改变这个？）

这些物品中的任何一个是否足够坚固，可以承受一个人的体重而不会碎裂并在以后引起疼痛？也许我不应该相信通过代理过滤的任何东西，因为它可能在任何给定时间发生变化。

这是我为此目的使用 JavaScript 的计划；这是我最好的吗？

```
function confirmSSL() {
    if(location.protocol != "https:") {
        var locale = location.href;
        locale = locale.replace(/http:\/\//,"https://");
        location.replace(locale);
    }
}
<body onLoad="confirmSSL()">... 
```

我认为如果用户在我的社区中禁用了 JavaScript，那么他们希望知道自己在做什么。他们应该能够手动进入安全区域。什么样的`<noscript>`建议是司空见惯的/好的做法？像这样的东西，也许？：

> `<noscript>`使用[https://blah.more.egg/fake](https://blah.more.egg/fake)导航以保护您的信息。`</noscript>`

有效的 PHP 解决方案（有很好的解释）将优先选择正确的答案。随意提交更好的 JavaScript 实现或链接。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:14:06.430

虽然已经在问题的评论中部分讨论过，但我将总结一些关于 JavaScript 中重定向逻辑的建议：

1.  通常使用`window.location`代替`location`是可取的，可以在[此处](https://stackoverflow.com/a/4709084/1282023)找到解释。
2.  对于协议的简单替换，Regex 似乎有点矫枉过正。
3.  重定向逻辑应该尽快执行，因为在重定向的情况下，每个额外的文档处理都是不必要的。
4.  禁用 JavaScript 的浏览器至少应该显示提示用户切换到 https 的通知。

我建议使用以下代码（从[此处](https://stackoverflow.com/a/4723302/1282023)采用），它简短而高效：

```
<head>
    <script type="text/javascript">
        if (window.location.protocol != "https:") {
            window.location.href = "https:" + window.location.href.substring(window.location.protocol.length);
        }
    </script>
    ...
</head>
<body>
    ...
    <noscript>Please click <a href="https://my-cool-secure-site.com">here</a> to use a secure connection!</noscript>
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T23:49:11.263

还有一种方法可以在没有客户端 JavaScript 的情况下实现重定向。如果在客户端的浏览器中禁用了 JavaScript，此方法可能特别有用。
这些步骤是纯 PHP 并且非常简单：

*   开始一个会话
*   如果是新会话，则重定向到该`https`位置
*   如果会话不是新的，则可以假设用户已被重定向

示例代码：

```
<?php
    session_start();
    if( !isset($_SESSION['runningOnHttps']) ) {
        $_SESSION['runningOnHttps'] = true;
        header('Location: https://my-cool-secure-site.com');
    }
?> 
```

自然，您可以将此功能限制在禁用 JavaScript 的浏览器中，以创建一种“混合模式”：每当与非 JS 浏览器建立新会话时，向某种回调脚本发出请求，通知服务器发送位置标头：

**some_landingpage.php**发送一个包含隐藏 iframe 的初始值`<noscript>`，它将加载 redirect.php：

```
if( !isset($_SESSION['checkWasMade']) ) {
    $_SESSION['checkWasMade'] = true;
    echo '<noscript>
            <iframe src="redirect.php" style="visibility: hidden; position: absolute; left: -9000px;"></iframe>
          </noscript>';
} 
```

**对redirect.php**的请求会让您知道JavaScript 被禁用，并让您有机会通过发送`Location`带有下一个实际请求的标头（见上文）来强​​制重定向。

当然，这种方法只有在一个会话期间协议不会改变*（神奇地？）的情况下才能可靠地工作。*

**更新：**
所有上述处理非 JavaScript 用户代理的方法都可以通过一种更简洁的方法变得毫无意义：
我刚刚了解到，它`<noscript>`也可以包含在 中`<head>`，它允许通过`<meta>`标签重定向。

因此，**some_landingpage.php**可以在内部发送初始元刷新`<noscript>`：

```
// The following echo must appear inside the html head
if( !isset($_SESSION['checkWasMade']) ) {
   $_SESSION['checkWasMade'] = true;
   echo '<noscript>
            <meta HTTP-EQUIV="REFRESH" content="0; url=https://my-cool-secure-site.com"> 
        </noscript>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:42:12.010

只需使用客户端方法。如果您的代理不可配置，则该选项不可用。通过js检测和重定向很好。

# zend-framework - 不使用 zend_form 的 zend 框架登录表单

> ID：14760495
> 
> 赞同：0
> 
> 时间：2013-02-07T20:35:05.443
> 
> 标签：zend-framework

我需要创建登录表单，但没有使用 zend_form，那么在哪里创建以及如何发布和获取表单字段。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:28:03.613

Stackoverflow 不是为了让别人制作你的代码。你应该尝试自己，如果你被某个特定的部分卡住了，你可以来这里寻求帮助。我现在就让你开始

### HTML

```
<form method="post" action="/account/login">
<input type="text" name="email" id="email" value="">
<input type="password" name="password" id="password" value="">
<input type="submit" name="submit" id="submit" value="Submit">
</form> 
```

这指向控制器`account`和动作`login`

### 控制器

```
<?php
    class AccountController {

          public function loginAction() {
              // Get the request
              $request = $this->getRequest();

              // If the request was a post we process the login request
              if ( $request->isPost() ) {
                        $email      = $request->getParam('email');
                        $password   = $request->getParam('password');
                   // Login procedure       
              }
          }
    } 
```

# ios - UICollectionView 在屏幕加载时自动滚动到底部

> ID：14760496
> 
> 赞同：33
> 
> 时间：2013-02-07T20:35:06.670
> 
> 标签：ios, objective-c, uiscrollview, uicollectionview

我试图弄清楚当屏幕首次加载时如何一直滚动到 UICollectionView 的底部。当状态栏被触摸时，我可以滚动到底部，但我希望能够在视图加载时自动执行此操作。如果我想在触摸状态栏时滚动到底部，则以下内容可以正常工作。

```
- (BOOL)scrollViewShouldScrollToTop:(UITableView *)tableView
{
NSLog(@"Detect status bar is touched.");
[self scrollToBottom];
return NO;
}

-(void)scrollToBottom
{//Scrolls to bottom of scroller
 CGPoint bottomOffset = CGPointMake(0, collectionViewReload.contentSize.height -     collectionViewReload.bounds.size.height);
 [collectionViewReload setContentOffset:bottomOffset animated:NO];
 } 
```

我尝试在 viewDidLoad 中调用 [self scrollToBottom]。这是行不通的。关于视图加载时如何滚动到底部的任何想法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-08-16T00:21:07.270

我发现在 viewWillAppear 中没有任何效果。我只能让它在 viewDidLayoutSubviews 中工作：

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    [self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:endOfModel inSection:0] atScrollPosition:UICollectionViewScrollPositionNone animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-08T00:43:18.793

只是为了详细说明我的评论。

viewDidLoad 在元素可见之前被调用，因此某些 UI 元素不能很好地操作。诸如在工作中移动按钮但处理子视图通常不会（如滚动 CollectionView）。

当在 viewWillAppear 或 viewDidAppear 中调用时，这些操作中的大多数都会发挥最佳效果。这是 Apple 文档中的一个例外，它指出了在覆盖这些方法中的任何一个时要做的重要事情：

> 您可以覆盖此方法以执行与呈现视图相关的其他任务。**如果你重写了这个方法，你必须在你的实现中调用 super 。**

super 调用通常在自定义实现之前调用。（所以覆盖方法内的第一行代码）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-10-21T21:06:59.907

所以有一个类似的问题，这是另一种**不使用 scrollToItemAtIndexPath的方法**

仅当内容大于视图框架时，才会滚动到底部。

使用 scrollToItemAtIndexPath 可能更好，但这只是另一种方法。

```
CGFloat collectionViewContentHeight = myCollectionView.contentSize.height;
CGFloat collectionViewFrameHeightAfterInserts = myCollectionView.frame.size.height - (myCollectionView.contentInset.top + myCollectionView.contentInset.bottom);

if(collectionViewContentHeight > collectionViewFrameHeightAfterInserts) {
   [myCollectionView setContentOffset:CGPointMake(0, myCollectionView.contentSize.height - myCollectionView.frame.size.height) animated:NO];
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-11T18:05:59.040

**斯威夫特 3 示例**

```
let sectionNumber = 0
self.collectionView?.scrollToItem(at: //scroll collection view to indexpath
                                  NSIndexPath.init(row:(self.collectionView?.numberOfItems(inSection: sectionNumber))!-1, //get last item of self collectionview (number of items -1)
                                                   section: sectionNumber) as IndexPath //scroll to bottom of current section
                                , at: UICollectionViewScrollPosition.bottom, //right, left, top, bottom, centeredHorizontally, centeredVertically
                                animated: true) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-01T15:39:33.163

获取最后一项的索引路径。然后...

```
- (void)scrollToItemAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UICollectionViewScrollPosition)scrollPosition animated:(BOOL)animated 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-23T09:56:26.357

对我来说，我找到了下一个解决方案：

在 CollectionView 中调用 reloadData，并使 main 上的 dcg 滚动。

```
 __weak typeof(self) wSelf = self;

 [wSelf.cv reloadData];
 dispatch_async(dispatch_get_main_queue(), ^{
 NSLog(@"HeightGCD:%@", @(wSelf.cv.contentSize.height));
 [wSelf.cv scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:50 inSection:0] atScrollPosition:UICollectionViewScrollPositionBottom animated:YES];
 }); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-14T22:24:23.287

这些都不适合我，我最终得到了这个，它可以在任何滚动视图上工作

```
extension UIScrollView {
    func scrollToBottom(animated: Bool) {
        let y = contentSize.height - 1
        let rect = CGRect(x: 0, y: y + safeAreaInsets.bottom, width: 1, height: 1)
        scrollRectToVisible(rect, animated: animated)
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-10-17T13:42:28.260

问题很可能是即使您的收藏视图在屏幕上，它也可能没有实际的`contentSize`.

如果您滚动`viewDidAppear`，您将有一个`contentSize`，但您的 scollectionview 将在滚动之前简要显示内容。

问题`viewDidLayoutSubviews`是它被多次调用，所以你需要添加一个丑陋的布尔值来限制滚动。

我发现的最佳解决方案是强制布局在视图中出现。

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    // force layout before scrolling to most recent
    collectionView.layoutIfNeeded()
    // now you can scroll however you want
    // e.g. scroll to the right
    let offset = collectionView.contentSize.width - collectionView.bounds.size.width
    collectionView.setContentOffSet(CGPoint(x: offset, y: 0), animated: animated)
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-30T12:00:45.547

考虑是否可以`performBatchUpdates`这样使用：

```
private func reloadAndScrollToItem(at index: Int, animated: Bool) {
    collectionView.reloadData()
    collectionView.performBatchUpdates({
        self.collectionView.scrollToItem(at: IndexPath(item: index, section: 0),
                                         at: .bottom,
                                         animated: animated)
    }, completion: nil)
} 
```

如果`index`是集合视图数据源中最后一项的索引，它将一直滚动到底部。

# python - 按作者搜索 YouTube 视频

> ID：14760497
> 
> 赞同：3
> 
> 时间：2013-02-07T20:35:13.983
> 
> 标签：python, youtube-api

我正在使用 YouTube API 3.0，并希望按作者搜索视频。我将如何做到这一点？

我正在使用 python 客户端库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:27:05.813

在 YouTube Data API v3 中，您需要从用户的频道中找到 UploadsPlaylist，然后他们会查找该频道的 PlaylistItems。

例如，如果您想查找 GoogleDevelopers 上传的内容，请先找到他们的 channel_id。

如果您不知道用户的 channel_id，则必须调用 Search 资源（将 kind 设置为 'channel'）才能找到它：

> [https://www.googleapis.com/youtube/v3/search?part=id&maxResults=1&q=GoogleDevelopers&type=channel&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/search?part=id&maxResults=1&q=GoogleDevelopers&type=channel&key=%7BYOUR_API_KEY%7D)

回报：

```
{
 "kind": "youtube#searchListResponse",
 "etag": "\"Sja0zsjNVqBAv0D_Jpz6t1GyTzk/fm4P2RLxOAO0xdASI5BagD86H8A\"",
 "pageInfo": {
  "totalResults": 21,
  "resultsPerPage": 1
 },
 "nextPageToken": "CAEQAA",
 "items": [
  {
   "id": {
    "kind": "youtube#channel",
    "channelId": "UC_x5XG1OV2P6uZZ5FSM9Ttw"
   },
   "kind": "youtube#searchResult",
   "etag": "\"Sja0zsjNVqBAv0D_Jpz6t1GyTzk/q4hYefapiMoagc7b_3bYaVZvSJo\""
  }
 ]
} 
```

如您所见，他们的 channelId = UC_x5XG1OV2P6uZZ5FSM9Ttw

调用 Channel 资源的 contentDetais 部分以查找他们的 Uploads Playlist：

> [https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=UC_x5XG1OV2P6uZZ5FSM9Ttw&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=UC_x5XG1OV2P6uZZ5FSM9Ttw&key=%7BYOUR_API_KEY%7D)

这将返回：

```
{
 "kind": "youtube#channelListResponse",
 "etag": "\"Sja0zsjNVqBAv0D_Jpz6t1GyTzk/ZouMU1qBRkF6DgacOLHE88Xk144\"",
 "pageInfo": {
  "totalResults": 1,
  "resultsPerPage": 1
 },
 "items": [
  {
   "id": "UC_x5XG1OV2P6uZZ5FSM9Ttw",
   "kind": "youtube#channel",
   "etag": "\"Sja0zsjNVqBAv0D_Jpz6t1GyTzk/khrrkvk8Tl0XWRZoN66zqloSJM4\"",
   "contentDetails": {
    "relatedPlaylists": {
     "uploads": "UU_x5XG1OV2P6uZZ5FSM9Ttw"
    }
   }
  }
 ]
} 
```

如您所见，他们上传的播放列表 id 是 UU_x5XG1OV2P6uZZ5FSM9Ttw

调用 PlaylistItems 资源以获取 GoogleDevelopers 上传的视频：

> [https://www.googleapis.com/youtube/v3/playlistItems?part=id%2Csnippet%2CcontentDetails&playlistId=UU_x5XG1OV2P6uZZ5FSM9Ttw&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/playlistItems?part=id,snippet,contentDetails&playlistId=UU_x5XG1OV2P6uZZ5FSM9Ttw&key=%7BYOUR_API_KEY%7D)

# python - SQLite python再次错误

> ID：14760498
> 
> 赞同：2
> 
> 时间：2013-02-07T20:35:27.260
> 
> 标签：python, sqlite

```
conn = sqlite3.connect('SADS.db')
cur = conn.cursor()
print " "
choice = raw_input("Does the Customer know their user ID? Y/N : ")
if choice == "N":
        number = raw_input("What is their phone number? : ")
        cur.execute("SELECT * FROM customers WHERE Telephone = (?)", (number,))
        row = cur.fetchone()
        print "Customer ID : " , row[0] 
```

我使用上面的代码来检索客户详细信息 - 但是当我这样做时出现以下错误：

```
 File "G:\ICT\SADS.py", line 111, in editdetails
print "Customer ID : " , row[0]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

我尝试使用 while 循环或 for row in rows 但它真的让我很紧张，但它不起作用 - 请帮助:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T20:46:44.323

```
row = cur.fetchone()
if row is None:
    print "Telephone number not found"
else:
    print "Customer ID : " , row[0] 
```

# c++ - 从txt文件读入链表

> ID：14760499
> 
> 赞同：1
> 
> 时间：2013-02-07T20:35:27.777
> 
> 标签：c++, linked-list

我正在尝试将 *.txt 文件中的数据读取到链接列表中。该文件设置了 16 种不同类型的数据，这些数据排列成行，每种数据类型之间都有选项卡。我有几个问题。编译器没有给出错误，但是当我运行程序并输入要读取的文件名时，什么也没有发生。我尝试用`while(!din.eof())`for 循环替换该行（下面的第 27 行）`for(int i=0; i<NUM_LINES; i++)`，这似乎有帮助，但我得到了前三个元素（所有字符串类型）后跟一行零，此行重复直到结束环形。我已经包含了我认为问题所在的方法。我想知道是否有人可以查看我的代码并让我知道问题出在哪里。谢谢。

```
#include <iostream>
#include <fstream>
using namespace std;

class Node
{
 public:
   // Constructors
   Node();
   Node(const string name, const string position, const string team, const int g, const int att, const float attg, const int cmp, const float pct, const int yds, const float ydsg, const int lng, const int td, const int inte, const int sck, const int sckyl, const float rating);
   Node(const Node & node);
   ~Node();

   // Methods
   bool readData();
   void setNext(Node* next);
   void print() const;

 private:
   string Name;
   string Position;
   string Team;
   int G;
   int Att;
   float AttG;
   int Cmp;
   float Pct;
   int Yds;
   float YdsG;
   int Lng;
   int TD;
   int Int;
   int Sck;
   int SckYL;
   float Rating;
   Node *Next;
};

//----------------------------------------------
// Constructor method
//----------------------------------------------
Node::Node()
{
   Name = "";
   Position = "";
   Team = "";
   G = 0;
   Att = 0;
   AttG = 0.0;
   Cmp = 0;
   Pct = 0.0;
   Yds = 0;
   YdsG = 0.0;
   Lng = 0;
   TD = 0;
   Int = 0;
   Sck = 0;
   SckYL = 0;
   Rating = 0.0;
   Next = NULL;
}

//----------------------------------------------
// Constructor method with parameters
//----------------------------------------------
Node::Node(const string name, const string position, const string team, const int g, const int att, const float attg, const int cmp, const float pct, const int yds, const float ydsg, const int lng, const int td, const int inte, const int sck, const int sckyl, const float rating)
{
   Name = name;
   Position = position;
   Team = team;
   G = g;
   Att = att;
   AttG = attg;
   Cmp = cmp;
   Pct = pct;
   Yds = yds;
   YdsG = ydsg;
   Lng = lng;
   TD = td;
   Int = inte;
   Sck = sck;
   SckYL = sckyl;
   Rating = rating;
   Next = NULL;
}

//----------------------------------------------
// Copy constructor method
//----------------------------------------------
Node::Node(const Node & node)
{
   Name = node.Name;
   Position = node.Position;
   Team = node.Team;
   G = node.G;
   Att = node.Att;
   AttG = node.AttG;
   Cmp = node.Cmp;
   Pct = node.Pct;
   Yds = node.Yds;
   YdsG = node.YdsG;
   Lng = node.Lng;
   TD = node.TD;
   Int = node.Int;
   Sck = node.Sck;
   SckYL = node.SckYL;
   Rating = node.Rating;
   Next = NULL;
}

//----------------------------------------------
// Destructor method
//----------------------------------------------
Node::~Node()
{
}

//----------------------------------------------
// Method:   readData
// Purpose:  Read data from file into linked list, and print contents of the list.
//----------------------------------------------
bool Node::readData()
{
   // Declare local variables
   string name, position, team;
      name = position = team = "";
   int g, att, cmp, yds, lng, td, inte, sck, sckyl;
      g = att = cmp = yds = lng = td = inte = sck = sckyl = 0;
   float attg, pct, ydsg, rating;
      attg = pct = ydsg = rating = 0.0;

   // Get file name
   string filename = "";
   cout << "Enter file name: ";
   cin >> filename;

   // Open input file
   ifstream din;
   din.open(filename.c_str());
   if (din.fail())
   {
      cerr << "Could not open file: " << filename << endl;
      return false;
   }

   // Read data
   Node *head = NULL;
   while (!din.eof())
   {
      din >> name >> position >> team >> g >> att >> attg >> cmp >> pct >> yds >> ydsg >> lng >> td >> inte >> sck >> sckyl >> rating;

      Node *temp = new Node(name, position, team, g, att, attg, cmp, pct, yds, ydsg, lng, td, inte, sck, sckyl, rating);
      temp->setNext(head);
      head = temp;
   }

   din.close();
   head->print();
   return true;
}

//----------------------------------------------
// setNext method
//----------------------------------------------
void Node::setNext(Node* next)
{
   Next = next;
}

//----------------------------------------------
// Print method
//----------------------------------------------
void Node::print() const
{
   cout << Name << "    " << Position << "    " << Team << "    " << G << "    " << Att << "    " << AttG << "    "
        << Cmp << "    " << Pct << "    " << Yds << "    " << YdsG << "    " << Lng << "    " << TD << "    " << Int << "    "
        << Sck << "    " << SckYL << "    " << Rating;
   if (Next != NULL)
      Next->print();
}

//----------------------------------------------
// Main program
//----------------------------------------------

int main()
{
   Node list;
   if (list.readData())
      cout << "Success" << endl;
   else
      cout << "Fail" << endl;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:25:17.533

In your file you have, `Charlie Batch` and so on. What do you think will happen when you read it? Name will become `Charlie`; position will become `Batch`.

This happens because the data is read until a whitespace is met.

[http://cplusplus.com/reference/fstream/fstream/?kw=fstream](http://cplusplus.com/reference/fstream/fstream/?kw=fstream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:40:19.933

您是否尝试过启动循环？获取文件的第一行，然后执行您的 while 语句。在 while 语句中，创建新节点，然后获取下一行。在那里结束循环的代码块。

```
// Read data
Node *head = NULL;

  din >> name >> position >> team >> g >> att >> attg >> cmp >> pct >> yds >> ydsg >> lng >> td >> inte >> sck >> sckyl >> rating;

while (!din.eof())
{

  Node *temp = new Node(name, position, team, g, att, attg, cmp, pct, yds, ydsg, lng, td, inte, sck, sckyl, rating);
  temp->setNext(head);
  head = temp;

  din >> name >> position >> team >> g >> att >> attg >> cmp >> pct >> yds >> ydsg >> lng >> td >> inte >> sck >> sckyl >> rating;

} 
```

# android - 在服务上执行长时间运行的操作

> ID：14760507
> 
> 赞同：2
> 
> 时间：2013-02-07T20:36:10.323
> 
> 标签：android, android-handler, worker-thread

我正在构建一个具有服务的应用程序。我知道所有应用程序组件都运行在同一个 UI 进程中，至少您在清单中指定了它。因此，为了避免 ANR 的消息，我有三种方法。

1.  在清单中指定服务以在单独的进程中运行，例如 android:process=":remote" 但我读过一些 StackOverflow 的帖子
    说这不是一个好主意，因为它消耗大量电池和 CPU 处理。我真的很尊重，因为这些帖子来自受信任的人。

2.  使用 IntentService。这可能是一个很好的出路。但即使活动不可见，我也需要运行我的服务。因为我需要该服务不断检查来自其他用户的新消息的 Web 服务并通过通知通知。可以使用 IntentService 吗？这是一个优雅的解决方案。

3.  使用本地服务。只需从清单文件中删除 android:process=":remote" 属性。但我得到一些 ...OnMainThreadException 错误。这意味着我需要创建一个特殊的线程来执行那些长时间运行的操作或使用 AsyncTask，

也许还有其他方法可以做到这一点。请让我知道，如何在服务上执行长时间运行的操作。真的是势在必行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:13:56.137

在 UI 线程中执行的 Android 服务。因此，您应该使用 AsyncTask 或其他方式来处理网络请求的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:13:30.243

首先，让我们接受有两个部分：一个活动部分（网络）和下一个活动部分之前的一些休眠部分。我认为您可以将普通本地`IntentService`用于活动部件。完成后的每个活动部分都应使用 重新安排下一个活动部分`AlarmManager`。这种方法可确保您的应用程序在睡眠部分不消耗资源。你是对的 - 一旦`IntentService`获得要呈现给用户的结果，它就可以使用通知。

# jquery - 使用锚点打开另一个选项卡

> ID：14760509
> 
> 赞同：0
> 
> 时间：2013-02-07T20:36:20.250
> 
> 标签：jquery, tabs, anchor

我很难弄清楚这一点。我想打开一个从链接到锚点的选项卡。这就是我所拥有的。我正在使用`jquery`1.8.3。它工作正常，但我不确定发生了什么。

```
 jQuery(function ($){

        $(".tabContents").hide();
        $(".tabContents:first").show();

        $("#tabContainer ul li a").click(function(e){
            e.preventDefault();
            var activeTab = $(this).attr("href");
            $("#tabContainer ul li a").removeClass("active");
            $(this).addClass("active");
            $(".tabContents").hide();
            $(activeTab).fadeIn();
        });
          });
         $('a.tlink').on('click', function(evt) {
            evt.preventDefault();
            var whereTo = $(this).attr('goto');
            $tabs = $("#tabContainer li");
           $tabs.find('a[href=#' + whereTo + ']').trigger('click');
            //alert(attr('name'));
        //alert( $('#'+whereTo+' a').offset().top );
            $('html, body').animate({
                scrollTop: $('#'+whereTo+' a').offset().top
            });
        }); 
```

这是[示例](http://jsfiddle.net/KgaKk/35/)。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:01:15.853

我会删除 <a name="anchor"> 元素并将链接的 href 设置为“#tab2”（以保持方法一致），而是从代码中删除“#”，如下所示：

`$tabs.find('a[href=' + whereTo + ']').trigger('click');`

...否则，您的选择器字符串中将有一个双“#”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:40:48.387

在示例中，您没有`goto`锚点，

工作示例，我添加了：http `goto='tab2'`: [//jsfiddle.net/KgaKk/36/](http://jsfiddle.net/KgaKk/36/)

# php - 如何循环显示数据库中的 blob 图像？

> ID：14760511
> 
> 赞同：0
> 
> 时间：2013-02-07T20:36:24.777
> 
> 标签：php, sql, image, loops, blob

只是首先声明，我已经被告知这不是存储和显示图像的最佳方式，但我的任务是这样做，因此将不胜感激任何帮助（将文件路径存储在数据库等）。

经过大量时间在网上搜索后，我想我发现解决我的特定问题的最佳方法是使用单独的文件来解码 blob 并将其链接到要在其上显示图像的文件中. 与每页不能有多个不同类型的标题有关。

任何帮助都会很棒，因为您可能会说我根本不擅长 PHP。

这是我的代码：

```
<?php
$con = mysql_connect("***","***","*****");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("learning_game", $con);
$result = mysql_query("SELECT * FROM data");
?>
<head>
<title>Game Data</title>
</head>
<body>
<h1>Game Data Input</h1>
</body>
</html> 
```

我有一个名为“数据”的表，blob 文件位于名为“图像”的列下

理想情况下，我想遍历数据库中的所有 blob 并在浏览器中打印它们。

任何帮助将不胜感激，我感谢您提前回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:46:30.793

您应该能够使用：

```
printf('<img src="data:image/jpeg;base64,%s">', base64_encode($myblobdata)); 
```

这会给你类似的东西：

```
<img src='data:image/jpeg;base64,Cldhcm5...pbmUgNQo='> 
```

除了更长的时间。

就像每个人都在说评论一样，这将使您的页面“沉重”。如果这些比简单图标大几个像素，您应该认真考虑使用单独的脚本将它们用作图像。IE：

```
<?php
$myblob = your_code_here();
header('Content-Type: image/jpeg');
echo $myblob;
exit; 
```

# windows - 如何通过cmd最大化特定窗口？（视窗）

> ID：14760518
> 
> 赞同：10
> 
> 时间：2013-02-07T20:36:45.880
> 
> 标签：windows, command-line, command-prompt, maximize-window

我只想制作一个简单的[记事本](https://en.wikipedia.org/wiki/Notepad_%28software%29).bat 文件，以最大化特定的进程窗口。那可能吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-03-09T19:53:43.900

如果您想最大化已经运行的程序/窗口，您可以尝试使用[***windowMode.bat***](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/.net/c/windowMode.bat)使用其标题（或标题开头的字符串）：

```
@echo off
call windowMode -title "Notepad" -mode maximized 
```

或者使用它的进程ID：

```
@echo off
call windowMode -pid 1313 -mode maximized 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-07T20:39:02.183

**[`Start`](http://ss64.com/nt/start.html)**需要一个论据来做到这一点。

```
START /MAX notepad.exe 
```

但是，如果它是一个已经在运行的实例，则它不在**cmd**的控制范围内。

# iphone - 使自定义单元格适合组样式表的边距

> ID：14760524
> 
> 赞同：0
> 
> 时间：2013-02-07T20:37:13.103
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我创建了一个在应用程序中经常使用的自定义单元格。它只是 2 个标签。一个在左边，一个在右边。

我正在尝试将此单元格用于分组表。然而问题是这张表填满了大部分屏幕（在 ipad 上），所以边距实际上足够宽，它们实际上到达了左右两侧的文本。由于单元格本身延伸了表格的整个长度，而不是在边距内。

如何让我的自定义单元格适合边距？

这是我目前的单元格声明..

```
static NSString *CellWithIdentifier = @"SettingsTableCell";
SettingsTableCell *settingsCell = (SettingsTableCell *)[tableView dequeueReusableCellWithIdentifier:CellWithIdentifier];
if (settingsCell == nil)
{
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"SettingsTableCell" owner:nil options:nil];
    settingsCell = [topLevelObjects objectAtIndex:0];
}

settingsCell.autoresizingMask = (UIViewAutoresizingFlexibleWidth || UIViewAutoresizingFlexibleLeftMargin); //my attempt to fix margin issue
settingsCell.leftText.text = val1;
settingsCell.rightText.text = val2;

return settingsCell; 
```

# html - 这些跨度从何而来？

> ID：14760525
> 
> 赞同：0
> 
> 时间：2013-02-07T20:37:26.867
> 
> 标签：html, google-search, plagiarism-detection, blackboard

我们不情愿地使用黑板进行测试，几个学生的答案包含大量 HTML 格式。我可以想象在 Word 中写答案并复制/粘贴答案会增加格式。但我看到了这个跨度标签：`<span class="goog_qs-tidbit goog_qs-tidbit-0">`几次。我认为它可能来自谷歌搜索，但无法在谷歌或他复制的网站上找到它。有谁知道谁使用这些跨度？

像这样玩数字侦探很有趣，但也很令人沮丧。所有学生注意——当你从互联网上复制/粘贴一些东西时，我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T10:33:40.093

尝试在 Chrome (ctrl+shift+n) 中以隐身模式打开页面，应该可以正常工作。某些插件会出现此错误

# .net - 为什么我会得到 MQRC_NO_MSG_AVAILABLE？

> ID：14760526
> 
> 赞同：2
> 
> 时间：2013-02-07T20:37:33.450
> 
> 标签：.net, ibm-mq

我有以下代码：

```
 MQQueueManager mqm = null;
        MQQueue mqQueue = null;
        try
        {
            mqm = new MQQueueManager("SWIFTQM", "SWIFTCHANNEL", "localhost");
            mqQueue = mqm.AccessQueue("SWIFTQ", MQC.MQOO_INPUT_AS_Q_DEF | MQC.MQOO_FAIL_IF_QUIESCING);
            MQMessage mqMsg = new MQMessage();
            MQGetMessageOptions mqGetMsgOpts = new MQGetMessageOptions();
            mqGetMsgOpts.Options |= MQC.MQGMO_SYNCPOINT;
            mqQueue.Get(mqMsg, mqGetMsgOpts);
            string s1 = "";
            if (mqMsg.Format.CompareTo(MQC.MQFMT_STRING) == 0)
                s1 = mqMsg.ReadString(mqMsg.MessageLength);
            string s2 = "";
            mqQueue.Get(mqMsg, mqGetMsgOpts);
            if (mqMsg.Format.CompareTo(MQC.MQFMT_STRING) == 0)
                s2 = mqMsg.ReadString(mqMsg.MessageLength);
        }
        finally
        {
            if (mqQueue != null)
                mqQueue.Close();
            if (mqm != null)
                mqm.Disconnect();
            if (mqm != null)
                mqm.Close();
        } 
```

虽然队列有很多消息，但第二个 mqQueue.Get 得到“MQRC_NO_MSG_AVAILABLE”异常。有没有我错过的选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T01:59:08.310

是的，您必须在拨打`mqMsg = new MQMessage();`第二个`Get`电话之前进行一次。这样做的原因是`MQMessage`对象在调用期间使用传入消息（标头和消息正文）进行初始化`Get`。例如`MessageId`，传入消息的将设置为 MQMessage.MessageId 属性。

如您所见，第二个`Get`是`MQMessage`在第一次调用中初始化的对象被调用的`Get`。这实际上意味着第二个 Get 调用正在查找具有您在第一个 get 调用中已经收到的消息 ID 的消息。但是该消息**已经**在第一个 get 调用本身中收到。`MQRC_NO_MSG_AVAILABLE`因此，第二次调用因原因码而失败。

您也正在使用`MQGMO_SYNCPOINT`选项。但是您的代码中没有`commit`被调用。此选项用于在本地事务中接收消息。如果您不打算在事务下接收消息，则必须删除此选项，否则执行`mqm.Commit`. 如果未调用 Commit，则在再次建立连接时将重新传递消息。

# ios - 在 xcode 中添加和删除动态生成的按钮

> ID：14760527
> 
> 赞同：0
> 
> 时间：2013-02-07T20:37:39.950
> 
> 标签：ios, xcode, button, dynamic, gesture

这是一个奇怪的问题。

我对 Xcode 很陌生。我一直在尝试制作一个简单的应用程序，当您单击按钮视图时添加新按钮并在双击时删除它们。

添加按钮是可以的，但删除它们是不可靠的。我认为这与我编写代码的方式有关，因为它似乎只删除了双击时最近添加的按钮，而不是我单击的实际按钮。

我的删节 .m 代码如下：

```
- (void)viewDidLoad
{

- (void)handleSingleTap:(UITapGestureRecognizer *)tapper {

//adds the buttons and gives them a unique tag

ButtonCount  = ButtonCount+1;
btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(0, 0, 150, 150);
btn.userInteractionEnabled = YES;
btn.tag=PuckCount;

//attaches double tap recognizer to button

UITapGestureRecognizer *doubleTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                                                      initWithTarget:self
                                                            action:@selector(handleDoubleTap:)];
[doubleTapGestureRecognizer setNumberOfTapsRequired:2];
[btn addGestureRecognizer:doubleTapGestureRecognizer];

//Add Tap Recognizer to pucks to create new buttons

UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                                                      initWithTarget:self
                                                      action:@selector(handleSingleTap:)];
[singleTapGestureRecognizer setNumberOfTapsRequired:1];
[singleTapGestureRecognizer requireGestureRecognizerToFail:doubleTapGestureRecognizer];
[btn addGestureRecognizer:singleTapGestureRecognizer];
UIImage *buttonImage = [UIImage imageNamed:@"puck2.png"];
[btn setImage:buttonImage forState:UIControlStateNormal];
[self.view addSubview:btn];
}

//handles what happens on a double tap - THIS IS WHERE I THINK THE PROBLEM IS.

- (void)handleDoubleTap:(UIGestureRecognizer *)doubletap{

PuckSelected = self.view.tag;
[[self.btn viewWithTag:PuckSelected] removeFromSuperview];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:11:06.543

您的代码似乎有 2 个问题。1\. 当您单击一次时，您将在 (0,0,150,150) 添加一个按钮，因此添加的任何新按钮都将位于前一个按钮的顶部。也许我看到这个是因为你的代码被删减了，但你可能想对此做点什么。2\. 在 UITapgesturerecognizer 中，它将为您提供被点击的视图（id）。您应该在选择器中使用它。喜欢： `doubletap.view.tag`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:00:22.267

如果您尝试删除被双击的按钮，请尝试此操作。

```
- (void) handleDoubleTap:(UIGestureRecognizer *) doubletap {
   [doubletap.view removeFromSuperview];
} 
```

UIGestureRecognizer 附加了视图。无需再次检索它。另外，您的问题是您试图从 self 而不是 doubletap 检索视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:00:31.187

```
- (void)handleDoubleTap:(UIGestureRecognizer *)doubletap{
  PuckSelected = self.view.tag;
  [[self.btn viewWithTag:PuckSelected] removeFromSuperview];
} 
```

根据上面的代码，被移除的按钮就是与`self.view`. 但是您没有显示`self.view`s 标记是如何设置的，因此我们不可能知道您的代码为什么或如何选择将被删除的按钮。

无论如何，你可能在这里走错了路。看起来您可能在按钮内嵌套了按钮？这很奇怪。此外，您正在使用带有`UIButton`s 的手势识别器，它不需要它。[他们已经通过目标动作机制](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW14)对点击和双击之类的东西做出响应。

一般来说，控件（即从 派生的对象`UIControl`）已经处理了触摸、点击和其他简单的交互。您实际上只会在`UIView`需要跟踪滑动或捏合等的 s 上使用手势识别器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T21:01:20.157

您的 handleDoubleTap 方法没有意义。做这样的事情::

```
- (void)handleDoubleTap:(UIGestureRecognizer *)doubletap{

    PuckSelected = doubletap.view.tag;
    [[self.view viewWithTag:PuckSelected] removeFromSuperview];
} 
```

它会正常工作

# c - 为联合结构的字段赋值的意外行为

> ID：14760531
> 
> 赞同：0
> 
> 时间：2013-02-07T20:37:51.983
> 
> 标签：c

```
typedef union { unsigned x; } T;

T a;
a.x = 3;

int main() { return 0; } 
```

尝试编译此代码，`gcc t.c`我得到

```
error: expected '=', ',', ';', 'asm' or '__attribute__' before '.' token 
```

使用

```
gcc --version
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

当我搬进`a.x = 3;`去时`main`，它的行为符合预期。

我希望找到从

```
ISO/IEC 9899:TC3 
```

其中解释了禁止将值分配给全局命名空间中的联合。

* * *

编辑：与结构它发生相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:46:02.497

> 我希望找到来自 ISO/IEC 9899:TC3 的段落，其中解释了禁止将值分配给全局命名空间中的联合。

它在 C99 的 6.9p1（翻译单元的语法）中进行了描述。您不能在函数之外有语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:19:58.887

在语言规范中，你*不能*做的通常是隐含的而不是明确的，因为你不能做的事情是无限的。而且，事实上，您*可以*将值分配给全局命名空间中的联合，除非您要坚持“分配”不能引用初始化。用于初始化全局联合成员的 C99 语法如下所示：

```
typedef union { unsigned x; } T;

T a = {.x = 3}; 
```

当然，结构的答案相同。

# html - 悬停时显示/隐藏div的背景图片

> ID：14760537
> 
> 赞同：1
> 
> 时间：2013-02-07T20:38:30.313
> 
> 标签：html, css, hover

我目前正在尝试确定是否可以在具有悬停状态的 div 上显示和隐藏背景图像。
这是一些代码：HTML

```
<div class="thumb">
    <div class="text">
        Header<br>
        Sub-header<br><br>
        Date
    </div>
</div>

<div class="thumb">
    <div class="text">
        Header<br>
        Sub-header<br><br>
        Date
    </div>
</div>

<div class="thumb">
    <div class="text">
        Header<br>
        Sub-header<br><br>
        Date
    </div>
</div> 
```

CSS

```
.thumb {
    width: 400px;
    height: 250px;
    background-color: silver;
    font-weight: bold;
    background: url("http://www.imageurlhere.com") no-repeat 50% 50%;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

.text {
    padding: 15px;
} 
```

所以基本上我想在背景图像和背景颜色之间交替，所以当你将鼠标悬停在 div 上时，背景图像就会显示出来，而在鼠标移出时，背景图像会被隐藏，你会恢复为背景颜色（银色）。
我发现这是可以通过伪类实现的，但由于这是针对 CMS 站点，图像将即时更改，因此必须通过 html 插入它们：

```
style="background-image: url('insert url here')" 
```

这完全可以隐藏和显示背景图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:40:34.097

是否有任何理由不能使用[`:hover`](https://developer.mozilla.org/en-US/docs/CSS/%3ahover)伪类使图像在悬停时出现/消失？

例如：

```
div {
    background-image: none;
}

div:hover {
    background-image: url('insert url here');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:57:18.423

你反对使用 Javascript（或 jQuery）吗？

如果没有，我有一个使用`.hover()`jQuery 中的函数的解决方案。您说您不想为新图像添加新类。所以我建议你将 url 存储在`.thumb`元素中。

HTML：

```
<div class="thumb" data-hoverimage="http://placekitten.com/250/400">
    <div class="text">Header
        <br>Sub-header
        <br>
        <br>Date</div>
</div>
<div class="thumb" data-hoverimage="http://placekitten.com/250/300">
    <div class="text">Header
        <br>Sub-header
        <br>
        <br>Date</div>
</div>
<div class="thumb" data-hoverimage="http://placekitten.com/400/250">
    <div class="text">Header
        <br>Sub-header
        <br>
        <br>Date</div>
</div> 
```

我将每个缩略图的 url 存储在`data-hoverimage`属性中（它可以是任何你想要的）。

然后，使用 jQuery，我们可以使用悬停功能。第一个`function`是当光标结束时，第二个是当光标离开时。

```
$(".thumb").hover(function(){
    var imgurl = $(this).data("hoverimage");
    $(this).css("background-image", "url(" + imgurl + ")")
}, function(){
    $(this).css("background-image", "");
}); 
```

我在这里有一个工作模型：http: [//jsfiddle.net/auURQ/](http://jsfiddle.net/auURQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:42:37.930

使用这个 CSS

```
.thumb:hover{
   background: url("http://www.imageurlhere.com") no-repeat 50% 50%;
}
.thumb {
      width: 400px;
      height: 250px;
      background-color: silver;
      font-weight: bold;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
       background-size: cover;
}

.text {
    padding: 15px;
} 
```

如果每个 Div 有不同的图像你有两种方法

1）为他们制作一个共享css并为悬停图像制作专用css

```
#thumb1:hover{
   background: url("http://www.imageurlhere.com") no-repeat 50% 50%;
}
#thumb2:hover{
   background: url("http://www.imageurlhere.com") no-repeat 50% 50%;
}
.thumb {
      width: 400px;
      height: 250px;
      background-color: silver;
      font-weight: bold;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
       background-size: cover;
}

.text {
    padding: 15px;
} 
```

另一种方法是使用 JS 或 JQuery Lib 设置悬停事件，...

# objective-c - NSMutableArray removeLastObject 异常

> ID：14760542
> 
> 赞同：5
> 
> 时间：2013-02-07T20:38:32.760
> 
> 标签：objective-c, cocoa-touch, exception, nsmutablearray

根据[NSMutableArray 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)：

> `removeLastObject``NSRangeException`如果数组中没有对象，则引发一个。

出于某种原因，我似乎可以在一个空数组上调用此方法，并且没有抛出异常。

这是一个测试用例：

```
- (void)testNSMutableArray
{
    NSMutableArray* arr = [[NSMutableArray alloc] init];
    STAssertTrue([arr count] == 0, @"Array count should be 0");
    STAssertThrows([arr removeLastObject], @"Should throw NSRangeException");
} 
```

这个测试用例在最后一行对我来说失败了，消息是：

> [arr removeLastObject] 提出（空）。应该抛出 NSRangeException

我在这里感到困惑吗？文档有错吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:03:12.743

查看程序集，Lion 中的这种行为似乎发生了变化。这是实现的一部分`[__NSArrayM removeLastObject]`（这是您正在调用的实际实现）：

```
0x3494975a:  movs   r0, #7
0x3494975c:  bl     0x3490c26c                ; _CFExecutableLinkedOnOrAfter
0x34949760:  cbz    r0, 0x3494977c            ; -[__NSArrayM removeLastObject] + 60 
```

这调用`CFExecutableLinkedOnOrAfter`值为 7；如果返回 1 （它在我的机器上），你就会得到你所看到的行为。如果它返回 0，你会得到一个异常。

`CFExecutableLinkedOnOrAfter`是一个未记录的函数，但一些[窥探](http://www.gnu-darwin.org/www001/src/DarwinSourceArchive/expanded/CF/CF-368/Base.subproj/CFUtilities.c)表明如果可执行文件在特定版本的 Mac OS X 之后链接，它会返回。[更多的窥探](http://www.opensource.apple.com/source/CF/CF-476.14/CFPriv.h?txt)表明 7 的值对应于 10.7。

因此，如果您正在运行 Lion 或更高版本，则不会出现异常。对我来说听起来像是一个文档错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:44:37.787

你是对的，在这种情况下，文档似乎是错误的（或者可能是过时的）。当我们尝试访问某个索引 i 处的对象时抛出 NSRangeException，该索引 i 不存在于数组中。但是在[arr removeLastObject]中，我猜iOS会自动检查以忽略数组为空时的情况

# jquery - 使用 Google Analytics 跟踪 Facebook Like 按钮时遇到问题

> ID：14760546
> 
> 赞同：0
> 
> 时间：2013-02-07T20:38:40.090
> 
> 标签：jquery, facebook, google-analytics, facebook-like

我正在尝试使用 Google Analytics 跟踪我在 Facebook 上的点赞。

我计划做的是在like 按钮上添加一个jQuery 事件监听器。

点赞按钮包含在 id 为“u_0_4”的表单中，因此我将其添加到我的 wordpress 网站 (hearingcareblog.com) 的 header.php 中：

```
<script>
$(document).ready(function(){
    $("#u_0_4").submit(function(){
        alert('test');
        //this is where I would have my tracking code
    });
});
</script> 
```

但是当我点击like按钮时没有出现警报。

有没有其他人试过这个？

关于为什么我的 jQuery 不听表单的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:26:50.377

check out this blog post directly from google, which shows you how you can track the clicks: [https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSocial](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSocial)

the important part of the blog post is this piece of code:

```
FB.Event.subscribe('edge.create', function(targetUrl) {
  _gaq.push(['_trackSocial', 'facebook', 'like', targetUrl]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:30:25.997

表单是动态添加到页面的吗？如果是这样，并且如果您`$(document).ready(...`在表单位于 dom 之前运行，那么提交代码将不会触发。

尝试`$("#u_0_4")`在 FireBug 或 Chrome Developers Tools 控制台窗口中执行以仔细检查是否找到了表单。

# google-apps-script - 使用 Apps 样式小部件的 Google Apps 脚本 UiApp

> ID：14760547
> 
> 赞同：1
> 
> 时间：2013-02-07T20:38:48.690
> 
> 标签：google-apps-script

我可以以某种方式在 UiApp 表单中使用 Google Apps 的主题/样式，例如 docs 和 gmail 吗？我想让我的界面与 Google 的其他服务保持一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:51:31.563

您可以使用 HtmlService 相当接近，但在 UiApp 中更难做到这一点。并非不可能，但肯定更难。

# asp.net-mvc-3 - 如何强制 MVC 视图错误使项目编译失败？

> ID：14760549
> 
> 赞同：4
> 
> 时间：2013-02-07T20:38:57.503
> 
> 标签：asp.net-mvc-3, compiler-errors

目前，当我编译时，我在编译窗口中没有看到来自 cshtml 视图的任何错误。

只有当我打开视图时，我才能看到红线下划线的问题。就是这样。

如果视图中有错误，我需要我的编译失败。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T20:41:20.370

在记事本中打开`csproj`文件并将`MvcBuildViews`属性更改为 true。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <!-- other properties ... -->
    <MvcBuildViews>true</MvcBuildViews>
  <!-- the rest of your project file ... --> 
```

# enterprise-architect - Sparx Enterprise Architect 查找使用的操作

> ID：14760554
> 
> 赞同：3
> 
> 时间：2013-02-07T20:39:35.220
> 
> 标签：enterprise-architect

我已经定义了一个带有操作的类，这些操作用于几个序列图中。

有没有办法可以找出有多少序列图正在使用一个特定的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:57:38.633

如果我理解正确，您应该能够执行以下操作：

1.  在“项目浏览器”中展开您的课程以查看操作
2.  右键单击该操作并从上下文菜单中选择“在所有图表中查找...”

这是屏幕截图：

![在此处输入图像描述](../Images/ce02fb0d41d553b1399db66c2743810e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:38:17.847

我现在不记得 EA 8 是否包含创建项目浏览器脚本的功能，即可以通过在项目浏览器中右键单击来调用的工具。这在 EA 9 和 EA 10 中可用。

如果它在 EA 8 中，您可以创建这样的脚本来执行查找。顺便说一下，您需要查看表 t_operation、t_connectortag 和 t_connector 以查找引用。

# c++ - 使用子字符串 C++ 得到奇怪的输出

> ID：14760556
> 
> 赞同：0
> 
> 时间：2013-02-07T20:39:39.340
> 
> 标签：c++, visual-studio-2010, vector, substring

所以我遇到了一些奇怪的问题，这似乎是一个非常简单的问题。

我有一个向量：

向量（字符串）集合线；

这包含我从 .txt 文件中获得的文本行。文本文件的内容是：

"4

磁盘 0.2 0.00005

鼠标 0.4 0.00002

键盘 0.3 0.00004

网络 0.5 0.0001"

collectionOfLines[0] = "磁盘 0.2 0.00005"

我试图将此字符串分成三个不同的字符串：“Disk”、“0.2”和“0.00005”，然后将这些字符串放入不同的向量中：

向量（字符串）集合命令；

这是我从行字符串中获取子字符串并将它们放入新向量的循环。

```
string deviceName;
string interruptProbability;
string interruptTime;

for(int i = 1; i < collectionOfLines.size(); i++) { // i = 1 because I am ignoring the "4" in the txt file
    string currentLine = collectionOfLines[i];
    int index = 0;
    for(int j = 0; j < currentLine.length(); j++) {
        if(j == 0) {
            continue;
        } else if(deviceName.empty() && currentLine[j-1] == ' ') {
            deviceName = currentLine.substr(index, j-1);
            index = j;
        } else if (interruptProbability.empty() && currentLine[j-1] == ' ') {
            interruptProbability = currentLine.substr(index, j-1);
            index = j;
        } else if (!deviceName.empty() && !interruptProbability.empty()) {
            interruptTime = currentLine.substr(index, currentLine.length());
            break;
        } else {
            continue;
        }
    }
    collectionOfCommands.push_back(deviceName);
    collectionOfCommands.push_back(interruptProbability);
    collectionOfCommands.push_back(interruptTime);
} 
```

当我运行它时，我没有收到任何错误，但是当我打印 collectionOfCommands 的输出时，我得到：

“磁盘

0.2 0.00

0.00005

磁盘

0.2 0.00

鼠标 0.4 0.00002

磁盘 0.2 0.00

键盘 0.3 0.00004

磁盘 0.2 0.00

网络 0.5 0.0001"

显然这个输出是完全错误的，除了第一个输出“磁盘”。

非常感谢您的帮助，谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:58:33.110

这是分解字符串的一种奇怪方式，尤其是因为您已经知道一致的格式。您使用 substr() 是否有特殊原因？尝试改用输入字符串流。

```
 #include <sstream>
    #include <string>
    ...

    istringstream iss(currentLine);

    getline(iss, deviceName, ' ');
    getline(iss, interruptProbability, ' ');
    getline(iss, interruptTime); 
```

# c++ - 如何使用 C++ 实现 fastcgi 身份验证？

> ID：14760557
> 
> 赞同：2
> 
> 时间：2013-02-07T20:39:44.553
> 
> 标签：c++, apache, authentication, networking, webserver

我在网络编程方面相对较新。我编写了一个生成 HTML 页面的小型 C++ 服务器。如果我理解正确的话，fastcgi 方法如下：

```
 |                    Site1
                         |  +------------+   +--------------+   +-------------+
                         |--|Apache/nginx|---|fastcgi socket|---|My C++ server|
                         |  +------------+   +--------------+   +-------------+
                       ........................................................
                         |                    Site2                             
   +-----------------+   |  +------------+   +--------------+   +-------------+
===|TCP from Internet|===|--|Apache/nginx|---|fastcgi socket|---|My C++ server|
   +-----------------+   |  +------------+   +--------------+   +-------------+
                         |
                         | <-firewall 
```

我的理解如下，如有错误请指正

1.  步骤是有人打开一个 Tcp/Http 套接字到一个众所周知的地址，例如。[http://www.example.com](http://www.example.com)
2.  一个防火墙的东西，所以一个背靠背的用户代理说，他是 example.com，在 web 服务器之间做一些流量路由
3.  防火墙打开另一个套接字到记录访问和其他事情的 Web 服务器（Apache/nginx）。
4.  Web 服务器为我的 C++ 服务器打开一个新套接字
5.  我的 C++ 服务器获得了 fastcgi 套接字，我接受了连接，然后开始轮询该连接上的 i/o 事件
6.  当数据到达该 fastcgi 连接时，我读取它并将内容解析为 HTTP 标头和 HTTP 有效负载

所以我的问题是如何进行身份验证或用其他方式识别用户？那么1个连接是1个用户是真的吗？我应该在处理登录/注销状态的每个连接上启动状态机吗？因此，当接受新连接时，状态为“注销”，我发回注册表，当我获得用户/通过连接状态步骤以“登录”时，服务器发送个性化内容。

我的 C++ 服务器基于[server1 - 一个 C++ 网络服务器/客户端框架](http://code.google.com/p/server1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T01:23:04.937

你的问题需要一本书的答案。

5 和 6 是正确的，但 Web 服务器会处理所有这些。

你真的应该专注于一个可以实现的小目标。让我们从 fastcgi 身份验证开始。使用“authentication Cookies”进行搜索，这应该可以让您从答案的一部分开始。

# ruby - 我想让对象相互交互。（红宝石）

> ID：14760561
> 
> 赞同：0
> 
> 时间：2013-02-07T20:39:56.487
> 
> 标签：ruby, libgosu

我正在使用 Gosu 库在 Ruby 中制作游戏 Pong。现在，我正在尝试让球与棋盘互动。

```
class Window < Gosu::Window
    # board size 30 X 298
    def initialize
        super 1440,720,false
        self.caption = "Pong"
        @Ball = Ball.new(self)
        @Ball.warp(720,360)
        @Board1 = Board.new(self,15,360)
        @Board2 = Board.new(self,1425,360) 
    end

    def update 
        @Ball.draw
        @Ball.move
        @Ball.bounceOffBoard(@Board1,@Board2)
       ........ 
```

在最后一行，我尝试将字段@Board1 传递给另一个类，以便@Ball 知道棋盘的坐标，看看它是否应该跳下。但它不断给我带来错误，比如

```
Pong.rb:105: formal argument cannot be a constant
    def bounceOffBoard(Board1,Board2) 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:43:56.617

首先，不要用大写字母命名实例变量：

```
@Ball = Ball.new(self)
@Board1 = Board.new(self,15,360)
@Board2 = Board.new(self,1425,360) 
```

应该：

```
@ball = Ball.new(self)
@board1 = Board.new(self,15,360)
@board2 = Board.new(self,1425,360) 
```

和：

```
def bounceOffBoard(Board1,Board2) 
```

应该：

```
def bounceOffBoard(board1, board2) 
```

# android - flex android 动作脚本原生扩展

> ID：14760564
> 
> 赞同：3
> 
> 时间：2013-02-07T20:40:08.077
> 
> 标签：android, actionscript-3, apache-flex, flex4, air-native-extension

我在 flex 中为 android 设计了一个原生扩展，但这个扩展有问题。我已经打包了ane文件，我已经添加到android flex项目中并且它编译正确但是在运行时我有一个错误，说我的动作脚本扩展类没有找到。

VerifyError：错误 #1014：找不到类 myClass。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:04:39.983

经过长达 1 周的艰苦尝试和失败后，我找到了答案。问题是当动作脚本库项目编译成 .swf 时，会在这个 swf 中打包一个 library.swf 文件。这个 library.swf 需要复制到实际的原生 android 代码 (.jar) 所在的目录中。然后，当您打包 .ane 文件时，此 library.swf 也是打包的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:05:33.440

这个描述很难说。如果可以的话，我做了一些原生扩展——你可以提供一些你的 jar 文件和动作脚本中间类的代码。

您是否阅读过这篇文章和示例，也许它们可以帮助您：

[http://www.adobe.com/devnet/air/native-extensions-for-air.html](http://www.adobe.com/devnet/air/native-extensions-for-air.html)

[http://www.adobe.com/devnet/air/articles/building-ane-ios-android-pt4.html](http://www.adobe.com/devnet/air/articles/building-ane-ios-android-pt4.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:00:17.483

您是否确认 ANE 已与您的应用程序打包在一起？您需要将其添加到您的项目**并**检查包选项。

检查[此](http://labs.distriqt.com/post/815)以获取快速指南：

# emacs - Emacs 按时间自动加载颜色主题

> ID：14760567
> 
> 赞同：13
> 
> 时间：2013-02-07T20:40:11.773
> 
> 标签：emacs, elisp

我可以让 Emacs 自动加载主题吗？还是在自定义时间执行某些命令？说我想要的是`M-x load-theme RET solarized-light`当我早上 9:00 在办公室时，`M-x laod-theme RET solarized-dark`当我回到家并在晚上 8:00 继续使用 emacs 时。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T20:56:35.173

要扩展@Anton Kovalenko 的答案，您可以使用[current-time-string](http://www.gnu.org/software/emacs/manual/html_node/elisp/Time-of-Day.html) elisp 函数获取当前时间，并以小时为单位提取当前时间。

如果你想编写一个完整的实现，你可以这样做（**警告，未调试**）：

```
;; <Color theme initialization code>
(setq current-theme '(color-theme-solarized-light))

(defun synchronize-theme ()
    (setq hour 
        (string-to-number 
            (substring (current-time-string) 11 13)))
    (if (member hour (number-sequence 6 17))
        (setq now '(color-theme-solarized-light))
        (setq now '(color-theme-solarized-dark))) 
    (if (equal now current-theme)
        nil
        (setq current-theme now)
        (eval now) ) ) ;; end of (defun ...

(run-with-timer 0 3600 synchronize-theme) 
```

有关使用的函数的更多信息，请参阅 emacs 手册的以下部分：

*   [一天中的时间](http://www.gnu.org/software/emacs/manual/html_node/elisp/Time-of-Day.html)
*   [字符串](http://www.delorie.com/gnu/docs/elisp-manual-21/elisp_71.html)
*   [字符串转换](http://www.gnu.org/software/emacs/manual/html_node/elisp/String-Conversion.html)
*   [空闲计时器](http://www.gnu.org/software/emacs/manual/html_node/elisp/Idle-Timers.html)
*   [包含](https://stackoverflow.com/q/1408974/789750)
*   [数列](http://www.gnu.org/software/emacs/manual/html_node/elisp/Building-Lists.html#Building-Lists)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-22T19:44:41.163

另一个（非常优雅的）解决方案是*theme-changer*。

给定位置和日/夜颜色主题，该文件提供了一个更改主题功能，可根据白天或黑夜选择适当的主题。它将在日出和日落时继续改变主题。安装：

设置位置：

```
(setq calendar-location-name "Dallas, TX") 
(setq calendar-latitude 32.85)
(setq calendar-longitude -96.85) 
```

指定昼夜主题：

```
(require 'theme-changer)
(change-theme 'tango 'tango-dark) 
```

该项目托管[在 Github 上](https://github.com/hadronzoo/theme-changer)，可以通过 melpa 安装。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T21:07:24.247

你可以使用这段代码来做你想做的事。

```
(defvar install-theme-loading-times nil
  "An association list of time strings and theme names.
The themes will be loaded at the specified time every day.")
(defvar install-theme-timers nil)
(defun install-theme-loading-at-times ()
  "Set up theme loading according to `install-theme-loading-at-times`"
  (interactive)
  (dolist (timer install-theme-timers)
(cancel-timer timer))
  (setq install-theme-timers nil)
  (dolist (time-theme install-theme-loading-times)
(add-to-list 'install-theme-timers
         (run-at-time (car time-theme) (* 60 60 24) 'load-theme (cdr time-theme))))) 
```

只需根据`install-theme-loading-times`需要自定义变量：

```
(setq install-theme-loading-times '(("9:00am" . solarized-light)
                ("8:00pm" . solarized-dark))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T20:47:25.957

您可以从`run-with-timer`功能开始：

```
(run-with-timer SECS REPEAT FUNCTION &rest ARGS)

Perform an action after a delay of SECS seconds.
Repeat the action every REPEAT seconds, if REPEAT is non-nil.
SECS and REPEAT may be integers or floating point numbers.
The action is to call FUNCTION with arguments ARGS.

This function returns a timer object which you can use in `cancel-timer'. 
```

安排一个函数每分钟左右运行一次，它将检查当前时间并`load-theme`在适当的时候调用（不要每分钟切换主题，即使它正在重新加载当前主题）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-01T01:07:28.663

此实现根据您提供的纬度和经度的日出和日落时间更改主题。唯一的依赖项是`solar.el`随 Emacs (IIRC) 一起发布的。

（我认为这里的代码可能会更短。）

```
;; theme changing at sunrises and sunsets according to lat and long
(require 'solar)

(defun today-date-integer (offset)
  "Returns today's date in a list of integers, i.e. month, date, and year, in system time."
  (let* ((date (mapcar
   (lambda (pattern)
     (string-to-number (format-time-string pattern)))
   '("%m" "%d" "%Y"))))
    (setcar
   (nthcdr
    1
    date)
   (+ offset (nth 1 date)))
    date))

(defun current-time-decimal ()
  (let* ((current-min-fraction (/ (string-to-number (format-time-string "%M")) 60.0))
    (current-hour (string-to-number (format-time-string "%H"))))
    (+ current-hour current-min-fraction)))

(defun next-alarm-time (sunrise-time sunset-time)
  (let* ((current-time (current-time-decimal)))
   (cond ((< current-time sunrise-time)
       (- sunrise-time current-time))
    ((and (>= current-time sunrise-time)
          (< current-time sunset-time))
      (- sunset-time current-time))
    ((>= current-time sunset-time)
     (let ((tomorrow-sunrise-time (car (car (solar-sunrise-sunset (today-date-integer 1))))))
       (- (+ 24 tomorrow-sunrise-time) current-time))))))

(defun to-seconds (hour) (* hour 60 60))

(defun change-theme (light-theme dark-theme coor)
  (let* ((_ (setq calendar-latitude (car coor)))
    ( _ (setq calendar-longitude (nth 1 coor)))
    (today-date (today-date-integer 0))
    (sunrise-sunset-list (solar-sunrise-sunset today-date))
    (sunrise-time (car (car sunrise-sunset-list)))
    (sunset-time (car (nth 1 sunrise-sunset-list)))
    (current-time (current-time-decimal))
    (current-theme (if (or (< current-time sunrise-time) (> current-time sunset-time))
             dark-theme
             light-theme))
    (next-alarm-t (next-alarm-time sunrise-time sunset-time)))
    (cancel-function-timers 'change-theme)
    (load-theme current-theme t)
    (run-at-time
     (to-seconds next-alarm-t) nil 'change-theme light-theme dark-theme coor)))

(change-theme 'solarized-gruvbox-light 'solarized-gruvbox-dark '(47.6062 -122.3321)) 
```

# html - 有没有办法从网页中选择音频的输出设备？

> ID：14760578
> 
> 赞同：11
> 
> 时间：2013-02-07T20:40:43.500
> 
> 标签：html, flash, web-applications, audio

我正在构建的 Web 应用程序具有音频通知和视频会议选项，因此用户通常会将扬声器和耳机连接到 PC，我的客户希望音频通知将在主扬声器中播放，并且可以使用耳机进行视频会议。

现在我将所有 html5 用于音频和 webRTC 用于视频会议，我找不到有关如何执行此操作的任何信息。可能有闪光灯但也不是找不到这个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-12-16T10:15:37.153

这个领域的解决方案正在通过使用 WebRTC 出现。[您可以在https://webrtc.github.io/samples/src/content/devices/input-output/](https://webrtc.github.io/samples/src/content/devices/input-output/)看到一个工作解决方案的示例

不过，目前浏览器对此的支持是有限的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-14T01:28:00.573

现在有一个名为**AudioPick**的 HTML5 音频设备重定向器 Chrome 扩展。网站在这里：[https ://rain-fighters.github.io/AudioPick/](https://rain-fighters.github.io/AudioPick/)

这是 GNU 公共许可下的开源，带有[Github 存储库](https://github.com/rain-fighters/AudioPick)。

有一些限制（没有 Flash 源，也找不到某些类型的 HTML5 源），如主页所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-29T07:09:10.250

实际上声音输出仅在 Oslevel 上......您可能需要阅读仍处于实验级别的 chrome.audio API......“提供 chrome.audio API 是为了允许用户获取有关和控制附加的音频设备的信息到系统。此 API 目前仅针对 ChromeOS 实现。"

我认为如果它适用于所有操作系统，这将有所帮助，因此您可以使用此 API 重定向声音......作为此 API 中一些方法的示例，我可以列出：

```
getInfo − chrome.audio.getInfo(function callback) 
```

返回所有音频输出和输入设备

```
setActiveDevices − chrome.audio.setActiveDevices(array of string ids, function callback) 
```

它将活动设备设置为 |ids| 指定的设备

问题是 Chrome.audio API 仅适用于 ChromeOS，声音输出由其他操作系统控制……就是两条平行线……

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-30T00:48:18.303

只需在您的 javascript 代码中执行此操作。

```
 audioElement.setSinkId(deviceId); 
```

# objective-c - MKMapView 缩放用户位置和注释

> ID：14760582
> 
> 赞同：3
> 
> 时间：2013-02-07T20:40:53.520
> 
> 标签：objective-c, xcode

我希望我的 MKMapView 尽可能靠近缩放“用户位置”和注释。地图已显示两者，但已缩小到整个国家。我怎样才能做到这一点？

而且我不知道为什么 Annotation 和 Pin 没有动画。

我的代码：

```
//Coords User
CLLocationCoordinate2D user_location;
user_location.latitude = mapView.userLocation.location.coordinate.latitude;
user_location.longitude = mapView.userLocation.location.coordinate.longitude;
//Coords Annotation
CLLocationCoordinate2D club_location;
club_location.latitude = [self.clubInfo.latitude doubleValue];
club_location.longitude = [self.clubInfo.longitude doubleValue];

MKMapPoint userPoint = MKMapPointForCoordinate(user_location);
MKMapPoint annotationPoint = MKMapPointForCoordinate(club_location);

MKMapRect userRect = MKMapRectMake(userPoint.x, userPoint.y, 0, 0);
MKMapRect annotationRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);

MKMapRect unionRect = MKMapRectUnion(userRect, annotationRect);

MKMapRect unionRectThatFits = [mapView mapRectThatFits:unionRect];
[mapView setVisibleMapRect:unionRectThatFits animated:YES];

// Add an annotation
MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];
annotation.coordinate = club_location;
annotation.title = self.clubInfo.clubName;
annotation.subtitle = @"Pin!";
[mapView addAnnotation:annotation]; // This was missing
[mapView selectAnnotation:annotation animated:YES]; 
```

![地图视图](../Images/b2169fe3413782b7d7144a1f46f7403e.png)

日志：

```
userRect: {{134217728.0, 134217728.0}, {0.0, 0.0}}
annotationRect: {{99775488.0, 152579328.0}, {0.0, 0.0}}

unionRect: {{99775488.0, 134217728.0}, {34442240.0, 18361600.0}}

mapView.visibleMapRect: {{96025087.6, 116070015.1}, {41943040.7, 54657025.8}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T21:33:31.883

如果我理解得很好，您希望这两个注释以最大可能的缩放可见。我发现这个解决方案**不需要任何计算**。

```
// You have coordinates
CLLocationCoordinate2D user = ...;
CLLocationCoordinate2D annotation = ...;
// Make map points
MKMapPoint userPoint = MKMapPointForCoordinate(user);
MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation);
// Make map rects with 0 size
MKMapRect userRect = MKMapRectMake(userPoint.x, userPoint.y, 0, 0);
MKMapRect annotationRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
// Make union of those two rects
MKMapRect unionRect = MKMapRectUnion(userRect, annotationRect);
// You have the smallest possible rect containing both locations
MKMapRect unionRectThatFits = [mapView mapRectThatFits:unionRect];
[mapView setVisibleMapRect:unionRectThatFits animated:YES]; 
```

*CoreLocation 和 MapKit 结构是地狱。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-26T14:45:14.367

对于以后来这里的任何人：执行此操作的最短方法是（iOS7+）：

假设您有一个 @property`MKMapView *mapView`和一个`MKPointAnnotation *theAnnotation`, 调用：

```
[self.mapView showAnnotations:@[theAnnotation, self.mapView.userLocation] animated:NO]; 
```

现在，如果调用过早（即`self.mapView.userLocation`尚未设置时），这可能会导致一些问题。如果是这样，您可以致电`viewWillAppear`：

```
[self.mapView.userLocation addObserver:self forKeyPath:@"location" options:0 context:NULL]; 
```

然后，实现：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqualToString:@"location"]) {
        [self.mapView showAnnotations:@[theAnnotation, self.mapView.userLocation] animated:NO];
    }
} 
```

这样你就确定它已经设置好了。不要忘记在 viewWillDisappear 移除观察者：

```
[self.mapView.userLocation removeObserver:self forKeyPath:@"location"]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T21:00:10.300

使用这 4 个类 - 它就像一个魅力！

```
//MapViewController.h file

#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
@interface MapViewController : UIViewController <CLLocationManagerDelegate>  {
    IBOutlet UIButton *buttonBack;
    IBOutlet MKMapView *mapView;
    IBOutlet UILabel *labelTitle;
    NSString *lon,*lat,*nickName;
    BOOL isFirstLaunch;
}
@property(nonatomic,retain) NSString *lon,*lat,*nickName;
@property(nonatomic,retain) IBOutlet UIButton *buttonBack;
@property(nonatomic,retain) IBOutlet UILabel *labelTitle;
@property(nonatomic,retain) IBOutlet MKMapView *mapView;
-(IBAction)buttonBackAction:(UIButton *)_btn;
-(void)zoomToFitMapAnnotations;
@end 
```

// // MapViewController.m //

```
#import "MapViewController.h"
#import "Annotation.h"

@implementation MapViewController
@synthesize buttonBack,mapView,labelTitle;
@synthesize lon,lat,nickName;

// The designated initializer.  Override if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.
/*
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
 self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
 if (self) {
 // Custom initialization.
 }
 return self;
 }
 */
-(IBAction)buttonBackAction:(UIButton *)_btn{
    [self.navigationController popViewControllerAnimated:1];
}

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    CLLocationManager* locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [locationManager startUpdatingLocation];
    NSLog(@"MapViewController");
    labelTitle.text = @"anscacorona.blogspot.in"
    CLLocationCoordinate2D location;
    location.latitude = [self.lat floatValue];
    location.longitude = [self.lon floatValue];

    Annotation *annotation = [[Annotation alloc] init];
    annotation.theCoordinate = location;
    annotation.theTitle = [NSString stringWithFormat:@"%@",labelTitle.text];

    [mapView addAnnotation:annotation];
    [annotation release];
    mapView.showsUserLocation = 1;

    [self zoomToFitMapAnnotations];
    [super viewDidLoad];
}

// Shows the location of both users. called when the device location changes to move the map accordinly. necessary ONLY once when the window is opened. afterwards the user can move the map as he choises. 
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    if (isFirstLaunch) {
        CLLocationCoordinate2D topLeftCoord;
        CLLocationCoordinate2D bottomRightCoord;

        topLeftCoord.longitude = fmin([self.lon floatValue], newLocation.coordinate.longitude);
        topLeftCoord.latitude = fmax([self.lat floatValue], newLocation.coordinate.latitude);

        bottomRightCoord.longitude = fmax([self.lon floatValue], newLocation.coordinate.longitude);
        bottomRightCoord.latitude = fmin([self.lat floatValue], newLocation.coordinate.latitude);

        MKCoordinateRegion region;
        region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
        region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
        region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.5; // Add a little extra space on the sides
        region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.5;  // Add a little extra space on the sides

        region = [mapView regionThatFits:region];
        [mapView setRegion:region animated:YES];
        isFirstLaunch = NO;
    }

}

-(void)zoomToFitMapAnnotations
{
    if([mapView.annotations count] == 0)
        return;

    CLLocationCoordinate2D topLeftCoord;
    CLLocationCoordinate2D bottomRightCoord;
    topLeftCoord.longitude = fmin(mapView.userLocation.location.coordinate.longitude, [self.lon floatValue]);
    topLeftCoord.latitude = fmax(mapView.userLocation.location.coordinate.latitude, [self.lat floatValue]);

    bottomRightCoord.longitude = fmax(mapView.userLocation.location.coordinate.longitude, [self.lon floatValue]);
    bottomRightCoord.latitude = fmin(mapView.userLocation.location.coordinate.latitude, [self.lat floatValue]);

    MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };

    CLLocationCoordinate2D userCoord = {[self.lat floatValue],[self.lon floatValue]};
    region.center = userCoord;
    region.span.latitudeDelta = 0.05f;//fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1; // Add a little extra space on the sides
    region.span.longitudeDelta = 0.05f;//fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;  // Add a little extra space on the sides

    [mapView setRegion:region animated:YES];
    [mapView regionThatFits:region];
}
/*
 // Override to allow orientations other than the default portrait orientation.
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations.
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }
 */

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc. that aren't in use.
}
#pragma mark - View Lifecycle

-(void)viewWillAppear:(BOOL)animated{
    isFirstLaunch=YES;
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {

    [super dealloc];
}

@end 
```

//注释类-Annotation.h

```
#import <MapKit/MapKit.h>

@interface Annotation : NSObject  <MKAnnotation>{
    CLLocationCoordinate2D theCoordinate;
    NSString *theTitle;
    NSString *restId;
    NSString *theSubtitle;
}
@property(nonatomic,retain) NSString *restId;
@property(nonatomic,retain) NSString *theTitle;
@property(nonatomic,retain) NSString *theSubtitle;
@property CLLocationCoordinate2D theCoordinate;
@end 
```

//注解.m

```
#import "Annotation.h"

@implementation Annotation
@synthesize theCoordinate,theTitle,theSubtitle,restId;
- (CLLocationCoordinate2D)coordinate;
{
    return theCoordinate; 
}

// required if you set the MKPinAnnotationView's "canShowCallout" property to YES
- (NSString *)title
{
    return theTitle;
}

// optional
- (NSString *)subtitle
{
    return theSubtitle;
}

- (void)dealloc
{
    [super dealloc];
}

@end 
```

# java - 如何返回从 for 循环产生的值

> ID：14760584
> 
> 赞同：-1
> 
> 时间：2013-02-07T20:40:54.987
> 
> 标签：java

我有一个函数，它接受一些值，做一些数学运算，然后在最后产生一组双精度类型值。这是一个函数，我返回了我的值，但它只返回 1 个值，而不是在 for 循环中计算的所有值。我该怎么做才能让我的函数从 for 循环中返回所有值？如果我将值存储在数组中，我将如何访问它们并在以后使用它们？这些 for 循环值将绘制在图表上，因此我需要超过 1 个值来绘制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:43:30.893

您可以在循环之外实例化您的数组，该数组可以在循环迭代时填充

```
List<Double> plotPoints = new ArrayList<Double>;
for(...){
    plotPoints.add(...);
}
return plotPoints; 
```

由于您正在处理图表，因此您可能更喜欢使用 Map 以便您可以将 x 轴（键）与 y 轴（值）对齐

# java - 如何在java中返回方法的结果？

> ID：14760586
> 
> 赞同：0
> 
> 时间：2013-02-07T20:41:01.493
> 
> 标签：java, return

这是我关于多个 catch 块[如何处理返回对象和处理错误的问题的后续内容](https://stackoverflow.com/questions/14753994/how-to-deal-with-returning-an-object-and-handling-errors/14754156#14754156)

我更新的代码如下，但是我收到一个错误，即我的 draw() 方法必须返回一个 int，有没有办法让编译器认识到 endOfDeck() 将返回一个 int，从而满足返回要求？（参见“返回 endOfDeck()）

有什么更聪明的方法可以做到这一点？

```
import java.util.ArrayList;
import java.util.ListIterator;
/**
 * @author L
 *
*/
public abstract class Deck 
{

private ArrayList<Card> cards;
private ListIterator<Card> deckPosition = cards.listIterator();
private Card lastDrawn;
/**
 * 
 */
public Deck() 
{   
}

public int draw()
{

    try
    {
        if(deckPosition.hasNext())
        {
            lastDrawn = deckPosition.next();
            return 1;
        }
        else if(cards.isEmpty())
        {
            throw new EmptyDeckException();
        }
        else
        {
            throw new EndOfDeckException();
        }
    }

    catch(EmptyDeckException e)
    {
        emptyDeck();
        return 0;
    }
    catch(EndOfDeckException e)
    {
        return endOfDeck();

    }
    catch(Exception e)
    {
        System.out.println("Exception when drawing a card, check try/catch block in draw() method of Card");
        e.printStackTrace();
    }

}

public abstract int endOfDeck();
public abstract void emptyDeck();

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T20:42:27.347

您的最后一个`catch`块没有任何返回语句：-

```
catch(Exception e)
    {
        System.out.println("Exception when drawing a card, check try/catch block in draw() method of Card");
        e.printStackTrace();
    } 
```

因此，如果执行该 catch 块，您的方法将不会返回任何值。可能您可以返回任何表示异常的整数，或者将异常包装在 a 中`RuntimeException`并重新抛出它。

* * *

但是，您的代码似乎有些问题。您不必要地抛出异常。无论您在`catch`块中做什么，都可以直接在`if-else`块中执行。

因此，您可以将代码修改为： -

```
 try {
        if(deckPosition.hasNext())
        {
            lastDrawn = deckPosition.next();
            return 1;
        }
        else if(cards.isEmpty())
        {
            emptyDeck();
            return 0;
        }
        else
        {
            // throw new EndOfDeckException();  // Don't throw it
            return endOfDeck();
        }

    } catch(Exception e) {
        /** Also, if possible, replace this catch block with the one catching
            more specific exception than all the `Exceptions` **/
        System.out.println("Exception when drawing a card, check try/catch block in draw() method of Card");
        throw new RuntimeException("Exception drawing a card");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:43:08.373

您的底部`catch`必须返回一个`int`以满足所有代码路径。

```
catch(Exception e)
    {
        System.out.println("Exception when drawing a card, check try/catch block in draw() method of Card");
        e.printStackTrace();
        // Return needs to be here.
    } 
```

或者，您需要在方法底部添加默认返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:45:36.867

当一个方法被声明为返回某些东西时，您必须确保通过该方法的*每条*执行路径都会导致（未捕获的）异常传播到调用者或返回一个值。

您的陈述`return endOfDeck()`非常好，但是您的代码路径仍然没有返回：

```
catch(Exception e)
    {
        System.out.println("Exception when drawing a card, check try/catch block in draw() method of Card");
        e.printStackTrace();
    } 
```

如果发生这种情况，则说明编译器可以返回。

# c - NOP 雪橇如何工作？

> ID：14760587
> 
> 赞同：69
> 
> 时间：2013-02-07T20:41:05.060
> 
> 标签：c, assembly, stack, buffer-overflow, nop

我找不到一个很好的来源来回答这个问题。我知道 nop sled 是一种用于在缓冲区溢出攻击中规避堆栈随机化的技术，但我无法理解它是如何工作的。

什么是说明此方法的简单示例？

像 128 字节 nop sled 这样的术语是什么意思？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-02-07T20:47:50.730

一些攻击包括使程序跳转到特定地址并从那里继续运行。注入的代码必须事先以某种方式加载到该确切位置。

堆栈随机化和其他运行时差异可能使程序跳转的地址无法预测，因此攻击者将 NOP sled 放置在大范围的内存中。如果程序跳转到 sled 的任何位置，它将运行所有剩余的 NOP，什么都不做，然后将运行有效负载代码，就在 sled 旁边。

攻击者使用 NOP sled 的原因是为了使目标地址更大：代码可以跳转到 sled 中的任何位置，而不是恰好在注入代码的开头。

一个 128 字节的 NOP sled 只是一组 128 字节宽的 NOP 指令。

注意＃1：NOP（无操作）是大多数（全部？）架构中可用的指令，除了占用内存和一些运行时之外什么都不做。

注意#2：在具有可变长度指令的体系结构中，NOP 指令通常只有一个字节的长度，因此它可以用作方便的指令填充。不幸的是，这也使得制作 NOP 雪橇变得容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-03T20:33:28.893

补充 rodrigo 的解释 - 即使使用 NOP 雪橇，也必须提前预测内存中缓冲区的大致位置。一种近似内存位置的技术是使用附近的堆栈位置作为参考框架。通过从该位置减去偏移量，可以获得任何变量的相对地址。

旁注：在 x86 架构上，NOP 指令等同于十六进制字节 0x90，因此完整的漏洞利用缓冲区可能如下所示：

> | NOP 雪橇 | 外壳代码 | 重复退货地址|

看起来好像 EIP 寄存器指向在 NOP sled 中找到的任何地址，它会在执行每条 NOP 指令时递增，一次一条，直到它最终到达 shellcode

# asp.net-mvc-4 - 多个RequiredFieldValidator 崩溃页面

> ID：14760588
> 
> 赞同：4
> 
> 时间：2013-02-07T20:41:09.257
> 
> 标签：asp.net-mvc-4, webforms, requiredfieldvalidator

我有一个非常奇怪的问题。我最近将 MVC4 添加到一个旧的 Web 窗体项目中。我通过创建一个新项目并将旧文件添加到新项目中来做到这一点（而不是复制新 MVC 文件的相反方法）。当我这样做时，我的一个 Web 表单页面停止工作 - 当我尝试访问它时，它重定向到 HTTP 错误 404.0 - 未找到。

该文件在那里，而且我还有其他 Web 窗体 (.aspx) 页面可以毫无问题地加载。为了查明问题，我创建了一个同名的 Web 表单页面来替换它，然后加载空白页面。我开始一次一行地将代码添加到新页面，直到发现问题为止。

我终于发现导致问题的原因是页面上有多个 RequiredFieldValidator 标记。知道为什么会发生这种情况，或者我能做些什么来解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:56:31.807

将组分配给验证器。将它们放在不同的组中，不要将它们放在同一组中，确保您没有控制权分配相同，因为在编译期间相同的必填字段验证器可能会出现并发问题并使页面崩溃。将它们放在不同的组中可以确保更多。如果您仍然遇到同样的问题，那么也试试这个 打开 IIS 管理器 右键单击​​服务器名称 选择属性 单击 MIME 类型按钮 单击新扩展名是 .pdf MIME 类型是应用程序/pdf

# excel - Excel - 基于 ID 的工作表值查找

> ID：14760589
> 
> 赞同：-2
> 
> 时间：2013-02-07T20:41:18.687
> 
> 标签：excel, excel-formula

我有两个工作表。第一个列出了我的客户：

```
A          |B            |C
CustomerID |CustomerName |DateLastProject
MC001      |Ron Bolles   |
MC002      |Neal Pearl   |
MC003      |Meg Black    | 
```

在我的第二张工作表上，我列出了为客户完成的项目（附日期）：

```
A          |B            |C
CustomerID |ProjectID    |Date
MC001      |MP112        |01/03/2013
MC002      |MP113        |01/08/2013
MC003      |MP114        |01/08/2013
MC001      |MP115        |01/15/2013
MC003      |MP129        |02/04/2013 
```

我需要查找每个客户的最后一个项目日期并将其显示在客户工作表的 C 列中。所以客户会出现：

```
A          |B            |C
CustomerID |CustomerName |DateLastProject
MC001      |Ron Bolles   |01/15/2013
MC002      |Neal Pearl   |01/08/2013
MC003      |Meg Black    |02/04/2013 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:31:48.127

您需要为此使用数组公式。

![在此处输入图像描述](../Images/e50b220cb53aad7cb945928708dc0fc3.png)

公式为： **=MAX(IF(A2=F2:F6;H2:H6;""))**

但是您需要将其应用为数组公式，因此当您输入上述公式时：按下回车键时按 ctrl + shift。公式将显示为： **{=MAX(IF(A2=F2:F6;H2:H6;""))}**

> 如果你有两张纸，公式将是

```
=MAX(IF(Sheet1!A2=Sheet2!A2:A6;Sheet2!C2:C6;"")) 
```

（记得输入 F2 并按住 ctrl + shift 然后按回车键，它将是一个数组公式：**{=MAX(IF(Sheet1!A2=Sheet2!A2:A6;Sheet2!C2:C6;"") )}**

# vms - dcl 验证 DCL 中的特定行

> ID：14760592
> 
> 赞同：0
> 
> 时间：2013-02-07T20:41:21.680
> 
> 标签：vms, dcl

使用 DCL，我有一个 3 行的 .txt 文件

```
Line 1 test.
Line 2 test.
Line 3 test. 
```

我正在努力确保每个都包含预期的内容。我目前正在使用 f@extract 函数，它将为我提供第 1 行的输出，但我无法弄清楚如何验证第 2 行和第 3 行。我可以使用什么函数来确保第 2 行和第 3 行正确？

```
$ OPEN read_test test.dat
$ READ/END_OF_FILE=ender read_test cc
$ line1 = f$extract(0,15,cc)
$ if line1.nes."Line 1 test."
$ then
$    WRITE SYS$OUTPUT "FALSE"
$ endif
$ line2 = f$extract(??,??,cc)  ! f$extract not possible for multiple lines?
$ if line2.nes."Line 2 test."
$ then
$    WRITE SYS$OUTPUT "FALSE"
$ endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:46:31.637

对于恰好 3 行，您可能只想进行 3 次读取和 3 次比较...

```
$ READ READ/END_OF_FILE=ender read_test cc
$ if f$extract(0,15,cc).nes."Line 1 test." ...
$ READ READ/END_OF_FILE=ender read_test cc
$ if f$extract(0,15,cc).nes."Line 2 test." ...
$ READ READ/END_OF_FILE=ender read_test cc
$ if f$extract(0,15,cc).nes."Line 3 test." ... 
```

再多一点，你想像回答的那样循环。要跟进 Chris 的方法，您可能需要首先准备一个值数组，然后只要有值就循环读取和比较。未经测试：

```
$ line_1 = "Line 1 test."
$ line_2 = "Line 2 test."
$ line_3 = "Line 3 test."
$ line_num = 1
$ReadNext:
$   READ/END_OF_FILE=ender read_test cc
$   if line_'line_num'.nes.cc then WRITE SYS$OUTPUT "Line ", line_num, " FALSE"
$   line_num = line_num + 1
$   if f$type(line_'line_num').NES."" then GOTO ReadNext
$ WRITE SYS$OUTPUT "All provided lines checked out TRUE"
$ GOTO end
$Ender:
$ WRITE SYS$OUTPUT "Ran out of lines too soon. FALSE"
$end:
$ close Read_Test 
```

嗯，海因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:29:44.693

试试这个变体（未经测试，所以可能需要一点调试）。利用符号替换来跟踪您正在执行的行。

```
$ OPEN read_test test.dat
$ line_num = 1
$ ReadNext:
$   READ/END_OF_FILE=ender read_test cc
$   line'line_num' = f$extract(0,15,cc)
$   if line'line_num'.nes."Line ''line_num' test."
$   then
$      WRITE SYS$OUTPUT "FALSE"
$   endif
$   goto ReadNext
$ !
$ Ender:
$ close Read_Test
$ write sys$output "line1: "+line1
$ write sys$output "line2: "+line2
$ write sys$output "line3: "+line3
$ exit 
```

# vba - 如何更改命名范围的 RefersTo？

> ID：14760593
> 
> 赞同：1
> 
> 时间：2013-02-07T20:41:33.813
> 
> 标签：vba, excel

我有一个类`ValidationChanger`，它的方法`changeNamedRangeAddress`应该更改`RefersTo`命名范围的地址。但是，我的代码意外地将新地址用双引号括起来。

这里的类定义`ValidationChanger`：

```
'ValidationChanger

Sub changeNamedRangeAddress(bk As Workbook, rangeName As String, newAddress As String)
 bk.Names(rangeName).RefersTo = newAddress
End Sub 
```

我在一个名为 的范围内对其进行测试，该范围`TestRange`指的是 sheet `Instructions`:中的地址`Instructions!$A$133:$A$138`。我的测试应该将地址更改为`Instructions!$A$133:$A$139`以下内容：

```
Sub testValidationChanger()

Dim vc As New ValidationChanger
Dim bk As Workbook

Set bk = Workbooks("test.xlsm")
Debug.Print bk.Names("TestRange").RefersTo
vc.changeNamedRangeAddress bk, "TestRange", "Instructions!$A$133:$A$139"
Debug.Print bk.Names("TestRange").RefersTo

End Sub 
```

输出是：

```
=Instructions!$A$133:$A$138
="Instructions!$A$133:$A$139" 
```

知道为什么新地址用双引号括起来（这使它用作文本字符串而不是地址）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:01:36.557

将新范围作为范围对象传递，而不是作为字符串：

```
vc.changeNamedRangeAddress bk, "TestRange",[Instructions!$A$133:$A$139] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T08:27:36.803

你得到一个文本字符串的原因是你没有在文本字符串前面加上一个 = 符号（这样 Excel 就会知道它应该是一个公式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-06T20:50:10.910

如果您使用命名范围而不是地址，那么您可以更改该命名范围以适应您想要的任何内容。

```
'this line creates the name that you can use in formulas in 
'much the same way as "Instructions!$A$133:$A$139"
thisworkbook.Names.Add Name:="examplerange", RefersTo:=Range("A1:A5")

'this line changes what it's pointing to
thisworkbook.Names("exampleRange").RefersTo = Range("A1:A10") 
```

# vb.net - 使用 vb.net 从多个表单读取、写入数据的替代方式

> ID：14760599
> 
> 赞同：0
> 
> 时间：2013-02-07T20:41:44.097
> 
> 标签：vb.net

我正在处理一份工作申请。我们使用 excel 文件来创建报告。我对编码很生疏，真的没有遇到过这么大的要求。该应用程序的工作方式是有标准工具栏。当用户打开应用程序时，他会看到一个空白表单。他们必须首先创建一个新文件并将其保存到他们选择的文件夹中。我使用了流读取器/写入器，但问题是用户必须填写大量数据，所以我的代码很糟糕而且像怪物一样，我想知道有没有更简单的方法？

```
 ToolStripLabel1.Text = FileDataStorage.OpenFileTextBox1.Text
     If ToolStripLabel1.Text = ("C:\Temp\New QCA.qca") Then
        MsgBox("Must Save New file first ACCESS DENIED!")
        End If
     Dim FILE_NAME As String = FileDataStorage.OpenFileTextBox1.Text
    Try
        If System.IO.File.Exists(FILE_NAME) = True Then

            Dim objWriter As New System.IO.StreamWriter(FILE_NAME)

            objWriter.WriteLine(General_Data.GTextBox1.Text)
            objWriter.WriteLine(General_Data.GTextBox2.Text)
            objWriter.WriteLine(General_Data.GTextBox3.Text)
            objWriter.WriteLine(General_Data.GTextBox4.Text)
            objWriter.WriteLine(General_Data.GTextBox5.Text)
            objWriter.WriteLine(General_Data.GTextBox6.Text)
            objWriter.WriteLine(General_Data.GTextBox7.Text)
            objWriter.WriteLine(General_Data.GTextBox8.Text)
            objWriter.WriteLine(General_Data.GTextBox9.Text)
            objWriter.WriteLine(General_Data.GTextBox10.Text)
            objWriter.WriteLine(General_Data.GTextBox11.Text)
            objWriter.WriteLine(Inventory.ComboBox1.Text)
            objWriter.WriteLine(Inventory.ComboBox2.Text)
            objWriter.WriteLine(Inventory.ComboBox3.Text)
            objWriter.WriteLine(Inventory.ComboBox4.Text)
            objWriter.WriteLine(Inventory.ComboBox5.Text)
            objWriter.WriteLine(Inventory.ComboBox6.Text)
            objWriter.WriteLine(Inventory.ComboBox7.Text)
            objWriter.WriteLine(Inventory.ComboBox8.Text)
            objWriter.WriteLine(Inventory.ComboBox9.Text)
            objWriter.WriteLine(Inventory.ComboBox10.Text)
            objWriter.WriteLine(Inventory.ComboBox11.Text)
            objWriter.WriteLine(Inventory.ComboBox12.Text)
            objWriter.WriteLine(Inventory.ComboBox13.Text)
            objWriter.WriteLine(Inventory.ComboBox14.Text)
            objWriter.WriteLine(Inventory.ComboBox15.Text)
            objWriter.WriteLine(Inventory.ComboBox16.Text)
            objWriter.WriteLine(Inventory.ComboBox17.Text)
            objWriter.WriteLine(Inventory.ComboBox18.Text)
            objWriter.WriteLine(Inventory.ComboBox19.Text)
            objWriter.WriteLine(Inventory.ComboBox20.Text)
            objWriter.WriteLine(Inventory.TextBox1.Text)
            objWriter.WriteLine(Inventory.TextBox2.Text)
            objWriter.WriteLine(Inventory.TextBox3.Text)
            objWriter.WriteLine(Inventory.TextBox4.Text)
            objWriter.WriteLine(Inventory.TextBox5.Text)
            objWriter.WriteLine(Inventory.TextBox6.Text)
            objWriter.WriteLine(Inventory.TextBox7.Text)
            objWriter.WriteLine(Inventory.TextBox8.Text)
            objWriter.WriteLine(Inventory.TextBox9.Text)
            objWriter.WriteLine(Inventory.TextBox10.Text)
            objWriter.WriteLine(Inventory.TextBox11.Text)
            objWriter.WriteLine(Inventory.TextBox12.Text)
            objWriter.WriteLine(Inventory.TextBox13.Text)
            objWriter.WriteLine(Inventory.TextBox14.Text)
            objWriter.WriteLine(Inventory.TextBox15.Text)
            objWriter.WriteLine(Inventory.TextBox16.Text)
            objWriter.WriteLine(Inventory.TextBox17.Text)
            objWriter.WriteLine(Inventory.TextBox18.Text)
            objWriter.WriteLine(Inventory.TextBox19.Text)
            objWriter.WriteLine(Inventory.TextBox20.Text)
            objWriter.WriteLine(Inventory.TextBox21.Text)
            objWriter.WriteLine(Inventory.TextBox22.Text)
            objWriter.WriteLine(Inventory.TextBox23.Text)
            objWriter.WriteLine(Inventory.TextBox24.Text)
            objWriter.WriteLine(Inventory.TextBox25.Text)
            objWriter.WriteLine(Inventory.TextBox26.Text)
            objWriter.WriteLine(Inventory.TextBox27.Text)
            objWriter.WriteLine(Inventory.TextBox28.Text)
            objWriter.WriteLine(Inventory.TextBox29.Text)
            objWriter.WriteLine(Inventory.TextBox30.Text)
            objWriter.WriteLine(Inventory.TextBox31.Text)
            objWriter.WriteLine(Inventory.TextBox32.Text)
            objWriter.WriteLine(Inventory.TextBox33.Text)
            objWriter.WriteLine(Inventory.TextBox34.Text)
            objWriter.WriteLine(Inventory.TextBox35.Text)
            objWriter.WriteLine(Inventory.TextBox36.Text)
            objWriter.WriteLine(Inventory.TextBox37.Text)
            objWriter.WriteLine(Inventory.TextBox38.Text)
            objWriter.WriteLine(Inventory.TextBox39.Text)
            objWriter.WriteLine(Inventory.TextBox40.Text)
            objWriter.WriteLine(Inventory.TextBox41.Text)
            objWriter.WriteLine(Inventory.TextBox42.Text)
            objWriter.WriteLine(Inventory.TextBox43.Text)
            objWriter.WriteLine(Inventory.TextBox44.Text)
            objWriter.WriteLine(Inventory.TextBox45.Text)
            objWriter.WriteLine(Inventory.TextBox46.Text)
            objWriter.WriteLine(Inventory.TextBox47.Text)
            objWriter.WriteLine(Inventory.TextBox48.Text)
            objWriter.WriteLine(Inventory.TextBox49.Text)
            objWriter.WriteLine(Inventory.TextBox50.Text)
            objWriter.WriteLine(Inventory.TextBox51.Text)
            objWriter.WriteLine(Inventory.TextBox52.Text)
            objWriter.WriteLine(Inventory.TextBox53.Text)
            objWriter.WriteLine(Inventory.TextBox54.Text)
            objWriter.WriteLine(Inventory.TextBox55.Text)
            objWriter.WriteLine(Inventory.TextBox56.Text)
            objWriter.WriteLine(Inventory.TextBox57.Text)
            objWriter.WriteLine(Inventory.TextBox58.Text)
            objWriter.WriteLine(Inventory.TextBox59.Text)
            objWriter.WriteLine(Inventory.TextBox60.Text)
            objWriter.WriteLine(Inventory.TextBox61.Text)
            objWriter.WriteLine(Inventory.TextBox62.Text)
            objWriter.WriteLine(Inventory.TextBox63.Text)
            objWriter.WriteLine(Inventory.TextBox64.Text)
            objWriter.WriteLine(Inventory.TextBox65.Text)
            objWriter.WriteLine(Inventory.TextBox66.Text)
            objWriter.WriteLine(Inventory.TextBox67.Text)
            objWriter.WriteLine(Inventory.TextBox68.Text)
            objWriter.WriteLine(Inventory.TextBox69.Text)
            objWriter.WriteLine(Inventory.TextBox70.Text)
            objWriter.WriteLine(Inventory.TextBox71.Text)
            objWriter.WriteLine(Inventory.TextBox72.Text)
            objWriter.WriteLine(Inventory.TextBox73.Text)
            objWriter.WriteLine(Inventory.TextBox74.Text)
            objWriter.WriteLine(Inventory.TextBox75.Text)
            objWriter.WriteLine(Inventory.TextBox76.Text)
            objWriter.WriteLine(Inventory.TextBox77.Text)
            objWriter.WriteLine(Inventory.TextBox78.Text)
            objWriter.WriteLine(Inventory.TextBox79.Text)
            objWriter.WriteLine(Inventory.TextBox80.Text)
            objWriter.WriteLine(Water_QC.ComboBox1.Text)
            objWriter.WriteLine(Water_QC.TextBox1.Text)
            objWriter.WriteLine(Water_QC.TextBox2.Text)
            objWriter.WriteLine(Water_QC.TextBox3.Text)
            objWriter.WriteLine(Water_QC.TextBox4.Text)
            objWriter.WriteLine(Water_QC.TextBox5.Text)
            objWriter.WriteLine(Water_QC.ComboBox2.Text)
            objWriter.WriteLine(Water_QC.TextBox6.Text)
            objWriter.WriteLine(Water_QC.TextBox7.Text)
            objWriter.WriteLine(Water_QC.TextBox8.Text)
            objWriter.WriteLine(Water_QC.TextBox9.Text)
            objWriter.WriteLine(Water_QC.TextBox10.Text)
            objWriter.WriteLine(Water_QC.TextBox11.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox1.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox2.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox3.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox4.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox5.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox6.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox7.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox8.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox9.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox10.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox11.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox12.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox13.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox14.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox15.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox16.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox17.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox18.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox19.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox20.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox21.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox22.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox23.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox24.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox25.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox26.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox27.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox28.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox29.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox30.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox31.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox32.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox33.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox34.Text)
            objWriter.WriteLine(Base_Gel_QC.TextBox35.Text)
            objWriter.WriteLine(Acid_QC.TextBox1.Text)
            objWriter.WriteLine(Acid_QC.TextBox2.Text)
            objWriter.WriteLine(Acid_QC.TextBox3.Text)
            objWriter.WriteLine(Acid_QC.TextBox4.Text)
            objWriter.WriteLine(Acid_QC.TextBox5.Text)
            objWriter.WriteLine(Acid_QC.TextBox6.Text)
            objWriter.WriteLine(Acid_QC.TextBox7.Text)
            objWriter.WriteLine(Acid_QC.TextBox8.Text)
            objWriter.WriteLine(Acid_QC.TextBox9.Text)
            objWriter.WriteLine(Acid_QC.TextBox10.Text)
            objWriter.WriteLine(Acid_QC.TextBox11.Text)
            objWriter.WriteLine(Acid_QC.TextBox12.Text)
            objWriter.WriteLine(Acid_QC.TextBox13.Text)
            objWriter.WriteLine(Acid_QC.TextBox14.Text)
            objWriter.WriteLine(Acid_QC.TextBox15.Text)
            objWriter.WriteLine(Acid_QC.TextBox16.Text)
            objWriter.WriteLine(Acid_QC.TextBox17.Text)
            objWriter.WriteLine(Acid_QC.TextBox18.Text)
            objWriter.WriteLine(Acid_QC.TextBox19.Text)
            objWriter.WriteLine(Acid_QC.TextBox20.Text)
            objWriter.WriteLine(Acid_QC.TextBox21.Text)
            objWriter.WriteLine(Acid_QC.TextBox22.Text)
            objWriter.WriteLine(Acid_QC.TextBox23.Text)
            objWriter.WriteLine(Acid_QC.TextBox24.Text)
            objWriter.WriteLine(Acid_QC.TextBox25.Text)
            objWriter.WriteLine(Acid_QC.TextBox26.Text)
            objWriter.WriteLine(Acid_QC.TextBox27.Text)
            objWriter.WriteLine(Acid_QC.TextBox28.Text)
            objWriter.WriteLine(Acid_QC.TextBox29.Text)
            objWriter.WriteLine(Acid_QC.TextBox30.Text)
            objWriter.WriteLine(Acid_QC.TextBox31.Text)
            objWriter.WriteLine(Acid_QC.TextBox32.Text)
            objWriter.WriteLine(Acid_QC.TextBox33.Text)
            objWriter.WriteLine(Acid_QC.TextBox34.Text)
            objWriter.WriteLine(Acid_QC.TextBox35.Text)
            objWriter.WriteLine(Acid_QC.TextBox36.Text)
            objWriter.WriteLine(Acid_QC.TextBox37.Text)
            objWriter.WriteLine(Acid_QC.TextBox38.Text)
            objWriter.WriteLine(Acid_QC.TextBox39.Text)
            objWriter.WriteLine(Acid_QC.TextBox40.Text)
            objWriter.WriteLine(Acid_QC.TextBox41.Text)
            objWriter.WriteLine(Acid_QC.TextBox42.Text)
            objWriter.WriteLine(Acid_QC.TextBox43.Text)
            objWriter.WriteLine(Acid_QC.TextBox44.Text)
            objWriter.WriteLine(Acid_QC.TextBox45.Text)
            objWriter.WriteLine(Acid_QC.TextBox46.Text)
            objWriter.WriteLine(Acid_QC.TextBox47.Text)
            objWriter.WriteLine(Acid_QC.TextBox48.Text)
            objWriter.WriteLine(Acid_QC.TextBox49.Text)
            objWriter.WriteLine(Acid_QC.TextBox50.Text)
            objWriter.WriteLine(Acid_QC.TextBox51.Text)
            objWriter.WriteLine(Acid_QC.TextBox52.Text)
            objWriter.WriteLine(Acid_QC.TextBox53.Text)
            objWriter.WriteLine(Acid_QC.TextBox54.Text)
            objWriter.WriteLine(Acid_QC.TextBox55.Text)
            objWriter.WriteLine(Acid_QC.TextBox56.Text)
            objWriter.WriteLine(Acid_QC.TextBox57.Text)
            objWriter.WriteLine(Acid_QC.TextBox58.Text)
            objWriter.WriteLine(Acid_QC.TextBox59.Text)
            objWriter.WriteLine(Acid_QC.TextBox60.Text)
            objWriter.WriteLine(Acid_QC.TextBox61.Text)
            objWriter.WriteLine(Acid_QC.TextBox62.Text)
            objWriter.WriteLine(Acid_QC.TextBox63.Text)
            objWriter.WriteLine(Acid_QC.TextBox64.Text)
            objWriter.WriteLine(Acid_QC.TextBox65.Text)

            objWriter.Close()
            MsgBox("Data written to file")

        Else

            'Do Nothing

        End If
    Catch ex As Exception
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:57:07.420

如果你的意思是让代码更优雅？您可以执行以下操作。

```
 ToolStripLabel1.Text = FileDataStorage.OpenFileTextBox1.Text

    If ToolStripLabel1.Text = ("C:\Temp\New QCA.qca") Then
        MsgBox("Must Save New file first ACCESS DENIED!")
    End If

    Dim FILE_NAME As String = FileDataStorage.OpenFileTextBox1.Text

    Try
        If System.IO.File.Exists(FILE_NAME) = True Then

            Dim objWriter As New System.IO.StreamWriter(FILE_NAME)
            For Each c As Control In Form.Controls
                If TypeOf c Is TextBox Or TypeOf c Is ComboBox Then
                    objWriter.WriteLine(c.Text)
                End If
            Next

            objWriter.Close()
            MsgBox("Data written to file")

         Else
            'Do Nothing
         End If
    Catch ex As Exception
         Throw
    End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:50:45.903

与您已有的保持一致，类似的外部功能可能对您有用。它遍历传递给它的表单，然后找到某种类型的对象，然后将它们打印给您在那里创建的编写器。你必须让它与你已经拥有的东西一起工作，但这样的事情会节省很多行。

它所做的是获取表单上控件的数量，然后遍历每个控件以获取其类型。如果类型正确，那么它只是将其内容写入文件。

```
Private sub writeToFile(formFrom as Form)
    Dim controls As Control
    For Each controls In formFrom.Controls
        If TypeOf (controls) Is TextBox Then
            objWriter.WriteLine(formFrom.controls.text)
        elseif TypeOf (controls) is ComboBox then
            objWriter.WriteLine(formFrom.controls.text)
        End If
    Next
end sub 
```

# twitter-bootstrap - input-append 类导致显示错误

> ID：14760606
> 
> 赞同：1
> 
> 时间：2013-02-07T20:42:09.497
> 
> 标签：twitter-bootstrap

我正在尝试创建一个带有日期下拉字段的表单，并让它很好地内联显示。该字段在不使用输入附加的情况下很好，但是当我这样做时会遇到问题-

这是代码

```
<div class="control-group">
            <label class="control-label" for="title">
                <a data-toggle="collapse" data-target="#collapse_date">
                    Add a date
                </a>
            </label>
            <div id="collapse_date" class="controls collapse input-append date form_datetime" data-date="2013-09-16T05:25:07Z" data-date-format="dd MM yyyy - hh:ii" data-link-field="dtp_input1" >

                    <input size="16" type="text" value="" readonly><span class="add-on"><i class="icon-th"></i></span>

            </div>
        </div> 
```

这就是结果。

![离开](../Images/4154801ab875e25e44d57bbb2f35cf32.png)

正如您所看到的，输入字段出于某种原因向右对齐 - 除了颜色之外，我在这里使用支架 boostrap。也许对boostrap有更深入了解的人可以指出我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:54:50.393

你的`.controls`div 和`.input-append`div 是同一个 div。尝试`input-append`从该 div 中删除该类，并将输入和 span 包装在唯一类为`input-append`.

# c++ - 数组数据在传递指针后被破坏，C

> ID：14760608
> 
> 赞同：0
> 
> 时间：2013-02-07T20:42:16.903
> 
> 标签：c++, pointers, struct, corrupt

我在我的函数中取消引用指向我的数组结构的指针并在函数中打印它。但是，这可以正常工作，只要我将指针从函数中返回，它就会错误地打印出来。我对类似问题进行了一些研究，但我似乎无法找到我的确切问题。

正确打印：11 5 1 2 3 4 5 10 20 30 40 错误：11 5 1 2 5024 96 0 0 20 30 40

（问题区域在 CAPS 中注释）

[数组工具.cpp]

```
#include "arraytools.h"
#include <iostream>

using namespace std;

void DisplayArray (short int* a)
{
    short int size = a[0];
    int i;
    for (i=0; i<size; i++)
    {
        cout<< a[i] << " ";
    }
    cout<<endl;
}

short int* ConcatArray (short int* a1, short int* a2)
{
    short int size = a1[0] + a2[0] + 1;  //size of newarray
    short int *ptr;          //pointer for newarray
    short int newarray[size];  //initializing new array with given new size
    newarray[0] = size;    //making first object in new array the size of it

    int i,j;    
    for (i=0; i<a1[0]; i++)  //loop to store first array objects to newarray
    {
        newarray[i+1] = a1[i];
    }

    int lastpoint = a1[0] + 1;  //marks the point to start adding the second array to newarray
    for (j=0; j<a2[0]; j++)  //loop to store second array objects to newarray
    {
        newarray[lastpoint] = a2[j];
        lastpoint++;

    }

    ptr = &newarray[0];  //assigning new array to pointer
    DisplayArray(ptr);  //PRINTS CORRECTLY HERE
    return ptr;
} 
```

[主.cpp]

```
#include "arraytools.h"
#include <iostream>
using namespace std;

int main()
{
    char choice = 'y';  //user defined later in program
    while (choice == 'y') // for repeating process
    {
        //declaring two arrays of short int
        short int arr1[] = {5,1,2,3,4};
        short int arr2[] = {5, 10, 20, 30, 40};

        //pointers to refer to declared arrays
        short int* nptr, *ar1, *ar2;

        ar1 =arr1;
        ar2 =arr2;

        DisplayArray(ar1);
        DisplayArray(ar2);

        nptr = ConcatArray(ar1, ar2); //RECIEVES RETURNED POINTER
        DisplayArray(nptr);  //PRINTS INCORRECTLY

        cout<<"Run process again? y/n: "; //loop exit condition
    cin >> choice;
    }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:48:44.583

您正在“在堆栈上”分配 newarray。一旦超出范围（即函数结束），它将被回收。如果您真的想这样做，请使用 malloc。或者，如果您真的在使用 C++，请考虑使用更好的容器，例如 std::vector。

```
ConcatArray (short int* a1, short int* a2)
{
    short int size = a1[0] + a2[0] + 1;  //size of newarray
    short int *ptr;          //pointer for newarray
    short int newarray[size];  //initializing new array with given new size 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T20:53:47.863

这一行是问题的根源：

```
short int newarray[size]; 
```

它在堆栈中分配数组，然后返回它的地址，即使从该函数返回后它就变得无效。试试这个：

```
short *newarray = new short [size]; 
```

现在它进入堆。当然，当您不再需要它时，您还应该使用 delete[] 运算符将其删除，例如打印后可能在 main 中：

```
delete[] nptr; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T20:48:49.747

当您将新数组作为函数的局部变量时，它会分配在堆栈上（通常）。然后返回一个指向调用代码的指针。但是一旦方法返回，内存就会被释放。因此，一旦被调用函数返回，指针就会指向未定义的内存区域。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T20:49:20.740

您的函数返回存储在堆栈中的局部变量上的指针。您的数据需要 malloc 内存。

# java - 一对一关系中空列的HQL左外连接

> ID：14760610
> 
> 赞同：9
> 
> 时间：2013-02-07T20:42:22.380
> 
> 标签：java, hibernate, hql, left-join

左外连接应该是从左表中获取所有数据，无论B表是否有匹配的记录，但是如果左表的right_id列为空，则无法获取记录。

我在解释更多

在数据模型中：Order.java，它是我的 LEFT 表，有一对一的关系

```
@OneToOne(targetEntity = OrderShippingDetail.class, optional=true, cascade = {CascadeType.ALL})
@JoinColumn(name = "SHIPPING_DETAIL_ID", referencedColumnName = "ID")
private OrderShippingDetail shippingDetail; 
```

和 HQL 是：

```
 hql = "SELECT " +
            "o.id as id, " +
            "o.createTime as createTime, " +
            "o.customerEmailAddress as customerEmailAddress, " +
            "o.customerPhoneNumber as customerPhoneNumber, " +
            "o.customerNote as customerNote, " +
            "o.invoicePrintedFlag as invoicePrintedFlag, " +
            "shippingAddress.address.personName as shippingPersonName, " +
            "shippingDetail.shippingCompany.id as shippingCompanyId, "+
            "shippingDetail.shippingCompany.name as shippingCompanyName, "+
            "shippingDetail.receiptNumber as shippingReceiptNumber, "+
            "shippingDetail.trackingNumber as shippingTrackingNumber, "+
            "shippingDetail.price as shippingPrice, "+
            "o.invoiceNumber as invoiceNumber " + 
        "FROM Order AS o " +
        "LEFT OUTER JOIN o.shippingAddress AS shippingAddress " +
        "LEFT OUTER JOIN o.shippingDetail AS shippingDetail "; 
```

但是只有“SHIPPING_DETAIL_ID”不为空的记录。HQL 有错误吗？它是通过建模 SQL 命令创建的，该命令是在 hibernate 运行时自动创建的。

我找到了这个，

> HQL 支持两种形式的关联连接：隐式和显式。
> 
> 上一节中显示的查询都使用显式形式，即在 from 子句中显式使用 join 关键字。这是推荐的形式。
> 
> 隐式形式不使用 join 关键字。相反，使用点符号“取消引用”关联。隐式连接可以出现在任何 HQL 子句中。隐式连接导致生成的 SQL 语句中的内部连接。

我删除了 SELECT 部分中的点符号，所以我的新 HQL：

```
hql = "SELECT " +
                "o.id as id, " +
                "o.createTime as createTime, " +
                "o.customerEmailAddress as customerEmailAddress, " +
                "o.customerPhoneNumber as customerPhoneNumber, " +
                "o.customerNote as customerNote, " +
                "o.invoicePrintedFlag as invoicePrintedFlag, " +
                "shippingDetail, " +
                "o.invoiceNumber as invoiceNumber " + 
            "FROM Order AS o " +
            "LEFT OUTER JOIN o.shippingAddress AS shippingAddress " +
            "LEFT OUTER JOIN o.shippingDetail AS shippingDetail "; 
```

所以，它有效，它返回 Order 表中的所有记录，但是，我不想选择 ShippingDetail 对象中的所有列和关系。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T23:15:12.057

向查询中添加另一个显式左连接：

```
SELECT o.id as id, 
...,
shippingCompany.id as shippingCompanyId, 
shippingCompany.name as shippingCompanyName, 
...
FROM Order AS o
LEFT OUTER JOIN o.shippingAddress AS shippingAddress 
LEFT OUTER JOIN o.shippingDetail AS shippingDetail
LEFT OUTER JOIN shippingDetail.shippingCompany AS shippingCompany 
```

# mysql - 如何从 ~200k text/html 生成与相似文本匹配/比较的哈希？

> ID：14760613
> 
> 赞同：1
> 
> 时间：2013-02-07T08:22:59.103
> 
> 标签：mysql, performance, stored-procedures, mysql-5.5, function

我想从一个文本（在我的例子中是html）中制作一种哈希键，它可以匹配/比较其他类似文本的哈希

匹配文本的前：

*   “2012/10/01 这是我的网页 #1”+ 100k_of_same_text + random_words_1 + ..
*   “2012/10/02 这是我的网页 #2”+ 100k_of_same_text + random_words_2 + ..
*   ...
*   “2012/10/02 这是我的网页 #2”+ 100k_of_same_text + random_words_3 + ..

到目前为止，我已经考虑过删除数字和标签，但这仍然会留下随机单词。

有什么东西可以剂量吗？

我对服务器具有 root 访问权限，因此我可以添加任何必要的 UDF，如果需要，我可以用 c 或其他语言进行处理。

理想的情况是一个类似的函数`generateSimilarHash(text)`和一个`compareSimilarHashes(hash1,hash2)`返回匹配文本的概率的函数。

像 compare(text1,text2) 这样的任何函数都不会像我的情况那样工作，因为我有很多页面要比较（目前约 2000 万）

**欢迎任何建议！**

### 更新：

我指的`hash function`是维基百科上描述的：

> 哈希函数是将可变长度的大型数据集映射到固定长度的较小数据集的任何算法或子程序。

在我的情况下，*固定长度*部分不是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:14:50.517

听起来您需要使用 diff 之类的程序。

如果您只是想比较文本，那么哈希不是可行的方法，因为输入的细微差异会导致输出的完全差异和完全差异。（因此它们用于编码密码和保护文本的原因）。字符差异程序非常复杂，除非您真的对它们的工作方式感兴趣并尝试编写自己的程序，否则我只会使用此处显示的解决方案，使用 sdiff 来获取百分比。

[GNU Diff 的百分比值](https://stackoverflow.com/questions/2722947/percentage-value-with-gnu-diff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:19:49.620

您可以使用某种 Levenshtein 距离算法。这适用于小块文本，但我很确定类似的东西可以应用于大块文本。

参考：[http ://en.m.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance](http://en.m.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:46:41.943

我发现网页中的标签顺序可以创建一个非常独特的模式，即使部分*文本*/ *css* /*脚本*发生变化，它也保持不变。所以我制作了一个由标签顺序生成的字符串（例如：`html head meta title body div table tr td span bold...`=>“ `hhmtbdttsb...`”），然后我只是在这些字符串之间进行完全匹配。我什至可以应用 Levenshtein 距离算法并获得准确的结果。

如果我没有 html，我会使用标点符号/结束行进行拆分，或类似的东西。

# php - 使用基于 php 的 css 模板时无法正确使用 $_GET 值

> ID：14760614
> 
> 赞同：0
> 
> 时间：2013-02-07T20:42:36.883
> 
> 标签：php, javascript, css, variables, math

如果有人能想到更好的标题，请告诉我。

现在我正在使用[本教程](http://webcheatsheet.com/PHP/passing_javascript_variables_php.php)中的一种技术来获取用户查看窗口的宽度和高度。它有效，但仅在[index.php](http://pastebin.com/GeRGA6FA)页面上。我正在使用基于[php 的 css 文件。](http://pastebin.com/50NYB9zi) 在基于 php 的 css 文件中，一切正常，除了顶部的第一行 *$width_div_center = $GET['width'] *0.8;* 认为宽度是字符串形式。（或类似的东西。）结果， $width_div_center 变量设置为零，这会导致很多问题。我在做什么错，或者如何让基于 php 的 css 文件正确地对 *$GET['width'] *0.8*进行乘法运算？谢谢您的帮助。

```
<html>
<head>
<title>Taylor Love</title>
<!--
<link rel="stylesheet" media="only screen and (color)" href="main.css" />
<link rel="stylesheet" href="main.css"/>
-->
<link rel="stylesheet" type="text/css" href="css/style.php" />
<?php
        $content = "null";
        include_once('content.php');
?>
</head>
<body class="body">
        <!-- top header -->
        <div class="div-center decorated-white">
                <div class="header-background">
                        <div style="margin:10px;">
                        <font color="#AAA" >
                        hello, universe!
                        <?php
                        echo $_GET['width'] *.8;
                        echo "<h1>Screen Resolution:</h1>";
                        echo "Width  : ".$_GET['width']."<br>";
                        echo "Height : ".$_GET['height']."<br>";
                        ?>
                        </font>
                        </div>
                </div>
        </div><!-- div-center-->
        <div class="div-center" style="margin-top:10px;">
                <?php
                include('sidenav.php');
                ?>
                <div id="div-content" class = "decorated-white">
                <?php echo $content; ?>
                </div><!-- div-content-->
        </div><!-- div-center-->
        <div class="clear"></div>
        <!-- top header
        <div class="div-center decorated-white" style="margin-top:10px">
                <?php
                        for ($i = 0; $i < 5; $i++){
                                echo "</br>";
                        }
                ?>
        </div>-->
</body>
</html> 
```

///////////////////////////////////////// //////////////////////////////////////////////////////// ///////////////////////////////////////// ////////// 我似乎在分隔两个不同的代码页时遇到了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:54:49.143

您似乎在`style.php`没有任何`$_GET`参数的情况下进行调用。

`$_GET`您使用的参数`index.php`不会自动传递给`style.php`. 脚本。

尝试临时硬编码 'width' 参数，看看它是否有任何不同

```
<link rel="stylesheet" type="text/css" href="css/style.php?width=100" /> 
```

这是因为对样式表的请求是一个单独的 GET 请求，它不知道引用者的获取参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:48:37.763

这可能是因为`$_GET`变量通常是字符串。这可能是您的问题的原因。您可以使用该函数`floatval()`将其转换为浮点数。

第一行应该是`$width_div_center = floatval($_GET['width'])*0.8;`

# r - 访问 getSymbols 返回的奇名对象

> ID：14760622
> 
> 赞同：4
> 
> 时间：2013-02-07T20:43:10.443
> 
> 标签：r, quantmod

我正在使用以下方式从 Yahoo 下载数据`quantmod`：

```
> getSymbols("HNZ-A.TO")
[1] "HNZ-A.TO"
Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
  downloaded length 70893 != reported length 200 
```

该文件显示在我的 R 工作区中。数据在那里，我可以`edit`用来查看对象，但我不能使用对象。例如：

```
> head(HNZ-A.TO)
Error in head(HNZ - A.TO) : object 'HNZ' not found 
```

我可以做些什么来使用这个对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:45:23.637

使用反引号或`get`.

```
HNZA.TO <- `HNZ-A.TO`
HNZA.TO <- get("HNZ-A.TO") 
```

`auto.assign=FALSE`或者，您可以通过设置调用来完全避免这种情况`getSymbols`。

```
HNZA.TO <- getSymbols("HNZ-A.TO", auto.assign=FALSE) 
```

您可能还想通过以下方式调整列名：

```
colnames(HNZA.TO) <- make.names(colnames(HNZA.TO)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T20:46:10.060

`HNZ <- getSymbols('HNZ-A.TO', auto.assign=FALSE)`根据 getSymbols 的帮助页面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T21:08:28.720

另一种选择是`setSymbolLookup`告诉`getSymbols`在查询中使用不同的符号。

```
> setSymbolLookup(HNZ=list(src="yahoo", name="HNZ-A.TO"))
> getSymbols("HNZ")
[1] "HNZ" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-02T18:32:31.193

好的，但是你不能得到报价。也许另一种解决方案可能是：

HNZ<-read.csv(" [http://ichart.finance.yahoo.com/table.csv?s=HNZ-A.TO&ignore=.csv](http://ichart.finance.yahoo.com/table.csv?s=HNZ-A.TO&ignore=.csv) ", stringsAsFactors=F)

负责人（新西兰）

优点是仍然很容易轻松获得您想要的列。

# asp.net-mvc-4 - 创建 ASP.NET MVC4 项目以连接到 SiteCore Master 以进行管理员访问

> ID：14760623
> 
> 赞同：1
> 
> 时间：2013-02-07T20:43:13.717
> 
> 标签：asp.net-mvc-4, sitecore, sitecore6

我已经安装了 SiteCore 6.5，我只想创建一个简单的 ASP.NET MVC4 应用程序，它将连接到 Sitecore\Admin，并允许我调用 Context.GetItem("/sitecore/content/home") 函数调用. 这样做容易吗？我必须在 web.config 中进行哪些更改才能实现这一点？这是一个简单的管理工具箱应用程序，所以所有的用户名和密码都是硬编码的，我只是使用 SecurityDisabler() 和 UserSwithcher() 在 Admin 下运行该功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T14:25:12.390

看看 Sitecore Item Web API 模块，它在[SDN](http://sdn.sitecore.net/SDN5/Products/Sitecore%20Item%20Web%20API/SitecoreItemWebApi10.aspx)上可用。API 通过项目路径、ID 和 Sitecore 查询提供对内容的访问权限。

Item Web API 是本月伦敦用户组会议上的演讲主题。[您可以在YouTube 上](https://www.youtube.com/watch?feature=player_embedded&v=muLFkTlYtCM)找到演示文稿的录音，并在[GitHub 上](https://github.com/herskinduk/Usergroup.ItemWebApi)提供演示代码。

如果您想了解使用标准 Sitecore API 访问网站上下文之外的内容项需要什么，Mike Edwards 有一篇关于[如何配置 Sitecore 6.5 以在 NUnit 中工作](http://www.experimentsincode.com/?p=343)的精彩文章。这篇文章解释了调用者需要什么配置才能在没有上下文的情况下访问 Sitecore，然后就可以执行如下代码：

```
using NUnit.Framework;
using Sitecore.Data;
using Sitecore.Data.Items;

[TestFixture]
public class when_connecting_to_sitecore_master_database
{
    [Test]
    public void it_can_retrieve_the_root_item()
    {
        Database db = global::Sitecore.Configuration.Factory.GetDatabase("master");
        Item item = db.GetItem("/sitecore");
        Assert.IsNotNull(item);
        Assert.AreEqual("sitecore", item.Name.ToLower());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:04:59.253

我能够将 MVC 4 应用程序连接到 Sitecore 6.5 安装以进行一些管理实现。我刚刚将 App_Config 和 Web.Config 文件的整个文件夹复制到 MVC 应用程序，然后开始将 MVC4 web.config 迁移到从安装中复制的 web.config 中。然后我开始一次取出一个片段，当您运行应用程序时，您应该取出的大部分部分都会显示在 as 错误中，但我们给我错误的主要部分是指向 sitecore 的 httpredirection安装，那是 httphandlers 标签和 httpModules 标签，我的 MVC 应用程序现在显示，我能够连接到 Sitecore 配置和工厂。

# java - 在android中查找视图的最终变量

> ID：14760625
> 
> 赞同：0
> 
> 时间：2013-02-07T20:43:29.733
> 
> 标签：java, android

为什么绝大多数android示例在findViewById（id）等方法中将返回变量声明为final？例如：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_enc_disp);

    final ListView listViewEncDisp = (ListView) findViewById(R.id.listViewEncDisp);
    listViewEncDisp.setOnItemClickListener(this);
} 
```

我知道不能再次分配最终变量，但是不明白为什么需要这个好习惯。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:48:40.333

盲目地添加`final`所有变量不是一个好习惯。尽可能将字段标记为最终字段是公认的惯例。使参数和变量总是最终的更主观。我个人避免它，因为它只会增加混乱。另请注意，将变量设为 final 对运行时没有影响，在大多数情况下，它纯粹是编译时间限制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T20:50:22.970

如果您不想更改对象，则应将其声明为`final`，这是避免编译时出现随机错误的好习惯。

例如，您可以尝试在代码的其他位置分配另一个值，只是因为您忘记了以前做过，然后您可能会花费几分钟，有时甚至是几个小时来寻找错误。

# jquery - jquery datetimepicker 限制日期时间选择器中的时间

> ID：14760626
> 
> 赞同：0
> 
> 时间：2013-02-07T20:43:30.137
> 
> 标签：jquery, jquery-ui

我有一个 jquery 日期时间选择器，如下所示： -

```
$('.DatePickerWithTime').datetimepicker({
    ampm: true,
    timeFormat: 'h:mm TT',
    stepMinute: 15
}); 
```

我想为它设置一个最小的日期和时间。

如果我使用以下设置：-

```
$('.DatePickerWithTime').datetimepicker({
        ampm: true,
        timeFormat: 'h:mm TT',
        stepMinute: 15,
        minDate: minimumDate,//some date in date time format
        maxDate: maximumDate//some date in date time format
    }); 
```

日期部分工作正常，但时间部分不起作用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:58:36.420

根据[文档](http://trentrichardson.com/examples/timepicker/)，您只需将选项从日期更改为日期时间：

```
$('.DatePickerWithTime').datetimepicker({
    ampm: true,
    timeFormat: 'h:mm TT',
    stepMinute: 15,
    minDateTime: minimumDate, //some date in date time format
    maxDateTime: maximumDate  //some date in date time format
}); 
```

# ruby-on-rails-3 - 在选择中连接字段名称

> ID：14760628
> 
> 赞同：1
> 
> 时间：2013-02-07T20:43:35.277
> 
> 标签：ruby-on-rails-3, forms, activerecord

我有一个表格，允许您按名称选择设施，然后将设施的 id 写入数据库中的 vale。

```
<%= f.collection_select(:transfer_to_id, Facility.all, :id, :facility_name, {:include_blank => true}, {:class => 'select'})%> 
```

我希望能够选择设施名称，但在设施名称的右侧显示表单中的设施地址。我不确定如何执行此操作，可能是某种数组或使用辅助方法。

如果有人可以提供一些帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:59:03.960

这是未经测试的，所以请耐心等待，但您需要向`Facility`模型添加一个方法：

```
def facility_name_with_facility_address
  facility_name << " " << facility_address
end 
```

然后在您的表单中，您要更改以下内容：

```
<%= f.collection_select(:transfer_to_id, Facility.all, :id, :facility_name, {:include_blank => true}, {:class => 'select'})%> 
```

对此：

```
<%= f.collection_select(:transfer_to_id, Facility.all, :id, :facility_name_with_facility_address, {:include_blank => true}, {:class => 'select'})%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T13:49:37.243

这是通过创建 Class 方法最终为我正常工作的方法。

```
 def facility_name_with_facility_address
    "#{facility_name} | #{facility_address}"
  end 
```

# mysql - 在mysql中选择最后一个不同的记录

> ID：14760629
> 
> 赞同：1
> 
> 时间：2013-02-07T20:43:40.620
> 
> 标签：mysql, select, distinct

我在 mysql 中有一个表有很多数据。我只想显示不同的和最后保存的数据......这就是我所拥有的

```
CREATE TABLE amounts(
    id MEDIUMINT NOT NULL AUTO_INCREMENT,
    bank_id INT,
    amount INT,
    PRIMARY KEY (id)
) ENGINE=MyISAM;
INSERT INTO `amounts` (`id`, `bank_id`, `amount`) VALUES (NULL, '1', '100'),
(NULL, '2', '200'),(NULL, '3', '300'),(NULL, '1', '500'),(NULL, '2', '600'),
(NULL, '1',   '800'),(NULL, '2', '50'); 
```

我想要这样的结果

```
  bank_id 金额
  1 800
  2 50
  3 300
```

将如何选择查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:50:00.957

使用自联接。这几乎总是比子查询快。

```
SELECT a.*
  FROM amounts a LEFT JOIN amounts b ON a.bank_id = b.bank_id AND a.id < b.id
  WHERE b.id IS NULL 
```

## [查看演示](http://sqlfiddle.com/#!2/eebf0/17)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:47:22.937

这应该这样做：

```
SELECT a.bank_id, 
       b.amount 
FROM   (SELECT bank_id, 
               Max(id) AS id 
        FROM   amounts 
        GROUP  BY bank_id) a 
       INNER JOIN amounts b 
               ON b.id = a.id 
```

**结果**

```
| BANK_ID | 数量 |
--------------------
| 1 | 800 |
| 2 | 50 |
| 3 | 300 |
```

## [查看演示](http://sqlfiddle.com/#!2/17a64/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:47:57.717

您可以使用子查询为每个 bank_id 选择最大 ID，然后选择此子查询返回其 ID 的所有行：

```
SELECT amounts.*
FROM   amounts
WHERE  id IN (select max(id)
              from amounts
              group by bank_id)
ORDER BY bank_id 
```

请看[这个小提琴](http://sqlfiddle.com/#!2/eebf0/14)。

# php - 在 CakePHP 中下载 docx 文件

> ID：14760630
> 
> 赞同：0
> 
> 时间：2013-02-07T20:43:44.043
> 
> 标签：php, cakephp, docx

我正在尝试进行下载操作，下载使用 PHPDOCX 在“下载”控制器中生成的 Word 文档。到目前为止，PHPDOCX 能够将所需的 .docx 文件保存在正确的文件夹中，但是当我尝试下载它时出现了问题。由于媒体视图已被弃用，我必须使用 CakeResponse 文件方法，如 CakePHP 2.x Cookbook 中所建议的那样：

```
// In the controller:
$this->response->file($file['path'], array('download' => true, 'name' => $filename));
return $this->response; 
```

我能够使用此方法毫无问题地导出 RTF（RTF 是使用 PHPRTFLite 生成的），但是当我使用 PHPDOCX 将该方法用于 .docx 文件时，我在 Firefox 中收到以下错误：

> 预扫描文件的前 1024 个字节时，未找到 HTML 文档的字符编码声明。在不同配置的浏览器中查看时，此页面将自动重新加载。编码声明需要移动到文件的前 1024 个字节内。

我想使用一个接受 HTML 的文档生成器，这就是我选择 PHPDOCX 的原因。考虑到上述错误，我开始使用以下方法定义标头和内容类型：

`$this->response->header(array('Content-type'=>'application/vnd.openxmlformats-officedocument.wordprocessingml.document'));`

但我仍然在 CakePHP 中收到同样的错误：

> 请求的文件 APP/files/info_sheets/filename.docx 未找到或不可读

我在想的一件事是 PHPDOCX 在生成文档时会发送许多错误，这会干扰 Mime 类型或编码。但根据 2.x Cookbook：

> `CakeResponse::header()`调用时也不发送标头。它们只是被缓冲，直到实际发送响应。

另一个想法是我需要在内容类型之后的标题中设置字符编码：

`$this->response->header(array('Content-type'=>'application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8'));`

但这会导致文本乱码。

有谁知道如何解决这个问题？“download.ctp”视图文件当前为空白。如果您需要有关此问题的更多信息，请告诉我。

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:20:10.430

首先，您可能会尝试禁用 autoRender，否则 CakePHP 可能仍会尝试渲染您的视图和布局；

```
$this->autoRender = false; 
```

另外，还没有测试过，但是您是否尝试过设置标题：

```
// register the type 
$this->response->type(array('docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'));
// set the type for the response
$this->response->type('docx'); 
```

请参阅文档： [http ://book.cakephp.org/2.0/en/controllers/request-response.html#dealing-with-content-types](http://book.cakephp.org/2.0/en/controllers/request-response.html#dealing-with-content-types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T20:28:53.300

您可以修改框架核心中的 media.php 文件，并将 mime-type 添加到具有类型的数组中。例如：

```
'docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' 
```

# c++ - 读取大量 ASCII 数字并以二进制形式写入

> ID：14760637
> 
> 赞同：1
> 
> 时间：2013-02-07T20:44:28.180
> 
> 标签：c++, optimization, data-processing

我有大约 1.5 Gb 的浮点数的数据文件，它们存储为 ASCII 文本，由空格分隔，例如，`1.2334 2.3456 3.4567`等等。

在处理这些数字之前，我首先将原始文件转换为二进制格式。这很有帮助，因为我可以选择是否使用`float`或`double`，减小文件大小（大约 800 MB`double`和 400 MB `float`），并在处理数据后读取适当大小的块。

我编写了以下函数来进行 ASCII 到二进制的转换：

```
template<typename RealType=float>  
void ascii_to_binary(const std::string& fsrc, const std::string& fdst){    
 RealType value;
 std::fstream src(fsrc.c_str(), std::fstream::in | std::fstream::binary);
 std::fstream dst(fdst.c_str(), std::fstream::out | std::fstream::binary);

 while(src >> value){
  dst.write((char*)&value, sizeof(RealType));
 }
 // RAII closes both files
} 
```

我想加快速度`acii_to_binary`，但我似乎无法提出任何建议。我尝试以 8192 字节的块读取文件，然后尝试在另一个子例程中处理缓冲区。这似乎很复杂，因为缓冲区中的最后几个字符可能是空格（在这种情况下一切都很好），或者是一个截断的数字（这非常糟糕）——处理可能的截断的逻辑似乎不值得。

你会怎么做来加速这个功能？我宁愿依赖标准 C++（C++11 也可以），没有额外的依赖，比如 boost。

谢谢你。

# 编辑：

@大卫施瓦茨：

我尝试按如下方式实施您的建议：

```
 template<typename RealType=float>  
  void ascii_to_binary(const std::string& fsrc, const std::string& fdst{    
    std::vector<RealType> buffer;
    typedef typename std::vector<RealType>::iterator VectorIterator;
    buffer.reserve(65536);

    std::fstream src(fsrc, std::fstream::in | std::fstream::binary);
    std::fstream dst(fdst, std::fstream::out | std::fstream::binary);

    while(true){
      size_t k = 0;
      while(k<65536 && src >> buffer[k]) k++;     
      dst.write((char*)&buffer[0], buffer.size());
      if(k<65536){
    break;
      }
    }
  } 
```

但它似乎没有写入数据！我在做这个工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:43:40.210

我做*了完全相同*的事情，除了我的字段由制表符分隔，`'\t'`而且我还必须处理每行末尾的非数字注释和穿插数据的标题行。

[这](http://dl.dropbox.com/u/6919979/breaktdf%20instructions.pdf)是我的实用程序的文档。

我也遇到了速度问题。以下是我为将性能提高约 20 倍所做的事情：

*   用内存映射文件替换显式文件读取。一次映射两个块。当您在处理完一行后处于第二个块中时，与第二个和第三个块重新映射。这样，跨越块边界的线在内存中仍然是连续的。（假设没有一行大于一个块，您可能可以增加块大小来保证这一点。）
*   使用 SIMD 指令，例如`_mm_cmpeq_epi8`搜索行尾或其他分隔符。就我而言，任何包含`'='`字符的行都是需要不同处理的元数据行。
*   使用准系统数字解析功能（我使用自定义功能来解析 HH:MM:SS 格式的时间，`strtod`非常`strtol`适合抓取普通数字）。`istream`这些比格式化的提取函数快得多。
*   使用 OS 文件写入 API 而不是标准 C++ API。

如果您梦想吞吐量在 300,000 行/秒范围内，那么您应该考虑采用类似的方法。

当您不使用 C++ 标准流时，您的可执行文件也会缩小。我有 205KB，包括一个图形界面，并且只依赖于 Windows 附带的 DLL（不需要 MSVCRTxx.dll）。再看一遍，我仍在使用 C++ 流进行状态报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:57:09.820

使用 a of*将写入*聚合到固定缓冲区中。你的逻辑应该是这样的：`std::vector``RealType`

1.  为 a 分配`std::vector<RealType>`65,536 个默认构造的条目。

2.  将多达 65,536 个条目读取到向量中，替换现有条目。

3.  写出尽可能多的条目。

4.  如果您准确读取了 65,536 个条目，请转到步骤 2。

5.  停下来，你已经完成了。

这将防止您交替读取和写入两个不同的文件，从而显着减少查找活动。它还将允许您进行更少的`write`调用，从而减少复制和缓冲逻辑。

# java - 如何从 Java 方法获取 Maven 项目版本，就像在 Pom 中一样

> ID：14760638
> 
> 赞同：3
> 
> 时间：2013-02-07T20:44:31.103
> 
> 标签：java, maven, maven-plugin-development

我可以从我的 pom 文件中获取一些变量的值，即：

```
${project.version} 
```

我正在开发一个自定义的 Maven 插件，我可以用表达式设置它，但我不想要它。如何像我的 pom 文件一样在 Java 方法中获取它？

**PS：** System.getProperty("project.version") 不起作用，我应该找到一个通用的解决方案，因为我也会在其他事情上使用它，例如获取竹子内部版本号等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-25T14:01:40.683

我在我的 web 项目中使用 maven-war-plugin 将版本注入清单中，然后使用一些 Java 代码从那里获取它。我看不出为什么不能用非网络项目完成类似的事情。

例如

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    version>2.4</version>
    <configuration>
        <archive>
            <manifest>
                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
            </manifest>
        </archive>
    </configuration>
</plugin> 
```

然后在Java中（不包括错误处理）：

```
public String getMavenVersion(ServletContext ctx) {
    String appServerHome = ctx.getRealPath("/");
    File manifestFile = new File(appServerHome, "META-INF/MANIFEST.MF");

    Manifest mf = new Manifest();

    mf.read(new FileInputStream(manifestFile));

    Attributes atts = mf.getMainAttributes();

    return atts.getValue("Implementation-Build");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:24:45.937

```
@Component
MavenProject project;

...

    project.getVersion() 
```

假设您使用的是[Java 5 注释](http://maven.apache.org/plugin-tools/maven-plugin-plugin/examples/using-annotations.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:01:25.430

您是在问是否可以一次将参数作为类或其他结构传递？

如果是这样，您可以使用 -D 参数将它们作为系统属性文件传递，并使用 System.getProperties() 将它们从另一端取出。谷歌周围，很多项目都支持这样的阅读设置，那里有很多示例代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T07:06:59.320

我创建了一个属性文件并在我的 pom 中指出：

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources/</directory>
            <filtering>true</filtering>
        </resource>
 ...
</build> 
```

# android - 更改单个 ListView 项目的背景

> ID：14760642
> 
> 赞同：0
> 
> 时间：2013-02-07T20:44:52.367
> 
> 标签：android, listview, background

我想要一个列表视图，每当我单击一个列表项时，该列表项的背景颜色都不会更改，而其他项不会更改。我的问题是，当我在单击一两个项目后向下滚动列表时，一些从屏幕上看不到的项目也不知何故也改变了它们的背景颜色。

我已经尝试了所有我能想到的东西，但没有找到任何在线帮助我的东西，因此非常感谢任何帮助。这是我最基本的：

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    v.setBackgroundColor(Color.WHITE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:52:48.627

Use a Custom Selector for your Row on your ListView, Refer to this [Tutorial](http://android.cyrilmottier.com/?p=454)

# java - Java 1.7 中的 LocateRegistry.createRegistry(int port) 是否已更改？

> ID：14760645
> 
> 赞同：0
> 
> 时间：2013-02-07T20:45:04.683
> 
> 标签：java, rmi, jmx

我们的架构中有几个服务器端组件。每个组件都使用 JMX 来公开各种内部属性。初始化如下：

```
try {       
        Registry registry = null;
        for(int i = _serverInfo.getJMXStartPort(); i <= _serverInfo.getJMXEndPort(); i++) {         
            try {
                registry = LocateRegistry.createRegistry(i);
                if(registry != null) {
                    _statusPort = i;
                    logger.info("Using JMX port: "+_statusPort);
                    break;
                }
            } catch (Exception e) {
                _statusPort++;
            }
        }                               

        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();

        _abstractServiceController = new AbstractServiceController(this);
        ObjectName mbeanName = new ObjectName("MyServer:name=MyServer Service");

        mbs.registerMBean(_abstractServiceController, mbeanName);

        JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://:"+_statusPort+"/jmxrmi");
        JMXConnectorServer cs = JMXConnectorServerFactory.newJMXConnectorServer(url, System.getenv(), mbs);
        cs.start();

    } catch (Throwable e) {
        logger.error("Unable to register MBean with JMX");
        e.printStackTrace();
    } 
```

我想我有两个问题。

1.  这看起来对吗？

2.  更大的问题是，虽然这在 java 1.6 上运行良好（主机上的每个后续服务器都使用下一个可用端口，因为如果端口不可用 LocateRegistry.createRegistry(i) 会抛出异常），但在 1.7 上则不然。结果，当第二个服务器尝试 JMXConnectorServer.start() 时，我们得到以下异常。有谁知道 createRegistry 的行为是否发生了变化？如果是这样，我们还应该做些什么吗？

    ```
    2013-02-07 15:34:28,451 INFO  [main] Using JMX port: 9500
    2013-02-07 15:34:28,929 ERROR [main] Unable to register MBean with JMX
    java.io.IOException: Cannot bind to URL [rmi://:9500/jmxrmi]: javax.naming.NameAlreadyBoundException: jmxrmi [Root exception is java.rmi.AlreadyBoundException: jmxrmi]
            at javax.management.remote.rmi.RMIConnectorServer.newIOException(RMIConnectorServe.java:826)
    at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:431)
    at com.theatre.services.framework.AbstractService.run(AbstractService.java:306)
    at com.theatre.services.reporttree.TreeServerImpl.run(TreeServerImpl.java:690)
    at com.theatre.services.framework.Launcher.main(Launcher.java:99)
    Caused by: javax.naming.NameAlreadyBoundException: jmxrmi [Root exception is java.rmi.AlreadyBoundException: jmxrmi]
    at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:139)
    at com.sun.jndi.toolkit.url.GenericURLContext.bind(GenericURLContext.java:226)
    at javax.naming.InitialContext.bind(InitialContext.java:419)
    at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServer.java:643)
    at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:426)
    ... 3 more
    Caused by: java.rmi.AlreadyBoundException: jmxrmi
    at sun.rmi.registry.RegistryImpl.bind(RegistryImpl.java:131)
    at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:390)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:248)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:377)
    at sun.rmi.registry.RegistryImpl_Stub.bind(Unknown Source)
    at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:137)
    ... 7 more 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:34:32.293

> 这看起来对吗？

*   不可以。创建注册表失败的原因有很多，不仅仅是因为端口正在使用中。
*   `registry`之后不能为空`createRegistry()`，因此对其进行测试毫无意义。
*   如果您试图找到一个空闲端口，只需打开*（和关闭）*一个`ServerSocket()`. *然后*在该端口上创建注册表（如果它有效）。

> 更大的问题是，虽然这在 java 1.6 上运行良好（主机上的每个后续服务器都使用下一个可用端口，因为如果端口不可用 LocateRegistry.createRegistry(i) 会抛出异常），但在 1.7 上则不然。

看上面。如果在任何 JDK 中的该端口上已经运行了一个注册表，则创建注册表也可能会失败。在早期的 JDK 中，如果在同一 JVM 的任何端口上运行一个 JDK，它将失败。

# macos - OS X 中的缩放（放大镜）效果

> ID：14760646
> 
> 赞同：2
> 
> 时间：2013-02-07T20:45:10.597
> 
> 标签：macos, cocoa, quartz-graphics

我正在尝试创建与 OS X (Mountain Lion) 中内置非常相似的放大镜应用程序。我想知道如何使用哪些框架来实现这种效果？

![在此处输入图像描述](../Images/495471c5a8ccb020e48c2d1402a2ed06.png)

你怎么看，它会是一个自定义光标吗？这个矩形中显示的图像只是背景屏幕的缩放部分？我认为这种实现可能运行缓慢，并且不仅在“缩放”应用程序中更改光标整个系统可能很困难。

或者也许它使用了一些我不知道的石英功能:)

`Ctrl`当我进入缩放模式并使用++进行`Cmd`屏幕截图时，我发现 Apple 的实现（在 OS X 中构建）很有趣 `4`，接下来`Space`捕获的图像是这样的：

![在此处输入图像描述](../Images/972435211db76f830746d45ed9373355.png)

没有屏幕的任何内容，只有缩放区域的边界。所以它告诉我它是屏幕上方的某种透明窗口，但它没有接管焦点。

你知道怎么做吗？

# dynamics-ax-2012 - 如何确定 Dynamics AX 2012 的内容目录（用于帮助文件 msi）

> ID：14760652
> 
> 赞同：0
> 
> 时间：2013-02-07T20:45:18.117
> 
> 标签：dynamics-ax-2012, help-system

我必须创建一个 MSI 以在 Dynamics AX 2012 中部署我们的帮助文件。

据我了解，帮助系统的运行方式是（帮助系统）安装在服务器上，内容（它提供的帮助文件）的正常目录是 c:\inetpub\wwwroot\dynamicsAX6HelpServer\Content。

当然，管理员可以更改它。

帮助文件通过 Web 服务从该内容目录下的文件夹提供给 Dynamics AX 2012 客户端。

我现在必须创建一个 MSI 安装程序，以便在部署我们的产品时部署我们的帮助信息。该过程只是将我们的帮助文件放入该内容目录（嗯，我们的帮助文件结构，而不仅仅是文件）。我们已经有我们的帮助文件，它可以在我们的系统上运行。

我无法找到有关如何查找内容目录所在位置的任何信息。我可以猜测并将其放置在上面的路径中，但这不是正确的方法。

我的意图是使用 Installshield 创建一个 MSI 来部署帮助文件。我在 Dynamics 方面的经验介于零和零之间，因此我感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:53:09.493

除非有更好的答案，否则我在注册表中找到了目录

COMPUTER\HKLM\Software\Microsoft\Dynamics\6.0\Setup\HelpServer\InstallDir

这解决了我的问题。

# mongodb - 仅在多个匹配项时才比较其他字段？

> ID：14760657
> 
> 赞同：0
> 
> 时间：2013-02-07T20:45:28.503
> 
> 标签：mongodb

我有由非唯一键索引的唯一文档。该文档的独特之处在于文档中多个键的组合。例如：

```
{
  first: 'John',
  last: 'Foo'
}
{
  first: 'Henry',
  last: 'Bar'
}
{
  first: 'Frank',
  last: 'Foo'
}
{
  first: 'John',
  last: 'Bar'
} 
```

所以，基于上面的例子：如果我们想查询 的名字`Frank`，我们只会得到一个结果。理想情况下，由于我们只有一个结果，我们甚至不需要将姓氏与我们的查询进行比较。但是，如果我们查询 name `John`，我们会得到两个结果，所以我们*需要*比较次要参数。

如何在 Mongo 中实现这种查询方式？如果只有一个匹配开始，目标只是节省不必要的比较。

请注意，我知道这种查询方式不能保证正确的文档。它假定主字段和每个后续字段匹配“足够好”以验证文档的身份，*如果只有一个文档匹配*。虽然如果有其他不太明显的原因为什么不应该使用这种方法，一定要讨论它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:43:30.133

我根本不会担心这个，特别是如果你有这个索引的话。first, last 上的复合索引将仅扫描以“first”开头的索引元素。如果那是一份文件，那么它就会停止。如果您还需要匹配“last”，那么它将扫描索引的那些部分。

# ruby - 如何从一个哈希数组中提取哈希？

> ID：14760663
> 
> 赞同：0
> 
> 时间：2013-02-07T20:45:45.367
> 
> 标签：ruby, arrays, hash, enumerable

我现在正在编写一个 API 解析器，并且正在努力格式化数据。

到目前为止，我有以下代码：

```
data.each {|season| episodes[season["no"].to_i] = season["episode"].group_by{|i| i["seasonnum"].to_i}} 
```

但是，唯一的问题是输出如下所示：

```
8 => {
     1 => [
        [0] {
                "epnum" => "150",
            "seasonnum" => "01",
              "prodnum" => "3X7802",
              "airdate" => "2012-10-03",
                 "link" => "http://www.tvrage.com/Supernatural/episodes/1065195189",
                "title" => "We Need to Talk About Kevin"
        }
    ],
     2 => [
        [0] {
                "epnum" => "151",
            "seasonnum" => "02",
              "prodnum" => "3X7803",
              "airdate" => "2012-10-10",
                 "link" => "http://www.tvrage.com/Supernatural/episodes/1065217045",
                "title" => "What's Up, Tiger Mommy?"
        }
    ]
} 
```

所以二级散列的每个值都有一个冗余数组。我将如何删除这个数组并只拥有内部哈希？所以，例如我想要：

```
8 => {
     1 => {
                "epnum" => "150",
            "seasonnum" => "01",
              "prodnum" => "3X7802",
              "airdate" => "2012-10-03",
                 "link" => "http://www.tvrage.com/Supernatural/episodes/1065195189",
                "title" => "We Need to Talk About Kevin"
        }
    , 
```

等等

编辑：这是完整的文件：

```
require 'httparty'
require 'awesome_print'
require 'debugger'
require 'active_support'

episodes = Hash.new{ [] }
response = HTTParty.get('http://services.tvrage.com/feeds/episode_list.php?sid=5410')
data = response.parsed_response['Show']['Episodelist']["Season"]

data.each { |season|
  episodes[season["no"].to_i] = season["episode"].group_by{ |i|
    i["seasonnum"].to_i
  }
}

ap episodes 
```

输入数据：[http ://services.tvrage.com/feeds/episode_list.php?sid=5410](http://services.tvrage.com/feeds/episode_list.php?sid=5410)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:53:41.037

胡乱猜测：

```
data.each { |season|
  episodes[season["no"].to_i] = season["episode"].group_by{ |i|
    i["seasonnum"].to_i
  }.first
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:56:17.373

当您真正想要 index_by （每个键一个条目）时，看起来您正在使用 group_by （具有相同键的条目数组）。

```
data.each {|season| episodes[season["no"].to_i] = season["episode"].index_by {|i| i["seasonnum"].to_i}} 
```

注意：如果您可以拥有多个具有相同季数的剧集，则应使用 group by 并在此处设置一组值。如果您只是通过方便的查找（一对一映射）构建剧集哈希，那么 index_by 就是您想要的。

# java - 从 MarkLogic Java API 获取最后修改的属性

> ID：14760665
> 
> 赞同：2
> 
> 时间：2013-02-07T20:45:51.967
> 
> 标签：java, marklogic

我试图弄清楚如何`last-modified`通过 Java API 访问存储在 MarkLogic 中的文件的属性，但我的结果是空的。

我尝试通过元数据访问它，但对于一个简单的 XML 文件，我根本看不到任何元数据。我有一个存储在 MarkLogic 中的测试文件。当我运行此代码时：

```
 DocumentMetadataHandle metadata = new DocumentMetadataHandle();

    XMLDocumentManager docMgr = client.newXMLDocumentManager();
    docMgr.read("/path/test_file.xml", metadata, handle);

    System.out.println("Output: " + handle.get());

    System.out.println("Properties:\n");
    for (Map.Entry<QName,Object> prop : metadata.getProperties().entrySet()) {
        System.out.println("Prop: " + prop.getKey() + ": " + prop.getValue());
    } 
```

...我看到了我期望的对象，但没有属性。

难道我做错了什么？我是否需要调整数据库定义中的某些内容以使这些信息可以访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:54:23.523

检查数据库配置以确保启用“维护上次修改”。该设置在`/database-admin.xqy`屏幕上。

接下来，使用端口 8002 上的查询控制台验证属性是否可用。这是一个 XQuery 接口，但您只需要一个简单的查询：您的文档 URI`xdmp:document-properties('some-uri')`在哪里。`some-uri`

如果`xdmp:document-properties`可行，那么您可以更加确信问题出在 Java 层。

# visual-studio-2010 - Visual Studio 2010 中缺少 Windows 8 SDK 平台工具集

> ID：14760672
> 
> 赞同：0
> 
> 时间：2013-02-07T20:46:27.937
> 
> 标签：visual-studio-2010, winapi

我刚刚在两台不同的机器上安装了 .NET framework 4.5、Windows 8 SDK 和 Windows 8 DDK（一台在家由我管理，一台在工作中由 IT 最初设置）都安装了 Visual Studio 2010 Professional SP1，并且两者运行 Window 7 Professional。

我在 Windows XP 中有一个旧的 C++/Win32 应用程序，它同时使用了 Windows SDK 和 DDK。我为 Windows 7 和 Visual Studio 2010 项目设置更新了它。但是，它不会构建，因为某些 SDK/DDK 包含和库文件是新的，并且在 Visual Studio 中将 Platform Toolset 设置为“v100”时找不到它们。

手动将 Include 和 Lib 文件夹添加到项目中可以使其正确构建和运行。

有什么方法可以将新安装的 SDK 和 DDK 添加到 Visual Studio 2010 的“平台工具集”列表中？我认为它应该自动执行此操作，但我使用的两台机器在安装和重新启动后都没有在他们的列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:53:00.270

在研究了很多之后，我终于找到了解决方案。看起来它不能通过任何简单的方法添加到“平台工具集”，但至少您不必在要使用 API 的每个项目上添加路径。这对我有用，并允许我构建 Microsoft 为 VS2012 编写的“USBView 示例应用程序”。微软推荐的方式（来自官方的 Microsoft Visual C++ Team 博客）是：

对于单个项目： http:
[//blogs.msdn.com/b/vcblog/archive/2012/03/25/10287354.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/03/25/10287354.aspx)
这似乎也适用于最终的 SDK 版本。

要在多个项目中应用这些设置：http: [//blogs.msdn.com/b/vcblog/archive/2012/11/23/using-the-windows-8-sdk-with-visual-studio-2010-configuring-多个项目.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/11/23/using-the-windows-8-sdk-with-visual-studio-2010-configuring-multiple-projects.aspx)

# c++ - 具有多个类的动态库的 CMake 组织

> ID：14760676
> 
> 赞同：1
> 
> 时间：2013-02-07T20:46:32.157
> 
> 标签：c++, cmake

我正在做一个项目，其中一个动态库加载了一系列相关的类。这些类可能依赖于类似的实用程序类，但通常相互依赖地使用。我目前的结构是：

```
MainLibraryDirectory/
    CMakeLists.txt
    mainlibrary.cpp //Provides access to underlying classes
    mainlibrary.h
    /Class1/
        CMakeLists.txt
        class1.cpp
        class1.h
    /Class2/
        CMakeLists.txt
        class2.cpp
        class2.h 
```

我的问题与 Class1 和 Class2 有关`CMakeLists.txt`。我目前的方法是在主 cmake 中设置三个变量，然后：

```
set(my_sources ${my_sources} ${CMAKE_CURRENT_SOURCE_DIR}/class1.cpp PARENT_SCOPE)
set(my_headers ${my_headers} ${CMAKE_CURRENT_SOURCE_DIR}/class1.h PARENT_SCOPE)
set(required_libraries ${required_libraries} boost_bla) 
```

有一个更好的方法吗？更具体地说，我希望能够使用`include_directory`低级中的功能`CMakeLists.txt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:18:10.590

您可以将 Class1 和 Class2 构建到单独的静态库中，然后将它们链接到主库中。

像这样的东西：

```
# Class1/CMakeLists.txt
project(class1)
add_library(class1 STATIC class1.cpp class1.h)

# Class2/CMakeLists.txt
project(class2)
add_library(class2 STATIC class2.cpp class2.h)

# CMakeLists.txt
project(mainlibrary)
add_subdirectory(Class1)
add_subdirectory(Class2)
add_library(mainlibrary SHARED mainlibrary.h mainlibrary.cpp)
target_link_libraries(mainlibrary class1 class2) 
```

# mysql - SQL查询重复结果

> ID：14760677
> 
> 赞同：0
> 
> 时间：2013-02-07T20:46:37.817
> 
> 标签：mysql, sql

我正在使用 MySQL 5 做一个项目。要求如下：

> 提供用户名、设备类型、操作系统版本和参与采摘的水果，其中用户拥有相同的设备类型，运行 iOS 4 或 4.1，并采摘相同的水果

相关表格如下：

> 用户：{ **uID**：INT，名称：VARCHAR(45)，deviceOS：VARCHAR(45)，deviceType：VARCHAR(45)}
> 
> 选择：{ **uID**：INT，**ts**：TIMESTAMP，水果：VARCHAR(45)}
> 
> （粗体的主键。Pick 中的 uID 是 User 中 uID 的外键。）

我正在执行以下查询：

```
SELECT DISTINCT NAME1, OS1, DEV1, NAME2, OS2, DEV2, P1.fruit FROM Pick AS P1, Pick AS P2, 

(SELECT U1.uID AS User1, U1.name AS NAME1, U1.deviceOS AS OS1, U1.deviceType AS DEV1, 
        U2.uID AS User2, U2.name AS NAME2, U2.deviceOS AS OS2, U2.deviceType AS DEV2
FROM User AS U1, User AS U2 
WHERE (U1.uID != U2.uID) AND
      (U1.deviceType = U2.deviceType) AND
      (U1.deviceOS = "4" OR U1.deviceOS = "4.1") AND
      (U2.deviceOS = "4" OR U2.deviceOS = "4.1")) AS PartialResult

WHERE (P1.uID = PartialResult.User1) AND
      (P2.uID = PartialResult.User2) AND
      (P1.fruit = P2.fruit) 
```

这将返回以下结果，但如您所见，它在某种程度上是“重复的”：

![](../Images/2caec71fd7aefe8435bbb91b9bca201a.png)

我尝试使用 GROUP BY fruit 来解决这个问题，但在一般情况下它不会返回正确的结果。限制 1 也不适用于一般情况。因此，经过数小时试图弄清楚这一点，我必须问：

**有没有办法在一般情况下防止这种重复？**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:00:38.567

而不是`U1.uID != U2.uID`，写`U1.uID > U2.uID`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:58:39.950

您遇到的问题是每一行都将被复制，`a--b`并且`b--a`. 您需要某种方式来指定您只想要一个或另一个，但问题是，哪一个？您是否偏好 Priscilla 排在 Marcia 之前，反之亦然？

如果没有偏好，那么您可以制定一些仅允许其中一个或另一个通过的任意规则。例如，您可以比较名称并仅抓取第一个名称按字典顺序排列在第二个之前的行（请参见最后一行）：

```
SELECT DISTINCT NAME1, OS1, DEV1, NAME2, OS2, DEV2, P1.fruit FROM Pick AS P1, Pick AS P2, 

(SELECT U1.uID AS User1, U1.name AS NAME1, U1.deviceOS AS OS1, U1.deviceType AS DEV1, 
        U2.uID AS User2, U2.name AS NAME2, U2.deviceOS AS OS2, U2.deviceType AS DEV2
FROM User AS U1, User AS U2 
WHERE (U1.uID != U2.uID) AND
      (U1.deviceType = U2.deviceType) AND
      (U1.deviceOS = "4" OR U1.deviceOS = "4.1") AND
      (U2.deviceOS = "4" OR U2.deviceOS = "4.1")) AS PartialResult

WHERE (P1.uID = PartialResult.User1) AND
      (P2.uID = PartialResult.User2) AND
      (P1.fruit = P2.fruit) AND
      (STRCMP(NAME1, NAME2) < 0) 
```

当然，您可以实施任何您想要选择其中一个的规则。@igelkott 的答案通过强制 person 1's`uID`高于 person 2's 以同样的方式解决了这个问题`uID`，这是非常合理的（并且比进行字符串比较更快）。

# javascript - Twitter Bootstrap：打开时隐藏其他弹出窗口

> ID：14760683
> 
> 赞同：17
> 
> 时间：2013-02-07T20:46:52.857
> 
> 标签：javascript, jquery, twitter-bootstrap

以下引导代码为我提供了“粘性”弹出框（因此用户可以与弹出框内的内容进行交互）。问题是当一个弹出窗口打开时，其他弹出窗口应该关闭（隐藏）。知道如何实现吗？

```
$("[rel=popover]").popover({placement:'bottom', trigger:'manual'}).hover(function(){
    $(this).popover('show');
    e.preventDefault(); 
}); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-01T19:20:14.537

这里有一个[非常简单的解决方案](http://blog.alysson.net/lang/pt-br/twitter-bootstrap-popover-close-all-before-opening-a-new-one/)（不是我的解决方案，但效果很好）：

```
$('.link-popover').click(function(){
    $('.link-popover').not(this).popover('hide'); //all but this
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-24T16:11:15.153

根据引导文档：[使用焦点触发器在用户下次单击时关闭弹出窗口。](http://getbootstrap.com/javascript/#popovers)

```
<a href="#" tabindex="0" class="btn btn-lg btn-danger" role="button" data-toggle="popover" data-   trigger="focus" title="Dismissible popover" data-content="And here's some amazing content. It's very engaging. Right?">Dismissible popover</a> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-08T00:11:39.167

我一直在玩这个，还有一些关于触发手动显示/隐藏以使其正常播放的问题。悬停实际上是`mousein`，`mouseout`除非你添加一些额外的检查，否则你会遇到我刚刚做的问题！

[这是我的实际解决方案](http://jsfiddle.net/sEKtD/111/)，我将尝试解释我所做的事情。

```
$(function () {

    var overPopup = false;

    $('[rel=popover]').popover({
        trigger: 'manual',
        placement: 'bottom'

    // replacing hover with mouseover and mouseout
    }).mouseover(function (e) {
        // when hovering over an element which has a popover, hide
        // them all except the current one being hovered upon
        $('[rel=popover]').not('#' + $(this).attr('id')).popover('hide');
        var $popover = $(this);
        $popover.popover('show');

        // set a flag when you move from button to popover
        // dirty but only way I could think of to prevent
        // closing the popover when you are navigate across
        // the white space between the two
        $popover.data('popover').tip().mouseenter(function () {
            overPopup = true;
        }).mouseleave(function () {
            overPopup = false;
            $popover.popover('hide');
        });

    }).mouseout(function (e) {
        // on mouse out of button, close the related popover
        // in 200 milliseconds if you're not hovering over the popover
        var $popover = $(this);
        setTimeout(function () {
            if (!overPopup) {
                $popover.popover('hide');
            }
        }, 200);
    });
}); 
```

这对我来说非常适合以下html：

```
<a href="#" id="example1" class="btn large primary" rel="popover" data-content="Example 1!!!" data-original-title="Example 1 title">Button 1</a>
<a href="#" id="example2" class="btn large primary" rel="popover" data-content="Example 2!!!" data-original-title="Example 2 title">Button 2</a>
<a href="#" id="example3" class="btn large primary" rel="popover" data-content="Example 3!!!" data-original-title="Example 3 title">Button 3</a> 
```

希望能帮到你:)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-04T18:40:42.947

使用[Bootstrap 3 的事件回调](http://getbootstrap.com/javascript/#popovers)，您可以：

```
$(document).on('show.bs.popover', function() {
  $('.popover').not(this).popover('hide');
}); 
```

在咖啡脚本中

```
$(document).on 'show.bs.popover', ->
    $('.popover').not(this).popover('hide') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-12T12:07:57.210

关闭所有其他弹出窗口的 Simpiet 解决方案。这可以添加到任何将出现弹出窗口的事件中，例如单击/悬停等。就在您在以下代码中显示弹出窗口粘贴之前：

```
$('.popover').not(this).hide(); //Hides all other popovers 
```

这将删除页面上除当前弹出框之外的所有弹出框

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-03T02:32:21.233

```
$('li').popover({
    title: 'My title',
    content: 'My content'
})
.on('show.bs.popover', function() {
    if (window._bsPopover) {
        $(window._bsPopover).popover('hide')
    }
    window._bsPopover= this;
})
.on('hide.bs.popover', function() {
   window._bsPopover= null; // see Peter Jacoby's comment
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-20T23:06:13.167

我为我的内容使用了一个函数，所以我有（在咖啡脚本中）：

```
provideContentForPopover = (element) ->
  $('.some-selector').not(element).popover 'hide'
  "some content to be returned"

$('.some-selector').popover
  content: -> provideContentForPopover @ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-23T05:46:08.110

我为我的内容使用了一个功能，它工作正常。

```
$(function () {                     
    $('[data-toggle="popover"]').click(function(){
        $(this).popover('toggle');
        $('[data-toggle="popover"]').not(this).popover('hide'); //all but this
    });
}) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-08T15:38:23.797

```
$('.allThePopovers').click(function () {
    if ($(this).hasClass('popoverIsOpen')) {
        $(this).removeClass('popoverIsOpen');
    } else {
        $('.popoverIsOpen').popover('hide');
        $('.allThePopovers').removeClass('popoverIsOpen');
        $(this).addClass('popoverIsOpen');
}); 
```

只需将 click 替换为 hover 或 mousein 即可满足您的需求。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-26T16:15:42.967

更简单的方法来完成这项工作：

```
$('[rel=popover]').popover({
    trigger: 'manual',
    placement: 'bottom'
}).click(function(e) {
    $('[rel=popover]').not('#' + $(this).attr('id')).popover('hide');
    var $popover = $(this);
    $popover.popover('toggle');
}); 
```

只需确保您的弹出框具有唯一的 id ;] 您的弹出框将按照默认方式运行，一次只有一个弹出框。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-14T19:42:10.117

我发现动态弹出框存在一些问题，所以这里有两种静态和动态弹出框的解决方案：

第一个解决方案是使用 popover 选项`triger:'focus'` ，但此选项在某些 android 设备上不起作用

第二个：

```
$('body').popover({
    html: true,
    //this is for static and dynamic popovers
    selector: '[data-toggle="popover"]',
    trigger: 'click',
    content: function () {
        //i am using predefined content for popovers. replace with your code or remove at all
        return $($(this).data('templateselector') + ' .content').html();
    },
    title: function () {
        return $($(this).data('templateselector') + ' .title').html();
    },
    container: 'body'
}).on('show.bs.popover', function (e) {
    // i've found that showed popovers has aria-describedby
    // and $('[data-toggle="popover"]).not(this) not working for dynamic popovers so i came with this:
    $('[data-toggle="popover"][aria-describedby]').popover('hide');
    var trigger = $(e.target);
    // this is for adding custom class for popover container
    // just remove it if you dont need
    trigger.data('bs.popover').tip().addClass($(trigger).data('class'));
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-24T00:05:52.067

我可以通过隐藏不是被点击的弹出框来完成类似的操作。我不确定，但它似乎对我很有效。这是为了在单击时显示弹出框并保持活动状态。单击另一个弹出框时它会被隐藏。

```
<script>
$(function () {
    $('[rel=popover]').popover({
    }).click(function (e) {
        $('[rel=popover]').not('#friend_' + $(this).attr('id')).popover('hide');
    });
});
</script> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-09-12T08:44:01.290

如果您只想一次打开一个弹出框，通过单击打开和关闭（光标位置无关紧要），这很好用：

```
$('[data-toggle="popover"]').popover({  html: true }).bind("click", function(){ 

  if(!$(this).parent().children("a").first().is(":hover"))
   $( '[data-toggle="popover"]').popover("hide"); 
  else
   $( '[data-toggle="popover"]').not($(this).parent().children("a").first()).popover("hide"); 

 return false;  
}); 
```

重要的是每个弹出窗口都有一个单独的父级，例如

```
<ul> <li> <popover> </li> <li> <popover> </li> </ul> 
```

HTML：

```
 <li>  
  <a id="quickmenu-i-305" data-toggle="popover" data-placement="bottom" data-title="Title" data-content='<h2>Plesk Login</h2>' href="Plesk Login">Ihr Kundenbereich</a> 
 </li> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-20T04:39:26.907

当您将鼠标悬停在或单击其他元素以打开弹出框时，使用此方法隐藏所有其他弹出框

一二三四

```
$(document).ready(function(){    
    $('.btnPopover').mouseover(function(){    
    $(this).popover({
        html: true,
        trigger: 'manual'
    }).popover('show');
        $('.btnPopover').not(this).popover('hide');
    }); 
}); 
```

确保将 bootstrap.js 和 bootstrap.css 添加到您的页面。希望这可以帮助。

干杯！！苏拉杰·库马尔

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-09-29T20:03:35.313

为了兼容性，您必须使用`<a>`锚标记。

**我的小提琴：** [https ://jsfiddle.net/oneflame/pnb8Ltj3/](https://jsfiddle.net/oneflame/pnb8Ltj3/)

引导[链接](http://getbootstrap.com/javascript/#dismiss-on-next-click)——http : [//getbootstrap.com/javascript/#dismiss-on-next-click](http://getbootstrap.com/javascript/#dismiss-on-next-click)

```
<div id="FragmentText1">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, est laborum.
</div>

$(document).ready(function(){               
  $('a.LexicalEntry').popover({ 
    html : true,    
    content: function() {
      return getLexicalDefinition($(this).text());
    }   ,   
    trigger: 'focus',
    placement: 'auto',
    html: true,
    container: 'body'
  });
});

// *** Injects HTML into raw text.
// *** Splits the content string using a whitespace regular expression. 
$('#FragmentText1').each(function() {

    // var words = $.trim( $(this).text() ).split(/\s+/g);

    var $this = $(this);
    $this.html(
        $this.text().trim().replace(/\b(\w+)\b/g,
            "<a tabindex='0' class='LexicalEntry'' role='button' title='Definition: $1'>$1</a>"
        ));

}); 
```

# django - 带有自定义字段的 Django 1.5 rc1 管理员用户创建表单

> ID：14760688
> 
> 赞同：6
> 
> 时间：2013-02-07T20:47:12.680
> 
> 标签：django, django-admin

我找不到在管理员的“添加新用户页面”上显示自定义用户的自定义必填字段的方法。

我创建了一个扩展 AbstractUser 的自定义用户并添加了三个必需的自定义字段。我没有创建自定义 UserManager，因为我是从 AbstractUser 而不是 AbstractBaseUser 扩展的。

对于管理方面： 1\. 我通过扩展创建了一个自定义 UserCreationForm。在元类中，我添加了这三个新的自定义字段

但我在管理员端看不到自定义字段。我做错了吗？

这是管理端的代码：

```
class MyUserCreationForm(UserCreationForm):
    """A form for creating new users. Includes all the required
    fields, plus a repeated password."""
    password1 = forms.CharField(label='Password', widget=forms.PasswordInput)
    password2 = forms.CharField(label='Password confirmation', widget=forms.PasswordInput)

    class Meta:
        model = get_user_model()
        fields = ('customField1', 'customField2', 'customField3',)

    def clean_password2(self):
        # Check that the two password entries match
        password1 = self.cleaned_data.get("password1")
        password2 = self.cleaned_data.get("password2")
        if password1 and password2 and password1 != password2:
            raise forms.ValidationError("Passwords don't match")
        return password2

    def save(self, commit=True):
        # Save the provided password in hashed format
        user = super(UserCreationForm, self).save(commit=False)
        user.set_password(self.cleaned_data["password1"])
        if commit:
            user.save()
        return user

class MyUserAdmin(UserAdmin):
    form = MyUserChangeForm
    add_form = MyUserCreationForm

    fieldsets = (
        (None, {'fields': [('username', 'password', 'customField1', 'customField2', 'customField3'),]}),
        (_('Personal info'), {'fields': ('first_name', 'last_name', 'email')}),
        (_('Permissions'), {'fields': ('is_active', 'is_staff', 'is_superuser',
                                   'groups', 'user_permissions')}),
        (_('Important dates'), {'fields': ('last_login', 'date_joined')}),
        )

admin.site.register( CustomUser, MyUserAdmin) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T08:00:51.830

解决方案 --- 将“add_fieldsets”添加到扩展的 UserAdmin 类会使字段出现。

```
add_fieldsets = ( (None, { 'classes': ('wide',), 'fields': ('username', 'password1', 'password2', 'customField1', 'customField2', 'customField3', )} ), 
```

# android - BaseLayerAndroid 创建销毁日志消息

> ID：14760690
> 
> 赞同：9
> 
> 时间：2013-02-07T20:47:15.540
> 
> 标签：android, logging, webview, message

我在活动中使用网络视图。当我在手机上运行我的应用程序时，我可以看到很多（连续的）带有 Tag BaseLayerAndroid 的日志消息。

```
02-07 13:29:06.458: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x1a328b8
02-07 13:29:06.505: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x1977130
02-07 13:29:06.560: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x197fa88
02-07 13:29:06.599: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x1a328b8
02-07 13:29:06.653: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x199fbd0
02-07 13:29:06.685: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x197fa88
02-07 13:29:06.755: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x1ba8018
02-07 13:29:06.786: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x199fbd0
02-07 13:29:06.856: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x19c48d0
02-07 13:29:06.903: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x1ba8018
02-07 13:29:06.966: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x1a20a90
02-07 13:29:07.021: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x19c48d0
02-07 13:29:07.067: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x198e480
02-07 13:29:07.099: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x1a20a90
02-07 13:29:07.169: D/BaseLayerAndroid(27721): Creating BaseLayerAndroid = 0x1977140
02-07 13:29:07.216: D/BaseLayerAndroid(27721): Destroying BaseLayerAndroid = 0x198e480 
```

我的基本代码是：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.display);

        progress = (ProgressBar) findViewById(R.id.progressBar1);
        webview = (WebView) findViewById(R.id.webView1);
        webSettings = webview.getSettings();
        webSettings.setBuiltInZoomControls(true);
        webSettings.setJavaScriptEnabled(true);
        webview.setWebViewClient(new WebViewClient(){
            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                // TODO Auto-generated method stub
                super.onPageStarted(view, url, favicon);
                progress.setActivated(true);
                progress.setVisibility(ProgressBar.VISIBLE);
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                // TODO Auto-generated method stub
                super.onPageFinished(view, url);
                progress.setActivated(false);
                progress.setVisibility(ProgressBar.INVISIBLE);
            }
        });

        new Thread(new Runnable() {
            public void run() {
                webview.loadUrl("some url");
            }
        }).start(); 
```

即使当我退出活动并显示 webview 时，我也会不断收到此日志消息。谁能帮我分析这些日志消息的全部内容以及为什么它们以如此快的速度出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:42:26.017

我在 webview (phonegap) 中遇到了同样的问题。

我发现日志消息似乎与焦点文本区域的闪烁光标有关。

我在 webview 中运行了 jquery，如果我这样做了

> $('textarea').get(0).blur();

日志消息停止。

该代码告诉 textarea 停止聚焦，因此光标停止闪烁，日志消息也停止闪烁（似乎以与光标闪烁相同的速率流动）。

在文本区域之外点击时消息也会停止，而在文本区域中点击则重新启动消息。

我知道这不是一个正确的解决方案，但我希望它可以成为正确方向的提示。

# css - CSS - 无法在同一行获取输入文本和链接

> ID：14760691
> 
> 赞同：0
> 
> 时间：2013-02-07T20:47:16.210
> 
> 标签：css

全部-

谷歌搜索并尝试了大约 20 分钟，但似乎无法弄清楚这一点。有谁知道为什么我不能得到 Search: 在同一行？

我试过显示：内联，显示：块，浮动：左/右，清除：两者，但无济于事。即使使用 chrome 检查器，我也无法弄清楚它为什么不能正常工作。

编辑：粘贴相关代码

```
<li>Search: <input type="text" name="quest_search"></li> 
```

对应的css：

```
header {
    background: #f6f6f6;
    height: 58px;
    border-bottom: 1px solid #eaeaea;
    margin-bottom: 60px;
}
    /* Social Links */
    header aside ul {
        padding-top: 18px;
    }
    /* Main Navigation */
    header .select-menu { display: none; }
    header nav { position: relative; }
    header nav ul {
        list-style: none;
        float: right;
        padding: 22px 0px 0px 0px;
    }
        header nav ul li {
            float: left;
            margin-left: 30px;
            position: relative;
        }       
            header nav ul li a{
                color: #b5b5b5;
                font-size: 12px;
                -webkit-transition:color 0.2s ease-in;  
            -moz-transition:color 0.2s ease-in;  
            -o-transition:color 0.2s ease-in;  
            transition:color 0.2s ease-in;
            }
            header nav ul li a:hover { color: #777; }
            header nav ul li.current a{ color: #555; font-weight: bold; }
            header nav span.arrow {
                width: 24px;
                height: 13px;
                background: url('../images/light-nav_arrow.png') no-repeat;
                display: none;
                position: absolute;
                top: 58px;
            } 
```

[http://dump.tanaris4.com/so/cfs.html](http://dump.tanaris4.com/so/cfs.html)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:50:51.487

Your issue is that the `input` in `base.css` has a a `width` of 100%. This means that the width of the `input` will always be 100% of the size of its parent element, which also contains the "search: " text. Change this to something less than 100% and it should work fine.

For example:

```
input[type="password"], input[type="text"], input[type="email"] {
    width: 50%;
} 
```

Of course, `width:50%` is just one example of what you can use. `width:auto` and other specific widths will work. Just play around with it and see what works best for you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:50:59.073

Your `base.css` file is giving the `input` a `width: 100%;`. Try giving it a `width: auto`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:51:08.940

CSS:

```
input[name="quest_search"]{
    width: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T20:50:58.803

Just put "Search:" in it's own `<li>` is a simple quick fix.

# python - 将 /migrate django 数据移动到新表中

> ID：14760703
> 
> 赞同：0
> 
> 时间：2013-02-07T20:48:13.067
> 
> 标签：python, django, django-models

我有一个事件表。我有 2 种不同类型的与会者，员工和学生。我想做的是让与会者单独坐在一张桌子上。

事件表包含**：**

```
 created = models.DateTimeField(auto_now_add=True)
     modified = models.DateTimeField(auto_now=True)
     name = models.CharField(max_length=200)
     location = models.CharField(max_length=200)
     start_date = models.DateTimeField(auto_now=False, auto_now_add=False)
     about = models.TextField(null=True, blank=True)

     student_attendees = models.ManyToManyField(StudentProfile, null=True, blank=True)
     staff_attendees = models.ManyToManyField(StaffProfile, null=True, blank=True) 
```

**与会者**表将具有：

```
 event = models.ForeignKey(Event)
     content_type = models.ForeignKey(ContentType)
     object_id = models.PositiveIntegerField()
     profile = generic.GenericForeignKey('content_type', 'object_id')
     created = models.DateTimeField(auto_now_add=True) 
```

我将如何将活动学生和教职员工与会者数据传输或迁移到它自己的与会者表中。（我没有使用 South，在这一点上想避免使用它。）。感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:05:05.343

您可以将数据转储到 json 中并手动将它们分成不同的装置，然后更改表（或重新创建数据库）并加载数据。

或者只是编写一个脚本来手动选择一些字段并将它们腌制或手动转储为 json，甚至转储为 CSV：

```
with open('students.csv', 'w') as st_file:
    writer = csv.writer(st_file)
    for a in Attendee.objects.filter(profile__status='student'):
        st_file.writerow(a.event_id, a.content_type, a.object_id, a.profile, ...) 
```

然后制作一个简单的脚本来加载数据。

```
with open('students.csv', 'w') as st_file:
    reader = csv.reader(st_file)
    for row in reader:
        event = Event.objects.get(id=row[0])
        event.student_attendees.add(Student.objects.get(row[2])) 
```

（这意味着 object_id 与 StudentProfile 表中的新 id 相同）

当然，在执行此操作之前备份数据库。

其实还有更好的办法：

```
 python manage.py dumpdata app.event app.attendee --indent=4 > events.json 
```

然后编辑以适应新表，然后

```
 python manage.py loaddata events.json 
```

# jquery - 不首先选择所有选项值

> ID：14760705
> 
> 赞同：0
> 
> 时间：2013-02-07T20:48:21.373
> 
> 标签：jquery

我有一个正在运行的脚本，可以根据选择的下拉选项显示/隐藏 div。

在用户在下拉列表中进行选择之前，我需要隐藏除第一个 div 之外的所有 div。

根据下面的脚本，如何从除第一个选项之外的所有选项中获取值，以便隐藏除第一个 div 之外的所有 div？

```
$('.dd-show-hide').find('option:not(:first)').val().hide();

$('.dd-show-hide').change(function(){
   $(this).find('option').each(function(){
      $('#' + this.value).hide();
    });
    $('#' + this.value).show();
}); 
```

```
<select class="dd-show-hide">
    <option>Choose</option>
    <option value="div1">Show Div 1</option>
    <option value="div2">Show Div 2</option>
</select>

<div  id="div1" class="drop-down-show-hide">div 1</div>
<div  id="div2" class="drop-down-show-hide">div 2</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:52:11.630

Well you can use `first` selector and `not` method:

```
$('.drop-down-show-hide').not(':first').hide(); 
```

Or trigger the change event, there is no need to use the `each` method.

```
var $divs = $('.drop-down-show-hide');
$('.dd-show-hide').change(function(){
   $divs.hide().filter('[id='+this.value+']').show();
}).change(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:53:23.247

一般来说，当我必须在JQuery中“隐藏除*_*之外的所有东西”时，我发现将它们全部隐藏起来更方便，然后显示我想要的那个。这隐藏了除第一个之外的所有内容：

```
$('.drop-down-show-hide').hide().first().show(); 
```

这将根据当前选择的选项隐藏：

```
$('.drop-down-show-hide').hide().filter('#' + $('.dd-show-hide').val()).show(); 
```

这基于第一个选项隐藏（即使不一定是现在选择的那个）

```
$('.drop-down-show-hide').hide().filter('#'+$('.dd-show-hide option:first').val()).show() 
```

您无需一一浏览这些 ID。要仅显示在下拉列表中选择的一项并隐藏其他项：

```
$('.dd-show-hide').change(function() {
   $('.drop-down-show-hide').hide().filter('#' + this.value).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:53:43.687

尝试这个。你几乎拥有它：

```
$('.dd-show-hide').find('option').each(function(){
      if ('div1' != this.value) {
          $('#' + this.value).hide();
      } else {
          $('#' + this.value).show();
      }
 }); 
```

# functional-programming - 如何使用 OCaml 中另一个 .ml 文件中定义的类型？

> ID：14760708
> 
> 赞同：0
> 
> 时间：2013-02-07T20:48:36.773
> 
> 标签：functional-programming, ocaml

假设我有两个`.ml`文件：`A.ml`和`B.ml`.

* * *

中`A.ml`，我有

```
type my_type = {id_ary : int array; sz_ary : int array};; 
```

* * *

中`B.ml`，我有

```
let test_my_type {id_ary;_} = id_ary.(0) <- 10;; 
```

* * *

然后我像这样编译它们

```
ocamlc -linkpkg A.ml B.ml -o C 
```

但是编译器给出了这样的错误：`Error: Unbound record field label id_ary`

似乎`B`不能使用`my_type`from的类型`A`。

**我该怎么办？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:21:44.250

值得注意的是，您可以只使用`A.id_ary`in `B.ml`。使用`open`是避免重复的方便`A.`。然而，`open`这也是一件相当激烈的事情，因为它合并了两个命名空间。我个人尽量避免`open`在我的项目中使用除了一些非常基本的模块。

最近的 OCaml 版本有一个带有两个符号的“本地化”打开：

```
# String.(length "abc");;
- : int = 3
# let open String in length "abc";;
- : int = 3 
```

这些都不那么激烈，我更喜欢它们而不是全局`open`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:07:11.763

添加`open A`到 B.ml 的开头

也只是提醒一下，使用以下方法构建代码会更方便：（`ocamlbuild B.native` 但是，您必须清理代码目录）

# mysql - mysql在两个带日期的表之间找到最小值

> ID：14760715
> 
> 赞同：0
> 
> 时间：2013-02-07T20:48:47.337
> 
> 标签：mysql

我有两张桌子 tb1 和 tb2

```
tb1
-----
tb1Id

tb2
-----
tb2Id | tb1Id | dateTB2提交 | 时间输入
```

加入 tb1 时如何从各个行中找到最低日期。例如：

```
SELECT tb1.tb1id, 
       tb2.datetb2submitted, 
       tb2.timein 
FROM   tb1, 
       tb2 
WHERE  tb1.tb1id = tb2.tb1id 

+-------------+----------------------+----------+
| tb1.tb1Id   | tb2.dateTB2Submitted | timeIn   |
+-------------+----------------------+----------+
|           1 | 2011-04-02           | 11:00:00     
|           1 | 2011-04-02           | 10:30:00      <--i want this
|           2 | 2011-04-29           | 12:30:00     
|           2 | 2011-04-29           | 10:30:00      <--i want this 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:51:22.700

Try this:

```
SELECT tb1.tb1id, 
       tb2.datetb2submitted, 
       Min(tb2.timein) AS timeIn 
FROM   tb1 
       INNER JOIN tb2 
               ON tb1.tb1id = tb2.tb1id 
GROUP  BY tb1.tb1id, 
          tb2.datetb2submitted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:08:12.260

尝试这个

```
SELECT tb2.tb2id, tb2.tb1id, tb2.datetb2submitted, Min(tb2.timein) AS timeIn
FROM tb2 JOIN 
(
  SELECT tb1.tb1id, MIN(tb2.datetb2submitted) AS datetb2submitted
  FROM tb1 INNER JOIN tb2 ON tb1.tb1id = tb2.tb1id
  GROUP  BY tb1.tb1id
) AS lowestdate 
ON lowestdate.tb1id = tb2.tb1id AND lowestdate.datetb2submitted = tb2.datetb2submitted
GROUP BY tb2.tb1id
; 
```

# php - facebook oauth 无法注销不接受权限的用户

> ID：14760718
> 
> 赞同：5
> 
> 时间：2013-02-07T20:48:54.300
> 
> 标签：php, javascript, facebook, oauth, facebook-oauth

我有一个在我餐厅的信息亭中运行的 facebook 应用程序，它允许用户登记入住。这很好用，如果他们登录并接受所需的权限，那么它就可以让他们在完成后注销而不会出现任何问题。

但是，如果他们不接受这些权限，则无法将其注销。我已经尝试了我能想到的所有内容以及我在 stackoverflow 上可以找到的所有帖子。

如果 auth 没有用户的许可，我该如何注销客户？

我已经使用错误报告向 facebook 报告了这一点，他们已经表示他们正在调查它。只是希望这里的一位天才有一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:23:26.083

您应该使用图形 api 中的权限连接来确定用户是否已提供所需的某些权限。如果他们没有，您可以使用相同的条件来呈现登录按钮或不添加范围的流程。

示例：包括当前 php sdk 和当前带有登录按钮 html5 的 js sdk。

*在示例中，我使用 manage_pages 作为所需的权限。*

**PHP SDK 3.2.2 初始化。**

```
 require '../../src/facebook.php';
 $facebook = new Facebook(array(
   'appId'  => '1111111111111111',
   'secret' => 'xxxxxxxxxxxxxxxx',
   'cookie' => true, // enable optional cookie support
   ));
try { $user = $facebook->getUser(); } catch (FacebookApiException $e) {  }; 
```

**PHP代码：**

```
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_accounts = $facebook->api('/me/?fields=permissions');
  } catch (FacebookApiException $e) {
   error_log($e);
   $user = null;
  }
} 
```

* * *

**PHP条件和HTML5登录按钮**

```
 <div id="fb-root"></div>
        <script>// current js sdk</script>
<?php if($user && !$user_accounts[permissions][data][0][manage_pages]): ?>
// we know we have a user but no perms so lets render button with out scope.
    <div class="fb-login-button" data-autologoutlink="true" data-show-faces="false" data-width="200" data-max-rows="1" data-size="large"></div>
<?php elseif($user && $user_accounts[permissions][data][0][manage_pages]): ?>
// we know we have a user and they have given perms so render button with scope.
    <div class="fb-login-button" data-autologoutlink="true" data-show-faces="false" data-width="200" data-max-rows="1" data-size="large" data-scope="manage_pages"></div>
<?php elseif(!$user): ?>
// we have no user, flow as new user... or provide 2 buttons lol.
    <div class="fb-login-button" data-autologoutlink="true" data-show-faces="false" data-width="200" data-max-rows="1" data-size="large" data-scope="manage_pages"></div>
<?php endif; ?> 
```

# asp.net - 不完全理解捆绑，这里有什么问题？

> ID：14760720
> 
> 赞同：1
> 
> 时间：2013-02-07T20:49:04.940
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, asp.net-mvc-4, bundling-and-minification

错误：0x800a138f - Microsoft JScript 运行时错误：无法获取属性“unobtrusive”的值：对象为空或未定义

底部列出的 Index.cshtml 是我出现问题的地方。

BundleConfig.cs：

```
using System.Web;
using System.Web.Optimization;

namespace MyWebMVC
{
   public class BundleConfig
   {
      public static void RegisterBundles(BundleCollection bundles)
      {
          bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                      "~/Scripts/jquery-{version}.js"));

          bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                      "~/Scripts/jquery-ui-{version}.js"));

          bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                      "~/Scripts/jquery.validate*",
                      "~/Scripts/jquery.unobtrusive*"
                      ));

          bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                      "~/Scripts/modernizr-*"));

          bundles.Add(new StyleBundle("~/Content/css").Include(
                      "~/Content/site.css"));

          bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                      "~/Content/themes/base/jquery.ui.core.css",
                      "~/Content/themes/base/jquery.ui.resizable.css",
                      "~/Content/themes/base/jquery.ui.selectable.css",
                      "~/Content/themes/base/jquery.ui.accordion.css",
                      "~/Content/themes/base/jquery.ui.autocomplete.css",
                      "~/Content/themes/base/jquery.ui.button.css",
                      "~/Content/themes/base/jquery.ui.dialog.css",
                      "~/Content/themes/base/jquery.ui.slider.css",
                      "~/Content/themes/base/jquery.ui.tabs.css",
                      "~/Content/themes/base/jquery.ui.datepicker.css",
                      "~/Content/themes/base/jquery.ui.progressbar.css",
                      "~/Content/themes/base/jquery.ui.theme.css"));
      }
   }
} 
```

_rootLayout.cshtml：

```
<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")" type="text/javascript"></script>

@Html.DevExpress().GetStyleSheets( 
    new StyleSheet { ExtensionSuite = ExtensionSuite.NavigationAndLayout }, 
    new StyleSheet { ExtensionSuite = ExtensionSuite.Editors }, 
    new StyleSheet { ExtensionSuite = ExtensionSuite.HtmlEditor }, 
    new StyleSheet { ExtensionSuite = ExtensionSuite.GridView }, 
    new StyleSheet { ExtensionSuite = ExtensionSuite.PivotGrid },
    new StyleSheet { ExtensionSuite = ExtensionSuite.Chart },
    new StyleSheet { ExtensionSuite = ExtensionSuite.Report },
    new StyleSheet { ExtensionSuite = ExtensionSuite.Scheduler }
)
@Html.DevExpress().GetScripts( 
    new Script { ExtensionSuite = ExtensionSuite.NavigationAndLayout }, 
    new Script { ExtensionSuite = ExtensionSuite.HtmlEditor }, 
    new Script { ExtensionSuite = ExtensionSuite.GridView }, 
    new Script { ExtensionSuite = ExtensionSuite.PivotGrid },
    new Script { ExtensionSuite = ExtensionSuite.Editors }, 
    new Script { ExtensionSuite = ExtensionSuite.Chart },
    new Script { ExtensionSuite = ExtensionSuite.Report },
    new Script { ExtensionSuite = ExtensionSuite.Scheduler }
)
</head>
<body>
    @Html.DevExpress().Splitter(settings => {
        settings.Name = "MainSplitter";
        settings.AllowResize = false;
        settings.Orientation = System.Web.UI.WebControls.Orientation.Vertical;
        settings.FullscreenMode = true;
        settings.SeparatorVisible = false;
        settings.Styles.Pane.Border.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(0);
        settings.Styles.Pane.Paddings.Padding =    System.Web.UI.WebControls.Unit.Pixel(0);

    settings.Panes.Add(pane => {
        pane.Name = "Header";
        //pane.ScrollBars = System.Web.UI.WebControls.ScrollBars.Auto;
        pane.Size = System.Web.UI.WebControls.Unit.Pixel(140);
        pane.MinSize = System.Web.UI.WebControls.Unit.Pixel(83);
        pane.PaneStyle.BorderBottom.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(1);
        pane.PaneStyle.CssClass = "headerPane";
        pane.SetContent(() => {
            Html.RenderPartial("HeaderPartialView");
        });
    });

    settings.Panes.Add(pane => {
        pane.Name = "Content";
        pane.PaneStyle.CssClass = "mainContentPane";
        pane.MinSize = System.Web.UI.WebControls.Unit.Pixel(375);
        pane.PaneStyle.BackColor = System.Drawing.Color.White;
        pane.PaneStyle.BorderBottom.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(1);
        pane.SetContent(RenderBody().ToHtmlString());
        pane.ScrollBars = System.Web.UI.WebControls.ScrollBars.Auto;
    });

    settings.Panes.Add(pane => {
        pane.Name = "Footer";
        pane.Size = System.Web.UI.WebControls.Unit.Pixel(25);
        pane.PaneStyle.CssClass = "footerPane";
        pane.SetContent(() => {
            Html.RenderPartial("FooterPartialView");
        });
    });

    Scripts.Render("~/bundles/jqueryval");
    Scripts.Render("~/bundles/jquery"); 
}).GetHtml()
</body>
</html> 
```

_mainLayout.cshtml：

```
@{ Layout = "~/Views/Shared/_rootLayout.cshtml"; }

@Html.DevExpress().Splitter(settings => {
    settings.Name = "ContentSplitter";
    settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
    settings.Height = System.Web.UI.WebControls.Unit.Percentage(100);
    settings.Styles.Pane.Paddings.Padding = System.Web.UI.WebControls.Unit.Pixel(0);
    settings.Styles.Pane.Border.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(0);
    settings.Panes.Add(subpane => {
        subpane.Name = "ContentCenter";
        subpane.PaneStyle.CssClass = "contentPane";
        subpane.Separator.Visible = DevExpress.Utils.DefaultBoolean.True;
        subpane.ScrollBars = System.Web.UI.WebControls.ScrollBars.Auto;       
        subpane.Separator.SeparatorStyle.Border.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(1);
        subpane.Separator.SeparatorStyle.BorderTop.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(0);
        subpane.SetContent(RenderBody().ToHtmlString());
    });

}).GetHtml() 
```

Index.cshtml：（**这是我的脚本出错的地方）**

```
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/Docking/CSS/Widgets.css")" />

<script type="text/javascript">
    function displaySuccess(result) {
        popup.Show();
    }

    function PrepareValidationScripts(form) {
        if (!form)
            return;
        if (form.attr("data-executed"))
            return;
        $.validator.unobtrusive.parse(form); // <----- this is where I get the error
        form.attr("data-executed", "true");
    }
</script>

@{
    //this is where I render my partial views
    <snip.....>
    <snip.....>
    <snip.....>
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:03:07.967

在您的布局中，您应该首先包含 jQuery，然后包含 jQueryval：

```
Scripts.Render("~/bundles/jquery"); 
Scripts.Render("~/bundles/jqueryval"); 
```

这是因为 jQuery.validate 插件依赖于 jQuery，并且包含脚本的顺序很重要。

另外，我建议您将所有自定义脚本放在一个专门的部分中，该部分位于其他主要脚本**之后：**

```
Scripts.Render("~/bundles/jquery"); 
Scripts.Render("~/bundles/jqueryval");
RenderSection("Scripts", required: false) 
```

然后在您的视图中将所有脚本放在此部分中，以便保留顺序：

```
@section Scripts {
    <script type="text/javascript">
        function displaySuccess(result) {
            popup.Show();
        }

        function PrepareValidationScripts(form) {
            if (!form)
                return;
            if (form.attr("data-executed"))
                return;
            $.validator.unobtrusive.parse(form);
            form.attr("data-executed", "true");
        }
    </script>
}

@{
    //this is where I render my partial views
    <snip.....>
    <snip.....>
    <snip.....>
 } 
```

当然，您的 CSS 样式也是如此。您应该将它们放在文档中专门的部分中`<head>`。

# excel - 在外部文件中制作excel工作表镜像工作表

> ID：14760722
> 
> 赞同：0
> 
> 时间：2013-02-07T20:49:09.040
> 
> 标签：excel, vba, worksheet

如何在我的 excel 文件中制作工作表，准确地反映不同（已关闭）工作表的工作表。

基本上，我有大约 5 个包含大量数据的文件，这些文件被合并到一个包含重要信息的仪表板中。然后我想创建一个文件（我们称之为报告），其中包含来自这些不同文件中的每一个的“主”表。

理想情况下，报告文件不必更改，当它打开时，它已经包含所有需要的数据。

注意：文档中的合并单元格处于可变位置。

对评论 #1 的回应：

通过已经存在，例如，您可以执行引用其他工作簿的 vlookup .. 当您打开文件时，这些 vlookup 的值将是正确的。首先，我想我可以说单元格 A1 是文件 1 = 文件 2 中的单元格 A1，但是合并的单元格将其丢弃，因为它不会创建合并的单元格来匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:44:11.243

我发现了以下内容，可以在 Excel VBA 中完成。1）打开合并的工作簿 2）假设您需要合并的所有文件都在给定目录中，您可以获得所有这些文件的列表。2.1）遍历文件列表并一个接一个地打开它们 2.2）当文件打开时，您可能希望在将工作表移动到“报告”文件之前更改工作表的名称。2.3）关闭每个文件而不保存它们。

# android - 在 Google Maps v2 Android 上突出显示指定路线

> ID：14760723
> 
> 赞同：8
> 
> 时间：2013-02-07T20:49:09.103
> 
> 标签：android, highlight, routes, google-maps-android-api-2, directions

对，所以我目前在我的应用程序中使用 Google Directions API 来检索两个位置之间的路线。

当我发送路线指示请求时，我会在 JSON 中检索有关路线的许多详细信息，包括沿路线的每条道路的名称、它们对应的起点和终点经纬度坐标以及它们的折线值。

例如：如果我在两条道路之间发送请求[http://maps.googleapis.com/maps/api/directions/json?origin=redfern+ave,+dublin&destination=limetree+ave,+dublin&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=redfern+ave,+dublin&destination=limetree+ave,+dublin&sensor=false) ，我会得到跟随 JSON 响应（沿路线的一条道路的输出）。

```
 {
                     "distance" : {
                        "text" : "0.2 km",
                        "value" : 203
                     },
                     "duration" : {
                        "text" : "1 min",
                        "value" : 18
                     },
                     "end_location" : {
                        "lat" : 53.435250,
                        "lng" : -6.132140000000001
                     },
                     "html_instructions" : "Head \u003cb\u003eeast\u003c/b\u003e on \u003cb\u003eRedfern Ave.\u003c/b\u003e toward \u003cb\u003eMartello Court\u003c/b\u003e",
                     **"polyline" : {
                        "points" : "woceIvgmd@O}DOkDQqF"**
                     }, 
```

到目前为止，我的应用程序解析了这些信息，并在列表视图中简单地列出了道路和方向，如下所示：

![在此处输入图像描述](../Images/125664912cf5a2124543e421bbc2287f.png)

我想做的是在地图上突出显示从 A 到 B 的整个路线，但是我在网上找不到任何有用的关于如何在新的 Google Maps API v2 上执行此操作的信息。我看到在 Google Maps v2 上使用折线而不是叠加来绘制线条，但是据我所知，它们只绘制对我没用的直线。是否有使用我掌握的信息（道路名称、起点和终点经纬度坐标、折线点）突出显示路线？任何帮助表示赞赏。

另外，我看到响应中有一个“折线”值，这可能很有用，但我不知道如何解析或使用这些信息。有谁知道我如何理解这个值来绘制折线？

```
**"polyline" : {
             "points" : "woceIvgmd@O}DOkDQqF"** 
```

编辑：我的解决方案代码在下面的答案中提供。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-08T03:42:59.297

经过大量的试验和错误，我终于设法让它工作了！它现在在地图上完全突出显示从 A 到 B 的指定路线（如下面的屏幕截图所示）。我还为将来可能需要它的任何人提供了我的代码。

![在此处输入图像描述](../Images/da2e0570444ed024e07fb04bb339f456.png)

```
public class PolyMap extends Activity {
        ProgressDialog pDialog;
        GoogleMap map;
        List<LatLng> polyz;
        JSONArray array;
        static final LatLng DUBLIN = new LatLng(53.344103999999990000,
                -6.267493699999932000);

        @SuppressLint("NewApi")
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.map_layout);
            map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            map.moveCamera(CameraUpdateFactory.newLatLngZoom(DUBLIN, 15));
            map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
            new GetDirection().execute();
        }

        class GetDirection extends AsyncTask<String, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(PolyMap.this);
                pDialog.setMessage("Loading route. Please wait...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }

            protected String doInBackground(String... args) {
                Intent i = getIntent();
                String startLocation = i.getStringExtra("startLoc");
                String endLocation = i.getStringExtra("endLoc");
                            startLocation = startLocation.replace(" ", "+");
                    endLocation = endLocation.replace(" ", "+");;
                String stringUrl = "http://maps.googleapis.com/maps/api/directions/json?origin=" + startLocation + ",+dublin&destination=" + endLocation + ",+dublin&sensor=false";
                StringBuilder response = new StringBuilder();
                try {
                    URL url = new URL(stringUrl);
                    HttpURLConnection httpconn = (HttpURLConnection) url
                            .openConnection();
                    if (httpconn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                        BufferedReader input = new BufferedReader(
                                new InputStreamReader(httpconn.getInputStream()),
                                8192);
                        String strLine = null;

                        while ((strLine = input.readLine()) != null) {
                            response.append(strLine);
                        }
                        input.close();
                    }

                    String jsonOutput = response.toString();

                    JSONObject jsonObject = new JSONObject(jsonOutput);

                    // routesArray contains ALL routes
                    JSONArray routesArray = jsonObject.getJSONArray("routes");
                    // Grab the first route
                    JSONObject route = routesArray.getJSONObject(0);

                    JSONObject poly = route.getJSONObject("overview_polyline");
                    String polyline = poly.getString("points");
                    polyz = decodePoly(polyline);

                } catch (Exception e) {

                }

                return null;

            }

            protected void onPostExecute(String file_url) {

                for (int i = 0; i < polyz.size() - 1; i++) {
                    LatLng src = polyz.get(i);
                    LatLng dest = polyz.get(i + 1);
                    Polyline line = map.addPolyline(new PolylineOptions()
                            .add(new LatLng(src.latitude, src.longitude),
                                    new LatLng(dest.latitude,                dest.longitude))
                            .width(2).color(Color.RED).geodesic(true));

                }
                pDialog.dismiss();

            }
        }

        /* Method to decode polyline points */
        private List<LatLng> decodePoly(String encoded) {

            List<LatLng> poly = new ArrayList<LatLng>();
            int index = 0, len = encoded.length();
            int lat = 0, lng = 0;

            while (index < len) {
                int b, shift = 0, result = 0;
                do {
                    b = encoded.charAt(index++) - 63;
                    result |= (b & 0x1f) << shift;
                    shift += 5;
                } while (b >= 0x20);
                int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                lat += dlat;

                shift = 0;
                result = 0;
                do {
                    b = encoded.charAt(index++) - 63;
                    result |= (b & 0x1f) << shift;
                    shift += 5;
                } while (b >= 0x20);
                int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                lng += dlng;

                LatLng p = new LatLng((((double) lat / 1E5)),
                        (((double) lng / 1E5)));
                poly.add(p);
            }

            return poly;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:05:58.667

With Android maps api 2 indeed you need to use `Polyline` class to draw the route on a map (at least it is an easiest way :) ). What you need to do - is to supply list of points along your route.

As for highlighting the active route - there is a handy interface in `Polyline` class `setColor`, so you can set whatever color you want to the active route (including an alpha channel)

```
Polyline line1 = map.addPolyline(new PolylineOptions()
 .add(new LatLng(51.5, -0.1), new LatLng(40.7, -74.0))
 .width(5)
 .color(0xFFFF0000)); //non transparent red

Polyline line2 = map.addPolyline(new PolylineOptions()
 .add(new LatLng(51.5, -0.1), new LatLng(40.8, -74.2))
 .width(5)
 .color(0x7F0000FF)); //semi-transparent blue 
```

Please note you are free to change polyline color anytime you want (f.i. on user click, or something)

As for JSON response from google - route points are encoded, so you can refer to [this question](https://stackoverflow.com/questions/6708408/map-view-draw-directions-using-google-directions-api-decoding-polylines) to understand how to decode it

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-05T07:07:53.103

有一个简单的解决方案

添加库

> 编译'com.google.maps.android:android-maps-utils:0.4+'

**来自** [https://developers.google.com/maps/documentation/android-api/utility/setup的参考](https://developers.google.com/maps/documentation/android-api/utility/setup)

```
//Getting the points String from response of NavigationAPI call
String polyz=routeSteps.get(0).getOverview_polyline().getPoints();
//Decoding the LatLng Points using PolyUtil Class used from above Library
List<LatLng> points=PolyUtil.decode(polyz);
polyline.addAll(points);
googleMap.addPolyline(polyline); 
```

# jquery-mobile - 如何将 Knockout 的点击绑定与 jQuery Mobile 的 vclick 事件一起使用？

> ID：14760724
> 
> 赞同：1
> 
> 时间：2013-02-07T20:49:14.097
> 
> 标签：jquery-mobile, knockout.js

在我的 jQuery Mobile + Knockout.js 应用程序中，所有点击在合成的“点击”事件触发之前都有[300 毫秒的延迟。](http://view.jquerymobile.com/master/demos/faq/how-do-i-use-touch-mouse-events.php)

是否尝试使用 jQM 的“vclick”事件来解决这个问题？如果是这样，我怎样才能通过淘汰赛点击绑定来实现呢？我应该改用“点击”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:33:49.403

就像[fab](https://stackoverflow.com/users/664108/fab)说的那样，做到这一点的方法是使用淘汰赛的`event`绑定：

```
<!-- ko foreach: widgets -->
<li>
    <a data-bind="event: { vclick: $root.clickWidget }">
        <b data-bind="text: $data.name"></b>
    </a>
</li>
<!-- /ko --> 
```

谢谢！

# php - 准备好的语句，绑定错误的数据不会抛出错误

> ID：14760728
> 
> 赞同：1
> 
> 时间：2013-02-07T20:49:20.290
> 
> 标签：php, mysql, mysqli, prepared-statement

为什么绑定到无效类型的参数时，我没有收到错误？例如：

```
$mysqli = new mysqli(HOST, USERNAME, PASSWORD, SCHEMA);
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: " . $mysqli->connect_error;
}

$stmt = $mysqli->prepare("update app_site_group set name_eng=?, name_fra=? where app_site_group_id=?");

$one = "one";
$two = "two";
$three = "a";
$stmt->bind_param('ssi',$one,$two,$three);

$stmt->execute(); 
```

当需要整数时，第三个参数作为字符串传递。它不会引发错误（除了受影响的 0 行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:54:50.967

`i`您作为整数提供的类型是 MySQLi 将值传递给查询的类型。但是，API 本身实际上并不关心它获取的值是字符串还是整数。PHP/MySQLi 将确保在*将*字符串传递给 RDBMS 时将其转换为整数。

因此，看起来像数字的字符串将被转换为它们的等效整数。对于像 your 这样的非数字字符串`'a'`，结果将是 integer `0`，它可能与数据中的行匹配，也可能不匹配。

```
echo (int)'a';
// 0 
```

所以在你的情况下，执行的查询看起来像

```
update app_site_group set name_eng = 'one', name_fra = 'two'  where app_site_group_id = 0 
```

如果你有行 where `app_site_group_id = 0`，那么那些会被匹配。因此，除了使用准备好的语句之外，重要的是始终*验证*参数的内容，以确保它们包含合理的值。

# r - 将一列拆分为多列

> ID：14760730
> 
> 赞同：7
> 
> 时间：2013-02-07T20:49:22.333
> 
> 标签：r

我有一个巨大的数据集，其中有一列包括每个主题（行）的多个值。这是一个简化的示例数据框：

```
data <- data.frame(subject = c(1:8), sex = c(1, 2, 2, 1, 2, 1, 1, 2), 
              age = c(35, 29, 31, 46, 64, 57, 49, 58), 
              v1 = c("2", "0", "3,5", "2 1", "A,4", "B,1,C", "A and B,3", "5, 6 A or C"))

> data
  subject sex age          v1
1       1   1  35           2
2       2   2  29           0
3       3   2  31         3,5  # separated by a comma
4       4   1  46         2 1  # separated by a blank space
5       5   2  64         A,4
6       6   1  57       B,1,C
7       7   1  49   A and B,3
8       8   2  58 5, 6 A or C 
```

我首先要删除第四列 ( ) 中的字母 ( `A`, `B`, `A and B`, ...) `v1`，然后将第四列拆分为多个列，如下所示：

```
 subject sex age x1 x2 x3 x4 x5 x6
1       1   1  35  0  1  0  0  0  0        
2       2   2  29  0  0  0  0  0  0
3       3   2  31  0  0  1  0  1  0  
4       4   1  46  1  1  0  0  0  0
5       5   2  64  0  0  0  1  0  0
6       6   1  57  1  0  0  0  0  0
7       7   1  49  0  0  1  0  0  0
8       8   2  58  0  0  0  0  1  1 
```

其中第一个主题在 x2 处取 1，因为它在原始数据集中的 v1 处取 2，第三个主题在 x3 和 x5 处取 1，因为它在原始数据集中的 v1 处取 3 和 5，依此类推。

对于这个问题，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:04:51.873

您可以将此结果 cbind 到 data[-4] 并获得所需的内容：

```
 0+t(sapply(as.character(data$v1), function(line) 
        sapply(1:6, function(x) x %in% unlist(strsplit(line, split="\\s|\\,"))) ))
#----------------
            [,1] [,2] [,3] [,4] [,5] [,6]
2              0    1    0    0    0    0
0              0    0    0    0    0    0
3,5            0    0    1    0    1    0
2 1            1    1    0    0    0    0
A,4            0    0    0    1    0    0
B,1,C          1    0    0    0    0    0
A and B,3      0    0    1    0    0    0
5, 6 A or C    0    0    0    0    1    1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T21:05:52.360

One solution:

```
r <- sapply(strsplit(as.character(dt$v1), "[^0-9]+"), as.numeric)
m <- as.data.frame(t(sapply(r, function(x) {
        y <- rep(0, 6)
        y[x[!is.na(x)]] <- 1
        y
     })))
data <- cbind(data[, c("subject", "sex", "age")], m)

#   subject sex age V1 V2 V3 V4 V5 V6
# 1       1   1  35  0  1  0  0  0  0
# 2       2   2  29  0  0  0  0  0  0
# 3       3   2  31  0  0  1  0  1  0
# 4       4   1  46  1  1  0  0  0  0
# 5       5   2  64  0  0  0  1  0  0
# 6       6   1  57  1  0  0  0  0  0
# 7       7   1  49  0  0  1  0  0  0
# 8       8   2  58  0  0  0  0  1  1 
```

Following DWin's awesome solution, `m` could be modified as:

```
m <- as.data.frame(t(sapply(r, function(x) {
        0 + 1:6 %in% x[!is.na(x)]
     }))) 
```

# ios - iOS Zbar SDK - 有没有办法在用户选择的时刻捕捉图像？

> ID：14760735
> 
> 赞同：0
> 
> 时间：2013-02-07T20:49:58.213
> 
> 标签：ios, zbar-sdk

有没有办法用 Zbar 库拍照？

我想让用户可以在显示已启动的 ZBarReaderView 实例时拍照。

PSDon 不需要 Zbar 库从中读取符号的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:43:36.550

```
ZBarReaderViewController 

- (void) takePicture
Capture the next available frame and send it over the usual delegate path. 
```

# c# - Websockets 上的无序数据

> ID：14760736
> 
> 赞同：3
> 
> 时间：2013-02-07T20:49:59.117
> 
> 标签：c#, javascript, websocket, highcharts

我一直在努力学习**通过 websockets “实时”传递和显示数据**。在这种情况下，实时仅意味着每**0.03 到 1 秒**从传感器（具有图像处理功能的相机）读取数据。每个数据点都由一个**时间和一个值 (t,v)**组成，它们被编码为双精度数（尽管在这种情况下时间总是一个整数，但我不假设它会是）。

服务器端使用[**Alchemy Websockets**](https://github.com/Olivine-Labs/Alchemy-Websockets)实现 ( **C#** )，因为我发现它很容易理解/修改以用于我的目的。

我正在利用[**此处**](http://www.tutorialspoint.com/html5/html5_websocket.htm) 和[**此处**](https://stackoverflow.com/questions/10200910/create-hello-wold-websocket-example)找到的 websockets**示例**以及 Alchemy 中包含的示例。[](http://www.tutorialspoint.com/html5/html5_websocket.htm)**[](https://stackoverflow.com/questions/10200910/create-hello-wold-websocket-example)**

 ****我正在使用[**HighCharts**](http://www.highcharts.com/) [“实时”显示数据](http://goo.gl/xjNs1)，但我也将其**打印到 div**以进行调试（独立示例，因此它们不会相互干扰）。

这么多已经很好用了，但是当我发送数据太快时会发生一个明显的问题（要清楚的是，**每隔一两秒发送一个点的数据会产生一个**看起来没有任何数据的漂亮图表问题 - 我将炼金术服务器称为“发送”功能的速度越快，问题就越明显）。

数据似乎以**错误的顺序**出现，导致有趣的“错位”效应。

![损坏的数据点](../Images/4fbb9c8b2d0bedd6ed26b4903229c838.png)

我将开始深入研究服务器端缓冲区中包含的数据包顺序（当新用户连接并且它已经在运行时，服务器被指示**发送一定数量的“历史”**点 - 这会导致一个明显的问题，例如上面显示的那个）以及客户端通过查看时间戳来接收订单。

该错误是不一致的，因为**每次我重新加载页面时都会导致不同的“损坏”数据集**。这让我怀疑通过 websockets 进行的通信是负责任的，或者是涉及炼金术服务器的事情。

如有必要，我将附上完整的代码，但现在它相当混乱，所以我更多地寻找故障排除的想法。

我已经收集到这不是 Web 套接字的预期行为，因为它是基于 TCP 构建的。

有什么**建议/想法**吗？

谢谢！

编辑：我进行了另一项测试，以检查每次刷新页面时有多少数据点出现故障。数字如下：

1 2 3 25 6 5 10 11 96 2 8

非常不一致（从不为 0）。当然有趣！

此结果是通过排除图表组件并仅使用 websockets 和数组来存储数据而得出的。

更新：

我决定开始分析事物进入的顺序，它似乎使用相同的数据集随机接收乱序点。我实现了一个“插入”功能，它将考虑乱序数据包。结果（加上一点主题更改）看起来不错！

![是的，我知道不是](../Images/e57b16a0f0f3596b59543afaf9570886.png)

悬而未决的问题仍然存在：**websocket 是否可以乱序传递信息？**或者我在服务器端（或 Alchemy）的实现是否有问题。有时间我会进一步调查。

# **解决方案！**

我想到了！经过大量测试后，我意识到我的 Connection 对象（负责查看数据集的新数据并根据连接的配置方式适当地发送它）是使用 Timer 对象实现的。这是我从一个例子中得到的（通常我只是使用 Thread 对象来处理大多数异步的事情）。

随着 Timer 对象的加速，它开始与之前对其 Tick 函数的调用异步执行。这意味着非常偶然地，对它的 Tick 函数的一次调用会比另一个调用快一点（由于 Alchemy Send 函数中的延迟）。这会导致轻微的乱序问题。

**我将通信循环的实现从[Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)对象切换到[Thread](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)对象，从而强制同步，并且乱序数据包消失了！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:18:55.193

Websockets使用TCP，TCP保证数据按顺序传递。

我希望浏览器也能按顺序触发 websocket 消息*事件*。在我的测试中，情况似乎如此。

使用这个简单的 Node 应用程序进行测试：

```
var sio = require('socket.io')
    , http = require('http')
    , express = require('express')
    , app = express()
    , srv = http.createServer(app)
    , io = sio.listen(srv)
    , fs = require('fs')
    , idx = fs.readFileSync('index.html').toString()
    ;

app.get('/', function(req, res) {
    res.send(idx);
});

var i = 0;
setInterval(function() {
    io.sockets.emit('count', i++);
}, 1);

srv.listen(888); 
```

这只是尽可能快地发送 websocket 消息，每个消息都会增加一个数字。客户端：

```
<script src="/socket.io/socket.io.js"></script>
<script>
var last = 0;
var socket = io.connect('/');
socket.on('count', function(d) {
    if (d-1 != last) console.warn('out of order!', last, d);
    last = d;
});
</script> 
```

如果收到的消息包含的数字不比前一条消息多一，则引发控制台警告。

在 Chrome 和 Firefox 中，我看到零乱序消息。

我还尝试在消息接收事件 () 中阻塞一段时间，`for (var i = 0; i < 1000000; i++) { }`以模拟会导致消息排队的工作。消息事件仍然按顺序触发。

换句话说，**它是您设置中的其他内容**。最有可能的是，Alchemy 服务器实际上以不同的顺序发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:11:58.313

**当任务同步时，不要使用**像[**Timer**](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)这样具有异步回调的对象。**使用**[**线程**](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)并以这种方式运行通信循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T10:02:16.600

不知道问题是什么时候发布的。我也有类似的问题。我用Alchemy Client 发送小数据，则没有问题。聊天服务有很多例子。但是当我发送一些超过 4 KB（不精确）的文件时，就会出现问题。我试图找出发生了什么。我写了一个程序，由 Alchemy 客户端从 0-7000 发送数字，并从 接收`UserContext.DataFrame(onreceive)`，会发生在 508 左右位置`DataFrame.ToString`会得到额外`"\0\0\0\0"`的情况。然后，在这个位置之后，数据排序将是错误的。我使用了 nuget 的 2.2.1。我在 GiHub 上阅读了 2.0 版。源代码不可用。所以，对旧的并没有参考价值。****

# ruby-on-rails - 如何使用嵌套和单一资源呈现表单

> ID：14760740
> 
> 赞同：1
> 
> 时间：2013-02-07T20:50:21.937
> 
> 标签：ruby-on-rails, helper, renderpartial, nested-resources

我有这条路线

```
resources :childs do
  resources :draws
end
resources :draws 
```

如何编写一个 _form.htm.erb 来添加和编辑绘图？

我的意思是，从`new_draw_path`我将使用`form_for(@draw)`然后使用 f.select 助手选择孩子

从`new_child_draw_path`我会使用`form_for([@child,@draw])`从参数中选择孩子

我如何将这两种方法结合在一个视图或助手中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:05:49.480

`url_for`忽略数组中的 nils，因此`[@variable_that_is_nil, @draw]`与 相同`[@draw]`或只是`@draw`. 所以`[@child, @draw]`在`form_for`. 如果未声明 @child，您只需在表单中添加一些条件即可选择子列表（可能会令人困惑，但我指的是要从中选择的子 ID 列表）。

# javascript - 无法使用 javascript 对 window.opener 中的对象数组进行排序

> ID：14760742
> 
> 赞同：4
> 
> 时间：2013-02-07T20:50:39.360
> 
> 标签：javascript, sorting

从我的第一个窗口（我将其称为窗口 1）我正在使用打开第二个窗口（窗口 2）

```
 var w = window.open("", ""); 
```

在窗口 2 中，我使用如下代码引用和操作在窗口 1 中定义的数组

```
 window.opener.object2[0].drivedistance = driveDistance; 
```

这段代码工作正常。但是，在窗口 2 中显示此数组的结果之前，我需要对其进行排序。我的排序尝试：

```
 window.opener.objects2.sort(compareFunc)

    function compareFunc(a, b){ 
        return (a.drivedistance - b.drivedistance)
    } 
```

如果我在 jsfiddle 中使用相同的方法而不从远程窗口调用它似乎工作正常。

[http://jsfiddle.net/98Q4D/10/](http://jsfiddle.net/98Q4D/10/)

当我单步执行代码时，我可以看到它正在执行 compareDriving 中的代码。没有异常被抛出。但是，在调用 compareDriving 完成后，数组未排序。我不知道这是否可能是某种安全问题，因为我正在排序的数组存在于窗口 1 中，但我的 javascript 在窗口 2 中？关于为什么这种排序代码不起作用的任何想法将不胜感激。

根据评论，我整理了一个似乎很好地证明了它的问题的 jsfiddle。为了明确最终的解决方案，我需要第 1 页作为集合的存储库，但我需要第 2 页来启动导致第 1 页上的集合被排序的逻辑。

[http://jsfiddle.net/mexP6/26/](http://jsfiddle.net/mexP6/26/)

奇怪。在玩了更多之后，看起来我可以通过向排序函数传递一个存在于第 1 页而不是第 2 页的处理程序来完成我想要的。但是当我在第 2 页远程运行该函数时，它会以相反的方式排序当我从第 1 页运行它时的顺序。我可能会玩这个来让它工作，但仍然会感谢任何关于最佳实践的建议。这是我最新的发现。

[http://jsfiddle.net/mexP6/23/](http://jsfiddle.net/mexP6/23/)

请记住，当我使用弹出功能时，您需要启用弹出窗口来测试其中的任何一个。

编辑。我发现最后一个 jsfiddle 上的跨浏览器结果参差不齐。我的一个朋友在 chrome 中尝试过它，它对他有用。我在我的 chrome 中尝试过，结果没有排序。IE 反向排序。我根本没有让firefox工作。关于实现跨浏览器兼容的跨窗口排序的方法的任何帮助都是我认为我真正想要的。感谢您的任何和所有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:44:02.310

我认为您遇到了关于在不同窗口之间允许哪些脚本操作的规则，这在浏览器之间显然会有所不同。如果您考虑您的初始示例（如下），您正在对位于父窗口中的对象（数组）执行方法（排序），但您正在从弹出窗口传递一个函数。

```
window.opener.objects2.sort(compareFunc)

function compareFunc(a, b){ 
    return (a.drivedistance - b.drivedistance)
} 
```

我通常发现最好允许父窗口处理对其自身数据的任何修改。这本质上是您在最近的 jsfiddle 尝试 ( [http://jsfiddle.net/mexP6/23/](http://jsfiddle.net/mexP6/23/) ) 中尝试做的事情，但它被排序函数名称中的拼写错误所抛弃。你写了“compareFuncFromMainPag”而不是“compareFuncFromMainPage”。否则这会起作用，因为您要求 sort 方法使用也属于父窗口的比较函数对数组进行排序。

就个人而言，我会通过仅从弹出窗口调用父窗口上的函数来使这一点更加明确。父窗口中的那些函数将执行所有的数据操作。考虑对您最新的 jsfiddle 的此修改作为我建议的示例：

[http://jsfiddle.net/jarbirdy/dUMMw/8/](http://jsfiddle.net/jarbirdy/dUMMw/8/)

# spring-batch - 如何将上一步数据传递给分区器

> ID：14760744
> 
> 赞同：2
> 
> 时间：2013-02-07T20:50:44.903
> 
> 标签：spring-batch

我正在尝试运行面向分区的作业并且在访问 stepExecutionContext 存储的数据时遇到了麻烦。这是我的工作定义

```
<batch:job id="job1" restartable="false" incrementer="idIncrementer">
    <batch:step id="readwritestep" next="partitionStep">
        <batch:tasklet transaction-manager="transactionManager">
            <batch:chunk reader="reader1"
                         writer="writer1"
                         commit-interval="500"/>
        </batch:tasklet>
        <batch:listeners>
            <batch:listener ref="promotionListener"/>
        </batch:listeners>
    </batch:step>
    <batch:step id="partitionStep" >
        <batch:partition step="detailsStep" partitioner="partitioner">
            <batch:handler grid-size="10" task-executor="taskExecutor" />
        </batch:partition>
    </batch:step>
</batch:job>
<batch:step id="detailsStep">
    <batch:tasklet transaction-manager="transactionManager">
        <batch:chunk reader="reader2"
                         processor="processor"
                         writer="writer2"
                         commit-interval="1500"/>
    </batch:tasklet>
</batch:step> 
```

在处理 readwritestep 时，我将一些数据存储在 step 上下文中并提升到 job 上下文，以便我可以在 partioner 中访问。但是我已经实现的自定义分区器没有任何对父步骤的引用，我可以在其中访问存储的数据......即使分区器绑定到 STEP，它也无法访问父步骤数据......我在这里遗漏了什么吗？分区器提供的一个选项是 jdbctemplate 来生成我不感兴趣的拆分器上下文。我试图注入 @beforestep 注释来访问上下文数据，但它没有被调用..我不想执行 JDBC 读取来生成从属数据...我想获取存储在步骤中的 LIST 数据/作业上下文执行并生成拆分器上下文...有人可以帮我指出正确的方向，以便我可以访问该数据...

这是分区类...

```
 public class ProductDetailsPartitioner implements Partitioner {

     private List<Product> prds;

      @Override
      public Map<String, ExecutionContext> partition(int gridSize) {
       List<String> referencIds = new ArrayList<String>();
       for (Product prd : prds) {
        referencIds.add(prd.getReferenceId());
       }
       Map<String, ExecutionContext> results = new LinkedHashMap<String,ExecutionContext>();
      for (String referencId : referencIds) {
        ExecutionContext context = new ExecutionContext();
        context.put("referenceId", referencId);
        results.put("partition." + referencId, context);
      }
        return results;
    }

     @BeforeStep
     public void retrieveInterstepData(StepExecution stepExecution) {
           System.out.println("Entered Before step in partion");
           JobExecution jobExecution = stepExecution.getJobExecution();
           ExecutionContext jobContext = jobExecution.getExecutionContext();
           System.out.println("ExecutionContext"+jobContext);
           this.prds = (List<Product>) jobContext.get("products");

     }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:17:24.843

好的，我可以通过另一种方法解决这个问题。现在我正在处理基于 jobid 的partioner，而不是通过执行上下文传递引用。它运行良好。很难解释真正的解决方案，因为它是基于真实的业务需求。

# ios - 如何使用 UIAutomation 在 Web 视图中的文本字段中输入文本

> ID：14760746
> 
> 赞同：2
> 
> 时间：2013-02-07T20:50:45.873
> 
> 标签：ios, iphone, uiwebview, ui-automation, ios-ui-automation

我的 iOS 应用程序有一个包含用户名和密码文本字段的登录页面。这些文本字段位于 Web 视图中。我正在尝试使用`UIAutomation`. 我知道在 web 视图中处理内容`UIAutomation`很棘手。我可以使用进入文本字段，`target.tap({x:100, y:200});`但我希望在点击`UIAutomation`字段后输入文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T16:33:25.503

您可以执行以下操作：

1.  获取对 webview 的引用

    ```
    var webView=window.scrollViews()[0].webViews()[0]; 
    ```

2.  点击要编辑的 textView：

    ```
    webView.textFields()[0].tap(); 
    ```

3.  使用键盘

    ```
    UIATarget.localTarget().frontMostApp().keyboard().typeString("text"); 
    ```

您可以使用：`webView.logElementTree()`找出您的网络视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:06:12.157

是的，这很有可能，但我建议不要通过文本字段的位置，而是通过文本字段的 id/name。另一种方法是遍历应用程序窗口。

尝试遵循这个苹果的文档 - [http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html)

这将为您提供一个良好的开端和许多其他想法。

# ember.js - 获取 Ember-Data 对象的属性类型

> ID：14760748
> 
> 赞同：0
> 
> 时间：2013-02-07T20:50:48.387
> 
> 标签：ember.js

鉴于以下情况：

```
App.User = DS.Model.extend({
  firstName: DS.attr('string')
}); 
```

有没有办法确定类型`firstName`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:20:54.777

您可以使用 JavaScript 的`typeof`：

```
// Find the type of the first model's firstName.
console.log(typeof userController.objectAt(0).get('firstName')); 
```

Ember.JS 也有一个内置的`typeOf`: `Ember.typeOf`，但在这种情况下，据我所知，它没有提供任何优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:38:52.080

我找到了答案：

```
App.User.metaForProperty('firstName').type 
```

# python - Python selenium webdriver tests causing "serious error" when run in large batches on windows XP

> ID：14760751
> 
> 赞同：6
> 
> 时间：2013-02-07T20:50:55.203
> 
> 标签：python, selenium, webdriver, selenium-webdriver

We run a bunch of Python test scripts on a group of test stations. The test scripts interface with hardware units on these test stations, so we're stuck running one test script at a time per station (we can't virtualize everything). We built a tool to assign tests to different stations and report test results - this allows us to queue up thousands of tests and let these run overnight, or for any length of time.

Occasionally, what we've found is that test stations will drop out of the cluster. When I remotely log into them, I get a black screen, then they reboot, then upon logging in I'm notified that windows XP had a "serious error". The Event Log contains a record of this error, which states `Category: (102)` and `Event ID: 1003`.

Previously, we found that this was caused by the creation of hundreds of temporary Firefox profiles - our tests use selenium webdriver to automate website interactions, and each time we started a new browser, a temporary Firefox profile was created. We added a step in the cleanup between each test that empties these temporary Firefox profiles, but we're still finding that stations drop out sometime, and always with this serious error and record in the Event Log.

I would like to find the root cause of this problem, but I don't know how to go about doing this. I've tried searching for information about how to read event log entries, but I haven't turned up anything that helps. I'm open to any suggestions for ways to go about debugging this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T00:03:38.387

我以前在使用 Firefox 时遇到过类似的问题。我们很少能成功地捕获一台机器，它只是没有关闭浏览器会话。因此最终蓝屏死机。显然，这是 webdriver、firefox 或 XP（我们也在使用）中的一个错误。我们通过在每个单独的测试之间积极杀死每个 firefox 进程来解决它。这对我们有用。而且因为您没有并行运行测试，所以它也适用于您。我所说的激进是指用斧头穿过它。相当于`killall -9 firefox`. 因为这些会话没有响应。

至于根本原因？特定版本的 Firefox 没有出现此问题。但我们从未真正设法正确调试它。调试非常困难，因为它在短期测试运行下无法重现，一旦出现问题，它确实会导致严重崩溃。

# c++ - “addin.XLL is in a different format”问题，无法打开我自己创建的xll

> ID：14760755
> 
> 赞同：3
> 
> 时间：2013-02-07T20:51:00.383
> 
> 标签：c++, excel, add-in, xll

我在VC++ 2010中写了一个非常简单的xll文件，我使用的Excel是Excel 2007。该库只包含一个函数：

```
extern "C" LPXLOPER12 WINAPI tsMkErr() {
    static XLOPER12 x;
    x.xltype = xltypeErr;
    x.val.err = xlerrNull;
    return &x;
} 
```

和必要的 xlAutoOpen 功能。我编译了dll文件，改名为xll，双击打开Excel。一切都按我的预期工作。

但是，如果我尝试在另一台 PC 上打开此文件，Excel 只会不断告诉我：

您尝试打开的文件“.xll”的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您现在要打开文件吗？

当我单击是时，垃圾会弹出。

我还尝试通过加载项管理器加载它。在这种情况下，我可以打开文件，但找不到我的函数 tsMkErr()。

我将不胜感激所有的建议......

顺便说一句，我真的不知道如何选择回复作为答案。如果你知道怎么做，也请告诉我:)

...我将在本周发布我的工具...现在我才意识到它只能在我的电脑上运行...请帮助...T_T

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-15T00:20:45.713

主要原因是：

1.  您尝试使用错误的架构打开 xll（例如：32 位 xll 和 excel 64 位）

2.  缺少一些外部 dll。（请参阅 Dependency Walker 工具）请注意，如果您在调试模式下构建并尝试通过 Visual Studio 打开它，在这种情况下，您的环境路径变量可能不可用并且 xll 缺少一些 dll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:36:41.210

帮自己一个忙，使用[http://xll.codeplex.com](http://xll.codeplex.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T08:24:15.643

可能的原因可能是缺少依赖项（crt dll 等）。您可以使用 Dependency Walker 工具进行检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T22:52:03.727

您似乎正在**调试**模式下构建解决方案。如果您在调试模式下构建解决方案，Visual Studio 会将 xll 与很少安装在另一台计算机上的调试库链接。因此，请确保将构建配置设置为**发布**，并且它应该可以在其他计算机上运行（如果它们安装了正常的 ms c++ 可再发行库）。

# python - Replacing values with groupby means

> ID：14760757
> 
> 赞同：12
> 
> 时间：2013-02-07T20:51:01.330
> 
> 标签：python, pandas, pandas-groupby

I have a DataFrame with a column that has some bad data with various negative values. I would like to replace values < 0 with the mean of the group that they are in.

For missing values as NAs, I would do:

```
data = df.groupby(['GroupID']).column
data.transform(lambda x: x.fillna(x.mean())) 
```

But how to do this operation on a condition like `x < 0`?

Thanks!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T21:58:44.930

使用@AndyHayden 的示例，您可以使用`groupby`/ `transform`with `replace`：

```
df = pd.DataFrame([[1,1],[1,-1],[2,1],[2,2]], columns=list('ab'))
print(df)
#    a  b
# 0  1  1
# 1  1 -1
# 2  2  1
# 3  2  2

data = df.groupby(['a'])
def replace(group):
    mask = group<0
    # Select those values where it is < 0, and replace
    # them with the mean of the values which are not < 0.
    group[mask] = group[~mask].mean()
    return group
print(data.transform(replace))
#    b
# 0  1
# 1  1
# 2  1
# 3  2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:51:08.493

这是一种方法（对于`'b'`专栏，在这个无聊的例子中）：

```
In [1]: df = pd.DataFrame([[1,1],[1,-1],[2,1],[2,2]], columns=list('ab'))
In [2]: df
Out[2]: 
   a  b
0  1  1
1  1 -1
2  2  1
3  2  2 
```

将这些负值替换为 NaN，然后​​计算`b`每组的平均值 ( )：

```
In [3]: df['b'] = df.b.apply(lambda x: x if x>=0 else pd.np.nan)
In [4]: m = df.groupby('a').mean().b 
```

然后[`apply`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html)在每一行中使用，用它的组替换每个 NaN 意味着：

```
In [5]: df['b'] = df.apply(lambda row: m[row['a']]
                                       if pd.isnull(row['b'])
                                       else row['b'],
                           axis=1) 
In [6]: df
Out[6]: 
   a  b
0  1  1
1  1  1
2  2  1
3  2  2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-14T11:42:18.503

我有同样的问题，并想出了一个相当简单的解决方案

```
func = lambda x : np.where(x < 0, x.mean(), x)

df['Bad_Column'].transform(func) 
```

请注意，如果您想返回正确值的平均值（仅基于正值的平均值），您必须指定：

```
func = lambda x : np.where(x < 0, x.mask(x < 0).mean(), x) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-25T21:48:27.207

对于您的附加问题，有一个很好的示例。

```
df = pd.DataFrame({'A' : [1, 1, 2, 2], 'B' : [1, -1, 1, 2]})
gb = df.groupby('A')
def replace(g):
   mask = g < 0
   g.loc[mask] = g[~mask].mean()
   return g
gb.transform(replace) 
```

链接： http: [//pandas.pydata.org/pandas-docs/stable/cookbook.html](http://pandas.pydata.org/pandas-docs/stable/cookbook.html)

# html - SharedAccessSignature 和 img HTML 标签

> ID：14760766
> 
> 赞同：1
> 
> 时间：2013-02-07T20:51:51.187
> 
> 标签：html, asp.net-mvc, azure

我在 Azure 中锁定了一些缩略图。我创建了一个共享访问签名：

```
var policy = new SharedAccessPolicy
{
    Permissions = SharedAccessPermissions.Read,
    SharedAccessStartTime = DateTime.UtcNow,
    SharedAccessExpiryTime = DateTime.UtcNow.AddHours(1)
};
return blob.GetSharedAccessSignature(policy); 
```

然后将这些 url 推送到 img 标签中。

```
<img src="@Html.Raw(Model.ThumbnailUrl)"></img> 
```

但是，它们的渲染确实不一致。有时没有，有时一个，有时全部，等等......
有趣的是，如果你从“损坏的”图像中复制网址并转到它......你会得到图像。

有谁知道什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:45:37.523

正如 Gaurav Mantri 建议的那样，我将代码更改为：

```
var policy = new SharedAccessPolicy
{
    Permissions = SharedAccessPermissions.Read,
    SharedAccessStartTime = DateTime.UtcNow.AddMinutes(-15),
    SharedAccessExpiryTime = DateTime.UtcNow.AddHours(45)
}; 
```

现在一切都很可爱。似乎这是两台机器之间的一个小时间问题。

# c# - winphone let code wait for 2 seconds DispatcherTimer

> ID：14760768
> 
> 赞同：0
> 
> 时间：2013-02-07T20:52:02.530
> 
> 标签：c#, windows-phone-7, timer

I m doing image processing for Win Phone, using visual studio 2010. In order to let a a picture displayed for 2 seconds (like slide show), the following class is called

```
namespace photoBar
{
    public class WaitTwoSeconds
    {
        DispatcherTimer timer = new DispatcherTimer();
        public bool timeUp = false;

        // This is the method to run when the timer is raised. 
        private void TimerEventProcessor(Object myObject,
                                                EventArgs myEventArgs)
        {
            timer.Stop();
            timeUp = true;
        }

        public WaitTwoSeconds()
        {
            /* Adds the event and the event handler for the method that will 
               process the timer event to the timer. */
            timer.Tick += new EventHandler(TimerEventProcessor);

            // Sets the timer interval to 2 seconds.
            timer.Interval = new TimeSpan(0, 0, 2); // one second
            timer.Start();

            //// Runs the timer, and raises the event. 
            while (timeUp== false)
            {
                // Processes all the events in the queue.
                Application.DoEvents();
            } 
        }
    }
} 
```

It is called in this way:

```
 WaitTwoSeconds waitTimer = new WaitTwoSeconds();
        while (!waitTimer.timeUp)
        {
        } 
```

Because the `Application.DoEvents();` is claimed as an error: 'System.Windows.Application' does not contain a definition for 'DoEvents' . So I deleted that code block

```
 while (timeUp== false)
        {
            // Processes all the events in the queue.
            Application.DoEvents();
        } 
```

After compile and run the program, it shows resume ...
How could I correct this? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:48:09.210

使用 Reactive Extensions 可以更轻松地完成此操作（参考 Microsoft.Phone.Reactive）：

```
Observable.Timer(TimeSpan.FromSeconds(2)).Subscribe(_=>{
    //code to be executed after two seconds
}); 
```

请注意，代码不会在 UI 线程上执行，因此您可能需要使用 Dispatcher。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:55:48.190

拥抱多线程。

```
public class WaitTwoSeconds
{
    DispatcherTimer timer = new DispatcherTimer();
    Action _onComplete;

    // This is the method to run when the timer is raised. 
    private void TimerEventProcessor(Object myObject,
                                            EventArgs myEventArgs)
    {
        timer.Stop();
        _onComplete();
    }

    public WaitTwoSeconds(Action onComplete)
    {
        _onComplete = onComplete;
        timer.Tick += new EventHandler(TimerEventProcessor);
        timer.Interval = new TimeSpan(0, 0, 2); // one second
        timer.Start();

    }
} 
```

在你的代码中

```
private WaitTwoSeconds waitTimer;
private void SomeButtonHandlerOrSomething(
    object sender, ButtonClickedEventArgsLol e)
{    
    waitTimer = new WaitTwoSeconds(AfterTwoSeconds);
}

private void AfterTwoSeconds()
{
    // do whatever
} 
```

这种设计不是很好，但它应该让您清楚地了解多线程的工作原理。如果您不*做某事*，**请不要阻止**。

# wysiwyg - how to set "rich text editor " to be the default on mediawiki with wysiwig extension

> ID：14760769
> 
> 赞同：0
> 
> 时间：2013-02-07T20:52:03.147
> 
> 标签：wysiwyg, mediawiki

using mediawiki 2.0 and a skin which is derived from Monobook, I am using the Wysiwig extension, when people edit they don't see the Rich Text by default, they have to click "SHOW RICH TEXT EDITOR"

Is there anyway to set this as the default?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:16:36.757

我找到了您所说的问题的链接 - 不过我还没有测试过。

尝试通过将以下行添加到您的*LocalSettings.php*文件。

`$wgDefaultUserOptions['riched_use_toggle'] = 0; $wgDefaultUserOptions['riched_start_disabled'] = 0; $wgDefaultUserOptions['riched_use_popup'] = 0; $wgDefaultUserOptions['riched_toggle_remember_state'] = 1;`

从[这里](http://www.mediawiki.org/wiki/Thread%3aExtension_talk%3aWYSIWYG/Set_WYSIWYG_rich_text_editor_as_default_for_new_users_in_MediaWiki_1.17.x)获取的信息。

# android - Android create several AsyncTask with HttpClient and return data in order

> ID：14760770
> 
> 赞同：1
> 
> 时间：2013-02-07T20:52:08.060
> 
> 标签：android, rest, android-asynctask, apache-httpclient-4.x

I'm creating several AsyncTasks to send data to my server. In SendOnlyOneFact I send several images, gps positions, strings, sounds,... all converted to Base64 strings and then, my server replies me with an ID everytime it gets data, so I save it in the field "id_Data". My problem is that I need to get the replies of the server in order, that is to say, I need something similar to 'Asynctasks ordered', because I need them to do other actions.

I'm working in API 8\. I appreciate any help. Here's my code.

In main procedure:

```
for (int k=0; k<activities.size(); k++){
new SendOnlyOneFact().execute(definition, act, null, k);
} 
```

Class SendOnlyOneFact:

```
private class SendOnlyOneFact extends AsyncTask<Object, Void, Void>{
private HttpResponse response;
private int kkk;
private HttpClient httpClient;

@Override
protected void onPreExecute(){
    httpClient = new DefaultHttpClient();
}
@Override
protected void onProgressUpdate(Void... values){}
@Override
protected Void doInBackground(Object... params) {
    kkk = ((Integer) params[3]);
    actividades.get(kkk).saveData((android.app.Activity) params[1]);
    // Serializar los datos creados
    String cosa_serializada = actividades.get(kkk).getMeasure().serializeData(actividades.get(kkk), (android.app.Activity) params[1]);

    HttpHost targetHost = new HttpHost(((GateDefinition) params[0]).getServer(), ((GateDefinition) params[0]).getPort(), "http");

    HttpPost httpPost = new HttpPost("http://" + ((GateDefinition) params[0]).getServer() + ":" + ((GateDefinition) params[0]).getPort() + "/" + ((GateDefinition) params[0]).getWeb_service());
    // Also be sure to tell the server what kind of content we are sending
    httpPost.setHeader("content-type", "text/plain");
    try {
        StringEntity entity = new StringEntity(cosa_serializada, "UTF-8");
        entity.setContentType("text/plain");
        httpPost.setEntity(entity);

        // execute is a blocking call, it's best to call this code in a
        // thread separate from the ui's
        response = httpClient.execute(targetHost, httpPost);

        entity.consumeContent();
    } catch (SocketException ex){
        Log.e("SendOnlyOneFact", "No existe conexión con el servidor");
        ex.printStackTrace();
    } catch (Exception ex){
        ex.printStackTrace();
    } 
    return null;
}

@Override
protected void onPostExecute(Void result){
    if (response != null){
        try {
            this.get();
        } catch (InterruptedException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (ExecutionException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        BufferedReader reader = null;
        String respuesta = null;
        try {
            reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()), 8192);
            respuesta = reader.readLine();
                actividades.get(kkk).getMeasure().setId_Data(respuesta);

            Log.i("onPostExecute SendOnlyOneFact", "Llegó un ID: " + respuesta);
                reader.close();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SocketException ex){
                ex.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else {
            // Entra aquí cuando ocurre una excepción
            // La IP del servidor es incorrecta
            // El servidor no está ejecutándose
            Toast.makeText(mActivity, "Imposible conectar con el servidor.", Toast.LENGTH_LONG).show();
        }
        // When HttpClient instance is no longer needed,
        // shut down the connection manager to ensure
        // immediate deallocation of all system resources
        httpClient.getConnectionManager().shutdown();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:56:10.270

我认为你所追求的是一种序列化 AsyncTasks 执行的方法，为此你可以删除你的 for 循环并在 onPostExecute 中启动下一个 asyncTask。另一种方法是放弃 AsyncTasks 并使用 ThreadPoolExecutor.newSingleThreadExecutor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:45:11.320

试试下面的链接：

[http://android-developers.blogspot.co.uk/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.co.uk/2010/07/multithreading-for-performance.html)

有一个部分处理并发，将帮助您确保返回的数据与正确的 AsyncTask 相关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:08:22.373

看看这个演示项目以获得一些帮助。[https://github.com/vitkhudenko/test_asynctask](https://github.com/vitkhudenko/test_asynctask)

具体来说，

```
 task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); 
```

和

```
 task.execute(); 
```

该演示项目应该让您更好地了解线程池的工作原理。

# visual-studio - VS 2012 Generic Test Fails to Deploy Files

> ID：14760772
> 
> 赞同：1
> 
> 时间：2013-02-07T20:52:13.667
> 
> 标签：visual-studio, testing, visual-studio-2012

I have a [Generic Test](http://msdn.microsoft.com/en-us/library/dd286732.aspx) defined in Visual Studio 2012.

If I hard code all the paths then the test runs perfectly. Obviously I need relative paths for this to work on a build server. **However, it fails to deploy my files because it is looking in the wrong place.**

Under *"Additional files to deploy with this generic test:"* my solution relative files appear like so (verbatim):

```
<Solution Directory>\SubDir\Tester.exe 
```

When the test actually runs, the output shows the following error:

> Warning: Test Run deployment issue: Failed to get the file for deployment item '\SubDir\Tester.exe' specified by the test 'generictest1': System.IO.DirectoryNotFoundException: Could not find a part of the path **'C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE**\SubDir\Tester.exe'.

As you can see, It's using Visual Studio's working directory rather than the `'<Solution Directory>'` it claims.

Any ideas on how to fix this, or what I might be doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T11:47:02.573

关于这个问题有几个相关的已回答问题： Problem [with DeploymentItem attribute](https://stackoverflow.com/questions/883270/problems-with-deploymentitem-attribute) [C# DeploymentItem failed to copy file for MSTest unit test](https://stackoverflow.com/questions/2134099/c-sharp-deploymentitem-fails-to-copy-file-for-mstest-unit-test)

但是，在 VS 2012 中，MS 对 MSTest 进行了更改（不幸的是，我找不到他们针对这些更改所做的几篇博客文章的 URL - 他们在他们所做的其他新内容之间有所提及）所以现在当你有一个程序集作为部署项 - 无论是来自测试类、测试方法还是 TestSettings 文件，它都可能仍然被遗漏！

原因似乎是 mstest 从引用的程序集中查找类实例化。如果没有，则不会复制程序集。我们在使用框架的测试中遇到了这个问题，而框架又使用了 NewtonSoft.JSON。我们必须创建一个虚拟测试类和方法来实例化 NewtonSoft.JSON 库中的任何类，以便复制其 DLL。

试一试，祈祷它有效。

# php - How to make Zend_acl work on ZF 1.12

> ID：14760775
> 
> 赞同：0
> 
> 时间：2013-02-07T20:52:30.760
> 
> 标签：php, zend-framework

I've found the guidance [here](https://stackoverflow.com/questions/545702/need-guidance-to-start-with-zend-acl) how to start with Zend Acl, going throuh the steps of the best answer but I've become stuck on this operation:

> Final steps are loading your configAcl.php and register the AuthPlugin in bootstrap file (probably index.php).

When I start my application, it tells me

> Fatal error: Class 'AuthPlugin' not found in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\myproject\public\index.php on line 28

but I have put this plugin in applications/plugins folder. I'm new to Zend Framework and using v.1.12 (because I didn't find out how to create project in new version: the command-line app in bin folder was missing).

Maybe I have to edit my Bootstrap.php file, but I don't know how. Every instruction I found looks like for another version of framework, because the code in their public/index.php is very different from mine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T09:18:59.650

Require_once 不适用于我的项目.. 任何其他包含插件的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:16:45.900

所以在坐了一个小时后，我终于找到了怎么做。老实说，如果我的 Firefox 没有向我显示错误，我会更快地找到我的问题的答案，即我的应用程序页面以递归方式重定向。Firefox 重启后问题消失。所以这就是答案：在您的引导程序中使用以下代码。

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
protected function _initAutoload() {
    require_once '../application/plugins/AuthPlugin.php';
    require_once '../application/configs/configAcl.php';
}

protected function _initControllerPlugins()
{

$frontController = Zend_Controller_Front::getInstance();
$frontController->registerPlugin(new AuthPlugin());

}
} 
```

希望这对我这样的 Zend Framework 新手有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T09:48:26.333

我知道这是一个非常老的问题，但我会留下我找到的答案，以防有人偶然发现这个线程。

虽然您发布的答案有效，但我通过 application.ini 找到了另一个答案。ZF 遵循命名标准： Plugin_ViewSetup 解析为 Plugin/ViewSetup.php 。对于插件，ZF 会自动查找“库路径”，这意味着它会在您的库目录（Zend 库所在的位置）中查找。所以插件应该如下： library/Plugin/ViewSetup.php ...这是一种情况。然后，您只需在 application.ini 中添加以下内容：

```
autoloaderNamespaces[] = "Plugin_"
resources.frontController.plugins.ViewSetup = "Plugin_ViewSetup" 
```

翻译成你的情况是：

```
autoloaderNamespaces[] = "Plugins_"
resources.frontController.plugins.AuthPlugin = "Plugins_AuthPlugin" 
```

你的图书馆结构应该是：

```
library/Plugins/AuthPlugin.php 
```

希望这对偶然发现这里的人有所帮助！

# android - Android: Flip animation with transformation matrix

> ID：14760776
> 
> 赞同：0
> 
> 时间：2013-02-07T20:52:33.847
> 
> 标签：android, animation, matrix, 3d

I'm still fairly new to android, but I was hoping to figure some stuff out about animations.

I was trying to build a view flip animation, but it became one of the sketchiest things I've seen right off the bat. I tried this:

Animation in XML:

```
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:valueTo="360"
    android:propertyName="rotationY" >
</objectAnimator> 
```

Animation application in Java:

```
ObjectAnimator animation = (ObjectAnimator)AnimatorInflater.loadAnimator(contextReference, R.animator.card_left_flip);
animation.setTarget(passView);
animation.setDuration(2000);
animation.start(); 
```

This produced a very terrible animation that would crop my views, rather than add perspective.

Is there a good way to perform 3D animations in android, preferably with matrices, without having to use OpenGL?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:32:36.927

从 Api 演示中看看这个： [Rotate3dAnimation](http://code.google.com/p/apidemos/source/browse/trunk/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.java?r=6)

我使用它的方式是动画 180 度，在 ImageView 中交换图像，然后旋转回来。它工作得很好。

# javascript - AngularJS Controller Design

> ID：14760777
> 
> 赞同：3
> 
> 时间：2013-02-07T20:52:41.267
> 
> 标签：javascript, model-view-controller, angularjs

I am currently evaluating AngularJS as a potential MVC framework. I am wondering on what the "correct" way to implement the following scenario is -

Say I am designing an User detail page. It is broken down into different tabs like basic information tab(name, email...), user interests tab(drop downs like sports, music..), etc.

So the code looks like this:

```
 <!-- main.html-->
                    <div ng-controller="UserController">
            <div ng-switch on="renderPath">
                <div ng-switch-when="basicInfo">
                     <div ng-include src="basicUrl"></div>
                </div>
                <div ng-switch-when="interests">
                     <div ng-include src="interestUrl"></div>
                </div>
            </div>
        </div> 
```

and **interests.html** looks like

```
 <div>
        <div class="dropdown">
            <a class="dropdown-toggle" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
            I like to play:
             </a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <li ng-repeat="sport in sports">{{sport}}</li>
            </ul>
            <a class="dropdown-toggle" id="A1" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
            I like to listen to:
            </a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <li ng-repeat="genre in genres">{{genre}}</li>
            </ul>
        </div>
    </div> 
```

So the question is, asides from the **UserController**, should I create a separate controller for the "*basicInfo*" and "*interests*" tabs? The reason why I may want to create **InterestsController** is because I don't necessary think

```
$scope.sports= ['baseball', 'bastketball'];
$scope.genres= ['pop', 'classical']; 
```

should live in the **UserController** since only Interest.html cares about the different selections of interests. Also **UserController** may get real fat real quick since the page will have many other tabs.

But at the same time, in Angular's documentation - *"*In Angular, a model is any data that is reachable as a property of an angular Scope object*"*, I feel like if I do then have an **InterestsController**, etc, its model is rather arbitrary since it is just containing the information needed for that tab only.

So what's the best practice? I hope I explain myself clearly. Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:38:00.350

这是设计 Angular 应用程序的一种方法：

1.  想想你的模型（例如，用户）。为这些模型创建服务。
2.  想想你想如何查看你的模型——你的视图（例如，用户主（标签）、用户基本、用户兴趣）。为这些视图创建 HTML 模板。
3.  最后，将控制器附加到每个视图（使用 ng-view 和路由，或 ng-controller 用于其他所有方式，例如使用 ng-switch 和 ng-include 执行的操作）。让控制器仅查找/获取视图完成其工作所需的任何模型数据。
    “使控制器尽可能薄”——这在[DoubleClick 演讲](http://www.youtube.com/watch?v=oJoAnVRIVQo)中的某处说过。

对于您的特定示例，我认为 basicInfo 和兴趣选项卡应该有自己的控制器，因为它们是两个不同的视图。请注意，每个页面上都可以有多个视图——全部可见，或者只有一些。“视图”的大小取决于您。

关于 $scope、模型和服务存在混淆。Misko 在这段 YouTube 视频中说：“ [Scope 不是您的模型。Scope 是您将模型附加到的东西。](http://youtu.be/ZhfUv0spHCY?t=30m) ”
在与 Brandon Tilley 的评论交流中，他对将您的模型投入服务有[这样](https://stackoverflow.com/questions/14374440/the-view-is-not-updated-when-the-model-updates-in-angularjs/14383658#comment20501198_14383658)的看法：“服务特别有利于模型对象，因为它们可以被注入，因此很容易在测试中模拟。”

# c# - Checking for null in a collection

> ID：14760780
> 
> 赞同：2
> 
> 时间：2013-02-07T20:52:48.820
> 
> 标签：c#, linq

Which way of null checking would be better to use and why?

```
var myVar = myCollection.FirstOrDefault(q => q.Id == 10);
if (myVar != null)
{
   anotherVar = myVar.MyName;
} 
```

or:

```
var myVar = myCollection.Where(q => q.Id == 10);
if (myVar.Any())
{
   anotherVar = myVar.First().MyName;
} 
```

or just no difference?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:54:49.250

可能是过早的优化，但第一种方法只需要一次执行，因此效率更高。

当我稍后可能再次懒惰地需要查询时，我正在使用第二种方法。“`FirstOrDefault`完成”它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:54:50.603

你想要一个元素。

所以一个`FirstOrDefault()`带有空检查的比

```
Where
Any
First 
```

就性能而言，在大多数情况下，这不会改变你的生活。但我会首先考虑“可读性”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T20:54:59.433

我更喜欢第一种方式，因为它更清楚你打算做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T20:56:41.117

第一个选项可能会由于`null`通过检查的项目而被破坏，从而使您*认为*没有匹配的项目，即使它们是。它不适用于此特定示例，但可以适用于一般情况。

但是，这里的第二个示例（有时）迭代源序列两次，一次是查看是否有任何结果，然后再次获得该结果。如果源序列需要执行数据库查询以获取可能*非常*昂贵的结果。因此，如果您确定您正在处理一个内存中的集合并且它不是特别大（或者您需要的第一个项目将很快找到），您应该只使用此选项。

如果您需要担心第一个选项的这种特殊边缘情况，或者您想获得使用的好处，`Any`并且`First`（因为它们对您想要的东西的优越语义表示）具有性能优势，`FirstOrDefault`您可以使用这种模式：

```
var myVar = myCollection.Where(q => q.Id == 10)
    .Take(1)
    .ToList();
if (myVar.Any())
{
   anotherVar = myVar.First().MyName;
} 
```

如果你愿意，你可以做一个扩展方法来缩短它：

```
public static IEnumerable<T> FirstOrEmpty<T>(this IEnumerable<T> source)
{
    //TODO: null check arguments
    using (var iterator = source.GetEnumerator())
    {
        if (iterator.MoveNext())
            return new T[] { iterator.Current };
        else
            return Enumerable.Empty<T>();
    }
}

public static IEnumerable<T> FirstOrEmpty<T>(this IEnumerable<T> source, Func<T, bool> predicate)
{
    return FirstOrEmpty(source.Where(predicate));
} 
```

这将允许您只写：

```
var myVar = myCollection.FirstOrEmpty(q => q.Id == 10);
if (myVar.Any())
{
   anotherVar = myVar.First().MyName;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T03:44:09.093

这两种方法*是*不同的，这里是 IL：

**第一或默认**+`if (myVar != null)`

```
IL_0067:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_006C:  brtrue.s    IL_007F
IL_006E:  ldnull      
IL_006F:  ldftn       b__0
IL_0075:  newobj      System.Func<<>f__AnonymousType0<System.Int32,System.String>,System.Boolean>..ctor
IL_007A:  stsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_007F:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_0084:  call        System.Linq.Enumerable.FirstOrDefault  <-----
IL_0089:  stloc.2     // myVar
IL_008A:  ldloc.2     // myVar
IL_008B:  brfalse.s   IL_0094
IL_008D:  ldloc.2     // myVar
IL_008E:  callvirt    <>f__AnonymousType0<System.Int32,System.String>.get_MyName
IL_0093:  stloc.1     // anotherVar
IL_0094:  ldloc.1     // anotherVar 
```

*   第一或默认

**在哪里**+`if (myVar.Any())`

```
IL_0067:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_006C:  brtrue.s    IL_007F
IL_006E:  ldnull      
IL_006F:  ldftn       b__0
IL_0075:  newobj      System.Func<<>f__AnonymousType0<System.Int32,System.String>,System.Boolean>..ctor
IL_007A:  stsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_007F:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_0084:  call        System.Linq.Enumerable.Where   <-----
IL_0089:  stloc.2     // myVar
IL_008A:  ldloc.2     // myVar
IL_008B:  call        System.Linq.Enumerable.Any     <-----
IL_0090:  brfalse.s   IL_009E
IL_0092:  ldloc.2     // myVar
IL_0093:  call        System.Linq.Enumerable.First   <-----
IL_0098:  callvirt    <>f__AnonymousType0<System.Int32,System.String>.get_MyName
IL_009D:  stloc.1     // anotherVar
IL_009E:  ldloc.1     // anotherVar 
```

*   在哪里
*   任何
*   第一的

它看起来像微优化，但第一个*应该*更快，因为单个枚举在`FirstOrDefault`但如果后面的枚举器`Where`包含的元素不多，`q.Id == 10`它并不重要。在两者之间，我肯定更喜欢**最清晰的语法**。

顺便说一句，我很`null`喜欢……usign怎么样`if (myVar != default(T))`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T21:05:16.963

I tend to use expressions that involve Where followed by FirstOrDefault:

```
var myVar = myCollection.Where(x => x.Id==10).FirstOrDefault();
if (myVar != null)
{
   anotherVar = myVar.MyName;
} 
```

As Raphael Althaus points out above, you want one variable to be null checked, in my opinion you should first make a query with the condition and then pick the first one if exists, and check that.

# javascript - jQuery 子字符串或正则表达式从序列化字符串中删除多余字符

> ID：14760783
> 
> 赞同：1
> 
> 时间：2013-02-07T20:53:05.467
> 
> 标签：javascript, jquery, regex, grails

我正在从 grails 选择标记中获取值，并且需要去除 jQuery 正在获取的额外字符并格式化字符串，然后再将其传递给我们的 BIRT 报告服务器。

grails 的列表如下所示：

```
Term:
    [201360, Continuing Ed Automn 2013]
    [201350, Summer Session 2013]
    ...
College
    [AS, College of Arts and Sciences]
    [BA, College of Business Administration]
    ... 
```

这是在两个选择列表上进行选择时 jQuery 序列化的示例：

```
Term=%5B201360%2C+Continuing+Ed+Autumn+2013%5D&College=%5BBA%2C+School+of+Business+Admin%5D 
```

我希望最终值类似于

```
Term=201360&College=BA 
```

直接子字符串的问题是变量的数量可以改变，并且两者都是可选的。可能有 1 个，也可能有 20 个。

我将如何只提取所需的部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:07:58.073

我不知道为什么你最终会得到那种数据。反正：

```
// I guess + mean space here, so I convert it back to space before
// doing percentage unescape
var convertedInput = unescape(inputString.replace(/\+/g, ' '));
var output = convertedInput.replace(/\[ *([^,]+?) *,[^\]]+\]/g, '$1') 
```

正则表达式可能看起来比必要的稍微复杂一些，但我删除了`[]`.

解释：

```
\[ *([^,]+?) *,[^\]]+\] 
```

*   整个正则表达式尝试匹配表单的键值对中的值部分`key=[item1, item2, ...]`。它将捕获第一个项目并丢弃其余项目。
*   `\[`和`\]`是文字`[`和`]`字符。
*   ` *([^,]+?) *,`: 吃掉领先空间` *`。然后消费并捕获令牌`([^,]+?)`，假设没有逗号`[^,]`，由于惰性量词`+?`会在遇到序列之前尽可能少地消费：可选空格后跟（第一个）逗号` *,`。
*   `[^\]]+`：消耗（然后扔掉）所有不是的东西`]`。它将停在`]`（或字符串结尾，但不是这里的情况）。

**假设：**

*   `[]`是平衡的，没有嵌套。
*   `,`要提取的项目内没有逗号。
*   要修改的键值对的形式为`key=[item1, item2, ...]`

# jquery - 异步任务的客户端显示结果[django]

> ID：14760786
> 
> 赞同：0
> 
> 时间：2013-02-07T20:53:23.197
> 
> 标签：jquery, django, asynchronous, atom-feed

我想知道是否有更好的方法/模式来做我想做的事情。

我有一个执行异步任务的服务器端进程。我打算用芹菜做这个。异步任务本身可以有子任务。
尽管我需要查看已执行任务和子任务的历史记录，但我不打算使用 celery 结果后端，而只是监听 task_finished 信号并根据需要更新我用于日志的现有 django 模型。

**问题是如何向用户报告这些任务的状态？**

因此，在 web ui 中，将有一个小部件/html 块，其中列出了任务及其状态。
我需要显示按父任务和单个子任务状态分组的子任务。在页面上，每次执行任务时，我都会使用 jquery 进行轮询，并且每隔一段时间。

我的想法是为此使用 Atom，但根据规范，它们是关于内容元素[（指向规范的链接）](https://www.rfc-editor.org/rfc/rfc4287#page-14)被允许保存的严格规则。具体关注的是在使用 atom 时我将如何表示子任务。

另一个想法是直接使用 json 并相应地解析。

有谁知道为此使用更好的方法/模式？

# php - 如何从 URL 调用控制器？

> ID：14760787
> 
> 赞同：0
> 
> 时间：2013-02-07T20:53:24.960
> 
> 标签：php, codeigniter, uri

我的本地主机（localhost/supplies/）中有一个应用程序，并且在 routes.php 文件中指定了默认控制器。

```
$route['default_controller'] = "start"; 
```

问题是当我想在 URL 为“localhost/supplies/admin/”或“localhost/supplies/admin”时加载或执行控制器。

我做了测试

```
$route['admin'] = "controllers/admin"; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:33:54.610

只需使用

```
$route['admin'] = "admin/yourcontrollerName"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:46:34.513

If your application root is in `localhost/supplies` there is no reason to route that.

URL `localhost/supplies/admin` will call the `admin` controller without need for any routing.

(Works if you omitted index.php from the URL.)

Your suggested routing would call the *method* `admin` in the *controller* named `controller`

# javascript - Bootstrap：当一个非常宽的表格不适合网格时该怎么办

> ID：14760788
> 
> 赞同：1
> 
> 时间：2013-02-07T20:53:30.360
> 
> 标签：javascript, css, twitter-bootstrap, jqgrid

我有一个 jqGrid，它是引导 div 容器的一部分。此 jqGrid 具有可变宽度：用户最多可以选择 20 列，当他或她选择全部 20 列时，它不可能适合引导容器。当您的 HTML 表格注定要在`<div class="container">`.

澄清一下，我希望页面有一个水平滚动条，而不会在宽度上切断任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:17:43.900

您使用的代码示例可能会有所帮助。请注意，并非所有使用 jqGrid 的人也都使用引导程序。因为目前没有代码示例，而且因为我不知道引导程序，所以我试图猜测。

我建议你使用`shrinkToFit: false`选项。如果您使用该选项，您可以考虑不要`width`为网格指定选项。相反，您应该将`width`每一列指定为整数。在这种情况下，网格将显示没有水平滚动条，但页面的水平条可用于滚动。在调整列大小后调整网格大小[的答案](https://stackoverflow.com/a/9599685/315935)中的其他技巧可能对您的情况也有帮助。或者，您可以指定`width`网格的选项。所有列仍将显示而没有任何收缩，但将创建网格上的水平滚动条。

# jquery - 使用 trigger() 来检查一个复选框，如果没有设置 checked="checked"，我如何判断它是否被选中？

> ID：14760797
> 
> 赞同：0
> 
> 时间：2013-02-07T20:53:52.387
> 
> 标签：jquery

使用 jQuery 1.9.0，如果我`.trigger('click')`在复选框上使用，`checked`则不会设置该属性。还有什么其他方法可以告诉我是否选中了复选框？现在，我必须明确处理该单击事件并手动切换属性。使用 jQuery 据说可以简化 JavaScript，这似乎还有很长的路要走。

我以前在 1.8.3 中不必这样做，但在 1.9.0 中，无论出于何种原因，设置属性都不会更新浏览器中的显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:55:28.030

检查属性，而不是属性。该属性不是很有用。

```
$(checkbox).prop("checked") // true if it is checked, false otherwise
$(checkbox).prop("checked",true) // make it checked
$(checkbox).prop("checked",false) // make it NOT checked 
```

编辑评论：

有一个选择器：

```
$(".mycheckboxes:checked") 
```

# php - cURL sftp 公钥认证失败“回调错误”

> ID：14760798
> 
> 赞同：4
> 
> 时间：2013-02-07T20:54:07.870
> 
> 标签：php, curl, ftp, sftp, scp

我有一些 php 代码可以很好地使用 cURL 将文件上传到仅使用用户和密码 ftp 的主机，现在我必须上传到只允许公钥身份验证的服务器并且收到错误：“* SSH 公钥身份验证失败：回调返回错误”

我的密钥有问题，因为它们的格式不正确，但后来将它们放入正确的单行格式，这阻止了“非 base64 编码”错误。我在网上找不到关于这个回调错误的太多帮助。

我的代码如下。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_VERBOSE, TRUE); 
curl_setopt($ch, CURLOPT_URL, 'sftp://user:@12.12.12.12:22/testfile.gz');
curl_setopt($ch, CURLOPT_PROTOCOLS, CURLPROTO_SFTP);
curl_setopt($ch, CURLOPT_SSH_PUBLIC_KEYFILE,'C:\keys\public.pub');
curl_setopt($ch, CURLOPT_SSH_PRIVATE_KEYFILE,'C:\keys\private.ppk');
curl_setopt($ch, CURLOPT_SSH_HOST_PUBLIC_KEY_MD5,'2acfe24108c37a276a93ac3398a5oe8f');
curl_setopt($ch, CURLOPT_SSH_AUTH_TYPES,CURLSSH_AUTH_PUBLICKEY);
curl_setopt($ch, CURLOPT_UPLOAD, 1);
$fp = fopen($localfile, 'r');
curl_setopt($ch, CURLOPT_INFILE, $fp);
curl_setopt($ch, CURLOPT_INFILESIZE, filesize($localfile));
$sR = curl_exec ($ch); 
```

这是运行测试的输出

```
* About to connect() to 12.12.12.12 port 22 (#0)
*   Trying 12.12.12.12...
* connected
* Connected to 12.12.12.12 (12.12.12.12) port 22 (#0)
* SSH MD5 fingerprint: ebbc61b886c798b25073c912833ffers
* SSH authentication methods available: publickey
* Using ssh public key file C:\keys\public.pub
* Using ssh private key file C:\keys\private.ppk
* SSH public key authentication failed: Callback returned error
* Authentication failure
* Closing connection #0 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-26T14:38:41.173

当您的 libssh2 使用 libgcrypt 构建时，有些情况（基于 debian 的发行版）。其中，使用 PEM 编码的私钥文件：

```
$ openssl rsa -in ~/.ssh/id_rsa -outform pem > id_rsa.pem 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T20:58:10.503

ppk 是一个 putty putty 私钥，你需要将它导出为一个开放的（使用 puttygen go Conversations-> export OpenSSH ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:46:09.503

phpseclib 是一个纯 PHP SFTP 实现，您可能会更幸运。例如。

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

// puts a three-byte file named filename.remote on the SFTP server
$sftp->put('filename.remote', 'xxx');
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-13T06:04:34.230

Debian 发行版（例如 Ubuntu LTS 14.04）中的 libssh2 使用不支持密码短语的 libgcrypt。使用没有密码的密钥或生成 PEM 密钥，如 Alexander 的回答所述。

可以在以下链接上找到更多信息： [尝试使用 ssh2_auth_pubkey_file() 进行连接](https://stackoverflow.com/questions/3407503/trying-to-connect-using-ssh2-auth-pubkey-file)

# ruby-on-rails - 不同用户类型的 Rails 关联

> ID：14760800
> 
> 赞同：0
> 
> 时间：2013-02-07T20:54:21.793
> 
> 标签：ruby-on-rails, database

我有一个用户模型，并希望将个人资料信息附加到特定于性别的模型上。

除了保存性别中性数据的 User 模型之外，我是否应该有一个 FemaleProfile 和 MaleProfile 模型，如下图所示？

用户型号：

```
has_one :FemaleProfile
has_one :MaleProfile

Fields :Name, :Age 
```

女性型材型号：

```
belongs_to :User

Fields :Name, :Age, :Dress_Color 
```

男性型材：

```
belongs_to :User

Fields :Name, :Age, :Tie_Color 
```

我不明白这是否确实正确是用户具有男性或女性个人资料，但该关联具有与用户关联的两种类型的个人资料。

是否存在逆多态关系？我已经查看了 STI，但它不允许继承模型专有的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:18:32.913

我会考虑在这种情况下使用`Multi Table Inheritance`. 我个人使用`citier`gem 来实现这个：http: [//inspiredpixel.net/citier/](http://inspiredpixel.net/citier/)

具体来说，您将有一个`User`包含 4 个公共字段的表和 2 个继承表，每个表都有自己的字段，这似乎是您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:25:57.450

您可以使用多态关联（为什么要要求反向多态实现？）或序列化属性。

**序列化属性**

你可以添加一个`gender_details`文本类型的列，然后序列化这个属性。然后定义女性和男性属性。

```
# user.rb
class User < ActiveRecord::Base
  MALE_DETAILS = %w[sports cars]
  FEMALE_DETAILS = %w[perfume flowers]

  serialize :gender_details, Hash

  (MALE_DETAILS + FEMALE_DETAILS).each do |attr|
    define_method attr do
      self.gender_details ||= {}
      self.gender_details[attr.to_sym]
    end

    define_method "#{attr}=" do |value|
      self.gender_details ||= {}
      self.gender_details[attr.to_sym] = value
    end
  end
end 
```

所以你可以使用

```
user.sports = 'Basketball'
user.flower = 'Rose' 
```

# javascript - jquery复选框选中/未选中

> ID：14760802
> 
> 赞同：4
> 
> 时间：2013-02-07T20:54:28.187
> 
> 标签：javascript, jquery, asp.net, checkbox, webforms

我正在尝试使用 jquery 进行一些复选框操作。我有一个模式弹出窗口和复选框，我正在使用 jquery 来操作选中模式。有一个变量有 True 或 False，所以如果它是 True 则检查，否则取消检查。但是，在我的情况下，即使值为 False，复选框仍然保持选中状态。这是我正在使用的代码：

```
$(document).on("click", ".open-EditCC", function () {            
            var life = $(this).data('life');           
            $('#<%=chkLife.ClientID%>').attr('checked', life);
            $('#editCC').modal('show');
          }); 
```

life 变量获取 True 或 False，但在选中复选框时，我设置了一个断点，我可以看到该值为 False。知道我在做什么错吗？提前致谢， Laziale

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:57:39.447

选中属性的值是`"checked"`或选中的属性不存在，所以使用这个：

```
// This is assuming life has the string value of "True" or "False"
// if it's a boolean change to if (life)
if (life === 'True') {
    $('#<%=chkLife.ClientID%>').attr('checked', 'checked');
} else {
    $('#<%=chkLife.ClientID%>').removeAttr('checked');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:59:53.070

我想在必要时删除属性应该足够了。

```
if(life){
 $('#<%=chkLife.ClientID%>').attr('checked', 'checked');
}
else

{
$('#<%=chkLife.ClientID%>').removeRttr('checked');
} 
```

# php - 刷新包含 php 的 div 包括

> ID：14760804
> 
> 赞同：0
> 
> 时间：2013-02-07T20:54:28.480
> 
> 标签：php, javascript, html, load

我有一个 php 代码，它在页面加载和刷新时显示一个随机文件。此代码位于 ../ads/food/responce.php 中，您将在下面的其他脚本中看到。

```
<?php
$ad = glob("../ads/food/*.php");
$adfood = $ad[mt_rand(0, count($ad) -1)];
include ($adfood);
?> 
```

我想旋转显示的文件而无需刷新页面。（“就像图像滑块一样”）

我试过的：

我尝试了一个脚本来刷新 div，但它似乎显示的是警告而不是文件。您可以在这里看到错误[http://whatanswered.com/food/what-c​​an -i-do-with-cornflour.php](http://whatanswered.com/food/what-can-i-do-with-cornflour.php)

```
<script type="text/javascript">
$(document).ready(function() {
setInterval(function()
{
     $('#button').fadeOut("fast").load('../ads/food/responce.php').fadeIn("slow");
}, 10000);

});
</script>

<div id="button">
<?php include("../ads/food/responce.php");?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:05:54.760

这只是因为路径`("../ads/food/*.php")`不会导致包含任何 php 的文件夹（即 : `http://whatanswered.com/ads/ads/food`）。

您必须编写`../../ads/food/*.php`这将导致的路径`http://whatanswered.com/ads/food/`（其中包含一些 php 文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:06:23.813

我不确定这是否有帮助，但这里有一些你可以做的选择：

*   使用排序的 iframe 链接到将自动刷新并生成新页面的页面
*   使用 Ajax 在您的站点上嵌入其他页面。

[这是使用Ajax](http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml)嵌入站点的一些参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:44:36.557

你有几个问题。

1.  您的 responce.php 文件已经在`ads/food/`目录中。正如@edi9999 已经提到的那样，您的路径应该是`../../ads/food/*.php`或者您可以只使用`*.php`.
2.  您的随机文件选择器偶尔会返回 responce.php。这可能不会导致任何真正的问题，因为 response.php 只会递归地调用自己。但是如果你的文件列表很短，那么它有可能会递归很多。
3.  如果您的目录非常大（超过 1000 个项目），您可能会遇到内存问题。

您可以使用此代码排除 responce.php 文件。此外，还有一个`array_rand()`专门用于从数组中选择单个项目的功能。

```
$ad = glob("*.php");
$ad = array_filter($ad, function($name) {
    return preg_match('/response.php$/', $name) === 0 ;
}); 
include( $ad[array_rand($ad)] ); 
```

# c# - NAnt 和 VS/MSBuild 之间的输出文件大小不同

> ID：14760807
> 
> 赞同：1
> 
> 时间：2013-02-07T20:54:36.840
> 
> 标签：c#, asp.net, .net, nant

我在构建过程中使用 NAnt，输出一个 DLL。

一切都编译得很好。但是当我比较 NAnt 与 VS/MSBuild 的输出时，我发现文件之间的大小差异为 2MB。

我已经包含了所有相同的引用（甚至在构建文件中明确设置系统引用）。

当我加载应用程序时，如果我使用 NAnt DLL，我会收到运行时错误。但是使用 VS 版本的 DLL，一切运行顺利。

我将不胜感激任何人可以提供的任何帮助，或者如果有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:56:04.823

使用详细开关 ( `-verbose`/ `/v:diag`) 运行 NAnt 和 MSBuild，比较`csc.exe`它们使用的确切命令行调用。此外，我有点担心您的程序集足够大，甚至可能存在 2MB 的大小差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:59:32.020

我发现了这个问题，只是想添加解决方案，以防其他人遇到类似问题。项目中有一个 XML 文件，我没有通过我的构建文件正确引用。我将它包含在 csc 标记的引用节点中，而不是包含在资源节点中。解决这个问题解决了我的问题。

# wpf - DatePicker SelectedDate 字符串格式

> ID：14760817
> 
> 赞同：0
> 
> 时间：2013-02-07T20:55:05.490
> 
> 标签：wpf, datepicker, string-formatting

我派生了 DatePicker 类以支持额外的 DateMode 属性，该属性将允许用户仅按照 DateMode（日、月、年）使用控件。因此，如果 DateMode 设置为 Year，则控件将无法进一步向下钻取以查看一年中的月份，然后再进一步查看月份中的几天。控制工作良好，但有一个问题。虽然我已经在 DatePicker 模板中的“PART_TextBox”控件上应用了字符串格式，这将根据 DateMode 更改格式，但一旦 DatePicker 控件失去焦点，格式就会丢失。以下是我派生的 DatePicker 控件代码：

```
public class MyDatePicker : DatePicker
{
    public string DateMode
    {
        get { return (string)GetValue(DateModeProperty); }
        set { SetValue(DateModeProperty, value); }
    }

    // Using a DependencyProperty as the backing store for DateMode.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty DateModeProperty =
        DependencyProperty.Register("DateMode", typeof(string), typeof(MyDatePicker), new UIPropertyMetadata("Day"));

    protected override void OnCalendarOpened(RoutedEventArgs e)
    {
        var popup = this.Template.FindName("PART_Popup", this) as Popup;
        var tb = this.Template.FindName("PART_TextBox", this) as TextBox;

        if (popup != null && popup.Child is System.Windows.Controls.Calendar)
        {
            if (DateMode == "Year")
                ((System.Windows.Controls.Calendar)popup.Child).DisplayMode = CalendarMode.Decade;
            else if (DateMode == "Month")
                ((System.Windows.Controls.Calendar)popup.Child).DisplayMode = CalendarMode.Year;
            else if (DateMode == "Day")
                ((System.Windows.Controls.Calendar)popup.Child).DisplayMode = CalendarMode.Month;
        }
        ((System.Windows.Controls.Calendar)popup.Child).DisplayModeChanged += new EventHandler<CalendarModeChangedEventArgs>(DatePickerCo_DisplayModeChanged);
    }

    protected override void OnCalendarClosed(RoutedEventArgs e)
    {
        base.OnCalendarClosed(e);
        IsDropDownOpen = false;
        var popup = this.Template.FindName("PART_Popup", this) as Popup;
        ((System.Windows.Controls.Calendar)popup.Child).DisplayModeChanged -= new EventHandler<CalendarModeChangedEventArgs>(DatePickerCo_DisplayModeChanged);
    }

    private void DatePickerCo_DisplayModeChanged(object sender, CalendarModeChangedEventArgs e)
    {
        var popup = this.Template.FindName("PART_Popup", this) as Popup;
        var tb = this.Template.FindName("PART_TextBox", this) as TextBox;

        if (popup != null && popup.Child is System.Windows.Controls.Calendar)
        {
            var _calendar = popup.Child as System.Windows.Controls.Calendar;

            if (DateMode == "Month" && _calendar.DisplayMode == CalendarMode.Month)
            {
                if (IsDropDownOpen)
                {
                    this.SelectedDate = _calendar.DisplayDate;
                    this.IsDropDownOpen = false;
                    _calendar.DisplayMode = CalendarMode.Year;
                }
                tb.Text = this.SelectedDate.Value.ToString("MMM yyyy");
            }
            else if (DateMode == "Year" && _calendar.DisplayMode == CalendarMode.Year)
            {
                if (IsDropDownOpen)
                {
                    this.SelectedDate = _calendar.DisplayDate;
                    this.IsDropDownOpen = false;
                    _calendar.DisplayMode = CalendarMode.Decade;
                }
                tb.Text = this.SelectedDate.Value.ToString("yyyy");
            }
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:11:47.467

我认为您可能会干扰基类。我不确定确切的设置，但我认为`PART_TextBox`有一个由 设置的绑定，`DatePicker`并且可能正在更新 LostFocus 并循环返回以清除`Text`您直接设置的值。您可以尝试使用`BindingOperations.GetBinding`来访问绑定`Text`并修改它的 StringFormat 而不是`Text`直接设置。

# templates - Grails：渲染模板返回 {}

> ID：14760818
> 
> 赞同：0
> 
> 时间：2013-02-07T20:55:11.887
> 
> 标签：templates, grails, rendering

我正在尝试从控制器渲染模板，但我得到了 {}。如果我尝试直接渲染文本或 HTML，我会渲染它。我使用以下代码来呈现模板：

```
render(template:'/visit/registration') 
```

我不确定包名称是否会导致问题。我的控制器在 PackageName.Visit 包内，我的视图直接在视图文件夹内的访问文件夹内。我正在使用 Grails 2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:25:57.633

If you're controller is VisitController, then you're render would look like

```
render template: 'registration' 
```

Assuming you have `grails-app/views/visit/_registration.gsp`. If it is not really a template (_ denotes template), then you're render would be:

```
render view: 'registration' 
```

If you're action is called registration, you don't need to explicitly call render.

# codeigniter - Codeigniter 表单验证规则 - required/min_length

> ID：14760820
> 
> 赞同：0
> 
> 时间：2013-02-07T20:55:28.810
> 
> 标签：codeigniter, validation

如果我将某个字段的规则设置为 min_length[3]，但由​​于它不是必填字段，所以没有传递该字段的值，它会引发错误吗？

例如：

```
array(
'field' => 'first_name',
'label' => 'First Name',
'rules' => 'min_length[2]'
),
array(
'field' => 'last_name',
'label' => 'Last Name',
'rules' => 'required|min_length[2]'
), 
```

所以我的问题是，即使 FirstName 没有用户输入的值，我仍然会面临 min_length 设置为 2 的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:00:38.050

是的。来自[codeigniter 文档](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)：

```
min_length  Yes Returns FALSE if the form element is shorter then the parameter value.  min_length[6] 
```

如果`FirstName`没有输入值，它的长度将为 0，比参数值 (2) 短。因此，它将返回 FALSE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:48:30.627

仅当他们在表单字段中输入了一个或多个字符时才需要该字段。如果他们将其留空，它将通过。
所以如果不需要验证规则**并且**用户没有在表单字段中放置任何内容 - 它会通过。

但是，如果他们在该字段中输入了某些内容——那么验证规则就会适用。例如，如果您的最小长度为 4，如果用户输入 3 个字符 - 验证将失败。并且字符数错误将显示在验证错误消息中。

# backbone.js - 当不再在同一视图范围内时，在渲染后删除模板

> ID：14760827
> 
> 赞同：1
> 
> 时间：2013-02-07T20:56:03.167
> 
> 标签：backbone.js

我在导航栏中有一个链接（带有 .story 类），如果单击该链接，则会将故事模板呈现到画布 div 中以向用户提供信息。我想在阅读信息后为用户提供删除模板的选项，但是，我无法在模板中的删除“x”上设置点击事件。

我想我知道问题所在。我的 StoryView el 是这样，`<div id="story">`所以我可以在其中的任何内容上设置事件，但是由于它呈现到另一个未附加到该视图的 div 中，因此我无法将其从该视图中删除。

这是一个显示问题的小提琴。更新，我包含了错误的小提琴。现在修好了。

[http://jsfiddle.net/mjmitche/RRXnK/145/](http://jsfiddle.net/mjmitche/RRXnK/145/)

html

```
<div id="story">
   <a href="#" class="story">click this story link to render into canvas_id but how to set event to remove?</a>
</div>

<div id="canvas_id"></div> 
```

看法

```
var StoryView = Backbone.View.extend({

  el: $("#story"),

   events: {
      'click .story': 'render', 
       'click .delete': 'test'

    },

     initialize: function() {

    },
   render: function(){
     var template = $('#story_template').html();
    this.template = _.template(template);
    $('#canvas_id').html(this.template());
   },

    test: function() {
   alert("delete"); 
        <!--  click .delete event not triggering -->
    },

    remove: function(){
     alert("how to remove the template");   
        <!-- how to remove template after rendering -->
    }

  });

var story_view = new StoryView(); 
```

模板：

```
<div id="story">
   <a href="#" class="story">click this story link to render into canvas_id but how to set event to remove?</a>
</div>

<div id="canvas_id"></div>

<script id="story_template" type="text/underscore">
"I want to make the x
    after this story clickable to remove the template
    but since it's not within the #story div (which
    is just a navbar in my real app), it's not working"
<span class="delete">X</span>

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:09:52.533

要理解为什么只能在视图的 el 上监听事件，首先需要了解backbone.js是如何*监听*事件的。

在主干.js 事件被[委托](http://api.jquery.com/on/)（使用 jQuery 或 Zepto）到视图的`el`. 在您的情况下，您的视图`el`是`#story`您的删除事件没有被触发。

您可以做的是，当您单击以呈现模板时，您可以使用[setElement](http://backbonejs.org/#View-setElement)重新分配视图的 el ，这也会将视图委托事件移动（重新委托）到新的`el`（（如[@muistooshort](https://stackoverflow.com/users/479863/mu-is-too-short)指出的那样）。

例如

```
 render: function(){
     var template = $('#story_template').html();
    this.template = _.template(template);
    $('#canvas_id').html(this.template());
       this.setElement($('#canvas_id'));
   }, 
```

在您的删除事件中，您可以将您的`el`背部重新分配给`#story`元素。

更新[jsFiddle](http://jsfiddle.net/RRXnK/149/)

# javascript - 可滚动的 Div onfocus 事件浏览器支持

> ID：14760831
> 
> 赞同：0
> 
> 时间：2013-02-07T20:56:25.823
> 
> 标签：javascript, html, section508

似乎某些浏览器允许可滚动的 div 元素接收焦点 - 然后该元素具有焦点，用户可以使用箭头键和向上/向下翻页。我有兴趣了解有关此功能的所有信息，因为我的公司正在努力完全符合 508 标准。

我的问题是，哪些浏览器支持可滚动元素上的焦点事件？

我正在尝试制作一个自定义滚动条组件，以制作一个更时尚的滚动容器，以满足 UX（用户体验）人员的需求，使他们的布局更漂亮（是的，我知道这可能不是一个好主意）我将制作组件来满足他们的要求。

您可以在此处提供的有关如何使我的自定义可滚动 div 元素完全符合 508 的任何其他信息/提示都会很棒。

现在我正在考虑以下几点：

1.  专注于可滚动元素允许箭头键向上/向下和页面/向上向下...哪些浏览器？这都是浏览器吗？
2.  鼠标中键应该可以工作（通过鼠标移动快速滚动）
3.  鼠标滚轮应该可以工作
4.  如果专注于可滚动元素内部通常不使用箭头键的内容（例如输入或文本区域），则箭头键/向上/向下将滚动 div

还有其他方法可以移动我忘记的卷轴吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:52:09.373

正如您所发现的， a`<div>`本身不是可聚焦的。但是，您可以通过添加;使其具有焦点`tabindex="0"`。. 回到 IE7 的浏览器应该可以识别这一点。`div``<div tabindex="0" style="overflow:auto;height:100px;">`

我所知道的唯一可以让你超越滚动条的浏览器是 IE，除非你在 flash 中这样做，也许是一些 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:01:33.397

有关浏览器支持的事件列表，请参见本网站[http://www.quirksmode.org/dom/events/index.html](http://www.quirksmode.org/dom/events/index.html)

# html - 阻止移动浏览器显示内容范围之外的元素？

> ID：14760840
> 
> 赞同：3
> 
> 时间：2013-02-07T20:57:06.580
> 
> 标签：html, css

为了说明我的问题，看看下面的小提琴：http: [//jsfiddle.net/ECaD6/](http://jsfiddle.net/ECaD6/)

假设我制作了这个网页，其中中心（深灰色）区域是页面的主要内容。此内容区域的背景特意采用不同于不包含任何内容的容器侧面的颜色。

我已经绝对放置了一个图像，因此它位于预期内容区域的范围之外。这在桌面浏览器上有效并且看起来不错。

但是，当在移动浏览器中查看时，用户可以缩小页面以便他们看到：

![在此处输入图像描述](../Images/18bd55f960f018fde45c193b3fe98215.png)

如果浏览器只能缩小与内容容器一样宽，我会喜欢它。这可能吗？我显然可以在上面放一个`overflow-x:hidden`，`div`但它实际上会完全切断足球。

如果移动浏览器只能缩小到这么远，那就太好了： ![在此处输入图像描述](../Images/20d75f53adb40840f4b64e0ab8e7baed.png)

我知道从技术上讲，图像（在这种情况下）是“内容”的一部分，因为它位于内容 div 中。我想知道是否有任何布局或 css 技巧可以用来实现我正在寻找的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:00:49.170

您是否[`meta` `device-width`](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)在标题中添加了标签？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:16:28.493

`<head>`在您的页面中添加此元标记。

```
<meta name="viewport" content="initial-scale=1, maximum-scale=1.0, user-scalable=no" /> 
```

# php - TCPDF 中的斜体字体

> ID：14760845
> 
> 赞同：1
> 
> 时间：2013-02-07T20:57:32.660
> 
> 标签：php, pdf, fonts, tcpdf

首先，对不起，我对字体真的很陌生，我对它们了解不多。我在 TCPDF 中使用了一种名为“oswald”（[链接）的字体。](http://www.google.com/webfonts/specimen/Oswald#charset)我正在使用我之前的开发人员制作的项目，所以我不确定该字体是否与 TCPDF 集成或是否已导入其中。

我正在尝试使其斜体，但我没有运气，文本正在正常显示。在我的字体目录中，我可以看到“oswald”文件：

```
oswald.php 
oswald.ctg.z    
oswald.z 
```

我使用了 TCPDF 功能 SetFont ( [Link to Doc](http://www.tcpdf.org/doc/code/classTCPDF.html#afd56e360c43553830d543323e81bc045) ) 并将“样式”设置为斜体。我可以确认样式的设置有效，因为当我“getFontStyle”它返回一个“i”为斜体。当我打开 oswald.php 时，我可以看到以下代码：

```
$desc=array('Ascent'=>1184,'Descent'=>-309,'CapHeight'=>11,'Flags'=>32,'FontBBox'=>'[-103 -309 1346 1184]','ItalicAngle'=>30,'StemV'=>70,'MissingWidth'=>600); 
```

之前，ItalicAngle 是 0，所以我试着把它改成 30，想也许它会让它变成 30 度角？但这并没有影响任何事情。

**问题**

1.  更改代码中的这个数组是否会改变字体的渲染方式？
2.  我是否需要使用 php 作为源文件重新创建“ctg.z”和“z”文件？
3.  这种特殊字体甚至不支持斜体模式吗？

# python - 在 Python 的 POST http 标头中检索 HTML 表单数据

> ID：14760848
> 
> 赞同：1
> 
> 时间：2013-02-07T20:57:47.277
> 
> 标签：python, html, http

我有以下 HTML 代码。它创建一个表单，一旦我点击提交，就会向服务器发送一个请求。

```
 <html>
 <body bgcolor = black text= white>
 <FORM method="post" action="/processData.py">
 <P>
 <LABEL for="firstname">First name: </LABEL>
 <INPUT type="text" id="firstname"><BR>

 <LABEL for="lastname">Last name: </LABEL>
 <INPUT type="text" id="lastname"><BR>

 <LABEL for="email">email: </LABEL>
 <INPUT type="text" id="email"><BR>

 <INPUT type="radio" name="sex" value="Male"> Male<BR>
 <INPUT type="radio" name="sex" value="Female"> Female<BR>

 <INPUT type="submit" value="Send"> <INPUT type="reset">
 </P>
 </FORM>
 </body>
 </html> 
```

当我点击提交时，我在我的网络服务器上收到一个 POST http 请求。但不是获取所有字段的值。我只得到单选按钮的值。这是我得到的标题：

```
POST /Test.html HTTP/1.1
Host: 127.0.0.1:22222
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8) AppleWebKit/536.25 (KHTML, like Gecko) Version/6.0 Safari/536.25
Content-Length: 10
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*//*;q=0.8
Origin: http://127.0.0.1:22222
Content-Type: application/x-www-form-urlencoded
Referer: http://127.0.0.1:22222/File.html
Accept-Language: en-us
Accept-Encoding: gzip, deflate
Connection: keep-alive

sex=Female 
```

我期待数据显示在标题之后。为什么不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:01:06.147

我认为您需要`name`为所有输入定义属性

现在只有收音机有名字

```
<INPUT type="radio" name="sex" value="Male"> Male<BR>
<INPUT type="radio" name="sex" value="Female"> Female<BR> 
```

给出名称属性：

```
<LABEL for="lastname">Last name: </LABEL>
<INPUT type="text" id="lastname" name="lastname"><BR> 
```

# php - 无法重新声明函数错误

> ID：14760850
> 
> 赞同：0
> 
> 时间：2013-02-07T20:57:55.067
> 
> 标签：php

我收到一个我理解的错误，但不知道要修复的解决方案，我收到的错误指出：

> 致命错误：无法在第 269 行的 ... 中重新声明 ExpandOptionType()（之前在 ...:269 中声明）

下面是代码：

```
foreach ($arrQuestionId as $key=>$question) {

    ?>

    <div class='lt-container'>

    <p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrQuestionContent[$key]); ?></p>

    <?php

    function ExpandOptionType($option) { //LINE 269 
      $options = explode('-', $option);
      if(count($options) > 1) {
        $start = array_shift($options);
        $end = array_shift($options);
        do {
          $options[] = $start;
        }while(++$start <= $end);
      }
      else{
        $options = explode(' or ', $option);
      }
      return implode(" ", $options);
    }
    ?>

    <p><?php echo ExpandOptionType(htmlspecialchars($arrOptionType[$key])); ?></p>

    </div>

    <?php

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:00:30.707

将你的函数移到你的 foreach 循环之外......

# c# - setRequestHeader 未将请求标头添加到 wcf 调用

> ID：14760855
> 
> 赞同：2
> 
> 时间：2013-02-07T20:58:18.947
> 
> 标签：c#, jquery, ajax, wcf

我正在尝试使用 ajax 调用 wcf 函数，如下所示：

```
$.ajax({
        url:http://localhost:64121/Test.svc/json/GetNumber?X='+ var1 + '&callback=?',
        dataType: 'json',
        beforeSend : function(xhr) {
            xhr.setRequestHeader("Authorization", "BasicAuthTest");
        },
        success: function(trackingData) {
            alert("success");
        }
    }); 
```

WCF 代码正在鸣叫并正在接收请求

```
public class CustomUserNameValidatorBasic : ServiceAuthorizationManager
    {
        protected override bool CheckAccessCore(OperationContext operationContext)
        {
            try
            {
                var msg = operationContext.RequestContext.RequestMessage;

                // If user requests standart help-page then ignore authentication check.
                if (msg.Properties.ContainsKey("HttpOperationName") && msg.Properties["HttpOperationName"].ToString() == "HelpPageInvoke")
                {

                    return base.CheckAccessCore(operationContext);
                }

                var httpRequestHeaders = ((HttpRequestMessageProperty) msg.Properties[HttpRequestMessageProperty.Name]).Headers;

                // Is Authorization-header contained in http-headers?
                if (!httpRequestHeaders.AllKeys.Contains(HttpRequestHeader.Authorization.ToString()))
                {
                    //code returns here
                    return false;
                }

                    return false;

            }
            catch (Exception e)
            {
                return false;
            }

        }
    } 
```

如图所示，“授权”标头不包含在 req 标头数组中

![在此处输入图像描述](../Images/43966bd03aa68127b20509e7606954d3.png)

在 ajax reqeuest 的请求标头下的 Firebug 中：

> Request Headersview source Accept */* Accept-Encoding gzip, deflate
> Accept-Language en-US,en;q=0.5 Cache-Control max-age=0
> Connection keep-alive Host test.proxyU.com If-Modified-Since Wed, 21 Mar 2012 19:46:56 GMT If-None-Match "e0818-17278-4bbc60dc86c00"
> 用户代理 Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0)
> Gecko/20100101 Firefox/16.0

更新：考虑到下面的答案，我尝试了以下 3 种方法，它们都没有添加标题。所有人都正确调用 wcf，但“授权”标头不在请求中。如果我查看 http 请求，标题看起来非常像我在上面发布的屏幕截图

**方法一**

```
$.ajax({
        url: "http://localhost:64121/Test.svc/json/GetNumber?X='+ var1 + '&callback=?'",
        beforeSend: function(xhr){xhr.setRequestHeader("Authorization", "BasicAuthTest");},
        success: function(trackingData) {
            alert("success");
        }
    }); 
```

**方法二**

```
$.ajax({
        url: "http://localhost:64121/Test.svc/json/GetNumber?X='+ var1 + '&callback=?'",
        headers: {"Authorization": "BasicAuthTest"},
        success: function(trackingData) {
            alert("success");
        }
    }); 
```

**方法三**

```
$.ajax({
        url: "http://localhost:64121/Test.svc/json/GetNumber?X='+ var1 + '&callback=?'",
        beforeSend : function(xhr, settings) {
            $.extend(settings, { headers : { "Authorization" : "BasicAuthTest" } });
        },
        success: function(trackingData) {
            alert("success");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:16:48.533

来自[setRequestHeader()的文档](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#setRequestHeader%28%29)

> 您必须在 open() 之后、send() 之前调用 setRequestHeader()。

查看[jQuery 源代码](https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js#L4)， open() 在 send() 上调用，因此您无法通过 beforeSend() 中的 xhr 对象设置标题

$.ajax 上关于标头的 jQuery 文档说：

> 此设置在调用 beforeSend 函数之前设置；因此，headers 设置中的任何值都可以在 beforeSend 函数中被覆盖。

因此，您可以通过设置对象更新 beforeSend(xhr, settings) 中的标头，jQuery 会选择它们。

```
$.ajax({
    url:http://localhost:64121/Test.svc/json/GetNumber?X='+ var1 + '&callback=?',
    dataType: 'json',
    beforeSend : function(xhr, settings) {
        $.extend(settings, { headers : { "Authorization", "BasicAuthTest" } }
    },
    success: function(trackingData) {
        alert("success");
    }
}); 
```

或者，您可以将 headers 参数传递到您的 $.ajax() 调用中：

```
$.ajax({
    url: ...,
    headers : { "Authorization", "BasicAuthTest" }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:56:55.257

是的，这是一个跨域问题，我使用[了这个](http://channel9.msdn.com/shows/Endpoint/endpointtv-How-to-do-API-Key-Verification-with-a-WCF-WebHttp-REST-service/)Visual Studio 项目模板，它让事情变得相当容易。那里也有一个工作示例，用于从服务中获取 http

# data-binding - Ember.js：控制器之间的数据绑定

> ID：14760856
> 
> 赞同：5
> 
> 时间：2013-02-07T20:58:21.637
> 
> 标签：data-binding, controller, ember.js

我正在尝试将 ApplicationController 绑定到 IndexController。[这是我的 jsfiddle](http://jsfiddle.net/jeanluca/uB5tX/6/)。总而言之，这是我在应用程序控制器中的绑定

```
indexIsClickedBinding: "App.indexController.isClicked",

isIndexClicked: function() {
    alert("its changed to " + this.get("indexIsClicked") ) ;
}.observes('indexIsClicked'), 
```

因此，当 IndexController 中的**isClicked**值发生更改时， indexIsClickedBinding 不执行任何操作。有什么建议我的代码有什么问题吗？

干杯

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-07T23:15:37.977

虽然解决方案很简单，但让我尝试解释一下。如果您不确定，请随时提出任何问题。

您已**绑定**到`App.indexController`. 然而，这个实例并不存在，因为 Ember.JS 不再将控制器的实例直接放在`App`.

*它曾经驻留在`App`Ember 的早期版本中，但现在不再存在，因为使用其绝对名称引用控制器是不好的做法，因为它会在控制器之间创建[紧密耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)。*

这就是为什么 Ember.JS 有其他方式来引用控制器。在当前控制器中需要其他控制器是常见的要求。Ember.JS 有以下方法：

*   `this.controllerFor()`在`Ember.Route`：[http ://emberjs.com/guides/routing/setting-up-a-controller/](http://emberjs.com/guides/routing/setting-up-a-controller/)
*   **但是，controllerFor 现在已被弃用，取而代之的是：**
*   `needs`它告诉当前控制器它需要访问哪些控制器：[https ://github.com/emberjs/ember.js/pull/1731](https://github.com/emberjs/ember.js/pull/1731)

因此，如果我们实现`needs`，那么您的控制器现在可以访问另一个控制器，以及它拥有的属性：http: [//jsfiddle.net/uB5tX/7/](http://jsfiddle.net/uB5tX/7/)

通过使用`needs`，我们松散地耦合了控制器。我们已经通过它的名字引用了它，Ember.JS 将为我们查找控制器。如果我们改变`App`了，那么我们就不需要改变任何东西，并且如果/当 Ember.JS 改变了控制器的行为时，我们不需要`needs`再次更新我们的，因为当行为改变时，`needs`也会更新，带回来正确的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T11:41:22.813

您还可以使用以下语法来访问其他控制器的属性：

```
import Ember from 'ember';

export default Ember.Controller.extend({
  index: Ember.inject.controller('index'),
  indexIsClicked: Ember.computed.alias("index.isClicked"),

  isIndexClicked: Ember.observer('index.isClicked', function() {
    alert("its changed to " + this.get("indexIsClicked"));
  })
}); 
```

但是你需要让 Ember 首先初始化这个控制器，所以你实际上需要调用一些依赖的计算属性`index`（它会延迟初始化它）。因此，例如在我使用的模板中：

```
Is index clicked: <b>{{indexIsClicked}}</b> 
```

[工作演示。](https://ember-twiddle.com/8d22a0c79147a3783824)

# java - 正则表达式仅在某些输入上附加内容

> ID：14760857
> 
> 赞同：1
> 
> 时间：2013-02-07T20:58:25.603
> 
> 标签：java, regex

仅当单词之前没有附加字符串（此处`Calc!`）时，如何仅将字符串（此处）附加到某些单词（此处`B`（并后跟数字），例如）。例子 `B1/B2....``Input!``B1 -> Calc!B1`

和`Input!B1 -> Input!B1`（这里没有变化）

```
Input - "=B1+B4"
Output - "=Calc!B1+Calc!B4"

Input - "=DIVIDE(B2,Input!B1)"
Output - "=DIVIDE(Calc!B2,Input!B1)" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:12:00.570

[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

您可以替换此匹配项：

```
(?<!Input!)(?=B\d+) 
```

用这个替换：

```
Calc! 
```

更多细节：

`(?<!Input!)`匹配前面没有的位置`Input!`。

`(?=B\d+)`匹配后跟`B\d+`, 或`B`和至少一位数字的位置。

它们一起在您要插入的位置匹配`Calc!`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:12:21.537

这应该有效：

```
String output = input.replaceAll("(?<![!])B[0-9]+", "Calc!$0"); 
```

匹配输入的表达式构造如下：

```
(?<![!])B[0-9]+
 ^^^^^^ ^  ^  ^
    |   +--+--+--- Letter "B"
    |      +--+--- Followed by a digit
    |         +--- Repeated one or more times
    +------------- Unless preceded by an exclamation point 
```

[这是ideone的演示。](http://ideone.com/twYvWx)

# vim - 使用 Screen 粘贴时，为什么换行后会有多余的空格？

> ID：14760860
> 
> 赞同：9
> 
> 时间：2013-02-07T20:58:37.107
> 
> 标签：vim, whitespace, gnu-screen

我正在使用屏幕将我正在使用 Vim 查看的代码从一个窗口复制到另一个当前正在使用 Vim 编辑文件的窗口。不幸的是，当粘贴到第二个窗口时，在每个换行符之后，我的输入左侧会出现越来越多的空白。这个空白是如何进入我的缓冲区的？

我试图关闭自动缩进以防 Vim 添加额外的空格，但问题仍然存在。

以下是可能相关的信息：

*   操作系统 10.6.8
*   这两个文件都是 Unix 风格的。
*   屏幕版本：4.00.03
*   Vim 版本：7.3
*   底层终端类型为：xterm-color

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T21:18:33.250

你是用鼠标还是其他非vim方式复制？如果是，您必须`:set paste`在粘贴之前和`:set nopaste`之后进行。请参阅`:h pastetoggle`快速映射。

如果你所有的 vim 会话都是本地的并且 Vim 支持它（`:echo has('clipboard')<CR>`应该 echo `1`），你应该使用你的系统剪贴板：在没有那种讨厌的缩进的情况下`"+y`进行拉拽和粘贴。`"+p`

或者，更好的是，在同一个 Vim 会话中打开您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T13:14:51.880

问题来自 Vim 在行尾添加一个字符，一些用户添加例如 ↲</p `listchars`>`eol`

要删除这个额外的字符，您不需要在 listchars 中设置 eop，例如：

```
set listchars=tab:\ \ ,trail:-,extends:>,nbsp:\ ,precedes:< 
```

制表符将被空格替换，尾随空格将出现 - 等...

由于 eol 不存在，因此不会显示，这将解决您的问题

# javascript - Javascript：强制aspx父页面服务器刷新

> ID：14760862
> 
> 赞同：1
> 
> 时间：2013-02-07T20:58:44.673
> 
> 标签：javascript, asp.net, postback, code-behind

在子弹出窗口中，我有以下按钮。

```
<asp:Button Style="width: 100%;" ID="Button2" runat="server" OnClientClick="RefreshParent()"
 OnClick="Button1_Click" Text="Select Study" /> 
```

OnClick 功能允许用户选择一项更改整个站点内容的研究，这部分工作正常，因此未列出。

OnClientClick 函数应该刷新父页面，但不会导致客户端数据更新，除非我手动刷新页面 (F5)。这是 RefreshParent 代码。

```
<script type="text/javascript">
    function RefreshParent() {
        window.opener.document.reload()
        window.close();
    }
</script> 
```

在我也尝试过的功能中：

```
window.opener.document.reload(true) 
```

和

```
window.opener.document.href("home.aspx") 
```

没有任何效果。是否有一种方法会导致服务器从子窗口回发，其中包含代码或 javascript？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:29:53.377

你有没有尝试过 ：

```
<script type="text/javascript">
    function RefreshParent() {
        window.opener.location.reload();
        window.close();
    }
</script> 
```

您可能还想在 OnClientClick 中返回 false （在您关闭窗口时并不是真正的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:40:37.093

我认为正在发生的事情是您的父页面的重新加载是在您的弹出窗口 OnClick 方法执行之前完成的。为了在回发完成后执行重新加载脚本，我建议您将脚本包装在回发后显示的占位符中：

```
<asp:placeholder id="refresh_script" visible="false" runat="server">
  <script type="text/javascript">
    window.opener.location.reload();
    window.close();
  </script>
</asp:placeholder> 
```

在您的 OnClick 处理程序中：

```
refresh_script.Visible = true; 
```

从您的按钮中删除 OnClientClick 处理程序。

# postgresql - Postgres 9.2 - 添加条件约束检查

> ID：14760864
> 
> 赞同：17
> 
> 时间：2013-02-07T20:59:05.947
> 
> 标签：postgresql, drupal, constraints, postgresql-9.2

我正在使用 PostgreSQL 9.2，需要在列上添加条件约束。本质上，我想确保当其他两列具有特定值时，一列为假。

```
gid          | int_unsigned           | not null default 0
realm        | character varying(255) | not null default ''::character varying
grant_update | smallint_unsigned      | not null default (0)::smallint
grant_delete | smallint_unsigned      | not null default (0)::smallint 
```

例子：

```
alter table node_access add constraint block_anonymous_page_edit
check (grant_update = 0 WHERE (gid = 1 AND realm = 'nodeaccess_rid')); 
```

这应该做的是确保**当 gid 为 1 且 realm = nodeaccess_rid 时 grant_update 等于 0**。但是，我认为与其做我想做的事，不如说它实际上是在尝试让所有列都模仿这些值。本质上，它试图确保grant_update 始终为0，gid 始终为1，并且realm 始终为nodeaccess_rid。我得到的错误是：

```
ERROR:  check constraint "block_anonymous_page_edit" is violated by some row 
```

**编辑**

我认为这必须是一个在更新时触发的功能。

**编辑**

我在上面的问题中添加了一行，因此在下面的评论中更新了批准的解决方案。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-10T07:37:33.480

一旦你围绕逻辑思考，它就是简单的[**`CHECK`约束**](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-CHECK-CONSTRAINTS)：

```
CREATE TABLE tbl (
  gid          int      NOT NULL DEFAULT 0
, realm        text     NOT NULL DEFAULT ''
, grant_update smallint NOT NULL DEFAULT 0
, CONSTRAINT block_anonymous_page_edit
  CHECK (gid <> 1 OR realm <> 'nodeaccess_rid' OR grant_update = 0)
); 
```

测试：

```
-- these work:
INSERT INTO tbl(gid, realm, grant_update)
VALUES (1, 'nodeaccess_rid', 0);

INSERT INTO tbl(gid, realm, grant_update)
VALUES (1, 'some_string',    1);

INSERT INTO tbl(gid, realm, grant_update)
VALUES (2, 'nodeaccess_rid', 1);

-- check violation!
INSERT INTO tbl(gid, realm, grant_update)
VALUES (1, 'nodeaccess_rid', 1); 
```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=31cf5f40c8f3c0d572e59f99a258484c)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:03:55.930

我会把它写成触发器。这使您可以灵活地提出错误（可能使用最适合测试的自定义代码）或仅处理问题并在 gid=1 和 realm = 'nodeaccess_rid' 时设置 grant_update = 0

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-08T21:10:54.980

我最终选择了触发功能。这将检查角色并使用布尔型字段 grant_update 和 grant_delete 将不需要的功能设置为关闭。下面的函数还保留了 grant_view 值而不是覆盖它。

```
CREATE OR REPLACE function block_anonymous_page_edit()
RETURNS trigger AS $function$
BEGIN
  IF NEW.gid = 1 AND NEW.realm != 'nodeaccess_author' AND (NEW.grant_update = 1 OR NEW.grant_delete = 1) THEN
    RAISE WARNING 'Anonymous users are not allowed to edit pages.';
    NEW.grant_update := 0;
    NEW.grant_delete := 0;
  END IF;
  RETURN NEW;
END;
$function$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_block_anonymous_page_edit BEFORE INSERT OR UPDATE ON node_access FOR EACH ROW EXECUTE PROCEDURE block_anonymous_page_edit(); 
```

# security - 允许某些脚本设置内联样式

> ID：14760874
> 
> 赞同：3
> 
> 时间：2013-02-07T20:59:48.000
> 
> 标签：security, styles, http-headers, content-security-policy

我正在使用 csp 标头保护我的页面。我设置了`X-Content-Security-Policy`和`X-Webkit-CSP`。为以下值：

```
default-src 'self';
object-src 'none';
frame-src 'self' *.youtube.com;
style-src 'self' https://ajax.googleapis.com;
script-src 'self' https://ajax.googleapis.com;
report-uri /csp_report 
```

一切正常，但我在 chrome 中收到以下错误。我还没有在其他浏览器中测试它。

```
Refused to apply inline style because it violates the following Content 
Security Policy directive: "style-src 'self' https://ajax.googleapis.com". 
```

引用当前域上脚本中的一行，它试图插入一些包含内联样式的 HTML。有没有办法允许我在 script-src 中列入白名单的脚本执行此操作？对于托管在 ajax.googleapis.com 上的 jquery，我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:14:52.593

我忽略了`'unsafe-inline'`。我允许加载的资源可以通过这样做来使用内联样式：

```
style-src 'unsafe-inline' 
```

# mediaelement.js - 一页上有许多 mediaelementjs 音频元素的问题

> ID：14760875
> 
> 赞同：0
> 
> 时间：2013-02-07T20:59:52.687
> 
> 标签：mediaelement.js

我在一个网页上有 47 个 mediaelementjs 音频元素。当我打开页面时，他们都尝试预加载，蓝色的小进度条到处飞。他们中的一些人成功了，但其他人从未开始。其中每一个的 src 标记都指向我的 Dropbox 帐户上的一个 mp3 文件。当我点击那些从未开始的游戏时，他们不会玩。我想做的是，除非用户单击其中一个播放，否则它们都不会开始下载。

我尝试将 src 设置为 '' 并设置 onclick="this.src='the url'" 但这不起作用。它试图要求用户下载丢失的歌曲。

如果需要，我会尝试编码修复，但似乎应该有一种简单的方法来禁用预加载，直到你真的需要它来处理这种情况？有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:31:02.123

我遇到了几乎相同的问题，我发现 mediaelementjs 在大多数浏览器上不支持多个实例。所以我为此使用了 UbaPlayer。如果这不可行，请尝试在每个音频标签上设置一个唯一递增的 id，如 player1、player2... 并像这样动态实例化它们：

```
var players = [];

$('audio').each(function(i){

    players[i] = new MediaElementPlayer('#player'+i, {
        features: ['playpause', 'progress'],
        audioWidth: 250, audioHeight: 30,
        success: function (mediaElement) { mediaElement.pause(); mediaElement.load(); }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:19:40.747

嘿，欢迎！

您的问题的**简单答案**是将 preload 参数放在每个音频标签中，如下所示：

`<audio src="http://yourdropbox.mp3" preload="none"></audio>`

这应该可以解决所有玩家一次加载的问题。

更长的**答案**是，对于大多数应用程序来说，一个页面上的许多播放器需要更多的工作才能让每个视频都能正常播放（相信我自己为此汗流浃背）。

首先，我相信前面提到的 preload 参数在 IE9 中没有任何作用。为了解决这个问题，我添加了强制 IE9 进入 shim 模式的代码。

```
$('audio').mediaelementplayer({ 
    /*@cc_on
    @if (@_jscript_version == 9)
    mode: 'shim',
    @end
    @*/
    plugins: ['flash','silverlight']
}); 
```

现在您应该可以在一个页面上拥有多个音频播放器，而不会出现任何加载问题。但是，您可能会发现，少数玩家仍然无法工作。这是因为当 mediaelement.js 被激活时，浏览器会发送一个下载每个音频文件的请求。它可能适用于快速的互联网连接，但在其他情况下会失败。因此，最好的解决方案是只显示一部分音频播放器，然后让用户单击一个按钮（或滚动到底部）以显示更多。

# javascript - 对 Intersango.com 的 NodeJS HTTPS 请求

> ID：14760879
> 
> 赞同：0
> 
> 时间：2013-02-07T21:00:12.457
> 
> 标签：javascript, api, node.js, https, bitcoin

我提出的请求有问题，我无法弄清楚。似乎一切都符合[API 规范](https://intersango.com/api.php)。

这是代码：

```
var request = require('https').request;

var opts = {
  host: 'intersango.com',
  method: 'GET',
  path: '/api/ticker.php',
  port: 443,
  accept: '*/*',
  headers: { 'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:10.0) Gecko/20100101 Firefox/10.0' } };

var req = request(opts, function (result) {
        result.setEncoding('utf8');
        var buffer = '';
        result.on('data', function(data) {
            buffer += data;
        });
        result.on('end', function() {
            console.log('<- Received ' + buffer.length + ' bytes');
            var data = JSON.parse(buffer);
            console.log(data);
        });
    });

req.on('error', function(e) {
        console.log('warning: problem with request: ' + e.message);
    });

console.log('-> ' + opts['method'] + ' ' + opts['host'] + ':' + opts['port'] + opts['path']);

req.end(); 
```

这是输出：

```
$> node test.intersango.js
-> GET intersango.com:443/api/ticker.php
warning: problem with request: socket hang up 
```

有趣的是，如果你在浏览器中访问[https://intersango.com/api/ticker.php就可以了，](https://intersango.com/api/ticker.php)**但如果你只是访问[intersango.com:443/api/ticker.php](http://intersango.com:443/api/ticker.php)**就不行了。我尝试了[其他一些端口](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers?highlight=https)，但它只是给出了`warning: problem with request: connect ECONNREFUSED`

*注意：尝试 POST 也无济于事*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:14:55.137

只是为了确认，降级 Node 确实解决了这个问题。

# android - 无法用 Fragment 替换 Activity

> ID：14760885
> 
> 赞同：0
> 
> 时间：2013-02-07T21:00:32.190
> 
> 标签：android, mobile, nullpointerexception

当我单击开始按钮时，我希望我的活动切换到片段。当我尝试替换时，它给了我一个空指针异常。这是为什么？

我需要一些帮助，因为我很快就会交出这个任务。

```
package com.example.quizapp;

import android.app.Activity;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.content.Intent;
import android.os.Bundle;
import android.view.Display;
import android.view.Menu;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;

public class MainActivity extends Activity {
    private Fragment1 newFragment1;
    private FragmentTransaction ft;
    private Button startButton1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        startButton1 = (Button) findViewById(R.id.startButton);
        startButton1.setOnClickListener(myhandler1);

        ft = getFragmentManager().beginTransaction();
        newFragment1 = (Fragment1) getFragmentManager().findFragmentById(R.layout.fragment1);

    }

    View.OnClickListener myhandler1 = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            ft.replace(R.layout.main, newFragment1);
        }
    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是日志猫：

```
02-07 20:56:06.823: E/AndroidRuntime(1902): FATAL EXCEPTION: main
02-07 20:56:06.823: E/AndroidRuntime(1902): java.lang.NullPointerException
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.app.BackStackRecord.doAddOp(BackStackRecord.java:394)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.app.BackStackRecord.replace(BackStackRecord.java:429)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.app.BackStackRecord.replace(BackStackRecord.java:421)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at com.example.quizapp.MainActivity$1.onClick(MainActivity.java:35)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.view.View.performClick(View.java:4202)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.view.View$PerformClick.run(View.java:17340)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.os.Handler.handleCallback(Handler.java:725)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.os.Looper.loop(Looper.java:137)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at java.lang.reflect.Method.invokeNative(Native Method)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at java.lang.reflect.Method.invoke(Method.java:511)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-07 20:56:06.823: E/AndroidRuntime(1902):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="#FFF" >

    <fragment 
        android:name="com.example.quiz.Fragment1"
        android:id="@+id/fragment1"
        android:layout_height="match_parent" />

    <Button
        android:id="@+id/startButton"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:onClick="startButtonClicked"
        android:text="Start quiz!" />

</RelativeLayout> 
```

在我按照你说的做之后，现在看看错误：

```
02-07 23:19:50.171: E/AndroidRuntime(869): FATAL EXCEPTION: main
02-07 23:19:50.171: E/AndroidRuntime(869): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.quizapp/com.example.quizapp.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.os.Looper.loop(Looper.java:137)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-07 23:19:50.171: E/AndroidRuntime(869):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 23:19:50.171: E/AndroidRuntime(869):  at java.lang.reflect.Method.invoke(Method.java:511)
02-07 23:19:50.171: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-07 23:19:50.171: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-07 23:19:50.171: E/AndroidRuntime(869):  at dalvik.system.NativeStart.main(Native Method)
02-07 23:19:50.171: E/AndroidRuntime(869): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-07 23:19:50.171: E/AndroidRuntime(869):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.Activity.setContentView(Activity.java:1881)
02-07 23:19:50.171: E/AndroidRuntime(869):  at com.example.quizapp.MainActivity.onCreate(MainActivity.java:23)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.Activity.performCreate(Activity.java:5104)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-07 23:19:50.171: E/AndroidRuntime(869):  ... 11 more
02-07 23:19:50.171: E/AndroidRuntime(869): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.quiz.Fragment1: make sure class name exists, is public, and has an empty constructor that is public
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.Fragment.instantiate(Fragment.java:592)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.Fragment.instantiate(Fragment.java:560)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.Activity.onCreateView(Activity.java:4709)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
02-07 23:19:50.171: E/AndroidRuntime(869):  ... 21 more
02-07 23:19:50.171: E/AndroidRuntime(869): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.quiz.Fragment1" on path: /data/app/com.example.quizapp-2.apk
02-07 23:19:50.171: E/AndroidRuntime(869):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-07 23:19:50.171: E/AndroidRuntime(869):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-07 23:19:50.171: E/AndroidRuntime(869):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-07 23:19:50.171: E/AndroidRuntime(869):  at android.app.Fragment.instantiate(Fragment.java:582)
02-07 23:19:50.171: E/AndroidRuntime(869):  ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:06:45.287

看来这是有问题的路线；

```
ft.replace(R.layout.main, newFragment1); 
```

'replace' 的第一个参数必须是 ' **id** ' 而不是 'layout'。'id' 必须是视图的 id。

在不知道您的 layout-xml (main.xml) 的外观的情况下，我无法告诉您“replace”的第一个参数的正确值是多少。您的代码如下所示：

```
ft.replace(R.id.some_view_id, newFragment1); 
```

您对此语句有同样的问题：

```
getFragmentManager().findFragmentById(R.layout.fragment1); 
```

再次，R.layout.... 是错误的。应该是 R. **id** ....

如果您可以向我们展示您的 main.xml，我们可以为您提供更好的帮助。

**显示 XML 后更新：**

在你的 onCreate 中去掉这个语句：

```
ft = getFragmentManager().beginTransaction(); 
```

然后替换这个

```
newFragment1 = (Fragment1) getFragmentManager().findFragmentById(R.layout.fragment1); 
```

和

```
newFragment1 = (Fragment1) getFragmentManager().findFragmentById(R.id.fragment1); 
```

和

替换这个

```
ft.replace(R.layout.main, newFragment1); 
```

和

```
ft = getFragmentManager().beginTransaction();
ft.replace(R.id.fragment1, newFragment1).commit(); 
```

这可能会使您的代码不会崩溃，但您会用自己替换 R.id.fragment1 ......没有变化。您要替换旧的 newFragment1的**新片段在哪里（因为您在 onCreate 中找到了那个片段）？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:04:52.367

为它提供一个标签

```
ft.replace(R.layout.main, newFragment1, "my_new_awesome_frag"); 
```

这在过去对我来说已经解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:06:37.363

这段代码有几个问题。第一个问题是您不能用“动态”片段替换“静态”片段。看：

[http://portabledroid.wordpress.com/2011/04/19/programmatic-and-layout-fragments/#comments](http://portabledroid.wordpress.com/2011/04/19/programmatic-and-layout-fragments/#comments)

第二个问题是您需要提交您的事务。我建议在 onClick 处理程序中获取事务、进行替换并提交它。有示例代码显示如何正确地添加然后替换片段，这里：

[https://github.com/marakana/yamba/tree/yambaII](https://github.com/marakana/yamba/tree/yambaII)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T21:06:03.387

you have not inflated your fragment . Read the documentation of [findFragmentById()](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentById%28int%29)

It clearly states

**Returns** **The fragment if found or null otherwise.**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T08:02:43.243

这是我的 Fragment1.java 类：

```
package com.example.quizapp;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Fragment1 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.fragment1, container, false);

    }
} 
```

# javascript - Sencha Touch：如何在 hbox 面板中创建列表

> ID：14760888
> 
> 赞同：0
> 
> 时间：2013-02-07T21:00:39.047
> 
> 标签：javascript, mobile, extjs, sencha-touch, sencha-touch-2

我有一个导航视图，其中包含一个选项卡视图，我想在其中添加一个包含并列的 hbox 面板和另一个并排的面板。但是，当我尝试将列表添加到面板时，什么也没有显示。我想知道如何做到这一点 ![在此处输入图像描述](../Images/56ed237545cdf6b600159335fd731bb7.png) **导航视图**

```
Ext.define('MyApp.view.Navigation', {
    extend: 'Ext.navigation.View',
    id: 'NavView',
    xtype: 'navigationcard',
    onBackButtonTap: function () {
        //if on forms screen and button is visible remove add form button
        var self = Ext.getCmp('NavView');
        var naviBtn = Ext.getCmp('addNewFormBtn');
        if (naviBtn != null) {
            naviBtn.hide();
        }
        self.pop();
    },
    config: {
        title: 'Schedule',
        iconCls: 'settings',
        navigationBar: {
            items: [{
                xtype: 'button',
                text: 'Add New Form',
                align: 'right',
                id: 'addNewFormBtn',
                hidden: true,
                handler: function () {

            }
            }]
        },
        //we only give it one item by default, which will be the only item in the 'stack' when it loads
        items: [
                   {
                       xtype: 'mainview'
                   }
        ]
    }
}); 
```

**选项卡面板**

```
Ext.define('MyApp.view.Main', {
    extend: 'Ext.TabPanel',
    xtype: ['mainview', 'widget.mainview'],
    config: {
        title:'MyApp',
        fullscreen: true,
        tabBarPosition: 'bottom',
        defaults: {
            styleHtmlContent: true
        },
        items: [
            contain ,
            { xtype: 'settingscard' }
        ]
    }

}); 
```

**带有 Hbox 和列表的面板**

```
var testData = [];
for (var i = 0; i < 40; i++)
{ testData.push({ txt: "test" }); }

var storesdasd = Ext.create('Ext.data.Store', {
    data: testData
});

var contain = Ext.create('Ext.Panel', {
    fullscreen: true,
    layout: 'hbox',
    title: 'Schedules',
    iconCls: 'time',
    items: [{
        xtype: 'list',
        itemTpl: '{txt}',
        store: storesdasd,
        flex: 1,
        height: 'auto'
    }

    , {
        html: 'message preview',
        style: 'background-color: #759E60;',
        flex: 2,
        height: '100'
    }],
    config: {
        title: 'Schedules',
        iconCls: 'time'
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:06:09.380

我没有将所有这些部分单独放在不同的文件中，而是将它们放在启动功能中`Ext.application`，这似乎奏效了，尽管不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:51:55.307

采用：

```
layout: {
    type: 'hbox',
    align: 'stretch'
} 
```

删除子项的高度配置。还要删除包含面板上的全屏配置。

# javascript - 从两个下拉列表中删除选项

> ID：14760889
> 
> 赞同：0
> 
> 时间：2013-02-07T21:00:42.183
> 
> 标签：javascript, jquery, select, listbox

所以我有两个下拉菜单，像这样：

```
<select id="listbox" name="listbox" multiple="multiple">
            <option> value a </option>
            <option> value b </option>
            <option> value c </option>
 </select>

<select id="listbox2" name="listbox2" multiple="multiple">
            <option> value 1 </option>
            <option> value 2 </option>
            <option> value 3 </option>
 </select> 
```

所以当用户选择`value a`并点击“删除”按钮时，应该删除`value a`其对应的位置`value 1`，反之亦然。

我有一个 Javascript 代码，但它不能正常工作，这里是：

```
function removeOption() {
    var x = new Array();
    x[0] = document.getElementById("listbox");
    x[1] = document.getElementById("listbox2");

    x[0].remove(x[0].selectedIndex);
    x[1].remove(x[1].selectedIndex);
} 
```

大家能帮帮我吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:11:23.243

试试这个

```
function removeOption() {
    var listbox = document.getElementById('listbox');
    var listbox2 = document.getElementById('listbox2');

    var selectedIndex = 
        (listbox.selectedIndex == -1) ? listbox2.selectedIndex : listbox.selectedIndex;

    var selItem1 = listbox.options[selectedIndex];
    var selItem2 = listbox2.options[selectedIndex];

    selItem1.remove();
    selItem2.remove();
} 
```

JS 小提琴：http: [//jsfiddle.net/mDX9Q/](http://jsfiddle.net/mDX9Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:18:55.480

你可以使用这个功能

```
function removeselected(d1,d2){
             element=document.getElementById(d1);
             element1=document.getElementById(d2);
             var value= new Array();
             var value1= new Array();
             while(element.selectedIndex != -1)
             {
                var t=element.selectedIndex;
                value.push(element.options[t]);
                value1.push(element1.options[t]);
                element.options[t].selected = false;
             }
             for(var i = 0; i < value.length; i++)
             {
                 element.removeChild(value[i]);
                 element1.removeChild(value1[i]);
             };

   } 
```

打电话用这个

```
 function remover(){
     removeselected('listbox','listbox2');
     removeselected('listbox2','listbox');
  } 
```

调用时从下拉列表中删除所有选择，并从其他下拉列表中删除类似索引

# cuda - 在 __global__ 函数中使用 CUDA 数学函数 - Nsight Eclipse 版

> ID：14760893
> 
> 赞同：4
> 
> 时间：2013-02-07T21:01:13.810
> 
> 标签：cuda

我正在尝试在 __global__ 函数中使用数学函数（pow），但出现此错误：

```
 calling a __host__ function("std::pow<float, double> ") from a __global__ function is not allowed 
```

我试图检查项目属性->构建->设置->工具设置->优化下的“使用快速数学库”复选框，但没有运气。

我检查了 pow 函数中的类型，它们都是浮点数，我还包含了这些头文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <math.h>
#include <sys/times.h>
#include <sys/resource.h>
#include <limits.h>
#include <unistd.h>
#include <time.h>
#include <string.h>
#include "utils.h" 
```

也没有 using namespace std

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T21:07:34.867

您需要更仔细地阅读错误消息。关键信息是

```
std::pow<float, double> 
```

注意：`<float,double>`。你有`pow`一个双精度和单精度参数的调用。CUDA 数学库是通过选定标准库函数的模板重载实现的，但您拥有的参数没有匹配的重载。修复您的代码以具有所有双精度或所有单精度参数，并且错误将消失。

# sharepoint-workflow - Sharepoint 2013 中的 Visio 工作流可视化

> ID：14760898
> 
> 赞同：0
> 
> 时间：2013-02-07T21:01:30.873
> 
> 标签：sharepoint-workflow

您能否确认我们在 Sharepoint 2013 中没有新工作流的 Visio 可视化？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:14:03.517

答案是肯定的。Visio 可视化不适用于 2013 wokflows

# jquery - 两个代码之间的jquery冲突

> ID：14760899
> 
> 赞同：0
> 
> 时间：2013-02-07T21:01:31.530
> 
> 标签：jquery, conflict

我在两个 jquery 代码之间有问题

第一个代码帮助上传图片，第二个：注册表单数据返回

第一的：

```
jQuery(function(){
    var btnUpload = jQuery('#avatar');
    new AjaxUpload(btnUpload, {
        action: 'process/pic.php',
        name: 'avatar',
        onSubmit: function(file, ext){
            if (! (ext && /^(jpg|jpeg)$/i.test(ext))){

                // extension is not allowed
                showNotification({type : "information", message: 'Tikai *.jpg un *.jpeg formats.'});
                return false;
            }
            showNotification({type : "information", message: '<img src="img/loader.gif" />'});
        },
        onComplete: function(file, response){
            if(response){
                location.reload(true);
            }
        }
    });
}); 
```

和两个：

```
jQuery(function() {
    jQuery('#reg').submit(function() {
        jQuery.ajax({
            type: "POST",
            url: jQuery('#reg').attr('action'),
            data: jQuery('#reg').serialize(),
            success: function(data) {
                if(data){
                    showNotification({type : "warning", message: data});
                }else{
                    location.reload(true);
                }               
            }
        });
        return false;
    });
}); 
```

第一个代码工作得很好，但第二个代码在删除第一个代码时不起作用。为什么？

抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:10:25.840

您是否尝试过在一个 jQuery(function(){}) 中添加这两个函数，如下所示：

```
jQuery(function(){

//the 1st function 
var btnUpload = jQuery('#avatar');
new AjaxUpload(btnUpload, {
    action: 'process/pic.php',
    name: 'avatar',
    onSubmit: function(file, ext){
        if (! (ext && /^(jpg|jpeg)$/i.test(ext))){

            // extension is not allowed
            showNotification({type : "information", message: 'Tikai *.jpg un *.jpeg formāts.'});
            return false;
        }
        showNotification({type : "information", message: '<img src="img/loader.gif" />'});
    },
    onComplete: function(file, response){
        if(response){
            location.reload(true);
        }
    }
});

 //the 2nd function 

 jQuery('#reg').submit(function() { jQuery.ajax({ type: "POST", url: jQuery('#reg').attr('action'), data: jQuery('#reg').serialize(), success: function(data) { if(data){ showNotification({type : "warning", message: data}); }else{ location.reload(true); }
} }); return false; }); 

                }); 
```

# haskell - 在 Haskell 中是否有任何现成的词法分析解决方案允许运行时动态词典？

> ID：14760902
> 
> 赞同：7
> 
> 时间：2013-02-07T21:01:45.393
> 
> 标签：haskell, nlp, lexical-analysis, alex

我正在开发一个小型 Haskell 项目，该项目需要能够将一个非常小的严格格式的英语子集转换为用于语义解析的标记。对于具有许多不同末端执行器的系统来说，这是一个非常幼稚的自然语言界面，而不是可以发出命令。我目前正在为此使用 Alex，但 Alex 依赖其词典进行静态编译。系统的本质是编译后世界上末端执行器的数量甚至类型可以增加也可以减少，因此我需要能够在运行时从词典中添加或删除可行的标记。

我试过四处寻找动态词法分析解决方案，我能得到的最接近的是[这个](http://www.nondot.org/sabre/Projects/HaskellLexer/)动态词法引擎，它看起来自 2000 年以来就没有更新过。

我一直在考虑一些技术，比如使用不太高级的方法（也许是 Attoparsec），或者甚至为 Alex 连接一个重新编译钩子并将词法分析器与应用程序的其余部分分开。

这种词法分析有什么众所周知的解决方案吗？我打算最终[为工作程序员完成自然语言处理，](http://nlpwp.org/book/index.xhtml)这样我就可以采取一种不太简化的方法，但目前我需要一个基本的词法分析器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:44:54.860

[CTK](http://www.cse.unsw.edu.au/~chak/haskell/ctk/)相当于 parsec，但用于词法分析。它支持动态添加新的组合器。

# php - 在 Wordpress 中通过 URL 链接传递 PHP 变量

> ID：14760907
> 
> 赞同：0
> 
> 时间：2013-02-07T21:02:07.813
> 
> 标签：php, wordpress, variables

我试图通过用户单击链接将变量从 MYSQL 查询传递到另一个页面。

我的查询在表格中列出了许多报告。我希望用户能够单击表中的报告编号，然后将用户发送到另一个页面，我计划在该页面中根据链接中发送的报告编号变量运行另一个查询。

这是打印出表格行的代码：

```
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['report_number'] . "</td>";
  echo "<td class='tableleft'>" . $row['inspector'] . "</td>";
  echo "<td class='tableleft'>" . $row['idate'] . "</td>";
  echo "<td class='tableleft'>" . $row['vendor'] . "</td>";  
  echo "</tr>";
} 
```

带有字符串 $row['report_number'] 的第一行是我想通过链接传递到另一个页面的变量。

我遇到的问题是这是在 Wordpress 页面上执行的，因此我必须链接到的页面（Wordpress 中的另一个页面）没有 .php 页面类型。

我不知道如何编写链接以在没有 .php 的情况下传递变量，如本例所示：

```
<a href="edit_form.php?id=<?php echo $row['ID']; ?>">Edit</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:26:54.857

找到了答案。

将语法更改为：

```
<td><a href="http://my.site.com/page/page?report=<? echo $row['report_number']; ?>"><? echo $row['report_number']; ?></a></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:20:34.347

您的链接中不需要 .php。您可以使用链接，例如：[http://site.com/page?id=2&something=10](http://site.com/page?id=2&something=10)。所以，要清楚，在链接到您要链接到的页面之后，输入“？” 并附加变量。

还有一件事。您必须小心 Wordpress 中的 GET 和 POST 变量名称，因为其中一些是受限制的，并且可能会从您的请求中截断。

希望这可以帮助。

# mysql - MySQL数据库设计引导表到客户表

> ID：14760908
> 
> 赞同：0
> 
> 时间：2013-02-07T21:02:21.607
> 
> 标签：mysql

好的，所以我试图找出解决这个问题的最佳设计。我正在尝试创建一个数据库，其中包含潜在客户、客户和合同。我在想的是我应该为潜在客户和客户准备两张桌子。尽管这些希望是相同的实体。我对此的第二个想法是创建一个名为 client_status 的表，看起来像这样。

```
CREATE TABLE status(
  status_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  status_name VARCHAR(40) NOT NULL,
  PRIMARY KEY(status_id)
);
  INSERT INTO status (status_id, status_name) VALUES ( '1', 'Prospect');
  INSERT INTO status (status_id, status_name) VALUES ( '2', 'Client');

CREATE TABLE client(
  client_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  fname VARCHAR(40) NOT NULL,
  mname VARCHAR(40) NOT NULL,
  lname VARCHAR(40) NOT NULL,
  PRIMARY KEY(client_id)
);

CREATE TABLE client_status(
  status_id INTEGER UNSIGNED NOT NULL,
  client_id INTEGER UNSIGNED NOT NULL,
  FOREIGN KEY(status_id) REFERENCES status(status_id),
  FOREIGN KEY(client_id) REFERENCES clients(client_id)
); 
```

这是处理手头问题的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:05:07.077

这正是我要设置的方式。这使您可以拥有`client`多个状态。

我的一个建议是`PRIMARY KEY`在`client_status`桌子上创建两列。

# arrays - 我可以使用整数数组作为 Delphi 中的记录字段吗？

> ID：14760912
> 
> 赞同：1
> 
> 时间：2013-02-07T21:02:34.223
> 
> 标签：arrays, delphi, record

我正在将文本文件读入记录数组。文本文件中的部分数据是课程成绩和考试成绩。我可以声明一个整数数组来将程序或测试值折叠为记录中的一个字段吗？如果是这样，那么我如何访问该字段中的各个程序值？例如，我可以这样声明记录吗？如果是这样，我将如何输入或访问来自 test[3] 的数据？

```
nametype = record
  first : string[10];
  mi : string[3];
  last : string[30];
end;
stype = record
  id : integer;
  name : nametype;
  prog : array[1..10] of integer;
  test : array[1..3] of integer;
  progave, quizave : real;
  average : double;
  grade : char;
end;
sarraytype = array[1..100] of stype;
var
  student : sarraytype; 
```

所以我想我被困在哪里是读入这些数组。到目前为止，对于我的阅读，我有：

```
procedure TstudentData.openButtonClick(Sender: TObject);
   begin
     var i : integer;
     if open.execute then
     begin
      assignfile(inf,open.FileName);
      reset(inf);
      i := 1;
      while not eof(inf) do with student[i] do
      begin
         readln(inf, id, name.first, name.mi, name.last);
         i := i + 1;
      end;
   end;
   i:=1;
end; 
```

我已经读取了其他数据，但是我完全不知道如何读取 prog 和 test 数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:17:37.477

你可以。举个例子...

```
var
  a: sarraytype;
  i, j: integer;
begin
  for i := low(a) to High(a) do
    for j := low(a[i].test) to High(a[i].test) do
      a[i].test[j] := i * 100 + j;
  for i := low(a) to High(a) do
    for j := low(a[i].test) to High(a[i].test) do
      Memo1.Lines.Add(IntToStr(a[i].test[j]));

end; 
```

作为对您评论的回应

```
var
  a,b: sarraytype;
  i, j: integer;
  fs:TFileStream;
begin
  for i := low(a) to High(a) do
    begin
    for j := low(a[i].test) to High(a[i].test) do
      a[i].test[j] := i * 100 + j;
    a[i].name.first := 'Test' + IntToStr(i);
    end;

  fs := TFileStream.Create('C:\temp\test.bin',fmCreate);
  try
  fs.Write(a,sizeOf(a));
  finally
    fs.Free;
  end;

  fs := TFileStream.Create('C:\temp\test.bin',fmopenRead);
  try
  fs.Read(b,sizeOf(b));
  finally
    fs.Free;
  end;

  for i := low(b) to High(b) do
    begin
    memo1.Lines.Add(b[i].name.first);
    for j := low(b[i].test) to High(b[i].test) do
      Memo1.Lines.Add(IntToStr(b[i].test[j]));

    end;

end; 
```

顺便提一句：

通常的命名是

```
Tnametype = record
  first : string[10];
  mi : string[3];
  last : string[30];
end;
Tstype = record
  id : integer;
  name : nametype;
  prog : array[1..10] of integer;
  test : array[1..3] of integer;
  progave, quizave : real;
  average : double;
  grade : char;
end;

Tsarraytype = array[1..100] of stype; 
```

# ruby-on-rails - FactoryGirl 为 rspec 中的对象调用“original_filename”

> ID：14760914
> 
> 赞同：2
> 
> 时间：2013-02-07T21:02:38.643
> 
> 标签：ruby-on-rails, file-upload, rspec, factory-bot

我正在使用 Documents 类，试图对其进行测试。我定义了以下工厂：

```
require 'factory_girl'

FactoryGirl.define do
  factory :document do
    user_id                 '6315'
    name                    'Test doc'
    description             'W9'
    filename                'test_doc.pdf'
    filetype                'file'
    filesize                500
  end

  factory :invalid_doc, parent: :document do
    filesize                5242900
  end
end 
```

使用以下辅助方法访问测试中的正确属性：

```
def build_attributes(*args)
  attrs = FactoryGirl.build(*args).attributes
  attrs.delete_if do |k, v| 
    ["id", "created_at", "updated_at"].member?(k)
  end
  paramify_values(attrs)
end 
```

在每次测试之前我运行：

```
before(:each) do
  login_as_admin
  @doc = @user.documents.create(FactoryGirl.attributes_for(:document))
end 
```

其中@user 在`login_as_admin`宏中设置。在我的测试中，我正在运行这个：

```
describe 'POST #create' do
  it "should create a new document" do
    expect{
      post :create, document: build_attributes(:document, user_id: @doc.user_id)
    }.to change(Document,:count).by(1)
  end

  it "should find the right user" do
    post :create, document: build_attributes(:document, user_id: @doc.user_id)
    assigns(:user).should eq(@user)
  end

  # some other tests...
end 
```

[本文](http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html)建议前一种测试，后者正是我认为应该发生的。控制器操作为实例分配以下内容：

```
@user = User.find(document[:user_id]) 
```

所以，很标准。但是，这两个测试都会抛出相同的错误，

```
Failure/Error: post :create, document: build_attributes(:document, user_id: @doc.user_id)
 NoMethodError:
   undefined method `original_filename' for nil:NilClass 
```

但我从来没有明确地调用过那个方法，所以它是 FactoryGirl 调用的吗？模型描述如下：

```
attr_accessible :description, :filename, :filesize, :filetype, :name, :user_id 
```

where`:filename`只是一个字符串。这里可能出了什么问题？我没有使用回形针上传文件，只是`file_field`在视图中。我抓取路径并将文件保存到控制器中的生产服务器，但从不调用此方法。

编辑：

我想一个实际的控制器描述可能会有所帮助哈哈

```
def create
  uploaded_file = params[:document][:file]
  document = params[:document]
  document.delete(:file)
  @user = User.find(document[:user_id])
  filepath = Rails.root.join('documents', @user.company_id.to_s, @user.id.to_s, uploaded_file.original_filename)
  %x[ mkdir #{Rails.root.join('documents', @user.company_id.to_s)} ]
  %x[ mkdir #{Rails.root.join('documents', @user.company_id.to_s, @user.id.to_s)} ]
  File.open(filepath, 'wb') do |file|
    file.write(uploaded_file.read)
  end
  document[:filesize]= File.size(filepath)
  document[:filetype]= File.ftype(filepath)
  document[:filename] = uploaded_file.original_filename
  d =Document.new(document)
  d.save
  redirect_to :action => 'show', :id => user.id
end 
```

请记住，我确信这种方法有**很多**问题。我正在尝试对其进行重构并进行测试。目前，我要做的只是克服第一次打嗝，该`original_filename`方法在某处被调用，我自己没有定义它。谁能看到为什么/在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:27:00.563

`original_filename`是上传文件的方法，[请参阅机架文档](http://rubydoc.info/github/rack/rack/master/Rack/Multipart/UploadedFile)。

`filepath = Rails.root.join('documents', @user.company_id.to_s, @user.id.to_s, uploaded_file.original_filename)`

和

`document[:filename] = uploaded_file.original_filename`

在控制器中获取原始文件名，因为当文件被上传时，它会获得一个丑陋的临时文件名来存储您希望使用原始文件名使其可读和准确。

考虑`fixture_file_upload`在 rspec 中使用帮助程序。这是一个示例规范：

```
 expect {
      post :create, document: attributes_for(:document, user_id: @doc.user_id, file: fixture_file_upload('spec/assets/documents/test_doc.pdf', 'appliation/pdf'))
    }.to change(Document, :count).by(1) 
```

并将测试pdf放入`spec/assets/documents/test_doc.pdf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T12:55:23.953

您可以使用

```
Rack::Multipart::UploadedFile.new(path) 
```

为您的测试。

# java - 如何使用java将集合转换转换为scala

> ID：14760915
> 
> 赞同：4
> 
> 时间：2013-02-07T21:02:40.993
> 
> 标签：java, scala, scala-java-interop

下面的代码将类型列表转换为类型`List<TestObj>`列表，其中类型`List<List<String>>` 中的每个列表元素`List<List<String>>`都是大小为 1 的字符串列表。这是一种非常迭代的方法，可以使用 scala 将其转换为功能更强大的方法吗？一个可能的解决方案：模式匹配`List<String>`，只为每个头元素创建一个新列表？

以下java代码的输出：

```
strVal is 1 
New list 
strVal is 2 
New list

public class Driver {

        public static void main (String args[]){

        /**
         * Setup the test list data
         */
        List<String> l = new ArrayList<String>(); 
        l.add("1");
        l.add("2");     
        TestObj t = new TestObj();
        t.setTestList(l);
        t.setName("test");
        List<TestObj> tList = new ArrayList<TestObj>();
        tList.add(t);

        /**
         * Convert the list to a new data structure
         */
        List<List<String>> l3 = new ArrayList<List<String>>();
        List<String> l2 = new ArrayList<String>();      
        int counter = 0;
        for(TestObj tListElement : tList){ 
            if(tListElement.getName().equalsIgnoreCase("test")){
            List<String> lvo = tListElement.getTestList();      
            for(String lv : lvo){
                l2.add(lv);
                ++counter;
                if(counter == 1){
                    counter = 1;
                    l3.add(l2);
                    l2 = new ArrayList<String>();
                    counter = 0;
                }
            }
        }
        }

        /**
         * Output the values of the new data structure
         */
        for(List<String> listVals : l3){
            for(String strVal : listVals){
                System.out.println("strVal is "+strVal);
            }
            System.out.println("New list");
        }
    }
}

import java.util.List;

public class TestObj {

    private String name;
    private List<String> testList;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public List<String> getTestList() {
        return testList;
    }
    public void setTestList(List<String> testList) {
        this.testList = testList;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T22:18:57.130

```
case class TestObj(name: String, testList: Seq[String])

object Driver extends App {

  // Setup the test list data
  val tList = Seq(TestObj("test", Seq("1", "2")))

  // Convert the list to a new data structure
  val l3 = for {
      t <- tList
      if t.name equalsIgnoreCase "test"
      lv <- t.testList
    } yield Seq(lv)

  // Output the values of the new data structure
  for (listVals <- l3) {
    for (strVal <- listVals) {
      println("strval is " + strVal)
    }
    println("New list")
  }

} 
```

# return - 为什么 return/redo 在调用上下文中评估结果函数，但不评估块结果？

> ID：14760916
> 
> 赞同：7
> 
> 时间：2013-02-07T21:02:49.293
> 
> 标签：return, rebol, tail-call-optimization, trampolines, rebol3

`return`昨晚我从函数中了解到 /redo 选项。它允许您返回*另一个*函数，然后在调用站点调用该函数并从同一位置重新调用评估器

```
>> foo: func [a] [(print a) (return/redo (func [b] [print b + 10]))] 

>> foo "Hello" 10
Hello
20 
```

尽管它`foo`是一个只接受一个参数的函数，但它现在*的行为就像一个接受两个参数的函数*。否则，类似的事情将要求调用者知道您正在返回一个函数，并且该调用者必须手动对其使用`do`评估器。

因此，如果没有`return/redo`，您将得到：

```
>> foo: func [a] [(print a) (return (func [b] [print b + 10]))] 

>> foo "Hello" 10
Hello
== 10 
```

`foo`消耗它的一个参数并按值返回一个函数（没有调用它，因此解释器继续前进）。然后表达式评估为 10。如果`return/redo`不存在，您必须编写：

```
>> do foo "Hello" 10
Hello
20 
```

这使调用者不必知道（或关心）您是否选择返回要执行的函数。并且很酷，因为您可以执行尾调用优化或为返回功能本身编写包装器之类的事情。这是`return`打印消息但仍退出函数并提供结果的变体：

```
>> myreturn: func [] [(print "Leaving...") (return/redo :return)]

>> foo: func [num] [myreturn num + 10]

>> foo 10
Leaving...
== 20 
```

但函数并不是唯一在`do`. 因此，如果这是*“在呼叫站点消除对 DO 的需要”*的一般模式，那么为什么不打印任何内容呢？

```
>> test: func [] [return/redo [print "test"]]

>> test 
== [print "test"] 
```

它只是按值返回块，就像正常返回一样。它不应该打印出“测试”吗？这就是`do`......呃，用它来做：

```
>> do [print "test"]
test 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T00:30:35.477

简短的回答是因为通常没有必要在调用点评估块，因为 Rebol 中的块不带参数，所以在哪里评估它们*几乎*无关紧要。但是，“大部分”可能需要一些解释......

它归结为 Rebol 的两个有趣的特性：静态绑定和`do`函数的工作方式。

## 静态绑定和范围

Rebol 没有范围词绑定，它有静态直接词绑定。有时看起来我们有词法作用域，但我们确实通过在每次构建新的“作用域”代码块时更新静态绑定来伪造它。我们也可以随时手动重新绑定单词。

不过，在这种情况下，这对我们来说意味着，一旦一个块存在，它的绑定和值就是静态的——它们不受块的物理位置或正在评估的位置的影响。

然而，这就是它变得棘手的地方，函数上下文很奇怪。虽然绑定到函数上下文的单词绑定是静态的，但分配给这些单词*的值集是**动态*范围的。这是如何在 Rebol 中评估代码的副作用：其他语言中的语言语句是 Rebol 中的函数，因此`if`，例如，调用实际上将数据块传递给`if`函数，`if`然后传递给函数`do`。这意味着当一个函数正在运行时，`do`必须从最近调用的调用框架中查找它的单词值，该调用还没有返回。

这确实意味着，如果您调用一个函数并返回一个代码块，其中单词绑定到其上下文，则在函数返回后评估该块将失败。但是，如果您的函数调用*自身*并且*该*调用返回一个代码块，并且其单词绑定到它，那么在您的函数返回之前评估*该块将使其在您的函数的**当前*调用的调用框架中查找这些单词。

无论你`do`还是`return/redo`, 这都是一样的，并且也会影响内部功能。让我演示一下：

在函数返回后计算的函数返回代码，引用一个函数词：

```
>> a: 10 do do has [a] [a: 20 [a]]
** Script error: a word is not bound to a context
** Where: do
** Near: do do has [a] [a: 20 [a]] 
```

相同，但`return/redo`在函数中使用 and 代码：

```
>> a: 10 do has [a] [a: 20 return/redo does [a]]
** Script error: a word is not bound to a context
** Where: function!
** Near: [a: 20 return/redo does [a]] 
```

代码`do`版本，但在对同一函数的外部调用中：

```
>> do f: function [x] [a: 10 either zero? x [do f 1] [a: 20 [a]]] 0
== 10 
```

相同，但`return/redo`在函数中使用 and 代码：

```
>> do f: function [x] [a: 10 either zero? x [f 1] [a: 20 return/redo does [a]]] 0
== 10 
```

所以简而言之，使用块通常在其他地方执行块而不是定义它的地方没有优势，如果你愿意，使用另一个调用来`do`代替它更容易。自调用递归函数需要返回要在同一函数的外部调用中执行的代码，这是一种非常罕见的代码模式，我从未见过在 Rebol 代码中使用过。

可以进行更改，以便它也可以处理块，但是添加仅在极少数情况下有用并且已经有更好方法的功能`return/redo`可能不值得增加开销。`return/redo``do`

然而，这带来了一个有趣的观点：如果你不需要`return/redo`块，因为`do`同样的工作，不同样适用于函数吗？为什么我们需要`return/redo`？

## 函数的 DO 是如何工作的

基本上，我们有，因为它使用与我们用于实现函数`return/redo`的代码完全相同的代码。`do`你可能没有意识到，但是`do`一个函数真的很不寻常。

在大多数可以调用函数值的编程语言中，您必须将参数作为一个完整的集合传递给函数，这与 R3`apply`函数的工作方式类似。常规 Rebol 函数调用会导致使用未知提前评估规则对其参数进行一些提前未知数量的附加评估。评估器在运行时计算出这些评估规则，并将评估结果传递给函数。函数本身不处理其参数的评估，甚至不一定知道这些参数是如何评估的*。*

然而，当你`do`显式地传递一个函数值时，这意味着将函数值传递给*另一个*函数的调用，一个名为 的*常规*函数`do`​​，然后神奇地导致对*甚至根本没有传递给`do`函数*的附加参数的求值。

好吧，这不是魔术，它是`return/redo`。函数的工作方式`do`是它以常规快捷方式返回值返回对该函数的引用，快捷方式返回值中带有一个标志，告诉*调用* `do`的解释器评估返回的函数，就好像它在那里被调用一样在代码中。这基本上就是所谓的蹦床。

这里是 Rebol 的另一个有趣特性：从函数中快捷返回值的能力内置于求值器中，但它实际上并没有使用`return`函数来执行此操作。您从 Rebol 代码中看到的所有函数都是内部内容的包装器，`return`甚至`do`. 我们调用的`return`函数只是生成其中一个快捷方式返回值并返回它；评估员完成其余的工作。

所以在这种情况下，真正发生的事情是，一直以来我们都有代码在`return/redo`内部完成，但 Carl 决定在我们的`return`函数中添加一个选项来设置该标志，即使内部代码不需`return`要这样做，因为内部代码调用内部函数。然后他没有告诉任何人他正在使该选项在外部可用，或者为什么，或者它做了什么（我想你不能提到所有事情；谁有时间？）。根据与 Carl 的对话以及我们一直在修复的一些错误，我怀疑 R2`do`以不同的方式处理了一个函数，这种方式本来`return/redo`不可能实现。

这确实意味着处理`return/redo`非常彻底地面向函数评估，因为这就是它存在的全部原因。向它添加任何开销都会增加`do`函数的开销，我们经常使用*它*。可能不值得将其扩展到区块，因为我们获得的收益很少，而且我们很少得到任何好处。

不过，对于`return/redo`一个函数来说，我们越想它，它似乎就越有用。在最后*一天*，我们想出了各种可以实现的技巧。蹦床**很有用**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T07:53:03.563

虽然问题最初问为什么`return/redo`不评估块，但也有类似的表述：“很酷，因为你可以做诸如尾调用优化之类的事情”，“[可以编写]返回功能的包装器”，“它似乎越来越我们越想它就越有用”。

我不认为这些是真的。我的第一个示例演示了一个`return/redo` *可以*真正使用的案例，可以说是在“专业领域”中的一个示例`return/redo`。它是一个可变参数求和函数，称为`sumn`：

```
use [result collect process] [
    collect: func [:value [any-type!]] [
        unless value? 'value [return process result]
        append/only result :value
        return/redo :collect
    ]
    process: func [block [block!] /local result] [
        result: 0
        foreach value reduce block [result: result + value]
        result
    ]
    sumn: func [] [
        result: copy []
        return/redo :collect
    ]
] 
```

这是使用示例：

```
>> sumn 1 * 2 2 * 3 4
== 12 
```

采用“无限数量”参数的可变参数函数在 Rebol 中并不像乍一看那样有用。例如，如果我们想`sumn`在一个小脚本中使用该函数，我们必须将它包装到一个括号中以指示它应该停止收集参数的位置：

```
result: (sumn 1 * 2 2 * 3 4)
print result 
```

这并不比使用称为 eg 的更标准（非可变）替代方案`block-sum`并仅采用一个参数（一个块）更好。用法就像

```
result: block-sum [1 * 2 2 * 3 4]
print result 
```

当然，如果函数能够以某种方式检测到它的最后一个参数是什么，而无需使用括号，那么我们真的会有所收获。在这种情况下，我们可以使用该`#[unset!]`值作为`sumn`停止参数，但这也不能避免键入：

```
result: sumn 1 * 2 2 * 3 4 #[unset!]
print result 
```

看到`return`包装器的例子，我会说它`return/redo`不太适合`return`包装器，`return`包装器超出了它的专业领域。为了证明这一点，这里有一个`return`用 Rebol 2 编写的包装器，它实际上超出了`return/redo`的专业领域：

```
myreturn: func [
    {my RETURN wrapper returning the string "indefinite" instead of #[unset!]}
    ; the [throw] attribute makes this function a RETURN wrapper in R2:
    [throw]
    value [any-type!] {the value to return}
] [
    either value? 'value [return :value] [return "indefinite"]
] 
```

R2 中的测试：

```
>> do does [return #[unset!]]
>> do does [myreturn #[unset!]]
== "indefinite"
>> do does [return 1]
== 1
>> do does [myreturn 1]
== 1
>> do does [return 2 3]
== 2
>> do does [myreturn 2 3]
== 2 
```

另外，我认为这`return/redo`对尾调用优化没有帮助。`return/redo`在[www.rebol.org](http://www.rebol.org)网站上有示例如何在不使用的情况下实现尾调用。如前所述，`return/redo`它是为支持可变参数函数的实现而量身定制的，就参数传递而言，它对于其他目的不够灵活。

# direct3d - 通过 HLSL 中的像素着色器传递颜色

> ID：14760920
> 
> 赞同：7
> 
> 时间：2013-02-07T21:02:51.650
> 
> 标签：direct3d, hlsl, pixel-shader

我有一个像素着色器，它应该简单地传递输入颜色，但我得到的是一个恒定的结果。我认为我的语法可能是问题所在。这是着色器：

```
struct PixelShaderInput
{
    float3 color : COLOR;
};

struct PixelShaderOutput
{
    float4 color : SV_TARGET0;
};

PixelShaderOutput main(PixelShaderInput input)
{
    PixelShaderOutput output; 
    output.color.rgba = float4(input.color, 1.0f); // input.color is 0.5, 0.5, 0.5; output is black
    // output.color.rgba = float4(0.5f, 0.5f, 0.5f, 1); // output is gray
    return output;
} 
```

为了进行测试，我在管道中使用了位于此之前的顶点着色器，并传递了 0.5、0.5、0.5 的颜色参数。通过 VisualStudio 中的像素着色器，input.color 具有正确的值，并且这些值被正确地分配给 output.color。但是，在渲染时，使用此着色器的顶点都是黑色的。

这是顶点着色器元素描述：

```
const D3D11_INPUT_ELEMENT_DESC vertexDesc[] = 
{
    { "POSITION",   0, DXGI_FORMAT_R32G32B32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "COLOR",      0, DXGI_FORMAT_R32G32B32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "TEXCOORD",   0, DXGI_FORMAT_R32G32_FLOAT,    0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
}; 
```

我不确定顶点着色器将颜色与 RGB 输出相同是否重要，但像素着色器输出 RGBA。alpha 层至少可以正常工作。

如果我注释掉第一个分配，即使用 input.color 的分配，并取消注释另一个分配，使用显式值，则渲染的像素是灰色的（如预期的那样）。

关于我在这里做错了什么的任何想法？

我正在使用着色器模型 4 级别 9_1，禁用了优化并启用了调试信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T03:03:14.183

```
output.color.rgba = float4(input.color, 1.0f); 
```

你的 input.color 是一个 float4，你将它传递给另一个 float4，我认为这应该可以

```
output.color.rgba = float4(input.color.rgb, 1.0f); 
```

这就是您只需简单地通过它所需的全部内容

```
 return input.color; 
```

如果您想将颜色更改为红色，请执行以下操作

```
input.color = float4(1.0f, 0.0f, 0.0f, 1.0f);
return input.color; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:18:22.460

*你确定你的顶点在他们应该在的地方吗？你开始让我怀疑我的 D3D 知识。:P 我相信你的问题是你只传递一种颜色，着色器的两个部分都需要一个位置才能工作。您的 PixelShaderInput 布局应该是： struct PixelShaderInput { float4 position :SV_POSITION; float3 颜色：颜色；};*

你可以试试这个作为你的像素着色器吗？：

```
float4 main(float3 color : COLOR) : SV_TARGET
{
    return float4(color, 1.0f);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:05:59.517

我从未见过这种构造函数

```
float4(input.color, 1.0f); 
```

这可能是问题所在，但我可能是错的。尝试像这样一一传递浮点值：

```
float4(input.color[0], input.color[1], input.color[2], 1.0f); 
```

编辑：

实际上，您可能必须使用 float4 作为颜色的类型（[http://msdn.microsoft.com/en-us/library/windows/desktop/bb509647(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509647(v=vs.85).aspx)）

# qr-code - .bar 文件的黑莓 QR 码生成器

> ID：14760922
> 
> 赞同：0
> 
> 时间：2013-02-07T21:02:58.963
> 
> 标签：qr-code, blackberry-10

我有一些从 Android 应用程序转换而来的 BlackBerry 应用程序。它们是工作应用程序，因此不想因为电子邮件地址和私人信息而被放到 App World 上。我想知道是否有一个 QR 码生成器可以为 .bar 文件创建一个代码，以便人们可以扫描黑莓设备上的代码以将它们放到手机上？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:49:41.197

这里有几点值得注意：

1) 如果这些应用程序是为企业环境设计的，则需要通过企业的企业 BES 进行部署。否则，他们将无法进入工作区。

2) 但是，Android 应用程序不能在[工作范围](http://developer.blackberry.com/android/apisupport/unsupportedapi_playbook_balance.html)内运行。

3) 如果您在 BlackBerry World 网络商店中创建指向您的应用程序地址的 QR 码，并且用户扫描它，它应该会打开 BlackBerry World 到正确的页面。

# css - 谷歌地图隐藏了打印预览的地图

> ID：14760923
> 
> 赞同：2
> 
> 时间：2013-02-07T21:02:59.527
> 
> 标签：css, google-maps

我正在尝试在打印预览中显示 Google 地图。如果我将 .gmnoprint 类从 display:none 更改为 display:inline，我会看到一个地图控件、一个图钉、谷歌徽标，但仍然没有地图。它是空白的。如何让我的地图显示以供打印？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-02T18:13:24.223

就我而言（我同时使用 Biostall Codeigniter Google Maps V3 API 和 Google Maps V3 API），我使用**CSS**解决了这个问题。在我的深入研究中，它导致地图宽度的不固定/不确定性“可能”取决于您的 div 容器的宽度或“可能再次”地图宽度本身；其他网络开发人员的结论是关于引导问题。

```
@media print {
    img {
        max-width: none !important;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:08:50.117

您应该尝试使用[Google Static Maps API](https://developers.google.com/maps/documentation/staticmaps/?hl=en#quick_example)进行打印。

# c++ - SDL ttf 与 opengl，字体大小问题

> ID：14760926
> 
> 赞同：0
> 
> 时间：2013-02-07T21:03:07.297
> 
> 标签：c++, opengl, sdl, sdl-ttf

我正在使用 sdl ttf 将文本渲染到 opengl，实际上一切都很好，但是就像你知道的，当你打开一个 ttf sdl 文件时，你在像素上指定它，你不能改变字体大小。其实你可以改变字体大小，但你需要关闭并重新打开字体，这会有点慢，那么，有什么办法可以改变字体大小或类似的东西吗？

我需要执行以下操作：可以调整大小并调整到窗口屏幕的字体大小（如 opengl -1.0f - 1.0f 范围，适用于类似于百分比的内容），无背景的多行渲染支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:54:41.103

你可以把它放在一个表面上并缩放表面。这可能会使文本变形，这可能是一个问题。

或者你可以有一个文本大小的数组。加载具有一系列文本大小的相同字体。缩放图像时，请使用不同的字体，而不是更改一种字体的大小。

# logstash - logstash grok 过滤器的烦恼

> ID：14760929
> 
> 赞同：2
> 
> 时间：2013-02-07T21:03:15.113
> 
> 标签：logstash, logstash-grok

`Thu Sep 27 15:30:27 BST 2012:- Invalid token $_POST[custom], which indicates the amount, userid`

这是来自我尝试使用 grok for logstash 解析的日志文件。

前几个字段没问题，它似乎非常接近 DATESTAMP_OTHER，但我认为 BST 的英国时区搞砸了。

到此为止，但不知道如何使它工作！

`%{DAY} %{MONTH} %{MONTHDAY} %{TIME} %([PMCEB][SD]T) %{YEAR} %{GREEDYDATA:message}`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-19T08:50:44.383

1) 试用[Grok 调试器](http://grokdebug.herokuapp.com/)，它可以让您在现场测试您的 Grok 模式。

2）另外，改变你`%([PMCEB][SD]T)`的东西，比如`(?<variable_name>(BST)*)`开始。您对普通正则表达式使用了错误的语法。

3）**最重要**的是阅读[文档](http://logstash.net/docs/1.1.12/filters/grok)。我刚才提到的所有内容都直接来自文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:14:46.647

这是我解决问题的方法：

```
TZEXPANDED (?:[PMCEB][SD]T) MYCUSTOM %{DAY} %{MONTH} %{MONTHDAY} %{TIME} %{TZEXPANDED} %{YEAR} 
```

或者，如果您愿意：

```
MYCUSTOM %{DAY} %{MONTH} %{MONTHDAY} %{TIME} %{(?:[PMCEB][SD]T)} %{YEAR} 
```

在我看来，第一个选项更好，因为您可以稍后将该模式用于其他用途

问候

# php - 当在特定用户页面上时，如何结合路由和 uri 段以将用户 ID 放在 url 中？

> ID：14760932
> 
> 赞同：0
> 
> 时间：2013-02-07T21:03:31.243
> 
> 标签：php, codeigniter, uri

我试图在查看他们的页面时将用户 ID 附加到 URL，或者在查看另一个用户页面时将用户 ID 附加到 URL。我收到此错误`Unable to load the requested file: account/profile/218.php`代码：

//路由.php

```
$route['default_controller'] = "home";
$route['404_override'] = '';
$route['profile/:num'] = "account/profile"; 
//I've also tried doing 
$route['profile/([a-z]+)/(\d+)'] = "profile/$1/id_$2"; 
```

//没有产生上述错误的uri段的控制器：

```
public function profile() 
    {

        $this->load->helper('date');
        $this->load->library('session');
        $session_id = $this->session->userdata['id'];
        $this->load->model('account_model');
            $user = $this->account_model->user();
        $data['user'] = $user;
        $data['profile_icon'] = 'profile';
        $data['main_content'] = 'account/profile/'.$user['id'];
        $this->load->view('includes/templates/profile_template', $data);

    } 
```

当我使用这个时：

```
public function profile() 
{

    $this->load->helper('date');
    $this->load->library('session');
    $session_id = $this->session->userdata['id'];
    $this->load->model('account_model');
        $user = $this->account_model->user();
    $data['user'] = $user;
    $user['id'] = $this->uri->segment(4);
    $data['profile_icon'] = 'profile';
    $data['main_content'] = 'account/profile/'.$user['id'];
    $this->load->view('includes/templates/profile_template', $data);

} 
```

它会产生此错误：

> 无法加载请求的文件：account/profile/.php

*** *编辑

HTACCESS

```
Deny from all
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:32:48.803

利用：

```
$route['profile/:num'] = "account/profile/$1"; 
```

并在您的配置文件中删除 index.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:29:03.343

在**application/config/routes.php**文件中添加

`$route['profile/(:num)'] = "account/profile/$1";`

有关路由的更多信息，您可以[在此处阅读](http://ellislab.com/codeigniter/user-guide/general/routing.html)

```
public function profile( $user_id ) 
{

    $this->load->helper('date');
    $this->load->library('session');
    $session_id = $this->session->userdata['id'];
    $this->load->model('account_model');
    $user = $this->account_model->user();
    $data['user'] = $user;
    $user['id'] = $user_id;
    $data['profile_icon'] = 'profile';
    $data['main_content'] = 'account/profile/'.$user['id'];
    $this->load->view('includes/templates/profile_template', $data);

} 
```

将额外参数添加到配置文件方法 - 女巫将是用户 ID，因此`$user['id'] = $user_id;`无需使用该`$this->uri->segment(4);`方法。

我建议您像这样修改 htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{SCRIPT_FILENAME} -d [OR]
    RewriteCond %{SCRIPT_FILENAME} -f
    RewriteRule "(^|/)\." - [F]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

# python - 搜索 csv 并打印一行

> ID：14760939
> 
> 赞同：0
> 
> 时间：2013-02-07T21:03:55.580
> 
> 标签：python, csv

试图创建一个火车预订系统。无法搜索我的 csv 并打印该特定行。

用户已经有 id 号，并且 csv 的设置如下

这是我到目前为止所拥有的：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:05:47.967

You are matching the entire line against the ID. You need to split out the first field and check that:

```
def buySeat():
    id = raw_input("please enter your ID")

for line in open("customers.csv"):
    if line.split(',')[0] == id:
        print line
    else:
        print "sorry cant find you" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:29:30.917

尝试使用内置的 CSV 模块。当您的需求发生变化时，它将使事情更容易管理。

```
import csv

id = raw_input("please enter your ID")

ID_INDEX = 0

with open('customers.csv', 'rb') as csvfile:
    csvReader = csv.reader(csvfile)
    for row in csvReader:
        # Ignore the column names on the first line.
        if row[ID_INDEX] != 'counter':
            if row[ID_INDEX] == id:
                print ' '.join(row)
            else:
                print 'sorry cant find you' 
```

# c++ - boost::ptr_vector 与 std::vector >?

> ID：14760940
> 
> 赞同：4
> 
> 时间：2013-02-07T21:03:55.853
> 
> 标签：c++, pointers, boost, vector

他们做类似的事情。

在两者之间进行选择时应该考虑什么？

在哪种情况下是首选？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:09:15.897

我更喜欢`std::vector<std::unique_ptr<T>>`有几个原因：

1.  类型安全——虽然这对你来说已经很好地抽象了`boost::ptr_vector`，`ptr_vector`但仍然在`std::vector<void*>`.
2.  对自定义删除器的明确支持——我认为您可以使用 获得自定义删除器行为`boost::ptr_vector`，但使用`std::unique_ptr`.
3.  它是标准的，并且得到兼容的 C++11 编译器的良好支持。

# java - 启动画面中的线程

> ID：14760943
> 
> 赞同：1
> 
> 时间：2013-02-07T21:04:10.423
> 
> 标签：java, android, multithreading, thread-sleep

```
package com.example.test;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity {
    private Intent myintent;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        myintent = new Intent(this, MainActivity.class);
        splashScreen(1000); }

    public void splashScreen (final int x)
    {
        new Thread(new Runnable() {
            public void run() {
                try {
                    Thread.sleep(x);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                startActivity(myintent);
                finish();
            }
        }).run();
    }

} 
```

有代码，问题就在这里：SplashScreen 没有获取启动 XML 布局文件的内容视图......现在，我怀疑这是一个线程问题，并且不知何故线程在 setContentView 方法之前执行虽然该方法位于代码中 Thread 的 run 方法之前，所以我这样想是不合逻辑的，但我觉得这个启动画面不起作用的原因已经用完了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:12:28.400

更改`thread.run()`为`thread.start()`：[http ://www.javafaq.nu/java-article1131.html](http://www.javafaq.nu/java-article1131.html)

```
new Thread(new Runnable() {
        public void run() {
            try {
                Thread.sleep(x);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            startActivity(myintent);
            finish();
        }
    }).start(); 
```

实现 Splash 的更好方法：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    myintent = new Intent(this, MainActivity.class);

   new Handler().postDelayed(new Runnable(){
        @Override
        public void run() {
            startActivity(myintent);
            finish();
        }
    }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T21:12:20.307

```
 package com.echo.myatlsnookpaid;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Window;

public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.splash);

        Thread timer = new Thread(){
            public void run(){
                try{
                    sleep(3500);
//                  sleep(100);
                }
                catch(InterruptedException e){
                    e.printStackTrace();
                } finally {
                    Intent openMain = new Intent(Splash.this, MainActivity.class);
                    startActivity(openMain);
                    finish();
                }
            }
        };
        timer.start();
    }

    @Override
    protected void onPause() {
        super.onPause();
        finish();
    }
} 
```

在你的清单中，给出

```
<intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

过滤到他的splashactivity。

# jquery - 保存时使弹出窗口停留在页面上（颜色框）

> ID：14760945
> 
> 赞同：0
> 
> 时间：2013-02-07T21:04:20.377
> 
> 标签：jquery, asp.net-mvc, popup, colorbox

我有一个可以编辑用户的表单。此表单显示为弹出窗口（我正在使用颜色框插件）。单击保存后，我希望它保留在弹出页面上，而不是关闭弹出窗口，这样我就可以显示“成功保存信息”之类的文本。现在，每当我点击保存时，它都会关闭弹出表单并返回到上一页。我可以让我的弹出窗口在保存时保持不变吗？任何帮助表示赞赏

看法

```
 $('.openDialog').colorbox({
                  transition: "elastic",
                  width: "40%", height: "80%"
              }); 
```

控制器

```
 [HttpPost]
        public ActionResult Edit(UserViewModel vm)
          {
                Save(vm);
                return View(vm);
          } 
```

看法

```
<input type="submit" value="Save" id="btnSave" class="openDialog"/> 
```

尝试使用 ajax 表单提交但弹出窗口没有转到控制器，我将不显眼的脚本添加到页面和 web 配置以及 jquery 1.8 仍然不好

```
 @using (Ajax.BeginForm("Edit", "User",
            new AjaxOptions
            {
                HttpMethod = "POST",
                InsertionMode = InsertionMode.Replace
            })) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:39:30.393

只需使用将 iframe 属性设置为 true 的 colorbox。最初显示表单时，添加参数`iframe: true`。

不要`$.colorbox`在点击时再次调用，因此您在视图中的输入标签应该是：

```
<input type="submit" value="Save" id="btnSave" /> 
```

当您点击提交按钮时，会发生表单提交，并且结果将在相同的颜色框 iframe 中返回。Colorbox 在内部使用 AJAX 并创建 iframe 来为您处理所有这些，没有比这更容易的了。

要查看此方法的实际效果，请查看[http://www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)，并查看名为“外部网页 (iFrame)”的 iFrame 示例，其中获取 Wiki 搜索页面，然后提交表单，都在同一个颜色框中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:07:22.247

发生的情况是您的表单正在提交，很可能是同一页面，因此页面“重新加载”，但提交的表单数据。

为了做你想做的事，你必须让你的表单通过 ajax 提交。这样，表单通过 javascript 提交，您不会重新加载页面。

在这种情况下，您的控制器不会返回视图，而是会返回一条状态消息，让您知道提交是否成功（以及您需要更新页面的任何其他内容）。

# php - Zend 表单引导注释日期选择器“提供给 Escape 助手的对象，但标志不允许递归”

> ID：14760946
> 
> 赞同：1
> 
> 时间：2013-02-07T21:04:28.993
> 
> 标签：php, twitter-bootstrap, annotations, zend-form, zend-framework2

我正在使用带有 Bootstrap 和 ReverseForm 适配器的 Zend 框架，并且有一个有趣的问题：当我在 Zend Form 中使用 Bootstrap Datepicker 时，我遇到了下一个异常：

```
提供给 Escape 助手的对象，但标志不允许递归

```

有我的formfield代码：

```
use \Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;
use \Zend\Form\Annotation as ZFA; 
```

...

```
/**
 * @var \DateTime
 *
 * @ODM\Date
 *
 * @ZFA\Type("ReverseForm\Element\BootstrapDatepicker")
 * @ZFA\Attributes({"type":"text"})
 * @ZFA\Options({
 *      "label":"Date",
 *      "extended": {
 *          "help": {"content": ""},
 *      }
 * })
 *
 */
private $date; 
```

还有我的反向表单配置：

```
'ReverseForm\Element\BootstrapDatepicker' => array(
    'js' => array(
        '/vendor/datepicker/js/bootstrap-datepicker.js'
    ),
    'css' => array(
        '/vendor/datepicker/css/datepicker.css'
    ),
    'template' => 'input.phtml',
    'inlineJs' => "$('#%1\$s').datepicker(%2\$s);",
    'inlineJsConfig' => array(
        'format' => 'dd.mm.yyyy',
        'weekstart' => new \Zend\Json\Expr(1),
    )
), 
```

我哪里有错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:26:41.203

我遇到过同样的问题。将输入的类型从更改`text`为`date`应该可以解决您的问题。（[https://github.com/zendframework/zf2/issues/3724](https://github.com/zendframework/zf2/issues/3724)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:33:06.927

没有错误显然来自您的代码，或者如果是一个 editAction 不仅仅是绑定而是添加，您必须这样做：

```
$form->bind($document);
$form->get('datenais')->setValue($document->getDatenais()->format('Y-m-d')); 
```

我不知道干净的方式，但它会解决你的问题。如果您找到另一种方式，我会很高兴看到您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T23:05:27.487

如果您不将类型字段添加到 Zend 表单，它与您遇到的问题类似：

```
'type' => 'Zend\Form\Element\Time', 
```

整个元素是这样的::

```
 $this->add(array(
    'name' => 'officialDrawTime',
        'type' => 'Zend\Form\Element\Time',
        'attributes' => array(
            'required' => 'required',
            'type'   => 'time',
            'class' => 'form-control input-large',
            'placeholder' => 'e.g 19:30 or 07:30 (24 hour clock)',
            'pattern' => '^[0-9]{2}:[0-9]{2}$'
        ),
        'options' => array(
            'label' => 'Official draw time',
            'instructions' => 'The official draw time...)'
        ),
    )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-06T11:55:36.930

这对我有用。
将值转换为日期格式将解决该问题。
在你的控制器中：写：

```
$users['usrBirthday']=$user->getBirthday()->format('d-m-Y');
$form->setData($users);
$form->bind($user); 
```

# orchardcms - 在 Orchard 1.6 中构建可下载项目列表

> ID：14760947
> 
> 赞同：2
> 
> 时间：2013-02-07T21:04:36.917
> 
> 标签：orchardcms, orchardcms-1.6

我是 Orchard 的新手，我想知道用下载链接构建基本文档列表的“最佳”方式？

假设场景是这样的，我想制作一份新闻稿列表，新闻稿是 PDF 格式，用户应该可以直接从列表视图中下载。管理员应该可以轻松添加新的时事通讯，并且应该会出现在列表中。

我目前的思路是，通过仪表板，

1.  创建具有标题字段和媒体选择器字段的内容类型“新闻通讯”，使用媒体选择器字段上传 PDF 文件。
2.  然后创建一个查询，过滤器内容类型为“Newsletter”
3.  创建一个指向查询的投影

但是，这只给了我一个内容项列表，将它们的标题显示为指向实际内容项的链接。

我尝试向查询添加布局并将其设置为显示属性而不是内容。通过这样做，我可以获得一个列表，我可以在其中更多地控制“输出”。我已经让它列出了标题，并通过重写并放入 MediaPicker.Url，它还在列表中显示了 URL。这一切都很好，但我在这里卡住了..

由于 MediaPicker.URL 以 ~/media/default/xyz/filename.pdf 之类的格式输出 url，我不能只将其放入 aa href，它没有提供文件的正确下载链接。

Soo，问题是，我是在思考并以完全错误的方式做这件事，还是我遗漏了一些明显的东西？欢迎所有想法和建议以及更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:12:07.880

在您的主题中使用或调整以下模板覆盖：

```
@{
    var url = Model.ContentField.Url;
}
@if(Model.ContentField.Url != null) {
    if (url.StartsWith("~/")) {
        url = Href(url);
    }
    <div class="media-picker-field attachment-pdf">
        <a href="@url" class="pdf-download" title="@T("Download the PDF")"><span>download</span></a>
    </div>
} 
```

根据需要修改文本。此模板是一个 Fields.MediaPicker-PDF.cshtml，用于名为 的媒体选择器字段`PDF`。

# javascript - 逐步从 javascript 转换为 jquery

> ID：14760951
> 
> 赞同：-1
> 
> 时间：2013-02-07T21:04:53.740
> 
> 标签：javascript, jquery, migration

拥有一个现有的 - 重载 - 一组充满普通 Javascript 代码的网页，我想通过根据需要替换一些函数来逐步使用 jQuery。

换句话说，我希望 jQuery 不会强迫我从头开始重写整个事情！如果我是对的：

因此，典型文档中有几个现有的 JavaScript 链接文件（我的）：

```
<script type="text/javascript" src="/Play/DragDrop6.js"></script>
<script type="text/javascript" src="/Play/aHand6.js"></script>
<script type="text/javascript">
    var vstatus = "bid";
    var curtop = 0;
    var curleft = 0;
    var curwidth = 0;
    var curheight = 0;

    function return2Url() {
        history.go(-1);
    }

    function showSomethingb() {
        /...                  } </script></head><body>.... 
```

问题是：如何将 jQuery.min.js 库添加到该文档中以及将 $(document).ready(function()...

假设我想用 jQuery 风格重写函数 showSomethingb()，我把它放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:13:48.727

一般最佳实践规则...尽可能将 javascript 添加到页面末尾 .... 就在结束`</body>`标记之前。

**如何将 jQuery.min.js 库添加到该文档？**

在您的所有代码之前。例如

```
<script type="text/javascript" src="jQuery.min.js"></script>
<script>
   //Then the rest of your code
</script> 
```

**我应该把 $(document).ready(function() 放在哪里？**

当文档准备好时，在您要执行的代码之前（但在上面的库之后）。

```
$(document).ready(function(){
   // Perform when document is ready
}); 
```

对于您的功能，我将其写为...

`var showSomethingb = function(){ //Your function };`

但是有不同的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:14:32.033

只需像其他任何 javascript 文件一样包含指向 jquery 库的链接。

通常，我首先从我的所有 Js 文件中执行此操作，以便从一开始就可以使用它。

```
<script type="text/javascript" src="/jquery.{version}.js"></script>
<script type="text/javascript" src="/Play/DragDrop6.js"></script>
<script type="text/javascript" src="/Play/aHand6.js"></script> 
```

然后，你可以走了。

`$(document).ready(function()`当您希望在整个页面加载后执行某些操作时，您可以在任何（或每个）页面上使用。但 jquery 不限于此。你可以在任何地方使用它。

然而，将至少大部分 JS 代码放在一个地方是有意义的。

所以你的代码可以变成：

```
<script type="text/javascript">

$(document).ready(function() {
    var vstatus = "bid";
    var curtop = 0;
    var curleft = 0;
    var curwidth = 0;
    var curheight = 0;

    function return2Url() {
        history.go(-1);
    }

    function showSomethingb() {
    } 

}; 
```

剩下的取决于你想如何设计和编写你的 JS 语法。

[jquery 文档](http://jquery.com/) 很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:33:55.893

首先你应该问自己你真的想这样做吗？

从技术上讲，Jquery 是 javascript ......它就像它的简写符号。

因此，花时间将您已经以速记方式编写的内容转换为速记方式可能不会很好地利用您的时间。

如果您希望改进您​​的 js 代码，一个更好的方法可能是查看 javascript 最佳实践，例如 1\. 将所有代码放在正文的底部以确保 UI 首先加载 2\. 缩小以减轻负载 3\. 模式像模块模式......我认为你会发现它更有益。

但是，如果您确定，您需要手动完成（没有我知道的工具） w3schools 是一个很好的起点，您也可以使用它.. [http://www.w3schools。 com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T22:20:27.420

就在旁边，

您可以通过使用简写来使第一行更短，`$(document).ready(handler);`即简单`$(handler);`。

例如：

```
$(document).ready(function() {
    // your code
}); 
```

变成

```
$(function(){
    // your code
}); 
```

并且将同样工作。耶！

有关更多信息，请参阅： [http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

# drupal - 管理地理空间 Solr 搜索 Web 应用程序的开源 CMS/框架？

> ID：14760953
> 
> 赞同：0
> 
> 时间：2013-02-07T21:05:02.740
> 
> 标签：drupal, solr, content-management-system, geospatial, opencms

我应该使用哪个开源 CMS 来集成基于位置的内容条目的 Solr 地理空间搜索？

该解决方案不应涉及自定义开发或黑客攻击 - 起初，我在考虑 Drupal，但本演示文稿[http://www.slideshare.net/mobile/nicolasleroy/geospatial-search-with-solr-13130228](http://www.slideshare.net/mobile/nicolasleroy/geospatial-search-with-solr-13130228)中描述的步骤是再次让我失望。

（无论如何，我更喜欢 Java CMS。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:27:20.470

如果您正在寻找开源/免费的基于 Java 的 CMS，让我们在此处查看选项：

*   OpenCms - 使用 SOLR 但没有地理空间功能 afaik

*   Magnolia - SOLR 集成，但不确定地理空间，[http://www.magnolia-cms.com/community/magnolia-conference/program/community-day/presentations/vpro2.html](http://www.magnolia-cms.com/community/magnolia-conference/program/community-day/presentations/vpro2.html)

*   Hippo CMS - 不使用 SOLR，但在 2013 年第一季度的路线图上，但不确定地理空间 ( [http://www.onehippo.org/7_8/library/about/roadmap.html](http://www.onehippo.org/7_8/library/about/roadmap.html) )

*   dotCMS - SOLR 集成，但不确定地理空间，[http: //dotcms.com/plugins/solr-integration](http://dotcms.com/plugins/solr-integration)

他们大多似乎集成了 SOLR，但我怀疑他们默认支持地理空间搜索，没有自定义。我知道这不是一个完全有用的答案，但可能有点用。

# ios - What happens if I set both UILabel.text and UILabel.attributedText?

> ID：14760957
> 
> 赞同：5
> 
> 时间：2013-02-07T21:05:11.977
> 
> 标签：ios, nsstring, uilabel, core-text, nsattributedstring

I have an attributed string which I am making out of HTML using `DTCoreText`, and I want to set it as the value of my UILabel. However, I want to check at a later point if the value of the string has changed, in comparison to the UILabel. Is it possible to set both the UILabel's `text` and `attributedText` properties? Will the `attributedText` simply overshadow the `text` property, so the `text` property can be kept as an internal value?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:24:59.467

根据文档，分配给`text`替换`attributedText`具有相同的内容（尽管作为无样式的属性字符串），并分配给`attributedText`替换`text`具有相同的内容（没有任何格式信息）。

如果要将任意信息附加到 obj-c 对象，则应使用[关联对象](http://blog.andymatuschak.org/post/173646741/your-new-friends-obj-c-associated-objects)。

# java - 从简单表达式中获取 null

> ID：14760958
> 
> 赞同：1
> 
> 时间：2013-02-07T21:05:15.493
> 
> 标签：java, apache-camel

我在骆驼中使用简单的脚本语言。我只需要将主体设置为空。

我试试这个：

```
from("direct:start").setBody().simple("null");

```

并将正文设置为文字字符串“null”。

如果我这样做：

```
from("direct:start").setBody().simple("${header.null}");

```

它有效，但似乎有点笨拙。有没有简单的方法说 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:21:14.033

直接调用`setBody`：

```
from("direct:start").setBody(constant(null)); 
```

# bash - using 'for' in shell script

> ID：14760959
> 
> 赞同：0
> 
> 时间：2013-02-07T21:05:16.093
> 
> 标签：bash, for-loop

I am trying to create a script that will go through several steps on specific files in a directory. Each step work file at a prompt. It's when I use 'for' to work through the needed files that isn't working.

here is the script and starting text file.

```
#lab2dno.sh
#
#use cygwin
#cygwin
#work in %RAM%:\
cd '/cygdrive/e'
  # delete header lines
tail +4 preg.txt > file1.txt
  # split into herdcode.tx1 from %RAM% (e) in bash-3.2
awk -F "," '{close(f);f=$1}{ print > f".tx1" }' file1.txt
  #file list (no ext)
ls -1 *.tx1 | sed 's/\(.*\)\..*/\1/' > hc.ls1
  # delete extra fields (and rename works @ prompt))
  # cut -d "," -f 2,3,6 41300090.tx1 > 41300090.tx2
  # this one does not work
for i in hc.ls1; do cut -d "," -f 2,3,6 $i > $i.tx2;done
  # reorder fields and rename (works at propmt)
  # awk -F, '{ print $2,$3,$1}' *.tx2 > *.tx3
  # this one does not work
for i in *.ls1; do awk -F, '{ print $2,$3,$1}' $i > $i.DNO;done 
```

...preg.txt...

```
MNDHIA Export

Name,Test Date,ID,Tag,Final Calculation,Symbols (Final Calculation),1,Parachek
41300090,1/25/2013,1636,56439256,-0.008,OPEN,1,Parachek
41300090,1/25/2013,1238,67046268,-0.017,OPEN,1,Parachek
41732189,1/29/2013,304,55567637,-0.006,OPEN,1,Parachek
41732189,1/29/2013,415,55646609,-0.007,OPEN,1,Parachek 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:19:04.653

```
for i in hc.ls1; do cut -d "," -f 2,3,6 $i > $i.tx2;done 
```

这行不通。在脚本顶部使用`set -x`，它将打开调试模式并回显每个命令。

您在上面的行中所做的是将值设置为`i`to `hc.ls1`。你真正想要的是将它设置为*里面列出* `hc.ls1`的每个值：

```
for i in $( cat hc.ls1 ) ; do cut -d "," -f 2,3,6 $i > $i.tx2;done 
```

# ruby-on-rails - Rails 服务器突然宕机

> ID：14760962
> 
> 赞同：-1
> 
> 时间：2013-02-07T21:05:18.523
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在开发一个应用程序，rails servr 工作正常，但突然停止了。我尝试重新启动我的系统（iOS）并一次又一次地启动服务器，但我收到了这个错误 -

```
/Users/alokdas/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040777

/Users/alokdas/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040777

=> Booting WEBrick

=> Rails 3.2.11 application starting in development on htt.://0.0.0.3000

=> Call with -d to detach

=> Ctrl-C to shutdown server

Exiting

/Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activemodel-3.2.11/lib/active_model/validations/length.rb:14:in `initialize': :in and :within must be a Range (ArgumentError)

    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activemodel-3.2.11/lib/active_model/validations/with.rb:82:in `new'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activemodel-3.2.11/lib/active_model/validations/with.rb:82:in `block in validates_with'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activemodel-3.2.11/lib/active_model/validations/with.rb:81:in `each'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activemodel-3.2.11/lib/active_model/validations/with.rb:81:in `validates_with'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activemodel-3.2.11/lib/active_model/validations/length.rb:121:in `validates_length_of'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models/validatable.rb:35:in `block in included'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models/validatable.rb:28:in `class_eval'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models/validatable.rb:28:in `included'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models.rb:112:in `include'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models.rb:112:in `block (2 levels) in devise'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models.rb:92:in `each'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models.rb:92:in `block in devise'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models.rb:123:in `devise_modules_hook!'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/models.rb:90:in `devise'
    from /users/alokdas/code/omrails/app/models/view.rb:5:in `<class:View>'
    from /users/alokdas/code/omrails/app/models/view.rb:1:in `<top (required)>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:469:in `load'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:469:in `block in load_file'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:639:in `new_constants_in'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:468:in `load_file'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:353:in `require_or_load'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:502:in `load_missing_constant'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:192:in `block in const_missing'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:190:in `each'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:190:in `const_missing'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/inflector/methods.rb:230:in `block in constantize'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/inflector/methods.rb:229:in `each'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/inflector/methods.rb:229:in `constantize'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:554:in `get'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:588:in `constantize'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise.rb:267:in `get'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/mapping.rb:77:in `to'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/mapping.rb:72:in `modules'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/mapping.rb:89:in `routes'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/mapping.rb:156:in `default_used_route'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/mapping.rb:66:in `initialize'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise.rb:301:in `new'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise.rb:301:in `add_mapping'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/rails/routes.rb:208:in `block in devise_for'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `each'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `devise_for'
    from /users/alokdas/code/omrails/config/routes.rb:2:in `block in <top (required)>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /users/alokdas/code/omrails/config/routes.rb:1:in `<top (required)>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `call'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `execute'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /users/alokdas/code/omrails/config/environment.rb:5:in `<top (required)>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /users/alokdas/code/omrails/config.ru:3:in `block in <main>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
    from /users/alokdas/code/omrails/config.ru:in `new'
    from /users/alokdas/code/omrails/config.ru:in `<main>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:40:in `eval'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:40:in `parse_file'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/server.rb:200:in `app'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/server.rb:304:in `wrapped_app'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/server.rb:254:in `start'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
    from /Users/alokdas/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

就在这之前，我跑过——`rails generate devise:views`

谢谢你的帮助

更多信息 -

1.  我以前使用过 - rails generate devise:install - 它已经创建了一个注册页面。
2.  现在我记得我使用了命令“rails generate devise views”（中间没有冒号）并且它创建了一些文件，但不确定在哪里。这会造成一些冲突吗？
3.  这是我来自 Model 的 view.rb 文件

    class View < ActiveRecord::Base # 包括默认设计模块。其他可用的有：#:token_authenticable、:confirmable、#:lockable、:timeoutable 和:omniauthable 设计:database_authenticatable、:registerable、:recoverable、:rememberable、:trackable、:validatable

    # 为模型设置可访问（或受保护）属性 attr_accessible :email, :password, :password_confirmation, :remember_me # attr_accessible :title, :body end

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:26:56.593

看起来你没有运行`rails g devise:install`，我认为如果你运行并`rails g`命令它也会失败。最好的选择，尝试再次安装设计，如果失败，手动删除所有与设计相关的文件，然后重试。

# html - Hovering multiple items

> ID：14760967
> 
> 赞同：0
> 
> 时间：2013-02-07T21:05:34.190
> 
> 标签：html, css

So I am making a webshop for my company and I made a dropdown menu to choose different kinds of product categories. My products are listed right underneath the dropdown menu and the dropdown menu itself overrides the different product images. My idea was to be able to hover over a product image to able to see some information about the product. To achieve this i made a div with absolute position that overides the image but with an opacity of 0\. When you hover over it the opacity changes to 50%. But since the dropdown menu overides the image, when trying to choose a product category the dropdown menu vanishes when hovering over the product image.

Here is my css code.

```
#product_info
{
    position:absolute;
    background-color:#000;
    width:250px;
    height:167px;
    opacity:0.0;
    filter:alpha(opacity=0); /* For IE8 and earlier */
}

#product_info:hover
{
    opacity:0.5;
    filter:alpha(opacity=50); /* For IE8 and earlier */
}

ul.dropdown, ul.dropdown ul
{
    list-style:none;
    margin:0; padding:0;
    position: relative;
}

ul.dropdown ul                      
{ 
        display:none; /*initially menu item is hidden*/
        position: absolute; /*absolute positioning is important for menu to float*/
        background-color:#fff;
        text-align: left;
        top:18px;
        width:150px;

}

/*Hover effect for menu*/
ul.dropdown li:hover  > ul      
{ 
    display:block;
} 
```

And here is my html code. The product_info div is loaded from the php function products().

```
<?php
    require 'scripts/cart.php';
?>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<html>
    <head>
        <title>Streetstash - Webshop</title>

        <LINK href="stylesheets/style.css" rel="stylesheet" type="text/css">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    </head>

    <body>
        <div id='navigation'><p class='nav'><a class='nav' href='/streetstash'>Forside</a> / <a class='nav' href='omkring-os.html'>Omkring os</a> / <a class='nav' href='#'>Blog</a></p></div>
        <div id='container_webshop'>
            <div id='container_about'>
                <table cellpadding="0" cellspacing="15" width="200px">
                    <tr>
                        <td colspan="3" align="center"><p class='subheader'><?php 
                        if($_GET['kategori'] == null){
                            echo "Alle produkter";
                        }else{
                            echo $_GET['kategori'];
                        }
                        ?></p></td>
                    </tr>
                    <tr>
                        <td>
                            <ul class='dropdown'>
                                <li class='header_item' >
                                    <p class='dropdown_headers'><a class='nav' href="#">Beklædning</a></p>
                                    <ul>
                                        <?php echo "
                                        <li ><p class='nav'><a class='nav' href='webshop.php?kategori=".'T-shirts'."'>T-shirts</a></p></li>
                                        <li><p class='nav'><a class='nav' href='webshop.php?kategori=".'Sweatshirts'."'>Sweatshirts</a></p></li>
                                        <li><p class='nav'><a class='nav' href='webshop.php?kategori=".'Hatte'."'>Hatte</a></p></li>";?>
                                    </ul>

                                </li>
                        </td>
                        <td>
                            <p class='nav'>/</p>
                        </td>
                        <td>
                            <ul class='dropdown'>
                                <li>
                                    <p class='dropdown_headers'><a class='nav' href="#">Skate</a></p>
                                    <ul>
                                        <?php echo "
                                        <li><p class='nav'><a class='nav' href='webshop.php?kategori=".'Decks'."'>Decks</a></p></li>
                                        <li><p class='nav'><a class='nav' href='webshop.php?kategori=".'Hjul'."'>Hjul</a></p></li>";
                                        ?>
                                    </ul>
                                </li>
                            </ul>
                        </td>
                            </ul>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <?php products(); ?>

                </table>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:27:16.073

您是否尝试过使用 z-index？

# php - Retrieve $_POST variable from array name

> ID：14760969
> 
> 赞同：0
> 
> 时间：2013-02-07T21:05:39.690
> 
> 标签：php, post

Consider the following:

```
<input type="hidden" name="random[variable][here]" value="valueofrandom"/> 
```

Is there a better way to retrieve its value if we have the name as a string? The following works, but it doesn't seem very *smart*.

```
function getPostValueFromName($name) {
    // Example string name: random[variable][here]
    $parts = preg_split('/\[|\]/i', $name, -1, PREG_SPLIT_NO_EMPTY);

    if (isset($parts[3])) {
        return $_POST[$parts[0]][$parts[1]][$parts[2][$parts[3]]];
    } elseif (isset($parts[2])) {
        return $_POST[$parts[0]][$parts[1]][$parts[2]];
    } elseif (isset($parts[1])) {
        return $_POST[$parts[0]][$parts[1]];
    } else {
        return $_POST[$parts[0]];
    }
} 
```

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:18:39.413

我使用**[https://github.com/symfony/PropertyAccess](https://github.com/symfony/PropertyAccess)**来处理这样的事情。

使用它，你可以`random[variable][here]`得到

```
$accessor = new PropertyAccessor();

$val = $accessor->getValue($_POST, 'random.variable.here');
// or
$val = $accessor->getValue($_POST, 'random[variable][here]'); 
```

# c - 在结构数组中查找 5 个最大值的最快方法

> ID：14760973
> 
> 赞同：1
> 
> 时间：2013-02-07T21:05:45.133
> 
> 标签：c

`structs`我有一个被调用的数组`struct Test testArray[25]`。

`Test struct`包含一个名为 的成员`int size`。

根据成员，获取另一个数组的最快方法是什么，该数组`Test structs`包含原始数组中的所有内容，不包括最大的 5 个`size`？不修改原始数组。

注意：数组中的项目数量可能要大得多，只是将其用于测试，并且值可能是动态的。只是想要一个较慢的子集进行测试。

* * *

我正在考虑制作原始副本，`testArray`然后对该数组进行排序。`Test structs`然后返回一个不包含前 5 或后 5的数组（取决于 asc 或 desc）。

或者

遍历`testArray`寻找最大的 5，然后制作原始数组的副本，不包括最大的 5。与已找到的最大 5 的数组相比，这种方式似乎会遍历数组太多次。

* * *

跟进问题：

这就是我现在正在做的事情，让我知道你的想法吗？

考虑到我感兴趣的最大元素的数量将保持不变，我正在遍历数组并获取最大元素并将其交换到数组的前面。然后我跳过第一个元素，然后寻找最大的元素，然后将其交换到第二个索引中……依​​此类推。直到我有前 5 个最大的。然后我停止排序，只是将第六个索引复制到一个新数组的末尾。

这样，无论如何，我只遍历数组 5 次。而且我不必对整个事情进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:40:25.117

使用线性时间[选择算法的](http://en.wikipedia.org/wiki/Selection_algorithm)[部分排序](http://en.wikipedia.org/wiki/Partial_sorting)将在 O(n) 时间内完成此操作，其中排序将是 O(nlogn)。

引用[部分排序](http://en.wikipedia.org/wiki/Partial_sorting)页面：

*上述线性时间选择算法可用于在最坏情况线性时间 O(n) 中找到 k 个最小或 k 个最大元素。要找到 k 个最小元素，请使用线性时间中位数选择算法找到第 k 个最小元素。之后，以第 k 个最小元素为基准对数组进行分区。k 个最小的元素将是前 k 个元素。*

您可以在 O(n) 中找到 k 个最大的项目，尽管制作数组的副本或指向每个元素的指针数组（更智能）也会花费您一些时间，但无论如何您都必须这样做。

如果您希望我对所涉及的算法给出完整的解释，请发表评论。

*更新：* 关于您的后续问题，这基本上建议对列表进行五次迭代......这将起作用。但它对列表的迭代次数超出了您的需要。在一次遍历中找到 k 个最大元素（使用 O(n) 选择算法）比这要好得多。这样你迭代一次来创建你的新数组，然后再做一次选择（如果你使用中位数，你不需要第三次迭代来删除五个最大的项目，因为你可以拆分工作根据第 5 大项的位置将数组分成两部分），而不是迭代一次以创建新数组，然后再进行五次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:43:16.700

如前所述，排序是 O(nlogn +5) 在 O(5n + 5) 中迭代。在一般情况下，使用排序算法找到 m 个最大数是 O(nlog +m)，而迭代算法是 O(mn +m)。哪种算法更好的问题取决于 m 和 n 的值。对于 5 的值，迭代最多 2 到第 5 个数字更好，即微不足道的 32。但是就操作而言，排序比迭代更密集，所以它会更多，直到它更快。

从理论上讲，您可以通过使用迄今为止最大数字的排序 srray 和二进制搜索来保持将为您提供 O(nlogm) 的顺序，但这又取决于 n 和 m 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:57:38.033

也许数组不是您想要的最佳结构。特别是因为每次添加新值时都需要对其进行排序。也许链表更好，在插入时进行排序（在最坏的情况下是 O(N)，在最好的情况下是 O(1)），然后丢弃最后五个元素。此外，您必须考虑仅切换一个指针比重新分配整个数组要快得多，只是在其中获取另一个元素。

为什么不是 AVL 树？遍历时间为 O(log2N)，但您必须考虑重新平衡树的时间，以及花在编码上的时间是否值得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T22:46:35.250

使用`min-heap`数据结构并将堆大小设置为`5`，当堆的最小元素小于数组中的元素时，您可以遍历数组并插入堆。 `getMin`需要`O(1)`时间，插入需要`O(log(k))`时间`k`堆的元素大小在哪里（在我们的例子中是`5`）。所以在最坏的情况下，我们`O(n*log(k))`很难找到最多 5 个元素。另一个`O(n)`将获取排除列表。

# css - ie9 showing weird spacing in div

> ID：14760981
> 
> 赞同：0
> 
> 时间：2013-02-07T21:06:01.507
> 
> 标签：css, html

So here is where the page is hosted: *see comment*

The problem is in the bottom content box titled 'Mortgage Recent News', you'll notice how the borders of the div are misaligned in ie9\. However, they are perfectly aligned in FF and Chrome.

I realize that this code isn't ideal to begin with, but it's what I have to work with. I cannot include the images in any part of the `ul` as it's generated by a backend script that we do not have access to.

I'm just looking for a way to fix the current code so that it looks the same on ie9 as it does on FF and Chrome right now.

Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:23:27.950

修复了问题。基本上我需要在css中指定每个li的填充和高度，而不是让浏览器默认。现在工作。

# opencv - 使用 OpenCV 进行玉米树计数

> ID：14760982
> 
> 赞同：3
> 
> 时间：2013-02-07T21:06:01.740
> 
> 标签：opencv, counting

![在此处输入图像描述](../Images/66f381895215ae4d9bf2d91f693157e6.png)![如何数玉米树？](../Images/7aac2fd26e56b707b6650674aaae6011.png)![在此处输入图像描述](../Images/33d0f8b77562832664c58cbab2bf4997.png)![玉米树](../Images/8686d7c20a7912034f7566a4783908e3.png)

如何根据下图用opencv准确统计玉米树？我已经尝试使用 inRange 进行 HSV 转换，但到目前为止一无所获。

有没有正确计算树木的方法？即使降噪，我认为它也不会算作财产。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:49:33.710

我选择了一个模板如下... ![模板 1](../Images/65c752876ddecc0749cdb5ff62ca2e75.png) 当我尝试运行模板匹配时，我得到了以下匹配。 ![在此处输入图像描述](../Images/b140dc5053df9f70cf2bea5237fba241.png) 匹配很好，因为我从图像的那部分选择了模板。但是结果图像包含的值当阈值编辑时，整个图像不同区域的匹配程度看起来像这样。 ![在此处输入图像描述](../Images/a34dc96bebdc1710a601b4799a4d5cc3.png) 所以你可以看到，如果你计算白色块（忽略小噪声），你几乎可以得到可能的作物数量......！！

**编辑**

**如果您尝试在 RGB 图像的绿色平面中进行**模板匹配，您可以获得更精确的结果

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:05:18.670

实施几个简单的预处理步骤时，您的问题更容易解决。看看我得到的结果：

![在此处输入图像描述](../Images/94ba9dc26c7b0ec113f56295799e25c2.png)

脚步：

*   将 RGB 转换为 LAB 图像
*   提取A通道（丢弃L、B通道）
*   拉伸/最大化图像对比度
*   使用 Otsu 的最佳阈值选择进行二值化
*   反转图像，使前景为白色，背景为黑色

基于此图像模板匹配或其他检测方法应该会更好。**

# iphone - How to stop SquareCamController Apple sample Demo project in Arc?

> ID：14760985
> 
> 赞同：1
> 
> 时间：2013-02-07T21:06:08.180
> 
> 标签：iphone, objective-c, xcode, automatic-ref-counting

In my App i am using the sample code provided by apple for face detection. The code was written prior to ARC and it has a lot of non arc code. I converted the project for Arc and its running fine in my ARC project. The only problem seems to be is i can see my nslog statements from that class still running and the App crashes after few minutes. If i put break points it also stops in that class which means after the view is dismissed it's still running in the background which eventually make it crash.

Here's the code where its crashing :

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{   
    // got an image
    CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CFDictionaryRef attachments = CMCopyDictionaryOfAttachments(kCFAllocatorDefault, sampleBuffer, kCMAttachmentMode_ShouldPropagate);
    CIImage *ciImage = [[CIImage alloc] initWithCVPixelBuffer:pixelBuffer options:(__bridge NSDictionary *)attachments];
    if (attachments)
        CFRelease(attachments);
    NSDictionary *imageOptions = nil;
    UIDeviceOrientation curDeviceOrientation = [[UIDevice currentDevice] orientation];
    int exifOrientation;

    /* kCGImagePropertyOrientation values
        The intended display orientation of the image. If present, this key is a CFNumber value with the same value as defined
        by the TIFF and EXIF specifications -- see enumeration of integer constants. 
        The value specified where the origin (0,0) of the image is located. If not present, a value of 1 is assumed.

        used when calling featuresInImage: options: The value for this key is an integer NSNumber from 1..8 as found in kCGImagePropertyOrientation.
        If present, the detection will be done based on that orientation but the coordinates in the returned features will still be based on those of the image. */

    enum {
        PHOTOS_EXIF_0ROW_TOP_0COL_LEFT          = 1, //   1  =  0th row is at the top, and 0th column is on the left (THE DEFAULT).
        PHOTOS_EXIF_0ROW_TOP_0COL_RIGHT         = 2, //   2  =  0th row is at the top, and 0th column is on the right.  
        PHOTOS_EXIF_0ROW_BOTTOM_0COL_RIGHT      = 3, //   3  =  0th row is at the bottom, and 0th column is on the right.  
        PHOTOS_EXIF_0ROW_BOTTOM_0COL_LEFT       = 4, //   4  =  0th row is at the bottom, and 0th column is on the left.  
        PHOTOS_EXIF_0ROW_LEFT_0COL_TOP          = 5, //   5  =  0th row is on the left, and 0th column is the top.  
        PHOTOS_EXIF_0ROW_RIGHT_0COL_TOP         = 6, //   6  =  0th row is on the right, and 0th column is the top.  
        PHOTOS_EXIF_0ROW_RIGHT_0COL_BOTTOM      = 7, //   7  =  0th row is on the right, and 0th column is the bottom.  
        PHOTOS_EXIF_0ROW_LEFT_0COL_BOTTOM       = 8  //   8  =  0th row is on the left, and 0th column is the bottom.  
    };

    switch (curDeviceOrientation) {
        case UIDeviceOrientationPortraitUpsideDown:  // Device oriented vertically, home button on the top
            exifOrientation = PHOTOS_EXIF_0ROW_LEFT_0COL_BOTTOM;
            break;
        case UIDeviceOrientationLandscapeLeft:       // Device oriented horizontally, home button on the right
            if (isUsingFrontFacingCamera)
                exifOrientation = PHOTOS_EXIF_0ROW_BOTTOM_0COL_RIGHT;
            else
                exifOrientation = PHOTOS_EXIF_0ROW_TOP_0COL_LEFT;
            break;
        case UIDeviceOrientationLandscapeRight:      // Device oriented horizontally, home button on the left
            if (isUsingFrontFacingCamera)
                exifOrientation = PHOTOS_EXIF_0ROW_TOP_0COL_LEFT;
            else
                exifOrientation = PHOTOS_EXIF_0ROW_BOTTOM_0COL_RIGHT;
            break;
        case UIDeviceOrientationPortrait:            // Device oriented vertically, home button on the bottom
        default:
            exifOrientation = PHOTOS_EXIF_0ROW_RIGHT_0COL_TOP;
            break;
    }

    imageOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:exifOrientation] forKey:CIDetectorImageOrientation];
    NSArray *features = [faceDetector featuresInImage:ciImage options:imageOptions];

    // get the clean aperture
    // the clean aperture is a rectangle that defines the portion of the encoded pixel dimensions
    // that represents image data valid for display.
    CMFormatDescriptionRef fdesc = CMSampleBufferGetFormatDescription(sampleBuffer);
    CGRect clap = CMVideoFormatDescriptionGetCleanAperture(fdesc, false /*originIsTopLeft == false*/);

    dispatch_async(dispatch_get_main_queue(), ^(void) {
        [self drawFaceBoxesForFeatures:features forVideoBox:clap orientation:curDeviceOrientation]; --------->>>>>> Its crashing here
    });
} 
```

# c++ - struct as a parameter in C++

> ID：14760986
> 
> 赞同：0
> 
> 时间：2013-02-07T21:06:09.837
> 
> 标签：c++, parameters, struct

I'm a beginner so please keep it simple.

Anyway, I have a struct defined like so:

```
struct card      
  {
  char rank[10];
  char suit[10];
  char color;
  bool dealt;
  char location[10];
  }; 
```

and I have a function that is passed this type of struct:

```
 void importCard(card deck[52]); 
```

The problem is, if I define the struct in main(), then the compiler does not know what "card" is at the time of function declaration (above main). How do I get around this without defining the struct as a global?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:08:04.433

*将类型*定义为“全局”很好，因此只需`struct`在文件顶部定义类型即可。

* * *

顺便说一下，注意声明

```
void importCard(card deck[52]); 
```

几乎从来没有这样写，因为编译器只是丢弃了`52`其中的内容（因此在源代码中包含它有点误导）。

相反，它被写成例如

```
void importCard(card deck[]); 
```

为了彻底，我应该提到，通过使用而不是原始数组，编码变得容易`std::vector`得多，然后函数将是例如

```
vector<card> importCards(); 
```

# c# - How can I authenticate to an ASP.NET WebAPI that is using Forms Authentication From a C# Console Application?

> ID：14760989
> 
> 赞同：9
> 
> 时间：2013-02-07T21:06:20.803
> 
> 标签：c#, asp.net, security, authentication, asp.net-web-api

I have an existing, working ASP.NET MVC 4 web application. I have written my own `RoleProvider` and I am using the standard [[Authorize] attribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx). My controllers look like this:

```
[Authorize(Roles="ContactAdmins")] //System.Web.Mvc
public ActionResult Index() 
```

I would like to add a WebAPI controller to my application, and **take advantage of my existing plumbing**

```
[Authorize(Roles="ContactAdmins")] //System.Web.Http
public IEnumerable<Contact> Get() 
```

This works for Javascript ajax calls from within my site (since the browser user is already authenticated with a Forms auth cookie). My question is from a C# Console Application (or any other application that is not part of my web app) how can I authenticate to this API?

Lets assume that for the parts of my API which are public, I am using code very similar to what is found at this question [Consuming WebApi in MVC3](https://stackoverflow.com/questions/8426545/consuming-webapi-in-mvc3).

```
var url = "http://localhost:9000/api/contacts";
using (var client = new WebClient())
using (var reader = XmlReader.Create(client.OpenRead(url)))
{
    var serializer = new XmlSerializer(typeof(Contact[]));
    var contacts = (Contact[])serializer.Deserialize(reader);
    // TODO: Do something with the contacts
} 
```

What would I need to modify here? Or would I have to scrap this and use a completely different approach? I am not tied to using Forms for API Authentication of remote clients, but I would like to keep the current elegant approach for JavaScript clients that are part of the app (just request API since forms cookie is set).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:05:44.283

您可以基于与 Forms Auth 相同的原语将标准 Forms Auth 与自定义 Basic Auth 结合使用。请注意，对于 Basic，强烈建议使用 HTTPS（事实上现在越来越多的 Windows 组件默认不支持 Basic+HTTP）。

下面是重用来自 Forms Auth 的代码的基本身份验证模块的示例代码。它还带有自己的配置部分（名为“basicAuth”）。您要确保两个身份验证（表单和基本）在一起配置时使用相同的 cookie 和参数：

```
using System;
using System.ComponentModel;
using System.Configuration;
using System.Globalization;
using System.Net;
using System.Security.Principal;
using System.Text;
using System.Web;
using System.Web.Configuration;
using System.Web.Security;

namespace MySecurity
{
    public class BasicAuthenticationModule : IHttpModule
    {
        public event EventHandler<BasicAuthenticationEventArgs> Authenticate;

        public void Dispose()
        {
        }

        protected virtual string GetRealm(HttpContext context)
        {
            return BasicAuthenticationSection.Current.GetRealm(context);
        }

        public virtual void Init(HttpApplication context)
        {
            context.AuthenticateRequest += OnAuthenticateRequest;
            context.EndRequest += OnEndRequest;
        }

        protected virtual bool FormsAuthenticate(HttpContext context, string login, string password, string realm)
        {
            // check ad-hoc forms credentials, as we can support it even if forms auth is not configured
            FormsAuthenticationConfiguration c = ((AuthenticationSection)ConfigurationManager.GetSection("system.web/authentication")).Forms;
            if ((c.Credentials == null) || (c.Credentials.Users == null))
                return false;

            foreach (FormsAuthenticationUser user in c.Credentials.Users)
            {
                if ((string.Compare(user.Name, login, true, CultureInfo.CurrentCulture) == 0) &&
                    (string.Compare(user.Password, password, true, CultureInfo.CurrentCulture) == 0))
                    return true;
            }
            return false;
        }

        protected virtual bool OnAuthenticate(HttpContext context, string login, string password, string realm)
        {
            EventHandler<BasicAuthenticationEventArgs> handler = Authenticate;
            if (handler != null)
            {
                BasicAuthenticationEventArgs e = new BasicAuthenticationEventArgs(context, login, password, realm);
                handler(this, e);
                return !e.Cancel;
            }
            return FormsAuthenticate(context, login, password, realm);
        }

        protected virtual string[] GetUserRoles(HttpContext context, string login, string realm)
        {
            // TODO: overwrite if needed
            return new string[0];
        }

        protected virtual IPrincipal GetUser(HttpContext context, FormsAuthenticationTicket ticket)
        {
            return new GenericPrincipal(new BasicAuthenticationIdentity(ticket), GetUserRoles(context, ticket.Name, GetRealm(context)));
        }

        protected virtual void OnAuthenticated(HttpContext context)
        {
        }

        protected virtual void OnEndRequest(object sender, EventArgs e)
        {
            HttpApplication application = (HttpApplication)sender;
            if (application.Response.StatusCode != (int)HttpStatusCode.Unauthorized)
                return;

            string basic = "Basic Realm=\"" + GetRealm(application.Context) + "\"";
            application.Response.AppendHeader("WWW-Authenticate", basic);
        }

        public static void SignOut()
        {
            if (HttpContext.Current == null)
                return;

            HttpContext.Current.Request.Cookies.Remove(BasicAuthenticationSection.Current.Name);
            HttpContext.Current.Response.Cookies.Remove(BasicAuthenticationSection.Current.Name);
            HttpCookie cookie = new HttpCookie(BasicAuthenticationSection.Current.Name);
            cookie.Expires = DateTime.Now.AddDays(-1);
            HttpContext.Current.Response.Cookies.Add(cookie);
        }

        public static bool IsAuthenticated(HttpContext context)
        {
            if ((context == null) || (context.User == null) || (context.User.Identity == null))
                return false;

            return context.User.Identity.IsAuthenticated;
        }

        protected virtual void OnAuthenticateRequest(object sender, EventArgs e)
        {
            HttpApplication application = (HttpApplication)sender;
            if ((IsAuthenticated(application.Context)) && (!BasicAuthenticationSection.Current.ReAuthenticate))
                return;

            string encryptedTicket;
            FormsAuthenticationTicket ticket;
            HttpCookie cookie = application.Context.Request.Cookies[BasicAuthenticationSection.Current.Name];
            if (cookie == null)
            {
                // no cookie, check auth header
                string authHeader = application.Context.Request.Headers["Authorization"];
                if ((string.IsNullOrEmpty(authHeader)) || (!authHeader.StartsWith("Basic ", StringComparison.InvariantCultureIgnoreCase)))
                {
                    ResponseAccessDenied(application);
                    return;
                }

                string login;
                string password;
                string lp = authHeader.Substring(6).Trim();
                if (string.IsNullOrEmpty(lp))
                {
                    ResponseAccessDenied(application);
                    return;
                }

                lp = Encoding.Default.GetString(Convert.FromBase64String(lp));
                if (string.IsNullOrEmpty(lp.Trim()))
                {
                    ResponseAccessDenied(application);
                    return;
                }

                int pos = lp.IndexOf(':');
                if (pos < 0)
                {
                    login = lp;
                    password = string.Empty;
                }
                else
                {
                    login = lp.Substring(0, pos).Trim();
                    password = lp.Substring(pos + 1).Trim();
                }

                if (!OnAuthenticate(application.Context, login, password, GetRealm(application.Context)))
                {
                    ResponseAccessDenied(application);
                    return;
                }

                // send cookie back to client
                ticket = new FormsAuthenticationTicket(login, false, (int)BasicAuthenticationSection.Current.Timeout.TotalMinutes);
                encryptedTicket = FormsAuthentication.Encrypt(ticket);
                cookie = new HttpCookie(BasicAuthenticationSection.Current.Name, encryptedTicket);
                application.Context.Response.Cookies.Add(cookie);

                // don't overwrite context user if it's been set
                if ((!IsAuthenticated(application.Context)) || (BasicAuthenticationSection.Current.ReAuthenticate))
                {
                    application.Context.User = GetUser(application.Context, ticket);
                }
                OnAuthenticated(application.Context);
                application.Context.Response.StatusCode = (int)HttpStatusCode.OK;
                return;
            }

            // there is a cookie, check it
            encryptedTicket = cookie.Value;
            if (string.IsNullOrEmpty(encryptedTicket))
            {
                ResponseAccessDenied(application);
                return;
            }

            try
            {
                ticket = FormsAuthentication.Decrypt(encryptedTicket);
            }
            catch
            {
                ResponseAccessDenied(application);
                return;
            }

            if (ticket.Expired)
            {
                ResponseAccessDenied(application);
                return;
            }

            // set context user
            // don't overwrite context user if it's been set
            if ((!IsAuthenticated(application.Context) || (BasicAuthenticationSection.Current.ReAuthenticate)))
            {
                application.Context.User = GetUser(application.Context, ticket);
            }
            OnAuthenticated(application.Context);
        }

        protected virtual void WriteAccessDenied(HttpApplication application)
        {
            if (application == null)
                throw new ArgumentNullException("application");

            application.Context.Response.StatusCode = (int)HttpStatusCode.Unauthorized;
            application.Context.Response.StatusDescription = "Unauthorized";
            application.Context.Response.Write(application.Context.Response.StatusCode + " " + application.Context.Response.StatusDescription);
        }

        protected virtual void ResponseAccessDenied(HttpApplication application)
        {
            // if there is a bad cookie, kill it
            application.Context.Request.Cookies.Remove(BasicAuthenticationSection.Current.Name);
            application.Context.Response.Cookies.Remove(BasicAuthenticationSection.Current.Name);
            HttpCookie cookie = new HttpCookie(BasicAuthenticationSection.Current.Name);
            cookie.Expires = DateTime.Now.AddDays(-1);
            HttpContext.Current.Response.Cookies.Add(cookie);
            WriteAccessDenied(application);
            application.CompleteRequest();
        }
    }

    public class BasicAuthenticationSection : ConfigurationSection
    {
        public const string SectionName = "basicAuth";
        private const string DefaultCookieName = "." + SectionName;
        private static BasicAuthenticationSection _current;

        public static BasicAuthenticationSection Current
        {
            get
            {
                return _current ?? (_current = ConfigurationManager.GetSection(SectionName) as BasicAuthenticationSection ?? new BasicAuthenticationSection());
            }
        }

        [StringValidator(MinLength = 1), ConfigurationProperty("name", DefaultValue = DefaultCookieName)]
        public string Name
        {
            get
            {
                return (string)base["name"];
            }
        }

        internal string GetRealm(HttpContext context)
        {
            if (!string.IsNullOrEmpty(Realm))
                return Realm;

            return context.Request.Url.Host;
        }

        [ConfigurationProperty("realm", DefaultValue = "")]
        public string Realm
        {
            get
            {
                return (string)base["realm"];
            }
        }

        [ConfigurationProperty("domain", DefaultValue = "")]
        public string Domain
        {
            get
            {
                return (string)base["domain"];
            }
        }

        [ConfigurationProperty("reAuthenticate", DefaultValue = false)]
        public bool ReAuthenticate
        {
            get
            {
                return (bool)base["reAuthenticate"];
            }
        }

        [TypeConverter(typeof(TimeSpanMinutesConverter)), ConfigurationProperty("timeout", DefaultValue = "30"), PositiveTimeSpanValidator]
        public TimeSpan Timeout
        {
            get
            {
                return (TimeSpan)base["timeout"];
            }
        }
    }

    public class BasicAuthenticationIdentity : IIdentity
    {
        public BasicAuthenticationIdentity(FormsAuthenticationTicket ticket)
        {
            if (ticket == null)
                throw new ArgumentNullException("ticket");

            Ticket = ticket;
        }

        public FormsAuthenticationTicket Ticket;

        public string AuthenticationType
        {
            get
            {
                return BasicAuthenticationSection.SectionName;
            }
        }

        public bool IsAuthenticated
        {
            get
            {
                return true;
            }
        }

        public string Name
        {
            get
            {
                return Ticket.Name;
            }
        }
    }

    public class BasicAuthenticationEventArgs : CancelEventArgs
    {
        public BasicAuthenticationEventArgs(HttpContext context, string login, string password, string realm)
        {
            if (context == null)
                throw new ArgumentNullException("context");

            Context = context;
            Login = login;
            Password = password;
            Realm = realm;
        }

        public HttpContext Context { get; private set; }
        public string Realm { get; private set; }
        public string Login { get; private set; }
        public string Password { get; private set; }
        public IPrincipal User { get; set; }
    }
} 
```

一旦在服务器端安装了它，您就可以将 WebClient 配置为使用基本身份验证：

```
WebClient client = new WebClient();
client.Credentials =  new NetworkCredential("username", "password"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:28:50.867

有多种方法可以与控制台应用程序共享 cookie。看看这里的一些想法：

[http://netpl.blogspot.com/2008/02/clickonce-webservice-and-shared-forms.html](http://netpl.blogspot.com/2008/02/clickonce-webservice-and-shared-forms.html)

另一个简单的选择是公开一个不需要任何身份验证的 Web 方法，获取用户名和密码并将 cookie 返回给客户端。

无论您采用何种方法，您的目标都是以某种方式在控制台应用程序端获取表单 cookie。从那里您很容易完成，因为您只需将 cookie 附加到您的请求中。Web api 将愉快地接受 cookie。

# twitter-bootstrap - 在 twitter 引导导航栏中添加徽标

> ID：14760992
> 
> 赞同：1
> 
> 时间：2013-02-07T21:06:37.680
> 
> 标签：twitter-bootstrap, navigation

我在 twitter bootstrap 中创建了一个基本的导航栏。我把标志放在上面。但问题是，当我调整窗口大小时，它失去了响应能力，我的意思是导航折叠不起作用

这是我的导航栏的代码

```
<nav>
    <div class="navbar navbar-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar">
                    <span class="icon-th-list"></span>
                </a>
                <a href="#" class="brand"> aniya</a>
                <div class="nav-collapse collapse">
                    <ul class="nav pull-right">
                        <li><a href="#">about us</a></li>
                        <li><a href="#">contact us</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav> <!----nav---> 
```

## 这是我的 CSS

```
body {
    position: relative; width: 960px; padding: 30px; margin: 30px auto 5px; background: white; -moz-box-shadow: 0 0 20px black;
}

    .navbar .navbar-inner {
        height: 120px;
        width: auto;
    }

    .navbar .navbar-inner .container .brand {
        background-image: url(img/sample%20logo.jpg);
        width:500px;
        height:100px;
        background-repeat: no-repeat;

        text-indent:-9999px;
    } 
```

* * *

这是我做的

[http://i47.tinypic.com/2uo5g76.jpg](http://i47.tinypic.com/2uo5g76.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:12:48.157

我认为这里有很多问题。

首先，我假设您肯定将所有响应式 Bootstrap css 等加载到您的页面上？

看看这个页面：http: [//twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

它将准确地向您显示响应所需的文件和 html。

在你上面的css中，你的body标签上设置了一个宽度以及填充、边距等。这似乎不是引导页面的正常情况，我猜这会导致问题。

我不是 100% 确定它是否会有所帮助，但尝试将它们在按钮元素上的数据属性添加到您的 btn-navbar

```
<a class="btn btn-navbar">
 <span class="icon-th-list"></span>
</a> 
```

另外我认为为什么你的导航栏没有折叠可能是因为你的标志图像的大小。

您可能必须编写一些媒体查询来处理这个问题 - 可能为较低的分辨率提供较小的图像。

我希望我在这里所说的一些内容可以帮助您，或者至少让您走上正确的道路。

# php - 其他用户无法在 localhost 上使用 facebook 的 api 登录

> ID：14760994
> 
> 赞同：0
> 
> 时间：2013-02-07T21:07:03.297
> 
> 标签：php, facebook, login, sdk

我正在使用本地主机上的 PHP SDK。我看过这里发布的其他问题，如下所示： [Can't login to website using facebook's api's](https://stackoverflow.com/questions/13413334/cant-login-to-website-using-facebooks-apis)

域、网址、登录网址都匹配。应用程序密钥和 id 匹配，沙盒从未打开（仔细检查以确保）。我无法将它移到新笔记本电脑上，因为我放入的文件夹被称为其他东西。在我改变它之后它工作正常。

我遇到的问题是，我作为应用程序的所有者可以登录并且它可以执行我想要它执行的操作，但是如果我有朋友或其他用户尝试登录，它会请求权限，然后显示“发生错误，请稍后再试”facebook错误页面。不完全确定它为什么这样做，因为我根本没有将我的信息硬编码到其中。

我使用了不同的浏览器，清除了 cookie，似乎没有任何效果。任何想法都会有所帮助。

编辑：我也尝试在登录前销毁会话，但没有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:13:42.040

如果其他人不使用您的计算机（即本地主机），则他们无法在“本地主机”上访问您的应用程序。

如果您希望其他人能够使用您的应用程序，他们将需要您的代码副本，在他们的本地计算机上运行，​​或者您需要通过可公开访问的 IP 和/或域名使其可用。