# StackOverflow 问答 13073000-13073999

# ruby-on-rails - 订购合并的 DataMapper 查询并限制返回的记录数

> ID：13073005
> 
> 赞同：0
> 
> 时间：2012-10-25T16:23:44.303
> 
> 标签：ruby-on-rails, datamapper

目前我有一个查询以我想要的方式排序我的结果集，但我想限制返回的记录数。我知道 DataMapper 的限制，但这对我不起作用，因为我限制了每个查询返回而不是合并返回。这是我的查询：

```
 @activities = current_user.followed_users.activities(:order => [:created_at.desc]) + current_user.followed_centers.activities(:order => [:created_at.desc]) 
```

这会合并结果集并对它们进行正确排序。但是，有谁知道我是否可以限制合并结果集的返回大小？即如果我说limit => 2 ...这将获得用户或/和中心的2个最新活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:36:33.150

```
@activities = (current_user.followed_users.activities(:order => [:created_at.desc]) + current_user.followed_centers.activities(:order => [:created_at.desc])).all(:limit => 5) 
```

# visual-studio-2010 - 可以在 Visual Studio 中自动打开文件

> ID：13073008
> 
> 赞同：0
> 
> 时间：2012-10-25T16:23:57.130
> 
> 标签：visual-studio-2010, clearcase

我目前使用 Visual Studios 外部工具界面使用以下 cleartool 命令：

命令：`\installationpath\cleartool.exe`
参数：`annotate -nheader $(ItemPath)`
初始目录：`$(ItemDir)`

我确实使用输出窗口。这将使该命令打印出它生成的 .ann 文件的位置。我想知道 Visual Studio 是否有办法自动打开生成的文件？

在这种情况下，复制位置并打开文件并不是什么大问题。我只是一直在寻找让事情变得更容易的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:53:51.487

仅使用*一个外部工具**，*您将无法执行`cleartool`和打开文件（从命令生成）。*`cleartool`*

 *![外部工具](../Images/5bff57b32726a78a1f0f7d1dfad8c96a.png)

[您可以按照此处](http://blogs.thesitedoctor.co.uk/tim/2009/03/02/Visual+Studio+Tip+Of+The+Day+Open+Filesfolders+In+Windows+Explorer.aspx)的说明从 Visual Studio 外部工具打开文件，但这不会执行`cleartool`。

所以我建议执行一个脚本（`.bat`, `.cmd`, `.vbs`），以便：

*   `cleartool`执行你想要的命令
*   打开生成的文件。

您不仅可以将 $(ItemPath) 传递给该脚本，还可以根据生成的位置传递 、`$(ItemDir)`、 或`$(ProjectDir)`、 或`$(SolutionDir)`、 或`$(TargetDir)`。*

# ruby-on-rails - 获取您的操作代码并在我的时间线中查看

> ID：13073011
> 
> 赞同：1
> 
> 时间：2012-10-25T16:24:03.940
> 
> 标签：ruby-on-rails, facebook, facebook-opengraph

我正在构建一个 Open Graph 操作。在我在命令行中使用 curl 以在我的时间轴中发布之前，现在当我使用此命令时，我的时间轴中没有任何内容。图中的响应是正确的。我可以在我的图表上看到我的所有这些操作，但我的时间轴上仍然没有任何内容 https://graph.facebook.com/me/[namespace]:[action]?access_token=[...]

我不明白发生了什么

我在后端使用 fb_graph gem

```
 def self.action(objet, user, url)
    me = current_user.facebook
    Thread.new do
     sleep(4)
     action = me.og_action!(
        FACEBOOK_NAMESPACE+":action",
        :objet => url
        )
    end
  end 
```

这一直有效

任何想法 ？

谢谢马克西姆

# python - 变色龙模板全局变量

> ID：13073015
> 
> 赞同：2
> 
> 时间：2012-10-25T16:24:09.003
> 
> 标签：python, pyramid, chameleon, template-metal

我正在使用 Pyramid 1.3 和他们用 Chameleon 编写的模板。由于不同的页面或模板可能需要每页更改全局样式表，我希望能够重新定义页面上的 body 标记的类（当然，我更愿意从模板中执行此操作）。

```
<body class="${global_variable_or_something_else}"></body> 
```

我试过的：

*   使用子宏中的 tal:define="global body_class"。不工作。
*   我尝试使用`<metal:div metal:define-slot="vars">...variable definition...</metal:div>`and`<metal:div metal:fill-slot="vars">...redefinition...</metal:div>`并重新定义子宏中的变量。它确实有效，但是如果我在父模板中有多个变量定义并且我只需要重新定义一个怎么办？

有没有用 METAL 做得更好的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:26:29.850

页面模板中的全局变量，就像 Python 中的全局变量一样，可以被覆盖。因此，您改为执行以下操作：

```
<rootelement metal:define-macro="macroname"
             tal:define="global var1 value1; global var2 value2">
    <metal:overrides define-slot="overrides"></metal:overrides>
    <!-- some template code using var1 and var2 -->
</rootelement> 
```

然后使用 a`metal:fill-slot`提供覆盖；您可以根据需要覆盖尽可能少或尽可能多的变量：

```
<rootelement metal:use-macro="macroname">
    <metal:overrides fill-slot="overrides"><tal:defines define="global var1 differentvalue" /></metal:overrides>
</rootelement> 
```

# asp.net - 如何防止行在网格中垂直拉伸？

> ID：13073018
> 
> 赞同：0
> 
> 时间：2012-10-25T16:24:15.330
> 
> 标签：asp.net, grid, height, row

我有以下代码。当超过 1 行时，它会显示正确高度的行。但是，一旦只剩下一行，它的高度就会延伸到整个网格。谁能告诉我如何获得单行的正常高度？非常感谢。

编码：

```
<ScrollViewer Height="100">
<Grid Name="dataSetGrid2">
<Grid.RowDefinitions></Grid.RowDefinitions>
<Grid.ColumnDefinitions>
<ColumnDefinition Width="40"/>
</Grid.ColumnDefinitions>
</Grid>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:38:44.900

这可以帮助您弄清楚为什么会这样。 [克里斯蒂安·莫泽的博客](http://wpftutorial.net/GridLayout.html)

对您最有用的部分是“定义行和列”部分。

> **Fixed** 固定大小的逻辑单元（1/96 英寸）
> 
> **自动** 占用包含控件所需的尽可能多的空间
> 
> **星号 ( `*`)** 占用尽可能多的空间（在填充所有自动和固定大小的列之后），按比例分配到所有星号大小的列。所以 3*/5* 和 30*/50* 的意思是一样的。请记住，如果网格大小是根据其内容计算的，则星号大小不起作用。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="28" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="200" />
    </Grid.ColumnDefinitions>
</Grid> 
```

# jquery - 下拉子菜单仅在第二次翻转后消失，但不是第一次通过

> ID：13073020
> 
> 赞同：1
> 
> 时间：2012-10-25T16:24:20.730
> 
> 标签：jquery, drop-down-menu, html-lists

我正在尝试通过 jQuery 将多级下拉菜单合并到我的网站中，其子菜单以交替悬停状态淡入和淡出。第二次鼠标悬停后一切正常，但由于某种原因，第一次悬停菜单时该功能似乎没有触发。有人遇到过这样的问题吗？我看到了一个没有回复或代码示例的类似问题，所以我想我会发布我的代码。

这是我的 jQuery 代码：

```
$(function(){   
            $('li').has('ul').hover(
                function(){
                    $(this).children('ul').stop().animate(
                        {
                            opacity:1
                        }
                    );//end animate
                },

                function(){
                    $(this).children('ul').stop().animate(
                        {
                            opacity:0
                        }
                    );//end animate
                });

                $(this).prepend('<div id="trigger"></div>');    
        }); 
```

我的 CSS 中有一个选择器（称为#trigger），它的不透明度设置为 0，它充当触发函数的号召性用语。在此先感谢，查询字符串。

# java - 在 Java 中从字体对象创建形状对象

> ID：13073021
> 
> 赞同：3
> 
> 时间：2012-10-25T16:24:23.160
> 
> 标签：java, swing, graphics, fonts, awt

我有一个字体对象和一个字符串。我想返回一个表示字符串的形状对象。我有一大堆其他类将显示字符串并处理它。

当我*没有*graphics/graphics2d 对象时，我无法弄清楚如何执行此操作。有什么帮助吗？我已经搜索了网络，但无法找到有用的链接。

```
public class SpecializationOfTester extends ParentTester {

    private String      str;
    private Font        font;

    public SpecializationOfTester(String str, Font font) {
        this.font = font;
        this.str = str;
    }

    public Shape getShape()
    {
        Shape           s;
        //
        //
        return s;
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T16:34:29.590

你可以使用，正如[这里](https://stackoverflow.com/a/7466129/230513)[`GlyphVector#getOutline()`](http://docs.oracle.com/javase/7/docs/api/java/awt/font/GlyphVector.html#getOutline%28%29)提到的。您可以在 中创建图形上下文，如在[*Java SE 平台中使用无头模式中所述*](http://www.oracle.com/technetwork/articles/javase/headless-136834.html)。`BufferedImage`[](http://www.oracle.com/technetwork/articles/javase/headless-136834.html)

 *另请参阅这些吸引人的示例：

*   [`PictureText`](https://stackoverflow.com/a/6296381/230513)，由于[安德鲁汤普森](https://stackoverflow.com/users/418556/andrew-thompson)。

*   [`Test`](https://stackoverflow.com/a/2466283/230513)，由于[Savvas Dalkitsis](https://stackoverflow.com/users/56242/savvas-dalkitsis)。*

# svn - SSIS + AnkhSVN 策略

> ID：13073022
> 
> 赞同：1
> 
> 时间：2012-10-25T16:24:34.690
> 
> 标签：svn, ssis

我已经阅读了关于堆栈溢出的其他几个问题/答案，但如果可能的话，希望得到一些澄清。

情况 - 我们有大约 20 个 dtsx 文件并希望开始使用 SVN 来跟踪对这些包的更改 - 我们知道使用 SVN 可能不允许我们合并包内的更改，因为包含 dtsx 文件的复杂 XML 是可以接受的因为 SVN 仍然会在更改跟踪方面提供一些好处。目前我们的开发/部署策略是每个开发者根据需要从目标服务器加载dtsx文件，本地开发，然后将文件复制回目标服务器。每个开发人员使用他/她自己的策略来决定是否拥有一个包含所有包的大型项目，或者每次 dtsx 需要修改时创建一个新项目等。

我正在寻找有关在此环境中实现 SVN 的有效方法的建议 - VS 项目文件（例如）是否应该包含在 SVN 控件中？如果没有，开发人员如何“从 Subversion 打开项目”？一切都可以在 VS 中完成，还是我们需要进入 Windows 资源管理器，在文件夹级别更新，然后从 VS 中添加现有包 - 如果我们这样做，我们仍然能够从 VS 提交吗？

很抱歉这些基本问题，以这种方式使用 SVN 的新手，并希望有一些具体的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:20:13.167

由于您的问题标题中有“AnkhSVN”，我假设您正在使用它。

如果是这样，那么是的，我强烈建议将您的 VS 项目文件包含在 SubVersion 中，并将它们在 BIDS / SSDT 中绑定到 SVN。这样您就可以“从源代码控制打开项目”而不是本地，还可以在项目级别进行递归签入。

我还强烈建议您通过创建“每个应用程序一个项目”规则来标准化项目创建。恕我直言，让人们只是牛仔他们自己的一次性项目进行包修改是愚蠢和无效率的。

我认为对我们来说最大的挑战是在像 SSIS 这样的“无差异”环境中将包添加到项目中。每次在 SSIS 包中打开数据流时，文件都会被签出和修改，项目文件也是如此。人们通常只是盲目地检查这些“不变”的变化。所以你会得到这样的场景：

1.  Alice 将一个包添加到项目中并将其签入。
2.  同时，Bob 打开一个包的数据流任务只是为了检查它的源查询，它检查出项目文件。
3.  他签入他的零钱，这使他与 Alice 的签入发生冲突，他只是选择使用本地。
4.  现在爱丽丝的包裹在无人区，签入但不在项目中。注意那个部署...

无论如何，您可以通过一些指导和讨论来减轻这种情况。我还鼓励您拥有某种事实上的 SVN“看门人”，因为它会变得混乱，并且无论如何您都需要定期清理源代码控制。

只有 20 个包，听起来只是间歇性的包修改，你可能不需要分支，但我至少会阅读它。我认为分支是一个团队一旦开始频繁地踩到对方的脚趾就会成长的东西——一种判断何时实施它的判断，尽管我鼓励你的开发人员在他们觉得舒服的情况下使用它。

# jquery - jQuery 文件上传和 Internet Explorer：“脚本”请求为“html”

> ID：13073024
> 
> 赞同：0
> 
> 时间：2012-10-25T16:24:36.373
> 
> 标签：jquery, ruby-on-rails, ajax, file-upload

我正在使用[jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload)和 Ruby on Rails 3

```
$(".jquery-upload").fileupload({
    url: "/photos",
    type: "POST",
    dataType: "script" }); 
```

在 Chrome 和其他浏览器中按预期工作，但 IE 将请求作为 HTML 而不是 JS 发送：

```
Started POST "/photos"
Processing by PhotosController#create as HTML 
```

将“url”更改为“/photos.js”以强制 JS 格式导致 IE 提示下载返回的 JS 而不是对其进行处理。

如何使 IE 请求“脚本”并将其作为 JS 处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:29:15.890

您的问题答案似乎在您的插件文档中进行了解释：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Setup](https://github.com/blueimp/jQuery-File-Upload/wiki/Setup)

看`Content-Type Negotiation`段落。

# windows - Azure 报告

> ID：13073026
> 
> 赞同：1
> 
> 时间：2012-10-25T16:24:44.983
> 
> 标签：windows, azure, reporting

我有主 SSRS 报告，其中很少有向下钻取报告调用带有参数的相同主报告。它在常规 SSRS 中运行良好。当我在 Azure 上上传相同的报告时，主报告可以正常工作，没有问题。当我单击向下钻取链接时，它不断给出错误提示`The Item "reportname" cannot be found. Tracing id is : (rsItemNotFound)`。我需要在 SSRS 中进行哪些更改才能使深入报告在 Azure 环境中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:08:42.250

不需要在常规 SSRS 和 Azure 报告之间进行任何更改。

我曾经有一个类似的问题。就我而言，这是因为我曾一度重命名报告，但向下钻取操作仍在使用旧的报告名称。也许你有一个类似的问题？

[此外，请在此处](http://msdn.microsoft.com/en-us/library/windowsazure/gg430132.aspx)查看 Azure 报告限制（以防您的报告碰巧使用了不受支持的功能，例如 RDCE）

# django - 访问有关用户的其他信息

> ID：13073031
> 
> 赞同：0
> 
> 时间：2012-10-25T16:24:57.117
> 
> 标签：django

我读过[这篇](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)文章，我有一个问题。如何访问“其他字段”？

**楷模：**

```
class UsersProfile(models.Model):
    def __unicode__(self):
        return self.user.last_name
    user = models.OneToOneField(User)
    car_num = models.IntegerField('car ID')
    captain = models.BooleanField() 
```

**意见：**

```
@login_required
def profile(request):
    return render(request, 'profile.html') 
```

因此，在身份验证后，配置文件中仅适用于**user.last_login** + 等，但不适**用于 user.car_num**或**user.captain**。我读到了**get_profile()**，但是我需要在哪里写？

```
profile = request.user.get_profile() 
```

如果它在视图中，如何返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:30:12.337

`related_name`您可以为您的定义 a `OneToOneField`，如下所示：

```
 user = models.OneToOneField(User, related_name='profile') 
```

然后使用访问相应的字段

```
request.user.profile.car_num 
```

# excel - 将多列转换为一大列 (Excel 2010)

> ID：13073033
> 
> 赞同：1
> 
> 时间：2012-10-25T16:25:11.650
> 
> 标签：excel, vba

我想将 15,096 列文本（每个单元格一个单词）转换为一个大列，包括原始列中的每个单元格。我的原始列的大小各不相同（即一列可能有 4 个单元格/行，而另一列可能有 100 个单元格/行）。

我没有使用 VBA 的经验，但是已经录制了一个宏来手动执行此操作，并且需要很长时间。请帮忙做一些我可以设置的东西，然后去喝咖啡，然后回来看看工作完成。（注意：有些列有 1 个字/行……这使我的宏每次遇到其中之一时都会抛出错误）。

谢谢！希望有人可以提供帮助。-麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:34:15.767

如果您希望所有单元格在一列中对齐，则可以使用以下代码：

```
Sub ToArrayAndBack()
Dim arr As Variant, lLoop1 As Long, lLoop2 As Long
Dim arr2 As Variant, lIndex As Long

'turn off updates to speed up code execution
With Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
    .DisplayAlerts = False
End With

ReDim arr2(ActiveSheet.UsedRange.Cells.Count - ActiveSheet.UsedRange.SpecialCells(xlCellTypeBlanks).Count)

arr = ActiveSheet.UsedRange.Value

For lLoop1 = LBound(arr, 1) To UBound(arr, 1)
    For lLoop2 = LBound(arr, 2) To UBound(arr, 2)
        If Len(Trim(arr(lLoop1, lLoop2))) > 0 Then
            arr2(lIndex) = arr(lLoop1, lLoop2)
            lIndex = lIndex + 1
        End If
    Next
Next

Sheets.Add
Range("A1").Resize(, lIndex + 1).Value = arr2

Range("A1").Resize(, lIndex + 1).Copy
Range("A2").Resize(lIndex + 1).PasteSpecial Transpose:=True
Rows(1).Delete

With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
    .DisplayAlerts = True
End With

End Sub 
```

如果要连接每一行，请改用它。它会将您的单元格合并到一个新工作表中。

```
Sub Consolidate()
Dim shtDest As Worksheet, shtOrg As Worksheet
Dim lLastRow As Long, lLastCol As Long, lLoop As Long
Dim sFormula  As String

'turn off updates to speed up code execution
With Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
    .DisplayAlerts = False
End With

Set shtOrg = ActiveSheet
lLastCol = shtOrg.UsedRange.Columns.Count
lLastRow = shtOrg.Cells(Rows.Count, 1).End(xlUp).Row

Set shtDest = Sheets.Add

For lLoop = 1 To lLastCol
    sFormula = sFormula & "'" & shtOrg.Name & "'!RC" & lLoop & ","
Next lLoop

sFormula = Left(sFormula, Len(sFormula) - 1)

shtDest.Range("A1:A" & lLastRow).FormulaR1C1 = "=concatenate(" & sFormula & ")"
shtDest.Range("A1:A" & lLastRow).Value = shtDest.Range("A1:A" & lLastRow).Value

With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
    .DisplayAlerts = True
End With

End Sub 
```

或者如果你想让你的单元格用空格分隔

```
Sub Consolidate()
Dim shtDest As Worksheet, shtOrg As Worksheet
Dim lLastRow As Long, lLastCol As Long, lLoop As Long
Dim sFormula  As String

Const sSeparator As String = " "

'turn off updates to speed up code execution
With Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
    .DisplayAlerts = False
End With

Set shtOrg = ActiveSheet
lLastCol = shtOrg.UsedRange.Columns.Count
lLastRow = shtOrg.Cells(Rows.Count, 1).End(xlUp).Row

Set shtDest = Sheets.Add

For lLoop = 1 To lLastCol
    sFormula = sFormula & "'" & shtOrg.Name & "'!RC" & lLoop & "&""" & sSeparator & ""","
Next lLoop

sFormula = Left(sFormula, Len(sFormula) - 1)

shtDest.Range("A1:A" & lLastRow).FormulaR1C1 = "=trim(concatenate(" & sFormula & "))"
shtDest.Range("A1:A" & lLastRow).Value = shtDest.Range("A1:A" & lLastRow).Value

With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
    .DisplayAlerts = True
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:25:39.013

这是另一种方式。这将连接行中的所有字符串并将生成的字符串放在行的第一个单元格中。这意味着该单元格中的任何内容都将被覆盖。 *这*意味着您应该在工作簿的副本上尝试此操作，因为如果它没有按照您的意愿进行操作，您将丢失数据。

```
Sub MakeOneColumn()

    Dim rRow As Range
    Dim vaRow As Variant
    Dim i As Long
    Dim aJoin() As Variant

    'Loop through each row in the sheet
    For Each rRow In Sheet1.UsedRange.Rows

        'put the rows values in an array
        vaRow = rRow.Value

        'Convert the array from 2-d to 1-d because the Join function needs 1-d
        ReDim aJoin(LBound(vaRow, 2) To UBound(vaRow, 2))
        For i = LBound(vaRow, 2) To UBound(vaRow, 2)
            aJoin(i) = vaRow(1, i)
        Next i

        'Join the array into one string, replace double spaces, and write to the
        'first cell in the row (replacing what was there - so be careful)
        rRow.Cells(1).Value = Replace(Join(aJoin, Space(1)), Space(2), Space(1))
    Next rRow

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:27:38.753

```
Sub MultiColsToA() 
Dim rCell As Range 
Dim lRows As Long 
Dim lCols As Long 
Dim lCol As Long 
Dim ws As Worksheet 
Dim wsNew As Worksheet 

lCols = Columns.Count 
lRows = Rows.Count 
Set wsNew = Sheets.Add() 

For Each ws In Worksheets 
    With ws 
        For Each rCell In .Range("B1", .Cells(1, lCols).End(xlToLeft)) 
            .Range(rCell, .Cells(lRows, rCell.Column).End(xlUp)).Cut _ 
            wsNew.Cells(lRows, 1).End(xlUp)(2, 1) 
        Next rCell 
    End With 
Next ws 

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T16:31:46.217

如果您进入录制的宏并在顶部插入此行：

```
Application.ScreenUpdating = False 
```

然后在代码底部将 screenUpdating 设置回 true。这应该会显着加快代码速度，因为它可以防止宏在每次更改后直观地向您显示更改。这避免了许多对图形的调用，这会减慢它的速度。

# ravendb - 我应该如何过滤 RavenDB Lucene 搜索的结果？

> ID：13073037
> 
> 赞同：2
> 
> 时间：2012-10-25T16:25:23.427
> 
> 标签：ravendb

假设我有这样的`User`课：

```
public class User
{
  public bool IsActive {get;set;}
  public string[] Tags{get;set;}
  public string Description {get;set;}
} 
```

我想使用 RavenDB 搜索符合以下条件的用户集：

*   `IsActive`=*真*
*   `Tags`包含“*你好*”和“*世界*”
*   `Description`有以下短语“*失败*”

我研究了 Lucene 查询语法，我什至有一些东西可以工作，但是用大量组合字符串构建来创建基于文本的 lucene 查询字符串，这一切都让人感觉非常笨拙。我犹豫把我的代码放在这里，因为它很臭。

我想我想做的是`Search`为 Description 和 Tags 提交一个 Lucene，然后使用`Where`IsActive 字段的子句对其进行过滤，可能就像这样[Filter RavenDB Search Results](https://stackoverflow.com/q/12011519/776476)。但我迷路了。

我正在使用最新的官方版本 (960)，因此我还不能使用在此之后出现的所有时髦的东西。例如，[此解决方案](http://www.philliphaydon.com/2012/01/ravendb-searching-across-multiple-properties/)已被禁止，因为 960 似乎不支持`.As<T>()`扩展。

**问题**

如何构建所需的索引和查询来执行结合以下的搜索：

*   单个约束，例如`IsActive`
*   集合约束，例如`Tags`
*   自由文本约束，例如`Description`

返回一个强类型的`User`对象列表？

感谢您提供任何代码示例或指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:46:07.290

你像这样查询它：

```
var results = (from u in Session.Query<User>("YourUserIndex")
              where u.IsActive && u.Tags.Any(x=>x == "hello") && x.Tags.Any(x=>x=="world")
              select u)
              .Search(x=>x.Description, "abject failure")
              .ToList(); 
```

哪里`YourUserIndex`看起来像这样：

```
from u in docs.Users
select new { u.IsActive, u.Tags, u.Description }; 
```

您需要将描述字段标记为已分析。

# php - 解析错误：语法错误，意外的 T_ELSE - 为什么？

> ID：13073038
> 
> 赞同：-1
> 
> 时间：2012-10-25T16:25:27.290
> 
> 标签：php, parse-error

所以我的 index.php 上有以下代码：

```
<?php 
define('WP_USE_THEMES', false); // Don't use WP themes
require('../wp-load.php'); // Allows the use of WP functions
?>

<?php // Check if the user is logged in. If not, show the login form 
global $user_ID, $user_identity; get_currentuserinfo(); if (!$user_ID) { ?>

    <script type="text/javascript">window.location.href='login.php';</script>

    <?php } else { // If the user is logged in

        include('header.php'); ?>

        <div id="content">

            <!-- Full Width Start -->
            <div class="full-width">        
                <span class="full-width-red-left"></span>
                <div class="full-width-red-wrapper">Department Chooser</div>
                <span class="full-width-red-right"></span>           
                <div class="full-width-content">
                    <div id="panel-icons">
                        <?php // Display the menu for each department the user is a member of.
                        if(is_eventsStaff()){ eventsPanelIcon(); }
                        if(is_helpDeskStaff()){ helpPanelIcon(); }
                        if(is_hxlStaff()){ livePanelIcon(); }
                        if(is_newsStaff()){ newsPanelIcon(); }
                        if(is_raresStaff()){ raresPanelIcon(); }
                        if(is_panelAdmin()){ adminPanelIcon();} ?>       
                    </div>
                    <div id="uploader-icon-wrapper">
                        <div class="panel-horizontal-split"></div>
                        <a href="#" id="upload-panel-icon"></a>
                    </div>
                </div>           
                <div class="full-width-footer"></div>
            </div>
            <!-- Full Width End -->
        </div>

    </div>  
<?php } else { echo "Test"; } }?> 
```

然后是 header.php：

```
<link rel='stylesheet' href='CSS/build.css' type='text/css'/>
<title>Habbox Staff Panel</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<?php include_once('functions.php'); // Include staff panel functions ?>

<!-- Preload Image Hovers Start -->
<img src="images/topbar_home_hover.png" class="preload" />
<img src="images/topbar_admin_hover.png" class="preload" />
<img src="images/topbar_events_hover.png" class="preload" />
<!-- Preload Image Hovers End -->

<?php if(has_Roles()) { ?>
<!-- TopBar Start -->
<div id="topbar-wrapper">
<div id="topbar-inner-wrapper">
    <span class="topbar-radio-text">Welcome <span class="bold red"><?php echo $user_login; ?></span></span> 
    <div class="topbar-divider"></div>
    <a href="<?php echo $siteURL;?>/index.php" class="topbar-home"></a>

    <?php 

    if (isset($_COOKIE['timezone'])) { date_default_timezone_set($_COOKIE['timezone']); } else { date_default_timezone_set('Europe/London'); }

    if(is_eventsStaff()){
        echo '<a href="'.$siteURL.'/Events/index.php" class="topbar-events"></a>';
    }

    // Check if the user is an admin
    if(is_panelAdmin()){
        echo '<a href="'.$siteURL.'/Admin/users.php" class="topbar-admin"></a>';
    }

    ?>
    <div id="topbar-logout">
        <form>
            <div class="darkbutton"><span class="darkbutton-left"></span><a href="<?php echo wp_logout_url( home_url() ); ?>" title="Logout">Log Out</a><span class="darkbutton-right"></span>
            </div>
            <input type="hidden" name="redirect_to" value="/Staff">
        </form>
    </div>
</div>
</div>
<!-- TopBar End -->

<div id="page-wrapper"> 
```

但它给了我以下错误：

解析错误：语法错误，第 43 行 index.php 中的意外 T_ELSE

但我不明白为什么。如果我将 header.php 的内容复制到 index.php 中，它似乎工作正常，但当我使用包含时却不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:28:54.287

通读代码`include`并不完全等同于复制和粘贴代码。所有涉及的文件本身都必须是有效的 PHP 代码：您不能`if()`在包含的文件中打开并在主文件中关闭它。PHP 将分别解析每个文件并找到以下内容：

```
if(...){
}else{
}else{
} 
```

...这显然是非法的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:29:18.157

如果出现以下情况，您还有另外两个：

```
if (!$user_ID) {

   <?php } else { // If the user is logged in

<?php } else { echo "Test"; } }?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T16:28:13.450

在`header.php`您没有关闭此 IF 时：

```
<?php if(has_Roles()) { ?> 
```

您可以在这部分代码中执行此操作：

```
if(is_panelAdmin()){
        echo '<a href="'.$siteURL.'/Admin/users.php" class="topbar-admin"></a>';
    }

 } // Closing has_roles() IF

    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:01:33.117

似乎我包含错误，每个文件本身必须是正确的语法。我只是将 if 和 else 语句放在 header.php 包含文件周围的索引文件中。一切似乎都有效:)

# knockout.js - 淘汰模型到咖啡脚本类语法转换

> ID：13073043
> 
> 赞同：1
> 
> 时间：2012-10-25T16:25:46.490
> 
> 标签：knockout.js, coffeescript, knockout-2.0

所以我试图将淘汰模型转换为咖啡脚本类，直到现在才使用咖啡，在如何通过咖啡脚本（和我的班级）调用 property.subscribe 淘汰函数的语法方面遇到了问题。目前代码看起来像（严重愚蠢以理解）

```
var Autocomplete = function(){
  var self = this;
  self.displayResults = ko.observable(false);
  self.results = ko.observableArray([]);
  self.hasResults = ko.observable(false);

    self.hasResults.subscribe(function(newValue){
        if(newValue == true) {
            self.displayResults(true);
        } else {
            self.displayResults(false);
        }
    });

} 
```

但基本上我想做的是：

```
class ClientAutoComplete
  constructor: ->
    @hasResults = ko.observable(false)  
    @results = ko.observableArray([])  
    @displayResults = ko.observable(false)

  hasResults.subscribe: (newValue) ->
    @displayResults(newValue) 
```

我不知道如何正确调用 property.subscribe 方法，我尝试了几种不同的语法但无济于事。任何人都可以对此有所了解吗？非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:23:36.323

相当于您的 JavaScript 将是这样的：

```
class ClientAutoComplete
  constructor: ->
    @displayResults = ko.observable(false)
    @results = ko.observableArray([])  
    @hasResults = ko.observable(false)  

    @hasResults.subscribe (newValue) =>
      @displayResults(newValue) 
```

您必须添加`@`to`hasResults`以使其成为实例变量引用，并且您需要缩进`@hasResults.subscribe`另一个级别才能将其放入构造函数中。您也不想要冒号`@hasResults.subscribe`，那是函数调用，而不是属性定义；你也可以这样写：

```
@hasResults.subscribe( (newValue) =>
  @displayResults(newValue)
) 
```

如果需要提醒您这是一个函数调用。如果匿名函数大于单行函数，我倾向于包含括号。

胖[箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)将匿名函数绑定到当前函数`this`：

> 粗箭头`=>`既可用于定义函数，也可用于将其绑定到 的当前值`this`，就在现场。这在使用基于回调的库（如 Prototype 或 jQuery）来创建传递给 的迭代器函数`each`或与 一起使用的事件处理函数时很有帮助`bind`。用粗箭头创建的函数能够访问`this`定义它们的位置的属性。

胖箭头是`var self = this;`JavaScript 惯用语的常用替代品。

# linux - Gloox：“onConnect”不称为 Linux Mint 13

> ID：13073044
> 
> 赞同：0
> 
> 时间：2012-10-25T16:25:48.200
> 
> 标签：linux, xmpp, firewall, linux-mint, gloox

这个问题有点棘手，我真的不认为我会找到答案，但无论如何我都会尝试。

我正在编写一个使用 gloox 进行 XMPP 传输的 C++ 程序。我的问题（仅在我的计算机上发生）（Linux Mint 13 MATE 32bits）是永远不会调用“onConnect()”处理程序。当我们使用 jabber.org 服务器时这不是问题（实际上，我什至不知道它没有被调用......）但是当我们安装 LAN ejabberd 服务器时问题开始出现。

使用 jabber.org 服务器，即使没有调用“onConnect”，应用程序也能够正常发送/接收消息。但不是在 ejabberd 上。起初我认为这是证书或其他东西的问题，但后来我们尝试了我们的其他 Linux 机器（Ubuntu 12.04 x64、Arch x64 和 Debian 6.0 32（服务器在这台机器上运行）），它在任何机器上都可以正常工作那些电脑。另外，使用 Python-Twisted 的姊妹应用程序可以在有问题的计算机上正常连接。

每次都会调用验证函数 onTLSConnect() 并返回 true。在有问题的计算机上，当使用我们的 ejabberd 服务器时，连接未建立，并且套接字在大约 25 秒后自行关闭（并且调用了 onDisconnect()...）

所以，我的问题是：是否存在阻止 Gloox 终止连接的互联网设置（如防火墙？）。或者有没有人遇到过类似的问题？谢谢！

编辑：我在我的笔记本电脑上制作了一个 Mint 13 MATE 32bits 的 VM，并且出现了同样的问题。我现在可以得出结论，这是薄荷中某个地方的错误。

EDIT2：在 Mint 64 位上运行良好....我在 Mint 的错误页面上打开了一张票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T02:57:12.617

我上周遇到了这个问题，这似乎是一个 gloox 的错误。它发生在 32 位 linux 上。看到这个[https://bugs.launchpad.net/linuxmint/+bug/1071416](https://bugs.launchpad.net/linuxmint/+bug/1071416)

事实上，您在服务器上“在线”，但您的“在线”状态是未知的。您可以简单地向服务器发送“聊天”状态以继续您的工作。

像这样

```
#ifdef GLOOX_ON_CONNECT_BUG_PATCH
    Poco::Thread::sleep(3000);//休息3秒，然后连接成功,哎，该死的bug
    this->is_connected = true;
    client->setPresence(Presence::Chat, 0);
#endif 
```

# python - matplotlib savefig() 大小控制

> ID：13073045
> 
> 赞同：38
> 
> 时间：2012-10-25T16:25:48.927
> 
> 标签：python, matplotlib, pandas

我编写了一个函数，该函数采用从 Pandas 生成的数据框并生成热图：

```
def drawHeatMap(df, city, province, collector, classtype, color, titleposy):
    try:
        thePlot = pl.matshow(df.values, cmap='PuBuGn')
        pl.colorbar(thePlot, orientation='vertical')
        aTitle = (classtype + ' Composition Changes Over Time in ' + city + 
                ', ' + province + '\n' + collector + ' collector. ' + 'rs100')
        pl.title(aTitle, x=0.5, y=titleposy, style='oblique', weight='bold')
        pl.xlabel('Collection Time')
        pl.xticks(range(len(df.columns)), df.columns, rotation=90)
        pl.yticks(range(len(df.index)), df.index)
        fileName = (classtype + '-' + city + '-' 
                + province + '-' + collector + '.png')
        pl.savefig(fileName)
    except ZeroDivisionError:
        errorMessage = ('No Data Avaiable for ' + city + ', ' + province + 
                ' with ' + collector + ' collector.')
        print errorMessage 
```

我遇到的问题是，`savefig()`将保存带有轴和图形修剪的图形。我必须自己使用`show()`、最大化图形并使用 GUI 按钮手动保存图形。

如何修复我的功能以便`savefig()`正确保存图表？之前我试着放这样一条线`pl.savefig()`来控制我的身材：

```
 pl.figure(figsize=....) 
```

但我最终产生了一些空图。编写 matplotlib 函数的正确方法是什么，让我可以完全控制保存图形？

**更新为问题图示例：** ![在此处输入图像描述](../Images/ac1f7b912ba646552b50255c4e43a783.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-06-25T04:02:17.233

我 `plt.tight_layout()`之前添加了`savefig()`，它解决了我遇到的修剪问题。也许它也会对你有所帮助。

编辑：我还在开始时设置了图形大小`rcParams['figure.figsize'] = 40, 12`（您可以设置自己的宽度和高度）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-03T07:25:44.697

从[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.savefig)中，您可以添加一个`dpi`参数来设置分辨率。

```
savefig('foo.png', dpi=199) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-25T17:05:20.803

**简短：**
您只需要在调用（以及所有其他内容）`pl.figure(figsize=...)` *之前先*调用`pl.colorbar`

**说明：**
`pl.figure`创建一个*新*图形（具有给定大小），所有`pl.*`方法都将在其上执行以下操作。
因此`pl.savefig`，只需保存最后创建的图形，如果您在前一行中创建了一个新图形，则该图形为空。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-26T10:31:47.500

在调用`pl.savefig(fileName)` do之前`plt.tight_layout()`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T17:04:23.763

该命令`pl.figure()`创建一个新的 matplotlib 图。图形大小在实例化时设置。您确实想设置图形大小，但您已经有了图形。所以你在正确的轨道上，但试试这个：

```
def drawHeatMap(df, city, province, collector, classtype, color, titleposy):
    try:
        fig = pl.figure(figsize=(....))
        ax = fig.add_subplot(111)
        ax.matshow(df.values, cmap='PuBuGn')
        pl.colorbar()
        aTitle = classtype + ' Composition Changes Over Time in ' + city + ', ' + province + '\n' + collector + ' collector. ' + 'rs100'
        ax.set_title(aTitle, x=0.5, y=titleposy, style='oblique', weight='bold')
        ax.set_xlabel('Collection Time')
        ax.set_xticks(range(len(df.columns)), df.columns, rotation=90)
        ax.set_yticks(range(len(df.index)), df.index)
        fileName = classtype + '-' + city + '-' + province + '-' + collector + '.png'
        fig.savefig(fileName)
    except ZeroDivisionError:
        errorMessage = 'No Data Available for ' + city + ', ' + province + ' with ' + collector + ' collector.'
        print errorMessage 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-05T19:03:31.217

您可以使用 dpi 参数在 savefig 方法中设置分辨率（以每英寸点数为单位）。所以你可以控制图形大小。例如，如果您使用以下代码：

```
import pandas as pd
import matplotlib.pyplot as plt

df = pd.DataFrame({ 
    'ser1' : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] , 
    'ser2' : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
    })

df.plot()
plt.savefig("100.png" , dpi = 100)
plt.savefig("300.png" , dpi = 300) 
```

100.png 将是：

[100.png](https://i.stack.imgur.com/B544c.png)

300.png 将是：

[300.png](https://i.stack.imgur.com/NZCRr.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-07T19:59:26.387

保存所需尺寸的图形

```
figure = plt.gcf()
figure.set_size_inches(width/100, height/100)
plt.axis('off')
plt.plot(x, y, color='black', linewidth=1)
plt.gca().set_position([0, 0, 1, 1])  
plt.savefig("image.png", dpi=100) 
```

# objective-c - 从生成的代码生成标题文档

> ID：13073047
> 
> 赞同：1
> 
> 时间：2012-10-25T16:25:53.200
> 
> 标签：objective-c, ios, xcode

我是iOS开发的初学者。我们正在尝试使用objective c在xcode中开发一个应用程序。我们已经导入了代码和库并成功构建了它。现在的问题是从生成的代码生成标题文档。为此我们导航到使用终端生成的代码文件夹并给出以下命令：

> headerdoc2html –o GeneratedDocDir GeneratedCodeDir
> 
> collectheaderdoc GeneratedDocDir

但它只生成了 3 个 zerobytes 文件。

谁能帮我们解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:42:11.733

在不知道您的代码/配置的情况下，这只是猜测，但您应该检查

*   HeaderDoc 评论/标签的存在
*   你的配置在`/$HOME/Library/Preferences/com.apple.headerDoc2HTML.config`

# powershell - 主机名未出现在文件中

> ID：13073050
> 
> 赞同：0
> 
> 时间：2012-10-25T16:25:57.623
> 
> 标签：powershell, powershell-2.0

如何将服务器的主机名放入 export-csv 文件名？

我已经尝试了以下方法并创建了 csv 但名称为空？

如果我尝试不使用主机名，则会填写文件名……但显然没有主机名。

```
$Hostname = gc env:computername
$Filename = "{0:yyyyMMdd-HHmm}" -f (Get-Date)

$files | Export-CSV $export\$Hostname_$Filename_filelist.csv -NoTypeInfo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:31:39.453

当您将变量插入字符串时，它可以帮助更明确一点。试试这个：

```
$files | Export-CSV "$($export)\$($Hostname)_$($Filename)_filelist.csv" -NoTypeInfo 
```

它应该更可预测地工作，并且作为一个附带好处，当您稍后返回查看代码时，变量会更容易地出现在您的眼前！

即使您并不严格需要括号，我发现有时它有助于确保您和 Powershell 解释器对您正在尝试做的事情有相同的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:23:38.643

```
$files | Export-Csv ("${env:COMPUTERNAME}_{0:yyyyMMdd-HHmm}.csv" -f (Get-Date)) -NoType 
```

# variables - 变量如何存储在 RAM 内存中？

> ID：13073051
> 
> 赞同：1
> 
> 时间：2012-10-25T16:26:11.650
> 
> 标签：variables

我刚刚在 Minecraft（使用红石）中制作了一个简单的 RAM 内存，地址为 4 位，每个单元格中存储 4 位。我们的下一个目标是在其中存储不同类型的变量并以不同的方式处理它们。

我们不是工程师，所以我们真的不知道，但我们做了一些相当复杂的事情，我们认为我们可以做到。问题是我们无法弄清楚如何存储可以存储在单个单元格中的更多位变量。我举个例子。

考虑一个 16 位变量。我们认为创建大单元没有任何意义，因此我们决定在每个单元中存储 4 位的数据。但这还不够，我们必须关联这 4 个单元格。所以我们认为我们必须创建 8 位单元，具有 4 位内容和 4 位来存储变量的下一个 4 位存储的地址。但是，4 位地址对于 RAM 来说不算什么，我们不能在那里存储任何内容。所以我们需要至少 8 位的地址。4bits的内容似乎也很低，而且我们还需要至少其他4bits来存储变量的类型。

好吧，最后我们认为这种技术是荒谬的，在现实生活中不可能这样做。而且我们现在不知道该怎么做。我在网上搜索了 RAM 的工作原理，但我发现少数几个对于我们的需求来说太复杂了。

有人可以解释一下这在现实生活中是如何完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:41:01.833

嘿，您正在玩​​指责游戏，试图将内存管理的所有责任都归咎于物理 RAM 实现。

事实上，RAM 只是一个存储设备（你的红石图块），实际上在其中存储数据是你的程序的责任。换句话说，不需要为 RAM 制定标准化的内存单元“链接”策略，因为是您的程序写入它然后再读回它，因此它知道自己的常见做法。

考虑到这一点，存储值很容易。假设您想要一个 16 位整数存储在 4 位/字 RAM 中（即 4 个字的数据）。只需将地址 0 到 4 称为变量即可。不需要“链接”，因为你们都知道如何从中读取和写入，而且您不会踩到自己的脚趾（理论上）。

扩展构造的其他想法：专用注册表的特殊位置（使用堆栈进行递归计算的堆栈指针，图灵机的程序指针等）。我还有一个，但我写的时候忘记了，如果我记得它，我会编辑..

# c# - WPF UserControlA 与列表 财产

> ID：13073054
> 
> 赞同：1
> 
> 时间：2012-10-25T16:26:21.943
> 
> 标签：c#, wpf, user-controls

我想要一个用户 UserControl 派生类，其中包含另一个 UserControl 派生类的对象列表，我可以在 xaml 中使用它。

```
<UserControlA>
   <UserControlA.Items>
      <UserControlB Width=10 Height=10 />
      <UserControlB Width=10 Height=10 />
      <UserControlB Width=10 Height=10 />
   <UserControlA.Items>
<UserControlA> 
```

我不知道如何实现 UserControlA 的 Items 属性来允许这样做。我已经尝试将它实现为类型的依赖属性，`Items : List<UserControlB>`但这确实将整个 xaml 从 USerControlB 复制到 UserControlA.Items 部分。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:30:47.583

看起来你真的“过度”了。您可能只想要一个`Style`or和其中的项目。`Template``ItemsControl``ListBox``DataTemplate`

这是一些代码：

```
<ListBox>
    <ListBox.Template>
        <ControlTemplate>
                    <!--The control functionality of UserControlA-->
            <ItemsPresenter/>
        </ControlTemplate>
    </ListBox.Template>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <ContentControl/> <!--UserControlB-->
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# python - 复数和 for 循环

> ID：13073059
> 
> 赞同：2
> 
> 时间：2012-10-25T16:26:38.937
> 
> 标签：python, for-loop, complex-numbers

我需要创建一个函数来测试复数 c 是否在定义为 z [n+1] = z [n] ² + c 的 Mandelbrot 集中。如果这令人困惑，则 n 的值在下标中。该函数接受变量 c（0 + 0j 形式的某个复数）和 n（迭代次数）。要查看 c 是否在集合中，我需要测试 z = z**2 + c > 2。如果 > 2 我需要返回 false。现在我知道 c = 0 + 0j 和 n = 25 我应该得到 True。但我只能用非常小的 n 值来实现。我需要做什么不同的事情。

```
def inMSet(c,n):
    for x in range(0, n):
        z = n**2 + c
        if abs(z) > 2:
            return False
        else:
            return True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T09:37:18.843

定义有一个[迭代公式](http://en.wikipedia.org/wiki/Mandelbrot_set#Formal_definition)，从 开始`z=0`。

```
def inMSet(c,n):
    z = 0
    for x in range(0, n):
        z = z**2 + c
        if abs(z) > 2:
            return False
    return True 

>>> inMSet(0+0j,25)
True 
```

# r - 从R中的二维数据中过滤值，比较它们自己

> ID：13073061
> 
> 赞同：0
> 
> 时间：2012-10-25T16:26:42.513
> 
> 标签：r, statistics, data-mining

我正在分析美国选举数据、候选人的贡献等。所以我从互联网上获取了原始数据并尝试学习一些 R 来执行一些练习。这是我成功加载和分析的 CSV 文件`?summary`。

我还`?tapply`成功地使用了按州区分候选人的捐款：

```
data_amt_st = tapply(data$contb_receipt_amt, data[c('cand_nm', 'contbr_st')], sum) 
```

`?str`（对于一个小样本）告诉我这个数据的格式：

```
> str(data_amt_st)
 num [1:3, 1:21] NA NA 451 NA NA 201 NA NA 200 NA ...
 - attr(*, "dimnames")=List of 2
  ..$ cand_nm  : chr [1:3] "Bachmann, Michele" "Obama, Barack" "Romney, Mitt"
  ..$ contbr_st: chr [1:21] "33" "46" "48" "7" ... 
```

现在我需要从 data_amt_st 中过滤掉值。我需要说明“奥巴马，巴拉克”的贡献比其他候选人多，但不知道该怎么做。有什么`?subset`？

非常感谢你。

* * *

编辑 1：听大家告诉我的，关于提出一个更具体的问题：我需要一份巴拉克奥巴马比其他候选人贡献水平更高（更多钱）的州名单。

* * *

编辑2：试图给你一个可重复的例子（它正确吗？）：

```
x = c("a", "b", "c")
y0 = c(3, 5, 1)
y1 = c(2, 1, 6)
y2 = c(4, 2, 3)
m = cbind(x, y0, y1, y2)
m
#      x   y0  y1  y2 
# [1,] "a" "3" "2" "4"
# [2,] "b" "5" "1" "2"
# [3,] "c" "1" "6" "3" 
```

现在，我需要知道，对于什么 y 值，`a`高于`b`和`c`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:49:52.770

也许

```
## max by column (MARGIN=2)
max_amt <- apply(data_amt_st,MARGIN=2,max,na.rm=TRUE)  
data_amt_st[,max_amt==data_amt_st["Obama",]] 
```

? （不确定这将如何处理`NA`奥巴马行中的值：使用`dput`给我们一个可重现的例子（[http://tinyurl.com/reproducible-000](http://tinyurl.com/reproducible-000)）会很有用......）

```
x <- letters[1:3]
y0 <- c(3, 5, 1)
y1 <- c(2, 1, 6)
y2 <- c(4, 2, 3)
m <- data.frame(y0, y1, y2)
rownames(m) <- x
maxvals <- apply(m,2,max,na.rm=TRUE)
which(m["a",]==maxvals)  ## or
names(m)[m["a",]==maxvals] 
```

# git - Git：警告：refname'master'不明确

> ID：13073062
> 
> 赞同：90
> 
> 时间：2012-10-25T16:26:45.797
> 
> 标签：git

我看到有几个人在这里问同样的问题，但他们的建议似乎都不适用于我。我收到了标题中的警告，但我没有任何名为“master”的标签。这是结果`git branch -a`：

```
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/master 
```

知道这里可能出了什么问题吗？我现在只使用 git 几个月了，所以它主要是让我担心这种歧义可能会在未来与 repo 混淆。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-04-30T14:24:20.030

对我来说，当我错误地发出“update-ref”命令时，我很早就找到了这个警告的来源。如果您忘记在第一个 arg 中指定完整的 refs/heads/mybranchname 路径，则会创建一个文件 .git/mybranchname，稍后当您尝试切换到该分支时会导致此警告。

只需删除 .git/mybranchname 即可解决，例如：

```
rm .git/master 
```

作为参考，update-ref 命令的正确格式是：

```
git update-ref refs/heads/mybranchname mytargetbranch 
```

不要忘记“refs/heads”部分！

此外，我最常见的 update-ref 用例只是手动移动一个分支以指向另一个提交，我发现了一种更简单的语法：

`git branch -f myBranchToMove destinationBranchOrHash`

这种语法对我来说更容易，因为它不需要容易出错的 refs/heads 路径限定符。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-26T08:44:20.330

如“ [Git: refname ' `master`' is ambiguous](https://stackoverflow.com/questions/12224773/git-refname-master-is-ambiguous/12225704#12225704) ”中所述，这意味着，`heads/master`在 git repo 的以下命名空间之一中，您还有另一个 master：

```
refs/<refname> 
refs/tags/<refname>
refs/heads/<refname>
refs/remotes/<refname>
refs/remotes/<refname>/HEAD 
```

甚至`./<refname>`，正如[Magnus](https://stackoverflow.com/users/426877/magnus)的[回答](https://stackoverflow.com/a/16302266/6309)中提到的那样。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-01-28T18:49:28.853

为了将来参考，我遇到了同样的问题，最终对我有用的是[这里](https://code.i-harness.com/en/q/ba8905)描述的解决方案。基本上，当您收到`Git: warning: refname 'xxx' is ambiguous`警告时，您可以使用：`git show-ref xxx`检查对`xxx`分支的引用并验证哪些存在冲突。

`xxx`在我的场景中，它是一个名称和分支名称相同的标签。该标签是错误制作的，已从服务器中删除，所以我需要做的就是更新我的本地标签以匹配服务器：`git fetch -p -P`。此命令在此处详细[说明](https://stackoverflow.com/a/49215190/1450348)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-09T05:46:50.153

```
git fetch --prune

git pull origin branch-name 
```

应该解决你的问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-10T23:47:49.713

当我创建一个与标签同名的分支时，我遇到了类似的问题（不是 master）。

这帮助我删除了标签[https://stackoverflow.com/a/5480292/150953](https://stackoverflow.com/a/5480292/150953)

```
git push --delete origin tagname 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-02-20T09:51:23.173

检查你的`.git/config`文件。如果您配置了多个远程仓库，您可能会遇到此问题：

`fetch = +refs/heads/*:refs/remotes/origin/*`.

另一个远程服务器应具有不同的名称，例如：

`fetch = +refs/heads/*:refs/remotes/another_repo/*`

# python - 使用 Python 生成连接/网络图

> ID：13073066
> 
> 赞同：6
> 
> 时间：2012-10-25T16:26:55.503
> 
> 标签：python, networkx

我有一个包含大约 850 万个数据点的文本文件，格式如下：

```
Company 87178481
Company 893489
Company 2345788
[...] 
```

我想用 Python 创建一个连接图，看看公司之间的网络是什么样子的。从上面的示例中，如果第二列中的值相同，两家公司将共享优势（来自/for **Hooked**的澄清）。

我一直在使用**NetworkX**包，并且已经能够为几千个点生成一个网络，但它并没有通过完整的 850 万个节点的文本文件。跑了大概15个小时左右，回来的时候shell里的光标还在闪烁，但是没有输出图。

假设它仍在运行是否安全？是否有更好/更快/更简单的方法来绘制数百万个点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:34:34.753

如果您有 1000K 点数据，您将需要某种方式来查看全局。根据您正在寻找的确切内容，如果您可以在公司之间分配“距离”（例如分开的连接数），您可以通过[Dendrogram](http://en.wikipedia.org/wiki/Dendrogram)可视化关系（或集群） 。

Scipy 进行聚类：

[http://docs.scipy.org/doc/scipy/reference/cluster.hierarchy.html#module-scipy.cluster.hierarchy](http://docs.scipy.org/doc/scipy/reference/cluster.hierarchy.html#module-scipy.cluster.hierarchy)

并具有将它们变成树状图以进行可视化的功能：

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.dendrogram.html#scipy.cluster.hierarchy.dendrogram](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.dendrogram.html#scipy.cluster.hierarchy.dendrogram)

最短路径距离函数的示例`networkx`：

[http://networkx.lanl.gov/reference/generated/networkx.algorithms.shortest_paths.generic.shortest_path.html#networkx.algorithms.shortest_paths.generic.shortest_path](http://networkx.lanl.gov/reference/generated/networkx.algorithms.shortest_paths.generic.shortest_path.html#networkx.algorithms.shortest_paths.generic.shortest_path)

最终，您必须决定如何加权图表中两家公司（顶点）之间的距离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T18:10:27.787

您有太多数据点，如果您确实将网络可视化，那将没有任何意义。您需要有办法 1）通过删除那些不太重要/连接较少的公司来减少公司数量 2）以某种方式总结图表，然后可视化。

为了减少数据的大小，最好独立创建网络（使用您自己的代码创建公司的边缘列表）。通过这种方式，您可以减小图形的大小（例如，通过删除可能很多的单例）。

总结一下，我建议运行聚类或社区检测算法。即使对于非常大的网络，这也可以非常快地完成。使用 igraph 包中的“fastgreedy”方法：http://igraph.sourceforge.net/doc/R/fastgreedy.community.html [（](http://igraph.sourceforge.net/doc/R/fastgreedy.community.html) 网上也有更快的算法，这是由 Blondel 等人提供的：[http： //perso.uclouvain.be/vincent.blondel/publications/08BG.pdf](http://perso.uclouvain.be/vincent.blondel/publications/08BG.pdf)我知道他们的代码可以在网上某处获得）

# installation - 安装 Visual Studio 2012 微软 Visual C++ 2012 编译器包失败

> ID：13073068
> 
> 赞同：5
> 
> 时间：2012-10-25T16:27:13.223
> 
> 标签：installation, visual-studio-2012

我尝试安装 Visual Studio 2012，但总是失败。

![在此处输入图像描述](../Images/305a5ee1ca6dc022077b4997722e95c1.png)

“安装失败！安装无法继续，因为某些必需的组件失败

...

X Visual Studio Core 功能安装过程中出现致命错误。

！Microsoft Visual C++ 2012 编译器包失败。”

我在最新的 Windows 7 x86 上运行

# javascript - Twitter Bootstrap .on('show',function(){}); 不适用于弹出窗口

> ID：13073073
> 
> 赞同：8
> 
> 时间：2012-10-25T16:27:30.720
> 
> 标签：javascript, twitter-bootstrap

当通过执行以下操作选择新弹出框时，我试图隐藏所有其他弹出框：

我的 HTML

```
a.btn#requests(rel='popover',data-placement='bottom',data-original-title='<b>Requests</b>',data-content='My content goes here') 
```

我的 Javascript

```
 $(function (){
    console.log('start');
    $('#requests').popover();
    $('#messages').popover();

  });

  //This doesn't work for some reason?
  $('#requests').on('show', function (e) {
    console.log('requests');
    $('#messages').popover('hide');
  });

  $('#messages').on('show', function () {
    console.log('messages');
    $('#requests').popover('hide');
  }); 
```

但是，我的 console.log('requests') 和 console.log('messages'); 即使显示请求和消息弹出框，也永远不会显示，我做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-10-17T02:45:52.450

Bootstrap 现在支持弹出事件 - 请参阅[官方弹出文档](http://getbootstrap.com/javascript/#popovers-usage)中的事件部分（[这里是文档更改日志](https://github.com/twbs/bootstrap/commit/7936f1478028fb759781014a2c93884f5f90a598)）。

例子：

```
$('#requests')
.popover()
.on('show.bs.popover', function() { console.log('o hai'); })
.on('hidden.bs.popover', function() { console.log('ciao'); }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T22:44:43.047

popover 插件不会触发任何事件。工具提示插件也没有（因为 popover 扩展了工具提示）。检查[此问题（github）](https://github.com/twitter/bootstrap/issues/2150)以获取替代方案。

您可以根据您的`trigger`. 对于您的示例：[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/dzkCz/)

```
$(function (){
    console.log('start');
    $('#requests').popover();
    $('#messages').popover();

    $('#requests').on('click', function (e) {
        console.log('requests');
        $('#messages').popover('hide');
    });

    $('#messages').on('click', function () {
        console.log('messages');
        $('#requests').popover('hide');
    });

}); 
```

为什么`'click'`？因为版本 2.1.1 的默认弹出框触发器是`click`. 请参阅[弹出文档（github）](http://getbootstrap.com/2.3.2/javascript.html#popovers)

您可以使用以下事件：

*   `trigger: 'click'`： 在`click`
*   `trigger: 'hover'`: 显示`mouseenter`和隐藏`mouseleave`
*   `trigger: 'focus'`: 显示`focus`和隐藏`blur`
*   `trigger: 'manual'`: 使用你自己的代码来显示和隐藏

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T06:25:36.653

您可以通过使用类并拥有越来越多的组织代码轻松地做到这一点：

```
$(document).ready(function(){

    $('.btn').popover();

    $('.btn').on('click', function (e) {
        $('.btn').not(this).popover('hide');
    });
}); 
```

在这里查看我的[演示](http://jsfiddle.net/moalla/vFDSZ/3/)

如果您想在自定义此代码中进行表单控制：

```
var mycontent = '<div class="btn-group"> <button class="btn">Left</button> <button class="btn">Middle</button> <button class="btn">Right</button> </div>'

$('.btn').popover({
        content:mycontent,
        trigger: 'manual'
}).click(function(e) {
    $(this).popover('toggle');
    e.stopPropagation();
});

   $('.btn').on('click', function (e) {
       $('.btn').not(this).popover('hide');
    });
}); 
```

在这里查看[演示](http://jsfiddle.net/moalla/fsRaN/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-07T06:49:29.343

根据[https://getbootstrap.com/docs/3.3/javascript/#popovers-events](https://getbootstrap.com/docs/3.3/javascript/#popovers-events)事件的名称是

> show.bs.popover

我试过了，效果很好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-11T19:12:12.503

试试这个：

```
 $(document).on('click', function(e) {
                if (!$(e.target).is('[data-original-title]')) {
                    $('[data-original-title]').popover('hide'); 
                }
            });

            $(document).on('show.bs.popover', function(e) { 
                $('[data-original-title]').popover('hide'); 
            }); 
```

这会在整个文档上设置一个事件处理程序，如果它不是弹出框元素，它将隐藏所有弹出框。

此外，在事件 show.bs.popover （在打开弹出窗口之前触发）它将隐藏所有其他事件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-19T19:18:52.420

这`.on('shown')`不是`.on('show')`

# c - Realloc 在传递的指针上崩溃

> ID：13073078
> 
> 赞同：0
> 
> 时间：2012-10-25T16:27:43.417
> 
> 标签：c, realloc

我似乎找不到与我正在做的事情完全匹配的问题，所以就这样吧。下面是我的 C 应用程序的精简版本，可以解决问题所在。我知道这是丑陋的代码并且缺少一些错误检查，但这只是让我找出这个问题。就目前而言，下面的示例应将所有“A”转换为“BCDE”。代码中的注释描述了这个问题。（首先执行runMe）

```
int runMe2(char *in, char **buffer) {
    long x;
    long b_size = 0; 
    long i_size = 1000;
    long i = 0;
    char t_buffer[1006];

    // Initial malloc small as it will grow
    *buffer = (char *)malloc(2*sizeof(char));
    strcpy(*buffer, "");
    for (x = 0; x < 999; x++)
        t_buffer[x] = 0;
    for (x = 0; x < strlen(in); x++) {
        if (i >= i_size) {
            char *r_buffer;
            b_size = b_size + 1006*sizeof(char);
            i_size = 0;
            // Here is where the problem is.
            // The first time through, i=1000, b_size=1006 and everything is fine
            // The second time throgh, i=1004, b_size=2012 and the heap crashes on the realloc
            r_buffer = (char *)realloc(*buffer, b_size);
            if (r_buffer == NULL)
                exit(0);
            *buffer = r_buffer;
            strcat(*buffer, t_buffer);
            for (x = 0; x < 999; x++)
                t_buffer[x] = 0;
        }
        if (in[x] == 'A') {
            t_buffer[i++] = 'B';
            t_buffer[i++] = 'C';
            t_buffer[i++] = 'D';
            t_buffer[i++] = 'E';
        }
    }
}

int runMe() {
    char *out;
    char in[30000];
    int x = 0;

    // Set up a 29,999 character string
    for (x = 0; x < 30000; x++)
        in[x] = 'A';
    in[29999] = 0;
    // Send it as pointer so we can do other things here
    runMe2(in, &out);
    // Eventually, other things will happen here
    free(out);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:46:44.820

```
if (i >= i_size) {
  ...
  i_size = 0;
  ...
}
if (in[x] == 'A') {
  t_buffer[i++] = 'B';
  ... 
```

这不可能。你会写到`t_buffer`if `in`is ever longer than the original的末尾`i_size`。您可能打算在`i`那里重置，而不是`i_size`.

`t_buffer`然后，当您不能保证它正确地以空值终止时，您将使用字符串函数- 您初始化前一千个值，但覆盖循环中的那些。如果您要使用`strcat`和朋友，则需要更加小心以确保它保持为空终止。但是使用[`memcpy`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/memcpy.html)会导致更简单的代码，因为您知道所涉及的数组的长度。

```
for (x = 0; x < strlen(in); x++) {
  ...
  for (x = 0; x < 999; x++)
    ...
    t_buffer[x] = 0; 
```

[正如Useless](https://stackoverflow.com/users/212858/useless)所发现的，这也不对。为此使用第二个变量，或者更好地使用[`memset`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/memset.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:33:13.827

只是为了好玩，这里有一个不同的算法，它比你的更简单：

```
int runMe2(char *in, char **buffer)
{
    // Count number of A's
    int number_of_As = 0;
    int i, j;
    for (i = 0; 0 != in[i]; i++) {
        if (in[i] == 'A') {
            number_of_As += 1;
        }
    }

    // If number_of_As == 0, you can just do a strdup here and return

    // Because of 1st loop, i == strlen(in), no need to call strlen
    long bytes = (i - number_of_As + (number_of_As * 4) + 1) * sizeof(char);
    // Error check here

    // Only 1 memeory allocation needed
    *buffer = (char *)malloc(bytes);

    // Simple copy loop
    for (i = 0, j = 0; 0 != in[i]; i++) {
            // If it's an A replace
        if (in[i] == 'A') {
            (*buffer)[j++] = 'B';
            (*buffer)[j++] = 'C';
            (*buffer)[j++] = 'D';
            (*buffer)[j++] = 'E';
        }
            // Not an A, just copy
        else {
            (*buffer)[j++] = in[i];
        }
    }
    // Null terminate
    (*buffer)[j] = 0;

    return j;
} 
```

# php - 未定义索引：id

> ID：13073079
> 
> 赞同：0
> 
> 时间：2012-10-25T16:27:47.613
> 
> 标签：php, xampp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:29:45.223

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:29:47.047

你`isset()`在`$_COOKIE`变量上使用，所以你必须知道它是如何检查变量是否存在的。只需将其应用于`$_SESSION['id']`等等，错误就会停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:30:41.633

在你的第一次运行中，`$_SESSION['id']`不会`$_SESSION['rememberMe']`被设置。您必须检查它们是否已设置（就像您对 cookie 所做的那样）

```
if(isset($_SESSION['id']) && !isset($_COOKIE['logRemember']) && !isset($_SESSION['rememberMe'])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T16:30:56.280

它“工作”的原因是因为 Apache 2 服务器可能未配置为显示错误。你的问题是`$_SESSION['id']`没有设置。相反，检查它是否与

```
isset($_SESSION['id']) 
```

如果未设置，则不会引发错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T16:31:03.440

检查存储会话数据的目录是否可由 apache 写入。您可以通过使用获取路径`session_save_path ();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T17:23:24.067

用以下代码替换行

```
session_start();

if(isset($_SESSION['id']) && !isset($_COOKIE['logRemember']) && !isset($_SESSION['rememberMe'])) 
```

# php - 如何将 symfony 从 1.4 升级到 2.1？

> ID：13073081
> 
> 赞同：0
> 
> 时间：2012-10-25T16:28:10.060
> 
> 标签：php, symfony, symfony-1.4, symfony-2.1

> **可能重复：**
> [将网站从 Symfony 1.4 移植到 2.0](https://stackoverflow.com/questions/10700648/porting-a-website-from-symfony-1-4-to-2-0)

谁能告诉我我应该如何以及采用什么方法将 symfony 1.4 升级到 2.1？

如果这不可能，也请告诉我。

在此之前我还没有完成升级过程，所以如果您提供我必须考虑的要点，将会很有帮助。

# asp.net-mvc - 基于razor变量在视图中添加元素属性

> ID：13073085
> 
> 赞同：2
> 
> 时间：2012-10-25T16:28:16.203
> 
> 标签：asp.net-mvc

我有一个包含列表的视图，我想根据视图模型中的变量将类添加到特定列表项。

```
<ul>
    <li>List Item 1</li>
    <li>List Item 2</li>
    <li>List Item 3</li>
</ul> 
```

变量可以是任何东西。目前它是一个整数。以下是我现在拥有的，但我认为这不是最干净的方法。

```
string[] listClasses = new string[3];
int? selectedListElement= (int?)ViewData["SelectedListElement"];
if(tabNumber.HasValue)
{
    tabClasses[tabNumber.Value] = "selected";
}
<li class="@listClasses[0]">List Item 1</li>
<li class="@listClasses[1]">List Item 2</li>
<li class="@listClasses[2]">List Item 3</li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:33:46.673

为什么不将类名放入您的视图模型并使用条件属性

[使用 Razor MVC3 的条件 HTML 属性](https://stackoverflow.com/questions/8061647/conditional-html-attributes-using-razor-mvc3)

# java - 将枚举转换为迭代器

> ID：13073094
> 
> 赞同：11
> 
> 时间：2012-10-25T16:28:43.893
> 
> 标签：java, iterator, nullpointerexception, enumeration

我在工作表上有一个问题，即创建一个适配器以将枚举转换为迭代器。当我尝试运行以下代码时，我得到一个空指针异常。

```
import java.util.Vector;
import java.util.Arrays;
import java.util.Enumeration;
import java.util.Iterator;

public class ConvertEnumeration {

    public static void main(String [] args) {

        int [] ourArray = {0,1,2,3,4,5,6,7,8,9};
        Vector vector = new Vector(Arrays.asList(ourArray));

        //Get Enumerator 
        Enumeration enumerator = vector.elements();

        EnumerationToIterator enumToIt = new EnumerationToIterator(enumerator);
        while(enumToIt.hasNext()) {
            System.out.println(enumToIt.next());
        }
    }

}

//Convert our enumeration to Iterator!
class EnumerationToIterator implements Iterator {

    //Our enumeration
    Enumeration enmueration;

    //Constructor
    public EnumerationToIterator(Enumeration enmueration){
        enmueration = this.enmueration;
    }

    //Our Methods
    public boolean hasNext(){
        return enmueration.hasMoreElements();
    }

    public Object next(){
        return enmueration.nextElement();
    }

    public void remove(){
        throw new UnsupportedOperationException();
    }

} 
```

需要注意的另一点是，在我首先创建枚举之后，我无法从枚举中打印出 int。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-12-20T05:34:00.780

## Java 5 及更高版本

无需重新发明轮子。只需使用`Collections.list(Enumeration<T> e)`，它会返回一个`ArrayList<T>`. 然后使用`ArrayList.iterator()`得到一个`Iterator`.

## Java 9 及更高版本

枚举现在[有一种方法](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Enumeration.html#asIterator())可以直接转换为迭代器：

```
enumeration.asIterator(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-24T17:42:35.280

Java 9 提供了一个新的默认方法：`Iterator<E> asIterator()`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-25T16:30:22.137

构造函数中的错误分配。它必须`this.enmueration = enmueration;`
`enmueration`是构造函数参数，并且`this.enmueration`是对象属性。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-25T22:20:17.347

```
public class ConvertEnumeration {

    public static void main(String [] args) {

        // int [] ourArray = {0,1,2,3,4,5,6,7,8,9};
        Vector<Integer> vector = new Vector<Integer>(Arrays.asList(0,1,2,3,4,5,6,7,8,9));

        //Get Enumerator 
        Enumeration<Integer> enumerator = vector.elements();

        EnumerationToIterator<Integer> enumToIt = new EnumerationToIterator<Integer>(enumerator);
        while(enumToIt.hasNext()) {
            System.out.println(enumToIt.next());
        }
    }

}    

//Convert our enumeration to Iterator!
    class EnumerationToIterator<T> implements Iterator<T> {

        //Our enumeration
        Enumeration<T> enmueration;

        //Constructor
        public EnumerationToIterator(Enumeration<T> enmueration){
            this.enmueration = enmueration;
        }

        //Our Methods
        public boolean hasNext(){
            return enmueration.hasMoreElements();
        }

        public T next(){
            return enmueration.nextElement();
        }

        public void remove(){
            throw new UnsupportedOperationException();
        }
    } 
```

# web-services - Tomcat，JAX-RS（球衣），@PathParam：如何传递两个包含斜杠的变量

> ID：13073100
> 
> 赞同：2
> 
> 时间：2012-10-25T16:28:55.627
> 
> 标签：web-services, rest, tomcat, jersey, slash

我正在使用 Jersey Java 和 Tomcat 编写 REST 服务。这是我的问题 - 我如何接受两个`@PathParam`包含斜杠的变量？即`enrollment/{id}/{name}`，id 可以是`i124/af23/asf`，name 可以是“bob/thatcher”。

```
@GET 
@Path("enrollment/{id}/{name}")
public String enrollPerson(@PathParam("id") String id, @PathParam("name") String name) {
    System.out.println(name +  " " + id);
    return("Enrolled!");
} 
```

我看到了这个问题：[Tomcat, JAX-RS, Jersey, @PathParam: how to pass dots and slashes?](https://stackoverflow.com/questions/11130793/tomcat-jax-rs-jersey-pathparam-how-to-pass-dots-and-slashes) 它回答了我的部分问题，但它提供了一个包含斜杠的参数的解决方案（我有两个带有斜杠的参数）。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:08:45.590

我相信答案是在发送之前对字符串进行 URLEncoding，然后在方法中对字符串进行 URLDecoding。所以我的方法应该是：

```
@GET 
@Path("enrollment/{id}/{name}")
public String enrollPerson(@PathParam("id") String id, @PathParam("name") String name) {
    String decodedName = URLDecoder.decode(name, "UTF-8");
    String decodedId = URLDecoder.decode(id, "UTF-8");
    System.out.println(decodedName + " " + decodedId);
    return("Enrolled!");
} 
```

# java - 如何创建没有数据绑定的 Java Web 服务客户端？

> ID：13073102
> 
> 赞同：0
> 
> 时间：2012-10-25T16:29:03.713
> 
> 标签：java, web-services

我正在为我的客户构建自己的 Web 服务客户端数据绑定机制。我想在请求上构建自己的 SOAP 消息并接收 SOAP 消息响应。我开始编写一个直接与套接字交互的客户端，但开始被 WS-Security 的复杂性所困扰。关于这个项目的库和/或方法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:32:57.777

是什么让您认为您需要自定义绑定？可能那些经过 1000 名开发人员测试的人已经相当成熟了。

看看[Apache CXF](http://cxf.apache.org/)。浏览[架构文档](http://cxf.apache.org/docs/cxf-architecture.html)。您可能会在那里找到适合您需求的扩展点。

Apache CXF 当前支持的数据绑定：JAXB 2.x（默认）、Aegis、Apache XMLBeans、服务数据对象（SDO）和 JiBX（正在开发中）。如果其中任何一个不符合您的需求，请附上您自己的以下[数据绑定架构文档](http://cxf.apache.org/docs/data-binding-architecture.html)。

# sql - 带有“OR”语句的案例语句

> ID：13073105
> 
> 赞同：-1
> 
> 时间：2012-10-25T16:29:18.493
> 
> 标签：sql, sql-server, sql-server-2005

```
SELECT   ProductNumber, Category =
      CASE ProductLine
         WHEN 'R' or 'r' THEN 'Road'
         WHEN 'M' or 'm' THEN 'Mountain'
         WHEN 'T' or 't' THEN 'Touring'
         WHEN 'S' or 's' THEN 'Other sale items'
         ELSE 'Not for sale' 
```

我的基本要求是在 CASE 中使用“或”（如果可能），如果我做错了什么，请提出建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:32:00.200

一种不同的编写方式`case`接近了，但是您必须重复该变量：

```
CASE
  WHEN ProductLine in ('R', 'r') THEN 'Road'
  WHEN ProductLine in ('M', 'm') THEN 'Mountain' 
```

或者一个`like`字符类：

```
CASE
  WHEN ProductLine like '[Rr]' THEN 'Road'
  WHEN ProductLine like '[Mm]' THEN 'Mountain' 
```

请注意，在 SQL 中，默认情况下字符串比较不区分大小写。您可以通过设置区分大小写的数据库排序规则来更改默认值，但这很不寻常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:35:22.747

你也可以写

```
select
    ProductNumber,
    case upper(ProductLine)
        when 'R' then 'Road'
        when 'M' then 'Mountain'
        when 'T' then 'Touring'
        when 'S' then 'Other sale items'
        else 'Not for sale'
    end as Category 
```

您可以将排序规则设置为不区分大小写，只需将 ProductLine 与字母进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:37:31.097

简单地说，你可以这样做；

```
SELECT   ProductNumber, CASE LOWER(ProductLine) 
                            WHEN 'r' THEN 'Road'
                            WHEN 'm' THEN 'Mountain'
                        END AS Category
FROM TableName 
```

**更多详情：** [点击这里](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T16:37:36.093

我会推荐 case fall-through，但这在 SQL 中是不允许的。但是，对于 SQL 的失败解决方法有一个很好的答案：[SQL Case Statment 可以失败吗？](https://stackoverflow.com/questions/2120133/can-the-sql-case-statment-fall-through)

# ruby-on-rails - 我想了解 Paperclip gem 如何处理 s3 停机时间

> ID：13073107
> 
> 赞同：2
> 
> 时间：2012-10-25T16:29:23.770
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, paperclip

我希望这个问题没有一个我完全忽略的极其简单的答案。

我的问题是回形针宝石如何处理 s3 停机时间？如果用户上传资产并且 s3 由于它变得不可用而没有响应，那么流程是什么。具体情况；我正在使用带有 rails 3 的回形针 2.7 gem。我尝试查看文档和测试，但看不到正在处理。如果回形针宝石没有处理 s3 停机时间，那么在我的模型中处理它的最佳实践是什么。理想情况下，我不希望发生保存并将错误传输给用户。

其他人是如何处理这个问题的？

对此的任何见解都会有所帮助，

斯兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T07:55:58.753

基本上它会引发异常，因为默认情况下上传是同步的。这是你必须自己处理的问题。

例如，一种解决方案是使用[Sidekiq](http://mperham.github.io/sidekiq/)或[Resque](https://github.com/resque/resque)在后台上传。

[我做了一个要点来在这里](https://gist.github.com/basgys/5494162)挂钩回形针文件上传（它还没有准备好生产）

# javascript - 鼠标移动给定数字后的触发事件

> ID：13073111
> 
> 赞同：0
> 
> 时间：2012-10-25T16:29:43.470
> 
> 标签：javascript, events, count, pixel, mousemove

我尝试根据鼠标坐标更改欢迎消息。它必须在给定数字后更改。

哪里有问题，但我想不通！

```
var str = ["Hello", "Bonjour", "Salut"],
    len = str.length,
    i = 0;
document.onmousemove = function(event) {
    var count = i++,
        random = (count) % len;
    if (count > 60) {
        document.body.innerHTML = str[random];
        i = 0;
    }
    console.log(count);
}; 
```

一个更好的解释的[小提琴](http://fiddle.jshell.net/dWhrM/)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:33:15.017

您的逻辑只会生成以下计算：

```
61 % len 
```

或者至少它只会在何时输出`i > 60`，因此您的输出将始终基于该计算 - 而不是您所期望的。

```
var str = ["Hello", "Bonjour", "Salut"],
    last = '',
    len = str.length,
    i = 0;
document.onmousemove = function(event, r) {
    if (i++ > 60) {
        r = Math.floor(Math.random() * len;
        if ( last ) { str.push(last); }
        last = str.splice(r,1);
        i = 0;
        document.body.innerHTML = last;
    }
}; 
```

不重用先前值的版本：

```
var str = ["Hello", "Bonjour", "Salut"],
    last = '',
    i = 0;
document.onmousemove = function(event, r) {
    if (i++ > 60) {
        r = Math.floor(Math.random() * str.length);
        if ( last ) { str.push(last); }
        last = str.splice(r,1);
        document.body.innerHTML = last;
        i = 0;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:33:50.413

```
var str = ["Hello", "Bonjour", "Salut"],
    len = str.length,
    i = 0;
document.onmousemove = function(event) {
    var count = i++,
        random;
    do {
        random = Math.floor((Math.random() * 3));
    } while (random == str.indexOf(document.body.innerHTML));
    if (count > 60) {
        document.body.innerHTML = str[random];
        i = 0;
    }
    console.log(count);
}; 
```

您正在对字符串长度使用某种奇怪的可分性计算，只需生成一个介于 0 和 2 之间的随机数，让自己头疼。

编辑：忘了[小提琴](http://fiddle.jshell.net/dWhrM/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:38:21.130

我可以看到逻辑上的问题...您仅在值超过 60 并且您再次重置为 0 时才更改内部 html，这意味着如果仅条件值为 61 则它进入...并查看您如何计算随机数val .... 因为它在值为 61 时进入 if 条件，因此当它进入 if 条件并更改内部文本时，您的随机值将始终为 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:08:18.413

```
//Use this code...

var str = ["Hello", "Bonjour", "Salut"], len = str.length, i = 0;
document.onmousemove = function (event) {
    var count = i++;
    if (count > 60) {
        var random = (event.screenX + event.screenY) % len;
        document.body.innerHTML = str[random];
        i = 0;
    }
}; 
```

# jquery - JQuery $.Post 方法响应

> ID：13073118
> 
> 赞同：0
> 
> 时间：2012-10-25T16:30:03.510
> 
> 标签：jquery, post

我正在使用 Jquery 进行 POST 以验证我的页面。

```
$.post("api/authenticate", {"authkey": authkey}, function(data){
    console.log(data);
    if (data.success === "false") {
    window.location="/Login.html";
    } 
}); 
```

编辑！！

如果身份验证不成功，我的 php 函数将返回一个 json 对象

```
{"success":"false"} 
```

但是，console.log(data) 没有返回任何东西。即使我可以在资源中看到响应。

任何人都知道我该如何解决这个问题？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:39:38.870

如果您期待 JSON，请使用 $.getJSON。它会将您的响应解析为 JSON 对象。

```
$.getJSON("api/authenticate", {"authkey": authkey}, function(jsonObj){
    console.log(jsonObj);
    if (jsonObj.success === "false") {
       window.location="/Login.html";
    } 
}); 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T16:43:43.283

氟利昂的答案可能有效，这是另一种选择，尝试强制`dataType`转换为 JSON。

```
// This is the signature for $.post
jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] )

$.post("api/authenticate", {"authkey": authkey}, function(data){
    console.log(data);
    if (data.success === "false") {
        window.location="/Login.html";
    } 
}, "json"); 
```

另一个要寻找的想法是确保您的服务器以 2xx 状态响应。如果返回不同的状态，`jQuery`将不会尝试读取响应。相反，它将查找在`statusCode`传递给[http://api.jquery.com/jQuery.ajax/的选项中设置的状态代码处理程序](http://api.jquery.com/jQuery.ajax/)

# 例子

```
jQuery.ajax( "api/authenticate", {
    data: {"authkey": authkey},
    dataType: 'json',
    statusCode: {
       306: function(jqXhr, errorType) {
            alert('Could not login')
            // If you still want to access the response, it's accessible as raw text
            // If it's JSON, you have to parse it.
            alert (jqXhr.responseText);
       }
    }
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-25T16:31:31.713

您需要将数据作为数组进行迭代，例如`data[0]`通过 for 循环或 while 循环

# javascript - js中的倒计时

> ID：13073122
> 
> 赞同：-1
> 
> 时间：2012-10-25T16:30:12.800
> 
> 标签：javascript, jquery

我的 javascript 受损 - 我需要构建一个倒计时脚本，倒计时 45 分钟并将剩余时间附加到标题栏或用户浏览器中，以及时间到时将运行警报消息之类的功能。

我希望我有代码开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:45:22.667

在这里，这应该适合你。[（演示）](http://jsbin.com/uqinic/1/edit)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script>
    var interval;
    var minutes = 1;
    var seconds = 5;
    window.onload = function() {
        countdown('countdown');
    }

    function countdown(element) {
        interval = setInterval(function() {
            var el = document.getElementById(element);
            if(seconds == 0) {
                if(minutes == 0) {
                    el.innerHTML = "countdown's over!";  
                    alert("countdown's over!");
                    clearInterval(interval);
                    return;
                } else {
                    minutes--;
                    seconds = 60;
                }
            }
            if(minutes > 0) {
                var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
            } else {
                var minute_text = '';
            }
            var second_text = seconds > 1 ? 'seconds' : 'second';
            el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
            document.title = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
            seconds--;
        }, 1000);
    }
    </script>
</head>
<body>
<div id='countdown'></div>
</body>
</html> 
```

# android - 如何检查应用程序是否随操作系统一起提供？

> ID：13073127
> 
> 赞同：0
> 
> 时间：2012-10-25T16:30:24.317
> 
> 标签：android, android-intent

我想知道是否可以检查应用程序是否随 Android 一起提供，例如：图库、联系人、下载、电子邮件等。所有这些类型的应用程序都是我想从我正在创建的列表中排除的应用程序，但不想硬编码名称。

这是我用来获取应用程序名称的代码：

```
 final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
    final List pkgList = getApplicationContext().getPackageManager().queryIntentActivities(mainIntent, 0); 
```

pkgList 包含 ResolveInfo 对象。

**编辑：**

检查应用程序是否属于 Android 操作系统的一种方法是检查 ResolveInfo.activityInfo.applicationInfo.packageName 是否包含“com.android”字符序列，但我仍然对更优雅的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:51:31.933

看到[这个答案](https://stackoverflow.com/a/6165401/321697)。

基本上，这是：

```
PackageManager pm = getPackageManager();

//Gets the info for all installed applications
List<ApplicationInfo> apps = pm.getInstalledApplications(0);

for(ApplicationInfo app : apps) {
    if((app.flags & ApplicationInfo.FLAG_SYSTEM) == 1) {
        //It's a pre-installed app
    } else if ((app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) == 1) {
        //It's a pre-installed app with a market update installed
    }
} 
```

# spring - Spring PrimeFaces selectOneMenu 提交将我发送到 405 - 不支持请求方法“POST”

> ID：13073128
> 
> 赞同：3
> 
> 时间：2012-10-25T16:30:29.437
> 
> 标签：spring, primefaces, spring-security, spring-webflow

我有一个非常痛苦的问题。在网上找不到解决方案。

我正在使用带有 JSF 的 Spring 3.0，并且配置了 PrimeFaces Spring Security，还配置了 Spring Web Flow（但我在本示例中没有使用它）。

这是我想要实现的行为：用户从 p:selectOneMenu 中选择一个值并提交更改。然后为 Bean 发送值，并且它也在那里被更改。效果：使用 p:selectOneMenu 我更改了 userBean 中的值

全部实施后，我得到一个错误，上面写着：

```
 HTTP Status 405 - Request method 'POST' not supported 
```

选择一个菜单是这样写的：

```
<f:view>
<h:form id="formUserChange"  >
<p:panelGrid columns="2">
<p:selectOneMenu id="chooseUserType" onchange="formUserChange.submit();" 
value="#{userBean.userType}" valueChangeListener="#{userBean.processValueChange}" 
style="padding: 0px 5px; font-size: 13px; width: 200px;" >
      <f:selectItem itemLabel="Option 1" itemValue="KO" />
      <f:selectItem itemLabel="Option 2" itemValue="KJ" />
</p:selectOneMenu>
</p:panelGrid>
</h:form>
</f:view> 
```

Bean是这样放置的：

```
 @ManagedBean(name = "userBean")
   @SessionScoped
   public class UserBean implements Serializable, ValueChangeListener {

private static final long serialVersionUID = 1L;

private String userName = "Michal";
private String userType = "WO";

public UserBean() {
}

public String getUserName() {
    System.out.println("I got now " + userType);
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}

public String getUserType() {
    return userType;
}

public void setUserType(String userType) {
    this.userType = userType;
    System.out.println("I set user as " + userType);
}

@Override
public void processValueChange(ValueChangeEvent arg0) throws AbortProcessingException {
    System.out.println("I have got " + userType);
}

    } 
```

在我在网上找到的一个例子中，有人说不需要 valueChangeListener 因为 value="#{userBean.userType}" 可以解决问题，但这不是这里的问题，我都试过了，但都没有效果。

值根本没有变化。我知道 bean 在控制台上工作，但在控制台上出现错误：

```
 18:09:26,565 INFO  [stdout] (http-localhost-127.0.0.1-8080-4) I got now WO

    18:09:28,537 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-4) Request method 'POST' not supported 
```

我也得到了页面（如开头所述）：

```
 HTTP Status 405 - Request method 'POST' not supported 
```

我错过了什么？任何注释或某事？我不知道出了什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:27:03.650

1.  如果您使用的是 Spring Webflow，则不建议使用 @ManagedBean 注释 - 您将无法从中访问 Spring bean。请改用@Component('userBean') 和@Scope(value=WebApplicationContext.SCOPE_SESSION)。您需要将 Spring EL 解析器添加到您的配置中，以便 Faces 能够解析您的 Spring bean，请参阅[http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/jsf /el/SpringBeanFacesELResolver.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/jsf/el/SpringBeanFacesELResolver.html)

2.  您无需提交表单即可更新支持 bean 的值。删除 onchange="formUserChange.submit();"。在 JavaScript 中通过 ID 引用 JSF 组件不是一个好习惯，因为这些可能会发生变化。

3.  如果您不需要值更改侦听器，您可以添加 ajax 处理程序以让 selectOneMenu 在更改事件上更新支持 bean：

> ```
> <p:selectOneMenu id="chooseUserType" value="#{userBean.userType}" style="padding: 0px 5px; font-size: 13px; width: 200px;" >
>       <f:selectItem itemLabel="Option 1" itemValue="KO" />
>       <f:selectItem itemLabel="Option 2" itemValue="KJ" />
>       <p:ajax event="change"/>
> </p:selectOneMenu> 
> ```

# php - 在 ExpressionEngine 中以编程方式登录用户的最佳方式是什么

> ID：13073134
> 
> 赞同：8
> 
> 时间：2012-10-25T16:30:47.877
> 
> 标签：php, expressionengine

我正在构建一个应用程序，该应用程序允许该应用程序点击一个 ACT url，然后触发一个模块方法以使用 ExpressionEngine API 创建一个新条目。但是，由于没有用户登录/登录，因此不允许向频道提交条目。

做这个的最好方式是什么。绕过 EE api 并手动提交条目，或以编程方式登录用户..但是这将如何与会话等一起工作？

如果答案是“让用户登录”，那么如果可能的话，看看代码示例会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T09:05:25.283

正如您所提到的，有两种方法可以添加新条目：

1.  手动添加数据库记录
2.  使用频道条目 API (http://expressionengine.com/user_guide/development/api/api_channel_entries.html)

主要区别在于使用 API 添加的条目将：

*   执行所有常见的数据验证（即，标记为必填的字段不能为空）
*   运行已安装的任何 3rd 方扩展
*   使网站统计数据保持最新（例如，作者的帖子数量）

对于简单的通道，手动添加条目相当容易，但如果您使用的是使用附加表的 3rd 方字段类型，则会变得更加复杂。

要登录会员，您只需要：

```
// Get the member's id (the member must have permissions to post entries)
$member_id = 1;

// Create session
$this->EE->session->create_new_session($member_id); 
```

使用频道条目 api 添加条目，然后：

```
// Log user back out
$this->EE->session->destroy(); 
```

当你完成时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T17:02:16.730

您将要查看 ./system/libraries/Auth.php 中的 Auth.php 类。此类是身份验证 API 的抽象，允许您完全按照自己的意愿行事。“以用户身份登录”功能使用这些相同的方法，以及成员模块。

您还可以查看 Authenticate 模块（它是免费的），以便了解其他人如何使用 Auth 类。

[https://objectivehtml.com/authenticate](https://objectivehtml.com/authenticate)

这里有一些伪代码供您使用：

```
// Fetch the member from the DB using whatever logic you need
$this->EE->db->where('username', 'some-username');
$member = $this->EE->db->get('members');

$this->EE->load->library('auth');

// Load a new Auth_result object which logs in the member
$authed = new Auth_result($member->row());
$authed->start_session($cp_session = FALSE);

$member->free_result(); 
```

*这段代码应该可以工作，但我没有时间执行它，这就是它被认为是伪代码的原因。*

我还应该补充一点，我不确定这是否是解决您问题的最佳方法。我只是在回答“如何在不知道用户密码且不提交登录表单的情况下以编程方式登录用户”的问题。

# linux - 使用 unixodbc 连接到 MS Access

> ID：13073135
> 
> 赞同：2
> 
> 时间：2012-10-25T16:30:49.220
> 
> 标签：linux, fedora, unixodbc

我想知道是否有办法连接到 MS Access 数据库 mdb accdb？现在，在安装 EasySoft unixodbc（带有试用许可证）后，当我尝试连接到 base 时，我得到了这个响应：

```
<pre>
SQL Status: HY000
[unixODBC][Easysoft ODBC]General error: OS Version mismatch: Please report this sequence (AAAF, LX, 3, -1, -1) to Easysoft support at support@easysoft.com
</pre> 
```

附加说明：此时我在系统上安装了两个版本的 inuxodbc，一个由 yum 安装，另一个由 Easysoft 安装程序安装，最后一个 odbc.ini 我在下面显示：

```
<pre>
[ACCESS_SAMPLE]
Description=Easysoft ODBC-Access Driver
Driver=Easysoft ODBC-ACCESS
mdbfile=/home/1c/Access/wer.mdb
smbpath=
lockfile=
smblib=
smbuser=
smbauth=
readonly=yes
exclusive=no
ignore_rel=no
</pre> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:08:20.650

[Easysoft ODBC-Access 驱动程序](http://www.easysoft.com/products/data_access/odbc-access-driver/index.html)当前不支持内核 3 。联系 Easysoft 支持并让他们知道错误，如果您使用的是 64 位或 32 位应用程序，他们将能够让您访问支持 Kernel 3 的预发布版本。

# r - 以与“survfit”对象类似的方式生成“coxph”对象的数据表

> ID：13073136
> 
> 赞同：0
> 
> 时间：2012-10-25T16:30:49.777
> 
> 标签：r, cox-regression, survival-analysis

当我使用`summary()`对象`survfit`时，我得到一个不错的 data.frame，其中包含用于

```
time n.risk n.event survival std.err lower 95% CI upper 95% CI 
```

但是`summary()`在一个`coxph`对象上给出了不同的结果。我意识到函数在不同的对象类上的工作方式不同，但是是否有一个命令`coxph`以类似的方式`summary()`工作`survfit`？到目前为止，我无法在文档中找到答案。

谢谢！汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:54:44.717

扩展一下@BenBarnes 评论。

您可以将`coxph`对象（拟合模型的结果）传递给`survfit`函数，它将返回类似于直接使用 survfit 的信息。默认情况下，它会给出一个对应于所有协变量均值的表格（或绘制线，如果你绘制结果），但你也可以给它一个`newdata`包含你想要使用的协变量值的数据框，它会给你一个数据框的每一行的表（绘制的线）。

# java - Java Deflater 输出

> ID：13073144
> 
> 赞同：0
> 
> 时间：2012-10-25T16:31:09.623
> 
> 标签：java, compression, output

在 Java 中，我创建了一个名为 Writer 的类，该类扩展它使用以下内容进行初始化，其中 bos 是一个 ByteOutputStream：

```
this.internalWriter = new Writer(bos, Manager.defaultSize, new      Deflater(Deflater.DEFAULT_COMPRESSION, true)); 
```

稍后我打电话时

```
bos.writeTo(System.out); 
```

一切似乎都正常。但是我注意到，如果我通过将 bos 转换为字节数组来检查实际输出的内容，它总是在任何内容的末尾输出这三个字节，我不知道为什么会发生这种情况……有什么想法吗？这导致我的压缩算法出现问题......

那些令人困惑的三个字节如下：

```
[-27,2,0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:39:56.977

`Writer`java 中的 s 将所有内容都视为 a`String`所以你看到`\r\n\0`的是 DOS 换行符序列，后跟一个字符串终止符。

# bash - Sun OS 5.10：Bash：颜色和目录列表

> ID：13073145
> 
> 赞同：2
> 
> 时间：2012-10-25T16:31:17.713
> 
> 标签：bash, putty, sunos

我在 Windows XP 机器上。我正在使用 putty 0.60 访问运行 SunOS 5.10 的服务器上的 unix 帐户。在我的 .profile 文件中，我有命令“bash”在登录时将我放入该 shell。

我知道在 Linux 中，当我发出命令“ls”时，可以选择以不同颜色显示文件和目录。

可以为在 SunOS 5.10 中运行的 bash 设置相同的东西吗？

非常感谢您提供任何信息。

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:13:40.090

据我了解，solaris 版本`ls`（您在 SunOS 5.10 中默认获得）不支持彩色输出。您必须安装`ls`包含在 coreutils 包中的 gnu 版本。

而不是解释安装包的过程，我会引导你到这个链接：http: [//tille.garrels.be/training/solaris/colorls.php](http://tille.garrels.be/training/solaris/colorls.php)

如果您无法在该服务器上安装软件包，您可能会不走运。hth

# python - 打开网络浏览器并输入数据的脚本

> ID：13073147
> 
> 赞同：1
> 
> 时间：2012-10-25T16:31:20.290
> 
> 标签：python

我不确定这是否可行，但我想知道是否可以编写一个脚本或程序来自动打开我的网络浏览器，转到某个站点，填写信息，然后单击“发送”？如果是这样，我什至会从哪里开始？这是我需要的更详细的概述：

*   打开浏览器
*   去网站
*   填写一系列表格
*   点击确定
*   填写更多表格
*   点击确定

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:33:37.253

为此目的，有许多工具。例如，Selenium 甚至在 PyPI 上有一个带有 Python 绑定的包，它将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:10:52.630

也许你可以使用[zope.testbrowser](http://pypi.python.org/pypi/zope.testbrowser)它真的很容易使用。

# internet-explorer - ie 是否支持第一个孩子和最后一个孩子？

> ID：13073148
> 
> 赞同：1
> 
> 时间：2012-10-25T16:31:25.503
> 
> 标签：internet-explorer, internet-explorer-8, internet-explorer-7, internet-explorer-9, internet-explorer-6

有没有人知道`first-child`并`last-child`支持像 IE6 和 IE7 这样的旧 IE。

我认为在使用 jQuery 时它可以工作，对吗？

只有 CSS 有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:35:32.703

来自[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)：

`first-child`: IE6: 否。 IE7/8: 是的，但有一些警告。IE9+：是的。

`last-child`: IE6/7/8: 没有。 IE9+: 是的。

jQuery 在任何地方都支持它们。

# android - Android : 用 Touch 移动 2 个或更多球

> ID：13073149
> 
> 赞同：2
> 
> 时间：2012-10-25T16:31:27.450
> 
> 标签：android, touch, move

目标是绘制 2 个或更多点并在这些点之间分割线。然后，我们可以通过触摸来移动它们。

无法在 FrameLayout 或其他上通过触摸、2 个或更多球成功移动。

这是我的java文件。

```
public class GraphActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_graph);

        FrameLayout main = (FrameLayout)findViewById(R.id.main_view);

        main.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent e) {
                if (e.getAction() == MotionEvent.ACTION_DOWN) {
                    float x = e.getX();
                    float y = e.getY();
                    ((FrameLayout)v).addView(
                        new Ball(((FrameLayout)v).getContext(),x,y,20));
                }
                return false;
            }
        });        
    }
} 
```

我正在布局上添加球。有用 ！

这是 Ball 的 java。

```
public class Ball extends View {
    private float x;
    private float y;
    private int r;
    private Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

    public Ball(Context context, float x, float y, int r) {
        super(context);
        mPaint.setColor(0xFFFF0000);
        this.x = x;
        this.y = y;
        this.r = r;

        this.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent e) {
                if (e.getAction() == MotionEvent.ACTION_MOVE) {
                    v.setX(e.getX());
                    v.setY(e.getY());
                    return true;
                }
                return false;
            }
        });        
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawCircle(x, y, r, mPaint);
    }    
} 
```

在 MotionEvent 动作上尝试许多其他组合......无法猜测我在哪里失去了对 View 或 Motion 的理解。

感谢帮助。

# php - 在 url (PHP) 中使用变量字符串时没有这样的目录

> ID：13073160
> 
> 赞同：0
> 
> 时间：2012-10-25T16:32:12.637
> 
> 标签：php

好吧，标题可能不是很有帮助。我不确定如何描述这个错误。我确定这是由我的愚蠢行为引起的。但是，对于我的生活，我无法弄清楚。

这就是我想要做的：我的目录“img/gallery”中有一个文件夹列表

在每个文件夹中都有图像

还有一个名为“img/thumbs”的文件夹，其结构完全相同，但带有缩略图

我正在编写一个执行两件事的脚本：它显示“img/gallery”中的文件夹名称，并显示缩略图列表，其中包含指向该文件夹中图像的链接。

这两个组件单独运行时可以正常工作。放在一起，我得到一个错误

`if ($handle = opendir('img/gallery/$file/'))`

说 $file 不是一个有效的目录。

这是代码：

`

```
if ($handle = opendir('img/gallery/')) {
$blacklist = array('.', '..', 'somedir', 'somefile.php');
while (false !== ($file = readdir($handle))) {
    if (!in_array($file, $blacklist)) {
        echo "<h2>$file</h2>\n";
    }
}
closedir($handle);
}

echo "<P class='gallery'>\n";

if ($handle = opendir('img/gallery/$file/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo "<a class='fancybox' href='img/gallery/$file/$entry' data-fancybox-group='gallery'>\n<img src='img/thumbs/$file/$entry' alt='' /></a>\n";
        }
    }

    echo "</p>\n";

    closedir($handle);
} 
```

`

建议会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:37:15.917

opendir 应该返回 true 或 false 但它可能不能很好地与 if 语句一起玩试试这个：

```
$handle = opendir('img/gallery/'.$file.'/');
if ($handle) { 
```

最好将 var_dump 出 $file 值以确保它是正确的。

如果要遍历每个文件夹中的每个文件，肯定需要在第一个循环中嵌套第二个 while 循环......？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:35:21.990

您是否尝试过为变量添加引号？我总是引用我的变量，只是很好的做法。

```
if ($handle = opendir('img/gallery/')) {
$blacklist = array('.', '..', 'somedir', 'somefile.php');
while (false !== ($file = readdir($handle))) {
    if (!in_array($file, $blacklist)) {
        echo "<h2>$file</h2>\n";
    }
}
closedir($handle);
}

echo "<P class='gallery'>\n";

if ($handle = opendir('img/gallery/' . $file . '/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo "<a class='fancybox' href='img/gallery/" . $file . "/" . $entry . "' data-fancybox-group='gallery'>\n<img src='img/thumbs/" . $file . "/" . $entry . "' alt='' /></a>\n";
        }
    }

    echo "</p>\n";

    closedir($handle);
} 
```

# pseudocode - 奇数求和，偶数求和

> ID：13073161
> 
> 赞同：0
> 
> 时间：2012-10-25T16:32:19.047
> 
> 标签：pseudocode

编写算法的伪代码，读取不同于零的数字序列，计算偶数和奇数之和。**（我们不知道我们必须阅读多少个数字）** <-这部分对我来说是有问题的。我假设 A 是数组。

```
ALGOR(A)
even <-- 0
odd <--- 0
for i <-- 1 to **???**
    n = A[i]
while n > 0
        do n <-- n - 2
if n = 0
    then even <-- even + n
else 
    do odd <-- odd + n
write(Odd's sum: ), write(odd), write(\n), write(Even's sum: ), write(even) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:47:08.017

use a while construct to collect your input - not a for. Break the loop when you get something that isn't a number.

# jquery - Jquery 将 HTML 文本复制到电子邮件浏览器中

> ID：13073162
> 
> 赞同：0
> 
> 时间：2012-10-25T16:32:25.610
> 
> 标签：jquery, asp.net, email

所以我有以下问题。

目前我正在从 CMS 输出 HTML 文本，这个 HTML 是一个自定义的电子邮件模板。这是一个简单的

```
<p>Hi</P>
<p>THis is your URL : http://www.yoursite.com?id=15151</p>
<p>Thanks</p>
<p>Company X</p> 
```

我们正在将其输出到屏幕上。

我正在寻找的是一个名为“复制”的排序 jquery 按钮，它复制上面的文本，他们可以稍后粘贴到电子邮件中并保持格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:41:57.737

（对于跨浏览器复制到剪贴板，这可能是一个重复的问题：[如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)）

使用这个库[https://github.com/jonrohan/ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)，（在上面的帖子中提到），您希望将要复制的源文本包装在带有 ID 的东西中，如下所示：

```
<div class="emailText">
    <p>Hi</P>
    <p>THis is your URL : http://www.yoursite.com?id=15151</p>
    <p>Thanks</p>
    <p>Company X</p>
</div> 
```

然后，在为库设置文本的 Javascript 调用中，您将执行以下操作：

```
<script language="JavaScript">
  var clip = new ZeroClipboard.Client();
  clip.setText( $(".emailText").html() );
  clip.glue( 'd_clip_button' );
</script> 
```

# python - 使用 APScheduler 时，IIS 后面的 Pyramid（女服务员）随机停止工作

> ID：13073163
> 
> 赞同：2
> 
> 时间：2012-10-25T16:32:32.227
> 
> 标签：python, iis, cron, pyramid, waitress

我在 Windows 上运行 Pyramid 应用程序，使用[Waitress](http://docs.pylonsproject.org/projects/waitress/en/latest/)作为应用服务器，IIS 作为 Web 服务器（代理）。当我运行该应用程序时，它会在（看似）随机的时间内工作，然后才会停止。它可以持续几天，甚至几周，然后停止，让 IIS 抛出 502 错误。当它停止时，除了重新启动 Windows 之外，没有办法重新启动它。

这是一个小型应用程序，它使用 APScheduler 访问几个 API 以在 eBay/Amazon 之间同步库存。我不完全确定是什么导致了这个问题，因为日志中没有显示错误。我有一个旧版本的应用程序正在运行（没有 APScheduler）并且我没有遇到这个问题，所以我假设它与 APScheduler 有关。

有没有其他人经历过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:58:44.923

首先让我说我自己还没有使用过 APScheduler，并且对在 Windows 和 IIS 上运行 Python 服务器（或其他任何东西）几乎一无所知。
所以我只能在这里猜测，但很明显你的问题在某种程度上与 APScheduler 有关。我可以想象 APScheduler 用于您的后台任务的线程出现问题，并且由于 GIL（Python 中的全局解释器锁），挂起的线程会导致您的整个应用程序崩溃。例如，当您的线程遇到某种竞争条件时，可能会发生这种情况。也许在前一次迭代完成处理之前开始处理。或者你得到一个非常大的积压，这会在处理开始时导致问题。

无论如何，我认为任务队列更适合 Web 应用程序的后台处理，因为它们是独立运行的，并且脱离了 Web 服务器的上下文。您可以在某个用户操作触发后立即安排任务，一旦有工作人员可用，它就会被处理，并且不会推迟到某个时间点。
我建议尝试一下[Celery](http://celeryproject.org/)，但也有其他可用的解决方案，其中许多基于 Redis。

Celery 非常强大，并且具有周期性任务和 crontab 样式计划等高级功能 - 所以您现在可以使用它来执行您正在使用 APScheduler 执行的操作。

这看起来对在 Windows 下设置 Celery 很有帮助：http: [//mrtn.me/blog/2012/07/04/django-on-windows-run-celery-as-a-windows-service/](http://mrtn.me/blog/2012/07/04/django-on-windows-run-celery-as-a-windows-service/)
这也可能有帮助: [如何创建 Celery Windows 服务？](https://stackoverflow.com/questions/9378932/how-to-create-celery-windows-service)
注意：我自己没有尝试过任何这些，因为如果我有选择的话，我会使用 Linux。

也可能让 APScheduler 正常工作，但我认为使用 Celery 会容易得多，因为如果工作人员出现问题，您将能够比后台线程中出现的问题更容易地调试它。Celery 还可以配置为在出现错误时自动向您发送电子邮件。

# javascript - 使用 javascript/jquery 在子字符串中查找关键字 - 我的代码中出现类型错误

> ID：13073166
> 
> 赞同：0
> 
> 时间：2012-10-25T16:32:43.973
> 
> 标签：javascript, jquery, typeerror

我需要创建一个脚本，该脚本将根据关键字列表过滤掉内容（如果内容包含这些关键字之一，我想对其应用样式）。

到目前为止，我有这个代码：

```
jQuery.expr[':'].mcontains = function(obj, index, meta, stack){
    result = false;     
    theList = meta[3].split("','");

    var contents = (obj.textContent || obj.innerText || jQuery(obj).text() || '')

    for (x=0;x<theList.length;x++) {
        if (contents.toLowerCase().indexOf(theList[x].toLowerCase()) >= 0) {
            return true;
        }
    }

    return false;
};

$("div:mcontains('facer','non')").css("background","red") 
```

我自己没有写这个，我在网上找到了它，但我让它工作得很好，就像我在小提琴中需要的那样：http: [//jsfiddle.net/jtmVf/1/](http://jsfiddle.net/jtmVf/1/)

但是，当我尝试将其移植到项目中时，我在 firebug 中收到此错误：

```
TypeError: meta is undefined 
```

在这条线上：

```
theList = meta[3].split("','"); 
```

我不确定为什么它在那里未定义，但没有在小提琴上抛出错误？没有冲突（我删除了除 jquery.min 之外的所有其他 js 以查看是否是问题所在）。

我希望这里有人能够看到我缺少的东西，这个脚本有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:48:59.507

在您分配“元”数组内容的位置发布您的代码。因为这些类型的错误通常会在数组中没有这样的索引时显示

# objective-c - BarButtonItem 因未知原因调整大小

> ID：13073170
> 
> 赞同：0
> 
> 时间：2012-10-25T16:32:57.473
> 
> 标签：objective-c, ios, uibarbuttonitem

我有一个这样初始化的按钮>

```
self.button = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone 
                                                            target:self 
                                                            action:@selector(doAction)]; 
```

后来，我给它附加了一个自定义背景，就像那样>

```
 [self.button  setBackgroundImage:[UIImage imageNamed:@"customNavBar_button_right_enabled"] 
                            forState:UIControlStateNormal 
                          barMetrics:UIBarMetricsDefault]; 
```

并将其放在导航栏上。

```
 [self.navigationItem setRightBarButtonItem:self.button 
                                     animated:NO]; 
```

此图像具有固定大小。我希望该按钮具有完全自定义的背景图像，没有使用 UIEdgeInsets 调整大小的“智能”。我不想要任何调整大小。但是由于某种原因，它的行为就像它的 insets 会处于活动状态，并且它被调整为具有更大的宽度，大约图片的中间一半被大大拉伸以提供更宽的按钮。

为什么会这样？我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:46:25.237

The easiest way to achieve a bar button item with a custom image is by:

1.  Drag a UIButton onto the storyboard.
2.  Set the button Type to Custom and set your image for that button.
3.  Drag the button onto your Toolbar.

The storyboard automatically creates a UIBarButtonItem and adds your UIButton as a subview. Or if you do NOT want to use storyboards you could implement the following:

```
// Initialize the UIButton
UIImage *buttonImage = [UIImage imageNamed:@"buttonImage.png"];
UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
[aButton setImage:buttonImage forState:UIControlStateNormal];
aButton.frame = CGRectMake(0.0, 0.0, buttonImage.size.width, buttonImage.size.height);

// Initialize the UIBarButtonItem
UIBarButtonItem aBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:aButton];

// Set the Target and Action for aButton
[aButton addTarget:self action:@selector(aButtonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

Hope it helps!

EDIT: Do not forget to add the aBarButtonItem to the UIToolbar.

# git - 从已转换为 Git 的 SVN 存储库下载修订版

> ID：13073178
> 
> 赞同：0
> 
> 时间：2012-10-25T16:33:36.953
> 
> 标签：git, svn, moses

我必须下载特定版本的软件 (Moses) 才能运行另一款软件。

安装脚本尝试运行

> svn co [https://mosesdecoder.svn.sourceforge.net/svnroot/mosesdecoder/trunk](https://mosesdecoder.svn.sourceforge.net/svnroot/mosesdecoder/trunk) moses -r 3284

然而，Moses 已将其存储库转换为 Git。

虽然希望保留修订号（否则我会搞砸），下载此版本的等效 Git 命令是什么？Moses 现在托管在 GibHub [https://github.com/moses-smt/mosesdecoder](https://github.com/moses-smt/mosesdecoder)上。

我试图查看 Git 的文档，但我发现它有一个很好的学习曲线，因为它与 SVN 完全不同（我对此非常了解）。我只需要从 Git 下载特定的修订版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:32:50.833

由于该存储库是使用 git-svn 转换的，并且在日志中有 git-svn-id 行，因此您可以使用它们来识别与该 svn 修订号匹配的 git 提交。您应该能够使用以下命令签出该提交：

```
git clone https://github.com/moses-smt/mosesdecoder.git
cd mosesdecoder
git checkout -b mybranch ':/git-svn-id.*@3284 ' 
```

这将创建一个名为`mybranch`（我建议选择更具描述性的名称）的新分支，该分支与该 svn 修订版匹配，然后将该分支签出到您的工作树中。这是有效的，因为这`:/`是一种指定日志消息与以下正则表达式匹配的最新提交的方法。

`git-revparse`手册页包含有关指定 git 提交的此方法和其他方法的信息。

# jquery - PhoneGap 和对 RESTful API 的不同 HTTP 方法请求

> ID：13073179
> 
> 赞同：4
> 
> 时间：2012-10-25T16:33:38.403
> 
> 标签：jquery, cordova, cross-domain, cors, http-method

我正在使用 PhoneGap 构建一个移动应用程序，我需要它来适应我的服务 RESTful api。

基本上，如果我想检索/删除/更新/检查/（非幂等操作）资源，则通过 jQuery 的 ajax 方法向 http://example.com/resource/:id 发出 GET/DELETE/PUT/HEAD/ POST[请求](http://example.com/resource/:id)支持的。这就是我遇到问题的地方。

由于PhoneGap 保存文件并在本地提供它们（例如：file://file.html），我将在ajax 调用中遇到跨域问题。此外，我了解 JSONP 基本上是将脚本插入到文档中，因此是一种请求方法的解决方案

这里有一些想法：

1.  不是请求 JSON 或 JSONP 数据类型，而是请求 HTML 工作，然后将文档响应解析为 JSON 对象？
2.  对于每个请求，在页面中创建和删除一个 iFrame，如这张海报[Using PUT/POST/DELETE with JSONP and jQuery](https://stackoverflow.com/questions/5345493/using-put-post-delete-with-jsonp-and-jquery)（感觉肮脏和不雅）
3.  带有用户名/密码或令牌的某种形式的服务器端 CORS 与请求一起发送以允许这样做（我首先在 iOS 上推出）
4.  其他一些我无法创造性地使用的策略。

这个问题最优雅的解决方案是什么？欢迎使用插件。

TL;DR：如何为不同 HTTP 方法的 $.ajax 请求添加跨域支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:21:11.393

您必须在 PhoneGap 属性中将您的服务器列入白名单。默认情况下，PhoneGap 会限制对外部站点的访问，以防止出现安全问题。PhoneGap 没有标准 http 托管站点等跨域问题。阅读此处了解详细信息： http: [//docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

# android - 设置 android:layout_column = "1" 时 TableLayout 不跳过第 0 列

> ID：13073180
> 
> 赞同：1
> 
> 时间：2012-10-25T16:33:44.260
> 
> 标签：android, android-layout, android-xml, android-tablelayout

此站点上的 xml 代码：http: [//www.learn-android.com/2010/01/05/android-layout-tutorial/6/](http://www.learn-android.com/2010/01/05/android-layout-tutorial/6/) 给出了图像中显示的表格布局。

[http://www.learn-android.com/wp-content/uploads/2010/01/TableLayout.png](http://www.learn-android.com/wp-content/uploads/2010/01/TableLayout.png)

但是，如果您删除第一个表格行，那么 First Name textview 会出现在第 0 列中，即使它的 android:column_layout 设置为“1”

但是在这个网站上：http: [//developer.android.com/reference/android/widget/TableLayout.html](http://developer.android.com/reference/android/widget/TableLayout.html)它说“如果你跳过一个列号，它将被认为是该行中的一个空单元格。”

如果你想在行中有一个空单元格，你必须用一些东西填充它还是设置它的宽度？

有没有更好的方法让屏幕中间的东西像表格行一样隔开？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:04:33.190

所以，空单元格就在那里，它只是没有宽度。如果没有非零宽度的东西，它看起来就像没有第 0 列。为了让它占用一些空间，那里需要有一些东西，即使它只是一个设置了宽度的空视图。

`android:layout_gravity="center"`如果您希望事物居中，则使用 RelativeLayout 并使用其中一个或`android:layout_gravity="center_horizontal"`将事物对齐在屏幕中心可能是有意义的。

# javascript - 我可以使用 jQuery 的 deferred.pipe 方法来修改提供给已解决/失败回调的参数吗？

> ID：13073181
> 
> 赞同：5
> 
> 时间：2012-10-25T16:33:46.347
> 
> 标签：javascript, jquery, backbone.js, jquery-deferred

我希望能够使用 jQuery 的 Deferred 对象通过 Backbone 集合和模型来操作加载数据。有什么方法可以修改提供给 done 和 fail 回调的参数以包含 Model 或 Collection 实例？我正在设想如下内容：

```
var _sync = Backbone.sync;

Backbone.sync = function() {
    var jqXhr = _sync.apply(this, arguments);

    var self = this;
    return jqXhr.pipe(function() {
        var cbArgs = [self];
        cbArgs.push.apply(cbArgs, arguments);
        return cbArgs; 
    }
}

...
var c = new Backbone.Collection();
c.url = "/path/to/resources";
c.fetch().then(function(collection, data, textStatus, jqXhr) {
    // do stuff with collection
}); 
```

当然，由于 filter 返回一个数组，所以 done 回调是用一个数组调用的，而不是枚举的参数。据我所知，管道只能修改提供的参数，不能添加。任何建议，将不胜感激。

编辑：这是一个非常简化的例子；由于在原始集合上创建了一个闭包，因此我可以对其进行操作。但是，用例是多个 Backbone 视图可能依赖于获取的相同数据，因此我希望能够仅将 jQuery Deferred 对象提供给这些视图，而不是同时提供 Deferred 和集合实例。

另一个编辑：在下面发布了一个解决方案，但欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:10:18.010

我发现我可以通过让 .pipe 方法返回一个新的 $.Deferred 来实现这一点，该新的 $.Deferred 可以使用修改后的参数立即解决：

```
var _sync = Backbone.sync;

Backbone.sync = function() {
    var jqXhr = _sync.apply(this, arguments);

    var self = this;
    var deferred = jqXhr.pipe(function() {
        var cbArgs = [self];
        cbArgs.push.apply(cbArgs, arguments);
        var deferred = new $.Deferred();
        return deferred.resolve.apply(deferred, cbArgs);
    });
    return $.extend(true, jqXhr, deferred);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:46:27.600

一个与您的答案非常相似的解决方案，但没有管道，因为您实际上不需要过滤结果：我直接从 Backbone.sync 返回一个新的延迟，而不是管道一个已解决的延迟

```
Backbone.originalSync = Backbone.sync;
Backbone.sync = function(method, model, options) {
    var xhr = Backbone.originalSync.call(this, method, model, options);

    var dfd = $.Deferred();
    xhr.done(function() {
        var cbArgs = [model].concat(_.toArray(arguments));
        dfd.resolve.apply(dfd, cbArgs);
    });
    xhr.fail(function() {
        var cbArgs = [model].concat(_.toArray(arguments));
        dfd.reject.apply(dfd, cbArgs);
    });

    return dfd;
}; 
```

还有一个小提琴[http://jsfiddle.net/d8FqA/](http://jsfiddle.net/d8FqA/)

如果您愿意`this`在回调中绑定到模型/集合，则可以使用更简单的变体，从而保持函数签名不变：

```
Backbone.originalSync = Backbone.sync;
Backbone.sync = function(method, model, options) {
    var xhr = Backbone.originalSync.call(this, method, model, options);

    var dfd = $.Deferred();
    xhr.done(function() {
        dfd.resolveWith(model, arguments);
    });
    xhr.fail(function() {
        dfd.rejectWith(model, arguments);
    });

    return dfd;
};

var c=new Backbone.Collection();
c.fetch().done(function() {
    console.log(this);
    console.log(arguments);
}); 
```

[http://jsfiddle.net/d8FqA/1/](http://jsfiddle.net/d8FqA/1/)

这导致我们将模型作为上下文传递给 Ajax 请求：

```
Backbone.originalSync = Backbone.sync;
Backbone.sync = function(method, model, options) {
    options || (options={}) ;
    options.context = model;
    return Backbone.originalSync.call(this, method, model, options);
};

var c=new Backbone.Collection();
c.fetch().done(function() {
    console.log(this);
}); 
```

[http://jsfiddle.net/d8FqA/2/](http://jsfiddle.net/d8FqA/2/)

# php - 错误处理带有消息 SWbemLocator 的未捕获异常“com_exception”。描述：访问被拒绝

> ID：13073183
> 
> 赞同：2
> 
> 时间：2012-10-25T16:33:50.407
> 
> 标签：php, com, wmi

我正在连接到远程服务器以获取一些 WMI 信息

```
$wmiLocator = new COM('WbemScripting.SWbemLocator');
$obj = $wmiLocator->ConnectServer($host, 'root\cimv2', $user, $pass);
$Printers =    $obj->ExecQuery("Select * from Win32_Printer"); 
```

用户名和密码由用户输入。我现在想确保他在运行查询之前正确输入了他的凭据，因为否则我会收到以下错误消息：

> 致命错误：未捕获的异常“com_exception”和消息“**来源：** SWbemLocator
> **描述：**访问被拒绝。' 在 test.php 中

有人知道如何捕捉这个或如何事先检查访问吗？

谢谢

# asp.net - 将 persistentCookiesOnPassiveRedirects 设置为 true 有什么实际作用？

> ID：13073184
> 
> 赞同：5
> 
> 时间：2012-10-25T16:33:55.610
> 
> 标签：asp.net, wif

使用 WIF 时，客户端可以设置`persistentCookiesOnPassiveRedirects`默认为 false。这是提供的定义：

> persistentCookiesOnPassiveRedirects：指定在启用模块以启动 WS-Federation 被动协议重定向时是否发出持久 cookie。持久性 cookie 将比用户会话更持久。

好的，这听起来很清楚，但我仍然不明白，并且更改 true/fasle 之间的值似乎没有任何区别。*它是否与在信任相同*STS 提供程序的单独浏览器中拉取另一个站点并使其用户不必再次登录有关？

我想一个站点和 STS 一起工作的示例将非常有助于准确解释此设置的作用。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:00:29.500

这意味着 WIF 发布的***FedAuth*** cookie 将是持久的（而不是绑定到用户会话）。如果您关闭浏览器并再次打开它，cookie 仍会发送到您的站点，并且不会发生令牌协商（您不会被重定向到 STS）。

如果为 false，则每次关闭浏览器并再次打开时都会触发协商，因为没有令牌了。（Cookies 是 WIF 存储安全令牌信息的地方）。

请注意，STS 本身也会发出 cookie（与您的应用程序不同）并且这些 cookie 可能是持久的，因此即使您将标志设置为 false，实际身份验证也可能不会发生第二次。

另请注意，WIF 可以选择将所需的信息存储在其他地方（服务器端）。

最后但并非最不重要的一点是，令牌可能会过期，在这种情况下，无论标志如何，都会触发协商。

# windows - 批处理将几个 .txt 文件的最后一行复制到 1 个新的 .txt 文件中，并在新行上附加文件名

> ID：13073186
> 
> 赞同：1
> 
> 时间：2012-10-25T16:33:56.740
> 
> 标签：windows, batch-file, cmd

我发现之前的一篇文章给出了这个答案的一部分，用目录中每个文件的最后一行创建新文件，如下所示：

```
@echo off
for %%f in (*.log) do (
    set /a line_count = -1
    for /f %%l in (%%f) do set /a line_count += 1
    more +%line_count% %%f
) 
```

如果您的文件不以换行符结尾，则必须将 line_count 变量初始化为 0 而不是 -1。

您可以重定向更多的输出以将结果附加到文件中：

```
more +%line_count% %%f >> your_results_file 
```

* * *

我现在需要帮助的是找出一种方法将 .txt 文件的文件名附加到新文件中的最后一行，因此对于每个文件，这将是文件名最后一行在目录中。

这是任何人都可以帮助的吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:50:46.733

你可以

```
@echo off
setlocal enabledelayedexpansion
for %%f in (*.log) do (
    set /a line_count = -1
    for /f "tokens=*" %%l in (%%f) do (
       set /a line_count += 1
       set value=%%l
       set file=%%f
    )
    echo line_count=%line_count% value=!value! file=!file!
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:21:53.117

My two examples do not copy the last few lines of a text file to another file, but it can be used to do so.

My examples instead work like the Linux command `TAIL`, and displays the last few lines instead.

After a little experimentation, I've found the following to be the fastest method for displaying the last few lines of a file. The drawback being, of course, that `FOR` will skip blank lines.

`TAIL.BAT`

```
@echo off
setlocal enabledelayedexpansion
set "fn=%~1"
set "fn=%fn:(=^(%"
set "fn=%fn:)=^)%"
if "%~2"==""    set count=1
if "%~2" neq "" set count=%~2
(
  for /f "tokens=3" %%x in ('find /c /v "" %fn%') do set count=%%x
  set /a count=!count!-%count%
)
echo.
for /f "skip=%count% tokens=*" %%x in (%fn%) do echo %%x 
```

`%1` is the filename
`%2` is an option number of lines to display. If left blank, `TAIL.BAT` shows the last line.

* * *

To determine which of the two methods were faster, the `FOR`, or the `MORE` method, I created the following (With a lot of remarks). I include it so that you can test it for yourself.

Note that the largest part of this example is the elapsed time calculation:

`TESTTAIL.BAT`

```
@echo off
:: 
:: :::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: 
:: TAIL.BAT filename [linesToShow [/v]]
:: 
:: LINESTOSHOW = Number of lines at the end of the file
::               to display. If this is left blank TAIL
::               assumes that you only want the last line
::
:: /v          = Show the math, must be used with LINESTOSHOW
::               Without this switch, the time to complete
::               will be displayed, but not the math.
:: 

setlocal enabledelayedexpansion
set "fn=%~1"                   & :: Get File Name
set "fn=%fn:(=^(%"             & :: Escape Left  Brackets
set "fn=%fn:)=^)%"             & :: Escape Right Brackets
if "%~2"==""    set count=1    & :: Assume Last Line
if "%~2" neq "" set count=%~2  & :: Specify # of Lines to show

( :: Count Lines in File
  for /f "tokens=3" %%x in ('find /c /v "" %fn%') do set count=%%x
  :: Subtract # to skip from lines in file
  set /a count=!count!-%count%
)

:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
:: ::  Get last %Count% lines of file using MORE+  :: ::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
echo.
set start=%time%               & :: Get Start Time
more +%count% %fn%             & :: Show the last %count% lines
set end=%time%                 & :: Get End Time

call :Elapsed %end% %start% %3 & :: Calculate Time Elapsed

:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
:: ::   Get last %Count% lines of file using FOR   :: ::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
set start=%time%               & :: Get Start Time
for /f "skip=%count% tokens=*" %%x in (%fn%) do echo %%x
set end=%time%                 & :: Get End Time

call :Elapsed %end% %start% %3 & :: Calculate Time Elapsed

endlocal
goto :eof

:Elapsed
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
::                Calculate Elapsed Time              ::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
echo.
if "%3"=="/v" ECHO        Start :  %1
if "%3"=="/v" ECHO        End   : -%2
if "%3"=="/v" ECHO                =============

for /f "tokens=1-8 delims=:.%tab% " %%a in ("%1 %2") do (
  set "hh= %%a - %%e "
  set "mm= %%b - %%f "
  set "ss= %%c - %%g "
  set "ms= %%d - %%h "
)

set   "hh=%hh: 0=%"
set /a hh=%hh%
set   "mm=%mm: 0=%"
set /a mm=%mm%
set   "ss=%ss: 0=%"
set /a ss=%ss%
set   "ms=%ms: 0=%"
set /a ms=%ms%

if %ms% lss 0 (
  set /a ms=100+%ms%
  set /a ss-=1
)
if %ss% lss 0 (
  set /a ss=60+%ss%
  set /a mm-=1
)
if %mm% lss 0 (
  set /a mm=60+%mm%
  set /a hh-=1
)
if %hh% lss 0 set /a hh=24+%hh%

if %hh% lss 10 set hh=0%hh%
if %mm% lss 10 set mm=0%mm%
if %ss% lss 10 set ss=0%ss%
if %ms% lss 10 set ms=0%ms%

echo Completed in :  %hh%:%mm%:%ss%.%ms%
echo.

goto :eof 
```

Here is an example of the above code running on my machine, notice I specify the last 5 lines:

```
D:\Misc>testtail 2012-10-25(9).MIME 5 /v

MDAwMDAgbg0KMDAwMDA5NTQwOCAwMDAwMCBuDQp0cmFpbGVyDQo8PA0KL1NpemUgMzUNCi9Sb290
IDMzIDAgUg0KL0luZm8gMzAgMCBSDQovSUQgWzwxM0NBMjNBRjhFMTk2RkEyOTRGMThFM0I3QTJC
QkNFNj48N0I5OUE4NTkxOEE1MzgzQjY3NTY5OUMxNkFEQTA3RUQ+XQ0KPj4NCnN0YXJ0eHJlZg0K
OTcyNDMNCiUlRU9GDQo=
---915665055-1601124504-1351078287=:50774--

       Start :  15:30:57.11
       End   : -15:30:56.96
               =============
Completed in :  00:00:00.15

MDAwMDAgbg0KMDAwMDA5NTQwOCAwMDAwMCBuDQp0cmFpbGVyDQo8PA0KL1NpemUgMzUNCi9Sb290
IDMzIDAgUg0KL0luZm8gMzAgMCBSDQovSUQgWzwxM0NBMjNBRjhFMTk2RkEyOTRGMThFM0I3QTJC
QkNFNj48N0I5OUE4NTkxOEE1MzgzQjY3NTY5OUMxNkFEQTA3RUQ+XQ0KPj4NCnN0YXJ0eHJlZg0K
OTcyNDMNCiUlRU9GDQo=
---915665055-1601124504-1351078287=:50774--

       Start :  15:30:57.16
       End   : -15:30:57.15
               =============
Completed in :  00:00:00.01

D:\Misc> 
```

As you can see, there is a large speed difference between the two, with the `FOR` method dramatically faster than `MORE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T23:00:08.943

哦，天哪——不要使用 FOR 循环来计算文件中的行数——这很慢而且不可靠。它将跳过空行，也可以跳过以 EOL 字符开头的行，除非您禁用 EOL。

用于`FIND /C`计算行数。带有该选项的空搜索字符串`/V`将匹配所有行。

使用 SET /P 打印文件名而不发出换行符。

```
@echo off
setlocal enableDelayedExpansion
>output.txt (
  for %%F in (*.log) do (
    <nul set /p "=%%F: "
    for /f %%N in ('type "%%F"^|find /c /v ""') do set /a skip=%%N
    if !skip! gtr 0 set /a skip-=1
    more +!skip! "%%F"
  )
) 
```

如果任何文件名包含`!`，则必须打开和关闭延迟扩展

```
@echo off
setlocal disableDelayedExpansion
>output.txt (
  for %%F in (*.bat) do (
    set "file=%%F"
    setlocal enableDelayedExpansion
    <nul set /p "=!file!: "
    for /f %%N in ('type "!file!"^|find /c /v ""') do set /a skip=%%N
    if !skip! gtr 0 set /a skip-=1
    more +!skip! "!file!"
    endlocal
  )
)
type output.txt 
```

# android - 是否可以“优雅地降级”一个 android 应用程序？

> ID：13073190
> 
> 赞同：7
> 
> 时间：2012-10-25T16:34:06.580
> 
> 标签：android, graceful-degradation

我想知道是否可以在 Android 应用程序中使用优雅降级方法。即，使用 API 15 的某些功能，但如果不支持，请改用 API 10。

具体来说，我在 Android 4 中有“滑动标签”，而在 Android 2.x 中缺少对这个功能的支持（因此使用普通标签），但这个问题相当笼统。

我想在支持它的设备上使用高级功能，但当它不受支持时，我想使用替代方法。我似乎无法在 Android 2 项目中使用 Android 4 库，而 Android 4 项目将无法在 Android 2 设备上启动，这是可以理解的。

有什么解决办法吗？或者，至少就目前而言，Android 2 上的“滑动标签”有什么解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:44:26.017

第 1 部分：为了能够为较新的 API 使用功能，请确保您的清单将您的 android:minSdkVersion 声明为最低版本（在您的情况下为 10），但将 android:targetSdkVersion 设置为您要使用的 API 的较新版本(15)。在您的代码中，您可以执行类似的操作

```
if ( Build.VERSION.SDK_INT > Build.VERSION_CODES.ICE_CREAM_SANDWICH ) {
    // Use the new APIs
} else {
    // Use the old APIs
} 
```

您必须添加一个注释来指示新的 API 用法。

第 2 部分：滑动选项卡 - 我使用了 Jake Wharton 的 ViewPagerIndicator 和 Android 支持库中的 ViewPager 功能来实现滑动选项卡。这很简单。[ViewPagerIndicator](http://viewpagerindicator.com/)页面上有更多信息

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T12:07:06.830

确保在仅适用于较新版本 API 的类或函数上方使用 @TargetApi 指令。例如

```
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
void foo() {

  /* function called only on ice cream sandwich (API level 14) and greater */

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T12:20:34.933

我知道你已经标记了你的答案，但这[可能](http://actionbarsherlock.com/)会对你有所帮助，它是一个名为 actionbar sherlock 的 android 库，它已将 4.x 功能反向移植到 2.x。包括 Fragments、pagers、tabs 和 3.0 中引入的 Actionbar

# javascript - JavaScript For 循环追加 4 次

> ID：13073192
> 
> 赞同：1
> 
> 时间：2012-10-25T16:34:12.130
> 
> 标签：javascript, jquery

我有一个无法正常运行的 JavaScript 程序。由于某些原因，在它附加它实际上从选中的单选框获得的内容之前，它附加了三次，并在附加中注明除了样式。我不确定我做错了什么。

```
$(document).delegate('#add-owner', 'pageinit', function () {
            loadOwners();
            $('#add-owner-save').bind('click', function () {
                var permission = $('#editing-permissions option:selected').text();
                var selection = $("input[type='radio']:checked") || [];
                if (selection.length > 0) {
                    for (var i = 0; i < selection.length; i++) {
                        console.log($('#label-' + selection[i].id).find('.owner-name').text());
                        console.log($("input[type='radio']:checked").val());
                        $('.display-owners').append('<div class="ui-grid-a"><div class="ui-block-a">' + $('#label-' + selection[i].id).find('.owner-name').text() + '</div><div class="ui-block-b" style="text-align:right">' + permission + '</div></div>');
                    }
                    $('.display-owners').trigger('create');
                }
                $('.display-owners').show();
                $('#add-owner').dialog('close');
                $('input[name=contribute-radio]').attr('checked', false).checkboxradio("refresh");
                return false;
            });
        }); 
```

我认为问题在于我在此页面上有多个无线电区域。如何指定我只希望这些单选按钮是我想要检查的那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:37:48.067

这段代码：

~~... + $('#label-' + selection[i].id).find('...~~

应该是这样的：

```
... + $('#label-' + selection[i].attr('id')).find('... 
```

~~因为您在`selection`数组中拥有的是 jQuery 对象，而不是 DOM 元素对象。~~

感谢**Esalija**指出我的假设不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:00:41.317

既然说你有多组单选按钮，你正在使用的选择器会在页面上找到所有这些单选按钮，这就是为什么你有多个“选中”单选按钮的原因。

这：

```
var selection = $("input[type='radio']:checked") || []; 
```

对此：

```
var selection = $("input[name='radioset1']:checked") || []; 
```

然后只需将每个无线电装置命名为不同的名称，并将“radioset1”替换为您需要的无线电装置。

# php - 无法更改 PHP Switch Case URL

> ID：13073200
> 
> 赞同：1
> 
> 时间：2012-10-25T16:34:46.433
> 
> 标签：php, .htaccess, url-rewriting, switch-statement

这一直困扰着我一段时间。我的网站上有一些页面使用 PHP 切换案例来更改页面的内容。我遇到的问题是这些页面的 URL 对 SEO 不是很友好。

我想改变这个：

`http://www.abcprintingink.com/printing.php?page=print-and-mail`

对此：

`http://www.abcprintingink.com/printing.php/print-and-mail`或更好

`http://www.abcprintingink.com/printing/print-and-mail`

我已经尝试过 .htaccess 并且没有任何效果。这是我在 .htaccess 中尝试过的：

```
RewriteEngine On
#RewriteRule ^web.php/([^-]*)$ /web.php?page=$1 [QSA]

#RewriteRule ^/web.php/?page\=(.*)$ /web.php?page=$1 [l]

RewriteRule ^web.php/(.*)$ /web.php?page=$1 [l]

RewriteRule ^web.php/([a-zA-Z0-9\-/\.]+)/?$ web.php?page=$1 [L] 
```

.htaccess 中的其他命令有效，所以我知道它不是文件或网络服务器。

这是printing.php中的switch语句

```
<?php
        /* SEO Switch Statements */
        $pagename = "printing";
        $page = htmlspecialchars($_GET["page"]);

        switch ($page) {
case 'print-and-mail':
                $page_title = 'page title';
                $page_description = 'page desc';
                $page_nav_active = 'print-and-mail';
                $page_content_copy = 'page text';
                $template_slider_image = 'image';
                break;
}
?> 
```

此外，这是链接页面的菜单背后的脚本。

```
 <?php $menu=count($navigation); for ($i=0; $i<$menu; $i++) 
{ echo '<div><li class="navigation"><a href="?page='.$navigation[$i].'">'
.$replaced = str_replace("-", " ", $navigation[$i]).'</a></li></div>'; } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:50:49.453

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.+) - [PT,L]

## 301 redirect, http://www.abcprintingink.com/printing.php?page=print-and-mail
## to http://www.abcprintingink.com/printing/print-and-mail
RewriteCond %{QUERY_STRING} ^page=(.*)$
RewriteRule ^printing\.php$ /printing/%1? [R=301,L]

## makes /printing/print-and-mail actually work
RewriteRule ^printing/(.*)$ /printing\.php?page=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:48:38.207

您可以尝试的一种可能性是将所有信息发送到诸如 index.php 之类的核心文件，然后从其提供正确的数据

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

解析 index.php 中的 URL，然后通过 include 语句引入数据并填充 $_GET 数组，或者调用模板并从数据库中填充变量。

这将是我会这样做的方式 - 可能是在花了数周时间试图让正则表达式正确之后。主要是因为正则表达式和 htaccess 很少做我想让他们做的事情（我自己的限制而不是正则表达式的限制）。

# matlab - Matlab 中的作用域是如何工作的？

> ID：13073201
> 
> 赞同：14
> 
> 时间：2012-10-25T16:34:52.830
> 
> 标签：matlab, scope

我刚刚发现（令我惊讶）调用以下函数

```
function foo()
if false
   fprintf = 1;
else
  % do nothing
end
fprintf('test') 
```

给出和错误`Undefined function or variable "fprintf"`。我的结论是变量的范围是在运行前确定的（在我有限的理解计算机语言的解释，特别是 Matlab 的工作原理中）。谁能给我一些这方面的背景信息？

**编辑**

我上面忘记提到的另一个有趣的事情是

```
function foo()
if false
   fprintf = 1;
else
  % do nothing
end
clear('fprintf')
fprintf('test') 
```

产生`Reference to a cleared variable fprintf`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T18:27:07.160

MATLAB 在函数运行之前对其进行解析。例如，它会查找变量名称，而不考虑激活（或不激活）这些变量的分支。也就是说，范围不是在运行时确定的。

附录：我不推荐这样做，但我看到很多人用 MATLAB 做我不推荐的事情。但是...考虑一下如果有人定义自己的名为“false”的函数会发生什么。运行前解析器不知道如果调用该函数会发生什么。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T17:27:30.830

似乎 MATLAB JIT 编译器第一次解析 m 文件时，它会识别函数中声明的所有变量。它似乎并不关心是否在无法访问的代码中声明了所述变量。因此，您的局部`fprintf`变量会立即隐藏内置函数`fprintf`。这意味着，就这个函数而言，*没有名为 的内置函数`fprintf`*。

当然，一旦发生这种情况，函数中的每个引用都`fprintf`指向局部变量，并且由于该变量实际上从未被创建，因此尝试访问它会导致错误。

清除变量只是清除局部变量，如果它存在，它*不会*将内置函数带回范围。

要显式调用内置函数，您可以使用该[`builtin`](http://www.mathworks.com/help/matlab/ref/builtin.html)函数。

```
builtin( 'fprintf', 'test' ); 
```

上面的行将始终在 MATLAB 命令行中打印文本，而不考虑可能影响`fprintf`函数的局部变量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T17:14:38.600

有趣的情况。我怀疑是否有关于 MATLAB 解释器如何在这种奇怪情况下工作的详细信息，但文档中有几件事需要注意......

MATLAB 使用的[函数优先顺序](http://www.mathworks.com/help/matlab/matlab_prog/function-precedence-order.html)将变量放在首位：

> 在假设名称与函数匹配之前，MATLAB 会在当前工作区中检查具有该名称的变量。

当然，在您的示例中，该变量`fprintf`实际上并不存在于工作区中，因为从未输入过条件语句的该分支。但是，关于变量命名的文档是这样说的：

> 避免创建与函数同名的变量（例如`i`、`j`、`mode`、`char`、`size`和`path`）。通常，变量名优先于函数名。如果你创建一个使用函数名的变量，你有时会得到意想不到的结果。

这一定是那些“意外结果”之一，尤其是在实际未创建变量时。结论是 MATLAB 中必须有某种机制在运行时解析文件以确定给定范围内*可能*存在的变量，其最终结果是函数仍然会被*m 文件*中出现的变量所掩盖，即使如果它们最终没有出现在*工作区*中。

**编辑：**更令人困惑的是，函数喜欢[`exist`](http://www.mathworks.com/help/matlab/ref/exist.html)并且[`which`](http://www.mathworks.com/help/matlab/ref/which.html)甚至不知道函数似乎被遮蔽的事实。在调用之前添加这些行`fprintf`：

```
exist('fprintf')
which('fprintf') 
```

在错误发生之前给出此输出：

```
ans =
     5
built-in (C:\Program Files\MATLAB\R2012a\toolbox\matlab\iofun\fprintf) 
```

表示他们仍然看到内置的`fprintf`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-09T18:40:31.037

这些可能会提供见解：

*   [https://www.mathworks.com/help/matlab/matlab_prog/base-and-function-workspaces.html](https://www.mathworks.com/help/matlab/matlab_prog/base-and-function-workspaces.html)
*   [https://www.mathworks.com/help/matlab/matlab_prog/share-data-between-workspaces.html](https://www.mathworks.com/help/matlab/matlab_prog/share-data-between-workspaces.html)

这可以为您提供一些有关被遮蔽的信息：

```
which -all 
```

（以下被确认为错误）一个问题是 Workspace 结构和路径上的类具有特定的范围和类型优先级，（如果你是我的话）可能会抓住你。

例如在 2017b 中：

```
% In C.m, saved in the current directory
classdef C
 properties (Constant)
   x = 100;
 end
end

% In Command window
C.x = 1;
C.x       % 100
 C.x      % 1 (Note the space)
C.x*C.x   % 1
disp(C.x) % 1 
```

# ios - iOS Facebook SDK：哪个登录系统更好？

> ID：13073202
> 
> 赞同：1
> 
> 时间：2012-10-25T16:34:53.550
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在开发一个 iOS 应用程序，它允许用户使用他们的 Facebook 帐户登录。

[感谢我在这里找到的官方教程https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)，我设法实现了登录程序。我在这里找到了[https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)另一个教程，它看起来非常不同，因为在第一个教程中用户通过 Safari 登录，而不是在第二个教程中本地使用 Facebook 应用程序。

在这两个系统中，哪个更好？也许通过使用 Safari，我可以避免与旧版本 iOS 向后兼容的任何问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:00:45.267

如果您使用的是官方 Facebook SDK，会发生以下情况：

*   如果用户**确实安装**了 Facebook 应用程序，他们将被带到它那里进行身份验证并登录到您的应用程序。

*   如果用户**没有**安装 Facebook 应用程序，他们将被带到 Safari 进行身份验证并登录到您的应用程序。

无论哪种方式，登录过程都是相同的。在他们进行身份验证后，它们会使用特定的 URL 方案返回到您的应用程序，以便您可以继续您正在做的事情。

最后，如果您只针对 iOS 6，您可以利用 iOS 内置的单点登录功能。查看文档以获取更多信息。

# java - BufferedReader.readLine() 方法阻塞替代

> ID：13073205
> 
> 赞同：0
> 
> 时间：2012-10-25T16:35:03.630
> 
> 标签：java, sockets, networking, network-programming, network-protocols

有什么方法可以使方法 readline() （来自 bufferedReader）阻塞，直到它实际上有要读取的内容？

我正在创建一个客户端/服务器应用程序 socketBased 我有这个

**服务器**读取然后写入。**客户端**写入然后读取..这是客户端/服务器之间的通信（基于套接字）

唯一的问题是在服务器上我正在使用 bufferedReader.readLine() 读取，这不是阻塞方法。我已经尝试用 dataInputstream().read() 替换 bufferedReader.readLine() （处理所有字节内容并在收到 -1 时退出），但它也不起作用。

所有这一切的问题是服务器期望读取但不阻塞。当用户按下按钮时，客户端只会写入服务器（通过套接字）（因此服务器必须等待读取，而事实并非如此）

在**服务器**端我有这个：

```
 BufferedReader READ = new BufferedReader(new InputStreamReader(skt.getInputStream()));
        BufferedWriter WRITE = new BufferedWriter(new OutputStreamWriter(skt.getOutputStream()));
        FileInputStream fstream = new FileInputStream(file);
        DataInputStream in = new DataInputStream(fstream);

        boolean FLAG = true;

        String s = new String("#$");

        while (FLAG) {

            if (skt == null)
                FLAG = false;

            // READING FROM THE CLIENT
            while (!READ.ready()){System.out.println("Blocking")};

            while ((s = READ.readLine()) != null) {
                System.out.println("RECEIVING: " + s);
                System.out.println("$$$");
            }

            System.out.print("hi");
            // READING FROM THE FILE AND SENDING TO THE CLIENT
            //WRITTING TO THE CLIENT
            while ((strLine = in.readLine()) != null) {
                System.out.println("SENDING: " + strLine);
                strLine += "\n";
                WRITE.write(strLine);
                WRITE.flush();
                strLine = new String();
            }
        } 
```

在**客户**端我有这个：

```
 //READING FROM THE FILE AND SENDING TO THE SERVER
                 while((strLine  = in.readLine()) != null)  
                 {  

                        strLine += "\n";

                        soma+=strLine.length();
                        WRITE.write(strLine);
                        WRITE.flush();

                        TextArea1.append(strLine);
                        ProgressBar.setValue(soma);
                        ProgressBar.repaint();  

                    };          
                    in.close();

                    ProgressBar.setValue(0);
                    soma=0;

                    //READING FROM THE SERVER
                    while((strLine=READ.readLine()) != null)
                    {

                        strLine+="\n";
                        soma+=strLine.length();

                        TextArea2.append(strLine);
                        strLine = new String();
                        ProgressBar.setValue(soma);
                        ProgressBar.repaint();  
                    }

                    in.close();
                    fstream.close();
                    WRITE.close();
                    READ.close();

                    Skt.close(); 
```

**注意：** Skt 是一个将客户端连接到服务器的套接字。

这里的问题是。当客户端连接到服务器时，服务器期望在连接建立后立即从套接字读取..但是客户端上的代码（写入服务器）仅在用户按下按钮时才会运行..所以，服务器必须被阻塞，直到客户端实际上向套接字写入了一些东西（服务器没有阻塞）。：-/希望这次让我自己更清楚..对不起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:38:31.750

BufferedReader.readLine() 总是阻塞，直到找到`'\n'`.

如果您可以举出您发送的数据示例，我可能会进一步帮助您。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T16:39:26.360

尝试使用文件锁定方法，例如：

```
file = new RandomAccessFile("file.txt", "rw");
FileChannel channel = file.getChannel();
fl = channel.tryLock();
// file now is locked
fl.release(); 
```

# .net - 如何消除 XAML 中网格列之间的间隙（Windows 应用商店应用程序）

> ID：13073211
> 
> 赞同：0
> 
> 时间：2012-10-25T16:35:16.097
> 
> 标签：.net, xaml, windows-runtime, windows-store-apps, windows-store

我正在为 Windows 应用商店应用程序在 XAML 中构建 UI；它在相邻列中使用两个背景图形。XAML 如下：

```
 <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="11" />
            </Grid.ColumnDefinitions>
            <Image Source="/Assets/stop-title-background-strip.png" Stretch="Fill" />
            <Image Grid.Column="1" Source="/Assets/routes-chevron.png" Stretch="Fill" />
            <TextBlock Text="Available Routes" />
        </Grid> 
```

然而，当它被渲染时，列之间有一个明显的微小间隙：

![在此处输入图像描述](../Images/94db3915e9f5f9ddeee854b7dd79967f.png)

我尝试将 Grid 和 Image 元素的 UseLayoutRounding 属性设置为“true”（和 false），但这并不能解决问题。

我怎样才能阻止这个差距出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:10:56.720

尝试将`Margin`列之间的值设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:28:04.957

您需要对一张或多张图像使用负值。通常不建议这样做，但这似乎是一个足够好的例外。你需要做类似的事情

```
<Image
    Source="/Assets/stop-title-background-strip.png"
    Stretch="Fill" />
<Image
    Grid.Column="1"
    Source="/Assets/routes-chevron.png"
    Stretch="Fill"
    Margin="-20,0,0,0" /> 
```

或者

```
<Image
    Source="/Assets/stop-title-background-strip.png"
    Stretch="Fill"
    Margin="0,0,-20,0" />
<Image
    Grid.Column="1"
    Source="/Assets/routes-chevron.png"
    Stretch="Fill" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T12:51:57.443

我今天也遇到了这个问题，用负边距重叠单元格是没有选择的——单元格的内容有 alpha 值，重叠会产生奇怪的结果。

经过数小时的调查，我找到了差距的原因并纠正了它们，但令人难以置信的是，解决方案必须是这样的，这是我期望 UI 框架能够处理的。

无论如何，这是我找到的解决方案：

**问题显然是在使用时处理与设备无关的像素的方式并不总是正确`Grids`**的——行高、列宽、网格 x 和 y 位置值的某些组合确实会导致舍入误差，从而导致间隙。当网格的位置和大小是完全动态的并在 XAML 中设置时，可能不会发生这种情况，但这并非在所有情况下都是可能的。

因此解决方案是**确保将所有上述值设置为完美的设备像素**，而不是任何可能计算的双精度值。我使用以下函数为所有相关值完成此操作，并且所有差距都消失了：

```
private double RoundToDevicePixels(double originalValue)
{
    double dpi = DisplayInformation.GetForCurrentView().LogicalDpi;
    double dpiFactor = (96.0 / dpi);
    int xDpi = (int)(originalValue * dpiFactor);
    return xDpi / dpiFactor;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-30T08:35:57.597

我的回答有点晚了，但我仍然希望它能有所帮助。

在网格中设置`UseLayoutRounding`为 false。

`UseLayoutRounding`设置为假：

[![UseLayoutRounding 设置为 false](../Images/fbba9984da434fe54a11e731e8eb1d83.png)](https://i.stack.imgur.com/tYf83.png)

`UseLayoutRounding`未设置（默认为真）：

[![UseLayoutRounding 未设置或默认为 true](../Images/83ad1078f04d8e21ce84b99bb2ecc888.png)](https://i.stack.imgur.com/76J4u.png)

# jquery - Coda 滑块和滚动按钮

> ID：13073218
> 
> 赞同：0
> 
> 时间：2012-10-25T16:35:39.177
> 
> 标签：jquery, scroll, jquery-animate, slider, coda-slider

所以，

我正在创建一个基于[Coda Slider](http://jqueryfordesigners.com/demo/coda-slider.html)的垂直滑块。尽管我对 Jquery 的了解非常有限，但我已经设法将滑块全部设置好，但有一个重大问题：.before 和 .after 动画（由“左”和“右”控制，或者，在这种情况下, "up" 和 "down" 与我添加的 "up" 和 "down" DIV 没有关联。我喜欢单击 "up" div 以使滑块向上滚动到上一张幻灯片.

我仍在修改脚本，但我有一种感觉，鉴于我缺乏使用 Jquery 的经验，我可能会受到 SO 的摆布来解决这个问题。

任何想法都非常感谢！

我的滑块**javascript**：

```
$(document).ready(function () {

var $panels = $('#slider .scrollContainer > div');
var $container = $('#slider .scrollContainer');

// if false, we'll float all the panels left and fix the width 
// of the container
var horizontal = false;

// float the panels left if we're going horizontal
if (horizontal) {
    $panels.css({
        'float' : 'left',
        'position' : 'relative' // IE fix to ensure overflow is hidden
    });

    // calculate a new width for the container (so it holds all panels)
    $container.css('width', $panels[0].offsetWidth * $panels.length);
}

// collect the scroll object, at the same time apply the hidden overflow
// to remove the default scrollbars that will appear
var $scroll = $('#slider .scroll').css('overflow', 'hidden');

// apply our left + right buttons
$scroll
    .before('<div id="uptopdiv" />')
    .after('<img class="scrollButtons right" src="images/scroll_right.png" />');

// handle nav selection
function selectNav() {
    $(this)
        .parents('ul:first')
            .find('a')
                .removeClass('selected')
            .end()
        .end()
        .addClass('selected');
}

$('#slider .navigation').find('a').click(selectNav);

// go find the navigation link that has this target and select the nav
function trigger(data) {
    var el = $('#slider .navigation').find('a[href$="' + data.id + '"]').get(0);
    selectNav.call(el);
}

if (window.location.hash) {
    trigger({ id : window.location.hash.substr(1) });
} else {
    $('ul.navigation a:first').click();
}

// offset is used to move to *exactly* the right place, since I'm using
// padding on my example, I need to subtract the amount of padding to
// the offset.  Try removing this to get a good idea of the effect
var offset = parseInt((horizontal ? 
    $container.css('paddingTop') : 
    $container.css('paddingLeft')) 
    || 0) * -1;

var scrollOptions = {
    target: $scroll, // the element that has the overflow

    // can be a selector which will be relative to the target
    items: $panels,

    navigation: '.navigation a',

    // selectors are NOT relative to document, i.e. make sure they're unique
    prev: 'img.left', 
    next: 'img.right',

    // allow the scroll effect to run both directions
    axis: 'xy',

    onAfter: trigger, // our final callback

    offset: offset,

    // duration of the sliding effect
    duration: 500,

    // easing - can be used with the easing plugin: 
    // http://gsgd.co.uk/sandbox/jquery/easing/
    easing: 'swing'
};

// apply serialScroll to the slider - we chose this plugin because it 
// supports// the indexed next and previous scroll along with hooking 
// in to our navigation.
$('#slider').serialScroll(scrollOptions);

// now apply localScroll to hook any other arbitrary links to trigger 
// the effect
$.localScroll(scrollOptions);

// finally, if the URL has a hash, move the slider in to position, 
// setting the duration to 1 because I don't want it to scroll in the
// very first page load.  We don't always need this, but it ensures
// the positioning is absolutely spot on when the pages loads.
scrollOptions.duration = 1;
$.localScroll.hash(scrollOptions);

}); 
```

**我的 HTML**：

```
<script src="http://www.marcatectura.com/wp-content/jquery-1.2.6.js" type="text/javascript"></script>
<script src="http://www.marcatectura.com/wp-content/jquery.scrollTo-1.3.3.js" type="text/javascript"></script>
<script src="http://www.marcatectura.com/wp-content/jquery.localscroll-1.2.5.js" type="text/javascript" charset="utf-8"></script>
<script src="http://www.marcatectura.com/wp-content/jquery.serialScroll-1.2.1.js" type="text/javascript" charset="utf-8"></script>
<body>
<div id="wrapper">    
    <div id="intro">
        This area can house any content within the wrapper prior to the actual slider, but is best left empty for the Adrienne Adams feature.
    </div>
    <div class="scrollButtons left"></div>
    <div id="upbuttoncontainer"><div id="uptopdiv"><div id="uptoparrow-border-left"></div><div id="uptoparrow-border-right"></div><div id="uptoparrow-up-internal"></div><div id="uptoparrow-up"></div></div><div id="upbottomdiv"><div id="uparrow-border-left"></div><div id="uparrow-border-right"></div><div id="uparrow-up-internal"></div><div id="uparrow-up"></div></div></div>
    <div id="slider">    
       <div class="scroll">
            <div class="scrollContainer">
                <div class="panel" id="wib1">wib1 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor<a href="#editor">Editor</a>incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
            <div class="panel" id="files"><h2>Files</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
            <div class="panel" id="editor"><h2>Editor</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad <a href="#books">books</a> minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
            <div class="panel" id="preview"><h2>Preview</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
            <div class="panel" id="css"><h2>CSS</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
            <div class="panel" id="terminal"><h2>Terminal</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. <a href="#sites">And some sites</a></p></div>
            <div class="panel" id="books"><h2>Books</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
            </div>
        </div>
        <div id="shade"></div>
    </div>
 <div id="downbuttoncontainer"><div id="downtopdiv"><div id="downtoparrow-border-left"></div><div id="downtoparrow-border-right"></div><div id="downtoparrow-up-internal"></div><div id="downtoparrow-up"></div></div><div id="downbottomdiv"><div id="downarrow-border-left"></div><div id="downarrow-border-right"></div><div id="downarrow-up-internal"></div><div id="downarrow-up"></div></div></div>
    <p>AFTER slider text:<a href="#books">books</a> consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco <a href="#wib1">sites</a> laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure <a href="#terminal">terminal</a>  dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

</div> 
```

​</p>

-Marcectura

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:57:56.213

想出如何使用不太复杂的脚本来实现相同的效果：

```
$(function() {
var y=0;
$(".down").click(function(e){
    e.preventDefault();
    $("#container").animate({scrollTop: y+=250}, 500);
})
$(".up").click(function(e){
    e.preventDefault();
    $("#container").animate({scrollTop: y-=250}, 500);
})        
}) 
```

JsFiddle 在[这里](http://jsfiddle.net/Koubenec/ynzPz/9/)。

# ubuntu - 从archive.ubuntu.com下载时出现rsync错误

> ID：13073219
> 
> 赞同：0
> 
> 时间：2012-10-25T16:35:54.440
> 
> 标签：ubuntu

先生，我正在尝试在我的安装驱动器 /mnt/Mirror/ubuntu_mirror 上设置 Rsyncmirror 。所以我正在尝试命令 rsync -a --bwlimit=128 rsync://archive.ubuntu.com/ubuntu /mnt/Mirror/ubuntu_mirror但它显示错误

rsync：getaddrinfo：archive.ubuntu.com 873：名称或服务未知 rsync 错误：clientserver.c(122) [Receiver=3.0.9] 处的套接字 IO（代码 10）错误

任何人都可以帮助我.. 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:43:36.597

rsync -aPz --bwlimit=128 rsync://archive.ubuntu.com/ubuntu mirror 正在为我工​​作。

通常，此错误与无法解析主机的 IP 地址有关。验证主机 archive.ubuntu.com 是否在您的系统上解析。

# .net - EF SaveChanges 未调用 Validate (IValidatableObject)

> ID：13073221
> 
> 赞同：2
> 
> 时间：2012-10-25T16:36:12.397
> 
> 标签：.net, entity-framework, c#-4.0

默认情况下，EF 在生成对象时使用 EntityObject。我已经修改它以使用我自己的 AbstractEntityObject 类。这样做时，我添加了 IValidatableObject，因为当您调用 context.SaveChanges() 时，我的印象是它会自动调用 Validate 并抛出异常。

这是我所拥有的：

```
public abstract class AbstractEntityObject : EntityObject, IValidatableObject
{
    private readonly DBTable table;

    protected AbstractEntityObject(DBTable table)
    {
        this.table = table;
    }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        List<OITValidationResult> results = new List<OITValidationResult>();
        List<PropertyInfo> properties = new List<PropertyInfo>(GetType().GetProperties());

        foreach (DBField field in table.GetFields())
        {
            foreach (PropertyInfo prop in properties)
                if (StringUtilities.EqualsIgnoreCase(field.FieldName, prop.Name))
                {
                    results.AddRange(field.Validate(prop.GetValue(this, null)));
                    results.AddRange(AdditionalValidation(field, prop));
                    properties.Remove(prop);
                    break;
                }
        }

        return results;
    }

    public abstract List<OITValidationResult> AdditionalValidation(DBField field, PropertyInfo prop);
}

public abstract class AbstractTLMSEntityObject : AbstractEntityObject
{
    protected AbstractTLMSEntityObject(DBTable table) 
        : base(table)
    {
    }

    public override List<OITValidationResult> AdditionalValidation(DBField field, PropertyInfo prop)
    {
        List<OITValidationResult> results = new List<OITValidationResult>();

        if (!EntityState.Equals(EntityState.Unchanged))
        {
            if (StringUtilities.EqualsIgnoreCase(field.FieldName, "userid"))
                prop.SetValue(this, TLMSDB.User.UserName, null);
            else if (StringUtilities.EqualsIgnoreCase(prop.Name, "dtmod"))
                prop.SetValue(this, DateTime.Now, null);
        }

        OITValidationResult additionalResult = AdditionalValidation(field.Field);
        if (additionalResult != null)
            results.Add(additionalResult);

        return results;
    }

    /* By default there is no additional validation, subclasses should override this if they need additional validation */
    public virtual OITValidationResult AdditionalValidation(Enum field)
    {
        return null;
    }
} 
```

然后，我有了子类，它是部分类以及 EF 创建的子类：

```
public partial class CSDCrud
{
    public enum Fields
    {
        RECEIPT_NUMBER,
        GRANT_ID,
        GRANT_FUND,
        TOTAL_ACRES
    }

    public CSDCrud() : base(CSDCrudDAO.Instance.Table)
    {
    }

    public static String GetDataPropertyName(Enum field)
    {
        return CSDCrudDAO.Instance.Table.GetField(field).FieldName;
    }
} 
```

由于我在 .tt 文件中更改了它，CSDCrud 继承自 AbstractTLMSEntityObject。

现在这是变得奇怪的地方。我已经对其进行了设置，以便 DBField（在父类中引用）对数据进行自我验证。在这种情况下，我已经设置了它，所以如果需要receipt_number，因此会失败并抛出异常......事实上，会发生以下情况......

```
List<OITValidationResult> results = (List<OITValidationResult>)crudObject.Validate(null);
try
{
    CommonEntityManager.GetContext().CrudSet.AddObject(crudObject);
    CommonEntityManager.GetContext().SaveChanges();
    return true;
}
catch (Exception ex)
{
    return false;
} 
```

正如预期的那样，结果包含 1 项是正确的错误...但是 SaveChanges 将其保存得很好，不会引发异常...我错过了什么？

编辑：我应该注意，显然我可以使用 SavingChanges 事件来添加我自己的处理程序，但我希望使用预先存在的基础设施。

```
static void context_SavingChanges(object sender, EventArgs e)
    {
        foreach (ObjectStateEntry ose in context.ObjectStateManager.GetObjectStateEntries(EntityState.Modified))
        {
            List<ValidationResult> results = new List<ValidationResult>(((IValidatableObject)ose.Entity).Validate(null));
            if (results.Count > 0)
                throw new CustomException(results);
        }

        foreach (ObjectStateEntry ose in context.ObjectStateManager.GetObjectStateEntries(EntityState.Added))
        {
            List<ValidationResult> results = new List<ValidationResult>(((IValidatableObject)ose.Entity).Validate(null));
            if (results.Count > 0)
                throw new CustomException(results);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:25:09.527

仅当您使用 DbContext API 而不是 ObjectContext API 时才会调用内置验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T00:17:21.247

objectContext 类不会显式调用实体对象中的内置自定义验证，但程序员需要显式处理这一点。从你的结束`SavingChanges`事件中明确地做到这一点是最好的地方。这是怎么做到的？我在控制台应用程序中准备的快速代码片段中对此进行了描述：

课程.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Objects.DataClasses;
using System.ComponentModel.DataAnnotations;

namespace EFCoding
{
    public partial class Course : EntityObject, IValidatableObject
    {
        List<ValidationResult> validationErrors = new List<ValidationResult>();
        public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {
            return validationErrors;
        }

        partial void OnNameChanging(global::System.String value)
        {
            validationErrors.Clear();
            if (value.Length > 10)
            {
                ValidationResult vResult = new ValidationResult("Invalid Course Name", new string[] { "EmailID" });
                validationErrors.Add(vResult);
            }
        }

        partial void OnDisciplineChanging(global::System.String value)
        {
            validationErrors.Clear();
            if (value.Length > 10)
            {
                ValidationResult vResult = new ValidationResult("Invalid Discipline", new string[] { "EmailID" });
                validationErrors.Add(vResult);
            }
        }

    #region Factory Method

    /// <summary>
    /// Create a new Course object.
    /// </summary>
    /// <param name="id">Initial value of the Id property.</param>
    /// <param name="name">Initial value of the Name property.</param>
    /// <param name="discipline">Initial value of the Discipline property.</param>
    public static Course CreateCourse(global::System.Int32 id, global::System.String name, global::System.String discipline)
    {
        Course course = new Course();
        course.Id = id;
        course.Name = name;
        course.Discipline = discipline;
        return course;
    }

    #endregion

    #region Primitive Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int32 Id
    {
        get
        {
            return _Id;
        }
        set
        {
            if (_Id != value)
            {
                OnIdChanging(value);
                ReportPropertyChanging("Id");
                _Id = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("Id");
                OnIdChanged();
            }
        }
    }
    private global::System.Int32 _Id;
    partial void OnIdChanging(global::System.Int32 value);
    partial void OnIdChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String Name
    {
        get
        {
            return _Name;
        }
        set
        {
            OnNameChanging(value);
            ReportPropertyChanging("Name");
            _Name = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("Name");
            OnNameChanged();
        }
    }
    private global::System.String _Name;
    partial void OnNameChanging(global::System.String value);
    partial void OnNameChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String Discipline
    {
        get
        {
            return _Discipline;
        }
        set
        {
            OnDisciplineChanging(value);
            ReportPropertyChanging("Discipline");
            _Discipline = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("Discipline");
            OnDisciplineChanged();
        }
    }
    private global::System.String _Discipline;
    partial void OnDisciplineChanging(global::System.String value);
    partial void OnDisciplineChanged();

    #endregion

    }
} 
```

程序.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.DataAnnotations;
using System.Data.Objects;
using System.Data;

namespace EFCoding
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var efContext = new EfTestEntities1())
            {

                efContext.SavingChanges += new EventHandler(efContext_SavingChanges);
                var course = new Course { Id = 2, Name = "Very long course name which will result in exception", Discipline = "Very long discipline name which will result in error at run time" };
                efContext.Courses.AddObject(course);
                efContext.SaveChanges();
            }
        }

        static void efContext_SavingChanges(object sender, EventArgs e)
        {
            ObjectContext objectContext = sender as ObjectContext;
            IEnumerable<Object> entities = objectContext.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Modified).Select(x => x.Entity);
            foreach (var item in entities)
            {
                var current = item as Course;
                if (current != null)
                {
                    var validationsErrors = current.Validate(new ValidationContext(current,null,null));
                    if (validationsErrors.Count() > 0)
                    {
                        throw new InvalidOperationException("Model has validation errors");
                    }
                }
            }
        }
    }
} 
```

# c# - 获取列表中特定项目的出现

> ID：13073222
> 
> 赞同：0
> 
> 时间：2012-10-25T16:36:22.600
> 
> 标签：c#, entity-framework-5, generic-collections

我想获得一个包含该集合中所有项目的集合的特定出现，例如，**获取第一次出现的所有值，比如 3 次出现**。

如果我有以下代码，我将如何做到这一点？如果 i 等于 1，**我只想将集合中的第一个匹配项传递给我的 ProcessForm4PDFFormFields 方法，仅使用这一次出现而不是整个集合。**

因此，参数“myResult”将仅包含根据“i”是什么来传递的事件之一。

```
public void GetForm4Results(string FormId, int LoanId, string MainDir3, string TemplateFile, Int16 i)
    {
        try
        {
            using (VisionEntities DbContext = new VisionEntities())
            {
                DbContext.Configuration.LazyLoadingEnabled = false;
                DbContext.Database.Connection.Open();

                int? LoanIdTmp = LoanId;

                ObjectResult<SelectForm4_Result> result = DbContext.SelectForm4(8900, LoanId);

                List<SelectForm4_Result> myResult = new List<SelectForm4_Result>();

                myResult = result.ToList();

                ProcessForm4PDFFormFields(myResult, FormId, MainDir3, TemplateFile, i);
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:48:58.230

所以你是说你希望 myResult 包含`i`结果中的第一个对象？

```
myResult = result.Take(i).ToList(); 
```

或者，如果您希望 myResult 仅包含`i`结果中的第 th 个对象，那么它将是...

```
myResult = new List<SelectForm4_Result>() { result.ElementAt(i) }; 
```

来源：http: [//msdn.microsoft.com/en-us/library/bb739113.aspx](http://msdn.microsoft.com/en-us/library/bb739113.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:44:30.150

也许我不理解这个问题，但如果你只想要列表中的第一项，你可以简单地做

```
myResult = result.ToList()[0]; 
```

或者如果列表包含很多不同的东西

```
foreach (object o in result.ToList())
        {
            if (o.Equals(target))
            {
                myResult = o;
                break;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:54:48.807

尝试这个，

```
myResult = i == 1 ? new List<PDFConverterModel.SelectForm4_Result>(result.Take(i)) : result.Take(i);

ProcessForm4PDFFormFields(myResult, FormId, MainDir3, TemplateFile, i); 
```

# git - 本地分支与 Origin 分支不同，但我不想合并/快进

> ID：13073230
> 
> 赞同：0
> 
> 时间：2012-10-25T16:37:22.060
> 
> 标签：git

几个提交已被推送到源分支。这些提交包含导致问题的代码。为了解决问题，我`git reset --hard <sha>`在问题开始之前对提交做了一个。

我已经解决了这个问题并在本地提交。现在我想推送到 Origin 但我不能，因为我的分支在 Origin 之后 5 次提交（导致问题）并且在 1 次提交（修复提交）之前。IE。分歧的分支。

我不想合并来自 Origin 的任何更改。如何将 Origin 的头部设置为我的本地提交的头部，并且不将中断提交合并到我的本地分支中？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T16:43:36.707

干净的方式（保留历史）

1.  在您当前的提交中创建一个本地错误修复分支
2.  结帐主机（或任何来源）并将其快进到损坏的远程 HEAD
3.  `git revert`错误的提交（在你分叉的最后一个好*sha*和远程 HEAD 之间的所有内容）......这会删除不需要的更改，同时保留所有历史记录
4.  将您的错误修复分支合并到 master：现在所有 master 的更改都已恢复，这将是一个简单的合并

肮脏的方式（丢弃历史记录，扰乱在远程分支上工作的任何其他人）

1.  只需使用`git push -f`（仔细检查您是否有正确的选项和 refspec）并希望没有其他人在他们下面更改了他们的远程分支历史记录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:46:05.983

如果您不想丢弃其他人在这些错误提交中所做的事情，即保持历史记录仍然存在，而只是拒绝那里发生的更改，您可以使用`ours`合并策略：

```
git merge -s ours badbranch 
```

这实质上创建了一个合并提交，它只从当前分支中获取所有更改。它将完全忽略发生的事情，`badbranch`但仍会将其纳入历史。因此，您可以查看那里发生的更改，但它们不会影响您当前的版本。

否则，如果您只想完全丢弃它们，并且您可以完全控制存储库并且不关心从存储库中提取的其他人，则可以覆盖分支，基本上从存储库中删除这些提交（除非您有另一个分支指向它）。您可以通过强制推送来做到这一点：

```
git push origin master -f 
```

请注意，这将为在存储库上工作的其他可能已经获取这些更改的其他人造成冲突，所以不要这样做，除非您真的意识到这一点。通常首选将错误提交保留在历史记录中。

# ios - 使用 IBAction/Button 进行应用内购买

> ID：13073234
> 
> 赞同：0
> 
> 时间：2012-10-25T16:37:38.933
> 
> 标签：ios, iphone, in-app-purchase, ibaction

我有一个非常有趣的问题。看起来应该很容易解决，但也许我只是想多了？

简介：我想使用 IBAction 按钮而不是表格视图来激活购买。

详细的：

首先，我使用本教程作为指南。（一个很棒的教程 - 看看。谢谢你，雷！） [http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

1.  如果您向下滚动到显示的位置：

    ```
    - (void)buyButtonTapped:(id)sender {

    UIButton *buyButton = (UIButton *)sender;
    SKProduct *product = _products[buyButton.tag];

    NSLog(@"Buying %@...", product.productIdentifier);
    [[RageIAPHelper sharedInstance] buyProduct:product]; } 
    ```

这就是我卡住的地方。该示例使用表格视图，但是我不想在我的应用程序中使用其中之一。我要做的就是使用我手动创建的 IBAction 按钮。

所以我做了这个按钮，把它连接起来，让它和 NSLog 一起工作。

```
-(IBAction)buyProductButton:(id)sender {

    NSLog(@"Buy Something.");

} 
```

所以我的问题是我在这个 IBAction 中放什么而不是

```
- (void)buyButtonTapped:(id)sender {

    UIButton *buyButton = (UIButton *)sender;
    SKProduct *product = _products[buyButton.tag];

    NSLog(@"Buying %@...", product.productIdentifier);
    [[RageIAPHelper sharedInstance] buyProduct:product]; } 
```

为了获得激活购买的按钮？

也许是这样的？

```
-(IBAction)buyProductButton:(id)sender {

    SKProduct *product = _products;

    NSLog(@"Buying %@...", product.productIdentifier);
    [[RageIAPHelper sharedInstance] buyProduct:product]; } 
```

但是，是的，它不起作用。

任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:14:41.190

您没有设置正确的产品：

```
SKProduct *product = _products[buyButton.tag];

NSLog(@"Buying %@...", product.productIdentifier);
[[RageIAPHelper sharedInstance] buyProduct:product]; 
```

尝试使用您的产品标签，其中 buyButton.tag

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T22:32:43.267

这是我尝试过的代码并且它有效。我使用下面的代码使用按钮进行特定购买。

在 M 文件的 @interface 中创建变量 Array _products：

```
@interface .... (){

    NSArray *_products;

} 
```

把它放到你的 viewDidLoad 方法中：

```
[[RageIAPHelper sharedInstance] requestProductsWithCompletionHandler:^(BOOL success, NSArray *products) {

        if (success) {

            _products = products;

        }
    }]; 
```

上面的代码将使用您在商店注册的产品填充“_products”。并在按钮功能中使用以下代码购买产品。

```
SKProduct *product = _products[0];    
[[RageIAPHelper sharedInstance] buyProduct:product]; 
```

我在“_products[0]”中使用“0”来指代商店产品。如果您有很多产品，您可以使用 _products[] 的 [] 中的相应数字来购买该特定商品。

# visual-studio-2010 - AutoScroll 不是 System.Windows.Forms.TabControl 的成员

> ID：13073235
> 
> 赞同：0
> 
> 时间：2012-10-25T16:37:43.047
> 
> 标签：visual-studio-2010, tabcontrol

我正在使用 Visual Basic 2010，我有一个名为“TabControl1”的选项卡控件，我尝试使用以下代码：

```
TabControl1.AutoScroll = True 
```

但我只是得到错误：

AutoScroll 不是 System.Windows.Forms.TabControl 的成员

如果这是错误的；我应该如何将滚动条添加到我的 TabControl？

谢谢。

# c++ - 如何在 C++ 中合并两个链表？

> ID：13073238
> 
> 赞同：0
> 
> 时间：2012-10-25T16:37:58.170
> 
> 标签：c++, linked-list

昨晚我问了一个关于如何`sort()`在 C++ 中创建双链表的问题。我设法让它工作，但现在我想合并两个列表，但我无法让它工作。我没有太多代码，对不起。我尝试的一切都毫无意义。我只是想如果有人可以用我将提供的信息给我一些关于从哪里开始或如何做到这一点的提示。

这是我一开始的：

```
void next() { if (curr != tail) curr = curr->next; } 
```

我相信我只需要这些。

我在网上看了一些例子，但对我来说没有任何意义。它似乎与我现在拥有的如此不同。显然它应该比做一个排序功能容易得多，我几乎没有遇到任何麻烦。

任何解释/提示将不胜感激！对于缺少代码，我再次感到抱歉，我只是不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:52:08.437

您实际上可以通过多种方式做到这一点

1.  获取两个排序列表，并从字面上合并它们，以便最终得到一个排序列表
2.  获取两个排序列表，并创建第三个新列表，其中包含两个列表中的元素并按排序顺序排列
3.  合并两个已排序/未排序的列表，然后对结果列表进行排序

看起来你试图不做。3 这里。

在这种情况下，您可以

1.  从当前列表的头部开始，直到到达最后一个元素
2.  设置 curr->next = other_list.head
3.  对当前列表调用 sort

然而，这会破坏原始列表。我认为最好将它们复制到第三个列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:04:23.357

```
for_each(auto x in list2name)
{
list1name.push_back(x);
} 
```

或者如果你正在使用`C++ 11`

```
for(auto x : list2name)
{
list1name.push_back(x);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:52:47.390

如果您使用 std::list 作为链表，您始终可以使用现有的 merge() 函数[http://www.cplusplus.com/reference/stl/list/](http://www.cplusplus.com/reference/stl/list/)

如果这是您自己实现的，只需获取其中一个列表的尾部并使用以下内容：

```
 tail = list_1.get_tail();
   tail.set_next(list_2.get_head()) 
```

基本上获取列表 1 中的最后一个条目，然后将下一个元素设置为列表 2 的第一个元素。

我仍然有点困惑你在追求什么，但这是我能想到的最基本的方式。再说一次，我可能完全离开了。祝你好运

# rspec - 使用 rake 时同时运行 TestUnit 和 RSpec

> ID：13073241
> 
> 赞同：2
> 
> 时间：2012-10-25T16:38:14.347
> 
> 标签：rspec, rake, testunit, rakefile

我使用 TestUnit 开始了我的项目，但现在我希望改用 RSpec。为了避免重新编写所有测试，如果我在启动 rake 时可以同时使用它们将会很有用。

在我的 Rakefile 下面：

```
require File.expand_path('../config/application', __FILE__)
MyApp::Application.load_tasks 
```

有没有办法来解决这个问题 ？

# php - “不在”Kohana ORM

> ID：13073243
> 
> 赞同：1
> 
> 时间：2012-10-25T16:38:19.147
> 
> 标签：php, orm, kohana, kohana-orm, kohana-3.2

我有以下型号：

```
class Model_User extends ORM {

    protected $_primary_key = 'name';

    protected $_has_many = array(
        'repositories' => array(
            'model' => 'repository',
            'through' => 'repository_user',
        ),
    );
}

class Model_Repository extends ORM {

    protected $_primary_key = 'name';

    protected $_has_many = array(
        'users' => array(
            'model' => 'user',
            'through' => 'repository_user',
        ),
    );
} 
```

我使用以下代码来获取所有未连接到存储库的用户：

```
$repository = ORM::factory( 'repository', $this->request->param('svn_name') );
$users = ORM::factory('user')->where( 'name', 'NOT IN', $repository->users->find_all()->as_array() )
            ->find_all(); 
```

不幸的是，如果没有用户连接到特定存储库，我会收到以下错误消息：

```
Database_Exception [ 1064 ]: You have an error in your SQL syntax; check the manual
 that corresponds to your MySQL server version for the right syntax to use near     
')' at line 1 [ SELECT `user`.* FROM `users` AS `user` WHERE `name` NOT IN () ] 
```

我如何在不使用 if 且仅使用 Kohana 方法的情况下解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:44:39.960

问题是`$repository->users->find_all()->as_array()`返回一个空数组，因此您的 SQL 查询无效（`NOT IN ()`-> 无效语法）。
在应用 where 条件之前，您应该检查数组是否为空：

```
$repository = ORM::factory( 'repository', $this->request->param('svn_name') );
$names = $repository->users->find_all()->as_array();
$users = ORM::factory('user');

// Check against empty names
if (!empty($names))
{
   $users->where( 'name', 'NOT IN', $names );
}

// Execute the query
$users->find_all(); 
```

# asp.net-mvc - WebSecurity.InitializeDatabaseConnection 方法只能调用一次

> ID：13073247
> 
> 赞同：12
> 
> 时间：2012-10-25T16:38:28.303
> 
> 标签：asp.net-mvc, azure

我正在尝试使用 Windows Azure 来托管 MVC4 Web 应用程序。我创建了一个测试应用程序，使用 VS2012 MVC4 互联网应用程序模板并向其中添加了一个自定义模型和控制器。

我已在 Azure 上发布它并设法将“更新数据库”应用迁移到 Azure 数据库。

当我在本地尝试应用程序但使用 Azure SQL 数据库时，它工作正常。我可以登录/注册并使用我的测试控制器。

当我在线尝试应用程序时，我可以使用测试控制器，但登录或注册链接会出现以下异常：

```
Server Error in '/' Application.

The "WebSecurity.InitializeDatabaseConnection" method can be called only once.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: The "WebSecurity.InitializeDatabaseConnection" method can be called only once.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[InvalidOperationException: The "WebSecurity.InitializeDatabaseConnection" method can be called only once.]
   WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider simpleMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables) +123
   WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
   WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionStringName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +52
   MembershipTest2.Filters.SimpleMembershipInitializer..ctor() +193 
```

你知道那是从哪里来的吗？如果我调试（本地版本），这个方法只调用一次。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T20:30:41.290

您可以尝试封装对该方法的调用，以确保它不会被多次调用

```
 if (!WebMatrix.WebData.WebSecurity.Initialized)
                {
                    WebSecurity.InitializeDatabaseConnection(...);
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T01:18:51.807

就我而言，我两者都有

（在 web.config 中）

```
<add key="enableSimpleMembership" value="true" /> 
```

和

（在 _ViewStart.cshtml 中）

```
WebSecurity.InitializeDatabaseConnection("club", "Account", "UserID", "UserName", autoCreateTables: true); 
```

解决方案：看来你不能同时拥有，所以删除一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:11:17.100

以下 SO 讨论对您有帮助吗？

*   [无法播种用户和角色](https://stackoverflow.com/questions/13565347/cannot-seed-users-roles)

我确实发现以下文章对我使用较新的 MVC4 和 EF 以及 Simple Membership Provider 有很大帮助，所以如果您还没有阅读它，请看一下：

[SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# php - Live Facebook 应用程序上的应用程序配置不允许给定 URL 的参数无效

> ID：13073249
> 
> 赞同：0
> 
> 时间：2012-10-25T16:38:29.943
> 
> 标签：php, facebook, facebook-php-sdk

> **可能重复：**
> [Facebook API 错误 191](https://stackoverflow.com/questions/4691782/facebook-api-error-191)

当我将用户重定向到登录 url 时出现此错误。它今天才出现（在 Facebook 昨晚修复了一些错误之后），并且该应用程序一直运行到今天早上。

这是我的登录代码

```
 $login_url = $this->facebook->getLoginUrl(array(
                        'canvas'=> 1,
                        'fbconnect' => 0,
                        'req_perms' => $req_perms,
                        'redirect_uri' => $appInfo->fb_pageTabURL,
                        'next'=> $appInfo->fb_appURL.'index.php/app/'.$appInfo->folder_name.'/show_contestants',
                        'cancel_url'=>$appInfo->fb_pageTabURL
                    )); 
```

看起来其他人在评论中和我有同样的问题。

谁能提供对此错误的任何见解？

# apache - 如何根据查询字符串重定向 URL？

> ID：13073253
> 
> 赞同：20
> 
> 时间：2012-10-25T16:38:42.827
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我成功地将一个 Wordpress 网站大规模迁移到 Drupal。不幸的是，在 Wordpress 中，内容 URL 类似于 www.example.org/?p=123。我的域仍然相同，但我想通过 Drupal 进行重定向，`htaccess`因为 Drupal 不允许 URL 为 www.example.org/?p=123。换句话说，内容与在 Wordpress 中的 URL 不同。例如，新的 Drupal URL 类似于`www.example.org/content/MyNewPage`

我在我的 .htaccess 文件中尝试了这个，但它不起作用

```
Redirect 301 /\?p=375 http://www.example.org/content/MyNewPage 
```

所以我尝试了以下方法，但它也不起作用。

```
Redirect 301 /\?p\=375 http://www.example.org/content/MyNewPage 
```

就像测试一样，我尝试了以下方法并且它有效。

```
Redirect 301 http://www.example.org http://www.google.com 
```

我确保我的重定向规则位于我的 .htaccess 列表的顶部，因此将首先对其进行评估。我该如何解决？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-25T16:56:03.323

Redirect 和 RedirectMatch 都不允许您为重定向源指定查询字符串。 [[来源]](http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/)

您必须使用 mod-rewrite 根据查询字符串进行重定向：

```
RewriteCond %{QUERY_STRING}  ^p=375$
RewriteRule (.*)  http://www.example.org/content/MyNewPage?  [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:07:13.190

你可以考虑在你的 htaccess 中使用 ModRewrite

```
<IfModule mod_rewrite.c>

RewriteEngine On

RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{QUERY_STRING}     ^p=345$    [NC]
RewriteRule index.php content/MyNewPage [NC,L,R=301]

</IfModule> 
```

您还可能希望将旧页面 id 传递给连接的新 URL（或者可能通过 QS？）：

```
<IfModule mod_rewrite.c>

RewriteEngine On

RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{QUERY_STRING}     ^p=(.*)$    [NC]
RewriteRule index.php content/MyNewPage-%1 [NC,L,R=301]

</IfModule> 
```

# c# - Ado.net 和 Sp 的缓存参数？

> ID：13073255
> 
> 赞同：2
> 
> 时间：2012-10-25T16:38:51.793
> 
> 标签：c#, .net, ado.net, sqlparameter

我正在阅读[Microsoft.ApplicationBlocks.Data](http://www.microsoft.com/en-us/download/details.aspx?id=435)的代码（[代码在这里](http://www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html)）

但我注意到一些奇怪的事情：

在其中一个函数（executeNonQuery）中，他尝试从缓存中读取 Sp 的参数，如果不存在，他将它们放入缓存（不是 asp.net 缓存 - 而是一个内部 HashSet）

```
public static int ExecuteNonQuery(string connectionString, string spName, params SqlParameter[] parameterValues)
    {
        if (connectionString == null || connectionString.Length == 0) throw new ArgumentNullException("connectionString");
        if (spName == null || spName.Length == 0) throw new ArgumentNullException("spName");
        // If we receive parameter values, we need to figure out where they go
        if ((parameterValues != null) && (parameterValues.Length > 0))
        {
            // Pull the parameters for this stored procedure from the parameter cache (or discover them & populate the cache)
            //------------------------------------

            SqlParameter[] commandParameters = SqlHelperParameterCache.GetSpParameterSet(connectionString, spName);

           //------------------------------------
            // Assign the provided values to these parameters based on parameter order
            AssignParameterValues(commandParameters, parameterValues);
            // Call the overload that takes an array of SqlParameters
            return ExecuteNonQuery(connectionString, CommandType.StoredProcedure, spName, commandParameters);
        }
        else
        {
            // Otherwise we can just call the SP without params
            return ExecuteNonQuery(connectionString, CommandType.StoredProcedure, spName);
        }
    } 
```

请看隔离线。

他们为什么这样做？如果我在 Cache 中有参数，它对我有什么帮助？**无论如何**，我都会从我的 dal 发送参数……（而且我*必须*将我的参数发送给 SP）……

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:16:06.773

如果没有缓存，他们最终会`SqlCommandBuilder.DeriveParameters`为每个调用调用 `ExecuteNonQuery`，[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.deriveparameters.aspx)指出：

> DeriveParameters 需要额外调用数据库来获取信息。如果事先知道参数信息，则通过显式设置信息来填充参数集合会更有效。

因此，缓存检索到的参数信息以避免这些额外调用是有意义的。

更新：

> 无论如何，我都会从我的 dal 发送参数……（而且我必须将我的参数发送给 SP）……

请注意`int ExecuteNonQuery(string connectionString, string spName, params object[] parameterValues)`重载——您可能会也*可能不会*发送参数。

# python - 使用 pyparsing 解析名称

> ID：13073259
> 
> 赞同：2
> 
> 时间：2012-10-25T16:39:13.920
> 
> 标签：python, pyparsing

我有一份姓名和年龄的档案，

```
john 25 
bob 30 
john bob 35 
```

这是我到目前为止所拥有的

```
from pyparsing import *

data = '''
    john 25 
    bob 30 
    john bob 35
'''

name = Word(alphas + Optional(' ') + alphas)

rowData = Group(name +
                Suppress(White(" ")) +
                Word(nums))

table = ZeroOrMore(rowData)

print table.parseString(data) 
```

我期待的输出是

`[['john', 25], ['bob', 30], ['john bob', 35]]`

这是堆栈跟踪

```
Traceback (most recent call last):
  File "C:\Users\mccauley\Desktop\client.py", line 11, in <module>
    eventType = Word(alphas + Optional(' ') + alphas)
  File "C:\Python27\lib\site-packages\pyparsing.py", line 1657, in __init__
    self.name = _ustr(self)
  File "C:\Python27\lib\site-packages\pyparsing.py", line 122, in _ustr
    return str(obj)
  File "C:\Python27\lib\site-packages\pyparsing.py", line 1743, in __str__
    self.strRepr = "W:(%s)" % charsAsStr(self.initCharsOrig)
  File "C:\Python27\lib\site-packages\pyparsing.py", line 1735, in charsAsStr
    if len(s)>4:
TypeError: object of type 'And' has no len() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:56:57.357

`pyparsing`自动摆脱空白，以便您可以编写更清晰的语法。因此，您的名称解析器应该更像：

```
# Parse for a name with an optional surname
# Note that pyparsing is built to accept "john doe" or "john        doe"
name = Word(alphas) + Optional(Word(alphas)) 
```

然后，行解析器：

```
# Parses a row of a name and an age
row = Group(name) + Word(nums) 
```

不过，对于每一行，你都会得到一个相当复杂的结构，`([(['john', 'doe'], {}), '25'], {})`但我希望你能看到如何使用它。我建议不要真正使用 pyparsing 来解析整个字符串，而是逐行迭代地解析它，如果您的数据是基于行的。我认为让事情变得更简单：

```
for line in input_string.splitlines():
    results = row.parseString(line)
    # Do something with results... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:17:55.640

以下代码可以使用内置的字符串库解决您的问题。

```
def main():
    f = open('filename.txt')
    fe = open('ERROR.TXT','w+')
    for line in f.readlines():
        # print line,
        lst = line.split()
        try:
            name = lst[0]
            age = lst[1]

        # process name and age valuse

        except IndexError as e:
            print e
            fe.write(e)
        except IOError as e:
            print e
            fe.write(e)

if __name__ == '__main__':
     main() 
```

# c# - 使用 LINQ 从复杂的 XML 中提取数据

> ID：13073260
> 
> 赞同：0
> 
> 时间：2012-10-25T16:39:20.733
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我的目标是将 ValueReference 节点、TimeInstant 属性和 timePosition 节点中包含的数据保存到变量中。我能够获得 valueReference 节点的值（未注释部分有效），但不能获得其他两个。任何帮助将不胜感激。

这是我正在处理的代码：

```
public void LinqToXml()
{
    XNamespace sosNamespace = XNamespace.Get("http://www.opengis.net/sos/2.0");
    XNamespace fesNamespace = XNamespace.Get("http://www.opengis.net/fes/2.0");
    XNamespace gmlNamespace = XNamespace.Get("http://www.opengis.net/gml/2.0");
    var root = XElement.Load(@"C:\Working Directory\OGCSOS.Service\OGCSOS.Service\Resources\GetObservation_TemporalFilter.xml");
    var a = (from level in root.Descendants(sosNamespace + "temporalFilter")
             select new
             {
                 valueReference = (string)level.Descendants(fesNamespace + "After")
                                               .Elements(fesNamespace + "ValueReference")
                                               .First(),
                 /*timeInstant = (string)level.Descendants(fesNamespace + "After")
                                               .Elements(gmlNamespace + "TimeInstant")
                                               .Attributes(gmlNamespace + "id")
                                               .First()*/
                 /*timePosition = (string)level.Descendants(fesNamespace + "After")
                                             .Elements(gmlNamespace + "TimeInstant")
                                             .First()*/
             }).ToList(); 
```

这是我要阅读的 XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
<sos:GetObservation xmlns="http://www.opengis.net/sos/2.0" service="SOS" version="2.0.0" 
                    xmlns:sos="http://www.opengis.net/sos/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" 
                    xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:swe="http://www.opengis.net/swe/2.0" 
                    xmlns:swes="http://www.opengis.net/swes/2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/sos/2.0
http://schemas.opengis.net/sos/2.0/sos.xsd">

    <!--identifier of an offering-->
    <offering>HG.Logger@DJK001</offering>

    <!--identifier of an observed property-->
    <observedProperty>HG</observedProperty>

    <!--optional temporal filter restricting the results which shall be returned-->
    <temporalFilter>
        <fes:After>
            <fes:ValueReference>phenomenonTime</fes:ValueReference>
            <gml:TimeInstant gml:id="startPosition">
                <gml:timePosition>2008-03-01T17:44:15.000+00:00</gml:timePosition>
            </gml:TimeInstant>
        </fes:After>
    </temporalFilter>

    <featureOfInterest>DJK001</featureOfInterest>

</sos:GetObservation> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:53:33.987

您的 gml 命名空间不正确，将其更改为

```
 XNamespace gmlNamespace = XNamespace.Get("http://www.opengis.net/gml/3.2"); 
```

您可以使用

```
timeInstant = level.Descendants(fesNamespace + "After")
                   .First()
                   .Element(gmlNamespace + "TimeInstant")
                   .Attribute(gmlNamespace + "id")
                   .Value,

timePosition = level.Descendants(fesNamespace + "After")
                    .First()
                    .Element(gmlNamespace + "TimeInstant")
                    .Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T16:49:10.810

你应该这样做

```
XNamespace sosNamespace = "http://www.opengis.net/sos/2.0";
XNamespace fesNamespace = "http://www.opengis.net/fes/2.0";
XNamespace gmlNamespace = "http://www.opengis.net/gml/3.2";
//you had used 2.0 instead of 3.2
var root = XElement.Load(@"C:\WorkingDirectory\OGCSOS.Service\OGCSOS.Service\Resources\GetObservation_TemporalFilter.xml");
var yourList=root.Descendants(sosNamespace+"temporalFilter").Descendants(fesNamespace+"After").Select(x=>
new
{
ValueReference=x.Element(fesNamespace+"ValueReference").Value,
timeInstant=x.Element(gmlNamespace+"TimeInstant").Attribute(gmlNamespace+"id").Value,
timePosition=x.Element(gmlNamespace+"TimeInstant").Element(gmlNamespace+"timePosition").Value
}
); 
```

`yourList`包含所有数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:41:33.133

你也可以使用好的旧 XPath

```
 var doc = new XPathDocument("1.xml");
    var nav = doc.CreateNavigator();
    var mng = new XmlNamespaceManager(nav.NameTable);
    mng.AddNamespace("sos", "http://www.opengis.net/sos/2.0");
    mng.AddNamespace("fes", "http://www.opengis.net/fes/2.0");
    mng.AddNamespace("gml", "http://www.opengis.net/gml/3.2");
    var valueReference = nav.SelectSingleNode("//sos:GetObservation/sos:temporalFilter/fes:After/fes:ValueReference[1]", mng).TypedValue;
    var TimeInstant = nav.SelectSingleNode("//sos:GetObservation/sos:temporalFilter/fes:After/gml:TimeInstant/@gml:id", mng).TypedValue;
    var timePosition = nav.SelectSingleNode("//sos:GetObservation/sos:temporalFilter/fes:After/gml:TimeInstant/gml:timePosition[1]", mng).TypedValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:05:23.440

试试这个代码：

```
XmlDocument xmlSnippet = new XmlDocument();
 xmlSnippet.Load(@"C:\Working Directory\OGCSOS.Service\OGCSOS.Service\Resources\GetObservation_TemporalFilter.xml");

 //Selects all the similar nodes by tag Name.......
               XmlNodeList xmlSnippetNodes = xmlSnippet.GetElementsByTagName("fes:After");

 //Checking if any any xmlSnippetNode has matched.
               if (xmlSnippetNodes != null)
               {
                   //Checks if the matched xmlSnippetNode that has fes:After attribute is not  NULL

//Stores the value of the matched tag.
                          var valueReference= xmlSnippetNodes.Item(0).Value;

                   var timeInstance=xmlSnippetNodes.Item(1).Attributes["gml:id"].Value;
                 var timePosition =xmlSnippetNodes.Item(1).InnerXml.Name;

                           //Return True if updated correctly.
                           isUpdated = true;

                   } 
```

# jquery - 在 jquery 滑出期间，Safari 文本和 div 杂乱无章

> ID：13073261
> 
> 赞同：9
> 
> 时间：2012-10-25T16:39:22.163
> 
> 标签：jquery, css, safari, browser-bugs

这是一个奇怪的错误，该站点在所有浏览器中都可以完美运行（在 5.1.7 版中测试）。这是我网站的链接。

[http://www.enrista.co.za/new-swap/?page_id=1669](http://www.enrista.co.za/new-swap/?page_id=1669)

如果您单击加号打开小部件区域，您可以看到我正在谈论的问题。文本和 div 不合适，直到窗口上的调整大小事件使其正常。我还注意到这个问题只发生在我的新闻信和社交媒体小部件上。我尝试了其他小部件并让它正常工作。在这里希望得到一些帮助，经过几个月的努力建立一个主题后，对这个错误感到失望。

# c# - 推断 3 种泛型类型中的 2 种

> ID：13073262
> 
> 赞同：7
> 
> 时间：2012-10-25T16:39:23.417
> 
> 标签：c#, generics, reflection, expression

我已经构建了一个方法，如果在属性上找到它，它会返回一个属性实例：

```
public static U GetPropertyAttribute<T, TProperty, U>(this T instance, Expression<Func<T, TProperty>> propertySelector, U attribute) where U : Attribute
{
   return Attribute.GetCustomAttribute(instance.GetType().GetProperty((propertySelector.Body as MemberExpression).Member.Name), typeof(U), true) as U;
} 
```

为了获得实例，我必须调用：

```
var cc = new CustomClass();
cc.GetPropertyAttribute(x => x.Name, new NullableAttribute()) 
```

它工作正常，我得到了属性类的确切实例。

但是，我不喜欢我必须使用 new NullableAttribute() 作为参数，我希望调用看起来像：

```
cc.GetPropertyAttribute<NullableAttribute>(x => x.Name) 
```

然而，这不起作用，因为一旦我删除第二个参数并在方法名称中添加 1 个泛型类型，它也开始需要其他两个。有没有办法强制该方法从 3 个通用参数中推断出 2 个？即我想指定属性类，但不想指定类名和属性名。

更新：

这是实现的代码，感谢 Jon，以及字符串解决方案的代码。我决定嵌套这个类，这样如果我为其他一些扩展类引入相同的方法，我就不会污染命名空间。

```
public static class AttributeExtensions
{
    public static ObjectProperty<T, TProperty> From<T, TProperty>(this T instance, Expression<Func<T, TProperty>> propertySelector)
    {
        return new ObjectProperty<T, TProperty>(instance, propertySelector);
    }

    public class ObjectProperty<T, TProperty>
    {
        private readonly T instance;
        private readonly Expression<Func<T, TProperty>> propertySelector;

        public ObjectProperty(T instance, Expression<Func<T, TProperty>> propertySelector)
        {
            this.instance = instance;
            this.propertySelector = propertySelector;
        }

        public U GetAttribute<U>() where U : Attribute
        {
            return Attribute.GetCustomAttribute(instance.GetType().GetProperty((propertySelector.Body as MemberExpression).Member.Name), typeof(U), true) as U;
        }
    }

    public static T GetPropertyAttribute<T>(this object instance, string propertyName) where T : Attribute
    {
        return Attribute.GetCustomAttribute(instance.GetType().GetProperty(propertyName), typeof(T), true) as T;
    }
} 
```

所以现在调用是这样的：

```
var cc = new CustomClass();
var attr = cc.From(x => x.Name).GetAttribute<NullableAttribute>(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T16:48:37.577

> 有没有办法强制该方法从 3 个通用参数中推断出 2 个？

一种常见的方法是使用具有这两个类型参数的中间类型，然后在该类型中使用泛型方法以允许您提供最后一个：

```
public static AttributeFetcher<T, TProperty> FetchFrom<T, TProperty>
    (this T instance, Expression<Func<T, TProperty>> propertySelector)
{
    return new AttributeFetcher<T, TProperty>(instance, propertySelector);     
}

public class AttributeFetcher<T, TProperty>
{
    private readonly T instance;
    private readonly Expression<Func<T, TProperty>> propertySelector;

    // Add obvious constructor

    public U Attribute<U>() where U : Attribute
    {
        // Code as before
    }
} 
```

然后你可以写：

```
cc.FetchFrom(x => x.Name).Attribute<NullableAttribte>(); 
```

鉴于您确实只需要我所知道的，您可能实际上可以制作`AttributeFetcher`非泛型。`PropertyInfo`上面的代码适用于更一般的情况。

# xml - 我在 xml 中有错误元素未声明 xml 错误

> ID：13073265
> 
> 赞同：1
> 
> 时间：2012-10-25T16:39:33.117
> 
> 标签：xml, xsd

II 在 xml 中有错误元素未声明 xml 错误。为什么我有这个错误？xsd 文件我有 xds 文件，当我写 rel 另一个属性时出现 ha 错误

```
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" `

   xmlns:xsd="http://www.w3.org/2001/XMLSchema">`
     <xsd:element name="TWM_SAD">
       <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="Export_release">
              <xsd:complexType>
                <xsd:sequence>
              <xsd:element type="xsd:string" name="Date_of_exit"/>
              <xsd:element type="xsd:string" name="Time_of_exit"/>
              <xsd:element type="xsd:string" name="Actual_office_of_exit_code"/>
              <xsd:element type="xsd:string" name="Actual_office_of_exit_name"/>
              <xsd:element type="xsd:string" name="Exit_reference"/>
              <xsd:element type="xsd:string" name="Comments"/>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
        <xsd:element name="Assessment_notice">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element type="xsd:short" name="Registration_year"/>
              <xsd:element type="xsd:string" name="Assessment_year"/>
              <xsd:element type="xsd:float" name="Total_item_taxes"/>
              <xsd:element type="xsd:string" name="Statement_number"/>
              <xsd:element type="xsd:string" name="Statement_date"/>
              <xsd:element type="xsd:string" name="Statement_serial"/>

            label      <xsd:element ref="Item"  maxOccurs="unbounded" minOccurs="0"/>

            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
        <xsd:element name="Item">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element type="xsd:string" name="Tax_code"/>
              <xsd:element type="xsd:string" name="Tax_description"/>
              <xsd:element type="xsd:string" name="Tax_amount"/>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>

      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

错误是未声明 Item 元素？在标签中我有这个错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:22:01.217

为了能够引用一个元素，你必须使它成为全局的。换句话说，你必须将声明`Item`直接移到`xsd:schema element`. 在您的情况下，与`TWM_SAD`

这是您更正且语法有效的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="TWM_SAD">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="Export_release">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element type="xsd:string" name="Date_of_exit"/>
                            <xsd:element type="xsd:string" name="Time_of_exit"/>
                            <xsd:element type="xsd:string" name="Actual_office_of_exit_code"/>
                            <xsd:element type="xsd:string" name="Actual_office_of_exit_name"/>
                            <xsd:element type="xsd:string" name="Exit_reference"/>
                            <xsd:element type="xsd:string" name="Comments"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
                <xsd:element name="Assessment_notice">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element type="xsd:short" name="Registration_year"/>
                            <xsd:element type="xsd:string" name="Assessment_year"/>
                            <xsd:element type="xsd:float" name="Total_item_taxes"/>
                            <xsd:element type="xsd:string" name="Statement_number"/>
                            <xsd:element type="xsd:string" name="Statement_date"/>
                            <xsd:element type="xsd:string" name="Statement_serial"/>
                            <xsd:element ref="Item" maxOccurs="unbounded" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            <!--
            <xsd:element ref="Item" />
            -->
            <!--
        <xsd:element name="Item">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element type="xsd:string" name="Tax_code"/>
              <xsd:element type="xsd:string" name="Tax_description"/>
              <xsd:element type="xsd:string" name="Tax_amount"/>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
            -->
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="Item">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element type="xsd:string" name="Tax_code"/>
                <xsd:element type="xsd:string" name="Tax_description"/>
                <xsd:element type="xsd:string" name="Tax_amount"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

# javascript - jquery - 将引用 dom 元素的变量与选择器混合

> ID：13073270
> 
> 赞同：2
> 
> 时间：2012-10-25T16:40:10.767
> 
> 标签：javascript, jquery, jquery-selectors, nested

我通常为经常重用的 DOM 元素创建变量，如下所示：

```
var $dom_element = $('#dom_element); 
```

这是我的设置：

```
<div id="dom_element">
  <div class="child_element">
  <div class="child_element">
</div> 
```

我想知道是否可以将此变量与子选择器混合以获取子元素。我想它会是这样的：

```
var $child_element = $($dom_element + ' .child_element); 
```

如果是这样，这样做与仅仅说：

```
$('.child_element); 
```

考虑到这两个元素都可能深深嵌套在一个大型站点中这一事实？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:42:21.513

和

```
var $dom_element = $('#dom_element); 
```

我将使用以下内容来获取子元素

```
var $child_element = $dom_element.find(".child_element");//I prefer this one, it is easier to read. 
```

或者

```
var $child_element = $(".child_element", $dom_element); 
```

从我的研究/阅读来看，如果您要多次引用它，将元素设置为变量似乎是最好的。这样 jQuery 就不必多次搜索 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:44:32.537

关于您的选择器，当使用裸类作为子选择器时，您可能会遇到麻烦。如果您有多个子节点使用同一个类怎么办？

.find() 正如其他人所建议的那样有效。您也可以使用 .children()：

```
var $kids = $dom_element.children('.child_element'); 
```

[http://api.jquery.com/children/](http://api.jquery.com/children/)

.find() 和 .children() 之间的区别在于 .children() 只会在 DOM 树的下一级查找。.find() 将递归地遍历所有可能的子节点以匹配您的选择器。

# php - 关于 php 5.x 通过 dom 文档创建 xml

> ID：13073274
> 
> 赞同：0
> 
> 时间：2012-10-25T16:40:38.310
> 
> 标签：php, xml, dom

我正在使用`DOMDocument`PHP 类来创建一个 xml 文件，我的代码是：

```
 $xmlObject = new DOMDocument('1.0', 'utf-8');
    //root node -- books
    $books = $xmlObject->createElement('books');
    //book node
    $book = $xmlObject->createElement('book');
    //book node's attribute -- index
    $index = new DOMAttr('index', '1');
    $book->appendChild($index);
    //name node
    $name = $xmlObject->createElement('name', 'Maozedong');
    //name node's attribute -- year
    $year = new DOMAttr('year', '1920');
    $name->appendChild($year);
    $book->appendChild($name);
    //story node
    $story = $xmlObject->createElement('story');
    $title = $xmlObject->createElement('title', 'Redrevolution');
    $quote = $xmlObject->createElement('quote', 'LeaveoffHunan');
    $story->appendChild($title);
    $story->appendChild($quote);
    $book->appendChild($story);
    $books->appendChild($book);
    if ($xmlObject->save('xml/books.xml') != false){
        echo 'success';
    }else{
        echo 'error';
    } 
```

books.xml 的内容只有一行：

```
<?xml version="1.0" encoding="utf-8"?> 
```

另一个节点不存在。我的代码中是否有任何错误？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-25T16:44:17.917

我忘记将书籍节点附加到 $xmlObject。添加：$xmlObject->appendChild($books);

# c++ - qt 与 xml 和 qnetworkaccessmanager

> ID：13073276
> 
> 赞同：1
> 
> 时间：2012-10-25T16:40:53.630
> 
> 标签：c++, xml, qnetworkaccessmanager

我正在尝试制作一个 Qt 项目，其中我只有一个简单`vector<todo_list>`的条目（名称、描述、日期）。我想将这些条目保存为 xml 文件并将其上传到服务器。此外，我想从我的向量中的服务器重新加载 xml。`QString``QDate`

上传`QNetworkAccessManager`将是我猜的选项，但我只知道如何上传 txt 文件。

也许有人可以帮我解决这个问题。

# javascript - 通过获取视口宽度动态设置html body的边距

> ID：13073278
> 
> 赞同：1
> 
> 时间：2012-10-25T16:41:06.223
> 
> 标签：javascript, jquery

我正在尝试通过获取视口宽度来动态设置 id:main 的边距。我在页面中有许多相同宽度的块。因此，我想通过动态计算剩余宽度来适应尽可能多的块并使其居中。块大小为 240px，填充为 20px

我已经尝试了两个代码，我被困了一段时间。

```
var width=$(window).width()
var stickies=Math.floor(width/240);  //* calculate how many can fit in a row
var mrg=(width-(stickies*240)-20);//*calculating remaining width 
var mrg=(width-(stickies*240)-20)/2;
var el1=$('#main');
var el2=$('#main');
el1.css('margin-left',mrg+'px');
el2.css('margin-right',mrg+'px'); 

var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName('body')     [0],x=w.innerWidth||e.clientWidth||g.clientWidth;
var stickies=Math.floor(var x/240);
var mrg=(var x-(var stickies*240)-20)/2;
var el1=$('#main');
var el2=$('#main');
el1.css('margin-left',mrg+'px');
el2.css('margin-right',mrg+'px'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:55:17.047

## 简洁版本

你应该需要一些类似的东西

```
var width=$(window).width();
var stickies=Math.floor(width/240);  //* calculate how many can fit in a row
var mrg=(width-(stickies*240)-20)/2; //*calculating remaining width 
$('#main').css({'margin-left': mrg+'px', 'margin-right': mrg+'px'}); 
```

## 长版

您的代码需要大量修复。

```
var el1=$(#main); 
```

需要更改为

```
var el1=$('#main'); 
```

因为目前你没有选择任何东西。您需要将选择器放在引号中。

* * *

我也不明白为什么你对同一个元素使用 2 个变量。你可以做类似的事情

```
$('#main').css({'margin-left': mrg+'px', 'margin-right': mrg+'px'}); 
```

或类似的规定。

* * *

最后，

```
var mrg=(width-(stickies*240)-20);//*calculating remaining width 
var mrg=(width-(stickies*240)-20)/2; 
```

第二行将覆盖第一行。这是一个错字还是你想在这里做些什么？

# html - 是否有任何 HTML 元素属性用于提供有关动态内容的信息

> ID：13073279
> 
> 赞同：0
> 
> 时间：2012-10-25T16:41:07.333
> 
> 标签：html, dynamic, seo, ria

我记得读过一篇关于一组特定属性的文章，这些属性可用于描述包含动态数据的元素的内容、类型、更新频率等。

它背后的整个想法是指定 Web 应用程序中包含动态数据的部分，并为机器人/爬虫提供更多信息。

只是为了了解这个概念，这是一个示例代码（***我将使用的属性当然是组成的***）

```
<div id="username" dataType="string" updateFrequency="rarely">Theo</div>
<div id="score" dataType="integer" updateFrequency="daily">9001</div> 
```

我知道这真的很模糊。也许外面的人知道我在说什么

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:53:03.263

[ARIA](http://www.w3.org/TR/wai-aria/)（可访问的富 Internet 应用程序）属性用于提高可访问性，而不是用于搜索引擎。它们可以用来描述元素的作用，例如说一个`div`元素实际上是一个进度条或者说a`span`只是为了装饰。

所有软件通常都会忽略发明的属性。根据 HTML5 草案，在实践中，您可以使用`data-`* 属性将任何不可见的数据与元素相关联，但根据定义，它们是特定于应用程序的，并且被搜索引擎忽略。

搜索引擎通常对单个元素的更新率不感兴趣。他们根据自己的观察分析*页面*的更新率。

有一些方法可以在标记中将元数据与特定元素相关联，这种方式可以被主要搜索引擎观察到；参见[Schema.org](http://schema.org/)。但在实践中，这种标记似乎只对主要商业或社区网站中的页面的搜索引擎产生影响。对于 Joe Q. Author 的页面，它们可能是只写信息（目前）。

# python - 如何在单元测试的类方法中模拟 python 的 datetime.now()？

> ID：13073281
> 
> 赞同：49
> 
> 时间：2012-10-25T16:41:23.620
> 
> 标签：python, django, unit-testing, testing, mocking

我正在尝试为具有以下方法的类编写测试：

```
import datetime
import pytz

class MyClass:
    def get_now(self, timezone):
        return datetime.datetime.now(timezone)

    def do_many_things(self, tz_string='Europe/London'):
        tz = pytz.timezone(tz_string)
        localtime_now = self.get_now(tz)
        ...
        return things 
```

我想对其进行测试，为此我需要确保`datetime.datetime.now()`调用返回可预测的内容。

我一直在阅读很多在测试中使用[Mock](http://www.voidspace.org.uk/python/mock/)的示例，但没有找到与我需要的东西非常相似的东西，而且我不知道如何在测试中使用它。

我将`get_now()`方法分开，以防它更容易模拟，而不是`datetime.datetime.now()`，但我仍然很难过。关于如何使用 Mock 为此编写 UnitTests 的任何想法？（这一切都在 Django 中，fwiw；我不确定这在这种情况下是否会有所不同。）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-05-11T13:36:22.673

你可以使用[freezegun](https://github.com/spulec/freezegun)：

```
from freezegun import freeze_time

def test():
    assert datetime.datetime.now() != datetime.datetime(2012, 1, 14)
    with freeze_time("2012-01-14"):
        assert datetime.datetime.now() == datetime.datetime(2012, 1, 14)
    assert datetime.datetime.now() != datetime.datetime(2012, 1, 14) 
```

它基本上`datetime`模拟模块调用。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-25T16:46:01.040

您将创建一个返回特定日期时间的函数，该函数本地化为传入的时区：

```
import mock

def mocked_get_now(timezone):
    dt = datetime.datetime(2012, 1, 1, 10, 10, 10)
    return timezone.localize(dt)

@mock.patch('path.to.your.models.MyClass.get_now', side_effect=mocked_get_now)
def your_test(self, mock_obj):
    # Within this test, `MyClass.get_now()` is a mock that'll return a predictable
    # timezone-aware datetime object, set to 2012-01-01 10:10:10. 
```

这样您就可以测试是否正确处理了生成的时区感知日期时间；其他地方的结果应该显示正确的时区，但会有一个可预测的日期和时间。

模拟时使用该`mocked_get_now`函数作为副作用`get_now`；每当代码调用时`get_now`，调用由 记录`mock`，*并被* `mocked_get_now`调用，它的返回值用作返回给调用者的值`get_now`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T16:51:15.447

我正在使用`date`，但同样的想法应该适用于`datetime`：

```
class SpoofDate(date):
    def __new__(cls, *args, **kwargs):
        return date.__new__(date, *args, **kwargs) 
```

...

```
from mock import patch

@patch('some.module.date', SpoofDate)
def testSomething(self):
    SpoofDate.today = classmethod(lambda cls : date(2012, 9, 24)) 
```

哪里`some.module`进口`date`。补丁正在替换导入`date`的`SpoofDate`，然后您可以重新定义以执行任何您想要的操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T14:47:05.287

我会使用“testfixtures”包中的助手来模拟你现在调用的日期时间类（）：

[http://packages.python.org/testfixtures/datetime.html#datetimes](http://packages.python.org/testfixtures/datetime.html#datetimes)

这样，您就可以一直测试您拥有的所有案例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-10T15:15:27.730

本来问了这个问题...

正如@Jocelyn delalande 所建议的那样，我多年来一直很高兴地使用[freezegun](https://github.com/spulec/freezegun)。

另一种选择是[python-libfaketime](https://github.com/simon-weber/python-libfaketime/)，它可以比 freezegun 快得多，但在 Windows 上不起作用，而且听起来有点繁琐。

较新的选项是[time-machine](https://github.com/adamchainz/time-machine)，在[这篇博客文章](https://adamj.eu/tech/2020/06/03/introducing-time-machine/)中介绍了比较这三个选项。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2022-01-05T18:44:15.677

这是执行此 IMO 的最优雅的方法：

```
import datetime
from unittest import mock

test_now = datetime.datetime(1856, 7, 10)
with mock.patch('datetime.datetime', wraps=datetime.datetime) as dt:
    print(dt.now()) # calls the real thing
    dt.now.return_value = test_now
    print(dt.now()) # calls the mocked value 
```

这里的优点是你不需要通过测试模块的本地属性来修补 datetime 模块，它支持调用 unmocked 方法，并且不需要任何外部导入。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-07T16:12:36.790

> 使用 unittest.mock 补丁

```
from unittest.mock import patch

@patch('MyClass.datetime')
def test_foo(self, mock_datetime):
    mock_datetime.datetime.now.return_value = datetime.datetime(2019, 5, 7) #SOME_MOCKED_DATE 
```

请注意，**我们正在覆盖仅在我们的类中导入的 datetime 模块**

我们正在为其编写测试的类：

```
import datetime

class MyClass:
    def foo():
       localtime_now = datetime.datetime.now(timezone) 
```

我们不必将它作为 get_now() 方法分开，只是为了更容易模拟。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-10T11:54:03.960

如果您不想安装任何东西，这是最简单的方法。简单地使用，模拟类 -

```
class NewDt(datetime.date):
    @classmethod
     def now(cls):
           return datetime.datetime.strptime('2020-07-10 05:20:20', '%Y-%m-%d %H:%M:%S') 
```

并在模拟功能之前使用此补丁

```
 @mock.patch('module path', NewDt) 
```

# c# - 发布网站得到空文件夹

> ID：13073284
> 
> 赞同：22
> 
> 时间：2012-10-25T16:41:48.173
> 
> 标签：c#, asp.net, visual-studio-2012, publishing

我有使用 Visual Studio 构建项目，但是当我想发布我的网站时，我得到一个空文件夹，那里什么也没有！没有错误或警告，

```
Building directory '/project/Users/'.
Pre-compilation Complete
------ Publish started: Project: F:\...\project\, Configuration: Debug Any CPU ------
Connecting to site E:\project...
Publishing directory /...
========== Build: 1 succeeded or up-to-date, 0 failed, 0 skipped ==========
========== Publish: 1 succeeded, 0 failed, 0 skipped ========== 
```

e:\project 为空

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-18T06:52:55.357

构建您的项目（而不是重建）它将起作用:)

或者

其他解决方法是先在调试模式下发布，然后更改设置并在发布模式下发布。它肯定会起作用:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-06T17:59:29.390

就我而言，我必须删除 .csproj 文件中的一个小项目。我必须卸载项目，编辑 .csproj，然后查找并删除以下 XML 标记：

```
<Target Name="GatherAllFilesToPublish">     
</Target> 
```

一旦我重新发布，一切都很好。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-20T11:28:21.910

尝试先在发布模式下构建项目，然后发布。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-15T09:37:49.650

创建一个新的配置文件有助于解决我的问题。

[如何：在 Visual Studio 中使用一键发布部署 Web 项目](https://msdn.microsoft.com/en-us/library/dd465337(v=vs.110).aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-03T20:00:58.700

`visual studio 2013`只有当您使用现有的发布配置文件/设置时，才会在发布时生成空文件夹。现有的配置文件设置可能来自您签出的代码或从其他来源获得。`The solution`是从头开始创建您自己的发布配置文件并为其创建一个新文件夹。

![在此处输入图像描述](../Images/997660de9bebbc3f3ddd7091fd9c11f9.png)

从头开始向导。

![在此处输入图像描述](../Images/de89fc3b739d5c49d3418f0f86289839.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-28T03:22:21.260

尝试检查文件的`Properties` **>** `Build Action`是否设置为`None`. 如果是，它不会复制您的文件，只会复制文件夹。在我的项目中，它设置为

> 构建动作 = 内容

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-24T13:17:25.667

重新创建发布配置文件，这应该可以解决

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-31T11:25:54.823

我在使用 vs2015 更新 3 时遇到了这个问题。我更改了构建文件夹（由于路径太长错误），我可以在发布输出中看到最后的步骤：

> 将所有文件复制到下面的临时位置以进行打包/发布：
> 
> 3>D:\DEPLOYED_SITES\BUILD_TEMP\Package\PackageTmp

所以我至少可以访问 PackageTmp 文件夹中的文件。我可以创建一个构建后事件，它可以将构建文件复制到正确的输出文件夹。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-03T20:34:16.097

在我的情况下，我在项目属性 << Package/Publish Web *" 部分中检查了“包括在 IIS express 中配置的 IIS 设置”。一旦我取消选中此选项，发布就会按预期工作。

# java - 响应在 Java 中通过 HTTPS 失败

> ID：13073285
> 
> 赞同：1
> 
> 时间：2012-10-25T16:41:51.030
> 
> 标签：java, ssl, https

我们在网站上运行爬虫以使我们的信息保持最新。[像这样的](https://www.capitallightingfixture.com/)一些网站允许使用浏览器进行标准导航，但在使用标准 Java 库时它们不会发送响应。这是我用来访问主页（索引）页面的代码，

```
 try
    {
        URL my_url = new URL("https://www.capitallightingfixture.com");

        URLConnection u = my_url.openConnection();

        if ( u instanceof HttpURLConnection )
        {
            HttpURLConnection http_u = (HttpURLConnection)u;

            System.out.println(http_u.getResponseCode());
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    } 
```

运行时，该程序会抛出以下错误

`javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target`

根据我对这些错误的了解，当 Java 无法验证服务器提供的证书时会抛出这些错误。然而，正如我上面提到的，谷歌浏览器在导航到页面时没有问题，它甚至会验证证书（不会引发安全错误）。

有没有办法可以覆盖 Java 并允许它接收响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:01:49.447

我认为您尝试访问的 ip 正在使用自签名证书。试试以下两个链接。

[如何在特定连接上使用不同的证书？](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)

[在java中使用自签名证书](https://stackoverflow.com/questions/13015910/using-self-signed-certificate-in-java)

# javascript - fancyBox 上的关闭按钮不适用于 Google Chrome

> ID：13073286
> 
> 赞同：-2
> 
> 时间：2012-10-25T16:41:52.833
> 
> 标签：javascript, jquery, html, google-chrome, fancybox-2

> **可能重复：**
> [FancyBox 上的关闭按钮不起作用](https://stackoverflow.com/questions/13071616/close-button-on-fancybox-not-working)

fancyBox 2.0 上的关闭按钮不适用于 Google Chrome。但是它适用于 Explorer 和 Firefox。

**编辑**：（移自评论）这是链接[http://botarela.fr/Poaceae/Description%20detail/Epillet.html](http://botarela.fr/Poaceae/Description%20detail/Epillet.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:47:12.220

当您只需要一个（最好是最新版本）时，您正在加载两个 jQuery 实例。

[你可以在这里](https://stackoverflow.com/a/13021907/1055987)看到一个类似的问题，因为那。

# android - 带有android位图的奇怪的OutOfMemoryError：为什么显示然后隐藏包含的视图会避免它？

> ID：13073288
> 
> 赞同：2
> 
> 时间：2012-10-25T16:42:03.443
> 
> 标签：android, camera, out-of-memory

我是 stackoverflow 的常客，直到我遇到了一个我真的找不到任何存在的问题。所以这是我的第一个问题：

我正在构建一个相机应用程序，用户可以在其中拍摄几张照片，然后再继续下一步。我想让用户在拍照时查看和删除图片，所以我编写了一个自定义视图来显示带有删除按钮的已捕获图像的缩略图。这些“Thumbviews”包含在位于 camerapreview-SurfaceView 顶部的 LinearLayout 中，默认可见性为“GONE”。用户可以使用按钮切换可见性。

一切正常，但我有一个问题：当我拍摄超过 10 张照片时，我会收到 OutOfMemoryError。缩略图非常小，不占用大量内存，而且我回收了原始位图并在创建缩略图后执行 System.gc()。奇怪的是，当我按下将包含 LinearLayout 的可见性设置为“VISIBLE”并再次设置为“GONE”的按钮时，显然所有内存都被释放，我可以拍摄比 10 多得多的照片。我试过切换代码中的可见性，但这不起作用，并且还会破坏绘图缓存。除了按我的可见性按钮 2 次之外，还必须有另一种方法来释放记忆；-)

这是 ThumbView 的代码：

```
public class ThumbView extends View {

private Bitmap mBitmap;
private Bitmap mScaledBitmap;
private int mWidth, mHeight, mPosX, mPosY;
static private Bitmap mDeleteBitmap;
private File mPreviewFile;
private File mFinalFile;
private Orientation mOrientation;
private boolean mRed;

public ThumbView(Context context, Bitmap bitmap, File previewFile, File finalFile, Orientation orientation) {
    super(context);
    mBitmap = bitmap;
    mPreviewFile = previewFile;
    mFinalFile = finalFile;
    mOrientation = orientation;
    if(mDeleteBitmap != null)
        return;
    mDeleteBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.deletebutton);
}

public void deleteFile()
{
    if(mPreviewFile != null && mPreviewFile.exists())
    {
        mPreviewFile.delete();
    }
    if(mFinalFile != null && mFinalFile.exists())
    {
        mFinalFile.delete();
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    mWidth  = MeasureSpec.getSize(widthMeasureSpec);
    setMeasuredDimension(mWidth, mWidth);

    if(mBitmap == null)
        return;
    mHeight = mWidth;

    float bitmapRatio = mBitmap.getWidth() / (float) mBitmap.getHeight();

    if(bitmapRatio > 1)
    {
        mScaledBitmap = Bitmap.createScaledBitmap(mBitmap, mWidth,
                (int)(mWidth/bitmapRatio), true);
        mPosY = (mWidth-mScaledBitmap.getHeight())/2;
    }
    else
    {
        mScaledBitmap = Bitmap.createScaledBitmap(mBitmap, (int)(mHeight*bitmapRatio),
                mHeight, true);
        mPosX = (mHeight-mScaledBitmap.getWidth())/2;
    }

    Matrix mtx = new Matrix();
    mtx.postRotate(-90);

    Bitmap b = Bitmap.createBitmap(mScaledBitmap, 0, 0, mScaledBitmap.getWidth(), mScaledBitmap.getHeight(), mtx, true);
    mScaledBitmap = b;
    b = null;

    mBitmap.recycle();
    mBitmap = null;
    System.gc();
}

public boolean deleteButtonPressed(float x, float y)
{
    Rect r = new Rect(mPosY, mPosX, mPosY+mDeleteBitmap.getWidth(),
            mPosX+mDeleteBitmap.getHeight());
    if(r.contains((int)x, (int)y))
    {
        return true;
    }
    return false;
}

public void setRed(boolean red)
{
    mRed = red;
    invalidate();
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(mScaledBitmap, mPosY, mPosX, new Paint());
    canvas.drawBitmap(mDeleteBitmap, mPosY, mPosX, new Paint());
    if(mRed)
        canvas.drawColor(0x55FF0000);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:24:04.703

“为什么它不坏”的答案很简单。当子视图（或容器）的可见性设置为 GONE 时，父布局将（通常）跳过它，甚至不费心渲染它。它不是“隐藏的”，它根本不存在。

如果您的缩略图真的是缩略图，那么您不应该内存不足，但是，我认为您没有对它们进行下采样（我可能是错的）。你怎么给他们看？你应该分享那段代码。（新照片 -> 缩略图 -> 图像视图）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:29:32.793

我太傻了。显然，当 View 保持 GONE 时不会调用我的 onMeasure()，因此原始位图保留在内存中。我将可见性更改为 INVISIBLE，现在一切正常。

# c# - 为什么我的线程没有停止？

> ID：13073293
> 
> 赞同：3
> 
> 时间：2012-10-25T16:42:12.667
> 
> 标签：c#, multithreading, thread-abort

我有以下代码，我开始`Thread`使用`ParameterizedThreadStart`对象作为构造函数参数：

```
static object obj = new object();

static void Main(string[] args)
{
    ParameterizedThreadStart start = (o) =>
    {
        ThreadTest(o);
    };

    var t = new Thread(() => start(obj));
    t.Name = "t";
    t.Start();

    Thread.Sleep(3000);
    obj = null;

    // Why the Thread (t) continue here??
    Console.ReadKey();
}

private static void ThreadTest(object o)
{
    while (o != null)
    {
        Console.WriteLine(Thread.CurrentThread.Name);
        Thread.Sleep(1000);
    }
} 
```

在我在方法中设置之后`obj`，参数仍然是一个有效的对象，为什么？ 如何将参数设置为using ？`null``ThreadTest``o`
`o``null``obj`

[我宁愿不使用 Thread.Abort](http://msmvps.com/blogs/peterritchie/archive/2007/08/22/thead-abort-is-a-sign-of-a-poorly-designed-program.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T16:46:55.867

Because in C#, references are passed by value.

So, changing obj to refer to NULL in Main will not change the object to which o refers in ThreadTest.

Instead, you should keep both methods referring to the same object, and just change a property of the object to signal that the thread should exit.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T16:45:36.357

`o` is a local parameter in your `ThreadTest` method.
Assigning the `obj` field does not affect that parameter.

You can fix this by getting rid of all of the parameters and using the field directly. Once you do that, your code will still be broken, because the field is not volatile.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T16:53:52.677

您在调用该方法时传递了引用的值。这意味着对内部引用的任何更改都不会在外部看到，反之亦然。您可能希望直接在全局变量级别同步：

```
static volatile object obj = new object();

static void Main(string[] args)
{
    ThreadStart start = () =>
    {
        ThreadTest();
    };

    var t = new Thread(() => start());
    t.Name = "t";
    t.Start();

    Thread.Sleep(3000);
    obj = null;

    // Why the Thread (t) continue here??
    Console.ReadKey();
}

private static void ThreadTest()
{
    while (obj != null)
    {
        Console.WriteLine(Thread.CurrentThread.Name);
        Thread.Sleep(1000);
    }
} 
```

还要注意`volatile`对象上的 。这将确保读取该值的其他线程可以看到一个线程的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T16:47:04.117

Try using a Boolean to control the thread stop like so:

```
static volatile bool runThread = true;

static void Main(string[] args)
{
    var t = new Thread(ThreadTest);
    t.Start();

    Thread.Sleep(3000);
    runThread = false;

    Console.ReadKey();
}

private static void ThreadTest()
{
    while (runThread)
    {
        Console.WriteLine(Thread.CurrentThread.Name);
        Thread.Sleep(1000);
    }
} 
```

# c++ - 同时写入内存和磁盘

> ID：13073294
> 
> 赞同：0
> 
> 时间：2012-10-25T16:42:18.737
> 
> 标签：c++, c, memory

我正在开发一个应用程序，该应用程序需要将某个时间**t**的数据保存在内存中（可配置），并将另一个时间**t2**的数据保存在磁盘上的持久存储中。这背后的原因是，经常询问的数据将存储在内存中并更快地检索，而较旧的、不经常使用的用户数据将存储在磁盘上并可以检索。

问题是：我不能简单地写入内存，然后在时间**t**之后将内存缓冲区的全部内容复制到磁盘，就像应用程序崩溃一样，内存中存储的最新数据将丢失。因此，每次收到新数据时，我都需要将其同时存储在内存和磁盘中。

我的问题是，有没有一种有效的方法将内存中的缓冲区镜像到磁盘的一部分？我正在寻找一种比在每次数据更新时写入内存然后写入磁盘更有效的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:44:11.560

您可以对文件进行内存映射，unix 和 windows 系统都支持这一点（但使用不同的 API）。之后，您可以简单地写入该内存位置，并在需要时进行同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:28:41.057

[提升内存映射文件](http://www.boost.org/doc/libs/1_51_0/libs/iostreams/doc/classes/mapped_file.html)

> mapped_file_source、mapped_file_sink 和 mapped_file 类提供对**Windows**和**POSIX**系统上的内存映射文件的访问

[**现场演示**](http://coliru.stacked-crooked.com/a/5eb28d804389c7ee)

```
#include <boost/iostreams/device/mapped_file.hpp>
#include <boost/range/istream_range.hpp>
#include <boost/range/algorithm.hpp>
#include <boost/range/irange.hpp>
#include <iostream>
#include <iterator>
#include <fstream>
#include <string>

using namespace std;
using namespace boost;
using namespace boost::iostreams;

int main()
{
    string filename("test.mmap");
    { // Prepare file
        ofstream f(filename);
        copy(irange(0,255), ostreambuf_iterator<char>(f));
    }
    { // Work with memory mapped file
        mapped_file mm(filename);
        fill(mm, 0); // Works as range
        char *data=mm.data(); // Or as raw memory pointer
        copy("String in memory", data); // Copy to raw memory
    }
    { // print file contents
        ifstream f(filename);
        copy(istream_range<char>(f), ostream_iterator<char>(cout));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:15:07.243

最好的方法是先写入内存，然后写入磁盘。如果内存已满，请在写入内存之前删除最少使用的项目。

另一种技术是有一个单独的执行线程，将新项目写入磁盘。线程将唤醒，检查新项目并将其写入磁盘。这些项目将被标记为“不是新的”。然后线程重新进入睡眠状态。睡眠持续时间应该足够长，以便在内存中存储多条记录，但要足够快，以便在断电或崩溃期间丢失更少的记录。

# javascript - Django中的jQuery帖子

> ID：13073298
> 
> 赞同：2
> 
> 时间：2012-10-25T16:42:36.670
> 
> 标签：javascript, jquery, django

我是 django 和 jquery 的新手，我尝试实现一个非常简单的 $post 请求。

这是我所做的：

我的js：

```
 $.post(/mysite/blabla/, { 
 score : 40
 }); 
```

我的看法：

```
 def blabla(request):
    score_user = 20
    if request.method == 'POST':
       score_user = request.POST['score'] 
```

控制台未指示发布请求的任何错误。问题是当我渲染“score_user”时，我总是得到 20，而我期望得到 40。

欢迎任何帮助。谢谢

编辑：

我的模型：

```
 class UserProfile(FacebookProfileModel):
      user = models.OneToOneField(User)
      comment = models.BooleanField()
      score = models.IntegerField(null=True, default=0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:19:06.650

```
$.post('/mysite/blabla/', {'score': 40}, function(data) { 
    $('.result').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:15:39.583

您需要使用 url 编码您传递给视图的参数`&`。除了 POST 请求之外，`csrfmiddlewaretoken`除非您禁用它，否则它是必需的。将`status`根据要求发出警报。

```
$.post('/mysite/blabla/','score=40&csrfmiddlewaretoken='+'{{csrfmiddlewaretoken}}').
success(function(data, status, xhr) { alert(status)}).
error(function(data, status, xhr) { alert(status)}) 
```

`.success`and`.error` [语法](http://api.jquery.com/jQuery.ajax/)是 jquery [promise](http://api.jquery.com/promise/)接口的一部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:39:03.140

尝试这个：

```
 $.post("/mysite/blabla/", { score : 40 }, function(data){
   //  alert(data);
     $("#results").html(data);
 }); 
```

html:

```
Score: <span id='results'></span> 
```

# php - 使用js将几个参数传递给php

> ID：13073299
> 
> 赞同：1
> 
> 时间：2012-10-25T16:42:39.277
> 
> 标签：php, javascript

尝试通过 JS 将一些参数传递给 PHP 时，我遇到了一些问题。

情况如下：

HTML：

```
<form id="numbtns" method="post" action="imphp.php">
  <button id="1" onClick="pass(this.id)">1</button>
  <button id="2" onClick="pass(this.id)">2</button>
  <button id="3" onClick="pass(this.id)">3</button>
  <button id="confirm" onClick="save()">submit</button>
</form> 
```

JS：

```
pass(clicked_id) {
     var btn = document.getElementById(clicked_id);

     **// I have no idea what to do next to give the ids to the php file.**

     }

save() {
**// I want function save() to collect the parameters from function pass(), and pass      them to 'imphp.php' when submit button is clicked. I'm stuck here.**
} 
```

PHP：

```
// connection part, let's skip it.

...

$num = $_POST['num'];
$query = sprintf("SELECT id, num FROM tb WHERE num = $num"); 
```

我知道这对你来说可能是一个快速而愚蠢的问题，但我几个小时都想不通。所以......谁能帮助我，我将非常感激。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:54:07.020

我认为您不需要为此使用Javascript。您要做的就是将表单发布到 PHP 页面，对吗？

```
<form id="numbtns" method="post" action="imphp.php">
  <input type="radio" name="num" value="1" /> 1<br />
  <input type="radio" name="num" value="2" /> 2<br />
  <input type="radio" name="num" value="3" /> 3<br />
  <input type="submit" value="Save" />
</form> 
```

使用按钮对我来说毫无意义，所以我将它们改为单选按钮。用户将检查一个，然后单击“保存”按钮提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T16:45:43.987

You need to use AJAX... i would recommend simplifying the process with a javascript library like jQuery... here is a tutorial using jQuery / AJAX / PHP: [http://www.php4every1.com/tutorials/jquery-ajax-tutorial/](http://www.php4every1.com/tutorials/jquery-ajax-tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T16:56:26.450

这是几种形式之一的一个非常常见的问题，您可以通过查看此页面右侧的**相关标题下看到。**

我经常看到这一点，而且许多人对 PHP 和 Javascript 如何工作的理解似乎存在根本缺陷，所以我想把它扔掉。

PHP 在*服务器*上运行，执行 .php 页面和那里的模块中的代码，并生成发送到浏览器的输出。PHP 现在完成了。停了下来。菲尼。您的 PHP 代码不再运行。

Web 浏览器接收输出，构建 DOM 树，并开始将 HTML 呈现为页面并执行 Javascript。Javascript*无法*将参数传递给 PHP，因为 PHP*不再运行*。它已终止执行。卡普特。此外，Javascript 在*客户端*机器上的浏览器中运行，而 PHP 在*服务器*上运行。

您*可以*做的是调用一些新的 PHP（或重新调用相同的 PHP 代码来做其他事情），这通常是通过从 Javascript 进行 AJAX 调用来完成的，正如@Jeffery A Wooden 在他的回答中所建议的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T16:51:00.450

HTML，虽然我建议将按钮元素更改为`<input type="button" ...>`元素

```
<form id="numbtns" method="post" action="imphp.php">
    <input type="hidden" name="buttonID" value="1" />
    <input type="button" onClick="pass(this)" value="1" />
    <input type="button" onClick="pass(this)" value="2" />
    <input type="button" onClick="pass(this)" value="2" />
    <input type="submit" id="confirm" value="Submit" />
</form> 
```

Javascript：

```
function pass(button) {
    document.getElementById("buttonId").value = button.value;

} 
```

# java - 如何在双/嵌套循环中脱离主/外循环？

> ID：13073300
> 
> 赞同：39
> 
> 时间：2012-10-25T16:42:40.377
> 
> 标签：java, loops, syntax, for-loop, break

如果我在一个循环中有循环并且一旦`if`满足一个语句我想打破主循环，我应该怎么做？

这是我的代码：

```
for (int d = 0; d < amountOfNeighbors; d++) {
    for (int c = 0; c < myArray.size(); c++) {
        if (graph.isEdge(listOfNeighbors.get(d), c)) {
            if (keyFromValue(c).equals(goalWord)) { // Once this is true I want to break main loop.
                System.out.println("We got to GOAL! It is "+ keyFromValue(c));
                break; // This breaks the second loop, not the main one.
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-25T16:44:11.927

使用带标签的中断：

```
mainloop:
for(){
 for(){
   if (some condition){
     break mainloop;
   }
  }
} 
```

* * *

**另见**

*   *[Java 代码中的“循环：”。这是什么，为什么要编译？](https://stackoverflow.com/questions/3821827/loop-in-java-code-what-is-this-why-does-it-compile-and-generally-wtf/3821841#3821841)*
*   [文档](http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.7)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-25T16:44:03.770

您可以在循环中添加标签，并使用它`labelled break`来打破适当的循环：-

```
outer: for (...) {
    inner: for(...) {
        if (someCondition) {
            break outer;
        }
    }
} 
```

有关更多信息，请参阅这些链接：

*   *[分支语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)*
*   [JLS - 中断语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-25T16:45:03.787

您可以`return`从该功能中进行控制。或者使用丑陋的`break labels`方法:)

如果您的语句之后还有其他代码部分`for`，您可以重构函数中的循环。

IMO，不鼓励在 OOP 中使用中断和继续，因为它们会影响可读性和维护。当然，在某些情况下它们很方便，但总的来说我认为我们应该避免它们，因为它们会鼓励使用 goto 样式编程。

显然，这个问题的变化已经发布了很多。[在这里](https://stackoverflow.com/a/11133277/1613867)，彼得使用标签提供了一些好的和奇怪的用途。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-25T20:55:34.210

对于 Java 来说，标记中断似乎是要走的路（基于其他答案的共识）。

但是对于许多（大多数？）其他语言，或者如果你想避免任何`goto`类似的控制流，你需要设置一个标志：

```
bool breakMainLoop = false;
for(){
    for(){
        if (some condition){
            breakMainLoop = true;
            break;
        }
    }
    if (breakMainLoop) break;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T16:54:28.763

纯娱乐：

```
for(int d = 0; d < amountOfNeighbors; d++){
    for(int c = 0; c < myArray.size(); c++){
        ...
            d = amountOfNeighbors;
            break;
        ...
    }
    // No code here
} 
```

评论`break label`：这是一个前进的goto。它可以中断任何语句并跳转到下一条：

```
foo: // Label the next statement (the block)
{
    code ...
    break foo;  // goto [1]
    code ...
}

//[1] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-23T21:10:47.563

对于初学者来说最好和最简单的方法：

```
outerloop:

for(int i=0; i<10; i++){

    // Here we can break the outer loop by:
    break outerloop;

    innerloop:

    for(int i=0; i<10; i++){

        // Here we can break innerloop by:
        break innerloop;
    }
} 
```

# php - 使用 Wordpress 设计网站（不是博客）

> ID：13073302
> 
> 赞同：-1
> 
> 时间：2012-10-25T16:42:53.473
> 
> 标签：php, html, web-services, wordpress, content-management-system

我有一些关于使用 Wordpress CMS 创建网站的问题。

*   对于小型客户端项目，开发人员通常是从头开始创建自己的主题，还是实现现有主题并稍微自定义？

*   假设所有使用 Wordpress 创建的网站通常是针对一个或多或少是静态的、没有博客的网站吗？采用主题并使网站静态化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:58:20.123

我几乎每天都用 Wordpress 作为 CMS 来构建网站。

我们通常在设计阶段和模型之后采取的过程是使用 wordpress 核心主题作为基础，因为所有必要的标签和 php 功能都已经包含在内。然后重写html，编写css，然后编写任何必要的javascript。

然而，很少有网站如此简单，大部分时间我们必须构建自定义帖子类型来处理和显示不同类型的内容。值得庆幸的是，这在当前版本的 wordpress 中相对简单。

要回答您的问题，如果您从未使用 wordpress 开发或设计过，那么您的建议是一个很好的起点。从一个可行的起点出发，在该结构上删除、编辑和构建意味着您始终可以撤消您的更改并退回到需要做的事情的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:58:22.787

正如 Catcall 所指出的，这可能属于“开发和管理最佳实践”并且是主题，尽管它可能在 wordpress.stackexchange.com 中。总之，一一回答你的问题：

1) 开发人员通常使用预制的主题，无论是免费的还是购买的。那里有一个主题世界。如果需要任何独特的东西，他们通常会定制现有的主题、更改样式表等......插件在定制方面也能有所帮助。构建自己的主题需要很多时间，而且通常只有主题构建者才会这样做。

2) 是的，您可以认为这就是 Wordpress 网站的全部内容。您可以创建页面，并通过主题支持的选项卡/菜单提供指向它们的链接。但通常有要添加/更新的定期新闻的网站使用 Wordpress 中的博客，只是选择了主题使其看起来不像博客，而是像新闻网站。例如：gigaom.com（由 Wordpress 提供支持的流行新闻网站）

您还可以查看sunshinefoundation.org.in（我制作了这个，由默认主题TwentyEleven 构建）、slumsoccer.org（我也制作了这个）

# ruby-on-rails - 如何使用资产管道在 Rails 中内联压缩的 CSS

> ID：13073305
> 
> 赞同：2
> 
> 时间：2012-10-25T16:43:16.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline, sprockets

我正在尝试将 CSS 内联到我的布局中。我目前正在使用

> = Rails.application.assets.find_asset('embedded.css').body.html_safe

但是，返回的 CSS**未压缩**。我验证了`.digest_path`存在哪些资产文件，并且已正确压缩。

当然，我可以编写一个帮助程序来检查给定资产的当前磁盘压缩资产文件是否存在，并使用它。但是，我认为 find_asset 实际上每次调用它时都会编译一个 CSS 资产——在生产中不好。我希望有一个更干净的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:12:56.580

如果要在生产环境中重建资产，生产环境必须能够访问压缩器。默认情况下，Gemfile 有这样的东西：

```
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'therubyracer'
  gem 'uglifier'
end 
```

需要删除`:group assets do`，所以这些 gem 也包含在生产环境中。然后，`find_asset`重建资产并在第一次调用时将其最小化/压缩，并将其缓存。

# f# - 使用 Array2D 时是否可以返回 seq？

> ID：13073306
> 
> 赞同：2
> 
> 时间：2012-10-25T16:43:17.123
> 
> 标签：f#

我想将矩阵的非零元素收集到`sequence<(row,column,value)>`

这不起作用

```
let getSparseMatrixCOO matrix =
    seq {
          matrix |> Array2D.iteri (fun row column elem -> 
                                    if elem <> 0.0 then yield (row, column, elem)
                                  )
        } 
```

我必须放弃使用的想法`Array2D.iteri`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:03:29.687

您不能`yield`在这样的 lambda 函数中使用。该`yield`关键字只能在序列表达式的范围内直接使用（尽管您的尝试具有良好的逻辑）。

我认为最简单的选择是遍历数组的元素并编写如下内容：

```
let getSparseMatrixCOO matrix =
  seq { for row in 0 .. Array2D.length1 matrix - 1 do
          for column in 0 .. Array2D.length2 matrix - 1 do
            let elem = matrix.[row, column]
            if elem <> 0.0 then yield (row, column, elem) } 
```

该`Array2D`模块不提供很多功能，但可以扩展为包含`foldi`功能（类似于`Array.foldi`）。该函数聚合数组的元素并调用您为每个元素指定的函数。然后，您可以选择所需的元素并以您想要的方式聚合它们。

以下使用列表作为状态，并在聚合期间将非零元素附加到列表中：

```
Array2D.foldi (fun row column elem state -> 
  if elem <> 0.0 then (row, column, elem)::state else state) [] 
```

可以像这样实现缺少的`Array2D.foldi`功能（必须保持简单）：

```
module Array2D =
  let foldi f a matrix = 
    let mutable state = a
    for row in 0 .. Array2D.length1 matrix - 1 do
      for column in 0 .. Array2D.length2 matrix - 1 do
        state <- f row column (matrix.[row, column]) state
    state 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:51:16.080

您可以继续坚持`Array2D.iteri`使用类似的东西

```
let getSparseMatrixCOO matrix =
    let result = ref List<int*int*float>.Empty
    matrix |> Array2D.iteri(fun i j elem -> if elem <> 0.0 then result := (i,j,elem)::!result)
    !result |> List.rev 
```

如果您的原始意图的懒惰并不重要，因为上面的代码片段会给您相同的顺序，只是急切地。

# android - 将 EditText 中的文本与定义的字符串进行比较？

> ID：13073307
> 
> 赞同：0
> 
> 时间：2012-10-25T16:43:21.060
> 
> 标签：android

我是 Android 新手，我正在编写一个简单的闹钟应用程序。当我像这样“10:00，Monday”将字符串输入到 EditText 中时，如果为 true，它将将语法与定义的字符串进行比较闹钟。但我不知道如何比较。你能给我一个想法吗？非常感谢。我的应用程序的界面和代码如下

1.我的应用界面[https://dl.dropbox.com/u/40382482/Screenshot%20from%202012-10-25%2023%3A51%3A14.png](https://dl.dropbox.com/u/40382482/Screenshot%20from%202012-10-25%2023%3A51%3A14.png)

公共类 MainActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
   /* Calendar cal = Calendar.getInstance();
    SimpleDateFormat date = new SimpleDateFormat("dd/MM/yyyy");
    SimpleDateFormat time = new SimpleDateFormat("hh:mm:ss");

    final TextView labelDate = (TextView) findViewById(R.id.lblDate);
    final TextView lableTime = (TextView) findViewById(R.id.lblTime);

    labelDate.setText(date.format(cal.getTime()));
    lableTime.setText(time.format(cal.getTime()));*/
    final ArrayList<String> setAlarm = new ArrayList<String>();
    //nhap noi dung vao edit text

    final EditText alarmEnter = (EditText) findViewById(R.id.setting);

    final Button button = (Button) findViewById(R.id.Okay);

    OnClickListener add = new OnClickListener()
    { 

        public void onClick(View v)
        {
            if(alarmEnter.getText().toString().equals(""))
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
                builder.setTitle("Info Missing");
                builder.setMessage("Please Enter All Information");
                builder.setPositiveButton("Continue", new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface diablog, int which)
                    {

                    }
                }
                        ); builder.show();
            }
            else {
                                //compare string in EditText and defined string?

            }
        }
    };
    button.setOnClickListener(add);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:50:19.327

要将一个字符串与另一个字符串进行比较，请使用：

```
if(strText.equals("myString")){ // strText is the string from the edit text, myString is the string
                               // you are comparing it to
  // do something

}else{

 // do something else
} 
```

这将返回一个布尔值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T16:53:04.877

if (myEditText.getText().toString().equals(myString)) { ... }

# php - 将 PHP 日期格式映射到 Javascript

> ID：13073308
> 
> 赞同：0
> 
> 时间：2012-10-25T16:43:25.550
> 
> 标签：php, javascript

> **可能重复：**
> [将 Unix 时间戳转换为 Javascript 中的时间](https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript)

我一直将用户的日期格式首选项作为 PHP 的 date() 函数使用的格式字符串存储在数据库中。

需要通过 Javascript 计算日期。有人知道某种将 PHP 格式映射到 Javascript 的方式吗？

从将 PHP 日期格式`Ymd`字符串传递给 Javascript 函数，我希望它能够返回`20010310`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:56:45.600

所以你想要这个： http: [//phpjs.org/functions/date/](http://phpjs.org/functions/date/)

虽然我强烈建议你使用这个： http: [//momentjs.com/](http://momentjs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:58:31.633

**PHP：**

```
$myDate = date('Ymd'); 
```

**HTML：**

```
<script type="text/javascript">
    var date = new Date(<?php echo strtotime($myDate); ?> * 1000);
</script> 
```

# jquery - jQuery Mobile 忽略表单元素上的 data-role="none"

> ID：13073309
> 
> 赞同：4
> 
> 时间：2012-10-25T16:43:26.093
> 
> 标签：jquery, forms, mobile, jquery-mobile

我正在将页面动态注入到我的 jQuery Mobile 应用程序中。一切正常，除了表单元素。似乎在注入页面上的表单元素上忽略了 data-role="none" 。

```
<p><input data-role='none' type='radio' name='type' id='type' value='none'/>None</p>
<p><input data-role='none' type='radio' name='type' id='type' value='segments'/>Market Segments</p>
<p>&nbsp; &nbsp; &nbsp <select data-role='none' id='segments'><option value='all'>All</option></select></p> 
```

单选按钮呈现为常规单选按钮，尽管格式有些混乱。选择按钮应该显示为常规下拉列表，但它被呈现为 jQuery Mobile 下拉列表。

以下是注入页面的方式：

```
var t = results.rows.item(i).body;
var n = results.rows.item(i).name;
$("#"+n).remove();
$("body").append(t);
$("#"+n).appendTo($.mobile.pageContainer);
$("#"+n).attr('data-url',$("#"+n).attr("ID")).trigger('create'); 
```

非注入页面上的表单元素工作正常......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:56:22.010

默认情况下，jQuery Mobile 会自动增强表单元素，如果你想告诉 JQM[忽略](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native.html)它们，你可以将`data-role="none"`属性添加到容器中，但是你还**需要**设置`$.mobile.ignoreContentEnabled = true`. 这样做的原因是因为默认情况下 JQM 不检查`data-role="none"`属性（以免每次都不必要地执行检查）。

请记住，您需要`ignoreContentEnabled`在[mobileinit](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html) `event`中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:20:17.183

您应该检查是否手动初始化这些表单控件。由于您正在注入这些控件，因此您可能还会调用 selectmenu('refresh') 方法。只需删除这些电话，一切都应该正常。

# vim - vim 启动时停止 NERDTree 打开

> ID：13073310
> 
> 赞同：12
> 
> 时间：2012-10-25T16:43:28.713
> 
> 标签：vim, nerdtree

我安装了 NERDTree 插件，但是当我像这样启动 vim 时它总是存在：

> vim

我只希望它按需打开。

每当我启动vim时，如何阻止它打开？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T16:49:36.297

尝试添加

```
let g:NERDTreeHijackNetrw=0 
```

到您的 vimrc 并确保没有其他行设置此变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T19:15:37.673

`$ vim .`总是打开文件资源管理器。如果您没有 NERDTree 或按照 ZyX 的回答配置了 NERDTree `netrw`，无论如何您都会得到默认值。

我想知道如果`netrw`插件以某种方式被删除会发生什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-22T07:29:45.933

在您的 vimrc 文件中，执行以下步骤

1.  comment `autocmd VimEnter * NERDTree`，默认情况下会停止打开 nerdTree

2.  粘贴`map <C-n> :NERDTreeToggle<CR>`到 vimrc 中，这将仅在从键盘按下 'Ctrl+n' 时打开 NerdTree

# http - HTTP 选项 - 不可缓存？

> ID：13073313
> 
> 赞同：4
> 
> 时间：2012-10-25T16:43:37.740
> 
> 标签：http, rest, hateoas

我正在设计一个尽可能符合 HATEOAS 原则的 RESTful 服务。因此，我需要一种方法让我的酷 URL 返回描述可用选项的链接列表。我正在使用 HAL-JSON 来简化数据格式，所以这一切都很好，但我现在正在考虑应该使用哪种 HTTP 方法来实现这一点。

我确信我可以坚持使用简单的 GET，但通过阅读 HTTP RFC，似乎 OPTIONS 可能适合这里的账单。我唯一担心的是粗体：

> 9.2 选项
> 
> OPTIONS 方法表示请求有关在由 Request-URI 标识的请求/响应链上可用的通信选项的信息的请求。此方法允许客户端确定与资源相关联的选项和/或要求，或服务器的能力，而无需暗示资源操作或启动资源检索。
> 
> **对此方法的响应不可缓存。**

在网络标准方面有更多经验的人可以解释为什么会这样吗？在我看来，您肯定希望客户端至少在短时间内缓存此结果，因为在完全 HATEOAS 系统中，此调用可能会非常频繁地进行，以遍历 rel 链接以到达您正在查找的操作为了。

我也喜欢关于使用 OPTIONS 与简单的 GET 从一个很酷的 URL 检索操作的一些意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:27:01.947

OPTION HTTP 请求返回可以在资源上执行的可用方法。（对象方法）

我不能肯定地说为什么你不能缓存响应，但这很可能是一种预防措施。缓存对于 OPTION http 方法几乎没有价值。

资源是“可以命名的任何信息”，该名称就是它的 URI。来自 OPTIONs 请求的响应只是可以在此资源上请求的方法列表（例如，“GET PUT POST”可能是响应）。要实际获取存储的信息，您必须使用 GET 方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T05:19:26.577

它不可缓存，期间。对不起。

# php - 如何在 Wordpress 网站上通过 PHP 访问非现场引荐来源（以及现场访问的第一页）

> ID：13073314
> 
> 赞同：0
> 
> 时间：2012-10-25T16:43:40.477
> 
> 标签：php, wordpress, session-variables

我正在尝试将三件事放入 Wordpress 页面中的隐藏表单字段中：

1.  在有人访问我网站上的任何页面之前访问的最后一个“非现场”页面（例如，很可能是 Google 页面）

2.  他们访问我网站的第一页

3.  他们进入表单页面之前我网站上的最后一页

第三个很容易（只需使用），但前两个给我带来了问题。

我正在尝试通过使用会话变量来保存 #1 和 #2，以便在每个页面的标题中，我都有以下代码：

```
<?php
session_start();
if (! isset($_SESSION['offsite_referer'])) {
  $_SESSION['offsite_referer'] = $_SERVER['HTTP_REFERER'];
}
if (! isset($_SESSION['first_page'])) {
  $_SESSION['first_page'] = $_SERVER['REQUEST_URI'];
}
?> 
```

然后再往下，作为测试代码（稍后更改为 input type=hidden 等）：

```
<p>offsite_referer: <?= $_SESSION['offsite_referer'] ?></p>
<p>first_page: <?= $_SESSION['first_page'] ?></p> 
```

（FWIW，我的 wp-config.php 顶部也有 session_start()。是的，我的网站已关闭 register_globals。）

出于某种原因，$_SESSION['offsite_referer']*总是*作为我的主页结束，即使我通过另一个站点的链接直接点击表单页面 (/free-reports) 也是如此。同样，first_page*始终*显示为 /

是的，我在尝试之间清除所有 cookie 等，以强制创建新会话。

这段代码曾经在我的 pre-Wordpress 网站上运行良好，所以我只能认为它与 WP 有关，特别是可能是 WP 的重定向（WP 的 mod_rewrite 内容在 .htaccess 中）

我尝试将 $_SESSION['offsite_referer'] = $_SERVER['HTTP_REFERER'] 更改为 wp_get_original_referer() 但它似乎没有效果。

顺便说一句，如果我访问我的表单页面（在 /free-reports/）作为我网站上的第一页（在清除 cookie 等之后）并打印 $_SERVER['HTTP_REFERER']，它会正确显示最后一个异地页面 - 即使$_SESSION['offsite_referer'] 没有。

我很困惑，并且花了相当多的时间试图自己解决这个问题，所以任何解决这个问题的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:09:28.970

我相信 sunliffe 掌握了这一点，因为我正在使用 IE 进行测试。

它现在工作正常，我将其归因于实际关闭和重新启动 IE（显然只是删除 cookie 并不能做到这一点，正如你所想的那样，即使在 Firefox 中工作正常）。

我还稍微改变了我正在做的事情，只是将完整的站点内浏览历史记录保存在会话变量中，而不仅仅是站点上的第一页和最后一页。

我最终得到的代码如下，它位于我主题的 header.php 文件的顶部：

```
<?php
session_start();
if (! isset($_SESSION['site_history'])) {
   $_SESSION['offsite_referer'] = $_SERVER['HTTP_REFERER'];
   $_SESSION['site_history'] = '';
}
$_SESSION['site_history'] .= ($_SERVER['REQUEST_URI'] . ';');
?> 
```

当我试图弄清楚这一点时，我最初在 wp-config.php 中也有 session_start()，但能够将其删除（仅在 header.php 中留下上面的代码）并且一切仍然正常。

如果有人发现此页面想要做类似的事情，我可以通过将以下内容添加到我的主题的 functions.php 中来访问我的 WP 页面中的此信息：

```
function get_offsite_referer() { return $_SESSION['offsite_referer']; }
add_shortcode('offsite-referer', 'get_offsite_referer');
function get_site_history() { return $_SESSION['site_history']; }
add_shortcode('site-history', 'get_site_history'); 
```

然后在我的 Wordpress 页面/表单上传递信息：

```
<input type="hidden" name="offsite_referer" value="[offsite-referer]" />
<input type="hidden" name="site_history" value="[site-history]" /> 
```

scunliffe，如果您将您的评论作为“回复”发布，我会“接受”它，因为它最接近地引导我朝着正确的方向前进，但作为评论，我只能投票赞成，所以这就是我所做的。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:53:53.680

很有可能，您无法真正获得引荐来源网址，因为某些浏览器不会发送该 URL，而有些人会禁用该 URL，但您可以这样做，我将在此处为您提供一些额外的提示：

```
//first of all, initialize the session
session_start();
//Now call logvisit() to log where the user is coming from
logvisit();
function logvisit() {
         $_SESSION['offsite_referer'] = $_SERVER['HTTP_REFERER']);
         $browser = $_SERVER['HTTP_USER_AGENT']; //Gets the browser the user is using
         //If you want to test it (disable the code below if you don't want to print that information):
         echo "Offsite referer: $_SESSION['offsite_referer']<br>";
         echo "Browser: $browser<br>";
} 
```

然后销毁你可以使用的会话`unset($_SESSION['offsite_referer']);` 这是我通常的做法，而且这通常是一种整洁的方式。

# excel - 创建 Excel 宏以填充值

> ID：13073316
> 
> 赞同：3
> 
> 时间：2012-10-25T16:43:58.733
> 
> 标签：excel, vba

在 Excel 中创建宏不是我的强项，所以我想知道是否有人能够提供帮助。

我有一个包含产品值的小表，但并非每个单元格都有值。我要做的是编写一个宏来在单独的工作表上创建一个列表。我编写的宏适用于第一列，但这就是它停止的地方。

例如

```
List | aa | bb   | cc

a    |1   | 15   |  -

b    |2   | 23   | 12

c    |-   | 17   | 5

d    |4   | -    | - 
```

应该像这样出现在工作表 2 上

```
- List| aa
- a   | 1
- b   | 2
- d   | 4
- List| bb
- a   | 15
- b   | 23
- c   | 17
- List| cc
- b   | 12
- c   | 5 
```

目前，只有 aa 在第二张纸上正确显示，其他列均未正确显示。

我到目前为止的宏是

```
Sub Button2_Click()
    Dim Column As Integer
    Column = 1
    newrow = 1
    Do Until Worksheets("Sheet1").Cells(Column, 1).Value = ""

        If Worksheets("Sheet1").Cells(Column, 2).Value <> "" Then

            Worksheets("Sheet2").Cells(newrow, 1).Value = Worksheets("Sheet1").Cells(Column, 1).Value
            Worksheets("Sheet2").Cells(newrow, 2).Value = Worksheets("Sheet1").Cells(Column, 2).Value

            newrow = newrow + 1
        End If
        Column = Column + 1
    Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:45:35.460

这就是我的建议。此代码示例基于上述示例数据。如果示例的结构发生变化，那么您将不得不相应地修改代码。我已经对代码进行了注释，以便您理解它不会有问题。但如果你这样做了，只需发回 :)

**代码**

```
Option Explicit

Sub Sample()
    '~~> Input/Output Sheets
    Dim wsI As Worksheet, wsO As Worksheet
    Dim Lrow As Long, ORow As Long, i As Long
    Dim rngToFilter As Range

    '~~> Set the input, output sheets
    Set wsI = ThisWorkbook.Sheets("Sheet1")
    Set wsO = ThisWorkbook.Sheets("Sheet2")

    '~~> Set the output row in the new sheet
    ORow = 1

    With wsI
        '~~> Get last row in Col A
        Lrow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Set your range
        Set rngToFilter = .Range("A1:D" & Lrow)

        '~~> Hide Col C to E
        .Range("C:E").EntireColumn.Hidden = True

        '~~> Loop through Col B to Col D
        For i = 2 To 4

            '~~> Remove any filters
            .AutoFilterMode = False

            '~~> Copy Header viz List| aa, List| bb
            Union(.Cells(1, 1), .Cells(1, i)).Copy wsO.Range("A" & ORow)

            '~~> Get next empty row
            ORow = ORow + 1

            '~~> Filter, offset(to exclude headers) and copy visible rows
            With rngToFilter
                .AutoFilter Field:=i, Criteria1:="<>"

                '~~> Copy the filtered results to the new sheet
                .Offset(1, 0).SpecialCells(xlCellTypeVisible).Copy wsO.Range("A" & ORow)
            End With

            ORow = wsO.Range("A" & wsO.Rows.Count).End(xlUp).Row + 1

            '~~> Unhide/Hide relevant columns
            .Columns(i).EntireColumn.Hidden = True
            .Columns(i + 1).EntireColumn.Hidden = False

            '~~> Remove any filters
            .AutoFilterMode = False
        Next i

        '~~> Unhide all columns
        .Range("B:E").EntireColumn.Hidden = False
    End With
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/3f4000b3bc19a62042e04b2b4c15b9ce.png)

# powershell - 使用 switch 语句进行匹配，根据部分文件名将文件移动到现有子文件夹中？

> ID：13073320
> 
> 赞同：4
> 
> 时间：2012-10-25T16:44:03.473
> 
> 标签：powershell, switch-statement

我有一个文件夹，里面装满了一堆需要经常移动到子文件夹中的日志文件。例如，我需要将以下文件放入箭头处的目录中。

SOME_FILE_341213.txt --> SMPROD
SOME_FILE_341242.txt --> SMPROD
OTHER_FILE_13423.log --> SSBRPRD
ALTER_FILE_13423.log --> SSBRPRD
geofile12321 --> REGIONPROD

我见过很多解决方案，它们会解析出文件名的一部分并将其移动到包含该文件名解析的目录中。就我而言，目标目录不会真正匹配文件名的解析部分。我在想我可以使用 switch 语句将前 4 或 5 个字母与将文件移动到适当目录的案例相匹配，但我不确定这是最有效的方法。我将有大约 25 个案例可以匹配。对于与任何情况都不匹配的文件，我会将它们留在原处。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:57:04.087

我可能不会从包含键值对的文本文件中构建一个哈希表，而不是硬编码 switch 语句；这意味着任何不熟悉 Powershell 的人都可以管理文件名/目标关系。我不确定这会更有效，但这意味着如果文件名或目的地发生变化，您不必更新脚本。

这是一个简单的示例...它不进行任何复制，但演示了该方法：

```
$hashData = ConvertFrom-StringData ([IO.File]::ReadAllText("c:\temp\_sotemp\_hash\hashfile.txt"))
$directory = 'C:\Temp\_sotemp'
Get-ChildItem $directory |  
    where {!($_.PsIsContainer)} | 
    Foreach-Object {
    Foreach ($key in $hashData.GetEnumerator()){ 
        if ($_.name.substring(0,7) -eq $key.Name){
        Write-Host $_.fullname " will be copied to: " $key.Value
        }
    }
} 
```

有几点需要注意。首先，不要使用 Get-Content CMDLet 来读取包含键值对的文本文件，因为它会对哈希表做一些奇怪的事情——你最终会得到一个哈希值！其次，如果您传递的文件名少于 7 个字符，子字符串方法将引发错误 - 您可能想要处理这个问题？

这是文本文件的内容：

```
geofile=c:\\temp\\_sotemp\\REGIONPROD
other_f=c:\\temp\\_sotemp\\SSBRPRD
alter_f=c:\\temp\\_sotemp\\SSBRPRD
some_fi=c:\\temp\\_sotemp\\SMPROD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:09:27.190

另一个开关版本。

```
 Get-ChildItem "C:\temp" | foreach {
   switch -regex ($_.Name) {
      "^g.+" { write-output "$_.Name --> REGIONPROD"; break }
      "^S.+" { write-output "$_.Name  --> SMPROD" ; break }
      "^[O|A].+" { write-output "$_.Name  --> SSBRPRD" ; break }
   }
} 
```

另一个带有来自文件的目标目录的哈希版本。

```
 $hash = @{}
Get-Content C:\temp\hashData.txt | foreach { if ($_ -notmatch  "^$") {
   $fn, $dn = $_.split("|"); $hash.Add($fn, $dn) }
}

Get-ChildItem "C:\temp" | foreach {
   $fn = $_.Name.Substring(0,2)
   Write-Host "$_.Name   --> "  $hash.Item($fn)
} 
```

这是我用于测试的 hashData.txt。

```
所以|SMPROD
OT|SSBRPRD
铝|SSBRPRD
锗|地区产品

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:51:04.287

我会在 for-each 循环中使用 switch 语句。像这样的东西：

```
$Files = Dir c:\test

foreach ($file in $files) {
    switch ($file.ToString().Substring(0,2)) {
        "te" {Write-Host "te"; break}
        "li" {Write-Host "li"; break}
        "ts" {Write-Host "ts"; break}

    } #End switch
} #End foreach 
```

在`substring(x,y)`命令中，重载是：

1.  x = 起始字符
2.  y = 要提取的字符数

显然用`write-host`你真正想要做的替换。switch 语句可以跨越多行。不要忘记`break`最后的 ，因此您不会为每个文件浏览所有 25 个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:51:39.720

开关没有问题。对于这样的事情，我个人更喜欢哈希表。就像是：

```
$dirInfo = @{'SOME' = 'SMPROD';
             'OTHE' = 'SSBRPRD';
             'ALTE' = 'SSBRPRD';
             'GEOF' = 'REGIONPROD'
            }

$prefix = $file.Name.Substring(0,4).ToUpper()
if($dirInfo.ContainsKey($prefix)){
    $moveDir = 'C:\PATH\TO\SOMEFOLDER\{0}' -f $dirInfo[$prefix]
    Move-Item $file $moveDir
} 
```

# sql - 在 JOIN 表中按条件获取总和

> ID：13073322
> 
> 赞同：0
> 
> 时间：2012-10-25T16:44:05.113
> 
> 标签：sql, sql-server

我的数据库有这样的结构： ![在此处输入图像描述](../Images/54f26df425b96e0da7b758f64bdbf782.png)

“Movimientos”表记录了我系统的所有费用和付款。'Cargos' 表在 'Movimientos' 上保存每笔费用的一些元数据，而 'Abonos' 表在 'Movimientos' 上保存每笔付款的一些元数据。

如何编写一个查询来汇总 'Movimientos' 中的所有记录，其中 'Abonos.tipo_abono' 和 'Cargos.tipo_cargo' 有一些标准？

我有一个查询已经对“Movimientos”求和，但我无法添加“Abonos”和“Cargos”表添加更多条件的部分。

```
SELECT SUM(M.monto) as monto, SUM(M.interes) as interes, SUM(M.iva) as iva, SUM(M.capital) as capital
                FROM movimientos AS M
                JOIN acreditados AS A ON A.id_acreditado = M.id_acreditado
                JOIN creditos AS C ON C.id_credito = A.id_credito
                WHERE  C.id_credito = 29 
```

假设我想修改最后一个查询以仅对 'Abono.tipo_abono'=1 和 'Cargos.tipo_cargo'=1 的记录求和，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:49:43.947

如果您的关系是一对一的，您只需将表格加入其中并按您的条件进行过滤。如果相关记录始终存在，则将其设为内部连接。如果相关表可能没有记录，则应为 a`LEFT OUTER JOIN`中指定的条件，`JOIN`而不是`WHERE`.

```
SELECT SUM(M.monto) as monto,
    SUM(M.interes) as interes,
    SUM(M.iva) as iva,
    SUM(M.capital) as capital
FROM movimientos AS M
JOIN acreditados AS A ON A.id_acreditado = M.id_acreditado
JOIN creditos AS C ON C.id_credito = A.id_credito
LEFT OUTER JOIN Abonos AS AB on AB.id_movimiento = M.id_movimiento AND AB.tipo_abono = 1
LEFT OUTER JOIN Cargos AS CG on CG.id_movimiento = M.id_movimiento AND CG.tipo_cargo = 1
WHERE  C.id_credito = 29 
```

但是，如果您的关系是多对一的，这将通过包含多`movimientos`行来影响您的总和。改用一个`EXISTS`子句：

```
SELECT SUM(M.monto) as monto,
    SUM(M.interes) as interes,
    SUM(M.iva) as iva,
    SUM(M.capital) as capital
FROM movimientos AS M
JOIN acreditados AS A ON A.id_acreditado = M.id_acreditado
JOIN creditos AS C ON C.id_credito = A.id_credito
WHERE  C.id_credito = 29
AND EXISTS (SELECT 1
    FROM Abonos AB
    WHERE AB.id_movimiento = M.id_movimiento
    AND tipo_abono = 1
)
AND EXISTS (SELECT 1
    FROM Cargos CG
    WHERE CG.id_movimiento = M.id_movimiento
    AND tipo_cargo = 1
) 
```

# php - JQuery ajax 请求 - 回显不会输出结果

> ID：13073324
> 
> 赞同：3
> 
> 时间：2012-10-25T16:44:06.017
> 
> 标签：php, jquery, ajax, echo

我以前从来没有遇到过这么奇怪的事情。我使用 jQuery 提出 Ajax 请求以从 mysql 获取值。

```
$.ajax({
    url: 'ajaxClassificationCheck.php?category='+category,
    cache: false,
    success: function(returnClass)
    {
        $("#classification").val(returnClass);
}}); 
```

和PHP ...

```
include_once ('functions.php');
connectdb();

$category = $_GET['category'];

$q = "SELECT classification_id FROM sch_category WHERE category_id = $category";

$r = mysql_query($q) or die (mysql_error());
$row = mysql_fetch_assoc($r);
$classification = $row['classification_id'];
echo $classification; 
```

网络捕获的结果显示 ajax 请求的输出为空。

如果我改变：

```
echo $classification; 
```

至

```
echo "result is $classification"; 
```

输出：

```
result is 2 
```

它还适用于：

```
echo "a".$classification; 
```

输出：

```
a2 
```

可以通过 Ajax 返回的内容是否有最小字符限制？

**编辑**

感谢您的所有建议

@RocketHazmat - 尝试了 dataType: 'text'，仍然没有返回单个整数。绝对使用 echo $classification;

@dualed - 我将 url 放入浏览器窗口，我得到了正确的整数响应，所以我的 ajax 有问题。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:50:17.887

在`$.ajax`您必须指定预期的内容类型。在你的情况下它是'html'，所以

```
$.ajax({
  ...
  dataType : 'html'
}); 
```

但我建议您使用 dataType 'json' 并将您的 php 脚本的最后一行更改为`json_encode($classification)`. 如果不指定 dataType，jQuery 会做出智能猜测，这可能会导致奇怪的行为。

**请阅读**有关[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)的内容。

# objective-c - 可可检测键按住

> ID：13073328
> 
> 赞同：1
> 
> 时间：2012-10-25T16:44:12.473
> 
> 标签：objective-c, cocoa, events

在 Cocoa 中，keyDown 和 keyUp 有一个可覆盖的函数，但没有 keyHeld？它是否具有功能或是否可以像在 Win32 中一样检查键状态？

这可能是一个愚蠢的问题，但我的经验有限，而且我来自 Win32 背景。

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:44:21.220

我不确定 keyHeld 在 win32 上做了什么，但是当键被按住时，keyDown 事件在 Cocoa 中重复。重复之前的速率和延迟取决于用户设置（您可以使用`+keyRepeatInterval`和`+keyRepeatDelay`方法获取当前值`NSEvent`）。如果事件是第一个 keyDown 或具有事件`isARepeat`属性的重复事件，您可以捕获。

我不相信有一种方法可以检查 Cocoa 中的键状态。如果您绝对需要它，也许您会更幸运地使用较低级别的 API。如果您只需要几个键，您可能可以在 keyDown 上设置一个标志并在 keyUp 上重置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:04:27.957

您可以为此使用计时器。当您收到按键按下事件时，请创建一个计时器，其时间间隔为您定义“按住”，如果您获得同一按键的按键按下事件，则将其销毁。如果计时器触发，则该键被按住指定的时间。

大致是这样的：

```
- (void)keyDown: (NSEvent *)event
{
    NSTimer * tim = [NSTimer scheduledTimerWithTimeInterval:kKeyHeldInterval 
                                                     target:self 
                                                   selector:@selector(keyHeld:) 
                                                   userInfo:event 
                                                    repeats:NO];

    NSNumber * keyCodeNum = [NSNumber numberWithUnsignedShort:[event keyCode]];
    [[self dictionaryOfKeyHeldTimers] setObject:tim forKey:keyCodeNum];
}

- (void)keyUp: (NSEvent *)event
{
    NSNumber * keyCodeNum = [NSNumber numberWithUnsignedShort:[event keyCode]];
    NSTimer * tim = [[self dictionaryOfKeyHeldTimers] popObjectForKey:keyCodeNum];

    [tim invalidate];
}

- (void)keyHeld: (NSTimer *)tim
{
    // Key was held, take action.
    NSEvent * event = [tim userInfo];
    NSNumber * keyCodeNum = [NSNumber numberWithUnsignedShort:[event keyCode]];
    [[self dictionaryOfKeyHeldTimers] removeObjectForKey:keyCodeNum];
} 
```

# mongodb - 带有正则表达式查询的 mongoexport

> ID：13073330
> 
> 赞同：4
> 
> 时间：2012-10-25T16:44:18.330
> 
> 标签：mongodb

我正在尝试使用以下 mongoexport 命令从 mongo 数据库中导出以搜索文本表情符号：

```
mongoexport -d <db> -c <col> -f text -q '{text: /.*:\)/}' 
```

但是当我尝试执行命令 mongoexport 返回：

> 断言：10340 解析 JSON 字符串附近失败：文本：/.*：

我尝试使用十六进制转义符来获得正确的括号：

```
mongoexport -d <db> -c <col> -f text -q '{text: /.*:\x29/}' 
```

但我在同一个位置遇到同样的错误。mongoexport 解析器在遇到“\”时似乎停止了。我很难相信 mongoexport 有这个限制（因为它几乎不可能使用正则表达式），那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:21:30.327

我能问一下你为什么要逃避正确的父母吗？我在正确的括号之前尝试了没有转义的查询，它起作用了：`'{text: /.*:)/}'`

作为替代方案，如果您需要在查询中转义，那么您必须转义转义符号，因为字符串被解析两次（shell，然后是数据库）：`'{text: /.*:\\)/}'`

# java - JAVA 随机参数总是返回 0

> ID：13073335
> 
> 赞同：3
> 
> 时间：2012-10-25T16:44:46.343
> 
> 标签：java, random, parameters

我正在练习通过编写一个小型战斗模拟器学到的技术。在我的英雄课程中，我有存储伤害的方法。方法是：

```
private strike;

public void setStrike(int attack){
    attack = strike;
}

public int retStrike(){
    return strike;
} 
```

在我的主要方法中，我需要一个新的随机数。

```
 int randomNum = new Random().nextInt(10)+1;

    Mike.setStrike(randomNum); 
```

当我调用对象 Mike 并在 Hero 类的 setStrike 方法中提供 setStrike 方法时，它总是返回 0。我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T16:45:49.400

```
public void setStrike(int attack){
    attack = strike;
} 
```

This should be: -

```
public void setStrike(int attack){
    strike = attack;
} 
```

You used your assignment opposite. The first assignment has no effect on the private field `strike`.

# .net - WCF 4.5 版本控制

> ID：13073339
> 
> 赞同：0
> 
> 时间：2012-10-25T16:45:00.963
> 
> 标签：.net, wcf, c#-4.0, versioning

我有一个带有数据合同等的 WCF 服务......

我需要对合约进行一些更改，因为一些客户我不得不更改业务逻辑并在数据合约中添加两个数据成员。问题是，Java 客户端正在中断，即使使用`IsRequired = false`，只是他不接受此更改，PHP、Ruby 和 Python 中的客户端接受更改。

我该如何解决这个问题？有什么方法可以在 .NET 端解决这个问题，还是有其他方法可以对服务进行版本控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:14:01.917

如果我理解正确，您正在`DataMember`为现有的`DataContract`. 除非您修改/删除了一些现有`DataMember`的 s ，否则这应该不是任何问题

```
1\. Add new Non-Required Members [IsRequired = false] --- Client unaffected & Missing values are inirialised to defaults. 
```

# eclipse - Juno 上的 GWT 设计器（Ubuntu）

> ID：13073342
> 
> 赞同：1
> 
> 时间：2012-10-25T16:45:11.387
> 
> 标签：eclipse, gwt

我已经阅读了有关 GWT Designer 与 Ubuntu 的问题，并且没有 Juno 更新站点？有人确认此设置有效吗？乌本托 12.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:22:57.013

我也有一些问题。切换到设计器视图时 Eclipse 崩溃。对我有用的是安装[xulrunner 1.9.2](https://launchpad.net/ubuntu/+archive/primary/+files/xulrunner-1.9.2_1.9.2.28+build1+nobinonly-0ubuntu0.11.04.1_amd64.deb)，`export GDK_NATIVE_WINDOWS=false`在启动 Eclipse 之前进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:37:58.823

我必须
1) 导出 GDK_NATIVE_WINDOWS=false
2) 安装 64 位夜间构建的 xulrunner ( [http://ftp.mozilla.org/pub/mozilla.org/xulrunner/nightly/2011/11/2011-11-01-03 -32-27-mozilla-1.9.2/](http://ftp.mozilla.org/pub/mozilla.org/xulrunner/nightly/2011/11/2011-11-01-03-32-27-mozilla-1.9.2/) )
3) 在 eclipse.ini 的末尾插入 -Dorg.eclipse.swt.browser.XULRunnerPath=/usr/local/xulrunner

# iphone - iPad - Show vertical Pagination

> ID：13073345
> 
> 赞同：0
> 
> 时间：2012-10-25T16:45:30.387
> 
> 标签：iphone, ios, scrollview

In My iPad vertical scroll view each subview is of screen size. So at a time one view is shown.

I want to represent how many views or pages are there in the scrollview to scroll. this is some how i want to show as pagination.

Please help me how to do this.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:49:20.223

看看`UIPageControl`。或者只是在每一页上写第 1/x 页。

编辑：获取页数计算：
`scrollView.contentSize.height / scrollView.frame.size.height`。

# css - 用于在站点语言上交换图像/浮动的 SASS 混合（更改）

> ID：13073355
> 
> 赞同：0
> 
> 时间：2012-10-25T16:46:13.397
> 
> 标签：css, sass, mixins

目前在网站构建上使用 SASS。这是我第一个使用它的项目，之前尝试了一点 LESS 并喜欢它。我用 LESS 做了一些基本的 mixin 和变量，超级有用的东西！

我试图了解 SASS 混合和语法，特别是当页面更改为不同语言时交换图像，无论是正文 ID 更改还是`<html lang="en">`. 并且，例如，如果网站更改为中文，则交换浮动。所以一个向左浮动的mixin就是向左浮动，除非语言是AR然后它变成向右浮动。

有了 LESS，我认为它会是这样的：

```
.headerBg() when (@lang = en)  {background-image:url(../img/hello.png);}
.headerBg() when (@lang = it)  {background-image:url(../img/ciao.png);}

.header {.headerBg(); width: 200px; height:100px}

.floatleft() when (@lang = en) { float: left;}
.floatleft() when (@lang = ar) { float: right;}

.logo {.floatleft();} 
```

这是我遇到问题的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:26:24.737

我可能会使用该[`@content`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixin-content)功能并执行以下操作：

```
@mixin headerBg {
    .header {
        @content
    }
}

@mixin floatDir {
    .logo {
        @content
    }
}

:lang(en) {
    @include headerBg {
        background-image:url(../img/hello.png);
    }
    @include floatDir {
        float: left;
    }
}

:lang(ar) {
    @include headerBg {
        background-image:url(../img/ciao.png);
    }
    @include floatDir {
        float: right;
    }
} 
```

编译为：

```
:lang(en) .header {
  background-image: url(../img/hello.png); }
:lang(en) .logo {
  float: left; }

:lang(ar) .header {
  background-image: url(../img/ciao.png); }
:lang(ar) .logo {
  float: right; } 
```

[`@each`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#each-directive)如果背景图像名称基于语言，那么使用并执行以下操作可能是有意义的：

```
@each $lang in en, ar {
    :lang(#{$lang}) {
        @if $lang == en {
            .logo {
                float: left;
            }
        } @else if $lang == ar {
            .logo {
                float: right;
            }   
        }
        .header {
            background-image:url(../img/#{$lang}.png);
        }
    }
} 
```

编译为：

```
:lang(en) .logo {
  float: left; }
:lang(en) .header {
  background-image: url(../img/en.png); }

:lang(ar) .logo {
  float: right; }
:lang(ar) .header {
  background-image: url(../img/ar.png); } 
```

# ruby-on-rails - SimpleForm+ClientSideValidations+bootstrap - Validation is not occuring on the form- all inputs are accepted

> ID：13073357
> 
> 赞同：7
> 
> 时间：2012-10-25T16:46:23.067
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form, client-side-validation

I am using the SimpleForm, ClientSideValidations, and ClientSideValidations-SimpleForm gems in a RoR application. I can render the form into the modal beautifully, however when the input loses focus no validation occurs and the form is submitted. Also note that I have tried using the fix found here: [http://www.ddarrensmith.com/blog/2012/05/17/ruby-on-rails-client-side-validation-with-validation-helpers-and-twitter-bootstrap/](http://www.ddarrensmith.com/blog/2012/05/17/ruby-on-rails-client-side-validation-with-validation-helpers-and-twitter-bootstrap/)

Segment of the view containing the form:

```
<div class='modal hide' id='New_Discrep' tabindex="-1" role='dialog' aria-labelledby="#New_Discrep_Label" aria-hidden='true'>
  <div class="modal-header">
    <button type='button' class='close' data-dismiss='modal' aria-    hidden='true'>x</button>
    <h3 id="New_Discrep_Label">Create Discrepancy</h3>
  </div>
  <%= simple_form_for @new_discrepancy, :validate => true, :url => {:controller=> 'discrepancy', :action => 'create', :device_id => @device.id} do |f| %>
  <div class='modal-body'>
    <%= f.input :system, :wrapper => :prepend, :label => false do %>
      <%= content_tag :span, 'System', :class => 'add-on input-label' %>
      <%= f.input_field :system %>
    <% end %>
    <%= f.input :description, :wrapper => :prepend, :label => false do %>
      <%= content_tag :span, 'Description', :class => 'add-on input-label' %>
      <%= f.input_field :description, :class => 'textarea' %>
    <% end %>
    <%= f.input :conditions, :wrapper => :prepend, :label => false do %>
      <%= content_tag :span, 'Condiditions', :class => 'add-on input-label' %>
      <%= f.input_field :conditions, :class => 'textarea' %>
    <% end %>
    <%= f.input :dirf, :wrapper => :prepend, :label => false do %>
      <%= content_tag :span, 'Reference', :class => 'add-on input-label' %>
      <%= f.input_field :dirf %>
    <% end %>
  </div>
  <div class='modal-footer'>
    <button type="button" class='btn', data-dismiss='modal', aria-hidden='true'>Cancel</button>
    <%= f.button :submit, :class => 'btn-primary' %>
  </div>
  <% end %>
</div> 
```

My Gemfile

```
gem 'rails', '3.2.1'
gem 'jquery-rails'
gem 'carrierwave'
gem 'simple_form'
gem 'client_side_validations'
gem 'client_side_validations-simple_form' 
```

Model

```
class Discrepancy < ActiveRecord::Base
STATUSES = ['Open', 'Closed', 'Rejected']

  belongs_to :device
  belongs_to :user
  has_many :parts
  has_many :updates

  validates :date_entered, :presence => true
  validates :status, :presence => true
  validates :description, :presence => true
  validates :system, :presence => true
  validate :close_date

  validates_inclusion_of :status, :in => STATUSES, 
    :message => "must be one of: #{STATUSES.join(', ')}"  

end 
```

application.js file

```
//= require jquery
//= require jquery_ujs
//= require rails.validations
//= require rails.validations.simple_form
//= require_tree . 
```

I have also confirmed that the script tag is being produced in the html directly below the form. Thanks for the help!

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T17:56:48.403

所有逻辑都应用于具有可见输入的表单。由于您的输入在页面加载时不可见，因此没有附加任何事件。

以下对我有用：

```
$('#myModal').on('shown', function () {
  $(ClientSideValidations.selectors.forms).validate();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:21:53.080

自述文件实际上详细说明了执行此操作的更具体的功能：

```
$(new_form).enableClientSideValidations(); 
```

[https://github.com/bcardarella/client_side_validations#enabling](https://github.com/bcardarella/client_side_validations#enabling)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-20T04:54:13.947

在较新的引导版本上：

```
$('#myModal').on('shown.bs.modal', function () {
  $(ClientSideValidations.selectors.forms).validate();
}); 
```

# java - Java正则表达式匹配（单词组）（单词组）的子类

> ID：13073359
> 
> 赞同：2
> 
> 时间：2012-10-25T16:46:26.903
> 
> 标签：java, regex

我想在Java中编写一个正则表达式来匹配一系列单词字符和空格，然后是字符序列“子类”的单词字符和空格序列：

应匹配的示例字符串：

```
a subclass of b

a and b subclass of c

a and b subclass of c and d 
```

不应匹配以下字符串：

```
subclass of

a subclass of

subclass of b

a subclass of b subclass of c 
```

我尝试了以下正则表达式：

```
 [a-zA-Z0-9 ]+subclass of[a-zA-Z0-9 ]+

(?:(?!subclass of).)+subclass of(?:(?!subclass of).)+ 
```

但他们都达不到我所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:53:21.663

您可以使用此正则表达式：

```
^\\w+(?:\\s+and\\s+\\w+)?\\s+subclass\\s+of\\s+\\w+(?:\\s+and\\s+\\w+)?$ 
```

这是[现场演示](http://www.rubular.com/r/rJOe71yMdL)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:22:58.277

我会对您的正则表达式@anubhava 进行一些修改：

`^\w+(?:\sand\s\w+)*\ssubclass\sof\s\w+(?:\sand\s\w+)*$`

确保 (和 \w+) 的组可以匹配多次。

现场演示：[这里](http://www.rubular.com/r/FjXtDO0upk)

# r - 对多个 shapefile 应用函数

> ID：13073362
> 
> 赞同：1
> 
> 时间：2012-10-25T16:46:45.113
> 
> 标签：r, gis, plyr, shapefile

我想在我已导入的 shapefile 列表中应用一个函数，无论是我编写的函数，还是包中的函数，例如包中的`gArea`函数（例如`gArea('shapefile')`） 。`rgeos`

我导入了这样的文件：

```
data <- list.files (getwd() , pattern="shp") 
```

`lapply`一旦我尝试通过使用等合并文件，我就尝试使用使用诸如等函数的方法`as.list`，`as.data.frame`但没有运气。应用于单个导入的 shapefile 的函数可以正常工作，但显然对严重的吞吐量没有好处。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:11:45.393

你可以尝试这样的事情：

```
library(maptools)
library(rgeos)
sapply(lapply(list.files(pattern="*.shp"), readShapePoly), gArea) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:24:17.417

在@jmsigner 的回答中，我将从`ldply`plyr 包中使用：

```
require(rgeos)
require(plyr)

shp_paths = list.files(pattern = "shp")
shp_files = llply(shp_paths, readShapePoly)
areas = ldply(shp_files, gArea) 
```

我相信这`ldply`还包括生成的`areas`data.frame 中的 shapefile 名称。此外，`plyr`函数包括一个内置的进度条（请参阅 参考资料`.progress`），并且可以轻松并行化。

# svn - Code review via SVN

> ID：13073368
> 
> 赞同：1
> 
> 时间：2012-10-25T16:47:16.670
> 
> 标签：svn, sonarqube

Is there any way by which I can extract the files I changed in SVN after a day's work and execute code review on it using SONAR?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:49:07.073

也许[截止插件](http://docs.codehaus.org/display/SONAR/Cutoff+Plugin)可能会满足您的需求。有一些限制，例如它适用于文件系统日期，这意味着它可能仅在您拥有像 Jenkins 这样的 CI 服务器时才有用。

# spring - Spring bean overiding bug/feature

> ID：13073370
> 
> 赞同：0
> 
> 时间：2012-10-25T16:47:17.373
> 
> 标签：spring, javabeans, overriding

Recently i came across a "strange" Spring behaviour which i do not know if it is the expected behavior or a bug.

I have two spring files:

FileA.xml

```
<bean id="AbstractParent" class="com.classes.MyAbstractClass" abstract="true"/>    
<bean id="ConcreateChild parent="AbstractParent" /> 
```

FileB.xml

```
<import resource="FileA.xml"/>
<bean id="AnotherChild" parent="AbstractParent" />
<bean id="ConcreateChild" parent="AnotherChild"/> 
```

I also have two different objects(which implement BeanNameAware) that have a reference to "ConcreateChild". I was expecting that both objects will have a reference to the same ConcreateChild object. But this is not the case.

When i debug and try to see the BeanName one reference is giving me "ConcreateChild" (as expected) but the other "AnotherChild".

Does anyone know if this is expected? I would expect the same reference to "ConcreateChild" always.

Couldn't find any answers or explanation in Spring documentation thus i posted here.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:04:53.273

我认为您在 Spring 中错过了理解父级和抽象的概念。

当您使用 abstract="true" 定义 bean 时，它不会创建它的实例。它只会创建定义了 id 的 bean 定义。

另一方面，当您为特定 bean 使用 parent 属性时，它将创建该 bean 的实例，其中包含在父定义中定义的信息以及在其自己的 bean 中定义的定义。当然，如果设置了一些冲突的属性，孩子会赢。

在您的情况下，第一个 ConcreateChild 是使用来自 AbstractParent 的信息创建的实例的结果。但是第二个是使用来自 AnotherChild 的信息创建的实例的结果，该实例也是使用来自 Abstract Parent 的信息创建的。

因此，在这种情况下，您实际上有 3 个相同 bean 的实例，它们是使用 AbstractParent 的 bean 定义创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:00:12.120

谢谢您的回答。

但是我有点困惑。首先，我不明白为什么要创建 3 个实例。我虽然将从我的 xml 文件创建 2 个实例。我认为在 Spring 中，如果您不指定 bean 的“范围”，默认情况下它是“单例”。因此，我希望创建两个对象，一个用于 id="AnotherChild"，一个用于 id="ConcreateChild"。我不希望有两个“ConcreateChild”实例。

除了我的问题之外，想象一下我的配置中有接下来的两个 bean：

```
<bean id="Primary" class="ImplementingClass">
<property name="AbstractParent" ref="ConcreateChild" />
</bean>

<bean id="Secondary" class="ImplementingClass">
<property name="AbstractParent" ref="ConcreateChild" />
</bean> 
```

上述两个 bean 不是一个接一个地创建的，而是都引用了“ConcreateChild”对象。当我在一种情况下查找该对象的实例时，它是“ConcreateChild”，在另一种情况下是“AnotherChild”。这实际上是我不明白的。我希望两个bean中的对象实例相同，或者至少它们都具有“ConcreateChild”作为id。

如果您需要任何进一步的解释，请告诉我。

# android - Remove item border in actionbarsherlock

> ID：13073373
> 
> 赞同：1
> 
> 时间：2012-10-25T16:47:30.040
> 
> 标签：android, android-actionbar, actionbarsherlock

I have added a social sharing button to actionbarsherlock via the built-in process for doing so. That sharing item shows up with a border around it. How can I remove that border? I don't know if the border is in the 9-patch images, styles, themes, or what. For all I know it could even be a default Android style. Can someone please point me to where I can change it?

The XML for the menu is below:

```
<item 
   android:id="@+id/show_share_menu" 
   android:title="Share Menu"
   android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:18:16.813

您可以通过从 Sherlock Theme 扩展来创建自己的应用程序主题，并`activityChooserViewStyle`使用这样的空白（空）背景样式覆盖

```
<style name="Theme.CustomTheme" parent="Theme.Sherlock.Light">
    <item name="activityChooserViewStyle">@style/ActionBar.ActivityChooser</item>
</style>

<style name="ActionBar.ActivityChooser" parent="Widget.Sherlock.Light.ActivityChooserView">
    <item name="android:background">@null</item>
</style> 
```

或像这样使用默认的 Sherlock 活动选择器样式

```
<style name="Theme.CustomTheme" parent="Theme.Sherlock.Light">
    <item name="activityChooserViewStyle">@style/Widget.Sherlock.ActivityChooserView</item>
</style> 
```

然后将 AndroidManifest.xml 中的应用程序主题更改为您的自定义主题。

# html - Positioning absolute and stay documentflow

> ID：13073374
> 
> 赞同：1
> 
> 时间：2012-10-25T16:47:34.563
> 
> 标签：html, css, position, document, flow

Is there any way in css to position an Element something like absolute (in relation to the parent element), e. g. at the bottom of its parent element, but have it still staying in the documentflow?

E. g. that an element, positioned relative above the element, by getting more height, pushing the "absolute" element downwards while the container-element's height is also increaseing at the time the relative element would "touch" the absolute one but on the otherhand the "absolute"-elements position and the container-elements' height won't change if there's no "touch"?

Or is this just an impossible task and can only be done with javascript?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:50:15.937

如果您强制，您可以相对于父级定位绝对 div

```
position: relative; 
```

在父 div 上。否则绝对将相对于文档定位。

```
<div style="position:relative;">
    <div style="position:absolute; top:10px; right:10px;">
         ................
    </div>
</div> 
```

这不会有你想要的拉伸效果，但是如果你想要你描述的那种块行为，浮动和应用边距有什么问题？

```
<div style="position:relative;">
    <div style="float: right; margin-top:10px; margin-right:10px;">
         ................
    </div>
    <div>text</div>
</div> 
```

只要正确清除父div，那么无论是上面div的浮动内容还是正常内容，都可以决定父元素的高度。

如果您还需要与底部对齐，则可以查看 display: table-cell 作为选项（不适用于 IE7）

# python - 我可以使用 gimp 命令编写一个独立的 python 脚本吗？

> ID：13073375
> 
> 赞同：1
> 
> 时间：2012-10-25T16:47:35.097
> 
> 标签：python, image-processing, gimp

我知道您可以编写`python`脚本`GIMP`，然后通过`GIMP`您可以将这些脚本用作插件，但我想要实现的是使用`GIMP's functions`through `Python`，就好像您将使用`PIL`或`scikit-image`通过`Python`. 我不想打扰我的程序用户一样实际下载`Gimp`只是为了执行我需要的一个功能。

我能做这样的事吗？？？还是我走得太远了？
如果不是，我可以做的最好的替代方法是强制`Gimp`在不打扰程序用户的情况下进行秘密工作。在这种情况下，我认为我将被迫`GIMP`在安装过程中进行安装，这是我讨厌的。

更新：-（
1）考虑`libgimp`到谷歌搜索后我发现了这个[讨论](http://gimp.1065349.n5.nabble.com/libGimp-td17666.html)。简而言之>“`libgimp`只是用来允许`GIMP core`和它的插件进行通信”，所以它不能像我希望的那样工作。
(2) 我想访问`GIMP`代码并删除我不需要的所有不必要的功能，并保留我要使用的唯一功能，那就是一个功能 GIMP。你认为我应该做这样的事情吗？

**更新**：-
是的，问题已解决，但我仍然有兴趣以`GIMP`任何方式用作图书馆，即使它像*Marawan*所建议的那样是秘密的。希望你能提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:54:43.587

如果安装了 GIMP，你可以试试[批处理模式](http://www.gimp.org/tutorials/Basic_Batch/)。另一种选择是[使用 gimp-fu](http://blenderartists.org/forum/showthread.php?84073-Gimp-Python-batch-how-to)。

显然，如果您没有安装 GIMP，您将无法使用它。:-)

**编辑**：

> 我想访问 GIMP 代码并删除我不需要的所有不必要的功能，并保留我要使用的唯一功能，那就是一个功能 GIMP。

这似乎过于雄心勃勃。GIMP 代码库庞大而复杂。

作为图像处理的替代方法，您可以查看带有[Wand](http://dahlia.kr/wand/) python 绑定的[ImageMagick 。](http://www.imagemagick.org/)或[Python 图像库](http://www.pythonware.com/products/pil/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:50:40.647

您可以使用诸如[便携式 gimp](http://portableapps.com/apps/graphics_pictures/gimp_portable)之类的东西：这将允许您将 gimp 与您的程序一起提供，而无需用户进行额外的安装。然后，您可以让 python 库中的函数使用 gimp 的 python 脚本功能运行 gimp 操作。查看[此答案](https://stackoverflow.com/questions/12662676/writing-a-gimp-python-script/12663785#12663785)以获取执行此操作的示例。

在上面的例子中，对`flip`函数的每次调用都会产生一个新的 gimp 进程并等待它完成执行。这当然可能很慢。有两种提高速度的策略：

1.  [使用减少启动时间的命令行选项](http://docs.gimp.org/en/gimp-fire-up.html)减少 gimp 启动时间
2.  在程序启动时启动一个 gimp 进程。让它运行并使用一些进程间通信技术与它通信，并在您希望它执行操作时向它发送指令。

# wpf - 我可以将 ReactiveCommand 绑定到 Textbox 上的 MouseDown 事件吗？

> ID：13073377
> 
> 赞同：1
> 
> 时间：2012-10-25T16:48:04.180
> 
> 标签：wpf, textbox, reactiveui

我正在尝试获取 WPF ReactiveUI 框架的新视图 ctor 绑定来绑定正在处理按钮单击的 ReactiveCommand 以连接到 TextBox MouseDown/click 事件。以下不起作用。

```
public partial class KeypadNumberView 
    : IKeypadNumberView
    , IViewFor<IOnScreenKeyboard>
{
    public KeypadNumberView()
    {
        ViewModel = new KeyboardViewModel();

        InitializeComponent();

        this.Bind(ViewModel, x => x.EnteredText);
        this.BindCommand(ViewModel, vm => vm.Delete, v => v.EnteredText, "MouseDown" ); // doesn't work
        this.BindCommand(ViewModel, vm => vm.Delete); // <== works 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:38:07.310

这似乎应该工作。[您可以在http://github.com/reactiveui/reactiveui](http://github.com/reactiveui/reactiveui)提交错误吗？

# html - 忽略元素样式宽度的 HTML 表格

> ID：13073379
> 
> 赞同：5
> 
> 时间：2012-10-25T16:48:09.960
> 
> 标签：html, html-table

## 忽略元素样式宽度的 HTML 表格

我有一个 HTML 表格，其中某些单元格的文本内容很长。

我想使用 jQuery 为这些单元格指定一个宽度（以像素为单位），但呈现的表格只是忽略了给定的宽度。

有什么办法可以强制表格尊重这个宽度？

谢谢！

* * *

**JSFiddle**：http: [//jsfiddle.net/sangil/6hejy/35/](http://jsfiddle.net/sangil/6hejy/35/)

*（如果您检查单元格，您可以看到计算出的宽度与元素样式的宽度不同）*

* * *

**HTML**：

```
<div id="tblcont" class="tblcont">
 <table id="pivot_table">
 <tbody>
   <tr>
      <th id="h0" >product</th>
      <th id="h1" >price</th>
      <th id="h2" >change</th>
   </tr>         
   <tr>
      <!-- this is the cell causing trouble -->
      <td id="c00" >Acer 2400 aaaaaaaaaaaaaaaaaaaaaaaaaa</td>
      <td id="c01" >3212</td>
      <td id="c02" >219</td>         

   </tr>
   <tr>
      <td id="c10" >Acer</td>
      <td id="c11" >3821</td>
      <td id="c12" >206</td>         

   </tr>
</tbody>
</table>
</div> 
```

* * *

**CSS**：

```
.tblcont {
  overflow: hidden;
  width: 500px;
}

table {
  table-layout: fixed;
  border-collapse: collapse; 
  overflow-x: scroll; 
  border-spacing:0; 
  width: 100%;
}

th, td {
 overflow: hidden;
 text-overflow: ellipsis;
 word-wrap: break-word;
}

th {
 height: 50px;
} 
```

* * *

​<strong>Javascript：

```
$(document).ready(function() {

  // THIS LINE HAS NO EFFECT!
  $('#c00').width(30);
});​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T16:57:17.280

我从你的小提琴中可以看出，你已经很好地掌握了如何获得截断等词。我认为您可能会发现执行以下操作很有用：

```
<table>
  <colgroup>
    <col style="width: 30px;" /> <!-- this style affects the whole 1st column -->
    <col />
    <col />
  </colgroup>

  <!-- the rest of your table here -->
</table> 
```

此方法以符合 HTML 规范的方式使用 - 并将调整整个列的大小。如果您改为`display`将单元格的 更改为`inline-block`，如上所述，将会发生的情况是您将单元格从表格的流程中取出 - 并且其他样式更改可能会停止工作。

通过使用上面的代码设置整个样式`col`，您可以使用`table`元素的`table-layout: fixed`样式来代替您。

此外 - 我注意到您已将单元格设置为使用`text-overflow: ellipsis;`查看[这篇](http://www.quirksmode.org/css/textoverflow.html "本文")关于 quirksmode 的文章以了解它为什么不起作用。您需要的修复是进行以下编辑：

```
th, td {
    border: solid #4682B4 1px;
    overflow: hidden;
    text-overflow: ellipsis;
    word-wrap: break-word;
    text-align: center;

    white-space: nowrap; /* Add this line */
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T16:58:49.167

默认情况下，表格单元格适合其内容并忽略您的宽度。

已经提供的答案的其他可能性：

用其他容器包围文本：

```
<td id="c00" ><div>Acer 2400 aaaaaaaaaaaaaaaaaaaaaaaaaa</div></td> 
```

并改变它的宽度：

```
$('#c00 div').width(30); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T16:56:49.780

你有几个问题：

`table-layout: fixed`告诉列相等。

然后，即使你把它拿出来，你的文本也比 30 像素宽，没有空格，所以它不会比这更窄`"aaaaaaaaaa"`等等。你需要使文本更小，或者添加空格。

最后，`width`应该是`"30px"`（用引号引起来）。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T16:53:49.793

试试这个：

```
$('#c00').css("width","30px"); 
```

或这个：

```
<td id="c00" style='width:30px'> 
```

如果您使用的是 IE，则可能需要打开兼容模式。此外，请确保您正在导入正确的 jQuery 插件。

# design-patterns - ActiveMQ + NFS race condition

> ID：13073380
> 
> 赞同：0
> 
> 时间：2012-10-25T16:48:11.787
> 
> 标签：design-patterns, activemq, messaging, apache-camel, nfs

I am using ActiveMQ on a cluster of computers to send messages between java processes.

The cluster has a shared NFS mount accessible from all hosts.

I am running into problems with the following scenario:

*   host A creates a new file "/path/to/shared/nfs/xyz"
*   host A sends a message to host B: "process /path/to/shared/nfs/xyz"
*   host B receives the message, attempts to open the file
*   host B fails because NFS client has not yet noticed that a new file was previously created on A (race condition between ActiveMQ and the NFS protocol)

My solution is to add a loop into all message receivers that would wait up to 1 minute for the NFS to realize a new file was added.

This solution however seems unclean. What would be a good way of solving this? Do you know of any enterprise integration design patterns that apply?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:30:27.567

另一个想法是让主机 B 成为一个文件轮询使用者，它会拾取放置在“/path/to/shared/nfs/xyz”中的任何内容并处理它……这样你就不需要来自 A 的任何消息到 B 来启动它，只是文件的存在。

您仍然可以轻松地使用[Apache Camel 的文件组件之](http://camel.apache.org/file2.html)类的东西...

```
from("file://path/to/shared/nfs/xyz").to(...); 
```

# c# - Release build throws "System.IO.FileNotFoundException: Could not load file or assembly" looking for XmlSerializers assembly

> ID：13073382
> 
> 赞同：1
> 
> 时间：2012-10-25T16:48:17.903
> 
> 标签：c#, web-services, exception, xmlserializer

Let me preface this by saying I don't think this is a duplicate question, but, that may be because I am not fully understanding this issue.

It sounds like this exception is by design, at least according to the many posts I've read. But, this exception is periodically breaking my application. If the web service call is made again, it seems to work (magic!). But, I want that first web service call to work.

This is the exception that is being logged:

```
System.IO.FileNotFoundException: Could not load file or assembly 'Our.Namespace.Here.ClassName.XmlSerializers' or one of its dependencies. The system cannot find the file specified.
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.LoadWithPartialNameInternal(AssemblyName an, Evidence securityEvidence, StackCrawlMark& stackMark)
   at System.DirectoryServices.AccountManagement.UnsafeNativeMethods.IADsPathname.Retrieve(Int32 lnFormatType)
   at System.DirectoryServices.AccountManagement.ADStoreCtx.LoadDomainInfo()
   at System.DirectoryServices.AccountManagement.ADStoreCtx.get_DnsForestName()
   at System.DirectoryServices.AccountManagement.ADStoreCtx.GetGroupsMemberOf(Principal p)
   at System.DirectoryServices.AccountManagement.Principal.GetGroupsHelper()
   at Our.Different.Namespace.ClassName.FindAccount(FindAccountRequest request, String ip, FindAccountResponse& response) 
```

I do not get this XmlSerializers file as part of my build output when building in release mode. It sounds like I might be able to [force the file to be generated](https://stackoverflow.com/questions/134224/generating-an-xml-serialization-assembly-as-part-of-my-build), but, how can I get the exception to stop without forcing the file to be generated?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T10:45:49.617

这种情况下的问题根源是与 Active Directory 通信的网络问题。然后在尝试序列化 COM 异常期间发生 FileNotFoundException（在 IADsPathname COM 接口中）。此 FileNotFoundException 是 XmlSerializer 正常操作的一部分。它是预期的，将在框架代码中被捕获和处理（它将导致所需的程序集生成）。忽略它并继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T11:05:49.863

我收到了类似的错误消息，而根本原因是 Windows 版本中的这个 AD 错误（[https://support.microsoft.com/en-us/kb/2683913](https://support.microsoft.com/en-us/kb/2683913)），同时使用了 System.DirectoryServices。 .NET 中的 AccountManagement 命名空间。

# javascript - AJAX and Javascript not working

> ID：13073383
> 
> 赞同：1
> 
> 时间：2012-10-25T16:48:18.050
> 
> 标签：javascript, ajax, jsp, asp-classic, peoplesoft

NO JQUERY. I am using peoplecode which is similar to JSP, ASP, and ZXZ. The ajax request is triggered am I am trying to pull the text 'Hello World' from this script...

```
Function IScript_AJAX_Test()  
   %Response.Write("<div id='hello'>Hello World</div>");  
End-Function; 
```

My javascript function that makes the ajax call looks like this...

```
function AJAX_test (ajax_link) {

  if (typeof XMLHttpRequest == 'undefined') {
            XMLHttpRequest = function() {
                try { return new ActiveXObject("Msxml2.XMLHTTP.6.0"); } catch(e) {}
                try { return new ActiveXObject("Msxml2.XMLHTTP.3.0"); } catch(e) {}
                try { return new ActiveXObject("Msxml2.XMLHTTP"); }     catch(e) {}
                try { return new ActiveXObject("Microsoft.XMLHTTP"); }  catch(e) {}

            throw new Error('This browser does not support XMLHttpRequest or XMLHTTP.');
            };
        }
  var request = new XMLHttpRequest();
  request.onreadystatechange = function() {
    if (request.readyState == 4 && request.status == 200) {

      document.getElementById('ajax').innerHTML = request.responseText.document.getElementById('hello').innerHTML;
      //document.getElementById('ajax').innerHTML = 'Testing';
    }  
  }
  request.open('GET', ajax_link, true);
  request.send(); 

  //document.getElementById('ajax').innerHTML = ajax_link;
} 
```

As you can see in this line..

```
document.getElementById('ajax').innerHTML = request.responseText.document.getElementById('hello').innerHTML; 
```

...I am trying to grab the text by getting the innerHTML from the id. This isn't working though. When I click the button nothing happens.

I tried using the line below, but it returns an entire new page where the id would be (probably because of Peoplesoft)...

```
document.getElementById('ajax').innerHTML = request.responseText; 
```

Can someone help me achieve this...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:53:10.710

让它简单：

```
Function IScript_AJAX_Test()  
   %Response.Write("Hello World");  
End-Function; 
```

Javascript：

```
document.getElementById('ajax').innerHTML = request.responseText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:00:52.220

Ajax 可能有两种类型。一种是服务器端，另一种是客户端。您正在尝试从客户端获取数据。在这种情况下，ajax 只获取页面的整个页面结果而不是一部分。如果您编写，您将获得整个页面结果（HTML 输出）

```
document.getElementById('ajax').innerHTML = request.responseText; 
```

但是你不能只获取另一个页面特定部分的 innerHtml 部分。在这种情况下，您将获得整个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:16:44.913

我试过你的代码，它对我有用，与

```
Function IScript_AJAX_Test()  
   %Response.Write("<div id='hello'>Hello World");  
End-Function; 
```

并在 javascript

```
document.getElementById('ajax').innerHTML = request.responseText; 
```

确保调用内容 servlet (psc)，而不是门户 servlet (psp)，例如“http: **//peoplesofturl/psc/ps/EMPLOYEE/HRMS/s/WEBLIB_Z_SYS.FUNCLIB.FieldFormula.IScript_AJAX_Test** ”，否则你会获取包含在 peoplesoft 门户中的响应。

[您可以使用GenerateScriptContentRelURL](http://docs.oracle.com/cd/E28394_01/pt852pbh1/eng/psbooks/tpcl/book.htm?File=tpcl/htm/tpcl02.htm#37ee99c9453fb39_ef90c_10c791ddc07__3d6f)或[GenerateScriptContentURL](http://docs.oracle.com/cd/E28394_01/pt852pbh1/eng/psbooks/tpcl/book.htm?File=tpcl/htm/tpcl02.htm#37ee99c9453fb39_ef90c_10c791ddc07__3d6e)函数从 peoplecode 生成 url 。

# android - osm中的自定义覆盖标记

> ID：13073384
> 
> 赞同：1
> 
> 时间：2012-10-25T16:48:20.200
> 
> 标签：android, osmdroid

我正在尝试使用自定义 Overlay 类为 OSMdroid 地图制作自定义标记。我想我明白了，但它在绘图构造器上给了我一个 StackOverflowError

这是主要活动的代码

```
package com.example.osmap1;import java.util.List;

import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;
import org.osmdroid.views.overlay.Overlay;

import com.example.osmap1.herramientas.MiOverlay;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {
MapView map;
MapController mc;
GeoPoint gp;
List<Overlay> mOverlays;

private static MainActivity mainActivity=null;
public static MainActivity getInstance(){
    if(mainActivity == null){
        mainActivity=new MainActivity();

    }
    return mainActivity;
}

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mainActivity=this;
    map=(MapView)findViewById(R.id.mapView);

    mc=map.getController();
    map.setBuiltInZoomControls(true);
    map.setMultiTouchControls(true);

    addPointToMapOverlay("43.528023","-5.672949");

}

private void addPointToMap (String latitud, String longitud){

    String coordenadas[]={latitud,longitud};
    double lat=Double.parseDouble(coordenadas[0]);
    double lng=Double.parseDouble(coordenadas[1]);
    GeoPoint gp=new GeoPoint((int)lat*1E6,(int)lng*1E6);
    mc.animateTo(gp);
    mc.setZoom(4);
    /*map.invalidate(); no funciona en osm*/
}

private void addPointToMapOverlay (String latitud, String longitud){

    String coordenadas[]={latitud,longitud};
    double lat=Double.parseDouble(coordenadas[0]);
    double lng=Double.parseDouble(coordenadas[1]);
    GeoPoint gp=new GeoPoint((int)lat*1E6,(int)lng*1E6);

    mOverlays=map.getOverlays();
    MiOverlay marker= new MiOverlay(gp);
    mOverlays.add(marker);
    mc.animateTo(gp);
    mc.setZoom(4);
    map.invalidate();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
 }
} 
```

这是我的自定义类代码

```
public class MiOverlay extends Overlay{

private GeoPoint punto;

public MiOverlay(GeoPoint point) {

    super(MainActivity.getInstance().getBaseContext());
    this.punto=point;
    // TODO Auto-generated constructor stub
}

@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {

    // TODO Auto-generated method stub
    this.draw(canvas, mapview, shadow);

    //se traduce el punto geo localizado a un punto en la pantalla
    Point scrnPoint = new Point();
    mapview.getProjection().toPixels(this.punto, scrnPoint);

    //se construye un bitmap a partir de la imagen
    Bitmap marker = BitmapFactory.decodeResource(MainActivity.getInstance().getResources(),com.example.osmap1.R.drawable.seas);

    //se dibuja la imagen del marker
    canvas.drawBitmap(marker, scrnPoint.x - marker.getWidth() / 2, scrnPoint.y - marker.getHeight() / 2, null);

}

public boolean onTouchEvent(MotionEvent event, MapView mapView) 
{   
    //---when user lifts his finger---
    if (event.getAction() == 1) {                
        GeoPoint p = (GeoPoint) mapView.getProjection().fromPixels(
            (int) event.getX(),
            (int) event.getY());
            Toast.makeText(MainActivity.getInstance().getBaseContext(), 
                p.getLatitudeE6() / 1E6 + "," + 
                p.getLongitudeE6() /1E6 , 
                Toast.LENGTH_SHORT).show();
    }                            
    return false;
}        

} 
```

我认为问题可能出在 mapview.getProjection().toMapPixels(this.punto, scrnPoint) 但我不确定......任何建议都很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:56:27.737

这是一个无限循环——我承认我不太明白你想要做什么，但是 draw 函数递归地调用自己：

```
@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {

    this.draw(canvas, mapview, shadow); // This is the same method!
} 
```

结果，说明了控制流程，是这样的：

```
draw()
 -> draw()
    -> draw()
    ...
    StackOverflowException 
```

也许你的意思是`super.draw(canvas, mapview, shadow)`？

# .net - Windows CE 6.0 应用程序错误然后应用程序冻结但在 Windows CE 5 中工作

> ID：13073395
> 
> 赞同：1
> 
> 时间：2012-10-25T16:49:01.903
> 
> 标签：.net, vb.net, sql-server-2005, mobile, windows-ce

您好，我有一个在 MC3090 设备上的 Windows CE 5.0 中运行良好的 Windows CE 应用程序。然而，我们得到了运行 Windows CE 6.0 的新 Symbol MC，并且应用程序运行但在应用程序中出现异常并且应用程序关闭之后。我收到“发生应用程序错误”。如果我尝试再次打开应用程序，它会冻结整个设备，我必须重新启动它。

供应商 Symbol/Motorola 表示这不是操作系统问题，而是软件问题。我正在使用 .NET Framework 3.5。我们使用 SQL Compact Mobile 3.5 连接到远程 SQL Server。

无论如何我可以找出导致“应用程序错误”的原因吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:50:09.520

似乎与 .net 紧凑框架存在一些冲突。较新的设备预装了 3.5，应用程序在 2.0 中运行。必须通过 app.config 明确告诉应用程序以 2.0 框架为目标。

# linux - 如何在同一台机器上的两个网卡之间发送流量（ubuntu 12.04）

> ID：13073396
> 
> 赞同：2
> 
> 时间：2012-10-25T16:49:03.470
> 
> 标签：linux, networking, namespaces, ubuntu-12.04

我有一台带有两个网卡的机器，我想将数据从一个网卡发送到另一个网卡，并且我希望这些流量真正通过交换机。但是当我这样做时，操作系统会注意到这两个网卡在同一台机器上，并且从未真正发送出去。

我最初的想法是创建一个网络命名空间并将其中一个网卡放在这个命名空间中，但我找不到任何关于如何做到这一点的帮助。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:04:16.027

您需要绕过本地路由表。请看这个答案： [如何避免在 Linux 中通过本地堆栈进行路由](https://stackoverflow.com/questions/8538081/how-to-avoid-routing-through-local-stack-in-linux)

# angularjs - 在 AngularJS 中动态添加标签

> ID：13073399
> 
> 赞同：0
> 
> 时间：2012-10-25T16:49:13.757
> 
> 标签：angularjs

全部：

有没有办法在 AngularJS 中动态添加标签（尤其是自定义标签）？

我最近创建了一个类型的自定义标签：

```
<mytag type="small" /> 
```

我试图在更大的 <div> 元素中进行管理。我想做的是在 div 元素中放置一个按钮，当按下该按钮时，会在 div 中创建一个新的 mytag 元素。

换句话说，给定一个初始页面组成：

```
<div ng-controller="tagControl">
   <div id="tagdiv">
      <mytag type="small" />
   </div>
   <div id="Controls">
      <button ng-click="addTag()">Add New Tag</button>
      <button ng-click="clearTags()">Clear All Tags</button>
   </div>
</div> 
```

我想在 tagControl 的 addTag() 函数中添加一些东西，只要按下“添加新标签”按钮，它就会添加一个新的 mytag 标签，我想在 clearTags() 函数中添加一些东西，当它删除所有添加的标签时“清除所有标签”按钮被按下。

这可能使用AngularJS吗？如果没有，是否可以使用第三方库来完成？在任何一种情况下，如何做到这一点？

在此先感谢您的任何见解...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:58:18.167

您需要考虑 MVC 而不是 DOM 操作。您想要显示多少个`<mytag>`s 应该由模型中的某些内容驱动。然后您的 HTML 将如下所示：

```
<div ng-controller="tagControl">
  <div id="tagdiv">
     <mytag type="small" ng-repeat="foo in items" />
  </div>
  <div id="Controls">
     <button ng-click="addTag()">Add New Tag</button>
     <button ng-click="clearTags()">Clear All Tags</button>
  </div>
</div> 
```

然后您的 addTag() 方法将添加到`items`模型中，而 clearTags() 将清除列表。Angular 会在你更新模型时为你添加标签

# web-services - 将实体作为参数传递的 Web 服务

> ID：13073400
> 
> 赞同：0
> 
> 时间：2012-10-25T16:49:16.250
> 
> 标签：web-services, soap

我刚刚设计了一个具有以下签名`getItems(MyEntity myEntity)`的方法的 Web 服务（代码优先方法）关键是 MyEntity 具有其他实体作为属性等等。正因为如此，当客户端从**WSDL**生成类时，除了生成的 xml (WSDL) 过于复杂之外，在客户端创建了许多实体，问题是；将我的系统实体暴露给客户是否正确？或者我应该创建一个具有简单值的实体？(int amount, String code, String user) 就像一个门面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:02:41.083

我建议只公开您需要的属性和对象。如果您的`MyEntity`类中存在您永远不会期望客户端填充的属性，那么将其包含在 WSDL 中是没有意义的。

# dojo - Typescript 可以使用现有的 AMD 吗？

> ID：13073404
> 
> 赞同：2
> 
> 时间：2012-10-25T16:49:32.953
> 
> 标签：dojo, typescript, js-amd

Dojo 1.8 已经定义了 AMD 模块。例如，您可以执行以下操作：

```
require(["dojo/_base/lang"], function (lang) {
  var ab = lang.mixin({a: 1}, {b: 2});
}); 
```

但是当我尝试导入这个模块时如何避免出错呢？

```
import lang = module ("dojo/_base/lang"); 
```

有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:40:43.803

您将需要一个用于 lang 的 typescript 定义文件。假设与此代码`lang.d.ts`存在于同一目录中：`lang.js`

```
import lang = module('dojo/_base/lang')

var ab = lang.mixin({a: 1}, {b: 2}); 
```

编译

```
tsc --module amd yourfile.ts 
```

生成

```
define(["require", "exports", 'dojo/_base/lang'], function(require, exports, __lang__) {
    var lang = __lang__;
    var ab = lang.mixin({a: 1}, {b: 2});
} 
```

如果您不想出于任何原因匹配目录结构，请改为这样做。假设`lang.d.ts`在一个名为`3rd`that的子目录中，它是`test.ts`.

*测试.ts：*

```
///<reference path="3rd/lang.d.ts"/>
import lang = module('dojo/_base/lang');
var ab = lang.mixin({a: 1}, {b: 2}); 
```

*第三/lang.d.ts：*

```
declare module 'dojo/_base/lang' {
...
} 
```

生成与上面相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:01:20.363

您通常可以通过 dojo 加载程序加载模块，您不必使用 import 语句。但是如果你想你必须声明模块：

```
declare module "dojo/_base/lang" {
  export function ...
  export class ...
} 
```

# c - 别名、变量和文件名

> ID：13073407
> 
> 赞同：0
> 
> 时间：2012-10-25T16:49:42.330
> 
> 标签：c, linux, macos, unix

我想加快使用别名在 C 中编译文件所需的时间。

这是我的别名：

```
alias gccp="gcc -pendantic -Wall -ansi '$1'.c -o '$1'" 
```

我尝试 gccp p1 并期望它运行命令`gcc -pendantic -Wall -ansi p1.c -o p1`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:55:43.910

别名不能有参数；在你的情况下，1 美元什么都不是。您需要创建一个执行此操作的函数并将其导出。

**编辑**：

我犯了一个错误。参数在 bash 别名中是可能的，**但**它们是在创建别名时分配的，而不是在调用别名时分配的。因此，为了实现您想要的功能，请在您的 .bashrc 文件中添加此功能并重新启动 bash。

```
function gccp()
{
        gcc -pendantic -Wall -ansi $1.c -o $1
} 
```

**甚至进一步编辑**

这完全取决于你所说的论点。例如，如果我在`.bashrc`文件中添加以下内容并重新启动 bash

`alias blabla="echo $HOSTNAME"`

然后我调用`blabla`我得到我的主机名。但是 $HOSTNAME 并不是一个真正的论点。这是一个变量。一个参数意味着您正在为您正在调用的函数/命令提供某种信息。因此，根据该定义，别名**不**带参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:25:47.350

改为使用`make`。

```
$ export CFLAGS=-pendantic -Wall -ansi
$ make p1 
```

`make`将使用其内置的模式匹配规则来做你想做的事。

如果使用环境变量以不希望的方式与其他事物交互，请将`CFLAGS`值直接传递给，`make`或者编写一个定义`CFLAGS`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:03:22.300

别名不能带参数，请参阅[Bash 手册](http://www.gnu.org/software/bash/manual/bashref.html#Aliases)。当您使用参数调用别名时，参数只是附加到命令的末尾，因为 shell 实际上只是用命令名称替换别名值。

改用[shell 函数](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Functions)：

```
gccp ()
{
    gcc -pendantic -Wall -ansi "$1".c -o "$1"
} 
```

# actionscript-3 - AIR3.4 的错误 #1503 但不是 AIR3.2

> ID：13073408
> 
> 赞同：0
> 
> 时间：2012-10-25T16:49:42.253
> 
> 标签：actionscript-3, flash, air

我正在使用 Adob​​e AIR 开发 Android/iOS 应用程序。除了以下测试外，该应用程序似乎在 Flash Pro 和真实设备中都可以正常工作：

1.  在 Flash Pro 中发布预览。
2.  关闭预览窗口。

错误出现在输出面板中：

`Error: Error #1503: A script failed to exit after 30 seconds and was terminated. at [*code location is a for loop inside writeExternal() of a class saved to a Shared Object*] Test Movie terminated.`

AIR3.4 会发生这种情况，但 AIR3.2 不会。我做了很多代码检查、跟踪等，但仍然无法找出问题所在。有什么建议么？

# magento - Magento - 控制器中的 createBlock()，我可以在 layout.xml 中访问它吗？

> ID：13073414
> 
> 赞同：1
> 
> 时间：2012-10-25T16:50:11.317
> 
> 标签：magento, layout

我有一个带有视图操作的索引控制器，它执行以下操作：

```
echo $this->getLayout()
    ->createBlock('core/template','builder')
    ->setTemplate('pages/builder/view.phtml')
    ->setHeaderText($extra->getHeaderText())
    ->setFooterText($extra->getFooterText())
    ->setProducts($collection)
    ->toHtml(); 
```

基于此，我正在尝试在 builder.xml 中执行布局更新（在模块的 config.xml 中设置）。但是，我不确定您是否可以针对以这种方式实例化的块。基于上述块创建，我是否能够执行以下操作：

```
<layout version="0.1.0">
    <builder_index_view>
        <!-- shouldn't this reference the createBlock() name argument? -->
        <reference name="builder">
            <block type="page/html_header" name="builder.header" as="builder.header" template="pages/builder/header.phtml"/>
        </reference>
    </builder_index_view>
</layout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:57:02.210

如果块在调用之前被实例化`loadlayout()`，是的。

# postgresql - 将数据有效地插入表中，postgresql

> ID：13073415
> 
> 赞同：2
> 
> 时间：2012-10-25T16:50:11.853
> 
> 标签：postgresql

我是 postgresql（和一般数据库）的新手，希望能获得一些关于提高以下语句效率的指示。

我正在将数据从一个表插入到另一个表，并且不想插入重复值。我有一个被索引并且是主键的摆脱（每个表中的唯一标识符）。

我目前正在使用以下语句：

```
INSERT INTO table1 SELECT * FROM table2 WHERE rid NOT IN (SELECT rid FROM table1). 
```

截至目前，表一是 200,000 条记录，表 2 是 20,000 条记录。Table1 将继续增长（可能达到 2,000,000 条左右），而 table2 将保持在 20,000 条左右的记录。截至目前，该语句运行大约需要 15 分钟。我担心随着 Table1 的增长，这将需要很长时间。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:56:52.353

这应该比您当前的查询更有效：

```
INSERT INTO table1
SELECT * 
FROM table2
WHERE NOT EXISTS (
  SELECT 1 FROM table1 WHERE table1.rid = table2.rid
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:25:19.597

```
insert into table1
select t2.*
from
    table2 t2
    left join
    table1 t1 on t1.rid = t2.rid
where t1.rid is null 
```

# java - JUnit：使用不同的配置运行一个测试

> ID：13073419
> 
> 赞同：2
> 
> 时间：2012-10-25T16:50:20.467
> 
> 标签：java, unit-testing, testing, junit

我有 2 种测试方法，我需要使用不同的配置来运行它们

```
myTest() {
    .....
    .....
}

@Test
myTest_c1() {
    setConf1();
    myTest();
}

@Test
myTest_c2() {
    setConf2();
    myTest();
}

//------------------

nextTest() {
    .....
    .....
}

@Test
nextTest_c1() {
    setConf1();
    nextTest();
}

@Test
nextTest_c2() {
    setConf2();
    nextTest();
} 
```

我不能从一个配置中同时运行它们（如下面的代码所示），因为我需要单独的方法来执行 tosca。

```
@Test
tests_c1() {
    setConf1();
    myTest()
    nextTest();
} 
```

我不想编写这两种方法来运行每个测试，我该如何解决这个问题？

首先我想写自定义注释

```
@Test
@RunWithBothConf
myTest() {
   ....
} 
```

但也许还有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:35:45.700

怎么用`Theories`？

```
@RunWith(Theories.class)
public class MyTest{

   private static enum Configs{
     C1, C2, C3;
   }

  @DataPoints
  public static Configs[] configValues = Configs.values();

  private void doConfig(Configs config){
    swich(config){...}
  }

  @Theory
  public void test1(Config config){
      doConfig(config);

      // rest of test
  }

  @Theory
  public void test2(Config config){
     doConfig(config);

      // rest of test
  } 
```

如果关闭，不知道为什么要格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:22:21.277

这是我将如何处理它：

*   创建两个测试类
*   第一个类配置为 conf1 但使用 @Before 属性触发设置
*   第二个类扩展了第一个类，但覆盖了 configure 方法

在下面的示例中，我有一个成员变量`conf`。如果没有运行配置，它会保持默认值 0。setConf1 现在`setConf`在`Conf1Test`将这个变量设置为 1 的类中。 setConf2 现在`setConf`在`Conf2Test`类中。

这是主要的测试类：

```
public class Conf1Test
{
   protected int conf = 0;

   @Before
   public void setConf()
   {
      conf = 1;
   }
   @Test
   public void myTest()
   {
      System.out.println("starting myTest; conf=" + conf);
   }

   @Test
   public void nextTest()
   {
      System.out.println("starting nextTest; conf=" + conf);
   }
} 
```

和第二个测试班

```
public class Conf2Test extends Conf1Test
{
   // override setConf to do "setConf2" function
   public void setConf()
   {
      conf = 2;
   }
} 
```

当我配置我的 IDE 以运行包中的所有测试时，我得到以下输出：

```
starting myTest; conf=1
starting nextTest; conf=1
starting myTest; conf=2
starting nextTest; conf=2 
```

我认为这给了你什么。每个测试只需要编写一次。每个测试运行两次，一次使用`conf1`，一次使用`conf2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:27:01.487

在我拥有的一堆测试用例中，我遇到了类似的问题，其中某些测试需要使用不同的配置运行。现在，在您的情况下，“配置”可能更像是设置，在这种情况下，这可能不是最佳选择，但对我来说，它更像是部署模型，所以它适合。

1.  创建一个包含测试的基类。
2.  使用代表不同配置的基类扩展基类。
3.  当您执行每个派生类时，基类中的测试将使用其自己类中的配置设置运行。
4.  要添加新测试，您只需将它们添加到基类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:06:20.590

你现在拥有它的方式对我来说似乎很好。您没有复制任何代码，每个测试都清晰易懂。

# c# - 如何从asp.net中的JS对话框中获取返回值而不将其绑定到按钮

> ID：13073420
> 
> 赞同：0
> 
> 时间：2012-10-25T16:50:21.570
> 
> 标签：c#, javascript, asp.net

如何在 ASP.NET 中显示确认框并获取 C# 代码中的返回值而不将其绑定到按钮？如果满足某个条件，我需要从按钮的事件处理程序内部显示确认框。

情况：

```
protected void okBtn_Click(object sender, EventArgs e)
{
    if (blah)
    {
        bool answer = DisplayConfirmationBox();
    }
} 
```

使用 JS 显示它并不是一个真正的问题，但从中获取返回值是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:54:11.840

Javascript 在客户端执行，ASP.NET/C# 在服务器上执行。

要将值从 JS 对话框获取到服务器，以便您可以在服务器端代码中使用它，您必须将其存储在（隐藏）文本字段中并执行 PostBack 或执行异步 AJAX 请求。

对于第一种方法，请参见[HiddenField](http://msdn.microsoft.com/library/system.web.ui.webcontrols.hiddenfield.aspx)服务器控件并从 JS 触发 PostBack，您可以使用

```
__doPostBack(control, arg); 
```

# python - Python 没有 if 和 with if

> ID：13073422
> 
> 赞同：-8
> 
> 时间：2012-10-25T16:50:24.990
> 
> 标签：python, if-statement

## > 这是怎么回事..

```
Code-1

def first_last6(nums):
    if nums[0]==6 or nums[len(nums)-1] == 6:
        return True
    else:
        return False 
```

* * *

```
Code-2
def first_last6(nums):
  return (nums[0]==6 or nums[-1]== 6) 
```

怎么两个都是真的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:56:41.900

里面似乎有两个问题，所以我都会回答。

首先，为什么都`nums[len(nums)-1]`和`nums[-1]`一样？指定索引时，Python 允许您使用负数，其解释如下：如果`i`in`nums[i]`为负数，则`len(nums)+i`返回索引。因此，基本上，`[-1]`将获得最后一个元素，`[-2]`倒数第二个等。

第二个问题是为什么这两种格式是相同的：

```
if expression:
    return True
else
    return False 
```

和

```
return expression 
```

`expression`在这种情况下是一个返回布尔类型的表达式，所以`True`or 或`False`. `if`声明准确地检查了这一点；如果表达式等于 true，它将返回 true，否则（如果表达式等于 false）它将返回 false。

因此，您可以（并且应该为了使其更简洁）只返回表达式本身，因为它已经是真或假。

如果情况`expression`本身不是布尔表达式，if 语句仍将检查它将评估的布尔类型（例如，非空字符串将为真，或者 0 以外的数字也为真）。为了保持简短的语法，您可以使用`bool(expression)`, 如评论中提到的 larsmans 显式地将表达式转换为布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:53:43.387

嗯，因为两者完全相同，并且它们都评估为 True。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:58:50.260

nums[-k] 是 nums[len(nums)-k] 的简写。要获得第 k 个最后一个元素，请使用符号 nums[-k]。通常很清楚符号代表什么，编译器知道如何将 python 代码转换为机器代码，这就是为什么某些语言结构是可能的而其他语言结构是不可能的。其他短手包括 nums[:k] 来获取前 k 个元素， nums[:-k] 来获取所有元素直到第 k 个最后一个元素等。通过 google、python 文档，您会找到更多关于此的信息。列表操作是 Python 的一大优势。

[http://www.diveintopython.net/native_data_types/lists.html](http://www.diveintopython.net/native_data_types/lists.html)

# javascript - 在 JavaScript 中解析 OData 元数据

> ID：13073429
> 
> 赞同：2
> 
> 时间：2012-10-25T16:50:57.033
> 
> 标签：javascript, json, odata, datajs

按照此处提供的示例： [http ://datajs.codeplex.com/wikipage?title=Metadata%20Generation%20Sample&referringTitle=Documentation](http://datajs.codeplex.com/wikipage?title=Metadata%20Generation%20Sample&referringTitle=Documentation)

我以以下形式检索元数据：

```
{"version":"1.0","dataServices":{"dataServiceVersion":"1.0","schema":[{"namespace":"IdeasDbModel","entityType":[{"name":"Category","key":{"propertyRef":[{"name":"CategoryID"}]},"property":[{"name":"CategoryID","type":"Edm.Int32","nullable":"false","extensions":[{" ... 
```

如何在 JavaScript 中解析它以检索元数据信息，例如列类型、主键等，例如表 Category 具有主键 (propertyRef) CategoryID 并且该列的类型为 Edm.Int32？我不明白结果的格式。在 dataServices -> Schema[0] -> entityType （或关联）下，它只是一个对象数组，所以我必须遍历每个元素以找到匹配的结果，或者是否有更简单的方法让列由姓名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:42:54.277

你应该看看[JayData](http://jaydata.org)。它从元数据创建一个 JavaScript 类上下文，您可以更直观地使用它。在您的页面中引用 JayData 后的示例：

```
$data.service("http://localhost:60349/Northwind.svc", function (f, t) {
 var northwind = f();
 console.dir(northwind["Categories"].elementType.memberDefinitions["$Category_ID"]);
}); 
```

结果：

```
computed: true
configurable: true
dataType: "Edm.Int32"
definedBy: function Category(){
enumerable: true
key: true
kind: "property"
name: "Category_ID"
nullable: false
type: "Edm.Int32" 
```

# ios - 模态视图被解除后突出显示单元格

> ID：13073434
> 
> 赞同：0
> 
> 时间：2012-10-25T16:51:24.487
> 
> 标签：ios, uitableview

我有一个表格视图和一个工具栏，可以将项目添加到表格视图中。addItemView 以模态方式呈现。

现在，当我关闭模态视图时，我想指出添加了哪个单元格。现在我已经在 UITableView 上使用了 setSelected 和 deselct 方法，但是它们被触发得太快了。给用户一个关于添加了哪个单元格的良好指示的好方法是什么？

我可以添加一个计时器来阻止 setSelected 方法立即触发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:56:42.753

好吧，我应该先尝试一下...我刚刚添加了： [NSTimer scheduledTimerWithTimeInterval:0.4 target:self selector:@selector(highlightAddedRow:) userInfo:nil repeats:NO];

highlightAddedRow 方法访问一个属性，该属性指示添加了哪个 rowIndex。

# javascript - 如何遍历具有相同前缀的 id

> ID：13073436
> 
> 赞同：1
> 
> 时间：2012-10-25T16:51:30.257
> 
> 标签：javascript, arrays, variables, loops, local-storage

我有这部分代码，可根据列表项的 ID 号在单击时将列表项保存到 localStorage。在另一个页面上，我可以加载保存的任何列表项。

```
var save1075 = $('#store-1075').get(0);
$('#store-1075').on('click', function () { 
    var storeStorageKey1075 = $(this).attr('id'); 
    localStorage.setItem('storeStorageKey1075', $(this).attr('id'));
    localStorage.setItem('storeStorageKey1075', this.innerHTML);
});

if ( localStorage.getItem('storeStorageKey1075') ) {
save1075.innerHTML = localStorage.getItem('storeStorageKey1075'); 
}

var storeStorageKey1075 = $(this).attr('id');
    if ( localStorage.getItem('storeStorageKey1075') ) {
    storeStorageKey1075 = localStorage.getItem('storeStorageKey1075');

} 
```

现在，我必须为每个单独的 ID 号重复该代码块，并且我试图将 ID 号设置为一个变量，该变量在单击时循环遍历所有可能的 ID 号，但只保存该特定 ID 的 ID。也许是这样的：

```
var id = //some sort of loop or array of possible ids.
var save = $('#store-'+id).get(0);
$('#store-'+id).on('click', function () { 
    var storeStorageKey = $(this).attr('id'); 
    localStorage.setItem('storeStorageKey', $(this).attr('id'));
    localStorage.setItem('storeStorageKey', this.innerHTML);
});

if ( localStorage.getItem('storeStorageKey') ) {
save.innerHTML = localStorage.getItem('storeStorageKey'); 
}

var storeStorageKey = $(this).attr('id');
    if ( localStorage.getItem('storeStorageKey') ) {
    storeStorageKey = localStorage.getItem('storeStorageKey');

} 
```

每个列表项都具有相同的前缀“store-”，并且数字没有特定的顺序，而是在每次创建新的商店位置时随机生成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T16:54:01.540

显而易见的事情是添加一个类，但您也可以：

```
var elems = $( "[id^='store']")

elems.on( "click", function() {//Save html on click
    localStorage.setItem( this.id, this.innerHTML );
});

    //Retrieve html
elems.each( function() {
    var html = localStorage.getItem( this.id );

    if( html ) {
        $(this).html( html );
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:58:32.270

这会遍历所有以 开头的键`storeStorageKey`：

```
for (var i=0; i<localStorage.length; i++) {
    var key = localStorage.key(i);
    if (/^storeStorageKey/.test(key)) {
        var item = localStorage.getItem(key);
        // do something with item
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:57:48.730

我建议不要在 id 中使用前缀，而是添加一个类来指示一个项目是可存储的：

```
<div class="storable" id="store-1234">...</div> 
```

然后您可以使用该类一次性选择所有可存储的东西：

```
$('.storable').on('click', function () { 
    var storeStorageKey = $(this).attr('id'); 
    ...
}); 
```

# php - 将自定义元素添加到 Joomla 中的主菜单项

> ID：13073438
> 
> 赞同：1
> 
> 时间：2012-10-25T16:51:32.453
> 
> 标签：php, joomla, menu, overriding, joomla2.5

我正在尝试做的概念很简单，但我对 php 和 joomla 框架并不擅长。目前主菜*单项*是这样生成的：

```
<li class="item-101 current active">
  <a class="hide-text" href="#some-link">Home</a>
</li> 
```

我想要实现的是***仅***在*主菜*单项中插入一个`<i>`元素，如下所示：

 **```
<li class="item-101 current active">
  <a class="hide-text" href="#some-link"><i class="icon-home"></i>Home</a>
</li> 
```

我怎样才能做到这一点？我正在使用 Joomla！2.5 大气压

我想有可能做一些类似“如果这个菜单项是主页链接然后在标签中添加这个代码`<a>`”但我真的不知道该怎么做，我的 php 不够强大：P

**注意：**
我这样做是为了实现一个简单的主页图标而不是简单的*主页*菜单项。
正如类语法所暗示的那样，我正在使用*twitter bootstrap* css-framework，但我已经实现了*Icomoon*字体集（如在 joomla 3.0 中）而不是*tbs Glyph-icons* sprites 图像。
不幸的是，使用基于字体的图标，文本规则也适用于图标，这就是我试图在`<a>`标签内插入自定义元素的原因，以便我可以覆盖`hide-text`隐藏主图标的类。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:18:49.623

查看菜单模块的模板文件。

/modules/mod_menu/tmpl/default.php

该模板为菜单模块构建 HTML。

我刚刚检查了它在 Joomla 2.5 中是如何工作的，并且在 /modules/mod_menu/tmpl/default.php 模板中构建了列表。如果您只想添加到主页链接，则必须添加一些代码。像这样的东西：

```
if($item->home == '1'){ $item->title = '<i class="icon-home"></i>' . $item->title; }; 
```

将它插入到 foreach 循环下方并试一试，它应该看起来像这样：

```
foreach ($list as $i => &$item) :
    // THIS ADDS THE <i> to only the HOME LINK
    if($item->home == '1'){ $item->title = '<i class="icon-home"></i>' . $item->title; }; 

    $class = 'item-'.$item->id;
    if ($item->id == $active_id) {
        $class .= ' current';
    } 
```

祝你好运 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T12:58:12.440

我也一直在关注本指南（感谢 Gruber 和 Mark Vink），但使用的是 glyphicons 而不是 IcoMoon。我发现上面的示例中存在语法错误。对我有用的版本帽子是

```
foreach ($list as $i => &$item) { 

if($item->home == '1')$item->title = '<span class="glyphicon glyphicon-home" aria-hidden="true"></span>' .$item->title; 
$class = 'item-' . $item->id 
```

ETC...**

# python - Python - 从字典中相互减去 2 个列表

> ID：13073442
> 
> 赞同：2
> 
> 时间：2012-10-25T16:51:59.827
> 
> 标签：python, list, dictionary, python-3.x

所以我必须从具有 14 个属性（列）的大型数据文件中获取信息。使用这些信息，我能够获取数据并将其组合成一个浮点列表。我必须对其进行分析，并且需要标准化值（值 - 最小值）/（最大值 - 最小值）。然后，我将原始值列表放入字典中，其中的规范化值与它们仍然相关。

我现在需要获取该字典的 2 个不同键，它们对应于 2 个不同的标准化值列表，然后将它们彼此相减以进行进一步分析。

我的字典信息示例：

```
 (3.0, 13.73, 4.36, 2.26, 22.5, 88.0, 1.28, 0.47, 0.52, 1.15, 6.62, 0.78, 1.75, 520.0): 
    [0.7105263157894738, 0.7154150197628459, 0.4812834224598929, 0.6134020618556701, 0.1956521739130435, 0.10344827586206898, 0.02742616033755273, 0.7358490566037735, 0.2334384858044164, 0.4556313993174061, 0.2439024390243903, 0.1758241758241758, 0.17261055634807418] 
```

有超过 100 个类似条目

使用 Python3 并且除了数学之外没有库任何帮助表示赞赏，但如果您觉得有更简单的方法可以做到这一点，请告诉我。

编辑：我不能使用任何导入的库

生病添加我的一些代码，但我必须剪掉大部分代码，因为它太大而无法包含在这篇文章中。

```
 for line in temp_file: 
        line = line.strip()                                         #remove white space
        line_list = line.split(",")                                 #split the list into components seperated by commas
        temp_list2 = []
        for item in line_list[0:]:                                 
              value_float = float(item)                             #make values currently of type string into type float
              temp_list2.append(value_float)
        tuple_list = tuple(temp_list2)                              #make each item into a seperate tuple and then list
        data_list.append(tuple_list)                                #these tuples in a master list data_list
  prop_elts = [(x[1:]) for x in data_list] 
```

------snip-------- （这里是我定义每一列然后计算归一化值的地方）

```
 i =  0
  while i < len(data_list):
      all_props_templist = [prop1_list[i],prop2_list[i],prop3_list[i],prop4_list[i],prop5_list[i],prop6_list[i],prop7_list[i],prop8_list[i],prop9_list[i],prop10_list[i],prop11_list[i],prop12_list[i],prop13_list[i]] 
      all_properties.append(all_props_templist)  
      i = i + 1  
  my_data_Dictionary = {el1: el2 for el1, el2 in zip(data_list,all_properties )} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:01:57.610

如果`data`是你的听写，

```
[a-b for a, b in zip(data[key1], data[key2])] 
```

`data[key1]`是一个列表，其元素是和中对应元素之间的差异`data[key2]`。

* * *

PS。当您看到编号的变量名称时：

```
 all_props_templist = [prop1_list[i],prop2_list[i],prop3_list[i],prop4_list[i],prop5_list[i],prop6_list[i],prop7_list[i],prop8_list[i],prop9_list[i],prop10_list[i],prop11_list[i],prop12_list[i],prop13_list[i]] 
```

知道情况急需一个用索引代替数字的列表：

```
all_props_templist = [prop_list[j][i] for j in range(13)] 
```

# php - 会话变量未从登录脚本传递

> ID：13073444
> 
> 赞同：1
> 
> 时间：2012-10-25T16:52:09.173
> 
> 标签：php, mysql, login

我正在尝试从登录脚本传递一个会话变量以显示一个欢迎 [用户名] 按摩，目前它没有通过它 - 有什么想法吗？我对 PHP 很陌生，因此非常感谢您的所有评论。

代码如下。

```
<?php
ob_start(); // Start output buffering

session_start(); //must call session_start before using any $_SESSION variables
$_SESSION['username'] = $username;

function validateUser()
{

    session_regenerate_id (); //this is a security measure
    $_SESSION['valid'] = 1;
    $_SESSION['username'] = $username;
}

      $username = isset($_POST['username'])?$_POST['username']:'';
     $password = isset($_POST['password'])?$_POST['password']:'';

//connect to the database here

$hostname_PropSuite = "localhost";
$database_PropSuite = "propsuite";
$username_PropSuite = "root";
$password_PropSuite = "root";
$PropSuite = mysql_pconnect($hostname_PropSuite, $username_PropSuite, $password_PropSuite) or trigger_error(mysql_error(),E_USER_ERROR); 
mysql_select_db($database_PropSuite, $PropSuite);

$username = mysql_real_escape_string($username);

$query = "SELECT password, salt FROM admin_users WHERE username = '$username';";

$result = mysql_query($query) or die(mysql_error());

if(mysql_num_rows($result) < 1) //no such user exists
{
    header('Location: http://localhost/PropSuite/index.php?login=fail');

    die();
}
$userData = mysql_fetch_array($result, MYSQL_ASSOC);
$hash = hash('sha256', $userData['salt'] . hash('sha256', $password) );
if($hash != $userData['password']) //incorrect password
{
    header('Location: http://localhost/PropSuite/index.php?login=fail');

    die();
}
else
{
   validateUser(); //sets the session data for this user
}
//redirect to another page or display "login success" message
header('Location: http://localhost/PropSuite/main');
die();

//redirect to another page or display "login success" message

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:59:01.270

我认为您的问题是您`$_SESSION['username'] = $username;`在定义 $username 之前使用。`$username = isset($_POST['username'])?$_POST['username']:'';`需要在上面`$_SESSION['username'] = $username;`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T16:59:30.150

在函数中添加用户名作为参数

```
function validateUser($username)
{
    session_regenerate_id (); //this is a security measure
    $_SESSION['valid'] = 1;
    $_SESSION['username'] = $username;
} 
```

当你调用它时传递它

```
validateUser($username); //sets the session data for this user 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T16:59:33.897

要从函数中访问在全局范围内声明的变量，您必须使用`global`关键字，如下所示：

```
function validateUser()
{
    global $username;//NEEDED to access $username declared in global scope
    session_regenerate_id (); //this is a security measure
    $_SESSION['valid'] = 1;
    $_SESSION['username'] = $username;
} 
```

# django - 安装 django-blog-zinnia

> ID：13073446
> 
> 赞同：0
> 
> 时间：2012-10-25T16:52:12.853
> 
> 标签：django, syncdb, zinnia, django-tagging

我正在浏览[http://django-blog-zinnia.com/documentation/getting-started/install/的文档](http://django-blog-zinnia.com/documentation/getting-started/install/)

当我同步数据库时，我收到此错误，标记在我安装的应用程序中，有人可以帮助我吗？

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/base.py", line 231, in execute
    self.validate()
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/loading.py", line 67, in _populate
    self.load_app(app_name)
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_blog_zinnia-0.12.dev-py2.7.egg/zinnia/models/__init__.py", line 5, in <module>
    from zinnia.models.entry import Entry
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_blog_zinnia-0.12.dev-py2.7.egg/zinnia/models/entry.py", line 22, in <module>
    from tagging.fields import TagField
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/tagging-0.2.1-py2.7.egg/tagging/fields.py", line 10, in <module>
    from tagging.models import Tag
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/tagging-0.2.1-py2.7.egg/tagging/models.py", line 9, in <module>
    from tagging.managers import TagManager, TaggedItemManager
  File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/tagging-0.2.1-py2.7.egg/tagging/managers.py", line 6, in <module>
    from django.db.models.query import QuerySet, parse_lookup
ImportError: cannot import name parse_lookup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:06:49.540

您似乎正在使用旧版本的 django-tagging（您的问题在[此处](http://code.google.com/p/django-tagging/issues/detail?id=141)讨论！），它本身取决于旧版本的 Django。

将 django-tagging 升级到最新版本；0.3.1 似乎是最新版本，但该项目自 2010 年以来没有任何活动——我不知道它是否仍然存在或非常稳定。

# objective-c - 将徽标添加到 UINavigationBar

> ID：13073448
> 
> 赞同：1
> 
> 时间：2012-10-25T16:52:16.143
> 
> 标签：objective-c, ios

我将以下代码添加到我的应用程序委托中，以将我的徽标添加到 UINavigationBar，但它不起作用。我在项目中有 Logo.png 和 Logo@2x.png。

我究竟做错了什么？

```
UIImageView *titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Logo.png"]];
[[UINavigationBar appearance] setTitleView:titleView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:23:38.923

如果我正确理解了您的问题，那么您要做的是在 ViewController 的导航项中设置 tileImage，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Set up the nav bar
    UIImage *titleImage = [UIImage imageNamed:@"Logo.png"];
    self.navigationItem.titleView = [[UIImageView alloc] initWithImage:titleImage];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:03:05.890

是的，iOS 区分大小写。再试一次，但要改变：

```
UIImageView *titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Logo.png"]]; 
```

至

```
UIImageView *titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logo.png"]]; 
```

# mysql - 很多相同的值，如何只留下其中一个

> ID：13073451
> 
> 赞同：-1
> 
> 时间：2012-10-25T16:52:40.233
> 
> 标签：mysql, sql

在我的表中，我有类别行。我想知道我有哪些类别，而不是查询所有类别。有没有办法让 SQL 查询只返回一个出现很多相同的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:53:43.913

是的，使用`DISTINCT`

```
SELECT DISTINCT categoryName
FROM category 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/fbe4c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:53:52.247

使用[SELECT DISTINCT](http://www.w3schools.com/sql/sql_distinct.asp)。它只会返回每个值一次。

# html - 显示和隐藏 DIV

> ID：13073457
> 
> 赞同：0
> 
> 时间：2012-10-25T16:53:01.807
> 
> 标签：html, iframe, slideshow, colorbox, show-hide

我正在为我的公共艺术作品建立一个画廊。我想知道是否有一种简单的方法来显示和隐藏 div？我只想在以下链接的第一页上看到概念文本：[http ://www.gerardtonti.com/PresentTense/PresentTense.html](http://www.gerardtonti.com/PresentTense/PresentTense.html)

现在，我在一个名为“concept”的 div 中将这个概念设置为绝对定位。是否还有一种方法可以使文本与背景图像等窗口大小保持一致？我也尝试过使用 iframe 和颜色框而不是 div，但不知道如何使 iframe 也仅在第一张幻灯片上可见。无论使用 iframe 还是 div，我想知道是否可以隐藏在第一张幻灯片后面的框架上。

```
<code>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Present Tense</title>
<style type="text/css">
<!--
@import url(http://fonts.googleapis.com/css?family=Josefin+Sans+Std+Light);
html,body{height:100%;}
*{outline:none;}
body{margin:0px; padding:0px; background:#000; font:16px/1.2 Verdana, sans-serif;     padding:0 10px; color: #fff;}
h2{font-size:24px; margin:15px 0 0 0;}
#toolbar{position:fixed; z-index:3; right:10px; top:10px; padding:5px; background:url(fs_img_g_bg.png);}
#toolbar img{border:none;}
#img_title{position:fixed; z-index:3; left:10px; top:10px; padding:10px;     background:url(fs_img_g_bg.png); color:#FFF; font-family:'Josefin Sans Std Light', arial, serif; font-size:24px; text-transform:uppercase;}
#bg{position:fixed; z-index:1; overflow:hidden; width:100%; height:100%;}
#bgimg{display:none; -ms-interpolation-mode: bicubic;}
#concept {position: absolute; overflow: auto; width: 1200px; height: 600px; padding: 20px; margin-top: 100px; margin-right: auto; margin-left: 350px; margin-bottom: 5px; z-index: 99; border: 0px solid #000; box-shadow: 15px 30px 40px rgba(20,20,20,20);}
#preloader{position:relative; z-index:3; width:32px; padding:20px; top:80px; margin:auto; background:#000;}
#thumbnails_wrapper{z-index:2; position:fixed; bottom:0; width:100%; background:url(empty.gif); /* stupid ie needs a background value to understand hover area */}
#outer_container{position:relative; padding:0; width:100%; margin:40px auto;}
#outer_container .thumbScroller{position:relative; overflow:hidden; background:url(fs_img_g_bg.png);}
#outer_container .thumbScroller,
#outer_container .thumbScroller .container,
#outer_container .thumbScroller .content{height:170px;}
#outer_container .thumbScroller .container{position:relative; left:0;}
#outer_container .thumbScroller .content{float:left;}
#outer_container .thumbScroller .content div{margin:5px; height:100%;}
#outer_container .thumbScroller img{border:2px solid #000;}
#outer_container .thumbScroller .content div a{display:block; padding:5px;}

.nextImageBtn, .prevImageBtn{display:block; position:absolute; width:50px; height:50px; top:50%; margin:-25px 10px 0 10px; z-index:3; filter:alpha(opacity=40); -moz-opacity:0.4; -khtml-opacity:0.4; opacity:0.4;}
.nextImageBtn:hover,.prevImageBtn:hover{filter:alpha(opacity=80); -moz-opacity:0.8; -khtml-opacity:0.8; opacity:0.8;}
.nextImageBtn{right:0; background:#000 url(nextImgBtn.png) center center no-repeat;}
.prevImageBtn{background:#000 url(prevImgBtn.png) center center no-repeat;}
-->
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript" src="jquery.easing.1.3.js"></script>

</head>
<body>

<div id="bg"><a href="#" class="nextImageBtn" title="next"></a><a href="#" class="prevImageBtn" title="previous"></a><img src="images/ConceptBackground.jpg" width="1680" height="1050" alt="Bloom" title="" id="bgimg" /></div>
<div id="preloader"><img src="ajax-loader_dark.gif" width="32" height="32" /></div>
<div id="img_title"></div>
<div id="toolbar"><a href="#" title="Maximize" onClick="ImageViewMode('full');return false"><img src="toolbar_fs_icon.png" width="50" height="50"  /></a></div>
<div id="concept">
<h2><center>Present Tense<br />2006</center></h2>
<p>With this mural, I really began to understand the impact public art could have on a community.  This was my second mural for The Sprout Fund and it posed many challenges.  There were both challenges with the surface of the wall and challenges with the community.  It was completely exhausting at times but this experience is what has made me passionate about creating public art.  I had no idea that a piece of public art meant to depict a community could ignite such strong emotional reactions from its residents and bring about change.</p> 

<p>I was selected among a pool of artists to paint a mural at the center of the community on the corner of Bessemer Avenue and Main Street in East Pittsburgh.  The community has a history of working class families with the old Westinghouse plant seated in the valley underneath the George Westinghouse Memorial Bridge.  If you are familiar with Pittsburgh, you might know that the George Westinghouse Memorial Bridge connects East Pittsburgh and North Versailles along Route 30.</p>

<p>Prior to being selected, I walked the streets of East Pittsburgh, photographing subjects and interviewing the local residents for some insight into the neighborhood to complete a preliminary design.  The homes were mostly older, and it seemed like a small, friendly city community with an appreciation for its industrial past.  The design notes from the first community meeting placed an importance on having some aspect of industry and the bridge in the preliminary design.  I took pictures of the local community children that would play in the street.  One local resident noted that novelist Joseph Wambaugh (The Onion Field, The Choirboys) spent his early years in East Pittsburgh prior to moving to California.  I thought that it might be interesting to get him involved and have him write something inspiring about his childhood neighborhood.  The idea of using text as a graphic element somewhere in the mural also appealed to me. With my research and first preliminary design completed I presented my concept in to the community board.</p>

<p>The four children were photographed in the neighborhood and stare at the viewer behind one of the bridge pylons.  I wanted to show that there was a new and young future behind the neighborhoods past of industry.  Joseph Wambaughs quote would be added at the top to give the design a distinct multimedia element.  In front of the pylon there is a couple, painted life size, looking at the young faces of their neighborhoods future.  Other subtle elements were to appear carved into the stone to the right of the couple (three lines for the rivers, shamrock for it’s once dominant irish ethnicity, etc.).</p>

<p>The community must have seen something that they liked.  I was chosen to paint the mural but several community board members did not like the presented design.  At first I thought it was the addition of the type.  No one had attempted to include typography in a Sprout Fund mural before and it gave the design a modern look.  The following meeting was a re-presentation of the original design followed by the first of the community and artist talks.  I was told that several of the board members were unhappy with the large heads and felt that the faces were too bold and wanted more of the bridge and neighborhoods past to have a more prominent role in the final design.  Several members also seemed to take offense to the two larger heads on the right side being African American.  They were offended that they were painted larger than the two caucasian children on the left.  It was not intended for any of the children to dominate the design, the children were merely photographed at different times, enabling me to paint some sooner than others.</p>

<p>I took notes from the first meeting and returned the next week with a new rough design.  This rough design featured a girl reading a book underneath the George Westinghouse Bridge while looking into its past industrial landscape.  For this design, the girl that I had photographed with the book was a neighbor of mine.  The community board really liked this design and wanted to continue with this direction.  A week later at the final community meeting I had reworked the final design with much better images but the original girl that I photographed was not available for the second time.  I took pictures of a different neighborhood girl for the finished design.</p>

<p>When presenting the final design at the last community meeting before starting the project, several community members noted that the girl in this design was now African American.  I explained that it should not matter what skin color the girl is, and that their community was ethnically diverse.  The model I happened to have readily available just happened to be African American for the final design.  It was clear that one gentleman in particular was not happy with the skin color of the girl.  After much disagreement and discussion, it was decided that the skin or the girl should be a mixed and non-discernable tone.  There were many debates and after reluctant final approval, I began the process of transferring the design to the wall.</p>

<p>The wall was 100 wide by 22 feet high with the majority of the surface being a rough sand stone and the remaining surface a glossy coated brick.  Painting on two very different surfaces was extremely challenging and involved different treatment and preparation in order to make the design contiguous.  The whole wall soaked up 27 gallons of primer.  There were also electrical wires that had to be insulated in order to get close enough to parts of the wall to paint them, as well as a plethora of bees nests in the gutters that had to be exterminated.</p> 

<p>Even though the wall itself posed many challenges for an artist, it was witnessing the display of closed mindedness of some of the community members that posed to be the biggest obstacle.  I painted one Saturday during the East Pittsburgh community day.  Families showed up in the parking lot and community play area across the street to picnic, play music, and engage in activities.  I noticed that none of the African American children or parents attended.  The following week there was a similar event that I was not made aware of.  People gathered in the parking lot to again picnic and play music.</p>

<p>I was confused and thought maybe this was something that the community did every weekend in the summer.  I approached a local woman later that evening telling her that I thought the community day was held last weekend.  She replied saying that this was different and that they have their own day, meaning the African Americans in the community.  I didn’t know that segregated community days still existed.  I thought I had stepped back in time fifty years and couldn’t help but think what this was teaching the children of the neighborhood.</p>

<p>I would continued to receive comments by one man who would pass through the neighborhood in his truck displaying a confederate flag always telling me that I was painting “one ugly picture.”  I climbed down the scaffolding after this happened the second time and proceeded to chase his truck with no luck.  I’ve never known the identity of that man.  It was infuriating and sad.  I just wanted to finish the mural and move on.  It was extremely frustrating to bond with all of the neighborhood children but be repulsed by the adult behavior.  They were ignoring part of their neighborhood community.  I started to slightly alter the final design as I was painting it.  I rendered the images tied to the past with dull grey color while using saturated colors for the foreground images of the girl and flowers.  I wanted to subtly give a message that people are what build and make a community, not its objects and relics from the distant past.  They were honoring so much of the past while ignoring the things that were vibrant and in need of nurture in front of them.</p>

<p>The community had the dedication for the mural and a few weeks later I was taking pictures of the finished product when a car pulled into the lot across the street a few spaces away from where I was parked.  I finished taking the pictures and walked to my car.  I noticed that it was the board member who had given me all of the trouble in the world over the girls skin tone.  He was sitting there in his car looking at the mural.  I was dreading what he had to say now that it was finished.  I walked over to say hello.  He was sitting there with tears in his eyes.  He thanked me and apologized for his words and actions and shook my hand, telling me that he was moved by the final mural and thought it was beautiful.  I thanked him and I got into my car, leaving him and the neighborhood behind, feeling a sense of accomplishment.</p>

</div>
<div id="thumbnails_wrapper">
<div id="outer_container">
<div class="thumbScroller">
<div class="container">
    <div class="content">
        <div><a href="images/ConceptBackground.jpg"><img src="images/ConceptBackground_Thumb.jpg" title="PreliminaryDesign 1" alt="PreliminaryDesign 1" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PreliminaryDesign.jpg"><img src="images/PreliminaryDesign_Thumb.jpg" title="PreliminaryDesign 1" alt="PreliminaryDesign 1" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense1.jpg"><img src="images/PresentTense1_Thumb.jpg" title="Present Tense 1" alt="Present Tense 1" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense2.jpg"><img src="images/PresentTense2_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense3.jpg"><img src="images/PresentTense3_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense4.jpg"><img src="images/PresentTense4_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense5.jpg"><img src="images/PresentTense5_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense1.jpg"><img src="images/PresentTense1_Thumb.jpg" title="Present Tense 1" alt="Present Tense 1" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense2.jpg"><img src="images/PresentTense2_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense3.jpg"><img src="images/PresentTense3_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense4.jpg"><img src="images/PresentTense4_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb" /></a></div>
    </div>
    <div class="content">
        <div><a href="images/PresentTense5.jpg"><img     src="images/PresentTense5_Thumb.jpg" title="Present Tense" alt="Present Tense" class="thumb"     /></a></div>
    </div>
</div>
</div>
</div>
</div>
<script>
//config
//set default images view mode
$defaultViewMode="full"; //full, normal, original
$tsMargin=30; //first and last thumbnail margin (for better cursor interaction) 
$scrollEasing=600; //scroll easing amount (0 for no easing) 
$scrollEasingType="easeOutCirc"; //scroll easing type 
$thumbnailsContainerOpacity=0.8; //thumbnails area default opacity
$thumbnailsContainerMouseOutOpacity=0; //thumbnails area opacity on mouse out
$thumbnailsOpacity=0.6; //thumbnails default opacity
$nextPrevBtnsInitState="show"; //next/previous image buttons initial state ("hide" or "show")
$keyboardNavigation="on"; //enable/disable keyboard navigation ("on" or "off")

//cache vars
$thumbnails_wrapper=$("#thumbnails_wrapper");
$outer_container=$("#outer_container");
$thumbScroller=$(".thumbScroller");
$thumbScroller_container=$(".thumbScroller .container");
$thumbScroller_content=$(".thumbScroller .content");
$thumbScroller_thumb=$(".thumbScroller .thumb");
$preloader=$("#preloader");
$toolbar=$("#toolbar");
$toolbar_a=$("#toolbar a");
$bgimg=$("#bgimg");
$img_title=$("#img_title");
$nextImageBtn=$(".nextImageBtn");
$prevImageBtn=$(".prevImageBtn");

$(window).load(function() {
$toolbar.data("imageViewMode",$defaultViewMode); //default view mode
if($defaultViewMode=="full"){
    $toolbar_a.html("<img src='toolbar_n_icon.png' width='50' height='50'  />").attr("onClick", "ImageViewMode('normal');return false").attr("title", "Restore");
} else {
    $toolbar_a.html("<img src='toolbar_fs_icon.png' width='50' height='50'  />").attr("onClick", "ImageViewMode('full');return false").attr("title", "Maximize");
}
ShowHideNextPrev($nextPrevBtnsInitState);
//thumbnail scroller
$thumbScroller_container.css("marginLeft",$tsMargin+"px"); //add margin
sliderLeft=$thumbScroller_container.position().left;
sliderWidth=$outer_container.width();
$thumbScroller.css("width",sliderWidth);
var totalContent=0;
fadeSpeed=200;

var $the_outer_container=document.getElementById("outer_container");
var $placement=findPos($the_outer_container);

$thumbScroller_content.each(function () {
    var $this=$(this);
    totalContent+=$this.innerWidth();
    $thumbScroller_container.css("width",totalContent);
    $this.children().children().children(".thumb").fadeTo(fadeSpeed,         $thumbnailsOpacity);
});

$thumbScroller.mousemove(function(e){
    if($thumbScroller_container.width()>sliderWidth){
        var mouseCoords=(e.pageX - $placement[1]);
        var mousePercentX=mouseCoords/sliderWidth;
        var destX=-((((totalContent+($tsMargin*2))-(sliderWidth))-sliderWidth)*(mousePercentX));
        var thePosA=mouseCoords-destX;
        var thePosB=destX-mouseCoords;
        if(mouseCoords>destX){
            $thumbScroller_container.stop().animate({left: -thePosA},     $scrollEasing,$scrollEasingType); //with easing
        } else if(mouseCoords<destX){
            $thumbScroller_container.stop().animate({left: thePosB},     $scrollEasing,$scrollEasingType); //with easing
        } else {
            $thumbScroller_container.stop();  
        }
    }
});

$thumbnails_wrapper.fadeTo(fadeSpeed, $thumbnailsContainerOpacity);
$thumbnails_wrapper.hover(
    function(){ //mouse over
        var $this=$(this);
        $this.stop().fadeTo("slow", 1);
    },
    function(){ //mouse out
        var $this=$(this);
        $this.stop().fadeTo("slow", $thumbnailsContainerMouseOutOpacity);
    }
);

$thumbScroller_thumb.hover(
    function(){ //mouse over
        var $this=$(this);
        $this.stop().fadeTo(fadeSpeed, 1);
    },
    function(){ //mouse out
        var $this=$(this);
        $this.stop().fadeTo(fadeSpeed, $thumbnailsOpacity);
    }
);

//on window resize scale image and reset thumbnail scroller
$(window).resize(function() {
    FullScreenBackground("#bgimg",$bgimg.data("newImageW"),$bgimg.data("newImageH"));
    $thumbScroller_container.stop().animate({left: sliderLeft}, 400,"easeOutCirc"); 
    var newWidth=$outer_container.width();
    $thumbScroller.css("width",newWidth);
    sliderWidth=newWidth;
    $placement=findPos($the_outer_container);
});

//load 1st image
var the1stImg = new Image();
the1stImg.onload = CreateDelegate(the1stImg, theNewImg_onload);
the1stImg.src = $bgimg.attr("src");
$outer_container.data("nextImage",$(".content").first().next().find("a").attr("href"))    ;
$outer_container.data("prevImage",$(".content").last().find("a").attr("href"));
});

function BackgroundLoad($this,imageWidth,imageHeight,imgSrc){
$this.fadeOut("fast",function(){
    $this.attr("src", "").attr("src", imgSrc); //change image source
    FullScreenBackground($this,imageWidth,imageHeight); //scale background image
    $preloader.fadeOut("fast",function(){$this.fadeIn("slow");});
    var imageTitle=$img_title.data("imageTitle");
    if(imageTitle){
        $this.attr("alt", imageTitle).attr("title", imageTitle);
        $img_title.fadeOut("fast",function(){
            $img_title.html(imageTitle).fadeIn();
        });
    } else {
        $img_title.fadeOut("fast",function(){
            $img_title.html($this.attr("title")).fadeIn();
        });
    }
});
}

//mouseover toolbar
if($toolbar.css("display")!="none"){
$toolbar.fadeTo("fast", 0.4);
}
$toolbar.hover(
function(){ //mouse over
    var $this=$(this);
    $this.stop().fadeTo("fast", 1);
},
function(){ //mouse out
    var $this=$(this);
    $this.stop().fadeTo("fast", 0.4);
}
);

//Clicking on thumbnail changes the background image
$("#outer_container a").click(function(event){
event.preventDefault();
var $this=$(this);
GetNextPrevImages($this);
GetImageTitle($this);
SwitchImage(this);
ShowHideNextPrev("show");
}); 

//next/prev images buttons
$nextImageBtn.click(function(event){
event.preventDefault();
SwitchImage($outer_container.data("nextImage"));
var $this=$("#outer_container a[href='"+$outer_container.data("nextImage")+"']");
GetNextPrevImages($this);
GetImageTitle($this);
});

$prevImageBtn.click(function(event){
event.preventDefault();
SwitchImage($outer_container.data("prevImage"));
var $this=$("#outer_container a[href='"+$outer_container.data("prevImage")+"']");
GetNextPrevImages($this);
GetImageTitle($this);
});

//next/prev images keyboard arrows
if($keyboardNavigation=="on"){
$(document).keydown(function(ev) {
if(ev.keyCode == 39) { //right arrow
    SwitchImage($outer_container.data("nextImage"));
    var $this=$("#outer_container a[href='"+$outer_container.data("nextImage")+"']");
    GetNextPrevImages($this);
    GetImageTitle($this);
    return false; // don't execute the default action (scrolling or whatever)
} else if(ev.keyCode == 37) { //left arrow
    SwitchImage($outer_container.data("prevImage"));
    var $this=$("#outer_container a[href='"+$outer_container.data("prevImage")+"']");
    GetNextPrevImages($this);
    GetImageTitle($this);
    return false; // don't execute the default action (scrolling or whatever)
}
});
}

function ShowHideNextPrev(state){
if(state=="hide"){
    $nextImageBtn.fadeOut();
    $prevImageBtn.fadeOut();
} else {
    $nextImageBtn.fadeIn();
    $prevImageBtn.fadeIn();
}
}

//get image title
function GetImageTitle(elem){
var title_attr=elem.children("img").attr("title"); //get image title attribute
$img_title.data("imageTitle", title_attr); //store image title
}

//get next/prev images
function GetNextPrevImages(curr){
var nextImage=curr.parents(".content").next().find("a").attr("href");
if(nextImage==null){ //if last image, next is first
    var nextImage=$(".content").first().find("a").attr("href");
}
$outer_container.data("nextImage",nextImage);
var prevImage=curr.parents(".content").prev().find("a").attr("href");
if(prevImage==null){ //if first image, previous is last
    var prevImage=$(".content").last().find("a").attr("href");
}
$outer_container.data("prevImage",prevImage);
}

//switch image
function SwitchImage(img){
$preloader.fadeIn("fast"); //show preloader
var theNewImg = new Image();
theNewImg.onload = CreateDelegate(theNewImg, theNewImg_onload);
theNewImg.src = img;
}

//get new image dimensions
function CreateDelegate(contextObject, delegateMethod){
return function(){
    return delegateMethod.apply(contextObject, arguments);
}
}

//new image on load
function theNewImg_onload(){
$bgimg.data("newImageW",this.width).data("newImageH",this.height);
BackgroundLoad($bgimg,this.width,this.height,this.src);
}

//Image scale function
function FullScreenBackground(theItem,imageWidth,imageHeight){
var winWidth=$(window).width();
var winHeight=$(window).height();
if($toolbar.data("imageViewMode")!="original"){ //scale
    var picHeight = imageHeight / imageWidth;
    var picWidth = imageWidth / imageHeight;
    if($toolbar.data("imageViewMode")=="full"){ //fullscreen size image mode
        if ((winHeight / winWidth) < picHeight) {
            $(theItem).attr("width",winWidth);
            $(theItem).attr("height",picHeight*winWidth);
        } else {
            $(theItem).attr("height",winHeight);
            $(theItem).attr("width",picWidth*winHeight);
        };
    } else { //normal size image mode
        if ((winHeight / winWidth) > picHeight) {
            $(theItem).attr("width",winWidth);
            $(theItem).attr("height",picHeight*winWidth);
        } else {
            $(theItem).attr("height",winHeight);
            $(theItem).attr("width",picWidth*winHeight);
        };
    }
    $(theItem).css("margin-left",(winWidth-$(theItem).width())/2);
    $(theItem).css("margin-top",(winHeight-$(theItem).height())/2);
} else { //no scale
    $(theItem).attr("width",imageWidth);
    $(theItem).attr("height",imageHeight);
    $(theItem).css("margin-left",(winWidth-imageWidth)/2);
    $(theItem).css("margin-top",(winHeight-imageHeight)/2);
}
}

//Image view mode function - fullscreen or normal size
function ImageViewMode(theMode){
$toolbar.data("imageViewMode", theMode);
FullScreenBackground($bgimg,$bgimg.data("newImageW"),$bgimg.data("newImageH"));
if(theMode=="full"){
    $toolbar_a.html("<img src='toolbar_n_icon.png' width='50' height='50'  />").attr("onClick", "ImageViewMode('normal');return false").attr("title", "Restore");
} else {
    $toolbar_a.html("<img src='toolbar_fs_icon.png' width='50' height='50'  />").attr("onClick", "ImageViewMode('full');return false").attr("title", "Maximize");
}
}

//function to find element Position
function findPos(obj) {
    var curleft = curtop = 0;
    if (obj.offsetParent) {
        curleft = obj.offsetLeft
        curtop = obj.offsetTop
        while (obj = obj.offsetParent) {
            curleft += obj.offsetLeft
            curtop += obj.offsetTop
        }
    }
    return [curtop, curleft];
}
</script>
</body>
</html> 
```

任何帮助将不胜感激。

谢谢，

格里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:56:57.767

```
<script type="text/javascript">
$("#divId").hide();
$("#divId").show();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:59:38.697

我建议为此使用 jQuery，因为我假设你想要一些动态的东西。您需要包含 jQuery 库。你可以在这里得到它们：http: [//jquery.com/download/](http://jquery.com/download/)

Chazt3n 的答案显示了如何使用 hide 和 show 方法，但是您也可以添加属性“slow”以使其动画淡入。像这样：

```
$("#divId").show('slow');
$("#divId").hide('slow'); 
```

祝你好运！

- - - - - - - 编辑 - - - - - - - - - - - - - - - - - - ------------------

您可以将单击处理程序添加到图像链接，以便在单击概念图像时调用隐藏函数。

在头部做一个看起来像的函数

```
<head>
...
<script language='javascript'>
function hideConcept()
{
     $('#concept').hide('slow');
}
function showConcept()
{
     $('#concept').show('slow');
}
</script>
</head> 
```

然后，在您的链接中，您可以调用该函数。

```
<a href='...' onclick='showConcept()'>...</a> // for your concept link
<a href='...' onclick='hideConcept()'>...</a> // for all other links 
```

# sql-server-2008 - 从sql server中的表中获取随机数据？

> ID：13073459
> 
> 赞同：0
> 
> 时间：2012-10-25T16:53:02.643
> 
> 标签：sql-server-2008

```
SELECT TOP 10 * 
FROM Questions TABLESAMPLE (100 ROWS) 
order by NEWID() 
```

它每次返回相同的 10 条记录，但它们的顺序不同。如何每次获得一组不同的 10 个随机值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:57:22.600

如果您只想要 10 个随机行，这将适合您：

```
SELECT TOP 10 *
FROM Questions
ORDER BY NEWID() 
```

你不需要`TABLESAMPLE (100 ROWS)`这里

* * *

为了将结果保存到您的评论所指示的另一个表中，如果存在第二个表，您将能够轻松地执行此操作。那么你也能：

```
INSERT INTO RandomQuestions(col1, col2, col3, ...)
SELECT TOP (10) q.col1, q.col2, q.col3, ...
FROM Questions AS q
ORDER BY NEWID() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:01:21.490

我相信您正在寻找订购随机记录。您可以使用派生表来执行此操作（我在下面为子查询起别名）：

```
select *
from (
    -- Derived table to get 10 random rows
    select top 10 * 
    from Questions
    order by newid() -- Here we are randomizing the entire table.
) as a
order by a.QuestionID -- Here is where you can order your 10 random records. 
```

[根据文档](http://msdn.microsoft.com/en-us/library/ms189108.aspx)`tablesample`，如果您确实需要随机记录，请不要使用：

> 如果您真的想要单个行的随机样本，请修改您的查询以随机过滤掉行，而不是使用 TABLESAMPLE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:56:13.317

```
SELECT TOP ### FROM Questions TABLESAMPLE order by NEWID() 
```

用你想要的行数替换###。这是基于OP的想法。

# android - 在 android 设备关闭和打开不工作的情况下广播接收器

> ID：13073461
> 
> 赞同：1
> 
> 时间：2012-10-25T16:53:05.697
> 
> 标签：android, broadcastreceiver

当设备关闭并再次打开时，我正在使用广播接收器执行一些操作，但它们不工作。这些是清单文件中的接收器：

```
 <receiver android:name=".ShutdownReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.ACTION_SHUTDOWN" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.QUICKBOOT_POWEROFF" />
            </intent-filter>
        </receiver>
        <receiver android:name=".RestartReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

这些是相应的类：

```
public class ShutdownReceiver extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Log.d("In","Switched Off");
    }
}

public class RestartReceiver extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        SecureMessagesActivity.ToDoOnMobileSwitchOn();
        Log.d("In","Switched On");
    }
} 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:04:41.430

请务必`RECEIVE_BOOT_COMPLETED`在清单中请求许可：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

# android - ViewPager 中的 onTouchListener

> ID：13073465
> 
> 赞同：2
> 
> 时间：2012-10-25T16:53:17.160
> 
> 标签：android, android-viewpager, android-imageview

我有一个`ImageView`with`onTouchListener`里面的`ViewPager`. 当然，当我尝试更改' 页面时， `ImageView`' 监听器会触发。`ViewPager`有没有办法防止它。我想我需要以某种方式从滑动中识别触摸。

这是我的代码的摘录：

```
public class ServerDetailFragment extends Fragment implements SimpleGestureListener {
GestureDetector detector;
SimpleOnGestureListener gestures = new SimpleOnGestureListener() {
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        Log.e("TAG", "onFling");
        return true;
    };
};
....

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    detector = new GestureDetector(ServerDetailFragment.this.getActivity(), gestures);

}

....

 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    rootView = inflater.inflate(R.layout.fragment_server_detail, container, false);
    MyPagerAdapter adapter = new MyPagerAdapter();
    myPager = (ViewPager) rootView.findViewById(R.id.detail_pager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);
    myPager.setOffscreenPageLimit(4);

    ViewTreeObserver vto = myPager.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            pagerGraph = (ImageView) myPager.findViewWithTag(myPager.getCurrentItem()).findViewById(R.id.pagerView);
            pagerPb = (ProgressBar) myPager.findViewWithTag(myPager.getCurrentItem()).findViewById(R.id.pagerPb);
            if (init) {

                plotFakeData();

                // Following problematic part is also in ViewPager's onPageChangeListener

                        pagerGraph.setOnTouchListener(new OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        if (detector.onTouchEvent(event)) {

                            // some more code here

                        }
                        return false;
                    }

                });

                // myPager.setCurrentItem(0);
            }
            init = false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T14:12:50.330

我会用这样的东西：

```
public class OnSwipeTouchListener implements OnTouchListener {

private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

public boolean onTouch(final View v, final MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
}

private final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        onTouch(e);
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                    } else {
                    }
                }
            } else {
               // onTouch(e);
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }
}
public void onTouch(MotionEvent e) {
}
} 
```

并这样称呼他们：

```
pagerGraph.setOnTouchListener(new OnSwipeTouchListener() {          
public void onTouch(MotionEvent event) {
    // your code here
}); 
```

# django - Django 深度序列化 - 遵循反向外键约束

> ID：13073470
> 
> 赞同：4
> 
> 时间：2012-10-25T16:53:39.660
> 
> 标签：django, json, django-serializer

我有两个具有外键关系的模型：

```
class Company(models.Model):
    field 1
    field 2

class Employee(models.Model):
    company = Model.ForeignKey('Company')
    field 3
    field 4 
```

我想 JSON 序列化一个公司实例，并包括与其有外键关系的所有员工。IE，我想创建类似于以下内容的 JSON，因为它包括公司的所有字段和所有相关员工的所有字段。

```
[
{
    "pk": 2,
    "model": "app.company",
    "fields": {
        "field1": "value",
        "field2": "value",
        "employee": [
            {
                "pk": 19,
                "model": "app.employee",
                "fields": {
                    "field3": "value",
                    "field4": "value",
                }
            },
            {
                "pk": 25,
                "model": "app.employee",
                "fields": {
                    "field3": "value",
                    "field4": "value",
                }
            }
        ]
    }
}
] 
```

Django 序列化程序不序列化关系。这里的其他问题询问了如何深度序列化，但方向相反 - IE，序列化员工及其相关公司。这些问题的答案已经指出，wadofstuff django-full-serializer 插件允许您进行这种深度序列化。问题是 wadofstuff 插件仅单向遵循这些关系——它不会遵循反向外键约束。所以，我想在这里推出我自己的。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:20:38.467

所以，这是一种*超级*预算的方法，它适用于我的目的，但我觉得必须有更好的方法（包括在这里，以防其他人正在寻找如何做到这一点）。它只对我有用，因为我一次只发送一个 Company 对象，因此它没有明确保留关系层次结构这一事实并不是什么大问题。

给定“公司”的公司实例：

```
companyJSON = serializers.serialize('json', [company, ])
employeeJSON = serializers.serialize('json', company.employee_set.all())
fullJSON = companyJSON[:-1] + ", " + employeeJSON[1:] 
```

# android - 在片段中使用 Mediaplayer

> ID：13073471
> 
> 赞同：6
> 
> 时间：2012-10-25T16:53:39.093
> 
> 标签：android, android-fragments

我仍在尝试了解片段以及它们是如何工作的。我有一个扩展布局的片段。我试图在按下按钮时播放声音，但我遇到了媒体播放器的一些问题。

代码是：

```
private void playSound(int resId) {
    MediaPlayer mp = MediaPlayer.create(Tab1Fragment.this, resId);
    mp.setOnCompletionListener(Tab1Fragment.this);
    mp.start();
} 
```

错误是：`The method create(Context, int) in the type MediaPlayer is not applicable for the arguments (Tab1Fragment, int)`

我尝试使用`getApplicationContext()`无济于事。

感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-20T10:08:54.243

在片段类的 onCreateView 方法中使用此代码，它将正常工作。

```
mp = MediaPlayer.create(getActivity, R.raw.songname); 
```

现在您可以在按钮单击侦听器上调用它的 start 方法。确保`MediaPlayer mp;`为片段类创建全局，以便以后可以使用它。

# .net - 将 ASP.NET MVC 4 项目从 .NET 4.5 转换为 .NET 4

> ID：13073475
> 
> 赞同：2
> 
> 时间：2012-10-25T16:53:47.080
> 
> 标签：.net, asp.net-mvc-4

客户要求我将使用 .NET 4.5 在 MVC 4 中构建的应用程序转换为 .NET 4。这可能吗？步骤是什么？我在 Windows 8 上使用 VS 2012。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:59:00.417

右键单击您的项目->选择属性（alt+enter），应该会弹出设置窗口。左侧的第一个选项卡是“应用程序”选择它。寻找标签“目标框架”。选择您想要的任何目标。由于引用或函数不再存在，您可能会遇到编译错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:54:55.977

您应该能够在项目属性中简单地定位 .NET 4 Framework。如果您使用特定于 4.5 的任何内容（或找到解决方法），您可能必须重构代码。

# c# - C# 和 Office 集成

> ID：13073482
> 
> 赞同：3
> 
> 时间：2012-10-25T16:54:07.190
> 
> 标签：c#, ms-office

我需要关于走哪条路的建议。

我正在开发一个 C# 应用程序，我想与 Office 套件进行一些集成。

该解决方案将用于法学院最后学期的学生/教师，为低收入家庭（我们的客户）服务。

我们部门和客户之间几乎所有的互动都是由我们的实习生——法学院的学生完成的。

## 目前如何运作

1.  我们的接待员将客户的基本数据添加到系统中并安排访问。
2.  在访问之前，我们的实习生会查询内部系统以查看客户数据。数据可能包括以前访问的记录。
3.  学生会见客户，试图收集解决客户需求所需的所有信息。
4.  然后，实习生必须将与客户的互动报告给主管——老师。为此，实习生打开 Word 并输入一些基本信息（如其名称和老师）以及有关交互的信息。
5.  实习生打印报告并拿给老师批准。
6.  在这里，老师做笔记/评估打印的报告，可能会发生三件事：
    6.1 - 报告是正确的并且包含所有需要的信息：老师批准它；
    6.2 - 报告有些不正确：老师告诉学生要改变什么，下一个版本被默许；
    6.3 - 报告不正确：老师告诉学生需要改变什么，下一个版本需要明确批准。他进行了更改并返回到第 5 步。
7.  报告获得批准后，实习生从 Office 文档中复制文本并将其粘贴/添加到我们的内部访问系统。
8.  教师物理存储所有报告的版本。这些报告用于以后评估学生。

## 问题

有时，在报告获得批准后，学生不会将批准的报告添加到我们的内部系统中。与客户端的所有交互基本上都丢失了。

另一个是极端使用纸张。每个报告都被打印出来。通常超过两次。

## 我提出的解决方案

我们在内部使用 Office 2010。

在我们的内部系统中，当查看客户的历史记录时，有一个按钮可以启动 Word，并与内部应用程序并排。

此 Word 将删除“保存/另存为”按钮。以及许多用户不需要的控件。

这个 Word 实例将有一个自定义的“保存”按钮，用于将报告保存在特定的网络区域并将其发送回我们的系统，从而关闭该 Word 实例。

该报告将在“未批准的报告队列”中显示给教师。然后老师打开报告并分析它。同样，应该显示一个自定义 Word 实例，并启用 Word 的修订控制。教师将进行更改并将其保存回我们的系统，并具有以下三种状态之一（已批准；自动批准下一个版本；重新评估下一个版本）。

或者，教师可以在那里评估报告。我想像一个自定义功能区，他将在其中输入适当的值（例如注意细节、正确拼写、正确转发等）。评估和版本都将被发送回系统，学生会看到。

再一次，学生将在他的系统部分看到报告已被评估，并且可以看到教师的笔记、更正和评估，以便准备他的下一个版本。

## 射死我

好吧……我是不是飞得太高了？或者可行吗？你能告诉我你会走哪条路吗？

你以为这很简单吗？还是硬？你们认为这需要几个小时？

我需要免费的解决方案。我没有 VS Professional，也没有使用付费框架/工具的许可。

我正在考虑使用 NetOffice ( [http://netoffice.codeplex.com/](http://netoffice.codeplex.com/) ) 来做到这一点。还是您认为使用 VBA 会更容易？

我提出的问题太多了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:04:54.003

通常，在使用 C# 处理 Office 时，您有 2 个选项：

1.  如果 Office 文件来自 Office 2007 和更早版本，您可以使用 Microsoft 提供的免费[OpenXML 库](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)直接在 C# 中读取和操作“docx” 。但仅当您确信可以完全在 C# 中创建解决方案时才使用它，因为它实际上不会打开 Word 窗口。
2.  您还可以使用[Microsoft.Office.Interop.Word](http://msdn.microsoft.com/en-us/library/dd264733.aspx)从 C# 自动化 Word 。使用 InterOp，您可以操作 Word 本身支持的任何文件。我相信您也可以使用 InterOp 操作 Word 本身（发送保存命令等）。

我强烈建议使用 OpenXML，因为 InterOp 的使用和调试有点麻烦。

# javascript - 测试 CSS :hover with Jasmine

> ID：13073484
> 
> 赞同：8
> 
> 时间：2012-10-25T16:54:12.753
> 
> 标签：javascript, jquery, jasmine

所以我有一个简单的 div，当悬停时会改变它的背景，如我的 css 中定义的那样：

```
.my-class{
    background-color:#FFFFFF;
}
.my-class:hover{
    background-color:#F2F2F2;
} 
```

我试图用茉莉花测试这种行为，但测试一直失败：

```
it "Shadows .soboo-drop-item when hover", ->
      $('.my-class:first').trigger('mouseover')
      expect($('.my-class:first').css('background-color')).toBe("#F2F2F2") 
```

> 预期 'rgba(0, 0, 0, 0)' 为 '#F2F2F2'

在控制台上运行`$('.my-class:first').trigger('mouseover')`似乎不起作用 - 背景颜色不会改变。

注意：悬停 JQuery 行为确实响应`$('#something').trigger('mouseover')`

我正在使用[Jasminerice](https://github.com/bradphelan/jasminerice)，其中包括[Jasmine-JQuery](https://github.com/velesin/jasmine-jquery)

Jasmine-JQuery 有一个测试css的方法：

```
expect($('.my-class:first')).toHaveCss({"background-color": "#F2F2F2"}) 
```

这给了我：

```
Expected '<div class="soboo-service my-class"
service="google"><img
src="http://localhost:3000/img/bookmark-services/google.gif"> Google
Book...</div>' to have css { background-color : '#F2F2F2' } 
```

如何检查这个背景？提前感谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T16:17:20.903

我做了以下事情：

```
overed = $($('.my-class:first').trigger('mouseover').html())
expect(overed).toHaveCss({"background-color": "#F2F2F2"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T15:22:26.697

试试这个：expect($('.my-class:first')).toHaveCss("background-color","#F2F2F2");

# jquery - .delegate 和 .closest 的问题

> ID：13073485
> 
> 赞同：2
> 
> 时间：2012-10-25T16:54:18.050
> 
> 标签：jquery, jquery-delegate

```
$('document').delegate('.seeMore a', "click", function() {
    var $allTabs = $(this).closest('.globalTabs').find('.allTabs');
    $allTabs.slideDown('slow'); 
}); 
```

DOM 元素是：

```
<div class="globalTabs">
    <ul>
        <li>
            <a>some link</a>
        </li>
        <li>
            <a>some link</a>
        </li>
        <li class="seeMore">
            <a>some link</a>
        </li>
    </ul>
    <div class="tabContent">
        some content
    </div>
    <div class="allTabs">
        mutliple links
    </div>
</div> 
```

上面的函数在一个`.each`- 所以每个`.globalTabs`这个函数都应该运行。

但它似乎根本找不到元素，即使页面上只有一个元素，`seeMore a`也没有任何事件与之相关（使用视觉事件来确定）。

想法？

（我应该提到 bind 有效，但 live 无效）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:55:50.637

[`document`](https://developer.mozilla.org/en-US/docs/DOM/document)在第一个选择器中不需要引号：

```
// v------v-------- 'document' should be an object, not a string
 $(document).delegate(".seeMore a", "click", function() { ... }); 
```

# java - 设置 SWT 表列的宽度

> ID：13073487
> 
> 赞同：1
> 
> 时间：2012-10-25T16:54:21.730
> 
> 标签：java, swt, tablecolumn

我将一列一列添加到我的 swt 表中。和

```
int totalwidth=0;
for(String s:phoneErrs){
    TableColumn tblclmnError = new TableColumn(tablephone, SWT.CENTER);
    tblclmnError.setText(s);
    tblclmnError.pack();
    totalwidth+=tblclmnError.getWidth();
} 
```

在此之后我想添加最后一列，它应该填充表头中的其余空间。现在我已经有了添加列的总宽度，我应该能够计算最后一列的宽度并指定它吗？但如何？我试过

```
TableColumn tblclmnComment = new TableColumn(tablephone, SWT.CENTER);
tblclmnComment.setWidth(tablephone.getSize().x-totalwidth);
tblclmnComment.setText("Comment"); 
```

但它不起作用。`getSize()`回报`0`。_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:27:03.443

`SWT.Resize`您可以通过在事件类型上添加侦听器来实现此目的。

```
 public static void main(String[] args) {
        final Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, true));

        TableViewer viewer1 = getViewer(shell);

        List<String> rows = new ArrayList<String>();
        rows.add("Row 1");
        rows.add("Row 2");

        viewer1.setInput(rows);

        shell.pack();
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    private static TableViewer getViewer(final Shell shell) {
        TableViewer viewer = new TableViewer(shell, SWT.FULL_SELECTION
                | SWT.H_SCROLL | SWT.V_SCROLL | SWT.NONE);

        viewer.getTable().addListener(SWT.Resize, new Listener() {

          @Override
          public void handleEvent(Event event) {

            Table table = (Table)event.widget;
            int columnCount = table.getColumnCount();
            if(columnCount == 0)
              return;
            Rectangle area = table.getClientArea();
            int totalAreaWdith = area.width;
            int lineWidth = table.getGridLineWidth();
            int totalGridLineWidth = (columnCount-1)*lineWidth; 
            int totalColumnWidth = 0;
            for(TableColumn column: table.getColumns())
            {
              totalColumnWidth = totalColumnWidth+column.getWidth();
            }
            int diff = totalAreaWdith-(totalColumnWidth+totalGridLineWidth);

            TableColumn lastCol = table.getColumns()[columnCount-1];

//check diff is valid or not. setting negetive width doesnt make sense.
            lastCol.setWidth(diff+lastCol.getWidth());

          }
        });

        viewer.setContentProvider(ArrayContentProvider.getInstance());

        viewer.getTable().setLayoutData(
                new GridData(SWT.FILL, SWT.FILL, true, true));

        TableViewerColumn col = new TableViewerColumn(viewer, SWT.NONE);
        col.getColumn().setWidth(100);
        col.getColumn().setText("Text Column");
        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public void update(ViewerCell cell) {
                cell.setText((String) cell.getElement());
            }
        });

        col = new TableViewerColumn(viewer, SWT.NONE);
        col.getColumn().setWidth(100);
        col.getColumn().setText("Second Text Column");
        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public void update(ViewerCell cell) {
                cell.setText((String) cell.getElement());
            }
        });

        viewer.getTable().setHeaderVisible(true);

        return viewer;
    } 
```

# c++ - C# COM dll 在 C++ 项目中有 REGDB_E_CLASSNOTREG 错误

> ID：13073488
> 
> 赞同：1
> 
> 时间：2012-10-25T16:54:25.970
> 
> 标签：c++, c#-4.0, com-interop

我有一个 C# dll，我已经正确注册了 COM Interop，并使 COM 可见。使用 cppbuilder，我导入了生成包装类的类型库，现在我尝试使用它来创建我的 C# 类的实例。但是，我的 C++ 代码中出现 REGDB_E_CLASSNOTREG 错误。我验证了 dll 在注册表中，甚至用 regasm 重新注册了它。没变。我会错过什么？

这是我的 C++ 代码：

```
_MyClassPtr obj;
HRESULT hr = obj.CreateInstance(__uuidof(MyClass));
//now hr equals REGDB_E_CLASSNOTREG 
```

我也这样尝试过：

```
IMyClass* obj;
HRESULT hr = CoCreateInstance(__uuidof(MyClass), NULL, CLSCTX_INPROC_SERVER, __uuidof(IMyClass), (void**) &obj);
//same result, hr equals REGDB_E_CLASSNOTREG 
```

我在 C# 应用程序中有一个额外的依赖项。我也为 COM 注册了它，没有区别，但没有将它的类型库导入 C++ 项目。

更新：根据下面的评论，我发现 CreateInstance 正在注册表中的以下位置查找类 guid：

```
HKCU\Software\Classes\Wow6432Node\CLSID\{guid} 
HKCR\Wow6432Node\CLSID\{guid}
HKCU\Software\Classes\CLSID\{guid}
HKCR\CLSID\{guid} 
```

但是，通过注册表，与我的程序集相关的任何 CLSID 节点下的唯一条目是程序集本身的 guid，当然，它不同于类或接口的 guid。

我已经在 x86 和 x64 模式下手动运行 regasm 以尝试获得不同的结果。没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:33:41.493

好吧，我发现了什么会起作用。

```
IMyClassPtr obj;
HRESULT hr = obj.CreateInstance(CLSID_MyClass); 
```

CLSID_MyCLass 是生成的 MyClass_TLB.cpp 文件中的一个 guid 常量。对类类型使用它而不是 __uuidof(...) 可以使一切开始正常工作。

# android - 错误日志文件？

> ID：13073492
> 
> 赞同：1
> 
> 时间：2012-10-25T16:54:38.183
> 
> 标签：android, aide-ide

我正在开发一个带有“Aide”的 Android 应用程序。Aide 是一个用于使用 android 设备开发 android 应用程序的应用程序。当我启动应用程序时，我已经创建了一个错误，例如“应用程序已不幸中止”。我该如何解决发生的错误？是否有一个我可以看到堆栈跟踪的日志文件？是否有可能每次发生错误时都会出现带有堆栈跟踪的对话框而不是消息“应用程序已中止”？感谢所有可以帮助我的人。

问候

阿恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:11:40.257

如果您想观察堆栈跟踪，您只需要一个 LogCat 阅读器，例如[CatLog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat&hl=en)。请注意，如果您的设备是更高版本的 Jelly Bean，您将需要 root 权限才能读取日志。

编辑：进一步的研究表明 AIDE 内置了一个 LogCat 阅读器。根权限问题仍然适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:06:20.647

我从未使用过 Aide，但概念是一样的。您需要能够通过 IDE 在手机上调试您的应用程序。作为 Eclipse 中的一个示例，我将通过 USB 连接我的手机，然后在 Eclipse 中它显示为 AVD 中的 Android 设备。然后我在手机上以调试模式运行我的应用程序，所有错误输出都将在 Logcat 中。否则，您将不得不将调试逻辑编码到您的应用程序中，以便它将自己的日志记录写入您手机上的 fs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:11:05.297

如果您安装了 Android SDK（我猜是这样），那么您可以使用该`adb`实用程序访问日志：

```
adb logcat 
```

这将在出现错误时向您显示堆栈跟踪，以及许多其他非常有用的信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-01T05:51:50.663

您有 3 个选项：

1.  升级到稳定的 Pro 版本以使用 AIDE 上的工作 LogCat

2.  使用apesa提到的USB调试

3.  使用以下函数登录到本地文件：

    public void appendLog(String text) // [https://stackoverflow.com/a/6209739/8800831](https://stackoverflow.com/a/6209739/8800831) {
    File logFile = new File("sdcard/log.file"); if (!logFile.exists()) { 尝试 { logFile.createNewFile(); } catch (IOException e) { // TODO 自动生成的 catch 块 e.printStackTrace(); } } try { //BufferedWriter 性能，true 设置附加到文件标志 BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true)); buf.append(文本); buf.newLine(); 缓冲区。冲洗（）；buf.close(); } catch (IOException e) { // TODO 自动生成的 catch 块 e.printStackTrace(); } }

像这样使用它：

```
try{
       // your code goes here
}catch (Exception e){
       appendLog(e);
} 
```

您需要在 Manifest 中添加 write_external_storage 的权限。

# ios6 - iOS模拟器启动时，是否可以自动加载Web Inspector？

> ID：13073496
> 
> 赞同：31
> 
> 时间：2012-10-25T16:54:43.697
> 
> 标签：ios6, ios-simulator, xcode4.5, web-inspector

我在 Safari 中使用带有闪亮的新 Web Inspector 的 iOS 6 模拟器。

问题：是否可以在加载 iOS 6 Web 应用程序时自动加载 Web Inspector？

我正在使用 PhoneGap/Cordova，并且在启动时加载了很多 javascript。我`console.log()`广泛用于调试，并希望它在应用程序启动后加载 Web Inspector。

目前，当我在 Xcode 上点击 Run 时，应用程序会加载并且我`setTimeout`在我的第一个功能上，因此我可以冲到 Safari 并在该页面上附加 Web Inspector。

我更愿意删除此步骤并添加一个可以直接加载 Web Inspector 的自动化步骤。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-23T14:37:07.807

这是部分解决方案。这将一键打开 Safari 的调试窗口，这要好得多，但不是自动的。

在你的 Mac 上打开`Script Editor`（Command + Space Bar 并在脚本编辑器中输入）

粘贴此代码：

```
-- `menu_click`, by Jacob Rus, September 2006
-- 
-- Accepts a list of form: `{"Finder", "View", "Arrange By", "Date"}`
-- Execute the specified menu item.  In this case, assuming the Finder 
-- is the active application, arranging the frontmost folder by date.

on menu_click(mList)
    local appName, topMenu, r

    -- Validate our input
    if mList's length < 3 then error "Menu list is not long enough"

    -- Set these variables for clarity and brevity later on
    set {appName, topMenu} to (items 1 through 2 of mList)
    set r to (items 3 through (mList's length) of mList)

    -- This overly-long line calls the menu_recurse function with
    -- two arguments: r, and a reference to the top-level menu
    tell application "System Events" to my menu_click_recurse(r, ((process appName)'s ¬
        (menu bar 1)'s (menu bar item topMenu)'s (menu topMenu)))
end menu_click

on menu_click_recurse(mList, parentObject)
    local f, r

    -- `f` = first item, `r` = rest of items
    set f to item 1 of mList
    if mList's length > 1 then set r to (items 2 through (mList's length) of mList)

    -- either actually click the menu item, or recurse again
    tell application "System Events"
        if mList's length is 1 then
            click parentObject's menu item f
        else
            my menu_click_recurse(r, (parentObject's (menu item f)'s (menu f)))
        end if
    end tell
end menu_click_recurse

menu_click({"Safari", "Develop", "IOS Simulator", "index.html"}) 
```

打开模拟器后，单击脚本上的运行（您可能需要第一次在设置中允许脚本编辑器）。

（可选）您可以将脚本保存为应用程序，这样您就不必打开脚本编辑器。

（这个答案是加拉丁先前答案的更详细版本）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T16:14:59.293

现在是 2014 年年中，据我所知，仍然没有优雅的解决方案，但我喜欢在`setTimeout`应用程序的初始化代码中添加短暂暂停的想法。如果`setTimeout`无法添加调用，您还可以`window.location.reload()`从 Safari 控制台发出命令以重新启动应用程序，从而获得全面调试的好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-23T14:21:46.380

1）在您的 OnDeviceReady 处理程序中添加调试器；

```
onDeviceReady: function() {
    debugger;
    // the rest of your device ready code
} 
```

2) 通过 xcode 或 cmdline 运行应用程序。

3) 通过 Safari->Develop->Simulator->Appname -> index file 附加调试器

4）打开safari的控制台视图，输入：

```
Window.location = ""; 
```

5) 应用程序将重新加载，调试器将附加到 onDeviceReady() 的第一行。

6) 正常调试。

# java - 带有 Eclipse 和可运行 Jar 的资源

> ID：13073497
> 
> 赞同：0
> 
> 时间：2012-10-25T16:54:45.250
> 
> 标签：java, eclipse, executable-jar, file-import

我有以下文件结构：

```
+-src
  +-- code
+-resources
  +-- img
    +- logo.png
  +-- defaultConfig
    +- config.xml 
```

当我在 Eclipse 中运行代码时，它工作了，因为导出到可运行的 jar，它没有找到`defaultConfig`文件

我正在以这种方式访问​​徽标并且它有效

```
URL url = getClass().getResource("/img/logo.png");
setIconImage(new ImageIcon(url).getImage()); 
```

访问`config.xml`不适用于不同的设置。

这是给的：

```
File config = new File("resources/defaultConfig/config.xml"); 
```

经过大量搜索后，我尝试了这个：

```
//example
String path = "resources\\defaultConfig\\config.xml");
File config = new File(createURIFromString(path)); 
```

我试过有`./`和`.\`没有`.`

```
private URI createURIFromString(String path) {
    URI id = null;
    try {
        id =    getClass().getResource(path).toURI();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return id;
} 
```

结果是一个`null`指针。

我试过了

*   将文件夹添加到资源目录
*   将文件夹添加到根目录（与 src 相同的层）
*   将 Config 文件夹添加到资源目录

**解决方案：**

以前文件不在 jar 中，所以在使用该`getResorce`方法之前，它可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:59:28.853

你为什么要创建一个`File`对象？您的数据嵌入到 jar 文件中；没有`File`可以构造的对象引用它（除非您在某处有自定义文件系统）。

您需要删除*需要*从文件中读取配置的任何内容，而是使其采用任何`InputStream`. 然后你可以使用

```
InputStream stream = Foo.class.getResourceAsStream("/defaultConfig/config.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T16:59:51.587

这应该可以帮助您 [读取 jar 包中的 xml 文件](https://stackoverflow.com/questions/2552793/reading-xml-file-inside-a-jar-package)

“您无法获取 File 对象（因为它在 .jar 中后不再是文件），但您应该能够通过 getResourceAsStream(path) 将其作为流获取”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:25:56.090

如果一切都打包好了，那么您应该以与`getResource`获取图像相同的方式获取资源，但路径可能不同。

```
URL url = getClass().getResource("/defaultConfig/config.xml"); 
```

然后你可以直接从这个 url 阅读。请参阅[直接从 URL 读取](https://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html)。

> ```
> BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
> 
> String inputLine;
> while ((inputLine = in.readLine()) != null)
>     System.out.println(inputLine);
> in.close(); 
> ```

# matlab - 如何在点之间进行插值而不超出它们？

> ID：13073498
> 
> 赞同：3
> 
> 时间：2012-10-25T16:54:46.207
> 
> 标签：matlab, interpolation

我有可变长度的数据（达到以 2D 记录的运动），并希望创建一个函数，将这些数据重新采样为统一长度（500 个样本）。

但是，我希望 matlab 只在给定的最大值和最小值之间重新采样，而不增加任何额外的距离。例如，如果我对矩阵重新采样`[1:1:10]`，则重新采样的矩阵的最小值应为 1，最大值应为 10。

**到目前为止，我已经尝试了以下方法：**

```
x = [1:1:10];
interp(x, 500 / length(x)); 
```

但是，这给出的值高于我的最大指定值 10。

有什么方法可以让 matlab 仅在两点之间重新采样/插值，而不超出它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:14:02.910

如果我理解正确，您需要：

```
x=(1:1:10);
n=500;
xi=interp1(1:length(x),x,linspace(min(x),max(x),n)); 
```

# android - 使用 setRequestedConfiguration 后不会调用 onConfigurationChanged

> ID：13073500
> 
> 赞同：10
> 
> 时间：2012-10-25T16:54:49.430
> 
> 标签：android

我已经设置了 am 活动来处理配置更改并且它可以工作，这意味着`onConfigurationChanged()`当方向更改时会调用它。

该活动有一个按钮来显式更改方向。单击时，它调用 `setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT)`.

然后方向被不可撤销地设置并且`onConfigurationChanged()`不再被调用。

`onConfigurationChanged()`当用户在不丢失回调的情况下单击按钮时，如何更改方向？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T16:31:46.380

这就是我解决它的方法。我知道它正在重新发明轮子，但它符合我的要求，我没有找到使用标准 sdk 工具处理这个问题的正确方法。

首先，创建一个`OrientationManager`监听方向变化的类

```
public class OrientationManager extends OrientationEventListener{
private static final String TAG = OrientationManager.class.getName();

private int previousAngle;
private int previousOrientation;
private Context context;
private OrientationChangeListener orientationChangeListener;
private static OrientationManager instance;
private OrientationManager(Context context) {
    super(context);
    this.context = context;
}

public static OrientationManager  getInstance(Context context){
    if (instance == null){
        instance = new OrientationManager(context);
    }
    return instance;
}

public int getOrientation(){
    return previousOrientation;
}

public void setOrientation(int orientation){
    this.previousOrientation = orientation;
}

@Override
public void onOrientationChanged(int orientation) {
    if (orientation == -1)
        return;
    if(previousOrientation == 0){
        previousOrientation = context.getResources().getConfiguration().orientation;
        if (orientationChangeListener != null){
            orientationChangeListener.onOrientationChanged(previousOrientation);
        }           
    }
    if (previousOrientation == Configuration.ORIENTATION_LANDSCAPE &&
            ((previousAngle > 10 && orientation <= 10) ||
            (previousAngle < 350 && previousAngle > 270 && orientation >= 350)) ){
        if (orientationChangeListener != null){
            orientationChangeListener.onOrientationChanged(Configuration.ORIENTATION_PORTRAIT);
        }
        previousOrientation = Configuration.ORIENTATION_PORTRAIT;
    }

    if (previousOrientation == Configuration.ORIENTATION_PORTRAIT &&
            ((previousAngle <90 && orientation >= 90 && orientation <270) ||
            (previousAngle > 280 && orientation <= 280 && orientation > 180))   ){
        if (orientationChangeListener != null){
            orientationChangeListener.onOrientationChanged(Configuration.ORIENTATION_LANDSCAPE);
        }
        previousOrientation = Configuration.ORIENTATION_LANDSCAPE;
    }
    previousAngle = orientation;
}

public void setOrientationChangedListener(OrientationChangeListener l){
    this.orientationChangeListener = l;
}

public interface OrientationChangeListener{
    public void onOrientationChanged(int newOrientation);
}
} 
```

然后在您的活动中实施`OrientationChangeListener`并覆盖`onOrientationChanged()`：

```
public class MyActivity extends Activity implements OrientationChangeListener{

    private OrientationManager orientationManager;

    @Override
    public void onCreate(Bundle b){
        orientationManager = OrientationManager.getInstance(this);
        orientationManager.setOrientationChangedListener(this);

    }

@Override
public void onOrientationChanged(int newOrientation) {
    orientation = newOrientation;
    if (newOrientation == Configuration.ORIENTATION_LANDSCAPE){
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
        setLandscapeConfig();
    }else{
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        setPortraitConfig();
    }
} 
```

所以我不再使用`onConfigurationChanged`，而是在 Manifest 中保留以下行： android:configChanges="orientation|screenSize"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-16T13:18:08.980

通话`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);`将重新激活`onConfigurationChanged`。您可以像这样设置计时器：

```
// Force orientation to portrait
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);

// Reactivate sensor orientation after delay
Timer mRestoreOrientation = new Timer();
mRestoreOrientation.schedule(new TimerTask() {
    @Override
    public void run() {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
    }
}, 2000); 
```

我们只能假设用户会在延迟时间内自行将设备转向强制方向，这会导致用户体验不佳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:04:00.960

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT) 
```

这会使您的 onConfigurationChanged 停止工作。如果您希望它工作，请尝试将其添加到该活动中的清单中：

```
android:configChanges="orientation|screenSize" 
```

screenSize 属性仅适用于 API 13+，因此如果低于该属性，则不需要它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-21T00:43:39.283

> ..经过多次搜索这个解决的正确代码组合。请享用！

```
@Override
public void onCreate(Bundle icicle) {
super.onCreate(icicle);

OrientationEventListener orientationEventListener = new 
OrientationEventListener(getApplicationContext()) {
    @Override
    public void onOrientationChanged(int orientation) {
        boolean isPortrait = isPortrait(orientation);
        if (!isPortrait && savedOrientation == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT) {
            savedOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_USER);
        } else if (isPortrait && savedOrientation == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE) {
            savedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_USER);
        }
    }
};
orientationEventListener.enable(); 
}

private int savedOrientation;
private boolean isPortrait(int orientation) 
{
    if (orientation < 45 || orientation > 315) {
        return true;
    }
    return false;
}    

@Override
public void onConfigurationChanged(Configuration newConfig) 
{
  super.onConfigurationChanged(newConfig);

  if(newConfig.orientation==Configuration.ORIENTATION_LANDSCAPE)
  {
      currentOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
      // do what you need in landscape mode....
  }
  else if(newConfig.orientation==Configuration.ORIENTATION_PORTRAIT)
  {
        currentOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
        // do what you need in portrait mode....
  }
}  

public void rotateScreenByUIButton() {
if (currentOrientation == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE)
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
else
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-16T07:42:08.737

您只需要将方向重新设置为 SCREEN_ORIENTATION_UNSPECIFIED，将再次调用 onConfiguration 更改

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE)
->
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED) 
```

# mediaelement.js - mediaelement.js 和 Iscroll.js iphone

> ID：13073504
> 
> 赞同：1
> 
> 时间：2012-10-25T16:55:07.583
> 
> 标签：mediaelement.js, mediaelement, iscroll4, iscroll

我`mediaelement.js`用来在 div 中显示视频`Iscroll.js`，它可以在 ipad 上完美运行，但在 iphone 上我无法滚动触摸视频的页面。

ipad 和 iphone 的行为有什么区别`mediaelement.js`？

你可以在这里看到这个项目（点击左下角的“视频”按钮） [http://www.360images.fr/step/mobile.html](http://www.360images.fr/step/mobile.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:53:01.530

I've been experiencing this issue, too. It seems that mejs disables touch interactions for the whole area over the video on iPhone, but not on iPad - The behaviour can be forced on iPad by using setting the "iPadUseNativeControls" to true, so I assume that it may be something to do with the native controls, or some of the script that mejs is using in conjunction with them.

I've had a little rummage around in the js, and can't find anything that immediately jumps out at me as to why this would prevent touch interaction. I have raised an issue on the github project, so will see what response (if any) comes from that.

# c++ - Code::blocks cmake makefile 构建时无事可做

> ID：13073511
> 
> 赞同：1
> 
> 时间：2012-10-25T16:55:42.363
> 
> 标签：c++, codeblocks, physfs

我已经下载了 PhysFS 并尝试使用 Cmake 构建它。我生成的选项是 Code::Blocks makefiles，它生成了一个项目文件。

我想这就像打开那个项目文件并尝试构建一样简单，但这并没有发生。

在构建项目后，我得到

```
-------------- Build: all in PhysicsFS ---------------

Using makefile: Makefile
Execution of 'make.exe -s -f Makefile all' in
'C:\Documents and Settings\Stefan.MONA-H6H4KPUJNF\Desktop\build' failed.
Nothing to be done. 
```

我试过检查一个[类似的问题](https://stackoverflow.com/questions/4809980/codeblocks-cmake-generated-makefile-says-nothing-to-be-done)，但答案中的选项已经很好了，但它没有用。

我在 Windows XP SP3 上

# c# - DecimalUpDown 直接编辑时不显示正确的值

> ID：13073520
> 
> 赞同：1
> 
> 时间：2012-10-25T16:56:16.567
> 
> 标签：c#, wpf, mvvm, wpf-controls, numericupdown

我正在使用 Extended WPF ToolKit 的 DecimalUpDown 控件（v1.7）。使用微调器控件时，该控件的行为与我预期的一样，但在直接编辑文本时则不然。这是一个基本的 MVVM WPF 应用程序，其控件绑定到名为`CurrentWidth`.

在 ViewModel 中，对 执行了各种验证规则`CurrentWidth`，在属性的末尾，`RaisePropertyChange("CurrentWidth");`如果值未验证，它有时会保持 CurrentWidth 不变。

当使用微调控件进行更改时，所有错误检查、值恢复等都会起作用。当用户直接在框中输入文本时，验证仍然有效，但框会显示用户输入的内容。当我发送一些调试信息时，Value 属性和 Text 属性都具有正确的未修改值，但该框仍显示用户输入的值。我尝试添加一个 LostFocus 事件处理程序并调用`InvalidateVisual()`发送方控件，甚至`UpdateLayout()`还尝试了一个，但是在关闭控件后，用户输入的文本仍然显示。有谁知道如何让它反映实际的当前值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:40:09.587

下载[WPFToolkit 1.8.0。](http://wpftoolkit.codeplex.com/releases/view/94866)那里解决了这个错误。

# .net - 使用 MVC 自定义授权

> ID：13073535
> 
> 赞同：0
> 
> 时间：2012-10-25T16:56:58.073
> 
> 标签：.net, asp.net-mvc-3, entity

我正在使用 MVC。在为多个获取和显示图片的用户使用相同的控制器时，我需要了解一些有关角色的信息。

我需要展示图片，但有时这些图片应该只显示给创建它们的人。所以现在当使用 Authorize 属性时，如果图片和用户名通过我的数据库匹配，我当然可以使用它来进行匹配。当然，我可以在控制器中创建一个匹配方法。

```
[Authorize]
controllGetPicture(Picture ID){

getSomepicture..

return picture
}

DB relations

Relations
[User] <-> [Pictures]
ID         FK_UserID 
```

我想只获取用户 ID 并与图片`FK_UserId`中的图片进行比较，但我认为它可能更聪明。如何？

# shell - shell中的错误命令

> ID：13073541
> 
> 赞同：0
> 
> 时间：2012-10-25T16:57:30.680
> 
> 标签：shell

我在 shell 存档中有这个命令：

```
sh -c $POSTGRESbin'psql -U '$POSTGRESuser' -h localhost -d '$POSTGRESdb' -c "select preview from '$fildCatalog' where preview <>'nodata' and id_registro in (select distinct(id_record) from e3_article_items where id_catalog=2101 and id_article in (select id_article from document_articles where id_document in(select distinct(id_document) from p3_logical_pages where id_logical_page in (select id_logical_page from p3_flatplan_pages where id_edition=1536 and id_logical_page is not null order by cast(pagenumber as numeric)))));"' > $queryFolder$highFile"_"$previewFile; 
```

但在 <>'nodata' 中出现错误，我不知道如何解决它。错误是：

```
ERROR:  column "nodata" does not exist
LINE 1: select preview from XT_FIJOS where preview <>nodata and id_r... 
```

有谁能够帮我 ？

谢谢 ！！^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:14:49.860

这是正确的方法：

```
sh -c $POSTGRESbin'psql -U '$POSTGRESuser' -h localhost -d '$POSTGRESdb' -c "select preview from '$fildCatalog' where preview <>'\'nodata\'' and id_registro in (select distinct(id_record) from e3_article_items where id_catalog=2101 and id_article in (select id_article from document_articles where id_document in(select distinct(id_document) from p3_logical_pages where id_logical_page in (select id_logical_page from p3_flatplan_pages where id_edition=1536 and id_logical_page is not null order by cast(pagenumber as numeric)))));"' > $queryFolder$previewFile"_"$fildCatalog; 
```

谢谢你的帮助 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:01:08.823

问题是您正在使用`'...'`引用 shell 命令的部分内容，因此您不能在命令的这些部分中使用*它们*。因此，您的 SQL 查询包含`nodata`而不是`'nodata'`，因此它认为`nodata`应该是列名。

要解决此问题，您可以在需要`"..."`的地方使用而不是：`'...'`

```
sh -c "${POSTGRESbin}psql -U $POSTGRESuser -h localhost -d $POSTGRESdb -c \"select preview from '$fildCatalog' where preview <> 'nodata' and id_registro in (select distinct(id_record) from e3_article_items where id_catalog=2101 and id_article in (select id_article from document_articles where id_document in(select distinct(id_document) from p3_logical_pages where id_logical_page in (select id_logical_page from p3_flatplan_pages where id_edition=1536 and id_logical_page is not null order by cast(pagenumber as numeric)))));\"" > "$queryFolder${highFile}_$previewFile"; 
```

（请注意，可以通过 using`"..."`包含文字，这使其更加灵活。）`"``\"`

# spring - java.io.NotSerializableException 与 spring 和 @ViewScoped bean

> ID：13073546
> 
> 赞同：1
> 
> 时间：2012-10-25T16:57:45.530
> 
> 标签：spring, hibernate, jsf, jsf-2, migration

我在一个相当大的项目中从 JSF 1.2 迁移到 JSF 2.1。有几个库使用：hibernate 3.6、spring 3.1（据我所知，我的前任更新了 2.x 形式）、acegi-security-1.0.5、tomahawk20、urlrewrite-3.2.0。当我完成向 jsf2.1 的迁移时，我将更新所有这些

我将 faces-config.xml 中的 bean 条目更改为注释，并将 JSTL 标记更改为 JSF（c:if 为呈现属性或 ui:fragment 部分），现在没有 JSTL。这个项目中的 Bean 有很多参数。那里使用了 Ajax，所以我决定使用 @ViewScoped，但我有异常（已粘贴）。我不知道为什么没有出现@SessionScoped exeption，并且一切正常。我知道 SessionSoped 的寿命比 View 长，但是这个例子有什么区别？

我阅读了一些 Q&A，并为我在 spring beans 配置文件中找到的类添加了 Serializable 接口，但仍然无法正常工作。

即对于这个条目：

```
<bean id="SomeDaoImpl" class="my.package">
    <property name="sessionFactory">
        <ref bean="sessionFactory" />
    </property>
</bean> 
```

我在 SomeDaoImpl 类中实现了 Serializable，但没有帮助。

我将此条目添加到我的 web.xml 中，但仍然无法正常工作。

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param> 
```

这个类 org.springframework.orm.hibernate3.HibernateInterceptor 我在 xml 文件中找到了 spring beans，

例外：

```
SEVERE: Error Rendering View[/folder1/folder2/index.xhtml]
java.io.NotSerializableException: org.springframework.orm.hibernate3.HibernateInterceptor
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
at java.util.HashMap.writeObject(HashMap.java:1001)
at sun.reflect.GeneratedMethodAccessor117.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:940)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
at java.util.HashMap.writeObject(HashMap.java:1001)
at sun.reflect.GeneratedMethodAccessor117.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:940)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:346)
at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:182)
at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:113)
at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:441)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
at org.apache.myfaces.tomahawk.application.ResourceViewHandlerWrapper.renderView(ResourceViewHandlerWrapper.java:93)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at my.package.util.faces.LifecycleDecorator.render(LifecycleDecorator.java:90)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at my.package.util.ie9fix.ie9fixFilter.doFilter(ie9fixFilter.java:41)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)
at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:265)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:72)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:135)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.wrapper.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:81)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.util.FilterChainProxy.doFilter(FilterChainProxy.java:149)
at org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

任何提示我应该检查或阅读什么以了解我做错了什么？我在 JSF 工作了几个星期，我还在学习。我从来没有用过弹簧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:53:41.663

您仍然会收到序列化异常，因为（从堆栈跟踪中可以看到）`org.springframework.orm.hibernate3.HibernateInterceptor`没有实现可序列化。在您的视图中的某个地方，使用了此类的一个实例，当 JSF 尝试将您的视图状态序列化到客户端时，由于有问题的类而失败。`STATE_SAVING_MODE`通过将以下条目添加到`SERVER`您的 web.xml，在您的 web.xml 中设置您的

```
 <context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>SERVER</param-value>
   </context-param> 
```

如果必须以其他方式 ( `CLIENT`)，则需要标记引用有问题的类的变量，`transient`以便在序列化过程中将其忽略

# c# - 在参数中传递枚举

> ID：13073548
> 
> 赞同：1
> 
> 时间：2012-10-25T16:57:49.183
> 
> 标签：c#, enums, params

如何将枚举作为方法的参数之一传递？我只需要在该方法的某些实现中，而在其他实现中不需要。这就是方法声明的样子：

```
public abstract void SomeMethod(params object[] someParams); 
```

这就是我希望一些实现的样子：

```
public override void SomeMethod(params object[] someParams) {

    SomeEnum someEnum = someParams[0];
    if (someEnum == null)
        return;

} 
```

当然，这段代码是无效的，但它显示了我打算做什么。该方法的其他实现可以使用其他枚举，或者根本不使用枚举。

*更新：*正如许多人所说，这是一件非常奇怪的事情，将类型安全扔出窗外。所以，我决定解释我为什么要这样做。

我必须将方法调用传递给一个类的许多不同子类，我通过一个系统声明这个方法，该系统通过网络（以及本地）发送它们并在特定时间以特殊顺序执行它们。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:01:04.577

`params`您可以像任何其他对象一样使用关键字传递类型的枚举值。

```
public override void SomeMethod(params SomeEnum[] someEnums) 
{
     foreach(SomeEnum e in someEnums)
     {

     }
} 
```

* * *

如果您还必须将其他枚举传递给此方法，则可以将`System.Enum`其用作参数，因为所有枚举都派生自它。打字稍强。

```
public override void SomeMethod(params Enum[] enums) 
{
    //something like
    var @enum = enums[0];
    if (!(@enum is SomeEnum))
        return;

    var someEnum = (SomeEnum)@enum;
} 
```

* * *

要确认您的编辑，最好的方法是明确指定您将在方法调用期间传递的对象作为方法的签名。只有当您传递的参数数量必须是可变的时，您才应该依赖`params`关键字。否则，您应该坚持明确声明签名。如果您的枚举`SomeEnum`是可选的，您可以最后将其声明为可选参数。像这样：

```
public override void SomeMethod(int a, string b, SomeEnum? someEnum = null) 
{
    if (someEnum == null)
       //handle the logic here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T17:01:43.440

```
public override void SomeMethod(params object[] someParams)
{
    if (!(someParms[0] is SomeEnum))
        return;

    var se = (SomeEnum) someParams[0];
    ...
} 
```

尽管我无法想象您为什么要通过显式类型的参数来执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T17:01:42.833

好吧，看起来您真的在这里自找麻烦，基本上从签名中删除了任何类型的强类型。你需要投。

其次，类型的值`SomeEnum`永远不能为空，因为枚举是值类型。所以你*可以*写：

```
public override void SomeMethod(params object[] someParams)
{
    if (someParams[0] == null)
    {
        return;
    }
    // This will throw an exception if you've been given the wrong kind
    // of argument. I prefer that to just silently returning, as it would
    // usually indicate a programming error which should be fixed.
    SomeEnum someEnum = (SomeEnum) someParams[0];
    ...    
} 
```

但是，您最好找出一种以更强类型的方式表示参数的方法。不幸的是，如果没有更多信息，我们无法真正帮助您做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T17:04:14.137

我认为通常你会为方法的不同实现使用重载，而不是覆盖，如果它们需要不同的参数。这些最后仍然可能有参数：

```
void M(SomeEnum someEnum, params object[] someParams)
{
   //... 
```

但是，您的代码也可以使用此签名：

```
public override void SomeMethod(params object[] someParams) {

    if (someParams.Length == 0 or !(someParams[0] is SomeEnum))
        return;

    SomeEnum someEnum = (SomeEnum)someParams[0];
    //... 
```

# javascript - For in 循环返回一个字符串而不是一个对象

> ID：13073552
> 
> 赞同：0
> 
> 时间：2012-10-25T16:58:10.163
> 
> 标签：javascript

我有包含嵌套对象的 javascript 对象。我想使用“for in”循环来迭代这些，但这会返回一个字符串而不是一个对象？

代码：

```
var myObject = {

    myNestedObject : {

        key1 : value 1 

    }

} 
```

然后如果我循环：

```
for(theObject in myObject){

    alert(typeof theObject);

} 
```

这将返回字符串“myNestedObject”，但不返回对象本身。

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T17:02:09.320

`theObject`是属性键。你想要的可能是：

```
for(var key in obj){
    var theObject = obj[key];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:00:11.910

这就是`for...in`循环的工作方式。而是写：

```
for(prop in Myobject){    
    alert(Myobject[prop]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:00:26.450

[`for...in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环遍历对象的属性。

```
for(key in myObject){
  var theObject = myObject[key]
  //theObject = { key1: value 1 }

  console.log(typeof theObject);
  //"object"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:16:20.443

如果您只需要自己的属性，在您的情况下嵌套对象 - 不是继承的 - 你应该这样做

```
for(theObject in myObject){
  if (myObject.hasOwnProperty(theObject)) {
     alert(typeof myObject[theObject]);
  }
} 
```

如果你提醒 typeof`theObject`会给你对象的类型......字符串 - 因为这是关键......不是对象......但是`myObject[theObject]`会导致警报`object`是对象的类型。

# ms-access - 在表单上使用表格字段描述

> ID：13073565
> 
> 赞同：1
> 
> 时间：2012-10-25T16:58:43.380
> 
> 标签：ms-access, field-description

我想在表单上显示字段的描述。我将如何做到这一点？例如，表名称是 tblbureau，字段名称是带有描述“General Counsel for the Defense”的法律顾问，表单名称是 frmCounsel。我想使用显示完整描述的控件（文本框？），而不是使用字段名称的默认标签。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:10:14.480

如果您已使用表单向导创建表单，则会将任何描述性文本添加到`StatusBarText`属性中。当您创建一个空白表单并将字段从字段列表拖到表单时，这甚至是正确的。您可以为您的消息框引用此属性，或者只是将用户引用到状态栏。您还可以使用 StatusBarText 属性更新 ControlTipText 属性。

```
MsgBox Me.ATextBox.StatusBarText 
```

使用上述将节省编码以获取描述：

```
Currentdb.TableDefs("atablename").Fields("afieldname").Properties("Description") 
```

请注意，当您没有添加描述时，描述属性不适用于字段，因此上述会导致错误。

# java - 在arraylist中查找重复元素的索引

> ID：13073568
> 
> 赞同：0
> 
> 时间：2012-10-25T16:58:51.037
> 
> 标签：java, arraylist, binary-search

我试图在字符串数组列表中找到重复项的索引位置。我无法找到一种有效循环遍历数组列表并报告重复索引的方法。我最初的想法是使用 Collections.binarySearch() 来查找重复项，但我不确定如何使用 binarySearch 将数组列表的元素相互比较。我唯一的另一个想法是遍历列表，这非常庞大，次数太多甚至都不可行。我的Java知识有限，因此不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:12:19.557

不优雅，但应该工作：

```
Map<String, List<Integer>> indexList = new HashMap<String, List<Integer>>();
for (int i = 0; i < yourList.size(); i++) {
    String currentString = yourList.get(i);
    List<String> indexes = indexList.get(currentString);
    if (indexes == null) {
         indexList.put(currentString, indexes = new LinkedList<Integer>());
    }
    indexes.add(i);
    if (indexes.size() > 1) {
        // found duplicate, do what you like
    }
}
// if you skip the last if in the for loop you can do this:
for (String string : indexList.keySet()) {
    if (indexList.get(string).size() > 1) {
        // String string has multiple occurences
        // List of corresponding indexes:
        List<Integer> indexes = indexList.get(string);
        // do what you want
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:01:14.617

听起来你运气不好。

您将**不得不**检查每个元素（即遍历整个列表）。从逻辑上考虑 - 如果你能避免这种情况，这意味着你没有检查过一个元素。但是这个元素可以是任何值，因此*可以*是另一个列表元素的副本。

当您知道列表中存在某种关系时，二分搜索是一种减少检查元素数量的聪明方法 - 因此检查一个元素可以为您提供有关其他元素的信息。例如，对于一个排序列表，如果中间元素大于 5，则您知道它后面的每个元素也都大于 5。

但是，我认为在重复检查方面没有办法做出这样的推断。您必须根据“此重复的元素数量”（这是在回避问题）对列表进行排序，否则您对元素执行的任何测试都不`x`会让您深入了解是否`y`是重复的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T22:42:21.697

现在这可能不是一个内存有效的解决方案，但是是的，我想这就是你想要的。也许这个程序可以进一步改进。

```
import java.io.*;
import java.util.*;

class ArrayList2_CountingDuplicates
{
public static void main(String[] args)throws IOException
{

ArrayList<String> als1=new ArrayList<String>();
ArrayList<String> als2=new ArrayList<String>();
int arr[];
int n,i,j,c=0;
String s;

BufferedReader p=new BufferedReader(new InputStreamReader(System.in));

n=Integer.parseInt(p.readLine());

arr=new int[n];

for(i=0;i<n;i++)
als1.add(p.readLine());

for(i=0;i<n;i++)
{

s=als1.get(i);
als1.remove(i);
als2.add(s);

arr[c]=1;

while(als1.contains(s))
{
j=als1.indexOf(s);
als1.remove(j);
arr[c]=arr[c]+1;
}
n=n-arr[c];
c=c+1;
i=-1;
}

    for(i=0;i<c;i++)
    System.out.println(als2.get(i)+" has frequency  "+arr[i]);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-14T18:02:25.917

我一直在寻找这样的方法，最终我想出了我自己的解决方案，用一种更实用的方法来解决这个问题。

```
public <T> Map<T, List<Integer>> findDuplicatesWithIndexes(List<T> elems) {
    return IntStream.range(0, elems.size())
            .boxed()
            .collect(Collectors.groupingBy(elems::get))
            .entrySet().stream()
            .filter(e -> e.getValue().size() > 1)
            .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));
} 
```

它返回一个由重复元素组成的映射作为键和重复元素的所有索引的列表作为值。

# sqlite - 嵌套“WHERE IN”（或 AND、OR 语句）SQLite

> ID：13073569
> 
> 赞同：2
> 
> 时间：2012-10-25T16:58:54.957
> 
> 标签：sqlite, nested, where-in

我想要一个 SELECT 查询，它可以获取 user1 和 user2 的 8 个特定组合（并且 user2 和 user1 的组合也值得拥有，而不是多余的）。“IN”声明似乎是值得的。

直接相关的问题。1.“WHERE IN”语句可以嵌套吗？

1.  如果没有，我如何最有效/最容易地构建一个查询以便我可以指定（对于 4 对，其中 user1 和 user2 切换位置 - 8 个组合）： `(where user1 = billy AND user2 = sue) OR (where user1 = sue AND user2 =billy) OR (user1 = jack AND user2 = jill) OR (user1 = jill AND user2 = jack)`...等？

[此时运行查询和 grep 相关信息似乎更容易。]

目前的想法：

```
sqlite3 -header -separator , some.db "SELECT DISTINCT programquality.time, simscores.user1, simscores.user2, simscores.simscore, programquality.gf, programquality.ga, programquality.pq FROM simscores LEFT JOIN programquality ON programquality.time = simscores.time AND programquality.username = simscores.user1 WHERE programquality.pq IS NOT NULL WHERE simscores.user1 IN ("abraham","billy","carl","dave","ethan","frank","george","harry") WHERE simscores.user2 IN ("abraham","billy","carl","dave","ethan","frank","george","harry");" 
```

我用过这个，但显示了一些不相关的数据。

```
sqlite3 -header -separator , some.db 'SELECT DISTINCT programquality.time, simscores.user1, simscores.user2, simscores.simscore, programquality.gf, programquality.ga, programquality.pq FROM simscores LEFT JOIN programquality ON programquality.time = simscores.time AND programquality.username = simscores.user1 WHERE (simscores.user1  = "billy" OR simscores.user1 = "suzy" OR simscores.user1 = "john") AND (simscores.user2  = "billy" OR simscores.user2 = "suzy" OR simscores.user2 = "john") AND programquality.pq IS NOT NULL AND programquality.time IS NOT NULL;' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:20:35.607

一个查询[只能有一个`WHERE`子句](http://www.sqlite.org/lang_select.html)，但该表达式可以将多个条件与`AND`or结合起来`OR`：

```
SELECT ...
FROM ...
WHERE programquality.pq IS NOT NULL AND
      simscores.user1 IN ('abraham', 'billy', ...) AND
      simscores.user2 IN ('abraham', 'billy', ...) 
```

但是，这些`IN`表达式不允许您匹配和的*特定*值。您无法避免列出您想要的所有组合。`user1``user2`

但是，您可以通过检查组合名称的有效组合来稍微简化表达式：

```
... WHERE ... AND
          simscores.user1 || '+' || simscores.user2
           IN ('billy+sue', 'sue+billy',
               'jack+jill', 'jill+jack',
               ...) 
```

# ios - Xcode 4.5：我想将导航栏按钮“标识符”从播放更改为暂停

> ID：13073570
> 
> 赞同：1
> 
> 时间：2012-10-25T16:58:54.877
> 
> 标签：ios, xcode, toggle

我的故事如下。我在标签栏上添加了一个按钮，并将按钮标识符设置为“播放”，使其看起来像一个播放按钮。我正在使用标识符，这样我就不必使用自己的“play.png”图像。

当我按下按钮时，除了播放声音之外，我还希望图像（标识符）更改为“暂停”。我不清楚是否可以，如果可以，如何进行此更改。

我已经看到了一些将按钮从播放切换到暂停等的示例，但它们似乎正在使用我想避免的本地图像文件。

任何帮助表示赞赏。

保罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:17:03.767

我在运行时尝试使用默认标识符更改按钮样式时遇到了同样的问题，我进行了谷歌研究，我认为这是不可能的，所以我的解决方案是创建一个新按钮并在运行时更改它。

```
- (IBAction)playButton:(UIBarButtonItem *)sender {

if (self.scene.isPaused){
    [self.scene setPaused:YES];
    UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemPlay target:self action:@selector(playButton:)];
    play.style = UIBarButtonItemStyleBordered;
    self.botToolbar.items = [NSArray arrayWithObject:play];

}
else{
    [self.scene setPaused:NO];
    UIBarButtonItem *pause = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemPause target:self action:@selector(playButton:)];
    pause.style = UIBarButtonItemStyleBordered;
    self.botToolbar.items = [NSArray arrayWithObject:pause];
}

} 
```

我使用`self.botToolbar.items`的原因是我在情节提要上添加了一个工具栏，如果您想使用工具栏，`NavigationController`只需将其更改为`self.toolbarItems`

# c++ - 如何创建一个执行时不显示任何窗口的 cpp 程序

> ID：13073575
> 
> 赞同：1
> 
> 时间：2012-10-25T16:59:12.957
> 
> 标签：c++, windows

我正在运行此代码，这是一个简单的代码，可在戴尔上锁定 Windows 8 屏幕，该戴尔具有可分配给 a 的按钮`.exe`，但它`cmd`在锁定之前显示一个窗口，我如何在`.exe`不显示窗口的情况下启动？

使用 Visual Studio 开发命令提示符进行编译

命令行：

```
cl lockscreen.cpp 
```

代码：

```
#include <string>
#include <Windows.h>

using namespace std;

int APIENTRY  WinMain(HINSTANCE hInstance,
        HINSTANCE hPrevInstance, 
        LPTSTR    lpCmdLine, 
        int       cmdShow)
{

    system("rundll32 user32.dll,LockWorkStation");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:02:21.630

链接到 user32.dll（user32.lib 实际上是导入库，但如果这是一个普通的 win32 项目，你应该已经这样做了）并直接*调用* `LockWorkstation`。如果必须，`LoadLibrary`() + `GetProcAddress`() + 等。您无需调用 rundll 调用即可使其工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:05:24.470

基本上我同意 WhozCraig，但如果有充分的理由通过外部 exe 进行调用，请尝试使用`start /b`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T17:49:22.177

您根本不需要编译任何代码。只需将您的特殊键盘按钮连接到

```
rundll32.exe user32.dll,LockWorkStation 
```

# ios - iOS：Crashlytics 崩溃报告和可用 RAM

> ID：13073577
> 
> 赞同：4
> 
> 时间：2012-10-25T16:59:20.023
> 
> 标签：ios, memory, crash-reports

在我们的一款 iPhone 应用程序中，我们遇到了一些迄今为止无法重现的 Crashlytics 崩溃。然而，仔细观察，我注意到了一个趋势......

* * *

崩溃 1：-[UINavigationTransitionView _notifyDelegateTransitionDidStopWithContext:]

可用内存：10%

* * *

崩溃 2：-[UINavigationTransitionView _notifyDelegateTransitionDidStopWithContext:]

可用内存：8%

* * *

崩溃 3：HostBase::lock()

可用内存：8%

* * *

崩溃 4:-[UINavigationTransitionView _notifyDelegateTransitionDidStopWithContext:]

可用内存：22%

* * *

可用 RAM 的数量是否意味着什么？我们能否确定这些是实际的崩溃，而不是我们的应用程序由于内存不足而被操作系统杀死？如果应用程序在后台崩溃，Crashlytics 是否会发送崩溃报告？

添加了几个堆栈跟踪...

异常类型：SIGSEGV、导航崩溃

```
0    libobjc.A.dylib    
objc_msgSend + 15
1    UIKit ✭    
-[UINavigationTransitionView _notifyDelegateTransitionDidStopWithContext:] + 274
2    UIKit  
-[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 158
3    UIKit  
-[UIViewAnimationState animationDidStop:finished:] + 50
4    QuartzCore 
CA::Layer::run_animation_callbacks(void*) + 208
5    libdispatch.dylib  
_dispatch_client_callout + 22
6    libdispatch.dylib  
_dispatch_main_queue_callback_4CF$VARIANT$mp + 224
7    CoreFoundation 
__CFRunLoopRun + 1290
8    CoreFoundation 
CFRunLoopRunSpecific + 356
9    CoreFoundation 
CFRunLoopRunInMode + 104
10   GraphicsServices   
GSEventRunModal + 74
11   UIKit  
UIApplicationMain + 1120 
```

异常类型：SIGSEGV、HostLock 崩溃

```
0    libobjc.A.dylib    
objc_msgSend + 15
1    CFNetwork ✭    
HostBase::lock() + 14
2    CFNetwork  
DispatchHost::performInvocation(void const*) + 12
3    CFNetwork  
__setupTCPConnection_block_invoke_2 + 290
4
...
libsystem_network.dylib 
__tcp_connection_notify_complete_block_invoke_1 + 18
7    libsystem_c.dylib  
_pthread_wqthread + 294 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:07:04.150

8％的内存可能很多，我高度怀疑这是一个问题。我不知道他们是否在后台运行时发送崩溃，您必须直接询问他们，因为他们的 SDK 不是开源的。

您添加的两个异常堆栈跟踪都暗示了内存问题。

第一个看起来像是在对象的动画结束时尝试调用委托，该对象不再存在。

第二个看起来像一个类似的问题，其中完成块正在访问一个已经消失的对象。因此，您可能会检查您的块是否存在此类模式。

# java - 使用 Arrays.sort，返回空数组

> ID：13073588
> 
> 赞同：0
> 
> 时间：2012-10-25T16:59:51.693
> 
> 标签：java, arrays, sorting

我正在使用该方法对我自己的对象`Arrays.sort`数组进行排序。`Comparable`在我使用排序之前，数组已满，但是在我对数组进行排序并将其打印到系统之后，没有任何东西打印出来。编辑。该数组根本不打印任何内容。不是空行，什么都没有。

这是我使用的方法的代码`sort`：

```
public LinkedQueue<Print> arraySort(LinkedQueue<Print> queue1)
{
    Print[] thing = new Print[queue1.size()];
    LinkedQueue<Print> newQueue = new LinkedQueue<Print>();

    for(int i = 0; i <queue1.size(); i++)
    {
        Print ob = queue1.dequeue();
        thing[i] = ob;
        System.out.println(thing[i]);   //printing works here
    }

    Arrays.sort(thing);

    for(int j = 0;j<thing.length-1;j++)
    {
        System.out.println(thing[j]);   //printing does not work here 
        newQueue.enqueue(thing[j]);
    }

    return newQueue;
} 
```

这是`Comparable`名为 的对象的类`Print`。

```
public class Print implements Comparable<Print>
{
    private String name;
    private int numPages,arrivalTime,startTime,endTime;

    public Print(String n, int p, int time, int sTime, int eTime)
    {
        name = n;
        numPages = p;
        arrivalTime = time;
        startTime = sTime;
        endTime = eTime;
    }

    public int getPages()
    {
        return numPages; 
    }

    public int compareTo(Print other)
    {
        if(this.getPages()<other.getPages())
            return -1;

        else if(this.getPages()>other.getPages())
            return 1;

        else
            return 0;
    }

    public String toString()
    {
        return name+"("+numPages+" pages) - printed "+startTime+"-"+endTime+" minutes";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:08:34.827

您的最后一个`for`循环不会打印数组中的最后一个元素。如果数组只有一个元素，它根本不会打印任何东西。改成：

```
for (int j = 0; j < thing.length; j++) //clean code uses spaces liberally :)
{
    System.out.println(thing[j]);
    newQueue.enqueue(thing[j]);
} 
```

或（如果使用的 JDK/JRE 版本支持）：

```
for (Print p : thing)
{
    System.out.println(p); 
    newQueue.enqueue(p);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T17:11:06.297

我希望问题是这部分代码

```
for(int i = 0; i <queue1.size(); i++)
{
    Print ob = queue1.dequeue();
    thing[i] = ob;
    System.out.println(thing[i]);   //printing works here
} 
```

将以上内容替换为

```
for(int i = 0; !queue1.isEmpty() ; i++)
{
    Print ob = queue1.dequeue();
    thing[i] = ob;
    System.out.println(thing[i]);   //printing works here
} 
```

# c - Gcc编译器选项将int arg转换为double？

> ID：13073592
> 
> 赞同：0
> 
> 时间：2012-10-25T17:00:01.303
> 
> 标签：c, gcc, casting

我假设为 double 参数传递的 int args 将转换为 double。例如

我在打电话：make_line(root, "hi", 5,5,50,50);

上：

```
GooCanvasItem * make_line(GooCanvasItem * parent, char * name, gdouble x1, gdouble y1, gdouble x2, gdouble y2)
{
    printf("from make line: %f %f %f %f\n", x1, y1, x2, y2);
    //...
} 
```

`printf`产品：

```
from make line: 0.000000 0.000000 0.000000 0.000000 
```

当我用

```
make_line(root, "hi", 5.0,5.0,50.0,50.0); 
```

它给出了正确的输出。

更改`gdouble`为`double`似乎无法解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:10:38.023

`a`(5) 不会转换为`0`.

我相信您使用的是`%d`in your`printf`而不是`%f`打印双精度值。编译代码时打开编译器警告。

使用`-Wformat`gcc 的选项。

# image - 如何将扩展文件中的图像加载到 webview

> ID：13073594
> 
> 赞同：2
> 
> 时间：2012-10-25T17:00:12.613
> 
> 标签：image, webview, apk-expansion-files

在我们的应用程序中，我们有从资产目录加载到 webview 的 html 页面。这些依次从同一个地方加载 jpg 图像。由于 Google Play 的 50mg 应用程序大小限制，我需要将 jpg 移动到扩展文件。出于安全原因，我们不想移动 html 页面。谁能告诉我如何将扩展文件中的 jpg 加载到 html 网页中？

谢谢

克里斯汀

还有一些想法：

此链接发布了一个类似的问题，但仍未得到解答：

[在android webview中使用apk扩展文件中的图像](https://stackoverflow.com/questions/11986335/using-images-from-apk-expansion-file-in-android-webview)

此链接确实有答案，但它们似乎不完整，至少对于我的需要：

[我们如何使用 APK 主扩展文件中的图像？](https://stackoverflow.com/questions/10738818/how-we-can-use-images-from-apk-main-expansion-file)

我在想扩展文件的 URI 接口（APEZProvider 为 ExpansionFile 创建一个 ContentProvider，参见[http://developer.android.com/guide/google/play/expansion-files.html#ZipLib](http://developer.android.com/guide/google/play/expansion-files.html#ZipLib)）可能是去，但我不清楚如何将信息获取到 Javascript。目前我们正在使用：

我尝试过覆盖 ShouldInterceptRequest，如 [webview shouldinterceptrequest example](https://stackoverflow.com/questions/8273991/webview-shouldinterceptrequest-example)中所建议的那样，期望在即将加载图像时获得回调，以便我可以修改 url，但 shouldInterceptRequest 不会被调用。

那么，是否有人知道如何拦截 jpg 的加载并将 URL 重定向到从扩展文件的 ContentProvider 获得的 URL？

除了解压缩扩展文件还有其他建议吗？任何帮助将非常感激。我已经花了几天时间研究这个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:45:46.130

为了其他为此苦苦挣扎的人的利益，我有一个解决方案，至少适用于 API 11 及更高版本。我发现 ShouldInterceptRequest 实际上只有在 webview.loadUrl(assetFile) 没有在资产文件夹中找到文件时才会被调用。也许这应该是显而易见的，但我还没有在任何地方看到它的记录（我以为我曾尝试删除该文件，但肯定做错了其他事情） n shouldInterceptRequest 如下所示：

```
 @Override
    public WebResourceResponse shouldInterceptRequest(WebView view, String url)
    {
        String fileName = url.substring(assetPrefix.length());

        InputStream inputStream = expansionFile.getInputStream(fileName);

        if (url.endsWith("jpg") || url.endsWith("png"))
            return new WebResourceResponse("image/*", "base64", inputStream);

        return super.shouldInterceptRequest(view, url);
    } 
```

现在，如果有人对 API 10 的解决方案有任何想法，我们仍将不胜感激。我已经看到了覆盖 shouldOverrideUrlLoading 的建议（我们正在为其他目的执行此操作）但是当从 html 文件加载图像时似乎不会调用它，只有在前进到一个全新的网页时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:52:56.860

如何将存储在字节数组中的图像加载到 WebView的第一个答案[？](https://stackoverflow.com/questions/4495673/how-to-load-an-image-stored-in-a-byte-array-to-webview)适用于 API 10。谢谢 Qorbani！抱歉，我无法为您的答案投票，因为我没有声誉

克里斯汀

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T10:55:13.443

只是对克里斯福塞特的回答的补充。shouldInterceptRequest会定期*调用以加载***资产**文件夹之外的图像。我被这个问题困扰了很长一段时间。感谢克里斯。

# python - 如何在 Xorg 中使用 Xlib 获取输入设备路径？

> ID：13073595
> 
> 赞同：0
> 
> 时间：2012-10-25T17:00:14.673
> 
> 标签：python, pyqt, pygtk, xlib, xorg

有一些方法可以使用基于 XNextEvent 循环的 Xlib 获取鼠标和键盘的设备路径？我需要知道 /dev/input/event* 会生成特定的事件，例如鼠标按下和键盘键 F1 按下。

我在 Xorg 中将 evdev 用于输入设备，我搜索了文档但找不到方法。

我也接受一些应用程序的建议，我可以使用这些应用程序根据鼠标按下和键盘按下等事件来识别输入设备。

谢谢。

编辑：如果有一种方法可以使用另一个库，最好是带有 python 绑定的库，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:31:48.673

我意识到 Xlib 没有获取输入设备的文件描述符的方法，所以我想出了另一种解决这种情况的方法，还没有准备好，但显然是最好的方法，只是在这里发布给有一样的问题。

我正在使用模块[python-evdev](http://packages.python.org/evdev/index.html)（在 ubuntu 中安装了 pip），通过这个模块我可以监控设备是 /dev/input/event*，所以我只需要为我之前确定的每个设备启动一个线程是鼠标或键盘（使用模块 evdev 并检查设备是否具有带有事件代码（如 ecodes.KEY_F1 和 ecodes.BTN_MOUSE）的“capabilities(verbose=True)”），当事件发生时，写入共享变量，我应该监控。

对于在 Xorg 中运行的图形界面，没有 Windows 管理器，我使用 python-glade2，就像一个魅力，我使用 xinit 运行带有 python-glade2 应用程序的 Xorg。

# python - 带有 Tastypie 的外键

> ID：13073598
> 
> 赞同：1
> 
> 时间：2012-10-25T17:00:37.893
> 
> 标签：python, django, tastypie

我有这样一个问题：实行多城市的选举制度。

*   每个城市最多有3名候选人
*   城市状态是：选举开放

这是我的模型：

```
class City(models.Model):
ELECTION_CLOSED = -1
ELECTION_OPENNING = 0
ELECTION_BEGIN = 1

ELECTION_STATUSES = (
        (ELECTION_CLOSED,"Election closed"),
        (ELECTION_OPENNING,"Election Openning"),
        (ELECTION_BEGIN, "Election Begin"),
)
city = models.ForeignKey(Location,related_name='location')
president = models.ForeignKey(User,related_name='president',default=None,blank=True,null=False)
election_status = models.IntegerField(choices=ELECTION_STATUSES,default=ELECTION_OPENNING)
start_electing_at = models.DateTimeField(auto_now_add=True)
start_president_at = models.DateTimeField(auto_now_add=True)

class Candidate(models.Model):
    city = models.ForeignKey(Location)
    candidate = models.ForeignKey(User,related_name='votegame_candidate_id')
    num_of_votes = models.PositiveIntegerField(default=0) 
```

这是我的资源

```
class CityResource(ModelResource):
city = fields.ToOneField(LocationResource, 'city')
class Meta:
    allowed_methods = ['post','get']
    queryset = City.objects.all()

class CandidateResource(ModelResource):
    city = fields.ToOneField(LocationResource, 'city')
    candidate = fields.ToOneField(UserResource, 'candidate')

class Meta:
    allowed_methods = ['post','get']
    include_resource_uri = False
    queryset = Candidate.objects.all()
    always_return_data = True
    authentication = BasicAuthentication()
    authorization= Authorization()
    filtering = {"city": ALL }
def obj_create(self, bundle, request=None, **kwargs):
    city_res = self.city.get_related_resource(self)
    print city_res.id

**#######I want to check if the City status is "Election Openning" here####**

    userbalance,created = Balance.objects.get_or_create(user=request.user)
    obj = self.obj_get_list(request,city=bundle.data.get("city"))
**#######I want to check if the number of Candidates in the city is now 3 here ######**

    try:
        bundle= super(CandidateResource, self).obj_create(bundle, request, user=request.user)
    except IntegrityError,e:
        print e

    return bundle 
```

看到我上面的 2 个问题了吗？我运行 POST ：

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"city" : "/votegame/v1_votegame/city/123/"}' http://127.0.0.1:8000/votegame/v1_votegame/candidate/ -u summer:123456 
```

问题1：

#我想在这里查看城市状态是否为“Election Openning”

我做： `print city_res.id`，我得到了 `<tastypie.fields.CharField object at 0xb50d7ecc>`

问题2：

#我想在这里查看现在这个城市的候选人数是不是3

我什么时候都没有`print obj` 但如果我改变

```
obj = self.obj_get_list(request,city="123") 
```

我得到了名单。

谁能给我一些想法。非常感谢。

# java - java socket编程：消息传递顺序

> ID：13073603
> 
> 赞同：1
> 
> 时间：2012-10-25T17:00:48.527
> 
> 标签：java, sockets, network-programming

我对任何类型的网络编程都不熟悉。请您回答以下问题。

我正在使用 Java。

设想

线程 1：

```
Socket s = new Socket("remote machine", portNum);
//get the outputstream and write **"Message 1"**, close it. 
```

线程 2：

```
Socket s = new Socket("remote machine", portNum);    
//get the outputstream and write **"Message 2"**, close it. 
```

可以确定线程 1 在线程 2 实时之前打开套接字并将消息发送到远程机器。

是否保证“远程机器”以相同的顺序读取它们，即读取消息1，然后读取消息2

**注意**：订单是有保证的，因为线程 1 在发送消息 1 后，向线程 2 发送批准以继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:37:30.367

试着把网络想象成某种东西

a) 异步 b) 不可靠 c) 不可控

所以，当你发送一些东西时，事情会在不可控的情况下并行发生。当您向远程机器发送内容时，甚至不能保证数据（初始和数据 - 参见 TCP）通过相同的路径传输。

TCP 可以很好地管理单个连接的顺序传输，但不能很好地管理两个连接。如果您使用/需要两个到同一个服务器/端口，您通常会这样做，因为您希望它们是独立的。您正在使用 Java 编程，尝试在单个 tcp-socket-connection 上同步/调度以保证交付顺序，并使用多个并行运行事物。

# eclipse - 如何让 egit 尊重多项目 git 存储库？

> ID：13073605
> 
> 赞同：8
> 
> 时间：2012-10-25T17:00:50.117
> 
> 标签：eclipse, egit

我有一个包含多个 Eclipse 项目的 git 存储库。导入 eclipse 项目很容易，但我不知道如何让它们与 eGit 插件一起工作。

下面的树输出显示了我正在查看的目录结构的要点。

```
bash-3.2$ tree -a
.
|-- .git
    ...
|-- .gitignore
|-- apps
|   `-- example-app
|       |-- .classpath
|       |-- .project
    ...
|-- cs-build.xml
 `-- services
     `-- example-app-service
         |-- .classpath
         |-- .project
         ... 
```

我如何使用这两个项目并让 e​​clipse 识别它们来自同一个 git 存储库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T19:29:05.583

啊哈！我已经想通了！关键是在将存储库本身建立在磁盘上的某个位置之后，在 eclipse 中导入项目。在向导期间，Eclipse 找到项目并将它们中的每一个链接到存储库。在上面的示例中，我的 Eclipse Package Explorer 现在显示

```
example-app [example-app master]
example-app-service [example-app master] 
```

给我希望的线索是这里的教程： [http ://www.vogella.com/articles/EGit/article.html#tutorial_multiprojects](http://www.vogella.com/articles/EGit/article.html#tutorial_multiprojects)

事件的确切顺序类似于......

1.  文件，导入...
2.  Git, 来自 Git 的项目, Next>
3.  本地，下一个>
4.  添加...，浏览，完成
5.  从4.中选择repo，下一步>
6.  导入现有项目，下一步>
7.  选中您想要的项目旁边的复选框，然后单击完成

我离开了命令行，回到了 eclipse 中，并通过遥控器反馈了关于 repo 状态的反馈。

我仍然不确定将多个 Eclipse 项目保存在一个存储库中是一个好主意，但这不是我的存储库，它只是我必须工作的地方。

# jquery - 使用 JQuery 排除某些项目

> ID：13073606
> 
> 赞同：1
> 
> 时间：2012-10-25T17:00:50.913
> 
> 标签：jquery, jquery-animate, toggle

我有一系列触发 JQuery 动画的按钮，其中面板在页面底部下方向上滑动。面板绝对位于页面下方，当单击按钮时，相应的面板会动画。

该功能效果很好，但我只想能够在任何给定时间显示一个面板。

我的 HTML 是：

```
<div id="footerNav">
<a class="button" id="b1" href="#"><span></span>Upcoming Events</a>
<a class="button" id="b2" href="#"><span></span>From the Blog</a>
<a class="button" id="b3" href="#"><span></span>Global Leaders</a>
<a class="button" id="b4" href="#">Watch Video</a>
</div>

<div id="paneb1" class="pane"></div>
<div id="paneb2" class="pane"></div>
<div id="paneb3" class="pane"></div> 
```

我的jQuery是：

```
$("a.button").toggle(function(){
     idClick = $(this).attr("id");
     newSelector = $("#pane"+idClick);
     newSelector.animate({ 'bottom' : 99});
     $(this).addClass("activeBtn");
}, function(){
     newSelector.animate({ 'bottom' : -275});
     $(this).removeClass("activeBtn");
}); 
```

我尝试像这样使用 not 选择器，但它不起作用：

```
$(".pane:not(newSelector)").animate({ 'bottom' : -275}); 
```

我需要在这里做什么才能在切换按钮时将任何其他面板动画化回其原始位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:02:56.760

您可以使用[`not()`](http://api.jquery.com/not/)方法而不是`:not()`选择器：

```
$(".pane").not(newSelector).animate({ bottom : -275 }); 
```

注意，最好使用局部变量而不是全局变量，所以`var`在定义新变量时考虑使用关键字：

```
var newSelector = $("#pane" + idClick); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:03:33.790

尝试：

```
$(".pane").not(newSelector).animate({ 'bottom' : -275}); 
```

由于您的版本没有引用您制作的 javascript var，因此它正在寻找一个名为“newSelector”的选择器。

# uinavigationcontroller - ios 6.0 - Landscape 不工作 - 子类 UINavigationController 从不调用 shouldAutorotate 方法

> ID：13073627
> 
> 赞同：1
> 
> 时间：2012-10-25T17:02:17.180
> 
> 标签：uinavigationcontroller, ios6, landscape, uiinterfaceorientation, autorotate

我创建了一个简单的应用程序，它有一个红色背景和一个按钮（为了理解这个问题）。该应用程序处于横向模式并使用 iOS6 框架构建。

我已将支持的界面方向 pList 属性设置为只有：横向（右主页按钮）

如果我将方法 -(BOOL)shouldAutorotate 和 -(NSUInteger)supportedInterfaceOrientations 放在视图控制器中，并将其作为 windows rootViewController 启动，而不使用 UINavigationController，则可以实现横向。

但是，如果我使用下面示例中的子类 UINavigationController 并实现 -(BOOL)shouldAutorotate 和 -(NSUInteger)supportedInterfaceOrientations ，则不会实现横向并且永远不会调用 -(BOOL)shouldAutorotate 。

我的子类 UINavigationController 中有以下代码：

```
 //For iOS 5.x and below
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
  return (interfaceOrientation != UIInterfaceOrientationLandscapeRight);
 }

//For iOS 6.0
-(NSUInteger)supportedInterfaceOrientations
{
 return UIInterfaceOrientationMaskLandscapeRight;
}

-(BOOL)shouldAutorotate
{
return YES;
} 
```

在我的 appDelegate 我有这些方法：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];

viewController = [[MDViewController alloc] init]; //a very simple viewcontroller containing button on red background which should be in landscape mode
navigationController = [[MDNavigationController alloc] initWithRootViewController:viewController];
[self.window setRootViewController:navigationController.topViewController];

[self.window makeKeyAndVisible];
return YES;
}

-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:  (UIWindow *)window {
   return UIInterfaceOrientationMaskLandscapeRight;
 } 
```

我已经看到无数对我实施的类似问题的答案，但发现它们无法正常工作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T23:49:49.530

你不应该这样做：

> [self.window setRootViewController:navigationController];

代替：

> [self.window setRootViewController:navigationController.topViewController];

# android - 禁用时操作栏中的半透明图标：仅在我的手机上？

> ID：13073630
> 
> 赞同：5
> 
> 时间：2012-10-25T17:02:27.643
> 
> 标签：android, icons, actionbarsherlock, menuitem, translucency

我在我的应用程序上使用 ActionBarSherlock，当我在 ActionBar 中禁用某些 MenuItem 时，我的手机上的图标变成半透明（HTC One X 运行股票 Android 4.0.4），但我在任何其他手机或模拟器中都没有看到这种行为。

我是否正确假设此行为不是本机 ActionBar 的默认行为？不过我喜欢这个主意...它警告用户 MenuItem 由于某种原因未启用（在我的情况下，它是一个保存按钮，如果至少有一个字段未填写，它会禁用该按钮）。

我正在考虑为自己提供一个半透明的图标，并在 MenuItem 被禁用时手动设置它。这适用于每个 Android 版本，无论是否为原生 ActionBar。问题是在我的手机（或任何其他具有相同行为的手机）上，它将是半透明的两倍，我不希望那样。

关于如何正确实现这种效果的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:55:11.887

我认为问题出在主题上，您正在应用默认主题。因此，HTC 会覆盖默认主题资源，我认为您必须创建一个自定义主题并将 item_background 更改为 sdk 资源上的默认主题。

```
<item name="selectableItemBackground">@android:drawable/item_background</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:46:02.833

您必须将背景设置为独立于主题。在 .xml 文件中，您可以设置：

```
android:background="?android:attr/listSelector" 
```

在您想要颜色的视图上。

# cucumber - 无法运行 Cuke4Nuke

> ID：13073631
> 
> 赞同：1
> 
> 时间：2012-10-25T17:02:37.487
> 
> 标签：cucumber

我已安装、确认安装并按照以下链接中提到的步骤操作：

[http://gojko.net/2010/01/01/bdd-in-net-with-cucumber-cuke4nuke-and-teamcity/](http://gojko.net/2010/01/01/bdd-in-net-with-cucumber-cuke4nuke-and-teamcity/)

[http://cuke4ninja.com/sec_hello_world_net.html](http://cuke4ninja.com/sec_hello_world_net.html)

一旦我尝试运行，`Cuke4Nuke bin\debug\Cuke4NukeExample.dll` 我会收到一条错误消息。

我尝试在没有参数的情况下单独运行 Cuke4Nuke，但看到的错误消息与`bin\debug\Cuke4NukeExample.dll`

**这是错误消息：**

> E:\Visual Projects>cuke4nuke C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5-x86-mingw32/lib/ffi/library.rb:249 :in `attach_function': Function '_get_errno' not found in [msvcrt.dll] (FFI::Not FoundError) from C:/Ruby193/lib/ruby/gems/1.9.1/gems/win32-process-0.7.0/lib/win32/p rocess/functions.rb:12:in`attach_pfunc' 来自 C: /Ruby193/lib/ruby/gems/1.9.1/gems/win32-process-0.7.0/lib/win32/p rocess/functions.rb:64:in `<module:Functions>' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/win32-process-0.7.0/lib/win32/p rocess/functions.rb:8:in`'来自 C:/Ruby193/lib/ruby/site_ruby/ 1.9.1/rubygems/custom_require.rb:55:in `require' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:i n` require' 来自 C:/Ruby193/lib/ruby/gems/1.9.1/gems/win32-process-0.7.0/lib/win32/p rocess.rb： 1:in `<top (required)>' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:i n` require' 来自 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/cuke4nuke-0.4.0/lib/cuke4nuke/m ain.rb:4:in`'来自 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require .rb:55:in `require' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:i n` 需要'来自 C:/Ruby193/lib/ruby/gems/1.9.1/gems/cuke4nuke-0.4.0/bin/cuke4nuke:4 :in`<top (required)>' from C:/Ruby193/bin/cuke4nuke:23:in`从 C:/Ruby193/bin/cuke4nuke:23:in 加载'

谢谢

# android - 即使权限设置和外部存储处于 MEDIA_MOUNTED 状态，也无法写入 sdcard

> ID：13073633
> 
> 赞同：5
> 
> 时间：2012-10-25T17:02:47.533
> 
> 标签：android, io

尝试将文件写入 sdcard 时出现`java.io.FileNotFoundException: /filename (Read-only file system)`异常。可悲的是，这里发布的许多解决方案都没有帮助我。我已设置权限，外部存储处于 MEDIA_MOUNTED 状态。这是有问题的代码：

```
Log.i("STORAGE", Environment.getExternalStorageState());
OutputStream fos = new FileOutputStream(Helpers.StripExtension(filePath) + ".blk");
fos.write(digest.getBytes());
fos.close(); 
```

`filePath`来自文件代码。我要做的是从选定的文件中读取，然后保存另一个具有相同名称、不同扩展名和其中一些内容的文件。

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="mypackagename"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:theme="@android:style/Theme.Black" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

日志猫：

```
 10-25 18:24:34.330: I/FILEPATH(1989): /mnt/sdcard/Untitled.txt
 10-25 18:24:34.360: I/STORAGE(1989): mounted
 10-25 18:24:34.360: W/System.err(1989): java.io.FileNotFoundException: /mnt/sdcard/Untitled.blk (Read-only file system)
 10-25 18:24:34.360: W/System.err(1989):    at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
 10-25 18:24:34.360: W/System.err(1989):    at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
 10-25 18:24:34.360: W/System.err(1989):    at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
 10-25 18:24:34.360: W/System.err(1989):    at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
 10-25 18:24:34.360: W/System.err(1989):    at java.io.FileOutputStream.<init>(FileOutputStream.java:144) 
```

我在真实设备上运行它，而不是 avd。我已经尝试重新启动我的设备并重建项目。OfficeSuite 等应用程序可以毫无问题地写入此位置。

设备：搭载 Android 2.3.7 (CyanogenMod 7) 的 ZTE Blade

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:19:59.933

试试这个：

```
File file = new File(Helpers.StripExtension(filePath) + ".blk");
file.createNewFile();
FileOutputStream fos = new FileOutputStream(file);
fos.write(digest.getBytes());
fos.close(); 
```

如果这不起作用，我认为您在从原始文件（`digest.getBytes()`）中读取时可能会遇到问题。在此发布更多代码，我们可以从那里开始

编辑：

如果它不允许您写入所选目录，请尝试使用如下路径进行测试：

```
File file = new File(Environment.getExternalStorageDirectory() + "test_file.blk"); 
```

它应该可以正常工作，您可能只是没有对您正在使用的目录的写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:33:04.193

试试这个：

```
File file = new File(filePath);
File parent = file.getParentFile();
if (!parent.exists() && !parent.mkdirs()) {
      return;
}

file = new File(Helpers.StripExtension(filePath) + ".blk");
OutputStream fos = new FileOutputStream(file);
fos.write(digest.getBytes());
fos.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:31:32.093

太好了，我前段时间遇到了完全相同的问题。缺少路径分隔符（或任何名称）。

```
File file = new File(Environment.getExternalStorageDirectory() + "test_file.blk"); 
```

没用，但是

```
File file = new File(Environment.getExternalStorageDirectory() + "/test_file.blk"); 
```

表现良好

还：

```
FileWriter f = new FileWriter(Environment.getExternalStorageDirectory().getPath()+ "/foobar");
f.append("stuff");
f.close(); 
```

工作正常等。
我认为异常说它是只读的，因为根文件系统确实是只读的。

注意：
`java.io.FileNotFoundException: /foobar (Read-only file system)`意味着我们正在写入系统根目录
`java.io.FileNotFoundException: /mnt/sdcard/foobar (Read-only file system)`意味着 sdcard 根目录（我没有得到这个异常，这只是一个例子）

**tl; dr**错误的路径

# iphone - 无法在 iOS 中创建提醒日历

> ID：13073634
> 
> 赞同：10
> 
> 时间：2012-10-25T17:02:48.890
> 
> 标签：iphone, ios, objective-c, xcode, calendar

我正在尝试创建一个提醒日历，以便添加和删除提醒。它实际上在我使用的设备（iPhone 5/4S/4）上运行良好，但在某些仍然是 iPhone 的客户端设备上 - 我在下面收到关于该帐户不支持提醒的错误。

这是工作流程：

```
* Init the event store.
* Request permission (check its granted for Reminder types) (iOS6+) for lower we just init.
* Create a new calendar, local storage, type = Reminder
* Save calendar to get its Identifier. 
```

大部分时间都有效，这出现在某些设备上 -

```
Error Domain=EKErrorDomain Code=24 “That account does not support reminders.” 
```

在设置、隐私、提醒下授予和检查权限。我在文档中找不到任何关于您会收到此错误的条件的信息。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T16:37:55.400

不知道你是否还需要这个，但这是我遇到的。

首先，我很确定不能在具有本地来源的日历上设置提醒。我不断收到“该帐户不支持提醒”。即使在提交到事件存储之前在日历上设置了所有非只读属性之后，它仍然无法正常工作。来源需要是 calDav。然后我尝试了 Devfly 的响应，它也没有工作，但出于不同的原因。它一直在获取我的 gmail 日历，它不允许设置提醒（我认为它实际上只用于事件和提醒）。所以我使用下面的代码来获取实际的 iCloud 源

```
 for (EKSource *source in sources) {
        NSLog(@"source %@",source.title);
        if (source.sourceType ==  EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"]) {
            localSource = source;
            break;
        }
    } 
```

在我的新提醒日历上设置此来源对我有用。希望它可以帮助某人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T20:32:20.393

首先，只是检查一下：您正在创建一个“新日历”（整个日历），而不仅仅是一个“新提醒”，对吧？

第二：你用的是iOS6吗？提醒（在 EventKit 中）仅从 iOS6 开始可用：[链接](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html)

正如 Jesse Rusak 评论的那样，发生这种情况是因为您可能在不支持提醒的帐户/源中创建新日历。您如何创建新日历？你设置源属性吗？

您可以尝试的第一件事是循环所有来源，直到找到合适的来源。EKSourceTypeLocal 支持提醒。iCal 也是。这里是 EKSourceType 的列表

```
typedef enum {
   EKSourceTypeLocal,
   EKSourceTypeExchange,
   EKSourceTypeCalDAV,
   EKSourceTypeMobileMe,
   EKSourceTypeSubscribed,
   EKSourceTypeBirthdays
} EKSourceType; 
```

找一个合适的：

```
// find local source for example
EKSource *localSource = nil;
for (EKSource *source in store.sources)
{
    if (source.sourceType == EKSourceTypeLocal)  // or another source type that supports
    {
        localSource = source;
        break;
    }
} 
```

然后，创建新的日历设置正确的来源

```
EKCalendar *cal;
if (identifier == nil)
{
    cal = [EKCalendar calendarForEntityType:EKEntityTypeReminder eventStore:store];
    cal.title = @"Demo calendar";
    cal.source = localSource;
    [store saveCalendar:cal commit:YES error:nil];
} 
```

试着让我知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T13:28:01.407

解决我的问题的方法不是将日历保存到本地源，而是保存到`EKSourceTypeCalDAV`（iCloud）。它可以工作，并且可以在所有设备上同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T17:04:48.607

本地商店可能不支持提醒。如果启用了 iCloud，这是可以重现的。

这是我能找到的最可靠的解决方案，无需硬编码任何假设：

```
 let calendar = EKCalendar(forEntityType: .Reminder, eventStore: eventStore)

    if eventStore.sources.count == 0 { // reproducible after Reset Content and Settings
        calendar.source = EKSource()
    }
    else {
        calendar.source = eventStore.defaultCalendarForNewReminders().source
    }

    eventStore.saveCalendar(calendar, commit: true) 
```

# javascript - 裁剪画布/导出具有特定宽度和高度的 html5 画布

> ID：13073647
> 
> 赞同：14
> 
> 时间：2012-10-25T17:03:55.983
> 
> 标签：javascript, image, html, canvas, crop

有数百个教程，介绍如何在画布上通过 drawImage() 裁剪图像。

```
context.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight); 
```

但是，我有一个可以填充用户浏览器的画布。通过将画布导出为图像，我只想从 (0|0) 导出 640px*480px 的区域。

问题：我如何告诉 javascript 只使用 640*480 的画布作为 toDataURL()？

这是我到目前为止所拥有的：

```
$("#submitGraphic").click( function(){
    var canvas = document.getElementsByTagName("canvas");
    // canvas context
    var context = canvas[0].getContext("2d");
    // get the current ImageData for the canvas
    var data = context.getImageData(0, 0, canvas[0].width, canvas[0].height);
    // store the current globalCompositeOperation
    var compositeOperation = context.globalCompositeOperation;
    // set to draw behind current content
    context.globalCompositeOperation = "destination-over";
    //set background color
    context.fillStyle = "#FFFFFF";
    // draw background/rectangle on entire canvas
    context.fillRect(0,0,canvas[0].width,canvas[0].height);

    // not working, seems to clear the canvas? browser hangs?
    // seems that I can click a white image in the background
    /*canvas[0].width = 640;
    canvas[0].height = 480;*/

    // not working either
    /*canvas[0].style.width  = '640px';
    canvas[0].style.height = '480px';*/

    // not working at all
    /*context.canvas.width = 640;
    context.canvas.height = 480;*/

    // write on screen
    var img = canvas[0].toDataURL("image/png");
    document.write('<a href="'+img+'"><img src="'+img+'"/></a>');
}) 
```

PS：我不想调整大小或缩放，只是剪裁/裁剪到固定窗口。[在这里](https://stackoverflow.com/questions/3293727/how-to-change-dimensions-of-html5-canvas-without-it-scaling-content)，我读到您只指定 canvas.width 和 canvas.height - 但这会清除画布。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-25T18:21:47.660

最好的方法是创建一个临时画布以从当前画布上绘制。用户永远不会看到这个临时画布。然后你只需要`toDataUrl()`在临时画布上使用。

**[现场演示](http://jsfiddle.net/wttAu/2/)**

```
$("#submitGraphic").click( function(){
    var canvas = document.getElementsByTagName("canvas");
    // canvas context
    var context = canvas[0].getContext("2d");
    // get the current ImageData for the canvas
    var data = context.getImageData(0, 0, canvas[0].width, canvas[0].height);
    // store the current globalCompositeOperation
    var compositeOperation = context.globalCompositeOperation;
    // set to draw behind current content
    context.globalCompositeOperation = "destination-over";
    //set background color
    context.fillStyle = "#FFFFFF";
    // draw background/rectangle on entire canvas
    context.fillRect(0,0,canvas[0].width,canvas[0].height);

    var tempCanvas = document.createElement("canvas"),
        tCtx = tempCanvas.getContext("2d");

    tempCanvas.width = 640;
    tempCanvas.height = 480;

    tCtx.drawImage(canvas[0],0,0);

    // write on screen
    var img = tempCanvas.toDataURL("image/png");
    document.write('<a href="'+img+'"><img src="'+img+'"/></a>');
})​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-06T14:24:06.533

我创建了一个简单的通用函数，它通过返回一个带有裁剪区域的新画布来进行裁剪。虽然它不会“就地”进行裁剪，但它很简单。 *记得在调用后切换到新的上下文。*

```
const cropCanvas = (sourceCanvas,left,top,width,height) => {
    let destCanvas = document.createElement('canvas');
    destCanvas.width = width;
    destCanvas.height = height;
    destCanvas.getContext("2d").drawImage(
        sourceCanvas,
        left,top,width,height,  // source rect with content to crop
        0,0,width,height);      // newCanvas, same size as source rect
    return destCanvas;
} 
```

例如...

```
 let myCanvas = document.createElement('canvas');
    myCanvas.width = 200;
    myCanvas.height = 200;
    let myContext = myCanvas.getContext("2d");
    // draw stuff...
    myCanvas = cropCanvas(myCanvas,50,50,100,100);
    myContext = myCanvas.getContext("2d"); 
    // now using the cropped 100x100 canvas 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:21:59.840

您制作第二个屏幕外画布，将图像从第一个画布复制到第二个画布（使用第一个作为图像对象），然后导出第二个画布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-05T18:23:23.750

纯 html5 画布裁剪：

```
$('document').ready( function(){
const divOffset = 1
var x1,x2,y1,y2, xDif, yDif = 0;
var isSelection, 
    isBottomRight, 
    isTopRight, 
    isTopLeft, 
    isBottomLeft = false

var r = document.getElementById('source').getBoundingClientRect();
var pos = [0, 0];
pos[0] = r.left; 
pos[1] = r.top; //got position coordinates of canvas

var sel = document.getElementById('sel')
var canvasSource = document.getElementById("source");
var ctxSource = canvasSource.getContext("2d"); 

var img = new Image()
img.src = "http://bohdaq.name/assets/localImage.jpg"
img.onload = function(){
  ctxSource.drawImage(img, 0, 0)
}

$( "#source" ).mousedown(function(event) {
   isSelection = true

   x1 = event.pageX - pos[0]
   y1 = event.pageY - pos[1]

   sel.style.setProperty('display', 'block')

   sel.style.setProperty('left', event.pageX + "px")
   sel.style.setProperty('top', event.pageY + "px")

   sel.style.setProperty('width', '0px')
   sel.style.setProperty('height', '0px')
});

$( "#source" ).mouseup(function(event) {
   isSelection = false
   if(isBottomRight){
     x2 = event.pageX - pos[0]
     y2 = event.pageY - pos[1]

     xDif = x2-x1
     yDif = y2-y1 
   } else if (isBottomLeft){
     y2 = event.pageY - pos[1]
     yDif = y2 - y1 

     xDif = x1 - x2
     x1 = x1 - xDif

   } else if(isTopRight){
     x2 = event.pageX - pos[0]
     xDif = x2 - x1 
     yDif = y1 - y2
     y1 = y1 - yDif         
   } else if (isTopLeft){
     xDif = x1 - x2
     x1 = x1 - xDif
     yDif = y1 - y2
     y1 = y1 - yDif         
   }
   sel.style.setProperty('display', 'none')
   crop(x1, y1, xDif, yDif)
});

$('#source').mousemove(function(event){
  if(isSelection){
    x2 = event.pageX - pos[0]
    y2 = event.pageY - pos[1]
    if(x2>x1 && y2>y1){ //moving right bottom selection
      isBottomRight = true
      isBottomLeft = false
      isTopLeft = false
      isTopRight = false

      xDif = x2 - x1
      yDif = y2 - y1 

      sel.style.setProperty('width', xDif + 'px')
      sel.style.setProperty('height', yDif + 'px')
    } else if(x2<x1 && y2>y1){ //moving left bottom selection
      isBottomLeft = true
      isTopLeft = false
      isTopRight = false
      isBottomRight = false

      xDif = x1 - x2
      yDif = y2 - y1 

      sel.style.setProperty('left', x2 + 'px')
      sel.style.setProperty('width', xDif + 'px')
      sel.style.setProperty('height', yDif + 'px')

    } else if(x2>x1 && y2<y1){
      isTopRight = true
      isTopLeft = false
      isBottomLeft = false
      isBottomRight = false

      xDif = y1 - y2
      yDif = x2 - x1 

      sel.style.setProperty('top', y2 + 'px')
      sel.style.setProperty('width', yDif + 'px')
      sel.style.setProperty('height', xDif + 'px')
    } else if (x2<x1 && y2<y1){
      isTopLeft = true
      isTopRight = false
      isBottomLeft = false
      isBottomRight = false

      yDif = y1 - y2 
      xDif = x1 - x2

      sel.style.setProperty('left', x2 + pos[0] + divOffset + 'px')
      sel.style.setProperty('top', y2 + pos[1] + divOffset + 'px')
      sel.style.setProperty('width', xDif  + 'px')
      sel.style.setProperty('height', yDif  + 'px')
    }
 }
})

function crop(x, y, xDif, yDif){
    canvasSource.width = xDif
    canvasSource.height = yDif
    ctxSource.drawImage(img, x, y, xDif, yDif, 0, 0, xDif, yDif);
}

}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-27T11:19:08.253

基于@GarySkiba 的回答：

```
// crop canvas function
const cropCanvas = (
  canvas: any,
  x: number,
  y: number,
  width: number,
  height: number
) => {
  // create a temp canvas
  const newCanvas = document.createElement('canvas');
  // set its dimensions
  newCanvas.width = width;
  newCanvas.height = height;
  // draw the canvas in the new resized temp canvas 
  newCanvas
    .getContext('2d')!
    .drawImage(canvas, x, y, width, height, 0, 0, width, height);
  return newCanvas
}; 
```

像这样使用它：

```
// get canvas from somewhere
const canvas = ....;
// crop the left top 50x50 rect
const newCanvas = cropCanvas(canvas, 0, 0, 50, 50 );
// get the relative image
newCanvas.toDataURL('image/png') 
```

# sql-server-2008 - Sql server 查询以获取表更改结果

> ID：13073651
> 
> 赞同：-1
> 
> 时间：2012-10-25T17:04:10.997
> 
> 标签：sql-server-2008

我有一张如下表

```
ClientID        AccountNumber   BalanceOnDay0       BalanceOnDay1   BalanceOnDay2       BalanceOnDay3       BalanceOnDay4       BalanceOnDay5       BalanceOnDay6       BalanceOnDay7
ABC1            123             10                  NULL            NULL                NULL                NULL                NULL                NULL                NULL    
ABC1            123             NULL                NULL            NULL                NULL                NULL                NULL                NULL                3 
```

我希望看到如下结果。

```
ClientID        AccountNumber   BalanceOnDay0       BalanceOnDay1   BalanceOnDay2       BalanceOnDay3       BalanceOnDay4       BalanceOnDay5       BalanceOnDay6       BalanceOnDay7
ABC1            123             10                  NULL            NULL                NULL                NULL                NULL                NULL                3 
```

请建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:09:04.850

`SUM()`如果您想组合余额值，如果您有多个记录，则可以使用：

```
select clientid,
  accountnumber,
  sum(BalanceOnDay0) BalanceOnDay0, 
  sum(BalanceOnDay1) BalanceOnDay1, 
  sum(BalanceOnDay2) BalanceOnDay2,
  sum(BalanceOnDay3) BalanceOnDay3,
  sum(BalanceOnDay4) BalanceOnDay4, 
  sum(BalanceOnDay5) BalanceOnDay5,
  sum(BalanceOnDay6) BalanceOnDay6, 
  sum(BalanceOnDay7) BalanceOnDay7
from table1
group by clientid, accountnumber 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e487f/1)

# apache-flex - 为什么我的身高变化不参与状态变化的过渡？

> ID：13073657
> 
> 赞同：0
> 
> 时间：2012-10-25T17:04:38.530
> 
> 标签：apache-flex, flex4, flex-spark

我的 Spark 组件上有一个过渡设置。从状态 1 到状态 2 的变化之一是高度的变化。该值立即得到应用。这是我的代码：

```
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" 
         height="200" height.state2="400">

    <s:states>
        <s:State name="state1"/>
        <s:State name="state2"/>
    </s:states>

    <s:transitions>

        <s:Transition fromState="state1" toState="state2" >
            <s:Sequence duration="2000" >
                <s:Rotate3D target="{this}" 
                            angleYFrom="0" angleYTo="90" 
                            startDelay="0" 
                            suspendBackgroundProcessing="true"
                            autoCenterTransform="true" />
                <s:SetAction target="{this}" property="height"/>
                <s:Rotate3D target="{this}" 
                            angleYFrom="-90" angleYTo="0" 
                            startDelay="0" 
                            suspendBackgroundProcessing="true"
                            autoCenterTransform="true" />
            </s:Sequence>
        </s:Transition>
    </s:transitions>

    <s:Rect width="100%" height="100%" >

        <s:fill>
            <s:SolidColor color="#ff0000"/>
        </s:fill>
    </s:Rect>
</s:Group> 
```

然后在我的主应用程序中：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               minWidth="955" minHeight="600" xmlns:local="*" 
               >

    <local:MyGroup id="group" verticalCenter="0" horizontalCenter="0" width="400"/>

    <s:Button label="Change states" click="group.currentState=group.currentState=='state1'?'state2':'state1';"/>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:11:49.933

解决方案是使用explicitHeight 属性而不是高度。这是因为高度是 Flex 使用的特殊属性符号。

从 SetProperty PSEUDONYMS 属性：

```
/**
 *  @private
 *  This is a table of pseudonyms.
 *  Whenever the property being overridden is found in this table,
 *  the pseudonym is saved/restored instead.
 */
private static const PSEUDONYMS:Object =
{
    width: "explicitWidth",
    height: "explicitHeight",
    currentState: "currentStateDeferred"
}; 
```

所以如果你设置了高度，那么它实际上是设置的explicitHeight。请记住另一个名为 RELATED_PROPERTIES 的相关属性。它包含有关百分比宽度和高度以及显式宽度和高度信息的附加数据。

有关详细信息，请参阅 mx.states.SetProperty。

为了解决这种情况下的问题，我们改变了这个：

```
 <s:SetAction target="{this}" property="height"/> 
```

对此：

```
 <s:SetAction target="{this}" property="explicitHeight"/> 
```

# linux - 难以解析输入参数

> ID：13073658
> 
> 赞同：0
> 
> 时间：2012-10-25T17:04:50.517
> 
> 标签：linux, bash, shell

我的 shell 的输入应遵循以下签名。

myscript.sh var1 var2 [-o var3] [-r var4]。

-o 和 -r 是可选输入，这些选项可以出现在任何位置（在 var1 和 var 2 之间或在开始/结束处），但如果指定了 var 3，则 var3 将始终在 var4 之前。var1 也将在 var 2 之前。

```
#!/bin/bash

case "$#" in
([01]) echo "Usage: $0 var1 var2 [-o val3] [-r val4]" >&2; exit 1;;
esac

VAR1="$1"
VAR2="$2" 
VAR3=
VAR4=

while getopts ":o:r:" opt; do
  case $opt in
    o)
     VAR3=$OPTARG
      ;;
    r)
     VAR4=$OPTARG 
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
    :)
      echo "Option -$OPTARG requires an argument." >&2
      exit 1
      ;;
  esac
done

shift $(( OPTIND - 1 ))

    if [ -z "${VAR3+xxx}" ] && [ -z "${VAR4+xxx}" ];
    then
    echo $1 $2;
    elif [ -z "${VAR3+xxx}" ]; 
    then
    echo $1 $2 $VAR4;
    elif [ -z "${VAR4+xxx}" ];
    then 
    echo $1 $2 $VAR3;
    else
    echo $1 $2 $VAR3 $VAR4;
    fi 
```

**如何处理可选参数在 var1 & var2 之间的情况**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:12:12.477

您的调用约定与“选项和参数优先”的经典调用约定作斗争。因此，您将需要执行以下操作：

```
case "$#" in
([01]) echo "Usage: $0 var1 var2 [-o val1] [-r val2]" >&2; exit 1;;
esac

VAR1="$1"
VAR2="$2"
shift 2

# Now use your getopts loop... 
```

# xml - 有没有办法从命令行向 Maven POM 添加依赖项？

> ID：13073661
> 
> 赞同：5
> 
> 时间：2012-10-25T17:05:00.487
> 
> 标签：xml, maven, command-line

我可以使用命令或 Maven 插件从命令行向 POM 添加依赖项吗？

例如，我想输入如下内容：

```
mvn lazy:add-dependency -DgroupId=com.mycompany -DartifactId=derp -Dversion=1.0 
```

并让它修改当前目录中 POM 的依赖项部分：

```
<dependencies>
    ... other dependencies ...
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>derp</artifactId>
        <version>1.0</version>
    </dependency>
</dependencies> 
```

添加上述 XML 的外部命令也可以使用，但我更喜欢不需要我编写 XSL 样式表的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T13:56:04.510

不确定你是否解决了这个问题，但我过去用 xsltproc 做过类似的事情（我知道你说过不要使用它，但我从来没有找到另一种方法）。

```
function merge_xml ()
{
TEMP_XML1="some-temp-file1.xml"
TEMP_XML2="some-temp-file2.xml"
cat > $TEMP_XML1
cp $1 $TEMP_XML2

echo "Merging XML stream from $1 into $2" >&2

xsltproc --stringparam with "$TEMP_XML1" merge.xslt "$TEMP_XML2" | tidy -xml -indent -quiet -wrap 500 -output $2
} 
```

merge.xslt 可以在这里找到[http://www2.informatik.hu-berlin.de/~obecker/XSLT/merge/merge.xslt](http://www2.informatik.hu-berlin.de/~obecker/XSLT/merge/merge.xslt)

然后调用 Bash 函数：

```
merge_xml $PROJECT_ROOT/content/pom.xml $PROJECT_ROOT/content/pom.xml << EOF 
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<dependencies>
    <dependency>
      <groupId>com.company</groupId>
      <artifactId>my-artifact</artifactId>
      <version>1.0-SNAPSHOT</version>
      <classifier>jar</classifier>
    </dependency>
</dependencies>
</project>
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:15:16.697

I'm not aware of an existing Plugin that does this, but it could be fairly straightforward to [implement your own Maven plugin leveraging Ant](http://www.sonatype.com/books/mcookbook/reference/ch04s04.html) and [XMLTask](http://www.oopsconsultancy.com/software/xmltask/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T18:46:18.443

按照安德鲁的评论：

使用 sed 的示例：

```
sed 's/<dependencies>/<dependencies>\r\n<!--ghost-->\r\n<dependency>\r\n<groupId>org.ghost4j<\/groupId>\r\n<artifactId>ghost4j<\/artifactId>\r\n<version>0.5.0<\/version>\r\n<\/dependency>\r\n<!--ghost-->/g' pom.xml > pom2.xml 
```

将依赖项标记替换为依赖项标记，后跟新依赖项（在列表中首先插入新依赖项。

使用新依赖项创建一个新文件 pom2.xml（可以使用以下方法更改以覆盖原始文件： pom.xml > pom.xml

# oop - 是否有一种通用/标准/公认的方式来模拟 GPS 实体（航路点、航迹）？

> ID：13073663
> 
> 赞同：5
> 
> 时间：2012-10-25T17:05:03.750
> 
> 标签：oop, language-agnostic, gps, data-modeling

这个问题与地理空间信息系统的知识有些重叠，但我认为它属于这里而不是 GIS.StackExchange

周围有很多应用程序处理具有非常相似对象的 GPS 数据，其中大多数由[GPX 标准](http://www.topografix.com/GPX/1/1/)定义。这些对象将是路线、轨迹、航路点等的集合。一些重要的程序，如 GoogleMaps，以 KML 格式序列化或多或少相同的实体。还有很多其他在线地图应用程序（ridewithgps、strava、runkeeper 等等）以不同的方式处理这种数据，但允许或多或少地对数据进行等效的“操作”。这些操作的示例是：

*   用鼠标直接操作轨迹/轨迹点（包括在地图上绘制）；
*   基于时间和/或距离的合并和拆分；
*   用 DEM/SRTM 高程代替 GPS 采集的高程；
*   计算部分轨道的属性（总上升、平均速度、距离、经过的时间）；

有一些小型库（如[GpxPy](https://github.com/tkrajina/gpxpy/blob/master/gpxpy/gpx.py)）尝试对这些对象及其方法进行建模，以理想情况下允许封装的、可能与语言无关的库/API。

事实是：这个问题已经存在了足够长的时间以允许出现“共同接受的标准”，不是吗？另一方面，大多数 GIS 软件非常专业地面向地理空间分析、地形和制图应用程序，而典型的旅行记录和旅行计划应用程序似乎更面向消费者爱好者，这可能解释了不同的方式相当分散项目/应用程序处理和建模问题。

因此，考虑到所说的一切，问题是：目前或正在计划中，是否有一种标准方法来规范地以面向对象的方式对最常用的 GPS/Tracklog 实体及其规范属性和方法进行建模？

有 GPX 模式，它非常接近我的想象，但它只包含对象和属性，而不包含方法。

任何信息将不胜感激，谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:16:42.187

据我所知，在存储/操作/处理“路由”数据时，没有标准库、接口，甚至没有一套既定的最佳实践。我们在 Ride with GPS 上为这些问题付出了很多努力，我知道其他解决相关问题的站点也可以这样说。我希望有一个标准，并愿意与某人一起工作。

GPX 没问题，似乎是一种标准……至少在您开始处理 GPX 文件并发现每个人都同时向格式添加了自己的自定义扩展来处理心率、节奏、功率等数据之前。此外，没有将路线点与跟踪点相关联的标准方法。路线的“面包屑轨迹”表示为一系列 trkpt 元素，而路线点（例如“左转进入第 4 街”）则表示为一系列单独的 rtept 元素。理想情况下，您希望将给定的路线点与特定的跟踪点相关联，而不是仅仅为路线点提供纬度和经度。如果您的路径在同一条街道上进行了多次循环，则可能会在路线点应沿路线连接的位置产生一些歧义。

KML 和 Garmin 的 TCX 格式与 GPX 类似，各有优缺点。最后，这些格式实际上仅用于在程序之间传输数据。它们没有解决如何在程序中表示数据的问题，或者可以对数据执行什么类型的操作。

我们将轨迹数据存储为对象数组，其键对应于不同的属性，例如纬度、经度、海拔、开始时间、开始距离、速度、心率等。此外，我们沿路线存储一些元数据以指定每个部分的详细信息。在解析我们的跟踪点数组时，我们使用此元数据将 Route 拆分为一系列 Segment。段可以拆分、连接、移除、附加、反转等。它们还封装了跟踪点生成的方法，无论是通过沿直线插入点，还是请求表示端点之间方向的路径。这些方法允许相当直接地实现拖放编辑和其他常见操作。Route 对象可用于处理涉及多个段的操作。一个例子是，如果您有一条由路段组成的路线 - 一些行车路线、直线、步行路线等等 - 并且想要反转路线。您可以要求每个段自行反转，在此过程中保持其设置。在更高的层次上，我们使用 Map 类来连接接口，向 Route(s) 发送命令，并保持一系列快照或转换函数正确更新，以支持合理的撤消/重做。

路线操纵和生成是目标之一。其他人正在汇总汇总统计信息，正在构建数据以实现有效的可视化/交互。任何可以接收数据并生成折线图的系统都已在一定程度上解决了这些问题。这里不完全是新领域。路线数据的一个有趣特征是，您通常会为 x 轴选择两个变量：距起点的时间和距起点的距离。两者都是单调递增的，并且都提供了有用但不同的数据解释。查看带有 x 轴距离的高程图将显示骑自行车上下山是对称的。使用 x 轴时间，上坡部分相当宽。这不仅仅是在图表上可视化数据，它还转化为您在将数据处理为汇总统计数据时所做的决策。一些加权平均值基于时间，一些基于距离是有意义的。您最终想要的操作是最小、最大、加权（基于您选择的独立 var）平均值、过滤点和执行过滤的最小/最大/平均值的能力（仅使用您移动的点、忽略异常值等） )、不同的平滑函数（例如帮助计算总高程增益）、地图/减少功能的基本概念（我在 20-30 英里/小时之间花费了多少时间等），以及涉及一些插值的固定窗口移动平均值。如果您想确定您最快的 10 分钟或 10 分钟的最高平均心率等，则后者是必要的。最后，您

如果您有兴趣，可以在此处查看所有这些操作的示例：[http ://ridewithgps.com/trips/964148](http://ridewithgps.com/trips/964148)

可以将鼠标悬停在底部的图表上，拖动选择以放大。x 轴有一个链接可以在距离/时间之间切换。在底部的左侧边栏中，您会看到 30 秒和 60 秒的最佳效果 - 这些都是通过固定窗口移动平均线和插值完成的。在右侧边栏上，单击“指标”选项卡。拖动选择以放大图表上的某个部分，您将看到所有指标更新以反映您的选择。

乐于回答任何问题，或与任何人一起就其中一些想法的某种标准或开放实施进行合作。

这可能不是您正在寻找的答案，但我想我会提供一些关于我们如何在 Ride with GPS 上做事的细节，因为我们不知道您似乎正在寻找任何真正的标准。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:12:40.737

在进行了一些更深入的研究之后，我觉得有义务为记录和帮助未来的人们寻找这个，提一下两个实体在这个主题上所做的非常详尽的工作，有时是协同工作的：ISO 和 OGC。

来自 ISO（国际标准组织）的“ [TC 211 - 地理信息/地理信息](http://www.iso.org/iso/home/store/catalogue_tc/catalogue_tc_browse.htm?commid=54904)”部分几乎包含了所有内容。

来自 OGS（开放地理空间联盟）的[抽象规范](http://www.opengeospatial.org/standards/as)非常广泛，同时是对 ISO 的冗余和补充。

我不确定它是否包含与提议的应用程序相关的对象方法（gps 跟踪和航点分析和操作），但可以肯定的是，这些文档中包含的核心概念相当扎实。UML 是他们选择的模式表示。

* * *

**ISO 6709** “[...] 指定了坐标的表示，包括纬度和经度，用于数据交换。它还指定了使用纬度和经度以外的坐标类型表示水平点位置。它还指定了高度的表示和可以与水平坐标相关联的深度。表示包括测量单位和坐标顺序。

**ISO 19107** “指定了用于描述地理特征的空间特征的概念模式，以及与这些模式一致的一组空间操作。它处理矢量几何和拓扑最多三个维度。它定义了用于访问、查询、管理的标准空间操作、处理和数据交换空间（几何和拓扑）对象的地理信息，这些对象具有最多三个拓扑维度，嵌入最多三个轴的坐标空间中。”

* * *

如果我发现新的东西，我会回来编辑它，包括可用的链接。

# .net - 正则表达式获取管道之间的第二个和第三个变量

> ID：13073665
> 
> 赞同：0
> 
> 时间：2012-10-25T17:05:11.230
> 
> 标签：.net, regex

[在此处输入图像描述](http://i.stack.imgur.com/ntndK.png)**示例文本：**

> 工程 | AB7407 | 007412665 | 杰基布朗 | 施工图

我需要 2 个正则表达式。在第一个管道 AB7407 之后可以给我第二个值，第二个 Redex 可以在第二个管道 007412665 之后给我第三个值

**我尝试了以下操作，但它给了我示例文本：**

```
^(?<field1>[^|]+),(?<field2>[^|]+),(?<field3>[^|]+),(?<field4>[^|]+),(?<field5>[^|]+)$ 
```

**结果：**

> 工程 | AB7407 | 007412665 | 杰基布朗 | 施工图

谁能建议我的正则表达式发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:11:36.340

我会这样做：

```
 string original = "Engineering | AB7407 | 007412665 | Jackie Browne | Drawing for Construction";
 string[] split = original.Split('|');
 string firstcode = split[1];
 string secondcode = split[2]; 
```

如果要删除所有前导/尾随空格：

```
string secondcode = split[2].Trim(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:09:49.183

```
Dim x = "Engineering | AB7407 | 007412665 | Jackie Browne | Drawing for Construction"
Dim parts = x.Split(" | ") 
```

`parts(1)`现在包含第二个字符串块，`parts(2)`包含第三个。这是 VB，但 c# 或您使用的任何方法都类似。

要修复您的正则表达式：

```
^(?<field1>[^|]+) \| (?<field2>[^|]+) \| (?<field3>[^|]+) \| (?<field4>[^|]+) \| (?<field5>[^|]+)$ 
```

如果你必须有 2 个正则表达式，

```
(?<=^[^|]+ \| )[^|]+ 
```

匹配第二个块，并且

```
(?<=^(?:[^|]+ \| ){2})[^|]+ 
```

匹配第 3 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:09:59.263

正则表达式是处理此问题的错误方法。`cut -f 2,3 -d '|'`在命令行上将提供您要查找的内容。

任何编程语言都应该有一个字符串拆分函数，它会根据你的管道分隔符将你的字符串转换成一个字符串数组。使用它而不是正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:18:13.070

使用组

```
^(?<field1>.*?)\|(?<field2>.*?)\|(?<field3>.*?)\|(?<field4>.*?)\|(?<field5>.*?)$ 
```

组命名`field2`并`field3`包含您的数据

# .net - $_ TRULY 在 PowerShell 中是什么意思？

> ID：13073669
> 
> 赞同：6
> 
> 时间：2012-10-25T17:05:29.280
> 
> 标签：.net, powershell, scripting

> **可能重复：**
> [$_ 在 powershell 中是什么意思？](https://stackoverflow.com/questions/3494115/what-does-mean-in-powershell)

我已经看过其他人关于同一主题的[问答](https://stackoverflow.com/questions/3494115/what-does-mean-in-powershell)，但对我来说，它并没有回答这个问题。

我知道如何使用 Select-Object、Where-Object、ForEach-Object 等并传入一个脚本块，例如：

```
dir | ForEach-Object { $_.Name } 
```

它返回当前目录中所有文件名的数组。

这类似于 C# 的 Select 扩展方法：

```
Dir.Select(x => x.Name) 
```

但是，上面的 C# 很容易理解，因为我们将一个函数传递给 Select 方法，然后它会为列表中的每个元素执行它。

但是，PowerShell 中的等价物：

```
dir | ForEach-Object { param($x) $x.Name } 
```

不返回任何东西。然而

```
& { param($x) $x.Name } (dir)[0] 
```

按预期工作。

有人可以向熟悉 C# 但不熟悉脚本世界的人解释 $_ 的魔力吗？它是一个特殊的关键字？它只能用于传递给 cmdlet 的脚本块吗？您如何调用一个而不将一个管道传递给 ForEach-Object（或任何其他 cmdlet）？IE：

```
& { $_.Name } (dir)[0] 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T17:37:36.110

`$_`仅在管道的上下文中创建，即将输出对象从一个命令传递到另一个命令的“输入” 。对于管道过滤器（类似于函数），powershell 会自动使用管道的*当前*对象填充`$_`变量。现在我说当前是因为重要的是要注意当多个对象通过管道传递时，过滤器的进程脚本块每个对象执行一次。

 *现在，您可以将管道对象重命名为您的输入参数之一，但您必须告诉 powershell 您正在这样做。例如：

```
# C:\> filter get-name-filt {Param([parameter(ValueFromPipeline=$true)]$x) $x.name}
# C:\> (dir)[0] | get-name-filt 
```

这在命令行上不是很方便，因此 $_ 自动变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T17:38:57.840

是当前`$_`管道项目。

例如：

```
 dir | ForEach-Object { $_.Name } 
```

方法：

1.  运行目录命令
2.  将输出传递给下一个管道命令
3.  ForEach-Object 使用 dir 的输出作为名为 $_ 的变量

由于 的输出`dir`具有属性`.name`，因此流水线的输出`$_`也将具有相同的属性。这只是一种通过管道传递数据的方法*

# c# - WCF Windows 服务消费服务嵌入在 Windows 窗体中

> ID：13073673
> 
> 赞同：0
> 
> 时间：2012-10-25T17:05:54.607
> 
> 标签：c#, wcf, windows-services

我有一个带有 WCF 库的 Windows 服务。在同一台机器上，我有一个嵌入了 WCF 服务的 Windows 窗体应用程序。当我尝试从 Windows 服务使用表单中的服务时，出现了我的问题。

表单中的 WCF 服务具有公开的“basicHttpBinding”端点以及“mexHttpBinding”。我可以使用“WCF 测试客户端”在表单中测试服务，没有任何问题。

在 Windows 服务中，我可以添加对表单服务的服务引用，一切都很好。但是，当我实际运行 Windows 服务并尝试在表单中使用 WCF 服务时，我收到此错误：

> 由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action 'http://tempuri.org/ **IService1 /shutMeDown' 的消息。**这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

看到那里的“IService1”了吗？我很确定这就是问题所在。Windows 服务本身被配置为托管一个名为“Service1”的服务，您可以在下面的`<services>`部分中看到。所以看来我的 app.config 中一定有问题。

我最好的猜测是我`<client>`在 app.config 中的设置方式有问题。似乎，由于某种原因，当我尝试使用表单中的服务时，Windows 服务使用了错误的地址。它使用的是自己服务的地址，而不是表单服务的地址。

以下是我的 Windows 服务中 app.config 的相关部分：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IFormControlService" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:8700/FormControlService"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IFormControlService"
        contract="Form_ServiceReference.IFormControlService" name="BasicHttpBinding_IFormControlService" />
    </client>
    <services>
      <service name="smMonitor_wcfServiceLibrary.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8800/smMonitorService/" />
          </baseAddresses>
        </host>
        <endpoint address="" binding="basicHttpBinding" contract="smMonitor_wcfServiceLibrary.IService1">              
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>            
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>              
          <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True" />
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

我的设置是这样的。我有一个在机器上运行的 Windows 服务。在同一台机器上，我有一个寡妇表格。Windows 窗体公开了一个允许 Windows 服务与之交互的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:50:08.930

我的问题如下。我只`<bindings>`定义了传出。我需要做的是像这样定义传入和传出绑定：

```
 <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService1" />
            <binding name="BasicHttpBinding_IFormControlService" />
        </basicHttpBinding>
    </bindings> 
```

Since the outgoing bindings were not defined, my Windows Service was looking in the `<basicHttpBinding>` and just using the default one.

# php - 它不会从下拉菜单中显示正确的选项详细信息

> ID：13073674
> 
> 赞同：0
> 
> 时间：2012-10-25T17:05:55.270
> 
> 标签：php, pdo, mysqli

我正在尝试检索从课程下拉模块中选择的课程的详细信息，然后显示一个模块下拉菜单，其中列出了属于该课程的所有模块。

我遇到的问题是，可以说我的课程下拉菜单中有这两个选项：

```
INFO101 - Business
INFO102 - ICT 
```

出于某种奇怪的原因，每次我从下拉菜单中选择顶部选项（INFO101）并单击提交按钮时，它总是显示其他课程详细信息（INFO102），从而显示属于该课程而不是其他课程的模块课程。

我的问题是，当我从下拉菜单中提交（INFO101）选项时，为什么它会显示其他课程的信息？

下面是mysqli代码

```
 $sql = "SELECT CourseId, CourseName FROM Course"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

while($sqlstmt->fetch()) 
{ 
$course = $dbCourseId;
$coursename = $dbCourseName; 
$courseHTML .= '<option value="'.$course.'">' . $course . ' - ' . $coursename . '</option>'.PHP_EOL;  
} 

$courseHTML .= '</select>'; 
$courseHTML .= '</form>'; 

?>

<?php
include('noscript.php');
?>

<h1>CREATING A NEW ASSESSMENT</h1>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?><input id="courseSubmit" type="submit" value="Submit" name="submit" /></th>
</tr>
</table>
</form>

<?php
if (isset($_POST['submit'])) {

$submittedCourseId = (isset($_POST['courses']));

$query = "
SELECT cm.CourseId, cm.ModuleId, 
c.CourseName,
m.ModuleName
FROM Course c
INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
JOIN Module m ON cm.ModuleId = m.ModuleId
WHERE
(c.CourseId = ?)
ORDER BY c.CourseName, m.ModuleId
";

$qrystmt=$mysqli->prepare($query);
// You only need to call bind_param once
$qrystmt->bind_param("s",$submittedCourseId);
// get result and assign variables (prefix with db)

$qrystmt->execute(); 

$qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

$qrystmt->store_result();

$num = $qrystmt->num_rows();

if($num ==0){
echo "<p>Sorry, No Course was found with this Course ID '$course'</p>";
} else { 

$dataArray = array();

while ( $qrystmt->fetch() ) { 
// data array
$dataArray[$dbCourseId]['CourseName'] = $dbCourseName; 
$dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleName'] = $dbModuleName; 
// session data
$_SESSION['idcourse'] = $dbCourseId;
$_SESSION['namecourse'] = $dbCourseName;

}

foreach ($dataArray as $foundCourse => $courseData) {

$output = ""; 

$output .= "<p><strong>Course:</strong> " . $foundCourse .  " - "  . $courseData['CourseName'] . "</p>";

$moduleHTML = ""; 
$moduleHTML .= '<select name="module" id="modulesDrop">'.PHP_EOL;
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;      
foreach ($courseData['Modules'] as $moduleId => $moduleData) {        

$moduleHTML .= "<option value='$moduleId'>" . $moduleId . " - " . $moduleData['ModuleName'] ."</option>".PHP_EOL;        
} 
}
$moduleHTML .= '</select>';

echo $output; 
```

更新：

以下是视图页面源显示的内容：

```
 <form action="/u0000000/Mobile_app/create_session.php" method="post">
        <table>
        <tr>
        <th>Course: <select name="courses" id="coursesDrop">
<option value="">Please Select</option>
<option value='INFO101'>INFO101 - Bsc Information Communication Technology</option>
<option value='INFO102'>INFO102 - Bsc Computing</option>
</select></form><input id="courseSubmit" type="submit" value="Submit" name="submit" /></th>
        </tr>
        </table>
        </form>

        <p>Sorry, No Course was found with this Course ID 'INFO102'</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:19:31.143

尝试交换： `foreach ($dataArray as $course => $courseData)` for `foreach ($dataArray as $foundCourse => $courseData)`

然后`$course`foreach 中的所有 s 也应该重命名。您使用页面顶部的变量`$course`，即使它不能解决问题，它也会使代码更易于理解。

您还应该考虑使用 PDO 将您的数据库提供程序抽象出来[http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

编辑：

代码说“这里是所有课程，现在如果你提交使用 $course 并获取它的详细信息”

但是您永远不会得到发布的课程，所以它会（恰好发生）使用从`foreach`脚本顶部“剩余”的相同命名变量。

我建议按照我上面说的做，然后在 `if(isset($_POST['submit']))` 添加 之后`$submittedCourseId = $_POST['coursesDrop'];`

然后将其添加到您的绑定中 `$qrystmt->bind_param("s",$submittedCourseId);`

我认为这应该解决问题。

# c# - 使用 ZedGraph 绘制的数据滚动图表，其中数据存储在 sql server 中

> ID：13073676
> 
> 赞同：1
> 
> 时间：2012-10-25T17:06:02.457
> 
> 标签：c#, sql-server, c#-4.0, zedgraph

我在 sql server 中有大量数据（太多数据无法在我的电脑中一次全部加载到内存中）。我打算在 sql server 中使用分页来检索预定义的数据块。我想知道的是，是否可以设置 Zedgraph，这样一旦用户向右滚动（最新数据），就会从 sql 服务器检索新的数据块，显示并从图表内存中删除最旧的数据块?

如果这不可能，是否有 ZedGraph 的免费替代品能够执行以下操作？

谢谢

# sql - 如何在 SQL (2005) Server 中提取带有特殊字符的记录？

> ID：13073678
> 
> 赞同：0
> 
> 时间：2012-10-25T17:06:03.750
> 
> 标签：sql, sql-server-2005

我正在尝试提取包含特殊字符的记录，例如：

```
*,  +,  -, . (dot), ',  , /,  0-9 
```

但到目前为止并没有太大的成功。

该列名为 People_Name，名称应采用以下格式：姓氏、名字。例如，史密斯、约翰逊。但是，由于数据输入错误，一些名称显示为：

```
 681, Smith,  *S-Sean, Tom,   +, John,   -, Tim,  ., .,  /, Celo,  0-9999,
 Maria,  ', Irving, and sometime as 'Unknown, Alexis. 
```

我当前的查询（SQL Server 2005）是

```
Select People_name
  from mytable
 where (People_name LIKE '%*%' 
    OR People_name LIKE '%-,%'
    OR People_name LIKE '%+%'
    OR People_name LIKE '%/%'
    OR People_name LIKE '%unknown%') 
```

我可以继续添加 LIKE 列表，但我确信 SQL 服务器中有一种方法可以提取带有这些特殊字符的记录。表中有超过 1000 万条记录，重复排序和查找那些特殊字符，然后使用上面的 LIKE 运算符。

有人可以调查一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:36:11.277

你可以试试

```
select People_name
from mytable
where People_name like '%[^a-zA-Z ,]%' 
```

[**SQL FIDDLE 示例**](http://sqlfiddle.com/#!3/1ee0d/3)

# javascript - 光标（插入符号）在 contenteditable div 中不可见

> ID：13073679
> 
> 赞同：1
> 
> 时间：2012-10-25T17:06:11.083
> 
> 标签：javascript, html, contenteditable

当我单击 contenteditable div 中的文本时，光标似乎没有移动。

键入文本后，光标变为可见，并且在单击的位置输入文本。

就好像光标移动了，但没有被重绘。

我无法在简单的 jsfiddle 环境中重现该错误。

有没有人遇到过这样的问题？

与此同时，我试图通过从页面中删除 css 和 javascript 文件引用来隔离问题的原因。和反向 - 从空白页面开始并添加 js/css 以尝试重现。

编辑以回应以下评论：

浏览器：chrome Javascript 模块：jquery、jquery ui、rangy。

我试图删除所有 javascript。并且错误仍然存​​在。它必须来自CSS。我试图挑出所涉及的css规则。它似乎是事物的组合。:before psudo 类（如果它没有文本，我用来在 div 中显示占位符文本）似乎是问题的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:57:21.337

该问题可追溯到位于 contenteditable 元素背景中的 div 上的 css3 3d 转换。

将尝试将背景元素放置在 iframe 中以解决问题。

# java - 为什么我的连接被拒绝？

> ID：13073680
> 
> 赞同：0
> 
> 时间：2012-10-25T17:06:12.080
> 
> 标签：java, rest, jersey, connectionexception

我正在尝试通过 java 从 openweathermap.org 获取一些数据，但是当我运行代码时，我得到了 ConnectionException。

我的代码是：

```
public static void openweathermapTest1() {
    String uri = "http://openweathermap.org/data/2.1/find/station?lat=55&lon=37&cnt=10";
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);
    WebResource service = client.resource(uri);
    String xml = service.accept(MediaType.TEXT_XML).get(String.class);
    System.out.println("Output as XML: " + xml);
} 
```

和例外：

```
Exception in thread "main"
com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused: connect
at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:151)
at com.sun.jersey.api.client.Client.handle(Client.java:648)     
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)   
at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:507)
at GetPoint.openweathermapTest1(GetPoint.java:110)
at GetPoint.main(GetPoint.java:142) 
```

奇怪的是，当我在我的网络浏览器中调用[这个链接](http://openweathermap.org/data/2.1/find/station?lat=55&lon=37&cnt=10)时，我得到了预期的数据。怎么可能？我在这里想念什么？我该如何解决？（我尝试了所有三个 uri 并且都在 Firefox 中工作，而不是在我的程序中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:27:41.620

答案很简单：我的工作计算机在代理后面，只有 Firefox 使用它。通过一点代理魔法，我终于能够得到预期的结果。

感谢 Tom 和 Jim Garrison 的有用评论！

编辑：我使用以下代码来使用代理：

```
private static void useProxy(String host, int port)
{
    System.setProperty("http.proxySet", "true");
    System.setProperty("http.proxyHost", host);
    System.setProperty("http.proxyPort", String.valueOf(port));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T06:58:22.707

我面临着同样的问题。当我重新检查我的 JAVA 安装时，我的问题得到了修复。我有JDK 6和7 ..这种混乱..所以我完全删除了jdk 7并指向jdk 6。所以命令行版本，eclipse和服务器都应该指向同一个jdk ..这解决了错误。

# javascript - Amplifyjs 和状态码

> ID：13073685
> 
> 赞同：3
> 
> 时间：2012-10-25T17:06:25.693
> 
> 标签：javascript, ajax, amplifyjs

我正在尝试使用“Amplifyjs”来处理 AJAX 请求，就像 John Papa 在他的 Pluralsight 课程中所做的那样，但我遇到了身份验证问题。

我正在使用表单身份验证。一切正常。

我的问题来自未经身份验证的请求。我找不到让“amplifyjs”将http代码（401、403 ...）返回给错误函数的方法，以区分由于未通过身份验证而失败的请求和由于不符合业务逻辑而失败的请求。

一个请求示例是：

```
amplify.request.define("products", "ajax", {
                url: "/api/Products",
                datatype: "json",
                type: "GET"
            });
amplify.request({
                    resourceId: "products",
                    success: callbacks.success,
                    error: function (datos, status) {
                              //somecode
                           }
                }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T06:16:09.103

如果您想要 XHR 对象并传递它，您可以创建一个解码器。它将包含您可能需要的错误代码和其他信息。

```
amplify.request.define("products", "ajax", {
    url: "http://httpstat.us/401",
    datatype: "json",
    type: "GET",
    decoder: function ( data, status, xhr, success, error ) {
        if ( status === "success" ) {
            success( data, xhr );
        } else if ( status === "fail" || status === "error" ) {
            error( status, xhr );
        } else {
            error( status, xhr );
        }
    }
});

amplify.request({
    resourceId: "products",
    success: function(data, status) {
        console.log(data, status);        
    },
    error: function(status, xhr) {
        console.log(status, xhr);
    }
});​ 
```

您可以通过查看此[http://jsfiddle.net/fWkhM/来测试上述代码](http://jsfiddle.net/fWkhM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:30:57.843

感谢您的回答。

最后，当我看到没有人回答我时，我做了类似于你建议的事情：

```
var decoder = function (data, status, xhr, success, error) {
    if (status === "success") {
        success(data, status);
    } else if (status === "fail" || status === "error") {
        try {
            if (xhr.status === 401) {
                status = "NotAuthorized";
            }
            error(JSON.parse(xhr.responseText), status);
        } catch (er) {
            error(xhr.responseText, status);
        }
    }
}; 
```

在我修改默认解码器后：

```
amplify.request.decoders._default = decoders.HeladeriaDecoder; 
```

在错误回调中，我管理了返回的状态。

```
error: function (response, status) {
    if (status === "NotAuthorized") {
        logger.error(config.toasts.errorNotAuthenticated);
    } else {
        logger.error(config.toasts.errorSavingData);
    }
//more code...
} 
```

# r - 插值时间序列

> ID：13073686
> 
> 赞同：17
> 
> 时间：2012-10-25T17:06:38.890
> 
> 标签：r, time-series, linear-interpolation

我有两组具有不同时间戳的数据。一组数据包含校准数据，另一组包含样本数据。校准的频率远低于样品。

我想做的是将校准数据（低频）插入到样本时间序列（高频）上。

```
sam <- textConnection("time, value
01:00:52, 256
01:03:02, 254
01:05:23, 255
01:07:42, 257
01:10:12, 256")

cal <- textConnection("time, value
01:01:02, 252.3
01:05:15, 249.8
01:10:02, 255.6")

sample <- read.csv(sam)

sample$time <- as.POSIXct(sample$time, format="%H:%M:%S")

calib <- read.csv(cal)

calib$time <- as.POSIXct(calib$time, format="%H:%M:%S") 
```

（我看到的）最大的问题是数据的频率随机变化。

你们有没有人不得不做类似的事情？是否有一个 chron 或 zoo 函数可以满足我的要求（将低频数据插入到两个 ts 都是随机的高频数据上）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-25T18:07:02.013

我会使用动物园（或xts）并这样做：

```
library(zoo)
# Create zoo objects
zc <- zoo(calib$value, calib$time)    # low freq
zs <- zoo(sample$value, sample$time)  # high freq
# Merge series into one object
z <- merge(zs,zc)
# Interpolate calibration data (na.spline could also be used)
z$zc <- na.approx(z$zc, rule=2)
# Only keep index values from sample data
Z <- z[index(zs),]
Z
#                      zs       zc
# 2012-10-25 01:00:52 256 252.3000
# 2012-10-25 01:03:02 254 251.1142
# 2012-10-25 01:05:23 255 249.9617
# 2012-10-25 01:07:42 257 252.7707
# 2012-10-25 01:10:12 256 255.6000 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-03-22T16:03:36.620

您也可以使用`approx`这样的功能，它会容易得多。只需确保您正在使用数据框即可。此外，请确保校准中的列格式和样本数据集的格式相同，`as.POSIXct`使用

```
 calib <- data.frame(calib); sample <- data.frame(sample)

 IPcal <- data.frame(approx(calib$time,calib$value, xout = sample$time, 
                 rule = 2, method = "linear", ties = mean))

 head(IPcal)

#                x        y
#1 2017-03-22 01:00:52 252.3000
#2 2017-03-22 01:03:02 251.1142
#3 2017-03-22 01:05:23 249.9617
#4 2017-03-22 01:07:42 252.7707
#5 2017-03-22 01:10:12 255.6000 
```

阅读有关`approx`approxfun [文档](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/approxfun.html)的更多信息。

# objective-c - 为什么带有突出显示状态的简单切换按钮不起作用？

> ID：13073687
> 
> 赞同：1
> 
> 时间：2012-10-25T17:06:45.670
> 
> 标签：objective-c, ios, button, uibutton

```
- (void)updateFollowButton {
  if (!followButton.selected) {
    [followButton setImage: [UIImage imageNamed:kFollowButtonImage] forState:UIControlStateNormal];
    [followButton setImage:[UIImage imageNamed:kButtonFollowHighlighted] forState:UIControlStateHighlighted];
    [followButton setBackgroundImage:[UIImage imageNamed:kFollowButtonImage] forState:UIControlStateDisabled];
  } else {
    [followButton setImage:[UIImage imageNamed:kUnfollowButtonImage] forState:UIControlStateNormal];
    [followButton setImage:[UIImage imageNamed:kButtonfUnfollowHighlighted] forState:UIControlStateHighlighted];
    [followButton setImage:[UIImage imageNamed:kUnfollowButtonImage] forState:UIControlStateDisabled];
  }
} 
```

当我设置选择状态时，我调用 updateFollowButton 来刷新按钮正常图像并突出显示图像。为什么这个简单的代码不起作用？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:17:22.950

您应该使用选定的状态。按位或您的状态`UIControlStateSelected`来设置您拥有的 3 个不同状态的值，但何时`selected==YES`：

然后，状态会自动处理（这意味着一旦您配置了所有状态，您就不必再次调用您的方法来更改图像，就像您对您的 所做的那样`updateFollowButton`）：

```
- (void)configureFollowButton
{
   // Call this method only once (in your viewDidLoad method of your ViewController, typically) to configure your button once and for all
   [followButton setImage: [UIImage imageNamed:kFollowButtonImage] forState:UIControlStateNormal];
   [followButton setImage:[UIImage imageNamed:kButtonFollowHighlighted] forState:UIControlStateHighlighted];
   [followButton setBackgroundImage:[UIImage imageNamed:kFollowButtonImage] forState:UIControlStateDisabled];
   [followButton setImage:[UIImage imageNamed:kUnfollowButtonImage] forState:UIControlStateNormal|UIControlStateSelected];
   [followButton setImage:[UIImage imageNamed:kButtonUnfollowHighlighted] forState:UIControlStateHighlighted|UIControlStateSelected];
   [followButton setImage:[UIImage imageNamed:kUnfollowButtonImage] forState:UIControlStateDisabled|UIControlStateSelected];
}

-(IBAction)followButtonAction:(UIButton*)sender
{
   sender.selected = !sender.selected;
   [self doFollowAction:sender.selected];
   // And no need to call "updateFollowButton" there: the button image is already updated to reflect the UIControlStateSelected state when you change its selected property.
} 
```

# c# - 使用特定值以及来自 sql 查询的值数组填充下拉列表

> ID：13073688
> 
> 赞同：0
> 
> 时间：2012-10-25T17:06:46.857
> 
> 标签：c#, asp.net

我是下拉列表美妙世界的新手，我知道这对我来说很难解释，但我会尽我所能。

这是我的数据：

```
 **Type**   **ID**  **Status**
  Letter      1         A
  Letter      2         B
  Letter      3         C
  Letter      4         D
  Letter      5         E 
```

从我的查询结果中，我返回“3”的 ID，我的下拉列表显示一个“C”。我已经完成了这件作品:)。我的问题是，如何使用状态填充下拉列表？我的 DDL 将显示一个“C”，当单击箭头时，将显示其余的状态值。

这是可以用 sql 查询完成的吗？我必须创建一个单独的方法吗？如果有人能指出我正确的方向或提供一些有用的代码，那就太棒了！这是我的代码：

```
SqlDataAdapter adapter = new SqlDataAdapter("SELECT Status FROM dbo.database WHERE ID = @ID AND Type = 'Letter'", mySqlConnection1);
adapter.SelectCommand.Parameters.Add("@ID", SqlDbType.Char).Value = lblID.Text;
adapter.Fill(test);

ddlStatus.DataSource = test;
ddlStatus.DataTextField = "Status";
ddlStatus.DataValueField = Status";
ddlStatus.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:30:11.547

我认为这就是你要找的：

```
SqlDataAdapter adapter = new SqlDataAdapter(
    "SELECT ID, Status FROM dbo.database WHERE Type = 'Letter'", 
    mySqlConnection1);
adapter.Fill(test);

ddlStatus.DataSource = test;
ddlStatus.DataTextField = "Status";
ddlStatus.DataValueField = "ID";
ddlStatus.DataBind();

ddlStatus.SelectedValue = lblID.Text; 
```

首先，用您需要的值填充 DropDownList，然后将 SelectedValue 设置为自动显示该值。据我了解，您希望向用户显示状态，但实际选择的值应该是 ID。

根据您对 ViewState 的使用情况，您可能只需要加载一次 DropDownList（在第一次加载页面时），然后只需在此之后设置 SelectedValue。（您需要在第二个页面加载时重新加载列表。使用该`IsPostBack`值来确定是否重新加载）。但是，每次重新加载几乎没有什么危害，除了页面加载时间增加了几分之一秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:22:39.483

我认为您正在寻找的是 SelectedValue

```
 ddlStatus.DataSource = test;
 ddlStatus.DataTextField = "Status";
 ddlStatus.DataValueField = "ID";
 ddlStatus.DataBind();

 //Add this line
 string defaultValue = "3";
 ddlStatus.SelectedValue = defaultValue; //C has ID of 3 
```

# ruby-on-rails - Rails 在来自多个控制器的模板中隐式渲染

> ID：13073690
> 
> 赞同：0
> 
> 时间：2012-10-25T17:06:49.353
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有代码喜欢`render @posts`在呈现的索引模板中呈现我的帖子集合`PostsController`。

现在我有一个`Admin::PostsController`也应该呈现集合，但是当我的帖子控制器呈现`@posts`它时，它会寻找`admin/posts/_post.html.erb`部分。我现在必须明确写出部分路径吗？此功能是设计使然还是错误？这似乎没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:46:43.460

是的，您需要明确提供路径。是的，这是设计使然。

这实际上是有道理的，因为 Rails 是一个 MVC 框架，如果您在不同的命名空间下创建一个控制器，人们也会期望该控制器有单独的视图。考虑一下便利性，如果您想使用一些简单的命令快速启动一个应用程序，一个有帖子公共视图的应用程序和一个所有用于编辑的管理好东西的管理视图，您会期望有一个不同的目录存储所有管理员视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:00:43.143

`render @posts`是更长方法签名的快捷方式。

如果是`PostsController`，它是 ; 的捷径`render :partial => "post", :collection => @posts`。部分是`_post.html.erb`，预计在`app/views/posts`文件夹中。

如果是`Admin::PostsController`，它是 ; 的捷径`render :partial => "admin#post/post", :collection => @posts`。部分是`_post.html.erb`，并且预计在`app/views/admin/posts`文件夹中。

如果您想使用不同的部分，您应该明确指定它。

有关详细说明，请参阅[`Rendering Collections`](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections)Rails 指南页面的布局和渲染部分。

# c# - 使用存储的凭据进行授权。适用于 .NET 的 Google Drive API

> ID：13073698
> 
> 赞同：4
> 
> 时间：2012-10-25T17:07:32.040
> 
> 标签：c#, .net, oauth, google-drive-api

我正在尝试创建桌面应用程序，它允许列出谷歌驱动器帐户上的文件和文件夹。在这一刻，我可以做到，但有一个问题。每次我想从我的应用程序中打开 google drive 帐户时，我都必须重新登录。是否可以使用本地存储的 AccessToken/Refresh 令牌以避免每次重新授权？

这里用于获取授权的方法。

```
private IAuthorizationState GetAuthorization(NativeApplicationClient arg)
    {

        IAuthorizationState state = new AuthorizationState(new[] { "https://www.googleapis.com/auth/drive.file", "https://www.googleapis.com/auth/drive", "https://www.googleapis.com/auth/userinfo.email", "https://www.googleapis.com/auth/userinfo.profile" });

        // Get the auth URL:   
        state.Callback = new Uri("urn:ietf:wg:oauth:2.0:oob");
        UriBuilder builder = new UriBuilder(arg.RequestUserAuthorization(state));
        NameValueCollection queryParameters = HttpUtility.ParseQueryString(builder.Query);

        queryParameters.Set("access_type", "offline");
        queryParameters.Set("approval_prompt", "force");
        queryParameters.Set("user_id", email);

        builder.Query = queryParameters.ToString();
        //Dialog window wich returns authcode
        GoogleWebBrowserAuthenticator a = new GooogleWebBrowserAuthenticator(builder.Uri.ToString());
        a.ShowDialog();
        //Request authorization from the user (by opening a browser window):
        string authCode = a.authCode;

        // Retrieve the access token by using the authorization code:
        return arg.ProcessUserAuthorization(authCode, state);
    } 
```

**解决了：**

为了首先从 Google Drive sdk 调用方法，您需要服务实例：

```
 var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description, GoogleDriveHelper.CLIENT_ID, GoogleDriveHelper.CLIENT_SECRET);
        var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);
        Service = new DriveService(auth); 
```

那些 CLIENT_ID 和 CLIENT_SECRET 在您在 Google API 控制台中注册应用程序后将拥有。

然后您需要定义 GetAuthorization 例程，它可能如下所示：

```
private IAuthorizationState GetAuthorization(NativeApplicationClient arg)
    {
        IAuthorizationState state = new AuthorizationState(new[] { "https://www.googleapis.com/auth/drive.file", "https://www.googleapis.com/auth/drive", "https://www.googleapis.com/auth/userinfo.email", "https://www.googleapis.com/auth/userinfo.profile" });
        state.Callback = new Uri("urn:ietf:wg:oauth:2.0:oob");

        state.RefreshToken = AccountInfo.RefreshToken;
        state.AccessToken = AccountInfo.AccessToken;
        arg.RefreshToken(state);

        return state;
    } 
```

如果您已经拥有 Refresh 和 Access 令牌（至少 Refresh），它将起作用。所以你需要先授权一些用户帐户。

然后，您可以使用该 Service 实例来调用 sdk 方法。希望它会帮助某人。

# perl - Perl 中不区分大小写的唯一数组元素

> ID：13073703
> 
> 赞同：6
> 
> 时间：2012-10-25T17:08:01.277
> 
> 标签：perl, uniq

我正在使用模块导出的 uniq 函数 List::MoreUtils 来查找数组中的 uniq 元素。但是，我希望它以不区分大小写的方式查找 uniq 元素。我怎样才能做到这一点？

我已经使用 Data::Dumper 转储了 Array 的输出：

```
#! /usr/bin/perl

use strict;
use warnings;
use Data::Dumper qw(Dumper);
use List::MoreUtils qw(uniq);
use feature "say";

my @elements=<array is formed here>;

my @words=uniq @elements;

say Dumper \@words; 
```

输出：

```
$VAR1 = [
          'John',
          'john',
          'JohN',
          'JOHN',
          'JoHn',
          'john john'
        ]; 
```

预期输出应该是：john, john john

只有 2 个元素，其余的都应该被过滤，因为它们是同一个词，只是大小写不同。

如何删除忽略大小写的重复元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T17:09:50.720

使用小写，[`lc`](http://perldoc.perl.org/functions/lc.html)带有[`map`](http://perldoc.perl.org/functions/map.html)语句：

```
my @uniq_no_case = uniq map lc, @elements; 
```

* * *

区分大小写的原因是它依赖于哈希的重复数据删除特性，这也是区分大小写的。的代码如下所示：[`List::MoreUtils'`](http://search.cpan.org/perldoc?List::MoreUtils) `uniq``uniq`

```
sub uniq {
    my %seen = ();
    grep { not $seen{$_}++ } @_;
} 
```

如果你想在你自己的代码中直接使用这个 sub，你可以`lc`在其中合并：

```
sub uniq_no_case {
    my %seen = ();
    grep { not $seen{$_}++ } map lc, @_;
} 
```

解释这是如何工作的：

`@_`包含子例程的 args，并将它们提供给`grep`语句。通过代码块时返回 true 的任何元素都由 grep 语句返回。代码块包含一些更精细的点：

*   `$seen{$_}++`第一次看到元素时返回 0。该值仍会增加到 1，但在返回之后（而不是先`++$seen{$_}`inc，然后返回）。
*   通过否定递增的结果，我们得到第一个键的真值，而后面​​的每个键都为假。因此，该列表被重复数据删除。
*   `grep`因为 sub 中的最后一条语句将返回一个列表，该列表又由 sub 返回。
*   `map lc, @_`只需将该`lc`函数应用于`@_`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T17:11:36.363

使用散列来跟踪您已经看到的单词，但也将它们标准化为大写/小写：

```
my %seen;
my @unique;
for my $w (@words) {
  next if $seen{lc($w)}++;
  push(@unique, $w);
}
# @unique has the unique words 
```

请注意，这将保留原始单词的大小写。

更新：正如评论中所指出的，尚不清楚 OP 究竟需要什么，但我以这种方式编写了解决方案，以说明在某种“等价关系”下从列表中选择唯一代表的一般技术。在这种情况下，等价关系是 word`$a`等价于 word`$b`当且仅当`lc($a) eq lc($b)`。

大多数等价关系都可以用这种方式表示，即关系由分类器函数定义，`f()`使得`$a`等价于`$b`当且仅当`f($a) eq f($b)`。例如，如果我们想说如果两个词的长度相同，那么它们是等价的，那么`f()`就是`length()`。

所以现在你可能明白我为什么用这种方式编写算法了——分类器函数可能不会产生原始列表中的值。在 的情况下`f = length`，我们要选择单词，但是`f`单词的 是一个数字。

# php - PHP 目录依赖数组

> ID：13073709
> 
> 赞同：0
> 
> 时间：2012-10-25T17:08:26.033
> 
> 标签：php, data-structures, multidimensional-array, tree

我需要生成一个像树一样的数组结构。我想实现这样的人：

```
<ul>
   <li>Catalog1
    <ul> 
        <li>Subcatalog1
            <ul> 
                <li> 
                    Subsubcatalog1
                </li> 
                <li> 
                    Subsubcatalog2
                </li> 
            </ul> 
        </li> 
        <li> 
            Item2
        </li> 
        <li> 
            Item3
        </li> 
    </ul> 
</li> 
<li> 
    Catalog2
</li>
</ul> 
```

我有来自数据库的数据数组，其中包含字段 nadrzedny_id 和 podrzedny_id。并且依赖是 nadrzedny_id 是 podrzedny_id 的父项。根元素在 nadrzedny_id 中为 null 并且 id = 1。树不能靠近（它可以有很多分支）。

数组的每个元素都有：
`$element->id`
`$element->level (depth)`
`$element->podrzedny_id`
`$element->nadrzedny_id`
`$element->nazwa (name to display)`
`$element->id is always equal $element->podrzedny_id`。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:54:03.640

请阅读[这篇](http://blog.iphp.co.uk/php/design-patterns-traversing-the-tree/)文章，我相信它会对你有所帮助。基本思路：

1.  你需要一个节点类。

2.  您需要在节点中存储它们的 id、类型（ul 或 li）和 nazwa。

3.  遍历树有两种类型的算法：深度优先和宽度优先。您可以通过快速搜索找到数千篇描述这些算法的文章。此外，您可以选择使用已创建的树木工具。

4.  添加节点时，您知道其父节点的 id，因此您必须遍历树，直到找到节点的父节点。

5.  创建完树后，很容易创建输出字符串，方法是使用深度优先树遍历并注意在适合关闭标签的位置关闭标签。

6.  最后，您将结果写在某个地方（您需要结果的地方）。

# c# - 等待来自 Process.StandardOutput 的提示

> ID：13073712
> 
> 赞同：0
> 
> 时间：2012-10-25T17:08:50.723
> 
> 标签：c#, .net, process, system.diagnostics

> **可能重复：**
> [System.Diagnostics.Process.Start 一个针对不同域的进程](https://stackoverflow.com/questions/13036052/system-diagnostics-process-start-a-process-against-a-different-domain)

有关我正在尝试做的事情的背景，您可能需要查看：[System.Diagnostics.Process.Start a process against a different domain](https://stackoverflow.com/questions/13036052/system-diagnostics-process-start-a-process-against-a-different-domain)

基本上，即使它“看起来”像 ProcessStartInfo 可以让您针对另一个域帐户运行，但它不会，至少在我的场景中不会。所以我的下一个尝试是以编程方式模仿以下批处理命令，然后简单地读取/写入控制台以提供密码（如果您从 cmd 行运行以下命令，它将提示“输入 SOMEDOMAIN\SomeUserName 的密码”并等待您的输入，当您输入密码时，它会以正确的域帐户启动 SSMS，一切正常

```
RUNAS /user:SOMEDOMAIN\SomeUserName /netonly "C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe" 
```

但是由于某种原因我无法理解，当我从 C# 运行完全相同的命令时，它永远不会等待密码输入，只要您提交上述命令，它就会启动 SSMS，并且由于从未捕获过密码，因此无法尝试连接到D b。我尝试运行上面的命令以及首先运行 cmd.exe 然后将命令写入进程输入流但无济于事。如何让它接受我的输入，然后等待我读取输出并用密码响应？我觉得这很莫名其妙

# c# - 使用 LINQ 获取子列表并根据时间戳选择项目

> ID：13073713
> 
> 赞同：1
> 
> 时间：2012-10-25T17:09:03.070
> 
> 标签：c#, linq

我有一个清单：

```
class test
{
    name,
    timestamp
} 
```

我想获得所有具有相同名称的最后（最新）测试。许多测试具有相同的时间戳。

例如：

```
name1, 2012-10-25 3:00PM
name1, 2012-10-25 3:00PM
name2, 2012-10-25 3:05PM
name2, 2012-10-25 3:05PM
name1, 2012-10-25 3:10PM
name1, 2012-10-25 3:10PM
name2, 2012-10-25 3:15PM
name2, 2012-10-25 3:15PM 
```

我只需要获取每个名称的最后测试：

```
name1, 2012-10-25 3:10PM
name1, 2012-10-25 3:10PM
name2, 2012-10-25 3:15PM
name2, 2012-10-25 3:15PM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:13:48.010

```
var groups = list.GroupBy(x => x.name)
                 .Select(x => new  test{ 
                    Name = x.Key, 
                    TimeStamp = x.Max(y => y.timestamp) 
                  })
                 .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:12:31.140

试试这个：

```
var q = from l in list
        group l by l.Name into g
        select new
        {
            Name = g.Key,
            Max = g.Max (x => x.Timestamp)
        } into x
        from y in list 
        where x.Name == y.Name && x.Max == y.Timestamp
        select y; 
```

这里发生的首先是对`list`by进行分组`Name`，然后我为每个组选择 max `Timestamp`。这去`into x`。然后我将它重新加入`list`到分组中，匹配分组中的所有对，这样我就选择了与分组项目匹配的所有原始项目。

# java - 在 Java 中创建一个通用的 Iostream 类

> ID：13073715
> 
> 赞同：1
> 
> 时间：2012-10-25T17:09:09.903
> 
> 标签：java, class, iostream

基本上，我需要一个“myIO”类，它要求程序员在开始时指定输入和输出类型是什么。我不知道如何在 Java 中做到这一点，但是在 cpp 中，我会在我创建的每个类中定义一个“toString”或“display”函数，它将类对象转换为可以在控制台上显示或写入的东西一份文件。然后我将重载 cout 运算符“<<”，并将其与任何 ostream 类型变量一起使用。我基本上不确定 Java 中等效的 istream 和 ostream 类型变量是什么。所以这就是我本质上需要的：

```
public class IOS<Tin, Tout>{
    private "istream" _inputSource;
    private "ostream" _outputSource;

    public IOS(Tin in, Tin out){
        _inputSource = new "istream"( (typecast if necessary) in );
        _outputSource = new "ostream"( (typecast if necessary) out);
    }

    public String read(){
        //code which reads in data somehow, in c++ I could use stringstreams or something similar
    }

    public void print(ObjectType Object){
        //code to somehow write any object to a file
    }

} 
```

在上面的代码块中，Tin 和 Tout 是输入变量的类型。这个格式没关系，我只是不知道这些需要是什么类型。“istream”和“ostream”将是 c++ 中函数的类型变量，我不知道它们应该在这里是什么。我基本上需要这个类能够读取任何类型的对象并将其写入任何类型的文件源。如果这是不可能的，那么我至少需要它来做后者，我可以为每种类型重载它。

如果您有任何关于如何执行此操作的好的资源或想法，请告诉我。我主要是一名 C/C++ 编码员，并且被迫用 Java 编写这个应用程序，所以我有点迷失在不同的语法中。

抽象类如何使用它的一个例子是： public class something_abstract(){ private Type someKindOfVariable; IOS myIO = new IOS("istream" 类型对象, "ostream" 类型对象); public void display(){ myIO.println(someKindOfVariable);//所以这会将这个打印到指定的ostream类型对象...这是我不明白的部分：这个ostream对象是什么类型，我如何通过这变成了一个用户制作的类，旨在处理任何类型的 ostream 和任何类型的对象}

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:15:59.327

请阅读 java first sample progarm 的一些基本语法以从一个位置读取文件并写入另一个位置

在java中学习流的链接

[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html)

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class MainClass {
  public static void main(String[] args) {
    File originFile = new File("c:\\file1.txt");
    File destinationFile = new File("c:\\file1.txt");
    if (!originFile.exists() || destinationFile.exists()) {
      return;
    }
    try {
      byte[] readData = new byte[1024];
      FileInputStream fis = new FileInputStream(originFile);
      FileOutputStream fos = new FileOutputStream(destinationFile);
      int i = fis.read(readData);

      while (i != -1) {
        fos.write(readData, 0, i);
        i = fis.read(readData);
      }
      fis.close();
      fos.close();
    } catch (IOException e) {
      System.out.println(e);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:33:03.053

Java 的`istream`和的类似物分别`ostream`是`java.io.InputStream`和`java.io.OutputStream`。（或者`java.io.Reader`and `java.io.Writer`，如果你处理的是字符而不是字节。）有处理文件、套接字等的子类，还有像`DataInputStream`和`DataOutputStream`读写字节、整数等的子类。在 Java 中，你链接不同的类型流一起得到你想要的。

在Java中，你会有类似的东西

```
import java.io.*;

public class IOS<TIn, TOut> {
    private InputStream in;
    private DataOutputStream out;
    public IOS(InputStream in, OutputStream out) {
        this.in = new DataInputStream(in);
        this.out = new DataOutputStream(out);
    }

    public TIn read() {
        // use this.in to read in bytes and assemble an object with them
    }

    public void write(TOut output) {
        // use this.out to write out bytes
    }
} 
```

尽管如此，你甚至可能不需要它。Java 有一个`ObjectOutputStream`可以写出可序列化对象的类，以及一个`ObjectInputStream`可以读入它们的类。您所要做的几乎就是`Serializable`正确实现。（这比听起来要难一些，但也不是很离谱；基本上，这意味着确保您的可持久内容也是可序列化的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:33:05.053

> 然后我将重载 cout 运算符“<<”，并将其与任何 ostream 类型变量一起使用。

Java 没有运算符重载，因此无法做到这一点。

# build - 使用 cmake 构建 CUDA 目标文件

> ID：13073717
> 
> 赞同：16
> 
> 时间：2012-10-25T17:09:18.887
> 
> 标签：build, cuda, cmake

我得到了以下设置。我将使用 MPI 和其他使用 CUDA 的东西来扩展用 C++ 编写的框架。该项目使用 cmake 进行构建。我想避免为我的扩展使用库并从我的 cuda 源构建目标文件。之后，我想链接这些目标文件和用其他编译器编译的其他一些文件。有没有人知道如何实现这一目标？

我查看了[http://code.google.com/p/cudpp/wiki/BuildingCUDPPwithCMake](http://code.google.com/p/cudpp/wiki/BuildingCUDPPwithCMake)以获得有关如何将 CUDA 与 cmake 一起使用的概述，但此解决方案也使用了一个库。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-06T05:29:06.020

可以使用较新版本的 cmake 附带的 CUDA 支持来编译目标文件。你使用`cuda_compile`命令。见下文。

```
# CMakeLists.txt for G4CU project                                                                                                                                                                          
project(test-cuda-thrust-gdb)

# required cmake version                                                                                                                                                                                   
cmake_minimum_required(VERSION 2.8)

# packages                                                                                                                                                                                                 
find_package(CUDA)

# nvcc flags                                                                                                                                                                                               
set(CUDA_NVCC_FLAGS ${CUDA_NVCC_FLAGS};-gencode arch=compute_20,code=sm_20)

cuda_compile(HELPER_O helper.cu)
cuda_compile(DRIVER_O driver.cu OPTIONS -G)

cuda_add_executable(driver ${HELPER_O} ${DRIVER_O}) 
```

如果您需要更多信息，请查看该`FindCUDA.cmake`文件。

# perl - 使用sed / awk / tr / perl将字符串替换为小写的子字符串？

> ID：13073727
> 
> 赞同：4
> 
> 时间：2012-10-25T17:10:04.817
> 
> 标签：perl, sed, awk, tr

我有一个包含多个模式实例的纯文本文件`$$DATABASE_*$$`，星号可以是任何字符串。我想用星号部分中的任何内容替换整个实例，但要小写。

这是一个测试文件：

```
$$DATABASE_GIBSON$$

test me $$DATABASE_GIBSON$$ test me

$$DATABASE_GIBSON$$ test $$DATABASE_GIBSON$$ test

$$DATABASE_GIBSON$$ $$DATABASE_GIBSON$$$$DATABASE_GIBSON$$ 
```

这是所需的输出：

```
gibson

test me gibson test me

gibson test gibson test

gibson gibsongibson 
```

我如何使用 sed/awk/tr/perl 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:25:49.093

这是我最终使用的 perl 版本。

```
perl -p -i.bak -e 's/\$\$DATABASE_(.*?)\$\$/lc($1)/eg' inputFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:16:44.293

这适用于复杂的示例。

```
perl -ple 's/\$\$DATABASE_(.*?)\$\$/lc($1)/eg' filename.txt 
```

对于更简单的示例：

```
echo '$$DATABASE_GIBSON$$' | sed 's@$$DATABASE_\(.*\)\$\$@\L\1@' 
```

在[sed](/questions/tagged/sed "显示标记为“sed”的问题")中，`\L`表示小写（`\E`如果需要停止）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:47:35.773

不幸的是，使用 awk 没有简单、万无一失的方法，但这里有一种方法：

```
$ cat tst.awk
{
   gsub(/[$][$]/,"\n")

   head = ""
   tail = $0

   while ( match(tail, "\nDATABASE_[^\n]+\n") ) {
      head = head substr(tail,1,RSTART-1)
      trgt = substr(tail,RSTART,RLENGTH)
      tail = substr(tail,RSTART+RLENGTH)

      gsub(/\n(DATABASE_)?/,"",trgt)

      head = head tolower(trgt)

   }

   $0 = head tail

   gsub("\n","$$")

   print
}

$ cat file
The quick brown $$DATABASE_FOX$$ jumped over the lazy $$DATABASE_DOG$$s back.
The grey $$DATABASE_SQUIRREL$$ ate $$DATABASE_NUT$$s under a $$DATABASE_TREE$$.
Put a dollar $$DATABASE_DOL$LAR$$ in the $$ string.

$ awk -f tst.awk file
The quick brown fox jumped over the lazy dogs back.
The grey squirrel ate nuts under a tree.
Put a dollar dol$lar in the $$ string. 
```

请注意将 $$ 转换为换行符的技巧，这样我们就可以在匹配（RE）中否定该字符，没有那个（即如果我们使用“.+”而不是“[^\n]+”）然后由于贪婪RE 匹配如果相同的模式在一个输入行上出现两次，则匹配字符串将从第一个模式的开头延伸到第二个模式的结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:48:38.547

单独使用 awk：

```
> echo '$$DATABASE_AWESOME$$' | awk '{sub(/.*_/,"");sub(/\$\$$/,"");print tolower($0);}'
awesome 
```

请注意，我在 FreeBSD 中，所以这不是 GNU awk。

但这可以单独使用 bash 来完成：

```
[ghoti@pc ~]$ foo='$$DATABASE_AWESOME$$'
[ghoti@pc ~]$ foo=${foo##*_}
[ghoti@pc ~]$ foo=${foo%\$\$}
[ghoti@pc ~]$ foo=${foo,,}
[ghoti@pc ~]$ echo $foo
awesome 
```

在上述替换中，除了最后一个 ( `${foo,,}`) 之外的所有替换都将在标准 Bourne shell 中工作。如果您没有 bash，则可以改为使用`tr`此步骤：

```
$ echo $foo
AWESOME
$ foo=$(echo "$foo" | tr '[:upper:]' '[:lower:]')
$ echo $foo
awesome
$ 
```

**更新**：

*根据评论，OP真正*想要的似乎是将子字符串从*包含它的任何文本中*剥离出来——也就是说，我们的解决方案需要考虑在他的字符串之前或之后出现前导或尾随空格的可能性在他的问题中提供。

```
> echo 'foo $$DATABASE_KITTENS$$ bar' | sed -nE '/\$\$[^$]+\$\$/{;s/.*\$\$DATABASE_//;s/\$\$.*//;p;}' | tr '[:upper:]' '[:lower:]'
kittens 
```

如果你碰巧`pcregrep`在你的路径上（来自`devel/pcre`FreeBSD 端口），你可以使用它来代替，带有前瞻：

```
> echo 'foo $$DATABASE_KITTENS$$ bar' | pcregrep -o '(?!\$\$DATABASE_)[A-Z]+(?=\$\$)' | tr '[:upper:]' '[:lower:]'
kittens 
```

（对于阅读本文的 Linux 用户：这相当于使用`grep -P`.）

在纯 bash 中：

```
$ shopt -s extglob
$ foo='foo $$DATABASE_KITTENS$$ bar'
$ foo=${foo##*(?)\$\$DATABASE_}
$ foo=${foo%%\$\$*(?)}
$ foo=${foo,,}
$ echo $foo
kittens 
```

请注意，这三个更新的解决方案中没有一个可以处理在*同一行输入*中存在多个标记数据库名称的情况。这也不是问题中的要求，但我只是说......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T19:59:15.523

您可以使用 supercool 命令 cut 以非常简单的方式执行此操作 :)

```
echo '$$DATABASE_AWESOME$$' | cut -d'$' -f3 | cut -d_ -f2 | tr 'A-Z' 'a-z' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T08:29:14.363

这可能对您有用（GNU sed）：

```
sed 's/$\$/\n/g;s/\nDATABASE_\([^\n]*\)\n/\L\1/g;s/\n/$$/g' file 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-28T10:10:31.737

这是我能想到的最短（GNU）`awk`解决方案，它可以满足 OP 的要求：

```
awk -vRS='[$][$]DATABASE_([^$]+[$])+[$]' '{ORS=tolower(substr(RT,12,length(RT)-13))}1' 
```

即使用星号 ( ) 指示的字符串`*`包含一个或多个美元符号 ( `$`) 和/或换行符，这个灵魂仍然应该工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-01T00:08:55.410

```
awk '{gsub(/\$\$DATABASE_GIBSON\$\$/,"gibson")}1' file
gibson

test me gibson test me

gibson test gibson test

gibson gibsongibson 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-25T17:22:47.983

`echo $$DATABASE_WOOLY$$ | awk '{print tolower($0)}'`

awk 将接受任何输入，在这种情况下是第一个 agurment，并使用该`tolower`函数并返回结果。

对于您的 bash 脚本，您可以执行类似的操作并使用变量`DBLOWER`

```
DBLOWER=$(echo $$DATABASE_WOOLY$$ | awk '{print tolower($0)}'); 
```

# arrays - 数组之间的变化

> ID：13073728
> 
> 赞同：0
> 
> 时间：2012-10-25T17:10:07.480
> 
> 标签：arrays, conceptual

我有几个项目（主题），每个项目都有几个子项目，如下所述......

**应用**

*   微软词
*   擅长
*   视觉工作室

**D B**

*   mysql
*   mssql

我想比较其中几个组，并根据各自主题中有多少子项与其他主题中有多少子项，最好是在 1-10 的范围内为每个主题打分。这只是概念性的，不特定语言。我想比较数组，我只是不知道如何将每个数组与所有其他数组进行比较并在事后得出一个分数。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:28:24.270

这归结为计算[联合](http://en.wikipedia.org/wiki/Union_%28set_theory%29)。大多数现代语言都实现了数据类型来帮助解决这个问题。Python 有字典和集合，C++ 有 STL 映射和集合等。我会避免对联合进行任何手动计算，因为提供的数据类型在这方面效率更高。每个主题可以被认为是一组子主题，这些子主题的联合将决定有多少是共同的（即在每个主题中）。

如果您想找到每个项目（主题）之间的分数，并且如果您有 n 个主题，您将计算 n(n - 1) / 2 个分数。请注意，随着主题数量的增加，计算分数的数量将迅速增加。

至于计算分数，你会发现集合 A 和集合 B 之间的并集。这个并集可以

*   包含所有项目（意味着 A 和 B 具有完全相同的集合）；10分
*   包含所有 1 组（意味着 B 包含所有 A，反之亦然）得分取决于一组独有的项目数
*   包含小于 A 或 B 的最小大小

所以一个简单的计算可​​能是

```
(union.length / max(A.length, B.length)) * 10 
```

# html - 导航菜单宽度自动缩短或展开

> ID：13073729
> 
> 赞同：0
> 
> 时间：2012-10-25T17:10:08.460
> 
> 标签：html, css, menu, resize, html-lists

导航菜单宽度会随着 li 元素的宽度自动缩短或展开。我的最后一个 li 元素是登录用户，当用户的用户名包含更多字母时，我希望菜单的分布刚好足以适应，当用户名的字母较少时也是如此。

```
 require_once 'classes/User.php';

     $user = User::getById($_SESSION['user']['uid']);
     ?>
    <div id='cssmenu'>
    <ul>
       <li class=><a href='index.php'><span>Home</span></a></li>
       <li class=><a href='add.php'><span>Add</span></a></li>
       <li><a href='test.php'><span>Test</span></a></li>
       <li><a href='help.php'><span>Help</span></a></li>
       <li class="last"><a href='user.php'><span><?php print $user->getUsername()?></span></a>
    <ul>
         <li><a class="settings" href='user.php'><span>Settings</span></a></li>
         <li><a class="adduser" href='useradd.php'><span>Add User</span></a></li>
         <li><a class="logout" href='logout.php'><span>Log Out</span></a></li>
  </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:23:25.540

[**现场演示**](http://jsfiddle.net/bindashsandeep/PLPzC/)

朋友这里是你的代码。始终使用重置 css。

HTML：

```
<div class="menu">
<ul>
<li><a href="#">HOME</a></li>
<li><a href="#">ABOUT US</a></li>
<li><a href="#">ABOUT US</a></li>
</ul>
<div class="clear"></div>
</div> 
```

CSS：

```
.menu{background:#999; border:1px; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; float:left;}
.menu ul{list-style:none;}
.menu li{float:left;}
.menu a{font-family:Calibri; font-size:14px; font-weight:bold; text-decoration:none; color:#dcdcdc; padding-left:30px; padding-right:30px; line-height:40px;}
.menu a:hover{font-family:Calibri; font-size:14px; font-weight:bold; text-decoration:none; color:#000; padding-left:30px; padding-right:30px; line-height:40px;}
.clear{clear:both;} 
```

> **使用 reset.css 文件**

# sas - 如何在数据步骤的循环中引用当前行/观察号？

> ID：13073730
> 
> 赞同：0
> 
> 时间：2012-10-25T17:10:11.473
> 
> 标签：sas

例如，我有关于各种延迟的数据，我迭代并应用了一个线性函数，如下所示：（这里的函数只是一个示例）

```
data latency;
input lat1 - lat20;
array cost[20];
array lat[20];
do x = 1 to 20;
cost[x] = lat[x] * 1.875;
end;
drop x;
datalines;
0.42 0.85 0.59 0.06 0.21 0.35 0.1 0.08 0.85 0.53 0.81 0.44 0.47 0.2 0.99 0.32 0.18 0.87 0.33 0.84
0.11 0.83 0.02 0.59 0.74 0.65 0.76 0.45 0.57 0.22 0.2 0.13 0.42 0.15 0.05 0.51 0.48 0.95 0.39 0.92
0.8 0.9 0.65 0.29 0.77 0.0 0.24 0.05 0.16 0.72 0.58 0.9 0.35 0.63 0.79 0.41 0.73 0.36 0.82 0.16
0.74 0.21 0.57 0.73 0.83 0.78 0.77 0.92 0.13 0.39 0.52 0.14 0.1 0.77 0.68 0.99 0.26 0.37 0.97 0.83
;
run; 
```

如何在循环的每次迭代中保存具有当前观察数的变量，以便以后在计算中使用它？

我知道这`proc print`会自动打印观察编号，但我如何访问它并将其存储到数据步骤中的变量中？当 sas 逐行读取数据线时，有没有办法做到这一点？

我试过这个，但`obs`每次观察的变量都是 2。

```
data latency;
input lat1 - lat20;
obs = 1;                 * ADDED LINE;
array cost[20];
array lat[20];
do x = 1 to 20;
cost[x] = lat[x] * 1.875;
end;
obs = obs + 1;           * ADDED LINE;
drop x;
datalines;
0.42 0.85 0.59 0.06 0.21 0.35 0.1 0.08 0.85 0.53 0.81 0.44 0.47 0.2 0.99 0.32 0.18 0.87 0.33 0.84
0.11 0.83 0.02 0.59 0.74 0.65 0.76 0.45 0.57 0.22 0.2 0.13 0.42 0.15 0.05 0.51 0.48 0.95 0.39 0.92
0.8 0.9 0.65 0.29 0.77 0.0 0.24 0.05 0.16 0.72 0.58 0.9 0.35 0.63 0.79 0.41 0.73 0.36 0.82 0.16
0.74 0.21 0.57 0.73 0.83 0.78 0.77 0.92 0.13 0.39 0.52 0.14 0.1 0.77 0.68 0.99 0.26 0.37 0.97 0.83
;
run;

proc print data=latency;
run; 
```

这是一个小例子，但实际上我不能简单地将存储行号的新变量添加到每个数据行的开头并将其读入。这对于实际数据集是不切实际的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:30:54.660

您只需要添加一条`retain`语句，这样 SAS 就不会`obs`在每次新观察时重置为 0。

```
data latency;
retain obs 0;
obs = obs + 1;
...
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:35:50.290

您的第一次尝试非常接近。再试一次，但这次替换这一行：

```
obs = 1;                 * ADDED LINE; 
```

有了这个：

```
retain obs 0;            * ADDED LINE; 
```

这样，您的`obs`变量将保留在整个数据集中，而不是每次都重置为 1。

# linux - linux找到多种模式

> ID：13073731
> 
> 赞同：3
> 
> 时间：2012-10-25T17:10:13.707
> 
> 标签：linux, bash

我需要对大约 1500 个文件名进行查找，并且想知道是否有办法同时执行同时查找命令。

现在我做类似的事情

```
for fil in $(cat my_file)
do
  find . -name $fil >> outputfile
done 
```

有没有办法产生多个 find 实例来加快进程。现在，一次运行一个文件大约需要 7 个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:18:46.383

鉴于您提到的 7 小时运行时间，我假设文件系统中有数百万个文件，因此在一个查询中加载的 OS 磁盘缓冲区在下一个查询开始之前被重用。`find`您可以通过多次计时来测试这个假设，如下例所示。

```
tini ~ > time find . -name IMG_0772.JPG -ls
25430459 9504 lrwxrwxrwx   1 omg omg  9732338 Aug  1 01:33 ./pix/rainbow/IMG_0772.JPG
20341373 5024 -rwxr-xr-x   1 omg omg  5144339 Apr 22  2009 ./pc/2009-04/IMG_0772.JPG
22678808 2848 -rwxr-xr-x   1 omg omg  2916237 Jul 21 21:03 ./pc/2012-07/IMG_0772.JPG

real    0m15.823s
user    0m0.908s
sys 0m1.608s

tini ~ > time find . -name IMG_0772.JPG -ls
25430459 9504 lrwxrwxrwx   1 omg omg  9732338 Aug  1 01:33 ./pix/rainbow/IMG_0772.JPG
20341373 5024 -rwxr-xr-x   1 omg omg  5144339 Apr 22  2009 ./pc/2009-04/IMG_0772.JPG
22678808 2848 -rwxr-xr-x   1 omg omg  2916237 Jul 21 21:03 ./pc/2012-07/IMG_0772.JPG

real    0m0.715s
user    0m0.340s
sys 0m0.368s 
```

在示例中，第二个`find`运行得更快，因为操作系统在 RAM 中仍然有第一个的缓冲区 `find`。[在我的小型 Linux 3.2.0-32 系统上，根据`top`目前 2.5GB 的 RAM 是缓冲区，0.3GB 是免费的，3.8GB 正在使用（即大约 1.3GB 用于程序和操作系统）。]

无论如何，为了加快处理速度，您需要找到一种更好地利用 OS 磁盘缓冲的方法。例如，将系统内存增加一倍或四倍。作为替代方案，请尝试该`locate`命令。该查询
`time locate IMG_0772.JPG`
在我的系统上始终花费不到一秒钟的时间。您可能希望`updatedb`在开始查找 1500 个文件名的作业之前运行。见`man updatedb`。如果`.`你`find`的目录只提供了整个文件系统的一小部分，以至于`locate`数据库中包含大量不相关的文件，请在运行时使用各种`prune`选项`updatedb`，以最小化运行`locate`时访问的数据库的大小`locate`；然后，运行普通`updatedb`文件将其他文件名恢复到`locate`数据库。使用`locate`您可能可以将运行时间缩短到 20 分钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:43:06.863

`find`此解决方案仅调用`fgrep`一次：

```
find . | fgrep -f my_file > outputfile 
```

我假设它`my_file`有一个您要查找的文件列表，每个名称都在单独的行上。

### 解释

1.  该`find`命令查找当前目录中的所有文件（包括目录）。它的输出是文件/目录列表，每行一个
2.  命令从 find 命令的`fgrep`输出中搜索，但不是在命令行上指定搜索词，而是从`my_file`--that 获取搜索词，这就是`-f`标志的用途。
3.  fgrep 命令的输出，即您要查找的文件列表，被重定向到`outputfile`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T17:18:33.140

也许像

```
find . \( -name file1 -o -name file2 -o ... \) >outputfile 
```

您可以根据以下名称的数量构建此类行`my_file`：

```
find . \( $(xargs <my_file printf "-name %s -o " | sed 's/-o $//') \) >outputfile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T17:16:32.420

> 有没有办法产生多个 find 实例来加快进程。

这不是您想要解决问题的方式，因为`find`它受 I/O 和 FS 限制。

`-name`使用组合在一起的多个参数`-o`，以便使用一个`find`命令一次查找多个文件名，或者一次查找*所有*文件并使用一种工具，例如`grep`在文件的结果列表中搜索感兴趣的文件名。

# sorting - 使用插入排序对几乎排序的数组进行排序

> ID：13073735
> 
> 赞同：0
> 
> 时间：2012-10-25T17:10:23.237
> 
> 标签：sorting, insertion-sort

1.  关于几乎已排序数组的插入排序，它需要线性时间。但这只有在我们的实现中有一个 if 条件才能在数组已排序时跳出循环，对吧？

2.  对于小数据集上的插入排序，为什么优先选择插入排序？因为快速排序和合并排序的比较/操作数量较少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:18:57.550

是的，几乎排序的数组需要线性时间，因为您很早就脱离了比较循环。一旦将元素插入到正确的位置，就无需遍历排序数组的其余部分。

我想这是因为您正在利用有关已排序数组的知识，而在快速排序中，您将每个元素放在正确的位置，然后对剩余的元素进行排序。

# jquery - jQuery load() 代码注入后的 DOM 修改

> ID：13073737
> 
> 赞同：0
> 
> 时间：2012-10-25T17:10:30.523
> 
> 标签：jquery, ajax, dom, refresh

进入 DIV：

```
<div id="materialcolor"></div> 
```

我必须注入这个动态生成的代码：

```
<select class="groupsmaterialcolorsDDs" name="group_6" id="group_6" onchange="putLayer(document.getElementById(this.id).value);">

    <option id="futura_perspective_merita_aubergine.jpg" value="76" selected="selected" title="Aubergine">Aubergine</option>

    <option id="futura_perspective_merita_bordeaux.jpg" value="100" selected="selected" title="Bordeaux">Bordeaux</option>

</select> 
```

我通过 jQuery 的 load() 函数从其他位置执行此操作：

```
/ajaxcreator.php?product_id=14 
```

在 AJAX 的请求之前，选择的 onchane 参数中的函数 putLayer() 起作用（它正在更改其他 DOM 的元素 - 从此选择的 id 中放置背景）。在 AJAX 请求之后 - 不是。

我可能必须刷新 DOM 元素才能再次修改它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:17:16.840

您可以使用 jquery '.on' 函数来确保事件处理程序始终附加到该 div 中所有未来的 '.groupsmaterialcolorsDDs'。

例子：

$('#materialcolor').on('change', '.groupsmaterialcolorsDDs', function(){

putLayer(this.value);

});

# c# - 将字符串插入列表

> ID：13073739
> 
> 赞同：0
> 
> 时间：2012-10-25T17:10:38.023
> 
> 标签：c#, string, list, split

> **可能重复：**
> [将字符串解析为 int 数组](https://stackoverflow.com/questions/13050910/parse-string-to-int-array)

我有来自这样的数字的字符串`textbox`：`2670053157`。我应该如何拆分字符串的每个字符并将它们插入`List<int>`元素中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T17:12:00.563

```
var list = numberString.Select(c => Int32.Parse(c.ToString())).ToList(); 
```

或者，如果您想添加到现有列表：

```
list.AddRange(numberString.Select(c => Int32.Parse(c.ToString())); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T17:12:32.660

```
var list = new List<int>();

list.AddRange(
    from character in numericString
    select int.Parse(character)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T17:16:36.947

```
 List<int> numericlist = "2670053157".Select(c => c - '0').ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T17:36:23.967

如果您担心由于输入不当而引发异常，您总是可以走安全的路线：

```
// string input = TextBox1.Text;
List<int> intList = new List<int>();

foreach (char c in input)
{
    int i;
    if (Int32.TryParse(c.ToString(), out i))
    {
        intList.Add(i);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T18:03:50.877

从辅助方法开始：

```
public static IEnumerable<short> getDigits(long input)
{
    while (input > 0)
    {
        yield return (short)(input % 10);
        input /= 10;
    }
} 
```

然后，如果您想要列表中的值，只需调用`ToList`：

```
List<short> list = getDigits(2670053157).ToList(); 
```

如果您首先需要高阶位，`Reverse`则需要序列：

```
List<short> list = getDigits(2670053157).Reverse().ToList(); 
```

# sql - 在以下 sql 查询方面需要帮助

> ID：13073740
> 
> 赞同：0
> 
> 时间：2012-10-25T17:10:46.323
> 
> 标签：sql, sql-server-2008, tsql

这是我当前的 SQL 查询。我需要修改这个

```
SELECT 
    18 BrokerDealerID,
    5 PortfolioID,
    PeriodEndDate DATE,
    SecurityIdentifier_All.SecurityId,
    MAX(
    (CASE 
        WHEN Securities.Quantity < 0 THEN
        100 + (100 - LocalPriceAmount)
        ELSE
        LocalPriceAmount
     END
        ) /100) Mark
FROM
    Fireball_Reporting..StateStreet_DailyPosition_Second StateStreet 
INNER JOIN
    Fireball_Reporting..SecurityIdentifier_All ON StateStreet.CUSIP = SecurityIdentifier_All.Identifier
INNER JOIN
    Fireball..TradeBySecurityType Securities ON
        Securities.PricingSecurityID = SecurityIdentifier_All.SecurityId AND Securities.Position = 1 AND
(CASE WHEN StateStreet.SecurityName LIKE '% R V %' THEN StateStreet.SharesParValue * -1 ELSE StateStreet.SharesParValue END) = Securities.Quantity
WHERE
    CONVERT(DATETIME, StateStreet.PeriodEndDate) = '2012-10-23' --@PositionDate
GROUP BY
    PeriodEndDate,
    SecurityIdentifier_All.SecurityId 
```

我需要在第二个条件下进行更改，即

```
(CASE WHEN StateStreet.SecurityName LIKE '% R V %' THEN StateStreet.SharesParValue * -1 ELSE StateStreet.SharesParValue END) = Securities.Quantity 
```

我会给你一个例子。

我的选择查询给了我以下输出

```
securityname date       securityid portfolioid type mark               quantity
------------ ---------- ---------- ----------- ---- ------------------ -------------
R V DISH     10/23/2012 4879505    5           CDS  1.0487189900000000 -5000000.0000
R V DISH      10/23/2012 4879505    5           CDS  1.0487189900000000 -2000000.0000
R F DISH    10/23/2012 4879505    5           CDS  0.9512810100000000 3000000.0000 
```

上面它给了我 3 条相同安全 ID 的记录当我使用上述结果进行 MERGE 时，如果我不检查检查的第二个条件，它只会直接获取第一条记录，`Quantity`但现在我只想检查 When In StateStreet。 SecurityName LIKE '% RV %' 从上述结果中取出数量为`-`的记录，如果不是，则取出数量为 id 的记录`+`

我怎么能改变那个案例陈述？`% R V%`还是直接在我计算标记的选择语句中检查？需要技术帮助。我是 SQL 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:09:21.713

也许是这样的：

```
(
      (StateStreet.SecurityName LIKE '% R V %' AND Securities.Quantity < 0)
   OR (StateStreet.SecurityName NOT LIKE '% R V %' AND Securities.Quantity >= 0)
) 
```

我只是在猜测哪个有“=”（+ 可能包括 0）。

# php - 更改简单的日期时间格式以显示时区

> ID：13073751
> 
> 赞同：0
> 
> 时间：2012-10-25T17:11:32.737
> 
> 标签：php, date-format

我有一个简单的日期时间格式`10/20 4:30PM`。我希望它以 `10/24 1:30PM -007`. 我是说`date('Y-m-d H:i:sT', $time_recieved)`假设`T`是针对时区的。但它仍然没有给出时区。可能是什么原因？我还缺少其他格式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:20:13.383

你可以看看PHP的官方手册：date();

[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

我对此进行了测试，并在我的服务器上使用了：

```
$time = time(); 
echo date('Y-m-d H:i:s T', $time); 
```

它完美地显示了时区。检查 $time_received，它可能是一个错误的数字，尝试使用本地时间和 time´() 函数以确保它没问题。

祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T17:13:45.483

你想要的`O`不是`T`我相信的。

检查 PHP 日期页面以获取所有可能的格式列表。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# jsf-2 - UISelectOne 和 UISelectMany 的绑定值到同一个属性

> ID：13073754
> 
> 赞同：2
> 
> 时间：2012-10-25T17:11:38.417
> 
> 标签：jsf-2, selectonemenu

我正在尝试在 Prime Faces 中创建一个动态调查应用程序。我有一个问题对象列表，每个问题对象都包含一个 AnswerChoices 列表。这些被赋予 f:selectItems 值属性。这可以。问题对象还包含一个 selectedValues 列表，该列表提供给相关的 selectOne/many 组件。

因为我希望是通用的，所以会有多个选择值的问题，还有一些只有一个选择值的问题。我希望能够将 selectOne 和 selectMany 组件指向代表 selectedValues 的相关 Question 对象中的字符串列表。

这适用于 selectMany 组件，但不适用于需要指向单个对象而不是列表的 selectOne 组件。有没有一种我错过的简单方法 - 因为如果可能的话，我只想有一个代表 selectedValues 的对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:43:46.347

您可以使用大括号表示法将值绑定到特定索引处的列表/数组项。下面的示例将值绑定到列表/数组的第一项。

```
<h:selectOneMenu value="#{bean.selectedAnswers[0]}" /> 
```

但是有一个警告：您需要在 bean 的（后）构造期间自己准备带有单个项目的列表/数组。JSF/EL 不会在`<h:selectOneMenu>`.

例如

```
@PostConstruct
public void init() {
    selectedAnswers = new ArrayList<Answer>();
    selectedAnswers.add(null);
} 
```

`UISelectMany`顺便说一下，为组件重用这个预初始化的属性并没有什么坏处。

# asp.net-mvc - MVC 验证基础（使用实体框架）

> ID：13073756
> 
> 赞同：1
> 
> 时间：2012-10-25T17:11:41.423
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-5, asp.net-mvc-validation

MVC 验证基础（使用实体框架）

设想：

我有一个模型类如下（通过实体框架 EF.x DbContext 生成器自动生成）。

（目前没有视图模型）。

```
public partial class Activity
{
    public int Id { get; set; }

    public byte Progress { get; set; }
    public decimal ValueInContractCurrency { get; set; }
    public System.DateTime ForecastStart { get; set; }
    public System.DateTime ForecastEnd { get; set; }

    public int DepartmentId { get; set; }   
    public int OwnerId { get; set; }
    public int StageId { get; set; }
    public int StatusId { get; set; }

    public virtual Department Department { get; set; }
    public virtual Owner Owner { get; set; }
    public virtual Stage Stage { get; set; }
    public virtual Status Status { get; set; }
} 
```

当我在强类型视图上提交空白表单时，我会收到以下验证消息：

进度字段是必需的。

ValueInContractCurrency 字段是必需的。

ForecastStart 字段是必需的。

ForecastEnd 字段是必需的。

即 db 表中的所有字段。

如果我填写这些并再次提交，那么控制器就会被调用。由于 IsValid 为假，控制器然后返回到视图页面。

然后屏幕会重新显示这些验证消息：

StageId 字段是必需的。

DepartmentId 字段是必需的。

StatusId 字段是必需的。

OwnerId 字段是必需的。

即 db 表中的所有外键字段（这些也是所有选择框）。

如果我填写这些，表单就会成功提交并保存到数据库中。

问题：

1.  鉴于我没有使用任何 [Required] 属性，验证从何而来？这与实体框架有关吗？

2.  为什么表单没有立即在客户端验证所有内容，外键（或选择框）有什么不同，它们仅由 IsValid() 检查，即使它们是空的，因此显然无效？

3.  您如何使所有内容都在一个步骤中得到验证（对于空字段），因此用户不必提交两次表单并且所有验证消息都会立即显示？您是否必须关闭客户端验证？

（我尝试将 [Required] 属性添加到外键字段，但这似乎没有任何区别（可能它们只影响 IsValid）。我也尝试调用 Html.EnableClientValidation() 但这也没有任何区别）。

4..最后，我看到有人使用 [MetadataType[MetadataType(typeof(...)]] 进行验证。如果您有视图模型，为什么要这样做，或者只有在没有视图模型时才这样做？

显然我在这里遗漏了一些基础知识，因此，如果有人知道有关 MVC 验证过程如何逐步工作的详细教程，包括 javascript/controller 调用，而不仅仅是关于属性的另一篇文章，那么我可以做也有一个链接：c）

* * *

更多关于神秘人的信息：

解决方案设置如下：

.NET4

MVC3

EF5

EF5.x Db 上下文生成器

在 edmx 设计表面上使用“添加代码生成项”来关联 EF.x Db 上下文生成器文件（.tt 文件）

控制器如下所示：

```
 // GET: /Activities/Create
    public ActionResult Create()
    {
        ViewBag.DepartmentId = new SelectList(db.Departments, "Id", "Name");
        ViewBag.OwnerId = new SelectList(db.Owners, "Id", "ShortName");
        ViewBag.ContractId = new SelectList(db.Contracts, "Id", "Number");
        ViewBag.StageId = new SelectList(new List<string>());
        ViewBag.StatusId = new SelectList(db.Status.Where(s => s.IsDefaultForNewActivity == true), "Id", "Name");
        return View();
    } 

    // POST: /Activities/Create
    [HttpPost]
    public ActionResult Create(Activity activity)
    {
        if (ModelState.IsValid)
        {
            db.Activities.Add(activity);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        ViewBag.DepartmentId = new SelectList(db.Departments, "Id", "Name");
        ViewBag.OwnerId = new SelectList(db.Owners, "Id", "ShortName");
        ViewBag.ContractId = new SelectList(db.Contracts, "Id", "Number");
        ViewBag.StageId = new SelectList(db.Stages, "Id", "Number");
        ViewBag.StatusId = new SelectList(db.Status, "Id", "Name");
        return View(activity);
    } 
```

视图是这样的：

```
<!-- this refers to  the EF.x DB Context class shown at the top of this post -->
@model RDMS.Activity  

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Activity</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.StageId, "Stage")
        </div>
        <div class="editor-field">
            @Html.DropDownList("StageId", String.Empty)
            @Html.ValidationMessageFor(model => model.StageId)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Progress)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Progress)
            @Html.ValidationMessageFor(model => model.Progress)
        </div>

    <!-- ETC...-->

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:18:43.270

您获得所需验证的原因是因为属性是值类型（即它们不能为空）。由于它们不能为空，因此框架要求您为它们填写值（否则将不得不抛出一些奇怪的异常）。

这个问题表现在几个方面。我在 Slashdot 上一遍又一遍地看到这一点。我不确定为什么这么多人陷入这个问题，但这很常见。通常这会导致一个奇怪的异常，即没有抛出默认构造函数，但由于某种原因，这里没有发生。

问题源于您使用 ViewBag 并将 ViewBag 中的项目命名为与模型属性相同。提交页面时，模型绑定器会被类似名称的项目混淆。

更改这些以在末尾添加列表：

```
ViewBag.DepartmentList = new SelectList(db.Departments, "Id", "Name");
ViewBag.OwnerList = new SelectList(db.Owners, "Id", "ShortName");
ViewBag.ContractList = new SelectList(db.Contracts, "Id", "Number");
ViewBag.StageList = new SelectList(new List<string>());
ViewBag.StatusList = new SelectList(db.Status
        .Where(s => s.IsDefaultForNewActivity == true), "Id", "Name"); 
```

并更改您的视图以使用 DropDownListFor 的强类型版本：

```
@Html.DropDownList(x => x.StageId, ViewBag.StageList, string.Empty)
... and so on 
```

另一项注意事项。在上面的示例中，我希望您没有使用某种全局数据上下文或更糟的是，单例。这将是灾难性的，并可能导致数据损坏。

如果 db 只是您在构造函数中新建的控制器的成员，那没关系，但并不理想。更好的方法是在每个操作方法中创建一个新的上下文，由 using 语句包装（然后连接立即关闭并销毁）或在控制器上实现 IDisposable 并显式调用 Dispose。

更好的方法是不在您的控制器中执行任何此操作，而是在业务层中执行此操作，但这可以等到您更进一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:20:35.620

> 鉴于我没有使用任何 [Required] 属性，验证从何而来？这与实体框架有关吗？

MVC（不是 EF）中有一个默认的验证提供程序，检查两件事：

*   提供的值的类型（int 属性中的字符串）=>（不确定，但类似）`yyy is not valid for field xxx`

*   值类型的“检查空”属性（如果您让一个空字段对应于一个`int`属性，它会抱怨，并且会接受一个`int?`属性的空字段）。=>`The xxx field is required`

可以在 global.asax 中停用第二种行为（属性名称相当清楚）：

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

启用客户端验证后，这些验证以及与 DataAnnotations ( `Required`, `StringLength`...) 相关的验证将在客户端引发验证错误，然后再转到控制器。它避免了服务器上的往返，所以它不是没用的。但当然，您不能只依赖客户端验证。

> 为什么表单没有立即在客户端验证所有内容，外键（或选择框）有什么不同，它们仅由 IsValid() 检查，即使它们是空的，因此显然无效？

嗯，我必须承认我没有得到令人满意的答案......所以我让这个更胜任​​的一个。它们在 ModelState.IsValid 中被视为错误，因为当 ClientSide Validation 通过时，您然后转到 ModelBinding（模型绑定查看您的 POST 值，查看相应 HttpPost 方法的参数（`ActionResult Create`为您），并尝试绑定带有这些参数的 POST 值。在您的情况下，绑定看到一个`Activity activity`参数。并且他在您的 POSTed 字段中没有得到任何东西`StageId`（例如）。由于 StageId 不可为空，他将其作为 ModelState 字典中的错误=> ModelState 不再有效。

但我不知道为什么它没有被客户端验证捕获，即使有一个`Required`属性。

> 您如何使所有内容都在一个步骤中得到验证（对于空字段），因此用户不必提交两次表单并且所有验证消息都会立即显示？您是否必须关闭客户端验证？

好吧，您必须关闭客户端验证，因为您不能只信任客户端验证。但是，如上所述，客户端验证可以避免到服务器的无用往返。

> 最后，我看到有人使用 [MetadataType(typeof(...)]] 进行验证。如果您有视图模型，为什么要这样做，或者只有在没有视图模型时才这样做？

只有当你没有 ViewModel，而是在你的 Model 类上工作。它仅在使用 Model First 或 Database First 时才有用，因为每次 edmx 更改时都会生成实体类（使用 T4）。然后，如果您在类上放置自定义数据注释，则必须在每个类（文件）生成后手动将其放回去，这将是愚蠢的。所以这`[MetadataType(typeof()]]`是一种在类上添加注释的方法，即使“基类文件”被重新生成。

希望这个对你有帮助。

顺便说一句，如果您对验证感兴趣，请查看[FluentValidation](http://fluentvalidation.codeplex.com/)。这是一个非常好的...流畅的验证（你猜到了吗？）库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:55:23.850

1.  如果该字段不可为空，EF 认为它是必需的。
2.  因为外键不可为空，所以导航属性也是必需的。
3.  要一次获得所有验证，您需要使用在验证后在控制器中以实体模式转换的 ViewModel。有关 mvc 中属性验证的更多信息，您可以[在此处阅读。](http://www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic)

# css - WordPress 下拉菜单 CSS

> ID：13073758
> 
> 赞同：1
> 
> 时间：2012-10-25T17:11:45.207
> 
> 标签：css, wordpress, drop-down-menu, wordpress-theming

我正在为 WordPress 开发一个自定义主题。

我使用 Ian Stewart 开发了主题的基本框架：
[如何创建 WordPress 主题：终极 WordPress 主题教程](http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/)

并使用以下方法开发菜单 CSS：使用 CSS
[创建多级下拉菜单并通过 jQuery 改进它](http://www.kriesi.at/archives/create-a-multilevel-dropdown-menu-with-css-and-improve-it-via-jquery)

他们俩都很好，很完整。

当我尝试将*自定义菜单*注册到主题时，*子菜单中的 CSS 对我不起作用*。要注册自定义菜单，我将以下代码用于`header.php`：

```
<?php wp_nav_menu ( array ( 'theme_location'=>'primary', 'fallback_cb'=>'') ); ?> 
```

它对我有用，并在我指定的位置显示我的自定义菜单。但是使用自定义 CSS，下拉菜单（子菜单）没有显示。我用于`z-index`后续菜单，但直到它们被隐藏。

请注意：`wp_nav_menu()`正在创建一个标签，如：

```
<ul id="menu-new-custom-menu" class="menu"> 
```

所以，我在我的 CSS 中全部替换`#nav`为`.menu`. 但直到子菜单不可见。

请帮助我找出我的一大堆编码的错误。
**PS：**我使用的 WP 3.4.2 没有与菜单相关的插件。我的 CSS 和教程的完全一样，除了`.menu`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:58:24.720

也许这一定是你的 jquery 问题？我检查了您的 css 并没有发现任何问题，但是当我检查您的 header.php 时，没有 jquery 库和 jquery 自定义代码嵌入其中。

您是否在您的 jquery 代码之前放置了一个 jquery 库？请参见下文，将其放在**head**标签中的 header.php 中。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
<script>
  function mainmenu(){
      $(" .menu ul ").css({display: "none"}); // Opera Fix
      $(" .menu li").hover(function(){
      $(this).find('ul:first').css({visibility: "visible",display: "none"}).show(400);
    },function(){
    $(this).find('ul:first').css({visibility: "hidden"});
    });
 }

 $(document).ready(function(){                  
mainmenu();
 });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:17:59.003

好的，我终于得到了解决方案。
这不是 jQuery 的问题，jQuery 只是为菜单设置动画。我在 CSS 中发现了一个错误的属性，在`nano.css`：

```
#access{
    background-color: #333;
    height: 25px;
    font-size:16px;
    text-transform:uppercase;
    overflow:hidden;
    } 
```

将会

```
#access{
    background-color: #333;
    height: 25px;
    font-size:16px;
    text-transform:uppercase;
    } 
```

`overflow:hidden`隐藏子菜单。

此外，我还添加`z-index`了：

```
.menu li:hover ul, .menu li li:hover ul, .menu li li li:hover ul, .menu li li li li:hover ul{
display:block;
position:absolute;
z-index:5000;
} 
```

对于子菜单。现在它在这里工作正常。
感谢 Amit Chowdhury 在修复错误方面提供的帮助。

# javascript - 如何为多个文本框重复 JQuery 函数？

> ID：13073762
> 
> 赞同：0
> 
> 时间：2012-10-25T17:12:04.157
> 
> 标签：javascript, jquery, vb.net, format

我有一个简单的功能，我需要为 3 个单独的控件重复 3 次。将相同的功能复制 3 次似乎很愚蠢，但我自己不知道该怎么做。

```
<script type="text/javascript">
$(document).ready(function () {
//        $("#LeaveHoursTextBox").blur(function () {
      $("input[type=text][id*=LeaveHoursTextBox]").blur(function () {
        alert("On Blur");
        var num1 = parseInt(document.getElementById("LeaveHoursTextBox").value);
        var num2 = parseInt(document.getElementById("LeaveHours2TextBox").value);
        var num3 = parseInt(document.getElementById("LeaveHours3TextBox").value);
        var TotalTime = num1 + num2 + num3;
        document.getElementById("HoursTextBox").value = TotalTime;
    })
});
</script> 
```

离开第一个文本框时，上面的代码有效。我将如何将它们添加到同一个代码元素中，而不是复制和粘贴其他 2 个文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:14:12.817

```
$("#LeaveHoursTextBox,#otherTextBox,#thirdTextBox")... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:21:13.110

你不能给他们一个共同的类名吗？这似乎是更清洁的解决方案。

$('.textBoxes')

返回 -> [textbox1, textbox2, textbox4]

# php - 关闭窗口后PHP脚本仍然运行？

> ID：13073763
> 
> 赞同：0
> 
> 时间：2012-10-25T17:12:05.327
> 
> 标签：php, sleep

这真的很奇怪。我有一个 php 脚本，我故意添加了 60 秒的睡眠时间。我运行脚本三秒钟并关闭我的浏览器窗口。不知何故，它仍然执行它的功能，但有 60 秒的延迟..即使在窗口关闭后也是如此。

有人可以解释这是怎么可能的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:13:32.067

您的浏览器打开或关闭的事实没有任何区别。一旦 PHP 进程启动，它将继续运行直到结束。浏览器或没有浏览器。

这就像问“如果一棵树倒在森林里而周围没有人听到它，它会发出声音吗？”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:16:52.097

您实际上可以控制它，但是可以 - PHP 仅在输出尝试时检查用户中止

[http://php.net/manual/en/function.ignore-user-abort.php](http://php.net/manual/en/function.ignore-user-abort.php)

# windows - Windows 命令提示符中纯文本密码的安全性

> ID：13073765
> 
> 赞同：1
> 
> 时间：2012-10-25T17:12:06.920
> 
> 标签：windows, security, command-line

这是一个范围相当小的问题，但我正在运行许多涉及使用管理员密码的 Windows 命令提示符命令。我可以让命令的一部分是“/user:administrator /password:examplepassword”，其中 examplepassword 是明文，或者我可以只有“/user:administrator”，它会提示我输入密码，然后我输入蒙面 ( ***** ** *** ** ***** )。

所以，我的问题很简单：以明文形式输入密码安全吗？（显然除了它简单的过肩不安全感之外）。命令提示符会话关闭后，命令行参数是否保存在计算机上的任何位置？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:29:53.080

Windows 命令提示符不保存调用之间的历史记录。有几个[黑客](http://www.carehart.org/blog/client/index.cfm/2011/1/27/Saving_windows_command_prompt_history_to_file)试图模仿这种行为，但基本工具不支持它。

当然，命令行语句可以存储在批处理文件中，然后最好不要在行内声明密码。

否则，你是对的。使用第二个选项仅能保护您免于对打开的命令提示符（带有实时历史记录）进行偷窥或恶意访问。我个人认为这些是使用第二种选择的充分理由。

最后，值得注意的是，这两种解决方案都容易受到密钥记录的影响。

# mongodb - Mongodb聚合数组中的子文档

> ID：13073770
> 
> 赞同：4
> 
> 时间：2012-10-25T17:12:15.283
> 
> 标签：mongodb, mapreduce, aggregation-framework

我正在使用 mongodb 作为后端来实现一个小型应用程序。在这个应用程序中，我有一个数据结构，其中文档将包含一个包含子文档数组的字段。

我使用以下用例作为基础： [http ://docs.mongodb.org/manual/use-cases/inventory-management/](http://docs.mongodb.org/manual/use-cases/inventory-management/)

从示例中可以看出，每个文档都有一个名为 carted 的字段，它是一个子文档数组。

```
{
    _id: 42,
    last_modified: ISODate("2012-03-09T20:55:36Z"),
    status: 'active',
    items: [
        { sku: '00e8da9b', qty: 1, item_details: {...} },
        { sku: '0ab42f88', qty: 4, item_details: {...} }
    ]
} 
```

这非常适合我，除了一个问题：我想计算整个集合中的每个唯一项目（以“sku”作为唯一标识符键），其中每个文档将计数加 1（相同“sku”的多个实例）同一份文件仍将仅计入 1)。例如，我想要这个结果：

{ sku: '00e8da9b', doc_count: 1 }, { sku: '0ab42f88', doc_count: 9 }

在阅读了 MongoDB 之后，当您有如上所述的复杂模式时，我对如何（快速）执行此操作感到非常困惑。如果我正确理解了其他出色的文档，则可以使用聚合框架或 map/reduce 框架来实现此类操作，但这是我需要一些输入的地方：

*   考虑到结构的复杂性，哪个框架更适合实现我正在寻找的结果？
*   为了从所选框架中获得最佳性能，首选哪种索引？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T20:02:31.327

MapReduce 很慢，但它可以处理非常大的数据集。另一方面，聚合框架要快一些，但会在处理大量数据时遇到困难。

显示的结构的问题是您需要“$unwind”数组来破解数据。这意味着为每个数组项创建一个新文档，并使用聚合框架在内存中执行此操作。因此，如果您有 1000 个包含 100 个数组元素的文档，则需要构建一个包含 100,000 个文档的流，以便对它们进行分组和计数。

您可能想考虑看看是否有一个架构布局可以更好地为您的查询提供服务，但是如果您想使用聚合框架来执行此操作，那么您可以这样做（使用一些示例数据，因此整个脚本将放入 shell） ;

```
db.so.remove();
db.so.ensureIndex({ "items.sku": 1}, {unique:false});
db.so.insert([
    {
        _id: 42,
        last_modified: ISODate("2012-03-09T20:55:36Z"),
        status: 'active',
        items: [
            { sku: '00e8da9b', qty: 1, item_details: {} },
            { sku: '0ab42f88', qty: 4, item_details: {} },
            { sku: '0ab42f88', qty: 4, item_details: {} },
            { sku: '0ab42f88', qty: 4, item_details: {} },
    ]
    },
    {
        _id: 43,
        last_modified: ISODate("2012-03-09T20:55:36Z"),
        status: 'active',
        items: [
            { sku: '00e8da9b', qty: 1, item_details: {} },
            { sku: '0ab42f88', qty: 4, item_details: {} },
        ]
    },
]);

db.so.runCommand("aggregate", {
    pipeline: [
        {   // optional filter to exclude inactive elements - can be removed    
            // you'll want an index on this if you use it too
            $match: { status: "active" }
        },
        // unwind creates a doc for every array element
        { $unwind: "$items" },
        {
            $group: {
                // group by unique SKU, but you only wanted to count a SKU once per doc id
                _id: { _id: "$_id", sku: "$items.sku" },
            }
        },
        {
            $group: {
                // group by unique SKU, and count them
                _id: { sku:"$_id.sku" },
                doc_count: { $sum: 1 },
            }
        }
    ]
    //,explain:true
}) 
```

请注意，我已经 $group'd 两次，因为您说 SKU 每个文档只能计数一次，所以我们需要先整理出唯一的 doc/sku 对，然后将它们计数。

如果您希望输出稍有不同（换句话说，与您的示例完全一样），我们可以对它们进行 $project。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T15:37:54.367

使用最新的 mongo 构建（其他构建也可能如此），我发现 cirrus 答案的略有不同版本的性能更快并且消耗的内存更少。我不知道细节原因，似乎这个版本的 mongo 有更多的可能性来优化管道。

```
db.so.runCommand("aggregate", {
    pipeline: [
        { $unwind: "$items" },
        {
            $group: {
                // create array of unique sku's (or set) per id
                _id: { id: "$_id"},
                sku: {$addToSet: "$items.sku"}
            }
        },
        // unroll all sets
        { $unwind: "$sku" },
        {
            $group: {
                // then count unique values per each Id
                _id: { id: "$_id.id", sku:"$sku" },
                count: { $sum: 1 },
            }
        }
    ]
}) 
```

要匹配与问题完全相同的格式，应跳过按“_id”分组

# jquery - jQuery覆盖边框情况

> ID：13073773
> 
> 赞同：-2
> 
> 时间：2012-10-25T17:12:25.120
> 
> 标签：jquery, overlay, fadein, fadeout

我正在处理以下 JSFIDDLE 以显示叠加层。但是，当显示时，它在覆盖层周围有一个边框，似乎创建了一个更大的区域，因此在页面上放置了滚动条，我不知道为什么会这样？

[http://jsfiddle.net/Tnjew/2/](http://jsfiddle.net/Tnjew/2/)

js代码是：

```
$('.link').live('click',function(event){
    event.preventDefault();
    var $this    = $(this),
        $overlay = $('#overlay');

    $overlay.fadeIn();
});

$('#overlay').live('click',function(event){
    event.preventDefault();
    var $this    = $(this),
        $overlay = $('#overlay');

    $overlay.fadeOut();
}); 
```

​</p>

HTML 是：

```
<div id="overlay"><span><br /><br /><br /><br /><br /><br /><br />Click again to close overlay</span></div>

<div id="content">
    This is just a demo of this overlay
    <a class="link">Click HERE to show overlay</a>
</div> 
```

CSS是：

```
#overlay {
    position:absolute; 
    width:100%;
    height:100%;
    background-color:rgba(255,255,255,0.8);
    text-align:center;
    z-index:999;
    display:none;
}

#overlay span {
    text-align:center;
    z-index:1001;
}

body {background-color: #000; color: #fff;} 
```

我错过了什么（或需要取出）？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:17:30.723

只需添加：

```
html,
body{
    padding:0px;
    margin:0px;
} 
```

对于您的 css，这是修改后的[fiddle](http://jsfiddle.net/fXDu7/)。

注意：margin 是大多数浏览器中的关键，而 padding 与 margin 结合使用剩下的。

旁注：这实际上是大多数页面需要做的事情之一，以使它们在各种浏览器中显示相同。

编辑：

这是一个也可以解决这个问题的[小提琴](http://jsfiddle.net/hyp2u/)。问题是 jQuery 设置了错误的大小（在这些条件下），所以我们自己设置：

```
document.getElementById('overlay').style.height = window.getComputedStyle(document.getElementById('content')).height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:16:11.647

您需要添加 top:0; 左：0；到你的#overlay CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:24:04.350

我弄乱了您的内容/正文填充和边距。此外，因为您是绝对定位，您可以使用百分比指定与顶部/左侧的距离，以便您响应地调整边框大小：

[http://jsfiddle.net/jmwBW/](http://jsfiddle.net/jmwBW/)

```
#overlay {
    position: absolute;
    width:98%;
    height:98%;
    background-color:rgba(255,255,255,0.8);
    text-align:center;
    z-index:999;
    display:none;
    margin: auto;
    padding: 0;
    vertical-align: center;
    top: 1%;
    left: 1%;

}

#overlay span {
    text-align:center;
    z-index:1001;
}

#content{
    padding: 0;
    margin: 0;
}

body {
    background-color: #000; 
    color: #fff;
    margin: 0;
    padding: 0;
} 
```

​</p>

# sql - 按特定顺序更新记录

> ID：13073774
> 
> 赞同：1
> 
> 时间：2012-10-25T17:12:28.317
> 
> 标签：sql, oracle

我正在尝试更新表中的所有记录。当我阅读记录时，我需要使用集合中 NEXT 记录中的值更新当前记录中的列。问题是更新需要按指定的顺序完成。

我在想这样的事情......

```
Update t1
Set col1 = (select LEAD(col2,1) OVER (ORDER BY col3, col4, col5)
            from t1); 
```

这不会编译，但你看到我在做什么......有什么想法吗？

... 更新

这个 peice 运行成功，但只写入 NULLS

```
Update t1 A
Set t1.col1 = (select LEAD(col2,1) OVER (ORDER BY col3, col4, col5)
           from t1 B
           where A.col3 = B.col3 AND
                 A.col4 = B.col4 AND
                 A.col5 = B.col5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:48:47.870

这应该这样做：

```
merge into t1
using
(
   select rowid as rid, 
          LEAD(col2,1) OVER (ORDER BY col3, col4, col5) as ld
   from t1
) lv on ( lv.rid = t1.rowid )
when matched then 
  update set col1 = lv.ld; 
```

不是 100% 确定我的语法是否完全正确，但由于您没有提供任何测试数据，我会留下潜在的语法错误供您修复。

您还可以用`rowid`表的真正主键列替换使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:27:31.923

你为什么不使用光标？您可以在具有指定顺序的游标内使用更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:52:16.790

您可以使用以下`with`语句执行此操作：

```
with toupdate as (
    select t1.*,
           lead(col2, 1) over (order by col3, col4, col5) as nextval
    from t1
)
Update toupdate
    Set col1 = nextval 
```

顺便说一句，这并不能保证更新的*顺序*。但是，分区子句中没有提到 col2，因此它应该做正确的事情。

上述语法适用于 SQL Server，但不适用于 Oracle。原始问题没有指定数据库（并且`lead`是 SQL Server 2012 中的有效函数）。似乎该`merge`语句是获取子查询中的值的方式。

# python - Python：以优雅的方式（代码保存）改进函数以避免多个语句

> ID：13073777
> 
> 赞同：2
> 
> 时间：2012-10-25T17:12:38.947
> 
> 标签：python, performance, optimization, if-statement

我编写了这个函数来读取[Las](http://www.liblas.org/tutorial/python.html)文件并保存一个 shapefile。该函数创建一个包含 8 个字段的 shapefile。我希望在函数中插入一个**解析**元素以选择我希望保存的字段 LAS2SHP(inFile,outFile=None,parse=None)。如果 None 保存所有字段。如果**parse**为 parse="irn"，则保存场强度、return_number 和 number_of_returns。跟随传说

```
"i": p.intensity,
"r": p.return_number,
"n": p.number_of_returns,
"s": p.scan_direction,
"e": p.flightline_edge,
"c": p.classification,
"a": p.scan_angle, 
```

我写了一个解决方案 if....ifelse....else 真的很消耗代码（而不是优雅）。感谢所有关于保存代码的帮助和建议

提前感谢詹尼

这里是python中的原始函数

```
import shapefile
from liblas import file as lasfile

def LAS2SHP(inFile,outFile=None):
    w = shapefile.Writer(shapefile.POINT)
    w.field('Z','C','10')
    w.field('Intensity','C','10')
    w.field('Return','C','10')
    w.field('NumberRet','C','10')
    w.field('ScanDir','C','10')
    w.field('FlightEdge','C','10')
    w.field('Class','C','10')
    w.field('ScanAngle','C','10')
    for p in lasfile.File(inFile,None,'r'):
        w.point(p.x,p.y)
        w.record(float(p.z),float(p.intensity),float(p.return_number),float(p.number_of_returns),float(p.scan_direction),float(p.flightline_edge),float(p.classification),float(p.scan_angle))
    if outFile == None:
        inFile_path, inFile_name_ext = os.path.split(os.path.abspath(inFile))
        inFile_name = os.path.splitext(inFile_name_ext)[0]
        w.save("{0}\\{1}.shp".format(inFile_path,inFile_name))
    else:
        w.save(outFile) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:21:52.103

也许尝试这样的事情：

```
 pdata = [p.z] + [getattr(p, pattr[key]) for key in parse]
    pdata = map(float, pdata)
    w.record(*pdata) 
```

*   `for key in parse`循环遍历`parse`. 例如， if `parse = 'irn'`then key 循环遍历值`i`, `r`, `n`。
*   `pattr`是一个字典。`pattr[key]`是关联属性的名称。例如，`pattr['i']`是`"intensity"`。
*   `getattr(p, pattr[key])`是 中的`pattr[key]`属性值`p`。例如，`getattr(p, "intensity")`是`p.intensity`。当您知道属性名称为字符串（例如`pattr[key]`）时，这是获取属性值的方法。`*`in在将参数发送到 之前`w.record(*pdata)`解包。例如，等价于。这是[向函数发送任意数量的参数的](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)方式。`pdata``w.record``w.record(*[1,2,3])``w.record(1,2,3)`

* * *

例如，

```
import shapefile
from liblas import file as lasfile

pattr = {
    "i": 'intensity',
    "r": 'return_number',
    "n": 'number_of_returns',
    "s": 'scan_direction',
    "e": 'flightline_edge',
    "c": 'classification',
    "a": 'scan_angle',
    }

wattr = {
    "i": 'Intensity',
    "r": 'Return',
    "n": 'NumberRet',
    "s": 'ScanDir',
    "e": 'FlightEdge',
    "c": 'Class',
    "a": 'ScanAngle',
    }

def LAS2SHP(inFile, outFile=None, parse = 'irnseca'):
    w = shapefile.Writer(shapefile.POINT)
    w.field('Z','C','10')
    for key in parse:
        w.field(wattr[key],'C','10')
    for p in lasfile.File(inFile,None,'r'):
        w.point(p.x,p.y)
        pdata = [p.z] + [getattr(p, pattr[key]) for key in parse]
        pdata = map(float, pdata)
        w.record(*pdata)       
    if outFile == None:
        inFile_path, inFile_name_ext = os.path.split(os.path.abspath(inFile))
        inFile_name = os.path.splitext(inFile_name_ext)[0]
        w.save("{0}\\{1}.shp".format(inFile_path,inFile_name))
    else:
        w.save(outFile) 
```

# c# - 由于复制重复引用，构建时间长

> ID：13073778
> 
> 赞同：4
> 
> 时间：2012-10-25T17:12:47.447
> 
> 标签：c#, visual-studio-2010, msbuild, prism, mef

我有一个大型 WPF MEF PRISM 解决方案（100 多个项目），我们的构建时间在四核 8 GB 机器上大约是 2 分钟。

我将所有二进制文件输出到相同的输出路径“..\Bin”，以便我们的 MEF 引导程序可以扫描并找到所有程序集。

在对构建时间进行故障排除时，我注意到每个引用核心基础结构库的项目都会将此二进制文件复制到输出目录，从而为完全相同的文件生成多个副本。我觉得实际的编译速度很快，但是重复复制的数量正在缩短我的构建时间。

如果输出目录中已经存在相同版本的文件，有什么方法可以告诉项目不要复制引用？我已经有了带有较小项目集合的辅助 SLN 文件，这有助于大多数人缩短构建时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:00:15.873

在 Windows 中复制文件*非常*快，由于文件系统缓存，内存到内存的复制。特别是在构建中，因为文件是新创建的，因此它们的数据始终存在于缓存中。直到稍后缓存管理器懒惰地将文件数据写入磁盘时，才会真正写入磁盘。它在后台运行，不能减慢构建速度。文件复制速度较慢的唯一情况是文件系统缓存已满，必须等待缓慢的磁盘写入以腾出更多空间。

多次复制同一个文件，即使它不是由构建创建的，也同样快。您只需为第一次阅读文件付费。之后任何后续副本始终使用缓存的文件数据。

在具有 8 GB RAM 的机器上，.NET 解决方案无法将缓存填满并使其变慢。缓存应至少为 2 GB。编写一个生成 2 GB 代码和资源的 .NET 解决方案是不可能的。

您正在尝试解决错误的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:59:11.830

我认为这不是一个很好的解决方案，但是您可以让您的基础架构复制到输出目录，并且在任何引用它的地方您都可以将`CopyLocal`特定引用的属性设置为 False。我不是说这是唯一的选择，但它可以做你想做的事。我只是想帮忙。

编辑：

我不知道您是否这样做，但如果您不这样做，您可以将 MEF 所需`xcopy`的`post-build`那些 dll 复制到该输出目录。在这种情况下，您可以避免这些困难。

# api - Zend_Gdata_ClientLogin::getHttpClient 问题

> ID：13073779
> 
> 赞同：1
> 
> 时间：2012-10-25T17:12:52.110
> 
> 标签：api, zend-framework, frameworks, youtube

我正在使用 Youtube APIv2 开发一个项目。

我通过 Zend Gdata 通过 Zend Framework 使用 API。

我的应用程序正在查询 youtube api，获取视频提要，然后为每个条目获取每个视频条目的名称、拇指、视图、持续时间和标签。

正如谷歌 (http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html) 宣布的那样，现在获取每个视频条目的视频标签，youtube api 请求将通过以下方式进行身份验证拥有 youtube 上视频的用户以检索这些视频标签。

我所做的只是在我初始化 *Zend_Gdata_YouTube* 对象时添加一个开发者密钥和一个 httpClient 对象，如下所示：
`$developerKey = 'mydevkey';
$authenticationURL = 'https://www.google.com/youtube/accounts/ClientLogin';
$idApplication = 'my_app_id';
$idClient = null;
$httpClient = Zend_Gdata_ClientLogin::getHttpClient(
    $username = 'google_account_email',
    $password = 'google_account_pass',
    $service = 'youtube',
    $client = null,
    $source = 'my_app',
    $loginToken = null,
    $loginCaptcha = null,
    $authenticationURL);
$this->yt = new Zend_Gdata_YouTube($httpClient, $idApplication, $idClient , $developerKey);
$this->yt->setMajorProtocolVersion(2);`

我在 Mamp Pro 的本地项目中测试了这段代码，它工作得非常好，按原样检索视频标签，这意味着代码可以工作。

当我想把我的代码放在我的生产服务器上时，我的问题就开始了，*Zend_Gdata_ClientLogin::getHttpClient* 对象不工作并不断给我错误代码“ *Google 身份验证失败。原因：BadAuthentication* ”

我检查了其他人是否遇到了我的问题，然后我来到了这篇文章“http://apiblog.youtube.com/2011/03/clientlogin-fail.html”，但这四种情况都与我的问题不相似。

有人可以帮助我吗？我的生产服务器是否缺少模块或授权方面的某些内容（我检查它看起来不像）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T17:50:46.327

我有同样的问题。我的脚本在本地工作，但不在生产中。

将您的密码更改为新密码并首先在生产环境中运行您的脚本。

# c - 执行使用 lex 和 yacc 工具开发的 c 文件时出错

> ID：13073780
> 
> 赞同：2
> 
> 时间：2012-10-25T17:13:04.287
> 
> 标签：c, compiler-construction, yacc, lex

我正在尝试开发一个使用 lex 和 yacc 工具将中缀表达式转换为后缀表达式的程序。

这是源代码：

（Lex 程序：ipi.l）

```
 ALPHA [A-Z a-z]
 DIGIT [0-9]
 %%
 {ALPHA}({ALPHA}|{DIGIT})*    return ID;
 {DIGIT}+                                      {yylval=atoi(yytext); return ID;}
 [\n \t]                                              yyterminate();
 .                                                      return yytext[0];
 %% 
```

（Yacc 程序：ipi.y）

```
%{
#include <stdio.h>
#include <stdlib.h>
%}
%token    ID
%left    '+' '-'
%left    '*' '/'
%left    UMINUS

%%

S    :    E
E    :    E'+'{A1();}T{A2();}
     |    E'-'{A1();}T{A2();}
     |    T
     ;
T    :    T'*'{A1();}F{A2();}
     |    T'/'{A1();}F{A2();}
     |    F
     ;
F    :    '('E{A2();}')'
     |    '-'{A1();}F{A2();}
     |    ID{A3();}
     ;

%%

#include "lex.yy.c"
char st[100];
int top=0;

main()
{
 printf("Enter infix expression:  ");
 yyparse();
 printf("\n");
}

A1()
{
  st[top++]=yytext[0];
}

A2()
{
 printf("%c",st[--top]);
}

A3()
{
  printf("%c",yytext[0]);
} 
```

但是它给出了以下错误：

```
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/liby.a(yyerror.o): In function `yyerror':
 (.text+0x1c): undefined reference to `rpl_fprintf'
 collect2: ld returned 1 exit status 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:21:37.847

你应该提供你自己的`yyerror`，像这个：

```
void yyerror (char *s) {
    fprintf (stderr, "%s\n", s);
} 
```

资源：

[http://lists.gnu.org/archive/html/help-bison/2012-01/msg00016.html](http://lists.gnu.org/archive/html/help-bison/2012-01/msg00016.html)

# cuda - CUDA驱动4.2版本不匹配？295.40 与 295.41

> ID：13073786
> 
> 赞同：1
> 
> 时间：2012-10-25T17:13:33.423
> 
> 标签：cuda, linux-kernel, linux-device-driver, ubuntu-12.04, nvidia

我正在尝试在 Alienware Aurora 桌面系统上安装 CUDA 4.2。它运行 Ubuntu 12.04 和带有 Nvidia GTX 690 的 Linux 内核 3.2.0-32。我能够毫无问题地安装 CUDA SDK 和显示驱动程序。但是，当 Xorg 启动时，它会因以下错误而死：

*错误：API 不匹配：NVIDIA 内核模块的版本为 295.40，但 NVIDIA 驱动程序组件的版本为 295.41。请确保内核模块和所有 NVIDIA 驱动程序组件具有相同的版本。*

尝试运行 CUDA 应用程序时也会发生同样的事情。有什么想法吗？我有一个由十几个其他 CUDA 工作站组成的实验室，它们没有这个问题，但也在运行 Ubuntu 10.10。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:06:51.740

简而言之：Ubuntu 12 不是您支持的发行版。

如果您仍想在 usupported 平台上运行 cuda 并将自己暴露于其他此类问题，请参阅答案[https://stackoverflow.com/a/13062766/56875](https://stackoverflow.com/a/13062766/56875)

# haskell - 如何确定我的 GHC 版本？

> ID：13073792
> 
> 赞同：38
> 
> 时间：2012-10-25T17:13:58.250
> 
> 标签：haskell, version, ghc

这可能是一个非常愚蠢的问题，但我似乎无法找到答案......

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2017-08-23T22:39:15.843

为了找到我`stack`正在使用的版本，我跑了

```
$ stack ghc -- --version 
```

并得到

```
$ stack ghc -- --version
The Glorious Glasgow Haskell Compilation System, version 8.0.2 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-25T17:19:59.653

`ghc --version`在 Ubuntu 上成功了，谢谢 Karolis！

编辑：也适用于 mac（macOS Sierra 10.12.6）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-12-31T00:59:26.080

根据您的[安装方法](https://www.haskell.org/downloads/#platform)和体系结构，某些命令可能会有所不同。有些人可能安装了多个版本。以下是一些可能有用的信息：

***堆栈版本***

```
❯ stack --version
Version 2.1.3, Git revision 0fa51b9925decd937e4a993ad90cb686f88fa282 (7739 commits) x86_64 hpack-0.31.2 
```

***ghc 版本（如[@mherzl 所述](https://stackoverflow.com/users/3224967/mherzl)）***

```
❯ stack ghc -- --version
The Glorious Glasgow Haskell Compilation System, version 8.6.5 
```

***标准 ghc 版本命令***

```
❯ ghc --version
The Glorious Glasgow Haskell Compilation System, version 8.8.1 
```

***阴谋版***

```
❯ cabal --version
cabal-install version 3.0.0.0
compiled using version 3.0.0.0 of the Cabal library 
```

***GHC的repl***

```
❯ ghci --version
The Glorious Glasgow Haskell Compilation System, version 8.8.1 
```

***如果使用带有`-fllvm`标志的 llvm***

```
❯ llvm-gcc -v
Apple clang version 11.0.0 (clang-1100.0.33.16)
Target: x86_64-apple-darwin19.2.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin 
```

# unit-testing - 单元测试期间 Ada 中的异常处理

> ID：13073793
> 
> 赞同：3
> 
> 时间：2012-10-25T17:13:59.757
> 
> 标签：unit-testing, exception-handling, ada

我正在尝试为我最近编写的一些 Ada 代码编写一些单元测试，我有一个特殊情况，我期望得到一个异常（如果代码正常工作我不会，但在这种情况下，我所做的只是测试，而不是编写代码）。如果我在测试例程中处理异常，那么我看不到如何在该过程中继续测试。

IE（这是一个非常示例且不可编译的代码）

```
procedure Test_Function is
begin
  from -20 to 20
     Result := SQRT(i);

 if Result = (Expected) then
     print "Passed";
 end_if;

exception:
  print "FAILED";
end Test_Function 
```

我的第一个想法是我是否有一个“更深层次的函数”来实际执行调用并通过它返回异常。

IE（这是一个非常示例且不可编译的代码）

```
procedure Test_Function is
begin
  from -20 to 20
     Result := my_SQRT(i);

 if Result = (Expected) then
     print "Passed";
 end_if;

exception:
  print "FAILED";
end Test_Function

function my_SQRT(integer) return Integer is
begin
   return SQRT(i);
exception:
   return -1;
end my_SQRT; 
```

从理论上讲，我希望这会起作用，我只是讨厌在我的 test_function 预期进行实际测试时不得不继续编写子函数。

有没有办法在遇到异常 IN Test_Function 后继续执行，而不必编写包装函数并通过它调用？或者是否有更简单/更好的方法来处理这种情况？

*对不起，糟糕的代码示例，但我认为这个想法应该很清楚，如果不是我会重新编写代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:29:09.483

您可以在循环内添加一个块。使用您的伪语法，它看起来像：

```
procedure Test_Function is
begin
  from -20 to 20
    begin
      Result := SQRT(i);

      if Result = (Expected) then
         print "Passed";
      end_if;

    exception:
      print "FAILED";
    end;
  end loop;
end Test_Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T07:13:42.663

您可能想查看 AUnit 文档中的“Assert_Exception”过程和[文档](http://docs.adacore.com/aunit-docs/aunit.html#Test-Cases)

相关的例子是：

```
 -- Declared at library level:
         procedure Test_Raising_Exception is
         begin
            call_to_the_tested_method (some_args);
         end Test_Raising_Exception;

      -- In test routine:
      procedure My_Routine (...) is
      begin
         Assert_Exception (Test_Raising_Exception'Access, String_Description);
      end; 
```

# unix - 使用 unix 将 .php 文件扩展名替换为 .html 扩展名

> ID：13073795
> 
> 赞同：1
> 
> 时间：2012-10-25T17:14:02.403
> 
> 标签：unix, build-script

我正在创建一个构建脚本以在生成 .html 文件后对其进行扫描，但我似乎不知道如何使其工作。这是一个片段：

```
for PAGE in ${PAGES[@]}
do
    echo "\t\t\t- $DIR_PRE$PAGE.html"
    echo "\t\t\t- cleaning links in $DIR_PRE$PAGE.html"
    php helper.php output lang=$GET+environment=prod+page=$PAGE > $SITE/$DIR_PRE$PAGE.html
    find * -name \*.html -print0 | xargs -0 sed --in-place -e 's~.php~.html~g'
done 
```

最后一个 find 命令应该在 .html 文件中找到带有 .php 扩展名的链接并将其替换为 .html 但我收到此错误：

> sed：非法选项 -- - 用法：sed script [-Ealn] [-i extension] [file ...] sed [-Ealn] [-i extension] [-e script] ... [-f script_file] 。 .. [文件...] - wiiu.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:35:44.420

如果要将当前目录中的所有 .html 文件递归重命名为 .php ：

`find . -name "*.html" -exec rename .html .php {} \;`

编辑：误解了这个问题。您可以使用 sed 替换文件中的字符串：

`sed -i 's/.html/.php/g' *.html`

# c++ - 如何在 C++ 中以编程方式确定 MTU

> ID：13073797
> 
> 赞同：2
> 
> 时间：2012-10-25T17:14:06.430
> 
> 标签：c++, networking, udp, mtu

我正在开发一个应用程序，我需要将多个 UDP 数据包中的大数据发送到客户端，如何以编程方式确定我的 UDP 套接字的 MTU？

我需要能够在 Windows 和 linux 上执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:16:03.127

您可以在 IP 标头中设置“不分片”标志。然后，您可能会收到有关所需分片的 icmp 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-12T16:04:58.847

这是我的[eventdispatcher 库](https://github.com/m2osw/eventdispatcher)中的两个函数（有关更多详细信息，请查看[udp_base.cpp](https://github.com/m2osw/eventdispatcher/blob/master/eventdispatcher/udp_base.cpp#L212)）。

第一个返回实际的 MTU 大小。通常 1500 用于计算机间通信。在 locahost 上它可以更大（大约 64K）。

MTU 大小的问题在于它包含您的数据以外的数据。换句话说，您可用的大小不是 MTU。相反，您必须找出 MSS 是什么。这是下面的第二个功能。

到目前为止一切顺利，它可以在 Linux 下运行，我想 MS-Windows 可能有类似的调用，只是 API 不同。

```
/** \brief Retrieve the size of the MTU on that connection.
 *
 * Linux offers a ioctl() function to retrieve the MTU's size. This
 * function uses that and returns the result. If the call fails,
 * then the function returns -1.
 *
 * The function returns the MTU's size of the socket on this side.
 * If you want to communicate effectively with another system, you
 * want to also ask about the MTU on the other side of the socket.
 *
 * \note
 * MTU stands for Maximum Transmission Unit.
 *
 * \note
 * PMTUD stands for Path Maximum Transmission Unit Discovery.
 *
 * \note
 * PLPMTU stands for Packetization Layer Path Maximum Transmission Unit
 * Discovery.
 *
 * \todo
 * We need to support the possibly dynamically changing MTU size
 * that the Internet may generate (or even a LAN if you let people
 * tweak their MTU "randomly".) This is done by preventing
 * defragmentation (see IP_NODEFRAG in `man 7 ip`) and also by
 * asking for MTU size discovery (IP_MTU_DISCOVER). The size
 * discovery changes over time as devices on the MTU path (the
 * route taken by the packets) changes over time. The idea is
 * to find the smallest MTU size of the MTU path and use that
 * to send packets of that size at the most. Note that packets
 * are otherwise automatically broken in smaller chunks and
 * rebuilt on the other side, but that is not efficient if you
 * expect to lose quite a few packets. The limit for chunked
 * packets is a little under 64Kb.
 *
 * \note
 * errno is either EBADF or set by ioctl().
 *
 * \sa
 * See `man 7 netdevice`
 *
 * \return -1 if the MTU could not be retrieved, the MTU's size otherwise.
 */
int udp_base::get_mtu_size() const
{
    if(f_socket != nullptr
    && f_mtu_size == 0)
    {
        addr::addr a;
        switch(f_addrinfo->ai_family)
        {
        case AF_INET:
            a.set_ipv4(*reinterpret_cast<struct sockaddr_in *>(f_addrinfo->ai_addr));
            break;

        case AF_INET6:
            a.set_ipv6(*reinterpret_cast<struct sockaddr_in6 *>(f_addrinfo->ai_addr));
            break;

        default:
            f_mtu_size = -1;
            errno = EBADF;
            break;

        }
        if(f_mtu_size == 0)
        {
            std::string iface_name;
            addr::iface::pointer_t i(find_addr_interface(a));
            if(i != nullptr)
            {
                iface_name = i->get_name();
            }

            if(iface_name.empty())
            {
                f_mtu_size = -1;
                errno = EBADF;
            }
            else
            {
                ifreq ifr;
                memset(&ifr, 0, sizeof(ifr));
                strncpy(ifr.ifr_name, iface_name.c_str(), sizeof(ifr.ifr_name));
                if(ioctl(f_socket.get(), SIOCGIFMTU, &ifr) == 0)
                {
                    f_mtu_size = ifr.ifr_mtu;
                }
                else
                {
                    f_mtu_size = -1;
                    // errno -- defined by ioctl()
                }
            }
        }
    }

    return f_mtu_size;
}

/** \brief Determine the size of the data buffer we can use.
 *
 * This function gets the MTU of the connection (i.e. not the PMTUD
 * or PLPMTUD yet...) and subtract the space necessary for the IP and
 * UDP headers. This is called the Maximum Segment Size (MSS).
 *
 * \todo
 * If the IP address (in f_addr) is an IPv6, then we need to switch to
 * the corresponding IPv6 subtractions.
 *
 * \todo
 * Look into the the IP options because some options add to the size
 * of the IP header. It's incredible that we have to take care of that
 * on our end!
 *
 * \todo
 * For congetion control, read more as described on ietf.org:
 * https://tools.ietf.org/html/rfc8085
 *
 * \todo
 * The sizes that will always work (as long as all the components of the
 * path are working as per the UDP RFC) are (1) for IPv4, 576 bytes, and
 * (2) for IPv6, 1280 bytes. This size is called EMTU_S which stands for
 * "Effective Maximum Transmission Unit for Sending."
 *
 * \return The size of the MMU, which is the MTU minus IP and UDP headers.
 */
int udp_base::get_mss_size() const
{
    // where these structures are defined
    //
    // ether_header -- /usr/include/net/ethernet.h
    // iphdr -- /usr/include/netinet/ip.h
    // udphdr -- /usr/include/netinet/udp.h
    //
    int const mtu(get_mtu_size()
            //- sizeof(ether_header)    // WARNING: this is for IPv4 only -- this is "transparent" to the MTU (i.e. it wraps the 1,500 bytes)
            //- ETHER_CRC_LEN           // this is the CRC for the ethernet which appears at the end of the packet
            - sizeof(iphdr)             // WARNING: this is for IPv4 only
            //- ...                     // the IP protocol accepts options!
            - sizeof(udphdr)
        );

    return mtu <= 0 ? -1 : mtu;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-21T16:07:44.447

发现最佳 MTU 的最常见方法是使用命令“ping”

```
ping -M do -s MTU_N www.google.com  # Linux
ping www.google.com -f -l MTU_N     # Windows 
```

其中 MTU_N 是您要测试的 MTU。这样，您可以将 MTU_N 从 500 迭代到 1900，直到获得最佳速度。

但是最好的 MTU 将取决于几件事：

*   您的网络设置
*   你在VPN下吗？
*   局域网还是无线？

因此，每次这些因素发生变化时，您都需要重新测试。

# javascript - 在 jQuery 对象上定义方法在 IE 中不起作用

> ID：13073798
> 
> 赞同：-1
> 
> 时间：2012-10-25T17:14:09.307
> 
> 标签：javascript, jquery, internet-explorer

我有以下内容：

```
$.fn.myFunction = (action) ->
  console.log "hello!" 
```

当我打电话时

```
$(".myDiv").myFunction() 
```

它在 firefox、chrome 和 safari 中运行良好，但在 IE 中失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:16:39.617

您的 jQuery 选择器会查找带有标签“myDiv”的元素：

```
<myDiv> There is no such element in standard HTML </myDiv> 
```

Internet Explorer 往往不喜欢这样。你真的在“发明”元素吗？

也许你打算寻找这个：

```
<div id='myDiv'> This is more like it. </div> 
```

在这种情况下，您的选择器将是“#myDiv”：

```
$('#myDiv').myFunction(); 
```

请注意，`console`在（我认为）IE8 之前不存在。

# objective-c - FastPdfKit 警告

> ID：13073801
> 
> 赞同：0
> 
> 时间：2012-10-25T17:14:14.407
> 
> 标签：objective-c, xcode, warnings

我正在使用 FastPdfKit 框架，它本身非常好。不幸的是，由于开发人员不够关心，它产生了 74 个警告。我已联系开发人员，但没有收到任何帮助。

这是我收到的警告的一小部分示例：

```
(null): warning: (armv7) /Users/nick/Library/Developer/Xcode/DerivedData/FastPdfKit-fzecbtvxoxzaebbvelxsxcphcrom/Build/Intermediates/FastPdfKit.build/Release-iphoneos/FastPdfKit.build/Objects-normal/armv7/WebBrowser.o unable to open object file

(null): warning: (armv7) /Users/nick/Library/Developer/Xcode/DerivedData/FastPdfKit-fzecbtvxoxzaebbvelxsxcphcrom/Build/Intermediates/FastPdfKit.build/Release-iphoneos/FastPdfKit.build/Objects-normal/armv7/ReaderViewController.o unable to open object file

(null): warning: (armv7) /Users/nick/Library/Developer/Xcode/DerivedData/FastPdfKit-fzecbtvxoxzaebbvelxsxcphcrom/Build/Intermediates/FastPdfKit.build/Release-iphoneos/FastPdfKit.build/Objects-normal/armv7/OutlineViewController.o unable to open object file

(null): warning: (armv7) /Users/nick/Workspaces/MobFarm/git/FastPdfKitSample/FPKCore/libFastPdfKit.a(AudioStreamer.o) unable to open object file

(null): warning: (armv7) /Users/nick/Workspaces/MobFarm/git/FastPdfKitSample/FPKCore/libFastPdfKit.a(MFPDFOutline.o) unable to open object file 
```

我的名字是 James，所以我的项目所在的目录实际上是 Users/James/Developer。这个尼克家伙是开发人员，他不在乎。我怎么能去删除这些，或者蛮力隐藏这些特定的警告。我想避免隐藏我将来可能需要看到的任何其他警告。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:45:13.967

在您的项目 > 构建设置 > 构建选项 > 调试信息格式中，选择 DWARF 而不是带有 dSYM 文件的 DWARF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:06:13.113

我今天在创建框架时遇到了这个问题。

似乎无论我如何构建框架，当将其包含在另一个项目中时，我都会收到此类警告。

我解决这个问题的方法是反复试验，老实说，我仍然不明白发生了什么。

首先在 Xcode（对我来说是 4.5）编辑方案中，选择 Run 并将构建配置更改为 Release。（您可以使用 dSYM 文件将 Debug Information Format 保留为 DWARK，并且您希望可以符号化崩溃日志）

单击工具栏上的运行（注意 command+R 或 Product - Run 已禁用）。

然后一旦构建，右键单击产品中的框架并显示在查找器中。

在 Build/Products/Release-iphoneos 文件夹中选择框架。

现在应该没有这些警告。

如果有人知道这里发生了什么，请分享！

# delphi - 从EXE中提取文件

> ID：13073802
> 
> 赞同：2
> 
> 时间：2012-10-25T17:14:26.793
> 
> 标签：delphi, embedded-resource

我想`myfile`从我的 EXE 中提取一个没有扩展名的文件。

如果我`Resource.res`使用“Resource Builder”制作资源文件并将其添加到我的项目`{$R Resource.res}`中，我可以做到。

我正在使用此代码

```
implementation

{$R *.dfm}
{$R Resource.res}

procedure TForm1.Button1Click(Sender: TObject);
var
  fname :string;
  rStream : TResourceStream;
begin
  fname := 'myfile';
  rStream := TResourceStream.Create(hInstance, 'FILE1', RT_RCDATA) ;
  try
    rStream.SaveToFile(ExtractFilePath(ParamStr(0))+fname);
  finally
    rStream.Free
  end;
end; 
```

如果我使用“资源和图像...”将没有扩展名的文件添加到我的项目中，我会收到错误消息：“找不到资源文件 1”

如何`myfile`使用第二种方法提取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T13:21:01.877

您可以做的是将文件保存为程序中的字节（而不是资源）。

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Vcl.ComCtrls,
  Types;

type
  TForm1 = class(TForm)
    StatusBar1: TStatusBar;
    BitBtn1: TBitBtn;
    Button1: TButton;
    procedure BitBtn1Click(Sender: TObject);
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

function FileToByteConst(const AFileToRead, AFileToWrite,
  AConstName: string): boolean;
var
  _InputStream: TMemoryStream;
  _OutputStream: TFileStream;
  _WriterStream: TStreamWriter;
  i: Integer;
  p: PByte;
  _Line: string;
begin
  _InputStream := TMemoryStream.Create;
  try
    _InputStream.LoadFromFile(AFileToRead);

    _OutputStream := TFileStream.Create(AFileToWrite, fmCreate);
    try
      _WriterStream := TStreamWriter.Create(_OutputStream);
      try
        _WriterStream.WriteLine('const');
        _WriterStream.WriteLine(Format('  ' + UpperCase(AConstName) +
          ': array[0..%d] of Byte = (', [_InputStream.Size - 1]));

        p := _InputStream.Memory;
        for i := 0 to _InputStream.Size - 1 do
        begin
          _Line := _Line + Format('%d, ', [p^]);
          // We don't want line to be too long
          if Length(_Line) >= 80 then
          begin
            _WriterStream.WriteLine(_Line);
            _Line := '';
          end;
          p := PByte(Integer(p) + 1);
        end;

        SetLength(_Line, Length(_Line) - 2);
        _WriterStream.WriteLine(Format('%s);', [_Line]));
        Result := true;
      finally
        FreeAndNil(_WriterStream);
      end;
    finally
      FreeAndNil(_OutputStream);
    end;
  finally
    FreeAndNil(_InputStream);
  end;
end;

function ByteArrayToFile(const AByteArray: array of byte;
  const AFileName: string): boolean;
var
  _Count, _RecordsWritten: Integer;
  F: file of byte;
  _pTemp: Pointer;
begin
  Result := false;
  AssignFile(F, AFileName);
  Rewrite(F);
  try
    _Count := Length(AByteArray);
    _pTemp := @AByteArray[0];
    BlockWrite(F, _pTemp^, _Count, _RecordsWritten);
    if _RecordsWritten <> 0 then
      Result := true;
  finally
    CloseFile(F);
  end;
end;

procedure TForm1.BitBtn1Click(Sender: TObject);
begin
  if FileToByteConst('C:\Users\Edijus\Desktop\input.bmp',
    'C:\Users\Edijus\Desktop\const_inc.pas', 'my_array_2') then
    ShowMessage('OK')
  else
    ShowMessage('Failed to create constant array of bytes');
end;

procedure TForm1.Button1Click(Sender: TObject);
const
  // Unicode text file
  MY_ARRAY: array [0 .. 57] of byte = (255, 254, 108, 0, 97, 0, 98, 0, 97, 0,
    115, 0, 13, 0, 10, 0, 5, 1, 13, 1, 25, 1, 23, 1, 47, 1, 97, 1, 115, 1, 107,
    1, 57, 0, 48, 0, 45, 0, 126, 1, 13, 0, 10, 0, 118, 0, 97, 0, 107, 0, 97, 0,
    114, 0, 97, 0, 115, 0);
{$INCLUDE 'C:\Users\Edijus\Desktop\const_inc'}
begin
  if ByteArrayToFile(MY_ARRAY_2, 'C:\Users\Edijus\Desktop\BackToFile.bmp') then
    ShowMessage('OK')
  else
    ShowMessage('Failed to create file of bytes');
end;

end. 
```

# haskell - 功能反应香蕉型混淆

> ID：13073806
> 
> 赞同：4
> 
> 时间：2012-10-25T17:14:46.370
> 
> 标签：haskell, types, frp, reactive-banana

[Heinrich Apfelmus](https://stackoverflow.com/users/403805/heinrich-apfelmus)慷慨地附和了[这个](https://stackoverflow.com/questions/13035655/functional-banana-traveller-putting-together-behavior-t-gamestate/13050747#13050747)问题。我曾考虑将`accumB`其用作解决方案，但认为会有类型错误。无论如何尝试了他的建议后，我确​​实收到了一个类型错误。

```
let bGameState :: Behavior t GameState
    bGameState = accumB initialGS $ updateGS <$ eInput

yields the error

 Couldn't match expected type `GameState'
             with actual type `PlayerCommand'
 Expected type: GameState -> GameState
   Actual type: PlayerCommand -> GameState -> GameState
 In the first argument of `(<$)', namely `updateGS'
 In the second argument of `($)', namely `updateGS <$ eInput' 
```

所以我研究了`(<$)`，并搞砸了部分应用程序。看了他建议的例子。我这样做的次数越多，我就越认为上面的代码*应该可以*工作，但我对它为什么不工作感到困惑。

这是我认为应该发生的事情：

因为`(<$)`是类型`(<$) :: a -> f b -> f a`

并且 updateGS 是类型`updateGS :: PlayerCommand -> GameState -> GameState`

并且`eInput`是类型`Event t PlayerCommand`

那么不应该`updateGS <$ eInput`屈服

`Event t (GameState -> GameState)`?

我的推理在某个地方有缺陷，有人可以指出哪里吗？

更新：当我尝试使用时，`(<$>)`我收到以下错误

大纲.hs：158：21：

```
Could not deduce (t ~ t1)
from the context (Frameworks t)
  bound by a type expected by the context:
             Frameworks t => Moment t ()
  at outline.hs:(153,42)-(159,93)
  `t' is a rigid type variable bound by
      a type expected by the context: Frameworks t => Moment t ()
      at outline.hs:153:42
  `t1' is a rigid type variable bound by
       the type signature for bGameState :: Behavior t1 GameState
       at outline.hs:158:8
Expected type: Behavior t1 GameState
  Actual type: Behavior t GameState
In the expression: accumB initialGS $ updateGS <$> eInput
In an equation for `bGameState':
    bGameState = accumB initialGS $ updateGS <$> eInput 
```

供参考，这是整个功能

```
makeNetworkDescription :: AddHandler PlayerCommand -> IO EventNetwork
makeNetworkDescription addCommandEvent = compile $ do
   eInput <- fromAddHandler addCommandEvent
   let bCommand = stepper Null eInput
   eCommandChanged <- changes bCommand
   let bGameState :: Behavior t GameState
       bGameState = accumB initialGS $ updateGS <$> eInput
   reactimate $ (\n -> appendFile "output.txt" ("Command is " ++ show n)) <$>    
   eCommandChanged 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:46:05.917

**代码有什么问题**

你应该使用`<$>`，而不是`<$`。

*   `<$>`，也就是`fmap`将函数应用于右侧事件的值，这就是您在这种情况下要尝试做的事情。
*   `<$` *用左侧替换*右侧事件的值，为您提供与原始事件同时发生但始终包含相同值的事件。

    注：`x <$ e`与 相同`const x <$> e`。

**为什么你的推理是错误的**

我们正在尝试确定子项类型`updateGS <$ eInput`所在的类型：

```
(<$)     :: a -> f b -> f a
updateGS :: PlayerCommand -> GameState -> GameState
eInput   :: Event t PlayerCommand 
```

现在想一想：什么类型必须被实例化`a`？`b``f`

1.  由于`updateGS`是第一个`<$`具有类型的参数`a`，我们必须有

    ```
    a ~ PlayerCommand -> GameState -> GameState 
    ```

2.  同样，`eInput`第二个参数是`<$`type `f b`，所以

    ```
    f b ~ Event t PlayerCommand 
    ```

    类型 application associates to the left, 所以`Event t PlayerCommand`与 相同`(Event t) PlayerCommand`。因此我们可以确定

    ```
    f ~ Event t
    b ~ PlayerCommand 
    ```

3.  将结果的类型放在一起`f a`，我们看到

    ```
    f a ~ Event t (PlayerCommand -> GameState -> GameState) 
    ```

因此，`updateGS <$ eInput :: Event t (PlayerCommand -> GameState -> GameState)`，这解释了类型错误。

# java - python xpath 似乎不适用于某些元素

> ID：13073810
> 
> 赞同：0
> 
> 时间：2012-10-25T17:15:07.070
> 
> 标签：java, python, selenium, selenium-ide

我正在尝试硒。我使用 Selenium IDE 构建了一个快速脚本。它登录到一个页面，打开一个“搜索”窗口，进行搜索，然后打开一个结果。

当我在 Selenium IDE 中运行测试时，它运行良好。当我导出到 Java JUnit 4 测试用例时，它工作正常。但是当我导出到 Python 2 单元测试时，xpath 搜索似乎非常有问题......

**示例**：

该页面有一个 name='keyword' 的输入元素。当我使用 java 进行搜索时`driver.findElement(By.name("keyword"));`，一切都很好 - 它找到了元素。

当我使用 python 搜索时`browser.find_element_by_name("keyword")`，它似乎找不到它。我也尝试过`browser.find_element_by_xpath("//input[@name='keyword']")`and `browser.find_element_by_xpath("/html/body/form/div/ul/li[2]/input")`，其中第二个是我使用 firebug 和该`Copy XPath`功能时得到的 xpath。

在搜索输入之前，我尝试向 python 代码添加延迟，但无济于事。

有谁知道为什么 python 调用似乎找不到元素？这似乎发生在整个网络应用程序页面中的不同元素上（但在我到目前为止发现的 Selenium IDE 中没有发生）......

我很感激你们可以提供的任何帮助！

**编辑**：

控制台中显示的错误是：

```
Traceback (most recent call last):
  File "test.py", line 37, in <module>
    elem = browser.find_element_by_xpath("/html/body/form/div/ul/li[2]/input")
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 213, in find_element_by_xpath
    return self.find_element(by=By.XPATH, value=xpath)
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 671, in find_element
    {'using': by, 'value': value})['value']
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 156, in execute
    self.error_handler.check_response(response)
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/errorhandler.py", line 147, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.NoSuchElementException: Message: u'Unable to locate element: {"method":"xpath","selector":"/html/body/form/div/ul/li[2]/input"}' 
```

干杯

贾勒特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:21:31.227

事实证明，当单击链接时，该网站正在打开一个新窗口，但驱动程序仍在引用旧窗口。不知道为什么 Selenium IDE 导出没有捕捉到这一点。

无论如何，我不得不将驱动程序的窗口设置为新打开的窗口，然后它就可以正常工作了。

希望这可以帮助其他人。

干杯

贾勒特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T09:12:47.273

检查它是否在 iframe 内，如果是，则需要转到该 iframe。

```
driver.switch_to.default_content() 
driver.switch_to_frame("fameid") 
```

# ruby - 让 Cucumber 步骤在另一个步骤中验证由页面对象设置的变量

> ID：13073811
> 
> 赞同：1
> 
> 时间：2012-10-25T17:15:13.110
> 
> 标签：ruby, cucumber, pageobjects, page-object-gem

我正在使用 Cheezy 的 PageObject 来设置一些黄瓜测试。我的所有设置都非常像 Jeff Morgan 的书“Cucumber & Cheese”。

现在我有一个页面对象“PublishPage”设置，它有一个设置变量@tag 的方法。例如我在文件 publish_page.rb

```
Class PublishPage
  def tag
  #some steps left out
  @tag = "123"
  end

  def verify_tag
  #some steps left out
  @tag.should include "2"
  end
end 
```

在黄瓜步骤中，我有一个步骤`on_page(PublishPage).tag`，然后在另一个步骤中我有`on_page(PublishPage).verify_tag`。在我的 env.rb 文件中，我有`require 'rspec-expectations'`.

问题是，当我运行此代码时，我收到一条错误消息`undefined method 'include' for #<PublishPage:xxxxxx>`。但是，如果我将 verify_tag 方法中的代码移动到步骤中，一切正常，除了它无权访问@tag ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:00:21.947

这应该像添加一样简单

```
include RSpec::Matchers 
```

到您的页面对象。

另一种选择是`@tag`通过某种方法暴露，然后在你的 Cucumber 步骤中说类似

```
on_page(PublishPage).the_displayed_tag.should include("2") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:40:58.997

每次调用 on_page(PublishPage) 时，它都会实例化一个新的页面对象。您很可能会收到“无法将 nil 转换为字符串”错误，因为您正在从新对象引用实例变量，因此它的值是 nil。如果您在调用 page.tag 和 page.verify_tag 之间仅实例化一次页面对象，则不应再出现该错误。

以这种方式做事将使用页面对象的一个​​实例，允许您在步骤定义之间保持不变。

```
When /I publish a tag/ do
   #on_page(PublishPage).tag
   @publish_page = PublishPage.new @browser
   @publish_page.tag
end

Then /I should have my tag/ do
   @publish_page.verify_tag 
end 
```

希望这可以帮助！

# java - 有没有办法在 javafx WebView 中播放 flash？

> ID：13073812
> 
> 赞同：1
> 
> 时间：2012-10-25T17:15:26.060
> 
> 标签：java, flash, javafx

我需要在我的 javafx 应用程序中播放来自网络的视频内容（为了获胜），我可以用 WebView 解决这个问题还是有任何其他合适的控件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:46:29.647

不，[WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)不支持 Flash 播放。

您可以尝试[DJ 项目 Native Swing 组件中的 Flash Player](http://djproject.sourceforge.net/ns/index.html)。（这不是该项目的建议，我从未使用过它）。

或者，您可以使用[HostServices.showDocument](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#showDocument%28java.lang.String%29)打开浏览器播放 flash 内容，让浏览器担心引导用户获取相应的插件。

# php - ie上的jquery动态内容

> ID：13073814
> 
> 赞同：0
> 
> 时间：2012-10-25T17:15:36.727
> 
> 标签：php, jquery

我正在开发的网站有问题。动态加载的 div (ajax) 在 IE9 中是空的，并且在 firefox 上效果不佳（php 无法编译），我可以在 div 中读取我的 php 文件的源代码。我尝试了很多解决方案，例如从 GET 更改为 POST 或向 url 添加唯一 id 或发出异步请求，但内容绝对是空的。有任何想法吗？谢谢

```
function pageload(hash) {
    if(hash == '' || hash == null)
    {
      document.location.hash = "#php"; // home page
    }

    if(hash)
    {
     getPage();
    }

} 

function getUniqueTime() {
   var time = new Date().getTime();
   while (time == new Date().getTime());
   return new Date().getTime();
}   

function getPage() {
   var str = getUniqueTime();
   console.log(str);
   var data = 'page=' + encodeURIComponent(document.location.hash);
   $('#content').fadeOut(200);
    $.ajax({
        url: "loader.php?_=" + str, 
        type: "POST",       
        data: data,     
        cache: false,
        success: function (html) {          
                  $('#content').fadeIn(200);
                  $('#content').html(html);
             }      
    });
} 
```

编辑：

```
 //loader.php
<?
require_once('session.class.php');
require_once('user.class.php');

$se = new session();
$lo = new user();

$se->regenerate();

if(isset($_POST))
{
$alpha = (string) $_POST['page'];

if($alpha == '#php')
{
  include 'homeloader.php';
}

else if($alpha == '#cplus')
{
 include 'cplusloader.php';
}

else if($alpha == '#web')
{
  include 'underloader.php';
}

else if($alpha == '#about')
{
  include 'underloader.php';
}

else if($alpha == '#social')
{
  include 'socialloader.php';
}
  }
else
  $page = 'error';

 echo $page;
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:33:45.763

尝试这个：

```
//on click of a button:
$("#button").live("click", function(){

   //get you string data
   var str = "test";
   //do new version of ajax
   $.post("loader.php", {str:str}, function(html){
      $('#content').html(html);
   });
}); 
```

而且您不再需要使用 AJAX 方法 $.post 效果惊人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:29:26.277

`php doesn't compile`? `async request`? 实际上没有指定`ascync: true`请求是异步执行的，在 jQuery 1.8 版本中根本没有同步 AJAX 请求。附加一个错误处理程序，您将看到您的请求可能会导致错误：

```
 ...
    cache: false,
    success: function (html) {          
              $('#content').fadeIn(200);
              $('#content').html(html);
    },
    error: function (a,b) {
      alert('Error!');
    }
    ... 
```

通常 AJAX 由两部分组成 - 客户端和服务器端。我没有看到您的问题中发布的服务器端。你必须检查他们两个。做一个简单`loader.php`的返回字符串`success`并去掉所有额外的 get 参数。首先在浏览器中测试您的 php 文件以确保它可以正常工作。检查 FireBug 是否有 javascript 错误...

# php - 避免在 Zend 框架路由中使用两次“/index/index”

> ID：13073815
> 
> 赞同：1
> 
> 时间：2012-10-25T17:15:37.260
> 
> 标签：php, zend-framework, routes, zend-route

我是 Zend 框架的新手。我有一个页面是：

```
http://localhost/demo/public/index/index/catid/art 
```

我想把它改成

```
http://localhost/demo/public/art 
```

我不知道该怎么做。

另外，为什么要放`index`两次？甚至我的分页也有，比如：

```
http://localhost/demo/public/index/index/page/2 
```

在我看来有点烦人。我希望分页是

```
http://localhost/demo/public/page/2 
```

有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:31:38.763

默认路由通过使用：

`/module/controller/action`

因此，如果您有一个名为“default”的模块，一个名为“index”的控制器，以及一个名为“index”的操作，那么引用该特定操作的最详细方法是：

`/module/controller/action`

为了设置路线，您将使用：

```
$route = new Zend_Controller_Router_Route(
           'page/:page',
           array(
              'module' => 'default'
              'controller' => 'index',
              'action' => 'index'
            ),
            array(
               'page' => '\d+'
             )
          ); 
```

然后，您可以使用在控制器中获取页面参数

`$this->getRequest->getParam("page");`

# python - sqlite3：我可以安全地等待 commit()

> ID：13073817
> 
> 赞同：2
> 
> 时间：2012-10-25T17:15:43.220
> 
> 标签：python, sqlite

我将 10,000,000 多条记录插入到 sqlite 库中。我等到`connection.commit()`完成所有插入是否安全？还是存在一些内存不足/溢出风险？未提交的条目是否可能会使用所有可用内存并导致页面交换？每次提交`INSERT`都是性能杀手，所以我想避免它。

我在 Python 中使用[sqlite3模块](http://docs.python.org/library/sqlite3.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:18:33.540

一次提交所有插入是完全可以接受的优化。如果*应该*发生错误（这不太可能），那么它将发生在客户端库中，此时您可以考虑解决该问题。但过早地担心这一点是没有必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:20:12.337

好吧，首先，sqlite 并不是真的要处理那么多数据。它通常用于较小的数据集。但是，如果您要在每 2 或 3 次插入后提交，那么在一次提交所有数据时提交这么多数据可能需要更长的时间。

就您的内存/溢出风险而言，sqlite 将所有内容转储到文件缓存中，然后在提交时将所有文件缓存放入 sqlitedb 文件中。

但是，一次全部提交*不应该*给您带来任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:00:07.147

SQLite 的[回滚日志](http://www.sqlite.org/atomiccommit.html)将所有页面的旧内容存储在数据库文件中。

如果你只是插入数据，你实际上并没有改变很多已经在数据库中的数据（只是一些管理结构），所以不会为事务积累太多的开销数据。

[（如果您启用了WAL 模式](http://www.sqlite.org/wal.html)，情况会有所不同。）

# list - SharePoint 2010 中跨 2 个列表的库存管理计算字段

> ID：13073822
> 
> 赞同：1
> 
> 时间：2012-10-25T17:16:02.703
> 
> 标签：list, sharepoint, field

我需要一个公式来计算工作订单完成后剩余的库存量。我正在开发的工单是 sharepoint 中的一个单独列表，我也有一个库存列表。

在库存清单中，我有一个名为的字段`amountinventoried`，`itemname`用户将在上次手动库存期间将我们手头上的物品数量放入其中。

在工作订单列表上，我有一个名为的字段`itemused`，`amountused`我需要找到一个公式用于库存列表中的计算字段，该公式会输出并简单地从 中减去，`amountused`但`amountinventoried`前提是`itemused`和`itemname`字段匹配。

我已经为此工作了很长一段时间并且碰壁了，我可能忽略了一些非常容易的事情，但我仍然是 sharepoint 2010 的新手。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:28:02.143

您可以在工作订单列表的分组视图中执行此操作（[有点像这样](http://chanakyajayabalan.wordpress.com/2010/07/01/summing-calculated-columns-in-group-by-in-sharepoint-list-dataview-webpart/)），但我认为您所做的设计不适合使用 SharePoint 列表。

您最好使用 SQL 数据库来托管和计算数据，并使用 Business Connectivity Services 将其作为外部列表连接到 SharePoint（[此处简要说明](https://www.nothingbutsharepoint.com/sites/eusp/Pages/sharepoint-2010-external-lists.aspx)）。

这让您受益于 SharePoint 中的 CRUD 功能，以及 SQL 视图和表中可用的额外计算和技巧。

# sql-server-2008 - 当某些行的列没有值时，如何在 SQL 报表生成器中合并行？

> ID：13073826
> 
> 赞同：1
> 
> 时间：2012-10-25T17:16:07.193
> 
> 标签：sql-server-2008, duplicates, rows, reportbuilder3.0

我收到了一份相当复杂的报告并要求对其进行更新，以便用户可以输入多个参数的值（其中一些然后在多值参数中显示选择），以便生成所有计算机名称的列表，其中包含一个或更具体的软件包安装在他们身上。

主查询的“简化”版本（如下所示）有效，但不幸的是，该报告有时会为同一台计算机上的同一软件包列出几乎重复的行；一个有安装日期，另一个没有安装。也有没有安装日期的记录，但没有对应的安装日期记录。

我可以通过在 WHERE 子句中添加“AND arp.InstallationDate0 IS NOT NULL”来消除没有安装日期的行，但是如何更改查询，以便如果存在重复记录，则只显示具有安装日期的记录，然而如果只存在一条没有安装的记录，是否显示该记录？

谢谢你尽你所能的帮助。

```
SELECT DISTINCT sys.Name0 , arp.DisplayName0 , arp.Version0 , arp.InstallDate0 

FROM v_R_System sys 

INNER JOIN (SELECT * FROM v_GS_ADD_REMOVE_PROGRAMS UNION SELECT * 
  FROM v_GS_ADD_REMOVE_PROGRAMS_64) arp ON sys.ResourceID = arp.ResourceID 

INNER JOIN v_FullCollectionMembership fcm ON sys.ResourceID = fcm.ResourceID 

WHERE arp.DisplayName0 IN (@productname) AND COALESCE (arp.Version0, '') LIKE @version  
  AND fcm.CollectionID IN (@selectcollection) 

ORDER BY sys.Name0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:24:03.433

将安装日期包装在聚合函数和 isnull 函数中。

```
max(isnull(arp.InstallDate0, '31-Dec-1900')) as installdate0 
```

确保也包括该`group by`子句。

# java - 图像绘图适用于 JFrame，但不适用于 JPanel

> ID：13073828
> 
> 赞同：2
> 
> 时间：2012-10-25T17:16:14.713
> 
> 标签：java, image, swing, jpanel, paintcomponent

我正在研究一些简单的应用程序来熟悉 Swing 并遇到问题。

我试图有一个包含图像（在面板中）的框架以及用于放大/缩小图像的按钮。

我已经能够使添加图像的框架正常工作（尽管存在一些框架大小问题，但这是另一回事），但是，当我调用相同的组件类将其添加到面板时，什么也没有出现。我希望你们中的一个可以帮助阐明情况。

代码：

图像框架 - 如图所示工作

```
class ImageFrame extends JFrame{

public ImageFrame(){
    setTitle("Java Image Machine");

    init();
    pack();
}   

public final void init(){
    //ZoomPanel zoomPanel = new ZoomPanel();
    //ImagePanel imagePanel = new ImagePanel();
    ImageComponent component = new ImageComponent();

    //this.add(zoomPanel, BorderLayout.CENTER);
    this.add(component);
    //this.add(imagePanel, BorderLayout.SOUTH);
}
} 
```

但是，在直接调用 ImageComponent 的同时使用 ImagePanel 或添加 ZoomPanel，不会：

```
class ImagePanel extends JPanel{    
public ImagePanel(){
    //setBorder(BorderFactory.createLineBorder(Color.black));
    ImageComponent component = new ImageComponent();
    add(component);
}   
} 
```

组件类：

```
class ImageComponent extends JComponent{
public ImageComponent(){

    try{
        image = ImageIO.read(new File("test1.bmp"));
    }
    catch ( IOException e ){
        e.printStackTrace();
    }

    System.out.println("W: " + image.getWidth(this) + " H: " + image.getHeight(this));
}

public void paintComponent( Graphics g ){
    super.paintComponent(g);
    if (image == null)
        return;

    width = image.getWidth(this);
    height = image.getHeight(this);

    //System.out.println("Image should be painted");
    g.drawImage(image, 0, 0, null);
}

private Image image;
public int width;
public int height; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:34:39.337

它对我来说很好（我刚刚测试了`ImageComponent`课程）：

![在此处输入图像描述](../Images/a45eb193b401917fc1588b6dcc29297d.png)

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;

public class Test {

    /**
     * Default constructor Test.class
     */
    public Test() {
        initComponents();
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() {
        JFrame jFrame = new JFrame();
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //add ImageComponent to JFrame instance
        jFrame.add(new ImageComponent());

        //pack frame (size JFrame to match preferred sizes of added components and set visible
        jFrame.pack();
        jFrame.setVisible(true);
    }
}

class ImageComponent extends JComponent {

    private Image image;
    public int width;
    public int height;

    public ImageComponent() {
        try {
            image = ImageUtils.scaleImage(300, 300, ImageIO.read(new URL("http://harmful.cat-v.org/software/_java/java-evil-edition.png")));
            //image =  ImageIO.read(new URL("http://harmful.cat-v.org/software/_java/java-evil-edition.png"));//uses images scale
        } catch (Exception e) {
            e.printStackTrace();
        }

        //so we can set the JPanel preferred size to the image width and height
        ImageIcon ii = new ImageIcon(image);
        width = ii.getIconWidth();
        height = ii.getIconHeight();
    }

    //so our panel is the same size as image
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        if (image == null) {
            return;
        }

        width = image.getWidth(this);
        height = image.getHeight(this);

        g.drawImage(image, 0, 0, null);
    }
}
//class used for scaling images
class ImageUtils {

    static Image scaleImage(int width, int height, BufferedImage filename) {
        BufferedImage bi;
        try {
            bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = (Graphics2D) bi.createGraphics();
            g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
            g2d.drawImage(filename, 0, 0, width, height, null);
        } catch (Exception e) {
            return null;
        }
        return bi;
    }
} 
```

`JPanel`问题可能是文件的路径，或者宽度和高度与图片不同的事实，因此我们根据以下`getPrefferedSize(...)`内容覆盖`JPanel`并返回正确的大小`Image`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:22:02.970

您是否尝试`repaint()`在添加适当的组件后添加调用？

IE

```
class ImagePanel extends JPanel{    
    public ImagePanel(){
        //setBorder(BorderFactory.createLineBorder(Color.black));
        ImageComponent component = new ImageComponent();
        add(component);
        repaint();
    }   
} 
```

还要仔细检查您是否将 ImagePanel（包含 ImageComponent）添加到 ImageFrame，并调用 .setVisible(True)。

# javascript - 溢出：html5 画布上的自动 div

> ID：13073831
> 
> 赞同：0
> 
> 时间：2012-10-25T17:16:20.157
> 
> 标签：javascript, html

我有一个 div，其中一些内容位于画布上。div的内容长于div的高度，所以我设置样式有overflow:auto。问题是，画布似乎占用了所有鼠标输入，我无法滚动 div。

这是一些演示我的问题的示例代码：

```
<html>

<head></head>

<body>
<canvas width="1024" height="768" id = "canvas_1" style="position: absolute; z-index: 1;border:3px solid black;"></canvas>

<div style="position:absolute; width:1024px;height:668px;position:absolute;border:1px solid red;overflow:auto;">
<h1>About us</h1>

    <h2>What We Do</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean feugiat eros id est volutpat feugiat. Etiam aliquam varius malesuada. Nam condimentum erat justo. Donec id nisl in ligula ullamcorper vehicula id in neque. Suspendisse gravida, diam sit amet egestas tincidunt, dolor enim molestie elit, in ultrices tortor tellus ac risus </p>
    <h2>Who We Are</h2>
    <p> Sed non nisi nisi. Ut leo elit, aliquam ac dignissim lacinia, ultrices sit amet dolor. Nunc elementum sagittis dolor vitae lacinia. Nam tristique libero ut nisi euismod cursus ac non justo. Cras id sem sem. </p>
    <h2>Something Else</h2>
    <p> Curabitur lacinia dapibus consectetur. Praesent ligula lectus, vestibulum quis ullamcorper non, fringilla in justo. Vivamus ac orci felis. </p>

<h1>Contact us</h1>
    <h2>Email</h2>
    <p>someone@example.com</p>
    <h2>Phone</h2>
    <p>867-5309</p>
    <h2>Fax</h2>
    <p>867-5309</p>

</div>

</body>

</html> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:21:35.060

您需要为 DIV 设置比 CANVAS 更高的 z-index。我建议z-index：2！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:09:35.120

div 显示在画布上方只是因为您在画布标签之后编写了它。要使滚动条正常工作，请保持 div 的 z-index 大于画布。

因为你有 z-index : 1 的 canvas ， z-index : 2 也适用于 div

如果您添加更多标签，标签总是会堆积起来，以便使用 z-index 属性使它们完美工作

# javascript - NivoSlider 3.1 - 包括键盘导航

> ID：13073839
> 
> 赞同：0
> 
> 时间：2012-10-25T17:16:50.533
> 
> 标签：javascript, jquery, nivo-slider

我正在使用 WordPress 和一个名为“jj-ngg-jquery-slider”的插件，它使用了 nivo-slider。默认情况下，此插件附带 Nivo Slider 2.6，但我已将脚本升级到其最新版本 3.1。然后我意识到`keyboardNav`这个版本的支持被删除了。现在我正在尝试将其包含`keyboardNav`在脚本中，但我不明白为什么它不起作用。

这是代码`keyboardNav`：

```
<script type="text/javascript">
    $(window).load(function() {
        $('#slider').nivoSlider();
    });

    $("body").keydown(function(e) {
    if(e.keyCode == 37) 
    { // left
     $(".nivo-prevNav").click();
    }
    else if(e.keyCode == 39) 
    { // right
        $(".nivo-nextNav").click(); 
    }
    });
</script> 
```

我将此脚本放在 nivo-slider 脚本文件的末尾，然后是 in `header.php`，然后是 in `footer.php`，然后是在 header.php 中导入的单独的 custom.js 文件中。没有任何效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:35:32.967

尝试这样的事情：

```
<script type="text/javascript">
    $(window).load(function() {
        $('#slider').nivoSlider({keyboardNav: true});
    });
</script> 
```

希望，它会帮助你。！！

# html - 身体的背景图像不会重复到视口

> ID：13073842
> 
> 赞同：1
> 
> 时间：2012-10-25T17:17:06.930
> 
> 标签：html, css

我的网站有一个由两个图像组成的背景。

```
html{
height:100%;
margin:0;
padding:0;
background-image:url('../images/backgroundbottom.png');
background-repeat:repeat-x;
background-position:bottom;
}
body{
height:100%;
margin:0;
padding:0;
font-family: "arial", "times", "courier";
font-size: 10pt;
color:white;
background-image:url('../images/backgroundtop.png');
background-repeat:repeat-x;
} 
```

正文背景不像html那样适应我网站的动态环境。主体背景在右侧停止重复，但 html 延伸到整个视点。我已经在 Chrome、FireFox、Android 和 Safari 中对此进行了测试。

html 和 body 元素不会填充视口。这个问题很可能是由 a用 .`div`推到右侧引起的`position:absolute`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:26:06.393

尝试添加背景附件：固定；

```
background-repeat:x;
background-attachment:fixed;
background-position:bottom; 
```

# matlab - Matlab矩阵乘法计算有效数字

> ID：13073846
> 
> 赞同：6
> 
> 时间：2012-10-25T17:17:33.140
> 
> 标签：matlab, matrix, linear-algebra, matrix-multiplication

我有两个变量形式的矩阵，`A`它们`b`是我的 matlab 函数的输入（发布在下面）。**我想从结果矩阵中计算 用于矩阵逆运算（矩阵除法）的*有效数字*。但是，我不知道从哪里开始（matlab 或数学）来采用这种方法。帮助？`A``b`**

更多上下文，使用平方线性系统`(Ax=b)`，我正在查看它是奇异的还是非奇异的，并试图找到一个或多个解决方案。

```
% x = answer
% y = 0 if no solution, 1 if nonsingular, 2 if many solutions
% z = p is number of sig figs
%
function [ x, y, z ] = squareLinSysSolv(A, b)

if det(A) == 0
    % Matrix is singular and therefor many solutions
    x = A\b;
    y = 0; % Used as place holder to compile
    z = 5; % Used as place holder to compile
elseif det(A) ~= 0
    % Matrix does not equal to zero (perhaps a number very close to it or
    % far from it) and therefor has a unique solution.
    x = A\b;
    y = 1; % Used as place holder to compile
    z = 5; % Used as place holder to compile
end
end 
```

**编辑：** 为了更清楚一点，*z 应该是一个整数，它近似于（上限或下限）`A\b`计算的有效数字的十进制数。*

**测试用例：** 预期的测试/规格表。两者都是矩阵`A`，`b`结果应该是这样的。

```
A =
    1.5000    2.3000    7.9000
    6.1000    3.2000   13.0000
   13.0000   21.0000   76.0000

b =
     1
     3
     5
>> [x,y,z] = squareLinSysSolv(A,b)
% the result of x = A\b
x =

    0.8580
    3.0118
   -0.9132
% determinant is not equal to zero
y =

     1
% Amount of sig figs/precision in calculation
z =

     15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:57:04.473

矩阵与奇异矩阵的接近程度通常由“[条件数](http://en.wikipedia.org/wiki/Condition_number#Matrices)”量化。有几种方法可以估计矩阵的条件数。一种常见的技术是计算最大和最小幅度特征值的比率。

Matlab 有一个名为的内置函数[`cond`](http://www.mathworks.de/de/help/matlab/ref/cond.html)，它给出矩阵的条件数（关于反转）。接近 1 的值是“好”——我不知道如何将它与“重要数字”等具体的东西联系起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:25:41.207

我和丹在这里。我不明白这个问题，我也看不到你如何/在哪里计算 z。首先，您的答案显示中的位数与答案计算中的有效位数无关。其次，你有两种情况：det(A)==0 和 det(A)~=0。在这两种情况下，您似乎都在设置 z = 5。（您必须在其他地方做一些您没有显示的计算 z = 15 的事情？您是如何计算 z 的？）

此外，请认识到有效位数将是数据类别的函数。双>单>整数...

而且......只是为了提高效率，我不知道 A 的大小（也不知道计算其行列式需要多少开销），但没有理由计算两次：

```
if det(A)==0
    % case 1
else % NOT: elseif det(A)~=0
    % case 2
end 
```

我想我也很密集。:)

布雷特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:15:57.407

如果您要问的问题是“给定 matlab 的浮点数的十进制表示，那么最小的数字 z 是多少，使得在第一个 z 数字之后所有数字都为零”，那么我认为以下函数或多或少工作。

我要补充一点，尽管我已经在一堆数字上对此进行了测试，但很可能我错过了一个案例，因此您需要仔细测试它。这可以在一次通过字符串时更有效地完成。

```
function n = sig_decimal_digits(f)
    % get string representation, any decimal point, and any leading zeros
    str = num2str(f,20);

    % strip any exponent part
    loc = regexp(str, 'e');
    if ~isempty(loc)
        str = str(1:(loc-1));
    end

    % strip any decimal point
    str = strrep(str, '.', '');

    % strip any leading zeros (and minus sign!)
    loc = regexp(str, '[1-9]');
    if isempty(loc)
        %if *only* leading zeros, f is 0, so n = 1
        n = 1;
        return;
    else
        str = str(loc:end);
    end

    % count length of string, excluding trailing zeros
    loc = regexp(str, '0+$');
    if isempty(loc)
        n = length(str);
    else
        n = loc-1;
    end
end 
```

但是，我将添加两条评论：

1.  这显然与矩阵乘法无关，所以我不确定你为什么将它带入其中。
2.  这是一个要计算的奇怪数量。除非您的矩阵中有非常特殊的数字，否则答案几乎总是 17，因为大多数浮点数没有短小数扩展。例如，对于您在问题中给出的 A 和 b，根据我的函数，x 中的所有三个数字都有 17 个有效数字。

# android - 非常基本的带有片段的 actionbarsherlock 选项卡：FragmentTransaction 在 onTabSelected() 方法中为空

> ID：13073850
> 
> 赞同：7
> 
> 时间：2012-10-25T17:17:50.507
> 
> 标签：android, tabs, android-fragments, actionbarsherlock

我正在实现一个示例（http://arvid-g.de/12/android-4-actionbar-with-tabs-example）中的一些代码，并尝试将其转换为与 ActionBarSherlock 一起使用。

这是 TabActivity.java：

```
package com.pnet;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.widget.Toast;

public class TabActivity extends SherlockActivity {

    private static String TAG = "TabActivity";
    public static Context appContext;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_activity);

       //ActionBar gets initiated
        ActionBar actionbar = getSupportActionBar();
      //Tell the ActionBar we want to use Tabs.
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
      //initiating both tabs and set text to it.
        ActionBar.Tab PlayerTab = actionbar.newTab().setText("Fragment A");
        ActionBar.Tab StationsTab = actionbar.newTab().setText("Fragment B");

     //create the two fragments we want to use for display content
        Fragment PlayerFragment = new AFragment();
        Fragment StationsFragment = new BFragment();

    //set the Tab listener. Now we can listen for clicks.
        PlayerTab.setTabListener(new MyTabsListener(PlayerFragment));
        StationsTab.setTabListener(new MyTabsListener(StationsFragment));

   //add the two tabs to the actionbar
        actionbar.addTab(PlayerTab);
        actionbar.addTab(StationsTab);
    }

    class MyTabsListener implements ActionBar.TabListener {
        public Fragment fragment;

        public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
            if (fragment == null) {
                Log.v(TAG, "fragment is null");
            }

            if (ft == null) {
                Log.v(TAG, "fragment TRANSACTION is null");
            }

            ft.replace(R.id.fragment_container, fragment);          
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
            Toast.makeText(TabActivity.appContext, "Reselected!", Toast.LENGTH_LONG).show();

        }

    }
} 
```

这是 AFragment.java

```
package com.pnet;

import com.actionbarsherlock.app.SherlockFragment;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class AFragment extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.afragment, container, false);
    }

} 
```

这是 BFragment.java

```
package com.pnet;

import com.actionbarsherlock.app.SherlockFragment;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class BFragment extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.bfragment, container, false);
    }

} 
```

这是 tab_activity.xml：

```
<LinearLayout android:layout_gravity="center" android:layout_height="fill_parent" android:layout_width="fill_parent" android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">
<LinearLayout android:id="@+id/fragment_container" android:layout_height="match_parent" android:layout_width="match_parent">

 </LinearLayout>
</LinearLayout> 
```

这是 afragment.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/text"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:gravity="center_vertical|center_horizontal"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:text="@string/hello_world"/>

</LinearLayout> 
```

这是 bfragment.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/text"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:gravity="center_vertical|center_horizontal"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:text="@string/tab_navigation_content"/>

</LinearLayout> 
```

当活动加载时，它会触发该`onTabSelected()`方法。我放了几个 if 语句检查写入日志的对象是否为空，它显示 FragmentTransaction 对象为空。任何人都看到我要去哪里错了吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T17:36:18.587

您应该使您的 Activity 从 SherlockFragmentActivity 而不是 SherlockActivity 扩展，就像您使用 FragmentActivity 而不是 Activity 与 support-v4 包一样

请在此处查看片段示例：[https ://github.com/JakeWharton/ActionBarSherlock/tree/master/actionbarsherlock-samples/fragments](https://github.com/JakeWharton/ActionBarSherlock/tree/master/actionbarsherlock-samples/fragments)

# r - R DOLS（动态普通最小二乘）包

> ID：13073853
> 
> 赞同：7
> 
> 时间：2012-10-25T17:17:56.360
> 
> 标签：r, regression

我一直在搞乱**R**中的不同回归选项，并注意到我没有看到任何明确声明它们正在实现**DOLS**算法的回归选项。许多统计论文都提到了该算法，但是当我查看**urca**或**tseries**等包的源代码时，我看到它们只是使用标准的**lm**包。例如，**urca**的`ca.po`test 和**tseries**都`po.test`使用直接**lm**来估计测试的残差。是否可以使用**lm**或**dynlm**模拟**DOLS**？

 ****我之所以问是因为我想将**DOLS**用于我一直在研究的一些东西，但我不知道如何使用现有包或我需要编写的东西来模拟它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:27:20.817

我可能错了，因为我对你所在的地区一无所知，但我相信这个`vars`包裹有你想要的一切。它有一个[很棒的小插图](http://cran.r-project.org/web/packages/vars/vignettes/vars.pdf)，我认为您正在寻找`stability`功能，尤其是`dynamic`论点。请注意，此函数只是包装了 package 中的另一个函数`strucchange`。

*再说一次，如果你不在*计量经济学领域，我可能会离题。****

# javascript - 查找 javascript“this”关键字替代 Internet Explorer

> ID：13073854
> 
> 赞同：2
> 
> 时间：2012-10-25T17:18:01.853
> 
> 标签：javascript, html

我一直在研究一个基本的 javascript 下拉菜单，使用 addEventListener 和 attachEvent 来处理单击和鼠标功能。点击事件调用的函数 subOpen 使用 javascript "this" 关键字来获取被点击元素的 id。

添加事件的示例：

```
//add event listeners to menuitems
for (var i=0; i < menuitems.length; i++) {
    if (menuitems[i].addEventListener) {
        menuitems[i].addEventListener('click', subOpen, false);    
        menuitems[i].addEventListener('mouseout', closeTimer, false);
        menuitems[i].addEventListener('mouseover', cancelTimer, false);
        menuitems[i].addEventListener('selectstart', menucursorselect, false);
    } else if (menuitems[i].attachEvent) {
        menuitems[i].attachEvent('onclick', subOpen);    
        menuitems[i].attachEvent('onmouseout', closeTimer);
        menuitems[i].attachEvent('onmouseover', cancelTimer);
        menuitems[i].attachEvent('onselectstart', menucursorselect);    
    }
} 
```

使用“this”关键字的 subOpen 函数示例：

```
function subOpen() {
cancelTimer(); //stops the close timer  

if (submenudisplay) {
    document.getElementById(submenudisplay).style.display = "none";
    activeSubMenu = false;
}
var curMenuId = this.id;
var curSubMenuId = this.id + "submenu";

if (curSubMenuId) {
    document.getElementById(curSubMenuId).style.display = "block";
    activeSubMenu = true;   
}

submenudisplay = curSubMenuId; 
```

现在，除了早期版本的 Internet Explorer 之外，我测试过的所有浏览器都可以正常工作。对于旧版本的 IE，调试器会将“this.id”标记为未定义，因此它不知道要打开哪个子菜单。我做了一些研究，发现旧的 IE 在附加事件时不会复制函数，而是引用它，所以我无法使用“this”关键字捕获任何有用的数据。

我想知道是否有不同的关键字或函数可以用来完成与旧版本 IE 相同的事情。

我的测试代码的完整版本可以在[这里](http://www.asmithspace.net/testing/menutest.html)找到：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:22:40.537

您可以使用调用处理程序并`this`手动设置值的函数。

在这里，我创建了一个`bindHandler`接收元素和处理程序的函数，并返回一个新处理程序，该处理程序以元素为`this`值调用原始处理程序。

它还将`window.event`对象传递给原始处理程序以获得这种一致性。

```
for (var i=0; i < menuitems.length; i++) {
    if (menuitems[i].addEventListener) {
        menuitems[i].addEventListener('click', subOpen, false); 
        menuitems[i].addEventListener('mouseout', closeTimer, false);
        menuitems[i].addEventListener('mouseover', cancelTimer, false);
        menuitems[i].addEventListener('selectstart', menucursorselect, false);
    } else if (menuitems[i].attachEvent) {
        menuitems[i].attachEvent('onclick', bindHandler(menuitems[i], subOpen));   
        menuitems[i].attachEvent('onmouseout', bindHandler(menuitems[i], closeTimer));
        menuitems[i].attachEvent('onmouseover', bindHandler(menuitems[i], cancelTimer));
        menuitems[i].attachEvent('onselectstart', bindHandler(menuitems[i], menucursorselect));  
    }
}

function bindHandler(elem, handler) {
    return function() {
        return handler.call(elem, window.event);
    };
} 
```

* * *

FWIW，我会创建一个单独的绑定函数来为你处理这个问题，以减少一些重复的代码。

```
for (var i=0; i < menuitems.length; i++) {
    bindHandler(menuitems[i], 'click', subOpen);
    bindHandler(menuitems[i], 'mouseout', closeTimer);
    bindHandler(menuitems[i], 'mouseover', cancelTimer);
    bindHandler(menuitems[i], 'selectstart', menucursorselect);
}

function bindHandler(elem, type, handler) {
    if (elem.addEventListener)
        elem.addEventListener(type, handler, false);
    else if (elem.attachEvent)
        elem.attachEvent("on" + type,  function() {
            return handler.call(elem, window.event);
        };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:31:46.297

```
function addHandler(elem, type, handler) {
    elem.addEventListener(type, handler, false);
}
if (!document.addEventListener)
    addHandler = function(elem, type, handler) {
        elem.attachEvent('on'+type, function() {
            handler.call(elem, window.event);
        });
    }; 
```

然后使用

```
for (var i=0; i<menuitems.length; i++) {
    addHandler(menuitems[i], 'click', subOpen);
    addHandler(menuitems[i], 'mouseout', closeTimer);
    addHandler(menuitems[i], 'mouseover', cancelTimer);
    addHandler(menuitems[i], 'selectstart', menucursorselect);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:33:01.787

您应该使用 jQuery 来绑定事件，而不是直接调用`addEventListener`and`attachEvents`函数。jQuery 将解决这些跨浏览器兼容性问题。

所以我在这里的回答是不要这样做。但是，如果您这样做，请知道 Internet Explorer 调用的函数默认没有`this`关键字。为了访问元素，您必须在`window.event.srcElement`. 在兼容 W3C 的浏览器上，您可以使用`this`或`event.target`. 您可以使用`_addEventListener`下面的函数作为 W3C 函数的跨浏览器版本。

```
var _addEventListener = function (obj, evt, ofnc, bubble) {
    var fnc = function (event) {
        if (!event || !event.target) {
            event = window.event;
            event.target = event.srcElement;
        }
        return ofnc.call(obj, event);
    };
    // W3C model
    if (obj.addEventListener) {
        obj.addEventListener(evt, ofnc, !!bubble);
        return true;
    }
    // M$ft model
    else {
        return obj.attachEvent('on' + evt, fnc);
    }
}; 
```

```
//add event listeners to menuitems
for (var i = 0; i < menuitems.length; i++) {
    _addEventListener(menuitems[i], 'click', subOpen, false);
    _addEventListener(menuitems[i], 'mouseout', closeTimer, false);
    _addEventListener(menuitems[i], 'mouseover', cancelTimer, false);
    _addEventListener(menuitems[i], 'selectstart', menucursorselect, false);
}​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T17:25:21.650

实际的“事件”被传递给处理函数，您可以从事件中获取元素。

[http://www.javascripter.net/faq/eventtargetsrcelement.htm](http://www.javascripter.net/faq/eventtargetsrcelement.htm)

# python - Python：将多个 LANDSAT 图像导入到 Grass GIS 的脚本

> ID：13073855
> 
> 赞同：3
> 
> 时间：2012-10-25T17:18:03.650
> 
> 标签：python, gis, grass, landsat

我正在尝试编写一个 Python 代码，通过调整以下代码将 LANDSAT 卫星图像导入 Grass GIS：http: [//grass.osgeo.org/wiki/LANDSAT](http://grass.osgeo.org/wiki/LANDSAT)

LANDSAT 切片作为文件夹下载，每个文件夹包含 7 个 tiff 图像（波段 1-7）。因此，我有一个目录，其中包含多个子目录（每个 LANDSAT 瓦片一个）。

我目前的代码如下：

```
#!/usr/bin/python

import os
import sys
import glob
import grass.script as grass

def import_tifs(dirpath):

    for dirpath, dirname, filenames in os.walk(dirpath):
        for dirname in dirpath:

        dirname = os.path.join(dirpath,dirname)

            for file in os.listdir(dirname):
                if os.path.splitext(file)[-1] != '.TIF':
                    continue
                ffile = os.path.join(dirname, file)
                name = os.path.splitext(file)[0].split(dirname)[-1]

                grass.message('Importing %s -> %s@%s...' % (file, name, dirpath))

                grass.run_command('r.in.gdal',
                                  flags = 'o',
                                  input = ffile,
                                  output = name,
                                  quiet = True,
                                  overwrite = True)

def main():                                 
    if len(sys.argv) == 1:
        for directory in filter(os.path.isdir, os.listdir(os.getcwd())):
            import_tifs(directory)
    else:
        import_tifs(sys.argv[1])

if __name__ == "__main__":
    main() 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "C:/Users/Simon/Documents/import_landsat2.py", line
40, in <module>
    main()
  File "C:/Users/Simon/Documents/import_landsat2.py", line
37, in main
    import_tifs(sys.argv[1])
  File "C:/Users/Simon/Documents/import_landsat2.py", line
17, in import_tifs
    for file in os.listdir(dirname):
WindowsError: [Error 3] The system cannot find the path
specified: 'dirpath\\C/*.*' 
```

谁能解释正在发生的事情以及我需要做些什么来解决它，或提出替代方案？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:56:42.277

我相信您的主要问题是`dirname`in`os.walk()`返回一个列表（不是字符串），因此您的后续字符串（即`dirname = os.path.join(dirpath,dirname)`）格式有点错误。这是一种可能的替代方法 - 为了对此进行测试，我使用了目录的完整路径 as `sys.argv[1]`，但您可以使其更加动态以适合您的情况。此外，避免使用变量名称，例如`file`因为它们是 Python 关键字。我无法测试您的`grass.*`功能，但希望这将是一个足够清晰的示例，以便您可以调整您的需要。`os.walk()`本机处理许多标准解析，因此您可以删除一些目录操作函数：

```
def import_tifs(dirpath):
  for dirpath, dirname, filenames in os.walk(dirpath):
    # Iterate through the files in the current dir returned by walk()
    for tif_file in filenames:
      # If the suffix is '.TIF', process
      if tif_file.upper().endswith('.tif'):
        # This will contain the full path to your file
        full_path = os.path.join(dirpath, tif_file)

        # tif_file will already contain the name, so you can call from here
        grass.message('Importing %s -> %s@%s...' % (full_path, tif_file, dirpath))

        grass.run_command('r.in.gdal',
                          flags = 'o',
                          input = full_path,
                          output = tif_file,
                          quiet = True,
                          overwrite = True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:04:45.033

我刚刚重写了您的代码以列出所有目录树并查找文件扩展名，在本例中为“.tif”，

```
#!/usr/bin/python

import os
import sys

def import_tifs(dirpath):

    for dirpath, dirname, filenames in os.walk(dirpath):
        for filename in filenames:
            name, extension = os.path.splitext(filename)
            if extension.lower() == ".tif":
                filepath = os.path.join(dirpath, filename)

                print(filepath, name, dirpath)

def main():
    if len(sys.argv) == 1:
            import_tifs(os.getcwd())
    else:
        import_tifs(sys.argv[1])

if __name__ == "__main__":
    main() 
```

请检查这是否是您正在寻找的...

# mysql - 为mysql设置什么编码？

> ID：13073856
> 
> 赞同：1
> 
> 时间：2012-10-25T17:18:08.257
> 
> 标签：mysql, ruby, encoding

现在我有了 utf8_unicode_ci，但是当我导入数据时：

```
Код № по каталогу  (артикул)    Наименование  товара    Ед. изм.    Цена опт.   Доп.    Остатки | Минск Класс   Группа  Бренд
96528   AH-36АЕТ    ASIAN HORSE 36з евр (тонк.кл.) 280A (187x127x227)                                                       шт      38,58           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
96529   AH-36АRТ    ASIAN HORSE 36з рус (тонк.кл.) 280A (187x127x227)                                                       шт      38,58           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
88634   AH-45АЕТ    ASIAN HORSE 45з евр 300A (238x129x227) (545158033)                                                      шт      46,14           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
82978   AH-45АЕ ASIAN HORSE 45з евр 300A тонк.клемы  (238x129x227) (545157033)                                          шт      36,57       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
96531   AH-60АЕ ASIAN HORSE 60з евр 510A (232x173x225)                                                                  шт      48,76           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
82979   AH-70АЕ ASIAN HORSE 70з евр 600A (261x175x220)                                                                  шт      56,92       3   Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
96530   AH-70АR ASIAN HORSE 70з рус 600A (261x175x220)                                                                  шт      56,92       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
82980   AH-95АЕ ASIAN HORSE 95з евр 760A (306x173x225)                                                                  шт      77,21       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
96532   AH-95АR ASIAN HORSE 95з рус 760A (306x173x225)                                                                  шт      77,21       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     ASIAN HORSE
25335   600 103 085 Бэрен polar 100з (600103) 850A (353x175x190)                                                            шт      107,42          Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          BAREN
102137  600 150 087 / L5 100    Бэрен polar 100з (600150) 870A (353x175x190)                                                            шт      94,7            Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          BAREN
25332   544 111 042 / L1B 44    Бэрен polar 44з (544111) 420A (207x175x175)                                                             шт      47,83       4   Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          BAREN 
```

在分贝我看到

```
1   ASIAN HORSE AH-36???    NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 36? ??? (????.??.) 280A (187x127x227) ...
      Изменить    Быстрая правка      Копировать     Удалить    2   ASIAN HORSE AH-36?R?    NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 36? ??? (????.??.) 280A (187x127x227) ...
      Изменить    Быстрая правка      Копировать     Удалить    3   ASIAN HORSE AH-45???    NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 45? ??? 300A (238x129x227) (545158033)...
      Изменить    Быстрая правка      Копировать     Удалить    4   ASIAN HORSE AH-45?? NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 45? ??? 300A ????.?????  (238x129x227)...
      Изменить    Быстрая правка      Копировать     Удалить    5   ASIAN HORSE AH-60?? NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 60? ??? 510A (232x173x225)            ...
      Изменить    Быстрая правка      Копировать     Удалить    6   ASIAN HORSE AH-70?? NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 70? ??? 600A (261x175x220)            ...
      Изменить    Быстрая правка      Копировать     Удалить    7   ASIAN HORSE AH-70?R NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 70? ??? 600A (261x175x220)            ...
      Изменить    Быстрая правка      Копировать     Удалить    8   ASIAN HORSE AH-95?? NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 95? ??? 760A (306x173x225)            ...
      Изменить    Быстрая правка      Копировать     Удалить    9   ASIAN HORSE AH-95?R NULL    NULL    NULL    NULL    NULL    ASIAN HORSE 95? ??? 760A (306x173x225)            ...
      Изменить    Быстрая правка      Копировать     Удалить    10  BAREN   600 103 085 NULL    NULL    NULL    NULL    NULL    ????? polar 100? (600103) 850A (353x175x190)      ... 
```

很多？？？？)) （来自 phpmyadmin，所以我也得到 Изменить Быстрая правка Копировать Удалить）如何编码`????? polar 100?`

# android - EditText 的边框？

> ID：13073857
> 
> 赞同：14
> 
> 时间：2012-10-25T17:18:10.397
> 
> 标签：android, android-edittext

我看到了很多相关的讨论，但没有找到合适的解决方案。我需要做的是在 EditText 小部件的顶部和底部创建一个黑色边框。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:27:18.073

这可以通过 NinePatchDrawable 背景实现。

[http://developer.android.com/guide/topics/resources/drawable-resource.html#NinePatch](http://developer.android.com/guide/topics/resources/drawable-resource.html#NinePatch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:24:10.523

是的。只需创建您的自定义`EditText`或设置合适的可绘制对象作为背景。

# python - Python 文档给出的异常指南

> ID：13073874
> 
> 赞同：8
> 
> 时间：2012-10-25T17:19:37.963
> 
> 标签：python, exception

[根据有关异常](http://docs.python.org/howto/doanddont.html#exceptions)的成语和反成语的 Python 文档：“您应该尝试在代码中使用尽可能少的 except 子句——您使用的子句通常是内部调用，应该总是成功，或者在一个主要功能中包罗万象。” 把这句话分段...

> “你应该尽量在你的代码中使用尽可能少的 except 子句”

对于像我这样的新手来说有点困惑，我认为在 Python 中使用[EAFP](http://docs.python.org/glossary.html#term-eafp)样式是一种很好的做法——即许多`try`和`except`语句。还是我错过了重点？

> “您使用的通常是内部调用，应该总是成功”

我不明白这里所说的意思。

> “或者是一个主要功能中的一个包罗万象的东西。”

因此，对于任何抛出异常的 let 代码来说，将其简单地传递到调用堆栈直到它到达您真正具有通用异常处理的顶层是一种很好的风格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:48:05.960

> “你应该尽量在你的代码中使用尽可能少的 except 子句”

很容易在代码中乱扔异常：

```
def solve_linear(mat1, mat2):
    det1 = determinant(mat1)
    det2 = determinant(mat2)
    try:
        return det1 / det2
    except ZeroDivisionError:
        raise NoSolution 
```

在这里，让`ZeroDivisionError`传播可能很好。你不需要抓住它。

> “您使用的通常是内部调用，应该总是成功”

例如，看看这个读取文件或返回缓存值的代码。它通常会成功，尽管有`KeyError`例外：

```
def read_file(path):
    try:
        return cache[path]
    except KeyError:
        fp = open(path, 'rb')
        data = fp.read()
        fp.close()
        cache[path] = data
        return data 
```

> “或者是一个主要功能中的一个包罗万象的东西。”

如果您的程序是交互式的，您可能希望在顶层捕获几乎所有内容。这是交互式命令行程序的顶部循环：

```
def main():
    while True:
        try:
            text = raw_input('enter command: ')
            cmd = parse_command(text)
        except EOFError:
            return
        except KeyboardInterrupt:
            return
        except ValueError:
            print 'Syntax error'
            continue

        try:
            run_cmd(cmd)
        except SystemExit:
            raise
        except Exception:
            traceback.print_exc() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:36:22.173

我认为关键是例外应该只用于“例外”情况。这就是使用“在通常会成功的调用中”背后的含义。这方面的一个例子可能是一些计算，在一些非常奇怪的情况下，最终不得不除以零。然后，您可以将其包含在 try / except 语句中以处理这种可能性。

main 函数中的包罗万象将适用于相同的场景。假设您的计算最终在调用堆栈深处某处除以零。从这一点开始，您将无法继续，因此在失败时使用 try/except 语句是没有意义的。只在更高级别设置一个更有意义，您可以合理地从错误中恢复。

他们在文档中给出的例子就是一个例子。调用“get_status”时，您希望该文件存在。如果没有，那么您可以使用 except 语句来处理它（尽管如前所述，在这种特殊情况下，'with' 语句要好得多）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:38:32.710

关于第一点，使用异常的*全部意义*在于您不必将每一行都包装成一个！例如，在 C 中，错误通常由函数调用的返回值决定。因此，如果您想捕获所有错误，则必须在每次通话后检查这些内容。使用 Python，您可以将一个（可能很大）语句块组合在一个 try/except 块中，并且只处理*一次**所有*错误。

 *第二点是（如果可能的话）您希望在故障发生点附近解决故障。例如，您正在从网络读取数据并获得零字节。在这种情况下，等待并重试通常是完全可以的。

最后一点是，有时错误太大以至于无法在低级别处理。例如，如果您试图打开一个不存在的文件，它将失败。而且您的程序无法对文件的内容执行任何操作。最好在程序的顶层处理它并询问用户另一个文件名或者退出程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T17:42:39.583

Python 的哲学通常是“请求宽恕，而不是许可”。但这个想法不是使用 try-except 子句来捕获所有可能的错误。理想情况下，每个 try-except 只会捕获相关的错误。

BAD（未指定特定的异常类型）：

```
a = [1, 2, 3]
i = 3
try:
    print a[i]
except:
    print "Not found!" 
```

GOOD（只处理我们期望得到的异常）：

```
a = [1, 2, 3]
i = 3
try:
    print a[i]
except IndexError:
    print "Not found!" 
```

这很重要的原因是我们不会掩盖其他可能的代码错误。如果在这个例子中`i`是 1.8 怎么办？第一个示例会打印`Not Found!`，掩盖了真正的问题，但第二个示例会返回`TypeError: list indices must be integers, not float`，让我们知道我们的代码中存在逻辑缺陷。*

# jakarta-ee - 如何使用 Apache FileUpload 和 HttpClient？

> ID：13073877
> 
> 赞同：0
> 
> 时间：2012-10-25T17:19:56.777
> 
> 标签：jakarta-ee, servlets, jboss, apache-commons-httpclient, apache-commons-fileupload

如果 JAWS 应用程序失败，我正在编写一些代码以通过 http 将日志文件发送到服务器。为了测试这一点，我设置了一个接收和处理请求的 servlet。

我的客户端代码来自 Apache HttpClient 4.2[示例](http://hc.apache.org/httpcomponents-client-ga/httpmime/examples/org/apache/http/examples/entity/mime/ClientMultipartFormPost.java)

```
{
        HttpClient httpclient = new DefaultHttpClient();
        try {
            HttpPost httppost = new HttpPost("http://localhost:8080/testServer/testserv/a");

            FileBody bin = new FileBody(new File("XXXs"));
            StringBody comment = new StringBody("A binary file of some kind");

            MultipartEntity reqEntity = new MultipartEntity();
            reqEntity.addPart("bin", bin);
            reqEntity.addPart("comment", comment);

            httppost.setEntity(reqEntity);

            System.out.println("executing request " + httppost.getRequestLine());
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity resEntity = response.getEntity();

            System.out.println("----------------------------------------");
            System.out.println(response.getStatusLine());
            if (resEntity != null) {
                System.out.println("Response content length: " + resEntity.getContentLength());
            }
            EntityUtils.consume(resEntity);
        } finally {
            try { httpclient.getConnectionManager().shutdown(); } catch (Exception ignore) {}
        }
    }
    {
        DefaultHttpClient httpclient = new DefaultHttpClient();

        HttpPost httpPost = new HttpPost("http://localhost:8080/testServer/testserv/a");
        List <NameValuePair> nvps = new ArrayList <NameValuePair>();
        nvps.add(new BasicNameValuePair("username", "vip"));
        nvps.add(new BasicNameValuePair("password", "secret"));
        httpPost.setEntity(new UrlEncodedFormEntity(nvps));
        HttpResponse response2 = httpclient.execute(httpPost);

        try {
            System.out.println(response2.getStatusLine());
            HttpEntity entity2 = response2.getEntity();
            // do something useful with the response body
            // and ensure it is fully consumed
            EntityUtils.consume(entity2);
        } finally {
            httpPost.releaseConnection();
        }
    } 
```

我的服务器端使用[Apache FileUpload的教程](http://commons.apache.org/fileupload/using.html)

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);
    if(isMultipart){
        // Create a factory for disk-based file items
        FileItemFactory factory = new DiskFileItemFactory();

        // Create a new file upload handler
        ServletFileUpload upload = new ServletFileUpload(factory);

        // Parse the request
        try {
            List<FileItem> items = upload.parseRequest(request);
            Iterator iter = items.iterator();

            while (iter.hasNext()) {
                FileItem item = (FileItem) iter.next();

                File uploadedFile = new File("XXX");
                try {
                    item.write(uploadedFile);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                System.out.println(uploadedFile.getAbsolutePath());
            }
        } catch (FileUploadException e) {
            System.out.println("File Upload Exception");
            e.printStackTrace();
        }

    } else{
        System.out.println("Not multi part");
        System.out.println(request.getParameterMap());
    } 
```

我正在使用 JBoss AS7。结果是，如果我不添加`FileEntity`到`MultiPartEntity`请求被处理。否则会引发 FileUpload 异常。

```
Processing of multipart/form-data request failed. Stream ended unexpectedly 
```

我在使用 JBoss 和这里的其他工具方面不是很有经验，因此非常感谢您的帮助和耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:51:00.203

从这个[问题](https://stackoverflow.com/questions/1142475/jsp-file-upload-with-apache-commons)中，我了解到您需要将 apache-commons-io 作为依赖项。

# php - mysqldump 产生空文件

> ID：13073885
> 
> 赞同：0
> 
> 时间：2012-10-25T17:20:19.860
> 
> 标签：php, mysqldump

以下是我现在的总代码。我已经逃脱了反斜杠并做了所有我认为应该正确的事情。

```
<?php

include('conn.php');

mysql_select_db("landshop_formdata");

$dbname="landshop_clientdata";
$dbhost="localhost";
$dbuser="landshop_anitgop";
$dbpass="password";
//$root = realpath($_SERVER["DOCUMENT_ROOT"]);
$backupFile =$dbname.".sql";
echo $backupFile."<br><br>";

//$dmp="C:\\Program Files\\EasyPHP-5.3.8.1\\mysql\\bin\\mysqldump.exe";

//$command = "$dmp --OPT -h$dbhost -u$dbuser -p$dbpass $dbname > $backupFile";

//system($command);

$dmp = '"C:\Program Files\EasyPHP-5.3.8.1\mysql\bin\mysqldump.exe"';

$command = $dmp
     . ' --opt -h '.$dbhost.' -u "'. $dbuser. '" -p "'. $dbpass.'" '. $dbname.' > "'. $backupFile. '"';
system($command);

?> 
```

它仍在生成 0kb 文件！怎么了 ？！我已经尝试了所有选项！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:28:10.130

尝试这个：

```
$dmp = '"C:\Program Files\EasyPHP-5.3.8.1\mysql\bin\mysqldump.exe"';

$command = $dmp
         . ' --opt -h '
         . $dbhost
         . ' -u "'
         . $dbuser
         . '" -p "'
         . $dbpass
         . ' '
         . $dbname
         . ' > "'
         . $backupFile
         . '"';
system($command); 
```

我在初始变量上添加了引号，`$dmp`以确保命令正确执行（由于空格）mysqldump。还为用户和通行证添加了引号，以防它们中有空格，并为备份文件添加了引号，其中也可能包含空格。

您可以进一步修改它以满足您的需要。

# excel - 将 Excel 范围另存为 pdf

> ID：13073888
> 
> 赞同：12
> 
> 时间：2012-10-25T17:20:42.680
> 
> 标签：excel, vba, pdf, save-as

我想将特定工作表或特定范围“另存为”pdf。

我尝试在我的代码中实现一个范围。

这是我一直在使用的：

```
ActiveSheet.ExportAsFixedFormat Type:=xlTypePDF, Filename:= _
  "c:\Book1.pdf", Quality:= _
  xlQualityStandard, IncludeDocProperties:=True, IgnorePrintAreas:=False, _
  OpenAfterPublish:=True 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T18:20:07.363

你有代码，只需使用范围而不是`activesheet`

例如`Sheets("Sheet1").Range("B2:H28").ExportAsFixedFormat ...`

# php - Magento 自定义用户注册

> ID：13073889
> 
> 赞同：1
> 
> 时间：2012-10-25T17:20:44.520
> 
> 标签：php, magento, registration

我已经为我的 Magento 主题创建了一个自定义布局，效果很好。到目前为止，我唯一的问题是我的注册完全没有任何作用。我尝试过搜索，但似乎只找到了有关如何将新字段添加到注册页面的结果。我目前的代码如下：

```
 <div id="user-login">
        <span class="log-head loginfield">
            <form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="login-form">
                <h2>You Already Have An Account</h2>
                <p>Please login with your e-mail and password</p>
                <span>
                  <label>Enter your E-mail address:</label>
                  <input type="text" name="login[username]" value="<?php echo $this->htmlEscape($this->getUsername()) ?>" id="email" class="input-text required-entry validate-email" title="<?php echo $this->__('Email Address') ?>" />
                </span>
                <span>
                  <label>Enter your password:</label>
                  <input type="password" name="login[password]" class="input-text required-entry validate-password" id="pass" title="<?php echo $this->__('Password') ?>" />
                </span>
                  <input class="submit" type="submit" value="Submit">
             </form>
         </span>
         <span class="log-head registerfield">
             <form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="form-validate">
                 <input type="hidden" name="success_url" value="<?php echo $this->getSuccessUrl() ?>" />
                 <input type="hidden" name="error_url" value="<?php echo $this->getErrorUrl() ?>" />
                 <h2>You Don't Have An Account</h2>
                 <p>Please enter your information and create an account</p>
                 <span>
                   <label>Email Address:</label>
                   <input type="text" name="login[username]" value="<?php echo $this->htmlEscape($this->getUsername()) ?>" id="email" class="input-text required-entry validate-email" title="<?php echo $this->__('Email Address') ?>" />
                 </span>
                 <span>
                   <label>Enter your password:</label>
                   <input type="password" name="password" id="password" title="<?php echo $this->__('Password') ?>" class="input-text required-entry validate-password" />
                 </span>
                 <span>
                   <label>Re-Enter your password:</label>
                   <input type="password" name="confirmation" title="<?php echo $this->__('Confirm Password') ?>" id="confirmation" class="input-text required-entry validate-cpassword" />
                 </span>
                   <input class="submit" type="submit" value="Create Account">
              </form>
              <script type="text/javascript">
                        //<![CDATA[
                            var dataForm = new VarienForm('form-validate', true);
                            <?php if($this->getShowAddressFields()): ?>
                            new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined, 'zip');
                            <?php endif; ?>
                        //]]>
              </script>
          </span>
</div><!--/user-login --> 
```

我结合了注册和登录页面以适合我的设计。输入字段直接取自基本主题。在我尝试测试并创建用户之后，页面只是刷新并且永远不会创建用户。如果我从后端创建一个用户并尝试登录页面刷新但从不登录我也是如此。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T00:17:58.170

您遇到问题的原因是因为两个表单都指向相同的表单操作（假设输入名称与默认 magento 相同）

```
action="<?php echo $this->getPostActionUrl() 
```

**这应该可以解决您的问题**

更改此设置（我不确定您使用的是哪种块类型，因此我将更改这两个操作）

```
 <form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="login-form"> 
```

至

```
<form action="<?php echo Mage::helper('customer')->getLoginPostUrl() ?>" method="post" id="login-form"> 
```

改变这个

```
<form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="form-validate"> 
```

至

```
<form action="<?php echo Mage::helper('customer')->getRegisterPostUrl() ?>" method="post" id="form-validate"> 
```

*如果这不起作用，请查看页面源代码并查看两个表单操作指向的位置（请参阅下面的它们应该指向的位置）。尝试将操作更改为*

```
 <?php echo  Mage::getUrl() . '/customer/account/loginPost/'; ?> and <?php echo  Mage::getUrl() . /customer/account/createpost/ ?> 
```

**问题原因**

默认情况下，magento 将注册和登录表单分成 2 个不同的页面，这些页面使用两个不同的块

请参阅 /app/design/frontend/default/contempospace/layout/customer.xml（customer_account_create 和 customer_account_login）

```
<block type="customer/form_login" name="customer_form_login" template="customer/form/login.phtml"/>

<block type="customer/form_register" name="customer_form_register" template="customer/form/register.phtml"> 
```

两个块都有一个方法 getPostActionUrl() 指向不同的 url /customer/account/loginPost/ 和 /customer/account/createpost/

看

```
/app/code/core/Mage/Customer/Block/Form/Login.php
/app/code/core/Mage/Customer/Block/Form/Register.php 
```

您可能想看看[Blocks 和 PHTML 如何协同工作](http://codemagento.com/2011/03/how-blocks-and-phtml-work-together/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:53:59.987

尝试使用：

```
<input name="form_key" type="hidden" value="<?php echo $this->getFormKey() ?>" /> 
```

并且您应该使用相同的名称来输入原产地名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:14:43.950

```
<input name="form_key" type="hidden" value="<?php echo $this->getFormKey() ?>" />

<block type="customer/form_login" name="customer_form_login" template="customer/form/login.phtml"/>

<block type="customer/form_register" name="customer_form_register" template="customer/form/register.phtml">

<input name="form_key" type="hidden" value="<?php echo $this->getFormKey() ?>" />

<block type="customer/form_login" name="customer_form_login" template="customer/form/login.phtml"/>

<block type="customer/form_register" name="customer_form_register" template="customer/form/register.phtml"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T23:08:52.730

每个人都对此非常有帮助（我遇到了同样的问题）。花了我一点时间，但这在最近的升级后浮出水面。问题是注册表单中没有 formkey 字段，只需将下面的行添加到表单中，它就开始对我正常工作。

```
<?php echo $this->getBlockHtml('formkey')?> 
```

# windows-phone-7 - MvvmCross ：以编程方式进行数据绑定

> ID：13073891
> 
> 赞同：1
> 
> 时间：2012-10-25T17:20:52.837
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, xamarin, mvvmcross

我想我需要以编程方式绑定数据来解决我的问题。

我使用托管 2 个选项卡的 TabHost。当 TabHost 出现时，我需要在第二个选项卡中加载 MvxBindableListView 并将第一个选项卡保留为默认选项卡。

我正在做的是毫无问题地启动第二个选项卡活动，因为我使用以下代码检查了该过程：

```
protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.Page_ActivityView);
        System.Diagnostics.Debug.WriteLine("activityView started");

        MvxBindableListView mvxBindableListView = FindViewById<MvxBindableListView>(Resource.Id.mvxBindableListView);
        mvxBindableListView.ChildViewAdded += new System.EventHandler<Android.Views.ViewGroup.ChildViewAddedEventArgs>(mvxBindableListView_ChildViewAdded);
    } 
```

“activityView started”显示在输出调试器中，但 MvxBindableListView.ChildViewAdded 事件未引发，仅当我单击第二个选项卡时。

所以我想 MvxBindableListView 不是数据绑定的。

提前感谢帮助我以编程方式加载我的第二个选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:32:44.630

我认为`ChildViewAdded`这是在呈现 ListView 时发生的事件 - 那时它需要“绘制列表项”，然后它会向其适配器询问屏幕的子视图。当您向下滚动列表时，它会要求更多的子视图 - 但它也会重用视图 - 所以对于一个简单的列表，您应该只（希望）在 ChildViewAdded 上获得 N+1 次调用，以获得显示 N 个项目的列表一度。

* * *

因此，列表完全有可能被数据绑定但从不调用`ChildViewAdded`- 在列表被“绘制”之前不会被调用

* * *

可悲的是 Xamarin 文档在这里没有帮助 - [http://docs.mono-android.net/monodoc.ashx?link=E%3AAndroid.Views.ViewGroup.ChildViewAdded](http://docs.mono-android.net/monodoc.ashx?link=E%3AAndroid.Views.ViewGroup.ChildViewAdded)

* * *

注意：如果您确实想以编程方式绑定，那么您可以这样做 - 使用`Bind()`方法和扩展方法。但是，我在这里没有对此进行扩展-因为听起来这实际上并不是您所需要的！

# coldfusion - Coldfusion映射cfinclude

> ID：13073894
> 
> 赞同：0
> 
> 时间：2012-10-25T17:21:01.037
> 
> 标签：coldfusion, coldfusion-9, cfc, application.cfc

我第一次尝试使用映射，但遇到了一些问题。在我的 CFadmin 中，我创建了一个如下所示的映射：

逻辑路径：

> /email_sender

目录路径：

> E:\sites\Example.Com\cf_modules\autoresponders\Emails\emailLists

我正在尝试从 .cfc 访问包含文件。在我的 cfc 中，我有一个包含文件，它位于同一个文件夹中，它工作得很好，但是该包含文件绑定到根据我传递的信息访问另一个包含文件。

组件内的包含文件中包含此代码。

```
<cfmail from="#emailData.sender#" to="#surveymain.email#" subject="#subject#"  type="HTML" >
    <cfinclude template="#emailData.includePath#" >
</cfmail> 
```

为了更清楚，这是我的整个文件系统：

> access.cfm -> some.cfc -> include_1（有效）-> include_2（路径问题）

我有一个 try/catch，它通过电子邮件将错误发​​送给我，它位于 include_1 中。

如何使用我创建的映射最终能够访问我的包含文件？

请注意，在`emailLists`我拥有动态文件夹之后，这些文件夹会根据我尝试向哪个客户端发送电子邮件而改变。所以路径的最终结果是：

```
E:\sites\Example.Com\cf_modules\autoresponders\Emails\emailLists\client_A\email_template.cfm 
```

我尝试通过这样做来使用我的映射 `<cfinclude template="/email_sender/#emailData.includePath#" >`

这给了我这个错误：

> CFC 的路径必须指定为完整路径或当前模板的相对路径，而不使用映射。

此外，我尝试在 cfinclude 中包含完整路径，这也导致了以下错误：

> 注意：如果您希望在 CFINCLUDE 中使用绝对模板路径（例如，>template="/mypath/index.cfm"），则必须使用 ColdFusion 管理器为该路径创建映射。或者，您可以使用每个应用程序设置来指定特定于该应用程序的映射，方法是在 Application.cfc 中指定映射结构到 THIS.mappings。
> 使用相对路径（例如，template="index.cfm" 或 template="../index.cfm"）不需要创建任何特殊映射。因此，建议您尽可能使用 CFINCLUDE 的相对路径。

任何帮助/建议将不胜感激

编辑：重新启动服务器后，工作的版本是这个： `<cfinclude template="/email_sender/#emailData.includePath#" >`

感谢那些回答的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:14:03.827

一些问题，而不是一些答案。

1.  您是否在 CFAdmin 或 Application.cfc 中设置了映射？
2.  如果你运行下面的代码，你会得到什么？

    #expandPath("/email_sender")#

3.  的价值是`#emailData.includePath#`多少？

4.  这有什么价值：`#expandPath("/email_sender#emailData.includePath#")#`？
5.  您能否向我们提供错误消息的确切文本，而不是模糊地描述它们。
6.  的价值是`#fileExists(expandPath("/email_sender#emailData.includePath#"))#`多少？

如果您可以使用该信息更新您的问题，您将发现哪里出错了，或者我们可以帮助找出故事的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:29:26.330

类似的事情曾经发生在我身上。本质上，我们编辑了 xml 文件，而不是使用管理界面。直到我们的系统管理员重新启动服务器，我们才意识到为什么没有进行映射。那么，自从您添加映射后，您是否重新启动了服务器？

# objective-c - 加载触摸响应的 3D 模型

> ID：13073896
> 
> 赞同：3
> 
> 时间：2012-10-25T17:21:03.510
> 
> 标签：objective-c, ios, 3d, xcode4.5

我正在编程一个博物馆应用程序，我想显示一个响应用户触摸的 3D 模型，例如捏缩放或围绕模型移动。我已经搜索了很多，但我发现的只是游戏引擎，对于这件事来说似乎非常复杂。有什么方法可以导入模型（它们具有的格式无关紧要），显示它并使其触摸响应？如果代码（或引擎）是开源的会更好，我更喜欢免费应用程序而不是付费应用程序。非常感谢！

更新：现在我可以使用 cocos3D 加载 3D 模型，但正如我在回答中所说的那样，我可以加载的模型非常低调。这是一个博物馆的应用程序，我必须是一个更详细的模型。我正在使用显示动画“hello world”的 cocos3D 标准模板项目，只是更改了 .pod 文件以加载我想要的文件并开始添加一些修改以支持用户触摸交互。我减少了大约 80% 的原始多边形来加载它（[这是模型的一小部分](https://www.dropbox.com/s/muiq61q4hmir68u/Captura%20de%20pantalla%202012-10-27%20a%20les%2023.41.44.png) ）。如果我尝试加载将原始模型减少约 50% 的模型（看起来很棒，[就像这些](https://www.dropbox.com/s/bpv7l3uhq98qw1q/Captura%20de%20pantalla%202012-10-27%20a%20les%2023.49.42.png) ），应用程序崩溃并给我这个日志崩溃：

** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'OpenGL ES 1.1 supports only GL_UNSIGNED_SHORT or GL_UNSIGNED_BYTE types for vertex indices' *** First throw call stack: (0x22cc012 0x1ca9e7e 0x22cbe78 0x173ff35 0x1b550f 0x186751 0x180a81 0x17b750 0x11de32 0x1270d4 0x1263ac 0x14f1a2 0x13ca01 0x14ee02 0x14d45e 0x14d3c2 0x14bb22 0x14a452 0x14efcc 0x14d493 0x14d3c2 0x1643e3 0x162a41 0x10c197 0x10c11d 0x10c098 0x3d79c 0x3d76f 0x85282 0x16e9884 0x16e9737 0x8b56f 0xc4192d 0x1cbd6b0 0x505fc0 0x4fa33c 0x4fa150 0x4780bc 0x479227 0x51bb50 0xbef9ff 0xbf04e1 0xc01315 0xc0224b 0xbf3cf8 0x2fd4df9 0x2fd4ad0 0x2241bf5 0x2241962 0x2272bb6 0x2271f44 0x2271e1b 0xbef7da 0xbf165c 0x1ca506 0x2a55) libc++abi.dylib: terminate称为抛出异常 (lldb)

它无法加载所有多边形并崩溃。有什么解决办法吗？或者我必须寻找另一种加载模型的方法？如果您想了解更多信息，请询问。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:28:10.170

我使用[Cocos3D](http://brenwill.com/cocos3d/)导入了一个地球模型，并根据用户的手势进行旋转。你可以看一下，这不是一件复杂的事情。

查看[这篇文章](http://www.cocos2d-iphone.org/forum/topic/19375)以获取有关加载模型的一些示例代码。[对于处理旋转，我发现这篇文章](https://stackoverflow.com/questions/4926858/3d-free-rotation-of-object)非常有用。

# php - 在 Doctrine & Symfony 2.1 中使用喜欢的数组进行查询

> ID：13073900
> 
> 赞同：1
> 
> 时间：2012-10-25T17:21:29.380
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1, dql

我有一组术语，我想在一个 Doctrine 2 查询中使用 LIKE 通配符进行匹配。数据库是 SQL，我使用的是 DQL，但查询构建器解决方案会很好。我当前的查询设置是这样的：

```
foreach($textterms as $text)
{
$parameters[] = '%-'.$text.'-%';
}

$em = $this->getDoctrine()->getManager();
$query = $em->createQuery(
'SELECT p FROM Post p WHERE p.searchfield IN LIKE (:text) ORDER BY p.datetime DESC'
        )->setParameter('text', $parameters);
        $posts = $query->getResult(); 
```

但是我得到了 symfony 错误“QueryException: [Syntax Error] line 0, col 62: Error: Expected Literal, got '('”

这个查询在教义中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:32:51.583

您收到此类错误是因为查询在 LIKE 语句之后需要一个值。没有像“IN LIKE”这样的东西。我会考虑的可能解决方案：

```
// Query Builder added to show difference in code readability I personally use queryBuilder mostly
$query = $this->getDoctrine()->getManager()->createQueryBuilder();
$query->select('p')
        ->from('Post', 'p')
        ->orderBy('p.datetime', 'DESC');
$i = 0;
$parameters = array();
foreach ($textterms as $key => $text)
{
    $query->orWhere('p.searchfield LIKE ?' . $i++);
    $parameters[] = '%-' . $text . '-%';
}
$query->setParameters($parameters);
$posts = $query->getQuery()->getResult();

// Query
$orX = new \Doctrine\ORM\Query\Expr\Orx();
$i = 0;
$parameters = array();
foreach ($textterms as $text)
{
    $orX->add('p.searchfield LIKE ?' . $i++);
    $parameters[] = '%-' . $text . '-%';
}
$orX = (string)$orX;
if(!empty($orX))
{
    $orX = 'WHERE ' . $orX;
}
$sql = sprintf('SELECT p FROM Post p %s ORDER BY p.datetime DESC', $orX);
$query = $this->getDoctrine()->getManager()->createQuery($sql);
$query->setParameters($parameters);
$posts = $query->getResult(); 
```

# ada - source_dirs 在 .gpr scipt 中不起作用

> ID：13073902
> 
> 赞同：1
> 
> 时间：2012-10-25T17:21:31.130
> 
> 标签：ada, gnat

我继承了一个 Ada/C++ 项目，我正在尝试使用 gprbuild 来自动化构建过程（之前是使用一组大约 12 个 .bat 文件完成的）。我对 Ada 和 gprbuild 完全陌生，但实际上取得了不错的进展。我可以编译我需要的 .exe，但不能编译库。我无权完全共享 .gpr 文件，但相关部分如下所示：

```
[snip]
for Source_Dirs use (
                    "c_plus_plus_files",
                    "ada_files",
                    "..\another_project\some_other_ada_files",
                    "..\another_project\even_more_ada_files"
                    );
[snip]
for Source_Files use (
   "my_ada_file.ads",                       
   "another_ada_file.ads",                      
   "one_more_ada_file.adb", 
   "c_plus_plus_file.cpp"
    );
[snip] 
```

当我运行“gprbuild -P my_project.gpr”时，它又运行“gcc -c gnat5 one_more_ada_file.adb”并抱怨它找不到 one_more_ada_file.adb 依赖的某个文件。依赖项在 ..\another_project\even_more_ada_files 中，所以我希望能找到它。但是，如果我将依赖项复制到与 one_more_ada_file.adb 相同的文件夹中，错误就会消失。

由于 VCS 的设置方式以及我们如何在两个项目之间共享代码，我宁愿弄清楚我使用“供 source_dirs 使用”的方式有什么问题，而不是保留所有 ada 文件的多个副本。

同样，我是 Ada/GPS 新手，所以如果我遗漏了相关信息，请告诉我。

更新：似乎具体问题不是 source_dirs 根本没有做任何事情，而是它不能处理两个源目录，其中一个目录中的 .ads 文件依赖于另一个目录中的 .ads 文件。也就是说，即使在我上面的“其他”项目中，some_other_ada_files 中依赖于 even_more_ada_files 中的 .ads 文件的 .ads 文件在我运行 gprbuild 时也不会使用 gcc -c -gnat05 命令编译（错误： even_more_ada_files 未找到），但如果我手动（或在 .bat 脚本中）运行 gcc 命令，并带有两个 -I 标志，每个目录一个标志，它确实会被编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:38:50.040

在处理多个项目时，您通常应该为每个项目创建一个 .gpr 文件，并根据需要让您的项目依赖于其他项目。

因此：

```
project another_project is
   for Source_Dirs use
      ("some_other_ada_files",
       "even_more_ada_files");
end another_project; 
```

接着：

```
with "..\another_project\another_project.gpr"

project The_Project is
   for Source_Dirs use 
      ("c_plus_plus_files",
       "ada_files");
end The_Project; 
```

# jsp - 在tomcat文件夹外显示图像

> ID：13073907
> 
> 赞同：4
> 
> 时间：2012-10-25T17:21:54.567
> 
> 标签：jsp, tomcat

我是 jsp 和 java 的新手，我目前正在尝试从位于我的 C: 驱动器中的文件夹中的 jsp 页面上显示图像..但由于某种原因，无论如何我都无法显示它我尝试什么......我目前拥有它，如下所示：

```
<img src="/argsdbPics/mazda.jpg" width = "90" height = "55" alt ="mazda"/> 
```

这是什么原因造成的，如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:24:37.890

它必须通过`http://`URL 可用（就像您通常在浏览器的地址栏中输入的那样）。即必须通过 URL 单独下载图像的网络浏览器，而不是必须在生成 JSP 期间以某种方式自动包含它们的网络服务器。

最简单的方法是编辑 Tomcat`/conf/server.xml`并添加一个新`<Context>`元素以在任意文件夹上注册一个虚拟 URL。假设图像文件夹位于`C:\path\to\argsdbPics`，这是一个示例：

```
<Context docBase="/path/to/argsdbPics" path="/argsdbPics" /> 
```

这样文件夹内容就可以通过`http://localhost:8080/argsdbPics/...`. 因此，如果您`mazda.jpg`在文件夹中有一个`C:\path\to\argsdbPics`，这样它就可以通过`http://localhost:8080/argsdbPics/mazda.jpg`. 这样，您的以下 HTML 尝试应该可以工作：

```
<img src="/argsdbPics/mazda.jpg" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T15:02:57.693

如果您使用 struts 和 jsp，我找到了一个很好的方法，无需任何 tomcat 更改，您就可以实现 ServletRequestAware 接口并以这种方式调用它：

> ```
>  String filePath = servletRequest.getRealPath("/"); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T15:30:00.250

我做了一个棘手的解决方案..我知道这不是最好的，但它正在工作..
当我将照片上传到目录时，我用随机密码密钥加密它们并给它们一个随机名称..密钥和名称被存储在数据库中..
所以当我想显示一张照片时，我在一个临时文件夹中解密它并阅读它..当不再使用所需的页面时我删除了..
即使你得到了真实的路径，你也可以'不要使用加密文件。

# c++ - 如何在 C++ 中优化输入/输出

> ID：13073909
> 
> 赞同：1
> 
> 时间：2012-10-25T17:21:59.477
> 
> 标签：c++, performance

我正在解决一个需要非常快速的输入/输出的问题。更准确地说，输入数据文件最大为 15MB。是否有一种快速、读取/打印整数值的方法。

*注意：*我不知道它是否有帮助，但输入文件具有以下形式：

*   第 1 行：一个数字 n
*   第 2..n+1 行：三个数字 a、b、c；
*   第 n+2 行：一个数字 r
*   第 n+3..n+4+r 行：四个数字 a,b,c,d

*注 2：*输入文件将为`stdin`.

**编辑：**像下面这样的东西还不够快：

```
void fast_scan(int &n) {
  char buffer[10];
  gets(buffer);
  n=atoi(buffer);
}

void fast_scan_three(int &a,int &b,int &c) {
  char buffval[3][20],buffer[60];
  gets(buffer);
  int n=strlen(buffer);
  int buffindex=0, curindex=0;
  for(int i=0; i<n; ++i) {
    if(!isdigit(buffer[i]) && !isspace(buffer[i]))break;
    if(isspace(buffer[i])) {
      buffindex++;
      curindex=0;
    } else {
      buffval[buffindex][curindex++]=buffer[i];
    }
  }
  a=atoi(buffval[0]);
  b=atoi(buffval[1]);
  c=atoi(buffval[2]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:43:02.783

一般输入/输出优化原则是**执行尽可能少的 I/O 操作，读/写尽可能多的数据**。

所以性能感知解决方案通常如下所示：

1.  将设备中的所有数据读入某个缓冲区（使用上面提到的原理）
2.  将生成结果数据的数据处理到某个缓冲区（就地或另一个）
3.  将结果从缓冲区输出到设备（使用上面提到的原理）

例如，您可以使用[`std::basic_istream::read`](http://en.cppreference.com/w/cpp/io/basic_istream/read)大块输入数据，而不是逐行输入。与输出类似的想法 - 生成单个字符串作为结果手动添加换行符并立即输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:05:18.557

如果您想最小化物理 I/O 操作开销，请通过一种称为[内存映射文件](http://en.wikipedia.org/wiki/Memory-mapped_file)的技术将整个文件加载到内存中。我怀疑你会得到显着的性能提升。解析很可能会更昂贵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:01:47.780

将几个输入行放在一个缓冲区中，将它们拆分，然后在不同的线程中同时解析它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:05:28.117

考虑使用线程。线程对很多事情都很有用，但这正是促使线程发明的问题。

其基本思想是将输入、处理和输出分开，因此这些不同的操作可以并行运行。做对了，你会看到显着的加速。

让一个线程接近纯输入。它将行读入行缓冲区。让第二个线程进行快速预解析并将原始输入组织成块。您有两件事需要解析，包含包含三元组的行数的行和包含包含四元组的行数的行。该线程将原始输入形成仍然主要是文本的块。第三个线程解析三元组和四元组，将输入重新形成完全解析的结构。由于数据现在被组织成独立的块，您可以拥有第三个操作的多个实例，以便更好地利用计算机上的多个处理器。最后，其他线程将对这些完全解析的结构进行操作。注意：结合其中一些操作可能会更好，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T19:44:49.180

它只有 15MB。我只是将整个东西吞入内存缓冲区，然后解析它。解析看起来像这样，大约：

```
#define DIGIT(c)((c) >= '0' && (c) <= '9')
while(*p == ' ') p++;
if (DIGIT(*p)){
    a = 0;
    while(DIGIT(*p){
        a *= 10; a += (*p++ - '0');
    }
}
// and so on... 
```

您应该能够在睡梦中编写这种代码。

我不知道这是否比 快`atoi`，但它并没有大惊小怪地弄清楚数字的开始和结束位置。我会远离，`scanf`因为它要经过九码才能确定其格式字符串。

如果您在循环中运行整个事情 1000 次并获取一些堆栈样本，您应该会看到它花费了将近 100% 的时间来读取文件并生成输出（您没有提到）。你就是打不过那个。如果您确实看到在实际解析中花费了大量时间，则可能会进行重叠 I/O，但机器必须非常慢，或者 I/O 非常快（例如来自固态驱动器）在那之前是有道理的。

# group-by - 不能在用于 GROUP BY 子句的 group by 列表的表达式中使用聚合或子查询

> ID：13073912
> 
> 赞同：-1
> 
> 时间：2012-10-25T17:22:02.460
> 
> 标签：group-by

我的分组出现错误...请帮助。我的 SQL 代码如下。我正在尝试获取 1 列医生姓名，2 列医疗保险患者计数，3 列非医疗保险患者

```
SELECT DoctorListName,
(CASE WHEN InsuranceCarrierName IN ('Humana Medicare','Medicare','Humana Gold Plus Medicare')
THEN count(uvPatientInsurance.InsuranceCarrierName) END) as CountMedicare,
(CASE WHEN InsuranceCarrierName NOT IN ('Humana Medicare','Medicare','Humana Gold Plus Medicare')
THEN count(uvPatientInsurance.InsuranceCarrierName) END) as CountNOTMedicare

FROM (STPN.dbo.vSelectPatient vSelectPatient
INNER JOIN STPN.dbo.uvPatientInsurance uvPatientInsurance ON vSelectPatient.PatientId=uvPatientInsurance.PatientId)
INNER JOIN STPN.dbo.uvVisit uvVisit ON vSelectPatient.PatientId=uvVisit.PatientId

WHERE vSelectPatient.PatientStatusMId=-900
AND (uvVisit.Entered>={ts '2011-01-01 00:00:00'}
AND uvVisit.Entered<{ts '2012-09-30 00:00:01'})
GROUP BY DoctorListName,
(CASE WHEN InsuranceCarrierName IN ('Humana Medicare','Medicare','Humana Gold Plus Medicare')
THEN count(uvPatientInsurance.InsuranceCarrierName) END),
(CASE WHEN InsuranceCarrierName NOT IN ('Humana Medicare','Medicare','Humana Gold Plus Medicare')
 THEN count(uvPatientInsurance.InsuranceCarrierName) END) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:25:38.600

通常，在使用`COUNT`或任何聚合函数时，您需要指定一个`GROUP BY`子句......就像错误所说：

```
SELECT DoctorListName,
(CASE WHEN InsuranceCarrierName IN ('Humana Medicare','Medicare','Humana Gold Plus  Medicare')
THEN count(uvPatientInsurance.InsuranceCarrierName) END) as CountMedicare,
(CASE WHEN InsuranceCarrierName NOT IN ('Humana Medicare','Medicare','Humana Gold Plus Medicare')
THEN count(uvPatientInsurance.InsuranceCarrierName) END) as CountNOTMedicare

FROM (STPN.dbo.vSelectPatient vSelectPatient
INNER JOIN STPN.dbo.uvPatientInsurance uvPatientInsurance ON vSelectPatient.PatientId=uvPatientInsurance.PatientId)
INNER JOIN STPN.dbo.uvVisit uvVisit ON vSelectPatient.PatientId=uvVisit.PatientId

WHERE vSelectPatient.PatientStatusMId=-900
AND (uvVisit.Entered>={ts '2011-01-01 00:00:00'}
AND uvVisit.Entered<{ts '2012-09-30 00:00:01'})
GROUP BY DoctorListName 
```

您的`GROUP BY`子句只能使用列，不能使用`COUNT`.

# visual-studio-2010 - ClickOnce 先决条件：错误：已发布的安装程序可能已损坏

> ID：13073915
> 
> 赞同：14
> 
> 时间：2012-10-25T17:22:26.580
> 
> 标签：visual-studio-2010, visual-studio-2012, clickonce, prerequisites

我创建了一个自定义安装包来在客户端机器上安装一些字体，并将其部署到`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\FontsInstaller`. 一切都很好，将它作为 Visual Studio 2010 中的先决条件进行引用，我能够毫无问题地发布应用程序。

另一方面，客户端在哈希验证期间收到错误：

> 验证文件哈希
> 
> 错误：安装程序检测到文件“C:\Users\RMORAN~1\AppData\Local\Temp\VSD4684.tmp\FontsInstaller\fontsinstaller.msi”自最初发布以来已更改或可能已损坏。

我尝试使用 Bootstrapper Manifest Generator 包含哈希并排除它，我总是在客户端上得到相同的结果。一旦哈希验证失败，文件就会立即被删除（出于安全原因）。

现在，我发现一个[Microsoft Connect 错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/758814/boostrapper-package-creation-corrupted-when-vs-2012-installed)说：

> “我安装了一个自定义引导程序包作为我的应用程序的先决条件。当我在安装了 Visual Studio 2012 的系统上构建它时，安装失败并出现以下错误：
> 
> 安装程序检测到文件“...”自最初发布以来已更改或可能已损坏。
> 
> 我在 Visual Studio 2010 中构建，对包或项目没有任何更改。当未安装 Visual Studio 2012 时，这将按预期工作。”

我尝试在另一个未安装 VS2012 的工作站上构建此安装程序，并且它通过了客户端上的哈希验证（我遇到了签名问题，但那是另一回事）。这确实是具有 VS2012 的构建机器的问题，而不是客户端，因为在我原来的工作站上构建的包在没有 VS2012 的机器上也失败了。

有没有其他人遇到过这个问题，如果是这样，除了没有安装VS2012之外，您是否找到了解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T04:51:31.183

我使用反射工具查看引导程序生成 MSBuild 任务（在安装了 .NET 4.5 的机器上），发现它增加了`product.xml`文件的`<PackageFile />`元素。具体来说，它尝试从每个文件中计算一个公钥。如果它可以找到一个，它将键与`PublicKey`属性的值进行比较。如果值不同，它会发出警告，但在这两种情况下，它都会保留刚刚计算的值。

如果无法确定公钥，则计算文件的 SHA256 哈希值，并与`Hash`属性值进行类似的比较，如果它们不同，则会发出警告，并`Hash`使用计算值设置属性值。

`SETUPCFG`您可以通过从结果中提取资源来确认这些发现`setup.exe`；它是文件合并的文本版本`product.xml`。

无论如何，还记得我说过如果找不到公钥，它会计算文件的 SHA256 哈希吗？[<PackageFiles> 元素（Bootstrapper）](http://msdn.microsoft.com/en-us/library/ms229175%28v=vs.100%29.aspx)的文档说属性的**值`Hash`应该是 SHA1 hash**。

我无法验证结果`setup.exe`使用哪个 SHA1 或 SHA256 来验证`Hash`属性的值（它是非托管代码，我找不到它的符号），但让记录显示类似的 .NET 4.0 版本的引导程序生成器 MSBuild 任务显示它确实使用 SHA1 算法来计算`Hash`属性的值，因此通过推断我们可以说`setup.bin`（至少来自 Windows SDK v7.0A 的那个）正在使用 SHA1。我很确定我尝试使用`setup.bin`Windows SDK v8.0A 中的，我得到了相同（错误）的结果。（可以通过将`setup.bin`v8.0A SDK 复制到仅支持 .NET 4.0 的机器并查看结果是否`setup.exe`可以使用基于哈希的验证安装自定义引导程序包来确认这一点）

因此，如果**在设置引导程序中基于哈希的验证被破坏**，我们至少可以使用公钥（基于证书）验证来代替。好消息是，如果引导程序生成器能够从包文件中提取证书的公钥，它将自动开始使用此机制。坏消息是，这意味着*每个包文件都必须使用`signtool.exe`有效的代码签名证书进行签名*（不是每个人都可能有代码签名证书，尽管如果你点击一次，你可能会......）。

一旦我签署了我们的自定义引导程序使用的包文件，当我使用安装了 .NET 4.5 的机器构建项目时，我在运行时停止安装失败，同时在使用没有安装的机器时仍然生成有效的引导程序已安装 .NET 4.5。

tl;dr：使用代码签名证书对包文件进行签名，以避免 .NET 4.5 中引入的缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T15:13:07.493

你需要改变`GenerateBootstrapper Path`：

`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper`

至

`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\Bootstrapper`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T00:03:50.160

您需要从以下位置更改 GenerateBootstrapper Path：

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper

至

C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\Bootstrapper

并将 msi 包（您要使用的）从 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper 复制到 C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\引导程序

# jqgrid - 将 jqgrid 上的每个“记录”拆分为两行

> ID：13073916
> 
> 赞同：1
> 
> 时间：2012-10-25T17:22:38.437
> 
> 标签：jqgrid, jqgrid-asp.net

我有一个 jqgrid，每条记录都有很多信息。它会导致大量水平滚动，我想避免这种情况。

我考虑过使用子网格，但是我看到的子网格的每个示例都有折叠的子信息，我真的不想要那个。我只想让每条记录的第二行缩进一点。

除了使用子网格之外，还有什么好方法可以处理这个问题。我发现 subgrid 的另一个缺点是它希望在单击时加载辅助数据以展开它。我宁愿在初始网格加载时加载所有数据。

TIA

# ruby - 在 ruby 中，有没有办法告诉一个类从外部绑定继承变量/方法？

> ID：13073921
> 
> 赞同：-1
> 
> 时间：2012-10-25T17:22:52.740
> 
> 标签：ruby, metaprogramming

这是一个简单的例子：

```
def abc
    puts 'abc'
end

class Foo
    def self.bar
        abc
    end
end

Foo.bar 
```

这会中断，因为`abc`在内部未定义`Foo.bar`。有没有办法告诉班级“继承”本地绑定以完成上述工作？我基本上是在尝试为“bar”方法创建一个简单的命名空间。

我的第一次尝试是从当前的 eigenclass ( `class Foo < (class << self; self; end)`) 子类化，但你不能子类化一个虚拟类。另外，虽然我可以显式地传入绑定并在里面使用 eval ，但这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:35:25.657

这个怎么样

但我一般不建议自己做

```
def abc
    puts 'abc'
end

class Foo
    def self.bar
        eval("abc",TOPLEVEL_BINDING)
    end
end

Foo.bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:37:16.213

如果您只需要一个简单的命名空间，您可以使用模块吗？

```
def abc
  puts 'abc'
end

module Foo
  def self.bar
    abc
  end
end

Foo.bar #=> abc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T23:05:44.577

> 这会中断，因为`abc`在内部未定义`Foo.bar`。

不，它没有。`abc`被隐式定义为一个私有实例方法，`Object`并且由于一个类 IS-A `Object`，你可以调用它就好了。您发布的代码应该按原样工作，并且确实*对*我有用。

# c++ - C结构（C++ POD）和谷歌protobufs之间的转换？

> ID：13073930
> 
> 赞同：8
> 
> 时间：2012-10-25T17:23:44.720
> 
> 标签：c++, c, data-structures, protocol-buffers, idl

我的代码当前传递了很多（有时是嵌套的）C（或 C++ 普通旧数据）结构和数组。

我想将这些转换为/从谷歌 protobufs 转换。我可以手动编写在这两种格式之间转换的代码，但自动生成这样的代码不太容易出错。做这个的最好方式是什么？（这在具有足够内省以迭代成员变量名称的语言中很容易，但这是我们正在谈论的 C++ 代码）

我正在考虑的一件事是编写解析 C 结构然后输出 .proto 文件的 python 代码，以及从成员到成员（在任一方向）复制所有类型的 C 代码，但也许有一个更好的方法......或者也许已经可以生成另一个 IDL：

1.  .h 文件包含所有嵌套类型
2.  .proto 文件包含等价物
3.  .c 文件，其中包含在 .proto 文件生成的 C++ 结构和 .h 文件中定义的结构之间复制任一方向的函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:22:00.550

可以通过使用[TextFormat](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.text_format)解析 ASCII 表示来构建协议缓冲区。因此，一种选择是`dumpAsciiProtoBuf`为每个结构添加一个方法。该方法将转储任何简单字段（如字符串、布尔值等）并`dumpAsciiProtoBuf`在嵌套结构字段上递归调用。然后，您必须确保连接的结果是可以使用[TextFormat](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.text_format)解析的有效 ASCII 协议缓冲区。

请注意，这可能会对性能产生一些影响（因为解析 ASCII 表示可能很昂贵）。但是，这样可以省去用不同语言编写转换器的麻烦，所以这似乎是一个方便的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T09:27:48.957

我不会自己解析 C 源代码，而是使用[LibClang](http://clang.llvm.org/doxygen/group__CINDEX.html)将 C 文件解析为[AST](https://en.wikipedia.org/wiki/Abstract_syntax_tree)和我自己的 AST walker 以根据需要生成[Protobuf](https://en.wikipedia.org/wiki/Protocol_Buffers)和转码器。谷歌搜索“libclang walk AST”应该提供一些开始，比如`ast-walker.cc`和`ast-dumper.cc`来自[这个 github 存储库](https://github.com/Submanifold/libclang-experiments)，例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T18:41:12.570

我找不到解决此问题的现成解决方案，如果有，请告诉我！

如果你决定在 python 中使用你自己的，[gdb 的 python 绑定](https://sourceware.org/gdb/onlinedocs/gdb/Python-API.html)可能会很有用。然后，您可以读取符号表，查找指定文件中定义的所有结构，并迭代所有结构成员。然后用于`<gdbtype>.strip_typedefs()`获取每个成员的原始类型并将其转换为适当的 protobuf 类型。

这可能比文本解析器更安全，因为它将处理依赖于体系结构、编译器标志、预处理器宏等的类型。

我猜想从 struct 成员到消息字段的关系也可以生成与 protobuf 相互转换的代码，但听起来并不容易。

# javascript - Internet Explorer - 检查权限是否被拒绝

> ID：13073938
> 
> 赞同：1
> 
> 时间：2012-10-25T17:24:07.137
> 
> 标签：javascript, internet-explorer

我在 Internet Explorer 8 中有以下代码：

```
if (window.opener != null && window.opener.foo != null)  window.opener.foo = bar; 
```

有时，`window.opener`是设定的。但是，如果用户打开一个弹出窗口然后离开，则应避免在其上设置属性的尝试。

在 Firefox 和 Chrome 中，这是可行的，因为`window.opener`一旦用户退出或刷新该窗口，它就会变为 null。然而，在 IE 中，`window.opener`它不是 null，`window.opener.foo`而是给出“Permission Denied”而不是 null。因此，`window.opener.foo != null`评估为真。

如何解决这个问题，什么值与 Internet Explorer 中的“Permission Denied”匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:28:40.863

这是我在 IE8 中使用的检查：

```
if (window.opener && !window.opener.closed) {
    // do what you will with window.opener
} 
```

编辑：如果你想显示一个友好的错误，你可以尝试这样的事情：

```
try {
    if (window.opener && window.opener.foo != null) {
        window.opener.foo = bar;
    }
} catch (e) {
    if (e.description.toLowerCase().indexOf('permission denied') !== -1) {
        // handle it nicely
    } else {
        // some other problem, let it blow up
        throw e;
    }
} 
```

这使您可以专门处理“拒绝访问”错误，而不会隐藏任何其他潜在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T09:36:08.277

如果您在 IE 中无权访问 window.opener 的属性，则将其传递给 Object.keys() 将返回一个长度为 0 的字符串。

示例用法：

```
if (window.opener && Object.keys(window.opener).length) {
  // do what you will with window.opener
} 
```

# python - 用于测量电池时间的python脚本

> ID：13073944
> 
> 赞同：2
> 
> 时间：2012-10-25T17:24:28.960
> 
> 标签：python, time, battery

我正在寻找一个脚本来记录电池时间（即笔记本电脑使用电池运行的总时间）。我想我会用python写一个。我是 python 的初学者，并使用该站点中的许多示例提出了这一点：D

```
#!/usr/bin/env python

import subprocess, os
from datetime import datetime

time = (datetime.now()).strftime('%H:%M:%S')
date = (datetime.today()).strftime('%d/%m/%y')

def start(x):
    if x[2] == 'Discharging' and int(x[3][:-1]) in range(98, 101):

        batt_log = open('/home/saad/Code/batt_log', 'w')
        batt_log.write(time + '%s' %(os.linesep))
        batt_log.close()

def end(x):
    if x[2] == 'Discharging' and int(x[3][:-1]) in range(1, 11):

        batt_log = open('/home/saad/Code/batt_log', 'a')
        batt_log.write(time)
        batt_log.close()

def main():

    output = subprocess.check_output('acpi -b', shell=True)
    l = (output.replace(',', '')).split(' ')

    if not (l[2] in ['Charging', 'Full'] or int(l[3][:-1]) in range(11, 98)):
        start(l)
        end(l)
        ts = []     
        batt_log = open('/home/saad/Code/batt_log', 'r')
        all_lines = batt_log.readlines()
        for line in all_lines:
            ts.append(line.replace(os.linesep, ''))

        if len(ts) > 1:
            FMT = '%H:%M:%S'
            tdelta = datetime.strptime(ts[1], FMT) - datetime.strptime(ts[0], FMT)
            batt_store = open('/home/saad/Code/batt_store', 'a')
            batt_store.write(date + '\nTotal Time: ' + str(tdelta) + '\n')
            batt_store.close()

    batt_store = open('/home/saad/Code/batt_store', 'r')    
    all_lines = batt_store.readlines()
    print "Last Battery Time:", all_lines[-1][-8:]

if __name__ == '__main__':
    main() 
```

该脚本实际上有效，但我希望它更好。它使用系统 acpi 命令获取电池统计信息，将它们写入一个文件 (batt_log) 以存储开始和结束时间，然后从该文件中读取，计算时间差并将其写入另一个文件 (batt_store)。我每 5 分钟运行一次。

我想做的可能是使用更少的文件 I/O 操作并找到一种在程序中持久存储值的方法。欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:25:06.800

通过命令获取数据要容易得多。本质上，acpi 命令所做的是在 /dev/ 中的特定文件节点上打开文件描述符。您可以查看 dbus 接口以获取信息。

关于文件的打开和关闭，您可以再次使用 dbus 或 gconf 等服务，但编写文件更容易。

# android - ClassNotFoundException - 连接到 MSSQL 数据库

> ID：13073945
> 
> 赞同：0
> 
> 时间：2012-10-25T17:24:31.430
> 
> 标签：android, sql-server, classnotfoundexception

我想将我的 android 应用程序连接到我的 MSSQL 数据库。不幸的是，有一个问题：/

> 10-25 19:17:00.536: W/System.err(18961): java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver 10-25 19:17:00.546: W/System.err(18961) : 在 java.lang.Class.classForName(Native Method) 10-25 19:17:00.556: W/System.err(18961): 在 java.lang.Class.forName(Class.java:217) 10-25 19 :17:00.556: W/System.err(18961): at java.lang.Class.forName(Class.java:172) 10-25 19:17:00.556: W/System.err(18961): at com. example.mssqlcon.MainActivity.onCreate(MainActivity.java:21) 10-25 19:17:00.556: W/System.err(18961): 在 android.app.Activity.performCreate(Activity.java:4465) 10-25 19:17:00.556: W/System.err(18961): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 10-25 19:17:00.556: W/System.err(18961): 在 android .app.ActivityThread.performLaunchActivity(ActivityThread.java:2033) 10-25 19:17：00.556: W/System.err(18961): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104) 10-25 19:17:00.556: W/System.err(18961): 在 android.app.ActivityThread .access$600(ActivityThread.java:132) 10-25 19:17:00.556: W/System.err(18961): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157) 10-25 19: 17:00.556: W/System.err(18961): 在 android.os.Handler.dispatchMessage(Handler.java:99) 10-25 19:17:00.556: W/System.err(18961): 在 android.os .Looper.loop(Looper.java:137) 10-25 19:17:00.566: W/System.err(18961): 在 android.app.ActivityThread.main(ActivityThread.java:4575) 10-25 19:17 :00.566: W/System.err(18961): at java.lang.reflect.Method.invokeNative(Native Method) 10-25 19:17:00.566: W/System.err(18961): at java.lang.reflect .Method.invoke(Method.java:511) 10-25 19:17:00.566:W/System.err(18961): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789) 10-25 19:17:00.566: W/System.err(18961): 在 com .android.internal.os.ZygoteInit.main(ZygoteInit.java:556) 10-25 19:17:00.566: W/System.err(18961): at dalvik.system.NativeStart.main(Native Method) 10-25 19:17:00.566: W/System.err(18961): 由: java.lang.NoClassDefFoundError: net/sourceforge/jtds/jdbc/Driver 10-25 19:17:00.566: W/System.err(18961) : ... 18 更多 10-25 19:17:00.566: W/System.err(18961): Caused by: java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver 10-25 19:17:00.576 : W/System.err(18961): 在 dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61) 10-25 19:17:00.576: W/System.err(18961): 在 java.lang.ClassLoader。 loadClass(ClassLoader.java:501) 10-25 19:17:00.576:W/System.err(18961): at java.lang.ClassLoader.loadClass(ClassLoader.java:461) 10-25 19:17:00.576: W/System.err(18961): ... 18 更多

我的代码：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        Class.forName("net.sourceforge.jtds.jdbc.Driver").newInstance();

        Connection connection = DriverManager.getConnection(
                "jdbc:jtds:sqlserver://ip_of_my_database", "*****", "*******");
        Statement statement = connection.createStatement();
        //ResultSet result = statement
        //      .executeQuery("SELECT * FROM nazwatabeli");
        ResultSet result = statement.executeQuery("SELECT * FROM name");
        if(result.first()){
            do{
                Log.v("MainActivity", "Name: "+result.getString(result.getRow()));
            } while(result.next());

        }
    } catch (Exception e){
        e.printStackTrace();
    }
} 
```

}

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:30:58.537

您无法使用 Android 设备直接访问 SQL Server。您必须使用一种网络服务来访问连接了 SQL 的服务器。您可以使用 java 或 php 来执行此操作。检查以下链接以获取带有 android 的 java webservices。

[http://sarangasl.blogspot.com/2011/10/android-web-service-access-tutorial.html](http://sarangasl.blogspot.com/2011/10/android-web-service-access-tutorial.html)

您使用的 SDK 版本是什么？如果它是 r20 或更高版本，则必须在整个项目中包含所有用于项目内 lib 文件夹的外部库文件。否则它会告诉 ClassNotFoundException。如果您需要任何澄清，请告诉我。

# websocket - P2P照片分享应用

> ID：13073947
> 
> 赞同：0
> 
> 时间：2012-10-25T17:24:38.103
> 
> 标签：websocket, p2p, webrtc

我想实现一个P2P照片分享应用程序。场景是这样的：A在线，他想与B分享他的照片。B通过一些服务器获得A的IP地址并直接访问A的照片。是否可以使用 WebRTC 或 Websocket 来实现？请给我一些意见，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:35:15.830

*我使用非常小*的 nodejs 服务器在 websockets 上实现了 P2P 文件传输。但由于“下载”标签，它只能在 Chrome 上正常工作。我还必须有中间件服务器，所以它不是严格的 P2P。我的 node.js 服务器从来没有完整的文件，它只是将当前文件块从一个 websocket 连接传输到另一个。

我希望 WebRTC 将帮助您更顺利地实现您的愿望，而无需任何中间件。

# lr - 无法在 VUGen (Loadrunner) 中记录 https 应用程序

> ID：13073948
> 
> 赞同：1
> 
> 时间：2012-10-25T17:24:39.787
> 
> 标签：lr

IE8 LR11 协议：HTTP/HTML 应用：https

当我尝试在 VUGen (loadrunner 11) 中记录 https:// 应用程序时，我无法记录并收到错误消息“Internet Explorer 无法显示网页”表示未连接到服务器。在浏览器中手动打开时应用程序工作正常，问题仅在录制时出现。

有人可以帮帮我吗？请帮我解决这个问题。

谢谢，KP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:10:17.237

你有适当的凭据吗？

您是否有任何冲突的软件，例如正在运行的防病毒软件？

您是否尝试使用 32 位应用程序录制 64 位浏览器？

您可能应该获取您的 loadrunner 版本的软件要求，并根据软件要求交叉检查您的环境，因为这种交叉检查解决了 90% 以上的记录问题

# css - 如何为我的 less 文件自动生成精灵？

> ID：13073949
> 
> 赞同：3
> 
> 时间：2012-10-25T17:24:43.350
> 
> 标签：css, less

我有一个项目，`less`其中包含通过 URL 引用图像的文件。该项目作为单页应用程序交付给用户，所有 JS 压缩并作为一个文件发送。但是，图像是在单独的文件中发送的。为了消除这种延迟，我想在一个文件中提供图像。我如何（以非手动方式）精灵图像，并更改`less`以引用精灵图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T02:05:32.010

您可以将精灵 CSS 选择器分离到它们自己的文件中，该文件与精灵表同时生成。我使用[SpriteRight](http://spriterightapp.com)，但有很多方法可以给那只猫剥皮。如果您愿意，这里有一个名为[Glue的命令行工具。](http://glue.readthedocs.org/en/latest/)一旦你有了你的 sprite Less/CSS 文件，你就可以将它导入到你的主 Less 文件中，它应该可以工作了。

因此，您的设置可能如下所示：

*   /较少的
    *   main.less
    *   sprite.less
*   /css
    *   main.css（编译和连接的 Less 文件）
*   /img
    *   /_for-sprites
        *   ...（构成您的精灵表的图像）
    *   精灵.png

main.less:

```
... (snip) ...
@import 'sprite.less';
... (snip) ... 
```

sprite.less （由上面链接的实用程序生成）：

```
... (snip) ...
.icon1 { background-position: 0 0; }
.icon2 { background-position: 20px 20px }
... (snip) ... 
```

我希望我的解释是有道理的。我每天都做与此非常相似的事情，而且效果很好。

# c++ - 可以在声明中的什么位置放置存储类说明符？

> ID：13073952
> 
> 赞同：21
> 
> 时间：2012-10-25T17:24:56.623
> 
> 标签：c++, declaration, storage-class-specifier

例如，让我们考虑`static`存储类说明符。以下是此存储类说明符的有效和不正确用法的几个示例：

```
static int a;        // valid
int static b;        // valid

static int* c;       // valid
int static* d;       // valid
int* static e;       // ill-formed

static int const* f; // valid
int static const* g; // valid
int const static* h; // valid
int const* static i; // ill-formed

typedef int* pointer;
static pointer j;    // valid
pointer static k;    // valid 
```

（标记为“有效”的声明被 Visual C++ 2012、g++ 4.7.2 和 Clang++ 3.1 接受。标记为“格式错误”的声明被所有这些编译器拒绝。）

这看起来很奇怪，因为存储类说明符适用于声明的变量。它是声明的变量，而`static`不是声明变量的类型。为什么都是`e`和`i`病态的，却`k`是良态的？

管理存储类说明符的有效放置的规则是什么？虽然我`static`在此示例中使用过，但该问题适用于所有存储类说明符。完整的答案最好引用 C++11 语言标准的相关部分并进行解释。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T17:38:16.120

总之，声明说明符中的任何位置（参见 ISO/IEC 14882-2012 中的第 7.1 节），即在`*`. 之后的限定符`*`与指针声明符关联，而不是类型说明符，并且在指针声明符`static`的上下文中没有意义。

考虑以下情况：您可以在同一个声明列表中声明一个普通 int 和一个指向 int 的指针，如下所示：

```
int a, *b; 
```

这是因为类型说明符是`int`，那么您有两个使用该类型说明符的声明`int`,`a`和一个声明指向 的指针的指针声明`*a`符`int`。现在考虑：

```
int a, static b;  // error
int a, *static b; // error
int a, static *b; // error 
```

这看起来应该是错误的（因为它们是），原因（如第 7.1 和 8.1 节中所定义）是因为 C 和 C++ 要求您的存储说明符与您的类型说明符一起使用，而不是在您的声明符中。所以现在应该清楚以下也是错误的，因为上述三个也是错误的：

```
int *static a; // error 
```

* * *

你的最后一个例子，

```
typedef int* pointer;
static pointer j;    // valid
pointer static k;    // valid 
```

既有效又等价，因为`pointer`类型被定义为类型说明符，您可以按任何顺序放置类型说明符和存储说明符。请注意，它们都是等价的，相当于说

```
static int *j;
static int *k; 
```

或者

```
int static *j;
int static *k; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T21:32:01.917

根据 7.1，C++ 声明的 [simplified] 结构是

```
decl-specifier-seq init-declarator-list; 
```

根据 7.1/1，存储类说明符属于最初的“通用”部分`decl-specifier-seq`。

根据 8/1，`init-declarator-list`是一系列声明符。

根据 8/4，`*`指针声明的部分是该序列中单个声明符的一部分。这立即意味着 a 后面的所有内容`*`都是该单独声明符的一部分。这就是为什么您的某些存储类说明符放置无效的原因。声明符语法不允许包含存储类说明符。

理由相当明显：由于存储类说明符应该适用于*整个*声明中的所有声明符，因此它们被放置在声明的“公共”部分中。

* * *

我想说一个更有趣（并且有点相关）的​​情况发生在可以同时出现在*单个* `decl-specifier-seq`声明符中的说明符，比如`const`说明符。例如，在下面的声明中

```
int const *a, *b; 
```

是否`const`适用于所有声明符或仅适用于第一个声明符？语法规定了前一种解释：`const`适用于所有声明符，即它是`decl-specifier-seq`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T19:45:59.383

如果您采用[“黄金法则”](https://web.archive.org/web/20130923181335/http://www.bookofbrilliantthings.com/book/eic/the-golden-rule-of-pointers)（也不仅仅适用于指针），它自然而直观地遵循，并且在 C/C++ 中声明变量时避免[了很多错误](https://www.amazon.com/gp/customer-reviews/R2TXODQ714G38S/ref=cm_cr_getr_d_rvw_ttl?ie=UTF8&ASIN=0321714113)和[陷阱。](https://stackoverflow.com/questions/13073952/where-in-a-declaration-may-a-storage-class-specifier-be-placed/13076065#comment17772772_13077637)不应违反“黄金法则”（很少有例外，例如`const`应用于数组 typedef，它传播`const`到 C++ 附带的基本类型和引用）。

K&R，附录 A，第 8.4 节，声明符的含义指出：

> 每个声明符都被视为一个断言，即当与声明符形式相同的构造出现在表达式中时，它会产生指定类型和存储类的对象。

要在 C/C++ 中声明一个变量，您应该真正考虑应用到它以获取基本类型的表达式。

1）应该有一个变量名

2) 然后表达式 as valid* 从声明语句中出来，应用于变量名

3）然后是声明的剩余信息和属性，如基类型和存储

存储不是您始终可以赋予表达式结果的特性，例如与 constness 相反。仅在声明时才有意义。所以存储必须来自 2 之外的其他地方。

```
int * const *pp;
/*valid*/

int * static *pp;
/*invalid, this clearly shows how storage makes no sense for 2 and so breaks   */
/*the golden rule.                                                             */
/*It's not a piece of information that goes well in the middle of a expression.*/
/*Neither it's a constraint the way const is, it just tells the storage of     */
/*what's being declared.                                                       */ 
```

我认为 K&R 希望我们在声明变量时使用反向推理，这通常不是常见的习惯。使用时，它避免了大多数复杂的声明错误和困难。

*valid 不是严格意义上的，因为会发生一些变化，例如 x[]、x[size、not indexing]、constness 等......所以 2 是一个*映射良好*的表达式（对于声明用法），“相同形式”，一种[反映变量使用的](https://pdos.csail.mit.edu/archive/l/c/type-inside-out.html)形式，但[不严格](https://www.seebs.net/faqs/c-iaq-a.html#question-1.11)。

### 外行人的黄金法则奖金

```
#include <iostream>

int (&f())[3] {
    static int m[3] = {1, 2, 3};
    return m;
}

int main() {
    for(int i = 0; i < sizeof(f()) / sizeof(f()[0]); ++i)
        std::cout << f()[i] << std::endl;

    return 0;
} 
```

在声明的上下文中，`&`不是获取地址的操作，它只是告诉什么是引用。

*   `f()`:`f`是一个**函数**
*   `&`**return** : 它的**返回**是一个**参考**
*   **参考**`[3]`：**参考**是一个**由 3 个元素组成的数组**
*   `int` **array[i]** : 一个**元素**是一个 int

所以你有一个函数返回一个对 3 个整数数组的引用，并且由于我们有数组大小的正确编译时间信息，我们可以`sizeof`随时检查它 =)

最后的黄金提示，对于任何可以放在类型之前的东西，当在多个声明中时，它会一次应用于所有变量，因此不能单独应用。

这`const`不能放在前面`int`：

```
int * const p; 
```

所以以下是有效的：

```
int * const p1, * const p2; 
```

这个可以：

```
int const *p; // or const int *p; 
```

所以以下是无效的：

```
int const *p1, const *p2; 
```

可兑换`const`适用于所有人：

```
int const *p1, *p2; // or const int *p1, *p2; 
```

### 声明公约

正因为如此，我总是把所有**不能**放在类型之前的东西，更靠近变量（`int *a`，`int &b`），而任何**可以**放在前面的东西，我都放在（`volatile int c`）之前。

[在http://nosubstance.me/post/constant-bikeshedding/](http://nosubstance.me/post/constant-bikeshedding/)上有更多关于这个主题的内容。

# php - Codeigniter 限制插入其他用户的数据

> ID：13073954
> 
> 赞同：0
> 
> 时间：2012-10-25T17:25:10.293
> 
> 标签：php, mysql, codeigniter

用户可以在登录后提交他的数据。mysql中有两个表：items，categories。类别有一个字段：user_id，但在项目表中，没有，每个项目都应该属于一个类别。

当用户提交一个类别时，它很好，我从会话中获取用户 ID，并插入它。当他提交一个项目时，我为其设置了 category_id。

问题是，用户可以简单地重写 category_id（javascript，在前端，单击一个类别：设置 category_id），然后将项目提交到与他无关的类别中。

我在想的两个解决方案（但我没有这样做）：

**当用户插入一个项目时，我检查类别关系，如果不是用户的，则退出。**

**也将 user_id 字段添加到 items 表中**（看起来不是一个好的选择）。

在这种情况下，好的方法或正确/常见的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:30:17.480

> 也将 user_id 字段添加到 items 表中

如果您已经在类别表中拥有 user_id，并且您确定每个项目都有一个类别，那么您怀疑这是不必要的重复。

> 检查类别关系，如果不是用户的，则退出。

这就是这样做的方法 - 当您在插入项目之前读取类别 ID 时，请确保该类别属于用户。简单的。我可能只是`show_404()`，但如果你想显示一个有意义的错误信息，这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:43:19.153

为什么不在类别表中创建一个 user_id 列。当用户尝试提交条目时，检查 user_id，如果不是该用户将他重定向到您想要的任何地方

# php - 使用具有多个属性的 PHP 将新数据行添加到 XML

> ID：13073955
> 
> 赞同：0
> 
> 时间：2012-10-25T17:25:10.240
> 
> 标签：php, xml, wordpress, simplexml

保存自定义帖子类型后，我想使用 WordPress 向 XML 文件添加新行。我对如何添加新行但每行有多个属性感到困惑。我的XML文件的每一行如下

```
<markers>
    <marker name="" lat="" lng="" type="" address="" phone="" hours1="" />
    <marker name="" lat="" lng="" type="" address="" phone="" hours1="" />
    <marker name="" lat="" lng="" type="" address="" phone="" hours1="" />
</markers> 
```

对于我保存的每个新商店，我希望它将所有数据添加到一个新行中。我不知道我是否需要创建一个新的孩子然后添加它，因为我以前从未真正将数据添加到 XML 文件中，令人惊讶的是。我当前文件的代码如下

```
$xml = new SimpleXMLElement('<xml/>');
$stores = get_posts( array( 'post_type'=>'store', 'numberposts'=>-1 ) );
$xml->addChild('markers');

$name = $_POST['post_name'];
$lat = $_POST['wpcf']['latitude'];
$lng = $_POST['wpcf']['longitude'];
$type = $_POST['wpcf']['features'];
$address = $_POST['wpcf']['address'];
$phone = $_POST['wpcf']['telephone'];
$hours1 = $_POST['wpcf']['mon-fri'] . ", " . $_POST['wpcf']['saturday'] . ", " . $_POST['wpcf']['sunday'] ;

 $xml->stores->addChild('marker');
 $xml->stores->addChild('name', $name);
 $xml->stores->addChild('lat', $lat);
 $xml->stores->addChild('lng', $lng);
 $xml->stores->addChild('type', $type);
 $xml->stores->addChild('address', $address);
 $xml->stores->addChild('phone', $phone);
 $xml->stores->addChild('hours1', $hours1);

$file = SITE_URL() . '/testing.xml';
$open = fopen($file, 'w') or die ("File cannot be opened.");
fwrite($open, $xml->asXML());
fclose($open); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T01:27:28.103

实现您正在寻找的 XML 输出的正确语法是（省略了一些属性）：

```
$xml = new SimpleXMLElement('<xml/>');
$xml->addChild("markers");
$xml->markers->addChild("marker");
$xml->markers->marker->addAttribute('lat', 0);
print_r($xml->saveDoc()); 
```

将输出：

```
<?xml version="1.0"?>
<xml><markers><marker lat="0"/></markers></xml> 
```

# nhibernate - 按条件获取实体时不使用类缓存

> ID：13073956
> 
> 赞同：1
> 
> 时间：2012-10-25T17:25:11.770
> 
> 标签：nhibernate, caching

我在 nhibernate.cfg.xml 文件中设置了类缓存。

当我通过 Id 获取我的实体时，一旦加载了对象，我就看不到 SQL 请求。

但是当我使用条件获取实体时，总是有 SQL 查询......

**编辑：**

我想这回答了我的问题：

[http://www.javalobby.org/java/forums/t48846.html](http://www.javalobby.org/java/forums/t48846.html)

> 假设我们想根据比直接按 ID（例如按名称）更复杂的查询来查找条目。在这种情况下，Hibernate 仍然必须发出一条 SQL 语句来获取查询的基本数据集。因此，例如，此代码：
> 
> 查询 query = session.createQuery("from Person as p where p.firstName=?"); query.setString(0, "约翰"); 列表 l = query.list(); ... 将调用单个选择（假设我们的关联被缓存）。
> 
> select * from Person where firstName='John' 这个单一的选择将返回'1'，然后缓存将用于所有其他查找，因为我们已经缓存了所有内容。这个强制性的单选是查询缓存的来源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:14:59.427

不确定您的“*编辑*”是否意味着您已找到所有答案。NHibernate 将缓存机制分为两个区域。

第一个是“类”缓存，如上所述。任何对具有特定 ID（Session.Get(id);、引用属性、集合）的对象的请求，都可以使用类缓存。

第二个是“查询”缓存。在这种情况下，用于缓存的**键**取决于 pass `Criteria`。这些用于获取结果集（where, order by, top ...）。在这种情况下缓存的**值**是一组 ID，由该查询返回。

因此，稍后，当应用相同的条件时，将返回缓存的一组 ID，并重用来自类缓存（按 ID）的缓存实体。

*（特定场景适用于投影，在最新的 NHibernate 版本中也可以缓存。在这种情况下，结果不包含具有唯一 ID 的实体，而是一组列。虽然不适合基于 ID 的缓存，但它正在工作也是。3.3 版正在为我做这件事）*

所以，最后回答：

> 但是当我使用条件获取实体时，总是有 SQL 查询......

我们还必须允许查询缓存：

```
<property name="cache.use_second_level_cache">true</property>
<property name="cache.use_query_cache">true</property> 
```

允许二级缓存，可以存储带有 ID 的对象。还启用了对查询缓存的支持，因此同一 Criteria 组合的第二次调用根本不应该转到 SQL Server。

缓存查询示例：

```
criteria.SetCacheable(true)
    .SetCacheMode(CacheMode.Normal)
    .SetCacheRegion("LongTerm"); 
```

# java - Java 和 python ^ 运算符

> ID：13073957
> 
> 赞同：3
> 
> 时间：2012-10-25T17:25:13.053
> 
> 标签：java, python, operators

对于 CompSci 类，我们正在审查 Java Math 类。作为一个愚蠢的程序员，我尝试使用 ^ 运算符而不是 Math.pow 函数。惊喜，惊喜，它没有​​工作。但是，Java 吐出的是我的问题。我试图弄清楚正在用数字完成的操作。你可以在下面看到我在说什么。

```
System.out.println(5^1);
System.out.println(5^2);
System.out.println(5^3);
System.out.println(5^4);
System.out.println(5^5);
System.out.println(5^6);
System.out.println(5^7);
System.out.println(5^8);
System.out.println(5^9); 
```

运行上述内容，我得到以下信息：

```
4
7
6
1
0
3
2
13
12 
```

`print 5^1`当我在 Python (等)中做同样的事情时，也会发生同样的事情。Java API 文档说 ^ 是“按位异或”，但这仍然无助于从 5 和 3 获得 6。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T17:27:45.597

这是*按位*运算，因此它对数字的二进制位进行运算。6 是`110`二进制形式。5 是`101`二进制形式。

```
110
101
=== (^ xor)
011 
```

`011`在二进制中是 3。

阅读[https://en.wikipedia.org/wiki/Exclusive_or](https://en.wikipedia.org/wiki/Exclusive_or)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T17:30:57.370

好的，让我们举第一个例子。最简单的一个。拿`5^1`。

5可以像这样用二进制表示`101`，1可以像这样表示`001`。

```
101    XOR
001
---
100 = 4 (in decimal) 
```

因为和 。`1 XOR 1 = 0`_ 只需去查看 XOR 上的[wiki](http://en.wikipedia.org/wiki/Exclusive_or)页面。`0 XOR 0 = 0``1 XOR 0 = 1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T17:28:46.657

这是[XOR 操作](http://en.wikipedia.org/wiki/Exclusive_or)。

```
5 = 101 in binary
3 = 011 in binary

    101
XOR 011 
  = 110 = 6 in decimal 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T17:28:19.730

在 Java 中，`^`应用于`int`参数的运算符是按位异或。这解释了输出。对于 5 和 3 的特殊情况：

```
101 (5)
011 (3)
---
110 (6) 
```

请注意，对于逻辑参数，它是逻辑异或。在那种情况下`(b1 ^ b2) == (b1 != b2)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T17:28:49.430

`^`是 BitWise XOR 运算符。所以，

```
5 ^ 1: -

101 -> 5
001 -> 1
--- XOR
100 = 4 
```

*   `1 XOR 1 = 0`
*   `1 XOR 0 = 1`

请参阅以下链接：-

*   [http://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)
*   [http://en.wikipedia.org/wiki/Exclusive_or](http://en.wikipedia.org/wiki/Exclusive_or)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T17:29:33.563

`^`是[按位异或运算](http://en.wikipedia.org/wiki/Exclusive_or)，它的真值表如下所示：

```
 | 0 | 1 |
0 | 0 | 1 |
1 | 1 | 0 | 
```

所以输出位`1`只有当输入不同时，`0`否则。所以`5 ^ 3`看起来像这样：

```
 0000 0101 (5)
^ 0000 0011 (3)
= 0000 0110 (6) 
```

所以它正在做它应该做的事情。请查看[Nuts and Bolts 教程以了解按位运算](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)和[此 SO 问题](https://stackoverflow.com/questions/1956160/good-tutorials-on-bitwise-operations-in-java)以获取更多参考。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-25T17:29:44.840

这是因为二进制表示五个是101b，三个是011b。

Xor 的工作方式如下：

```
0 xor 0 = 0
0 xor 1 = 1
1 xor 0 = 1
1 xor 1 = 0 
```

因此： 101 xor 011 = 110 是六的二进制表示。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-25T18:52:01.930

希望这个小程序有助于使用它打印的示例更好地解释异或运算符：

```
>>> for x, y in ((x, y) for x in range(11) for y in range(x, 11)):
    print('''{0} ^ {1} = {2} (Why?)
Because:
{0:04b} = {0}
^^^^
{1:04b} = {1}
====
{2:04b} = {2}
'''.format(x, y, x ^ y))

0 ^ 0 = 0 (Why?)
Because:
0000 = 0
^^^^
0000 = 0
====
0000 = 0

0 ^ 1 = 1 (Why?)
Because:
0000 = 0
^^^^
0001 = 1
====
0001 = 1

0 ^ 2 = 2 (Why?)
Because:
0000 = 0
^^^^
0010 = 2
====
0010 = 2

0 ^ 3 = 3 (Why?)
Because:
0000 = 0
^^^^
0011 = 3
====
0011 = 3

0 ^ 4 = 4 (Why?)
Because:
0000 = 0
^^^^
0100 = 4
====
0100 = 4

0 ^ 5 = 5 (Why?)
Because:
0000 = 0
^^^^
0101 = 5
====
0101 = 5

0 ^ 6 = 6 (Why?)
Because:
0000 = 0
^^^^
0110 = 6
====
0110 = 6

0 ^ 7 = 7 (Why?)
Because:
0000 = 0
^^^^
0111 = 7
====
0111 = 7

0 ^ 8 = 8 (Why?)
Because:
0000 = 0
^^^^
1000 = 8
====
1000 = 8

0 ^ 9 = 9 (Why?)
Because:
0000 = 0
^^^^
1001 = 9
====
1001 = 9

0 ^ 10 = 10 (Why?)
Because:
0000 = 0
^^^^
1010 = 10
====
1010 = 10

1 ^ 1 = 0 (Why?)
Because:
0001 = 1
^^^^
0001 = 1
====
0000 = 0

1 ^ 2 = 3 (Why?)
Because:
0001 = 1
^^^^
0010 = 2
====
0011 = 3

1 ^ 3 = 2 (Why?)
Because:
0001 = 1
^^^^
0011 = 3
====
0010 = 2

1 ^ 4 = 5 (Why?)
Because:
0001 = 1
^^^^
0100 = 4
====
0101 = 5

1 ^ 5 = 4 (Why?)
Because:
0001 = 1
^^^^
0101 = 5
====
0100 = 4

1 ^ 6 = 7 (Why?)
Because:
0001 = 1
^^^^
0110 = 6
====
0111 = 7

1 ^ 7 = 6 (Why?)
Because:
0001 = 1
^^^^
0111 = 7
====
0110 = 6

1 ^ 8 = 9 (Why?)
Because:
0001 = 1
^^^^
1000 = 8
====
1001 = 9

1 ^ 9 = 8 (Why?)
Because:
0001 = 1
^^^^
1001 = 9
====
1000 = 8

1 ^ 10 = 11 (Why?)
Because:
0001 = 1
^^^^
1010 = 10
====
1011 = 11

2 ^ 2 = 0 (Why?)
Because:
0010 = 2
^^^^
0010 = 2
====
0000 = 0

2 ^ 3 = 1 (Why?)
Because:
0010 = 2
^^^^
0011 = 3
====
0001 = 1

2 ^ 4 = 6 (Why?)
Because:
0010 = 2
^^^^
0100 = 4
====
0110 = 6

2 ^ 5 = 7 (Why?)
Because:
0010 = 2
^^^^
0101 = 5
====
0111 = 7

2 ^ 6 = 4 (Why?)
Because:
0010 = 2
^^^^
0110 = 6
====
0100 = 4

2 ^ 7 = 5 (Why?)
Because:
0010 = 2
^^^^
0111 = 7
====
0101 = 5

2 ^ 8 = 10 (Why?)
Because:
0010 = 2
^^^^
1000 = 8
====
1010 = 10

2 ^ 9 = 11 (Why?)
Because:
0010 = 2
^^^^
1001 = 9
====
1011 = 11

2 ^ 10 = 8 (Why?)
Because:
0010 = 2
^^^^
1010 = 10
====
1000 = 8

3 ^ 3 = 0 (Why?)
Because:
0011 = 3
^^^^
0011 = 3
====
0000 = 0

3 ^ 4 = 7 (Why?)
Because:
0011 = 3
^^^^
0100 = 4
====
0111 = 7

3 ^ 5 = 6 (Why?)
Because:
0011 = 3
^^^^
0101 = 5
====
0110 = 6

3 ^ 6 = 5 (Why?)
Because:
0011 = 3
^^^^
0110 = 6
====
0101 = 5

3 ^ 7 = 4 (Why?)
Because:
0011 = 3
^^^^
0111 = 7
====
0100 = 4

3 ^ 8 = 11 (Why?)
Because:
0011 = 3
^^^^
1000 = 8
====
1011 = 11

3 ^ 9 = 10 (Why?)
Because:
0011 = 3
^^^^
1001 = 9
====
1010 = 10

3 ^ 10 = 9 (Why?)
Because:
0011 = 3
^^^^
1010 = 10
====
1001 = 9

4 ^ 4 = 0 (Why?)
Because:
0100 = 4
^^^^
0100 = 4
====
0000 = 0

4 ^ 5 = 1 (Why?)
Because:
0100 = 4
^^^^
0101 = 5
====
0001 = 1

4 ^ 6 = 2 (Why?)
Because:
0100 = 4
^^^^
0110 = 6
====
0010 = 2

4 ^ 7 = 3 (Why?)
Because:
0100 = 4
^^^^
0111 = 7
====
0011 = 3

4 ^ 8 = 12 (Why?)
Because:
0100 = 4
^^^^
1000 = 8
====
1100 = 12

4 ^ 9 = 13 (Why?)
Because:
0100 = 4
^^^^
1001 = 9
====
1101 = 13

4 ^ 10 = 14 (Why?)
Because:
0100 = 4
^^^^
1010 = 10
====
1110 = 14

5 ^ 5 = 0 (Why?)
Because:
0101 = 5
^^^^
0101 = 5
====
0000 = 0

5 ^ 6 = 3 (Why?)
Because:
0101 = 5
^^^^
0110 = 6
====
0011 = 3

5 ^ 7 = 2 (Why?)
Because:
0101 = 5
^^^^
0111 = 7
====
0010 = 2

5 ^ 8 = 13 (Why?)
Because:
0101 = 5
^^^^
1000 = 8
====
1101 = 13

5 ^ 9 = 12 (Why?)
Because:
0101 = 5
^^^^
1001 = 9
====
1100 = 12

5 ^ 10 = 15 (Why?)
Because:
0101 = 5
^^^^
1010 = 10
====
1111 = 15

6 ^ 6 = 0 (Why?)
Because:
0110 = 6
^^^^
0110 = 6
====
0000 = 0

6 ^ 7 = 1 (Why?)
Because:
0110 = 6
^^^^
0111 = 7
====
0001 = 1

6 ^ 8 = 14 (Why?)
Because:
0110 = 6
^^^^
1000 = 8
====
1110 = 14

6 ^ 9 = 15 (Why?)
Because:
0110 = 6
^^^^
1001 = 9
====
1111 = 15

6 ^ 10 = 12 (Why?)
Because:
0110 = 6
^^^^
1010 = 10
====
1100 = 12

7 ^ 7 = 0 (Why?)
Because:
0111 = 7
^^^^
0111 = 7
====
0000 = 0

7 ^ 8 = 15 (Why?)
Because:
0111 = 7
^^^^
1000 = 8
====
1111 = 15

7 ^ 9 = 14 (Why?)
Because:
0111 = 7
^^^^
1001 = 9
====
1110 = 14

7 ^ 10 = 13 (Why?)
Because:
0111 = 7
^^^^
1010 = 10
====
1101 = 13

8 ^ 8 = 0 (Why?)
Because:
1000 = 8
^^^^
1000 = 8
====
0000 = 0

8 ^ 9 = 1 (Why?)
Because:
1000 = 8
^^^^
1001 = 9
====
0001 = 1

8 ^ 10 = 2 (Why?)
Because:
1000 = 8
^^^^
1010 = 10
====
0010 = 2

9 ^ 9 = 0 (Why?)
Because:
1001 = 9
^^^^
1001 = 9
====
0000 = 0

9 ^ 10 = 3 (Why?)
Because:
1001 = 9
^^^^
1010 = 10
====
0011 = 3

10 ^ 10 = 0 (Why?)
Because:
1010 = 10
^^^^
1010 = 10
====
0000 = 0

>>> 
```

# linux - Linux - 两个设备写入同一个设备节点

> ID：13073959
> 
> 赞同：1
> 
> 时间：2012-10-25T17:25:23.313
> 
> 标签：linux, device, nodes, drivers, udev

好的，我的 linux 盒子上连接了两个操纵杆，它们显示为 /dev/js0 和 /dev/js1。我的问题是，我有一个第三方应用程序（我无法更改），它使用操纵杆，它只能听一个节点，（所以一次只能听一个操纵杆）。
我可以确定应用程序将“监听”哪个节点（例如 /dev/js0），但我只能指定一个节点。这意味着我可以确定应用程序将使用哪个操纵杆，但这也意味着它一次只能使用一个操纵杆。我的任务是想出一种方法，该应用程序可以在非此即彼的场景中同时使用两个操纵杆，而不是其中一个。

有没有办法将两个操纵杆节点的输出重定向到第三个节点，然后我可以将应用程序指向该节点？是否有另一种方法可以以某种方式将这两个驱动程序/节点“合并”成一个？

我尝试使用 mknod 创建一个新的第三个节点 (dev/js2)，但我不知道如何将 js0 和 js1 的输出重定向到 js2。

我也不反对使用小程序和 udev 来做这件事，但我不知道该怎么做。

谢谢

# spring - 如何从上下文或其他类中获取项目名称或路径？

> ID：13073961
> 
> 赞同：0
> 
> 时间：2012-10-25T17:25:25.437
> 
> 标签：spring, servlets, spring-mvc, path

我的项目运行在：

```
hXXp://localhost:8080/mvc 
```

但是当我在客户端部分重建时，它将是：

```
hxxp://localhsot:8080/mvc-1.0.0-SNAPSHOT 
```

我想获取我的 SpringMVC 控制器之一`mvc`的参数。`mvc-1.0.0-SNAPSHOT`

（因为我会设置一些动态图片路径）</p>

如何在上下文或控制器类中获取这些名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:28:11.120

使用[`HttpServletRequest.getContextPath()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29)：

```
@RequestMapping
public String handle(HttpServletRequest req) {
    final String context = req.getContextPath();  //mvc or mvc-1.0.0-SNAPSHOT
    //...
} 
```

# php - HybridAuth 总是重定向到我的 index.php

> ID：13073962
> 
> 赞同：0
> 
> 时间：2012-10-25T17:25:34.093
> 
> 标签：php, login, social, hybridauth

我不知道我是否太愚蠢或类似的事情，但我在将 HybridAuth 代码实施到我的网页时遇到了问题。

我已经运行了 install.php 并按照[这个](http://hybridauth.sourceforge.net/userguide/Integrating_HybridAuth_SignIn.html)“教程”进行了简单的 Twitter 登录。登录本身运行良好，但教程上的代码说最后应该打印所有从 twitter 通过 HybridAuth 传输到我的页面的 twitter 信息。

但是 HybridAuth 总是将我重定向到我的 index.php（我在 install.php 文件中声明的 base_url）。我知道它可以工作，因为在地址栏中，URL 显示类似`http://localhost/alpha/index.php?hauth.start=Twitter&hauth.time=1352184502`...但是是的，没有打印信息或类似的信息，只是我的索引站点可见。

有什么技巧或我忘记的东西吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:46:54.973

混合身份验证不需要用于测试目的的真实域。错误只是在 Twitter Dev-Channel 上，其中 App-Name 必须与域相同（在我的示例中 -> localhost）。

但感谢每一个小费！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:10:11.570

twitter 和 facebook 的混合身份验证登录需要一个有效的域而不是 localhost。

你可以在这里找到类似的帖子和答案：[Hybrid auth with Yii cause a redirect loop](https://stackoverflow.com/questions/13024803/hybrid-auth-with-yii-causing-a-redirect-loop/13244719#13244719)

# android - 安卓应用安装失败

> ID：13073966
> 
> 赞同：0
> 
> 时间：2012-10-25T17:25:53.443
> 
> 标签：android, installation, apk

这可能看起来有点像一个简单的问题，但我仍然被困住了。

我试图在我的手机上安装一个应用程序，只是为了测试它。但是，当尝试安装它时，它只会给我错误消息“未安装应用程序”

我一辈子都看不出有什么问题，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:33:34.103

出现此问题的原因可能如下：

*   在安装之前，您有其他具有相同进程名称的应用程序
*   它确实已安装，但`adb`告诉您“未安装应用程序”

重启`adb`。通过使用卸载具有相同名称或进程的任何应用程序`adb uninstal yourapplicationname`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T06:41:55.177

我有一个类似的错误`"Failure [INSTALL_FAILED_UNKNOWN_SOURCES]"`，因为它说它是由 UNKOWN_SOURCES 引起的，在这种情况下是 adb。

我只需更改一些安全设置即可解决此问题。您可以在您的设备上找到它。

# html - 垂直对齐带有图标的文本

> ID：13073968
> 
> 赞同：0
> 
> 时间：2012-10-25T17:26:00.160
> 
> 标签：html, css

我有一个如下文本在图标中间没有垂直对齐。

请问我该如何解决？

[对齐顶部 http://www.kerrydeaf.com/ali.png](http://www.kerrydeaf.com/ali.png "工具提示")

CSS：

```
#text{ color:#48c4d2; font-size:15px; font-family:opensansitalic;} 
```

HTML：

```
<div class="blurb"><button class="blue_small" id="blue_small"></button> Available in video.</div> 
```

更新：

这应该解释一下。

[对齐顶部 http://www.kerrydeaf.com/ali2.png](http://www.kerrydeaf.com/ali2.png "工具提示")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:37:37.653

您应该使用**CSS 背景图像**并用于`padding-left:`移动文本，并用于`background-position:`调整图像的位置。如果是链接，请使用 A 标记，而不是按钮。

```
<a href="..." class="videoBlurb">Available in video.</a> 
```

无需像您一样嵌套标签。

就像是：

```
.videoBlurb {
    display:block;
    background-image:url(....);
    background-repeat:no-repeat;
    background-position:0px 0px;
    padding-left:40px;
    padding-top:20px;
    color:#48c4d2;
    font-size:15px;
    font-family:opensansitalic;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:40:40.927

Diodeus 提出了一个很好的观点，并且肯定有最有用的答案，但是为了好奇而不改变你的标记 - 它实际上应该是这样简单的：

```
​button {
    vertical-align:middle;
} 
```

当然，选择器更具体。演示：http: [//jsfiddle.net/beV7j/2](http://jsfiddle.net/beV7j/2)

# ruby-on-rails - 使用静态段（漂亮的网址）的缺点

> ID：13073969
> 
> 赞同：3
> 
> 时间：2012-10-25T17:26:01.223
> 
> 标签：ruby-on-rails, parameters, routes

我正在玩弄使用漂亮的 url（[静态段](http://guides.rubyonrails.org/routing.html#static-segments)）将参数传递给我的控制器的想法。

[http://example.com/miami/33131](http://example.com/miami/33131)

```
match ':city/:zip', :to => 'events/#index' 
```

到目前为止它运行良好，但我试图考虑这样做而不是典型的查询字符串类型 url 的缺点。

您对此有何看法？

谢谢，弗朗西斯

# php - 良好的 PHP 框架，具有强大的安全性

> ID：13073970
> 
> 赞同：12
> 
> 时间：2012-10-25T17:26:02.070
> 
> 标签：php, security, codeigniter, web-applications, frameworks

我正在尝试选择一个框架，它可以提供非常好的 Web 应用程序安全性，尽可能多地防止 OWASP Top-10，例如：

*   Sql 注入
*   跨站脚本
*   CSRF
*   验证
*   授权
*   等等

问题是我已经尝试过大量研究：Cakephp、Zend、Yii、Code Igniter、Kohana 和一些具有*基本*身份验证，也许有点授权，但对于任何需要可靠代码安全性的应用程序都没有。

上述大多数漏洞类型目前是否仅通过在这些框架中编写自定义代码来保护？

这是我第一次使用框架的经验，到目前为止，一切都是自定义的 php web 应用程序。我对 php-frameworks 的整体想法是很*容易*防止这些漏洞，因为它不是*本机*的，为什么要使用一个？或者是否有一个我没有考虑的框架比上面列出的更强的网络应用程序安全性更好？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T17:46:12.263

安全性不能应用于像某些单板这样的应用程序。每种安全问题都以其他方式处理，大多数 PHP 框架都提供了编写安全代码的工具：

*   对抗 HTML 注入/XSS 需要使用默认转义值的模板引擎（如 Twig）或组件驱动的方法来显示 HTML。如果您允许人们上传他们的文件并让他们从您自己的域中提供服务（您必须为此使用单独的域），那么没有任何框架可以帮助您；

*   您可以通过使用转义查询参数的数据库助手来避免 SQL 注入；您提到的每个框架都提供了这些（当然您可以使用普通 PDO）；

*   您可以使用会话绑定令牌来对抗 CSRF。每个框架都提供了一些解决方案。然而，在每种情况下，您都必须以某种方式协助框架（通过向每个表单添加标记或使用框架提供的表单抽象）。

所以在某种程度上——是的，你必须考虑安全性。我不认为任何 PHP 框架可以做更多他们已经做的事情，除非有一个重大的范式转变，让我们通过在屏幕上拖动彩色框来设计应用程序，而不是接触像 HTML 或 SQL 这样的肮脏、不安全的东西。您希望得到什么样的支持？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T17:37:56.203

我还要说试试 CodeIgniter。

*   Sql-Injection - 如果你在 CodeIgniter 中使用活动记录模式，你是安全的
*   XSS - 这是 config.php 中的配置值
*   CSRF - 也是 config.php 中的配置值
*   登录等 - 有类似的库[https://github.com/EllisLab/CodeIgniter/wiki/SimpleLoginSecure](https://github.com/EllisLab/CodeIgniter/wiki/SimpleLoginSecure)

如果您是第一次使用框架，CodeIgniter 也很容易使用，并且有一个非常容易理解的优秀用户指南。

**编辑：**由于我在 2019 年仍然在这里获得支持，请查看[https://laravel.com/](https://laravel.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:34:42.020

您提到的关键漏洞发生在不同的层，有时甚至是多个层，并且通常取决于您正在执行的操作的上下文，因此其中很多漏洞将提供防止这些东西的设施，但您必须利用它。

例如，Symfony（1.x 和 2）和 Zend Framework 都有一个表单组件/子框架，可以开箱即用地实现 CSRF。但这并不意味着默认情况下它是打开的（symfony 是......不记得 zf 是否是）。当我们谈论视图层中的输出转义端时，与 XSS 相同。

现在，当谈到大型应用程序的框架偏好时，我个人喜欢 Symfony 1.x 和 Symfony2，Zend Framework 1.x（我不打算提及 zf2，因为我还没有玩过它）。对于简单的事情，我喜欢 Silex（基于 Symfony 组件）。

# sql-server - 在 DTS 2000 中调用流程任务的正确格式

> ID：13073974
> 
> 赞同：2
> 
> 时间：2012-10-25T17:26:22.990
> 
> 标签：sql-server, cmd, mkdir, dts, createprocess

现在我在 SQL 2005 IDE 中创建一个 dts 2000 包。我正在学习使用“执行流程任务”。所以，我想使用这个工具创建一个新文件夹。这些是我的步骤：

1.  点击“执行流程任务”
2.  说明：新PT
3.  Win32 进程：%ComSpec%
4.  参数： ？
5.  返回码：0
6.  超时：2

如您所见，我需要正确的格式来放置我的命令。

提前致谢

类似“D:\ mkdir hello”的命令

# php - htaccess 在子目录中重写问题并使用变量...难倒

> ID：13073976
> 
> 赞同：1
> 
> 时间：2012-10-25T17:26:27.653
> 
> 标签：php, string, .htaccess, mod-rewrite

我已经搜索和搜索并尝试了许多不同的东西，但它们都不起作用......这超出了我的范围。我已经尝试了至少 50 件没有运气的事情.. 有人请帮忙！

首先，我在文件夹/blog 中有一个文件“index.php”页面，该页面有一个链接，该链接将变量传递到名为“post”的页面。“post.php”页面中的 MySQL 从匹配的行中提取 MySQL 数据ID 并显示该特定帖子。

我想要做的是有一个更清洁和 SEO 友好的 URL...

例如：在“www.mydomain.com/blog/index.php”页面上，他们单击“post?title=This%20is%20a%20test%20title%20for%20the%20blog%20post...&id”之类的链接=1" 将它们带到与“/blog/”中的“index.php”页面相同目录中的“post.php”页面。

我发现的每一个 htaccess 重写都没有将 URL 更改为更友好的版本.. 一切最终都保持不变..

有人请帮忙。我希望它显示为 www.mydomain.com/blog/title 而不是显示上述内容！如果有人可以帮助我删除帖子标题中出现的空格“％”并用“-”替换，那也很棒..

::绝望:: 再次感谢，亚当

目前在位于“blog/”目录中的 htaccess 文件中使用它。

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,NC,L]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L]
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mydomain.com/blog/$ [NC]
RewriteRule ^(.*)$ http://www.mydomain.com/blog/$1 [R=301,L]
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)$ /post?title=$1&id=$2 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:37:52.430

你的 htaccess 文件很乱。其中很多只会给自己造成额外的混乱。重新开始。

## /.htaccess

如果您的根目录中有 htaccess 文件，请确保其中没有与 /blog/.htaccess 中的规则冲突的规则

## /blog/.htaccess

```
Options +FollowSymLinks -MultiViews

RewriteEngine On
RewriteBase /

## this makes /blog/whatever-whatever  actually execute /blog/post.php?title=whatever-whatever but only if the file doesn't physically exist
RewriteCond %{DOCUMENT_ROOT}/blog/$1 !-f
RewriteRule ^blog/(.*)$     /blog/post\.php?title=$1   [QSA,L] 
```

## /blog/index.php

```
<?php
$post_title = 'Whatever Whatever';
$post_slug = strtolower(str_replace(' ', '-', $post_title)); // replace spaces with hyphens and lower case everything
echo '<a href="/blog/'.$post_slug.'">'.$post_title.'</a>';
?> 
```

## /blog/post.php

```
<?php
$post_slug = $_GET['title'];

// connect to db.
// construct an SQL query such that your WHERE will have a comparison against your field but that has spaces replaced with hyphens
// for example in mysql it would be something like this
$sql = "SELECT * FROM `your_post_table` WHERE REPLACE(`your_post_title_field_column`, ' ', '--') = '".mysqli_escape_string($post_slug)."'";
// (which by the way is very crude and poses some security risks)
// learn about sql injection at http://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php

// then you execute your sql query get your result and proceed as needed...
if (!empty($result)) {
    echo '<h1>'.$result['post_title'].'</h1>';
} 
```

# authentication - Bugzilla 缺少超级用户信息

> ID：13073977
> 
> 赞同：2
> 
> 时间：2012-10-25T17:26:37.827
> 
> 标签：authentication, login, bugzilla

我在我的系统上设置了 Bugzilla 服务器，但不小心丢失了登录信息。我已经对此进行了研究，但到目前为止没有任何效果。我试图做的事情是：

我尝试使用 MySQL 界面添加更多管理用户。从命令行运行“mysql”，并使用以下命令：

```
mysql> use bugs;<br />
mysql>  update profiles set groupset=0x7ffffffffffffff where login_name = "admin";<br /> 
```

我收到一条错误消息：

```
ERROR 1054 (42S22): Unknown column 'groupset' in 'field list' 
```

我还找到了我用于管理员注册的电子邮件，但我无法恢复我的密码：

```
mysql> select login_name from profiles where userid=1; 
+-------------------+
| login_name        |
+-------------------+
| admin@example.com |
+-------------------+
1 row in set (0.00 sec) 
```

每当我尝试删除超级用户时，我都会得到这个：

```
mysql> delete from  profiles where userid=1; 
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`bugzilla`.`components`, CONSTRAINT `fk_components_initialowner_profiles_userid` FOREIGN KEY (`initialowner`) REFERENCES `profiles` (`userid`) ON UPDATE CASCADE)
mysql> update profiles set groupset=0x7ffffffffffffff where login_name = "(user's login name)"; 
```

我使用更改了密码

```
sudo checksetup.pl --reset-password=admin@example.com 
```

试图登录到 localhost Bugzilla 用户 id：admin@example.com 密码：（我的密码）

我收到以下内部错误：

```
Bugzilla has suffered an internal error. Please save this page and send it to admin@example.com with details of what you were doing at the time this message appeared.

There was an error sending mail from 'bugzilla-daemon' to 'admin@example.com': Couldn't find 'sendmail' executable in your PATH and $Email::Send::Sendmail::SENDMAIL is not set
Traceback:

 at Bugzilla/Mailer.pm line 190
    Bugzilla::Mailer::MessageToMTA(...) called at Bugzilla/Token.pm line 307
    Bugzilla::Token::Cancel(...) called at Bugzilla/Token.pm line 323
    Bugzilla::Token::DeletePasswordTokens(...) called at Bugzilla/Auth/Verify/DB.pm line 85
    Bugzilla::Auth::Verify::DB::check_credentials(...) called at Bugzilla/Auth/Verify/Stack.pm line 62
    Bugzilla::Auth::Verify::Stack::check_credentials(...) called at Bugzilla/Auth.pm line 72
    Bugzilla::Auth::login(...) called at Bugzilla.pm line 345
    Bugzilla::login(...) called at /var/www/bugzilla/index.cgi line 40 
```

有没有办法更改用户名？

到目前为止没有任何工作。如何登录 Bugzilla？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T17:31:05.607

您可以使用[`checksetup.pl`脚本](http://www.bugzilla.org/docs/tip/en/html/api/checksetup.html)来执行此操作。

```
checksetup.pl --reset-password=admin@example.com` 
```

# c# - DLL 不会更新

> ID：13073978
> 
> 赞同：-1
> 
> 时间：2012-10-25T17:26:40.443
> 
> 标签：c#, asp.net, .net-4.0, windows-server-2003

我为我的 asp.net 网站使用了一个 DLL。我对 DLL 进行了更改，它在本地工作。但是当我将它上传到我的服务器时，它仍在执行旧功能。

DLL 是 .net 4.0 DLL，服务器是 Server 2003（安装了 .Net 4.0）。

我尝试了 gacutil /u DLL.dll，但我得到 gac 中不存在它的错误。然后我尝试执行 /i 并显示成功，但仍然无法正常工作。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:28:15.363

尝试删除临时 ASP.NET 文件。删除应用程序的 DLL 表单 bin 目录。将新版本的 dll 粘贴到应用程序 bin 目录中并访问该页面，看看会发生什么。

Temp ASP.NET 文件的位置将是

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\临时 ASP.NET 文件

根据需要更改框架文件夹名称和版本文件夹名称

# jquery - 将文本添加到幻灯片 - 超大的 jquery

> ID：13073979
> 
> 赞同：0
> 
> 时间：2012-10-25T17:26:40.333
> 
> 标签：jquery, html, supersized

我正在尝试为 Supersized 插件的每张幻灯片添加一个带有信息的 DIV。我正在搜索信息，发现这个[Supersized, show a div based on the slide](https://stackoverflow.com/questions/7772295/supersized-show-a-div-depending-on-the-slide)，（我问了一个关于它的新问题，因为它来自去年）。

我想为每张幻灯片添加一些文本，所以这是我的代码：

```
<head>
....
    <script type="text/javascript">

        jQuery(function($){

            $.supersized({

                // Functionality
                slideshow               :   1,          // Slideshow on/off
                autoplay                :   0,          // Slideshow starts playing automatically
                start_slide             :   1,          // Start slide (0 is random)
                stop_loop               :   0,          // Pauses slideshow on last slide
                random                  :   0,          // Randomize slide order (Ignores start slide)
                slide_interval          :   3000,       // Length between transitions
                transition              :   6,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                transition_speed        :   1000,       // Speed of transition
                new_window              :   1,          // Image links open in new window/tab
                pause_hover             :   1,          // Pause slideshow on hover
                keyboard_nav            :   1,          // Keyboard navigation on/off
                performance             :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
                image_protect           :   1,          // Disables image dragging and right click with Javascript

                // Size & Position                         
                min_width               :   0,          // Min width allowed (in pixels)
                min_height              :   0,          // Min height allowed (in pixels)
                vertical_center         :   1,          // Vertically center background
                horizontal_center       :   1,          // Horizontally center background
                fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
                fit_portrait            :   1,          // Portrait images will not exceed browser height
                fit_landscape           :   0,          // Landscape images will not exceed browser width

                // Components                           
                slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                thumb_links             :   1,          // Individual thumb links for each slide
                thumbnail_navigation    :   0,          // Thumbnail navigation
                slides                  :   [           // Slideshow Images
                                                    {image : 'img/1.jpg', title : '', thumb : '', url : ''},
                                                    {image : 'img/2.jpg', title : '', thumb : '', url : ''},  
                                                    {image : 'img/3.jpg', title : '', thumb : '', url : ''},
                                                    {image : 'img/4.jpg', title : '', thumb : '', url : ''},
                                                    {image : 'img/5.jpg', title : '', thumb : '', url : ''}                                                     
                                            ],

                // Theme Options               
                progress_bar            :   1,          // Timer for each slide                         
                mouse_scrub             :   0

            });
        });

    </script>

</head>

<body>
<div id="txtslide">
   Lorem Ipsum is simply dummy text of the printing and typesetting industry.           
</div>
</body> 
```

在**slideshow/theme/supersized.shutter.js**我复制了上面提到的示例

```
/* After Slide Transition
----------------------------*/
afterAnimation : function(){
    if (api.options.progress_bar && !vars.is_paused) theme.progressBar();   //  Start progress bar

// current slide is #3
if (vars.current_slide == 3) {
    // Get contents of the 'testfield' field
    var testfield = api.getField(testfield);
    // Set the HTML content of testfielddiv to the value of testfield
    if (testfield != "undefined") {
        $("#txtslide").html(testfield);

        // Show testfielddiv (which was hidden for all other slides)
        // The 'fast' argument is for a simple animation; it can be omitted
        // to show without animation, or changed to 'slow' or a number in ms
        $("#txtslide").show('fast');
    }
}

else {
    // Hide testfielddiv for any other slide
    $("#txtslide").hide('fast');
} 
```

但是这个例子不起作用，也许我做错了什么，希望你能帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-29T20:34:52.560

所以我知道这是一个旧线程，但我也想这样做并找到一个非常简单的答案。我想我会发帖以防其他人也需要同样的帮助。

如果你看一下超大的html页面！提供，您会在文档底部注意到所有包含导航按钮、缩略图等的 div。其中一个标记为“此处显示的幻灯片标题”

如果你只是拿那个 div 并将它移动到你想要放置在你的 html 文档中的位置，你可以只使用“幻灯片图像”区域中的“标题”属性。在你的 CSS 中使用的 id 是“#slidecaption”。（可能已经在包含的 CSS 文档中进行了样式化，因此如果您不希望样式冲突，请查找它）。

此外，该“标题”区域适用于常规 html 标记，因此请使用`<p>`,`<br>`或您想要的任何其他内容来帮助控制它的样式。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T20:58:20.017

你走对了。

我已经做到了！

在幻灯片数组中

```
 {
  image : 'one.jpg',
  title : '<a href="url"><div id="slidefillimage"> <b>blablabla and blablabla</div></a>',
  thumb : 'url photo',
  url : ''
 } 
```

这在 supersized.shutter.css 中，我修改了幻灯片标题

```
#slidecaption {
    position:absolute;
    height: 80px;
    top: 300px;
    bottom:0;
    right: 0;
    overflow: hidden;
    text-indent: 10px;
    text-align:left;
    color: #FFFFFF; 
    font: 400 14px "Helvetica Neue", Helvetica, Arial, sans-serif;
    margin: 0 0 0 0;
    line-height: 30px;
} 
```

并为新 div 创建一个新条目

```
#slidefillimage {
    height: 60px;
    min-width: 150px;
    max-width: 900px;    
    width: expression(document.body.clientWidth < 152? "150px" : document.body.clientWidth > 902? "900px" : "auto");  
    text-indent: 10px;
    color: #FFFFFF;
    background-color: #00517D; 
    font: 400 16px "Helvetica Neue", Helvetica, Arial, sans-serif;
    margin: 0 0 0 0;
    line-height: 30px;
} 
```

这对我来说很完美！

# tsql - XML 路径与更多连接

> ID：13073980
> 
> 赞同：0
> 
> 时间：2012-10-25T17:26:45.130
> 
> 标签：tsql, orm, resultset, for-xml-path

我需要一个列出订单和相关数据的网格。（纯属虚构示例）

为简单起见：

```
OrderID
OrderName
OrderDate
Collection Parts
Collection Destinations
Collection SuppliersInvolved 
```

网格应显示每个订单，以及每个集合的文本描述，例如：

```
OrderID  OrderName OrderDate  Parts  Destinations     SupplierInvolved
   2        davo    21/5/12   A,B,C  London, Paris    SuppA,SuppB,SuppC 
```

现在，这个网格可能有多达 200 行。

这个问题是，我们使用的定制 ORM 在将多 PK 结果集映射到唯一对象时存在一些主要的缓慢问题。

例如。

```
OrderID  OrderName OrderDate  Part  Destination     Supplier
   2        davo    21/5/12   A       London         SuppA
   2        davo    21/5/12   B       London         SuppA
   2        davo    21/5/12   A       London         SuppB
   2        davo    21/5/12   B       London         SuppB 
```

即使结果集中涉及 1 个集合，它也存在此问题。查询本身执行得非常好和快，问题是映射。

所以，我真的有两个选择（据我所知）：

1.  获取订单结果集，对于结果集中的每个订单，获取零件、获取目的地、获取供应商等。这反过来意味着对数据库的 601 次调用。

2.  使用**FOR XML PATH**将每个集合组合在一起。意味着更多的 CPU 密集型和读取繁重的初始查询。

我想知道，首先，上述两种方法中哪一种看起来更好，其次，是否还有其他更好的方法我没有想到。问题是两者都必须使用垃圾对象映射器（不能仅为此查询的结果集创建我自己的 DAL 映射过程）。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:57:55.147

我认为映射不会成为问题，因为您可以继续使用自定义属性，然后对其进行映射。但是，这里有一个 Fox XML Path 解决方案。

```
Declare @t Table(OrderId Int,OrderName Varchar(10),OrderDate DateTime,Part Varchar(2),Destination Varchar(10),Supplier Varchar(10))
Insert Into @t Values
(2,'davo','5/21/12','A','London','SuppA'),
(2,'davo','5/21/12','B','London','SuppB'),
(2,'davo','5/21/12','C','Paris','SuppC')

Select 
    OrderId
    ,OrderName
    ,OrderDate
    ,Parts = Stuff( (Select Distinct ',' +Cast(Part As Varchar(max))
                     From @t t2 where t1.OrderId = t2.OrderId
                     For Xml Path('')
                     ),1,1,'')
    ,Destinations = Stuff(  (Select Distinct ',' +Cast(Destination As Varchar(max))
                     From @t t2 where t1.OrderId = t2.OrderId
                     For Xml Path('')
                     ),1,1,'')

    ,SupplierInvolved = Stuff(  (Select Distinct ',' +Cast(Supplier As Varchar(max))
                     From @t t2 where t1.OrderId = t2.OrderId
                     For Xml Path('')
                     ),1,1,'')
From @t t1
Group By t1.OrderId,t1.OrderName,t1.OrderDate 
```

结果是

![在此处输入图像描述](../Images/fca1636144c52710f4dfe41341527bfb.png)

来到选项 1，编写一个将获取记录集的存储过程（使用订单、零件、供应商等表之间的连接），然后您可以使用自定义属性再次映射它们。现在，如果您还想在表示层进行自定义格式设置。

# node.js - 通过 Node.js 驱动程序运行任意 MongoDB 脚本

> ID：13073982
> 
> 赞同：2
> 
> 时间：2012-10-25T17:26:56.157
> 
> 标签：node.js, mongodb

我有一个从命令行运行的复杂 MongoDB 脚本的组合，如下所示：

```
$ mongo mydb config.js task.js 
```

由于我无法在我的服务器环境中运行 shell 脚本并且需要安排上述任务，我想我可以简单地连接上述 .js 文件，然后从 Node 脚本运行它们。因此，我正在寻找一个等价于：

```
db.runMyCustomRawCommands(string commands) 
```

我该怎么做，或者什么是替代解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:46:03.180

引用 Node.js 原生 MongoDB 驱动程序的原作者 Christian Kvalheim 的话：

这是不可能的，因为 shell 是同步的，并且具有与 node.js 驱动程序不同的 api。您必须重写脚本才能为 node.js 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:53:38.093

问题是这`db.runMyCustomRawCommands`不是原始命令。驱动程序与较低级别的 mongod 服务器通信。诸如`db.abc`您在控制台中运行的命令实际上是引用`db.$cmd`集合的简单查询消息`db.$cmd.findOne({ abc: 1 })`。

因此，您必须弄清楚如何将 mongo shell 脚本表达为对驱动程序 API 的调用，或者在较低级别访问服务器。

# iphone - iPhone Google Chrome - 选项卡选择屏幕（分组 UIViews）

> ID：13073989
> 
> 赞同：4
> 
> 时间：2012-10-25T17:27:21.003
> 
> 标签：iphone, objective-c, ios, google-chrome, uiview

我正在开发适用于 iOS 的应用程序，我必须制作一个选项卡选择屏幕，例如适用于 iPhone 的 Google Chrome 应用程序（我附上了截图）。我搜索了很多，但我没有找到任何类似的控件可以使用。正如我所看到的，它对一些 UIViews 进行分组并使用 UIScrollView 进行滚动，但也许你们中的任何人都可以更好地向我解释这个控件是如何工作的或有任何解决方案。

谢谢！

[http://i.stack.imgur.com/rCG5g.png](http://i.stack.imgur.com/rCG5g.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:30:17.950

1.  使用您的控件创建不同的 UIViews。（一个选项卡等于在 UIView 上）
2.  在 UIScroll View 上添加这个 UIView。（这是可选的。如果你不使用 UIScrollView 并在 self.view 上添加 UIView 也可以
3.  在 UIView 上实现 touch 方法。
4.  当您触摸特定的 UIView 时，将其中心位置更改为屏幕中心。
5.  这将为您提供在前台触摸的 UIView 和后台中的其余视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:02:55.307

希望对你有帮助 .........

我用这个解决了我的问题......

[https://github.com/xxhp/BrowserTabViewDemo](https://github.com/xxhp/BrowserTabViewDemo)

# php - 将 DISTINCT 或 GROUP BY 添加到我的 mysql_query 会导致不返回任何值

> ID：13073990
> 
> 赞同：0
> 
> 时间：2012-10-25T17:27:23.453
> 
> 标签：php, mysql, distinct

我正在使用 php 使用以下代码从 mysql 数据库中获取记录：

```
<?php
    $username="";
        $password="";
        $database="";
        $hostname="";

               $con = mysql_connect($hostname, $username, $password);

        if (!$con){
            die('Could not connect: ' . mysql_error());
        }

        mysql_select_db($database, $con);

    if(isset($_POST['emp'])){
        $emp = $_POST['emp'];
        $result = mysql_query("SELECT * FROM contact_log", $con);
        echo mysql_num_rows($result);
        die();
        while($row = mysql_fetch_array($result)){
            $emp = $row['emp'];
            echo $emp.'<br>';
        }
        die();
    }

        mysql_close($con);
?> 
```

这工作正常并返回正确的字段。问题是，如果我将查询更改为

```
$result = mysql_query("SELECT DISTINCT * FROM contact_log", $con); 
```

或者

```
$result = mysql_query("SELECT * FROM contact_log GROUP BY emp", $con); 
```

不返回任何结果。

mysql_num_rows 甚至没有返回一个值，该值向我表明这些行正在破坏我的代码，但我无法弄清楚如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:52:11.063

我怀疑你想`distinct *`对你的第一个查询做一个。查看您的代码，您可能想要：

```
"SELECT DISTINCT emp FROM contact_log" 
```

您可以获得更多关于出了什么问题的信息`mysql_error`：

```
mysql_query("select * from table") or die(mysql_error()) 
```

最后，您确定`$_POST['emp']`正在发送吗？如果要确保，请在此之后立即回声。正如您所知道的，您没有将`emp`POST 变量用于除标志之外的任何东西来输入该代码块。 `$emp = $_POST['emp'];`什么都不做。

# mysql - SELECT 和 INSERT 到另一个表的字段

> ID：13073996
> 
> 赞同：1
> 
> 时间：2012-10-25T17:27:41.610
> 
> 标签：mysql, select

这是有效的吗？

`SELECT COUNT(*) INTO mydb.table.field FROM sometable WHERE points=30;`

如果不是……谁能告诉我类似的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:30:03.950

不，你的会和这个一模一样

```
INSERT INTO mydb.table (field)
SELECT Count(*)
FROM   sometable
WHERE  points=30; 
```

另一个具有更多列的示例

```
INSERT INTO mydb.table (Col1, Col2, Col3)
SELECT Col1, Col2, Count(*)
FROM   sometable
WHERE  points=30; 
```

[在这里](http://www.brightcherry.co.uk/scribbles/mysql-insert-select-example/)你可以找到很多例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:30:19.333

```
INSERT INTO myTable (field) VALUES 
(SELECT COUNT(*) FROM sometable where points=30) 
```