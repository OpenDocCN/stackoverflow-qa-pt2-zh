# StackOverflow 问答 14361000-14361999

# sql - 我可以更改执行 sp_executesql 的输入参数值吗？

> ID：14361003
> 
> 赞同：0
> 
> 时间：2013-01-16T14:47:24.317
> 
> 标签：sql, tsql, dynamic-sql

任何人都知道是否可以在执行 sp_executesql 期间更改输入变量？

例如，我想将@var 值更改为“再见”

```
declare @var varchar(10) = 'hello'
declare @Query nvarchar(max) = 'print @var set @var = ''bye'' print @var'

EXEC SP_EXECUTESQL @Query, N'@var varchar(10)', @var -- Execute Query Statement

print @var 
```

上次我打印@var 时，我期待它打印'再见'，但打印'你好'。

可以在不声明输出变量的情况下实现我的目标吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:50:44.243

您必须改用`output`参数：

```
declare @var varchar(10) = 'hello'
declare @Query nvarchar(max) = 'print @var set @var = ''bye'' print @var'
EXEC SP_EXECUTESQL @Query, N'@var varchar(10) output', @var output
print @var  -- This prints bye 
```

请注意，输出既在变量声明中，又在`sp_executesql`.

# c++ - 类变量 - 对齐

> ID：14361006
> 
> 赞同：5
> 
> 时间：2013-01-16T14:47:33.677
> 
> 标签：c++, operators

> **可能重复：**
> [类将数据成员存储在顺序内存中？](https://stackoverflow.com/questions/14352373/classes-store-data-members-in-sequential-memory)

只是想问为什么以下是正确的：

```
template<class T>
class Vec3 {
public:
  // values
  T x,y,z;

  // returns i-th komponent (i=0,1,2) (RHS array operator)
  const T operator[] (unsigned int i) const {
    return *(&x+i);
  }
} 
```

或者换句话说：为什么总是保证 x、y 和 z 在内存中总是相隔 sizeof(T) 单位。在这两个变量之间不能有碎片漏洞，从而让这个运算符返回一个假值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T14:48:43.920

**不能**保证`x`,`y`和总是在内存中分开`z`。`sizeof(T)`中间可以添加填充字节。
它作为实现细节被忽略了。
唯一可以保证的是，在类/结构的开头与其 POD 结构/类的第一个成员之间不会有填充。

不能保证`operator[]`您的代码中的实现将始终有效。

**参考：**
C++11：9.2 类成员 [class.mem]

> 14) 分配具有相同访问控制（第 11 条）的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。未指定具有不同访问控制的非静态数据成员的分配顺序 (11)。**实现对齐要求可能会导致两个相邻的成员不会被立即分配；**管理虚拟功能 (10.3) 和虚拟基类 (10.1) 的空间要求也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:03:03.710

为了避免*碎片孔*，您可以通过以下方式控制对齐：

```
#ifdef compiling_with_msvc
#pragma pack(1)
#endif
template<class T>
class Vec3 {
public:
    // values
    T x,y,z;

    // returns i-th komponent (i=0,1,2) (RHS array operator)
    const T operator[] (unsigned int i) const {
        return *(&x+i);
    }
#ifdef compiling_with_gcc
}__attribute__((packed));
#else
};
#endif 
```

如果您可以使用[C++11 编译器，您可以以](https://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)[标准方式](http://www.stroustrup.com/C++11FAQ.html#align)控制对齐。

但是，如果您不关心类的内存表示，请考虑使用`union`：

```
template <typename T>
union Vec3
{
    T x, y, z;
    struct
    {
        T value[3];
    } vector;
}; 
```

使用联合，您不必关心对齐以访问每个组件`[]`：

```
Vec3<unsigned int> v3;

v3.vector.value[0] = 1;
v3.vector.value[1] = 2;
v3.vector.value[2] = 3; 
```

# arrays - Excel根据另一张工作表中列表的内容查找和替换单元格内容

> ID：14361008
> 
> 赞同：0
> 
> 时间：2013-01-16T14:47:38.773
> 
> 标签：arrays, excel, vba, cell

> **可能重复：**
> [Excel 根据另一个工作表中的列表内容清除单元格](https://stackoverflow.com/questions/14302891/excel-clear-cells-based-on-contents-of-a-list-in-another-sheet)

在[Excel 上，根据另一个工作表中列表的内容清除单元格](https://stackoverflow.com/questions/14302891/excel-clear-cells-based-on-contents-of-a-list-in-another-sheet)bonCodigo 帮助我使用 VBA 宏脚本，该脚本具有指定的列和行范围以从 Sheet1 的 A 列中获取单词，然后在 Sheet2 列中找到它们作为完全匹配以获得发现清理干净了。结果在 Sheet3 中生成。

这是执行此操作的 VBA 代码：

```
Sub matchAndClear()
Dim ws As Worksheet
Dim arrKeys As Variant, arrData As Variant
Dim i As Integer, j As Integer, k As Integer

'-- here we take keys column from Sheet 1 into a 1D array
arrKeys = WorksheetFunction.Transpose(Sheets(1).Range("A1:A38").Value)
'-- here we take to be cleaned-up-range from Sheet 2 into a 2D array
arrData = WorksheetFunction.Transpose(Sheets(2).Range("A1:I100").Value)

'-- here we iterate through each key in keys array searching it in
'-- to-be-cleaned-up array
For i = LBound(arrKeys) To UBound(arrKeys)
    For j = LBound(arrData, 2) To UBound(arrData, 2)
            '-- when there's a match we clear up that element
            If UCase(Trim(arrData(1, j))) = UCase(Trim(arrKeys(i))) Then
                arrData(1, j) = " "
            End If
            '-- when there's a match we clear up that element
            If UCase(Trim(arrData(2, j))) = UCase(Trim(arrKeys(i))) Then
                arrData(2, j) = " "
            End If
    Next j
Next i

'-- replace old data with new data in the sheet 2 :)
Sheets(3).Range("A1").Offset(0, 0).Resize(UBound(arrData, 2), _
UBound(arrData)) = Application.Transpose(arrData)

End Sub 
```

这次我需要一个稍微不同的 VBA 帮助。在 Sheet1 B 列中，这里是另一个单词列表，因此 VBA 不应查找并清除与 Sheet1 A 列中找到的单词列表值匹配的单元格内容，而是将找到的值（需要完全匹配）替换为 Sheet1 B 列中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:03:32.987

如果我正确理解了输入，下面的代码将从中找到“ac”`Sheet1!A1`并将其替换为“hertha” `Sheet1!B1`：

```
Sub MatchAndReplace()
    Dim ws As Worksheet
    Dim arrKeysA As Variant, arrKeysB As Variant, arrData As Variant
    Dim i As Integer, j As Integer, k As Integer

    '-- here we take keys column A from Sheet 1 into a 1D array
    arrKeysA = WorksheetFunction.Transpose(Sheets(1).Range("A1:A38").Value)
    '-- here we take keys column B from Sheet 1 into a 1D array
    arrKeysB = WorksheetFunction.Transpose(Sheets(1).Range("B1:B38").Value)
    '-- here we take to be replaced range from Sheet 2 into a 2D array
    arrData = WorksheetFunction.Transpose(Sheets(2).Range("A1:I100").Value)

    '-- here we iterate through each key in keys array searching it in
    '-- to-be-replaced array
    For i = LBound(arrKeysA) To UBound(arrKeysA)
        For j = LBound(arrData, 2) To UBound(arrData, 2)
                '-- when there's a match we replace that element
                If UCase(Trim(arrData(1, j))) = UCase(Trim(arrKeysA(i))) Then
                    arrData(1, j) = Trim(arrKeysB(i))
                End If
                '-- when there's a match we replace that element
                If UCase(Trim(arrData(2, j))) = UCase(Trim(arrKeysA(i))) Then
                    arrData(2, j) = Trim(arrKeysB(i))
                End If
        Next j
    Next i

    '-- put new data on the sheet 3
    Sheets(3).Range("A1").Offset(0, 0).Resize(UBound(arrData, 2), _
    UBound(arrData)) = Application.Transpose(arrData)

End Sub 
```

这是生成的 Excel 书，其中包含 Sheet3 上的宏结果：[https ://www.dropbox.com/s/i8ya0u7j6tjee13/MatchAndReplace.xls](https://www.dropbox.com/s/i8ya0u7j6tjee13/MatchAndReplace.xls)

如果出现不符合预期的情况，请回复。

# google-chrome - 打开下载的 Gist 文件夹以检查元素

> ID：14361010
> 
> 赞同：0
> 
> 时间：2013-01-16T14:47:40.447
> 
> 标签：google-chrome, d3.js, gist

我想在我的浏览器中使用 Web 检查器试验 Mike Bostock 的堆积条形图 (https://gist.github.com/3886208)。我意识到我需要示例文件（index.html 和 data.csv 文件）的本地副本才能使用它。但是，当我下载“gist”文件夹并使用 Chrome 打开 index.html 文件时，图表不会出现。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:04:12.887

使用 Google Chrome，转到顶部菜单 > 查看 > 开发人员 > Javascript 控制台。您将看到一条消息

```
XMLHttpRequest cannot load file:///path/to/data.csv. Cross origin requests are only supported for HTTP. 
```

根据[https://github.com/mbostock/d3/wiki](https://github.com/mbostock/d3/wiki)

> 在本地开发时，请注意您的浏览器可能会强制执行从本地文件系统读取文件的严格权限。如果您在本地使用 d3.xhr（包括 d3.json 等），则必须有本地 Web 服务器。例如，您可以运行 Python 的内置服务器：

```
python -m SimpleHTTPServer 8888 & 
```

运行后，转到`http://localhost:8888/`。

# php - PHP 服务器“包罗万象”请求

> ID：14361013
> 
> 赞同：1
> 
> 时间：2013-01-16T14:47:41.117
> 
> 标签：php

我将 PHP 内置服务器用于一个小型个人项目。

我只是想知道是否有任何方法可以将所有请求重写为一个脚本，然后可以使用`$_SERVER['REQUEST_URI']`类似的脚本来处理不同的事情。

或者，有没有办法为 PHP 服务器设置 404 ErrorDocument？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:54:43.637

是的，当您启动内置服务器时，您可以指定一个路由器脚本（而不是 Apache .htaccess 文件，例如）。

```
$> php -S localhost:8080 YourRouterDocument.php 
```

[文档](http://php.net/manual/en/features.commandline.webserver.php)

# c# - 如何忽略 pathtoolong 异常？

> ID：14361016
> 
> 赞同：3
> 
> 时间：2013-01-16T14:47:53.773
> 
> 标签：c#

我有一些简单的代码......

```
try
{
    files = root.GetFiles("*.*"); 
    //throws exception filetoolong exception.  Skip file and move
}
catch (UnauthorizedAccessException e)
{
     throw;
} 
```

问题是如果文件路径太长，这可能会引发异常......

> System.IO.PathTooLongException 未处理
> Message=指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。
> 源=mscorlib

有什么办法可以跳过很长的文件，目前我的程序刚刚停止，我现在如何避免这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:19:22.093

避免异常的唯一方法是不要尝试枚举一个文件夹，其中的文件超出基于 MAX_PATH 常量的给定规范或不使用任何文件。

我没用过，但你可以试试 AplhaFS - [http://alphafs.codeplex.com/](http://alphafs.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:26:49.763

有关文件路径长度限制的更多信息： [命名文件、路径和命名空间 (Windows)](http://msdn.microsoft.com/en-us/library/aa365247.aspx)

有*几种*方法可以解决此问题，但为了使用这些解决方法，您可能必须 P/Invoke 到支持文件路径长度 > MAX_PATH 的非常专业的调用子集

# php - 我的脚本是如何同时耗尽内存和执行时间的？

> ID：14361018
> 
> 赞同：5
> 
> 时间：2013-01-16T14:47:59.963
> 
> 标签：php

我知道我会用完一些东西，因为我正在执行一项很长的任务。那不是问题。

我只是好奇，我是如何同时得到这两个错误的？

> 致命错误：允许的内存大小为 805306368 字节已用尽（尝试分配 71 字节）...

--

> 致命错误：第 0 行的未知中超过了 300 秒的最大执行时间

第一个“致命”错误不应该停止执行吗？我正在运行 APC 和 php 5.2.6。

编辑： [这是一个截图](http://i.stack.imgur.com/5hTPi.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:52:59.440

*可能*是您在这里遇到了竞争状况。

例如，它基本上可以在内存的关闭功能中触发 FATAL，而在更早触发关闭功能的超时中触发 FATAL：

```
register_shutdown_function(function() {
    # consume all memory
    echo "break my pain\n";
    $a = ['hello'];
    while($a[] = $a);
});

set_time_limit(1);
while(1) usleep(100); 
```

它也可以反过来工作，首先触发内存的 FATAL，然后在关闭函数中触发 FATAL 超时：

```
register_shutdown_function(function() {
    set_time_limit(1);
    while(1) usleep(100);
});

ini_set('memory_limit', '1');
$a = array_fill(0, 1024, 'hello');
while($a[] = $a); 
```

这还没有 100% 解释 Codeigniter 内部发生了什么，但是我会说查询需要很长时间，因此在返回触发执行时间限制之后也是如此。由于您的 PHP 版本较旧，这有点难以重现。如果我现在 eval PHP 代码，我会收到一条消息，即代码已被 eval'ed 并且我在哪一行中找到了该 eval 命令 (PHP 5.4)。尝试使用 PHP 5.4 重现以获得更多信息。您也将从 PHP 5.2 以来的速度改进中受益匪浅。你错过了很多。

*早些时候：*

> 致命错误：第 0 行的未知中超过了 300 秒的最大执行时间

这闻起来像一个启动错误。

是什么触发了你的第一个错误很难说，你把它切断了。要么你在这里得到了经过评估的代码，它可能部分通过 APC 处理，你可以在同一个脚本中看到两个致命错误。

但是，如果可以重现它，请尝试不使用 APC。如果仍然可以，请在 PHP bugtracker 中报告。

如果不能，请使用 APC bugtracker 报告问题。

*编辑：*刚刚看到 PHP 5.2.6，您可能需要自己报告并修复它；） - 然后尝试使用当前稳定的 PHP 版本进行重现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:08:48.377

发生这种情况的一种方法是，如果您有一个 register_shutdown_function：

```
<?php
register_shutdown_function('shutdownFunction');
error_reporting(E_ALL);ini_set("display_errors", true);
ini_set("memory_limit", "5M");
ini_set("max_execution_time", 1);

for ($i=0;$i<1000000;$i++) {
    $val[] = rand();
}

function shutDownFunction() {
    echo "executed";
    for ($i=0;$i<100000000;$i++) {
        $val = rand();
    }
} 
```

输出与您得到的相同：

> 致命错误：第 8 行 /home/periklis/workspace/build_script/test.php 中允许的 5242880 字节内存大小已用尽（尝试分配 524288 字节）
> 
> 执行
> 
> 致命错误：第 13 行 /home/periklis/workspace/build_script/test.php 中的最大执行时间超过 1 秒

# c# - 如何在 LDAP 中进行身份验证？

> ID：14361021
> 
> 赞同：3
> 
> 时间：2013-01-16T14:48:07.407
> 
> 标签：c#, .net, active-directory, ldap

我正在尝试在 .NET 中使用 LDAP 制作一个简单的身份验证系统。我正在检查 .NET 中的一些命名空间，并简单地制作如下的标准代码片段。

```
DirectoryEntry de = new DirectoryEntry(path,username,password);

DirectorySearcher s = new DirectorySearcher(de);
s.Filter = "(&(cn=" + username2 + "))";

SearchResult result = s.FindOne();
if (result != null) {
    Console.WriteLine("User exists");
} else {
    Console.WriteLine("User does not exist");
} 
```

我有一个管理员用户名和密码，`username`我`password`用它来验证客户端应用程序。我有第二个用户名和密码，`username2`需要`password2`在 LDAP 中检查才能登录。

`username`是管理员帐户，`username2`只是 LDAP 中的用户。那么如何查看`username2`密码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:36:31.827

稍微倒退（且笨拙）的方法是以用户身份登录并尝试检索某些内容，然后将异常视为无效密码：

```
static bool CheckUser(string userName, string password) 
{
    var adSettings = ConfigurationManager.ConnectionStrings["ActiveDirectory"];
    if (adSettings == null ||
        string.IsNullOrWhiteSpace(adSettings.ConnectionString))
    {
        return false;
    }

    try
    {
        using (var de = new DirectoryEntry(adSettings.ConnectionString, userName, password))
        {
            // This should throw an exception if the password is wrong
            object nativeObject = de.NativeObject;
        }
    }
    catch (DirectoryServicesCOMException)
    {
        // Wrong password
        return false;
    }
    catch (System.Runtime.InteropServices.COMException)
    {
        // Can't connect
        return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:30:18.320

我想我在 VB 中有一些东西可以帮助你。几天前和我的同事一起研究这个。请告诉我---代码：

```
 Dim cookie As HttpCookie = New HttpCookie("username")
    cookie.Value = TextBox1.Text
    cookie.Expires = DateAndTime.Now.AddHours(12)
    Response.Cookies.Add(cookie)
    Dim entry As New DirectoryEntry("LDAP://xyz.com/dc=xyz,dc=com", TextBox1.Text, TextBox2.Text)
    Try
        Dim obj As New Object
        obj = entry.NativeObject
        Dim search As New DirectorySearcher(entry)
        search.Filter = "(SAMAccountName=" + TextBox1.Text + ")"
        search.PropertiesToLoad.Add("cn")
        Dim result As SearchResult
        result = search.FindOne()
        If result.Equals(Nothing) then
            MsgBox("Try Again with valid username")
        Else
            MsgBox("User Found!")
        Response.Redirect("~/Dashboard.aspx")
        End If
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try

End Sub 
```

# r - 函数的多行注释（）属性

> ID：14361022
> 
> 赞同：2
> 
> 时间：2013-01-16T14:48:08.193
> 
> 标签：r, function, comments, attr

假设我有以下功能：

```
sqrt_x = function(x) {
     sqrtx = x^0.5
     return(list("sqrtx" = sqrt))
}  
attr(sqrt_x, "comment") <- "This is a comment to be placed on two different lines" 
```

如果我输入

```
comment(sqrt_x) 
```

我明白了

```
[1] "This is a comment to be placed on two different lines" 
```

然而，我想要的是评论在两个不同的行上返回（它也可以是更多的行和不同的评论元素。任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:07:00.090

正如安德烈所说：您需要插入换行符。

如果您不想手动指定换行符的位置，那么您可以使用`strwrap`在方便的点创建中断，以便您的字符串不超过指定的宽度。

```
msg <- strwrap("This is a comment to be placed on two different lines", width = 20)
cat(msg, sep = "\n")
# This is a comment
# to be placed on two
# different lines 
```

* * *

一个完整的解决方案可能类似于：

```
#Add comment as normal
comment(sqrt_x) <- "This is a comment to be placed on two different lines"

#Display using this function
multiline_comment <- function(x, width = getOption("width") - 1L)
{
  cat(strwrap(comment(x), width = width), sep = "\n")
}

multiline_comment(
  sqrt_x, 
  20
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:01:59.773

您可以使用`\n`插入换行符。该`cat`方法以您想要的方式显示：

```
attr(sqrt_x, "comment") <- "This is a comment to be placed on two\ndifferent lines"
cat(comment(sqrt_x))

This is a comment to be placed on two
different lines 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:35:19.843

这有点小技巧，也许不是你想要的，但如果你提供一个多元素`character`向量，并且行足够长以至于 R 的默认格式决定它们应该在多行上，你可能会得到你想要的：

```
comment(sqrt_x) <- c("This is a comment                       ",
                     "to be placed on two different lines")
comment(sqrt_x)
## [1] "This is a comment                       "
## [2] "to be placed on two different lines" 
```

您可以使用`format`自动填充：

```
comment(sqrt_x) <- format(c("This is a comment",
                            "to be placed on two different lines"),
                             width=50) 
```

（如其他地方所示，您也可以使用`strwrap()`将单个长字符串分解为多个部分）

`comment`如果您非常渴望拥有它并且您不喜欢额外的空格，您可以使用 @RichieCotton 的多行版本之类的东西来掩盖内置函数：

```
comment <- function(x,width = getOption("width") - 1L) {
   cat(strwrap(base::comment(x), width = width), sep = "\n")
} 
```

但这可能是个坏主意。

# python - 如何将 datatime.now 转换为仅日期？

> ID：14361024
> 
> 赞同：-2
> 
> 时间：2013-01-16T14:48:17.153
> 
> 标签：python, django

如何将 datatime.now 转换为仅日期？

```
from datetime import datetime, timedelta, time

now = datetime.now()
#2013-01-16 15:46:00.310499 
```

我只需要日期，不需要时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:48:42.130

调用[`.date()`](http://docs.python.org/2/library/datetime.html#datetime.datetime.date)它：

```
datetime.now().date() 
```

或者只是使用[`date.today()`](http://docs.python.org/2/library/datetime.html#datetime.date.today)：

```
from datetime import date
date.today() 
```

# mysql - 如何进行大规模选定更新

> ID：14361034
> 
> 赞同：1
> 
> 时间：2013-01-16T14:48:32.087
> 
> 标签：mysql, sql, sql-update

我有一个值列表（deviceID），我需要创建一个 MySQL 查询来更新列值，我可以通过以下方式进行查询

```
UPDATE Clients.Devices 
SET assignedUserID='Jhon' 
WHERE accountID='Delivery1' AND 
      (deviceID='1234' OR deviceID='1235' OR deviceID='1236') 
```

这是一个简单的例子，但一些 accountID 有超过 500 个设备 ID，所以我正在寻找更短的 SQL 语句 那么，有什么方法可以将设备 ID 列表传递给 SQL 服务器？

就像是

```
UPDATE Clients.Devices 
SET assignedUserID='Jhon' 
WHERE accountID='Delivery1' AND 
      (deviceID=('1234','1235','1236)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:49:23.940

**更新**

如果 的数据类型`deviceID`是数字，则不需要单引号。

也许`IN`对于多个值不是`=`

```
UPDATE Clients.Devices 
SET assignedUserID = 'Jhon' 
WHERE accountID = 'Delivery1' AND deviceID IN (1234,1235,1236) 
```

或者如果 ID 按顺序使用`BETWEEN`

```
UPDATE Clients.Devices 
SET assignedUserID = 'Jhon' 
WHERE accountID = 'Delivery1' AND deviceID BETWEEN 1234 AND 1236 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:52:14.607

你也可以试试这个：

```
UPDATE Clients.Devices 
SET assignedUserID='Jhon' 
WHERE accountID='Delivery1' AND deviceID > = 1234 AND deviceID <= 1236
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:58:21.403

如果使用 php，也许这会起作用：

```
$ids = join(',',$deviceIDs);

$sql = "UPDATE Clients.Devices 
SET assignedUserID='Jhon' 
WHERE accountID='Delivery1' AND deviceID IN ($ids)"; 
```

# soapui - Soap UI 拆分属性转移结果

> ID：14361036
> 
> 赞同：0
> 
> 时间：2013-01-16T14:48:36.153
> 
> 标签：soapui

有人可以帮忙分割财产转让的结果吗？

IE

如果我的回答是：

```
`<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<CurrenciesResponse xmlns="http://webservices.cloanto.com/currencyserver/">
<CurrenciesResult>AED;AFN;ARS;AUD;AZN;BBD;</CurrenciesResult>
</CurrenciesResponse>
</soap:Body>
</soap:Envelope>` 
```

我有一个财产转让

```
`declare namespace soap='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace ns1='http://webservices.cloanto.com/currencyserver/';
//ns1:CurrenciesResult` 
```

我收到 AED;AFN;ARS;AUD;AZN;BBD 的预期转帐到 Currency1

现在有一种简单的方法可以让我拆分返回的属性，以便我可以将它们存储在

货币1 AED

货币2 AFN

ETC

非常感谢任何想法或帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:30:12.227

只是一个想法：

将 XPath 值传输到属性中，然后使用 Groovy 脚本：

*   读取属性值，存储为字符串。
*   用分号分割字符串并存储到数组中。
*   为每个数组项创建新属性。

然后在您需要的地方使用每个属性。

# spring - 将 Spring 的 LocalValidatorFactoryBean 与 JSF 一起使用

> ID：14361037
> 
> 赞同：5
> 
> 时间：2013-01-16T14:48:38.170
> 
> 标签：spring, jsf, dependency-injection, bean-validation, autowired

我正在尝试将 bean 注入到 custom`ConstraintValidator`中。我遇到了一些事情：

*   在 validation-api-1.1.0 中支持 CDI（提供 Beta 版）
*   Hibernate Validator 5 似乎实现了validation-api-1.1.0（可用Alpha）
*   使用 Seam 验证模块
*   使用 Spring 的 LocalValidatorFactoryBean

最后一个似乎最适合我的情况，因为我们已经在使用 Spring (3.1.3.Release)。

我已将验证器工厂添加到 XML 应用程序上下文并启用了注释：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="com.example" />
    <bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />
</beans> 
```

验证者：

```
public class UsernameUniqueValidator implements
    ConstraintValidator<Username, String>
{
    @Autowired
    private PersonManager personManager;

    @Override
    public void initialize(Username constraintAnnotation)
    {
    }

    @Override
    public boolean isValid(String value, ConstraintValidatorContext context)
    {
        if (value == null) return true;
        return personManager.findByUsername(value.trim()) != null;
    }
} 
```

验证应用于`Person`：

```
public class Person
{
    @Username
    private String username;
} 
```

和支持bean：

```
@Named
@Scope("request")
public class PersonBean
{
    private Person person = new Person();
    @Inject
    private PersonManager personManager;

    public create()
    {
        personManager.create(person);
    }
} 
```

在 JSF 页面中，我有：

```
<p:inputText value="#{personBean.person.username}" /> 
```

验证器被调用，但该字段未自动装配/注入并保持为空。这当然会引发 NullPointerException。

我正在使用 Hibernate 验证器 4.2 进行测试（因为`LocalValidatorFactoryBean`我认为应该能够做到这一点）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T15:17:00.527

我也面临同样的问题。在我的例子中，使用了 Spring+MyFaces+RichFaces。在应用程序启动期间，Spring 创建了 LocalValidatorFactoryBean，但 MyFaces 不使用该 bean 作为验证工厂。相反，MyFaces 和 RichFaces 都使用了自己的验证器，即使是 spring-faces 模块。

为了弄清楚如何使用 LocalValidatorFactoryBean 制作面孔，我查看了 javax.faces.validator.BeanValidator createValidatorFactory 方法。每次需要验证时，MyFaces 都会使用此方法创建 ValidatorFactory。在该方法中，您可以看到以下内容：

```
Map<String, Object> applicationMap = context.getExternalContext().getApplicationMap();
Object attr = applicationMap.get(VALIDATOR_FACTORY_KEY);
if (attr instanceof ValidatorFactory)
{
    return (ValidatorFactory) attr;
}
else
{
    synchronized (this)
    {
        if (_ExternalSpecifications.isBeanValidationAvailable())
        {
            ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
            applicationMap.put(VALIDATOR_FACTORY_KEY, factory);
            return factory;
        }
        else
        {
            throw new FacesException("Bean Validation is not present");
        }
    }
} 
```

如您所见，它首先尝试从上下文加载 ValidatorFactory，然后再创建一个新实例。所以我实现了以下解决方案来使用 Spring LocalValidatorFactoryBean：我创建了一个在 PostConstructApplicationEvent 上运行的 SystemEventListener。此侦听器从 servlet 上下文中获取 Spring WebApplicationContext，从中检索 LocalValidatorFactoryBean 的实例并将其存储在 ExternalContext ApplicationMap 中。

```
public class SpringBeanValidatorListener implements javax.faces.event.SystemEventListener {
    private static final long serialVersionUID = -1L;

    private final Logger logger = LoggerFactory.getLogger(SpringBeanValidatorListener.class);

    @Override
    public boolean isListenerForSource(Object source) {
        return true;
    }

    @Override
    public void processEvent(SystemEvent event) {
        if (event instanceof PostConstructApplicationEvent) {
            FacesContext facesContext = FacesContext.getCurrentInstance();
            onStart(facesContext);
        }
    }

    private void onStart(FacesContext facesContext) {
        logger.info("--- onStart ---");

        if (facesContext == null) {
            logger.warn("FacesContext is null. Skip further steps.");
            return;
        }

        ServletContext context = getServletContext(facesContext);

        if (context == null) {
            logger.warn("ServletContext is not available. Skip further steps.");
            return;
        }

        WebApplicationContext webApplicationContext = (WebApplicationContext) context.getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE);

        if (webApplicationContext == null) {
            logger.warn("Spring WebApplicationContext was not set in ServletContext. Skip further steps.");
            return;
        }

        LocalValidatorFactoryBean validatorFactory = null;

        try {
            validatorFactory = webApplicationContext.getBean(LocalValidatorFactoryBean.class);
        } catch (BeansException ex){
            logger.warn("Cannot get LocalValidatorFactoryBean from spring context.", ex);
        }

        logger.info("LocalValidatorFactoryBean loaded from Spring context.");

        Map<String, Object> applicationMap = facesContext.getExternalContext().getApplicationMap();
        applicationMap.put(BeanValidator.VALIDATOR_FACTORY_KEY, validatorFactory);

        logger.info("LocalValidatorFactoryBean set to faces context.");
    }

    private ServletContext getServletContext(FacesContext facesContext) {
        return (ServletContext) facesContext.getExternalContext().getContext();
    }
} 
```

因此，当 MyFaces 第一次尝试获取 ValidatorFactory 时，LocalValidatorFactoryBean 已经存在并且 MyFaces 不会创建新实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T09:51:13.693

这绝对是使用键 BeanValidator.VALIDATOR_FACTORY_KEY 将您自己的自定义 ValidatorFactory 添加到应用程序映射的方法。但是除了使用 javax.faces.event.SystemEventListener 之外，您还可以从 spring 方面接近它。将您的 ValidatorFactory 注册为 ServletContext 中的属性就足以将其拾取并添加到应用程序映射中（无论您使用什么，它都是 ServletContext 或 PortletContext 的抽象）。

所以问题是：如何将一个spring bean作为属性添加到ServletContext。我的解决方案是使用实现 ServletContextAware 的辅助 bean：

```
public class ServletContextAttributePopulator implements ServletContextAware {

    Map<String,Object> attributes;

    public Map<String, Object> getAttributes() {
        return attributes;
    }

    public void setAttributes(Map<String, Object> attributes) {
        this.attributes = attributes;
    }

    @Override
    public void setServletContext(ServletContext servletContext) {
        for (Map.Entry<String,Object> entry : attributes.entrySet()) {
            servletContext.setAttribute(entry.getKey(), entry.getValue());
        }
    }

} 
```

请注意，您可以将此类用于要添加到 ServletContext 的任何类型的 bean。
在您的 spring 上下文中，您将添加：

```
<bean  id="servletContextPopulator" class="my.package.ServletContextAttributePopulator">
    <property name="attributes">
    <map>
        <entry key="javax.faces.validator.beanValidator.ValidatorFactory" value-ref="validator"/>
    </map>
    </property>
</bean> 
```

其中“validator”是您的 LocalValidatorFactoryBean 的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:23:30.210

我不是 Spring 专家，但我希望您也可以在 beans.xml 中定义*PersonManager*，或者使用 @Component 对其进行注释。另请参阅[自动装配使用 @Component 注释的非托管 Bean](https://stackoverflow.com/questions/1004278/autowiring-unmanaged-beans-annotated-with-component)

# regex - Apache htaccess RewriteRule 不起作用

> ID：14361039
> 
> 赞同：1
> 
> 时间：2013-01-16T14:48:39.683
> 
> 标签：regex, apache, .htaccess, mod-rewrite

出于某种原因，我真的无法让我的 .htaccess RewriteRule 工作。我尝试了很多事情并进行了谷歌搜索，但失败了。一个可能的原因可能是我有一个相当旧的 Apache 版本（但这是我无法控制的）。不确定如何检索版本，但 phpinfo() 向我显示“Apache API 版本 20051115”。它至少必须在台式机、黑莓和 iPad 上工作。

我想重写这个：[http://subdomain.domain.com/folder1/?id=1234](http://subdomain.domain.com/folder1/?id=1234) 到以下：[http://othersubdomain.domain.com/?id=1234](http://othersubdomain.domain.com/?id=1234) 其中 id 可以是任何数字（我重写任何参数都很好，我也可以重定向到/folder1/?id=1234，重要的部分是子域和参数仍然存在的事实）。重要的是我没有收到身份验证弹出窗口（在任何设备上）。

我尝试了以下方法：

```
AuthUserFile /home/user/path/to/.htpasswd
AuthGroupFile /dev/null
AuthName "This site requires a valid username and password"
AuthType Basic

Options +FollowSymLinks
RewriteEngine on
RewriteRule ^folder1.*$ http://othersubdomain.domain.com%{REQUEST_URI}? [redirect=301,last]

<limit GET POST>
require valid-user
</limit> 
```

现在似乎在我的机器上正确重定向的唯一东西是 subdomain.domain.com/folder1/ （没有最后一个 / 它不起作用，或者如果我在末尾添加参数，即 .../folder1/？ id=1234 它也不起作用）。

我进一步尝试了以下内容：

```
AuthUserFile /home/user/path/to/.htpasswd
AuthGroupFile /dev/null
AuthName "This site requires a valid username and password"
AuthType Basic

Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/folder1
RewriteRule .* http://othersubdomain.domain.com/?%{QUERY_STRING} [redirect=301,last]

<limit GET POST>
require valid-user
</limit> 
```

此重定向似乎有效，但只有在我提供正确的身份验证用户/密码之后，这正是我想要阻止的。

提示非常受欢迎......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:05:01.447

我认为这应该有效（没有任何 RewriteCond）：

```
RewriteRule ^folder1(.*)$ http://othersubdomain.domain.com$1 [L,QSA,R=301] 
```

QSA 标志告诉保留查询参数。$1 替换为 ( ) 匹配的内容。

PS 据我所知，您只能在 RewriteCond 中使用 %{...} 变量。

# c# - 为什么不执行对 IEnumerable 中的字段的更改？

> ID：14361040
> 
> 赞同：1
> 
> 时间：2013-01-16T14:48:40.587
> 
> 标签：c#

令人惊讶的是，以下调用似乎不记得对该字段所做的更改。

```
private void Foo(IEnumerable<Blopp> blopps)
{
  foreach (Blopp blopp in blopps)
    blopp.SomeField = PREFIX + blopp.SomeField;

  String test = blopps.First().SomeField;
} 
```

使用 LINQ to data 获取数组时，*测试*变量缺少前缀。我需要评估*IEnumerable*并将其设为*List*以使对字段的更改保持不变。为什么会这样？我希望程序能够识别该字段稍后使用并对其进行评估**。**

```
private void Foo(IEnumerable<Blopp> _blopps)
{
  List<Blopp> blopps = _blopps.ToList();
  foreach (Blopp blopp in blopps)
    blopp.SomeField = PREFIX + blopp.SomeField;

  String test = blopps.First().SomeField;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T14:50:53.970

这取决于您传递给它的内容。如果它是一个*惰性求值的序列*，那么每次您“查看”时`blopps`，它都会重新评估输入。

如果您传入类似 a 的内容`List<T>`，则序列每次都将包含相同的确切值，所以这很好。如果您传入一个未实现的查询，它将在您每次查看输入时执行该查询。是否返回对与先前评估相同的对象的引用将取决于它在做什么。

（正如评论中所指出的，在某些情况下，对一次评估返回的对象的更改甚至可能会完全改变查询的结果 - 对象可以以这样的方式进行修改，即它们与查询中的早期过滤器不匹配。 )

# javascript - 使用 javascript 模拟 asp:button 点击

> ID：14361044
> 
> 赞同：4
> 
> 时间：2013-01-16T14:48:44.660
> 
> 标签：javascript, asp.net

我尝试使用第二个按钮激活我的第一个按钮单击/命令，以激活我的登录命令和组验证

我究竟做错了什么？

第一个按钮

```
<asp:Button ID="LoginButtonInvis" runat="server"  CommandName="Login"
           ValidationGroup="Login1"
                visible ="false"/>
                </asp:Button> 
```

第二个按钮

```
 <button name="submit" runat="server"onclick="document.getElementById('LoginButtonInvis').Click();">                
                <i class="icon-arrow-right icon-large"></i>
            </Button> 
```

我得到的错误：

`Microsoft JScript runtime error: Unable to get value of the property 'Click': object is null or undefined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:00:40.847

默认情况下，ASP.NET 将父 ID 附加到控件以维护元素的唯一 ID。这是正确的行为。

此外，JavaScript 区分大小写。事件都以小写字母开头。有些浏览器有`.click()`，有些浏览器有，`.onclick()`所以下面的代码是我能提供的最好的代码，而无需更改代码的其他部分：

```
onclick="var b = document.getElementById('<%=LoginButtonInvis.ClientID%>'); if (b.click) b.click(); else if (b.onclick) b.onclick();" 
```

还要确保第二个按钮不是提交按钮，`type="button"`否则会导致表单提交两次。

编辑：这仅在文档中存在第一个按钮时才有效。使用您当前的代码，由于`Visible="false"`您拥有，它不存在。要在仍然隐藏的同时发送它，请删除并将其`Visible="false"`添加到您的代码后面：

```
LoginButtonInvis.Style["display"] = "none"; 
```

或者使用“display: none;”应用 CSS 类 规则。

为了避免使用内联 JavaScript，以及更好的跨浏览器支持（IE，是的），您最好在页面中添加 JavaScript 块：（无论在哪里）

```
<script type="text/javascript">
function SimulateClick(buttonId) {
    var button = document.getElementById(buttonId);
    if (button) {
        if (button.click) {
            button.click();
        }
        else if (button.onclick) {
            button.onclick();
        }
        else {
            alert("DEBUG: button '" + buttonId + "' is not clickable");
        }
    } else {
        alert("DEBUG: button with ID '" + buttonId + "' does not exist");
    }
}
</script> 
```

现在在第二个按钮中只有这个：

```
<button name="submit" onclick="SimulateClick('<%=LoginButtonInvis.ClientID%>');"><i class="icon-arrow-right icon-large"></i></button> 
```

另请注意，您不需要`runat="server"`第二个按钮，它只会导致`<%=`无法工作并使事情复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:55:02.940

尝试不同的方法

在提交按钮上单击调用 javascript 并设置隐藏变量字段

```
function SetValue()
{
    //set hidden field value 
    form.submit();
} 
```

它将控制`page_load`事件。检查`hidden field`是否设置的值并执行相应的`LoginButtonInvis`命令。不要忘记重置隐藏字段

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T10:19:58.803

我认为原始代码的唯一问题是点击方法应该都是小写的：

`onclick="document.getElementById('LoginButtonInvis').click();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-26T01:13:19.490

如果它是一个链接按钮，你可以这样做：`__doPostBack('ctl00$CP1$lnkBuscarEmpleado', '')`

我只是在检查我的按钮时发现了它。

[![https://i.stack.imgur.com/gXeg3.png](../Images/65244e23ff574b3e089c5ba36e15e676.png)](https://i.stack.imgur.com/gXeg3.png)

# github - Composer 找不到 Symfony2 包的包

> ID：14361047
> 
> 赞同：1
> 
> 时间：2013-01-16T14:48:52.100
> 
> 标签：github, bundle, symfony-2.1, composer-php

我正在创建一个托管在*GitHub 上的***Symfony2**包。我想一切都配置得很好！但是，当我尝试安装它时出现问题。

 *以下是关键信息的摘要。

首先，在我的 Symfony2 应用程序中，我更新`composer.json`如下：

```
"require": {
     ...,
    "bundle-name": "dev-master"
}, 
```

当我尝试通过命令安装捆绑包时`php composer.phar update`，出现以下错误：

加载包含包信息的作曲家存储库 安装依赖项 您的需求无法解析为一组可安装的包。

```
Problem 1
    - The requested package bundle-name could 
      not be found in any version, there may be a typo in the package name.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according 
   to your minimum-stability setting
   see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> 
   for more details. 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:30:56.257

您必须为“bundle-name”添加存储库。[我在packagist](http://packagist.org)上找不到它，所以先注册它。*

# c# - DateTime.Parse 日期格式

> ID：14361053
> 
> 赞同：12
> 
> 时间：2013-01-16T14:49:06.750
> 
> 标签：c#, datetime

我有一个日期表示为字符串

```
20130116154407 
```

我为此调用了 DateTime.Parse，但它失败了。如何将其转换为 DateTime？顺便说一句，时区是 CET。

**编辑**

到目前为止，提供的解决方案非常有用，但似乎它们不支持 24 小时制，仍在寻找支持的解决方案。

**编辑 2**

正确的格式是

```
DateTime.ParseExact(str, "yyyyMMddHHmmss", CultureInfo.InvariantCulture) 
```

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T14:51:21.523

您需要指定格式：

```
DateTime.ParseExact(str, "yyyyMMddHHmmss", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T14:52:39.230

使用此代码

```
string DATE_FORMAT= "yyyyMMddhhmmss";

DateTime date;
if(DateTime.TryParseExact(str, DATE_FORMAT, DateTimeFormatInfo.InvariantInfo, DateTimeStyles.None, out date))
{
//success
//you can use date
}else
{
//fail
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T14:53:55.557

尝试`DateTime.ParseExact`

```
var dt = DateTime.ParseExact("20130116154407", "yyyyMMddhhmmss", CultureInfo.InvariantCulture); 
```

# java - 尝试使用 Maven 从命令行运行 Java7 Hello World 项目

> ID：14361056
> 
> 赞同：3
> 
> 时间：2013-01-16T14:49:16.517
> 
> 标签：java, maven

尝试使用 maven 从命令行运行 Java7 Hello World 项目。如果我从 eclipse 中运行代码，我的项目运行正常，但如果我尝试执行“mvn packege”包，则会收到以下错误。

这是我的来源：

```
public class App 
{
    public static void main( String[] args )
    {
        System.out.println( "Hello World!, Tesing Java 7" );
        printDay("Wednesday");
    }

    public static void printDay(String dayOfWeek) {
        switch (dayOfWeek) 
        {
            case "Sunday": System.out.println("Dimanche"); break;
            case "Monday": System.out.println("Lundi"); break;
            case "Tuesday": System.out.println("Mardi"); break;
            case "Wednesday": System.out.println("Mercredi"); break;
            case "Thursday": System.out.println("Jeudi"); break;
            case "Friday": System.out.println("Vendredi"); break;
            case "Saturday": System.out.println("Samedi"); break;

            default: System.out.println("Error: '"+ dayOfWeek +"' is not a day of the week"); break;
        }
    }
} 
```

这是我的 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>org.smith</groupId>
  <artifactId>TestJava7</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>TestJava7</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

这是错误：

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/jsmith/Documents/workspace-juno/TestJava7/src/main/java/org/smith/TestJava7/App.java:[16,13] error: strings in switch are not supported in -source 1.5
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.169s
[INFO] Finished at: Wed Jan 16 09:48:26 EST 2013
[INFO] Final Memory: 10M/100M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project TestJava7: Compilation failure
[ERROR] /home/jsmith/Documents/workspace-juno/TestJava7/src/main/java/org/smith/TestJava7/App.java:[16,13] error: strings in switch are not supported in -source 1.5
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T14:53:39.050

设置编译器插件的源和目标版本：

[http://maven.apache.org/plugins/maven-compiler-plugin/](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)

```
<project>
  [...]
  <build>
    [...]
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.7</source>
          <target>1.7</target>
        </configuration>
      </plugin>
    </plugins>
    [...]
  </build>
  [...]
</project> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:53:04.107

错误清楚地表明：

```
strings in switch are not supported in -source 1.5 
```

您需要配置`maven-compiler-plugin`指向JDK 7，默认情况下它将指向1.5或1.6

[在此处](http://maven.apache.org/enforcer/maven-enforcer-plugin/usage.html)尝试以获取有关如何配置的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T07:19:32.813

将 maven 插件添加到您的 POM.xml，清理并再次运行..

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>3.0</version>
  <configuration>
    <source>1.7</source>
    <target>1.7</target>
  </configuration>
</plugin> 
```

# ios - 在 case 语句中创建的 NSString 的生命周期

> ID：14361060
> 
> 赞同：0
> 
> 时间：2013-01-16T14:49:27.733
> 
> 标签：ios, core-data, switch-statement

我有一个使用 ARC 支持 DynamoDB 的核心数据的 iOS 程序。

在其中我有一个声明了以下类的数据模型：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Track : NSManagedObject

@property (nonatomic, retain) NSString * trackId;

@end

-------------------------------------------------

#import "Track.h"

@implementation Track

@dynamic trackId;

@end 
```

然后我有一个类创建 ManagedObject 的实例并像这样持久化它：

```
NSString *trackId = @"ABC123";

Track *track = (Track*)[NSEntityDescription insertNewObjectForEntityForName:@"Track" inManagedObjectContext:context];
track.trackId=trackId;

NSError *error;
if (![appDelegate.managedObjectContext save:&error])
{
    NSLog(@"error: %@", error);
} 
```

这按预期工作。但是，如果我使用开关来更改 trackId 的值，如下所示：

```
for (int i=0; i<1; i++) {
    NSString *trackId;
    switch (i) {
        case 0:
            trackId = @"XYZ789";
            break;
    }

    Track *track = (Track*)[NSEntityDescription insertNewObjectForEntityForName:@"Track" inManagedObjectContext:context];
    track.trackId=trackId;
}

NSError *error;
if (![appDelegate.managedObjectContext save:&error])
{
    NSLog(@"error: %@", error);
} 
```

然后我得到以下异常：

```
2013-01-16 14:44:00.013 DjTest2[2351:c07] XYZ789
2013-01-16 14:44:00.014 DjTest2[2351:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: key cannot be nil'
*** First throw call stack:
(0x183e012 0x1663e7e 0x18c10de 0x107c9bf 0x39799 0x1ff5e4 0xc7831 0xf533c 0x3411 0x68c817 0x68c882 0x5dba25 0x5dbdbf 0x5dbf55 0x5e4f67 0x5a8fcc 0x5a9fab 0x5bb315 0x5bc24b 0x5adcf8 0x268bdf9 0x268bad0 0x17b3bf5 0x17b3962 0x17e4bb6 0x17e3f44 0x17e3e1b 0x5a97da 0x5ab65c 0x258d 0x24b5)
libc++abi.dylib: terminate called throwing an exception 
```

我假设存在一些我不知道的关于使用 ARC 的变量范围/保留的问题，其中 NSString 文字是在开关的范围内创建的，但我找不到对它的任何引用。

有谁知道造成这种情况的根本原因是什么，以及如何在无法执行此类操作的情况下有效地处理大量对象的持久化？

**注意：**我已经提到支持 DynamoDB 以确保完整性，但在尝试调用 AWS 之前会引发此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:03:16.147

恐怕我在上面的代码示例中误导了我们，为了清楚起见，我在输入 SO 时对其进行了更新。

实际问题不在于它在 switch 语句中，而是我正在使用的一些真实键中有空格，我假设它们受到 Core Data 的限制，因为 DynamoDB 没有这样的限制。

# javascript - 扩展清单必须请求访问此主机的权限

> ID：14361061
> 
> 赞同：40
> 
> 时间：2013-01-16T14:49:30.377
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试将 div 附加到当前活动选项卡的页面。但是我收到此错误：

```
Error during tabs.executeScript: Cannot access contents of url .... 
Extension manifest must request permission to access this host. 
```

我的代码：（show_loader.js）

```
var dv = document.createElement('div');
dv.id = 'myid';
dv.innerHTML = 'test';
document.body.appendChild(dv); 
```

但是，当我输入此代码时：

```
document.body.style.backgroundColor = 'green'; 
```

**它按预期工作**，当前选项卡的背景颜色已更改，除了从 popup.js 运行的 show_loader.js 文件中的代码之外没有其他更改，如下所示：

```
chrome.tabs.executeScript(null, {file: "show_loader.js"}); 
```

我的清单文件也有：

```
"permissions":
[
  "tabs",
  "notifications",
  "http://*/",
  "https://*/"
], 
```

所以我想知道为什么当我尝试做除了设置背景颜色之外的任何其他事情时它会给出上述错误。即使是简单`alert`或`console.log`单独在该页面上也会给出相同的上述错误。

如何解决？

## 更新：完整的相关代码

显现：

```
{
   ... name and description ...
   "icons":
   {
      "16" : "img/icon.png",
      "48" : "img/48.png",
      "128" : "img/128.png"
   },

   "permissions":
   [
      "tabs",
      "notifications",
      "http://*/*",
      "https://*/*"
   ],

   "browser_action":
   {
      "default_icon": "img/icon.png", 
      "default_title": "Page title",      
      "default_popup": "popup.html"       
   }
} 
```

popup.js

```
// send data to server for saving
$('#btn').click(function(){

     chrome.tabs.executeScript(null, {file: "show_loader.js"});

      $loader.show();

      var data = $(this).closest('form').serialize();

      $.ajax({.....});

});

window.onload = function(){
    var $loader = $('#loader');
    $loader.show();

    chrome.tabs.getSelected(null, function(tab) {
        //console.log(tab);
        $('#url').val(tab.url); 
        $('#title').val(tab.title);
        $loader.hide();
    });
}; 
```

popup.html

```
<html>
<head>
   <link rel="stylesheet" href="css/style.css" type="text/css" />
</head>
<body>

   <form action="" method="post" name="frm" id="frm">
   <table border="0" cellpadding="3" cellspecing="0" width="370">
      ......
   </table>
   </form>

<script src='js/jquery.js'></script>
<script src='popup.js?v=014423432423'></script> 

</body>
</html> 
```

show_loader.js

```
console.log($); // doesn't work

// document.body.style.backgroundColor = 'green'; // WORKS 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-16T16:03:43.843

有效的代码

### 清单.json

```
{
    "name": "Manifest Permissions",
    "description": "http://stackoverflow.com/questions/14361061/extension-manifest-must-request-permission-to-access-this-host",
    "version": "1",
    "manifest_version": 2,
    "browser_action": {
        "default_popup": "popup.html"
    },
    "permissions": [
        "tabs",
        "notifications",
        "http://*/",
        "https://*/"
    ]
} 
```

### popup.html

```
<html>

    <head>
        <script src="back.js"></script>
    </head>

    <body>
        <button id="tmp-clipboard">Click Me</button>
    </body>

</html> 
```

### 返回.js

```
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById('tmp-clipboard').onclick = function () {
        chrome.tabs.executeScript(null, {
            file: "script.js"
        });
    }
}); 
```

### 脚本.js

```
var dv = document.createElement('div');
dv.id = 'myid';
dv.innerHTML = 'test';
document.body.appendChild(dv); 
```

尝试`chrome.tabs.getSelected`从您的代码中消除 deprecated 并改用[chrome.tabs.query](http://developer.chrome.com/extensions/tabs.html#method-query)。

## 示例使用

```
chrome.tabs.query({
    "currentWindow": true,
    "status": true,
    "active": true //Add any parameters you want
}, function (tabs) {//It returns an array
    for (tab in tabs) {
        //Do your stuff here
    }
}); 
```

# 编辑 1

如果您打算在他单击的当前窗口中捕获活动浏览选项卡，请`browser action`使用此代码

```
chrome.tabs.query({
    "currentWindow": true,//Filters tabs in current window
    "status": "complete", //The Page is completely loaded
    "active": true // The tab or web page is browsed at this state,
    "windowType": "normal" // Filters normal web pages, eliminates g-talk notifications etc
}, function (tabs) {//It returns an array
    for (tab in tabs) {
        $('#url').val(tabs[tab].url); 
        $('#title').val(tabs[tab].title);
        $loader.hide(); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2021-05-01T18:21:21.840

清单 v3 使用不同的[权限架构](https://developer.chrome.com/docs/extensions/mv3/declare_permissions/)。这对我有用：

```
 "host_permissions": [
        "https://music.youtube.com/*"
    ], 
```

# ios - iOS 每 5 分钟检查一次

> ID：14361062
> 
> 赞同：0
> 
> 时间：2013-01-16T14:49:31.977
> 
> 标签：ios, objective-c, core-data

我有一个应用程序创建消息，然后发送到主机服务器。

该应用程序必须能够完全离线工作，因此当消息被创建（并存储到 CoreData）时，它们被设置为“未发送”。然后，该应用程序会尝试立即发送它们。如果有连接并且服务器响应是肯定的，那么我将消息设置为“已发送”。

当然，这意味着如果在创建消息时手机处于离线状态，则永远不会发送该消息。

我所有的消息都是通过一个管理所有消息发送和排队的单例对象发送的。

我试图将 NSTimer 放入单例的 init 中，每 5 分钟触发一次发送（更改为 10 秒进行测试）。这工作正常，直到我停止应用程序的时间超过 NSTimer 的时间。

如果我将应用程序停止 30 秒，然后再次重新启动，则计时器不会触发。

有没有更好的方法可以让我获得相同的功能？即每隔几分钟检查一次传出消息并发送任何正在等待的消息。

**编辑**

我没有使计时器或任何东西无效。只是如果在计时器即将触发时应用程序未处于活动状态，那么它似乎不会再次安排它。

我的代码`NSTimer`是...

```
[NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(sendMessages) userInfo:nil repeats:YES]; 
```

如果我将应用程序置于后台，然后在计时器触发之前使其处于活动状态，那么它将继续运行而没有问题。但是，如果我将应用程序置于后台，然后等待 30 分钟，那么当我返回应用程序时，计时器将不再触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:56:23.973

`NSNotifications`当应用离开并进入运行状态时，您可以收听这些并简单地使计时器无效并恢复：

```
UIApplicationDidBecomeActiveNotification
UIApplicationWillResignActiveNotification 
```

还要确保 的属性`NSTimer`是`strong`这样的，这样计时器就不会被释放。

```
@property (strong) NSTimer *timer; 
```

解决您的问题的另一种方法是使用 3rd-party 排队类或库。例如[IFOfflineQueue](https://github.com/marcoarment/IPOfflineQueue)。

# iphone - 滚动视图和视图中的 Titanium Studio Alloy 视觉错误

> ID：14361068
> 
> 赞同：1
> 
> 时间：2013-01-16T14:49:43.643
> 
> 标签：iphone, titanium, titanium-mobile, appcelerator-mobile, titanium-modules

我是 Titanium studio Alloy 的新手，我有两个问题，

1，我在 xml 文件的窗口中创建了 2 个视图标签。在执行最后一个视图时，仅在两个视图中可见，我的代码是

```
<Window class="container>
<View class="View1">
  #content of view1
</View>
<View class="View2">
  #content of view2
</View>
</Window> 
```

在这段代码中，只有最后一个视图（view2）是可见的，我想同时看到两个视图。

2.在我的 ScrollView 标签中，我有一些内容可见。但是滚动视图的内容在屏幕上随处可见。

我想在屏幕上修复。

谁能帮我提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:46:42.457

您需要在窗口上设置布局属性，它们被绘制在彼此之上

# .net - 绑定文本框值在验证和验证之间丢失

> ID：14361074
> 
> 赞同：0
> 
> 时间：2013-01-16T14:49:52.513
> 
> 标签：.net, winforms, data-binding, .net-4.0

`DateTimePicker`我在绑定到实体框架对象（ 1、1`ComboBox`和 2 `TextBoxes`）的 Windows 窗体上有几个控件。`DataSourceUpdateMode`是`OnValidation`（默认），并且表单的属性`AutoValidate`设置为`EnableAllowFocusChange`。`DateTimePicker`和的绑定`ComboxBox`按预期工作。

但是，当我在 中输入内容时`TextBox`，当我退出时，该值会消失。两个`TextBox`控件都经过验证。在 Validating 事件处理程序中，我可以看到`Text`each 的属性中的值`TextBox`。但是，当我到达 Validated 事件处理程序时，该`Text`值被设置回一个空字符串。

编辑：

经过一些实验，这似乎与我将`TextBox`控件绑定到类型为`System.Nullable(Of Short)`. 我创建了一个包含单个`System.Nullable(Of Short)`属性的类的小型测试项目。当我将带有单个表单的表单绑定`TextBox`到该属性时，我遇到了同样的问题。但是，如果我将该属性更改为 type `Short`，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:51:10.070

基于评论中链接的问题 Stuart Dunkeld ( [https://stackoverflow.com/a/3524691/43846](https://stackoverflow.com/a/3524691/43846) )，我发现绑定的`FormattingEnabled`属性必须设置为`true`绑定到可空类型时。

# emacs - 在 Emacs 中，有没有办法在不显示输出的情况下运行 shell-command？

> ID：14361075
> 
> 赞同：0
> 
> 时间：2013-01-16T14:49:52.830
> 
> 标签：emacs, elisp

例如，在 Emacs 中，使用 shell-command 调用 perl 脚本，

```
 M-! perl my_script.pl 
```

或调用一个简单的外部命令，

```
M-! dir 
```

我不想在 Emacs 的命令窗口中显示任何输出。

PS：我的操作系统是Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:52:32.437

Linux：

```
M-! perl my_script.pl>/dev/null 
```

视窗：

```
M-! perl my_script.pl> NUL 
```

这不会返回输出。

# c# - 使用 NHibernate 向 Oracle DB 添加触发器

> ID：14361078
> 
> 赞同：0
> 
> 时间：2013-01-16T14:50:01.163
> 
> 标签：c#, oracle, nhibernate

我正在尝试编写小程序，使用 NHibernate 从代码生成我的数据库表、序列和触发器。

使用`SchemaExport.Create()`方法我能够创建所有表和相关序列，但我无法创建触发器。因此，我尝试使用`session.CreateSQLQuery()`运行将触发器添加到数据库的命令。

我的代码如下所示：

```
string createTriggerQuery= @"create or replace trigger table_insert_trigger before insert on Table for each row begin select TableSequence.nextval into :new.ID from dual; end;";
var query = session.CreateSQLQuery(createTriggerQuery);
query.ExecuteUpdate(); 
```

该查询在我在 上运行时有效`Oracle SQL Developer`，但在执行代码时出现此异常：

```
Could not execute native bulk manipulation query:create or replace trigger... [SQL: SQL not available] 
```

我还尝试使用 HBM 查询来创建查询。我将 XML 文件作为嵌入式资源添加到项目中，并在其上添加以下代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
<database-object>
    <create>
        create or replace
        trigger table_insert_trigger before insert on table
        for each row
        when (new.ID is NULL)
        begin
        select tableSequence.nextval into :new.ID from dual;
        end;
    </create> 
```

在我的`FluentConfiguration`成员中，我将其配置为添加 hbm 映射：

```
_fluentConfiguration.Mappings(m => m.HbmMappings.AddFromAssemblyOf<DbContextFactory>()); 
```

但这也不起作用。

有谁知道如何从代码中将触发器添加到我的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:33:16.330

此特定实例中的问题是您尝试对数据库执行的查询，特别是这部分：

```
... into :new.ID from dual; 
```

NHibernate将冒号 ( `:`) 解释为参数的指示符，并将其替换为`?`（因为您实际上并未传递参数）。所以它实际上是在传递一个看起来像这样的 SQL，

```
into ? from dual 
```

在这一点上甲骨文抱怨。

目前，NHibernate 无法转义`:`并将其按字面意思传递给数据库，如此[处](https://stackoverflow.com/questions/12459255/how-to-escape-colon-using-nhibernate)所述。

在类似的约束下，解决方案是使用`ORM`NHibernate 以外的其他方法。如果这是必需的目的，也许 NHibernate 不是最佳选择。

# ios - TestFlight TFLog 异常使我的应用程序崩溃

> ID：14361080
> 
> 赞同：3
> 
> 时间：2013-01-16T14:50:20.287
> 
> 标签：ios, crash, testflight

我对 TestFlight SDK 有一个奇怪的问题。在 iPhone5 上我得到这个异常，应用程序崩溃了。

这是回溯：

```
Reason: -[__NSArrayM length]: unrecognized selector sent to instance 0x20c76d80
UserInfo: (null)
Backtrace: (0x3abbc2a3 0x34aab97f 0x3abbfe07 0x3abbe531 0x3ab15f68 0x3591b0c1 0x996eb     0xb2b83 0x97b21 0x973ed 0x75913 0x83657 0x839e7 0x38eaf11f 0x38eb3961 0x38eb3ac1 0x35c18a11 0x35c188a4)
Stack symbols: (
0   CoreFoundation                      0x3abbc2bb &lt;redacted&gt; + 186
1   libobjc.A.dylib                     0x34aab97f objc_exception_throw + 30
2   CoreFoundation                      0x3abbfe07 &lt;redacted&gt; + 170
3   CoreFoundation                      0x3abbe531 &lt;redacted&gt; + 392
4   CoreFoundation                      0x3ab15f68 _CF_forwarding_prep_0 + 24
5   Foundation                          0x3591b0c1 &lt;redacted&gt; + 160
6   FlyerApp                            0x000996eb +[TFAirTrafficController logPath] + 102
7   FlyerApp                            0x000b2b83 -[TFMessagePackLogOperation writeLogData] + 50
8   FlyerApp                            0x00097b21 TFLogv + 92
9   FlyerApp                            0x000973ed TFLog + 60
10  FlyerApp                            0x00075913 -[KFRemoteLoadManager changesRequestFromDate:forDelegate:] + 834
11  FlyerApp                            0x00083657 -[KFSyncManager _startSync] + 574
12  FlyerApp                            0x000839e7 __31-[KFSyncManager tryToStartSync]_block_invoke_0132 + 54
13  libdispatch.dylib                   0x38eaf11f &lt;redacted&gt; + 10
14  libdispatch.dylib                   0x38eb3961 &lt;redacted&gt; + 252
15  libdispatch.dylib                   0x38eb3ac1 &lt;redacted&gt; + 84
16  libsystem_c.dylib                   0x35c18a11 &lt;redacted&gt; + 360
17  libsystem_c.dylib                   0x35c188a4 start_wqthread + 8
) 
```

我建议接下来是导致此异常的代码：

```
NSString *urlString = [NSString stringWithFormat:BASE_URL, [[KFLocalDataManager sharedManager] serverName]];
urlString = [[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] stringByAppendingString:methodName];
NSURL *url = [NSURL URLWithString:urlString];
TTLog(@"Request URL - '%@'", url); 
```

TTLog 在哪里

```
#define TTLog(__FORMAT__, ...) TFLog((@"%s [Line %d] " __FORMAT__), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__); 
```

url 字符串是服务器的 url，如下所示：

```
https://xxxxxx.xxxxxxx.com/xxxxx_xxxx/xxxx 
```

这个错误不是每次都发生，而是总是在这个地方发生。我有几次崩溃，但我看不到所有相同崩溃问题的类似环境。此外，此代码在非主应用程序线程中运行，有时在 iOS 后台运行。

也许 TFLog 对传入参数有一些限制，或者有人收到与 TestFlight 相同或类似的异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:11:30.360

我在 SDK 上的 TestFlight 工作。@Nevir 是正确的。不幸的是，TFLog 不是线程安全的。这个问题最近引起了我们的注意。我正在开发可以解决此问题的更新，并希望尽快推出测试版。我会及时通知你的。

有一个新的测试版可以解决这个问题：1.3.0-beta。在这里获取：[https](https://testflightapp.com/sdk/download/) ://testflightapp.com/sdk/download/ （寻找“Feeling Adventurous？”）

# c++ - 将 Win32 应用程序添加到 Windows 自动播放菜单（针对特定类型的媒体）？

> ID：14361086
> 
> 赞同：0
> 
> 时间：2013-01-16T14:50:32.490
> 
> 标签：c++, windows, autoplay

如何将我的 Windows 应用程序（用 C++ 编写）添加到特定类型媒体的 Windows 自动播放菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:34:49.263

（注意：我从未尝试过这样做）

AutoPlay 只识别三种类型的媒体（图片、音乐、视频），我认为没有办法添加另一种类型。它可以识别许多不同的设备。您可以根据媒体或设备类型注册事件。部分说明在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/hh127449%28v=vs.85%29.aspx)。该链接没有描述如何实际定义处理程序，但这看起来并不难。处理程序定义在：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\AutoplayHandlers\Handlers 
```

那里已经有一堆可以用作示例。

# sql-server - 获取计数总和

> ID：14361092
> 
> 赞同：0
> 
> 时间：2013-01-16T14:50:50.570
> 
> 标签：sql-server

View 获得前三列。`totalCount`我需要在获得总计数的视图中再添加一列 ( )：

```
CId CCId CCount  totalCount
1      a      3         6
1      a      3         6
1      b      3         6
1      c      3         6
2      b      2         6
2      b      2         6
2      a      2         6
2      a      2         6
3      v      1         6 
```

如何获得`totalCount`as 6？

（业务规则为 Cid=1 Ccount=3 Cid=2 Ccount=2 Cid=3 Ccount=1 所以totalCount =3+2+1 =6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:52:48.937

有了这段代码，我得到了想要的结果：

```
select CId
      ,CCId
      ,CCount
      ,(select SUM(a.tcount) 
          from (select distinct CId ,CCount as tcount
       from  dbo.Test) as a ) totalcount
from dbo.Test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:01:45.993

```
SELECT  a.CID, a.CCID, a.CCOUNT,
        b.TotalCount
FROM    Table1 a, (SELECT SUM(DISTINCT cCOunt) TotalCount 
                   FROM Table1) b 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/67bc9/3)

**更新**

正如 Andomar 在评论中指出的那样，已对查询进行了更新，

```
SELECT  a.CID, a.CCID, a.CCOUNT,
        b.TotalCount
FROM    Table1 a, 
(
  SELECT SUM(TotalCount) TotalCount
  FROM
  (
      SELECT MAX(cCOunt) TotalCount 
      FROM Table1
      GROUP BY CId
   ) c
) b 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/32165/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:54:10.803

从您的示例数据中，我假设 a`Cid`只能有一个，可能重复的值`CCount`。在这种情况下，您可以使用 a 选择一个随机的（例如`max`）`group by`，并且`sum`：

```
select  sum(OneCCCount) as TotalCount
from    (
        select  max(CCount) as OneCCCount
        from    YourTable
        group by
                CId
        ) as SubQueryAlias 
```

# opencv - OpenCV立体相机，检测物距

> ID：14361093
> 
> 赞同：4
> 
> 时间：2013-01-16T14:50:52.557
> 
> 标签：opencv, distance, stereo-3d, stereoscopy

我是 OpenCV 的新手，我构建了 openCV 并安装了 Qt 以成功运行示例[http://code.google.com/p/opencvstereovision/source/checkout](http://code.google.com/p/opencvstereovision/source/checkout)。结果是左右网络摄像头捕获，并在校准后为两者和深度图校正图像。我想做以下事情。我将单击一个对象以聚焦于这些左侧或右侧图像中的任何一个。然后我想检测另一张图像中的相应像素并计算到这个物体的距离。我不知道现在该做什么，我需要指导。也许如果我先计算对应点，我可能会解决剩下的问题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:25:57.487

看起来你对需要什么有一个很好的了解。这有点像一罐蠕虫-因此，我一如既往地建议您获取著名的 Hartley & Zisserman 书籍以获得规范的解释。这是相关章节的[链接。](http://www.robots.ox.ac.uk/~vgg/hzbook/hzbook2/HZepipolar.pdf)

但简而言之...

我没有直接使用 opencvstereovision 包装类，但听起来它已经使校准（相机内在和外在）变得头疼，并通过平面几何的单应矩阵 (H) 或基本矩阵 (F) 计算了校正对于更复杂的对极几何。

可能类似于此原始[帖子](https://stackoverflow.com/questions/4260594/image-rectification)。

这种校正意味着它已经建立了每个图像中相同点之间的数学映射。

在之前的[答案](https://stackoverflow.com/questions/10502790/in-a-calibrated-stereo-vision-rig-how-does-one-obtain-the-camera-matrices-nee/10519245#10519245)（来自我）中，您可以通过使用基本矩阵执行三角测量来进行数学运算 - 即计算距离。

但是，请注意，此距离仅在**图像坐标系**中（即以像素为单位）。

执行**“现实世界”测量**（即实际物理距离）实际需要的是计算基本矩阵 (E)，它结合了基本矩阵和相机内在函数 (K)，如果您愿意，可以将距离投影到真实世界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:11:52.347

```
class StereoVar
{
StereoVar();
StereoVar(    int levels, double pyrScale,
                                int nIt, int minDisp, int maxDisp,
                                int poly_n, double poly_sigma, float fi,
                                float lambda, int penalization, int cycle,
                                int flags);
virtual ~StereoVar();

virtual void operator()(InputArray left, InputArray right, OutputArray disp);

int        levels;
double    pyrScale;
int        nIt;
int        minDisp;
int        maxDisp;
int        poly_n;
double    poly_sigma;
float    fi;
float    lambda;
int        penalization;
int        cycle;
int        flags;

...
}; 
```

参考：[http ://docs.opencv.org/modules/contrib/doc/stereo.html](http://docs.opencv.org/modules/contrib/doc/stereo.html)

# macos - applescript函数的问题

> ID：14361099
> 
> 赞同：0
> 
> 时间：2013-01-16T14:51:00.910
> 
> 标签：macos, applescript, finder

我正在尝试在以下脚本中使用 replaceChars 函数，但出现以下错误：

```
error "Finder got an error: Can’t continue replace_chars." number -1708 
```

目的是将脚本作为按钮添加到 finder，以便我可以简单地单击它来将路径复制到我的剪贴板。我正在添加 file://localhost/ 以便在通过电子邮件与用户共享时可以使用该链接作为本地网络上文件夹的直接链接。如果可能的话，我还想为 Windows 机器添加相同的剪贴板。

如果您能就上述任务提供任何指导，将不胜感激，这是我第一次尝试使用 applescript 进行编程，所以我对事情的完成方式并不了解。

继承人的代码：

```
on appIsRunning(appName)
    tell application "System Events"
        set isRunning to ((application processes whose (name is equal to appName)) count)
    end tell

    if isRunning is greater than 0 then
        return true
    else
        return false
    end if
end appIsRunning

on replace_chars(this_text, search_string, replacement_string)
    set AppleScript's text item delimiters to the search_string
    set the item_list to every text item of this_text
    set AppleScript's text item delimiters to the replacement_string
    set this_text to the item_list as string
    set AppleScript's text item delimiters to ""
    return this_text
end replace_chars

if appIsRunning("Finder") then
    tell application "Finder"
        set thePath to "file://localhost/" as text
        set theTarget to (target of front Finder window) as text
        set the clipboard to thePath & replace_chars(theTarget, ":", "/") as text
    end tell
end if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:58:05.517

`replace_chars`AppleScript 正在Finder 的脚本字典中寻找处理程序。您可以让它`my replace_chars`在脚本中查看 AS，或者（可能更好）将该`set the clipboard to thePath & replace_chars(theTarget, ":", "/") as text`行完全移出 tell 块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:38:46.263

你可以把它变成一个单行脚本：

```
tell application "Finder" to set the clipboard to "file://localhost" & (target of front Finder window as text)'s POSIX path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:49:07.580

将您的`replace_chars(theTarget, ":", "/")`电话替换为`replace_chars(theTarget, ":", "/") of me`：

```
set the clipboard to thePath & replace_chars(theTarget, ":", "/") of me as text 
```

# android - 如何更改应用程序的图标？

> ID：14361105
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:51:17.667
> 
> 标签：android

我想更改我的应用程序的图标。为此，我创建了一个 40x40 的图标。但是，我不知道我该怎么做？如何更改应用程序的图标？

还有，如何更改应用程序的背景图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:54:25.577

转到`AndroidManifest.xml`，您将看到：

```
 android:icon="@drawable/ic_launcher" 
```

如果您复制自己的图像来`/res/drawable`替换标准图标。如果要替换其他图像（位于您的代码中），您可以这样做，首先将图像复制到`/res/drawable`，然后用新图像名称替换旧图像名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:54:35.420

您将图像放在 res 文件夹中。只需复制并粘贴它。您可以通过删除它并将图像重命名为其名称来替换当前图像。否则 jsut 从代码中调用新图像

[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:56:37.000

[这个](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-launcher.html)在线工具对于生成不同屏幕密度的图标非常有用。

一旦你制作了图标，只需下载它并将下载文件中的每个drawable-X文件夹中的图标放入项目中的相应文件夹中。

然后添加`android:icon="@drawable/filename"`到您的`<application>`标签。

对于应用程序背景，将背景图片以所需的大小放入可绘制文件夹中，然后添加`android:background="@drawable/backgroundname"`到 Activity 的根布局中。

除此之外，如果您更喜欢手动调整图标大小，这里是不同密度的大小（来自[这里](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)）。

```
ldpi (120 dpi) - 36 x 36 px
mdpi (160 dpi) - 48 x 48 px
hdpi (240 dpi) - 72 x 72 px
xhdpi (320 dpi) - 96 x 96 px 
```

# php - 如何知道或确保 php 页面仅由 localhost 调用？

> ID：14361107
> 
> 赞同：1
> 
> 时间：2013-01-16T14:51:31.353
> 
> 标签：php

我们应该检查`$_SERVER['REMOTE_SERVER']`还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:57:33.403

这可以解决问题：

```
if($_SERVER['REMOTE_ADDR'] === '127.0.0.1') {
    // do something
} 
```

请注意不要依赖 X_FORWARDED_FOR，因为此标头很容易（并且意外地）被欺骗。

正确的方法是在服务器配置中设置一个环境变量，然后检查它。这也将允许您在本地环境、暂存和生产之间切换状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:54:14.363

查看

```
$_SERVER['REMOTE_ADDR']=='127.0.0.1' 
```

只有在本地运行时才会如此。请注意，这也意味着服务器本地。因此，如果您在服务器上运行任何向您的 PHP 页面发出请求的脚本，它们也将满足此条件。

引用自： [如何检查 php 脚本是否在本地服务器上运行？](https://stackoverflow.com/questions/6626204/how-to-check-if-the-php-script-is-running-on-a-local-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:52:07.617

```
This code will help you.

<?php
if($_SERVER['SERVER_NAME'] == 'localhost')
{
    echo 'localhost';
}
?> 
```

# c - C中奇怪的printf输出

> ID：14361108
> 
> 赞同：0
> 
> 时间：2013-01-16T14:51:34.843
> 
> 标签：c, printf, output

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char * reverse(char *string);
int main(int argc, char *argv[])
{
    char array[10];
    array[0] = 'a';
    array[1] = 'b';
    array[2] = 'c';
    array[3] = 'd';
    array[4] = 'e';
    printf("1%s\n",array);
    char *p = reverse(array);
    printf("4%s\n",p);
    printf("5%s\n",array);
}

char * reverse(char *string)
{
    int size = strlen(string);
    char reversed[size];
    int i;
    int j = 0;
    for(i = size-1; i >= 0; i--)
    {
        reversed[j] = string[i];
        j++;
    }
    printf("2%s\n",reversed);
    string = reversed;
    printf("3%s\n",string);
    return reversed;
} 
```

这段代码基本上只是初始化一个值数组并将其传递给一个反转这些值的方法。

我不确定这是否是执行任务的最佳方式，因为我不熟悉 C 中的指针和数组。

但真正的问题是：

谁能弄清楚这一行的原因

```
printf("4%s\n",p); 
```

如果您删除前面的“4”，那么它看起来像这样

```
printf("%s\n",p); 
```

该行根本不会打印？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T14:53:06.383

您在函数中返回一个指向局部变量（`reversed`）的指针，`reverse`问题实际上应该是：`Why did it work in the first place?`。

此代码`string = reversed;`将仅复制指针，并再次复制指针**的本地副本，**因此它在函数之外没有任何影响。

要反转字符串，您不需要额外的内存 - 这可以就地完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:54:37.473

C 中的字符串必须以空字符结尾。您在非空终止字符串上使用 strlen 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:55:12.217

此外，您只是一个非常幸运的人，因为您的代码存在严重问题：您忘记`\0`在字符串末尾添加符号。

**UPD：**主要问题是代码行`char reversed[size];`。它是一个常规的局部变量，它具有自动持续时间，这意味着它在函数被调用时立即存在，在函数返回时消失[（参见此链接）](http://www.eskimo.com/~scs/cclass/int/sx5.html)。

您需要将其更改为：

`char *reversed = malloc((size+1)*sizeof(char));`

**UPD-2：**另一个错误修复将是：

1）`array[5] = '\0';`在所有其他数组初始化行之后添加

2）在`reversed[j] = '\0';`之后添加`for...loop`：

```
for(i = size-1; i >= 0; i--)
{
    reversed[j] = string[i];
    j++;
}
reversed[j] = '\0'; 
```

**UPD-3：**但总的来说，它会以适当的方式更正确地初始化您的字符串：

```
char array[10] = "abcde"; 
```

# mysql - mysql存储过程中表值参数的替代解决方案

> ID：14361114
> 
> 赞同：6
> 
> 时间：2013-01-16T14:51:56.110
> 
> 标签：mysql, vb.net, table-valued-parameters

有没有人可能已经找到了在 MYSQL 中使用表值参数的替代解决方案。我的情况是我想从 Visual Basic 前端应用程序中传递多行，并且我希望能够在一个请求中发送记录表，以便我可以将其包装在事务中。我做了很多研究，但仍然没有答案。也许有人可以帮助我。

# php - 遇到 PHP 错误 严重性：通知消息：未定义变量：queerry_array

> ID：14361117
> 
> 赞同：0
> 
> 时间：2013-01-16T14:52:01.647
> 
> 标签：php, codeigniter

我尝试解决标题，但我真的很想知道解决方案，哦，有错误的代码在这里：

```
<?php
class Schedules extends CI_Controller {

function display($query_id = 0, $sort_by = 'event_name', $sort_order = 'asc', $offset = 0) {

    $limit = 20;
    $data['fields'] = array(
        'event_id' => 'ID',
        'event_name' => 'Title',
        'schedule' => 'Schedule',
        'date_expired' => 'Expired',
        'clientname' => 'Clientname',
        'cost' => 'Cost'
    );
    $this->input->load_query($query_id);

    $query_array = array(
        'event_name' => $this->input->get('event_name'),
        'date_expired' => $this->input->get('date_expired'),
        'length_comparison' => $this->input->get('length_comparison'),
        'date_expired' => $this->input->get('date_expired'),
    );
    $data['query_id'] = $query_id;

    $this->load->model('Schedule_model');

    $results = $this->Schedule_model->search($querry_array, $limit, $offset,     $sort_by, $sort_order); // this is line number 27 which displays  error

    $data['schedules'] = $results['rows'];
    $data['num_results'] = $results['num_rows'];
> Call to undefined function form_open() in C:\xampp\htdocs\ci\application\views\schedules.php on line 34//Also this error display too, code here:

<?php echo form_open('schedules/search'); ?>//this line is number 34 that display an error
    <div>
        <?php echo form_label('Event Name:', 'event_name'); ?>
        <?php echo form_input('event_name', set_value('event_name'), 'id="event_name"'); ?>
    </div>

    <div>
        <?php echo form_label('Schedule:', 'schedule'); ?>
        <?php echo form_dropdown('schedule', $category_options, 
            set_value('schedule'), 'id="schedule"'); ?>
    </div>

    <div>
        <?php echo form_label('Date Expiree:', 'date_expired'); ?>
        <?php echo form_dropdown('length_comparison', 
            array('gt' => '>', 'gte' => '>=', 'eq' => '=', 'lte' => '<=', 'lt' => '<') , 
            set_value('length_comparison'), 'id="length_comparison"'); ?>
        <?php echo form_input('date_expired', set_value('date_expired'), 'id="date_expired"'); ?>
    </div>

    <div>
        <?php echo form_submit('action', 'Search'); ?>
    </div>

<?php echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:53:37.343

错字：

```
$results = $this->Schedule_model->search($querry_array, etc...
                                             ^-- extra R 
```

由于您已将其定义为：

```
$query_array = array(
    ...snip... 
```

早些时候，与**ONE** `r`。

# visual-studio - VS 负载测试思考时间因子

> ID：14361120
> 
> 赞同：1
> 
> 时间：2013-01-16T14:52:03.567
> 
> 标签：visual-studio, visual-studio-2012, load-testing

我可以为我的 Visual Studio 2012 负载测试指定思考时间。但是是否有可能给思考时间一个像这样的因素：40*{{factor}}

如果因子 = 2，我的思考时间是 80 秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:02:29.547

我不确定这是否可行，但你可以试一试。

1.  创建一个 LoadTest 插件并在 Initialize 方法中设置`DelayBetweenIterations`您想要的值：

    ```
    public class Plugin : ILoadTestPlugin
    {
        private Microsoft.VisualStudio.TestTools.LoadTesting.LoadTest _mLoadTest;

        public void Initialize(Microsoft.VisualStudio.TestTools.LoadTesting.LoadTest loadTest)
        {
            _mLoadTest.Scenarios[0].DelayBetweenIterations = 40 * factor;
        }
    } 
    ```

2.  通过右键单击负载测试将插件添加到负载测试-> 添加负载测试插件...

# c# - 操作 MVC4 视图的 DOM 并生成 CSS 格式的 PDF

> ID：14361121
> 
> 赞同：1
> 
> 时间：2013-01-16T14:52:05.263
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-4, abcpdf

首先是当前状态：

*   我有一个带有剃须刀引擎的 MVC4 Web 应用程序（在线计算器）
*   该应用程序有一个显示计算结果的结果视图
*   我有能力使用 ABCPDF 8.1
*   要操作 DOM，我使用 HtmlAgilityPack

目标是：在 ResultController 中，获取当前视图 html，操作其 DOM（尤其是删除导航元素）并生成完全格式化的 pdf。

以下事情有效：

从 URL 创建一个完全 css 样式的 pdf

```
var document  = new Doc();
document.AddImageUrl("www.whatever.com");
return File(doc.GetData(), "application/pdf", "abc.pdf"); 
```

从带有操纵 DOM 的视图 html 创建一个 pdf，没有特定的 CSS3 格式

```
using (StringWriter sw = new StringWriter())
{

    // get html stream from view
    var result = ViewEngines.Engines.FindView(ControllerContext, "WizardFirstStep", "_Layout");
    var context = new ViewContext(ControllerContext, result.View, ViewData, TempData, sw);
    result.View.Render(context, sw);
    var html = sw.ToString();

    // manipulate DOM with HtmlAgilityPack
    var hdoc = new HtmlDocument();
    hdoc.LoadHtml(html);
    ... manipulation

    // create pdf and return FileContentResult
    var doc = new Doc();
    doc.AddImageHtml(hdoc.DocumentNode.InnerHtml);
    return File(doc.GetData(), "application/pdf", "abc.pdf");
} 
```

因此，我可以将样式化的 html 站点创建为 pdf，并且可以将经过操作的非样式化 html 文件创建为 pdf。

AddImageUrl 使用 css

AddImageHtml 不使用 css

我会对每一种方法和解决方案感到高兴

**//编辑：**

我有一个快速解决这个问题的方法。而不是@Styles.Render css relative with

```
@Styles.Render("~/Content/css") 
```

我绝对解决样式表

```
@Styles.Render("http://localhost:53406/Content/Site.css") 
```

但也许还有其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:19:40.607

由于这是 MVC，一切都可以通过 URL 控制，我说将文档加载为 URL 而不是图像。

```
theDoc.AddImageUrl("http://www.google.com/") 
```

这样 ABCpdf 会以您看到的方式加载页面。除非有控制视图的脚本和其他东西，否则您需要为此配置文档。

# ruby-1.9.3 - Resolv::DNS - 我如何强制 TCP？

> ID：14361122
> 
> 赞同：2
> 
> 时间：2013-01-16T14:52:05.687
> 
> 标签：ruby-1.9.3, ruby-1.9, resolv

有谁知道在使用 Resolv::DNS 时如何强制 TCP？
似乎当我要求`ANY`记录时，输出被截断并且我得到部分结果。当我执行许多查询（每种记录类型一个）时，我会得到更多结果。我也得到不一致的结果（机器之间不同，两个顺序查询返回不同的结果，......）

我认为这可能与 UDP 受限于数据包大小有关。

知道如何强制它使用 TCP 吗？我可以使用任何其他 DNS 软件包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T06:17:55.820

我遇到了同样的问题，想`Resolv`用于仅 TCP 查询，因为我期望结果集非常大。我最终挖掘了 Resolv 的源代码并了解到，默认情况下，*只有*在 UDP 查询失败时才会执行 TCP 查询。我发现我可以继承`Resolv::DNS`并覆盖该`each_resource`方法。这是我的来源：

```
require 'resolv'

# A TCP-only resolver built from `Resolv::DNS`. See the docs for what it's about.
# http://ruby-doc.org/stdlib-1.9.3/libdoc/resolv/rdoc/Resolv/DNS.html
class TcpDNS < Resolv::DNS
  # Override fetch_resource to use a TCP requester instead of a UDP requester. This
  # is mostly borrowed from `lib/resolv.rb` with the UDP->TCP fallback logic removed.
  def each_resource(name, typeclass, &proc)
    lazy_initialize
    senders = {}
    requester = nil
    begin
      @config.resolv(name) { |candidate, tout, nameserver, port|
        requester = make_tcp_requester(nameserver, port)
        msg = Message.new
        msg.rd = 1
        msg.add_question(candidate, typeclass)
        unless sender = senders[[candidate, nameserver, port]]
          sender = senders[[candidate, nameserver, port]] =
            requester.sender(msg, candidate, nameserver, port)
        end

        begin # HACK
          reply, reply_name = requester.request(sender, tout)
        rescue
          return
        end

        case reply.rcode
        when RCode::NoError
          extract_resources(reply, reply_name, typeclass, &proc)
          return
        when RCode::NXDomain
          raise Config::NXDomain.new(reply_name.to_s)
        else
          raise Config::OtherResolvError.new(reply_name.to_s)
        end
      }
    ensure
      requester.close
    end
  end
end 
```

然后使用它很简单，如下所示：

```
TcpDNS.open :nameserver => ns_addrs, :search => '', :ndots => 1 do |dns|
  resp = dns.getresources target, Resolv::DNS::Resource::IN::ANY
end 
```

# html - 如何在 1 个 XML 文件上使用 XSLT 获取多个视图 (html)

> ID：14361123
> 
> 赞同：1
> 
> 时间：2013-01-16T14:52:14.280
> 
> 标签：html, xml, xslt

我有 1 个包含我需要的所有数据的大 XML 文件。

我需要的是这样的：1 页 = 概述。在此页面上显示了一个表格。每行都以指向详细信息页面的超链接开始。

我正在寻找一种仅使用 XML、XSLT 和 HTML 的方法。没有服务器端处理。

有什么办法可以做到这一点？

现在 XML 具有 XSLT 用于在标题中指定的概述：

```
<?xml-stylesheet type="text/xsl" href="overview.xslt"?> 
```

如果我不能对多个 XSLT 文件执行此操作，有没有办法从 XSLT 中的 url 读取查询字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:33:26.277

我看到两个选项：

1.  让 XSLT 创建一个大 HTML 并隐藏除您想要显示的部分之外的所有部分。
2.  使用 JavaScript 启动不同的转换，将当前 HTML 的正文替换为转换返回的 HTML 正文。`<xsl:parameter>`您可以使用一个样式表，该样式表根据需要为每个转换提供的 a 的值采用不同的路径，或者您使用不同的样式表。

假设您有以下 XML（我们称之为`text.xml`）：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<myXml>
  <chapter id="c1">
    <heading>Heading 1</heading>
    <content>This is text of chapter one.</content>
  </chapter>
  <chapter id="c2">
    <heading>Heading 2</heading>
    <content>This is text of chapter two.</content>
  </chapter>
</myXml> 
```

然后，对于建议 1，您可以执行以下操作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="html"/>

  <xsl:template match="/">
    <html>
      <head>
        <title></title>
        <script type="text/javascript">
          function showView(id) {
            document.getElementById("dynamicStyle").innerHTML = "#" + id + "{display:inline}";
          }
        </script>
        <style type="text/css">
          .view {display:none};
        </style>
        <style type="text/css" id="dynamicStyle">
          #overview{display:inline}
        </style>
      </head>
      <body>
        <div class="view overview" id="overview">
          <h1>Overview</h1>
          <xsl:apply-templates select="myXml/chapter" mode="overview"/>
        </div>
        <xsl:apply-templates select="myXml/chapter" mode="detail"/>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="chapter" mode="overview">
    <div><a href="javascript:showView('{@id}')"><xsl:value-of select="heading"/></a></div>
  </xsl:template>

  <xsl:template match="chapter" mode="detail">
    <div class="view detail" id="{@id}">
      <div><a href="javascript:showView('overview')">Back to overview</a></div>
      <xsl:apply-templates mode="detail"/>
    </div>
  </xsl:template>

  <xsl:template match="heading" mode="detail">
    <h1><xsl:value-of select="."/></h1>
  </xsl:template>

  <xsl:template match="content" mode="detail">
    <div><xsl:value-of select="."/></div>
  </xsl:template>
</xsl:stylesheet> 
```

关键是为每个视图创建单独的 div，并通过让 JavaScript 更改 CSS 在它们之间切换。

方法 2 可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="html"/>

  <xsl:param name="view" select="'overview'"/>

  <xsl:template match="/">
    <html>
      <head>
        <title></title>
        <script type="text/javascript">
          function showView(id) {
            document.documentElement.replaceChild(transform(id).body, document.body);
          }
          function loadXML(fileName,mime) {
            var xmlHttpRequest = new XMLHttpRequest();
            xmlHttpRequest.open("GET",fileName,false);
            if(mime) xmlHttpRequest.overrideMimeType(mime);
            xmlHttpRequest.send("");
            return xmlHttpRequest.responseXML;
          }
          function transform(view) {
            var xsltProcessor = new XSLTProcessor();
            xsltProcessor.importStylesheet(loadXML('test.xsl','application/xslt+xml'));
            xsltProcessor.setParameter(null,'view',view);
            return xsltProcessor.transformToDocument(loadXML('test.xml'),document);
          }
        </script>
      </head>
      <body>
        <xsl:choose>
          <xsl:when test="$view = 'overview'">
            <div>
              <h1>Overview</h1>
              <xsl:apply-templates select="myXml/chapter" mode="overview"/>
            </div>
          </xsl:when>
          <xsl:otherwise>
            <xsl:apply-templates select="myXml/chapter[@id = $view]" mode="detail"/>
          </xsl:otherwise>
        </xsl:choose>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="chapter" mode="overview">
    <div><a href="javascript:showView('{@id}')"><xsl:value-of select="heading"/></a></div>
  </xsl:template>

  <xsl:template match="chapter" mode="detail">
    <div>
      <div><a href="javascript:showView('overview')">Back to overview</a></div>
      <xsl:apply-templates mode="detail"/>
    </div>
  </xsl:template>

  <xsl:template match="heading" mode="detail">
    <h1><xsl:value-of select="."/></h1>
  </xsl:template>

  <xsl:template match="content" mode="detail">
    <div><xsl:value-of select="."/></div>
  </xsl:template>
</xsl:stylesheet> 
```

这里的关键是使用 JavaScript 加载样式表和 XML，并使用 JavaScript 对象`XSLTProcessor`进行转换，然后替换文档的正文。在此示例中，我使用了一个具有不同参数的样式表，但您也可以加载不同的样式表。您必须`transform()`相应地调整函数，替换`test.xsl`为需要以某种方式提供的变量。

# objective-c - 难以理解语法

> ID：14361130
> 
> 赞同：1
> 
> 时间：2013-01-16T14:52:34.410
> 
> 标签：objective-c

在[教程](http://cocoadevcentral.com/d/learn_objectivec/)中有以下声明：

```
-(BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile; 
```

我将其解释为`writeToFile`方法返回`BOOL`结果。它需要2个参数。第一个是`NSString`参考。第二个是调用`atomically`并传递一个`BOOL`值的结果。

我做对了吗？

本教程继续说您像这样调用上述方法：

```
BOOL result = [myData writeToFile:@"/tmp/log.txt" atomically:NO]; 
```

这是找到。但我想知道我是否必须使用“原子地：否”

我可以做类似的事情吗

```
resultOfAtomically = atomically:NO
BOOL result = [ myData writeToFile:@"/tmp/log.txt" resultOfAtomically ]; 
```

假设我声明`resultOfAtomically`正确。

另外，前置`@`是否`"/tmp/log.txt"`意味着“给我参考而不是价值”之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:00:14.823

文中`atomically`介绍了`writeToFile:atomically:`方法的第二个参数，它不是一个单独的函数。因此，您不能简单地调用`atomically:NO`. 但是，这将是正确的：

`BOOL myBool = NO;`

`BOOL result = [myData writeToFile:@"/tmp/log.txt" atomically:myBool];`

在谈论 Objective-C 方法时，您不会将此方法称为“writeToFile”，而是将其称为“writeToFile:atomically:”。通过这种语法，您知道该方法需要两个参数（每个冒号一个）。

下面是一种思考方法声明如何分解的方法：

`-(BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile;`

`-`=定义实例方法（`+`将用于类方法）。

`(BOOL)`= 返回一个布尔值。

`write`=这种方法是关于写一些东西（没有什么魔法，只是一个友好的词选择——可能是`print`或者其他的）。

`ToFile:(NSString *)path`= 方法的第一个参数 path 是一个 NSString 指针，友好的文本“ToFile”（再次只是一个单词选择，没什么特别的）暗示我需要为该参数提供一个文件路径。

`atomically:(BOOL)useAuxiliaryFile;`= 方法的第二个参数 useAuxiliaryFile 是一个布尔值，友好的文本“原子地”（仍然没有什么特别的）暗示布尔值决定是否原子地写入文件。

# matlab - matlab中引用另一个向量的矩阵的快速列排序

> ID：14361131
> 
> 赞同：1
> 
> 时间：2013-01-16T14:52:36.383
> 
> 标签：matlab, matrix

我正在尝试在 matlab 中快速根据另一个向量值对矩阵的列进行排序。假设我有一个参考向量：

```
a = [1 8 3]; 
```

我想按行排序的矩阵

```
b =[2 3 4
    5 6 4
    1 2 1]; 
```

`a`如果排序的 a 是，我想要基于向量的结果

```
 a = [8 3 1] 
```

排序矩阵现在将是

```
b = [3 4 2 
     6 4 5
     2 1 1]; 
```

所以第一个向量的索引与列的索引相同所以我们根据向量的值对列进行排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:57:56.720

在 Matlab 中，该[`sort`函数](http://www.mathworks.com/help/matlab/ref/sort.html)返回两个变量，第一个是排序的向量/矩阵，第二个是一组索引，可以与原始数据组合以生成排序值。

```
A = [ 5 4 1 2 3 ];

[A_sorted1, idx] = sort(A);

A_sorted2 = A(idx); 
```

`A_sorted1`并且`A_sorted2`是等价的。

如果行数`b`等于元素数，`a`则可以简单地使用：

```
[~, idx] = sort(a);
b_sorted = b(idx,:); 
```

如果您想按列排序，请使用：

```
b_sorted = b(:,idx); 
```

# python - 使用lmfit在python中进行卡方最小化

> ID：14361136
> 
> 赞同：0
> 
> 时间：2013-01-16T14:52:50.393
> 
> 标签：python, chi-squared

`lmfit`我正在尝试使用 python 和模块进行多参数拟合。我一直按照[此处](http://cars9.uchicago.edu/software/python/lmfit/)显示的示例作为我的代码的基础。据我了解代码，我应该能够进行最小二乘拟合，只要我正确定义我的目标函数（给出残差）并为其提供正确的参数。

这是我目前的目标函数：

```
# Define objective function: each data point has a different
# objective function which is defined by the model method
# the objective function returns the array to be minimized
def objfunc(params,trans,sum_in,sum_out,data):
    """ model fit using branching ratios and resonance strength
        then subtract data """
    model = fit_model(params,trans,sum_in,sum_out)

    return model - data 
```

`fit_model(args*)`方法定义为

```
def fit_model(params,trans,sum_in,sum_out):
    """ model the transition based upon the input string trans
        using parameter convention for the branching """
    model = []

    # The amplitude: technically the resonance strength term
    # here it gives the number of resonant decays
    amp = params['amp'].value

    # For each transition we want to retrieve the parameter values
    # for the branching ratios and evaluate the new value for
    # the fit (of that transition). The easiest way to do this is
    # to store the braching ratios with the same notation used
    # previously, and to explicity call those values using the
    # 'params.['']value' method
    for i in range(len(trans)):

        # Employs the termvalue() method to evalueate the branching
        # and efficiency values
        model.append( str(amp * termValue(trans[i]) + amp * termValue(sum_in[i]) - amp * termValue(sum_out[i])))

    return np.array(model,dtype='float64') 
```

这给了我我期望得到的东西：`numpy.ndarray`我的数据的长度。我遇到的问题是，当我尝试最小化卡方拟合时

```
result = minimize(objfunc,params,args=(trans,sum_in,sum_out,data)) 
```

我收到错误消息：

```
File "path/chisquare.py", line 94, in <module>
    result = minimize(objfunc,params,args=(trans,sum_in,sum_out,data))
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 498, in minimize
    fitter.leastsq()
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 369, in leastsq
    lsout = scipy_leastsq(self.__residual, self.vars, **lskws)
  File "/usr/lib/python2.7/dist-packages/scipy/optimize/minpack.py", line 278, in leastsq
    raise TypeError('Improper input: N=%s must not exceed M=%s' % (n,m))
TypeError: Improper input: N=26 must not exceed M=25 
```

我试图从源代码中弄清楚这意味着什么`lmfit`，但这有点超出我的理解。有谁知道我可以如何解决这个错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:21:36.500

这个问题似乎是由于参数多于数据点造成的。检查了我的输入并解决了问题！

# python - ：概要：在狮身人面像自动模块中不起作用

> ID：14361140
> 
> 赞同：5
> 
> 时间：2013-01-16T14:53:00.133
> 
> 标签：python, python-sphinx, docutils

我正在使用 Sphinx，非常喜欢它，但它不会获取模块概要。没有错误或任何东西，只是简单......什么都没有。这是我试图自动记录的模块：

```
# vim: set fileencoding=utf-8 :
"""
.. module:: CONF
   :synopsis: Configuration module, tells where data files are.

.. moduleauthor:: Mr Anderson <mr@matrix.com>
""" 
```

这是 ReST 索引文件中的 Sphinx 指令：

```
.. automodule:: CONF
   :synopsis: 
```

我从 Sphinx 那里得到了各种其他美妙的东西，所以它对我来说通常不会坏掉。我得到的唯一可疑的事情是：`SEVERE: Duplicate ID: "module-CONF"`。一些谷歌搜索让我相信这个错误很“正常”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:05:03.770

我认为您在指令`:synopsis:`上错误地使用了该选项`automodule`。您使用此选项的方式与`automodule`您在 上的方式相同`module`。换句话说，您必须`:synopsis:`在任一指令的选项中指定概要。

通常，您使用`module`指令*或*指令，而`automodule`不是两者。这也是您收到有关重复的警告的原因。不幸的是，据我所知，如果您正在使用，则无法在文档字符串中包含概要`automodule`

因此，如果您想在没有收到警告的情况下使用自动模块和概要，我认为您必须这样做：

```
.. automodule:: CONF
   :synopsis: Configuration module, tells where data files are. 
```

然后摆脱``.. module::`src 文件本身中的指令。

我认为你拥有它的方式会起作用，但你会得到那个警告。此外，您应该从 : 中删除该`:synopsis:`选项，`automodule`而它后面没有实际的概要字符串，它对您没有任何好处，并且可能导致“空”概要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-11T18:51:32.977

按照 Bonlenfum 的解决方案，这里有一个（甚至更）简洁的示例，它在模块索引和文档字符串中打印模块指令：

```
"""
.. module:: CONF
  :synopsis: written in module index..................................newlines are
    automatically handled (still, mind the spacing)
  :platform: Windows

.. moduleauthor:: Mr Anderson <mr@matrix.com>

:synopsis: this is written in the docstrings..........................newlines are handled
  automatically handled (mind spacing) or I can force newlines with \n
  a newline character.
""" 
```

我添加了“...”来添加空间，以便该行足够长，以便 sphinx 自动在换行符上继续。模块作者仅显示在文档字符串（而不是索引）中。

这与 Sphinx 1.2 配合得很好，并[阅读了文档](https://docs.readthedocs.org/en/latest/theme.html)主题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T22:22:20.107

不确定这是否真的回答了你的问题，但也许你在“错误”的地方寻找概要。（“错误”，因为期望它出现在您的`automodule`指令所在的位置似乎很合理）。从关于[模块标记](http://sphinx-doc.org/markup/desc.html)的文档（强调我的）：

> 概要选项应该由一个描述模块目的的句子组成——它目前仅用于*全局模块索引*。

所以对于模块注释字符串：

```
"""

.. module:: CONF
  :synopsis: Configuration module, tells where data files are.
    continuation possible here... (though goes against the point of synopses...)
  :platform: Windows

""" 
```

大纲出现在模块索引中——类似于

> ## C
> 
> CONF *(Windows)* *配置模块，* ...

或者，对于模块注释字符串（注意缩进）：

```
"""

:synopsis: Configuration module, tells where data files are to.

""" 
```

将在您放入`automodule::`指令的位置呈现，但*不在*模块索引中。对我来说，样式是在成员函数中呈现参数。

作为一个有点讨厌的解决方法，您可以将这两个`:synopsis:`声明结合起来，但显然这不是很容易维护。

# r - 计算 R 中网格中每个单元格的平均值

> ID：14361148
> 
> 赞同：2
> 
> 时间：2013-01-16T14:53:12.147
> 
> 标签：r, raster, spatial-data

> **可能重复：**
> [R中的滑动窗口函数](https://stackoverflow.com/questions/9931706/sliding-window-function-in-r)

这可能是一个愚蠢的问题，但到目前为止我找不到答案。我有一个这样的数据框：

```
df <- data.frame(lat = (-10: 10),
                 lon = (-10: 10),
                 A = runif(21, 1 ,10),
                 B = runif(21, 20 ,30)) 
```

其中 lat 和 lon 是地理坐标，A 和 B 是两个连续变量。我想做的是创建一个 5 x 5 网格并计算网格每个单元格内 A 和 B 的平均值。这是我正在尝试但没有成功的方法......

```
library(raster)
library(maptools)

coordinates(df) <- ~ lat + lon
rast <- raster(ncol = 5, nrow = 5)
extent(rast) <- extent(df)
rasterize(df, rast, df$A, fun = mean) 
```

# symfony - 将 SwiftMailer 注入 symfony2 服务

> ID：14361149
> 
> 赞同：12
> 
> 时间：2013-01-16T14:53:15.580
> 
> 标签：symfony, dependency-injection, swiftmailer

我有一个扩展 UserManager 的服务，所以当我这样做时：

```
$message = \Swift_Message::newInstance()
            ->setSubject('~')
            ->setFrom('~')
            ->setTo('~')
            ->setBody('~', 'text/html');
        $this->get('mailer')->send($message); 
```

我得到错误：

```
Fatal error: Call to undefined method My\MyBundle\Service\ServiceClass::get() 
```

我知道这是因为我需要将 swiftmailer 注入这里，但是如何？（通常服务类扩展了“通用”，因此包含了快速邮件。）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T15:00:16.970

根据您使用的服务文件类型，您需要像您说的那样将其直接注入您的服务中。

XML:

```
<services>
        <service id="sample.service" class="%sample.service.class%">
            <argument type="service" id="mailer" />
        </service>
</services> 
```

YAML：

```
services:
    sample.service:
        class:     %sample.service.class%
        arguments: [@mailer] 
```

您可以像这样简单地在构造函数中获取服务。或者如果你真的想要，你可以注入`service_container`. 但这真的很脏，因为你可以只注入你需要的服务。

`service_container`仅当您需要动态服务调用时才需要注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-19T13:56:57.383

在 services.yml 中（symfony 4 示例）

```
mailer:
    class: \Swift_Mailer

myClass:
    class: x\x
    arguments:
        - "@mailer" 
```

# c# - UNC 路径似乎显着降低了文件枚举速度

> ID：14361150
> 
> 赞同：1
> 
> 时间：2013-01-16T14:53:21.530
> 
> 标签：c#, unc

我编写了一个示例应用程序来调试枚举文件的问题。

使用本地路径（例如 C:\Data\MAN）枚举目录比使用 UNC 路径（例如 \\MACHINENAME\man）枚举共享目录快得多。即使这些路径都指向本地机器上的同一个目录。

**对于 72000 个文件，这大约需要 10 秒：**

```
DirectoryInfo directoryInfo = new DirectoryInfo(@"C:\Data\MAN");
FileInfo[] fileInfoTest = directoryInfo.GetFiles("*.*", 
                                                 SearchOption.AllDirectories); 
```

**对于 72000 个文件，这大约需要 2 分钟：（**其中 \\MACHINENAME\man 是共享文件夹 C:\Data\MAN）

```
DirectoryInfo directoryInfo = new DirectoryInfo(@"\\MACHINENAME\man");
FileInfo[] fileInfoTest = directoryInfo.GetFiles("*.*", 
                                                 SearchOption.AllDirectories); 
```

**使用 UNC 路径时是否会出现这种开销？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-04T21:00:52.667

这是一个老问题，评论似乎已经到了一半，但没有理由不尝试回答这个问题。这里的文件数是问题的一部分，因为其中有 72,000 个。发生什么了？

好吧，正如[这里](https://stackoverflow.com/a/12943869/1838819)已经回答的那样，它本质上归结为在处理本地路径上的 UNC 路径时使用的不同进程之间的上下文切换，特别是调用进程和 SMB 客户端 + 服务器进程。这归结为：直接更快。如果它是本地资源，请不要通过 UNC，而且，显然，涉及的文件越多，速度就越慢。

# javascript - 未显示 10 个随机框

> ID：14361151
> 
> 赞同：1
> 
> 时间：2013-01-16T14:53:23.817
> 
> 标签：javascript, jquery

```
$(function() {
    max = 25;
    min = 1;
    var i = 0;

    do {
        var match = Math.ceil(Math.random() * (max - min )- min);

        $('td').each(function() {
            i++;
            console.log( match );   
            if (i == match) {
                $(this).addClass('active');
            }       
        })
    } while ($('td.active').length == 10);
}) 
```

我的问题是我不返回 10 个随机框，而只返回一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:55:03.813

改变

```
} while ( $('td.active').length == 10 ); 
```

到

```
} while ( $('td.active').length < 10 ); 
```

`while`!=`until`

但是，如果您少于 10 `td`，您将无限期地循环。而且它会经常破裂，因为它`i`总是会变大。

我想你想要这个：

```
$(function() {
    var max = 25; // don't forget the "var", if you don't want to declare global variables
    var min = 1;
    do {
        var match = Math.ceil(Math.random() * (max - min )- min);
        $('td').eq(match).addClass('active');
     } while ($('td.active').length < 10);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:57:38.043

试试这个：如果你确定它们至少是 10 td

```
 $(function() {
    max = 25;
    min = 1;
    var i = 0;
    var y=0;

    do {
        var match = Math.ceil(Math.random() * (max - min )- min);

        $('td').each(function() {
            i++;
            console.log( match );   
            if (i == match) {
                $(this).addClass('active');
                y++;
            }       
        })
    } while (y<10);
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:59:28.463

你没有说太多关于代码试图做什么，但除了其他建议之外，我认为你也意味着

```
var match= Math.ceil(Math.random() * (max - min )+ min); 
```

注意“+ min”而不是减号。

# wpf - 覆盖组合框样式中的选定项目以显示组合框的背景而不是灰色背景

> ID：14361153
> 
> 赞同：1
> 
> 时间：2013-01-16T14:53:26.313
> 
> 标签：wpf, xaml, binding

我在使用组合框获取自定义属性集时遇到问题。我正在使用 .Net 4.0、WPF 和 xaml 资源，用于字典中设置的类型和 app.xaml 中设置的一些画笔。我可以使用周围的“边框”技巧找到漂亮的圆角，并为我的组合框设置渐变和布局。但是，我似乎无法让组合框中的“选定项目”具有暗灰色以外的背景。我更愿意将其更改为透明并继承父边框的渐变。但是，我缺少执行此操作的属性或关系。

有谁知道如何在 xaml 中执行此操作？

图片：

![组合框当前显示的选择和选定](../Images/51b25ed79396e641189f2be771b08544.png)

代码：

字典项：

```
 <Style TargetType="{x:Type Border}">
        <Setter Property="Background" Value="{StaticResource MoneyBrush}" />
        <Setter Property="BorderBrush" Value="#071C07" />
    <Setter Property="BorderThickness" Value="3" />
    <Setter Property="CornerRadius" Value="20" />
    <Setter Property="SnapsToDevicePixels" Value="True" />
  </Style> 
```

在主 App.xaml 中刷机：

```
<LinearGradientBrush x:Key="MoneyBrush" EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#3A883A" Offset="1" />
            <GradientStop Color="#FFFFFF" Offset="0" />
            <GradientStop Color="#FF53AA75" Offset="0.50" />
            <GradientStop Color="#073307" Offset="0.95" />
        </LinearGradientBrush>
<LinearGradientBrush x:Key="FontBrush" EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="Black" Offset="0" />
            <GradientStop Color="#107810" Offset="0.50" />
            <GradientStop Color="Black" Offset="0.65" />
        </LinearGradientBrush> 
```

主窗口中的实际项目：

```
<Border Margin="5" >
                    <ComboBox Height="30" Width="170" Margin="10" x:Name="combopersons" 
                    FontSize="20"
                    ItemsSource="{Binding Path=People}"
                    DisplayMemberPath="FirstName"
                    SelectedValuePath="PersonId"
                    SelectedValue="{Binding Path=CurrentUser}"
                    Foreground="{StaticResource FontBrush}">
                    </ComboBox>
                </Border> 
```

* * *

编辑>>>

我喜欢@iltzortz 提出的解决方案，但我想要一个渐变，所以在这种情况下这会更好：

```
<ComboBox.Resources>
    <LinearGradientBrush x:Key="{x:Static SystemColors.WindowBrushKey}" >
        <GradientStop Color="#3A883A" Offset="1" />
        <GradientStop Color="#FFFFFF" Offset="0" />
        <GradientStop Color="#FF53AA75" Offset="0.50" />
        <GradientStop Color="#073307" Offset="0.95" />
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" >
        <GradientStop Color="#000000" Offset="1" />
        <GradientStop Color="#FFFFFF" Offset="0" />
    </LinearGradientBrush>
</ComboBox.Resources> 
```

编辑 2 >>>

出于某种原因，这仅适用于我在带有 Windows 7 的 Visual Studio 2012 上使用 .NET 4.0 或更高版本构建的应用程序。当我尝试在家中运行代码时，由于某种原因它不会呈现我相信这是由于Windows 8 或 Visual Studio 2010 为不同的系统值解释不同的颜色。如果您有 Windows 8 或 Visual Studio 2010，请注意这一点，因为它适用于一种环境，但不适用于另一种环境……很好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:18:54.427

以下代码似乎可以完成这项工作

```
<Grid Background="Pink">

    <ComboBox Margin="10,0" Width="100" Height="40">
        <ComboBoxItem>1</ComboBoxItem>
        <ComboBoxItem>2</ComboBoxItem>            
        <ComboBoxItem>3</ComboBoxItem>
        <ComboBox.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}" Color="Green" />
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Green" />
        </ComboBox.Resources>            
    </ComboBox>

    <TextBox VerticalAlignment="Top" Margin="10"/>
</Grid> 
```

# c# - 通过 c# 代码读取系统的附加摄像头和麦克风名称

> ID：14361156
> 
> 赞同：2
> 
> 时间：2013-01-16T14:53:37.660
> 
> 标签：c#, winforms

我需要开发一个**winform 应用程序，它从系统中读取附加的摄像头和麦克风名称，**并使用单选框显示它，以便用户可以选择附加的麦克风和摄像头，然后进入下一个发生视频会议的表单......！！

但是，我无法读取系统的附加硬件名称..请提出一些建议..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:59:03.043

有一篇关于 CodeProject 的文章可能会有所帮助 - [Retrieving Hardware Information in C#](http://www.codeproject.com/Articles/7365/Retrieving-Hardware-Information-in-C)：

> 本文将解释如何使用 WMI 访问硬件信息和属性。它不会设置硬件的属性，只会检索有关它的信息。

WMI 指的是[Windows Management Instrumentation](http://msdn.microsoft.com/en-us/library/aa394582%28VS.85%29.aspx)，大部分代码将使用[`System.Management`](http://msdn.microsoft.com/en-us/library/system.management.aspx)命名空间。

我编写的这个示例将显示您 PC 上的声音设备列表：

```
using System;
using System.Management;
using System.Management.Instrumentation;

namespace Test {
    class TestClass {
        [STAThread]
        static void Main(string[] args) {
            Console.WriteLine("Win32 SoundDevices\r\n===============================");
            ManagementObjectSearcher searcher = new ManagementObjectSearcher("Select * from Win32_SoundDevice");
            foreach (ManagementObject soundDevice in searcher.Get()) {
                Console.WriteLine("Device found: {0}\n", soundDevice.ToString());
            }
            Console.WriteLine("Search complete.");
            Console.Read();
        }
    }
} 
```

您需要查看[WMI 查询示例](http://www.activexperts.com/activmonitor/windowsmanagement/wmi/samples/)，以帮助您了解如何找到您要识别的设备。Microsoft 还有一个[WMI Code Creator 实用程序](http://www.microsoft.com/en-us/download/details.aspx?id=8572)，它可能会有所帮助：

> WMI Code Creator 工具允许您生成使用 WMI 完成管理任务的 VBScript、C# 和 VB .NET 代码，例如查询管理数据、执行 WMI 类中的方法或使用 WMI 接收事件通知。

# sql - 如何在 SQL Server 中通过联接从两个表中删除行？

> ID：14361159
> 
> 赞同：1
> 
> 时间：2013-01-16T14:53:44.550
> 
> 标签：sql, sql-server, join

`Table1.`

```
id | name
 1 | Test 
```

`Table2.`

```
id | post | table1_id
 1 | mypst| 1 
```

我需要从`Table1`where中删除一行以及table1_id=(1 is id from )中的`id=1`所有行。`Table2``Table1`

我正在尝试这个：

```
DELETE FROM Table1 
INNER JOIN Table2 ON Table2.table1_id = Table1.id AND Table1.id = 1 
```

但我收到错误：

> *关键字“INNER”附近的语法不正确。*

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:52:40.510

让我们假设您做对了，并创建了一个外键（Table2.table1_id = Table1.id）。然后你只需要`ON DELETE CASCADE`在 Table1 上进行设置。

在这种情况下，您应该做的一切是：

```
DELETE FROM Table1 WHERE id = 1 
```

……然后放松。这是数据一致性，伙计:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:01:55.983

您不应该在一个查询中从多个表中删除

```
DELETE FROM Table2 WHERE table1_id = 1;
DELETE FROM Table1 WHERE id = 1 
```

应该没事。您是否有任何具体原因希望使用 JOIN 来执行此操作？

# python - Python输出整列

> ID：14361161
> 
> 赞同：0
> 
> 时间：2013-01-16T14:53:56.490
> 
> 标签：python

使用 python 2.4，我有一个 .txt 文件，分为 3 列，每列之间有 9 个空格，这就是 x.split 的原因 - 大约 1000 行，例如：

```
$1$sda4356:[sgb1_diska5.ldlbat44.libabl]talild_0329_base.rpt                                talild_0329_base.rpt                                                                      00000000000000005062 
```

我正在使用以下代码按第 3 列（即文件大小）排序

```
fobj = open('data.txt')
data = [ x.split() for x in fobj ]
fobj.close()

from operator import itemgetter
data.sort(key=itemgetter(2), reverse=True) 
```

我想打印一整列的输出，如果可能的话，使用 Python 2.4 甚至命名它们。如果我做类似 data[1] 的事情，它只会输出第 2 行，我怎样才能让它显示第 2 列。如果我不能命名它，我会在 import csv 中看到一些东西，但我无法找出正确的命令来使用我已经排序的数据，而不是再次调用 .txt 文件。大多数都在寻找文件名，如下所示

```
with open(filename, 'r') as f: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:04:12.763

```
def getcolumn(n,data): 
    return (i[n] for i in data) # if this dosent work replace () with []

for i in getcolumn(1,data):
    print i 
```

# java - 纹理未正确显示 OpenGL

> ID：14361162
> 
> 赞同：0
> 
> 时间：2013-01-16T14:53:58.710
> 
> 标签：java, opengl, textures, jogl

我正在尝试为我正在创建的游戏菜单加载一个简单的背景纹理，但纹理显示不正确。

例如，如果我使用这种纹理：[http](http://s15.postimage.org/mqvuhq463/Super_Mario_Galazy_Background.png) ://s15.postimage.org/mqvuhq463/Super_Mario_Galazy_Background.png整个背景是蓝色的，如果我使用这种纹理：[http ://www.highresolutiontextures.com/wp-content/ uploads/2010/11/food-textures-01-bowtie-pasta-texture.jpg](http://www.highresolutiontextures.com/wp-content/uploads/2010/11/food-textures-01-bowtie-pasta-texture.jpg)整个背景是橙色的。

这是我写的代码：

```
public class Menu extends Painter
{
    public Menu(GLCanvas canvas, Animator animator, GameWindow window)
    {
        super(canvas, animator, window);
    }
    @Override
    public void display(GLAutoDrawable drawable) 
    {
        GL gl = drawable.getGL();

        drawBackground(gl);

        gl.glFlush();
    }
    private void drawBackground(GL gl)
    {
        Texture background = textureLoader.getTexture("background");

        background.enable();
        background.bind();

        gl.glBegin(GL.GL_QUADS);
        gl.glVertex2f(0f, 0f);
        gl.glVertex2f(0f, window.getHeight());
        gl.glVertex2f(window.getWidth(), window.getHeight());
        gl.glVertex2f(window.getWidth(), 0);
        gl.glEnd();

        background.disable();
    }
    @Override
    public void init(GLAutoDrawable drawable) 
    {
        GL gl = drawable.getGL();
        textureLoader = new TextureLoader("menu textures/", gl);

        gl.glMatrixMode(GL.GL_PROJECTION);
        gl.glLoadIdentity();
        // set ortho to the size of the background
        gl.glOrtho(0, 800, 800, 0, -1, 1);

        gl.glMatrixMode(GL.GL_MODELVIEW_MATRIX);
        gl.glClearColor(0f, 0f, 0f, 0f);  
        gl.glClear(GL.GL_COLOR_BUFFER_BIT);
    }
} 
```

我一点也不知道这是怎么可能的，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:02:36.433

您不提供纹理坐标。如果没有纹理坐标，所有顶点都会接收到默认的纹理坐标，即 (0,0,0,0)，即左下角。如果您查看纹理图像，您看到的颜色是每张图片左下角像素的颜色。

解决方案：提供纹理坐标。纹理坐标在 [0; 1]。

# .htaccess - .htaccess 任何域的规范重定向

> ID：14361164
> 
> 赞同：0
> 
> 时间：2013-01-16T14:54:03.737
> 
> 标签：.htaccess, mod-rewrite, redirect

所以通常的规范重定向示例是：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

我不知道如何使它更通用，所以我不必指定 example.com，它会为有问题的域做。这样做的原因是在我的本地机器上的开发模式之间切换，并且避免每次我构建一个新站点时都必须更改它！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:01:08.947

我认为这样的事情会起作用：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !^www
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这基本上只是说“如果它不以'www'开头，则将'www'放在前面并重定向。”

# php - 在 PHP 和进程之间使用命名管道有任何可预见的限制吗？

> ID：14361165
> 
> 赞同：2
> 
> 时间：2013-01-16T14:54:09.730
> 
> 标签：php, c, linux

我想编写一个 php 文件，它将命令传送到系统（但也处理标准输入，以便也可以使用交互式程序）。我已经读到这不能在 php 中完成，所以我用 C 编写了一个程序，它设置了 2 个 fifos（输入/输出）。我在以下意义上对其进行了测试：

（开放3个终端）

终端 1：./program 设置管道终端 2：cat fifo_out 终端 3：echo "ls -l" > fifo_in

这将在终端 2 中显示。我将很快在 C 程序中实现标准输入。

因此，我计划从 php 文件发送命令并返回响应（包括最终处理标准输入）。是否有任何我应该知道的“陷阱”会使这不可行？（例如 php 不能很好地处理此类程序之间的命名管道或存在超时或权​​限等？有什么建议可以避免这种陷阱吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:34:41.810

据我所知，您可以使用[`proc_open()`](http://php.net/manual/en/function.proc-open.php)双向 IO 运行程序。该文档包含一个相当全面的示例

# ios6 - segue 样式“替换”后缺少导航栏按钮项

> ID：14361169
> 
> 赞同：18
> 
> 时间：2013-01-16T14:54:21.293
> 
> 标签：ios6, uistoryboard, uistoryboardsegue, uinavigationitem

我正在开发的 iPad 应用程序使用 Storyboards 和 segues。当用户单击主视图中的不同单元格时，我试图显示不同的视图控制器。在参考了不同的教程后，所采取的步骤是 -

*   在`Storyboard`, 中`Master View Controller`，为表格视图创建了静态单元格并添加了 3 个不同的行（即单元格 1、单元格 2、单元格 3）
*   添加 a `View Controller`，选择它并附加 a`Navigation Controller`到它（`Editor`-> `Embed In`-> `Navigation Controller`）
*   从单元格 1 中`Master View`，我在`Navigation Controller`.
*   选择`Segue Style`“替换”和`Destination`“详细拆分”
*   在 tableView:didSelectRowAtIndexPath 中，添加了 [self performSegueWithIdentifier:@"NewViewController" sender:self] 来进行转换。

我看到的结果是详细视图被替换。

但导航栏没有栏按钮项`Master`。

因此，我无法单击`Master`显示包含单元格的表格的按钮，我可以从中导航到不同的视图。

我已经阅读了许多博客并看到了有关替换 segue 以解决类似问题的评论。然而，似乎没有人在使用故事板和转场时遇到过这个特定问题。

根据我的理解，使用 segues 应该可以帮助我实现我想要的。从那些尝试过这种方法的人那里，任何指向正确方向的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-17T08:47:59.700

尝试将`Segue Style`from更改`Replace`为`Push`. 它应该可以解决您的问题。

当您将 a 推入 a`UIViewController`时`UINavigationController`，它将被添加到堆栈中，您将能够向后导航：

**点击“详细信息”之前的导航控制器堆栈：**

```
Master 
```

**点击详细信息并进行更多导航后，您的导航控制器...：**

```
Master -> Detail (Navigation button is displayed) -> Some other details (Navigation button is displayed) -> And maybe some more (Navigation button is displayed) 
```

`Replace`当您像以前一样使用调用新的 segue时，`Master`将替换为`Detail`，并且您将无法返回，因为 Master 已被替换并且它不再在堆栈中。

**点击“详细信息”之前的导航控制器堆栈：**

```
Master 
```

**像您一样使用替换点击详细信息后的导航控制器：**

```
Detail (no navigation button because master was replaced and we don't have nothing more on the stack) 
```

# android - 使用 onKeyDown 和间距滚动画廊

> ID：14361170
> 
> 赞同：2
> 
> 时间：2013-01-16T14:54:21.960
> 
> 标签：android, gallery, spacing, onkeydown

我试图在按下两个按钮时为画廊滚动设置动画：

```
gallery.onKeyDown(KeyEvent.KEYCODE_DPAD_LEFT, new KeyEvent(0, 0)) 
```

或者

```
gallery.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, new KeyEvent(0, 0)) 
```

虽然在 Galaxy Nexus S 上运行良好，但在 Galaxy Note 上运行良好。

我读过这个：

[Android：子类库不会通过 onKeyDown 事件滚动](https://stackoverflow.com/questions/4801700/android-sub-class-gallery-doesnt-scroll-by-onkeydown-event)

解决方法是删除图库中的间距。但是，我需要保留它。有什么诀窍吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T13:11:00.280

它不起作用，因为画廊不知道下一个视图的位置，它还不可见。您需要滚动以克服间距，然后视图变得可见，您可以使用 onKeyDown。

看看这个[Setting any value for Gallery spacing 将禁用 onKeyEvent](https://stackoverflow.com/questions/5027205/setting-any-value-for-gallery-spacing-will-disable-onkeyevent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T08:05:16.883

我通过使用负数 -1 作为方法 setSpacing() 的参数解决了这个问题。这是**setSpacing(-1)**

# r - 我可以获得 R 浮点数的字节表示吗？

> ID：14361172
> 
> 赞同：9
> 
> 时间：2013-01-16T14:54:29.573
> 
> 标签：r, floating-point

我正在尝试读取具有浮点值的复杂数据文件。已经提供了一些处理这种格式（Met Office PP 文件）的 C 代码，并且它做了很多位旋转和交换。它不起作用。它非常正确，就像数据的大小一样，但是返回矩阵中的数值是荒谬的，有 NaN 和 1e38 和 -1e38 等值自由散布。

但是，我有一个二进制 exe（“convsh”）可以将这些转换为 netCDF，并且 netCDF 看起来不错 - 漂亮的旋涡风速图。

我在想的是 PP 文件的字节被以错误的顺序读取。如果我可以将 netCDF 数据中正确返回的浮点数的字节与从 C 代码错误返回的浮点数中的字节进行比较，那么我可能会找出正确的交换页。

那么是否有一个普通的 R 函数来转储浮点数的四个（或八个？）字节？就像是：

```
> as.bytes(pi)
[1] 23 54 163 73 99 00 12 45 # made up values 
```

搜索“bytes”、“float”和“binary”没有帮助。

它在 C 中是微不足道的，我可能在我写这个的时候就写了它......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T15:01:02.237

**rdyncall**可能会给你你正在寻找的东西：

```
library(rdyncall)
as.floatraw(pi)
# [1] db 0f 49 40
# attr(,"class")
# [1] "floatraw" 
```

或者也许`writeBin(pi, raw(8))`？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T14:57:31.973

是的，这*必须*存在于序列化代码中，因为 R 很乐意通过网络发送内容，同时也考虑字节序。您是否看过例如 Rserve 使用它，或者摘要如何将 char 表示传递给选择的哈希函数？

快速浏览后`digest.R`：

```
R> serialize(pi, connection=NULL, ascii=TRUE)
 [1] 41 0a 32 0a 31 33 34 39 31 34 0a 31 33 31 38 34 30 0a
[19] 31 34 0a 31 0a 33 2e 31 34 31 35 39 32 36 35 33 35 38
[37] 39 37 39 33 0a 
```

和

```
R> serialize(pi, connection=NULL, ascii=FALSE)
 [1] 58 0a 00 00 00 02 00 02 0f 02 00 02 03 00 00 00 00 0e
[19] 00 00 00 01 40 09 21 fb 54 44 2d 18
R> 
```

这可能会让你继续前进。

想一想，这包括标题元数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T18:45:00.237

**mcga**包（机器编码遗传算法）包括一些用于字节到双精度和双精度到字节转换的函数。为了处理 pi 的字节，您可以使用 DoubleToBytes，例如：

```
> DoubleToBytes(pi) 
```

[1](https://cran.r-project.org/web/packages/mcga/index.html) 24 45 68 84 251 33 9 64

为了再次将字节转换为双精度，可以使用 BytesToDouble() 代替：

```
> BytesToDouble(c(24,45,68,84,251,33,9,64)) 
```

[1](https://cran.r-project.org/web/packages/mcga/index.html) 3.141593

链接：

[mcga 的 CRAN 页面](https://cran.r-project.org/web/packages/mcga/index.html)

# php - 根据第一个表的值（不同的数据库）获取另一个表的值

> ID：14361173
> 
> 赞同：0
> 
> 时间：2013-01-16T14:54:32.620
> 
> 标签：php, mysql

我有一个我正在尝试解决的问题，但我看不出有什么好方法：

我有一张国家/地区允许使用的名称表。因此，例如：

```
id name country 
1  John   uk
2  John   us
3  Carlos mx 
```

我还有另一个表格，告诉我这个名字出现在一个国家的每份报纸上的次数：

```
id name country newspaper_id count
1  John   uk       3           10
2  John   uk       4           5
3  John   us       10          6 
```

我需要的是，对于我要查找的列表中的每个国家（例如英国、美国和澳大利亚），都有一份姓名列表以及它们在报纸上出现的次数。

例如，在这种情况下，我需要有某种数据结构：

```
-> John appears 15 times in UK
-> John appears 6 times in US
-> John is not a name of AU (because is not defined in the first table) 
```

我看不到如何获取第一个表并使用它来获取第二个表的结果（它在另一个数据库中，因此我不能做 JOIN）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:03:56.393

我只会做一个完全独立的 SQL SELECT，所以首先获取国家/地区允许的名称，然后做一段时间并从每个名称中获取计数。创建一个结果数组以在代码中进一步使用。

您不必对所有事情都使用联接。

# java - 什么时候在 ZK 生命周期中组成一个组件？

> ID：14361185
> 
> 赞同：3
> 
> 时间：2013-01-16T14:55:05.957
> 
> 标签：java, zk

**问题：**
在 ZK 中，当使用自定义组件时，在生命周期中构建组件内容的最佳时间是什么时候（任意复杂）。也就是说，我们什么时候可以安全地假设我们拥有视图中的所有数据，但无需等待太久。

**详细信息：**
在 ZK 中，我可以创建一个自定义组件`MyCoolComponent`：

```
package my.package;

public class MyCoolComponent extends Div {

  private String title;

  public MyCoolComponent() {
    Selectors.wireVariables(this, this, Div.class);
    Selectors.wireComponents(this, this, false);
    Selectors.wireEventListeners(this, this);
  }

  public String getTitle() {
    return title;
  }

  public void setTitle(String title) {
    this.title = title;
  }

  // When is the correct time to call this function?
  public void initializeComponent() {
    appendChild(new Label(title));
    // arbitrarily complex initialization follows ..
  }

} 
```

我可以在 zul 文件中使用我的自定义组件，如下所示：

```
<?component name="coolcomponent" class="my.package.MyCoolComponent" ?>
<zk>
  <coolcomponent id="cool" height="200px" title="Sean is Cool" />
</zk> 
```

现在，当`Component`使用它时，我想添加 children `Components`，例如，通过调用 in 中的`initializeComponent`函数`MyCoolComponent`。

在我们的世界中，我们被教导在函数的生命周期阶段`Composers`处理所有此类工作。像这样的创造者也是如此吗？如果是这样，最好的（阅读：高效、安全、可读）方法是什么？我觉得为活动附加一个很草率。有什么想法吗？`After Compose`[`doAfterCompose`](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/select/SelectorComposer.html#doAfterCompose%28T%29)`Component``@Listen``onRender`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:31:50.653

据我了解[zk docs](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/UI%20Composing/Composite%20Component#Implement_a_Java_Class)`doAfterCompose`，
如果您调用示例中的方法，则构造函数就像`Selectors`。

但你喜欢做的可能是

```
public void setTitle(String title) {
  this.title = title;
    if(label != null)
      appendChild(new Label(title));
    else
      lebel.setValue(title);
} 
```

zk 生命周期是，当进入一个 zul 组件时`<MyComponent>`
，它会调用构造函数，如果有类似`title="Sean is Cool"`
的东西它会调用 set 方法，如果这一切都完成了，`Components`它会创建页面。
这对你有帮助吗？

## 编辑

对于更复杂的结构，有两种选择

1.  使用您需要的结构创建一个 zul 文件并使用[Executions#CreateComponent](http://www.zkoss.org/javadoc/6.5.1/zk/org/zkoss/zk/ui/Executions.html#createComponents%28java.lang.String,%20org.zkoss.zk.ui.Component,%20java.util.Map%29)或
2.  创建自己的[zk-Component-Widget](http://books.zkoss.org/wiki/ZK%20Component%20Development%20Essentials/Creating%20a%20simple%20ZK%20Component)包

什么是适合您的目的？

*   选择 1\. 如果您有想要（重）使用的 zk 组件结构。
    论坛帖子的结构可能是这样的。
*   选择 2\. 如果您想
    添加特殊功能，
    优化/定制客户端-服务器通信，
    为 JavaScript 库编写绑定，
    在客户端保持较小的内存大小，（即使对于复杂的结构，您只需要一个类）
    ...。
    自己的组件肯定有很多好处，
    但是实现它们需要时间。

那么生命周期呢？对于选项 2，只需阅读文档。
对于选项 1，在事件侦听器/处理程序中`doAfterCompose`或在事件侦听器/处理程序中执行此操作。

好的，这是选项 1 的示例。

主要祖尔

```
<zk>
  ...
  <div id="menu" use="myPkg.MyMenu" item1="omg" />
  ...
</zk> 
```

我的菜单定义

```
<vbox>
  <label id="item1" value="${arg.item1}">
  ...
</vbox> 
```

爪哇

```
class MyMenu extends Div {
  String item1;
  ...
  public void setItem1(String x){
    item1 = x;
  }

  // onCreate is fired before data is send to the client,
  // but after the Component and all it children exists.
  public void onCreate(CreateEvent ev){
    Executions.CreateComponents("MenuDef.zul", this, new HashMap<String, Object>(){{
        put("item1", item1);
    }});
  }
} 
```

你也可以从你的主 zul 中调用`Executions.CreateComponents`，`doAfterCompose`
但当然如果你想
在 zul 中设置值，这种`onCreate`方式会更好。
在`onCreate()`工作中通过 java 添加组件也很好，
但是如果你在 zul 中写下东西，它会更加可修改/可维护。

现在让你用一句话来提问：
最好的时间是初始化你的`Components`is in`doAfterCompose`并列出到`Create Event`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:13:23.880

在 ZK 中，子节点会先于其父节点创建，您可以在子节点的 onCreate 事件触发时设置值，或者在 MyCoolDiv 的构造函数中添加监听 onCreate 事件的事件监听器，然后在该监听器中调用 init。

有关更多信息，请参阅 zk fiddle [Div 测试中的示例](http://zkfiddle.org/sample/3cs2gi5/1-Div-test)

# load-balancing - haproxy 有重量支持吗

> ID：14361190
> 
> 赞同：0
> 
> 时间：2013-01-16T14:55:13.713
> 
> 标签：load-balancing, haproxy

我们正在设置一个新服务器，其中包含我们以前安装的一些不同配置和软件版本。该服务器将连接到我们的 haproxy 服务器，但我想限制/减少流向新服务器的流量。是否可以在 haproxy 中向服务器添加权重值以实现此目的，或者其他一些配置设置以实现相同的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:44:01.417

是的，它确实有权重。

```
server smtp01 smtp01.example.com weight 45 check inter 15000
server smtp02 smtp02.example.com weight 45 check inter 15000
server smtp03 smtp03.example.com weight 10 check inter 15000 
```

该示例适用于 tcp 代理。这意味着当使用 roundrubin 余额时，它将发送 100 个 smtp 连接中的 100 个。在问这样的问题之前，你应该谷歌它。

# java - 将日期时间转换为字符串，错误的时间

> ID：14361191
> 
> 赞同：6
> 
> 时间：2013-01-16T14:55:16.890
> 
> 标签：java, android, datetime, format

我在我的android应用程序（java）中这样做：

```
String sdt_ = DateFormat.format("yyyyMMdd  HH:mm", dt_).toString(); 
```

但我得到了这个

```
01-16 14:31:13.308: D/ThS(25810): dt_ = Wed Jan 16 13:28:00 GMT+00:00 2013
01-16 14:31:23.758: D/ThS(25810): sdt_ = 20130116  HH:28 
```

如果我将 HH 更改为 hh 我会得到这个

```
sdt_ = 20130116  01:28 
```

**但我需要这个**

```
sdt_ = 20130116  13:28 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T15:02:41.773

我不知道，你的代码有什么问题，但这段代码对我有用：

```
DateFormat df = new SimpleDateFormat("yyyyMMdd  HH:mm");
String sdt = df.format(new Date(System.currentTimeMillis()));
System.out.println(sdt); 
```

编辑：

后来我发现你的原始代码应该适用于此：

```
String sdt_ = DateFormat.format("yyyyMMdd  kk:mm", dt_).toString(); 
```

显然， android.text.format.DateFormat 不使用 'H' 约束并使用 'k' 代替它！有关详细信息，请参阅此问题：[How to set 24-hours format for date on java?](https://stackoverflow.com/questions/8907509/how-to-set-24-hours-format-for-date-on-java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T15:02:00.203

这将为您完成：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd  HH:mm", Locale.getDefault());
String sdt_ = sdf.format(dt_); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T15:11:34.210

你在你的`SimpleDateFormat`模式中使用了 hh 。那是 12 小时制。使用 kk 代替，它以 24 小时格式为您提供一天中的小时数。参见[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

# c# - 在c#中将消息框列表添加到资源文件中

> ID：14361194
> 
> 赞同：1
> 
> 时间：2013-01-16T14:55:24.410
> 
> 标签：c#

我已经用我的 try catch 和额外的消息框编写了我的代码，但是现在我必须将消息框放入资源文件中，我该怎么做？

这是我的代码：

```
 public void btnUpload_Click(object sender, EventArgs e)
    {
        try
        {
            // in the filepath variable we are going to put the path file that we browsed.
            filepath = txtPath.Text;
            if (filepath == string.Empty)
            {
                MessageBox.Show("No file selected. Click browse and select your designated file.");
            }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:01:33.760

您可以使用设计器 ( `Resources.resx`) 将这些消息作为字符串添加到主应用程序资源文件中，然后使用 Properties 命名空间访问它们。假设您添加以下内容：

```
ErrorNoFile | "No file selected. Click browse and select your designated file." 
```

你可以这样称呼它：

```
MessageBox.Show(Properties.Resources.ErrorNoFile); 
```

如果你修改了资源文件中的条目名称，它会自动重构，至少在我正在使用的 VS2012 中是这样。仅当您想将这些消息保存在单独的资源中时，实例化 a`ResourceManager`才是好的，否则对我来说它看起来有点过头了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:58:46.750

```
// Create a resource manager to retrieve resources.
ResourceManager rm = new ResourceManager("items", Assembly.GetExecutingAssembly());

// Retrieve the value of the string resource named "filepath".
// The resource manager will retrieve the value of the  
// localized resource using the caller's current culture setting.

public void btnUpload_Click(object sender, EventArgs e)
    {
        try
        {
            // in the filepath variable we are going to put the path file that we browsed.
            filepath = txtPath.Text;
            if (filepath == string.Empty)
            {
                String str = rm.GetString("welcome");
                MessageBox.Show(str);
            }
       } 
```

# java - 单元测试问题中的静态 java HashMap 并发

> ID：14361197
> 
> 赞同：1
> 
> 时间：2013-01-16T14:55:54.537
> 
> 标签：java, unit-testing, concurrency, hashmap

我有一个类（我们称之为 XClass），它有一个方法（我们称之为 xMethod），我正在测试它。它还包含一个：

```
private static Map<String, String> map = new HashMap<String, String>(); 
```

在我的单元测试设置方法中，我有：

```
ReflectionTestUtils.setField(xClass, "map", map, null); 
```

在测试方法中，我创建了几个（在我的情况下为 8 个）线程。他们的 run 方法调用 xClass.xMethod。此方法更改静态地图变量。方法 xMethod 应该调用 map.containsKey() map.get() 和 map.put() 8 次。它不会做任何删除。此方法也不会创建任何新线程，因此一旦线程使用 xMethod 完成，就不应更改映射。我等待所有线程完成（通常或异常）。比我查地图

```
int mapSize = map.size();
assertEquals("map:" + map, 8, mapSize); 
```

它在这里失败并显示以下消息：

> java.lang.AssertionError: map:{3=x1, 2=x2, 1=x3, 7=x4, 6=x5, 5=x6, 4=x7, 8=x8} 预期：<8> 但是是：< 7>

我通过使用 ConcurrentHashMap 解决了这个问题，但我仍然对这个问题感到困惑。**在所有 8 个线程完成后，地图怎么可能表现得很奇怪（size() 返回 7 但 toString() 打印 8 个实体）？**如果有 7 个实体并且 size() 方法给出 7 个，我会理解的，但地图中有 8 个实体。这怎么可能？！

顺便说一句，我通过以下几种方式检查了线程的终止：
1\. 检查 Thread.State.TERMINATED。
2.我在方法返回之前打印了一条简单消息，在线程完成后打印了一条简单消息（并检查了没有抛出异常。8条消息总是在第9条之前写入（在线程“完成”后的测试中）。
3.甚至做了一个简单的线程，在run方法中包含以下逻辑：

```
 public void run() {
                try {
                        obj = xClass.xMethod();
                } catch (Exception e) {
                        exc = e;
                }
                finished = true;
        } 
```

比我只会无限循环，直到所有线程都完成== true。

**所有这些都意味着在我继续断言和检查映射之前线程已经完成。那么，map.size() 是否有可能返回 7 和 map.toString() 返回 8 个实体？**

亲切的问候，
暴君

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T14:58:23.347

通过同时改变地图，您破坏了其内部不变量，并且您正在观察未指定和不可预测的行为，这是预期的结果。

# haml - 客户端 MVC：如何在不同引擎中最好地处理相同的模板

> ID：14361199
> 
> 赞同：1
> 
> 时间：2013-01-16T14:55:57.710
> 
> 标签：haml, client-side, erb, handlebars.js, mustache

我最近一直在试验一种被广泛推荐的 MVC 客户端框架（在本例中为 Backbone）。我觉得它很好，但我有一个问题：假设我正在构建一个内容列表，我想在使用客户端渲染的浏览器上呈现它，但也想让搜索引擎可用，而搜索引擎不运行 javascript。这意味着，我还必须在服务器端渲染东西。现在，假设我正在使用 Handlebars.js，它的模板语言继承自 mustache。一切都很好。但在服务器上，我使用的是 ERB（或 HAML，等等）。这意味着，我必须支持同一模板的多个版本。对于模板超出列表元素 4 行代码的情况，这是无法维护的。大平台是如何解决这个问题的？

# maven - 依赖项：程序集插件的构建类路径

> ID：14361200
> 
> 赞同：1
> 
> 时间：2013-01-16T14:55:58.623
> 
> 标签：maven, maven-assembly-plugin, maven-dependency-plugin

是否可以使用 dependency:build-classpath 构建一个类路径字符串并将其以某种方式传递给程序集插件，以便它可以用于替换过滤文件中的变量？

最好的问候，尤金。

# objective-c - Xcode：存储不再使用的旧类、代码和文件的位置

> ID：14361205
> 
> 赞同：0
> 
> 时间：2013-01-16T14:56:17.420
> 
> 标签：objective-c, xcode, svn, version-control

您将不再在当前项目中使用的旧类和文件存储在哪里？

我有很多类和文件，它们不再需要，但我想保留在某个地方，以防以后需要重用一些代码。

目前，我只是将代码复制并粘贴到一个名为 Code Collector Pro 的工具中。

但是，由于这似乎不是存储旧代码最优雅的方式，所以我想问您：您如何保存旧代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:09:22.053

如果您正在谈论您可能经常使用的方便的代码片段，我将它们存储在 Xcode 的代码片段库中（只需将选定的代码拖入以创建片段。）

不过，一般来说，我会删除未使用的代码。如果我再次需要它，它将在我的版本控制系统中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:20:40.227

我肯定会使用版本控制系统（我最熟悉 Subversion，但现在开始使用 Git）。如果这是值得保留的代码，那么随着时间的推移，您可能会在多个项目中使用和修改它。您将希望能够查看更改的历史记录，比较您在项目 A 和项目 B 中使用它的不同方式，并维护注释以帮助刷新您的记忆，并在您尝试查找时帮助进行关键字搜索你记得两年前使用的那段代码。

您可以设置存储库，但对您的工作有意义 - 按项目、按代码类型等。

我不熟悉 Code Collector Pro - 如果它作为版本控制系统的 GUI 工作，它可能适合你正在做的事情。

# xaml - 将系统颜色附加到 LinearGradientBrush

> ID：14361209
> 
> 赞同：1
> 
> 时间：2013-01-16T14:56:31.750
> 
> 标签：xaml, windows-phone-8, windows-phone, gradient, lineargradientbrush

在我的应用程序中，我想创建一个`GradientStop`带有系统颜色的渐变线，我正在尝试这样做：

```
<UserControl.Resources>
    <Style x:Key="Divider" TargetType="Rectangle">
        <Setter Property="Height" Value="2" />
        <Setter Property="Fill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="{StaticResource PhoneChromeBrush}" Offset="0.0" />
                    <GradientStop Color="{StaticResource PhoneInverseBackgroundBrush}" Offset="1.0" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources> 
```

但是当我尝试编译项目时，出现以下错误：

```
A first chance exception of type 'System.Windows.Markup.XamlParseException' occurred in System.Windows.ni.dll
An exception of type 'System.Windows.Markup.XamlParseException' occurred in System.Windows.ni.dll but was not handled in user code 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:43:05.667

`GradientStop.Color`需要颜色，而不是画笔。使用`PhoneChromeColor`and`PhoneInverseBackgroundColor`代替：

```
<UserControl.Resources>
    <Style x:Key="Divider" TargetType="Rectangle">
        <Setter Property="Height" Value="2" />
        <Setter Property="Fill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="{StaticResource PhoneChromeColor}" Offset="0.0" />
                    <GradientStop Color="{StaticResource PhoneInverseBackgroundColor}" Offset="1.0" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:06:20.850

我不确定，但似乎您可能将静态颜色设置为画笔。很难说，因为您从未将代码发布到“PhoneChromeBrush”或“PhoneInverseBackgroundBrush”的静态资源中。但是您正在使用这些设置渐变停止，如果它们本身就是可能破坏您的代码的渐变。通常你为渐变保留“画笔”，所以我不确定：

你能不能做这样的事情：

```
<UserControl.Resources>

<LinearGradientBrush x:Key="MoneyBrush" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#3A883A" Offset="1" />
                <GradientStop Color="#FFFFFF" Offset="0" />
                <GradientStop Color="#FF53AA75" Offset="0.50" />
                <GradientStop Color="#073307" Offset="0.95" />
            </LinearGradientBrush>
        <Style x:Key="Divider" TargetType="Rectangle">
            <Setter Property="Height" Value="2" />
            <Setter Property="Fill" Value="{StaticResource MoneyBrush}"/>
        </Style>
    </UserControl.Resources> 
```

# jquery - jQuery - 选项卡，使用 url 加载 ajax 内容

> ID：14361211
> 
> 赞同：10
> 
> 时间：2013-01-16T14:56:36.133
> 
> 标签：jquery, ajax, tabs

所以我的脚本看起来像这样

```
function() {
    $( "#tabs" ).tabs();
});

function Wczytaj(link, div_id, parametr1, parametr2, parametr3)
{
   $.ajax(link, { data: { par1: parametr1, par2: parametr2, par3: parametr3 },
   type: "post",
     success: function(data) {
       $('#'+div_id).fadeOut("medium", function(){
       $(this).append(data);
      $('#'+div_id).fadeIn("medium");
     });
  }
 });
} 
```

```
<div id="tabs">
    <ul>
        <li><a href="#id1" onClick="Wczytaj('trouble2.php','id1','null','null','null');">My id 1</a></li>
        <li><a href="#id2" onClick="Wczytaj('trouble2.php?action=lista','id2','null','null','null');">My id 2</a></li>
        <li><a href="#id3" onClick="Wczytaj('troubl2.php?action=old','id3','null','null','null');">My id3</a></li>
    </ul>

    <div id="id1"></div>
    <div id="id2"></div>
    <div id="id3"></div>
</div> 
```

它可以正常工作，但是我还想使用 URL 地址来加载 div 内容，例如，`http://myurl.com/page.php#id2`应该加载带有选定选项卡的页面- 它可以工作，但由于属性`id2`，div 是空的。`onClick`如何解决？

我为我的英语道歉

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T15:11:43.757

您不需要使用自己的函数将 AJAX 加载到选项卡中，jQuery 可以为您完成。只需将 设置`href`为 URL，不要添加`<div>`s。

```
<div id="tabs">
    <ul>
        <li><a href="trouble2.php">My id 1</a></li>
        <li><a href="trouble2.php?action=lista">My id 2</a></li>
        <li><a href="trouble2.php?action=old">My id3</a></li>
    </ul>
</div> 
```

jQuery 将制作标签，并通过 AJAX*自动*加载页面。请参阅此处的文档：http: [//jqueryui.com/tabs/#ajax](http://jqueryui.com/tabs/#ajax)

它也会`<div>`为你做的。在示例中，它们被命名为`ui-tabs-X`，其中`X`是选项卡索引。因此，`http://myurl.com/page.php#ui-tabs-2`应该在打开第二个选项卡的情况下加载页面。

在这里查看 jQuery 的演示：http: [//jqueryui.com/resources/demos/tabs/ajax.html#ui-tabs-2](http://jqueryui.com/resources/demos/tabs/ajax.html#ui-tabs-2)

**编辑**：如果你想在远程选项卡加载之前或之后运行一个函数，jQuery UI 提供了[`tabsbeforeload`](http://api.jqueryui.com/tabs/#event-beforeLoad)和[`tabsload`](http://api.jqueryui.com/tabs/#event-load)事件。

创建选项卡时可以绑定它们：

```
$('#tabs').tabs({
    beforeLoad: function(event, ui){
        alert('loading');
    },
    load: function(event, ui){
        alert('loaded');
    }
}); 
```

或者他们可以在之后绑定：

```
$('#tabs').on('tabsbeforeload', function(event, ui){
    alert('loading');
});

$('#tabs').on('tabsload', function(event, ui){
    alert('loaded');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-30T11:24:17.727

在 Jquery 中加载选项卡 ajax 内容之前重置 href url：

```
$( "#pending_recs" ).tabs({
    beforeLoad: function( event, ui ) {
        var filter_url = get_url();
        var url_str = site_url+'/admin/pending_recs/'+filter_url+"/0";

        $("#pending_recs .ui-tabs-nav .ui-state-active a").attr('href',url_str);

        ui.panel.html('<div class="loading">Loading...</div>');

        ui.jqXHR.error(function() {
            ui.panel.html('<div align="center"><p>Unable to load the content, Please <a href="javascript:void(0)" onclick="return load_contents();">Click here to Reload</a>.</p></div>');
        });
    }
    ,load:function( event, ui ) { /* After page load*/  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:10:16.777

如果您只是将`href`每个选项卡链接的属性设置为您应该加载的 ajax URL，它应该可以工作。

如果您不想这样做，请摆脱这些`onClick`属性。问题在于，当页面加载触发器以选择特定选项卡时，例如`#id2`在绑定单击元素之前发生。您需要在此之前绑定点击处理程序，并在片段选择相关选项卡时调用相应的处理程序。

# android - 在 OSX 上使用 Make 编译 Android

> ID：14361217
> 
> 赞同：2
> 
> 时间：2013-01-16T14:56:43.810
> 
> 标签：android, gcc, android-ndk, makefile

公平警告我对 GCC 开发有些陌生。

我目前正在尝试将 Box2D 的个人端口移植到 android（技术臂）。我创建了一个独立的工具链，导出以下....

> 导出 PATH=/tmp/my-android-toolchain/bin:$PATH
> 
> 导出 CC=arm-linux-androideabi-gcc
> 
> 导出 CXX=arm-linux-androideabi-g++

然后我运行 Make，一切“似乎”运行良好，但是，最后我看到......

> /private/tmp/my-toolchain/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld：错误： bin/Debug/ **libBox2D.a：没有存档符号表（运行 ranlib）** /private/tmp/my-toolchain/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: obj/调试/HelloWorld/Helloworld.o: 在函数 main:../../HelloWorld/Helloworld.cpp:38: 错误: 未定义引用 'b2World::b2World(b2Vec2 const&)' /private/tmp/my-toolchain/ bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: obj/Debug/HelloWorld/Helloworld.o: 在函数 main:../../HelloWorld/Helloworld.cpp:47: 错误：未定义引用 'b2World::CreateBody(b2BodyDef const*)' /private/tmp/my-toolchain/bin/../lib/gcc /arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: obj/Debug/HelloWorld/Helloworld.o: 在函数 main:../.. /HelloWorld/Helloworld.cpp:53：错误：未定义对 'b2PolygonShape::SetAsBox(float, float)' 的引用

如果我打开一个新终端（基本上是终止导出）并删除 bin 和 obj 文件夹，一切编译正常。一个快速的谷歌搜索表明这可能与使用 llvm 编译器而不是 GCC 相关（尽管我认为这不太可能）。独立工具链文档中有以下关于 llvm 的说明...

> 如果您愿意，添加 --llvm-version=3.1 以同时复制 clang/llvm 3.1。

我应该添加llvm吗？这是仿生不同的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T15:03:04.900

您可能使用的是 OSX 版本的 ar。从您的日志中无法确定。尝试设置`export AR=arm-linux-androideabi-ar`

# this - 与“这个”相反

> ID：14361224
> 
> 赞同：1
> 
> 时间：2013-01-16T14:57:16.733
> 
> 标签：this, infowindow

这是在谷歌地图上打开信息窗口的命令。

```
google.maps.event.addListener(this, 'click', function () {
        open(map, this);
}); 
```

它说打开的地方：

```
open(map, this); 
```

显然，它为这个标记打开了信息窗口，但是我可以使用相反的功能来确保所有其他标记信息窗口都关闭了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:32:13.693

只需制作一个 InfoWindow，而不是为每个标记创建一个新的。如果您为新标记打开信息窗口，它将从旧标记中删除。在周围范围内（例如全局）：

```
 var myInfo = new google.maps.InfoWindow(...); 
```

在添加标记的代码中：

```
 google.maps.event.addListener(this, 'click', function () {
      myInfo.setContent(...); //set marker specific content
      myInfo.open(map, this);
    }); 
```

# c++ - 增加浮点值

> ID：14361225
> 
> 赞同：0
> 
> 时间：2013-01-16T14:57:30.843
> 
> 标签：c++, c, floating-accuracy

> **可能重复：**
> [浮点不准确示例](https://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples)

我在 C/C++ 中的 WHILE 循环中有以下行：

```
while(...)
{
    x = x + float(0.1); // x is a float type. Is the cast necessary?
} 
```

x 从 0 开始。问题是，在我的第一个循环之后，x = 0.1。这很酷。在我的第二个循环之后，x = 0.2。那真好;那真甜。但是，在我的第三个循环之后，x = 0.3000001。那不行。我希望它的值为 0.3，而不是 0.3000001。可以做到吗？我循环错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:59:28.310

浮点不是那样工作的，在任何两个实数之间有无限多个实数，并且只有有限数量的位，这意味着在几乎所有情况下，浮点表示都是近似的。阅读此[链接](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:07:18.057

像这样的代码：

```
for (int i = 0;… ; ++i)
{
    float x = i / 10.f;
    …
} 
```

将导致`x`每次迭代中的`float`值是最接近 i/10 的值。它通常不会是精确的，因为 i/10 的精确值通常无法在`float`.

对于`double`，将定义更改为：

```
 double x = i / 10.; 
```

这将导致更精细的`x`，因此它通常会更接近 i/10。但是，它通常仍然不会完全是 i/10。

如果您确实需要 i/10，则应进一步解释您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T14:59:03.047

这不是循环，而是浮点数在内存中的表示方式。您不会期望**所有**实数都可以直接用有限的字节数表示，对吧？

A`0.3`不能完全由 a 表示`float`。尝试 a `double`（不是说它会起作用，它可能不会，但偏移量会更低）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T15:01:00.003

这是对浮点数的常见误解。`0.3`可能无法用 32 位或 64 位二进制浮点精确表示。很多数字不能完全表示。忽略不必要的语法，您的循环运行良好。

```
while (...)
{
    x += 0.1f; /* this will do just fine in C++ and C */
} 
```

如果这没有意义，请考虑存在无限数量的浮点数的事实......只有有限数量的位来描述它们。

无论哪种方式，如果您需要*精确的结果*，您需要使用适当精度的小数类型。不过好消息是，[除非您在计算金钱，否则您可能不需要精确的结果](https://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples)（即使您认为自己需要）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T14:58:53.017

在这种情况下不需要演员表

```
float x;
x = x + float(0.1); 
```

你可以简单地写

```
x+= 0.1 
```

# android - 如何将项目添加到 Android Build？

> ID：14361228
> 
> 赞同：-3
> 
> 时间：2013-01-16T14:57:36.797
> 
> 标签：android, recursion, build, makefile, gnu

我在构建 Android ROM（galaxys2att，姜饼）时遇到问题。我决定是时候更聪明地处理 makefile 了。所以我创建了一个简单的测试项目来玩。但它**没有**被编译。这是我所做的：

1 我在可构建模块下创建了一个目录（“ *myproject/* ”）（我使用了“ *Mms/* ”，但其他人也有同样的问题）。
2 我`Android.mk`在该目录中创建包含

> 你好：
> 
> ```
>  echo "Hello from myproject" 
> ```

（我在 hello: 和 echo: 页面编辑器之间没有空行添加了这些）

3 我`mm`在“ *Mms/* ”目录下运行。

Mms 和其他子项目已编译但没有 myproject 的证据。

Mms 中的 Android.mk 包含的行 `include $(call all-makefiles-under, $(LOCAL_PATH))`

当然我`envsetup.sh`本来是跑的。
我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:31:44.200

在 Android NDK 中，有一些文档位于`.../docs/ANDROID-MK.html`. 不幸的是，除了查看现有的 makefile 之外，没有太多其他文档可供查找。构建共享库的最低`Android.mk`要求，可能如下所示

```
# "initialize" Makefile
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

# setup some variables
LOCAL_MODULE    := hello-jni
LOCAL_SRC_FILES := hello-jni.c

# do the build
include $(BUILD_SHARED_LIBRARY) 
```

An`Android.mk`不像普通的 Makefile。您有一个样板，定义子 makefile 中需要的一些变量，然后通过包含预定义的 Android makefile 来完成工作。

`BUILD_SHARED_LIBRARY`，例如，定义`build/core/build-all.mk`为

```
BUILD_SHARED_LIBRARY := $(BUILD_SYSTEM)/build-shared-library.mk 
```

它本身定义并检查一些 make 变量，然后包含`$(BUILD_SYSTEM)/build-module.mk`，依此类推。

在 build-all.mk 中，还定义了其他变量，例如`BUILD_HOST_EXECUTABLE`或`BUILD_STATIC_LIBRARY`，`BUILD_EXECUTABLE`用于构建静态库或可执行文件。

# vba - SheetCalculate - 这个子例程如何运行？

> ID：14361230
> 
> 赞同：0
> 
> 时间：2013-01-16T14:57:37.997
> 
> 标签：vba, excel

我这里有这个模块，它是 Workbook 子例程。我一生都无法理解 GenerateLimitSummary 是如何运行的？有人可以在这里阐明流程吗？

```
Private LimitBool As Boolean

Private Sub Workbook_SheetCalculate(ByVal Sh As Object)

    If LimitBool Then Exit Sub

    ' use conditional formatting to highlight limit breaches
    ApplyConditionalFormatting

    ' regenerate the summary limits sheet
    LimitBool = True
    GenerateLimitSummary
    LimitBool = False

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:59:07.960

作者使用 LimitBool 来防止无限循环/堆栈溢出：

*   最初，`LimitBool`is `False`，因此 的剩余部分`Workbook_SheetCalculate`被执行
*   现在，`LimitBool`设置为`True`（在确认不是之后`True`）
*   `GenerateLimitSummary`被执行。如果此例程现在由于某些原因强制工作簿重新计算，`Workbook_SheetCalculate`将再次触发。然而，就像`LimitBool`现在`True`*一样，对这个过程的第二次调用现在在第一次检查后退出。如果它没有这个检查，它会再次调用`GenerateLimitSummary`，然后触发重新计算，等等......
*   `GenerateLimitSummary`运行后，`LimitBool`设置回`False`，因此，它可以再次运行

(*) - 它具有模块范围的范围，即它在不同的调用中保持它的值，而过程范围的范围（=在子中变暗）将为每个调用创建一个新变量

# memory - JavaFX 嵌入式浏览器内存泄漏

> ID：14361233
> 
> 赞同：0
> 
> 时间：2013-01-16T14:57:53.830
> 
> 标签：memory, javafx, webview, memory-leaks

我[在 JavaFX 中使用嵌入式浏览器](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/web/WebView.html)。在我的网页上，我使用 Javascript 动态创建了许多复选框 + 一些其他组件，然后将它们从 DOM 中删除。奇怪的是，在执行每个“创建/删除”周期后，内存使用量正在增长。也许它可能与附加到我的元素的点击事件有关？这似乎是内存泄漏，我不知道如何解决这个问题。在 Chrome 等常规浏览器中，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:19:18.353

我在查找内存泄漏方面没有太多经验，但我一直想使用[Plumbr](http://plumbr.eu)来测试我的 JavaFX 应用程序——也许你可以使用它？

你可能不得不坐在那里不断地点击东西或编写大量交互脚本让 Plumbr 注意到泄漏，因为它似乎专注于同时拥有大量用户的 JSP 应用程序。

# vb.net - 使用 Collection 类的替代方法

> ID：14361234
> 
> 赞同：0
> 
> 时间：2013-01-16T14:57:55.880
> 
> 标签：vb.net, winforms, exception, collections

我一直在查看旧代码以熟悉我使用的系统，并发现了一段我觉得可以更好地使用的代码。

这里发生的是一些数据被添加到集合中（大约 150 个字符串变量，一些有两个变量（variableName/VariableValue），大多数只有一个（VariableName））。它将尝试将模块级别的字符串变量设置为集合的项目，并将其传递给 index(variableName)，然后如果有一个值将 VariableVALue 设置为模块级别的变量。

我觉得需要工作的是，如果向集合传递了一个变量并且该变量没有值，它将返回一个“”，这会导致运行时错误，因此有一个 On Error GoTo Handler 代码可以手动添加一个“”到集合。我觉得有更好的方法来做到这一点，而不是知道会有一个运行时问题然后在捕获它之后解决它。有没有办法让 return "" 不抛出异常，或者使用 Array 也可以在这里工作，因为它也是一个“集合”？

这是一个尝试帮助可视化的示例：

```
Public Function  GetCollectionVariable(ByVal varName as string) as String
If collection1 Is Nothing Then
        m_collection1 = New Collection 
    End If
On Error GoTo Handler
GetCollectionVariable = collection1.Item(VarName)
exit function

Handler:
collection1.add("", VarName)
GetCollectionVariable = ""
End FUnction 
```

谢谢你的时间！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:01:01.233

如果`Collection1`是字典，则可以使用[TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)。

# javascript - Raphael.js 和文档高度

> ID：14361235
> 
> 赞同：0
> 
> 时间：2013-01-16T14:57:56.513
> 
> 标签：javascript, svg, raphael

我创建了一个画布

```
var paper = Raphael(domid);
...
paper.height = 600;
paper.width = 600; 
```

在我绘制路径之后，它的一部分是不可见的（因为它超出了画布的边缘）。但如果我这样做

```
var paper = Raphael(domid, 600, 600); 
```

一切都好。第二段和第一段代码之间的本质区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:47:37.560

Rapheal 在 Paper 对象上没有设置器`width`，`height`因此调用它们不会影响 DOM，而只是在 Paper 对象上设置一些属性。

在构造函数中传入`width`和`height`参数会影响 DOM 中的 SVG 标签。

如果你想在构建后改变纸张的宽度和高度，你可以像这样设置 SVG 标签的样式属性：

```
var paper = Raphael(domid);
paper.canvas.style.width = '200px';
paper.canvas.style.height = '100px'; 
```

正如 Kevin 所提到的，使用该`setSize`方法来处理运行时调整大小可能会更好。

例如）

`paper.setSize(200,100)`

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:36:06.110

可能还有另一种解决方案：`var paper = Raphael(domid, '100%', '100%');`.

# nunit - 为巡航控制添加单元测试

> ID：14361238
> 
> 赞同：3
> 
> 时间：2013-01-16T14:58:04.767
> 
> 标签：nunit, cruisecontrol.net

当我在仪表板上强制构建时，我试图将我的 nunit 测试添加到我的 Cruisecontrol ccnet.config 中，它会在我的机器上打开 Nunit 并在命令行中给我一个错误提示错误，我哪里出错了？

```
 <nunit>
    <path>C:\Program Files (x86)\NUnit 2.6.2\bin\nunit.exe</path>
    <assemblies>
      <assembly>C:\Users\computeruser\Documents\Visual Studio 2010\Projects\WebCrawlerMVC\WebCrawlerMVC.Tests\bin\Debug\nunit.framework.dll</assembly>
      <assembly>>C:\Users\computeruser\Documents\Visual Studio 2010\Projects\WebCrawlerMVC\WebCrawlerMVC.Tests\bin\Debug\WebCrawlerMVC.Tests.dll</assembly>
    </assemblies>
    <excludedCategories>
      <excludedCategory>LongRunning</excludedCategory>
    </excludedCategories>
  </nunit> 
```

有没有比上面更容易或更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:16:49.960

尝试像这样使用**nunit-console.exe**应用程序：

```
<nunit>
      <path>"C:\Program Files\NUnit 2.6.2\bin\nunit-console.exe"</path>
      ...
</nunit> 
```

# php - SoundCloud API：我无法解码 Json 数据

> ID：14361244
> 
> 赞同：0
> 
> 时间：2013-01-16T14:58:18.140
> 
> 标签：php, json, zend-framework, curl, soundcloud

我对 SounCloud PHP 包装器有疑问。当我向 SounCloud API 发出 oembed 请求时。最后一个给我一个字符串数据。它由诸如标头和 JSON 数据之类的东西组成。它看起来像这样：

```
Age: 0
Via: 1.1 varnish
X-Cache: MISS
Vary: Accept-Encoding

{"version":1.0,"type":"rich",......."author_url":"https://soundcloud.com/forss"} 
```

因此，当我`json_decode`对这些数据使用函数时，它无法解码 JSON 部分。有谁知道如何从这个内容中删除标题？

注意：我在代理后面工作，所以我在下面添加了这段代码以使 curl 请求工作

```
$client->setCurlOptions(array(
            CURLOPT_FOLLOWLOCATION => 1,
        CURLOPT_PROXY => "http://xxxxxxxxxx",
        CURLOPT_PROXYPORT => 8080,
        CURLOPT_PROXYUSERPWD => "xxxx:xxxx",
        CURLOPT_SSL_VERIFYPEER => 0)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:37:13.250

那很奇怪！你可以做的是：

```
if(strstr($response, "{") !== false){
    $response = substr($response, strstr("{"));
} 
```

# linux - ELF文件格式中的section和segment有什么区别

> ID：14361248
> 
> 赞同：86
> 
> 时间：2013-01-16T14:58:24.317
> 
> 标签：linux, debian, gnu, elf, abi

来自wiki [Executable and Linkable Format](https://en.wikipedia.org/wiki/Executable_and_Linkable_Format)：

> 段包含文件运行时执行所必需的信息，而节包含用于链接和重定位的重要数据。整个文件中的任何字节最多只能由一个节拥有，并且可以有不属于任何节的孤儿字节。

但是section和segment有什么区别呢？在一个可执行的 ELF 文件中，一个段是否包含一个或多个部分？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-17T15:29:43.180

> 但是section和segment有什么区别呢？

正是您引用的内容：段包含运行时所需的信息，而部分包含链接期间所需的信息。

> 一个段是否包含一个或多个部分？

一个段可以包含 0 个或多个部分。例子：

```
readelf -l /bin/date

Elf file type is EXEC (Executable file)
Entry point 0x402000
There are 9 program headers, starting at offset 64

Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  PHDR           0x0000000000000040 0x0000000000400040 0x0000000000400040
                 0x00000000000001f8 0x00000000000001f8  R E    8
  INTERP         0x0000000000000238 0x0000000000400238 0x0000000000400238
                 0x000000000000001c 0x000000000000001c  R      1
      [Requesting program interpreter: /lib64/ld-linux-x86-64.so.2]
  LOAD           0x0000000000000000 0x0000000000400000 0x0000000000400000
                 0x000000000000d5ac 0x000000000000d5ac  R E    200000
  LOAD           0x000000000000de10 0x000000000060de10 0x000000000060de10
                 0x0000000000000440 0x0000000000000610  RW     200000
  DYNAMIC        0x000000000000de38 0x000000000060de38 0x000000000060de38
                 0x00000000000001a0 0x00000000000001a0  RW     8
  NOTE           0x0000000000000254 0x0000000000400254 0x0000000000400254
                 0x0000000000000044 0x0000000000000044  R      4
  GNU_EH_FRAME   0x000000000000c700 0x000000000040c700 0x000000000040c700
                 0x00000000000002a4 0x00000000000002a4  R      4
  GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000  RW     8
  GNU_RELRO      0x000000000000de10 0x000000000060de10 0x000000000060de10
                 0x00000000000001f0 0x00000000000001f0  R      1

 Section to Segment mapping:
  Segment Sections...
   00     
   01     .interp 
   02     .interp .note.ABI-tag .note.gnu.build-id .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rela.dyn .rela.plt .init .plt .text .fini .rodata .eh_frame_hdr .eh_frame 
   03     .ctors .dtors .jcr .dynamic .got .got.plt .data .bss 
   04     .dynamic 
   05     .note.ABI-tag .note.gnu.build-id 
   06     .eh_frame_hdr 
   07     
   08     .ctors .dtors .jcr .dynamic .got 
```

这里，`PHDR`segment包含0个section，`INTERP`segment包含`.interp`section，第一个`LOAD`segment包含一大堆section。

[进一步阅读](https://web.archive.org/web/20171129031316/http://nairobi-embedded.org/040_elf_sec_seg_vma_mappings.html)带有一个很好的[插图](https://web.archive.org/web/20150602071342/http://nairobi-embedded.org/img/elf/elf_link_vs_exec_view.jpg)：

[![在此处输入图像描述](../Images/310bd20174f0aefe5412d54ef078b9c0.png)](https://i.stack.imgur.com/RMV0g.png)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-06-30T08:26:00.783

**部分包含链接器的静态数据，OS 的段动态数据**

引用是正确的，但要真正理解它的区别，您应该尝试了解节头和程序头（段）条目的字段，以及链接器（节）和操作系统（段）如何使用它们.

特别重要的信息是（除了长度）：

*   部分：告诉链接器一个部分是否是：

    *   要加载到内存中的原始数据，例如`.data`,`.text`等。
    *   或有关其他部分的格式化元数据，将由链接器使用，但在运行时消失，例如`.symtab`，`.srttab``.rela.text`
*   段：告诉操作系统：

    *   段应该在哪里加载到虚拟内存中
    *   段有什么权限（读、写、执行）。请记住，这可以由处理器有效地执行：[x86 分页是如何工作的？](https://stackoverflow.com/questions/18431261/how-does-x86-paging-work)

我已经写了一个教程，其中涵盖了更详细的内容：[http ://www.cirosantilli.com/elf-hello-world/](http://www.cirosantilli.com/elf-hello-world/)

**一个段是否包含一个或多个部分？**

是的，它是将部分放入段的链接器。

在 Binutils 中，如何将段放入段`ld`中由称为*链接*描述文件的文本文件确定。文档：[https ://sourceware.org/binutils/docs/ld/Scripts.html](https://sourceware.org/binutils/docs/ld/Scripts.html)

您可以使用 获取默认值`ld --verbose`，并使用 设置自定义值`-T`。

例如，我的默认 Ubuntu 17.04 链接描述文件包含：

```
 .text           :                                                                                                                                                             
  {                                                                                                                                                                             
    *(.text.unlikely .text.*_unlikely .text.unlikely.*)                                                                                                                         
    *(.text.exit .text.exit.*)                                                                                                                                                  
    *(.text.startup .text.startup.*)                                                                                                                                            
    *(.text.hot .text.hot.*)                                                                                                                                                    
    *(.text .stub .text.* .gnu.linkonce.t.*)                                                                                                                                                                                                                                                                                               
  } 
```

它告诉链接器将名为`.text.unlikely`, `.text.*_unlikely`,`.text.exit`等的部分放入`.text`段中。

操作系统开发是自定义脚本有用的情况，最小示例：[https ://github.com/cirosantilli/x86-bare-metal-examples/blob/d217b180be4220a0b4a453f31275d38e697a99e0/linker.ld](https://github.com/cirosantilli/x86-bare-metal-examples/blob/d217b180be4220a0b4a453f31275d38e697a99e0/linker.ld)

一旦可执行文件被链接，如果链接器在可执行文件中存储可选的节头，则只有可能知道哪个节去了哪个段：[ELF文件中存储的“节到段映射”在哪里？](https://stackoverflow.com/questions/23018496/where-is-the-section-to-segment-mapping-stored-in-elf-files)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-01T15:15:44.097

如果我错了，请纠正我，因为我不认为自己是该主题的专家，但根据我的研究，答案/评论中给出的一些陈述似乎并不完全准确。为了详细说明，我将引用句子并对其进行评论：

> 部分包含链接器的静态数据，OS 的段动态数据

根据[这篇](https://lwn.net/Articles/631631/)LWN 文章，内核仅使用 PT_INTERP、PT_LOAD 和 PT_GNU_STACK 类型的段头将可执行文件加载到内存中。但是还有其他段类型，如 PHDR、DYNAMIC、NOTE、GNU_EH_FRAME、GNU_PROPERTY、GNU_RELRO，它们被忽略了。

Afaiu，GNU_RELRO 段就像一个虚拟段；如果它存在，加载器使用它作为一个标志来使重定位数据只读。但是加载器不是操作系统的一部分，至少对于 Linux 来说是这样。

至于其他的段类型，我还没有发现它们的实际用途。它们对我来说似乎是多余的，因为相应的部分基本上具有相同或更多的信息。

因此，根据我的理解，这个答案只是一个更混乱的事实的简化近似值。

> 部分包含在段中

您可以拥有[没有段头](https://www.muppetlabs.com/~breadbox/software/tiny/teensy.html)的 ELF 可执行文件，而可重定位 (*.o) 文件通常没有段头。此外，在接受答案的 readelf 输出中，可以看到多个段中的 .interp 部分。我没有看到任何收容限制。

> 段包含运行时所需的信息，而节包含链接期间所需的信息。

这似乎又是一种简化。运行时加载器（或“解释器”）还需要用于加载共享库、解析符号、执行重定位等的部分。

总而言之，虽然给出的答案可能是合理的一般近似值，但在查看细节时显然会变得更加复杂。

# php - PHP Switch给第一行未选择的单选

> ID：14361253
> 
> 赞同：0
> 
> 时间：2013-01-16T14:58:36.820
> 
> 标签：php, switch-statement

我有一个循环，可以在带有单选按钮的表格中显示文档。选择后，我希望它显示数据的重置。现在，当我单击单选按钮时，它只会显示文档的第一行，如何让我的开关在单选值之间切换。

```
<?php
   while( $row1 = mysql_fetch_array($myQ1) ) 
    {
     echo "<td><input type='radio' name='tog' id='tog' onClick='gtdoc()'       value='$row1[2]'>$row1[3]</input></td></tr>"; 
    $tog = $row1[2]; $ObjIndex = $tog[$i];
     }

for ($i = 0; $i <= $tog; $i++) 
{ 
   if($tog[$i] != '0') 
   { 
    switch ($ObjIndex[$i]) 
    {
      case $tog:
      echo $row1[3];
      break;
    }
   }
}
$myQ9 = mysql_query("SELECT `iDocuments`.`File`.`FileIndex`, `iDocuments`.`File`.`FileName`, `iDocuments`.`Object`.`ObjectIndex`, `iDocuments`.`Object`.`ObjectName`, `iDocuments`.`Version`.`Version`, `iDocuments`.`File`.`UploadDate` FROM `iDocuments`.`Version` INNER JOIN `iDocuments`.`Object` ON `iDocuments`.`Object`.`ObjectIndex` = `iDocuments`.`Version`.`ObjectIndex` JOIN `iDocuments`.`File` ON `iDocuments`.`Version`.`FileIndex` = `iDocuments`.`File`.`FileIndex` WHERE `Object`.`ObjectStatus` = '1' AND `Version`.`Version` = ( SELECT MAX(`Version`) FROM `iDocuments`.`Version` WHERE `Version`.`ObjectIndex` = `Object`.`ObjectIndex` ) AND `Object`.`ObjectIndex` = '$ObjIndex'");
if (!$myQ9) 
   {  
      echo 'Could not run query 9: ' . mysql_error(); 
   }
else 
   { 
      $row9 = mysql_query($myQ9);
   }
    while( $row9 = mysql_fetch_array($myQ9) ) 
   {
      echo "<table name='doclist'>           
      <tr><td>FileID</td><td><input name='DocFileID' type='text' readonly='true' value='$row9[0]'></input></td></tr> 
      <tr><td>File Name</td><td><input name='DocFileName' type='text' readonly='true' value='$row9[1]'></input></td></tr> 
      <tr><td>ObjectID</td><td><input name='DocID' type='text' readonly='true' value='$row9[2]'></input></td></tr>  
      <tr><td>Object Name</td><td><input name='DocName' type='text' readonly='true' value='$row9[3]'></input></td></tr>  
      <tr><td>Current Version</td><td><input name='CurrVer' type='text' readonly='true' value='$row9[4]'></input></td></tr>
      <tr><td>Update Date</td><td><input name='lstupdate' type='text' readonly='true' value='$row9[5]'></input></td> </tr>
      </table>";
   }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:27:36.500

我建议您的第一次清理工作应该是将 html 与 php 分开，并且只传递需要传递给模板部分的变量。

当您处理希望被公众使用并因此需要安全的代码时，这也将为您提供很好的服务，因为只是将变量回显到 html 中往往会产生有问题的安全隐患。

一个允许您将模板代码与业务逻辑分开的非常简单的实现可能是：

```
// do all your logic, and prepare variables here
include('formtemplate.php'); // With all the html in here. 
```

将所有这些东西混合在一起确实增加了复杂性，我知道，我去过那里。

此外，html 布尔值不使用 ='true'，您正在寻找`readonly`否则`readonly='readonly'`

# c# - 当标签的父级是图片框时，在用户控件中按名称查找标签

> ID：14361255
> 
> 赞同：1
> 
> 时间：2013-01-16T14:58:44.513
> 
> 标签：c#, user-controls, transparency, parent-child

我有一个用户控件，上面有多个图片框和标签。我需要将每个Label（lb）放在他自己的Picturebox（pbParent）上，并且标签Backcolor必须是透明的，以提高PictureBox Image在这个图片框下的可见性。图片框命名为 TabFrame0 到 TabFrameN，标签命名为 Label0 到 LabelN。

我有一个函数**GetLabelByTag**必须返回按其名称搜索的标签。在我将 Label 的父级设置为 PictureBox 之前，它工作正常（见第 8 行）。所以，我的问题是：如果它的父级变成图片框，而不是我的 UserControl，我如何找到标签，哪个集合包含它？

```
void CreateControls()
{
...
    newLabel.Name = TAB_PIC_BOX_LABEL_NAME + _id.ToString(); //1
    newLabel.Text = _text;//2
    newLabel.Tag = _id;//3
    newLabel.AutoSize = true;//4

    Controls.Add(newLabel);//5

    Label lb = GetLabelByTag(_id, TAB_PIC_BOX_LABEL_NAME);//6
    PictureBox pbParent = GetPicBoxByTag(_id, TAB_PIC_BOX_CONTROL_NAME);//7
    lb.Parent=pbParent;//8
    lb.BringToFront();//9
... 
} 
```

...

```
Label GetLabelByTag(int _tag, string _family)
{
    Label rez = new Label();

    foreach (Control lb in Controls)
    {
        if (lb.Tag != null)
        {
            if (((int)lb.Tag == _tag) && (lb.Name == _family + _tag.ToString()))
            {
               rez = (Label)lb;
            }
        }
    }
    return rez;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:18:40.490

如果有的话，您需要递归地迭代孩子的孩子。比如像这样：

```
Label GetLabelByTag(int _tag, string _family)
{
    return FindLabelByTag(_tag, _family, this);
}

Label FindLabelByTag(int _tag, string _family, Control _control)
{
    Label rez = null;

    foreach (Control lb in _control.Controls)
    {
        if (lb.Tag != null)
        {
            if (((int)lb.Tag == _tag) && (lb.Name == _family + _tag.ToString()))
            {
                return (Label)lb;
            }
        }
        var inControl = FindLabelByTag(_tag, _family, lb);
        if (inControl != null)
            return inControl;
    }

    return null;
} 
```

# python - Python 中 dir() 和 __dict__ 的最大区别是什么

> ID：14361256
> 
> 赞同：75
> 
> 时间：2013-01-16T14:58:45.240
> 
> 标签：python, introspection

```
class C(object):
    def f(self):
        print self.__dict__
        print dir(self)
c = C()
c.f() 
```

输出：

```
{}

['__class__', '__delattr__','f',....] 
```

为什么self.__dict__中没有'f'

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-01-16T15:03:12.237

## `dir()`不仅仅是抬头看`__dict__`

首先，`dir()`是一种知道如何使用属性的 API 方法，例如`__dict__`查找对象的属性。

不过，并非所有对象都有`__dict__`属性。例如，如果您要向自定义类添加[`__slots__`属性](http://docs.python.org/2/reference/datamodel.html#slots)，则该类的实例将没有`__dict__`属性，但`dir()`仍可以列出这些实例上的可用属性：

```
>>> class Foo(object):
...     __slots__ = ('bar',)
...     bar = 'spam'
... 
>>> Foo().__dict__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Foo' object has no attribute '__dict__'
>>> dir(Foo())
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', 'bar'] 
```

这同样适用于许多内置类型；`list`s 没有`__dict__`属性，但您仍然可以使用以下命令列出所有属性`dir()`：

```
>>> [].__dict__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'list' object has no attribute '__dict__'
>>> dir([])
['__add__', '__class__', '__contains__', '__delattr__', '__delitem__', '__delslice__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getslice__', '__gt__', '__hash__', '__iadd__', '__imul__', '__init__', '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__reversed__', '__rmul__', '__setattr__', '__setitem__', '__setslice__', '__sizeof__', '__str__', '__subclasshook__', 'append', 'count', 'extend', 'index', 'insert', 'pop', 'remove', 'reverse', 'sort'] 
```

## `dir()`实例有什么作用

Python 实例有自己的`__dict__`，但它们的类也有：

```
>>> class Foo(object):
...     bar = 'spam'
... 
>>> Foo().__dict__
{}
>>> Foo.__dict__.items()
[('__dict__', <attribute '__dict__' of 'Foo' objects>), ('__weakref__', <attribute '__weakref__' of 'Foo' objects>), ('__module__', '__main__'), ('bar', 'spam'), ('__doc__', None)] 
```

该`dir()`方法使用*这*两个`__dict__`属性，*以及*一个在`object`实例、类和类的所有祖先上创建可用属性的完整列表。

当您在类上设置属性时，实例也会看到这些：

```
>>> f = Foo()
>>> f.ham
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Foo' object has no attribute 'ham'
>>> Foo.ham = 'eggs'
>>> f.ham
'eggs' 
```

因为该属性已添加到类中`__dict__`：

```
>>> Foo.__dict__['ham']
'eggs'
>>> f.__dict__
{} 
```

请注意实例`__dict__`是如何留空的。Python 对象的属性查找遵循对象的层次结构，从实例到类型再到父类以搜索属性。

只有当您直接在实例上设置属性时，您才会看到属性反映在`__dict__`实例中，而类`__dict__`保持不变：

```
>>> f.stack = 'overflow'
>>> f.__dict__
{'stack': 'overflow'}
>>> 'stack' in Foo.__dict__
False 
```

## TLDR；或摘要

`dir()`不只是查找对象的`__dict__`（有时甚至不存在），它会使用对象的遗产（它的类或类型，以及该类或类型的任何超类或父类）为您提供一个完整的图片所有可用的属性。

实例`__dict__`只是该实例上的“本地”属性集，并不包含实例上可用的所有属性。相反，您还需要查看类和类的继承树。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-22T03:57:40.530

该函数`f`属于 class 的字典`C`。 `c.__dict__`产生特定于实例的属性`c`。

```
>>> class C(object):
    def f(self):
        print self.__dict__

>>> c = C()
>>> c.__dict__
{}
>>> c.a = 1
>>> c.__dict__
{'a': 1} 
```

`C.__dict__`将产生类的属性`C`，包括函数`f`。

```
>>> C.__dict__
dict_proxy({'__dict__': <attribute '__dict__' of 'C' objects>, '__module__': '__main__', '__weakref__': <attribute '__weakref__' of 'C' objects>, '__doc__': None, 'f': <function f at 0x0313C1F0>}) 
```

虽然对象可以引用其类的属性（实际上是所有祖先类），但如此引用的类属性不会成为关联**字典**本身的一部分。因此，虽然它是对as`f`类中定义的函数的合法访问，但它不会作为 in 的属性出现。`C``c.f()``c``c.__dict__`

```
>>> c.a = 1
>>> c.__dict__
{'a': 1} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-22T04:11:47.800

类 dir() 和**dict**只显示定义的函数（方法）。实例 dir() 显示数据+方法，而其**dict**仅显示数据属性，而不显示方法。

```
class C2:
...     def __init__(self, id): 
...         self.id = id
...     def set(self, len):
...         self.len = len        
...         
c2 = C2("stick")
dir(C2)
['__class__',.., '__init__', 'set']
dir(c2)
['__class__',.., '__init__', 'id', 'set']
C2.__dict__
mappingproxy({'__init__': <function C2.__init__ at 0x000001899C61E9D0>, 'set': <function C2.set at 0x000001899C61ED30>,...})
c2.__dict__
{'id': 'stick'} 
```

# sql - 必须在已创建的表中创建具有唯一约束的列

> ID：14361257
> 
> 赞同：-2
> 
> 时间：2013-01-16T14:58:46.673
> 
> 标签：sql, sql-server

我必须在已经制作的表中添加一个具有唯一约束的列。Column 应具有默认值，作为 Posted_By 和 Posted_DateTime 等其他两个列的组合。

如何通过sql查询实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:08:28.037

最简单的解决方案可能是创建列，填充它，然后将其更改为唯一。说得通？

这是一些未经测试的代码：

```
ALTER TABLE TABLENAME ADD COLUMNNAME VARCHAR(100) NULL;

UPDATE TABLENAME 
SET COLUMNNAME = Posted_By + CAST(Posted_DateTime as Varchar)

ALTER TABLE TABLENAME  ADD CONSTRAINT
CONSTRAINTNAME UNIQUE NONCLUSTERED ( COLUMNNAME ) 
```

祝你好运。

# selenium - Selenium RC - 网格集线器没有在听

> ID：14361262
> 
> 赞同：0
> 
> 时间：2013-01-16T14:59:03.533
> 
> 标签：selenium, selenium-rc, selenium-grid, tools.jar

我是硒的新手。我正在运行现有的 selenium RC 代码。当我尝试启动集线器时，出现以下错误

无法找到 tools.jar。预计在 C:\Program Files\Java\jre6\lib\tools.jar Buildfile 中找到它：build.xml 不存在！构建失败

所以我下载了JDK文件。然后我更改了系统变量现在它指向

```
C:\>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.7.0_11

C:\>echo %PATH%
c:\ruby\bin;C:\ant\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C
:\Program Files\Windows Imaging\;C:\Program Files\Common Files\Roxio Shared\DLLS
hared\;C:\Program Files\Java\jre1.6.0_05\bin;C:\Program Files\Java\jdk1.7.0_11

C:\>echo %ANT_HOME%
C:\ant\bin\ant.bat 
```

我运行了以下 bat 文件来启动集线器 - 启动 hub.bat

```
title Hub
cd C:\selenium\Grid\selenium-grid-1.0.4
c:\ant\bin\ant launch-hub 
```

**输出**

```
C:\selenium\Grid\selenium-grid-1.0.4>c:\ant\bin\ant launch-hub
Buildfile: build.xml

launch-hub:
     [java] jan 16, 2013 2:45:25 PM com.thoughtworks.selenium.grid.hub.HubRegist
ry gridConfiguration
     [java] INFO: Loaded grid configuration:
     [java] ---
     [java] hub:
     [java]   environments:
     [java]     -
     [java]       browser: "*firefox"
     [java]       name: Firefox on Windows
     [java]     -
     [java]       browser: "*firefox"
     [java]       name: Firefox on OS X
     [java]     -
     [java]       browser: "*firefox"
     [java]       name: Firefox on Linux
     [java]     -
     [java]       browser: "*iehta"
     [java]       name: IE on Windows
     [java]     -
     [java]       browser: "*safari"
     [java]       name: Safari on OS X
     [java]     -
     [java]       browser: "*firefox"
     [java]       name: "*firefox"
     [java]     -
     [java]       browser: "*firefox2"
     [java]       name: "*firefox2"
     [java]     -
     [java]       browser: "*firefox3"
     [java]       name: "*firefox3"
     [java]     -
     [java]       browser: "*chrome"
     [java]       name: "*chrome"
     [java]     -
     [java]       browser: "*iexplore"
     [java]       name: "*iexplore"
     [java]     -
     [java]       browser: "*iehta"
     [java]       name: "*iehta"
     [java]     -
     [java]       browser: "*safari"
     [java]       name: "*safari"
     [java]     -
     [java]       browser: "*opera"
     [java]       name: "*opera"
     [java]     -
     [java]       browser: "*googlechrome"
     [java]       name: "*googlechrome"
     [java]     -
     [java]       browser: "*firefoxproxy"
     [java]       name: "*firefoxproxy"
     [java]     -
     [java]       browser: "*pifirefox"
     [java]       name: "*pifirefox"
     [java]     -
     [java]       browser: "*iexploreproxy"
     [java]       name: "*iexploreproxy"
     [java]     -
     [java]       browser: "*piiexplore"
     [java]       name: "*piiexplore"
     [java]     -
     [java]       browser: "*safariproxy"
     [java]       name: "*safariproxy"
     [java]
     [java] 2013-01-16 14:45:25.161::INFO:  Logging to STDERR via org.mortbay.lo
g.StdErrLog
     [java] 2013-01-16 14:45:25.224::INFO:  jetty-6.0.x
     [java] 2013-01-16 14:45:25.364::WARN:  failed SocketConnector @ 0.0.0.0:444
4
     [java] java.net.BindException: Address already in use: JVM_Bind
     [java]     at java.net.TwoStacksPlainSocketImpl.socketBind(Native Method)
     [java]     at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl
.java:376)
     [java]     at java.net.TwoStacksPlainSocketImpl.bind(TwoStacksPlainSocketIm
pl.java:101)
     [java]     at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
     [java]     at java.net.ServerSocket.bind(ServerSocket.java:376)
     [java]     at java.net.ServerSocket.<init>(ServerSocket.java:237)
     [java]     at java.net.ServerSocket.<init>(ServerSocket.java:181)
     [java]     at org.mortbay.jetty.bio.SocketConnector.newServerSocket(SocketC
onnector.java:78)
     [java]     at org.mortbay.jetty.bio.SocketConnector.open(SocketConnector.ja
va:72)
     [java]     at org.mortbay.jetty.AbstractConnector.doStart(AbstractConnector
.java:251)
     [java]     at org.mortbay.jetty.bio.SocketConnector.doStart(SocketConnector
.java:145)
     [java]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCyc
le.java:40)
     [java]     at org.mortbay.jetty.Server.doStart(Server.java:239)
     [java]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCyc
le.java:40)
     [java]     at com.thoughtworks.selenium.grid.hub.HubServer.main(HubServer.j
ava:39)
     [java] 2013-01-16 14:45:25.364::WARN:  failed Server@d38c3d
     [java] java.net.BindException: Address already in use: JVM_Bind
     [java]     at java.net.TwoStacksPlainSocketImpl.socketBind(Native Method)
     [java]     at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl
.java:376)
     [java]     at java.net.TwoStacksPlainSocketImpl.bind(TwoStacksPlainSocketIm
pl.java:101)
     [java]     at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
     [java]     at java.net.ServerSocket.bind(ServerSocket.java:376)
     [java]     at java.net.ServerSocket.<init>(ServerSocket.java:237)
     [java]     at java.net.ServerSocket.<init>(ServerSocket.java:181)
     [java]     at org.mortbay.jetty.bio.SocketConnector.newServerSocket(SocketC
onnector.java:78)
     [java]     at org.mortbay.jetty.bio.SocketConnector.open(SocketConnector.ja
va:72)
     [java]     at org.mortbay.jetty.AbstractConnector.doStart(AbstractConnector
.java:251)
     [java]     at org.mortbay.jetty.bio.SocketConnector.doStart(SocketConnector
.java:145)
     [java]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCyc
le.java:40)
     [java]     at org.mortbay.jetty.Server.doStart(Server.java:239)
     [java]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCyc
le.java:40)
     [java]     at com.thoughtworks.selenium.grid.hub.HubServer.main(HubServer.j
ava:39)
     [java] Exception in thread "main" java.net.BindException: Address already i
n use: JVM_Bind
     [java]     at java.net.TwoStacksPlainSocketImpl.socketBind(Native Method)
     [java]     at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl
.java:376)
     [java]     at java.net.TwoStacksPlainSocketImpl.bind(TwoStacksPlainSocketIm
pl.java:101)
     [java]     at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
     [java]     at java.net.ServerSocket.bind(ServerSocket.java:376)
     [java]     at java.net.ServerSocket.<init>(ServerSocket.java:237)
     [java]     at java.net.ServerSocket.<init>(ServerSocket.java:181)
     [java]     at org.mortbay.jetty.bio.SocketConnector.newServerSocket(SocketC
onnector.java:78)
     [java]     at org.mortbay.jetty.bio.SocketConnector.open(SocketConnector.ja
va:72)
     [java]     at org.mortbay.jetty.AbstractConnector.doStart(AbstractConnector
.java:251)
     [java]     at org.mortbay.jetty.bio.SocketConnector.doStart(SocketConnector
.java:145)
     [java]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCyc
le.java:40)
     [java]     at org.mortbay.jetty.Server.doStart(Server.java:239)
     [java]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCyc
le.java:40)
     [java]     at com.thoughtworks.selenium.grid.hub.HubServer.main(HubServer.j
ava:39) 
```

我的培训文件说我应该 • 等待看到'started Socket Connector' 语句和'44'；

但我没明白。我认为这是因为 SocketConnector 失败。请帮我修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:12:23.817

这些行告诉您端口 4444 已被另一个进程打开

```
 [java] 2013-01-16 14:45:25.364::WARN:  failed SocketConnector @ 0.0.0.0:4444
 [java] java.net.BindException: Address already in use: JVM_Bind 
```

您应该检查此过程可能是什么并将其关闭，或修改您的 build.xml 以更改集线器要启动的端口

`netstat -an`在 Windows 上使用

注意：如果您多次运行 ant 文件，打开 4444 端口的进程可能与您尝试启动的进程相同，但尚未终止。

# linux - 在 R 中执行 library(package) 报告包是为 i386 构建的，它可以安装在 x86_64 系统上吗？

> ID：14361263
> 
> 赞同：0
> 
> 时间：2013-01-16T14:59:04.347
> 
> 标签：linux, r

我正在尝试使用附加的 R 包[UBbipl](http://www.wiley.com/legacy/wileychi/gower/supp/UBbipl_1.0.zip)，但一旦安装，就无法从 R 中将其添加为库。执行`library(UBbipl)`退货

```
Error: package ‘UBbipl’ was built for i386-pc-mingw32 
```

软件包的 README（参见[此处](http://www.wiley.com/legacy/wileychi/gower/material.html)）声明支持 i386 和 x86_64 架构。我已经查阅了有关创建包的教程（除其他外），但我对 R（或其包）了解不足，无法诊断问题（我认为）。

`R.Version()$arch`返回`x86_64`，我正在运行 R 版本 2.14.1 并`Sys.info()`确认我的机器的这种架构，以及我正在运行 Linux 的事实。为了安装它，我从 zip 文件创建了一个 tar.gz 文件并`R CMD INSTALL UBbipl_1.0.tar.gz`以 root 身份运行。这成功完成，报告

```
* installing to library ‘/usr/local/lib/R/site-library’
* installing *binary* package ‘UBbipl’ ...
* DONE (UBbipl) 
```

我使用了`--no-multiarch`and`--arch x86_64`选项，但这对错误消息没有影响。此外，自述文件指出，应该

> 下载并保存适当版本的 UBbipl 到您的计算机。然后从 R 中安装包。

但是只有一个文件可供下载（请参阅上一个链接），所以我不确定我是否做错了什么，或者我是否需要不同的包。如果有人能指出我正确的方向，那就太好了。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T09:47:36.783

我将回答我自己的问题以关闭它。从技术上讲，themel 在评论中提供了答案。R 包是为 Windows 构建的 Windows 二进制包。没有提供源包，因此我无法在 Linux 机器上的 R 中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-06T11:43:47.373

文件

[http://www.wiley.com/legacy/wileychi/gower/supp/UBbipl_3.0.4.tar.gz](http://www.wiley.com/legacy/wileychi/gower/supp/UBbipl_3.0.4.tar.gz)

似乎是一个标准的 R 源文件，没有编译的元素。它有我二十年来见过的第一个 Fortran 程序源，但应该可以工作。一旦安装了我还没有的两个依赖项 - 'rgl' 和 'numDeriv' ，它肯定可以使用 R CMD INSTALL UBbipl_3.0.4.tar.gz 安装得很好。

问候， 安东尼斯坦斯

# python - sqlalchemy 的默认排序标准？

> ID：14361264
> 
> 赞同：8
> 
> 时间：2013-01-16T14:59:10.503
> 
> 标签：python, sqlalchemy

现在我按属性 1 对数据库中的数据进行排序。如果属性 1 的值相同的不同项目存在相同的关系，则数据似乎按其 id 排序。但是，我想通过按 desc(id) 排序来打破平局。如果有平局，我如何更改数据库的默认排序标准？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-02-27T12:10:16.617

**更新**

从 1.1 版`order_by`开始，映射器配置中的参数[已被弃用](https://docs.sqlalchemy.org/en/14/changelog/changelog_11.html#change-09669497f855398505a14d647f0b239c)。相反，必须使用[Query.order_by 。](https://docs.sqlalchemy.org/en/current/orm/query.html#sqlalchemy.orm.Query.order_by)

**出于历史目的，我在这里留下了原始答案**：

这可以通过 [mapper 配置][1] 来实现。

如果您有一个用户表并且想要检索始终按以下顺序排序的记录`fullname`应该可以：

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String

Base = declarative_base()

class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    name = Column(String)
    fullname = Column(String)
    password = Column(String)

    __mapper_args__ = {
        "order_by": fullname,
    }

    def __repr__(self):
       return f"<User(id='{self.id}', name='{self.name}', fullname='{self.fullname}')>" 
```

默认`order_by`是升序，如果你想颠倒顺序，可以使用：

```
__mapper_args__ = {
    "order_by": fullname.desc(),
}

  [1]: http://docs.sqlalchemy.org/en/latest/orm/mapping_api.html#sqlalchemy.orm.mapper.params.order_by 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T15:17:15.360

顺序完全由数据库决定，而不是 SQLAlchemy。使用纯 SQL，您只需添加额外的 ORDER BY 子句，在 SQLAlchemy ORM 中，您可以通过链接 order_by 方法来执行相同的操作。例如：

```
for eq in session.query(Equipment).order_by(Equipment.model_id).order_by(Equipment.name).all():
    print (eq) 
```

最左边的是主要排序。

# internet-explorer - hashbangs 是不是一个坏主意，即使它们被用作 facebook 分享的后备

> ID：14361265
> 
> 赞同：1
> 
> 时间：2013-01-16T14:59:15.270
> 
> 标签：internet-explorer, backbone.js, facebook-opengraph, backbone-routing, hashbang

在骨干网中，hashbang 已从代码中删除，标准回退到“#/path”，这对于爬行应该没问题（参见[https://github.com/documentcloud/backbone/commit/10230e4d76e21f08a1dee1fe5d28994e2cf5f11d#commitcomment-477992](https://github.com/documentcloud/backbone/commit/10230e4d76e21f08a1dee1fe5d28994e2cf5f11d#commitcomment-477992)）

但是如果一个 ie9 用户想要做一个 facebook 分享（复制粘贴 url），我仍然需要一个 _escaped_fragment_ 处理程序，在那里我可以做一个规范的 url 或重定向以干净的方式处理它，但是“#！” 后备仍然是必要的，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:25:05.113

问题在于服务器何时需要`#!`确定您的位置（几年前的 Twitter/Gawker）。如果您正确设置服务器 - 即始终返回您的主干应用程序并（并启动路由器）为您的应用程序中的任何 URL，它将为所有用户正确处理。

IE8/9 用户将看到散列的 url。理智的浏览器将显示正常的 URL。如果一个“正常”的浏览器加载一个散列 URL，主干路由器就会知道该做什么。IE8/9 也是如此。

只要您从服务器返回给定 URL 的正确视图状态（即在服务器端预渲染），Google 就不会像普通网站一样使用您的网站并愉快地对其进行索引。

这个问题`#!`和`_escaped_fragment_`旨在处理的问题真的不再重要了。

**编辑**

例子：

假设您在服务器上运行了一个 Backbone 应用程序，它位于`http://myserver.com/myapp/`. 这是您传递给 Backbone.history 对象的基础：

```
Backbone.history.start({pushState: true, root: '/myapp'}); 
```

这向路由器解释了所有路径下的所有路径`/myapp/`都由 Backbone 应用程序“拥有”。只要请求的任何以开头的路由`/myapp/`返回您的 Backbone 应用程序，它就会工作，无论浏览器如何。

因此，假设您的用户正在使用该应用程序并最终使用`/myapp/awesome/thing/to/share`. 对于 IE8/9 用户，他们的 URL 将是`/myapp#awesome/thing/to/share`.

当浏览器从服务器请求这个时，它只要求`/myapp`. 这将返回您的 Backbone 应用程序并启动历史对象/路由器。路由器看到有一个散列片段并说“哦，给用户awesome/thing/to/share”。任何请求此 URL 的浏览器都会发生这种情况。

当 IE8/9 用户请求`/myapp/awesome/thing/to/share`时，只要您的服务器返回相同的 Backbone 应用程序，路由器将再次看到路径为 /awesome/thing/to/share'，然后自动将 IE8/9 中的 URL 更改为`/myapp#awesome/thing/to/share`.

唯一需要做一些棘手的事情是如果您希望 Google/Facebook 能够抓取此页面。由于它们不运行 javascript，因此必须从您的服务器发送页面，就像 Backbone 在浏览器中编写它一样 - 或者对于 Facebook，在文档的部分中有`<og:*>`可用的标签。`<head>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:56:35.030

答案是（如果没有人提供替代方案）不，如果您有这些要求，这不是一个坏主意，请参阅与 tkone 的讨论

# jquery - jQuery Datetimepicker - 单击时更改 minDateTime 和 maxDateTime？

> ID：14361266
> 
> 赞同：3
> 
> 时间：2013-01-16T14:59:17.200
> 
> 标签：jquery, user-interface, datepicker, datetimepicker

我在 jQuery UI datepicker 中使用了出色的 Trent Richardson datetimepicker 插件。

我有几行数据，每行有两个选择器实例，一个用于流程的开始时间，一个用于流程的结束时间。当我的用户单击一个时，我想根据另一个框的值重置最小或最大日期时间元素 - 换句话说，根据开始时间限制结束时间，根据结束时间限制开始时间（以防止用户在结束后开始或在开始前结束）。

我像这样调用 datetimepicker：

```
$('.c_inbox_date').datetimepicker({
    hourGrid: 12,
    minuteGrid: 30,
    timeFormat: 'HHmm',
    showTimezone: false,
}) 
```

这是我正在开发的用于即时重置最小和最大时间的功能：

```
$('.c_inbox_date').click(function() {
    var this_col = $(this).closest('td').parent().children().index($(this).closest('td'));  
    if (this_col == 3) {
        var stop_time = $(this).closest('td').next('td').children('input').val();       
        $(this).datetimepicker({
            maxDateTime: stop_time
        })              
    } else {    
        var start_time = $(this).closest('td').prev('td').children('input').val();
        $(this).datetimepicker({
            minDateTime: new Date(start_time)
        })              
    }
}) 
```

函数中的警告框确认 start_time 和 stop_time 变量包含正确的值。如您所见，我尝试使用“新日期”来确保该值实际上是一个日期对象，但这也不起作用。

谁能告诉我为什么这不起作用？datetimepicker 是否允许这种即时更改？还是我的语法错了？一如既往，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-19T18:33:32.540

使用它们。

```
$('input')
  .datepicker('option', 'maxDate', new Date())
  .datetimepicker('option', 'maxDateTime', new Date()); 
```

逆向工程的乐趣...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:08:05.730

当使用普通的日期选择器设置日期时，我使用以下语法：

```
$( this ).datepicker( "option", "maxDate", new Date(your_date) );
//your_date is a string in the format: YYYY,MM,DD 
```

我假设在您的情况下，您可以使用：

```
$( this ).datetimepicker( "option", "maxDateTime", new Date(your_date) );
//your_date is a string in the format: YYYY,MM,DD,HH,II 
```

# java - 如何更改或指定 Eclipse 写入 tmp***.instance 文件的目录

> ID：14361267
> 
> 赞同：1
> 
> 时间：2013-01-16T14:59:22.580
> 
> 标签：java, eclipse, eclipse-plugin

我已经`Program Files`在 Windows 7 的目录中构建并安装了一个 Eclipse Plugin Java 应用程序。

我在启动应用程序时遇到问题。

看起来每当应用程序启动时，Eclipse Framework 都会尝试将 a`tmpXXX.instance`写入`configuration\org.eclipse.core.runtime\.manager`文件夹，当然它没有这样做的权限，因此程序不会启动。我试过以管理员身份运行程序，仍然有同样的问题。

我尝试了几件事，尝试了谷歌，但仍然无法让 Eclipse 在其他地方写入实例变量。

谢谢，任何帮助都将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:18:56.343

您可以尝试在以下位置更改此设置`eclipse.ini`：

```
-Djava.io.tmpdir=C:\Your\Accessible\Temps\Folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:28:13.273

修改 eclipse.ini 以指向[另一个配置位置](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)。添加这一行

```
-configuration <writableLocationPath> 
```

# vba - VBA：更新后无法自动重新计算 Excel 公式 - 需要手动交互

> ID：14361270
> 
> 赞同：2
> 
> 时间：2013-01-16T14:59:28.507
> 
> 标签：vba, excel, excel-2010

在 VBA 中，我正在更新单元格中的公式（可以正常工作），但自动重新计算不起作用：

```
updated_formula = "=COUNT(Sheet1!A3:A" & nr_points & ")"
Cells(x, y).Formula = updated_formula
ActiveWorkbook.Save
Cells(x, y).Calculate 
```

该公式只是计算另一个工作表中现有行的数量。当我运行宏时，函数文本字段中的单元格值是正确的，但是在单元格本身中我有`"#NAME?"`，我需要按下`ENTER`函数来重新计算公式。

我是否对 Excel 期望过高？还是我做错了什么？

编辑：情况截图——这是我在运行宏后看到的。（抱歉黑屏，必须为客户公司保持匿名）

![在此处输入图像描述](../Images/547355dbd32c2f8d3902fceba74d171d.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T15:06:15.453

看到你的截图后，就清楚了。

改变

`Cells(x, y).Formula = updated_formula`

至

`Cells(x, y).FormulaLocal = updated_formula`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T18:23:09.490

我知道这是一个迟到的帖子，但我有一个类似的问题，对我有用的是改变

```
Cells(x, y).Calculate 
```

至

```
Cells(x, y).Dirty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:44:42.590

您的代码在我的工作表上运行良好，并在宏运行后立即更新计算值。请确保**计算选项**设置为“自动”：功能区**数据**选项卡 > 计算选项 > 自动。

# extjs4.1 - EXTJS 4 自定义插件和/或功能放置在哪里

> ID：14361271
> 
> 赞同：1
> 
> 时间：2013-01-16T14:59:31.120
> 
> 标签：extjs4.1

所以我已经使用 sencha cmd 设置了我的项目。我有以下目录

```
app
 -model
 -view
 -store
 -controller 
```

如果我创建自定义插件或功能，我应该将它们放在视图下还是其他位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:40:59.937

我有以下目录结构：

```
app
    controller
    model
    plugins
    store
    view 
```

然后在标题中包含每个插件：

```
<script type="text/javascript" src="app/plugins/SomePlugin.js"></script> 
```

尽管具有以下文件夹结构是有一定意义的，因为插件是组件插件，因此是视图层的一部分：

```
app
    view
        plugins 
```

# forms - Symfony2 表单中选择的无限值

> ID：14361272
> 
> 赞同：1
> 
> 时间：2013-01-16T14:59:33.470
> 
> 标签：forms, symfony

我想在我的表单中进行选择，但选择的值是动态的（使用 ajax）

我的实体：

```
 /**
 * @ORM\Column(type="string", nullable=true )
 * @Assert\NotBlank()
 */
private $city; 
```

我的表格：

```
$builder->add('city', 'choice',array('empty_value' => 'choice city', 'choices' => array() )); 
```

但是我有：

> 此值无效..

因为城市不在空阵中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:04:17.467

由于 city 字段是一个简单的字符串，并且与表无关，因此只需：

1.  将字段渲染为简单的输入文本；
2.  通过 Ajax 将用于城市自动完成的 Javascript 附加到输入字段以填充输入
3.  然后你就可以提交了

或者：

1.  将字段呈现为文本。
2.  将其隐藏在模板中
3.  通过 javascript 附加一个选择来代替文本输入
4.  使用该选择来呈现城市列表
5.  在提交时从选择中获取值并将其作为输入字段的值。

这种方法还可以用于设置可视小部件的值，例如*星级*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:52:36.580

扩展表单主题的另一个解决方案：

以我的形式：

```
$builder->add('city', 'text',array('data' => 'choice city')); 
```

在我的树枝模板中

```
{% form_theme form _self %}
{% block _template_defaultbundle_membertype_city_widget %} 
   <select {{ block('widget_attributes') }} ><option>{{ value }}</option></select> 
{% endblock %} 
```

其中“template_defaultbundle_membertype_city”是输入的 id

# twitter-bootstrap - Bootstrap 预输入选项卡以完成

> ID：14361286
> 
> 赞同：3
> 
> 时间：2013-01-16T15:00:37.790
> 
> 标签：twitter-bootstrap, typeahead

我有一个标准引导预输入元素有几个问题，它有一个附加的 onchange 事件，如下所示：

```
<input id="element1" />
<script type="text/javascript">
  var $element1 = $j("#element1");
  var $output = $j("#output");

  $element1.typeahead({
    "source": ["apple", "airplane", "astronaut", "balloon", "banana"],
    "items": 25
  });

  $element1.on("change", function() {
    console.log("onchange fired");
  });
</script> 
```

问题：

1) 如果您开始输入一个值并按 Tab，则预先输入会自动完成，但用户不会移动到下一个输入字段。我认为这种行为是错误的。Tab 键应该将用户带到下一个字段。但是，也许有充分的理由说明它为什么会这样？有人知道吗？

2）如果我附加一个 jquery onchange 事件，那么它将在 firefox 中被触发两次（但不是 chrome 或 IE）。为什么会这样？您可以按照下一段中的步骤并使用此 jsfiddle 进行测试：http: [//jsfiddle.net/e4zDx/4/](http://jsfiddle.net/e4zDx/4/)

开始在第一个输入字段中输入“a”并按 Tab。该字段是自动完成的，触发了 onchange 事件，并且光标遗憾地保留在输入字段中（这是问题 1）。再次按 Tab 会将光标移动到下一个字段，此时 firefox（不是 chrome 或 IE）将再次触发 onchange 事件，如我在 jsfiddle 中的输出 div 所示。

我知道我可以在 onchange 事件中捕获当前值并将其存储在元素的属性中，例如 data-oldvalue 并且仅在当前值与旧值不同时才执行 onchange。但是，我真正想知道的是，为什么 firefox 会触发 onchange 事件两次，而 chrome 和 ie 却没有。

我有 Windows 7，我使用的浏览器版本是：
Firefox 18.0
Chrome 23.0.1271.97 m
IE 8（浏览器模式 IE8，文档模式 IE8 标准）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:48:06.760

问题 1：我认为这不是问题，因为在第一个选项卡上它会自动完成 Typeahead，而在第二个选项卡上，光标会转到下一个字段，因为如果您想更改选择，那么您仍然在同一个字段上进行任何更改，就像在我的情况下，我在 Typeahead 完成时触发了 ajax 请求并更新了表单中的某些字段，如果用户希望更改选择，那么用户可以删除以前的选择并尝试一些新值，所以我认为它可以将光标放在同一个字段上。

问题 2：我在 Chrome 24.0.1 和 firefox 16.0.1 上尝试过 Js fiddle，并且在这两种情况下都只触发 1 个事件，可能是你的 firefox 版本有问题。

# javascript - 在主干视图结束时返回什么？

> ID：14361287
> 
> 赞同：0
> 
> 时间：2013-01-16T15:00:40.853
> 
> 标签：javascript, backbone.js, requirejs

我是 require/backbone 开发的新手，我有两种写 Views 的方法：

第一个身份证：

```
define([
'jquery', 
'backbone',
'underscore'
], function($, Backbone, _){
    var View = Backbone.View.extend({
    ...
    });
    return View;
}); 
```

第二个是：

```
define([
'jquery', 
'backbone',
'underscore'
], function($, Backbone, _){
    var View = Backbone.View.extend({
    ...
    });
    return new View;
}); 
```

第三是：

```
define([
'jquery', 
'backbone',
'underscore'
], function($, Backbone, _){
    var View = Backbone.View.extend({
    ...
    });
}); 
```

有没有人向我解释这三种写作方式有什么区别？提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:06:19.663

第一个示例将返回一个您可以实例化的对象，如果您愿意，可以返回一个类。

```
var module = require('example1'),
myObject = new module(); 
```

第二个将返回本质上是一个单例，因为后续调用 require 将返回相同的对象；

```
var myObject = require('example2'); 
```

最后一个不会返回任何东西，我不是 100% 确定，但我认为它非常没用。

# jquery - 不断获得 NaN 作为 jQuery AJAX 计算值的结果

> ID：14361289
> 
> 赞同：0
> 
> 时间：2013-01-16T15:00:41.017
> 
> 标签：jquery, html, ajax

我有这个 HTML：

```
 <div id="URLs" style="display:block">
  <div>Insert New URL:
    <br/>
    <input type="text" id="NEW" value="" />
    <br/>Inserted URLs:
    <br/>
    <textarea id="direct_URLs" rows="0"></textarea>
  </div>
  </div>
  <input id="run" type="submit" value="Insert" /> 
```

而且，我有这个 jQuery：

```
 $("#run").click(function () {
  if ($("#NEW").val() !== "") {
    $("#direct_URLs").append(($("#direct_URLs").val() == '' ? '' : "\n") + $("#NEW").val());
    $("#direct_URLs").attr('rows', function (i, val) {
      var cnt = parseInt(val, 10) || 0;
      return isNaN(cnt) ? 1 : cnt + 1;
    });
  }
  }); 
```

我一直在`NaN`上`rows=NaN`。

我已经尝试过并且确实在这里设置了提到的代码：http: [//jsfiddle.net/s3GDr/1/](http://jsfiddle.net/s3GDr/1/)，它工作得很好。但是，在我的页面上.. 它***不是***..!! 这让我发疯，我已经尝试了我所关注的每一件事（谷歌搜索，其他问题等）。拜托，一些人对此有所了解..!! :(

# mysql - SQL 查询和结果

> ID：14361290
> 
> 赞同：2
> 
> 时间：2013-01-16T15:00:42.200
> 
> 标签：mysql, join, union, normalization

首先，我想道歉，以防这是一个已知且已回答的问题，但英语不是我的母语，我什至不知道如何搜索这样的问题。所以这里。

我有一个名为电影的表。此表包含有关电影的信息。这部电影的导演和编剧也在我存储的信息中。但导演和作家都是多值属性。由于它们是多值的，它们应该存储在新表中，但是这些表将与电影表有多对多的关系，所以我制作了四个新表。

导演 -> 导演 -> 电影编剧 -> 编剧 -> 电影

[Director] 和 [writer] 持有名字 lastnames 和一个 Id 作为关键属性。[directed], [write] 持有 director 和 writer 表中的 id 键和 movie 表中的键。

当我询问特定电影（有 3 位导演和 2 位编剧）的导演和编剧姓名时，我得到的结果是::

```
D.Name      D.Lastname      W.Name  W.Lastname
----------------------------------------------
Jan         Kounen          Stanley Kubric  
Albert      Hughes          Stanley Kubric  
Len         Wiseman         Stanley Kubric  
Jan         Kounen          Alan    Moore   
Albert      Hughes          Alan    Moore   
Len         Wiseman         Alan    Moore 
```

如果我使用联合查询，我只能得到我想要的五个名字，但我无法理解谁是导演谁是作家。

```
Jan     Kounen  
Albert  Hughes  
Len     Wiseman 
Stanley Kubric  
Alan    Moore 
```

但都被列为董事。

所以我的问题是，我的设计有缺陷吗？我的查询错了吗？有没有办法让导演和作家只用一个查询而不用多重响应？

先感谢您。

编辑：：：：

谢谢大家的回复。

我试图为关系上传一张图片，但它不允许我。所以这是相关表格的代码

```
CREATE  TABLE IF NOT EXISTS `Red_Apple_storeDB`.`directed_by` (`Direc_id` INT(11) NOT NULL ,
  `Db_Title` VARCHAR(50) NOT NULL ,
PRIMARY KEY (`Direc_id`, `Db_Title`) ,
INDEX `fk_Director_has_Movie_Movie1_idx` (`Db_Title` ASC) ,
INDEX `fk_Director_has_Movie_Director1_idx` (`Direc_id` ASC) ,
CONSTRAINT `fk_Director_has_Movie_Director1`
FOREIGN KEY (`Direc_id` )
REFERENCES `Red_Apple_storeDB`.`director` (`D_id` )
ON DELETE NO ACTION
ON UPDATE NO ACTION,
CONSTRAINT `fk_Director_has_Movie_Movie1`
FOREIGN KEY (`Db_Title` )
REFERENCES `Red_Apple_storeDB`.`movie` (`MV_Title` )
ON DELETE NO ACTION
ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

CREATE  TABLE IF NOT EXISTS `Red_Apple_storeDB`.`director` (`D_Name` VARCHAR(50) NOT NULL ,
`D_lastname` VARCHAR(45) NOT NULL ,
`D_id` INT(11) NOT NULL ,
PRIMARY KEY (`D_id`) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

CREATE  TABLE IF NOT EXISTS `Red_Apple_storeDB`.`movie` (`MV_Title` VARCHAR(50) NOT NULL ,
`MV_Release_Date` DATE NOT NULL ,
`MV_Cost` BIGINT(20) NOT NULL ,
`St_Name` VARCHAR(50) NOT NULL ,
PRIMARY KEY (`MV_Title`) ,
INDEX `fk_Movie_Studio1_idx` (`St_Name` ASC) ,
CONSTRAINT `fk_Movie_Studio1`
FOREIGN KEY (`St_Name` )
REFERENCES `Red_Apple_storeDB`.`studio` (`ST_Name` )
ON DELETE NO ACTION
ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

CREATE  TABLE IF NOT EXISTS `Red_Apple_storeDB`.`writen_by` (`Writ_id` VARCHAR(45) NOT NULL ,
`Wb_Title` VARCHAR(50) NOT NULL ,
PRIMARY KEY (`Writ_id`, `Wb_Title`) ,
INDEX `fk_Writer_has_movie_movie1_idx` (`Wb_Title` ASC) ,
INDEX `fk_Writer_has_movie_Writer1_idx` (`Writ_id` ASC) ,
CONSTRAINT `fk_Writer_has_movie_Writer1`
FOREIGN KEY (`Writ_id` )
REFERENCES `Red_Apple_storeDB`.`writer` (`W_id` )
ON DELETE NO ACTION
ON UPDATE NO ACTION,
CONSTRAINT `fk_Writer_has_movie_movie1`
FOREIGN KEY (`Wb_Title` )
REFERENCES `Red_Apple_storeDB`.`movie` (`MV_Title` )
ON DELETE NO ACTION
ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

CREATE  TABLE IF NOT EXISTS `Red_Apple_storeDB`.`writer` (`W_Name` VARCHAR(50) NOT NULL ,
`W_Lastname` VARCHAR(45) NULL DEFAULT NULL ,
`W_id` VARCHAR(45) NOT NULL ,
PRIMARY KEY (`W_id`) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1 
```

我要求的一部电影，有 3 位导演和 2 位编剧。

我的查询::

```
select d_name, d_lastname,d_id
from director, movie,directed_by
where mv_title = 'from hell'
and mv_title = db_title
and direc_id = d_id

union all

select w_name, w_lastname,w_id
from movie, writer, writen_by
where mv_title = 'from hell'
and mv_title = wb_title
and writ_id = w_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:10:03.613

在您的选择查询中添加一个简单命名为 Writer 或 Producer 的列。

```
SELECT .... , 'Writer' AS Type
UNION ALL
SELECT .... , 'Producer' AS Type 
```

当您向我提供完整的表结构时，如果您愿意，我可以为您提供整个查询。

# javascript - Bit.ly API 不接受“window.location”，并记录非法调用错误

> ID：14361291
> 
> 赞同：1
> 
> 时间：2013-01-16T15:00:46.217
> 
> 标签：javascript, jquery, json, bit.ly

我在使用 bit.ly api 时遇到了一个奇怪的错误问题：

> “未捕获的类型错误：非法调用”

“long_url”变量似乎是一个问题，当我将它设置为字符串时，例如“http://www.google.com”它可以工作，并将缩短的 url 返回到控制台，但如果我设置它不是“window.location”。

我不明白为什么它不起作用（除非我有点厚）......任何帮助将不胜感激。

代码如下：

```
 function get_short_url(long_url, login, api_key, func)
    {//use bit.ly api to get shortlink of item on share button hover
        $.getJSON(
            "http://api.bitly.com/v3/shorten?callback=?", 
            { 
                "format": "json",
                "apiKey": api_key,
                "login": login,
                "longUrl": long_url
            },
            function(response)
            {
                func(response.data.url);
            }
        );
    }

    //bit.ly details
    var login = "XXXXX";
    var api_key = "XXXXX";
    var long_url = window.location;

    get_short_url(long_url, login, api_key, function(short_url) {
        console.log(short_url);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:04:02.410

试试这个...

```
var long_url = window.location.toString(); 
```

`window.location`是一个对象。

# c# - 在 C# 中获得更快的 Ping 结果

> ID：14361295
> 
> 赞同：1
> 
> 时间：2013-01-16T15:00:53.360
> 
> 标签：c#, winforms, ping

我正在制作一个工具来使用.NET 中的“PingReply”类测试与某些主机的连接。我的问题是，如果 ping 结果失败，则需要一段时间才能获得结果。它是局域网环境，所以我已经可以假设如果连接时间超过 100 毫秒，则连接失败。下面的代码显示了 5 秒后的结果，即 5000 毫秒，如果与主机的连接失败。即使连接失败，我能否获得更快的结果？

```
Ping x = new Ping();
PingReply reply = x.Send(IPAddress.Parse("192.168.0.1")); 
if (reply.Status == IPStatus.Success)
{
    //Do something
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:04:36.110

由于我们看不到您的 ping 对象，因此假设您不知道 TIMEOUT。我通常发送一个异步 ping，并将超时设置为 3 秒。

```
 try
            {
                Ping ping = new Ping();
                ping.PingCompleted += (sender, e) =>
                {
                    if (e.Reply.Status != IPStatus.Success)
                        // Report fail
                    else                    
                       // Report success

                };
                ping.SendAsync(target, 3000, target); // Timeout is 3 seconds here
            }
            catch (Exception)
            {
                return;
            } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:05:58.753

您可以将超时传递给 Ping.Send() 方法。请检查过载的成员。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T15:07:27.447

[Ping.Send()](http://msdn.microsoft.com/en-us/library/yf697k33.aspx)有一个带有超时参数的重载：

```
PingReply reply = x.Send(IPAddress.Parse("192.168.0.1"), 100); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T15:35:40.333

您可以使用异步委托来启动 Ping。异步委托有一个名为 BeginInvoke 的函数，它将启动一个后台线程，该线程将立即返回一个 IAsyncResult。IAsyncResult 有一个称为 AsyncWaitHandle 的等待处理程序，它有一个称为 WaitOne 的方法，可以为该方法分配一个等待时间。这将在给定时间（以毫秒为单位）冻结当前线程，在您的情况下为 100，然后您可以使用属性 IsCompleted 来检查线程是否已完成其工作。例如：

```
Func<PingReply>  pingDelegate = () => new Ping().Send(IPAddress.Parse("192.168.0.1"));

IAsyncResult result = pingDelegate.BeginInvoke(r => pingDelegate.EndInvoke(r), null);

//wait for thread to complete
result.AsyncWaitHandle.WaitOne(100);

if (result.IsCompleted)
{
    //Ping Succeeded do something
    PingReply reply = (PingReply) result;

    //Do something with successful reply
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-21T13:02:57.780

我也创建了一个实时主机扫描仪。它使用 ARP 检查计算机是否在线。ARP 请求比 ping 主机要快得多。这是我用来检查主机是否可用的代码：

```
//You'll need this pinvoke signature as it is not part of the .Net framework
[DllImport("iphlpapi.dll", ExactSpelling = true)]
public static extern int SendARP(int DestIP, int SrcIP, 
                                 byte[] pMacAddr, ref uint PhyAddrLen);

//These vars are needed, if the the request was a success 
//the MAC address of the host is returned in macAddr
private byte[] macAddr = new byte[6];
private uint macAddrLen;

//Here you can put the IP that should be checked
private IPAddress Destination = IPAddress.Parse("127.0.0.1");

//Send Request and check if the host is there
if (SendARP((int)Destination.Address, 0, macAddr, ref macAddrLen) == 0)
{
    //SUCCESS! Igor it's alive!
} 
```

如果你有兴趣， [Nmap 也使用这种技术](http://nmap.org/book/man-host-discovery.html)来扫描可用的主机。

> ARP 扫描让 Nmap 及其优化算法负责 ARP 请求。如果它得到响应，Nmap 甚至不需要担心基于 IP 的 ping 数据包，因为它已经知道主机已启动。这使得 ARP 扫描比基于 IP 的扫描更快、更可靠。因此，当扫描 Nmap 检测到的以太网主机位于本地以太网网络时，默认情况下会执行此操作。即使指定了不同的 ping 类型（例如 -PE 或 -PS），Nmap 也会对同一 LAN 上的任何目标使用 ARP。

这仅适用于当前子网！只要请求机器和目标之间没有路由器，它就可以正常工作。

> ARP 是一种不可路由的协议，因此只能在同一以太网网络上的系统之间使用。[...] arp-scan 可用于发现本地网络上的 IP 主机。它可以发现所有主机，包括那些阻止所有 IP 流量的主机，例如防火墙和带有入口过滤器的系统。-[摘自 NTA-Monitor 维基](http://www.nta-monitor.com/wiki/index.php/Arp-scan_User_Guide)

有关 SendARP 功能的更多信息，您可以查看[pinvoke.net](http://pinvoke.net/default.aspx/iphlpapi/SendARP.html)文档。

# sql - 在关系数据库中存储 traceroute 数据

> ID：14361297
> 
> 赞同：0
> 
> 时间：2013-01-16T15:00:54.270
> 
> 标签：sql, database-design, relational-database, rdbms

如果我所说的没有意义，请要求澄清。

我正在尝试将 traceroute 数据存储在关系数据库中，traceroute 数据的结构如下：

```
public class Traceroute  
{
    IPAddress origin; 
    IPAddress destination;  
    Collection<Hop> hops;  
}

public class Hop  
{  
     int[] times;  
     IPAddress here;  
     Hop previousHop;
     Hop nextHop;
} 
```

现在我正在寻找的是一种存储这些数据的关系方式，最终发生的是我的数据库被严重破坏（理论上）。有没有办法正确地（正确地我的意思是最小的空间）将跟踪路由数据存储在关系数据库中并有效（快速）查询它？

**理论表结构**

```
Traceroutes  
(  
    traceroute_id number,
    previousNode varchar2(200), --nullable  
    nextNode varchar2(200), --nullable  
    rtt_1 number,  
    rtt_2 number,  
    rtt_3 number,  
    currentNode varchar2(200)
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:29:48.707

这个问题不可能有确定的答案。您可以选择许多选项。纯粹的关系你可能会想出这样的东西（这不会编译/运行，它只是为了演示）

```
TraceRoute (
    TraceRouteID INTEGER PRIMARY KEY,
    OriginIP NVARCHAR,
    DestinationIP NVARCHAR
)

Hop (
    HopID INTEGER PRIMARY KEY,
    TraceRouteID INTEGER, -- foreign key linking to TraceRoute table PK
    HopNumber INTEGER, -- this instead of storing previus and next nodes
    Time1 INTEGER,
    Time2 INTEGER,
    Time3 INTEGER,
    Host NVARCHAR
) 
```

请注意，您不需要存储每个跃点彼此相关的位置。每个跟踪路由请求都包含许多跃点，您可以按跃点数对其进行排序。

下一步将是编写查询以提取信息。看看表现如何。如果您不满意，请尝试调整您的数据库（索引列等）。如果您仍然不满意，请合并 TraceRoute 和 Hop 表（有时可以进行一些重复）。

真的，您需要停止理论上的思考并实际尝试一下！

# objective-c - FirstResponder 缺少重做：

> ID：14361298
> 
> 赞同：7
> 
> 时间：2013-01-16T15:00:56.437
> 
> 标签：objective-c, macos, undo, first-responder, redo

为什么我在 InterfaceBuilder 文件中的 FirstResponder 缺少`redo:`连接（在`Received Actions`列表中）？`undo:`存在，但`redo:`不存在。我该如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-28T14:36:04.257

这是一个错误。解决方法是将其放入某个文件中：

```
@interface NSResponder (Redo)
- (IBAction)redo:(id)sender;
@end 
```

然后在 Interface Builder 中建立连接。完成后，您可以删除此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:49:42.133

这是 Xcode 中的一个错误，它看不到 redo: 动作，即使它在那里。作为一种解决方法，您可以创建自定义操作重做：用于建立连接。

在这里查看我的雷达：http: [//www.cocoanetics.com/2013/01/radar-interface-builders-first-responder-is-missing-some-editing-actions/](http://www.cocoanetics.com/2013/01/radar-interface-builders-first-responder-is-missing-some-editing-actions/)

# maven - Netbeans中的maven问题

> ID：14361300
> 
> 赞同：0
> 
> 时间：2013-01-16T15:00:58.377
> 
> 标签：maven, netbeans

我想在 Netbeans 中创建 Maven 项目。所以，我执行 File->New project->Maven->Java Application。之后我尝试构建项目并得到错误： org.apache.maven.plugins:maven-surefire-plugin:jar:2.10 的 POM 丢失，没有可用的依赖信息。但是我可以使用 mvn compile 从命令行构建这个项目。你能告诉我Netbeans有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:36:10.780

NetBeans 默认使用 3.0.4 maven。除非您在工具/选项菜单中更改它。您是使用 3.0.4 构建还是使用一些早期版本（2.x）？这可以解释这种行为，因为 3.0.4 不会盲目地依赖本地存储库中的工件，但还会参考一些额外的元数据，以确保您的项目使用给定的一组定义的存储库构建。

我遇到问题时的一个常见示例。我直接使用中央所有下载。当我稍后添加镜像时，会再次通过镜像检查所有工件，以确保它们可以访问。如果 Mirror 实际上没有镜像中央，那么我会得到一个错误。

另一个常见的例子是：使用 2.x 构建时，不写入额外的元数据，稍后使用 3.0.4 构建时，无论本地 repo 中存在什么，都会检查所有远程上下文，并构建额外的元数据文件。

# ember.js - Emberjs 对象避免 switch case 方法哈希

> ID：14361304
> 
> 赞同：0
> 
> 时间：2013-01-16T15:01:07.327
> 
> 标签：ember.js

我有一个有几个动作的 Ember 对象：

```
MyObject = Ember.Object.extend {
 action1: ->
  console.log "do 1"

 action2: ->
  console.log "do 2"
} 
```

我想根据某些条件调用其中一项操作。简单的方法是检查此条件并使用`if`or调用所需的条件`switch-case`。但是，我需要一些更具可扩展性的东西，比如对象内部的方法哈希，并通过发送它们的名称来调用所需的方法，例如`object.exec('action1')`.

ember 对象是否已经具有此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:13:28.030

这是javascript中动态方法调用方法的快速实现。

```
var obj = {
 action1 : function(item) {
    return item;
 }, 
 action2 : function(item) { 
    return item;
 }, 

 exec:function(name){
    if(this[name] ==== 'undefined') return;
    var args = Array.prototype.slice.call(arguments);
    return this[name](args.slice(1,args.length))
 }
}

obj.exec('action1','Hello')
obj.exec('action2','World')

Should return Hello World 
```

# visual-studio-2010 - 剃刀格式的 内容

> ID：14361308
> 
> 赞同：5
> 
> 时间：2013-01-16T15:01:19.020
> 
> 标签：visual-studio-2010, razor, indentation

我注意到 Razor`<text>`标签拒绝遵循任何格式约定。例如，在格式化`cshtml`文档时，我最终得到如下代码：

```
@MyHelper.MyMethod(@<div>
    <p>Hello world</p>
</div>)

@MyHelper.MyMethod(@<text>
<p>Hello world</p>
</text>) 
```

[请注意，这也不特定于 Razor 模板函数，`<text>`任何地方的块都会做同样的事情。]

客户端 HTML 标记（*及其内容*）例如`<div>`遵循我指定的格式样式，但是无论我在哪里添加（*或删除*）`<text>`元素`Tag Specific Options...`，都没有效果。期望的结果是`<text>`元素内容的格式与`<div>`前面示例中的元素内容一样。

是否有任何技巧或变通方法可以在`<text>`元素上强制使用与其他块级客户端 HTML 元素（*`<div>`、、`<section>`等*）相同的格式样式？

我已经看到 Razor 语言的其他此类格式问题，例如[here](https://stackoverflow.com/questions/8269660/how-can-i-make-code-indentation-behave-correctly-in-vbhtml-razor-files)和[here](https://stackoverflow.com/questions/6902204/why-doesnt-visual-studio-code-formatting-work-properly-for-razor-markup)，因此这并非没有先例，而且似乎可能没有解决方案。无论哪种方式，也许有人遇到了修复。

[这是一个 Razor 2.X 网站，在 VS 2010 中构建]

* * *

**附录**
^(（*我已经厌倦了这个。*）)

或许这个问题已经在 2012 年解决了；不知道，没更新。但是，`<text>`块、`@`带前缀的块等格式不正确。

另一个例子，这次是`@`-prefixed 块（*结构等*）

```
@foreach (var foo in bar) {
    <div>@(foo.A)</div>
    <div>@(foo.B)</div>
    @foreach (var qux in foo.C) {
        <div>@(qux.D)</div>
        <div>@(qux.E)</div>
    }
} 
```

看起来或多或少都很好，对吧？是的，不幸的是它实际上在语法上是无效的。不允许`@`在内部使用-prefix，因为它出现在外部块（*外部*）的不间断范围内。`foreach`*`foreach`*

解决方案？`@`从内部省略`foreach`。格式化时会发生什么？

```
@foreach (var foo in bar) {
    <div>@(foo.A)</div>
    <div>@(foo.B)</div>
    foreach (var qux in foo.C) {
    <div>@(qux.D)</div>
    <div>@(qux.E)</div>
    }
} 
```

太棒了，失去了内在的缩进。便便。

好的，那些积木怎么样`<text>`，它们一定对某些东西有用，对吧？当然，将外部`foreach`块的内容包装在一个`<text>`块中。现在，就 Razor 而言，`@`- 给内部加前缀在`foreach`语法上是有效的。

```
@foreach (var foo in bar) {
    <text>
    <div>@(foo.A)</div>
    <div>@(foo.B)</div>
    @foreach (var qux in foo.C) {
        <div>@(qux.D)</div>
        <div>@(qux.E)</div>
    }
    </text>
} 
```

好的，*好的*；然而，虽然这有效，但它确实说明了我原来的问题。*现在`<text>`块内容不遵守 indentation*。为什么我们不能有：

```
@foreach (var foo in bar) {
    <text>
        <div>@(foo.A)</div>
        <div>@(foo.B)</div>
        @foreach (var qux in foo.C) {
            <div>@(qux.D)</div>
            <div>@(qux.E)</div>
        }
    </text>
} 
```

或者更好的是，在其他范围内拧紧`<text>`块和允许前缀构造：`@`

```
@foreach (var foo in bar) {
    <div>@(foo.A)</div>
    <div>@(foo.B)</div>
    @foreach (var qux in foo.C) {
        <div>@(qux.D)</div>
        <div>@(qux.E)</div>
    }
} 
```

**tl;博士**

叫我肛门，叫我疯子。没关系；据我所知，无论我的格式设置如何，该产品都无法正常工作。

**有谁知道如何强制 VS 2010 Razor 格式按照描述的方式运行？（*或者，这只是我的强迫症的一些白日梦吗？*）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:13:23.970

一种解决方法是：

1.  右键单击`cshtml`文件
2.  打开用...
3.  选择`XML (Text) Editor`
4.  按**CTRL + E、D**

# php - php - 为另一台服务器上的文件生成限时下载链接

> ID：14361310
> 
> 赞同：0
> 
> 时间：2013-01-16T15:01:20.050
> 
> 标签：php, download

我把我的文件放在我的 VPS 上，用户可以直接下载所有文件。但我想隐藏我的实际文件路径并制作限时下载链接。我用谷歌搜索并找到了一些解决方案，但其中大多数是针对同一服务器上的文件，其中一些在 VPS 端有一些编码，但我无法在我的 VPS 上编写任何 php 代码，因为它不支持 php。我还尝试了一些运行良好的脚本，但生成的链接不可恢复，并且在下载完成之前没有显示文件大小。我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:04:14.350

如果您将 apache 作为 Web 前端运行，则可以使用 mod_auth_token (http://code.google.com/p/mod-auth-token/) apache 模块。这是您可以处理令牌生成过程的 PHP 端的方式：

```
<?php
// Settings to generate the URI
$secret = "secret string";             // Same as AuthTokenSecret
$protectedPath = "/downloads/";        // Same as AuthTokenPrefix
$ipLimitation = false;                 // Same as AuthTokenLimitByIp
$hexTime = dechex(time());             // Time in Hexadecimal
//$hexTime = dechex(time()+120);         // Link available after 2 minutes      
$fileName = "/file_to_protect.txt";    // The file to access

// Let's generate the token depending if we set AuthTokenLimitByIp
if ($ipLimitation) {
  $token = md5($secret . $fileName . $hexTime . $_SERVER['REMOTE_ADDR']);
}
else {
  $token = md5($secret . $fileName. $hexTime);
}

// We build the url
$url = $protectedPath . $token. "/" . $hexTime . $fileName;
echo $url;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:10:56.317

如果您无法更改实际的下载链接，它们将一直可供下载，直到它们从服务器中删除。当然，您可以制作一个脚本，根据系统时间对下载 URL 进行加密，但是一旦用户在一段时间内调用它们，他就会从脚本中获取解密的 URL。

# eclipse - Maven tomcat 插件不允许步入依赖的 jars

> ID：14361311
> 
> 赞同：0
> 
> 时间：2013-01-16T15:01:25.947
> 
> 标签：eclipse, debugging, maven, tomcat

我正在使用 Maven Tomcat 插件来测试使用 Hibernate 的 Maven Web 服务项目。

我的 POM 看起来像这样：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.honeywell.gt</groupId>
    <artifactId>WSOCCMeoReports</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>Simple CXF project using spring configuration</name>
    <description>Simple CXF project using spring configuration</description>

    <properties>
        <shiro.version>1.2.1</shiro.version>
        <spring.version>3.1.2.RELEASE</spring.version>                      
        <cxf.version>2.6.1</cxf.version>                        
        <hibernate.version>3.6.5.Final</hibernate.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxrs</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>${cxf.version}</version>
        </dependency>    
       <!-- 
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
       <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>${hibernate.version}</version>
        </dependency> -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.6</version>
        </dependency>                          

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>
         <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>                   
        </dependency> 

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
       <dependency>
            <groupId>org.apache.shiro</groupId>
            <artifactId>shiro-core</artifactId>
            <version>${shiro.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.shiro</groupId>
            <artifactId>shiro-web</artifactId>
            <version>${shiro.version}</version>
        </dependency>       
        <dependency>
          <groupId>org.apache.shiro</groupId>
          <artifactId>shiro-spring</artifactId>
          <version>${shiro.version}</version>
         </dependency>

        <dependency>
            <groupId>com.sybase.jdbc</groupId>
            <artifactId>SybDriver</artifactId>
            <version>3.0.0</version>
        </dependency>                                                       

    </dependencies>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <!-- mvn clean install tomcat:run-war to deploy
                    Look for "Running war on http://xxx" and
                    "Setting the server's publish address to be /yyy"
                    in console output; WSDL browser address will be
                    concatenation of the two: http://xxx/yyy?wsdl
                    -->
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>tomcat-maven-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>start-tomcat</id>
                            <goals>
                                <goal>run-war</goal>
                            </goals>
                            <phase>pre-integration-test</phase>
                            <configuration>
                                <port>${test.server.port}</port>
                                <path>/webservice</path>
                                <fork>true</fork>
                                <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-eclipse-plugin</artifactId>
                    <configuration>
                        <projectNameTemplate>[artifactId]-[version]</projectNameTemplate>
                        <wtpmanifest>true</wtpmanifest>
                        <wtpapplicationxml>true</wtpapplicationxml>
                        <wtpversion>2.0</wtpversion>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

</project> 
```

调试目标是`tomcat:run-war`

在服务中遇到断点后，我无法进入第三方依赖项，例如 Hibernate。但是，如果我从同一个 Maven Web 服务项目运行单元测试，我可以进入 Hibernate。

编辑1：

我遇到了[这个](https://stackoverflow.com/questions/1808651/eclipse-debugger-attaching-source-code-of-maven-dependencies)并得到了一些关于附加源的想法。事实上，我正在尝试调试 Hibernate，所以我编辑了源代码查找并在我的 .m2 存储库中添加了以下外部档案的路径：

```
hibernate-entitymanager-3.6.5.Final
hibernate-core-3.6.5.Final. 
```

保存的更改和 Eclipse 仍然找不到要进入的源。外面有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:42:36.003

问题似乎是 Maven Plugin for Eclipse 的一个已知问题，如此[处所示](https://issues.sonatype.org/browse/MNGECLIPSE-983)。

[这篇文章](https://stackoverflow.com/questions/1808651/eclipse-debugger-attaching-source-code-of-maven-dependencies?lq=1)很有帮助，但我发现对于 hibernate 3.6.5，我必须将 hibernate-core-3.6.5.Final-sources.jar 添加到源查找路径而不是 hibernate-core-3.6.5.Final.jar。

# c# - MySql 和实体框架代码优先

> ID：14361314
> 
> 赞同：3
> 
> 时间：2013-01-16T15:01:26.960
> 
> 标签：c#, mysql, frameworks, entity

MySql 和 Entity Framework Code First 有问题。

我在 web.config.xml 的连接字符串

```
<add name="EntityContext" connectionString="Server=127.0.0.1; port=8080 Database=simple_crud; Uid=root; Pwd=;" providerName="MySql.Data.MySqlClient" /> 
```

我的背景：

```
public class EntityContext : DbContext
{
    public DbSet<Pessoa> Pessoas { get; set; }
} 
```

我的课：

```
[Table("pessoa")]
public class Pessoa
{
    [Key]
    [Column("Id")]
    public int Id { get; set; }

    [Column("Nome")]
    public string Nome { get; set; }
} 
```

我的控制器

```
public EntityContext db = new EntityContext();

public ActionResult Index()
{
     List<Pessoa> pessoas = db.Pessoas.ToList(); // here is the error
     return View(pessoas);
} 
```

所以，当我按 F5 时，我得到了这个：“输入字符串的格式不正确”。

我想念什么？

**更新**

堆栈跟踪：

> [FormatException: 输入字符串格式不正确。]
> System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +9591147 System.Number.ParseUInt32(String value, NumberStyles options, NumberFormatInfo numfmt ) +119
> System.String.System.IConvertible.ToUInt32(IFormatProvider provider) +46 System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider) +9509065
> MySql.Data.MySqlClient.MySqlConnectionStringBuilder.ChangeType(Object value, Type t ）+240
> MySql.Data.MySqlClient.MySqlConnectionStringBuilder.SetValue（字符串关键字，对象值）+399
> MySql.Data.MySqlClient.MySqlConnectionStringBuilder.set_Item（字符串关键字，对象值）+54
> System.Data.Common.DbConnectionStringBuilder.set_ConnectionString（字符串值）+127
> MySql.Data.MySqlClient.MySqlConnection.set_ConnectionString（字符串值）+289
> System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig（字符串名称）+409
> System.Data .Entity.Internal.LazyInternalConnection.Initialize() +49
> System.Data.Entity.Internal.LazyInternalConnection.get_ConnectionHasModel() +10 System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +265 System.Data.Entity.Internal。 InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +17
> System.Data.Entity.Internal.Linq.InternalSet 1.GetEnumerator() +15 System.Data.Entity.Infrastructure.DbQuery 1..ctor(IEnumerable`1.Initialize() +62
> System.Data.Entity.Internal.Linq.InternalSet`
> `1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() +40 System.Collections.Generic.List``1 collection) +315 System.Linq.Enumerable.ToList(IEnumerable`1 来源）+58 SimpleMysqlCrud.Controllers.PessoaController.Index() in f:\users\pablo.rocha.fti\documents\visual studio 2010\Projects\SimpleMysqlCrud\SimpleMysqlCrud\Controllers\PessoaController.cs:16 lambda_method(Closure, ControllerBase , Object[] ) +62
> System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase 控制器, Object[] 参数) +17
> System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary 2 参数) +27 System.Web. Mvc.<>c_ *DisplayClass15.b* _12() +55 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func 1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +208
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`
> *`1 continuation) +263
> System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList``2 parameters) +191
> System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
> System.Web.Mvc.Controller.ExecuteCore() +116
> System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
> System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
> System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
> System.Web.Mvc.Async.<>c__DisplayClass8`1.b__7(IAsyncResult *) +12 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62 System.Web.Mvc.<>c* _DisplayClasse.b_d *() +50
> System.Web.Mvc.SecurityUtil。 b* _0（动作 f）+7 System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust（动作动作）+22 System.Web.Mvc.MvcHandler.EndProcessRequest（IAsyncResult asyncResult）+60
> System.Web.Mvc.MvcHandler.System.Web。 IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +9
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970141 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:37:25.623

将所有评论收集到答案中。

在port=3306后面加分号；并检查您的 mysql 监听端口（可能是 3306，mysql 默认？）。结果连接字符串：

```
<add name="EntityContext" connectionString="Server=127.0.0.1; port=3306; Database=simple_crud; Uid=root; Pwd=;" providerName="MySql.Data.MySqlClient" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-11T12:54:36.313

MySql 默认端口为 3306；所以这里就不用提了，

例如：

```
<add name="DefaultConnection" providerName="MySql.Data.MySqlClient" connectionString="SERVER=localhost;DATABASE=testdb;UID=test;PASSWORD=test123;" /> 
```*

# c++ - 将图像像素作为浮点数组访问

> ID：14361322
> 
> 赞同：2
> 
> 时间：2013-01-16T15:01:55.610
> 
> 标签：c++, image-processing, opencv

我想在opencv中以浮点数组的形式访问图像像素。我做了以下事情：

```
Mat input = imread("Lena.jpg",CV_LOAD_IMAGE_GRAYSCALE);
int height = input.rows;
int width = input.cols;

Mat out;
input.convertTo(input, CV_32FC1);
copyMakeBorder(input, input, 3, 3, 3, 3, 0);

out = Mat(height, width, input.type());

float *outdata = (float*)out.data;
float *indata = (float*)input.data;

for(int j = 0; j < height; j++){
    for(int i =0; i < width; i++){
        outdata[j*width + i] = indata[(j* width + i)];
    }
}

normalize(out, out,0,255,NORM_MINMAX,CV_8UC1);

imshow("output", out);
waitKey(); 
```

这应该在“out”中返回原始图像，但是，我得到了一些奇怪的图像。任何人都可以解释代码有什么问题。我想我需要使用一些步长（widthStep）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:34:41.093

要真正弄清楚问题所在，请想象一张 16 x 16 的图像。现在考虑线性表示中的像素数 17。

17是质数。如果行或列宽为 16，则不会`j*i`在像素 17 处索引您的源图像。因此，17、19、23 等元素将未初始化或最多为 0，从而导致“奇怪”的输出。

线性表示中的像素 8 怎么样？相比之下，你的循环会被你的循环击中四次，即 1x8、2x4、4x2 和 8x1！

@NateKohl 在他的回答中提出的索引将修复它，因为他将行位置乘以行的长度，然后简单地沿着列走。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:38:18.257

一些想法：

* * *

类似的东西`outdata[j*width + i]`是这类事情的更标准模式。

* * *

根据[opencv 文档](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)，有一个模板化`Mat::at(int y, int x)`方法允许您访问矩阵的各个元素。

```
float f = input.at<float>(0, 0); 
```

**请注意**，这要求您的基础矩阵类型是`float`- 它不会为您进行转换。

* * *

或者，您可以逐行访问数据，如本例所示，它总结了`M`类型矩阵的正元素`double`：

```
double sum=0;
for(int i = 0; i < M.rows; i++)
{
    const double* Mi = M.ptr<double>(i);
    for(int j = 0; j < M.cols; j++)
        sum += std::max(Mi[j], 0.);
} 
```

* * *

如果这些都不起作用，我建议创建一个具有已知值的小矩阵（例如，具有 1 个黑色像素和 3 个白色像素的 2x2 矩阵）并使用它来帮助调试您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:13:59.573

你可以试试这个循环...

```
 for(int row=0;row<height;row++)
    {
        for(int col=0;col<width;col++)
        {
            float float_data = input.at<float>(row,col);
            // do some processing with value of float_data
            out.at<float>(row,col) = float_data;
        }
    } 
```

是否需要将和Mats 的`uchar`指针转换为浮点指针？`input``out`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T16:28:42.757

线

```
 copyMakeBorder(input, input, 3, 3, 3, 3, 0); 
```

改变输入的尺寸，它向图像添加 6 行和 6 列。这意味着当您定义并尝试遍历输入值时，您的高度和宽度变量持有错误的值。

如果您将订单更改为

```
copyMakeBorder(input, input, 3, 3, 3, 3, 0);

int height = input.rows;
int width = input.cols; 
```

它应该可以正常工作。

# c - 使用外部关键字在c中导入函数

> ID：14361327
> 
> 赞同：0
> 
> 时间：2013-01-16T15:02:00.530
> 
> 标签：c, function, import, extern

我在将外部函数导入到主 c 文件时遇到问题。

这是我的最小代码：

```
/* main.c */

#include<stdio.h>
extern int func() 

int main(){
    extern int func();
}

/*external file with one function that I want to     
import*/

#include<stdio.h>

int func(){
    printf("Hello World Again\n");
} 
```

我像这样编译和运行 - **gcc main.c**然后**./a.out**但什么也没发生。任何的想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:03:25.113

`func`您还必须编译包含的文件

```
gcc -Wall main.c external_file.c 
```

（请注意，`-Wall`编译器命令中的 不是绝对必要的，但是非常好的做法）

正如其他人所指出的，您还需要修复要调用的代码，`func`而不仅仅是重新声明它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:03:16.050

因为你只**声明**了函数，你从来没有调用过它！

```
extern int func(); 
```

声明一个函数。要调用它，您必须具有：

```
int main()
{
   func();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:03:49.700

您只是在 main 函数中再次声明..

您需要调用该函数才能工作..#include

```
extern int func() 

int main(){
    func();
}

/*external file with one function that I want to     
import*/

#include<stdio.h>

int func(){
    printf("Hello World Again\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:04:41.180

编辑：问题已经改变。

`extern`仅用于外部变量。您只需要该功能的原型。

```
#include <stdio.h>

void func(void);    /* <-- prototype */

int main(int argc, char * argv[])
{
    func();

    return 0;
}

void func(void){
    printf("Hello World Again\n");
} 
```

注意几件事。原型`int func()`意味着在 C 中*没有参数检查*- 这与 C++ 不同。此外，您没有从函数返回任何内容，因此我将其替换为`void func(void)`

# java - 在 WEB-INF 文件夹下包含 JSP 文件

> ID：14361330
> 
> 赞同：3
> 
> 时间：2013-01-16T15:02:13.620
> 
> 标签：java, spring, jsp, spring-mvc, include

有什么方法可以在 WEB-INF 下包含本地存储文件夹中的 JSP 文件？

我在我的 config.properties 中定义了绝对路径*${externalFolder}*到包含外部 jsp 文件的文件夹、映射到*/page*的控制器和位于 WEB-INF/jsp/ 目录中的 jsp 页面*page.jsp 。*

在这个文件 page.jsp 我想调用：

**WEB-INF/jsp/page.jsp**

```
<%@page session="true" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
 <html>
...
<body>
<jsp:include page="${externalFolder}/someJspFile.jsp" />
</body>
</html> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:05:40.920

我使用这个自定义 servlet 解决了这个问题： [Content tag lib](http://www.servletsuite.com/servlets/cnttag.htm)。

> 自定义 JSP 标记。允许您将文件内容包含到当前页面中。标记类似于标准 JSP 包含，但现在您可以包含位于 Web 应用程序之外的文件。例如：
> 
> ```
>  <%@ taglib uri="taglib.tld" prefix="add" %>
>  <add:content file="c:/mydata/myfile.jsp"/> 
> ```
> 
> 包括给定文件的内容（例如 .html 或 .jsp）。参数是：
> 1\. `file`：文件的完整路径
> 2\. `flush`：*可选参数。*可能的值为真或假。如果此值为 true，则标记刷新缓冲区。默认值为假。
> 3\. `cond`：*可选参数。*描述一个布尔值标签的行为依赖。默认值为 true（包括内容）。

# python - 在 Windows RT 上启动时运行的脚本

> ID：14361331
> 
> 赞同：0
> 
> 时间：2013-01-16T15:02:13.057
> 
> 标签：python, windows, windows-8, startup, windows-rt

我有一个 python 脚本，它基本上启动了一个 Xmlrpc 服务器。我需要这个脚本始终运行。我有一个可能要求系统自行重启的功能。所以一旦系统重新启动，我需要让脚本再次运行。

如何将此添加到 Windows RT 启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:06:40.103

Windows 应用商店应用无法触发系统重启，也无法运行 Python 脚本，除非您在应用内实现 Python 解释器。Windows 应用商店应用程序在自己的沙箱中运行，并且与系统其余部分的通信方式非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:41:02.130

您可以创建计划任务以在登录或启动时运行。运行注册表项和启动文件夹在 Windows RT 上不起作用，但任务计划程序可以。

题外话（因为我似乎无法对另一个答案添加评论）已经使用越狱将 Python 的副本移植到 Windows RT。

# javascript - 判断 url 是真还是假

> ID：14361337
> 
> 赞同：1
> 
> 时间：2013-01-16T15:02:25.937
> 
> 标签：javascript, asp.net

我将 ASP.NET 与 javascript 一起使用，

我的代码中有一个问题

我需要确定 url 是否存在

```
url="http://www.404.com"    
If url == exists then
{

}
else if url == not then
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:59:09.497

如果您想在 C# 中执行此操作，请尝试此操作，它将为您验证任何 url

```
private bool ValidateUrl(string url)
{
    try
    {
        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
        request.Method = "HEAD";
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        return (response.StatusCode == HttpStatusCode.OK);
    }
    catch
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T16:44:45.360

您可以使用 C# Ping 和 PingReply 类。

```
private bool ValidateUrl(string url)
{
    try
    {
        Ping x = new Ping();
        int timeout=500;
        PingReply reply = x.Send(url,timeout); 
        if(reply.Status == IPStatus.Success)
          {
              return true;
          }
        else
          {
              return false;
          }
    }
    catch
    {
        return false;
    }
} 
```

# java - 创建以字符串形式出现的类的新实例并更新集合方法

> ID：14361343
> 
> 赞同：1
> 
> 时间：2013-01-16T15:02:33.703
> 
> 标签：java, reflection

我正在获取类名（字符串），并且该类的 sets 方法很少，并且由于它是动态的（我可以获取任何类），因此我需要使用所有 sets 方法并使用 data 更新它。我怎样才能做到这一点 ？

要获取类字段，我使用以下代码

```
className = obj.getClassName();
Class<?> classHandle = Class.forName(className); 
```

例如在这里我需要更新名字和姓氏

```
public class Person {

private String id;
    private String firstName;
    private String lastName;

    public void setLastName(String lastName) {

        this.lastName = lastName;
    }

    public void setfirstName(String firstName) {

        this.firstName = firstName;
    } 
```

或不同的班级我需要设置薪水和职位描述

```
public class Job {

  private double salery;
  private String jobDescr;

  public void setSalery(double salery) {
    this.salery = salery;
  }

  public void setJobDescr(String jobDescr) {
    this.jobDescr = jobDescr;
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:17:27.123

首先，你所做的很好。我假设您有一个`Map<String, Object>`要设置的属性：`attributeMap`.

```
//this is OK
className = obj.getClassName();
Class<?> classHandle = Class.forName(className);

//got the class, create an instance - no-args constructor needed!
Object myObject = classHandle.newInstance();

//iterate through all the methods declared by the class  
for(Method method : classHandle.getMethods()) {
   //check method name
   if(method.getName().matches("set[A-Z].*") 
       //check if it awaits for exactly one parameter
       && method.getParameterTypes().length==1) {

       String attributeName = getAttributeName(method.getName());
       //getAttributeName would chop the "set", and lowercase the first char of the name of the method (left out for clarity)

       //To be extra nice, type checks could be inserted here...
       method.invoke(myObject, attributeMap.get(attributeName));            

   }
} 
```

当然，很多异常处理是要做的，这只是一个基本的思路，要做什么...

推荐阅读：

*   [班级](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)
*   [类.getMethods()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getMethods%28%29)
*   [方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html)
*   [方法.invoke()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)

# block - 消除 在 EPiServer 7 中围绕共享块生成

> ID：14361347
> 
> 赞同：3
> 
> 时间：2013-01-16T15:02:37.333
> 
> 标签：block, episerver, episerver-7

Episerver 总是将共享块包装在标签中。我想摆脱这个。因此，如果在我的 LinkBlock 中有一个只有
`<a href="#"`>link `</a`>
我不会 在用户视图中获得
`<div`> `<a href="#"`>link `</a`> `</div`>的模板。

如果这是不可能的，我该如何将`<div`> 更改为任何其他标签，或者在其上放置一个 CssClass。就像在非共享块中是可能的：
`<EPiServer:Property runat="server" PropertyName="RightContentArea" CustomTagName="aside" CssClass="column-2 sidebar"`> `</EPiServer:Property`>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:38:27.583

我相信这是 ContentArea 属性的呈现，它在它包含的块周围添加了 div 标签。

EPiServer 建议，[为了保留块元素本身的编辑功能，他们需要在它们周围放置 div](http://world.episerver.com/Modules/Forum/Pages/Thread.aspx?id=69955)。

一个可能的解决方案可能是您自己[对内容区域进行自定义渲染](http://joelabrahamsson.com/custom-rendering-of-content-areas/)，但根据您使用的块模板的类型，让编辑工作可能会很棘手。链接中的示例用于渲染多个相同类型的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-28T12:39:52.663

我在cshtml中使用了这个技巧：

```
@RenderBlocks(Model.CurrentPage.Content1)

@* ---------------------------------------------------------------------------------- *@
@* Render ContentArea without addition DIVs that EpiServer embed. That breaks layout a lot. *@
@helper RenderBlocks(EPiServer.Core.ContentArea content) { 
  if(null != content){
    var blocks = content.FilteredContents.ToArray();
    foreach(var block in blocks){
      @Html.PropertyFor(x => block)
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T09:46:12.617

您可以使用**Property控件的****CustomTagName**和**CssClass**属性来格式化容器元素。

 **您还可以使用**RenderSettings**修改子元素的容器元素（如果适用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:14:15.253

您可以使用属性控件上的[CustomTagName](http://sdk.episerver.com/library/cms6.1/html/P_EPiServer_Web_PropertyControls_PropertyDataControl_CustomTagName.htm)属性选择标签

或者，如果您想删除标签，您可以使用控制适配器。一个很好的例子在[这里找到](http://labs.episerver.com/en/Blogs/Mari-Jorgensen/Dates/112298/3/Replacing-Property-Rendering-Using-Adapters/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-07T10:10:48.027

您还可以创建一个自定义内容区域，在实时模式下编辑时不呈现 div，而仅在编辑模式下呈现它们。

如果您只需要这样做一两次，我仍然建议您使用 ChildrenCustomTagName 路线，因为它有点灵活。如果你需要做很多并且你不能轻易改变你的 CSS，那么我会去自定义内容区域。如果您对如何删除 div 感兴趣，我在 github 上写了一篇博客文章和一个示例站点[，内容区域中的额外 div 如何删除它们？](http://jondjones.com/episerver-7-extra-divs-in-content-area-how-to-remove-them/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-27T09:41:04.297

由于我无法删除`<div>`“si 不想要的”，因此我将自己的 CSS 类放在它们上面。这在 Webforms 中对我有用。（如果还有人用）

利用`<RenderSettings ChildrenCssClass="yourCssClass" />`

```
<EPiServer:Property runat="server" PropertyName="RightContentArea"CustomTagName="aside" CssClass="column-2 sidebar"><RenderSettings ChildrenCssClass="yourCssClass"></RenderSettings></EPiServer:Property> 
```**

# android - 带有 PhoneGap 的 android mp4 启动画面

> ID：14361363
> 
> 赞同：2
> 
> 时间：2013-01-16T15:03:13.650
> 
> 标签：android, cordova

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try {
          VideoView videoHolder = new VideoView(this);
          setContentView(videoHolder);
          Uri video = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.splash);
          videoHolder.setVideoURI(video);
          videoHolder.setOnCompletionListener(new OnCompletionListener() {
              public void onCompletion(MediaPlayer mp) {
                  finish();
              }
          });
          videoHolder.start();
     } catch(Exception ex) {
         finish();
     }
}

public void finish() {
    if(isFinishing()) {
      return;
    }
    super.setIntegerProperty("loadUrlTimeoutValue", 70000);       
    super.loadUrl("file:///android_asset/www/index.html",1000);
} 
```

问题是这是同步执行的。启动应用程序时，“mp4 剪辑”作为启动画面播放，这很好，但一旦完成，黑屏显示为加载，然后我的应用程序主页准备就绪。我想在播放剪辑的同时加载 phonegap 页面，以便在剪辑完成时准备好它。感谢你

# c# - CryptDeriveKey 算法名称

> ID：14361367
> 
> 赞同：3
> 
> 时间：2013-01-16T15:03:25.783
> 
> 标签：c#, encryption, cryptography, aes, password-encryption

```
public byte[] CryptDeriveKey(
    string algname,
    string alghashname,
    int keySize,
    byte[] rgbIV
) 
```

有人可以告诉我algname中有哪些选项吗？如果我想为 AES-128 和 AES-256 指定加密算法，我应该在 algname 中输入什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:13:31.053

我不是 100% 确定，但是，`algname`是你的算法名称。`keySize`是密钥的大小。

你应该使用`AES-128`和`AES-256`喜欢这个；

```
CryptDeriveKey("AES", "SHA1", 128, aes.IV) 
```

和

```
CryptDeriveKey("AES", "SHA1", 256, aes.IV) 
```

从 中查看更多详细信息*[`MSDN`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.passwordderivebytes.cryptderivekey.aspx)*。

这是`PasswordDeriveBytes.CryptDeriveKey`方法的反编译代码。

```
[SecuritySafeCritical]
public byte[] CryptDeriveKey(string algname, string alghashname, int keySize, byte[] rgbIV)
{
    if (keySize < 0)
    {
        throw new CryptographicException(Environment.GetResourceString("Cryptography_InvalidKeySize"));
    }
    int algidHash = X509Utils.NameOrOidToAlgId(alghashname, OidGroup.HashAlgorithm);
    if (algidHash == 0)
    {
        throw new CryptographicException(Environment.GetResourceString("Cryptography_PasswordDerivedBytes_InvalidAlgorithm"));
    }
    int algid = X509Utils.NameOrOidToAlgId(algname, OidGroup.AllGroups);
    if (algid == 0)
    {
        throw new CryptographicException(Environment.GetResourceString("Cryptography_PasswordDerivedBytes_InvalidAlgorithm"));
    }
    if (rgbIV == null)
    {
        throw new CryptographicException(Environment.GetResourceString("Cryptography_PasswordDerivedBytes_InvalidIV"));
    }
    byte[] o = null;
    DeriveKey(this.ProvHandle, algid, algidHash, this._password, this._password.Length, keySize << 0x10, rgbIV, rgbIV.Length, JitHelpers.GetObjectHandleOnStack<byte[]>(ref o));
    return o;
} 
```

这是`NameOrOidToAlgId`方法的反编译代码。

```
internal static int NameOrOidToAlgId(string oid, OidGroup oidGroup)
{
    if (oid == null)
    {
        return 0x8004;
    }
    string str = CryptoConfig.MapNameToOID(oid, oidGroup);
    if (str == null)
    {
        str = oid;
    }
    int algIdFromOid = GetAlgIdFromOid(str, oidGroup);
    switch (algIdFromOid)
    {
        case 0:
        case -1:
            throw new CryptographicException(Environment.GetResourceString("Cryptography_InvalidOID"));
    }
    return algIdFromOid;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:15:03.470

我这里没有一个反汇编程序喜欢`Reflector`找到解决方案。如果你有一个去`mscorlib.dll`反编译的`PasswordDerivedBytes.CryptDeriveKey`方法。你会在那里找到支持的字符串。

顺便说一句，不支持 AES：[这里](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/61d85001-2eae-4419-b4bf-ce98d46f4d21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-23T16:10:55.810

可以将 TripleDES 用于 algname 参数。

前任：

```
TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes("password", 24, 1000);
byte[] key = pdb.CryptDeriveKey("TripleDES", "SHA256", 192, tdes.IV); 
```

单击此处查看[文档](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.passwordderivebytes.cryptderivekey?redirectedfrom=MSDN&view=netframework-4.8#System_Security_Cryptography_PasswordDeriveBytes_CryptDeriveKey_System_String_System_String_System_Int32_System_Byte___)

# forms - Symfony 2 - 如何删除日期字段类型的默认日期选择器？

> ID：14361370
> 
> 赞同：3
> 
> 时间：2013-01-16T15:03:32.007
> 
> 标签：forms, symfony, orm, doctrine-orm

在我的 formType 中，我使用以下内容来呈现我的日期字段类型。

```
$builder->add('date_naissance', 'date', array(
            'input'  => 'datetime',
            'widget' => 'single_text',
        )); 
```

这里 belox 它是如何呈现的。我的问题是我想使用 jquery 选择器，问题是默认情况下输入似乎已经包含一些丑陋的小部件来选择日期。我的问题很简单。我怎样才能得到那个默认日期选择器的芦苇。预先感谢您的回复。干杯。马克

![在此处输入图像描述](../Images/329e2ef851d0433fd7f736859da46a4f.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T15:47:44.413

**编辑，从 symfony 2.6 开始**

**您现在可以使用 html5 字段选项，例如：**

```
->add('date', DateType::class, ['html5' => false]); 
```

这将删除`type="date"`表单视图上的 html5。

* * *

它是一个 HTML5 日期选择器。html将有

```
type="date" 
```

默认情况下由 symfony 输出。

Chrome 会看到这一点并执行日期选择器，

**解决您的问题的一些想法：**

1.  在表单生成器中更改格式：

    `$builder->add('date_created', DateType::class, array( 'widget' => 'single_text'));`

    在这里阅读更多：http: [//symfony.com/doc/current/reference/forms/types/date.html#format](http://symfony.com/doc/current/reference/forms/types/date.html#format)

2.  删除浏览器日期选择器：[https ://stackoverflow.com/a/11470344/744975](https://stackoverflow.com/a/11470344/744975)

3.  用另一个javascript库中的一个覆盖浏览器日期选择器：[https](https://jqueryui.com/datepicker/) ://jqueryui.com/datepicker/ （我的首选）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-23T03:12:35.077

从 symfony 开始，`2.6`您可以设置`'html5' => false`以禁用 HTML5 类型。

例子：

```
$builder->add('establishment_date', 'date', array(
        'label'   => 'Establishment date',
        'widget'  => 'single_text',
        'html5'   => false,
)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T17:37:16.823

只需将默认类型更改为树枝内的文本：

```
{{form_widget(dateField, {'type':'text'})}} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-16T15:10:08.167

这不是来自 Symfony 的真正问题。生成日期字段时，我没有那种日期选择器。在不同的浏览器中检查您的页面和/或检查您可能已经实现的一些捆绑包，这些捆绑包会生成此字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-02T14:51:15.367

您可以通过覆盖`form_widget_simple`twig 主题来做到这一点（请参阅[http://symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html)）

```
{% block form_widget_simple %}
{% spaceless %}
    {% set type = type|default('text') == 'date' ? 'text' : type|default('text') %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
{% endspaceless %}
{% endblock form_widget_simple %} 
```

# jquery - 使用 with 显示帮助文本选项所以我想为每个显示一些文本，比如我有这个： <select id="321" name="123"><option value="a">a</option> <option value=" b">b</option> <option value="c">c</option> <option value="d">d</option> ID：14361372 赞同：0 时间：2013-01-16T15:03:40.610 标签：jquery, html 回答 #1 赞同：3 时间：2013-01-16T15:06:25.757 您实际上必须将文本的值存储在某处。您可以创建一个函数来获取数字计数的英文拼写并动态构建它，但我认为这样的东西已经不存在了。无论如何，如果你愿意输入一点： <select ...> <option data-description="A is the first letter of the alphabet!">a</option> ... $("#321").on('change', function () { $("#help").text($(this).find(':selected').data('description')); }); 回答 #2 赞同：1 时间：2013-01-16T15:07:42.250 您需要使用data属性来存储文本，除非您知道具有某种 AI 的插件并且知道它是字母表并且可以返回字符串。 <select id="321" name="123"> <option value="a" data-message="A is the first letter of the alphabet!">a</option> <option value="b" data-message="B is the second letter of the alphabet!">b</option> <option value="c" data-message="C is the third letter of the alphabet!">c</option> <option value="d" data-message="D is the fourth letter of the alphabet!">d</option> </select> <div id="help"></div> $('#321').change(function() { $('#help').text($('option:selected', this).data('message')); }); 回答 #3 赞同：0 时间：2013-01-16T15:39:30.893 这是此问题的另一个解决方案： <select id="321" name="123"> <option id='a' value="a">a</option> <option id='b' value="b">b</option> <option id='c' value="c">c</option> <option id='d' value="d">d</option> </select> <div id="help"></div> <script> $(document).ready(function (){ var alghabet = new Array('first','second','third','fourth'); $("option").hover( function() { var i = $(this).index(); var value = $(this).attr("value").toUpperCase(); $("#help").html(value + " is the " + alghabet[i] + " letter of the alphabet!"); } ); }); </script></select>

# ruby-on-rails - 在 Rails 应用程序中将 H.264 转换为 HLS

> ID：14361379
> 
> 赞同：0
> 
> 时间：2013-01-16T15:04:02.867
> 
> 标签：ruby-on-rails, carrierwave, h.264, http-live-streaming

使用 carrierwave 或其他文件上传插件，应该有一种简单的方法可以将上传的 mp4 (H.264) 视频文件转换为 Apple HLS。您需要在移动设备*上流式传输*视频。

这样，在上传 1 个流媒体视频文件时，您可以支持大多数浏览器（除 Opera 和 FF for Linux/OSX 之外的所有浏览器）。

它可以用 ffmpeg 完成，有人在研究 gem 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:34:55.253

[streamio-ffmpeg](https://github.com/streamio/streamio-ffmpeg)怎么样？它似乎支持自定义命令行参数。您可以添加然后使用此答案中的参数：[https ://stackoverflow.com/a/10047372/759140](https://stackoverflow.com/a/10047372/759140)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:07:24.037

你也可以试试[carrierwave-video 。](https://github.com/rheaton/carrierwave-video)它由 streamio-ffmpeg 支持，并允许通过自定义设置。

# php - codeigniter 模板解析

> ID：14361389
> 
> 赞同：0
> 
> 时间：2013-01-16T15:04:24.153
> 
> 标签：php, codeigniter, codeigniter-2, template-engine

codeigniter 中的模板解析实际上是如何工作的？

我在视图文件中有以下部分

```
<h2>{blog_heading}</h2>
<div>{blog_entries}</div> 
```

并在控制器中

```
$this->load->library('parser');

$data = array(
            'blog_heading' => 'My Blog Title',
            'blog_entries' => $products_array()
            );

$this->parser->parse('blog_template', $data); 
```

它运作良好，但问题是我有很多这样的标签，所以我需要在控制器上定义所有内容吗？

问题在于性能，用户不会每次都使用所有标签。

请帮我解决问题。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T15:22:25.683

回答您的问题，是的，您应该在控制器上创建所有变量。当用户访问您的控制器时，您可以在那里签入“需要”标签，然后根据用户偏好或您的应用程序的要求仅显示需要的标签。在视图上，您​​应该只显示标签。如果您正在对破坏整个 MVC 概念的视图进行计算和更改值，这就是 CodeIgniter 的全部原因。

您不应该仅仅因为您可以就在控制器中创建变量：) 仅在访问者需要时才需要创建它们。如果您正在创建所有标签但没有在视图上显示所有标签，那么您可能需要一种方法来识别所需的标签，然后根据用户的选择和需求创建新的标签，使用另一个控制器或相同的控制器，接收信息。

如果您在控制器上进行计算，然后在视图上进行更多计算，则该代码对于 MVC 模型不正确。必须在控制器中进行计算和定义。在视图中，您可以根据需要的条件选择是否要显示该变量，但不要更改其内容。

总之，必须在控制器中创建所有变量以维护 MVC 概念。

希望这可以帮助您更多地了解 CodeIgniter。这是一个很棒的框架，您只需要确保以正确的方式使用它。

亲切的问候。

# javascript - 将 jQuery 对话框附加到 Google Maps 标记中的 InfoBubble

> ID：14361392
> 
> 赞同：1
> 
> 时间：2013-01-16T15:04:32.427
> 
> 标签：javascript, google-maps, google-maps-api-3, jquery-dialog, infobubble

我正在使用谷歌地图 v3 进行编码。我想添加 jQuery 并将事件处理程序附加到 infoBubble（我在[这里](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)得到的可定制的 infoWindow jscript 扩展）。

具体来说，我想让用户点击 infoBubble 中的链接并使用 jQuery-UI 弹出一个对话框。对话框将提示用户输入，随后将存储在 MySQL 中。

我已经坚持了一个月。这是我最接近的事情：

[将事件处理程序附加到谷歌地图信息气泡内的元素](https://stackoverflow.com/questions/10060275/attach-event-handler-to-element-inside-google-maps-info-bubble)

下面是我用于创建地图标记的 javascript 函数：

*（**注意**：这个想法是如果将事件处理程序附加到 infoBubble 有效，我会`function() {alert("hi!");}`用 jQuery-UI 表单替换。但它不起作用。我尝试使用“ `var str = 'onClick=formPopUp()';`”但 javascript 不支持具有多个条目的提示对话框表单.另外，我真的不知道如何在像formPopUp（）这样的javascript函数中调用jQuery-UI。对不起，如果它令人困惑）*

```
function createMarker(map, latlng, fields, name) {
      var str = "id='user-creates'";

      var html = "<b><font size='5'>" + fields["name"] + "</font></b>" + "</br>" + 
             "<font size='2'>" + fields["google_rating"] + " / 5.00" + "</font>" + "</br>" + 
                 "<font size='2'>" + fields["type"] + "</font>" + "</br>" + 
                 "<font size='2'>" + "Hours" + "</font>" + "</br>" + 
                 "</br>" + 
                 "</br>" +
                 "<font size='2'>" + "Top Reviews " + "(<i>" + fields["num_reviews"] + " Reviews</i>)" +  "</font>" + "</br>" + 
                 "<div " + str + ">" +  "Example</div>" + 
                 "</br>" + 
                 "</br>" + 
                 "<font size='2'>" + "Photos " + "(<i>0 Photos</i>)" + "</font>" + "</br>" +
                 "</br>" + 
                 "</br>" +
                 "<font size='2'>" + "Friends Who've Been Here " + "(<i>0 Friends</i>)" + "</font>" + "</br>" +
                 "</br>" + 
                 "</br>" +
                 "<font size='2'>" + fields["address"] + "</font>" + "</br>" + 
                 "<font size='2'>" + fields["phone_num"] + "</font>" + "</br>" + 
                 "<font size='2'><a href=" + fields["web_url"] + "Website" + "</a></font>";

      var marker = new google.maps.Marker({
            map: map,
            position: latlng
      });

      infoBubble = new InfoBubble({
            map: map,
            position: latlng,
            borderColor: '#D14836',
            borderWidth: 4,     
      });

      google.maps.event.addListener(marker, 'click', function() {
        infoBubble.setContent(html);

        google.maps.event.addListenerOnce(infoBubble, 'domready', function(){
             //jQuery code here
             google.maps.event.addDomListener($(infoBubble.getContent()).find('#user-creates')[0], 
                                'click', function() {alert("hi!")}); 

        });

        infoBubble.open(map, marker); 

        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:33:17.287

这个字符串：

```
var str = 'id=user-creates'; 
```

不是嵌入 HTML 的正确格式。

它需要是：

```
var str = "id='user-creates'"; 
```

# php - 带有正斜杠错误的 htaccess 重写规则

> ID：14361395
> 
> 赞同：0
> 
> 时间：2013-01-16T15:04:43.980
> 
> 标签：php, .htaccess

我有一个 htaccess 重写规则设置来将 URL 重新路由到 index.php 并具有非常 SEO 友好的 URL。

它看起来像这样：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$ ./index.php [L] 
```

这很好用，除了例如当我输入 www.site.com/one/two 时，它会重新路由到 index.php 但缺少 css 和图像文件。

如何允许链接中出现斜线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:07:56.953

当您将 css 添加到 html`/`时，在路径前添加一个，如下所示：

```
<link href="/styles/index.css" rel="stylesheet" type="text/css" media="screen" /> 
```

那应该可以解决您的问题。您应该对 javascript 文件执行相同的操作。

这`/`告诉浏览器该路径是相对于网站的根目录的。

# hibernate - 从对象中生成插入

> ID：14361397
> 
> 赞同：2
> 
> 时间：2013-01-16T15:04:47.920
> 
> 标签：hibernate, jpa

有没有办法从 bean 实例中生成插入 SQL 查询？也许使用休眠代码？

例如：

```
@Table(name = "tbl_a")
class A{

   @Column(name = "col_a")
   int a;

   @Column(name = "col_b")
   int b;
} 
```

插入到 tbl_a (col_a,col_b) 值 (avalue,bvalue)

因此，如果我为它提供一个具有 a = "val" 和 b = 5 的 A instacne，我将得到：

插入 tbl_a (col_a,col_b) 值 ('val',5) ??

**编辑**

看来我不太了解所以让我解释一下：我知道如何坚持使用 Hibernate。我想要的是生成 SQL 查询本身的实际类。最终将提交给数据库的相同查询。但我需要查询字符串。意思是，我需要一个工具（或使用 Hibernate 的类）来获取一个对象并返回一个包含 SQL 查询的简单字符串。（不在日志中）。

我希望现在好多了。

谢谢，伊多布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:40:09.703

好的，所以没有工具可以获取对象并返回包含 SQL 查询的简单字符串。但是您可以使用**Query**类`getQueryString()`的方法。除了运行时参数，您将获得整个**HQL 字符串。**如果您对**SQL 字符串**感兴趣，那么您可以在 Hibernate 的 log4j 系统上启用**DEBUG**并使用 JDBCAppender 或一些自定义 Appender 来捕获本机 SQL。

 ******无论如何，这个选项会让你的应用程序非常慢（休眠会产生很多调试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:11:59.613

是的，您可以调用`sessionFactory.getCurrentSession().save(new A())`直接插入您的实例。执行的 SQL 看起来与您描述的相似。您可以通过打开休眠调试来测试它`hibernate.show_sql=true`******

# objective-c - 将 rightBarButton 添加到导航栏中的现有 rightBarButtonItem

> ID：14361405
> 
> 赞同：0
> 
> 时间：2013-01-16T15:05:14.713
> 
> 标签：objective-c, uinavigationcontroller, uinavigationbar, uibarbuttonitem

我有一个 UIViewController，在导航栏中已经存在一个 rightbarButton 我希望在某些情况下将另一个 rightBarButton 添加到已经存在的那个...

我使用了[这个问题](https://stackoverflow.com/questions/1803609/how-to-add-2-buttons-into-the-uinavigationbar-on-the-right-side-without-ib)的第一个答案，但它不起作用：它添加了新的 rightbarbutton 但删除了之前存在的第一个

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:10:26.690

请参阅[此相关帖子](https://stackoverflow.com/questions/14329916/navigation-bar-with-multiple-buttons/)

基本上，您需要使用复数形式`rightBarButtonItems`而不是单数形式`rightBarButtonItem`来创建按钮数组。

# c# - C#中的字符串操作

> ID：14361406
> 
> 赞同：1
> 
> 时间：2013-01-16T15:05:19.030
> 
> 标签：c#, string

我有一个输入字符串，其数据采用以下格式：

*   “http://testing/site/name/lists/tasks”
*   “http://testing/site/name1/lists/tasks”
*   “http://testing/site/name2/lists/tasks”等，

如何从该字符串中仅提取名称、名称 1、名称 2 等？

这是我尝试过的：

```
SiteName = (Url.Substring("http://testing/site/".Length)).Substring(Url.Length-12) 
```

它抛出异常，说明`StartIndex`不能大于字符串中的字符数。我的表达有什么问题？我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:09:40.040

更好的选择是使用正则表达式匹配/替换

但是以下也将基于所有 url 的模式相似的假设

```
var value = Url.Replace(@"http://testing/site/", "").Replace(@"/lists/tasks", ""); 
```

另一种选择是使用 Uri

```
var uriAddress = new Uri(@"http://testing/site/name/lists/tasks"); 
```

然后根据您的要求分解 uri 部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:09:46.707

这是正则表达式的工作：

```
string strRegex = @"http://testing/site/(.+)/lists/tasks";
RegexOptions myRegexOptions = RegexOptions.IgnoreCase;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"http://testing/site/name/lists/tasks" + "\r\n" + @"http://testing/site/name1/lists/tasks" + "\r\n" + @"http://testing/site/name2/lists/tasks" + "\r\n" + @"http://testing/site/name3/lists/tasks";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here. Reference to first group
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:19:46.380

您还可以使用`Uri`该类来获取所需的部分：

```
string[] urlString = urlText.Split();
Uri uri = default(Uri);
List<string> names = urlString
    .Where(u => Uri.TryCreate(u, UriKind.Absolute, out uri))
    .Select(u => uri.Segments.FirstOrDefault(s => s.StartsWith("name", StringComparison.OrdinalIgnoreCase)))
    .ToList(); 
```

假设该部分始终以“名称”开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:08:57.857

因为`Substring`具有单个参数的函数采用**起始**字符的索引并将所有内容消耗到字符串的末尾。这有点幼稚，但你可以从第**19 个**字符开始：`Url.Substring(19);`

# android - 通过 facebook、twitter、gmail 和 google plus 进行用户授权

> ID：14361407
> 
> 赞同：1
> 
> 时间：2013-01-16T15:05:22.540
> 
> 标签：android, facebook, gmail

我正在开发一个应用程序，现在我需要通过 facebook、twitter、gmail 或 google plus 帐户来识别用户。

我找到了一种适用于 Facebook 的方法，有很好的 SDK，并且所有内容都有据可查。

有没有一些快速的方法来整合 twitter、gmail 和 google plus？

我目前已阅读此内容：[https ://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in)

但是我只看到一个进度条，上面写着“正在登录...”，什么也没有发生...它只是停留在屏幕上。

```
 if (!mPlusClient.isConnected()) {
                if (mConnectionResult == null) {
                    mConnectionProgressDialog.show();
                } else {
                    try {
                           mConnectionResult.startResolutionForResult(PersonalFirstActivity.this,
                                 REQUEST_CODE_RESOLVE_ERR);
                    } catch (SendIntentException e) {
                        // Try connecting again.
                        mConnectionResult = null;
                        mPlusClient.connect();
                    }
                }
             } 
```

我也在 logcat 中注意到了这一点：

> I/GmsClient(31431)：连接：bindService 为 Intent { act=com.google.android.gms.plus.service.START } 返回 false

我在 Google+ 上做错了什么？

我已经注册了我的应用程序和所有内容？

我认为教程中缺少一些代码`mConnectionProgressDialog.show();`

这些社交网络是否有完整的教程...我只需要登录程序，所以我可以收到用户的名字和第二名，也许是电子邮件地址。

天呐！

# c++ - 在 C++ 中使用命名空间代替静态类？

> ID：14361408
> 
> 赞同：29
> 
> 时间：2013-01-16T15:05:23.067
> 
> 标签：c++

将命名空间用作静态类是好的还是好的做法？例如：

```
namespace MyStaticFunctions {
    void doSomething();
} 
```

相对：

```
class MyStaticFunctions {
    static void doSomething();
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-16T15:11:59.047

C++ 中没有“静态类”之类的东西，所以从 C++ 的角度来看，您不是在“作为静态类”使用它，而是在“作为命名空间”使用它。使用命名空间将函数组合在一起当然是公认的做法。

但是，您希望这些组有多大，这取决于您。C++ 库为整个公共接口使用单个命名空间并不罕见。对于习惯于（比如）Java 的人来说，这可能会让他们感到惊讶，因为在 Java 中，类通常用于将较少数量的静态方法组合在一起。由于 C++ 最先出现，您可以说 Java 使用类作为命名空间。

因此，在 C++ 中，您不会看到类似于`java.util.Collections`or的类`java.lang.Math`充满静态成员。如果您想要 C++ 中的函数组，请使用命名空间。

例外（C++ 中不是总是有特殊情况吗？）是特征类型，例如`std::numeric_limits<T>`，其中模板参数使类执行命名空间无法执行的操作。您可以定义一个`numeric_limits`包含函数模板`max<T>()`等的命名空间`min<T>()`，但它不是那么好。首先，它对事物的分组略有不同，类型`T`显示为“层次较低”。其次，它并没有做特征类型所做的所有事情，因为没有“对象模板”之类的东西可以让你定义一个值`numeric_limits::digits<T>`。

我不太了解 C# 来评论静态类的实际用途，但 AFAIK 它只是一个限制为没有非静态成员的类，所以它类似于那些 Java 类。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-16T15:22:12.063

在 C++ 中，实际上鼓励您在语言级别使用 a`namespace`而不是`class`仅包含a 的`static`方法，因为 Koenig 的查找（也称为 Argument Dependent Lookup）。

例子：

```
namespace geometry {
    struct Point { int x, y; };

    double distance_from_center(Point const& p) {
        return sqrt(p.x * p.x + p.y + p.y);
    }
} // namespace geometry

int main() {
    geometry::Point const p{3, 4}; // must qualify

    std::cout << distance_from_center(p) << "\n"; // not qualified
} 
```

如果`distance_from_center`被写为 a`static`中的方法`class`，那么您每次都需要明确限定它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-16T15:51:59.947

对我个人来说，这是一个棘手而有趣的问题，所以决定分享我的拙见

考虑“静态”类（仅静态成员）和命名空间之间的区别：

1.  命名空间可以分散在多个文件中：额外的灵活性，但应谨慎使用。
2.  命名空间提供依赖于参数的查找（[参见 Matthieu M. answer](https://stackoverflow.com/a/14361756/453271)）：在特定情况下很有用
3.  “静态”类可以具有访问修饰符并可以形成层次结构：我认为在类接口中声明且对其客户端可见的私有成员是 C++ 特性，它更多地是由技术而非逻辑原因决定的。我看不到私有静态成员的任何好处。“静态”层次结构的受保护成员？从来没有见过。
4.  除了模板成员之外，“静态”类可以是“模板”：请参阅[Steve Jessop 的回答](https://stackoverflow.com/a/14361552/453271)，了解 STL 中的一个很好的示例

从维护的角度来看，有时您决定将一个类设为“静态”（如单例），但随后需求发生了变化，您需要多个实例。“静态”类比命名空间更容易转换。

最后，回答你的问题：

如果您不需要“静态”类或命名空间的特殊功能，请使用您更喜欢的功能:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-16T15:08:24.587

这取决于。

该方法在逻辑上是否与类相关？如果是，则使其成为成员，否则将其放置在命名空间中。

从功能上讲，它们是相同的，但代码比功能更多，对吧？例如，考虑一个返回类名的方法：

```
struct MyClass
{
    static std::string getName() { return "MyClass"; }
} 
```

您显然可以将该方法放在 a 之外`namespace`，并获得相同的结果，但它在逻辑上属于该类。

# c# - 如何向 Umbraco Admin 添加自定义 CSS 样式表

> ID：14361411
> 
> 赞同：7
> 
> 时间：2013-01-16T15:05:25.080
> 
> 标签：c#, asp.net, content-management-system, umbraco

想知道是否有人知道如何在不更改原始 masterpages/umbraco.aspx 的情况下将自定义 CSS 样式表添加到管理后端部分。

我实现了一个自定义部分，所以它有自己的部分托盘图标，我可以将 css 添加到“umbracoGui.css”，但我也想“注入”我自己的 css 文件以获取更多样式，知道所有原始文件都完好无损。

总之，假设我有 customStyle.css，其中包含我所有的 css。将其添加到整个管理部分的头部。

似乎有一些提到剥皮，但对我来说似乎有点矫枉过正。

有没有一种方法可以创建一个可以注册样式表的类或其他东西，或者类似的东西？

谢谢你的帮助！

干杯，巴夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-06T01:47:20.887

如果有人仍在寻找这个问题的答案，Umbraco 7（至少，我不确定这是否适用于早期版本）能够使用该`App_Plugins`文件夹将样式表注入到页面中。添加一个新的子文件夹，`package.manifest`在新文件夹中创建一个类似于例如的 JSON 文件

```
{
  css: [ '~/App_Plugins/YourFolder/customStyle.css' ]
} 
```

然后显然在文件夹中的指定位置创建自定义样式表，`App_Plugins`并且样式表标记应该出现在所服务的页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T16:58:04.080

这可能没什么帮助，但首先想到的是某种 HTTP 处理程序，它可以将 CSS 文件注入到标记中。我对此没有太多经验，但我知道这是分析跟踪等的常用方法。

# node.js - 无法使用 node.js 和 express 获取 POST 参数

> ID：14361412
> 
> 赞同：0
> 
> 时间：2013-01-16T15:05:26.857
> 
> 标签：node.js, post, get, express

我对 node.js 很陌生，我喜欢它。我只是想通过一个非常简单的登录来工作。当我尝试使用 GET 获取表单输入数据时，我没有遇到问题。但我正在发送密码，所以我不想使用 GET 因为 url 中的信息。

表单打开 /login (admin.login) 但我不断收到错误

> 无法发布/登录

该表单是用 Jade 编写的，这应该不是问题，因为无论如何最终都是 HTML。

```
extends layout

block content 
h1 Admin Login
form(action="/login", method="post")#inputFields
    span Username
    input(type="text", name="username")
    span Password
    input(type="password", name="password")
    input(type="submit") 
```

这是登录链接到的文件

```
/*
 * GET home page.
 */

exports.index = function(req, res){ 
    if (req.session.UserLogin != true) {
        res.redirect("../login");
    } 

    res.render('index', { title: 'Express' });
};

exports.login = function(req, res){  
    req.
  res.render('login', { title: 'Express' });
}; 
```

真的就是这样，因为在那之后它不允许我做任何事情。

非常感谢杰森霍恩斯比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:58:12.463

问题似乎是您没有设置路由来处理 POST 登录请求。您似乎使用 Express 作为框架，所以只需添加：

```
app.post('/login', handleLogin); 
```

来处理请求。然后你可以有一个函数来处理：

```
exports.handleLogin = function (req, res) {
    //Handle request here
    var username = req.body.username;
    var password = req.body.password;
} 
```

注意post参数可以通过req.body对象访问

# c# - 如何确定网站管理员？

> ID：14361414
> 
> 赞同：2
> 
> 时间：2013-01-16T15:05:30.430
> 
> 标签：c#, asp.net, sql, security

在 ASP.NET 项目 (C#) 和 SQL Server 2008 中，应该如何确定管理员？

我应该在我的**用户**表中有一个**属性**来确定管理员吗？即使我只有 1 个管理员？

 **```
id           username            type
--------------------------------------
1            Ali1                admin
2            James3              user
3            Carlos31            user
4            Kuku                user 
```

或者

检查**Session**时，Admin 是否应该由一个特殊的**ID**来确定？

 **假设管理员是**id=1的用户**

```
if(Session["id"].toString().Equals("1"))
{
    //Admin
}
else
{
    //Normal User
} 
```

哪种方法更好、更安全？有更好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:11:48.123

我不会检查特定的 ID，而是检查用户类型。您不知道数据是否会改变，或者您是否必须添加额外的管理员。在您的应用程序中硬编码这样的值通常是一个坏主意。相反，创建一个 UserType 类并检查 UserType.Admin 或 UserType.User 角色并处理 BLL 和/或 DAL 中的代码。

因此，要回答您的问题，您的第一个实施会很好。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:16:48.183

我建议创建一个类似的模式：

[http://dbpatterns.com/documents/50851b3189cbad4b9fd5b45a/](http://dbpatterns.com/documents/50851b3189cbad4b9fd5b45a/)

所以你有一个用户表和一个级别表。

在级别表中有类似的内容：

```
id           level
-------------------
1            admin
2            user 
```

然后在用户表中给每个用户一个级别编号，这样您就可以轻松添加级别并有一个定义来查找。

**或者，如果您想矫枉过正：**

有一个存储用户 ID 和级别 ID 的第三张表，以便用户可以拥有多个角色

在 user_level_link 表中有类似的内容：

```
user_id    level
-------------------
1            1
2            1
2            2 
```

绝对不要针对单个 ID 执行此操作，因为当您打算进一步扩展站点时，它可能会导致问题。****

# mondrian - 蒙德里安 olap - DriverManager.getConnection 错误

> ID：14361417
> 
> 赞同：0
> 
> 时间：2013-01-16T15:05:34.797
> 
> 标签：mondrian

在我的 gwt 网络应用程序中，我使用的是 Mondrian。我有一个方法：

```
private Result executeMdxQuery(String queryString, Schema schema) throws InterruptedException {
CatalogLocatorImpl locator = new CatalogLocatorImpl();
Connection mdxConnection = DriverManager.getConnection(createConnectString(schema), locator);

return executeMdxQuery(queryString, mdxConnection);
} 
```

createConnectString(schema) 的结果是

```
Provider=mondrian;Jdbc=jdbc:mysql://localhost/dds?user=root&password=qwerty;Catalog=/home/vskovalenko/schemas/air_new_zealand_monthly_traffic.xml;JdbcDrivers=com.mysql.jdbc.Driver; 
```

它中的所有数据似乎都是正确的（至少是数据库凭据和文件路径），这种方法不会抛出异常，它只是默默地死去，不告诉任何东西。我应该在哪里锁定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:25:27.327

您应该使用[olap4j API](http://mondrian.pentaho.com/api/mondrian/olap4j/MondrianOlap4jDriver.html)来获取连接。这将允许您让应用程序服务器管理和汇集到 Mondrian 的连接。

如果您需要对 Mondrian 服务器实例进行更多控制，您应该查看[MondrianServer](http://mondrian.pentaho.com/api/mondrian/olap/MondrianServer.html#createWithRepository%28mondrian.server.RepositoryContentFinder,%20mondrian.spi.CatalogLocator%29)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T06:20:02.313

将以下代码段添加到您的代码中，然后重试：

```
Class.forName("mondrian.olap4j.MondrianOlap4jDriver"); 
```

# windows - php 5.4.10 和 windows 文件主机中的 cURL

> ID：14361423
> 
> 赞同：0
> 
> 时间：2013-01-16T15:06:06.623
> 
> 标签：windows, curl, nginx, hosts

首先，对不起我的英语。

我更新了 php 并用 nginx 配置它。它工作正常。但在我的 php 应用程序中，我使用 cURL。它也不与我的虚拟主机一起工作。我，在我的 Windows 主机文件中设置它：

```
127.0.0.1       example.dev 
```

curl 脚本没问题，可以在普通页面上工作，例如 google.com 这个脚本我也在 linux 的 serwer 中使用，它也可以工作

但是如果我使用[http://example.dev](http://example.dev) 只有信息是“CURL：无法连接到主机”地址[http://example.dev](http://example.dev)在我的浏览器上工作，我可以在 cmd 中 ping。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:41:57.527

我发现了问题。一次运行 php 是不够的。PHP 尝试运行脚本和 curl 没有资源，我们有死锁。

我的解决方案是使用其他端口运行更多 php，并为此配置 nginx。用于 php 的 bat 脚本

```
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9121 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9122 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9123 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9124 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9125 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9126 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9127 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9128 -c D:\AllWebServer\php\php.ini
c:/RunHiddenConsole.exe D:\AllWebServer\php\php-cgi.exe -b 127.0.0.1:9129 -c D:\AllWebServer\php\php.ini 
```

和 nginx 配置

```
upstream php_farm {
    server 127.0.0.1:9121 weight=1;
    server 127.0.0.1:9122 weight=1;
    server 127.0.0.1:9123 weight=1;
    server 127.0.0.1:9124 weight=1;
    server 127.0.0.1:9125 weight=1;
    server 127.0.0.1:9126 weight=1;
    server 127.0.0.1:9127 weight=1;
    server 127.0.0.1:9128 weight=1;
    server 127.0.0.1:9129 weight=1;

} 
```

...

```
fastcgi_pass  php_farm; 
```

# json - Angular js JSON数据与DateTime的MVC模型绑定？

> ID：14361433
> 
> 赞同：8
> 
> 时间：2013-01-16T15:06:22.637
> 
> 标签：json, asp.net-mvc-3, asp.net-mvc-4, angularjs

我正在使用 Angular JS 将数据作为 JSON 获取并发布到我的 MVC 4 控制器。除了 DateTime/DateTime 之外，我的所有属性都正确转换？类型。我希望有一种“设置并忘记它”的方法来处理日期，这样添加的新类和/或属性就不必记住进行一些特殊的转换来正确处理日期。我已经看到了以下方法和可能的缺点。人们在同一平台上使用什么方法？MVC4 中有什么东西可以正确处理我可能没有配置的吗？任何建议将不胜感激。

1.  自定义模型绑定器。作为[Phil Haack](http://haacked.com/archive/2010/04/15/sending-json-to-an-asp-net-mvc-action-method-argument.aspx)博客中的详细信息。可能的性能问题。
2.  在 JS 端进行一些修改。正如[Robert Koritnik 的博客](http://erraticdev.blogspot.com/2010/12/sending-complex-json-objects-to-aspnet.html)中所详述的那样。这似乎不适用于 Angular js，也许 $http.post 中有一个设置允许它工作，但我的对象使用这种方法具有所有空值。
3.  有一些额外的属性，例如 FormattedDateTime 可以在 POST 操作上进行转换。这不是“设置它并忘记它的方法”，尽管它确实允许在客户端正确显示仍为“/Date(695573315098)/”格式的日期

请参阅以下代码示例。C#类：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime BirthDate { get; set; }
    public DateTime? ApprovedForSomething { get; set; }
} 
```

Angular JS 控制器：

```
 function PersonController($scope, $http) {
        $scope.getPerson = function () {
            $http.get('../../Home/GetPerson/1').success(function (data) {
                $scope.Person = data;
            });
        }
        $scope.updateApprovedForSomething = function () {
            $http.post('../../Home/UpdatePerson', { person: $scope.Person }).success(function (data) {
                console.log(data);
            });
        }
    } 
```

提琴手 POST：

> HTTP/1.1 200 OK 缓存控制：私有内容类型：应用程序/json；字符集= UTF-8服务器：Microsoft-IIS / 8.0 X-AspNetMvc-版本：4.0 X-ASPNET-版本：4.0.30319 X-SourceFiles：= UTF-的8B YzpcdXNlcnNcbmlja1xkb2N1bWVudHNcdmlzdWFsIHN0dWRpbyAyMDEyXFByb2plY3RzXFZhbGlkYXRpb25UZXN0XEhvbWVcR2V0UGVyc29uXDE = = X供电，通过？？？？： ASP.NET 日期：2013 年 1 月 16 日，星期三 14:48:34 GMT 内容长度：124
> 
> {"FirstName":"Bob","LastName":"Smith","BirthDate":"/Date(695573315098)/","ApprovedForSomething":"/Date(1358261315098)/"}

正如您在 Fiddler 数据中看到的那样，日期以 JSON 日期的形式出现，但是当点击 POST 方法时，DateTime 属性不正确并且 DateTime? 属性为空。

![在此处输入图像描述](../Images/f21aaa11d89e565d2bfd2ccaddf7e1b9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-18T14:32:28.517

您是否可以选择将 AJAX 回发切换为由 WebApi`ApiController`而不是 MVC 控制器处理？

我最近遇到了这个问题，并利用了 ApiController 对 ISO 8601 日期格式的支持。

这里有一些信息： [http ://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)

# android - 如果我向用户发送修补程序，他们会继续从 Play 商店获取更新吗？

> ID：14361436
> 
> 赞同：8
> 
> 时间：2013-01-16T15:06:31.590
> 
> 标签：android, google-play, apk, updates

假设我有一个用户从 Play 商店安装的应用程序，如果我的一个用户报告了错误并且我想向他们发送应用程序的修补版本进行测试，他们可以将其安装到他们的手机上。但是，如果我随后在 Play 商店中更新应用程序，用户会收到更新吗？我的测试似乎表明是这种情况，但是有什么陷阱吗？

我的构建过程的工作方式是，每次构建时，它都会获得更高的版本代码，因此修补后的版本将具有比当前在 Play 商店中的版本更高的版本代码，然后是我在发送*后*上传到 Play 商店的版本我的用户补丁将再次具有更高版本的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:13:15.687

我在这里进行了一个相当疯狂的猜测，但如果满足以下条件，它*应该可以工作：*

1.  Google Play上的apk版本号高于hotfix的版本号
2.  用户最初从 Google Play 安装该应用程序，并且仅通过侧面加载对其进行更新。
3.  修补程序和 Google Play 更新都使用相同的密钥进行签名。

我很确定这会奏效，因为我记得在一个以成功结束的 android google 小组中对此进行了长时间的讨论。不幸的是，我现在找不到它。

如果您确实尝试过，请与结果一起回帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:12:00.743

我认为这个工作流程没有任何问题。只要您在每次构建时增加版本号。

# c# - Web服务（asmx）一个实例多个客户端？

> ID：14361440
> 
> 赞同：0
> 
> 时间：2013-01-16T15:06:41.950
> 
> 标签：c#, web-services, configuration, asmx

我想知道是否有人知道是否可以设置在 .net 2.0 中运行的传统 Web 服务，以便有： - Web 服务的一个实例 - 多个客户端使用这个实例

默认行为是多个客户端将拥有自己的服务实例还是只有一个实例？阅读建议必须以某种方式配置它，但不确定如何配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:12:56.107

.asmx Web 服务托管在 IIS 中，因此从技术上讲，它们是在应用程序池中运行的 Web 应用程序，因此应用程序池设置将指定最大工作进程数。请参阅此处的“Web Garden”部分以获得更好的解释。这一切都适用于 IIS 中托管的 Web 服务以及 ASP.NET 应用程序：http: [//msdn.microsoft.com/en-us/library/aa720391 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa720391(v=vs.71).aspx)

# oracle10g - CASE 语句中的错误

> ID：14361441
> 
> 赞同：0
> 
> 时间：2013-01-16T15:06:49.913
> 
> 标签：oracle10g, oracle11g

编写 CASE 语句时出现问题。请帮忙

```
insert into CDR(rts,smscid,count,statusflag,operator,identifier)
     select trunc(rts),smscid,statusflag,operator, 
     (case when smscid='BPL-MUM' and operator='BPL' and  is_number(replace(replace(replace(senderid, 'DM-',''), 'LM-',''),'BT-',''))=0 THEN "LOOP TRANSACTIONAL"
          when smscid='BPL-MUM' and operator!='BPL' and  is_number(replace(replace(replace(senderid, 'DM-',''), 'LM-',''),'BT-',''))=0 THEN "NONLOOP TRANSACTIONAL"
          When Smscid='BPL-MUM' And Operator='BPL' And  Is_Number(Replace(Replace(Replace(Senderid, 'DM-',''), 'LM-',''),'BT-',''))!=0 THEN "LOOP PROMOTIONAL"
          when smscid='BPL-MUM' and operator!='BPL' and  is_number(replace(replace(replace(senderid, 'DM-',''), 'LM-',''),'BT-',''))!=0 THEN  "NONLOOP PROMOTIONAL" 
          END),sum(count)    
      From Mis_Summary_Dn  Where Rts Between '26-dec-2012' And '27-dec-2012' And Statusflag='SUCCESS' Group By Trunc(Rts),Smscid,Statusflag,Operator; 
```

我收到类似的错误

```
SQL Error: ORA-00904: "NONLOOP PROMOTIONAL": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:21:58.370

将您的字符串放在单引号中，而不是双引号中。双引号用于标识符

```
'NONLOOP PROMOTIONAL' 
```

# scala - 将托管依赖项添加到 Play 2 应用程序

> ID：14361448
> 
> 赞同：2
> 
> 时间：2013-01-16T15:07:03.103
> 
> 标签：scala, playframework-2.0, sbt, ivy

我想使用**SBT**将 Jersey-client 添加到我的 Play 2 应用程序中。

因此，我将依赖项添加到我的`ApplicationBuild.scala`文件中，如下所示：

```
object ApplicationBuild extends Build {

  val appName = "wealcome-webapp"
  val appVersion = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    jdbc,
    anorm,
    "com.sun.jersey" % "jersey-client" % "1.16"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    scalaVersion := "2.10.0"
  )

} 
```

所以，在命令行中我制作 : `play reload update`。

因此，我希望找到 Jersey 的 jars 文件到`play-2.1-RC1/repository/local`. 但是，我在`play-2.1-RC1/repository/cache`.

我应该怎么做才能使依赖项自动进入**本地**文件夹以期望我的应用程序能够编译？

**在缓存**文件夹中找到jar文件是否正常？缓存的作用究竟是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:27:07.203

如果您使用的是 IDE，请确保运行`play eclipsify`或`play idea`在更改依赖项之后运行。之后可能需要刷新项目。然后项目文件的类路径将被适当地更新。在您执行此操作之前，只有 SBT 会知道您的更改。

# git - 如何使用 Git 扩展创建补丁

> ID：14361453
> 
> 赞同：11
> 
> 时间：2013-01-16T15:07:11.783
> 
> 标签：git, patch, git-extensions

有没有办法从 Git Extensions 的用户界面中的选定提交创建补丁？

我知道如何通过命令行导出补丁槽，但我想知道 TortoiseHg 用户界面中是否有类似的功能（右键单击 →*导出*-> ...）

到目前为止，我只找到了在用户界面中应用补丁的功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T15:13:20.123

您可以使用命令 -> 格式化补丁。在弹出的窗口中，您可以选择多个提交。

结果将是每次提交一个补丁文件。这符合`git format-patch`.

不幸的是，用户界面无法将它们全部放在一个文件中。您可以使用某种简单的脚本将所有创建的补丁文件的内容放入一个文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-18T10:50:40.463

添加图片，[参考 git-extensions-documentation.readthedocs.org](http://git-extensions-documentation.readthedocs.org/en/latest/patches.html) [![在此处输入图像描述](../Images/793d39799bde2c5db7488df7d0c67947.png)](https://i.stack.imgur.com/vbeYO.png)

# jquery - jQuery UI 选项卡在加载时不隐藏非活动选项卡

> ID：14361455
> 
> 赞同：4
> 
> 时间：2013-01-16T15:07:19.333
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我在使用 jQuery 选项卡时遇到了一个奇怪的问题。选项卡工作正常，但非活动面板在加载时仍然可见，并且只有在选择其他选项卡时才会隐藏它们。

这是我的代码：

```
<head>
<link rel="stylesheet" href="css/jquery.ui.all.css" type="text/css" media="screen" />
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery-ui.custom.min.js"></script>
<script type="text/javascript">
jQuery.noConflict(); 
(function($) {
    $(function() {  
        /* UI Tabs */
        $.fn.tabs && $(".tabs").tabs();
    });
}) (jQuery);
</script>
</head>
<body>
<div class="tabs">
    <ul>
        <li><a href="#tab-1">Tab 1</a></li>
        <li><a href="#tab-2">Tab 2</a></li>
        <li><a href="#tab-3">Tab 3</a></li>
    </ul>
    <div id="tab-1">
    ...
    </div>
    <div id="tab-2">
    ...
    </div>
    <div id="tab-3">
    ...
    </div>
</div>
</body> 
```

我以前没见过这个。谁能发现我可能错过的任何东西？

干杯， RJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T13:24:12.127

有点粗糙，因为它没有解决问题的根源，但确实解决了问题；我只是将以下内容添加到我的样式表中。

```
 <style>
        .ui-tabs-hide { display: none; }
    </style>` 
```

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T14:48:54.090

我一直有同样的问题。尝试在您的样式表中添加这个精确的夹头。

```
div .ui-tabs .ui-tabs-hide {
display: none;
} 
```

出于某种原因，我一直在寻找一种风格......

```
div {display: block;} 
```

...这一直覆盖罗纳德提供的我的 .ui-tabs-hide 修复。

希望这可以帮助，

岩石

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T23:39:27.170

将此添加到您的CSS：

```
.ui-tabs-hide { 
    display: none !important; 
 } 
```

*!important*确保没有其他任何东西会覆盖它。

# javascript - 所选选项未在 html 中显示

> ID：14361459
> 
> 赞同：0
> 
> 时间：2013-01-16T15:07:30.617
> 
> 标签：javascript, jquery, html

为什么当我使用 javascript 代码在我的下拉列表中设置选定值时，属性“selected”没有在 html 中设置，而是在布局中设置。

```
$("#my_dropdown").val('some_value');

$("#my_dropdown option[value='"+some_value+"']").attr("selected", true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:10:16.300

使用`prop()`：

```
$("#my_dropdown option[value='" + some_value + "']").prop("selected", true); 
```

但是，您问题中的第一种方法（设置`val()`）是更好的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:11:41.933

属性和属性是有区别的。

属性是创建元素的 HTML 代码中的内容，即它是初始值。

该属性是当前值，因此您可以在不影响相应属性的情况下更改属性。

`val`在`select`元素中使用将设置`selected`选项的属性，但不会更改`selected`属性。

在 jQuery 中有`attr`和`prop`方法来分别设置属性和属性。

# javascript - 如何在android上调整复选框的大小？

> ID：14361462
> 
> 赞同：0
> 
> 时间：2013-01-16T15:07:56.500
> 
> 标签：javascript, html, jquery-mobile

我正在使用 Jquery mobile 和 html 制作带有记住我复选框的登录页面

```
 <td align="right" style="width: 30%; padding-right:4%;">
    <input type="checkbox" id="Remember"  name="Remember" data-role="none"                                   
     style="background-color: White; font-size: 100%; height: 33px; width: 34px;"/>
  </td> 
```

问题是此复选框不想在三星note2“OS Android 4.1”上调整大小任何帮助我如何调整此复选框的大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:13:38.807

我知道这不是您要求的，而是作为替代解决方案：

使用两个图像（选中和未选中）和一些 JavaScript 创建您自己的复选框。届时，它将保证在所有移动设备上始终如一地查看和工作。

# linux - 用于递归查找和替换的 Sed 命令失败

> ID：14361467
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:08:11.110
> 
> 标签：linux, macos, sed, replace

我正在尝试递归查找和替换命令`OSX`：

```
find . -type f -name '*.*' -exec sed -i '' s/Renseigner votre question en 140 caractères max/Renseigner votre question en 140 caractères max./ {} + 
```

但我得到了这个：

```
sed: 1: "s/Renseigner": unterminated substitute pattern
sed: 1: "s/Renseigner": unterminated substitute pattern 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:20:34.893

在 sed 命令周围加上引号。

# asp.net - ASP.NET Giving 错误：您的浏览器不支持脚本或已配置为不允许脚本

> ID：14361469
> 
> 赞同：1
> 
> 时间：2013-01-16T15:08:26.727
> 
> 标签：asp.net, reportviewer, scriptmanager, report-viewer2010

我正在尝试使用`ReportViewer`控件显示 RDL 报告。我已经设法在 SO 的帮助下加载了我的报告。但现在我面临另一个问题。

报告已加载，因为它显示了报告的所有参数文本字段。但是当我填写这些时，不会显示任何报告结果。当我通过 ReportServer URL 在 Web 浏览器中查看报告时，完全相同的参数**确实有效。**

我认为问题在于它还在我的 ASP.NET 页面（我有 ReportViewer 控件）上显示此错误。

> 您的浏览器不支持脚本或已配置为不允许脚本。

这很奇怪，因为其他所有启用 javascript 的网站对我来说都非常好。我相信会引发此错误，因为`ScriptManager`我的 ASP.NET 页面中有一个。

我不知道如何解决这个问题。有人知道如何解决这个问题吗？

* * *

## 笔记：

当我删除控件时，错误**不会出现。**`ReportViewer`我也可以`alert`在`<script>`标签中执行。所以JS似乎正在工作。

* * *

这是我的页面中的内容：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>Report</h2
    <rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" 
        Font-Size="8pt" Height="742px" InteractiveDeviceInfos="(Collection)" 
        ProcessingMode="Remote" WaitMessageFont-Names="Verdana" 
        WaitMessageFont-Size="14pt" Width="907px">
        <ServerReport ReportPath="http://server.com/Product/Dashboards/Product_tool.rdl" 
            ReportServerUrl="http://server.com/ReportServer" />
    </rsweb:ReportViewer>

    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
</asp:Content> 
```

在我的`PageLoad`：

```
ReportViewer1.ServerReport.ReportServerCredentials = new ReportCredentials("user", "pass");
ReportViewer1.Visible = true;
ReportViewer1.ServerReport.Refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:13:57.293

最可能的原因是该站点位于不受信任的地址上。Internet Explorer 在区域中打开站点，并且它可能将您的开发地址放在不受信任的区域中，这会默认禁用脚本。您通常可以在某处看到一个图标来指示这一点，并允许您将地址添加到受信任区域。

查找眼睛图标或警告图标 - 取决于您使用的 Internet Explorer 版本。

您也可以启动另一个浏览器，看看它是否有任何不同。

# internet-explorer - 字体在 IE10 上不起作用？

> ID：14361472
> 
> 赞同：0
> 
> 时间：2013-01-16T15:08:29.337
> 
> 标签：internet-explorer, font-face

我正在为所有浏览器验证我的 CSS，使用 browserstack 来预览每个浏览器。

发现我的字体无法在... IE10 上运行时，我感到非常惊讶和愤怒。使用 ie7、ie8 和 ie9 中的字体，一切都完美无缺。

但现在可以让它在 IE10 上运行。

这是设计： [http ://custom-design.ch/_wp/viotrain/template/](http://custom-design.ch/_wp/viotrain/template/)

您能否在真正的 IE10 浏览器（不是 browserstack 的浏览器）上签入并告诉我：-如果问题也发生在真实版本中-如果您有任何解决方案来解决这个问题，这让我抓狂:(

谢谢您的帮助！愿所有的 Internet Explorer 开发者都死于可怕的痛苦中：D

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:16:11.897

它适用于我在 Windows 8 上的 IE!0 中。桌面和 Metro UI，用于 latorregular 和 lobsterregular 字体。

# ios - 反转CMRotationMatrix单轴的旋转

> ID：14361474
> 
> 赞同：3
> 
> 时间：2013-01-16T15:08:38.923
> 
> 标签：ios, core-motion, rotational-matrices

请多多包涵，我真的不擅长矩阵数学。我有一个图层，当手机旋转到其他姿态时，我想在 referenceAttitude 处保持重力“静止”。我有一个运行良好的motionManager，在当前姿态上使用multiplyByInverseOfAttitude，并使用CMRotationMatrix 将生成的增量作为旋转应用到我的图层（对俯仰、滚动和偏航进行单独的CATransform3DRotates 会导致轴附近出现相当大的古怪）。它基本上是受到[像这个例子这样](http://books.google.com/books?id=1LcFLAFbBrgC&pg=PA883&lpg=PA883&dq=multiplybyinverseofattitude%20rotate&source=bl&ots=MN9H-K3pBg&sig=mbVEFeijkTKSmgs_pXy-MgYcOH4&hl=en&sa=X&ei=WY71UPWOOsXG0AGgroGQCA&ved=0CFEQ6AEwBA#v=onepage&q=multiplybyinverseofattitude%20rotate&f=false)的代码的启发。

在将旋转应用于我的图层之前，我将它与另一个变换连接以应用 m34 透视技巧。

```
[attitude multiplyByInverseOfAttitude:referenceAttitude];

CATransform3D t = CATransform3DIdentity;
CMRotationMatrix r = attitude.rotationMatrix;
t.m11=r.m11;    t.m12=r.m12;    t.m13=r.m13;    t.m14=0;
t.m21=r.m21;    t.m22=r.m22;    t.m23=r.m23;    t.m24=0;
t.m31=r.m31;    t.m32=r.m32;    t.m33=r.m33;    t.m34=0;
t.m41=0;        t.m42=0;        t.m43=0;        t.m44=1;

CATransform3D perspectiveTransform = CATransform3DIdentity;
perspectiveTransform.m34 = 1.0 / -650;
t = CATransform3DConcat(t, perspectiveTransform);

myUIImageView.layer.transform = t; 
```

结果很漂亮，就像你期望的那样工作，当我移动手机时，图层保持静止，除了一个轴，y轴；将手机平放并滚动，该层会沿手机所在的方向滚动两次，而不是保持静止。

我不知道为什么在应用 multiplyByInverseOfAttitude 后，这个轴移动错误而另一个轴正确移动。当对俯仰、偏航、滚动使用单独的 CATransform3DRotates 时，我可以通过将滚动矢量乘以 -1 轻松纠正问题，但我不知道如何将其应用于旋转矩阵。显然，只有在将透视图引入方程式后，该问题才可见，所以也许我做错了。反转我的 m34 值可以修复滚动，但会在球场上产生相同的问题。我要么需要弄清楚为什么这个轴上的旋转是向后的，通过我的矩阵反转那个轴上的旋转，或者以某种方式纠正视角。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:37:39.027

您必须考虑以下几点：

1.  在您的情况下，`CMRotationMatrix`需要转置（[http://en.wikipedia.org/wiki/Transpose](http://en.wikipedia.org/wiki/Transpose)），这意味着交换列和行。
2.  您不需要将转换设置为`CATransform3DIdentity`，因为您正在覆盖每个值，因此您可以从一个空矩阵开始。如果你想使用`CATransform3DIdentity`你可以省略设置 0 和 1，因为它们已经被定义了。（`CATransform3DIdentity`是一个单位矩阵，见[http://en.wikipedia.org/wiki/Identity_matrix](http://en.wikipedia.org/wiki/Identity_matrix)）
3.  要同时校正围绕 Y 轴的旋转，您需要将向量乘以 [1 0 0 0; 0 -1 0 0; 0 0 1 0；0 0 0 1]。

对您的代码进行以下更改：

```
CMRotationMatrix r = attitude.rotationMatrix;
CATransform3D t;
t.m11=r.m11;    t.m12=r.m21;    t.m13=r.m31;    t.m14=0;
t.m21=r.m12;    t.m22=r.m22;    t.m23=r.m32;    t.m24=0;
t.m31=r.m13;    t.m32=r.m23;    t.m33=r.m33;    t.m34=0;
t.m41=0;        t.m42=0;        t.m43=0;        t.m44=1;

CATransform3D perspectiveTransform = CATransform3DIdentity;
perspectiveTransform.m34 = 1.0 / -650;
t = CATransform3DConcat(t, perspectiveTransform);
t = CATransform3DConcat(t, CATransform3DMakeScale(1.0, -1.0, 1.0)); 
```

或者，将**t**设置为`CATransform3DIdentity`只保留 0 和 1：

```
...
CATransform3D t = CATransform3DIdentity;
t.m11=r.m11;    t.m12=r.m21;    t.m13=r.m31;
t.m21=r.m12;    t.m22=r.m22;    t.m23=r.m32;
t.m31=r.m13;    t.m32=r.m23;    t.m33=r.m33;
.... 
```

# linux - 剪切同组用户的/etc/passwd行

> ID：14361485
> 
> 赞同：1
> 
> 时间：2013-01-16T15:09:07.257
> 
> 标签：linux, awk, grep, cut, passwd

我想切断`/etc/passwd`同一组用户的线路。

如果我的组有 uid 1009 我想要`/etc/passwd`这个组的所有行

```
user1:x:1001:1009::/home/user1:/bin/bash
user2:x:1002:1009::/home/user2:/bin/bash
user3:x:1003:1009::/home/user3:/bin/bash 
```

我试过`cat /etc/passwd | grep 1009`但它不起作用，因为数字 1009 也可以是 uid 或其他数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:16:07.793

使用`awk`字段分隔符将第四个字段与您想要的 uid 进行比较`:`

```
$ awk -F: '$4==1009' /etc/passwd
user1:x:1001:1009::/home/user1:/bin/bash
user2:x:1002:1009::/home/user2:/bin/bash
user3:x:1003:1009::/home/user3:/bin/bash 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:12:54.290

```
cat /etc/passwd | egrep '([^:]+:){3}1009:' 
```

“三个（一些非冒号，然后是冒号），然后是 1009，然后是另一个冒号。”

（您需要尾随冒号来省略组 10090。）

# c++ - unblocking WSAccept 用于阻塞 TCP 服务器套接字

> ID：14361488
> 
> 赞同：2
> 
> 时间：2013-01-16T15:09:15.733
> 
> 标签：c++, sockets, network-programming, winsock

我正在编写一个 TCP 服务器（阻塞套接字模型）。当服务器等待（阻塞）接受新的连接尝试（我使用 WSAccept）时，我无法实现有效的正常程序退出。服务器监听套接字的代码是这样的（我省略了错误处理和其他不相关的代码）：

```
int ErrCode = WSAStartup(MAKEWORD(2,2), &m_wsaData) ;

// Create a new socket to listen and accept new connection attempts
struct addrinfo hints, *res = NULL, *ptr = NULL ;
int rc, count = 0 ;
memset(&hints, 0, sizeof(hints)) ;

hints.ai_family = AF_UNSPEC ;
hints.ai_socktype = SOCK_STREAM ;
hints.ai_protocol = IPPROTO_TCP ;
hints.ai_flags = AI_PASSIVE ;

CString strPort ;
strPort.Format("%d", Port) ;

getaddrinfo(pLocalIp, strPort.GetBuffer(), &hints, &res) ;

strPort.ReleaseBuffer() ;

ptr = res ;

if ((m_Socket = WSASocket(res->ai_family, res->ai_socktype, res->ai_protocol, NULL, 0, 0)) == INVALID_SOCKET)
{
    // some error   
} 

if(bind(m_Socket, (SOCKADDR *)res->ai_addr, res->ai_addrlen) == SOCKET_ERROR)
{
    // some error
}

if (listen(m_Socket, SOMAXCONN) == SOCKET_ERROR)
{
    // some error
} 
```

到目前为止一切顺利......然后我在这样的线程中实现了 WSAccept 调用：

```
SOCKADDR_IN ClientAddr ;
int ClientAddrLen = sizeof(ClientAddr) ;

SOCKET TempS = WSAAccept(m_Socket, (SOCKADDR*) &ClientAddr, &ClientAddrLen, NULL, NULL); 
```

当然，WSAccept 会阻塞，直到进行新的连接尝试，但是如果我想退出程序，那么我需要一些方法来让 WSAccept 退出。我尝试了几种不同的方法：

1.  尝试从另一个线程中使用 m_Socket 调用 shutdown 和/或 closesocket 失败（程序只是挂起）。
2.  使用 WSAEventSelect 确实解决了这个问题，但是 WSAccept 只提供非阻塞套接字——这不是我的意图。（有没有办法让套接字阻塞？）
3.  我阅读了 APC 并尝试使用 QueueUserAPC(MyAPCProc, m_hThread, 1)) 之类的东西，但它也不起作用。

我究竟做错了什么 ？有没有更好的方法让这个阻塞 WSAccept 退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:54:07.483

使用`select()`超时来检测客户端连接何时实际处于挂起状态，然后再调用`WSAAccept()`以接受它。它适用于阻塞套接字，而不会将它们置于非阻塞模式。这将使您的代码有更多机会检查应用程序是否正在关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:56:21.743

使用非阻塞接受套接字（您提到的 WSAEventSelect）并使用非阻塞 WSAccept。您可以使用 ioctlsocket 制作一个 WSAccept 返回到阻塞套接字的非阻塞套接字（[请参阅 msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738573.aspx)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:12:32.863

做所有其他你在关机时绝对必须做的事情，（也许你有数据库连接要关闭，或者文件要刷新？），然后调用 ExitProcess(0)。那将停止您的聆听线程，没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T22:02:43.700

请参阅[log4cplus 源代码](http://bazaar.launchpad.net/~log4cplus/log4cplus/trunk/view/head:/src/socket-win32.cxx#L467)了解我对这个问题的看法。我基本上等待两个事件对象，一个在接受连接时发出信号（使用`WSAEventSelect()`），另一个用于中断等待。源中最相关的部分如下。见`ServerSocket::accept()`。

```
namespace {

static
bool
setSocketBlocking (SOCKET_TYPE s)
{
    u_long val = 0;
    int ret = ioctlsocket (to_os_socket (s), FIONBIO, &val);
    if (ret == SOCKET_ERROR)
    {
        set_last_socket_error (WSAGetLastError ());
        return false;
    }
    else
        return true;
}

static
bool
removeSocketEvents (SOCKET_TYPE s, HANDLE ev)
{
    // Clean up socket events handling.

    int ret = WSAEventSelect (to_os_socket (s), ev, 0);
    if (ret == SOCKET_ERROR)
    {
        set_last_socket_error (WSAGetLastError ());
        return false;
    }
    else
        return true;
}

static
bool
socketEventHandlingCleanup (SOCKET_TYPE s, HANDLE ev)
{
    bool ret = removeSocketEvents (s, ev);
    ret = setSocketBlocking (s) && ret;
    ret = WSACloseEvent (ev) && ret;
    return ret;
}

} // namespace

ServerSocket::ServerSocket(unsigned short port)
{
    sock = openSocket (port, state);
    if (sock == INVALID_SOCKET_VALUE)
    {
        err = get_last_socket_error ();
        return;
    }

    HANDLE ev = WSACreateEvent ();
    if (ev == WSA_INVALID_EVENT)
    {
        err = WSAGetLastError ();
        closeSocket (sock);
        sock = INVALID_SOCKET_VALUE;
    }
    else
    {
        assert (sizeof (std::ptrdiff_t) >= sizeof (HANDLE));
        interruptHandles[0] = reinterpret_cast<std::ptrdiff_t>(ev);
    }
}

Socket
ServerSocket::accept ()
{
    int const N_EVENTS = 2;
    HANDLE events[N_EVENTS] = {
        reinterpret_cast<HANDLE>(interruptHandles[0]) };
    HANDLE & accept_ev = events[1];
    int ret;

    // Create event and prime socket to set the event on FD_ACCEPT.

    accept_ev = WSACreateEvent ();
    if (accept_ev == WSA_INVALID_EVENT)
    {
        set_last_socket_error (WSAGetLastError ());
        goto error;
    }

    ret = WSAEventSelect (to_os_socket (sock), accept_ev, FD_ACCEPT);
    if (ret == SOCKET_ERROR)
    {
        set_last_socket_error (WSAGetLastError ());
        goto error;
    }

    do
    {
        // Wait either for interrupt event or actual connection coming in.

        DWORD wsawfme = WSAWaitForMultipleEvents (N_EVENTS, events, FALSE,
            WSA_INFINITE, TRUE);
        switch (wsawfme)
        {
        case WSA_WAIT_TIMEOUT:
        case WSA_WAIT_IO_COMPLETION:
            // Retry after timeout or APC.
            continue;

        // This is interrupt signal/event.
        case WSA_WAIT_EVENT_0:
        {
            // Reset the interrupt event back to non-signalled state.

            ret = WSAResetEvent (reinterpret_cast<HANDLE>(interruptHandles[0]));

            // Clean up socket events handling.

            ret = socketEventHandlingCleanup (sock, accept_ev);

            // Return Socket with state set to accept_interrupted.

            return Socket (INVALID_SOCKET_VALUE, accept_interrupted, 0);
        }

        // This is accept_ev.
        case WSA_WAIT_EVENT_0 + 1:
        {
            // Clean up socket events handling.

            ret = socketEventHandlingCleanup (sock, accept_ev);

            // Finally, call accept().

            SocketState st = not_opened;
            SOCKET_TYPE clientSock = acceptSocket (sock, st);
            int eno = 0;
            if (clientSock == INVALID_SOCKET_VALUE)
                eno = get_last_socket_error ();

            return Socket (clientSock, st, eno);
        }

        case WSA_WAIT_FAILED:
        default:
            set_last_socket_error (WSAGetLastError ());
            goto error;
        }
    }
    while (true);

error:;
    DWORD eno = get_last_socket_error ();

    // Clean up socket events handling.

    if (sock != INVALID_SOCKET_VALUE)
    {
        (void) removeSocketEvents (sock, accept_ev);
        (void) setSocketBlocking (sock);
    }

    if (accept_ev != WSA_INVALID_EVENT)
        WSACloseEvent (accept_ev);

    set_last_socket_error (eno);
    return Socket (INVALID_SOCKET_VALUE, not_opened, eno);
}

void
ServerSocket::interruptAccept ()
{
    (void) WSASetEvent (reinterpret_cast<HANDLE>(interruptHandles[0]));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-23T07:04:29.867

解决这个问题的一个不太巧妙的方法是`WSAConnect`从需要关闭的线程发出一个虚拟请求。如果虚拟连接失败，您可能会按照 Martin 的建议求助于 ExitProcess。

```
void Drain()
{    
    if (InterlockedIncrement(&drain) == 1)
    {
        // Make a dummy connection to unblock wsaaccept
        SOCKET ConnectSocket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, 0);
        if (ConnectSocket != INVALID_SOCKET) {
            int iResult = WSAConnect(ConnectSocket, result->ai_addr, result->ai_addrlen, 0, 0, 0, 0);
            if (iResult != 0) {
                printf("Unable to connect to server! %d\n", WSAGetLastError());                
            }
            else
            {
                closesocket(ConnectSocket);
            }
        }
    }
} 
```

# c# - Entity Framework：ObjectStateManager中已经存在同一个key的对象

> ID：14361492
> 
> 赞同：0
> 
> 时间：2013-01-16T15:09:27.887
> 
> 标签：c#, .net, entity-framework, ef-code-first

这是我的基`Repository`类：

```
public class RepositoryBase<TEntity> : IRepository<TEntity> where TEntity : EntityBase
{
    protected RepositoryBase(DbContext dbContext)
    {
        DbContext = dbContext;
        DbContext.Configuration.LazyLoadingEnabled = false;
        Entities = DbContext.Set<TEntity>();
    }
    public IDbSet<TEntity> Entities { get; set; }    
    ...
    ...
    ...

    public TEntity DeleteOne(TEntity entity)
    {
        DbContext.Entry(entity).State = EntityState.Deleted;
        Entities.Remove(entity);
        DbContext.SaveChanges();
        return entity;
    }
} 
```

当我想调用 delete 方法时，它会引发我在帖子标题中指向的异常。我不知道我该如何解决这个问题。请注意，具有相同错误的不同主题的其他答案并没有解决我的问题。

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:59:37.407

删除行：

```
DbContext.Entry(entity).State = EntityState.Deleted; 
```

这是试图附加实体的第二个副本。这是一个快捷方式：

```
DbContext.Attach(entity);
DbContext.Remove(entity); 
```

所以你的代码真的是：

```
public TEntity DeleteOne(TEntity entity)
{
    DbContext.Attach(entity);
    DbContext.Remove(entity);
    Entities.Remove(entity);
    DbContext.SaveChanges();
    return entity;
} 
```

并且由于它已经附加它会引发错误。

# nlp - 从 TripAdvisor 抓取数据的任何建议

> ID：14361493
> 
> 赞同：3
> 
> 时间：2013-01-16T15:09:31.320
> 
> 标签：nlp, web-crawler, corpus

我们目前正在开展一个 NLP 项目，需要一个旨在从 tripadvisor.com 中提取的语料库。我们期望输出有两种类型：评论和评论的评级。我的问题是：

*   有没有最适合这个目的的爬虫工具？它必须易于使用，首选python。Beautiful Soup 是我发现的，但我想在这里询问任何其他建议。

*   有没有专门为此目的的完整工具？我的意思是为tripadvisor.com 编写的程序？

*   任何其他有关从大型网站爬行的数据（评论/评级）的建议将不胜感激。

该语料库将用于大学研究的情感分析，我们需要尽快抓取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:54:50.433

按相应顺序回答您的问题：

*   您需要的是一个 Web Scraping 工具。爬虫使浏览页面的过程自动化，而爬虫将 HTML 转换为结构化数据。在不同的平台上有许多可用的工具。不知道美丽的汤。您是在设计 Scraper 还是会购买它？

*   您可以根据您的定制需求获得现成的语料库或制作 Web Scraper。[您可以使用ScraperWiki](https://scraperwiki.com/)手动请求您的数据或编写 Scraper 。我不知道您的数据结构，但可以使用 Google 电子表格抓取一些数据。[你可以在这里](http://vancouverdata.blogspot.in/2011/02/how-to-web-scraping-xpath-html-google.html)看到。只需查看抓取的数据类型，如果它与您的数据类似，那么您就可以使用它。

*   无法抓取某些站点或其特定目录。您可以检查他们`robots.txt`以了解相同的情况。在从网站抓取数据之前，还要阅读网站的政策。

您还没有问过，但[这里](http://www.fieldassignment.com/2011/04/free-sentiment-analysis-tools.html)有一些免费的情绪分析工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:17:04.997

对于python，你可以使用scrapy，这是一个熟练的爬虫框架，[http: //scrapy.org/](http://scrapy.org/)

此外，我邀请您分享您收集的数据。如果tripadvisor 数据已经准备好，您就不需要爬网了。或者至少，您可以共享爬虫脚本。

# jquery - JQuery Draggable：嵌套在“handle”元素中的“cancel”元素

> ID：14361494
> 
> 赞同：1
> 
> 时间：2013-01-16T15:09:31.647
> 
> 标签：jquery, html, jquery-ui, draggable, jquery-ui-draggable

我想制作一个`div`可拖动的，使用嵌套在其中的元素作为句柄。为此，我可以使用带有选项的 JQuery UI 的[Draggable 。](http://docs.jquery.com/UI/Draggable)`handle`

*但是，当拖动嵌套在句柄*元素中的元素时，我想防止拖动。添加`cancel`选项似乎不起作用。

使用 Draggable 可以实现这种行为吗？

* * *

这是一个小提琴：http: [//jsfiddle.net/M6qdh/](http://jsfiddle.net/M6qdh/)

**HTML：**

```
<div class="dialog">
  <div class="titleBar">
    <span class="title">Title</span>
    <div class="close">X</div>
  </div>
</div> 
```

**JS：**

```
$(function() {
  $(".dialog").draggable({
    handle: $(".titleBar"),
    cancel: $(".close")
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:30:49.280

实现您想要的一种方法是防止`mousedown`事件从关闭按钮冒泡 DOM 树：

```
$(".dialog").draggable({
    handle: $(".titleBar")
});

$(".close").mousedown(function(e) {
    e.stopPropagation();
}); 
```

[你会在这里](http://jsfiddle.net/M6qdh/2/)找到一个更新的小提琴。

# azure - 如何查看辅助角色的本地存储资源的使用情况？

> ID：14361495
> 
> 赞同：0
> 
> 时间：2013-01-16T15:09:34.220
> 
> 标签：azure

我已经为我的 Azure 辅助角色设置了本地存储资源，但是从 C# 代码中我看不到检查 LocalResource 对象上有多少可用空间的方法。我怎样才能找到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:28:48.480

它与您查看已安装驱动器中正在使用的内容的方式相同。不幸的是，您需要爬取文件夹/目录结构并总结所有各种文件大小。

# screwturn - 螺丝转维基 V3.0.5.600 子类别

> ID：14361496
> 
> 赞同：1
> 
> 时间：2013-01-16T15:09:36.750
> 
> 标签：screwturn

我正在为我的部门建立一个内部 wiki (Screwturn V3.0.5.600)。我正在建立基本结构，我相信我将需要类别和子类别。

我浏览了文档，但没有找到有关设置子类别的说明。可能吗？是否有一个插件可以使它成为可能？

我放弃将我的主要类别设置为命名空间，然后将我的子类别设置为每个命名空间中的类别，但这感觉不对。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T16:58:36.273

我不相信目前有任何真正的方法可以利用 STW 中的子类别功能。如果您更多地解释您的结构是什么以及为什么需要以这种方式设置它，也许人们可以提供建议。

顺便说一下，您可以尝试通过给不同类别相关的名称来设置语义子类别。即，“开发”、“开发-项目1”、“开发-项目2”。

除此之外，如何使用关键字功能？

# jquery - Backbone.js 中的共享方法和属性？

> ID：14361502
> 
> 赞同：0
> 
> 时间：2013-01-16T15:09:54.103
> 
> 标签：jquery, backbone.js, requirejs

我正在审查应用程序的代码。我遇到了以下我无法全面理解的代码。

```
 define(['av'], function (av) {
     av.Application.BaseView = function (options) {
      //add non-shared methods/properties here --------------------- 1)

    };
    _.extend(av.Application.BaseView.prototype, Backbone.View.prototype, {
      // add shared methods/properties here ------------------------ 2)
    });
   av.Application.BaseView.extend = Backbone.View.extend;

}); 
```

任何人都可以为什么在评论 1 之后添加的方法/属性是非共享的，而在评论 2 之后在他们的子实例之间共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:32:52.707

第一个代码块定义了一个构造函数，每次`new`打开视图时都会调用它。在该函数中，您可以使用以下语法创建公共属性：

```
this.foo = "bar"; 
```

每次初始化视图时都会运行此初始化代码，并将属性附加到视图的*实例*。实例属性不共享。

第二个代码块扩展了构造函数的原型，首先是 的所有属性`Backbone.View`，然后是块中定义的属性。如果您愿意，原型属性在函数的所有实例或“类”之间共享。

该代码本质上所做的是创建一个新函数，然后使用`Backbone.View`'s 属性对其进行增强。因为`Backbone.View`永远不会调用自己的构造函数（至少在您发布的代码中），这意味着这个类不会像普通的 Backbone View 那样工作。例如，传递给构造函数的`model`or`id`属性不会像通常那样自动复制到实例中：

```
var view = new av.Application.BaseView({model:model});
console.log(view.model); //-> undefined 
```

`constructor`Backbone 还支持通过在类定义中设置属性来更干净地覆盖构造函数：

```
av.Application.BaseView = Backbone.View.extend({

    //override the constructor function
    constructor: function(options) {

        //this property is not shared between instances
        this.foo = 'bar';

        //call Backbone's own constructor, so we get all the default behavior
        Backbone.View.prototype.constructor.apply(this, arguments);
    },

    //this property is attached to the prototype, and is shared
    baz: 'qux'
}); 
```

# python - python - 如何使python单元测试在从不同的工作目录运行时始终找到测试数据文件？

> ID：14361503
> 
> 赞同：20
> 
> 时间：2013-01-16T15:09:57.173
> 
> 标签：python, unit-testing

这是一个关于测试环境设置的问题。

在我的项目中，我有一些访问测试数据文件的单元测试。这些单元测试可以通过测试运行器从我的项目目录运行。或者我可以单独运行每个测试文件/模块，例如用于调试目的。

问题是，根据我从哪里运行测试，当前目录是不同的。因此，当从项目目录运行这些文件时，如下所示，通过提供相对于当前目录的路径来打开测试数据文件将不起作用，因为测试数据文件不在该目录中。

```
f = open('test_data.ext', 'r') 
```

我想过使用 __file__ 来使用相对于当前测试模块的路径，但是[当调用 __file__ 的测试模块是单独运行的模块时，这不起作用](https://stackoverflow.com/a/6416114/637325)。

人们通常如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T15:27:31.677

我想到了许多不同的方法：

1.  为您的数据目录设置环境变量
2.  编写一个始终导入的小模块，其唯一目的是相对于数据目录具有固定位置，然后`__file__`从那里调用
3.  在运行时生成数据
4.  将数据存储在数据库而不是文件中
5.  将数据存储在文件系统中的固定位置，而不是相对于包的位置
6.  不要直接运行你的测试代码

最适合您的解决方案取决于您的环境以及您的特定数据和程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T15:28:22.860

我不确定这是否是您的完整解决方案，但对于 Python 中的单元测试，我总是使用`Nose`. 它有一个优秀的测试发现程序。[你可以在这里](https://nose.readthedocs.org/en/latest/finding_tests.html)找到它的机制。也许你也可以得到一些用于 Python 的传统单元测试的想法......

`py.test`还使用了一个整洁的发现机制..

# c# - 编辑列表 在两个窗体之间（C#）

> ID：14361505
> 
> 赞同：1
> 
> 时间：2013-01-16T15:10:07.033
> 
> 标签：c#, forms, list

我有一个关于在两个 Windows 窗体之间维护列表的问题。这是一个我需要创建通讯录的项目。

我选择以列表的形式维护联系方式。我的第一个 windows 窗体 (form1) 包含一个 list 的主副本`AddressBook`，其中包含地址簿。我将 4 个条目硬编码到地址簿列表中，以便进行实验并让“添加”和“编辑”等简单功能正常工作。

我有第二个名为 Add 的 Windows 窗体，我可以在其中将新条目添加到列表中。这工作正常。我可以在添加表单中添加一个新联系人，这会显示在初始表单 1 主表单中。

我的问题出现在 EDIT 表单中。我将地址簿（主）列表传递给 EDIT 表单。EDIT 表单采用主列表，我能够操作该列表中的记录。但是，在将新列表发送回母版页 (form1) 时，它不会接收到它。我使用的代码与在成功发回新列表的 ADD 表单中使用的代码相同。但是，此代码在发回已编辑的列表时不起作用。

这是我在 form1 中的 AddressBook 属性

```
public List<Contact> addressBook;
    public List<Contact> AddressBook
    {

       get { return addressBook;} 
       set {addressBook = value;} 

    } 
```

在编辑内：

```
public Edit()

    {
        InitializeComponent();           
        temp = Master.AddressBook;    // temp is the temporary List I update within EDIT         

    } 
```

** 然后我有了我的算法，它成功地让我编辑列表 temp。列表 temp 现在有已编辑的列表* ***

然后当我点击保存按钮时，我使用以下代码；

```
Master.AddressBook = temp; 
```

我需要的只是将列表 temp 发送回 form1。

`Master.AddressBook = temp;`当我通过 ADD 表单向列表添加值时，该代码有效。

添加表格：

```
 public Add()
    {

        InitializeComponent();
        temp = Master.AddressBook;

    }

       **** code to add a new record into the list temp. the new record is called newRecord**********

    private void btnAddClose_Click(object sender, EventArgs e)
    {
        stor.AddressBook = temp; // when I hit close on the form, it updates the master     list AddressBook 
        this.Close(); 
    } 
```

这一切可能措辞很糟糕，但本质上我的代码失败的唯一一点是当我想通过用列表 temp 替换它来更改 form1 中的主地址簿时，它是我的 EDIT 表单中的已编辑列表。

我认为这与我的 AddressBook 属性有关。但这并不能解释为什么我可以用包含新记录的列表替换 AddressBook 但我不能用包含已编辑记录的列表替换它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:24:16.490

实现此目的的一种方法是将 Master 中的列表设为静态。

掌握：

```
 public static List<Contact> AddressBook { get; set; } 
```

注意：您不需要支持变量，如果您确实想使用它，最佳实践建议它是私有的。如果您决定使用它，它也需要是静态的。

在 Add 表单中，您将收集数据以创建一个新的 Contact 对象，而 temp 实际上应该*只是*一个 Contact 对象。添加表格：

```
private Contact newRecord = null;
public Add()
{
    InitializeComponent();
    newRecord = new Contact();
}

/**** code to add the user-input to the new Contact object ****/

private void btnAddClose_Click(object sender, EventArgs e)
{
    Master.AddressBook.Add(newRecord);
    this.Close(); 
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:36:59.723

这就是`Singleton`模式派上用场的地方：[Implementing Singleton in C#](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

您会注意到*应用程序设置*使用相同的模式来允许您全局访问它而无需传递它。

当我使用 a 时，`Singleton`我通常将类名**设为 (TypeName)Manager**（例如：**AddressBookManager**）。

所以这个类可能是这样的：

```
public static class AddressBookManager
{
  #region Singleton
  static readonly AddressBookManager instance = new AddressBookManager();

  private AddressBookManager(); // prevent creating instances of this

  public static AddressBookManager Current { get { return instance; } }
  #endregion

  AddressBook master = new AddressBook(); // the master address book

  public AddressBook Master
  { 
    get { return master; }  // get the master address book
    set { master = value; } // set the master address book
  }
} 
```

然后在每种形式中，您都可以像这样访问它：

```
var addressBook = AddressBookManager.Current.Master; 
addressBook.Add(newRecord); 
```

*您在使用编辑*功能时遇到的问题可能与您使用临时列表的方式有关。通过使用静态的全局列表并仅在其中添加/编辑项目，您不会遇到该问题。由于您的`Contact`项目是`class`（**不是`struct`**），因此它们的更改将自动反映在列表中，因为它们是引用类型。

关于`Singleton`类的重要部分是能够从项目中的任何地方访问它们。`Singleton`唯一需要注意的是，在使用多线程应用程序和类时需要格外小心。

# r - 在R中绘制具有不同颜色和线型的多个变量和因子

> ID：14361509
> 
> 赞同：-3
> 
> 时间：2013-01-16T15:10:09.127
> 
> 标签：r, ggplot2

我有一个代码可以在 ggplot 中绘制多个变量和因子。我想将线条类型从简单线更改为破折号或点之类的东西，以更好地表示变量。此外，现在它们以不同的颜色呈现。

代码：

```
df <- data.frame(z25$avg,z28$avg,z29$avg,z31$avg,z32$avg,sdtt$dt,znode25$outside)
names(df) <-  c("Node 25","Node 28","Node 29","Node 31","Node 32","Time_Date", "Results")
df.m <- melt(df, names(df)[6:7], names(df)[1:5])
df.m$Results <- factor(df.m$Results)
df.m$Time_Date <- strptime(as.character(df.m$Time_Date), format = "%Y-%m-%d %H:%M:%S")
p <- ggplot(df.m, aes(x = Time_Date, y = value, group = variable, color = variable))
p <- p + geom_point(aes(shape = Results), cex=3)
p <- p + scale_shape_manual(values=c(15,2))
p <- p + geom_line()
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
p <- p + scale_color_manual(values=c("#000099","red","green",'blue',"yellow"))
p <- p + ylim(-1,8)
p <- p + xlab('Date and Time') 
p <- p + ylab('Temprature') 
p <- p + ggtitle("Spatial Outliers of Node 25 ") + theme(plot.title = element_text(lineheight=3, face="bold", color="black"))
p 
```

阴谋： ![在此处输入图像描述](../Images/eba3d71a158d259be84be20d68dfd57c.png)

样本数据df.m：

```
 Time_Date Results variable       value
1 2007-09-30 01:00:00       1  Node 25 -0.35333333
2 2007-09-30 02:00:00       1  Node 25 -0.42333333
3 2007-09-30 03:00:00       1  Node 25 -0.73333333
4 2007-09-30 04:00:00       1  Node 25 -0.65000000
5 2007-09-30 05:00:00       1  Node 25 -0.40000000
6 2007-09-30 06:00:00       1  Node 25 -0.09166667 
```

样本数据df：

```
 Node 25     Node 28   Node 29    Node 31     Node 32           Time_Date Results
1 -0.35333333 -0.21000000 0.1433333 -0.3533333 -0.19833333 2007-09-30 01:00:00       1
2 -0.42333333 -0.37500000 0.2783333 -0.4850000 -0.25000000 2007-09-30 02:00:00       1
3 -0.73333333 -0.62166667 0.2466667 -0.7650000 -0.56500000 2007-09-30 03:00:00       1
4 -0.65000000 -0.58833333 0.3400000 -0.7150000 -0.45166667 2007-09-30 04:00:00       1
5 -0.40000000 -0.34333333 0.5900000 -0.4666667 -0.21333333 2007-09-30 05:00:00       1
6 -0.09166667 -0.02666667 0.8400000 -0.1666667  0.09666667 2007-09-30 06:00:00       1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:45:26.357

感谢 user1317221_G ：

```
znode25 = data.frame(second_data_results_node25[2:24,])

df <- data.frame(z25$avg,z28$avg,z29$avg,z31$avg,z32$avg,sdtt$dt,znode25$outside)
names(df) <-  c("Node 25","Node 28","Node 29","Node 31","Node 32","Time_Date", "Results")
df.m <- melt(df, names(df)[6:7], names(df)[1:5])
df.m$Results <- factor(df.m$Results)
df.m$Time_Date <- strptime(as.character(df.m$Time_Date), format = "%Y-%m-%d %H:%M:%S")
p <- ggplot(df.m, aes(x = Time_Date, y = value, group = variable, color = variable, linetype=variable))
p <- p + geom_point(aes(shape = Results), cex=4)
p <- p + scale_shape_manual(values=c(22,20))
p <- p + geom_line()
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
p <- p + scale_color_manual(values=c("#000099","red","darkgray",'blue',"darkred"))
p <- p + ylim(-1,8)
p <- p + xlab('Date and Time') 
p <- p + ylab('Temprature') 
p <- p + ggtitle("Spatial Outliers of Node 25 ") + theme(plot.title = element_text(lineheight=3, face="bold", color="black"))
p 
```

# extjs4 - Extjs SyntaxError: 无效的属性 id

> ID：14361511
> 
> 赞同：0
> 
> 时间：2013-01-16T15:10:13.253
> 
> 标签：extjs4, syntax-error

我有一个“编辑”按钮，但是当我单击它时，没有出现“编辑用户”弹出窗口，而是出现了一个 JavaScript 错误，即“SyntaxError: invalid property id”。这是我在 Firefox 中运行时得到的。

但是，在使用 Internet Explorer 时，单击“编辑”按钮会产生以下错误：“Microsoft JScript 编译错误：预期的标识符、字符串或数字。” 同样，不会出现“编辑用户”弹出窗口。

发回编辑用户弹出窗口的方式似乎有问题。代码执行并显示 loadMask 消息“请稍候...”，但未显示“编辑用户”弹出窗口。任何有关如何发现/修复错误的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:12:08.743

解决了！response.responseText 返回了Edit User 弹出窗口（即edit.vm 文件）。导致问题的 edit.vm 文件中有一个随机的 % 符号。

# r - 在 R 中每 2 分钟采样一次带时间戳的数据

> ID：14361514
> 
> 赞同：1
> 
> 时间：2013-01-16T15:10:18.110
> 
> 标签：r

我有一些纬度/经度数据，当 GPS 单元打开时每 10 秒收集一次。这些坐标显然带有时间戳。对于我的目的而言，这太多的数据（30K 加上观察），所以我希望每 2 分钟留下一个带有数据的数据框。我将如何在 R 中做到这一点？

我在下面创建了一个示例数据框。日期和时间被整合到一列中，我希望通过该列对我的数据进行采样。

```
a <-c(1:21)
D <- c("2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14")
Time <- c("18:40:37", "18:40:48", "18:40:58", "18:41:08","18:41:18","18:41:28","18:41:38","18:41:48","18:41:58","18:42:08","18:42:18","18:42:28","18:42:38","18:42:48","18:42:58","18:43:08","18:43:18","18:42:28", "18:44:18", "18:44:28", "18:44:28")
df1 <- data.frame(a, D, Time)

df1 <- within(df1, { timestamp=format(as.POSIXct(paste(D, Time)), "%d/%m/%Y %H:%M:%S") }) 
```

这些装置可以全天打开和关闭，因此记录的秒数可能不一致。

在 R 中执行此操作的最佳方法是什么？

非常感谢，凯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:42:18.690

最简单的解决方案是这样的：

```
df1[seq(to=nrow(df1), by=12),] 
```

意思是“每 12 行取一次，从第一行开始”。在设备关闭的情况下，这可能不是最理想的，但除非这种情况经常发生并且非常迅速地连续发生，否则它应该不会太重要。

我的第一个建议如下：

```
df1[(1:floor(nrow(df1)/12))*12,] 
```

它的作用几乎相同，但从第 12 行而不是第 1 行开始。是从到`1:n`的整数范围。因此，在这种情况下，我构建了一个由所有整数组成的范围，直到最大整数不大于行数除以 12。然后我将所有这些数字乘以 12。这个版本比上面的不太清楚，但它是第一个我想到的东西，尽管知道可能有用。`1``n`

# twitter-bootstrap - 使用 Bootstrap 在表单中标记错误

> ID：14361517
> 
> 赞同：228
> 
> 时间：2013-01-16T15:10:29.107
> 
> 标签：twitter-bootstrap

我已经开始使用 Bootstrap 来实现一个漂亮的页面设计，而不使用 GWT（后端是用 java 制作的）

对于我的登录屏幕，我复制了这个[示例](http://twitter.github.com/bootstrap/examples/signin.html)。现在我想标记一个错误，例如，用户名留空。所以我想知道 Bootstrap 框架中的程序是什么。或者，如果有示例显示错误的表单。

我不确定这个想法是用红色在输入元素内显示错误消息，还是在输入元素下方显示错误消息，或者可能是弹出窗口？

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2013-01-16T19:39:55.947

**（更新了 Bootstrap v4、v3 和 v3 的示例）**

过去几个主要版本的 Bootstrap 具有验证类的表单示例。

**引导程序 v4**

在 codepen 上查看[实时版本](https://codepen.io/jonschlinkert/pen/rGOorB)

![引导 v4 表单验证](../Images/82d38e181422efa188390f5c4cb7d3f9.png)

```
<div class="container">
  <form>
    <div class="form-group row">
      <label for="inputEmail" class="col-sm-2 col-form-label text-success">Email</label>
      <div class="col-sm-7">
        <input type="email" class="form-control is-valid" id="inputEmail" placeholder="Email">
      </div>
    </div>

    <div class="form-group row">
      <label for="inputPassword" class="col-sm-2 col-form-label text-danger">Password</label>
      <div class="col-sm-7">
        <input type="password" class="form-control is-invalid" id="inputPassword" placeholder="Password">
      </div>
      <div class="col-sm-3">
        <small id="passwordHelp" class="text-danger">
          Must be 8-20 characters long.
        </small>      
      </div>
    </div>
  </form>
</div> 
```

**引导程序 v3**

在 codepen 上查看[实时版本](https://codepen.io/jonschlinkert/pen/jGbXJJ)

![引导 v3 表单验证](../Images/fd388992049d17b2f07600220d6545b4.png)

```
<form role="form">
  <div class="form-group has-warning">
    <label class="control-label" for="inputWarning">Input with warning</label>
    <input type="text" class="form-control" id="inputWarning">
    <span class="help-block">Something may have gone wrong</span>
  </div>
  <div class="form-group has-error">
    <label class="control-label" for="inputError">Input with error</label>
    <input type="text" class="form-control" id="inputError">
    <span class="help-block">Please correct the error</span>
  </div>
  <div class="form-group has-info">
    <label class="control-label" for="inputError">Input with info</label>
    <input type="text" class="form-control" id="inputError">
    <span class="help-block">Username is taken</span>
  </div>
  <div class="form-group has-success">
    <label class="control-label" for="inputSuccess">Input with success</label>
    <input type="text" class="form-control" id="inputSuccess" />
    <span class="help-block">Woohoo!</span>
  </div>
</form> 
```

**引导程序 v2**

在 jsfiddle 上查看[实时版本](http://jsfiddle.net/jonschlinkert/pngWh/12/)

![引导 v2 表单验证](../Images/4029f30af6a42ec46ee6eb593f942fb5.png)

、`.error`和`.success`类被附加`.warning`到. 这是 v2 中的标准 Bootstrap 标记和样式。只要遵循这一点，你的身体就会很好。当然，如果您愿意，您可以超越自己的样式来添加弹出窗口或“内联 flash”，但是如果您遵循 Bootstrap 约定并将这些验证类挂在上面，它将保持一致且易于管理（至少因为您将继续受益于 Bootstrap 文档和示例）`.info``.control-group``.control-group`

```
 <form class="form-horizontal">
    <div class="control-group warning">
      <label class="control-label" for="inputWarning">Input with warning</label>
      <div class="controls">
        <input type="text" id="inputWarning">
        <span class="help-inline">Something may have gone wrong</span>
      </div>
    </div>
    <div class="control-group error">
      <label class="control-label" for="inputError">Input with error</label>
      <div class="controls">
        <input type="text" id="inputError">
        <span class="help-inline">Please correct the error</span>
      </div>
    </div>
    <div class="control-group info">
      <label class="control-label" for="inputInfo">Input with info</label>
      <div class="controls">
        <input type="text" id="inputInfo">
        <span class="help-inline">Username is taken</span>
      </div>
    </div>
    <div class="control-group success">
      <label class="control-label" for="inputSuccess">Input with success</label>
      <div class="controls">
        <input type="text" id="inputSuccess">
        <span class="help-inline">Woohoo!</span>
      </div>
    </div>
  </form> 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2013-10-15T17:19:32.120

**引导程序 V3**：

[官方文档链接 1](http://getbootstrap.com/css/#forms-control-validation)
[官方文档链接 2](http://getbootstrap.com/css/#forms-help-text)

```
<div class="form-group has-success">
  <label class="control-label" for="inputSuccess">Input with success</label>
  <input type="text" class="form-control" id="inputSuccess" />
  <span class="help-block">Woohoo!</span>
</div>
<div class="form-group has-warning">
  <label class="control-label" for="inputWarning">Input with warning</label>
  <input type="text" class="form-control" id="inputWarning">
  <span class="help-block">Something may have gone wrong</span>
</div>
<div class="form-group has-error">
  <label class="control-label" for="inputError">Input with error</label>
  <input type="text" class="form-control" id="inputError">
  <span class="help-block">Please correct the error</span>
</div> 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-10-04T11:48:03.687

在使用引导模态类（v 3.3.7）时，也可以使用以下类... help-inline 和 help-block 在模态中不起作用。

```
<span class="error text-danger">Some Errors related to something</span> 
```

输出如下所示：

[![模态中的错误文本示例](../Images/7d92d3c7f51eb08fa7ff839e790756d8.png)](https://i.stack.imgur.com/BQQeO.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-29T14:08:49.627

**引导程序 V3：**

一旦我在搜索 laravel 功能，我就知道了这个惊人的表单验证。后来，我修改了字形图标功能。现在，它看起来很棒。

```
<div class="col-md-12">
<div class="form-group has-error has-feedback">
    <input id="enter email" name="email" type="text" placeholder="Enter email" class="form-control ">
    <span class="glyphicon glyphicon-remove form-control-feedback"></span>       
    <span class="help-block"><p>The Email field is required.</p></span>                                        
</div>
</div>
<div class="clearfix"></div>

<div class="col-md-6">
<div class="form-group has-error has-feedback">
    <input id="account_holder_name" name="name" type="text" placeholder="Name" class="form-control ">
    <span class="glyphicon glyphicon-remove form-control-feedback"></span>                                            
    <span class="help-block"><p>The Name field is required.</p></span>                                        
</div>
</div>
<div class="col-md-6">
<div class="form-group has-error has-feedback">
 <input id="check_np" name="check_no" type="text" placeholder="Check no" class="form-control ">
 <span class="glyphicon glyphicon-remove form-control-feedback"></span>
<span class="help-block"><p>The Check No. field is required.</p></span>                                       
</div>
</div> 
```

这是它的样子： [![在此处输入图像描述](../Images/8f786f2c1e234469a40a019022bacb76.png)](https://i.stack.imgur.com/hRaak.png)

**一旦我完成它，我想我也应该在 Codeigniter 中实现它。所以这里是使用 Bootstrap 的 Codeigniter-3 验证：**

**控制器**

```
function addData()
{
$this->load->library('form_validation');
$this->form_validation->set_rules('email','Email','trim|required|valid_email|max_length[128]');
if($this->form_validation->run() == FALSE)
{
//validation fails. Load your view.
$this->loadViews('Load your view','pass your data to view if any');
}
else
{  
 //validation pass. Your code here.
}
} 
```

**看法**

```
<div class="col-md-12">
<?php 
 $email_error = (form_error('email') ? 'has-error has-feedback' : '');
 if(!empty($email_error)){
 $emailData = '<span class="help-block">'.form_error('email').'</span>';
 $emailClass = $email_error;
 $emailIcon = '<span class="glyphicon glyphicon-remove form-control-feedback"></span>';
}
else{
    $emailClass = $emailIcon = $emailData = '';
 } 
 ?>
<div class="form-group <?= $emailClass ?>">
<input id="enter email" name="email" type="text" placeholder="Enter email" class="form-control ">
<?= $emailIcon ?>
<?= $emailData ?>
</div>
</div> 
```

**输出：** [![在此处输入图像描述](../Images/bd9e9a02e1f8f58b19609238c92b8072.png)](https://i.stack.imgur.com/Z1R8X.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-16T18:27:55.550

一般在错误发生的地方附近显示错误是最好的。即，如果有人在输入他们的电子邮件时出错，则突出显示电子邮件输入框。

这篇文章有几个很好的例子。 [http://uxdesign.smashingmagazine.com/2011/05/27/getting-started-with-defensive-web-design/](http://uxdesign.smashingmagazine.com/2011/05/27/getting-started-with-defensive-web-design/)

twitter bootstrap 也有一些不错的样式可以帮助解决这个问题（向下滚动到验证状态部分） [http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

突出显示每个输入框有点复杂，所以简单的方法是在顶部放置一个引导警报，其中包含用户错误的详细信息。 [http://twitter.github.com/bootstrap/components.html#alerts](http://twitter.github.com/bootstrap/components.html#alerts)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-22T11:21:19.733

对于 Bootstrap v4 使用：
`has-danger`用于`form-group`包装器，
`form-control-danger`用于输入以显示图标（将在输入末尾显示 ✖），
`form-control-feedback`用于消息包装器

例子：

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

<div class="form-group has-danger">
  <input type="text" class="form-control form-control-danger">
  <div class="form-control-feedback">Not valid :(</div>
</div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-21T09:39:27.420

可以使用 CSS 仅在错误时显示错误消息。

```
.form-group.has-error .help-block {
    display: block;
}

.form-group .help-block {
    display: none;
}

<div class="form-group has-error">
  <label class="control-label" for="inputError">Input with error</label>
  <input type="text" class="form-control" id="inputError">
  <span class="help-block">Please correct the error</span>
</div> 
```

# jquery - 滑块过渡剪裁

> ID：14361520
> 
> 赞同：0
> 
> 时间：2013-01-16T15:10:43.600
> 
> 标签：jquery, css, jquery-cycle

我在使用 jquery 循环时遇到了一个奇怪的问题。但我也认为它可能与css有关。在过渡到下一张幻灯片时，传入的幻灯片在大约四分之一处停止，然后捕捉到屏幕的末尾，完成了 cycle2 使用的 scrollHorz 过渡。为了解决这个问题，我必须将屏幕设置得相当宽以阻止它发生。我还应该包括幻灯片被缩放到浏览器，当幻灯片从右向左移动时，它只会在一个方向上发生。

![问题说明](../Images/137a390f9f114f4124c61df51cd4447e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:55:26.877

知道了。必须将容器的大小缩放到浏览器大小

# arrays - Mathematica – 优化数组变量

> ID：14361522
> 
> 赞同：1
> 
> 时间：2013-01-16T15:10:44.410
> 
> 标签：arrays, optimization, syntax, wolfram-mathematica

假设我有一些 x 和一个数组变量的函数。

```
A = Array[a, 2];
f[x_] := (x-.5)^2 + a[1]^2 + a[2]^2 
```

现在我想最小化两者，这会导致错误。

```
FindMinimum[f[x], {x, A}] 
```

*FindMinimum::nrlnum：函数值 {0.707107,1.41421 a[1.]} 不是在 {x,A} = {1.,1.} 处具有维度 {2} 的实数列表。>>*

**我怎么写这个？**

相反，它适用于非数组变量。

```
f[x_] := (x-.5)^2 + y^2 + z^2;
FindMinimum[f[x], {x, y, z}]
{0., {x -> 0.5, y -> 0., z -> 0.}} 
```

而且，奇怪的是，如果我只有数组变量，它就可以正常工作。

```
A = Array[a, 3]
f := (a[3] - .5)^2 + a[1]^2 + a[2]^2
FindMinimum[f, A]
{0., {a[1] -> 0., a[2] -> 0., a[3] -> 0.5}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:38:58.290

我会做 ：

```
bigA = Array[a, 2];
f[x_] := (x - .5)^2 + Total[bigA^2]

FindMinimum[f[x], Flatten[{x, bigA}]]
(* {0., {x -> 0.5, a[1] -> 0., a[2] -> 0.}} *) 
```

# c - 错误：标识符“系统”未定义

> ID：14361526
> 
> 赞同：2
> 
> 时间：2013-01-16T15:10:50.400
> 
> 标签：c

我刚刚开始学习 C 语言，我只是想写 Hello World 来开始，但我收到了这个错误消息。我确定答案很明显，但有人可以告诉我我需要做什么吗？这是我的代码：

```
#include <stdio.h>

int main()
{
printf("Hello World ");
system("Pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:12:41.210

```
#include<stdlib.h> 
```

包括这个头文件..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:11:55.737

您需要添加另一个头文件：

```
#include <stdlib.h> 
```

当你有一个像这样的未定义调用时，你总是可以抛出“man 3 system”，你会得到这样的东西，[这样](http://linux.die.net/man/3/system)你就可以看到你是否缺少头文件。

仅供参考，对于您的特定程序，您可能需要考虑不使用`system("Pause")`，因为它取决于系统。最好用断点暂停（如果您使用的是 IDE）或类似 C 标准的东西`getchar()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:11:51.587

你需要`#include <stdlib.h>`

如果您不确定标准函数在哪个标头中定义，它的[手册页](http://linux.die.net/man/3/system)会告诉您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T15:13:17.343

插入

```
#include <stdlib.h> //in C 
```

或者

```
#include <cstdlib> //in C++ 
```

在你的 main() 函数之前。

请注意，您的 IDE 应避免关闭您的程序。如果没有，请更改 IDE。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-10T19:14:52.793

您应该包括以下库。

```
 #include <stdlib.h> 
```

就这么简单。希望这个对你有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T15:41:21.903

正如其他人所说，您需要包含一个标题；如果你在 Linux 上运行，你可以安装“manpages-dev”包，然后用磁带“man system”告诉你需要使用哪些头文件。

# php - Laravel 4 扩展分页类

> ID：14361528
> 
> 赞同：0
> 
> 时间：2013-01-16T15:11:05.173
> 
> 标签：php, laravel, laravel-4

我正在尝试扩展 laravel 4 的分页类来添加我自己的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:28:39.197

你可以扩展 Laravel Paginator 类：

```
class YourPaginator extends Illuminate\Pagination\Paginator 
```

[如果您希望您的自定义分页类替换 Laravel 一个（请参阅分页服务提供者](https://github.com/illuminate/pagination/blob/master/PaginationServiceProvider.php)）并在应用程序配置文件中用您的分页提供者替换当前的分页提供者，您还必须创建一个新的服务提供者。

# php - 在 Windows 上安装特定 php 版本的轻松方法

> ID：14361530
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:11:14.443
> 
> 标签：php, installation, upgrade

我想在 Windows 上安装特定版本的 php (5.3.3)。有哪些不同的可能方法？什么是最无痛的？

（我通常知道有些人为自己编译一个包，但想知道什么时候需要它，而不是仅仅选择一个现成的安装。）

ps 我宁愿避免安装也会迫使我升级 apache。寻找只安装 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:34:32.477

[在http://windows.php.net/download/](http://windows.php.net/download/)有可用于 Windows 的预构建 PHP 二进制文件，安装起来相对简单

问题是您提到的特定版本不能作为预构建的二进制文件提供。但是他们确实提供了 PHP 5.3.2 的二进制文件，如果这对您来说“足够接近”，您可以简单地将其解压缩到一个目录中并编辑 $unzipdir/php.ini 文件并更新 apache conf（通常是 C:\Program Files \Apache Software Foundation\Apache2.2\conf) 相应地。

如果你真的需要 5.3.3，似乎除了自己编译之外别无选择。

我看不出为什么你必须升级你的 apache，除非它停留在一个古老的版本。

您可能还想看看 WAMP 服务器，以便将来轻松安装 apache+php [http://www.wampserver.com](http://www.wampserver.com)

# jquery - 从条件语句推送到数组

> ID：14361532
> 
> 赞同：1
> 
> 时间：2013-01-16T15:11:18.077
> 
> 标签：jquery, arrays

> **可能重复：**
> [根据另一个值存储数组的项](https://stackoverflow.com/questions/14358151/storing-items-of-an-array-depending-on-another-value)

我有一个名为目录的数组，其中包含 4 个项目：

packageid、dataid、categoryid 和 datapackage。

我想要做的是将 packageid 等于 packageBtnFilter 并且 categoryid 等于 categoryBtnFilter 的项目的所有 dataid 推入数组结果。如果 packageBtnFilter 和 categoryBtnFilter 的值都是 0，那么它应该将 catalog 的所有 dataid 推入结果数组。

这是我到目前为止所拥有的：

```
var result = new Array();

var packageBtnFilter = $('#packages').val() ;
var categoryBtnFilter = $('#categories').val() ;

var test = $(catalogue).each(function () {
            if ( (packageBtnFilter!= 0)  && (categoryBtnFilter==0 ) ){
                return  this.packageid == packageBtnFilter;
            } else if ( (categoryBtnFilter!=0 )  &&   (packageBtnFilter!= 0)  ) {
                return this.categoryid == categoryBtnFilter;
            } else if ( (categoryBtnFilter==0 )  &&   (packageBtnFilter== 0)   ) {
                return
            } else {
                return this.packageid == packageBtnFilter  &&  this.categoryid == categoryBtnFilter;
                    }

             }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:16:04.457

如果要遍历非 jQuery 集合或 HTML 元素，则必须`$.each`改用，如下所示：

```
$.each(catalogue, function () { 
```

此外，`.each`只是迭代，实际上并不返回任何东西。你的回报几乎只是空话。相反，您应该在条件句中推动`result`。

# wicket - 如何在点击 AjaxLink 时设置预加载的 DropDownChoice 的值

> ID：14361536
> 
> 赞同：0
> 
> 时间：2013-01-16T15:11:20.633
> 
> 标签：wicket, wicket-1.5, wicketstuff

假设我有一个页面列表视图，其中有一些链接，例如动物、鸟类和树木，以及一个下拉列表，其中包含一些值，例如“Run”、“Fly”和“Fruit”。

预期的行为是，当用户单击“动物”时，下拉菜单显示“运行”，如果用户想要更改下拉选择，他可以单击下拉菜单，因此所有 3 个项目（即“运行”， 'Fly'、'Fruit'）是可访问的。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:04:11.503

当您单击链接（动物、鸟类和树木）时，设置操作下拉列表的模型对象（'Run'、'Fly'、'Fruit'）。

```
add(new AjaxLink("run"){                                                                                                                                                                                                                                                                                                  
       private static final long serialVersionUID = 1L;                                                                                                       

       @Override                                                                                                                                              
       public void onClick(AjaxRequestTarget target) 
       {                                                                                                        
            actionDropdown.setModelObject("Run");          
            target.addComponent(actionDropdown);         
       }                                                                                                                                                      
}); 
```

这应该会更改在操作下拉列表中选择的内容，但也会保留其他可供选择的选项。

# javascript - 单击按钮时更改javascript函数的值

> ID：14361537
> 
> 赞同：0
> 
> 时间：2013-01-16T15:11:22.920
> 
> 标签：javascript, html

我正在尝试使用 javascript 在 HTML5 音频中单击按钮 A 时播放声音 A，单击 B 时播放声音 B 等。我正在处理代码，我对我的函数和变量感到困惑。但我认为最好的方法是拥有一个 playAudio(a) 播放 a.mp3 等的功能，但我无法让它工作。

下面的示例具有定义正在播放的声音的输入 ID，但我无法使其动态化。

Javascript

```
var a = sounds/a.mp3
var b = sounds/b.mp3

function playX() {
    var xAudio = document.getElementById('xxx');
         xAudio.src = $("#audiofile").val();          
    xAudio.play();   
} 
```

HTML：

```
<input id="audiofile" type="text" value="sounds/a.mp3" /><br />
<input id="audiofileb" type="text" value="sounds/b.mp3" /><br />

<button id="play" onclick="playX();">        A    </button>
<button id="play" onclick="playX();">        B    </button>
<button id="play" onclick="playX();">        C   </button>

<audio id="xxx">  
</audio> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:14:22.010

```
var a = sounds/a.mp3
var b = sounds/b.mp3

function playX(id) {
    var xAudio = document.getElementById('xxx');
         xAudio.src = $("#audiofile"+id).val();          
    xAudio.play();   
} 
```

和html：

```
<input id="audiofileA" type="text" value="sounds/a.mp3" /><br />
<input id="audiofileB" type="text" value="sounds/b.mp3" /><br />
<input id="audiofileC" type="text" value="sounds/c.mp3" /><br />

<button id="play" onclick="playX('A');">        A    </button>
<button id="play" onclick="playX('B');">        B    </button>
<button id="play" onclick="playX('C');">        C   </button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:14:04.320

有很多方法可以做到这一点。

将文件名作为参数传递：

```
<button id="play" onclick="playX('sounds/a.mp3');">A</button>

function playX(file) {
    xAudio.src = file         
    xAudio.play();   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:15:02.987

如果您使用 JQuery，您可以执行以下操作：

```
<button id="play" data-audiotrack="audiofile">        A    </button>
<button id="play" data-audiotrack="audiofileb">        B    </button>
<button id="play" data-audiotrack="audiofilec">        C   </button>

$('#play').click(function() {
    var audioTrack = $(this).data('audiotrack');
    var xAudio = document.getElementById(audioTrack);
    xAudio.src = $("#audiofile").val();          
    xAudio.play();
}); 
```

# php - 如何将字符串中的数字放入foreach

> ID：14361542
> 
> 赞同：-4
> 
> 时间：2013-01-16T15:11:43.553
> 
> 标签：php

我的字符串示例`$number = '1,10,40';`

我如何将数字放入我的 foreach 循环中，就像这样。

```
foreach($array[$number[1]] as $one)
{
  foreach($array[$number[10]] as $two)
  {
     foreach($array[$number[40]] as $three)
     {
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:23:08.583

我想你会是这样的：

```
function recursive($input) {
    if(is_string($input) {
         return recursive(explode(',', $input);
    }
    if(is_array($input) && !empty($input)) {
        $to = array_shift($input);
        for($i=0;$i<=$to;$i++) {
            recursive($input);
        }
    }
    if(empty($input) {
        //do here whatever you want
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:23:14.423

我也很难理解你的问题，但这是我可以从你所问的内容中推断出来的。我希望它能回答你的问题。

我认为您在这里寻找的是[本示例](http://php.net/manual/en/control-structures.foreach.php)中每个循环的第二个。

```
foreach (array_expression as $key => $value)
someexpression 
```

其中，当 $value = 1 时 $key = 1，
当 $value = 10 时 $key = 2，
当 $value = 40 时 $key = 3

# php - PHP 生成类似的字符串

> ID：14361546
> 
> 赞同：-2
> 
> 时间：2013-01-16T15:11:50.433
> 
> 标签：php, string, random

如何基于单个输入字符串生成相似的输出字符串？提示： 输出字符串：

1.  可以包含与输入不同的长度。
2.  必须仅包含数字、字母和连字符（>126 <193 ；>64 <91 ；>=48 <=57 ；连字符为 45）

我找不到用于此的 php 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:33:56.367

您可以尝试这样的方法来实现一个非常简单的解决方案，该解决方案只考虑一些非常基本的限制（这可能足以满足您的需求？）：

```
$input = "mydomain";
$randomNum = rand(127,192);
$output = $input.'-'.$randomNum; // Now is mydomain-X where X is between 127 and 192 
```

# xml - 在 xsd:all 中具有 xsd:sequence 行为的替代方法是什么？

> ID：14361550
> 
> 赞同：4
> 
> 时间：2013-01-16T15:11:56.313
> 
> 标签：xml, xsd, xsd-validation

我不明白我应该如何定义我的复杂类型。

今天我有这个：

```
<xsd:element name="batch_requests_callbacks">
    <xsd:complexType>
      <xsd:sequence>
            <xsd:element ref="document_id" minOccurs="1" maxOccurs="1"/>
            <xsd:choice minOccurs="0" maxOccurs="1">
              <xsd:element ref="filename"/>
              <xsd:element ref="error"/>
            </xsd:choice>
            <xsd:element ref="author" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:attribute name="version" default="1.0"/>
    </xsd:complexType>
</xsd:element> 
```

但是，标签内部的顺序`xsd:sequence`很重要，我不希望这种行为。

如果我使用`xsd:all`，我没有标签顺序，但我不能设置`maxOccurs`为无界更多，我不能`xsd:choice`在里面使用`xsd:all`

我的替代方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:25:44.343

您可以使用`<xsd:choice minOccurs="0" maxOccurs="unbounded">`代替您`xsd:sequence`的来模拟无序元素验证。这绕过了`xsd:all`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:14:24.730

在 XSD 1.0 中，您的替代方案是（如果您想保持简单），因为您已经确定了它们：

*   序列，这需要特定的排序
*   所有，这没有。

如果排序不带有含义（因此序列 document-id, filename, author 和序列 author, document-id, filename 携带相同的信息），那么在固定序列时不会损失表达能力。或者，您可以使用 predi 建议的无限选择，并将部分验证逻辑（检查基数）放在应用程序的另一层。我认为最受推崇的词汇设计者通常会在这种情况下推荐一个序列。

另外两种方法值得一提：

*   在 XSD 1.1 中，对所有组中的 maxOccurs 的约束已被取消（尽管不是对所有组的其他约束）。
*   由于您想要的语言显然是一种常规语言，因此您可以使用嵌套的选择和序列为其编写内容模型。XSD 的“唯一粒子属性”约束使这有点乏味，这意味着您必须避免任何可能使内容模型不确定的事情，但这是可行的。[另一个问题的答案中](https://stackoverflow.com/questions/2290360/xsd-how-to-allow-elements-in-any-order-any-number-of-times)显示了一个具体的例子。

# java - 删除java中的所有特殊字符

> ID：14361556
> 
> 赞同：11
> 
> 时间：2013-01-16T15:12:09.340
> 
> 标签：java, regex

> **可能重复：**
> [用空字符串替换所有非字母数字字符](https://stackoverflow.com/questions/1805518/replacing-all-non-alphanumeric-characters-with-empty-strings)

```
import java.util.Scanner;
import java.util.regex.*;
public class io{
public static void main(String args[]){
Scanner scan = new Scanner(System.in);
String c;
if((c=scan.nextLine())!=null)
 {
Pattern pt = Pattern.compile("[^a-zA-Z0-9]");
Matcher match= pt.matcher(c);
    while(match.find()){
         c=c.replace(Character.toString(c.charAt(match.start())),"");
         }
    System.out.println(c);
      }
   }
} 
```

**情况1**

```
Input : hjdg$h&jk8^i0ssh6
Expect : hjdghjk8i0ssh6
Output : hjdgh&jk8^issh6 
```

**案例2**

```
Input : hjdgh&jk8i0ssh6
Expect : hjdghjk8i0ssh6
Output : hjdghjk8i0ssh6 
```

**案例3**

```
Input : hjdgh&j&k8i0ssh6
Expect : hjdghjk8i0ssh6
Output : hjdghjki0ssh6 
```

任何人都请帮我弄清楚，我的代码逻辑有什么问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-16T15:18:02.783

使用`[\\W+]`or`"[^a-zA-Z0-9]"`作为正则表达式来匹配任何特殊字符，还使用 ​​String.replaceAll(regex, String) 将 spl 字符替换为空字符串。请记住，String.replaceAll 的第一个 arg 是一个正则表达式，您必须使用反斜杠对其进行转义才能将 em 视为文字字符。

```
 String c= "hjdg$h&jk8^i0ssh6";
        Pattern pt = Pattern.compile("[^a-zA-Z0-9]");
        Matcher match= pt.matcher(c);
        while(match.find())
        {
            String s= match.group();
        c=c.replaceAll("\\"+s, "");
        }
        System.out.println(c); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-16T15:17:42.480

您可以通过这种方式安全地阅读这些行并替换所有特殊字符。
请记住，如果您使用`\\W`，您将不会替换下划线。

```
Scanner scan = new Scanner(System.in);

while(scan.hasNextLine()){
    System.out.println(scan.nextLine().replaceAll("[^a-zA-Z0-9]", ""));
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T15:21:36.747

您的问题是返回的索引`match.start()`对应于匹配时原始字符串中出现的字符位置；`c`但是，当您每次都重写字符串时，这些索引会变得不正确。

解决此问题的最佳方法是使用`replaceAll`，例如：

```
 System.out.println(c.replaceAll("[^a-zA-Z0-9]", "")); 
```

# javascript - 如何播放重定向的 swf

> ID：14361558
> 
> 赞同：0
> 
> 时间：2013-01-16T15:12:12.227
> 
> 标签：javascript, redirect, flash, embed

我有一个带有实时流媒体的页面的嵌入代码

```
<object id="myId" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" height="440" width="500">
            <param name="movie" value="http://play.shqiplive.info/new-topi4.swf">
            <param name="allowfullscreen" value="true">
            <param name="wmode" value="transparent">
            <param name="allowscriptaccess" value="always">
            <param name="quality" value="high">
            <param name="flashvars" value="autostart=true&amp;overstretch=fit&amp;displayclick=fullscreen&amp;fghf=1111.&amp;bufferlength=2&amp;image=http://shqiplive.info/img/player.png&amp;logo=http://shqiplive.info/img/silver.png">
    <embed src="http://play.shqiplive.info/new-topi4.swf" wmode="transparent" allowfullscreen="true" quality="high" allowscriptaccess="always" flashvars="autostart=true&amp;overstretch=fit&amp;displayclick=fullscreen&amp;fghf=1111.&amp;bufferlength=2&amp;image=http://shqiplive.info/img/player.png&amp;logo=http://shqiplive.info/img/silver.png" height="440" width="500">

    </object> 
```

但我不能在我的网站上玩，因为 swf 重定向到 xxx.com。这个怎么玩？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:32:18.697

实际上，此 SWF 文件似乎会将您重定向到此站点本身。我只能想象这种行为的原因。例如，您错过了一些传递给 SWF 的必要变量。或者是出于版权保护的目的。或者别的什么。

更好的方法是联系其作者或（一种不太合法的方式）尝试反编译并查看内部以检测导致重定向的原因（可能是`getUrl()`方法调用）。

# html - HTML5 视频播放局域网

> ID：14361560
> 
> 赞同：7
> 
> 时间：2013-01-16T15:12:23.507
> 
> 标签：html, video-streaming, html5-video, lan

我使用 HTML5`<video>`标签在我的局域网中播放来自不同计算机的视频。在我当前的设置中，我有一个服务器，它提供了 html 页面和我想要播放的所有视频。有些计算机应该通过加载 html 页面来播放这些视频。一般来说，这已经奏效了。但有时播放视频一段时间后，控制台显示**加载资源失败**并立即停止播放。我想，这可能是我的局域网中的某种超时，我想在本地播放视频，即将所有视频复制到每台计算机，然后在服务器上提供 html。然后，服务器 html 仅链接到`file://.../`.

**但是**当我在服务器上尝试这种方法时，视频每隔几秒钟就会停止一次，并且根本没有缓冲。看视频是完全不可能的。视频为 *.mp4；我在所有 win7 计算机上运行 chrome，服务器是 XAMPP。

有没有办法捕捉**加载资源失败**错误，或者以合理的质量播放本地视频？

你们都没有这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:08:45.907

一些想法：

*   您的配置是否包含“AddType video/mp4 .mp4”？
*   是否有可能以某种方式禁用了渐进式加载？
*   视频有多大？有报告称 > 30Mb 的文件在 XAMPP 中存在播放问题
*   如果您转换为另一种格式（.ogg、.avi、类似），它们的播放效果会更好吗？
*   如果您使用 .php（或类似）文件来提供渐进式加载 - 有什么变化吗？来自应用程序而不是直接的 IE Stream。

# css - 将水平菜单中的最后一个 li 拉伸到菜单末尾

> ID：14361568
> 
> 赞同：1
> 
> 时间：2013-01-16T15:12:44.580
> 
> 标签：css

如标题所示 - 我想将水平菜单中的最后一个 li 标签拉伸到菜单末尾。这是我的代码：

```
#menu{width:600px; height:50px; background-color:#666; }
ul{padding:0; margin:0;}
ul li{list-style:none; height:20px;}
li{
float:left;
background-color:#999;
display:block;
padding:10px;
border-right-style:solid;
border-right-width: 1px;
border-right-color: #000;} 

<div id="menu">
<ul id="nav">
<li><a href="#">Link</a></li>
<li><a href="#">Link</a></li>
<li><a href="#">Link</a></li>
<li class="last"></li>
</ul></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:22:57.477

只需简单地添加

```
.last { 
    float: none;
} 
```

并且完整的东西将尽可能宽，因为它的显示设置为阻止。

或者，您可以只设置 ul 的背景颜色。

**更新**

该解决方案无法完美运行，因为它确实跨越了整个 ul 的 li。

修复实际上非常简单：

```
.last {
    float: none;
    overflow: hidden;/* Add this */
} 
```

请参阅更新的 jsfiddle：http: [//jsfiddle.net/BsrLD/8/](http://jsfiddle.net/BsrLD/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:23:57.070

你可以在最后一个 li 上取下浮动，它会给出我认为你想要的结果。
`.last{float:none}`

你可以在这个[FIDDLE中看到](http://jsfiddle.net/NQq7B/)

# pyopenssl - 如何在 Mac OS X 上安装 pyOpenSSL？

> ID：14361569
> 
> 赞同：3
> 
> 时间：2013-01-16T15:12:44.830
> 
> 标签：pyopenssl

我正在使用 Titanium 3.0 并尝试更新 pyOpenSSL。我检查了 python 网站，只看到 Windows 的可下载链接。在 Tianium 论坛上，他们说“如果您使用 MacPorts 或 Homebrew 安装 Python，请使用相同的实用程序来安装 PyOpenSSL 和 PyCrypto。” 我尝试使用自制软件并执行“brew install pyopenssl”并收到错误消息“pyopenssl 没有可用的公式”。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T17:12:10.357

尝试使用 easy_install

`easy_install PyOpenSSL`

`easy_install PyCrypto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T09:32:31.620

通过 Homebrew 安装：

```
brew install openssl env ARCHFLAGS="-arch x86_64" LDFLAGS="-L/usr/local/opt/openssl/lib" CFLAGS="-I/usr/local/opt/openssl/include" pip install cryptography 
```

这个答案来自[https://chriskief.com/2014/03/25/installing-cryptography-via-pip-with-macports-or-homebrew/comment-page-1/#comment-2809](https://chriskief.com/2014/03/25/installing-cryptography-via-pip-with-macports-or-homebrew/comment-page-1/#comment-2809)

# php - PayPal Pro：是否有必要自己收集详细信息，或者 PayPal 可以为我收集详细信息吗？

> ID：14361571
> 
> 赞同：0
> 
> 时间：2013-01-16T15:12:51.680
> 
> 标签：php, paypal

我知道使用 PayPal Pro，用户在我的网站上输入他的信息，而 PayPal 在后台处理这些信息。

尽管如此，是否有可能像 PayPal 标准一样：用户被重定向到 PayPal 网站，在那里输入他的信息，在那里付款，然后回来？

我问是因为我的客户有 PayPal Pro，但是我对自己收集付款数据感到不舒服。我宁愿 PayPal 为我做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:47:02.577

简短回答：是的，您可以使用 IPN。

更长的答案：

无论哪种方式，您都希望拥有 SSL 证书，并处理各种支付信息。

如果您使用的是 IPN，用户会被重定向到 PayPal 站点、付款并被重定向回来，并且您会收到针对您的脚本之一的通知。该脚本必须检查您收到的数据是否与您发送的数据相似，并进行其他检查。您可能不会立即收到通知，有时需要几天才能收到通知（虽然很少）。

使用 PayPal Pro，用户输入他的信用卡详细信息并提交。您必须在此处进行一些检查，但之后您将信息发送到 PayPal，并且您会立即收到响应（成功或响应）。

这些是主要的区别，无论哪种方式都令人难以置信，您只需要使用 API 文档即可。

# javascript - 克隆的下拉菜单不适用于 jQuery Uniform 主题

> ID：14361576
> 
> 赞同：0
> 
> 时间：2013-01-16T15:13:13.617
> 
> 标签：javascript, jquery, drop-down-menu, clone, uniform

好的，我再次遇到了 jQuery 统一主题的障碍。[http://uniformjs.com/](http://uniformjs.com/)我正在克隆带有文本输入、下拉菜单和添加（克隆）或删除行的按钮的行。问题是，一旦我克隆了一行，就无法更改新行上的下拉选择。如果我禁用统一功能，它可以工作。

```
<!---<script type="text/javascript" charset="utf-8">
  $(function(){
    $("input:text, input:file, select, textarea, input:button").uniform();
  });
</script>---> 
```

这是我的代码。统一更新似乎也不起作用。

```
//
id=0;
$("table#customers_tab img.remove").live("click", function (event) {
        $(this).parents("tr").remove();
  var remove_id = event.target.id;

  var index = remove_id.substring(6);

  var table = document.getElementById("customers_tab");
  for(var i=parseInt(index); i<table.rows.length;i++){
    $($('table#customers_tab tr')[i]).find("img.add").attr("id","add"+i);
    $($('table#customers_tab tr')[i]).find("img.remove").attr("id","remove"+i);

  }

    });

$("table#customers_tab img.add").live("click", function (event) {
        id++;
        var master = $(this).parents("table#customers_tab");
        var add_id = event.target.id;

  var index = add_id.substring(3);

  var prot = $($('table#customers_tab tr')[index]).clone();
  var incr = parseInt(index)+1;

  prot.find("img.add").attr("id","add"+incr);

        $('.feature').live('change',function(){ ////SOLUTION HERE
            $.uniform.update("select"); ////
        }); ////

  $($('table#customers_tab tr')[index]).after(prot);
  var table = document.getElementById("customers_tab");

  for(var i=incr+1; i<table.rows.length;i++){
    $($('table#customers_tab tr')[i]).find("img.add").attr("id","add"+i);
    $($('table#customers_tab tr')[i]).find("img.remove").attr("id","remove"+i);

  }
    $.uniform.update(); //NOT WORKING
    });
$("#delAllCustomers").live("click", function (event) {
  $("#customers_tab").children().remove();
});
// 
```

这与我的问题非常相似，但没有解决我的问题。[jquery 克隆一个元素块。选择行为怪异的元素](https://stackoverflow.com/questions/7929184/jquery-cloning-a-block-of-element-select-element-acting-weired)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:36:01.817

您必须为这些特定的新元素添加制服。如果将制服添加到元素，然后将其再次添加到它将破坏的同一元素。你想尝试类似的东西：

```
$("#newID1 input:text, #newID2 input:file, #newID3 select, #newID4 textarea, #newID5 input:button").uniform(); 
```

要不就：

```
$("#newID select").uniform(); 
```

# c++ - 什么时候从列表中弹出的对象被销毁？

> ID：14361581
> 
> 赞同：3
> 
> 时间：2013-01-16T15:13:20.977
> 
> 标签：c++, stl

这很可能是一个非常愚蠢/基本的问题，但我无法弄清楚。我会告诉你我的想法 - 如果/我错了，请纠正我。

当我们使用 STL 容器来存储*原始*指针时，我们必须注意清理它们：

```
std::list<animal*> alist;
animal *a = new animal();
alist.push_back(a);
...
animal *b = alist.front();
alist.pop_front();
//do stuff with b
delete b; 
```

如果我们存储对象会发生什么？我的理解是，如果一个装满对象的容器超出范围，则其中的所有对象都会被销毁。正确的？

但是如果我们从容器中移除一个对象，`std::list<T>.pop_front()`例如使用呢？

```
std::list<animal> alist;
{
  animal ani();
  //ani is inserted at the end of the list (it IS ani rather than a copy 
  //since push_back accepts const T&)
  alist.push_back(ani);
} //nothing is deallocated/destroyed here
...
{
  animal b = alist.front(); //b is now a copy(?!) of the front element
                            //created via copy constructor
  alist.pop_front(); //the front element of the list is 
                     //destroyed/destructor is called 
  //do stuff with b
} //b goes out of scope 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T15:20:18.227

当您将某些内容存储在容器中时，您传递的任何内容都会被复制到容器¹中。您仍然拥有原始对象²；容器拥有它的对象副本。确实`push_back`（例如）通过引用获取其参数。这意味着当您将要推送的对象传递到容器中时，不需要将副本用作参数本身，但放入容器中的内容仍然是您告诉它推送的内容的副本。引用传递意味着只需要*一份*；如果它是按值传递的（至少在 C++98/03 中），那将导致*两个*副本：从对象到函数参数的一个副本，然后从函数参数到容器的另一个副本。通过引用传递允许直接从原始对象直接复制到容器中。

同样，当您从容器中获取对象时，您将获得容器中内容的副本。容器仍然有它的对象，而你有你的对象。每一个都有自己的生命周期。

当您从容器中擦除或弹出一个对象时，该对象将从容器中删除并销毁——如果它具有析构函数，则将调用析构函数来销毁它。

当容器本身被销毁时，容器中的对象也将被销毁。您的对象将在碰巧被销毁时被销毁-它来自容器的事实对此没有影响。如果它是一个局部变量，它会在超出范围时被销毁。如果它是全球性的，它将持续到时间结束（对于程序）。如果您从函数中返回它并用于初始化引用，则将遵守延长其生命周期的正常规则。底线：在这一点上，它只是另一个对象，它将像以相同方式定义的任何其他对象一样具有生命周期。

当/如果您将指针（原始或智能）存储在容器中时，这可能会有点......模糊。以上所有内容实际上仍然正确，*但是*被复制/存储的对象是一个指针。除非您使用一些“知道”您正在存储指针的容器（例如，Boost ptr_vector），否则它只是在处理指针，并且“忽略”某个地方存在指针所指对象的事实。

* * *

1.  例如，在 C++11 中，您可以使用`emplace_back`在容器中就地构造一个对象，但同样的基本思想也适用——容器拥有它拥有的一个对象，而您从不直接接触。
2.  在这里，我使用的“对象”更像是非程序员——只是表示“某些东西”，不一定是类的实例。它甚至可能不是 C 使用这个词的意义上的“对象”——它可能是一个纯右值（例如，`push_back(10)`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:17:02.140

是的。如果您存储对象而不是指向动态内存的指针，那么您不需要进行任何释放。
当你弹出元素时。标准库注意调用弹出对象的析构函数。

规则是：如果你分配了一些东西（*调用*
）， 你只需要释放（*调用`delete`*）。*`new`*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T15:17:09.367

> 我的理解是，如果一个装满对象的容器超出范围，那么其中包含的所有对象也是如此。正确的？

首先，一些重要的迂腐。 *对象*不会超出范围，*标识符*会。这是一个重要的区别，它可能有助于澄清这里发生了什么：

当容器对应的标识符（变量）超出范围时，对应的对象（容器本身）会被自动删除。然后它的析构函数依次删除它的每个元素。

> 但是如果我们从容器中移除一个对象，`std::list<T>.pop_front()`例如使用呢？

容器只是删除包含的元素（就您而言，它调用它的析构函数）。（可能还有其他的内务处理，例如将所有剩余的元素在 a 中移动一个`std::vector`，这会导致大量的析构函数/复制构造函数调用）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T15:17:22.553

如果从 STL 容器中删除一个对象，如果它是一个结构/类类型，它的析构函数就会被调用。同样取决于容器，用于存储对象的内部数据结构也会被释放/销毁。

请记住，指针类型不是结构/类类型，因此没有可以管理指向的内存的析构函数。因此，如果您想在从 STL 容器中删除指针时避免意外的内存泄漏，最好使用智能指针类型，这样`std::shared_ptr<T>`可以正确管理分配给指针的内存，并在没有更多引用时释放它分配的内存对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T15:22:13.867

```
std::list<animal> alist;
// A list is created in automatic storage (the stack).  Its elements
// will exist in the free store (the heap)
{
  animal ani;
  // ani is created in automatic storage (the stack)

  alist.push_back(ani);
  // A copy of ani (using animal(const animal&) ctor) is created in
  // the list "alist" via memory allocated on the free store (the heap)

} // ani.~animal() is called, then the storage for ani is recycled
// (ie, the stack space that ani used can be reused)

{
  animal b = alist.front();
  // either animal(animal&) or animal(animal const&)
  // is called on the previous line, constructing an instance
  // of animal called "b" in automatic storage (the stack)
  // This is a copy of a copy of the animal instance called "ani"
  // above, assuming nothing else besides this code has manipulated
  // alist

  alist.pop_front();
  // The animal in the alist that is a copy of ani is destroyed
  // from the free store (the heap)

  //do stuff with b
} // b.~animal() is called, then the memory in automatic storage
// (the stack) that b lived in is recycled for other purposes 
```

# algorithm - 4x4 2D 字符矩阵排列

> ID：14361583
> 
> 赞同：1
> 
> 时间：2013-01-16T15:13:27.717
> 
> 标签：algorithm

我有一个 4x4 2D 字符数组，如下所示：

```
A B C D
U A L E
T S U G
N E Y I 
```

现在，我需要找到 3 个字符、4 个字符等的所有排列，直到 10。

因此，人们可以从中“找到”的一些词是`TEN`, `BALD`, `BLUE`, `GUYS`。

我确实搜索过这个并用谷歌搜索，但没有具体的帮助。你能把我推向我应该学习哪种算法的正确方向（也许是 A*？）。请温柔一点，因为我不是算法专家（我们不是所有人（好吧，至少是大多数人:)），但我愿意学习，只是不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:24:16.617

啊，这就是 Boggle 游戏，不是吗...您不想要排列，您想要一个图表，并且您想要在图表中找到单词。

好吧，我首先将字符排列为图形节点，然后将它们连接到它们的直接和对角线邻居。

现在您只想搜索图表。对于 16 个起始节点中的每一个，您将进行递归。当您移动到一个新节点时，您必须将其标记为已使用，这样您就不能再次移动到它。当您离开一个节点（已完全搜索它）时，您取消标记它。

我希望你看到这是怎么回事......

对于每个节点，您将访问其每个邻居并将该字符添加到字符串中。如果您在构建字典时考虑到了这种搜索，您将立即能够查看到目前为止的字符是否是单词的开头。这很好地缩小了搜索范围。

我正在谈论的那种字典是你有一棵树，它的节点对于字母表的每个字母都有一个孩子。这些的美妙之处在于您只需要在搜索中存储您当前正在搜索的树节点。如果您确定找到了一个单词，您只需通过父节点回溯以找出它是哪个单词。

使用这种树样式以及深度优先的图形搜索，您可以同时搜索所有可能的词长。这是我能想到的最有效的方法。

* * *

让我为您的图形搜索编写一个伪编码函数：

```
function FindWords( graphNode, dictNode, wordsList )
    # can't use a letter twice
    if graphNode.used then return

    # don't continue if the letter not part of any word
    if not dictNode.hasChild(graphNode.letter) then return
    nextDictNode = dictNode.getChild(graphNode.letter)

    # if this dictionary node is flagged as a word, add it to our list
    nextDictNode.isWord()
        wordsList.addWord( nextDictNode .getWord() )
    end

    # Now do a recursion on all our neighbours
    graphNode.used = true
    foreach nextGraphNode in graphNode.neighbours do
        FindWords( nextGraphNode, nextDictNode, wordsList )
    end
    graphNode.used = false
end 
```

当然，要开始整件事：

```
foreach graphNode in graph do
    FindWords( graphNode, dictionary, wordsList )
end 
```

剩下的就是构建图形和字典。我只记得那个字典数据结构叫什么！这是一个[特里](http://en.wikipedia.org/wiki/Prefix_tree)。如果您需要更节省空间的存储，您可以压缩成[Radix Tree](http://en.wikipedia.org/wiki/Radix_tree)或类似的，但到目前为止，最简单（也是最快）的就是使用直接 Trie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:43:05.517

由于您没有定义我在 C# 上实现的首选语言：

```
private static readonly int[] dx = new int[] { 1, 1, 1, 0, 0, -1, -1, -1 };
private static readonly int[] dy = new int[] { -1, 0, 1, 1, -1, -1, 0, 1 };

private static List<string> words;
private static List<string> GetAllWords(char[,] matrix ,int d)
{
    words = new List<string>();
    bool[,] visited = new bool[4, 4];
    char[] result = new char[d];

    for (int i = 0; i < 4; i++)
        for (int j = 0; j < 4; j++)
            Go(matrix, result, visited, d, i, j);

    return words;
}

private static void Go(char[,] matrix, char[] result, bool[,] visited, int d, int x, int y)
{
    if (x < 0 || x >= 4 || y < 0 || y >= 4 || visited[x, y])
        return;

    if (d == 0)
    {
        words.Add(new String(result));
        return;
    }

    visited[x, y] = true;
    result[d - 1] = matrix[x, y];

    for (int i = 0; i < 8; i++)
    {
        Go(matrix, result, visited, d - 1, x + dx[i], y + dy[i]);
    }

    visited[x, y] = false;
} 
```

获取结果的代码：

```
 char[,] matrix = new char[,] { { 'A', 'B', 'C', 'D' }, { 'U', 'A', 'L', 'E' }, { 'T', 'S', 'U', 'G' }, { 'N', 'E', 'Y', 'I' } };
    List<string> list = GetAllWords(matrix, 3); 
```

将参数 3 更改为所需的文本长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:21:19.820

看来您只是将 4x4 矩阵用作长度为 16 的数组。如果是这种情况，您可以尝试使用递归方法生成最大长度的排列，`k`如下所示：

```
findPermutations(chars, i, highLim, downLim, candidate):
    if (i > downLim):
         print candidate
    if (i == highLim): //stop clause
         return
    for j in range(i,length(chars)):
         curr <- chars[i]
         candidate.append(curr)
         swap(chars,i,j) // make it unavailable for repicking
         findPermutations(chars,i+1,highLim,downLim,candidate)
         //clean up environment after recursive call:
         candidate.removeLast()
         swap(chars ,i, j) 
```

这个想法是打印每个具有更多字符的“候选人” `downLim`（在您的情况下为 3 个），并在您达到上限时终止（`highLim`） - 在您的情况下为 10。

每次，您“猜测”下一个要放置的字符 - 并将其附加到候选者，然后递归调用以查找下一个候选者。
对所有可能的猜测重复该过程。

注意有choose(10,16)*10！+ 选择(9,16)*9！+ ... + 选择(3,16)*3！不同的这种排列，所以它可能很耗时......

* * *

如果您想要有意义的单词，您将需要某种字典（或从某些上下文中统计地提取一个），以便将候选者与“真实单词”相匹配。

# android - Android 在 Play 商店上推送更新

> ID：14361586
> 
> 赞同：10
> 
> 时间：2013-01-16T15:13:34.127
> 
> 标签：android, sharedpreferences, android-sqlite, sqliteopenhelper

我有一个依赖于 SQLite 的应用程序来获取数据，这些数据由资产文件夹中的应用程序附带的 xmls 填充。

1.  当您第一次运行应用程序时，它会设置一个共享首选项 config_run = false。
2.  然后我检查 config_run = false 然后解析 xml 并将数据转储到 db
3.  设置 config_run = true

现在我意识到当我必须在 Google Play 上推送更新并将更多内容添加到 XML 中时。即使我将数据库版本从 1 更改为 2。导入脚本不会运行，因为共享首选项 config_run 值将设置为 true。

关于如何处理这种情况的任何指示？

**场景**

1.  首次安装 - Ver = 1，DB V = 1（数据被解析并转储到数据库中）
2.  错误修复并推送和更新，但没有数据更改 - ver = 1.1，DB V = 1（它应该只是替换代码而不是升级或重新创建数据库）
3.  升级了 DATA 并推送了新的更新 - 1.2 版，DB = 2（没有新代码，但必须重新创建数据）

**我的应用程序的流程**

1.  应用程序启动 Splash Activity。如果 Shared Pref - config_run 等于 false，那么它会启动一个进度对话框并解析数据并将其转储到数据库中。
2.  在解析和创建数据库并转储数据后，它会转到 MainActivity。

**第二种情况**

1.  SplashActivity 运行和 config_run = true 所以直接进入 MAin Activity。

正如下面少数人所建议的那样，如果我尝试在 SQLiteHelper 的 onUpgrade 中将数据哑化到数据库中，它只会发生在 MAinActivity 中，因为我没有在 SplashActivity 中打开 Db 连接，并且对话进度也不会显示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T15:34:39.093

添加您上次运行脚本的版本号的共享首选项。在应用程序启动时，检查当前的 apk 版本，如果更新，再次运行脚本并更新首选项

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T18:27:47.103

你为什么不想使用内置的 sqlite 版本控制系统。数据库版本独立于应用程序版本。它完全符合您的要求。[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)？每次您更改数据库版本时，都会调用 onUpgrate 回调，您可以重新填充数据库。有很多例子。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T09:12:48.967

让您的 xmlfiles 以更新日期结束，并将最后更新日期存储在 sharedpref 中。

在启动时，您可以检查更新搜索（以优化的方式），以及与您上次知道需要转储文件的时间相比，是否找到具有新日期的新文件。

总黑客工作：D

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-24T12:43:24.433

无需将共享首选项 (config_run) 设置为 false 并将其设置为 true，只需将数据库版本设置到其中即可。更新应用时，请检查共享首选项中的版本号是否相同。您可以如下所示执行此操作：

```
configRun = settings.getInt("database_version", 0);

if ((DBAdapter.DATABASE_VERSION) == configRun) 
{
//skip xml parsing
}
else
{
//first time configRun will be "0" and DBAdapter.DATABASE_VERSION will be 1
// so you need to parse your xml here and set configRun =1
//on update, change your DB version to 2\. now again your configRun and DBAdapter.DATABASE_VERSION will mismatch and you can parse your xml.
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-23T20:45:32.543

你可以做两件事：

1.  正确的方法：覆盖数据库提供者的 onUpdate() 来导入文件。（如上所述）

2.  换行符：不是检查 key="config_run"，而是检查并设置 key=("config_run"+DB_VERSION) 以查看是否需要导入，当然，如果密钥不存在，则应返回错误的。这样每次更新数据库编号时，导入作业都会再次运行。

这与您的应用程序版本无关。

# ruby - 正则表达式锚 \B 和 \b 如何彼此不同？

> ID：14361588
> 
> 赞同：2
> 
> 时间：2013-01-16T15:13:42.380
> 
> 标签：ruby, regex, ruby-1.9.3

`\B`我刚刚对and有了一些概念`\b`。并且accordinlgy 尝试了一个代码（取自互联网）但无法理解 - 这些输出是如何生成的`regexp Anchors`。因此，请任何人帮助我理解它们之间的区别，`\B`并`\b`在内部说明它们`pattern matching`在 Ruby 中的处理方式？

```
Interactive ruby ready.
> str = "Hit him on the head\­n" +
      "Hit him on the head with a 2×4\n­"
=> "Hit him on the head
Hit him on the head with a 2??4
"
> str.scan(/­\w+\B/)
=> ["Hi", "hi", "o", "th", "hea", "Hi", "hi", "o", "th", "hea", "wit"]
> str.scan(/­\w+\b/)
=> ["Hit", "him", "on", "the", "head", "Hit", "him", "on", "the", "head", "with", "a", "2", "4"]
> 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T15:21:04.253

像大多数小写/大写对一样，它们完全相反：

`\b`匹配*单词边界*——也就是说，它匹配两个字母*之间*的匹配（因为它是零宽度匹配，即匹配时不消耗字符），其中一个属于一个单词，另一个不属于。在文本“<code>this person”中，`\b`将匹配以下位置（用竖线表示）：“<code>|this| |人|”。

`\B`匹配*除单词边界以外的任何地方*。它将在以下位置匹配：“<code>t|h|i|sp|e|r|s|o|n”——即在所有字母之间，但不在字母和非字母字符之间。

因此，如果您拥有`\w+\b`并匹配“<code>this person”，那么您会得到“<code>this”的结果，因为`+`它是贪婪的，并且匹配尽可能多的单词字符 ( `\w`)，直到下一个单词边界。

`\w+\B`操作类似，但它不能匹配“<code>this”，因为它后面跟着一个单词边界，这是`\B`禁止的。所以引擎会回溯一个字符并匹配“<code>thi”。

# android - 如何从白色平滑过渡到绿色？

> ID：14361593
> 
> 赞同：0
> 
> 时间：2013-01-16T15:13:57.800
> 
> 标签：android

有以下功能：

```
private void markTextView(int progress) {
    if (progress==5) {
        display.setTextColor(Color.WHITE);
    }
    else {
        if (progress>5) {
            display.setTextColor(Color.argb(0, 0, 0, 255));
        }
        else {
            display.setTextColor(Color.argb(0, 255, 0, 0));
        }
    }
} 
```

此函数根据进度值更改 Textview 中文本的颜色。进度值是从 0 到 10 的整数值。如果进度等于 10，则它必须具有白色。如果进度超过 5 则必须顺利将白色变为绿色。如果进度小于 5，则必须将白色平滑地变为红色。现在，如您所见，此功能在没有平滑过渡的情况下更改颜色。请告诉我，我怎样才能做到平稳过渡？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:18:43.723

你想要动画吗？[http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html#onAnimationEnd%28android.view.animation.Animation%29](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html#onAnimationEnd%28android.view.animation.Animation%29)

或者你可以用AlphaAnimation在一秒钟内改变透明度？

或者有一些从白色到绿色的不同过渡颜色。

# c# - 如何向 c# Installer 添加一些代码

> ID：14361594
> 
> 赞同：1
> 
> 时间：2013-01-16T15:14:00.803
> 
> 标签：c#, visual-studio-2010, setup-deployment

我已经制作了一个包含 exe 和 dll 的安装程序，使用 Visual Studio 制作的问题是我可以添加一些代码吗？

例如，当它安装时，我只想运行 3-4 行代码。

1-获取mac地址添加到数据库，具有唯一键。

同样在卸载时从数据库中删除 mac 地址。

在当前场景中使用默认设置项目是否可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:18:18.603

您将需要[`CustomAction`](http://msdn.microsoft.com/en-us/library/bd8h80ez%28v=vs.90%29.aspx)为您的安装程序使用一个。有了它，您可以运行程序、脚本、编写注册表项或其他任何东西。这是一个使用自定义安装程序类在安装过程中显示消息[的简单示例（在 VB.NET 中但易于翻译）：](http://msdn.microsoft.com/en-us/library/9cdb5eda%28v=vs.80%29.aspx)

```
Public Overrides Sub Install(ByVal stateSaver As System.Collections.IDictionary)
  MyBase.Install(stateSaver)
  Dim myInput As String = Me.Context.Parameters.Item("Message")
  If myInput Is Nothing Then
    myInput = "There was no message specified"
  End If
  MsgBox(myInput)
End Sub 
```

您需要按照链接中的步骤完全重现该示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:18:35.200

您可以使用[.NET 安装程序类](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.aspx)并将它们从默认安装项目中连接起来。您覆盖一些方法，然后在安装/卸载时调用它们。这是有关如何执行此操作的[教程。](http://blog.sanketik.com/index.php/custom-installer-class-to-create-setup-tasks-in-visual-studio-setup-project/)

也就是说，很多人完全讨厌这些 .NET 安装程序类（和默认设置项目），并使用基于 WIX 或 InstallShield 的项目实现真正的自定义操作。

根据您想要做什么以及何时执行，您还可以引入 .NET 依赖项。例如，如果您正在检查是否安装了 .NET，如果用户尚未安装 .NET，您将无法通过 .NET 自定义操作执行此操作。

添加自定义操作有点滑坡。一旦人们意识到您可以自定义安装程序，您可能会被要求做更多的事情。此时，使用更灵活的工具（WIX（开源）或 InstallShield（$））可能是有意义的。

# jquery - jquery点击关闭功能

> ID：14361599
> 
> 赞同：2
> 
> 时间：2013-01-16T15:14:10.007
> 
> 标签：jquery, click, jquery-animate

我正在尝试创建一个单击后会展开的搜索栏。当用户点击其他地方时，搜索栏将恢复正常状态。

我还没有设法做到这一点，但已经让它在点击时展开。任何帮助都会很棒

```
$(document).ready(function(){
    $("#search").click(function(){
        $(this).animate({ "width": "200px"},400);
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:16:43.213

```
$("#search").on('click', function(){
    $(this).animate({ "width": "200px"},400);
}); 

$(document).on('click', ':not(#search)', function(e){ 
    //when you click somewhere that is **not** search
    if(e.target.id !== 'search') {
        $("#search").animate({ "width": "50px"},400);
    }
}); 
```

演示：http: [//jsfiddle.net/maniator/2W2z4/](http://jsfiddle.net/maniator/2W2z4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:31:54.790

为什么要将它绑定到 body 并总是让它尝试为搜索框设置动画，即使用户没有与之交互？

```
$(document).ready(function () {
    $("#search").focus(function () {
        $(this).animate({ "width": "600px" }, 400);
    }).focusout(function () {
        $(this).animate({ "width": "400px" }, 400);
    });
}); 
```

jsFiddle：http: [//jsfiddle.net/2W2z4/3/](http://jsfiddle.net/2W2z4/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:18:31.973

```
$('body').click(function(e){
       if( e.target.id == 'search' )
          {      
              $(e.target).animate({ "width": "200px"},400);
          }
       else
          { 
             $('#search').animate({ "width": "100px"},400);
          }

 }); 
```

# iphone - 无法启动音频播放器

> ID：14361603
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:14:27.393
> 
> 标签：iphone, ios, audio, avaudioplayer

我有一个音频播放器，它不会播放声音，有人知道为什么吗？我已经导入了 AVFoundationFramework.h

这是代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"begin" ofType:@"mp3"]];
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:nil];
    [audioPlayer play];
    audioPlayer.numberOfLoops=-1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:32:04.490

添加委托：

```
 [audioPlayer setDelegate:self]; 
```

并确保您的音量设置正确。

# linq - C# 通用 List.Any() 抛出 System.NullReferenceException

> ID：14361606
> 
> 赞同：5
> 
> 时间：2013-01-16T15:14:38.687
> 
> 标签：linq, entity-framework, c#-4.0, generic-list

考虑以下部分视图代码片段

```
List<sellingPrice> Prices = ViewBag.Prices;
foreach (var mgmp in mg.messageGroup.messageGroupMessagePLUs)
{
    if (Prices.Any(x => x.pluId == mgmp.messagePLU.plu.pluId))
    {
        //do stuff
    }
} 
```

对于数据库中的特定产品，该行

```
if (Prices.Any(x => x.pluId == mgmp.messagePLU.plu.pluId)) 
```

引发 System.NullReferenceException。检查代码显示 mgmp***是***一个对象，价格包含元素。但是，x 的值为空。现在，我的印象是我只是在测试是否存在任何满足我测试的“x”，而不是要求它返回“x”。

这是一个非常恼人的问题。希望有人能指出真正明显的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T15:17:01.310

尝试：

```
Prices.Any(x => x!=null && x.pluId == mgmp.messagePLU.plu.pluId) 
```

如果例如 .messagePLU 可以为空，您可能需要进行其他空检查

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:18:13.140

发生这种情况的最可能原因是因为 is 中的一个或多个`ViewBag.Prices`项目`null`。检查`x`，`null`或者看看为什么价格`null`首先包含 s，假设它不应该有任何`null`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T03:56:42.890

谢谢大家的推理。即使 List 为空，也可以检查 list.Any() any 的扩展。

```
 /// <summary>
    /// Determines whether the collection is null or contains no elements.
    /// </summary>
    /// <typeparam name="T">The IEnumerable type.</typeparam>
    /// <param name="enumerable">The enumerable, which may be null or empty.</param>
    /// <returns>
    ///     <c>true</c> if the IEnumerable is null or empty; otherwise, <c>false</c>.
    /// </returns>
    public static bool IsNullOrEmpty<T>(this ICollection<T> enumerable)
    {
        return enumerable != null && enumerable.Count > 0;
    } 
```

# c# - TextBox.Text 不返回任何内容

> ID：14361607
> 
> 赞同：1
> 
> 时间：2013-01-16T15:14:48.480
> 
> 标签：c#, winforms

我有一个带有选项卡控件的表单，在其中一个选项卡上，我有一个`ComboBox`. 根据用户在 this 中选择的值`ComboBox`，需要填充不同的控件。这工作正常，但是，当我尝试检索用户放入`TextBox`我填充的控件中的文本时，`TextBox.Text`不会向我返回任何内容。 `TextBox.Text`当我将 a 添加`TextBox`到同一个表单时工作正常，但将其包含在表单初始化中（而不是稍后使用下面的方法将其填充到表单上），这让我觉得我缺少控件上的属性。

*   我不想在控件中填充文本，我想要用户在运行时输入的字符串 - 我想用来`TextBox.Text`获取该值，而不是控件中已有的字符串的值。

我用来将`TextBox`和其他控件填充到选项卡控件的方法的片段：

```
private System.Windows.Forms.TextBox filePathBox;

private void populateControls(string someText)
    {
        if (someText == "Something")
        {
            // 
            // TextBox
            //
            this.filePathBox.Location = new System.Drawing.Point(6, 61);
            this.filePathBox.Name = "filePathBox";
            this.filePathBox.Size = new System.Drawing.Size(220, 20);

            this.tabPage1.Controls.Add(this.filePathBox);
            this.filePathBox.Show();
        }
        else if (someText == "SomethingElse")
        {
            //populate other controls.
        }
    } 
```

而且，为了测试，我有一个按钮，它只显示`MessageBox`中的字符串`TextBox`，它什么也没有。

```
private void button2_Click(object sender, EventArgs e)
    {
        MessageBox.Show(filePathBox.Text);
    } 
```

再次，这让我觉得我错过了 的一些属性`TextBox`，但在这一点上任何东西都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:36:07.147

改变你的：

```
this.filePathBox = new TextBox(); 
```

到：

```
if(this.filePathBox==null)
{
    this.filePathBox = new TextBox();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:20:33.193

我想您在`InitializeComponents()`（表单设计器内容）中正确初始化了 filePathBox，所以... filePathBox.Text 最初将为空。在它显示一些东西之前你必须用内容填充它......就像这样：

```
filePathBox.Text = "something";
MessageBox.Show(filePathBox.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:41:28.193

我创建了一个快速示例，没有发现任何问题。确保您的构造函数调用 InitializeComponents，希望这会有所帮助

```
 private System.Windows.Forms.TextBox filePathBox = new TextBox();

    public Form1()
    {
        InitializeComponent();
        PopulateControls("Something");
    }

    public void PopulateControls(string someText)
    {
        if (someText == "Something")
        {

            this.filePathBox.Location = new System.Drawing.Point(6, 61);
            this.filePathBox.Name = "filePathBox";
            this.filePathBox.Size = new System.Drawing.Size(220, 20);

            this.tabPage1.Controls.Add(this.filePathBox);
            this.filePathBox.Show();
        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (filePathBox != null)
        {
            MessageBox.Show(filePathBox.Text);
        }
    } 
```

# seo - 谷歌分析自定义变量是分割大型网站不同部分的好方法吗？

> ID：14361608
> 
> 赞同：0
> 
> 时间：2013-01-16T15:14:48.857
> 
> 标签：seo, google-analytics

谷歌分析自定义变量是分割大型网站不同部分的好方法吗？目前它们只是按标题标签进行分段和过滤，但我们希望具体了解在分段中查看了哪些页面以及每个分段的整体健康状况。我已经看到它说谷歌自定义变量可以被覆盖，这会导致获得准确结果的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:33:58.880

您可以使用自定义变量进行细分（这就是它们的用途），但在标准 GA 中，三个不同范围（页面、会话、访问者）中只有五个自定义变量和不同范围中的变量，但相同的“插槽”可能会干扰彼此。因此，使用自定义变量需要比人们想象的更多的思考和更多的测试（特别是因为无论如何你都会得到结果，所以你需要良好的测试来将数据与噪声分开）。

因此，您可能想首先研究一些更直接的选项 - 如果您的网站是严格分层的，您可能可以使用 url 方案或类似的东西，这应该可以通过页面范围自定义变量来实现。

如果您想在一次访问或多次重复访问期间按用户行为进行细分，则必须使用会话和访问者范围的自定义变量。如果可能的话，不要在不同的范围内重复使用不同的“插槽”（自定义变量从 1 到 5 编号）。

# knockout.js - ko.applyBindings 是同步的还是异步的？

> ID：14361615
> 
> 赞同：9
> 
> 时间：2013-01-16T15:15:33.110
> 
> 标签：knockout.js, knockout-2.0

生成的视图是否在您调用后立即存在，`ko.applyBindings()`或者脚手架是否异步发生？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T15:47:05.780

`ko.applyBindings`是同步调用。

在某些情况下，绑定有特殊代码可以在 setTimeout 中执行操作，但通常情况并非如此。

随着在[Knockout 3.2中添加](http://www.knockmeout.net/2014/06/knockout-3-2-preview-components.html)[组件](http://knockoutjs.com/documentation/component-overview.html)，组件是异步的。在 Knockout 3.3 中，如果加载了视图模型/模板，则可以选择同步渲染组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T10:08:40.207

淘汰赛是同步的。不仅`ko.applyBindings`是 RP Niemeyer 已经说过的功能。当您将值设置为绑定到视图的可观察属性时，您可以 100% 确定在执行后

```
myViewModel.myObservableProperty(newValue); 
```

您的视图已更新。事实上，一个可观察属性是一个函数，当你为你的可观察属性设置一个新值时，你只是用新值作为参数调用一个函数：这个函数在它的主体中将同步触发“更改”事件（我不不知道确切的事件名称）。

希望它有所帮助.. 对不起，但我的英语有点生疏。

# r - S3方法帮助（roxygen2）

> ID：14361616
> 
> 赞同：10
> 
> 时间：2013-01-16T15:15:35.690
> 
> 标签：r, roxygen2, r-s3

我正在尝试在包中使用 S3 方法，并在此处提出问题后认为我理解了如何设置它：[使用 Roxygen 构建 R 包时的 S3 方法一致性警告](https://stackoverflow.com/questions/14237018/s3-method-consistency)

但现在我得到了我没想到的结果。如果我直接在 R 中运行下面的代码，它会给我预期的结果，但如果我将它编译到一个包中，我不会得到正确的结果（请注意，当它应该只取唯一单词时，单词 the 被计数两次`vector a`）。我不确定我设置不正确。

**.R 文件：**

```
#' Find Common Words Between Groups
#' 
#' Find common words between grouping variables (e.g. people).
#' 
#' @param word.list A list of names chacter vectors.
#' @param overlap Minimum/exact amount of overlap.
#' @param equal.or A character vector of c(\code{"equal"}, \code{"greater"}, 
#' \code{"more"}, \code{"less"}).
#' @param \dots In liu of word.list the user may input n number of character 
#' vectors.
#' @rdname common
#' @return Returns a dataframe of all words that match the criteria set by 
#' \code{overlap} and \code{equal.or}.
#' @export
#' @examples
#' \dontrun{
#' a <- c("a", "cat", "dog", "the", "the")                                                              
#' b <- c("corn", "a", "chicken", "the")                                                                
#' d <- c("house", "feed", "a", "the", "chicken")                                                       
#' common(a, b, d, overlap=2)  
#' common(a, b, d, overlap=3)                                                                          
#'                                                                                                      
#' r <- list(a, b, d)  
#' common(r)                                                                                 
#' common(r, overlap=2)                                                                                            
#'                                                                                                     
#' common(word_list(DATA$state, DATA$person)$cwl, overlap = 2) 
#' } 
common <-
function(word.list, ...){
    UseMethod("common")
}

#' @return \code{NULL}
#'
#' @rdname common
#' @method common list
common.list <-
function(word.list, overlap = "all", equal.or = "more", ...){
    if(overlap=="all") {
        OL <- length(word.list) 
    } else {
        OL <- overlap
    }
    LIS <- sapply(word.list, unique)
    DF <- as.data.frame(table(unlist(LIS)), stringsAsFactors = FALSE)
    names(DF) <- c("word", "freq")
    DF <- DF[order(-DF$freq, DF$word), ]
    DF <- switch(equal.or,
        equal = DF[DF$freq == OL, ],
        greater = DF[DF$freq > (OL - 1), ],
        more = DF[DF$freq > (OL - 1), ],
        less = DF[DF$freq < (OL + 1), ])
    rownames(DF) <- 1:nrow(DF)
    return(DF)
}

#' @return \code{NULL}
#'
#' @rdname common
#' @method common default
#' @S3method common default  
common.default <-
    function(..., overlap = "all", equal.or = "more", word.list){
        LIS <- list(...)
        return(common.list(LIS, overlap, equal.or))
}

a <- c("a", "cat", "dog", "the", "the")                                                              
b <- c("corn", "a", "chicken", "the")                                                                
d <- c("house", "feed", "a", "the", "chicken")                                                       
common(a, b, d, overlap=2)  

r <- list(a, b, d)                                                                                   
common(r, overlap=2) 
```

**从命令行运行代码（预期行为）：**

```
> common(a, b, d, overlap=2)  
     word freq
1       a    3
2     the    3
3 chicken    2
>                                                                           
>                                                                                                      
> r <- list(a, b, d)                                                                                   
> common(r, overlap=2)                                                                                            
     word freq
1       a    3
2     the    3
3 chicken    2 
```

**打包编译后的输出：**

```
> a <- c("a", "cat", "dog", "the", "the")                                                              
> b <- c("corn", "a", "chicken", "the")                                                                
> d <- c("house", "feed", "a", "the", "chicken")                                                       
> common(a, b, d, overlap=2)  
     word freq
1       a    3
2     the    3
3 chicken    2
>                                                                           
>                                                                                                      
> r <- list(a, b, d)                                                                                   
> common(r, overlap=2)                                                                                            
     word freq
1     the    4
2       a    3
3 chicken    2 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T20:45:46.440

您看到的错误很可能是因为未导出通用泛型的 list 方法，因此`common.default`被调用。您可以使用`devtools::missing_s3`- 该函数有点启发式来解决这个问题，因此您可能会得到一些误报（例如，它目前无法判断这`is.list`不是一种方法）。这是一个非常普遍的问题（它已经困扰了我很多次），并且 roxygen 的下一次迭代将采取更多措施来防止它。

目前，要使用 roxygen 正确导出 S3 方法，您需要执行以下任一操作：

*   `@S3method generic class`（仅此而已）如果您不想记录该方法
*   `@method generic class``@export`如果你想导出和记录它。

你不应该在同一个文档块中拥有`@S3method`和。`@method`

## roxygen2 >3.0.0 的更新

现在 roxygen 会自动判断一个函数是否是 S3 方法，所以：

*   切勿使用`@S3method`或`@method`
*   如果`@export`您希望导出方法（您通常会这样做，即使不是泛型），请使用

# java - 用于姓氏的Java正则表达式，Java中的名字

> ID：14361617
> 
> 赞同：0
> 
> 时间：2013-01-16T15:15:36.223
> 
> 标签：java, regex

我是 Regex 的新手，我想查找**姓氏、名字**

我已将以下内容写为正则表达式，但它总是失败。我不在乎姓氏是否包含数字或任何内容，但我需要检查的是姓氏和名字是否由空格和逗号分隔。我可以手动完成，但我想使用正则表达式来做到这一点。

```
^[\\w][\\w\\,\\s\\w]$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:18:38.080

试试这个正则表达式模式：

```
^(\S)+, (\S)+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:24:03.940

```
String[] lastNameFirstName = fullName.split("\\s+,\\s+"); 
```

索引 0 将是您的姓氏，而索引 1 将是您的名字。

# java - 使用 PlusClient 获取 android 中 url 的 +1 数量

> ID：14361622
> 
> 赞同：1
> 
> 时间：2013-01-16T15:15:50.640
> 
> 标签：java, android, google-plus, google-plus-one

所以我试图在一个android应用程序中实现一个自定义+1按钮。

我有标准的 PlusOneButton 工作 - 它显示 +1 的数量，但我无法从中读取数字。而且 PlusClient 似乎没有能力告诉我这个数字。我尝试了 Google+ REST API，但它也没有这个功能。

我知道有一些黑客可以通过 POST 电话获取号码，但已经停止工作一次，我不能依赖非官方的东西。

那么：有没有办法通过标准**google-play-services.jar**获得这个数字？

另外：当用户单击我的自定义按钮时，有没有办法激活隐藏的 PlusOneButton？`.performClick()`不起作用。

谢谢。

# wordpress - Wordpress 最新帖子菜单项

> ID：14361625
> 
> 赞同：5
> 
> 时间：2013-01-16T15:16:03.130
> 
> 标签：wordpress, menu, posts

我正试图让 Wordpress 给我一个菜单项来转到“最新帖子”。它们出现在首页，但一旦我离开，我想要一个菜单​​项回到那里。这似乎很明显，但几个小时后，我能做的最好的事情就是创建一个自定义菜单，其中包含指向“未分类”的链接作为一种解决方法。一定会有更好的办法！这样，我得到一个框，上面写着“归档在未分类类别下的帖子存档。”不想要！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:22:28.027

在您的模板目录 (http://codex.wordpress.org/Pages#Page_Templates) 中使用自定义查询创建自定义页面（查看[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)和[http://codex. wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)或[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)）。

在您的管理员中创建一个页面并选择您创建的模板。

在您的菜单中添加指向此页面的链接，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T11:51:50.843

也许这会有所帮助： http: [//www.viper007bond.com/2011/09/20/code-snippet-add-a-link-to-latest-post-to-wordpress-nav-menu/](http://www.viper007bond.com/2011/09/20/code-snippet-add-a-link-to-latest-post-to-wordpress-nav-menu/)

它是一个过滤器，它将“搜索和替换”占位符锚点，例如“#latestpost1”，并使用最新帖子的实际 url，从而在呈现之前动态修改菜单。

我不确定这对 SEO 有何影响，但这是一个聪明的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T13:32:07.810

试试这个插件：[https](https://de.wordpress.org/plugins/dynamic-latest-post-in-nav-menu/) ://de.wordpress.org/plugins/dynamic-latest-post-in-nav-menu/效果很好，代码在这里开源：[https ://github.com/hijiriworld/dynamic-最新发布的导航菜单](https://github.com/hijiriworld/dynamic-latest-post-in-nav-menu)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-28T21:46:04.683

简单的解决方案：

我拿了这个人的代码： http: [//www.viper007bond.com/2011/09/20/code-snippet-add-a-link-to-latest-post-to-wordpress-nav-menu/](http://www.viper007bond.com/2011/09/20/code-snippet-add-a-link-to-latest-post-to-wordpress-nav-menu/)

基本上他写的是菜单项链接到最新的帖子，而不是帖子（复数），所以我只是修改了它并且它正在工作：

```
<?php
if ( ! is_admin() ) {
    // Hook in early to modify the menu
    // This is before the CSS "selected" classes are calculated
    add_filter( 'wp_get_nav_menu_items', 'replace_placeholder_nav_menu_item_with_latest_post', 10, 3 );
}

// Replaces a custom URL placeholder with the URL to the latest post
function replace_placeholder_nav_menu_item_with_latest_post( $items, $menu, $args ) {

    // Loop through the menu items looking for placeholder(s)
    foreach ( $items as $item ) {

     // Is this the placeholder we're looking for?
        if (!strpos(($item->url), 'latestpost'))
            continue;
      //  if ( 'latestpost' != $item->url )
        //    continue;

        // Get the latest post
        $latestpost = get_posts( array(
            'numberposts' => 1,
        ) );

        if ( empty( $latestpost ) )
            continue;

        // Replace the placeholder with the real URL
        $new_link = $item->url;
        $new_link = substr($new_link, 0, strlen($new_link) - 12);
        $item->url = $new_link;
    }

    // Return the modified (or maybe unmodified) menu items array
    return $items;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-04T16:04:50.730

给你所有的帖子一个类别名称。使用诸如“新闻”、“文章”或“博客”之类的通用内容。然后，选择具有您从类别下的菜单页面中选择的名称的类别。将此类别链接添加到您的菜单。随意重命名链接 - 例如“博客”。而且，中提琴 - 当人们点击该链接时，您的所有帖子都会出现。

# xslt - XSLT xsl：序列。到底有什么好处呢..？

> ID：14361629
> 
> 赞同：40
> 
> 时间：2013-01-16T15:16:11.460
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我知道下面的问题有点初学者，但我需要你的帮助来理解一个基本概念。

首先我想说的是，我是一名 3 年的 XSLT 程序员，但是我在这里学到了一些新的和非常基础的东西，我从来不知道（在我的工作中，任何人都学习如何单独编程，没有课程涉及）。

我的问题是： 的用途是`xsl:sequence`什么？

我一直在使用`xsl:copy-of`以按原样复制节点，`xsl:apply-templates`以修改我选择`value-of`的节点和简单的文本。

我从来没有必要使用`xsl:sequence`. 如果有人可以向我展示一个`xsl:sequence`使用示例，如果没有我上面提到的那些是首选或无法实现的，我将不胜感激。

还有一件事，我`xsl:sequence`当然已经阅读了有关定义的内容，但我无法推断它是如何有用的。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-16T17:35:16.793

`<xsl:sequence>`在原子值（或原子值序列）上与两者相同，`<xsl:copy-of>`都只是返回其输入的副本。当您考虑节点时，差异就出现了。

如果 $n 是单个元素节点，例如由类似的定义

```
<xsl:variable name="n" select="/html"/> 
```

然后

```
<xsl:copy-of select="$n"/> 
```

返回节点的*副本*，它具有相同的名称和子结构，但它是具有*新*标识（并且没有父节点）的新节点。

```
<xsl:sequence select="$n"/> 
```

`is`返回节点 $n，返回的节点与 $n 具有相同的父节点，并且通过Xpath 运算符等于它。

传统（XSLT 1 风格）模板使用中几乎完全掩盖了差异，因为您永远无法访问任一操作的结果，构造函数的结果被*隐式*`xsl:sequence`复制到输出树，因此不进行复制的事实被掩盖了.

```
<xsl:template match="a">
   <x>
   <xsl:sequence select="$n"/>
   </x>
</xsl:template> 
```

是相同的

```
<xsl:template match="a">
    <x>
    <xsl:copy-of select="$n"/>
    </x>
</xsl:template> 
```

两者都创建一个新元素节点并将内容的结果*复制*`x`为新节点的子节点。

但是，如果您使用函数，很快就会发现差异。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:f="data:,f">

    <xsl:variable name="s">
        <x>hello</x>
    </xsl:variable>

    <xsl:template name="main">
        ::
        :: <xsl:value-of select="$s/x is f:s($s/x)"/>
        :: <xsl:value-of select="$s/x is f:c($s/x)"/>
        ::
        :: <xsl:value-of select="count(f:s($s/x)/..)"/>
        :: <xsl:value-of select="count(f:c($s/x)/..)"/>
        ::
    </xsl:template>

    <xsl:function name="f:s">
        <xsl:param name="x"/>
        <xsl:sequence select="$x"/>
    </xsl:function>

    <xsl:function name="f:c">
        <xsl:param name="x"/>
        <xsl:copy-of select="$x"/>
    </xsl:function>

</xsl:stylesheet> 
```

生产

```
$ saxon9 -it main seq.xsl
<?xml version="1.0" encoding="UTF-8"?>
::
:: true
:: false
::
:: 1
:: 0
:: 
```

这里 和 的结果`xsl:sequence`是`xsl:copy-of`完全不同的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-16T18:13:09.367

xsl:sequence 最常见的用例是从 xsl:function 返回结果。

```
<xsl:function name="f:get-customers">
  <xsl:sequence select="$input-doc//customer"/>
</xsl:function> 
```

但它在其他情况下也很方便，例如

```
<xsl:variable name="x" as="element()*">
  <xsl:choose>
    <xsl:when test="$something">
       <xsl:sequence select="//customer"/>
    </xsl:when>
    <xsl:otherwise>
       <xsl:sequence select="//supplier"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:variable> 
```

这里的关键是它返回对原始节点的引用，它不会创建新副本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-16T16:07:08.463

好吧，返回您使用的某种类型的值，`xsl:sequence`因为`xsl:value-of`尽管它的名称总是创建一个文本节点（从 XSLT 1.0 开始）。所以在你使用的函数体中

```
 <xsl:sequence select="42"/> 
```

要返回一个`xs:integer`值，您可以使用

```
<xsl:sequence select="'foo'"/> 
```

返回一个`xs:string`值和

```
<xsl:sequence select="xs:date('2013-01-16')"/> 
```

返回一个`xs:date`值等等。当然，您也可以使用 eg 返回序列`<xsl:sequence select="1, 2, 3"/>`。

在我看来，在这些情况下，您不希望创建文本节点甚至元素节点，因为它效率低下。

这就是我的看法，对于 XSLT 和 XPath 2.0 的新的基于模式的类型系统，需要一种方法来返回或传递这些类型的值，并且需要一个新的构造。

[编辑]Michael Kay 在他的“XSLT 2.0 和 XPath 2.0 程序员参考”中说`xsl:sequence`：“XSLT 2.0 中引入的这条看似无辜的指令对 XSLT 语言的能力产生了深远的影响，因为它意味着 XSLT 指令和序列构造函数 (因此函数和模板）能够返回 XPath 数据模型允许的任何值。没有它，XSLT 指令只能用于在结果树中创建新节点，但有了它，它们也可以返回原子值和对现有节点。”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T09:07:38.807

另一个用途是仅当标签有子标签时才创建标签。需要一个例子：

```
<a>
    <b>node b</b>
    <c>node c</c>
</a> 
```

在您的 XSLT 中的某处：

```
<xsl:variable name="foo">
    <xsl:if select="b"><d>Got a "b" node</d></xsl:if>
    <xsl:if select="c"><d>Got a "c" node</d></xsl:if>
</xsl:variable>
<xsl:if test="$foo/node()">
    <wrapper><xsl:sequence select="$foo"/></wrapper>
</xsl:if> 
```

您可以在这里看到演示：http: [//xsltransform.net/eiZQaFz](http://xsltransform.net/eiZQaFz)

这比像这样测试每个标签要好得多：

```
<xsl:if test="a|b">...</xsl:if> 
```

因为你最终会在两个地方编辑它。此外，处理速度将取决于您输入的标签。如果它是您测试的最后一个，引擎将测试之前每个人的存在。由于 $foo/node() 是“有子元素吗？”的成语，引擎可以对其进行优化。这样做，你可以减轻每个人的生活。

# javascript - 带有 jquery 且不使用插件的新闻自动收报机

> ID：14361630
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:16:13.563
> 
> 标签：javascript, jquery

我在网站中有一部分需要显示为新闻行情。

它看起来像这样：

```
<div class="news">
  <span>NEWS 1</span>
  <span>NEWS 2</span>
  <span>NEWS 3</span>
</div> 
```

我需要一个 javascript 代码来重复显示新闻而不使用插件。这个想法是显示`span`并隐藏其余部分，`spans`并每秒钟按顺序重复`n`。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:27:56.390

像这样的事情怎么样（显然改变间隔以满足您的需要，以毫秒为单位）：

```
$(function() { 
    var num_stories = $('.news > span').length,
        news_interval = 1000,
        current_story = 0;

    $('.news > span:gt(0)').hide();

    window.setInterval(function() {  
        var next_story = (current_story == (num_stories - 1)) ? 0 : current_story + 1;
        $('.news > span:eq(' + current_story + ')').hide();
        $('.news > span:eq(' + next_story + ')').show();
        current_story = next_story;
    }, news_interval);
}); 
```

这是一个工作演示 > [http://jsfiddle.net/J35Sa/](http://jsfiddle.net/J35Sa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:28:05.280

这样的事情应该这样做：

```
$(function() {
    var $items = $('div.news > span').hide();
    var curIndex = 0;
    setInterval(function() {
        $items.hide();

        curIndex++;
        if(curIndex >= $items.length) {
            curIndex = 0;
        }
        $items.eq(curIndex).show();
    }, 2000);
}); 
```

你可以看到它在这个 jsfiddle 中工作：http: [//jsfiddle.net/YxbRL/](http://jsfiddle.net/YxbRL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:31:53.283

它的 HTML 标记作为列表比随机跨度更有意义。所以我改变了它。

**HTML：**

```
<ul class="news">
  <li>NEWS 1</li>
  <li>NEWS 2</li>
  <li>NEWS 3</li>
</ul> 
```

**JavaScript：**

```
var lis = $(".news li");
function showNext() {
  var next = lis.filter(".active").removeClass("active").next();
  if (next.length == 0) {
    next = lis.first();
  }
  next.addClass("active");
  window.setTimeout(showNext,5000);
}
showNext(); 
```

**CSS：**

```
.news li.active {
  display:block;
}
.news li {
  display:none
} 
```

**运行示例：**

[JSFiddle](http://jsfiddle.net/dBJAT/)

# python - 带有熊猫的 OLS：日期时间索引作为预测器

> ID：14361634
> 
> 赞同：9
> 
> 时间：2013-01-16T15:16:23.287
> 
> 标签：python, datetime, pandas, linear-regression, series

我想使用 pandas OLS 函数来拟合我的数据系列的趋势线。有谁知道如何使用熊猫系列中的日期时间索引作为 OLS 中的预测器？

例如，假设我有一个简单的时间序列：

```
>>> ts
2001-12-31    19.828763
2002-12-31    20.112191
2003-12-31    19.509116
2004-12-31    19.913656
2005-12-31    19.701649
2006-12-31    20.022819
2007-12-31    20.103024
2008-12-31    20.132712
2009-12-31    19.850609
2010-12-31    19.290640
2011-12-31    19.936210
2012-12-31    19.664813
Freq: A-DEC 
```

我想使用索引作为预测器对其进行 OLS：

```
model = pd.ols(y=ts,x=ts.index,intercept=True) 
```

但由于 x 是日期时间索引列表，因此该函数返回错误。有人有想法吗？

我可以使用 scipy.stats 中的*linregress* ，但我想知道 Pandas 是否可以。

谢谢，格雷格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:46:11.597

问题是你不能传递一个`Index`to `ols`。
将其更改为`Series`：

```
In [153]: ts
Out[153]: 
2011-01-01 00:00:00    19.828763
2011-01-01 01:00:00    20.112191
2011-01-01 02:00:00    19.509116
Freq: H, Name: 1

In [158]: type(ts.index)
Out[158]: pandas.tseries.index.DatetimeIndex

In [154]: df = ts.reset_index()

In [155]: df
Out[155]: 
                index          1
0 2011-01-01 00:00:00  19.828763
1 2011-01-01 01:00:00  20.112191
2 2011-01-01 02:00:00  19.509116

In [160]: type(df['index'])
Out[160]: pandas.core.series.Series

In [156]: model = pd.ols(y=df[1], x=df['index'], intercept=True)

In [163]: model
Out[163]: 

-------------------------Summary of Regression Analysis-------------------------

Formula: Y ~ <x> + <intercept>

Number of Observations:         3
Number of Degrees of Freedom:   1

R-squared:        -0.0002
Adj R-squared:    -0.0002

Rmse:              0.3017

F-stat (1, 2):       -inf, p-value:     1.0000

Degrees of Freedom: model 0, resid 2

-----------------------Summary of Estimated Coefficients------------------------
      Variable       Coef    Std Err     t-stat    p-value    CI 2.5%   CI 97.5%
--------------------------------------------------------------------------------
             x     0.0000     0.0000       0.00     0.9998    -0.0000     0.0000
     intercept     0.0000 76683.4934       0.00     1.0000 -150299.6471 150299.6471
---------------------------------End of Summary--------------------------------- 
```

# java - JSCH：有没有办法检索提示？

> ID：14361635
> 
> 赞同：0
> 
> 时间：2013-01-16T15:16:23.763
> 
> 标签：java, ssh, prompt, jsch

我正在使用 JSCH 通过 SSH 访问主机，然后启动一些命令。

主机没有使用“通用”操作系统，因为它是 BNG：[http](http://en.wikipedia.org/wiki/Border_Network_Gateway) ://en.wikipedia.org/wiki/Border_Network_Gateway 。

我需要检索提示，因为它包含有用的信息，因为它可能类似于 `[local]MYBNG#`or`[not_local]MYBNG#`并且我需要应用一些逻辑来知道提示中是否存在`local`or `not_local`。

`InputStream`从 中检索`ExecChannel`不起作用，因为您只能看到刚刚启动的命令的输出...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:50:32.780

在 JSCH 的示例页面上，有一个登录 SSH 服务器并检索 shell 提示符的示例：

[例子在这里](http://www.jcraft.com/jsch/examples/Shell.java.html)。

应该这样做的代码具体是：

```
Channel channel=session.openChannel("shell");
channel.setOutputStream(System.out); 
```

这些示例有针对特定终端仿真的注释，这取决于 BNG 可能需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:53:36.700

你可以按回车键：

```
outputStream.write("\n");
outputStream.flush(); 
```

读取输出：

```
String res = "";
byte array[];
int num;
do {
    if ((num = inputStream.available()) > 0) {
        array = new byte[num];
        num = inputStream.read(array);
        String ret = new String(array, 0, num);
        res += ret;

        if (inputStream.available() == 0)
            break;                      
    }
} while (true); 
```

并验证它是否包含一些提示：

```
res.toString().contains("[local]MYBNG#"); 
```

# jquery-mobile - jquery Mobile - 自动分隔线

> ID：14361636
> 
> 赞同：0
> 
> 时间：2013-01-16T15:16:29.507
> 
> 标签：jquery-mobile

我正在将 jquery Mobile AutoDivider 用于我的一个 Web 项目，它在 IE8 中运行良好，但由于某种原因在 Chrome 中它没有为我生成标题。

我的问题是：AutoDivider 究竟如何确定制作“分隔器”的内容？是否只是您的第一项`<li></li>`？

这是我的基本 HTML 结构（它最终放置在 ASP.Net 中继器中：

```
<ul data-role="listview" data-autodividers="true">
  <li>
      <img src="mySource.jpg" alt="" />
        <h3><a href="#">John Doe</a></h3>
           <p><strong>Company Name Here</strong></p>
           <p>User Address</p>
           <p class="ui-li-aside">
             <strong style="display: none;"><!-- This is what seems to make the headers in IE, placing this right here: -->
             Last Name of Employee</strong>
            </p>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:36:08.563

请参阅文档[http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)

> 自动分频器
> 
> 列表视图可以配置为自动为其项目生成分隔符。这是通过向任何列表视图添加 data-autodividers="true" 属性来完成的。
> 
> 默认情况下，用于创建分隔符的文本是项目文本的大写首字母。或者，您可以通过以编程方式在列表视图上设置 > autodividersSelector 选项来指定分隔符文本。

# ruby - 如何从 URL 中获取最后一个单词？

> ID：14361637
> 
> 赞同：0
> 
> 时间：2013-01-16T15:16:32.717
> 
> 标签：ruby, ruby-on-rails-3.2

有没有一种方法可以从下面的 URL 示例中只提取最后一个单词？我希望能够将其用作页面上的标题，即“帐户”页面。

我发现通过使用`request.path`它会给我一个没有根的路径，但我不确定如何获得最后一个路径名。

```
/users/1234/account 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T15:18:30.537

尝试：

```
request.path.split('/').last 
```

如果您想要“帐户”（而不是“帐户”），请`capitalize`在结果上调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:21:57.443

我不熟悉 Ruby，但您可以尝试这种方法。

尝试使用 '/' 作为分隔符的字符串拆分 request.path 并从结果数组中获取最后一个元素

users/1234/account 将被拆分为`{'user', '1234', 'account'}`

尽管这不能直接回答您的问题，但我希望它能给您一个开始

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:22:59.290

URL 是一个简单的字符串，由显示如何连接到站点的方案、资源所在的主机以及该资源的路径组成。您可以使用[`File.basename`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-basename)获取该路径的最后一部分，就像我们在磁盘上的文件中使用的一样：

```
File.basename('/users/1234/account')
=> "account" 
```

# c# - C# 多边形遮罩？

> ID：14361638
> 
> 赞同：1
> 
> 时间：2013-01-16T15:16:38.620
> 
> 标签：c#, polygon, mask, roi

我有一个多边形的所有顶点的 x，y 坐标，比如 (1,1) (20,10) (10,30)，我如何生成一个遮罩，多边形内的所有像素都是 1 而外面是 0？我知道 C# 中有一个函数`FillPolygon()`看起来几乎可以完成这项工作，但在我看来，它不会以任何方式返回掩码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:43:14.123

```
Bitmap b = new Bitmap(30, 30);

using (Graphics g = Graphics.FromImage(b))
{
    g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.None;
    g.Clear(Color.Black);
    g.FillPolygon(Brushes.White, new Point[] {
        new Point(5,5),
        new Point(20,20),
        new Point(2,15)});
}

byte[,] mask = new byte[b.Width, b.Height];

for (int y = 0; y < b.Height; y++)
for (int x = 0; x < b.Width; x++)
{
    mask[x, y] = b.GetPixel(x, y).R > 0 ? 1 : 0;
} 
```

如果您使用直接像素访问`LockBits`而不是`GetPixel`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-17T14:35:51.467

*我知道这是一个相当老的问题，但万一有人过来寻找类似的东西......*

如果您只想获取蒙版，则有比引用 System.Drawing 并实际绘制到内存中的图像更好的方法...

```
struct Point
{
    public readonly int X;
    public readonly int Y;

    public Point(int x, int y)
    {
        this.X = x;
        this.Y = y;
    }
}

bool PointInPolygon(Point[] polygon, int x, int y)
{
    if(polygon == null || polygon.Length < 3) return false;

    int counter = 0;
    double intersections;
    Point p1 = polygon[0];
    Point p2;
    for (int i = 1; i <= polygon.Length; i++)
    {
        p2 = polygon[i % polygon.Length];
        if ((y > (p1.Y < p2.Y ? p1.Y : p2.Y)) && (y <= (p1.Y > p2.Y ? p1.Y : p2.Y)) && (x <= (p1.X > p2.X ? p1.X : p2.X)) && (p1.Y != p2.Y))
        {
            intersections = (y - p1.Y) * (p2.X - p1.X) / (p2.Y - p1.Y) + p1.X;
            if (p1.X == p2.X || x <= intersections) counter++;
        }
        p1 = p2;
    }

    return counter % 2 != 0;
}

void Main()
{
    Point[] polygon = new Point[] { new Point(1,1), new Point(20,10), new Point(10,30) };
    bool[,] mask = new bool[30,30];

    for(int i=0;i<30;i++)
    {
        for(int j=0;j<30;j++)
        {
            mask[i,j] = PointInPolygon(polygon, i, j);
            Console.Write(mask[i,j]?"*":".");
        }
        Console.WriteLine();
    }
} 
```

这将输出如下：

```
..............................
..............................
..............................
..***.........................
...*****......................
...********...................
....**********................
....**************............
.....****************.........
.....*******************......
......*********************...
......************************
.......*********************..
.......*******************....
........****************......
........**************........
.........***********..........
.........*********............
..........******..............
..........****................
..........**..................
..............................
..............................
..............................
..............................
..............................
..............................
..............................
..............................
.............................. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:45:35.740

对于带有掩码的播放，您可以使用[Region](http://msdn.microsoft.com/en-us/library/system.drawing.region.aspx)。

# design-patterns - 多字段搜索框的设计模式

> ID：14361640
> 
> 赞同：0
> 
> 时间：2013-01-16T15:16:44.103
> 
> 标签：design-patterns, search

我实现了一个网站的高级搜索模块（在 Struts 2 中制作）。此搜索区域是一个包含许多不同字段的表单。我可以根据选择将字符串放入所有、某些或没有获得不同结果的字段中。我现在要做的是用一个很大的错误 if/elseif 语句检查是否有空白字段（以及哪些），然后应用正确的方法。

例子

```
 if (field_1.equals("") && field_2.equals("")) {
        dao.searchAll;
    } else if (field_1.equals("") && !field_2.equals("")) {
        dao.searchType1;
    } else if (!field_1.equals("") && !field_2.equals("")) {
        dao.searchType2;
    } else if {
       ...
       ... 
```

dao 的方法是 HQL（休眠）查询。

这个例子比我有 5 个文本输入字段的例子更简单。

有更好更灵活的方法来做同样的事情吗？一些设计模式，比如策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:17:28.603

Struts真的很弱。首先要注意的是不要将您的行为直接与界面组件联系起来。在 JSF 中，您可以将这些字段绑定到类上的属性，然后从那里引用它们（体现查询分派的组件应该对输入源一无所知）。

调度程序基本上就是你在这里所拥有的：当收到某些消息时，触发特定的响应。我会将这些值放入一些不可变的形式，然后创建一个工厂方法来获取或进行适当的查询。然后在工厂构造之外执行。

这不是一种策略。您可能有不同的方法来确定要做什么，但这是一个创造性的问题：您正在将输入片段转换为查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:34:54.773

看看[Hibernate Criteria API](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)。您可以使用它来构建基于字段的查询。因此，例如，您可以编写如下内容：

```
Criteria criteria = session.createCriteria(Some.class);
if (!field_1.equals("")) {
  criteria.add( /*some criteria for field_1 */ );
}
if (!field_2.equals("")) {
  criteria.add( /*some criteria for field_2 */ );
} 
```

# sql - 使用排名与最大值 (T-SQL)

> ID：14361642
> 
> 赞同：1
> 
> 时间：2013-01-16T15:16:49.510
> 
> 标签：sql, tsql, sql-server-2008-r2

我目前正在对运行查询需要很长时间的旧工作进行故障排除。旧作业使用第一个查询，但我一直在使用第二个查询进行测试。

之间的差异：

```
Select Max(Cl1) as Tab,
       Max(Cl2) as Tb,
       Customer
From TableA
group by Customer 
```

对比

```
Select Customer,
       Tab,
       tb
From 
(Select Customer,
         Tab,
         tb,
         Rank() over (partition by Customer order by Cl1 desc) rk1,
         Rank() over (partition by Customer order by Cl2 desc) rk2
  From TableA) X
 Where X.rk1 = 1 and X.rk2 = 1 
```

Tab Tb 客户

A45845 100052 新

A45845 100053 新

A45845 100054 恶臭

该表将始终具有 Tab 和 Tb 列的值（无空值或空白值）。选项卡不是特定客户独有的。Tb 是一个连续且连续递增的整数，不可能有重复（唯一）。客户的最新 Tab 值也将具有最新的 Tb。

虽然结果相同，但在这种情况下更改查询时我可能没有考虑到什么？

编辑：修复了构建示例而不使用真实列或表名时第二个查询的错误。还对场景进行了说明。我对原始帖子中的更新信息和修复表示歉意，甚至在我有机会仔细检查之前就打电话给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:28:53.097

第一个查询返回 and 的值`Tab`，`Tb`第二个查询总是为两列返回 1 和 1（因为`where`子句）。

第二个只会返回存在 CL1 和 Cl2 的第一行的客户。第一个为所有客户返回一行。

当多行满足给定客户的两个订购条件时，第二个将返回重复项。第一个只返回每个客户一行。

第二个有语法错误，所以它不会运行（后面的逗号`rk2`）。第一个似乎是有效的 SQL 语法。

第一个似乎更简单，更容易理解。但是，我认为我的第一点是最大的不同。（我忽略了列的顺序不同的事实。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:37:10.133

这将是等效查询，但我怀疑它会更有效。@Damien_The_Unbeliever 如果我又错了，请告诉我。（为有多个具有相同值的 Cl1 和 Cl2 行的场景添加了不同的内容。如果主键跨客户、Cl1 和 Cl2，则可以删除。）

```
Select  Distinct Customer,
        X.Cl1 as Tab,
        X2.Cl2 as tb
From   (Select  Customer,
                Rank() over (partition by Customer order by Cl1 desc) rk1, 
                Cl1
        From    TableA) X
Join   (Select  Customer,         
                Rank() over (partition by Customer order by Cl2 desc) rk2, 
                Cl2
        From    TableA) X2
        On  X.Customer = X2.Customer
Where   X.rk1 = 1 
And     X2.rk2 = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:11:59.753

严重怀疑Rank会更快。

如果您想要 CL1 最大的行上的 CL2 的值，则需要排名。

您有关于 Customer、CL1 和 CL2 的索引吗？
检查碎片。
检查执行计划。

而且这些都不会返回相同的结果。

# opencv - OpenCV 立体校正

> ID：14361644
> 
> 赞同：2
> 
> 时间：2013-01-16T15:16:56.313
> 
> 标签：opencv, stereo-3d

如果我已经在实验室中计算了内在函数（相机矩阵和失真系数）。

然后，我将相机移到了现实世界的领域。我在现实世界中使用了大约 6-10 个已知位置，使用 SolvePnP() 估计相机位姿。所以我也有两个相机旋转和平移。

我现在想使用 2 个摄像头来创建立体通信。问题是：我必须使用 stereoCalibrate() 吗？

或者我可以使用已知的内在函数立即调用 StereoRectify 吗？它说 StereoRectify() 期望旋转和平移向量/矩阵，文档说它期望：

```
"The rotation matrix between the 1st and the 2nd cameras’ coordinate systems." 
```

由于我有两个相机的相机姿势，我可以简单地减去从 SolvePnP 获得的 2 个平移矢量和旋转矢量，并将结果传递给 StereoRectify() 吗？（两台相机使用相同的共同物点参考系统）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:26:51.767

将相机校准到世界（例如您的已知位置）与校准它们彼此不同。在您的情况下，您可以减去平移向量。这将为您提供从一台摄像机到另一台摄像机的转换（前提是您使用相同的固定点校准它们）。你也可以得到相机间的旋转矩阵，但这不能通过简单地减去它们来完成，你需要更复杂的数学。这就是为什么我建议你使用 opencv 提供的立体校准。

# java - 在 Java 中读取制表符分隔的文件

> ID：14361650
> 
> 赞同：5
> 
> 时间：2013-01-16T15:17:09.447
> 
> 标签：java, csv, file-io

我有以下代码来读取 Java 中的制表符分隔文件：

```
while ((str = in.readLine()) != null) {
  if (str.trim().length() == 0) {
          continue;
  }

  String[] values = str.split("\\t");

  System.out.println("Printing file content:");
  System.out.println("First field" + values[0] + "Next field" +  values[1]);
} 
```

但它打印的是 1 而不是文件内容。这里有什么问题？示例文件中的一行内容如下：

```
{Amy Grant}{/m/0n8vzn2}{...} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T15:28:06.930

> 试试`System.out.println(Arrays.asList(values))`；
> 
> 这行得通！但我需要单独访问这些字段。你能告诉我我的代码有什么问题吗？

我怀疑你得到一个`IndexOutOfBoundsException`. 您遇到的错误很重要，如果您忽略它，您将无法解决问题。

这意味着您只有一个字段集。

```
String[] values = str.split("\\t", -1); // don't truncate empty fields

System.out.println("Printing file content:");
System.out.println("First field" + values[0] + 
   (values.length > 1 ? ", Next field" +  values[1] : " there is no second field")); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T15:20:09.423

写`\t`而不是`\\t`. 那将是您想要的更多

```
String[] values = str.split("\t"); 
```

我在我的一些项目中使用[http://sourceforge.net/projects/opencsv/](http://sourceforge.net/projects/opencsv/)，它可以很好地完成工作。

# c - 有没有办法在 Linux 的 32 位程序中获得 64 位 time_t？

> ID：14361651
> 
> 赞同：17
> 
> 时间：2013-01-16T15:17:09.570
> 
> 标签：c, linux, gcc, 64-bit, time-t

在 Windows 上，我可以调用：

```
_time32(__time32_t); // to get 32-bit time_t
_time64(__time64_t); // to get 64-bit time_t 
```

（在 32 位和 64 位程序中）

在 Linux 中有什么方法可以做到这一点（用 GCC 编译）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T17:06:53.383

显然，不，这是不可能的。对于初学者来说，Linux 中只有一个`time()`函数，no`time32()`或`time64()`.

搜索了一会，发现不是libc的错，而罪魁祸首其实是内核。

为了让 libc 获取当前时间，它需要对其执行系统调用^(：（[Source](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/unix/sysv/linux/time.c;h=d447d3caa1eb6d47727ea6cc5cc73e5edbec43ba;hb=HEAD#l30)）)

```
time_t time (t) time_t *t;
{
    // ...
    INTERNAL_SYSCALL_DECL (err);
    time_t res = INTERNAL_SYSCALL (time, err, 1, NULL);
    // ...
    return res;
} 
```

系统调用定义为：^(（[Source](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/time.c;h=d226c6a3fd28933d02edd485a9c8353db2212c02;hb=406089d01562f1e2bf9f089fd7637009ebaad589#l62)）)

```
SYSCALL_DEFINE1(time, time_t __user *, tloc)
{
    time_t i = get_seconds();
    // ...
    return i;
} 
```

该函数`get_seconds()`返回一个`unsigned long`，如下所示^(：（[Source](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/time/timekeeping.c;h=cbc6acb0db3fafbaa4830da34cdb22e538892764;hb=406089d01562f1e2bf9f089fd7637009ebaad589#l1296)）)

```
unsigned long get_seconds(void)
{
    struct timekeeper *tk = &timekeeper;

    return tk->xtime_sec;
} 
```

而且`timekeeper.xtime_sec`实际上是 64 位的^(：（[来源](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=include/linux/timekeeper_internal.h;h=e1d558e237ecfdd8059106c4e98f488ff406ff12;hb=406089d01562f1e2bf9f089fd7637009ebaad589#l30)）)

```
struct timekeeper {
    // ...
    /* Current CLOCK_REALTIME time in seconds */
    u64                     xtime_sec;
    // ...
} 
```

现在，如果你知道你的 C，你就知道它的大小`unsigned long`实际上是依赖于实现的。在我这里的 64 位机器上，它是 64 位的；但在我这里的 32 位机器上，它是 32 位的。在某些 32 位实现上可能是 64 位，但不能保证*。*

另一方面，`u64`它始终是 64 位的，因此在最基础上，内核以 64 位类型跟踪时间。为什么它会继续将它作为一个`unsigned long`不保证为 64 位长的 .

最后，即使 libc 强制`time_t`保存 64 位值，它也不会改变任何事情。

您可以将您的应用程序深深地绑定到内核中，但我认为这甚至不值得。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-03-16T16:08:24.757

上面的许多答案都说这是不可能的，但这**完全不正确**。当时这*是*不可能的，但人们多年来一直[在谈论修复它](https://lwn.net/Articles/599580/)。[最后，Linux 5.1 内核引入了](https://lwn.net/Articles/776427/)32 位平台上的 64 位时间支持，并添加了新的[`*time64`系统调用](https://lwn.net/ml/linux-kernel/20190110172216.313063-12-arnd@arndb.de/)。查看[此表](https://fedora.juszkiewicz.com.pl/syscalls.html)，您可以看到这些系统调用仅在 32 位平台上可用。现在，如果您正在为 32 位系统编写代码，您可以`clock_gettime64`直接调用（从内联汇编或 C with [`syscall()`](http://man7.org/linux/man-pages/man2/syscall.2.html)）来获取当前时间

然而，在那之后你就完全靠自己了。如果您想要完整的*用户空间*支持，您必须使用 Linux 5.6 或更高版本以及 musl 1.2+ 或 glibc 2.32+。只需重建您的代码，您的代码`time_t`将变为 64 位长

> *   所有用户空间都必须使用 64 位编译，`time_t`即将到来的 musl-1.2 和 glibc-2.32 版本以及已安装的 linux-5.6 或更高版本的内核头文件将支持该版本。
>     
>     
> *   直接使用系统调用接口的应用程序需要移植以使用`time64`linux-5.1 中添加的系统调用来代替现有的系统调用。这会影响大多数用户`futex()`以及`seccomp()`拥有自己的运行时环境而不基于 libc 的编程语言。
>     
>     
> 
> [https://lkml.org/lkml/2020/1/29/355?anz=web](https://lkml.org/lkml/2020/1/29/355?anz=web)

了解更多信息

*   [接近内核 2038 年终局之战](https://lwn.net/Articles/776435/)
*   [GNU C 库中的 64 位时间符号处理](https://www.gnu.org/software/libc/manual/html_node/64_002dbit-time-symbol-handling.html)
*   [glibc Y2038 证明设计](https://sourceware.org/glibc/wiki/Y2038ProofnessDesign)
*   [将 time_t 和 clock_t 更改为 64 位](https://lwn.net/Articles/598408/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-16T16:01:37.670

标准库中不包含任何`time64()/time32()`功能。

标准头文件中不考虑任何`time32_t/time64_t`定义。

`time_t`定义`time.h`为`typedef __time_t time_t`;

经过一长串的重新定义，您会发现`__time_t`在 32 位机器上定义为 32 位，在 64 位机器上定义为 64 位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-26T14:05:19.800

使用这个库：[https ://github.com/evalEmpire/y2038](https://github.com/evalEmpire/y2038)

> 该项目的目标是为 POSIX time.h 提供一个替代品，它可以在具有 32 位 time_t 的机器上工作，但不会受到 2038 错误的影响。这将允许 C 程序员在 2038 年安全，而无需将他们的软件重写为新接口。它在仍然使用系统时区数据库的同时执行此操作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-16T17:15:34.733

如果你真的需要这个，为什么不自己动手呢？

```
typedef int32_t my_time32;
typedef int64_t my_time64;

my_time32 get_mytime32() {
    if (sizeof(time_t) == sizeof(my_time32))
        return time(NULL);
    else {
        /* Check for overflow etc. here... */
        return (my_time32)(time(NULL));
    }
} 
```

同样对于`get_mytime64()`.

如果您不关心溢出，`return time(NULL);`由于 C 的隐式数字转换，一个简单的函数对这两个函数都有效。

# spring - 哪个是最好的 Spring Cache Abstraction 或 Hibernate EHCache？

> ID：14361656
> 
> 赞同：2
> 
> 时间：2013-01-16T15:17:17.807
> 
> 标签：spring, hibernate, ehcache

我计划在 Web 应用程序中实现缓存。

我已经在我之前的一个 Web 应用程序中使用了 Hibernate EHCache。

现在一天，最近我知道在最新的 Spring 版本中有缓存抽象层。

因此，我想它只是 Hibernate EHCache 的包装器，还是 Spring 本身提供的缓存功能。

如果不同，那么想知道使用 Cache 的最佳或更好的选择是什么？

另外，我从几篇文章中了解到 Hibernate EHCache 不支持集群，是吗？因为大型 Web 应用程序需要集群。

我在 Web 应用程序中使用了 Spring 3.1 和 Hibernate 3.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:38:22.080

Hibernate 和 EHCache 是不同的东西。

EHCache 是**缓存提供者**，即缓存的实际实现。

Hibernate 可以为 L2 缓存**使用多个不同的提供程序，包括 EHCache。**

Spring Cache 是一个用于缓存方法调用的框架。它可以**使用** 多个不同的提供者，包括 EHCache。

EHCache 以多种模式提供分布（集群），从基本的 JMS 驱动同步到 Terracotta BigMemory 分布。Hibernate L2 缓存应该支持集群。

Spring Cache 与 Hibernate 无关，但您可以将 Hibernate L2 缓存和 Spring Cache（方法缓存）与 EHCache 并行使用作为两者的底层提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T15:57:18.880

Hibernate 缓存继续使用 EhCache（或其他缓存提供程序）与 Spring 一起工作。它提供了一个二级缓存，用于存储 em.find(key) 实体和关系（@Cache 注释或 XML），如果您使用 q.setHint("org.hibernate.cacheable",true)，它还提供查询缓存。这些是集成的和有据可查的。为此不需要 Spring 缓存。

但是 Spring 提供了独立于 Hibernate 缓存的方法缓存，仍然可以使用 EhCache 作为缓存提供者（与 Hibernate 共享 EhCache）。这可能有点令人困惑，因为 EhCache 配置是重叠的，但本质上 Spring Caching 允许您独立缓存标记为 @Cacheable 的方法的结果。

注 1：Spring/Method 缓存未与 Hibernate 集成。Hibernate 无法识别或维护使用方法缓存缓存的结果。

注意 2：如果没有很好地理解如何使用缓存，不建议将 Hibernate 查询缓存用于高度分布式系统。由于使用 Hibernate 维护的共享实体时间戳缓存来跟踪缓存的查询结果何时应该被驱逐，它增加了死锁的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-13T11:37:11.443

补充一点，对于使用 hibernate 的数据库级缓存，hibernate/JPA 二级缓存似乎更合适。因为它在持久化上下文级别（JPA API）管理实体级别的数据缓存，所以数据库和缓存不一致的机会非常少，因为hibernate很好地管理它。

但是如果我们使用spring cache来做数据库缓存，那么我们总是要保证每一个对数据库操作的方法都需要用合适的缓存注解进行注解（比如`@CacheEvict`remove），这样就有可能会丢失注解，造成不一致。

此外，spring cache 只能用于公共方法，因为它支持我的 AOP（我们可以使用 AspectJ 来解决这个问题）。

# iphone - 从上到下渐变

> ID：14361660
> 
> 赞同：0
> 
> 时间：2013-01-16T15:17:30.757
> 
> 标签：iphone, ios, xcode

这是一个后续问题 -[从左到右的梯度方向](https://stackoverflow.com/questions/14350926/gradient-direction-from-left-to-right)

在这个苹果反射示例代码中，

[苹果反射示例](http://developer.apple.com/library/ios/#samplecode/Reflection/Listings/MyViewController_m.html#//apple_ref/doc/uid/DTS40008063-MyViewController_m-DontLinkElementID_6)

当大小滑块移动时，图像从下到上剪切。移动滑块时如何将其从上到下剪切？我试图更好地理解本教程

```
//I know the code is in this section here but I can't figure out what to change
- (UIImage *)reflectedImage:(UIImageView *)fromImage withHeight:(NSUInteger)height
{
...
}

    //it probably has something to do with this code. 
//I think this tells it how much to cut. 
//Though I can't figure out how does it know where the 0,0 of the image is and why 
// keep 0,0 of the image on the top? I am assuming this is where it hinges its 
//point and cuts the image from bottom to top
CGContextRef MyCreateBitmapContext(int pixelsWide, int pixelsHigh)
{

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // create the bitmap context
    CGContextRef bitmapContext = CGBitmapContextCreate (NULL, pixelsWide, pixelsHigh, 8, 0, colorSpace,(kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst));
    CGColorSpaceRelease(colorSpace);

    return bitmapContext;
} 
```

![在此处输入图像描述](../Images/406d2ad2a4444e2e9bcfd557685d9edf.png)

如果要反映的图像在顶部怎么办。所以为了正确地展示它，我需要从上到下展示它，而不是自下而上。那就是我想要达到的效果。在这种情况下，我只是在他们的故事板示例中移动了 UIImageViews。你现在看到了我的困境

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:31:26.813

它与@Putz1103 的答案非常相似。您应该从前一个 - (UIImage *)reflectedImage:(UIImageView *)fromImage withWidth:(NSUInteger)width 开始创建一个新方法。

```
- (UIImage *)reflectedImage:(UIImageView *)fromImage withWidth:(NSUInteger)width andHeight:(NSUInteger)height
{
     ....
     CGContextClipToMask(mainViewContentContext, CGRectMake(0.0, 0.0, width, height), gradientMaskImage);
     ....
} 
```

然后在 slideAction 方法中，使用类似：

```
self.reflectionView.image = [self reflectedImage:self.imageView withWidth:self.imageView.bounds.size.width andHeight:reflectionHeight]; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:48:41.597

我的猜测是这一行：

```
CGContextClipToMask(mainViewContentContext, CGRectMake(0.0, 0.0, fromImage.bounds.size.width, height), gradientMaskImage); 
```

如果你把它改成这个，它应该做相反的事情：

```
CGContextClipToMask(mainViewContentContext, CGRectMake(0.0, fromImage.bounds.size.height - height, fromImage.bounds.size.width, height), gradientMaskImage); 
```

基本上，您需要将剪切矩形设置为图像的底部，而不是图像的顶部。这将反转您的滑块的作用，但这很容易解决，我将把它留给您练习。

# cql - NDepend：获取每个方法的平均 LOC

> ID：14361661
> 
> 赞同：1
> 
> 时间：2013-01-16T15:17:33.097
> 
> 标签：cql, ndepend, cqlinq

假设我在我的解决方案中设置了特定的方法。如何获得方法集中每个方法的平均代码行数？

这些数字通常显示在每个 NDepend 报告的统计部分（例如`Sum, Average, Minimum`等），但我希望能够单独为这些数字编写查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:04:25.590

CQLinq 查询可能如下所示：

```
let totalLinesSum = JustMyCode.Methods.Where(t => t.IsPublic).Sum(t => t.NbLinesOfCode)
let methodsCount = JustMyCode.Methods.Where(t => t.IsPublic).Count()

let result = (double)totalLinesSum / methodsCount 

select (double?)result 
```

* * *

...或者更精致一点，这个查询可以重构为：

```
// Let define your methods set the way you need
// It is worth removing abstract method that have no LoC
let methodsSet = JustMyCode.Methods.Where(m => m.IsPublic && !m.IsAbstract)

let totalLoc = methodsSet.Sum(t => t.NbLinesOfCode)
let methodsCount = methodsSet.Count()
let avgLoc = (double)totalLoc / methodsCount 

select (double?)avgLoc 
```

# c# - 以 A4 和 A5 纸张格式打印 HTML

> ID：14361662
> 
> 赞同：4
> 
> 时间：2013-01-16T15:17:33.790
> 
> 标签：c#, html, printing

显然，关于**以 A4 和 A5 格式打印 HTML的问题与关于****打印 RTF 格式文本**的问题完全相同，所以这里有另一个问题，其中的细节更加详细。

我正在开发一个应该打印订单的**C#** (WinForms) 程序。该程序是为**.NET 2.0**框架编写的。该程序必须能够以**A4 和 A5 纸张格式**打印，*没有任何用户干扰*（无对话框）。打印的订单应该看起来与在网络浏览器中的完全一样。如果您想看看它应该是什么样子，您可以查看**[此示例。](http://goo.gl/uoRKs)**如您所见，非常基本的东西。

这是我到目前为止所尝试的：

*   在StackOverflow[上提问](https://stackoverflow.com/questions/14322176/printing-html-with-printdocument)，因为重复而被关闭。从来没有找到重复的。
*   **使用WebBrowser**元素打印。无法打印 A5，所以没有解决办法。
*   将 HTML 放入**RichTextBox**并打印出来。它有效，但它没有像在网络浏览器中查看的那样显示 HTML，这是一项要求。代码可以在[这里](http://blogs.artinsoft.net/Mrojas/archive/2009/07/10/Printing-RichTextBox-contents-in-C.aspx)找到。
*   我已经考虑在打印之前转换为 PDF，但这要么很昂贵，要么根本无法使用（对我来说，作为一个几乎没有 C# 经验的程序员）。这些工具通常依赖于安装在用户计算机上的软件（例如用于打印的 Acrobat Reader），我试图避免这种情况。
*   在 Google 中查看了至少 13 页的每个相关链接，但运气不佳。我已经在这工作了大约 2 天半了。

如果有人有（**免费**）更好的方式来打印格式化的 HTML，就像在浏览器中查看的那样，没有用户干扰或外部依赖，请分享。我真的需要这个工作。

请不要关闭这个问题，当我说我积极搜索描述我的问题的解决方案或文章时，请相信我。有些是相关的，但没有解决我遇到的问题。我也使用了这个网站上的高级搜索，没有运气。

感谢您抽出时间来阅读。

*注意：当我说我从未找到重复项时，我的意思是我从未找到真正描述我的问题的文章。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:38:03.123

您将不得不咬紧牙关并使用 PDF 库，您将无法完全控制具有如此多不同用户、浏览器和打印机的 HTML 的最终打印结果。我为内部业务应用程序打印到 A4，我们的用户群非常有限（可能 5 个）并且所有打印到特定打印机，即使那样它充其量也是片状的。我不相信有一种方法可以在没有用户干预的情况下区分 A4 和 A5，即他们必须从打印选项中选择纸张尺寸。

建议你看看[PDF Sharp](http://pdfsharp.com/PDFsharp/)、[Sharp PDF](http://sharppdf.sourceforge.net/)和[iTextSharp](http://sourceforge.net/projects/itextsharp/)，它们都是开源的。

这一切都可以从服务器完成，即不需要在用户机器上安装任何东西。应该可以使用它来选择纸张尺寸（我不是 100% 确定），但最终用户打印它最终取决于他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:00:39.397

我已经使用[此处](http://www.dotnetcurry.com/ShowArticle.aspx?ID=92)描述的 PrintHelper 方法成功地完成了这项工作。我使用它使多个位置的用户能够从 CMS 系统打印条形码标签。标签对布局、字体大小和定位有严格的要求，所有这些都使用 HTML 和 CSS 进行管理。

PrinterHelper 类的工作原理是向其传递一个填充了打印数据的 web 控件（我使用了一个中继器来允许多个标签），并且 helper 类在内存中构建一个页面并打开打印对话框。你像这样注册你的CSS：

```
pg.ClientScript.RegisterStartupScript(pg.GetType(),"LabelCSS","<link href=\"Styles/labelPrint.css\" rel=\"stylesheet\" type=\"text/css\" />"); 
```

不过需要注意的是，它只适用于 Firefox，并且必须更改一些设置，例如将边距设置为零，但由于 CMS 需要使用该浏览器，所以这不是问题。

# .net - 为 Azure / GitHub 发布组织 n 层应用程序分支

> ID：14361664
> 
> 赞同：0
> 
> 时间：2013-01-16T15:17:36.543
> 
> 标签：.net, git, azure, github, n-tier-architecture

我计划开发一个多层 .NET 应用程序，在 Azure 上至少托管三个独立的层：

*   网页前端
*   后端/工作者角色
*   数据库

我想将[Azure Git Publishing](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-git/)与 GitHub 一起使用，以分别启用每个层的持续部署。组织 git 分支以分别为每个组件启用 Azure 部署，同时在它们之间共享代码的最佳方式是什么？

最好，我希望将所有代码放在一个 git 分支中，并在 Azure 中为每个分支设置单独的构建/发布过程。但是，我怀疑这行不通，因为：

1.  Azure 使用分支中的任何推送来触发部署。我不想更新我的前端来触发我的后端部署。
2.  据我所知，无法配置 Azure 用于生成要发布的输出的构建命令。

如果我需要使用单独的 Git 分支，在它们之间共享代码的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:30:27.767

好心的先生

听起来每个*部署目标*都需要一个 git repo 。也就是说，希望独立于任何其他层部署的每一层的存储库。再加上一个共享代码的仓库。大概共享代码编译为一些 dll，可以通过将它们捆绑为 NuGet 包与其他项目共享。例如，通过这种方式，Web 前端不会在更新共享代码时触发部署。仅当您完成 NuGet 更新时才会发生这种情况。

也就是说，我想知道，“不想更新前端来触发我的后端部署”真的是一个要求吗？在我的工作场所，我们几乎所有的部署都是完全自动化的。没有停机时间，它只是工作。我们有时一天部署 5、10 次或更多次。我们不必关心多少次。如果你也能做到这一点，那么你就可以拥有一个大的 git 存储库。是的，偶尔不影响层的更改仍会部署该层，但是，嗯，不在乎。代码组织和共享变得非常简单。

你的朋友乔希

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:06:31.593

根据[这个相关问题](https://stackoverflow.com/q/12069014/33791)，Azure git 发布仅适用于网站，不适用于云服务。

因此，允许单独项目发布的组织问题是无关紧要的。最简单的选择是将项目保留在单个 Git 分支中并使用传统的 Azure 部署（不是自动 Git 发布）。

# jquery - IE 中的 jQuery 日期循环错误

> ID：14361673
> 
> 赞同：0
> 
> 时间：2013-01-16T15:18:04.587
> 
> 标签：jquery, internet-explorer, date

代码 jsFiddle：http: [//jsfiddle.net/14rego/gEUJz/](http://jsfiddle.net/14rego/gEUJz/)

我正在使用这些函数构建日期数组。两者都在 webkit 浏览器中运行良好，但我知道 IE 对日期更挑剔。

只要月份不包括八月或九月，nextDayA() 就可以在 IE 中使用。在决定尝试 nextDayB() 之前，我花了几个小时试图弄清楚它，我认为它可以在任何地方的任何浏览器上工作，因为它不包含 Date 函数，但它在 IE 中根本不起作用。

我不在乎我使用哪一个，只要它有效。我只需要按顺序获得正确的日期。我有一点经验，但我肯定不是大师。任何人都可以解释一下吗？

```
$.nextDayA = function (year, month, day) {
    var jMo = parseInt(month) - 1;
    var today = new Date(year, jMo, day);
    var tomorrow = new Date(today.getTime() + (24 * 60 * 60 * 1000));
    var nextDy = tomorrow.getDate();
    var nextMo = tomorrow.getMonth() + 1;
    var nextYr = tomorrow.getFullYear();
    if (nextDy < 10) { nextDy = '0' + nextDy; }
    if (nextMo < 10) { nextMo = '0' + nextMo; }
    var tomDate = parseInt(nextYr + '' + nextMo + '' + nextDy);
    return tomDate;
};
$.nextDayB = function (year, month, day) {
    var thisYear = parseInt(year);
    var thisMonth = parseInt(month);
    var thisDay = parseInt(day);
    if (year % 4 == 0) {
        var leap = 'yes';
    } else {
        var leap = 'no';
    }
    var nextDy = thisDay + 1;
    if (nextDy > 28 && thisMonth === 2 && leap === 'no') {
        var nextDy = 1;
        var nextMo = thisMonth + 1;
    } else if (nextDy > 29 && thisMonth === 2 && leap === 'yes') {
        var nextDy = 1;
        var nextMo = thisMonth + 1;
    } else if (nextDy > 30 && (thisMonth === 2 || thisMonth === 4 || thisMonth === 6 || thisMonth === 9 || thisMonth === 11)) {
        var nextDy = 1;
        var nextMo = thisMonth + 1;
    } else if (nextDy > 31 && (thisMonth === 1 || thisMonth === 3 || thisMonth === 5 || thisMonth === 7 || thisMonth === 8 || thisMonth === 10 || thisMonth === 12)) {
        var nextDy = 1;
        var nextMo = thisMonth + 1;
    } else {
        var nextMo = thisMonth;
    }
    if (nextMo === 13) {
        var nextMo = 1;
        var nextYr = thisYear + 1;
    } else {
        var nextYr = thisYear;
    }

    if (nextDy < 10) {
        nextDy.toString();
        var strDy = '0' + nextDy;
    } else {
        var strDy = nextDy.toString();
    }
    if (nextMo < 10) {
        nextMo.toString();
        var strMo = '0' + nextMo;
    } else {
        var strMo = nextMo.toString();
    }

    var strYr = nextYr.toString();
    var strDate = strYr + '' + strMo + '' + strDy;
    var tomDate = parseInt(strDate);
    return tomDate;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:18:48.783

您必须将**基本**参数传递给`parseInt()`：

```
var thisDay = parseInt(day, 10); 
```

如果您不这样做，则以“0”开头的字符串将被解释为八进制常量，而不是十进制。当然，“08”和“09”是无意义的八进制常数。第二个参数 (10) 告诉函数该字符串应被解释为以 10 为底的字符串，而不管前导零如何。

# c - 在 c 中使用 fread 时遇到问题

> ID：14361674
> 
> 赞同：2
> 
> 时间：2013-01-16T15:18:11.653
> 
> 标签：c, string, fread

我在弄清楚如何正确格式化 fread 语句时遇到了一些麻烦。下面的代码只是我练习的一些随机的东西。基本上它将信息填充到第一个数组（s）中，将“s”写入文件，然后将文件读入第二个数组（s2）。但是，我似乎无法以不出错或不返回垃圾的方式格式化 fread 语句。数组是 char 数据类型，因为如果我的理解是正确的，char 使用的内存比其他数据类型少。该实践代码的最终应用是用于数据压缩项目。

```
#include<stdio.h>
#include<string.h>

FILE *fp;
//file pointer

char s[56];
//first string

char s2[56];
//target string for the fread

int n=0;
//counting variable

int m=0;

int main (void)
{
    fp=fopen("test.bin", "w+");
    //open a file for reading and writing

    strcpy(s, "101010001101010");
    //input for the string

    for(n=0;n<56;n++)
    {
        if(s[n]==1)
            m=n;
        else if(s[n]==0)
            m=n;
    }
    printf("%d\n", m);
    //the above for loop finds how many elements in 's' are filled with 1's and 0's
    for(n=0;n<m;n++)
    {
        printf("%c", s[n]);
    }
    //for loop to print 's'

    fwrite(s, m, 1, fp);
    //writes 's' to the first file
    s2=fread(&s2, m, 1, fp);
    //an attempt to use fread...

    printf("\n\ns2\n\n");
    for(n=0;n<m;n++)
    {
        printf("%c", s2[n]);
    }
    printf("\n");
    //for loop to print 's2'
    fclose(fp);

    printf("\n\n");
    printf("press any number to close program\n");
    scanf("%d", &m);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:28:13.137

FILE 结构在文件中具有隐式查找位置。你从那个寻找位置读写。如果您想阅读您所写的内容，您需要通过调用将查找位置更改回文件的开头[`fseek()`](http://www.cplusplus.com/reference/cstdio/fseek/)。实际上，对于一个打开读写的文件，`fseek()`在读写切换时必须调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:28:58.760

函数的返回值`fread`是类型`size_t`。它是成功读取的元素数。（参考：[http](http://www.cplusplus.com/reference/cstdio/fread/) ://www.cplusplus.com/reference/cstdio/fread/ ）

不要将其分配给 s2。只需使用`fread(&s2, m, 1, fp);`

# ios - 如何在 iTunes Connect 中为应用内内容定义我们自己的价格等级？

> ID：14361680
> 
> 赞同：-3
> 
> 时间：2013-01-16T15:18:26.473
> 
> 标签：ios, in-app-purchase, itunes

我只是想知道我可以在 iTunes Connect 中修改 inapp 内容的价格等级。正如我们所知，有一个价格等级列表，如 0.99 美元、1.99 美元等。我想定价 1.45 美元、2.50 美元等。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:19:14.117

您只能使用苹果为您提供的价格等级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:45:56.330

查看 iTunes 商店的所有定价 - 一切都是为了简单。他们只有 3 个价格等级的歌曲（0.69 和 0.99。和 1.29），其他项目都是 99 美分增量。也可能与信用卡费用有关

# c# - C#：添加到 SomeClass 类型的列表

> ID：14361686
> 
> 赞同：1
> 
> 时间：2013-01-16T15:18:40.683
> 
> 标签：c#, list

我有这堂课：

```
public class Lockbox
{
    string lockbox { get; set; }
    int polling_interval { get; set; }
} 
```

在另一堂课中，我制作了一个类型密码箱列表：

```
var monitor_lockboxes = new List<Lockbox>(); 
```

现在如何将条目添加到列表中？我可以这样做吗？：

```
monitor_lockboxes.Add(...); 
```

但它不需要 2 个参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:20:01.320

> 但它不需要 2 个参数。

好吧，不，它不会。它需要*一个*类型的参数`Lockbox`。

听起来你想要这样的东西：

```
var newBox = new Lockbox { lockbox = "foo", polling_interval = 10 };
monitor_lockboxes.Add(newBox); 
```

当然，您可以在单个语句中完成 - 为了清楚起见，我只是将其分开。

（我还强烈建议您更改命名以遵循[.NET 约定](http://msdn.microsoft.com/en-us/library/vstudio/ms229002.aspx)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:20:33.603

以下将起作用：

```
monitor_lockboxes.Add(new Lockbox { lockbox = "Foo", polling_interval = 42 } ); 
```

这使用[Object Initializer](http://msdn.microsoft.com/en-us/library/bb397680%28v=vs.110%29.aspx)语法。为此，属性`Lockbox`必须是`public`.

另一种方法是提供一个构造函数来`Lockbox`获取属性的值：

```
public class Lockbox
{
    public Lockbox(string lockbox, int pollingInterval)
    {
        this.lockbox = lockbox;
        this.polling_interval = pollingInterval;
    }

    public string lockbox { get; set; }
    public int polling_interval { get; set; }
} 
```

现在你可以像这样使用它：

```
monitor_lockboxes.Add(new Lockbox("Foo", 42)); 
```

# wpf - MVVM 中视图模型的交互

> ID：14361687
> 
> 赞同：15
> 
> 时间：2013-01-16T15:18:41.973
> 
> 标签：wpf, mvvm, properties, viewmodel

我有一个遵循 MVVM 模式的 WPF 应用程序。到目前为止，该应用程序定义了两个视图和视图模型：

*   登录视图（模型）
*   项目视图（模型）

两个视图模型都需要访问其他视图模型的多个属性。

示例：
`LoginViewModel`有一个属性`ProjectList`。`ProjectsViewModel`也需要访问此属性。

这只是一个简单的例子。稍后将有几个`UserControls`都需要相互交互。

`UserControls`创建一个所有（视图）都设置为它们的巨大视图模型会更好`DataContext`吗？如果不是，那么所有不同的视图模型如何相互交互？

备注：这个问题与[这个](https://stackoverflow.com/questions/14357049/access-properties-from-one-view-model-in-another)
问题密切相关，但方法不同。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-16T15:26:51.083

[你绝对不应该制作一个巨大的“主视图模型”——这是一个与上帝对象](http://en.wikipedia.org/wiki/God_object)没有什么不同的反模式。

这里的关键思想是您的视图模型不需要访问*其他视图模型*的多个属性；相反，所有视图模型都需要访问*特定的信息*。

现在，您很可能在实例化时将此信息注入每个视图模型。不要这样做，而是为每个视图模型提供对*服务*的引用——通过属性和/或方法公开此信息的应用程序模块。如果信息本质上非常简单，则可以以标量值的形式公开，如果比这更复杂，则可以以模型的形式公开。

从示意图上看，这看起来像

```
/--------------\
|  ViewModelA  |
|              | <=======\
|              |         |
\--------------/         |  <--- information is pulled      /================\
                         +=========[model]===[model]======  |    Service     |
/--------------\         |                                  \================/
|  ViewModelB  |         |
|              | <=======/
|              |
\--------------/ 
```

该服务应在构造时[注入](http://en.wikipedia.org/wiki/Dependency_injection)视图模型（手动或通过 DI 容器，如果您正在使用）。每个视图模型应该只需要对服务的引用和足够的信息来告诉服务它对哪个模型感兴趣；然后它将从服务中请求该模型并基于此填充其“有趣”属性。

这种做事方式比简单地构建视图模型对象并在外部设置其属性更复杂，但它会让您的应用程序变得复杂而不会变得难以管理。

例如，如果有很多视图绑定在不同的视图模型上，并且这些视图模型以复杂的方式依赖于许多模型，那么一种理智的工作方式是：

1.  构造了一个视图/视图模型对
2.  viewmodel 从服务请求它需要知道的任何模型；它订阅服务公开的事件以让订阅者知道模型已更改
3.  通过数据绑定控件对模型执行更改
4.  视图调用视图模型上的“保存”命令
5.  作为响应，视图模型在服务上调用“保存此模型”方法
6.  服务持久化信息并发布“模型更改”事件（参见步骤 2）
7.  对同一模型感兴趣的其他视图模型知道模型已更改，并且可以查询服务以获取其新状态

如果一切都通过服务路由，这是可能的。想象一下保持一切同步需要什么 - 应对的唯一方法是将所有信息放入一个巨大的视图模型中并从其他所有内容中引用它。丑陋的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T15:32:38.767

Usually I do one of 4 things:

*   Make my ViewModels reference each other, and pass the property around. For example, `LoginViewModel` might set `ProjectsViewModel.ProjectList` on successful login. How you implement this depends on how your ViewModels are related to each other, and where logical points of connection would be.

*   Make an `ApplicationViewModel` which manages things like which page is current, and application-wide objects like the current user or current project list. It would handle transferring shared data to the ViewModels that needs it.

*   Use some kind of Event system to broadcast a message anytime an application-wide property changes, and have any ViewModel that's interested subscribe to receive those messages. The message typically contains the new object as well, so anyone subscribed to receive that message type has access to the new object. (I have a brief summary of Event Systems in my blog article [Communication between ViewModels with MVVM](http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/) if you're interested)

*   Depending on if any of the other options work better, I may consider creating a singleton to hold application-wide data instead. For example, if the User is set on Login and is accessed from many of my ViewModels, I may create a singleton to set the user on first login, and then all my ViewModels can access it.

The one thing I would *not* do is make one big ViewModel holding all available data. ViewModels should only contain the data specific to it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:28:31.160

您的模型应该包含项目列表之类的内容，或者让您能够访问它。ViewModel 只是作为模型和视图之间的一个层，让您有机会将不同的模型对象组合在一起并将它们塑造成视图可以轻松显示的形状并处理来自视图的命令（修改模型以响应）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T15:24:05.150

如果您使用某种依赖注入工具，您可以注入一个提供这些值的类，例如 IProjectService，它可以返回每个视图模型上的项目列表。

一个巨大的视图模型的想法听起来并不吸引人，视图模型之间通过访问彼此的公共属性的强耦合也没有。如果您想要视图模型之间的交互，例如添加项目时，请为您希望发生的每个事件使用发布/订阅模型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-01T09:19:50.737

创建一个基本视图模型，其中保留所有常见属性，为 BaseViewModel 创建单例并将该单例属性添加到所有视图模型中。所有 Viewmodel 将一次同步。

# angularjs - 为什么 AppCtrl 没有 $inject 但 MyCtrl1 在这个 AngularJS 示例中没有？

> ID：14361692
> 
> 赞同：0
> 
> 时间：2013-01-16T15:18:53.087
> 
> 标签：angularjs

我正在查看这个 angularjs/socket.io 示例，但我想知道为什么 AppCtrl 没有 $inject 行而 MyCtrl1 有？

控制器.js：

```
'use strict';

/* Controllers */

function AppCtrl($scope, socket) {
  socket.on('send:name', function (data) {
    $scope.name = data.name;
  });
}

function MyCtrl1($scope, socket) {
  socket.on('send:time', function (data) {
    $scope.time = data.time;
  });
}
MyCtrl1.$inject = ['$scope', 'socket'];

function MyCtrl2() {
}
MyCtrl2.$inject = []; 
```

请参阅：[https ://github.com/btford/angular-socket-io-seed/blob/master/public/js/controllers.js](https://github.com/btford/angular-socket-io-seed/blob/master/public/js/controllers.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:17:22.580

由于 AppCtrl 使用[依赖注入](http://docs.angularjs.org/guide/di)，它也应该使用 $inject 来防止缩小混淆。布赖恩可能只是忘了添加那行。

# ruby-on-rails - Rails 关联推送（集合<<）

> ID：14361696
> 
> 赞同：1
> 
> 时间：2013-01-16T15:18:59.233
> 
> 标签：ruby-on-rails, has-many, rails-activerecord

将实体推送到其父集合是否会导致加载集合？

例如：

```
Parent.childs << a_child 
```

parent.childs “数组” 现在加载了所有孩子还是只加载了“a_child”？即将一个SQL“选择* from childs where parent_id = ？” 语句会在添加到集合之前执行吗？

编辑：

[http://apidock.com/rails/v3.2.3/ActiveRecord/Associations/CollectionAssociation/concat_records](http://apidock.com/rails/v3.2.3/ActiveRecord/Associations/CollectionAssociation/concat_records)似乎在调用“insert_record”之前调用“add_target”，它将实体添加到@target数组......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:40:43.683

不（感谢上帝）！`Parent.childs`是一个代理，'<<' 只会触发创建/更新`a_child`

有关 Rails 关联方法如何工作的更多信息[？](https://stackoverflow.com/questions/1529606/how-do-rails-association-methods-work)

同样在associations/collection_associations.rb 的rails 评论中

> 您需要注意有关目标的假设：代理在需要它们之前不会从数据库中获取记录，但是使用 +build+ 创建的新记录会添加到目标中。因此，目标可能是非空的，并且仍然缺少等待从数据库中读取的子对象。如果您直接查看数据库，则不能假设这是整个集合，因为新记录可能已添加到目标等。

在我的控制台上快速检查确认那里没有加载孩子。

```
parent.children << child; nil 
```

=> 只有加载的父母和孩子....

# cookies - Zend 身份验证会话 Cookie

> ID：14361700
> 
> 赞同：0
> 
> 时间：2013-01-16T15:19:06.533
> 
> 标签：cookies, session-cookies, zend-auth, zend-session

我被困在一个常见的问题上，但我真的不知道如何摆脱。

浏览器不保留身份验证会话。这是我的设置。

“应用程序.ini”

```
resources.session.save_path = ROOT_DIR "/public/session"
resources.session.gc_maxlifetime = 864000
resources.session.remember_me_seconds = 864000 
```

“.htaccess”

```
php_value session.gc_maxlifetime 864000
php_value session.save_path /Users/user/mydomain.com/public/session/ 
```

“bootstrap.php”（_initSessionNamespaces 这是我调用的第一个方法）

```
protected function _initSessionNamespaces()
{
    $this->bootstrap('session');
    Zend_Session::start();
} 
```

“SigninController.php”

```
// set adapter
$dbAdapter = Zend_Db_Table::getDefaultAdapter();
$authAdapter = new Zend_Auth_Adapter_DbTable($dbAdapter);
$authAdapter->setTableName('user')
->setIdentityColumn('email')
->setCredentialColumn('password')
->setCredentialTreatment($salt)
->setIdentity($values['email'])
->setCredential($values['password']);

$auth = Zend_Auth::getInstance();
$result = $auth->authenticate($authAdapter);

if ($result->isValid()) {
    $user = $authAdapter->getResultRowObject();
    $auth->getStorage()->write($user);

    // init session cookie
    $session_auth = new Zend_Session_Namespace('identity');
    $session_auth->setExpirationSeconds(864000);

    return true;
} 
```

在目录中创建的会话文件是这样的：

```
language|a:1:{s:6:"locale";s:2:"en";}identity|a:2:{s:14:"filterDistance";i:5;s:5:"email";s:15:"test@test.com";}Zend_Auth|a:1:{s:7:"storage";O:8:"stdClass":20:{s:2:"id";s:20:"8c3b329b0f3d71f4566c";s:12:"date_created";s:19:"2012-12-19 20:30:29";s:12:"date_updated";s:19:"2013-01-12 00:02:19";s:14:"date_lastlogin";s:19:"2013-01-16 15:30:01";s:7:"site_id";s:4:"this";s:14:"site_lastlogin";s:4:"this";s:6:"active";s:1:"1";s:4:"role";s:5:"admin";s:8:"username";s:5:"test";s:8:"password";s:40:"63fb7f1941083ca0284481d8ad557e2b0c5bf5f4";s:4:"salt";s:40:"70be1adbff1c0bd6f82sc1fcaf6d2fef3c869b6c";s:10:"first_name";s:5:"pippo";s:9:"last_name";s:0:"";s:5:"email";s:15:"test@test.com";}}__ZF|a:1:{s:9:"Zend_Auth";a:1:{s:3:"ENT";i:865358347332;}} 
```

通常在控制器中我以这种方式调用用户信息

```
$auth = Zend_Auth::getInstance();
if ($auth->hasIdentity()) {
    $this->info = $auth->getIdentity();
} 
```

当我重新启动浏览器时，它会创建一个新的空会话文件，如下所示：

```
language|a:1:{s:6:"locale";s:2:"it";} 
```

我被困在这里2天......我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:06:35.817

我解决了它在application.ini中添加这个

```
resources.session.cookie_lifetime = 864000 
```

我认为这可以帮助某人:)

# c# - 使用列表创建树节点

> ID：14361708
> 
> 赞同：0
> 
> 时间：2013-01-16T15:19:40.927
> 
> 标签：c#, list, tree, tree-nodes

我在这个结构中有一个表

```
ListA   labelName
  1      Colorado
  1      Wyoming
  1      Illinois
  2      New York
  2      Ohio 
```

我正在尝试创建一棵树，其中如果 LISTA = 1，它会位于一个名为“header one”的节点下，而科罗拉多州、怀俄明州、伊利诺伊州则作为它的叶子，并且值“2”......通过这样做，我得到了 3“标题一”节点，而不是将所有这三个节点都放在一个...

![在此处输入图像描述](../Images/e1c192bba64bbe5806c6fe7afe2d6f46.png)

```
SqlCommand cmd = con.CreateCommand();

        comd.CommandText = "SELECT * FROM myTable";
        con.Open();
        SqlDataReader reader = comd.ExecuteReader();
        while (reader.Read())
        {
            City MyData = new City();

            MyData.ListA = reader["ListA"].ToString().Trim();
            MyData.labelName = reader["labelName"].ToString().Trim();
            giveData.Add(MyData);
        }

        int count = 1;

        List<TreeNode> myNode = new List<TreeNode>();
        foreach (City MyData in giveData)
        {
            // 1st foreach
                if (MyData.ListA != "1")
                {

                    TreeNode treeNode = new TreeNode();
                    treeNode.id = count++;
                    treeNode.name = "Header One";
                    treeNode.leaf = false;

                    List<TreeNode> Level1 = new List<TreeNode>();
                    foreach (City labelName  in giveData)
                    {
                        if (labelName.ListA == "1")
                        {// 2nd foreach
                            TreeNode node1 = new TreeNode();
                            node1.id = count++;
                            node1.name = labelName.labelName;
                            node1.leaf = true;

                            Level1.Add(node1);
                        }
                    }

                    treeNode.children = Level1;
                    myNode.Add(treeNode);
            }
            else if (MyData.ListA != "2")
                {

                    TreeNode treeNode = new TreeNode();
                    treeNode.id = count++;
                    treeNode.name = "Header Two";
                    treeNode.leaf = false;

                    List<TreeNode> Level1 = new List<TreeNode>();
                    foreach (City labelName  in giveData)
                    {
                        if (labelName.ListA == "2")
                        {// 2nd foreach
                            TreeNode node1 = new TreeNode();
                            node1.id = count++;
                            node1.name = labelName.labelName;
                            node1.leaf = true;

                            Level1.Add(node1);
                        }
                    }

                    treeNode.children = Level1;
                    myNode.Add(treeNode);
            }
        }
        return JsonConvert.SerializeObject(myNode); 
```

处理此问题的最佳方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:26:44.443

您需要做的是将数据分组到`ListA`.

```
var groups = giveData.GroupBy(state => state.ListA);

foreach(var group in groups)
{
    //add header to treeview
    string header = group.Key;

    foreach(var state in group)
    {
        //add this state as a child of the group you just added
    }
} 
```

我还建议创建一个查找来帮助您将`ListA`数字映射到它的文本表示：

```
var headerLookup = new Dictionary<string, string>()
{
    {"1", "Header One"},
    {"2", "Header Two"},
    {"3", "Header Three"}
}; 
```

这将允许您执行以下操作：

```
string headerText = headerLookup[group.Key]; 
```

# .net - MVC 3 设置 uiCulture 不起作用

> ID：14361709
> 
> 赞同：3
> 
> 时间：2013-01-16T15:19:41.413
> 
> 标签：.net, asp.net-mvc, globalization

我在 C# 中使用 MVC3。我在 Web.Config 中添加了这段代码，目的是设置英国格式的格式。

```
....
        <globalization uiCulture="en-GB" culture="en-GB"/>
    </system.web> 
```

不幸的是，文本仍然以美国格式显示。你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-03T15:20:43.440

这在“[基于链接 MVC4 改变文化](https://stackoverflow.com/questions/15108524/change-culture-based-on-a-link-mvc4)”一文中得到了回答。您需要从 BaseController 继承您的 Controller，覆盖 BaseController 的 Initialize 方法，并使用 cookie。这不是我的代码，但如果链接中断：

```
protected override void Initialize(System.Web.Routing.RequestContext requestContext)
{
    HttpCookie languageCookie = System.Web.HttpContext.Current.Request.Cookies["Language"];
    if (languageCookie != null)
    {
        Thread.CurrentThread.CurrentCulture = new CultureInfo(languageCookie.Value);
        Thread.CurrentThread.CurrentUICulture = new CultureInfo(languageCookie.Value);
    }
    else
    {
    //other code here
    }

    base.Initialize(requestContext);
} 
```

和

```
<li>@Html.ActionLink("Eng", "ChangeCulture", "Home", new { lang="en-US"}, new { @class = "languageSelectorEnglish" })</li> 
```

和

```
public void ChangeCulture(string lang)
{
    Response.Cookies.Remove("Language");

    HttpCookie languageCookie = System.Web.HttpContext.Current.Request.Cookies["Language"];

    if (languageCookie == null) languageCookie = new HttpCookie("Language");

    languageCookie.Value = lang;

    languageCookie.Expires = DateTime.Now.AddDays(10);

    Response.SetCookie(languageCookie);

    Response.Redirect(Request.UrlReferrer.ToString());
} 
```

# mysql - 根据属性计数从表中删除

> ID：14361712
> 
> 赞同：3
> 
> 时间：2013-01-16T15:19:46.627
> 
> 标签：mysql, sql, sql-delete

假设我在表 x 中有一个名为 source 的列。个别条目可以像；

```
Id   c1   c2      source ...
1    a     b      something
2    b     a      something  
3    a     b      somethingelse
4    c     a      somethingelse
5    a     b      something
6    b     c      something 
```

如何删除源中相同元素少于 3 个的条目？例如，由于源值**somethingelse**出现 2 次，我需要删除**了 somethingelse的所有条目。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:21:58.307

```
DELETE  a
FROM    tableName a
        INNER JOIN
        (
            SELECT  source
            FROM    tableName
            GROUP BY SOURCE
            HAVING COUNT(*) < 3
        ) b ON a.source = b.source 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/a663d/1)

为了获得更快的性能，还需要做一件事，**将 INDEX 添加**到 column `SOURCE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:22:25.120

大约像这样的东西可以完成这项工作

```
DELETE FROM TABLE_T1 WHERE ID IN (
   SELECT ID FROM TABLE_T1 GROUP BY SOURCE HAVING COUNT(*) < 3
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:25:28.987

```
DELETE  id
FROM    yourtable a
JOIN    (
        SELECT  *
        FROM    yourtable
        GROUP BY
                source
        HAVING  COUNT(*) > 3
        ) b
ON      a.id = b.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:26:21.057

```
DELETE FROM x WHERE id IN
( SELECT id FROM
  ( SELECT id, COUNT(source) AS n
      FROM x GROUP BY source 
      HAVING n < 3
  )
) 
```

# c# - IE兼容模式和页面发布的远景

> ID：14361714
> 
> 赞同：0
> 
> 时间：2013-01-16T15:19:51.047
> 
> 标签：c#, javascript, internet-explorer-8

我有一个简单的 asp.net 页面，其中包含一个文件上传元素。当我处于 IE 兼容模式时，页面可以正常发回服务器。但是，如果我出于某种原因禁用兼容模式，我的代码永远不会到达服务器。它在客户端代码的某个地方失败了。

我知道这不是很多事情要做，但有没有人知道我可以看看发生了什么？

# iphone - 使用 CALayer 创建加载屏幕

> ID：14361716
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:19:54.993
> 
> 标签：iphone

我想在我的应用程序从网络服务器加载多个内容以通知用户时添加一个简单的加载屏幕。为了获得圆角和漂亮的边框，我使用了 CALayer 对象。但是当我想向这一层添加内容时，它不起作用。我只能添加图像和其他 CALayer 对象，但我想添加 UILabel 或 UIView。这可能吗？我查看了一些教程和苹果文档，但找不到解决方案。有没有简单的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:23:53.427

UIKit 中的每个视图都由一个层支持，因此您可以拥有两全其美的力量。使用带有 UILabel 的 UIView 作为文本，并通过 layer 属性设置视图支持层的角半径

```
myView.layer.cornerRadius = 10.0; 
```

# android - Android设备之间的距离（非常准确）

> ID：14361717
> 
> 赞同：2
> 
> 时间：2013-01-16T15:19:56.657
> 
> 标签：android, bluetooth, gps, location

我正在构建一个应用程序，它需要检查某个设备何时非常靠近另一个设备（非常接近我的意思是 5-10 米）。我认为使用蓝牙RSSI是可能的。很多人建议使用声音分析，但这是不可能的，因为我计划在同一个地方使用许多这样的系统，所以会有点混乱。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:38:58.553

精度要求排除了 GPS - 因此您唯一的选择是测量设备信号传播的延迟。我会说网络/蓝牙不适合这种情况，因为光速和网络堆栈延迟是不可预测的。这意味着您唯一的选择将是合理的。5-10 米意味着 10-20 毫秒的声速延迟，所以这应该足够了，但实施起来会很棘手。

要与多个设备一起工作，您必须实现一些协议，如 CSMACD 和设备之间的时间同步 - 这是可能的，但很棘手（您必须查看如何通过卫星同步时间以进行射电天文）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:50:11.963

我建议使用 RSSI :-)。如果您想测量黑白 5-10 米的距离，这是有道理的。

# jquery - jQuery UI 对话框 + 验证 + 编号

> ID：14361719
> 
> 赞同：0
> 
> 时间：2013-01-16T15:20:03.723
> 
> 标签：jquery, jquery-ui, jquery-validate

我想用 jQuery 验证函数验证一个 jQuery UI 对话框，但是我遇到了一些问题。我想要一个简单的例子来工作，我验证输入字段的文本 - 该字段应该包含数据，它应该代表一个数字。请看下面的代码。我怎么能做到这一点？

```
<head>
    <script src="../Scripts/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="../Scripts/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.validate.min.js" type="text/javascript"></script>
    <link href="../Styles/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" type="text/css" />
<style type="text/css">
    #field { margin-left: .5em; float: left; }
    #field, label { float: left; font-family: Arial, Helvetica, sans-serif; font-size: small; }
    br { clear: both; }
    input { border: 1px solid black; margin-bottom: .5em;  }
    input.error { border: 1px solid red; }
    label.error {
        background: url('http://dev.jquery.com/view/trunk/plugins/validate/demo/images/unchecked.gif') no-repeat;
        padding-left: 16px;
        margin-left: .3em;
    }
    label.valid {
        background: url('http://dev.jquery.com/view/trunk/plugins/validate/demo/images/checked.gif') no-repeat;
        display: block;
        width: 16px;
        height: 16px;
    }
</style>
<script type="text/javascript">
    var validationNumber = null;
    function GetNumberValidator() {
        return $("#FormToValidate").validate({
            rules: {
                TextToValidate: {
                    required: true,
                    digits: true
                }
            }
        });
    }
    $(function () {
        $("#button1").button();
        $("#dialog-message").dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                Ok: function () {
                    if (validationNumber.element("#TextToValidate")) {                  
                        $(this).dialog("close");
                    }
                }
            }
        });
    });
    $().ready(function () {
        $("#button1").click(function () {
            $("#dialog-message").dialog("open");
        }
        );
        validationNumber = GetNumberValidator();
    });        
</script>
<title>Dialog Number</title>
</head>
<body>
<button id="button1">A button element</button>    
<form id="FormToValidate" action="DialogNumber.html" method="post">   
<div id="dialog-message" title="Input">
    <input id="TextToValidate" name="TextToValidate" type="text" />
    <div id="ErrorMessage"></div>
</div>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:54:03.917

一个简单的例子可能有这样的html

```
<body>
    <a href="#">open the dialog</a>
    <div id="dialog">
        <form>
         <input name="TextToValidate" class="required number" />
         <input type="submit" />
        </form>
    </div>
</body> 
```

以及您的文档就绪功能中这样的脚本

```
$('form').validate();
$("#dialog").dialog({ autoOpen: false });
$('a').click(function () {
    $("#dialog").dialog("open");
}); 
```

就是这样，或者如果您的表单无效，您可能需要挂钩 beforeClose 事件来做一些事情：

```
$("#dialog").dialog({ autoOpen: false,
    beforeClose: function () {
        if (!$('form').valid()) {
            alert('form not valid');
            return false;
        }
    }
}); 
```

小提琴在这里 - [http://jsfiddle.net/Jj9Pt/](http://jsfiddle.net/Jj9Pt/)

# android - 在 android 首选项中应用自定义主题

> ID：14361721
> 
> 赞同：3
> 
> 时间：2013-01-16T15:20:08.700
> 
> 标签：android, android-listview, themes, preference

我想在我的偏好屏幕中做一些事情。

1.  将自定义字体应用于标题
2.  更改一些偏好图标
3.  选择（或触摸？）首选项时更改背景颜色和字体颜色

首先，我从 CheckBoxPreference 开始。要应用自定义字体，我创建了 myCheckBoxPreference。

```
public class MyCheckBoxPreference extends CheckBoxPreference {
    public String robotoRegular = "fonts/Roboto-Regular.ttf";

    public MyCheckBoxPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

    }

    public MyCheckBoxPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyCheckBoxPreference(Context context) {
        super(context);
    }

    @Override
    protected View onCreateView(ViewGroup parent) {
        View view = super.onCreateView(parent);

        TextView titleView = (TextView) view.findViewById(android.R.id.title);
        Typeface tf = Typeface.createFromAsset(view.getContext().getAssets(), robotoRegular);
        titleView.setTypeface(tf);

        return view;

    }
} 
```

它工作正常。

要更改复选框图像，我制作了一个主题并应用它。

在我的styles.xml

```
<style name="MyTheme" parent="Theme.Sherlock.Light">
    <item name="android:checkboxStyle">@style/MyCheckbox</item>
</style>
<style name="MyCheckbox" parent="android:Widget.CompoundButton.CheckBox">
    <item name="android:button">@drawable/btn_check</item>
</style> 
```

为了改变偏好列表的背景颜色，我还做了一个主题并应用它。

```
<style name="MyTheme" parent="Theme.Sherlock.Light">
    <item name="android:checkboxStyle">@style/MyCheckbox</item>
    <item name="android:listViewStyle">@style/MyListView</item>
</style>

<style name="MyListView" parent="android:Widget.ListView.White">
    <item name="android:listSelector">@drawable/list_selector_background</item>
</style> 
```

它也可以正常工作。

但我被困在动态更改字体。我尝试使用主题

```
<style name="MyTheme" parent="Theme.Sherlock.Light">
    <item name="android:textColorPrimary">#717171</item>
    <item name="android:textColorPrimaryInverse">#FFFFFF</item>
    <item name="android:textColorPrimaryDisableOnly">#dcdcdc</item>    
</style> 
```

但没有奏效。

我尝试在 MyCheckBoxPreference 中使用 onTouchListener。现在 MyCheckBoxPreference.java 中的 onCreateView 变成如下

```
@Override
protected View onCreateView(ViewGroup parent) {
    View view = super.onCreateView(parent);

    TextView titleView = (TextView) view.findViewById(android.R.id.title);
    Typeface tf = Typeface.createFromAsset(view.getContext().getAssets(), robotoRegular);
    titleView.setTypeface(tf);
    titleView.setTextColor(0xFF717171);

    view.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            TextView titleView = (TextView) v.findViewById(android.R.id.title);
            int actionMasked = event.getActionMasked();
            switch (actionMasked)
            {
                case MotionEvent.ACTION_DOWN:
                {
                    titleView.setTextColor(0xFFFFFFFF);
                    break;
                }
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_CANCEL:
                {
                    titleView.setTextColor(0xFF717171);
                    break;
                }
                default:
                {
                    Log.d("MyCheckBoxPreference", "action" + event);
                }
            }

            return false;
        }
    });

    return view;

} 
```

起初，它似乎工作，但它有一个问题。如果我触摸一个项目并将手指移到另一个项目，字体颜色将保持为白色 ( `0xFFFFFFFF`)。在该代码中，标题文本颜色首先设置`#717171`在`onCreateView`. When the list item is selected the color changed in onTouch with `MotionEvent.ACTION_DOWN`. 当我取消选择该项目`MotionEvent.ACTION_UP`或`MotionEvent.ACTION_CANCEL`将字体颜色设置为`#717171`. 但是，当我取消选择该项目时，字体颜色在`onCreateView`. 我认为因为偏好发生了变化，系统想要再次创建视图。

这仅在切换首选项时有效。正如我上面提到的，当我触摸一个项目并将手指移动到另一个项目时，字体颜色保持为白色，因为偏好状态保持不变并且`MotionEvent.ACTION_CANCEL`未达到。

如果我在 OnTouchListener 中返回 true`MotionEvent.ACTION_UP`并`MotionEvent.ACTION_CANCEL`到达但它消耗了事件并且背景颜色不会改变。

这是我来到这里的故事。

**我通过制作自定义list_item.xml**在 ListView 中应用样式并使用我的**listview_item_selector.xml**设置 textColor但在首选项中，它使用默认 ListView，所以我不知道该怎么做。

我应该怎么办？我必须自定义所有首选项吗？任何建议都会很棒。谢谢。

# asp.net-mvc - 发布 TFS 2012 升级项目无法编译

> ID：14361728
> 
> 赞同：0
> 
> 时间：2013-01-16T15:20:38.760
> 
> 标签：asp.net-mvc, tfs, visual-studio-2012

我刚刚将 TFS 从 2012 RC 更新到 2012 RTM。安装顺利，一切都按原样设置。但是，现在当我签入文件并开始构建过程时，我不断收到与缺少 System.EnterpriseServices.dll 相关的错误。这是完整的错误：

```
CSC: Metadata file 'c:\Builds\1\MySite\bin\System.EnterpriseServices.dll' could not be opened -- 'Error importing module 'System.EnterpriseServices.Wrapper.dll' of assembly 'c:\Builds\1\MySite\bin\System.EnterpriseServices.dll' -- The system cannot find the file specified. ' 
```

是的，我已经验证该文件在 bin 中，并且我已经删除然后重新添加了它。我在这里怀疑的一件事是，我看到新的 TFS 安装将 .NET 4.5 添加到服务器，在此之前它不存在......也许这是一个可能的原因？该应用程序是一个设置为 .NET 4.0 的 C# MVC4 网站。

我还在 TFS 安装上运行了“修复”并重新安装了 .NET 4.5。该项目在本地编译和运行完美。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:19:27.240

大多数自定义 dll 问题来自它们不在正确的位置，因此请尝试将任何自定义 dll 放在构建服务器上正确的位置，请参阅我的答案。

[使用升级模板将 TFS 2008 构建定义升级到 TFS 2012 构建定义，排队构建时出错](https://stackoverflow.com/questions/14387168/upgraded-tfs-2008-build-definitions-to-tfs-2012-build-defs-using-upgrade-templat/14389034#14389034)

# java - 如何为 WebService 创建端点？

> ID：14361733
> 
> 赞同：5
> 
> 时间：2013-01-16T15:21:02.613
> 
> 标签：java, web-services, soap, wsdl, cxf

如何为 Web 服务创建端点？我是 Web 服务世界的初学者。

我已经获得了 WSDL，我想创建一个基于该 WSDL 的 Web 服务。我使用 Apache CXF 生成客户端存根。将其作为服务进行测试的下一步是什么？

如何创建端点？

如何在本地模拟 WSDL soapbind 地址并对其进行测试？

* * *

让我澄清一下这个问题。似乎有混乱。感谢@Buhake Sindi 指出。

我已经获得了 WSDL 并通过在 Eclipse 中使用 Apache CXF 框架生成了客户端存根。我需要测试 WebService 客户端代码是否正常工作。现在如何测试这种方法？我的 WSDL URL 目前不工作。

如何测试我的客户端存根（来自生成的 Impl 类）？

我是否需要创建任何端点来模仿 WSDL URL（现在没有运行）？

希望问题现在很清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:47:14.287

即使不创建 Web 服务实现，您也可以测试客户端代码。你知道`SoapUI`工具吗？使用它来导入`wsdl`以创建项目。

它为您提供了与请求一起创建模拟服务的选项。您可以运行该模拟服务并针对该服务测试您的客户端，而无需编写任何服务代码。我一直用它来测试。您还可以创建`Success`、`Failure`和`Fault`响应来测试不同的场景。模拟服务还将向您显示该服务收到的请求。这个功能就像一个魅力。如果您在 SoapUI 中设置模拟服务时需要帮助，请告诉我。

您可以点击此链接开始： http: [//www.soapui.org/Getting-Started/mock-services.html](http://www.soapui.org/Getting-Started/mock-services.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:22:35.813

您从 CXF 运行 wsdl2java 以生成服务器端存根。然后在存根中填写代码。然后设置要部署的服务。

我不知道这是否会创建模拟服务的机制。你希望他们做什么？

查看来自 CXF 发行版的样本，尤其是 wsdl-first 样本。

更好的方法是使用 JMock 模拟客户端 SEI，而不是尝试提供虚拟服务。

# angularjs - angularjs ng-grid 保持选择更新

> ID：14361735
> 
> 赞同：3
> 
> 时间：2013-01-16T15:21:05.610
> 
> 标签：angularjs, angular-ui, ng-grid

我正在尝试使用该`ng-grid`设置，但遇到以下问题。

我显示的数据变化非常频繁，每 5 秒左右。但是没有很多新数据被添加到列表中。

当我将数据设置到 ng-grid 时，用户可以开始查看数据。但是当我在大约 5 秒后更新数据时，用户所做的选择和分组丢失了。

[http://plnkr.co/edit/eK1aeRI67qMROqDUtPnb](http://plnkr.co/edit/eK1aeRI67qMROqDUtPnb)

无论如何要保留选择和/或分组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:17:06.933

您将不得不在 for 循环中遍历并合并数据。如果您替换整个数组，您将替换对象引用，因此您将丢失所做的任何更改。

另一种选择是将您的选择保留在不同的数组或字典中，然后在替换数组后重新映射您的属性。请注意，您将需要使用引用类型，以便更改保留到您的选择数组。

就像[伪代码]：

```
// a dictionary of reference types (IMPORTANT that they are objects!)
// to hold selection data.
var selections = {
  'Name1' : { value: 'selection' },
  'Name2': { value: 'selection2' }
}

$scope.getMyData = function () {    
    // do whatever to get your data here.
    $scope.myData = [
       { name: 'Name1' },
       { name: 'Name2' }
    ];

    // update your objects in your array. 
    for(var i = 0; i < $scope.myData.length; i++) {
       var data = $scope.myData[i];
       var selection = selections[data.name];
       if(selection) {
           data.selection = selection;
       }
    }    
};

// initial load
$scope.getMyData();

// your test interval
setInterval(function () {
    $scope.$apply(function (){
       $scope.getMyData();
    });
}, 5000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T00:16:34.790

我们将在下一个版本中添加一个 primaryKey 选项，该选项将允许网格关闭它而不是引用。

# java - 解析 CDATA 元素内的数据

> ID：14361736
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:21:07.123
> 
> 标签：java, xml, xml-parsing

我需要解析一个看起来像这样的 XML 文件

```
1.<?xml version="1.0" encoding="UTF-8"?>
2.<Root>
3.<Record>
4.<in><![CDATA[<?xml version="1.0" encoding="UTF-8"?><XML><Attribute AttrID="A">Test</Attribute>-<Attribute AttrID="B"> <![CDATA[Aap Noot Mies]]> </Attribute>]]></XML></in>
5.<out><![CDATA[]]></out>
6.</Record>
7.</Root> 
```

解析第 4 行时出现错误是否有任何方法可以在 xml 文档的 CDATA 部分中转义 CDATA 结束标记 ( ]]> )。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:25:17.303

您的输入格式不正确有几个错误我认为您需要修复生成的任何内容以生成更像

```
<?xml version="1.0" encoding="UTF-8"?>
<Root>
<Record>
<in><![CDATA[<?xml version="1.0" encoding="UTF-8"?><!-- - --><XML><Attribute AttrID="A">Test</Attribute>-<Attribute AttrID="B"> <![CDATA[Aap Noot Mies]]<![CDATA[> </Attribute></XML>]]></in>
<out><![CDATA[]]></out>
</Record>
</Root> 
```

请注意，外部 CDATA 不需要`<![CDATA[`第`<!CDATA[`一次使用`]]>`需要引用（例如，通过停止和启动外部 CDATA 部分，如此处）。外部`]]>`需要在之后移动，`</XML>`以便引用元素的结尾和开头。

这使得文件在技术上格式良好，尽管具有名称`XML`（或通常以`xml`大写或小写开头）的元素被 W3C*保留*用于 XML 相关规范，并且不应在用户 XML 文件中使用，除非它是特定元素或属性（如`xmlns`W3C 定义的）

此外，我在 XML 声明之后的破折号周围添加了一个（引用的）注释，就好像该 CDATA 部分已被提取并制作成一个 XML 文档，它会使生成的文档格式不正确，因为之前只允许空格或注释和 PI第一个元素。

# python - 使用 python GAE 设置 i18n：importError No module named babel

> ID：14361740
> 
> 赞同：1
> 
> 时间：2013-01-16T15:21:30.983
> 
> 标签：python, google-app-engine, webapp2

[GAE 的 webapp2_extra.i18n 无法在 MacOSX 上导入 babel](https://stackoverflow.com/questions/10898491/gaes-webapp2-extra-i18n-cant-import-babel-on-macosx) 我按照上面的帖子在文件路径 /lib 下添加了 babel 和 pytz 库。

但是当我打电话时`from webapp2_extras import i18n`，我仍然得到`ImportError: No module named babel`

有谁知道怎么了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-22T14:13:56.780

将这些库包含到您的项目中，理想的是制作一个符号

# javascript - ECMAScript 5.1 规范不正确？日期构造函数日期/时间格式解析为 UTC

> ID：14361741
> 
> 赞同：1
> 
> 时间：2013-01-16T15:21:30.987
> 
> 标签：javascript, date, datetime, ecmascript-5, iso8601

根据维基百科的[ISO-8601](http://en.wikipedia.org/wiki/ISO_8601/ "ISO-8601")文章（我知道，不好的来源）...

> 如果没有给出带有时间表示的 UTC 关系信息，则假定时间为本地时间。

所以，例如..给定：

*   var a = Date.parse("2012-03-21");
*   var b = Date.parse("2012-03-21T00:00");
*   var c = Date.parse("2012-03-21T00:00Z");

我希望“a”和“b”是本地时间（浏览器的时区），而“c”是 UTC。但是，a、b 和 c 都是等价的 (1332288000000)。所有值都被解析为 UTC。

ECMAScript 规范也明确说明了这一点：

> 15.9.1.15 日期时间字符串格式
> 
> 缺席时区偏移的值为“Z”。

为什么会出现这种差异？维基百科不正确还是 ECMAScript 规范不正确？如何将 ISO-8601 字符串解析为浏览器中的本地时间（不知道浏览器的时区）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-18T00:08:37.827

是的，ES5.1 是不正确的。

ECMAScript 6 草案现在说“如果不存在时区偏移，则日期时间将被解释为本地时间。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T01:46:16.313

> 如何将 ISO-8601 字符串解析为浏览器中的本地时间（不知道浏览器的时区）？

使用`toLocaleString`方法来做到这一点：

```
var foo = new Date("2012-03-21").toLocaleString()
var bar = new Date("2012-03-21T00:00").toLocaleString()
var baz = new Date("2012-03-21T00:00Z").toLocaleString() 
```

**参考**

*   [日期和时间格式](http://www.w3.org/TR/NOTE-datetime)

# reporting-services - SSRS 2012 中的一份报告中的多个数据集

> ID：14361742
> 
> 赞同：0
> 
> 时间：2013-01-16T15:21:31.380
> 
> 标签：reporting-services, dataset, reporting, datasource

我试图在 SSRS 2012 中包含两组数据。在我的数据源（称为 DS）中，我正在提取两个数据集 - 我们将它们称为 OfficeActivity 和 Transactions。两个数据集都与另一个数据集没有任何数据关系。Transactions 数据集显示在表格中，而 OfficeActivity 数据集将用于填充标题中的某些字段 - 例如“Total Sales: $XXXXX.XX”

当我创建一个新的 SSRS 项目并使用向导时，我可以毫无问题地创建 Transactions 表，并且它运行顺利。问题是当我尝试包含 OfficeActivity 数据时。

在“报告数据”窗格中，我右键单击我的 DS 数据源并选择“添加数据集...”。我为新数据集命名，选择 DS 作为数据源，然后选择可用数据集下的 OfficeActivity 数据集。结果如下所示：

![在此处输入图像描述](../Images/6894485a68565d21225ac224cedd53aa.png)

报告数据窗格现在如下所示：

![在此处输入图像描述](../Images/6c09c2bf356a382ca6524e050a036020.png)

但是，当我尝试运行报告时，出现以下错误：

```
A data source instance has not been supplied for the data source 'dsOA'. 
```

任何人都可以就为什么这不起作用提供任何指导吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:11:57.740

对我来说，这看起来像是向导中的一个可能的错误。您是否尝试过编辑 dsOA 数据集的属性并再次设置数据源属性？

# wolfram-mathematica - 作为模块参数的函数

> ID：14361747
> 
> 赞同：2
> 
> 时间：2013-01-16T15:21:51.240
> 
> 标签：wolfram-mathematica

如何使用数学函数作为模块参数

如：

```
PersonalPlot[fun0_, var0_, min0_, max0_] :=
 Module[{fun = fun0, var = var0 , min = min0, max = max0},

   (*this is incorrect*)
   fun = fun[var_];

   Plot[fun, {var, min, max}]
 ]

PersonalPlot[x^2,x,0,3]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:56:27.597

你是对的，这种说法是不正确的。Mathematica 将其评估为类似

```
x^2[x] 
```

当你打电话时`PersonalPlot`，评估结果是，嗯，用`x to the power of 2 of x`没有多大意义的话。有很多方法可以解决这个问题。最简单的方法是完全省去一个模块并定义：

```
PersonalPlot1[fun0_, var0_, min0_, max0_] := Plot[fun0, {var0, min0, max0}] 
```

你会这样称呼它：

```
PersonalPlot1[x^2, x, 0, 3] 
```

请注意，这样的调用`PersonalPlot1[x^2, y, 0, 3]`会产生一个空图，因为传入的函数中的变量与第二个参数不是同一个变量。继续阅读。

如果您想定义一个将函数作为参数的模块，那么这是一种方法：

```
PersonalPlot2[fun0_, var0_, min0_, max0_] := 
 Module[{fun = fun0, var = var0, min = min0, max = max0},
  Plot[fun[var], {var, min, max}]] 
```

你会这样称呼

```
PersonalPlot2[#^2 &, x, 0, 3] 
```

笔记：

*   传入函数的函数是纯函数。如果您还不熟悉 Mathematica 的纯函数，现在是查阅文档相关部分的好时机。
*   这明确告诉`Plot`命令`fun[var]`在您指定的范围内进行评估。
*   您的局部变量并不是绝对必要的，因为您的函数通过副作用工作，产生一个图而不是操纵（副本）传递给它的参数。您可以将其简单地重写为：

    ```
    PersonalPlot2b[fun0_, var0_, min0_, max0_] := Module[{},
      Plot[fun0[var0], {var0, min0, max0}]] 
    ```

另一种可能性是删除表示传递给函数的变量输入的参数`PersonalPlot`，如下所示：

```
PersonalPlot3[fun0_, min0_, max0_] := Module[{x},
  Plot[fun0[x], {x, min0, max0}]] 
```

你会这样称呼

```
PersonalPlot3[#^2 &, 0, 3] 
```

在这个版本中，我`x`将. 这避免了由于函数的参数使用不同的名称（纯函数没有参数名称）和 ; 的第二个参数而导致的错误。现在已经放弃了。`Module``x``PersonalPlot`

可能还有其他几种有用的方法可以将参数传递给函数，无论这些函数是否使用模块。

**编辑**

我认为，我们大多数使用 Mathematica 一段时间的人都不认为`#^2&`这是要避免的事情。如果你不喜欢它，你可以使用更明确的语法，像这样：

```
fun1 = Function[x,x^2] 
```

然后你可以像这样传递

```
PersonalPlot[fun1,0.0,4.0] 
```

通过使用这种方法，您可以通过要求传入正确的类型来使您的函数更不容易出错，就像这样

```
PersonalPlot[fun_Function, min_Real, max_Real] := ... 
```

但这真的取决于你。

我不知道`Plot`它是怎么做的，我必须查看文档。

# javascript - 从 url 或文件系统读取文件到 javascript 中的变量

> ID：14361748
> 
> 赞同：0
> 
> 时间：2013-01-16T15:21:51.437
> 
> 标签：javascript, file-io

我正在尝试从计算机上的文件中读取文件并将其存储在变量中。我目前正在尝试：

```
var fr = new FileReader;

fr.onload = function() {

    //variable to hold file
    var data = fr.result;

    var c=document.getElementById("cvs");
    var ctx=c.getContext("2d");
    ctx.drawImage(img,0,0,200,180);
};

fr.readAsDataURL("encryptedImage"); 
```

这不起作用。我需要这样做才能解密文件系统上的加密图像。我已经关闭了安全性，因此可以从浏览器中读取我的文件系统。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:52:25.020

从这里看起来您想通过将字符串传递给 readAsArrayBuffer() 来加载本地文件，但它期望一个 blob 或文件对象。该文件可以通过浏览器文件对话框加载。步骤是：选择文件，通过 fileReader asArrayBuffer 或 asDataURL 或 asBinaryString 加载文件...并在代码中操作或使用数据。

对于此示例，它从本地文件创建一个图像并将其绘制到画布上（但是，如果它是正确的 mime 类型“image.*”）。

我不确定您要应用哪种编码/解码。但对于数据的自定义操作，我建议使用 ArrayBuffers 和 TypeArrays。

FileReader.readAsDataURL() 的示例：http: [//jsfiddle.net/uvmD7/](http://jsfiddle.net/uvmD7/)

```
<body>
  <canvas id="cvs" width="200" height="200"></canvas>
  <input type="file" id="files" name="files[]" multiple />
</body> 
```

和脚本：

```
document.getElementById('files').addEventListener('change', handleFileSelect, false);

var fr = new FileReader();

function handleFileSelect(evt) {
    var files = evt.target.files;
    fr.readAsDataURL(files[0]);
};

fr.onload = function(evt) {
    // do sth with it
    var data = evt.target.result; //fr.result 
    img = new Image();
    img.src = data; 
    //  draw after load
    img.onload = function() {
       var c=document.getElementById("cvs");
       var ctx=c.getContext("2d");
       ctx.drawImage(img,0,0,200,180);      
    };
}; 
```

# jquery - 在 jquery 中定义的单击事件准备在新元素上

> ID：14361749
> 
> 赞同：0
> 
> 时间：2013-01-16T15:21:52.550
> 
> 标签：jquery

> **可能重复：**
> [动态添加元素并尝试使用选择器 .click 事件 Jquery](https://stackoverflow.com/questions/13384588/dynamically-adding-elements-and-trying-to-use-the-selectors-click-event-jquery)

```
$(function(){
  $('a.bar').click(function(){
    // do something
  });

  $('a.foo').click(function(){
    $('#toto').append('<a class="bar">bar</a>');
  });
});

 <a class="foo">foo</a>
 <div id="toto"></div> 
```

如何自动附加在 JQuery 中定义的单击事件，为其他事件添加的 dom 元素做好准备（例如通过单击`a.foo`for `a.bar`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:23:41.440

您需要的是委托事件技术。请参见下文`.on`

```
$(document).on('click', 'a.bar', function(){
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:24:22.597

您可以创建一个`init()`函数来设置所有触发器并在 DOM 修改后调用它。例如：

```
$(function() {
  init();

  $('a.foo').click(function(){
    $('#toto').append('<a class="bar">bar</a>');
    init();
  });
});

function init() {
  $('a.bar').click(function(){
    // do something
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:25:19.843

```
$(document).ready(function(){
  $('.foo').click(function(){
    $('<a class="bar">bar</a>').appendTo('#toto');
  });

  $('#toto').delegate('.bar', 'click', function(a){
    $('.foo').toggle();    
  });
}); 
```

使用委托。

# r - R-项目数据框

> ID：14361759
> 
> 赞同：0
> 
> 时间：2013-01-16T15:22:18.867
> 
> 标签：r, dataframe

我正在使用一个应该返回具有 2 列的数据框（表？）的函数。

这是功能：

```
complete <- function(directory,id = 1:332) {

    csvfiles <- sprintf("/Users/myname/Desktop/%s/%03d.csv", directory, id)

    nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))
    data.frame(ID=sprintf('%03d', id), countrows=sapply(csvfiles,function(x) length(count.fields(x))))
    } 
```

样本输出：

```
 ID countrows
/Users/myname/Desktop/specdata/100.csv 100      1097
/Users/myname/Desktop/specdata/101.csv 101       731 
```

我需要输出只显示该文件路径中的数字。所以第一个记录应该是 100，第二个记录应该是 101，依此类推。

这在控制台中完成了工作

```
colID <- sprintf('%03d', id) 
```

但我正试图毫无乐趣地将它整合到我的功能中。

我试过了：

```
nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))
+ data.frame(ID=sprintf('%03d', id), countrows=sapply(csvfiles,function(x) length(count.fields(x)))) 
```

我试过了：

```
 complete <- function(directory,id = 1:332) {

    csvfiles <- sprintf("/Users/myname/Desktop/%s/%03d.csv", directory, id)

    colID <- sprintf('%03d', id)

    nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))
    data.frame(ColID, countrows=sapply(csvfiles,function(x) length(count.fields(x))))
    } 
```

我确定我只有一步之遥？

基于以下反馈

我试过这个

```
complete <- function(directory,id = 1:332) {

    csvfiles <- sprintf("/Users/myname/Desktop/%s/%03d.csv", directory, id)

    colID <- sprintf('%03d', id)

    nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))
    data.frame(ID=id, countrows=sapply(csvfiles,function(x) length(count.fields(x))))

    row.names(colID) <- basename(row.names(colID))
    } 
```

这会返回一个错误：“basename(row.names(colID)) 中的错误：预期的字符向量参数”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:48:55.767

采用以下两种方式之一： A（在函数内部）：

```
complete <- function(directory,id = 1:332) {

   csvfiles <- sprintf("/Users/myname/Desktop/%s/%03d.csv", directory, id)

   nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))
   data.frame(ID=sprintf('%03d', id), 
              countrows=sapply(csvfiles,function(x) length(count.fields(x))),
             row.names=id
           )
       } 
```

B（函数外）：

```
 compdf <- complete()
row.names(compdf) <- 1:NROW(compdf) 
```

# binding - 绑定到关系属性

> ID：14361760
> 
> 赞同：3
> 
> 时间：2013-01-16T15:22:25.193
> 
> 标签：binding, ember.js, ember-data

我正在尝试绑定这样的`DS.belongsTo`关系的属性：

```
App.User = DS.Model.extend({
  name: DS.attr('string')
});

App.Post = DS.Model.extend({
  text: DS.attr('string'),
  user: DS.belongsTo('App.User'),

  userNameBinding: 'user.name'
}); 
```

我知道这个例子有点愚蠢，但想法就在这里。

不幸的是，它不起作用（在[model.js 中，在这一行](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/model.js#L90)）：

> 未捕获的类型错误：无法调用 null 的方法“发送”

我也尝试使用`Ember.Binding.oneWay`，但它也不起作用。我目前的解决方法非常难看：

```
App.Post = DS.Model.extend({
  // code omitted

  userName: function() {
    return this.get('user.name');
  }.property('user.name')
}); 
```

您可以[在此 JSFiddle 中](http://jsfiddle.net/lcoq/smPZN/1/)对其进行测试。

*使用的 Ember 版本：*

*   [主](https://github.com/emberjs/data/commit/4b35be22d84ca13c5e8e0e2cb7447ab21892b8b1)数据上的余烬数据
*   余烬[v1.0.0-pre.2-311-g668783a](https://github.com/emberjs/ember.js/commit/668783a620bc004daa063df72c3d84035be6888a)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:28:32.977

绑定到依赖于`init`. 我[在 Ember 问题跟踪器上](https://github.com/emberjs/ember.js/issues/1789)提交了一个错误。

对于不那么丑陋的解决方案，您可以使用`Ember.computed.alias`：

```
App.Post = DS.Model.extend({
  text: DS.attr('string'),
  user: DS.belongsTo('App.User'),

  userName: Ember.computed.alias('user.name')
}); 
```

我在[这个 JSBin](http://jsbin.com/edusir/1/edit)中有一个工作示例。

# grails - 反序列化支持嵌入式关联的 JSON 对象

> ID：14361768
> 
> 赞同：5
> 
> 时间：2013-01-16T15:22:32.160
> 
> 标签：grails, grails-2.0, grails-domain-class, grails-controller

是否有一种简单的方法可以将 JSON 字符串反序列化为支持嵌入式关联的域类；belongsTo 和 hasMany

```
{
  name: "Customer",
  contact: {
    name: "Contact"
  }
} 

class Customer {
  name 
  Contact contact
}

class Contact {
  String name
  static belongsTo = [customer:Customer]
} 
```

在我的控制器中，我想做以下事情

```
def save() {
   def customer = new Customer(request.JSON)
   customer.save();
} 
```

现在我被迫做

```
def save() {
   def contact = new Contact(request.JSON.contact);
   def customer = new Customer(request.JSON);
   customer.contact = contact;
   customer.save();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:51:03.647

您是否尝试过使用 JsonSlurper？

示例用法：

```
def slurper = new JsonSlurper()
def result = slurper.parseText('{"person":{"name":"Guillaume","age":33,"pets":["dog","cat"]}}')

assert result.person.name == "Guillaume"
assert result.person.age == 33
assert result.person.pets.size() == 2
assert result.person.pets[0] == "dog"
assert result.person.pets[1] == "cat" 
```

参考： http: [//groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html](http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html)

你可以试试这个

```
 Test test
    def result = new JsonSlurper().parseTest('yourString')
    test = result 
```

试试这个会奏效。

# php - 用户行列：没有 SQL 怎么办？

> ID：14361770
> 
> 赞同：0
> 
> 时间：2013-01-16T15:22:36.073
> 
> 标签：php, mysql, database, ranking

我正在开发在线游戏的服务器端部分，其中一项任务是计算用户排名。目前它使用 RDBMS 完成，但每次玩家赢得游戏时它都会更新每个用户行。当平均有 20 名玩家在线时，这导致了现在的僵局。

我理解这种趋势——当有 1000 名玩家时，数据库解决方案根本不起作用。

如何在 Apache/PHP 服务器上实时计算用户排名？它有更智能的数据库解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:34:30.350

您可以将您的行列放在另一个表中，`TRUNCATE`每次都可以。已经提出（并回答）了一个类似的问题，可以在这里找到： [Best way to update user ranking without kill server](https://stackoverflow.com/questions/948832/best-way-to-update-user-rankings-without-killing-the-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:18:07.063

为什么将排名存储在单独的表中？根据需要存储分数并查询排名，甚至创建视图。您只需更新与单个用户相关的数据，而不是更新整个表，如果您使用 InnoDB 表，则 UPDATE 查询将使用行级锁定，而不是使用 myISAM 获得的表级锁定。

```
TABLE users
  user_id INT PK
  user_name VARCHAR
  ...

TABLE user_scores
  user_id PK FK
  score INT INDEX
  wins INT INDEX

VIEW v_user_ranks
  SELECT u.user_id, u.user_name, s.score, s.wins
  FROM users u INNER JOIN user_scores s
    ON u.user_id = s.user_id

SELECT *
FROM v_user_ranks
ORDER BY score, wins DESC
LIMIT 10

INSERT INTO user_scores (user_id, score, wins)
  VALUES ($id, $score, $wins)
  ON DUPLICATE KEY UPDATE score=score+$score, wins=wins+$wins 
```

# javascript - 如何比较 2 个数组及其值并根据比较生成操作

> ID：14361771
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:22:39.207
> 
> 标签：javascript, jquery, arrays, jquery-ui

每个语句都是一个更大的函数的一部分，该函数获取传入的**子**对象（数组）。我遇到的问题是，我试图比较传入的子对象中的值数组到页面上的 dom 元素。**简而言之，我如何比较 2 个数组？如果传递的数组 (Children) 中的值不在页面上或在 dom 中找不到，则将值添加到 DOM。如果值已经在 DOM 中，则什么也不做。**

```
$.each(children,function(){
            for (var i in children){
                var the_child = children[i];
                var the_child_check = $("#" + the_child.id, self.container);

          }

          if(self.container.children.length >=0){

              self.container.tabs('add', '#' + the_child.id, the_child.label);

          }else{

              self.container.tabs('remove', '#' + the_child.id);
}); 
```

一旦我了解了如何实现这个逻辑，那么我应该能够将它合并到函数中的适当位置。

```
<div id="tabcontainer">
                       <ul id="tab1">
                           <li>tab 1</li>
                       </ul>
                        <ul id="tab2">
                           <li>tab 1</li>
                       </ul>

</div> 
```

这是如何构建 html 的基本示例。每个选项卡都是根据传入的数组对象（**children**）动态生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:31:14.553

在你的例子中

这假设您`self`之前已经设置了某个位置。

```
// i gets index, val receives the item of the current iteration
$.each(children, function(i, val) {
    // code
    if (self.container.find(val)) {
       // item exists in dom
    } else {
       // item does not exist in dom
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:33:05.920

[http://docs.jquery.com/Utilities/jQuery.inArray](http://docs.jquery.com/Utilities/jQuery.inArray)

这是jquery inArray，

```
$(document).ready(function(){

    var arr = [ 4, "Pete", 8, "John" ];

    $("span:eq(0)").text(jQuery.inArray("John", arr));
    $("span:eq(1)").text(jQuery.inArray(4, arr));
    $("span:eq(2)").text(jQuery.inArray("David", arr));

  }); 
```

# android - 在 ListView 中为 TextView 添加渐变效果会生成 NPE

> ID：14361772
> 
> 赞同：0
> 
> 时间：2013-01-16T15:22:39.863
> 
> 标签：android, nullpointerexception, gradient, textview

我尝试将渐变效果添加到`TextView`. 但它会产生一个`NPE`（我觉得`id`to 是罪魁祸首，但事实并非如此）。

我的`Activity`：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        TextView textView = (TextView)findViewById(R.id.label);        
        Shader textShader=new LinearGradient(0, 0, 0, 20,
                new int[]{Color.GREEN,Color.BLUE},
                new float[]{0, 1}, TileMode.CLAMP);
        textView.getPaint().setShader(textShader);

        // storing string resources into Array
        String[] menulist = getResources().getStringArray(R.array.menulist);      

        // Binding resources Array to ListAdapter
        this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, menulist));

    } 
```

我的`XML`：

```
<?xml version="1.0" encoding="utf-8"?>
<!--  Single List Item Design -->
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="10dip"
        android:textSize="16dip"
        android:textStyle="bold" >
</TextView> 
```

我觉得我错过了一些明显的东西。

如果有任何其他方法可以获得具有渐变颜色效果的列表，请随时提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:32:41.157

试试这个 ：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    final Shader shader = new LinearGradient(0, 0, 0, 20,
            new int[]{Color.GREEN,Color.BLUE},
            new float[]{0, 1}, Shader.TileMode.CLAMP
    );
    // storing string resources into Array
    final String[] menulist = getResources().getStringArray(R.array.menulist);

    // Binding resources Array to ListAdapter
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, menulist) {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            final View view = super.getView(position, convertView, parent);
            final TextView label = (TextView) view.findViewById(R.id.label);

            label.getPaint().setShader(shader);
            return view;
        }
    });
} 
```

# ajax - 使用 GWT 在 IIS 7.5 上获取 405 错误消息

> ID：14361773
> 
> 赞同：1
> 
> 时间：2013-01-16T15:22:43.450
> 
> 标签：ajax, gwt, iis-7.5

我继承了一个使用 GWT 通过表单发布登录信息的项目。根据 Firebug 的说法，它返回 405 错误。

我已经尝试过以下说明：[IIS 7.5、Web Service 和 HTTP 405 错误](https://stackoverflow.com/questions/4287330/iis-7-5-web-service-and-http-405-error)

那并没有解决问题。我打开了失败的请求跟踪，这是我看到的错误：

MODULE_SET_RESPONSE_ERROR_STATUS 警告

ModuleName="StaticFileModule", Notification="EXECUTE_REQUEST_HANDLER", HttpStatus="405", HttpReason="Method Not Allowed", HttpSubStatus="0", ErrorCode="Incorrect function. (0x80070001)", ConfigExceptionInfo=""

谢谢！

# php - php无法删除cookie

> ID：14361774
> 
> 赞同：2
> 
> 时间：2013-01-16T15:22:46.713
> 
> 标签：php, session, cookies, session-cookies

我有这个功能来设置一个cookie：

```
private function setCookie($key, $value){
        if(setcookie(
            $key,
            $this->encrypt($value),
            time() + 2592000,
            adminpath,
            database::getDomain(),
            database::getHTTPS(),
            true
        )){ // set cookie for a month
            return true;
        }
        else{ // cookie could not be created, write to errorlog
             $error  = array(
                "type"      => "other",
                "argument"  => 1,
                "class"     => __CLASS__,
                "function"  => __FUNCTION__,
                "errorMsg"  => "Could not create cookie ".$key." with value ".$value,
                "file"      => __FILE__,
                "line"      => __LINE__
            );
            $this->errorlog->log($error);
            return false;
        }
    } 
```

然后我使用此代码取消设置 cookie：

```
private function destroyCookie($key){
        if(setcookie(
            $key,
            " ",
            time() - (time() + 2592000), 
            adminpath,
            database::getDomain(),
            database::getHTTPS(),
            true
        )){
            return true;
        }
        else{
            $error  = array(
                "type"      => "other",
                "argument"  => 1,
                "class"     => __CLASS__,
                "function"  => __FUNCTION__,
                "errorMsg"  => "Could not destroy cookie ".$key,
                "file"      => __FILE__,
                "line"      => __LINE__
            );
            $this->errorlog->log($error);
            return false;
        }
    } 
```

我可能遗漏了一些非常简单的东西，但我不知道为什么我的 cookie 没有被删除。这两个函数在同一个类中，函数 database::getDomain() 生成“www.creetab.com”，函数 database::getHTTPS() 生成“false”。管理路径是“/admin/”。有人可以帮我解决这个问题吗？设置 cookie 工作正常，它只是删除不起作用的 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:25:05.427

```
$key,
" ",
time() - (time() + 2592000), 
```

应该：

```
$key,
"",
time() - 2592000, 
```

否则，您只是给它一个空白空间的值，这仍然是一个值。你想让它为空，根本不给它任何价值。同样设置过期时间。

# html - 如何使用同一页面上的单独链接更改嵌入式视频？

> ID：14361777
> 
> 赞同：0
> 
> 时间：2013-01-16T15:22:56.947
> 
> 标签：html, css, iframe

我有一个使用 iframe 嵌入的视频。只是您从 YouTube 获得的标准代码。

我一直在网上寻找解决方案。该解决方案是我将在嵌入式视频下方有一个表格，每个表格条目都是一个链接。当用户单击链接时，嵌入的视频将更改为该视频。

到目前为止，我发现的只是需要将 .mp4、.ogg、.webm 视频存储在托管服务器上的视频播放器。

任何代码甚至是正确方向的一点都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:04:12.590

这是我满足您要求的快速演示[http://jsbin.com/oyuxon/1/edit](http://jsbin.com/oyuxon/1/edit)

一般来说，我不知道您的播放器如何处理视频 URI，所以这只是建议：

*   将视频 URI 保存在每个项目的`data`属性中。`li`我不知道你为什么需要 a`table`但我认为列表在语义上更合适。您也可以修改为使用表格。
*   您使用 JavaScript（我使用 jQuery）来处理`click`每个`li`元素中的事件，将播放器的视频 URI 替换`data`为 this 的属性值`li`。

希望这对你有用。

# java - JavaFX：MediaPlayer 无法播放电影

> ID：14361781
> 
> 赞同：1
> 
> 时间：2013-01-16T15:23:01.697
> 
> 标签：java, video, media-player, javafx-2, javafx

我正在尝试我的第一个 MediaPlayer javafx 应用程序。我遵循了很多方法，但我仍然无法在新应用程序上运行视频。

这有什么问题：

```
Media m = new Media ("file:///C:/Documents%20and%20Settings/User/Desktop/samples/kick.mp4");
MediaPlayer mp = new MediaPlayer(m);
MediaView mv = new MediaView(mp);

Group root = new Group();
root.getChildren().add(mv);
stage.setScene(new Scene(root,400,400));
stage.setTitle("Media Player");
stage.show();
mp.play(); 
```

应用程序正确构建，没有触发“找不到文件异常”，但播放器卡在 UNKNOWN 状态，并且凸起的窗口具有白色、固定的背景。不提供任何类型的音频。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:34:44.873

知道了！我在 Windows XP 上运行，因此我缺少一些编解码器。

从[这里](http://docs.oracle.com/javafx/2/system_requirements_2-2/jfxpub-system_requirements_2-2.htm)：

```
For Windows XP and Windows Vista, JavaFX Media 2.2 requires that one of the following
external modules be installed to play AAC audio and H.264/AVC video:

MainConcept H.264/AVC Pro Decoder Pack
DivX Plus Codec Pack
MainConcept Showcase (includes demo version codecs) 
```

安装 DivX 编解码器就成功了！

# c++ - C ++ MFC如何将应用程序发送到托盘

> ID：14361782
> 
> 赞同：4
> 
> 时间：2013-01-16T15:23:01.843
> 
> 标签：c++, mfc, background, dialog, tray

我写了一个小应用程序，它在后台执行一些操作。

因为它不需要用户注意，我想将应用程序发送到系统托盘，当有人点击它时，窗口应该再次弹出。

问题是，我编写了一个 MFC 程序（对话框），它可以完成我想做的所有事情。现在我需要想办法把它送进托盘。

类型：MFC（对话窗口）语言：C++ IDE：Visual Studio 2012

你对我该怎么做有什么想法吗？或者你可能知道一个很好的教程或我需要的函数/类？

我已经在 codeprojects.com 和 google 上进行了搜索，但似乎没有太多关于此的内容。谢谢。

编辑1：

我试过这样的事情：

```
HWND hMainWindow = this->GetSafeHwnd();
HICON hProgramIcon = this->GetIcon(false);
char szTip[16] = "Tracker"; 
nidTrayIcon.cbSize = sizeof(nidTrayIcon); 
nidTrayIcon.hIcon = hProgramIcon; 
nidTrayIcon.hWnd = hMainWindow; 
nidTrayIcon.uCallbackMessage = (WM_USER + 1); 
nidTrayIcon.uFlags = NIF_ICON | NIF_MESSAGE | NIF_TIP;
nidTrayIcon.uID = 0x0200; 
strcpy_s((char*)nidTrayIcon.szTip,16, szTip2);
nidTrayIcon.szTip[strlen(szTip)] = '\0'; 
Shell_NotifyIcon(NIM_ADD, &nidTrayIcon); 
```

如果我运行此代码，我的应用程序将关闭代码“0x03”（找不到路径...）

编辑2：

```
this->ShowWindow(SW_HIDE); 
```

也不起作用。同样的问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T15:31:43.283

您正在寻找 NotifyIcon 类：http: [//msdn.microsoft.com/en-gb/library/system.windows.forms.notifyicon.aspx](http://msdn.microsoft.com/en-gb/library/system.windows.forms.notifyicon.aspx)

这是一个教程： [http ://alanbondo.wordpress.com/2008/06/22/creating-a-system-tray-app-with-c/](http://alanbondo.wordpress.com/2008/06/22/creating-a-system-tray-app-with-c/)

也就是说，仅将您的应用程序添加到系统托盘是一个非常糟糕的 UI 想法。它曾经在 Windows 95/98 时期非常流行，微软提供了一个工作代码示例，每个人都可以复制和粘贴。很快，我们的系统托盘里就有了鱼和眼睛。托盘变得越来越满，因此完全没用。

如果您的应用程序正在做一些不需要用户注意的事情，请将其设置为服务，或者只是让用户将对话框最小化到任务栏并在对话框上显示进度条。这样，将鼠标悬停在任务栏图标上将允许用户检查进度。

使用系统尝试显示有用的通知。仅当图标将传达可能影响用户当前工作的系统级活动（如网络连接）时才添加图标。否则，不要弄乱我的系统托盘。我不想把注意力从需要我注意的工作上移开（你说你的不注意）来看看我系统托盘中一个弹跳的兔子。

# opengl-es - 如何在 OpenGL ES 中使用相机作为纹理？

> ID：14361785
> 
> 赞同：0
> 
> 时间：2013-01-16T15:23:11.417
> 
> 标签：opengl-es, camera, textures, augmented-reality

我正在 Android 平台上进行一个增强现实项目，它可以做一些类似 [http://www.direct-optic.fr/essai-virtuel-lunettes-troisd/](http://www.direct-optic.fr/essai-virtuel-lunettes-troisd/,that)的事情，即识别眼睛然后生成眼镜供用户查看效果。目前我第一个使用OpenCV2.4.1识别眼睛，但遇到一个问题，我不知道如何在OpenGL ES中使用相机作为纹理。我已经使用 .obj 格式的 3DMax 构建了玻璃模型，尝试将其导入 OpenGL ES。所以我想知道是否有人可以提供一些演示如何做到这一点。TI公司已经下架了，但我不知道细节。以下是链接： [http](http://www.t-immersion.com/trylive/trylive-eyewear) ://www.t-immersion.com/trylive/trylive-eyewear 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:38:05.500

[在这里](https://developer.vuforia.com/resources/sdk/ios)查看 vuforia 示例应用程序是如何做到的

它是一个使用相机作为背景纹理的增强现实 API

# android - 保存书签数据

> ID：14361789
> 
> 赞同：1
> 
> 时间：2013-01-16T15:23:22.657
> 
> 标签：android

我需要一些关于正确方法的建议，以便为我正在制作的类似书本的 android 应用程序保存一些书签数据。使用 ShardPreference 对象是最好的方法还是其他替代方法？我只需要将页码和标题保存在书签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:27:21.343

这里有一个很好的关于 sqlite 的教程：

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

在我看来，这是首选方式。

您还可以在 sd 卡上创建一个文件，在其中手动将数据保存为字符串。虽然这将要求您的应用具有访问 sd 卡内容的权限：

[https://sites.google.com/site/androidhowto/how-to-1/save-file-to-sd-card](https://sites.google.com/site/androidhowto/how-to-1/save-file-to-sd-card)

# iphone - TableView 下的 UIRefreshControl

> ID：14361791
> 
> 赞同：1
> 
> 时间：2013-01-16T15:23:35.387
> 
> 标签：iphone, ios, ipad, cocoa-touch, uitableview

我在我的应用程序中的 TableView 上实现了 UIRefreshControl。它在桌子的顶部工作正常。但是，我希望用户将 tableview 拉到当前 table view 列表的终点，然后用户向上拉 tableview 并释放它以重新加载数据。

这可能与 UIRefreshControl 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:23:09.797

没有 frame 属性`UIRefreshControl`，但是，如果您仍然设置了 frame，您可以成功地将其“放置”在您喜欢的任何位置，但 TableView 控制器会在任何类型的滚动过程中自动将其移动到顶部。

从[`UITableViewController`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40007523-CH3-SW6)文档：

> ...此属性的刷新控件将控件添加到视图控制器的关联接口。在将刷新控件与视图控制器关联之前，您不需要设置刷新控件的框架。**视图控制器更新控件的高度和宽度并适当地设置它的位置。**

# ruby-on-rails - 资产管道 - 让我的 CSS 活跃起来的麻烦

> ID：14361793
> 
> 赞同：2
> 
> 时间：2013-01-16T15:23:38.520
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, spree

我目前在使用 Ruby on Rails 上的资产管道时遇到了一些问题。

我正在使用电子商务解决方案（Spree），在文档中，文档中有这个：

> [...] 您可以通过使用特殊的预编译任务显着提高性能。

```
$ bundle exec rake assets:precompile:nondigest 
```

> 在开发中使用 precompile rake 任务将防止在重新加载页面时自动包含对资产文件的任何更改。您必须重新运行预编译任务才能使更改可用。

我的问题是执行命令后，我所有的 CSS 都必须手动重新编译才能生效。我找不到为此的“反向”命令​​。

**我试图删除公共/资产然后重新启动，但没有任何效果。**

在我的**application.rb**中，我有这条资产线：

> ```
> config.assets.enabled = true 
> ```

* * *

**编辑：**我的 development.rb

```
Mystore::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request. This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Raise exception on mass assignment protection for Active Record models
  config.active_record.mass_assignment_sanitizer = :strict

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  config.active_record.auto_explain_threshold_in_seconds = 0.5

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true
end 
```

如果有人有线索，我很开放（：

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:24:42.420

以防万一：你能检查一个名为的文件`manifest.yml`吗？它应该在您的`/assets/`目录中。如果存在，您可以看到里面有经过消化的名称。尝试评论它们或删除它们，我们会看到...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:45:02.577

通常你可以运行：

```
$ bundle exec rake RAILS_ENV=development assets:clean 
```

这应该清除任何预编译的资产。听起来您处于开发模式，但如果您处于生产状态，请删除该`RAILS_ENV=development`部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:54:35.610

希望您使用的是版本控制。键入“git diff”或等效项以准确查看哪些文件更改可能导致您的应用程序出现这种新行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:59:04.697

Erowlin，当您预编译资产时，您对 CSS 所做的任何更改都**不会**应用。这是因为它已经从 application.css / application.js 中读取，您的所有资产都被压缩到这两个文件中。

因此，如果您想对资产进行任何更改，您不能先预编译它们。

对于 Spree，使用您提到的技术的好时机是，如果您正在编写不需要接触 CSS/Javascript 的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T16:37:43.973

刚刚发现有什么问题：

Spree 将徽标图像的名称存储在数据库中。所以， rake tmp:clear 没有工作。CSS 似乎没问题，更改会立即应用。

这是响应： http: [//osdir.com/ml/spree-user/2012-12/msg00147.html](http://osdir.com/ml/spree-user/2012-12/msg00147.html)

我不知道我是否必须向 Spree 报告这个错误，或者它不是一个。无论如何，这很奇怪。

谢谢你们所有人！

# python - 使用 scikit-learn DecisionTreeClassifier 进行聚类

> ID：14361798
> 
> 赞同：8
> 
> 时间：2013-01-16T15:23:46.340
> 
> 标签：python, machine-learning, scikit-learn

使用 sklearn.tree.DecisionTreeClassifier 时，分类器具有预测概率和类别的方法。

有没有办法使用同一棵树进行聚类：对于给定的输入向量 x，只需告诉 x 属于哪个叶子？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T15:57:27.480

我找到了我自己问题的答案 - 将其留在这里作为下次有人寻找它的参考：

```
import numpy as np
import sklearn.tree
clf = sklearn.tree.DecisionTreeClassifier()
clf.fit(X,y)
clf.tree_.apply(np.asfortranarray(X.astype(sklearn.tree._tree.DTYPE))) 
```

# c++ - 对遗产进行分类

> ID：14361799
> 
> 赞同：0
> 
> 时间：2013-01-16T15:23:47.733
> 
> 标签：c++, inheritance

我在不久的将来要考试，我真的被一个找不到答案的问题困住了。

假设一个类`CI`继承类`Sup`为：

```
class CI: protected Sup
{}; 
```

为什么这不是分类遗产？

在此先感谢，感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:31:33.863

在C++中，只有公有继承才被认为是真正的继承，即子类将继承其超类的**接口**（即IS-A关系）。一个体面的继承应该满足[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

至于受保护/私有继承，它们实际上是一种包含/组合，因为派生类将隐藏其基类的接口（作为受保护/私有成员）并且仅使用基类的**实现**（即 HAS-A 或 Is-已实施的条款关系）。

您可以参考 SO 上的这个问题以获得更好的理解：[为什么我们实际上需要 C++ 中的私有或受保护继承？](https://stackoverflow.com/questions/374399/why-do-we-actually-need-private-or-protected-inheritance-in-c)

也就是说，受保护/私有继承是 C++ 中一个有争议的特性，它被 Java 和 C# 等 C++ 继承者所抛弃。

# android - Android：使用 ActionBarSherlock 动态添加选项卡

> ID：14361805
> 
> 赞同：0
> 
> 时间：2013-01-16T15:23:58.020
> 
> 标签：android, android-fragments, actionbarsherlock, android-tabs

我成功地制作了一个带有选项卡式导航的项目，我可以从 onCreate() 添加新选项卡，但我想从按钮添加新选项卡（在我动态生成的片段内）。

Fragment 是 Main(Activity) 中的一个静态类，如果我将制表符插入行注释掉，它就可以工作：

```
/*Fragments set the layout of the tabs*/
public static class MenuFragmentTab extends SherlockFragment{

    private Context context;
    private byte position;

    public void initialize(Context context, byte position){
        this.context = context;
        this.position = position;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

        /*Create the Fragment layout so I can attach the handlers*/
        View overView = inflater.inflate(R.layout.menu_fragment, container, false);

        /*When I create the fragment I initialize the button listeners*/
        if(context != null){
            /*Close Main tab*/
            Button closeMainButton = (Button)overView.findViewById(R.id.main_close_btn);
            CloseMainHandler closeMain = new CloseMainHandler();
            closeMainButton.setOnClickListener(closeMain);

            /*Open a new Tab*/
            Button newTabButton = (Button)overView.findViewById(R.id.new_tab_btn);
            NewTabHandler newTab = new NewTabHandler();
            newTabButton.setOnClickListener(newTab);
        }
        return overView;
    }

    /*the button to open a new tab*/
    private class NewTabHandler implements View.OnClickListener{

        @Override
        public void onClick(View v) {

            /*get the info for the new tab*/
            View parent = (View)v.getParent();
            EditText newTabTitle = (EditText)parent.findViewById(R.id.new_tab_title);
            EditText newTabContent = (EditText)parent.findViewById(R.id.new_tab_content);

            //Toast.makeText(context, newTabTitle.getText(), Toast.LENGTH_LONG).show();

            /*add the info to the ArrayLists*/
            Main.titles.add(newTabTitle.getText().toString());
            Main.contents.add(newTabContent.getText().toString());

            /*initialize the new tab*/
            ActionBar.Tab newTab = Main.actionBar.newTab().setText(
                    Main.titles.get(Main.titles.size()-1)
            );

            ContentFragmentTab fragContent = new ContentFragmentTab();
            fragContent.initialize(
                    context,
                    (byte)(Main.titles.size()-1)
            );

            /*This gives back a compilation error because of non-static reference*/
            TabClickHandler newListener = new TabClickHandler(fragContent);
            newTab.setTabListener(newListener);

            Main.actionBar.addTab(newTab);
        }

    }

    /*the button to close the main tab*/
    /*This should be a public, static function in Main, to avoid code repetition*/
    private class CloseMainHandler implements View.OnClickListener{
        @Override
        public void onClick(View v) {
            Main.actionBar.removeTabAt(position);
        }
    }
}; 
```

我的问题是：我该如何进行这项工作？我可以删除标签甚至添加标签，我只是在绑定 TabChangeListeners 时遇到了麻烦！任何帮助/提示将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:29:08.233

从“MenuFragmentTab”中删除“静态”并且它有效！虽然给出了警告，但有非静态片段，所以我想这解决了问题。

# php - 防止跨站请求伪造

> ID：14361806
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:24:00.023
> 
> 标签：php, post

防止 CSRF 的方法之一是在表单中使用令牌。在浏览了很多文章之后，我发现这些步骤通常是这样的：

1.  生成一个加密的**令牌值**，将其存储在会话中，将令牌值设置在表单的隐藏字段中。
2.  在表单处理页面中，比较隐藏字段中的令牌值和会话值是否相等，如下所示： $_POST['token'] == $_SESSION['token']

我的问题是我**为什么要加密令牌值？**假设我正在使用 GET 方法并且攻击者知道我将使用一个介于 1 到 1000 之间的简单整数值。如果攻击者要使用图像来伪造请求，那么他将不得不发送 1000 个图像蛮力请求..对吗？还是有其他方法可以做到这一点？

我还读到单独使用 POST 方法不足以阻止 CSRF 请求。所以我的第二个问题是，如果这是真的，**如果我使用 POST 方法，攻击者如何成功创建伪造请求？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:37:34.827

对于使用许多自动化流程和应用程序执行 1000 个暴力请求的攻击者来说，这只是几分钟的问题。

因此最好像这样设置令牌：

```
$token = md5(uniqid(rand(), true)); 
```

这样一来，您总是会得到**唯一的随机令牌**，而根本不需要加密-它只会增加更多的混淆:-)。使用您首选的加密方法，有些人仅在`sha1()`这些天使用，有些人走得更远。但这不是五角大楼的安全区，只是一个**不**容易猜到的**随机令牌**进行暴力攻击。

 **使用 POST 方法确实是不够的——我在 Firefox 中安装了一个扩展，它可以获取带有 GET 参数的 URL 并将其转换为 POST 请求。像复制+粘贴+点击一样简单。

此外，您不需要将令牌设置为隐藏字段，您还可以将其用作表单操作 URL 的 GET 参数，同时从 GET 读取令牌并从 POST 数组中读取表单数据......**

# jquery - 当一个元素附加到 dom 时，你如何绑定（尤其是在 Backbone.js 中）？

> ID：14361807
> 
> 赞同：0
> 
> 时间：2013-01-16T15:24:00.440
> 
> 标签：jquery, backbone.js

在 Backbone JS 中，策略首先将所有内容呈现在一个分离的元素中。然后在准备好将其附加到 DOM 时。

我想绑定到该元素最终附加到 DOM 的时间（然后运行一些函数，比如触发一些点击事件或诸如此类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:29:16.340

只需创建其他 Backbone 对象可以订阅的您自己的自定义事件。当您向 DOM 添加视图时触发这些。

`this.trigger('addedToDOM', this);`

...

`viewtoBeAdded.bind('addedToDOM', this.onAddedToDom);`

...

`onAddedToDom: function(viewThatWasAdded) { .. }`

# c++ - 检索元素

> ID：14361818
> 
> 赞同：0
> 
> 时间：2013-01-16T15:24:18.163
> 
> 标签：c++, xml, libxml2

我是**XML**的初学者。我正在使用**libxml**。我创建了一个这样的**XML**文件：

```
<example>

    <Path Name="one">Properties/one</Path>
    <Path Name="two">Properties/two</Path>
    <Path Name="three">Properties/three</Path>
    <Path Name="four">Properties/four</Path>

</example> 
```

我的问题是我怎样才能获得例如***属性/一个******作为***路径名称的一个。?

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:03:55.923

又快又脏，你可以这样做：

```
std::string strRetVal;
xmlDocPtr pXMLDoc = xmlParseFile("filename.xml");  // read the xml file
xmlNodePtr rootNode = xmlDocGetRootElement(pXMLDoc); // get the root node (<example>)
xmlNodePtr pNode = rootNode->children;
while (pNode)
{ // walk through all children nodes
    if (pNode->type == XML_ELEMENT_NODE)
    {
        std::string strElemName((char *)pNode->name)); // find all <Path> elements
        if (strElemName == "Path")
        {
            xmlAttrPtr pAttr = m_pXMLNode->properties;
            while (pAttr)
            { // walk through all the attributes and find the required one
                if (pAttr->type == XML_ATTRIBUTE_NODE)
                {
                   str::string strAttrName((char *)pAttr->name);
                   str::string strAttrVal((char *)pAttr->children->content);
                   if ((strAttrName == "Name") && (strAttrVal == "one")) break; // found
                }
               pAttr = pAttr->next;
            }
        }
    }
    pNode = pNode->next;
}
if (pNode) 
{ // pNode is the element with an attribute "Name" of value "one"
   strRetVal = (char*)xmlNodeGetContent(pNode); // get its content (/Properties/one)
} 
```

# jquery - 使设计移动和不同的分辨率兼容

> ID：14361819
> 
> 赞同：0
> 
> 时间：2013-01-16T15:24:18.643
> 
> 标签：jquery, html, css, fluid-layout

我创建了一个在中间被对角垂直线分割的设计。它的每一侧都有文本，无论使用哪个设备查看它，我都希望垂直和水平居中。设计一侧为黑色，另一侧为白色，因此文本颜色也需要更改。我无法弄清楚如何使其适应文本始终垂直居中的不同分辨率和设备。如果我能弄清楚如何使它工作，我愿意使用 jQuery 或将其转换为图像。

[http://jsfiddle.net/dw4Cj/7/](http://jsfiddle.net/dw4Cj/7/)

----------------------HTML--------

```
<div id="wrapper">
   <div id="right"></div>
    <div class="content" id="left-content">
        <h1> Designer </h1>
    </div>
    <div class="content" id="right-content">         
        <h1> Developer </h1>
    </div>
 </div> 
```

---------------------CSS-------------------------

```
#right {
     background: none repeat scroll 0 0 rgba(0,0,0,1);
     height: 10000px;
     left: -851px;
     position: fixed;
     top: -150px;
     transition: all 0.5s ease-in-out 0s;
     transform: rotate(10deg);
     -webkit-transform: rotate(10deg);
     -moz-transform: rotate(10deg);
     -o-transform: rotate(10deg);
     -ms-transform: rotate(10deg);
     width: 710px;
}

#right-content {
     position: fixed;
     margin: 0 0 0 703px;
     top: 40px;
}

#left-content {
    color: white;
    position: fixed;
    text-align: right;
    top: 40px;
    width: 574px;
}

.content {
    padding-top: 260px;
}

 #left {
     float: right;
     margin-right: 40px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:22:30.633

您可以使用渐变来创建背景，我在这里为您创建了一个示例：

```
/* HTML */
<body>
    <p class="center-vertical">Designer <span class="black">Developer</span></p>
</body>

/* CSS */
body, html {
display: block;
overflow: hidden;
width: 100%;
height: 100%;
background-image: -webkit-linear-gradient(-15deg, #000 50%, #fff 50%, #fff 100%);
background-image: -moz-linear-gradient(-15deg, #000 50%, #fff 50%, #fff 100%);
background-image: -linear-gradient(-15deg, #000 50%, #fff 50%, #fff 100%);
}

p {
text-align: center;
font-size: 30px;
color: #fff;
word-spacing: 80px;
}

.black {
color: #000;
}

/* JS */
$(document).ready(function(e) {

var centerVerticaly = function() {
    var marginTop = $('body').height() / 2;

        $('.center-vertical').css({
            marginTop: marginTop
        });
};

    $(window).bind("load resize", function(){
        centerVerticaly();
    });

    centerVerticaly();

}); 
```

[http://jsfiddle.net/LFGGV/](http://jsfiddle.net/LFGGV/)

它缺少您发布的 jsfiddle 中间的阴影，但您可以通过在渐变中添加更多断点来创建它。

我确实选择在 jQuery 的帮助下将文本居中，可能有更好的方法来做到这一点，但它确实有效。

# jquery - 从 Ajax 下载文件（有点）

> ID：14361821
> 
> 赞同：5
> 
> 时间：2013-01-16T15:24:23.730
> 
> 标签：jquery, ajax, grails, download

我的 GSP 中有这个 ajax 调用：

```
$.ajax({
    url: '${request.contextPath + '/Ticket/passAll'}',
    type: 'POST',
    data: data,
    success: function() {
        alert("Success");
    }
}); 
```

这是我的控制器操作中的代码块：

```
response.setHeader("Content-disposition", "attachment; filename=sample.csv")
response.contentType = "application/vnd.ms-excel"

def outs = response.outputStream
def cols = [:]

tickets.each() {
    outs << it.ticketNo + ";" + it.subject
    outs << "\n"
}

outs.flush()
outs.close() 
```

我通过 $.Ajax 方法从视图中传递的数据中获取票证列表。比我将该数据格式化为 CSV 并且比我想将该数据导出为 CSV 文件但没有任何反应。数据被发送到客户端，但没有文件可供下载，因为内容配置格式不正确。我错过了什么？我试图做类似的事情：

```
$.ajax({
    url: '${request.contextPath + '/Ticket/passAll'}',
    type: 'POST',
    data: aoData,
    dataType: 'text',
    success: function(result) {
        var uri = 'data:application/csv;charset=UTF-8,' + encodeURIComponent(result);
        window.open(uri, 'tiketi.csv');
    }
}); 
```

在控制器中我生成纯字符串，但是这样我得到一个没有扩展名的文件，这是不可接受的。

我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T15:56:41.660

你不需要通过ajax来做。该页面不会重定向文件下载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T15:42:07.580

我猜 url 属性应该是固定的，因为你的引号正在发生冲突。

尝试：

```
$.ajax({
    url: "${request.contextPath}/Ticket/passAll",
    type: 'POST',
    data: aoData,
    dataType: 'text',
    success: function(result) {
        var uri = 'data:application/csv;charset=UTF-8,' + encodeURIComponent(result);
        window.open(uri, 'tiketi.csv');
    }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T15:57:52.883

据我所知，不可能通过 AJAX 触发文件下载。相反，您可以这样做（例如使用 jQuery）：

```
function downloadComplete(){ hideSpinner();}
function downloadStart(){ showSpinner();}

function download(){
    downloadStart()
    var urlParams = data // or e.g. $(form).serialize() 
    var downloadUrl = "${request.contextPath}/Ticket/passAll?" + urlParams 
    $("#download-iframe").remove()
    $('<iframe style="display:none" id="download-iframe" src="' + downloadUrl + '" onreadystatechange="downloadComplete()" onload="downloadComplete()">').appendTo('body');
} 
```

您可能会遇到问题，因为它是一个 GET 请求：“安全”或太多参数。但在正常情况下应该没有问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-25T00:44:04.327

我在这方面有点晚了，但偶然发现它做了一些研究。这个解决方案有点长，是从这里回答的各种问题拼凑而成的。我认为它是对这个问题的直接回答，我让它在应用程序中工作。

```
<script>
function getCSV() {
console.log("in get csv");
  $.ajax({
      url: "<url string>",
      dataType: 'json',
      type: "post",
      data: {},
      success: function (data) {
          console.log(data);
          downloadCSV({filename: "<filename.csv", data: data.<array from 
                                      backend call>});
      },
      error: function () {
      }
  });
}
}
function downloadCSV(args) {
var data, filename, link;
var csv = convertArrayOfObjectsToCSV({
    data: args.data
});
if (csv == null) return;
filename = args.filename || 'export.csv';
if (!csv.match(/^data:text\/csv/i)) {
    csv = 'data:text/csv;charset=utf-8,' + csv;
}
data = encodeURI(csv);
link = document.createElement('a');
link.setAttribute('href', data);
link.setAttribute('download', filename);
link.click();
}
function convertArrayOfObjectsToCSV(args) {
var result, ctr, keys, columnDelimiter, lineDelimiter, data;
data = args.data || null;
if (data == null || !data.length) {
    return null;
}
columnDelimiter = args.columnDelimiter || ',';
lineDelimiter = args.lineDelimiter || '\n';
keys = Object.keys(data[0]);
result = '';
result += keys.join(columnDelimiter);
result += lineDelimiter;
data.forEach(function (item) {
    ctr = 0;
    keys.forEach(function (key) {
        if (ctr > 0) result += columnDelimiter;
        result += item[key];
        ctr++;
    });
    result += lineDelimiter;
});
return result;
}
</script> 
```

第一个函数是标准 ajax 调用，用于从后端调用获取数据数组。接下来是创建csv。第二行调用格式化 csv 文件的第三个函数。第二个函数从 csv 创建开始，最后创建一个动态链接，该链接附加到 dom 并单击以进行下载。似乎更长，但可以与后端的标准 ajax 调用一起使用。

# razor - 如何在 .cshtml（剃须刀页面）Visual Studio 2012 中为标记打开可折叠区域？

> ID：14361823
> 
> 赞同：13
> 
> 时间：2013-01-16T15:24:29.187
> 
> 标签：razor, visual-studio-2012, regions

在 Visual Studio 2010 中，MVC3 和 ASPX 页面中的标记是可折叠的（通过关闭标签），但它似乎在 Visual Studio 2012 中不起作用。有人知道如何让它工作吗？我在选项里找不到...

:-)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-10T21:49:29.603

这在 Visual Studio 2013 中对我有用：

```
<!-- #region Targets -->

<h1>Targets</h1>

<fieldset>

...

</fieldset>

<!-- #endregion --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T15:13:29.157

1.  突出显示您的代码块。
2.  右键点击
3.  选择“折叠标签”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T08:17:35.540

这看起来已经在这里得到了回答：[在 cshtml 中折叠 C# 块并保存它](https://stackoverflow.com/questions/7201617/collapse-c-sharp-block-within-cshtml-and-save-it) 但是，如果您在 cshtml 中自动折叠 Razor 部分之后，那么看起来您很不走运。通常的 CTRL-M、M 和 CTRL-M+CTRL-T 和弦快捷键仅适用于 html，您将看到在边距上有熟悉的 +/- 折叠指示符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-26T14:50:28.067

似乎在 Visual Studio 2012 中工作

```
 @* <!-- #region Some Name --> *@
 @* <!-- #endregion --> *@ 
```

# xml - 使用命名空间进行 XML 解析

> ID：14361824
> 
> 赞同：0
> 
> 时间：2013-01-16T15:24:36.230
> 
> 标签：xml, parsing, namespaces

我有以下 xml

```
<?xml version="1.0"?>
<response status="200">
  <ns3:output xmlns="http://xmlns.oracle.com/apps/fnd/wf/worklist/service/rt/artifacts/notificationdetails/" 
              xmlns:ns2="http://xmlns.oracle.com/apps/fnd/wf/worklist/service/rt/artifacts/worklistmgmt/" 
              xmlns:ns3="http://xmlns.oracle.com/apps/fnd/wf/worklist/service/rt/artifacts/worklist/">
    <ns2:notifications count="140552">
      <ns2:notification>
        <ns2:NotificationId>4687807</ns2:NotificationId>
      </ns2:notification>
    </ns2:notifications>
  </ns3:output>
</response> 
```

我需要解析它并获取每一行的 NotificationId 值。我尝试使用下面的代码来获取列表，但它返回 0。

```
notificationrows = xmlDoc.documentElement.selectNodes("/ns3:output/ns2:notifications"); 
```

谁能告诉如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:32:53.010

As per the comment you haven't told us which language / parser you are using, but you can use `local-name()` to achieve namespace agnostic xpath, to avoid using a `NamespaceManager` or similar, as follows:

```
notificationrows = xmlDoc.documentElement.selectNodes("/response/*[local-name()='output']/*[local-name()='notifications']"); 
```

**Update**

Note that your root element is `response` (in global namespace), so you'll either need to navigate it explicitly, or use `//` to find matching descendants.

# facebook - sharethis 插件的 facebook 分享数不正确

> ID：14361834
> 
> 赞同：1
> 
> 时间：2013-01-16T15:25:24.890
> 
> 标签：facebook

![在此处输入图像描述](../Images/6e64fec0fc3891c50efc34aca0ea2a92.png)

我正在使用 sharethis 插件。根据 facebook 文档，喜欢计数很好（分享+喜欢+评论）计数。

但是为什么 fshare 显示 fshare 计数为 757？此外，每当我使用此按钮进行分享时，点赞按钮的数量都会增加，而分享按钮的数量是不变的。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T20:43:40.670

你的“分享”按钮和你的“喜欢”按钮不是一回事（我知道这很令人困惑）。

基本上，Facebook 用户有两种不同的方式与您的网站进行交互，这两种不同的计数反映了这两种不同的方式。

# php - 回显到文本框 - 收到意外的 T_ENCAPSED_AND_WHITESPACE，期待 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

> ID：14361837
> 
> 赞同：1
> 
> 时间：2013-01-16T15:25:32.020
> 
> 标签：php

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

再会，

我有一个 html 表单，它有一个输入框、一个提交按钮和一个结果框。提交时，输入被发送到完成查询的 php 文件，我试图将数据库中的字段回显到结果框中，我在表单中将其称为“答案”。

这是我的 php 文件：

```
<?php
$hostname = 'myhost.com';
$username = 'ratetable';
$password = 'mypassword';
$term = (int) $_GET['term'];

try {
   $dbh = new PDO("mysql:host=$hostname;dbname=ratetable", $username, $password);
   echo 'Connected to database<br />';

   foreach($db->query('SELECT * FROM rates WHERE mileage<=$term' DESC LIMIT 1) as $row) {
      echo "<input type='text' name='answer' value='$row['ratepermile']'>";
   }
}         

?> 
```

但是，在我想将数据库行中的字段（ratepermile）回显到“答案”文本框的行上，我收到“解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，期待 T_STRING 或 T_VARIABLE 或 T_NUM_STRING” . 我做了一些检查，发现这个错误意味着我缺少一些右括号或类似的东西，但我没有看到它正在窒息。

有人可以告诉我是什么造成了问题吗？

谢谢你看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:27:41.927

你有不匹配的报价

```
foreach($db->query('SELECT * FROM rates WHERE mileage<= ' . $term . ' DESC LIMIT 1') as $row) { 
```

和这里

```
echo "<input type='text' name='answer' value='" . $row['ratepermile'] . "'>"; 
```

您也没有 catch 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:36:12.890

替换这个：

```
foreach($db->query("SELECT * FROM rates WHERE mileage<='".$term."' DESC LIMIT 1") as $row) {
  echo "<input type='text' name='answer' value='".$row['ratepermile']."'>";
} 
```

用你的 foreach 代码然后放

```
catch (PDOException $e) {
  echo $e->getMessage();
  throw($e);
} 
```

尝试后{ }

希望对你有帮助！

# twitter - 按用户统计推文

> ID：14361840
> 
> 赞同：1
> 
> 时间：2013-01-16T15:25:42.557
> 
> 标签：twitter, counter

我一直在用标签 mooc（大规模在线开放课程）抓取推文。我现在想识别发送推文的用户以及每个用户的推文数量

这就是我识别用户的方式：

```
for page in range(1,16):

url='http://search.twitter.com/search.json?q=mooc&rpp=100'+str(page)
file=urllib.urlopen(url)
search = json.load(file)
for entry in search['results']:
     pprint.pprint(entry['from_user']) 
```

这适用于打印数据，但现在我正在努力存储这些数据，而不是打印它，以便计算每个用户的推文。

```
import collections
y=collections.Counter(users)
print y 
```

也欢迎任何其他关于如何计算用户推文的想法！

# php - 将 PHP 变量的内容打印为 HTML 中的文本字符串

> ID：14361844
> 
> 赞同：2
> 
> 时间：2013-01-16T15:25:58.640
> 
> 标签：php, html, variables

在 wordpress php 脚本中，我有以下内容：

```
echo '<div class="slide-media">' . $slide_media . 
     '</div><!--/.slide-media-->' . "\n";               } 
```

我想查看`$slide_media`变量内部的内容。基本上，所以我可以添加到图像的链接。

纯文本函数是否有变量？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:28:44.057

如果您将原始 HTML 输出到 HTML 文档（并且您希望它显示为`<b>text</b>`而不是**text**），您可以使用[`htmlentities($string)`](http://php.net/manual/en/function.htmlentities.php)：

```
htmlentities($slide_media); 
```

如果你的字符串是 UTF8，你可能需要指定这个（*如果你的 PHP 版本是 5.4+，你不必指定 UTF-8，因为它是默认的*）：

```
htmlentities($slide_media, ENT_QUOTES, "UTF-8"); 
```

您还可以使用以下方法从变量中删除所有 HTML 标记[`strip_tags($string)`](http://dk1.php.net/manual/en/function.strip-tags.php)：

```
strip_tags($slide_media); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:28:12.233

要查看变量中的内容（可能是数组、对象或其他内容），请使用 print_r($slide_media); 或 var_dump($slide_media);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:33:16.950

我会做：

```
echo '<pre>' . var_export($slide_media, true) . '</pre>'; 
```

或者可能

```
echo '<pre>' . var_export(array_map('htmlentities', $slide_media), true) . '</pre>'; 
```

如果 $slidemedia 是一个包含 html 内容的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:28:12.180

[print_r](http://php.net/manual/en/function.print-r.php)打印关于变量的可读信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T15:34:25.147

```
<?php print_r($slide_media); ?> 
```

应该为您解决问题。

# facebook-like - 时间线上发布了错误的 facebook 预览

> ID：14361848
> 
> 赞同：1
> 
> 时间：2013-01-16T15:26:11.007
> 
> 标签：facebook-like

在此页面中：[http](http://www.rockit.it/dimartino/concerti) ://www.rockit.it/dimartino/concerti我有一个 Facebook Like 按钮。这曾经奏效。它工作了很多个月。现在它不能正常工作，会发生这种情况：当我单击“赞”按钮时，在我的时间线上发表评论的 facebook 对话框打开正常。但是当我将内容发布到时间线时，预览是错误的。代替描述出现“链接链接链接链接”文本。[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)工具没有显示任何错误。

发布时一切似乎都很好： ![像按钮对话框问题](../Images/f5a5b5d4ed842f0dd2e6364162db4a61.png)

但是时间轴中的预览是错误的： ![在此处输入图像描述](../Images/e686b3f8b580ee465d56b81e5ba3691d.png)

你知道如何解决这个问题吗？找不到我的“链接链接链接链接”facebook 问题。

# c - 释放在 2D 结构中分配的内存

> ID：14361851
> 
> 赞同：-2
> 
> 时间：2013-01-16T15:26:22.690
> 
> 标签：c, free

嗨，我有以下代码，我在 100×250 结构数组中分配内存。使用它后，我想释放内存，但我找不到方法。

```
/*trial programe for storing sample data for each beam of each ping*/

#include <stdio.h>
#include <math.h>
typedef struct{ // in this structure we will define the pointers. so just data type and variable.
    int count;
    float *samples;
    float *deTVG_BS;
} card;

main()
{
    //float a,*p;
    int i,j,k,l,m,variable;
    l=100;
    m=250;
    variable=10;
    card acard[l][m]; 
    //printf("size of acard before memory allocation is %d\n",sizeof(acard));

    /* now we will alocote memory for all the pointers we have defined in structure.
     * The memory size can be different for each pointer. 
     * In our case memory size will depends on number of samples for each beam.
     *   * */

    for(i=0;i<l;i++) // i is number of profiles
        {
            for (j=0;j<m;j++) // j is number of beam
                {
                    acard[i][j].count=variable; //from 1 to 400;
                    acard[i][j].samples=(float*)calloc(acard[i][j].count,sizeof(float));
                    acard[i][j].deTVG_BS=(float*)calloc(acard[i][j].count,sizeof(float));

                    for(k=0;k<acard[i][j].count;k++)
                        {
                            acard[i][j].samples[k]=k*1.0;// in reality will be different values
                            acard[i][j].deTVG_BS[k]=k*100.0; // in reality will be different values
                        }
                }
                printf("allocated memeory for profile %d\n",i);
        }

    for(i=0;i<l;i++) // i is number of profiles
        {
            for (j=0;j<m;j++) 
            {
                void free(acard[i][j].samples);
                void free(acard[i][j].deTVG_BS);

            }
        }

    void free(acard);
} 
```

我不确定我是否应该运行最后一个 for 循环或者只是 free(acard) 就足够了？

非常感谢你。阿南德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:31:13.033

无论您在哪里调用 calloc 并存储了返回值，都需要在完成后对该值调用 free。通常，只需按照您分配它们的相反顺序释放东西即可为您省去很多麻烦。

为此，您似乎需要像现在一样迭代并在每个 acard[i][j] 上执行 2 次释放。

你不需要在 acard 上调用 free 但是因为这是一个堆栈变量（实际上我希望断言/崩溃试图释放你没有用 malloc/calloc/etc 分配的东西..）

# c++ - 为什么这个`auto`不会自动变成“`const`”

> ID：14361854
> 
> 赞同：4
> 
> 时间：2013-01-16T15:26:29.960
> 
> 标签：c++

> **可能重复：**
> [c++11 中的自动引用](https://stackoverflow.com/questions/14008893/auto-reference-in-c11)

我学习 C++ 越多，我就越意识到到目前为止（几乎；见下文）其中的所有内容基本上都是有意义的。我发现我真的不需要背诵任何规则，因为一切都按预期进行。所以主要的事情变成了真正理解这些概念，然后剩下的就自己处理了。

例如：

```
const int ci = 0;
auto &a = ci;       //automatically made const (const int &) 
```

这有效且有意义。任何其他类型的`a`都是荒谬的。

但是现在拿这些：

```
auto &b = 42;       //error -- does not automatically become const (const int)
const auto &c = 42; //fine, but we have to manually type const 
```

为什么第一个错误？为什么编译器不会自动检测到这一点？为什么`const`必须手动输入？我想从根本上真正理解为什么，这样事情才有意义，而不必背诵任何严格的规则（见上文）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T15:29:02.983

的类型`42`是`int`，不是`const int`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:32:52.887

C++11 中的`auto`关键字的行为与模板类型推导的工作方式非常接近（回到您的*概念*方法）。如果您根据模板参数推导来说明类型推导，它会变得更加明显（我相信）：

```
template <typename T>
void f(T);
template <typename T>
void g(T&);

const int i;
f(i);              --> T deduced to be int
g(i);              --> T deduced to be const int 
```

基本上，您正在创建一个使用现有变量初始化的新变量。您从中复制的原始对象的常量性与目标对象的常量性正交。

# r - R中的连续独立方式（不使用滑动窗口）

> ID：14361858
> 
> 赞同：3
> 
> 时间：2013-01-16T15:26:44.807
> 
> 标签：r, moving-average

我想计算类似于滚动平均值或移动平均值的东西，但不通过滑动窗口这样做。例如，对于以下一组数字，我希望在 5 组下方显示平均值：

```
 1,2,3,4,5,1,2,4,5,6,7,8,1,2,3,1,1,3,2,1    
|    3    |   3.6   |   4.2   |   1.6   |  //mean of every 5 numbers 
```

我知道`movingAverages`TTR 库中的可用`rollmean`功能，以及两者都使用滑动窗口的功能，因此执行以下操作相当简单：

```
d <- c(1,2,3,4,5,1,2,4,5,6,7,8,1,2,3,1,1,3,2,1)
m <- rollmean(d,5)
m[seq(1,length(m),5)]
> [1] 3.0 3.6 4.2 1.6 
```

但是我有一个大数据集，必须有一种更有效的计算方法……有什么想法吗？我假设有一个函数可以做到这一点，但我想不出这种平均值叫什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T15:31:21.450

如果我理解正确，您可以这样做：

```
x <- c(1,2,3,4,5,1,2,4,5,6,7,8,1,2,3,1,1,3,2,1)

colMeans(matrix(x, nrow=5))
3.0 3.6 4.2 1.6 
```

* * *

这是做什么的：

*   将数据转换为矩阵
*   取列的意思

* * *

由于这是对向量的单个操作（矩阵本身就是向量），所以这应该非常快。例如，对于包含 1000 万个元素的向量：

```
x <- runif(1e7)
system.time(colMeans(matrix(x, nrow=5)))
   user  system elapsed 
   0.05    0.02    0.07 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T15:41:59.297

只是为了好玩，这里是你可以做到的`tapply`

```
tapply(x, rep(seq(length(x)/5),each=5), mean)
##   1   2   3   4 
## 3.0 3.6 4.2 1.6 
```

这很容易适用于长度不能被 5 整除的向量：

```
x <- c(x, 2)
tapply(x, head(rep(seq(ceiling(length(x)/5)), each=5),length(x)), mean)
##   1   2   3   4   5 
## 3.0 3.6 4.2 1.6 2.0 
```

# wcf - Azure 服务总线中继 - 监控请求流量

> ID：14361863
> 
> 赞同：1
> 
> 时间：2013-01-16T15:26:57.557
> 
> 标签：wcf, azure, azureservicebus, iis-logs, azure-servicebusrelay

我们使用**Azure 服务总线中继**向外部公开内部 WCF 服务，但是当尝试将我们的外部服务使用与 IIS 日志对应起来时 - 由于 Web 服务器日志中没有服务总线中继请求的条目，我们做得不够。这是有道理的，因为我们向云中继建立了一个出站 HTTP 请求，并且所有请求都通过这个主机连接（*我们正在使用`HttpRelayBinding`*）提供服务。

在为中继请求提供服务时，是否有任何方法可以创建 IIS 日志条目，或者我们必须求助于**[WCF 诊断日志记录](http://msdn.microsoft.com/en-us/library/dd788183%28v=bts.10%29.aspx)**来跟踪我们的中继使用情况？我们的目标是将我们的 Azure 计费（*交易/月*）与我们的实际中继使用情况相协调。有没有其他人尝试过这个或找到一个简单的解决方案来跟踪或监控**服务总线中继流量**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:42:13.127

我不知道直接写入 IIS 日志的机制。

如果您需要使用状态码记录请求/响应的数量，您可以将自定义 IMessageInspector 添加到您的服务（可以通过自定义 WCF 服务行为添加）。响应消息将具有 HttpResponseMessageProperty，其中将包含 HTTP 状态代码。使用这种方法，您可以以与 IIS 创建的格式相似的格式记录数据。

# macros - 捕捉 Julia 赋值错误的宏

> ID：14361866
> 
> 赞同：1
> 
> 时间：2013-01-16T15:27:11.603
> 
> 标签：macros, julia

在使用 Julia 宏时，我似乎又回到了试错编程中，这也不例外。我正在尝试编写一个简单的宏来捕获表达式中的任何错误并在表达式失败时设置一个标志。这是一个宏，因为我希望在调用上下文中评估表达式（可能包括一个或多个赋值语句）。所以，像：

```
macro flag_errors(ex)
    broken = false
    esc(quote
        try
            $(ex)
        catch
            broken = true
        end
    end) 
end 
```

我已经尝试了各种嵌套`esc`函数的方法，但是我还没有找到一种可以在调用环境中正确评估赋值的方法：

```
julia> @flag_errors a=2
2

julia> a
a not defined

julia> @flag_errors a=2+"X"
true

julia> a
a not defined

julia> broken
broken not defined 
```

编写此宏的正确方法是什么？块是否`try`导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:22:40.260

我同意 Toivo 的观点，这是一个范围问题。例如，运行以下代码在全局环境中正确分配 a：

```
julia>@flag_errors global a = 2
a

julia>a
2 
```

如果您对`a`存在于全球环境中感到满意，那么这可以解决问题。如果这已经在另一个范围内（函数、尝试等），我们将不得不进一步试验。

干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-05T16:45:43.873

这里有一些问题。一种是你有两个不相关的变量被命名`broken`——一个在宏中，一个在引用的正文中。另一个是表达式缺乏卫生转义——它应该被插值`$(esc(ex))`，以便向宏扩展器指示它应该在宏调用者的上下文中进行评估，而不是在宏定义上下文中。最后是 Toivo 提到的范围问题。使它表现得好像它不在新块中所需的范围分析甚至可能是不可能的；我不完全确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:19:04.880

我认为该`try`块是这里的罪魁祸首，因为它引入了一个新的范围块。通常需要进行一些非常严肃的元编程来分析分配，`ex`以便能够撤消此操作。你为什么需要它？

# javascript - 链接到 MVC 的 JavaScript

> ID：14361871
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:27:25.910
> 
> 标签：javascript, asp.net-mvc, google-maps

我有带有自定义引脚的谷歌地图，但引脚被编程到 .js 文件中。

我希望能够以某种方式将 javascript 链接到我的 MVC 4 应用程序中的数据库表，这样我就可以添加、编辑和删除引脚，而无需对其进行编码。

想法？

这是 1 Marker 的编程代码：

```
//----Logo----//
var markerLogo= new google.maps.MarkerImage('images/administration.png',
new google.maps.Size(32, 37),
new google.maps.Point(0, 0),
new google.maps.Point(16, 37)
);

//----Content----//
var contentString = 'Contract';

//----Content-Link----//
var infowindow = new google.maps.InfoWindow({
    content: contentString
});

//----Marker-Position----//
var markerPos = new google.maps.LatLng(51.164999, -0.856703);
var markerInfo = new google.maps.Marker({
    position: markerPos,
    map: map,
    icon: markerLogo,
    title: "Contract"
});

//----Info-Function----//
google.maps.event.addListener(this, 'click', function () {
    open(map, this);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:42:31.267

我不确定这是您需要的，但您可以查看[KnockoutMVC](http://knockoutmvc.com)项目。这个开源框架允许基于服务器端生成客户端代码（是的，老实说，这是我们研发部门的产品）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:33:27.613

不是直接的答案，但试试这个。它在我的 MVC 4 应用程序中运行良好

[http://googlemapmvc.codeplex.com/](http://googlemapmvc.codeplex.com/)

# android - PhoneGap：完成 UI Plugin 后将 WebView 带到焦点

> ID：14361877
> 
> 赞同：1
> 
> 时间：2013-01-16T15:27:43.830
> 
> 标签：android, cordova, phonegap-plugins

在我的视频插件结束播放视频后，我需要将控件返回给 WebView。

VideoView 在 UIThread 中播放视频。视频完成后，线程应该结束，主 WebView 应该设置为焦点和活动。

我怎样才能做到这一点？

```
public class VideoPlayer extends CordovaPlugin {

@Override
public boolean execute(String action, JSONArray args, final CallbackContext callbackContext) throws JSONException {

    if ("playVideo".equals(action)) {
        cordova.getActivity().runOnUiThread(new Runnable() {
            public void run() {                         
                final VideoView videoHolder = new VideoView(cordova.getActivity().getApplicationContext());
                cordova.getActivity().setContentView(videoHolder);
                videoHolder.setVideoURI(Uri.parse("file:///sdcard/Android/data/Bis/v2.mp4"));
                videoHolder.requestFocus();
                videoHolder.start();            
                callbackContext.success(); // Thread-safe.

                videoHolder.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                    @Override
                    public void onCompletion(MediaPlayer mp) {

                    // return Control back to the WebView

                    }
                });
            }
        });
        return true;
    }
    return false;
} 
```

# ruby-on-rails - 授权用户仅使用 Rails 编辑他们的帐户

> ID：14361878
> 
> 赞同：0
> 
> 时间：2013-01-16T15:27:49.207
> 
> 标签：ruby-on-rails

我想允许用户编辑他们的帐户，并且只编辑他们的帐户，而不使用 Devise 和/或 Cancan。

我有以下内容`application_controller`：

```
helper_method :current_user
helper_method :require_proprio

private

def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end

def require_proprio
    unless current_user == (params[:id])
        render :file => "#{Rails.root}/public/422", :status => 500
     end
end 
```

这是`users_controller`：

```
before_filter :require_proprio , :only => [ :edit, :update] 
```

但是，例如，当我与 连接时`user.id = 10`，我无法访问该页面`http://localhost:3000/users/10/edit`。页面`public/422`出现。我也尝试访问`http://localhost:3000/users/11/edit`，结果是一样的（public/422）。

有人知道我可以解决的方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:30:48.393

```
unless current_user == (params[:id]) 
```

current_user 是一个对象，所以这永远不会是真的。尝试：

```
unless current_user.id == params.fetch(:id).to_i 
```

# c# - 在 WPF 中创建“运行文本”控件的最有效方法是什么

> ID：14361883
> 
> 赞同：0
> 
> 时间：2013-01-16T15:28:01.960
> 
> 标签：c#, wpf, optimization, user-interface, .net-4.0

我即将制作一个 WPF 控件，它呈现类似于水平运行文本的内容。然而实际上，显示的垂直项目是一组复杂的文本和形状（每个项目都不同，并由其底层对象属性驱动）。一旦将垂直项目添加到右侧，它就不会改变，也必须从视图中删除最左侧的项目。

现在的问题（我不知道如何快速对这些替代方案进行基准测试）是 - 什么是更有效的方法？难道我

*   保持固定数量的垂直项目（与控件宽度相关）并滚动底层数据项目（每次新项目来自左侧）？

*   继续删除最左侧的 UI 垂直项并将其移动到右侧将其 DataContext 更改为新数据项？

或者简而言之 -**什么更有效 - UI 项目或数据绑定底层对象的轮换？**

请注意 - 该应用程序的延迟非常低，我想充分利用解决方案，因为我需要确保采取所有避免 UI 瓶颈的机会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:20:46.457

由于没有人可以回答，我不得不对其进行基准测试。简而言之，**UI 滚动实际上比数据滚动快 10 倍**。

如果让附加文件，我会将项目文件放在 zip 中以供好奇。

# android - Android 唤醒锁未释放

> ID：14361886
> 
> 赞同：1
> 
> 时间：2013-01-16T15:28:05.403
> 
> 标签：android, release, wakelock

我得到了`onCreate`方法中的唤醒锁，它工作正常（我还设置了权限）：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "Wake lock");
wl.acquire(); 
```

但是，当我尝试像这样发布它时：

```
@Override
protected void onDestroy() 
{
    super.onDestroy();
    wl.release();
} 
```

由于某种原因它没有被释放。这怎么可能 ？有任何想法吗 ？

**编辑**：我有一个退出按钮，它调用完成（），然后调用 onDestroy（）。当我按下退出按钮然后让手机进入睡眠状态时，我希望我的程序无法运行，但它可以运行，这表明我的锁没有被释放

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:31:42.527

确定您的`WakeLock`-release 代码是否有效的正确方法是`adb shell dumpsys power`在发布之前和之后使用 ，查看您的代码是否`WakeLock`已发布。由于其他应用程序可以随时请求和获取`WakeLocks`，因此其他随意检查（例如，我的应用程序是否在屏幕关闭时运行？）将是不可靠的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:37:08.163

`release()`将代码更改`onPause()`为 Activity。根据Android文档，解释了调用Activity的acquire（）`onResume()`并释放Activity的wakelock `onPause()`。在您的情况下，您正在使 Activity 休眠但不破坏它，因此它不会释放唤醒锁。所以把它移到`onPause()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-24T12:21:21.547

这是我的解决方案。你可以使用`isHeld()`函数来做到这一点

```
 if (wl!= null && wl.isHeld()) {
    wl.release();
    wl= null;
 } 
```

# c# - LINQ to Entities 无法识别该方法

> ID：14361892
> 
> 赞同：3
> 
> 时间：2013-01-16T15:28:12.720
> 
> 标签：c#, linq, entity-framework, linq-to-entities

LINQ to Entities 无法识别该方法...

伙计们，我很抱歉。我意识到这个问题已经被数百人提出。不幸的是，我已经达到了我的心理界限，而且我找到的答案似乎都不符合我的情况。

这是我试图做的：

```
var apiMenuItems = menuItems.Select(item => new ApiMenuItem()
            {
                ID = item.ID,
                Name = item.Name.GetLocalizedString("en")
            }); 
```

如您所见，我想创建几个 ApiMenuItem 类型的新对象（这是一个非常简单的类）。

```
 public class ApiMenuItem
 {
    public Guid ID { get; set; }
    public string Name { get; set; }
 } 
```

据我了解，Entity Framework 需要将我的 LINQ 语句转换为纯 SQL。这不适用于我的 GetLocalizedString(string languageCode) 扩展方法。

任何人都可以帮我解决这个问题的一些代码 - 或解决它吗？我自己真的想不出解决方案:-(

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:46:27.867

如果您`ToList()`在选择 ApiMenuItem 之前使用从数据库中获取项目，它会起作用：

```
var apiMenuItems = menuItems.ToList().Select(item => new ApiMenuItem()
{
    ID = item.ID,
    Name = item.Name.GetLocalizedString("en")
}); 
```

但出于性能原因，您应该这样做：

```
var apiMenuItems = menuItems.Select(item => new 
{
    //What to select from db
    ID = item.ID, 
    Name = item.Name
}).ToList() //Fetch from db
.Select(item => new ApiMenuItem()
{
    //Select with code
    ID = item.ID,
    Name = item.Name.GetLocalizedString("en")
}); 
```

# dart - 参数化列表上的飞镖混淆

> ID：14361895
> 
> 赞同：1
> 
> 时间：2013-01-16T15:28:19.137
> 
> 标签：dart

为什么这段代码没有引发错误？

```
List<String> x;

void main() {
  x = [1,23,3,423,2];
  print(x);
} 
```

很抱歉这个新手问题，但我刚开始学习飞镖，我问这个是因为我理解`x`只能包含一个列表`String`并且应该引发异常，因为值不是一个列表`String`而是一个列表`num`。这是一个错误，还是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:38:28.773

这是可选的输入操作。

```
var x; // same as List<String> x
List<String> y;

main() {
  x = [1,2,3,4];
  y = x; // valid
  x = y; // valid
  print(x); // [1,2,3,4]
  print(y); // [1,2,3,4]
} 
```

无论您指定`List<String>`或`var`，您的代码都将执行相同的操作。工具使用类型注释 ( `List<String>`) 来验证您的代码。

dartlang 网站上的一篇好文章是关于[可选类型](http://www.dartlang.org/articles/optional-types/)的。

**编辑：**实际上，这也是关于列表的一个有趣点。如果您使用文字列表（例如，`[]`）初始化列表，那么您实际上是在创建一个`List()`，例如：

```
main() {
  var x = new List(); 
  var y = [];
  print(x is List); // true
  print(y is List); // true
} 
```

但是，如果您想要使用泛型的类型化列表，则必须使用构造函数语法，例如：

```
main() {
  var x = new List<String>();
  print(x is List); // true
  print(x is List<String>); // true
  print(x is List<num>); // false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:37:41.827

Dart 类型是可选的，不是静态的。所以在运行时所有类型的注解基本上都被替换为`var`

# html - 960 网格系统导航栏问题

> ID：14361896
> 
> 赞同：0
> 
> 时间：2013-01-16T15:28:19.463
> 
> 标签：html, css, 960.gs, navigationbar

我试图让我的导航栏扩展到 16 Column Grid 的整个容器。在 Chrome 中并没有一直延伸。在 Firefox 中，它显得很奇怪。这告诉我我正在以某种方式打破网格。有人可以帮忙吗？这是我的代码：

```
<div class="container_16" id="container">
    <div class="grid_16" id="header image">
        <img src="img/condley-employees.png" />
    </div><!-- end of header image -->
    <div class="clear"></div>

    <div class="container_16 clearfix" id="main-nav" align="center">
        <ul>
            <li><a href="#">HR</a></li>
            <li><a href="#">Departments</a></li>
            <li><a href="#">Employee Fun</a></li>
            <li><a href="#">Marketing</a></li>
            <li><a href="#">Calenders</a></li>
            <li><a href="#">Misc.</a></li>
        </ul>
    </div><!-- end of navigation --> 
```

CSS：

```
#main-nav ul {
    margin: 3px;
    padding: 0;
    list-style: none;
    width: 940px;
}

#main-nav li { 
    display: inline;
}

#main-nav li a { 
    text-decoration: none;
    padding: 5px 0;
    width: 150px;
    background: #006699;
    color: #eee;
    float: left;
    text-align: center;
    border-left: 1px solid #fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:31:59.523

看来您缺少容器的关闭 div

```
 </div><!-- end of container--> 
```

结果，您将容器嵌套在容器中。

此外，您应该为`grid_16`您添加一个类`#main-nav` `ul`而不是指定高度。

您应该阅读一些有关使用网格系统的资源：

[http://net.tutsplus.com/tutorials/html-css-techniques/prototyping-with-the-grid-960-css-framework/](http://net.tutsplus.com/tutorials/html-css-techniques/prototyping-with-the-grid-960-css-framework/) http://www.webdesignerdepot.com/2010/03/fight-div- itis-and-class-itis-with-the-960-grid-system/

* * *

**更新：**

改变

`<div class="container_16 clearfix" id="main-nav" align="center">`

至

`<div class="grid_16 clearfix" id="main-nav" align="center">`

应该解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:19:36.640

我希望这个解决方案可能会有所帮助。红色边框是容器边界。如果我误解了某些事情，请告诉我。

JSBin 链接：http: [//jsbin.com/oludot/1/edit](http://jsbin.com/oludot/1/edit)

# sql-server-express - 如何在 OVER 中使用 COUNT 子句？

> ID：14361905
> 
> 赞同：0
> 
> 时间：2013-01-16T15:28:59.353
> 
> 标签：sql-server-express

我目前是 sql 查询语言的初学者，目前正在努力使以下查询正常工作：

```
USE test;
GO
SELECT deal_type, price_type, 
    COUNT(deal_type) OVER(PARTITION BY deal_type) AS "Count1"
,COUNT(price_type) OVER(PARTITION BY deal_type) AS "Count2"  
FROM deal_price
WHERE deal_type = "rmbs", "Abs"
GO 
```

我目前收到错误消息（“msg 156”）

所需的输出如下所示：

```
--deal_type, price_type, count_1
--rmbs, talk, 23
--rmbs, cvr, 40
--abs, talk, 40 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:00:12.167

使用`In-clause`：

```
USE test;
GO
SELECT deal_type, price_type, 
COUNT(deal_type) OVER(PARTITION BY deal_type) AS 'Count1',
COUNT(price_type) OVER(PARTITION BY deal_type) AS 'Count2'  
FROM deal_price
WHERE deal_type in ('rmbs', 'Abs')
GO 
```

# objective-c - 将数据与 Core Data 同步

> ID：14361912
> 
> 赞同：1
> 
> 时间：2013-01-16T15:29:21.063
> 
> 标签：objective-c, macos, performance, cocoa, core-data

我正在将数据从 iTunes 写入核心数据。

现在，第一次同步大约需要 10 秒，
但是更新数据大约需要 30 秒。
我的电脑有一个 SSD，所以它很可能在 HDD 上更慢。

我正在做的是，我得到了一系列歌曲，我必须为每首歌曲进行一次提取，以检查它是否已经在 Core Data 中，如果没有，我必须插入它。

知道歌曲是否已经存在的唯一方法是检查`persistentID`.
它基本上是一个用于识别的持久唯一 ID。

我可以通过检查来查看歌曲是否已经添加

```
[NSPredicate predicateWithFormat:@"persistentID == %@", song.persistentID]; 
```

不是一个非常聪明的主意。

你能给我什么建议来加快这个速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:54:06.057

首先，获取要比较的所有歌曲的 ID。然后，您只需前往持久性商店即可获得新歌曲。

获取ID，

```
NSArray *allIDs = [existingSongs valueForKeyPath:@"persistentID"]; 
```

然后使用这样的谓词进行提取。

```
[NSPredicate predicateWithFormat:@"persistentID NOT IN %@", allIDs]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:49:02.207

第一次同步总是很短，因为它不会执行任何获取请求。

核心数据喜欢： 批量请求 小批量

对于批量请求，Mundi 完美地回答了这个问题。这个较小的集合将仅是您需要更新的集合。

下一部分是指较小的批次。如果你用多线程分解它，你可以极大地加快更新速度。由于您正在保存并且我对数据集知之甚少，请查看[cimg 上的多线程核心数据教程](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)。

# ebean - avaje.org/ 经常宕机

> ID：14361915
> 
> 赞同：3
> 
> 时间：2013-01-16T15:29:28.087
> 
> 标签：ebean

我开始使用 Ebean，我喜欢它。但一开始我需要访问文档和类似的东西。现在我想下载 Ebean 的源代码以将其集成到 Eclipse 中。但是网站[http://www.avaje.org/](http://www.avaje.org/)再次关闭。

我与 Ebean 合作了三天，在空闲时间，网站非常慢，甚至无法访问。这是正常的吗？我可以信任无法访问项目网站的项目吗？我想使用它至少（！）一两年 - 但目前我不相信那个项目。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:43:35.473

我也是 Ebean 的粉丝，现在已经使用了大约 9 个月，发现它非常可靠。这是我使用该网站后第一次看到该网站宕机，所以有点意外。但是，如果它让您感觉更好，它是 Play Framework 2.0 ( [http://www.playframework.org/documentation/2.0/JavaEbean](http://www.playframework.org/documentation/2.0/JavaEbean) ) 的 Java 部分包含的默认 ORM，如果这说明了它的可靠性。

如果你担心的话，我也会尝试发布到 EBeans google Group：[https ://groups.google.com/forum/?fromgroups=#!forum/ebean（它仍然很活跃）。](https://groups.google.com/forum/?fromgroups=#!forum/ebean)大约一周前，主要维护者 Rob Bygrave 刚刚回复了一篇帖子。他还提到，由于日程安排，他对 EBean 的参与将被搁置到今年 2 月之后。

编辑：maven repo 也提供了资源： [http ://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.avaje%22%20AND%20a%3A%22ebean%22](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.avaje%22%20AND%20a%3A%22ebean%22)

# mysql - 我无法在表中创建外键。我该怎么办？

> ID：14361918
> 
> 赞同：3
> 
> 时间：2013-01-16T15:29:40.117
> 
> 标签：mysql, sql, phpmyadmin, foreign-keys

我有名为`add_disease`and的表`specificity_of_gender`。我想将表的主键设置为`specificity_of_gender`表中的外键`add_disease`。我的代码如下：

```
--
-- Table structure for table `add_disease`
--
CREATE TABLE IF NOT EXISTS `add_disease` (
  `Disease_Id` int(100) NOT NULL AUTO_INCREMENT,
  `Disease_Name` varchar(100) NOT NULL,
  `Gender_Id` int(100) NOT NULL,
  `Age_Id` int(100) NOT NULL,
  `Notion_Id` int(100) NOT NULL,
  `Type_Id` int(100) NOT NULL,
  `Stage_Id` int(100) NOT NULL,
  `Scope_Id` int(100) NOT NULL,
  `Symptoms` text NOT NULL,
  `Description` text NOT NULL,
  `Image` int(100) NOT NULL,
  PRIMARY KEY (`Disease_Id`),
KEY ` Gender_Id ` (`Gender_Id `),
KEY ` Age_Id ` (`Age_Id `),
KEY ` Notion_Id ` (`Notion_Id `),
KEY ` Type_Id ` (`Type_Id `),
KEY ` Stage_Id ` (`Stage_Id `),
KEY ` Scope_Id ` (`Scope_Id `)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
--
-- Dumping data for table `add_disease`
--** 
```

和

```
--
-- Table structure for table `specificity_of_gender`
--

CREATE TABLE IF NOT EXISTS `specificity_of_gender` (
  `Gender_Id` int(100) NOT NULL AUTO_INCREMENT,
  `Gender_Name` varchar(100) NOT NULL,
  PRIMARY KEY (`Gender_Id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

--
-- Dumping data for table `specificity_of_gender`
--

INSERT INTO `specificity_of_gender` (`Gender_Id`, `Gender_Name`) VALUES
(**1, 'Male'),
(2, 'Female'),
(3, 'Others'); 
```

MySQL说

```
Error

SQL query:
--
-- Database: `online_medical_service`
--
-- --------------------------------------------------------
--
-- Table structure for table `add_disease`
--
CREATE TABLE IF NOT EXISTS `add_disease` (
`Disease_Id` int( 100 ) NOT NULL AUTO_INCREMENT ,
`Disease_Name` varchar( 100 ) NOT NULL ,
`Gender_Id` int( 100 ) NOT NULL ,
`Age_Id` int( 100 ) NOT NULL ,
`Notion_Id` int( 100 ) NOT NULL ,
`Type_Id` int( 100 ) NOT NULL ,
`Stage_Id` int( 100 ) NOT NULL ,
`Scope_Id` int( 100 ) NOT NULL ,
`Symptoms` text NOT NULL ,
`Description` text NOT NULL ,
`Image` int( 100 ) NOT NULL ,
PRIMARY KEY ( `Disease_Id` ) ,
KEY ` Gender_Id ` ( `Gender_Id ` ) ,
KEY ` Age_Id ` ( `Age_Id ` ) ,
KEY ` Notion_Id ` ( `Notion_Id ` ) ,
KEY ` Type_Id ` ( `Type_Id ` ) ,
KEY ` Stage_Id ` ( `Stage_Id ` ) ,
KEY ` Scope_Id ` ( `Scope_Id ` )
) ENGINE = MYISAM DEFAULT CHARSET = latin1 AUTO_INCREMENT =1; 
```

MySQL 说：

```
#1072 - Key column 'Gender_Id ' doesn't exist in table 
```

请问谁能告诉我该怎么办？？请在这件事上给予我帮助... ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:35:40.723

问题是你在定义索引时有额外的空格`column name`，`index name`

```
PRIMARY KEY (`Disease_Id`),
KEY `bGender_Idb` (`Gender_Id `),
KEY ` Age_Id ` (`Age_Id `),
KEY ` Notion_Id ` (`Notion_Id `),
KEY ` Type_Id ` (`Type_Id `),
KEY ` Stage_Id ` (`Stage_Id `),
KEY ` Scope_Id ` (`Scope_Id `) 
```

所以基本上，

```
`Gender_Id ` is not equal to `Gender_Id`
          ^ see extra spaces from here 
```

并且您对所有列都这样做了：`Gender_Id`,`Age_Id`等。

**您应该删除多余的尾随空格，它会起作用。**

下面是固定链接`DDL`

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/0ba70/1)

# asp.net - 接收 JSON 有效负载 asp.net

> ID：14361919
> 
> 赞同：0
> 
> 时间：2013-01-16T15:29:46.337
> 
> 标签：asp.net, .net, json

我正在使用 API 发送短信，下面的 URL 发送短信：

```
https://api.smsified.com/v1/smsmessaging/outbound/7243203328/requests?address=1234567890&message=this%20shall%20send%20delivery%20notice&notifyURL=http%3A%2F%2Flocalhost%2FWebsite8%2FDefault.aspx 
```

NotifyURL 是一个可选参数，它告诉 SMSified 您希望将消息的传递报告发送到哪里。它必须是 SMSified 可以通过 HTTP 向其发送 JSON 有效负载的公开可用 URL。

如何接收使用我的 asp.net 应用程序发送的这个 JSON 有效负载？

下面是发送到定义的 notifyURL 的数据示例：

```
{
"deliveryInfoNotification": {
  "deliveryInfo": {
  "address": "14075550100", 
  "code": "0", 
  "createdDateTime": "2011-05-12T00:55:25.313Z", 
  "deliveryStatus": "DeliveredToNetwork", 
  "direction": "outbound", 
  "message": "Hello world", 
  "messageId": "3e5caf2782cb2eb310878b03efec5083", 
  "parts": "1", 
  "senderAddress": "16575550100", 
  "sentDateTime": "2011-05-12T00:55:34.359Z"
  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:41:18.287

这将作为 POST HTTP 请求到达您的服务器，因此您需要与表单处理类似的 asp.net 代码。然后使用 JSON.NET 之类的东西来解析数据。

ps不是.net开发人员，但每种语言几乎都一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:31:20.967

你是在问你的方法应该怎么写？最简单的方法是创建具有预期字段/属性的数据合同。

例如，这里我们有一个 UserItem 数据协定，并在调用此方法时填充。

```
 [WebInvoke(UriTemplate = "", Method = "POST")]
    public List<UserItem> CreateAccount(UserItem sentUser)
    {
    } 
```

# java - 无法在 Web 应用程序目录中创建文件

> ID：14361923
> 
> 赞同：1
> 
> 时间：2013-01-16T15:29:49.460
> 
> 标签：java, jsp, jakarta-ee

我正在尝试在 Web 应用程序目录中创建一个文件*TestFile.db 。*但是直到现在我都没有成功。我不明白原因。

*尝试创建文件的 JSP 片段：*

```
 <% if(new FileMaker().makeFile()) {%>
        <h2>File Creation successful !</h2>
        <%} else {%>
            <h2>Unable to create a file !</h2>
            <%}%> 
```

*尝试创建文件的类：*

```
public class FileMaker {

private boolean success = false;

public boolean makeFile() {
    try {
        File f = new File("TestFile.db"); // CREATE A FILE
        PrintWriter writer = new PrintWriter(f);
        writer.println("This is a test statement on a test file");
        writer.close();
        success = true;
    }catch(Exception exc) {
        exc.printStackTrace();
        return success;
    }
    return success;
}
} 
```

web-app 命名`App-1`结构如下所示：

![在此处输入图像描述](../Images/d9046e61e231402f483bbd3bce3fe3f5.png)

上面的代码不会产生任何异常并返回`true`，但我没有看到任何文件被创建。这是为什么 ？但是，如果我将声明更改为：

```
File f = new File("/App-1/TestFile.db"); 
```

我得到一个文件未找到异常。我不明白这是为什么。请解释这两种情况。**如何在目录中创建文件`App-1`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:05:01.387

您需要为 filemaker 提供正确的路径。您可以通过从 servlet 上下文中获取正确的路径来做到这一点。

```
<%@page import="com.adtest.util.FileMaker"%>
<% if(new FileMaker().makeFile(this.getServletContext().getRealPath("/"))) {%>
    <h2>File Creation successful !</h2>
    <%} else {%>
        <h2>Unable to create a file !</h2>
        <%}%> 
```

接下来在您的 filemaker 类中添加路径，并且仅在它不存在时创建。

```
public boolean makeFile(String path) {
    try {
        File f = new File(path+"\\TestFile.db"); // CREATE A FILE
        if(!f.exists())
            f.createNewFile();
        PrintWriter writer = new PrintWriter(f);
        writer.println("This is a test statement on a test file");
        writer.close();
        success = true;
    }catch(Exception exc) {
        exc.printStackTrace();
        return success;
    }
    return success;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:52:39.367

尝试调试并使用 f.getAbsolutePath() 来获取创建文件的路径。因此，当您收到路径时，您可以对其进行修改。随着更多信息的出现，请更新问题。您收到未找到的文件，因为它似乎并没有真正创建。你真的调用 mkFile() 命令吗？:)

如果 exists() 返回 false，请执行以下操作：

```
file.createNewFile("fileName");
//write some data to file. 
```

createFileName() 创建完全空白的新文件。

# git - 如何在 Git 中更改提交关联的分支

> ID：14361925
> 
> 赞同：0
> 
> 时间：2013-01-16T15:29:52.690
> 
> 标签：git, branch, git-branch, bitbucket

目前我正在使用 Bitbucket 在 Git 中存储文件和分支。不幸的是，我似乎一直在将现有分支与新分支重新关联，因此在下面只有顶部的分支应该在`feature/availabilityfix`分支上，相反，它还关联了下面所有/仍然在分支上的`feature/searchfix`分支。

是否有可能将所有这些从`feature/availabilityfix`分支与另一个分支分离？我完全被它弄糊涂了！

此外，当我将以前的功能分支合并回`develop`. 时，它现在已将其作为这些文件的分支。这是合并时处理文件的正确方法吗？

![在此处输入图像描述](../Images/8f9364297e9112aa10be2e85caf8ff12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:33:23.380

提交不与分支“关联”，它包含在一个（或多个）中。

假设您有一个分支“develop”，其中包含提交 A。提交一个添加的文件“foo.txt”。您现在基于“develop”中的最新提交创建一个新分支“featureX”。

提交 A 现在包含在分支“develop”和“featureX”中。如果不是这样，分支“featureX”将不包含文件“foo.txt”。

# java - 为什么 Spring propertyplaceholder 没有检测到我对系统属性的更改？

> ID：14361926
> 
> 赞同：1
> 
> 时间：2013-01-16T15:29:54.267
> 
> 标签：java, spring, configuration

我想使用 Spring 的属性占位符控制属性文件的加载并设置系统属性。这就像它应该的那样工作：

```
 <context:property-placeholder
location="classpath:jdbc/jdbc.${TARGET_ENV}.properties" /> 
```

当我在不同的环境中运行我的应用程序时，我设置了系统属性 TARGET_ENV 并拾取了正确的属性文件。

现在我进行了集成测试，我想强制配置始终加载特定的属性文件（jdbc.INTEGRATION_TESTS.properties）。

我有

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
    "classpath:/META-INF/spring/set-system-property.xml", 
    "classpath:/META-INF/spring/applicationContext.xml"}) 
public class AbstractIntegrationTest extends AbstractTransactionalJUnit4SpringContextTests { 
```

和 set-system-property.xml （使用来自[Set System Property With Spring Configuration File](https://stackoverflow.com/questions/3339736/set-system-property-with-spring-configuration-file)的建议）：

```
<beans>
<bean id="systemPrereqs"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" value="#{@systemProperties}" />
    <property name="targetMethod" value="putAll" />
    <property name="arguments">
        <util:properties>
            <prop key="TARGET_ENV">INTEGRATION_TESTS</prop>
        </util:properties>
    </property>
</bean> 
```

但是Spring没有收到该物业：

```
Caused by: java.io.FileNotFoundException: class path resource [jdbc/jdbc.${TARGET_ENV}.properties] cannot be opened because it does not exist
at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157) 
```

为什么这不起作用？我没有得到关于 bean 实例化、工厂 bean 等的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:34:15.637

我不确定，但是从 Spring 上下文文件中设置系统属性还不算太晚吗？我们使用类似的设置，但我们使用 test-context.xml 来代替更改测试的系统属性，它使用固定路径来加载属性

例如在测试中：

```
 <bean id="bridgePropertyPlaceholder" class="org.apache.camel.spring.spi.BridgePropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:be/xxx/broker/standalone-test.properties</value>
        </list>
    </property>   
</bean> 
```

对比

```
 <bean id="bridgePropertyPlaceholder" class="org.apache.camel.spring.spi.BridgePropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>${BROKER_CONF}</value>
        </list>
    </property>   
</bean> 
```

在真实的环境中。

在这里忽略我正在使用 Camel 属性占位符，我们也使用常规的 Spring 属性占位符执行此操作，但现在找不到示例。

# javascript - 如何使用样板js创建组件层次结构？

> ID：14361927
> 
> 赞同：2
> 
> 时间：2013-01-16T15:30:09.490
> 
> 标签：javascript, boilerplatejs

在[boilerplatejs](http://boilerplatejs.org) zip中，有一个带有两个子组件（chartViewPanel和treeViewPanel）的示例组件（salesDashBoard）父组件定义了一个view.html，其中包含两个ids为#tree和#chart的div，但子组件附加到此视图而不是在这两个 div 中呈现。

有没有办法（可能使用 DomController ？）将子组件附加到特定的 DOM 元素而不是仅仅附加它们？这将非常有用，理想情况下我希望有一个 Dom / Url 控制器的层次结构：父母会拦截事件，然后将它们路由给孩子，直到孩子将事件（对于一组特定的 url / dom 事件）路由到一个带有 MVVM 的简单组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:38:17.373

UI 在定义的 div 之外的渲染实际上是一个错误，现在已[修复](https://github.com/ectechno/boilerplatejs/blob/master/src/modules/sampleModule2/salesDashboard/component.js)。

是的，您可以将子视图模板附加到特定的 DOM 元素。`Boiler.ViewTemplate`接受一个 parent 参数，您必须传递需要在其中呈现它的 DOM 元素。

至于您问题的第二部分，您需要的是`contexts`. 您可以将控制器层次结构保留在 UI 组件上。只需将所有 UI 组件也转换为子模块。这意味着您的每个 UI 组件都将有一个`module.js`文件并且是父模块的子模块。例如`application.js`，看看它是如何使用方法加载其子模块的`Base.Context.loacChildContexts()`。

[你可以在BoilerplateJS 网站](http://boilerplatejs.org/)的“产品模块”部分阅读更多关于这个概念的信息

# django - modeltranslation 应用程序不会在模型中添加已翻译的字段

> ID：14361929
> 
> 赞同：1
> 
> 时间：2013-01-16T15:30:10.457
> 
> 标签：django, django-models, django-modeltranslation

我是模型翻译的新手，我有一个问题。当我`manage.py syncdb`在创建模型并在模型翻译`translation.py`应用程序中注册要翻译的字段后执行命令时，不会将翻译后的字段添加到模型中。这些字段在表中。因此，如果我在 python shell 中创建一个对象，我将无法访问`display_en`，因为它会引发错误

```
AttributeError: 'Content' object has no attribute 'display_en' 
```

我的 settings.py ：

```
 DEBUG = True
    TEMPLATE_DEBUG = DEBUG

    ADMINS = (
         # ('Your Name', 'your_email@example.com'),
    )

    MANAGERS = ADMINS

    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
            'NAME': 'test_db',                      # Or path to database file if using sqlite3.
            'USER': 'postgres',                      # Not used with sqlite3.
            'PASSWORD': 'admin',                  # Not used with sqlite3.
            'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
            'PORT': '5432',                      # Set to empty string for default. Not used with sqlite3.
          }
     }

     SITE_ID = 1

     TIME_ZONE = 'UTC'
     LANGUAGE_CODE = 'fr-fr'

     ugettext = lambda s: s

     LANGUAGES = ( 
          ('fr', ugettext('French')),
          ('en', ugettext('English')),
          ('ja', ugettext('Japanese')),
     )

     USE_I18N = True

     TEMPLATE_CONTEXT_PROCESSORS = (
     'django.core.context_processors.auth',
     'django.core.context_processors.debug',
     'django.core.context_processors.i18n',
     )

     USE_L10N = True
     USE_TZ = True

     STATICFILES_FINDERS = (
       'django.contrib.staticfiles.finders.FileSystemFinder',
       'django.contrib.staticfiles.finders.AppDirectoriesFinder',
       # 'django.contrib.staticfiles.finders.DefaultStorageFinder',
    )

   # List of callables that know how to import templates from various sources.
   TEMPLATE_LOADERS = (
        'django.template.loaders.filesystem.Loader',
        'django.template.loaders.app_directories.Loader',
    )

   MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
   )

   ROOT_URLCONF = 'mysite.urls'

   TEMPLATE_DIRS = (
# Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
# Always use forward slashes, even on Windows.
# Don't forget to use absolute paths, not relative paths.
  )

   INSTALLED_APPS = (
       'django.contrib.auth',
       'django.contrib.contenttypes',
       'django.contrib.sessions',
       'django.contrib.sites',
       'django.contrib.messages',
       'django.contrib.staticfiles',
       'tagging',
       #'social_auth',
       'south',
       'django.contrib.admin',
       'sorl.thumbnail',
       'modeltranslation',
       'myapp',
       # Uncomment the next line to enable admin documentation:
       # 'django.contrib.admindocs',
     )

     TRANSLATION_REGISTRY = "myapp.translation" 
```

我的模型.py：

```
 from django.db import models
    from django.utils.translation import ugettext_lazy as _
    from django.conf import settings

    class Test(models.Model):
        display = models.CharField(max_length=1024, null=True, blank=True, verbose_name=_('test.display'))
        url = models.CharField(max_length=1024, null=True, blank=True, verbose_name=_('test.url')) 
```

我的翻译.py：

```
 from modeltranslation.translator import translator, TranslationOptions

    from myapp.models import Test

    class TestTranslationOptions(TranslationOptions):
        fields = ('display')

    translator.register(Test, TestTranslationOptions) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T18:06:30.967

你正在使用南，所以你必须做 ./manage.py 迁移来翻译你的领域。希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T16:03:32.357

模型翻译是否加载？使用开发服务器将`manage.py runserver`调试信息打印到`stdout`.

```
Validating models...

modeltranslation: Registered 2 models for translation (Foo, Bar) [pid:12345].
0 errors found
[...] 
```

如果您没有看到这个（并且您没有停用`DEBUG`），我想在导入时出了点问题。

另外`modeltranslation`你用的是哪个版本？

该`TRANSLATION_REGISTRY`设置从 0.3 开始被弃用，它切换到一致的前缀，所以它变成了`MODELTRANSLATION_TRANSLATION_REGISTRY`.

在 0.4 per-app level 中引入了翻译文件，使此设置完全可选。`translation.py`相反，现在每个应用程序都会自动在其根目录中搜索 a 。同时`MODELTRANSLATION_TRANSLATION_FILES`被添加。也是可选的，它允许扩展翻译文件列表。

尽管`MODELTRANSLATION_TRANSLATION_REGISTRY`即使在最新的开发版本中也保留了对 的支持以保持向后兼容性，但不再建议使用它。相反，只需将其`translation.py`放入您要翻译的应用程序的目录中。

最后，`fields`您的属性`translation.py`应该是一个元组（或列表），您在其中定义一个字符串。当您添加这样的逗号时，Python 只会将其识别为元组：

```
class TestTranslationOptions(TranslationOptions):
    fields = ('display',) 
```

我想这是您的问题中的一个错字，因为`modeltranslation`如果找不到这些字段，我希望能够退出。

# c# - 如何将字符串 MAC 地址转换为十六进制

> ID：14361930
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:30:11.300
> 
> 标签：c#, .net

如何将 MAC 地址转换为C#`string`中`00:18:4d:D0:9d:62`的十六进制字符串？`466F7572746820466C6F6F72`谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T15:33:29.360

MAC 地址几乎是一个十六进制字符串。事实上，如果你去掉 ':' 字符，你就有了一个十六进制字符串。

```
 string hex = macAddress.Replace(":", ""); 
```

到原来的问题

> 00:18:4d:D0:9d:62

简直就是

> 00184dD09d62

和不一样（或长于）

> 466F7572746820466C6F6F72

我对这个问题的最初解读（这可能是不正确的）是 OP 想要十六进制数的*基数 10 。*如果需要任何其他表示，可以使用[string.Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)删除冒号，然后使用[Convert.ToUInt64解析数字](http://msdn.microsoft.com/en-us/library/system.convert.touint64.aspx)

```
string hex = macAddress.Replace(":", "");
uint64 macAsNumber = Convert.ToUInt64(hex, 16); 
```

然后可以将数字转换为所需格式的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:41:57.813

无论如何，问题绝对不清楚......你可以这样做，但结果将意味着什么：

```
Int64 value = Int64.Parse(address.Replace(":", ""), NumberStyles.HexNumber); 
```

否则，您可以按如下方式取回正确的地址值：

```
String[] splits = address.Split(new Char[] { ':' });

address = String.Empty;

foreach (String split in splits)
    address += Byte.Parse(split, NumberStyles.HexNumber); 
```

# visual-studio-2010 - 项目是否使用依赖项进行编译？

> ID：14361934
> 
> 赞同：1
> 
> 时间：2013-01-16T15:30:18.960
> 
> 标签：visual-studio-2010, visual-studio

很抱歉，如果在其他地方问过这个问题 - 但我的猜测是它没有，因为它应该是一个“duh”问题。我有一个包含 5 个项目的解决方案。由于没有“构建解决方案部署包”这样的选项，项目依赖项是否也在部署包中编译/构建？

IE。如果我有一个名为“API-REST”的项目依赖于另一个项目“DbContext”，DbContext 会内置到 API-REST 中还是需要以某种方式单独构建它们？开发似乎比部署到服务器部分更容易。

/confused - 对不起我的白痴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:04:56.743

只要项目在同一个解决方案中，VS 就会在“启动项目”构建时编译所有项目。您将能够在此项目的 bin/debug 文件夹下找到 dll 文件。

因此，当您发布或发送到安装项目时，该文件夹中的所有 dll 也将被包含（尽管默认情况下不会引用 dll），如果您正在寻找项目快速发布后它们将位于“应用程序文件”下文件夹并具有额外的部署扩展。

# css - CSS：定位子级时包装器 div 折叠。有没有更好的办法？

> ID：14361935
> 
> 赞同：0
> 
> 时间：2013-01-16T15:30:19.120
> 
> 标签：css, button, positioning

我正在尝试为我们的内部应用程序解决 OK/CANCEL 按钮的放置问题。
我们希望 OK 和 Cancel 按钮的放置（和样式）一致。

我的想法只是将我们的按钮放在按钮包装器中，然后将它们与该包装器相关联。

但是，问题在于，当我用`position: absolute;`.
由于这个折叠的 div，我的按钮最终悬空。

例子：

```
/*** css ***/
section.blah{
    border: 1px solid #DDD;
    margin: 2em;
    padding: 1.5em 1em;
}
.button-wrapper{ 
    position:relative;
}
.button-wrapper .proceed{
    position:absolute;
    right:0;
}
.button-wrapper .cancel{
    position:absolute;
    left:0;
}

/*** html ***/
<section class="blah">
    <div class="button-wrapper">
        <button class="btn proceed">OK</button>
        <button class="btn cancel">Cancel</button>
    </div>
</section> 
```

如您所见，我们只是希望“确定”类型的按钮位于一侧，而“取消”类型的按钮位于另一侧。
这`position:absolute;`是最好的方法吗？
如果是这样，那么确保我的按钮不会悬挂在其他对象上的优雅方法是什么？

（注意：我*想过*只为包装器分配一个固定的高度，但这似乎太不灵活了。解决方案需要允许任何大小的按钮。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:36:00.833

`position: absolute`并不是真的为此目的。

您真正需要的是`float:left`on .cancel 和`float:right`on .proceed

然而，一旦你这样做了，你仍然会遇到同样的问题，即 .button-wrapper 上的高度为 0。这就是`clear:both`进来的地方。

`clear:both`在两个浮动元素之后，您将需要一个。您可以通过以下两种方式之一添加它：

1）在 .proceed 和 .cancel: 之后添加一个新的 div：`<div class="clear"></div>`使用以下 css：

```
.clear {
  clear: both;
} 
```

2) 您可以在 .button-wrapper 上使用 :after 伪选择器，仅使用 CSS 添加清除：

```
.button-wrapper:after {

  content: '.';
  display: block;
  clear:both;
  visibility:hidden;
  height:0;

} 
```

编辑：这是一个说明选项 2 的 JSFiddle：http: [//jsfiddle.net/P5gj4/](http://jsfiddle.net/P5gj4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:37:12.437

尝试使用浮点数。您需要“清除”包装浮动的块，例如使用`overflow:hidden`. 您可以阅读很多关于浮动和清除的文章。

[http://jsfiddle.net/89NUZ/](http://jsfiddle.net/89NUZ/)

```
.button-wrapper{ 
    overflow:hidden;
}
.button-wrapper .proceed{
    float:left;
}
.button-wrapper .cancel{
    float:right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:37:27.540

尝试使用浮点数而不是使用 position 属性来定位它们。

可能是这样的：

```
section.blah {
    border: 1px solid #DDD;
    margin: 2em;
    padding: 1.5em 1em;
}
.button-wrapper{ 
   overflow: hidden;
}
.button-wrapper .proceed{
   float: right;
}
.button-wrapper .cancel{
   float: left;
} 
```

[http://jsfiddle.net/4CpaW/](http://jsfiddle.net/4CpaW/)

我已在父级上将溢出设置为隐藏以清除浮动。

# iphone - UITableView 处于编辑模式时更改图像隐藏状态

> ID：14361938
> 
> 赞同：1
> 
> 时间：2013-01-16T15:30:38.550
> 
> 标签：iphone, ios, uitableview

这可能是一个简单的问题。我有一个 UITableView，每个单元格都包含一个 UIImageView。我想要实现的是

```
if(is under the editing mode)//Hide UIImageView
if(not in the editing mode)//Show UIImageView 
```

我尝试使用标签来访问那些 UIImageView，但没有运气。我的主要技巧是如何访问这些图像。

你怎么能做到这一点？使用标签？父视图？非常感谢 ： ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:35:33.677

您可以继承 UITableView 并覆盖该方法

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated 
```

然后你可以把你的 if else 块放在里面。

PS：不要忘记调用超类的方法

您可以通过设置 image view.eg 的 hidden 属性来隐藏和显示图像。

```
imageView.hidden = YES; 
```

您可以在头文件中定义图像，然后可以在类的每个方法中访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:04:11.967

`cellForRowAtIndexPath`您可以在正在编辑的条件下隐藏图像视图。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
...

    if (self.editing)
      imageView.hidden = YES;

...
} 
```

然后在设置编辑时重新加载表格视图：

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated
{ 
    [super setEditing:editing animated:animated];

    [self.tableView reloadData];
} 
```

如果我正确理解您的问题，您希望访问所有 tableView 单元格并隐藏 imageView。但这是不可能的，因为您的单元格（如果正确实施）被重用，因此单元格的数量可能少于表格视图中的行数。

这就是为什么您需要在 中设置有关单元格外观的所有内容`cellForRowAtIndexPath`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:38:05.587

在尝试了其他方法之后，我使用 viewWithTag 方法并且它正在工作:) 基本上，我从 100 开始标记，因为我知道在我的情况下，一页中不超过 20 个视图。

在我的 cellForRowAtIndexPath 函数中

```
UIImageView *checkMark = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"checkMark.png"]];
checkMark.frame = CGRectMake(xx, xx, xx, xx);
checkMark.hidden = YES;
checkMark.tag = indexPath.row + 100; 
```

然后我可以使用

```
for (int i = 100; i < [self.vehiclesArray count] + 100; i++) {
   ((UIImageView *)[self.view viewWithTag:i]).hidden = NO;
} 
```

# android - N 秒后从 RunOnUiThread 关闭自定义对话框

> ID：14361939
> 
> 赞同：0
> 
> 时间：2013-01-16T15:30:41.223
> 
> 标签：android, multithreading, dialog, xamarin.android, android-alertdialog

我有一个自定义对话框，它是由下面的代码创建的：

```
public DialogFragment CreateNewPostedMessageDialog(CardSwipeData data, 
    List<MessagesMap> messagesMap, 
    string fbProfileimageAsByteString, 
    Context context) {
            DialogFragment newFragment = 
                new NewPostedMessageDialogFragment(data, messagesMap,
                                                   fbProfileimageAsByteString, 
                                                   context);
            return newFragment;
        } 
```

它是从我的 Activity 的 OnResume RunOnUiThread 调用的：

```
ThreadPool.QueueUserWorkItem(state => {
    // Processing stuff here               

    RunOnUiThread(() => {
        DialogFragment dialog = CreateNewPostedMessageDialog(cardSwipeData,
           messagesMap, bitmapByteString, this);

        dialog.Show(FragmentManager, "PostedMessage");

        // ListAdapter gets updated here

        Thread.Sleep(3000);

        dialog.Dismiss();
    });
}); 
```

我想在 3 秒后关闭我的对话框，但发生的情况是我的对话框从未出现，但我的列表在 3 秒后仍会更新。我在睡眠方面做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:32:39.370

Since `runOnUiThread` runs on the UI thread

```
Thread.Sleep(3000); 
```

blocks the UI thread for three seconds, making the UI unresponsive . If you want to dismiss the Dialog after three seconds you can use the p`ostDelayed()` from the Handler class:

```
Declare an Handler handler = new Handler(); 
```

then, inside the `runOnUiThread` change the code you post with:

```
 {

      final DialogFragment dialog = CreateNewPostedMessageDialog(cardSwipeData,
       messagesMap, bitmapByteString, this);

     dialog.Show(FragmentManager, "PostedMessage");

    // ListAdapter gets updated here

     handler.postDelayed( new Runnable() {

          @Override
          public void run() {
             dialog.Dismiss();
          }
     }, 3000) ;

}); 
```

check for typo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:35:14.433

您做错了什么是您正在休眠 UI 线程，而不是您在`TreadPool`. 试试这个：

```
ThreadPool.QueueUserWorkItem(state => {
    // Processing stuff here               

    DialogFragment dialog;

    RunOnUiThread(() => {
        dialog = CreateNewPostedMessageDialog(cardSwipeData,
           messagesMap, bitmapByteString, this);

        dialog.Show(FragmentManager, "PostedMessage");
    });

    // ListAdapter gets updated here
    Thread.Sleep(3000);

    RunOnUiThread(() => dialog.Dismiss()); 
}); 
```

# xml - 将 String/XML 请求作为 text/xml 传递给 http 出站

> ID：14361945
> 
> 赞同：0
> 
> 时间：2013-01-16T15:30:52.167
> 
> 标签：xml, mule

我有一个场景，我需要通过 http:outbound 调用 Web 服务。该服务仅接受文本/xml。

但是在我的转换和转换之后，我得到了我的有效载荷（xml）作为字节 [] 或字符串。当此有效负载通过 http:outbound 向服务传递请求时，它会返回错误提示

```
Exception stack is:
1\. Message contained MIME type "application/atom+xml" when "text/xml" was expected.     
Message payload is of type: byte[] (org.mule.api.MessagingException) 
```

下面给出的是我的流程的一部分。

```
<mule-xml:xslt-transformer
        maxIdleTransformers="2" maxActiveTransformers="5"
        xsl-file="C:\EWS\MyProject\src\main\resources\xslt\XML_Repeater.xsl">
</mule-xml:xslt-transformer>

 <!-- <byte-array-to-string-transformer></byte-array-to-string-transformer>  -->

 <http:outbound-endpoint exchange-pattern="request-response" mimeType="text/xml"  
        address="http://sampleproj:9080/myservice/servlet/rpcrouter" /> 
```

如何将预期的 mime 类型传递给 http:outbound？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:22:29.320

添加：

```
<set-property propertyName="Content-Type" value="text/xml" /> 
```

就在`http:outbound-endpoint`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:43:08.303

我不确定如何设置 mime-types，但您是否尝试过使用`<cxf:proxy-client>`如下所示的方式发送肥皂请求。此外，您可能需要指定`SoapAction`在 web-service 上调用哪个操作

```
<mule-xml:xslt-transformer
    maxIdleTransformers="2" maxActiveTransformers="5"
    xsl-file="C:\EWS\MyProject\src\main\resources\xslt\XML_Repeater.xsl">
</mule-xml:xslt-transformer>
<set-property propertyName="SOAPAction" value="http://operationToCall" />
<cxf:proxy-client payload="body" enableMuleSoapHeaders="false">
   <cxf:outInterceptors>
     <spring:bean class="org.apache.cxf.interceptor.LoggingOutInterceptor" />
   </cxf:outInterceptors>
</cxf:proxy-client>
<http:outbound-endpoint exchange-pattern="request-response" mimeType="text/xml"  
    address="http://sampleproj:9080/myservice/servlet/rpcrouter" /> 
```

# java - 如何为打包为 WAR 文件的 Maven 项目编写自动化验收测试？

> ID：14361947
> 
> 赞同：1
> 
> 时间：2013-01-16T15:30:55.413
> 
> 标签：java, eclipse, maven, testing, dependencies

我已经获得了需要测试的现有 Java 应用程序（我们称之为“WebApp”）的源代码。它作为 WAR 文件部署到 Glassfish 中。这是客户代码，因此如果我能提供帮助，我希望避免修改 WebApp POM。

所以我正在创建一个单独的项目（在 Eclipse 中）来进行测试。新项目需要直接在各种 WebApp 类上调用方法。我尝试将 WAR 文件引用为 Maven 依赖项，但这样做后它不会出现在 Eclipse 的 Maven 依赖项中 - 见下文：

```
WebApp
    src/main/java
    ...
    pom.xml

WebAppTest
    src/main/test
        test.package.name
            webAppAcceptanceTestIT.java
    Maven Dependencies
        junit-4.6.jar
        mockito-all-1.9.5.jar
        <<< No WebApp war/jars here >>> 
```

WebAppTest 的 pom 中的依赖项如下所示：

```
<dependency>
    <groupId>...</groupId>
    <artifactId>webapp</artifactid>
    <version>...</version>
    <type>war</type>
    <scope>compile</scope>
</dependency> 
```

已经尝试过`type=jar`，`scope=test`但这些都没有达到目标。不确定我是否遗漏了什么或以错误的方式解决这个问题？我应该改用 Maven 模块吗？不想让事情过于复杂。当然，我可以作弊并将 WebApp 添加到 WebAppTest 的构建路径中，但我想做到这一点，以便它在部署时工作。

另一个问题 - WebAppTest 应该打包为 WAR 还是 JAR？它只包含执行 WebApp 代码和检查结果的测试。我是否认为它仍然需要作为 WAR 文件部署到 Glassfish 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:58:02.597

您有几个选项，按优先顺序递减：

## 使用 HTTP（仅）进行验收测试

部署战争，触发 HTTP 请求，单独检查数据库。无需访问 webapp 的类。这是最干净的选项和最可维护的。

## 容器内测试

使用 Arquillian 将应用程序与您的测试一起部署并运行它们。您需要在原始战争的 POM 中添加`attachClasses`到`maven-war-plugin`'s 配置。您的测试项目需要依赖`[artifactid]-classes`而不是`artifactid`. 您的测试在 Glassfish 中运行（Arquillian 负责启动 Glassfish 和部署战争）。

Arquillian 有一点学习曲线。

## 远程公开 WebApp 类

使用类似 Spring 的 HTTPInvoker 将要测试的类公开给测试代码。您的测试在 Glassfish 的单独 JVM 中运行，并使用 HTTP 连接到被测类。您仍然需要像在容器内一样更改 POM。如果您的 WAR 不是基于 Spring 的，这可能会很棘手，并且对原始应用程序具有很大的侵入性。您也可能会遇到序列化问题。

# javascript - 在所有浏览器 jQuery 或 css 中禁用默认打印页眉和页脚

> ID：14361949
> 
> 赞同：2
> 
> 时间：2013-01-16T15:31:05.557
> 
> 标签：javascript, jquery, html, css, printing

> **可能重复：**
> [我可以从我的打印 css 中删除 URL，因此无法打印网址吗？](https://stackoverflow.com/questions/2192806/can-i-remove-the-url-from-my-print-css-so-the-web-address-doesnt-print)

我希望能够在打印时在所有浏览器中删除/隐藏或禁用默认打印页眉和页脚。

我正在生成一张海报并要求删除这些默认设置，因为它是一种糟糕的用户体验，必须通过不同的打印设置来引导它们。

```
 <button onclick="PopupCenter('poster.html', 'myPop1',1020,768);" class="button">Print Poster</button> 
```

因此，当单击上面的按钮时，它会打开一个居中的弹出窗口，其中包含海报的预览。

现在我需要从打印页面中删除页眉和页脚吗？

这可能吗？

# ruby-on-rails-3.2 - Rails Gravatar 辅助方法

> ID：14361952
> 
> 赞同：5
> 
> 时间：2013-01-16T15:31:10.723
> 
> 标签：ruby-on-rails-3.2, helper, gravatar

我已经在 Gravatars 上完成了这个[railscast](http://railscasts.com/episodes/244-gravatar)，现在我的应用程序助手中有以下助手方法。

```
module ApplicationHelper
  def avatar_url(user)
    gravatar_id = Digest::MD5.hexdigest(user.email.downcase)
    "http://gravatar.com/avatar/#{gravatar_id}.png?s=200"
  end
end 
```

我认为这是

```
<%= image_tag avatar_url(user) %> 
```

我如何修改帮助程序，使其接受将 s=200 更改为指定大小的大小选项？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-16T19:09:50.597

```
module ApplicationHelper
  def avatar_url(user, size)
    gravatar_id = Digest::MD5.hexdigest(user.email.downcase)
    "http://gravatar.com/avatar/#{gravatar_id}.png?s=#{size}"
  end
end 
```

然后调用：

```
<%= image_tag avatar_url(user, 200) %> 
```

您还可以查看[Michael Hartl 的](http://ruby.railstutorial.org/chapters/sign-up#sec-a_gravatar_image)指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-13T21:13:31.503

在`application_helper.rb`文件夹下的`app/helpers`文件中，添加如下方法：

```
# app/helpers/application_helper.rb

def gravatar_for(user, options = { size: 200})
  gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
  size = options[:size]
  gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}?s=#{size}"
  image_tag(gravatar_url, alt: user.username, class: "img-circle")
end 
```

然后在以下位置调用它`show.html.erb`：

```
<%= gravatar_for @user, size: 200%> 
```

# .htaccess - .htaccess 重定向子目录 uri 但不是子目录本身

> ID：14361956
> 
> 赞同：1
> 
> 时间：2013-01-16T15:31:15.007
> 
> 标签：.htaccess, redirect

我觉得我很接近这个，但它并不完全正确。

我正在尝试将 /subdirectory/ 之后的任何内容（例如：/subdirectory/admin）重定向到 Web 根目录。例如**/subdirectory/admin**将重定向到**/admin**

但是，我希望仍然能够转到 /subdirectory/ 问题是**/subdirectory/**也重定向到**/**

这是我所拥有的，它可以工作，只是它仍然重定向 /subdirectory/

```
RedirectMatch 301 ^/subdirectory/(.*) http://example.com/$1 
```

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:19:42.363

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^subdirectory/(.+)$ /$1 [L,NC,R=301] 
```

因为使用`.+`after`subdirectory/`它会匹配`subdirectory/foo`或`subdirectory/bar`但不会匹配`subdirectory/`。

# java - 如何在水平面板中将按钮对齐到中心？

> ID：14361961
> 
> 赞同：2
> 
> 时间：2013-01-16T15:31:29.923
> 
> 标签：java, gwt

我有一个水平面板和 2 个，有时是 3 个按钮。

```
Button btn1 = new Button("Ok");
Button btn2 = new Button("Cancel");
HorizontalPanel panel = new HorizontalPanel();
panel.setWidth(100%);
panel.add(btn1);
panel.add(btn2);
panel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_CENTER); 
```

但是只有取​​消按钮位于中心。但是如何在一个水平面板上将两个...甚至任意数量的按钮对齐到中心？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:38:00.427

您可以将这些按钮放在较小的面板中，将该面板添加到较大的面板中，然后对齐较小的面板：

```
Button btn1 = new Button("Ok");
Button btn2 = new Button("Cancel");
JPanel buttonPanel = new JPanel();
buttonPanel.add(btn1);
buttonPanel.add(btn2);
panel.add(buttonPanel);
panel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_CENTER); 
```

# android - MediaPlayer mOnPreparedListener 为空

> ID：14361967
> 
> 赞同：1
> 
> 时间：2013-01-16T15:31:47.550
> 
> 标签：android, media-player, listener

我有问题`MediaPlayer.OnPreparedListener()`。Logcat 一直说`mOnPreparedListener is null. Failed to send MEDIA_PREPARED message.`根据 MediaPlayer 参考，此代码应该可以工作，但不是：

```
MediaPlayer mp = MediaPlayer.create(Settings.this, R.raw.play_samle);       
    mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        // onPrepared() is never called
        public void onPrepared(MediaPlayer mp) {
           mp.start();
        }   

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:37:24.280

首先，你应该有：

```
MediaPlayer mp = MediaPlayer.create(Settings.this, R.raw.play_samle); 
```

你的 mp 什么都不做，因为它什么都不包含。

# jquery - 使用灯箱插件时如何隐藏工具提示“标题”

> ID：14361971
> 
> 赞同：-5
> 
> 时间：2013-01-16T15:31:54.907
> 
> 标签：jquery, tooltip

我正在使用[这个灯箱插件](http://leandrovieira.com/projects/jquery/lightbox) ，我想知道如何隐藏工具提示以及`title`当我将链接悬停到灯箱图像时显示的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:37:00.990

使用下面提供的 html，使用它...

```
$("#gallery a").removeAttr("title"); 
```

如果这不起作用，那么我们需要查看您的标记，因为它适用于您链接的页面上的示例库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:49:24.430

如果你想坚持使用这个插件，你必须稍微改变它的代码。

修改`jquery.lightbox-0.5.js`,改变

```
// in line 77:
objClicked.getAttribute('title')
// replace by:
objClicked.getAttribute('data-lightboxtitle') 
```

*和*

```
// in line 81:
jQueryMatchedObj[i].getAttribute('title')
// replace by:
jQueryMatchedObj[i].getAttribute('data-lightboxtitle') 
```

然后在您的 HTML 中，只需将`title`您的属性替换`a`为`data-lightboxtitle`，就像这样（您的代码可能会有所不同，具体取决于您使用插件的方式）：

```
<a href="..." data-lightboxtitle="Here is your title" rel="lightbox"><img src="..." alt="..." /></a> 
```

**背景：**按照惯例，如果您设置了一个，浏览器会在鼠标悬停时显示标题属性的工具提示。您的插件通常需要它来在您的灯箱中显示文本，因此您只能更改插件的行为。

**一般建议：**您的问题有很多反对意见。下一次，试着在你的解释中更具体一点，并提供一些代码或你自己解决问题的尝试；）

# drupal-views - 如何在drupal中使用views参数？

> ID：14361974
> 
> 赞同：1
> 
> 时间：2013-01-16T15:32:12.573
> 
> 标签：drupal-views

我正在使用视图参数来过滤作业列表。

我以状态为论据。

以前，state 参数接受单个值，并且可以正确过滤作业。

现在我将状态字段设为多值，这意味着它接受多个状态作为输入，以逗号分隔。

这是我分配参数的代码

```
$arg[0]=$filters['title_nodes'];
$arg[1]=$filters['company'];
$arg[2]=$filters['city'];
$arg[3]=$filters['state'];
$arg[4]=$filters['zip'];
$arg[5]=$filters['types'];
$arg[6]=$filters['categories'];
$arg[7]=$filters['industries'];
$arg[8]=$filters['beverages'];
$arg[9]=$filters['user']; 
```

以前， `$arg[3]=$filters['state'];`这个 $arg[3] 充满了纽约等单一州，并且单值过滤器工作正常。

现在， `$arg[3]=$filters['state']`; 此参数包含多个状态。

由于多个州的工作没有被过滤。

现在假设我们输入了 3 个状态，然后在`$arg[3]`3 个状态中被存储并且对于每个作业，

参数检查是否有任何工作在单个工作中具有所有 3 个状态，这是不可能的。

现在我怎样才能使这个过滤器适用于多个状态？

提前致谢。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T20:59:03.670

你现在找到答案了吗？

我认为您可能需要通过 view_query_alter 挂钩将条件运算符从 AND 更改为 OR。已经有多个关于如何完成此操作的帖子，例如[此页面](https://stackoverflow.com/questions/1340423/or-operator-in-drupal-view-filters)

# javascript - JavaScript：查找所有 链接并向其添加样式标签，其中包含字体、颜色等样式细节。

> ID：14361978
> 
> 赞同：0
> 
> 时间：2013-01-16T15:32:17.483
> 
> 标签：javascript, regex, hyperlink, href, inline-styles

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:38:00.630

无需为此使用正则表达式。`jquery`当您想要预览时，只需将这些样式添加到链接中：

```
$("a[href='http://www.onewebsite.com']").css("font-family","Arial, Verdana, Helvetica, sans-serif"); 

$("a[href='http://www.onewebsite.com']").css("font-size","12px"); 

$("a[href='http://www.onewebsite.com']").css("color","#fa860b"); 
```

@Edit：好吧，很多人已经对我发表了最多评论，您需要在 HTML 代码中包含 jquery 库

@Edit 2：如果您可以将ID放入achor标签，则可以使用以下javascript

```
<a id="a1" href=".."></a>

var element = document.getElementById("a1");

a1.style.fontFamily = "Arial, Verdana, Helvetica, sans-serif";

a1.style.fontSize = "12px";

a1.style.color = "#fa860b"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:44:13.813

为什么有“没有 CSS 选项”？如果您只想影响预览区域中的链接，那么（假设您的预览区域有`id="preview"`）只需执行以下操作：

```
#preview a {
    font-family: 'Arial', 'Verdana', 'Helvetica', sans-serif;
    font-size: 12px;
    color: #fa860b;
} 
```

# requirejs - RequireJS Dependent Paths

> ID：14361980
> 
> 赞同：5
> 
> 时间：2013-01-16T15:32:28.660
> 
> 标签：requirejs

I've just started using RequireJS. I'm setting up a few path aliases to save me from having to specify the version number on my dependencies but it seems I can't combine a path alias with a directory alias. For example:

```
require.config({
    baseUrl: "/js/app", // by default load any module IDs from js/app

    paths: {
        "libs": "/some/path/to/libs",
        "jquery": "libs/jquery-1.9.0" // loads from /some/path/to/libs/jquery-1.9.0.js
    }
});

require(["jquery"], function ($) {
    $("#foo").html("bar");
}); 
```

RequireJS attempts to load jquery from `/js/app/libs/jquery-1.9.0.js`

Is this possible or would I need to define each js file path separately (if I didn't want to remove the version number)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T06:16:16.827

不，这是不可能的。

[引用 James Burke 对这张票](https://github.com/jrburke/requirejs/issues/494)中类似问题的回答：

> 路径不是附加的——路径条目的属性名称是模块 ID，值是不是从其他值计算的路径。

我认为您确实必须单独定义每个 js 文件路径，我想不出更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:40:20.730

这应该没问题，但是`require(["libs/jquery"]`应该更改为，`require(["jquery"]`因为您已经在配置中定义了该别名。

# objective-c - Auto-complete on NSComboBoxCell via Binding in Objective-c

> ID：14361983
> 
> 赞同：0
> 
> 时间：2013-01-16T15:32:34.947
> 
> 标签：objective-c, macos, cocoa, binding, nstableview

I don't know whether I have set this up incorrectly or not, but what I have done makes sense to me.

I have an NSTableView with two columns in it - a properties column on the left and a values column on the right. The values column contains NSComboBoxCells which are to be (dynamically) pre-populated with values relevant to the property in the left column.

The table is bound to an NSArrayController which references an array of objects. The object referenced has a number of properties defined, including one for the properties column (the property is called "name"), a value for the values column (called "value"), and a possibleValues property which returns the NSArray of available values dependent on the property.

This is all working correctly as long as the values cells are not being edited. As soon as they are edited, the drop-down of possible values is empty.

Having searched around, I found suggestions that the auto-complete checkbox should be checked for the Combo Box Cell, but checking it does not alter behaviour. I want the user to be able to tab from one table cell to the next, remaining in edit mode, and being able to make use of a pre-populated list of possible values.

On the object containing the data to be displayed in the table, I have declared the keyPathsForValuesAffecting... method too as such:

```
+ (NSSet *)keyPathsForValuesAffectingPossibleValues
{
    return [NSSet setWithObject:@"name"];
} 
```

The detailed bindings are as such:

**Property** column is bound to arrayController

Value binding:

```
 Controller Key: arrangedObjects
    Model Key Path: name 
```

**Value** column is bound to the same arrayController

Content binding:

```
 Controller Key: arrangedObjects
    Model Key Path: possibleValues 
```

Value binding:

```
 Controller Key: arrangedObjects
    Model Key Path: value 
```

**NSComboBoxCell** is not bound to anything. I have tried binding the content of the cell to the same as the value binding for the value column, but I get a list of objects - not the list of strings I create.

The header file for the object stored in the NSMutableArray which is bound to the NSArrayController basically looks something like:

```
#import <Foundation/Foundation.h>

@interface TableProperty : NSObject {
    NSString *name;
    NSString *value;
}

@property (readwrite, strong) NSString *name;
@property (readwrite, strong) NSString *value;
@property (readonly, assign) NSArray *possibleValues;

@end 
```

The name and value properties are synthesised. The possibleValues property is a method which returns an array of NSString objects - the contents of which depend on the value of name.

I have put a break-point in the possibleValues method, which gets hit (twice) when the edit mode is started on the cell (and the correct NSArray is returned - both times). Once in edit mode, hitting the DOWN button on the keyboard pops up an empty box - this is the one which I would like to have populated with values. If the selection arrows to the right of the cell are clicked with the mouse, I have my list of correct values.

It is not possible for me to use a view-based table, as I need this application to function on Snow Leopard machines.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:53:46.293

NSComboBoxCell 从 NSTextFieldCell 继承自动完成功能，这需要您提供数据源。没有绑定可以为您实现功能。这样做的原因是该控件正在使用 NSStrings，并且您的列表可以包含多个具有相同字符串表示形式的项目。

# c# - Hides nodes of Tree Object Recursive

> ID：14361986
> 
> 赞同：0
> 
> 时间：2013-01-16T15:32:38.490
> 
> 标签：c#, algorithm, data-structures, recursion, tree

I'm looking for a way to hides node in a tree. I'm filtering a node with a node type, this is my original structure:

```
root
 +FolderA
    -File1
    -File2
    -File3
 +FolderB
    -File4
    -File5
    +FolderB-1
            -File6 
```

This is what I'm trying to do:

```
+root
 -File1
 -File2
 -File3
 -File4
 -File5
 -File6 
```

I have created my class XNode with a type and a list of childrens. (this is pseudo language for abbreviation)

```
Class XNode
  MyType type;
  string Name;
  List<XNode> childrens; 
End Class 
```

I have created a factory class that query my database and create original tree.

I have created a Xaml treeView UserControl to bind my root XNode created.

Via Xaml is not possible to hide a Node, this operation must be done with binded object (my root Xnode created).

**Now my question is: There are recursive alghoritms to cancel a "Folder type" node, get its childrens and add them to parent Node?**

I'm try:

```
 public XNode RemoveFoldersElements(ref XNode rootNode)
    {

        if (rootNode != null)
        {
            if (rootNode.Children.Count > 0)
            {
                for (int i = 0; i < rootNode.Children.Count; i++)
                {
                    XNode children = rootNode.Children.ElementAt(i);
                    if (children.WType == NodeType.Type_FOLDER)
                    {
                        XNode tempNode = RemoveFoldersElements(ref children);
                        if (tempNode != null)
                            rootNode.Children.Add(tempNode);
                        rootNode.Children.RemoveAt(i);
                    }
                    else
                    {
                        RemoveFoldersElements(ref children);
                    }

                }
            }

        }
        return null;
    } 
```

but not success because not all nodes of Type_FOLDER are erased (it jump one level) ! Any Idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:02:07.357

好的，这就是想法，在过滤的同时展平树：

```
public static IEnumerable<TSource> Flatten<TSource>(this IEnumerable<TSource> source, Func<TSource, IEnumerable<TSource>> childCollectionSelector, Func<TSource, bool> predicate)
{
    foreach (var item in source)
    {
        if(predicate(item))
            yield return item;
        foreach (var subitem in childCollectionSelector(item).Flatten(childCollectionSelector, predicate).Where(predicate))
        {
            yield return subitem;
        }
    }
} 
```

你可以像这样使用它：

```
var rootList = new []{rootElement}; // Flattening works on the collection
var files = rootList.Flatten(x => x.children, x => x.type == MyType.FILE); 
```

如果您没有任何循环引用并且所有集合都已初始化，它将起作用。`StackOverflowException`如果你确实有循环依赖，你会向...问好

# dns - How to redirect wiki.domain.com to www.domain.com/wiki?

> ID：14361988
> 
> 赞同：0
> 
> 时间：2013-01-16T15:32:40.180
> 
> 标签：dns, domain-name

I had installed wiki on my server. Lets say I have a domain name `www.nikunj.com`.

So installed wiki at this location `www.nikunj.com/wiki`.

Now I am trying to achieve that when any user types `wiki.nikunj.com`, he/she will see my installed wiki on `www.nikunj.com/wiki`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:22:00.160

这个问题应该在您的网络服务器配置中解决。

# 我想重定向

## Apache HTTPD 服务器

如果您使用 Apache，您可以为 wiki.nikunj.com 创建第二个 VirtualHost，目的是重定向到 www.nikunj.com/wiki。

使用 mod_rewrite：

```
<VirtualHost *:80>
    ServerName wiki.nikunj.com
    RewriteEngine on
    RewriteRule ^/(.*) http://www.nikunj.com/wiki/$1 [R,L]
</VirtualHost> 
```

使用 mod_alias：

```
<VirtualHost *:80>
    ServerName wiki.nikunj.com
    RedirectMatch ^/(.*) http://www.nikunj.com/wiki/$1
</VirtualHost> 
```

## Nginx

在这种情况下，Nginx 语法更直观：

```
server {
    server_name wiki.nikunj.com
    rewrite ^ http://www.nikunj.com$request_uri? permanent;
} 
```

# 我想将 URL 保留在 wiki 中。

## 阿帕奇

你需要 mod_rewrite 和 mod_proxy。然后，它会是这样的：

```
<VirtualHost *:80>
    ServerName wiki.nikunj.com
    RewriteEngine on
    RewriteRule ^/(.*) http://www.nikunj.com/wiki/$1 [R,L,P]
</VirtualHost> 
```

## Nginx

```
server {
    server_name wiki.nikunj.com
    proxy_pass http://www.nikunj.com/wiki;
} 
```

## 短网址呢？

在这种情况下，您可以使用短 URL。

您将需要两条规则而不是一条，一条用于文章（例如 /view/$1），一条用于其他 index.php 链接。

**提示：** `last`在 Nginx 和`[L]`Apache HTTPD 中意味着当前规则是最后执行的。这将允许您避免两个规则一个接一个地执行。

# 文档

*   阿帕奇：[mod_rewrite 文档](http://httpd.apache.org/docs/2.4/rewrite/)
*   Apache：[用于代理的 mod_rewrite](http://httpd.apache.org/docs/2.4/rewrite/proxy.html)
*   Nginx：[HttpRewriteModule](http://wiki.nginx.org/HttpRewriteModule)
*   Nginx：[HttpProxy模块](http://wiki.nginx.org/HttpProxyModule)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:48:51.013

您需要阅读的页面（假设您正在使用“mediawiki”）是[这个](http://www.mediawiki.org/wiki/Manual:Short_URL)页面，它描述了您可用的各种选择。

# parsing - Data Source of Google Trends

> ID：14361991
> 
> 赞同：0
> 
> 时间：2013-01-16T15:32:51.040
> 
> 标签：parsing, svg

I need to extract data used to build charts at Google Trends. I've heard that it gets possible by passing additional parameters in the url, but didn't find which ones.

Another idea was to look at the page source: [http://www.google.com/trends/explore#q=data&date=5%2F2007%201m&cmpt=q](http://www.google.com/trends/explore#q=data&date=5%2F2007%201m&cmpt=q). But it's so messy, that I could not figure out anything.

Are there any ideas how to parse pages like that?

Please, help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:36:50.367

This is normal Chrome Inspector detective work. Just keep clicking down the tree until you reach this element:

```
<path d="M0.5,31.29L26.1,25.62L51.7,19.95L77.3,29.4L102.9,84.21L128.5,
86.1L154.1,27.51L179.7,12.39L205.3,10.5L230.9,16.17L256.5,27.51L282.1,
86.1L307.7,86.1L333.3,23.73L358.9,14.28L384.5,16.17L410.1,19.95L435.7,
33.18L461.3,82.32L486.9,84.21L512.5,23.73L538.1,16.17L563.7,19.95L589.3,
21.84L614.9,35.07L640.5,89.88L666.1,89.88L691.7,52.08L717.3,
29.4L742.9,25.62L768.5,25.62" stroke="#1155cc" stroke-width="2" fill-opacity="1" fill="none"></path> 
```

which actually draws the graph.

# c++ - DLL Load Library - Error Code 126

> ID：14361992
> 
> 赞同：49
> 
> 时间：2013-01-16T15:32:51.123
> 
> 标签：c++, plugins, dll, loadlibrary

I'm using the 'LoadLibrary' from the Windows API, when I run the application, it throws me an error code 126\. I read that it may be caused by dependencies, I checked what's wrong with some applications like Dependency Walker, but everything was fine.

**LoadLibrary in the application:**

```
 HMODULE dll_mod = LoadLibrary(L"path_to_dll");
            if(dll_mod==NULL){
                std::stringstream error;
                error << "Could not load plugin located at:\n" << file_full.toStdString() << "\n" << "Error Code: " << GetLastError();
                FreeLibrary(dll_mod);
                return error.str();
            } 
```

**Plugin code:**

```
#include "stdafx.h"
#define DLL_EXPORT
#define PLUGIN_STREAM __declspec(dllexport)
#include <iostream>
#include <vector>
using std::vector;
using std::string;
// Init event (After the loading)
extern "C"{
PLUGIN_STREAM int onInit(char* argv){
return 0;
}
PLUGIN_STREAM void pluginInfo(vector<string> & info){
info.push_back("media_event=false");
    info.push_back("status_event=false");
    info.push_back("send_event=true");
    info.push_back("plugin_name='RadioStream'");
    info.push_back("description='This plugin was designed for that people that wants to listen to radio music.\nYou can register your radio and play it later, also we have a gallery of radios that you can check.\nThis plugin is original of Volt and it's originally implemented in the application.'");
    info.push_back("success:0");
    info.push_back("error:1=Could not open data file");
    info.push_back("error:2=Could not prepare plugin");
    info.push_back("alert:40=Could not connect to that radio");
}
} 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-16T15:46:07.677

Windows dll 错误 126 可能有许多根本原因。我发现调试这个的最有用的方法是：

1.  使用依赖遍历器查找任何明显的问题（您已经完成了）
2.  使用 Microsoft 的 sysinternals 实用程序进程监视器[https://docs.microsoft.com/en-us/sysinternals/downloads/procmon](https://docs.microsoft.com/en-us/sysinternals/downloads/procmon)在您的 dll 尝试加载时跟踪所有文件访问。使用此实用程序，您将看到该 dll 试图引入的所有内容，并且通常可以从那里确定问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-04-07T03:40:34.127

当您尝试加载 DLL 并且需要另一个无法找到的 DLL 时，也会发生这种情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-19T09:10:00.123

可能会发生此错误，因为 windows/system32 文件夹中缺少 DLL 所依赖的某些 MFC 库（例如 mfc120.dll）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-02-07T18:23:37.430

这对我[有用 Visual C++ Redistributable Packages](https://www.microsoft.com/en-us/download/details.aspx?id=40784)

# php - php5中“=& new SomeObject”和“= new SomeObject”的区别

> ID：14361999
> 
> 赞同：0
> 
> 时间：2013-01-16T15:33:05.443
> 
> 标签：php, object

> **可能重复：**
> [php中的“=&”/“&=”运算符是什么意思？](https://stackoverflow.com/questions/1367454/what-do-operators-in-php-mean)
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

如果我理解正确，`=&`则在 php5 和`=& new Obj`equal中已弃用`= new Obj`。我有一个旧的包裹代码

```
$V8fa14cdd =& new FileMaker_Field($Vc6140495); 
```

所以在本地主机上它工作得很好，但是当我复制到远程服务器 php 失败。如果我删除`&`

```
$V8fa14cdd = new FileMaker_Field($Vc6140495); 
```

脚本适用于两台服务器，但结果不正确。看起来现在它使用相同的副本，所以结果我得到了

```
Array
(
[town] => town
) 
```

当我将`&`结果更改添加到

```
Array
(
[AddrCalc] => AddrCalc
[AllowAccess] => AllowAccess
[ComNameCalc] => ComNameCalc
[DBID] => DBID
[DBexist] => DBexist
[FoundCount] => FoundCount
[Full_Name] => Full_Name
[addr1] => addr1
[business_name] => business_name
[country] => country
[county] => county
[email] => email
[fax] => fax
[firstname] => firstname
[flag] => flag
[fmconfirm] => fmconfirm
[hash] => hash
[id] => id
[lastname] => lastname
[mobile] => mobile
[modified] => modified
[modifiedCalc] => modifiedCalc
[password] => password
[postcode] => postcode
[ref1] => ref1
[ref2] => ref2
[ref3] => ref3
[ref4] => ref4
[telephone] => telephone
[town] => town
) 
```

那么有什么想法为什么会这样吗？