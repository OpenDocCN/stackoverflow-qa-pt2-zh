# StackOverflow 问答 13786000-13786999

# java - 在executeQuery（）中执行preparedstatement后，值没有被插入到结果集中

> ID：13786001
> 
> 赞同：0
> 
> 时间：2012-12-09T08:54:03.230
> 
> 标签：java, jdbc, resultset

我写了以下代码

```
PrepareStatement stmt=con.prepareStatement("select * from studentdetails where sname=?");
String snm=jTextField10.getText();
ps.setString(1,snm);
ResultSet rs=stmt.executeQuery(); 
```

我面临的问题是结果集是空的，我已经检查了数据库，并且我在 gui 中为搜索提供的值是有效的。请告诉我是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:14:37.507

写这一篇这可能对你有帮助。

```
PrepareStatement stmt = con.prepareStatement("select * from studentdetails where sname=?");
String snm=jTextField10.getText();
stmt.setString(1,snm);
ResultSet rs=stmt.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:51:01.217

```
PreparedStatement stmt=con.prepareStatement("select * from studentdetails where sname=?");
String snm=jTextField10.getText();
stmt.setString(1,snm);
ResultSet rs=stmt.executeQuery(); 
```

试试上面的代码。您的代码中的一切都很好，唯一的问题是“PreparedStatement 实例”和“PrepareStatement”。它是'PreparedStatement'，你错过了那里的'd'。您已经声明了一个名为“stmt”的 PreparedStatement 实例，但您使用另一个名为“ps”的值设置了值。

小注：

我不喜欢你给 JTextField 起的名字。在 OOP 中，建议给实例、对象、方法、变量等起一个有意义的名称

# c - CreateProcess 没有按应有的方式运行应用程序 (nc.exe)？

> ID：13786002
> 
> 赞同：0
> 
> 时间：2012-12-09T08:54:11.827
> 
> 标签：c, winapi, createprocess, netcat

问题是，当我使用`nc`上述代码中的语法从 CMD 打开 nc.exe 时，它​​可以工作并连接到我的服务器。但是当我通过我的程序（使用上面的代码）这样​​做时，它只是打开 nc.exe 窗口，但它不允许我运行命令，我只是得到一个空白的 CMD 窗口，没有任何提示。

```
 PROCESS_INFORMATION pi;
    STARTUPINFO si;
    memset(&si, 0, sizeof(STARTUPINFO));
    si.cb = sizeof(STARTUPINFO);

    TCHAR nc[] = TEXT("nc.exe localhost 4444");     

    CreateProcess(NULL, nc, NULL, NULL, TRUE, 0, NULL, NULL, &si, &pi); 
```

我应该使用任何其他参数来`CreateProcess`使其正常工作（或者当我手动运行它时它工作）？我在想也许这个问题与 StdInput StdOutput 的事情有关，但我不确定从那里去哪里。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:41:58.780

您可以`cmd.exe`使用**/K**参数运行它以强制 DOS 窗口保持打开状态，例如：

```
cmd.exe /K nc.exe localhost 4444 
```

# extjs - Ext JS 在自定义组件上缓冲滚动

> ID：13786006
> 
> 赞同：1
> 
> 时间：2012-12-09T08:55:30.053
> 
> 标签：extjs, extjs4, store, infinite-scroll, buffered

查看缓冲滚动的示例：

[http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/buffer-grid.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/buffer-grid.html)

我是否假设此功能仅在网格上可用？

我想将它与绑定到不是网格的自定义数据视图的内存代理一起使用。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:19:35.427

Extjs 没有提供任何开箱即用的机制来允许我们在自定义数据视图中实现无限滚动，只有网格可以具有该功能。原因是所有的魔法都分布在 Store、PagingScroller 和 Grid 中，只允许在 Grids 中并且只在 Grids 中。

监视滚动活动的 PagingScroller 仅为网格（或 Ext.view.Table）设计，实际上它的命名空间非常清楚：Ext.grid.PagingScroller。

您可以实施自定义解决方案，但工作量会很大。然后，最短的答案是不，如果不编写自己的昂贵且有风险的实现，这是不可能的。

# c# - 单核处理器上的 Plinq

> ID：13786008
> 
> 赞同：2
> 
> 时间：2012-12-09T08:55:33.057
> 
> 标签：c#, .net, plinq

假设您正在查询具有一百万条记录的集合，那么当您只有一个 CORE 处理器时，PLINQ 的性能与普通 LINQ 查询有什么不同吗？

我知道 PLINQ 在多核处理器上运行良好。只是想了解它在单个 CORE 处理器上的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:04:21.397

根据 Joe Duffy 和 Ed Essey 的说法：“在单处理器机器上，PLINQ 的开销通常非常小，以至于您不会注意到差异。”

从[在多核处理器上运行查询](http://msdn.microsoft.com/en-us/magazine/cc163329.aspx)

# c# - 是否可以在 foreach 循环中创建一个新字符串？

> ID：13786019
> 
> 赞同：-1
> 
> 时间：2012-12-09T08:57:28.420
> 
> 标签：c#

```
int x = 0;
string1 = "Hi,Bye";
string[] string2 = string1.Split(",");

foreach (string item in string2)
{
   string x = item;
   x++;
} 
```

现在有什么方法可以真正完成用字符串创建一个带有“预设”名称的新字符串？希望我足够清楚，让您了解我想要做什么，但是很难解释这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:05:26.583

不要增加`int`变量 x。

遍历 foreach 循环，数组`item`中的`string2`将跳转到数组中的下一个值。

```
string1 = "Hi,Bye";
string[] string2 = string1.Split(",");

foreach (string item in string2)
{
   Console.Write(item);
} 
```

如果您使用的是 for 循环，那么代码将如下所示（这可能会引起混淆）：

```
string[] string2 = string1.Split(",");

for(int x = 0; x < string2.Length; x++)
{
   Console.Write(string2[x]);
} 
```

**编辑：**

我要拆分的字符串示例：“test1,test2/test3,test4” 第一次从“/”中拆分字符串时，我希望将其放入新字符串中。从那里我想将它与“，”分开，但首先我必须将“test1，test2”和“test3，test4”放入两个新字符串中

```
string s =  "test1,test2/test3,test4";
string[] arr = s.Split('/');
string stringTestOneAndTwo = arr[0];
string stringTestThreeAndFour = arr[1];
string[] subArr1 = arr[0].Split(',');
string[] subArr2 = arr[1].Split(','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:57:31.893

不能完全理解你的问题。但是你试过用`List<>`吗？

```
string s = "test1,test2/test3,test4";
string[] subStrings1 = s.Split('/');
List<string[]> subStrings2 = new List<string[]>();
foreach (string item in subStrings1)
{
    string[] tempArray = item.Split(',');
    subStrings2.Add(tempArray);
} 
```

# git - 将下一次提交的更改合并到当前提交

> ID：13786021
> 
> 赞同：1
> 
> 时间：2012-12-09T08:57:47.567
> 
> 标签：git, merge, commit, revert

我正在回溯我的历史，以找出究竟是什么破坏了我的应用程序的 iOS5.1。我已将其跟踪到单个提交，但是该提交有很多文件。

我希望`git checkout [commit before iOS5 break]`并将所有破坏 iOS5 的提交（即下一次提交）的更改合并到它之前的提交中，**而无需**提交更改。这样我就可以简单地还原每个文件，直到找到具有破坏 iOS 5 的更改的文件。

**关于如何从提交中获取更改并将它们放在我当前的分支上而不提交它们的**任何想法？

 **谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:13:51.150

您必须先创建一个分支：

```
 git checkout -b fix bcd7c93
 git merge -n 8b53674 # merge without auto-commit 
```

您的解决方案创建：

*   一个[分离的头](https://stackoverflow.com/questions/8953206/how-to-i-move-my-commits-from-no-branch-to-an-actual-branch/13470810#13470810)：你根本无法合并，因为你的下一个提交不会被任何分支引用`HEAD`（因此“分离”部分）
*   重复[提交](https://stackoverflow.com/questions/2627953/git-cherry-pick-and-datamodel-integrity/2628915#2628915)：您将无法轻松地将您的“ `fix`”分支合并回 master（或您发现有缺陷提交的当前分支）

这个想法是能够修复错误（修改了一个或两个文件）并将其合并回主分支，而无需重复您发现有问题的提交的*所有其他文件部分。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:11:58.927

很抱歉回答我自己的问题，但事实证明`cherry-pick`有这个选项：

```
git checkout -f bcd7c93
git cherry-pick -n 8b53674 
```**

# android - Android 多线程和触控

> ID：13786023
> 
> 赞同：0
> 
> 时间：2012-12-09T08:58:03.863
> 
> 标签：android, multithreading, touch

我在主页上有新闻应用程序我为紧急新闻设置了标题但问题是当我在测试时在主要活动中创建线程时我有时遇到的应用程序触摸问题：当我在列表视图中触摸时没有事件运行当我旋转时我的手机我永远无法通过触摸运行任何事件我必须关闭并再次运行

**这个问题的任何想法..**

> 有关某些测试中的更多详细信息，我收到错误，请告诉我您的线程编号/ID [8 或 254 .etc**它的每次测试都会更改**] 触摸线程或相同的意思我不记得了，因为现在没有出现错误，但我认为有诸如 Conflict with threads 之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:12:30.777

似乎您的线程正在尝试更改用户界面中的某些内容（如果我没听错的话）。这是不允许的，因为只允许 UI 线程更改 UserInterface。

您应该阅读[在 Android 中使用线程的背景知识，看看](http://developer.android.com/guide/components/processes-and-threads.html#Threads)[这个](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法可能会很有用，该方法在 UI 线程上执行线程以更改 UI 中的某些内容。

# prolog - 在序言的搜索树中搜索到所有可能性时的输出

> ID：13786024
> 
> 赞同：2
> 
> 时间：2012-12-09T08:58:08.150
> 
> 标签：prolog

我编写了以下程序来验证“S”指定的学生是否在他的所有科目中都获得了“A”级。在这里，我知道只有当搜索树中的所有路径都被评估为“A”级时，我才能给出输出“真”。如果学生没有通过削减谓词获得“A”级，我能够实现。但是当所有路径都被搜索到时，真的没有得到如何指定它评估为 true 的谓词。

```
grade(123,'CSE1','A').
grade(123,'DIC','A').
grade(123,'ML','A').
grade(123,'PL','A').
grade(123,'CVIP','A').
grade(1234,'CSE1','A').
grade(1234,'DIC','A').
grade(1234,'ML','A').
grade(1234,'PL','B').
grade(1234,'CVIP','B').

honor(S):-grade(S,_,Y),not(Y='A'),!,false. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:04:34.173

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:40:04.363

有两种方法可以得到上述问题的答案： 1.首先使用 Capellic 指定的 setof。

```
honor(S) :-
   setof(S, C^G^(grade(S,C,G), \+ (grade(S,_,G2), G2 \= 'A')), Ss),
   member(S, Ss). 
```

2.不使用setof：

```
ismember(S):-grade(S,_,Y),!.
honor(S) :- ismember(S),\+ (grade(S,_,Y), Y \= 'A'). 
```

# java - 关于同步的不同方法

> ID：13786025
> 
> 赞同：0
> 
> 时间：2012-12-09T08:58:13.003
> 
> 标签：java, multithreading, executors

请不要将以下问题视为重复问题..！

我开发了一个类，它可以让多线程按顺序运行，一次一个，按顺序运行。该类的claimAccess函数和releaseAccess函数之间的所有应用程序代码一次只能在一个线程中执行。所有其他线程将在队列中等待，直到前一个线程完成。现在请告知是否可以通过执行器、循环障碍或倒计时闩锁等其他方式来实现同样的事情..!!请建议如何通过其他方法来构建

```
import java.util.ArrayList;
import java.util.List;

public class AccessGate {
    protected boolean shouldWait = false;
    protected final List waitThreadQueue = new ArrayList();

    /**
     * For a thread to determine if it should wait. It it is, the thread will
     * wait until notified.
     * 
     */
    public void claimAccess() {
        final Thread thread = getWaitThread();
        if (thread != null) {
            // let the thread wait untill notified
            synchronized (thread) {
                try {
                    thread.wait();
                } catch (InterruptedException exp) {
                }
            }
        }
    }

    /**
     * For a thread to determine if it should wait. It it is, the thread will be
     * put into the waitThreadQueue to wait.
     * 
     */
    private synchronized Thread getWaitThread() {
        Thread thread = null;
        if (shouldWait || !waitThreadQueue.isEmpty()) {
            thread = Thread.currentThread();
            waitThreadQueue.add(thread);
        }
        shouldWait = true;
        return thread;
    }

    /**
     * Release the thread in the first position of the waitThreadQueue.
     * 
     */
    public synchronized void releaseAccess() {
        if (waitThreadQueue.isEmpty()) {
            shouldWait = false;
        } else {
            shouldWait = true;
            // give the claimAccess function a little time to complete
            try {
                Thread.sleep(10);
            } catch (InterruptedException exp) {
            }

            // release the waiting thread
            final Thread thread = (Thread) waitThreadQueue.remove(0);
            synchronized (thread) {
                thread.notifyAll();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:52:28.030

是的，有更简单的方法可以做到这一点。最简单的就是使用监视器，无需等待、睡眠或任何其他恶作剧：

```
// somewhere visible
public final Object accessGate = new Object();

// in your application code
synchronized (accessGate) {
    // this block will be executed only in one thread at one time
} 
```

Java 的内置监视器几乎提供了您需要的语义。唯一的问题是不能保证线程持有锁的顺序。这取决于底层操作系统如何处理锁（信号量或互斥锁或其他）的排序。操作系统可以很好地保证您需要的行为，但这通常不是可移植的。

如果您需要便携的订购保证，您有几个选择。最明显的是将[`ReentrantLock`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html)公平设置为 true：

```
// somewhere visible
public final Lock accessGate = new ReentrantLock(true);

// in your application code
accessGate.lock();
try {
    // this block will be executed only in one thread at one time
}
finally {
    accessGate.unlock();
} 
```

另一个是[`Semaphore`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)一个单一的许可和公平设置为真：

```
// somewhere visible
public final Semaphore accessGate = new Semaphore(1, true);

// in your application code
accessGate.acquire();
try {
    // this block will be executed only in one thread at one time
}
finally {
    accessGate.release();
} 
```

这两个有非常相似的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T09:05:10.857

这是通过`ExecutorService`

[Executors.singleThreadExecutor()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html)将一次执行一个任务，并按顺序执行。

> 创建一个`Executor`使用单个工作线程在无界队列上操作的线程。（但请注意，如果该单线程在关闭前的执行过程中因失败而终止，如果需要执行后续任务，则新的线程将取代它。）任务 **保证****按顺序**执行，并且不会有超过**一个**任务处于活动状态在任何给定时间。

# automated-tests - 如何在端到端测试中加载 ngScenario？

> ID：13786027
> 
> 赞同：2
> 
> 时间：2012-12-09T08:58:25.750
> 
> 标签：automated-tests, angularjs

我想使用 ngScenario 来测试我的 NG 脚本。但我不知道如何加载它...

除了使用标签加载JS文件之外`<script>`，如何使它工作？请提供完整的样本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T18:58:28.973

启动 e2e 测试执行的方法有很多，最常见的一种是独立的 HTML 文件或测试运行程序。

要通过 HTML 文件触发 e2e 测试执行，可以编写如下内容：

```
<html lang="en">
<head>
    <title>End2end Test Runner</title>
    <script src="http://code.angularjs.org/1.0.3/angular-scenario.js" ng-autotest></script>
    <script src="app.scenario.js"></script>
</head>
<body>
</body>
</html> 
```

请注意有关此方法的几件事：

*   我们需要先加载`angular-scenario.js`文件。它包含所有必要的依赖项（包括 jQuery 和 AngularJS），因此无需包含其他文件。
*   之后需要加载场景测试（此处位于`app.scenario.js`）
*   `ng-autotest`场景执行由标签上的属性触发
*   您需要通过 Web 服务器提供此 HTML 文件和其他项目文件。在这里使用`file://`协议不起作用。

另一种方法（实际上可能是首选）是使用测试运行器并执行 e2e 测试作为持续构建的一部分。使用[Karma](http://karma-runner.github.io/)是 AngularJS 社区中的一个流行选项。可以在此处找到 Karma 执行 e2e 测试的示例配置：[https ://github.com/angular/angular-seed/blob/master/config/karma-e2e.conf.js](https://github.com/angular/angular-seed/blob/master/config/karma-e2e.conf.js)

# sql - 取消删除最近删除的行sql server

> ID：13786028
> 
> 赞同：9
> 
> 时间：2012-12-09T08:58:34.110
> 
> 标签：sql, sql-server

我错误地删除了一些行 b ，我可以使用日志或 SSMS 恢复它们吗

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T09:01:51.637

SQL Server 为每个删除的记录保留日志。您可以通过 fn_dblog sql server 函数查询这些日志。

```
Select [RowLog Contents 0]
FROM   sys.fn_dblog(NULL, NULL)
WHERE  AllocUnitName = 'dbo.TableName'
       AND Context IN ( 'LCX_MARK_AS_GHOST', 'LCX_HEAP' )
       AND Operation in ( 'LOP_DELETE_ROWS' ) 
```

但是这个日志是十六进制格式的。您需要将此十六进制格式转换为您的实际数据。

下面给出的文章将帮助您以与上面定义的相同方式恢复已删除的记录。

[http://raresql.com/2011/10/22/how-to-recover-deleted-data-from-sql-sever/](http://raresql.com/2011/10/22/how-to-recover-deleted-data-from-sql-sever/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-09T09:01:10.027

如果您的数据库处于简单恢复模式，那么您可能不走运。您可以恢复到最近的备份，但如果它是很久以前的，它可能不包含您删除并希望重新插入的行的副本。同时也很可能插入了其他数据。你可以恢复到一个新的数据库，然后做 SQL 手术来恢复消失的数据。

如果您的数据库处于完全恢复模式，则：

1.  查找上一次完整备份、此后的任何增量备份以及自上一次增量或完整备份以来的所有日志备份文件，并将它们还原到正确的时间点。如果可以接受，您可以覆盖您的数据库，或者您可以恢复到新数据库并执行 SQL 手术。

2.  恢复过程将如下所示：

    ```
    BACKUP DATABASE YourDB TO DISK = 'D:\MSSQL\Data\YourDB\YourDB Pre-Repair.bak'
    -- It is CRUCIAL you take a new backup before doing ANYTHING so you don't
    -- make another mistake you can't reverse.

    RESTORE DATABASE YourDB FROM DISK
       = 'D:\MSSQL\Data\YourDB\YourDB 20121208 110000.bak' WITH REPLACE, NORECOVERY;
    -- be very careful with REPLACE as needing it proves there is un-backed-up data
    RESTORE LOG YourDB FROM DISK
       = 'D:\MSSQL\Data\YourDB\YourDB 20121208 111500.log' WITH NORECOVERY;
    RESTORE LOG YourDB FROM DISK
       = 'D:\MSSQL\Data\YourDB\YourDB 20121208 113000.log' WITH NORECOVERY;
    -- restore more log files, all of them, in order, with none skipped
    RESTORE LOG YourDB FROM DISK
       = 'D:\MSSQL\Data\YourDB\YourDB 20121209 020000.log'
       WITH STOPAT = '20121209 01:57:00', RECOVERY; 
    ```

    请注意，我`WITH STOPAT`在这里使用了它，它允许您将数据库恢复到特定的时间点。在我的示例中，每 15 分钟进行一次日志备份，并在 2012 年 12 月 9 日凌晨 1:57:15 发出致命查询。

如果要将数据库恢复到新数据库，则必须执行以下操作：

```
RESTORE DATABASE NewDB FROM DISK
   = 'D:\MSSQL\Data\YourDB\YourDB 20121208 110000.bak'
WITH
   MOVE 'YourDBLogicalName' TO 'D:\MSSQL\Data\NewDB.mdf',
   MOVE 'YourDBLogicalName_Log' TO 'L:\MSSQL\Logs\NewDB.ldf'; 
```

用于`RESTORE FILELISTONLY`找出备份中的内容。如果同一个文件中有多个备份，则有更多的语法可以读出该信息，然后指定要使用的备份。用于`sp_helpdb 'YourDB'`找出放置 NewDB 数据库和日志文件的位置。

如果需要，还有更多脚本可以重命名逻辑文件（我总是这样做）。

当然，愚蠢的我，我现在才意识到您可以使用 SSMS GUI 来完成大部分工作。但是，如果您想开始理解所有这些内容并变得非常擅长它，我建议您编写脚本。我是一名开发人员，但无需寻求“官方”DBA 的帮助就可以恢复数据库 lickety-split。

# algorithm - 找到一种算法，使用 O(n 4 ) 时间计算有向图的传递闭包

> ID：13786029
> 
> 赞同：2
> 
> 时间：2012-12-09T08:58:50.430
> 
> 标签：algorithm, time-complexity, floyd-warshall

对于一个作业，我被要求找到一种算法，该算法使用 O(n 4 ) 时间计算有向图的传递闭包。我们已经了解了 floyd warshall 算法，它要好得多，所以有人可以帮我创建一个在 O(n4) 时间内运行的算法吗？有这样的算法吗？

我知道这似乎是一个愚蠢的问题。我真的不明白为什么我们被要求找到更慢的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:15:31.213

**Floyd Warshall 是`O(n^3)`，而且既然`O(n^3)`是 的一个子集`O(n^4)`，它也是`O(n^4)`。**
因此，通过设置一个新的图`G'=(V,E',w')`where `E' = V x V`(clique, complete graph) 和`w'(u,v) = 1 if (u,v) is in E, otherwise INFINITY`- 通过使用 Floyd-Warshall 算法，每对`(u,v)`最终的值小于无穷大都在闭包中。

* * *

**一个 Theta(n^4) 解决方案：**

```
Q <- E (init) #(Q is a set)
for i from 1 to n:
   for each v in V:
     for each w in V:
        for each u in V:
            if (v,w) is in Q and (w,u) is in E:
               Q <- Q U {(v,u)}  #add (v,u) to Q 
```

复杂性是微不足道`Theta(n^4)`的，我们只需要证明它确实找到了传递闭包。

通过归纳：

1.  对于长度为 1 的从 u 到 v 的最短路径，它是基本子句，因为 (u,v) 在 E 中。
2.  对于每个`k`： 具有最短路径长度的
    每一对- 存在这样一条路径和一条边。根据归纳假设，在以前的迭代中我们添加到，因此条件将产生真，我们将添加到结果集。`(u,v)``k>1``w``u -> ... -> w``(w,v)``(u,w)``Q``(u,v)``Q`

类似地表明，如果将某些对`(u,v)`添加到 Q 中，则存在路径`u->..->w->v`，因此它是正确添加的。

* * *

**第二种`Theta(n^4)`解决方案：**

`G'`如上所述设置，并为运行 Bellman Ford`v`中的每个顶点从. BF 的每次运行为¹，运行次数为`V``v`
`Theta(n^3)`^(`n``Theta(n^4)`)

* * *

(1) 技术上它是`O(VE)`，但没有稀疏图`E`在`Theta(V^2)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:52:22.773

传递闭包的 Floyd-Warshall 算法如下所示：

```
int dist[N][N];  // For some N
int i, j, k;
// Input data into dist, where dist[i][j] is the distance from i to j.
// If the nodes are unconnected, dist[i][j] should be infinity

for ( k = 0; k < N; k++ )
for ( i = 0; i < N; i++ )
for ( j = 0; j < N; j++ )
   if(dist[i][k] && dist[k][j])
      dist[i][j] = 1; 
```

请注意使用的索引的顺序：它们以这种方式排序以保持最佳子结构属性。如果我们改为将它们重新排序如下，则违反了该属性：

```
 for ( i = 0; i < N; i++ ) 
  for ( j = 0; j < N; j++ )
  for ( k = 0; k < N; k++ )
    if(dist[i][j] && dist[j][k])
      dist[i][k]=1; 
```

违反该属性的结果是传递闭包路径在上面的 O(n^3) 次迭代中（在最坏的情况下）仅增长一个链接。为了确保它们的传递闭包路径一直增长，我们需要不断迭代直到它们停止增长：

```
do{
  something_done=false;
  for ( i = 0; i < N; i++ ) 
  for ( j = 0; j < N; j++ )
  for ( k = 0; k < N; k++ )
    if(dist[i][j] && dist[j][k]){
      dist[i][k]=1;
      something_done=true;
    }
} while (something_done); 
```

如果外循环在 O(N) 中，则算法本身在 O(N^4) 中。

不幸的是，可能无法（容易地）证明外循环具有该属性，因为它是特定于数据的。

# python - 如何使用 autodoc 覆盖 Sphinx 中的构造函数参数？

> ID：13786030
> 
> 赞同：7
> 
> 时间：2012-12-09T08:58:55.903
> 
> 标签：python, python-sphinx, autodoc

假设我有这样的课程：

```
class MyClass(object):
    """ Summary docs for my class.

    Extended documentation for my class.
    """

    def __init__(self, *args):
        self.values = np.asarray(args) 
```

如果我使用带有`autodoc`扩展名的 Sphinx 来记录此类，如下所示：

```
.. automodule:: mymodule
   :members: 
```

...构造函数签名显示为**`MyClass(*args)`**. 我宁愿覆盖它并将其记录为**`MyClass(first, second, third)`**.

如果这是一个函数，我可以覆盖文档字符串第一行中的签名。但是这个技巧似乎不适用于类文档字符串。那么如何覆盖构造函数签名呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T11:13:30.243

我认为对你来说最好的选择是做这样的事情：

```
.. automodule:: mymodule
    :members:
    :exclude-members: MyClass

    .. autoclass:: MyClass(first, second, third) 
```

`MyClass`将覆盖参数，其他成员`mymodule`将被自动记录。您需要排除`MyClass`使用`:exclude-members:`，因为它将被包含两次。我认为这是目前最简单的解决方案。

# javascript - 基于天数生成日历的算法

> ID：13786033
> 
> 赞同：1
> 
> 时间：2012-12-09T08:59:41.757
> 
> 标签：javascript, calendar

在这里[，](http://jsfiddle.net/S3vs6/)脚本根据提供的年份和月份生成月份的 HTML。在 Demo 中，默认日期系列显示如下

```
SUN - MON - ***** - FRI - SAT [0,1,2,3,4,5,6] 
```

我想让它像下面一样手动定制提供日系列

```
MON - TUE - ***** - SAT - SUN [1,2,3,4,5,6,0] 
or
SAT - SUN - ***** - THU - FRI [6,0,1,2,3,4,5,6] 
```

或提供的任何随机日系列等。

但我对开始本身感到震惊。有人请给我建议以有效地处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:16:45.633

您可以向 , 中添加一个`shift`参数`generateHTML()`，这将`shift`提前几天改变工作日。

```
Calendar.prototype.generateHTML = function(shift) {

    shift = (shift || 0) % 7;

    // get first day of month
    var firstDay = new Date(this.year, this.month, 1);
    var startingDay = firstDay.getDay();

    if (shift > startingDay)
        shift -= 7;

    // find number of days in month
    var monthLength = cal_days_in_month[this.month];

    // compensate for leap year
    if (this.month == 1) { // February only!
        if ((this.year % 4 == 0 && this.year % 100 != 0) || this.year % 400 == 0) {
            monthLength = 29;
        }
    }

    // do the header
    var monthName = cal_months_labels[this.month]
    var html = '<table class="calendar-table">';
    html += '<tr><th colspan="7">';
    html += monthName + "&nbsp;" + this.year;
    html += '</th></tr>';
    html += '<tr class="calendar-header">';
    for (var i = 0; i <= 6; i++) {
        html += '<td class="calendar-header-day">';
        html += cal_days_labels[(i + shift + 7) % 7];
        html += '</td>';
    }
    html += '</tr><tr>';

    // fill in the days
    var day = 1;
    // this loop is for is weeks (rows)
    for (var i = 0; i < 9; i++) {
        // this loop is for weekdays (cells)
        for (var j = 0; j <= 6; j++) {
            html += '<td class="calendar-day">';
            if (day <= monthLength && (i > 0 || j + shift >= startingDay)) {
                html += day;
                day++;
            }
            html += '</td>';
        }
        // stop making rows if we've run out of days
        if (day > monthLength) {
            break;
        } else {
            html += '</tr><tr>';
        }
    }
    html += '</tr></table>';

    this.html = html;
} 
```

如果需要`SAT - SUN - MON - ***** - FRI`，您将需要向后移动 1 天，即`generateHTML(-1)`.

查看[演示](http://jsfiddle.net/S3vs6/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-09T06:17:00.297

```
<!DOCTYPE html>
<html>
<head>
    <title>JS Calendar</title>
    <style>
        *{
            font-family: arial;
        }
        #calendar_div{
            width: 1240px;
            height: auto;
            margin: 0 auto;
            background-color: #fcd;
        }
        table {
            border-collapse: collapse;
            width:300px;
            float: left;
            margin-right: 10px;
            margin-bottom: 10px;
            background-color: #fff;
        }
        table, td, th {    
            border: 1px solid #ddd;
        }
        th, td {
            padding: 5px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
        }
        th{
            background-color: black;
            color:white;
        }
        p{
            font-size: 13px;
            font-weight: bold;
            text-align: center;
        }
        .clear{
            clear: both;
        }
    </style>
</head>
<body>
    <div id="calendar_div"></div>
<script type="text/javascript">
var initCalendar = function(){
        var div         = document.getElementById('calendar_div'),tr_td='',main_table='',table,index,
            arr_month   = ['January','February','March','April','May','June','July','August','September','October','November','December'],
            yr          = new Date().getFullYear(),arr;
            for (var i = 0; i <12; i++) {
                arr=calendarDate(yr,i);
                index = 0;
                table='<table><tr><th colspan="7">'+arr_month[i]+' '+yr+'</th></tr><tr><th>SUN</th><th>MON</th><th>TUE</th><th>WED</th><th>THU</th><th>FRI</th><th>SAT</th></tr>';

                for (var j = 0; j <5; j++) {
                    tr_td+='<tr>';
                    for (var k = 0; k <7; k++) {
                        tr_td+='<td>'+arr[index++]+'</td>';
                    }
                    tr_td+='</tr>';
                }
            table+=tr_td+'</table>';
            main_table+=table;
            tr_td='';
            table='';
        }
        div.innerHTML='<p>Programmer:: Ram Pukar<br/>Company:: Miracle Interface Pvt.Ltd.<br/>Address:: Jwagal,Lalitpur,Nepal<br/>http://www.miracleinterface.com<br/>https://github.com/rampukar</p>'+main_table+'<div class="clear"></div>';
    } //close initCalendar()

    function calendarDate(yr,i){
        var months      = (i==0) ? 1 : (i+1),
            days        = (i==0) ? 0 : i,
            get_date    = new Date(yr,months,0).getDate(),//total number of month days
            get_day     = new Date(yr,days,1).getDay(),//month start day ...sun,mon.....
            arrDay      = [], 
            extra_arr   = [30,31], 
            extra_day   = get_date-29, 
            num_day     = 0,temp_day;

        for (var i = 0; i<35; i++) {
            if((get_day>5 || get_day>6) && (get_date>29) && i<extra_day)  {
                temp_day=extra_arr[i];
            } else if(i<get_day ) {
                temp_day='';
            } else {
                if(num_day<get_date){
                    num_day++
                    temp_day=num_day;
                } else {
                    temp_day='&nbsp;';
                }
            }
            arrDay.push(temp_day);
        }
        return arrDay;
    } // close calendarDate

    //load initCalendar 
    window.onload =function() {
        initCalendar();
    };
</script>
</body>
</html> 
```

输出： [![在此处输入图像描述](../Images/c04471012e4c47e4e2dd3a124580cefc.png)](https://i.stack.imgur.com/myZRr.png)

演示：[https ://jsfiddle.net/rampukar/La4c2hrj/](https://jsfiddle.net/rampukar/La4c2hrj/)

# python - xmlrpc 调用的组成部分是什么

> ID：13786035
> 
> 赞同：0
> 
> 时间：2012-12-09T09:00:06.590
> 
> 标签：python, xmlrpclib

让我们定义一个简单的 xmlrpc 服务器，如下代码所示：

```
from SimpleXMLRPCServer import SimpleXMLRPCServer

def add(x,y):
    return x+y

server = SimpleXMLRPCServer(("localhost", 8000))
server.register_function(add, 'addthem')
server.register_function(add, 'add.numbers')
server.register_function(add, 'sum.two.numbers')
server.serve_forever() 
```

您可以通过

```
import xmlrpclib
dev = xmlrpclib.ServerProxy("http://localhost:8000/RPC2") 
```

使用该`dev`对象，您不能访问服务器中的（为了简单起见）功能`add`，例如

```
print dev.addthem(1,2)
print dev.add.numbers(1,2)
print dev.sum.two.numbers(1,2) 
```

我的问题：这些电话的内容是什么？什么是`dev`（我想是 的一个实例`xmlrpclib.ServerProxy`），什么是`sum`（`dev.sum`一个函数？一个可调用的？一个类？一个实例？）。`two`里面有什么`dev.sum.two`...

例如，以下语法

```
print dev.add 
```

导致错误

```
xmlrpclib.Fault: <Fault 1: '<type \'exceptions.Exception\'>:method "add.__str__" is not supported'> 
```

那不应该总是打印一些东西吗？什么*是* `dev.add`和其他部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:29:48.100

为了“记录”请求，您可以（例如）在客户端中实现自定义传输。

从[文档](http://docs.python.org/2/library/xmlrpclib.html#example-of-client-usage)（改编）：

```
import xmlrpclib, httplib, gzip

class LogTransport(xmlrpclib.Transport):
    def send_request(self, connection, handler, request_body):
        # log here.
        print handler, request_body
        if (self.accept_gzip_encoding and gzip):
            connection.putrequest("POST", handler, skip_accept_encoding=True)
            connection.putheader("Accept-Encoding", "gzip")
        else:
            connection.putrequest("POST", handler)

p = LogTransport()
server = xmlrpclib.Server('http://time.xmlrpc.com/RPC2', transport=p)
print server.currentTime.getCurrentTime() 
```

输出：

```
/RPC2 <?xml version='1.0'?>
<methodCall>
<methodName>currentTime.getCurrentTime</methodName>
<params>
</params>
</methodCall> 
```

和服务器错误（因为它不存在）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:48:10.250

在这种情况下，`sum.two.numbers`只是要在服务器上调用的函数。在这一行`server.register_function(add, 'sum.two.numbers')`中，您将该方法设置为映射到`add`采用 2 个参数的函数。您的服务器的所有可用方法都映射到当前添加。`dev.add`只是告诉客户端`add`在服务器上运行该方法。因为您没有映射`add`到服务器上的实际功能，所以您无法使用它并引发错误。

查看包含自定义[SimpleXMLRPCRequestHandler的](http://docs.python.org/2/library/simplexmlrpcserver.html#SimpleXMLRPCServer.SimpleXMLRPCRequestHandler)[示例](http://docs.python.org/2/library/simplexmlrpcserver.html#simplexmlrpcserver-example)，您可以在其中自定义它以添加日志记录。

如果您仍然遇到日志记录问题，请查看此内容：[XML-RPC 服务器日志记录](https://stackoverflow.com/questions/5452284/xml-rpc-server-logging)

# android - Android 4.0 x86 full 可在所有 PC 上安装

> ID：13786036
> 
> 赞同：0
> 
> 时间：2012-12-09T09:00:18.193
> 
> 标签：android

我想要一个在 pc 上完整安装的 Android 4 x86 的下载链接 - 支持所有设备 - 支持数字键盘 - 支持所有分辨率和任何功能以完美运行，下载大小对我来说并不重要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:14:07.153

也许这个链接可以帮助你： [http](http://www.android-x86.org/download) ://www.android-x86.org/download （尤其是iso文件）

https://thepiratebay.se/torrent/7517017/[offline]_Android_SDK_4.1_Full_4.1_x86_[2012__ENG] 这不是 4.0 而是更新的

# struts2 - 如果我必须从 checkboxlist 中检索列表键和列表值

> ID：13786037
> 
> 赞同：0
> 
> 时间：2012-12-09T09:00:26.017
> 
> 标签：struts2

我不知道这是否是一个愚蠢的问题，但如果很抱歉（但我的要求是这样），我的 JSP 现在正在使用复选框列表的 struts2 标记

我想将 listkey 和 listvalues 都提取到我的操作中，他们有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:26:19.980

我猜密钥将通过向复选框列表名称属性提供getter setter直接在动作类中发送，如果你想要密钥然后尝试使用jquery。通过将id提供给复选框来获取密钥并使用jquery语法检索它

```
$("#urid").val(). 
```

并将其设置在

```
<s:hidden id="" name="" value=""/>. 
```

只需提供一些谷歌搜索的想法就会让你享受解决方案。

# c# - 使用 Dukpt 的对称加密

> ID：13786040
> 
> 赞同：0
> 
> 时间：2012-12-09T09:00:40.033
> 
> 标签：c#, encryption-symmetric

我是这个论坛的新手。最近，我的任务是解密一个使用 AES 加密（也需要一个密钥来加密和解密）加密的文件。文件使用 DUKPT 每 5 分钟加密一次。

我正在研究 c#。通过在谷歌上搜索，如果你有 DUKPT，我发现了如何解密文件。但我不知道如何使用密钥序列号（KSN）和基本派生密钥（BDK）生成 DUKPT。c# 中是否有任何库支持，我们可以通过它生成 DUKPT ..

希望在这里有很大的帮助

DUKPT：每笔交易派生的唯一密钥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-24T23:52:49.590

[https://github.com/sgbj/Dukpt.NET](https://github.com/sgbj/Dukpt.NET) - 很棒的介绍。您需要规范来理解代码，因为它的编写考虑到了巧妙的简洁性，而不是可读性。6 个月前，我使用它不仅学习了 DUKPT，而且还实现了用于生物识别传感器设备的嵌入式 C 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-08T08:24:19.060

正如上一篇文章中提到的定义 DUKPT 的 ANSI 标准，X9.24-1 在 3DES 模式下，这意味着 Dukpt 使用 3DES 算法生成密钥（不加密或解密数据），它被称为 3DES-DUKPT。另一种类型是 AES -DUKPT，使用 AES-ECB 模式生成密钥。两者都有共同的输入 Base derivation Key (BDK) 和不同大小的 KSN。对于 3DES-DUKPT，BDK = 16 字节（始终）和 KSN = 10 字节。对于 AES-DUKPT，BDK = 16、24、32 字节（取决于 AES 密钥大小）和 KSN = 12 字节。

输入 KSN 由 Key_serial_number 和 Counter 组成。

输入 BDK 和 Key_serial_number（来自 KSN）生成 IPEK。带有计数器的 IPEK（来自 KSN）为数据生成加密/解密密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T03:35:02.277

有一个定义 DUKPT、X9.24-1 的 ANSI 标准，但它使用 DES 进行加密/解密和生成密钥。既然你说 BDK 和 KSN，我想这就是你的想法。我希望您没有收到任何回复（即使在延长了四个小时之后），因为您在同一个帖子中说 AES 和 DUKPT。（知情人士读到，并说，RTFM。）

它不是 C#，但我相信“Mikhail Burshteyn”在 Stack Exchange 或过去六个月左右的某个地方指出了一个 DUKPT.m 文件。我还写了一段 C 代码来说明如何解密。（标准中没有涵盖的东西值得一提。）

如果您想要可以剪切和粘贴的 C# 源代码，我想您会失望的。

# java - 用逗号分割字符串并获取最后两个值

> ID：13786042
> 
> 赞同：0
> 
> 时间：2012-12-09T09:00:48.763
> 
> 标签：java, string

我有字段类型字符串，可以在上面获取两种类型的值：

1.  简单字段，例如**p1**
2.  复杂字段 **p1/p2/p3/p4**

现在我有两个问题：

1.  由于检查是在循环中运行的，我如何能够**尽可能轻松地识别出该类型是复杂的？**
2.  当我得到复杂类型时，我需要存储**最后两个属性**，例如 p3 和 P4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:09:09.367

只需使用拆分操作并检查长度。

```
String[] prop = strprop.split("/");
if(prop.length > 1){
    String El = prop[prop.length];
    String El0 = prop[prop.length-1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:12:17.583

要回答 1）我会使用（假设变量`str`包含您的值）：

```
str.contains("/"); // If true => complex type 
```

对于 2）：

```
String[] vals = str.split("/");
String lastVal = vals[vals.length-1];
String preLastVal = vals[vals.length-2]; 
```

请注意，您应该在尝试获取值之前检查数组长度，否则您可能会收到 ArrayIndexOutOfBoundsException。

# mysql - MySQL时间数学

> ID：13786043
> 
> 赞同：2
> 
> 时间：2012-12-09T09:00:52.087
> 
> 标签：mysql, datetime, math, time, insert

我想在 MySQL 表中插入一行，其中一个值应该是现在（MySQL 服务器的）时间加上 5 秒。

我看到 MySQL 识别的 NOW() 函数，但我可以在该值上添加秒吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T09:02:51.047

```
SELECT NOW() + INTERVAL 5 SECOND 
```

也可以：

```
SELECT date_add(NOW(), INTERVAL 5 SECOND) 
```

[有关文档，](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)请参见此处。

希望这可以帮助。

# oracle - Oracle10g数据库DMBS_CRYPTO错误

> ID：13786049
> 
> 赞同：1
> 
> 时间：2012-12-09T09:01:39.050
> 
> 标签：oracle, oracle10g, database

我从[这个](http://datatothemax.com/blog/blog.php?entry_id=1328094544)示例修改了以下源代码，以使用`NUMBERS`而不是`VARCHAR2`.

```
CREATE OR REPLACE PACKAGE gen_encr
AS
    FUNCTION encrypt (p_PlainText NUMBER) RETURN RAW DETERMINISTIC;
    FUNCTION decrypt (p_Encrypted RAW) RETURN NUMBER DETERMINISTIC;
END;
/

CREATE OR REPLACE PACKAGE BODY gen_encr
AS
EncryptionType PLS_INTEGER := DBMS_CRYPTO.ENCRYPT_AES256
                           + DBMS_CRYPTO.CHAIN_CBC
                           + DBMS_CRYPTO.PAD_PKCS5;

EncryptionKey RAW (32) := UTL_RAW.cast_to_raw('ThisTextIsMyEncryptionKeyForThisPackage');

FUNCTION encrypt (p_PlainText NUMBER) RETURN RAW DETERMINISTIC
    IS
        encrypted_raw      RAW (1024);
    BEGIN
        encrypted_raw := DBMS_CRYPTO.ENCRYPT
        (  src => UTL_RAW.CAST_FROM_NUMBER (p_PlainText),
           typ => EncryptionType,
           key => EncryptionKey
        );
   RETURN encrypted_raw;
END encrypt;

FUNCTION decrypt (p_Encrypted RAW) RETURN NUMBER DETERMINISTIC
    IS
        decrypt_raw      RAW (1024);
    BEGIN
        decrypt_raw := DBMS_CRYPTO.DECRYPT
        (   src => p_Encrypted,
            typ => EncryptionType,
            key => EncryptionKey
        );
    RETURN (UTL_RAW.CAST_TO_NUMBER (decrypt_raw));
END decrypt;
END;
/ 
```

但是，当我运行语句时`SELECT sys.gen_encr.encrypt(sal) FROM emp`，出现以下错误。

```
ORA-06502: PL/SQL: numeric or value error: raw variable length too long
ORA-06512: at "SYS.GEN_ENCR", line 13 
```

一些谷歌搜索提示错误可能是 RAW 数据类型只能接受 2000 字节。

但是，在这种情况下，我不明白为什么会出现错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:42:49.937

This is dead simple: your key is too long. It is 37 characters which you're attempting to stuff into a `RAW(32)` variable. Shorten it to 32 characters and that error will disappear.

# xcode - Xcode 4：运行后添加构建阶段？

> ID：13786053
> 
> 赞同：0
> 
> 时间：2012-12-09T09:02:22.260
> 
> 标签：xcode

是否可以在构建和运行目标后运行 shell 脚本？

我不关心执行的退出代码，只是脚本在每次执行后运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:59:54.837

## **跑完之后**

修改运行方案并添加动作后脚本

*   单击左上方弹出窗口中的方案。
*   选择编辑方案
*   在弹出的列表视图中展开所选条目。（称为运行 XY）
*   点击后操作
*   然后点击+按钮
*   现在选择添加新的运行脚本。

## **构建后**

作为构建的最后阶段:)

*   到了你的项目
*   点击构建阶段
*   然后点击+按钮
*   现在选择添加新脚本阶段。

=> 将此新构建阶段的框拖放到您想要的过程中的位置。**在您的情况下，将其拖到列表底部，在复制捆绑资源下方**

# iphone - Objective-C 中的协议命名空间

> ID：13786062
> 
> 赞同：2
> 
> 时间：2012-12-09T09:03:54.023
> 
> 标签：iphone, objective-c, ios

在苹果[文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-TPXREF148) **中与类名不同，协议名没有全局可见性。他们生活在自己的命名空间中。**

这是什么意思，因为文档没有详细说明。我已经尝试过，我已经制作了两个同名的协议，但它们位于不同的文件中，编译器显示警告**重复协议。** 当我`import`将两个协议都放在单个文件中时，第一个协议`import`隐藏了其他协议减速。所以第一个导入的协议方法有效。其他给出警告

那么这条线是什么意思呢？我无法正确理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:02:41.347

在其他编程语言中，您可以在不同的目录或包中拥有相同的类名。

在 Objective C 中，类名是全局的，因此没有命名空间的概念。名称必须是唯一的。不能有两个 Employee 类。

但是对于协议，您可以在不同的文件中定义相同的协议，并且根据您导入的文件，您可以看到该协议。

如果你不导入那个头文件，你就不知道那个协议。- 这可能是文档中说“协议没有全局可见性”时的意思

同时，如果您对同一协议有两个定义，则只会尊重第一个定义。事实上，编译器会向你显示一个明确的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:09:16.513

您可以拥有多个具有相同名称的协议，但不能在同一个类中使用。前者将隐藏后者。

# c# - 将 mp3 文件合并到一个文件中并检索任何特定的 mp3 文件

> ID：13786066
> 
> 赞同：0
> 
> 时间：2012-12-09T09:05:04.233
> 
> 标签：c#, file-io, mp3

如何将许多（例如 500 个）mp3 文件合并为一个文件（任何类型），然后将任何特定文件提取为 mp3 格式？

目前我使用以下代码获取所有文件：

```
int i = 0;
string[] files = new string[500];
foreach (var path in Directory.GetFiles(@"R:\abc\a\"))
{
    files[i++] = path;
} 
```

提前致谢。

**更新：**如果我无法提取任何特定的 mp3 文件，那么我想将所有 mp3 文件提取到指定目录。ZIP、RAR 等是不够的，因为我必须防止人类在没有我的程序的情况下提取 mp3 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:16:27.780

无需实际为您编写代码，您可以执行以下操作：

1) 以二进制模式创建文件。

2) 将一个空的 Int32 值写入流。

3）将mp3文件的数量写入流。

4) 创建一个数组，大小为多少个mp3文件。我们将在此处存储它们的偏移量。

5) 对于每个文件，以二进制模式读取。将当前文件位置存储在上述数组中，并将 mp3 文件写入我们的输出文件。

6）再次记下输出文件的位置，并写出包含所有mp3文件位置的数组。

7) 寻找到文件的开头，用文件位置的偏移量覆盖我们最初写入的值。

8) 关闭它！

现在，当我们想要获取特定的 MP3 时，我们可以打开这个文件，读取前两个 Int32，它会告诉我们索引的偏移量，以及有多少。然后，您可以寻找到适当的位置并提取 mp3 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:46:34.150

虽然自制的容器格式（例如此处其他答案中建议的格式）可能有效，但我建议使用众所周知的容器格式，例如 .zip。尽管您不会从压缩中获得太多好处，但您将获得文件名，以及其他 progs 创建/提取文件存档的能力。

如果您需要有关如何以编程方式创建 .zip 的帮助，请研究网络（尤其是 StackOverflow），如果您仍然不知道，请作为单独的问题提出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T09:33:10.427

如果将所有字节连接在一起，请记住每个文件名以及它是多少字节，您可以使用该信息为每个音乐文件找到正确的字节段。尚未对此进行测试，但应该给您一个想法。

```
IEnumerable<FileInfo> Mp3Files = new DirectoryInfo(dir).GetFiles();

// catalog all names and their length in bytes (you can save this somewhere)
IEnumerable<Mp3File> musicFiles = Mp3Files.Select(o => new Mp3File() { Name = o.Name, Size = o.Length });

// concat all into one
byte[] musicData = files.SelecMany(o => File.ReadAllBytes(o.FullName)).ToArray();
File.WriteAllBytes("allmusic.data", musicData);

byte[] GetSingleMusicFile(string name)
{
    // find the music file by name, and get how many bytes it is
    int bytesToTake = musicFiles.First(o => o.Name == name).Length;

    // count all the music files BEFORE it and add up their bytes to find out how many bytes to skip
    int bytesToSkip = musicFiles.TakeWhile(o => o.Name != name).Sum(o => o.Size);

    // skip the bytes until you get to your music file then take its bytes
    byte[] singleMusicData = musicData.Skip(bytesToSkip).Take(bytesToTake).ToArray();
    return singleMusicData[]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T10:24:54.563

谢谢你们有能力帮助我。我决定使用密码保护来压缩它们。所以，没有人可以提取我的文件:)

# php - 从数据库中删除带有图像和主键值的行

> ID：13786073
> 
> 赞同：0
> 
> 时间：2012-12-09T09:06:12.713
> 
> 标签：php, mysql, sql, database

我得到了这段代码来在我的网页上显示一个表格。表的内容与数据库链接。所以我从数据库中的 html 表中获取表。在每个（html）行的末尾，我得到一个图像（icon-delete.png）。这将获取`$row[0]`(这是我的 PKID 所在的位置，因此它始终是唯一的数字并且它是自动上升的。现在我想用 PHP 代码清除单击 icon-delete.png 按钮的单个行。行也必须从数据库中删除。这是我此时的代码：

```
$con = mysql_connect('localhost', 'root', '');
if ($con) {
    mysql_select_db('bieren', $con);
    $result = mysql_query('SELECT * FROM brouwers');
    echo '<form action="" method="post">';
    echo '<table border="0" cellspacing=0>';    
    echo '<tr class="heads">
        <th>brouwernr</th>
        <th>brouwernaam</th>
        <th>adres</th>
        <th>postcode</th>
        <th>gemeente</th>
        <th>omzet</th>
    </tr>';

    $counter = 0;
    while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
        if($counter % 2 == 0){
            echo '<tr class="even">';
        } else{
            echo '<tr class="oneven">';
        }

        for($i = 0; $i <=6; $i++){
            $counter ++;
            echo '<td>';
            echo $row[$i];
            echo'</td>';
        }

        echo '<td> <input type="image" src="icon-delete.png" name="delete" value ="'.$row[0].'" /> </td>';
        echo '</tr>';
    }   
} else {
    echo 'Connectie niet geslaagd. Reden: ' . mysql_error() . '. Probeer opnieuw.';
}
echo '</table>';
echo '</form>';

if(isset($_POST))
{
    $con = mysql_connect('localhost', 'root', '');

    if ($con) {
        mysql_select_db('bieren', $con);
        $result = mysql_query('DELETE FROM brouwers 
                  WHERE brouwers.brouwernr = "'.$row[0].'"');}
} 
```

我的代码的最后一条规则是：WHERE`brouwers.brouwernr = $row[0]`但这不是要删除的正确行。我还将在 html 中显示我现在得到的图像，以便您了解它必须做什么：

![网页视图](../Images/d9657e9f05176ed02b72632fe1d05a6a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T11:57:13.197

我相信您最初问题的答案是您需要使用 $_POST['delete'] 作为要删除的行的 ID，@vlcekmi3 似乎已经很好地回答了这个问题。

但是，我相信我可以为您原来的问题增加一些额外的价值，并希望能说服您改变主意，使用旧的 ext/mysql 扩展（*现在已弃用并且长期以来一直不鼓励使用*）。我注意到您说您现在不想使用 PDO。我认为这种想法有问题的是，现在是停止使用旧的 mysql API 并开始使用更新的 API，例如[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)的最佳时机。与其尝试给您不使用旧 API 的理由，我将尝试为您提供一些您应该使用较新 API 的理由。

1.  您当前使用的 API（*函数）已经使用**了`mysql_*`*将近 15 年。我们大多数人都没有那么旧的汽车。您是否像重视您的交通方式一样重视您的代码？该扩展是在 MySQL 版本 3.x 期间引入的，并且从那时起一直向后兼容该版本的 MySQL。由于这种无关紧要的向后兼容性限制，API 在支持数据库的所有新功能方面仍然缺乏支持，而其中大部分功能对于当今 Web 上的现代应用程序开发来说是无价的。
2.  API 不再接受来自 MySQL 社区的任何维护或支持。这意味着您不应该期望此扩展中的任何内容多年来都会发生变化。这包括错误修复、潜在的安全补丁以及多年来 MySQL 中的任何更改可能会破坏您的扩展。这不是一件好事（你把自己置于危险之中）。PDO 和 MySLQi 都可以保护您的代码免受这些风险的影响，并且还提供了额外的便利，因为如果出现任何问题（*发现任何错误*），您可以期望扩展能够迅速得到修复。
3.  较新的 API 为您提供无法在 ext/mysql 中使用的功能，例如：
    *   准备好的语句（在许多常见情况下可能提供更快的性能）
    *   参数化查询（帮助您避免常见的人为错误，例如您刚刚在此处遇到的转义问题）
    *   异步查询（另一个性能优势）
    *   存储过程（一个优秀的工具，它提供了常规 SQL 查询所无法做到的优势）
    *   多查询功能
    *   交易支持（用于*财务数据*等关键任务应用程序）
    *   SSL 支持（当您在网络上有多个数据库服务器时）
    *   运行与 MySQL 服务器交互的命令的能力，这是旧 API 无法做到的。
4.  较新的 API 使您的代码更易于阅读和使用。您可以使用这些 API 抽象出大部分计算逻辑的 SQL 逻辑，并避免 ext/mysql 给您带来不必要的复杂性。
5.  PDO 是一个与数据库无关的 API，这意味着您只需在 PHP 中学习相同的一组函数即可与 PHP 可以支持的任何数据库进行交互。如果将来您必须在任何给定时间使用新数据库，您将不必重新学习新界面。这样可以节省您处理 PHP 代码的时间和精力。

在查看了我为您列出的一些好处之后；我挑战你看看**现在不切换的好处**并告诉我它们是否超过了转换的好处。我非常有信心您将无法得出这个结论，因为我什至想不出将您进一步推迟到更新的 API 的移动有什么好处。这个旧的 API 促进了不良做法，您今天在得到答案时才意识到其中之一，而且这些不良做法在多年使用 ext/mysql 的过程中已经根深蒂固。甚至我也意识到在过去 8 年左右的时间里，我从 ext/mysql 中养成了多少坏习惯。但是当我真正看到优点和缺点时（而且我在过去的两年里一直在这样做），我得出的结论是优点远远大于缺点。

作为一个简单的例子，让我们看看如果您要使用 PDO，您的代码将变得多么**漂亮**、**更易于阅读**和**更易于调试。**

```
/* This creates a new PDO object that holds the connection to your database */
$db = new PDO('mysql:dbname=bieren;host=localhost;charset=UTF-8', 'root', '');

/* This puts PDO into Exception Mode making it easier for you to catch errors */
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, 0); // turn off emulation

/* Create your HTML table */
echo "<table>";

// Look how easy it is to loop over the results
foreach($db->query('SELECT * FROM brouwers', PDO::FETCH_NUM) as $i => $row) {
    echo ($i % 2 ? '<tr class="oneven">' : '<tr class="even">');
    foreach ($row as $column) {
        echo "<td>$column</td>";
    }
    echo "</tr>\n";
}

echo "</table>"; 
```

看看代码看起来多么漂亮和简洁，它实际上更容易阅读！你会同意吗？

# java - 使用 Groovy 对我的会话 bean 进行 RMI 调用

> ID：13786075
> 
> 赞同：1
> 
> 时间：2012-12-09T09:06:17.017
> 
> 标签：java, groovy, weblogic, rmi

有人可以给我一个代码片段，我可以在其中对 Groovy 中的会话 bean（用 Java 编写并部署在 Weblogic 上）执行 RMI 调用吗？

**编辑 1**

这是我的java代码。在 Groovy 中有更简单的方法吗？

```
Properties props = new Properties();
props.put("java.naming.factory.initial", "weblogic.jndi.WLInitialContextFactory");
props.put("java.naming.provider.url",”t3://127.0.0.1:7001”);  // url+port format
props.put("java.naming.security.principal", “weblogic_username”));
props.put("java.naming.security.credentials", “weblogic_password”);
try
{
     String simpleName = MyRemoteClass.class.getSimpleName();
     String fullName = MyRemoteClass.class.getName();
     String name = simpleName + "#" + fullName;
     initContext = new InitialContext(props);
     MyRemoteClass remoteClass = (MyRemoteClass)initContext.lookup(name);

     remoteClass.doSomething();
} 
catch (Throwable ex) 
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:07:38.033

我不知道有任何库可以包装/简化来自 Groovy 的 RMI 调用。如果没有，您至少可以从语法糖、强制和隐式转换中受益：

```
def props = [
  "java.naming.factory.initial" : "weblogic.jndi.WLInitialContextFactory",
  "java.naming.provider.url" : "t3://127.0.0.1:7001",  // url+port format
  "java.naming.security.principal" : "weblogic_username",
  "java.naming.security.credentials" : "weblogic_password"
] as Properties

try
{
     def name = "${MyRemoteClass.simpleName}#${MyRemoteClass.name}"
     initContext = new InitialContext(props)
     MyRemoteClass remoteClass = initContext.lookup name

     remoteClass.doSomething()
} 
catch (t)
{
  t.printStackTrace()
} 
```

时髦的:-)

# html - 自动换行不适用于浮动文本

> ID：13786078
> 
> 赞同：2
> 
> 时间：2012-12-09T09:07:00.847
> 
> 标签：html, css, css-float, word-wrap

假设我有这个。

```
<div>
<div id="lala">
lalalala
</div>
</div> 
```

CSS：

```
#lala
{
   float:left;
   word-wrap:break-word;
} 
```

如果里面的文字`#lala`很大，它会看起来像这样。

```
|                              |
|                              |
| lalalalalalalalalalalalalala | lalalalalala <-- these won't be show.
|                              |
|                              | 
```

如果我删除`float:left;`这将是结果。

```
|                              |
|                              |
| lalalalalalalalalalalalalala |
| lalalalalala                 |
|                              | 
```

如何在仍然使用浮点数的同时获得第二个结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T09:10:36.793

给元素一个固定的宽度，这样我们就知道在哪里断词：

```
#lala
{
float:left;
word-wrap:break-word;
width:?px;
} 
```

word-wrap:break-word 属性仅适用于元素具有可视化渲染、是具有显式高度/宽度的内联元素、绝对定位和/或块元素的情况。

# python - TextMate - 在为 Python 脚本运行时保持编辑器的焦点

> ID：13786081
> 
> 赞同：1
> 
> 时间：2012-12-09T09:07:13.057
> 
> 标签：python, ide, textmate

我正在编写 Python，我发现当我按 Cmd + R 时，TextMate (1.5.11) 会专注于“正在运行...”窗口，因此我必须切换回主窗口才能继续编写代码，这很烦人.

是否可以阻止 TextMate 这样做并在后台运行我的代码——或者，你会推荐一种替代方式（另一个包？）来运行 Python 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:24:05.280

我编写了一个[简单的 TextMate 包](http://d43.me/blog/1538/run-python-ruby-php-bash-scripts-in-terminal-app-without-stealing-focus-from-textmate/)来运行 Python、Ruby、PHP、Bash 脚本，而不会从 TextMate 中窃取焦点，并在 MIT 许可下将[其发布在 GitHub 上。](https://github.com/EugeneDae/Run-in-Terminal-Bundle)

# java - 创建两个线程，一个显示奇数和其他偶数

> ID：13786083
> 
> 赞同：22
> 
> 时间：2012-12-09T09:07:45.767
> 
> 标签：java, multithreading

我正在尝试创建两个线程，一个线程显示0到10的偶数，一个线程显示1到11的奇数。下面的代码适合设计这个程序吗？

```
public class Mythread {

    public static void main(String[] args) {
        Runnable r = new Runnable1();
        Thread t = new Thread(r);
        t.start();
        Runnable r2 = new Runnable2();
        Thread t2 = new Thread(r2);
        t2.start();
    }
}

class Runnable2 implements Runnable{
    public void run(){
        for(int i=0;i<11;i++){
            if(i%2 == 1)
                System.out.println(i);
        }
    }
}

class Runnable1 implements Runnable{
    public void run(){
        for(int i=0;i<11;i++){
            if(i%2 == 0)
                System.out.println(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-06-12T17:32:31.993

@aymeric 答案不会按自然顺序打印数字，但这段代码会。解释在最后。

```
public class Driver {
    static Object lock = new Object();

    public static void main(String[] args) {
        Thread t1 = new Thread(new Runnable() {
            public void run() {

                for (int itr = 1; itr < 51; itr = itr + 2) {
                    synchronized (lock) {
                        System.out.print(" " + itr);
                        try {
                            lock.notify();
                            lock.wait();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
        });
        Thread t2 = new Thread(new Runnable() {
            public void run() {

                for (int itr = 2; itr < 51; itr = itr + 2) {
                    synchronized (lock) {
                        System.out.print(" " + itr);
                        try {
                            lock.notify();
                            if(itr==50)
                                break;
                            lock.wait();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
        });
        try {
            t1.start();
            t2.start();
            t1.join();
            t2.join();
            System.out.println("\nPrinting over");
        } catch (Exception e) {

        }
    }
} 
```

为了实现这一点，上面两个线程的运行方法必须一个接一个地调用，即它们需要同步，我正在使用锁来实现。

代码的工作方式如下： t1.run 打印奇数并通知任何等待线程它将释放锁，然后进入等待状态。

此时 t2.run 被调用，它打印下一个偶数，通知其他线程它即将释放它持有的锁，然后进入等待状态。

这一直持续到 t2.run() 中的 itr 达到 50，此时我们的目标已经实现，我们需要杀死这两个线程。

通过中断，我避免在 t2.run 中调用 lock.wait() 并且因此关闭了 t2 线程，控制现在将转到 t1.run，因为它正在等待获取锁；但是这里它的值将> 51，我们将退出它的run()，从而关闭线程。

如果在 t2.run() 中没有使用 break，虽然我们会在屏幕上看到数字 1 到 50，但两个线程会陷入死锁情况并继续处于等待状态。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-09T09:19:28.130

我只想更改一些细节（此处无需使用模运算符...）：

```
public class Mythread {

    public static void main(String[] args) {
        Runnable r = new Runnable1();
        Thread t = new Thread(r);
        Runnable r2 = new Runnable2();
        Thread t2 = new Thread(r2);
        t.start();
        t2.start();
    }
}

class Runnable2 implements Runnable{
    public void run(){
        for(int i=0;i<11;i+=2) {
            System.out.println(i);
        }
    }
}

class Runnable1 implements Runnable{
    public void run(){
        for(int i=1;i<=11;i+=2) {
           System.out.println(i);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T09:29:32.937

是的，很好。但是在这种情况下，我认为你不需要2个线程，因为操作很简单。但是，如果您正在练习线程，则可以

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-07T15:45:44.247

下面是在共享对象上使用锁定的代码，该共享对象具有要打印的数字。与上述解决方案不同，它也保证了顺序。

```
public class MultiThreadPrintNumber {
  int i = 1;

  public synchronized void printNumber(String threadNm) throws InterruptedException{

      if(threadNm.equals("t1")){
        if(i%2 == 1){
          System.out.println(Thread.currentThread().getName()+"--"+ i++);
          notify();
        } else {
          wait();
        }
      } else if(threadNm.equals("t2")){
        if(i%2 == 0){
          System.out.println(Thread.currentThread().getName()+"--"+ i++);
          notify();
        } else {
          wait();
        }
      }

    }

  public static void main(String[] args) {
    final MultiThreadPrintNumber obj = new MultiThreadPrintNumber();
    Thread t1 = new Thread(new Runnable() {

      @Override
      public void run() {
        try {
          while(obj.i <= 10){

            obj.printNumber(Thread.currentThread().getName());
          }
        } catch (InterruptedException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
        }
        System.out.println("done t1");
      }
    });
    Thread t2 = new Thread(new Runnable() {

      @Override
      public void run() {
        try {
          while(obj.i <=10){
            obj.printNumber(Thread.currentThread().getName());
          }
        } catch (InterruptedException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
        }
        System.out.println("done t2");
      }
    });

    t1.setName("t1");
    t2.setName("t2");
    t1.start();
    t2.start();
  }
} 
```

输出将如下所示：

```
t1--1
t2--2
t1--3
t2--4
t1--5
t2--6
t1--7
t2--8
t1--9
t2--10
done t2
done t1 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-18T15:58:59.403

```
package javaapplication45;

public class JavaApplication45 extends Thread {

    public static void main(String[] args) {
        //even numbers
        Thread t1 = new Thread() {
            public void run() {
                for (int i = 1; i <= 20; i++) {
                    if (i % 2 == 0) {
                        System.out.println("even thread " + i);
                    }
                }
            }
        };
        t1.start();
        //odd numbers
        Thread t2 = new Thread() {
            public void run() {
                for (int i = 1; i <= 20; i++) {
                    if (i % 2 != 0) {
                        System.out.println("odd thread " + i);
                    }
                }
            }
        };
        t2.start();

    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-09T09:22:27.353

如果您需要其他选择，我也会考虑使用[Java Concurrency 。](http://docs.oracle.com/javase/tutorial/essential/concurrency/)Java Concurrency 包中提供的一些功能提供了更高级别的抽象，然后直接使用 Thread 类并因此提供更多功能。

对于您的具体情况，您所做的事情是相当合理的，但是这些数字的打印顺序重要吗？你想要赔率之前的偶数吗？这类问题将更好地表明最适合您需求的设计。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-17T02:27:44.370

```
package thread;

import org.hibernate.annotations.Synchronize;

class PrintOdd implements Runnable {
    int count = -1;
    private Object common;

    PrintOdd(Object common) {
        this.common = common;
    }

    @Override
    public void run() {
        synchronized (common) {
            while (count < 1000) {
                try {
                    common.notifyAll();
                    System.out.println(count += 2);
                    common.wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }

    }

}

class PrintEven implements Runnable {

    int count = 0;
    private Object common;

    PrintEven(Object common) {
        this.common = common;
    }

    @Override
    public void run() {
        synchronized (common) {
            while (count < 1000) {
                try {
                    common.notifyAll();
                    System.out.println(count += 2);
                    common.wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }

    }

}

public class PrintNatural {
    public static void main(String args[]) {
        Object obj = new Object();
        Runnable r = new PrintOdd(obj);
        Thread printOdd = new Thread(r);

        Runnable r2 = new PrintEven(obj);
        Thread printEven = new Thread(r2);

        printOdd.start();
        printEven.start();

    }

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-28T12:36:53.287

**编号将按顺序打印**

```
Main class
===========
package com.thread;

import java.util.concurrent.atomic.AtomicInteger;

public class StartThread {
    static AtomicInteger no = new AtomicInteger(1);
    public static void main(String[] args) {
        Odd oddObj = new Odd();
        Thread odd = new Thread(oddObj);
        Thread even = new Thread(new Even(oddObj));
        odd.start();
        even.start();
    }
}

Odd Thread
===========
package com.thread;

public class Odd implements Runnable {

    @Override
    public void run() {
        while (StartThread.no.get() < 20) {
            synchronized (this) {
                System.out.println("Odd=>" + StartThread.no.get());
                StartThread.no.incrementAndGet();

                try {
                    this.notify();
                    if(StartThread.no.get() == 20)
                        break;
                    this.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

    }

}

Even Thread
===========
package com.thread;

public class Even implements Runnable {
    Odd odd;

    public Even(Odd odd) {
        this.odd = odd;
    }

    @Override
    public void run() {
        while (StartThread.no.get() < 20) {
            synchronized (odd) {
                System.out.println("Even=>" + StartThread.no.get());
                StartThread.no.incrementAndGet();
                odd.notifyAll();
                try {
                    odd.wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        }       

    }

}

Output (Nos are printed in sequential)
======
Odd=>1
Even=>2
Odd=>3
Even=>4
Odd=>5
Even=>6
Odd=>7
Even=>8
Odd=>9
Even=>10
Odd=>11
Even=>12
Odd=>13
Even=>14
Odd=>15
Even=>16
Odd=>17
Even=>18
Odd=>19 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-20T08:35:21.330

并发套餐：

```
 import java.util.concurrent.ExecutorService;

    import java.util.concurrent.Executors;
    import java.util.concurrent.Future;
    import java.util.concurrent.locks.Condition;
    import java.util.concurrent.locks.Lock;
    import java.util.concurrent.locks.ReentrantLock;
    //=========== Task1 class prints odd =====
    class TaskClass1 implements Runnable
    {

    private Condition condition;
    private Lock lock;
    boolean exit = false;
    int i;
    TaskClass1(Condition condition,Lock lock)
    {
        this.condition = condition;
        this.lock = lock;
    }
    @Override
    public void run() {
        try
        {
            lock.lock();
            for(i = 1;i<11;i++)
            {
                if(i%2 == 0)
                {
                    condition.signal();
                    condition.await();

                }
                if(i%2 != 0)
                {
                    System.out.println(Thread.currentThread().getName()+" == "+i);

                }

            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }finally
        {
            lock.unlock();
        }

    }

}
//==== Task2 : prints even =======
class TaskClass2 implements Runnable
{

    private Condition condition;
    private Lock lock;
    boolean exit = false;
    TaskClass2(Condition condition,Lock lock)
    {
        this.condition = condition;
        this.lock = lock;
    }
    @Override
    public void run() {
        int i;
        // TODO Auto-generated method stub
        try
        {
            lock.lock();
            for(i = 2;i<11;i++)

            {

                if(i%2 != 0)
                {
                    condition.signal();
                    condition.await();
                }
                if(i%2 == 0)
                {
                    System.out.println(Thread.currentThread().getName()+" == "+i);

                }

            }

        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }finally
        {
            lock.unlock();

        }

    }

}
public class OddEven {

    public static void main(String[] a)
    {
        Lock lock = new ReentrantLock();
        Condition condition = lock.newCondition();
        Future future1;
        Future future2;
        ExecutorService executorService = Executors.newFixedThreadPool(2);

        future1 = executorService.submit(new TaskClass1(condition,lock));
        future2 = executorService.submit(new TaskClass2(condition,lock));
        executorService.shutdown();

    }

} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-18T08:45:47.820

不是上述问题的答案，而是类似的问题。

程序按顺序打印数组的元素，但使用两个不同的线程打印相邻元素

```
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author ntv
 */
public class PrintLAternateNumber {
    public static void main(String[] args) {
        int [] num = {1,2,3,4,5,6};
        Printer p = new Printer();
        Thread t1 = new Thread(new Thread1(num,  p), "Thread1");
        Thread t2 = new Thread(new Thread2(num,  p), "Thread2");
        t1.start();
        t2.start();
    }

}

class Thread1 implements Runnable {
    int [] num;
    Printer p ;
    public Thread1(int[] num,  Printer p) {
        this.num = num;
        this.p = p;
    }

    public void run() {
        try {
            print();
        } catch (InterruptedException ex) {
            Logger.getLogger(Thread1.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void print() throws InterruptedException {
        int i = 1;

            while(i < num.length) {
                synchronized(num) {
                    while (p.evenPrinted) {
                        num.wait();
                     }
                }   

                synchronized(num) {
                     p.printEven(Thread.currentThread().getName(), num[i]);
                     i= i + 2;
                     num.notifyAll();

                }
            }
    }
}

class Thread2 implements Runnable {
    int [] num;
    Printer p ;
    public Thread2(int[] num, Printer p) {
        this.num = num;
        this.p = p;
    }

    public void run() {
        try {
            print();
        } catch (InterruptedException ex) {
            Logger.getLogger(Thread2.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void print() throws InterruptedException {
        int i = 0;

            while(i < num.length) {
                synchronized(num) {
                    while (!p.evenPrinted) {
                        num.wait();
                     }
                }    

                 synchronized(num) {
                     p.printOdd(Thread.currentThread().getName(), num[i]);
                     i = i + 2;
                     num.notifyAll();

                }
            }
    }
}

class Printer {
    boolean evenPrinted = true;
    void printEven(String threadName , int i) {
        System.out.println(threadName + "," + i);
        evenPrinted = true;
    }

        void printOdd(String threadName , int i) {
        System.out.println(threadName + "," + i);
        evenPrinted = false;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-14T08:18:17.587

```
 public class ThreadClass {
   volatile int i = 1;
    volatile boolean state=true;

    synchronized public void printOddNumbers(){

                   try {
                       while (!state) {

                           wait();
                       }

                   } catch (InterruptedException e) {
                       e.printStackTrace();
                   }
                System.out.println(Thread.currentThread().getName()+" "+i);
                      state = false;
                      i++;
                      notifyAll();

    }

  synchronized  public void printEvenNumbers(){

      try {
          while (state) {

              wait();
          }

      } catch (InterruptedException e) {
          e.printStackTrace();
      }
      System.out.println(Thread.currentThread().getName()+" "+i);
      state = true;
      i++;
      notifyAll();

    }
} 
```

然后像这样调用上面的类

```
 // I am ttying to print 10 values.
  ThreadClass threadClass=new ThreadClass();

        Thread t1=new Thread(){
            int k=0;
            @Override
            public void run() {
                while (k<5) {
                    threadClass.printOddNumbers();
                    k++;
                }
            }
        };
        t1.setName("Thread1");
        Thread t2=new Thread(){
            int j=0;
            @Override
            public void run() {
                while (j<5) {
                    threadClass.printEvenNumbers();
                    j++;
                }
            }
        };
        t2.setName("Thread2");

        t1.start();

        t2.start(); 
```

1.  在这里，我试图打印 1 到 10 的数字。
2.  一个线程试图打印偶数和另一个线程奇数。
3.  我的逻辑是在奇数之后打印偶数。对于这个偶数线程应该等到奇数方法发出通知。
4.  每个线程调用特定方法 5 次，因为我只尝试打印 10 个值。

输出：

```
System.out: Thread1 1
System.out: Thread2 2
System.out: Thread1 3
System.out: Thread2 4
System.out: Thread1 5
System.out: Thread2 6
System.out: Thread1 7
System.out: Thread2 8
System.out: Thread1 9
System.out: Thread2 10 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-20T14:23:10.553

```
public class EvenOddNumberPrintUsingTwoThreads {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Thread t1 = new Thread() {          
            public void run() {

                for (int i = 0; i <= 10; i++) {
                    if (i % 2 == 0) {
                        System.out.println("Even : " + i);
                    }
                }

            }
        };

        Thread t2 = new Thread() {
            // int i=0;
            public void run() {

                for (int i = 0; i <= 10; i++) {
                    if (i % 2 == 1) {
                        System.out.println("Odd : " + i);
                    }
                }

            }
        };
        t1.start();
        t2.start();
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-24T09:59:50.217

```
package com.example;

public class MyClass  {
    static int mycount=0;
    static Thread t;
    static Thread t2;
    public static void main(String[] arg)
    {
        t2=new Thread(new Runnable() {
            @Override
            public void run() {
                System.out.print(mycount++ + " even \n");
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                if(mycount>25)
                    System.exit(0);
                run();
            }
        });
        t=new Thread(new Runnable() {
            @Override
            public void run() {
                System.out.print(mycount++ + " odd \n");
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                if(mycount>26)
                    System.exit(0);
                run();
            }
        });
        t.start();
        t2.start();
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-02-18T12:10:19.797

```
public class OddEvenPrinetr {
    private static Object printOdd = new Object();

    public static void main(String[] args) {

        Runnable oddPrinter =  new Runnable() {
            int count = 1;
            @Override
            public void run() {
                while(true){
                    synchronized (printOdd) {
                        if(count >= 101){
                            printOdd.notify();
                            return;
                        }
                        System.out.println(count);
                        count = count + 2;                                              
                        try {
                            printOdd.notify();
                            printOdd.wait();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
        };

        Runnable evenPrinter =  new Runnable() {
            int count = 0;
            @Override
            public void run() {
                while(true){
                    synchronized (printOdd) {
                        printOdd.notify();
                        if(count >= 100){                       
                            return;
                        }                                       
                        count = count + 2;
                        System.out.println(count);
                        printOdd.notify();
                        try {
                            printOdd.wait();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
        };

        new Thread(oddPrinter).start();
        new Thread(evenPrinter).start();
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-27T16:14:27.163

公共类连续数字打印{

```
private static class NumberGenerator {

    public int MAX = 100;

    private volatile boolean evenNumberPrinted = true;

    public NumberGenerator(int max) {
        this.MAX = max;
    }

    public void printEvenNumber(int i) throws InterruptedException {
        synchronized (this) {
            if (evenNumberPrinted) {
                wait();
            }
            System.out.println("e = \t" + i);
            evenNumberPrinted = !evenNumberPrinted;
            notify();
        }
    }

    public void printOddNumber(int i) throws InterruptedException {
        synchronized (this) {
            if (!evenNumberPrinted) {
                wait();
            }
            System.out.println("o = \t" + i);
            evenNumberPrinted = !evenNumberPrinted;
            notify();
        }
    }

}

private static class EvenNumberGenerator implements Runnable {

    private NumberGenerator numberGenerator;

    public EvenNumberGenerator(NumberGenerator numberGenerator) {
        this.numberGenerator = numberGenerator;
    }

    @Override
    public void run() {
        for(int i = 2; i <= numberGenerator.MAX; i+=2)
            try {
                numberGenerator.printEvenNumber(i);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
    }
}

private static class OddNumberGenerator implements Runnable {

    private NumberGenerator numberGenerator;

    public OddNumberGenerator(NumberGenerator numberGenerator) {
        this.numberGenerator = numberGenerator;
    }

    @Override
    public void run() {
        for(int i = 1; i <= numberGenerator.MAX; i+=2) {
            try {
                numberGenerator.printOddNumber(i);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
public static void main(String[] args) {
    NumberGenerator numberGenerator = new NumberGenerator(100);
    EvenNumberGenerator evenNumberGenerator = new EvenNumberGenerator(numberGenerator);
    OddNumberGenerator oddNumberGenerator = new OddNumberGenerator(numberGenerator);
    new Thread(oddNumberGenerator).start();
    new Thread(evenNumberGenerator).start();

} 
```

}

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-08-31T06:21:01.210

```
public class ThreadExample {

Object lock = new Object();

class ThreadEven implements Runnable {

    @Override
    public void run() {
        int i = 2;
        while (i <= 20) {
            synchronized (lock) {
                System.out.println(i + " ");
                i = i + 2;
                lock.notify();
                try {
                    lock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

    }

}

class ThreadOdd implements Runnable {

    @Override
    public void run() {
        int i = 1;
        while (i <= 20) {
            synchronized (lock) {
                System.out.println(i + " ");
                i = i + 2;
                try {
                    lock.notify();
                    lock.wait();
                } catch (InterruptedException e) {

                    e.printStackTrace();
                }
            }
        }

    }

}

public static void main(String args[]) {

    ThreadExample example = new ThreadExample();
    ThreadExample.ThreadOdd odd = example.new ThreadOdd();
    ThreadExample.ThreadEven even = example.new ThreadEven();

    Thread oT = new Thread(odd);
    Thread eT = new Thread(even);

    oT.start();
    eT.start();

} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-01-14T23:03:46.697

```
public class MyThread {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Threado o =new Threado();
        o.start();

        Threade e=new Threade();
        e.start();    
    }    
}

class Threade extends Thread{

    public void run(){

        for(int i=2;i<10;i=i+2)
            System.out.println("evens "+i);         
    }       
}

class Threado extends Thread{

    public void run(){

        for(int i=1;i<10;i=i+2)
            System.out.println("odds "+i);          
    }       
} 
```

输出 ：-

赔率 1 赔率 3 赔率 5 赔率 7 赔率 9 偶数 2 偶数 4 偶数 6 偶数 8

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-03-25T15:28:28.033

包 p.Threads;

```
public class PrintEvenAndOddNum  {

    private  Object obj = new Object();

    private static final PrintEvenAndOddNum peon = new PrintEvenAndOddNum();

    private PrintEvenAndOddNum(){}

    public static PrintEvenAndOddNum getInstance(){
        return peon;
    }

    public  void printOddNum()  {
        for(int i=1;i<10;i++){
            if(i%2 != 0){
                synchronized (obj) {
                    System.out.println(i);

                    try {
                        System.out.println("oddNum going into waiting state ....");
                        obj.wait();

                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    System.out.println("resume....");
                    obj.notify();
                }
            }
        }
    }

    public  void printEvenNum()  {
        for(int i=1;i<11;i++){
            if(i%2 == 0){
                synchronized(obj){
                    System.out.println(i);
                    obj.notify();
                    try {
                        System.out.println("evenNum going into waiting state ....");
                        obj.wait();
                        System.out.println("Notifying waiting thread ....");
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        }
    }   
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-07-04T15:49:54.317

如果您被要求以同步方式打印偶数奇数，那么几乎所有这些都是必要的。

```
public class ThreadingOddEvenNumbers {

    void main(String[] args) throws InterruptedException {
        Printer printer = new Printer(57);
        Thread t1 = new Thread(new MyRunner(printer, true), "EvenPrinter");
        Thread t2 = new Thread(new MyRunner(printer, false), "OddPrinter");
        t1.start();
        t2.start();

        t1.join();
        t2.join();
    }

}

class MyRunner implements Runnable {
    private Printer p;
    private boolean evenProperty;

    public MyRunner(Printer p, boolean evenNess) {
        this.p = p;
        evenProperty = evenNess;
    }

    public void run() {
        try {
            print();
        } catch (InterruptedException ex) {
            System.out.println(this.getClass().getName() + " "
                    + ex.getMessage());
        }
    }

    public void print() throws InterruptedException {
        while (!p.isJobComplete()) {
            synchronized (p) {
                if (evenProperty)
                    while (p.isEvenPrinted()) {
                        System.out.println("wait by: "
                                + Thread.currentThread().getName());
                        p.wait();
                        if (p.isJobComplete())
                            break;
                    }
                else
                    while (!p.isEvenPrinted()) {
                        System.out.println("wait by: "
                                + Thread.currentThread().getName());
                        p.wait();
                        if (p.isJobComplete())
                            break;
                    }
            }

            synchronized (p) {
                if (evenProperty)
                    p.printEven(Thread.currentThread().getName());
                else
                    p.printOdd(Thread.currentThread().getName());
                p.notifyAll();
                System.out.println("notify called: by: "
                        + Thread.currentThread().getName());
            }
        }
    }
}

class Printer {
    private volatile boolean evenPrinted;
    private volatile boolean jobComplete;
    private int limit;
    private int counter;

    public Printer(int lim) {
        limit = lim;
        counter = 1;
        evenPrinted = true;
        jobComplete = false;
    }

    public void printEven(String threadName) {
        System.out.println(threadName + "," + counter);
        incrCounter();
        evenPrinted = true;
    }

    public void printOdd(String threadName) {
        System.out.println(threadName + "," + counter);
        incrCounter();
        evenPrinted = false;
    }

    private void incrCounter() {
        counter++;
        if (counter >= limit)
            jobComplete = true;
    }

    public int getLimit() {
        return limit;
    }

    public boolean isEvenPrinted() {
        return evenPrinted;
    }

    public boolean isJobComplete() {
        return jobComplete;
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-04-11T06:23:33.267

问题应该是：使用线程同时打印奇偶数

```
public class EvenOdd1 {
        static boolean flag = true;
        public static void main(String[] args) {
            Runnable odd = () -> {
                for (int i = 1; i <= 10;) {
                    if (EvenOddPrinter.flag) {
                        System.out.println(Thread.currentThread().getName() + " " + i);
                        i += 2;
                        EvenOddPrinter.flag = !EvenOddPrinter.flag;
                    }//if
                }//for
            };

            Runnable even = () -> {
                for (int i = 2; i <= 10;) {
                    if (!EvenOddPrinter.flag) {
                        System.out.println(Thread.currentThread().getName() + " " + i);
                        i += 2;
                        EvenOddPrinter.flag = !EvenOddPrinter.flag;
                    }
                }
            };

            Thread t1 = new Thread(odd, "Odd");
            Thread t2 = new Thread(even, "Even");
            t1.start();
            t2.start();
        }
    }
/*The output => 
Odd 1
Even 2
Odd 3
Even 4
Odd 5
Even 6
Odd 7
Even 8
Odd 9
Even 10
*/ 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-03-21T18:22:33.537

简单优雅的解决方案 -

```
import java.util.*;
import java.util.stream.*;  
public class OddEvenUsingTwoThreads {
   private static Object sharedObject = new Object();
   public static void main(String args[]) throws InterruptedException{
        Runnable r1 = new MyRunnable4Odd(sharedObject);
        Thread t1 = new Thread(r1);

        Runnable r2 = new MyRunnable4Even(sharedObject);
        Thread t2 = new Thread(r2);

        t1.start();
        t2.start();
        t1.join();
        t2.join();
   }   
}

class MyRunnable4Even implements Runnable{
    private Object obj;
    public MyRunnable4Even(Object sharedObj){
        this.obj = sharedObj;
    }
    @Override
    public void run() {
        for(int i=2; i<15; i+=2) {
            synchronized(obj){
              System.out.println(i);
              try{
                  obj.notify();
                  obj.wait();
              } catch(InterruptedException ie) {
                  ie.printStackTrace();
              }
            }
        }
    }
}

class MyRunnable4Odd implements Runnable{
    private Object obj;
    public MyRunnable4Odd(Object sharedObj){
        this.obj = sharedObj;
    }
    @Override
    public void run() {
        for(int i=1; i<=15; i+=2) {
            synchronized(obj){
              System.out.println(i);
              try{
                  obj.notify();
                  if(i == 15)
                    break;
                  obj.wait();
              } catch(InterruptedException ie) {
                  ie.printStackTrace();
              }
            }
        }
    }
} 
```

输出：

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15 
```

解释：它不断地向两个线程打印奇数和偶数。

*   在`i=14`MyRunnable4Even 中，打印 '14' 然后该线程通知其他等待线程并进入等待状态。
*   在 MyRunnable4Odd 中，现在`i=15`被打印，通知偶数线程并关闭奇数线程（打破循环。它不会进入等待状态）。
*   现在在 MyRunnable4Even 中，它会醒来并检查`i<15`，但`i=16`现在。所以，这个线程也完成了。

# image - 使用opencv确定一个点是在形状内部还是外部

> ID：13786088
> 
> 赞同：24
> 
> 时间：2012-12-09T09:08:35.127
> 
> 标签：image, opencv, image-processing, computer-vision, detection

我有白色背景和简单形状的图像（每个图像都有一个形状）。我想确定某个点 (x,y) 是否在形状内。我怎么能用opencv做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-09T09:17:28.613

使用[`pointPolygonTest`](https://docs.opencv.org/master/d3/dc0/group__imgproc__shape.html#ga1a539e8db2135af2566103705d7a5722)功能。[这是](https://docs.opencv.org/master/dc/d48/tutorial_point_polygon_test.html)教程。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-10-04T01:42:57.793

To determine if a point is inside, outside, or on the edge of a shape you can check if the point is within a contour using [`cv2.pointPolygonTest()`](https://docs.opencv.org/master/d3/dc0/group__imgproc__shape.html#ga1a539e8db2135af2566103705d7a5722). The function returns `+1`, `-1`, or `0` to indicate if a point is inside, outside, or on the contour, respectively. Assuming we already have the contour of the shape, we can simply pass the contour and the `(x,y)` point to the function.

```
result = cv2.pointPolygonTest(contour, (x,y), False) 
```

In the function, the third argument is `measureDist`. If it is `True`, it finds the shortest distance between a point in the image and a contour. If `False`, it finds whether the point is inside, outside, or on the contour. Since we don't want to find the distance, we set the `measureDist` argument to `False`

Here's an example that finds the square contour then checks if the points are within the contour

* * *

Test image

![](../Images/c9273b938fc1749626a265402b2942be.png)

Image after finding contour and checking points

![](../Images/bac920403c284cb359173c053f4e809b.png)

Results

> point1: -1.0

> point2: 1.0

> point3: 0.0

Therefore point1 is outside, point2 is inside, and point3 is on the contour

```
import cv2

image = cv2.imread('1.png')
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
canny = cv2.Canny(gray, 120, 255, 1)
cnts = cv2.findContours(canny, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
cnts = cnts[0] if len(cnts) == 2 else cnts[1]

point1 = (25, 50)
point2 = (200, 250)
point3 = (200, 350)

# Perform check if point is inside contour/shape
for c in cnts:
    cv2.drawContours(image, [c], -1, (36, 255, 12), 2)
    result1 = cv2.pointPolygonTest(c, point1, False)
    result2 = cv2.pointPolygonTest(c, point2, False)
    result3 = cv2.pointPolygonTest(c, point3, False)

# Draw points
cv2.circle(image, point1, 8, (100, 100, 255), -1)
cv2.putText(image, 'point1', (point1[0] -10, point1[1] -20), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0, 0, 0), lineType=cv2.LINE_AA)
cv2.circle(image, point2, 8, (200, 100, 55), -1)
cv2.putText(image, 'point2', (point2[0] -10, point2[1] -20), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0, 0, 0), lineType=cv2.LINE_AA)
cv2.circle(image, point3, 8, (150, 50, 155), -1)
cv2.putText(image, 'point3', (point3[0] -10, point3[1] -20), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0, 0, 0), lineType=cv2.LINE_AA)

print('point1:', result1)
print('point2:', result2)
print('point3:', result3)
cv2.imshow('image', image)
cv2.waitKey() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-18T15:58:08.237

如果你想访问凸包内的所有点，你可以做掩蔽

我首先用 cv2.fillPoly() 在黑框上绘制我的凸包白色来解决这个问题

1.  首先创建遵循框架形状的黑色框架
    `black_frame = np.zeros_like(your_frame).astype(np.uint8)`
2.  用白色绘制凸包
    `cv2.fillPoly(black_frame , [hull], (255, 255, 255))`
3.  通过使用 numpy 布尔索引创建一个掩码，它将产生一个内部带有 True/False 值的掩码，它将是 True 是像素值是白色的
    `mask = black_frame == 255`
4.  您可以通过获取框架和蒙版之间的乘积来访问您的像素值，如果为 False，则值将
    `targetROI = your_frame * mask`
5.  使用蒙版访问您的像素。

```
black_frame = np.zeros_like(your_frame).astype(np.uint8)
cv2.fillPoly(black_frame , [hull], (255, 255, 255))
mask = black_frame == 255
targetROI = your_frame * mask 
```

# powershell - 无法使用 Powershell 从商店中删除证书

> ID：13786091
> 
> 赞同：2
> 
> 时间：2012-12-09T09:08:53.333
> 
> 标签：powershell, certificate, sap, access-denied

我正在尝试删除特定证书（SAP 证书）：

```
$store = New-Object System.Security.Cryptography.X509Certificates.X509Store “Root”,”LocalMachine”
$store.Open(“ReadWrite”)

foreach ($Curr in $store.Certificates)
{
    if ($Curr -like $serchPatern)
    {
        $store.Remove($curr)
    }
} 
```

它给了我一个拒绝访问错误

我用for循环（而不是foreach）尝试了同样的事情，它没有用......

当我尝试在没有脚本的情况下删除它们时没有问题

当我尝试使用脚本删除其他证书时，也没有问题......所以问题出在那些特定的证书上

有谁知道是什么问题？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:59:03.400

您的会话可能没有提升。右键单击 PowerShell 图标并选择“以管理员身份运行”。

# php - php 导出到 csv 用户/浏览器下载

> ID：13786093
> 
> 赞同：0
> 
> 时间：2012-12-09T09:09:05.970
> 
> 标签：php, csv, export

经过一番谷歌搜索和修改后，我设法将表格导出到 .csv 文件，但现在我想通过浏览器启动下载，而不是自动存储在文件夹中。

这是我的代码：

```
<?php
$server = 'localhost';
$user = 'root';
$pass = 'pass';
$db = 'test';

 $db = mysqli_connect($server, $user, $pass, $db);

mysqli_set_charset($db, "utf8");

$filename = 'uploads/'.strtotime('now').'.csv';

$fp = fopen($filename,"w");

$query = "SELECT id,product,status,created,summary FROM product_table";

$result =  mysqli_query($db,$query) or die( "My query ($query) generated an error: ".mysql_error());

$row = mysqli_fetch_assoc($result);

$seperator = "";
$comma = "";

foreach ($row as $name => $value){
    $seperator.= $comma. ''.str_replace('','""',$name);
    $comma=",";

}
$seperator .= "\n";

echo $seperator;

//putting the heading into the csv file
fputs($fp,$seperator);

mysqli_data_seek($result,0);

while ($row = mysqli_fetch_assoc($result)){

$seperator = "";
$comma = "";

foreach ($row as $name => $value){

    if (strcmp($name,'summary') == 0){

            $value = str_replace( array( "\r" , "\n", "\r\n", "\n\r" ) ,'' , $value);
            $value = str_replace('</b><br>','',$value);
            $value = str_replace('<b>','',$value);
            $value = str_replace('<br>','',$value);
            $value = str_replace('<br />','',$value);
    }

    $seperator.= $comma. ''.str_replace('','""',$value);
    $comma=",";

    }
$seperator .= "\n";

//putting the heading into the csv file
fputs($fp,$seperator);

}

fclose($fp);

?> 
```

运行上述脚本将 .csv 文件存储在文件夹 uploads 中。我需要进行哪些更改才能启用浏览器下载，以便用户可以运行脚本并通过浏览器下载 .csv 文件？谢谢！

**编辑：** 此外，如果要禁用保存到文件夹并仅启用用户/浏览器下载，我必须进行哪些修改？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:11:29.887

试试这个：

```
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=your_file.csv');
header('Pragma: no-cache');
readfile($filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T13:59:44.507

表标题肯定会出现两次，因为这一行在不同位置的代码中出现了两次：

```
//putting the heading into the csv file
fputs($fp,$seperator); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T02:27:06.150

i think following two lines enough to force browser to auto download csv file

header('Content-Type: text/csv'); header('Content-Disposition: attachment; filename="dishes.csv"');

where filename -- give name name csv file name

# android - 从资产文件夹设置文件会导致 MediaPlayer 出现空指针异常

> ID：13786099
> 
> 赞同：0
> 
> 时间：2012-12-09T09:09:37.260
> 
> 标签：android, android-mediaplayer

我有一个名为**filelist**的资产文件夹文件列表。我在 ListView 中显示所有元素，因此当单击其中一些元素时，我希望播放它。在这里它给了我**nullpointerexception**。导致错误的代码：

```
 try {                          
selectedItemPlayer.setDataSource(
    aMan.openFd(filelist[selectedItem]).getFileDescriptor(),
    aMan.openFd(filelist[selectedItem]).getStartOffset(),
    aMan.openFd(filelist[selectedItem]).getLength());
    selectedItemPlayer.prepare();
                        selectedItemPlayer.start();
                        selectedItemPlayer.setLooping(false);
} catch (IllegalArgumentException e) {
   ...
   ... 
```

**aMan**是*assetsManager*，**filelist**是资产目录文件的列表，**selectedItem**是已在列表中单击并且我要播放的元素。因此，当我单击列表项时，它会因 nullPointerException 而崩溃。似乎，声音没有加载到媒体播放器。奇怪，因为我使用**filelist**和 soundPool 并且它工作正常......知道吗？

UPD1：Logcat 消息

```
 12-09 14:17:06.964: W/dalvikvm(23404): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
    12-09 14:17:06.974: E/AndroidRuntime(23404): FATAL EXCEPTION: main
    12-09 14:17:06.974: E/AndroidRuntime(23404): java.lang.NullPointerException
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at uk.co.futurelite.elite.drum.machine.MainActivity$1.onClick(MainActivity.java:251)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:924)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.widget.AbsListView.performItemClick(AbsListView.java:1065)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2522)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.widget.AbsListView$1.run(AbsListView.java:3183)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.os.Handler.handleCallback(Handler.java:605)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.os.Handler.dispatchMessage(Handler.java:92)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.os.Looper.loop(Looper.java:137)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at android.app.ActivityThread.main(ActivityThread.java:4441)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at java.lang.reflect.Method.invokeNative(Native Method)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at java.lang.reflect.Method.invoke(Method.java:511)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    12-09 14:17:06.974: E/AndroidRuntime(23404):    at dalvik.system.NativeStart.main(Native Method) 
```

UPD2：在第 251 行，我有以下代码

```
 selectedItemPlayer.setDataSource(aMan.openFd(filelist[selectedItem]).getFileDescriptor(), 
```

**filelist[selectedItem]**不能为空，因为我只是在 logcat 中打印了它

```
 12-09 14:31:58.442: V/TESTing filelist(1819): dk9_ch.WAV 
```

不知道...

UPD3：现在它可以工作了，感谢 Luksprog ，我应该初始化它。不知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:23:00.113

打破您的代码如下，以帮助跟踪您的问题*

```
AssetFileDescriptor afd = getAssets().openFd(filelist[selectedItem]);
selectedItemPlayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength()); 
```

似乎`filelist[selectedItem]`返回 null 或它不存在于您的资产文件夹中。在第 251 行检查您的主要活动

# javascript - 防止每次加载页面时刷新 JavaScript

> ID：13786101
> 
> 赞同：2
> 
> 时间：2012-12-09T09:10:22.640
> 
> 标签：javascript

我有以下代码：

```
<script type="text/javascript">

var Value = new Date();
var min = Value.getHours();

setTimeout ("Timeout()", 1);

function Timeout ()
{
    for (var i = 0; i <= 15; i++) {
    var x = document.getElementsByClassName("d")[i];
    x.innerHTML = (min + ":" + "0" );
    };
    min--;
    setTimeout ("Timeout()", 1000);
}

</script>
<p class="d"></p> 
```

现在我的问题是每次刷新页面时变量都会重置。有没有办法在一定时间内设置一次变量，所以它不会被重置？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:21:00.063

猜猜最简单的方法是使用 cookie，您可以使用 jQuery cookie 插件轻松实现[这一点，例如这个](https://github.com/carhartl/jquery-cookie)，它使保存变得简单：

```
$.cookie("example", "foo"); 
```

和阅读：

```
$.cookie("example") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:18:27.513

有几种方法可以实现这一点。您可以使用 cookie 来保存变量 -[请参阅此处了解更多信息](http://www.quirksmode.org/js/cookies.html)，并在下一个请求时检查是否设置了 cookie。

除此之外，您还可以利用 URL 参数来保留状态

```
location.hash = your_var; 
```

并检查下一个请求是否`location.hash`已设置。还有其他几种可能性，我只向您展示了两种方法来做这样的事情。

# c++ - 我想接受用户输入并将其放入字符串数组 c++

> ID：13786107
> 
> 赞同：1
> 
> 时间：2012-12-09T09:11:06.767
> 
> 标签：c++

我想接受用户输入并将他们输入的内容放入字符串数组中。我希望它读取每个字符并用空格分隔每个单词。我确信这是编码错误的，尽管我确实尝试过做得很好。我收到分段错误错误，想知道如何在不出现错误的情况下执行此操作。这是我的代码。

```
#include <iostream>

using namespace std;

void stuff(char command[][5])
{ 
    int b, i = 0;
    char ch;
    cin.get(ch);

    while (ch != '\n')
    {
        command[i][b] = ch;
        i++;
        cin.get(ch);
        if(isspace(ch))
        {
            cin.get(ch);
            b++;

        }

    }
    for(int n = 0; n<i; n++)
    {
        for(int m = 0; m<b; m++)
            {
            cout << command[n][m];
            }
    }

}

int main()
{
    char cha[25][5];
    char ch;
    cin.get(ch);
    while (ch != 'q')
    {
        stuff(cha);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:14:53.287

`b`未初始化，因此在首次用作索引时将具有随机值。初始化`b`并确保数组索引不会超出数组的范围。

或者，使用[`std::vector<std::string>`](http://en.cppreference.com/w/cpp/container/vector)and`operator>>()`并忘记数组索引：

```
std::string word;
std::vector<std::string> words;
while (cin >> word && word != "q") words.push_back(word); 
```

# visual-studio - 我在哪里可以找到 Visual Studio 中 stdio.h 的实现？

> ID：13786112
> 
> 赞同：8
> 
> 时间：2012-12-09T09:11:51.667
> 
> 标签：visual-studio, header-files, stdio

我可以通过在 Windows 资源管理器中搜索轻松找到**stdio.h**头文件，但找不到像 stdio.lib(?) 这样的实现文件。我在哪里可以找到它？

此外，我无法通过在 Windows 资源管理器中的搜索找到 Windows.h，尽管我可以编译包含 Windows.h 的源代码。

有人解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T09:19:31.927

CRT（C 运行时）的源代码包含在 Visual Studio 安装目录中，位于**VC\crt\src**下。有很多文件；您需要找到定义您感兴趣的功能的那个。

Windows 标头（包括 Windows.h）包含在 Windows SDK 中，其中有一个包含标头的**Include**目录。这些文件在您的计算机上的确切位置完全取决于您安装 Windows SDK 的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T15:11:45.390

基于接受的答案。对于 VC++6，它通常位于：

`C:\Program Files (x86)\Microsoft Visual Studio\VC98\Lib\MSVCRT.LIB`

通过使用记事本打开该文件进行验证，然后搜索“_printf”。

# javascript - 我可以让触摸事件通过图层吗？

> ID：13786122
> 
> 赞同：1
> 
> 时间：2012-12-09T09:12:18.480
> 
> 标签：javascript, touch, dom-events

我正在制作一个目标是点击动物的 JavaScript 游戏。如果你做得对，我会在动物顶部显示一个带有星星的奖励层，但是当星星可见时，它们也会捕获触摸事件。有没有办法让触摸事件直接通过星星传递到下面的动物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:13:44.893

是的，设置`pointer-events: none;`在星星上，它们会像指针（和触摸）事件一样不可见。

# c# - 泛型类型参数与参数实例的类型不同

> ID：13786130
> 
> 赞同：2
> 
> 时间：2012-12-09T09:13:56.053
> 
> 标签：c#, generics, domain-driven-design

我有这样的方法：

```
public static void Raise<TEvent>(TEvent eventToRaise)
    where TEvent : IEvent
{
} 
```

我这样称呼该方法：

```
foreach (IEvent evt in entity.UncommittedEvents)
{
    DomainEvents.Raise(evt);
} 
```

我认为这是真的：

```
bool areSame = typeof(TEvent) == eventToRaise.GetType(); 
```

但似乎并非如此。相反，它是：

```
bool areSame = typeof(TEvent) == typeof(IEvent); 
```

为什么呢？

这里的问题是我在这里“丢失”了类型的具体事件。当我将该类型参数传递给下一个方法（没有事件实例）时，我只输入“IEvent”......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:17:22.103

实际上，这是有道理的。

当你说`DomainEvents.Raise(evt)`的时候，类型`evt`在编译时是已知的`IEvent`，所以编译器推断类型并将它写给你`DomainEvents.Raise<IEvent>(evt)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:17:09.000

使用运行时类型定义（`dynamic`type），否则泛型参数类型将是`IEvent`（从编译时的参数类型推断）：

```
foreach (IEvent evt in entity.UncommittedEvents)
{
    DomainEvents.Raise((dynamic)evt);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:25:26.097

仅供参考...lazyberezovsky的答案是有效的解决方案，但似乎存在调用代码必须知道使用动态转换的问题，所以我最终得到了这样的解决方案：

```
public static void Raise<TEvent>(TEvent eventToRaise)
    where TEvent : IEvent
{
    if (eventToRaise == null)
    {
        throw new ArgumentNullException("eventToRaise");
    }

    if (typeof(TEvent) == typeof(IEvent))
    {
        DomainEvents.Raise((dynamic)eventToRaise);
    }
    else
    {
        foreach (IDomainEventHandlerProvider provider in DomainEvents.eventHandlerProviders)
        {
            foreach (IEventHandler<TEvent> handler in provider.GetHandlers<TEvent>())
            {
                handler.Handle(eventToRaise);
            }
        }
    }
} 
```

# database-design - 数据库设计 - 审批工作流程和版本创建

> ID：13786132
> 
> 赞同：0
> 
> 时间：2012-12-09T09:14:04.747
> 
> 标签：database-design

我需要帮助设计数据库以在出版书籍的过程中管理书籍的版本。

三种权限/用户类型——**作者、审阅者、校对者**。 **书籍通过这些步骤从创建到批准状态，创建、审查、校对和准备发布。**

创建的每本书都必须经过以下状态： **草稿：** 每本新书都由作者创建，状态为草稿。用户完成更改后，可以将其转换为“需要审核”状态。

**需要审查：** 现在这本书将可供用户审查 - 需要审查。这本书可以“批准”，也可以发回给创作者“需要修改”

如果**'需要修改'** : 应该创建一个新版本并发送给作者进行修改，原书应该存档 一旦书已经更新并且用户发送它进行审查，状态应该设置为“书需要修改" 这本书应该再次经历整个审批周期

**如果获得批准：** - 状态应更改为“准备进行校对审核” - 图书将提供给有权进行校对审核的用户

**应向校对**者提供修改本书的权限。

**校对**者将在适用的情况下进行更改，并将本书发送给审阅者进行审查

如果**审稿人**批准该书，则应将其设为**“准备出版”**。

**审稿**人可以将其发回以对状态为“**需要****校对****更改**”的文案编辑器进行文案编辑更改

如果设置为**“需要校对更改”**，则应用程序应存档当前版本，创建**新版本**并将其设置为**当前**并应进入校对队列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:58:32.833

对于本书本身，您可能会考虑使用像 Subversion 或 Git 这样的源代码控制系统。这样，对本书的任何修改都将被保存。您将能够重新创建本书的任何版本。修改本身将作为历史记录提供。

其余信息是状态指示器。您将使用[状态转换表](http://en.wikipedia.org/wiki/State_transition_table)来表示状态。状态转换表是[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)的一部分。

根据您的描述，我认为这些是一本书可以具有的状态转换。

```
Draft -> Needs Review
Needs Modification -> Needs Review
Needs Review -> Needs Modification
Needs Review -> Approved

Approved -> Proofreading review
Proofreading review -> Reviewer review
Reviewer review -> Proofreading review
Reviewer review -> Publish book 
```

# iphone - NSCFString _forgetDependentConstraint 无法识别的选择器发送到实例

> ID：13786133
> 
> 赞同：0
> 
> 时间：2012-12-09T09:14:07.390
> 
> 标签：iphone, objective-c

在我的应用程序中，当我单击我时`RightBarButtonItem`，它会推送另一个视图控制器，但它显示以下错误。

```
-[__NSCFString _forgetDependentConstraint:]: unrecognized selector sent to instance 0x74c5960

*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString _forgetDependentConstraint:]: unrecognized selector sent to instance 0x74c5960' 
```

我不知道我做错了什么。

但是在那个视图控制器中，我只把这段代码放在`viewDidLoad`第二个视图控制器中

```
 [self.navigationController setNavigationBarHidden:TRUE animated:YES]; 

        first view controller contains the following code

        - (void)viewDidLoad
        {
            [super viewDidLoad];

            [self.navigationController setNavigationBarHidden:TRUE animated:YES];
        baseView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 416)];

            UINavigationBar *navBar1 = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
            UINavigationItem *navItem1 = [[UINavigationItem alloc] initWithTitle:@""];
            [navBar1 pushNavigationItem:navItem1 animated:NO];
            UIBarButtonItem *menuButton1 = [[UIBarButtonItem alloc] initWithTitle:@""
                                                                            style:UIBarButtonItemStyleBordered
                                                                           target:self
                                                                           action:@selector(toggleMenu1)];
            navItem1.leftBarButtonItem = menuButton1;
            [baseView.self addSubview:navBar1];
            UIImageView *backgroundImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"scr2.png"]];
            [baseView.self addSubview:backgroundImage];

            UIPanGestureRecognizer *pancontrol = [[UIPanGestureRecognizer alloc]
                                           initWithTarget:self action:@selector(panLayer:)];
            [self.view addGestureRecognizer:pancontrol];

            topView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 416)];

            UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
            UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:@""];
            [navBar pushNavigationItem:navItem animated:NO];
            UIBarButtonItem *menuButton = [[UIBarButtonItem alloc] initWithTitle:@"Menu"
                                                 `enter code here`                         style:UIBarButtonItemStyleBordered                                                                  target:self
                                                                          action:@selector(toggleMenu)];
            navItem.leftBarButtonItem = menuButton;
            UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Add"
                                                                          style:UIBarButtonItemStyleBordered
                                                                         target:self
                                                                         action:@selector(toggleAdd)];
            navItem.rightBarButtonItem = addButton;
            [topView.self addSubview:navBar];
            backgroundImage1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"notebookbg.png"]];
            [topView.self addSubview:backgroundImage1];
            [baseView.self addSubview:topView];
            [self.view addSubview:baseView];
                } 
```

这些是我的代码。

如何从第一个视图控制器移动到下一个视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:37:09.693

问题似乎与 AddNewNote 类有关。正如 Cocoanetics 建议的那样，在 NSString 上创建一个类别并`_forgetDependentConstraint`在该类别中实现 : 。在文件中添加`#import`新的类别标题`.PCH`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:03:45.967

在我看来，您没有正确地将实际的 NSString 分配给第一个或第二个视图控制器的标题或文本属性之一。

要找出问题发生的位置，请执行以下操作： - 在 NSString 上实现一个调试类别并添加一个 _forgetDependentConstraint: 方法，该方法只包含一个断点。- 当此方法的执行中断时，检查调用堆栈以查看它到底在哪里中断 - 还要检查方法内部的 self 并检查哪个字符串是罪魁祸首。

在我看来，好像您的视图层次结构中有一个 NSString 而不是 UIView。UIView 子类有这个 _forgetDependentConstraint: 方法，但字符串没有。

# ios - iPhone，在另一个之上编辑图像并保存

> ID：13786140
> 
> 赞同：-1
> 
> 时间：2012-12-09T09:14:47.963
> 
> 标签：ios, objective-c

有人可以概述如何在 iOS 的 Objective-C 中执行下面的第 2 步吗？

关键部分是“使用编辑工具将图像加载到背景图像前面的“创建”场景中”。

1.  从相机或库中选择背景图像并放置在“创建”场景中。
2.  从“创建”场景从模态列表中选择一个图像，图像加载到“创建”场景，在背景图像前面，带有“翻转”、“复制”、“后面”、“完成”的编辑工具。图像将触摸/捏以移动、调整大小和旋转。触摸“完成”时隐藏编辑工具。触摸图像以切换编辑工具。
3.  将创建的图像保存到库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:58:13.277

我会将背景图像加载到图像视图中，然后在其前面添加其他可编辑的子视图。完成后，您将整个视图层次结构的LayerInContext 渲染到新图像中并保存。

# truezip - TrueVFS net.java.truevfs.access.TFile.TFile.rm() 无法删除文件

> ID：13786144
> 
> 赞同：1
> 
> 时间：2012-12-09T09:15:03.547
> 
> 标签：truezip, truevfs

TrueVFS 在卸载后无法删除文件并抛出以下异常。

> ```
>  java.nio.file.DirectoryNotEmptyException: tar:file:/D:/tmp/0554de32-5a95-4b58-a05d-d12effa68abc.tar!/
>     at net.java.truevfs.kernel.impl.ArchiveFileSystem.unlink(ArchiveFileSystem.scala:326)
>     at net.java.truevfs.kernel.impl.BasicArchiveController.unlink(BasicArchiveController.scala:222)
>     at net.java.truevfs.kernel.impl.DefaultManager$BackController.net$java$truevfs$kernel$impl$CacheController$$super$unlink(DefaultManager.scala:39)
>     at net.java.truevfs.kernel.impl.CacheController$class.unlink(CacheController.scala:105)
>     at net.java.truevfs.kernel.impl.DefaultManager$BackController.net$java$truevfs$kernel$impl$SyncController$$super$unlink(DefaultManager.scala:39)
>     at net.java.truevfs.kernel.impl.SyncController$$anonfun$unlink$1.apply$mcV$sp(SyncController.scala:100)
>     at net.java.truevfs.kernel.impl.SyncController$$anonfun$unlink$1.apply(SyncController.scala:98)
>     at net.java.truevfs.kernel.impl.SyncController$$anonfun$unlink$1.apply(SyncController.scala:98)
>     at net.java.truevfs.kernel.impl.SyncController$class.net$java$truevfs$kernel$impl$SyncController$$apply(SyncController.scala:119)
>     at net.java.truevfs.kernel.impl.SyncController$class.unlink(SyncController.scala:98)
>     at net.java.truevfs.kernel.impl.DefaultManager$BackController.net$java$truevfs$kernel$impl$LockController$$super$unlink(DefaultManager.scala:39)
>     at net.java.truevfs.kernel.impl.LockController$$anonfun$unlink$1.apply$mcV$sp(LockController.scala:92)
>     at net.java.truevfs.kernel.impl.LockController$$anonfun$unlink$1.apply(LockController.scala:92)
>     at net.java.truevfs.kernel.impl.LockController$$anonfun$unlink$1.apply(LockController.scala:92)
>     at net.java.truevfs.kernel.impl.LockingStrategy.apply(LockingStrategy.scala:84)
>     at net.java.truevfs.kernel.impl.LockController$class.unlink(LockController.scala:92)
>     at net.java.truevfs.kernel.impl.DefaultManager$BackController.unlink(DefaultManager.scala:39)
>     at net.java.truevfs.kernel.impl.ArchiveControllerAdapter.unlink(ArchiveControllerAdapter.scala:35)
>     at net.java.truevfs.kernel.spec.FsDecoratingController.unlink(FsDecoratingController.java:111)
>     at net.java.truevfs.kernel.impl.FalsePositiveArchiveController$$anonfun$1.apply(FalsePositiveArchiveController.scala:132)
>     at net.java.truevfs.kernel.impl.FalsePositiveArchiveController$$anonfun$1.apply(FalsePositiveArchiveController.scala:131)
>     at net.java.truevfs.kernel.impl.FalsePositiveArchiveController$TryChild$.apply(FalsePositiveArchiveController.scala:195)
>     at net.java.truevfs.kernel.impl.FalsePositiveArchiveController.unlink(FalsePositiveArchiveController.scala:143)
>     at net.java.truevfs.access.TFile.rm(TFile.java:2216)
>     at net.java.truevfs.access.TFile.rm(TFile.java:2195 
> ```

tar 文件已成功创建，因此没有问题。

这就是我正在做的事情。

1.  配置真正的 VFS

    TConfig 配置 = TConfig.current(); config.setArchiveDetector(new TArchiveDetector("tar", new TarDriver()));

2.  创建焦油

3.  卸载焦油

    TVFS.umount(tarFile);

    转换成字节并发送。

4.  删除文件

    tarFile.rm()

我还尝试了 tarFile.rm_r() 和普通的 java.io.File.delete()。但他们都没有工作。

有人可以告诉我出了什么问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:14:21.053

TrueVFS 将 TAR 文件抽象到一个虚拟目录中，因此只有在它为空时才能将其删除。要递归删除（虚拟）目录及其所有成员，只需调用`TFile.rm_r()`. 你说你试过了，但也许你以前的尝试有副作用，所以我建议重复一遍，看看它能让你走多远。

# jquery - 更改全日历中日期的背景颜色

> ID：13786145
> 
> 赞同：0
> 
> 时间：2012-12-09T09:15:04.713
> 
> 标签：jquery, ruby-on-rails-3, fullcalendar

我有`implemented a jquery fullcalendar`一个 ROR 应用程序。在 fullcalendar 的月视图中，`I need to change the background color of the dates from start date to end date.`我得到了开始日期和结束日期。但我不能`change the background color of these dates`。我已经尝试过如下方式，但日历的所有月份（从开始日期到结束日期）都在变化。有没有其他方法可以实现这一目标？请帮忙。我是 Javascript 的新手。

```
$(document).ready(function () {

var calInstance = $('#calendar')
$('.task_name').live('click', function () {
    alert(this.id);
    $.ajax({
        url: 'pending_task_details',
        dataType: 'json',
        cache: false,
        data: {
            task_id: this.id
        },
        success: function (data, response, event, date) {
            var start_date = new Date(data.start_date);
            var end_date = new Date(data.end_date);
            alert("The start date is....." + start_date);
            alert("The end date is..........." + end_date);
            for (i = start_date; i <= end_date; i = new Date(i.getTime() + 86400000)) {
                getCellFromDate(i, calInstance);
            }
        }
    });
});

function getCellFromDate(thisDate, calInstance) {
    var d = thisDate.getDate();
    var m = thisDate.getMonth();
    var y = thisDate.getFullYear();
    $('#calendar').fullCalendar('gotoDate', y, m, d);
    var coords = calInstance.fullCalendar('getView').dateCell(new Date(thisDate)),
        $row = calInstance.find('.fc-view-month tbody tr').eq(coords.row),
        $cell = $row.find('td').eq(coords.col);
    $($cell).find('.fc-day-number').parent().css('background-color', '#6E5849');
    $($cell).find('.fc-day-number').css({
        'background-color': '#6E5849',
        'border': '1px solid #6E5849'
    })
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:10:55.567

首先，您需要一个函数获取月份元素的句柄

像这样的东西：

```
 // based on the given event date return the full calendar day jquery object (<td ...>)
     // matching day and month
     //
     // assumptions:
     //  - the event date is if for the same year as the current viewable month
     //  - the fc-day* TD's are in chronological order
     //  - the fc-day* TD's not for the current month have a class of fc-other-month
     //
    findFullCalendarDayForClickedEvent : function( eventDate ) {

        var foundDay;

        var $theCalendar = $( '#myCalendar' );

        var currentDate = $theCalendar.fullCalendar( 'getDate' );
        var fullCalendarDayContainers = $theCalendar.find( 'td[class*="fc-day"]' );

        for( var i = 0; i < fullCalendarDayContainers.length; i++ ) {

            var $currentContainer = $( fullCalendarDayContainers[ i ] );

            var dayNumber = $currentContainer.find( '.fc-day-number' ).html();

            // first find the matching day
            if ( eventDate.getDate() == dayNumber ) {

                // now month check, if our current container has fc-other-month
                // then the event month and the current month needs to mismatch,
                // otherwise container is missing fc-other-month then the event
                // month and current month need to match
                if( $currentContainer.hasClass( 'fc-other-month' ) ) {

                    if( eventDate.getMonth() != currentDate.getMonth() ) {
                        foundDay = $currentContainer;
                        break;
                    }
                }
                else {
                    if ( eventDate.getMonth() == currentDate.getMonth() ) {
                        foundDay = $currentContainer;
                        break;
                    }
                }
            }
        }

        return foundDay;
    } 
```

有关更多信息，请参阅：[https ://stackoverflow.com/posts/13647014/edit](https://stackoverflow.com/posts/13647014/edit)

下一个循环遍历您的时间范围，将每个日期传递给 finder 函数。

然后

```
foundDay.addClass( 'selected-day' ); 
```

# ios - 苹果如何知道您从网站安装了 Apple Store 应用程序？

> ID：13786146
> 
> 赞同：2
> 
> 时间：2012-12-09T09:15:26.903
> 
> 标签：ios, objective-c, iphone, ipad

当您访问时`apple.com`，他们会提示您已安装“Apple Store 应用程序”并建议您打开，怎么可能只是从浏览器？

**更新：**

因此，假设我的应用程序具有捆绑 ID`com.example.myapp`并注册了 url 方案`myapp://`。我可以在我的网站中使用什么**JavaScript来检查应用程序是否已安装？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T09:26:04.167

Apple 开发了一个元标记，您可以将其包含在您的网站中，该标记可以检查应用程序是否通过其应用程序 ID 安装以及是否已安装打开它。重要的是要记住，在他们的平台上，Apple 可以做任何他们想做的事情，这是一个很好的例子。Mobile Safari 已被编程为利用此标签的存在来显示下载/打开横幅。

下面是元标记，您所要做的就是传递应用程序 ID，但**如果**您有一个 URL 方案，您也可以在此处使用它来将任意参数传递给您的应用程序。

```
<meta name="apple-itunes-app" content="app-id=MYAPPID, affiliate-data=myAffiliateData, app-argument=myURLScheme://"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:17:45.673

他们使用自定义 url 方案，例如`macappstore://linktoapporwhatever`. `macappstore`is 注册为 os 级别的协议，方式相同，is`http`和关联`App Store.app`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T09:56:40.800

不幸的是，这不是公共功能。您的应用注册的 URL 方案未显示在 JavaScript 的方案列表中。

您应该在 Apple 的 Bug Reporter 上提交增强请求。

# sql - MIN 函数在 SQL 复杂查询中无法正常工作

> ID：13786148
> 
> 赞同：2
> 
> 时间：2012-12-09T09:15:59.307
> 
> 标签：sql, sql-server

任务是选择每年利润最低的子类别。下一个查询，每年选择几个子类别：

```
select 
  min (Profit), 
  CalendarYear, 
  EnglishProductSubcategoryName
from (
  select 
    SUM(fis.SalesAmount-fis.TotalProductCost) Profit, 
    t.CalendarYear, 
    sc.EnglishProductSubCategoryName
    from FactInternetSales fis 
    inner join DimProduct p 
            on fis.ProductKey = p.ProductKey
    inner join DimProductSubcategory sc 
            on p.ProductSubcategoryKey = sc.ProductSubcategoryKey
    inner join DimTime t 
            on fis.DueDateKey = t.TimeKey
    group by CalendarYear, EnglishProductSubcategoryName) aa 
    --Order by CalendarYear
) aa
group by CalendarYear, EnglishProductSubcategoryName
order by CalendarYear 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:27:14.290

如果要查找给定年份利润最低的类别，则需要重写查询：

```
select 
    Profit,
    CalendarYear, 
    EnglishProductSubcategoryName
from 
    (..... ) aa
where
    CalendarYear = 2011
    AND Profit = (SELECT MIN(Profit) FROM aa WHERE aa.CalendarYear = 2011) 
```

这将找到子查询报告的具有最低利润（2011 年）的行（可能是多个行）。

**更新：**由于您需要每年的最低利润，我可能会将此查询完全重写为：

```
;WITH YearlyProfitsByCategory AS
(
   SELECT
      SUM(fis.SalesAmount - fis.TotalProductCost) Profit, 
      t.CalendarYear, 
      sc.EnglishProductSubCategoryName
   FROM
      dbo.FactInternetSales fis 
   INNER JOIN
      dbo.DimProduct p ON fis.ProductKey = p.ProductKey
   INNER JOIN
      dbo.DimProductSubcategory sc ON p.ProductSubcategoryKey = sc.ProductSubcategoryKey
   INNER JOIN
      dbo.DimTime t ON fis.DueDateKey = t.TimeKey
   GROUP BY
      t.CalendarYear, 
      sc.EnglishProductSubCategoryName
),
YearlyMinProfits AS 
(
    SELECT
       CalendarYear, 
       EnglishProductSubCategoryName,
       Profit,
       RowNum = ROW_NUMBER() OVER (PARTITION BY CalendarYear ORDER BY Profit)
    FROM YearlyProfitsByCategory 
)
SELECT 
   CalendarYear, EnglishProductSubCategoryName, Profit
FROM YearlyMinProfits
WHERE RowNum = 1  -- the row with the smallest profit, for every year 
```

这使用了 CTE（公用表表达式）和`ROW_NUMBER()`排名函数 - 在 SQL Server **2005**和更高版本中都可用（您没有在问题中提及您的版本）

# python - 从 QRunnable 发射信号

> ID：13786149
> 
> 赞同：2
> 
> 时间：2012-12-09T09:16:00.087
> 
> 标签：python, multithreading, qt, pyqt, pyqt4

我正在尝试从 a`QRunnable`向我的 main发送信号`QObject`，但由于某种原因它没有收到它们。

这是正确的方法吗？

这是一个小测试用例：

```
import sys

from PyQt4.QtGui import QApplication
from PyQt4.QtCore import QThreadPool, QObject, QRunnable, pyqtSignal

class WorkerSignals(QObject):
    result = pyqtSignal(int)

class Worker(QRunnable):
    def __init__(self, task):
        super(Worker, self).__init__()

        self.task = task
        self.signals = WorkerSignals()

    def run(self):
        print 'Sending', self.task
        self.signals.result.emit(self.task)

class Tasks(QObject):
    def __init__(self):
        super(Tasks, self).__init__()

        self.pool = QThreadPool()
        self.pool.setMaxThreadCount(1)

    def process_result(self, task):
        print 'Receiving', task    # This does not run

    def start(self):
        for task in range(10):
            worker = Worker(task)
            worker.signals.result.connect(self.process_result)

            self.pool.start(worker)

        self.pool.waitForDone()

if __name__ == '__main__':
    app = QApplication(sys.argv)

    stuff = Tasks()
    stuff.start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:53:33.970

你需要打电话`app.exec_()`

> 当我们调用应用程序的 exec_() 方法时，应用程序进入主循环。**主循环获取事件并将它们发送给对象。**信号和槽用于对象之间的通信。当特定事件发生时会发出信号。插槽可以是任何 Python 可调用的。当一个连接到它的信号被发射时，一个槽被调用。

PyQt4 中的结帐[事件和信号](http://zetcode.com/tutorials/pyqt4/eventsandsignals/)

# ruby-on-rails-3 - 事件未出现在 FullCalendar 中

> ID：13786157
> 
> 赞同：1
> 
> 时间：2012-12-09T09:17:13.013
> 
> 标签：ruby-on-rails-3, mongoid, fullcalendar

我将 FullCalendar 与 rails3.2.5 一起使用。我将 mongodb 数据库与 mongoid gem 一起使用。当我创建事件时，这些事件不会出现在日历中。我的模型（event.rb）如下

```
class Event
  include Mongoid::Document
  field :title, type: String
  field :starts_at
  field :ends_at
  field :all_day, type: Boolean
  field :description, type: String
  scope :before, lambda {|end_time| {:conditions => ["ends_at < ?", Event.format_date(end_time)] }}
  scope :after, lambda {|start_time| {:conditions => ["starts_at > ?", Event.format_date(start_time)] }}

  # need to override the json view to return what full_calendar is expecting.
  # http://arshaw.com/fullcalendar/docs/event_data/Event_Object/
  def as_json(options = {})
    {
      :id => self.id,
      :title => self.title,
      :description => self.description || "",
      :start => starts_at,
      :end => ends_at,
      :allDay => self.all_day,
      :recurring => true,
      :url => Rails.application.routes.url_helpers.event_path(id)
    }

  end

  def self.format_date(date_time)
    Time.at(date_time.to_i).to_formatted_s(:db)
  end
end 
```

我怎么解决这个问题。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T02:08:01.903

我也使用 mongoid 和 fullcalendar。无法真正测试您的代码，但我在模型方面没有做任何特别的事情。这就是我让它工作的方式..

**显示.html.haml**

```
 .row
      .span12
        = render 'shared/flash_app_success'
    %center
      %h1
        All Events  
    %br/
    :javascript
      $(document).ready(function(){
        $('#calendar').fullCalendar({
          editable: true,
          droppable: false,
          disableDragging: true,
          disableResizing: true,
          header: {
              left: 'prev,next today',
              center: 'title',
              right: 'month,agendaWeek,agendaDay'
          },
          defaultView: 'month',
          height: 500,
          slotMinutes: 15,
          loading: function(bool){
              if (bool) 
                  $('#loading').show();
              else 
                  $('#loading').hide();
          },
          events: {
            url: '/events/get_events',
            cache: true,
            type: 'POST',
            data:{appdata: $('#appdata').val()}
          },
          timeFormat: 'H:mm { - H:mm } ',                
          eventClick: function(event, jsEvent, view){
            $.get("/events/show_event/", {
              "eventid": event.id 
            }, null, "script");
            $("#appevents").modal("show");  
          }, 
        });
      }); 
```

**事件控制器**

```
 def get_events  
    @apps = current_user.apps.find(params[:appdata]).to_a
    apps = []  
    events = [] 
    color = "#336699"
    @apps.each do |app|
      app.events.each do |event|
        if event.status == 4
          color = "#FFA300"
        elsif event.status == 5
          color = "#FF0000"
        else
          color = "#3a87ad"
        end
          events << {:id => event.id, 
                   :title => User.find(app.user_id).name + ": " + event.title, 
                   :start => "#{event.start_time.iso8601}", 
                   :end => "#{event.end_time.iso8601}",
                   :allDay=>false,
                   :backgroundColor => color}
      end
    end
    render :text => events.to_json
  end 
```

# javascript - 在 Node.js 中递归复制文件夹

> ID：13786160
> 
> 赞同：212
> 
> 时间：2012-12-09T09:17:29.707
> 
> 标签：javascript, node.js, fs

有没有一种更简单的方法来复制文件夹及其所有内容，而无需手动执行一系列`fs.readir`, `fs.readfile`,`fs.writefile`递归？

我只是想知道我是否缺少一个理想情况下可以像这样工作的功能：

```
fs.copy("/path/to/source/folder", "/path/to/destination/folder"); 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2014-09-25T12:43:07.173

这是我在没有任何额外模块的情况下解决此问题的方法。只需使用内置`fs`和`path`模块。

**注意：**这确实使用了 fs 的读/写功能，因此它不会复制任何元数据（创建时间等）。从 Node.js 8.5 开始，有一个`copyFileSync`可用的函数调用操作系统复制函数，因此也复制元数据。我还没有测试它们，但它应该可以替换它们。（见[https://nodejs.org/api/fs.html#fs_fs_copyfilesync_src_dest_flags](https://nodejs.org/api/fs.html#fs_fs_copyfilesync_src_dest_flags)）

```
var fs = require('fs');
var path = require('path');

function copyFileSync( source, target ) {

    var targetFile = target;

    // If target is a directory, a new file with the same name will be created
    if ( fs.existsSync( target ) ) {
        if ( fs.lstatSync( target ).isDirectory() ) {
            targetFile = path.join( target, path.basename( source ) );
        }
    }

    fs.writeFileSync(targetFile, fs.readFileSync(source));
}

function copyFolderRecursiveSync( source, target ) {
    var files = [];

    // Check if folder needs to be created or integrated
    var targetFolder = path.join( target, path.basename( source ) );
    if ( !fs.existsSync( targetFolder ) ) {
        fs.mkdirSync( targetFolder );
    }

    // Copy
    if ( fs.lstatSync( source ).isDirectory() ) {
        files = fs.readdirSync( source );
        files.forEach( function ( file ) {
            var curSource = path.join( source, file );
            if ( fs.lstatSync( curSource ).isDirectory() ) {
                copyFolderRecursiveSync( curSource, targetFolder );
            } else {
                copyFileSync( curSource, targetFolder );
            }
        } );
    }
} 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2020-10-23T10:07:41.280

看起来[**ncp**](https://www.npmjs.com/package/ncp)和[**wrench**](https://www.npmjs.com/package/wrench)都不再维护了。可能最好的选择是使用[**fs-extra**](https://www.npmjs.com/package/fs-extra)

扳手的开发者指示用户使用`fs-extra`他已弃用他的库

**copySync**和**moveSync**都将复制和移动文件夹，即使它们有文件或子文件夹，您也可以使用它轻松移动或复制文件

```
const fse = require('fs-extra');

const srcDir = `path/to/file`;
const destDir = `path/to/destination/directory`;

// To copy a folder or file  
fse.copySync(srcDir, destDir, function (err) {
  if (err) {                 ^
    console.error(err);      |___{ overwrite: true } // add if you want to replace existing folder or file with same name
  } else {
    console.log("success!");
  }
}); 
```

***或者***

```
// To Move a folder or file  
fse.moveSync(srcDir, destDir, function (err) {
  if (err) {                 ^
    console.error(err);      |___{ overwrite: true } // add if you want to replace existing folder or file with same name
  } else {
    console.log("success!");
  }
}); 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2014-03-05T00:04:48.487

这是一个递归地将目录及其内容复制到另一个目录的函数：

```
const fs = require("fs")
const path = require("path")

/**
 * Look ma, it's cp -R.
 * @param {string} src  The path to the thing to copy.
 * @param {string} dest The path to the new copy.
 */
var copyRecursiveSync = function(src, dest) {
  var exists = fs.existsSync(src);
  var stats = exists && fs.statSync(src);
  var isDirectory = exists && stats.isDirectory();
  if (isDirectory) {
    fs.mkdirSync(dest);
    fs.readdirSync(src).forEach(function(childItemName) {
      copyRecursiveSync(path.join(src, childItemName),
                        path.join(dest, childItemName));
    });
  } else {
    fs.copyFileSync(src, dest);
  }
}; 
```

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2012-12-09T09:26:19.193

有一些模块支持复制文件夹及其内容。最受欢迎的是[wrench.js](https://github.com/ryanmcgrath/wrench-js)：

```
// Deep-copy an existing directory
wrench.copyDirSyncRecursive('directory_to_copy', 'location_where_copy_should_end_up'); 
```

另一种方法是[node-fs-extra](https://github.com/jprichardson/node-fs-extra)：

```
fs.copy('/tmp/mydir', '/tmp/mynewdir', function (err) {
  if (err) {
    console.error(err);
  } else {
    console.log("success!");
  }
}); // Copies directory, even if it has subdirectories or files 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2016-12-08T00:58:47.653

**对于 Linux/Unix 操作系统，您可以使用 shell 语法**

```
const shell = require('child_process').execSync;

const src = `/path/src`;
const dist = `/path/dist`;

shell(`mkdir -p ${dist}`);
shell(`cp -r ${src}/* ${dist}`); 
```

就是这样！

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2018-09-14T19:42:30.077

这就是我个人的做法：

```
function copyFolderSync(from, to) {
    fs.mkdirSync(to);
    fs.readdirSync(from).forEach(element => {
        if (fs.lstatSync(path.join(from, element)).isFile()) {
            fs.copyFileSync(path.join(from, element), path.join(to, element));
        } else {
            copyFolderSync(path.join(from, element), path.join(to, element));
        }
    });
} 
```

它适用于文件夹和文件。

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2017-10-11T10:06:50.703

fs-extra 模块就像一个魅力。

安装 fs-extra：

```
$ npm install fs-extra 
```

以下是将源目录复制到目标目录的程序。

```
// Include the fs-extra package
var fs = require("fs-extra");

var source = 'folderA'
var destination = 'folderB'

// Copy the source folder to the destination
fs.copy(source, destination, function (err) {
    if (err){
        console.log('An error occurred while copying the folder.')
        return console.error(err)
    }
    console.log('Copy completed!')
}); 
```

### 参考

fs-extra：[https ://www.npmjs.com/package/fs-extra](https://www.npmjs.com/package/fs-extra)

示例：[Node.js 教程](https://www.tutorialkart.com/nodejs/nodejs-tutorial/)- [Node.js 复制文件夹](https://www.tutorialkart.com/nodejs/node-js-copy-a-folder/)

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2018-09-28T20:52:36.623

这对于 Node.js 10 来说非常简单：

```
const FSP = require('fs').promises;

async function copyDir(src,dest) {
    const entries = await FSP.readdir(src, {withFileTypes: true});
    await FSP.mkdir(dest);
    for(let entry of entries) {
        const srcPath = Path.join(src, entry.name);
        const destPath = Path.join(dest, entry.name);
        if(entry.isDirectory()) {
            await copyDir(srcPath, destPath);
        } else {
            await FSP.copyFile(srcPath, destPath);
        }
    }
} 
```

这假设`dest`不存在。

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2019-09-30T13:03:12.090

我知道这里已经有很多答案，但没有人以简单的方式回答。

关于 fs-exra[官方文档](https://github.com/jprichardson/node-fs-extra/blob/master/docs/copy-sync.md)，你可以很容易地做到这一点。

```
const fs = require('fs-extra')

// Copy file
fs.copySync('/tmp/myfile', '/tmp/mynewfile')

// Copy directory, even if it has subdirectories or files
fs.copySync('/tmp/mydir', '/tmp/mynewdir') 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2016-02-03T16:15:12.403

我创建了一个小型工作示例，只需几个步骤即可将源文件夹复制到另一个目标文件夹（基于shift66 使用 ncp[的回答](https://stackoverflow.com/questions/13786160/copy-folder-recursively-in-node-js/13786224#13786224)）：

**第 1 步 - 安装 ncp 模块：**

```
npm install ncp --save 
```

**第 2 步 - 创建 copy.js（将*srcPath*和*destPath*变量修改为您需要的任何内容）：**

```
var path = require('path');
var ncp = require('ncp').ncp;

ncp.limit = 16;

var srcPath = path.dirname(require.main.filename); // Current folder
var destPath = '/path/to/destination/folder'; // Any destination folder

console.log('Copying files...');
ncp(srcPath, destPath, function (err) {
  if (err) {
    return console.error(err);
  }
  console.log('Copying files complete.');
}); 
```

**第 3 步 - 运行**

```
node copy.js 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2020-06-23T21:26:59.010

具有**符号链接**支持的那个：

```
const path = require("path");
const {
  existsSync,
  mkdirSync,
  readdirSync,
  lstatSync,
  copyFileSync,
  symlinkSync,
  readlinkSync,
} = require("fs");

export function copyFolderSync(src, dest) {
  if (!existsSync(dest)) {
    mkdirSync(dest);
  }

  readdirSync(src).forEach((entry) => {
    const srcPath = path.join(src, entry);
    const destPath = path.join(dest, entry);
    const stat = lstatSync(srcPath);

    if (stat.isFile()) {
      copyFileSync(srcPath, destPath);
    } else if (stat.isDirectory()) {
      copyFolderSync(srcPath, destPath);
    } else if (stat.isSymbolicLink()) {
      symlinkSync(readlinkSync(srcPath), destPath);
    }
  });
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2021-11-02T08:58:20.280

从 Node v16.7.0 开始可以使用[`fs.cp`](https://nodejs.org/api/fs.html#fspromisescpsrc-dest-options)或[`fs.cpSync`](https://nodejs.org/api/fs.html#fscpsyncsrc-dest-options)运行。

```
fs.cp(src, dest, {recursive: true}); 
```

当前稳定性（在 Node v17.0.1 中）是[Experimental](https://nodejs.org/api/documentation.html#stability-index)。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-01-23T23:27:51.473

因为我只是在构建一个简单的 Node.js 脚本，我不希望脚本的用户需要导入一堆外部模块和依赖项，所以我戴上我的思考帽并搜索了运行命令Bash 外壳。

此 Node.js 代码片段递归地将名为 node-webkit.app 的文件夹复制到名为 build 的文件夹中：

```
child = exec("cp -r node-webkit.app build", function(error, stdout, stderr) {
    sys.print("stdout: " + stdout);
    sys.print("stderr: " + stderr);
    if(error !== null) {
        console.log("exec error: " + error);
    } else {

    }
}); 
```

感谢[dzone](http://www.dzone.com/snippets/execute-unix-command-nodejs)的 Lance Pollard 让我开始。

上面的代码片段仅限于基于 Unix 的平台，如 macOS 和 Linux，但类似的技术可能适用于 Windows。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-04-16T19:40:01.460

[Mallikarjun M，谢谢](https://stackoverflow.com/questions/13786160/copy-folder-recursively-in-node-js/46685431#46685431)！

**fs-extra**做了这件事，如果你不提供回调，它甚至可以返回一个**Promise ！**:)

```
const path = require('path')
const fs = require('fs-extra')

let source = path.resolve( __dirname, 'folderA')
let destination = path.resolve( __dirname, 'folderB')

fs.copy(source, destination)
  .then(() => console.log('Copy completed!'))
  .catch( err => {
    console.log('An error occurred while copying the folder.')
    return console.error(err)
  }) 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-04-23T08:51:51.723

我为在目录之间递归地复制（copyFileSync）或移动（renameSync）文件编写了这个函数：

```
// Copy files
copyDirectoryRecursiveSync(sourceDir, targetDir);
// Move files
copyDirectoryRecursiveSync(sourceDir, targetDir, true);

function copyDirectoryRecursiveSync(source, target, move) {
    if (!fs.lstatSync(source).isDirectory())
        return;

    var operation = move ? fs.renameSync : fs.copyFileSync;
    fs.readdirSync(source).forEach(function (itemName) {
        var sourcePath = path.join(source, itemName);
        var targetPath = path.join(target, itemName);

        if (fs.lstatSync(sourcePath).isDirectory()) {
            fs.mkdirSync(targetPath);
            copyDirectoryRecursiveSync(sourcePath, targetPath);
        }
        else {
            operation(sourcePath, targetPath);
        }
    });
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-05-22T00:04:27.787

挑选包裹时要小心。某些包（如 copy-dir）不支持复制长度超过 0X1FFFFFE8 个字符（约 537 MB）的大文件。

它会抛出一些错误，例如：

> buffer.js:630 未捕获的错误：无法创建长度超过 0x1fffffe8 个字符的字符串

我在我的一个项目中经历过类似的事情。最终，我不得不更改我正在使用的包并调整大量代码。我会说这不是一次非常愉快的经历。

如果需要多个源和多个目标副本，您可以使用[better-copy](https://www.npmjs.com/package/better-copy)并编写如下内容：

```
// Copy from multiple source into a directory
bCopy(['/path/to/your/folder1', '/path/to/some/file.txt'], '/path/to/destination/folder'); 
```

甚至：

```
// Copy from multiple source into multiple destination
bCopy(['/path/to/your/folder1', '/path/to/some/file.txt'], ['/path/to/destination/folder', '/path/to/another/folder']); 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-01-10T15:37:42.980

我尝试了 fs-extra 和 copy-dir 以递归方式复制文件夹。但我希望它

1.  正常工作（copy-dir 抛出不合理的错误）
2.  在过滤器中提供两个参数：文件路径和文件类型（fs-extra 不告诉文件类型）
3.  进行目录到子目录检查和目录到文件检查

所以我自己写了：

```
// Node.js module for Node.js 8.6+
var path = require("path");
var fs = require("fs");

function copyDirSync(src, dest, options) {
  var srcPath = path.resolve(src);
  var destPath = path.resolve(dest);
  if(path.relative(srcPath, destPath).charAt(0) != ".")
    throw new Error("dest path must be out of src path");
  var settings = Object.assign(Object.create(copyDirSync.options), options);
  copyDirSync0(srcPath, destPath, settings);
  function copyDirSync0(srcPath, destPath, settings) {
    var files = fs.readdirSync(srcPath);
    if (!fs.existsSync(destPath)) {
      fs.mkdirSync(destPath);
    }else if(!fs.lstatSync(destPath).isDirectory()) {
      if(settings.overwrite)
        throw new Error(`Cannot overwrite non-directory '${destPath}' with directory '${srcPath}'.`);
      return;
    }
    files.forEach(function(filename) {
      var childSrcPath = path.join(srcPath, filename);
      var childDestPath = path.join(destPath, filename);
      var type = fs.lstatSync(childSrcPath).isDirectory() ? "directory" : "file";
      if(!settings.filter(childSrcPath, type))
        return;
      if (type == "directory") {
        copyDirSync0(childSrcPath, childDestPath, settings);
      } else {
        fs.copyFileSync(childSrcPath, childDestPath, settings.overwrite ? 0 : fs.constants.COPYFILE_EXCL);
        if(!settings.preserveFileDate)
          fs.futimesSync(childDestPath, Date.now(), Date.now());
      }
    });
  }
}
copyDirSync.options = {
  overwrite: true,
  preserveFileDate: true,
  filter: function(filepath, type) {
    return true;
  }
}; 
```

还有一个类似的函数*mkdirs*，它是 mkdirp 的替代品：

```
function mkdirsSync(dest) {
  var destPath = path.resolve(dest);
  mkdirsSync0(destPath);
  function mkdirsSync0(destPath) {
    var parentPath = path.dirname(destPath);
    if(parentPath == destPath)
      throw new Error(`cannot mkdir ${destPath}, invalid root`);
    if (!fs.existsSync(destPath)) {
      mkdirsSync0(parentPath);
      fs.mkdirSync(destPath);
    }else if(!fs.lstatSync(destPath).isDirectory()) {
      throw new Error(`cannot mkdir ${destPath}, a file already exists there`);
    }
  }
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-03-03T08:31:01.147

如果您在 Linux 上，并且性能不是问题，您可以使用模块中的`exec`函数`child_process`来执行 Bash 命令：

```
const { exec } = require('child_process');
exec('cp -r source dest', (error, stdout, stderr) => {...}); 
```

在某些情况下，我发现这个解决方案比下载整个模块甚至使用`fs`模块更干净。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2021-01-06T13:47:03.643

使用[shelljs](https://www.npmjs.com/package/shelljs)

`npm i -D shelljs`

```
const bash = require('shelljs');
bash.cp("-rf", "/path/to/source/folder", "/path/to/destination/folder"); 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-11-19T15:06:56.790

这段代码可以正常工作，递归地将任何文件夹复制到任何位置。但它只是 Windows。

```
var child = require("child_process");
function copySync(from, to){
    from = from.replace(/\//gim, "\\");
    to = to.replace(/\//gim, "\\");
    child.exec("xcopy /y /q \"" + from + "\\*\" \"" + to + "\\\"");
} 
```

它非常适合用于创建新玩家的基于文本的游戏。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-12-02T10:42:54.350

如果要递归复制源目录的所有内容，则需要传递`recursive`选项 as`true`并由`try` `catch`fs-extra 记录`sync`

因为`fs-extra`是完全替换`fs`所以你不需要导入基本模块

```
const fs = require('fs-extra');
let sourceDir = '/tmp/src_dir';
let destDir = '/tmp/dest_dir';
try {
  fs.copySync(sourceDir, destDir, { recursive: true })
  console.log('success!')
} catch (err) {
  console.error(err)
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-08T16:35:35.243

我是这样做的：

```
let fs = require('fs');
let path = require('path'); 
```

然后：

```
let filePath = // Your file path

let fileList = []
    var walkSync = function(filePath, filelist)
    {
        let files = fs.readdirSync(filePath);
        filelist = filelist || [];
        files.forEach(function(file)
        {
            if (fs.statSync(path.join(filePath, file)).isDirectory())
            {
                filelist = walkSync(path.join(filePath, file), filelist);
            }
            else
            {
                filelist.push(path.join(filePath, file));
            }
        });

        // Ignore hidden files
        filelist = filelist.filter(item => !(/(^|\/)\.[^\/\.]/g).test(item));

        return filelist;
    }; 
```

然后调用方法：

```
This.walkSync(filePath, fileList) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-03-03T03:44:55.107

当前的最佳答案可以大大简化。

```
const path = require('path');
const fs = require('fs');

function recursiveCopySync(source, target) {
  if (fs.lstatSync(source).isDirectory()) {
    if (!fs.existsSync(target)) {
      fs.mkdirSync(target);
    }
    let files = fs.readdirSync(source);
    files.forEach((file) => {
      recursiveCopySync(path.join(source, file), path.join(target, file));
    });
  } else {
    if (fs.existsSync(source)) {
      fs.writeFileSync(target, fs.readFileSync(source));
    }
  }
} 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2017-10-18T03:37:55.900

## 是的，`ncp`虽然`cool`...

您可能想要/应该承诺它的功能来制作它`super cool`。当您使用它时，将其添加到`tools`文件中以重复使用它。

下面是一个工作版本，它是`Async`并使用`Promises`.

* * *

### 文件*index.js*

```
const {copyFolder} = require('./tools/');

return copyFolder(
    yourSourcePath,
    yourDestinationPath
)
.then(() => {
    console.log('-> Backup completed.')
}) .catch((err) => {
    console.log("-> [ERR] Could not copy the folder: ", err);
}) 
```

### 文件*工具.js*

```
const ncp = require("ncp");

/**
 * Promise Version of ncp.ncp()
 *
 * This function promisifies ncp.ncp().
 * We take the asynchronous function ncp.ncp() with
 * callback semantics and derive from it a new function with
 * promise semantics.
 */
ncp.ncpAsync = function (sourcePath, destinationPath) {
  return new Promise(function (resolve, reject) {
      try {
          ncp.ncp(sourcePath, destinationPath, function(err){
              if (err) reject(err); else resolve();
          });
      } catch (err) {
          reject(err);
      }
  });
};

/**
 * Utility function to copy folders asynchronously using
 * the Promise returned by ncp.ncp().
 */
const copyFolder = (sourcePath, destinationPath) => {
    return ncp.ncpAsync(sourcePath, destinationPath, function (err) {
        if (err) {
            return console.error(err);
        }
    });
}
module.exports.copyFolder = copyFolder; 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2021-10-06T04:16:07.040

另一种使用 glob 通配符复制文件的方法。使用它，您可以有选择地复制，例如`/my/dir/**/*.js`

```
const glob = require('glob');
const path = require('path');
const fs = require('fs');

function copy(from, to) { //accepting glob pattern
  const wildcard = from.indexOf('*') !== -1;
  const pattern = !wildcard && fs.lstatSync(from).isDirectory() ? `${from}/**/*` : from;
  glob.sync(pattern).forEach(file => {
    const fromDirname = path.dirname(from.replace(/\/\*.*/, '/wildcard'));
    const target = file.replace(fromDirname, to);
    const [targetDir, recursive] = [path.dirname(target), true];
    !fs.existsSync(targetDir) && fs.mkdirSync(targetDir, {recursive});
    fs.lstatSync(file).isDirectory() ? 
      fs.mkdirSync(target, {recursive}) : fs.copyFileSync(file, target);
  })
} 
```

例子

```
copy('src/tools', 'dist')
copy('src/components/**/*', 'dist/elements')
copy('src/*.html', 'dist')
copy('src/*.css', 'dist')
copy('public/*', 'dist') 
```

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2018-08-25T09:55:07.530

解决这个问题的最简单方法是仅使用“fs”和“Path”模块以及一些逻辑......

如果您只想设置版本号，则使用*新名称*复制根文件夹中的所有文件，即*“var v = 'Your Directory Name'”*

在文件名前缀加上文件名的内容。

```
var fs = require('fs-extra');
var path = require('path');

var c = 0;
var i = 0;
var v = "1.0.2";
var copyCounter = 0;
var directoryCounter = 0;
var directoryMakerCounter = 0;
var recursionCounter = -1;
var Flag = false;
var directoryPath = [];
var directoryName = [];
var directoryFileName = [];
var fileName;
var directoryNameStorer;
var dc = 0;
var route;

if (!fs.existsSync(v)) {
    fs.mkdirSync(v);
}

var basePath = path.join(__dirname, v);

function walk(dir) {

    fs.readdir(dir, function(err, items) {

        items.forEach(function(file) {

            file = path.resolve(dir, file);

            fs.stat(file, function(err, stat) {

                if(stat && stat.isDirectory()) {
                    directoryNameStorer = path.basename(file);
                    route = file;
                    route = route.replace("gd", v);

                    directoryFileName[directoryCounter] = route;
                    directoryPath[directoryCounter] = file;
                    directoryName[directoryCounter] = directoryNameStorer;

                    directoryCounter++;
                    dc++;

                    if (!fs.existsSync(basePath + "/" + directoryName[directoryMakerCounter])) {
                        fs.mkdirSync(directoryFileName[directoryMakerCounter]);
                        directoryMakerCounter++;
                    }
                }
                else {
                    fileName = path.basename(file);
                    if(recursionCounter >= 0) {
                        fs.copyFileSync(file, directoryFileName[recursionCounter] + "/" + v + "_" + fileName, err => {
                            if(err) return console.error(err);
                        });
                        copyCounter++;
                    }
                    else {
                        fs.copyFileSync(file, v + "/" + v + "_" + fileName, err => {
                            if(err) return console.error(err);
                        });
                        copyCounter++;
                    }
                }
                if(copyCounter + dc == items.length && directoryCounter > 0 && recursionCounter < directoryMakerCounter-1) {
                    console.log("COPY COUNTER:             " + copyCounter);
                    console.log("DC COUNTER:               " + dc);
                    recursionCounter++;
                    dc = 0;
                    copyCounter = 0;
                    console.log("ITEM DOT LENGTH:          " + items.length);
                    console.log("RECURSION COUNTER:        " + recursionCounter);
                    console.log("DIRECOTRY MAKER COUNTER:  " + directoryMakerCounter);
                    console.log(": START RECURSION:        " + directoryPath[recursionCounter]);
                    walk(directoryPath[recursionCounter]); //recursive call to copy sub-folder
                }
            })
        })
    });
}

walk('./gd', function(err, data) { // Just pass the root directory which you want to copy
    if(err)
        throw err;
    console.log("done");
}) 
```

# java - 来自 SOAP 客户端对 JAVA 中给定 WSDL 的奇怪响应

> ID：13786163
> 
> 赞同：0
> 
> 时间：2012-12-09T09:17:48.693
> 
> 标签：java, soap, wsdl

好的，如标题所述，我必须在 JAVA 中为给定的 WSDL 创建一个 SOAP 客户端。现在我用 NetBeans 构建它，问题是当我运行它并输入我想要的 IP 时，我得到以下响应“net.webservicex.GeoIP@564809be”

我在他们的站点上测试了 WSDL，对于相同的 IP，我得到以下信息

```
<GeoIP xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.webservicex.net/">
<ReturnCode>1</ReturnCode>
<IP>178.128.33.188</IP>
<ReturnCodeDetails>Success</ReturnCodeDetails>
<CountryName>Greece</CountryName>
<CountryCode>GRC</CountryCode>
</GeoIP> 
```

有任何想法吗？？虽然我必须“解码”消息才能正常打印出来？提前致谢

这是客户端的代码

```
public static void main(String[] args) {
    try {
        System.out.println("Enter the IP Adress");
        InputStreamReader converter = new InputStreamReader(System.in);
        BufferedReader in = new BufferedReader(converter);
        String ipad = in.readLine();
        System.out.println(getGeoIP(ipad));

    } catch (IOException ex) {
        Logger.getLogger(Geoipad.class.getName()).log(Level.SEVERE, null, ex);
    }
}

private static GeoIP getGeoIP(java.lang.String ipAddress) {
    net.webservicex.GeoIPService service = new net.webservicex.GeoIPService();
    net.webservicex.GeoIPServiceSoap port = service.getGeoIPServiceSoap();
    return port.getGeoIP(ipAddress); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:37:30.747

`net.webservicex.GeoIP@564809be`
看来您正在打印对象的引用（`net.webservicex.GeoIP`尚未覆盖`toString`）。他们不是有一些`String getIP()`获得IP吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T15:45:29.637

以下作品

```
GeoIPService ipService = new GeoIPService();
GeoIPServiceSoap geoIPServiceSoap = ipService.getGeoIPServiceSoap();
GeoIP geoIp = geoIPServiceSoap.getGeoIP("10.34.55.1");
System.out.println(geoIp.getCountryName()); 
```

# html - 流畅的 HTML 框架

> ID：13786165
> 
> 赞同：0
> 
> 时间：2012-12-09T09:18:02.567
> 
> 标签：html, css, zooming, fluid-layout

如何使用包豪斯流体框架将“内容”放置在以下代码中，使其不与右侧的文本框重叠，因为在放大时，“内容”与侧边栏内容重叠！！

```
<div class="container_16">
<div class="grid_16">
    <div class="grid_10" style="float:left;">           
         <p>Content....</p>             
    </div>
            <div class="grid_6" style="float:right">
                 <p>Sidebar content</p>
            </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:24:23.217

float 移除一个元素对其他元素定位的影响。

相反，您可以使用 css：

```
position:absolute;
left:0; 
```

和，

```
position:absolute;
right:0; 
```

因此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:49:45.627

您还可以使用 min-width 属性为容器 div 设置最小宽度，如下所示

```
<div class="container_16" style="min-width:250px">
<div class="grid_16">
    <div class="grid_10">           
         <p>Content............</p>             
    </div>
            <div class="grid_6">
                 <p>Sidebar content</p>
            </div>
    </div>
</div> 
```

# c# - 旋转图像源？

> ID：13786166
> 
> 赞同：3
> 
> 时间：2012-12-09T09:18:03.553
> 
> 标签：c#, wpf, image, grid, image-rotation

我正在画`Grid`这样的 dc (DrawingContext)：

```
dc.DrawImage(_imageSource, new Rect(x, y, width, height); 
```

但是，如果我想在绘图上下文中旋转我正在绘制的图像怎么办？

我知道我可以将效果推送到绘图上下文，但是，它会影响所有绘图，而我只想旋转`_imageSource`.

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T09:21:28.707

您可以在绘制图像之前推送 RotateTransform，并在绘制后立即弹出变换。

```
var transform = new RotateTransform(...);
dc.PushTransform(transform);
dc.DrawImage(_imageSource, new Rect(x, y, width, height));
dc.Pop(); 
```

或者，您可以创建 ImageDrawing，将其添加到 DrawingGroup（具有`Transform`属性），然后绘制 DrawingGroup：

```
var drawingGroup = new DrawingGroup();
drawingGroup.Transform = new RotateTransform(...);
drawingGroup.Children.Add(new ImageDrawing(_imageSource, new Rect(x, y, width, height)));
dc.DrawDrawing(drawingGroup); 
```

所有的 DrawingContext.Draw... 方法实际上创建和绘制适当的绘图对象。

* * *

除了在重写的 OnRender() 方法中不断重绘所有内容之外，您还可以执行以下操作：

*   创建一个[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)作为绘图的容器。有关如何做到这一点，请参阅[使用 DrawingVisual 对象。](http://msdn.microsoft.com/en-us/library/ms742254.aspx)

*   如上所示，使用 ImageDrawing 创建一个 DrawingGroup，并将 DrawingGroup*一次绘制到*[DrawingVisual.RenderOpen](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.renderopen.aspx)提供的 DrawingContext 中。

*   使用 MatrixTransform 或 TransformGroup 进行完整的图像转换，即平移和旋转。将 DrawingGroup.Transform 属性设置为此变换（而不是仅如上所示的 RotateTransform）。

*   当图像的位置或旋转角度发生变化时，只需更改相关的变换即可。不需要重绘。

# javascript - EL 表达式中的 JavaScript 变量

> ID：13786167
> 
> 赞同：0
> 
> 时间：2012-12-09T09:18:20.060
> 
> 标签：javascript, el

在我的 servlet 中，我通过*for*循环将许多值发送回 JSP 页面，如下所示：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response){
    for (int i = 0; i < veryBigNumber; i++){  
        if (something){  
            request.setAttribute("value" + i, "true");  
        else{  
            request.setAttribute("value" + i, "false");  
    }  
} 
```

在 JSP 中，我想以与 JavaScript 和 EL 相同的方式阅读它们：

```
<script>  
    for (var i=0; i < veryBigNumber; i++){  
        if ("${value + (i)}" == "true"){  
            doSomething;  
        } else{  
            doSomethingElse;   
    }  
}  
</sctipt> 
```

问题是我不知道如何使变量*i*成为 EL 表达式的一部分。可能吗？如果是，如何？
谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:04:11.480

你在这里犯了一个概念上的错误。Java/JSP/EL 在网络服务器上运行并生成 HTML/CSS/JS，然后在网络浏览器中运行（在网络浏览器中右键单击页面并执行*查看源代码*以自己查看）。然而，您期望 EL 和 JS 在网络浏览器中同步运行。这不是真的。

您基本上需要使用 JSP 执行迭代和 EL 评估并相应地编写它，以便它打印您想要的正确 JS 代码。

```
<script>
    <c:forEach begin="0" end="${veryBigNumber - 1}" var="i">
        <c:set var="value" value="value${i}" />
        <c:choose>
            <c:when test="${requestScope[value]}">
                doSomething;
            </c:when>
            <c:otherwise>
                doSomethingElse;   
            </c:otherwise>
        </c:choose>
    </c:forEach>
</script> 
```

请注意，这个特殊的结构很笨拙并且有代码味道。具体的功能要求并不完全清楚，因此不可能为您想要实现的任何目标提出更优雅的解决方案。

# java - Java 应用程序问题

> ID：13786168
> 
> 赞同：-3
> 
> 时间：2012-12-09T09:18:23.380
> 
> 标签：java, sql, resultset

我有一个 java 应用程序的问题，我请求你的帮助。我需要开发一个代码，其中根据提供的约束创建图表。这必须使用 java 中的 BufferedImage 的概念来完成。我在 c: 中存储了一个图像，但无论我画什么，它都可能是一条简单的线或圆等，图像空间中不会显示任何内容。我还有一个疑问，即是否可以使用相同的结果集来存储来自不同表的数据。我无法解决出现的错误。 **我的代码如下：**

```
package diagram;

import diagram.AB;
import java.awt.*;
import java.awt.image.*;
import java.util.*;
import java.sql.*;
import java.io.*;
import javax.swing.*;
import java.sql.Timestamp;
import javax.imageio.ImageIO;

public class AB1 extends JPanel
{
public static void main(String a[]) throws Exception
{
    int ID,TC;
    String FROM, TO, ATS, DTS, SOURCE, DSTN, TS, ST;
    ResultSet rs;

    ArrayList<AB> ab = new ArrayList<AB>();

    //DATABASE CONNECTION

    String TrainNo = "12740";
    try
    {
    Class.forName("oracle.jdbc.driver.OracleDriver");
    String url = "jdbc:oracle:thin:@127.0.0.1:1521:xe";
    Connection c = DriverManager.getConnection(url, "system", "akankshadas");

    // STORING TABLE IN RESULTSET

    int rows = 0;

    PreparedStatement st=c.prepareStatement("select * from MT_TRAIN_CONSIST where TRAIN_NUMBER = ? ORDER BY SERIAL_NUMBER" );
    rs=st.executeQuery();

    PreparedStatement st1=c.prepareStatement("select * from MT_RAKE_TRAIN_LINK_MASTER where TRAIN_NUMBER = ? ORDER BY SERIAL_NUMBER");
    rs = st1.executeQuery();

    PreparedStatement st2=c.prepareStatement("select * from MT_SLIP_TRAIN_INFO  where TRAIN_NUMBER = ? ORDER BY SERIAL_NUMBER ");
    rs = st2.executeQuery();

    while(rs.next())
    {

    ID = rs.getInt("ID_TRAIN_DEF");
    FROM = rs.getString("COACH_FROM");
    TO = rs.getString("COACH_TO");
    TC = rs.getInt("NUMBER_OF_COACHES");
    ATS = rs.getString("ATTACH_TRANSFER_STATION");
    DTS = rs.getString("DETACH_TRANSFER_STATION");
    SOURCE = rs.getString("TRAIN_SRC");
    DSTN = rs.getString("TRAIN_DSTN");
    TS = rs.getString("TRANSFER_STATION");
    ST = rs.getString("slip_type");

    AB obj = new AB();

    obj.id = ID;
    obj.tc = TC;
    obj.from = FROM;
    obj.to = TO;
    obj.ats = ATS;
    obj.dts = DTS;
    obj.src = SOURCE;
    obj.dstn = DSTN;
    obj.ts = TS;
    obj.st = ST;
    ab.add(obj);

    rows++;
    }
}

catch(Exception ex)
{
    ex.printStackTrace();
}

getImg(new FileOutputStream("C:\\A&B" + TrainNo + ".jpg"), ab);
}

public static void getImg(OutputStream out, ArrayList<AB> ab) throws IOException
{
int imgWidth = 1024, imgHeight = 768;

BufferedImage image = new BufferedImage(imgWidth,imgHeight, BufferedImage.TYPE_INT_ARGB);
Graphics2D gx = image.createGraphics();
gx.setColor(Color.BLUE);

gx.setColor(Color.BLACK);
gx.drawLine(60,350,970,350);
}
} 
```

**它的对象类是**

```
package diagram;

import java.awt.*;
import java.awt.image.*;
import java.awt.event.*;
import java.util.*;
import java.sql.*;
import java.io.*;
import javax.swing.*;
import java.sql.Timestamp;
import java.text.SimpleDateFormat;
import javax.imageio.ImageIO;

public class AB 
{
public String from, to, ats, dts, src, dstn, ts, st;
public int id, tc;

public static void main(String a[]) throws Exception
{
BufferedImage image = new BufferedImage(500, 500, BufferedImage.TYPE_INT_ARGB);

OutputStream out = new FileOutputStream("C:\\myImg.jpg");

ImageIO.write(image, "PNG", out);
out.close();
}

} 
```

**错误是**

```
java.sql.SQLException: ORA-00904: "SERIAL_NUMBER": invalid identifier

at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)
at oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)
at oracle.jdbc.ttc7.Oall7.receive(Oall7.java:573)
at oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1891)
at oracle.jdbc.ttc7.TTC7Protocol.parseExecuteDescribe(TTC7Protocol.java:830)
at oracle.jdbc.driver.OracleStatement.doExecuteQuery(OracleStatement.java:2391)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2672)
at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:589)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:527)
at diagram.AB1.main(AB1.java:39) 
```

我将不胜感激所有的帮助。很长一段时间以来，我一直坚持这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:24:58.977

错误：

```
java.sql.SQLException: ORA-00904: "SERIAL_NUMBER": invalid identifier
...
at diagram.AB1.main(AB1.java:39) 
```

该行：

```
PreparedStatement st1=c.prepareStatement("select * from MT_RAKE_TRAIN_LINK_MASTER where TRAIN_NUMBER = ? ORDER BY SERIAL_NUMBER"); 
```

该表（MT_RAKE_TRAIN_LINK_MASTER）中的列是什么？它有 SERIAL_NUMBER 列吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:34:53.627

在这里，您正在使用准备好的语句。

```
PreparedStatement st=c.prepareStatement("select * from
MT_TRAIN_CONSIST where TRAIN_NUMBER = ? ORDER BY SERIAL_NUMBER" );

st.setInt(1, 100);//enter your train number 

 rs=st.executeQuery(); 
```

在执行 PreparedStatement 对象之前，您必须提供值来代替问号占位符（如果有）。

# ruby-on-rails - Facebook Auth 在一种环境中返回无效凭据，但在另一种环境中成功

> ID：13786172
> 
> 赞同：0
> 
> 时间：2012-12-09T09:19:17.377
> 
> 标签：ruby-on-rails, omniauth, facebook-authentication

我拥有一个使用omniauth-facebook 的Rails 应用程序。我们有一个测试环境和一个生产环境。测试环境 URL 为[http://test.appname.com](http://test.appname.com)，生产环境 URL 为[http://appname.com](http://appname.com)。两者都运行完全相同的代码副本，并且共享 Facebook App ID 和 Secret。最近，我们注意到 FB 登录在生产中失败并显示“无效凭据”消息，但它似乎在测试中工作得很好。这会影响所有 FB 帐户。我尝试从用户允许的应用程序中删除我们的应用程序并将其添加回来，但这似乎没有任何区别。此外，生成的 URL：

产品： [https ://www.facebook.com/dialog/permissions.request?app_id=298807996812584&display=page&next=http%3A%2F%2F21habit.com%2Fauth%2Ffacebook%2Fcallback&response_type=code&perms=email%2Coffline_access&fbconnect=1](https://www.facebook.com/dialog/permissions.request?app_id=298807996812584&display=page&next=http%3A%2F%2F21habit.com%2Fauth%2Ffacebook%2Fcallback&response_type=code&perms=email%2Coffline_access&fbconnect=1)

测试： [https ://www.facebook.com/dialog/permissions.request?app_id=298807996812584&display=page&next=http%3A%2F%2Ftest.21habit.com%2Fauth%2Ffacebook%2Fcallback&response_type=code&perms=email%2Coffline_access&fbconnect=1](https://www.facebook.com/dialog/permissions.request?app_id=298807996812584&display=page&next=http%3A%2F%2Ftest.21habit.com%2Fauth%2Ffacebook%2Fcallback&response_type=code&perms=email%2Coffline_access&fbconnect=1)

除了“下一个”参数指向不同的 URL 之外是相同的。我无法弄清楚为什么会这样。有没有其他人经历过这个/知道为什么会这样/我如何调试这个？

# java - Java：字符串和字节[]之间的转换

> ID：13786173
> 
> 赞同：0
> 
> 时间：2012-12-09T09:19:19.323
> 
> 标签：java, android

> **可能重复：**
> [为什么 byteArray 的长度是 22 而不是 20？](https://stackoverflow.com/questions/228987/why-does-bytearray-have-a-length-of-22-instead-of-20)

我只是想不通为什么像这样转换时会出错

```
String mystring = "This is a String";
Log.v("string:", mystring);
Log.v("byte then string:", mystring.getBytes().toString()); 
```

输出如下

```
String: This is a string
byte then string: [B@44ecc390 
```

任何人都可以帮忙吗？我实际上只想将一个字符串转换为字节，然后再转换为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:22:07.663

你应该使用

`Log.v("byte then string:", new String(mystring.getBytes()));`

# python - 第一个项目。篮球统计书。迷路的初学者

> ID：13786176
> 
> 赞同：-1
> 
> 时间：2012-12-09T09:19:27.430
> 
> 标签：python, statistics

我是 Python 新手。我正在尝试创建一个跟踪以下内容的程序：

1.  所有球员姓名/号码
2.  投篮尝试/命中
3.  投篮命中率（成功/尝试）
4.  总积分
5.  犯规
6.  篮板球
7.  助攻

我需要将所有这些数据保存到仅与刚刚玩过的游戏有关的文件中。

然后随着更多游戏的添加和更多信息，我需要另一个将所有统计数据添加在一起的文件。你知道我的意思？

我什至不知道从哪里开始。我想我实际上可以达到将所有数据放入其中的程度，但是如何以可读格式导出它呢？请记住，我必须将信息交给教练。

谁能帮我右脚下车？或者任何有经验的程序员可以指导我完成整个事情吗？我愿意为你付出的时间和精力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:25:46.047

如果您希望数据可读且可修改，请将其保存为[CSV](http://docs.python.org/2/library/csv.html)文件：

```
import csv

with open('output.csv', 'w') as handle:
    writer = csv.writer(handle)

    writer.writerow(['Test', 'foo', 'bar']) 
```

这不会保留 Python 数据类型，因此在读回字符串时必须将字符串转换回`int`s 和`float`s。

您还可以[腌制](http://docs.python.org/2/library/pickle.html)数据，这会将其保存为不可读的格式，该格式会解封回您的原始 Python 对象，因此您可以继续无缝地使用原始数据：

```
import pickle

with open('output.pickle', 'w') as handle:
    pickle.dump(['Test', 'foo', 123], handle) 
```

读回数据与写入数据类似。

更好的方法是使用 MySQL 或 SQLite 之类的数据库来存储数据。从那里，您可以使用[SQLAlchemy](http://www.sqlalchemy.org/)轻松查询和修改数据库。

# javascript - JAvascript 验证无法正常运行

> ID：13786184
> 
> 赞同：-1
> 
> 时间：2012-12-09T09:20:19.797
> 
> 标签：javascript

下面我有一个表格和一个 javascript 验证函数：

**HTML表格：**

```
<p><strong>New Course Details:</strong></p>
<table>
<tr>
<th></th>
<td><input type='hidden' id='newCourseId' name='CourseIdnew' value='' /> </td>
</tr>
<tr>
<th>Course ID:</th>
<td><input type='text' id='newCourseNo' name='CourseNoNew' value='' /> </td>
</tr>
<div id='courseidAlert'></div>
<tr>
<th>Course Name:</th> 
<td><input type='text' id='newCourseName' name='CourseNameNew' value='' /> </td>
</tr>
<div id='coursenameAlert'></div>
<tr>
<th>Duration (Years):</th> 
<td id='data'>{$durationHTML}</td>
    </tr>
    <div id='durationAlert'></div>
    </table> 
```

**Javascript：**

```
 function editvalidation() {

                var isDataValid = true;

                var newCourseNoO = document.getElementById("newCourseNo");
                var newCourseNameO = document.getElementById("newCourseName");
                var newCourseDurationO = document.getElementById("newDuration");

            var newCourseIdMsgO = document.getElementById("courseidAlert");
            var newCourseNameMsgO = document.getElementById("coursenameAlert");
            var newDurationMsgO = document.getElementById("durationAlert");

  if (currentCourseO.value == ""){
          $('#targetdiv').hide();
          currentCourseMsgO.innerHTML = "Please Select a Course to edit from the Course Drop Down Menu";
          newCourseIdMsgO.innerHTML = "";
          newCourseNameMsgO.innerHTML = "";
          newDurationMsgO.innerHTML = "";
          isDataValid = false; 
    }else{            
  if (newCourseNoO.value == ""){
          $('#targetdiv').hide();
          newCourseIdMsgO.innerHTML = "Please fill in the Course ID in your Edit";
          isDataValid = false;
  }if (newCourseNameO.value == ""){
          $('#targetdiv').hide();
          newCourseNameMsgO.innerHTML = "Please fill in the Course Name in your Edit";
          isDataValid = false;      
  }if (newCourseDurationO.value == ""){
          $('#targetdiv').hide();
          newDurationMsgO.innerHTML = "Please select a Course Duration in your Edit";
          isDataValid = false;   
            }else{
          newCourseIdMsgO.innerHTML = "";
          newCourseNameMsgO.innerHTML = "";
          newDurationMsgO.innerHTML = "";
        }

        return isDataValid;

        }
    } 
```

我对上述验证有 2 个问题。

问题1：在相关表单功能下方不显示错误，在表单上方显示错误。例如，如果用户没有输入 courseid，则错误应该显示在 course id 文本输入下方。

问题2：

如果我将表单/表格留空，则会显示所有错误，但是如果我填写其中一个文本输入并重新提交，它仍然会显示所有错误，它应该删除相关错误，因为文本输入是不是空的。为什么即使没有错误，它仍然显示错误？

只有javascript答案，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:42:09.487

1.  显示错误消息的 DIV 必须在 TD 内。TD 之外的任何内容都将显示在表格顶部。

2.  首先在 IF 条件之外编写此代码来清除所有错误消息 newCourseIdMsgO.innerHTML = ""; newCourseNameMsgO.innerHTML = ""; newDurationMsgO.innerHTML = ""

# ios - 第二个屏幕中的标签栏控制器

> ID：13786189
> 
> 赞同：0
> 
> 时间：2012-12-09T09:21:29.040
> 
> 标签：ios, xcode, controller, tabbar

> **可能重复：**
> [添加到应用程序时 UIAlertView 崩溃](https://stackoverflow.com/questions/13665396/uialertview-crashes-when-added-to-app)

我是 Objective-C 和 Xcode 的新手。在我的应用程序中，第一个屏幕是一个视图控制器和一个按钮。我想在按下该按钮时显示标签栏，因此标签栏将成为第二个屏幕。

这是我正在尝试做的事情：

`appdelegate.h`

```
@property (strong, nonatomic) FirstViewController *viewController1; 
```

`appdelegate.m`

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {   
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
     self.viewController1 = [[FirstViewController alloc]
     initWithNibName:@"FirstViewController" bundle:nil];
     self.window.rootViewController = self.viewController1;
     [self.window makeKeyAndVisible];
     return YES; } 
```

在我`FirsViewController.m`有按钮点击事件：

```
 -(IBAction) showMainView:(id) sender{  
     ViewController *mainViewController = [[ViewController alloc] initWithNibName:@"ViewController"
                                                                           bundle:nil];
     [self.view addSubview:mainViewController.view];
     mainViewController = [[ViewController alloc] initWithNibName:@"ViewController"                          
                                                           bundle:nil];
     [self.view addSubview:mainViewController.view]; 
```

ViewController 是一个带有标签栏的 xib。

在 IB 的第二个 xib 文件中，我为“文件的所有者”和 AppDelegate - appdelegate 类选择了 UIApplication 类。然后我加入了文件的所有者和应用程序委托。

当我运行我的应用程序并单击第一个视图上的按钮时，应用程序崩溃并出现以下错误： `Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<ViewController 0x744f0f0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key delegate.'`

你能告诉我如何克服这个问题吗？可能是在单击按钮后我应该将 tabbarController 重新分配为`rootViewController`？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:17:33.467

错误消息看起来像，您在 xib 中设置了一些名为`delegate`未正确连接到类文件（ViewController）的东西。检查您的 xib 是否显示一些警告消息并将其删除或修复该问题。

# c# - 调用 DLL 方法时方法的类型签名与 PInvoke 不兼容

> ID：13786192
> 
> 赞同：2
> 
> 时间：2012-12-09T09:21:41.443
> 
> 标签：c#, c++, c, dll, dllimport

我有一个带接口的 DLL

```
struct modeegPackage
{
    uint8_t     version;    // = 2
    uint8_t     count;      // packet counter. Increases by 1 each packet
    uint16_t    data[6];    // 10-bit sample (= 0 - 1023) in big endian (Motorola) format
    uint8_t     switches;   // State of PD5 to PD2, in bits 3 to 0
};

__declspec(dllexport) void __cdecl initSerial();

__declspec(dllexport) void __cdecl closeSerialPort();

__declspec(dllexport) struct modeegPackage __cdecl getPackage(); 
```

和 C# 适配器

```
class EEGCommunication
{
    [StructLayout(LayoutKind.Sequential)]
    public struct modeegPackage
    {

        /// unsigned char
        public byte version;

        /// unsigned char
        public byte count;

        /// unsigned int[6]
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6, ArraySubType = UnmanagedType.U2)]
        public UInt16[] data;

        /// unsigned char
        public byte switches;
    }

    private const string DLL = "libneureader-lib.dll";

    [DllImport(DLL, EntryPoint = "_Z10initSerialv")]
    public static extern void InitSerial();

    [DllImport(DLL, EntryPoint = "_Z15closeSerialPortv")]
    internal static extern void CloseSerialPort();

    [DllImport(DLL, EntryPoint = "_Z10getPackagev", CallingConvention = CallingConvention.Cdecl)]
    public static extern modeegPackage GetPackage();
} 
```

但是当我尝试调用`GetPackage`方法时，我收到一个错误`Method's type signature is not PInvoke compatible.`

我的代码有什么问题？

更新：代码更新

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-28T19:16:39.033

在我之前标记为“ANSWER”的答案并不正确，已经有 1.5 年了。

OP 得到该错误的原因确实正是错误描述所说的，“方法的类型签名与 PInvoke 不兼容”

当您拥有如下声明的 C/C++ 函数时，

```
 __declspec(dllexport) struct modeegPackage __cdecl getPackage(); 
```

由于函数返回的 struct 值比任何寄存器都大，GCC 编译器会尝试对其进行优化（返回值优化），因此实际实现如下所示，

```
 __declspec(dllexport) void __cdecl getPackage(struct* modeegPackage); 
```

所以你的 P/Invoke 声明应该是，

```
 [DllImport(DLL, EntryPoint = "_Z10getPackagev", CallingConvention = CallingConvention.Cdecl)]
    public static extern GetPackage(out modeegPackage); 
```

我希望我的回答能帮助任何其他可能在未来遇到类似问题的开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:38:55.117

这是导致问题的数组。pinvoke marshaller 不喜欢在按值返回结构作为函数返回值的特定情况下处理它。这通常很麻烦，这样做的方式高度依赖于编译器。很有可能你会遇到麻烦，因为听起来你正在使用 GCC。它*通常*由调用者在堆栈上为返回值分配空间并将指针传递给它来完成。

一个粗略但有效的技巧是自己扩展数组，足够实用，因为它只有 6 个元素。像这样替换数组：

```
 /// unsigned int[6]
        public short data0;
        public short data1;
        //...
        public short data5; 
```

这将解决异常。您是否能正确获取数据还有待观察，如果没有，您可能必须切换到 MSVC。

# java - Java程序不基于字符串比较退出

> ID：13786197
> 
> 赞同：2
> 
> 时间：2012-12-09T09:22:15.560
> 
> 标签：java, while-loop, try-catch, system.exit

我是一个新手，正在做一项家庭作业，向我们介绍如何在 Java 中使用文件，我正在尝试为用户提供一个选项，如果他们没有成功创建文件（例如，如果他们没有有权写入磁盘）。这是我试图结束程序的 try catch 块：

```
 // Loop used to repeat try catch block until a file is successfully created/opened
    FileWriter FW = null;       // Create & initialize the FW object outside of the loop 
                                // to ensure availability in the correct scope
    boolean success = false;
    while (success == false) {
        // Try catch block for handling possible exception thrown by the 
        // FileWriter constructor
        try {
            FW = new FileWriter(fileName);
            success = true;
        } 

        // Catch allows the user to attempt to rename file and includes option
        // to exit program immediately (presumably after multiple failed attempts)
        catch (IOException e) {
            String failString = "exit";
            fileName = (String)JOptionPane.showInputDialog(
                    "There was an error creating your file.  Please\n" +
                    "ensure you have permission to write to the directory\n" +
                    "and then re-enter your desired file name.  Please do\n" +
                    "not attempt to specify a directory.  Please do not\n" +
                    "use special characters.  Type 'exit' to end the\n" +
                    "program now.");
            if (fileName != failString) {
                fileName = fileName + ".txt";
            }

            else {
                JOptionPane.showMessageDialog(null, "Exiting...", "EXITING", 1);
                System.exit(0);
            }
        }
    } 
```

我认为应该发生的是用户将输入术语“退出”作为新文件名，程序将立即退出。但是，当我进入 exit 时，程序只是创建了一个名为 exit.txt 的文件并继续执行。我不知所措。

关于有什么问题的任何想法或更好的方法建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:29:03.170

`equals()`使用not`!=`或比较字符串`==`。

所以你需要

```
if (!fileName .equals(failstring)) {
  fileName = fileName + ".txt";
} else {
  System.exit(1);
} 
```

有关更多详细信息，请参阅 Java 教程：http: [//docs.oracle.com/javase/tutorial/java/data/comparestrings.html](http://docs.oracle.com/javase/tutorial/java/data/comparestrings.html)

顺便说一句：通常最好使用“积极”的表达而不是否定的表达（人脑能更好地应对它们）。所以推荐使用：

```
if (fileName .equals(failstring)) {
  System.exit(1);
} else {
  fileName = fileName + ".txt";
} 
```

反而

# ruby-on-rails - Rails：任何可以从给定链接自动生成缩略图的宝石？

> ID：13786198
> 
> 赞同：1
> 
> 时间：2012-12-09T09:22:25.967
> 
> 标签：ruby-on-rails, image, image-processing, thumbnails, web-crawler

我正在尝试实现类似于 Facebook 的功能：当用户发布链接时，facebook 会抓取链接的网站，并抓取最相关的（大）图像。我在这里和 Quora 上阅读了一些解决方案，但它们主要是关于 PHP 的，并没有真正提供详细的解决方案。我发现的一个答案如下，但作为 Rails 的初学者，我不完全确定如何做到这一点：

1.你可以简单地发出一个 CURL 请求

2.通过HTML解析获取所有图片

3.显示用户选择的Facebook等，或显示第一个（默认）图像。

有没有我可以使用的宝石（即使我需要将它们结合起来）来实现这一目标？我也猜想我也需要 javascript 来允许用户选择最相关的照片，但这不是高优先级。我希望能够从链接中找到一张照片，并将其上传到我们的亚马逊服务器。我们目前正在使用 Carrierwave 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:51:40.150

您可以查看一些爬虫的[Ruby Toolbox](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=crawler)，但我认为没有一个可以完全满足您的需求。

我可能会使用我自己的特定解决方案。因此，使用[httparty](https://github.com/jnunemaker/httparty)或[RestClient](https://github.com/archiloque/rest-client)获取网站，解析响应并使用[Nokogiri](http://nokogiri.org)查找图像。选择的逻辑取决于你。

不过有一件事，当用户实际发布链接时，您可能不想这样做，您应该在后台执行此操作，这样您就不会阻止用户界面。我为此推荐了像[Sidekiq](http://mperham.github.com/sidekiq)这样的东西。看看这个截屏视频[#366 Sidekiq](http://railscasts.com/episodes/366-sidekiq)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-14T19:56:20.147

我刚刚发布了一个完全符合您需要的 Gem：

[https://github.com/rlarcombe/grabbit](https://github.com/rlarcombe/grabbit)

我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T19:05:00.217

我会使用 HTTParty 和 Nokogiri 从页面中获取元数据。如今，大多数页面都使用 facebook 开放图形标签，其中通常包含可用于创建良好缩略图的图像/标题/描述。

这里有一篇关于抓取 FB open graph tags 的好帖子：[How to parse og meta tags using httparty for rails 3](https://stackoverflow.com/questions/14220891/how-to-parse-og-meta-tags-using-httparty-for-rails-3)。

# sql - 计算 SQL 中每类产品的计数

> ID：13786204
> 
> 赞同：2
> 
> 时间：2012-12-09T09:23:32.080
> 
> 标签：sql, sql-server-2008, tsql

假设这些表：

**组**：（ID，标题）： `{1,G1}, {2,G2}, {3,G3}, {4, G4}`

**类别**：（ID，标题）：`{1, Cat1}, {2, Cat2}, {3, Cat3}, {4, Cat4}`

**产品**：（Id、GroupId、CategoryId、名称）：

```
{1, 1, 1, G1C1P1},
{2, 1, 2, G1C2P2},
{3, 1, 2, G1C2P3},
{4, 2, 2, G2C2P4},
{5, 2, 2, G2C2P5},
{6, 3, 1, G3C1P6},
{7, 3, 3, G3C3P7} 
```

所以我需要的是上述值的任何类别的计数是：

```
Group  Category  Count
----------------------
 G1     Cat1      1
 G1     Cat2      2
 G1     Cat3      0
 G1     Cat4      0
 G2     Cat1      0
 G2     Cat2      2
 G2     Cat3      0
 G2     Cat4      0
 G3     Cat1      1
 G3     Cat2      0
 G3     Cat3      1
 G3     Cat4      0
 G4     Cat1      0
 G4     Cat2      0
 G4     Cat3      0
 G4     Cat4      0 
```

我试试这个：

```
SELECT 
        [GR].[Title] AS [Group],
        COUNT([PR].[Id]) AS [Count],
        [CA].[Title]

FROM [dbo].[Group] AS [GR]
FULL OUTER JOIN [dbo].[Product] AS [PR] ON [GR].[Id] = [PR].[GroupId]
FULL OUTER JOIN [dbo].[Category] AS [CA] ON [PR].[CategoryId] = [CA].[Id]
GROUP BY [CA].[Title], [GR].[Title];
GO 
```

但这不是确切的，那么您的建议是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:47:42.337

您需要`CROSS JOIN`两个表（`Group`和`Category`）来创建所有可能的组类别组合，然后创建`LEFT JOIN`表`Product`：

```
SELECT 
    gr.Title     AS [Group],
    ca.Title,
    COUNT(pr.Id) AS [Count]
FROM 
        dbo.[Group] AS gr
    CROSS JOIN 
        dbo.Category AS ca 
    LEFT OUTER JOIN 
        dbo.Product AS pr 
            ON  pr.GroupId = gr.Id
            AND pr.CategoryId = ca.Id 
GROUP BY 
    gr.Title,
    ca.Title 
ORDER BY
    gr.Title,
    ca.Title ; 
```

或者这样（首先`GROUP BY`在 Products 表中，然后加入派生表）：

```
SELECT 
    gr.Title             AS [Group],
    ca.Title,
    COALESCE(pr.cnt, 0)  AS [Count]
FROM 
        dbo.[Group] AS gr
    CROSS JOIN 
        dbo.Category AS ca 
    LEFT OUTER JOIN 
        ( SELECT 
              GroupId,
              CategoryId,
              COUNT(*) AS cnt
          FROM
              dbo.Product 
          GROUP BY 
              GroupId,
              CategoryId
        ) AS pr
            ON  pr.GroupId = gr.Id
            AND pr.CategoryId = ca.Id 
ORDER BY
    gr.Id,
    ca.Id ; 
```

如果`Group(Title)`和`Category(Title)`列是唯一的，则查询是等效的（排序除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:46:29.310

试试这个：

```
SELECT 
        [GR].[Title] AS [Group],
        [CA].[Title],
        COUNT([PR].[Id]) AS [Count]

FROM [dbo].[Product] AS [PR]
FULL OUTER JOIN [dbo].[Group] AS [GR] ON [PR].[GroupId] = [GR].[Id]
FULL OUTER JOIN [dbo].[Category] AS [CA] ON [PR].[CategoryId] = [CA].[Id]
GROUP BY [GR].[Title],[CA].[Title];
GO 
```

# python - 如何将python代码转换为windows dll

> ID：13786207
> 
> 赞同：2
> 
> 时间：2012-12-09T09:23:43.953
> 
> 标签：python, py2exe

使用 py2exe，我可以将 python 代码转换为 windows 的执行程序。现在我想把我的代码变成一个窗口DLL，以便其他程序可以调用我的函数。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:22:43.047

您可以使用 shedskin 将 .py 转换为 .dll。

[http://code.google.com/p/shedskin/](http://code.google.com/p/shedskin/)

我相信使它成为 dll 的命令是

```
shedskin -e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:37:05.350

您可以通过使您的代码适应 Cython 来创建一个 .dll ≈ [.pyd](http://docs.cython.org/src/userguide/tutorial.html)

# matlab - 两个不同信号的傅里叶变换

> ID：13786208
> 
> 赞同：1
> 
> 时间：2012-12-09T09:23:54.513
> 
> 标签：matlab, time-series, dft

我想生成一些数字来显示使用傅立叶变换进行时间序列分析的缺点。我的目标是表明 2 个明显非常不同的信号具有非常相似形状的光谱。首先，我创建我的系列：

```
t =  0:.01:2;
y = sin(2.*pi.*5.*t)+sin(2.*pi.*10.*t);
r1 = find(t <= 1);
r2 = find(t > 1);
y2a =  sin(2.*pi.*5.*t(r1));
y2b = sin(2.*pi.*10.*t(r2));
y2 = [y2a,y2b];

figure(1);
subplot(211);
plot(t,y,'k');
subplot(212);
plot(t,y2,'k'); 
```

生产： ![在此处输入图像描述](../Images/b805307e5738df42efd687692e51da48.png)

现在，我想证明它们的光谱具有非常相似的形状： ![在此处输入图像描述](../Images/5d3eff5cd31ff72ff1cae1768b2b567f.png)

这些示例取自我想在 matlab 中重现的一些课堂笔记。但是，我在复制第二个情节时遇到了困难。谁能建议如何使用提供的信息在 matlab 中生成第二个图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:52:47.653

重现这些情节相当容易。但是，请注意几件事：

1.  在你的课堂笔记中，时域图是从`t = 0`到`t = 4`（`t = 2`不像你做的那样）。
2.  频域图仅显示正频率，*即*频谱的一半。频率范围为 0 到 20Hz，即采样频率为 40Hz。
3.  能量的数量必须保持不变，因此如果只显示一半频谱，则绘制的频率分量应乘以 2 倍。

也就是说，这是完整的代码（包括对您的时域图的修复）：

```
% # Time domain plots
fs = 40;
t = 0:(1 / fs):4;
y1 = sin(2 * pi * 5 * t)+ sin(2 * pi * 10 * t);
y2 = [sin(2 * pi * 5 * t(t <= 2)), sin(2 * pi * 10 * t(t > 2))];

figure
subplot(2, 1, 1), plot(t, y1)
subplot(2, 1, 2), plot(t, y2)

% # Frequency domain plots
Fy1 = abs(ifft(y1));
Fy2 = abs(ifft(y2));
N = numel(t);
idx = 1:numel(Fy1) / 2;    % # Indices of half the spectrum
f = fs * (0:(N - 1)) / N;  % # Actual frequencies

figure
subplot(2, 1, 1), plot(f(idx), 2 * Fy1(idx))
subplot(2, 1, 2), plot(f(idx), 2 * Fy2(idx)) 
```

时域图是：

![在此处输入图像描述](../Images/4bf8d1312a07e87a9a3168f301a64685.png)

和相应的频域图是：

![在此处输入图像描述](../Images/ce16a09fef98e70a5f0a1b0842187e86.png)

# python - 使用 pandas 和 matplotlib 对股票数据进行回归

> ID：13786209
> 
> 赞同：3
> 
> 时间：2012-12-09T09:23:54.963
> 
> 标签：python, matplotlib, pandas, statsmodels

我想在股票图表上绘制 Excel 所谓的“指数趋势/回归”。当我在 IPython 笔记本中运行下面的代码时，它只是说“内核已经死了，你想重新启动它吗？”。关于如何解决它的任何想法？此外，这只是尝试进行线性回归，我不太确定如何对指数数据进行回归。

```
import datetime
import matplotlib.pyplot as plt
import statsmodels.api as sm
from pandas.io.data import DataReader

sp500 = DataReader("AGG", "yahoo", start=datetime.datetime(2000, 1, 1)) # returns a DataFrame
sp500["regression"] = sm.OLS(sp500["Adj Close"], sp500.index).fit().fittedvalues()
top = plt.subplot2grid((3,1), (0, 0), rowspan=2)
top.plot(sp500.index, sp500["Adj Close"], 'b-', sp500.index, sp500["regression"], 'r-')
bottom = plt.subplot2grid((3,1), (2,0))
bottom.bar(sp500.index, sp500.Volume)
plt.gcf().set_size_inches(18,8) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T12:49:00.953

我又看了一遍，意识到我之前的答案很不合适，因为它不包括截距。我已经更新了我的答案。

段错误来自试图将日期时间索引作为外生变量。而是尝试：

```
import datetime
import matplotlib.pyplot as plt
import statsmodels.api as sm
import pandas
from pandas.io.data import DataReader

sp500 = DataReader("AGG", "yahoo", start=datetime.datetime(2000, 1, 1)) # returns a DataFrame
sp500["regression"] = sm.OLS(sp500["Adj Close"],
    sm.add_constant(range(len(sp500.index)),
    prepend=True)).fit().fittedvalues 
```

请注意，您不需要将 statsmodels 的拟合值作为函数调用。如果您的数据点都是相等的空间，则此模型将给出与使用实际索引相同的结果。

对于您的第二个问题，pandas 作为内置的指数加权移动平均线，您可能想要查看：`pandas.ewma` [这里](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.stats.moments.ewma.html#pandas.stats.moments.ewma)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:54:44.667

您将需要发布更多信息 - 版本号以及如何构建 pandas - 也许回溯也有助于缩小范围。在有或没有 pylab 的 IPython 中，我无法在 64 位 linux 上使用 pandas 0.9.1 复制段错误。您可能还想报告关于 github 问题而不是堆栈溢出的错误。在那里更容易引起开发人员的注意。

# python - 使用 Python 列出在线目录中的所有文件？

> ID：13786210
> 
> 赞同：2
> 
> 时间：2012-12-09T09:24:04.733
> 
> 标签：python, download, urllib2

您好，我只是想知道我正在尝试创建一个从 Internet 下载文件的 python 应用程序，但目前它只下载一个名称为我知道的文件...有什么方法可以获取文件列表在线目录并下载它们？我会向您展示我一次下载一个文件的代码，以便您了解我不想做什么。

```
import urllib2

url = "http://cdn.primarygames.com/taxi.swf"

file_name = url.split('/')[-1]
u = urllib2.urlopen(url)
f = open(file_name, 'wb')
meta = u.info()
file_size = int(meta.getheaders("Content-Length")[0])
print "Downloading: %s Bytes: %s" % (file_name, file_size)

file_size_dl = 0
block_sz = 8192
while True:
    buffer = u.read(block_sz)
    if not buffer:
        break

    file_size_dl += len(buffer)
    f.write(buffer)
    status = r"%10d  [%3.2f%%]" % (file_size_dl, file_size_dl * 100\. / file_size)
    status = status + chr(8)*(len(status)+1)
    print status,

f.close() 
```

那么它是从这个网站下载taxi.swf，但我想要它做的是从那个目录“/”下载所有.swf到计算机？

有可能吗，非常感谢你。-Terrii-

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T09:39:59.710

由于您尝试一次下载大量内容，因此请先查找网站索引或网页，以整齐地列出您要下载的所有内容。网站的移动版通常比桌面版更轻巧，更容易抓取。

这个网站正是你要找的：[所有游戏](http://www.primarygames.com/mobile/category/all/)。

现在，这真的很简单。只需，提取所有游戏页面链接。我使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)并[要求](http://python-requests.org/)这样做：

```
import requests
from bs4 import BeautifulSoup

games_url = 'http://www.primarygames.com/mobile/category/all/'

def get_all_games():
    soup = BeautifulSoup(requests.get(games_url).text)

    for a in soup.find('div', {'class': 'catlist'}).find_all('a'):
        yield 'http://www.primarygames.com' + a['href']

def download_game(url):
    # You have to do this stuff. I'm lazy and won't do it.

if __name__ == '__main__':
    for game in get_all_games():
        download_game(url) 
```

剩下的就看你了。`download_game()`根据游戏的 URL 下载游戏，因此您必须找出`<object>`标签在 DOM 中的位置。

# mysql - 数据库设计——哪一个最适合这个？

> ID：13786218
> 
> 赞同：0
> 
> 时间：2012-12-09T09:24:52.893
> 
> 标签：mysql, database, database-design, database-normalization

我是一个在设计数据库方面搞砸的新手。我想创建一个包含员工信息的数据库（使用 mysql）。然后我将编写 Web Client 来显示每个员工的个人资料。到目前为止，我的专栏是：

```
1) user id
2) first name
3) last name
4) email address
5) phone number
6) fax number
7) department(which will be like a category) 
```

最好的设计是将项目 1-6 列在一个表中，然后将部门列放在它自己的表中（带有 id 列）？或者我应该让所有项目成为自己的表格，给每个表格一个额外的 id 列......这会是＃1规范化形式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:28:10.563

只要您的列都不是多值的（例如，一个员工可以有多个部门），那么您的设计就是最优的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:44:01.603

一些进一步的想法......

不要忘记考虑时间。员工可以更换部门吗？您有兴趣了解这段历史吗？如果是这种情况，您将必须有一个单独的 Departments 表，并且可能是一个带有 EmployeeID、DepartmentID、StartDate 和 EndDate 的服务（或其他）表。

在考虑随着时间的推移发生的变化时，电话和传真号码以及电子邮件地址是否适合员工或职位？如果会计部门的珍妮特找到主管的工作，她是否会在新办公室获得不同的电话号码，或者是电话号码随人们移动的地方之一。电子邮件同上。地址是 hr.officer@example.com 还是 joe.smith@example.com？如果在这两种情况下都是前者，您可能需要考虑一个位置表，该表跟踪具有 DepartmentID 外键的电话/传真/电子邮件（以及工资等级、FT 或 PT 等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T12:56:58.767

如果您正在思考 SQL，那么您肯定最好以（至少）第一范式思考。多值列不仅速度慢，而且是迈向混乱的第一步。如果您转向基于 Nosql 的解决方案，则此规则不适用。

范式 2 到 5 有助于填充表格，但不会帮助您使用 Web 客户端。您将从完全规范化中获得的最大好处是保证数据库不会自相矛盾。诸如同一部门的两个不同名称，在两个不同的员工记录（行）中。

您需要添加到您的愿景的最重要的事情是视图。您可以使用视图来获得非常好的效果，以使数据看起来更像您希望网页的外观。这将使构建 Web 客户端更加容易。有些领域的观点也无济于事。

采取下拉列表。如果按照建议，人们可以拥有多个电话号码，您可能希望在员工页面上有一个电话号码下拉列表。这基本上是一个多值字段，视图在这方面并不是特别有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T09:28:04.710

您的第一个解决方案更好，项目 1 到 6 应该都在同一个表中`users`。如果您有更多关于部门的信息要存储，那么您需要一个特定的表，该表`departments`至少有两列：`id`然后`name`在`users`表中您将有一个_id 列，该列将存储与表中`department`部门对应的 id `departments`.

如果您不存储有关部门的任何其他信息，最好将部门名称直接存储在`users`表中，以避免每次检索或更新有关用户的信息时都必须加入表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T09:28:48.997

```
User_Master
------------------

UserID - Primary Key
DeptID  - Foreign Key
FirstName
LastName
EmailID
PhoneNumber
FaxNumber

Dept_Master
----------------

DeptID - PrimaryKey
DepartmentName 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T09:33:21.770

我认为您可以拥有部门列，例如部门 1、部门 2 等，其中将包含每个部门的 ID。您可以创建另一个名为部门的表，该表将包含 ID 和部门名称。现在您可以将第一个表中的部门 ID 链接到第二个表中。如果员工属于多个部门，这不会造成混乱。

# entity-framework - 为什么 EntityFramework.Extended 库在更新和删除时不需要调用 SaveChanges()？

> ID：13786222
> 
> 赞同：3
> 
> 时间：2012-12-09T09:24:56.857
> 
> 标签：entity-framework, design-patterns, ado.net

我在看[EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)。它可以在数据库实体上运行 Update() 和 Delete()。像：

```
//delete all users where FirstName matches
context.Users.Delete(u => u.FirstName == "firstname"); 
```

但有趣的是，它不需要调用`context.SaveChanges()`，它直接进入数据库并删除记录。

这是一个糟糕的设计吗？我认为对实体的每一次修改都需要调用`SaveChanges()`才能生效并保持数据库和内存对象之间的正确关系和映射。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T05:30:32.620

您必须了解 SaveChanges 的作用。SaveChanges 提交存储在当前本地缓存中的对象模型更改。

您所指的库生成 SQL 命令语句，并且不修改对象上下文。因此，由于对象上下文没有改变，所以没有要保存的更改（换句话说，SaveChanges 指的是数据模型，而不是数据库）。

为了说明这一点……想象一下您的孩子乘公共汽车上学和您送他们下学之间的区别。

当他们乘公共汽车去学校时，校车会绕到各个站点，然后当它结束时，公共汽车会立即将所有孩子都送走。这有点像调用 SaveChanges。

但是当你带你的孩子去学校时，这是一个单一的任务，在你做的时候，一个动作就可以完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:11:45.107

这在自述文件中进行了解释。[https://github.com/loresoft/EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)。如果您知道要删除的内容并且需要删除多个实体，那么只需转到数据库并删除它们而不是将它们带到上下文中来删除它们会更快。这就像使用 ExecuteSqlCommand 执行 SQL 命令，但在这里看不到 SQL。另一方面，如果您的上下文正在跟踪您正在删除/更新的实体，您很可能最终会看到一些异常，因此您需要知道您在做什么、为什么要这样做以及何时这样做。

# c# - 一个数据访问层服务于多个业务层？或不？

> ID：13786244
> 
> 赞同：3
> 
> 时间：2012-12-09T09:28:21.590
> 
> 标签：c#, .net, architecture, data-access-layer, business-logic-layer

我有（或将有）一个 DAL，其中包含我的 ERP 系统的数据访问方法。

在业务方面，有些上下文将使用此 DAL。例如：条形码应用程序、定制销售拣货应用程序、采购订单应用程序。

我正在考虑而不是为我的业务层创建一个 DLL 来将其分解为这些主要区域，从而使它们与 DAL 进行可靠的通信。这将有助于减少我完成的应用程序的膨胀

这是我的第一个问题，第二个问题是业务层之间通用的数据访问对象是否应该驻留在单独的项目中以便所有 BL 都可以访问？

最后，这些数据访问对象对 DAL 也很有用，因为许多方法将这些对象的列表返回到业务层或直接返回到 Presentation（不常见但会发生）。它们是否应该引用具有 DAO 的同一个公共类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:53:21.077

我认为你的第二个问题的答案是相当清楚的；DAL 应该有自己的项目。

至于第一个，这实际上取决于不同应用程序需求之间有多少共性。您还需要考虑拆分成多个 BLL DLL 是否会增加业务逻辑维护的复杂性。

我会敦促您对从同一 UI 访问 DAL 和 BLL 的最后一项保持谨慎。这意味着您可能对两者都有依赖。最好将简单的方法放入 BLL 中，这些方法只调用 DAL 功能并返回答案，以便一切从 ​​UI 到 BLL 再到 DAL。

当然，对于所有这些事情，您需要考虑哪些答案最适合您的应用程序和开发方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:40:37.697

您可以拥有 DAO 和 BL 都可以使用的域对象。域对象应该非常愚蠢，它应该是给定实体的表示。

例子：

Bl.Get-employee --> 返回域对象 Employee

BL.Get-Employee 方法调用将您的数据挖掘转换为域对象的 DAO，在本例中为 Employee 域对象。

Bl.Get-employee>>调用 DOA.Get-employee。所有数据库操作都应由您的 DAO 处理。

在您有业务逻辑的场景中，您的代码可能如下所示。

```
Employee Bl.ProcessRecord(EmployeeDomain Employee)
{
    //Do some logic....
    //Perhaps interact with other DAO operations
    //Have some business logic operations ETC
    Persist your changes to the database
    Employee = DAO.Save-employee(Employee)
    return Employee;
} 
```

# xpages - 如果使用 exlib 中的动态内容控件软删除 url 哈希 unid 文档，则重定向到另一个页面

> ID：13786245
> 
> 赞同：0
> 
> 时间：2012-12-09T09:28:41.110
> 
> 标签：xpages, xpages-extlib, dynamic-content, soft-delete

我在 extlib 中使用动态内容控制。这个控件的一个很好的特性是它自动从 url 中的 documentId 连接数据源，如下所示：

“...#content=doc&action=openDocument&documentId=C0282D5F7AF66787C1257ACF0028FD3A”

如果应用程序中存在unid，它将数据源连接到它。（除非设置了 ignoreRequestParameters）

我的问题是我正在使用自己的软删除功能，我在文档上设置了一个字段，如果某些用户将其删除，它将从基于该字段的视图中排除。

但是 dyn 内容控件不关心文档是否在视图中，如果文档存在于应用程序中，它将连接到数据源

所以如果文档被软删除，我需要找到一种不加载数据源并将用户重定向到另一个地方的方法。可能的？

**请注意：unid 显示在 url 哈希后面，因此无法使用 SSJS 访问。**

//托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:53:18.737

您可以使用*ExtLibUtil*访问 documentId 。然后可以在*dynamicContent*组件的*beforeContentLoad*事件中重定向用户：

 *```
<xe:this.beforeContentLoad>
   <![CDATA[#{javascript:               
      var noteId = com.ibm.xsp.extlib.util.ExtLibUtil.readParameter(facesContext,"documentId");
      if( noteId === "ABCD" ){
         facesContext.getExternalContext().redirect("http://google.de");
      }
   }]]>
</xe:this.beforeContentLoad> 
```

[您必须查找您的软删除字段，而不是使用硬编码的*noteId ]*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:06:19.797

您能否在某个 XPage 事件（例如`beforePageLoad`）中检查您的特定“软删除”字段，然后用于`context.redirectToPage("pagename")`将用户重定向到另一个页面？*

# android - 在动态创建的小部件的构造函数中设置样式不起作用

> ID：13786246
> 
> 赞同：1
> 
> 时间：2012-12-09T09:28:47.133
> 
> 标签：android, android-widget, android-button, android-resources

我正在尝试动态创建`ImageButton`一个样式并对其应用样式。

这是我的风格：

```
<style name="ActionBarActionButton">
    <item name="android:layout_width">30dp</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:background">@drawable/action_button</item>
</style> 
```

这是按钮创建：

```
ImageButton actionButton = new ImageButton(context, null, R.style.ActionBarActionButton); 
```

它似乎根本没有效果，没有应用样式参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:01:44.310

I found into that this way doesn't work, but nobody could told why (hello google?)

I had to use such workarround:

**I've crated a new layout file for button:**

```
<?xml version="1.0" encoding="utf-8"?>
<ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="40dp"
    android:layout_height="fill_parent"
    android:background="@drawable/action_button" >
</ImageButton> 
```

**And then inflated it into layout like this:**

```
 LayoutInflater inflater =  (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    ImageButton actionButton = (ImageButton) inflater.inflate(R.layout.imagebutton_action, getActionsLayout(), false);
    actionButton.setImageResource(action.getIconResource());        
    getActionsLayout().addView(actionButton); 
```

# ios - 如何在 Interface Builder 中使用自定义 UIButton？

> ID：13786251
> 
> 赞同：5
> 
> 时间：2012-12-09T09:28:57.790
> 
> 标签：ios, xcode, uibutton, interface-builder, custom-controls

我有一个加载 Nib 的子类 UIButton：

```
@implementation BlaButtonVC

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *subViews = [[NSBundle mainBundle] loadNibNamed:@"BlaButton" owner:self options:nil];
        [self addSubview:subViews[0]];
    }
    return self;
}

@end 
```

我可以将此按钮添加到视图中，如下所示：

```
// ViewController.m

BlaButtonVC *button = [[BlaButtonVC alloc] initWithFrame:CGRectMake(10, 10, 280, 44)];

button.titleXLabel.text = @"Nyuff";
button.descLabel.text = @"Kukk";

[self.view addSubview:button]; 
```

我的问题是我不知道如何从 Interface Bulder 做到这一点，如何使用这个 UIButton 子类而不是普通的子类。

已经将按钮类型更改为自定义，自定义类更改为 BlaButtonVC，但这还不够。它会调用 BlaButtonVC initWithFrame，但按钮既不会出现在 Interface Builder 中，也不会出现在 Simulator 中。

我错过了什么？

在这里您可以找到完整的示例：
[https ://www.dropbox.com/s/ioucpb6jn6nr0hs/blabla1.zip](https://www.dropbox.com/s/ioucpb6jn6nr0hs/blabla1.zip)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T09:35:04.540

从 初始化时`StoryBoard`，它调用方法`initWithCoder:`而不是`initWithFrame:`。除此之外，一切都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:52:58.603

在 Interface Builder 中，您不能将子视图添加到`UIButton`，所以这里有一些想法：

1.  用代码来做。
2.  将按钮放在标签和图像下方，这样它就会收到触摸并按预期工作。
3.  与单元格一起使用`UITableView`（这看起来像您要实现的目标）。
4.  将自定义`UIView`与`UITapGestureRecognizer`.

# asp.net - 使用 where 从两个表中选择的 SQL 语句

> ID：13786253
> 
> 赞同：0
> 
> 时间：2012-12-09T09:29:08.913
> 
> 标签：asp.net, sql, sql-server-2008

我有两个表定义如下：

**培训班**

```
course ID     course Name
1             Math
2             Science
3             geography 
```

和另一个表（它的用途是显示课程中的注册学生）：

**学生课程**

```
course ID     student ID      Final cost
1             2               100
2             3               200 
```

我需要一个 SQL 语句，它只选择某个学生（它的值是我页面上的控件中的一个参数——但这不是我的问题）没有注册的课程......

我最近的尝试是这样的：

```
SELECT 
   Courses.[Course ID], Courses.[Course name] 
FROM 
   Courses, student_courses 
where 
   Courses.[Course ID] <> student_courses.[Course ID] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:34:21.673

你只需要这样的东西：

```
SELECT
    c.[Course ID], c.[Course Name]
FROM
    dbo.Course c
WHERE
    NOT EXISTS (SELECT * FROM dbo.StudentCourses sc
                WHERE [Student ID] = 2 AND [Course ID] = c.[Course ID]) 
```

请参阅[我的 SQL Fiddle 显示此内容](http://www.sqlfiddle.com/#!3/d739d/3)。

基本上，只需选择那些没有条目的`Student_Courses`课程`[Student ID]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T09:36:22.923

```
SELECT [Course ID], [Course name] 
FROM Courses
WHERE [Course ID] NOT IN 
 (SELECT Course ID from student_courses WHERE [student ID]=1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T10:49:54.973

我能想到的最简单的（Transact）SQL 是这样的：

```
select 
     [courses].[course ID]
   , [courses].[course name]
from [courses]
left outer join [student_courses]  
       on   [student_courses].[course ID]  = [courses].[course ID] 
       and  [student_courses].[student ID] = @studentID
where 
     [student_courses].[student ID] is null 
```

不要将“[student_courses].[student ID] = @studentID”放在 where 子句中，因为这会导致您感兴趣的空值被丢弃，并且您的左连接*看起来*像一个内连接。

如果你想变得不必要的复杂，你可以使用 group, having 和 count 来代替。

```
select 
    [courses].[course ID]
  , [courses].[course name]
from [courses]
left outer join [student_courses]  
           on   [student_courses].[course ID]  = [courses].[course ID] 
           and  [student_courses].[student ID] = @studentID
group by
     [courses].[course ID]
   , [courses].[course name]
having count([student_courses].[course ID]) = 0 
```

丢失列名中的空格可能是个好主意。从长远来看，它只会给你带来麻烦。

# regex - Notepad++ 中的正则表达式分组

> ID：13786254
> 
> 赞同：3
> 
> 时间：2012-12-09T09:29:32.467
> 
> 标签：regex, notepad++

我是 Regex 的新手，我想用整数中的`\\.\CNCBx`where`\\.\CNCBx+8`替换所有出现的 。`x`

例如

```
serialPort = \\.\CNCB2
serialPort = \\.\CNCB50 
```

将更改为：

```
serialPort = \\.\CNCB10
serialPort = \\.\CNCB58 
```

我尝试了几种模式，但无法让它工作：

寻找：`CNCB(\d*)`

替换为：`($LAST_SUBMATCH_RESULT) + 8` 不起作用。

如果不可能，我将只使用 python 来做，但我只是想知道在 Notepad++ 中是否可能。

# android - 从其他应用程序接收意图导致强制关闭

> ID：13786257
> 
> 赞同：0
> 
> 时间：2012-12-09T09:29:52.157
> 
> 标签：android, android-intent

我正在尝试为 android 创建一个应用程序，我希望允许用户使用我的应用程序共享**文本。**

我拥有的代码如下。请帮我找出错误。

我没有 logcat 消息，因为每当我在模拟器中运行共享应用程序并单击共享按钮时，它都会直接打开股票消息应用程序，尽管我的其他应用程序安装在模拟器中，所以我不得不在我的手机上测试应用程序。

**我为共享而创建的应用程序代码**

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, getResources().getText(R.string.send_to))); 
```

**主要应用**

**清单声明**

```
<activity
        android:name="com.example.app.MainActivity"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="text/plain" />
        </intent-filter>
    </activity> 
```

**来自 MAINACTIVITY.JAVA 的代码**

```
Intent myintent = getIntent();
String action = myintent.getAction();
String type = myintent.getType();

if(Intent.ACTION_SEND.equals(action) && type !=null) {
    if("text/plain".equals(type)) {
        handleSendText(myintent);
  }
}

void handleSendText(Intent intent) {
    String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);
    if (sharedText != null) {
        editText.setText(sharedText);
    }
} 
```

请帮我找出为什么我的应用程序和股票消息应用程序没有弹出 Intent Chooser 的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:54:19.600

尝试在模拟器中运行它并使用调试器来查找您的应用程序崩溃的位置然后将其写在这里尝试使用捕获异常

# php - 使用 preg_replace将字符串转换为标签

> ID：13786262
> 
> 赞同：3
> 
> 时间：2012-12-09T09:30:29.690
> 
> 标签：php, preg-replace

这些正则表达式正在杀死我，无论我阅读什么，我都无法理解这个概念。

这是我的问题，我相信它非常容易解决。

```
[img:http://example.com/_data/025_img.jpg] 
```

我想要的只是用标签更改它显示 [img: ... ] 的位`<img>`并获得如下结果

```
<img src='http://example.com/_data/025_img.jpg' border='0' /> 
```

我尝试了各种无效的愚蠢变化。我对此并不感到惊讶。

***编辑***

附加信息：

我的情况如下。

1.  用户将图像上传到他们的个人资料

2.  图像名称存储在 db 中。

3.  它们列在具有 textarea 的表单旁边
4.  在输入文本时，我想通过添加以下标签 [img: ... ] 为用户提供包含一个或多个图像的位置，其中 ... 是单击列出的图像时将被复制的链接从用户库。
5.  我正在使用 Codeigniter 并将 textarea 通过视图传递到控制器->模型中，在该模型中，它由助手对各种事物进行清理... sql/quotes 等。XSS 也在 CI 上启用

6.  然后我想扫描文本并查看用户在哪里拥有 [img: ... ] 标签并将其交换为`<img>`标签并用图像后跟文本呈现帖子。

因此，用户的实际输入将类似于以下内容

```
The brown fox jumped over foo bar [img:http://example.com/_data/025_img.jpg] and then went to bed [img:http://example.com/_data/0277_img.jpg] while thinking about [img:http://example.com/_data/1115_img.jpg] 
```

这就是我要求 preg_replace 而不是 preg_match 的原因。preg_match 不会使文本跟随图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:46:18.297

让我们先把简单的事情排除在外。

```
/\[img:([^\]]+)\]/ 
```

那是：

*   字面意思`[img:`
*   一个捕获组，包含
    *   一个字符类，由
        *   不是文字的东西`]`
    *   至少重复一次
*   字面意思`]`

运行此`preg_match`操作，匹配数组中的元素 1 很可能是您可以轻松插入到`img`标记中的图像 URL。

但你不应该。不是马上。

首先，这是不安全的。当我写这篇文章时会发生什么？

```
[img:javascript:alert(document.cookie);] 
```

呃。这不会是好事。

您*可能*想要确保用户声称是 URL 的东西确实是 URL。您可以尝试通过调用来执行此操作[`parse_url`](http://php.net/parse_url)。它将返回一系列 URL 组件。确保事物具有域和路径，并通过 HTTP 或 HTTPS 提供服务。

好的，但是当用户输入*this*时会发生什么？

```
[img:http://www.example.com/foo.jpg" onmouseover="alert(document.cookie)"] 
```

这是一个有效的...ish... URL，它将被成功解构`parse_url`并且很可能通过基本检查以确保格式正确。过滤掉空格和引号（单引号*和*双引号）将是一个很好的起点，但还有更多需要担心的事情。

最重要的是，像这样的标记是[**XSS**或**跨站点脚本**漏洞](http://en.wikipedia.org/wiki/Cross-site_scripting)中的一个向量。

您*可能*可以通过将 URL 传递给[`htmlspecialchars`](http://php.net/htmlspecialchars). 这至少会取消引号和括号，并且很难对那些被照顾的人感到讨厌。请注意字符集的愚蠢，一些非 UTF-8 字符编码可能包含 ASCII 引号......

您*可能*希望为此使用真正的标记语言（即使它只是降价），并且您*可能*希望在结果上使用基于白名单的 HTML 过滤器，例如[HTML Purifier](http://htmlpurifier.org)。这将有助于保护您免受某些程度的精神错乱。

请记住，如果他们*不*来抓你，你只会偏执。网络上到处都是愚蠢到恶意的人，以及恶意到愚蠢的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T09:39:25.350

如果您不喜欢正则表达式，则不必使用它们。至少不是为了这个目的。

以下应该做：

```
$in = "[img:http://example.com/_data/025_img.jpg]";

if (strpos($in, "[img:") === 0)
{
    $in = "<img src='" . substr($in, 5, -1) . "' border='0' />";
}

echo $in; 
```

但是，这将是正则表达式方式：

```
$in = "[img:http://example.com/_data/025_img.jpg]";

preg_match("~\[img\:(.*?)\]~", $in, $matches);

if ($matches)
{
    echo "<img src='" . $matches[1] . "' border='0' />";
} 
```

**简短说明：**

模式是：`"~\[img\:(.*?)\]~"`

我`~`用作模式的分隔符。你的开始`[`必须被转义，因为它是一个正则表达式字符。`img`能原地不动，`:`又得逃。之后，任何字符都可以跟随：`.*`- 问号是将选择变为“不贪婪”，否则将匹配到最后。将其放入（大括号）中，以便将其标记为`$matches`. 之后，`]`再次关闭 - 仅此而已。

**更新**：见 Gumbos 评论，`:`不需要转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T00:43:26.280

正则表达式很难，但功能强大。我根本不是大师，所以不认为这是最好的解决方案。

```
$regEx = '/\[img:http:\/\/[\w]{3,10}\.(com|org|us){1}[\w\/]{5,15}\.(jpg|png|gif){1}\]/i';

$string = 'someting before [img:http://example.com/_data/025_img.png], something after [img:http://example.org/_data/025_img.jpg] and end of the line EOL';
$pstring = $string;
$matches[0] = array();
preg_match_all($regEx, $string, $matches); 
```

匹配数组看起来像：

```
Array
(
    [0] => Array
        (
            [0] => [img:http://example.com/_data/025_img.png]
            [1] => [img:http://example.org/_data/025_img.jpg]
        )

    [1] => Array
        (
            [0] => com
            [1] => org
        )

    [2] => Array
        (
            [0] => png
            [1] => jpg
        )

) 
```

好的，这里发生了什么：

1.  正则表达式

`/`- 开始正则表达式
`\[img:http:\/\/`- 每个字符串都必须以`[img:http://`
`[\w]{3,10}`- 比我预期的只有 3 到 10 个数字、字母和下划线行，这将是域名（虽然我不确定域必须包含下划线，所以优化点）
`\.`-点
`(com|org|us){1}`- 其中一个人
`[\w\/]{5,15}`- 从 5 到 15 行作为路径，请注意我在此处添加了 /
`\.`- 点
`(jpg|png|gif){1}`- 其中一个人
`\]`- 模式结束 -
`/i`使其不区分大小写

1.  [preg_match_all](http://us1.php.net/manual/ru/function.preg-match.php)查找给定字符串中的所有匹配项，从分支到括号中的附加子字符串匹配项作为 的第二个和第三个元素`$matches`，我猜不到为什么，所以如果有人能帮助理解这一点，将不胜感激。

2.  接下来使用简单的字符串操作，我可以替换所有主菜

像这样的东西：（注意没有`if`声明，因为我在开头添加了空的 $matches[0]，没有的话生活得更好`ifs`:)）

```
foreach ($matches[0] as $match) {
    $img = str_replace(array('[img:',']'), array('<img src="', '" />'), $match);
    $pstring = str_replace($match, $img, $pstring);
} 
```

您可以使用正则表达式，根据需要使其简单或更复杂。

`$pstring`输出是

```
someting before <img src="http://example.com/_data/025_img.png" />, something after <img src="http://example.org/_data/025_img.jpg" /> and end of the line EOL 
```

这是游乐场[http://phpfiddle.org/main/code/bbu-e24](http://phpfiddle.org/main/code/bbu-e24)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T09:42:51.993

```
<?php
$str = '[img:http://example.com/_data/025_img.jpg]';
$image = '<img src="'.str_replace(array("[img:","]"),"",$str).'" border="0">';
echo $image;?> 
```

# wordpress - 如何在 Wordpress 中限制每个帖子的链接数

> ID：13786264
> 
> 赞同：1
> 
> 时间：2012-12-09T09:30:40.440
> 
> 标签：wordpress, hyperlink, limit

有没有办法限制Wordpress中每个帖子的链接数量？我知道这可以通过一个简单的功能来完成，但我不知道该怎么做。

你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:01:52.317

[你可以试试这里](https://stackoverflow.com/questions/4058737/wordpress-action-hook-pre-publish-post)发布的建议

`<a...></a>`您可以通过与正则表达式匹配来计算标签的数量。

# python - 在 Django 子类中而不是在基类中强制执行唯一外键

> ID：13786270
> 
> 赞同：3
> 
> 时间：2012-12-09T09:33:08.757
> 
> 标签：python, django, django-models

我正在写一个网站来托管一所大学的在线教育材料。我正在使用以下数据模型：

```
class Department(models.Model):
    #snip - remaining fields involve department names, acronyms, etc.

class Course(models.Model):
    department = models.ForeignKey(Department)
    #snip

class Resource(models.Model):
    # generic class for course syllabuses, exams, homework, and other documents
    course = models.ForeignKey(Course)

class Syllabus(Resource):
    #snip - fields for titles, URLs, and the like

class Homework(Resource):
    #snip - similar fields to above

# and other similar subclasses 
```

每个资源子类（教学大纲、家庭作业等）都通过基础 Resource 类中的 Course 外键与一门课程相关联。我想为 Syllabus 子类强制外键的唯一性（即每门课程只允许一个教学大纲），而不是其他子类，并保持类层次结构完整。

我尝试四处寻找解决方案，但我找不到任何看起来很有希望的东西，尽管这可能是我缺乏 Django 经验的阻碍。我将不胜感激任何快速帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:50:24.447

使用这个怎么样：[一对一的关系](https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/ "一对一的关系")

# javascript - 将图像添加到 html5 画布

> ID：13786274
> 
> 赞同：0
> 
> 时间：2012-12-09T09:33:49.503
> 
> 标签：javascript, html5-canvas

我正在尝试将图像添加到我的画布，但它似乎不起作用我已经看过并且看不到我的代码有任何问题，但也许其他人可以。

这是我的 JS 文件。

```
if (window.addEventListener) 
{
    window.addEventListener( 'load', onLoad, false);
}

function onLoad()
{
var canvas;
var context;

function initialise() 
{
    canvas = document.getElementById('canvas'); 

    if (!canvas.getContext)
    { 
        alert('Error: no canvas.getContext!'); 
        return; 
    }

    context = canvas.getContext('2d'); 
    if (!context)
    { 
        alert('Error: failed to getContext!'); 
        return; 
    }

}
}

function draw()
{
    var sun = new Image();
    sun.src = 'images.sun.png';
    context.drawImage(sun, 100, 100);
}

onLoad();
draw(); 
```

这是我的 HTML 也许这将有助于找到问题

```
<!doctype html>
    <html>
        <head>
            <title>Test</title> <script type="text/javascript" src="javascript/canvas.js"></script>
        </head>
        <body>
            <canvas id="canvas" width="800" height="600">
                Your browser does not support the canvas tag
            </canvas>

        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:48:04.087

问题是，您在 onLoad() 中声明了画布和上下文，但尝试在 draw() 中访问它。

因此，通过使它们全局化，问题就解决了：

```
var canvas;
var context;

if (window.addEventListener) {
    window.addEventListener('load', function(){
        onLoad();
    }, false);
}

function onLoad() {
    initialise();
    draw();
}

function initialise() {
    canvas = document.getElementById('canvas');

    if (!canvas.getContext) {
        alert('Error: no canvas.getContext!');
        return;
    }

    context = canvas.getContext('2d');
    if (!context) {
        alert('Error: failed to getContext!');
        return;
    }

}

function draw() {
    var sun = new Image();
    sun.addEventListener('load', function(){
        context.drawImage(sun, 100, 100);
    }, false);
    sun.src = 'http://puu.sh/1yKaY';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:36:37.433

尝试在它的 onload 事件上绘制图像

```
 sun.onload = function() {
    context.drawImage(sun, 100, 100);
 }; 
```

# scala - 具有多个子类型的 Scala 泛型（元组）类型

> ID：13786276
> 
> 赞同：4
> 
> 时间：2012-12-09T09:34:07.287
> 
> 标签：scala, generics, tuples

我正在Scala中编写一个数据结构（基本上是一个哈希图），它将采用一个元组（每次可能有不同数量的参数）并对其进行处理。为了一般地实现这一点，我定义了一个类型：

```
type T <: Tuple1[_] with Tuple2[_,_] with Tuple3[_,_,_] with Tuple4[_,_,_,_] with Tuple5[_,_,_,_,_] 
```

然后是数据结构

```
val map = new HashMap[Int, T] 
```

但这很难看，因为每次我必须在元组中处理更多参数时都必须更改类型。是否有定义通用元组类型？

谢谢，YK

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:05:49.720

第一个解决方案是使用`Product`，正如@om-nom-nom 所说。事实上，它是所有元组中唯一常见的超类型。

```
val map = Map.empty[Int, Product]
map + (2 -> ("a", "b")) 
```

然后使用方法`productArity`，`productElement`并`productIterator`处理返回值。

您还可以使用列表映射（或任何索引集合）。

```
val map = Map.empty[Int, List[_]]
map + (3 -> ("a" :: "b" :: "c" :: Nil))
map + (2 -> List("a", "b")) 
```

最后一个解决方案对用户来说不是那么方便，但至少你确切地知道你处理的是什么集合。您还可以添加一个隐式。

# r - 在数据框中查找第一个非零出现

> ID：13786281
> 
> 赞同：6
> 
> 时间：2012-12-09T09:34:47.647
> 
> 标签：r

我有一个按帐户 ID 进行的销售时间序列。为了计算平均增长，我需要为每个 ID 提取非零销售额的第一个月。由于该帐户可能已在不同时间建立，因此我需要动态识别帐户中第一次销售> 0 的时间。

该行的索引足以让我传递给计算增长的函数。因此，我希望通过帐户 ID 获得以下结果：

```
54 - [1]
87 - [4]
95 - [2]

I tried `apply(df$Sales,2,match,x>0)`  but this doesn't work. 
```

任何指针？或者，有没有更简单的方法来使用这个数据集计算 CAGR？

提前致谢！

```
CalendarMonth   ID  Sales
8/1/2008    54  6692.60274
9/1/2008    54  6476.712329
10/1/2008   54  6692.60274
11/1/2008   54  6476.712329
12/1/2008   54  11098.60822
7/1/2008    87  0
8/1/2008    87  0
9/1/2008    87  0
10/1/2008   87  18617.94155
11/1/2008   87  18017.36279
12/1/2008   87  18617.94155
1/1/2009    87  18617.94155
2/1/2009    87  16816.20527
7/1/2008    95  0
8/1/2008    95  8015.956284
9/1/2008    95  0
10/1/2008   95  8015.956284
11/1/2008   95  6309.447514
12/1/2008   95  6519.762431
1/1/2009    95  6519.762431 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T10:38:13.420

这有帮助吗：

```
tapply(df$Sales, df$ID, function(a)head(which(a>0),1)) 
```

`df`你的数据框在哪里？

如果您想要整行而不只是索引，这可能会有所帮助：

```
lapply(unique(df$ID),function(a) head(subset(df,ID==a & Sales>0),1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T10:36:14.570

这是一个可能的解决方案：

```
res1 <- tapply(df$Sales,INDEX=df$ID,FUN=function(x) which(x > 0)[1])

> res1
54 87 95 
 1  4  2 
```

哪里`res`是带有 的数值向量：

```
> names(res)
[1] "54" "87" "95" 
```

如果要在原始`data.frame`而不是子集中获取行的索引，可以执行以下操作：

```
res2 <- tapply(1:nrow(df),
              INDEX=df$ID,FUN=function(idxs) idxs[df[idxs,'Sales'] > 0][1])

> res2
54 87 95 
 1  9 15 
```

然后，您可以简单地使用 , 中的索引`res2`来子集`data.frame`：

```
df2 <- df[res2,]

> df2 
CalendarMonth   ID      Sales
  8/1/2008      54     6692.603
 10/1/2008      87    18617.942
  8/1/2008      95     8015.956 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:00:26.010

建立在[digEmAll](https://stackoverflow.com/users/316644/digemall)答案上，一个使用[函数](http://stat.ethz.ch/R-manual/R-patched/library/base/html/funprog.html)式编程的解决方案（可能更简洁）：

```
> res3 <- tapply(
  1:nrow(df)
  , df$ID
  , function(Idx) Idx[Position(function(x) df[x, "Sales"] > 0, Idx)]
)
> identical(res3, res2)
[1] TRUE 
```

# android - 使用 Phonegap 应用程序捆绑文件

> ID：13786286
> 
> 赞同：0
> 
> 时间：2012-12-09T09:35:35.450
> 
> 标签：android, ios, xml, file, cordova

我正在使用 Phonegap 开发我的应用程序。我使用 Backbone.js 来实现我的逻辑。我从服务器获取 XML 文件并在我的应用程序中使用数据。这是负责它的代码：

```
var CategoryCollection = Backbone.Collection.extend({
  url:'http://www.someServer/someFile.xml',
  fetch: function(options) {
    options || (options = {});
    options.dataType = 'xml';
    Backbone.Collection.prototype.fetch.call(this, options);
  },
  parse: function(data) {
    return $(data).find('someTag').map(function() {
      return {
        code:$(this).attr('code'),
        title : $(this).attr('title'),
        value : innerHtml
      };
    }).get();
  }
}); 
```

但是，我需要找到一种方法，让这些 XML 数据在安装时在本地可用，而不需要 Internet 连接。这是一款为游客准备的应用程序，他们可以在家时下载该应用程序，但只能在他们不在家时运行它，而无法访问互联网。

所以我想使用[PhoneGap File API](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#LocalFileSystem)，但我很难理解它是如何工作的，以及我可以在哪里放置文件以便在应用程序第一次运行时访问它们。

此外，如果用户有互联网并且应用程序检测到服务器具有更新版本的 XML 文件，我希望应用程序更新本地存储的 XML。

我对这个问题的任何解决方案持开放态度，例如`localStorage`或其他。

我真的很感激一些建议！

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:41:28.767

您应该能够将 xml 文件拖放到 phonegap 应用程序的 assets 文件夹中并访问它，就像您使用相对路径（即：`someFile.xml`而不是`http://www.someServer/someFile.xml`）访问任何 Web 资产一样。

# jquery - jQuery绑定事件链接失败

> ID：13786290
> 
> 赞同：1
> 
> 时间：2012-12-09T09:36:19.143
> 
> 标签：jquery

我有这个 jquery 代码：

```
$(document).ready(function(){
$('a').bind('click', false);
var url;
$('a').on('click',function(e){
    url=$(this).attr('href'); //;
    $('#AjaxPage').load(url+" .AjaxContent");
}); 
```

});

问题是点击事件第一次起作用..但是在从加载函数加载的内容上，那里的链接没有我绑定的点击事件..这是为什么？我以为你会像使用“live”一样使用“on”

**更新：**

现在我的加载函数没有被执行：

```
 $(document).ready(function(){

$('a').bind('click', false);
    var url;

$(document).on('click', 'a',function(){
        url=$(this).attr('href'); //;
        $('#AjaxPage').load(url+" .AjaxContent");
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:37:41.777

代替

```
$('a').on('click', function(e){ 
```

和

```
$(document).on('click', 'a', function(e){ // replace document with a more precise selector if available 
```

与`live`,`on`将处理 jQuery 集合中的事件并将事件委托给验证提供的选择器的目标。jQuery 集合必须是非空的。当然，它可以比 更精确`document`，但必须是您要添加的元素的父元素，并且您希望在该元素上拦截事件。

# scala - 在scala中交换位置列表

> ID：13786297
> 
> 赞同：3
> 
> 时间：2012-12-09T09:37:03.783
> 
> 标签：scala

我有一个不可变的列表，我需要在其中交换位置。有什么简单的方法吗？

下面是我的代码：

```
def swap(i:Int, j:Int,li:List[T]):List[T]={
        if(i>=li.size && j >=li.size)
            throw new Error("invalie argument");

        val f = li(i)
        li(i) = li(j) //wont work
        li(j) = f;//wont work
        li;
    } 
```

最初，我尝试将其转换为数组，更改位置，然后再次将其转换为列表。有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-09T10:20:39.217

这样做的一个简单（但不是非常有效的方法）是

```
val l = List(1,2,3)
l: List[Int] = List(1, 2, 3)

l.updated(0,l(2)).updated(2,l(0))
res1: List[Int] = List(3, 2, 1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T10:07:00.423

您只能在 中创建一个新列表`O(n)`。您可能想要使用不同的数据结构。你可以这样做：

```
def swap[T](i:Int, j:Int,li:List[T]):List[T]={
    if(i>=li.size || j >=li.size || i >= j)
         throw new Error("invalid argument")

    li.dropRight(li.length - i) ::: (li(j) :: li.dropRight(li.length - j).drop(i+1)) ::: ((li(i) :: li.drop(j + 1)))
} 
```

它不是很优雅，但它会完成这项工作。基本上，我在索引`i`&上对列表进行切片`j`，所以我有 5 个部分：之前列表的前缀`i`、 、 &`i`之间的部分排他性 、以及之后列表的后缀。从那里，它是与&交换的简单连接。如果您使用列表缓冲区，它可能会更有效，如果您将在可变的 s 上工作，则效率会更高...`i``j``j``j``i``j``Array`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-19T07:40:21.730

您可能想要尝试的一件事（取决于应用程序，例如您是否经常更新某个点等...）是使用“拉链”，见下文。您可能想要添加一个“moveTo”方法或类似方法。如果处理不可变列表，您可能会有更少的更新。我认为上面的简单解决方案可能最适合小型列表。

编辑：如果你知道你正在追逐彼此靠近的元素等，可能可以进行调整。

```
case class Zipper[A](focus: A, left: List[A], right: List[A]) {

  def fromZipper: List[A] = left ::: List(focus) ::: right

  /** Will throw NoSuchElementException if try to move beyond start. */

  /** directions are forward and backward across the list. */
  def moveForward: Zipper[A] = Zipper(right.head,left :+ focus,right.tail)
  def moveBackward: Zipper[A] = Zipper(left.last,left.init,focus :: right)

  /** Update the focus element. */
  def update(a: A): Zipper[A] = Zipper(a,left,right)
}

def apply[A](left: List[A], focus: A, right: List[A]): Zipper[A]
  = Zipper(focus,left,right)

def apply[A](xs: List[A]): Zipper[A]
    = Zipper(xs.head,List.empty[A],xs.tail) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T21:53:54.853

我不确定这是否是这样做的好方法，但我这样的事情怎么样？

```
def swapElements(list: List[Any], first: Int, second: Int) = {
 def elementForIndex(index: Int, element: Any) = {
   if(index == first) {
     list(second)
   } else if(index == second){
     list(first)
   } else {
     element
   }
 }

 for(element <- ((0 to list.size - 1) zip list).to[List])
   yield elementForIndex(element._1, element._2)
} 
```

# java - java中比较器中super的使用

> ID：13786298
> 
> 赞同：13
> 
> 时间：2012-12-09T09:37:12.940
> 
> 标签：java, comparator

我明白在

```
Comparator < ? super T> comp 
```

它根据指定比较器定义的顺序返回给定集合的最大元素。但我不明白的目的

> 超级T

谁能解释一下？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-09T09:39:59.630

该术语的`? super T`意思是“未知类型，它是 T 的超类，或者是 T 的超类”，在泛型的说法中，它的下限是 T。

使用此签名是因为 T 可以分配给任何类型为 T 或 T 超类的变量并与之进行比较。即，如果 Comparator 可以在其 compare() 方法中接受 T 的超类，则可以传入一个T。

这遵循 PECS 助记符：“Producer Extends，Consumer Super”，这意味着事物的生产者应该使用具有*上限的事物（？扩展 T），而消费者（如**使用*事物的比较器实现）应该使用*下限*（ ?超T）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T09:39:01.617

在这里`< ? super T>`意味着*泛型*- 不是比较。

这意味着你有`Comparator`一个泛型类型（~~扩展~~`? super T`的东西是超类型的），如[this thread中所述](https://stackoverflow.com/q/3847162/572670)~~`T`~~

 ~~`comp`是变量名（绑定）。

所以基本上这里`Comparator < ? super T>`是一个*类型*并且`comp`是一个*标识符*（变量名），即类型`Comparator <? super T>`

* * *

更多信息：[Java 泛型](https://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-11-09T13:50:44.227

让我们以[TreeSet 的一个构造函数](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html#%3Cinit%3E(java.util.Comparator))的类型为例：

```
TreeSet(Comparator<? super E> comparator) 
```

想象这`E`是一个字符串，所以我们在心理上特化了构造函数：

```
TreeSet(Comparator<? super String> comparator) 
```

我可以这样实例化`TreeSet`：

```
var mySet = new TreeSet<String>(myStringComparator); 
```

在这里，`myStringComparator`可能看起来像这样。

```
Comparator<String> myStringComparator = new Comparator<>() {
    @Override
    public int compare(String o1, String o2) {
        return 0;
    }
}; 
```

的`<? super String>`部分`TreeSet(Comparator<? super String> comparator)`还允许我们为构造函数提供一个比较**超**类型字符串的比较器。您可能会说这是一个更通用、更不具体的比较器。

例如，[`CharSequence`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/CharSequence.html)是 String 的超类型，这也是它起作用的原因：

```
Comparator<CharSequence> myCharSeqComparator = new Comparator<>() {
    @Override
    public int compare(CharSequence o1, CharSequence o2) {
        return 0;
    }
};

var mySet2 = new TreeSet<String>(myCharSeqComparator); 
```

假设， if`TreeSet`的构造函数是这样定义的：

```
TreeSet(Comparator<E> comparator) 
```

在我们的示例中专门针对

```
TreeSet(Comparator<String> comparator) 
```

我们**只能**提供`Comparator<String>`，但不能`Comparator<CharSequence>`或`Comparator<Object>`。

这将是一个遗憾，因为我们可能想要使用更通用的比较器，这些比较器不需要 String 的细节来进行比较。~~

# java - 无法从列表中删除对象

> ID：13786303
> 
> 赞同：0
> 
> 时间：2012-12-09T09:38:07.373
> 
> 标签：java, android, list

我有一个gridview，当一个项目被点击时。它将遍历一个列表，当它匹配一个字符串时它应该从列表中删除一个对象。到目前为止，这是我的代码，但它不起作用。我不知道出了什么问题。请帮忙。

```
gridView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
    {
         String sel_id = list2.get(arg2).stud_id.toString();

         for(int i=0; i<late_list.size(); i++)
         {
             if(late_list.get(i).stud_id.toString() == sel_id.toString())
             {
                 late_list.remove(i);
             }
         }
     }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:39:11.133

不要将 String 与 进行比较`==`，请使用`equals()`

`==`检查操作数是否引用相同的对象实例（仅检查原始类型的相同值）

`equals()`检查相同的对象内容（对于覆盖该`equals`方法的类，`String`当然会）。

因此，您的`if`条件必须是

```
if (late_list.get(i).stud_id.toString().equals(sel_id)) 
```

此外，没有必要调用`toString()`一个`String`对象，就像你在`sel_id`

如果你`stud_id`的`String`也是，你可以写

```
if (late_list.get(i).stud_id.equals(sel_id)) 
```

# vb.net - 在VB中的一位数天前添加零

> ID：13786304
> 
> 赞同：3
> 
> 时间：2012-12-09T09:38:23.920
> 
> 标签：vb.net

我在visual basic中有以下代码显示日/月/年

```
CStr(vDay) & "/" & (vMonth) & "/" & (vYear) & " " & (vHour) & ":" & (vMinute) & ":" &     (vSecond), DateTime.Now 
```

如何在单个数字日期和月份前面添加“0”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T09:46:15.067

如果您的变量是整数，您可以使用“D”格式说明符来设置您想要的位数，例如：

```
vMonth.ToString("D2") 
```

但是，如果您已经在`Date`对象中有值，那么您可以使用它的内置格式，这会更容易：

```
DateTime.Now.ToString("dd/MM/yyyy HH:mm:ss") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-12T14:29:43.973

考虑到所有情况，PadLeft 是最有帮助的。第一部分设置整数的总宽度，第二部分是要放置在那里的字符。

```
vMonth.ToString().PadLeft(2, "0"c) 
```

这将在个位数月份前面放置一个零。

# jquery - sjquery 滚动+动画

> ID：13786308
> 
> 赞同：0
> 
> 时间：2012-12-09T09:39:11.277
> 
> 标签：jquery

我有 jQuery 垂直滚动的问题。

我必须在这个例子中添加一些动画：

```
$(document).ready(function() {
    var timeoutId = 0;

    function scrollIt(amount) {
        $('#scroller').scrollTop($('#scroller').scrollTop()+amount);
    }

    $('#down').mousedown(function () {
        timeoutId = setTimeout(scrollIt(5), 1000);
    }).bind('mouseleave', function () {
        clearTimeout(timeoutId);
    });

    $('#up').mousedown(function () {
        timeoutId = setTimeout(scrollIt(-5), 1000);
    }).bind('mouseleave', function() {
        clearTimeout(timeoutId);
    });
}); 
```

这是一个小提琴：http: [//jsfiddle.net/TPKDG/1/](http://jsfiddle.net/TPKDG/1/)

我不知道怎么做:(

我必须在哪里添加 .animation()？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:06:40.190

请查看此更新是否对您有帮助：http: [//jsfiddle.net/TPKDG/27/](http://jsfiddle.net/TPKDG/27/)

```
$(document).ready(function() {
var timeoutId = 0;

function scrollIt(amount) {
    $('#scroller').animate({
        scrollTop: $('#scroller').scrollTop() + amount
    });
}

$('#down').mousedown(function() {
    timeoutId = setTimeout(scrollIt(5), 1000);
}).bind('mouseleave', function() {
    clearTimeout(timeoutId);
});

$('#up').mousedown(function() {
    timeoutId = setTimeout(scrollIt(-5), 1000);
}).bind('mouseleave', function() {
    clearTimeout(timeoutId);
});
});​ 
```

# input - 以十六进制输入一行数字

> ID：13786311
> 
> 赞同：0
> 
> 时间：2012-12-09T09:39:31.603
> 
> 标签：input, binary, bit-manipulation, hex

我有两行十六进制二进制数要输入，然后在行上进行位操作。我这样做了：-

```
int main()
{

  vector < char > v1;
  vector < char > v2;
  char c;
  int i = 0;
  int j = 0;
  while((c = cin.get()) != ' ' || c!= '\0' || c!= '\n')
  {
    cin.putback(c);
    cin >> hex >> c;
    v1.push_back(0);
    v1[i] = v1[i] | c;
    i++;
  }

  while((c = cin.get()) != ' ' || c!= '\0' || c!= '\n')
  {
    cin.putback(c);
    cin >> hex >> c;
    v2.push_back(0);
    v2[j] = v1[j] | c;
    j++;
  }

  for(int i = 0; i < v1.size(); i++)
  cout << hex << v1[i]; //this I wrote to check whether I was doing the right thing

  return 0;
} 
```

我提供了输入：-

```
eaa8b5f8aaf9174145bf43e1784b
bafa3ed18510abd11f4564e32133 
```

但是，当我编译时没有输出，因为我使用的是在线编译器，它说超出了时间限制，我认为这是段错误的迹象。

编辑：我认为如果我使用充当整数但为 1 字节的数据类型，我的问题将得到解决

# c# - 是否可以在事件处理程序中关闭表单，其中事件处理程序在一个类中？

> ID：13786314
> 
> 赞同：1
> 
> 时间：2012-12-09T09:39:46.093
> 
> 标签：c#, forms, class, event-handling

我还在学习OOP。我目前正在尝试制作一个电影售票亭，您可以在其中单击您喜欢的电影海报的按钮。Form1 是显示三个按钮的主菜单窗体，分别命名为movibutton1、movibutton2、movibutton3。所以基本上我想在单击其中一个按钮时隐藏 Form1，但按钮的事件处理程序位于另一个类中。我希望事件处理程序留在课堂上。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        buttonPosters();
    }
    private void buttonPosters()
    {
        derClassForForm1 classForm1 = new derClassForForm1();
        moviButton1.Click += new EventHandler(classForm1.movPosterClicked);
        moviButton2.Click += new EventHandler(classForm1.movPosterClicked);
        moviButton3.Click += new EventHandler(classForm1.movPosterClicked);
    }
}

public class derClassForForm1
{
    public void movPosterClicked(object sender, EventArgs e)
    {
        Button posterClick = (Button)sender;
        if (posterClick.Name.Equals("moviButton1"))
        {
            Mov1 movie = new Mov1();
            Form2 movPoster = new Form2(movie.movTitle(), movie.movSynop(),   movie.movImagesrc());
            movPoster.Show();
        }
        else if (posterClick.Name.Equals("moviButton2"))
        {
            Mov2 movie = new Mov2();
            Form2 movPoster = new Form2(movie.movTitle(), movie.movSynop(), movie.movImagesrc());
            movPoster.Show();
        }
        else if (posterClick.Name.Equals("moviButton3"))
        {
            Mov3 movie = new Mov3();
            Form2 movPoster = new Form2(movie.movTitle(), movie.movSynop(), movie.movImagesrc());
            movPoster.Show();
        }

        //wanted to have like a form.hide() here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:45:53.360

您可以像这样向您的类添加公共属性`derClassForForm1`：

```
public Form ParentForm {get; set;} 
```

然后你可以在方法中修改你的代码`buttonPosters`：

```
private void buttonPosters()
{
    derClassForForm1 classForm1 = new derClassForForm1();
    classForm1.ParentForm = this;
    moviButton1.Click += new EventHandler(classForm1.movPosterClicked);
    moviButton2.Click += new EventHandler(classForm1.movPosterClicked);
    moviButton3.Click += new EventHandler(classForm1.movPosterClicked);
} 
```

这将使您能够在结尾处编写类似这样的内容`movPosterClicked`：

```
if(this.ParentForm != null)
{
     this.ParentForm.Hide();
} 
```

# string - 同时替换字符串中的字符串

> ID：13786315
> 
> 赞同：0
> 
> 时间：2012-12-09T09:39:53.140
> 
> 标签：string, recursion

我需要递归地添加到字符串以使用 Lindenmayer 系统构建分形。无论如何，基本上我从String =“A”开始，每次我递归（即我从0深度开始并执行该过程的次数与深度相等）

我将“A”的每个实例更改为“BrArB”，将每个 B 更改为“AlBlA”。问题是，每次我做其中一个时，它都会增加另一个所做的，并搞砸算法。

我从“A”开始......应该去“BrArB”......然后应该有“AlBlArBrArBrAlBlA”

但在第三步中，我得到的比我应该得到的要多得多。

有什么建议么？如果我能同时做这两件事，问题就迎刃而解了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:21:58.710

尝试使用地图：

```
grammar = {'A': 'BrArB', 'B': 'AlBlA'}

# number of rule substitutions
times = 8

# the starting point
axiom = 'A'

for n in xrange(times)
    axiom = sum( (list(grammar[c]) if c in grammar else [c] for c in axiom), [] )

axiom = ''.join(axiom) 
```

最后，您可能希望通过使用过滤器消除每个非终端符号：

终端 = 'lrf'

axiom = ''.join(c for c in axiom if c in TERMINALS)

希望能帮助到你！

# model-view-controller - Knockout Js 字典显示 MVC

> ID：13786316
> 
> 赞同：7
> 
> 时间：2012-12-09T09:39:56.940
> 
> 标签：model-view-controller, asp.net-mvc-4, knockout.js, knockout-2.0, knockout-mvc

我被困在我认为非常基本的事情上，因此我需要一些专业知识来帮助我完成这项任务。

我有一个字典，它以整数和字符串作为值来存储结果列表（我将在下面显示）。我的视图模型和控制器有这个代码，将数据作为 JSON 字符串发布到 Knockout：

[ViewModel 代码]

```
public class ResultModel
{
    public Dictionary<int, string> dictResult { get; set; }
    public string dictResultJson { get; set; }

    public ResultModel()
    {
        dictResult = new Dictionary<int, string>();
    }
} 
```

[cshtml文件的代码]

```
<h2>Results</h2>
<table>
    <tbody data-bind="template: { name: 'tblResult', foreach: dictResultJson() }"></tbody>
</table>

<script id="tblResult" type="text/html">
    <tr>
        <td data-bind="value: key"></td>
        <td data-bind="value: value"></td>
    </tr>
</script>

<script type="text/javascript">
    var ResultModel = function(m) {
        var self = this;
        self.dictResultJson = ko.observableArray(mapDictionaryToArray(m.DictJson));
    };

    function mapDictionaryToArray(dictionary) {
        var result = [];
        for (var key in dictionary) {
            if (dictionary.hasOwnProperty(key)) {
                result.push({ key: key, value: dictionary[key] }); 
            }  
        }

        return result;
    }

    var data = @(Html.Raw(Json.Encode(Model)));
    var dataFromServer = ko.utils.parseJson(data.dictResultJson);
    console.log(dataFromServer);  

    ko.applyBindings(new ResultModel(dataFromServer));
    console.log("apply binding");
</script> 
```

在我的 cshtml 文件中，我正在解析从 MVC 控制器返回的对象并将其转换为数组。现在的问题是它没有显示任何数据，但变量 dataFromServer 包含正确的数据。它有这些数据：

对象 {1：“凯特”，3：“亚历克斯”，4：“简”}

现在，我应该如何循环这个 json Result 以便以表格格式显示它，例如

桌子

1 凯特

3 亚历克斯

4简

提前致谢

杰斯蒙德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:05:02.203

如果要将表中的值显示为文本，则需要使用[文本绑定](http://knockoutjs.com/documentation/text-binding.html)而不是`value`

```
<tr>
    <td data-bind="text: key"></td>
    <td data-bind="text: value"></td>
</tr> 
```

您的代码还有另一个问题。当您调用时`new ResultModel(dataFromServer)`，`dataFromServer`它已经包含正确格式的数据。所以你不需要`m.DictJson`在`ResultModel`函数中：

```
var ResultModel = function(m) {
        var self = this;
        self.dictResultJson = ko.observableArray(mapDictionaryToArray(m));
}; 
```

# ruby-on-rails - Rails：使用默认 CookieStore 的会话消息摘要在哪里

> ID：13786320
> 
> 赞同：1
> 
> 时间：2012-12-09T09:40:05.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, cookies

根据[这个问题](https://stackoverflow.com/questions/10353861/security-of-rails-authentication-with-sessionuser-id)，会话可以由用户编辑。但是[这个答案](https://stackoverflow.com/a/10355540/1066668)表明存储用户 ID 是安全的。

来自[Rails 文档](http://apidock.com/rails/ActionDispatch/Session/CookieStore)

> cookie 中包含消息摘要以确保数据完整性：用户无法在不知道哈希中包含的密钥的情况下更改其 user_id

由于`<%= debug(session) %>`嵌入了我的页面和 Chrome 的开发者工具中的会话值，我无法在会话 cookie 中找到消息摘要。如果我以用户 A 的身份登录，然后以用户 B 的身份登录，则会话 cookie 将保持相同的异常`user_id`值。

那么**消息摘要**在哪里或者我需要一些配置？自动生成的 secret_token 存在于`config/initializers/secret_token.rb`. 它是否存储在服务器的内存中并在每个请求上散列会话值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:22:23.627

消息摘要是 cookie 值的一部分。它不是您在会话中获得的数据的一部分。

如果您检查 chrome 中的原始 cookie 值，您可以看到它 - 摘要与有效负载之间用“--”分隔

# java - 包含for循环返回语句问题的递归方法

> ID：13786323
> 
> 赞同：1
> 
> 时间：2012-12-09T09:40:15.997
> 
> 标签：java, recursion, for-loop, return

这是一个家庭作业。作业不是递归的，而是树结构的。我几乎完成了任务，但是我向后移动一棵树的递归方法中断了。树结构由以下类给出：

```
package lab12;

import java.io.Serializable;

public class Dog implements Serializable{

    public Dog[] children;
    public String name;

    public Dog(String name)
    {
        this.name = name;
    }

    @Override
    public String toString()
    {
        return name;
    }

} 
```

我很确定原因是返回 null；结合我的 for 循环的语句。for 循环遍历不包含任何子节点的节点，结果返回 null。这结束了该方法并将 null 传回给我的程序，这给了我空指针异常。

我无法删除 return null 语句，否则它不会编译，即使它会使用 for 循环 100% 返回。

```
public Dog findParent(Dog root, String name)
{
    String top = "Spot";
    if(top.equals(name))
    {
        System.out.println("No further records");
        System.out.println("Goodbye.");
        System.exit(0);
    }
    for(int i = 0; root.children != null && i < root.children.length; i++)
    {
        if(root.children[i].name.equals(name))
        {
            return root;
        }
        else
        {
            return findParent(root.children[i], name);
        }
    }
    return null; //Compiler still requires a return here.
} 
```

I feel like this has to be a common problem with using for loops in non-void recursive methods. Is there a way to make the compiler happy and yet not have the extra return null statement?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:49:19.343

Your code must not work. Because both if and else clauses will return. That causes the loop only do index 0\. You should change your code like the following:

```
public Dog findParent(Dog root, String name)
{
    String top = "Spot";
    if(top.equals(name))
    {
        System.out.println("No further records");
        System.out.println("Goodbye.");
        System.exit(0);
    }
    for(int i = 0; root.children != null && i < root.children.length; i++)
    {
        if(root.children[i].name.equals(name))
        {
            return root;
        }
        else
        {
            Dog parent = findParent(root.children[i], name);
            if (parent != null) 
                 return parent;
        }
    }
    return null;
} 
```

Now, you can see that the last "return null" is necessary.

In most of case, compiler is smart. If it gives your warnings, you should consider what's error with your code instead just cheat compiler to avoid warning.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T09:46:26.397

Without understanding this problem entirely, I see no reason for the "return null" statement to never execute. Perhaps you else statement should be:

```
return findParent(root.children[i], name); 
```

This return will ensure that once the "parent" is found its value will be returned.

# php - Twitter API 抱怨基本身份验证，但我使用的是 OAuth

> ID：13786338
> 
> 赞同：1
> 
> 时间：2012-12-09T09:42:31.730
> 
> 标签：php, twitter

我正在创建一个使用 Twitter API 的网络应用程序。我使用 EpiTwitter 库和 OAuth 身份验证，但是不时地，我会随机收到这个奇怪的错误：

> [{"code":53,"message":"不支持基本认证"}]

首先，我认为我的 API 请求用完了，但我仍然有 190+ 个。你可以帮帮我吗？

# php - MySQL ROLLBACK 并与 PHP 一起使用

> ID：13786339
> 
> 赞同：1
> 
> 时间：2012-12-09T09:42:41.193
> 
> 标签：php, mysql, transactions

```
START TRANSACTION;
SELECT @A:=SUM(salary) FROM table1 WHERE type=1 FOR UPDATE;
UPDATE table2 SET summary=@A WHERE type=1;
COMMIT; 
```

我直接从 MySQL 官方文档中获取了这个查询，我想知道某些方面（我自己添加了 FOR UPDATE）。假设有另一个用户已经锁定了记录。在这种情况下，更新应该会失败。如果发生这种情况，我肯定希望有一种方法可以向我的用户显示一个消息框，该消息框将提醒用户记录上有锁。我怎样才能将这些信息返回到 PHP 中？这个查询不会默认回滚，还是我特别需要添加 ROLLBACK？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:52:43.307

**您必须将autocommit**变量的值重置为**OFF / 0 / FALSE**。试试这个：

```
SET SESSION autocommit = 0;
START TRANSACTION;
SELECT @A:=SUM(salary) FROM table1 WHERE type=1 FOR UPDATE;
UPDATE table2 SET summary=@A WHERE type=1;
COMMIT; 
```

# oracle11g - Oracle 不可用 ora-01034

> ID：13786346
> 
> 赞同：4
> 
> 时间：2012-12-09T09:43:45.910
> 
> 标签：oracle11g, sqlplus

我正在尝试创建与 oracle sqlplus 连接。当我登录时：

```
User: sys as sysdba
Pass: 
```

它说连接到一个空闲实例。

当我尝试创建一个表时，它给出了错误

```
ORA-01034: Oracle not available
Process ID: 0
Session ID: 0 Serial number: 0 
```

为什么不创建表？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T09:54:40.387

首先 - 也是最重要的：

### 仅将 SYS 帐户用于 DBA 工作。*永远不要*将它用于“常规”工作（例如创建表格） - 为此使用专用的常规用户帐户。

其次：“ *connected to an idle instance* ”表示Oracle没有启动。因此，由于您已经以 sysdba 身份连接（同样：您应该***只***为 DBA 任务执行此操作），您需要使用命令启动 Oracle

```
startup 
```

在 SQL*Plus 中。

然后注销，使用普通用户登录并创建您的表。

详情见手册：

*   [启动命令](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve045.htm#i2699631)
*   [管理员指南](http://docs.oracle.com/cd/E11882_01/server.112/e25494/start001.htm)

# php - PHP 数组和 html 表单

> ID：13786350
> 
> 赞同：-1
> 
> 时间：2012-12-09T09:44:14.863
> 
> 标签：php, html

我正在尝试制作一个脚本，该脚本将从字符列表中获取随机变量。我`+ &`之前的每封信。这是我到目前为止想出的

```
<form action="#" method="post">
  <input type="text" name="text">
  <input type="submit" name="submit">
</form>

<?php
  if (isset($_POST['submit'])) {
    $str = $_POST["text"];

    $arr1 = str_split($str);

   foreach ($arr1 as $value)
   {
     $length = 1; 
     $chars = '46eab95'; 
     $charslength = strlen($chars); 
     $randomstring = ''; 
     for ($i = 0; $i < $length; $i++) $randomstring .= substr($chars, rand(0, $charslength - 1), 1); 
       echo $randomstring;  
       echo "&" . $randomstring . $value;
     }
   }
?> 
```

但它只是搞砸了，无法工作，例如，当我试图让它做时，你好，结果是这样的： `6&6h4&4e4&4l6&6l5&5o`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:49:40.930

稍微改写一下——这对你有用吗？

```
<?php
$str = "hello";
$arr1 = str_split($str);

foreach ($arr1 as $value)
{
    $chars = '46eab95'; 
    $chars = str_split($chars);

    $randomstring = ''; 
    foreach ($arr1 as $char)
    {
        $randomstring .= "&" . $chars[array_rand($chars)] . $char;
    }
}

echo $randomstring; //&bh&ee&4l&9l&eo 
```

# c++ - 模板类中新结构的 C++ 语法

> ID：13786353
> 
> 赞同：0
> 
> 时间：2012-12-09T09:44:37.057
> 
> 标签：c++, class, templates, struct

我在成员函数定义中遇到了一些代码问题。

来自 .h 文件：

```
//This is a private type
struct node {
node   *next;
node   *prev;
T      *o;
}; 
```

从 .cpp 文件产生错误的代码：

```
template <typename T>
void Dlist<T>::function(T *o)
{
node newV = new node;
....
} 
```

我认为这是声明结构的正确语法，但我得到了“节点未在此范围内声明”错误。

然后我尝试了：

```
Dlist<T>::node *victim; 
```

我得到一个“newV is not declared in this scope”错误，这让我更加困惑，因为该行本身就是一个声明。

我将 .cpp 包含在 .h 文件中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:56:28.993

`new X`返回指向 an 的指针`X`，因此您需要将调用的结果分配`new node`给 a `node*`，而不是 a `node`：

```
template <typename T>
void Dlist<T>::function(T *o)
{
  node* newV = new node;
....
} 
```

[请参阅此处](http://ideone.com/PthbQW)的示例。

请注意，使用指向动态分配对象的原始指针非常棘手，并且必然会导致内存管理错误。我建议使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)或自动分配的变量（非指针）。

```
struct node {
  std::unique_ptr<node>   next;
  std::unique_ptr<node>   prev;
  std::unique_ptr<T>      o;
}; 
```

# c# - 该进程无法访问文件“.mdf”，因为它正被另一个进程使用

> ID：13786362
> 
> 赞同：6
> 
> 时间：2012-12-09T09:46:16.097
> 
> 标签：c#, sql-server-2008, asp.net-mvc-3, sql-server-2008-r2

我将 ASP.NET 动态数据 Web 模板与 SQL Server 2008 数据库一起使用，当我尝试在其中添加`.mdf`文件时，`App_Data`我得到

> *该文件无法打开，因为它正被另一个进程使用。请关闭所有可能访问此文件的应用程序，然后重试*

我尝试找到解决方案，但它非常不同

> 嗨，Ken，这是因为您正在尝试将您的数据库添加到项目中（即复制到那里）而不是连接到它，连接添加一个实体框架数据模型，然后选择您的数据库，一切都应该顺利。
> 
> 如果您真的想在 App_Data 文件夹中拥有数据库，那么您将需要：
> 
> 在本地和 Web 服务器上安装 SQL Server Express。暂时停止 SQL Server 以便可以访问数据库，然后将其复制到 App_Data 文件夹。

或者

> 1.  转到 SQL Server 配置工具并停止 SqlserverExpress 服务。
>     
>     
> 2.  在解决方案资源管理器中，右键单击项目添加现有项。，转到程序文件并在其中搜索所需`.mdf`的文件，将其添加到项目中。
>     
>     
> 3.  Goto SQL Server 配置工具启动 Sqlexpress 服务。
>     
>     
> 4.  运行您的解决方案。

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-01T12:41:17.537

查找正在使用该文件的进程的最简单方法是：

1.  运行“resmon”。（使用windows搜索查找程序）
2.  在第二个选项卡内的搜索栏中输入名称 + 扩展名
3.  结果将是使用该文件的进程。

（是的，我知道这是一个老问题）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T09:51:15.533

如果您在使用 Sql Management Studio 或 Visual Studio xx 之前访问过此 mdf 文件。然后请关闭运行此 mdf 文件的 Sql Server，我的意思是，您必须停止 Sql Server 服务，然后将 mdf 文件从其位置复制到所需位置。

复制完之后就可以很好的重启Sql Server了。

# compiler-construction - 使用ANTLR语法识别不同的函数（函数可能有相同的起始项但中间有关键字）

> ID：13786368
> 
> 赞同：1
> 
> 时间：2012-12-09T09:47:06.813
> 
> 标签：compiler-construction, antlr, antlr3, antlr4

我只是遇到了一件令人头疼的事情..

我尝试将语句拆分为不同的函数，就像我有一个示例语句

```
start
 n turnTo 's'.
 n terminate.
end 
```

两个语句都以 'n' 开头，目前我正在写

```
statement 
    :
    (turnTo_statment|terminate_statment)*
    ;

turnTo_statment
    :
    variable 'turnTo' '\'' value '\'' '.'
    ;

terminate_statment
    :
    variable 'terminate' '.'
    ; 
```

但是当词法分析器运行时，它无法确定哪个是哪个，因为两个子状态都以相同的东西'n'开头，编译器可以选择使用规则。如果下一个字符串与编译器使用的第一个规则不匹配，那么它将自动抛出一个不匹配的错误。

如果我遇到“x turnTo y”，我如何识别并告诉 ANTLR，然后使用规则 turnTo_statment，如果我遇到“x terminate”。然后使用规则 terminate_statment..

即在antlr中是否有任何功能可以做到这一点..

```
statement 
    :
    ((if statement contain_keywords 'turnTO') -> turnTo_statment
    |
    (if statement contain_keywords 'terminate') ->terminate_statment)*
    ; 
```

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:35:21.927

首先，不要在解析器规则中使用“文字”。如果没有大量的 ANTLR 经验，这会给你带来麻烦。创建真正的词法分析器规则：

```
TURNTO: 'turnTo'; 
```

现在，您可能需要通读 ANTLR wiki 上的教程并研究可下载的示例并确保您理解它们。写出好的语法似乎很容易，因为语法语言学起来很简单，但实际上它需要相当多的知识。首先要意识到的是，词法分析器不了解解析器——它只是对输入流进行标记并将这些标记传递给解析器——因此词法分析器模式不能模棱两可——解析器规则可以处理潜在的差异。

ANTLR 可能无需将其转换为 LL(1) 即可处理您的语法，因为 ANTLR 可以处理 LL(k) 并且通常无需您的帮助即可计算出 k 是什么。这是你的全部语法吗？但是，无论如何，最好保留因素：

```
statement: var ( TURNTO {etc} | TERMINATE DOT ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T13:02:37.890

您的语法不是 LL(1) 语法（因为，正如您所注意到的，`first(turnTo_statment) = first(terminate_statment)`）。[但是，您可以通过左分解](http://en.wikipedia.org/wiki/LL_parser#LL.281.29_Conflicts)将其转换为 LL(1) 语法：

```
statement -> var_stmt statement
var_stmt -> variable turnto_stmt | variable terminate_stmt
turnto_stmt -> "turnTo" value
terminate_stmt -> "terminate." 
```

我对ANTLR了解不多，但这是处理这类冲突的传统方式。

# xamarin.android - Mono for Android - 从联系人获取电话号码

> ID：13786379
> 
> 赞同：1
> 
> 时间：2012-12-09T09:50:04.003
> 
> 标签：xamarin.android, contacts

我需要从联系人中获取联系人姓名和电话号码，并将它们放在两个列表中。使用下面的代码，我可以获得联系人姓名。但是我怎样才能得到电话号码呢？

```
 List<string> contactNames = new List<string>();
        List<string> contactNumbers = new List<string>();             

        Android.Net.Uri uri = ContactsContract.Contacts.ContentUri;

        String[] projection = new String[] {
            BaseColumnsConsts.Id,
            ContactsContract.ContactsColumnsConsts.DisplayName
        };

        String selection = string.Format("{0} = '{1}'", ContactsContract.ContactsColumnsConsts.InVisibleGroup, show_invisible ? "0" : "1");
        String[] selectionArgs = null;
        String sortOrder = string.Format("{0} COLLATE LOCALIZED ASC", ContactsContract.ContactsColumnsConsts.DisplayName);

        ICursor cursor = ManagedQuery(uri, projection, selection, selectionArgs, sortOrder);            

        if (cursor.MoveToFirst()){

            do
            {
                contactNames.Add(cursor.GetString(cursor.GetColumnIndex(ContactsContract.Contacts.InterfaceConsts.DisplayName)));                   

            } while (cursor.MoveToNext());

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:14:18.190

使用 Xamarin.Mobile API。它处于测试阶段，但运行良好，并且是跨平台的。

[http://www.xamarin.com/mobileapi](http://www.xamarin.com/mobileapi)

# jquery - jquery中的wrap()

> ID：13786382
> 
> 赞同：1
> 
> 时间：2012-12-09T09:50:55.860
> 
> 标签：jquery

我是 jquery 的新手，并试图`wrap()`在我的代码中找到如何在我的网站菜单中使用的方法

**HTML**

```
<ul>
   <li><a href="#">Who We Are</a></li>
   <li><a href="#">Our Work</a></li>
</ul> 
```

**脚本**

```
$('.menu li a').text().wrap('<span></span>'); 
```

但它不起作用:(

我想让我的`HTML`代码看起来像下面的代码我只想将`<span>`标签添加到`<a>`标签中

**代码**

```
<ul>
   <li><a href="#"><span>Who We Are</span></a></li>
   <li><a href="#"><span>Our Work</span></a></li>
</ul> 
```

请帮助我的朋友提前谢谢...:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:54:06.980

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T09:52:15.860

首先，您确实`not`有`test()`可以使用选择器返回的元素调用的方法，其次您需要[**wrapInner()**](http://api.jquery.com/wrapInner/)而不是`wrap`

**[现场演示](http://jsfiddle.net/rajaadil/Rz2bZ/1/)**

改变

```
$('.menu li a').test().wrap('<span></span>'); 
```

到

```
$('ul li a').wrapInner('<span></span>'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T09:55:36.323

Wrap would put the span around the a.

You can do this :

```
$('.menu li a').each(function(){
     $(this).html('<span>'+$(this).html()+'</span>');
}); 
```

[Demonstration (open the console to see the final HTML)](http://jsfiddle.net/PxM5r/)

I suppose you meant `text` and not `test`. If so be aware that `text` doesn't return the text node but just a string, so you can't use it as a jQuery element and you can't call `wrap` on it.

# python - Django，如何从主静态文件夹中的模板扩展

> ID：13786384
> 
> 赞同：1
> 
> 时间：2012-12-09T09:50:57.717
> 
> 标签：python, django

我有一个名为 mytemplates 的文件夹，用于站点基本模板

`Project ----App1,App2,App3,static`

现在在我的静态文件夹中，我有一个名为`mytemplates/temp1/index.html`

现在在我的 app1

`app1/templates/app1/index.html`

我想做这个

```
{% extends "/static/mytemplates/temp1/index.html" %} 
```

但它说找不到模板

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T10:03:28.053

你不需要写`/static`。

您必须在其中`/static`定义您的文件夹，[`settings.TEMPLATE_DIRS`](https://docs.djangoproject.com/en/dev/ref/settings/#template-dirs)否则 django 的模板加载器将永远不会在那里搜索。您必须写出完整路径，而不是相对路径。

默认情况下，模板加载器在模板文件夹内搜索，因此它们不依赖于它们所在的模板文件夹。意思是，写入`{% extends "mytemplates/temp1/index.html" %}`将导致 django 列出所有模板目录，附加`mytemplates/temp1/index.html`到每个模板的绝对路径，并确定连接路径是否存在。如果没有，它会继续尝试您的其他模板目录。如果在尝试所有目录后没有找到匹配项，django 会引发异常。

假设`{% extends "mytemplates/temp1/index.html" %}`您的`static`文件夹在您的`settings.TEMPLATES_DIR`元组中并且`"mytemplates/temp1/index.html"`存在于`static`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:01:23.980

You don't put a full pathname to the file in, look [here](https://docs.djangoproject.com/en/dev/topics/templates/) for the exact syntax. If's the same name that you would call your template from your view.

# entity-framework - Entity Framework 5 和代码生成策略

> ID：13786388
> 
> 赞同：1
> 
> 时间：2012-12-09T09:51:18.177
> 
> 标签：entity-framework

我能够为我的模型创建一个 ObjectContext 并且当我尝试从数据库表中检索所有值时它运行良好。但是，我想查看 EDM 设计器生成的代码，为此我将代码生成策略从无更改为默认。

现在，当我尝试编译程序时，我得到了一个完整的错误列表，比如......

> “Chapter2ConsoleApp.Address”类型已包含“Street2”的定义

解决方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T18:08:13.190

将代码生成策略更改回“默认”不会清理之前执行 EntityModelCodeGenerator 时生成的文件。您必须从项目中手动删除 T4(.tt) 文件及其子文件。然后右键单击 .edmx 文件并选择“运行自定义工具”。这将使用默认配置生成一个新的 Designer.cs 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:36:47.380

您始终可以看到生成的代码。您不必更改代码生成策略。在解决方案资源管理器中，单击 tt 文件旁边的小箭头：

![在此处输入图像描述](../Images/b9d011dfa3dd81e194a7c7c1c6bb4965.png)

# c# - 插入 radgrid

> ID：13786390
> 
> 赞同：-2
> 
> 时间：2012-12-09T09:51:32.733
> 
> 标签：c#, asp.net, telerik-grid

我正在使用由 SqlDataSource 填充的 RadGrid.RadGrid 但是当我希望 Grid 仅用于插入新记录并且 RadGrid 数据集为空时，网格不可见，网页中只出现一行请帮助我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:54:46.583

你放了|Your_data_grid.bind

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:57:21.947

我认为您需要实现`OnNeedDataSource`事件处理程序

标记

```
<rad:RadGrid runat="server" ID="mainGrid" 
                 OnNeedDataSource="mainGrid_NeedDataSource">
</rad:RadGrid> 
```

代码隐藏

```
protected void mainGrid_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    //provide the datasource for your grid
} 
```

**更新**

有几件事可能导致 - 1）我的答案中的那个 2）您的查询中的错误 3）空结果 [没有设置 ShowHeaderWhenEmpty=true]，......[等等](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/alleditablecolumns/defaultcs.aspx)

# node.js - 当使用 mongoose 在 mongodb 中执行聚合时，返回一个空对象，这是为什么呢？

> ID：13786391
> 
> 赞同：2
> 
> 时间：2012-12-09T09:51:48.020
> 
> 标签：node.js, mongodb, mongoose

这是我第一次看到对 node.js 和 mongodb 的愤怒，所以我可能做了一些愚蠢的事情或错过了一些明显的事情，但是鉴于下面的文档和查询，为什么会返回一个空对象？

## 1 文档示例

```
{  
    __v: 0, 
    _id: ObjectId("50bf7f12fc71b74f3b000001"),
    amount: 452.23, 
    categoryId: 13, 
    created: ISODate("2012-12-05T17:06:26Z"), 
    description: "Test", 
    typeId: 1, 
    updated: ISODate("2012-12-05T17:06:26Z")
} 
```

## 2 问题代码

```
var Schema = mongoose.Schema;  

var Expense = new Schema({  
    description: { type: String, required: true },  
    amount: { type: Number, required: true },  
    created: { type: Date, default: Date.now },
    updated: { type: Date, default: Date.now },
    categoryId: { type: Number, required: true },
    typeId: { type: Number, required: true }
});

var ExpenseModel = mongoose.model('Expense', Expense);

ExpenseModel.aggregate(  
    { $group: { _id: '$typeId', total: { $sum: '$amount' }}}, 
    function (err, summary) {
        if(err){
            return res.send(500, { error: err }); 
        }

        if(summary) {
            return res.send(summary);
        } else {
            res.send(500, { error: 'couldnt find expenses' }); 
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:19:24.393

确保您的模型引用了正确的集合，并且您`$group`在`$project`. 这是一个完整的例子：

```
var db = mongoose.createConnection('localhost:27017/myDatabase');

var expenseSchema = new mongoose.Schema({
    description: { type: String, required: true },  
    amount: { type: Number, required: true },  
    created: { type: Date, default: Date.now },
    updated: { type: Date, default: Date.now },
    categoryId: { type: Number, required: true },
    typeId: { type: Number, required: true }
});

var Expense = db.model('expenses', expenseSchema); // make sure the first argument matches your collection's name

Expense.aggregate(  
    { $group: { _id: '$typeId', expense: { $sum: '$amount' }}}, // 'group' goes first!
    { $project: { _id: 1, expense: 1 }}, // you can only project fields from 'group'
    function(err, summary) {
        console.log(summary);
    }
); 
```

这应该会为您提供一个基于“typeId”汇总所有费用的输出：

```
[
    { _id: 1, expense: 300.00 },
    { _id: 2, expense: 45.00 },
    ...
] 
```

我刚刚学习了聚合来回答这个问题，所以如果有什么问题请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:20:09.270

将集合的名称从费用更改为费用解决了这个问题。

# java - Eclipse 在两个不同的选项卡中显示相同的文件

> ID：13786400
> 
> 赞同：2
> 
> 时间：2012-12-09T09:53:50.250
> 
> 标签：java, eclipse

当我在 中*调试*程序时`Java`，我注意到同一个文件在两个不同的选项卡中打开，一个`J`在选项卡内的图标附近有字母。（我知道它是同一个文件，因为它来自同一个路径）

两个选项卡有什么区别？内容**完全一样**。（我是*Eclipse*新手，如果我的问题很愚蠢，对不起:)）

我试图在网上搜索，但没有找到答案。这是显示选项卡的图像：

![重复的选项卡](../Images/c825155d84e5dbd00244a8ef46324559.png)

Morover，当我编辑一个选项卡时，另一个选项卡旁边会出现一颗星，表示它也需要保存。当我保存更改时，两个选项卡会更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:56:12.947

这些选项卡不包含相同类型的编辑器（带有蓝色 J 的是 Java 源代码编辑器），另一个我不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T09:57:50.630

如果您在项目资源管理器中右键单击`.java`源文件并说`Open With > WindowBuilder Editor`，您将获得在左侧选项卡上看到的内容。

如果您改为使用 Java 编辑器打开它，您将获得在右侧选项卡上看到的内容。

我应该早点知道这一点，因为我现在正在使用 WindowBuilder。编辑器之间的唯一区别是 WindowBuilder 版本在底部有选项卡，允许您切换到“设计”视图。

我不确定为什么两个标签都打开了。我猜你在 WBPro 选项卡中*工作，在**调试*时，它默认打开一个标准编辑器选项卡。

当在一个选项卡中进行更改时，“修改”符号将出现在两个选项卡上是有道理的`*`，因为它毕竟是相同的源文件，只是同时在两个编辑器中可见。

# c# - 类比 OOP 规则更喜欢它的私有成员？

> ID：13786409
> 
> 赞同：-1
> 
> 时间：2012-12-09T09:54:44.407
> 
> 标签：c#, .net, oop, access-modifiers

我有这个简单的代码：

```
public class A
{
  int _private=3;
  public   A (B b)
    {
        b._private=5;
    }

}

public class B:A
{
} 
```

*这段代码编译*

*   Via `OOP`-the*不*`b`应该提供对.*`_private`*

**   通过私人和`A`，`A`知道`_private`，但仍然是通过`b`！* 

 *这里发生了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T10:41:36.347

private 访问修饰符允许访问声明它的类型的主体内的成员。没关系，那`b`是另一个例子。它是在can access中`A`声明的 so 方法。我还要注意，这个示例或多或少直接来自 C# 4.0 规范，关于可访问域的第 3.5.2 节：`A``_private`

```
class A
{
   int x;

   static void F(B b) {
      b.x = 1;    // Ok
   }
}

class B: A
{
   static void F(B b) {
      b.x = 1;    // Error, x not accessible
   }
} 
```

我认为关于信息隐藏的 OOP 建议是关于指定客户端代码的合同。公共是受支持的东西。Private 是一个实现细节。`A`在这里，我们可以通过删除来修改 的实现，`_private`并且客户端代码不会受到影响。*

# performance - CUDA 流比通常的内核慢

> ID：13786411
> 
> 赞同：0
> 
> 时间：2012-12-09T09:54:49.513
> 
> 标签：performance, asynchronous, cuda, cuda-streams

我正在尝试理解 CUDA 流，并且我已经用流制作了我的第一个程序，但是它比通常的内核函数慢...

为什么这段代码比较慢

```
cudaMemcpyAsync(pole_dev, pole, size, cudaMemcpyHostToDevice, stream_1);    
addKernel<<<count/100, 100, 0, stream_1>>>(pole_dev);
cudaMemcpyAsync(pole, pole_dev, size, cudaMemcpyDeviceToHost, stream_1);
cudaThreadSynchronize();  // I don't know difference between cudaThreadSync and cudaDeviceSync
cudaDeviceSynchronize();  // it acts relatively same... 
```

比：

```
cudaMemcpy(pole_dev, pole, size, cudaMemcpyHostToDevice);
addKernel<<<count/100, 100>>>(pole_dev);
cudaMemcpy(pole, pole_dev, size, cudaMemcpyDeviceToHost); 
```

我认为它应该运行得更快......变量计数的值是 6 500 000（最大值）......第一个源代码需要 14 毫秒，第二个源代码需要 11 毫秒。

谁能给我解释一下，好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:58:38.947

在这个片段中，您喜欢只处理单个流 ( `stream_1`)，但这实际上是 CUDA 在您不显式操作流时自动为您做的事情。

要利用流和异步内存传输，您需要使用**多个**流，并通过每个流拆分数据和计算。

# javascript - 4 次查询后更新 Dojo 图表

> ID：13786412
> 
> 赞同：2
> 
> 时间：2012-12-09T09:55:03.203
> 
> 标签：javascript, dojo, esri

[我有一张在Esri Javascript API](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples_start.htm#jssamples/query_dojochart.html)中构建的地图。

这张地图中有一层，显示加油站。

随着地图范围的变化，我对该图层运行 4 个单独的查询，以找出当前范围内的加油站总数，查询每个加油站供应商。

例如（Somehat 简化）

```
//Shell 
shellQuery.where = "brand = 'Shell"
//Execute Query, and report result to console
shellQueryTask.executeForCount(shellQuery , function(count){
console.log(count);}

//BP
same again.  Repeats for 4 queries. 
```

每个查询的结果都是 dojo.deferred。

但是，由于它们是单独的查询（出于其他原因需要采用这种方式），它们都在稍微不同的时间返回结果。

最终目标 - 包括由这些查询更新的 Dojo 条形图，以根据供应商显示当前范围内的加油站细分。

作为 Javascript 新手，更不用说 Dojo，我正在摸索更新 dojo 图表的最佳方法。我看到的大多数 Esri 示例都是围绕显示一个查询的结果，并且通过每次创建一个新图表来实现。

我正在寻找一个最优雅的答案。

我目前认为我需要将 4 个查询的结果写入全局数据数组，然后调用单独的函数来更新 dojo 图表。只是有点担心确保在所有四个查询都返回结果之前我不会调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:14:33.933

Dojo 的 deferreds 和 promises 非常适合这个！特别是[dojo/promise/all](http://dojotoolkit.org/reference-guide/1.8/dojo/promise/all.html#dojo-promise-all)模块（以前称为 DeferredList）。

既然你说你的`executeForCount`函数返回 Deferreds，你可以这样做：

```
shellQueryDeferred  = shellQueryTask.executeForCount(shellQuery);
texacoQueryDeferred = texacoQueryTask.executeForCount(texacoQuery);
....

// I assume you've required "dojo/promise/all" as "promiseAll" here:
promiseAll([shellQueryDeferred, texacoQueryDeferred, ...]).then(
    function(results) {
        // The "results" variable is an array with the results
        // from each query, after they've all completed.
    }); 
```

至于更新图表，我不完全确定最优雅的方式是什么。要记住的一件事是`chart.addSeries("name", [1,2,4])`可以用相同的名称反复调用，并且该系列的数据将简单地更新。之后你必须打电话`chart.render()`。

例如：

```
promiseAll([shellQueryDeferred, texacoQueryDeferred, ...]).then(
    function(results) {
        var chartNumbers = getNumbersForChartFromQueryResults(results);
        chart.addSeries("Petrol stations", chartNumbers);
        chart.render();
    }); 
```

我总是在回答时摆弄，所以也许它有一些帮助： http: [//fiddle.jshell.net/froden/SZmkJ/](http://fiddle.jshell.net/froden/SZmkJ/)

**编辑：Dojo 1.7 变体：**

就像 Juffy 所说，在 1.7 中，您必须使用[dojo/DeferredList](http://dojotoolkit.org/reference-guide/1.7/dojo/DeferredList.html)。它几乎就像搜索和替换一样简单，但有一些陷阱。首先，它必须像一个类一样实例化：

```
//promiseAll([shellQuery, texacoQuery, bobsPetrolAndBurgersQuery])
// I assume you've required "dojo/DeferredList" as "DeferredList" here:
new DeferredList([shellQuery, texacoQuery, bobsPetrolAndBurgersQuery])
    .then(function(data) { 
        .... 
```

其次，`data`回调函数中的现在是一个数组数组，其中每个子数组中的第一项是成功/失败布尔值。因此，在将数据传递到图表之前，您可能需要稍微处理一下数据。（[http://fiddle.jshell.net/froden/SZmkJ/1/](http://fiddle.jshell.net/froden/SZmkJ/1/)）

# c# - Windows Phone 8 相机 - 诺基亚中的 PhotoCaptureDevice - 920

> ID：13786413
> 
> 赞同：-3
> 
> 时间：2012-12-09T09:55:06.887
> 
> 标签：c#, xaml, camera, windows-phone-8

我使用 Windows Phone 8 中的 PhotoCaptureDevice 开发了相机应用程序。我可以在诺基亚 820 中运行此应用程序。但我没有 920 设备来测试此应用程序。但是我的一位用户说，这个应用程序不能在诺基亚 920 设备上运行。应该显示相机取景器的 VideoBrush 是空白的。你能请任何人帮助我吗？如果可能的话，请您在 920 设备上进行测试。

我在 InitializeCamera 中使用的确切代码片段

```
private static async Task InitializeCamera()
        {
            PhotoCaptureDevice d = null;

            try
            {
                Windows.Foundation.Size initialResolution = new Windows.Foundation.Size(640, 480);
                Windows.Foundation.Size previewResolution = new Windows.Foundation.Size(640, 480);
                Windows.Foundation.Size captureResolution = new Windows.Foundation.Size(640, 480);

                if (PhotoCaptureDevice.AvailableSensorLocations.Contains(CameraSensorLocation.Back))
                {
                    d = await PhotoCaptureDevice.OpenAsync(CameraSensorLocation.Back, initialResolution);

                    await d.SetPreviewResolutionAsync(previewResolution);
                    await d.SetCaptureResolutionAsync(captureResolution);

                    d.SetProperty(KnownCameraGeneralProperties.EncodeWithOrientation,
                                  d.SensorLocation == CameraSensorLocation.Back ?
                                  d.SensorRotationInDegrees : -d.SensorRotationInDegrees);
                    _device = d;
                }
            }
            catch (Exception e) { Debug.WriteLine(e.Message); }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:24:25.167

我将你的代码发布到一个项目中，它在我的 Lumia 920 上运行良好。我不确定你是否在代码的另一部分中有这个，但我唯一做的就是在 "_device = d;" 线：

```
 ViewfinderBrush.SetSource(_device); 
```

使用这样的 XAML：

```
 <Rectangle x:Name="Viewfinder">
            <Rectangle.Fill>
                <VideoBrush x:Name="ViewfinderBrush"  />
            </Rectangle.Fill>
        </Rectangle> 
```

需要注意的一点是 SetSource 必须在设备初始化之后（即 OpenAsync 之后）。如果你之前设置它，它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:39:27.960

有一个 HTC8X 或者我会帮助你。你为什么不直接向诺基亚请求借用 920？ [http://blog.dvlup.com/2012/11/20/three-ways-dvlup-can-get-you-a-developer-handset/](http://blog.dvlup.com/2012/11/20/three-ways-dvlup-can-get-you-a-developer-handset/)。你可以保留它大约两个星期。

# html - 表单提交打开新选项卡/窗口？

> ID：13786414
> 
> 赞同：15
> 
> 时间：2012-12-09T09:55:27.517
> 
> 标签：html

> **可能重复：**
> [在新选项卡中提交表单](https://stackoverflow.com/questions/5709590/submit-a-form-in-a-new-tab)

提交一个表单时如何打开一个新窗口？

```
 <form method="post" action="<?php echo $PHP_SELF;?>">
    First Name:<input type="text" size="12" maxlength="12" name="Fname">:<br />
    Last Name:<input type="text" size="12" maxlength="36" name="Lname">:<br />
    <input type="submit">
    </form> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-09T09:56:53.507

你可以使用这样的代码

```
 <form action="#" method="post" target="_blank">
      ...
    </form> 
```

# javascript - 使用 AS 或浏览器禁用 Flash 中的右键单击

> ID：13786419
> 
> 赞同：0
> 
> 时间：2012-12-09T09:55:52.767
> 
> 标签：javascript, flash, client, dom-events

我的问题很简单。我想在我的 FLASH GAMES 网站上禁用鼠标右键单击，以便玩家在右键单击游戏并单击“关于 FLASH PLAYER”时无法离开我的网站。我的游戏是使用 AS3 和 FLEX/FLASH 开发的。

我对任何一种解决方案都感兴趣，这样每个玩我的游戏的玩家都无法右键单击游戏并看到“关于 FLASH PLAYER”，或者至少可以防止他在单击“关于 FLASH PLAYER”时离开网站。

我试图从 JS 禁用右键单击，但很可能代码不好。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:53:03.613

如果您使用的是 Flash Player 11，请尝试

```
stage.addEventListener(MouseEvent.RIGHT_CLICK,function(e:MouseEvent):void{}); 
```

[本教程](http://www.leebrimelow.com/?p=3253)中的更多详细信息。

# javascript - 如何使用 JavaScript 根据其文本隐藏元素？

> ID：13786422
> 
> 赞同：6
> 
> 时间：2012-12-09T08:43:14.807
> 
> 标签：javascript

我是初学者开发人员。为了美观，我试图隐藏一个由第三方 JavaScript 动态添加到页面的 div。

问题是 div 没有`id`属性；这甚至可能吗？div 是否具有基于加载顺序的任何固有属性？或者有什么方法可以搜索一串文本并隐藏元素？

例如，`<div>happy New year</div>`根据其 text删除`happy New year`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T08:58:15.623

您可以先选择相关元素并遍历它们，直到找到您想要的。

在 JQuery 中可以这样完成：

```
// select relevant elements
var elements = $('div');

// go through the elements and find the one with the value
elements.each(function(index, domElement) {
    var $element = $(domElement);

    // does the element have the text we're looking for?
    if ($element.text() === "happy New year") {
        $element.hide();
            // hide the element with jQuery
        return false; 
            // jump out of the each
    }
}); 
```

请注意，代码有点脆弱，完全取决于元素的内容。以下是相关的 JQuery api 文档：

*   [jQuery 中的选择器](http://api.jquery.com/category/selectors/)( `$(...)`)
*   [`jQuery.each()`](http://api.jquery.com/each/)- 用于遍历 jquery 对象数组
*   [`jQuery.text()`](http://api.jquery.com/text/)- 获取价值（浏览器之间在纯 JavaScript 中执行此操作的方式存在细微但明显的差异）
*   [`jQuery.hide()`](http://api.jquery.com/hide/)- 用于隐藏具有 CSS 样式的元素`display: none`

请注意，您可以更具体地选择您有以下代码：

```
<div class="message">
    <div>happy New year<div>
</div> 
```

您可以通过以下方式选择元素：

```
var domElement = $('.message div')[0]; // hopefully it only happens once 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T13:39:55.740

我想我会提供一个纯 JavaScript 替代方案，它可以改进（相当多），特别是布尔值作为字符串的传递（感觉很可怕）：

```
function hideByText(text, opts) {
    if (!text) {
        return false;
    }
    else {
        var defaults = {
            // the element we look within, expects:
            // 1: node reference, eg the result of: document.getElementsByTagName('div')[0]
            // 2: an element's id, as a string, eg: 'test'
            'within': document.body,
            // the element type, eg 'div', 'span', 'p', defaults to *everything*
            'elemType': '*',
            // case-sensitivity, as a string:
            // 'true' : is case sensitive, 'Some' will not match 'some',
            // 'false' : is case insensitive, 'Some' will match 'some'
            'sensitive': 'true',
            // 'absolute' : 'some text' will not match 'some text.'
            // 'partial' : 'some text' will match 'some text.'
            'match': 'absolute',
            // 'true' : removes white-space from beginning, and end, of the text,
            // 'false' : does not remove white-space
            'trim': 'true',
            // the class to add to elements if a match is made,
            // use CSS to hide, or style, the matched elements
            'matchedClass': 'hasText'
        },
            opts = opts || {};

        for (var setting in defaults) {
            if (defaults.hasOwnProperty(setting)) {
                opts[setting] = opts[setting] || defaults[setting];
            }
        }

        var within = opts.within.nodeType == 1 ? opts.within : document.getElementById(opts.within),
            elems = within.getElementsByTagName(opts.elemType),
            flags = opts.sensitive == 'true' ? 'i' : '',
            needle = opts.trim == 'true' ? text.replace(/^(\s+) || (\s+)$/g, '') : text,
            haystack,
            reg = new RegExp(needle, flags);

        if (opts.match == 'absolute') {
            for (var i = 0, len = elems.length; i < len; i++) {
                if ((elems[i].textContent || elems[i].innerText) == text) {
                    elems[i].className = opts.matchedClass;
                }
            }
        }
        else if (opts.match == 'partial') {
            for (var i = 0, len = elems.length; i < len; i++) {
                if ((elems[i].textContent || elems[i].innerText).match(reg)) {
                    elems[i].className = opts.matchedClass;
                }
            }
        }
    }
}

hideByText('some text', {
    'match': 'partial',
    'sensitive': 'true',
    'elemType': 'p',
    'matchedClass' : 'hasText'
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2KseA/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:54:26.677

先前的[答案](https://stackoverflow.com/a/13786423/1888292)将隐藏基于组合文本内容的节点（[请参阅`.text()`行为](http://api.jquery.com/text/)）。以下测试用例将说明这一点：

```
should stay: <div><em>happy New year</em></div><br>
should stay: <div>happy New years</div><br>
should stay: <div>happy New <em>year</em></div><br>
should stay: <div>Something else entirely</div><br>
should hide: <div>happy New year</div> 
```

此处显示：[jsFiddle](http://jsfiddle.net/vU7Vn/4/)

根据您的具体情况，这种更一般的行为可能是您想要的，因为它会忽略后代结构并仅与组合文本匹配。但是，如果您需要隐藏`<div>`具体包含文本的内容，则类似以下内容将仅隐藏`<div>`测试用例中的最后一个：

```
var tx = 'happy New year';
$('div:contains(' + tx + ')').filter(function(){
    var $content = $(this).contents();
    return $content.length === 1 && 
        $content[0].nodeType === 3 &&
        $content.text() === tx;
}).hide(); 
```

此处显示：[jsFiddle](http://jsfiddle.net/vU7Vn/2/)

可以修改初始选择器以隐藏包含特定文本的任何内容。这种更通用的方法将隐藏`<em>`第一种情况下的`<div>`元素和最后一种情况下的元素：

```
$(':contains(' + tx + ')').filter(// etc... 
```

您可能会考虑[从 DOM 中删除元素，](http://api.jquery.com/remove/)而不是仅仅隐藏它。

[`:contains()`jQuery 选择器](http://api.jquery.com/contains-selector/)

[`.filter()`方法](http://api.jquery.com/filter/)

[`.contents()`方法](http://api.jquery.com/contents/)

[`nodeType`节点属性](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)

[`.remove()`方法](http://api.jquery.com/remove/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-01T14:23:36.063

您实际上可以使用一行来完成

```
$("div").text("happy New year").hide(); 
```

# java - 可以在编译时评估表达式吗？

> ID：13786424
> 
> 赞同：1
> 
> 时间：2012-12-09T09:56:14.117
> 
> 标签：java, static, final

```
public class Test1 {
    static final int i;
    static{
        if(3<2){
        i = 0;
        }
    }   
} 
```

```
public class Test2 {
    static final int i;
    static{
        if(3>2){
        i = 0;
        }
    }   
} 
```

类`Test1`编译失败，类`Test2`编译成功。

任何人都可以告诉我编译器如何在 if 条件下评估表达式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T10:00:33.690

```
static final int i; 
```

需要在静态初始化器中初始化，因为它是最终的。

```
static{
        if(3<2){
        i = 0;
        }
    } 
```

由于 3<2 文字或常量，编译器能够检测到代码的死部分并且不初始化 i.

添加一个`else`案例并在`i`那里进行一些初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T10:06:27.803

它与编译器如何确定是否执行语句有关。它在[JLS #16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)中定义：

> 当发生对其值的任何访问时，每个局部变量和每个空白最终字段都必须具有明确分配的值。

在您的示例中，编译器可以确定`i`是（或不是）在编译时明确分配，因为中的表达式`if`是一个*常量表达式*。

[JLS #15.28](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)定义了*常量表达式*：

> 编译时常量表达式是表示原始类型值或字符串的表达式，它不会突然完成并且仅使用以下内容组成：
> 
> *   原始类型的文字 [...]
> *   关系运算符 <、<=、> 和 >= [...]

有趣的是，尽管 Test2 可以编译，但 Test2 的这个修改版本无法编译：

```
static class Test3 {
    static final int i;
    static {
        int j = 3;
        if (j > 2) {
            i = 0;
        }
    }
} 
```

原因是它`j > 2`不再是一个常量表达式。制作 j`final`将使类再次编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T10:08:49.440

根据[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)，if 语句的条件部分中的表达式是编译时表达式。在 Test1 编译器知道我永远不会被初始化，这就是它抱怨的原因。在第二种情况下，编译器知道 i 将被初始化。如果你用更动态的东西替换你的编译时表达式，这两个类都将无法编译，因为编译器将无法保证 i 已初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T11:15:52.643

`if (3<2)`可以优化，`if (false)`因此 Java 编译会检测到无法访问的语句（错误）。

`if (3>2)`可以优化为`if (true)`，然后始终执行包含的语句。没问题。

编译器可以很容易地检测到这些是常量标量，因此可以在编译时评估（即优化）表达式。我们期望从一个体面的编译器那里得到什么。

# ios - NSJSONSerialization 未正确映射布尔值

> ID：13786438
> 
> 赞同：-1
> 
> 时间：2012-12-09T09:57:42.697
> 
> 标签：ios, json, parsing, nsjsonserialization

我正在阅读来自[The Joys of Code 的](http://thejoysofcode.com/)数据。API 以 JSON 格式返回数据，其中布尔变量的写法如下：

```
{ "obj" :
   { 
      "sharing":false,
      "modified":"tuesday"
   }
} 
```

请注意，sharing:false单词*false周围***没有**引号。然后我使用 NSJSONSerialization 将此 JSON 解析为一个对象（本例中为 NSDictionary）。

 *问题是， "sharing":false 或 "sharing":true 总是创建一个共享 = 0 的对象，其中 0 是一个值为 0 的 NSNumber。

我的问题是这是否是有效的 JSON 并且 NSJSONSerialization 无法正常工作，或者原始 JSON 是否无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:11:00.443

NSJSONSerialization 对我来说可以很好地使用上面的 json（输入 false 和 true）：

```
NSData *json = [@"{ \"obj\" : \
                { \
                \"sharing\":false, \
                \"modified\":\"tuesday\" \
                } \
                }" dataUsingEncoding:NSUTF8StringEncoding];
id dict = [NSJSONSerialization JSONObjectWithData:json options:0 error:nil];
id sharing = dict [@"obj"][@"sharing"];
NSLog(@"%d", [sharing boolValue]);

json = [@"{ \"obj\" : \
                { \
                \"sharing\":true, \
                \"modified\":\"tuesday\" \
                } \
                }" dataUsingEncoding:NSUTF8StringEncoding];
dict = [NSJSONSerialization JSONObjectWithData:json options:0 error:nil];
sharing = dict [@"obj"][@"sharing"];
NSLog(@"%d", [sharing boolValue]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:00:07.003

这是有效的。你总是可以`BOOL`从`NSNumber`as中获取`[number boolValue]`并检查它

```
if ([number boolValue]) 
```

或者

```
if ([number boolValue] == YES) 
```*

# android - 在 Windows 7 上设置适用于 Android 的 OpenFrameworks

> ID：13786442
> 
> 赞同：2
> 
> 时间：2012-12-09T09:58:34.627
> 
> 标签：android, openframeworks

我想在我的 Windows 7 机器和 Eclipse IDE V 4.2 上安装 OF for Android。

我按照[http://www.multigesture.net/articles/how-to-setup-openframeworks-for-android-on-windows/中的说明进行操作](http://www.multigesture.net/articles/how-to-setup-openframeworks-for-android-on-windows/)

但我在构建时收到以下错误：

**目标“AndroidRelease”的配方失败 Makefile.android /libs/openFrameworksCompiled/project/makefileCommon line 93**

和

**目标“AndroidDebug”的配方失败 Makefile.android /libs/openFrameworksCompiled/project/makefileCommon line 90**

当我从示例（多边形应用程序）运行应用程序时，我从 LogCat 收到以下异常：

**java.lang.UnsatisfiedLinkError：无法加载 OFAndroidApp：findLibrary 返回 null**

我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:11:52.567

通过遵循新的 Eclipse IDE 上的步骤并克隆 OpenFrameworks 的**开发**分支来解决。

# android - 列表视图中奇怪的透明分隔符

> ID：13786445
> 
> 赞同：0
> 
> 时间：2012-12-09T09:58:49.273
> 
> 标签：android, android-listview, android-fragments, android-ui, android-listfragment

我有一个包含类别的片段：

![在此处输入图像描述](../Images/3debfb9652fba72e08c9517171518a0e.png)

当按下其中一个类别时，将打开一个包含故事的列表。类别的片段被带有列表的片段替换：

![在此处输入图像描述](../Images/db631314043112efd4c284edd0f2c393.png)

**现在是主要部分。**作为 listview 项目的背景，**我不使用 9-patch 资源，因为背景具有难以拉伸的纹理，无法拉伸，但可以重复**。

我将分隔线设置为 null 并将其高度设置为 0（我在代码和 xml 中都这样做了）。

```
mList.setDivider(null);
mList.setDividerHeight(0); 
```

但是当我按下后退按钮时，我在列表项之间的空间中看到了一个包含类别的列表：

![在此处输入图像描述](../Images/b483c3a6643f0ffbcdbcdfca4d61d5ec.png)

然后我尝试做一个1 px高度的红色背景并将其设置为listview：

```
mList.setDivider(getResources().getDrawable(R.drawable.sep));
mList.setDividerHeight(1); 
```

但得到了相同的结果：

![在此处输入图像描述](../Images/de105e93753e6f76af91d13ee7160e07.png)

**我尝试使用 9-patch 资源并且没有这样的错误。如何使用 NOT 9-patch 资源（我已经解释了更高的原因）并避免这个问题？**

# wix - wix 服务依赖项

> ID：13786452
> 
> 赞同：5
> 
> 时间：2012-12-09T09:59:40.123
> 
> 标签：wix, wix3, wix3.6

我的产品具有多项功能，包括两项服务。我们称它们为 ServiceA 和 ServiceB。这两项服务功能都是可选的。但是，如果在安装过程中同时选择了 ServiceA 和 ServiceB，我想在它们之间创建一个服务依赖关系，以便 ServiceB 将依赖于 ServiceA（换句话说，ServiceB 必须始终在 ServiceA 启动之前启动）。

如何在 WIX 3.6 中实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T09:15:02.460

```
<ServiceInstall Id="ServiceA" DisplayName="ServiceA" Name="ServiceA" 
    Account="LocalSystem" Start="auto" ErrorControl="normal" Type="ownProcess">
    <ServiceDependency Id="ServiceB"/>
</ServiceInstall> 
```

这应该有效，请查看[ServiceDependency 文档元素](http://wixtoolset.org/documentation/manual/v3/xsd/wix/servicedependency.html)

# c# - 多核处理器上的多个线程

> ID：13786453
> 
> 赞同：2
> 
> 时间：2012-12-09T09:59:45.457
> 
> 标签：c#, .net, multithreading, multicore

在多线程系统中，线程是如何在核心之间分布的。假设我有一个创建 6 个线程的程序。我的系统有 3 个核心。在这种情况下，线程将分布在 3 个 CORE 之间，还是所有线程都在同一个 CORE 上执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:22:05.923

[我在这篇博文](http://omegacoder.com/?p=94)中找到了一个不错的解释。您可以使用一些 pinvoke 调用来设置线程关联：

```
[DllImport("kernel32.dll")]
static extern IntPtr GetCurrentThread();
[DllImport("kernel32.dll")]
static extern IntPtr SetThreadAffinityMask(IntPtr hThread, IntPtr dwThreadAffinityMask); 
```

然后你可以像这样使用它：

```
SetThreadAffinityMask(GetCurrentThread(), new IntPtr(1 << processorNumber)); 
```

但是你必须知道，托管线程可以从一个非托管线程切换到另一个，并且上面的方法适用于非托管线程，因此不能保证它会 100% 工作。来自[Thread](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)类的 MSDN 文档：

> 操作系统 ThreadId 与托管线程没有固定关系，因为非托管主机可以控制托管线程和非托管线程之间的关系。具体来说，复杂的主机可以使用 CLR Hosting API 针对同一操作系统线程调度许多托管线程，或在不同操作系统线程之间移动托管线程。

`Thread.BeginThreadAffinity()`但是，您可以通过在执行 pinvoke调用之前调用来规避这一点。

# java - eclipse - 无缝调试 Java 和 C++ 代码

> ID：13786455
> 
> 赞同：3
> 
> 时间：2012-12-09T10:00:30.450
> 
> 标签：java, c++, eclipse, debugging, java-native-interface

我有一个项目是用 Java 和 C++ 编写的，通过 JNI 进行通信。到目前为止，我一直在使用 IntelliJ Idea 来调试 Java 代码，并使用 Linux 本机调试器来调试 C++ 代码。

当我在寻找替代方案时，我认为使用 Eclipse 进行调试对于 java 和 c++ 来说都是最好的主意。实现这一目标的步骤是什么？（显然我想导入我当前的项目）。

我是 Linux 64 位用户，使用 eclipse Juno。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T10:07:35.907

[在 Eclipse 中调试 JNI C 和 Java 代码](https://community.jboss.org/wiki/DebuggingJNICAndJavaCodeInEclipse?_sscc=t)可以帮助您。否则，[如何使用 Eclipse 调试 JNI 代码（Java 和 C/C++）](https://stackoverflow.com/questions/2762916/how-to-use-eclipse-to-debug-jni-code-java-c-c)也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:00:02.230

Eclipse 是目前唯一成熟的“单一 GUI”解决方案 AFAIK。我的使用实践作为对类似问题的回答：

[JAVA JNI C 调试器](https://stackoverflow.com/questions/13133022/java-jni-c-debugger/13135418#13135418)

# vms - 在 OpenVMS 上使用 C++ 进行开发

> ID：13786458
> 
> 赞同：0
> 
> 时间：2012-12-09T10:00:43.477
> 
> 标签：vms, openvms, dcl

我正在查看 OpenVMS 上的 C++ 项目。

它与 NIX 开发有何不同？是不是有点像一个特殊的 UNIX 版本或 LINUX 发行版？

在内存管理或线程等方面有什么特点吗？（我知道 FILE I/O 有点不同）。

C++ 编译器是否有点像其他平台上的旧 C++ 版本？（对模板等的支持较少）

我可以在不接触 DCL 的情况下使用 bash 吗？

IDE、调试（gdb）源代码控制等呢？（它接缝 NetBeans 没问题）

我可以使用 X-Windows 远程工作吗？管理员访问会成为问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:52:54.117

如果您只使用基于 Unix 的衍生产品进行开发，OpenVMS 可能看起来完全不同。一一回答你的问题。

1) C++ 的内存管理感觉是一样的。有 pthreads 支持。文件 I/O 有更多的选择，但很多对你来说会感到陌生。包括 C++ 的 iostreams 在内的基本操作如您所愿。

2) 我认为 gcc 不适用于 Itanium 上的 VMS。您将需要使用 HP 的 C++ 编译器。它是对旧版英特尔 C++ 编译器的重新打包。不要指望很快就会支持 c++-11。模板支持很好。STL 有效。

3) 有一个开源的 bash 解决方案。你可能对 DCL 和一些 perl 更满意。Perl 在 VMS 上工作。

4) 没有我知道的 C++ IDE。

5) X Windows 应该可以工作。

6) 系统管理员访问。取决于您要访问的内容。VMS 确实具有丰富的访问控制机制，并且可以更精细地访问系统的某些部分，而无需求助于类似 sudo 的解决方案。请询问您的系统管理员以获取更多详细信息。

# java - forward stream from machine to another java

> ID：13786464
> 
> 赞同：1
> 
> 时间：2012-12-09T10:01:18.877
> 
> 标签：java, android, sockets, stream, wifi-direct

I am new to socket programming in java and Android. I have three phones A, B, and C. With Wifi-Direct, A can only see B. B, in the middle, can see A and C. And C can only see B. I want to send a file from A to C. So, A should send it to B and B will forward the data/packets to C.

I don't know where to start. should all phones use filestream? If so, how can B know if he receives data from A that he should forward it to C?

If you can show me good tutorial or small sample code this will be great.

# c# - Can I make using `this` mandatory in my code?

> ID：13786466
> 
> 赞同：3
> 
> 时间：2012-12-09T10:01:35.323
> 
> 标签：c#, visual-studio-2010, visual-studio

Is there a way to tell Visual Studio to make qualifying members of the current instance with `this.` mandatory? I prefer the clarity.

Details:

In C#, if you have instance members (fields, properties, methods, etc.), normally you can refer to them both with and without `this`, e.g.:

```
class Foo
{
    private int bar;

    Foo()
    {
        // These two lines are both valid, and both do exactly the same thing
        bar = 42;
        this.bar = 42;
    }
} 
```

In my coding style, I don't want `this` to optional, I want the first line above to cause at least a warning. Obviously this is just for my own purposes, I'm not trying to mark the resulting assembly in some way that requires people *using* it to also do this, this is purely a personal style thing.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T10:05:49.423

您可以使用[Resharper](http://www.jetbrains.com/resharper/)（使用[此处描述的设置](https://stackoverflow.com/a/4087407/157247)）和[StyleCop](http://stylecop.codeplex.com/)（使用[此规则](http://www.stylecop.com/docs/SA1101.html)）等程序。

它们允许您定义自己的编码样式，这些样式会在您的代码中引起验证警告，并提供有关解决这些问题的建议。

这是一个关于 resharper 的免费替代品的问题。

[reshaper 有哪些替代品？](https://stackoverflow.com/questions/2834439/what-are-some-alternatives-to-resharper)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:17:33.887

StyleCop 似乎默认开启了这个规则。

# ruby-on-rails - Rails：类似的类

> ID：13786469
> 
> 赞同：1
> 
> 时间：2012-12-09T10:02:31.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oop, inheritance

我正在使用 Rails 创建一个留言板网站。我有一个`Topic`班级和`Post`班级。
很容易注意到两个类之间的相似性（内容、标题、user_id..）

在这种情况下，Rails 的最佳实践是什么？应该`Topic`继承自`Post`? 它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T10:26:12.520

在大多数情况下，这取决于。如果这些具有非常相似的表结构和/或重复的方法，我会选择 STI。但是，如果类有不同的外键，我通常不会使用这种方法。

另一方面，如果它们有一些共同的特征，但它们本身的类足够不同，我会将公共代码提取到一个模块中（基本上是一个 mixin）。如果您需要更大的灵活性，您可能需要使用[关注点](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)，甚至将常见模式提取到 gem 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:13:09.310

我建议研究[Single-Table Inheritance (STI)](http://en.wikipedia.org/wiki/Single_Table_Inheritance)，它允许您让多个模型共享同一个数据库表，并按`type`列进行区分。

我通过快速搜索找到了一些关于该主题的文章：

*   [单表继承以及在 Rails 中的使用位置](https://stackoverflow.com/questions/555668/single-table-inheritance-and-where-to-use-it-in-rails)
*   [Rails 3 中的单表继承](http://blog.thirst.co/post/14885390861/rails-single-table-inheritance)
*   [Rails 的单表继承](http://therailworld.com/posts/18-Single-Table-Inheritance-with-Rails)
*   [Rails 中的单表继承](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T11:13:15.100

**Module Mixins**：只要在任何类中包含这个模块

**继承（STI）**：你必须为这些类使用同一个表

**多态**：你必须为每个类使用不同的表

*在我看来，通常*很难回答最佳实践是什么，因为它确实取决于具体情况——在某些情况下，您甚至可能想使用组合，上帝保佑。

我会坚持使用**Module Mixins**，因为它简单灵活。如果你认为你会因为有两个单独的表而多次*编写*查询，那么试试**Inheritance (STI)**。从经验来看，**多态**肯定会让人*头疼，*如果你不熟悉的话，会有很多问题，所以可能不值得上 2 节课。

```
# Heres one way to set up Inheritance (STI) on a table called 'contents'
class Content < ActiveRecord::Base
    attr_accessible :content, :title
    belongs_to :user
end

class Topic < Content
end

class Post < Content
end

Content.all             # => query topics and posts
#Post.all + Topic.all   # => query topics and posts without STI (doublewriting query)

Post.all    # => only query posts
Topic.all   # => only  topics 
```

*通用 Rails 最佳实践？* **保持**简单和**愚蠢**_ **_** _ **_**

# android-animation - 如何在android中移动图像并创建动画？

> ID：13786471
> 
> 赞同：2
> 
> 时间：2012-12-09T10:03:27.787
> 
> 标签：android-animation

我刚开始在 Android 中编程，但我在 java (OOP) 中编程，所以我需要帮助 - 我的 xml 文件中有一个 ImageButton，并且我有一个应该让 xml 文件执行操作的 java 项目，对吧？那么如何使 xml 文件中的 ImageButton 移动 - 使用运行功能？用丝线？与油漆组件？

我试图做这样的事情 -

```
public class example1 extends Activity{
    ImageButton i=(ImageButton)findViewById(R.id.i1);
    int bottom=i.getBottom();
    int left=i.getLeft();
    int right=i.getRight();
    int top=i.getTop();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    public void run(){
        RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) i.getLayoutParams();
        layoutParams.setMargins(left, top, right, bottom+1);
        i.setLayoutParams(layoutParams);
    } 
```

但我不知道如何让它根据时间移动。

# c# - 时间：2019-05-10 标签：c#simpleui-automation

> ID：13786476
> 
> 赞同：0
> 
> 时间：2012-12-09T10:04:18.470
> 
> 标签：c#, visual-studio, ui-automation

我正在尝试创建一个简单的 ui 自动化程序，它将鼠标光标移动到预定义的位置，然后“单击”一个按钮/复选框/任何存在的东西。如果我需要填写一个编辑框，我会单击它，然后使用 SendKeys 添加所需的数据。如果我这样做 - 以后的鼠标移动不会执行。代码是：

```
mouseMove(pointA);
click();
System.Threading.Thread.Sleep(1000);
SendKeys.Send("12345");
System.Threading.Thread.Sleep(1000);
mouseMove(pointB);
click();
System.Threading.Thread.Sleep(1000); 
```

所以 mouseMove(pointB) 没有被执行。

我正在使用 System.Threading.Thread.Sleep(1000) 因为我试图自动化的软件反应迟钝，所以它偶尔会“挂起”。

而且它使用奇怪的第 3 方控件，所以我想不出任何其他快速的方法来自动化它 - 微软的 UI 自动化无法识别这些控件：[

有什么想法吗？

# php - 在 for 循环执行之前显示图像

> ID：13786477
> 
> 赞同：0
> 
> 时间：2012-12-09T10:04:22.130
> 
> 标签：php

以下是我将 xls 转换为 csv 的脚本。无论在for循环的代码之前提到什么，我都面临的问题，它首先运行。请让我知道如何首先从以下脚本显示图像，然后运行循环脚本：

```
<body>

asdjasldjasdlj // Even this text gets load after execution of for loop
<!-- Progress information -->
<div id="information" style="width"><img src="images/L.gif" /></div>

<?php 
     require_once 'lib/excel_reader2.php';
    $excel = new Spreadsheet_Excel_Reader();
    $excel->setOutputEncoding('UTF-16');
    $excel->read('Student2.xls');
    $x=1;
    $sep = ",";

   $nbSheets = count($excel->sheets);
  echo $x." -  ".$nbSheets;

  $total = $nbSheets;

for($i = 0; $i < $nbSheets; $i++) {
           ob_start();
    while($x<=$excel->sheets[$i]['numRows']) {
        $y=1;
        $row="";
        while($y<=$excel->sheets[$i]['numCols']) {
            $cell = isset($excel->sheets[$i]['cells'][$x][$y]) ? $excel->sheets[$i]['cells'][$x][$y] : '';
            $row.=($row=="")?"\"".$cell."\"":"".$sep."\"".$cell."\"";
            $y++;
        } 
        echo $row."\n"; 
        $x++;
    }
    $x = 1; $y = 1;
    $fp = fopen("data.csv",'a');
    fwrite($fp,ob_get_contents());
    fclose($fp);
    ob_end_clean();

}

echo "CSV file created successfully";
// Tell user that the process is completed
echo '<script language="javascript">document.getElementById("information").innerHTML="Process completed"</script>';

?>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T10:09:10.020

您可以使用 flush() 函数

它将当前输出一直推送到浏览器。

[http://php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)

# c++ - 如果向量是特定长度，则使用 C++11 std::enable_if 启用成员函数

> ID：13786479
> 
> 赞同：9
> 
> 时间：2012-12-09T10:04:32.763
> 
> 标签：c++, enable-if

我正在编写一个简单的向量类，我想要一些仅在特定长度的向量中可用的成员函数（例如，三元素向量的叉积）。我偶然发现了 std::enable_if ，它看起来可以做我想做的事，但我似乎无法让它正常工作。

```
#include <iostream>
#include <type_traits>

template<typename T, unsigned int L>
class Vector
{
    private:
        T data[L];

    public:
        Vector<T,L>(void)
        {
            for(unsigned int i = 0; i < L; i++)
            {
                data[i] = 0;
            }
        }

        T operator()(const unsigned int i) const
        {
            return data[i];
        }

        T& operator()(const unsigned int i)
        {
            return data[i];
        }

        Vector<typename std::enable_if<L==3, T>::type, L> cross(const Vector<T,L>& vec2) const
        {
            Vector<T,L> result;

            result(0) = (*this)(1) * vec2(2) - (*this)(2) * vec2(1);
            result(1) = (*this)(2) * vec2(0) - (*this)(0) * vec2(2);
            result(2) = (*this)(0) * vec2(1) - (*this)(1) * vec2(0);

            return result;
        }
}; 

int main(void)
{
    Vector<double,3> v1;
    Vector<double,3> v2;
    Vector<double,3> v3;
    //Vector<double,4> v4;

    v1(0) = 1;
    v1(1) = 2;
    v1(2) = 3;

    v2(0) = 4;
    v2(1) = 5;
    v2(2) = 6;

    v3 = v1.cross(v2);

    std::cout << v3(0) << std::endl;
    std::cout << v3(1) << std::endl;
    std::cout << v3(2) << std::endl;

    return 0;
} 
```

上面的代码编译并正确运行，但是如果我取消注释`Vector<double,4> v4`我在编译时收到以下错误：

```
vec.cpp: In instantiation of ‘class Vector<double, 4u>’:
vec.cpp:46:22:   required from here
vec.cpp:29:59: error: no type named ‘type’ in ‘struct std::enable_if<false, double>’ 
```

有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T10:20:37.093

```
 template<unsigned LL = L>
  Vector<typename std::enable_if<LL==3 && L == 3, T>::type, LL>
  cross(const Vector<T,LL>& vec2) const
  {
    Vector<T,L> result;

    result(0) = (*this)(1) * vec2(2) - (*this)(2) * vec2(1);
    result(1) = (*this)(2) * vec2(0) - (*this)(0) * vec2(2);
    result(2) = (*this)(0) * vec2(1) - (*this)(1) * vec2(0);

    return result;
  } 
```

PS。为什么会这样？

变量的定义`v4`导致类模板的隐式实例化`Vector`，进而导致类成员函数声明的隐式实例化等（14.7.1 隐式实例化 [temp.inst] #1）。当然，后一种实例化会导致错误。

如果我们改为将成员函数更改为成员模板，根据相同的子句，此时**成员模板本身**被实例化，并且这个实例化看起来或多或少像：

```
template<unsigned LL = 3>
Vector<typename std::enable_if<LL==3 && 3 == 3, double>::type, LL>
cross(const Vector<double,LL>& vec2) const; 
```

这是一个完全有效的模板声明。此时我们不（也不能）执行任何进一步的实例化。

但是，当我们尝试实际调用 时`cross`，毫无疑问，这是“需要成员/函数定义存在的上下文”，因此，根据 (14.7.1 Implicit instantiation [temp.inst] #2, #3)，`cross`模板（第二个模板`cross`，是外部类模板实例化的结果）被隐式实例化，并且`std::enable_if`有机会完成它的工作。作为旁注，这是适用 SFINAE 原则的情况。

聚苯乙烯。进一步详细说明，虽然与 OP 问题没有直接联系，但仍然值得一提的是，并不总是需要将成员声明为模板以处理类似情况。

在某些情况下，类模板的成员对于给定的实例化不是“有效的”，但仍然可以实例化类模板，例如：

```
#include <type_traits>

template<typename T>
struct S
{
  T x;

  T foo () const { return x; }

  typename std::remove_pointer<T>::type bar () const { return *x; }
};

S<int> x;
S<int *> y; 
```

显然，在实例化`S<int>`中，表达式`*x`是无效的，因为类型`x`是`int`。不过，这个程序是正确的。重要的一点是，在隐式实例化期间，只有成员的**声明**被实例化。在上述情况下，实例化`S<int>`导致**声明** `int bar() const;`被实例化，这是一个完全正确的声明。

当然，如果我们稍后尝试实例化 的**定义**，`S<int>::bar`例如：

```
void f()
{
  x.foo ();
  //  x.bar (); // error
  y.foo ();
  y.bar ();
} 
```

我们会得到一个错误。

（这仍然是从上面提到的 C++ 标准的两段中得出的）

# php - cURL 和 curl_setopt- 如何删除选项

> ID：13786481
> 
> 赞同：4
> 
> 时间：2012-12-09T10:04:43.830
> 
> 标签：php, curl

我正在使用 cURL 首先从远程 FTP 服务器获取文件列表。然后我使用相同的 Curl Handle 下载该文件。下载后，我再次使用相同的句柄删除文件。

当我使用以下代码删除文件时，它确实成功：

```
curl_setopt($tmp["curl"], CURLOPT_QUOTE, array("DELE " . $tmp["file"])); 
```

虽然我在日志中得到以下信息：

```
[PHP Warning] curl_exec(): CURLOPT_FILE resource has gone away, resetting to default [l:52] 
```

原因是当我第一次下载文件时，我设置了以下选项：

```
curl_setopt($tmp["curl"], CURLOPT_FILE, $tmp["file_handle"]); 
```

我的问题是，如何取消设置已添加的选项？我想删除上面的选项，以便我可以重用 curl 连接来删除文件.. 或者我设置什么选项来基本上取消设置这个选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T10:07:35.913

您可以通过将值设置为 来取消设置选项`null`，如下所示：

```
curl_setopt($tmp["curl"], CURLOPT_QUOTE, null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-19T14:39:08.627

我想使用相同的 curl 实例保存到文件，然后请求页面并保存到变量。

在尝试了上述所有建议和其他建议后，都没有奏效，我遇到了正确的解决方案......

将文件重置为默认的 STDOUT

```
curl_setopt($ch, CURLOPT_FILE, fopen('php://stdout','w')); 
```

如果您想这样做，请不要忘记重新启用返回传输

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T10:30:21.513

这对我有用：

```
curl_setopt($tmp["curl"], CURLOPT_FILE, STDOUT); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-11T19:24:08.493

如果你也[看看这篇文章](https://stackoverflow.com/questions/13251829/removing-file-handle-from-curl-curlopt-file)，基本上将 CURLOPT_FILE 选项重置为默认的 STDOUT（NULL 会导致警告！）。

然后，如果您打算将输出捕获为字符串，则需要将 CURLOPT_RETURNTRANSFER 选项显式设置为 true 以覆盖文件选项，即使您之前已设置它也是如此。

希望这对也在寻找这个答案的人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T10:07:46.027

只是将它设置为`NULL`应该工作

```
curl_setopt($tmp["curl"], CURLOPT_FILE, NULL); 
```

如此处所讨论

[http://curl.haxx.se/mail/lib-2012-03/0082.html](http://curl.haxx.se/mail/lib-2012-03/0082.html)

# c++ - 在编译时检测是否存在默认构造函数

> ID：13786482
> 
> 赞同：1
> 
> 时间：2012-12-09T10:04:52.713
> 
> 标签：c++, templates, constructor, sfinae

我正在尝试检查模板参数是否存在默认构造函数。我想做这样的事情：

```
template <typename A>
class Blah
{
   Blah() { A* = new A(); } 
} 
```

但是我想在编译时通过**SFINAE**或其他技巧检测该构造函数是否存在，如果`static_assert`不存在，则提出我自己的 a 。

当我的类（例如`std::vector`）没有“默认构造函数”但具有默认参数的构造函数时，就会出现问题。

所以使用`std::has_trivial_default_constructor`不会返回true。虽然我可以使用`new vector<T>()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T10:46:41.183

这是类型特征的可能实现：

```
template<typename T>
class is_default_constructible {

    typedef char yes;
    typedef struct { char arr[2]; } no;

    template<typename U>
    static decltype(U(), yes()) test(int);

    template<typename>
    static no test(...);

public:

    static const bool value = sizeof(test<T>(0)) == sizeof(yes);
};

struct foo {
    foo(int) {}
};

int main()
{
    std::cout << is_default_constructible<foo>::value << '\n'        // 0
              << is_default_constructible<std::vector<int>>::value;  // 1
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T10:43:40.950

C++ 标准中没有`std::has_trivial_default_constructor`；这似乎是来自 Boost 的 gcc 增强。这不是你想要的。您不想检查某些东西是否具有微不足道的默认构造函数；您想检查某个类是否具有默认构造函数，无论是否微不足道。使用`std::is_default_constructible`（假设一个 c++11 兼容编译器）。

# sql - 如何从 MSACCESS 中的不同表列中求和和减去

> ID：13786485
> 
> 赞同：0
> 
> 时间：2012-12-09T10:05:26.713
> 
> 标签：sql, database, ms-access

我有三个名为：Student、StudentPayment 和 CreditAmount 的表。我想显示一个学生欠学校多少钱的结果。在 student 表中有一个名为 TotalPayable 的列，它是要支付给学校的总金额，在 StudentPayment 中有一个名为 TotalPaid 的列，它是他每次支付的总金额，在 CreditAmount 表中有一个名为 CreditAmount 的列是学校给予学生的豁免金额。所以我做了一个查询：

```
SELECT Student.TotalPayableAmount - 
       Sum(StudentPayment.TotalPaid, CreditAmount.WaiverAmount) AS Total_Due
  FROM (Student INNER JOIN StudentPayment ON Student.ID = StudentPayment.ID) 
 INNER JOIN CreditAmount ON (Student.ID = CreditAmount.ID) AND (Student.ID = CreditAmount.StudentID)
 GROUP BY Student.ID, Student.TotalPayableAmount, CreditAmount.WaiverAmount 
```

但它显示错误。

实际上，我想计算 TotalPaid 和 CreditAmount 的总和，然后想从学生表的 TotalPayable 中减去它。任何人都可以帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T10:21:17.570

A`join`为右侧的每一行重复左侧的每一行。所以一个有两次付款和三个学分的学生最终会得到 6 行。如果你`sum`超过了，你会得到错误的结果。

相反，您可以使用子查询来计算每个学生的总金额。由于每个学生的子查询只返回一行，因此可以避免上面提到的行重复问题。例如;

```
select  Student.ID
,       Student.TotalPayableAmount - 
        iif(StudentPayment.TotalPaid is null, 0, StudentPayment.TotalPaid) -
        iif(CreditAmount.WaiverAmount is null, 0, CreditAmount.WaiverAmount)
from    (
        Student
        left join    
                (
                select  StudentID
                ,       sum(Paid) as TotalPaid
                from    StudentPayment
                group by
                        StudentID
                ) as StudentPayment
        on    StudentPayment.StudentID = Student.ID
        )
left join    
        (
        select  StudentID
        ,       sum(Waiver) as WaiverAmount
        from    CreditAmount
        group by
                StudentID
        ) as CreditAmount
on      CreditAmount.StudentID = Student.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T10:16:42.000

您需要单独获取每个表的总和，然后通过学生 ID 加入它们。

```
SELECT Student.TotalPayableAmount - Nz(sumTotalPaid,0) - Nz(sumCreditAmount,0)
FROM (Student
LEFT JOIN (
    SELECT ID, Sum(TotalPaid) AS sumTotalPaid
    FROM StudentPayment
    GROUP BY StudentPayment.ID
) AS sum1
    ON Student.ID = sum1.ID)
LEFT JOIN (
    SELECT ID, Sum(CreditAmount) AS sumCreditAmount
    FROM CreditAmount
    GROUP BY CreditAmount.ID
) AS sum2
    ON Student.ID = sum2.ID 
```

注意：如果您从外部连接（DAO、ADO、ADO.NET）执行此操作，您将无法使用该`Nz`功能。

# c - 编译打印字符串函数给出错误消息 - C

> ID：13786486
> 
> 赞同：4
> 
> 时间：2012-12-09T10:05:32.653
> 
> 标签：c, string, printf

我想用 C 编写一个简单的 main 函数，它接收两行字符串输入并将它们打印在屏幕上。这是我写的代码：

```
int main()
{
    char a[100];
    char b[100];
    printf("Enter the first string:\n");
    fgets(a,100,stdin);
    printf("Enter the second string:\n");
    fgets(b,100,stdin);
    printf("\n\n THE FIRST STRING IS:  %S\n\n THE SECOND STRING IS:%S",a, b);
    return 0;
} 
```

当我尝试编译时，我收到以下错误消息：

```
gcc -g -Wall PN52.c -o myprog
PN52.c: In function ‘main’:
PN52.c:12:2: warning: format ‘%S’ expects argument of type ‘wchar_t *’, but argument 2 has type ‘char *’ [-Wformat]
PN52.c:12:2: warning: format ‘%S’ expects argument of type ‘wchar_t *’, but argument 3 has type ‘char *’ [-Wformat] 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T10:06:57.727

您使用`%S`格式，而字符串 ( `char*`) 的格式是`%s`.

```
printf("%s - %s\n", a, b); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T10:06:49.583

在格式字符串`%S` 中用小写替换大写。`%s``printf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T18:48:31.017

只需将 %S 替换为 %s 即可，因为 C 区分大小写，这就是您必须处理这些事情的原因

# php - 我可以使用睡眠（60）吗？在脚本中

> ID：13786489
> 
> 赞同：1
> 
> 时间：2012-12-09T10:06:29.240
> 
> 标签：php

如果我`<?php sleep(60); ?>`在我的脚本中使用 30 次会有什么问题，以便脚本将在 30 分钟内加载并完成其工作，是否有任何问题的可能性？
**注意：**如果失败，有什么办法可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:10:50.903

客户端可能会停止侦听响应，但脚本仍有可能完成执行。不过，您必须配置您的 PHP 安装以延长执行时间。

如果您使用浏览器和 AJAX 请求将在 30 分钟后返回的数据，最好轮询静态资源。

当您想要启动脚本时，向它发送一个 AJAX 请求。这个请求最终会超时。设置您的脚本，以便在完成后将其输出保存到静态资源（文本文件/图像/等；取决于您的脚本应该返回的内容）。使用 AJAX 每五分钟轮询一次该资源，当它准备好时，您将得到服务器的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:10:46.707

如果您调用`sleep(60)`30 次或`sleep(60 * 30)`一次，则没有区别。

看一下 php 函数[set_time_limit](http://php.net/manualenfunction.set-time-limit.php)，因为标准是 30 秒左右。之后，您的脚本将被终止。

不过，不知道有没有浏览器愿意等这么久才收到你的请求。你想达到什么目的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T10:25:12.940

这个想法有几个问题。

*   sleep 将以下代码或下一个循环的执行延迟`n`几秒钟。这将在您的脚本“自然”运行时间之上，因此总执行时间将为`( sleep(s) * times called ) + execution_time`
*   在 cgi 环境或 php apache 模块中执行脚本时，默认情况下您有`max_execution_time`30 秒的时间，之后您的脚本将停止执行。在 CLI 上，默认值为 0 =~ 无限制。 [http://php.net/manual/en/info.configuration.php#ini.max-execution-time](http://php.net/manual/en/info.configuration.php#ini.max-execution-time)

*   最后，如评论中所述，如果您的脚本是从浏览器调用的，则网络服务器将更早地运行超时。

# foursquare - 如何在 Foursquare 上注册我的应用程序

> ID：13786490
> 
> 赞同：1
> 
> 时间：2012-12-09T10:06:37.163
> 
> 标签：foursquare

我是使用 Foursquare API 制作应用程序的新手。在developers.foursquare.com 上注册我的应用程序时，它要求我输入下载/欢迎页面url：例如www.example.com 您的隐私政策url：和回调url 我只是使用我的Xampp 服务器来运行我的应用程序。那么我需要在那里填写的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:06:02.197

回调 URL 是foursquare 将发出请求以验证用户身份的URL，因此这必须是您服务器上可以处理OAuth 身份验证请求的URL。

欢迎页面 URL 和隐私策略 URL 链接到用户在尝试对您的应用进行身份验证时看到的身份验证对话框。他们应该提供有关您的应用程序的信息，以便用户可以就是否连接您的应用程序做出明智的决定。

# c# - 使用 memoryStream 的路径作为 FilePath 打开 FileStream

> ID：13786494
> 
> 赞同：0
> 
> 时间：2012-12-09T10:06:57.340
> 
> 标签：c#

我有一个问题，一个复杂的！

我有一些需要文件路径的外部类库。我的应用程序将文件加载到内存流中。

我想给它一些路径（到外部dll），将它重定向到内存流以获取文件，而不是文件系统。（使用 FileStream 的 dll）。

例如：如果我有文件（在 fileSystem 中），名称为：C:\MyFile.txt 我想将文件加载到 memoryStream 并提供外部 dll somepath，例如“MyMemoryStreamPath”，它将从内存中加载文件而不是来自文件系统（它会“认为”它是文件系统路径，但实际上它是 memmoryStream 的路径）。只是提醒您，该 dll 与 FileStream 一起使用。我知道这是一个复杂的问题，任何想法都会被接受。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:06:06.780

没有办法做到这一点。如果您有权限问题，可以将流保存到[IsolatedStorage](http://msdn.microsoft.com/en-us/library/x7dzh4ws.aspx)。它有很多选项，您可以通过参考获得保存文件的路径。

# linux - 使用 `sh` 和 `source` 有什么区别？

> ID：13786499
> 
> 赞同：69
> 
> 时间：2012-12-09T10:07:13.497
> 
> 标签：linux, bash, shell, unix

`sh`和 和有什么不一样`source`？

```
source: source filename [arguments]
    Read and execute commands from FILENAME and return.  The pathnames
    in $PATH are used to find the directory containing FILENAME.  If any
    ARGUMENTS are supplied, they become the positional parameters when
    FILENAME is executed. 
```

对于`man sh`：

```
NAME
       bash - GNU Bourne-Again SHell

SYNOPSIS
       bash [options] [file]

COPYRIGHT
       Bash is Copyright (C) 1989-2004 by the Free Software Foundation, Inc.

DESCRIPTION
       Bash  is  an sh-compatible command language interpreter that executes commands read from the standard input or from a file.  Bash also incorporates
       useful features from the Korn and C shells (ksh and csh).

       Bash is intended to be a conformant implementation of the IEEE POSIX Shell and Tools specification (IEEE Working Group 1003.2). 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-09T10:13:05.987

当您调用`source`or时`.`（一个是另一个的别名。cmd[`source`不是 POSIX 类型的*bashism*](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#dot)），您将 bash 脚本加载并执行**到*当前*bash 进程中**。这样你就可以

*   读取源脚本中设置的变量，
*   使用其中定义的函数。
*   如果脚本执行此操作，甚至执行分叉和/或子进程。

当您调用 时`sh`，您会启动一个运行新会话的*fork*（子进程或*子*`/bin/sh`进程），该会话通常是指向 的符号链接`bash`。在这种情况下，由子脚本设置的环境变量将在子脚本完成时被删除。

**注意**：`sh`可能是*另一个*shell 的符号链接。

### 实用样本

例如，如果您想通过特定方式更改*当前工作目录*，则无法执行

```
$ cat <<eof >myCd2Doc.sh
#!/bin/sh
cd /usr/share/doc
eof

$ chmod +x myCd2Doc.sh 
```

这不会像你期望的那样：

```
$ cd /tmp
$ pwd
/tmp
$ ~/myCd2Doc.sh
$ pwd
/tmp 
```

因为*当前工作目录*是 environment 的一部分，并且`myCd2Doc.sh`会在*subshel​​l*中运行。

但：

```
$ cat >myCd2Doc.source <<eof
# Shell source file
myCd2Doc() {
    cd /usr/share/doc
}
eof

$ . myCd2Doc.source
$ cd /tmp
$ pwd
/tmp
$ myCd2Doc
$ pwd
/usr/share/doc 
```

看看[*`mycd`*功能](https://stackoverflow.com/a/13112493/1765658)！！（使用基于*Associative Array的*[bash](/questions/tagged/bash "显示标记为“bash”的问题")完成）。

 *### 执行级别`$SHLVL`

```
$ cd /tmp
printf %b '\43\41/bin/bash\necho This is level \44SHLVL.\n' >qlvl.sh

$ bash qlvl.sh 
This is level 2.

$ source qlvl.sh 
This is level 1. 
```

### [递归](https://en.wikipedia.org/wiki/Recursion_(computer_science))（当脚本从自身运行时）

```
$ cat <<eoqlvl2 >qlvl2.sh 
#!/bin/bash

export startLevel recursionLimit=5
echo This is level $SHLVL started:${startLevel:=$SHLVL}.
(( SHLVL < recursionLimit )) && ./qlvl2.sh
eoqlvl2
$ chmod +x qlvl2.sh

$ ./qlvl2.sh 
This is level 2 started:2.
This is level 3 started:2.
This is level 4 started:2.
This is level 5 started:2.

$ source qlv2.sh 
This is level 1 started:1.
This is level 2 started:1.
This is level 3 started:1.
This is level 4 started:1.
This is level 5 started:1. 
```

### 再远一点

```
$ sed '$a ps --sid $SID fw' qlvl.sh >qlvl3.sh
$ chmod +x qlvl3.sh 
$ export SID
$ read SID < <(ps ho sid $$)
$ echo $SID $$
8983 8983 
```

（当前*PID*（`$$`==*进程 ID ）与**SID*（*会话 ID*）具有相同的标识符。并非总是如此。）

```
$ ./qlvl3.sh 
This is level 2.
  PID TTY      STAT   TIME COMMAND
 8983 pts/10   Ss     0:00 /bin/bash
10266 pts/10   S+     0:00  \_ /bin/bash ./qlvl3.sh
10267 pts/10   R+     0:00      \_ ps --sid 8983 fw

$ . qlvl3.sh 
This is level 1.
  PID TTY      STAT   TIME COMMAND
 8983 pts/10   Ss     0:00 /bin/bash
10428 pts/10   R+     0:00  \_ ps --sid 8983 fw 
```

点`.`是 的别名`source`。因此，两个命令之间的唯一区别被*`slash`*替换为*`space`*.

### *最后*的测试：

```
$ printf %b '\43\41/bin/bash\necho Ending this.\nsleep 1;exit 0\n' >finalTest.sh

$ bash finalTest.sh 
Ending this.

$ source finalTest.sh
Ending this. 
```

...您可能会注意到两种语法之间的*不同*行为。;-)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-09T10:09:45.950

主要区别在于它们在不同的过程中执行。

因此，如果您`source`的文件`foo`执行 a `cd`，则采购外壳（例如终端中的交互式外壳）会受到影响（并且其当前目录将更改）

如果您执行`sh foo` 不`cd`影响采购外壳，只有新创建的`sh`进程运行`foo`

阅读[高级 Bash 脚本指南](http://www.tldp.org/LDP/abs/html/)。

^(这种差异并非特定于 Linux。每个 Posix 实现都会有它。)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-14T17:20:35.677

正如其他人所提到的，当您运行时`sh test.sh`，对您的 shell 环境所做的任何更改`test.sh`都不会在进程结束后持续存在。

`test.sh`但是，还要注意，当代码作为子进程（即使用 ）执行时，未导出的环境中的任何元素（例如变量、别名和 shell 函数）都将不可用于代码`sh test.sh`。

例如：

```
$ cat > test.sh
echo $foo
$ foo=bar
$ sh test.sh
$ . test.sh
bar 
```

示例 2：

```
lap@my-ThinkPad:~$ cat test.sh
#!/bin/sh
cd /etc
lap@my-ThinkPad:~$ sh test.sh 
lap@my-ThinkPad:~$ pwd
/home/savoury
lap@my-ThinkPad:~$ source test.sh 
lap@my-ThinkPad:/etc$ pwd
/etc
lap@my-ThinkPad:/etc$ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-20T16:28:30.263

**source**（或 . ） - 在当前 shell 中运行并更改其属性/环境。

**sh**分叉并在子外壳中运行，因此无法更改属性/环境。

**例如**

**我的 shell 脚本是 -**

```
elite12!rg6655:~/sh_pr [33]$ cat changeDir.sh
#!/bin/bash
cd /home/elt/rg6655/sh_pr/justdir
pwd
echo $$ 
```

**我当前的外壳 -**

```
elite12!rg6655:~/sh_pr [32]$ echo $$
3272 
```

我当前 shell 的进程 id 是 3272

**使用*源代码*运行-**

```
elite12!rg6655:~/sh_pr [34]$ source changeDir.sh
/home/elt/rg6655/sh_pr/justdir
3272
elite12!rg6655:~/sh_pr/justdir 
```

观察两件事 - 1) 进程 id (3272) 与我的 shell 相同，它确认源在当前 shell 中执行。2) cd 命令有效，目录更改为 justdir。

**运行*sh* -**

```
elite12!rg6655:~/sh_pr [31]$ sh changeDir.sh
/home/elt/rg6655/sh_pr/justdir
13673
elite12!rg6655:~/sh_pr 
```

在这种情况下，进程 id (13673) 不同，目录保持不变，这意味着它在不同的进程或子 shell 中运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T05:27:53.603

使用 sh 命令执行程序时：

*   您的终端将使用 sh 或 Bourne Shell 来执行程序。
*   因为 Bash 制作了自己的精确副本，所以创建了一个新进程。这个子进程和它的父进程有相同的环境，只是进程ID号不同。（这个过程称为分叉）
*   您需要具有执行权限才能执行它（因为它是分叉的）

当你使用 source 命令时：

*   您使用默认解释器执行程序
*   您在当前终端中执行该过程（从技术上讲，您的 *nix 命令已解释）
*   由于程序将在当前终端中执行，因此您不需要授予它执行权限*

# java - Spring - 控制器当前页面丢失

> ID：13786505
> 
> 赞同：1
> 
> 时间：2012-12-09T10:07:41.220
> 
> 标签：java, spring, controller

下面是我的控制器。

```
@Controller
@RequestMapping("/userRegistration.htm")
@SessionAttributes("user")
public class UserController {

    private UserService userService;

    @Autowired
    public void setUserService(UserService userService) {
        this.userService = userService;
    }

    @RequestMapping(method = RequestMethod.GET)
    public String showUserForm(ModelMap model)
    {
        User user = new User();
        model.addAttribute(user);
        return "userForm";
    }

    @RequestMapping(method = RequestMethod.POST)
    public void onSubmit(@ModelAttribute("user") User user, HttpServletResponse response) {
        userService.add(user);
        //return "redirect:userSuccess.htm";
    }

} 
```

上面代码中的问题是，在“onSubmit”方法中，我没有返回任何内容，但浏览器中的网页丢失了，也没有重定向到任何新的 URL，与浏览器中显示的 URL 相同。

请告诉我们，这是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:41:27.737

在业务逻辑之后没有什么可做的。在你的代码中。如果您想在业务逻辑之后重定向。使用响应对象

```
response.sendRedirect("/userSuccess.htm"); 
```

# cuda - 在 centos 6.2 上设置 cuda 5.0

> ID：13786507
> 
> 赞同：0
> 
> 时间：2012-12-09T10:08:25.663
> 
> 标签：cuda, centos, installation

我想在centos 6.2上设置cuda 5.0，失败了，错误如下：

1.  无法找到当前运行内核的内核源代码树。请确保您已经为您的内核安装了内核源文件并且它们已正确配置；例如，在 Red Hat Linux 系统上，确保您安装了“kernel-source”或“kernel-devel”RPM。如果您知道安装了正确的内核源文件，则可以使用“--kernel-source-path”命令行选项指定内核源路径。

我已经成功执行命令“yum install kernel-devel.x86_64”，但是我执行 cuda_5.0.24_linux_64_rhel6.x.run，我失败了。

1.  然后我执行“cuda_5.0.24_linux_64_rhel6.x.run --kernel-source-path='/usr/src/kernels/2.6.32-279.14.1.el6.x86_64'，我得到了未知选项'kernel-source-名字”，我也失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:05:51.110

下载以下 RPM：

> [http://ftp.riken.jp/Linux/centos/6.2/os/x86_64/Packages/kernel-devel-2.6.32-220.el6.x86_64.rpm](http://ftp.riken.jp/Linux/centos/6.2/os/x86_64/Packages/kernel-devel-2.6.32-220.el6.x86_64.rpm) [http://ftp.riken.jp/Linux/centos /6.2/os/x86_64/Packages/kernel-debug-2.6.32-220.el6.x86_64.rpm](http://ftp.riken.jp/Linux/centos/6.2/os/x86_64/Packages/kernel-debug-2.6.32-220.el6.x86_64.rpm)

并使用以下方法安装它们：

```
rpm -iv kernel-devel-2.6.32-220.el6.x86_64.rpm kernel-debug-2.6.32-220.el6.x86_64.rpm 
```

[在此处](http://ftp.riken.jp/Linux/centos/6.2/os/x86_64/Packages/)查找任何其他缺少的 rpm

# html - 垂直 CSS 菜单，链接内有边框，填充整个宽度

> ID：13786512
> 
> 赞同：0
> 
> 时间：2012-12-09T10:09:31.050
> 
> 标签：html, css, menu

对于一个网站，我需要制作一个这样的 css/html 菜单：

![在此处输入图像描述](../Images/752aad935240c027932a0be47654021b.png)

如您所见，菜单链接的左侧和右侧都有一些黄色边框，这些边框填充了可用宽度。菜单下方还有一个带有渐变的背景图像。

有人对如何实现这种菜单样式有任何想法吗？

到目前为止的代码：

```
<div id="submenu">
    <ul>
        <li class="selected">
            <a href="#">Wirtschaft<div></div></a>
            <ul>
                <li><a href="#">Kurzeinführung Wirtschaft</a></li>
                <li><a href="#">Wirtschaftstheorie</a></li>
                <li><a href="#">Arbeitsmarkt</a></li>
                <li class="selected"><a href="/test.html">Geld- und Konjunktur</a></li>
                <li><a href="#">Staatsfinanzen</a></li>
                <li><a href="#">Wirtschaft: alle Beiträge</a></li>
            </ul>
        </li>
    </ul>
</div>

#submenu {
    width: 225px;
}

#submenu ul {
    list-style-type: none;
}

#submenu ul li a {
    border-left: 6px solid transparent;
    padding-left: 4px;
    display: block;
    margin-bottom: 15px;
    color: #222624;
    font-size: 17px;
}

#submenu ul li a:hover,
#submenu ul li.selected > a {
    border-left: 6px solid #CAB106;
}

#submenu ul li ul li a {
    margin-bottom: 7px;
    font-size: 14px;
} 
```

编辑：图片中的渐变实际上存在于正文中，我认为它不能用纯 css 完成，所以它必须是背景图像。

EDIT2：PeterVR 提供的解决方案效果很好！不幸的是，我被另一个具有相同样式的列表困住了，但是当 ul 结束时，没有完整的块结束。关于如何使用 PeterVR 提供的代码实现这一目标的任何想法？

![新问题](../Images/b08044fe24a1e7b0463fbce03ead4494.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:36:37.390

可能是这样的：http: [//jsfiddle.net/AXze7/1/](http://jsfiddle.net/AXze7/1/)
我在你的css中改变了一些东西：
- 将主设置`ul`为溢出隐藏- 从标签
中删除显示块 - 将标签设置为相对位置，对于以下工作：`<a>`
`<a>`

```
#submenu ul li a:hover:after,
#submenu ul li.selected > a:after {
    background: #CAB106;
    content: ' ';
    display: block;
    height: 100%;
    width: 225px;
    margin-left: 4px;
    position: absolute;
    left: 100%;
    top: 0;
} 
```

这会在锚标记之后添加绿色块。

编辑：
我为你的第二种情况更新了我的小提琴：http: [//jsfiddle.net/AXze7/2/](http://jsfiddle.net/AXze7/2/)

更改内容的简短概述：

*   我`overflow:hidden`从 中删除`ul`，然后将其放在`li`
*   我调整了样式并使用了像素，使其看起来更像您的屏幕截图。将此与前面的示例进行比较应该可以帮助您了解如何实现目标。
*   我为在悬停/选择时出现变化的箭头图标添加了一个额外的伪类`:before`。

代码如下所示：

```
#submenu ul li a:before,
#submenu ul li.selected > a:before {
    background: #fcc; /* put your black arrow image here */
    content: ' '; 
    display: block;
    height: 12px;
    width: 12px;
    margin-left: 2px;
    position: absolute;
    left: -18px;
    top: 2px;
}
#submenu ul li a:hover:before,
#submenu ul li.selected > a:before {
    background: red; /* put your colored arraw image here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:25:32.520

检查 js fiddle 中的这个[演示](http://jsfiddle.net/fYx2P/2/)`#eee`。用图片上显示的手榴弹制作一个像素高度的图像，并替换为该图像。

# python - 在 Python 中调用 call() 时出错

> ID：13786513
> 
> 赞同：0
> 
> 时间：2012-12-09T10:09:35.630
> 
> 标签：python, call, traceback

我正在使用python运行外部程序，如下所示

```
 call("/usr/sbin/snif") 
```

我得到

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.6/subprocess.py", line 480, in call
return Popen(*popenargs, **kwargs).wait()
File "/usr/lib/python2.6/subprocess.py", line 633, in __init__
errread, errwrite)
File "/usr/lib/python2.6/subprocess.py", line 1139, in _execute_child
raise child_exception
OSError: [Errno 2] No such file or directory 
```

我如何得到最后一行，上面写着：

“没有相应的文件和目录”

或者更好的是，我怎么知道执行是否成功？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:16:52.710

你可以捕捉到错误：

```
try:
    call('/usr/sbin/snif')
except OSError:
    print "It didn't execute" 
```

如果您想查看命令是否正确执行，请使用`check_output`or`check_call`代替并捕获另一个错误：

```
import subprocess:

try:
    subprocess.check_output('/usr/sbin/snif')
except OSError:
    print 'That file does not exist'
except subprocess.CalledProcessError:
    print 'Bad exit code' 
```

# php - 数据表，无法解析来自服务器的 JSON 数据

> ID：13786514
> 
> 赞同：0
> 
> 时间：2012-12-09T10:09:39.673
> 
> 标签：php, jquery, jquery-datatables

我收到此错误：

```
DataTables warning (table id = 'example'): DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error. 
```

在下面的代码中。我想为此代码发送任何参数`server_processing.php`并使用`$_GET`. 此代码显示此结果

```
{"sEcho":0,"iTotalRecords":"1","iTotalDisplayRecords":"112","aaData":[["\u0633\u06cc\u062f \u0645\u062d\u0645\u062f \u0639\u0644\u06cc","\u0645\u062d\u0633\u0646\u06cc","sma_mohseni","2012\/11\/10","50.48.6.52"],["\u0633\u06cc\u062f \u0645\u062d\u0645\u062f \u0639\u0644\u06cc","\u0645\u062d\u0633\u0646\u06cc","sma_mohseni","2012\/11\/10","50.48.6.52"]]} 
```

[完整的结果是这个链接](http://paste.debian.net/215201/)

在 www.jsonformatter.curiousconcept.com 中的 json 检查结果中提醒我 json 结果是 VALID

我`server_processing.php`的是：

```
<?php

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * Easy set variables
     */

    /* Array of database columns which should be read and sent back to DataTables. Use a space where
     * you want to insert a non-database field (for example a counter or static image)
     */
    $aColumns = array('first_name','last_name','login','date','ip'); 

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "date";

    /* Database connection information */
    $gaSql['user']       = 'SECURITY ';
    $gaSql['password']   = 'SECURITY ';
    $gaSql['db']         = 'SECURITY ';
    $gaSql['server']     = 'SECURITY ';

    /* 
     * MySQL connection
     */
    $gaSql['link'] =  mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) or
        die( 'Could not open connection to server' );

    mysql_select_db( $gaSql['db'], $gaSql['link'] ) or 
        die( 'Could not select database '. $gaSql['db'] );
    mysql_query("set names 'utf8'", $gaSql['link']);            

    /* 
     * Paging
     */

    $sLimit = "";
    if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
    {
        $sLimit = "LIMIT ".mysql_real_escape_string( $_GET['iDisplayStart'] ).", ".
            mysql_real_escape_string( $_GET['iDisplayLength'] );
    }

    /*
     * Ordering
     */
    $sOrder = "";
    if ( isset( $_GET['iSortCol_0'] ) )
    {
        $sOrder = "ORDER BY  ";
        for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
        {
            if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
            {
                $sOrder .= "`".$aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."` ".
                    mysql_real_escape_string( $_GET['sSortDir_'.$i] ) .", ";
            }
        }

        $sOrder = substr_replace( $sOrder, "", -2 );
        if ( $sOrder == "ORDER BY" )
        {
            $sOrder = "";
        }
    }

    /* 
     * Filtering
     * NOTE this does not match the built-in DataTables filtering which does it
     * word by word on any field. It's possible to do here, but concerned about efficiency
     * on very large tables, and MySQL's regex functionality is very limited
     */
    $sWhere = "";
    if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
    {
        $sWhere = "WHERE (";
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
        }
        $sWhere = substr_replace( $sWhere, "", -3 );
        $sWhere .= ')';
    }

    /* Individual column filtering */
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
        {
            if ( $sWhere == "" )
            {
                $sWhere = "WHERE ";
            }
            else
            {
                $sWhere .= " AND ";
            }
            $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
        }
    }

    /*
     * SQL queries
     * Get data to display
     */

    $sQuery = "SELECT at_members.member_id , at_members.login , at_members.status , at_statistic.date , at_statistic.time , 
          at_statistic.ip , at_members.first_name , at_members.last_name FROM
          ( I'M EDITED THIS LINES FOR SECURITY )
          at_members.status = '{$_GET['$status']}' {$_GET['con']}
          {$_GET['fDate']}  {$_GET['tDate']} 
          {$_GET['nameDore']} ";

    $rResult = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());

    /* Data set length after filtering */
    $sQuery = "
        SELECT FOUND_ROWS()
    ";
    $rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
    $iFilteredTotal = $aResultFilterTotal[0];

    /* Total data set length */
    // echo $sQuery.'<br/>';

    $rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultTotal = mysql_fetch_array($rResultTotal);
    $iTotal = $aResultTotal[0];

    /*
     * Output
     */
    $output = array(
        "sEcho" => intval($_GET['sEcho']),
        "iTotalRecords" => $iTotal,
        "iTotalDisplayRecords" => $iFilteredTotal,
        "aaData" => array()
    );

    while ( $aRow = mysql_fetch_array( $rResult ) )
    {
        $row = array();
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            if ( $aColumns[$i] == "version" )
            {
                /* Special output formatting for 'version' column */
                $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
            }
            else if ( $aColumns[$i] != ' ' )
            {
                /* General output */
                $row[] = $aRow[ $aColumns[$i] ];
            }
        }
        $output['aaData'][] = $row;
    }

    echo json_encode( $output );
?> 
```

HTML：

```
<div  style="width:100%;">
    <table cellpadding="0" cellspacing="0" border="0" class="display" id="example" >
        <thead>
            <tr>
                <th width="35%"></th>
                <th width="35%"></th>
                <th width="15%"></th>
                <th width="15%"></th>
                <th width="15%"></th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:18:46.037

您正在使用无效字符，请在[此处检查您的结果](http://jsonformatter.curiousconcept.com/)

它的这个：`\u0645\u062d\u06 33\u0646\u06cc`

你在`u06`和之间有一个空格`33`

此外，您可能对 jQuery 验证插件有疑问，请查看[此](http://datatables.net/forums/discussion/4133/datatables-warning-json-data-from-server-could-not-be-parsed./p1)链接以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:14:05.660

这是典型的答案类型，当您的服务器端脚本发生脚本错误时。尝试使用 chrome web 检查器或 firebug 和网络选项卡来检查返回的结果。

很可能会有类似的东西

```
PHP error foo on line bar
{your: "json", here: "if", it: "only", was: "a warning", and, "not an error"} 
```

# eclipse - Eclipse Unable to Launch，选择无法启动，最近没有启动

> ID：13786517
> 
> 赞同：4
> 
> 时间：2012-12-09T10:10:21.293
> 
> 标签：eclipse, svn

当我尝试启动从 SVN 存储库签出的项目时，出现上述错误。当我使用主类在 Eclipse 上创建自己的 Java 项目时，一切正常，但是当我尝试从我的存储库项目中运行主类时，我收到了上述消息。

我以前没有这样的问题。存储库项目运行良好，我昨天突然遇到这个错误，在搜索互联网后我仍然无法修复它。

我现在在 eclipse 上有 3 个项目，**home**是我制作的一个 java 项目，以及来自存储库**lech**和**kramerspitz**的两个项目。

在运行-> 运行配置-> Java 应用程序-> 项目浏览下，我只看到我制作的主项目，虽然其他两个存储库项目也在我的工作区中，但它们没有显示。（运行方式为空）

有谁知道我应该怎么做？重新安装 Eclipse 没有帮助，导致问题仍然存在。

我看到的唯一区别是两个存储库项目缺少一个 .classpath 文件。请帮忙！

听几张图： ![蚀](../Images/4563a7fba412e43255f3b972686774cc.png) ![运行配置](../Images/5e81dadfbac0be11552c0207007b2aa1.png) ![项目选择](../Images/ad1b739f342655d4bbb64d692fda7ca3.png) ![工作区](../Images/74bf3c3c1f631d0b6b0902963e701b57.png) ![我做的项目](../Images/ef1c58defeefd015a2fc520e7892ace7.png) ![kramerspitz 存储库项目（无法运行 main）](../Images/967ed8efbecf58ab7dc9e17a5533c33d.png) ![reversi 存储库项目（无法运行 main 方法）](../Images/04e436b68e26ed884dd15345a77cd8f2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:07:30.053

看来我不能只从 SVN 存储库中签出项目。我必须从项目中选择一个特定的项目来签出，然后一切正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-12T23:35:56.953

有时，当您忘记在主括号中写“String[] args”时会发生这种情况

```
public class Hello {
    public static void main(){
        System.out.println("Hello");
    }
} 
```

上面的代码会导致类似的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T09:25:52.037

我是 Windows 8 并运行 Eclipse C++ Kepler (Toolchain = MinGW)。这是我为您收到的相同消息所做的，它对我有用：在编辑器的屏幕中，右键单击>运行方式>本地 C/C++ 应用程序

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-18T04:54:09.433

使用相同的问题找到解决方案

Run >> Run Configuration >> Android Application >>Under Project ....选择浏览按钮选择合适的项目

现在项目运行成功

谢谢....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-05T07:37:11.110

```
public class HelloWorld {
    public void main(String[] args) {
        System.out.printf("Hello world!!!");
    }
} 
```

此外，如果您省略`static`关键字，则会发生问题。

# grails - grails g:field 错误信息

> ID：13786524
> 
> 赞同：0
> 
> 时间：2012-12-09T10:11:31.123
> 
> 标签：grails, groovy

如何自定义错误消息？它没有在文档中说明。

```
<g:field type="number" name="isbn" min="5" max="10" required="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:09:53.890

它不在标签参考中，而是在 Grails 指南中：http: [//grails.org/doc/latest/guide/single.html#validationAndInternationalization](http://grails.org/doc/latest/guide/single.html#validationAndInternationalization)

# c# - Visual Studio 引用的项目找不到端点

> ID：13786526
> 
> 赞同：0
> 
> 时间：2012-12-09T10:11:54.783
> 
> 标签：c#, windows, visual-studio, azure

我目前正在开发一个 VS 2010 项目。我有一个调用 Web 服务的命令行程序“X”。这本身编译并运行良好。

但是，我试图在一个单独的项目“Y”中使用这个命令行程序的类。为此，我在项目“Y”中添加了对项目“X”的引用。一切都很好，两个项目都可以编译。

但是，在运行项目“Y”时，代码在项目“X”中失败，因为找不到端点：

> “在 ServiceModel 客户端配置部分中找不到引用合同‘MyLocalService.MyServiceInterface’的默认端点元素。这可能是因为找不到您的应用程序的配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素.

我认为这与项目“X”中的配置文件尚未导入项目“Y”的事实有关......但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:21:24.003

我想你是对的。配置文件（web.config 和 app.config）仅适用于正在执行的进程。在 Visual Studio 中，您可以通过设置解决方案的启动项目来控制这一点。

听起来您需要为您的服务创建或复制配置到项目“Y”中。然后运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:24:39.713

如果您将服务引用添加到您的项目，这将创建一个名为`<system.serviceModel>`app.config 或 web.config 的部分（或将配置数据添加到`bindings`和`client`子节点，如果它已经存在）。

您需要将此部分从 X 的 app.config 添加到 Y 的 app.config。

# ios - 在设备上测试定位服务

> ID：13786527
> 
> 赞同：3
> 
> 时间：2012-12-09T10:11:58.253
> 
> 标签：ios, xcode, location, core-location

我正在尝试使用`startMonitoringSignificantLocationChanges` 在模拟器中测试背景位置更改，我可以启用高速公路驱动模式，并且我会定期调用`locationManager:didUpdateLocations:`这很棒。=，问题是在应用程序终止并且它应该被唤醒时进行调试。我已将 RUN 方案更改为“等待 my.app 启动”，这再次运行良好，因为调试器等待应用程序激活。不利的一面是，我无法查看任何 NSLog，并且模拟器也无法查看设备日志。所以我转移到设备，因为我认为至少我可以查看设备日志，但是设备没有高速公路驱动模式。我创建了一个像这样的 .gpx 文件：

```
<?xml version="1.0"?>
<gpx version="1.1" creator="Xcode"> 
    <wpt lat="37.331705" lon="-122.030237"></wpt>
    <wpt lat="37.331705" lon="-122.030337"></wpt>
    <wpt lat="37.331705" lon="-122.030437"></wpt>
    <wpt lat="37.331705" lon="-122.030537"></wpt>
    <wpt lat="37.331705" lon="-122.031437"></wpt>
    <wpt lat="37.331705" lon="-122.031537"></wpt>
    <wpt lat="37.331705" lon="-122.031437"></wpt>
    <wpt lat="37.331705" lon="-122.032537"></wpt>
    <wpt lat="37.331705" lon="-122.032437"></wpt>
    <wpt lat="37.331705" lon="-122.032537"></wpt>
    <wpt lat="36.331705" lon="-122.030437"></wpt>
    <wpt lat="36.331705" lon="-122.030537"></wpt>
</gpx> 
```

并在 RUN 方案中将其设置为默认位置。我可以看到，当我飞过默认地图应用程序时，设备的坐标正在发生变化，但是没有一个 locationManager 委托方法像在模拟器中那样被调用。

任何关于我如何测试它的帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:22:03.897

您可以使用类似[https://github.com/futuretap/FTLocationSimulator](https://github.com/futuretap/FTLocationSimulator)的东西。或修改它以更好地满足您的需求（我的回答来自[这里](https://stackoverflow.com/a/14930776/2082172)）

**编辑**

（我是作者之一）[https://github.com/Azoft/FakeGPSUtility](https://github.com/Azoft/FakeGPSUtility) - 也很有帮助。

# android - 如何在设备重新启动时取消选中复选框共享首选项？

> ID：13786528
> 
> 赞同：0
> 
> 时间：2012-12-09T10:12:01.500
> 
> 标签：android, android-layout, android-intent

我的共享首选项中有一个复选框。我只想在我的设备重新启动（或关闭并通电）后取消选中它。我怎样才能做到这一点 ？我试过像这样使用广播接收器：

```
<receiver android:name="android.dunk.services.MyBroadcastReceiver" >
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
</receiver> 
```

并添加了这个：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

在清单标签中。

在我的广播接收器中：

```
public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if(action != null)
            {
                SharedPreferences sp = ((Activity) context).getPreferences(Context.MODE_PRIVATE);               
                SharedPreferences.Editor editor = sp.edit();
                editor.putBoolean("myCheckBox", false);
                        editor.commit();
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:30:06.963

`Context`传递给的`BroadcastReceiver.onReceive()`不是`Activity`，所以这一行应该抛出一个`CastClassException`（你应该在 logcat 中看到）：

```
SharedPreferences sp = ((Activity) context).getPreferences(Context.MODE_PRIVATE); 
```

您需要使用 的方法`Context`来访问首选项。尝试这个：

```
SharedPreferences sp = context.getSharedPreferences(name, Context.MODE_PRIVATE); 
```

`name`应该是您的包的名称（即`com.myname.myapp`：）

# sphinx - SphinxQL & Phalcon\Mvc\Model

> ID：13786532
> 
> 赞同：1
> 
> 时间：2012-12-09T10:12:29.870
> 
> 标签：sphinx, phalcon

我有一个在 MySQL 协议上运行的 Sphinx 搜索引擎，我使用 Phalcon\Db\Adapter\Pdo\Mysql 连接到它。Sphinx 表作为模型实现。

当我尝试选择（使用 SpinxQL）时，很明显，当数据库适配器尝试提取表元数据运行对 SpinxQL 中不支持和不存在的表的查询时，会出现错误。文档中有一个解决方法显示如何手动分配元数据......但是天生懒惰，我想尝试自动生成元数据。

我假设元数据是由数据库适配器生成的，可能是由于在 getColumnDefinition() 之后的实例上调用 getColumnsList() 或其他东西（？？？）。这是我的假设正确吗？我想要扩展 Phalcon\Db\Adapter\Pdo\Mysql 并覆盖这些方法以与 Sphinx 兼容。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:13:21.107

好的，您需要重写至少两个方法才能使其工作，以下类将工作：

```
<?php

class SphinxQlAdapter extends Phalcon\Db\Adapter\Pdo\Mysql implements Phalcon\Db\AdapterInterface
{

    /**
     * This method checks if a table exists
     *
     * @param string $table
     * @param string $schema
     * @return boolean
     */
    public function tableExists($table, $schema=null)
    {

    }

    /**
     * This method describe the table's columns returning an array of
     * Phalcon\Db\Column
     *
     * @param string $table
     * @param string $schema
     * @return Phalcon\Db\ColumnInterface[]
     */
    public function describeColumns($table, $schema=null)
    {

    }

} 
```

然后在您的连接中，您使用新的适配器：

```
$di->set('db', function(){
    return new SphinxQlAdapter(
        //...
    );
}); 
```

# ruby - 如何知道代码在什么环境下运行？

> ID：13786533
> 
> 赞同：11
> 
> 时间：2012-12-09T10:12:44.003
> 
> 标签：ruby, haml, middleman

在我想确定我们是否在我们的开发和构建环境中的`layout`文件中。`haml`我们正在使用中间人。

我想做这样的事情：

```
- if environment == 'development'
    / Development Code
    = javascript_include_tag "Dev.js" 
```

我试图访问 Ruby 的环境变量，以及在`config.rb`文件中定义一个自定义变量，但没有成功。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-09T16:57:59.207

你几乎做对了——你需要检查一个符号而不是一个字符串：

```
- if environment == :development
    / Development Code
    = javascript_include_tag "Dev.js" 
```

Middleman 还添加了[`development?`和`build?`](https://github.com/middleman/middleman/blob/v3.0.6/middleman-core/lib/middleman-core/application.rb#L200-206)可能更易于使用的[方法：](https://github.com/middleman/middleman/blob/v3.0.6/middleman-core/lib/middleman-core/application.rb#L200-206)

```
- if development?
    / Development Code
    = javascript_include_tag "Dev.js" 
```

这也适用于 ERB：

```
<% if development? %>
<!-- Development Code -->
<%= javascript_include_tag "Dev.js" %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:49:39.160

First, if possible, you should separate the logic from the data. Determine your environment in your controller, and toggle the data being sent to the view (HAML layout file).

Typically you'd set a flag in your environment variables and access it in your code from `ENV`. For instance, Sinatra makes the development/test/production setting available inside the code using their `RACK_ENV` symbol:

```
:environment - configuration/deployment environment A symbol
specifying the deployment environment; typically set to one of
:development, :test, or :production. The :environment defaults to the
value of the RACK_ENV environment variable (ENV['RACK_ENV']), or
:development when no RACK_ENV environment variable is set.

The environment can be set explicitly:

set :environment, :production
```

If you have to roll your own, that's a good way to go about it.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T19:47:55.727

使用中间人默认创建的 :environment 符号： [http ://rubydoc.info/github/middleman/middleman/Middleman/Application#environment-instance_method](http://rubydoc.info/github/middleman/middleman/Middleman/Application#environment-instance_method)

结合 haml - 您可以执行以下操作：

```
= javascript_include_tag "Dev.js" unless :environment == "developement" 
```

请注意，中间人构建过程将 :environment 值更改为“构建”

你也可以使用开发？测试你是否在开发：[http ://rubydoc.info/github/middleman/middleman/Middleman/Application#development%3F-instance_method](http://rubydoc.info/github/middleman/middleman/Middleman/Application#development%3F-instance_method)

以上所有内容都适用于中间人 3.0.6，可能不适用于较小的版本（肯定不适用于 2.x）

# c - 修复卡尔曼平滑函数

> ID：13786538
> 
> 赞同：1
> 
> 时间：2012-12-09T10:13:19.837
> 
> 标签：c

我正在使用以下平滑功能来平滑 GPS 的速度读数。

```
void smoothing_init()
{
    k = 0;
    kalman_init(0.0625, 32, 1.3833094, 0);
}

void kalman_init(double _q, double _r, double _p, double intial_value)
{
    q = _q;
    r = _r;
    p = _p;
    x = intial_value;
}

double smoothing_add_sample(double measurement)
{
    p = p + q;
    k = p / (p + r);
    x = x + k * (measurement - x);
    p = (1 - k) * p;
    return x;
} 
```

但是，有时这会给我平滑值 700（正常范围是 0-150）然后下降。我猜当我用 0 初始化例程但立即接收到高于 0 的读数（例如 40、50）时会发生这种情况。

我如何调整这些功能以自然地防止这种峰值，但仍然能够平滑数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:03:50.753

卡尔曼滤波器是一个估计器，它最小化线性系统`p`的系统状态 () 的方差（在您的代码中） 。`x`方差`p`可以解释为对 的值的置信度的度量`x`。

对于每个时间步`k`，过滤器执行两个步骤：

1.  预测步骤将估计值提前一步传播（在您的情况下，根据方差为 的零均值高斯噪声`x[k+1] = x[k] + w[k]`在哪里）。这意味着状态方差增加了.`w[k]``q``q`
2.  滤波步骤结合了测量信息（根据方差为 的零均值高斯噪声`measurement[k] = x[k] + v[k]`在哪里）。`v[k]``r`

对于经典的估计问题`p`，初始化一个非常大的值（对初始值的置信度很小`x`）。随着时间的推移`p`，它会减小到 附近的某个值`q`。注意`p`独立于`measurement`，所以它只依赖于`q,r`和`p[0]`。

所以对于调整：

*   用一个大的初始化`p`，即`p/r>>0`；的初始化值`x`并不重要。
*   商`r/q`调整平滑的强度（`r/q=0`然后根本没有平滑）。
*   要选择 的幅度`r,q`，您可以假设高斯噪声： 那么您有 95% 的概率真实值位于 的置信区间中`[x-2*sqrt(p), x+2*sqrt(p)]`。

# html - html 到 pdf 免费的基于 linux 的命令行工具

> ID：13786539
> 
> 赞同：-3
> 
> 时间：2012-12-09T10:13:20.030
> 
> 标签：html, perl, pdf

很抱歉重新发布这个问题，也许在过去一年左右更新了一些东西。这里的所有答案都是几年前的，我正在寻找 html 到 pdf 免费的基于 linux 的工具。目前我正在使用有缺陷的 wkhtmltopdf（换行符等）

html 包含 CSS 和 canvas 标签

我将firefox打印测试为pdf并且效果很好，但是我不能在我的安装中使用firefox。也许已经有基于壁虎引擎的免费工具。

我还查看了 perl 模块，但它们都不支持 CSS 。

谢谢急诊室

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:49:41.143

还有另一个工具[CutyCap](http://cutycapt.sourceforge.net/) 也可以通过 WebKit 呈现，虽然我自己没有使用过。

# android - 为什么在使用 setScaleX() 时，motionEvent.getX() 返回不一致的值？

> ID：13786541
> 
> 赞同：3
> 
> 时间：2012-12-09T10:13:48.963
> 
> 标签：android, android-layout, android-event, android-gesture

我的子视图位于 ViewGroup 中。我想用捏缩放（缩放）孩子。我正在使用 setScaleX/Y() 来缩放孩子。比例是在 OnTouch() 中计算 2 个指针之间的距离。但是当我设置孩子的比例时，它会使 motionEvent.getX() 不一致，这使得比例不一致：

```
case MotionEvent.ACTION_MOVE:
    p1.set(ev.getX(firstPointerIndex), v.getY(firstPointerIndex));
    Log.d(TAG,"Touch xy: " + ev.getX(firstPointerIndex) + "," +  ev.getY(firstPointerIndex));
    this.setScaleX(scale);
    this.setScaleY(scale);
    break; 
```

## 输出

这是一个指针的输出：

```
12-09 11:55:14.828: D/IconItem(14408): Touch xy:54.622437, 135.79865
12-09 11:55:14.843: D/IconItem(14408): Touch xy:35.761047, 192.07361
12-09 11:55:14.863: D/IconItem(14408): Touch xy:54.669342, 135.65869
12-09 11:55:14.878: D/IconItem(14408): Touch xy:35.85121, 191.8046
12-09 11:55:14.898: D/IconItem(14408): Touch xy:54.715958, 135.51959
12-09 11:55:14.898: D/IconItem(14408): Touch xy:35.94078, 191.53735
12-09 11:55:14.913: D/IconItem(14408): Touch xy:54.776947, 135.33765 
```

## 问题

问题是在 x 坐标处跳跃 35-54 或在 y 坐标处跳跃 135-191。我不明白这些跳跃是从哪里来的。当我不使用 setScaleX/Y() 时，ev.getX/T() 是一致的 - 没有跳跃。谁能点亮我？我不应该使用这些缩放方法吗？它们会影响 ev.getX/Y() 吗？如何以其他方式实现视图的缩放（捏合）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:05:20.613

是的，每个运动事件都在视图的坐标中给出，同时考虑到视图的矩阵（它又包括比例）。您可以尝试通过`canvas.scale()`而不是缩放视图来进行缩放，如[Make Sense of Multitouch](http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html)中那样，或者可能通过在另一个*未*进行缩放操作的视图中捕获 MotionEvents。

# environment-variables - IPython - 更改环境变量

> ID：13786542
> 
> 赞同：0
> 
> 时间：2012-12-09T10:13:53.253
> 
> 标签：environment-variables, ipython

我尝试让 iPython 和笔记本工作，但我收到以下消息：`UnicodeDecodeError: 'ascii' codec can't decode byte 0xe9 in position 13: ordinal not in range(128)`. 我读到这个：[Windows 上的 Ipython](http://wiki.ipython.org/IPython_on_Windows)：

*   最新版本的 IPython（至少从 0.12.1 开始）使用 %USERPROFILE%（通常是 Vista 和 7 下的 C:\Users\，或 XP 下的 C:\Documents and Settings\）并将您的配置存储在 %USERPROFILE% 中。 ipython 目录。以前版本的 IPython 需要手动设置 %HOME% 环境变量。如果您的用户名中有非 ASCII 字符，并且在启动时遇到 UnicodeError 崩溃，您可能需要手动将 %HOME% 设置为仅具有 ASCII 名称的目录（像 C:\home 这样的目录可能已经足够好了如果您是计算机的唯一用户）。然而，这还没有在最新版本的 IPython 上进行测试。

我有一个非 ASCII 字符的用户名。看起来这是解决方案，但我该如何解决？我是新手，知道在哪里更改变量，但我不知道该写什么。我创建了一个我想使用的文件夹 c:\ipython 并运行 Windows 7 Home Edition。如果您知道如何解决，可能很容易解决...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:26:13.357

已修复：更改的环境变量：IPYTHON_DIR 设置为文件夹 c:\ipython。用 IPYTHONDIR 尝试了很多次，但没有成功。

# c# - 如何在 C# 中实现 3 层架构

> ID：13786549
> 
> 赞同：7
> 
> 时间：2012-12-09T10:14:55.037
> 
> 标签：c#, architecture, 3-tier

我阅读了很多关于 c# 中的 3 层架构的文章，但我看到：

*   几乎使用业务逻辑层（BLL）作为对象映射数据库中的对应表。这个 BLL 对象有一些像这样的方法：

    + `GetData()`：返回这个；

    + `Update(this)`;

    + `Insert(this)`;

    + `Delete(this)`;

*   该 BLL 对象调用相应的 DAL（数据访问层）来执行相应的数据库表。

*   我想如果使用上述方法，我们可以只获取一条记录并更新它。但是如果我们有很多记录并且想把它放到一个数据集中，我们如何更新所有改变的记录呢？我们必须对所有记录使用循环来做到这一点吗？
*   此外，在数据库中，有很多相互关联的表，那么我们如何将它们放入数据集中，建立关系以及添加，更新，删除记录，如使用`BindingSource`with a`Combobox`和 a `DataGridView`？在这种情况下我们如何分离代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T10:20:39.873

![在此处输入图像描述](../Images/37cc2318547409d1d2343dd44f2d554e.png)

上面描述了一个非常简单的三层模型架构。

1.  DAL（数据访问层）直接与数据库交互，因此所有 SQL 操作都仅在 DAL 内完成。
2.  BLL（业务逻辑层）就像 DAL 和 Presentation Tire 之间的中介。
3.  DAL 和表示层之间不允许直接通信。
4.  虽然实体层没有物理存在，但实体封装了所有信息/数据，并将其从一层传递到另一层。
5.  因此，所有数据库对象名称和数据库模式都被限制在 DAL 内，这为应用程序提供了额外的安全层。
6.  由于 BLL 中定义了业务规则/逻辑，因此对业务逻辑的任何更新都不会影响 DAL 和表示层

![在此处输入图像描述](../Images/b2a0cd7c44fbf3e866aa0b1c4836b06f.png)

此图描述了 3 层模型的实际实现。

1.  数据访问服务和数据库服务器可以托管在单个服务器中。
2.  大多数 SQL Server 2000/2005/2008 或 Oracle 可以托管在 Windows 2000/2003 Server 上。
3.  Business Server 通过 Web Service /Remoting/WCF 公开所有操作。
4.  具有 Windows 2000/2003 的高度配置的服务器可用于托管业务服务，或者 Microsoft BizTalk Server 也可用于此。
5.  表示层或客户端通过 http:// 管道使用代理来使用在业务服务器上公开的服务。
6.  客户端可以是任何独立机器，如果是桌面应用程序（Win-Form 或控制台应用程序）正在安装应用程序，或者具有运行 Web 应用程序的浏览器。
7.  数据/信息由实体封装，并通过网络从一个位置传输到另一个位置，然后是所有网络协议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T10:20:30.647

在 C# 中有 2 个关于三层架构的酷项目。

C#和[T̶h̶r̶e̶e̶L̶a̶y̶e̶r̶A̶r̶c̶h̶i̶t̶e̶c̶t̶u̶r̶e̶̶i̶n̶̶C̶#̶̶.̶N̶E̶T̶](http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET)[中的 3 层架构](http://www.codeproject.com/Articles/11128/3-tier-architecture-in-C)。这两个项目都特别适合您。

![在此处输入图像描述](../Images/938978c4a22cbebfefe7f08b000f827b.png)

![在此处输入图像描述](../Images/161ae534441cef65caac3697a3f57b0e.png)

# ruby - 检查两个哈希是否具有相同的一组键

> ID：13786550
> 
> 赞同：6
> 
> 时间：2012-12-09T10:14:57.277
> 
> 标签：ruby, hash

什么是检查两个哈希是否具有相同的键集而不管顺序`h1`的最有效方法是什么？`h2`它可以比我发布的答案更快或更简洁吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T12:48:40.353

好吧，让我们打破所有关于*生活品味*和便携性的规则。MRI 的 C API 开始发挥作用。

```
/* Name this file superhash.c. An appropriate Makefile is attached below. */
#include <ruby/ruby.h>

static int key_is_in_other(VALUE key, VALUE val, VALUE data) {
  struct st_table *other = ((struct st_table**) data)[0];
  if (st_lookup(other, key, 0)) {
    return ST_CONTINUE;
  } else {
    int *failed = ((int**) data)[1];
    *failed = 1;
    return ST_STOP;
  }
}

static VALUE hash_size(VALUE hash) {
  if (!RHASH(hash)->ntbl)
    return INT2FIX(0);
  return INT2FIX(RHASH(hash)->ntbl->num_entries);
}

static VALUE same_keys(VALUE self, VALUE other) {
  if (CLASS_OF(other) != rb_cHash)
    rb_raise(rb_eArgError, "argument needs to be a hash");
  if (hash_size(self) != hash_size(other))
    return Qfalse;
  if (!RHASH(other)->ntbl && !RHASH(other)->ntbl)
    return Qtrue;
  int failed = 0;
  void *data[2] = { RHASH(other)->ntbl, &failed };
  rb_hash_foreach(self, key_is_in_other, (VALUE) data);
  return failed ? Qfalse : Qtrue;
}

void Init_superhash(void) {
  rb_define_method(rb_cHash, "same_keys?", same_keys, 1);
} 
```

这是一个Makefile。

```
CFLAGS=-std=c99 -O2 -Wall -fPIC $(shell pkg-config ruby-1.9 --cflags)
LDFLAGS=-Wl,-O1,--as-needed $(shell pkg-config ruby-1.9 --libs)
superhash.so: superhash.o
    $(LINK.c) -shared $^ -o $@ 
```

一个人工的、合成的和简单的基准显示了以下内容。

```
require 'superhash'
require 'benchmark'
n = 100_000
h1 = h2 = {a:5, b:8, c:1, d:9}
Benchmark.bm do |b|
  # freemasonjson's state of the art.
  b.report { n.times { h1.size == h2.size and h1.keys.all? { |key| !!h2[key] }}}
  # This solution
  b.report { n.times { h1.same_keys? h2} }
end
#       user     system      total        real
#   0.310000   0.000000   0.310000 (  0.312249)
#   0.050000   0.000000   0.050000 (  0.051807) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T11:39:03.233

结合[freemasonjson](https://stackoverflow.com/a/13786977/1067663)和[sawa的](https://stackoverflow.com/a/13786555/1067663)想法：

```
h1.size == h2.size and (h1.keys - h2.keys).empty? 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-09T11:29:15.497

尝试：

```
# Check that both hash have the same number of entries first before anything
if h1.size == h2.size
    # breaks from iteration and returns 'false' as soon as there is a mismatched key
    # otherwise returns true
    h1.keys.all?{ |key| !!h2[key] }
end 
```

[可枚举#all?](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-all-3F)

更糟糕的情况是，您只会遍历键一次。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-09T12:26:59.463

只是为了在这个问题上至少有一个基准......

```
require 'securerandom'
require 'benchmark'

a = {}
b = {}

# Use uuid to get a unique random key
(0..1_000).each do |i|
  key = SecureRandom.uuid
  a[key] = i
  b[key] = i
end

Benchmark.bmbm do |x|
  x.report("#-") do
    1_000.times do
      (a.keys - b.keys).empty? and (a.keys - b.keys).empty?
    end
  end

  x.report("#&") do
    1_000.times do
      computed = a.keys & b.keys
      computed.size == a.size
    end
  end

  x.report("#all?") do
    1_000.times do
      a.keys.all?{ |key| !!b[key] }
    end
  end

  x.report("#sort") do
    1_000.times do
      a_sorted = a.keys.sort
      b_sorted = b.keys.sort
      a == b
    end
  end
end 
```

结果是：

```
Rehearsal -----------------------------------------
#-      1.000000   0.000000   1.000000 (  1.001348)
#&      0.560000   0.000000   0.560000 (  0.563523)
#all?   0.240000   0.000000   0.240000 (  0.239058)
#sort   0.850000   0.010000   0.860000 (  0.854839)
-------------------------------- total: 2.660000sec

            user     system      total        real
#-      0.980000   0.000000   0.980000 (  0.976698)
#&      0.560000   0.000000   0.560000 (  0.559592)
#all?   0.250000   0.000000   0.250000 (  0.251128)
#sort   0.860000   0.000000   0.860000 (  0.862857) 
```

我必须同意@akuhn 的观点，如果我们有更多关于您正在使用的数据集的信息，这将是一个更好的基准。但话虽如此，我相信这个问题确实需要一些确凿的事实。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-09T12:03:58.547

这取决于您的数据。

真的没有*一般情况。*例如，通常一次检索整个密钥集比单独检查每个密钥的包含要快。但是，如果在您的数据集中，键集经常不同，那么失败速度较慢的解决方案可能会更快。例如：

```
h1.size == h2.size and h1.keys.all?{|k|h2.include?(k)} 
```

另一个需要考虑的因素是哈希的大小。如果它们是具有较高设置成本的大型解决方案，例如调用`Set.new`，可能会得到回报，但如果它们很小，则不会：

```
h1.size == h2.size and Set.new(h1.keys) == Set.new(h2.keys) 
```

而且，如果您碰巧一次又一次地比较相同的不可变哈希，那么缓存结果肯定会有所回报。

最终，只有基准测试才能说明问题，但是，要编写基准测试，我们需要更多地了解您的用例。当然，使用合成数据（例如，随机生成的密钥）测试解决方案不会具有代表性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-09T10:15:36.233

这是我的尝试：

```
(h1.keys - h2.keys).empty? and (h2.keys - h1.keys).empty? 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-18T19:23:48.230

这是我的解决方案：

```
class Hash
    # doesn't check recursively
    def same_keys?(compare)
        if compare.class == Hash
            if self.size == compare.size
               self.keys.all? {|s| compare.key?(s)}
            else
                return false
            end
        else
            nil
        end
    end
end

a = c = {  a: nil,    b: "whatever1",  c: 1.14,     d: true   }
b     = {  a: "foo",  b: "whatever2",  c: 2.14,   "d": false  }
d     = {  a: "bar",  b: "whatever3",  c: 3.14,               }

puts a.same_keys?(b)                    # => true
puts a.same_keys?(c)                    # => true
puts a.same_keys?(d)                    # => false   
puts a.same_keys?(false).inspect        # => nil
puts a.same_keys?("jack").inspect       # => nil
puts a.same_keys?({}).inspect           # => false 
```

# string - Visual Basic 字符串问题

> ID：13786556
> 
> 赞同：2
> 
> 时间：2012-12-09T10:15:39.853
> 
> 标签：string, vb6

每次我尝试将任何类型的字符串归因于此时，我都会得到未设置为对象实例的对象引用。我已经尝试了处理字符串的所有可能方式的组合，再次将其转换为字符串以及所有的模糊处理。这非常令人沮丧，我想这是结构/类使用和字符串数组或诸如此类的某种基本原则（这也很愚蠢）

```
Private Class movie
    Public name As String
    Public actors As String
    Public year As Integer
    Public country As String
    Public votes As Integer

End Class

Private movies() As movie

If File.Exists(OpenFileDialog1.FileName) Then

        lblPath.Text = OpenFileDialog1.FileName
        Dim iFile As New StreamReader(lblPath.Text)

        While Not iFile.EndOfStream

            current = iFile.ReadLine

            movies(i).name = "sasasasa"

            lbMovies.Items.Add(movies(i).name)
            i = i + 1

        End While
    End If 
```

这些是我使用它的代码部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:38:59.710

`movie`如前所述，您正在创建一个空的对象数组。因此`movies(i)`是`Nothing`。当您尝试访问成员 ( `movies(i).name`) 时，会生成相应的异常。请注意，您的代码甚至没有到达赋值运算符`=`，但在此之前失败了。换句话说，这与字符串完全无关。如果你改写，你会得到同样的错误`movies(i).votes = 42`。要修复您的代码，您首先必须创建一个`movie`对象，填充它并将其附加到您的数组中。

# javascript - 为什么在 Firefox 插件 sdk 中没有执行 page-mod 模块中的 onAttach？

> ID：13786558
> 
> 赞同：2
> 
> 时间：2012-12-09T10:16:31.683
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在编写一个使用[上下文菜单](https://addons.mozilla.org/en-US/developers/docs/sdk/1.11/packages/addon-kit/context-menu.html)和[页面](https://addons.mozilla.org/en-US/developers/docs/sdk/1.11/packages/addon-kit/page-mod.html)模块模块的 Firefox 插件。

当上下文是输入控件时，此插件会在上下文菜单中添加一个新菜单项。单击菜单项时，我请求服务器获取一些数据并将结果推送到`page-mod`正在使用的内容脚本。

由于某种原因，`onAttach`函数没有被调用。控制台中没有错误。我不确定为什么它没有被调用。这就是我正在做的事情。

```
var data = require("self").data,
    contextMenu = require("context-menu"),
    request = require("request").Request;

var workers = [];
var pageMod = require("page-mod");
pageMod.PageMod({
    include: '*',
    contentScriptWhen: 'ready',
    contentScriptFile: [data.url("jquery-1.8.2.min.js"), data.url("varnam.js")],
    onAttach: function(worker) {
        console.log("onAttach");
        workers.push(worker);
        worker.on("detach", function() {
            var index = workers.indexOf(worker);
            if (index >= 0) workers.splice(index, 1);
        });
    }
}); 
```

解决此问题的任何帮助都会很棒。完整代码可[在此处](https://github.com/navaneeth/varnam-browser-addons/blob/master/firefox/lib/main.js)获得。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T16:31:48.453

当 url 模式以（或只是）一个星号开头时，它会与具有`http`,`https`和的方案的 url 匹配`ftp`。

由于您的测试页面位于数据目录中，因此其 url 方案为`resource`. 这就是没有触发 PageMod 的原因。

您可以通过执行类似的操作来添加测试页 url

```
var varnam = pageMod.PageMod({ 
// blah blah
});

varnam.include.add(data.url("test.html")); 
```

# delphi - 如何调用 EnumWindowsProc？

> ID：13786563
> 
> 赞同：6
> 
> 时间：2012-12-09T10:17:04.200
> 
> 标签：delphi, delphi-xe2

我正在尝试列出我计算机上所有正在运行的进程。

`EnumWindowsProc()`我的简短示例代码中的调用语句有什么问题。我的编译器声称，在这一行中：

```
EnumWindows(@EnumWindowsProc, ListBox1); 
```

函数调用中需要有一个变量。我应该如何更改`@EnumWindowsProc`为 var ？

```
unit Unit_process_logger;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, 
  System.Classes, Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, 
  Vcl.ExtCtrls, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    ListBox1: TListBox;
    Timer1: TTimer;
    procedure Timer1Timer(Sender: TObject);
  private
    { Private-Deklarationen }    
  public
    { Public-Deklarationen }
  end;

function EnumWindowsProc(wHandle: HWND; lb: TListBox): Boolean;

var
  Form1: TForm1;

implementation

{$R *.dfm}

function EnumWindowsProc(wHandle: HWND; lb: TListBox): Boolean;
var
  Title, ClassName: array[0..255] of Char;
begin
  GetWindowText(wHandle, Title, 255);
  GetClassName(wHandle, ClassName, 255);
  if IsWindowVisible(wHandle) then
     lb.Items.Add(string(Title) + '-' + string(ClassName));
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  ListBox1.Items.Clear;    
  EnumWindows(@EnumWindowsProc, ListBox1);    
end;

end. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-09T10:36:42.653

首先声明是错误的。它需要`stdcall`，它会返回`BOOL`。

```
function EnumWindowsProc(wHandle: HWND; lb: TListBox): BOOL; stdcall; 
```

其次，您的实现没有设置返回值。返回`True`继续枚举，`False`停止枚举。在您的情况下，您需要返回`True`。

最后，您需要在`LPARAM`调用时将列表框转换为`EnumWindows`.

```
EnumWindows(@EnumWindowsProc , LPARAM(ListBox1)); 
```

有关完整的详细信息，请参阅[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633498.aspx)。

把它们放在一起你有这个：

```
function EnumWindowsProc(wHandle: HWND; lb: TListBox): BOOL; stdcall;
var
  Title, ClassName: array[0..255] of char;
begin
  GetWindowText(wHandle, Title, 255);
  GetClassName(wHandle, ClassName, 255);
  if IsWindowVisible(wHandle) then
    lb.Items.Add(string(Title) + '-' + string(ClassName));
  Result := True;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  ListBox1.Items.Clear;
  EnumWindows(@EnumWindowsProc, LPARAM(ListBox1));
end; 
```

另请注意，`EnumWindows`它不会枚举所有正在运行的进程。它所做的是枚举所有顶级窗口。注意完全相同的事情。要枚举所有正在运行的进程，有`EnumProcesses`. 但是，由于您正在读出窗口标题和窗口类名称，您可能确实想要使用`EnumWindows`.

* * *

正如我之前多次说过的，我讨厌 Delphi 标头转换用于`EnumWindows`参数的`Pointer`事实。`EnumWindowsProc`这意味着您不能依赖编译器来检查类型安全。我个人总是使用我自己的`EnumWindows`.

```
type
  TFNWndEnumProc = function(hwnd: HWND; lParam: LPARAM): BOOL; stdcall;

function EnumWindows(lpEnumFunc: TFNWndEnumProc; lParam: LPARAM): BOOL;
  stdcall; external  user32; 
```

然后，当您调用该函数时，您不使用`@`运算符，因此让编译器检查您的回调函数是否已正确声明：

```
EnumWindows(EnumWindowsProc, ...); 
```

# android - 在包“android”中找不到属性“parentActivityName”的资源标识符

> ID：13786564
> 
> 赞同：37
> 
> 时间：2012-12-09T10:17:21.760
> 
> 标签：android, android-4.0-ice-cream-sandwich

我正在尝试从 Android 页面 [http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)完成本教程但我 Eclipse 抛出此错误：“未找到属性‘parentActivityName’的资源标识符在“android”包中”我已经包含了 android-support-library。

这是整个 AndroidManifest.xml 代码

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myfirstapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.DisplayMessageActivity"
        android:label="@string/title_activity_display_message" 
        android:parentActivityName="com.example.myfirstapp.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstapp.MainActivity" />
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-09T10:22:50.397

`android:parentActivityName`首先出现在 Android 4.1（API 级别 16）中。你需要有最新的 4.1 SDK 来编译它。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-13T12:47:36.257

要添加到 David Wasser 的答案，如果您使用 Eclipse 并安装了正确的 SDK 库但仍然出现此错误，这意味着安装了正确的库时 Eclipse 不会将其用于该项目。

要更改它，请转到项目的属性（在 Package Explorer 中右键单击其名称，这是最后一个选项），在左侧列中选择 Android，您应该有一个名为 Project Build Target 的列表。然后：

*   选择适当的目标（在本例中为 Android 4.2.2 或 Google APIs for Platform 4.2.2）

*   保存您的清单文件（如有必要，进行简单的编辑）

保存后，Eclipse 将对其进行处理，并且当 Eclipse 在其新构建目标中找到资源标识符时，这些错误应该会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T05:00:04.057

如果您没有示例应用程序用作其构建目标的 SDK 的确切版本，也会发生此错误。按照上面 Julien 描述的相同步骤并选择您在本地拥有的 SDK 将修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T07:09:37.720

在 IntelliJ IDEA 中，您需要在*Platform Settings* -> *SDKs* -> *Android something* -> *Build target* TO 4.1+ 中进行更改。

如果您没有看到该选项，则需要 SDK 版本 4.1 或更高版本（API 级别 16+）。

# c# - 确定托管资源和非托管资源

> ID：13786570
> 
> 赞同：20
> 
> 时间：2012-12-09T10:18:21.167
> 
> 标签：c#, .net, resources, idisposable

关于托管资源和非托管资源有很多问题。我了解两者的基本定义。但是，我很难知道资源或对象何时是托管的或非托管的。

当我想到非托管资源时，我倾向于想到不直接属于 .NET 的本机代码，例如 pinvoke 或封送资源。我通常会认为资源旨在与将使用硬件的东西接口，例如文件句柄或网络连接也不受管理。

包装原生非托管资源（如 .NET）的 .NET 对象呢`FileStream`？

必须`FileStream`使用非托管资源，但是当我实现该`IDisposable`模式时，我应该将其视为托管资源还是非托管资源？

到目前为止，我一直假设如果对象实现了`IDisposable`，那么它是被管理的。我怎么知道`IntPtr`应该作为非托管资源处理？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-09T10:53:49.700

> 必须`FileStream`使用非托管资源，但是当我实现 IDisposable 模式时，我应该将其视为托管资源还是非托管资源？

FileStream 是一种**托管资源**。

托管资源是包含（并且必须管理）非托管资源的类。通常实际资源是向下的几层。

> 到目前为止，我一直假设如果对象实现了`IDisposable`，那么它是被管理的。

正确的。

> 我怎么知道 IntPtr 应该作为非托管资源处理？

从您从中获得价值的 API 的文档中。但请注意，在实践中，大多数程序员从不直接处理非托管资源。当您必须这样做时，使用`SafeHandle`该类将非托管资源转换为托管资源。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-09T15:22:46.757

这非常简单，您*永远不会*意外分配非托管资源。需要一个 pinvoke 调用来分配它，你会知道的。术语“对象”是重载的，但不存在非托管对象之类的东西，.NET 程序中的所有对象都是托管的。您可以与用另一种支持创建对象的语言（如 C++）编写的代码进行互操作。但是您不能直接使用这样的对象，需要 C++/CLI 包装器。这使它成为实现 IDisposable 的托管类。

如果您使用的是文档记录不佳的库，那么当您返回 IntPtr 时请务必注意。这是一个非常强烈的迹象，表明涉及到非托管分配，要么是指向非托管内存的指针，要么是操作系统句柄。如果它没有自动管理它，那么该库还应该为您提供一种释放它的方法。如果您不确定如何正确处理，请联系图书馆所有者。

围绕所有常见操作系统资源提供托管包装类是 Microsoft 的工作。像 FileStream、Socket 等。这些类几乎总是实现 IDisposable。当您将此类对象存储在自己的类中时，您在代码中唯一需要做的就是自己实现 IDisposable，这样您就可以在这些对象上调用 Dispose() 方法。或者，如果您将它们用作方法中的局部变量，请使用*using语句。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:36:08.290

在这种情况下，将“资源”理解为“一个对象要求其他人代表它做的事情，直到另行通知，这会损害其他所有人”是最有帮助的。如果放弃一个对象会导致垃圾收集器通知该对象放弃，并且该对象反过来指示代表它行事的任何事物停止这样做，则该对象构成“托管资源”。“非托管资源”是未封装在托管资源中的资源。

如果某个对象`Foo`为非托管内存分配了句柄，它会要求内存管理器授予它对某个内存区域的独占使用权，使其对任何其他可能想要使用它的代码不可用，直到`Foo`通知内存管理器不再需要内存，因此应将其用于其他目的。使句柄成为非托管资源的原因不是它是通过 API 接收的，而是即使放弃了对它的所有故意引用，内存管理器也会永远继续将内存的独占使用权授予一个没有不再需要它（并且可能不再存在）。

虽然 API 句柄是最常见的非托管资源类型，但还有无数其他类型。诸如监视器锁和事件之类的东西完全存在于 .net 的托管代码世界中，但仍然可以表示非托管资源，因为获取锁并在代码等待它时放弃可能会导致该代码永远等待，并且由于短暂的从长寿命对象订阅事件并且在被放弃之前未能取消订阅的对象可能会导致该长寿命对象无限期地继续携带事件引用（如果只放弃一个订阅者，这是一个小负担，但一个无限的负担如果创建和放弃了无限数量的订阅者）。

**附录** 垃圾收集器的一个基本假设是，当对象 X 持有对对象 Y 的引用时，这是因为 X 对 Y“感兴趣”。然而，在某些情况下，可能持有该引用是因为 X 希望 Y 持有一个引用即使 Y 不以某种方式“关心”它。这种情况在通知事件处理程序中经常发生。每次对象 X 发生某些事情时，对象 Y 可能希望得到通知。尽管 X 必须保留对 Y 的引用以便执行此类通知，但 X 本身并不关心通知。它只执行它们是因为假设某些根对象可能关心 Y 接收它们。

在某些情况下，可以使用所谓的“弱事件模式”。不幸的是，虽然 .net 中有许多弱事件模式，但由于缺乏适当的`WeakDelegate`类型，它们都有一些怪癖和限制。此外，虽然弱事件是有帮助的，但它们并不是灵丹妙药。假设，例如，当发生某事时，它`Y`要求长寿命对象`X`通知它，唯一现有的引用`Y`是`X`用于此类通知的引用，此类通知的唯一`Y`作用是增加某个 object 中的属性`Z`，并且设置该属性不会修改任何外部`Z`。在这种情况下，即使 object`Z`将是宇宙中唯一“关心” object 的事物`Y`，`Z`不会持有任何类型的引用`Y`，因此垃圾收集器将无法将`Y`的生命周期与`Z`. 如果 a`X`持有对 的强引用`Y`，即使没有人对它感兴趣，后者也会保持活动状态。如果`X`只持有一个弱引用，那么`Y`即使`Z`对它感兴趣也可能被垃圾收集。没有机制可以让垃圾收集器自动推断出`Z`对`Y`.

# groovy - 每个 Grails 索引

> ID：13786575
> 
> 赞同：3
> 
> 时间：2012-12-09T10:18:52.273
> 
> 标签：groovy

我的控制器中有以下代码。如何访问每个索引？

```
def arr = ['a', 'b', 'c']

arr.each
{
// 'it' is the element
println it
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T11:02:31.203

您可以使用[eachWithIndex](http://groovy.codehaus.org/Looping)：

```
arr.eachWithIndex { obj, i ->
    println "${i}: ${obj}"
} 
```

# c# - 编写单元测试用例

> ID：13786576
> 
> 赞同：0
> 
> 时间：2012-12-09T10:19:07.393
> 
> 标签：c#, unit-testing

我已经开始在我的一些项目中使用单元测试并且我有一个小问题，我需要测试一种方法，并且我已经没有想法作为示例：我有这个

```
 public class Clients
    {
      Public Assignment AssignClient(int? clientRef, int? productRef)
       //Assignment is an enum that has success,Failure,etc...
        {
         If(!checkClientAge(int clientRef)) Return Assignment.Tooyoung;
          If(!checkClientAvailability(int clientRef)) Return Assignment.NotAvailable;
         If(! checkProductavailability(int productRef)) Return Assignment.ProductNotAvailable;
        }
     } 
```

我对客户端类和`AssignClient`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:30:55.273

如果您正在测试`Clients`该类，那么您不要模拟它，您需要一个真实的实例。相反，您模拟了它使用的其他类，以便您可以从它们返回已知和可预测的结果，并消除数据库访问、UI 交互等复杂性。

除非对私有方法的三个调用设置了外部可见的标志或属性，否则该`AssignClient`方法不是单元测试的良好候选者——如果它们不设置，则没有任何可测量或观察的内容，您无法判断测试是成功还是失败。

# java - 带有 actionbarsherlock 的 Android ICS Spinner

> ID：13786577
> 
> 赞同：1
> 
> 时间：2012-12-09T10:19:12.693
> 
> 标签：java, android, actionbarsherlock, android-spinner

嗨，伙计们，我想在我的 android 应用程序中使用 ICS spinner，这样我就可以在视图之间移动（最小 API 10），我正在使用 ABS。那么在我的情况下如何添加和使用微调器（但请详细说明），以及如何在 ABS 中添加附加按钮？谢谢你的时间:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:02:28.120

> ICS Spinner：像 gamil 应用程序一样在您的帐户之间进行选择

使用`setNavigationMode()`and `NAVIGATION_MODE_LIST`with `ActionBar`，如[本示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/ListNav)所示以及[文档中所述](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)。

> 附加按钮，如 ICS 操作栏中的共享按钮，但要执行另一项工作，例如创建某些东西添加 somthing

执行此操作的方式与将项目添加到溢出菜单（或旧选项菜单）中的方式相同，只是您`android:showAsAction`在菜单 XML 中包含（例如`android:showAsAction="always"`），如[本示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/ActionBarDemo)中所示和[文档中所介绍的](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)那样。

# javascript - 使用javascript从url获取子域

> ID：13786581
> 
> 赞同：2
> 
> 时间：2012-12-09T10:19:35.033
> 
> 标签：javascript, riak

我有一个标准网址，例如

```
http://www.test.com/test1/test2.html 
```

我在 riak 中使用 javascript 来减少地图，并且只想提取 www.test.com。所以...域和子域。

既然我将拥有数百万条记录，那么在 js 中执行此操作的最有效方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T10:26:41.163

看看这个答案：[https ://stackoverflow.com/a/8498629/623400](https://stackoverflow.com/a/8498629/623400)

```
var matches = url.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);
var domain = matches && matches[1];  // domain will be null if no match is found 
```

复杂的域匹配有点棘手，但所有这些都在链接的帖子中得到了很好的介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:40:40.673

试试这个：

```
var url = "http://www.test.com/test1/test2.html";
var domain = url.match(/:\/\/(.[^/]+)/)[1] 
```

# css - 带有 CSS 的垂直线

> ID：13786584
> 
> 赞同：1
> 
> 时间：2012-12-09T10:20:06.267
> 
> 标签：css, background, line, vertical-alignment

我有一个`#comments`包含元素的`.comment`元素。我想从左到右有 5 条垂直线，每条宽度为 1 像素，高度为 100%（直到`#comments`元素的末尾），它们之间有 20 像素并且没有图像。我自己尝试过这样做，但我的 CSS-fu 并没有那么高。任何帮助将非常感激。

**HTML：**

```
<div id="comments">
    <div class="comment level1">Lorem ipsum dolor sit amet</div>
    <div class="comment level2">Lorem ipsum dolor sit amet</div>
    <div class="comment level3">Lorem ipsum dolor sit amet</div>
</div> 
```

**CSS：**

```
#comments {
    width: 400px;
    border: 1px solid black;
}
.comment {
    margin: 10px 0;
}
.level1 {}
.level2 { margin-left: 20px; }
.level3 { margin-left: 40px; } 
```

[演示](http://jsfiddle.net/tuZB6/1/)。

这是我的想象：

```
|[comment      ]
|  |[comment   ]
|  |[comment   ]
|  |  |[comment] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:54:38.873

是否有某些原因需要将所有 div 作为外部父 div 的直接子级？如果你嵌套 div，你可以很容易地做到这一点：

CSS：

```
div div {
    border-left: 1px solid black;
    padding-left:20px;
} 
```

嵌套的html

```
<div id="comments">
    <div>Lorem ipsum dolor sit amet</div>
    <div>Lorem ipsum dolor sit amet
        <br/>
        <div>Lorem ipsum dolor sit amet
            <br/>
            <div>Lorem ipsum dolor sit amet
                <br/>
                <div>Lorem ipsum dolor sit amet</div>
                <div>Lorem ipsum dolor sit amet
                   <br/>
                   <div>Lorem ipsum dolor sit amet</div>                
                </div>
            </div>
        </div>
    </div>
</div> 
```

更新的小提琴显示了它在此处嵌套到 5 个级别的外观：

[http://jsfiddle.net/webchemist/tuZB6/4/](http://jsfiddle.net/webchemist/tuZB6/4/)

# c# - 无法对拆分的文本求和

> ID：13786585
> 
> 赞同：0
> 
> 时间：2012-12-09T10:20:12.777
> 
> 标签：c#

`bx3.text`总结所有to时遇到问题`t2.text`。`bx3.text`首先我用空间分割

```
 private void total()
    {
        string[] ps = bx3.Text.Split(new string[] {" "}, StringSplitOptions.None );
        t2.Text = ps.Select(x => Convert.ToInt32(x)).Sum().ToString();
    } 
```

我确实尝试过`t2.text = ps[1]`，显示的数字是正确的。但是当我试图总结一切时，我得到了错误

> (x => Convert.ToInt32(x)) 上的“输入字符串格式不正确”

bx3.text 充满了由单个空格分隔的用户输入数字“”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:30:37.423

尝试这个：

```
 string output = ps.Select(x =>
                                { 
                                    int myInt = 0;
                                    int.TryParse(x, out myInt);
                                    return myInt;
                                })
                                .Sum().ToString(); 
```

上面的代码将对 ps 数组中的所有整数求和，并将省略所有非整数值。

第一种情况：如果 x 是整数 (x=1)

```
 int myInt = 0;
  int.TryParse(x, out myInt); // change value of myInt to 1, because x is integer
  return myInt; // return 1 
```

第二种情况：如果 x 不是整数 (x="aaa")

```
 int myInt = 0;
  int.TryParse(x, out myInt); // don't change value of myInt, because x is not integer
  return myInt; // return 0 
```

如果 x 不是整数函数 TryParse 总是将 myInt 的值设置为零（[msdn doc](http://msdn.microsoft.com/en-us/library/vstudio/f02979c7%28v=vs.100%29.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:29:19.580

您的字符串中有无效字符。
因此，如果 bx3.Text 的内容 = "1 2 3 4 5"，那么它将正常工作。

IE，

```
 bx3.Text = "1 2 3 4 5";
        string[] ps = bx3.Text.Split(new string[] {" "}, StringSplitOptions.None );
        t2.Text = ps.Select(x => Convert.ToInt32(x)).Sum().ToString();
         Console.WriteLine(t2.Text); 
```

将打印出来`15`。
您可以使用过滤掉无效字符串`TryParse`

像这样：

```
 string bx3 = "1 2 3 4 5abc d e 6";
            string[] ps = bx3.Split(new string[] { " " }, StringSplitOptions.None);
            int a =0;
            Console.WriteLine(ps.Where(x=>Int32.TryParse(x, out a)).Select(x => Int32.Parse(x)).Sum().ToString()); 
```

会打印出来`16`

# f# - f# 类型提供程序和 INPC 元编程

> ID：13786586
> 
> 赞同：4
> 
> 时间：2012-12-09T10:20:22.047
> 
> 标签：f#, inotifypropertychanged, type-providers

我阅读了以下文章

[http://studentguru.gr/b/kron/archive/2012/09/26/c-template-metaprogramming-and-f-type-providers.aspx](http://studentguru.gr/b/kron/archive/2012/09/26/c-template-metaprogramming-and-f-type-providers.aspx)

它显示了一种使用 F# 类型提供程序进行编译时斐波那契序列生成的方法。解决方案在文章中，但最终程序是

```
> cat .\fib.fs
type fib = Playground.StaticFibonacci<100000>
printfn "Fibonacci(100000) has %d digits" fib.Value.Length
> fsc .\fib.fs -o fib.exe -r:.\FibonacciTypeProvider.dll –nologo
> .\fib.exe
Fibonacci(100000) has 20899 digits 
```

这看起来很强大。我想知道是否可以为 INPC ( INotifyPropertyChanged ) 创建一个类型提供程序，这样您就可以代替

```
open System.ComponentModel

type MyObject() =
    let mutable propval = 0.0

    let propertyChanged = Event<_, _>()
    interface INotifyPropertyChanged with
        [<clievent>]
        member x.PropertyChanged = propertyChanged.Publish

    member this.MyProperty
        with get() = propval
        and  set(v) =
            propval <- v
            propertyChanged.Trigger(this, new PropertyChangedEventArgs("MyProperty")) 
```

你也许可以写

```
open System.ComponentModel

type MyObject() =
    let mutable propval = 0.0

    let propertyChanged = Event<_, _>()
    interface INotifyPropertyChanged with
        [<clievent>]
        member x.PropertyChanged = propertyChanged.Publish

    member this.MyProperty : INPCTypeProvider<double> 
```

因此，在我浪费半天时间深入研究这个问题之前，也许更知情的人会告诉我我在浪费时间，而且这种级别的元编程是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:41:54.173

I do not think you can achieve this with F# type providers (but I can see that that it would be nice). There is a number of problems and thoughts I can think of:

*   In your example, your `INPCTypeProvider<double>` would have to return something like a representation of a "property". This is not possible, because properties are not first-class values (unlike events). If they were, you wouldn't need a type provider...

*   Type provider cannot be parameterized by an existing type, so you cannot write say:

    ```
    type MyNotifyObject = ProvideNotifiable<MyObject> 
    ```

    If this was possible, `ProvideNotifiable` could be a provider taking a type and building a new type with additional interface implementation. But this is not possible at the moment.

*   If you only need simple types, you might be able to create something like:

    ```
    type MyObject = ProvideNotifiable<"MyProperty:int, OtherProperty:string"> 
    ```

    This could generate a type with the two properties (defined in the string), but you cannot add anything more to the generated type (although, you might be able to generate actual type using *generative provider* and inherit from it...) I think this is probably the best you can do.

Aside from type providers, you can simplify the implementation of `INotifyPropertyChanged` a bit by using quotations. This [F# snippet gives a simple example](http://fssnip.net/4Q) that makes the implementation safer.

# ruby-on-rails - 将搜索字段输入转换为 url

> ID：13786593
> 
> 赞同：0
> 
> 时间：2012-12-09T10:20:36.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

假设我需要一个简单的搜索表单：

```
<form action="<%= search_path %>" methode="GET">
  <input type="text" placeholder="where?" name="place_name" />
</form> 
```

我需要根据输入字段生成一个 url，以便显示：

```
/search/some-value 
```

我试过了：

```
match 'search(/:place_name)', to: 'some_controller#some_action', as: 'search' 
```

有什么建议为什么它不起作用或我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:39:48.323

如果您提交表单，则通过表单中的输入设置的参数将使用查询参数附加到 URL - 在您的情况下，这看起来像这样：

```
/search?place_name=some-value 
```

这是基本的表单行为，除非您想使用一些 Javascript 来处理请求（在这种情况下我建议不要这样做），否则没有简单的方法可以解决这个问题。

但是，要使用默认行为，您的路线需要如下所示：

```
match 'search', to: 'some_controller#some_action', as: 'search' 
```

然后，该参数`place_name`将在控制器中使用：

```
params[:place_name] 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T06:56:42.143

以下代码支持 unicode 和附加参数：

```
get "search/*place_name" => "store#search"
get "search" => redirect {|_, req| 
  params = req.query_parameters
  query = Rack::Utils.escape params.delete(:place_name){"%"}
  "/search/#{query}#{params.to_query.prepend('?') if params.any?}"
}, as: :search 
```

# passwords - 如何为用户更新密码系统？

> ID：13786598
> 
> 赞同：1
> 
> 时间：2012-12-09T10:20:51.783
> 
> 标签：passwords, cryptography

我想由于新技术（CPU更强大，GPU ...），用于加密密码的算法年复一年地变弱，

所以; 这是否意味着 2006 年注册的用户受到的保护低于 2012 年注册的用户？

然后; 如何更新该用户2006年的密码？（例如雅虎，如果我是从 2006 年开始注册的，那么我的密码破解时间比我在 2012 年输入的密码要短，那么雅虎将如何更新我的密码到新的强大系统？）

换句话说：如何从一个系统迁移到另一个系统（例如从 MD5 到 Bcrypt，对于现有的 MD5 哈希密码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:13:43.507

有两个实际问题：

*   CPU功率增加，因此蛮力破解增加
*   较旧的算法变得不那么安全

后者是通过更改您通常在数据库中散列和存储密码的方式来修复的。当用户的密码以旧格式存储时，您已经可以在每次用户登录时执行此操作。

第一个需要实际更改密码，您应该“强制”用户经常更新密码，并在输入新密码时检查（或至少表明）密码强度。

应对 CPU 功率增加的另一种方法是在多次失败后限制密码尝试次数，从而防止密码的暴力破解。

总的来说，尽管我认为大多数网站和系统都缺乏对密码存储的适当管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:26:08.457

如果您的散列方案只涉及重复散列当前值（1000 次），那么您以后总是可以增加迭代次数（只是不要减少它）。

你可以使用 bcrypt 作为你的迭代函数，这样你就可以获得这两种方案的好处。

像这样：

```
var hash = bcrypt(pw, salt);
for N iterations:
 hash = bcrypt(hash, salt) 
```

您可以随时“追加”未来的新迭代。

# gcc - gcc --- __attribute__((interrupt( irq )))

> ID：13786605
> 
> 赞同：2
> 
> 时间：2012-12-09T10:21:49.543
> 
> 标签：gcc, arm, linux-device-driver, embedded-linux

我从 arm 的设备驱动程序开始......我看到每个处理程序都提到 --- - `__attribute__((interrupt( irq )))`。我很困惑这个属性将如何调用我们的驱动程序例程 ..??

arm的IRQ具有以下向量地址--- 0x00000018（或0xFFFF0018）因为同一行上可以有许多中断处理程序。假设我们有 4 个设备驱动程序，每个设备驱动程序都有自己的 IRQ 需要重新注册。

意味着 GCC 编译器将为 IRQ 处理程序提供一些启动代码，编译器将在中断处理程序的启动代码中调用我们的例程.....我对吗...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:43:15.783

来自[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-interrupt-handler-functions-2592)的**中断**属性：

> 当此属性存在时，编译器生成适用于中断处理程序的函数进入和退出序列。

您可以`objdump`轻松地使用该属性来查看此属性如何更改您的二进制文件，从而更好地为您阐明情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T09:18:16.547

该属性只能由操作系统的中断处理程序使用，而不应由特定驱动程序的中断处理程序使用。操作系统将读取 IRQ 向量/编号并调用适当的驱动程序函数来服务 IRQ。您只需向操作系统注册您的驱动程序/ISR。

# python - 在文件路径中测试“/../”是否足以防止转义子目录？

> ID：13786606
> 
> 赞同：1
> 
> 时间：2012-12-09T10:21:51.320
> 
> 标签：python, web

我在 python 中有一些代码可以检查文件路径是否访问子目录中的文件。用于 Web 服务器访问静态文件夹中的文件。

我使用以下代码片段：

```
path = 'static/' + path
try:
    if '/../' in path:
        raise RuntimeError('/../ in static file path')
    f = open(path)
except (RuntimeError, IOError):
    app.abort(404)
    return 
```

如果路径是干净的就足够了。

有没有办法编写一个访问父目录的路径，这个简单的测试不会检测到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:49:39.860

我建议使用`os.path.relpath`，它需要一个路径并从给定目录中计算出最简洁的相对路径。这样你只需要测试路径是否以`".."`

例如。

```
path = ...
relativePath = os.path.relpath(path)
if relativePath.startswith(".."):
    raise RuntimeError("path escapes static directory")
completePath = "static/" + relativePath 
```

`os.readlink`如果符号链接是您必须担心的事情，您还可以使用真实路径替换符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:31:30.303

[Flask](http://flask.pocoo.org/docs/patterns/fileuploads/)有一些辅助函数，我认为你可以毫无问题地将它们复制到你的代码中。推荐的语法是：

```
filename = secure_filename(dirty_filename)
path = os.path.join(upload_folder, filename) 
```

Werkzeug 实现`secure_filename`并使用此代码来清理文件名：

```
_filename_ascii_strip_re = re.compile(r'[^A-Za-z0-9_.-]')    
_windows_device_files = ('CON', 'AUX', 'COM1', 'COM2', 'COM3', 'COM4', 'LPT1',
                         'LPT2', 'LPT3', 'PRN', 'NUL')

def secure_filename(filename):
    r"""Pass it a filename and it will return a secure version of it.  This
    filename can then safely be stored on a regular file system and passed
    to :func:`os.path.join`.  The filename returned is an ASCII only string
    for maximum portability.

    On windows system the function also makes sure that the file is not
    named after one of the special device files.

    >>> secure_filename("My cool movie.mov")
    'My_cool_movie.mov'
    >>> secure_filename("../../../etc/passwd")
    'etc_passwd'
    >>> secure_filename(u'i contain cool \xfcml\xe4uts.txt')
    'i_contain_cool_umlauts.txt'

    The function might return an empty filename.  It's your responsibility
    to ensure that the filename is unique and that you generate random
    filename if the function returned an empty one.

    .. versionadded:: 0.5

    :param filename: the filename to secure
    """
    if isinstance(filename, unicode):
        from unicodedata import normalize
        filename = normalize('NFKD', filename).encode('ascii', 'ignore')
    for sep in os.path.sep, os.path.altsep:
        if sep:
            filename = filename.replace(sep, ' ')
    filename = str(_filename_ascii_strip_re.sub('', '_'.join(
                   filename.split()))).strip('._')

    # on nt a couple of special files are present in each folder.  We
    # have to ensure that the target file is not such a filename.  In
    # this case we prepend an underline
    if os.name == 'nt' and filename and \
       filename.split('.')[0].upper() in _windows_device_files:
        filename = '_' + filename

    return filename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T10:30:23.513

```
..// 
```

这本质上是一回事，但是由于您直接匹配字符串，`/../` 因此我添加的字符串不会被检测到并会获取父目录。

# java - 使用 java 进行 DOM 解析的规范化 - 它是如何工作的？

> ID：13786607
> 
> 赞同：246
> 
> 时间：2012-12-09T10:21:52.600
> 
> 标签：java, xml, dom

[我在本教程](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)的 DOM 解析器代码中看到了下面的代码行。

```
doc.getDocumentElement().normalize(); 
```

我们为什么要进行这种标准化？
我阅读了[文档](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#normalize%28%29)，但我一个字也听不懂。

> 将所有文本节点放在此节点下的子树的完整深度中

好的，那么有人可以告诉我（最好有图片）这棵树的样子吗？

谁能解释我为什么需要标准化？
如果我们不规范化会发生什么？

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2012-12-09T13:07:41.923

剩下的句子是：

> 其中只有结构（例如元素、注释、处理指令、CDATA 部分和实体引用）分隔 Text 节点，即既没有相邻的 Text 节点也没有空的 Text 节点。

这基本上意味着以下 XML 元素

```
<foo>hello 
wor
ld</foo> 
```

在非规范化节点中可以这样表示：

```
Element foo
    Text node: ""
    Text node: "Hello "
    Text node: "wor"
    Text node: "ld" 
```

标准化后，节点将如下所示

```
Element foo
    Text node: "Hello world" 
```

属性也是如此：`<foo bar="Hello world"/>`，评论等。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-29T07:26:09.130

简单来说，标准化就是减少冗余。
**冗余示例：**
a) 根/文档标签之外的空格 ( **...** <document></document> **...** )
b) 开始标签 (< **...** >) 和结束标签 (</ **...** >)
c) 属性及其值之间的空格（即**键名**和**=**之间的空格）
d) 多余的命名空间声明
e) 属性和标签文本中的换行符/空格
f) 注释等...

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-18T06:39:18.533

作为@JBNizet 对更多技术用户的回答的扩展，这里的`org.w3c.dom.Node`接口实现`com.sun.org.apache.xerces.internal.dom.ParentNode`看起来像什么，让您了解它的实际工作原理。

```
public void normalize() {
    // No need to normalize if already normalized.
    if (isNormalized()) {
        return;
    }
    if (needsSyncChildren()) {
        synchronizeChildren();
    }
    ChildNode kid;
    for (kid = firstChild; kid != null; kid = kid.nextSibling) {
         kid.normalize();
    }
    isNormalized(true);
} 
```

它递归地遍历所有节点并调用`kid.normalize()`
此机制在`org.apache.xerces.dom.ElementImpl`

```
public void normalize() {
     // No need to normalize if already normalized.
     if (isNormalized()) {
         return;
     }
     if (needsSyncChildren()) {
         synchronizeChildren();
     }
     ChildNode kid, next;
     for (kid = firstChild; kid != null; kid = next) {
         next = kid.nextSibling;

         // If kid is a text node, we need to check for one of two
         // conditions:
         //   1) There is an adjacent text node
         //   2) There is no adjacent text node, but kid is
         //      an empty text node.
         if ( kid.getNodeType() == Node.TEXT_NODE )
         {
             // If an adjacent text node, merge it with kid
             if ( next!=null && next.getNodeType() == Node.TEXT_NODE )
             {
                 ((Text)kid).appendData(next.getNodeValue());
                 removeChild( next );
                 next = kid; // Don't advance; there might be another.
             }
             else
             {
                 // If kid is empty, remove it
                 if ( kid.getNodeValue() == null || kid.getNodeValue().length() == 0 ) {
                     removeChild( kid );
                 }
             }
         }

         // Otherwise it might be an Element, which is handled recursively
         else if (kid.getNodeType() == Node.ELEMENT_NODE) {
             kid.normalize();
         }
     }

     // We must also normalize all of the attributes
     if ( attributes!=null )
     {
         for( int i=0; i<attributes.getLength(); ++i )
         {
             Node attr = attributes.item(i);
             attr.normalize();
         }
     }

    // changed() will have occurred when the removeChild() was done,
    // so does not have to be reissued.

     isNormalized(true);
 } 
```

希望这可以节省您一些时间。

# intellij-idea - 自动为 IntelliJ 12 中的新 Java 文件添加版权

> ID：13786610
> 
> 赞同：29
> 
> 时间：2012-12-09T10:22:00.223
> 
> 标签：intellij-idea

我已在首选项中注册了版权配置文件并将其设置为默认值。我还为该配置文件注册了一个范围，设置为“全部”。我可以通过执行“cmd+N（生成）-> 版权”将其添加到文件中。

我不想为我创建的每个新课程手动执行此操作。从现在开始，如何将其自动添加到所有新课程中？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-11T18:01:24.457

您必须为您的项目设置默认项目版权。

转到`File | Settings | Editor | Copyright`，新建后`Copyright Profile`，必须从下拉列表中选择它作为`Default project copyright`。

您必须为每个项目设置它，但一旦设置，它应该自动插入到该项目中创建的每个新文件的顶部。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-09T13:41:44.153

~~Copyright is not added automatically to the new files~~, you can use the **Update Copyright** action on the project root node in the Project View to add/update it for all the files at once or you can enable **Update Copyright** option in the `Commit Project` dialog to be sure that files shared via VCS always have the most recent copyright.

**UPDATE**: I've verified that **copyright is added automatically** for me, however it may be hard to notice that it was actually added as by default it appears at the very top of the file and is collapsed, editor also doesn't scroll to the top and remains where it was. If you scroll editor up and unfold the top comment, you should be able to see the automatically added copyright. You can also change the **Location in files** setting per file type to see that it's added when the new file is created.

[Here is the screencast](http://www.screenr.com/D0h7) showing that it works.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-24T04:56:31.827

转到**文件->设置->版权->版权配置文件**并添加新的版权配置文件。验证它并单击**Apply**，如下图所示，

[![在此处输入图像描述](../Images/da8a397ef9a3e195616722459558943b.png)](https://i.stack.imgur.com/MMBXP.png)

然后转到**File->Settings->Copyright**并选择新输入的配置文件作为**Default project copyright**并单击**OK**，如下图所示

[![在此处输入图像描述](../Images/3a646e264da297f9caef8a493a7e8fcb.png)](https://i.stack.imgur.com/DR6vD.png)

更多信息可以在[IntelliJ IDEA 设置](https://www.jetbrains.com/help/idea/2017.1/generating-and-updating-copyright-notice.html)中找到。（现在应该可以了。如果版权仍然没有自动进入文件，请输入**“Alt+Insert”**并选择版权）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-06-24T03:49:28.060

**如果文件中已经存在版权消息，则这可能会导致重复版权消息。** *如果您没有现有的评论（或者您可以写太多）并且急于发表评论，这里有一个快速的方法来让他们进入。*

**注意：*在 Android Studio 上使用***

[![跨包运行版权](../Images/824ec6e0d0218415f3c4a0fa0deabac4.png)](https://i.stack.imgur.com/uMWkc.png)

参考：[https](https://www.jetbrains.com/help/idea/2016.1/generating-and-updating-copyright-notice.html#d1722070e316) ://www.jetbrains.com/help/idea/2016.1/generating-and-updating-copyright-notice.html#d1722070e316寻找**更新版权声明**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-15T06:46:52.310

如果您使用的是 IntelliJ 14 或更高版本。这是你需要做的。去`File | Setting`。然后选择 **编辑器**下的**文件和代码模板**，如下图所示。 . 然后在此处添加版权许可，如图所示。然后点击**Apply**和**OK**。**[![在此处输入图像描述](../Images/b83737a2809014dd0bf768ce4e45eaa5.png)](https://i.stack.imgur.com/18DLj.png)**

# jquery - jquery onclick show li, hide ALL syblings li and children element

> ID：13786618
> 
> 赞同：0
> 
> 时间：2012-12-09T10:23:07.790
> 
> 标签：jquery, html-lists, hide, show

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<style type="text/css">
    ul ul
    {
        display: none;
    }
    ul li
    {
        list-style-type: none;
    }

</style>
<script type="text/javascript">
    $(document).ready(function () {
        $('ul li').addClass('reveal');
        $('.reveal').live('click', function (event) {
            $(this).children('ul').slideDown();
            $(this).siblings('li').children().slideUp();

        });
    });
</script> 
```

```
<ul>
    <li>a
        <ul>
            <li>inner1
                <ul>
                    <li>bonner1
                        <ul>
                            <li>donner1<ul>
                                <li>konner1</li>
                                <li>konner2</li>
                            </ul>
                            </li>
                            <li>donner2</li>
                        </ul>
                    </li>
                    <li>bonner2</li>
                </ul>
            </li>
            <li>inner2</li>
        </ul>
    </li>
    <li>b
        <ul>
            <li>inner3</li>
            <li>inner4</li>
        </ul>
    </li>
</ul> 
```

我想在 li click 事件上关闭所有 sybling 内部元素。此代码有效，但不是以所需的方式。它关闭 sybling 元素但不关闭 sybling 元素内的子元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:31:07.867

我认为您正在寻找的是：

```
$(this).siblings('li').find('ul').slideUp(); 
```

这将向上滑动`<ul />`嵌套在兄弟`<li />`s 中的所有元素。

那是你要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T11:06:18.177

如何将此功能添加到我的代码中：`enter code here`

检查这个小提琴：[https ://jsfiddle.net/te366hu2/2/](https://jsfiddle.net/te366hu2/2/)

# c++ - 文件第一行未在 C++ 中读取

> ID：13786620
> 
> 赞同：0
> 
> 时间：2012-12-09T10:23:25.627
> 
> 标签：c++, file

```
 in.open(filename.c_str(), ifstream::in);
  string name, email, group;
  while (in >> name >> email >> group) {
    in >> name >> email >> group;
    cout << name << email << group);
    ...
  }
  in.close(); 
```

考虑这段代码 where`in`是类型`ifstream`并且 `filename`是我们从中读取数据的文件的名称。输入文件的格式非常好 - 每行有 3 个字符串。这部分应该简单地打印文件中的所有数据，但 id 所做的是打印除第一行之外的所有行。为什么跳过第一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:25:15.403

`in >> name >> email >> group;`从循环体中删除。有条件的就够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:28:50.443

考虑这一行：

`while (in >> name >> email >> group) {`

每次程序到达这一行时，它都会执行括号内的代码。在这种情况下，“in”被读取并填充名称、电子邮件、组，甚至在实际进入循环主体之前。

因此，当执行循环体时，第一行已经被读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T10:39:42.327

如果输入文件中的字符串没有被换行符分隔，请使用代码读取它。

```
 ifstream in;
  in.open("urfile.txt",ios::beg);
  string name, email, group;
  while (in.good()) {
    in >> name >> email >> group;
    cout << name << email << group;
  }
  in.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T10:26:07.733

你读的太多了。

```
while (in >> name >> email >> group) 
```

已经读取数据一次，下一行再次读取，覆盖您的数据。摆脱重复，你的 cout 应该可以正常工作。

```
in.open(filename.c_str(), ifstream::in);
string name, email, group;
while (in >> name >> email >> group) {    //Reads the data into the variables
    cout << name << email << group;        //Outputs the variables.
    ...
}
in.close(); 
```

# javascript - 如何将 javascript 对象链接到它的 angularsjs 资源

> ID：13786623
> 
> 赞同：2
> 
> 时间：2012-12-09T10:24:30.520
> 
> 标签：javascript, angularjs

注意：我的应用程序要复杂得多，但我正在剥离不需要关注问题核心的任何内容。该（简化的）应用程序允许用户编辑有关项目的数据，例如向其中添加随机数量的公司，每个公司都是合格的（制造商、分销商、批发商等）。

该项目对象如下所示：

```
{   // item
    Name: "name",
    CreationDate: "some date",
    // etc...
    Companies: [{ 
        Type: "Manufacturer",
        Company: {
            ID: "some random id",
            Name: "name of the company"
            // other bunch of stuff
            }
        // other bunch of stuff
        }, { 
        Type: "Distributor",
        Company: {
            ID: "some other random id",
            Name: "name of an other company"
            // other bunch of stuff
            }
        // other bunch of stuff
        }]
    // other bunch of stuff
} 
```

在我的 angularjs 应用程序中，我有各种 $resource 对象工厂（例如，公司、项目）。这些工厂被注入到负责编辑每个对象的控制器（CompaniesController、ItemsController、...）中。

现在，当我编辑一个项目（我在数据库中手动创建的）时，我将该项目作为一个资源对象（这是预期的），并将该项目的所有公司作为一个对象数组。

我还通过不同的调用将所有可用的公司作为资源对象数组（也是预期的）。

请注意，公司对象的结构在这两种情况下完全相同（因为它们实际上是相同的对象）。

我的问题是该项目的类别是普通的 JS 对象，并且没有链接或映射到相应的 angularsjs 资源，因此当我尝试编辑现有的链接公司时，angular 找不到它。这似乎是合乎逻辑的，因为一方面我有一个“基本” js 对象，另一方面是一个 $resource 对象。

页面上的版本实际上是由一个公司类型的自由文本字段和一个包含所有公司的下拉列表（选择）组成的。我首先尝试在选择上使用 ng-options，然后使用以下方法解决它：

```
<select name="ddlc_01" id="ddlc-01"> 
    <option value="">-- Choose --</option>
    <option ng-selected="company.ID == editedCompany.Company.ID" ng-repeat="company in companies" value="{{company.ID}}">{{company.Name}}</option>
</select> 
```

但我宁愿不那样破解它。

**那么有没有办法将 js 对象“链接”或“附加”到匹配的 $resource 对象？还是我坚持使用hack，因为问题不依赖于angularjs，而是依赖于javascript引擎比较对象的方式？**

我试图将所有项目的公司替换为：

```
var item = Items.get({ verb: $routeParams.ID }, function (result) {
    var newComps = [];
    for (var i = 0; i < item.Companies.length; i++) {
        var ct = item.Companies[i];
        ct.Company = new Companies(ct.Company);
    }
}); 
```

但尽管它变成了一个 $resource 对象，但它仍然与公司请求中的不匹配。

我一直在考虑但尚未尝试的另一个选项是“链接”请求，并根据对象 ID（我的对象的一个​​字段）从公司中搜索匹配的资源并用这些对象替换它们。我不喜欢该选项的是它会增加页面的加载和构建时间，因为实际上已经有 4 次调用 api 的各种方法来填充所有内容。

对此问题的任何想法、建议或答案表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:29:08.130

好的，所以我确实是这样解决的：

1.  创建了一个计数器来获取当前未回答的请求
2.  *添加了一个传递给每个Object* .query()的函数“asyncCallback”
3.  在该方法中，递减计数器。
4.  如果计数器等于 0，则搜索项目公司并将其替换为“真实”值

它使我能够避免异步调用的链接，同时保持相同级别的灵活性（如果不是更高的话）。此外，如果需要，它可以很容易地转换为冻结尚未“重新绑定”的区域，这样用户就不会在 UI 中做出错误的选择。

因为我有点挣扎（并且文档似乎没有我希望的那么清晰），所以这是我使用的选择：

```
<select ng-options="c as c.Name for c in companies" ng-model="editedCompany.Company"> 
    <option>-- Choose --</option>
</select> 
```

这意味着我使用 c.Name 作为公司的代表，但它的价值实际上是公司本身（不要相信价值，它只是一个假的，让 angular 来处理它）。

随意提出想法或提出我可能忽略的任何疑虑或错误，或提供新的答案！

# javascript - UTF-8：它应该保存那个 string = encode(decode(string)) 吗？如果没有，如何实现？

> ID：13786628
> 
> 赞同：0
> 
> 时间：2012-12-09T10:25:09.010
> 
> 标签：javascript, string, unicode, utf-8, thrift

在 Javascript Chrome 扩展中，我试图将包含 PDF 文件的二进制字符串传输到使用 thrift.js 库的 API（Evernote）。经过一些尝试，我发现该字符串（已经是一个 UTF-8 文件）在发货时在 thrift.js 库中进行了 utf-8 编码，并且生成的 PDF 文件在服务器上显得拙劣（请参阅我[以前的问题](https://stackoverflow.com/q/13779434/1887947)详情）。（有关该库使用的 encode() 方法，请参见下文。）

尝试调整库并跳过 encode() 调用会导致文件在服务器端或传输过程中以某种方式丢失。所以我意识到我需要在发送之前对我的字符串进行 decode()，然后我从该库方法中复制了一个 decode() 函数到我的代码中。所以我的字符串在我的代码中基本上受到 decode() 的影响，然后在库代码中受到 encode() 的影响。

它变得更好了，但文件仍然在高阶字符处出错。我将图像与原始文件和结果文件一起附加。我做了一个简单的检查，看看 string = encode(decode(string)) 是否看起来不是。

请给我一个关于如何使用 decode() 函数以实现 string = encode(decode(string)) 的建议。

* * *

解码（）函数：

```
function decode1(utftext) {
    var string = "";
    var i = 0;
    var c = c1 = c2 = 0;

    while (i < utftext.length) {

        c = utftext.charCodeAt(i);

        if (c < 128) {
            string += String.fromCharCode(c);
            i++;
        }
        else if ((c > 191) && (c < 224)) {
            c2 = utftext.charCodeAt(i + 1);
            string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
            i += 2;
        }
        else {
            c2 = utftext.charCodeAt(i + 1);
            c3 = utftext.charCodeAt(i + 2);
            string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
            i += 3;
        }
    }
    return string;
} 
```

编码（）函数：

```
function encode1(string) {
    string = string.replace(/\r\n/g, "\n");
    var utftext = "";
    for (var n = 0; n < string.length; n++) {

        var c = string.charCodeAt(n);

        if (c < 128) {
            utftext += String.fromCharCode(c);
        }
        else if ((c > 127) && (c < 2048)) {
            utftext += String.fromCharCode((c >> 6) | 192);
            utftext += String.fromCharCode((c & 63) | 128);
        }
        else {
            utftext += String.fromCharCode((c >> 12) | 224);
            utftext += String.fromCharCode(((c >> 6) & 63) | 128);
            utftext += String.fromCharCode((c & 63) | 128);
        }
    }
    return utftext;
} 
```

原始 PDF 文件（前 20 行）：

```
2550 4446 2d31 2e34 0a25 c7ec 8fa2 0a35
2030 206f 626a 0a3c 3c2f 4c65 6e67 7468
2036 2030 2052 2f46 696c 7465 7220 2f46
6c61 7465 4465 636f 6465 3e3e 0a73 7472
6561 6d0a 789c 6d4e 310e c230 10db ef15
1e61 39e2 a45c 722b 120f 00e5 0715 2021
6528 ff1f 482a a176 c05e acb3 65df 82a0
8c08 833f 3137 215e 421a 2c97 ac96 710e
2027 7c1e f214 daff 7bdc e527 8bb6 39a1
b72d 5234 0dac 137b 3d37 5caa 9cee 19ae
6ea8 3daf ee9e 8aad 36c1 a41e 5158 c683
b5c9 81c7 fa96 6b95 5be7 1787 6026 7465
6e64 7374 7265 616d 0a65 6e64 6f62 6a0a
3620 3020 6f62 6a0a 3132 330a 656e 646f
626a 0a34 2030 206f 626a 0a3c 3c2f 5479
7065 2f50 6167 652f 4d65 6469 6142 6f78
205b 3020 3020 3539 3520 3834 325d 0a2f
526f 7461 7465 2030 2f50 6172 656e 7420
3320 3020 520a 2f52 6573 6f75 7263 6573
3c3c 2f50 726f 6353 6574 5b2f 5044 4620 
```

生成的 PDF（前 20 行）：

```
2550 4446 2d31 2e34 0a25 e7ac 8fe2 8ab5
2030 206f 626a 0a3c 3c2f 4c65 6e67 7468
2036 2030 2052 2f46 696c 7465 7220 2f46
6c61 7465 4465 636f 6465 3e3e 0a73 7472
6561 6d0a 78ec ad8e 310e e2b0 90eb af95
1e61 39e2 a49c 722b 120f 00e5 8795 2021
6528 ef9f 882a e1b6 805e ecb3 a5ef 82a0
ec88 833f 3137 215e 421a 2ce7 ac96 710e
2027 7c1e e294 9aef bb9c e5a7 8be6 b9a1
e7ad 9234 0dec 93bb 3d37 5cea 9cae 19ee
aea8 3def ae9e eaad b6e1 a49e 5158 e683
b5e9 8187 ea96 abe5 9ba7 17e7 a0a6 7465
6e64 7374 7265 616d 0a65 6e64 6f62 6a0a
3620 3020 6f62 6a0a 3132 330a 656e 646f
626a 0a34 2030 206f 626a 0a3c 3c2f 5479
7065 2f50 6167 652f 4d65 6469 6142 6f78
205b 3020 3020 3539 3520 3834 325d 0a2f
526f 7461 7465 2030 2f50 6172 656e 7420
3320 3020 520a 2f52 6573 6f75 7263 6573
3c3c 2f50 726f 6353 6574 5b2f 5044 4620 
```

# c#-4.0 - 基于多个分隔符拆分字符串

> ID：13786632
> 
> 赞同：0
> 
> 时间：2012-12-09T10:25:35.270
> 
> 标签：c#-4.0

我有一个字符串

> { “语言”：“en”，“值”：-0.06706431209772078，“发送”：-1 }

我只想拿价值

> -0.06706431209772078

作为输出：有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:29:34.680

使用正则表达式

```
var result = Regex.Match(@"{ ""language"": ""en"", ""value"": -0.06706431209772078, ""sent"": -1 }", @"(?<=""value"": )(-?\d+(\.\d+)?)(?=,|$)"); 
```

编辑：

```
var result = Regex.Match(@"{ ""language"": ""en"", ""value"": -0.06706431209772078, ""sent"": -1 }", @"(?<=""value"":\s*)(-?\d+(\.\d+)?)"); 
```

# python - 我如何使用文本分析来调查问卷回复？

> ID：13786635
> 
> 赞同：6
> 
> 时间：2012-12-09T10:26:01.947
> 
> 标签：python, statistics, computer-science, lexical-analysis, text-analysis

我是一个学生团队的“程序员”，旨在调查我的文法学校的满意度和一般问题。我们有一个建立在 1-6 范围内的问题，我们通过我用 python 编写的图表软件来解释这些答案。

现在`<textarea>`在我们问题的末尾有一个可以随意使用的。我目前正在考虑使这些数据可用的方法（我们不想阅读超过 800 多个答案）。

如何使用 Python 中的文本分析来调查学生的写作内容？我在想一种方法来“标记”任何写下来的句子，比如：

```
I don't like being in school. [wellbeing][negative]
I have way too much homework. [homework][much]
I think there should be more interesting projects. [projects][more] 
```

是否有任何可用的方法来获得它？使用现有的分词器有意义吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:40:13.360

好吧，我只是在这里提出想法..但我能想到的一种方法是，

1.  首先使用聚类算法对响应进行聚类。诸如 K-means 之类的东西，或者您可以使用诸如 LDA 之类的东西进行主题建模。

2.  然后，您可以通过进行文本分析来使用您的标记方法，在您从第 1 步获得的每个集群/主题中生成频繁/相关的关键字。

为什么第 1 步是个好主意？好吧，在我看来——在进行文本分析时，如果你随意标记句子，你可以生成很多标签——其中很多标签在上下文中是相似的。因此，您的可用性可能会下降，您仍然必须分析每个句子的标签负载。

使用聚类/主题建模也可以帮助将上下文问题减少到一定程度。因此，我认为更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:35:23.650

“NLTK 情绪分析”是开始搜索的好地方。[Natural Language Toolkit](http://nltk.org/)是用于*在 Python 中进行文本分析的*软件包，但它并不简单，因为任务非常复杂。前几个结果有一些引人注目的演示，但我没有详细查看它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:59:36.293

我不会完全回答你的问题。但是，如果我了解您有一个经典调查（带有复选框，......），最后有一个小文本区域问题......

因此，您将有大约 800 多个答案。但我想答案不会太长。通常它会是几行甚至几句话......我认为手动QDA软件会比不完美的算法更好。例如，您可以使用开源 RQDA（R 项目包）或 Nvivio 等商业软件...

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T10:40:39.577

这听起来很像人工智能编程，只是因为它们“标记”问题和响应的方式。也许看看[http://pyaiml.sourceforge.net/](http://pyaiml.sourceforge.net/)和人工智能标记语言。我对它没有太多经验，但是您可以根据需要对其进行调整，而不是从头开始。

# java - 在不更改代码的情况下向网络应用程序添加代理？

> ID：13786637
> 
> 赞同：1
> 
> 时间：2012-12-09T10:26:06.717
> 
> 标签：java, proxy

我想使用一个 Java 应用程序，它不是我编写的，也不再维护，这意味着我不能只是去找作者并要求一个新功能。我必须添加哪些选项来添加代理功能。是否可以添加一些 shell 参数？将代理的二进制代码直接添加到`.class`文件中是否可以管理？我可以编写自己的类，从`.class`文件中导入内容并覆盖网络功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:28:08.463

这可能对您有用：

```
java -Dhttp.proxyHost=IP_address -Dhttp.proxyPort=8080 -jar App.jar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T10:30:04.217

可以通过创建一个具有相同名称/包的类并将其放在类路径中的较早位置以使其具有优先权，从而用您自己的实现替换一个类。但是，如果代码的其他部分使用此类，则不能破坏二进制兼容性。

还有一些检测 API 可用于在加载类时对其进行修改。请参阅[仪器 API](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:24:40.350

如果您正在创建自己的引用已编译的源文件`.class`，那么在您的文件中尝试这样做：

```
java.util.Properties systemProperties = System.getProperties();
systemProperties.setProperty("http.proxyHost", PROXY_HOST);
systemProperties.setProperty("http.proxyPort", PROXY_PORT); 
```

我认为这应该有效。

# android - 使用数组列表从 sqllite 检索记录

> ID：13786642
> 
> 赞同：0
> 
> 时间：2012-12-09T10:27:23.393
> 
> 标签：android, sqlite

我正在从数据库中检索所有记录并将所有记录保存在数组列表中。当我显示数组列表记录时，显示重复数据，我不知道是什么问题？

在 view_record 类中调用此函数：

```
public ArrayList<tuple> getdata() {         // TODO Auto-generated method stub

        tuple obj=new tuple();
        Cursor c = ourDatabase.query(DATABASE_TABLE, PROJECTION_ALL, null, null, null, null, null);

        if(c == null) {
         return null;
        }

        ArrayList <tuple> data = new ArrayList<tuple>();

        // String result = " ";

        int i=0;

        for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
                  obj.ROWID= c.getString(c.getColumnIndexOrThrow(KEY_ROWID));
                  obj.CNAME= c.getString(c.getColumnIndexOrThrow(KEY_CNAME));
                  obj.SNAME= c.getString(c.getColumnIndexOrThrow(KEY_SNAME));
                  obj.FAMILY= c.getString(c.getColumnIndexOrThrow(KEY_FAMILY));
                  obj.LOCATION= c.getString(c.getColumnIndexOrThrow(KEY_LOCATION));
                  obj.IMAGE1= c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE1));
                  obj.IMAGE2= c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE2));
                  obj.IMAGE3= c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE3));
                  data.add(i, obj);
                  i++;
       }
       c.close();

       return data;     } 
```

我的 view_record 课程

```
public class view_record extends Activity {

    @Override protected void onCreate(Bundle savedInstanceState) {      // TODO Auto-generated method stub      

        super.onCreate(savedInstanceState);
        setContentView(R.layout.db_view);

        TextView tv=(TextView) findViewById(R.id.tvSqlinfo);
        ImageView img=(ImageView) findViewById(R.id.img_view);      

        db_handler info=new db_handler(this);
        info.open();    

        //   Log.d("abc", "adb");

        ArrayList <tuple> data=info.getdata();
        Log.d("abc", "adb");

        String result="";

        for(int i=0;i<data.size();i++){
               result +=" " + data.get(i).ROWID + "   " + data.get(i).CNAME + "   " + data.get(i).SNAME + "   " + data.get(i).FAMILY + "    " + data.get(i).LOCATION + "\n";

              tv.setText(result);
              img.setImageBitmap(Utilities.getImage(data.get(0).IMAGE2));
        }
        info.close();   } } 
```

我想查看如下：

```
 " 1 cname sname family location "
   " 2 cname sname family location " 
```

但我得到“2 cname sname 家庭位置”“2 cname sname 家庭位置”

表示最后一条记录显示两次。

还有一件事，我想获取 cname=something 的所有记录，这样做时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:12:05.843

您没有在 for 循环中创建新项目。这就是你得到相同结果的原因。做就是了...

在开始`for loop`添加这一行`obj=new tuple();`

**回答你的第二个问题**

```
for(int i=0;i<data.size();i++){
               result +=" " + data.get(i).ROWID + "   " + data.get(i).CNAME + "   " + data.get(i).SNAME + "   " + data.get(i).FAMILY + "    " + data.get(i).LOCATION + "\n";

              img.setImageBitmap(Utilities.getImage(data.get(0).IMAGE2));
        }
   tv.setText(Html.fromHtml(result)); 
```

# assembly - 汇编语言？

> ID：13786645
> 
> 赞同：0
> 
> 时间：2012-12-09T10:27:42.067
> 
> 标签：assembly

对于没有 CS 背景（我的专业是应用数学）的人来说，asm 语言的学习曲线是否陡峭？

通常，熟悉一些高级编程语言（如 C/C++ 等）的人需要多长时间才能编写至少可以进行一些基本数学计算（如线性回归、一维正交多项式计算等）的 asm 程序？

顺便说一句，现代 asm 是否支持某些功能，例如：

*   带有 SIMD 指令的数学运算

*   多线程和线程控制

通常通过在 asm 中而不是在 C/C++ 中使用一些最新优化的编译器来执行此操作会获得很多性能提升吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T10:37:17.440

对于大多数人来说，ASM 通常被认为是相当困难的。但是，它在逻辑上简单明了，我认为具有应用数学背景的人不会有问题。

在汇编中，您需要了解处理器的工作原理，因为在编写 asm 代码时，您最终是以最基本的方式操纵处理器。

考虑一下：

```
if (val)goto next; 
```

翻译成这样的东西：

```
mov eax, [val]
cmp eax, 0
je next 
```

本质上，Assembly 需要了解程序如何使用处理器来完成任务。EG：如何需要和使用寄存器（如 eax）。

一般来说，用 asm 比 C 做事情需要更长的时间。至于具体情况，我不知道。

一些现代指令集提供了新的数学运算，可能是也可能不是你所追求的。多线程等是操作系统的作用，与处理器无关，因此与组装无关（严格来说这不是真的，因为存在硬件多任务，但很少使用，但我离题了。）

与优化的 C/C++ 相比，编写 ASM 的性能提升通常非常小，除非您编写一小段重复的代码并花费大量时间进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:51:55.783

> 通常通过在 asm 中而不是在 C/C++ 中使用一些最新优化的编译器来执行此操作会获得很多性能提升吗？

不。

编写 asm 更加困难和耗时：因为每条 asm 指令都比 HLL 语句简单，所以您需要更多的 asm 指令来实现相同的功能。用汇编编写有额外的复杂性，例如只有少量的寄存器。

此外，有许多方法可以编写汇编来实现相同的目的：例如，将`mov eax,0`零`xor eax,eax`写入`eax`寄存器，但一种比另一种快。此外，asm 指令的序列对其运行速度有影响：如果它匹配以保持[多个 CPU 流水线](http://en.wikipedia.org/wiki/Instruction_pipeline)繁忙，则不明显或更长的指令序列可能会更快。

编写最佳汇编是计算密集型的：根据循环计数、考虑流水线等计算各种可能性可能需要多长时间。这种计算由优化编译器完成，它可能做得更好（更快、更准确）比你能。

[http://www.amazon.com/Zen-Code-Optimization-Ultimate-Software/dp/1883577039](https://rads.stackoverflow.com/amzn/click/com/1883577039)是一本非常有趣的读物，但是在本书的结尾，它开始谈论奔腾级 CPU，您可以看到编写最佳程序集变得越来越复杂。

* * *

如果您对编译器的输出不满意，您可能会考虑使用更好的编译器：例如，英特尔的编译器产生（或至少用于产生）比许多其他编译器更优化的编译器，并且包括对特定 CPU、异常操作码的更好支持，也许有更好的运行时库等。

# php - Yii flash 消息在 Ajax 请求后不显示

> ID：13786646
> 
> 赞同：0
> 
> 时间：2012-12-09T10:27:51.777
> 
> 标签：php, yii, yii-components

有人知道我如何在 ajax 请求后在 YII 框架中显示 flash 消息吗？我正在使用标准的 Gii 生成的 CRUD 操作。当我在 CGridView 中创建或更新数据时，我会看到我的 Flash 消息。但是当数据被删除时，现在有 flash，但是 Yii::app()->user->setFlash('success', 'My message') 是把消息放在会话中。

我的 actionDelete 内容是

```
$result = $this->loadModel($id)->delete();
        if ($result)
            Yii::app()->user->setFlash('success', 'Data was deleted');
        else
            Yii::app()->user->setFlash('error', 'Error was occurred');

        if (Yii::app()->request->getIsAjaxRequest())
        {
            echo Yii::app()->user->getFlash('success');
        } else {
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array(index));
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:50:15.310

因此，您在通过 ajax 检索 flash 消息时遇到问题？您的控制器看起来不错，该`getIsAjaxRequest`方法将被触发，但问题是在 DOM 中显示 flash 消息。

首先创建一个 div 来保存你的 flash 消息：

```
<div id="myflashwrapper" style=""display: none;"></div> 
```

然后，在您调用 ajax 方法的脚本中，您需要添加如下内容：

```
$('#myflashwrapper').html(message).fadeIn().delay(3000).fadeOut(); 
```

这只是将 id 为“ **myflashwrapper** ”的元素的 HTML 内容更改为返回的 flash 消息。如您所见，此函数期望填充一个名为“ **message ”的变量。**我们希望`echo Yii::app()->user->getFlash('success');`从您的删除函数`getIsAjaxRequest`中返回此值。

这意味着您需要修改从默认 Yii CRUD 视图中单击删除链接时执行的 javascript。

你这样做，假设你使用的是 CGridView，你可以使用`scriptMap`

```
Yii::app()->getClientScript()->scriptMap = array(
    'jquery.yiigridview.js' => Yii::app()->baseUrl . '/js/custom.gridview.js',
    ...
); 
```

您在此处引用的脚本文件将用于代替 gridview 的默认 Yii 脚本。显然您只想更改其中的一个函数，因此您可以在此处获取原始 js 文件：`framework/zii/widgets/assets/gridview/jquery.yiigridview.js`

只需从该文件中复制所有内容，将其粘贴到您的*custom.gridview.js*文件中，修改在删除时调用的 ajax 函数，它将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:34:34.463

你需要得到快讯。试着把这段代码放在你的 protected/layouts/main.php

```
<?php foreach(Yii::app()->user->getFlashes() as $key => $message) : ?>
    <div class="flash-<?php echo $key; ?>"><?php echo $message; ?></div>
<?php endforeach; ?> 
```

# oracle11g - Oracle 中序列的同义词

> ID：13786656
> 
> 赞同：2
> 
> 时间：2012-12-09T10:29:14.170
> 
> 标签：oracle11g, sequence, synonym

我想为 oracle 中的序列创建同义词并`currval`从中获取。

我使用这个语句创建了一个同义词。

```
CREATE SYNONYM NUMGEN FOR MY_SEQ; 
```

当我从中获取`currval`or时生成错误，同义词不存在。`extval``NUMGEN`

```
SELECT NUMGEN.currval FROM dual; 
```

谁能帮我`currval`从同义词中获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-20T06:47:36.893

您可能没有向用户授予权限。尝试使用以下任一查询授予特权并尝试。

`GRANT SELECT ANY SEQUENCE to NEWDB;`

`GRANT SELECT ON ORIGINALDB.SEQUENCENAME TO NEWDB;`

# css - CSS边框图像在IPAD上不起作用

> ID：13786662
> 
> 赞同：0
> 
> 时间：2012-12-09T10:29:44.650
> 
> 标签：css, image, ipad, border

我们已经在所有浏览器上测试了我们的边框图像，它们工作正常，但它们在 IPAD 上显示为黑色边框。尝试了不同的图像。试过重复。试过拉伸。没有什么。用新的元内容编辑头部（如其他地方推荐的那样）并收到错误消息。有任何想法吗？

谢谢...

CSS的一部分：

```
 border-style: solid;
 border-width: 14px 14px 14px 14px;
 -moz-border-image: url('..Images/vector.jpg') 25 stretch;
 -webkit-border-image: url('..Images/vector.jpg') 25 stretch;
 -o-border-image: url('..Images/vector.jpg') 25 stretch;
 border-image: url('..Images/vector.jpg') 25 stretch; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:59:52.257

我花了几个小时追踪这个问题。Ipad 的边框图像有问题。不止这个问题。

所以，就在这里。它与图像的大小有关。如果你使用任何超过 2000 像素的东西，它就不起作用，2000 或以下的东西也能起作用。我的原始图像是 2300 并且它没有，我将它减小到 2000 并且它工作。

现在，如果我能找出留下的文物的话......

# c# - 部分视图登录首页

> ID：13786663
> 
> 赞同：3
> 
> 时间：2012-12-09T10:29:55.553
> 
> 标签：c#, asp.net-mvc, forms-authentication

这个问题已经被问过很多次了，但我不认为我需要它。

我正在尝试在主页上实现登录表单，但此表单位于弹出的部分中，就像您在此站点上一样：http: [//myanimelist.net](http://myanimelist.net)。

我为我的登录表单创建了一个**局部视图：**

```
@model ArtWebShop.Models.customers

@section Validation {
    @Scripts.Render("~/bundles/jqueryval")
}

<section id="login">

    @using (Html.BeginForm("LoginValidate", "Login", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary(true)
        @Html.ValidationSummary()
        <fieldset>
            <legend>Login</legend>

            @Html.LabelFor(model => model.email)
            @Html.TextBoxFor(m => m.email) 

            @Html.LabelFor(m => m.password)
            @Html.PasswordFor(m => m.password)

            <input type="submit" value="Login" class="button" />
        </fieldset>
    }

</section> 
```

这显示在**主页 (index.cshtml)**上：

```
<section class="shown">
    @Html.Partial("_LoginPartial")
    @Html.ValidationSummary(true)
    @Html.ValidationSummary()
</section> 
```

局部视图正确显示。但现在出现了不起作用的部分。

如果您没有填写这些字段，则当您按下登录时，验证会在我的 LoginController 中完成，但是当我重定向时，我似乎无法将错误发送到我的主页视图。

```
 [HttpPost]
    public ActionResult LoginValidate(string redirect)
    {
        if (_unitOfWork.CustomersRepository.CostumerIsValid(Request.Form["email"], Request.Form["password"]))
        {
            if (!String.IsNullOrEmpty(redirect) || String.Compare(redirect, "none", StringComparison.OrdinalIgnoreCase) == 0)
            {
                if (redirect != null) Response.Redirect(redirect, true);
            }
            else
            {
                return RedirectToAction("index", "Home");
            }
        }
        ModelState.AddModelError("email", "You entered an incorrect email address");
        ModelState.AddModelError("password", "You entered an invalid password");

        return RedirectToAction("index", "Home");
    } 
```

那是我的登录验证。由于没有填写任何错误，因此会将错误添加到 ModelState 中，然后重定向到主页。然而，这并没有向我显示错误。我猜这正是因为我重定向但我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:57:17.587

您可以使用[TempDataDictionary](http://msdn.microsoft.com/en-us/library/system.web.mvc.tempdatadictionary%28v=vs.108%29.aspx)在重定向之间存储*ModelStateDictionary 。*

> **TempDataDictionary 类**
> 表示仅从一个请求持续到下一个请求的一组数据。

在您的**LoginValidate**操作中，您将像这样存储*ModelState*：

```
public ActionResult LoginValidate(string redirect)
{
    /* Your other code here (omitted for better readability) */

    ModelState.AddModelError("email", "You entered an incorrect email address");
    ModelState.AddModelError("password", "You entered an invalid password");

    // Add the ModelState dictionary to TempData here.
    TempData["ModelState"] = ModelState;

    return RedirectToAction("index", "Home");
} 
```

在您的**HomeController**的**Index**操作中，您将检查*TempData*是否有*ModelState*：

```
public ActionResult Index()
{
    var modelState = TempData["ModelState"] as ModelStateDictionary;
    if (modelState != null)
    {
        ModelState.Merge(modelState);
    }

    return View();
} 
```

您可以通过使用自定义操作过滤器使其更清晰；请参阅[此博客](http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx#prg)，第 13 号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:58:36.537

您可以通过使用 jQueryUI Dialogs 和 AjaxForms 来实现这一点。请查看此演示：[http](http://demo.ricardocovo.com/EditDialogsAndFormRazor/Cars) ://demo.ricardocovo.com/EditDialogsAndFormRazor/Cars 。您可以为您的登录表单实现与提供的链接中的编辑功能类似的行为。你会发现这里解释的想法：[http ://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/](http://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/)

# javascript - extjs4中鼠标单击文本字段的工具提示

> ID：13786671
> 
> 赞同：0
> 
> 时间：2012-12-09T10:30:56.397
> 
> 标签：javascript, extjs

我有一个文本字段，我需要设置一个工具提示，但是在 extjs 中我发现工具提示出现在鼠标悬停时，是否有可能在鼠标单击时显示工具提示，

感谢提前拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:40:23.960

试试这个样本。

```
Ext.create('Ext.form.Panel', {
        width: 200,
        bodyPadding: 5,
        renderTo: Ext.getBody(),
        items: [{
            xtype: 'textfield',
            name: 'name',
            listeners: {
                render: function(c) {
                    this.getEl().on('mousedown', function(e, t, eOpts) {
                        // call to show your tooltip
                    }); 
                }
            }
        }]
    });​ 
```

# ios - 如何在 ios 6 上打开 sqlite 数据库？

> ID：13786677
> 
> 赞同：-2
> 
> 时间：2012-12-09T10:31:32.310
> 
> 标签：ios, sqlite, ios-simulator

我是ios开发的新手。我现在尝试做的是打开一个现有的 sqlite 数据库并从中选择数据。我调试了我的源代码，发现我打开了数据库成功（我认为我成功了，因为 *database 指针不为零）。但是当我使用 sqlite3_prepare_v2() 来初始化选择查询时，我总是收到错误：“没有这样的表人”。我已经检查了路径：

> ~/Library/Application Support/iphone 模拟器/6.0/Application//.

数据库复制成功，我可以打开它查看那里的数据。

这是我复制数据库并打开它的代码：

```
- (NSString*) getDatabasePath{
    //Search for standard documents using NSSearchPathForDirectoriesInDomains
    //First Param = Searching the documents directory
    //Second Param = Searching the Users directory and not the System
    //Expand any tildes and identify home directories.
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"data.sqlite"];
}

- (void)copyDatabaseToDocument {
    //Using NSFileManager we can perform many file system operations.
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *dbPath = [self getDatabasePath];
    BOOL success = [fileManager fileExistsAtPath:dbPath];

    if(!success) {

        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"data.sqlite"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

        if (!success)
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
}

- (sqlite3*)openDatabaseConnection {
    sqlite3 *database;
    NSString * path = [self getDatabasePath];

    if (sqlite3_open([path UTF8String], &database) != SQLITE_OK) {
        sqlite3_close(database);
        NSAssert1(0, @"Failed to open database with message '%s'.", sqlite3_errmsg(database));
    }
    return database;
} 
```

这是我选择数据的代码。错误发生在以下行： `sqlite3_prepare_v2(database, query, -1, &selectStatement, NULL)`

```
- (People*) getPeople{
    sqlite3 *database = [[[DBConnector alloc] init] openDatabaseConnection];
    if(database == nil)
        return nil;
    sqlite3_stmt *selectStatement;
    NSString *rawquery      = @"select * from people";
    const char *query       = [rawquery UTF8String];
    NSMutableArray* result = [[NSMutableArray alloc] init];

    if (sqlite3_prepare_v2(database, query, -1, &selectStatement, NULL) == SQLITE_OK) {
        while (sqlite3_step(selectStatement) == SQLITE_ROW) {

            //Parse the data by calling a private method:
            People *people = [self parsePeopleWithStatement:selectStatement];

            [result addObject:people];
        }
    }else{
        NSAssert1(0, @"Error: '%s'.", sqlite3_errmsg(database));
    }
    sqlite3_finalize(selectStatement);
    return result;

} 
```

如果你知道我有什么错误，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:14:15.860

我已经自己解决了这个问题。当我调试应用程序时，我看到它没有调用`applicationDidFinishLaunching`方法，它调用了`applicationDidFinishLaunchingWithOptions`方法。我只是放置代码来调用`copyDatabaseToDocument`at`applicationDidFinishLaunchingWithOptions`方法并且它可以工作。这是我的委托类的代码：

```
//THIS METHOD WAS NOT CALLED
- (void)applicationDidFinishLaunching:(UIApplication *)application{
    DBConnector *connector = [[DBConnector alloc] init];
    [connector copyDatabaseToDocument];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
       self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

       //SHOW MY SCREEN
        (...)

       self.window.backgroundColor = [UIColor whiteColor];
       [self.window makeKeyAndVisible];
       return YES;
} 
```

顺便说一句，我认为这不是真正的答案同步我不知道为什么我的应用程序没有从 applicationDidFinishLaunching() 开始。如果你知道，请给我一个描述。

谢谢。

# xcode - 如果更改了段控制器，如何删除表视图中的子视图（按钮）？

> ID：13786678
> 
> 赞同：-1
> 
> 时间：2012-12-09T10:31:39.543
> 
> 标签：xcode, uitableview, uisegmentedcontrol

我面临的问题是我在 UItable 视图中有分段控制器，选择索引 0，它假设显示按钮（并且它工作完美）。问题是当我选择索引 1 并且表格视图改变了它的内容时，这里的按钮应该都被删除了。如果我添加这些语句，它只会删除最后一个单元格中的按钮

## 这些语句只是删除最后一个单元格的按钮

```
 [cell willRemoveSubview:downloadButton];
        [downloadButton removeFromSuperview];
        downloadButton.hidden=YES; 
```

* * *

```
-(void)configureCell: (UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    downloadButton = [UIButton buttonWithType:UIButtonTypeCustom] ;
    [downloadButton setFrame:CGRectMake(250,8,30,30)];
    [downloadButton setTag :indexPath.row];
    [downloadButton setImage:[UIImage imageNamed:@"DownloadLesson.png"] forState:UIControlStateNormal];
    [downloadButton addTarget:self action:@selector(cellButton:) forControlEvents: UIControlEventTouchUpInside];

    if (segOL.selectedSegmentIndex==0) {
        [cell addSubview:downloadButton];
    } else {
        [cell willRemoveSubview:downloadButton];
        [downloadButton removeFromSuperview];
        downloadButton.hidden=YES;
    }
}
- (IBAction)cellButton:(id)sender {

    UIButton *play = sender;   
    NSLog(@"Number of row %d", play.tag]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:43:36.787

当您调用 removefromsuperview 时，downloadButton 永远不会添加到视图中。每次使用电池时都会重新制作。**按钮不断堆积**

您必须保存旧按钮，而不是制作新按钮并忘记旧按钮：）

例如：

```
@interface CellClass : UITableViewCell {
    UIButton *downloadButton;
}

...

-(void)configureCell: (UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    if(!downloadButton) {
        downloadButton = [UIButton buttonWithType:UIButtonTypeCustom] ;
        [downloadButton setFrame:CGRectMake(250,8,30,30)];
        [downloadButton setTag :indexPath.row];
        [downloadButton setImage:[UIImage imageNamed:@"DownloadLesson.png"] forState:UIControlStateNormal];
        [downloadButton addTarget:self action:@selector(cellButton:) forControlEvents: UIControlEventTouchUpInside];
    }        
    if (segOL.selectedSegmentIndex==0) {
        [cell addSubview:downloadButton];
    } else {
        [cell willRemoveSubview:downloadButton];
        [downloadButton removeFromSuperview];
        downloadButton.hidden=YES;
    }
}
- (IBAction)cellButton:(id)sender {

    UIButton *play = sender;

    NSLog(@"Number of row %d", play.tag]);
} 
```

# android - 为什么我的任务应用程序在 android 中失败？

> ID：13786679
> 
> 赞同：2
> 
> 时间：2012-12-09T10:31:49.350
> 
> 标签：android, google-api, google-api-java-client

我对 android 开发很陌生，我打算做一个与任务相关的应用程序，但我在找到完美的例子时遇到了很多困难。一周以来我做了这么多的研究并且很生气:(...我希望你们能帮助我解决我的问题。

最初，我阅读了 Google 提供的任务文档，但未能成功，因此许多 API 已被弃用。所以我直接从谷歌这里下载了任务示例应用程序。

我能够在我的 PC 中成功构建应用程序，并且我已经从 API 控制台配置了 AUTH。但我收到 404 禁止错误，它说访问未配置。

当我在这个 google 组中搜索时，我发现了一个简单的示例示例，正如它所描述的，我在 API 控制台中启用了任务（我也启用了日历以更安全）。我已经使用应用程序包名称和密钥库证书生成了一个 API 密钥。在这我也得到相同的 404 禁止错误，原因是未配置访问。这是完整的代码。

```
package com.android.imran.gtasksample;

import com.google.api.client.extensions.android2.AndroidHttp;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource;
import com.google.api.client.googleapis.extensions.android2.auth.GoogleAccountManager;
import com.google.api.client.http.HttpResponse;
import com.google.api.client.http.HttpResponseException;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.json.JsonHttpRequest;
import com.google.api.client.http.json.JsonHttpRequestInitializer;
import com.google.api.client.json.jackson.JacksonFactory; 
import com.google.api.services.tasks.Tasks;
import com.google.api.services.tasks.TasksRequest;
import com.google.api.services.tasks.Tasks.Tasklists;
import com.google.api.services.tasks.model.Task;
import com.google.api.services.tasks.model.TaskList;
import com.google.api.services.tasks.model.TaskLists;

import android.accounts.Account;
import android.accounts.AccountManager;
import android.accounts.AccountManagerCallback;
import android.accounts.AccountManagerFuture;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.logging.Level;
import java.util.logging.Logger;

import org.apache.http.client.ClientProtocolException;

public class GTaskSample extends ListActivity {

    private static final Level LOGGING_LEVEL = Level.OFF;

    private static final String TAG = "GTaskSample";

    final String API_KEY = "AIzaSyDTNHitJIgg_ZP3rJM1uBsXs1_IZGLb_do";
    String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/tasks";

    private static final String PREF = "GTaskSamplePref";
    private static final int DIALOG_ACCOUNTS = 0;
    private static final int MENU_ACCOUNTS = 0;
    public static final int REQUEST_AUTHENTICATE = 0;

    private final HttpTransport transport = AndroidHttp
            .newCompatibleTransport();

    Tasks service;
    GoogleAccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(
            null);

    // TODO: save auth token in preferences?
    GoogleAccountManager accountManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        service = Tasks.builder(transport, new JacksonFactory())
                .setApplicationName("Google-TasksSample")
                .setHttpRequestInitializer(accessProtectedResource)
                .setJsonHttpRequestInitializer(
                        new JsonHttpRequestInitializer() {

                            public void initialize(JsonHttpRequest request)
                                    throws IOException {
                                TasksRequest tasksRequest = (TasksRequest) request;
                                tasksRequest.setPrettyPrint(true);
                                tasksRequest.setKey(API_KEY);
                            }
                        }).build();

        accountManager = new GoogleAccountManager(this);
        Logger.getLogger("com.google.api.client").setLevel(LOGGING_LEVEL);
        gotAccount(false);

    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DIALOG_ACCOUNTS:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Select a Google account");
            final Account[] accounts = accountManager.getAccounts();
            final int size = accounts.length;
            String[] names = new String[size];
            for (int i = 0; i < size; i++) {
                names[i] = accounts[i].name;
            }
            builder.setItems(names, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    gotAccount(accounts[which]);
                }
            });
            return builder.create();
        }
        return null;
    }

    void gotAccount(boolean tokenExpired) {
        SharedPreferences settings = getSharedPreferences(PREF, 0);
        String accountName = settings.getString("accountName", null);
        Account account = accountManager.getAccountByName(accountName);
        if (account != null) {
            if (tokenExpired) {
                accountManager.invalidateAuthToken(accessProtectedResource
                        .getAccessToken());
                accessProtectedResource.setAccessToken(null);
            }
            gotAccount(account);
            return;
        }
        showDialog(DIALOG_ACCOUNTS);
    }

    void gotAccount(final Account account) {
        SharedPreferences settings = getSharedPreferences(PREF, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("accountName", account.name);
        editor.commit();
        accountManager.manager.getAuthToken(account, AUTH_TOKEN_TYPE, true,
                new AccountManagerCallback<Bundle>() {

                    public void run(AccountManagerFuture<Bundle> future) {
                        try {
                            Bundle bundle = future.getResult();
                            if (bundle.containsKey(AccountManager.KEY_INTENT)) {

                                Intent intent = bundle
                                        .getParcelable(AccountManager.KEY_INTENT);
                                intent.setFlags(intent.getFlags()
                                        & ~Intent.FLAG_ACTIVITY_NEW_TASK);
                                startActivityForResult(intent,
                                        REQUEST_AUTHENTICATE);
                            } else if (bundle
                                    .containsKey(AccountManager.KEY_AUTHTOKEN)) {
                                accessProtectedResource
                                        .setAccessToken(bundle
                                                .getString(AccountManager.KEY_AUTHTOKEN));
                                String authToken=bundle.getString(AccountManager.KEY_AUTHTOKEN).toString();
                                Log.d("TasksSample", "Autho Toke ="+authToken);
                                onAuthToken();
                            }
                        } catch (Exception e) {
                            handleException(e);
                        }
                    }
                }, null);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
        case REQUEST_AUTHENTICATE:
            if (resultCode == RESULT_OK) {
                gotAccount(false);
            } else {
                showDialog(DIALOG_ACCOUNTS);
            }
            break;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(0, MENU_ACCOUNTS, 0, "Switch Account");
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case MENU_ACCOUNTS:
            showDialog(DIALOG_ACCOUNTS);
            return true;
        }
        return false;
    }

    void handleException(Exception e) {
        e.printStackTrace();
        if (e instanceof HttpResponseException) {
            HttpResponse response = ((HttpResponseException) e).getResponse();
            int statusCode = response.getStatusCode();
            try {
                response.ignore();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            //  should only try this once to avoid infinite loop
            if (statusCode == 401) {
                gotAccount(true);
                return;
            }
        }
        Log.e(TAG, e.getMessage(), e);
    }

    void onAuthToken() {
        try {
            insertTaskList();
            List<String> taskTitles = new ArrayList<String>();
            List<TaskList> taskLists = service.tasklists().list().execute()
                    .getItems();
            if (taskLists != null) {
                for (TaskList taskList : taskLists) {
                    List<Task> tasks = service.tasks().list(taskList.getId())
                            .execute().getItems();
                    if (tasks != null) {
                        for (Task task : tasks) {
                            taskTitles.add(task.getTitle());
                        }
                    } else {
                        taskTitles.add("No sub tasks.");
                    }
                }
            } else {
                taskTitles.add("No tasks.");
            }
            setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item,
                    taskTitles));

        } catch (IOException e) {
            Log.d(TAG, "Exception ::"+e.getMessage());
            handleException(e);
        }
        setContentView(R.layout.main_task);
    }

    public void addTaskListAction(View view){
        Thread thread=new Thread(new Runnable() {

            @Override
            public void run() {

                insertTaskList();
            }
        });
        thread.start();
    }

    private void insertTaskList(){
        //TODO: testing
        try{

        TaskList tempTaskList=new TaskList();
        tempTaskList.setTitle("Task List :-"+new Random().nextInt(30));
        TaskList newTaskList=service.tasklists().insert(tempTaskList).execute();
        Log.d(TAG, "Inserted TaskList ::"+newTaskList.toString());
        }catch(ClientProtocolException exp){
            Log.d(TAG, "ClientProtocolException msg="+exp.getMessage());
        }
        catch(Exception exp){
            Log.d(TAG, "Exception msg="+exp.getMessage());
            handleException(exp);
        }
    }
} 
```

这是此邮件[列表](https://groups.google.com/forum/?fromgroups=#!topic/google-tasks-api/nMnjt8kJGyg)中我的 API 控制台图片。我不能在这里粘贴图片，因为我没有权限，我是这个论坛的新手

我在做什么错误，为什么我无法检索特定帐户的任务？这种方法错了吗？.. 建议我好的技术。请不要忽略此电子邮件。请

在此先感谢-Solo

# php - 致命的 .htaccess 错误

> ID：13786682
> 
> 赞同：-1
> 
> 时间：2012-12-09T10:33:58.303
> 
> 标签：php, .htaccess, directory, rewrite

我有一个上传照片的目录，按日期排序，如下所示：

```
http://mysite.com/uploads/2012-12-08/abcd.png 
```

我`index.php`在我的`/uploads/`文件夹中创建了一个`.htaccess`

我可以使用`index.php`来控制图像`width`&`height`

原始网址如下所示：`http://mysite.com/uploads/?url=2012-12-08/abcd.png&width=128`

这是`.htaccess`代码：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*) /uploads/index.php?url=$1 [QSA]
</IfModule> 
```

如果我输入 url:`http://mysite.com/uploads/2012-12-08/abcd.png&width=128`将出现调整大小的图像

但问题是浏览器将图像扩展名显示为`png&width=128`

在某些论坛中也无法显示图片网址，因为 & 符号

我怎样才能改变`.png&width=128`成`.png?width=128?`

还有两个查询字符串

最大值：?url=$&width=$&height=$&rotate=$&filter=$&

我尝试了以下规则：

```
RewriteCond %{QUERY_STRING} (.+)
RewriteRule ^(.*)$ /uploads/index.php?url=$1&%1 [QSA] 
```

但显示http错误500

我尝试了很多规则，但没有一个有效..

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:47:02.813

这不是将 url 更改为不同模式的问题。你采取了错误的方法。现代浏览器在保存某些下载的对象时会建议一个文件名。该文件名建议基于请求下载时交付服务器指定的标头。标头带有一些额外的元信息，描述发送到浏览器的实际内容是什么。

当无法从接收到的标头中提取可用信息时，浏览器仅使用 url 模式来建议文件名。

所以你要做的是发送propper header，然后每个浏览器都会使用一个建议的名称。如果你用谷歌搜索的话，有很多关于这个的条目。作为起点，在发送实际图像*之前在 index.php 脚本中使用它：*

```
<?php
// the mime type of the object, replace 'image/png' dynamically as required
header('Content-Type: image/png');
// the suggested file name, obviously you can dynamically replace 'image.png'
header('Content-Disposition: Attachment;filename=image.png'); 
// NOW send the content (the image)
?> 
```

作为替代方案，您可以使用不同的处置。“附件”强制下载图像，“内联”建议内联显示而不是下载。这只有在对象的 mime 类型实际上可以内联显示时才有效：

```
<?php
// the mime type of the object, replace 'image/png' dynamically as required
header('Content-Type: image/png');
// the suggested file name, obviously you can dynamically replace 'image.png'
header('Content-Disposition: inline;filename=image.png'); 
// NOW send the content (the image)
?> 
```

无论你做什么，阅读这些东西是如何工作的以及你有什么选择和替代方案肯定是有意义的。*这是真正了解*正在发生的事情的唯一方法，这是实现代码时最重要的事情之一。我建议你从阅读 phps [header()](http://php.net/manual/en/function.header.php)函数开始。

# c# - 计时器未从 00:00 开始

> ID：13786683
> 
> 赞同：0
> 
> 时间：2012-12-09T10:34:00.020
> 
> 标签：c#, time, save

我有一个游戏，其中涉及一个计时器。每经过两分钟，不同玩家之间的新一轮就开始了。所以，我有一个从 00:00 开始的文本框，并且每秒更改一次，直到等于 02:00。

现在，如果用户关闭表单，我想在一轮中间保存游戏状态。我需要做的是，在加载时，文本框从用户上次离开游戏的时间开始，并正常持续到 02:00。

我怎样才能做到这一点？

到目前为止，这就是我所拥有的，其中锦标赛是形式

```
public Tournament()
{
     _timer = new System.Windows.Forms.Timer();
     _timer.Interval = 1000;
     _timer.Tick += Timer_Tick;
     _myDateTime = DateTime.Now;
     newDate = new DateTime();
     newDate = newDate.AddMinutes(2.00);
     _timer.Start();
     InitializeComponent();
}

void Timer_Tick(object sender, EventArgs e)
{
     var diff = DateTime.Now.Subtract(_myDateTime);
     this.textBox1.Text = diff.ToString(@"mm\:ss");

     DateTime dt = Convert.ToDateTime(diff.ToString());

     if (newDate.Minute == dt.Minute)
     {
         _timer.Stop();
         _myDateTime = DateTime.Now;

         displayPointsOrResults();

         this.textBox1.Text = diff.ToString(@"mm\:ss");  
     }
   } 
```

在我的 LoadGame 方法中：其中 timePassed 是我在文本框中写的

```
 string[] splitted6 = timePassed.Split(':');

  if (splitted6[0] == "00")
  {
      int remainingTime = 120 - Convert.ToInt32(splitted6[1]);

      DateTime time = DateTime.Now.Date; 
      time = time.AddMinutes(remainingTime);

      _myDateTime = time;
  }
  else
  {
      int leftTime = Convert.ToInt32(splitted[0].Trim('0') + splitted[1]);
      int remainingTime = 120 - leftTime;

      DateTime time = DateTime.Now.Date; 
      time = time.AddMinutes(remainingTime);

      _myDateTime = time;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:39:09.597

使用`TimeSpan`而不是`DateTime`保存和加载当前超时：

```
int _roundDuration = 2 * 60; // 2 minutes

void Timer_Tick(object sender, EventArgs e)
{
     TimeSpan diff = DateTime.Now - _myDateTime;
     textBox1.Text = diff.ToString(@"mm\:ss");
     if (diff.TotalSeconds >= _roundDuration)
     {
          _timer.Stop();    
          _myDateTime = DateTime.Now;
          displayPointsOrResults();
     }
} 
```

加载游戏时（解析`textBox1.Text`）：

```
TimeSpan diff = TimeSpan.ParseExact(textBox1.Text, @"mm\:ss", null);
_myDateTime = DateTime.Now.Substract(diff); 
```

每当您加载游戏时，开始时间将按照开始显示超时前计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T11:01:19.343

到目前为止，您过于复杂了！不要将值保存为字符串（例如标签`Text`）或解析任何“字符串化”值。

而是使用出于显示原因格式化的幕后计数器（例如计算秒数）：

```
int _seconds = 0;
const int _roundDuration = 120; // 2 minutes

...

void Timer_Tick(object sender, EventArgs e)
{
    if (_seconds++ >= _roundDuration)
    {
        _seconds = 0;
        displayPointsOrResults();
    }
    textBox1.Text = (_seconds / 60).ToString("D2") + ":" + (_seconds % 60).ToString("D2");
} 
```

# spring - Spring3.2和jboss为7

> ID：13786685
> 
> 赞同：40
> 
> 时间：2012-12-09T10:34:02.723
> 
> 标签：spring, spring-mvc, jboss7.x

如何解决此警告？如果我使用 Spring 3.2，我会看到这个警告：

> 14:24:19,014 WARN [org.jboss.as.ee]（MSC 服务线程 1-10）JBAS011006：由于异常：org.jboss，未安装可选组件 org.springframework.web.context.request.async.StandardServletAsyncWebRequest。 as.server.deployment.DeploymentUnitProcessingException：JBAS011054：找不到类 org.springframework.web.context.request.async.StandardServletAsyncWebRequest 的默认构造函数

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-16T22:08:37.780

显然这是“正常的”，一切都应该仍然有效。中可能有一个（匿名）内部类`StandardServletAsyncWebRequest`。

另请参阅[Applicaiton 部署在 JBoss7.0.2 Final (Arc) 但未能在 7.1.1 Final (Brontes)](https://community.jboss.org/message/760558#760558)和[metadata-complete="true" not respected](https://community.jboss.org/message/739794)中。基本上这只是一个警告，一切都很好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-02T12:02:34.747

要展开 aloplop85 的链接，您可以忽略此消息。您可能想要抑制它，因为它会分散注意力（在我看来，正常工作的应用程序不应该在日志中正常打印堆栈跟踪）。说明在这里[http://middlewaremagic.com/jboss/?p=2421](http://middlewaremagic.com/jboss/?p=2421)，简短版本是将以下文本添加到配置文件中（例如`standalone.xml`）：

```
 <subsystem xmlns="urn:jboss:domain:logging:1.0">
      <console-handler name="CONSOLE">
          <!-- levels, formatters etc. -->
          <filter>
              <not>
                  <match pattern="JBAS011054"/>
              </not>
          </filter>
      </console-handler>
      <!-- and the same for other handlers -->
  </subsystem> 
```

对于 JBoss 7.2.0，语法有点不同：

```
 <subsystem xmlns="urn:jboss:domain:logging:1.2">
      <console-handler name="CONSOLE">
         <!-- levels, formatters etc. -->
         <filter value='not(match("JBAS011054"))' />
      </console-handler>
      <!-- and the same for other handlers -->
  </subsystem> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-06T08:46:30.067

这就是我在 jboss-as-7.1.1 中压制它的方式

将 configuration/standalone.xml 更新为

```
 <subsystem xmlns="urn:jboss:domain:logging:1.1">
      <console-handler name="CONSOLE">
          <filter>
              <not>
                  <match pattern="JBAS011054|JBAS011006"/>
              </not>
          </filter>
      </console-handler>
  </subsystem> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-15T13:46:39.487

当找不到类的无参数构造函数时，JBoss 会警告您。在这种情况下，这个 Spring 类没有无参数构造函数。就这一个：

`public StandardServletAsyncWebRequest(HttpServletRequest request, HttpServletResponse response) { super(request, response); }`

没问题..那会工作的..

# python - pygtk 全局标签样式

> ID：13786686
> 
> 赞同：1
> 
> 时间：2012-12-09T10:34:09.800
> 
> 标签：python, styles, gtk

我正在使用 python 和 gtk。

是否可以创建全局样式？
我想将窗口中所有标签中的文本设置为红色和粗体。
请给出代码示例。

编辑 1：它也必须在 Windows 上工作。

编辑2：我的实际代码：

```
 #!/usr/bin/python

    import gtk
    import db
    import datetime
    import gobject
    import pango

    class ReportNew(gobject.GObject):

            __gsignals__ = {"update-db": (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,())}

            def __init__(self):
                    # Basics
                    self.__gobject_init__()
                    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
                    self.window.connect("destroy",self.destroy)
                    self.window.set_default_size(800,400)
                    self.window.set_title("WINDOW")

                    screen = gtk.gdk.Screen.get_default()
                    css_provider = gtk.CssProvider()
                    css_provider.load_from_path('style.css')
                    context = gtk.StyleContext()
                    context.add_provider_for_screen( screen,
                                            css_provider,
                                            gtk.STYLE_PROVIDER_PRIORITY_USER
                                            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:46:11.437

您可以使用选择器来指定哪些小部件受样式表影响。

```
from gi.repository import Gdk as gdk

screen = gdk.Screen.get_default()

css_provider = gtk.CssProvider()
css_provider.load_from_path('/path/to/file.css')

context = gtk.StyleContext()
context.add_provider_for_screen( screen,
                                 css_provider,
                                 gtk.STYLE_PROVIDER_PRIORITY_USER
                                 ) 
```

创造`/path/to/file.css`

```
/* Set background on GtkLabel
* and other types inheriting from
* it
*/
GtkLabel {
  background-color: red;
  font-weight:bold;
} 
```

# actionscript-3 - Flex：SWFloader 完成事件没有被触发

> ID：13786689
> 
> 赞同：1
> 
> 时间：2012-12-09T10:35:06.193
> 
> 标签：actionscript-3, flash, apache-flex, swfloader

我收到一个奇怪的错误，一些 Flash 文件正在加载，但其他一些文件没有加载。没有显示错误消息。请让我知道如何解决这个问题。

这是一个例子

```
<fx:Script>
<![CDATA[   
protected function loader1_completeHandler(event:Event):void
{
    vals.text=vals.text+"loaded test"
}
]]>
</fx:Script>

<mx:SWFLoader id="loader" source="include/sumita_logo.swf"/>

<mx:SWFLoader id="loader1" complete="loader1_completeHandler(event)"
source="include/sumita.swf"/>

<mx:Label id="vals" text="Was here"/> 
```

问题是“加载程序”加载没有错误，但没有调用 loader1 的完整事件，并且标签 vals 文本仍然是“在这里”。SWF sumita.swf 也未加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T09:31:19.223

代替 mx 组件尝试 spark 组件。下面给出的示例代码

```
<s:VGroup>
    <s:SWFLoader id="loader" source="./black.swf"/>
    <s:SWFLoader id="loader1" complete="loader1_completeHandler(event)" source="./blue.swf"/>

    <mx:Label id="vals" text="Was here"/>
</s:VGroup>

protected function loader1_completeHandler(event:Event):void
{
trace("loader1 loaded"); } 
```

# html - 我找不到的 CSS 有问题

> ID：13786690
> 
> 赞同：-1
> 
> 时间：2012-12-09T10:35:18.927
> 
> 标签：html, css

当我在 Internet Explorer 中测试我的网站时，发生了这个奇怪的问题，我找不到问题......

问题是我的`content1`div 位置很奇怪

HTML 代码：

```
<?xml version="1.0"?>
<! DOCTYPE html PUPLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml/DTD/xhtml1/-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title> Start </title>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <link rel="stylesheet" type="text/css" href="styles.css" />
        <!--[if gte IE 6]>
        <link rel="stylesheet" type="text/css" href="nycss.css" />
        <![endif]-->
    </head>
<body>

<div id="main">
    <div id="banner">
    <div id='cssmenu'>
    <ul>
    <li class='active '><a href='#'><span>Hem</span></a></li>
       <li><a href='#'><span>Information</span></a></li>
       <li><a href='#'><span>Om oss</span></a></li>
       <li><a href='#'><span>Anmäla</span></a></li>
       <li><a href='#'><span>Partners</span></a></li>
    </ul>
    </div>
    </div>

    <div id="content1">
        <div id="background">
        </div>

        <div id="textoperation"><h1> Operation Pixel 19/02-13 </br>Folkets Hus i Karlshamn </h1></div>
        <div id="textinled">
            <p> Operation Pixel drivs av fem elever från JB Gymnasiet </br> i Karlshamn som ett projekt arbete. Vi som står för lanet </br> är Adam Erlandsson, Isak Risberg Jönsson, Jonatan Tjärnberg, </br>Victor Johansson och Lucas Mattsson.</p>
            <p> Lanet kostar 200 kr och vara mellan 2013.02.19-2013-02.21\. </br> Du kan även förhandsboka och betala 150 kr istället.</br> Klicka på <a href="#"> Anmäla </a> för att boka din plats. </p>
        </div>
        <div id="video">
            <iframe width="410" height="280" src="http://www.youtube.com/embed/qP40Liau6z4" frameborder="0" allowfullscreen></iframe>
        </div>

        <div id="mitten"></div>
        <div id="nyheter">
            <div id="nyhettext"><h2> Nyheter </h2></div>
            <div id="underline"></div>
            <div id="nyhet">
            <h4>Hemsidan är på gång nu</h4><p>Adam Erlandsson håller just nu på att utveckla Operation Pixelshemsida. Hemsidan kommer vara klart inom 1-2 veckor.</br> Mer information kommer inom kort.</p> 
            <h4> Datum och lokal är bestämd </h4><p> Vi har nu hittat en lokal (folkets hus) och datumet är </br> satt mellan  19/02-13 21/02-13\. Lorem ipsum dolor sit amet, consectetur </br>adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. </br></br>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate. </p>
            <h4> Projekt arbete </h4> <p>ed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem ap
            eriam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. </br></br> Nemo enim ipsam voluptatem quia volup
            tas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.
            </br></br></br><h3><a href="#" class="nyhetlänk"> Läs alla nyheter </a></h3>
        </div>
        </div>

        <div id="fb">
            <a href="#"><img src="images/fb.png" /></a>
        </div>
        <div id="twitter">
            <a href="#"><img src="images/twitter.png" /> </a>
        </div>

    </div>
    <div id="content2">
    <div id="textcontent">
        <div id="test"><a href="#"> Hem </a> </br></div>
        <div id="test"><a href="#"> Information </a> </br></div>
        <div id="test"><a href="#"> Om Oss </a> </br></div>
        <div id="test"><a href="#"> Anmäla </a> </br></div>
        <div id="test"><a href="#"> Partners </a></div>
    </div>
    <div id="kodad">
        <p> Code by Adam Erlandsson. Design by Adam Erlandsson & Victor Johansson </p>
    </div>
    <div id="copy">
        <p> © 2012 Operation Pixel </p>
    </div>

</div>
</div>
</body>
</html> 
```

CSS：

```
body{
    background-image: url(images/bakgrund.png);
    background-repeat: no-repeat;
    background-position: center;
    height: 100%;
    width: 100%;
    text-align: center;
}

#fb{
   height: 44px;
   width: 45px;
    margin-top: 510px;
    margin-left: 835px;
    position: absolute;
}

#nyheter{
    position: absolute;
    width: 460px;
    height: 210px;
    margin-top: 30px;
    margin-left: 500px;
}

#nyheter a{
    color: white;
    text-decoration: underline;
}

.nyhetlänk{
    margin-top: 30px;
    position: absolute;
}

#nyheter a:hover{
    color: #c4c4c4;
}

h4{
    font-size: 20px;
    color: white;

}

#nyheter p{
    margin-top: -18px;
    font-size: x-small;
}

h3{
    font-weight: 800;
    font-size: 20px;
}

h2{
    color: white;
    font-family: "Bebas Neue";
    font-weight: 400;
    font-size: 50px;
    position: absolute;
}

#twitter{
   height: 44px;
   width: 45px;
    margin-top: 510px;
    margin-left: 895px;
    color: black;
    position: absolute;
}

#banner{
    height: 180px;
    width: 1000px;
    background-image: url(banner.png);
    background-repeat: no-repeat;
    border: thin ridge #3a3a3a;
    text-align: left;
    margin: auto;
}

#content1{
    width: 1000px;
    height: 610px;
    color: white;
    font-family: Makisupa;
    z-index: 1;
    border: thin ridge #3a3a3a;
    background-color: black;
    text-align: left;
    margin: auto;
}

#content2{
    width: 1000px;
    height: 100px;
    color: #a8a8a8;
    font-family: Arial, Helvetica, sans-serif;
    font-size: small;
    border: thin ridge #3a3a3a;
    background-color: black;
    text-align: left;
    margin-top: 5px;
}

#textcontent{
    margin-left: 10px;
    margin-top: 10px;
    font-size: x-small;

}

#copy{
    margin-left: 850px;
    margin-top: 70px;
    position: absolute;
    font-size: x-small;
}

#kodad{
    margin-left: 320px;
    position: absolute;
    margin-top: 75px;
    font-size: xx-small;
}

a{
    text-decoration: none;
    color: #a8a8a8;
}

a:hover{
    color: white;
}

#textoperation{
    margin-top: 15px;
    margin-left: 20px;
}

#nyhet{
    position: absolute;
    font-family: Arial, Helvetica, sans-serif;
    color: #bfbfbf;
    margin-left: 10px;
    margin-top: 40px; 
}

#huvudtext{
    margin-top: -10px;
}

#rubrik h3{
    font-size: 15px;
    font-weight: 400;
}

#textinled{
    position: absolute;
    font-family: Arial, Helvetica, sans-serif;
    color: #bfbfbf;
    font-size: x-small;
    margin-left: 20px;
    margin-top: 130px;
}

#textinled a{
    color: white;
}

#textinled a:hover{
    color: #bfbfbf;
}

#video{
    position: absolute;
    margin-left: 20px;
    margin-top: 290px;
}

h2{
    color: white;
    font-family: "Bebas Neue";
    font-weight: 400;
    font-size: 40px;
    position: absolute;
}

#nyhettext{
    position: absolute;
    margin-top: -23px;
    margin-left: 10px;
}

#huvudtext{

}

#underline{
   background-color: #3a3a3a;
    position: absolute;
    margin-top: 20px;
    margin-left: 10px;
    /* position: absolute; */
    width: 450px;
    height: 3px;
    font-size: 1px;
}

#mitten{
    position: absolute;
    height: 560px;
    width: 3;
    background-color: #3a3a3a;
    margin-top: 10px;
    margin-left: 470px; 
    text-align: center;
}

h1{
    color: white;
    font-family: "Bebas Neue";
    font-weight: 400;
    font-size: 50px;
    position: absolute;
}

#cssmenu{
    margin-top: 170px;
}

#cssmenu ul
{
    margin: 0;
    padding:0;
    list-style-type:none;
    width:auto;
    position:relative;
    display:block;
    height:30px;
    font-size:12px;
    font-weight:bold;
    background:transparent url(images/nav_bg.png) repeat-x top left;
    font-family:Arial, Helvetica, sans-serif;
    border-bottom:1px solid #000000;
    border-top:1px solid #000000;
}

#cssmenu li
{
    display:block;
    float:left;
    margin:0;
    padding:0;
}

#cssmenu li a
{
    display:block;
    float:left;
    color: white;
    text-decoration:none;
    font-weight:bold;
    padding:8px 20px 0 20px;
}

#cssmenu li a:hover
{   
    color: #c4c4c4;
    height:22px;
    background:transparent url(images/nav_bg.png) 0px -30px no-repeat;      
}

#cssmenu li.active a
{
    display:inline;
    height:22px;
    background:transparent url(images/nav_bg.png) 0px -30px no-repeat;  
    float:left;
    margin:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:24:34.977

对不起，我忘记链接图片了......

[http://img132.imageshack.us/img132/426/buggk.png](http://img132.imageshack.us/img132/426/buggk.png)

[http://img259.imageshack.us/img259/6586/bugg1t.png](http://img259.imageshack.us/img259/6586/bugg1t.png)

的宽度`#content1`与`#banner`和`#content2`

`#content1`是那个行为怪异的人。

# javascript - 如何将 json 数据加载到 id="hello"

> ID：13786701
> 
> 赞同：3
> 
> 时间：2012-12-09T10:37:03.640
> 
> 标签：javascript, jquery, json

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <title>doers.lk</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <style type="text/css" media="screen">

    </style>
    </head>
    <body>
      <p id="hello"></p>
    </body>
    </html> 
```

**查询**

```
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
  alert('Latitude: ' + data.latitude +
        '\n Longitude: ' + data.longitude +
        '\n Country: ' + data.address.country);
}); 
```

[在这里演示](http://jsfiddle.net/NEWAC/)

我想将此 json 数据加载到 id="hello"。有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:38:24.743

```
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
  $("#hello").html('Latitude: ' + data.latitude +
        '\n Longitude: ' + data.longitude +
        '\n Country: ' + data.address.country);
});​ 
```

看到这个小提琴：http: [//jsfiddle.net/d4hGj/1/](http://jsfiddle.net/d4hGj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:39:11.813

jQuery 提供了[`.html()`](http://api.jquery.com/html/)让您获取/设置元素内容的方法。在您的回调中，您可以选择其 id 上的元素并使用该`.html()`方法添加您的内容。

```
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
  $("#hello").html('Latitude: ' + data.latitude +
        '<br /> Longitude: ' + data.longitude +
        '<br /> Country: ' + data.address.country);
});​ 
```

[**工作示例**](http://jsfiddle.net/NEWAC/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T09:26:25.273

[演示在这里](http://jsfiddle.net/4mry4/)

jQuery代码

```
$.getJSON('http://smart-ip.net/geoip-json/?callback=?', function (data) {
    $("#hello").html('Latitude: ' + data.latitude +
        '<br /> Longitude: ' + data.longitude +
        '<br /> Country: ' + data.countryName);
}); 
```

html

使用 smart-ip.net 比使用 wipmania.com 更好

# c++ - 从双向链表中删除时如何避免内存泄漏？

> ID：13786704
> 
> 赞同：0
> 
> 时间：2012-12-09T10:37:47.430
> 
> 标签：c++, linked-list

假设我有一个双向链表，例如

```
class list
{
    /*...*/

private:
    struct node
    {
       node* prev;
       node* next;
       int* value;
    }

    node* first; //NULL if none
    node* last; //NULL if none

    /*...*/
} 
```

如果我想编写一个删除第一个节点并返回指向其值的指针的函数，这个实现会泄漏内存吗？

```
int* returnFrontValue()
{
   if(list_is_Empty())
        throw -1;
   else
   {
        node* v = first;
        int* returnMe = v->value;

        first = first->next;
        if(!first)
            last = NULL;

        delete v;
        first->prev = NULL;

        return returnMe;
   }
} 
```

我很好奇这个实现是否会泄漏内存，因为`returnMe`它指向一个动态分配的 int。`int returnMe = *(v->value);`最后有一个和返回会更好`&returnMe;`吗？

我必须`delete v->value;`在我之前明确`delete v;`吗？当您有各种指针时，我对删除内存的工作方式感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:44:03.887

我们看不到它`int`是如何分配的，但我相信它是动态分配的（作为与节点分开的分配，您将其删除）。

在那种情况下不，你还没有泄露任何东西，*但*你正在诱惑命运。这不是泄漏，因为指向的指针`int`仍然存在，所以它仍然可以被删除。但现在责任在于调用者。如果我调用`returnFrontCaller`，我会得到一个指向值的指针，然后*当我完成它时我**必须调用`delete`*它。

这不是很直观。一般`new`/`delete`调用应该在同一个地方匹配。如果我打电话`new`，我也会打电话`delete`。如果`new`电话发生在其他地方，我不认为电话`delete`是我的责任。

但是为什么值是动态分配的`Why do you store an`int* `instead of an`int` 呢？为什么函数返回一个指向 int 的指针，而不是它的副本？

如果您进行了更改，则不需要内存管理。调用者会得到一个 int，而不必担心“谁来电`delete`”。

或者，您可以使用智能指针类来包装它，并处理内存管理。

# jquery - jQuery - 在使用 Keyup/Ajax 时保持焦点

> ID：13786706
> 
> 赞同：0
> 
> 时间：2012-12-09T10:38:17.320
> 
> 标签：jquery, ajax, keyup

我正在尝试在文本框中的值更改时提交 Ajax 表单，我已经使用 Keyup 成功完成了该操作：

```
$('#Search').keyup(function () {
  $(this).parents('form').submit();
  return false;
}); 
```

问题是，texbox 失去焦点，所以用户不能继续打字。我将如何编辑它以使`#Search`文本框保持焦点，以便用户可以继续输入，但仍然在每个键上调用 Ajax 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:40:22.293

重新关注搜索文本框：

```
$('#Search').keyup(function () { $(this).parents('form').submit(); $(this).focus(); return false; }); 
```

或者（我更喜欢），在不提交表单的情况下进行 ajax 调用：

```
$('#Search').keyup(function () { differentAjaxFunction(); }); 
```

# objective-c - Cocos 2D v1.0.1 : 更改 CCMenuItemImage 正常图像时崩溃

> ID：13786712
> 
> 赞同：0
> 
> 时间：2012-12-09T10:39:16.723
> 
> 标签：objective-c, ipad, crash, cocos2d-iphone

我检索了一个崩溃日志文件，在对我的存档进行 XCode 分析后，该文件显示了有问题的代码行：

```
Date/Time:       2012-12-08 23:48:08.930 +0100
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x31a4088f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x3188b259 objc_exception_throw + 33
2   CoreFoundation                  0x31a40789 +[NSException raise:format:] + 1
3   Foundation                      0x374c73a3 -[NSAssertionHandler     handleFailureInMethod:object:file:lineNumber:description:] + 91
4   Killer                          0x0017ed35 -[CCSprite initWithFile:] (CCSprite.m:201)
5   Killer                          0x0017e419 +[CCSprite spriteWithFile:] (CCSprite.m:93)
6   Killer                          0x00123101 -[Player makeZombie] (Player.m:1363)
7   Killer                          0x00105a51 -[PlayScene endOfKilling:] (PlayScene.m:1438) 
```

这清楚地表明以下两行中的第二行正在崩溃：

```
NSLog(@"images %@ %@",self.zombieImage,self.zombieImageDown); 
[self.characterSprite setNormalImage:[CCSprite spriteWithFile:self.zombieImage]]; 
```

我知道当用户触摸相应的 CCMeanuItemImage 时似乎发生了崩溃，如果用户触摸它，而我们更改它的正常 et 选择的图像，是否有问题？这是改变形象的正确方式吗（我在游戏中做了几次）？

谢谢你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:45:02.010

有问题的调用是 initWithFile，因为在此之后它被称为 handlerFailureInMethod。
如果问题出在 initWithFile 上，请确保您证明的文件不可用。
检查 self.zombieImage 是否是一个有效的图像文件名。我的猜测是僵尸图像不是文件名（NSString），而是图像（UIImage），所以如果是这样的话，用它的文件名替换图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:01:12.097

您的崩溃与触摸菜单项有关，只是因为您在单击按钮时调用的方法中所做的事情。

从崩溃报告中您可以看到导致崩溃的调用堆栈。它说 CCSprite 类在第 201 行有断言（因为 cocos2d 是开源的，你可以检查这一行，看看什么样的断言被破坏了），这是在第 1363 行的方法 makeZombie 中从你的 Player 类调用的（您确定需要这么大的课程吗？我假设您在单个课程中放置了太多逻辑）。

所以检查断言行并检查 makeZombie 方法中的行。

# android - Eclipse 转换为 Maven 不允许使用 APK 打包

> ID：13786721
> 
> 赞同：2
> 
> 时间：2012-12-09T10:41:55.487
> 
> 标签：android, eclipse, maven

如何在 Eclipse Juno 上启用 APK 打包选项？

当我选择配置 > 转换为 Maven 时，打包组合框仅显示 POM、JAR e WAR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:25:49.817

m2e-android 插件尚不支持此功能。如果您想查看此内容，请在此处添加增强请求：

[https://github.com/rgladwell/m2e-android/issues](https://github.com/rgladwell/m2e-android/issues)

# actionscript-3 - loadCompressedDataFromByteArray 丢失了一些数据

> ID：13786723
> 
> 赞同：1
> 
> 时间：2012-12-09T10:42:12.530
> 
> 标签：actionscript-3, flash, apache-flex, audio, flash-player-11

我试图从加载的 mp3 文件中提取原始数据。突然间，sound.extract 方法返回的数据少于 Math.floor(sound.length * 44.1)。

```
sound = new Sound();
sound.loadCompressedDataFromByteArray( data, data.length );
_output = new ByteArray();
var len : Number = sound.extract( _output, Math.floor( sound.length * 44.1 ) ); 
```

例如：

```
Math.floor( sound.length * 44.1 ) = 213120, but len = 211968 :( 
```

我尝试了许多 mp3 文件，并且 sound.extract 总是返回比预期更少的数据。

我还尝试使用 sound.load() 函数加载数据，在这种情况下，sound.extract 准确地返回了 Math.floor(sound.length * 44.1)，如预期的那样。

```
Math.floor( sound.length * 44.1 ) = 213120 and len = 213120 :) 
```

使用 sound.load 函数直接下载不太适合我，因为我分析了 encoderDelay 和 encoderPadding 的 mp3 LAME 帧。用于无间隙播放 mp3。

有人知道它是 loadCompressedDataFromByteArray Adob​​e 错误还是我做错了什么？

# java - 为 Tomcat 服务设置 PermSize

> ID：13786728
> 
> 赞同：0
> 
> 时间：2012-12-09T10:44:00.570
> 
> 标签：java, tomcat

这是我在使用 Java 选项运行 Tomcat Windows 服务时遇到的错误 - `XX:MaxPermSize128m`：

```
[2012-12-09 18:30:55] [395  javajni.c] [error] CreateJavaVM Failed
[2012-12-09 18:30:55] [1000 prunsrv.c] [error] Failed initializing java C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar
[2012-12-09 18:30:55] [1269 prunsrv.c] [error] ServiceStart returned 2 
```

其中，如果没有设置 MaxPermSize，Tomcat 可以正常启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:50:25.407

您必须更改`CATALINA_OPTS`Tomcat Catalina 启动文件中定义的选项中的值。要增加 PermGen 内存，请更改 MaxPermSize 变量的值，否则更改 Xmx 变量的值。对于使用 WebRatio 工具安装的 Tomcat，CATALINA_OPTS 选项已经存在，您只需更改变量值。否则，您必须在文件顶部添加声明。

> 在 Windows 操作系统中，您必须打开“bin”目录中的“Catalina.bat”文件。您必须将更改应用到此行。
> 
> ```
>  set CATALINA_OPTS=-server -Xmx384m -XX:MaxPermSize=192m 
> ```

# k-means - k 表示交叉验证

> ID：13786730
> 
> 赞同：0
> 
> 时间：2012-12-09T10:44:04.040
> 
> 标签：k-means, cross-validation

我得到了一份包含贫困、人口等数据的美国县列表，并使用 ak 均值算法进行了聚类。我按如下方式交叉验证了聚类：我将县分为训练集和保留集。在聚类过程中我将贫困特征排除在外，然后对于坚持集中的每个县，我找到最近的聚类，然后从最近聚类的平均贫困中减去县的贫困。最后，我将上面的差平方，对坚持集中的每个县求和，然后除以坚持集中的县数。然后我也做了同样的事情，但这次贫困特征参与了聚类。我观察到错误明显低于以前，但我读到这在某种程度上是“作弊”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:55:22.537

您正在尝试使用贫困属性来确定贫困属性。

作为另一个示例，假设您有一组汽车。您知道汽车的某些特征增强了它具有某种颜色的可能性。您不知道汽车的颜色（训练集除外），但您知道许多其他属性，例如型号和年份。您使用训练集构建聚类模型，然后将其应用于主集。集群现在应该包含相同颜色的汽车。

您事先不知道颜色，但您（希望）能够使用其他属性根据颜色对汽车进行聚类。

如果您使用颜色属性来构建您的聚类模型，您将一事无成。您将使用颜色来聚类相似颜色的汽车。感人的。你会获得什么知识？

# c# - 使用 Ngit 获取克隆的大小

> ID：13786732
> 
> 赞同：0
> 
> 时间：2012-12-09T10:44:48.580
> 
> 标签：c#, git, gitsharp, ngit

是否可以使用 Ngit 克隆存储库，但在“下载”之前获取存储库的大小？

我正在尝试建立一个客户端，我想实际显示进度，或者如果它太大，可以选择取消它。

有没有办法使用代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:54:28.903

不，没有办法知道在使用 git 传输协议进行克隆/获取之前需要传输多少数据。

如果您通过哑 HTTP 克隆，您可能会从 Web 服务器获取包文件大小。

# c++ - c/c++ 中是否有一个函数可以获取整数符号并删除值？

> ID：13786734
> 
> 赞同：2
> 
> 时间：2012-12-09T10:44:55.493
> 
> 标签：c++, c, integer

> **可能重复：**
> [C/C++ 中是否有标准符号函数（signum、sgn）？](https://stackoverflow.com/questions/1903954/is-there-a-standard-sign-function-signum-sgn-in-c-c)

我的意思是类似于`abs()`删除符号的类比，但在这种情况下，一个函数接受任何负整数并返回`-1`，`1`对于正数并`0`保持不变？

（是的，我知道我可以很容易地自己编写，但我在这里询问是否以某种语言提供了这样的功能。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:47:36.387

不，它不存在于标准库中。

# php - Facebook 服务器端身份验证 - 会话变量未分配值

> ID：13786737
> 
> 赞同：0
> 
> 时间：2012-12-09T10:45:30.437
> 
> 标签：php, facebook, session, login

我无法在 facebook 上的服务器端登录流程中为 SESSION 变量分配任何值。谁能告诉我错误是什么？

我曾经收到 Headders 已通过并且无法设置会话变量的错误。因此，我在页面开头设置了启动输出缓冲，并在分配了最后一个会话变量后刷新缓冲区。由于 $_SESSION['state'] 和 $_SESSION['access_token'] 具有空值，因此分配似乎不起作用

```
 <?php ob_start(); session_start();
    $app_id = "XXXXXXXXXXXXXXXXXXXX";
    $app_secret = "XXXXXXXXXXXXXXXXXXXXXXXXXX";
    $my_url = "http://mydomain.com".$_SERVER['PHP_SELF'];

    $code = $_REQUEST["code"];

    if(empty($code)) 
    {

    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection

    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=".$app_id 
."&redirect_uri=".urlencode($my_url)."&state=".$_SESSION['state']."&scope=user_birthday,user_about_me,user_location,user_photos,friends_photos,email,user_website,friends_website,read_friendlists,publish_stream";

    echo("<script> top.location.href='" . $dialog_url . "'</script>");
    ob_end_flush();

    }

   if ($_GET['state'] === $_SESSION['state']) //Ignoring CSRF protection for the moment 
//    since I am unable to assign SESSION variables any value, I actually have this as 
  //  if(200>150)/*
  {

    $token_url = "https://graph.facebook.com/oauth/access_token?"."client_id=".$app_id ."&redirect_uri=" . urlencode($my_url). "&client_secret=".$app_secret."&code=".$code;

    $response = file_get_contents($token_url);

    $params = null;

    parse_str($response, $params);

    $_SESSION["access_ token"] = $params['access_token'];

    ob_end_flush(); // Session Varibale assigned, we can now flush output

    $graph_url = "https://graph.facebook.com/me?access_token=".$params['access_token'] ;

    $user = json_decode(file_get_contents($graph_url), true); 
    }

echo $params['access_token']."is the access token <BR> </BR>"; //this works fine, outputs Access token

echo $_SESSION['access_token']." is the access token" ; //Session Variables are not assigned value since $_SESSION['access_token'] is null

    ?> 
```

# javascript - 强制javascript绝对最后加载

> ID：13786740
> 
> 赞同：-2
> 
> 时间：2012-12-09T10:45:54.887
> 
> 标签：javascript

我有一个 3rd 方 javascript，声称在我的页面加载后加载。我无法编辑此 javascript 的代码。但是，我必须在这个 javascript 之后运行我的脚本。是否有任何数字配置来设置加载顺序？例如，如果第 3 方脚本是 1000，我会将我的脚本设置为 10000000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:52:49.607

如果您知道第 3 方脚本函数名称之一，您可以检查该函数的加载时间，然后执行您的脚本。

```
var scriptCheck = setInterval(function(){
    if(typeof thirdPartyFunctionName == 'function') { 
        console.log('script loaded'); // DO STUFF 
        clearInterval(scriptCheck);
    }
}, 1000); 
```

或者也许是`window.thirdPartyFunctionName`

# android - 如何在android中显示一个进程

> ID：13786741
> 
> 赞同：0
> 
> 时间：2012-12-09T10:46:21.627
> 
> 标签：android

我的问题是，我的 MyDB 类中有一个函数 sync()，它通过单击按钮扩展 SQLiteDatabase，我将此函数称为

```
 db.open();
    db.sync();
    db.close(); 
```

它工作正常，但需要一些时间，而这段时间活动卡住了。我需要展示一个对话的工作过程，而不是这个卡住。我不需要展示这种同步的“进度”，我只关心当活动卡住时，必须有一个旋转圆圈或类似形式的过程。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:49:45.850

我认为您可以使用以下代码：

```
private ProgressDialog dialog;
dialog = new ProgressDialog(this.activity); 
```

和：

```
this.dialog.setMessage("Please Wait");
this.dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:43:06.707

最好的方法是使用一个扩展 Asyntask 的内部类.. 然后覆盖 onpreexecute()、onpostexecute() 和 doinbackground() 方法，然后做你想做的事

# geolocation - 在 Android 中使用 GPS 和地理标记从图像中检测位置

> ID：13786742
> 
> 赞同：0
> 
> 时间：2012-12-09T10:46:31.750
> 
> 标签：geolocation

我需要制作一个**Android 应用程序**，该应用程序将从本机**相机捕获任何位置的图像，并通过使用类似****地理标记**的服务告诉我捕获的图像中的哪个位置。现在请**指导我**从哪里开始，从哪里获取 Geo Tagging Api 以及如何逐步进行。我是否也必须在我的应用程序中实现**图像识别**，或者这个处理已经在 API 中完成？

请简要介绍一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:51:49.623

您不需要图像处理。涉及的步骤：

1）让用户拍照

2）当用户提交图片到服务器时，检测用户的位置并一起提交到服务器。

# java - 接口名称作为类型

> ID：13786749
> 
> 赞同：2
> 
> 时间：2012-12-09T10:48:01.813
> 
> 标签：java, interface

我正在尝试理解 Java 中的接口，并有这个任务要做，我是一个堆栈。这一定很容易，但我似乎没有看到解决方案。接口包含一些方法，如果这个集合的所有元素也在集合中，其中一个应该返回 true。IE

```
public interface ISet{
//some methods
   boolean isSubsetOf(ISet x);
} 
```

然后上课：

```
public class myClass implements ISet{
       ArrayList<Integer> mySet;
       public myClass{
          mySet = new ArrayList<Integer>();
        }
       //some methods
       public boolean isSubsetOf(ISet x){
          //method body
    }
 } 
```

我需要在方法体中写什么？如何检查 myClass 的实例是否是 ISet 集合的子集？我试图投射，但它给出了一个错误：

```
ArrayList<Integer> param = (ArrayList<Integer>)x;
    return param.containsAll(mySet); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:02:23.830

> 如何检查 myClass 的实例是否是 ISet 集合的子集

使用`instanceOf`：

`if(myClass instanceOf ISet){...}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:04:52.473

接口是一个类，它定义了具体类与其他类共享的接口（函数原型）。不能有接口的实例，但具体类的实例`ISet iset = new myClass()`意味着你已经创建了 myClass 的实例（具体）但 ISet 类型的变量持有引用。由于多态性，这是可能的。因为 `myClass`正在提供原型的定义，由`ISet`. 借助多态性，您只能调用`iset.isSubsetOf(...)`，因为 ISet 只有一个方法原型。

同样，在多态性的帮助下，您可以这样做

```
ISet set1 = new myClass()
ISet set2 = new myClass()

set1.isSubsetOf(set2 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:51:58.323

接口就像一个类的概念。

它包含诸如方法定义以及静态和最终变量之类的内容。

因此，任何实现它们的类都将包含一个主体（即在此类中处理该方法的一种方式）。

例如。

```
public interface ISet{
    boolean isSubsetOf(ISet x);
} 
```

现在任何实现它的类都将“处理”方法 isSubsetOf 并返回一个布尔值。他们如何做到这一点不是接口业务。现在在你的课上

```
public class myClass implements ISet{
   ArrayList<Integer> mySet;
   public myClass(){
      mySet = new ArrayList<Integer>();
    }

   public boolean isSubsetOf(ISet x){
      //you now have to get what type of object x is
      // it is obviously implementing ISet therefore it most probably be myClass.
      //So when you typecast the object it should typecast to myClass.
      ArrayList<Integer> param = (ArrayList<Integer>)( ((myClass)x).mySet );
      return param.containsAll(mySet)
    }
} 
```

当我们将 x.mySet 类型转换为 ArrayList 并将 x 本身类型转换为 myClass 时，这将起作用。

但是，逻辑上有一个缺陷。如果您有另一个实现 ISet 的类，那么它们可能不会类型转换为 myClass 但在这种情况下，使用 on 实现会很好。

您似乎也对如何运行此方法感到困惑，所以我将添加

```
myClass A=new myClass();
A.add(1);    A.add(2);    A.add(3);
myClass B=new myClass();
B.add(3);    B.add(1);    B.add(2);   B.add(4);
A.isSubsetOf(B);
//This will answer true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T12:00:23.313

解决了。问题出在整数的 ArrayList 中 - 我试图使用 containsAll() 方法，这并不适合。我使用循环来检查是否可以在主集中找到子集的每个元素。还有一个单独的 find 方法，它将查找单个元素。

```
public boolean isSubsetOf(ISet x){
    myClass set = (myClass)x;
    boolean found = false;
    for (int element : mySet){
        found = false;
        if (set.find(element)){
            found = true;
        }
    }
    return found; 
```

}

# javascript - 选择某个下拉列表时添加一个 txt 框

> ID：13786750
> 
> 赞同：0
> 
> 时间：2012-12-09T10:48:15.090
> 
> 标签：javascript, html, drop-down-menu, textbox

我的脚本有问题。当我从下拉列表中选择加拿大时，它应该添加一个文本框，但它没有添加任何内容。

```
<style>
          #color {display:none;}
       </style>

       <script>
          (function(d){
             var options={
                val:'Canada',
                sel_id:'country',
                hid_id:'color'
             };
             var browser={
                modern:function(){
                   var method=null;
                   if(d.addEventListener) {
                      method=['DOMContentLoaded',true];
                   } else if(d.attachEvent) {
                      method=['readystatechange',false];
                   }
                   return(method);
                },
                addEvent:function(elem,event,func){
                   if(this.modern()[1]) {
                      elem.addEventListener(event,func,false);
                   } else {
                      elem.attachEvent('on'+event,func);
                   }
                }
             };
             var load=browser.modern()[0];
             var modern=browser.modern()[1];
             var init=function(){
                if((!modern && d.readyState=='complete') || modern) {
                   var select=d.getElementById(options.sel_id);
                   var input=d.getElementById(options.hid_id);
                   browser.addEvent(select,'change',function(){
                      var val=this.value;
                      var display=(val==options.val) ? 'block' : 'none';
                      input.style.display=display;
                   });
                }
             };
             browser.addEvent(d,load,init);
          })(document);
       </script> 
```

这是javascript函数，下面是html代码

```
<tr> 
                                            <td height="22" class="bodytxt" id="color">
                                                <font size="2" face="Geneva, Arial, Helvetica, sans-serif">Date of Birth </font>
                                            </td>

                                            <td height="22" class="bodytxt" id="color">
                                                <input type="text" size="20"  name="color" value="<?=$_REQUEST['dob']?>" />

</td></tr> 
```

我面临的问题可以在这里现场看到....

[http://www.sunno.com/medical/clients/test.html](http://www.sunno.com/medical/clients/test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:18:30.573

您的 html 无效，您不应该对多个元素使用相同的 id。当您使用`document.getElementById()`它时，只会找到其中一个（第一个，在大多数浏览器中） - 请注意，该方法是获取元素（单数），而不是获取元素（复数）...

这就是为什么在您的演示页面中出现标签而不是文本框的原因（与您在问题“但它没有添加任何东西”中的陈述相反）。

为什么不将 移动`id="color"`到`<tr>`包含这两个项目的元素，以便显示或隐藏整行？

# jquery - Python 瓶形响应处理

> ID：13786751
> 
> 赞同：2
> 
> 时间：2012-12-09T10:48:21.907
> 
> 标签：jquery, python, html, forms, bottle

我在我的应用程序中使用瓶子作为网络服务器。我有一个场景，其中客户端的 html 有一个表单，它的动作是：“/updateDb”

```
 <!DOCTYPE html>
<html>
<head>
</head>
<body>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js'></script>

<form action="/updateData" method="post" id="inputFrm">
<input type="button" id="submitBtn" value="submit"/>
<input name ="studentId" type="text"/>
</form>

<script>
$(document).ready(function() { 

$("#submitBtn").click(function()
            {   
            document.forms["inputFrm"].submit();
            });
            });
</script>
</body>
</html> 
```

在服务器端，我将学生 ID 插入数据库，然后希望根据当前状态更新响应对象。例如，如果插入数据库失败，我想返回一个带有一些描述性文本和状态的响应对象，并在客户端决定如何采取行动。

所以我的问题是：在 python 代码中，我可以在哪里处理代表 from 响应的瓶子响应对象？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:14:12.263

例如：

```
from bottle import get
from bottle import post
from bottle import request
from bottle import Bottle
from bottle import run

app = Bottle()

@app.get('/updateData')
def login_form():
    return '''<form method="POST" action="/updateData">
                <input name="name"     type="text" />
                <input type="submit" />
              </form>'''

@app.post('/updateData')
def submit_form():
    name = request.forms.get('name')
    if name != 'omer bach':
        return dict(succes=True, desc='This name is not presented in database')
    else:
        return dict(success=False, desc='This name is already in database. Choose another one.')

run(app, host='0.0.0.0', port=8000) 
```

# eclipse-rcp - 特性 Eclipse rcp 生成的配置不包含平台

> ID：13786752
> 
> 赞同：0
> 
> 时间：2012-12-09T10:48:24.030
> 
> 标签：eclipse-rcp

我在 2 个功能中有几个插件包。当我部署这些功能（在更新站点中）时，出现以下错误“结果配置不包含平台”。

谷歌搜索后，我可以找到这个[http://wiki.eclipse.org/index.php/RCP_FAQ#My_own_RCP_plug-ins_are_contributed_by_a_feature._Why_is_the_update_manager_complaining_that_my_configuration_is_invalid.3F](http://wiki.eclipse.org/index.php/RCP_FAQ#My_own_RCP_plug-ins_are_contributed_by_a_feature._Why_is_the_update_manager_complaining_that_my_configuration_is_invalid.3F)

但我不知道如何找到我的错误（缺少插件），任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:53:43.977

在编辑器中打开并且选择的“包含的功能”选项卡包含“org.eclipse.rcp”时，您的 feature.xml 是否包含“org.eclipse.rcp”？听起来您没有在 feature.xml 中包含正确的平台功能

# jenkins - Jenkins 上的 Maven 与 Eclipse 测试

> ID：13786753
> 
> 赞同：-1
> 
> 时间：2012-12-09T10:48:28.073
> 
> 标签：jenkins, maven-3, junit4

大家好，我有一个问题，我在 Eclipse 中运行我的测试（不使用 maven，只需右键单击运行测试）而不是将项目推送到 git 存储库。之后 Jenkins 拉出这些测试并使用 mvn test（使用 maven 3）运行它们。这里我有一些问题 1\. 我在 eclipse 中使用 junit 4 我在 5 测试上添加了 @Ignore 注释，以查看我所有的测试都通过了。这是她的结果。

Eclipse：运行 407/407（忽略 5 个）

Jenkins（使用 Maven）：测试运行：396，失败：3，错误：1，跳过：5

Windows 上的 Maven：测试运行：407，失败：9，错误：0，跳过：5

有人可以向我解释为什么会发生这种情况。

另一个可能相关的问题是我创建的所有测试扩展类，在他的声明中具有以下注释

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

@ContextConfiguration("classpath:context.xml")

我在这个类中以任何方式创建了用于数据库初始化的@BeforeClass 方法，但是当它在 jenkins 中运行时，不会调用此方法，或者 atleaset hes 日志记录不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:08:56.390

如果没有看到失败和 pom 的测试，就不能说太多。几种可能性：

*   类路径配置错误
*   测试使用正在使用操作系统特定符号寻址的文件或其他资源
*   测试相互依赖，并以随机顺序运行
*   一个测试被执行多次（例如，因为它们继承自其他测试）并且不同的工具会以不同的方式报告它

也许是以上的组合

# terminal - Octave-Gnuplot-AquaTerm 错误：设置终端 aqua 增强标题“图 1”...未知终端类型”

> ID：13786754
> 
> 赞同：139
> 
> 时间：2012-12-09T10:48:33.523
> 
> 标签：terminal, gnuplot, x11, octave, homebrew

我已经通过 Homebrew 安装了 Octave 和 gnuplot，并下载了 AquaTerm.dmg。当我尝试绘图时，我收到以下消息：

`octave:4> plot(x,y)`

`gnuplot> set terminal aqua enhanced title "Figure 1" font "*,6"`

```
 ^
     `line 0: unknown or ambiguous terminal type; type just 'set terminal' for a list` 
```

在 bash 终端`set terminal`, `set Terminal`, `set term`, （同样，后跟“aqua”）等什么也没有。我已经尝试从已经打开“AquaTerm”的八度音阶再次绘图，但没有。我试过直接从 gnuplot 绘图但同样的问题.. 我该怎么做这个“设置终端 aqua”？

Gnuplot 启动消息显示“ `Terminal type set to 'x11'`”但不知道如何更改它，以前的命令也不起作用。

由于没有从 Homebrew 安装 AquaTerm，因此可能 octave/gnupot 找不到它……但不知道。有什么猜测吗？谢谢！

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-12-17T19:27:24.057

我必须添加`setenv("GNUTERM","X11")`（`OCTAVE_HOME/share/octave/site/m/startup/octaverc`OCTAVE_HOME 通常是 /usr/local）才能使其永久工作。

找到的解决方案和更多详细信息：http: [//www.mac-forums.com/forums/os-x-apps-games/242997-plots-octave-dont-work.html](http://www.mac-forums.com/forums/os-x-apps-games/242997-plots-octave-dont-work.html)

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2014-01-10T23:31:32.720

我在 OS X 10.9.1 上遇到了 Octave-cli 版本 3.8.0 的类似问题。观察 Octave-gui 如何仍然可以绘制图表，并使用 octaverc 阅读答案，我已经通过添加一行`setenv("GNUTERM","qt")`到 /usr/local/octave/3.8.0/share/octave/来从 Octave-cli 工作站点/m/启动/octaverc

我不必重新安装 gnuplot 或其他依赖项。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-09-03T23:42:10.047

将终端类型设置为 x11 可以解决问题，但如果您想让 AquaTerm 与 gnuplot 一起使用，请按照以下方法：

首先，我们需要卸载 gnuplot 的现有安装，打开终端并运行此命令。

```
brew uninstall gnuplot 
```

从这里下载 AquaTerm：http: [//sourceforge.net/projects/aquaterm/](http://sourceforge.net/projects/aquaterm/)并像安装任何 OSX 应用程序一样安装。

从这里开始，有两种方法可以让 gnuplot 对 aquaterm 感到满意，**方法 1**更容易，但对我不起作用，因为我的 AquaTerm 安装没有在 /usr/local/lib 中创建正确的符号链接，**方法 2**是一个对我有用的，我正在分享我为让它工作而采取的步骤。

**方法 1：**安装 AquaTerm 后简单地重新安装 gnuplot 似乎可以为人们解决这个问题。

```
brew install gnuplot 
```

转到验证步骤，看看是否一切正常，如果没有，请按照方法 2

**方法2：**这种方法比较先进，但如果你有耐心，保证会奏效。

本质上 gnuplot 无法找到 AquaTerm 库文件，这就是为什么在我们安装 gnuplot 后 aqua 没有显示为终端类型选项的原因。我们需要修改 gnuplot 的自制配方以启用 aquaterm 支持，通过键入以下命令打开 gnuplot 的 brew 配方：

```
brew edit gnuplot 
```

并添加这些行，如此 github 提交消息中所示，这将使 gnuplot 的 brew 选项包含 aquaterm [https://github.com/mxcl/homebrew/issues/14647#issuecomment-21132477](https://github.com/mxcl/homebrew/issues/14647#issuecomment-21132477)

通过执行以下检查来检查是否存在正确的 AquaTerm 库符号链接：

```
ls /usr/local/lib/libaquaterm*
ls /usr/local/include/aquaterm/* 
```

上面的第一行应该返回一些 *.dylib 文件，上面的第二行应该返回一些 *.h 文件，如果它们不存在，请从终端运行这些命令：

```
sudo ln -s /Library/Frameworks/AquaTerm.framework/Versions/A/AquaTerm /usr/local/lib/libaquaterm.dylib
sudo ln -s /Library/Frameworks/AquaTerm.framework/Versions/A/AquaTerm /usr/local/lib/libaquaterm.1.0.0.dylib
sudo ln -s /Library/Frameworks/AquaTerm.framework/Versions/A/Headers/* /usr/local/include/aquaterm/. 
```

有时这是必要的，因为 AquaTerm 的安装程序由于权限问题而无法在正确的位置创建符号链接。创建 /usr/local/ 符号链接后，像这样重新安装 gnuplot：

```
brew install gnuplot --with-aquaterm # (formerly --aquaterm in old versions) 
```

使用以下步骤验证 gnuplot 是否可以看到 aquaterm 并进行愉快的绘图！

* * *

**验证：**通过在终端中启动 gnuplot 是否正确配置了 AquaTerm

```
gnuplot 
```

在 gnuplot 终端中输入

```
gnuplot> set term 
```

寻找线

```
Available terminal types:
         aqua  Interface to graphics terminal server for Mac OS X
         ... 
```

如果您看到上面的那一行，那么您就完成了，gnuplot 配置正确并且每个人都很高兴。

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2012-12-10T12:13:31.033

我找到了一种用八度音阶生成图的方法，虽然不是使用 AquaTerm 而是 x11。问题是 Octave “强迫” gnuplot 使用 aquaterm 进行绘图。不是安装 aquaterm 并将其集成到 gnuplot 中，而是在 octave 中键入：`setenv GNUTERM x11`. 有了这个，用 x11 生成图，它已经在 gnuplot ( `set terminal`) 的终端列表中。我知道这是一个补丁，但最后我不介意 aquaterm 或 x11，我只想生成绘图

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2013-05-16T01:26:07.923

`set terminal`或者`set term`是 gnuplot 命令。

您只需要从命令行运行`gnuplot`即可访问 gnuplot shell。

但是，这对我不起作用，`setenv("GNUTERM","x11")`in`/usr/local/share/octave/site/m/startup/octaverc`或`~/.octaverc`（两者都做同样的事情）也没有。

所以我`set term`在 gnuplot shell 中运行，因为`x11`在列表中没有看到。我使用 homebrew 来安装 gnuplot，所以我首先将其卸载`brew uninstall gnuplot`，然后`x11`使用`--with-x`flag 进行安装：

`brew install gnuplot --with-x`

这为我解决了这个问题。用于`brew info gnuplot`查看 gnuplot 安装的标志列表。

*PS* 是的，我确实下载了 X11 dmg 并使用包安装程序安装了它，但 gnuplot 在支持的终端列表中仍然没有 x11。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-07-29T21:44:56.553

你可以试试这个：

```
>> brew reinstall gnuplot --with-aquaterm 
```

或者

```
>> brew uninstall gnuplot
>> brew install gnuplot --with-aquaterm 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-03-12T12:49:15.327

在你的主目录中创建一个文件`.octaverc`并将 GNUTERM 设置为 X11

```
echo "setenv('GNUTERM','X11')" > ~/.octaverc 
```

打开 octave 终端并键入`sombrero`以检查绘图是否有效

```
octave:1> sombrero 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-03-29T17:30:06.183

这对我有用：

1.  卸载 gnuplot

    > 冲泡卸载 gnuplot

2.  安装 AquaTerm。你可以从这里下载它：http: [//sourceforge.net/projects/aquaterm/](http://sourceforge.net/projects/aquaterm/)

3.  重新安装 gnuplot

    > 酿造安装 gnuplot

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-09-18T22:03:41.987

安东是正确的。您现在可以使用 --with-aquaterm 选项重新安装 gnuplot。如果我有足够的声望点来做这件事，我会赞成他的回答。

```
$ brew uninstall gnuplot
$ brew install gnuplot --with-aquaterm 
```

Mackuntu 上面提到这个问题已经在 github 上讨论过了。

[https://github.com/mxcl/homebrew/issues/14647#issuecomment-21132477](https://github.com/mxcl/homebrew/issues/14647#issuecomment-21132477)

但他建议使用选项--aquaterm。如果您仔细查看 github 链接，您会发现该选项是 --with-aquaterm。今天用这个选项重新安装 gnuplot 让我可以运行一些旧的 octave 代码，这些代码使用 gnuplot 在 OS X 上绘制图形。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2019-02-17T16:11:12.310

就我而言，在 Mas OS Mojave 上，适用于我的解决方案略有不同（可能只是语法问题）。在[关于这个线程](http://octave.1599824.n4.nabble.com/gnuplot-not-working-on-Mac-OSX-10-9-5-td4669606.html)的讨论之后，我提出了对我有用的解决方案——重要的是要注意，我可以从 Octave-cli 进行绘图，但不能直接在终端中从 Octave 命令行进行绘图。

所以我创建了一个`˜/.octaverc`文件并向其中添加了以下命令：

```
setenv GNUTERM qt 
```

只需从 octave 退出命令行并再次输入并能够绘图。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2019-05-25T17:20:01.273

以下事情对我有用：

```
setenv("GNUTERM","qt") 
```

您可以在 octave cli 上运行它，用于本地运行，也可以在 octave 启动文件中设置为永久。

```
/usr/local/octave/3.8.0/share/octave/site/m/startup/octaverc 
```

请记住，如果您更改 octaverc 文件，您必须对其具有写入权限。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2013-06-19T03:56:56.410

我有一个答案应该可以解决您遇到的问题。本质上，对我来说，问题在于 gnuplot 构建没有找到正确的 AquaTerm 库。看看我发的帖子：

[http://devenezer.blogspot.com/2013/06/octave-gnuplot-and-aquaterm.html](http://deveneezer.blogspot.com/2013/06/octave-gnuplot-and-aquaterm.html)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-12-25T10:05:25.200

对我有用的是安装 gnuplot-nox。另见[https://bugs.mageia.org/show_bug.cgi?id=4866](https://bugs.mageia.org/show_bug.cgi?id=4866)

似乎安装 gnuplot-nox 的最佳方法是安装 fink。 [http://sourceforge.net/projects/fink/?source=dlp](http://sourceforge.net/projects/fink/?source=dlp)

```
fink install gnuplot-nox 
```

似乎做得很好。然而，安装在某一时刻失败了。所以我安装了 gnuplot-minimal 然后再次运行 gnuplot-nox install ，一切正常。

```
fink install gnuplot-minimal
fink install gnuplot-nox 
```

gnuplot-nox install 似乎已将 aqua 设置为 gnuplot 的默认终端。通过转到 gnuplot shell 来验证这一点。要验证绘图是否有效，请在 shell 中键入 plot(1)。它应该在窗口中显示绘图。

希望这对你有用。

就像其他帖子中建议的那样，将 GNUTERM 设置为 X11 并没有为我解决这个问题。同样直接安装 Mac OSX 的 AquaTerm 也没有解决这个问题。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-03-23T20:17:03.780

答案已经包含在上面，但我认为这更简单：

```
nano ~/.octaverc 
```

添加这个：

```
setenv("GNUTERM", "X11") 
```

那就是它重新启动八度音程，您就完成了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-01-25T11:22:58.607

这是对我有用的解决方案（基于mackuntu评论的不同部分）

brew install octave 命令可能已经为您安装了 Gnuplot，因此我们需要先将其删除

```
brew uninstall gnuplot 
```

然后必须安装 aquaterm ( [http://sourceforge.net/projects/aquaterm/](http://sourceforge.net/projects/aquaterm/) )

安装完成后，您需要再次安装 gnuplot。这是因为 brew 在安装过程中检测到 aquaterm 的存在，之后不会对其进行任何检查。

```
brew install gnuplot --with-aquaterm 
```

如果您在安装后启动 gnuplot，它应该显示支持 aquaterm。并且所有八度的图形都可以工作。

# c# - 调用 ASMX Web 服务时访问被拒绝

> ID：13786758
> 
> 赞同：1
> 
> 时间：2012-12-09T10:48:50.330
> 
> 标签：c#, web-services, windows-services, asmx

我创建了一个 Web 服务 (.asmx) 来重新启动 Windows 服务（我编写的“LoggerService”的 Windows 服务）。当我在 localhost 上调用此服务时，我没有问题并且它可以正常工作。

但是当我从网络上的另一台计算机调用此 Web 服务时，我收到以下异常消息：

> 无法在计算机“.”上打开 LoggerServiceservice。
> 访问被拒绝

在 IIS 中，我获得了所有人和完全控制权限。但是我的问题没有解决。如何获得所需的权限，以便可以在我的 Web 服务中重新启动 Windows 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:54:56.967

Web 服务上是否启用了匿名身份验证？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:59:09.043

您需要在 www 文件夹中有 crossdomain.xml 和 clientaccesspolicy.xml

跨域：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-http-request-headers-from domain="*" headers="*"/>
  <allow-http-request-headers-from domain="*" headers="SOAPAction" />

</cross-domain-policy> 
```

客户端访问策略.xml

```
<?xml version="1.0" encoding="utf-8"?>

<access-policy>

  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:05:10.210

Check the identity of the application pool. The default (network service) will not have access to control services. To test this you can change the user to local system which has full control over the host system, however in a live environment you should create a user that has only the permissions you need.

# ruby-on-rails - 如何在 Rails 3.2 中包含特定于动作的 CSS 或 JS？

> ID：13786759
> 
> 赞同：0
> 
> 时间：2012-12-09T10:48:55.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

[我使用 Rails 3.2.9 和twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails) gem构建了一个网站。

我了解 Rails Asset Pipeline 将所有 CSS 合并到一个文件中。但是，我想知道修改这种行为有多容易（不确定这是否是个好主意）。

假设我有一个`Site`带有两个动作的控制器：`home`和`contact_us`，并且有以下 CSS：

*   `site.css.scss`- 应该在控制器的**每个动作**中加载`Site`
*   `home.css.scss`- 应该只在控制器的`home`动作中加载`Site`
*   `contact_us.css.scss`- 应该只在控制器的`contact_us`动作中加载`Site`

您将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:05:52.100

我不认为将其拆分为不同的页面加载是一个好主意。在生产模式下，一切都在一个文件中，因此您的所有 CSS 只需要加载一次。因此，每个后续页面加载都不会再次加载。这不仅与大小有关，还与网络服务器的连接和请求数有关。越少越好。

但是，如果您真的想要，您可以在模板的 head 部分中添加一个条件标签。

```
stylesheet_link_tag 'home' if controller.action_name == 'home'
stylesheet_link_tag 'contact_us' if controller.action_name == 'contact_us' 
```

您还可以通过以下方式获取控制器名称`controller.controller_name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:08:14.520

> 我了解 Rails Asset Pipeline 将所有 CSS 合并到一个文件中。但是，我想知道修改这种行为有多容易（不确定这是否是个好主意）。

我认为这不是一个好主意，因为您将失去仅获取一次 CSS 文件的好处。我不确定这是您追求的目标，但您不会节省任何服务器资源，为特定文件创建额外请求有点昂贵。

无论如何，您可以通过不需要 application.css.scss 中的文件树（或创建特定文件夹）然后手动调用 stylesheet_link_tag 来做到这一点（您可能应该将它与 content_for 帮助器结合起来，这样您就可以说出您想要的确切位置喜欢出现，请参阅[使用 content_for 方法](http://guides.rubyonrails.org/layouts_and_rendering.html#using-the-content_for-method)）

# c# - 等待用户回复

> ID：13786761
> 
> 赞同：0
> 
> 时间：2012-12-09T10:49:21.927
> 
> 标签：c#

当表单被加载时`myMethod()`被调用，然后它执行一些语句。在某些时候，当它到达 if 语句时，它应该停止并等待用户按下某个按钮，然后它将根据用户的操作继续执行。我使用了`Thread.Sleep()`ManualResetEvent obj 的`WaitOne()`方法，但它们似乎冻结了整个过程，直到时间到期，什么都做不了。我认为 KeyEventHandler in 应该在后台运行，所以它永远不会费劲......无论如何我该怎么做？

```
public partial class Form1 : Form
{
    bool pressed = false;
    public Form1()
    {
        InitializeComponent();
        this.KeyPreview = true;
        this.KeyDown +=new KeyEventHandler(Form1_KeyDown);
    }

    void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.E)
        {
            pressed = true;
        }
    }

    void myMethod()
    { 
        while (someBool)
        {
            //do something
            if (pressed)
            //do this
            else 
            //do that
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        myMethod();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:13:25.490

您解决此问题的方式不是很好，因为您不应该在等待用户输入时阻塞 GUI 线程。您应该做任何您能做的事情，然后立即返回，以便 GUI 线程可以处理消息。

*   在 Form1_Load 上，运行 myMethod()，您可以在其中“做某事”（初始化），然后立即返回。不要在这里屏蔽。
*   在 KeyDown 事件中，如果按下 E，您可以“执行此操作”。那部分应该很容易。
*   我对您何时想要“执行该操作”运行（即未按下键）感到有些困惑。你能澄清一下这种情况应该在什么时候发生吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:28:05.113

尝试将您的方法作为[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)：

```
private void Form1_Load(object sender, EventArgs e)
{
    System.Threading.Tasks.Task t = new Task(() => myMethod());
    t.Start();
} 
```

在您的方法中测试时`pressed`，将其设置为`false`：

```
void myMethod()
{ 
    while (someBool)
    {
        //do something
        if (pressed)
        {
            pressed = false;
            //do this
        }
        else 
        //do that
    }
} 
```

当然，这可能会导致各种多线程错误，具体取决于您在`myMethod()`. 我建议您在开始使用多个线程之前查看[**线程同步。**](http://msdn.microsoft.com/en-us/library/ms173179.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:14:47.027

将计时器组件添加到您的表单并将其间隔设置为您要等待用户输入的持续时间（以毫秒为单位）：

```
bool someBool = true;

public Form1()
{
    InitializeComponent();
    KeyPreview = true;
    timer1.Interval = 1000;
} 
```

表单加载时启动计时器：

```
private void Form1_Load(object sender, EventArgs e)
{
    timer1.Start();
} 
```

添加计时器 Tick 事件处理程序。如果用户在指定的等待超时 (timer1.Interval) 期间没有按下任何键，则会引发此事件。此外，此事件将定期引发，而不是您的`while`循环：

```
private void timer1_Tick(object sender, EventArgs e)
{
    if (someBool)    
        //do that
    else
        timer1.Stop();       
} 
```

在 KeyDown 事件处理程序上停止计时器，然后处理按下的键，并启动计时器以等待下一个用户输入（或者`do that`如果没有输入）：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    timer1.Stop();
    if (!someBool)
        return;

    if (e.KeyCode == Keys.E)
        // do this
    else
        // do that

    timer1.Start();
} 
```

# java - 接口 xxx 不能使用不同的参数多次实现：

> ID：13786770
> 
> 赞同：7
> 
> 时间：2012-12-09T10:50:41.293
> 
> 标签：java

```
implements GenericObserver<DataService, Tools>, GenericObserver<MobileService, Tools> 
```

不能使用不同的参数多次实现。

这是我的界面：

```
public interface GenericObserver<S, D> {

    void update(S sender, D data);
} 
```

我能做些什么？我需要`DataService`和`MobileService`。

我尝试使用通用`T`而不是，`DataService`但`MobileService`我得到一个`T`不存在的错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-09T11:04:29.713

这是因为 Java 进行了[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。编译后，所有泛型类型都被删除，两个接口在字节码中看起来相同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T11:02:52.170

一种可能：

```
abstract class Service {}

class DataService extends Service {}

class MobileService extends Service {}

class Foo implements GenericObserver<Service, Tools> {
    void update(Service sender, Tools data) {
        if (sender instanceOf DataService) {
            // do something
        } else if (sender instanceOf MobileService) {
            // do something else
        } else {
            // throw some notImplemented exception
        }
    }
} 
```

[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)是另一种可能性（可`GenericObserver`访问）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T11:12:25.007

实现类可以提供这些接口作为提供如下**查找**方法的*功能。*这种模式的优点是类的 API 的可扩展性和解耦。

 **```
interface DataObserver extends GenericObserver<DataService, Tools> { }

interface MobileObserver extends GenericObserver<MobileService, Tools> { }

public class Implementor {

    private DataObserver dataObserver;
    private MobileObserver mobileObserver;

    public <T> T lookup(Class<T> klazz) {
        ... return dataObserver;
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T11:07:41.263

我看到两种可能的情况，您为什么要这样做：

第一个 - GenericObserver 和 GenericObserver 对于实现类接口都是必不可少的。在这种情况下，您可能存在设计缺陷，因为对象应该尽可能专门化（即最好有两个不同的类，每个类都专注于专门的任务，而不是一个类混合它们）。因此，您可能应该创建两个单独的类，一个实现 GenericObserver，另一个实现 GenericObserver。当您尝试使用不同类型参数两次实现 GenericObserver 时，编译器会抱怨，因为 Java 中的泛型是使用擦除实现的，因此 GenericObserver 和 GenericObserver 在运行时本质上是相同的 GenericObserver。

第二种情况 - 这些接口是您的实现细节的一部分。然后您可以使用内部类（或静态嵌套类）来实现您的目标。例如：

```
public class OuterClass {

    private String hello = "Hello";
    private String world = "World";

    private class InnerClass1 implements GenericObserver<DataService, Tools> {
        public String interfaceMethod() {
            return hello + " " + world;
        }
        // more implementation
    }

    private class InnerClass2 implements GenericObserver<MobileService, Tools> {
        // implementation
    }

} 
```

如果您使用内部类，那么您可以轻松访问包含类的字段，正如您从这个有点做作的示例中看到的那样。**

# objective-c - Header 中的类方法实现

> ID：13786771
> 
> 赞同：5
> 
> 时间：2012-12-09T10:50:43.520
> 
> 标签：objective-c

在 Objective-C 中，如果我有一个只包含类方法（没有成员变量或实例方法）的类，我可以在类的头文件 (.h) 中定义类方法，并跳过创建 .m 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T17:37:30.147

你*可以*，但你基本上不应该。虽然您可以将 @implementation 放在标头中，但它违反惯例，并且可能会产生意想不到的副作用，就像在 C++ 或其他语言中一样（例如，您无法控制在标头出现之前 #included 的内容是#包括，所以你不能确定你有一个健全的全局命名空间）。

Objective-C 中的最佳实践是只在头文件中保留声明以及文档。由于文档通常非常冗长（如果写得好），因此您的标题中已经有相当多的内容 - 在此之上添加代码会太多。

还要记住，Objective-C 方法没有内联，无论是类还是实例。这是将代码放在头文件中是 C/C++ 中相对流行的做法的重要原因之一。你当然可以将静态函数放在你的 Objective-C 头文件中，这样你就可以这样实现你的代码，但这可能是一个不受欢迎的设计——例如，类方法提供了一种命名空间的形式，这通常是明智的利用.

# iphone - NSDate 关于日期和时间显示

> ID：13786772
> 
> 赞同：1
> 
> 时间：2012-12-09T10:50:54.100
> 
> 标签：iphone, ios

这段代码。

```
NSDate *today = [NSDate date];  
NSArray *langs = [NSLocale preferredLanguages];
NSString *langID = [langs objectAtIndex:0];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:langID];
*format = [[NSDateFormatter alloc] init];
[format setLocale:locale];
[format setDateFormat:@"yyyy/MM/dd HH:mm:ss"];
strTime = [[NSString alloc] initWithFormat:@"%@",[format stringFromDate:today]]; 

today is +0000\.    
langID is en.    
but,strTime is Japan time. 
```

为什么？我想根据语言设置显示日期和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:16:09.220

代替

```
NSArray *langs = [NSLocale preferredLanguages];
NSString *langID = [langs objectAtIndex:0];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:langID]; 
```

试试这个，

```
NSLocale *locale = [NSLocale currentLocale]; 
```

那应该有帮助。

# visual-studio-2012 - visual studio 2012 - 类图和聚合

> ID：13786773
> 
> 赞同：1
> 
> 时间：2012-12-09T10:51:11.757
> 
> 标签：visual-studio-2012, class-diagram

我正在使用 Visual Studio 2012 Ultimate，我想使用内置功能来创建类图。

问题是，当我点击我的一个项目时，会有一个选项`view class diagram`。

现在我可以看到我的类，但是当我打开工具箱时，我只能使用 category 中的东西`Class Designer`，所以对于关系我只能使用 Inheritance 和 Association 并且调用的组`UML Class Diagram`是灰色的。

是否有可能以某种方式“启用”其他关系选项？或者我是否需要为我的图表创建建模项目以使用`UML Class Diagram`选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T20:52:47.653

在类元素上按鼠标右键并从上下文菜单“添加”菜单项中选择。你会在那里找到更多的关系。

# php - 受保护的 php 访问

> ID：13786774
> 
> 赞同：-2
> 
> 时间：2012-12-09T10:51:17.717
> 
> 标签：php, security

在我的视频游戏中，我希望用户能够从 MySQL 服务器发布/获取地图数据。我的问题是我想让它限制为使程序只能创建/获取级别，不能从页面中发送垃圾邮件并制作大量虚假级别（通过 php 页面）

我试图阻止虚假请求的数量，以便真正玩游戏的用户只能真正访问 PHP 内容，而不是想要破坏体验的人。

我知道我可以对代码进行简单的检查，但是当该代码被发现时会发生什么？这不是真正的身份验证，也许我可以进行串行检查，但游戏根本不需要您在线注册和注册帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:59:41.063

正如评论中提到的，我建议您使用 REST Web 服务。我实际上正在使用[tonic](http://peej.github.com/tonic/) REST 框架，或者如果您需要轻量级的东西，[silex](http://silex.sensiolabs.org/)可能适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:01:31.067

我认为您害怕的问题是该 php 页面将可以通过网络访问，以便任何人都可以访问它。在这种情况下，我会使用 $_GET 变量来保护页面并发送数据。

例如创建一个关卡： [http](http://www.example.com/create.php?key=hkjaSDFg45fgsdGDF&user=13542&map=underground&etc) ://www.example.com/create.php?key=hkjaSDFg45fgsdGDF&user=13542&map=underground&etc ..

然后在 create.php 文件中它看起来像

```
<?php
if(isset($_GET['key'] && $_GET['key'] == hkjaSDFg45fgsdGDF){
  //check if user is allowed -- $_GET[user]
  if(userallowed($_GET['user'])){
    //create map
  }
} 
```

这只是一个例子，但如果你不想去创建一个完全成熟的 api，那么这样的事情就可以完成

**始终首先验证数据，切勿直接使用 $_GET 变量**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:21:40.033

首先，您必须接受恶意用户将*始终*能够访问该服务器并根据需要创建这些地图。他们拥有游戏的代码，因此可以对其进行逆向工程，以便在给定时间的情况下撤消您能想到的任何事情。

*   让用户为您的服务器创建一个帐户。在这里，您可以使用某种验证码。
*   要求注册/登录用户提交地图
*   限制用户每分钟可以创建的地图数量（以不影响真实用户的方式编写游戏代码）
*   也许限制用户可以提交的地图总数
*   尽可能使用 HTTPS。

# javascript - HTML 元素的属性列表

> ID：13786776
> 
> 赞同：0
> 
> 时间：2012-12-09T10:51:42.287
> 
> 标签：javascript, html

如果我想使用 javascript 更改页面上某些内容的属性，我发现很难找到要使用的正确名称。

例如，如果我有一个按钮并且我想更改背景颜色，我可以使用 .style.background 可以通过在网上快速搜索找到但我似乎找不到的是所有属性的完整列表与之相关的，我可以改变。

有这样的清单吗？为什么我找不到他们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:54:07.327

```
var div = document.createElement('div')​;

​for (prop in div)​ {
    console.log(prop);
}​ 
```

这将列出该特定浏览器中 div 元素的所有可用属性。

[**小提琴**](http://jsfiddle.net/KWXwZ/)

`element.style.background`可能不会列出，因为那是一种样式，而不是属性，但是您可以通过以下方式获取所有样式：。

```
var div = document.createElement('div');

console.log(div.style); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T10:54:00.033

您可以使用[MDN](https://developer.mozilla.org/en-US/docs/DOM)查找每种 DOM 对象类型的文档。

例如，[这里](https://developer.mozilla.org/en-US/docs/DOM/HTMLFormElement)`form`是一个描述元素的 DOM 接口的页面，其中包含属性和方法。

如果您要使用控制台，我建议直接记录对象以获取交互式视图，而不是只记录属性名称列表：

```
var div = document.createElement('div');

console.log(div); 
```

# git - “git remote add”到底是做什么的？

> ID：13786781
> 
> 赞同：12
> 
> 时间：2012-12-09T10:52:16.830
> 
> 标签：git, version-control

我最近在一个我开始工作的项目中被介绍到 git，这鼓励我开始阅读 Scott Chacon 的“Pro Git”的在线版本。

书中有一节简要介绍了添加“远程存储库”的主题。由于 Git 是分布式 SCM，我知道使用 GIT 的常见情况是在本地计算机上“克隆”远程存储库并在本地副本上工作。当您完成更改并将所有更改提交到本地副本时，然后您将更改“推送”到远程存储库，以便其他人也可以查看您的更改。

这让我想到了我的问题——据我所知，“git remote add”有效地“添加”了一个远程存储库作为我们以后可以使用的速记符号。我不明白的是——因为我只指定一个存储库 URL 进行克隆，如何在本地项目目录下添加多个存储库 URL？

准确地说，假设我检查了 Apache commons-lang 项目使用

```
git clone git://git.apache.org/commons-lang.git 
```

这导致 GIT 将整个项目复制到我名为“commons-lang”的本地目录中。由于我只使用了一个 url 进行克隆，所以这里的“远程添加”是什么意思？这是否意味着同一个项目（commons-lang）可以托管在多个服务器上，或者我可以通过添加新的远程地址在本地项目中克隆一个新项目？

为问题的初学者般的语气道歉。只是想让我的事实直截了当。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T10:57:56.077

您可以添加任意数量的上游仓库地址`git remote add`（来自“ [Git Basics - Working with Remotes](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes) ”）。

克隆时，会为您添加一个，命名为 ' `origin`'。

> 这是否意味着同一个项目（commons-lang）可以托管在多个服务器上，

是的，这是由于 Git 的分布式特性，因为推送和拉取引入了与合并工作流程**[正交的发布工作流程。](https://stackoverflow.com/questions/2563836/sell-me-distributed-revision-control/2563917#2563917)**

> 还是我可以通过添加新的远程地址在本地项目中克隆一个新项目？

不，您可以从不同的上游存储库中获取。

参见“ [“下游”和“上游”的定义</a>”。](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)

[](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)

[`git remotes add`在 GitHub 上进行 fork 的一个经典场景：
请参阅“](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)[如何在本地合并一个 master 和一个 git 中的 fork？](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901) ”

![远程添加](../Images/4c5528e21fcc7208ec864bce433f66b7.png)

*   `origin`在 GitHub 上克隆你的 fork 时为你添加。
*   但是你需要`git remote add upstream https://github.com/user/reponame`为了让你的本地克隆与原始 repo 保持同步（你不能直接贡献，这就是为什么你必须首先在 GitHub 上创建一个 fork）。

# iphone - 创建 NSMutableArray 的副本并仅在一个数组中编辑元素

> ID：13786785
> 
> 赞同：1
> 
> 时间：2012-12-09T10:53:05.987
> 
> 标签：iphone, ios, nsmutablearray, nsarray

我有两个 nsmutablearray：

```
@property (nonatomic, strong) NSMutableArray *calSeries;
@property (nonatomic, strong) NSMutableArray *calSeries2Copy; 
```

然后我这样做：

```
self.calSeries = [self getSeries];
self.calSeries2Copy = [NSMutableArray arrayWithArray:self.calSeries]; 
```

getSeries 方法从核心数据中获取对象，但是如果我更改 calSeries 中的一个元素，它也会在 calSeries2Copy 中更改，我如何分别创建两个数组，以便当我更改一个数组中的一个元素时，在其他数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T11:02:57.860

试试这个，

```
self.calSeries2Copy = [[NSMutableArray alloc] initWithArray:self.calSeries copyItems:YES]; 
```

根据[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithArray:copyItems:)，如果您已实施`NSCopying`协议，则应复制此内容。

> *旗帜*
> 
> 如果是，数组中的每个对象都会收到一个 copyWithZone: 消息来创建对象的副本——对象必须符合 NSCopying 协议。在托管内存环境中，这不是对象将收到的保留消息。然后将对象副本添加到返回的数组中。
> 
> 如果否，则在托管内存环境中，数组中的每个对象在添加到返回的数组时都会收到一条保留消息。
> 
> *讨论*
> 
> 以这种方式初始化不可变数组后，将无法对其进行修改。
> 
> copyWithZone: 方法执行浅拷贝。如果您有任意深度的集合，则为 flag 参数传递 YES 将执行表面以下第一层的不可变副本。如果您通过 NO，则第一级的可变性不受影响。在任何一种情况下，所有更深层次的可变性都不受影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:06:13.297

默认情况下复制数组只会进行**浅拷贝**。这意味着复制了数组，但元素只保留了一次

复制项目`[[NSMutableArray alloc] initWithArray:srcArray copyItems:YES];`以获得**深层副本**，其中每个元素也被复制

# youtube-api - 在产品上使用徽标

> ID：13786786
> 
> 赞同：0
> 
> 时间：2012-12-09T10:53:08.050
> 
> 标签：youtube-api

我销售的产品适用于具有 YouTube 的应用程序。

我可以将 YouTube 徽标放在包裹的正面吗？

我可以将标志放在包装上的 2-3 个位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:40:01.370

我们有关使用 YouTube 品牌的官方指南位于[https://developers.google.com/youtube/branding](https://developers.google.com/youtube/branding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:56:16.697

我不是律师，我不知道他们的 API 许可的确切条款，但一般来说，这样的事情是不允许或认可的。您可以使用产品 X，但通常不允许在广告中使用它（也可以认为是包装）或类似的东西。

在功能描述中包含“能够导出到 YouTube”之类的内容。或类似的东西可能是可以接受的，但添加标志？极不可能被允许。

# python - RPM 的 %files 部分需要做什么

> ID：13786795
> 
> 赞同：5
> 
> 时间：2012-12-09T10:54:37.547
> 
> 标签：python, rpm, rpm-spec

我有一个`tar.gz`我想要创建一个 RPM 并且目前正在处理规范文件。我似乎无法理解`%files`在 .spec 部分中包含文件的规则是什么。My`tar.gz`由两个 python 包组成，并通过一个 makefile 安装，该文件只需调用`setup.py`which used`distutils setup()`来安装它们。

我目前已包含我的文档，但不确定如何选择要包含的其他内容：

```
%files
%doc README changelog
... 
```

此外，我的 makefile 会为应用程序生成一个`man`页面；.spec 文件中应在何处/如何包含它？

我在redhat上做这个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T11:37:45.293

该`%files`部分必须列出将包含在二进制包中并因此安装在目标机器上的每个文件。

如果您按照书本制作 RPM，那么规范文件有两个不同的目的。它是一个构建脚本，详细说明如何将源代码转换为构建工件，以及一个打包脚本，详细说明应该在目标机器上安装哪些构建产品。在您的情况下，构建方面非常轻量级。

在这种传统方法中，makefile 在构建阶段运行，该`%files`指令列出了应该安装哪些生成的构建工件。需要明确的是，您要么不使用`make install`传统方法，要么将其`DESTDIR`用于安装到 RPM 构建目录中（即不是安装到`/usr/lib/python/foo`而是安装到`~/rpmbuild/BUILD/usr/lib/python/foo`其他地方），然后从那里选择带有`%files`.

所以，你应该做的是让一些先前`%install`的部分（可能）运行 makefile 以安装到构建区域，然后使用该`%files`部分来挑选结果。请记住，您可以在该`%files`部分中使用通配符，因此您不必明确命名每个单独的文件。

那有意义吗？我误解了你的问题吗？

# python - python subprocess.call()“没有这样的文件或目录”

> ID：13786797
> 
> 赞同：15
> 
> 时间：2012-12-09T10:54:50.277
> 
> 标签：python, subprocess, tcsh

我在模块上发现了一些问题，但更常见的问题似乎是让我认为我已经管理的参数列表正确（最终）

我正在尝试运行一个程序，该程序需要在命令行中输入这样的输入，

```
fits2ndf in out 
```

'in' 是要转换的文件的文件路径，'out' 是保存结果的路径和文件名。

所以使用子进程，

```
subprocess.call(["fits2ndf","/media/tom_hdd/Transfer/reference.fits","/media/tom_hdd/Transfer/reference.sdf"]) 
```

这引发了，

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.7/subprocess.py", line 493, in call
return Popen(*popenargs, **kwargs).wait()
File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
errread, errwrite)
File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
raise child_exception
OSError: [Errno 2] No such file or directory 
```

设置`shell=TRUE`（我知道这是不好的）产生相同的结果。不确定它是否相关，但我正在使用 tcsh。有什么建议么？

* * *

编辑以回答问题

我没有永久设置 PATH 但`fits2ndf`它是我使用初始化的程序包的一部分

```
% tcsh
% setenv STARLINK_DIR  /home/tomq/star-kapuahi
% source $STARLINK_DIR/etc/login
% source $STARLINK_DIR/etc/cshrc 
```

并且通常在任何目录中工作而无需指定完整路径。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T11:23:40.767

`which fits2ndf`将向您展示fits2ndf 的路径。

之后，您可以编写代码的完整路径，它应该可以工作。

前任：

```
~$ which mv
/bin/mv 
```

我的python代码：

```
import subprocess

subprocess.call(["/bin/mv","/tmp/a","/tmp/b"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:59:40.097

您可能想要删除空间`" /media/tom_hdd/Transfer/reference.sdf"`

另外，尝试 tp 将所有内容放在一个字符串中，例如`"fits2ndf /media/tom_hdd/Transfer/reference.fits /media/tom_hdd/Transfer/reference.sdf"`

确保您指向准确的方向。

# mysql - 没有输出值显示

> ID：13786801
> 
> 赞同：0
> 
> 时间：2012-12-09T10:55:29.883
> 
> 标签：mysql, coldfusion

不知何故，当使用现有变量在 CF 中运行一些查询时，没有显示输出。这些是查询：

```
<cfquery name = "group" datasource = "#DSN#">
        SELECT *
        FROM groups
        WHERE ownerid=#user.id#
        ORDER by id
        LIMIT 0, 30
</cfquery>
<cfquery name = "groups" datasource = "#DSN#">
        SELECT *
        FROM group_requests
        WHERE groupid=#group.ownerid#
        ORDER by groupid
        LIMIT 0, 30
</cfquery>

<cfoutput query="groups">
#groupid#
</cfoutput> 
```

如您所见，它首先从#user.id# 中获取所有值，然后在#groep.ownerid# 中再次使用第一个查询中的值。不知何故，这不会显示任何输出值。是的，有一些值要显示。

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:11:27.223

我想问题是，如果第一个查询返回多个记录，则只`group.ownerid`使用第一个 - 这可能没有匹配项，或者比您预期的要少得多。

如果第一个查询的结果未在其他地方使用，我建议将其全部包含在单个查询中。像这样的东西：

```
<cfquery name = "groups" datasource = "#DSN#">
    SELECT *
    FROM group_requests
    WHERE groupid in
    (
        SELECT ownerid
        FROM groups
        WHERE ownerid = <cfqueryparam cfsqltype="cf_sql_integer" value="#user.id#" />
        LIMIT 0, 30
    )
    ORDER by groupid
    LIMIT 0, 30
</cfquery> 
```

另外我不确定这里有两个限制是否有意义，但是没有足够的信息来提出有意义的建议。

# ruby-on-rails - Rails 应用程序中的 MongoDB 监控服务

> ID：13786802
> 
> 赞同：0
> 
> 时间：2012-12-09T10:55:35.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我看[https://mms.10gen.com/](https://mms.10gen.com/)但我不明白如何使用你的应用程序。我的意思是如何将您的 mongodb 数据库链接连接到 MongoDB 监控服务？我在我的项目中使用 Ruby on Rails 和 Mongodb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:04:23.960

界面一步一步告诉你怎么做，但这里有一个教程链接： http: [//mms.10gen.com/help/install.html](http://mms.10gen.com/help/install.html)。

基本上为了进一步解释，它不在您的应用程序中运行；无论如何，它都没有连接到您的应用程序。想象一下它是一个单独的程序，位于您的数据库服务器上，将数据传输到 MMS。当然，这确实意味着您需要配置防火墙（或像我一样使用本地主机解析）以允许程序出站流量访问 MMS 站点。

更技术性的解释是，它是一个 Python 代理，在您的机器上作为守护进程运行。一旦放置在服务器上，它将自动检测集群（除非您的单个服务器然后它只会获取一个服务器）并将其添加到站点。显示数据可能需要一段时间（5 分钟左右）。

# iphone - 服务器不接受 iOS 推送通知证书私钥

> ID：13786803
> 
> 赞同：0
> 
> 时间：2012-12-09T10:55:40.903
> 
> 标签：iphone, ios, ssl-certificate

我目前正在尝试为我的服务器启用推送通知，并且我正处于需要上传 SSL 证书的阶段。我按照 Ray Wenderlich PN 教程中的步骤操作，但无法让我的服务器接受私钥文件。教程可以在这里找到：[http](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)
://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12所以我创建了证书（我正在做一个分发，而不是开发如教程中所示）并将其转换为`.pem`. 服务器接受此罚款。`.p12`然后我从 KeyChain Access导出一个非密码保护的文件。我这样做没有密码，因为服务器要求私钥**不受**密码保护。起初我尝试上传这个`.p12`它给出了一个错误，说它无法解析私钥。然后我决定将其转换`.p12`为非密码保护的`.pem`. 当我将它上传到服务器时，我收到“key.pem 为空......”错误。老实说，我不完全确定从这里去哪里。我使用的服务器名为 appfog.com。

如果有人可以帮助上传此私钥以在服务器上使用，我将不胜感激。

问候，
迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:49:04.603

最终通过另一种方式做到了。我的后端开发人员最终使用了这些证书，现在一切都运行良好。

问候，迈克

# git - 使用 git 链接 repo 子文件夹

> ID：13786806
> 
> 赞同：1
> 
> 时间：2012-12-09T10:56:42.190
> 
> 标签：git, synchronization, bitbucket, data-synchronization, openshift

我有一个关于 Red Hat OpenShift (git) 的项目和一个关于 Bitbucket (git) 的项目。

**如何将 Bitbucket 项目的子文件夹链接到 OpenShift 项目的子文件夹？**

（以便在一个子文件夹中进行提交会在另一个子文件夹中进行相同的提交）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:42:30.797

Git 有一个名为[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)的功能，可以让你这样做；更新项目时，成本会增加一些复杂性。OpenShift 应该正确处理子模块，但我没有亲自尝试过。如果您想了解 OpenShift 如何处理 git repos 的子模块，请查看[此脚本](https://github.com/openshift/origin-server/blob/master/cartridges/openshift-origin-cartridge-abstract/abstract/info/bin/deploy_git_dir.sh)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:08:13.817

将两个存储库作为远程仓库添加到本地克隆，并使用 git fetch/push 传播提交。如果服务器可以相互推送，并且您能够在它们上运行挂钩，则可以在其中一台服务器上设置更新挂钩，以便它自动推送到另一台服务器。见 githooks(5)

# processing - 处理：高效绘制渐变

> ID：13786807
> 
> 赞同：1
> 
> 时间：2012-12-09T10:56:45.093
> 
> 标签：processing

我是[Processing](http://processing.org/reference/)的新手，我一直在模拟电子运动。一切似乎都很好，直到我尝试为每个粒子添加渐变颜色。帧速率大幅下降。

这是我迄今为止尝试过的：

```
float a=0;
float s;
void setup()
{
  size(500,500);
  smooth();
  frameRate(500);
  colorMode(HSB,360,100,100);
  noStroke();
  ellipseMode(RADIUS);
}

void draw()
{
  background(200,0,100);
  pushMatrix();
  translate(width/2, height/2);
  rotate(radians(-18));
  for ( int r = width ; r >= 0; r = r - 1 )
  {
    s = 500*exp(-r);
    fill(202, s, 100);
    ellipse(100*cos(a), 50*sin(a), r, r);

  }
  a+=0.1;
  popMatrix();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T14:01:37.983

您的问题不是关于模拟电子运动，而是更多关于在处理中有效地绘制梯度。我看到您已经从**示例 > 基础 > 颜色 > RadialGradient**示例开始。请注意，示例本身运行速度很慢，可能是因为重点放在如何使用颜色 (HSB) 和绘图功能上，而不是性能。

您可以做的是使用[PGraphics](http://processing.org/reference/createGraphics_.html)或[PImage](http://processing.org/reference/PImage.html)缓存渐变，这让您更舒服。

这是一个使用 PGraphics 的示例，如果您不习惯使用像素，这可能会更简单：

```
PImage e;
void setup(){
  size(500,500);
  e = getElectronImg(30,30,0,100,100);//create a cached drawing
}
void draw(){
  background(255);
  translate(width * .5, height * .5);
  float a = frameCount * .1;
  image(e,100*cos(a), 50*sin(a));
}

PImage getElectronImg(int w,int h,int hue,int satMax,int brightness){
  PGraphics electron = createGraphics(w+1,h+1);//create a PGraphics object
  electron.beginDraw();//init drawing using the same Processing drawing functions
    electron.colorMode(HSB,360,100,100);
    electron.background(0,0);//transparent bg
    electron.noStroke();
    int cx = electron.width/2;
    int cy = electron.height/2;
    for (int r = w; r > 0; --r) {
      electron.fill(hue,map(r,0,w,satMax,0),brightness);
      electron.ellipse(cx, cy, r, r);
    }
  electron.endDraw();
  return electron;
} 
```

还值得注意的是，PGraphics 扩展了 PImage，因此可以像使用[image()](http://processing.org/reference/image_.html)函数和其他 PImage 一样显示。

这是使用像素完成的相同缓存概念：

```
PImage e;
void setup(){
  size(500,500);
  e = getElectronImg(30,30,0,100,100);
}
void draw(){
  background(255);
  translate(width * .5, height * .5);
  float a = frameCount * .1;
  image(e,100*cos(a), 50*sin(a));
}

PImage getElectronImg(int w,int h,int hue,int satMax,int brightness){
  pushStyle();//isolate drawing styles such as color Mode
    colorMode(HSB,360,100,100);
    PImage electron = createImage(w,h,ARGB);//create an image with an alpha channel
    int np = w * h;//total number of pixels
    int cx = electron.width/2;//center on x
    int cy = electron.height/2;//center on y
    for(int i = 0 ; i < np; i++){//for each pixel
      int x = i%electron.width;//compute x from pixel index
      int y = (int)(i/electron.width);//compute y from pixel index
      float d = dist(x,y,cx,cy);//compute distance from centre to current pixel
      electron.pixels[i] = color(hue,map(d,0,cx,satMax,0),brightness,map(d,0,cx,255,0));//map the saturation and transparency based on the distance to centre
    } 
    electron.updatePixels();//finally update all the pixels
  popStyle();
  return electron;
} 
```

当然，这将使使用更多电子变得容易。偏离真实电子运动的主题，这里有一些有趣的测试，通过对 draw() 进行微调：

```
void draw(){
  background(255);
  translate(width * .5, height * .5);
  for(int i = 0 ; i < 200 ; i++){
    float a = (frameCount * .025 + (i*.1));
    image(e,(100+i)*cos(a + i), (50+i)*sin(a + i));
  }
} 
```

![200](../Images/3da38c5ddda4a75c8d76d6b19579d73a.png)

```
void draw(){
  background(255);
  translate(width * .5, height * .5);
  for(int i = 0 ; i < 1000 ; i++){
    float a = (frameCount * .025 + (i*.1));
    image(e,(100+(i * .25))*cos(a + i), (50+(i * .25))*sin(a + i));
  }
} 
```

![1000](../Images/9df6a01d3a9cd4900b537aec0e3a42f6.png)

```
void draw(){
  background(255);
  translate(width * .5, height * .5);
  scale(.25);
  for(int i = 0 ; i < 5000 ; i++){
    float a = (frameCount * .025 + (i*.1));
    image(e,sin(a) * (100+(i * .5))*cos(a + i),  (50+(i * .25))*sin(a + i));
  }
} 
```

![5K](../Images/52daf8254b0f3dbaabd6d547e68c44dc.png)

玩得开心！

现在您可以在此处实际运行代码（使用键 1、2、3、4 更改演示）：

```
var e,demo = 2;
function setup(){
  createCanvas(500,500);
  e = getGradientImg(30,30,0,100,100);
}
function draw(){
  background(255);
  translate(width * .5, height * .5);
  if(demo == 1){
    var a = frameCount * .1;
    image(e,100*cos(a), 50*sin(a));
  }
  if(demo == 2){
    for(var i = 0 ; i < 200 ; i++){
      var a = (frameCount * .025 + (i*.1));
      image(e,(100+i)*cos(a + i), (50+i)*sin(a + i));
    }
  }
  if(demo == 3){
    for(var i = 0 ; i < 1000 ; i++){
      var a = (frameCount * .025 + (i*.1));
      image(e,(100+(i * .25))*cos(a + i), (50+(i * .25))*sin(a + i));
    }
  }
  if(demo == 4){
    scale(.2);
    for(var i = 0 ; i < 5000 ; i++){
      var a = (frameCount * .025 + (i*.1));
      image(e,sin(a) * (100+(i * .5))*cos(a + i),  (50+(i * .25))*sin(a + i));
    }
  }
}
function keyReleased(){
  if(key === '1') demo = 1;
  if(key === '2') demo = 2;
  if(key === '3') demo = 3;
  if(key === '4') demo = 4;
}

function getGradientImg(w,h,hue,satMax,brightness){
  push();//isolate drawing styles such as color Mode
    colorMode(HSB,360,100,100);
    var gradient = createImage(w,h);//create an image with an alpha channel
    var np = w * h;//total number of pixels
    var np4 = np*4;
    var cx = floor(gradient.width * 0.5);//center on x
    var cy = floor(gradient.height * 0.5);//center on y
    gradient.loadPixels();
    for(var i = 0 ; i < np4; i+=4){//for each pixel
      var id4 = floor(i * .25);
      var x = id4%gradient.width;//compute x from pixel index
      var y = floor(id4/gradient.width);//compute y from pixel index
      var d = dist(x,y,cx,cy);//compute distance from centre to current pixel
      //map the saturation and transparency based on the distance to centre
      gradient.pixels[i]   = hue;
      gradient.pixels[i+1] = map(d,0,cx,satMax,0);
      gradient.pixels[i+2] = brightness;
      gradient.pixels[i+3] = map(d,0,cx,255,0);
    }
    gradient.updatePixels();//finally update all the pixels
  pop();
  return gradient;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.4/p5.min.js"></script>
```

# android - 手电筒在没有活动的情况下开/关？

> ID：13786810
> 
> 赞同：2
> 
> 时间：2012-12-09T10:56:58.440
> 
> 标签：android, flashlight

我想制作一个没有 UI 的应用程序，当按下应用程序的图标时，它将打开/关闭手电筒。

我试图制作一个部分工作的透明活动（当手电筒关闭时工作，但当打开并使用应用程序的图标将其关闭时，它会关闭但应用程序崩溃并显示错误对话框）。

我认为上述方法不是实现我想要的东西的好方法，并且可能需要使用服务，但我是开发新手，我真的不知道如何编写服务。

因此，我请您指导我使用应用程序的图标快捷方式打开/关闭切换手电筒的最佳方法是什么，并可能提供一个基本示例。提前致谢。

这是代码：

```
public class Flashlight extends Activity {

private boolean isLighOn = false;
private Camera camera;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_flashlight);

    Context context = this;
    PackageManager pm = context.getPackageManager();

    // if device support camera?
    if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        Log.e("err", "Device has no camera!");
        return;
    }

    camera = Camera.open();
    final Parameters p = camera.getParameters();

    if (isLighOn) {

        Log.i("info", "torch is turn off!");

        p.setFlashMode(Parameters.FLASH_MODE_OFF);
        camera.setParameters(p);
        camera.stopPreview();
        isLighOn = false;

    } else {

        Log.i("info", "torch is turn on!");

        p.setFlashMode(Parameters.FLASH_MODE_TORCH);

        camera.setParameters(p);
        camera.startPreview();
        isLighOn = true;

    }
    finish();

          };

      @Override
      public void onPause() {
      super.onPause();
  bundle.putBoolean("toggleFlashlight", isLighOn);
     }

     public void onResume() {
 super.onResume();
     }

@Override
protected void onStop() {
    super.onStop();

   }
  }  
 } 
```

这是 logcat 错误：

```
E/QualcommCamera(  116): Qint android::get_camera_info(int, camera_info*): E
I/QualcommCameraHardware(  116): Found a matching camera info for ID 0
I/QualcommCameraHardware(  116): HAL_getCameraInfo: orientation = 90
I/QualcommCameraHardware(  116): HAL_getCameraInfo: modes supported = 5
W/CameraService(  116): CameraService::connect X (pid 6147) rejected (existing c
lient).
W/dalvikvm( 6147): threadid=1: thread exiting with uncaught exception (group=0x4
0c911f8)
E/AndroidRuntime( 6147): FATAL EXCEPTION: main
E/AndroidRuntime( 6147): java.lang.RuntimeException: Unable to start activity Co
mponentInfo{com.myprojects.lightsonoff/com.myprojects.lightsonoff.Flashlight}: j
ava.lang.RuntimeException: Fail to connect to camera service
E/AndroidRuntime( 6147):        at android.app.ActivityThread.performLaunchActiv..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:07:58.483

完成此操作的最简单方法是创建一个 Activity，其`onCreate()`方法执行您需要完成的操作（读取灯的状态并切换它），然后调用`finish()`. 一个从不呈现 UI 的非常短暂的活动没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:59:33.013

我无法使用这种方法使其工作，所以我创建了一个服务，在其中我将手电筒作为服务启动。然后从透明活动中，我创建了一个 if 语句，如果没有运行，它将通过检查 blobal 布尔标志（包含在服务类中）来启动服务，或者如果已经运行则停止它。现在唯一的问题是系统很容易杀死手电筒服务，所以我像这样包含了 startForeground 方法：

```
Notification fakenote = new Notification( 0, null, System.currentTimeMillis() );
    fakenote.flags |= Notification.FLAG_NO_CLEAR;
    startForeground( 2, fakenote ); 
```

我还将 stopForeground(true) 放在 onDestroy 方法中。现在似乎效果很好。有什么办法可以防止系统完全杀死服务，所以只能被应用程序杀死，或者这是最好的办法？

# javascript - jsp中的条件行显示

> ID：13786811
> 
> 赞同：1
> 
> 时间：2012-12-09T10:57:03.637
> 
> 标签：javascript, jsp

假设jsp中有示例代码如下：

我希望当我在文本字段中输入数据并单击“添加项目”按钮时，整行应复制到当前行下方。除此之外，前一行应保留其数据，新行应为空。需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:09:51.783

这是我纯粹会在客户端做的事情，并使用 jQuery：

```
<table id = "myTable">
<tr id="myRow">
 <td>Quantity</td>
 <td><input type="text" size="10" style="background-color: aqua" name="quantity"> </td>
 <td>Price</td>
 <td><input type="text" disabled="disabled" size="10" style="background-color: aqua" name="price"></td>
 <td><input type="button" id="copyRow" value="Add Item" /></td>
</tr>
</table> 
```

和一些 jQuery：

```
$('#copyRow).clone("#myRow").appendTo('#myTable'); 
```

# android - 双android发布的Eclipse结构

> ID：13786812
> 
> 赞同：1
> 
> 时间：2012-12-09T10:57:22.700
> 
> 标签：android, eclipse, project

我正在做一个 Android 应用程序，并希望以完整和基本版本发布它。由于这两个中几乎所有的代码和资源都是相同的，我想知道是否有人知道 Eclipse 中推荐的项目设置来管理这个？

我试图使用链接和虚拟文件夹，但如果我这样做， **R**文件的生成似乎会中断。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T11:05:33.050

我认为正确的方法是将项目分成（至少）3个子项目：

*   公共代码，由两个版本共享，包例如`com.example.app.lib`，
*   基本版本的包装代码，例如包`com.example.app.basic`，
*   完整版的包装器和附加代码，例如`com.example.app.full`.

第一个是图书馆项目，第二个和第三个将使用这个图书馆项目。

类（活动等）将从 lib 项目扩展相关类并仅添加必要的内容。“基本”代码几乎不会添加任何内容，但在现实生活中，即使“基本”项目从用户的角度来看是“完整”项目的子集，您最终仍然会拥有属于“基本”但不属于的代码“满的”。

这样，您就有了基本版和专业版的独立 AndroidManifest.xml 文件。而且由于 Google Play 商店要求应用程序具有唯一的包，这将使生成 APK 更容易。

更多关于图书馆项目：http: [//developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)

# c# - 从泛型类调用方法

> ID：13786814
> 
> 赞同：0
> 
> 时间：2012-12-09T10:58:08.067
> 
> 标签：c#, generics, data-access-layer

我正在构建通用共享点 DALL，所以我需要帮助。我不知道这是否适用，但从逻辑上讲它必须是。

我的问题是我的 gr8 TTL 不确定他需要使用的数据源是什么：S（SQL 或 SharePoint 列表），他需要开始项目的开发。

所以我需要构建 DAL，因为 SP 列表是我的数据源，所以未来的变化将是最小的。

现在我拥有的是 baseDAL，其中包括所有常见操作，如删除、getAll 等

myBase dal 类现在类似于

```
public class BaseDAL<T> where T : BaseInfo,new()
{
    public virtual List<T> GetAllItem()
{
   //code to read from any data source and return data

}
public virtual Boolean Delete(T entity)
 {
    int entityID  = ((BaseInfo)entity).ID;
    deleteEntity(entityID);
 } 
```

}

我将 baseInfo 类作为主要业务对象实体。

假设我有两个业务实体（员工、学生）和两个 DAL，一个用于员工，一个用于学生

所以我在想的是在 getAllItem 中实现代码，它根据 T 类型返回所有​​项目，所以代码在 baseDAL 中可能看起来像波纹管

```
public virtual List<T> GetAllItem()
{

   SPListItemCollection items = //code to read from list please note that list name saved in baseInfo object
   T.getBusinessListItems(items); //toList

} 
```

在 EmployeeDAL 中，我在 SPListItemCollection 到业务实体之间实现了一个映射器函数，代码将与此类似

```
public virtual List<Employee> getBusinessListItems(SPListItemCollection items)
{

  //loop the items and fill them in list of employee objects
  return list<Employee>

} 
```

希望这能澄清情况，我不知道这是否是写作方式，我不是一个技术人员。如果有其他方法可以做到这一点，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:39:58.270

不确定这是否是您想要的，但它可能会有所帮助：

```
object someDal = ...; //you don't know the exact type
var list = ((dynamic)someDal).GetAllItem(); 
```

C# dynamic 已经为您解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:11:48.730

最后我设法做到了，具有相同的结构，我使用了以下代码，我认为它称为反射，我不确定，，

```
public virtual List<T> GetAllItems(Type DalType)//this is baseDAL
{
  MethodInfo methodInfo = DalType.GetMethod("ConvertToBusinessEntities");
  object[] parametersArray = new object[] { itemCollection };
  object classInstance = Activator.CreateInstance(DalType, null);
  return (List<T>)methodInfo.Invoke(classInstance, parametersArray);
} 
```

我只需要传递 DalType 就知道从哪个类调用该方法，如果确保所有 DAL 都实现 ConvertToBusinessEntities 方法，我可以通过接口管理该方法，代码将起作用。我希望这种代码结构足够强大......毕竟它不是死胡同:) ,,,

# spring - 事务中的 Spring 程序化事务

> ID：13786816
> 
> 赞同：1
> 
> 时间：2012-12-09T10:59:16.493
> 
> 标签：spring, transactions, nested

我已经编写了下面的代码来执行以下活动，我使用 Spring 类创建了一个事务。插入一行。创建了其他交易。插入另一行。提交的外部事务。回滚内部事务。

```
TransactionStatus trxstsOuter= dsTrxMngr.getTransaction(null);
    jdbcTemplate.update("insert into kau_emp values(6,'xyz' )");
    TransactionStatus trxstsInner= dsTrxMngr.getTransaction(null);
        jdbcTemplate.update("insert into kau_emp values(7,'pqr' )");

dsTrxMngr.commit(trxstsOuter);
System.out.println("trxstsOuter.isCompleted()" + trxstsOuter.isCompleted());
System.out.println("trxstsInner.isCompleted()" + trxstsInner.isCompleted());
dsTrxMngr.rollback(trxstsInner);
    System.out.println("trxstsInner.isCompleted()" + trxstsInner.isCompleted()); 
```

我观察到这两行都提交给 DB ！输出是

```
trxstsOuter.isCompleted()true
trxstsInner.isCompleted()false
trxstsInner.isCompleted()true 
```

这是正确的行为吗？在允许外部事务提交之前，不应该首先提交/回滚内部事务吗？如果外部事务被提交，内部事务的回滚是否应该抛出错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T11:41:37.847

在您的示例交易中`Propagation.REQUIRED`中用作默认值，并且所有逻辑事务都映射到单个物理事务

> 当传播设置为 PROPAGATION_REQUIRED 时，将为应用该设置的每个方法创建一个逻辑事务范围。每个这样的逻辑事务范围都可以单独确定仅回滚状态，外部事务范围在逻辑上独立于内部事务范围。当然，在标准 PROPAGATION_REQUIRED 行为的情况下，所有这些范围都将映射到同一个物理事务。因此，在内部事务范围内设置的仅回滚标记确实会影响外部事务实际提交的机会（正如您所期望的那样）。

因此，在您的示例中，两个逻辑事务映射到一个物理事务。

请参阅[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-programming-model)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:17:08.483

在当前代码中，第二个 getTransaction 调用是 noop。此行为由名为 PropagationBehavior 的属性控制。默认传播行为是 PROPAGATION_REQUIRED - 这意味着如果不存在则启动新事务，否则加入现有事务。这就是您的情况。

如果您将第二个事务的传播行为属性更改为 PROPAGATION_REQUIRES_NEW - 您将获得预期的行为。一旦内部事务被提交/回滚，外部事务就会被挂起并创建一个新事务，外部事务会自动恢复。我已经修改了您的代码以包含此行为，当您尝试在内部事务之前提交外部事务时，您现在应该得到一个异常。如果您修复序列，则提交将独立发生。

```
TransactionStatus trxstsOuter= dsTrxMngr.getTransaction(null);
jdbcTemplate.update("insert into kau_emp values(6,'xyz' )");
    // start a new transaction.
    DefaultTransactionDefinition nestedTransDef = new DefaultTransactionDefinition();
    nestedTransDef.setPropagationBehavior(             
           TransactionDefinition.PROPAGATION_REQUIRES_NEW);
    TransactionStatus trxstsInner= dsTrxMngr.getTransaction(nestedTransDef);
     System.out.println("trxstsInner.isNewTransaction()"+ trxstsInner.isNewTransaction());  
        jdbcTemplate.update("insert into kau_emp values(7,'pqr' )");

dsTrxMngr.commit(trxstsOuter);
    System.out.println("trxstsOuter.isCompleted()" + trxstsOuter.isCompleted());
    System.out.println("trxstsInner.isCompleted()" + trxstsInner.isCompleted());
    dsTrxMngr.rollback(trxstsInner);
    System.out.println("trxstsInner.isCompleted()" + trxstsInner.isCompleted()); 
```

顺便说一句，您应该使用注释来管理事务 - 这是在代码中合并事务的更清洁/更好的方式。程序化事务仅适用于需要更多控制的极少数情况。此外，建议在使用 TransactionTemplate 进行编程事务时。

# web-services - 安全的基于 HMAC 的集中式身份验证服务

> ID：13786817
> 
> 赞同：0
> 
> 时间：2012-12-09T10:59:34.457
> 
> 标签：web-services, http, authentication, web, https

我需要将身份验证集中到我的其余 Web 服务中，并使我们所有的 Web 服务的身份验证相同。所以我开始编写一个外部 Web 服务来处理身份验证。

为了保持兼容性，由于身份验证是使用 HMAC 签名（使用私钥签名）以及单个请求（因此没有任何类型的令牌）执行的，我认为让所有 Web 服务发送包含在传入请求中的 HMAC和 StringToSign（用于生成 HMAC 的数据表示）。

因此，授权服务可以（知道私钥）尝试编写相同的签名，如果匹配，则`200 OK`使用 JSON 对象回答“已授权”。

所有这些通信都是通过 HTTPS 进行的，但我试图弄清楚如果有人拦截或修改这个答案会发生什么，使 a`403 Forbidden`成为`200 OK`......

我应该使用某种方式来识别这是原始答案吗？如果是这样，我该怎么办？

我同意 CA 发布的 ssl 证书是安全的，但是我如何确保我的 HTTPS 层没有受到损害，从而允许攻击者修改授权响应？

PS如果有的话，请提供一些标准解决方案，我不希望它与我现在使用的技术相关，因为每个服务都可能使用自己的堆栈，我真的不希望它是.NET或其他东西否则，因为身份验证机制有一个专有的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:41:24.453

> 所有这些通信都是通过 HTTPS 进行的，但我试图弄清楚如果有人拦截或修改这个答案会发生什么

这就是*S*的用途：SSL 保证消息的[完整性](http://en.wikipedia.org/wiki/Transport_Layer_Security#TLS_handshake_in_detail)。如果攻击者伪造请求，客户端会注意到它。

[您可以在#security](https://security.stackexchange.com/)向专家咨询。

# php - Symfony2 进程不实时提供反馈

> ID：13786822
> 
> 赞同：3
> 
> 时间：2012-12-09T11:00:04.457
> 
> 标签：php, symfony, symfony-2.1, symfony-process

我的想法是用[Symfony2 Process Class](http://api.symfony.com/2.1/Symfony/Component/Process/Process.html)启动一个 minecraft 服务器，并希望实时向我提供反馈。因此，就像[Process cookbook 部分](http://symfony.com/doc/current/components/process.html)中所述，我尝试以下代码：

```
$process = new Process('sudo java -jar -Xms512M -Xmx1G ../server/minecraft_server.jar');
    $process->setTimeout(null);
    $process->run(function ($type, $buffer) {
        if ('err' === $type) {
            echo 'ERR > '.$buffer;
        } else {
            echo 'OUT > '.$buffer;
        }
    }); 
```

由于 apache2 用户的一些权限问题，我修改了 sudoers 文件： `www-data ALL = (myspecialUser) NOPASSWD: /usr/bin/java`
所以 www-data 用户可以运行 java 命令。

服务器在后台启动，但我现在的问题是我没有得到任何实时输出。只有当我关闭（或杀死）我的世界服务器进程时，我才会得到输出。

任何建议如何获得实时输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:41:13.637

您应该尝试使用 start() 方法，而不是调用 run() 方法：

```
$process = new Process('sudo java -jar -Xms512M -Xmx1G ../server/minecraft_server.jar');
$process->setTimeout(null);
$process->start(function ($type, $buffer));

echo 'OUT >' . $process->getOutput(); 
```

[http://api.symfony.com/master/Symfony/Component/Process/Process.html#method_start](http://api.symfony.com/master/Symfony/Component/Process/Process.html#method_start)

[http://api.symfony.com/master/Symfony/Component/Process/Process.html#method_getOutput](http://api.symfony.com/master/Symfony/Component/Process/Process.html#method_getOutput)

# javascript - 全局变量不会改变 Javascript 中的值

> ID：13786828
> 
> 赞同：0
> 
> 时间：2012-12-09T11:01:28.113
> 
> 标签：javascript, authentication, login, global-variables, hashchange

我的项目由 2 个 html 页面组成：

1.  `index.html`，其中包含登录名和注册表单。
2.  `user_logged.html`，其中包含登录用户的所有功能。

现在，我要做的是控制用户是否真的登录，以避免用户在浏览器中粘贴 url 并可以看到另一个用户的页面的情况。几个小时后，如果用户将此网址粘贴到浏览器中：

```
 www.user_loggato.html?user=x#profile 
```

就像以用户 x 身份登录一样，这并不好。

我的 html 页面都使用包含脚本的 js 文件。我决定创建一个名为logged inizialized 的全局变量为false，并在登录成功时将变量更改为true。

问题是变量仍然为假。

这是代码：

```
 var logged=false; (write in the file a.js) 
```

在文件 b.js 中，我有：

```
 function login() {

 //if succesfull
        logged=true;
       window.location.href = "user_loggato.html?user="+ JSON.parse(str).username + #profilo"; 
```

现在有了一些警报，我发现我的变量记录总是错误的。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:09:43.727

Javascript 不是要走的路，因为它在客户端运行。即使有办法在不同请求之间共享 javascript 变量，用户也可以操纵它们。

您必须为此采用服务器端技术（可能是带有会话的 PHP）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:13:31.353

JS 变量将在每次提交/刷新时重置。为此，您可以使用 sessionStorage 或 cookie。例如：

将其放入您的登录表单中：

```
function login() {
    window.sessionStorage[logged] = true;
   window.location.href = "user_loggato.html?user="+ JSON.parse(str).username + #profilo";
} 
```

在您的 user_loggato.html 中，您可以像这样检索它：

```
function getLoginStatus() {
    return window.sessionStorage['logged'];
} 
```

希望这可以帮助。

# text - 如何将文本添加到画布中

> ID：13786836
> 
> 赞同：0
> 
> 时间：2012-12-09T11:02:36.433
> 
> 标签：text, canvas

我对画布 fillText 函数有疑问。我有这个代码：

```
 scene.shapes['shop1'] = new Shape();
        var ps1 = scene.shapes['shop1'].points; // for convenience

        ps1[0] = new Point(1024, 66, 10);  // left  bottom
        ps1[1] = new Point(694, 66, 10);   // right bottom
        ps1[2] = new Point(694, 466, 10);    // right top   
        ps1[3] = new Point(1024, 466, 10);   // left  top    

        // Background
        scene.shapes['shop1'].polygons.push(new Polygon(
            [ps1[0], ps1[1], ps1[2], ps1[3] ],
            new Point(0, 0, 1),
            true /* double-sided */,
            Polygon.SOLID,
            [177, 216, 249]
        ));

                    scene.shapes['shop1Header'] = new Shape();
        var ps1h = scene.shapes['shop1Header'].points; // for convenience

        ps1h[0] = new Point(1024, 400, 11);  // left  bottom
        ps1h[1] = new Point(694, 400, 11);   // right bottom
        ps1h[2] = new Point(694, 466, 11);    // right top   
        ps1h[3] = new Point(1024, 466, 11);   // left  top    

        // Background
        scene.shapes['shop1Header'].polygons.push(new Polygon(
            [ps1h[0], ps1h[1], ps1h[2], ps1h[3] ],
            new Point(0, 0, 1),
            true /* double-sided */,
            Polygon.SOLID,
            [175, 175, 175]
        ));       

                          var x = -1024;
                          var y = -500;

                          ctx.font = '60pt Calibri';
                          ctx.lineWidth = 3;
                          // fill color
                          ctx.fillStyle = 'blue';
                          ctx.fillText('Hello World!', x, y); 
```

但它不创建文本，只显示商店。你知道，如何解决这个问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:30:17.467

x 和 y 的值为负数，因此您在画布之外进行绘制。如果将 x 设置为 0 并将 y 设置为 0 + font-size ，它将在左上角绘制文本。

编辑：您需要将字体大小添加到 y。

```
ctx.font = "60px Calibri"; // Use pixels instead of points
ctx.fillText("Hello World", 0, 60); 
```

# java - java.io.utfdataformatexception：字符串太长

> ID：13786843
> 
> 赞同：-1
> 
> 时间：2012-12-09T11:04:03.080
> 
> 标签：java, client-server, utf

在将图像发送到 Java 服务器时，我得到了标题中的异常

这是代码：

```
 ByteArrayOutputStream stream = new ByteArrayOutputStream();
       img.compress(Bitmap.CompressFormat.PNG, 100, stream);
       byte[] byteArray = stream.toByteArray();

       String imageDataString = new String(Base64.encodeBase64(byteArray)); 
       System.out.println(imageDataString);

       dataOutputStream.writeUTF(imageDataString);
       dataOutputStream.flush(); 
```

`img`位图文件在哪里。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:25:36.540

@Sarram 按照打击链接中的代码，我在soap请求中发送图像以及base64String形式的其他数据，我正在将其转换为文件

blow 是代码的参考

[将解码后的 base64 字节数组写入图像文件](https://stackoverflow.com/questions/13785594/writing-decoded-base64-byte-array-as-image-file/13785647#13785647)

我正在使用这个很酷的解码器`import sun.misc.BASE64Decoder;` 服务器端可以这样做

```
 String filePath = "/destination/temp/file_name.jpg";
        File imageFile = new File(filePath);
        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream(imageFile);//create file
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }
        BASE64Decoder decoder = new BASE64Decoder();//create decodeer object
        byte[] decodedBytes = null;
        try {
            decodedBytes = decoder.decodeBuffer(imageFileBase64);//decode base64 string that you are sending from clinet side 
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        try {
            fos.write(decodedBytes);//write the decoded string on file and you have ur image at server side
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            fos.flush();
            fos.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# javascript - jQuery 动画错误：重复

> ID：13786848
> 
> 赞同：0
> 
> 时间：2012-12-09T11:04:48.840
> 
> 标签：javascript, jquery, show-hide

我正在为我的网络应用程序开发一个登陆页面，并且我正在使用我构建的某种模式框。它使用一些 jQuery 来显示框本身和覆盖。同一页面上有 3 个模式框，您可以使用每个框的一个链接打开它们。

我的代码工作得非常好（尽管它看起来很重[我不是 Javascript 方面的专家，但我总是尽可能多地尝试一下]）。但是当我关闭模态框时，覆盖层会按预期滑出，但动画会重复 3 次（可能是因为 3 模态框的代码）。

所以，我的代码完全在线 → [http://graphix.net23.net/app/](http://graphix.net23.net/app/)

这是 jsFiddle 供您玩 :) → [http://jsfiddle.net/EY59T/](http://jsfiddle.net/EY59T/)（该错误并不真正可见，您只能看到覆盖需要一段时间才能摆脱）

我已经尝试过 .stop() 功能。它解决了当您显示第一个模态时的问题，但是当您单击另一个模态时，覆盖不会出现。

看看我的繁重代码：

```
// iOS Modal
$("a#modal-open").click(function () {
      $("div#modal-ios").show("fade", 600);
      $("div.modal-overlay").show("slide", 300);
      $(".app h4").hide("fade", 300);
      $("div.app").animate({backgroundPositionY:-120}, 600);
      return false;
});
$("a#modal-done,div.modal-overlay").click(function () {
      $("div#modal-ios").hide("fade", 600);
      $("div.modal-overlay").hide("slide", 300);
      $(".app h4").show("fade", 600);
      $("div.app").animate({backgroundPositionY:0}, 600);
      return false;
});
$( document ).on( 'keydown', function ( e ) {
    if ( e.keyCode === 27 ) {
        $("div#modal-ios,div.modal-overlay").hide("fade", 300);
        $(".app h4").show("fade", 300);
        $("div.app").animate({backgroundPositionY:0}, 600);
    }
});
// END iOS Modal
// Android Modal
$("a#modal-open-android").click(function () {
      $("div#modal-android").show("fade", 600);
      $("div.modal-overlay").show("slide", 300);
      return false;
});
$("a#modal-done,div.modal-overlay").click(function () {
      $("div#modal-android").hide("fade", 600);
      $("div.modal-overlay").hide("slide", 300);
      return false;
});
$( document ).on( 'keydown', function ( e ) {
    if ( e.keyCode === 27 ) {
        $("div#modal-android,div.modal-overlay").hide("fade", 300);
    }
});
// END Android Modal
// WP Modal
$("a#modal-open-wp").click(function () {
      $("div#modal-wp").show("fade", 600);
      $("div.modal-overlay").show("slide", 300);
      return false;
});
$("a#modal-done,div.modal-overlay").click(function () {
      $("div#modal-wp").hide("fade", 600);
      $("div.modal-overlay").hide("slide", 300);
      return false;
});
$( document ).on( 'keydown', function ( e ) {
    if ( e.keyCode === 27 ) {
        $("div#modal-wp,div.modal-overlay").hide("fade", 300);
    }
});
// END WP Modal​ 
```

已经两天了，我正在研究它，但仍然找不到有效的解决方案，请帮助我:)

编辑：您可以通过三种不同的方式关闭模式：单击按钮、单击覆盖或 ESC 键。请注意，该错误不会发生在 ESC 键上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:32:58.163

发生这种情况是因为您隐藏了 3 次叠加层（每个平台一次 [iOS、Android、WP]）

您的代码需要一些清理。您在页面上使用了多个无效的 id 元素（例如#modal-close），不确定是否有其他实例。我在这里尝试做的是为每个平台创建和对象，在开始时索引所有内容并从那里运行。

但是，您可以只修改您得到的内容，但添加一个隐藏功能。我在这里模拟了它：http: [//jsfiddle.net/3sz2u/1/](http://jsfiddle.net/3sz2u/1/)

我已将其更改`a#modal-close`为`a.modal-close`

希望这可以帮助！仅在 Chrome 上测试

* * *

**注意**：您创建的 jsFiddle 不会显示相同的效果，因为您正在使用的版本。将它切换到 jQuery 1.7.2，你会看到它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:34:16.053

问题是您为打开的每种模型绑定了三次关闭处理程序。但是您将它们绑定在相同的元素上`a#modal-done,div.modal-overlay`。这样，当您单击它时，它会在相同的元素上开始 3 次淡入淡出，从而将其弄乱。

您只需要应用一次处理程序，只需在其中添加所有弹出窗口的淡入淡出..

此外，通过在用于打开弹出窗口的链接中添加一个通用类，您也可以一次性定位那些

这些将简化您的代码

```
// method to hide any open popup and the overlay
function closePopupOverlay() {
    // hide all popups - will only really work with the currently open one
    $("#modal-ios,#modal-wp,#modal-android,div.modal-overlay").hide("fade", 500);

    $(".app h4").show("fade", 500);
    $("div.app").animate({
        backgroundPositionY: 0
    }, 600);
}
$(document).on('keydown', function(e) {
    if (e.keyCode === 27) {
        closePopupOverlay();
    }
});
$("a#modal-done,div.modal-overlay").click(function() {
    closePopupOverlay();
    return false;
});
// when we click on one of the links 
$('.model-open').click(function() {
    var target = this.id.replace('-open-', '-'); // find the related popup id
    $('#' + target).show("fade", 600); // show the related popup
    $("div.modal-overlay").show("slide", 300); // show the overlay

    if (target === 'modal-ios') { // handle the special needs of the ios button
        $(".app h4").hide("fade", 300);
        $("div.app").animate({
            backgroundPositionY: -120
        }, 600);
    }

    return false;
}); 
```

html 更改是我添加`class="model-open"`到您的 3 个链接，`id`并将 ios 链接更改为`modal-open-ios`与其他两个链接一致，因此我们可以轻松提取我们想要打开的弹出窗口..

演示在[http://jsfiddle.net/EY59T/1/](http://jsfiddle.net/EY59T/1/)

# java - 覆盖 `equals()` 方法会在 `HashMap` 中产生意外结果

> ID：13786850
> 
> 赞同：2
> 
> 时间：2012-12-09T11:05:06.747
> 
> 标签：java, scjp

这是 OCJP 6 考试中的问题，因此故意不完全正确（但合法）。

给定代码：

```
class ToDos {
    String day;

    public ToDos(String d) {
        day = d;
    }

    public boolean equals(Object o) {
        return ((ToDos) o).day == day;
    }

    public int hashCode() { return 9; }
}

public class MapEQ {

    public static void main(String[] args) {
        Map<ToDos, String> map = new HashMap<ToDos, String>();

        ToDos t1 = new ToDos("Monday");
        ToDos t2 = new ToDos("Mond" + "a" + "y");
        ToDos t3 = new ToDos("Tuesday");

        map.put(t1, "a");
        map.put(t2, "b");
        map.put(t3, "c");

        System.out.println(map.size());
    }

} 
```

为什么输出是2？我的意思是，`equals`方法没有被正确地覆盖，所以`t1.day == t2.day`应该是错误的！我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T11:06:10.627

这是因为：

```
"Mond" + "a" + "y" 
```

在编译时评估为“星期一”，因此在字符串池中只有一个实例。有一个更简单的测试来检查这种行为：

```
System.out.println("Mond" + "a" + "y" == "Monday");  //true

String y = "y";
System.out.println("Mond" + "a" + y == "Monday");  //false

final String y2 = "y";
System.out.println("Mond" + "a" + y2 == "Monday");  //true 
```

上面的示例应该让您大致了解编译器如何处理字符串连接。

为了安全起见，请始终使用：

```
return ((ToDos) o).day.equals(day); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T11:35:55.340

只是添加到以前的答案......另一个例子说明了这一点：

```
String a = "Monday";
String b = new String("Monday");
String c = "Monday";

(a == b)      // false
(a.equals(b)) // true

(a == c)      // true
(a.equals(c)) // true 
```

两者都`a`指向`c`字符串池中的同一个对象。

# javascript - 自动滚动移动网页

> ID：13786862
> 
> 赞同：1
> 
> 时间：2012-12-09T11:06:38.993
> 
> 标签：javascript, html, scroll, multiplatform

我想让我的移动网页自动向下滚动以隐藏页面顶部的浏览器搜索栏。这方面的一个例子是移动设备上的 Facebook 主页，它一加载就会自动向下滚动，所以你几乎感觉自己在一个应用程序中，而不是在浏览器中。问题是每个操作系统的浏览器搜索栏都有不同的大小。我可以调用一个属性来获取它的大小或自动滚动过去吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:33:30.887

从[隐藏移动 Safari 中的地址栏](http://davidwalsh.name/hide-address-bar)

```
window.addEventListener("load",function() {
  // Set a timeout...
  setTimeout(function(){
    // Hide the address bar!
    window.scrollTo(0, 1);
  }, 0);
}); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T17:29:34.433

这是使自动滚动在移动浏览器中工作的解决方案

```
$('#elemIdTOScroll')[0].scrollIntoView(true); 
```

# android - android如何旋转画布矩形

> ID：13786870
> 
> 赞同：10
> 
> 时间：2012-12-09T11:08:53.593
> 
> 标签：android, canvas, path, rotation, rect

我创建了一个特定大小的矩形，现在我想将它旋转到 45 度，我使用了 canvas.rotate，matrix，但不工作。如何在android中旋转画布的正确方法？我对 Path.Direction.CW 很感兴趣，它是用来旋转的吗？但我在 Path() 中看不到任何旋转功能

```
 paint.setAntiAlias(true);
    paint.setStrokeWidth(2);
    paint.setColor(Color.BLUE);
    paint.setAlpha(75);

    Path path = new Path();
    path.addRect(166, 748, 314, 890, Path.Direction.CW);
    canvas.rotate(45);
    canvas.drawPath(path, paint); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-29T14:30:25.427

要绘制一个旋转的矩形，您需要在绘制*之前*旋转画布（如果您正在绘制其他任何东西，则将其旋转回右侧向上）。`Canvas.rotate()`只是改变画布的变换矩阵，它变换调用*后*绘制的形状。

```
canvas.save();
canvas.rotate(45);
canvas.drawRect(166, 748, 314, 890, paint);
canvas.restore(); 
```

Path.Direction 与旋转变换无关。从[文档](http://developer.android.com/reference/android/graphics/Path.Direction.html)：

> 指定闭合形状（例如矩形、椭圆形）添加到路径时的定向方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-05T11:11:31.460

如果要从`(x,y)`点绘制某些东西，则必须围绕`(x,y)`点旋转画布。为此，您应该使用

```
canvas.rotate(45,x,y); 
```

所以，

```
canvas.save();
canvas.rotate(45,x,y);
//all drawing from (x,y) point
canvas.restore(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T09:49:29.087

正确的方法应该是这样的：

```
Path path = new Path();
path.addRect(166, 748, 314, 890, Path.Direction.CW);
canvas.save(); // first save the state of the canvas
canvas.rotate(45); // rotate it
canvas.drawPath(path, paint); // draw on it
canvas.restore(); // restore previous state (rotate it back) 
```

# git - Git 如何在你的 repo 中跟踪一个文件，而不是从其他人的分支中覆盖它？

> ID：13786878
> 
> 赞同：2
> 
> 时间：2012-12-09T11:10:04.770
> 
> 标签：git, command-line-interface

我有一个 .htaccess 文件，其中包含仅适用于我的机器的特定设置。

当我从另一个人的分支中提取更改时，我总是必须撤消所做的更改。

我想我可以做`git checkout file hash`回原始文件（正确吗？如果没有，有人可以告诉我正确的命令）但是我没有办法告诉 Git 跟踪我的分支上的文件，但永远不要拉下文件从另一个远程分支？

类似的说明：如何让 git 跟踪特定文件但从不将其推送到远程分支。例如，我有一个包含密码详细信息的文件，但如果我将我的文件公开存储在 GitHub 上，那么我不希望该文件被推送。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:12:02.627

您可以将其保留在本地，并在拉取更改时`branch`将其与 合并。`master`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:19:10.667

将文件恢复到以前版本的命令实际上是

```
git checkout commit file 
```

论点与问题的顺序相反。提交可以是哈希或任何其他引用提交的方式，例如分支或标签名称。

`.htaccess`您可以通过指定自定义合并驱动程序来设置 git 以自动保留您的文件版本。

为此，首先您需要在 git 配置中定义合并驱动程序，然后指定该合并文件应用于该`.htaccess`文件。

```
git config merge.mine.driver 'touch %A'
echo .htaccess merge=mine >> .gitattributes 
```

但是，如果您的本地分支将被合并到您从中提取更改的分支中，这将不是一个好主意。这将记录对该文件的更改已被合并，即使它们实际上被完全忽略。因此，如果您的分支被合并回另一个分支，那么对该文件的所有更改都可能会被还原。

# java - Eclipse + WindowBuilder，swing 运行时调整大小和定位

> ID：13786885
> 
> 赞同：2
> 
> 时间：2012-12-09T11:12:13.587
> 
> 标签：java, eclipse, swing, netbeans, windowbuilder

我正在使用带有 windowBuilder 插件的 Eclipse。我在挥杆布局中遇到了一个严重的问题。在 netbeans 中，swing 的默认布局是“自由设计”布局。但是在eclipse中默认的swing布局是flowtype布局。当我将 jbuttons 或 jtextfields 之类的组件添加到面板中时，我无法调整面板中组件的大小。如果我选择坐标类型布局，组件会坚持正确的坐标，并且在我们调整窗口大小时不会调整其位置。在 netbeans 中，我们喜欢水平和垂直调整大小间隙等工具，而在 windowbuilder 中，我找不到它们用于在 jpanel 中定位组件。windowbuilder中是否有类似“免费设计布局”的布局，以便我可以享受在netbeans GUI设计中获得的灵活性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T11:55:09.270

如果您的意思是 on `GroupLayout`，答案是：是的。但是您必须意识到“灵活性”，正如您所说的那样……成本。它会产生“混乱”的代码，这也很难维护。此外，使用 GUI 设计器，您将永远无法完全理解`swing`.

![在此处输入图像描述](../Images/cd367ea7b0fdd92388dea05ab0f2bc88.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T20:48:12.933

解决方案组布局

```
 //constructter 
 public AddProduct() {
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setBounds(100, 100, 539, 362);
            contentPane = new JPanel();
            contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
            //change content pane layout
            contentPane.setLayout(new GroupLayout(contentPane));
            setContentPane(contentPane);
        } 
```

# php - PHPExcel - 公式中的错误循环引用

> ID：13786887
> 
> 赞同：2
> 
> 时间：2012-12-09T11:12:35.813
> 
> 标签：php, phpexcel

我不断收到此错误“公式中的循环引用”。

当我尝试下载我的 excel 文件时。

现在，当我从我的文件中删除公式中的“=”时

```
$this->exportObj->setActiveSheetIndex(0)
                                ->setCellValue(strtoupper($this->abc[$currentColumn]).$currentLine, (str_replace("=", "", $column)) ); 
```

我可以下载文件，但formala当然不起作用..

这是我的 excel 文件： [http ://www.2shared.com/document/SPtnvq6e/excel.html](http://www.2shared.com/document/SPtnvq6e/excel.html)

我的公式有什么问题？我看不到我做错了什么..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T11:44:38.593

循环公式类似于（例如）单元格 A1 包含公式 =B1+1 而单元格 B1 包含 =A1+1，即。执行公式会导致一连串的计算循环回到自身。

这在 Excel 中可能有效，但默认行为是在遇到错误消息时生成错误消息。但是，您可以更改此行为，以便 Excel 将通过指定数量的循环或迭代来处理公式。

PHPExcel 支持这两种行为：默认是生成错误消息，就像 Excel 一样。但是，如果将计算引擎的 $cyclicFormulaCount 属性设置为大于 0 的值，它将模拟 Excel 可以表现出的第二种行为。在最简单的层面上：

```
PHPExcel_Calculation::getInstance()->cyclicFormulaCount = 1; 
```

将抑制循环错误并允许执行基本的循环计算，将 $cyclicFormulaCount 设置为更高的值将允许通过多个循环或迭代计算公式（到您指定的值）。

getOldCalculatedValue() 方法检索最后一次由 MS Excel 本身执行的计算结果。这可能是正确的，但不能保证（例如：如果 Excel 本身已禁止公式计算）。

或者，您可以在保存文件之前阻止 PHPExcel 计算公式：

```
$objWriter->setPreCalculateFormulas(FALSE); 
```

**编辑**

从 1.7.9 版本开始，计算引擎已被修改，每个工作簿文件都有一个计算引擎实例，因此有必要指明需要为哪个实例设置 cyclicFormulaCount。

而不是

```
PHPExcel_Calculation::getInstance()->cyclicFormulaCount = 1; 
```

你会用

```
PHPExcel_Calculation::getInstance($objPHPExcel)->cyclicFormulaCount = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-01T02:55:38.717

对我来说，这发生在我指定一个向后的列范围时。所以不是 E10:E11 它是给 E11:E10 一旦我把它从低到高的顺序错误就消失了。我正在使用 =SUM() 函数，我猜 phpExcel 和 excel 无法向后处理它......

# c++ - 使用 enable_if 检查成员是否存在

> ID：13786888
> 
> 赞同：32
> 
> 时间：2012-12-09T11:12:48.307
> 
> 标签：c++, templates, sfinae

这是我正在尝试做的事情：

```
template <typename T> struct Model
{
    vector<T> vertices ;

    #if T has a .normal member
    void transform( Matrix m )
    {
        each vertex in vertices
        {
          vertex.pos = m * vertex.pos ;
          vertex.normal = m * vertex.normal ;
        }
    }
    #endif

    #if T has NO .normal member
    void transform( Matrix m )
    {
        each vertex in vertices
        {
          vertex.pos = m * vertex.pos ;
        }
    }
    #endif
} ; 
```

我看过using 的[例子](https://stackoverflow.com/questions/11248173/enable-if-seems-to-work-outside-a-class-but-not-inside?rq=1)`enable_if`，但我不明白如何应用`enable_if`到这个问题，或者它是否可以应用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-09T12:51:21.837

使用 C++11，*这*变得更加容易。

```
template <typename T> struct Model
{
    vector<T> vertices;

    void transform( Matrix m )
    {
        for(auto &&vertex : vertices)
        {
          vertex.pos = m * vertex.pos;
          modifyNormal(vertex, m, special_());
        }
    }

private:

    struct general_ {};
    struct special_ : general_ {};
    template<typename> struct int_ { typedef int type; };

    template<typename Lhs, typename Rhs,
             typename int_<decltype(Lhs::normal)>::type = 0>
    void modifyNormal(Lhs &&lhs, Rhs &&rhs, special_) {
       lhs.normal = rhs * lhs.normal;
    }

    template<typename Lhs, typename Rhs>
    void modifyNormal(Lhs &&lhs, Rhs &&rhs, general_) {
       // do nothing
    }
}; 
```

注意事项：

*   您可以在不需要对象的情况下`decltype`命名非静态数据成员。`sizeof`
*   您可以申请扩展 SFINAE。基本上可以检查任何表达式，如果在替换参数时它无效，则忽略模板。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-11-10T14:04:29.603

我知道这个问题已经有了一些答案，但我认为我对这个问题的解决方案有点不同，可以帮助某人。

以下示例检查传递的类型是否包含`c_str()`函数成员：

```
template <typename, typename = void>
struct has_c_str : false_type {};

template <typename T>
struct has_c_str<T, void_t<decltype(&T::c_str)>> : std::is_same<char const*, decltype(declval<T>().c_str())>
{};

template <typename StringType,
          typename std::enable_if<has_c_str<StringType>::value, StringType>::type* = nullptr>
bool setByString(StringType const& value) {
    // use value.c_str()
} 
```

如果需要检查传递的类型是否包含特定的数据成员，可以使用以下方法：

```
template <typename, typename = void>
struct has_field : std::false_type {};

template <typename T>
struct has_field<T, std::void_t<decltype(T::field)>> : std::is_convertible<decltype(T::field), long>
{};

template <typename T,
          typename std::enable_if<has_field<T>::value, T>::type* = nullptr>
void fun(T const& value) {
    // use value.field ...
} 
```

**更新 C++20**

C++20 在这个 C++ 版本中引入了约束和概念，核心语言特性。

如果我们想检查模板参数是否包含`c_str`成员函数，那么，以下将完成工作：

```
template<typename T>
concept HasCStr = requires(T t) { t.c_str(); };

template <HasCStr StringType> 
void setByString(StringType const& value) {
    // use value.c_str()
} 
```

此外，如果我们要检查可转换为 的数据成员是否`long`存在，可以使用以下方法：

```
template<typename T>
concept HasField = requires(T t) {
    { t.field } -> std::convertible_to<long>;
};

template <HasField T> 
void fun(T const& value) {
    // use value.field
} 
```

通过使用 C++20，我们得到了更短、更易读的代码，清楚地表达了它的功能。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-09T11:35:11.310

您需要一个元函数来检测您的成员，以便您可以使用`enable_if`. 这样做的成语称为[Member Detector](http://en.wikibooks.org/wiki/More_C++_Idioms/Member_Detector)。这有点棘手，但可以做到！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-15T05:49:42.663

这不是对您的确切情况的答案，但它是对问题标题和一般问题的替代答案。

```
#include <iostream>
#include <vector>

struct Foo {
    size_t length() { return 5; }
};

struct Bar {
    void length();
};

template <typename R, bool result = std::is_same<decltype(((R*)nullptr)->length()), size_t>::value>
constexpr bool hasLengthHelper(int) { 
    return result;
}

template <typename R>
constexpr bool hasLengthHelper(...) { return false; }

template <typename R>
constexpr bool hasLength() {
    return hasLengthHelper<R>(0);
}

// function is only valid if `.length()` is present, with return type `size_t`
template <typename R>
typename std::enable_if<hasLength<R>(), size_t>::type lengthOf (R r) {
  return r.length();
}

int main() {
    std::cout << 
      hasLength<Foo>() << "; " <<
      hasLength<std::vector<int>>() << "; " <<
      hasLength<Bar>() << ";" <<
      lengthOf(Foo()) <<
      std::endl;
    // 1; 0; 0; 5

    return 0;
} 
```

相关[https://ideone.com/utZqjk](https://ideone.com/utZqjk)。

*归功于 freenode IRC #c++ 上的 dyreshark*。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-21T10:02:06.687

```
template<
typename HTYPE, 
typename = std::enable_if_t<std::is_same<decltype(HTYPE::var1), decltype(HTYPE::var1)>::value>
>
static void close_release
(HTYPE* ptr) {
    ptr->var1;
} 
```

使用 enable_if 和 decltype 让编译器检查变量，希望有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-05T06:14:00.160

我知道现在有点晚了，但是......

```
typedef int Matrix;

struct NormalVertex {
    int pos;
    int normal;
};

struct Vertex {
    int pos;
};

template <typename T> struct Model
{
    typedef int No;
    typedef char Yes;

    template<typename U> static decltype (declval<U>().normal, Yes()) has_normal(U a);
    static No has_normal(...);

    vector<T> vertices ;

    template <typename U = T>
    typename enable_if<sizeof(has_normal(declval<U>())) == sizeof(Yes), void>::type
    transform( Matrix m )
    {
        std::cout << "has .normal" << std::endl;
        for (auto vertex : vertices)
        {
          vertex.pos = m * vertex.pos ;
          vertex.normal = m * vertex.normal ;
        }
    }

    template <typename U = T>
    typename enable_if<sizeof(has_normal(declval<U>())) == sizeof(No), void>::type
    transform( Matrix m )
    {
        std::cout << "has no .normal" << std::endl;
        for (auto vertex : vertices)
        {
          vertex.pos = m * vertex.pos ;
        }
    }
} ;

int main()
{
    Matrix matrix;
    Model <NormalVertex> normal_model;

    Vertex simple_vertex;
    Model <Vertex> simple_model;

    simple_model.transform(matrix);
    normal_model.transform(matrix);

    return 0;
} 
```

# php - WordPress主题中的PHP变量到js变量

> ID：13786890
> 
> 赞同：2
> 
> 时间：2012-12-09T11:12:59.847
> 
> 标签：php, javascript, wordpress, variables

我正在使用 wordpress 主题，在管理控制面板中我添加了主题设置，在这里我可以编写一些变量，例如地图（作品）的经度和纬度，以及我需要的电子邮件联系表格，但这不起作用，我想问题是我使用

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/contact-form/contactform.js"></script> 
```

事实上，如果我对地图做同样的事情，那现在就是

```
<div id="gmapp"></div>
            <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
            <script type="text/javascript">
                var lat;
                var lng;
                lat=<?php echo($GLOBALS['desklab_theme_settings']['latcord_text']);?>;
                lng=<?php echo($GLOBALS['desklab_theme_settings']['lngcord_text']);?>;
                var latlng = new google.maps.LatLng(lat,lng);

                var options = {
                    zoom: 15,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };  

                var map = new google.maps.Map(document.getElementById('gmapp'), options);

                var marker = new google.maps.Marker(
                {
                    position: latlng,
                    map: map
                }
                );

            </script> 
```

我试着这样写：

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/contact-form/map.js"></script> 
```

但我没有看到地图，也没有找到变量。

那么我应该怎么做才能像使用 lat 和 lng 一样从设置中获取变量？我应该像使用map一样在php中编写js代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:26:22.260

您应该将部分代码移动到 map.js 文件中：

```
//map.js
var generateMap = function(lat,lng) {
  var latlng = new google.maps.LatLng(lat,lng);
  var options = {
         zoom: 15,
         center: latlng,
         mapTypeId: google.maps.MapTypeId.ROADMAP
  };  

  var map = new google.maps.Map(document.getElementById('gmapp'), options);

  var marker = new google.maps.Marker(
      {
         position: latlng,
         map: map
       }
  );
} 
```

从你的 php 中，做

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/contact-form/map.js"></script>
<script type="text/javascript" >
  var lat=<?php echo($GLOBALS['desklab_theme_settings']['latcord_text']);?>;
  var lng=<?php echo($GLOBALS['desklab_theme_settings']['lngcord_text']);?>;
  generateMap(lat,lng);
</script> 
```

有关从 PHP 到 JS 的数据传递的其他解决方案，请参阅[此 SO 问题](https://stackoverflow.com/questions/5310216/passing-php-variable-into-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:26:43.880

您需要将 map.js 文件重命名为 map.php 之类的文件，以便 PHP 引擎解析它。那么您的来源将是：

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/contact-form/map.php"></script> 
```

内容仍然是带有您的 PHP 变量的 javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:43:35.027

一个建议。而不是使用`bloginfo('template_url')`你应该开始使用`get_template_directory_uri()`，因为以前的被弃用了。

PS。除非我回复帖子，否则我没有评论权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T12:22:14.547

不要忘记回声

```
<script type="text/javascript" src="<?php echo bloginfo('template_url'); ?>/contact-form/map.js"></script> 
```

# grammar - 如何以任何顺序为多个标签声明语法规则？

> ID：13786896
> 
> 赞同：0
> 
> 时间：2012-12-09T11:13:41.060
> 
> 标签：grammar, bison

我正在尝试为一种格式化语言编写一个编译器。这种语言有一个开始和结束属性以及一组文档和文本属性。第一个只是文档本身的信息，而第二个是实际文档（标题，段落，列表......通常）。第一个集合必须始终遵循 start 属性，并且必须包含所有属性，但按用户可能喜欢的任何顺序。

假设我的属性标记是 PROP1、PROP2、PROP3 和 PROP4，我可以对所有属性使用递归和 OR，以便用户可以定义他想要的任何文档属性。

```
doc_properties
    : /* empty */
    : doc_properties property  
    ;
property
    : PROP1
    : PROP2
    : PROP3
    : PROP4
    ; 
```

但是我如何让他定义它们，而且只定义一次。我认为的一种方法（我想避免的简单而粗暴的方法）是因为我只有 4 个文档属性，我可以制作一个或所有可能的组合。我很确定还有另一种方法。有什么帮助吗？

到目前为止，我的语法非常简单而且很小

```
%{ /* C Stuff */ %}

/* union and error stuff and tokens */

%%

source
    : /* empty */  
    | entry_point doc_properties txt_properties exit_point
    ;

entry_point
    : SLASH BLOCK_S LBRACE DOC RBRACE 
    ;

doc_properties 
    : /* This is where my question goes */  
    ;

txt_properties
    : /* empty */  
    ;

exit_point
    : SLASH BLOCK_E LBRACE DOC RBRACE
    ;

%%

int main (int argc, char* argv[])
{
    /* various checks for the arguments and the input output files */

        yyin = fopen(argv[1], "r");
        yyout = fopen(fn, "w");     
        //do{
            yyparse();
        //}while(!feof(yyin));
        fclose(yyin);
        fclose(yyout);

    return 0;
}

void yyerror(const char* str) {
    fprintf(stderr,"syntax error[%d]: %s\n",yylineno, str);
} 
```

同样在不相关的注释中，在 do-while 循环中使用 yyparse() 或仅使用一次本身有什么区别吗？因为我看到它是双向的，而 do-while 循环对我来说更有意义（因为它请求一个令牌解析然后再次）我不确定该函数是否重复自身或什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:58:36.620

有许多语法规则最好通过语义检查而不是语法本身来执行。例如，在类似 C 的语言中，该`break`构造只能出现在循环（和 switch）中，但是像任何常规语句一样接受它要简单得多，然后*在*语义分析过程中，拒绝对​​ 的无效使用`break`。

您可以使用类似的模式：接受 的任何组合`PROP`，然后拒绝那些不尊重您的约束的组合。当然，你也可以在解析时这样做，`YYERROR`在适当的时候使用来引发错误。

对于您的第二个问题，`yyparse`只调用一次，但当然它负责`yylex`重复调用扫描仪（）。请注意，Bison 提供“push-parsers”，*您*负责`yylex`重复调用，并将其结果传递给`yyparse`（也重复）。有关详细信息，请参阅[http://www.gnu.org/software/bison/manual/bison.html#Push-Decl 。](http://www.gnu.org/software/bison/manual/bison.html#Push-Decl)

# php - Facebook PHP：SDK 和无 SDK 的区别

> ID：13786898
> 
> 赞同：0
> 
> 时间：2012-12-09T11:14:21.917
> 
> 标签：php, facebook, sdk

这似乎是一个愚蠢的问题，但请多多包涵。

我已经看到 Facebook PHP 示例通过调用`https://graph.facebook.com/xxxxxx`和检查响应而不包括`require_once`文件`facebook.php`和实例化`$facebook`对象来工作。

然后我看到了其他 PHP 示例，它们首先包含`require_once`文件`facebook.php`并实例化一个`$facebook`对象，然后使用这个对象代替调用`https://graph.facebook.com/xxxxxx`.

有什么不同？这仅仅是实现同一件事的两种不同方法吗？哪个是首选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:39:05.700

如果您的应用程序需要用户登录，则使用 PHP SDK 会更容易，因为它一次调用即可处理所有登录步骤，但如果您只想检索公共数据，两种方法都可以。

# javascript - Javascript : 使用 javascript 检查本地文件是否存在

> ID：13786901
> 
> 赞同：0
> 
> 时间：2012-12-09T11:14:38.670
> 
> 标签：javascript

```
var req = new XMLHttpRequest();  
req.open('GET', '20121209.xml', false);   
req.send(null);  
if(req.status == 0)
{ 
//file exist
} 
```

我想使用javascript检查本地机器中是否存在文件。所以我写了上面的代码。我可以检查文件何时存在，但我无法检查文件何时不存在。

最后我想在文件不存在时做点什么。我可以这样做吗？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T11:16:41.443

Javascript 在执行它的浏览器中被沙盒化，如果 JS 是从非本地位置提供的，它就无法访问客户端的本地文件系统。执行您列出的操作将请求

```
http://website.js.is.on.com/20121209.xml 
```

# ios6 - 为什么删除这些约束不会导致模棱两可的布局异常？

> ID：13786903
> 
> 赞同：1
> 
> 时间：2012-12-09T11:14:52.710
> 
> 标签：ios6, autolayout

在一个viewcontroller的视图对应的XIB文件中，在Autolayout开启的情况下，我拖出一个按钮并将其放置在任意位置，这样Interface Builder就会自动在按钮和它的superview之间生成垂直和水平间距约束（即VC的看法）。在视图控制器 .m 文件中，我为这两个约束创建 IBOutlets，并在 viewDidLoad 方法中，将它们从 VC 的视图中移除`[self.view removeConstraint:self.vConstraint]`等。（不，我没有忘记建立出口连接）

在运行该应用程序时，我希望 Xcode（版本 4.5.1，如果这很重要）会抱怨布局模棱两可，但令人惊讶的是（对我而言），事实并非如此。

那么按钮框架的原点是如何计算的呢？该按钮确实出现在其在 Interface Builder 中放置的位置的超级视图中，但我想确切地知道 Autolayout 在这种情况下正在做什么（最好参考官方文档）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T14:49:39.253

It seems difficult to find exact documentation or other references on this. A look at [Florian Kugler's](https://twitter.com/floriankugler) page on the [Advanced Auto Layout Toolbox](http://www.objc.io/issue-3/advanced-auto-layout-toolbox.html) had some great information. As I thought this was an interesting question I did some digging around.

I set up a test project with a `UIButton` `myButton` setup in the Xib and a couple of space constraint outlets:

```
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *hSpaceConstraint;
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *vSpaceConstraint; 
```

As you stated, removing these constraints in `viewDidLoad` had no effect. Even outputting `[self.myButton hasAmbiguousLayout]` immediately after removing the constraints in `viewDidLoad` shows false.

However, by `viewDidAppear`, things have changed. `myButton` is correctly flagged as ambiguous by both `hasAmbiguousLayout` and also by doing an Auto Layout trace in lldb:

```
(lldb) po [[UIWindow keyWindow] _autolayoutTrace]

*<UIWindow:0x8a94fe0> - AMBIGUOUS LAYOUT
|   *<UIView:0x8c55340>
|   |   *<UIRoundedRectButton:0x8c54100> - AMBIGUOUS LAYOUT
|   |   |   <UIImageView:0x8c54580>
|   |   |   <UIButtonLabel:0x8c595a0>
(lldb) 
```

At this stage, we can also exercise the ambiguity:

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self.myButton exerciseAmbiguityInLayout];
} 
```

Without exercising: ![enter image description here](../Images/7511b8206c9917f15dbd16b3d6ed2c0d.png) Exercising: ![enter image description here](../Images/869f76d22d14916a0ae7f595f37fb88f.png)

There's nothing on the console either. That surprised me as I'm used to Auto Layout splurging a ton of constraint exceptions at the first sign of trouble.

Investigating that, a quick [search here on SO](https://stackoverflow.com/questions/18977380/ios7-empty-autolayout-layout-already-ambiguous) revealed that

> "ambiguity can be temporarily tolerated (unlike unsatisfiability, which immediately raises an exception)"

So that explains the clear console, at least for now.

To conclude then, I believe that by the time `viewDidLoad` executes, a measure, layout, and display pass has already occurred. Removing the constraints then renders the view ambiguous. Auto Layout then does the common sense thing on a view that it no longer knows how to layout; *nothing*. The view remains in situ.

# wcf - WCF 服务调用在 Intranet 中正常工作，但在 Internet 中不能正常工作

> ID：13786904
> 
> 赞同：0
> 
> 时间：2012-12-09T11:15:05.183
> 
> 标签：wcf, silverlight, iis

我已经使用 Silverlight 应用程序一个多月了，并且偶然发现了一个奇怪的问题。我有一个在 IIS 中运行的 WCF 服务，可从以下 URL 访问： [https ://xyztestname.com/service1.svc](https://xyztestname.com/service1.svc)

我能够在 Visual Studio 中使用它，当从 Visual Studio 部署时，能够从 WCF 服务获得正确的回调，并且一切正常。当我将包文件部署到与 IIS 中的 Service1.svc 相同的文件夹中时，WCF 服务没有正确命中。

请帮我解决这个问题:(！这是我的 web.config 文件。

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
 http://go.microsoft.com/fwlink/?LinkId=169433
-->
<configuration>
<system.web>
<compilation debug="true" targetFramework="4.0" />
<customErrors mode="Off"/>
</system.web>
<system.serviceModel>
<bindings>
<basicHttpBinding>
 <binding name="BasicHttpEndpointBinding">
 <security mode="TransportCredentialOnly">
 <transport clientCredentialType="None" />
</security>
</binding>
</basicHttpBinding>
</bindings>
<services>
<service name="InformationService.Service1">
<endpoint address="" binding="basicHttpBinding"     bindingConfiguration="BasicHttpEndpointBinding"
name="BasicHttpEndpoint" contract="InformationService.IService1">    
</endpoint>    
</service>
</services>
<behaviors>
<serviceBehaviors>
<behavior name="">
 <serviceMetadata httpGetEnabled="true" />
<serviceDebug includeExceptionDetailInFaults="false" />
</behavior>
</serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
</configuration> 
```

我不知道我哪里出错了。但是通过 Intranet 访问时相同的虚拟文件夹可以正常工作，但通过 Internet 访问时无法正常工作:(请帮助。

**编辑：** 检查客户端配置后，我发现 Visual Studio 自动将 URL 解析为 Intranet URL。当我改回 Internet URL 时，我收到了一个异常。

尝试向 URI 'https://xyztestname.com/Service1.svc' 发出请求时发生错误。这可能是由于在没有适当的跨域策略或不适合 SOAP 服务的策略的情况下尝试以跨域方式访问服务。您可能需要联系服务的所有者以发布跨域策略文件并确保它允许发送与 SOAP 相关的 HTTP 标头。此错误也可能是由于在 Web 服务代理中使用内部类型而不使用 InternalsVisibleToAttribute 属性造成的。有关更多详细信息，请参阅内部异常。

但是，我已将跨域和 clientaccesspolicy 文件复制到 IIS 中应用程序的根目录中。：（ 请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:35:49.747

您必须将应用程序部署到特定的 ip 和端口才能在 Internet 中使用它。我想你可以。

为此，您需要手动编辑 applicationhost.config 文件（编辑 bindingInformation '::'）

要启动 iisexpress，您需要管理员权限

```
1 – Bind your application to your public IP address 
```

通常，当您在 IIS Express 中运行应用程序时，只能在 http://localhost:[someport] 上访问它。为了从另一台机器访问它，它也需要绑定到您的公共 IP 地址。打开 D:\Users[YourName]\Documents\IISExpress\config\applicationhost.config 并找到您的站点。你会发现这样的东西：

```
 <site name="YOUR PROJECT NAME HERE" id="2">
     <application path="/"> 
     <virtualDirectory path="/" physicalPath="YOUR PHYSICAL PATH HERE"
             <binding protocol="http" bindingInformation="*:58938:localhost" />
    </bindings>
</site> 
```

在 中，添加另一行：

```
 <binding protocol="http" bindingInformation="*:58938:192.168.1.42" /> 
```

（但当然是你的 IP 和端口号）

```
 2 - Allow incoming connections 
```

如果您运行的是 Windows 7，则几乎所有传入连接都被锁定，因此您需要专门允许到您的应用程序的传入连接。首先，启动管理命令提示符。其次，运行这些命令，将 192.168.1.42:58938 替换为您使用的任何 IP 和端口：

> netsh http 添加 urlacl url=http://192.168.1.42:58938/ user=everyone

这只是告诉 http.sys 可以与此 url 交谈。

> netsh advfirewall 防火墙添加规则名称="IISExpressWeb" dir=in 协议=tcp localport=58938 profile=private remoteip=localsubnet action=allow

这会在 Windows 防火墙中添加一条规则，允许本地子网上的计算机到端口 58938 的传入连接。

到这里，您现在可以在 Visual Studio 中按 Ctrl-F5，然后从另一台计算机浏览您的站点！

# ruby-on-rails - 安装 ruby racer 时出错

> ID：13786905
> 
> 赞同：2
> 
> 时间：2012-12-09T11:15:15.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, therubyracer

捆绑安装我的更新时收到错误消息。这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'libv8'
gem 'therubyracer'
gem 'haml'
gem 'haml-rails'
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'compass-rails'
gem 'chosen-rails'
gem "bootstrap-wysihtml5-rails", "~> 0.3.1.10"
gem 'hpricot'
gem "rest-open-uri", "~> 1.0.0"
gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'

# Gems used only for assets and not required
# in production environments by default.
group :assets do

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
  gem "commonjs", "~> 0.2.6"
  gem "less", "~> 2.2.2"
  gem "less-rails", "~> 2.2.6"
end

gem 'jquery-rails'
gem 'simple_form'
gem 'client_side_validations'
gem 'client_side_validations-simple_form'

# To use ActiveModel has_secure_password
gem 'bcrypt-ruby', '~> 3.0.0' 
```

这是我在生产中运行 bundle install 命令后遇到的错误：

> 安装 ruby​​racer (0.11.0) 时出错，Bundler 无法继续。`gem install therubyracer -v '0.11.0'` 在捆绑之前确保成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T00:36:04.167

我做了以下对我有用的事情：

*   我从我的 Gemfile 中注释掉了 therubyracer
*   运行“捆绑安装”
*   使用“gem install therubyracer”安装了最新版本的 therubyracer（在撰写本文时为 0.11.2）
*   我取消注释 therubyracer 以将其放回我的 Gemfile
*   再次运行“捆绑安装”，一切正常

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T05:45:06.807

包括似乎是对此的修复`libv8`：`Gemfile`

```
gem 'libv8', '~> 3.11.8.3' 
```

通过[https://github.com/cowboyd/therubyracer/issues/215](https://github.com/cowboyd/therubyracer/issues/215)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T19:24:08.197

我做了一个 gem 卸载 therubyracer 和 gem 卸载 libv8，然后从 gemfile 中删除 libv8 并只使用 therubyracer，然后运行“捆绑安装”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T11:45:59.667

```
group :assets do
  gem 'therubyracer'
end 
```

如果它仍然不起作用，只需尝试安装 NodeJS

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-09T13:00:33.843

可能，您的 libv8 版本和 therubyracer 版本不匹配。

因此，您可以在 Gemfile 中包含正确的 libv8 版本，这类似于 jibiel 的解决方案

```
gem 'libv8', '~> 3.11.8.3' 
```

但是，我更愿意执行这两个步骤，因此，您不必担心找到合适的 libv8 版本：

`Gemfile`

```
gem 'therubyracer' 
```

`terminal`

```
gem uninstall libv8
bundle install 
```

而且，这就是我为解决同样的问题所做的

# json - 登录 json

> ID：13786907
> 
> 赞同：2
> 
> 时间：2012-12-09T11:15:33.287
> 
> 标签：json, logging, log4j

我想从 Java 中以 json 格式记录消息。我想要像 log4j 这样的专业日志记录的便利性，用于分层记录器和方法名称，但我也想在 json 对象中输出其他键值名称。

我正在寻找与此类似的输出：

```
{ 'time':'123' , level:'debug', action: 'open',filename:'bla.txt'}

{ 'time':'432' , level:'info', action: 'calculate',result:'353'} 
```

如果我使用 log4j 并重新格式化，我无法在与记录值相同的对象中获取自动值（例如时间戳）。

是否有日志框架或插件来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T00:47:35.247

我开始使用这个项目效果很好

[https://github.com/michaeltandy/log4j-json](https://github.com/michaeltandy/log4j-json)

# iphone - 为什么旋转 imageView，它会改变位置？

> ID：13786908
> 
> 赞同：0
> 
> 时间：2012-12-09T11:15:34.440
> 
> 标签：iphone, uiimageview, frame, nslog

当我使用时： ImageView.transform = CGAffineTransformRotate(ImageView.transform, rotation); 每次我旋转 imageView 和 NSLog(@"x:%fy:%f", ImageView.frame.orgin.x, ImageView.frame.orgin.y)，x 和 y 总是改变值？？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:24:43.803

UIView[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)指出

> 警告：如果此属性不是恒等变换，则 frame 属性的值未定义，因此应被忽略。

关于 UIView 的转换属性。由于您正在分配转换，因此很可能不再是身份转换，因此帧值未定义，应该被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:20:36.133

那么这`.frame.origin`是你的左上角，`UIImageView`因为你正在旋转它，所以左上角正在移动。如果您访问`.center`它应该保持不变。

# facebook - Refused to connect to [url] because it violates the following Content Security Policy directive

> ID：13786918
> 
> 赞同：8
> 
> 时间：2012-12-09T11:18:22.953
> 
> 标签：facebook, google-chrome, google-chrome-extension, content-security-policy

I am the author of a Chrome extension that allows to translate status updates and comments right on Facebook: [https://chrome.google.com/webstore/detail/facebook-translate/plofenifjagmdikfcobngnfmmnfmphin](https://chrome.google.com/webstore/detail/facebook-translate/plofenifjagmdikfcobngnfmmnfmphin)

For some days now, my users and me are getting an error in the error console that sais:

> Refused to connect to '[https://api.microsofttranslator.com/V2/Http.svc/Translate?appId=&text=Chrome-Integration%3A+Google+bringt+Google+Now+auf+Desktop-PCs&to=en&contentType=text%2Fhtml](https://api.microsofttranslator.com/V2/Http.svc/Translate?appId=&text=Chrome-Integration%3A+Google+bringt+Google+Now+auf+Desktop-PCs&to=en&contentType=text%2Fhtml)' because it violates the following Content Security Policy directive: "connect-src https://*.facebook.com http://*.facebook.com https://*.fbcdn.net http://*.fbcdn.net *.facebook.net *.spotilocal.com:* https://*.akamaihd.net ws://*.facebook.com:* http://*.akamaihd.net".

In my chrome extension I did set the content security policy as follow:

> "content_security_policy": "script-src 'self' [https://ssl.google-analytics.com](https://ssl.google-analytics.com); object-src 'self'"

The URIs in the error console, however, are FB URIs only so that's why I'm thinking Facebook did update their site to restrict access to remote URIs. I'm not certain if it could be a Chrome issue, so sorry if I started the topic on the wrong stackoverflow network. :)

Can anyone confirm (and maybe point me to a possible solution for) this issue? Thanks everyone!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T12:32:15.417

Extensions *should* bypass a page's Content Security Policy when executing XMLHTTPRequest from a content script. They currently aren't, which is a bug. I've filed [https://bugs.webkit.org/show_bug.cgi?id=104480](https://bugs.webkit.org/show_bug.cgi?id=104480) to take a look at fixing it.

Are you executing XHR from your extension's content script, or are you executing it in the background page? The latter should work right now.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T11:36:34.073

The error message says your are trying to connect to 'https://api.`microsofttranslator`.com/ domain which is not specified in [**connect-src**](http://www.html5rocks.com/en/tutorials/security/content-security-policy/#policy-applies-to-a-wide-variety-of-resources) of CSP Directive

It seems you have listed

```
"connect-src 
            https://.facebook.com 
            http://.facebook.com 
            https://.fbcdn.net 
            http://.fbcdn.net *.facebook.net .spotilocal.com: 
            https://.akamaihd.net ws://.facebook.com:* 
            http://*.akamaihd.net". 
```

the above domains for [**connect-src**](http://www.html5rocks.com/en/tutorials/security/content-security-policy/#policy-applies-to-a-wide-variety-of-resources) policy, add the new domain `microsofttranslator`.com if it is valid.

Let me know if you need more information.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-12T09:29:10.713

i had this problem out of the blue

paused ad-blocker on the domain, and now it works

# c++ - C/C++：char[] 到 int 的转换失败，unsigned char[] 到 int 有效，为什么？

> ID：13786921
> 
> 赞同：1
> 
> 时间：2012-12-09T11:18:59.787
> 
> 标签：c++, c, serialization, file-io, type-conversion

我还没有找到回答这种确切行为的问题，不知何故我只是不明白发生了什么：

我将 Windows 位图文件 (bmp) 的内容读入一个数组，稍后使用该数组提取所需信息：

```
char biHeader[40];
// ...
source.read(biHeader,40);
// ...
int biHeight = biHeader[8] | (biHeader[9] << 8) | (biHeader[10] << 16) | (biHeader[11] << 24); 
```

在此之后，`biHeight`显示`-112`哪个是完全错误的，因为它应该是`400`。因此，我查看了文件的 hexdump。读取的内容是：

```
90 01 00 00 
```

正如预期的那样，将字节顺序更改为大端会给出`0x190`十进制`400`。

如果我将上面的代码更改为：

```
unsigned char biHeader[40];
// ...
source.read((char*)biHeader,40);
// ...
int biHeight = ... (same as before) 
```

...然后我得到预期值。这里发生了什么？

并且：您将如何读取这些数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T11:22:49.187

作为有符号的 8 位二进制补码整数，`0x90`是`-112`. 当它转换`int`为 时`|`，它的值被保留。由于如果表示是二进制补码，则从第七位开始的所有位都已设置，因此按位或将值左移至少八位不再更改该值。

作为一个无符号的 8 位整数， 的值为`0x90`144，一个正数，没有超出`2^7`位集的位。然后，按位或 with`biHeader[9] << 8`将值更改为所需的`144 + 256 = 400`.

当使用按位运算符时，（几乎）总是使用无符号类型，有符号类型通常会导致令人不快的意外（如果移位结果超出范围或负整数左移，则会出现未定义的行为）。

# jsp - 从 JSP 页面更新数据库条目

> ID：13786925
> 
> 赞同：2
> 
> 时间：2012-12-09T11:19:42.720
> 
> 标签：jsp, tomcat, servlets

我的 JSP/Servlet/EclipseLink-JPA 项目遇到了一些奇怪的问题。我直接从 NetBeans (EE pack) 7.2.1 在 Apache Tomcat 7.0.27.0 上运行，数据库是 PostgresSQL
这里有一些代码：
jsp 页面负责显示产品表，index.jsp：

> ```
> <%
>             for(Product product:ProductController.getProducts()){
>                 %><tr>
>                     <td><%
>                     out.print(product.getName());
>                                            %></td>
>                     <td><%
>                     out.print(product.getPrice());
>                                             %></td>
>                     <td><%
>                     out.print(product.getUnit());
>                                            %></td>
>                     <td><%
>                     out.print(product.getSales().size());
>                                            %></td>
>                     <td><a target=\"_blank\" href="viewSales.jsp?id=<%=product.getId_product()%>">sales</a> </td>
>                     <td>
>                         <a target="_blank" href="updateProduct.jsp?id=<%=product.getId_product()%>&name=<%=product.getName()%>&price=<%=product.getPrice()%>&unit=<%=product.getUnit()%>">edit</a>
>                     </td>
>                 </tr><%
>             }
>         %> 
> ```

最后一个单元格中的两个链接用于查看销售情况并相应地更新产品。我们对最后一个感兴趣，导致另一个jsp：

```
<form action="UpdateProduct" method="post">
            <input type="text" name="id" style="display:none" value="<%=request.getParameter("id") %>">            
            <input type="text" name="name" size="30" placeholder="Название" value="<%=request.getParameter("name")%>"><br>
            <input type="text" name="price" size="30" placeholder="Цена" value="<%=request.getParameter("price")%>"><br>
            <input type="text" name="unit" size="30" placeholder="Единица" value="<%=request.getParameter("unit")%>"><br>
            <input type="submit" name="save" value="Сохранить">
        </form> 
```

从这里我们将转到 servlet UpdateProduct.java：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        Long id = Long.parseLong(request.getParameter("id"));
        String name = request.getParameter("name");
        double price = Double.parseDouble(request.getParameter("price"));
        String units = request.getParameter("unit");            
        ProductController.updateProduct(id, name, price, units);

        response.sendRedirect("");
    } finally {            
        out.close();
    }
} 
```

ProductcController.updateProduct 工作正常（我可以直接在数据库中看到它）。

但是当我返回第一页（index.jsp）时，无论我刷新多少次，我都看不到任何变化。我最接近的猜测是Apache Tomcat（我正在运行它）以某种方式将来自第一个请求的数据保存在上下文中的某处，并且不会按需刷新它。此外，奇怪的是添加产品效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:19:46.463

通过在显示之前刷新每个产品来解决问题

```
List products = em.createQuery("SELECT p FROM Product p ORDER BY p.id_product").getResultList(); 
    for(Object product:products){ 
    em.refresh(product);
     } 
```

我想它可以通过保存更新的产品 id 并仅刷新它们来改进。

问题的根源是未知的，因为在其他实现相同但使用swing GUI的项目中，一切正常，无需刷新。也许这与在 Tomcat 上执行类有关。

# php - 通过 PHP 代码打印 Python 输出

> ID：13786926
> 
> 赞同：10
> 
> 时间：2012-12-09T11:19:49.153
> 
> 标签：php, python, scraper

我有一个刮刀可以刮取一个网站（用 python 编写）。在抓取网站时，打印即将用 CSV 写入的行。Scraper 是用 Python 编写的，现在我想通过 PHP 代码执行它。我的问题是

> 如何打印由 python 代码打印的每一行。

我使用了 exec 函数，但它对我没有用，并在执行所有程序后给出输出。所以;

> 是否可以在通过 PHP 执行时打印 python 输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:18:15.770

如果我理解得很好，你的 python**刮板**输出到一个文件，你想“活”通过 php 显示输出。在使用[filemtime](http://php.net/manual/en/function.filemtime.php)知道文件是否已更新的 php 中执行和循环怎么样？您可能会添加一点[睡眠](http://php.net/manual/en/function.sleep.php)，以免服务器超载。

如果您使用的是网页，则可以使用 AJAX 定期重新加载页面的相关部分。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:33:47.077

简单案例

假设scraper的执行仅限于php运行时，通过popen运行它：http: [//php.net/manual/en/function.popen.php](http://php.net/manual/en/function.popen.php)

更多涉案案例

如果您希望刮板在后台运行并且仅不时通过 php 连接到它，您可以使用一些 pub/sub 工具包或在刮板中实现一个小型 Web 服务器，您可以使用 fopen("https: //localhost:port/...") 或 curl。许多其他 rpc 机制是可能的，域套接字、监视文件、sysv rpc...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:19:04.723

我想我对你在说什么有一个公平的想法，但我不太确定你的意思。

如果您的意思是说每次 python 脚本执行打印时，您希望 php 代码输出打印的内容？

如果是这种情况，您可以通过 HTTP 将其作为 POST DATA 传递。也就是说，您可以将其发送到 PHP 脚本，而不是在 Python 中打印，该脚本会在接收到数据时将其打印出来。

我不太确定这是否是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:02:01.023

我会使用标准输出而不是文件进行通信。这意味着 python 脚本写入标准输出，而 php 脚本读取它。

使用[proc_open](http://php.net/manual/en/function.proc-open.php)您可以从 php 控制 python 进程并读取它的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T11:19:05.883

而不是使用`exec` 你可以使用`passthru`，它将数据直接输出到浏览器。[http://php.net/manual/en/function.passthru.php](http://php.net/manual/en/function.passthru.php)

这应该足以从您的脚本中获取 println 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T12:04:49.630

只需使用`system()`而不是`exec()`. `exec()`将外部程序的所有标准输出行保存到一个数组中，但`system()`“在发生时”刷新标准输出输出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T19:19:36.933

为了进行正确的通信，您需要设置任何介质，因此您可以使用 fifo，通过它您可以在 python 中编写字符串并使用 php 读取它。

对于 PHP fifo [http://php.net/manual/en/function.posix-mkfifo.php](http://php.net/manual/en/function.posix-mkfifo.php)

对于 Python [http://www.doughellmann.com/PyMOTW/Queue/](http://www.doughellmann.com/PyMOTW/Queue/)

# python - 复杂计算中的浮点精度

> ID：13786927
> 
> 赞同：0
> 
> 时间：2012-12-09T11:20:00.200
> 
> 标签：python, floating-point, ieee-754, floating-point-precision

为了计算加泰罗尼亚数字，我写了两个代码。一 (def "Catalan") 递归工作并返回正确的加泰罗尼亚数字。

```
dicatalan = {} 
def catalan(n):
if n == 0:
    return 1
else: 
    res = 0
    if n not in dicatalan:
        for i in range(n):
            res += catalan(i) * catalan(n - i - 1)
        dicatalan[n] = res
return dicatalan[n] 
```

另一个 (def "catalanFormula") 应用隐式公式，但从 n=30 开始计算不准确。问题源于浮点 - 对于 k=9，程序返回“6835971.999999999”而不是“6835972”，并且从这一刻起累积错误直到最终错误答案。

（打印线用于检查）

```
def catalanFormula(n):
result = 1
for k in range(2, n + 1):
    result *= ((n + k) / k)
    print (result)
return int(result) 
```

我尝试了四舍五入但失败了，尝试了十进制导入，但仍然一无所获。

我需要“catalanFormula”完美地像“catalan”一样工作；有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:38:48.943

尝试分别计算分子和分母，最后除以它们。如果你这样做，你应该能够用浮点使它更远一点。

我确信 Python 有一个用于有理数的包。使用理性是一个更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:36:02.840

请参阅[bigfloat](http://packages.python.org/bigfloat/)包。

```
from bigfloat import *

setcontext(quadruple_precision)
def catalanFormula(n):
    result = BigFloat(1)
    for k in range(2, n + 1):
        result *= ((BigFloat(n) + BigFloat(k)) / BigFloat(k))
    return result

catalanFormula(30) 
```

输出：

```
BigFloat.exact('3814986502092304.00000000000000000043', precision=113) 
```

# java - 通过 Internet 将文件从 PC/Mac 传输到网络的最佳方式是什么？

> ID：13786929
> 
> 赞同：1
> 
> 时间：2012-12-09T11:20:43.713
> 
> 标签：java, windows, macos, browser, upload

我的公司需要一个通过 Internet 浏览器（例如 Chrome、Safari 或 IE）将文件 PC/Mac 传输到网络的程序。我们决定用 JavaFX 编写这个应用程序，以便我们可以在每个平台上使用它。文件长度太大（其中一些接近 5-7 GB），所以我们不能使用 HTTP。

这是正确的方法还是您想提供不同的东西？

# c# - 在 C# 中使用用 Regex 替换某些组将程序集转换为 C

> ID：13786930
> 
> 赞同：-1
> 
> 时间：2012-12-09T11:20:54.523
> 
> 标签：c#, c, regex, assembly

我想将 asm 转换为 c（程序集到 C）我在 web 上看到[http://www.textmaestro.com/InfoEx_17_Convert_Assembly.htm](http://www.textmaestro.com/InfoEx_17_Convert_Assembly.htm) （请查看页面）页面，之后我很容易尝试使用查找和替换来完成这项工作C# 中的正则表达式

我不是计算机专业的学生，​​所以我不是 Regex 的专业人士。我工作了 5 天，现在我知道我不能这样做。我写了很多代码，但没有任何成功示例程序：mov r1,1; 移动 r2,2; 转换为：r1=1；r2=2；请帮我正确地做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:48:32.650

OP（痛苦地）了解到，正则表达式不是解决涉及软件分析或翻译的问题的好方法。处理字符串与构建具有复杂结构的文本的上下文相关分析不同。

人们不断地重新学习这一课。的确，您可以使用重复的正则表达式来模拟 Post 重写系统，并且 Post 系统具有图灵能力，在技术上可以做任何事情。确实没有人真正想要，或者更重要的是，没有人可以为真正的图灵机 [或等效的 Post 系统] 编写非常复杂的程序。这就是我们拥有所有其他计算机语言和工具的原因。[OP 所指的 TextMaestro 系统正试图完全成为 Post 系统。]

然而，他想做的任务是可能的，并且使用适当的工具是可行的：[程序转换系统（PTS）](http://en.wikipedia.org/wiki/Program_transformation)。

特别是，他应该看到这篇技术论文，以准确描述如何使用一个特定的 PTS 做到这一点：看到[来自香肠的猪吗？通过 FermaT 转换从汇编程序重新设计为](http://dl.acm.org/citation.cfm?id=1034998)C。这种工具实际上是从汇编源代码到目标语言的自定义编译器，包括解析、名称（标签）解析、通常是数据流分析以及复杂的代码生成和优化。使用 PTS 是因为它们使构建这种编译器相对容易。该工具至少已用于英特尔汇编到 C，大型机（系统 360/370/Z）汇编到 C，用于大规模任务。（我与这个工具没有关系，但对作者非常尊重）。

评论中的反对者似乎认为这是不可能做到的，除非在极其有限的情况下。诚然，对汇编代码的习语了解越多，这就越容易，但本文中的技术方法无论如何都不限于特定的编译器输出。确实，真正晦涩难懂的汇编代码（尤其是自修改或具有运行时代码生成）极难翻译。

# java - Java 数据结构数组列表与链表

> ID：13786931
> 
> 赞同：-2
> 
> 时间：2012-12-09T11:21:01.233
> 
> 标签：java, data-structures

我有一个随机生成的数字列表，并希望将它们存储在一个结构中，然后按照它们生成的顺序将它们从结构中删除。

所以，我需要一个最好先删除的数据结构。

链表和数组列表都删除了 O(1)

这个比那个好吗？如果有，以什么方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T11:38:38.580

在 Java 中，`LinkedList`类实现了`Queue`接口。这意味着它作为一个队列工作。如果你使用`.add()`，你会把东西放在列表的末尾（队列），如果你使用`.remove()`，你会把东西从列表的头（队列）拉出来。

从 an 中检索`ArrayList`是 O(1)，但删除不是。考虑以下：

```
ArrayList<Integer> al = new ArrayList<Integer>();
al.add(1);
al.add(2);
al.add(3); 
```

您的清单`al`现在是`{1, 2, 3}`。

你现在做：`al.remove(0)`

之后，`al`就是`{2, 3}`。但要做到这一点，一旦你删除了列表的头部，头部*之后*的所有其他对象都需要向下移动一个单位。所以实际上是 O(n)。如果要移除尾部，则移除时间仅为 O(1)。但是您每次都需要移除头部。

# printing - 打印中缺少 twitter 引导程序图标

> ID：13786932
> 
> 赞同：5
> 
> 时间：2012-12-09T11:21:07.740
> 
> 标签：printing, twitter-bootstrap, icons, glyphicons

当我点击“打印”时，字形图标丢失，但在浏览器窗口中正确显示。我说的是一个带有静态内容的简单页面，除了最新的 twitter 引导程序。

是否可以在打印中显示 Bootstrap 图标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-28T23:58:48.383

# 完整的 CSS 解决方案

我已经编写了一个 CSS 打印样式表解决方案，该解决方案应该解决 80-90% 的问题，这些问题发生在需要引导程序中的图标（字形图标）在打印时显示而无需用户在浏览器中打开“打印背景图像”的网站该解决方案适用于***所有主流浏览器（Chrome、Safari、Firefox、IE）***。

该解决方案详细参考了引导程序问题，但应该可以将其用于其他类似的背景图像问题，在需要时不打印。它还假设您使用的是单独的`@media print {}`样式表。我将解释它无法解决的 10-20% 的情况以及最后的原因（以及对这些情况的修复）。

和 和属性专门用于定位和调整精灵图像的问题通过替换为、 和属性`background-image`以及一些覆盖来解决。`background-position``width height``content: url()``clip: rect()``margin-top``margin-left`

就我而言，我们使用`<i class="icon-globe"></i>`来显示国际可用课程的链接，因此用户经常打印此列表，但重要的指示信息已被浏览器删除。我找到了复制所有 CSS 以将图标显示到我们的打印样式表中的解决方案，同时将属性值添加 `-webkit-print-color-adjust:exact;`到

```
    [class^="icon-"], [class*="icon-"] {
    背景图像：url（“../img/glyphicons-halflings.png”）；
    背景位置：14px 14px；
    背景重复：不重复...  
    }

```

但这仅解决了 Chrome 和 Safari 中的问题，社区没有任何迹象表明 Firefox 或 IE 很快就会支持这个 webkit 属性。

所以我们需要彻底改变`<i class="icon-globe"></i>`浏览器将页面发送到打印机驱动程序时的渲染方式。

执行精灵的标准方法是声明一个可见的开放空间（在这种情况下为 14 像素 x 14 像素），然后重新定位该`background-image`空间的后面，以便适当的图标可以显示出来。

为了在前景中有效地复制这一点，我们将使用`content: url()`调用图像，然后`clip: rect()`将此图像剪切为适当的图标，然后使用负值`margin-top`并将`margin-left`新的前景图像定位到背景图像图标最初放置的位置。

一个困难是使用剪辑切割图像需要 4 个坐标（上、右、下、左），而`background-position`只需要 2 个坐标（xpos、ypos - 距左上角的像素距离）。使用该`clip`属性的另一个困难是不同的`padding`或`margin`这些坐标不是从它们各自的外部边界计算的，而是仅从顶部和左侧计算的，这实际上使我们的数学转换`background-position`更容易一些，但可能需要一些时间来适应。

**有关剪辑属性的更多信息**
*（由于我的声誉低，链接用完了，所以你需要弄清楚我做了什么鬼鬼祟祟的事情）*
www.ibloomstudios[dot]com/articles/misunderstood_css_clip/css-tricks[dot]com /css-sprites-with-inline-images/ tympanus[dot]net/codrops/2013/01/16/understanding-the-css-clip-property/

## 实际代码

回到`<i class="icon-globe"></i>`例子，我们要转换

```
    [class^="icon-"], [class*="icon-"] {
    显示：内联块；
    宽度：14px；
    高度：14px；
    *margin-right: .3em;
    行高：14px；
    垂直对齐：文本顶部；
    背景图像：url（“../img/glyphicons-halflings.png”）；
    背景位置：14px 14px；
    背景重复：不重复；
    }
    //跳过其他图标...

    .icon-地球 {
    背景位置：-336px -144px；
    }

```

在打印样式表中

```
    i[class^="icon-"], i[class*="icon-"] {
    显示：内联块；
    垂直对齐：文本顶部；
    宽度：14px；
    背景图像：无！重要；
    背景重复：不重复；
    背景位置：0 0！重要；
    }
    //跳过其他图标...

    i.icon-globe::after {
    剪辑：矩形（144px 350px 158px 336px）！重要；
    左边距：-336px！重要；
    边距顶部：-144px！重要；
    内容： url('../img/glyphicons-halflings.png')!important;
    位置：绝对！重要；
    宽度：自动！重要；
    高度：自动！重要；
    }

```

我们可以看到，取**background-position(xpos & ypos OR left & top)**坐标并更改为正数与**clip: rect(top, left+14px, top+14px, left)**相同。

然后我们使用原始否定`background-position: left top;`作为`margin-left`and `margin-top`。

这个 CSS 还包括一些`!important`覆盖，以防原始引导图标显示在我们新剪裁的图像之上，该剪裁图像在打印时被剥离。

这适用于地球图标并解决了我的具体问题，但后来我想知道有多少其他指示图标没有被打印，所以我使用了一些巧妙的替换记事本中的所有命令来创建引导图标 CSS 和制表符分隔的单行版本每个元素（加上一些 px 到零，所以列会排列）......

```
    .icon-glass { 背景位置：0 px 0 px ; }
    .icon-music { 背景位置：-24 像素 0 像素 ; }
    .icon-search { 背景位置：-48 像素 0 像素；}
    .icon-envelope { 背景位置：-72 像素 0 像素；}
    .icon-heart { 背景位置：-96 px 0 px ; }
    .icon-star { 背景位置：-120 像素 0 像素；}
    .icon-star-empty { 背景位置：-144 像素 0 像素；}
    .icon-user { 背景位置：-168 像素 0 像素；}
    .icon-film { 背景位置：-192 像素 0 像素；}
    .icon-th-large { 背景位置：-216 像素 0 像素；}
    .icon-th { 背景位置：-240 像素 0 像素；}
    .icon-th-list { 背景位置：-264 像素 0 像素；}
    .icon-ok { 背景位置：-288 像素 0 像素；}
    .icon-remove { 背景位置：-312 像素 0 像素；}
    .icon-zoom-in { 背景位置：-336 px 0 px ; }
    .icon-zoom-out { 背景位置：-360 像素 0 像素 ; }
    .icon-off { 背景位置：-384 像素 0 像素；}
    .icon-signal { 背景位置：-408 像素 0 像素；}
    .icon-cog { 背景位置：-432 像素 0 像素；}
    .icon-trash { 背景位置：-456 像素 0 像素；}
    .icon-home { 背景位置：0 px -24 px ; }
    .icon-file { 背景位置：-24 px -24 px ; }
    .icon-time { 背景位置：-48 像素 -24 像素 ; }
    .icon-road { 背景位置：-72 像素 -24 像素；}
    .icon-download-alt { 背景位置：-96 像素 -24 像素；}
    .icon-download { 背景位置：-120 像素 -24 像素 ; }
    .icon-upload { 背景位置：-144 像素 -24 像素 ; }
    .icon-inbox { 背景位置：-168 像素 -24 像素 ; }
    .icon-play-circle { 背景位置：-192 像素 -24 像素；}
    .icon-repeat { 背景位置：-216 像素 -24 像素；}
    .icon-refresh { 背景位置：-240 像素 -24 像素；}
    .icon-list-alt { 背景位置：-264 像素 -24 像素；}
    .icon-lock { 背景位置：-287 像素 -24 像素；}
    .icon-flag { 背景位置：-312 像素 -24 像素 ; }
    .icon-headphones { 背景位置：-336 像素 -24 像素；}
    .icon-volume-off { 背景位置：-360 像素 -24 像素；}
    .icon-volume-down { 背景位置：-384 px -24 px ; }
    .icon-volume-up { 背景位置：-408 像素 -24 像素；}
    .icon-qrcode { 背景位置：-432 像素 -24 像素；}
    .icon-barcode { 背景位置：-456 px -24 px ; }
    .icon-tag { 背景位置：0 px -48 px ; }
    .icon-tags { 背景位置：-25 像素 -48 像素；}
    .icon-book { 背景位置：-48 像素 -48 像素；}
    .icon-bookmark { 背景位置：-72 像素 -48 像素；}
    .icon-print { 背景位置：-96 像素 -48 像素；}
    .icon-camera { 背景位置：-120 像素 -48 像素；}
    .icon-font { 背景位置：-144 像素 -48 像素；}
    .icon-bold { 背景位置：-167 像素 -48 像素；}
    .icon-italic { 背景位置：-192 像素 -48 像素；}
    .icon-text-height { 背景位置：-216 像素 -48 像素；}
    .icon-text-width { 背景位置：-240 像素 -48 像素 ; }
    .icon-align-left { 背景位置：-264 像素 -48 像素；}
    .icon-align-center { 背景位置：-288 像素 -48 像素；}
    .icon-align-right { 背景位置：-312 像素 -48 像素 ; }
    .icon-align-justify { 背景位置：-336 像素 -48 像素；}
    .icon-list { 背景位置：-360 像素 -48 像素 ; }
    .icon-indent-left { 背景位置：-384 像素 -48 像素；}
    .icon-indent-right { 背景位置：-408 像素 -48 像素；}
    .icon-facetime-video { 背景位置：-432 像素 -48 像素；}
    .icon-picture { 背景位置：-456 像素 -48 像素 ; }
    .icon-pencil { 背景位置：0 px -72 px ; }
    .icon-map-marker { 背景位置：-24 像素 -72 像素；}
    .icon-adjust { 背景位置：-48 像素 -72 像素 ; }
    .icon-tint { 背景位置：-72 像素 -72 像素；}
    .icon-edit { 背景位置：-96 像素 -72 像素；}
    .icon-share { 背景位置：-120 像素 -72 像素；}
    .icon-check { 背景位置：-144 像素 -72 像素；}
    .icon-move { 背景位置：-168 像素 -72 像素；}
    .icon-step-backward { 背景位置：-192 像素 -72 像素；}
    .icon-fast-backward { 背景位置：-216 像素 -72 像素 ; }
    .icon-backward { 背景位置：-240 像素 -72 像素；}
    .icon-play { 背景位置：-264 像素 -72 像素；}
    .icon-pause { 背景位置：-288 像素 -72 像素；}
    .icon-stop { 背景位置：-312 像素 -72 像素 ; }
    .icon-forward { 背景位置：-336 像素 -72 像素 ; }
    .icon-fast-forward { 背景位置：-360 像素 -72 像素 ; }
    .icon-step-forward { 背景位置：-384 像素 -72 像素；}
    .icon-eject { 背景位置：-408 像素 -72 像素；}
    .icon-chevron-left { 背景位置：-432 像素 -72 像素；}
    .icon-chevron-right { 背景位置：-456 像素 -72 像素；}
    .icon-plus-sign { 背景位置：0 px -96 px ; }
    .icon-minus-sign { 背景位置：-24 像素 -96 像素；}
    .icon-remove-sign { 背景位置：-48 像素 -96 像素；}
    .icon-ok-sign { 背景位置：-72 像素 -96 像素；}
    .icon-question-sign { 背景位置：-96 像素 -96 像素；}
    .icon-info-sign { 背景位置：-120 像素 -96 像素；}
    .icon-screenshot { 背景位置：-144 像素 -96 像素；}
    .icon-remove-circle { 背景位置：-168 像素 -96 像素；}
    .icon-ok-circle { 背景位置：-192 像素 -96 像素；}
    .icon-ban-circle { 背景位置：-216 像素 -96 像素；}
    .icon-arrow-left { 背景位置：-240 像素 -96 像素 ; }
    .icon-arrow-right { 背景位置：-264 像素 -96 像素；}
    .icon-arrow-up { 背景位置：-289 像素 -96 像素；}
    .icon-arrow-down { 背景位置：-312 像素 -96 像素；}
    .icon-share-alt { 背景位置：-336 像素 -96 像素；}
    .icon-resize-full { 背景位置：-360 像素 -96 像素；}
    .icon-resize-small { 背景位置：-384 像素 -96 像素；}
    .icon-plus { 背景位置：-408 像素 -96 像素；}
    .icon-minus { 背景位置：-433 像素 -96 像素；}
    .icon-asterisk { 背景位置：-456 像素 -96 像素；}
    .icon-exclamation-sign { 背景位置：0 px -120 px ; }
    .icon-gift { 背景位置：-24 像素 -120 像素；}
    .icon-leaf { 背景位置：-48 像素 -120 像素；}
    .icon-fire { 背景位置：-72 像素 -120 像素；}
    .icon-eye-open { 背景位置：-96 像素 -120 像素；}
    .icon-eye-close { 背景位置：-120 像素 -120 像素 ; }
    .icon-warning-sign { 背景位置：-144 像素 -120 像素；}
    .icon-plane { 背景位置：-168 px -120 px ; }
    .icon-calendar { 背景位置：-192 像素 -120 像素；}
    .icon-random { 背景位置：-216 像素 -120 像素；}
    .icon-comment { 背景位置：-240 像素 -120 像素；}
    .icon-magnet { 背景位置：-264 像素 -120 像素；}
    .icon-chevron-up { 背景位置：-288 像素 -120 像素；}
    .icon-chevron-down { 背景位置：-313 像素 -119 像素；}
    .icon-retweet { 背景位置：-336 像素 -120 像素；}
    .icon-shopping-cart { 背景位置：-360 像素 -120 像素；}
    .icon-folder-close { 背景位置：-384 像素 -120 像素；}
    .icon-folder-open { 背景位置：-408 像素 -120 像素；}
    .icon-resize-vertical { 背景位置：-432 像素 -119 像素；}
    .icon-resize-horizo​​ntal { 背景位置：-456 像素 -118 像素；}
    .icon-hdd { 背景位置：0 px -144 px ; }
    .icon-bullhorn { 背景位置：-24 像素 -144 像素；}
    .icon-bell { 背景位置：-48 像素 -144 像素；}
    .icon-certificate { 背景位置：-72 像素 -144 像素；}
    .icon-thumbs-up { 背景位置：-96 像素 -144 像素；}
    .icon-thumbs-down { 背景位置：-120 像素 -144 像素；}
    .icon-hand-right { 背景位置：-144 像素 -144 像素；}
    .icon-hand-left { 背景位置：-168 像素 -144 像素；}
    .icon-hand-up { 背景位置：-192 像素 -144 像素；}
    .icon-hand-down { 背景位置：-216 像素 -144 像素；}
    .icon-circle-arrow-right { 背景位置：-240 像素 -144 像素；}
    .icon-circle-arrow-left { 背景位置：-264 px -144 px ; }
    .icon-circle-arrow-up { 背景位置：-288 px -144 px ; }
    .icon-circle-arrow-down { 背景位置：-312 像素 -144 像素；}
    .icon-globe { 背景位置：-336 像素 -144 像素；}
    .icon-wrench { 背景位置：-360 像素 -144 像素；}
    .icon-tasks { 背景位置：-384 像素 -144 像素；}
    .icon-filter { 背景位置：-408 像素 -144 像素；}
    .icon-briefcase { 背景位置：-432 像素 -144 像素；}
    .icon-fullscreen { 背景位置：-456 像素 -144 像素；}

```

...然后我可以使用 Excel 电子表格一次性完成所有计算，只要使用上述格式，我设置一个 Excel 表格来进行任何精灵修改，并且我们只需要 3 个变量来复制这个过程 -img路径，宽度和高度，如果人们要求这些详细信息，我将在这些单元格中使用确切的公式进行更新，但现在这里是结果（在更聪明地替换记事本 ++ 中的所有命令以删除整数和 px 之间的空格并添加一些回车符之后)...

```
    i.icon-glass::after{
    剪辑：矩形（0px 14px 14px 0px）！重要；
    边距顶部：0px！重要；
    左边距：0px！重要；
    内容： url('../img/glyphicons-halflings.png')!important; 位置：绝对！重要；
    宽度：自动！重要；
    高度：自动！重要；
    }

    i.icon-music::after{
    剪辑：矩形（0px 38px 14px 24px）！重要；
    边距顶部：0px！重要；
    左边距：-24px！重要；
    内容： url('../img/glyphicons-halflings.png')!important;
    位置：绝对！重要；
    宽度：自动！重要；
    高度：自动！重要；
    }

    i.icon-搜索::之后{
    剪辑：矩形（0px 62px 14px 48px）！重要；
    边距顶部：0px！重要；
    左边距：-48px！重要；
    内容： url('../img/glyphicons-halflings.png')!important;
    位置：绝对！重要；
    宽度：自动！重要；
    高度：自动！重要；
    }

```

Arg 我用完了字符空间和超链接，因为我的声誉太低了，你可以帮助我）我在较早的答案中引用的 Bootstrap 问题报告中发布了整个 CSS 结果 [https://github.com/twitter/bootstrap/问题/4412](https://github.com/twitter/bootstrap/issues/4412)

# 当它不起作用时

现在，任何通过使用*打印*样式表而不是*屏幕*在浏览器窗口中查看来测试过这一点的人都会看到它工作得很好，正如我之前所说，据我所知，这个解决方案除了 10%-20% 的情况外都可以工作. 此解决方案的例外情况只会在实际打印页面（或打印到文件以进行无纸调试）时出现。

`position: absolute;`发生的情况是，由于使用属性所需的属性，新的前景图像精灵可能会溢出可打印区域之外`clip`。当涉及到 W3C 标准时，这些图像的呈现是未定义的，如[CSS Paged Media Module Level 3](http://www.w3.org/TR/css3-page/)中第 4.2 节-页面框外的内容中所述；

> 该规范没有定义如何处理位于页面框之外的框。

（也可以查看这个更旧但更好的解释[HTML print with absolute postitions](https://stackoverflow.com/questions/10902686/html-print-with-absolute-postitions)）

那么，浏览器巨头们在没有就标准达成一致的情况下会做什么，他们都会做一些不同的事情。发生的情况是整个精灵图像（不可见部分）沿着可打印页面区域的顶部、底部和侧面溢出，迫使浏览器决定如何处理和协调 CSS 和可打印页面区域。在浏览器中查看时，此浏览器更正不可见，因为它都是一页，并且图像可以毫无问题地溢出侧面限制。我将解释每个人在 2014 年 5 月 28 日之前所做的事情，以及最有可能发生这种情况的原因。

首先让我们使用处理它最好的浏览器，

> IE浏览器！

（我敢打赌，虽然我还想说什么） 图像被正确裁剪，但被推离了限制可打印区域的边缘，因此在打印输出时会出现在错误的位置。

Safari 和 Chrome 的行为相似，图像通过限制可打印区域边缘移动，但剪辑保留在指定位置，因此指定错误或不显示图标。

Firefox 似乎通过仅在第一页上打印图标来处理这个最糟糕的情况，如果发生溢出，则强制所有剩余的图标在它存在的 div 或部分中彼此重叠地进入首页。（有人可能会争辩说，这将 Firefox 排除在整体解决方案之外，但第一页有效的事实让我希望，如果我们问得好，Mozilla 将来会解决）

*为什么我说这对 80-90% 有效？* 因为精灵的大小和与可打印区域的距离是 2 个决定因素，它们会因页面而异，并且在大多数情况下最多只能影响可打印区域的 20%。

## 针对这 10-20% 事件的解决方案

在我的情况下，该图标被用于许多页面的大型列表中，因此`globe-icon`几乎每个页面顶部的图标都未对齐或图标错误，具体取决于哪个浏览器。因为我知道这个页面会经常打印并且需要准确，所以我需要确保它在至少 99% 的时间内有效。我将通过从精灵中剪下地球图标并插入它来完成此操作，而无需所有额外的定位和剪辑 CSS（这是此问题的原始最佳答案）。

```
    i.icon-globe::after{
     内容： url('../img/globe-glyphicon.png')!important;
    }

```

那 1% 的用户仍然无法正确打印，我从可以正常工作的浏览器打印到 PDF 文件，然后可以下载和打印。

感谢阅读 **（@_@）**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:58:48.213

来自 Bootstrap 的 mdo：“这是一张背景图片，打印时它们可能会被浏览器删除。”

[https://github.com/twitter/bootstrap/issues/4412](https://github.com/twitter/bootstrap/issues/4412)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T21:29:02.923

我也被这个问题难住了。我最终制作了我正在使用的字形的专用图像，而不是使用 glyphicon 系统。然后我使用`@print`and`:content`将图像注入图标应该在的任何位置。

```
@media print {
    i.glyphicon-arrow-right{ content: url(../img/arrow.png) !important;}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T10:34:06.483

对于旧版本的 Bootstrap（例如 2.3.2），`@media print`底部有一个块`_reset.scss`无法改进浏览器打印 css 决策。所有最近的浏览器都允许您配置打印时是否需要背景图像。这被`* { background: transparent !important; }`此块中的一行覆盖，即使您在打印对话框中选择了“打印背景图像”选项，也会破坏使用背景图像的图标库。

如果您使用的是最新的 Bootstrap 版本并且这仍然是一个问题，则打印媒体 css 被分离到它自己的文件中，您可以使用[Bootstrap 定制](http://getbootstrap.com/customize/)器将其排除。

# backbone.js - 显示backbonejs模型的获取结果

> ID：13786933
> 
> 赞同：1
> 
> 时间：2012-12-09T11:21:08.773
> 
> 标签：backbone.js, backbone-views, backbone-model

我正在尝试以 html 形式显示单个模型获取结果

这是我的backbone.js 部分：

```
window.Category = Backbone.Model.extend({
    urlRoot : "../myWs/category/"
});

window.CategoryView = Backbone.View.extend({
    el : $('#category_details'),
    template : _.template($('#category-details').html()),
    initialize : function() {
        this.render();
    },
    render : function(eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }
});

var category = new Category({
    id : "067e6162-3b6f-4ae2-a171-240000000000"
});
var vategoryView = new CategoryView({
    model : category
});

category.fetch(); 
```

我正在做的是：

1.  创建骨干模型类别
2.  创建主干视图 CategoryView
3.  从返回 JSON 数据对象的 REST Web 服务获取数据。在 div "#category-details" 中显示获取的数据。在浏览器上，我可以看到“fetch()”方法有效，因为我可以看到我的 JSON 对象返回

这是HTML代码：

```
<div id="category_details">details:</div>

<script type="text/template" id="category-details">
<label>Id:</label>
<input id="id" name="id" type="text" disabled />

<label>Name:</label>
<input type="text" id="name" name="name" value="<%= name %>"/>
 </script> 
```

问题是数据没有显示在 html 中。如何在 html 中显示数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:59:08.713

您的视图不处理模型上的更改，这意味着视图在`model.fetch`完成时不会重新呈现。

尝试从模型绑定更改事件：

```
window.CategoryView = Backbone.View.extend({
    el : $('#category_details'),
    template : _.template($('#category-details').html()),
    initialize : function() {
        this.render();
        this.model.on('change', this.render, this);
    },
    render : function(eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

还有一个演示[http://jsfiddle.net/Hzm5Y/](http://jsfiddle.net/Hzm5Y/)

请注意，Underscore 不喜欢被要求呈现未定义的变量，您可能应该为模型添加默认值：

```
window.Category = Backbone.Model.extend({
    urlRoot : "../myWs/category/",
    defaults: {
        name: ''
    }
}); 
```

# php - 使用 include_once 会导致未定义的变量通知

> ID：13786940
> 
> 赞同：0
> 
> 时间：2012-12-09T11:22:24.930
> 
> 标签：php

我有一个名为“config.php”的文件，其中包含一个名为`$unit_names`. 在一个类中，我有以下方法，它通过它的 id 返回单位名称。我对表中的所有行都使用此方法，但问题`config.php`仅包含在对该方法的第一次调用中。下一个电话会导致通知：`undefined variable $unit_names...`

如果我更换通知消失`include_once`。`include`但为什么？`include_once`应该加载`config.php`文件。

```
public function get_unit_name($unit_id) 
    {   
            include_once("config.php");
            return $unit_names[$unit_id];
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T11:24:24.010

`include_once`*至少*不会加载指定文件一次，它只会加载*一次*！如果您第二次调用该函数，则该文件已被包含，因此不会再次包含，因此会出现错误消息。

这样做的想法是，当您包含包含函数或类定义的文件时使用`include_once`/ `require_once`，即如果多次加载它们会产生错误的文件。如果可以加载文件两次或更多次，请始终使用`include()`而不是`include_once()`.

考虑这样的事情（以节省每次重新包含文件的成本）：

```
private $unit_names = null;

public function get_unit_name($unit_id) {   
    if ($this->unit_names === null) {
        include("config.php");
        $this->unit_names = $unit_names;
    }

    return $this->unit_names[$unit_id];
} 
```

# javascript - 如何在图片库中实现上一个/下一个按钮？

> ID：13786943
> 
> 赞同：0
> 
> 时间：2012-12-09T11:23:10.827
> 
> 标签：javascript, jquery, asp.net, image-gallery

我有一个从数据库填充的 GridView。当我单击 GridView 中的图像时，它会在一个名为`imgFull`. 这张图片可以解释更多：

![这是我的形象](../Images/8a6ada96a8dcbfd1af77bcce893c581b.png)

我想放置下一个和上一个按钮，以便在我的 div 中获取数据库中的下一个图像。我想用 jQuery 或 JavaScript 开发它。这是我的代码示例：

```
<div>
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" 
  Font-Names="Arial">
 <Columns>
  <asp:BoundField DataField="ID" HeaderText="ID" />
<asp:BoundField DataField="FileName" HeaderText="Image Name" />
<asp:TemplateField HeaderText="Preview Image">
    <ItemTemplate>
        <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl='<%# "images/"     +Eval("FilePath")  %>' Width="100px" Height="100px" Style="cursor: pointer" OnClientClick = "return LoadDiv(this.src);"/>

  </ItemTemplate>
</asp:TemplateField>
 </Columns>
</asp:GridView>
    </div>

  <div id="divBackground" class="modal">

 </div>
 <div id="divImage" class = "info"> 
           <input id="btnNext" type="button" value="next" />
                <input id="Button1" type="button" value="left" />
           <input id="Button2" type="button" value="right" />
            <img id="imgLoader" alt=""
             src="~/images/loader.gif" />

          <img id="imgFull" runat="server" alt="" src=""  style="height: 500px;width: 590px"/>

 <input id="btnClose" type="button" value="close" onclick="HideDiv()"/>
 </div> 
```

有人会帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:33:46.927

您的上一个/下一个按钮将需要单击事件处理程序：

```
$('#yourNextButtonId').bind('click', function(){
    sendAjaxRequestFunction();
} 
```

对服务器端脚本（如 php）进行 ajax 调用，该脚本将返回您要显示的图像的路径。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
    url: "./scripts/chatLogout.php",
    type: "post",
    success: function(response, textStatus, jqXHR)
    {
        $('#yourImageId').attr('src', response);    
    }   
}); 
```

这只是一种解决方案。

根据画廊的大小，您还可以预先加载所有图像，并使用 jquery/javascript 来切换适当图像的可见性。

# php - PHP 中的动态变量和数组

> ID：13786945
> 
> 赞同：1
> 
> 时间：2012-12-09T11:23:25.450
> 
> 标签：php, arrays

我有一个动态变量，每天从缓存文件更新一次，但是当我希望显示该变量时，尽管我的缓存文件存储了信息，但它什么也没拉。

这是我正在尝试做的一个例子......

```
$var1 = "1"; // Dynamic info that is previously pulled from the cache file. 
$var2 = array (
"0" => "2",
"1" => "3" ); 
```

现在我想显示数组某个部分的内容...

```
echo "Test ".$var2['$var1']; 
```

这是为了输出：Test 3

如果 $var1 是 0 它会输出：Test 2

我已经尝试了许多其他方法，包括将“更改为”，或者甚至不包括它们，它要么显示 PHP 错误，要么除了“测试”文本之外什么都不显示。

编辑＃1：好的，这是为了解释我正在做的更好一点。

首先，我从一个文件中提取并替换它附带的任何我不需要的东西..

```
$myFile = "http://someserver.com/afile.txt";
$lines = file($myFile);
$ngender = preg_replace('/Gender=/', '', $lines[3]); 
```

现在，我知道上面的代码工作正常，当我到达数组时，我遇到了问题..

```
$ngen = array (
1 => "Male",
2 => "Female"
); 
```

然后我使用 $ngen[$ngender]; 将其存储到 xml 文件中，但它不存储任何内容。这实际上是我在将其存储到 xml 文件之前尝试做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:25:47.513

它应该是：

```
echo "Test ".$var2[$var1]; 
```

$var1 是一个变量，所以它不应该在''中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:29:00.183

一些东西：

1.  并非所有 PHP 数组都是关联的。以下是有效且更有效的：

    ```
    $var2 = array(1 => "Male", 2 => "Female"); 
    ```

2.  变量名称不需要在语句中进行字符串化。您的具体问题是因为`'$var2'`会评估为文字字符串`$var2`，而`"$var2"`会评估为`"1"`.

所以正确的代码：

```
$var1 = "1"; // Dynamic info that is previously pulled from the cache file.
$var2 = array(1 => "Male", 2 => "Female");

echo "Test ".$var2[$var1]; 
```

* * *

您在其他答案的评论中发布的错误表明 $var1 不是您认为的那样。确保。

# qt - Qt 似乎没有处理资源文件

> ID：13786946
> 
> 赞同：6
> 
> 时间：2012-12-09T11:23:28.410
> 
> 标签：qt

我在 Qt 中创建了资源文件，并尝试从我的应用程序访问这些资源，但出现错误：

```
:-1: error: [debug/qrc_Resources.cpp] Error 2 
```

我的资源文件名为 Resource.qrc。任何想法如何克服它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-17T18:00:45.210

这个错误可能是由很多不同的事情引起的。这是一个愚蠢的错误，因为它只是告诉您存在错误，而没有直接告诉您错误是什么。但是您可以通过转到“编译输出”选项卡来找出导致错误的原因。通常错误的原因是红色的第一件事。这就是我的情况：

[![在此处输入图像描述](../Images/f0873e99aa13059af210b8d023edb4a6.png)](https://i.stack.imgur.com/YLrcY.png)

这里红色的第一件事（我用橙色圈起来使它可见）说“虚拟内存耗尽：无法分配内存”，这意味着编译器内存不足（这是有道理的，因为我的 qrc_resource.cpp 文件是 33MB 大） .

你应该做什么来解决这个问题取决于错误的原因是什么。就我而言，由于编译器内存不足，解决方案是让我的虚拟机使用更多内存。但是，如果您的错误原因不同，那么您的解决方案可能会完全不同。

它只是说“错误1”而没有别的，这真的很愚蠢，您必须查看编译输出以找出错误的实际含义。我希望他们能在未来版本的 GCC 中解决这个问题。同时，您可以在“编译输出”选项卡中看到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-04T17:48:19.987

这可能是语法错误 - 检查`Resource.qrc`没有引用任何无效文件并且没有拼写错误。

当我遇到此问题时收到“错误 1”，因为我删除了其中一个资源而没有编辑我的`resource.qrc`.

.cpp 被称为复数也很可疑`qrc_Resources`，但 .qrc 被称为`Resource`单数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-16T20:27:33.633

我注意到错误是这样的

```
[debug/qrc_recourses.o] 
```

这意味着问题来自资源文件夹

只需在您的`resource.qrc`或`****.qrc`文件夹上单击鼠标右键，然后删除丢失的数据并再次运行它，我认为它会起作用。

# networking - 配置 vmware 网络以访问静态 IP

> ID：13786953
> 
> 赞同：0
> 
> 时间：2012-12-09T11:24:20.213
> 
> 标签：networking, vmware

我有一个与我的网站一起运行的专用虚拟 debian 服务器，现在有一个副本，这样我就可以通过在我自己的 PC 上虚拟运行它来尝试一些配置。它运行良好，但我无法通过 http 访问机器。

问题是我的机器有一个固定的 ip，比如 194.247.xx 。但是，我的家庭网络中有 192.168.1.x 范围内的计算机

是否可以不更改我的虚拟机中的任何内容并仍然配置 vmware 网络以便我能够访问它正在运行的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T23:32:57.277

我能看到这种情况发生的唯一方法是在家庭网络和 VM 之间使用 NAT（网络地址转换）。

为此，您可以使用基于免费软件的路由器——例如 Vyatta ( [www.vyatta.org](http://www.vyatta.org) )——并创建一个带有两个 NIC 的 VM——一个在您的家庭网络上具有 IP，另一个在同一网络上具有 IP网络作为您的虚拟机。然后，您配置 NAT 以将您的家庭 IP 转换为您的 Web 服务器 IP，然后您就完成了。

没有任何“事实上的”VMware 可以让您这样做（除了使用 vShield - 无论如何都会做 NAT'ing）......

# c - Ubuntu中是否有用于gedit的调试器？

> ID：13786955
> 
> 赞同：1
> 
> 时间：2012-12-09T11:24:37.070
> 
> 标签：c, debugging, ubuntu

我正在用 gedit（在 Ubuntu 中）编写我的代码。有没有可以与 gedit 一起使用的 C 调试器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T11:49:26.173

无论您使用哪种文本编辑器，您都可以使用[GNU 调试器 (GDB) 。](http://www.gnu.org/software/gdb/)它是Unix 上**的**标准调试工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:45:07.113

您可以使用[DDD](http://en.wikipedia.org/wiki/Data_Display_Debugger)，它是 gdb 的图形前端。

# java - 使用 truezip 归档 Java 中的文件夹

> ID：13786958
> 
> 赞同：3
> 
> 时间：2012-12-09T11:24:44.160
> 
> 标签：java, file, zip, archive, truezip

我需要创建一个服务来查找特定文件夹并将它们归档到 zip 文件中。

我看到了各种各样的[例子](http://www.avajava.com/tutorials/lessons/how-can-i-create-a-zip-file-from-a-set-of-files.html)，但似乎必须阅读每个文件夹中的所有文件。我对吗？

有没有另一种方法来做到这一点（也许使用 truezip ）？

我想使用 truezip，因为我知道您可以轻松地将文件/文件夹添加到 zip 文件中。

我已经搜索了一个使用 truezip 归档文件夹的简单示例 - 但我找不到任何有用的东西 -**我需要一个如何归档给定文件夹的简单示例**。

我正在使用 Java 6。如何使用 truezip 在 Java 中归档文件夹？

**编辑：** 还发现[了这个例子](http://www.roseindia.net/java/example/java/io/ZipFolderExample.shtml)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:21:14.100

使用 TrueZIP，您只需调用

```
new TFile("folder").cp_rp(new TFile("archive.zip")); 
```

我建议阅读它的教程，以便更好地理解它的含义：[TrueZIP 教程](http://truezip.java.net/kick-start/tutorial.html)

# android - android如何使用现有图像进行裁剪

> ID：13786959
> 
> 赞同：3
> 
> 时间：2012-12-09T11:25:05.067
> 
> 标签：android, crop

我需要使用选择器和拖动等裁剪图像。我无法使用 com.android.camera.action.CROP 因为在我测试的许多手机中都不起作用。我在这里搜索了所有示例，唯一的工作是在哪里使用 android.provider.MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI 但问题是每次它要求用户选择图像。有人可以给我贴一个例子。我需要在我需要的图像上打开它，而不需要用户打开图像，在文件系统中搜索。我很失望，因为 android 没有提供兼容从 2.1 到 4 的所有设备的东西……谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T02:04:33.463

下载示例：- [https://github.com/lorensiuswlt/AndroidImageCrop](https://github.com/lorensiuswlt/AndroidImageCrop)

android 2.1 只需要三个更改：-

1.  在 main.xml 中，写 wrap_content 而不是 matchparent。

2.  在 AndroidManifest.xml 中，`<uses-sdk android:minSdkVersion="7" />`

3.  在 default.properties 中，`target=android-7`

项目是最好的导师。

# ios - 启动 UITabBarController 之前的 UIViewController

> ID：13786965
> 
> 赞同：-1
> 
> 时间：2012-12-09T11:25:50.830
> 
> 标签：ios, uiview, login, uitabbarcontroller

我的 iOS 项目中有一个 3 个选项卡应用程序，我想要的只是在代理加载所有带有 3 个选项卡的 TabBarController 之前启动一个简单的 UIView ......就像加载应用程序**之前的“登录”页面一样。**

然后，当用户拥有权限时，应用程序**关闭第一个 UIView**并**显示标签栏视图**。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:36:03.317

您可以拥有一个由标签栏中的第一个标签立即触发的模态视图控制器。

您可以使用

```
[self presentViewController:startViewController animated:NO completion:nil]; 
```

例如 viewDidLoad。

# php - PHP 使用 mail() 发送 html - 某些服务器以文本形式接收

> ID：13786966
> 
> 赞同：5
> 
> 时间：2012-12-09T11:26:39.477
> 
> 标签：php, email

我搜索了很多，但找不到任何解决方案。在更改我的代码几个小时后，我尝试了 php.net 中的示例，它的行为相同。

如果我将它发送到我的 gmail 地址，一切看起来都很好，如果我将它发送到另一台服务器，它不会将其呈现为 html。我尝试了大约 8 台服务器，其中 4 台遇到了这个问题

这是代码（php示例）：

```
// subject
$subject = 'Birthday Reminders for August';

// message
$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
      <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
    </tr>
    <tr>
      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

**这是来自 gmail 的“显示原文”（gmail 只是客户端，邮件来自 php 服务器），消息显示不正确 - html 是原始的：**

```
Delivered-To: XXX
Received: by 10.220.35.74 with SMTP id o10csp285028vcd;
        Sun, 9 Dec 2012 03:18:35 -0800 (PST)
Received: by 10.220.238.139 with SMTP id ks11mr6865773vcb.49.1355051914996;
        Sun, 09 Dec 2012 03:18:34 -0800 (PST)
Received-SPF: softfail (google.com: best guess record for domain of transitioning             unknown does not designate 82.80.232.249 as permitted sender) client-ip=82.80.232.249;
Received: by 10.230.67.134 with POP3 id r6mf4415353vbi.4;
            Sun, 09 Dec 2012 03:18:34 -0800 (PST)
X-Gmail-Fetch-Info: gideon@example.com 5 mail.example.com 110 gideon@example.com
Received: from [82.80.232.249] by mail.example.com (ArGoSoft Mail Server .NET v.1.0.8.4)         with ESMTP (EHLO web9.wishosting.net)
    for <gideon@example.com>; Sun, 09 Dec 2012 13:18:02 +0200
Received: by web9.wishosting.net (Postfix, from userid 1168)
    id C82D03EE2EC; Sun,  9 Dec 2012 13:18:23 +0200 (IST)
        To: gideon@example.com, wez@example.com
Subject: Birthday Reminders for August
    X-PHP-Script: example.com/lp/mailtest.php for 89.139.28.204
MIME-Version: 1.0
Date: Sun, 09 Dec 2012 13:18:02 +0200
Message-ID: <x0otq4xc1dcboohp09122012011802@EAWEB1>
SPF-Received: none
X-FromIP: 82.80.232.249
From: gideon@example.com

Content-type: text/html; charset=iso-8859-1

To: Mary <mary@example.com>, Kelly <kelly@example.com>

From: Birthday Reminder <birthday@example.com>

Cc: birthdayarchive@example.com

Message-Id: <20121209111823.C82D03EE2EC@web9.wishosting.net>
Date: Sun,  9 Dec 2012 13:18:23 +0200 (IST)

    <html>
    <head>
      <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
              <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
            </tr>
    <tr>
          <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
      </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:35:34.230

伊万的评论是正确的！

试试下面使用 phpmailer lib 的例子。

```
<?php
//phpmailer lib
require_once 'class.phpmailer.php';

$mail = new PHPMailer(true); 

try {
    $mail->AddAddress('mary@example.com', 'Mary');
    $mail->AddAddress('kelly@example.com', 'Kelly');
    $mail->SetFrom('birthday@example.com', 'Birthday Reminder');
    $mail->AddReplyTo('no-reply@example.com', 'No-reply');
    $mail->Subject = 'Birthday Reminders for August';
    $mail->AltBody = 'Here are the birthdays upcoming in August!\nPerson:Joe BirthDay:3rd Aug 1970\nPerson:Sally BirthDay:17th Aug 1973\n'; 
    $mail->MsgHTML('
        <p>Here are the birthdays upcoming in August!</p>
        <table>
            <tr>
              <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
            </tr>
            <tr>
              <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
            </tr>
            <tr>
              <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
            </tr>
        </table>'
    );

    $mail->Send();

    echo "Message Sent OK<p></p>\n";
} catch (phpmailerException $e) {
    echo $e->errorMessage(); 
} catch (Exception $e) {
    echo $e->getMessage(); 
}
?> 
```

PHPMailer 可以从[https://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list下载](https://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)

示例位于[https://code.google.com/a/apache-extras.org/p/phpmailer/wiki/ExamplesPage](https://code.google.com/a/apache-extras.org/p/phpmailer/wiki/ExamplesPage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:12:50.887

这取决于将显示消息的电子邮件阅读器。

Gmail 和大多数现代电子邮件客户端（如 MS Outlook、Thunderbird、Evolution...）如果包含 html 内容，则会呈现 html，一些年长的读者会将其呈现为纯文本，因为他们无法呈现 html（如 squirrel 或 horde ）。

为了在任何阅读器中正确呈现电子邮件，您必须在电子邮件正文中放入纯文本和 html 版本的电子邮件。

最好的方法是**在 php 中使用 PHPmailer、SwiftMail 和其他电子邮件包装器**，但如果你真的想自己做，[试试这个](http://www.daniweb.com/web-development/php/threads/2959/sending-htmlplain-text-emails)。

另外，请注意，一些读者在显示各种 html 元素（如 div 和 css 规则）时会遇到问题。**最好坚持使用 MS Outlook 可以呈现的标签和 CSS。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T12:26:14.403

尝试设置 MIME 边界

```
// generate a random string to be used as the boundary marker
       $mime_boundary="==Multipart_Boundary_x".md5(mt_rand())."x";

       // now we'll build the message headers
       $headers = "From: $from\r\n" .
       "MIME-Version: 1.0\r\n" .
          "Content-Type: multipart/mixed;\r\n" .
          " boundary=\"{$mime_boundary}\"";

       // here, we'll start the message body.
       // this is the text that will be displayed
       // in the e-mail
       $message="This is an example";

       // next, we'll build the invisible portion of the message body
       // note that we insert two dashes in front of the MIME boundary 
       // when we use it
       $message = "This is a multi-part message in MIME format.\n\n" .
          "--{$mime_boundary}\n" .
          "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
          "Content-Transfer-Encoding: 7bit\n\n" .
       $message . "\n\n"; 
```

# qt - 用于访问对象方法的 QPointer

> ID：13786967
> 
> 赞同：1
> 
> 时间：2012-12-09T11:26:50.587
> 
> 标签：qt, qdialog, qpointer

有一个奇怪的问题，`QPointer`用于从不同的、不相关的对象访问对象方法。

我准备了一个小例子来更好地解释它。

我创建了两个`QWidget`，Widget_A 和 Widget_B 在一个简单的`QDialog`。

我需要从 Widget_B 访问 Widget_A 的公共方法：我将 widget_a 指针传递给 widget_b 的方法进行`QPointer`赋值。Widget_A 包含一个`QLineEdit`我想从 Widget_B 中清除的内容。

问题是当按下 pushButton_B 时 lineEdit_A 没有任何反应。控制台没有显示任何问题，所以最明显的原因是 Widget_B 正在处理不同的 Widget_A 对象，而不是我通过的那个。

我还创建了从 QWidget_A 到 QWidget_B 的连接，因此在编辑 lineEdit_A 时 label_B 文本会相应更改：这有效。

在询问之前，我需要一个`QPointer`因为在我的真实项目中 Widget_A 可以被删除。你能解释我错在哪里吗？我应该选择不同的方式吗？谢谢。按照一些片段

**小部件_a.h**

```
class Widget_A : public QWidget
{
    Q_OBJECT

public:
    explicit Widget_A(QWidget *parent = 0);
    ~Widget_A();

    void clearLineEdit_A();

signals:
    void lineEdit_A_changed(const QString &);

private slots:
    void on_lineEdit_A_textChanged(const QString &arg1);

private:
    Ui::Widget_A *ui;
}; 
```

**小部件_a.cpp**

```
Widget_A::Widget_A(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::Widget_A)
{
    ui->setupUi(this);
    ui->lineEdit_A->setText("write something here...");
    ui->lineEdit_A->selectAll();
}

Widget_A::~Widget_A()
{
    delete ui;
}

void Widget_A::clearLineEdit_A()
{
    ui->lineEdit_A->clear();
}

void Widget_A::on_lineEdit_A_textChanged(const QString &arg1)
{
    emit lineEdit_A_changed(arg1);
} 
```

**小部件_b.h**

```
class Widget_B : public QWidget
{
    Q_OBJECT

public:
    explicit Widget_B(QWidget *parent = 0);
    ~Widget_B();

    void controlWidget(QWidget *w);

private slots:
    void changeLabel_B(const QString &text);

    void on_pushButton_B_clicked();

private:
    Ui::Widget_B *ui;
    QPointer<QWidget> qPtrWdgt;
}; 
```

**小部件_b.cpp**

```
Widget_B::Widget_B(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::Widget_B)
{
    ui->setupUi(this);
}

Widget_B::~Widget_B()
{
    delete ui;
}

void Widget_B::controlWidget(QWidget *w)
{
    qPtrWdgt = w;
    connect(qPtrWdgt, SIGNAL(lineEdit_A_changed(const QString &)),
                  this, SLOT(changeLabel_B(const QString &)));
}

void Widget_B::changeLabel_B(const QString &text)
{
    ui->label_B->setText(text);
}

void Widget_B::on_pushButton_B_clicked()
{
    Widget_A(qPtrWdgt).clearLineEdit_A();
} 
```

**对话框.h**

```
class Dialog : public QDialog
{
    Q_OBJECT

public:
    explicit Dialog(QWidget *parent = 0);
    ~Dialog();

private:
    Ui::Dialog *ui;

    Widget_A *widget_a;
    Widget_B *widget_b;
}; 
```

**对话框.cpp**

```
Dialog::Dialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Dialog)
{
    ui->setupUi(this);

    widget_a = new Widget_A(this);
    widget_b = new Widget_B(this);
    widget_b->controlWidget(widget_a);

    QVBoxLayout *mainLayout = new QVBoxLayout(this);
    mainLayout->addWidget(widget_a);
    mainLayout->addWidget(widget_b);
    setLayout(mainLayout);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:48:55.870

```
Widget_A(qPtrWdgt).clearLineEdit_A(); 
```

`Widget_A`这通过使用构造函数创建一个新的`Widget_A(QWidget *)`，然后调用`clearLineEdit_A()`它。

如果您改为定义`qPtrWdgt`为`QPointer<Widget_A>`，并且因为[`QPointer`](http://doc.qt.digia.com/qt/qpointer.html)重载[`operator->`](http://doc.qt.digia.com/qt/qpointer.html#operator--gt)，那么您可以使用：

```
qPtrWdgt->clearLineEdit_A(); 
```

您还需要在`Widget_A`' 标题中包含 '`Widget_B`标题。

# java - Java FX 线程安全暂停/睡眠

> ID：13786968
> 
> 赞同：1
> 
> 时间：2012-12-09T11:27:01.303
> 
> 标签：java, multithreading, animation, javafx

我有一个 JavaFX 应用程序，其中包含大约 20 个标签。当用户单击标签时，我需要标签闪烁红色。为了让标签变成红色，我使用了一个我为 swing 开发但转换为 JavaFX 的线程。它工作了一段时间，但我最近将应用程序锁定跟踪到标签的动画。我制作动画的方式很简单：

```
new Thread(new AnimateLabel(tl,idx)).start(); 
```

tl 指向标签的 ArrayList，idx 指向它的索引。另一个标签附加了一个单击事件，当您单击时，它会创建为标签设置动画的线程（使其闪烁）。

出于某种原因，如果按下了很多标签，这将导致应用程序锁定。

我很确定这是 JavaFX 的线程安全问题。我有另一个线程共享 JavaFX 应用程序线程，如下所示：

```
TimerUpdater tu = new TimerUpdater(mDS);
Timeline incHandler = new Timeline(new KeyFrame(Duration.millis(130),tu)); 
incHandler.setCycleCount(Timeline.INDEFINITE); 
incHandler.play(); 
```

TimerUpdater 将不断更新标签上的文本，即使是闪烁的文本。

这是标签动画师：

```
private class AnimateLabel implements Runnable
{
    private Label lbl;
    public AnimateLabel(Label lbl, int myIndex)
    {
        // if inAnimation.get(myIndex) changes from myAnim's value, stop,
        // another animation is taking over
        this.lbl = lbl;
    }

    @Override
    public void run() {
        int r, b, g;
        r=255;
        b=0;
        g=0;

        int i = 0;
        while(b <= 255 && g <= 255)
        {
            RGB rgb = getBackgroundStyle(lbl.getStyle());
            if(rgb != null)
            {
                if(rgb.g < g-16) { return; }
            }
            lbl.setStyle("-fx-color: #000; -fx-background-color: rgb("+r+","+g+","+b+");");
            try { Thread.sleep(6); }
            catch (Exception e){}
            b += 4;
            g += 4;
            ++i;
        }
        lbl.setStyle("-fx-color: #000; -fx-background-color: fff;");
    }
} 
```

我会这样运行：

```
javafx.application.Platform.runLater(new AnimateLabel(tl, idx)); 
```

但是， Thread.sleep(6) 将被忽略。有没有办法在与 javafx.application 共享线程时暂停运行以控制动画的速度？

问候，达斯汀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:21:36.120

我认为对 JavaFX 事件队列的工作方式有一点误解。

1) 在普通线程上运行 AnimateLabel 代码将导致`Label#setStyle(...)`代码在该线程上执行 - 这是非法的，可能会导致您的问题。

2) 根据您的第二个示例，完全在 JavaFX 事件队列上运行 AnimateLabel 代码意味着事件线程将被阻塞，直到动画完成。同时，应用程序不会更新，不会处理用户事件或重绘，就此而言。基本上，您在循环中更改标签样式，但您没有给事件队列时间来实际重绘标签，这就是您在屏幕上看不到任何内容的原因。

半正确的方法是两者的混合。在单独的线程中运行 AnimateLabel，但将调用包装`Label#setStyle(...)`在`Platform#runLater(...)`. 这样，您只会用相关工作来打扰事件线程，并让它自由地在其间做其他工作（例如更新 UI）。

正如我所说，这是一种半正确的方法，因为有一个内置工具可以更轻松地完成您想做的事情。您可能想查看 Transition 课程。它为自定义动画提供了一种简单的方法，甚至提供了一堆预构建的子类来为节点的最常见属性设置动画。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T01:42:29.723

Sarcan 有一个很好的答案。

该答案仅提供了用于修改 css 样式的[时间线](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html)方法的示例代码（基于[zonski 的论坛帖子](https://forums.oracle.com/forums/thread.jspa?threadID=2310537)） 。该代码可以用作您在问题中发布的代码的替代品。

这种方法的一个优点是 JavaFX 库处理所有线程问题，确保您的所有代码都在 JavaFX 线程上执行并消除您可能遇到的任何线程安全问题。

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.beans.property.*;
import javafx.beans.value.*;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.TilePane;
import javafx.stage.Stage;
import javafx.util.Duration;

public class CssFlash extends Application {

    private Label flashOnClick(final Label label) {
        label.setStyle(String.format("-fx-padding: 5px; -fx-background-radius: 5px; -fx-background-color: lightblue;"));

        DoubleProperty opacity = new SimpleDoubleProperty();
        opacity.addListener(new ChangeListener<Number>() {
            @Override public void changed(ObservableValue<? extends Number> source, Number oldValue, Number newValue) {
                label.setStyle(String.format("-fx-padding: 5px; -fx-background-radius: 5px; -fx-background-color: rgba(255, 0, 0, %f)", newValue.doubleValue()));
            }
        });

        final Timeline flashAnimation = new Timeline(
                new KeyFrame(Duration.ZERO, new KeyValue(opacity, 1)),
                new KeyFrame(Duration.millis(500), new KeyValue(opacity, 0)));
        flashAnimation.setCycleCount(Animation.INDEFINITE);
        flashAnimation.setAutoReverse(true);

        label.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override public void handle(MouseEvent t) {
                if (Animation.Status.STOPPED.equals(flashAnimation.getStatus())) {
                    flashAnimation.play();
                } else {
                    flashAnimation.stop();
                    label.setStyle(String.format("-fx-padding: 5px; -fx-background-radius: 5px; -fx-background-color: lightblue;"));
                }  
            }
        });        

        return label;
    }

    @Override public void start(Stage stage) throws Exception {
        TilePane layout = new TilePane(5, 5);
        layout.setStyle("-fx-background-color: whitesmoke; -fx-padding: 10;");

        for (int i = 0; i < NUM_LABELS; i++) {
            layout.getChildren().add(flashOnClick(new Label("Click to flash")));
        }    

        Scene scene = new Scene(layout);
        stage.setScene(scene);
        stage.show();
    }

    private static final int NUM_LABELS = 20;
    public static void main(String[] args) { Application.launch(args); }
} 
```

JavaFX 8 将允许您使用 Java API 设置区域的背景，因此，如果您愿意，您可以在没有 css 的情况下完成同样的事情。

示例程序输出，点击了几个标签并处于各种闪烁状态： ![clicktoflash](../Images/65c979cc1e18e08a5d3afc2f4fcd95b6.png)

# php - php中未定义的索引警告

> ID：13786970
> 
> 赞同：-3
> 
> 时间：2012-12-09T11:27:30.570
> 
> 标签：php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T11:32:01.980

# css - 使用 CSS 使字体更简洁

> ID：13786971
> 
> 赞同：13
> 
> 时间：2012-12-09T11:27:31.127
> 
> 标签：css, fonts

无论如何使用CSS使字母更紧密？我知道我们可以调整行高，但我不知道是否有任何东西可以将字体挤得更近。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-09T11:30:25.873

你正在寻找`letter-spacing`

```
#id { letter-spacing: -1px; } 
```

[*参考*](http://reference.sitepoint.com/css/letter-spacing)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-09T14:45:55.160

答案取决于您所说的“字体”、“浓缩”和“挤压”是什么意思。

[`font-stretch`](https://developer.mozilla.org/en-US/docs/CSS/font-stretch)您可以使用该属性为字体（来自字体系列）选择更简洁的字体（特定字体） 。但它不会挤压任何东西；它只是选择了一种设计得更简洁的字体。人们计算机中常用的字体没有这种字体；一些可下载的字体（网络字体）可以。并且大多数情况下，您可以通过仅使用特定字体名称来以更跨浏览器的方式使用它们，就好像它是字体系列名称一样，例如`font-family: Arial Narrow`. （注意：Arial Narrow 仅在某些计算机上可用，远低于基本的 Arial。）

如果使用的字体具有 OpenType 格式的字距调整信息，您可以使用某些 CSS 技术来建议字距调整。大多数网页上常用的字体都没有这样的信息。（例外：Palatino Linotype、Times New Roman 和 Microsoft C 字体，如 Calibri 和 Cambria。）合适的声明：

```
body { 
text-rendering: optimizeLegibility;
-webkit-font-feature-settings: "kern";
-moz-font-feature-settings: "kern";
font-feature-settings: "kern";
} 
```

如果有的话，这些设置的影响往往很小。这并不意味着任何粗野意义上的“挤压”。相反，它以微妙的方式修改渲染以更好地排版；文本宽度可能会稍微变小，但这只是一个巧合的副产品。

如果你使用负数`letter-spacing`，那意味着暴力挤压。它有时可能有意义，例如对于大尺寸的无衬线文本，具有较小的值，如`letter-spacing: 0.03em`. 即使这样，也应该评估结果，尤其要注意压缩时可能看起来很奇怪的字母组合（例如，“rl”或“te”）。大多数情况下，如果您认为字母间距太大，或者文本太宽，请考虑使用另一种字体，而不是破坏字体的正常显示。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-09T11:30:53.497

您可以指定所有字母之间的距离

```
letter-spacing: 0.1em; 
```

但是除非将每个字母包装在一个跨度中，否则您不能对单个字母进行紧排

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-14T21:54:59.033

## **受到推崇的**

如果字体变体包含可以使用的窄版本 `font-stretch: condensed;`

## **不建议**

如果没有，那么您最终可能会使用 scale() `transform: scale(.8,1);`

# mysql - 使用条件将 mysql 表连接到自身

> ID：13786973
> 
> 赞同：0
> 
> 时间：2012-12-09T11:28:34.613
> 
> 标签：mysql, database, join

我希望有人可以在这里帮助我。

我正在尝试在 mysql 中编写一个查询，但我很难获得正确的语法。让我解释一下我想要做什么。

我有一个表格，其中包含建筑测量数据，每个条目都有一个 location_id、room_id、measurement_value、floor_num、measurement_date。我正在尝试编写查询以获取每层楼的最新测量数据（只有两层楼）。所以我在想这样的事情，但我无法让它发挥作用。

```
 select bottom_floor.value as bottom_value, top_floor.value as top_value
 from 
 (select measurement_value, measurement_date, floor_num, room_id from rom_measurements where location_id = '1' and floor_num='1' order by measurement_date DESC limit 1) as bottom_floor
 Join 
 (select measurement_value, measurement_date, floor_num, room_id from rom_measurements where location_id = '1' and floor_num='2' order by measurement_date DESC limit 1) as top_floor 
```

所以我认为这会给我两个值。我已经看到，如果两个子查询之一返回一个空集，它就不起作用，我也很确定我在这里做错了其他事情。

有人可以推荐一个更好的方法来完成这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:37:52.517

楼层上所有房间的总面积：

```
select square, measurement_date, floor_num
from room_measurements rm
join (
  select location_id, floor_num, max(measurement_date) as date, sum(measurement_value) as square
  from room_measurements 
  group by location_id, floor_num    
) rm2 
ON rm.measurement_date=rm2.date AND rm.location_id=rm2.location_id AND rm.floor_num=rm2.floor_num
WHERE location_id = '1' 
```

地板上每个房间的正方形：

```
select measurement_value, measurement_date, floor_num, room_id
from room_measurements rm
join (
  select location_id, floor_num, room_id, max(measurement_date) as date
  from room_measurements 
  group by location_id, floor_num, room_id    
) rm2 
ON rm.measurement_date=rm2.date AND rm.location_id=rm2.location_id AND rm.floor_num=rm2.floor_num AND rm.room_id = rm2.room_id
WHERE location_id = '1' 
```

# python - python中的原始输入和多处理

> ID：13786974
> 
> 赞同：3
> 
> 时间：2012-12-09T11:28:49.227
> 
> 标签：python, raw-input

我（主要）有以下代码：

```
status = raw_input("Host? (Y/N) ") 
if status=="Y":
    print("host")
    serverprozess = Process(target= spawn_server)
    serverprozess.start()
clientprozess = Process (target = spawn_client)
clientprozess.start() 
```

上面调用的方法基本如下：

```
def spawn_server():
     mserver = server.Gameserver()
    #a process for the host. spawned if and only if the player acts as host

def spawn_client():
    myClient = client.Client()
    #and a process for the client. this is spawned regardless of the player's status 
```

它工作正常，服务器产生，客户端也产生。

就在昨天，我在 client.Client() 中添加了以下行：

```
self.ip = raw_input("IP-Adress: ") 
```

第二个 raw_input 抛出 EOF 异常：

```
 ret = original_raw_input(prompt)
     EOFError: EOF when reading a line 
```

有没有办法来解决这个问题？我不能使用多个提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:05:56.920

正如您已经确定的那样，`raw_input`仅从主进程调用是最简单的：

```
status = raw_input("Host? (Y/N) ") 
if status=="Y":
    print("host")
    serverprozess = Process(target= spawn_server)
    serverprozess.start()

ip = raw_input("IP-Address: ")     
clientprozess = Process (target = spawn_client, args = (ip, ))
clientprozess.start() 
```

但是，使用[JF Sebastian 的解决方案](https://stackoverflow.com/a/8981813/190597)也可以复制`sys.stdin`并将其作为参数传递给子进程：

```
import os
import multiprocessing as mp
import sys

def foo(stdin):
    print 'Foo: ',
    status = stdin.readline()
    # You could use raw_input instead of stdin.readline, but 
    # using raw_input will cause an error if you call it in more 
    # than one subprocess, while `stdin.readline` does not 
    # cause an error.
    print('Received: {}'.format(status))

status = raw_input('Host? (Y/N) ')
print(status)
newstdin = os.fdopen(os.dup(sys.stdin.fileno()))
try:
    proc1 = mp.Process(target = foo, args = (newstdin, ))
    proc1.start()
    proc1.join()
finally:
    newstdin.close() 
```

# c++ - c++程序在自动运行后无法正常运行

> ID：13786976
> 
> 赞同：2
> 
> 时间：2012-12-09T11:29:01.907
> 
> 标签：c++, file, io, autorun

系统：Windows 7 用户帐户控制：启用

我有一个 C++ .exe 程序，它记录关键事件并将它们写入文件。我将它注册到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run 以便自动运行。

*   该程序在 Windows 启动时启动
*   它不能正常工作（它不会将关键事件输出到文件中）

也许是 UAC 的错？那么为什么其他程序（我已经安装）正常运行。他们是否注册了其他一些值？

预先感谢您为回答这个问题所做的一切努力

# jquery - 表单将不需要的逗号发布到数据库

> ID：13786979
> 
> 赞同：2
> 
> 时间：2012-12-09T11:29:43.913
> 
> 标签：jquery, asp.net, database, select, webmatrix

在 Webmatrix 中使用 asp.net，我创建了一个下拉菜单，您可以在其中选择一个状态，然后基于该选择有另一个下拉菜单供用户选择该状态内的一个区域。

我遇到的问题是，当数据发布时，它会为未选择的其他区域添加一堆逗号。我可以看到这是如何发生的，区域的每个选择标签都有 name="Region"，但是我不知道如何解决这个问题，它们都嵌套在 div 标签中我不能使用 'name' 属性. 如果在某个地方没有名称，则区域字段不会发布到数据库中。

这是html代码：

```
<label>State:</label>
   <select class="stareg" id="SelectState" name="State" size="1">
        <option value="">Please Select</option>
        <option value="ACT">A.C.T.</option>
        <option value="NSW">New South Wales</option>
        <option value="NT">Northern Territory</option>
        <option value="QLD">Queensland</option>
        <option value="SA">South Australia</option>
        <option value="TAS">Tasmania</option>
        <option value="VIC">Victoria</option>
        <option value="WA">Western Australia</option>
    </select>

   <label>Region:</label>

         <div id="SelectRegion">
    <div>
         <div>
            <select class="stareg" name="Region">
                <option value="">Please Select</option>
               </select>
        </div>
    </div>

    <div id="VIC" style="display: none;">
         <div id="VICReg">
            <select class="stareg" id="VICRegs" name="Region">
                <option value="">Please Select</option>
                <option value="Melbourne & Inner Suburbs">Melbourne & Inner Suburbs</option>
                <option value="East & South East">East & South East Suburbs</option>
                <option value="Geelong">Geelong</option>
                <option value="Gippsland">Gippsland</option>
                <option value="Mornington Peninsula">Mornington Peninsula</option>
                <option value="North & West Suburbs">North & West Suburbs</option>
                <option value="Yarra Valley & Dandenong Ranges">Yarra Valley & Dandenong Ranges</option>
                <option value="Regional Victoria">Regional Victoria</option>
            </select>
        </div>
    </div>

    <div id="NSW" style="display: none;">
          <div id="NSWReg">
            <select class="stareg" id="NSWRegs" name="Region">
                <option value="">Please Select</option>
                <option value="Sydney & Inner Suburbs">Sydney & Inner Suburbs</option>
                <option value="Central West">Central West</option>
                <option value="Hunter">Hunter</option>
                <option value="North Coast">North Coast</option>
                <option value="South Coast">South Coast</option>
                <option value="Southern Inland">Southern Inland</option>
                <option value="Western Sydney">Western Sydney</option>
                <option value="Regional N.S.W.">Regional N.S.W.</option>

            </select>
        </div>
    </div>

    <div id="QLD" style="display: none;">
          <div id="QLDReg">
            <select class="stareg" id="QLDRegs" name="Region">
                <option value="">Please Select</option>
                <option value="Brisbane & Inner Suburbs">Brisbane & Inner Suburbs</option>
                <option value="Bundaberg">Bundaberg</option>
                <option value="Cairns">Cairns</option>
                <option value="Gold Coast">Gold Coast</option>
                <option value="Mackay">Mackay</option>
                <option value="Sunshine Coast">Sunshine Coast</option>
                <option value="Townsville">Townsville</option>
                <option value="Regional QLD">Regional QLD</option> 
            </select>
        </div>
    </div>

    <div id="SA" style="display: none;">
          <div id="SAReg">
            <select class="stareg" id="SARegs" name="Region">
                <option value="">Please Select</option>
                <option value="Adelaide & Inner Suburbs">Adelaide & Inner Suburbs</option>
                <option value="Adelaide Hills">Adelaide Hills</option>
                <option value="Barossa">Barossa</option>
                <option value="Clare Valley">Clare Valley</option>
                <option value="Eyre Peninsula">Eyre Peninsula</option>
                <option value="Fleurieu Peninsula">Fleurieu Peninsula</option>
                <option value="Kangaroo Island">Kangaroo Island</option>
                <option value="Limestone Coast">Limestone Coast</option>
                <option value="Murraylands">Murraylands</option>
                <option value="Yorke Peninsula">Yorke Peninsula</option>
                <option value="Regional S.A.">Regional S.A.</option> 
            </select>
        </div>
    </div>

    <div id="WA" style="display: none;">
          <div id="WAReg">
            <select class="stareg" id="WARegs" name="Region">
                <option value="">Please Select</option>
                <option value="Perth & Inner Suburbs">Perth & Inner Suburbs</option>
                <option value="Great Southern">Great Southern</option>
                <option value="Peel">Peel</option>
                <option value="South West">South West</option>
                <option value="Regional W.A.">Regional W.A.</option> 
            </select>
        </div>
    </div>

    <div id="ACT" style="display: none;">
          <div id="ACTReg">
            <select class="stareg" id="ACTRegs" name="Region">
                <option value="">Please Select</option>
                <option value="Canberra & Inner Suburbs">Canberra & Inner Suburbs</option>
                <option value="Other Area A.C.T">Other Area A.C.T</option>
            </select>
        </div>
    </div>

    <div id="TAS" style="display: none;">
          <div id="TASReg">
            <select class="stareg" id="TASRegs" name="Region">
                <option value="">Please Select</option>
                <option value="Hobart & Inner Suburbs">Hobart & Inner Suburbs</option>
                <option value="Davenport">Davenport</option>
                <option value="Launceston">Launceston</option>
                <option value="Regional Tasmania">Regional Tasmania</option>
            </select>
        </div>
    </div>

    <div id="NT" style="display: none;">
          <div id="NTReg">
            <select class="stareg" id="NTRegs" name="Region">
                <option value="">Please Select</option>
                <option value="Darwin & Inner Suburbs">Darwin & Inner Suburbs</option>
                <option value="Regional N.T.">Regional N.T.</option>
            </select>
        </div>
    </div>

</div> 
```

这是 jquery 脚本：

```
$(function () {
    $('#SelectState').change(function () {
        $('#SelectRegion > div').hide();
        $('#SelectRegion').find('#' + $(this).val()).show();
    });
}); 
```

除了发送到数据库的附加逗号之外，一切都按我的意愿工作。有没有办法用一个名称包装所有区域选择标签，还是需要一些更高级的脚本？任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T11:49:45.390

您的问题是因为您`name`对所有选择控件使用相同的参数：`name="Region"`，所以它们都一起发布。为什么 ？因为参数名称是回传的，而且你使用的都是一样的，所以它们用逗号混淆在一起。空逗号是您隐藏的逗号，如果我理解得很好，它们将不再被选中。

从我看到您知道自己在做什么的那一刻起，我就可以向您建议一个可能的解决方案，然后您就可以按照自己的方式去做。

`.show()`在 javascript 上制作 的那一刻，用 更改所有选择`name=""`，并只留下可见的：`name="Region"`。

javascript上的代码可以是：

```
$(function () {
  $('#SelectState').change(function () 
  {
    $('#SelectRegion > div').hide();

    // show the selected
    $('#SelectRegion').find('#' + $(this).val()).show();

    // remove the name from all that have the class stareg
    $('.stareg').attr('name', '')

    // set only to visible the class name
    $('#SelectRegion').find('#' + $(this).val() + 'Regs').attr('name', 'Region')

  });
}); 
```

我没有页面，所以可能需要一些 tweeks，我不确定最后一行是否正确找到了用于设置区域的选择控件。此外，我使用`stareg`该类从所有选择中删除名称 - 但不要对该页面上的其他控件使用相同的类。

# asp.net-mvc-3 - Json 反序列化为自己的类

> ID：13786986
> 
> 赞同：0
> 
> 时间：2012-12-09T11:30:56.347
> 
> 标签：asp.net-mvc-3, json.net

我正在使用 asp.net mvc4 和[json.net](http://james.newtonking.com/pages/json-net.aspx)

我有一个像[http://api.domaintools.com/v1/domaintools.com/whois/这样的 json 结构](http://api.domaintools.com/v1/domaintools.com/whois/)

我怎样才能将它反序列化到我自己的类中？这对我来说看起来有点复杂的结构来实现如何构建我的类？

南武

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:04:17.067

您可以使用以下类结构：

```
 public class Response
       {
          public string Registrant {get;set;}
          public Registration registration {get;set;}
          public WhoIs whois {get;set;}
       }
       public class Registration
      {
          public DateTime created {get;set;}
          public DateTime expires {get;set;}
          public DateTime updated {get;set;}
          public string registrar {get;set;}
          public List<string> statuses {get;set;}
          public List<string> name_servers {get;set;}

      }
      public class WhoIs
      {
          public DateTime date {get;set;}
          public string record {get;set;}

      } 
```

然后，您可以执行以下操作：

```
 Response response = JsonSerializer.DeserializeFromString<Response>(data);//data is your data from the link you have given in the problem description 
```

因此，数据现在被反序列化到您自己的类响应中......希望这会有所帮助......

# html - 如何按比例缩放到父级？

> ID：13786988
> 
> 赞同：0
> 
> 时间：2012-12-09T11:31:11.447
> 
> 标签：html, css

我使用绝对 div 将我的中心框放入 中`imgwrap`，但它不遵循我的 imgwrap 框的比例，即使它是他的父母。当用户调整大小时，如何使中心框成为 imgwrap 的中心并按比例缩放？这样做的正确方法是什么？我以为absolute会跟随父母

[http://jsfiddle.net/gpqAx/](http://jsfiddle.net/gpqAx/)

```
 <div id='imgwrap'>
            <img src='http://www.papercut.com/images/layout/banner-background-home-tree.png'>
        <div id='myabsolute'>
            <div id='centerbox'>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod             tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,             quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo             consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse             cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non             proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </div>
        </div>
</div> <!-- imgwrap --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:51:31.193

是的，您是对的，但您还需要指定与边缘的距离。添加

```
top: 25%;
left: 25%;
right: 25%;
bottom: 25%; 
```

至`#centerbox`

您可能还需要调整其高度。看到这个[jsFiddle](http://jsfiddle.net/8bYDW/)

# svg - Kinetic.Path() 中的 SVG 数据问题

> ID：13786993
> 
> 赞同：0
> 
> 时间：2012-12-09T11:32:03.700
> 
> 标签：svg, kineticjs

我想使用 KineticJS 制作路径，但我有一个问题。这是我的代码：

```
 var trail10 = new Kinetic.Path({
    x: 372,
    y: 218,
    stroke: 'red',
    data: 'm 1075.3372,222.72294 c 1.8761,1.54857 3.7371,4.02875 4.8404,6.93557 1.1033,2.90681 1.449,6.24026 0.2945,9.49534 -2.5903,7.30343 -1.2364,8.84378 0.4803,10.17292 1.7167,1.32913 3.7961,2.44706 2.6568,8.90567 -0.8579,4.86386 3.8676,5.46515 7.1173,8.32606 0.8124,0.71523 1.5326,1.57168 2.0502,2.67127 0.5177,1.09959 0.8328,2.44231 0.8351,4.13008 0,1.68777 -2.9933,3.21714 -5.0695,5.44519 -2.0761,2.22805 -3.233,5.15477 0.4467,9.63722 3.6162,4.40502 8.7494,4.61048 -2.0639,13.92744 -7.5383,6.49517 15.042,10.55784 7.8783,17.51621 -7.8043,7.30074 -11.0829,8.12632 0.1939,14.27623 5.9293,7 -11.057,7.00788 -5.2282,12.36387 3.9955,3.34625 10.6939,6.35464 8.055,10.53019 l -2.4058,4.31991 c -15.7303,14.0028 20.5938,10.72628 1.3989,25.67643 -7.8499,7.65593 25.499,11.82405 3.3562,23.28387'
}) 
```

不幸的是，路径不适用于此数据，尽管它适用于其他数据，例如：`M12.582,9.551C3.251,16.237,0.921,29.021,7.08,38.564l-2.36,1.689l4.893,2.262l4.893,2.262l-0.568-5.36l-0.567-5.359l-2.365,1.694c-4.657-7.375-2.83-17.185,4.352-22.33c7.451-5.338,17.817-3.625,23.156,3.824c5.337,7.449,3.625,17.813-3.821,23.152l2.857,3.988c9.617-6.893,11.827-20.277,4.935-29.896C35.591,4.87,22.204,2.658,12.582,9.551z`

我不知道出了什么问题。SVG 数据字符串是使用 InkScape 创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T15:26:01.513

代码中显示的数据看起来不正确。

在 InkScape 中，打开 XML 编辑器并复制 <svg:path> 的“d”值。这为您提供了看起来像工作数据的数据。

这对我有用。希望这可以帮助。

# php - MYSQL 语法混乱

> ID：13786994
> 
> 赞同：-2
> 
> 时间：2012-12-09T11:32:21.250
> 
> 标签：php, mysql

我有一个包含公司及其邮政编码地址的数据库。我创建了一个函数，可以为我提供一定范围内的公司名称。但是，我的 MYSQL 非常糟糕，查询部分无法正常工作。我从这个网站研究了这个功能，如果正确执行，应该可以工作。我一直收到一个错误，说 results2 是错误的。有人可以帮我弄清楚我在 $sql = 之后的语法有什么问题吗？

```
 function zipcodeRadius($lat, $lon, $radius)
  {
    $radius = $radius ? $radius : 20;

    $lat = intval($lat);
    $lon = intval($lon);
    $radius = intval($radius);

    $sql = "SELECT company,( 3959 * ACOS(COS(RADIANS($lat) ) * COS(RADIANS( lat ) ) * COS( RADIANS( longitude ) - RADIANS($lon) ) + SIN(RADIANS($lat) ) * SIN(RADIANS( lat ) ) ) ) AS distance FROM COMPANY WHERE distance < 50 ORDER BY distance";
    $result2 = mysql_query($sql);

    while($row2= mysql_fetch_array($result2))
    {
        echo $row2[company]. " - ". $row2[zip];
        echo "<br/>";
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:48:51.963

添加

```
if (!$result) { print mysql_error();} 
```

在 mysql_query 之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T11:54:07.387

您的查询：

```
SELECT company,
       (complex calculations) AS distance 
FROM COMPANY 
WHERE distance < 50 
ORDER BY distance ; 
```

问题是`distance`在列表中定义（作为别名）`SELECT`并且这些别名不能在`WHERE`子句中引用。这就是 SQL 的处理方式。你有两个解决方案。

要么将查询封装在外部查询中，然后将其移到`WHERE`那里：

```
SELECT company,
       distance
FROM
  ( SELECT company,
           (complex calculations) AS distance 
    FROM COMPANY 
  ) AS tmp
WHERE distance < 50 
ORDER BY distance ; 
```

或复制计算代码：

```
SELECT company,
       (complex calculations) AS distance 
FROM COMPANY 
WHERE (complex calculations) < 50 
ORDER BY distance ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:45:30.377

`$sql = "SELECT company,( 3959 * ACOS(COS(RADIANS($lat) ) * COS(RADIANS(` ***$lat*** )`) * COS( RADIANS( longitude ) - RADIANS($lon) ) + SIN(RADIANS($lat) ) * SIN(RADIANS(` ***$lat*** `) ) ) ) AS distance FROM COMPANY WHERE distance < 50 ORDER BY distance";`

检查查询中使用的变量名称 $lat - 我已更正该部分（以粗斜体字体显示）。试试看，如果这对你有用

# javascript - 这些嵌套的“if typeof(bla) else”语句可以做得更短吗？

> ID：13786996
> 
> 赞同：2
> 
> 时间：2012-12-09T11:32:53.270
> 
> 标签：javascript

我有一段代码是这样的。这段代码有效，但看起来很糟糕。

```
if(typeof(d.object) != "undefined"){
  if(typeof(d.object.property) != "undefined"){
    if(typeof(d.object.property.length) != "undefined"){
      // do the code
    }
    else alert("error");
  }
  else alert("error");
}
else alert("error"); 
```

有什么办法可以重写它，所以它做的一样但更有效。特别是因为错误都是一样的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T11:36:39.400

假设您`property`对它的长度是否为 null 或`0`（或更一般地说是 Jan Dvorak 所建议的“虚假”）不感兴趣，那么即使不使用，您也可以使其更具可读性`try/catch`：

```
if (d && d.object && d.object.property && d.object.property.length){

} else {
   alert('error');
} 
```

在大多数情况下，这是要走的路。

[关于来自 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)的“虚假” ：

> 任何非未定义、null、0、NaN 或空字符串 ("") 的值，以及任何对象，包括值为 false 的布尔对象，在传递给条件语句时计算结果为 true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T11:35:24.207

```
try{
    if(typeof(d.object.property.length) != "undefined"){
      // do the code
    }else{
      throw "Value undefined";
    }
}catch(e){
    alert("error");
} 
```

只要您只是重构一些您知道有效的代码，这就会起作用，但这会使调试变得更加困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:55:28.983

好建议，

这是一项功能的工作！

```
function has(v){return typeof(v) !== "undefined";};

if(has(d) && has(d.object) && has(d.object.property) && has(d.object.property.lenth)) {
   ...
} else alert("error"); 
```

问候

# android - Android：在活动之间传递对象并使其可打包

> ID：13786997
> 
> 赞同：0
> 
> 时间：2012-12-09T11:32:54.907
> 
> 标签：android

Android 编程新手。无法在活动之间传递对象并使其可打包。有人可以告诉我可能是什么问题吗？我想知道逻辑是否合理。

```
public class MainActivity extends Activity {

    private Bundle MyActivityParams;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent intent = new Intent(this, MyActivity.class);
        MyActivityParams = fillInData(MyActivityParams);
        intent.putExtras(MyActivityParams);
        startActivity(intent, savedInstanceState);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    private Bundle fillInData(Bundle bundle){

        bundle.putFloat("com.company.MyActivity.FL", 12);
        bundle.putFloat("com.company.MyActivity.VH", 100);
        bundle.putFloat("com.company.MyActivity.const", 1);
        return bundle;
    }
}

public class DisplayActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        displayData();

    }
    private void displayData(){
        //ActivityData is from MyActivity
        ActivityData data = new ActivityData(getIntent().getExtras());

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_display, menu);
        return true;
    }
}

public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        displayParams();
    }
    private void displayParams(){
        ActivityData dataBundle = new ActivityData((getIntent()).getExtras());
        transfer(dataBundle);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_algorithm, menu);
        return true;
    }

    public void transfer(ActivityData incomingdata){
        startActivity(incomingdata.getIntent());
    }

    protected static class ActivityData{
        private Bundle data;
        private TextView text;
        private Intent intent;
        public ActivityData(Bundle bundle){
            /*data = bundle;
            intent = new Intent(null, DisplayActivity.class);
            text = new TextView(null);*/
        }

        public void display(String key){
            this.text.setText(data.getString(key));
                    //not allowed: startActivity(intent);
        //not allowed either: setContentView(text);
        }

        public Intent getIntent() {
            return intent;
        }
        public void setIntent(Intent intent) {
            this.intent = intent;
        }
        public TextView getText() {
            return text;
        }
        public void setText(TextView text) {
            this.text = text;
        }
        public Bundle getData() {
            return data;
        }
        public void setData(Bundle data) {
            this.data = data;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:38:34.220

让我们有一个 Person 类

```
public class Person {
    private String name;
    private String email;
    private int age;

    public Person(int age, String name, String email) {
        this.age = age;
        this.name = name;
        this.email = email;
    }
} 
```

一个可包裹的看起来像这样

```
public class ParcelablePerson implements Parcelable {

    private final Person person;

    private ParcelablePerson(Parcel parcel) {
        this.person = new Person(parcel.readInt(), parcel.readString(), parcel.readString());
    }

    public ParcelablePerson(Person person) {
        this.person = person;
    }

    public Person getPerson() {
        return person;
    }

    @Override
    public int describeContents() {
        return 0;
    }

    // This is the method where you disassembly your object to pieces
    @Override
    public void writeToParcel(Parcel parcel, int flags) {
        parcel.writeInt(person.getAge());
        parcel.writeString(person.getName());
        parcel.writeString(person.getEmail());
    }

    public static final Creator<ParcelablePerson> CREATOR = new Creator<ParcelablePerson>() {

        // And here you create a new instance from a parcel using the first constructor
        @Override
        public ParcelablePerson createFromParcel(Parcel parcel) {
            return new ParcelablePerson(parcel);
        }

        @Override
        public ParcelablePerson[] newArray(int size) {
            return new ParcelablePerson[size];
        }

    };
} 
```

这个过程中的关键是在`private ParcelablePerson(Parcel parcel)`构造函数和`public void writeToParcel(Parcel parcel, int flags)`方法中具有相同的变量顺序......你可以在年龄属性上看到它，它是一个 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:44:48.320

试试这个。

ParcelTest.java

```
import java.util.HashMap;

import android.os.Parcel;
import android.os.Parcelable;

public class ParcelTest implements Parcelable {
    private HashMap map;

    public ParcelTest() {
        map = new HashMap();
    }

    public ParcelTest(Parcel in) {
        map = new HashMap();
        readFromParcel(in);
    }

    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public ParcelTest createFromParcel(Parcel in) {
            return new ParcelTest(in);
        }

        public ParcelTest[] newArray(int size) {
            return new ParcelTest[size];
        }
    };

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeInt(map.size());
        for (String s: map.keySet()) {
            dest.writeString(s);
            dest.writeString(map.get(s));
        }
    }

    public void readFromParcel(Parcel in) {
        int count = in.readInt();
        for (int i = 0; i < count; i++) {
            map.put(in.readString(), in.readString());
        }
    }

    public String get(String key) {
        return map.get(key);
    }

    public void put(String key, String value) {
        map.put(key, value);
    }
} 
```

ExampleSupplierActivity.java

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class ExampleSupplierActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ParcelTest p = new ParcelTest();
        p.put("green", "go");
        p.put("yellow", "wait");
        p.put("red", "stop");

        Bundle b = new Bundle();
        b.putParcelable("com.example.trafficlight", p);

        Intent i = new Intent(this, ExampleConsumerActivity.class);
        i.putExtras(b);

        startActivity(i);
    }
} 
```

ExampleConsumerActivity.java

```
import android.app.Activity;
import android.os.Bundle;

public class ExampleConsumerActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bundle b = getIntent().getExtras();

        ParcelTest p = b.getParcelable("com.example.trafficlight");

        String red = p.get("red");
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T11:38:51.253

试试这个代码对我有用。但我已经实现了可序列化而不是可打包的。尝试实现 parcelable 而不是 serializable 。并尝试它是否有效。我没有尝试过，但实现了 parcelable。

传递和反对另一个活动：

```
in activity A
make sure the class implements the serializable interface
create a new intent
create a new bundle 
use the putSerializeable method to add the object to the bundle with a key
put the bundle in the intent by using the putExtras method
start the activity using the startActivity method

Specifically, 
        Intent intent = new Intent(ShoulderExerciseScreen.this, ExercisesScreen.class);

        Bundle bundle = new Bundle();
        bundle.putSerializable("exercise", new Exercise("BenchPress));

        intent.putExtras(bundle);

        startActivity(intent);
in activity B
declare and object of the type you want passed
use the getIntent method  to get the intent
use the getSerializeableExtra to get the the value using the key
cast the returned value from getSerializeableExtra and the desired type
    Specifically,
        Exercise ex = (Exercise)getIntent().getSerializableExtra("exercise");

        if(ex != null)
        {
            //do something
        } 
```

# javascript - jQuery计算问题

> ID：13786999
> 
> 赞同：-1
> 
> 时间：2012-12-09T11:32:58.237
> 
> 标签：javascript, jquery, html

我正在使用 jquery.calculate 创建一个发票系统。

```
 var newIDSuffix = 2;
    $(".invoice_items").delegate('#add-row', 'click', function () {

        var lastRow = $("tr.lastrow");
        var cloned = $("tr.default").clone().removeAttr('class');

        cloned.find('td#total_item_1').each(function() {
            $(this).attr('id', 'total_item_'+2);
        });

        cloned.find('input, select').each(function() {
            var id = $(this).attr('id'),
            name = $(this).attr('name');

            id = id.substring(0, id.length-1) + newIDSuffix;
            $(this).attr('id', id);
         });

        cloned.insertBefore(lastRow).find('input:text').val('');
        newIDSuffix++;
    });

        // update the plug-in version
        $("#idPluginVersion").text($.Calculation.version);

        // bind the recalc function to the quantity fields
        $("input").bind("keyup", recalc);
        // run the calculation function now
        recalc();

        $("input").bind("keyup", recalc);
        // run the calculation function now
        recalc(); 
```

这是我到目前为止所做的。[http://jsfiddle.net/aliharis/VXZe8/](http://jsfiddle.net/aliharis/VXZe8/)

问题是一旦我动态添加一行，当我输入值时，它不会更新金额列和总计。但是如果我为动态添加的行输入值并返回第一行并输入值，它会进行包括动态添加字段的计算。

我无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:39:18.543

添加行：

```
cloned.bind("keyup", recalc); 
```

在这一行之后：

```
cloned.insertBefore(lastRow).find('input:text').val(''); 
```

将点击事件绑定到新元素。

.. 或者在这里使用 .on() 而不是 bind ：

```
$("input").on("keyup", recalc); 
```