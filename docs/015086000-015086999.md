# StackOverflow 问答 15086000-15086999

# jquery - 单击按钮时如何禁用列中的所有复选框

> ID：15086000
> 
> 赞同：0
> 
> 时间：2013-02-26T09:54:30.990
> 
> 标签：jquery

当谈到 jquery 时，我是一个新手，并且对我的问题感到困惑。基本上我需要做的是当单击按钮时，该列中的所有复选框都应该被禁用，这意味着我无法选中/取消选中它。我已经搜索并发现[这篇文章](https://stackoverflow.com/questions/1426419/disable-all-check-boxes-inside-a-table-with-jquery)与我的问题最接近，但他在使用 jquery 并且只提供他的伪代码方面已经很先进了。

谁能帮我解决我的问题？下面是我的代码：

```
<table id="key_table" border="3">
    <thead>
        <tr>
            <th>
                Month 1<button id="1" class="lockButton">Lock</button><br>2013-01-01 to 2013-01-31<br>
                <table style="width: 250px;">
                    <tbody>
                        <tr class="odd">
                            <td style="text-align:center;">1</td>
                            <td style="text-align:center;">2</td>
                            <td style="text-align:center;">3</td>
                            <td style="text-align:center;">4</td>
                        </tr>
                    </tbody>
                </table>
            </th>
            <th>
                Month 2 <button id="2" class="lockButton">Lock</button><br>2013-02-01 to 2013-02-28<br>
                <table style="width: 250px;">
                    <tbody>
                        <tr class="odd">
                            <td style="text-align:center;">1</td>
                            <td style="text-align:center;">2</td>
                            <td style="text-align:center;">3</td>
                            <td style="text-align:center;">4</td>
                        </tr>
                    </tbody>
                </table>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr class="odd">
            <td style="width: 250px;">
                <table>
                    <tbody>
                        <tr class="odd">
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_460853mo_1" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_460853mo_1" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input checked="checked" style="width: 15px !important;" class="kw_460853mo_1" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_460853mo_1" type="checkbox"></td>
                        </tr>
                    </tbody>
                </table>
            </td>
            <td style="width: 250px;">
                <table>
                    <tbody>
                        <tr class="odd">
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_460853mo_2" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_460853mo_2" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_460853mo_2" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_460853mo_2" type="checkbox"></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr class="even">
            <td style="width: 250px;">
                <table>
                    <tbody>
                        <tr class="odd">
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_456905mo_1" onclick="javascript: update_key_type(456905, 1, 1, this)" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input checked="checked" style="width: 15px !important;" class="kw_456905mo_1" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_456905mo_1" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_456905mo_1" type="checkbox"></td>
                        </tr>
                    </tbody>
                </table>
            </td>
            <td style="width: 250px;">
                <table>
                    <tbody>
                        <tr class="odd">
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_456905mo_2" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_456905mo_2" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_456905mo_2" type="checkbox"></td>
                            <td style="text-align:center;width:100px !important;"><input style="width: 15px !important;" class="kw_456905mo_2" type="checkbox"></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

你也可以在这里查看[JSFiddle](http://jsfiddle.net/zXqCE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:17:03.527

就像是 ：

```
$('.lockButton').on('click', function() {
  $('#key_table > tbody > tr').find('input[type="checkbox"][class$="'+this.id+'"]')
                              .prop('disabled', true);
}); 
```

[**小提琴**](http://jsfiddle.net/zXqCE/15/)

不确定是否要切换禁用状态，但无论如何：

```
$('.lockButton').data('locked', false).on('click', function() {
    var cl  = this.id,
        lc  = $(this).data('locked');
    $(this).data('locked', !lc);
    $('#key_table > tbody > tr').find('input[type="checkbox"][class$="'+cl+'"]')
                                .prop('disabled', !lc);
}); 
```

[**小提琴**](http://jsfiddle.net/zXqCE/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:17:11.183

我叉了你的小提琴来演示解决方案。本质上，对于每个锁定按钮，您都希望：

1.  记录操作是锁定还是解锁（我认为切换行为更有意义）；
2.  抓住这个按钮应该影响的所有复选框（我已经详细说明了下面的代码——它有点粘）；
3.  而且，当点击时，切换我们在#1中所做的记录......
4.  并将其应用于`disabled`我们在#2 中保存的所有复选框的属性。

此代码`index`获取父标题的，它为我们提供了列

```
var column      = $(this).closest('th').index(); 
```

然后我们想立即在我们表的第一个 tbody 中获取该列的单元格（有嵌套表，所以这必须很复杂）

```
var $checkboxes = $('#key_table > tbody > tr > td:nth-child(' + (column + 1) + ')').find('[type=checkbox]'); 
```

### 演示

[http://jsfiddle.net/barney/B9h2v/](http://jsfiddle.net/barney/B9h2v/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:11:29.003

首先不要使用内联 CSS，这很糟糕，并且会使您的代码不可读。使用类和 ID 定义样式表中的样式。

接下来添加一个班级到`<td>`他们来自哪个月份。按钮的 ID 告诉行号。然后添加一个名为：`class='monthX'`例如`class=month1`

然后链接这个jQuery

```
$(document).ready(function() {

    $("button").click(
    function () {
        var id = $(this).attr("id");
        $(".month"+id+" input[type=checkbox]").attr('disabled', 'disabled');
    }); 

}); 
```

[更新的小提琴](http://jsfiddle.net/zXqCE/11/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:19:53.243

你可以试试这个：

```
$(function() {
    $('#key_table input:checkbox').click(function() {
        if($(this).is(':checked')) {
            $(this).parent().parent().find('input:checkbox').attr('disabled',true);
            $(this).removeAttr('disabled');
        } else {
            $(this).parent().parent().find('input:checkbox').removeAttr('disabled');
        }
    });
}); 
```

希望这将满足您的需求

干杯，

特伦斯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T10:31:59.040

为要禁用的行添加一个公共类。这里我把 'month1','month2' 作为类名。然后禁用当前类中的输入字段。

**样本**

```
.
.
 <tr class="odd month1">  
<td><input checked="checked" type="checkbox"></td>
<td ><input type="checkbox"></td>
</tr>
.
.

 $("#1").click(function(){
    $(".month1 input").attr("disabled", true);
    }) 
```

[http://jsfiddle.net/arjuncc/zXqCE/16/](http://jsfiddle.net/arjuncc/zXqCE/16/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T10:11:44.823

也许这可以帮助你：

[演示](http://jsfiddle.net/PBpEK/)

```
$("#1").click(function(){
    $("input.kw_460853mo_1").attr("disabled", true);
    $("input.kw_456905mo_1").attr("disabled", true);
});

$("#2").click(function(){
    $("input.kw_460853mo_2").attr("disabled", true);
    $("input.kw_456905mo_2").attr("disabled", true);
}); 
```

# java - 反向有向图的边

> ID：15086002
> 
> 赞同：0
> 
> 时间：2013-02-26T09:54:46.433
> 
> 标签：java, graph

我的图表保留了一组顶点，每个顶点都有数字、相邻顶点的列表以及是否访问过的指示符。我的代码必须反转图形的边缘，但它会抛出 CurrentModificationException。有什么问题？

```
public void reverse() {

        Vertex initialVertex = vertices.get(1);
        reverseVertex(initialVertex);
    }

    public void reverseVertex(Vertex initialV) {

        initialV.setVisitedForReverse(true);
        ArrayList<Vertex> neighbors = new ArrayList<Vertex>();
        for( Vertex v : initialV.getAdjacent()) {
            if( !v.isVisitedForReverse() ) {
                neighbors.add(v);
                v.getAdjacent().add(initialV);
                initialV.getAdjacent().remove(v);
            }
        }
        for(Vertex vert : neighbors) 
            reverseVertex(vert);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:56:42.480

因为您正在迭代顶点列表并同时修改它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:06:44.673

使用 for-each 循环，您不能在迭代时修改集合。

考虑显式使用迭代器。假设您的迭代器支持 remove() 操作（检查它），这应该工作：

```
Iterator<Vertex> it = initialV.getAdjacent().iterator();
while (it.hasNext()) {
    if (...)
        it.remove();
} 
```

但是，我的回答仅涉及循环的技术性。您应该确保您的反转逻辑正确并保持数据结构一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:05:19.677

如果性能对您的代码不重要，请在一个循环中访问相邻节点（不要从相邻列表中删除任何节点），然后在另一个循环中从相邻列表中删除节点（已添加到邻居列表中）。

# java - java中带有函数的if语句

> ID：15086006
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:55:09.437
> 
> 标签：java, if-statement

所以我正在尝试计算国民保险，我正在使用 3 个 IF 语句。

```
/does not work
public double calculateNotContOut(){
    if (calculateWeeklyEarning()<upperEarningLevel){
        return (((calculateWeeklyEarning()-primaryThreshold)*primaryClassBetween)*52);
    }
    else {
        return (((upperEarningLevel-primaryThreshold)*primaryClassBetween+(calculateWeeklyEarning()-upperEarningLevel)*primaryClassAbove)*52);
    }
}
//does not work
public double calculateContOut(){
    if (calculateWeeklyEarning()<upperEarningLevel){
        return (((calculateWeeklyEarning()-primaryThreshold)*calculateReducedContribution())*52);
    }
    else{
        return (((upperEarningLevel-primaryThreshold)*calculateReducedContribution()+(calculateWeeklyEarning()-upperEarningLevel)*primaryClassAbove)*52);
    }
}

public double calculateNationalInsurance(){
    if (contractedOut){
        return (calculateContOut());
    }
    else {
        return (calculateNotContOut());
    }
} 
```

它们不返回正确的值。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:58:19.040

在 Java 中，如果条件只处理`Boolean`类型或`boolean`前置。

`calculateWeeklyEarning()`确保和的返回值是`upperEarningLevel`可比较的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:00:19.210

检查 calculateWeeklyEarning() 返回的是否小于或等于 upperEarningLevel。if语句没有问题。

# jquery - 当使用 Anchor 标签调用 Phone-Gap/Jquery Mobile 应用程序的某些页面时，它不会触发 onDeviceReady

> ID：15086013
> 
> 赞同：0
> 
> 时间：2013-02-26T09:55:40.107
> 
> 标签：jquery, cordova, jquery-mobile

我在我的应用程序中使用带有 jquery mobile 的 phonegap。

我陷入了一个奇怪的问题，并尝试了从 StackOverflow 上的许多问题中获得的解决方案，但似乎没有任何效果，所以在这里询问。

问题是：

当我调用一个页面时：

```
window.location.href="page1.html"//it works 
```

它会触发 onDeviceReady 但是当我使用锚标记从 jQueryMobile 导航栏 li 标记调用它时，它只会加载正文，但无论我做什么都不会调用任何事件。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8">

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
        <script type="text/javascript">

            function onBodyLoad()
            {
                document.addEventListener("deviceready", onDeviceReady, false);
            }

            function onDeviceReady()
            {
                alert("testing");
                //my things
            }

            </script>

        </head>

<body onload="onBodyLoad()">
    <div data-role="header" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>

                <li><a href="Page1.html" data-theme="a">page1</a></li>
                <li><a href="Page2.html" data-theme="a" class="ui-btn-active ui-state-persist">page2</a></li> <!-- these two pages get called but doesn't fires onDeviceReady or onBodyLoad -->

            </ul>
        </div><!-- /navbar -->
    </div>
</body>
</html> 
```

也试过这个，但没有奏效：

```
document.addEventListener("deviceready", onDeviceReady, false); 
```

任何建议如何解决这个问题？谢谢。

注意：这些答案（可能重复）不起作用。

[jQuery Mobile & PhoneGap deviceReady() 未触发](https://stackoverflow.com/questions/8815007/jquery-mobile-phonegap-deviceready-not-fired)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:09:00.563

这是因为jquery Mobile截获了锚标签使用ajax获取HTML而不是直接改变页面。在您的情况下，它使用 ajax 获取 Page1.html，并且不会执行 Page1.html 中的 javascript。
您将`data-ajax="false"`在锚标记中指定以刷新页面

```
<a href="Page1.html" data-theme="a" rel="external" data-ajax="false">page1</a> 
```

要更多地了解 abour jquery Mobile：http: [//jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html](http://jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html)

此外，最好遵循 jquery Mobile 中推荐的这种结构

```
<div data-role="page" id="Page1"> 
    <div data-role="header">...</div> 
    <div data-role="content">...</div> 
    <div data-role="footer">...</div> 
</div> 
```

如果您想在页面创建时执行某些操作，请将事件绑定到您的页面

```
$( '#Page1' ).live('pagecreate',function(event){
  alert("Hello world");
}); 
```

# gwt - FormItemIcon smartgwt 与 gwt 平台错误的 href

> ID：15086014
> 
> 赞同：1
> 
> 时间：2013-02-26T09:55:42.003
> 
> 标签：gwt, smartgwt, gwt-platform, gwtp

长期以来，我一直面临着一个问题`Smartgwt & gwtp`。

`FormItemIcon`是一个`element`。向此元素添加 a`SmartGWT`时，它会根据我的理解添加 a 并广泛使用which 是目标，但由于此元素添加 a而不是 它会导致历史混乱。`click handler``"click" event``GWTP``history``<a href="#"``<a href="javascript();">`

问题是，为什么当我将 a 添加`clickHeandler`到 a时`FormItemIcon`，它会添加一个`<a href="#"`元素。

感谢您的帮助，祝您有美好的一天。

# cakephp - 在另一个视图中访问视图变量 -Cakephp

> ID：15086016
> 
> 赞同：1
> 
> 时间：2013-02-26T09:55:58.413
> 
> 标签：cakephp

我有一个名为 View1.ctp 的视图。在这个视图中，我正在调用一个名为“Captcha”的控制器函数，它的视图是 captcha.ctp。我在视图 captcha.ctp 中有一个名为 $text 的变量。我想访问这个 $text我 view1.ctp 中的变量。我该怎么办？（注：Cakephp 版本-2.3） `View1.ctp`

```
 <h1>Add Comment</h1>
      <?php
       $post_id= $posts['Post']['id'];
       echo $this->Form->create('Comment',array('action' => 'comment','url' =>          array($post_id,$flag)));
        echo $this->Form->input('name');
        echo $this->Form->input('email');
        echo $this->Form->input('text', array('rows' => '3'));
        echo "Enter Captcha Code:    ";  
        echo $this->Html->image(
       array('controller' => 'posts', 'action' => 'captcha'));
       echo $this->Form->input('code');
       echo $this->Form->end('Add comment'); 
          ?>

         captcha.ctp:

          <?php 
           $this->Session->read(); 
           $text = rand(10000,99996); 
           $_SESSION["vercode"] = $text; 
           $height = 25; 
           $width = 65; 
           $image_p = imagecreate($width, $height); 
           $black = imagecolorallocate($image_p, 0, 0, 0); 
           $white = imagecolorallocate($image_p, 255, 255, 255); 
           $font_size = 14; 
           imagestring($image_p, $font_size, 5, 5, $text, $white); 
           imagejpeg($image_p, null, 80); 
           ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:21:14.853

更好的方法是将 Captcha 视图改为[Helper](http://book.cakephp.org/2.0/en/views/helpers.html)，这样更合适。因此，将 captcha.ctp 移动到 app/View/Helper/CaptchaHelper.php，并将其内容包装在一个类中，例如：

```
<?php
App::uses('AppHelper', 'View/Helper');

class CaptchaHelper extends AppHelper {

    function create() {
        // This line doesn't make much sense as no data from the session is used
        // $this->Session->read(); 

        $text = rand(10000, 99996); 

        // Don't use the $_SESSION superglobal in Cake apps
        // $_SESSION["vercode"] = $text; 

        // Use SessionComponent::write instead
        $session = new SessionComponent(new ComponentCollection());
        $session->write('vercode', $text);

        $height = 25; 
        $width = 65; 
        $image_p = imagecreate($width, $height); 
        $black = imagecolorallocate($image_p, 0, 0, 0); 
        $white = imagecolorallocate($image_p, 255, 255, 255); 
        $font_size = 14; 
        imagestring($image_p, $font_size, 5, 5, $text, $white);

        // Return the generated image
        return imagejpeg($image_p, null, 80);
    }

} 
```

然后在您的 PostsController 中，添加`Captcha`到 helpers 数组：

```
public $helpers = array('Captcha'); 
```

（或者，如果您已经有一个辅助数组，只需将其附加到该数组即可。）

然后从您的 View1.ctp 中，您可以调用助手返回图像：

```
echo $this->Html->image($this->Captcha->create()); 
```

它的“预期”值将存储在 Session key`vercode`中，您也可以在表单处理逻辑中从 PostsController 中读取该值。

# java - 从 jar 文件连接到 XML 文件

> ID：15086020
> 
> 赞同：2
> 
> 时间：2013-02-26T09:56:00.507
> 
> 标签：java

即使我为它生成 jar 文件，我在哪里可以放置 XML 文件以使程序能够访问它？

当我将 XML 文件放入项目文件时，程序成功运行为以下代码：

```
public class one {

    public final static void main(String[] args) throws Exception {

      FileInputStream file = new java.io.FileInputStream("document.xml");//i put document.xml in project file
      javax.xml.parsers.DocumentBuilderFactory dbf = javax.xml.parsers.DocumentBuilderFactory.newInstance();
      dbf.setCoalescing(true);
      javax.xml.parsers.DocumentBuilder db = dbf.newDocumentBuilder();
      org.w3c.dom.Document doc = db.parse(file);

      one obj = new one ();
      obj.changeValue(doc, "192837465", "192837465");
      obj.save("document.xml",doc);
    }

    public void changeValue(org.w3c.dom.Document doc, String oldValue, String NewValue) throws Exception{
      org.w3c.dom.Element root = doc.getDocumentElement();
      org.w3c.dom.NodeList childNodes = root.getElementsByTagName("Employee");
      for (int i = 0; i < childNodes.getLength(); i++) {
        org.w3c.dom.NodeList subChildNodes = childNodes.item(i).getChildNodes();
        for (int j = 0; j < subChildNodes.getLength(); j++) {
          try {
             if (subChildNodes.item(j).getTextContent().equals(oldValue)) {
                subChildNodes.item(j).setTextContent(NewValue);
             }
          } catch (Exception e) {
              e.printStackTrace();
          }
        }
      }
    }

    public void save(String url ,org.w3c.dom.Document doc) throws Exception {

        javax.xml.transform.TransformerFactory factory1 = javax.xml.transform.TransformerFactory.newInstance();
        javax.xml.transform.Transformer transformer = factory1.newTransformer();
        transformer.setOutputProperty(javax.xml.transform.OutputKeys.INDENT, "yes");
        java.io.StringWriter writer = new java.io.StringWriter();
        javax.xml.transform.stream.StreamResult result = new javax.xml.transform.stream.StreamResult(writer);
        javax.xml.transform.dom.DOMSource source = new javax.xml.transform.dom.DOMSource(doc);
        transformer.transform(source, result);
        String s = writer.toString();
        System.out.println(s);

        java.io.FileWriter fileWriter = new java.io.FileWriter(url);
        java.io.BufferedWriter bufferedWriter = new java.io.BufferedWriter(fileWriter);

        bufferedWriter.write(s);

        bufferedWriter.flush();
        bufferedWriter.close();
    }
} 
```

但是当我使用 eclipse 在 jar 文件中制作程序并使用以下命令从命令提示符运行文件时：

```
java -jar xml.jar 
```

它给了我这个例外：

```
Exception in thread "main" java.io.FileNotFoundException: document.xml (The system cannot find the file specified)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(Unknown Source)
        at java.io.FileInputStream.<init>(Unknown Source)
        at one.main(one.java:13) 
```

为什么会出现这个错误以及如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:56:40.573

由于您在更改其内容后将文件保存回来，因此您更有可能不将其打包在 xml.jar 中，而是将其作为单独的文件保留在文件系统中。要使用 `FileInputStream file = new java.io.FileInputStream("document.xml");`它访问文件，必须在该命令的**同一工作目录**`java -jar xml.jar`中。

这会起作用

```
- mydir\
    - xml.jar
    - document.xml 
```

这不会

```
- mydir\
    - xml.jar
    - subdir\
       - document.xml 
```

为了避免所有这些麻烦，我建议您不要在 java 类中对文件名进行硬编码，而是将其作为参数传递给您的主类

```
java -jar xml.jar document.xml 
```

或者

```
java -jar xml.jar C:\somedir\somesubdir\document.xml 
```

并按如下方式访问它：

```
FileInputStream file = new java.io.FileInputStream(args[0]); 
```

**编辑**

如果您想将 xml 打包到 jar 文件中，则可以使用[getResourceAsStream(String)](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)轻松完成读取 - 如另一篇文章所述 - 以及 jar 内资源的限定名称如下：

```
InputStream is = getResourceAsStream("com/my/pack/age/document.xml"); 
```

写回文件是可能的，但复杂且不鼓励，因为它是错误的阅读更多[here](https://stackoverflow.com/questions/4056682/how-can-my-java-program-store-files-inside-of-its-jar-file)和[here](https://stackoverflow.com/questions/4305709/save-something-into-jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:06:20.053

使用 ClassLoader#getResourceAsStream 而不是 FileInputStream 。[您可以在getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)中找到类似的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:20:32.237

您必须以相对方式访问文件，
例如尝试

```
InputStream file = Thread.currentThread().getContextClassLoader()
                    .getResourceAsStream("document.xml"); 
```

代替

```
String fileLocation = "src/document.xml";
File xmlFile = new File(fileLocation);
FileInputStream file = new java.io.FileInputStream(xmlFile); 
```

然后
您的应用程序将以两种方式访问​​该文件

1.  开发环境（来自 Eclipse）和
2.  可运行环境（来自 Jar）

# c# - 任意成员变量的任意计算

> ID：15086024
> 
> 赞同：2
> 
> 时间：2013-02-26T09:56:09.240
> 
> 标签：c#, lambda

考虑这个简单的例子：

```
class Foo
{
    public int a;
    public int b;
    public int c;
    public List<Foo> foos; // This complicates matters a bit
} 
```

现在我想计算任何成员的总和/最小值/最大值/平均值等 - 包括`Foo`孩子。我想为此创建一个通用功能，因此我不必重复代码。

我想像这样的函数调用：

```
double sum = Calculate<double>(someFoo, sum => (f => f.a));
int count = Calculate<int>(someFoo, count => (f => 1 + foo.Length)); 
```

因此，**对 的任意成员的任意**操作`Foo`。这可以在 C# 4.0 中完成吗？例如使用[动作](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:58:30.950

你可以这样做。你的语法有点不对劲。它看起来像这样：

```
double sum = Calculate<double>(someFoo, f => f.a);
int count = Calculate<int>(someFoo, f => 1 + f.Length); 
```

该方法如下所示：

```
public T Calculate<T>(Foo foo, Func<Foo, T> calculator)
{
    return calculator(foo);
} 
```

但是，所有这些对于`Foo`. 更有可能的是，`someFoo`应该真的是`someFoos`，即多个对象。此外，我猜您也希望能够指定聚合方法。
那会变成`Calculate`这样：

```
public T Calculate<T>(IEnumerable<Foo> foo, Func<Foo, T> calculator,
                      Func<IEnumerable<T>, T> aggregate)
{
    return aggregate(foo.Select(calculator));
} 
```

用法：

```
List<Foo> someFoos = ...;
var sum = Calculate(someFoos, x => x.a, Enumerable.Sum)
var count = Calculate(someFoos, x => 1 + x.Length, Enumerable.Count) 
```

为了使其全部递归，最简单的方法是使用一个方法将`Foo`对象及其所有子对象作为平面列表返回：

```
public IEnumerable<Foo> Flatten(Foo foo)
{
    yield return foo;
    foreach(var child in foo.Children.SelectMany(Flatten))
        yield return child;
} 
```

使用此方法`Calculate`会导致：

```
public T Calculate<T>(IEnumerable<Foo> foo, Func<Foo, T> calculator,
                      Func<IEnumerable<T>, T> aggregate)
{
    return aggregate(Flatten(foo).Select(calculator));
} 
```

* * *

说了这么多，写了这么多，我要问：为什么不直接使用普通的LINQ呢？

```
Flatten(foo).Select(f => f.a).Sum();
Flatten(foo).Select(f => 1 + f.Length).Count(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:07:24.673

编写一个帮助函数，为您提供所有`Foo`s：

```
IEnumerable<Foo> SelfAndDescendants
{
  get
  {
    yield return this;
    foreach(var child in foos)
      foreach(var descendant in SelfAndDescendants(child)
        yield return descendant;
  }
} 
```

然后您可以简单地使用普通 LINQ 进行聚合：`root.SelfAndDescendents.Sum(f=>f.a)`

* * *

如果您想进一步推动可重用性，您可以使用通用辅助函数：

```
public static IEnumerable<T> DepthFirstTopDownTraversal(T root, Func<T, IEnumerable<T>> children)
{
    Stack<T> s=new Stack<T>();
    s.Push(root);
    while(s.Count>0)
    {
      T current = s.Pop();
      yield return current;
      foreach(var child in children(current))
        s.Push(child);
    }
} 
```

然后实现`SelfAndDescendats`为`return DepthFirstTopDownTraversal(this, f=>f.foos);`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:59:49.757

是的，你可以这么做。根据你要调用`Calculate`方法的方式，可以定义如下：

```
private T Calculate<T>(Foo foo, Func<Foo, Func<Foo, T>> func) {
    //do something here...
} 
```

**编辑：**也许它没有太大意义，所以如果你能给我们提供一个预期输入/输出的例子，那将会很有用。

# android - Android中的微调器设计

> ID：15086025
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:56:18.447
> 
> 标签：android

嗨朋友们，我需要帮助才能在 Spinner Design 中进行修改。我正在使用 Simple Spinner，当我在后台调用 xml 其他文件时，它显示不正确。

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="medicine_prompt">Choose a Medicine</string>

    <string-array name="medicine_arrays">
        <item>Strepcil</item>
        <item>Adoxa</item>
        <item>Benadrill</item>
        <item>Methamphetamine</item>
        <item>Crack Cocaine</item>
        <item>Ciclosporin</item>
        <item>Mesalazine</item>
        <item>Decold</item>
    </string-array>

</resources>

<Spinner
        android:id="@+id/spinner1"`enter code here`
        android:layout_width="150sp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="27dp"
        android:layout_marginTop="25dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:06:58.073

```
Spinner spin = (Spinner) findViewById(R.id.spinner);
        spin.setOnItemSelectedListener(this);

        ArrayAdapter aa = new ArrayAdapter(
            this,
            android.R.layout.simple_spinner_item, 
            items);

    aa.setDropDownViewResource(
    android.R.layout.simple_spinner_dropdown_item);
    spin.setAdapter(aa); 
```

如果您使用此代码，则可以轻松查看可以更改布局的位置。如果它是你想要的雪橇，请说出它的名字。

# c# - 为什么 Windows 窗体应用程序 (C#) 死锁以及如何避免其锁定？

> ID：15086026
> 
> 赞同：2
> 
> 时间：2013-02-26T09:56:22.747
> 
> 标签：c#, multithreading, debugging, synchronization, deadlock

根据文章[Lock Up Unlocked](http://yacsharpblog.blogspot.ru/2008/07/lock-up-unlocked.html)对死锁的 C# Windows 窗体应用程序实施更改后， 我仍然遇到与文章[Locked Up 的先前代码相同的问题！](http://yacsharpblog.blogspot.ru/2008/07/locked-up.html)

也就是说，在快速单击按钮几次后，应用程序会挂起（变得无响应）。

为什么？
以及如何纠正？

```
using System;
using System.Windows.Forms;
using System.Threading;

namespace LockupUnlocked
{
  public partial class Form1 : Form
  {
    public Form1()
    {
      InitializeComponent();
      _t = new Thread(new ParameterizedThreadStart(WorkerThread));
    }

    private Thread _t;
    private object lockObject = new object();

    private bool StopThread = false;  ////changes added to avoid deadlock

    private void WorkerThread(object sender)
    {
      Thread.Sleep(1000);
      //while (true)
      while (!StopThread)//changes added to avoid deadlock
      {
        string result = "This is a Test";
        IAsyncResult aResult;////changes added to avoid deadlock
        lock (lockObject)
        {
          Thread.Sleep(25);
          //lblResult.Invoke(new MethodInvoker(delegate { lblResult.Text = result; }));
          aResult = lblResult.BeginInvoke//changes to avoid deadlock
            (new MethodInvoker(delegate { lblResult.Text = result; }));
        }
        lblResult.EndInvoke(aResult);//changes added to avoid deadlock
        Thread.Sleep(500);
      }
    }
    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
      StopThread = true;
    }
    private void Form1_Load(object sender, EventArgs e)
    {
      _t.Start();
    }

    private void button1_Click(object sender, EventArgs e)
    {
      lock (lockObject)//changes added to avoid deadlock
      {
        lblResult.Text = "Override the Test";
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:13:52.150

对我来说，这看起来像是锁争用，不一定是死锁。

您每 25 毫秒（不是 25 秒，那将是 25000）迭代一次 while 循环，然后单击按钮会中断这个请求锁定，因为睡眠在锁定范围内，它可能永远不会被赋予该锁定。

如果不单击按钮，这可能看起来有效，但是，单击等待锁定的按钮将阻塞 UI 线程，导致出现“未响应”消息，因为表单没有可用的时间来绘制自己。

您实际上不需要锁定以更新文本值。当您从 a 调用时`Control`，它只是将消息推送到 UI 消息队列中，该队列在 UI 线程上同步处理。您可以做的最糟糕的事情是竞争条件，它不会破坏任何共享状态。

删除锁定，代码应该仍然可以按预期工作。

* * *

我不愿提供任何示例代码，因为我不知道您要使用此示例实现什么目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:34:50.887

在 Windows.Forms 中使用需要 GUI 访问的冲突线程的模式涉及 InvokeRequired 属性和 Invoke 函数。那么就不需要加锁了。

```
namespace WindowsFormsApplication1
{
  using System;
  using System.Threading;
  using System.Windows.Forms;

  public partial class Form1 : Form
  {
    private Thread thread;

    public Form1()
    {
      this.InitializeComponent();
      this.thread = new Thread(this.WorkerThread);
    }

    private void WorkerThread(object sender)
    {
      Thread.Sleep(1000);

      while (true)
      {
        Thread.Sleep(25);

        this.SetText("from thread");

        Thread.Sleep(500);
      }
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
      this.thread.Abort();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
      this.thread.Start();
    }

    /// <summary>
    /// This is a callback for the SetText Method.
    /// </summary>
    /// <param name="text">The text.</param>
    private delegate void SetTextCallback(string text);

    /// <summary>
    /// This sets a text. 
    /// It's thread safe, you can call this function from any thread. 
    /// If it's not called from the UI-thread, it will invoke itself
    /// on the UI thread.
    /// </summary>
    /// <param name="text">The text.</param>
    private void SetText(string text)
    {
      if (this.InvokeRequired)
      {
        this.Invoke(new SetTextCallback(this.SetText), text);
      }
      else
      {
        this.lblResult.Text = text;  
      }
    }

    private void Button1_Click(object sender, EventArgs e)
    {
      this.SetText("from button");
    }
  }
} 
```

# c - 二维数组，没有打印正确的元素？

> ID：15086038
> 
> 赞同：1
> 
> 时间：2013-02-26T09:57:12.050
> 
> 标签：c, multidimensional-array

似乎一切都是正确的，但是当我打印时，它会将所有元素打印为零...请帮助我

```
#include <stdio.h>
#include <stdlib.h>

#define COL 4
#define ROW 3

int y[3][4] = {{1, 2, 3},
               {4, 5, 6},
               {7, 8, 9}
                        };        

int main()
{
   int i,j;

   for(i=0;i<=ROW;i++)
   {

      for(j=0;j<=COL;j++)
      {
          printf("Value at col %d and row %d, is : %d\n",COL,ROW,y[ROW][COL]);
      }
   }

 } 
```

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:59:27.827

您的代码中有几个问题：

*   您的循环将一个元素计数到最远，它们从 0**到并包括**ROW/COL，而您的数组从 0**到**COL/ROW。使用`for(i=0; i < ROW; i++)`. 注意`<`而不是你的`<=`! （COL 循环也是如此）
*   您交换了`printf()`语句中的行和列，首先使用列然后使用行。
*   您没有使用 中的变量`printf()`，而是使用`printf("Value at col %d and row %d, is : %d\n",j,i, y[i][j]);`。
*   你的数组只有 3 个`COL`umns，而不是`#defined`4 个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:58:39.483

```
printf("Value at col %d and row %d, is : %d\n",i,j,y[i][j]); 
```

您正在使用 ROW 和 COL 作为偏移量而不是循环变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:10:35.043

数组元素通过索引访问使用 i & j 访问数组元素，例如 i>=0 和 i< ROW，例如

```
printf("Col:%d, Row:%d, Value:%d", i, j,y[i][j]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:58:53.340

改变

> printf("列 %d 和行 %d 处的值是：%d\n",COL,ROW,y[ROW][COL]);

进入

> printf("列 %d 和行 %d 处的值是：%d\n",i,j, y[i][j]);

另请注意，您的数组维度是**3;4**，然后初始化为**3;3**！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:59:57.547

```
 printf("Value at col %d and row %d, is : %d\n",COL,ROW,y[ROW][COL]); 
```

有了这个，你正在打印：`y[ROW][COL]`而你打算`y[i][j]`

由于它调用未定义的行为，您也正在越界访问。

您的条件应该是：`i<ROw`并且`j<COL`在 for 循环中。

# python - Python 2 和 Python 3 中 exec 函数的行为

> ID：15086040
> 
> 赞同：46
> 
> 时间：2013-02-26T09:57:18.190
> 
> 标签：python, python-2.7, python-3.x, exec

以下代码给出了 in`Python2`和 in不同的输出`Python3`：

```
from sys import version

print(version)

def execute(a, st):
    b = 42
    exec("b = {}\nprint('b:', b)".format(st))
    print(b)
a = 1.
execute(a, "1.E6*a") 
```

`Python2`印刷：

```
2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)]
('b:', 1000000.0)
1000000.0 
```

`Python3`印刷：

```
3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)]
b: 1000000.0
42 
```

为什么将函数内部`Python2`的变量绑定到函数字符串中的值，而没有这样做？我怎样才能实现in的行为？我已经尝试将字典传递给全局变量和局部变量以在其中起作用，但到目前为止没有任何效果。`b``execute``exec``Python3``Python2``Python3``exec``Python3`

**- - 编辑 - -**

在阅读了 Martijns 的回答后，我进一步分析了这一点`Python3`。在下面的示例中，我给出了`locals()`字典`d`，`exec`但`d['b']`打印的不仅仅是打印`b`。

```
from sys import version

print(version)

def execute(a, st):
    b = 42
    d = locals()
    exec("b = {}\nprint('b:', b)".format(st), globals(), d)
    print(b)                     # This prints 42
    print(d['b'])                # This prints 1000000.0
    print(id(d) == id(locals())) # This prints True
a = 1.
execute(a, "1.E6*a")

3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)]
b: 1000000.0
42
1000000.0
True 
```

`d`和的 id 比较`locals()`表明它们是同一个对象。但在这些条件下`b`应该是一样的`d['b']`。我的例子有什么问题？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-26T10:59:11.490

`exec`Python 2 和Python 3之间有很大的不同`exec()`。您将`exec`其视为一个函数，但它确实是 Python 2 中的一个*语句*。

由于这种差异，您不能在 Python 3 中使用 更改函数范围内的局部变量`exec`，即使在 Python 2 中是可能的。甚至以前声明的变量都没有。

`locals()`只反映一个方向的局部变量。以下从未在 2 或 3 中起作用：

```
def foo():
    a = 'spam'
    locals()['a'] = 'ham'
    print(a)              # prints 'spam' 
```

在 Python 2 中，使用该`exec`语句意味着编译器知道关闭局部作用域优化（例如，从 切换`LOAD_FAST`到`LOAD_NAME`，在局部和全局作用域中查找变量）。作为`exec()`一个函数，该选项不再可用，并且函数范围现在*总是*被优化。

此外，在 Python 2 中，该`exec`语句使用 将找到的所有变量显式复制`locals()`回函数 locals `PyFrame_LocalsToFast`，但前提是没有提供*globals*和*locals*参数。

正确的解决方法是为您的`exec()`调用使用新的命名空间（字典）：

```
def execute(a, st):
    namespace = {}
    exec("b = {}\nprint('b:', b)".format(st), namespace)
    print(namespace['b']) 
```

[`exec()`文档](https://docs.python.org/3/library/functions.html#exec)对此限制非常明确：

> **注意：**默认*局部*变量的作用如下面的函数所述：不应尝试`locals()`修改默认*局部变量字典。*如果您需要在函数返回后查看代码对局部变量的影响，请传递显式*局部变量字典。*`exec()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-19T21:50:56.403

我会说这是python3的一个错误。

```
def u():
    exec("a=2")
    print(locals()['a'])
u() 
```

打印“2”。

```
def u():
    exec("a=2")
    a=2
    print(a)
u() 
```

打印“2”。

但

```
def u():
    exec("a=2")
    print(locals()['a'])
    a=2
u() 
```

失败了

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in u
KeyError: 'a' 
```

--- 编辑 --- 另一个有趣的行为：

```
def u():
    a=1
    l=locals()
    exec("a=2")
    print(l)
u()
def u():
    a=1
    l=locals()
    exec("a=2")
    locals()
    print(l)
u() 
```

输出

```
{'l': {...}, 'a': 2}
{'l': {...}, 'a': 1} 
```

并且

```
def u():
    l=locals()
    exec("a=2")
    print(l)
    print(locals())
u()
def u():
    l=locals()
    exec("a=2")
    print(l)
    print(locals())
    a=1
u() 
```

输出

```
{'l': {...}, 'a': 2}
{'l': {...}, 'a': 2}
{'l': {...}, 'a': 2}
{'l': {...}} 
```

显然，`exec`对本地人的作用如下：

*   如果在其中设置了一个变量`exec`并且该变量是一个局部变量，则`exec`修改内部字典（由 返回的字典`locals()`）并且不将其返回到其原始状态。更新字典的调用`locals()`（如 python 文档的第 2 节所述），其中设置的值`exec`被遗忘。需要调用`locals()`更新字典不是python3的bug，因为有文档，但是不直观。`exec`此外，在内部修改局部变量不会改变函数的局部变量这一事实是与 python2 的一个记录差异（文档说“如果您需要在函数 exec() 之后查看代码对局部变量的影响，请传递一个显式的局部变量字典Returns")，我更喜欢 python2 的行为。
*   如果在其中设置了一个变量`exec`并且该变量之前不存在，则`exec`修改内部字典，除非该变量是在之后设置的。似乎`locals()`更新字典的方式有错误；`exec`此错误通过调用`locals()`after可以访问其中设置的值`exec`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-23T18:07:26.027

把它们加起来：

*   Python 2 和 Python 3 中都没有错误
*   的不同行为`exec`源于`exec`Python 2 中的语句，而它成为 Python 3 中的函数。

> 请注意：
> 
> 我在这里不说什么新鲜事。这只是在所有其他答案和评论中发现的真相的集合。我在这里尝试的只是为一些更晦涩的细节带来亮点。

Python 2 和 Python 3 之间的唯一区别是，事实上，`exec`它能够在 Python 2 中更改封闭函数的本地范围（因为它是一个语句并且可以访问当前的本地范围）并且在 Python 中不能再这样做了3（因为它现在是一个函数，所以在它自己的本地范围内运行）。

然而，愤怒与声明无关`exec`，它仅源于一个特殊的行为细节：

`locals()`返回一些东西，我想称之为“一个范围可变的单例，在调用之后`locals()`，总是只引用本地范围内的所有变量”。

请注意，`locals()`Python 2 和 3 之间的行为没有改变。因此，这种行为以及`exec`工作方式的改变看起来是不稳定的，但并非如此，因为它只是暴露了一些细节，这些细节一直都存在。

“在本地范围内引用变量的范围可变单例”是什么意思？

*   它是 a `scope-wise singleton`，因为无论您在同一范围内多久调用`locals()`一次，返回的对象总是相同的。
    *   因此观察到， that `id(d) == id(locals())`，因为`d`和`locals()`引用同一个对象，同一个单例，因为只能有一个（在不同的范围内你会得到一个不同的对象，但在同一个范围内你只能看到这个单一的对象）。
*   它是`mutable`，因为它是一个普通的对象，所以你可以改变它。
    *   `locals()`强制对象中的所有条目再次引用本地范围内的变量。
    *   如果您更改对象中的某些内容（通过`d`），这会更改对象，因为它是普通的可变对象。
*   单例的这些更改不会传播回本地范围，因为对象中的所有条目都是`references to the variables in the local scope`. 因此，如果您更改条目，这些会更改单例对象，而不是“更改引用之前引用指向的位置”的内容（因此您不会更改局部变量）。

    *   在 Python 中，字符串和数字是不可变的。这意味着，如果您将某些内容分配给条目，则不会更改条目指向的对象，而是引入一个新对象并将对该条目的引用分配给该条目。例子：

        ```
        a = 1
        d = locals()
        d['a'] = 300
        # d['a']==300
        locals()
        # d['a']==1 
        ```

    除了优化之外：

    *   创建新对象 Number(1) - 这是其他一些单例，顺便说一句。
    *   将指向此 Number(1) 的指针存储到`LOCALS['a']`
        （其中`LOCALS`应为内部本地范围）
    *   如果不存在，则创建`SINGLETON`对象
    *   update `SINGLETON`，所以它引用了所有条目`LOCALS`
    *   `SINGLETON`存储 in的指针`LOCALS['d']`
    *   创建 Number(300)，它*不是*单例，顺便说一句。
    *   将指向这些 Number(300) 的指针存储到`d['a']`
    *   因此`SINGLETON`也更新了。
    *   但`LOCALS`没有更新，**所以**局部变量`a`or`LOCALS['a']`仍然是 Number(1)
    *   现在，`locals()`再次调用，`SINGLETON`更新。
    *   as`d`指`SINGLETON`，不`LOCALS`，`d`也改变！

> 有关这个令人惊讶的细节的更多信息，为什么`1`是单例而`300`不是单例，请参阅[https://stackoverflow.com/a/306353](https://stackoverflow.com/a/306353)
> 
> 但请不要忘记：数字是不可变的，因此如果您尝试将数字更改为另一个值，您实际上会创建另一个对象。

结论：

您无法将`exec`Python 2 的行为恢复到 Python 3（除非通过更改代码），因为无法再更改程序流之外的局部变量。

但是，您可以将 Python 3 的行为带到 Python 2，这样您今天就可以编写运行相同的程序，无论它们是使用 Python 3 还是 Python 2 运行。这是因为在（更新的）Python 2 中，您也可以使用`exec`类似函数的参数（实际上，它们是 2 元组或 3 元组），允许使用与 Python 3 中已知的相同语义的相同语法：

```
exec "code" 
```

（仅适用于 Python 2）变为（适用于 Python 2 和 3）：

```
exec("code", globals(), locals()) 
```

但请注意，这`"code"`不能再以这种方式改变本地封闭范围。另请参阅[https://docs.python.org/2/reference/simple_stmts.html#exec](https://docs.python.org/2/reference/simple_stmts.html#exec)

一些最后的话：

Python 3 中的变化`exec`是好的。因为优化。

在 Python 2 中，您无法优化 across `exec`，因为包含不可变内容的所有局部变量的状态可能会发生不可预测的变化。这不能再发生了。现在，函数调用的常规规则也适用于`exec()`所有其他函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:56:33.163

恐怕我无法准确解释，但它基本上来自函数内部的 b 是本地的，并且`exec()`似乎分配给全局 b 的事实。您必须在函数内部和 exec 语句中声明 b 是全局*的*。

试试这个：

```
from sys import version

print(version)

def execute1(a, st):
    b = 42
    exec("b = {}\nprint('b:', b)".format(st))
    print(b)

def execute2(a, st):
    global b
    b = 42
    exec("global b; b = {}\nprint('b:', b)".format(st))
    print(b)

a = 1.
execute1(a, "1.E6*a")
print()
execute2(a, "1.E6*a")
print()
b = 42
exec("b = {}\nprint('b:', b)".format('1.E6*a'))
print(b) 
```

这给了我

```
3.3.0 (default, Oct  5 2012, 11:34:49) 
[GCC 4.4.5]
b: 1000000.0
42

b: 1000000.0
1000000.0

b: 1000000.0
1000000.0 
```

可以看到，在函数之外，全局的 b 是自动拾取的。在函数内部，您正在打印本地 b。

请注意，我会认为`exec()`总是首先使用全局 b ，因此在 中`execute2()`，您不需要在`exec()`函数内声明它。但我发现这不起作用（这是我无法准确解释的部分）。

# xslt - 从日期时间格式中减去小时数

> ID：15086047
> 
> 赞同：1
> 
> 时间：2013-02-26T09:57:27.163
> 
> 标签：xslt

我有一个日期时间字段，它返回的值为：2013-02-01T10:00:00Z 我想从时间中减去 4 小时（我希望时间为 GMT-4）所以输出应该是 2013-02-01T06 :00:00Z

有人可以帮助我如何实现这一目标吗？

谢谢，尼蒂卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:54:25.703

为了实现您在 XSLT 2.0 中尝试执行的操作，您可以指定一个 xs:dayTimeDuration('PT4H') 并将其减去您拥有的 dateTime。

因此，如果您有以下 XML 文件：

```
<datetime value="2013-02-01T10:00:00Z" /> 
```

然后应用以下样式表：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xsl:output method="text" />

    <xsl:template match="datetime">
        <xsl:value-of select="xs:dateTime(@value) - xs:dayTimeDuration('PT4H')" />
    </xsl:template>

</xsl:stylesheet> 
```

您获得以下结果：

```
2013-02-01T06:00:00Z 
```

# jsf-2 - jsf2.0 - 如何在请求范围内获取其他 jsf 页面 bean 中的值

> ID：15086048
> 
> 赞同：1
> 
> 时间：2013-02-26T09:57:34.127
> 
> 标签：jsf-2

我有两个页面 myaccount.xhtml 和 selectbank.xhtml 在我的帐户页面中，有一个充值帐户选项，当用户按下提交按钮时，用户将在其中输入金额，然后它将使用以下 bean 方法转到选择银行页面。

```
public String gotoPayMethod() {
    FacesMessage doneMessage=new FacesMessage("Redirecting to Payment Type Page");
    FacesContext.getCurrentInstance().addMessage(null, doneMessage);
    return "SelectBank";
} 
```

当用户转到 selectbank 时，用户必须提交付款方式，但在此页面中，它显示金额为 null，这是在上一页中输入的。两个页面都使用相同的 bean，并且 bean 的范围是请求范围。

那么如何在不通过 URL GET 方法传递这些值的情况下访问该值。只是为了让我满意，我使用了会话范围，然后它可以工作，但我知道那不是正确的方法，因为我开始为每个页面使用会话范围，然后它就不会有效。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:20:43.913

好吧，如果您的 bean`RequestScoped`比您的两个页面都没有相同的 bean。这些 bean 会为每个请求重新创建，因此您应该传递参数。将您的退货声明更改`gotoPayMethod()`为：

```
return "SelectBank?faces-redirect=true&includeViewParams=true"; 
```

并`selectbank.xhtml`添加：

```
<f:metadata>
  <f:viewParam name="amount" value="#{bean.amount}" />
</f:metadata> 
```

将此调整为您的属性和 bean 名称。

如果使用参数不是解决方案，您可以在会话中添加此参数，并在检索时将其从第二个 bean 中的会话中删除：

```
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("amount", amount);
((HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest()).getSession().removeAttribute("amount"); 
```

删除属性的第二个构造是必要的，因为`Map`返回的`getSessionMap()`是不可变的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T10:38:42.847

您可以使用`#{flash}`将数据保留到下一个视图的对象。这样您就不需要处理视图参数。

详情来自`myaccount.xhtml`：

```
<h:form>
    <h:outputText value="Enter amount: " />
    <h:inputText value="#{flash.amount}" />
    <br/>
    <h:commandButton value="Go to payment method" action="#{bean.gotoPayMethod}" />
<h:form> 
```

`Bean`两种观点：

```
@ManagedBean
@RequestScoped
public class Bean {

    @ManagedProperty("#{flash}")
    private Flash flash;

    private int amount = -1;

    public Bean () {   }

    public String getAmount() {
        if(amount == -1) {
            int val = Integer.parseInt((String)flash.get("amount"));
            flash.keep("amount");
            amount = val;
        }
        return amount;
    }

    public Flash getFlash() {
        return flash;
    }

    public void setFlash(Flash flash) {
        this.flash = flash;
    }

    public String gotoPayMethod() {
        //do business job
        return "SelectBank?faces-redirect=true";
    }

} 
```

详情来自`selectbank.xhtml`：

```
<h:outputText value="Amount entered by user is #{bean.amount}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:24:42.707

您的用例不是简单的请求/响应周期，生命周期不止一个请求响应，这使其成为会话范围的候选者。

在 URL 中使用隐藏变量或 GET 参数不是好的做法，尤其是对于银行应用程序。在安全性如此重要的地方，不要在小内存占用空间上妥协。

如果闪存范围图简化了案例，您可以使用它，但我不会这样做。

**更新：**忘了提你也可以检查对话范围。

# mongodb - SQL to MapReduce：如何在 MongoDB 中完成 sql avg 函数？

> ID：15086051
> 
> 赞同：0
> 
> 时间：2013-02-26T09:57:37.870
> 
> 标签：mongodb, mapreduce

如何在 MapReduce MongoDB 中编写 sql avg 函数？我尝试了以下方法，将值相加并除以计数。但问题是我在哪里做，在减少功能或完成功能？

例如：我有以下文件

```
{
  "_id" : ObjectId("511b7d1b3daee1b1446ecdfe"),
  "l_linenumber" : 1,
  "l_quantity" : 17,
  "l_extendedprice" : 21168.23,
  "l_discount" : 0.04,
  "l_tax" : 0.02,
  "l_returnflag" : "N",
  "l_linestatus" : "O",
  "l_shipdate" : ISODate("1996-03-13T03:00:00Z"),
  "l_commitdate" : ISODate("1996-02-12T03:00:00Z"),
  "l_receiptdate" : ISODate("1996-03-22T03:00:00Z"),
  "l_shipinstruct" : "DELIVER IN PERSON",
  "l_shipmode" : "TRUCK",
  "l_comment" : "blithely regular ideas caj",
} 
```

SQL查询是：

```
select
    l_returnflag, 
    l_linestatus, 
    sum(l_quantity) as sum_qty,
    sum(l_extendedprice) as sum_base_price,
    sum(l_extendedprice*(1-l_discount)) as sum_disc_price,
    sum(l_extendedprice*(1-l_discount)*(1+l_tax)) as sum_charge,
    avg(l_quantity) as avg_qty, 
    avg(l_extendedprice) as avg_price,
    avg(l_discount) as avg_disc, 
    count(*) as count_order
from 
    lineitem
where 
    l_shipdate <= DATE_SUB('1998-12-01',INTERVAL 90 DAY)
group by 
    l_returnflag, 
    l_linestatus
order by 
    l_returnflag, 
    l_linestatus; 
```

我做了这个mapreduce函数：

```
db.runCommand({
    mapreduce: "lineitem",
    map: function Map() {
            var dataInicial = new Date("Dec 1, 1998");
            var dataFinal = new Date();
            dataFinal.setDate(dataInicial.getDate()-90);
                if( this.l_shipdate<=dataFinal) {
                    emit(
                        {returnflag: this.l_returnflag, linestatus: this.l_linestatus}, 
                        {
                            sum_qty: this.l_quantity,
                            sum_base_price: this.l_extendedprice,
                            sum_disc_price: this.l_extendedprice*(1-this.l_discount),
                            sum_charge: this.l_extendedprice*(1-this.l_discount)*(1+this.l_tax),
                            avg_qty: this.l_quantity,
                            avg_price: this.l_extendedprice,
                            avg_disc: this.l_discount,
                            count_order: 1
                        }
                    );
                }
        },
    reduce: function(key, values) {
                var ret = {sum_qty: 0, sum_base_price: 0, sum_disc_price: 0, sum_charge: 0, 
                            avg_qty: 0, avg_price: 0, avg_disc: 0, count_order: 0};
                for (var i = 0; i < values.length; i++) {
                    ret.sum_qty += values[i].sum_qty;
                    ret.sum_base_price += values[i].sum_base_price;
                    ret.sum_disc_price += values[i].sum_disc_price;
                    ret.sum_charge += values[i].sum_charge;
                    ret.avg_qty += values[i].avg_qty;
                    ret.avg_price += values[i].avg_price;
                    ret.avg_disc += values[i].avg_disc;
                    ret.count_order += values[i].count_order;
                }
                return ret;
            },
finalize: function(key, value) {
                value.avg_qty = value.avg_qty/value.count_order;
                value.avg_price = value.avg_qty/value.count_order;
                value.avg_disc = value.avg_qty/value.count_order;
            return value;
        },
    out: 'query001'
}); 
```

avg_qty、avg_price、avg_disc 的答案不正确。怎么回事？或者将在reduce函数中进行求和和除数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:40:05.820

以下是使用 MapReduce 的方法：

```
m = function (){
  emit( {returnflag: this.l_returnflag, linestatus: this.l_linestatus} , 
        { sum_base_price: this.l_extendedprice, count : 1 } );
};

r = function (name, values){
  var res = {sum_base_price : 0, count : 0};
  values.forEach (function (v) {
    res.sum_base_price += v[i].sum_base_price;
    res.count += v[i].count;
  }
  return res;
};

f = function(key, res){
  res.avg = res.sum_base_price / res.count;
  return res;
}; 
```

然后，调用 mapReduce：

```
db.lineitem.mapReduce( m, r, 
                   { finalize : f, 
                     out : {inline : 1}, 
                     query: {l_shipdate:{$lt:dataFinal}} 
                   }
); 
```

因此，您不是在 map 函数中进行过滤，而是在调用 map 之前在查询中进行过滤（这样更有效）。

在聚合框架中，它将是：

```
db.lineitem.aggregate( [
   {$match: {l_shipdate:{$lt:dataFinal}},
   {$group: { _id: {returnflag: "$l_returnflag", linestatus: "$l_linestatus"},
              sum_base_price: {$sum:"$l_extended_price"},
              avg_base_price: {$avg:"$l_extended_price"},
              count: {$sum: 1}
            }
   }
]) 
```

根据需要添加其他字段...

# c++ - C++ ofstream 删除和清理

> ID：15086054
> 
> 赞同：1
> 
> 时间：2013-02-26T09:57:42.560
> 
> 标签：c++, stl, standard-library, ofstream

我正在编写一个有时必须清理的 C++ ofstream - 我正在写入的文件应该被删除，并且类应该被删除和清理。

如何？（除了关闭它并按名称删除它）。

（至少该文件不应该以打开它的预期位置和文件名存在 - tempfile 目录可以）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:14:36.887

据我所知，没有其他办法。关闭文件并使用 `remove`其名称。

这可能最好由某种 RAII 类来处理；我经常使用一个`OutputFile`类，它隐式转换为`std::ostream&`（用于输出）。构造函数采用文件名；有一个`commit`关闭文件的函数，但是如果之前调用了析构函数`commit`，它不仅会关闭文件，还会删除它。类似地，有一个 `UpdateFile`类打开 `*filename*.new`-`commit`然后重命名 `*filename*`为`*filename*.bak` （删除任何以前存在的具有该名称的文件），然后移动`*filename*.new`到 `*filename*`. 析构函数删除 `*filename*.new`. （变体检查新内容是否与旧 in 不同`commit`，因此如果内容没有变化，文件时间戳不会改变。）

# sql - OrientDB 从查询中选择顶点、边对

> ID：15086055
> 
> 赞同：2
> 
> 时间：2013-02-26T09:57:43.647
> 
> 标签：sql, orientdb, graph-databases

在 OrientDb 图形数据库中，我试图获取有关顶点、边对的一些信息。

例如，考虑以下情况：

```
V1 ---E1---> V2
   ---E2---> V3 --E3--> V2 
```

我希望得到以下 3 行；

```
V1, E1
V1, E2
V3, E3 
```

我尝试了以下方法：

```
select label, flatten(out.label) from V
select label from (select flatten(out) from V)
select label, flatten(out) from V
select flatten(out) from V
select $current, label from (traverse out from V while $depth <= 1) where $depth = 1 
```

但这些解决方案似乎都没有返回我想要的。如何返回顶点、边对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:44:55.280

FLATTEN 运算符单独工作，因为获取一个字段并让它成为结果。我不明白你想做什么。你能写出预期的输出吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-15T09:34:36.630

使用 OrientDB，您尝试做的实际上非常简单，您似乎在考虑这个问题。

让我们创建您的示例：

```
V1 ---E1---> V2
   ---E2---> V3 --E3--> V2 
```

在 OrientDB 中，您可以按如下方式执行此操作：

```
/* Create nodes */
CREATE CLASS Node EXTENDS V
CREATE PROPERTY Node.name STRING (MANDATORY TRUE)
CREATE VERTEX Node SET name = 'V1'
CREATE VERTEX Node SET name = 'V2'
CREATE VERTEX Node SET name = 'V3'

/* Create edges */
CREATE CLASS Link EXTENDS E
CREATE PROPERTY Link.name STRING (MANDATORY TRUE)
CREATE EDGE Link
    FROM (SELECT FROM Node WHERE name = 'V1') 
    TO (SELECT FROM Node WHERE name = 'V2')
    SET name = 'E1'
CREATE EDGE Link
    FROM (SELECT FROM Node WHERE name = 'V1')
    TO (SELECT FROM Node WHERE name = 'V3')
    SET name = 'E2'
CREATE EDGE Link 
    FROM (SELECT FROM Node WHERE name = 'V3')
    TO (SELECT FROM Node WHERE name = 'V2')
    SET name = 'E3' 
```

这将创建以下图表：

[![示例 OrientDB 图](../Images/435269aabfe106c5d5cce2ce95a43224.png)](https://i.stack.imgur.com/RnARu.png)

现在稍微解释一下如何在 OrientDB 中查询。假设您加载一个顶点：`SELECT * FROM Node WHERE name = 'V1'`. 然后，要加载其他信息，请使用：

*   要加载所有传入顶点（跳过边）：`in()`
*   加载类的所有传入顶点`Link`（跳过边缘）：`in('Link')`
*   要加载所有传入边：`inE()`
*   加载类的所有传入边`Link`：`inE('Link')`
*   加载所有传出顶点（跳过边缘）：`out()`
*   加载类的所有传出顶点`Link`（跳过边缘）：`out('Link')`
*   要加载所有传出边：`outE()`
*   加载类的所有传出边`Link`：`outE('Link')`

因此，在您的情况下，您想要加载所有顶点及其传出边，所以我们这样做：

```
SELECT name, outE('Link') FROM Node 
```

它加载顶点的名称和指向传出边的指针：

[![OrientDB 查询示例](../Images/aaf9a969b0fbe95850c82e5712ec8294.png)](https://i.stack.imgur.com/4jyYx.png)

如果您想获得传出边的*名称列表，我们只需执行以下操作：*

```
SELECT name, outE('Link').name FROM Node 
```

这使：

[![OrientDB 查询示例 2](../Images/52b50758a8d67911af5299658086f0cb.png)](https://i.stack.imgur.com/qIDhM.png)

这正是您在问题中所要求的。如您所见，这在 OrientDB 中非常简单，您只需要意识到 OrientDB 比您想象的更智能 :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T13:32:54.527

Neo4j 中使用的 CYPHER 语法终于救了我。

```
start n=node(*) MATCH (n)-[left]->(n2)<-[right]-(n3) WHERE n.type? ='myType' AND left.line > right.line - 1 AND left.line < right.line + 1 RETURN n, left, n2, right, n3 
```

节点 n 是枢轴元素，可以在其上提供过滤器，就像在路径中的每个其他步骤上一样。对我来说，重要的是根据路径的其他部分选择进一步的步骤。

使用 OrientDb，我无法找到一种轻松将属性相互关联的方法。

# asp.net - 语句中的“{0,2:X2}”是什么意思 String.Format("{0,2:X2}", b);

> ID：15086057
> 
> 赞同：-2
> 
> 时间：2013-02-26T09:57:43.227
> 
> 标签：asp.net, sha1, string.format

代码：

```
 SHA1 sha = new SHA1CryptoServiceProvider();
        string hashedValue = string.Empty;
        //hash the data
        byte[] hashedData = sha.ComputeHash(Encoding.Unicode.GetBytes(str));

        //loop through each byte in the byte array
        foreach (byte b in hashedData)
        {
            //convert each byte and append
            hashedValue += String.Format("{0,2:X2}", b);
        } 
```

我搜索了传递给 String.Format() 的参数，但无法准确理解。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:03:50.757

```
Formatting the string in hexadecimal format... 
```

1.  X = 十六进制格式

2.  2 = 2 个字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:01:19.260

它基本上只是以大写十六进制格式格式化字符串 - 请参阅[文档](http://msdn.microsoft.com/en-gb/library/dwhawy9k.aspx)。

> 十六进制 ("X") 格式说明符将数字转换为十六进制数字字符串。格式说明符的大小写指示对于大于 9 的十六进制数字是使用大写还是小写字符。

这种特殊格式被称为[Composite Formatting](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)，因此将其分解：

```
{0 = parameterIndex, 2 = alignment :X2 = formatString} 
```

# scala - 从嵌套条件返回，for 循环，在 Scala 中的 try/catch 块

> ID：15086063
> 
> 赞同：0
> 
> 时间：2013-02-26T09:58:02.353
> 
> 标签：scala, for-loop, nested, return, try-catch

我有一个条件的嵌套块、一个 for 循环和一个 try/catch 块来返回一个元组：

```
 val (a, b) = {
    if (...) {
      for (...) {
        try {
          getTuple(conf)
        } catch {
          case e: Throwable => println(...)
        }
      }
      sys.exit
    } else {
      try {
        getTuple(userConf)
      } catch {
        case e: Throwable => println(...); sys.exit
      }
    }
  } 
```

如果`if`条件匹配，我想尝试 x 不同的`conf`配置。当`getTuple`抛出异常时，尝试下一个。当`getTuple`不抛出异常时，用结果填充元组。`getTuple`返回元组`(a,b)`。

问题：但是，当没有抛出异常时*，*`for`循环不会退出。我也尝试过，但这不起作用，因为它应该返回元组，而不仅仅是退出循环。`getTuple`*`break``for`*

 *我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:26:27.043

getTuple 应该评估为 a `Option[Tuple2[T,U]]`，而不是抛出异常，它具有更多含义并且不会破坏程序的流程。

这样，你可以有一个这样的：

```
val tuples: List[Option[Tuple2[T,U]] = for {
  c <- configs
} yield getTuple(c)

val firstWorkingConfig: Option[Tuples2[T,U]] = tuples.flatten.headOption

// Exit the program if no config is okay
firstWorkingConfig.getOrElse {
  sys.exit
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T11:49:08.867

我建议使用 Scala 的更多功能特性，而不是处理循环和异常。

假设我们有一个函数在某些输入上抛出异常：

```
def myfn(x: Double): Double =
  if (x < 0)
    throw new Exception;
  else
    Math.sqrt(x); 
```

我们可以将其重构为 return `Option`：

```
def optMyfn(x: Double): Option[Double] =
  if (x < 0)
    None;
  else
    Some(Math.sqrt(x)); 
```

或者，如果我们不想（或无法修改原始代码），我们可以简单地使用`Exception.Catcher`：

```
def optMyfn(x: Double): Option[Double]
  = scala.util.control.Exception.allCatch.opt(myfn(x)); 
```

现在让我们有一个数字序列，我们想要找到函数成功的第一个数字：

```
val testseq: Seq[Double] = Seq(-3.0, -2.0, 2.0, 4.0, 5.0); 
```

我们可以使用 Scala 的函数特性将函数应用于所有元素并找到第一个`Some`结果为

```
testseq.toStream.map(optMyfn _).flatten.headOption 
```

不使用它也可以工作`toStream`，但是我们会`optMyfn`不必要地调用所有元素，而不仅仅是我们需要找到第一个成功结果的那些元素——流使计算变得[惰性](https://en.wikipedia.org/wiki/Lazy_evaluation)。

（另一种选择是使用[views](http://www.scala-lang.org/docu/files/collections-api/collections_42.html)，例如

```
testseq.view.map(optMyfn _).collectFirst({ case Some(x) => x }) 
```

.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:12:40.437

这个电话在声明`sys.exit`中有点放错了地方。`if`如果 try 成功，它应该在`catch`子句中以允许返回 tupe。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:20:40.610

如果你想循环直到你得到一个工作元组，`while`循环更有意义。for 循环的语义是评估您正在迭代*的所有元素的主体。*由于您的目标是在满足条件的第一个之后停止，因此 while 循环似乎更自然。当然还有一些功能更强大的替代方案，例如：

*   将您包装`getTuple`在一个 中`Option`，其中`None`对应于一个异常。
*   将调用`getTuple`放在一些可迭代/可遍历的集合中
*   获取不是的第一个元素`None`

当我解释这个概念时，[Romain Sertelon](https://stackoverflow.com/a/15086664/1804173)举了一个很好的例子来说明这个想法......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T11:58:49.957

另一种解决方案是将整个块包装到一个方法中并使用 return 像：

```
 val (a: Type, b: Type) = setup(...)

  def setup(...) : (Type, Type) = {
    if (...) {
      for (...) {
        try {
          return getTuple(...)
        } catch {
          ...
        }
      }
      sys.exit
    } else {
      try {
        return getTuple(...)
      } catch {
        case e: Throwable => println(...); sys.exit
      }
    }
  } 
```

我认为我应该学习更多 Scala 的基础知识，但目前这行得通。

感谢您的回答。*

# c - 重新声明结构

> ID：15086066
> 
> 赞同：0
> 
> 时间：2013-02-26T09:58:05.203
> 
> 标签：c, struct, binary-tree

我试图避免使用`twalk()`in`search.h`

如您所见，`twalk`回调函数但未包含`void *`参数

```
/* Walk the nodes of a tree */
void
twalk(const void *vroot, void (*action)(const void *, VISIT, int))
{
    node *root = (node *)vroot;

    if (root != (node *)0 && action != (void (*)(const void *, VISIT, int))0)
        trecurse(root, action, 0);
}

void
action(const void *nodep, const VISIT which, const int depth)
{
    int *datap;

    switch (which) {
    case preorder:
        break;
    case postorder:
        datap = *(int **) nodep;
        printf("%6d\n", *datap);
        break;
    case endorder:
        break;
    case leaf:
        datap = *(int **) nodep;
        printf("%6d\n", *datap);
        break;
    }
} 
```

在我自己的文件中重新声明具有相同名称的相同结构（tsearch.c 中的 node_t）的行为是什么？

```
/* twalk() fake */

struct node_t
{
    const void *key;
    struct node_t *left;
    struct node_t *right;
    unsigned int red:1;
};

static void tmycallback(const xdata *data, const void *misc)
{
    printf("%s %s\n", (const char *)misc, data->value);
}

static void tmywalk(const struct node_t *root, void (*callback)(const xdata *, const void *), const void *misc)
{
    if (root->left == NULL && root->right == NULL) {
        callback(*(xdata * const *)root, misc);
    } else {
        if (root->left != NULL) tmywalk(root->left, callback, misc);
        callback(*(xdata * const *)root, misc);
        if (root->right != NULL) tmywalk(root->right, callback, misc);
    }
}

/* END twalk() fake */

if (root) tmywalk(root, tmycallback, "Hello walker"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:37:08.120

> 在我自己的文件中重新声明具有相同名称的相同结构（tsearch.c 中的 node_t）的行为是什么？

尽管在 C11 标准中似乎没有提及它，但如果您尝试在同一个翻译单元中声明一个结构两次，许多编译器会向您发出约束冲突诊断（*错误消息）。*`struct node_t`将声明放入它自己的头文件（可能是 tree_node.h）并使用[包含保护](https://stackoverflow.com/questions/12327031/include-guard-style-c)来防止重复声明是一个好主意。

# api - 我们可以在 MATLAB 中使用 Microsoft Speech API 的语音转文本功能吗？

> ID：15086069
> 
> 赞同：1
> 
> 时间：2013-02-26T09:58:11.930
> 
> 标签：api, matlab, speech

我们可以在 MATLAB 中使用 Microsoft Speech API 的语音转文本功能吗？这是文本到语音的代码。我们如何使用SAPI的功能是语音到文本？对于 tts：

```
textIn = 'voice';
    ha = actxserver('SAPI.SpVoice');
    invoke(ha,'speak',textIn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T15:56:55.273

您可以按照与 C# 等类似的过程使用 MATLAB 的 activeX 服务器： http: [//www.mathworks.co.uk/help/matlab/ref/actxserver.html](http://www.mathworks.co.uk/help/matlab/ref/actxserver.html)

您需要首先声明一个语音识别器引擎

```
RC = actxserver('SAPI.SpSharedRecoContext'); %connect to speech engine 
```

然后为识别器的每个状态设置各种回调函数：

```
RC.registerevent({'Recognition' @CallbackFunction; 'Hypothesis' @CallbackFunction; 'FalseRecognition' @CallbackFunction}) 
```

回调函数的内容应该是这样的：

```
function word = CallbackFunction(varargin)
    global word
    result = varargin{length(varargin)-2};
    word = result.Phraseinfo.GetText;
end 
```

然后最后打开识别器：

```
RC.Recognizer.State = 'SRSActive'; 
```

您需要参考 [http://msdn.microsoft.com/en-us/library/ms723627(v=vs.85).aspx时调用哪些函数的文档](http://msdn.microsoft.com/en-us/library/ms723627(v=vs.85).aspx)

您还需要设置语法词典以获得有意义的结果。因为引擎将尝试以其他方式识别任何单词。

# php - PHP按位置获取数组的值

> ID：15086073
> 
> 赞同：0
> 
> 时间：2013-02-26T09:58:20.370
> 
> 标签：php

我正在从我的数据库中提取最新的 3 篇新闻文章，我需要按照它们被拉出的顺序来访问它们，所以在数组中的第一个位置，第二个位置等等，以便在我的网页的随机部分中按顺序显示它们。我遇到了访问数组键，但这不起作用，我哪里出错了？提前致谢！

```
$value = array_slice($blog, 0, 1);
echo $value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:59:28.690

用这个 ：

```
$value = array_shift($blog); 
```

获得第二个

```
$value2 = array_shift($blog); 
```

第三：

```
$value3 = array_shift($blog); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:04:32.997

您可以通过三种不同的方式来完成此操作：

**1\. 每次想要获取下一个值时调用array_shift($blog)。**

```
 $value = array_shift($blog); 
```

每次执行 array_shift 时，它都会返回数组中的下一个条目。

函数 array_pop 类似，但每次都返回数组中的最后一个条目。

**2.简单地使用索引访问数组的每个条目**

这给出了数组中的第一个条目：

```
 $value = $blog[0] 
```

这给出了数组中的第二个条目：

```
 $value = $blog[1] 
```

这给出了数组中的第 n 个值：

```
 $value = $blog[n-1]; 
```

**3.或者最后你可以简单地循环遍历数组并回显每个条目（如果你不想在同一个地方顺序回显条目可能不合适）**

```
foreach ($blog as $blog_entry) {
    echo $blog_entry;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:09:44.577

我认为您正在寻找一个[`foreach`](http://php.net/foreach)循环或类似的东西：

```
$blog = array('foo', 'bar', 'cat');
foreach ($blog as $article) {
    echo $article;
}
/**
 * Gives you:
 *
       foo
       bar
       cat
 */ 
```

* * *

但是如果你想用函数来做，你可以使用[`array_shift`](http://php.net/array-shift). 这将从数组中删除第一个元素并返回：

```
$article1 = array_shift($blog); // $blog is now `array('bar', 'cat')`
echo $article1; // >> foo

$article2 = array_shift($blog); // $blog is now `array('cat')`
echo $article2; // >> bar

$article3 = array_shift($blog); // $blog is now `array()`
echo $article2; // >> cat 
```

* * *

或者，如果您想保留原始`$blog`数组，请使用数组指针函数，如[`current`](http://php.net/current)、[`next`](http://php.net/next)、和：[`prev`](http://php.net/prev)[`reset`](http://php.net/reset)[`end`](http://php.net/end)

```
reset($blog);
$article1 = current($blog); // >> foo
$article2 = next($blog); // >> bar
$article3 = next($blog); // >> cat 
```

# django - Django 管理员：类媒体

> ID：15086074
> 
> 赞同：6
> 
> 时间：2013-02-26T09:58:24.037
> 
> 标签：django, django-admin

我有一个类媒体如下

```
class helloAdmin(admin.ModelAdmin):
    class Media:
        js = ['choice.js']
admin.site.register(hello,helloAdmin) 
```

staticfiles 应用程序预先添加`STATIC_URL`到媒体路径。但我想`MEDIA_URL`被放在前面而不是`STATIC_URL`并且`STATIC_URL`不是空的。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T08:13:47.477

您可以通过以下设置实现：

```
import os
CURRENT_PATH = os.path.abspath((os.path.dirname(__file__)))

MEDIA_ROOT = os.path.join(CURRENT_PATH, 'uploads')

MEDIA_URL = '/site_media/' 
```

### 网址.py

```
from django.conf import settings
urlpatterns += patterns('',
    url(r'^site_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
) 
```

### 管理员.py

```
class helloAdmin(admin.ModelAdmin):
    class Media:
        js = ['/site_media/choice.js']
admin.site.register(hello,helloAdmin) 
```

`MEDIA_URL`不建议使用提供静态文件。根据 django 文档，当不为**空**`MEDIA_URL`时，不会引用媒体文件。请参阅[文档的这一部分](https://docs.djangoproject.com/en/1.3/topics/forms/media/#paths-in-media-definitions)。`STATIC_URL`

 **因此，我建议您使用以下设置：

```
STATIC_ROOT = 'static/'

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(CURRENT_PATH, 'media'),
) 
```

### 管理员.py

```
class helloAdmin(admin.ModelAdmin):
    class Media:
        js = ['choice.js']
admin.site.register(hello,helloAdmin) 
```**

# javascript - Javascript方法“未定义”何时已经存在？

> ID：15086087
> 
> 赞同：0
> 
> 时间：2013-02-26T09:59:13.970
> 
> 标签：javascript

我有以下代码：

```
 <script language="JavaScript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
        function googleJS1(){
            var iframe = document.getElementsByTagName('iframe')[0];
            var doc = iframe.contentWindow.document;
            var newScript = doc.createElement('div');
            newScript.setAttribute("id", "google_translate_element");
            var bodyClass = doc.getElementsByTagName('body')[0];         
            bodyClass.insertBefore(newScript, bodyClass.childNodes[0]);
        }

        function googleJS2(){
            var iframe = document.getElementsByTagName('iframe')[0];
            var doc = iframe.contentWindow.document;
            var newScript = doc.createElement('script');
            newScript.setAttribute("src", "http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit");
            var bodyClass = doc.getElementsByTagName('head')[0];         
            bodyClass.insertBefore(newScript, bodyClass.childNodes[0]);
        }

        function googleJS3(){
            var iframe = document.getElementsByTagName('iframe')[0];
            var doc = iframe.contentWindow.document;
            var newScript = doc.createElement('script');
            newScript.setAttribute("src", "http://www.mydomain.com/google.js");
            var bodyClass = doc.getElementsByTagName('head')[0];         
            bodyClass.insertBefore(newScript, bodyClass.childNodes[1]);
        }

        function googleJS4(){
            var iframe = document.getElementsByTagName('iframe')[0];
            var doc = iframe.contentWindow.document;
            var newScript = doc.createElement('style');
            var content = doc.createTextNode('.goog-te-banner-frame { display: none; } #google_translate_element {}');
            newScript.appendChild(content);
            var bodyClass = doc.getElementsByTagName('head')[0];         
            bodyClass.insertBefore(newScript, bodyClass.childNodes[2]);
        }
        </script>
        <iframe width=100% height= 100% onload ="googleJS1(); googleJS2(); googleJS3(); googleJS4();" class=iframe2 src="www.mydomain.com/test.html"> 
```

这段代码在我其他地方的另一台服务器上运行良好。但是，无论何时运行，控制台都会显示“未捕获的引用错误，方法未定义”。即使它已定义，为什么它会抛出此消息，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:51:00.497

我没有测试过，但我假设这是因为`onload`事件附加到 iframe，因此将在 iframe 的范围内调用。试着打电话`window.parent.googleJS1()`。

# c# - 将期间拆分为月份部分

> ID：15086103
> 
> 赞同：1
> 
> 时间：2013-02-26T09:59:39.240
> 
> 标签：c#, datetime

我有以下日期时间：

```
Start = 15/12/2012 13:00:00
End   = 16/02/2013 14:00:00 
```

我如何将每个月分成 3 部分？

```
- 15-12-2012 13:00:00 -> 01-01-2013 00:00:00
- 01-01-2013 00:00:00 -> 01-02-2013 00:00:00
- 01-02-2013 00:00:00 -> 16-02-2013 14:00:00 
```

总时间跨度必须保持不变。这可以用 LINQ 轻松完成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T10:14:00.277

当然，试试这个（包括小助手类）

过程：

```
var Start = DateTime.Parse("15 Dec 2012 13:00:00");
var End = DateTime.Parse("16 Feb 2013 14:00:00");

var runningDate = Start;
while (runningDate < End)
{
    var nextMonthSeed = runningDate.AddMonths(1);
    var to = DateHelper.Min(new DateTime(nextMonthSeed.Year, nextMonthSeed.Month, 1), End);
    Console.WriteLine("{0} -> {1}", runningDate.ToString("dd-MM-yyyy HH:mm:ss"), to.ToString("dd-MM-yyyy HH:mm:ss"));
    runningDate = to;
} 
```

助手类：

```
public static class DateHelper
{
    public static DateTime Min(DateTime date1, DateTime date2)
    {
        return (date1 < date2 ? date1 : date2);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:10:19.620

您可以尝试以下扩展方法：

```
public static class SomeExtensions {

    public static IEnumerable<Tuple<DateTime, DateTime>> GetIntervals(
        this DateTime from, 
        DateTime to) {

        var currentFrom = from;
        var currentTo = from.AdvanceToStartOfNextMonth();

        while (currentTo < to) {
            yield return Tuple.Create(currentFrom, currentTo);
            currentFrom = currentTo;
            currentTo = currentFrom.AdvanceToStartOfNextMonth();
        }

        yield return Tuple.Create(currentFrom, to);
    }

    public static DateTime AdvanceToStartOfNextMonth(this DateTime @this) {
        var newMonth = @this.Month + 1;
        var newYear = @this.Year;
        if (newMonth == 13) {
            newMonth = 1;
            newYear++;
        }
        return new DateTime(newYear, newMonth, 1);
    }
} 
```

然后像这样使用它们：

```
public class Etc {

    public static void Foo() {
        DateTime start = ... 
        DateTime stop = ....

        Tuple<DateTime, DateTime>[] intervals = start.GetIntervals(stop).ToArray();

        // or simply
        foreach (var interval in start.GetIntervals(stop)) 
            Console.WriteLine(interval);
    }

} 
```

**编辑**

这是我刚刚尝试过的一个小测试（我认为它看起来不错）：

```
class Program {
    static void Main(string[] args) {

        DateTime start = DateTime.Now.Subtract(TimeSpan.FromDays(170));
        DateTime stop = DateTime.Now;

        foreach (var interval in start.GetIntervals(stop))
            Console.WriteLine(interval);

        Console.ReadKey(intercept: true);

    }
} 
```

并产生了这些结果（在控制台应用程序中）：

![在此处输入图像描述](../Images/013fcbdf15fab7815ac5c4d417185756.png)

**编辑结束**

# webdriver - Webdriver 没有点击收件箱中的链接

> ID：15086107
> 
> 赞同：1
> 
> 时间：2013-02-26T09:59:55.120
> 
> 标签：webdriver, testng

我的 Web 应用程序有一个收件箱，就像 gmail 收件箱一样，我的目标是单击一个邮件项目并验证其中的内容。

我的收件箱中邮件的外部 HTML 如下

```
<a href="read_body.php?mailbox=INBOX&amp;passed_id=2&amp;startMessage=1">Complete Registration Request- My WebSite</a> 
```

我写了一个java代码

```
driver.findElement(By.partialLinkText("Complete Registration Request- My WebSite")).click(); 
```

（ps：我也尝试过使用linkText）。

另一种方法是

```
 @FindBy(how=How.LINK_TEXT,using="link=Complete Registration Request- My WebSite")
  @CacheLookup
  private WebElement regMailLink; 
```

内部方法

```
 regMailLink.click(); 
```

在这两种情况下，输出如下。

```
org.openqa.selenium.NoSuchElementException: Unable to locate element: {"method":"partial link text","selector":"Complete Registration Request- My WebSite"}
Command duration or timeout: 31.44 seconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 20:21:18'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_39'
Session ID: 2baf4e73-c070-4046-8723-b4ae430a827d
Driver info: org.openqa.selenium.firefox.FirefoxDriver
Capabilities [{platform=XP, acceptSslCerts=true, javascriptEnabled=true, browserName=firefox, rotatable=false, locationContextEnabled=true, version=16.0, cssSelectorsEnabled=true, databaseEnabled=true, handlesAlerts=true, browserConnectionEnabled=true, nativeEvents=true, webStorageEnabled=true, applicationCacheEnabled=true, takesScreenshot=true}]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:302)
    at org.openqa.selenium.remote.RemoteWebDriver.findElementByPartialLinkText(RemoteWebDriver.java:347)
    at org.openqa.selenium.By$ByPartialLinkText.findElement(By.java:265)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:294)
    at stabilix.org.hc.MailCode.testValidateEmail(MailCode.java:74)
    at stabilix.org.hc.createUserPageTest.NewUsrStage1(createUserPageTest.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)
Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: Unable to locate element: {"method":"partial link text","selector":"Complete Registration Request- My WebSite"}
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 20:21:18'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_39'
Driver info: driver.version: unknown
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/moshe/LOCALS~1/Temp/anonymous7889540798209195994webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js:8251)
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/moshe/LOCALS~1/Temp/anonymous7889540798209195994webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js:382)
---
--- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:21:35.850

好吧，好吧。这仍然是比建议更多的想法：

根据您的评论，该应用程序具有框架。我认为这个链接将在框架内。这个框架应该有它的名字：

```
 <frame name="main"> //my guess
   //...
   <a href="read_body.php?mailbox=INBOX&amp;passed_id=2&amp;startMessage=1">Complete Registration Request- My WebSite</a>
   //...
 </frame> 
```

所以，你需要做的第一件事就是将**驱动程序切换到这个框架**

```
driver.switchTo.frame("main"); 
```

然后你可以执行搜索

```
driver.findElement(By.partialLinkText("Complete Registration Request- My WebSite")).click(); 
```

**注意**框架名称是我自己的猜测，所以请不要复制粘贴我的代码。将其用作指南；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T07:04:16.923

这里实际上我们可以尝试使用下面给出的 CSS 选择器

css=a[href*='收件箱']

请让我知道这个 CSS 脚本是否正常工作。

# jquery - Jquery Post（）不发布

> ID：15086109
> 
> 赞同：1
> 
> 时间：2013-02-26T10:00:08.830
> 
> 标签：jquery, html, jquery-post

帖子值未传递到操作页面。操作页面仅返回静态回复，即没有 $_POST 部分的感谢消息。

下面是代码。

jQuery

```
<script>
    $(function() {
        $('#myF').submit(function (e) {

            e.preventDefault();
            $('#contactForm').html('<img src="images/ajax_small.gif" />');
            subMe();
        });
    });

    function subMe() {
        $.post('?action=contactdetails', $('#myF').serialize(),
            function(data) {
                $('#contactForm').html(data.returnValue);
            }, "json");
    }
</script> 
```

HTML

```
<form id="myF">
    <div id="contactForm" valign="top" style="width:417;text-align:center" class="main">
<table width="417" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td width="45"><span class="style3">Name</span></td>
                <td width="373" height="30"><input name="name" id="name" style="padding-left:5px" type="text" title="Name is required." class="required form" /></td>
              </tr>
              <tr>
                <td height="14" colspan="2"><img src="images/spicer.gif" width="1" height="1" /></td>
              </tr>
              <tr>
                <td><span class="style3">Email</span></td>
                <td width="373" height="30"><input name="email" title="Please enter a valid email id." id="emailid" style="padding-left:5px" type="text" class="validate-email required form" /></td>
              </tr>
<tr colspan="2">
<input type="submit" value="Submit" />
</tr>
          </table>
</div>
</form> 
```

操作页面

```
<?php   
    if ( $action == 'contactdetails' ) {
        $data['layout'] = 'layout_blank.tpl.php';
            $nme = $_POST['name']; 
        echo json_encode(array("returnValue"=>"<strong>Thank you " . $nme . " for contacting us.<br /> We will get back to you soon.</strong>"));
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:03:15.937

您的输入位于`<div id="contactForm">`元素内，**直到**您调用此行：

```
$('#contactForm').html('<img src="images/ajax_small.gif" />'); 
```

在这一点上他们消失了。一旦发生这种情况，调用`.serialize()`将不会返回任何值，因为找不到任何输入。

首先调用`subMe()`，然后更改该`<div>`元素的内容：

```
$(function() {
    $('#myF').submit(function (e) {
        e.preventDefault();
        subMe();
        $('#contactForm').html('<img src="images/ajax_small.gif" />');
    });
}); 
```

# c# - 为什么 StandardOutput.Read() 永远不会返回？（僵局？）

> ID：15086115
> 
> 赞同：3
> 
> 时间：2013-02-26T10:00:27.140
> 
> 标签：c#, deadlock

使用 C#，我想自动化第三方 Windows 命令行程序。通常，它是一个交互式控制台，您发送命令，它可能会提示详细信息，发回结果并显示提示以询问更多命令。通常：

```
c:\>console_access.exe
Prompt> version
2.03g.2321
Prompt> 
```

我使用了 .NET 类 Process 和 ProcessStartInfo 以及 stdin/stdout/stderr 的重定向。

```
 public ConsoleAccess()
    {
        if (!File.Exists(consoleAccessPath)) throw new FileNotFoundException(consoleAccessPath + " not found");

        myProcess = new Process();
        ProcessStartInfo myProcessStartInfo = new ProcessStartInfo(consoleAccessPath, ""); // even "2>&1" as argument does not work; my code still hangs
        myProcessStartInfo.CreateNoWindow = true; 
        myProcessStartInfo.UseShellExecute = false; 
        myProcessStartInfo.RedirectStandardOutput = true;
        myProcessStartInfo.RedirectStandardError = true;
        myProcessStartInfo.RedirectStandardInput = true;
        //myProcessStartInfo.ErrorDialog = true; // I tried, to no avail.
        myProcess.StartInfo = myProcessStartInfo;

        outputQueue = new ConcurrentQueue<string>(); // thread-safe queue
        errorQueue = new ConcurrentQueue<string>();

        myProcess.Start();
        myStandardOutput = myProcess.StandardOutput;
        myStandardError = myProcess.StandardError;
        myStandardInput = myProcess.StandardInput;

        stdOutPumper = new Thread(new ThreadStart(PumpStdOutLoop));
        stdOutPumper.Start();
        stdErrPumper = new Thread(new ThreadStart(PumpStdErrLoop));
        stdErrPumper.Start();

        string empty = getResponse(); // check for prompt
        string version = getVersion(); // one simple command
    }
    // [...]
    private void PumpStdErrLoop()
    {
        while (true)
        {
            string message = myStandardError.ReadLine();
            errorQueue.Enqueue(message);
        }
    }

    private void PumpStdOutLoop()
    {
        while (true)
        {
            bool done = false;
            string buffer = "";
            //int blocksize = 1024;
            string prompt = "Prompt> ";
            while (!done)
            {
                //char[] intermediaire = new char[blocksize];
                //int res = myStandardOutput.Read(intermediaire, 0, blocksize);
                //buffer += new string(intermediaire).Substring(0, res);
                byte b = (byte)myStandardOutput.Read(); // I go byte per byte, just in case the char[] above is the source of the problem. To no avail.
                buffer += (char)b;
                done = buffer.EndsWith(prompt);
            }
            buffer = buffer.Substring(0, buffer.Length - prompt.Length);
            outputQueue.Enqueue(buffer);
        }
    } 
```

由于该程序在等待命令时返回“Prompt>”（重要：末尾没有“\n”），所以我不能使用 myProcess.BeginOutputReadLine();

但是，我必须使用线程，因为我必须同时收听 stdout 和 stderr。

这就是为什么我将线程和线程安全队列用于类生产者/消费者模式。

“您可以使用异步读取操作来避免这些依赖关系及其潜在的死锁。或者，您可以通过创建两个线程并在单独的线程上读取每个流的输出来避免死锁情况。” 来源：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput%28v=vs.100%29.aspx)

使用这种设计，所有序列如 * cmd -> 结果没有错误（stdout 上的东西，stderr 上没有东西）* cmd -> 错误（stderr 上的东西，stderr 上没有东西）按预期工作。没问题。

*   cmd -> 带有警告的结果（stderr 和 stdout 上的东西）应该可以工作（我正在尝试重现这种情况）

但是，特别是对于一个命令——在执行过程中提示输入密码的命令——不起作用：

*   主线程主循环永远开启 `if (errorQueue.Count == 0 && outputQueue.Count == 0) { System.Threading.Thread.Sleep(500); }`
*   线程泵送标准输出永远等待 `byte b = (byte)myStandardOutput.Read();`
*   线程泵送标准输出永远等待一行 `string message = myStandardError.ReadLine();`

我不明白为什么`byte b = (byte)myStandardOutput.Read();`不发送消息“密码：”。什么都没发生。我从来没有得到第一个'p'。

我觉得我遇到了僵局，但我不明白为什么。

怎么了？

（我认为这不是很相关，但我在 Windows 7 32 位上使用 MS Visual Studio 2010 在 .NET 4.0 上尝试了上述内容。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:35:01.003

对于这类交互式控制台模式程序，这是一种非常常见的故障模式。当 C 运行时库检测到输出被重定向时，它会自动将 stderr 和 stdout 流切换到缓冲模式。对提高吞吐量很重要。因此输出进入该缓冲区，而不是直接写入控制台。让您的程序看到输出需要刷新缓冲区。

缓冲区被刷新的三种情况。当缓冲区已满时发生刷新，通常约为 2 KB。或者当程序写入行终止符 (\n) 时。或者当程序显式调用 fflush() 时。前两种情况没有发生，没有足够的输出并且程序没有使用\n。问题的所在，原来的程序员忘记调用 fflush()。忘记这一点*很*常见，程序员根本不打算以交互方式使用程序。

对此无能为力，您需要要求程序的所有者或作者添加 fflush()。也许您可以通过假设正在编写提示来跛行。

# php - 寻找通用 PHP error_handler

> ID：15086116
> 
> 赞同：2
> 
> 时间：2013-02-26T10:00:29.063
> 
> 标签：php, error-handling

我想覆盖默认的 PHP 错误处理程序。我确信这已经实现了无数次。

我找到了以下项目，但大多数项目似乎都很老旧。

我主要想拥有：

*   开发模式，仅显示所有错误/通知
*   生产模式，允许向用户显示干净的自定义布局页面
*   记录到文本文件（我没有对网络服务器的管理员访问权限，因此无法通过 PHP 设置进行设置）
*   发送有关严重错误的警告电子邮件
*   登录到数据库

这怎么能在php中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:05:32.083

你可以使用[`set_error_handler`](http://php.net/manual/en/function.set-error-handler.php)函数来设置你的自定义错误处理程序，然后用它做任何你想做的事情。

IMO 的最佳做法是[`ErrorException`](http://www.php.net/manual/en/class.errorexception.php)在发生错误时抛出并处理它`try/catch`（**注意：**处理我并不是指忽略错误）。例如：

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}
set_error_handler("exception_error_handler");

try {
    //Some code that may produce error
} catch (ErrorException $e) {
    $someLogger->log($e->getMessage());
} 
```

您可能拥有自己的自定义类来实现您的要求，而不是 logger。因此，如果任何现有资源满足您的需求，请使用一个，否则创建。

**注意#1：**如果你想对*致命错误*做一些事情（我想到了日志记录），你可以使用[`register_shutdown_function`](http://php.net/manual/en/function.register-shutdown-function.php)

**注意＃2：**您说您找到的课程/项目很小。有两件事。首先，您无法衡量使用 LOC 的代码有多好。其次，与错误没有太大关系。

**编辑：**

一般来说，在开发新项目时，从头开始重新实现所有内容是不常见的，甚至是不可接受的。您应该构建自己的库一次，然后在您的项目中使用它们。就个人而言，我使用[KLogger](https://github.com/katzgrau/KLogger)来记录东西，我对此很满意。

# rest - 如何使用 IntelliJ IDEA 中的“测试 RESTful Web 服务”选项测试 RESTful Web 服务

> ID：15086126
> 
> 赞同：3
> 
> 时间：2013-02-26T10:00:57.163
> 
> 标签：rest, intellij-idea

在我们的项目中，我们使用 IntelliJ IDEA。有一个测试 RESTful Web 服务的选项（工具 -> Web 服务 -> RESTful Web 服务 -> 测试 RESTful Web 服务）。如果我选择请求标头数据内容类型为，我将如何传递请求 XML `application/xml`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:13:05.353

您可以选择要发送的文件，但没有输入区域可将自由文本作为请求正文发送。

也许这个有用的功能将包含在下一个版本中。更多信息[在这里](http://www.jetbrains.com/idea/webhelp/rest-client-tool-window.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-09T06:36:25.743

您应该使用“**请求**”选项卡并在“标题”面板中添加新参数：

```
Content-Type: application/json;charset=UTF-8 
```

然后在请求正文中选择文本单选按钮，然后在文本框中插入您的 json 内容。 [![在此处输入图像描述](../Images/89db64e5be3b4cec611d8e4830f7f1f2.png)](https://i.stack.imgur.com/Oy1A8.jpg)

# iphone - 使用正则表达式解析 html NSString

> ID：15086127
> 
> 赞同：0
> 
> 时间：2013-02-26T10:00:59.337
> 
> 标签：iphone, ios, objective-c, regex

我有`NSString`几个这样的字符串，`465544664646`它们之间是变化的：

```
data-context-item-title="465544664646" 
```

`465544664646`我如何将字符串解析为数组？

编辑

```
NSRegularExpression* myRegex = [[NSRegularExpression alloc] initWithPattern:@"(?i)(data-context-item-title=\")(.+?)(\")" options:0 error:nil];
[myRegex enumerateMatchesInString:responseString options:0 range:NSMakeRange(0, [responseString length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop) {
    NSRange range = [match rangeAtIndex:1];
    NSString *string =[responseString substringWithRange:range];
    NSLog(string);
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:24:55.097

试试这个：

```
NSString *yourString=@"data-context-item-title=\"465544664646\" data-context-item-title=\"1212121212\"";

NSMutableArray *substrings = [NSMutableArray new];
NSScanner *scanner = [NSScanner scannerWithString:yourString];
[scanner scanUpToString:@"\"" intoString:nil];
while(![scanner isAtEnd]) {
    NSString *tempString;
    [scanner scanString:@"\"" intoString:nil];
    if([scanner scanUpToString:@" " intoString:&tempString]) {
        [substrings addObject:tempString];
    }
    [scanner scanUpToString:@"\"" intoString:nil];
}

//NSLog(@"->%@",substrings); //substrings contains all numbers as string.

for (NSString *str in substrings) {
    NSLog(@"->%ld",[str integerValue]); //converted each number to integer value, if you want to store as NSNumber now you can store each of them in array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:25:19.093

像这样的东西？

```
 -(NSString *)stringFromOriginalString:(NSString *)origin betweenStartString:    (NSString*)start andEndString:(NSString*)end {
    NSRange startRange = [origin rangeOfString:start];
    if (startRange.location != NSNotFound) {
        NSRange targetRange;
        targetRange.location = startRange.location + startRange.length;
        targetRange.length = [origin length] - targetRange.location;
        NSRange endRange = [origin rangeOfString:end options:0 range:targetRange];
        if (endRange.location != NSNotFound) {
            targetRange.length = endRange.location - targetRange.location;
            return [origin substringWithRange:targetRange];
        }
    }
    return nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:51:17.113

您可以使用

```
- (NSArray *)componentsSeparatedByString:(NSString *)separator 
```

方法如

```
NSArray *components = [@"data-context-item-title="465544664646" componentsSeparatedByString:@"\""]; 
```

现在你应该在 2.index 处得到字符串

```
[components objectAtIndex:1] 
```

[现在您可以使用NSString 到 NSArray](https://stackoverflow.com/questions/6579728/nsstring-to-nsarray)的方法从该字符串创建数组

# ruby - Errno::ENOMEM: 无法分配内存 - cat

> ID：15086133
> 
> 赞同：16
> 
> 时间：2013-02-26T10:01:15.410
> 
> 标签：ruby, shell, out-of-memory, fork, spawn

我有一个在生产中运行的工作，它处理 xml 文件。xml 文件总计约 4k，大小为 8 到 9 GB。

处理后，我们得到 CSV 文件作为输出。我有一个 cat 命令，它将所有 CSV 文件合并到我得到的单个文件中：

> Errno::ENOMEM: 无法分配内存

on `cat`（反引号）命令。

以下是一些细节：

*   系统内存 - 4 GB
*   交换 - 2 GB
*   红宝石：1.9.3p286

使用`nokogiri`和处理文件`saxbuilder-0.0.8`。

在这里，有一个代码块将处理 4,000 个 XML 文件，并且输出保存在 CSV 中（每个 xml 1 个）（对不起，我不打算分享它，因为公司政策）。

下面是将输出文件合并到单个文件的代码

```
Dir["#{processing_directory}/*.csv"].sort_by {|file| [file.count("/"), file]}.each {|file|
            `cat #{file} >> #{final_output_file}`
} 
```

我在处理过程中拍摄了内存消耗快照。它几乎消耗了所有部分内存，但是，它不会失败。`cat`它总是在命令上失败。

我想，在反引号时，它会尝试分叉一个没有足够内存的新进程，所以它失败了。

请让我知道您的意见和替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:35:24.457

因此，您的系统似乎在内存上运行得非常低，并且产生一个 shell + 调用 cat 对于剩下的少量内存来说太多了。

如果您不介意失去一些速度，您可以在 ruby​​ 中合并文件，并使用小缓冲区。这样可以避免生成 shell，并且您可以控制缓冲区大小。

这是未经测试的，但你明白了：

```
buffer_size = 4096
output_file = File.open(final_output_file, 'w')

Dir["#{processing_directory}/*.csv"].sort_by {|file| [file.count("/"), file]}.each do |file|
  f = File.open(file)
  while buffer = f.read(buffer_size)
    output_file.write(buffer)
  end
  f.close
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-10T02:53:03.600

您的物理内存可能已用完，因此请仔细检查并验证您的交换 ( `free -m`)。如果您没有交换空间，请[创建一个](https://askubuntu.com/a/796997/78223).

否则如果你的记忆力没问题，这个错误很可能是由shell资源限制引起的。您可以通过 来检查它们`ulimit -a`。

它们可以通过`ulimit`修改 shell 资源限制来改变（见：）`help ulimit`，例如

```
ulimit -Sn unlimited && ulimit -Sl unlimited 
```

要使这些限制持久化，您可以通过以下 shell 命令创建 ulimit 设置文件来配置它：

```
cat | sudo tee /etc/security/limits.d/01-${USER}.conf <<EOF
${USER} soft core unlimited
${USER} soft fsize unlimited
${USER} soft nofile 4096
${USER} soft nproc 30654
EOF 
```

* * *

或用于`/etc/sysctl.conf`全局更改限制 ( `man sysctl.conf`)，例如

```
kern.maxprocperuid=1000
kern.maxproc=2000
kern.maxfilesperproc=20000
kern.maxfiles=50000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-04T08:49:11.627

`cat`我有同样的问题，但不是`sendmail`（`gem mail`）。

我通过安装gem[在这里找到了问题和解决方案，例如](http://adamniedzielski.github.io/blog/2014/02/05/fighting-paperclip-errno-enomem-error/)`posix-spawn`

```
gem install posix-spawn 
```

这是一个例子：

```
a = (1..500_000_000).to_a

require 'posix/spawn'
POSIX::Spawn::spawn('ls') 
```

> 这次创建子进程应该会成功。

另请参阅：[最小化](http://www.oracle.com/technetwork/server-storage/solaris10/subprocess-136439.html)在 Oracle 中创建应用程序子进程的内存使用。

# java - phantomjs page.open() 似乎不存在

> ID：15086136
> 
> 赞同：1
> 
> 时间：2013-02-26T10:01:19.243
> 
> 标签：java, phantomjs

我正在尝试使用 phantomjs 获取页面内容。在官方网站上的许多示例（例如：[https](https://github.com/ariya/phantomjs/blob/master/examples/imagebin.js) ://github.com/ariya/phantomjs/blob/master/examples/imagebin.js ）中使用了函数 page.open()。
在我的脚本中，虽然它似乎不起作用。我使用反射来查看页面对象的所有已定义方法：

```
 for ( var prop in page) {
      if (typeof page[prop] == 'function') {
          log("method in page: " + prop);
      }
  } 
```

并且 open() 方法没有出现。（close（），render（）等......确实出现了）
当我尝试执行脚本时：

```
// include plugins
var system = require('system');
var fileSystem = require('fs');
var page = require('webpage').create();

// global errorhandler
phantom.onError = function(msg, trace) {
  console.log("ERROR!!!!! \n" + msg);
  phantom.exit(1);
};

// read json input and remove single outer quotes if set
var jsonin = system.args[1];
if (jsonin.charAt(0) == "'") {
  jsonin = jsonin.substr(1, jsonin.length - 2);
}
// make object of json
var data = eval('(' + jsonin + ')');
// optional url
var url = system.args[2];
// transfer file
var dest = system.args[3];

console.log("systemargs[1]: data -> " + data);
console.log("systemargs[2]: url -> " + url);
console.log("systemargs[3]: dest -> " + dest);

openRoot();

/*
 * open site
 */
function openRoot() {    
  page.onConsoleMessage = function(msg) {
    console.log('INNER ' + msg);
  };

  page.open(url, function(status) {
    if (status === "success") {
      if (loadCount == 0) { // only initial open
        console.log("opened successfully.");
        page.injectJs("./jquery-1.8.3.min.js");
      } else {
        console.log("page open error.");
        console.log('skip refresh ' + loadCount);
      }

    } else {
      console.log("error opening: " + status);
    }
  });
}
phantom.exit(0); 
```

它不执行打开功能。日志不显示 open() 方法内的任何消息。

任何关于我可能做错的建议将不胜感激。如果需要其他信息，请告诉我。
问候，
亚历克斯

编辑：
线

```
console.log(typeof (page.open)); 
```

输出：`function`这不是我所期望的，因为我之前写入日志的方法列表`open`不存在。唔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:32:00.337

经过数小时毫无意义的搜索后，我发现了错误。愚蠢的我。在脚本的末尾，`phantom.exit()`我不应该调用的地方。

工作代码包括一个检查对象的间隔，在我的例子`content`中，它的一个成员`content.isFinished`。如果我将其设置为 true，则会`phantom.exit()`被调用。
我的错，绝对是我的错。
工作代码：

```
var url = system.args[2];
// transfer file
var dest = system.args[3];

content = new Object();
content.isFinished = false;

console.log("systemargs[1]: data -> " + data);
console.log("systemargs[2]: url -> " + url);
console.log("systemargs[3]: dest -> " + dest);

openRoot();

/*
 * open site
 */
function openRoot() {    
  page.onConsoleMessage = function(msg) {
    console.log('INNER ' + msg);
  };

  page.open(url, function(status) {
    if (status === "success") {
      if (loadCount == 0) { // only initial open
        console.log("opened successfully.");
        page.injectJs("./jquery-1.8.3.min.js");

        // do stuff
        content.isFinished = true;
      } else {
        console.log("page open error.");
        console.log('skip refresh ' + loadCount);
        content.isFinished = true
      }

    } else {
      console.log("error opening: " + status);
    }
  });
}

/*
 * wait for completion
 */
var interval = setInterval(function() {
  if (content.isFinished) {
    page.close();

    f = fileSystem.open(dest, "w");
    f.writeLine(out);
    f.close();

    // exit phantom
    phantom.exit();
  } else {
    console.log('not finished - wait.');
  }
}, 5000); 
```

问候，
亚历克斯

# scikit-learn - 高斯过程吞噬了我的记忆

> ID：15086137
> 
> 赞同：0
> 
> 时间：2013-02-26T10:01:25.983
> 
> 标签：scikit-learn

我在 Ubuntu 12.04 上安装了 skicit-learn 0.13.1。运行以下代码正在消耗我的内存，即我可以在*顶部*观察内存在每次迭代中是如何增长的，并且在大约之后出现分段错误。160 次迭代（使用 'ulimit -Sv 4000000' 将可用内存限制为大约 4GB）。

```
from sklearn import gaussian_process
import numpy as np

x = np.random.normal(size=(600, 60))            
y = np.random.normal(size=600)

for s in range(100000):

    print 'step %s' % s

    test = gaussian_process.GaussianProcess(
            theta0= 1e-2,
            thetaL= 1e-4,
            thetaU= 1e-1,
            nugget= 0.01,
            storage_mode='light').fit(x, y) 
```

那么我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:59:34.070

这看起来像一个严重的内存泄漏。请在[https://github.com/scikit-learn/scikit-learn/issues](https://github.com/scikit-learn/scikit-learn/issues)上报告。

# php - 使用 PHP 删除数组中的特定文件名

> ID：15086139
> 
> 赞同：0
> 
> 时间：2013-02-26T10:01:35.177
> 
> 标签：php

我有一个 PDF 列表，我想删除它们。有人可以向初学者解释这是如何完成的吗？此时，我可以在 Excel 中以多种不同的方式执行此操作，但如何在 PHP 中简单地执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:07:15.147

最简单的解决方案：

```
<?php

    $dir = '/files_directory/';
    $files_to_delete = array('file1.pdf', 'file3.pdf', 'file4.pdf');

    foreach($files_to_delete as $file)
    {
        $file_path = $dir . $file;
        if(is_file($file_path))
        {
            unlink($file_path);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:04:44.987

使用 PHP 搜索文件夹，循环遍历那里的文件并在循环中添加一些条件语句。如果它们是真或假，请根据这些结果采取行动。

由于您没有为我们输入任何代码，因此我不会再向您输入任何代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:05:00.063

我能想到的最简单的方法：

```
array_map('unlink', $array_with_files_to_delete);

$array_with_files_to_keep = array_diff($list_with_pdfs, $array_with_files_to_delete); 
```

# php - 显示来自频道的视频列表 - Vimeo Advanced API

> ID：15086140
> 
> 赞同：2
> 
> 时间：2013-02-26T10:01:36.430
> 
> 标签：php, vimeo

我需要一种使用 PHP 在页面上显示来自特定频道的视频的方法。

我已经对我的应用程序进行了身份验证，我可以使用一些使用高级 API 的方法。我正在使用官方的 vimeo PHP 库进行连接。

下面是我正在尝试做的事情，当我转储数组时，我什么也没有得到。我可以使用从整个帐户方法获取视频来获取信息。

```
require_once('/url/vimeo/vimeo.php');
$vimeo = new phpVimeo('number', 'number');
$vimeo->setToken('number','numbers');

$videos = $vimeo->call('vimeo.channels.getVideos', array('ACCOUNT' => 'NAME')); 
```

如果我将频道名称放在 ACCOUNT 所在的位置，我将收到无效签名错误。

是否值得为 PHP 使用简单的 HTML 解析器并这样做，还是值得坚持使用高级 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:15:43.700

我强烈建议使用高级 api。如果您解析 html，它会在 vimeo 更改其频道页面时中断。此外，频道有不止一种布局

例如：[vimeohq](https://vimeo.com/channels/vimeohq)和[nicetype](https://vimeo.com/channels/nicetype)

“调用”函数的第二个参数应该是 api 方法需要的任何查询字符串参数。

在“vimeo.channels.getVideos”的情况下，您可以提供

*   频道 ID
*   用户身份
*   页
*   每页
*   summary_response
*   全响应。

要试验 getVideos 方法，您可以使用[playground](https://developer.vimeo.com/apis/advanced/methods/vimeo.channels.getVideos/playground)。

所以最后，我相信你希望函数看起来像这样..

```
$videos = $vimeo->call('vimeo.channels.getVideos', array('channel_id' => 'NAME')); 
```

其中 NAME 是频道 ID 或频道名称（频道名称与 url slug 匹配，例如“nicetype”而不是“nice type”

# web-applications - 通过指向不同的页面编辑一行数据表（弹出）

> ID：15086145
> 
> 赞同：0
> 
> 时间：2013-02-26T10:01:48.880
> 
> 标签：web-applications, jsf-2

我有一个`employee`显示在数据表中的 bean 类的 bean 类中的员工对象列表，并且想要在弹出窗口中编辑数据表中的特定行，如下所述

A`datagrid`包含所有`employee`详细信息，每行都有按钮`edit`。单击`edit`按钮时，新的弹出窗口应显示特定单击员工的现有信息，编辑后，列表中的特定对象的更改也必须反映在数据表。

我正在为此苦苦挣扎，但没有找到在弹出窗口中传递对象进行编辑的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:39:15.833

我也是新手 ;) 您需要做的就是创建 ManagedBean 来负责您的数据。例如，假设您的数据库中有 Employee 表。首先，您应该创建名为 Employee 的实体。接下来，您需要创建负责该实体的 ManagedBean。您需要做的最后一步是创建视图。

Employee.java（只需使用 Netbeans/Eclipse 创建这个文件）

```
@Entity
public class Employee implements Serializable {    
    private Integer id;
    private String name;
    private String surname;
    private String position;

    // getters and setters
} 
```

EmployeeBean.java

```
@ManagedBean
@SessionScoped
public class EmployeeBean implements Serializable {

    private Employee employee;

    public void EmployeeBean() {}

    // getter and setter for Employee

    public String save() {
        // save employee data here
    }       
} 
```

员工.xhtml

```
<h:form>
    <!-- do it in loop -->
    <p:inplace editor="true">  
        <p:inputText value="#{employeeBean.employee.name}" required="true" label="text"/>  
    </p:inplace>
    <p:inplace editor="true">  
        <p:inputText value="#{employeeBean.employee.surname}" required="true" label="text"/>  
    </p:inplace>
    <h:commandButton action="#{employeeBean.save}" />
</h:form> 
```

使用`<inplace/>`您的数据将在 ajax 事件中更改，因此 ManagedBean 应该（我想是这样，但我可能是错的）SessionScoped。如果不是，您的 bean 将处于松散状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:21:57.440

您可以使用 primefaces inplace 模块来完成这项工作（[http://www.primefaces.org/showcase/ui/inplace.jsf](http://www.primefaces.org/showcase/ui/inplace.jsf)）。

# doctrine-orm - 教义迁移 phar，如何设置类型映射？

> ID：15086148
> 
> 赞同：3
> 
> 时间：2013-02-26T10:01:57.217
> 
> 标签：doctrine-orm

我想在我的非 symfony 项目中使用学说迁移，所以我从[https://github.com/doctrine/migrations](https://github.com/doctrine/migrations)获得了独立的 phar 。我正确配置了所有内容（数据库配置和配置），然后在执行“迁移：状态”时出现错误：

> [Doctrine\DBAL\DBALException]
> 请求的未知数据库类型枚举，Doctrine\DBAL\Platforms\MySqlPlatform 可能不支持。

现在有很多关于如何在 symfony 应用程序的上下文中解决这个问题的资源（例如[http://wildlyinaccurate.com/doctrine-2-resolving-unknown-database-type-enum-requested](http://wildlyinaccurate.com/doctrine-2-resolving-unknown-database-type-enum-requested)）但是我可以把它放在哪里在这种情况下类型映射？我应该提取.phar，将代码放入其中（在哪里？）然后重新打包它？（如何？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-30T19:35:27.120

我已经为 Zend 框架尝试了一些东西并且它有效：

打开 ./vendor/doctrine/dbal/lib/Doctrine/DBAL/Platforms/MySqlPlatform.php 搜索函数`initializeDoctrineTypeMappings()` 为枚举创建一个条目，

```
'enum' => 'string' 
```

像魅力一样工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T21:11:41.797

这个问题在这个分支中解决了
[https://github.com/dyadyavasya/migrations](https://github.com/dyadyavasya/migrations)

默认情况下，Doctrine 不会将 MySQL 枚举类型映射到 Doctrine 类型。这是因为枚举包含状态（它们的允许值）而 Doctrine 类型不包含。

在链接处使用 fork，您可以注册 MySQL ENUM 以映射到 Doctrine 字符串。这样，Doctrine 总是将 ENUM 解析为 Doctrine 字符串。

迁移.yml

```
名称： Doctrine Sandbox Migrations
迁移命名空间：DoctrineMigrations
表名：学说迁移版本
迁移目录：/path/to/migrations/classes/DoctrineMigrations
映射类型：
    枚举：字符串

```

更多信息 - [https://github.com/dyadyavasya/migrations#migrationsyml](https://github.com/dyadyavasya/migrations#migrationsyml)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T18:27:25.560

奥克拉米乌斯说的：

您需要使用迁移并自行设置 CLI。从克隆 github.com/doctrine/migrations 开始，然后通过 composer 安装。之后，自定义您的 CLI 运行器以根据您自己的需要设置连接。

# ruby-on-rails - 仅生产中的邮件错误

> ID：15086149
> 
> 赞同：1
> 
> 时间：2013-02-26T10:01:56.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ubuntu-12.04, production-environment, mailer

设置：带有 Ubuntu 12.04、Apache、PhusionPassenger、Rail 3.2.12、Postgresql 的 VPS

我想用我的应用程序发送确认邮件。在开发模式下一切正常，用户收到一封邮件，但在生产中我收到此错误（日志）：

```
Started POST "/newsletters" for 1XX.16X.30.XX at 2013-02-26 09:22:47 +0000
Processing by NewslettersController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"XXXXXXXXXXXXX=",
"newsletter"=>{"name"=>"Test", "email"=>"test@example.com"}, "commit"=>"Submit"}

  Rendered newsletter_mailer/confirmation.text.erb (0.4ms)

Sent mail to test@example.com (44ms)
Completed 500 Internal Server Error in 134ms

Errno::ECONNREFUSED (Connection refused - connect(2)):
  app/controllers/newsletters_controller.rb:45:in `create' 
```

所以我想，错误应该在 newsletters_controller.rb 中（第 45 行被标记）：

```
def create
    @newsletter = Newsletter.new(params[:newsletter])

    if @newsletter.save
      NewsletterMailer.confirmation(@newsletter.email).deliver ### line 45
      flash[:success] = 'It works!'
      redirect_to root_path
    else
      flash[:error] = 'Error!'
      render action: "new"
    end
end 
```

NewsletterMailer.rb

```
class NewsletterMailer < ActionMailer::Base
  default from: "some@email.com"

  def confirmation(email)
    mail to: email,
         subject: "Welcome"
  end
end 
```

同样，它仅在开发中有效，而在生产中无效。我也尝试将数据库更改为 Mysql2，但出现同样的错误。

我的数据库.yml：

```
production:
  adapter: postgresql
  encoding: unicode
  reconnect: false
  database: app_production
  pool: 5
  username: user
  password: secret
  host: localhost 
```

对于邮件，我使用 smtp 和 mandrill 或 gmail。Gmail 设置在另一个应用程序中运行良好...

我的环境.rb

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
LandingPage::Application.initialize!

LandingPage::Application.configure do 
  config.action_mailer.delivery_method = :smtp

  config.action_mailer.smtp_settings = {
    :address   => "smtp.mandrillapp.com",
    :port      => 587, # or 25
    :enable_starttls_auto => true, # detects and uses STARTTLS
    :user_name => "user",
    :password  => "password",
    :authentication => 'login' # Mandrill supports 'plain' or 'login'
}
end 
```

更新：我发现提交的内容保存在我的索引中。所以我猜数据库可以工作。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:20:51.770

我通过从 mandrill 更改新密码（api-key）解决了我的问题。仍然不知道问题是什么，因为旧的它在开发模式下工作......

工作环境：

```
YourApp::Application.configure do
  config.action_mailer.smtp_settings = {
    :address   => "smtp.mandrillapp.com",
    :port      => 587,
    :enable_starttls_auto => true,
    :user_name => "MANDRILL_USERNAME",
    :password  => "MANDRILL_PASSWORD", # SMTP password is any valid API key
    :authentication => 'login'
  } 
```

# c# - 实体框架 GetDatabaseValues() 抛出 NullReferenceException

> ID：15086152
> 
> 赞同：0
> 
> 时间：2013-02-26T10:02:05.413
> 
> 标签：c#, dbcontext, entity-framework-4.3

对象代码：

```
public class ParticipatingService
{
    [Key]
    public int Id { get; set; }

    public int OptimisticVersion { get; set; }

    [DisplayName("Receiver site")]
    public int? TargetSiteId { get; set; }
    [DisplayName("Receiver site")]
    public virtual Hospital TargetSite { get; set; }

    [DisplayName("Provider site")]
    public int? SourceSiteId { get; set; }
    [DisplayName("Provider site")]
    public virtual Hospital SourceSite { get; set; }

    [DisplayName("Provider person")]
    public int? SourcePersonId { get; set; }
    [DisplayName("Provider person")]
    public virtual Person SourcePerson { get; set; }

    [DisplayName("Study")]
    public int StudyId { get; set; }
    [DisplayName("Study")]
    public virtual Study Study { get; set; }

    [DisplayName("Start date")]
    public virtual PartialDate StartDate { get; set; }
    [DisplayName("End date")]
    public virtual PartialDate EndDate { get; set; }

    public int? RegInvestigatorFormId { get; set; }
    public PartialDate AuthorizationDate { get; set; }
    public bool IsNationalCoordinator { get; set; }

    [DisplayName("Role")]
    public int RoleId { get; set; }
    [DisplayName("Role")]
    public virtual ParticipatingServiceCLI Role { get; set; }

    [DisplayName("Affiliation type")]
    public int? AffiliationId { get; set; }
    public virtual AffiliationCLI Affiliation { get; set; }

    public bool IsFromActivePersonSite
    {
        get
        {
            foreach (PersonSite personSite in SourcePerson.PersonSites.ToList().OrderByDescending(ps => ps.StartDate.Date))
            {
                if (personSite.SiteId == SourceSiteId)
                {
                    return personSite.IsActive();
                }
            }
            return false;
        }
    }

    public bool IsFromSecondarySite
    {
        get
        {
            foreach (PersonSite personSite in SourcePerson.PersonSites.ToList().OrderByDescending(ps => ps.StartDate.Date))
            {
                if (personSite.SiteId == SourceSiteId)
                {
                    return personSite.RelationType.StringId.Equals("Secondary");
                }
            }
            return false;
        }
    }

    public override bool IsActive()
    {
        return !this.IsDeleted && this.SourcePerson != null && this.Study != null && this.TargetSite != null && this.SourcePerson.IsActive() && this.TargetSite.IsActive() && (this.EndDate == null || this.EndDate.Date == null || this.EndDate.Date > DateTime.Now);
    }
} 
```

存储库代码：

```
public virtual T Update(T obj)
    {
        System.Data.Entity.Infrastructure.DbEntityEntry<T> dbEntry = this.Context.Entry<T>(obj);
        System.Data.Entity.Infrastructure.DbPropertyValues x = dbEntry.GetDatabaseValues();
        int optimisticValue = x.GetValue<int>("OptimisticVersion");
        if ((int)this.Context.Entry<T>(obj).GetDatabaseValues()["OptimisticVersion"] == obj.OptimisticVersion)
        {
            obj.OptimisticVersion++;
            obj.LastModificationDate = DateTime.Now;
            this.Context.Entry<T>(obj).State = EntityState.Modified;
            this.Context.SaveChanges();
            return obj;
        }
        throw new DBConcurrencyException("The selected item is obsolete !");
    } 
```

问题 ：

我正在使用具有 CRUD 操作 (DRY) 的通用管理器和通用存储库。问题是当试图保存一个对象时（只有一种类型的解决方案会导致该问题），它在第一次更新时运行良好。然后尝试再次更新同一个对象会导致`NullReferenceException`. `GetDatabaseValues()`我试图拆分以下行：

```
(int)this.Context.Entry<T>(obj).GetDatabaseValues()["OptimisticVersion"] == obj.OptimisticVersion 
```

分成多行：

```
System.Data.Entity.Infrastructure.DbEntityEntry<T> dbEntry = this.Context.Entry<T>(obj);
System.Data.Entity.Infrastructure.DbPropertyValues x = dbEntry.GetDatabaseValues();
int optimisticValue = x.GetValue<int>("OptimisticVersion"); 
```

有谁知道为什么它可以第一次获取数据库值并在下次调用时抛出异常？

这是堆栈跟踪：

```
System.Data.Objects.EntityEntry.DetectChangesInComplexType(StateManagerMemberMetadata topLevelMember, StateManagerMemberMetadata complexMember, Object complexValue, Object oldComplexValue) 
at System.Data.Objects.EntityEntry.DetectChangesInProperties(Boolean detectOnlyComplexProperties) 
at System.Data.Objects.EntityEntry.InternalGetOriginalValues(Boolean readOnly) 
at System.Data.Objects.EntityEntry.GetUpdatableOriginalValues() 
at System.Data.Entity.Internal.StateEntryAdapter.GetUpdatableOriginalValues() 
at System.Data.Entity.Internal.InternalEntityEntry.get_OriginalValues() 
at System.Data.Entity.Internal.InternalEntityEntry.GetDatabaseValues() 
at System.Data.Entity.Infrastructure.DbEntityEntry`1.GetDatabaseValues() 
at EORTC.BASE.DAL.EORTCBaseRep`1.Update(T obj) in     C:\Projects\_Prisma\EORTC.BASE.DAL\EORTCBaseRep.cs:line 121 
at EORTC.BASE.BLL.EORTCBaseManager`1.Update(T obj, Boolean validate) in C:\Projects\_Prisma\EORTC.BASE.BLL\EORTCBaseManager.cs:line 58 
at Prisma.BLL.ParticipatingServiceManager.Update(ParticipatingService obj, Boolean validate) in C:\Projects\_Prisma\Prisma.BLL\Managers\Service\ParticipatingServiceManager.cs:line 96 
at Prisma.Web.Controllers.ParticipatingServiceController.Edit(Int32 id, FormCollection collection) in C:\Projects\_Prisma\Prisma.Web\Controllers\Service\ParticipatingServiceController.cs:line 172 
at lambda_method(Closure , ControllerBase , Object[] ) 
at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) 
at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) 
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) 
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() 
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() 
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) 
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
at System.Web.Mvc.Controller.ExecuteCore() 
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 
at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) 
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5() 
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0() 
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) 
at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End() 
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d() 
at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) 
at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) 
at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) 
at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) 
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:05:52.393

您可以在模型和数据库表中使用时间戳来跟踪这些值吗？

```
[Timestamp]
    public Byte[] Timestamp { get; set; } 
```

# vim - Vim：插入模式非常慢，有 400 多行

> ID：15086155
> 
> 赞同：11
> 
> 时间：2013-02-26T10:02:14.363
> 
> 标签：vim, line

我有一个包含 400 多行的文件（这是一篇论文）。当我在靠近顶部的某个地方编辑它时（例如，在第 20 行），Vim 一如既往地活泼。然而，在底部附近（大约第 400 行）编辑它会导致我在输入字符和 Vim 在屏幕上显示它之间出现明显的延迟。因此，编辑这么大的文件几乎是不可能的。

这是什么原因，我该怎么办？

我试过切换`swapfile`,`syntax`等`scrolloff`，但似乎没有帮助。Vim 的最大行数应该是 2147483647，所以我实际上应该还有很长的路要走:)

如果这与设置有关`maxmem`，那么考虑到我编辑最多 2500 行的文件，什么是合理的值？

非常感谢您的帮助！干杯。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T11:19:27.903

好的，折叠是这里的问题（我有一些不好的设置`foldlevelstart`）。所以，根据我的经验和[这些](https://superuser.com/questions/550669/my-copy-of-vim-is-running-extremely-slowly-when-i-edit-medium-to-large-eg-1000) [问题](https://github.com/vim-ruby/vim-ruby/issues/8)：

```
set foldenable              " can slow Vim down with some plugins
set foldlevelstart=99       " can slow Vim down with some plugins
set foldmethod=syntax       " can slow Vim down with some plugins 
```

其他要检查/切换的事情是`syntax`,`filetype`和`wrap`行长（一些插件可能会因为很长的行而变慢）。

在没有当前设置的情况下运行 Vim 是一个很好的起点。感谢@Frederik 向我指出这一点：

```
vim -u NONE 
```

在此之后，禁用所有插件是一个好的开始。有关一般知识，另请参阅：`:help slow`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-02T09:09:12.037

我最近遇到了这个确切的问题 - 在相对较短（降价）文件的底部键入时出现延迟。在卸载插件并注释掉我的 .vimrc 中的大部分设置后，我发现问题是来自vim预装的[vim-markdown 插件的 markdown 折叠。](https://github.com/tpope/vim-markdown)注释掉`let g:markdown_folding = 1`就行了。

我仍然想对 markdown 文件进行自动折叠，所以我安装了[vim-markdown-folding](https://github.com/masukomi/vim-markdown-folding)并且性能没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-21T20:33:46.473

在我的情况下，在多个窗口中打开相同文件的相对数字是滞后的。我不得不这样做`:set norelativenumber`或关闭另一个窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-25T11:36:27.153

不要只怪语法，有几件事会减慢正常模式下的编辑速度。例如自动完成；我有好几天认为我的 Vim 很慢是因为语法问题。我将自动完成插件配置为仅在输入至少 6 个字符后才触发自动完成功能，并且速度大大提高。我什至不必用语法高亮来触摸任何东西。

# c - 将 libusb-1.0.9 链接到 windows 中的代码块

> ID：15086156
> 
> 赞同：0
> 
> 时间：2013-02-26T10:02:19.377
> 
> 标签：c

我从网上下载了 libusb-1.0.9 库，但它没有任何 .lib 文件。虽然它有一个 .def 文件。它显示的错误是 "uninitialized reference to libusb_init" 。有一个 .lib 文件需要添加到编译器设置中的链接器属性中，但我无法修复它。如果有人可以帮助我，那将是非常有帮助的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:41:40.240

根据VS2008，

转到项目 -> 项目属性 -> 配置 -> 链接器 -> 输入 -> 附加依赖项，将您的 .lib 名称添加到优势中。并且还将 .lib 文件复制到您的项目目录中。

如果您没有 libusb-1-0-9.lb 文件，那么您可以从[Sourceforge.net下载](http://sourceforge.net/projects/libusb-win32/?source=dlp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:22:50.200

您是否尝试过阅读[有关“使用项目依赖项”的 code::blocks 文档](http://wiki.codeblocks.org/index.php?title=The_build_process_of_Code%3a%3aBlocks#Using_project_dependencies)？

# java - Java Socket 编程 => 只有 IE9 有效？

> ID：15086157
> 
> 赞同：0
> 
> 时间：2013-02-26T10:02:20.397
> 
> 标签：java, sockets

我正在创建一个多线程服务器程序，以在尝试连接到 localhost 时显示浏览器的请求。

我发现我的 Windows 上只有 IE9 可以正常工作，但 Firefox 19、Chrome、Opera 却没有。他们只是坐在那里等待我的程序响应。

我错过了什么？

```
import java.io.*;
import java.net.*;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.logging.Level;
import java.util.logging.Logger;

public class HTTPEchoServer {

    private static final String serverName = "HTTPEchoServer";
    private static final int port = 80;
    private static final String CRLF = "\r\n";
    private static final Logger logger = Logger.getLogger(serverName);

    private static void printHeader(PrintWriter out) {
        out.println("HTTP/1.0 200 OK\r\n" + "Server: " + serverName + CRLF
                + "Content-Type: text/html" + CRLF + CRLF
                + "<!DOCTYPE HTML PUBLIC "
                + "\"-//W3C//DTD HTML 4.0 Transitional//EN\">\n"
                + "<HTML>\n"
                + "<HEAD>\n"
                + " <TITLE>" + "HTTP Echo Server Result</TITLE>\n"
                + "</HEAD>\n"
                + "<H1>HTML Received from HTTP Echo Server</H1>\n"
                + "<B>Here is the request sent by your browser:</B>\n"
                + "<PRE>");
    }

    private static void printTrailer(PrintWriter out) {
        out.println("</PRE>\n" + "</BODY>\n" + "</HTML>\n");
    }

    static class ClientHandler extends Thread {

        Socket socket = null;

        public ClientHandler(Socket socket) {
            this.socket = socket;
        }

        @Override
        public void run() {

            logger.log(Level.INFO, "Accepted client {0}:{1}", 
                  new Object[]{socket.getInetAddress(), socket.getPort()});
            try {

                InputStream is = socket.getInputStream();
                OutputStream os = socket.getOutputStream();
                try (PrintWriter writer = new PrintWriter(os, true)) {
                    synchronized (this) {
                        printHeader(writer);
                        writer.flush();
                        BufferedReader reader = new BufferedReader 
                             (new InputStreamReader(is));
                        String line;
                        while ((line = reader.readLine()) != null) {
                            writer.println(line);
                            writer.flush();
                        }
                        printTrailer(writer);
                        writer.flush();
                        writer.close();
                    }
                }
                socket.close();
            } catch (IOException ex) {
                logger.log(Level.SEVERE, null, ex);
            }
            logger.log(Level.INFO, "Disconnected client {0}:{1}",
new Object[]{socket.getInetAddress(), socket.getPort()});
        }
    }

    public static void main(String[] args) {    

        try {
            ServerSocket server = new ServerSocket(port);
            logger.log(Level.INFO, "Server started, listening at port {0} ...", port);
            ExecutorService executor = Executors.newCachedThreadPool();
            while (true) {
                Socket socket = server.accept();
                ClientHandler handler = new ClientHandler(socket);
                executor.execute(handler);
            }
        } catch (IOException ex) {
            logger.log(Level.SEVERE, null, ex);
        }
    }
} 
```

* * *

**另外，我发现除非我将端口更改为 8080，否则我无法在 OS X 上运行此程序。我已经在我的 OS X 10.8.2 计算机上禁用了防火墙。我得到的错误是：**

```
<pre>
java.net.BindException: Permission denied
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376)
    at java.net.ServerSocket.bind(ServerSocket.java:376)
    at java.net.ServerSocket.<init>(ServerSocket.java:237)
    at java.net.ServerSocket.<init>(ServerSocket.java:128)
    at HTTPEcho.HTTPEchoServer.main(HTTPEchoServer.java:80)
</pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:10:42.240

您无法在除 MSIE 之外的所有浏览器中的小程序中打开服务器套接字。这样做是因为打开服务器套接字是违反安全规定的。如果你确实想这样做，你必须签署你的小程序。

我希望我能正确理解您的代码在小程序环境中运行（因为您提到了浏览器），尽管我无法从您从`main()`.

编辑：我再次阅读了您的帖子，了解到您的问题实际上包含 2 个问题：第一个是关于小程序的问题，第二个是关于在 Unix 下作为应用程序运行的问题。对于 unix @Anders R. Bystrup 给了你答案：只有 root 可以监听 1024 下的端口。所以，你必须以 root 或使用`sudo`.

顺便说一句，您似乎走错了路。您能否解释一下您想要实现的目标，社区可能会给您提供更好解决方案的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:11:25.790

正如异常本身所说`java.net.BindException: Permission denied`。您需要成为`root`用户才能绑定以下端口`1024`。如果您在 linux 上，您`sudo java HTTPEchoServer`可以启动服务器。

其他可能性可能是您已经在 port 上运行了一个服务器`80`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:11:34.957

端口 80 是保留的 HTTP 端口，还有其他端口是保留的。

端口 1 到 1023 用于管理功能，使大于 1024 的端口号可供使用。

[如何找到可用端口](https://stackoverflow.com/questions/2675362/how-to-find-an-available-port)

# python - 如何检测无响应/冻结的进程？

> ID：15086160
> 
> 赞同：1
> 
> 时间：2013-02-26T10:02:25.773
> 
> 标签：python, unix, process, monitoring

我有几个用于进行网络爬取的脚本。它们一直在运行，并且永远不应该停止。然而，大约一周后，它们系统地“冻结”：不再有输出，对 Ctrl+C 或任何东西都没有响应。唯一的方法是`kill`进程并重新启动它。

我怀疑这些问题来自我用于检索数据的库 ( `urllib2`)，但这个问题很难重现。

因此，我想知道如何检查进程的状态并在它被冻结时自动杀死/重新启动它。我正在考虑创建一个 PID 文件，并定期更新它。然后另一个脚本可以定期检查此 PID 文件的最后修改日期，如果它太旧，则重新启动该进程。我可以使用像[Monit](http://mmonit.com/monit/)这样的东西来进行监控。

这是我应该怎么做的吗？是否有另一种最佳实践/常用方法来检查流程的响应性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:41:21.017

如果您有一个始终在运行的进程，没有连接的终端，并且是进程组负责人 - 那就是一个守护进程。你无疑知道这一切。

在这样的编码程序中有一些事实上的做法。一种是有一个信号处理程序，它接受 SIGHUP 并强制程序重新初始化自己。这意味着关闭所有打开的日志文件，重新读取配置脚本等。我不知道这对您的问题有多适用，但它有时可以解决我工作中的冻结守护进程等问题。

`SIGUSR1`你可以通过使用和信号来定制这个想法`SIGUSR2`来做一些特殊的事情，比如将状态写入文件，或者其他任何事情。由于信号在中断时进入，脚本中的陷阱语句和 python 本身的信号处理程序会将程序状态推送到中断堆栈并执行“工作”。在您的情况下，您可能需要程序 fork/exec 本身，然后杀死父级。

# algorithm - for 循环的计算复杂度 - 与我自己矛盾

> ID：15086161
> 
> 赞同：0
> 
> 时间：2013-02-26T10:02:32.013
> 
> 标签：algorithm, complexity-theory, big-o, asymptotic-complexity

通过分析程序的运行时间，我有一个矛盾。例如，考虑以下代码：

```
for(int i=0;i<n;i++)
{
    for(int j=0;j<n;j++)
    {
         .....
    }
} 
```

这里，第一个 for 循环的计算复杂度为 O(n ² )，第二个循环的计算复杂度为 O(n)。但是，第二个循环执行 n ²次，而第一个循环执行 n 次。例如，如果我们在内循环中放置一个 cout 语句，它会输出 n ²次，但是如果我们将 cout 放在第一个循环内但在内循环之外的某个位置，它会输出 n 次。那么为什么我们说内循环的复杂度是O(n)，而外循环的复杂度是O(n ² )。**我们说外循环的复杂度是 O(n ² ) 但它执行了 n 次，为什么会这样呢？**难道我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:05:02.547

内部循环执行 n 次，耗时 O(n)。外循环执行内循环 n 次，但您必须为这 n 次外循环执行中的每一个计算内循环的成本。这使得它 O(n * O(n)) = O(n^2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:05:10.997

外循环将运行 n 次，内循环将运行 n 次，每次外循环迭代使内循环运行 n^2 次。因此，内部循环中的语句将被执行 n^2 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T16:24:32.900

假设 n = 7 ; 然后

```
for(int i=0 ; i< 7 ; i++) //time complexity is : (1) + (7+1) + (7)
{
    for(int j=0;j<7;j++) //  time complexity is: (1) + [(7+1)+(7+1)+(7+1)+(7+1)+(7+1)+(7+1)+(7+1)] + (7)
    {
         .....
    }
} 
```

**总时间复杂度**= [2+2(7)] + [1 + (7+1)^2 + 7]

现在替换 7 = n ; 我们将得到

**总时间复杂度**= [2+2n] + [1 + (n+1)^2 + n] = 2 + 2n + 1 + (n^2 + 2n + 1) + n = n^2 + 5n + 4

这里的主导项是 n^2。所以最坏的情况是**O(n^2)**

# c# - 在 BHO 中执行 window.execScript 时，如何确定哪个 javascript 行导致错误？

> ID：15086163
> 
> 赞同：3
> 
> 时间：2013-02-26T10:02:35.093
> 
> 标签：c#, javascript, internet-explorer, com, bho

我的问题很笼统，我不是在寻找解决特定错误（我有一堆:-)

我的 BHO 是功能性的，`OnDocumentComplete`称为。在`OnDocumentComplete`我可以执行`window.execSrcipt("console.log('Hello');");`等它工作。

我还可以运行更复杂的 100 行脚本，将它们从流中读取到 execScript 方法的字符串参数中。

我的问题是：如果发生任何脚本错误（*任何*）COM 异常不包含原始 javascript 错误信息，例如行号。我尝试调试 BHO 项目（它是一个 C# 类库），并且我还尝试在 IE 中使用 F12 Dev Tools。在 IE 控制台中，红色错误始终是下载的 html 的第一行，因此显然 IE 可以正确捕获注入的脚本上下文，并且 COM 异常没有详细信息。

现在我怎样才能获得更接近的信息？

# ruby - Ruby 1.8.7：枚举器下一个抱怨参数的数量

> ID：15086165
> 
> 赞同：2
> 
> 时间：2013-02-26T10:02:40.190
> 
> 标签：ruby, enumerator, ruby-1.8.7

当我在 Ruby 1.9.3（还有 JRuby、Rubinius ......）中执行以下操作时，它按预期工作：

```
enum = [1,2,3,4,5].each
#=> #<Enumerator: [1, 2, 3, 4, 5]:each>
enum.next
#=> 1 
```

如果我在 Ruby 1.8.7 上尝试使用 backports 做同样的事情，会发生以下事情：

```
require "backports"
enum = [1,2,3,4,5].each
#=> #<Enumerable::Enumerator:0x1057fd400>
enum.next
#=> ArgumentError: wrong number of arguments (1 for 0) 
```

我在这里做错了什么？据我所知，我没有给出任何论据。

*澄清：*没有后端口就不会发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:53:12.417

看起来这是 backports 中的一个错误。我举报了。

# android - 使用自动对焦无法拍照

> ID：15086166
> 
> 赞同：3
> 
> 时间：2013-02-26T10:02:40.833
> 
> 标签：android, android-camera, autofocus, surfaceholder

我已经针对我的问题搜索了一些解决方案，并且确定有很多相关问题，但没有解决我的问题。

我收到运行时异常：`takepicture failed:native_autofocus`..etc。

我尝试使用自动对焦从相机拍照，但我似乎无法理解可能导致错误的原因。

这是我的代码。

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mholder;
    private Camera mcamera;
    private Handler handler = new Handler();
    public CameraPreview(Context context, Camera camera) {
        super(context);
        this.mcamera = camera;
        mholder = getHolder();
        mholder.addCallback(this);
        mholder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        if (mholder.getSurface() == null) {
            return;
        }
        try {
            mcamera.stopPreview();
        } catch (Exception e) {
            Log.d("surfaceChanged", e.toString());
        }
        try {
            mcamera.setPreviewDisplay(holder);
            mcamera.startPreview();           
        } catch (IOException e) {
            Log.d("surfaceChanged--->surfaceCreated", e.toString());
        }
    } 
```

我认为我的可运行代码中缺少某些东西，我试图省略可运行并执行一次自动对焦，它消除了运行时错误。我是否错过了重新初始化这部分的某些内容？

```
 private void autoFocus(Camera mcamera){
        final  Camera cam=mcamera;
        handler.postDelayed(new Runnable() {            
            @Override
            public void run() {         
                cam.autoFocus(autoFocusCallback);
                handler.postDelayed(this, 1500L);            
            }
        }, 1500L);
    }
    AutoFocusCallback autoFocusCallback=new AutoFocusCallback() {

        @Override
        public void onAutoFocus(boolean success, Camera camera) {
            camera.takePicture(null, null, mPicture);
            }
    };
    private PictureCallback mPicture=new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
          //do something
        }
    };

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            mcamera.setPreviewDisplay(holder);
            mcamera.startPreview();
            mcamera.autoFocus(autoFocusCallback);
        } catch (IOException e) {
            Log.d("surfaceCreated", e.toString());
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T06:52:33.533

看看[这里](https://stackoverflow.com/questions/19804233/android-autofocuscallback-is-not-being-called-or-not-returning/19921582#19921582)

或[在这里](https://stackoverflow.com/questions/19887219/log-v-doesnt-show-show-output-for-setting-camera-preview-and-image-size/19976647#19976647)

你在surfacecreated上调用autofocus，它应该在surface changed时调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:46:00.737

你没有提到它，但一定要在你的清单中包含权限。

< 使用功能 android:name="android.hardware.camera.autofocus" />

# zend-framework - 使用 zend 实现数据映射器模式

> ID：15086169
> 
> 赞同：1
> 
> 时间：2013-02-26T10:02:45.557
> 
> 标签：zend-framework, datamapper

我正在我的 zend 框架 1.12 项目中实现数据映射器，并且它的工作正常。现在进一步增强它我想以下列方式优化它。

在获取任何数据时，我想从模型表的 10 个字段中获取任何 3 个字段数据？- 当前的问题是，如果我获取唯一需要的值，那么域对象类中的其他值保持空白，并且在保存该数据时我正在保存，而模型对象不是单个字段值。

任何人都可以建议这样做的有效方法，以便我可以只获取/更新所需的值，而无需获取所有字段数据来更新记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:22:31.493

如果属性为 NULL，在制作更新时忽略它？如果 NULL 是有效值，那么我认为您需要跟踪每个属性的加载/脏状态。

在调用映射器时，如何将要检索的字段列入白名单？如果您可以保留这些信息，我认为在制作更新时利用这些知识是有意义的。

我通常不会走这条路。当它有意义时，我将延迟加载模型上的某些字段，但我不允许像这样加载对象的一部分，而是我创建一个备用对象用于在加载完整对象时渲染列表资源过于密集。我只与表格数据一起使用的通用虚拟列表对象。它由 SQL 或存储过程结果集填充，通常使用我的通用表映射器。

# java - eclipse在完成方法的全名之前自动完成

> ID：15086174
> 
> 赞同：0
> 
> 时间：2013-02-26T10:02:55.397
> 
> 标签：java, eclipse, jakarta-ee

我正在为 Java ee 使用 Eclipse。我注意到的一件事是在我办公室的计算机上，即使我没有写完方法的全名，eclipse 自动完成功能也能正常工作。

例如：我一写

```
 getSer 
```

它建议我

```
 getServletContex 
```

但是在家里，只有当我完成方法名称并输入“。”时才会出现建议。

我在办公室使用 Helios，在家里使用 Juno。

在我完成方法名称之前，任何人都知道如何让另一个日食自动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:11:58.043

转到 Preferences>java>Editor>Content Assist 并配置您的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:06:44.907

IDE 有时只建议这些自动完成。使用`CTRL`+`space`自己调用它。

# django - Django，在创建后在表单中设置 ChoiceField

> ID：15086175
> 
> 赞同：0
> 
> 时间：2013-02-26T10:02:58.863
> 
> 标签：django

我想显示一个包含一些自定义用户数据的表单。更具体地说，我想`forms.ChoiceField`为每个用户填充不同的数据。

这是我的`Form`：

```
class WallPostForm(forms.Form):
    text = forms.CharField(label=u'', widget=TinyMCE(attrs={'cols': 70, 'rows': 5}))
    relates_to = forms.ChoiceField(label=u'Relates to', choices=[], widget=forms.Select(), required=False)

    def __init__(self, data):
        self.fields['relates_to'] = forms.ChoiceField(label=u'Relates to', choices=data, widget=forms.Select(), required=False)
        super(WallPostForm, self).__init__() 
```

这就是我所说的：

```
user = get_object_or_404(User, username=username)
data = UserTopics.objects.filter(user=user, result=0).values('id', 'topic__name')[:10]
form = WallPostForm(data) 
```

我得到一个`'WallPostForm' object has no attribute 'fields'`错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:43:54.270

作为杰克答案的补充，您最好只替换`choices`属性，而不是整个字段：

```
def __init__(self, *args, **kwargs):
    relates_to_choices = kwargs.pop('relates_to_choices')
    super(WallPostForm, self).__init__(*args, **kwargs)
    self.fields['relates_to'].choices = relates_to_choices 
```

（我重命名了变量，它不会是查询集。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:15:03.630

Django`fields`在`__init__`.

所以只需交换你的代码：

```
def __init__(self, data):
    super(WallPostForm, self).__init__()
    self.fields['relates_to'] = forms.ChoiceField(label=u'Relates to', choices=data, widget=forms.Select(), required=False) 
```

不过，您可能不应该像那样覆盖`Form`a `__init__`。Django 的表单系统期望`data`init 中的 arg 包含表单的数据，而不是您用于选择字段的查询集。

我会以不同的方式覆盖它：

```
def __init__(self, *args, **kwargs):
    relates_to_queryset = kwargs.pop('relates_to_queryset')
    super(WallPostForm, self).__init__(*args, **kwargs)
    self.fields['relates_to'] = forms.ChoiceField(label=u'Relates to', choices=relates_to_queryset, widget=forms.Select(), required=False) 
```

然后调用它：

```
form = WallPostForm(request.POST or None, relates_to_queryset=data) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T10:47:25.870

您可以使用“初始”参数，请参阅文档：[https ://docs.djangoproject.com/en/dev/ref/forms/api/#django.forms.Form.initial](https://docs.djangoproject.com/en/dev/ref/forms/api/#django.forms.Form.initial)

# continuous-integration - 工件存储库的目的是什么？

> ID：15086176
> 
> 赞同：37
> 
> 时间：2013-02-26T10:03:05.173
> 
> 标签：continuous-integration, nexus, artifactory

无论您在哪里阅读有关**持续交付**或**持续集成**的信息，都建议使用**工件存储库**来存储工件，即使 Jenkins 已经为每个构建存储了它们。

**那么为什么推荐使用工件存储库呢？是否有一个流畅的解决方案来处理 Jenkins 构建的工件，例如。使用这些工件进行部署？**

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-26T10:37:33.187

**工件存储库**和**持续集成工具**有**两个不同的用途**，一个不能用另一个代替。查看来自[Artifactory的](http://www.jfrog.com/home/)[视频](https://www.youtube.com/watch?feature=player_embedded&v=aa4YBDUDWy0)，它是工件存储库的提供者之一，了解为什么应该使用工件存储库。

Jenkins 将工件存储为无版本控制的普通文件，而工件存储库中的工件可以进行版本控制。因此，您在检索工件和管理它们方面有更大的灵活性。阅读[这篇](http://blogs.collab.net/subversion/why-you-should-be-using-an-artifact-repository-part-1)非常好的文章，了解我们为什么需要它们。当然，并非所有这些事情都得到 Jenkins 等持续集成工具的支持。

此外，您还可以查看集成了两者[的 Jenkins 的 Artifactory 插件。](https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:29:01.947

需要一个工件存储库，但工件存储库是一个概念部分，并不总是一个独特的工具。使用 Jenkins，您应该拥有 MD5 签名和（我认为）一种从远程服务器下载所需文件的方法（网络服务调用，对吗？）。当然，如果您正在做一些简单的事情，例如使用 Jenkins 构建管道插件，它应该能够顺利访问正确版本的文件。

或者，如果您使用单独的部署工具，则更好的工具会捆绑工件存储库。

无论如何，您想要 ITIL 人员所说的权威媒体/软件库。确定性在于这些位是安全的、可信的和官方的。还有一个图书馆，可以轻松查找和访问它们。使用工件存储库时，您需要确保其足够安全。它已备份。它可用于您的部署（包括生产）。如果您查看 Jenkins 并且它符合您在这些类别中的标准，请认为您已经完成了。如果缺少它，我不会感到惊讶，那么您需要像 Maven 存储库这样的专用工具，或者与部署工具捆绑在一起的东西。

关于这个主题的更多内容，有一个[录制的网络广播](http://www.urbancode.com/html/resources/webinars/Role_of_Binary_repositories_in_Software_Configuration_Management.html)。幻灯片在[Slideshare](http://www.slideshare.net/Urbancode/package-repositories-the-unsung-heroes-of-configuration-and-release-management)上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:13:38.717

我没有跟上 Jenkins 的最新情况，我们仍然使用最初称为 Hudson 的 CI 版本。

在您的项目中，您的 pom 通常应该指向您自己的工件存储库，如果您可以获取和部署您自己的（公司）项目。

将工件存储库与 CI 服务器一起使用，它可以部署成功构建的快照和版本，其他开发人员可以使用这些快照和版本。

# javascript - $(window).height() 返回文档高度（但声明了 doctype）

> ID：15086179
> 
> 赞同：0
> 
> 时间：2013-02-26T10:03:14.177
> 
> 标签：javascript, jquery, doctype

我有这个问题。我需要获取浏览器的窗口高度，但`$(window).height()`返回更大的数字，可能是文档高度。多年来，我一直在使用这种文档结构。有什么不对？

```
<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs" dir="ltr">
<head>
... 
```

原因是什么？

谢谢

* * *

编辑：

我找到了错误在哪里。我的文本编辑器 (PSPad) 自动启用**在文件开头插入 UTF8 BOM 的**选项。这会导致 doctype 之前出现不可见的字符。这曾经让我很为难。但在那个时候更加明显。我花了两天时间才弄清楚为什么出了问题（页面上的图像消失了），并且 webkit 浏览器在 body 中呈现了 head 标签。一团糟。所以现在它可以完美地与所有新版本的 jQuery 一起工作。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:05:37.307

如果您使用更现代的标题，您应该获得视口的高度：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

如果你真的需要 XHTML，那么你应该使用这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head> 
```

doctype 元素必须是文档中的第一件事。

# java - 我应该将共享静态变量指定为 volatile 吗？

> ID：15086181
> 
> 赞同：1
> 
> 时间：2013-02-26T10:03:19.010
> 
> 标签：java, concurrency

例如，我在多线程环境中有静态字段（许多线程使用此变量）：

```
public static int value; 
```

我应该添加`volatile`声明以建立先发生关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:07:02.537

实例关联与并发修改正交。

如果您通过多个线程访问**静态**值，每个线程都可以拥有它的*本地缓存副本*为避免这种情况，您可以将变量声明为***静态易失性***，这将强制线程每次读取全局值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:05:45.787

是的，这将是一种方法。另一种方法是仅使用同步方法访问它。

> 可变字段是用于在线程之间传递状态的特殊字段。对 volatile 的每次读取都会看到任何线程对该 volatile 的最后一次写入；实际上，它们被程序员指定为由于缓存或重新排序而不能看到“陈旧”值的字段。禁止编译器和运行时在寄存器中分配它们。它们还必须确保在写入之后，它们会从缓存中刷新到主内存，这样它们就可以立即对其他线程可见。类似地，在读取 volatile 字段之前，必须使高速缓存无效，以便主内存中的值，而不是本地处理器高速缓存中的值是可见的。对 volatile 变量的重新排序访问还有其他限制。

[http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#volatile](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#volatile)

请注意，如果除了happens-before 关系之外还需要原子性，请阅读此问题的答案：[Java: Is there a right way to use static volatile variables？](https://stackoverflow.com/questions/13374988/java-is-there-a-right-way-to-use-static-volatile-variables)

# c - inet_ntop 失败并显示“协议不支持地址系列”

> ID：15086183
> 
> 赞同：0
> 
> 时间：2013-02-26T10:03:22.267
> 
> 标签：c, sockets

我遇到了 inet_ntop 失败并将 errno 设置为“协议不支持的地址系列”的问题。

接受代码：

```
 //Wait for connection from client
    Network.RemoteSock = accept(Network.LocalSock, (struct sockaddr *) &Network.RemoteAddr, &Network.RemoteAddr_Size);
    if(Network.RemoteSock == -1) {
        Die("accept Failed In Webserver: %s\n", strerror(errno));
    }

    //Set socket send timeout
    if(setsockopt(Network.RemoteSock, SOL_SOCKET, SO_SNDTIMEO, (char *)&Settings.Send_Timeout, sizeof(Settings.Send_Timeout)) == -1) {
        Die("setsockopt Failed In Webserver: %s\n", strerror(errno));
    }

    //Set socket recv timeout
    if(setsockopt(Network.RemoteSock, SOL_SOCKET, SO_RCVTIMEO, (char *)&Settings.Recv_Timeout, sizeof(Settings.Recv_Timeout)) == -1) {
        Die("setsockopt Failed In Webserver: %s\n", strerror(errno));
    }

    //Get remote address
    if(inet_ntop(Network.RemoteAddr.ss_family, get_in_addr((struct sockaddr *) &Network.RemoteAddr), Address, sizeof(Address)) == NULL) {
        Die("inet_ntop Failed In Webserver: %s\n", strerror(errno));
    } 
```

网络定义：

```
struct _Network {
    int LocalSock, RemoteSock;
    struct sockaddr_storage RemoteAddr;
    socklen_t RemoteAddr_Size;
} Network; 
```

检查 GDB，我看到 Network.RemoteAddr.ss_family 在调用 inet_ntop 之前为 0：

```
(gdb) print Network.RemoteAddr
$1 = {ss_family = 0, __ss_align = 0, __ss_padding = '\000' <repeats 111 times>} 
```

不知道 ss_family 的有效值是什么，我不知道这是否意味着接受调用失败 - 但我怀疑这就是问题所在。

这可能是某个地方的一些愚蠢问题，但我就是看不到它，有什么想法吗？

在此先感谢 - 亚历克斯

# php - 基本 URL 重写导致内部服务器错误

> ID：15086185
> 
> 赞同：2
> 
> 时间：2013-02-26T10:03:30.397
> 
> 标签：php, .htaccess, url-rewriting

我对此很陌生，并且已经阅读了几篇关于 URL 重写的文章。

[http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

[http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)

我想做的就是改变 www.domain.com/single-recipe.php?id=6

到 www.domain.com/recipes/6

从教程中，我在 .htaccess 中提出了以下代码

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.domain.com [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [L,R=301]

RewriteRule    ^recipes/([0-9]+)/?$    single-recipe.php?id=$1    [NC,L]    # Handle recipe requests 
```

当我尝试访问网站上的任何页面时，我会收到一个可爱的内部服务器错误 500。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:11:07.583

我认为这是因为多余的空间删除它并尝试：

```
RewriteRule ^recipes/([0-9]+)/?$ single-recipe.php?id=$1[NC,L] 
```

# javascript - 由于 iframe 的导航，如何更改浏览器中的 URL？

> ID：15086186
> 
> 赞同：1
> 
> 时间：2013-02-26T10:03:35.310
> 
> 标签：javascript, jquery, html, url, iframe

我想根据 iframe 导航更改浏览器中的 URL，例如：

```
**[URL at navigator: http://localhost/]**

<html>
<body>
<iframe src="http://localhost/?loadiframe=true">
   <!-- this is at the code retrieved by the iframe -->
   <a id="mypage" href="http://localhost/mypage/?loadiframe=true">Navi</a>
</iframe>
</body>
</html> 
```

当用户单击#mypage 链接时，浏览器中的 URL 将是：

```
http://localhost/mypage/ 
```

iframe 的 src 始终相同并不重要。

那可能吗？

也许使用ajax............？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:07:14.823

看一看：[Html5历史api](http://html5demos.com/history)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:17:41.227

如果`target`将链接的属性设置为`_parent`，则地址应在父窗口中打开：

```
<a id="mypage" href="http://localhost/mypage/?loadiframe=true" target="_parent">Navi</a> 
```

# php - GetId 不起作用

> ID：15086191
> 
> 赞同：0
> 
> 时间：2013-02-26T10:03:54.867
> 
> 标签：php, symfony, fosuserbundle

我在 Symfony2 中使用 FosUserBundle 运行以下代码：

```
var_dump($myUser->getId()) 
```

但它什么都不返回，而`var_dump($myUser->getUsername())`工作。为什么不`getId()`工作？

我的吸气剂`user.php`：

```
public function getId()
{
    return parent::getId();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:16:02.503

根据 [https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md) ，这就是您的用户类的样子。

```
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    public function __construct()
    {
        parent::__construct();
        // your own logic
    }
} 
```

你不需要打电话

```
return parent::getId(); 
```

与上述课程

```
return $this->id; 
```

应该管用。

# c# - 无法在构造函数中加载文本框

> ID：15086194
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:04:01.877
> 
> 标签：c#

我有一个名为的表单`SelectCatagoryId`，其中包含一个`DataGridView`. 我想`cellvalue` 将从此处选择的内容传递给另一个名为`Add_product`.

这是按钮事件中的代码`SelectcatagoryId`。

```
private void dataGridView1_MouseClick(object sender, MouseEventArgs e)
{
    String dgv;
    dgv = dataGridView1.CurrentCell.Value.ToString();
    Add_product ap = new Add_product(dgv);
    this.Close();
} 
```

这是`Add_product`表格内的代码

```
namespace Supermarket
{
    public partial class Add_product : Form
    {

        public Add_product()
        {
            InitializeComponent();
        }

        SqlConnection con;
        string file;

        public Add_product(String datagridvalue)
        {
            // MessageBox.Show(datagridvalue);
            textBox10.Text = Convert.ToString(datagridvalue);
        } 
```

`MessageBox`工作正常，表单中 dgv 的值`selectCatagoryId`正确传递给表单`Add_product`，但我无法将变量的值分配`datagridvalue`给`textBox10.Text`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:07:41.737

即使您正在创建一个`overload of constructor`，您也需要`InitializeComponent()`创建控件的所有实例。

```
public Add_product(String datagridvalue)
{
    InitializeComponent();
    // MessageBox.Show(datagridvalue);
    textBox10.Text = Convert.ToString(datagridvalue);

} 
```

默认情况下，所有这些`UI Component`都是在表单的构造函数中启动的。并`Visual Studio`生成方法中的所有Initialization `InitializeComponent()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:17:40.163

在将文本分配给 textBox 之前，您需要显示表单 Add_product。

```
private void dataGridView1_MouseClick(object sender, MouseEventArgs e)
{
    String dgv;
    dgv = dataGridView1.CurrentCell.Value.ToString();
    Add_product ap = new Add_product();
    ap.Show();
    ap.SetProduct(dgv);
    this.Close();
} 
```

...

也将此方法添加到 Add_product 类

```
 public SetProduct(String datagridvalue)
    {
        // MessageBox.Show(datagridvalue);
        textBox10.Text = datagridvalue;
    } 
```

# c# - 模态对话框未关闭

> ID：15086195
> 
> 赞同：1
> 
> 时间：2013-02-26T10:04:05.787
> 
> 标签：c#, javascript, asp.net, web-applications, modal-dialog

## 注册页面.aspx

```
function btnSearchClick()
{
    if (window.showModalDialog)
    {
        window.showModalDialog(
            "Search.aspx", 
            "Search Patient", 
            "dialogWidth:800px; dialogHeight:400px"
        );
        return false;
    }
} 
```

## 搜索.aspx

```
$(document).ready(function ()
{
    $("input[id$='btnAdd']").live('click', function (e) {                   
        hidID.value = $.trim($('table td.csstablelisttdselected:first').text());
        return true;
    });
}); 
```

## 搜索.aspx.cs

```
protected void btnAdd_Click(object sender, EventArgs e)
{
    Response.Redirect("RegistrationPage.aspx?ID=" + hidID.Value, true);
    Page.ClientScript.RegisterStartupScript(
        this.GetType(), 
        "CloseScript", 
        "window.close()", 
        true
    );
} 
```

在`RegistrationPage.aspx`页面点击`button`搜索弹出对话框。
在`Search page`我得到 id`hiddenfield`并重定向到`registration page`.
当我单击 btn add 时，对话框不会关闭，它会重定向到对话框中的注册页面。

**请不要给出“使用 jquery 对话框”、“或使用其他对话框控件”之类的答案**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:31:01.507

这是一个经过测试的示例：

**默认.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test</title>
    <script type="text/javascript">
        function btnSearchClick()
        {
            window.returnValue = undefined;
            var result = window.showModalDialog("Search.aspx", window, "dialogHeight:650px; dialogWidth:900px;");
            if (result == undefined)
                result = window.returnValue;
            if (result != null && result != "undefined")
                alert(result);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <input type="button" id="btnOpen" onclick="btnSearchClick();" />
        </div>
    </form>
</body>
</html> 
```

**搜索.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Search.aspx.cs" Inherits="Search" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script>
        function CloseModal() {
            if (window.opener) {
                window.opener.returnValue = 'your return value';
            }

            window.returnValue = 'your return value';
            self.close();
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
        </div>
    </form>
</body>
</html> 
```

**搜索.aspx.cs**

```
using System;
using System.Web;
using System.Web.UI;

public partial class Search : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {

        Page.ClientScript.RegisterStartupScript(this.GetType(), "CloseScript", "closescript()", true);

    }
} 
```

因此，您可以将一个值从 Modal 传递给 Opener，而不是重定向您的用户。

这里是另一个例子：[模态对话框返回值](http://briancaos.wordpress.com/2012/08/22/showmodaldialog-returnvalue-is-undefined-in-google-chrome/)

希望能有所帮助。

# ios - iOS5 中的 iCloud ubiquityIdentityToken 等效项

> ID：15086205
> 
> 赞同：5
> 
> 时间：2013-02-26T10:04:45.563
> 
> 标签：ios, ios5, core-data, ios6, icloud

在 iOS6 中，此方法返回每个 iCloud 帐户唯一的 id：

```
[[NSFileManager defaultManager] ubiquityIdentityToken] 
```

在 iOS5 中，检查 iCloud 是否可用的唯一方法是使用：

```
[[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil] 
```

这将用于检查 iOS5 中的 iCloud 可用性，但是如何区分 iOS5 中的用户（iCloud 帐户）？

我正在 iCloud 中同步 Core Data，但我也希望能够在没有 iCloud 帐户的情况下使用该应用程序。因此我不能使用 .nosync 文件夹，所以我需要自己管理对存储的访问（确保每个 iCloud 帐户只能访问自己的文件）。为此，我将来自同一个 iCloud 帐户的所有 Core Data 存储放在它自己的文件夹中，该文件夹的名称是使用 ubiquityIdentityToken 生成的，因为这对于每个 iCloud 帐户都是唯一的。

有没有其他方法可以根据 iCloud 帐户获取一些 UUID？据我调查，我可以使用的 URLForUbiquityContainerIdentifier 中没有任何独特之处。或者除了使用文件夹特定的访问权限之外，还有其他方法可以管理访问权限吗？

**相关问题**：[OSX 10.7 下 ubiquityIdentityToken 的等价物](https://stackoverflow.com/questions/12175705/an-equivalent-for-ubiquityidentitytoken-under-osx-10-7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:48:55.237

不，iOS 5 上没有用于此目的的 API。

然而，Core Data 的 iCloud 集成在 iOS 5 上通常并不是那么可靠。如果您必须通过 Core Data 支持 iCloud，请瞄准 iOS 6。

# sql - 向其他用户授予表和索引权限

> ID：15086206
> 
> 赞同：0
> 
> 时间：2013-02-26T10:04:46.480
> 
> 标签：sql, database, oracle, indexing, grant

用户 1 授予用户 2 对表（其索引为 TableIndex）的选择、删除权限。

我可以看到 user2 无法看到该表上存在的索引。

用户 2 运行此 SQL：

```
select DBMS_METADATA.GET_DDL('INDEX','TableIndex') from DUAL;
Result is:  The specified object was not found in the database. 
```

当 User2 在表上执行 Select SQL Queries 时，我希望使用索引，而不需要任何进一步的授权（虽然索引不可见）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:46:11.910

没有“索引许可”之类的东西。

我们授予对表的权限，因为我们可以对它们运行 DML - 选择、更新、删除等。但是我们不对索引执行此类操作，因此没有什么可授予的。

USER2 看不到 DDL 以在 User1 的表上创建索引这一事实是完全正确的。这不关他们的事。User2 从表中选择，该查询将使用 User1 创建的任何适当的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:21:10.777

为了使用`dbms_metadata.get_ddl`您需要`select_catalog_role`授予 user2（[请参见此处](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_metada.htm#i1016867)）。但是即使您看不到该索引，也会使用该索引（在适用/可能的情况下）。

# string - 最简单的字符串操作编程语言

> ID：15086221
> 
> 赞同：0
> 
> 时间：2013-02-26T10:05:18.917
> 
> 标签：string, programming-languages, text-processing, string-parsing

我想编写一个给定一段文本（字母和数字）的程序，它以自定义方式格式化它，与初始源完全不同。

我想知道的是使用哪种编程语言更容易编码。

现在我知道一些 Lua、VB、C 和一点点 Python 和 Java，但我不介意使用其他字母组合语言，如果它足够容易编码的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:19:47.900

如果您可以使用非主流语言，请查看[Unicon](http://unicon.sourceforge.net/book/)。它是所有字符串处理语言之父 SNOBOL 的继承者。

如果你更喜欢主流语言，我会推荐 Python。

# quartz-scheduler - Quartz调度器：在同一个触发器下注册多个作业

> ID：15086226
> 
> 赞同：7
> 
> 时间：2013-02-26T10:05:33.160
> 
> 标签：quartz-scheduler

我是 Quartz 调度程序的新手。我几乎没有什么疑问，希望有人在这里帮忙。非常感谢！

首先跟大家分享一下我在单个Scheduler中组织jobs和triggers的方法：

1.  一个触发器组，多个具有唯一名称的触发器

2.  许多工作组，一个组内有许多具有唯一名称的工作

3.  一个作业组可以与一个触发器关联，以便该组下的所有作业将同时触发

我认为这种组织在调度软件中是很正常的。但是，我只找到了使用多个触发器注册同一个作业的引用。尽管如此，我仍然认为使用相同的触发器注册许多工作在逻辑上是可以实现的。

以下是我自己实现目标的逻辑：

1.  创建Job A，创建Trigger A，调用函数scheduleJob(JobA, TriggerA)先将Job A注册到Scheduler

2.  Job B 被创建，根据唯一名称从 Scheduler 中获取 Trigger A，稍后调用函数 scheduleJob(JobB, TriggerA) 将 Job B 注册到 Scheduler

因此，参考我自己的逻辑，我有两个疑问：

1.  是否可以根据名称从调度程序获取触发器 A？

2.  一次又一次地使用 scheduleJob() 函数注册多个具有相同触发器的作业是正确的方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T10:50:16.360

不，一个工作可以有许多与之相关的触发器，但一个触发器只能与一个工作相关。尽管如果您使用作业/触发器侦听器并安排触发器在一个触发器触发时立即触发其他作业，您可以获得一些您想要的效果。

您可以设置多个相同的触发器，每个作业一个。

# embedded-linux - qemu：未捕获的目标信号 11（分段错误）

> ID：15086238
> 
> 赞同：9
> 
> 时间：2013-02-26T10:06:00.900
> 
> 标签：embedded-linux, qemu, scratchbox

在暂存框中，我正在执行 git clone，出现以下错误：

```
qemu: uncaught target signal 11 (Segmentation fault) - core dumped 
```

错误：

```
/pi$ sb2 -t rfs-raspbian -eR git clone git://github.com/danwinship/glib.git
Cloning into 'glib'...
remote: Counting objects: 72484, done.
remote: Compressing objects: 100% (11555/11555), done.
remote: Total 72484 (delta 61357), reused 71916 (delta 60808)
Receiving objects: 100% (72484/72484), 28.86 MiB | 59 KiB/s, done.
qemu: uncaught target signal 11 (Segmentation fault) - core dumped
error: index-pack died of signal 11
fatal: index-pack failed 
```

已安装 QEmu 版本：

```
qemu-arm -version  
qemu-arm version 1.3.90, Copyright (c) 2003-2008 Fabrice Bellard

qemu-system-arm -version
QEMU emulator version 1.3.90, Copyright (c) 2003-2008 Fabrice Bellard 
```

任何建议如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-06T10:20:08.553

我在 qemu-static-aarch64 chroot 中运行 git 时遇到了同样的错误。我已经通过在不使用**线程**的情况下编译 git 解决了这个问题。

# vba - Outlook 2010 VBA - 当我点击邮件时将发件人添加到联系人

> ID：15086244
> 
> 赞同：0
> 
> 时间：2013-02-26T10:06:09.257
> 
> 标签：vba, ms-office, outlook-2010

有点问题，希望有人能帮帮我。

（展望 2010 VBA）

这是我当前的代码，我需要的是当我单击邮件时（仅单击我单击的邮件，而不是文件夹/同一位置中的每封邮件），它必须检查邮件的发件人是否已经在我的联系人中或在地址簿“所有用户”中，如果还不是其中之一，打开 AddContact 窗口并填写他/她的信息

还不行的是：

*   最重要的是，当我点击邮件时它不会运行脚本
*   当前检查联系人是否已经存在不起作用并使用vbMsgBox（是或否和响应的东西），如果联系人已经存在，那么这不是我想要/需要的，那么什么都没有发生。

我希望我提供了足够的信息，有人可以在这里帮助我:)

```
Sub AddAddressesToContacts(objMail As Outlook.MailItem)
Dim folContacts As Outlook.MAPIFolder
Dim colItems As Outlook.Items
Dim oContact As Outlook.ContactItem
Dim oMail As Outlook.MailItem
Dim obj As Object
Dim oNS As Outlook.NameSpace

''don't want or need a vbBox/ask box, this is a part of the current contactcheck
''wich doesn't work and is totaly wrong :P
Dim response As VbMsgBoxResult

Dim bContinue As Boolean
Dim sSenderName As String

On Error Resume Next

Set oNS = Application.GetNamespace("MAPI")
Set folContacts = oNS.GetDefaultFolder(olFolderContacts)
Set colItems = folContacts.Items

''this selects the mail that is currently selected.
''what i want is that the sender of the new incoming mail gets added to contacts
''(ofcourse, if that contact doesn't exsist yet)
''so the new incoming mail gotta be selected.
For Each obj In Application.ActiveExplorer.Selection

If obj.Class = olMail Then
Set oContact = Nothing

bContinue = True
sSenderName = ""

Set oMail = obj

sSenderName = oMail.SentOnBehalfOfName
If sSenderName = ";" Then
sSenderName = oMail.SenderName
End If

Set oContact = colItems.Find("[FullName] = '" & sSenderName & "'")

''this part till the --- is wrong, i need someting to check if the contact (the sender)
''already exsists. Any ideas?
If Not (oContact Is Nothing) Then
    response = vbAbort
If response = vbAbort Then
    bContinue = False
End If
End If
''---------

If bContinue Then
Set oContact = colItems.Add(olContactItem)
With oContact

.Email1Address = oMail.SenderEmailAddress
.Email1DisplayName = sSenderName
.Email1AddressType = oMail.SenderEmailType
.FullName = oMail.SenderName

'.Save

oContact.Display

End With
End If
End If
Next

Set folContacts = Nothing
Set colItems = Nothing
Set oContact = Nothing
Set oMail = Nothing
Set obj = Nothing
Set oNS = Nothing
End Sub 
```

嘿，我还有最后一个问题，

```
'sets the name of the contact
    Set oContact = colItems.Find("[FullName] = '" & sSenderName & "'")

    'checks if the contact exsist, if it does exit the for loop
     If Not oContact Is Nothing Then
        Exit For
     End If
End If 
```

这会检查姓名是否已经在联系人中，我需要它检查电子邮件地址是否在联系人中，你能帮我吗？

我有这样的想法

```
set oSendermail = ?the e-mailaddress?

         If Not oSendermail Is Nothing Then
            Exit For
         End If
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:32:47.563

解决方案（包括测试例程）可能如下所示：（假设我们只考虑外部 SMTP 邮件。调整您的联系人文件夹的路径并添加更多错误检查！）

```
Option Explicit

Private Declare Function GetTickCount Lib "kernel32.dll" () As Long

Sub AutoContactMessageRule(newMail As Outlook.mailItem)
    '  "script" routine to be called for each incoming Mail message
    '  This subroutine has to be linked to this mail type using 
    '  Outlook's rule assistant
    Dim EntryID As String
    Dim StoreID As Variant
    Dim mi As Outlook.mailItem
    Dim contactFolder As Outlook.Folder
    Dim contact As Outlook.ContactItem

    On Error GoTo ErrorHandler

    '  we have to access the new mail via an application reference
    '  to avoid security warnings
    EntryID = newMail.EntryID
    StoreID = newMail.Parent.StoreID

    Set mi = Application.Session.GetItemFromID(EntryID, StoreID)

    With mi
        If .SenderEmailType = "SMTP" Then
            Set contactFolder = FindFolder("Kemper\_local\TestContacts")

            Set contact = contactFolder.items.Find("[Email1Address]=" & Chr(34) & .SenderEmailAddress & Chr(34))
            If Not TypeName(contact) <> "Nothing" Then
                Set contact = contactFolder.items.Add(olContactItem)
                contact.Email1Address = .SenderEmailAddress
                contact.Email1AddressType = .SenderEmailType
                contact.FullName = .SenderName
                contact.Save
            End If
        End If
    End With

    Exit Sub

ErrorHandler:
    MsgBox Err.Description, vbCritical, "Ooops!"
    Err.Clear
    On Error GoTo 0
End Sub

Private Function FindFolder(path As String) As Outlook.Folder
'  Locate MAPI Folder.
'  Separate sub-folder using '/' . Example: "My/2012/Letters"
    Dim fd As Outlook.Folder
    Dim subPath() As String
    Dim I As Integer
    Dim ns As NameSpace
    Dim s As String

    On Error GoTo ErrorHandler

    s = Replace(path, "\", "/")

    If InStr(s, "//") = 1 Then
        s = Mid(s, 3)
    End If

    subPath = Split(s, "/", -1, 1)
    Set ns = Application.GetNamespace("MAPI")

    For I = 0 To UBound(subPath)
      If I = 0 Then
        Set fd = ns.Folders(subPath(0))
      Else
        Set fd = fd.Folders(subPath(I))
      End If
      If fd Is Nothing Then
        Exit For
      End If
    Next

    Set FindFolder = fd
    Exit Function

ErrorHandler:
    Set FindFolder = Nothing
End Function

Public Sub TestAutoContactMessageRule()
    '  Routine to test Mail Handlers AutoContactMessageRule()'
    '  without incoming mail messages
    '  select an existing mail before executing this routine
    Dim objItem As Object
    Dim objMail As Outlook.mailItem
    Dim started As Long

    For Each objItem In Application.ActiveExplorer.Selection
        If TypeName(objItem) = "MailItem" Then
            Set objMail = objItem

            started = GetTickCount()
            AutoContactMessageRule objMail

            Debug.Print "elapsed " & (GetTickCount() - started) / 1000# & "s"
        End If
    Next
End Sub 
```

# ruby-on-rails - Mongoid 类定义错误？

> ID：15086250
> 
> 赞同：0
> 
> 时间：2013-02-26T10:06:25.720
> 
> 标签：ruby-on-rails, mongoid

我有一个名为 location 的 mongo 文档：

```
class Location < MongoDocument                      
  field :latitude, type: Float             
  field :longitude, type: Float            
end 
```

MongoDocument 是这样的：

```
class MongoDocument
  include Mongoid::Document
  include Mongoid::Timestamps
end 
```

在另一个 mongo 文档中，我有一个方法：

```
def self.local(location, limit_results)
    if location.present? && location.latitude.present?
    #run some code
    end
end 
```

在调试中，我可以检查位置，它会识别对象并将显示其内容的哈希值：

```
{Location}#<Location:0x6fa5798>
@_id = {BSON::ObjectId}512b2330b109ab17fc00002c
@latitude = nil
@longitude = nil 
```

如果我尝试在这个对象上使用任何选择器（getter/setter），它会返回： `undefined method '[]' for nil:NilClass`

我努力了：

```
location[:id]
location['id']
location.id
location[:latitude]
location['latitude']
location.latitude
location[:longitude]
location['longitude']
location.longitude 
```

有什么线索吗？我正在将我的代码从 mongomapper 迁移到 mongoid 中，对此我感到很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:39:32.047

我还忘了提到传入的位置来自“新”而不是“创建”。将其交换为创建解决了我的问题。

# jquery - jQuery 函数调用不起作用 - 新手 Q

> ID：15086251
> 
> 赞同：0
> 
> 时间：2013-02-26T10:06:29.490
> 
> 标签：jquery, html

这个想法是创建一个由高度或宽度是否更大定义的方形缩略图。它根本没有做任何事情。有人可以指出我正确的方向吗？

谢谢

担

```
function  galDisplay(){
   var galSingleImgH(this).height();
   var galSingleImgW(this).width();
   var galSingleImgWSum(this).width()/2;
   var galSingleImgHSum(this).height()/2;

   if(galSingleImgW > galSingleImgH){
       jQuery(this).attr('style','height:63px;width:auto;margin-left:50%;left:-'+ galSingleImgWSum +'px;');
   } else {
       jQuery(this).attr('style','height:auto;width:63px;margin-top:50%;top:-'+ galSingleImgHSum +'px;');
   }
}

jQuery('.rhsGallery .notFirst a img').galDisplay(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:10:09.533

`galDisplay`是全局的，不是 jQuery 对象的方法。请参阅[插件创作的 jQuery 文档](http://docs.jquery.com/Plugins/Authoring)。

好像变了

```
function  galDisplay(){ 
```

到

```
jQuery.fn.galDisplay = function (){ 
```

应该做的工作。

您还需要修复语法错误。

```
var galSingleImgH(this).height(); 
```

应该

```
var galSingleImgH = this.height(); 
```

… 等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:10:50.547

我想你忘记`=`了上面 4 行的一些 s ：（哦，还有错误的调用方式`galDisplay()`）

```
function  galDisplay(){
       var galSingleImgH = (this).height();
       var galSingleImgW = (this).width();
       var galSingleImgWSum = (this).width()/2;
       var galSingleImgHSum = (this).height()/2;

       if(galSingleImgW > galSingleImgH){
           jQuery(this).attr('style','height:63px;width:auto;margin-left:50%;left:-'+ galSingleImgWSum +'px;');
       } else {
           jQuery(this).attr('style','height:auto;width:63px;margin-top:50%;top:-'+ galSingleImgHSum +'px;');
       }
   }

   galDisplay(jQuery('.rhsGallery .notFirst a img')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:11:10.907

您的变量定义错误，请改用：

```
var galSingleImgH = jQuery(this).height();
var galSingleImgW = jQuery(this).width();
var galSingleImgWSum = jQuery(this).width()/2;
var galSingleImgHSum = jQuery(this).height()/2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:10:10.893

首先，您的代码是错误的：

```
var galSingleImgH(this).height();
           var galSingleImgW(this).width();
           var galSingleImgWSum(this).width()/2;
           var galSingleImgHSum(this).height()/2; 
```

这永远行不通。我建议您使用开发人员工具在浏览器中查看此错误。

它应该是：

```
var galSingleImgH = (this).height();
           var galSingleImgW = (this).width();
           var galSingleImgWSu = (this).width()/2;
           var galSingleImgHSum = (this).height()/2; 
```

其次，如果这不能纠正问题，您可以在问题中包含您的 rhsGallery HTML 吗？

# ios - iOS：动画子视图而不调用 layoutSubviews

> ID：15086257
> 
> 赞同：2
> 
> 时间：2013-02-26T10:06:44.983
> 
> 标签：ios, objective-c, uiview, core-animation, uiviewanimation

在 layoutSubviews 中，我将我的子视图布局到适当的位置，并为其中一些应用一些转换。现在我想在这个子视图上制作可重复的比例动画以引起注意。但是，当我使用 [UIView animate....] 启动动画时，会更改变换属性 - 触发 layoutSubviews 方法，该方法与动画冲突（它会覆盖变换并且未播放动画）。

有没有什么好的方法（没有布尔标志）来处理这种行为？

例子：

```
- (void)layoutSubviews {
    [super layoutSubviews];
    myChildView.transform = CGAffineTransformMake....;
}

- (void)animate {
    CGAffineTransform originalTransform = myChildView.transform;
    [UIView animateWithDuration:0.1f
                          delay:0.0f
                        options:UIViewAnimationOptionAutoreverse
                     animations:^{
                         [UIView setAnimationRepeatCount:4];
                         //next line of code produce calling layoutSubviews
                         myChildView.transform = CGAffineTransformMakeScale(1.15f, 1.15f);
                     } completion:^(BOOL finished){
                         myChildView.transform = originalTransform; 
                         //after this also called layoutSubviews
                     }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-27T15:13:08.473

最近，我遇到了这个问题。我重写了`viewDidLayoutSubviews`视图控制器内部的方法来控制动画。

```
- (void)viewDidLayoutSubviews {
     // This method will be called after subview's layoutSubviews.
     if (self.shouldAnimated) {
        // Do animation at here.
     }
} 
```

然而，这只是一个肮脏的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:32:23.353

我建议你最好不要使用 layoutSubviews。而是在 init 方法或从 init 调用的自定义方法中创建、定位和转换您的子视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-26T07:14:57.307

我也遇到这个问题。我添加另一个视图（称为 subView）作为子视图，并将 myChildView 添加到 subView。当我更改 myChildView 的变换时，这不会触发 superview 的 layoutSubviews。为什么，你可以[在 superview 中看到这个 UIView/CALayer: Transform triggers layoutSubviews](https://stackoverflow.com/questions/24632876/uiview-calayer-transform-triggers-layoutsubviews-in-superview)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T11:38:47.103

> 有没有什么好的方法（没有布尔标志）来处理这种行为？

是的。摆脱“layoutSubviews”方法并在另一种方法中为子视图设置变换。

```
[self.parentView setUpChildrenViews];
...
[self.parentView animate]; 
```

# excel - Vba excel公式计算？

> ID：15086263
> 
> 赞同：3
> 
> 时间：2013-02-26T10:07:09.023
> 
> 标签：excel, vba

![在此处输入图像描述](../Images/6d7c745b92fb6b5a17fbe87c08c68495.png)

* * *

大家好，我是vba的新手，请帮助我。我有一张如图所示的桌子。天数列是一个公式列。公式很简单，就是**Actual Date**和**Date**的区别。但是**实际日期**出现在另一个工作表 (Sheet2) 的 Range("D5") 处。如何以编程方式分配此公式。我试过了`Worksheets("Sheet1").Range("E2:E10").FormulaR1C1 = "=" & Worksheets("Sheet2").Range("D5").Value & "-Sheet1!RC[-1]"`，`Worksheets("Sheet1").Range("I6:I10").FormulaR1C1 = "=Sheet2!R[5]C[4]Sheet1!RC[-1]"`不幸的是，两者都给出了错误的值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:14:33.117

您可以使用[DATEDIF](http://www.cpearson.com/excel/datedif.aspx)函数来计算两个日期之间的差异：

```
=DATEDIF(Sheet2!D5,Sheet1!E2,"D") 
```

您必须为该列复制和修改此公式，因为这应该适用于第一个单元格。

**更新：**

使用 VBA，您可以使用以下内容，它应该适用于您的上述数据集：

```
Worksheets("Sheet1").Range("E2:E10").FormulaR1C1 = "=DATEDIF(""" & Worksheets("Sheet2").Range("D5") & """,Sheet1!RC[-1],""D"")" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:18:41.247

如果公式来自另一张表，您仍然可以引用当前表中的数据。

**使用 R1C1 和公式：**

Range("E2").FormulaR1C1 = "=Today() - R[0]C[-1]"

**仅将数字添加到电子表格中：**

Range("E2").Value = DateDiff("d", Range("D2"), Now())

更新：

对于多个值：

```
Worksheets("Sheet1").Range("E2:E10").FormulaR1C1 = "=Today() - R[0]C[-1]" 
```

# single-sign-on - Worklight LTPA SSO

> ID：15086271
> 
> 赞同：0
> 
> 时间：2013-02-26T10:07:28.943
> 
> 标签：single-sign-on, ibm-mobilefirst, ltpa

我正在创建一个 SSO 应用程序，我已经在 WebSphere Application 服务器上设置了所有设置，它工作正常并生成一个令牌现在我的问题是我是否想在托管在同一服务器中的另一个应用程序中使用相同的 LTPA 令牌，我可以吗这个 ？如果是的话，你能给我任何提示（或示例代码）如何传递令牌吗？我什么时候在第二个应用程序中访问安全内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:59:19.153

出于安全原因，应用程序之间不会共享 cookie。为了使这个问题更加棘手，如果 WAS 正在保护 LTPA 后面的工作灯，您将很难使用设备供应（如果没有 LTPA 令牌就无法访问 Worklight Server，您将无法使用它进行供应）。

您可以尝试的一件事是使用本机存储机制，您可以在其中写入两个应用程序都可以访问的设备存储。您可能必须为此编写自己的 cordova 插件，但如果可能的话，请先检查开源世界。然后，您的应用程序会读取包含您的 LTPA 令牌的文件。如果存在，您将在应用程序连接到 Worklight 服务器之前设置 cookie。如果令牌过期，你会没事的，因为服务器会要求你登录。登录后，您应该将令牌存储在该文件中以备后用。

可能有比我刚才建议的更简单的方法（并且可以变得更安全），但这是目前想到的解决方案。

# bash - bash脚本-sqlite如何插入带空格的变量

> ID：15086272
> 
> 赞同：0
> 
> 时间：2013-02-26T10:07:30.197
> 
> 标签：bash, sqlite, whitespace

如何将有空间的变量插入sqlite？

我有这条线：

```
sqlite3 testsql.sqlite "INSERT INTO NormalTable (value1,value2) VALUES ('new word','ny ord')"; 
```

我只插入了“new”和“ny”。

编辑1：

我用它来打印值，但我只得到新的-> ny：

# 获取我的数据

```
LIST=`sqlite3 testsql.sqlite "SELECT * FROM NormalTable WHERE 1"`;

#For each row
for ROW in $LIST; do
    ID=`echo $ROW | awk '{split($0,a,"|"); print a[1]}'`
    Name=`echo $ROW | awk '{split($0,a,"|"); print a[2]}'`
    Value=`echo $ROW | awk '{split($0,a,"|"); print a[3]}'`
    #Printing my data
    echo -e "\e[4m$Id\e[m) "$Name" -> " $Value;
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:18:27.253

很遗憾，

```
LIST=`sqlite3 testsql.sqlite "SELECT * FROM NormalTable WHERE 1"`;
for ROW in $LIST; do
...
done 
```

默认情况下捕获输出并在任何空白处分割，而不是仅在换行处。您可以通过修改 shell 变量来实现您想要的`IFS`，但这可能会很麻烦。

您可以改用`while read`循环

```
sqlite3 testsql.sqlite "SELECT * FROM NormalTable WHERE 1" | while read ROW; do
...
done 
```

这将在换行符边界处读取并按预期工作。

# scala - 如何判断一个 XML 节点下面是否只有一个文本节点？

> ID：15086273
> 
> 赞同：2
> 
> 时间：2013-02-26T10:07:35.830
> 
> 标签：scala

我正在研究一个函数，如果文本节点是元素的唯一子节点，则目标是返回文本节点的文本。例如：

`<root>1</root> => 1`

`<root><node>1</node></root> => null`

显然 Scala 不区分只有文本的节点和带有元素的节点。

那么如何判断一个元素（或一般来说，一个节点）下面是否只有一个文本节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:33:37.490

`Text`和`Elem`都是 XML 节点，因此可以通过 来识别节点的类型，`isInstanceOf`例如：

```
import scala.xml.{Text, Node}
def hasOnlyTextChild(node:Node) = node.child.size == 1 && node.child(0).isInstanceOf[Text] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:07:32.630

您可以使用模式匹配的强大功能：

```
import xml.{Text, Elem, Node}

def extractText(n: Node): String = n match {
    case Elem(_, _, _, _, Seq(Text(t))) => t
    case _ => null
}

println(extractText(<root>1</root>))
println(extractText(<root><node>1</node></root>)) 
```

但更多的scala方式是返回`Option[String]`而不是`String/null`：

```
def extractText(n: Node): Option[String] = n match {
    case Elem(_, _, _, _, Seq(Text(t))) => Some(t)
    case _ => None
} 
```

# iphone - UITabBarItem 图像颜色为灰色，而原始图像为白色

> ID：15086276
> 
> 赞同：13
> 
> 时间：2013-02-26T10:07:42.610
> 
> 标签：iphone, ios, objective-c, ipad

我使用以下代码为我创建图像`UITabBarItem`

```
self.tabBarItem.image = [UIImage imageNamed:@"tab_img.png"]; 
```

此 tab_img.png 由黑色、白色和透明色组成。但是在应用程序中，黑白图像的所有部分都变成了灰色。我怎样才能把这个灰色变成白色？

![这是我使用的图像](../Images/1b4942c9c7d87dab4dd29be6dcbcfe2a.png)

![在此处输入图像描述](../Images/1fcbcfb2870676872c2620dc55e914b3.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-04-08T12:34:23.317

在 iOS7 中，如果你使用 IB，你可以继承 UITabBarController 然后添加：

```
+ (void)initialize
{
    //the color for the text for unselected tabs
    [UITabBarItem.appearance setTitleTextAttributes:@{NSForegroundColorAttributeName : [UIColor redColor]} forState:UIControlStateNormal];

    //the color for selected icon
    [[UITabBar appearance] setSelectedImageTintColor:[UIColor whiteColor]];    
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 7) {
        for (UITabBarItem *tbi in self.tabBar.items) {
            tbi.image = [tbi.image imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
        }
    }
} 
```

如果您手动创建项目，则必须在每个图标上设置 UIImageRenderingModeAlwaysOriginal 并从初始化添加代码。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-09-01T09:30:48.557

如果您使用图像资产，只需将图像（选定和未选定图像）的“渲染为”字段设置为“原始图像”（[示例](https://i.stack.imgur.com/rbxDW.png)）

然后在您的选项卡栏项目上的 xib 设置“图像”和“选定图像”字段（[示例](https://i.stack.imgur.com/vLR7I.png)）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-26T10:54:41.823

设置选中和未选中的图像。

```
[self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"mehr_icon"] withFinishedUnselectedImage:[UIImage imageNamed:@"mehr_icon"]]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T10:14:46.877

UITabBarItems 的图像只能是 alpha 通道！但是，不透明部分将仅显示为灰色（如果选中则为蓝色）！

看看：[http ://devinsheaven.com/creating-uitabbar-uitoolbar-icons-in-adobe-illustrator/](http://devinsheaven.com/creating-uitabbar-uitoolbar-icons-in-adobe-illustrator/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T07:33:51.330

Only Way is to go to IB(interface builder) and select the UITabBarItem in your View Controller and go to "file inspector" scroll down and you will see Global Tint her you can set it to no color or any color that you want it will take effect for the selected image.

as per the following code is concern

```
setFinishedSelectedImage: withFinishedUnselectedImage:; 
```

this is no longer available in iOS 7 rather we can use

```
[yourCustomTabBarItem setSelectedImage:---]; 
```

but this will also take effect of this Global tint color.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T10:19:43.963

我曾经遇到过同样的问题，我只使用带有白色和 alpha 的图像，就像这张[图片一样](http://www.file-upload.net/download-7257444/Haus_weiss.png.html)

我用`self.tabBarItem.image = [UIImage imageNamed:@"Liste"];`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-13T19:18:11.337

对我来说最好的方法是改变图像颜色。

```
 func imageWithColor(_ color: UIColor) -> UIImage? {
        UIGraphicsBeginImageContextWithOptions(size, false, scale)
        let context = UIGraphicsGetCurrentContext()!
        context.translateBy(x: 0, y: size.height)
        context.scaleBy(x: 1.0, y: -1.0)
        context.setBlendMode(.normal)

        let rect = CGRect(x: 0, y: 0, width: size.width, height: size.height)
        context.clip(to: rect, mask: cgImage!)

        color.setFill()
        context.fill(rect)

        let newImage = UIGraphicsGetImageFromCurrentImageContext()!
        UIGraphicsEndImageContext()
        newImage.accessibilityIdentifier = accessibilityIdentifier
        return newImage
    } 
```

然后，您可以更新 tabBarItem 的属性，例如 image 和 selectedImage：

```
 func setupColorAttributes(to item: UITabBarItem) {
        item.image = item.image?.imageWithColor(.white)?.withRenderingMode(.alwaysOriginal)
        item.selectedImage = item.image?.imageWithColor(.highLight)?.withRenderingMode(.alwaysOriginal)
    } 
```

# postgresql - Postgresql：在用户定义的类型中，发送函数用于什么？

> ID：15086277
> 
> 赞同：0
> 
> 时间：2013-02-26T10:07:45.347
> 
> 标签：postgresql

我在 Postgresql 中遇到了用于用户定义类型的 send_function 和 receive_function（请参阅[CREATE TYPE 上的手动条目](http://www.postgresql.org/docs/9.2/static/sql-createtype.html)）。它在那里说这两个函数都用于参与二进制输入/输出。我真的不明白这是什么意思？如何使用二进制输入和输出？当我通过 ODBC/JDBC 驱动程序访问数据库时是这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:49:53.063

二进制输入和输出支持二进制`COPY`，是的，PostgreSQL 有线协议中的二进制传输。

在许多情况下，二进制传输实际上比文本传输执行得更差。仅建议在非常选择的情况下使用。除非您有一个非常具体的问题要解决，否则您不需要二进制传输。

PgJDBC 支持二进制 PostgreSQL 协议。我不知道 ODBC 驱动程序是否可以。无论如何，您通常不应该使用它。

# python - scipy错误，但没有引发异常

> ID：15086282
> 
> 赞同：3
> 
> 时间：2013-02-26T10:08:15.463
> 
> 标签：python, exception, scipy, interpolation

我遇到了一个常见的 scipy.interpolate 错误：

```
>>> sx = interpolate.UnivariateSpline(T,X)
  File "...scipy/interpolate/fitpack2.py", line 143, in __init__
    xb=bbox[0],xe=bbox[1],s=s)
dfitpack.error: (m>k) failed for hidden m: fpcurf0:m=3 
```

此错误是否附加了一些 Python 异常？（我只想拦截异常并忽略它）

如果没有，我该怎么做才能继续运行我的程序？谢谢

## 几个小时后我回来了，给出一个解决方案：

这段代码，用于捕获异常并引发我自己的异常。：

```
try : 
   sx = interpolate.UnivariateSpline(X,Y)
except : 
   raise PyGlideSplineError("%s : impossible de calculer la spline"%whoami()) 
```

有用 ！！！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T10:36:11.487

`scipy.interpolate.dfitpack`是一个似乎没有将异常类型直接暴露给 Python 的扩展。但是，您可能会故意引发错误以将异常从其隐藏位置吓跑，捕获它并将其类型存储在变量中：

```
from scipy.interpolate import dfitpack

try:
    dfitpack.sproot(-1, -1, -1)
except Exception, e:
    dfitpack_error = type(e)

try:
    dfitpack.sproot(-1, -1, -1)
except dfitpack_error:
    print "Got it!" 
```

# asp.net - 处理列表视图中的用户控件事件

> ID：15086283
> 
> 赞同：1
> 
> 时间：2013-02-26T10:08:18.250
> 
> 标签：asp.net, vb.net, user-controls, event-handling

我有一个简单的用户控件，它会在单击按钮时引发事件

```
Public Class UcPaymentCheque
    Inherits System.Web.UI.UserControl

    Public Event OnCancelClick()

    Private Sub btnCancelPayment_Click(sender As Object, e As System.EventArgs) Handles btnCancelPayment.Click
        RaiseEvent OnCancelClick()
    End Sub
End Class 
```

此用户控件在列表视图中使用

```
<asp:ListView ID="lvwNonTpProducts" runat="server" ItemPlaceholderID="ItemPlaceholder">
    <LayoutTemplate>
        <asp:PlaceHolder ID="ItemPlaceholder" runat="server" />
    </LayoutTemplate>
    <ItemTemplate>
        <TPCustomControl:UcPaymentCheque ID="UcTPPaymentCheque" runat="server" Visible="false" />
    </ItemTemplate>
</asp:ListView> 
```

这是页面加载时的数据绑定

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Page.IsPostBack Then

    Else
        BuildPage()
    End If
End Sub 
```

在什么时候应该添加处理程序？我已经像这样摆弄了 ondatabound 事件；

```
Private Sub lvwNonTpProducts_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.ListViewItemEventArgs) Handles lvwNonTpProducts.ItemDataBound
    Dim UcTPPaymentCheque = DirectCast(e.Item.FindControl("UcTPPaymentCheque"), UcPaymentCheque)
    AddHandler UcTPPaymentCheque.OnCancelClick, AddressOf OnCancelClick
End Sub 
```

但这不起作用，我猜是数据绑定问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:17:01.673

你可以在这里查看我对类似问题的回答： [创建和监听事件](https://stackoverflow.com/questions/15096396/creating-and-listening-for-events/15097411#comment21242785_15097411)

本质上，您希望用户控件引发自己的事件，如下所示：

```
Partial Class myControl
    Inherits System.Web.UI.UserControl
    Public Event MyEvent As EventHandler

    'your button click event
    Protected Sub bnt_click(ByVal sender As Object, ByVal e As EventArgs)
      'do stuff
      'now raise the event
       RaiseEvent MyEvent (Me, New EventArgs)
    end sub
end class 
```

在此示例中，我在用户单击用户控件中的按钮时引发事件。您可以轻松地在任何地方引发事件，例如当控件加载时，使用计时器等等。

然后，在主页面中，您希望为用户控件添加一个事件处理程序，如下所示：

```
<mc:myControlrunat="server" ID="myControl1" OnMyEvent="myControl_MyEvent"  /> 
```

现在，在后面的代码中，您可以添加事件，如下所示：

```
Protected Sub myControl_MyEvent(ByVal sender As Object, ByVal e As EventArgs)
 'do stuff 
end sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:22:54.743

您可以在列表视图中的用户控件的声明中添加处理程序，使用`OnCancelClick`，如下所示：

```
<asp:ListView ID="lvwNonTpProducts" runat="server" ItemPlaceholderID="ItemPlaceholder">
    <LayoutTemplate>
        <asp:PlaceHolder ID="ItemPlaceholder" runat="server" />
    </LayoutTemplate>
    <ItemTemplate>
        <TPCustomControl:UcPaymentCheque ID="UcTPPaymentCheque" runat="server" Visible="false" OnCancelClick="UcTPPaymentCheque_OnCancelClick" />
    </ItemTemplate>
</asp:ListView> 
```

`UcTPPaymentCheque_OnCancelClick`在包含列表视图的控件中，您应该用来处理事件的函数在哪里。

# android - 带有来自 REST 服务的项目的 ListView

> ID：15086284
> 
> 赞同：2
> 
> 时间：2013-02-26T10:08:24.670
> 
> 标签：android, rest, listview, listadapter

假设我想在 ListView 中显示项目。数据源是一个 REST API，假设`www.example.com/getItems?ps=10cp=1` ps = pagesize 和 cp = currentpage。答案给出 count = xy，总项目的数量。现在总项目的数量是，假设是 1000。

在 ListView 中加载和显示它们的最佳方式是什么？从 API 加载所有 1000 个项目，将它们扔到 ListAdapter 中？我看过一个 Google IO 演讲，他们说通过网络加载一大块数据比加载大量小块更好。

另一种可能性是将每个 ListItem 绑定到 API（有点像延迟加载图像），但这会为每个 ListItem 创建对 API 的调用，这似乎很愚蠢。

一个折衷方案是加载 100 个项目，然后在用户滚动到第 100 个项目时再加载 100 个，是否有一些示例实现可供查看？这就是“要走的路”吗？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:24:39.593

是的，我同意你的观点，这是要走的路。

你可以使用[无尽的适配器](https://github.com/commonsguy/cwac-endless)或[这个](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)。

为了平滑滚动，下一批的加载应该在滚动结束之前发生。

# linq-to-sql - LinqToSql：停止急切加载

> ID：15086285
> 
> 赞同：0
> 
> 时间：2013-02-26T10:08:26.133
> 
> 标签：linq-to-sql, lazy-loading, eager-loading

设置以下选项以急切加载客户的订单：

```
DataLoadOptions dlo = new DataLoadOptions();
dlo.LoadWith<Customer>(c => c.Orders);
db.LoadOptions = dlo; 
```

然后我将如何停止此操作并再次恢复为延迟加载订单？还是这些 LoadOptions 仅用于下一个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:16:17.813

这些加载操作仅适用于下一个查询。

如果您有第二个查询没有设置这些选项，那么它将执行延迟加载。

# validation - 在 Sonata Admin 中断言唯一验证

> ID：15086287
> 
> 赞同：4
> 
> 时间：2013-02-26T10:08:30.690
> 
> 标签：validation, symfony, unique, sonata-admin

我正在为一个项目使用 Symfony 2.1。我使用 SonataAdminBundle 进行管理。我想在我的管理类中向我的 slug 属性添加一个断言。我该怎么做？

在我的实体中，我已经设置了断言，但它似乎在这里不起作用:(

相关代码： 实体：

```
/*
 * @ORM\Table(name="default_doctor_specialty")
 * @UniqueEntity("uniqueSlugName")
 * @ORM\Entity
 */
class Test {
 //..
    /**
 * @var string
 * @Gedmo\Slug(fields={"name"},unique=false)
 * 
 * @ORM\Column(name="unique_slug_name", type="string", length=255, nullable=false , unique=true)
 */
private $uniqueSlugName;
} 
```

在管理类中：

```
class TestAdmin extends Admin {

protected $formOptions = array(
    'validation_groups' => 'Default'
);
 //...
  } 
```

为什么默认验证不起作用？？？

＆即使不能这样工作，我如何在管理类中设置唯一验证？？？

谢谢你的回答:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T09:21:46.253

最后我为我的实体定义了一个验证组：

```
use Symfony\Bridge\Doctrine\Validator\Constraints as DoctrineAssert;
/*
 * @ORM\Table(name="default_doctor_specialty")
* @DoctrineAssert\UniqueEntity(fields="uniqueSlugName", message="A Speciality with same slug already exists", groups={"test"})
* @ORM\Entity
*/
class Test {
//..
/**
* @var string
* @Gedmo\Slug(fields={"name"},unique=false)
* 
* @ORM\Column(name="unique_slug_name", type="string", length=255, nullable=false , unique=true)
*/
private $uniqueSlugName;
} 
```

* * *

在管理类中，我使用了测试验证组而不是默认组！

感谢`AHWEBDEV`在 github 上！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-05T16:16:33.543

从这个[链接](https://symfony.com/doc/3.4/reference/constraints/UniqueEntity.html)

这是完整的例子，它取决于你的 symfony 和奏鸣曲版本。

```
// src/AppBundle/Entity/Service.php
namespace AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;

/**
 * @ORM\Entity
 * @UniqueEntity(
 *     fields={"host", "port"},
 *     errorPath="port",
 *     message="This port is already in use on that host."
 * )
 */
class Service
{
    /**
     * @ORM\ManyToOne(targetEntity="Host")
     */
    public $host;

    /**
     * @ORM\Column(type="integer")
     */
    public $port;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-26T06:53:01.647

我不想用数百行这样的低级细节（如验证）来搞乱我的实体。可以在 Admin 类中定义验证规则。通常，管理员的验证规则与客户端的验证规则不同。

```
final class TestAdmin
{
    // … skipped for brevity

    public function validate(ErrorElement $errorElement, $object)
    {
        $errorElement->addConstraint(new UniqueEntity(['fields' => ['slug']]));
    }
} 
```

# php - 过滤一个解析成 php 数组的 Xml

> ID：15086289
> 
> 赞同：0
> 
> 时间：2013-02-26T10:08:35.120
> 
> 标签：php, xml

这是我的问题，我有一个由 rss 通量生成的 Xml 文件。

我把它做成了一个php数组来轻松获取数据。

关键是用标签名称过滤数组，实际上是一个引擎研究。

这是我目前的代码：

```
<?php
function xml2array($contents, $get_attributes=1, $priority = 'tag') { 
if(!$contents) return array(); 

if(!function_exists('xml_parser_create')) { 
    //print "'xml_parser_create()' function not found!"; 
    return array(); 
} 

//Get the XML parser of PHP - PHP must have this module for the parser to work 
$parser = xml_parser_create(''); 
xml_parser_set_option($parser, XML_OPTION_TARGET_ENCODING, "UTF-8"); 
xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0); 
xml_parser_set_option($parser, XML_OPTION_SKIP_WHITE, 1); 
xml_parse_into_struct($parser, trim($contents), $xml_values); 
xml_parser_free($parser); 

if(!$xml_values) return;//Hmm... 

//Initializations 
$xml_array = array(); 
$parents = array(); 
$opened_tags = array(); 
$arr = array(); 

$current = &$xml_array; //Reference 

//Go through the tags. 
$repeated_tag_index = array();//Multiple tags with same name will be turned into an array 
foreach($xml_values as $data) { 
    if($data != $mot) {     
        unset($attributes,$value);//Remove existing values, or there will be trouble 

    //This command will extract these variables into the foreach scope 
    // tag(string), type(string), level(int), attributes(array). 
        extract($data);//We could use the array by itself, but this cooler. 

        $result = array(); 
        $attributes_data = array(); 

        if(isset($value)) { 
            if($priority == 'tag') $result = $value; 
            else $result['value'] = $value; //Put the value in a assoc array if we are in the 'Attribute' mode
            }
    } 

    //Set the attributes too. 
    if(isset($attributes) and $get_attributes) { 
        foreach($attributes as $attr => $val) { 
            if($priority == 'tag') $attributes_data[$attr] = $val; 
            else $result['attr'][$attr] = $val; //Set all the attributes in a array called 'attr' 
        } 
    } 

    //See tag status and do the needed. 
    if($type == "open") {//The starting of the tag '<tag>' 
        $parent[$level-1] = &$current; 
        if(!is_array($current) or (!in_array($tag, array_keys($current)))) { //Insert New tag 
            $current[$tag] = $result; 
            if($attributes_data) $current[$tag. '_attr'] = $attributes_data; 
            $repeated_tag_index[$tag.'_'.$level] = 1; 

            $current = &$current[$tag]; 

        } else { //There was another element with the same tag name 

            if(isset($current[$tag][0])) {//If there is a 0th element it is already an array 
                $current[$tag][$repeated_tag_index[$tag.'_'.$level]] = $result; 
                $repeated_tag_index[$tag.'_'.$level]++; 
            } else {//This section will make the value an array if multiple tags with the same name appear together
                $current[$tag] = array($current[$tag],$result);//This will combine the existing item and the new item together to make an array
                $repeated_tag_index[$tag.'_'.$level] = 2; 

                if(isset($current[$tag.'_attr'])) { //The attribute of the last(0th) tag must be moved as well
                    $current[$tag]['0_attr'] = $current[$tag.'_attr']; 
                    unset($current[$tag.'_attr']); 
                } 

            } 
            $last_item_index = $repeated_tag_index[$tag.'_'.$level]-1; 
            $current = &$current[$tag][$last_item_index]; 
        } 

    } elseif($type == "complete") { //Tags that ends in 1 line '<tag />' 
        //See if the key is already taken. 
        if(!isset($current[$tag])) { //New Key 
            $current[$tag] = $result; 
            $repeated_tag_index[$tag.'_'.$level] = 1; 
            if($priority == 'tag' and $attributes_data) $current[$tag. '_attr'] = $attributes_data; 

        } else { //If taken, put all things inside a list(array) 
            if(isset($current[$tag][0]) and is_array($current[$tag])) {//If it is already an array... 

                // ...push the new element into that array. 
                $current[$tag][$repeated_tag_index[$tag.'_'.$level]] = $result; 

                if($priority == 'tag' and $get_attributes and $attributes_data) { 
                    $current[$tag][$repeated_tag_index[$tag.'_'.$level] . '_attr'] = $attributes_data; 
                } 
                $repeated_tag_index[$tag.'_'.$level]++; 

            } else { //If it is not an array... 
                $current[$tag] = array($current[$tag],$result); //...Make it an array using using the existing value and the new value
                $repeated_tag_index[$tag.'_'.$level] = 1; 
                if($priority == 'tag' and $get_attributes) { 
                    if(isset($current[$tag.'_attr'])) { //The attribute of the last(0th) tag must be moved as well

                        $current[$tag]['0_attr'] = $current[$tag.'_attr']; 
                        unset($current[$tag.'_attr']); 
                    } 

                    if($attributes_data) { 
                        $current[$tag][$repeated_tag_index[$tag.'_'.$level] . '_attr'] = $attributes_data; 
                    } 
                } 
                $repeated_tag_index[$tag.'_'.$level]++; //0 and 1 index is already taken 
            } 
        } 

    } elseif($type == 'close') { //End of tag '</tag>' 
        $current = &$parent[$level-1]; 
    } 
} 

return($xml_array); 
}  
$contents = file_get_contents('magasin.xml');//Or however you what it
$result = xml2array($contents,0);
print_r($result);
?> 
```

因此，我想通过一个标签（例如：鸢尾花）对其进行过滤，该标签显示其中包含此单词的每个结果。谁能帮我 ？

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:32:00.253

事实上，我使用了一个更好的主意，一个 curl on theflux 和一个新的 simplexmlelement :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:40:59.197

为什么不尝试使用 XPath 和 SimpleXML。

您可以更轻松地搜索节点：

[http://www.dimuthu.org/blog/2008/09/30/xpath-in-simplexml/](http://www.dimuthu.org/blog/2008/09/30/xpath-in-simplexml/)

# django - 在 base.html 中包含 Django 登录表单

> ID：15086292
> 
> 赞同：2
> 
> 时间：2013-02-26T10:08:40.097
> 
> 标签：django, authentication, django-forms

我是 Django 新手，我想在基本 html 中包含我的登录表单。

我有以下内容：

“注册/login.html”

```
{% if form.has_errors %}
    <p>Your username and password didn't match.
        Please try again.</p>
{% endif %}
<form method="post" action=".">
    {% csrf_token %}
    <p><label>Username:</label>
        {{ form.username }}</p>
    <p><label>Password:</label>
        {{ form.password }}</p>
    <input type="submit" value="login" />
    <input type="hidden" name="next" value="/" />
</form> 
```

网址.py

```
url(r'^login/$', 'django.contrib.auth.views.login'), 
```

我在 base.html 中包含以下内容：

```
{% include "registration/login.html" %} 
```

它呈现除了用户名和密码的文本框之外的所有内容。我想我错过了一些东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T10:42:20.943

好的，我认为问题在于您期待“魔术”。

Django 的视图是模板非常愚蠢。它们只有以两种方式之一传递的可用变量：

1.  通过 context_processor（见 Aidan 的回答）
2.  调用render（或render_to_response）时传入

表单在您访问时呈现的原因`/login`，但在其他情况下，是因为您正在使用的 Django 视图为您`django.contrib.auth.views.login`将 Django AuthenticationForm 传递到您的模板中。

在此处查看源代码： [https ://github.com/django/django/blob/master/django/contrib/auth/views.py](https://github.com/django/django/blob/master/django/contrib/auth/views.py)

没有其他视图“神奇地”获得该变量集。

所以你必须：

1.  在整个应用程序的每个视图中自行设置
2.  使用上下文处理器。

这是一个`context_processors.py`使用 Django 东西的简单方法（基于 Aidan 的）：

```
def include_login_form(request):
    from django.contrib.auth.forms import AuthenticationForm
    form = AuthenticationForm()
    return {'login_form': form} 
```

然后，按照艾丹指出的那样做：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    #....
    'yourapp.context_processors.include_login_form'
) 
```

现在，问题是，当您只包含模板时，登录表单位于名为“login_form”的变量中，但当 django 的内置视图使用您的模板时，它位于名为“form”的变量中。

所以这是一个没有好的“干净”解决方案的考验，尽管我相信有人可以解决它。

也许检查在您的 context_processor 中传递的上下文，如果已经存在一个名为“form”的变量，请查看它是否是 AuthenticationForm 的实例，如果是，请使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:18:17.587

我听起来好像表单实际上并没有传递给模板。如果您希望登录表单包含在每个页面上，那么您可能需要添加一个[上下文处理器](https://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors)。

创建一个 context_processors.py 文件，例如 -

```
def include_login_form(request):
    form = YourLoginForm()
    return {'login_form': form} 
```

然后将新的上下文处理器添加到 TEMPLATE_CONTEXT_PROCESSORS 设置 -

```
TEMPLATE_CONTEXT_PROCESSORS = (
    #....
    'yourapp.context_proecssors.include_login_form',
) 
```

这意味着`login_form`您的所有模板都可以使用上下文变量。

# asp.net-mvc-3 - View 中的 MVC Helper 类访问

> ID：15086293
> 
> 赞同：0
> 
> 时间：2013-02-26T10:08:42.473
> 
> 标签：asp.net-mvc-3, razor

我`detailpage.cshtml`在 App_code 中创建了一个文件

```
@helper convertTime(DateTime value)
    {
        value.ToString("dd/MM/yyyy");
} 
```

并且我试图在我的视图中访问它，但我无法在我的视图中访问它。

我错过了什么吗？

我提到了[http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)但我仍然没有得到什么我失踪了吗？

# database - SQLite 数据库未访问且未检索到值

> ID：15086304
> 
> 赞同：1
> 
> 时间：2013-02-26T10:09:08.350
> 
> 标签：database, xcode, sqlite

我是一名 iPhone 初学者，试图从 Xcode 4 中的 sqlite 数据库中获取信息。我的数据库（名为 DB_Info.sqlite）与我的 .h 和 .m 文件位于同一目录中，并且我还拖动了数据库到 Xcode 左侧栏中的文件夹部分。您能否快速查看我的代码并让我知道我的错误在哪里？

```
#import "MyDatabase.h"
#import "FMDatabase.h"

    enter code here

@implementation MyDatabase

-(NSMutableArray *) OpenMyDatabase: (NSString *)query:(NSString *)column
{
    //store the database name here
    self.databaseName=@"App_Database.sqlite";

    //get the reference of the database to be stored in device or emulator
    FMDatabase *database=[self openDatabase: self.databaseName];

    //open the database
    [database open];

    //fetch a collumn from database and store it in array
   // NSArray *nsarr= [self storeDatabaseColumnInArray: database: @"select id from kas":@"id"];
    NSMutableArray *nsarr= [self storeDatabaseColumnInArray: database: query:column];

    //close the database
    [database close];
    return nsarr;

}

- (FMDatabase *)openDatabase: (NSString *)databasename
{

    NSFileManager *fm = [NSFileManager defaultManager];
    NSString *documents_dir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *db_path = [documents_dir stringByAppendingPathComponent: databasename ];
    NSString *template_path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent: databasename];

    if (![fm fileExistsAtPath:db_path])
        [fm copyItemAtPath:template_path toPath:db_path error:nil];
    FMDatabase *db = [FMDatabase databaseWithPath:db_path];
    if (![db open])
        NSLog(@"Failed to open database!");
    return db;
}
-(void) createAndCheckDatabase
{
    BOOL success;

    NSFileManager *fileManager=[NSFileManager defaultManager];
    success=[fileManager fileExistsAtPath:_databasePath];
    NSString *databasePathFromApp=[[[NSBundle mainBundle] resourcePath]
                                   stringByAppendingPathComponent:self.databaseName ];
    [fileManager copyItemAtPath:databasePathFromApp toPath:_databasePath error:nil];

}

-(NSMutableArray *) storeDatabaseColumnInArray:(FMDatabase *)database: (NSString *)sqlStatement :(NSString *)columnName
{

    NSMutableArray *mutablearray = [NSMutableArray array];
    FMResultSet *results = [database executeQuery: sqlStatement];

    while([results next]) {

        NSString *rowValue = [results stringForColumn:columnName];

        [mutablearray addObject:results];
         NSLog(@"row value %@",rowValue);
    }

    //convert the nsmutable array to nsarray
 //   NSArray *temparr=[NSArray arrayWithArray:mutablearray];
    return mutablearray;

}

@end 
```

不显示数据库中的数据。

无法访问数据库。

错误是

```
database    FMDatabase *    0x0757ed50
nsarr         NSMutableArray *  0x0718df40 
```

# android - Linphone for android 不工作/缺少库

> ID：15086307
> 
> 赞同：11
> 
> 时间：2013-02-26T10:09:15.107
> 
> 标签：android, sip, linphone

我正在尝试运行从**git://git.linphone.org/linphone-android.git --recursive**获得的 linphone 代码。下载成功后，我尝试按照README文件编译运行。我将 Cygwin 用于 Autotools、Autoconfig、Automake、aclocal、libtoolize 和 pkgconfig & Android ndk r8d。

然后我在 cygwin 中执行了**prepare_sources.sh shell 脚本，它下载了一些需要的资源。**

完成所有步骤后，当我尝试运行代码时，在运行时和应用程序崩溃时出现**UnsatisfiedLinkError**异常。

我还从 logcat 了解到，由于发生上述异常并导致应用程序崩溃，某些库无法加载。这是 Logcat 输出：

```
02-26 10:03:55.739: W/Unable to load optional library lib(1084): avutil
02-26 10:03:55.749: W/Unable to load optional library lib(1084): swscale
02-26 10:03:55.759: W/Unable to load optional library lib(1084): avcore
02-26 10:03:55.769: W/dalvikvm(1084): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lorg/linphone/core/LinphoneCoreFactoryImpl;
02-26 10:03:55.769: D/AndroidRuntime(1084): Shutting down VM 
```

==================================================== =================================

```
02-26 10:03:55.769: W/dalvikvm(1084): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-26 10:03:55.869: E/AndroidRuntime(1084): FATAL EXCEPTION: main
02-26 10:03:55.869: E/AndroidRuntime(1084): java.lang.ExceptionInInitializerError
02-26 10:03:55.869: E/AndroidRuntime(1084):     at java.lang.Class.classForName(Native Method)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at java.lang.Class.forName(Class.java:217)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at java.lang.Class.forName(Class.java:172)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at org.linphone.core.LinphoneCoreFactory.instance(LinphoneCoreFactory.java:43)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at org.linphone.LinphoneManager.startLibLinphone(LinphoneManager.java:417)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at org.linphone.LinphoneManager.createAndStart(LinphoneManager.java:226)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at org.linphone.LinphoneService.onCreate(LinphoneService.java:165)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2529)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at android.app.ActivityThread.access$1600(ActivityThread.java:141)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at android.os.Looper.loop(Looper.java:137)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at java.lang.reflect.Method.invokeNative(Native Method)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at java.lang.reflect.Method.invoke(Method.java:511)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at dalvik.system.NativeStart.main(Native Method)
02-26 10:03:55.869: E/AndroidRuntime(1084): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load neon from loader dalvik.system.PathClassLoader[dexPath=/data/app/org.linphone-1.apk,libraryPath=/data/app-lib/org.linphone-1]: findLibrary returned null
02-26 10:03:55.869: E/AndroidRuntime(1084):     at java.lang.Runtime.loadLibrary(Runtime.java:365)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at java.lang.System.loadLibrary(System.java:535)
02-26 10:03:55.869: E/AndroidRuntime(1084):     at org.linphone.core.LinphoneCoreFactoryImpl.<clinit>(LinphoneCoreFactoryImpl.java:47)
02-26 10:03:55.869: E/AndroidRuntime(1084):     ... 18 more 
```

任何人都可以帮我解决它。？对此的解决方案，非常感谢..在此先感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-18T06:06:39.843

**第1部分**

以下步骤可以帮助您在设备或模拟器上创建和安装构建（在 Mac 上测试）：

**Step1**：您需要配置并安装Android SDK和NDK 也安装Autotools Mac用户可以使用[此](http://www.gnu.org/software/automake/faq/autotools-faq.html#How-do-I-install-the-Autotools-_0028as-user_0029_003f)链接（仅按照链接中的2.3点）其他平台用户请确保您安装正确。

**第2步**：Mac用户打开您的终端并通过运行以下命令在您想要的任何目录上克隆git repo：（其他用户对不起，我不知道如何，但我认为您可以弄清楚如何获取git使用命令提示符或您正在使用的任何内容在您的目录上回购）

`$ git clone git://git.linphone.org/linphone-android.git --recursive`

将 Repo 复制到您的目录后，现在转到该目录并打开 README 文件并读出整个文件。

**Step3** : 现在我们将按照 README 文件中的说明进行操作 首先在终端上使用以下命令进入下载项目的根目录：

```
Mac users on terminal write cd and 
then drag and drop the "linphone-android" folder on terminal 
(when you drag and drop the folder terminal will get the path of the folder and then you can hit enter to get into the directory of that folder) 

$ cd /Users/myname/Desktop/Android/linphone-android 
```

或者只是使用简单的命令**cd**进入文件夹

```
 $ cd Desktop
   $ cd Android
   $ cd linphone-android 
```

现在，当您进入终端上的目录时，然后检查您的 Mac 上安装的 SDK 和 NDK 的 PATH 运行

```
$ echo $PATH 
```

如果您看到带有 SDK 和 NDK 位置的路径，则可以继续执行**步骤 4 并跳过以下部分**，如果没有，则需要在步骤 4 中执行 make 和 make 安装脚本之前设置 PATH：设置路径使用：

```
$ export PATH=/Users/myname/Documents/adt-bundle-mac-x86_64-20130729/sdk/platform-tools:/Users/myname/Documents/adt-bundle-mac-x86_64-20130729/sdk/tools:/Users/myname/Documents/android-ndk-r9:$PATH 
```

就像**export PATH=(你的 SDK 平台工具文件夹的路径):(你的 SDK 工具文件夹的路径):(你的 NDK 文件夹的路径):$PATH**

这将设置路径并再次确认运行

```
$ echo $PATH 
```

现在你会看到 SDK 和 NDK 的路径在那里。

**第 4 步**：现在如果路径已经设置，您可以简单地运行

```
$ make 
```

现在将您的设备连接到您的 Mac/Pc 并查看 eclipse 是否检测到它。设备连接后运行：

```
$ make install

$ make generate-sdk (optional) 
```

这会将应用程序安装到您的手机中。（您需要有一个有效的 SIP 用户名和密码才能在应用程序中配置）

上述步骤对我有用，我能够在我的设备上运行该应用程序。

**第2部分**

导入到 Eclipse 中：构建完成后，现在需要将其导入到 Eclipse 中。

**第 1步**：转到 eclipse 点击 File Menu 然后 Import 然后选择 Existing Android Code into Workspace

点击下一步并浏览到**linphone-android**项目文件夹，然后只勾选 linphone-android 文件夹并将复制项目保留到工作区取消勾选。

如下图所示： ![在此处输入图像描述](../Images/2f53404d8d54e4343b6ef6f0ef49c46d.png)

并完成。现在您右键单击“linphone-android”（项目名称）并转到属性和 Java 构建路径，然后排序和导出，然后将它们重新排序为我下面的图像并取消勾选 gcm.jar

![在此处输入图像描述](../Images/8c054d6862ff91c3b47c965bd89df7e3.png)

点击 OK And Boom No errors 现在只需在设备或模拟器上运行它。（确保您的最低目标 SDK 与您的设备或模拟器匹配。）

上述步骤对我来说很好，它也对你有用。

一切顺利 ！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T23:14:57.040

问题是您缺少本地霓虹灯库，或者更具体地说，缺少“libneon.so”。

要解决此问题，您必须使用已下载的 linphone 源构建 neon 库（“libneon.so”）。

假设你有源，android sdk，ndk，autotools，...（如果你没有，请按照项目目录中的自述文件），转到项目目录：

1.  运行：./prepare_sources.sh
2.  运行：ndk-build

如果一切顺利，您应该编译 neon 库（“libneon.so”）。完成后，您应该修复您的问题（如果您仍然遇到错误，请确保您在 java.library.path 中有库）。

有关如何加载 Java 本机/共享库 (.so) 的更多信息，请点击链接： http: [//www.chilkatsoft.com/java-loadLibrary-Linux.asp](http://www.chilkatsoft.com/java-loadLibrary-Linux.asp)

# java - Wicket 在单击复选框时检索 CheckGroup 的模型

> ID：15086308
> 
> 赞同：0
> 
> 时间：2013-02-26T10:09:17.070
> 
> 标签：java, ajax, web-applications, wicket, wicket-1.5

我有一个带有复选框列的表单。

```
ArrayList<MyObject> myObjectsList = // Load from database ...
ArrayList<MyObject> selectedObjects = new ArrayList<MyObject>();

Form form = new Form("my-form");

CheckGroup<MyObject> myObjectGroup = new CheckGroup<MyObject>("object-check-group", new AbstractReadOnlyModel() {
  @Override
  public Object getObject() {
    return selectedObjects;
  }
});

WebMarkupContainer container = new WebMarkupContainer("table-container");

DataView dataView = new DataView("table-body", new ListDataProvider<MyObject>(myObjectsList)) {
  public void populateItem(final Item item) {
    final MyObject myObject = (MyObject) item.getModelObject();
    item.add(new Check("check-box", item.getModel())); // Checkbox for each item
    // And a couple more columns
  }
};

container.add(dataView);
group.add(container);
form.add(group);
add(form); 
```

现在我想要的是在所选对象的数量更改时更新表单：

```
item.add(new Check("check-box", item.getModel()).add(new AjaxEventBehavior("onclick") {
  @Override
  protected void onEvent(AjaxRequestTarget target) {
    selectedObjects = (ArrayList<MyGroup>) myObjectGroup.getModelObject(); // this does not work sadly :(
    // Update form elements
  }
})); 
```

有没有一种简单的方法可以使用 Wicket 实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T11:55:21.530

将 AjaxFormChoiceComponentUpdatingBehavior 添加到您的检查组。每次单击您的组中的检查时，ajax 都会触发。

```
 myObjectGroup.add(new AjaxFormChoiceComponentUpdatingBehavior() 
    {
        @Override
        protected void onUpdate(AjaxRequestTarget target) 
        {
            //update form elements  
        }         
    }); 
```

# dart - 运行 ootb web_ui 示例的编译器错误

> ID：15086309
> 
> 赞同：0
> 
> 时间：2013-02-26T10:09:19.800
> 
> 标签：dart, dart-webui

我正在尝试编译 ootb web_ui 示例。（使用生成示例内容 - Web 应用程序（使用 web_ui 库）

我已经更新到最新的编辑器`0.0.0_r18915`并运行了 pub update 但我得到了

```
Internal error:

'http://127.0.0.1:3030/C:/Users/me/dart/WebApplication/web/packages/logging/logging.dart':   
Error: line 250 pos 24: wrong number of type arguments in type 'Comparable'
class Level implements Comparable<Level> {

                   ^ 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:56:50.620

在这里遇到了同样的问题，过了一段时间，我决定关注堆栈跟踪......它说“类型'Comparable'中的类型参数数量错误”。然后，我刚刚打开“logging.dart”并更改了这个：

```
class Level implements Comparable<Level> { 
```

对此：

```
class Level implements Comparable { 
```

不知道我是否做对了，但对我来说工作得很好。如果有人知道正确的方法，请告诉我们；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:38:18.770

1.  单击 Dart 编辑器（菜单项）-> 关于 Dart 编辑器。
2.  单击下载更新按钮。
3.  下载更新后，安装/应用更新。
4.  安装完成后，进入Tools（菜单项）-> Pub Install。
5.  转到工具（菜单项）-> 发布更新。

完成这五个步骤后，我就可以编译代码了。

# python - 处理 django 发布请求 - 一个值被分配而其他值分配失败不知道为什么

> ID：15086310
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:09:27.563
> 
> 标签：python, django, django-views

尝试从 html 发布一个简单的帖子 ..

当我在 django 中收到请求时，我只是打印发布请求。（计数没有反映在我的输出中，不知道你..）

```
 print "counterUpdate"
    print request.method
    print request.path
    print request.POST.get
    print "Expects data of counts in next line console print but it is empty"
    countValues=request.POST['counts'] # counts is not getting reflected in my output dunno y..
    updateType=request.POST['key']
    print countValues
    print updateType
    print "dddd1"
    for data in request.POST:
        print data
    print "Iteration Over" 
```

出于以下目的：

```
counterUpdate
POST
/testapp/counterUpdate
<bound method QueryDict.get of <QueryDict: {u'counts': [u'100', u'100', u'', u''], u'key': [u'increase']}>>
Expects data of counts in next line console print but it is empty

increase
dddd1
counts
key
Iteration Over 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:18:20.377

您必须使用 getlist ，例如：

```
request.POST.getlist('counts') 
```

更多信息：[Django：使用 <select multiple> 和 POST](https://stackoverflow.com/questions/618557/django-using-select-multiple-and-post)

# java - 关闭 JavaFX Stage 后如何释放内存？

> ID：15086311
> 
> 赞同：10
> 
> 时间：2013-02-26T10:09:29.830
> 
> 标签：java, memory, memory-management, javafx-2

我正在创建一个`JavaFx`应用程序，当我单击一个按钮时，它将在 new 中打开一个表`stage`。但我的问题是，当我关闭该`stage`表时，应用程序没有释放内存。javaFX有什么问题吗？还是我必须做其他事情？

我试图在该阶段结束时将所有内容设置为空，但内存仍然没有释放。

桌台闭幕式：

> 表视图表视图；
> 
> 舞台我的舞台；

```
this.myStage.setOnCloseRequest(new EventHandler<WindowEvent>() {
            @Override
            public void handle(WindowEvent t) {
                TableController.this.myStage.close();
                tableView.getItems().clear();
                tableView.getColumns().clear();
                tableView = null;
                TableController.this.myStage = null;
                System.gc();
            }
        }); 
```

我创建了一个名为**replaceScene**的方法来使用舞台文件加载场景`fxml`。它将返回它的控制器并将场景设置到舞台中。

```
 public static Initializable replaceScene(String fXml, Stage mystage) {
    InputStream in = null;
    try {
        FXMLLoader loader = new FXMLLoader();
        in = Utility.class.getResourceAsStream(fXml);
        loader.setLocation(Utility.class.getResource(fXml));
        loader.setBuilderFactory(new JavaFXBuilderFactory());
        AnchorPane page;
        try {
            page = (AnchorPane) loader.load(in);
        } finally {
            in.close();
        }
        Scene scene = new Scene(page);
        mystage.setScene(scene);
        return loader.getController();
    } catch (Exception ex) {
        return null;
    }
} 
```

我首先为 fxml 文件获取 StreamObject (java.io.InputStream)，然后将此 streamObject 传递给 FxmlLoader 以加载页面，

> in = Utility.class.getResourceAsStream(fXml);

我在输入流对象中**获取****sun.net.www.protocol.jar.JarURLConnection$JarURLInputStream**对象

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T10:19:25.700

内存管理和 JavaFX 没有什么特别之处。如果达到定义的内存限制，GC 将运行。设置 object = null 后它不会运行。即使调用`System.gc()`并不意味着 GC 会运行。从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#gc%28%29)：

> 调用 gc 方法**表明**Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。

要确定某个地方是否存在内存泄漏，您可以使用[VisualVM](http://visualvm.java.net/)例如查看您的应用程序是否（以及为什么）内存不足。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T06:42:13.023

我正要发布一个非常相似的问题。我必须承认，我不是受过培训的软件工程师，我的应用程序开发风格可能依赖于一些“非细微的”实践和风格。我喜欢 Java 的一件事是内置的内存管理。我不喜欢 Java 的一件事是内置的内存管理。

例如，在 Visual Basic 6 中，您可以放心，一旦对象的引用计数达到零，它将被销毁。在 Visual Basic 6 中实现模式对话框窗口非常简单：

```
Set myForm = new frmGetClientData
Call myForm.Initialize()
myForm.show, vbModal
nResult = myForm.getResult()
myForm.Hide()
Set myForm = nothing 
```

一旦对 myForm 的引用被清除，它就会被销毁。这很方便，因为您确信每次都会构造和初始化一个新表单。

在 Java 中，很难使用模态对话框窗口。除非传递了引用，否则对话框控制器对象对父控制器对象一无所知。类似地，如果父控制器对象需要调用它的方法，它必须获得对对话框控制器的引用。父控制器在构建新阶段时必须获取对其自身阶段的引用，以便将对话阶段的模态设置为模态。

由于所有这些引用来回指向，在我看来，在 Java 中，模式对话框窗口永远不会被垃圾收集（因为指向父窗口和控制器的引用应该保持有效）......而且每次你使用 FXMLLoader 构建和显示一个对话框窗口，一个新的大对象将最终在内存中具有很长的寿命。在我看来，在 Java 中使用模态对话框窗口会导致内存泄漏。

一种解决方案是进入 Visual Basic 模式，并在不再使用对话框窗口和控制器时努力释放对对话框和控制器的引用。真麻烦。这仍然不能保证窗口何时被销毁。

另一种解决方案是创建一个对话框池并使用初始化方法构建它们，每次需要它们时将它们设置为已知的初始状态，而不是每次要显示对话框窗口时都构建一个新窗口（就像我对 Visual 所做的那样基本的）。

有人对 JavaFX 有这方面的见解吗？我正在编写一个帮助类来帮助我构建和管理模式对话框窗口，但在我看来，这真的没有必要。我可能只是在为自己做额外的工作。**

# entity-framework - 实体框架 AddObject 未将对象添加到 EntitySet

> ID：15086315
> 
> 赞同：0
> 
> 时间：2013-02-26T10:09:42.107
> 
> 标签：entity-framework, c#-4.0

我有以下一段代码

```
private void DoAddPropertyType()
{
    var ctx = Globals.DbContext;
    var propType = new PropertyType()
    {
        ID = Guid.NewGuid(),
        Name = "NewType",
        Description = "New Property Type",
        ModifiedDate = DateTime.Now
    };
    ctx.AddToPropertyTypes(propType);
    PropertyTypes.Add(propType);
} 
```

`Globals.DbContext`提供对启动时启动的对象上下文的静态引用。由于某种原因，该`ctx.AddToPropertyTypes(propType);`位不会将实体添加到上下文中。如果我在该行之后设置断点并浏览`ctx.PropertyTypes`实体集，则它不存在。有任何想法吗？

编辑 1：如果我`ctx.SaveChanges()`在 and 步骤之后添加 a ，`ctx.AddToPropertyTypes(propType)`则实际添加似乎仅在 SaveChanges 执行后发生。但是，这不符合我的要求，因为我想在保存之前先验证对象，并想遍历实体集中的实体。有人知道另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:45:06.997

所以这就是你的问题的重点。`ctx.PropertyTypes`不是真正的集合 - 它是数据库的入口，您的“浏览”实际上是对尚未存储新对象的数据库执行查询。如果要查找添加到上下文中的新对象而不先保存它，则必须在以下内容中搜索对象`ObjectStateManager`：

```
var entity = ctx.ObjectStateManager
                .GetObjectStateEntries(EntityState.Added)
                .Where(e => !e.IsRelationship)
                .Select(e => e.Entity)
                .OfType<PropertyType>()
                .SingleOrDefault(p => p.ID == ...); 
```

# linux - 使用 logrotate 的无限日志

> ID：15086322
> 
> 赞同：5
> 
> 时间：2013-02-26T10:10:03.357
> 
> 标签：linux, logrotate

在普通的 logrotate.d 配置文件中，有没有办法设置无限量的潜在日志？

我似乎唯一能想到的就是将它设置为一个永远无法满足的疯狂数字。就像是：

```
/var/log/app/* {
  missingok
  weekly
  copytruncate
  rotate 10000000000
  compress
  notifempty
  olddir /var/log/app/old
} 
```

但这对我来说似乎很hacky。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:15:40.857

从[UNIX logrotate 手册页](http://linux.about.com/od/commands/l/blcmdl8_logrota.htm)：

> **旋转计数**
> 
> 日志文件在被删除或邮寄到邮件指令中指定的地址之前会轮换几次。如果 count 为 0，则删除旧版本而不是轮换。

所以我想你需要写一个巨大的数字才能工作。

# internet-explorer - 任何以编程方式检测 IE res://ieframe.dll/* 错误的 HTTP 状态代码的方法？

> ID：15086327
> 
> 赞同：0
> 
> 时间：2013-02-26T10:10:13.730
> 
> 标签：internet-explorer, http, iframe, access-denied

考虑一种区分`res://ieframe.dll/*`错误的方法，一个合乎逻辑的想法是，为什么不检查`src`iframe 的属性并将其解析为实际错误。但似乎`src`iframe（以及主窗口中的 url）并没有更改为`res://ieframe.dll/*`? 如果是这种情况，那么当我尝试访问 iframe 的内容时，“访问被拒绝”（跨域错误）来自哪里？

# php - 从数组中删除类似的对象？

> ID：15086328
> 
> 赞同：2
> 
> 时间：2013-02-26T10:10:13.933
> 
> 标签：php, arrays

我有一个对象数组，但我需要通过它们的一些属性删除类似的对象：

例如：

```
array(12) {
  [0]=>
  object(stdClass)#848 (5) {
    ["variant"]=>
    object(stdClass)#849 (4) {
      ["name"]=>
      string(8) "Alex"      
    }
    ["age"]=>
    int(10)
  }
  [1]=>
  object(stdClass)#851 (5) {
    ["variant"]=>
    object(stdClass)#852 (4) {
      ["name"]=>
      string(8) "Alex"
    }
    ["age"]=>
    int(10)
  } 
```

如何为此在数组中创建一个对象（例如，如果我只需要通过名称属性进行比较？）

仍然有问题。

**更新**

我创建了一个新的对象数组：

```
$objects = array(
    (object)array('name'=>'Stiven','age'=>25,'variant'=>(object)array('surname'=>'Sigal')),
    (object)array('name'=>'Michael','age'=>30,'variant'=>(object)array('surname'=>'Jackson')),
    (object)array('name'=>'Brad','age'=>35,'variant'=>(object)array('surname'=>'Pit')),
    (object)array('name'=>'Jolie','age'=>35,'variant'=>(object)array('surname'=>'Pit')),
);
echo "<pre>";
print_r($objects); 
```

所以我需要做的是比较一个对象的属性（变量->姓和年龄），如果两个对象的年龄和变量->姓相似，我们需要删除这些对象中的一个。

一半`solution`是：

```
$tmp = array();
foreach ($objects as $item=>$object)
{
    $tmp[$object->variant->surname][$object->age] = $object;
}

print_r($tmp); 
```

不幸的是，我需要一个老式的对象数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:21:39.327

我找到了一个例子。

```
<?php
 $a = array ( 
    0 => array ( 'value' => 'America', ), 
    1 => array ( 'value' => 'England', ),  
    2 => array ( 'value' => 'Australia', ), 
    3 => array ( 'value' => 'America', ), 
    4 => array ( 'value' => 'England', ), 
    5 => array ( 'value' => 'Canada', ), 
);

$tmp = array ();

foreach ($a as $row) 
    if (!in_array($row,$tmp)) array_push($tmp,$row);

print_r ($tmp);
?> 
```

[从这里](https://stackoverflow.com/a/2442290/2096399)引用

# php - php 和会话重定向错误

> ID：15086333
> 
> 赞同：2
> 
> 时间：2013-02-26T10:10:25.853
> 
> 标签：php, mysql, session, dreamweaver, session-cookies

我正在创建一个登录表单并使用会话注销，但是当我尝试登录浏览器时显示错误（我认为错误出现在记录的功能中）任何人都可以帮助我，因为它让我发疯...... **页面是'重定向不正确 Firefox 的服务器正在以一种永远不会检测到完成的方式重定向对该地址的请求。

此问题有时可能是由禁用或拒绝接受 cookie 引起的。**

# 登录.php

```
<?php
ob_start();
require_once('functions.php');

if(loggedin()){
    header("Location: userarea.php");
    exit();
}

if(isset($_POST['login'])){

  //get data
  $username = $_POST['username'];
  $password = $_POST['password'];
  $rememberme = $_POST['rememberme'];

  if($username && $password){

   $login = mysql_query("SELECT * FROM rememberme  WHERE username = '$username'");
   while($row = mysql_fetch_assoc($login)){

      $db_password = $row['password'];
      if($password == $db_password)
       $loginok = TRUE;
      else
        $loginok = FALSE;
      if($loginok == TRUE){

         if($rememberme == "on"){
          setcookie("username", $username, time()+7200);

         }else if($rememberme == "")
           $_SESSION['username'] = $username;
         header("Location: userarea.php");
         exit();   

      }else{
       die("incorrect username/password combination");

      }

   }

  }else
    die("please enter a username and password");
    exit();

}

?>

<form action="login.php" method="post">
<p>Username<br />
  <input type="text" name="username" />
</p>
<p> Password<br />
  <input type="password" name="password" />
</p>
<p>
  <input type="checkbox" name="rememberme"> 
  Remember me<br />

  <input type="submit" name="login" value="Log in" />
</p>
</form>
<?php ob_flush(); ?> 
```

# 函数.php

```
 <?php
 //session
 session_start();
 // connect to database 
 mysql_connect("localhost", "root", "") or die("could not connect to database");
 mysql_select_db("rememberme") or die("could not select database");

// login check function

 function loggedin()
{
    $loggedin = false;
    if(isset($_SESSION['username'])||isset($_COOKIE['username']))
    {
        $loggedin = TRUE;
    }
    return $loggedin;
}

?> 
```

# 用户区.php

```
<?php
 //session
 session_start();
 // connect to database 
 mysql_connect("localhost", "root", "") or die("could not connect to database");
 mysql_select_db("rememberme") or die("could not select database");

// login check function

function loggedin()
{

  if(isset($_SESSION['username'])||isset($_COOKIE['username'])){
    $loggedin = TRUE;
    return $loggedin;  

  }

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:13:14.667

您在两个文件中具有相同的功能。

```
function loggedin() 
```

尝试

```
function loggedin()
{
    $loggedin = false;
    if(isset($_SESSION['username'])||isset($_COOKIE['username']))
    {
        $loggedin = TRUE;
    }
    return $loggedin;
} 
```

如果您的`if`条件**不满足，您的函数将不会返回 true 或 false**，因此您需要将`initial`值设置为`false`，然后在满足时**覆盖**它。`if condition`

**登录.php**

```
<?php
require_once('functions.php');

if(isset($_POST['login']))
{
    $username = $_POST['username'];
    $password = $_POST['password'];
    $rememberme = $_POST['rememberme'];

    if($username && $password)
    {
        $login = mysql_query("SELECT * FROM rememberme WHERE username = '".$username."'");
        while($row = mysql_fetch_assoc($login))
        {
            $db_password = $row['password'];
            if($password == $db_password)
                $loginok = TRUE;
            else
                $loginok = FALSE;
            if($loginok == TRUE)
            {
                if($rememberme == "on")
                {
                    setcookie("username", $username, time()+7200);
                }
                else if($rememberme == "")
                {
                    $_SESSION['username'] = $username;
                    header("Location: userarea.php");
                    exit();   
                }
            }
            else
            {
                die("incorrect username/password combination");
            }

        }
    }
    else
    {
        die("please enter a username and password");
        exit();
    }
}
?>

<form action="login.php" method="post">
    <p>Username<br />
        <input type="text" name="username" />
    </p>
    <p>Password<br />
        <input type="password" name="password" />
    </p>
    <p>
        <input type="checkbox" name="rememberme"> 
        Remember me<br />
        <input type="submit" name="login" value="Log in" />
    </p>
</form>
<?php ob_flush(); ?> 
```

**函数.php**

```
<?php
ob_start();
session_start();
error_reporting(E_ALL);
ini_set('display_errors','On');

mysql_connect("localhost", "root", "") or die("could not connect to database");
mysql_select_db("rememberme") or die("could not select database");

// login check function

if(loggedin())
{
    header("Location: userarea.php");
    exit();
}

function loggedin()
{
    $loggedin = false;
    if(isset($_SESSION['username'])||isset($_COOKIE['username']))
    {
        $loggedin = TRUE;
    }
    return $loggedin;
}

?> 
```

**用户区.php**

```
<?php
    require_once "functions.php";
    echo "after login";
?> 
```

# mysql - 无法绕过复杂的 SQL 删除查询

> ID：15086335
> 
> 赞同：23
> 
> 时间：2013-02-26T10:10:37.803
> 
> 标签：mysql, sql, bash

# 情况

我的目标是每年进行一次 cronjob，根据年龄从数据库中删除某些数据。就我而言，我拥有 Bash 和 MySQL 的强大功能。我从编写一个 bash 脚本开始，但后来让我感到震惊的是，也许我可以只用一个 SQL 查询来完成所有事情。

我本质上更像是一名程序员，而且我对数据结构没有太多经验，所以这就是我想要一些帮助的原因。

**表/数据结构**

该查询的相关表和列如下：

**登记：**

```
+-----+-------------------+
| Id  | Registration_date |
+-----+-------------------+
|   2 | 2011-10-03        | 
|   3 | 2011-10-06        | 
|   4 | 2011-10-07        | 
|   5 | 2011-10-07        | 
|   6 | 2011-10-10        | 
|   7 | 2011-10-13        | 
|   8 | 2011-10-14        | 
|   9 | 2011-10-14        | 
|  10 | 2011-10-17        |
+-------------------------+ 
```

**关联客户：**

```
+-----------+-----------------+
| Client_id | Registration_id |
+-----------+-----------------+
|         2 |               2 | 
|         3 |               2 | 
|         3 |               4 | 
|         4 |               5 | 
|         3 |               6 | 
|         5 |               6 | 
|         3 |               8 | 
|         8 |               9 | 
|         7 |              10 | 
+-----------------------------+ 
```

客户：这里只有 ID 是相关的。

如您所见，这是一个简单的多对多关系。一个客户的名字可以有多个注册，一个注册可以有多个客户。

# 目标

我需要删除 5 年内未进行新注册的客户的所有注册和客户数据。听起来很简单，对吧？

## 棘手的部分

**如果特定客户的任何注册的****任何其他客户**在5 年内重新注册，则应保留该数据。

 **所以想象客户 A 有 4 个注册，其中只有他，1 个注册他自己和客户 B。所有 5 个注册都超过 5 年。如果客户 B 在 5 年内没有新的注册，则应删除所有内容：客户 A 的注册和记录。如果 B**确实**在 5 年内进行了新注册，则应保留**所有客户 A 的数据，包括他自己的旧注册。**

# 我试过的

建立我的查询，我得到了这么多：

```
DELETE * FROM `Registration` AS Reg
WHERE TIMESTAMPDIFF(YEAR, Reg.`Registration_date`, NOW()) >= 5
AND 
    (COUNT(`Id`) FROM `Registration` AS Reg2
     WHERE Reg2.`Id` IN (SELECT `Registration_id` FROM `AssociatedClient` AS Clients
                         WHERE Clients.`Client_id` IN (SELECT `Client_id` FROM `AssociatedClient` AS Clients2
                                                       WHERE Clients2.`Registration_id` IN -- stuck
               #I need all the registrations from the clients associated with the first
               # (outer) registration here, that are newer than 5 years.

    ) = 0 -- No newer registrations from any associated clients 
```

请理解，我在 SQL 方面的经验非常有限。我意识到，即使到目前为止我得到的也可以进行大量优化（使用连接等），甚至可能不正确。

我被卡住的原因是，如果我可以使用某种循环，我想到的解决方案会起作用，我只是意识到这不是你在这种 SQL 查询中容易做的事情。

# 任何帮助

非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T05:43:01.787

首先识别注册的其他客户的注册。这是一个视图：

```
create view groups as 
select   a.Client_id
       , c.Registration_id
from AssociatedClient as a 
join AssociatedClient as b on a.Registration_id = b.Registration_id 
join AssociatedClient as c on b.Client_id = c.Client_id; 
```

这给了我们：

```
select Client_id
    , min(Registration_id) as first
    , max(Registration_id) as last
    , count(distinct Registration_id) as regs
    , count(*) as pals
from  groups 
group by Client_id;
Client_id   first       last        regs        pals      
----------  ----------  ----------  ----------  ----------
2           2           8           4           5         
3           2           8           4           18        
4           5           5           1           1         
5           2           8           4           5         
7           10          10          1           1         
8           9           9           1           1 
```

当然，您不需要视图；这只是为了方便。您可以只使用虚拟表。但是仔细检查它以说服自己它为每个客户生成正确范围的“朋友注册”。请注意，视图*不*引用`Registration`. 这很重要，因为即使在我们使用它来 delete from 之后它也会产生相同的结果`Registration`，因此我们可以将它用于第二个 delete 语句。

现在我们有一个客户列表和他们的“朋友注册”。每个朋友最后一次注册的日期是什么时候？

```
select g.Client_id, max(Registration_date) as last_reg
from groups as g join Registration as r
on g.Registration_id = r.Id
group by g.Client_id;
g.Client_id  last_reg  
-----------  ----------
2            2011-10-14
3            2011-10-14
4            2011-10-07
5            2011-10-14
7            2011-10-17
8            2011-10-14 
```

哪些在某个时间之前有最晚的日期？

```
select g.Client_id, max(Registration_date) as last_reg
from groups as g join Registration as r
on g.Registration_id = r.Id
group by g.Client_id
having max(Registration_date) < '2011-10-08';
g.Client_id  last_reg  
-----------  ----------
4            2011-10-07 
```

IIUC 这意味着客户#4 应该被删除，他注册的任何东西都应该被删除。注册将是

```
select * from Registration
where Id in (
      select Registration_id from groups as g
      where Client_id in ( 
            select g.Client_id
            from groups as g join Registration as r
            on g.Registration_id = r.Id
            group by g.Client_id
            having max(Registration_date) < '2011-10-08'
      )
);
Id          Registration_date
----------  -----------------
5           2011-10-07 
```

而且，毫无疑问，客户端 #4 在注册 #5 中，并且是唯一会被此测试删除的客户端。

从那里你可以制定`delete`陈述。我认为规则是“删除客户和他注册的任何东西”。如果是这样，我可能会将注册 ID 写入临时表，并为两者写入删除`Registration`并`AssociatedClient`加入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T17:51:46.553

您想知道所有需要保留的注册。因此，您的第一个查询返回前 5 年内的注册：

```
SELECT
  Id
FROM
  Registration
WHERE
  Registration_date >= '2011-10-08' 
```

然后所有与上一个查询相关的客户注册：

```
SELECT
  a2.Registration_id as Id
FROM
  AssociatedClient AS a1
  INNER JOIN AssociatedClient AS a2
    ON a1.Client_id = a2.Client_id 
WHERE
  a1.Registration_id IN
  (  
    SELECT
      Id
    FROM
      Registration
    WHERE
      Registration_date >= '2011-10-08'
 ) 
```

然后，通过将先前的查询组合在一个中，您将拥有所有不能删除的注册`UNION`，并且您希望所有不属于此查询的客户端：

```
SELECT
  Client_id
FROM
  AssociatedClient
WHERE
  Registration_id NOT IN
  (
    SELECT
      Id
    FROM
      Registration
    WHERE
      Registration_date >= '2011-10-08'
    UNION
    SELECT
      a2.Registration_id as Id
    FROM
      AssociatedClient AS a1
      INNER JOIN AssociatedClient AS a2
        ON a1.Client_id = a2.Client_id 
    WHERE
      a1.Registration_id IN
      (  
        SELECT
          Id
        FROM
          Registration
        WHERE
          Registration_date >= '2011-10-08'
      )
  ) 
```

[你可以在这个SQL fiddle](http://sqlfiddle.com/#!2/c6df9/15/0)中看到结果

然后，您可以使用以下查询删除未注册的客户行与条件相对应：

```
DELETE FROM
  AssociatedClient
WHERE
  Client_id IN (<previous query>); 
```

以及 AssociatedClient 中不存在的所有注册：

```
DELETE FROM
  Registration
WHERE
  Id NOT IN (SELECT Registration_id FROM AssociatedClient) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:09:12.493

使用临时表。

```
INSERT INTO LockedClient(client_id) --select clients that should not be deleted
SELECT DISTINCT ac.client_id 
FROM AssociatedClient ac
JOIN Registration r ON r.Id = ac.ID
WHERE TIMESTAMPDIFF(YEAR, Reg.`Registration_date`, NOW()) >= 5;

DELETE  * FROM Registration r -- now delete all except locked clients
JOIN AssociatedClient ac ON ac.registration_id = r.id
LEFT JOIN LockedClient lc ON lc.client_id = ac.client_id
WHERE TIMESTAMPDIFF(YEAR, Reg.`Registration_date`, NOW()) >= 5 AND lc.client_id IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:20:17.870

这应该为您提供正确的客户信息 1 级到链接的客户。我知道这可能无法为您提供所有需要的信息。但是，正如评论中所述，目前 1 级实现应该就足够了。这可能不是最佳的。

```
SELECT
AC1.Client_id,
MAX(R.Registration_date) AS [LatestRegistration]
FROM
#AssociatedClient AC1
JOIN #AssociatedClient AC2
    ON  AC1.Registration_id = AC2.Registration_id
JOIN #AssociatedClient AC3
    ON  AC2.Client_id = AC3.Client_id
JOIN #Registration R
    ON  AC3.Registration_id = R.Id
GROUP BY
AC1.Client_id 
```

您应该使用循环查看函数。这是我现在唯一能想到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T17:40:36.973

我是一个 SQL Server 人，但我认为这种语法适用于 MySQL。此查询将拉取不应删除的客户端。

```
SELECT A3.Client_id
FROM AssociatedClient A1
#Get clients with registrations in the last 5 years
JOIN Registration R1 ON A1.Registration_id = R1.Id 
    AND TIMESTAMPDIFFERENCE(YEAR, R1.Registration_Date, Now()) <= 5
#get the rest of the registrations for those clients
JOIN AssociatedClient A2 ON A1.Client_id = A2.Client_id
#get other clients tied to the rest of the registrations
JOIN AssociatedClient A3 ON A2.Registration_id = A3.Registration_id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-19T17:36:07.793

您需要两个 sql delete 语句，因为您要从两个表中删除。

两个删除语句都需要区分正在保留的注册和正在删除的注册，因此需要先从注册表中删除。

控制问题是与 id 相关联的最新注册（注册 id 或客户端 id）。因此，您将根据 id 进行聚合并找到最大注册日期。

删除客户端 ID 时，您会删除聚合注册 ID 超过五年的那些。此删除操作将取消之前链接的注册 ID 的关联，但这没关系，因为此操作不会为他们提供更新的关联注册日期。

也就是说，一旦您拥有客户端 ID，您将需要加入注册 ID，以查找相关的注册 ID。您需要加入客户端 ID，然后自行加入回注册 ID，以使该部分正常工作。如果您已删除与注册相关联的所有客户端 ID，您还需要删除这些注册。

我的 sql 有点生锈，我的 mysql 也生锈了，这是未经测试的代码，但这应该与我认为您需要做的相当接近：

```
delete from associatedclient where client_id in (
  select client_id from (
    select ac.client_id, max(r.registration_date) as dt
      from associatedclient ac
        inner join registration r
          on ac.registration_id = r.id
      group by ac.client_id
  ) d where d.dt < cutoff
) 
```

下一步看起来像这样：

```
delete from registration where id in (
  select id from (
    select r1.id, max(r2.date) dt
      from registration r1
        inner join associated_client ac1
          on r1.id = ac1.registration_id
        inner join associated_client ac2
          on ac1.client_id = ac2.client_id
        inner join registration r2
          on ac2.registration_id = r2.id
) d
  where d.dt < cutoff
  or d.dt is null 
```

我希望你不介意我提醒你，但你应该先运行不删除的 select 语句，然后检查结果的合理性，然后再继续删除内容。

（如果你有任何限制或索引阻止它工作，你也必须处理这些。）**

# php - mysql活动记录查询不起作用

> ID：15086342
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:11:03.137
> 
> 标签：php, mysql, codeigniter, activerecord

我有一`varchar`列将日期存储为`26/02/2013`. 我需要将其转换为日期格式以进行比较。作为测试查询，我在活动记录中使用下面的查询来获取日期为的所有记录`26/02/2013`

```
$this->db->select('*');
$this->db->from('salesinvoices');
$this->db->where('STR_TO_DATE(`date`,"%d/%m/%y")', 'CONVERT("26/02/13")'); 
```

这总是不返回任何结果。这里有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:15:17.630

**编辑**：

```
$this->db->where('DATE_FORMAT(NOW(), "%d/%m/%y")', '26/02/13',FALSE); 
```

或者

```
$this->db->where('STR_TO_DATE('.$date.',"%d/%m/%y")', '26/02/13',FALSE); 
```

codeigniter 自动转义 where()。

用这个：

```
$this->db->where('STR_TO_DATE(`date`,"%d/%m/%y")', 'CONVERT("26/02/13")',FALSE); 
```

提示：当您的数据库查询遇到问题时，这非常有用

```
 echo "<PRE>";
    echo $this->db->last_query();
    echo "</PRE>"; 
```

# maven - maven 跳过/忽略父标签

> ID：15086347
> 
> 赞同：1
> 
> 时间：2013-02-26T10:11:14.713
> 
> 标签：maven

我想知道是否可以忽略 pom.xml 文件中的父标记。我需要这个，因为我有以下情况：

结构是：

*   超级根pom

    *   根 pom
        *   模块1 pom
        *   模块2 pom
            *   module2.1 pom
            *   module2.2 pom
            *   module2.3 pom

我需要将**超级根 pom设置为****根**pom的父 pom，以便可以在构建服务器上专门构建它，但诀窍是，我在本地没有**超级根 pom**，需要忽略父标签或做一些不依赖超级父pom。因此，例如，我需要独立于超级根 pom运行**root pom clean install。**有没有办法使用一些参数或一些 pom.xml 技巧来做到这一点？

提前谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:17:26.243

如果您有公司回购（Nexus，Artifactory ...）更简单的是部署您的父级，使其可用于您的所有项目，所有团队，而不需要本地（相对文件系统路径）关系.

# php - PHP 中有没有办法像在 Java EE 中一样使用持久数据？（在 PHP 线程之间共享对象）没有会话也没有缓存/DB

> ID：15086349
> 
> 赞同：8
> 
> 时间：2013-02-26T10:11:19.627
> 
> 标签：php, persistence, share, shared-memory, inter-process-communicat

PHP中有没有办法使用“会话外”变量，这些变量不会像Java服务器一样在每个连接处加载/卸载？

请原谅我缺乏准确性，我不知道如何以正确的方式编写它。

主要想法是有这样的东西：

```
<?php
    ...
    // $variablesAlreadyLoaded is kind of "static" and shared between all PHP threads
    // No need to initialize/load/instantiate it.
    $myVar = $variablesAlreadyLoaded['aConstantValueForEveryone'];
    ...
?> 
```

我已经使用`shmop`和其他奇怪的东西做了这样的事情，但是如果在“纯 PHP”中有一种“干净”的方法可以在不使用缓存系统（我认为 APC、Redis ...）或数据库的情况下做到这一点。

**编辑 1：**

*由于人们（感谢他们为我花时间）以同样的方式回答我的会话，我添加了一个我错过写的约束：请不要会话。*

**编辑 2：**

*似乎唯一能做这种事情的 PHP 本地方法是共享内存 ( `shmop`) 和命名管道。我会使用托管方式来访问共享对象，而不考虑内存管理（共享内存块大小）或系统问题（管道）。*

*然后，我在网上浏览了一个 PHP 模块/库，它提供了执行此操作的函数/方法：我什么也没找到。*

**编辑 3：**

*在对@KFO 指出的方式进行了一些研究之后，似乎`putenv`/`setenv`不是用来处理对象的（我会避免序列化）。因此，它解决了诸如字符串或数字之类的短“事物”的问题，但不适用于更大/更复杂的对象。*

*使用“env 方式”和另一种方法来处理更大的对象将是不连贯的，并且会增加代码的复杂性和可维护性。*

**编辑 4：**

*找到了这个：DBus（[GREE Lab DBus](http://labs.gree.jp/Top/OpenSource/DBus-en.html)），但我没有工具可以在工作中测试它。有人测试过吗？*

我对每一个建议都持开放态度。

谢谢

**编辑5（“答案”）：**

由于 DBus 并不是我想要的（需要安装第三方模块，没有“严重”的应用证据），我现在使用的 Memcache 已经证明了它的可靠性（在@PeterM 评论之后，见下文）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T10:18:39.457

```
// First page
session_id('same_session_id_for_all');
session_start();
$_SESSION['aConstantValueForEveryone'] = 'My Content';

// Second page
session_id('same_session_id_for_all');
session_start();
echo $_SESSION['aConstantValueForEveryone']; 
```

这在 PHP 中是开箱即用的。使用相同的会话 ID（而不是随机的用户唯一字符串）为所有访问者初始化会话会导致对所有用户都相同的会话。

* * *

真的有必要使用会话来实现目标还是使用[常量](http://php.net/manual/language.constants.php)不是更好？

> 没有纯粹的 PHP 方式可以在 PHP 中的不同线程之间共享信息！除了“外部”文件/数据库/服务器变量/会话文件解决方案。

* * *

由于一些评论员指出，Session 数据的序列化/反序列化功能可能会破坏传输中的数据，因此有一个解决方案：在 PHP 中，`serialize_handler`可以根据需要配置序列化和反序列化功能。请参阅[https://www.php.net/manual/session.configuration.php#ini.session.serialize-handler](https://www.php.net/manual/session.configuration.php#ini.session.serialize-handler)查看魔术类方法可能也很有趣`__sleep()`，`__wakeup()`它们定义了对象在序列化上的行为方式或反序列化请求。[https://www.php.net/manual/language.oop5.magic.php#object.sleep](https://www.php.net/manual/language.oop5.magic.php#object.sleep) ...从 PHP 5.1 开始，还有一个预定义的`Serializable`接口可用：[https ://www.php.net/manual/class .serializable.php](https://www.php.net/manual/class.serializable.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:20:18.363

您可以在 .htaccess 中声明一个变量。例如`SetEnv APPLICATION_ENVIRONMENT production`并在您的应用程序中使用该功能访问它`getenv('APPLICATION_ENVIRONMENT')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-14T16:35:28.080

另一种解决方案是将变量包装在“持久数据”类中，该类将在每次运行 php 脚本时自动恢复其数据内容。您的班级需要以下内容：

*   将变量的内容存储到文件中`__destructor`
*   从文件中加载变量的内容`__constructor`

我更喜欢以 JSON 格式存储文件，以便可以轻松检查内容以进行调试，但这是可选的。

请注意，某些网络服务器会更改析构函数中的当前工作目录，因此您需要使用绝对路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:15:16.053

我认为您可以使用`$_SESSION['aConstantValueForEveryone']`它，您可以在同一域的每个页面上阅读它。

考虑参考它的[手册](http://php.net/manual/en/reserved.variables.session.php)。

# android - 如何在java上获得get Request的响应

> ID：15086350
> 
> 赞同：-2
> 
> 时间：2013-02-26T10:11:20.687
> 
> 标签：android, http-get

我正在做一个android应用程序，我只是做了一个get http请求，我只想知道我做错了什么。

这是我的要求：

```
try {
    String encodedUserNAme = idDispositivo;
    encodedUserNAme =  URLEncoder.encode(encodedUserNAme, "utf-8");
    String url = Constants.URL_OBTENER_GRUPO + "?" + "user="+ idDispositivo;
    Log.w("ObtenerIDGrupo "," url: "+url);

    HttpClient client = Constants.getHttpClient();
    HttpGet httpget;
    try {
        httpget = new HttpGet(new URI(url));

        try{
            HttpResponse response = client.execute(httpget);
            String responseBody = EntityUtils.toString(response.getEntity());

                    Log.w("ObtenerIDGrupo "," RESPONSEBODY= "+responseBody);
                    idGrupo = responseBody;
                    Log.w("ObtenerIDGrupo "," idGrupo= "+responseBody);

        }catch(ClientProtocolException e){
            e.printStackTrace();
        }catch(IOException e){
            e.printStackTrace();
        }
    } catch (URISyntaxException e1) {
        e1.printStackTrace();
    }
} catch (IOException e) {
    Log.w("IOException" + e);
    e.printStackTrace();
} 
```

这是我的回应：

![在此处输入图像描述](../Images/024e2522931c82f4becfb090c0d98d5f.png)

我不知道为什么会有这样的反应。有人能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:17:37.383

您不能像这样操纵响应，请尝试以下代码：

```
InputStream is = response.getEntity().getContent();        
BufferedReader bufferedReader = new BufferedReader(
            new InputStreamReader(is));

StringBuilder str = new StringBuilder();
String line = null;

while ((line = bufferedReader.readLine()) != null) {
    str.append(line + "\n");
}
responseBody = str.toString();
Log.w("ObtenerIDGrupo "," RESPONSEBODY= "+responseBody); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:21:14.513

试试这个

```
 URL url = new URL(yoururl);
         InputStream input=url.openStream();
         BufferedInputStream bis=new BufferedInputStream(input);
         ByteArrayBuffer baf=new ByteArrayBuffer(1000);
         while((k=bis.read())!=-1)
         {
         baf.append((byte)k);
         }
        String responsedata=new String(baf.toByteArray()); 
```

# android - 用户认证

> ID：15086351
> 
> 赞同：1
> 
> 时间：2013-02-26T10:11:21.813
> 
> 标签：android, asp.net, wcf, wcf-data-services, wcf-security

我正在开发一个小应用程序，我有一个带有 WCF 数据服务的 asp.net Web 应用程序。在我的应用程序上，数据服务向 Android 公开，我想对用户进行身份验证。

用户的凭据将存储在数据库中。是否可以使用成员资格和角色提供者来验证用户身份？如果没有，最好的身份验证方法是什么，以便我可以授予某些操作权限并拒绝其他操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:13:02.383

我经常使用的选项是使用 HTTPS 并使用 RESTful 服务在每次调用时传递您的用户凭据。显然，将您的安全层保留在服务器端，并在凭据无效时返回失败代码。

网络上有大量示例，包括[这个](https://stackoverflow.com/questions/8267928/android-rest-client-sample)SO 答案。

# ajax - 使用jquery将＆符传递给ajax？

> ID：15086354
> 
> 赞同：3
> 
> 时间：2013-02-26T10:11:28.887
> 
> 标签：ajax, jquery

我有这个 ajax 调用

```
 function addNewRemarksToDataBase(argRemark) {
            if (argRemark != '') {
                // if not blank
                $.ajax({
                    url: '../AutoComplete.asmx/AddNewRemarks',
                    type: 'POST',
                    timeout: 2000,
                    datatype: 'xml',
                    cache: false,
                    data: 'argRemarks=' + argRemark,
                    success: function (response) {
                        // update the field that is source of remarks
                        updateRemarksSource();
                    },
                    error: function (response) {
                    }
                });
            }
        }; 
```

该方法定义为

```
[WebMethod]
public void AddNewRemarks(string argRemarks)
{
    BAL.BalFactory.Instance.BAL_Comments.SaveRemarks(argRemarks, Globals.BranchID);
} 
```

问题是如果用户输入类似`long & elegant`或类似`smart & beautiful`的东西，包含的东西`&`，我只得到第一部分之前`&`，`long`（在第一种情况下），`smart`（在第二种情况下）（还要注意空格！）

[我在jquery ajax 文档](http://api.jquery.com/jQuery.ajax/)中读到应该设置**`processData`**为 false，因为它是用于查询字符串或其他东西的东西。我添加了

```
processData: false 
```

但我仍然得到`&`. 我不想使用`encodeURIComponent`，因为它会变成（或类似的`&`东西`amp;`）。我需要的是完整的价值`long & elegant`，`smart & beautiful`它将被保存到数据库中。我怎样才能做到这一点？

***编辑***做`{ argRemarks: argRemark }`没有帮助！该函数没有事件被调用。用firebug运行它，并在错误函数中设置断点，我得到了这个

```
[Exception... "Component does not have requested interface"  nsresult: "0x80004002 (NS_NOINTERFACE)"  location: "JS frame :: http://localhost:49903/js/jquery-1.8.1.min.js :: .send :: line 2"  data: no]" 
```

***更新2：*** 做

```
data: 'argRemarks=' + encodeURIComponent(argRemark) 
```

成功了。但是任何人都可以帮助我了解这是如何工作的吗？我以为它会转换`&`为，`&amp;`但它没有？我现在收到的方法参数正是我想要的，**`long & elegant`,`smart & beautiful`**，不`encodeURIComponent()`转换特殊字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T10:13:28.287

您*确实*需要对`argRemark`. 最简单的方法是让 jQuery 为您完成这项工作：

```
data: { argRemarks: argRemark } 
```

这与`data: 'argRemarks=' + argRemark`传入一个对象不同，jQuery 假定它需要对该对象的属性值进行 URL 编码——而如果传入一个字符串，则需要事先对其进行正确编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T10:16:26.517

您必须先对字符串进行 URL 编码：

```
data: 'argRemarks=' + encodeURIComponent(argRemark) 
```

# iis-7 - 无法从主机名确定 IP 地址，域名不存在

> ID：15086359
> 
> 赞同：2
> 
> 时间：2013-02-26T10:11:38.997
> 
> 标签：iis-7, dns, hosts

本地网站建立在服务器上。该网站`test.skien.kommune.no`映射到 127.0.0.1 该网站在 IIS 中配置，我添加了绑定。一切工作了一周，但今天我突然收到此错误消息：

```
The following error was encountered while trying to retrieve the URL: http://test.skien.kommune.no/

    Unable to determine IP address from host name "test.skien.kommune.no"

The DNS server returned:

    Name Error: The domain name does not exist.

This means that the cache was not able to resolve the hostname presented in the URL. Check if the address is correct.

Your cache administrator is webmaster. 
```

主机文件已配置`'127.0.0.1 test.skien.kommune.no'`

为什么它不使用主机文件中的本地 dns 映射？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-20T01:51:48.930

我发现代理设置是我的问题。

在 Windows“**控制面板**”中打开“ **Internet 选项**”并转到“**连接**”选项卡。单击“**局域网设置**”按钮。

如果勾选了“**使用代理服务器”，这也可能是您的问题。**如果本地主机域中有句点，则代理会启动并将 URL 视为完全限定的域名（它将无法找到）。

要排除它，请单击“**高级**”并将其添加到“**不使用代理...** ”列表中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-08-20T03:20:50.743

检查任何VPN。如果您在 chrome 中启用了任何 VPN，请禁用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-08T16:42:50.490

引用@leo est omnia 的回答，当勾选代理服务器时，您的浏览器可能会将您的虚拟主机视为完全合格的域。

除了答案之外，您还可以为正在使用的浏览器设置这些设置，例如“Chrome”：设置 => 高级设置 => 网络 => 更改代理设置 => 连接 => 局域网设置 => 取消选中使用代理服务器。

此外，如果您在“httpd.conf”文件中进行了一些更改，如果您为本地 apache 文件的默认路径提供了目录路径的“\”反斜杠，请改用“/”正斜杠，apache 会读取它linux类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-05T05:52:20.307

**这就是整个故事** 你不应该使用代理你的代理可能是通过浏览器扩展发生的，或者你可能在系统设置中保存了一些东西

# javascript - PhantomJS 节点 - page.open - 无法跟踪多个页面

> ID：15086360
> 
> 赞同：1
> 
> 时间：2013-02-26T10:11:44.400
> 
> 标签：javascript, node.js, phantomjs

我正在使用[Phantom Node](https://github.com/sgentle/phantomjs-node)与 PhantomJS 连接节点。我正在尝试并行打开页面，但问题是`page.open`回调函数不会传回对页面的引用，因此我无法知道哪个页面已完成。

**相关代码**

```
self.queue[j].page.open.call( self.queue[j].page, rows[i].url, function( status )
{
   console.log( this ) // <-- returns undefined
   // So how do I keep track of which pages have finished loading?
   // The only variable I have available here is `status`
}); 
```

**完整功能代码：**

```
SnapEngine.prototype.processSnaps = function( rows, type )
{
var self = this;

if ( ! rows || rows.length === 0 ) return true;

for( var i = 0; i < rows.length; i++ )
{
    // If queue is full, stop processing and wait for next snap engine iteration
    if ( self.getAvailableSizeInQueue() <= 0 )
    {
        self.logger.info( 'Queue is full for signature snap processing' );
        return true;
    }

    // Snapshots are processed by url, if multiple duplication urls are requested, all are updated after one of them is complete
    // So if a url is already being processed, don't reprocess it
    if ( self.findUrlInQueue( rows[i].url ) !== false )
    {
        self.logger.info( 'URL already being processed', url );
        continue;
    }

    for( j = 0; j < self.queue.length; j++ )
    {
        // Find an unused page object
        if ( self.queue[j] && self.queue[j].hasOwnProperty( 'page' ) && ( ! self.queue[j].page.url || self.queue[j].page.url == '' ))
        {
            self.logger.info( 'Opening URL in browser', rows[i].url );

            // Start loading page
            self.queue[j].page.open.call( self.queue[j].page, rows[i].url, function( status )
            {
                // ===== ISSUE HERE =====
                var url = this.url; // <-- this is undefined
                // ======================

                self.resetPage( self.queue[ index ]);

                if ( status === 'success' )
                {
                    self.updateStatus( url, 'ready' );
                }
                else
                {
                    self.updateStatus( url, 'failed' );
                }

                self.removeUrlFromQueue( url )
            });

            self.updateStatus( rows[i].url, 'processing' );
            break;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:16:04.817

试试这样：

我添加了一个直接在打开页面的部分周围执行的函数，从而引入了一个新的范围。因此`url`不会被破坏（你不能使用`rows[i].url`，因为我会在你的回调被调用之前改变）并且将在你的回调中可用。

```
for( j = 0; j < self.queue.length; j++ )
{
    // Find an unused page object
    if ( self.queue[j] && self.queue[j].hasOwnProperty( 'page' ) && ( ! self.queue[j].page.url || self.queue[j].page.url == '' ))
    {
        self.logger.info( 'Opening URL in browser', rows[i].url );
        (function() {
            var url = rows[i].url;
            // Start loading page
            self.queue[j].page.open.call( self.queue[j].page, url, function( status )
            {                   
                self.resetPage( self.queue[ index ]);

                if ( status === 'success' )
                {
                    self.updateStatus( url, 'ready' );
                }
                else
                {
                    self.updateStatus( url, 'failed' );
                }

                self.removeUrlFromQueue( url )
            });
        })();

        self.updateStatus( rows[i].url, 'processing' );
        break;
    }
} 
```

# ios - 如何在添加到 XIB 中的 UItableviewcontroller 的 tableview 中配置 tableviewcell？

> ID：15086363
> 
> 赞同：0
> 
> 时间：2013-02-26T10:11:50.877
> 
> 标签：ios, uiviewcontroller, uitableview, nib

我在 XIB 内的 uiviewcontroller 内使用 tableview。因为控制器不是 UItablecontroller，所以我不能直接配置单元格。如果我拖入一个表格视图单元格，我可以使用单元格标识符等对其进行配置，但 XIB 不使用我的表格视图单元格。我如何加入他们？我宁愿不使用代码，因为这似乎违反了工作流程的直觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:25:24.377

如果您使用 Storyboard，您可以直接在 VC 中添加自定义单元并进行配置。但是，如果您使用的是 xib，您必须创建一个自定义单元格类并以编程方式加载它们，或者在单独的 xib 中创建一个带有自定义单元格的自定义类，然后从 xib 加载自定义单元格，甚至您只需创建一个带有简单自定义的 xib表格单元格并从 xib 加载。在 UITableView 上参考苹果文档

据我了解，您需要在代码中使用自定义单元格。如果您不使用情节提要，请尝试使用它。在这里，我为自定义单元格创建了一个自**定义****类**，并在 xib 中添加了自定义单元格。我添加了一个单独的 xib，在 xib 中拖放 UITableViewCell（如果存在，请删除任何视图）。现在单击您刚刚添加的单元格，在**身份检查器中将****类名称**更改为您创建的**自定义类的名称。**选择**文件所有者**并更改其**类**************到您需要自定义单元格的类的名称。（这表明您的单元格将用于连接 tableview 的委托和数据源的特定类）。现在在你想要你的单元格的类中，添加一个 UITableViewCell 类型的 IBOutlet。将此连接到您在 xib 中创建的单元格。************

 ******```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"CustomCell";
     YourCustomCell *cell = (YourCustomCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
            if (!cell)
            {
                [[NSBundle mainBundle] loadNibNamed:@"YourCustomCell"
                                              owner:self
                                            options:nil];
                cell = self.yourOutletCell;
                self.yourOutletCell = nil;
            }
} 
```

如果您正在使用 xib 加载并且如果您有多个 xib 的自定义单元格，则可以通过 xib 名称加载它们，如下所示

```
NSArray *topLevelObjects;
topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"YourCustomCell" owner:self options:nil];
 for (id currentObject in topLevelObjects)
       {
             if ([currentObject isKindOfClass:[UITableViewCell class]])
               {
                 cell =  (YourCustomCell *) currentObject;
                    break;
                }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:19:26.880

如果是静态单元格，可以用 Outlet 指向这个单元格，然后在`cellForRowAtIndexPath`******

# eclipse - 在服务器上运行 java 应用程序时出错

> ID：15086364
> 
> 赞同：0
> 
> 时间：2013-02-26T10:11:50.727
> 
> 标签：eclipse, tomcat

我尝试运行应用程序，但在 Eclipse Tomcat、Eclipse Jetty 中出现相同的错误，当我使用 ant 时，我复制到 localhost tomcat 7 时出现此错误。

```
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.listener.StartupListener - Initializing context...
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.listener.StartupListener - Remember Me Enabled? false
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.listener.StartupListener - Password Encoder: org.springframework.security.providers.encoding.ShaPasswordEncoder
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.listener.StartupListener - Populating drop-downs...
DEBUG localhost-startStop-1 com.itfuture.okapi.dao.hibernate.LookupDaoHibernate - Retrieving all role names...
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.listener.StartupListener - Drop-down initialization complete [OK]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.filter.LocaleFilter - Initializing filter 'localeFilter'
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.filter.LocaleFilter - Filter 'localeFilter' configured successfully
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialCostRepReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialCostRepReportController.officeTrialCostRepReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialRepertoriumReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialRepertoriumReportController.officeTrialRepertoriumReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.ClosureTrialReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.ClosureTrialReportController.closureTrialReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsNegotiatorActionQtyController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsNegotiatorActionQtyController.officeTrialsNegotiatorActionQtyReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.UserReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.UserReportController.userReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsEndSuspendReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsEndSuspendReportController.officeTrialsEndSuspendReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialCostRepReportRaiffController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialCostRepReportRaiffController.officeTrialCostRepReportRaiff(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialOperationReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialOperationReportController.officeTrialOperationReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsExport2UpdateReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsExport2UpdateReportController.officeTrialsExport2UpdateReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsDebtsPaymentReportRaiffController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsDebtsPaymentReportRaiffController.officeTrialsDebtsPaymentReportRaiff(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialBailiffReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialBailiffReportController.officeTrialBailiffReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialExecutionListReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialExecutionListReportController.officeTrialExecutionListReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsLackOfFormalController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsLackOfFormalController.officeTrialsLackOfFormalReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsNegotiatorActionQtyRaiffController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsNegotiatorActionQtyRaiffController.officeTrialsNegotiatorActionQtyReportRaiff(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialCostReportRaiffController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialCostReportRaiffController.officeTrialCostReportRaiff(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialExecutionListReportRaiffController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialExecutionListReportRaiffController.officeTrialExecutionListReportRaiff(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialRepertoriumReportRaiffController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialRepertoriumReportRaiffController.officeTrialRepertoriumReportRaiff(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsExport1UpdateReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsExport1UpdateReportController.officeTrialsExport1UpdateReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialCostReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialCostReportController.officeTrialCostReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsToEPUController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsToEPUController.officeTrialsToEPUReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsDebtsPaymentReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsDebtsPaymentReportController.officeTrialsDebtsPaymentReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialNoteReportController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialNoteReportController.officeTrialNoteReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
DEBUG localhost-startStop-1 com.itfuture.okapi.webapp.controller.OfficeTrialsIneffectiveExecutionCostController - Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsIneffectiveExecutionCostController.officeTrialsIneffectiveExecutionCostReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:17:52.673

我不确定这是一个错误？

```
com.itfuture.okapi.webapp.controller.OfficeTrialsDebtsPaymentReportController -
Found action method [public org.springframework.web.servlet.ModelAndView com.itfuture.okapi.webapp.controller.OfficeTrialsDebtsPaymentReportController.officeTrialsDebtsPaymentReport(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) `throws java.lang.Exception]` 
```

它报告了一个*可以*引发异常的方法签名。这并不意味着它*正在*引发异常。

# c++ - App Verifier 错误模式“fafa”的意义是什么？

> ID：15086365
> 
> 赞同：0
> 
> 时间：2013-02-26T10:11:52.740
> 
> 标签：c++, windows, application-verifier

我的程序在应用程序验证程序中崩溃，我不完全理解崩溃。我有一个缓冲区，它是根据文件中的字节数动态分配的：

```
DWORD dwSizeBytes = (DWORD)liSize.QuadPart+2;
TCHAR* JSONBufferW = new TCHAR [dwSizeBytes/sizeof(TCHAR)];
memset(JSONBufferW, 0, dwSizeBytes); 
```

哪里`dwSizeBytes`（我可以在故障转储中看到）是`38`. 在此之后，我从文件中读取了一些数据：

```
if(!ReadFile(hFile, JSONBufferW, dwSizeBytes, &dwSizeBytes, NULL))
{
    status = GetLastError();
    TRACE_ERROR(g_hTrace, "ReadFile() failed for %S, error code=%d", strCompletePath, status);
} 
```

这指定`36`将`dwSizeBytes`缓冲区中的最后两个字节保留为 NULL，以便缓冲区以 NULL 终止。但是，在应用程序验证程序下，当我尝试`std::wstring`从缓冲区构造 a 时，这会导致崩溃。

当我在 windbg 中查看缓冲区的分配块时，我看到它看起来像这样：

```
0:022> dd 0x00000000`07560fd0-0x48 0x00000000`07560fd0
00000000`07560f88  00001000 00000000 abcdbbbb 00000000
00000000`07560f98  07191000 00000000 00000026 00000000
00000000`07560fa8  00001000 00000000 00000000 00000000
00000000`07560fb8  00000000 00000000 0025a230 00000000
00000000`07560fc8  00001000 dcbabbbb 0022007b 
```

请注意，`0x26`这表明我的缓冲区应该是 38 大小。现在我看看它自己的缓冲区，看看：

```
0:022> dc 0x00000000`07560fd0
00000000`07560fd0  0022007b 006f006d 00650064 003a0022  {.".m.o.d.e.".:.
00000000`07560fe0  006d0022 006e0061 00610075 0022006c  ".m.a.n.u.a.l.".
00000000`07560ff0  000a007d d0d0fafa d0d0d0d0 d0d0d0d0  }............... 
```

这表明我的缓冲区已被填充，`ReadFile`但`NULL`应该留在的`buf[36]`地方`buf[37]`（记住 memset）有一个应用程序验证器填充代码`fafa`（记住 unicode 字节被翻转，所以`d0d0`实际上是在`fafa`.

我看过[这里](http://blogs.msdn.com/b/jiangyue/archive/2010/03/16/windows-heap-overrun-monitoring.aspx)：它向我展示了应用程序验证程序如何在分配后留下这些填充代码。但是`fafa`没有列出来，那是什么意思呢？为什么它会在`memset`应该清除的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:42:58.640

I don't have a source for this at the moment, but one of the features AppVerifier does is completely fills your buffer with a pattern prior to invoking ReadFile. You request to read 38 bytes, AppVerifier fills your buffer with 38 bytes of pattern, and ReadFile only reads 36 bytes from the file. Thus your last 2 bytes are fill pattern rather than the expected NULL characters.

# android - 文本与 SpannableString 对齐

> ID：15086371
> 
> 赞同：1
> 
> 时间：2013-02-26T10:12:08.000
> 
> 标签：android, android-layout

我有一个带有文本和图像的 TextView。为了让它工作，我为该 TextView 设置了一个 SpannableString，如下所示。我的图像显示正确，但文本将与图像底部对齐，但 TextView 的重力是 center_vertical。我知道我可以用单独的 TextView 和 ImageView 轻松解决这个问题，但是我想用 1 TextView 解决它，因为它是文本的一部分，并且图像可以在文本中的任何地方。

```
ss = new SpannableString(getString(R.string.MyString) + " $");
ss.setSpan(new ImageSpan(ctx, R.drawable.myIcon), ss.length() - 1, ss.length(), 0);
tv.setText(ss); 
```

我的 TextView 看起来像

```
<TextView
    android:id="@+id/myTextView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:37:02.563

如果您在 android TextView 中使用[CoupoundDrawable ，而不是可扩展的 textview 会更好。](http://developer.android.com/reference/android/widget/TextView.html#attr_android:drawableEnd)[这个](https://stackoverflow.com/questions/8318765/how-do-i-use-a-compound-drawable-instead-of-a-linearlayout-that-contains-an-imag)链接有关于如何使用它的答案。

# c# - 从受保护的覆盖无效中取消订阅事件处理程序

> ID：15086374
> 
> 赞同：0
> 
> 时间：2013-02-26T10:12:19.767
> 
> 标签：c#, wpf

是否可以从受保护的覆盖无效中取消订阅事件处理程序？

```
 protected override void OnViewLoaded(object sender, ViewLoadedEventArg e)
    {
        base.OnViewLoaded(sender, e);
        list = VisualTreeUtil.FindFirstInTree<ListView>(Application.Current.MainWindow, "ListView");
        ConfigureAndSuperviseInputControls(this.list);
        ScrollViewer scroll = VisualTreeUtil.FindFirstInTree<ScrollViewer>(this.list);
        scroll.ScrollChanged+=new ScrollChangedEventHandler(scroll_ScrollChanged);       
    }

  void scroll_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {  
        ConfigureAndSuperviseInputControls(this.list);
        ScrollViewer sb = e.OriginalSource as ScrollViewer;
        if (sb.ContentVerticalOffset==sb.ScrollableHeight)
        {
           scroll.ScrollChanged-=new ScrollChangedEventHandler(scroll_ScrollChanged); 
        }
    } 
```

我的问题是我无法访问 scroll_ScrollChanged 方法中的滚动对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:15:32.323

Sender 应该是对您需要的对象的引用。

```
protected override void OnViewLoaded(object sender, ViewLoadedEventArg e)
    {
        base.OnViewLoaded(sender, e);
        list = VisualTreeUtil.FindFirstInTree<ListView>(Application.Current.MainWindow, "ListView");
        ConfigureAndSuperviseInputControls(this.list);
        ScrollViewer scroll = VisualTreeUtil.FindFirstInTree<ScrollViewer>(this.list);
        scroll.ScrollChanged+=new ScrollChangedEventHandler(scroll_ScrollChanged);       
    }

  void scroll_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {  
        ConfigureAndSuperviseInputControls(this.list);
        ScrollViewer sb = sender as ScrollViewer;
        if (sb.ContentVerticalOffset==sb.ScrollableHeight)
        {
           scroll.ScrollChanged-=new ScrollChangedEventHandler(scroll_ScrollChanged); 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:16:56.380

此代码未经测试，但您不能简单地将 sender 对象转换为 ScrollViewer 并取消订阅这样的事件：

```
protected override void OnViewLoaded(object sender, ViewLoadedEventArg e)
    {
        base.OnViewLoaded(sender, e);
        list = VisualTreeUtil.FindFirstInTree<ListView>(Application.Current.MainWindow, "ListView");
        ConfigureAndSuperviseInputControls(this.list);
        ScrollViewer scroll = VisualTreeUtil.FindFirstInTree<ScrollViewer>(this.list);
        scroll.ScrollChanged+=new ScrollChangedEventHandler(scroll_ScrollChanged);       
    }

  void scroll_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {  
        ConfigureAndSuperviseInputControls(this.list);
        ScrollViewer scroll = (ScrollViewer)sender;
        if (scroll.ContentVerticalOffset==scroll.ScrollableHeight)
        {
           scroll.ScrollChanged-=new ScrollChangedEventHandler(scroll_ScrollChanged); 
        }
    } 
```

# vba - 如何在 VBA 中创建正确的超链接？

> ID：15086378
> 
> 赞同：1
> 
> 时间：2013-02-26T10:12:34.760
> 
> 标签：vba, excel

我有以下 VBA 行，它应该在 Excel 工作簿中创建指向另一个工作表的超链接：

```
Dim rMyCell As Range 
Sheets("All_Tables").Hyperlinks.Add Anchor:=Selection, Address:="Employees!" & rMyCell.Address, _
        TextToDisplay:="Link" 
```

从此代码创建的超链接在单元格描述中的字母之间放置了美元符号（例如：）`Employees!$A$1`。我如何摆脱这些美元？超链接不适用于它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:42:51.353

要使用相对地址而不是绝对地址（带美元符号），请使用如下：

```
rMyCell.Address(false,false) 
```

第一个参数是选择是否应该将 Row 显示为绝对。第二个参数是选择列是否应显示为绝对。

如果您`.Address`在 VB 编辑器中按 F1，您将获得有关它的更多信息。

# c++ - 针对 Visual Studio 2012 本机 C++ 测试从命令行运行 mstest

> ID：15086380
> 
> 赞同：28
> 
> 时间：2013-02-26T10:12:38.407
> 
> 标签：c++, visual-studio-2012, mstest

我有一个带有许多本机 c++ 测试项目的 Visual Studio 2012 解决方案。我可以使用测试资源管理器选项卡在 Visual Studio 2012 中正确并成功地运行所有这些。

但是，从命令行运行时，我无法运行测试。

按照文档，我一直在运行以下命令行

```
mstest /testcontainer:PathToTestProject\Win32\Release\testproject.dll 
```

我也需要跑

```
mstest /testcontainer:PathToTestProject\x64\Release\testproject.dll 
```

用于测试64位版本的代码。

当我运行这些命令行时，我收到以下错误消息。

> Microsoft (R) 测试执行命令行工具版本 11.0.50727.1 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 正在加载 PathToTestProject\Win32\Release\testproject.dll... PathToTestProject\Win32\Release\testproject.dll 无法加载测试容器 PathToTestProject\Win32\Release\testproject.dll' 或其依赖项之一。如果您将测试项目程序集构建为 64 位程序集，则无法加载它。构建测试项目程序集时，为平台选择“任何 CPU”。要在 64 位处理器上以 64 位模式运行测试，您必须更改主机选项卡中的测试设置以在 32 位进程中运行测试。错误详细信息：无法加载文件或程序集 'file:///c:\PathToTestProject\Win32\Release\testproject.dll' 或其依赖项之一。该模块应包含程序集清单。

该代码是本机 c++ 并且有两种构建配置，一种在 Win32 平台上，另一种在 x64 平台上。我不能有 AnyCPU 平台配置。为了能够从命令行运行测试，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-28T10:38:01.400

经过大量搜索，我终于 [在这里](http://msdn.microsoft.com/en-gb/library/vstudio/ms253138%28v=vs.110%29.aspx)发现了一个非常隐藏的 msdn 文档页面，其中说明了 mstest 与不同测试项目类型的兼容性。事实证明，mstest 与本机单元测试不兼容（msdn 很高兴在一个容易找到的位置记录这一点）。相反，对于本机单元测试项目，您需要使用运行的 Visual Studio 测试 (vstest.console.exe) 而不是 msbuild。

例如

```
vstest.console.exe /Platform:x64 PathToTestProject\x64\Release\testproject.dll 
```

# c++ - 如何使我自己的“常量数据”不可修改？

> ID：15086386
> 
> 赞同：0
> 
> 时间：2013-02-26T10:12:52.990
> 
> 标签：c++, reference, constants

我对自己的**`const`**属性有问题。由于功能，我无法完全保护我的 const 数据。函数可以修改一切。

**`const reference`**是一件可怕的事情，因为它需要一个地址；如果它是 const 变量的地址，则很可能变量数据仍然可以更改或修改。我的数据是可写的。解析器无法阻止（忽略）这种代码，因为它在 C++ 中是完全合法的。

```
scanf("%d", &const_var); 
```

**如何锁定我的数据并使我的 const 数据不可修改（或不可写）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:25:28.953

在这种情况下...

```
scanf("%d", &foo); // Out of range!!! 
```

...`foo`确实可以修改，或者几乎可以发生任何其他事情。编译器无法捕捉到这一点，因为`scanf`使用老式 c`varargs`允许传递任意数量的任何类型的参数，而无需进行任何检查。没有尝试确保传递的参数是地址，更不用说 int 的地址，当然也不是非常量 int 的地址。

为了更安全的 C++ 代码，请`printf/sscanf`完全避免使用函数族。

Lint 或其他一些源代码检查器可以在这里提供帮助。我还没有尝试过这个特定的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:24:37.813

您无法直接保护自己免受此类情况的影响。如果将常量放在可写内存中，则可以始终获取该常量的地址并以一种或另一种方式对其进行修改。但请记住，该标准说，修改常量值被认为具有未定义的行为。

如果您希望常量不可修改，您可以制定解决方法并使用宏：

```
#define foo 100 
```

`foo`这是一个技巧，因为它会将源中所有出现的转换为`100`，但是没有人能够在运行时修改它的值（根据定义，100 是 100）。

但是，我会避免使用宏。您可以改用另一种解决方法：定义一个函数：

```
constexpr int FooValue()
{
    return 100;
} 
```

也没有人能够修改它，但是这个解决方案允许您在类或命名空间中嵌入这样的“常量”。如果您使用可以处理 C++11 的编译器，则使用 constexpr 将允许您在任何地方输入此函数，您可能在其中插入了一个常量，例如：

```
int array[FooValue()]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:50:31.447

C++ 不是一种安全的语言。在 C++ 中，你只能保护自己免受意外，而不是[*背信弃义*](http://dictionary.reference.com/browse/perfidy)。如果用户想要更改他们不应该更改的内容，就这么简单：

```
void SomeFunc(const Obj &dontChange)
{
  Obj &change = const_cast<Obj &>(dontChange);

  change.X = ...;
} 
```

您无法保护自己免受*决心*违反您的代码与他们的代码之间的合同的用户的伤害。您只能保护自己免受意外试图破坏合同的用户的伤害。你甚至不能保护你的类的私有成员，因为他们可以简单地将类型转换为其他东西并直接戳内存。

你最好的选择是：别担心。如果用户对某个变量做了错误的事情，那么因此发生的任何损坏都是他们的错。

# iphone - 避免 Facebook 单点登录

> ID：15086390
> 
> 赞同：2
> 
> 时间：2013-02-26T10:13:02.637
> 
> 标签：iphone, ios, facebook

我们已经构建了一个 iPad 应用程序，该应用程序主要由孩子们在父母的 iPad 上玩。现在我们要实现在 Facebook 上分享照片的功能。唯一的困难是我们不希望孩子们自动将照片张贴在他们父母的墙上。因此，必须强制儿童使用自己的帐户登录。

我们可以按照这里的描述实现： [Disable Single Sign On (SSO) in Facebook IOS SDK](https://stackoverflow.com/questions/6435578/disable-single-sign-on-sso-in-facebook-ios-sdk)

只有 Facebook 似乎拒绝不使用 SSO 的应用程序，如下所述：http: [//facebook.stackoverflow.com/questions/10856344/appcenter-rejection-due-to-sso](http://facebook.stackoverflow.com/questions/10856344/appcenter-rejection-due-to-sso)

还有其他避免 SSO 的方法吗？还是 Facebook 只有在应用中心内才会拒绝该应用？

注意：似乎所有 Facebook 应用程序都已添加到应用程序中心？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-26T10:41:27.243

您的应用程序中存在比 SSO 更大的缺陷。您忘记了儿童不得拥有 Facebook 帐户。Facebook 注册的最低年龄是 13 岁，因此除非您的应用程序面向青少年和老年人，否则您应该完全放弃 Facebook 集成。

# php - PHP - 防止垃圾邮件泛滥和带宽过大的方法

> ID：15086392
> 
> 赞同：0
> 
> 时间：2013-02-26T10:13:08.623
> 
> 标签：php, spam, bandwidth, flooding

嗨

，我处于原型阶段。

对于下面的场景，我想与您分享我的计划，如果我的计划有意义，或者有没有更好的方法来实现您可能推荐的我的要求，我想请教您的意见。

谢谢，关于

**场景**

垃圾邮件机器人可能会困扰我的表单。（邮件、评论、文章分享） 在验证阶段，我可以通过已知的方法检测它是否是垃圾邮件发送者。（验证码、时间限制、秘密问题、隐藏表单元素等）但是如果垃圾邮件男孩不断尝试并尝试怎么办？它无法验证和执行表单目标，但会不断消耗带宽。

**我的要求**

不仅防止执行表单目标，还防止持续消耗带宽。

**我的计划**

使用会话能力，计算特定ip在有限时间内的尝试次数。如果尝试次数在 x 分钟内大于 n，则将访问者重定向到完全不同的 url 或在运行时使用 php 代码禁止访问者 ip。

**我的问题**

1.  将垃圾邮件发送者重定向到完全不同的网址是否合乎逻辑？如果是，您是否知道任何欢迎垃圾邮件发送者 IP 以将其添加到黑名单的网页？在其他方面，我知道这种活动是不道德的，所以我不能应用这种重定向。

2.  是否可以在我的相关验证页面中在 php 运行时禁止 ip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:17:32.180

1）对我来说这似乎不合逻辑。例如，想象一下试图通过您的验证码的蛮力机器人。很可能它甚至不会在网络浏览器中运行。如果您发送重定向标头，它可能会忽略它们而不加载目标页面。如果你真的需要节省带宽，你可以简单地打印空白页（例如你可以使用`exit()`）

2）可以随时禁止ip，你总是有`$_SERVER['REMOTE_ADDR']`变量，如果你决定禁止ip，你可以将它添加到数据库（或文件）中。每当需要验证某人时，您都可以在数据库中查询他们的 ip。

# alfresco - Alfresco 社区企业功能比较

> ID：15086396
> 
> 赞同：10
> 
> 时间：2013-02-26T10:13:16.500
> 
> 标签：alfresco

我见过[这个问题](https://stackoverflow.com/questions/5256425/what-is-the-difference-between-alfresco-community-edition-and-alfresco-enterpris)，但答案根本不够好。我在网上搜索过，可以找到主要区别的清晰列表。

我特别惊讶地看到上述链接中的矛盾，它只有 4 个简短的答案。

所以问题是，除了支持之外，Alfresco 社区版和企业版（当然对于当前版本）之间的（所有）区别是什么？

企业版中是否有社区版中没有的功能或技术特性？

我觉得很奇怪，很难得到一个清晰的清单。从商业角度来看，查看论坛以找到这个答案并不是一个严肃的选择。

直到现在，我发现[这个链接](http://www.slideshare.net/alfresco/ecm-decision-matrix-deciding-between-alfresco-community-edition-alfresco-enterprise-edition-and-traditional-proprietary-ecm)很有用，但它是从 2009 年开始的。

特别是，我发现平台支持很有趣，社区版只支持灯的东西：

*   Linux
*   MySQL
*   雄猫
*   开放式LDAP
*   火狐

企业版支持：

*   视窗
*   SQL 服务器
*   网络逻辑，WebSphere
*   AD/Kerberos
*   IE 和 Safari

显然，这些功能仅在企业版中可用：

JMX 监控

*   运行时管理：那到底是什么？那么社区版有什么内容呢？
*   运行时索引一致性检查和更新：那么社区版中有什么？
*   高性能和可用性：如何实现以及社区版中的内容是什么？
*   存储策略
*   开源和专有技术堆栈支持：哪些是准确的？社区版支持哪些？

如果有人能指导我认真记录这些差异，那就太好了。

我也浏览了 wiki，但在那里找不到我的问题的答案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T01:53:18.990

Enterprise 和 Community 之间的差异因版本而异，主要对管理员可见。我们在中型到超大型环境中看到或保持两种 Alfresco 的风味，我想说这或多或少是品味和预算的问题，什么是最适合您的决定/版本。对于这两个版本在生产环境中运行 Alfresco 来说，基础设施和 Java 方面的优秀技能是非常可取的。技术差异并不像无法为用户提供非常相似的功能那么显着 - 因此，如果您确实在做出决定，您应该专注于一个好的技术合作伙伴、支持服务，也许您只能获得官方的事实企业订阅中的补丁，而不是社区中的补丁。BTW Alfresco Enterprise 不是开源的，但这并不是大多数最终用户真正感兴趣的地方。您可以作为订阅客户访问该代码，但它不是公开的/不可访问的。

功能的主要区别已经或多或少地命名：

1.  行政

    *   Enterprise 在管理 Web GUI 中有更多视图和设置。在社区中，您只能从命令行访问大多数配置。这可能是一个限制，但在现实生活中管理员更喜欢命令行和脚本自动化。
    *   Enterprise 允许您在运行时更改一些 Alfresco 设置（大多数设置仍需要重新启动）。有些可以在 GUI 中更改，更多可以在 jmx 界面中更改。您还可以停止和启动 CIFS 协议服务器等子系统。我们使用此功能将系统切换为只读模式。这一点是指“运行时管理”。对于大多数配置更改，社区需要重新启动服务。可以通过像 groovy 这样的高级脚本或实现模块来解决这个问题。
2.  索引

    *   运行时索引一致性检查和更新不是预期的自我修复功能。您必须了解（至少现在）即使在企业环境中也必须不时地重新创建 Alfresco 索引，并且最好专注于如何加快重新创建或如何设置备用索引而不是狩猎的好策略使用检查和更新方法失败的索引事务。对于主要的文档模型更改，无论如何您都需要重新创建索引。
3.  高性能和可用性

    *   这主要是社区中不再提供的集群和复制功能。它类似于 MS 集群：由于缺少某些概念，因此需要做很多工作以提高可用性。就复杂性而言，价格很高，最终可能会失去稳健性。即使有企业支持，保持露天集群运行也是一项艰巨的工作——所以你需要很好的论据，为什么要这样做。但当然：它是可能的和可用的！高性能：应该没有任何区别，如果 - 我对解释非常好奇。
4.  技术栈

    *   主要区别在于数据库支持。在社区中，您只能在 MySQL 和 Postgres 之间进行选择（社区没有 Oracle 或 MS SQL）。所有其他技术都独立于企业或社区（AD、Kerberos、操作系统、浏览器……）
    *   Java Container：我相信超过 95% 的 Alfresco 安装在 tomcat 中运行。这就是记录、测试和扩展的配置。使用 WebLogic 或 WebSphere 不会给您带来任何附加价值，除了新的挑战——恰恰相反：您必须自己解决大多数问题，而不能从其他人的经验中受益。

存储策略：我不太确定，如果社区中不再提供内容存储选择器/存储策略，我应该检查 4.2.x，但它在 3.x 版本中存在。

[编辑]：社区 4.2.x 中删除了存储策略：

```
NoSuchBeanDefinitionException: No bean named 'storeSelectorContentStoreBase' is defined 
```

如果确实需要此功能，则可以通过为 Community 编写模块来重新启用该功能。

问候

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T01:43:39.993

此页面解释了版本之间的区别： [https ://wiki.alfresco.com/wiki/Enterprise_Edition](https://wiki.alfresco.com/wiki/Enterprise_Edition)

此页面是差异的规范、全面列表。

如果您正在考虑企业订阅，并且您的问题无法通过您在该页面上找到的内容得到解答，您应该与您的客户代表联系。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T11:47:46.730

好吧，关于[JMX](http://wiki.alfresco.com/wiki/JMX)监控：

*   运行时管理：Alfresco 企业版允许在[Alfresco 子系统](http://wiki.alfresco.com/wiki/Alfresco_Subsystems#JMX_.28Enterprise_only.29)上执行某些操作，而无需重新启动服务器。这使您可以在调试/开发以及在生产环境中进行更改时非常快速。您还可以访问支持 JMX Remoting 的 JMX 接口。
*   没有[一致性检查或更新](http://www.slideshare.net/alfresco/ecm-decision-matrix-deciding-between-alfresco-community-edition-alfresco-enterprise-edition-and-traditional-proprietary-ecm)，直到您重新启动服务器（在启动期间您必须验证/检查/重建您的索引）。alfresco.global.properties（或原始的 repository.properties 配置文件）中有一个选项。如果您在 Alfresco 社区索引中有一些不一致的地方，那么您将度过一段糟糕的时光 xD。
*   [Alfresco Enterprise 具有集群](http://www.slideshare.net/alfresco/06192008-high-availability-clustering-with-alfresco)架构的特定许可证，社区版不支持这些系统。[复制和集群 Alfresco](http://www.slideshare.net/Paul.D.Hampton/alfresco-scalability-and-performnce)是您可以实现的性能/可扩展性/可用性的主要改进之一。
*   [存储策略](http://wiki.alfresco.com/wiki/Content_Store_Selector)允许您在 Alfresco Enterprise 中使用 Content Store 选择器。您可以管理主要和次要文件存储，并在您的架构中映射/连接这些存储。Community Edition 一次只允许您使用一个内容存储。
*   这些包括 Alfresco 中的所有内容（Spring Framework、Apache-Lucene/Solr、Tomcat 等），因为有了 Enterprise 许可证，您还可以完全支持 Alfresco 包中的所有内容。[不同](http://www.alfresco.com/services/subscription/quality-assurance)之处在于社区基于每日构建，由社区支持，因此无法保证。企业支持帮助您解决在开发和生产环境中可能遇到的许多问题，不仅与 Alfresco 相关，还包括支持的平台（Windows/Linux）上的某些配置、您的 Web 应用程序服务器等。

希望能帮助到你。

# jquery - 如何制作一个 JQuery 滑块

> ID：15086398
> 
> 赞同：0
> 
> 时间：2013-02-26T10:13:24.537
> 
> 标签：jquery, slider

这就是我的想法：有四个图像，当单击一个时，一个面板会显示一些我想要的信息。当我单击另一张图片时，旧面板会消失，而新面板会在同一位置打开。我试过这样的事情：

```
$(document).ready(function(){
  $("#img1").click(function(){
    $("#panel").show("slow");
  });
});

<div id="panel1">
<img src="images/image1">
Some text
</div>

<img id="img1" src="some image">
<img id="img2" src="some image">

... 
```

但是这样，当我单击第二张图像时，旧面板不会消失，新面板会在第一个图像下打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:33:21.010

尝试这个：

给每个 CSS`.panel`类`panel`：

```
<div id="panel1" class='panel'>
<div id="panel2" class='panel'>
........... 
```

然后`hide the panelid`和`show the corresponding panel`：

```
$("#img1").click(function(){
   $('.panel').slideUp();
   $("#panel1").show('slow');
});

$("#img2").click(function(){
   $('.panel').slideUp();
   $("#panel2").show('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:20:34.637

用这个 ：

```
 $(document).ready(function(){
    $("#img1").click(function(){
    $(".image:visible").hide();
    $("#panel").show("slow");
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:20:44.423

当您不命令旧面板关闭时，您怎么能期望它关闭呢？

这是我要做的（未经测试）：

```
$(document).ready(function () {
  $('img').click(function () {
    var img = $(this);
    var panel = $('#panel');
    panel.hide();
    panel.html(img.data('info'));
    panel.show('slow');
  })
}); 
```

## html部分：

```
<img src="img1.jpg" data-info="information for the image" />
<img src="img2.jpg" data-info="information for the image" />
<img src="img3.jpg" data-info="information for the image" />
<div id="panel"></div> 
```

# ruby-on-rails - 带有 shoulda gem 的 rails 规范

> ID：15086401
> 
> 赞同：0
> 
> 时间：2013-02-26T10:13:42.303
> 
> 标签：ruby-on-rails, rspec

我有这个 adminuser 模型测试，我得到了这个结果和错误。有什么问题，我该如何解决它 **admin_user_spec.rb**

```
require 'spec_helper'

describe AdminUser do

  it { should allow_mass_assignment_of(:email) }
  it { should allow_mass_assignment_of(:password) }
  it { should allow_mass_assignment_of(:password_confirmation) }
  it { should allow_mass_assignment_of(:remember_me) }

end 
```

**结果：**

```
1) AdminUser 
     Failure/Error: it { should allow_mass_assignment_of(:password) }
     NoMethodError:
       undefined method `allow_mass_assignment_of' for #<RSpec::Core::ExampleGroup::Nested_1:0x007f8d58d5d3a0>
     # ./spec/models/admin_user_spec.rb:6:in `block (2 levels) in <top (required)>' 
```

**管理员用户.rb**

```
class AdminUser < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable, :lockable and :timeoutable
  devise :database_authenticatable, :trackable

  # :timeoutable, :lockable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

#  after_create { |admin| admin.send_reset_password_instructions }

  # def password_required?
  #   new_record? ? false : super
  # end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:18:50.663

我添加了

```
require 'shoulda/integrations/rspec2' 
```

这高于

```
require 'rspec/rails' 
```

在**spec_helper.rb**和问题解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:14:36.373

试一下...

```
require 'spec_helper'

describe AdminUser do

  it { should allow_mass_assignment_of(:email) }
  it { should allow_mass_assignment_of(:password).as(:admin) }
  it { should allow_mass_assignment_of(:password_confirmation) }
  it { should allow_mass_assignment_of(:remember_me) }

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:38:02.437

尝试添加

```
require 'shoulda-matchers'
require 'shoulda/matchers/integrations/rspec' 
```

在你的 spec_helper.rb 的顶部

# objective-c - 如何使用objective c将iwork文档转换为pdf

> ID：15086405
> 
> 赞同：0
> 
> 时间：2013-02-26T10:13:55.347
> 
> 标签：objective-c, cocoa, osx-snow-leopard

请帮助解决问题。

我想打印 iwork 文档，但没有使用 Objective c 直接打印它们。

因为我可以使用 Objective c 轻松打印 PDF 文件。

所以我想将 iwork 文档（页面、主题、数字）转换为 PDF。

有什么办法可以把文件转成PDF？？

像任何将 iwork 文档转换为 PDF 的 API 或其他东西一样。

谢谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:34:09.830

没有“iWork API”，如果那是您正在寻找的。您可能可以使用 AppleScript 驱动 iWork 应用程序来执行此操作，并且您可以通过查看[此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptableCocoaApplications)了解有关如何从 Objective-C 应用程序调用 AppleScripts/发送 AppleEvents 的更多信息。

注意：我发现从 Objective-C 发送 AppleEvents 很重要。我建议在开始编写Objective-C 代码以发送等效的AppleEvents 之前让您的脚本在本地运行（即用AppleScript 编写）。

# android - OpenCV：在 Android vs OSx 上运行相同代码的问题

> ID：15086407
> 
> 赞同：2
> 
> 时间：2013-02-26T10:13:56.450
> 
> 标签：android, opencv, template-matching, feature-descriptor

我使用 OpenCV 编写了简单的模板匹配程序，它在 Android 和 OSx 上产生了令人惊讶的不同结果。

**首先，看看我在做什么：**

```
 IplImage *image = cvLoadImage("test3a.png", -1);
  Mat templateMat(image);

  // detecting keypoints
  OrbFeatureDetector detector(500);
  std::vector<KeyPoint> templateKeypoints;
  detector.detect(templateMat, templateKeypoints);

  // computing descriptors
  Mat templateDescriptors;
  OrbDescriptorExtractor extractor;
  extractor.compute(templateMat, templateKeypoints, templateDescriptors);

  // matches
  BFMatcher matcher(cv::NORM_HAMMING2);
  std::vector<std::vector<DMatch> > matches;
  matcher.knnMatch(templateDescriptors, templateDescriptors, matches, 2); 
```

**现在接下来看看我得到了什么：**

在运行 Android 4.2.2 和 OSx 10.7(Lion) 的 Nexus i9250 上运行相同的代码段会得到以下结果：

> *   垫对象：在两个操作系统上都相同
>     
> *   要点：[在 Android 上][2]、[在 OSx 上][3]、[差异][4]
>     
> *   描述符：[在 Android 上][5]、[在 OSx 上][6]、[DIFFERENCE][7]
>     
> *   匹配项：[在 Android 上][8]、[在 OSx 上][9]、[差异][10]

**注意：** 如果我对这些文件进行排序，则没有区别；所以我没有得到的是，为什么我得到不同的排序结果？让它们按顺序排列是我的要求，因为我需要进一步计算。此外，在同一平台上运行相同的代码片段总是会产生相同的有序结果。

**Stackexchange 限制我的帐户在帖子中发布超过 2 个链接，因此请检查链接的评论。**

# delphi - 如何清除字符串列表中的指针？

> ID：15086408
> 
> 赞同：1
> 
> 时间：2013-02-26T10:13:57.183
> 
> 标签：delphi, delphi-7

我不明白下面的物体在哪里以及如何清除它们？

例如：

```
public

Alist: TStringlist;

..
procedure TForm1.FormCreate(Sender: TObject);
begin
Alist:=Tstringlist.Create;
end;

procedure TForm1\. addinstringlist;
var
i: integer;
begin

for i:=0 to 100000 do 
   begin
   Alist.add(inttostr(i), pointer(i));
   end;
end;

procedure TForm1.clearlist;
begin
Alist.clear;

// inttostr(i) are cleared, right? 

// Where are pointer(i)? Are they also cleared ?
// if they are not cleared, how to clear ?

end;

  procedure TForm1\. repeat;   //newly added
   var
   i: integer;
   begin
   For i:=0 to 10000 do
       begin
       addinstringlist;
       clearlist;
       end;
   end;   // No problem? 
```

我使用 Delphi 7。在 delphi 7.0 帮助文件中，它说：

```
AddObject method (TStringList)

Description
Call AddObject to add a string and its associated object to the list. 
AddObject returns the index of the new string and object.
Note:   
The TStringList object does not own the objects you add this way. 
Objects added to the TStringList object still exist 
even if the TStringList instance is destroyed. 
They must be explicitly destroyed by the application. 
```

* * *

在我的过程 Alist.add(inttostr(i), pointer(i)) 中，我没有创建任何对象。有没有物体？如何清除 inttostr(i) 和 pointer(i)。

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T10:25:57.237

不需要清除`Pointer(I)`，因为指针没有引用任何对象。它是一个存储为指针的整数。

建议：如果您不确定您的代码是否泄漏或不编写简单的测试并使用

```
ReportMemoryLeaksOnShutDown:= True; 
```

如果您的代码泄漏，您将收到关闭测试应用程序的报告。

* * *

不，您添加的代码不会泄漏。如果您想检查它，请编写如下测试：

```
program Project2;

{$APPTYPE CONSOLE}

uses
  SysUtils, Classes;

var
  List: TStringlist;

procedure addinstringlist;
var
  i: integer;
begin

for i:=0 to 100 do
   begin
   List.addObject(inttostr(i), pointer(i));
   end;
end;

procedure clearlist;
begin
   List.clear;
end;

procedure repeatlist;
var
   i: integer;

   begin
   For i:=0 to 100 do
       begin
       addinstringlist;
       clearlist;
       end;
   end;

begin
  ReportMemoryLeaksOnShutDown:= True;
  try
    List:=TStringList.Create;
    repeatlist;
    List.Free;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

尝试注释`List.Free`行以创建内存泄漏，看看会发生什么。

# objective-c - NSString 在执行 NSUTF8StringEncoding 时返回 NULL

> ID：15086410
> 
> 赞同：2
> 
> 时间：2013-02-26T10:14:08.733
> 
> 标签：objective-c, xcode, nsstring, nsstringencoding

以下是我的代码

```
NSString *res = [valueArray valueForKey:@"key"];
NSData *newdata=[res dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
res=[[NSString alloc] initWithData:newdata encoding:NSNonLossyASCIIStringEncoding];
nameTxt.text = [NSString stringWithFormat:@"%@",res]; // Assigning to textfield 
```

这工作正常。但有时它会返回 NULL 数据，主要是在字符串包含大数据时发生。

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:24:39.513

```
NSString *res = [valueArray valueForKey:@"key"]; 
```

这很有趣：`valueForKey:`在名为`...Array`. 宁可好像是一本字典？

```
NSData *newdata = [res dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]; 
```

从字符串创建原始 UTF8 编码数据始终有效：不需要`allowLossyConversion`.

```
res = [[NSString alloc] initWithData:newdata encoding:NSNonLossyASCIIStringEncoding]; 
```

将 UTF8 编码的原始数据转换为 ASCII 仅在 UTF8 不包含任何超出非常受限的 ASCII 范围的字符时才有效。否则`nil`返回。

这似乎是这段代码混淆的*唯一*原因：过滤掉非 ASCII 字符串。否则转换没有任何意义。

# f# - F#奇怪的代理重新初始化行为

> ID：15086415
> 
> 赞同：2
> 
> 时间：2013-02-26T10:14:20.047
> 
> 标签：f#, mailboxprocessor

我有一个封装在一个类中的 F# 3.0 代理：

```
type AgentWrapper() =
    let myAgent = Agent.Start(fun inbox ->
            let rec loop (state: int) =
                async {
                    let! (replyChannel: AsyncReplyChannel<int>) = inbox.Receive()
                    let newState = state + 1
                    replyChannel.Reply newState
                    return! loop newState
                }
            loop 0 )

    member private this.agent = myAgent

    member this.Send () = 
        this.agent.PostAndReply (fun replyChannel -> replyChannel) 
```

当我按如下方式向它发送消息时：

```
let f = new AgentWrapper ()
f.Send () |> printf "Reply: %d\n"
f.Send () |> printf "Reply: %d\n"
f.Send () |> printf "Reply: %d\n" 
```

我得到了预期的回应：

```
Reply: 1
Reply: 2
Reply: 3 
```

但是，如果我删除代理的 let 绑定并将其直接分配给 this.agent 属性：

```
type AgentWrapper() =

    member private this.agent = Agent.Start(fun inbox ->
            let rec loop (state: int) =
                async {
                    let! (replyChannel: AsyncReplyChannel<int>) = inbox.Receive()
                    let newState = state + 1
                    replyChannel.Reply newState
                    return! loop newState
                }
            loop 0 )

    member this.Send () = 
        this.agent.PostAndReply (fun replyChannel -> replyChannel) 
```

然后我得到回应：

```
Reply: 1
Reply: 1
Reply: 1 
```

我已经盯着这个看了好几个小时，我不明白为什么每次我调用 AgentWrapper.Send 时代理都会重新初始化。感觉 this.agent 每次我调用它时都会被重新分配（即表现得像一个方法，而不是一个属性）。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:22:14.923

> 感觉 this.agent 每次我调用它时都会被重新分配（即表现得像一个方法，而不是一个属性）。我错过了什么？

这正是发生的事情，并记录在规范中（以下是 18.13.1 的相关部分）

> 每次调用成员时都会评估静态和实例属性成员。例如，在下面，每次评估 C.Time 时都会评估成员的主体：
> 
> 类型 C () =
> 
> ```
> static member Time = System.DateTime.Now 
> ```

这与您的情况类似

# c# - 如何在foreach中反转列表？

> ID：15086419
> 
> 赞同：11
> 
> 时间：2013-02-26T10:14:27.613
> 
> 标签：c#, list

我有一个问题，我无法逆转以下内容`List`：

```
foreach (List<Foo> row in Items) 
{
    foreach (Foo item in row.Reverse())
    {
        ...
    }
} 
```

我总是得到错误：

> 类型 void 不可枚举

什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-26T10:16:12.613

[`List<T>.Reverse`](http://msdn.microsoft.com/en-us/library/5c6526tb.aspx)不*返回*任何内容 - 它会反转列表。

如果您想使用返回反向序列但*不*改变现有列表的[LINQ 版本，您可以使用：`Reverse`](http://msdn.microsoft.com/en-us/library/bb358497.aspx)

 *```
foreach (IEnumerable<Foo> row in Items) 
{
    foreach (Foo item in row.Reverse())
    {
        ...
    }
} 
```

或者也许更清楚：

```
foreach (List<Foo> row in Items) 
{
    // We want to use the LINQ to Objects non-invasive
    // Reverse method, not List<T>.Reverse
    foreach (Foo item in Enumerable.Reverse(row))
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-26T10:16:13.400

[`List<T>.Reverse()`](http://msdn.microsoft.com/en-us/library/b0axc2h2.aspx)进行*就地*反转。这意味着它会更改您的原始列表。

所以，你会像这样使用它：

```
foreach (List<Foo> row in Items) 
{
    row.Reverse();
    foreach (Foo item in row)
    {
        ...
    }
} 
```

如果您不想更改原始列表，则必须[`Enumerable.Reverse`](http://msdn.microsoft.com/en-us/library/bb358497.aspx)明确调用：

```
foreach (List<Foo> row in Items) 
{
    foreach (Foo item in Enumerable.Reverse(row))
    {
        ...
    }
} 
```

无法`Enumerable.Reverse`在扩展方法语法中使用的原因是：扩展方法不隐藏/覆盖实例方法并且`List<T>`恰好已经有一个`Reverse`方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T10:16:13.867

```
foreach (List<Foo> row in Items) 
{
    row.Reverse()
    foreach (Foo item in row)
    {
        ...
    }
} 
```

`Reverse`更改列表中的顺序 - 它不会返回项目顺序相反的新列表。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-26T10:17:24.863

[`List<T>.Reverse()`](http://msdn.microsoft.com/en-us/library/b0axc2h2.aspx)是一个*就地*反转，它不会返回一个*新的 list*。它会更改您的**原始**列表。

> 反转整个`List<T>`.

您需要`row.Reverse();`在您的第一个 foreach 语句中使用。像;

```
foreach (List<Foo> row in Items) 
{
    row.Reverse();
    foreach (Foo item in row)
    {
        //
    }
} 
```

这是一个**[演示](http://ideone.com/1g2hTO)**。

如果您不想更改*原始列表*，可以使用**[Enumerable.Reverse](http://msdn.microsoft.com/en-us/library/bb358497.aspx)**方法代替。

> 反转序列中元素的顺序。

```
foreach (Foo item in Enumerable.Reverse(row))
{
    //
} 
```

这是使用方法的相同**[DEMO 。](http://ideone.com/9UH9re)**`Enumerable.Reverse<T>`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-26T10:16:39.823

`List<T>.Reverse`什么都不要退货啦！

```
foreach (IEnumerable<Foo> row in Items) 
{
    row.Reverse();
    foreach(Foo item in row)
    {

    }

} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-26T10:17:43.850

List.Reverse() 是一个带有 void 签名的方法。

您可能可以如下更改循环。

```
foreach (List<Foo> row in Items) 
{
    row.Reverse();
    foreach (Foo item in row)
    {
        ...
    }
} 
```*

# html - 页面底部的粘性页脚和正文背景图像

> ID：15086421
> 
> 赞同：0
> 
> 时间：2013-02-26T10:14:29.173
> 
> 标签：html, css, background-image, sticky-footer, background-position

我有 HTML5boilerplate，我想制作一个带有粘性页脚和图像作为正文背景的模板。背景应始终位于页面末尾（如果页面高于 clientHeight）或屏幕（如果页面较短）。
我的问题是当粘性页脚有效但背景无效时，反之亦然。

请看一看。

这是我的 index.html：

```
<body>
    <div class="wrap">
        <header></header>
        <div class="main clearfix right-sidebar">
            <div class="content"></div>
            <div class="sidebar"></div>
        </div>
    </div> <!-- end of .wrap -->
    <footer></footer>
</body> 
```

我的 CSS 是：

```
/*html, body { min-height: 100%;}*/
html, body { height: 100%;}
body > .wrap {height: auto; min-height: 100%; margin: 0 auto;}
body > .wrap > .main { padding-bottom: 70px;} 
body > .wrap, body > footer {width: 950px; position: relative;}
body > footer { margin: -70px auto 0 auto ; height: 70px; clear:both; } 
</* end of centered sticky footer */
body { background: url(../img/bg.png) #fff 0% 100% repeat-x; }
.clearfix:before, .clearfix:after { content: " ";  display: table;}
.clearfix:after { clear: both; }
.clearfix { *zoom: 1; } 
```

当我定义`html, body { height: 100%;}`一切正常时，如果页面比客户端的屏幕短。

![正文高度 100%，短页](../Images/2eef60a3b2925447c8c7fa74eeb60556.png)

当页面高于客户端屏幕时，背景图像位于屏幕底部 - 而不是页面。当用户 srcolls 页面时，图像位于屏幕中间。
这张图显示了问题（为方便起见，黄色背景）：

![正文高度 100%，高页面](../Images/f670c71cb2bc576a687755415998bdbd.png)

当我`html, body { min-height: 100%;}`在高页面上定义一切正常时，但粘性页脚不适用于较短的页面：

![正文最小高度 100%，短页](../Images/2341cfae018915c689faf39b68e85eb9.png)

我想补充一点，我不想固定背景。它应该在屏幕或页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:52:32.493

您可以使用 jQuery 将 body min-height 设置为屏幕尺寸并将其从页脚高度偏移

```
$('document').resize(function(){

  var windowHeight = $('window').height() - $('footer').height();

  $('.wrap').css('min-height', windowHeight );

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:24:46.357

您可以在本教程中尝试不带 js 的 Sticky 页脚：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T08:19:28.623

我自己用身体解决方案解决了这个问题，因为我找不到其他任何东西。我将背景图像设置为主体，它也位于页脚后面。我无法想出其他解决方案，因为您实际上是在页面包装器之外放置了一个 div：

```
body{
    width:100%;
    background: url(../images/lines.png);
    background-repeat: repeat-y;
    background-position: center center;
} 
```

# c++ - 参数包装在 std::tuple<> 然后应用

> ID：15086423
> 
> 赞同：1
> 
> 时间：2013-02-26T10:14:32.523
> 
> 标签：c++, c++11, lua, tuples, variadic-templates

我正在为`lua`. 它通过实例化函数模板来工作，该模板将 a 提供的参数收集`lua`到 a`std::tuple`中，然后将`std::tuple`a 应用于指向成员函数的指针。这是一个例子：

```
template <member_meta_info const* mmi, class C, class R, class ...A>
inline typename std::enable_if<std::is_same<void, R>::value, int>::type
member_stub(lua_State* L)
{
  assert(sizeof...(A) + 1 == lua_gettop(L));

  static std::tuple<A...> args;

  set_args<0, 2>(args, L);

  lua_getfield(L, -1, "__instance");
  assert(lua_islightuserdata(L, -1));

  typedef R (C::*ptr_to_member_type)(A...);

  apply_tuple(static_cast<C*>(lua_touserdata(L, -1)),
    *static_cast<ptr_to_member_type*>(mmi->ptr_to_member), args);

  lua_pushnil(L);

  return 1;
} 
```

`mmi->ptr_to_member`只是一个`void*`指针。诀窍是从以下`set_args`方面偷来的： [迭代元组](https://stackoverflow.com/questions/1198260/iterate-over-tuple)：

```
template<std::size_t I = 0, std::size_t O = 1, typename... Tp>
inline typename std::enable_if<I == sizeof...(Tp)>::type
set_args(std::tuple<Tp...>&, lua_State*)
{
}

template<std::size_t I = 0, std::size_t O = 1, typename... Tp>
inline typename std::enable_if<I != sizeof...(Tp)>::type
set_args(std::tuple<Tp...>& t, lua_State* L)
{
  set_arg(L, I + O, std::get<I>(t));

  set_args<I + 1, O, Tp...>(t, I);
} 
```

`set_arg()`是一组用于设置引用的各种原始类型（例如`int`, `double`, ...）的重载函数，从 中返回`std::get<>`，例如：

```
inline void set_arg(lua_State* L, std::size_t i, double& value)
{
  assert(lua_isnumber(L, i));
  value = lua_tonumber(L, i);
} 
```

该`apply`技巧改编自： [如何将元组扩展为可变参数模板函数的参数？](https://stackoverflow.com/questions/687490/how-do-i-expand-a-tuple-into-variadic-template-functions-arguments)

```
#ifndef APPLYTUPLE_HPP
# define APPLYTUPLE_HPP

template<size_t N>
struct Apply {
template<typename F, typename T, typename... A>
    static inline auto apply(F&& f, T && t, A &&... a)
      -> decltype(Apply<N-1>::apply(::std::forward<F>(f), ::std::forward<T>(t),
        ::std::get<N-1>(::std::forward<T>(t)), ::std::forward<A>(a)...
      ))
    {
      return Apply<N-1>::apply(::std::forward<F>(f), ::std::forward<T>(t),
        ::std::get<N-1>(::std::forward<T>(t)), ::std::forward<A>(a)...
      );
    }

    template<typename C, typename F, typename T, typename... A>
    static inline auto apply(C && c, F && f, T && t, A &&... a)
      -> decltype(Apply<N-1>::apply(::std::forward<C>(c),
        ::std::forward<F>(f), ::std::forward<T>(t),
        ::std::get<N-1>(::std::forward<T>(t)), ::std::forward<A>(a)...
      ))
    {
      return Apply<N-1>::apply(::std::forward<C>(c), ::std::forward<F>(f),
        ::std::forward<T>(t), ::std::get<N-1>(::std::forward<T>(t)),
        ::std::forward<A>(a)...
      );
    }

    template<typename C, typename T, typename... A>
    static inline C* apply(T && t, A &&... a)
    {
      return Apply<N-1>::template apply<C>(::std::forward<T>(t),
        ::std::get<N-1>(::std::forward<T>(t)), ::std::forward<A>(a)...
      );
    }
};

template<>
struct Apply<0> {
  template<typename F, typename T, typename... A>
  static inline auto apply(F && f, T &&, A &&... a)
    ->decltype((*::std::forward<F>(f))(::std::forward<A>(a)...))
  {
    return (*::std::forward<F>(f))(::std::forward<A>(a)...);
  }

  template<typename C, typename F, typename T, typename... A>
  static inline auto apply(C && c, F && f, T &&, A &&... a)
    ->decltype((::std::forward<C>(c)->*::std::forward<F>(f))(::std::forward<A>(a)...))
  {
    return (::std::forward<C>(c)->*::std::forward<F>(f))(::std::forward<A>(a)...);
  }

  template<typename C, typename T, typename... A>
  static inline C* apply(T &&, A &&... a)
  {
    return new C(::std::forward<A>(a)...);
  }
};

template<typename F, typename T>
inline auto apply_tuple(F && f, T && t)
  ->decltype(Apply< ::std::tuple_size<
    typename ::std::decay<T>::type
  >::value>::apply(::std::forward<F>(f), ::std::forward<T>(t)))
{
  return Apply< ::std::tuple_size<
    typename ::std::decay<T>::type
  >::value>::apply(::std::forward<F>(f), ::std::forward<T>(t));
}

template<typename C, typename F, typename T>
inline auto apply_tuple(C && c, F && f, T && t)
  ->decltype(Apply< ::std::tuple_size<
    typename ::std::decay<T>::type
  >::value>::apply(::std::forward<C>(c), ::std::forward<F>(f), ::std::forward<T>(t)))
{
  return Apply< ::std::tuple_size<
    typename ::std::decay<T>::type
  >::value>::apply(::std::forward<C>(c), ::std::forward<F>(f), ::std::forward<T>(t));
}

template<typename C, typename T>
inline C* apply_tuple(T && t)
{
  return Apply< ::std::tuple_size<
    typename ::std::decay<T>::type
  >::value>::template apply<C>(::std::forward<T>(t));
}

#endif // APPLYTUPLE_HPP 
```

它将元组应用于`args`指向的成员函数。现在我的问题。我很不安，对于每个函数调用，我都将`lua`提供的所有参数复制到 a 中`std::tuple`，然后将其应用到指向成员的指针上。当然，复制需要一些开销。是否可以以某种方式省略复制？是否存在比现有容器更适合复制参数的容器（标准或其他）`std::tuple`（即脂肪较少，修剪较多）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:20:25.767

我认为使用 a`std::tuple`应该没问题，但您可能想尝试删除并仅*一步*`static`构建它（无递归）。它可以改进生成的代码，但我会留给您测量和/或分析它。

 *```
#include <cstddef>

// we need a compile-time helper to generate indices
template< std::size_t... Ns >
struct indices
{
  typedef indices< Ns..., sizeof...( Ns ) > next;
};

template< std::size_t N >
struct make_indices
{
  typedef typename make_indices< N - 1 >::type::next type;
};

template<>
struct make_indices< 0 >
{
  typedef indices<> type;
};

// instead of set_arg, provide get_arg:
template< typename T >
T get_arg( lua_State* L, std::size_t N )
{
  static_assert( sizeof( T ) == 0, "T not specialized" );
}

// one specialization per type
template<>
inline double get_arg< double >( lua_State* L, std::size_t i )
{
  assert(lua_isnumber(L, i));
  return lua_tonumber(L, i);
}

// etc.

// now that we have the helpers, we use it to create an impl
// and forward the original call to it.
template< typename... Args, std::size_t... Ns >
void member_stub_impl( lua_State* L, const indices< Ns... >& )
{
  // and here's the non-recursive direct initialization
  // version of a std::tuple< Args... >, adjust the offset (1) as needed
  const std::tuple< Args... > args( get_arg< Args >( L, Ns + 1 )... );

  // now use it...

}

// the forwarder providing the indices to the impl
template< typename... Args >
void member_stub( lua_State* L )
{
  typedef typename make_indices< sizeof...( Args ) >::type Indices;
  return member_stub_impl< Args... >( L, Indices() );
} 
```

**编辑：**既然我们已经看到了`apply_tuple`，我认为您实际上可以摆脱两者`apply_tuple`和`std::tuple`本身。我上面的助手到位，归结为：

```
template <member_meta_info const* mmi, class C, class R, class ...A, std::size_t ...Ns>
inline typename std::enable_if<std::is_same<void, R>::value, int>::type
member_stub_impl(lua_State* L, const indices<Ns...>& )
{
  assert(sizeof...(A) + 1 == lua_gettop(L));

  lua_getfield(L, -1, "__instance");
  assert(lua_islightuserdata(L, -1));

  typedef R (C::*ptr_to_member_type)(A...);
  C* obj = static_cast<C*>(lua_touserdata(L, -1));
  auto func = *static_cast<ptr_to_member_type*>(mmi->ptr_to_member);

  // look ma, no std::tuple! ;)
  obj->*func( get_arg< A >( L, Ns + 1 )... );

  lua_pushnil(L);

  return 1;
} 
```

我无法测试它，所以那里可能有一些错字，但我希望它们很容易修复。如果您需要帮助，请告诉我。*

# iis - 某些用户登录失败 来自其他域的 IIS Windows 身份验证

> ID：15086428
> 
> 赞同：1
> 
> 时间：2013-02-26T10:14:40.560
> 
> 标签：iis, active-directory, webforms

我在域 A 中设置了一个 IIS，我们称它为*process network*。我们正在使用 Windows 身份验证，在这种环境中一切正常。

但是我们也有用户在域 B 中设置的*办公网络*上。域之间没有信任，但网络之间有一个开口，因此他们可以访问该站点。对于域 B 中的大多数用户，一切都按预期工作，当他们尝试登录时，系统会提示他们输入域 A 凭据，然后登录。

但是，有些用户无法登录。系统会提示他们按预期提供凭据，但当他们这样做时，他们会被拒绝（3 次尝试，然后是 401），原因是：

> 失败原因：未知用户名或密码错误。状态：0xc000006d 子状态：0xc000006a

以上取自 IIS 事件日志。

我确定用户名是有效的，并且密码是正确的。我没有尝试过所有这些用户，但有一些。我尝试使用无法登录的用户计算机上的凭据登录，并且成功了。因此，这似乎不是客户问题。

一个有趣的旁注是，遇到问题的用户位于与 IIS 不同的地理位置。我没有收到来自与 IIS 所在区域相同的*办公网络用户的任何问题。*

编辑：用户在重置后更改了密码，所以我不应该因为密码过期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:04:04.537

您**必须**建立双向域信任才能使 Kerberos 工作。正如您在日志中看到的那样，其他一切都会失败。

# windows-8 - 无法在 Windows 8 中使用自动完成框

> ID：15086430
> 
> 赞同：0
> 
> 时间：2013-02-26T10:14:42.830
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winrt-xaml

我安装了 nudget 自动完成工具包，但不幸的是，我发现这个控件没有足够的属性来充当自动完成功能，这很奇怪。它有 ItemsSource 但它不显示在您键入内容时过滤的项目列表。我也在寻找类似 textChanged 的​​东西，这样我就可以调用我的服务并再次获取结果并绑定 itemsource。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:19:39.310

Syncfusion WinRT Studio 中的 TextBoxExt 控件具有足够的功能，可以用作自动完成功能。它有超过 15 种建议模式，包括自定义过滤选项。希望这可以帮助。

[http://www.syncfusion.com/products/winrt/controls](http://www.syncfusion.com/products/winrt/controls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T18:38:56.457

这是我在[Group Contacts](https://www.youtube.com/watch?v=WacVrH9xpYc)中使用的实现：

XAML：

```
xmlns:Interactivity="using:Microsoft.Xaml.Interactivity" 
xmlns:behaviors="using:MyNamespace.Behaviors" 
```

. .

```
<TextBox x:Name="Searchbox" PlaceholderText="contact's name" Width="250" 
         IsTextPredictionEnabled="False"
         IsSpellCheckEnabled="False"
         VerticalAlignment="Center">

    <Interactivity:Interaction.Behaviors>
        <Core:EventTriggerBehavior EventName="KeyUp">
            <behaviors:FilterContactAction />
        </Core:EventTriggerBehavior>
    </Interactivity:Interaction.Behaviors>
</TextBox> 
```

代码：

```
public class FilterContactAction : DependencyObject, IAction
{
    string _previousResult = null;

    public object Execute(object sender, object parameter)
    {
        var textbox = sender as TextBox;
        var keyEventArgs = parameter as KeyRoutedEventArgs;

        var noChanges = textbox.Text == _previousResult;
        var deletionOccurred =   keyEventArgs.Key == VirtualKey.Back ||
                                keyEventArgs.Key == VirtualKey.Delete;

        if (noChanges || deletionOccurred)
        {
            return null;
        }

        var viewModel = ResourceLocator.Instance[typeof(HomeViewModel)] as HomeViewModel;
        viewModel.CanSearch = FindMatch(textbox, viewModel.Contacts);

        return null;
    }

    private bool FindMatch(TextBox textbox, ObservableCollection<Contact> contacts)
    {
        foreach (var contact in contacts)
        {
            var suggestionDisplayed = DisplaySuggestion(textbox, contact);

            if (suggestionDisplayed)
            {
                return true;
            }
        }

        return false;
    }

    private bool DisplaySuggestion(TextBox textbox, Windows.ApplicationModel.Contacts.Contact contact)
    {
        var characterCount = textbox.Text.Count();
        var suggestionDisplayed = false;

        var isMatch = contact.DisplayName.ToUpper().StartsWith(textbox.Text.ToUpper());

        if (isMatch)
        {
            textbox.Text = contact.DisplayName;
            textbox.SelectionStart = characterCount;
            textbox.SelectionLength = textbox.Text.Length - textbox.SelectionStart;

            _previousResult = textbox.Text;

            suggestionDisplayed = true;
        }

        return suggestionDisplayed;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:31:59.697

不确定你用的是什么。不能告诉你为什么它也不起作用。但是去年我想要 AutoCompleteTextBox 并最终自己编写了它。

你可以在这里找到它。 [https://github.com/hermitdave/HermitDaveWinRTControls](https://github.com/hermitdave/HermitDaveWinRTControls)

# php - PHP 或 Imagemagick ：图像中主要颜色的数量

> ID：15086431
> 
> 赞同：6
> 
> 时间：2013-02-26T10:14:46.287
> 
> 标签：php, image, image-processing, colors, imagemagick

**我的问题** 我的客户正在上传图片以穿在 T 恤上。我需要知道设计中有多少种主要颜色。我已经尝试过 PHP 脚本和 Imagemagick ，我似乎无法得到我正在寻找的结果。

此图像有 5 种主要颜色变化。当我使用 imagemagick 的 -unique-colors 时，我得到了大量不同的颜色。是否有一行代码或脚本可用于获得 5 的结果。
![蟒蛇标志](../Images/818cb3b4226fea02791bb6ad17f00496.png)

这是我用来尝试使用 imagemagick 获得唯一颜色计数的代码，但我可以使用多种颜色。

```
exec(convert $origimage -unique-colors -scale 1000% $newimage); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:44:15.883

阅读此讨论应该对您有所帮助： [http ://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12818](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12818)

基本上，您应该使用 imagemagic 生成所用颜色的直方图，并按出现次数（或百分比，如果您愿意）对结果进行排序然后您可以决定取前 2 行，它应该会给您一个不错的答案。

更强大的算法可能是选择百分比值的阈值，并保持颜色高于此阈值......

我希望这能给你一些线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:47:50.837

**除非您知道图像的主观复杂性，否则您无法确定之前的颜色数量（本例中为 3）。**

共有三种设置可以使用给定数量的颜色渲染图像。

```
convert python-logo.png +dither   -colors 3                   python-logo-reduced-colors.gif
convert python-logo.png +dither   -posterize 3                python-logo-reduced-colors.gif
convert python-logo.png -separate -threshold 50% -combine     python-logo-reduced-colors.gif 
```

# css - 如何在同一行的图标右侧显示文本

> ID：15086434
> 
> 赞同：4
> 
> 时间：2013-02-26T10:15:02.430
> 
> 标签：css

[我想在代码](http://jsfiddle.net/ykdnB/)中完美对齐的右侧显示文本。我该怎么做？我不想使用绝对位置。

```
.down {
margin-top: 5px;
border: 1px solid red;
}

.icontext {
display: inline-block;
margin-right: 8px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:23:08.623

这将使`span`标签与`img`标签垂直对齐

```
.icontext {
    vertical-align: middle;
    margin-right: 8px;
}

.icon{
    vertical-align: middle;
} 
```

示例：http: [//jsfiddle.net/ykdnB/2/](http://jsfiddle.net/ykdnB/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:20:15.217

您可以`float:left;`在图标上使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:25:59.793

如果您的意思是垂直对齐，则需要为`icontext`. 看这个演示：http: [//jsfiddle.net/ykdnB/3/](http://jsfiddle.net/ykdnB/3/)

# c# - 从列表中获取不同的值

> ID：15086438
> 
> 赞同：3
> 
> 时间：2013-02-26T10:15:12.837
> 
> 标签：c#, asp.net, linq

```
 public List<MAS_EMPLOYEE_TRANSFER> GetEmployeeTransferListForHR(TimecardDataContext TimecardDC)
    {
        List<MAS_EMPLOYEE_TRANSFER> objEmployeeTransferList = null;
        try
        {
            objEmployeeTransferList = new List<MAS_EMPLOYEE_TRANSFER>();
            objEmployeeTransferList = TimecardDC.MAS_EMPLOYEE_TRANSFER.Where(
                employee =>
                    employee.HR_ADMIN_IND=="Y").ToList();                
        }
        finally
        {
        }
        return objEmployeeTransferList;
    } 
```

它显示 hr admin indicator=yes 的所有值列表。但是我必须从 table 中获取`hr admin=yes`和 distinct(empid) `MAS_EMPLOYEE_TRANSFER`。如何`empId`与`objEmployeeTransferList`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T10:19:29.303

尝试制作它

```
.Distinct().ToList(); 
```

你可以参考这里[LINQ: Distinct values](https://stackoverflow.com/questions/998066/linq-distinct-values)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T10:18:31.853

```
List<int> ids = objEmployeeTransferList
                   .Select(e => e.empId)
                   .Distinct()
                   .ToList(); 
```

您也可以在服务器端进行此操作，而无需创建包含所有管理员记录的内存员工列表：

```
List<int> ids = TimecardDC.MAS_EMPLOYEE_TRANSFER
                   .Where(e => e.HR_ADMIN_IND == "Y")
                   .Select(e => e.empId)
                   .Distinct()
                   .ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-05T12:06:20.123

使用 GroupBy 区分

```
objEmployeeTransferList.GroupBy(x => x.empId).Select(g => g.First()).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:19:06.893

你有没有尝试：

```
objEmployeeTransferList = TimecardDC.MAS_EMPLOYEE_TRANSFER.Where(
   employee => employee.HR_ADMIN_IND=="Y").Distinct().ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T10:20:30.123

linq 中有一种独特的方法可以解决问题。

[http://msdn.microsoft.com/en-gb/library/bb348436.aspx](http://msdn.microsoft.com/en-gb/library/bb348436.aspx)

# jsp - 将对象从 servlet 发送到 jsp 并返回到 servlet

> ID：15086445
> 
> 赞同：0
> 
> 时间：2013-02-26T10:15:33.257
> 
> 标签：jsp, session, jakarta-ee, object, servlets

当我在会话中从另一个 Servlet 收到相同的对象时，如何将对象发送回 Servlet（来自 JSP）？

这是代码：

1) 用户 = 对象 (Loginservlet -> succes.jsp)

```
request.getSession().setAttribute("user", user); 
```

2）在success.jsp中接收userobject

```
User user = (User) session.getAttribute("user"); 
```

3) 现在我想将此对象发送到 ExchangeServlet，因为我需要此对象的一些属性，例如 user.getUsername()，但该对象在 JSP 页面中的任何地方都无法访问，只能在我收到它的地方访问。例如，我想在单击按钮时发送它。

提前致谢！

# twitter-bootstrap - Bootstrap - 如何在列表/选项卡中使用图标？

> ID：15086459
> 
> 赞同：8
> 
> 时间：2013-02-26T10:16:19.077
> 
> 标签：twitter-bootstrap, bootswatch

我试图在 Twitter Bootstrap 中获得一些效果，但我很挣扎，而且我敢肯定它以前一定做过。两者都非常相似，所以我进入了一个问题。

我想要做的是让图标同时在列表和导航栏中工作。我试图通过一些绘画来实现的每种效果的快速说明：

**列表**

![在此处输入图像描述](../Images/3e14958f250a416f341fee2f2beef8dd.png)

```
<div class="well span4">
   <ul class="nav nav-list">
       <li class="active"><a href="#">Value 1</a></li>
       <li><a href="#">Value 2</a></li>
       <li><a href="#">Value 3</a></li>
   </ul>
</div> 
```

我已经尝试包括`<img>`and`<span>`和`<div>`all ，`class="close"`但似乎都没有正常工作，我能得到的最接近的是让它们显示在下一行。

**导航栏**

![在此处输入图像描述](../Images/eb01f037a9a110cce625f33f9c06afa8.png)

```
<div class="navbar">
        <div class="navbar-inner">
            <div class="container" style="width: auto;">
                <a class="brand" href="#">NavBar</a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="divider-vertical"></li>
                        <li class="active">
                            <img src="edit.png" width="16" height="16"/>
                            <a href="#">Nav 1</a>
                        </li>
                        <li>
                            <img src="play.png" width="16" height="16"/>                               
                            <a href="#">Nav 2</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div> 
```

我在这里想要的是在导航栏项目旁边显示两个图标（以及在第一个导航栏项目的活动区域内）。与列表类似的问题，这次图像被推到上面。我已经对 Nav2 进行了 photoshop 以说明我想要达到的效果。

我已经尝试过`<img>`，并且确实尝试过，`<i>`但我相信这些在某种程度上是神奇的，并且总是指向某种字形图标 - 我需要阅读这些。我真正想要的是在这里使用自定义图像。

任何建议/小例子都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-26T10:21:37.220

我使用了比图像更好的 fontawesome 图标。

在引导程序中使用图标的语法是使用带有类名 icon- 的标签。默认情况下，引导程序中存在 glyphicons，但 fontawesome 有更多图标并且完全免费。您可以在这里了解更多关于 font-awesome 的信息：http: [//fortawesome.github.com/Font-Awesome/#integration](http://fortawesome.github.com/Font-Awesome/#integration)

这是您可以使用图标创建导航和列表的方法：

Jsfiddle 为您服务[http://jsfiddle.net/shail/GKsSd/2/](http://jsfiddle.net/shail/GKsSd/2/)

```
for Lists :

     <div class="well span4">
       <ul class="nav nav-list">
         <li class="active"><a href="#">Value 1 <i class=" icon-remove pull-right"></i></a>  </li>
         <li class="active"><a href="#">Value 2 <i class=" icon-remove pull-right"></i></a></li>
         <li class="active"><a href="#">Value 3 <i class=" icon-remove pull-right"></i></a></li>
      </ul> 
```

浏览器中的结果： ![带有图标的导航和列表](../Images/545c87c11b996959624f93c46012957f.png) 对于导航，您可以执行类似操作：

```
<div class="navbar">
<div class="navbar-inner">
 <a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar">
  <i class="icon-bar"></i>
   </a>

 <a class="brand" href="">New Icon Menu</a>

    <div class="nav-collapse">
        <ul class="nav nav-pills pull-right">
            <li><a href=""><i class="icon-home icon-2x"></i> Home<br></a>
            </li>
            <li><a href=""><i class=" icon-pencil icon-2x"></i>About Us</a>
            </li>
            <li><a href=""><i class=" icon-briefcase icon-2x"></i>Portfolio</a>
            </li>
            <li><a href=""><i class=" icon-envelope icon-2x"></i>Contact Us</a>
            </li>
        </ul>
       </div>
       </div>
    </div> 
```

以防万一您迫切需要使用图像。您必须创建类并将图标图像放入其中。如下所示：

```
 .icon-edit {
     background:url('/images/edit.png') 0 0 no-repeat;
     height: 16px;
     line-height: 16px;
     width: 16px;
     } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-25T13:24:57.180

对于 Bootstrap 3，您可以使用 Bootstrap 中包含的字形图标来执行类似的操作...

带有图标的列表组：

```
<div class="list-group">
    <a href="#" class="list-group-item active">Active item <i class="glyphicon glyphicon-camera pull-right"></i></a>
    <a href="#" class="list-group-item">Second item <i class="glyphicon glyphicon-envelope pull-right"></i></a>
    <a href="#" class="list-group-item">Third item <i class="glyphicon glyphicon-chevron-right pull-right"></i></a>
</div> 
```

带有图标的标签..

```
<ul class="nav nav-tabs">
    <li class="active"><a href="#">Home <i class="glyphicon glyphicon-dashboard"></i></a></li>
    <li><a href="#">Tab1 <i class="glyphicon glyphicon-tree-conifer"></i></a></li>
    <li><a href="#">Tab2 <i class="glyphicon glyphicon-fire"></i></a></li>
</ul> 
```

或者，带有图标的堆叠导航..

```
<ul class="nav nav-tabs nav-stacked">
     <li><a href="#">One <i class="glyphicon glyphicon-remove pull-right"></i></a></li>
     <li><a href="#">Two <i class="glyphicon glyphicon-remove pull-right"></i></a></li>
     <li><a href="#">Three <i class="glyphicon glyphicon-remove pull-right"></i></a></li>
     <li><a href="#">Four <i class="glyphicon glyphicon-remove pull-right"></i></a></li>
</ul> 
```

[代码片段： http](http://codeply.com/go/E0R4MTFrFS) ://codeply.com/go/E0R4MTFrFS

# python-2.7 - Webpy 和 Facebook 图形 API

> ID：15086461
> 
> 赞同：1
> 
> 时间：2013-02-26T10:16:25.867
> 
> 标签：python-2.7, web.py

我正在编写一个简单的 Python Web 服务来从 Facebook Graph API 中获取内容。现在，在测试时，我将所有内容都写在一个单独的 python 类中，并且运行良好。现在我已经开始模块化一切，这一切都崩溃了。

我正在为我的 RESTful 服务使用 webpy。我的代码看起来有点像这样：

*webapp.py*

```
import web
import FBModule

fb = FBModule.FBManager()

urls = (
    '/', 'HomeHandler',
    '/auth/login', 'LoginHandler',
    '/auth/logout', 'LogoutHandler'
)

class BaseHandler():
        def current_user(self):
            if not hasattr(self, "_current_user"):
                    self._current_user = dict()
                    user_id = web.cookies().get('fb_userid')
                    user_name = web.cookies().get('fb_username')
                    if user_id and user_name:
                        self._current_user = {'id': user_id, 'name': user_name}
            return self._current_user

class HomeHandler(BaseHandler):
        def GET(self):
            return render.oauth(current_user=self.current_user())

class LoginHandler:
    def GET(self):
        fb.login()      
        return web.seeother('/')

class LogoutHandler():
        def GET(self):
            fb.logout()
            web.seeother('/')

if __name__ == "__main__":
        app = web.application(urls, globals())
        app.run() 
```

*FBModule.py*

```
import urllib
import urlparse
import time
import web

FACEBOOK_APP_ID = "<APP ID>"
FACEBOOK_APP_SECRET = "<APP SECRET>"

def path_url():
    return "http://localhost:8080" + web.ctx.fullpath

class FBManager:
    def login(self):
        data = web.input(code=None)
        args = dict(client_id=FACEBOOK_APP_ID, redirect_uri=path_url())
        if data.code is None:
            return web.seeother('http://www.facebook.com/dialog/oauth?' + urllib.urlencode(args) + '&scope=' + urllib.quote('user_likes,friends_likes,user_birthday,friends_birthday'))
        args['code'] = data.code
        args['client_secret'] = FACEBOOK_APP_SECRET

        response = urlparse.parse_qs(urllib.urlopen("https://graph.facebook.com/oauth/access_token?" + urllib.urlencode(args)).read())
        access_token = response["access_token"][-1]
        profile = json.load(urllib.urlopen("https://graph.facebook.com/me?fields=id,name,birthday,location,gender&" + urllib.urlencode(dict(access_token=access_token))))
        web.setcookie('fb_userid', str(profile['id']), expires=time.time() + 7 * 86400)
        web.setcookie('fb_username', str(profile['name']), expires=time.time() + 7 * 86400)

    def logout(self):
        web.setcookie('fb_userid', '', expires=time.time() - 86400)
            web.setcookie('fb_username', '', expires=time.time() - 86400) 
```

问题是，如果我使用单独的模块从 Facebook 获取访问令牌，我会收到“内容损坏错误”。但是，如果我做一些简单的事情，比如剪切和粘贴从 FBModule 的 login() 函数到 LoginHandler 类的 GET() 函数的所有内容，那么一切都会再次变得笨拙。我束手无策，试图找出我在这里做错了什么。

如果您知道我做错了什么，请告诉我。

Regds，帕里托什

# c# - Windows Store 应用程序中不同屏幕分辨率的图像大小

> ID：15086465
> 
> 赞同：0
> 
> 时间：2013-02-26T10:16:43.227
> 
> 标签：c#, windows-8, visual-studio-2012, windows-store-apps, screen-resolution

我正在开发一个 Windows 应用商店应用程序。Windows 中有七种分辨率。**我想为不同的分辨率设置不同的图像尺寸。任何人都可以知道 Windows 模拟器分辨率的图像大小是多少。**

这些是模拟器提供的解决方案：

*   10.6" 1024*768,
*   10.6" 1366*768,
*   10.6" 1920*1080,
*   10.6" 2560*1440,
*   12" 1280*800,
*   23" 1920*1080,
*   27" 2560*1440,

    **我的问题是关于背景图像、启动图像（启动画面）的这些分辨率的图像大小。** **我想根据屏幕尺寸选择图像。指导我关于屏幕尺寸的图像尺寸是多少。**
    我在互联网上搜索。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:48:16.797

根据您正在处理的应用程序类型，最佳选择可能是缩放或调整图像大小。

看看这个资源[缩放到屏幕的指南（Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)它将提供这个非常重要的主题的完整图片。

在同一参考指南中，您有[缩放到像素密度的指南（Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

我真的建议阅读 MSDN 对 Windows 8 应用程序的参考。它有很好的记录，并且有大量的例子。

值得一提的是，当屏幕分辨率高于 1366 x 768 的 140% 和 180% 时，系统会自动为您交换图像。要利用这种“自动交换”功能，只需包含三个版本的图像：

*   MyImage-100.jpg
*   MyImage-140.jpg
*   MyImage-180.jpg

然后，当您在应用程序中引用图像时，只需将其引用为**MyImage.jpg**。系统会处理剩下的事情。

如果您需要以 140% 和 180% 以外的分辨率阈值交换图像，则需要编写自己的自定义代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:57:18.180

除了 Agustin 提供的大量资源外，请注意启动图像/启动屏幕必须始终为 620 x 300 像素，无论您的屏幕尺寸/分辨率如何。您可以在底部的“应用程序 UI”选项卡下的 Package.appxmanifest 文件中找到它。

# javascript - 如何获取数组中对象的位置？

> ID：15086470
> 
> 赞同：0
> 
> 时间：2013-02-26T10:17:04.160
> 
> 标签：javascript

我不想获取数组中对象的顺序，以便将它们存储到我的数据库中？但我不知道在我的 for 循环中写什么。

这是代码

```
<script>
    $(document).ready(function () {
        var rootLimit = 8;
        $('ul.sortable').nestedSortable({
            handle: 'a',
            items: 'li',
            listType: 'ul',
            maxLevels: '3',
            toleranceElement: '> a',
            update: function (event, ui) {
                list = $(this).nestedSortable(
                    'toHierarchy', 
                    { startDepthCount: 0 }
                );
                var page_id = ui.item.find('> a').attr('data-page-id');
                console.log(list);
                for (var i = 0; i < list.length; i++) {
                    //Do something
                }
                $.post('/page/updatemenu/' + page_id, { 
                    list : list 
                }, function (data) {

                });
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:18:42.400

利用 -

```
var index = $(ui.sender).index(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:20:12.577

`for`你可以使用 jQuery 方法代替`.each()`：

```
list.each(function(index, item){
    // do something with item or index of item
}); 
```

# java - 如何使用 apache poi 从 .doc 文件中检索表？

> ID：15086474
> 
> 赞同：1
> 
> 时间：2013-02-26T10:17:17.137
> 
> 标签：java, apache-poi

我需要从 word 文档中检索具有与我的文档中相同的表结构的表。即我想要一个有行和列的表。

目前我使用的代码工作正常，但它只提供单元格内的文本，这些文本太没有格式化方式。是否有任何可能的方法来获取具有我文档中的表结构的整个表。

以下是我用来读取表格的代码

```
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.usermodel.Paragraph;
import org.apache.poi.hwpf.usermodel.Range;
import org.apache.poi.hwpf.usermodel.Table;
import org.apache.poi.hwpf.usermodel.TableCell;
import org.apache.poi.hwpf.usermodel.TableRow;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class TableTest {

    public static void main(String args[]) throws IOException
    {
        String fileName="D:\\vignesh\\model.doc";

        InputStream fis=new FileInputStream(fileName);
        POIFSFileSystem fs=new POIFSFileSystem(fis);
        HWPFDocument doc=new HWPFDocument(fs);

        Range range=doc.getRange();

        for(int i=0;i<range.numParagraphs();i++)
        {
            Paragraph par=range.getParagraph(i);
            System.out.println(par.text());
        }
        Paragraph tablePar=range.getParagraph(0);
        if(tablePar.isInTable())
        {
            Table table=range.getTable(tablePar);
            for(int rowIdx=0;rowIdx<table.numRows();rowIdx++)
            {
                TableRow row=table.getRow(rowIdx);
                System.out.println("row "+(rowIdx+1)+",is table header: "+row.isTableHeader());
                for(int colIdx=0;colIdx<row.numCells();colIdx++)
                {
                    TableCell cell=row.getCell(colIdx);
                    System.out.println("column "+(colIdx+1)+",text= "+cell.getParagraph(0).text());
                }
            }
        }
    }

} 
```

我需要检索整个表格及其单元格，并且必须将其传递给另一个类，该类将使用该表格创建 PDF 文档。任何检索表格的示例代码对我来说都非常有帮助。

# .net - 代表和中继命令

> ID：15086476
> 
> 赞同：1
> 
> 时间：2013-02-26T10:17:20.200
> 
> 标签：.net, relaycommand

我以为我已经了解了委托，因为它创建了对方法的引用，然后可以被“外部”代码（另一个 dll/项目）引用。

现在我正在使用 MVVM，我看到这个叫做 RelayCommand 的东西，它看起来好像它正在以与传递委托相同的方式传递一个方法作为参数。这怎么可能？

我正在查看的代码是

```
 public RelayCommand AddUserCommand { get; set; }

        public ViewModelMain()
        {
            this.AddUserCommand = new RelayCommand(AddUser, null);
        }

        void AddUser(object parameter)
        {
            //logic
        } 
```

并且 RelayCommand 对象是

```
public class RelayCommand : ICommand
{
    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
         //logic
    }
} 
```

因此，由于没有委托，我可以假设 Action<> 对象发生了一些诡计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:21:41.807

`Action<object>`是代表。当你写：

```
new RelayCommand(AddUser, null) 
```

编译器将其重写为：

```
new RelayCommand(new Action<object>(AddUser), null) 
```

正如您所期望的那样，它创建了对方法的引用。

# javascript - Ember 复选框单击，更改事件未触发，给出错误

> ID：15086478
> 
> 赞同：1
> 
> 时间：2013-02-26T10:17:25.517
> 
> 标签：javascript, ember.js

我在 ember 中使用复选框时遇到问题。我使用了一个布尔属性来检查绑定。现在我想在更改此属性或单击复选框时触发事件，但是当我单击它时不会触发任何事件。即使它不会在更改该属性时调用观察者函数。下面是我的代码片段，

在“setAsRecurringAction”上查看-观察者检查的属性，或者这可以是一个点击事件处理程序。

```
setActionSchedule: function() {
    if (this.get('setAsRecurringAction')) {
        $(".response-container").css({height: '38em'});
    } else {
        $(".response-container").css({height: '19em'});
    }
}.observes('setAsRecurringAction') 
```

模板-

```
{{view Ember.Checkbox 
     checkedBinding="setAsRecurringAction"
     class="set-recurring"}} 
```

并且带有动作助手的相同代码也不起作用，

```
{{view Ember.Checkbox 
    checkedBinding="setAsRecurringAction"
    class="set-recurring"
    action="setActionSchedule"}} 
```

*   当我选中复选框时会引发更多信息，例如“未捕获的类型错误：无法调用未定义的方法‘查找’”

提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T21:25:09.287

看看[`jsfiddle`](http://jsfiddle.net/durinthomas/MTLkq/)我刚刚创建的。

如果**setActionSchedule**在视图中定义，那么您必须更改您的**checkedBinding 路径**。

```
{{view Ember.Checkbox 
    checkedBinding="view.setAsRecurringAction" }} 
```

# vector - 用两点旋转线

> ID：15086488
> 
> 赞同：1
> 
> 时间：2013-02-26T10:17:58.857
> 
> 标签：vector, rotation, geometry, plane

我有两点

```
(x1, y1) (x2, y2) 
```

我只在 x+, y+ 平面上工作

并说这条线是垂直的

```
(320, 320) (320, 160) 
```

我如何将它旋转 90 度以获得

```
(320, 320) (480, 320)  [90 deg rotated by bottom point (320, 320)]
(320, 160) (480, 160)  [90 deg rotated by top point (320, 160)] 
```

请记住，我需要相同的形式——即，

```
(x1, y1) (x2, y2) 
```

顺便说一句，这些线只能是垂直的或水平的，所以斜率要么是未定义的，要么是零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:28:58.117

旋转`B`90 度`A`：

```
diff = B-A
B_new = A + array([-diff[1],diff[0]]) 
```

更笼统地说，您可以这样做：

```
def rot_origin(p, ang):
    return array([p[0]*cos(ang)-p[1]*sin(ang),p[0]*sin(ang)+p[1]*cos(ang)])

def rot_around(p, p0, ang):
    return p0 + rot_origin(p-p0, ang) 
```

那么，您的情况将是`B_new = rot_around(A, B, pi/2)`，因为`90`度数是`pi/2`弧度。

编辑：只是为了让您的示例完全明确。围绕点 1 旋转 90 度，您将得到：

```
(x1,y1) (x1-(y2-y1),y1+(x2-x1)) 
```

要围绕第 2 点旋转，您将得到：

```
(x2-(y1-y2),y2+(x1-x2)) (x2,y2) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T10:39:51.073

以获取您作为示例的内容：

1.  获取顶部和底部点之间的距离。在您的示例中，d = sqrt((x2 - x1)^2 + (y2-y1)^2)。
2.  对于底部点旋转 90 度，只需使用 (x2,y2) 和 (x2+d, y2) 作为端点。
3.  对于顶点旋转 90 度，只需使用 (x1,y1) 和 (x1+d, y1) 作为端点。

这可以很容易地推广到任何一条线，不仅是一条垂直线，还有任何旋转角度。

# java - cURL <-> Netty：获取超过 1024 个字符的内容

> ID：15086491
> 
> 赞同：0
> 
> 时间：2013-02-26T10:18:12.390
> 
> 标签：java, http, netty

我正在使用实现[Netty的](http://netty.io)[LittleProxy](http://www.littleshoot.org/littleproxy/)。我正在尝试接收 HTTP 请求的内容（包含 XML）。

这非常有效，直到我收到超过 1024 个字符（字节？）的内容。我仍然看到请求进入，并且可以从 HTTP 标头中看到正确的内容长度。但是，根本不返回内容（空字符串）。

如何接收更多内容？我的 HTTP 请求包含 cURL 发送的 SOAP 消息，肯定会超过 1024 个字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:54:19.940

这是一个 cURL 问题，显然在发送超过 1024 字节的文件时会出现一些复杂情况。

由于我纯粹出于测试目的使用 cURL，因此我转向了一个简单的 Java 程序来发送我的 SOAP 消息。现在，LittleProxy（或 Netty）可以很好地处理内容，传递了 1024 个字节。

# android - Logcat 错误 - qtaguid - write_ctrl 失败

> ID：15086492
> 
> 赞同：7
> 
> 时间：2013-02-26T10:18:12.577
> 
> 标签：android

我有一个在 HTC Sensation (4.0.3) 上运行良好的 Android 应用程序，但是在最近的一些更改（特别是在数据库中添加一个表以进行持久存储和一些一般代码更改）之后，我发现这真的很不寻常logcat 中的错误消息（见下文），除了另一个 SO question > [Android phonegap project spamming QTAGUID messages](https://stackoverflow.com/questions/11811127/droidgap-project-spamming-qtaguid-messages)之外，我找不到任何信息。

副作用是某些数据集未正确加载到应用程序中（尽管其他数据确实从某些 Web 服务调用加载）

我在连接到 wifi 时特别遇到了这个问题，在 3g 上对其进行测试后，我在 logcat 中没有收到错误，但有问题的数据没有；没有加载到应用程序中。

如果有人以前见过此错误或知道它可能与什么有关，请告诉我。谢谢。

Logcat 示例输出：

```
03-26 09:32:05.554: I/qtaguid(1168): Failed write_ctrl(t 144 42958262894592 1408305917) res=-1 errno=1
03-26 09:32:05.554: I/qtaguid(1168): Tagging socket 144 with tag 271200000000(10002) for uid 1408305917 failed errno=-1
03-26 09:32:05.554: I/qtaguid(1168): Failed write_ctrl(t 145 42958262894592 1408305917) res=-1 errno=1
03-26 09:32:05.554: I/qtaguid(1168): Tagging socket 145 with tag 271200000000(10002) for uid 1408305917 failed errno=-1
03-26 09:32:05.554: I/qtaguid(1168): Failed write_ctrl(t 146 42958262894592 1408305917) res=-1 errno=1
03-26 09:32:05.554: I/qtaguid(1168): Tagging socket 146 with tag 271200000000(10002) for uid 1408305917 failed errno=-1
03-26 09:32:05.564: I/qtaguid(1168): Failed write_ctrl(t 147 42958262894592 0) res=-1 errno=1
03-26 09:32:05.564: I/qtaguid(1168): Tagging socket 147 with tag 271200000000(10002) for uid 0 failed errno=-1
03-26 09:32:05.564: I/qtaguid(1168): Failed write_ctrl(t 148 42958262894592 0) res=-1 errno=1
03-26 09:32:05.564: I/qtaguid(1168): Tagging socket 148 with tag 271200000000(10002) for uid 0 failed errno=-1
03-26 09:32:05.564: I/qtaguid(1168): Failed write_ctrl(t 149 42958262894592 0) res=-1 errno=1
03-26 09:32:05.564: I/qtaguid(1168): Tagging socket 149 with tag 271200000000(10002) for uid 0 failed errno=-1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:45:25.093

我刚刚对 HTC Sensation 进行了出厂重置，然后重新安装了该应用程序，这已经解决了问题！

[我还在 Android 开源网站上找到了此信息，该信息涉及内核中可能与错误 > http://source.android.com/tech/datausage/kernel-overview.html](http://source.android.com/tech/datausage/kernel-overview.html)相关的“qtaguid”进程。

我仍然不确定到底是什么导致了错误，所以如果有人遇到过类似的错误或找到原因，那么我很想知道！

# com - C++Builder 2010 没有 CComHeapPtr？

> ID：15086493
> 
> 赞同：0
> 
> 时间：2013-02-26T10:18:17.130
> 
> 标签：com, atl, c++builder-2010

我正在尝试将[CComHeapPtr](http://msdn.microsoft.com/en-gb/library/80zw33a6%28v=vs.80%29.aspx)智能指针与 Embarcadero C++Builder 2010 一起使用，但在任何提供的标头中都找不到定义。我得到这个错误。

```
[BCC32 Error] E2451 Undefined symbol 'CComHeapPtr' 
```

它不在`atlbase.h`（并且`atlalloc.h`似乎完全丢失）。

我打算使用它来提供异常安全的`ItemIDList`从`IShellFolder::ParseDisplayName`.

它是否存在于这个版本中，还是 C++Builder 只是使用了一个非常旧的 ATL 版本？

而且，除了自己动手，还有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:19:09.837

`CComHeapPtr`在 C++Builder 附带的任何 ATL 版本中均不可用。

C++Builder 确实支持 ATL，但它的旧版本。Microsoft 已停止向第三方授权 ATL，并且最新的 ATL 依赖于 VC++ 特定的编译器扩展。C++Builder XE 是附带工作 ATL 文件的最后一个版本。C++Builder XE2 及更高版本仍然支持 ATL，但前提是您拥有早期 C++Builder 版本的 ATL 文件的副本（XE2 具有存根文件，其中包含`#error`在您尝试使用它们时会发出警告的语句）。现在使用 Embarcadero 自己的 DAX 框架正式支持 ActiveX，该框架不兼容 ATL。

# objective-c - 我可以间接启动 ivar 吗？

> ID：15086496
> 
> 赞同：1
> 
> 时间：2013-02-26T10:18:22.553
> 
> 标签：objective-c, xcode, automatic-ref-counting

我正在尝试像这样启动我的 ivar：

在 h 文件中这样声明

```
@interface MyClass: {
    UITextView *_myTextView;
} 
```

然后在m文件中像这样创建

```
- (id)init {
    self = [super init];
    if(self) {
        [self initTextView:_myTextView];
    }
    return self;
}

- (void)initTextView:(UITextView *)textView {
    textView = [[UITextView alloc] init];
    ...
} 
```

_myTextView 之后仍然为零。**为什么会这样，我应该怎么做才能让它发挥作用？**我已经启用了 ARC。

**[编辑]**

这行得通。谢谢大家！

```
- (id)init {
    self = [super init];
    if (self) {
        _textView1 = [self createTextView];
        _textView2 = [self createTextView];
        _textView3 = [self createTextView];
    }
    return self;
}

- (UITextView *)createTextView {
    UITextView *textView = [[UITextView alloc] init];
    ...
    return textView;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:25:08.030

您需要始终使用以下方法引用实例变量：

```
self.textView = [[UITextView alloc] init]; 
```

也可以使用其他名称，而不是作为以在 Objective-C 中具有特殊含义的`initTextView`方法开头。`init`

如果您想使用相同的代码来初始化多个文本视图控件，请使用如下代码：

```
- (UITextView *)createTextView
{
    UITextView *textView = [[UITextView alloc] init];
    textView.something = whatever;
    ...
    return textView;
} 
```

然后像这样使用它：

```
- (id)init {
    self = [super init];
    if(self)
    {
        self.textView1 = [self createTextView];
        self.textView2 = [self createTextView];
        ...
        self.textViewN = [self createTextView];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:24:22.443

```
- (id)init {
    self = [super init];
    if(self) {
        [self initTextView];
    }
}

- (void)initTextView{
    _myTextView = [[UITextView alloc] init];
    ...
} 
```

如果你想为几个文本视图调用 initTextView，你可以这样编码：

```
- (id)init {
    self = [super init];
    if(self) {
        _myTextView = [[UITextView alloc] init];
        [self initTextView:_myTextView];
    }
}

- (void)initTextView:(UITextView *)textView{
    //setup the textView
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:33:10.217

在`[self initTextView:_myTextView];`您将 _myTextView 的当前值（为零）传递给您的`initTextView:`方法。要设置实例变量，您需要一个指向指针的指针。

```
- (id)init {
    self = [super init];
    if (self) {
        [self setupTextView:&_myTextView];
    }
    return self;
}

- (void)setupTextView:(UITextView * __strong *)textView {
    *textView = [[UITextView alloc] init];
    ...
} 
```

我还将该`initTextView:`方法重命名为`setupTextView`，因为以 开头的方法`init`预计与`init`ARC 中的其他方法一样。

# jsf - JSF 将对象传递到另一个页面

> ID：15086497
> 
> 赞同：0
> 
> 时间：2013-02-26T10:18:24.193
> 
> 标签：jsf, hyperlink, commandbutton

我正在尝试将对象传递到另一个站点。所以我有我的 Gallery.xhtml，我将一个对象设置为当前并重定向到另一个页面：

```
<h:form>
        <a4j:commandButton value="Edit Skin"
            action="#{helloBean.setCurrentSkin(skin)}"
            onclick="window.location.href = 'resources/html/Editor.xhtml';" />
</h:form> 
```

但是当第二页的getter被调用时，当前对象又为null。

bean是为每个页面生成的吗？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:30:48.503

我的问题是我将我的 bean 声明为`@ViewScoped`，但正确的标签是`@SessionScoped`. 这确保了 Bean 在整个会话中保持其值，而不仅仅是一个视图。

# android - 可滚动的表格布局

> ID：15086498
> 
> 赞同：0
> 
> 时间：2013-02-26T10:18:25.163
> 
> 标签：android, android-layout, android-tablelayout, android-scrollview

如何在下图中实现可滚动的 tableLayout，问题是如何像这个顺序在表中插入视图。

是否需要适配器才能在 tableLayout 中插入视图？如果是，它是如何工作的？

[可滚动 TableLayout http://dl.dropbox.com/u/42106750/scrollview.jpg 的图像，](http://dl.dropbox.com/u/42106750/scrollview.jpg) 这是 xml UI 的片段

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/body_tile_bg"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        style="@style/InitSelectAppsParagraphHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="8dp"
        android:text="@string/init_Select_apps_use_the_force" />

    <TextView
        android:id="@+id/textView2"
        style="@style/InitSelectAppsParagraphBody"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="8dp"
        android:gravity="center_horizontal"
        android:text="@string/init_Select_apps_paragraph" />

</LinearLayout>

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="2" 
    android:padding="8dp" >

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

   </TableLayout>
</ScrollView>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="12dp"
        android:background="@color/init_select_apps_grey_bg"
        android:paddingBottom="4dp"
        android:paddingLeft="8dp"
        android:paddingRight="8dp"
        android:paddingTop="4dp" >

        <TextView
            android:id="@+id/textView3"
            style="@style/InitDarkBackgroundTextStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/choose" />

        <TextView
            android:id="@+id/textView4"
            style="@style/InitSelectAppsGreenBigText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp"
            android:layout_marginRight="8dp"
            android:text="4"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/textView5"
            style="@style/InitDarkBackgroundTextStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/init_select_apps_more_to_continue" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="38dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="16dp"
        android:background="@color/init_select_apps_grey_bg"
        android:paddingLeft="8dp"
        android:paddingRight="8dp" >

        <TextView
            android:id="@+id/textView6"
            style="@style/InitDarkBackgroundTextStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/init_select_apps_add_much" />

        <Button
            android:id="@+id/button1"
            style="@style/InitNextButton"
            android:layout_width="wrap_content"
            android:layout_height="28dp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="16dp"
            android:text="@string/next" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:33:52.123

它不是可滚动的 tableView 或任何东西。它是一个简单的[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)。您可以创建一个适配器来填充[本教程](http://www.mkyong.com/android/android-gridview-example/)中给出的 GridView 。

# sql-server - 如何在 SQL Server 的表值函数中使用 CTE 语句

> ID：15086499
> 
> 赞同：51
> 
> 时间：2013-02-26T10:18:25.317
> 
> 标签：sql-server, sql-server-2008-r2, common-table-expression

我了解到某些版本的 Microsoft OLE DB Provider for SQL Server（主要在 Windows XP 上）不支持`WITH`语句。因此，我决定将我的 SQL 语句移动到一个表值函数中，并从我的应用程序中调用它。现在，我被困住了。我应该如何使用该`INSERT INTO`语句`WITH`？这是到目前为止我提供的代码，但 SQL Server 不喜欢它...... :-(

```
CREATE FUNCTION GetDistributionTable 
(
    @IntID int,
    @TestID int,
    @DateFrom datetime,
    @DateTo datetime
)
RETURNS 
@Table_Var TABLE 
(
    [Count] int, 
    Result float
)
AS
BEGIN
INSERT INTO @Table_Var ([Count], Result) WITH T(Result)
     AS (SELECT ROUND(Result - AVG(Result) OVER(), 1)
         FROM RawResults WHERE IntID = @IntID AND DBTestID = @TestID AND Time >= @DateFrom AND Time <= @DateTo)
SELECT COUNT(*) AS [Count],
       Result
FROM   T
GROUP  BY Result

    RETURN 
END
GO 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-26T10:25:58.017

表值函数中 CTE 的语法为：

```
CREATE FUNCTION GetDistributionTable 
(
    @IntID int,
    @TestID int,
    @DateFrom datetime,
    @DateTo datetime
)
RETURNS TABLE
AS
RETURN  
(
    WITH cte AS
    (
        SELECT ROUND(Result - AVG(Result) OVER(), 1) Result
        FROM   RawResults 
        WHERE  IntID = @IntID 
        AND    DBTestID = @TestID 
        AND    Time >= @DateFrom 
        AND Time <= @DateTo    
    )

    SELECT  COUNT(*) AS [Count],
            Result
    FROM    cte
    GROUP  BY 
            Result
)
GO 
```

如果可能，您也可以省略 CTE (`WITH`语句)，而是创建一个使用子查询的内联表值函数：

```
CREATE FUNCTION GetDistributionTable 
(
    @IntID int,
    @TestID int,
    @DateFrom datetime,
    @DateTo datetime
)
RETURNS TABLE
AS
RETURN  
(
    SELECT  COUNT(*) AS [Count],
            Result
    FROM    (
                 SELECT ROUND(Result - AVG(Result) OVER(), 1) Result
                 FROM   RawResults 
                 WHERE  IntID = @IntID 
                 AND    DBTestID = @TestID 
                 AND    Time >= @DateFrom 
                 AND Time <= @DateTo    
    ) t
    GROUP  BY 
            Result
)
GO 
```

您的示例似乎正在使用多语句 TVF（插入和选择），当您有选择时，请尝试使用内联 TVF，因为多语句 TVF 会阻止查询优化器选择更好的执行计划（**[此处](http://www.sqlservercentral.com/blogs/discussionofsqlserver/2012/02/15/comparing-inline-and-multistatement-table-valued-functions/)**解释了性能差异）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-26T11:24:51.340

像这样..

```
CREATE FUNCTION GetDistributionTable 
(
    @IntID int,
    @TestID int,
    @DateFrom datetime,
    @DateTo datetime
)
RETURNS 
@Table_Var TABLE 
(
    [Count] int, 
    Result float
)
AS
BEGIN
  WITH T 
    AS (    
        select Ticket_Id,COUNT(1) Result from 
        Customer_Survey
        group by MemberID,SiteId,Ticket_Id
   )
  INSERT INTO @Table_Var ([Count], Result)
  SELECT COUNT(*) AS [Count],
       Result
  FROM   T
  GROUP  BY Result
  RETURN 
END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-24T12:15:36.213

```
CTE with if else in UDF 

USE [SchoolDB]
GO

/****** Object:  UserDefinedFunction [dbo].[GetDistributionTable]    Script Date: 24-08-2019 05:17:55 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

alter  FUNCTION [dbo].[GetDistributionTable] 
(
   @DepartmentName varchar(50) = 'Production'
)
RETURNS 
@Table_Var TABLE 
(   NUM int IDENTITY(1,1),
    [ParentEmployeeKey] int, 
    Result float
)
AS
BEGIN
Declare @Table_Vars table
(
    [ParentEmployeeKey] int, 
    Result float
);
insert into @Table_Vars([ParentEmployeeKey])
select COUNT(1) Result from 
        [SchoolDB].[dbo].[DimEmployee] where DepartmentName = @DepartmentName
if(@@rowcount >0)
begin
WITH T 
    AS (    
        select [ParentEmployeeKey],COUNT(1) Result from 
        [SchoolDB].[dbo].[DimEmployee] where DepartmentName = @DepartmentName
        group by [ParentEmployeeKey]
   )
  INSERT INTO @Table_Var ([ParentEmployeeKey], Result)
  SELECT COUNT(*) AS [Count],
       Result
  FROM   T
  GROUP  BY Result
end
else

 WITH T 
    AS (    
        select [ParentEmployeeKey],COUNT(1) Result from 
        [SchoolDB].[dbo].[DimEmployee] where DepartmentName = @DepartmentName
        group by [ParentEmployeeKey]
   )
  INSERT INTO @Table_Var ([ParentEmployeeKey], Result)
  SELECT COUNT(*) AS [Count],
       Result
  FROM   T
  GROUP  BY Result
  RETURN 
END

GO 
```

# c# - Kendo Treeview远程绑定模板内的c#变量

> ID：15086500
> 
> 赞同：0
> 
> 时间：2013-02-26T10:18:28.360
> 
> 标签：c#, templates, razor, kendo-ui, kendo-treeview

我正在使用 MVC *Razor*视图和 Kendo Controls

如何保留驻留在我的 C# 代码块中但同时在我的 Kendo 模板中也可用的全局变量，以便我可以为我获取的每个项目增加它？

我需要的是这个：

**剑道树视图：**

```
@(Html.Kendo().TreeView()
  .Name("DatasourceTreeview")
  .DataTextField("ControlId")
  .DataSource(dataSource => dataSource
  .Read(read => read
    .Action("RetrieveTreeviewItems", "Customizer")
    .Data("submitParams")).Events(e => e.RequestStart("loadParams")))
   .TemplateId("treeview-template")
  ) 
```

**多变的：**

```
@ { int globalVariable = 1; } 
```

**模板：**

```
<script id="treeview-template" type="text/kendo-ui-template">  
 # switch (item.ControlType) {
     case "control1": #
        globalVariable += 1;
     # break; #
     # case "control2": #
        globalVariable += 2;
     # break; #
     # default: #
        globalVariable += 3;
     # break; #
</script> 
```

**结果：** 递增*的 globalVariable*

通过模板并渲染树视图后，我想使用递增的 globalVariable。但是 C# 变量本身在模板中是不可见的。我怎样才能;

*   在 C# 代码块中初始化一个变量，然后将其传递给模板
*   根据检索到的数据增加
*   将其传递回 C# 代码块

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:49:38.500

您需要创建一个 JavaScript 变量，因为 Kendo 模板只不过是 JavaScript 代码。方法如下：

```
<script>
var globalVariable = @globalVariable;
</script> 
```

# mysql - MySQL 查询在特定月份每天登录的用户

> ID：15086504
> 
> 赞同：1
> 
> 时间：2013-02-26T10:18:42.457
> 
> 标签：mysql

我在 MySQL 中有一个表，用于存储每个用户的上次登录时间。有什么方法可以查询出某个月份每天登录的用户吗？例如。一月份每天登录的用户列表

更新：表确实非常简单，只有 2 个字段：

```
 structure 
  -----------------------
  userid   last_login_time 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:25:45.840

**if`last_login_time`实际上不仅仅是*最后一次*登录时间，而是*所有*登录时间：**

```
SELECT userID
FROM table
WHERE MONTH(last_login_time) = 2 AND YEAR(last_login_time) = 2013
GROUP BY userID
HAVING COUNT(DISTINCT DAY(last_login_time)) = DAY(LAST_DAY(MAX(last_login_time))) 
```

我相信下面允许使用索引，因此可能更有效：（如果索引）

```
SELECT userID
FROM table
WHERE last_login_time LIKE '2013-02%'
GROUP BY userID
HAVING COUNT(DISTINCT DAY(last_login_time)) = DAY(LAST_DAY(MAX(last_login_time))) 
```

**如果`last_login_time`只是*最后一次*登录时间：**

将另一列添加到表中，该列将作为计数器来记录本月登录的天数，每次用户在新的一天登录时更新它。新月份开始时重置此计数器。

获取用户：

```
SELECT userID
FROM table
WHERE last_login_time LIKE '2013-02%'
  AND counter = DAY(last_login_time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:36:23.867

使用`MySQL MONTH`子句。

```
SELECT * FROM user_logins ORDER BY MONTH(last_login_time) DESC LIMIT 1; 
```

以上查询将返回最新记录。

现在，如果最新记录当前是登录日期，那么您可以使用`LIMIT 1,1`in `LIMIT`,

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:50:20.420

使用以下查询来获得您需要的结果

```
 select * from logindetails lg 
group by userid having month(lg.` last_login_time`)=2  and year(lg.` last_login_time`)=2013 and 
(count(distinct(day(lg.` last_login_time`)))) =day(last_day(lg.` last_login_time`)) 
```

在上面的查询中，2 代表 2 月。如果你想三月使用 3，四月使用 4，......

# html - 网页响应式可调整大小的网格设计，具有 3 个可调整大小的区域

> ID：15086506
> 
> 赞同：1
> 
> 时间：2013-02-26T10:18:49.107
> 
> 标签：html, css, layout, grid, angularjs

我希望这是问这个问题的正确地方，
我想在容器内制作一个包含 3 个 div 的网页，以使
左右 div 可以调整大小
，而中心 div 会根据左右 div 调整大小，
有些就像 plunker 或 jsfiddle 中的编码区域一样，
这 3 个区域必须保持水平，不能跳到下一行。
这个问题困扰了我将近一个星期，现在感谢任何帮助或指向正确方向的指针。

**注意：**我在这个项目中使用 AngularJs，Angulary 方法的答案是有利的，但其他方法是可以接受的。

## 更新：

我不清楚可调整大小的部分，我的意思是用户可调整大小，而不仅仅是在浏览器调整大小时调整大小，这意味着如果您查看我的[示例](http://embed.plnkr.co/ocuGOs4uYvXjMFY3WEii/preview)，您会看到当您单击边框时，相关区域滑出并且中心区域的大小现在调整到正确的大小我的问题是它没有响应并且它有问题，当左右区域都被隐藏时，单击以重新打开右侧区域将显示中心区域的行为中的错误当它被调整大小时，就像在 jsfiddel 中当你调整 javascript 区域的大小时，css 和结果区域会被调整大小。
更好的示例 MS PowerPoint 当您调整左右面板的大小时，中心会相应地调整大小。

这是我的[plnkr](http://embed.plnkr.co/ocuGOs4uYvXjMFY3WEii/preview)，我希望这足够清楚。
**提前致谢。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:35:24.503

哦，我误解了这个问题。他要求使用可调整大小的网格而不是等高的列。

这是一个非常简单的示例，说明如何使用 jQuery 将垂直调整大小应用于某些容器

[此 jsFiddle 中的来源](http://jsfiddle.net/Merec/pW5QC/)

基本的Javascript：

```
var diff = {x: resizeStart.x - e.clientX,y: resizeStart.y - e.clientY}; //Get the difference
resizeStart = {x: e.clientX, y: e.clientY}; // set new starting point

$('.left').width($('.left').width() - diff.x); // Set width of left container
$('.center').css('margin-left', parseInt($('.center').css('margin-left')) - diff.x); //Set margin of center container 
```

我保存了拖动开始的点并获得了鼠标所在点的增量。然后我将此增量添加到左侧容器的宽度和中心容器的边距。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:02:54.100

没有默认的方法来处理这个问题，因为左右容器在向右或向左浮动时会脱离布局。

处理此问题的唯一方法是在页面加载后获取左右容器的高度，并将中心容器的最小高度设置为该值。

使用 jQuery 获得此功能的示例[在此 jsFiddle](http://jsfiddle.net/Merec/Y7wx4/)

HTML：

```
<div class="left">
    <div class="left-content">
        Left Column <br/><br/><br/>more rows please...<br/><br/><br/>more rows please...
    </div>
</div>
<div class="right">
    <div class="right-content">
        Right Column <br/><br/><br/>more rows please...
    </div>
</div>
<div class="center">
    <div class="content">
        Center Column
    </div>
</div> 
```

CSS：

```
.left {
    float: left;
    width: 200px;
    background: red;
}
.right {
    float: right;
    width: 200px;
    background: green;
}
.center {
    margin: 0 200px;
    background: yellow;
} 
```

JS：

```
$(document).ready(function() {
    var max_height = 0;
    $('.left, .right, .center').each(function() {
        if($(this).outerHeight() > max_height) max_height = $(this).outerHeight();
    }).css('min-height', max_height);   
}); 
```

还有很多无效或非常复杂的 CSS 技巧，但它们也有效。搜索“等高框”。

# entity-framework - 如何从 Silverlight MVVM 中的 ViewModel 关闭 ChildWindow？

> ID：15086509
> 
> 赞同：0
> 
> 时间：2013-02-26T10:19:02.517
> 
> 标签：entity-framework, mvvm, silverlight-5.0

在我的项目中，我有一个名为 login.xaml 的登录页面，并且我有 loginViewModel.cs 用于使用 MVVM 方法。一开始我在我的代码隐藏页面（login.xaml.cs）中编写了 this.dialogResult=true 并使用了代码意味着它关闭了子窗口。这里我需要从 viewmodel（loginviewmodel）关闭子窗口（login.xaml）。

登录.xaml：

```
private void btnLogin_Click(object sender, RoutedEventArgs e)
        {

            if (txtuser.Text.Trim() != "" && txtpass.Password != "")
            {
                (DataContext as LoginViewModel).UserValidation(txtuser.Text.Trim(),txtpass.Password.Trim());
            }
        } 
```

登录视图模型.cs：

```
public void UserValidation(string name, string pass)
        {
            IsBusy =true;
            uname=name;
            pword=pass;
            // ----* (Follow * for the continuation )

        } 
```

*--> 在这里我需要关闭子窗口.. 如何关闭它..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:23:10.037

我遇到了同样的问题并解决了它......所以我有我的子窗口和按钮取消：

```
<Button x:Name="CancelButton" Content="Cancel" Command="{Binding CancelCommand}" CommandParameter="{Binding ElementName=SignUpPopup}" Width="75" Height="23" HorizontalAlignment="Right" Margin="0,12,0,0" Grid.Row="1"/> 
```

我所做的是通过 ExecuteCancelCommand 参数 param 传递具有 Name="SignUpPopup" 的对象子窗口。在视图模型中你有：

```
public void ExecuteCancelCommand(object param)
        {
            (param as Signup).Close();
           // MessageBox.Show("Window should close now");
        } 
```

注册是子窗口类型。希望这可以帮助，

弗拉德

# excel - Excel 无法读出变量

> ID：15086510
> 
> 赞同：0
> 
> 时间：2013-02-26T10:19:03.540
> 
> 标签：excel, excel-2007, vba

我有以下代码：

```
Dim FinalAddr As Range
Dim Final As String

Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Cells.Count > 1 Then Exit Sub
On Error Resume Next

Select Case UCase(Target.Value)

   Case "NEW-BOX"
        Selection.Offset(-1, 2).Select
        FinalAddr = Range(Selection.Address)
        MsgBox FinalAddr ' Debug, nothing comes up however
        Selection.ClearContents
        Selection.Offset(1, -2).Select

   Case "END-BOX"
        Final = FinalAddr.Value
        Application.Speech.Speak (Final)

    End Select
End Sub 
```

但是，当我扫描新盒子时没有任何反应，所有语法都正确吗？我没有错误，任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:36:39.927

这就是你所追求的吗？

```
 Case "NEW-BOX"
        Selection.Offset(-1, 2).Select
        MsgBox Selection.Address ' Debug, nothing comes up however
        Selection.ClearContents
        Selection.Offset(1, -2).Select 
```

编辑：如果您想将 FinalAddr 设置为选择，然后测试它是否有效：

```
 Case "NEW-BOX"
        Selection.Offset(-1, 2).Select
        Set FinalAddr = Selection
        MsgBox FinalAddr ' Debug, nothing comes up however
        Selection.ClearContents
        Selection.Offset(1, -2).Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:37:38.310

如果你想要你应该使用的单元格中的值 `Finaladdr = Selection.Value`，但是如果你想要你应该使用的选择的地址`= Selection.AddressLocal()`

但是，如果您想引用您需要使用的范围`Set`，然后`.AddressLocal()`在引用单元格地址时。

# php - 通过javascript加载图像

> ID：15086513
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:19:15.743
> 
> 标签：php, javascript

我正在创建一个社交网站。我想在一个列表中显示数据库中注册用户的所有详细信息，其中包括他们的图像和名称。如果用户没有提供图像，我想显示图像。如果图像已经由用户提供，有时可能会从数据库中丢失。那时我还需要显示特定的图像。我发现通过使用javascript方法`onerror()`，我们可以检查图像是否加载。我不知道它执行。

我的代码示例是这样的：

```
while($row_data = mysql_fetch_array($result_personal))
{
$row_photo = $row_data['acnt_profile_picture'];  
<div class="feedstory" id="feedstory">
 <img src="<?php if($row_photo!=NULL){echo $row_photo;}
 else{?>images/no_image.png<?php }?>" id="image1" width="34" height="34" align="left" class="feedthumb" alt="photo" 
 onerror="imageError()"/>
</div>
} 
```

我的 javscript 方法是这样的：

```
 function imageError()
 {
 document.getElementById("image1").src="images/no_image.png";
 } 
```

我需要显示`no_image.png`是否`$row_photo`为空或未`$row_photo`加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:26:32.550

你说过（在评论中）

> 如果变量为空，则显示“no_image.png”。如果未加载图像，则显示“no_image.png”

所以这不是路径问题，`imageError`调用有问题。

如果**你**有一个`img`带有`id` `"image1"`. 但是你的`img`元素没有那个`id`，你也没有展示一个不同的元素。

如果您的目标是`no_image.png`在有错误的`img`元素中显示，那么：

更改您的`onerror`属性：

```
onerror="imageError()" 
```

到

```
onerror="imageError(this)" 
```

然后更改`imageError`为：

```
function imageError(img)
{
    img.src="images/no_image.png";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:27:31.557

确保将 php 代码包含在 php 标签中。

jQuery解决方案：

```
<?php
while($row_data = mysql_fetch_array($result_personal)) {
    $row_photo = $row_data['acnt_profile_picture'];
?>
    <div class="feedstory" id="feedstory">
         <img src="<?php echo $row_photo ?>" width="34" height="34" align="left" class="feedthumb" alt="photo" />
    </div>
<?php } ?>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
    $('img').error(function() {
        $(this).attr({
            src: '/images/missing-image.jpg',
            alt: 'Sorry! This image is not available!',
            style:'border: 1px solid #f00;'
        });
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:27:44.060

根据您的数据库结构是否与我的相同，您可以使用此功能，我将它放在我的 User 类中。

```
public static function ProfileImage($user_ID, $image_ID, $size)
{
    global $http_r;

    $image_URL;
    if($image_ID != null)
        $image_URL = $http_r ."/userfiles/images/". $user_ID ."/thumbnails/". $image_ID .".jpeg";
    else
        $image_URL = $http_r ."/template/images/noprofilepic.jpg";

    ?>
    <img src="<?php echo $image_URL; ?>" class="profile-<?php echo $size; ?>">
    <?php
} 
```

然后使用如下：`User::ProfileImage($user_ID, $image_ID, "small");`

但是，我的图像有一个单独的表，我不直接存储图像路径。

# linkedin - 如何使用 javascript API 获取linkedIn 连接？

> ID：15086514
> 
> 赞同：0
> 
> 时间：2013-02-26T10:19:16.407
> 
> 标签：linkedin, linkedin-jsapi

我正在尝试以下代码，但它对我不起作用。

```
//loading linkedin library
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
 api_key: *******
 authorize: true
</script>
//and making api request below
<script>
IN.API.Connections("me")
.result(function(data){
    alert(data);
});
</script> 
```

我无法收到警告框，这意味着**IN.API.Connections**将无法运行，并且我没有收到任何错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:02:59.010

尝试这个：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
 api_key: *******
 authorize: true
 scope: r_basicprofile r_network
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:37:25.180

您需要在脚本中定义一些 javascript 函数，以便对从 API 返回的结果进行实际操作。警报框仅显示您返回的数据。

在 JSAPI 中获取连接的最基本调用如下所示：

```
IN.API.Connections("me")
    .result(doMyThing) 
```

其中“doMyThing”只是一个 javascript 函数，它将处理和处理返回的结果。

LinkedIn 开发人员网站上还有一份详细说明此电话的文档：[https ://developer.linkedin.com/documents/inapiconnections](https://developer.linkedin.com/documents/inapiconnections)

# java - 将表格字段转换为 jCheckBox

> ID：15086515
> 
> 赞同：0
> 
> 时间：2013-02-26T10:19:22.430
> 
> 标签：java, swing, jtable

我创建了一个与另一个类一起使用的 jTable 类。这里的代码：

```
public class Data_Table extends JFrame{
    DefaultTableModel dtm;
    JTable table;
    JScrollPane scrollPane;
    JFrame ventana;
    JButton button1,button2;
    JPanel pCentral,pSouth,pWindow;

    public void init() {
        String[] columnNames = {"CBD","abstract","final","native","private","protected","public",
                                "static","strictfp","synchronized","transient","volatile"};
        dtm = new DefaultTableModel(columnNames,0);     
        table = new JTable(dtm);
        scrollPane = new JScrollPane(table);

        button1 = new JButton("Ok");
        button2 = new JButton("Cancel");
    }

    public void addData(Object[] data) {
        dtm.addRow(data);
    }

    public void createWindow() {
        pCentral=new JPanel();
        pCentral.add(scrollPane);

        pSouth=new JPanel();
        pSouth.add(button1);
        pSouth.add(button2);

        pWindow=new JPanel(new BorderLayout());

        pWindow.add(pCentral,BorderLayout.CENTER);
        pWindow.add(pSouth,BorderLayout.SOUTH);

        ventana=new JFrame("");
        ventana.setContentPane(pWindow);

        ventana.add(scrollPane);
        ventana.setSize(1000,200);
        ventana.setLocationRelativeTo(null);
        ventana.setVisible(true);
    }
} 
```

我想将列从`abstract`to`volatile`转换为 jCheckBox。现在的结果是这样的： ![在此处输入图像描述](../Images/b847df5325d546ed764008ba19bea2cd.png)

我怎样才能改变我的桌子？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:40:41.600

利用表模型，特别是通过创建一个扩展`javax.swing.table.AbstractTableModel`和覆盖该`getColumnClass()`方法的类并指定该方法返回`Boolean.class`这些特定列。

一个很好的起点是[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)特别是关于[创建表模型的链接](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

一个示例实现可能是：

```
 public class MyTableModel extends AbstractTableModel {
        /* Implement the various abstract methods and override any 
         * other methods you need to
         */

        public Class<?> getColumnClass ( int columnIndex ) {
            if ( (columnIndex == 1) || (columnIndex == 11 ) ) {
                return Boolean.class;
            }
        }
    } 
```

之后，您将使用`JTable`' 方法将表格模型应用于您的表格，`setModel()`

# java - jdk.certpath.disabledAlgorithms=MD2 (javax.net.ssl.SSLHandshakeException)

> ID：15086517
> 
> 赞同：2
> 
> 时间：2013-02-26T10:19:26.260
> 
> 标签：java, ssl, ssl-certificate, java-7, sslhandshakeexception

我的代码运行良好，没有任何异常，我最近连接到服务器，在我的代码中我只是更改了服务器主机名、用户名和密码。我得到了以下异常

```
javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints 
```

当我用谷歌搜索时，我发现我们必须更改`Java\jre7\lib\security\java.security`我引用此链接的文件，[请单击此处](http://www.richardnichols.net/2012/08/arrrggh-java-security-cert-certificateexception-certificates-does-not-conform-to-algorithm-constraints/)。

但是如果我们开发一个客户端应用程序，这个解决方案就不够好。有没有更好的方法来解决这个问题。

任何帮助都是可观的

# php - 行和冒号分隔的列表到数组 PHP

> ID：15086520
> 
> 赞同：0
> 
> 时间：2013-02-26T10:19:29.317
> 
> 标签：php, associative-array

我正在尝试一种简单的方法来获取列表，就像这样

```
foo: Alpha
bar: Bravo
fooBar: Charlie 
```

并将其转换为关联数组，以便值

```
$array['foo'] //would contain Alpha
$array['bar'] //would contain Bravo 
```

等等

实现这一目标的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:23:26.427

如果您的第一个列表已经在数组中，您可以手动执行此操作：

```
$array = [];
$list = ['foo: Alpha', 'bar: Bravo'];

foreach ($list as $element) {
    $parts = explode(': ', $element);
    $array[$parts[0]] = $parts[1];
} 
```

否则，只需使用[`parse_ini_string`](http://php.net/manual/en/function.parse-ini-string.php)将包含您的数据的字符串解析为关联数组（请注意，此函数需要 PHP 5.3 或更高版本）。

如果您的数据在字符串中，并且您没有 PHP 5.3，则可以拆分新行以获取数组：`$list = explode("\n", $string);`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:26:05.753

像这样的东西？：

```
$string = "foo: Alpha
bar: Bravo
fooBar: Charlie";

$array = array();
$lines = explode("\n", $string);

foreach ($lines as $line) {
    list($key, $value) = explode(": ", $line);
    $array[$key] = $value;
}

var_dump($array); 
```

结果：

```
array(3) {
  ["foo"]=>
  string(6) "Alpha
"
  ["bar"]=>
  string(6) "Bravo
"
  ["fooBar"]=>
  string(7) "Charlie"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:21:52.437

试试这个： $array = array();

```
$str    = 'foo: Alpha';
$res    = explode(":",$str);
$array[$res[0]] = $res[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:41:19.167

也许这是矫枉过正，但如果您的文件格式可能会扩展，那么值得研究 YAML，您的示例恰好是有效的 YAML 标记。例如，您可以使用[Symfony YAML 组件](http://symfony.com/doc/2.0/components/yaml/introduction.html)

```
use Symfony\Component\Yaml\Yaml;
$array = Yaml::parse('/path/to/file.yml'); 
```

它适用于您当前的格式，如果您决定添加嵌套数组或其他重要数据，只需使用非常直观的 YAML 语法。这里是对格式的介绍： http: [//symfony.com/doc/2.0/components/yaml/yaml_format.html](http://symfony.com/doc/2.0/components/yaml/yaml_format.html)

# oracle - 将 LINQ to SQL 与托管 ODP.NET (Oracle) 一起使用

> ID：15086521
> 
> 赞同：2
> 
> 时间：2013-02-26T10:19:36.543
> 
> 标签：oracle, linq-to-sql, odp.net

我正在使用 Oracle 新发布的 Managed ODP.NET 驱动程序连接到我的数据库（参见[此处](http://www.oracle.com/technetwork/topics/dotnet/whatsnew/index.html)）。连接设置很好。我现在尝试使用一个非常[简单的 LINQ to SQL](http://de.wikipedia.org/wiki/LINQ#LINQ_to_DataSet)示例。问题是我得到了*ArgumentOutOfRangeException*。它出现在 foreach 语句中。

我非常简单的对象：

```
[Table(Name = "my_mgr.ADDRESS")]
public class Address
{
    [Column(Name = "NAME")]
    public string Surname;

    [Column(Name = "VNAME")]
    public string Forename;

    [Column(Name = "ANZ")]
    public int Anz;
} 
```

测试查询的部分：

```
DataContext db = new DataContext(inst.Connection);
Table<Address> addressTable = db.GetTable<Address>();

if (addressTable != null)
{
    //"SELECT * from my_mgr.ADDRESS WHERE anz > 0";
    var query = from p in addressTable where p.Anz > 0 select p;

    foreach (var p in query)
    {
        MessageBox.Show(
            "Forename: " + p.Forename + "\n" +
            "Surname: " + p.Surname
        );
    }
} 
```

而我原来的 SQL 查询是（实际上是有效的）：

```
SELECT * from my_mgr.ADDRESS WHERE anz > 0 
```

我实际上为此搜索了很多，但我找不到有效的结果，因为驱动程序非常新，而且似乎以前没有人遇到过问题。我非常确定驱动程序支持 LINQ to SQL，如[本网站](http://www.oracle.com/technetwork/topics/dotnet/whatsnew/index.html)所述。遗憾的是，我既不能使用实体框架，也不能使用 Visual Studio 提供的自动生成工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:29:30.747

Linq to SQL 不支持 Oracle。如果你想像使用 linq to sql 一样使用 ODP.NET 和 Linq，我建议你使用 ALinq。[http://www.alinq.org](http://www.alinq.org)

# ruby-on-rails - 使用 Redis 和 Rails 失败的 Rspec 测试

> ID：15086522
> 
> 赞同：1
> 
> 时间：2013-02-26T10:19:38.123
> 
> 标签：ruby-on-rails, rspec, redis

我重构了我的 Rails 代码以将用户关系存储在 Redis 而不是 Postgres 数据库中。

之前的代码：

```
# user.rb

has_many :relationships, foreign_key: "follower_id", dependent: :destroy
has_many :following, through: :relationships, source: :followed

def follow!(other_user)
  relationships.create!(followed_id: other_user.id)
end 
```

重构后的代码：

```
# user.rb

def follow!(other_user)
  rdb.redis.multi do
    rdb[:following].sadd(other_user.id)
    rdb.redis.sadd(other_user.rdb[:followers], self.id)
  end
end

def following
  User.where(id: rdb[:following].smembers)
end 
```

重构的代码有效，但我现有的规范现在失败了：

```
describe "following a user", js: true do
  let(:other_user) { FactoryGirl.create(:user) }
  before { visit user_path(other_user) }

  it "should increment the following user count" do
    expect do
      click_button "Follow"
      page.find('.btn.following')
    end.to change(user.following, :count).by(1)
  end
end 
```

现在导致：

```
Failure/Error: expect do
   count should have been changed by 1, but was changed by 0 
```

Rspec 使用不同的 Redis 数据库，该数据库在每个规范运行之前被刷新。据我所知，规范应该仍然通过。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:30:04.437

```
to change(user.followers, :count).by(1) 
```

应改为

```
to change(other_user.followers, :count).by(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:44:29.443

这可能是重新加载问题吗？尝试这个：

```
it "should increment the following user count" do
  expect do
    click_button "Follow"

    # user object is now stale, reload it from the DB
    user.reload
  end.to change(user.following, :count).by(1)
end 
```

# html - TinyMCE 在 Umbraco 中清理 HTML

> ID：15086533
> 
> 赞同：2
> 
> 时间：2013-02-26T10:20:03.920
> 
> 标签：html, twitter-bootstrap, tinymce, umbraco, rich-text-editor

我正在尝试`collapse`在 Umbraco 中使用 Bootstrap 的功能，但是当我在富文本编辑器 (TinyMCE) 中编辑页面的 HTML 时，`data-`当我保存页面时属性会被清除，因此插件不起作用。我已经按照[Allow any markup in the tinymce 编辑器](http://our.umbraco.org/wiki/how-tos/customizing-the-wysiwyg-rich-text-editor-%28tinymce%29/allow-any-markup-in-the-tinymce-editor)进行了操作，但没有任何效果。我可以停止 TinyMCE 清理我的 HTML 吗？

**编辑：**我已经在[http://fiddle.tinymce.com/BNcaab重现了这个问题](http://fiddle.tinymce.com/BNcaab)

尝试将下面的代码粘贴到 HTML 编辑器中，然后再次保存并单击 HTML 编辑器。

```
<a class="accordion-toggle down" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
    <h4>Slide 1</h4>
    <span class="accordion-arrow"></span>
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:25:05.927

Umbraco 在保存/发布事件后运行 TidyHtml，不幸的是，它没有 100% 与 tinyMCE 有效/无效元素同步。有许多 html5 元素和属性被丢弃，我相信其他一些基本元素，如 <scripts>（我说这是为了更好！）和 <iframes>。我不记得 tidy 会压缩的元素的确切列表，但这是我们在最新的 Umbraco 4.8.11 实现中遇到的一个问题，不幸的是不得不求助于禁用 tidy。可以在 [/config/umbracoSettings.config] 中使用以下方法禁用 Tidy：

```
 <!-- clean editor content with use of tidy -->
    <TidyEditorContent>False</TidyEditorContent> <!-- gross but: http://our.umbraco.org/wiki/how-tos/customizing-the-wysiwyg-rich-text-editor-(tinymce)/allow-any-markup-in-the-tinymce-editor --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:43:32.790

不幸的是，这个设置有问题：`<![CDATA[*[*]]]>`在最新版本的 tinymce 中。您必须使用配置选项 valid_elements 并将属性设置为有效。

# ruby-on-rails - session updated_at 应该在 rails 3 中停止

> ID：15086534
> 
> 赞同：0
> 
> 时间：2013-02-26T10:20:06.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在研究 sso 。一个请求来自其他应用程序，收到该请求后，我在omniauth回调控制器中调用1个方法并使用json对象响应。但在完成响应后，它会更新各个会话的 updated_at。我想停止更新各个会话的 updated_at。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:59:06.140

omn​​iauth 将为您执行一些会话任务，因此您的会话在omniauth 回调后得到更新。随着会话的更新，您`updated_at`在会话中的值会由 rails 自动（且合理地）更新。

我认为如果不自定义 rails 源代码就无法实现目标，这显然不是一个好主意。

如果您不想使用 中的值`updated_at`，只需忽略它或将其设置为 nil

```
session[:updated_at] = nil 
```

如果您想在omniauth 回调之前保留该值：

```
original_updated_time = session[:updated_at]
YOUR CALLBACK LOGIC
session[:updated_at] = original_updated_time 
```

# android - 倒计时到 3 个月期间 android

> ID：15086535
> 
> 赞同：-7
> 
> 时间：2013-02-26T10:20:08.257
> 
> 标签：android

在我的应用程序中，我想设置一个从现在到 5 月 17 日的倒数计时器。当计时器变为 0 时，将应用一个条件。一个人可以使用日历或日期吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:24:50.553

您可以同时使用日历和日期：

```
Date d = new Date(2012, 02, 26); //Assign your desired date
Timer mytimer = new Timer();
mytimer.schedule(new TimerTask() {
    public void run() {
    //method to execute
     mymethod();
    }
}, d); 

    public void mymethod() {
        this.runOnUiThread(Timer_Tick);

    }

    private Runnable Timer_Tick = new Runnable() {
        public void run() {
            if(Your condition) {
                //Execute your code
             }
       }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:30:50.693

我不确定我是否正确理解了您的问题。如果你想在 5 月 17 日调用一些代码，你可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

因此，首先您必须创建 Activity 或 Service（假设后者 - 例如 MyService），然后使用如下代码：

```
Intent intent = new Intent(this, MyService.class);
PendingIntent pi = PendingIntent.getService(
    getApplicationContext(),
    1,
    intent,
    PendingIntent.FLAG_CANCEL_CURRENT);

AlarmManager am = (AlarmManager) getSystemService(Activity.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, dateMay17th, pi); 
```

此外，您应该避免 user1566160 发布的解决方案，因为它假定您的应用程序将从现在到 5 月 17 日不间断地运行，并且永远不应该假设。

编辑：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Calendar may17th = Calendar.getInstance();
    may17th.set(Calendar.MONTH, 4);
    may17th.set(Calendar.DAY_OF_MONTH, 17);
    may17th.set(Calendar.HOUR_OF_DAY, 0);
    may17th.set(Calendar.MINUTE, 17);

    if ( Calendar.getInstance().after(may17th) ) {
       setContentView(R.layout.new_layout);
    } else {
       setContentView(R.layout.old_layout);
    }
} 
```

# actionscript-3 - 未调用 Flex Hbox 创建完成

> ID：15086538
> 
> 赞同：0
> 
> 时间：2013-02-26T10:20:14.337
> 
> 标签：actionscript-3, apache-flex, flex4.5

我正在尝试创建一个`Hbox`类似的实例

```
obj = new HBox();
disp.addElement(obj); // disp object is border container but obj is mx component 
```

这是我一直在使用显示对象添加到父容器的方式。

但它不会调用创建完成事件。

最近几天我一直在努力。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:38:51.267

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx" initialize="windowedapplication1_initializeHandler(event)">
    <fx:Script>
        <![CDATA[
            import flash.sampler.NewObjectSample;

            import mx.containers.HBox;
            import mx.controls.Alert;
            import mx.events.FlexEvent;

            protected function windowedapplication1_initializeHandler(event:FlexEvent`enter code here`):void
            {
                var hbo:HBox=new HBox();
                hbo.addEventListener(FlexEvent.CREATION_COMPLETE,ff);
                b.addElement(hbo);
            }
            public function ff(e:FlexEvent):void
            {
                Alert.show("created")
            }

        ]]>`enter code here`
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:Group id="b">

    </s:Group>
</s:WindowedApplication> 
```

# javascript - 如何找到具有两个以上坐标的谷歌地图折线的中心？

> ID：15086540
> 
> 赞同：0
> 
> 时间：2013-02-26T10:20:15.700
> 
> 标签：javascript, google-maps, center, polyline

我正在使用谷歌地图的 asp.net mvc 3 项目。我想在折线的中心显示标记。我正在使用下面的代码

```
var start = new google.maps.LatLng(
    MyMapCordinates[0].lat(),
    MyMapCordinates[0].lng()
);
var End = new google.maps.LatLng(
    MyMapCordinates[MyMapCordinates.length - 1].lat(),
    MyMapCordinates[MyMapCordinates.length - 1].lng()
);
debugger
var inBetween = google.maps.geometry.spherical.interpolate(start, End, 0.5);
var marker= new google.maps.Marker({
    position: inBetween
}); 
```

它适用于具有两个坐标的折线。但是对于具有三个以上坐标的折线，它会失败。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:24:35.650

interpolate 方法仅设计用于使用两组坐标。computeLength() 方法看起来就像您要计算多个点的距离，然后只需做一些数学运算即可找到中间点。

这有帮助吗？

# node.js - express 3.0 bodyParser 无法正常工作

> ID：15086551
> 
> 赞同：1
> 
> 时间：2013-02-26T10:21:05.117
> 
> 标签：node.js, express, connect

我正在使用最新版本的 express no.3 。我已阅读文档并完全按照所写的内容进行操作，但它仍然无法正常工作。提交后我在上传目录中获取文件，但随后一切都停止并且 app.post 的回调函数没有触发。编码：

HTML-JADE

```
form(action="/upload", method="post", enctype="multipart/form-data")
  input(type="file", name="image")
  input(type='submit', value='submit') 
```

应用程序.js

```
var express = require('express')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path')
  , mongo = require('mongodb')
  , Server = mongo.Server
  , Db = mongo.Db
  , routes = require('./routes')

var  app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser({uploadDir:'./upload'}));
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(app.router);
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.post('/upload', function(req, res) {
  console.log(req.files.image) // this doesn't fire at all - no matter what i write here 
  res.send(200) //doesn't run also
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:49:31.517

尝试向用户发送一个简单的响应。

```
app.post('/upload', function(req, res) {
  console.log(req.files.image);
  res.write('File Uploaded !!');
  res.end();
} 
```

**更新**

您应该尝试将格式更改为

```
app.post('/upload', function(err,req,res,next){
//Check for errors then handle it
} 
```

在我知道你遇到什么错误之前，我不能说太多，因为文件正在上传到上传目录`bodyParser`工作正常。也许您的路线正在由另一个功能处理，或者根本没有处理。`app.router`是调用回调的代码。

当您这样做`app.get('/upload', function(req, res) { ... });`时，实际调用回调函数来处理请求的是路由器。您能否确认是否可以`app.get('/upload',...);`成功执行 html-jade 文件。如果不是，那么您的路线就有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:39:05.167

读取数据后需要返回响应。如果不返回响应，express 不知道您的响应何时完成，节点不会关闭与客户端的连接。

尝试这个：

```
app.post('/upload', function(req, res) {
  console.log(req.files.image);

  req.on('data', function(raw) {
    console.log('received data');
  });

  req.on('end', function() {
    console.log('end');
    res.send(200);
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T17:10:59.387

最后我找到了解决方案——那是因为我使用了节点 0.9.6 -pre。更改为 0.8.21 后一切正常。

感谢你的帮助。

# php - 从sql数据库生成pdf报告

> ID：15086552
> 
> 赞同：3
> 
> 时间：2013-02-26T10:21:08.877
> 
> 标签：php, sql, pdf

我为曾经使用过的 ipad 编写了一个应用程序，将数据发送到 sql 服务器。我可以使用网页访问这些数据，目前使用的是 php，但这不是固定的，我希望能够单击网页上的按钮并从 sql 数据库中的数据生成 pdf 报告。

我不确定从哪里开始寻找，因此非常感谢任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:24:42.823

有很多图书馆可用。

[http://www.fpdf.org/](http://www.fpdf.org/)

[https://github.com/dompdf/dompdf](https://github.com/dompdf/dompdf)

谷歌它你可以得到更多。我个人使用过 fpdf。它有点难以实现，但很灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:24:33.313

您应该首先从 de 数据库中检索要显示的 de 数据，然后使用 FPDF ( [http://www.fpdf.org/](http://www.fpdf.org/) ) 或类似的类创建 .pdf 文件。*您可以在 google 中轻松找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:24:34.357

您希望生成 PDF，您有一些选择：

1.  [http://php.net/manual/en/book.pdf.php](http://php.net/manual/en/book.pdf.php)没用过这个
2.  [http://www.fpdf.org/](http://www.fpdf.org/)我自己用过这个，效果很好:)

如果您在 Google 上搜索“PHP PDF 库”，您可能会发现更多负载

# sql-server - Transact SQL - 在几分钟内插入具有指定间隔的所有日期

> ID：15086556
> 
> 赞同：0
> 
> 时间：2013-02-26T10:21:17.030
> 
> 标签：sql-server, tsql, sql-server-2000

我有一张合适房间的桌子

```
DECLARE @tblSuitableRooms TABLE
(
    RoomID BIGINT PRIMARY KEY NOT NULL,
    StartTime DATETIME NULL,
    EndTime DATETIME NULL,
    RoomStartTime DATETIME NULL,
    RoomEndTime DATETIME NULL,
    RoomStartTimeCaretaker DATETIME NULL,
    RoomEndTimeCaretaker DATETIME NULL
) 
```

并且需要将行插入到 @tblPossiblyAvailable 表中

```
DECLARE @tblPossiblyAvailable TABLE
(
    RoomID BIGINT NOT NULL,
    StartTime DATETIME NOT NULL,
    Processed BIT NOT NULL
) 
```

间隔固定的分钟数（@AdvancedSearchInterval）。我已经在表中使用了 RoomStartTimes

```
INSERT INTO @tblPossiblyAvailable
SELECT sr.RoomID, sr.RoomStartTime, 0
FROM @tblSuitableRooms sr
WHERE sr.RoomStartTime IS NOT NULL 
```

但现在我需要在@tblPossiblyAvailable 中插入更多记录，其中 StartTime 介于 RoomStartTime 和 RoomEndTime 之间，间隔为一定的分钟数（AdvancedSearchInterval）。这将允许我检查一天的房间可用性。

我需要的是这样的

RoomID 开始时间
1 2013-02-26 09:00:00
1 2013-02-26 09:30:00
1 2013-02-26 10:00:00
1 2013-02-26 10:30:00
1 2013-02 -26 11:00:00
2 2013-02-26 08:00:00
2 2013-02-26 08:30:00
2 2013-02-26 09:00:00
2 2013-02-26 09:30： 00
2 2013-02-26 10:00:00
3 2013-02-26 09:00:00
3 2013-02-26 09:30:00

我需要一个类似循环的东西，上面写着

```
insert into @tblPossiblyAvailable 
select each room from @tblSuitableRooms 
and take the start time for the room, 
then take the start time + 30 minutes and insert that with the RoomID, 
then take the last time inserted + 30 minutes and insert that with the RoomID
then take the last time inserted + 30 minutes and insert that with the RoomID
... 
```

非常感谢您的帮助。

埃德

PS 我使用的是 SQL Server 2000

该解决方案似乎有效。如果有人能想到更好的解决方法，我会非常感兴趣。

```
DECLARE @AdvancedSearchInterval tinyint
DECLARE @tblSuitableRooms TABLE
(
    RoomID BIGINT PRIMARY KEY NOT NULL,
    StartTime DATETIME NULL,
    EndTime DATETIME NULL,
    RoomStartTime DATETIME NULL,
    RoomEndTime DATETIME NULL,
    RoomStartTimeCaretaker DATETIME NULL,
    RoomEndTimeCaretaker DATETIME NULL
)
DECLARE @tblPossiblyAvailable TABLE
(
    RoomID BIGINT NOT NULL,
    StartTime DATETIME NOT NULL,
    Processed BIT NOT NULL
)

SET @AdvancedSearchInterval = 30

INSERT INTO @tblSuitableRooms
select 1, getdate(), getdate(), '2013-02-26 08:00:00', '2013-02-26 17:00:00', getdate(), getdate()
UNION ALL
select 2, getdate(), getdate(), '2013-02-26 10:00:00', '2013-02-26 19:00:00', getdate(), getdate()
UNION ALL
select 3, getdate(), getdate(), '2013-02-26 09:00:00', '2013-02-26 17:00:00', getdate(), getdate()

DECLARE @mins INT
SET @mins = 0
WHILE @mins < 1440
    BEGIN
    INSERT INTO @tblPossiblyAvailable
    SELECT RoomID, DATEADD(MINUTE,@mins,RoomStartTime), 0
    FROM @tblSuitableRooms
    WHERE DATEADD(MINUTE,@mins,RoomStartTime) < RoomEndTime

    SET @mins = @mins + @AdvancedSearchInterval
END

SELECT *
FROM @tblPossiblyAvailable
ORDER BY StartTime 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:31:59.360

我可以在不使用循环的情况下为 MS SQL 2000 建议替代解决方案：

```
SET NOCOUNT ON;

DECLARE @SearchInterval TINYINT
SELECT @SearchInterval = 30

DECLARE @SuitableRooms TABLE 
(
      RoomID BIGINT
    , RoomStartTime DATETIME
    , RoomEndTime DATETIME
)

INSERT INTO @SuitableRooms (RoomID, RoomStartTime, RoomEndTime) 
SELECT 1, '2013-02-26 08:00:00', '2013-02-26 17:00:00'
  UNION ALL
SELECT 2, '2013-02-26 10:00:00', '2013-02-26 19:00:00'
  UNION ALL
SELECT 3, '2013-02-26 09:00:00', '2013-02-26 17:00:00'

DECLARE @emun TABLE (i BIGINT IDENTITY, blank BIT)
INSERT INTO @emun (blank)
SELECT 1
FROM [master].dbo.spt_values n
CROSS JOIN (
    SELECT i = 1 
      UNION ALL 
    SELECT 2 
) b

SELECT r.RoomID, StartTime = DATEADD(MINUTE, i, RoomStartTime)
FROM (
    SELECT i = 0

    UNION ALL

    SELECT i
    FROM @emun
    WHERE i % @SearchInterval = 0
) d
CROSS JOIN @SuitableRooms r
WHERE DATEADD(MINUTE, i, RoomStartTime) < RoomEndTime
ORDER BY StartTime 
```

对于 MS SQL 版本 > 2000（很遗憾 MS SQL 2000 不支持 CTE）：

```
SET NOCOUNT ON;

DECLARE @SearchInterval TINYINT
SELECT @SearchInterval = 30

;WITH emun AS 
(
    SELECT  
          RoomID
        , StartTime
        , EndTime
    FROM (
        SELECT 
              RoomID = 1
            , StartTime = CAST('2013-02-26 08:00:00' AS DATETIME)
            , EndTime = '2013-02-26 17:00:00'

          UNION ALL

        SELECT 2, '2013-02-26 10:00:00', '2013-02-26 19:00:00'
          UNION ALL
        SELECT 3, '2013-02-26 09:00:00', '2013-02-26 17:00:00'
    ) d

    UNION ALL

    SELECT  
          RoomID
        , StartTime = DATEADD(MINUTE, @SearchInterval, StartTime)
        , EndTime
    FROM emun
    WHERE DATEADD(MINUTE, @SearchInterval, StartTime) < EndTime
)

SELECT RoomID, StartTime
FROM emun
ORDER BY StartTime 
```

# css - CSS LESSphp 变量与 CSS 代码块

> ID：15086557
> 
> 赞同：0
> 
> 时间：2013-02-26T10:21:18.193
> 
> 标签：css, less, lessphp

我想使用lessphp 添加多个样式声明。我已经为 $context 数组提供了 lessphp setVariables 方法。

```
$context['font'] = 'color: #ffffff; font-family: verdana;'; 
```

然后我想在带有变量名的less文件中使用它，如下所示：

```
.selector{
  @font;
} 
```

这不起作用，应该有什么合适的处理方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:10:33.163

根据 LESSphp 和 LESS 语法，您尝试执行的操作至少存在两个问题：

1.  来自 php 的数组需要是[成对的变量名和值](http://leafo.net/lessphp/docs/#setting_variables_from_php)，而不是属性名和值。
2.  LESS 不允许动态设置属性名称。

所以我相信你的解决方案是这样的：

**PHP**

```
$context = array(
   "fontColor" => "#ffffff",
   "fontFamily" => "verdana"
);

$less->setVariables($context); 
```

**较少的**

上面的代码应该在编译的 LESS 文件中生成与此等效的代码：

```
@fontColor: #ffffff;
@fontFamily: verdana; 
```

然后你像这样使用它：

```
.selector {
   color: @fontColor;
   font-family: @fontFamily;
} 
```

# java - Java 数据源

> ID：15086559
> 
> 赞同：0
> 
> 时间：2013-02-26T10:21:22.527
> 
> 标签：java, database, datasource

```
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at com.connect.DBHelper.getConnection(DBHelper.java:15)
    at com.connect.DemoConnect.main(DemoConnect.java:13)
java.lang.NullPointerException 
```

有什么例外？我正在尝试使用数据源..这是我的 context.xml 文件..我在 meta-inf 文件夹中添加了 xml 文件，并在 tomcat lib 文件夹中添加了 ojdbc14.jar..

```
<Context>
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
    <Resource name="jdbc/mydatasource" 
              auth="Container"
              type="javax.sql.DataSource" 
              username="YOUR_USERNAME" 
              password="YOUR_PASSWORD"
              driverClassName="oracle.jdbc.driver.OracleDriver"
              url="jdbc:oracle:thin:[oracletrg/oracle]@10.180.168.112[:1521]/orcl?autoReconnect=true"
              maxActive="10" 
              maxIdle="4"/>
</Context> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:34:35.500

在您的应用程序服务器中定义了 JNDI，并且您查找然后会出现此错误。请确保您的应用程序服务器完成了任何 jndi。

当无法创建初始上下文实现时，将引发此异常。InitialContext 类的文档中描述了如何选择初始上下文实现的策略。

在与 InitialContext 的任何交互过程中都可能引发此异常，而不仅仅是在构造 InitialContext 时。例如，初始上下文的实现可能仅在调用实际方法时才延迟检索上下文。应用程序不应依赖于何时确定初始上下文的存在。

[http://download.oracle.com/javase/6/docs/api/javax/naming/InitialContext.html](http://download.oracle.com/javase/6/docs/api/javax/naming/InitialContext.html)

# java - 如何正确声明枚举 Java

> ID：15086560
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:21:29.690
> 
> 标签：java, enums

我第一次尝试`enum`在Java中声明一个，如下：

```
public enum Atom_const{
    public final float HIDROGEN_RADIUS=.1f;
    public final float CARBON_RADIUS=.28f;
} 
```

Eclipse 给了我一个错误`"Syntax error on token "{", ; expected"`，但是我从未见过像“{;”这样的语法 `enum`以前，我也没有在示例中看到过这一点。那么声明一个的正确方法是`enum`什么？

我确实看过[http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)但没有；在 { 之后。我怀疑这是因为我做了分配，但我不确定。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T10:23:45.833

你在声明一个枚举和声明一些常量字段之间做了一半。我怀疑你想要类似的东西：

```
public enum Element {
    HYDROGEN(.1f),
    CARBON(.28f);

    private final float radius;

    private Element(float radius) {
        this.radius = radius;
    }

    public float getRadius() {
        return radius;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T10:26:40.080

如果你想在 Java 中声明一个带有浮点数的枚举，你应该这样做：

```
public enum AtomRadius {
    HYDROGEN(.1f),
    CARBON(.28f);

    private final float radius;

    private AtomRadius(float radius) {
        this.radius = radius;
    }
}

public static void main(String[] args) {
    // Example of how to use your constant
    AtomRadius atom = AtomRadius.HYDROGEN;
    System.out.println(atom.radius);
} 
```

有关更多信息检查：[http ://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:25:42.333

```
public enum Atom_const {
    HYDROGEN(.1f),
    CARBON(.28f);

    private float radius;

    private Atom_const(float radius) {
        this.radius = radius;
    }

    public float getRadius() {
        return radius;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:38:44.247

无需申报`public final float`

```
 enum Atom_const{   
   HYDROGEN_RADIUS(.1f),
   CARBON_RADIUS(.28f);} 
```

谢谢

# wpf - WPF：无法绑定到用户控件中的依赖属性

> ID：15086569
> 
> 赞同：0
> 
> 时间：2013-02-26T10:22:04.040
> 
> 标签：wpf, user-controls, dependency-properties

为什么我不能绑定到我的 UserControl 中的依赖属性？我只将字符串“Test”视为默认值，但绑定不在测试应用程序中运行。如果我在文本块对象中的测试应用程序中执行相同的绑定，则它会起作用。所以问题必须在具有依赖属性的 myItem 类中。

**代码：**

```
public partial class myItem : UserControl, INotifyPropertyChanged
{
    public static DependencyProperty HeaderProperty =
            DependencyProperty.Register("Header", typeof(String), typeof(myItem), new UIPropertyMetadata("Test"));

    public myItem()
    {
        InitializeComponent();
        DataContext = this;
    }

    public String Header
    {
        get
        {
            return (String)GetValue(HeaderProperty);
        }
        set
        {
            SetValue(HeaderProperty, value);
            OnPropertyChanged("Header");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:45:12.937

依赖属性已处理更改通知，因此您不必显式实现 INotifyPropertyChanged。所以你可以`OnPropertyChanged("Header");`从设置器中删除

如果您想在更改此属性时调用函数，正确的方法是在 Dependency 属性中定义它：

```
 public static DependencyProperty HeaderProperty =
            DependencyProperty.Register("Header", typeof(String), typeof(myItem), new PropertyMetadata("Test", OnHeaderChanged));

    public String Header
        {
            get
            {
                return (String)GetValue(HeaderProperty);
            }
            set
            {
                SetValue(HeaderProperty, value);
            }
        }

    private void OnHeaderChanged(DependencyObject d, DependencyPropertyChangedEventArgs e){ //do something} 
```

# ruby - 在 Centos 上安装 Gitlabhq 时遇到问题，但出现 rb-fsevent 错误

> ID：15086570
> 
> 赞同：1
> 
> 时间：2013-02-26T10:22:04.133
> 
> 标签：ruby, gem, centos

我需要通过协助此页面[https://github.com/mattias-ohlsson/gitlab-installer/blob/master/gitlab-install-el6.sh](https://github.com/mattias-ohlsson/gitlab-installer/blob/master/gitlab-install-el6.sh)在 Centos 上安装 Gitlabhq，但我收到 rb-fsevent 错误。

我已经安装了最新版本的 rb-fsevent gem 说但是我无法执行`bundle install`

```
$gem install fr-fsevent
Successfully installed rb-fsevent-0.9.3
Done installing documentation for rb-fsevent (0 sec).
1 gem installed 
```

但是当我运行 bundle install 我得到这个：

```
An error occurred while installing rb-fsevent (0.9.2), and Bundler cannot continue.
Make sure that `gem install rb-fsevent -v '0.9.2'` succeeds before bundling. 
```

我搜索了太多东西，但找不到一个好的解决方案。

# android - OpenGL如何检测3D立方体六面颜色

> ID：15086571
> 
> 赞同：-3
> 
> 时间：2013-02-26T10:22:07.377
> 
> 标签：android, opengl-es

> 我为各个面做了不同颜色的 3D 立方体。如果我旋转意味着我想检测哪些颜色是聚焦的或者哪些是顶点聚焦的，那么我会聚焦颜色。
> 
> > 例如，现在我看到 3 面意味着我想要 3 种颜色。如何使用openGL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:36:16.623

如果我理解正确，您想检测立方体的哪些面是可见的。您可以通过简单的数学来实现这一点。

对于每张脸：

*   让脸正常：叉积 cp = (v1-v0)x(v2-v0)
*   获取相机矢量：cf = c - v0
*   得到点积：dp = cp*cf
*   如果 dp>0 则脸部朝向相机，因此脸部可见。

更多信息和一些真实代码可以在这里找到：[http ://wiki.processing.org/w/Backface_culling](http://wiki.processing.org/w/Backface_culling)

# php - PHP - 如何让 Shell 错误回显到屏幕上

> ID：15086572
> 
> 赞同：27
> 
> 时间：2013-02-26T10:22:08.503
> 
> 标签：php, shell, ffmpeg, shell-exec

我是`shell_exec()`第一次使用。我正在尝试使用 ffmpeg shell 脚本在我的服务器上转换一些视频文件。

当我在浏览器中执行以下代码时，它返回 NULL：

```
var_dump(shell_exec("ffmpeg -i /var/www/html/sitedomain/httpdocs/tmp/ebev1177.mp4")); 
```

但是，当我在终端中运行等效代码时：

`> ffmpeg -i /var/www/html/sitedomain/httpdocs/tmp/ebev1177.mp4`

我得到了一大堆有用的信息，这些信息以错误结尾`"At least one output file must be specified"`

为什么这些信息没有被传回我的 PHP 脚本，以便我可以将其回显？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-26T10:26:07.483

错误数据从目标程序的`STDERR`流中输出。`shell_exec()`您可以通过附加`2>&1`到命令的正常返回字符串来访问错误数据，该命令将重定向`STDERR`到`STDOUT`您当前看到的流：

```
var_dump(shell_exec("ffmpeg -i /var/www/html/sitedomain/httpdocs/tmp/ebev1177.mp4 2>&1")); 
```

您可能还想看看[`proc_open()`](http://php.net/proc-open)哪些将允许您访问`STDIN`和作为三个单独的流，它们可以提供对目标程序的更细粒度的控制，以及您如何处理它的输入和输出，包括重定向`STDOUT`任何`STDERR`如果需要，所有这些都直接写入日志文件。请注意，这是一个复杂得多的机制，存在许多陷阱和绊倒危险。

可以在[此处](http://en.wikipedia.org/wiki/Standard_streams)找到有关标准流的更多信息。

# version-control - 查看 StarTeam 中所有目录中的所有更新文件

> ID：15086577
> 
> 赞同：0
> 
> 时间：2013-02-26T10:22:30.743
> 
> 标签：version-control, starteam

我有一个 StarTeam 项目。它有几个目录。当我提交更改时，我不想自己搜索所有目录来查找更改的文件。

如何在不搜索自己的情况下查看一个列表中所有目录中的所有更改文件？

我正在使用 StarTeam 2009。

PS 我来自 Mercurial 和 TortoiseHg，所以在 StarTeam 中我似乎无法轻松做到这一点，这对我来说似乎很不可思议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:15:56.877

在左侧选择树的根节点，然后选择过滤器“所有文件按状态”和旁边的短按钮“所有后代”！使用状态字段中的上下文菜单，您可以对结果进行分组。

![在此处输入图像描述](../Images/5ec5eb9138f09815816bceec0abec471.png)

乔治

# python - 清除 QListWidget 中的选择

> ID：15086579
> 
> 赞同：4
> 
> 时间：2013-02-26T10:22:38.907
> 
> 标签：python, pyqt4, qlistwidget

我正在使用`PyQt4`，并且`QListWidget`在一个窗口中，我在运行时向其中添加了项目。我想使用窗口中的一个按钮来清除对`QListWidget`.

我想知道是否有任何方法可以实现这一目标？

我检查了`clear()`但它清除了列表小部件中的项目，但我想清除列表小部件中的选择。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-14T14:31:29.550

使用[list_widget.selectionModel().clear()](http://doc.qt.io/qt-4.8/qitemselectionmodel.html#clear)或[list_widget.clearSelection()](http://doc.qt.io/qt-4.8/qabstractitemview.html#clearSelection)（感谢@ekhumoro！）。

我修改了 Junuxx 的例子：

```
from PyQt4 import QtGui, QtCore
import sys, random

def clear(listwidget):
    #listwidget.selectionModel().clear()
    listwidget.clearSelection()

app = QtGui.QApplication(sys.argv)
top = QtGui.QWidget()

# list widget
myListWidget = QtGui.QListWidget(top)
myListWidget.setSelectionMode(QtGui.QAbstractItemView.MultiSelection)
myListWidget.resize(200, 300)
for i in range(10):
    item = QtGui.QListWidgetItem("item {}".format(i), myListWidget)
    myListWidget.addItem(item)
    if random.random() > 0.5: 
        # randomly select half of the items in the list
        item.setSelected(True)

# clear button
myButton = QtGui.QPushButton("Clear", top)
myButton.resize(60, 30)
myButton.move(70, 300)
myButton.clicked.connect(lambda: clear(myListWidget))
top.show()

sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T10:56:33.210

您应该可以使用[`setItemSelected()`](http://pyqt.sourceforge.net/Docs/PyQt4/qlistwidget.html#setItemSelected)

这是一个带有“清除”按钮的 listWidget 的工作示例：

```
from PyQt4 import QtGui, QtCore
import sys, random

def clear(listwidget):
    for i in range(listwidget.count()):
        item = listwidget.item(i)
        listwidget.setItemSelected(item, False)

app = QtGui.QApplication([])
top = QtGui.QWidget()

# list widget
myListWidget = QtGui.QListWidget(top)
myListWidget.setSelectionMode(2)
myListWidget.resize(200,300)
for i in range(10):
    item = QtGui.QListWidgetItem("item %i" % i, myListWidget)
    myListWidget.addItem(item)
    if random.random() > 0.5: 
        # randomly select half of the items in the list
        item.setSelected(True)

# clear button
myButton = QtGui.QPushButton("Clear", top)
myButton.resize(60,30)
myButton.move(70,300)
myButton.clicked.connect(lambda: clear(myListWidget))
top.show()

sys.exit(app.exec_()) 
```

看起来像这样：

![在此处输入图像描述](../Images/367b0e8996e3014f4fc16cce2794795b.png)

# yii - 为 CArrayDataProvider 设置自定义键属性？

> ID：15086580
> 
> 赞同：0
> 
> 时间：2013-02-26T10:22:42.823
> 
> 标签：yii

我有：

```
$dataProvider = new CArrayDataProvider ($items , 
  array(
    'pagination'=>array(
      'pageSize'=> 10,
  ),
)); 
```

我渲染：

```
$this->widget('zii.widgets.CListView', array(
  'dataProvider'=> $dataProvider,
  'itemView' => 'items',
  'summaryText' => '',
  'emptyText' => '
  ', 
)); 
```

问题是它抱怨数据集中的 ID。它希望它被称为“id”。所以我得到：

```
Undefined property: stdClass::$id
C:\wamp\www\yii\web\CArrayDataProvider.php(108) 
```

如何更改它以使其使用“itemid”而不是“id”作为列引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:26:04.817

设置数据提供者的[`keyField`](http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider#keyField-detail)属性：

```
$dataProvider = new CArrayDataProvider ($items , 
  array(
    'keyField' => 'itemid',
    'pagination'=>array(
      'pageSize'=> 10,
  ),
)); 
```

# java - 扫描仪问题，输入信息不起作用

> ID：15086585
> 
> 赞同：0
> 
> 时间：2013-02-26T10:23:06.280
> 
> 标签：java, input, output

这个问题，我看了几百万次代码，可能我只是看不到简单的答案，但是为什么在作者姓名和作者姓氏的时候，系统打印出来是这样的：

```
Enter author Name: Enter author Surname: 
```

它应该是这样的......

```
Enter author Name: 
Enter author Surname: 
```

如果我在系统中输入信息，只记得作者的名字，我不能输入姓氏的信息。

```
import java.util.Scanner;

public class BookTest {

    public static void main(String[] args) {    

        Scanner scan = new Scanner (System.in);

        Book bookIn = new Book();

        System.out.print("Enter book title: ");
        bookIn.setTitleBook(scan.nextLine());

        System.out.print("Enter author Name: ");
        bookIn.setFirstName(scan.nextLine());

        System.out.print("Enter author Surname: ");
        bookIn.setSecondName(scan.nextLine());

        System.out.print("Enter author Nationality: ");
        bookIn.setNationality(scan.nextLine());

        System.out.print("Enter book price: ");
        bookIn.setPriceBook(scan.nextDouble());

        System.out.print("Enter book ISBN: ");
        bookIn.setIsbn(scan.nextInt());

        System.out.println("Title: " +bookIn.getTitleBook());
        System.out.println("Author: "+ bookIn.getFirstName()+ " " + bookIn.getSecondName());
        System.out.println("Price: "+bookIn.getPriceBook());
        System.out.println("ISNB Number: "+bookIn.getIsbn());
        System.out.println("Aurhor Nationality: " + bookIn.getNationality());

    }
} 
```

书类

```
public class Book {

    private double priceBook;
    private int isbn;
    private String titleBook;
    private String firstName;
    private String secondName;
    private String nationality;

    public void setTitleBook(String titleBook){
        this.titleBook = titleBook;
    }
    public String getTitleBook(){
        return titleBook;
    }

    public void setPriceBook(double priceBook) {
        this.priceBook = priceBook;
    }
    public double getPriceBook() {
        return priceBook;
    }

    public void setIsbn(int isbn) {
        this.isbn = isbn;
    }
    public int getIsbn() {
        return isbn;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public String getFirstName() {
        return firstName;
    }

    public void setSecondName(String secondName) {
        this.secondName = secondName;
    }
    public String getSecondName() {
        return secondName;
    }

    public void setNationality(String nationality) {
        this.nationality = nationality;
    }
    public String getNationality() {
        return nationality;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:31:44.773

读取 ISBN 后将扫描仪移至下一行。使用`Scanner.nextInt`输入时，仅读取数字而不是按 Enter 时创建的换行符。调用`Scanner.nextLine`after`Scanner.nextInt`读取换行符并清除缓冲区。

```
import java.util.Scanner;

public class BookTest {

    public static void main(String[] args) {    

        Scanner scan = new Scanner (System.in);

        Book title = new Book();
        Book price = new Book();
        Book isbn = new Book();
        Book fName = new Book();
        Book sName = new Book();
        Book nation = new Book();

        System.out.print("Enter book title: ");
        title.setTitleBook(scan.nextLine());

        System.out.print("Enter book price: ");
        price.setPriceBook(scan.nextDouble());

        System.out.print("Enter book ISBN: ");
        isbn.setIsbn(scan.nextInt());

        scan.nextLine(); //NOTICE CHANGE HERE
        //System.out.println(); THIS WAS REMOVED

        System.out.print("Enter author Name: ");
        fName.setFirstName(scan.nextLine());

        System.out.print("Enter author Surname: ");
        sName.setSecondName(scan.nextLine());

        System.out.print("Enter author Nationality: ");
        nation.setNationality(scan.nextLine());

    System.out.println("Title: " +title.getTitleBook());
    System.out.println("Price: "+price.getPriceBook());
    System.out.println("ISNB Number: "+isbn.getIsbn());

    System.out.println("Author: "+ fName.getFirstName() + sName.getSecondName());
    System.out.println("Aurhor Nationality: " + nation.getNationality());

    }
} 
```

# linux - 如何全局公开 url

> ID：15086591
> 
> 赞同：0
> 
> 时间：2013-02-26T10:23:13.227
> 
> 标签：linux

我们的服务器中运行着 ruby​​ 应用程序，我们可以通过 DNS 在同一网络中访问该应用程序，现在我的问题是我想通过 Internet/ 全局访问相同的 url。我需要遵循哪些步骤，在此先感谢。

问候，尼利什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:27:41.590

假设您计划自己托管该网站。

*   最初您必须购买一个静态 IP 地址。
*   购买域名。
*   使用注册商 DNS 将域映射到您的静态 IP

鉴于有这么多的托管服务提供商，而且这是一项专业技能，我建议您使用知名的托管服务提供商之一进行托管。

# python - 在 python 中使用 getattr 的替代方法？

> ID：15086592
> 
> 赞同：1
> 
> 时间：2013-02-26T10:23:15.937
> 
> 标签：python, python-2.7, sunburnt

我试图调用一个对象函数，它还允许通过同一个对象调用几个不同的函数：

> 例如：sort()、facet()、exclude() 是不同的函数，它们的参数和 sort_flag、facet_flag 和 exclude_flag 作为条件设置为 true 或 false

可以称为：

```
si = sunburnt.SolrInterface("url","schema.xml")
response = si.query(arg1).facet(arg2).sort(arg3).exclude(arg4) 
```

在某些情况下，我不需要同时调用所有这些函数，或者我可能没有所有参数来调用这些函数，反之亦然。在那种情况下，我怎么能这样称呼 si.facet(args).sort(args) ：

```
if sort_flag:
  --append sort function to the query
if exclude_flag:
  -- append exclude function 
```

可以使用 getattr 来执行此操作，但是使用函数的参数使用它会令人困惑，同时它可能会生成大量 if 检查语句（对于接近 3 个阶乘语句的 3 个标志）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:30:34.370

我不确定我是否理解你，但你不能这样做吗？

```
si = sunburnt.SolrInterface("url","schema.xml")
query = si.query(arg1).facet(arg2)

if sort_flag:
  query = query.sort(arg3)
if exclude_flag:
  query = query.exclude(arg4)

response = query.execute() 
```

# gwt - 使用 uibinder 延迟绑定失败的 GWT

> ID：15086594
> 
> 赞同：1
> 
> 时间：2013-02-26T10:23:25.657
> 
> 标签：gwt, web, uibinder, toolkit, deferred

以下是项目中使用的总文件。它给出了这些错误

```
[ERROR] [cricketscore] - Deferred binding failed for 'test.client.UserDashboard.MyUiBinder'; expect subsequent failures 
```

和

```
[ERROR] [cricketscore] - Unable to load module entry point class test.client.DashBoard (see associated exception for details). 
```

请帮我解决其中的问题。

Cricketscore.gwt.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  When updating your version of GWT, you should also update this DTD reference,
  so that your app can take advantage of the latest GWT module capabilities.
-->
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.5.0//EN"
  "http://google-web-toolkit.googlecode.com/svn/tags/2.5.0/distro-source/core/src/gwt-module.dtd">
<module rename-to='cricketscore'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>

  <!-- Inherit the default GWT style sheet.  You can change       -->
  <!-- the theme of your GWT application by uncommenting          -->
  <!-- any one of the following lines.                            -->
  <inherits name='com.google.gwt.user.theme.clean.Clean'/>
  <!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

  <!-- Other module inherits                                      -->

  <!-- Specify the app entry point class.                         -->
  <entry-point class='test.client.DashBoard'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='shared'/>

</module> 
```

仪表板.java

```
package test.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.ui.RootPanel;

public class DashBoard implements EntryPoint{

    @Override
    public void onModuleLoad() {
        RootPanel.get().add(new UserDashboard());
    }
} 
```

用户仪表板.ui.xml

```
<!-- UserDashboard.ui.xml -->

<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    xmlns:my='urn:import:test.client' >

  <g:HTMLPanel>
    <my:CricketScores ui:field='scores' teamNames='AUS, SAF, WA, QLD, VIC'/>
  </g:HTMLPanel>
</ui:UiBinder> 
```

CricketScores.java

```
package test.client;

import com.google.gwt.uibinder.client.UiConstructor;
import com.google.gwt.user.client.ui.Composite;

public class CricketScores extends Composite{

    public @UiConstructor CricketScores(String teamNames) {
          this(teamNames.split("[, ]+"));
        }

    public CricketScores(String... teamNames) {
        // TODO Auto-generated constructor stub
    }
} 
```

用户仪表板.java

```
package test.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.uibinder.client.UiFactory;
import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.Widget;

public class UserDashboard extends Composite {
      interface MyUiBinder extends UiBinder<Widget, UserDashboard>{}
      private static final MyUiBinder uiBinder = GWT.create(MyUiBinder.class);

      private final String[] teamNames;

      public UserDashboard(String... teamNames) {
        this.teamNames = teamNames;
        initWidget(uiBinder.createAndBindUi(this));
      }

      @UiFactory CricketScores makeCricketScores() { 
        return new CricketScores(teamNames);
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:13:08.687

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T09:14:27.057

我得到了同样的错误并且 uiField(provided=true) 得到了 null 但是当我在构造函数中创建相应组件的对象时它得到了解决

# .net - 如何使用 Neo4jClient 通过其 ID 获取 Neo4j 关系？

> ID：15086596
> 
> 赞同：1
> 
> 时间：2013-02-26T10:23:29.420
> 
> 标签：.net, neo4j, neo4jclient

我可以创建一个关系并且我有它的RelationshipReference。但是我如何获得与有效载荷和所有其他关系的其余部分？

使用节点我可以只使用 client.Get(nodeid) 但 AFAIK 没有类似的关系。

* * *

格雷姆林是要走的路吗？如果是这样 - 有人可以给我一个提示，因为我仍然对如何通过 Neo4jClient 进行试验和恐惧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:02:43.343

您可以为 IGraphClient 本身使用扩展方法：

```
public static class GraphClientExtensions
{
    public static RelationshipInstance<T> GetRelationship<T>(this IGraphClient graphClient, RelationshipReference relationshipReference) where T : Relationship, new()
    {
        if(graphClient == null)
            throw new ArgumentNullException("graphClient");
        if(relationshipReference == null)
            throw new ArgumentNullException("relationshipReference");

        var rels = graphClient.ExecuteGetAllRelationshipsGremlin<T>(string.Format("g.e({0}).outV.outE", relationshipReference.Id), null);
        return rels.SingleOrDefault(r => r.Reference == relationshipReference);
    }
} 
```

用法：（IsFriendOf 是一个Relationship 派生类，Data 只是一个POCO）

```
var d1 = new Data{Name = "A"};
var d2 = new Data{Name = "B"};

var d1Ref = graphClient.Create(d1);
var d2Ref = graphClient.Create(d2);
var rel = new IsFriendOf(d2Ref) { Direction = RelationshipDirection.Outgoing };
var relRef = graphClient.CreateRelationship(d1Ref, rel);

//USAGE HERE
var relBack = graphClient.GetRelationship<IsFriendOf>(relRef); 
```

这并不理想，但它确实使您的代码更易于阅读。（另外你不需要知道节点，只需要关系参考）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:35:14.413

作为这个的一个变体，[我](https://stackoverflow.com/questions/12491221/how-do-i-retrieve-a-relationship-in-neo4j-graph-database)得到了这个工作：

```
// Get every relation going out from the node we used as out-node
// when we created the relation.
var query = string.Format("g.v({0}).outE", fromNodeID);
var rels = _client.ExecuteGetAllRelationshipsGremlin<MyPayload>(
    query, null
);
// We can get too many so filter per ID.
var rel = rels.Single(r => r.Reference.Id == relID); 
```

但这不是我想要的工作方式。我有一个ID，最快的就是使用它，不是吗？

我努力了

```
var rels = _client.ExecuteGetAllRelationshipsGremlin<MyPayload>(
    "g.e(42)", null
); 
```

但所发生的只是我得到了异常：

```
{"Cannot access child value on Newtonsoft.Json.Linq.JProperty."} 
```

开始序列化的有效负载中没有任何内容。（错误？）另外：删除 <MyPayload> 没有帮助。所以我不认为这是一个反序列化问题；但是查询“ge(42)”的结果与作为工作解决方法提到的“gv(11).outE”不同。

（Neo4j 版本是 1.9.M04，我的 Neo4jClient 应该只有一周半的时间。）

# design-patterns - 我们可以直接在控制器中使用 DAO 而不是业务层对象吗？

> ID：15086598
> 
> 赞同：2
> 
> 时间：2013-02-26T10:23:36.443
> 
> 标签：design-patterns, dao, business-logic, service-layer, business-logic-layer

我不只是得到一件事..我正在做一些内部项目..（java/spring/hibernate）。我正在使用 dao 层，presentaion 层.. 在我的应用程序中使用业务层有必要吗？

我之所以问是因为，无论 dao 中有哪些方法，业务层中也存在相同的方法。所以我可以直接在我的控制器中使用 DAO，而不是业务层对象。

如果我错了，请纠正我..我在大型应用程序上编写代码方面没有太多经验..所以请给我建议（如果可能的话，请提供任何示例）

你说什么服务层？你认为我需要这个用于像我这样的小型应用程序吗？（我猜我们只有在使用 web 服务时才使用服务层，对吧？）

等待您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T06:08:22.930

除了最简单的一次性应用程序之外，您应该在所有应用程序中都有一个业务层。我想说的是，表示与业务逻辑的分离比业务逻辑与数据访问的分离更重要（尽管你真的应该两者兼而有之）。

通常，当应用程序只做 CRUD 时，似乎不需要业务层。但是，在以下情况下，这会失败：

1.  您需要更改应用程序的 UI 框架……而 UI 技术发展迅速
2.  您需要将业务逻辑作为库公开给不同的客户端代码，或者通过 Web 服务删除客户端
3.  您的应用程序增长......并获得更严格的业务规则
4.  您想开始对业务逻辑进行单元测试

如果您将业务逻辑放入表示层/控制器中，那么您的业务逻辑将永远与您的表示层绑定。你基本上是在你正在编写的代码上设置了一个人为的生命周期，同时限制了它的可重用性。当您需要更改 UI 技术时，您将需要重新编写业务逻辑。

由于这个原因，有很多 VB6 应用程序不得不被放弃和重写：它们应该在 C++ COM 对象中编写它们的业务逻辑……它们可以从 .NET 中调用。这些相同的 VB6 程序员继续使用 VB.NET Winforms 并再次犯了同样的错误。

编辑：至于服务：在需要时编写服务层。服务层通常是位于业务层前面的薄层。它实际上是您的业务逻辑的客户端。通常它会有相同的接口。除非您需要通过网络公开您的逻辑，否则您不需要一个。我曾在坚持在他们的业务逻辑之前编写 WCF 层的团队工作过……然后无论如何都要在同一台机器上运行所有代码。浪费时间并减慢应用程序。

# c++ - 如何从文件夹中读取文件？文件夹包含不同类型的文件名？

> ID：15086602
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:23:49.150
> 
> 标签：c++, c

文件夹名称示例和文件就像

```
1.text  
1_1.text , 
1_2.text, 
1_3.text,
3.text, 
4_1.text 
```

我们在从不同的文件中读取时遇到了麻烦。

代码：

```
if(dir!=NULL) { 
   while((dent=readdir(dir))!=NULL) { 
          printf(dent->d_name); 
          count++; 
   } 
} 
```

我从中获取文件名。但是我如何存储文件以及如何从所有文件中获取数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:39:16.117

[只需扩展您的代码并使用c](/questions/tagged/c "show questions tagged 'c'")打开文件 [`fopen`](http://linux.die.net/man/3/fopen)

```
if(dir!=NULL) { 
    while((dent=readdir(dir))!=NULL) { 
        FILE *fp = fopen(dent->d_name, "r");
        /* process file */
        fclose(fp);
   } 
} 
```

或[C++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题") [`fstream`](http://www.cplusplus.com/reference/fstream/)

```
if(dir!=NULL) { 
    while((dent=readdir(dir))!=NULL) { 
        ifstream f(dent->d_name);
        /* process file */
   } 
} 
```

如果你在 Unix 上，你可以用它[`stat`](http://linux.die.net/man/2/stat)来验证，这`dent->d_name`确实是一个文件，而不是一个目录或一些特殊文件。

# angularjs - Angular：在更改后选择有效时显示表单元素显示循环中的所有隐藏表单元素，而不是仅更改选择的那个

> ID：15086603
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:23:49.410
> 
> 标签：angularjs

我像这样在 ng repeat 中重复事情

```
<div class="" ng-repeat="deutscheBankEvent in deutscheBankEvents">
    <div class="schrottler-opened schrottler" title="">
        <span class="presse_ueber" style="font-size:22px;margin-left:10px;font-weight: normal;margin-top:5px">{{deutscheBankEvent.name}}</span>
    </div>
            <!-- data-ng-repeat also possible-->
            <div class="">
                <div class="presse_content">

                    <Div style="color:white">{{deutscheBankEvent.name}}</div>
                    <ul class="liste_k"> 
                      <li ng-repeat="list in deutscheBankEvent.list">
                        {{list}}
                      </li>
                    </ul>
                </div>
            </div> 
```

后来代码出现了一个表格来注册事件。在用户通过 select 选择地点和日期之前，表单会一直隐藏。这是这样触发的：

```
<span ng-show="myForm.locationDate.$valid"> 
```

我现在的问题是：当一个选择有效时，这会显示所有隐藏的表单元素。如何将范围设置为仅更改此范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:36:20.053

由于`ng-repeat`创建了一个新的范围，更改`ng-show`/`ng-hide`条件到范围绑定属性将完美地工作（[示例](http://jsfiddle.net/bmleite/K6TF5/22/)）。

# java - 使用 Weblogic 的客户端证书

> ID：15086608
> 
> 赞同：1
> 
> 时间：2013-02-26T10:24:07.160
> 
> 标签：java, ssl, client, certificate, weblogic

背景：
我正在开展一个项目，该项目涉及客户对其自身进行身份验证（通过客户证书）。我们正在尝试启动第三方应用程序，该应用程序首先验证客户端证书，然后启动其应用程序。
我们正在使用 Java 和 SSL hanshake，我们的客户端服务器是 Weblogic 10.x。客户端证书采用 PKCS12 格式（无法更改）
这是用于呈现证书的代码：

```
System.setProperty("javax.net.ssl.keyStore","MyPath/cert.pfx");
System.setProperty("javax.net.ssl.keyStorePassword","MyPwd");
System.setProperty("javax.net.ssl.keyStoreType","PKCS12");
url.openConnection(); 
```

现在，所有这些都可以在独立的情况下很好地工作。当我们把它放在 weblogic 上时，问题就开始了。有时它可以工作，有时会返回“客户端证书不存在”（http 403.7）。我尝试了各种组合（包括在 weblogic 控制台上配置自定义密钥库），但似乎没有任何效果。知道为什么 weblogic 会完全忽略 SSL 设置（即使我将密钥库设置为不存在的文件，它也不会引发错误）？用于 SSL 的 System.setProperty 在 weblogic 上似乎毫无用处！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-19T18:18:32.090

在 Weblogic 12c 中，您还需要添加参数**`-DUseSunHttpHandler=true`**以告诉 weblogic 服务器使用 Sun Http Handlers 而不是它自己的。因此，您需要以下 Java VM 参数：

```
-Djavax.net.ssl.keyStore=MyPath/cert.pfx
-Djavax.net.ssl.keyStoreType=PKCS12
-Djavax.net.ssl.keyStorePassword=MyPwd
-DUseSunHttpHandler=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:37:50.767

终于找到解决办法了！如果如上所述通过 Java 完成，Weblogic 似乎会覆盖密钥库配置。对我有用的是在 Web 逻辑启动时在 JVM 级别配置 SSL 设置。
为了让它工作，我刚刚在 weblogic 的启动脚本中添加了这些 Java 选项：

```
-Djavax.net.ssl.keyStore=MyPath/cert.pfx
-Djavax.net.ssl.keyStoreType=MyPwd
-Djavax.net.ssl.keyStorePassword=PKCS12 
```

从那时起，重新启动的网络逻辑和 SSL 一直运行良好:)

# objective-c - 活动指示器作为注释附件

> ID：15086610
> 
> 赞同：1
> 
> 时间：2013-02-26T10:24:14.083
> 
> 标签：objective-c, xcode, annotations, mkmapview, uiactivityindicatorview

我有一个带有注释的 mapView，它们有一个按钮作为右附件视图。如果您在注释详细信息出现时立即按下按钮，则详细信息显示为空，因为没有足够的时间下载所需的信息。我正在寻求的是显示一个活动指示器，只要该信息正在下载。这是我到目前为止所拥有的：

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation{

popButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 31, 31)];
[popButton addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];
activityI = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 31, 31)];
[activityI startAnimating];
[popButton addSubview:activityI];
[NSThread detachNewThreadSelector:@selector(threadInfo:) toTarget:self withObject:annotation];
.
.
.
annView.rightCalloutAccessoryView = popButton;
}

-(void) threadInfo: (MKAnnotationView*) info{

while ([activityI isAnimating]) {
    if (ok ==0) {

    }
    else{

        NSLog(@"ok = %i",ok);
        popButton = (UIButton*) info.rightCalloutAccessoryView; <--error*
        popButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
        [activityI removeFromSuperview];
        [activityI stopAnimating];
        ok=0;
        }
    }

} 
```

其中 "ok" = 整数 其中 1 = 下载过程成功完成时

其中错误 = 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[“注释类名称”rightCalloutAccessoryView]：无法识别的选择器发送到实例 0x17e7fc60'

即使我注释掉按钮，我仍然会在没有崩溃的情况下进行动画处理..

更新：（所有注释掉的东西都已经过测试并且不能正常工作 - 不一定同时。任何没有注释的东西都是我最后一次尝试）......

```
-(void) threadInfo: (MKAnnotationView*) annView{
UIButton* popButtons = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 31, 31)];
act = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 31, 31)];
[act setColor:[UIColor greenColor]];
[act startAnimating];
[popButtons addSubview:act];
while ([act isAnimating]) {
            if (ok ==0) {
        NSLog(@"ok = %i",ok);

    }
    else{

        NSLog(@"ok = %i",ok);

      // popButton = (UIButton*) annView.rightCalloutAccessoryView;
//UIButton* popButtons = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 31, 31)];
        popButtons = [UIButton buttonWithType:UIButtonTypeInfoLight];
       // UIActivityIndicatorView *currentActivityIndicator = (UIActivityIndicatorView *)[popButton viewWithTag:15];
        //currentActivityIndicator.hidden = YES;
        //[popButtons addSubview:[(UIActivityIndicatorView*) [popButton viewWithTag:15]]];
//            [(UIActivityIndicatorView *) [popButton viewWithTag:15] stopAnimating];
//            [(UIActivityIndicatorView *) [popButton viewWithTag:15] removeFromSuperview];
        annView.rightCalloutAccessoryView = popButtons;
        //[popButton addSubview:popButtons];
      //  NSLog(@"view = %@",[popButton viewWithTag:15]);
        //[act stopAnimating];

//            [currentActivityIndicator stopAnimating];
//            [currentActivityIndicator removeFromSuperview];

      //  popButton = [UIButton buttonWithType:UIButtonTypeInfoLight];

    //ok=0;
}
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:52:53.577

`activityI`您使用的不一定`threadInfo`是附加到正在使用的 annotationView 的那个（`info`变量）。它只是通过调用创建的最后一个，`viewForAnnotation`可以随时为任何注释调用。您需要获取打开的活动指示器`info`。这里有一些伪代码让你开始。获取附件视图，然后获取您添加的活动指示器的子视图`viewForAnnotation`

```
popButton = (UIButton*) info.rightCalloutAccessoryView;
UIActivityIndicator *currentActivityIndicator = (UIActivityIndicator *)[popButton **Get the right subview here**]; 
```

另一种选择是直接将附件视图设置为信息按钮

```
info.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeInfoLight]; 
```

您将 popButton 指向 rightCalloutAccessoryView，然后将其指向一个新按钮，但这不会改变 rightCalloutAccessoryView

# android - 授予对android应用程序的root访问权限

> ID：15086613
> 
> 赞同：0
> 
> 时间：2013-02-26T10:24:24.157
> 
> 标签：android

我正在构建一个应用程序，它必须具有超级用户权限才能在 /data 目录中写入修改数据库文件的内容。我写了一些代码来获得 root 访问权限，但它在日志中给了我不能“获得 root 访问权限或被用户拒绝”

我的代码是

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if(canRunRootCommands())
            Toast.makeText(this, "Can Run Root Commands", Toast.LENGTH_LONG).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

     public static boolean canRunRootCommands()
       {
          boolean retval = false;
          Process suProcess;

          try
          {
             suProcess = Runtime.getRuntime().exec("su");

             DataOutputStream os = new DataOutputStream(suProcess.getOutputStream());
             DataInputStream osRes = new DataInputStream(suProcess.getInputStream());

             if (null != os && null != osRes)
             {
                // Getting the id of the current user to check if this is root
                os.writeBytes("id\n");
                os.flush();

                String currUid = osRes.readLine();
                boolean exitSu = false;
                if (null == currUid)
                {
                   retval = false;
                   exitSu = false;
                   Log.d("ROOT", "Can't get root access or denied by user");
                }
                else if (true == currUid.contains("uid=0"))
                {
                   retval = true;
                   exitSu = true;
                   Log.d("ROOT", "Root access granted");
                }
                else
                {
                   retval = false;
                   exitSu = true;
                   Log.d("ROOT", "Root access rejected: " + currUid);
                }

                if (exitSu)
                {
                   os.writeBytes("exit\n");
                   os.flush();
                }
             }
          }
          catch (Exception e)
          {
             // Can't get root !
             // Probably broken pipe exception on trying to write to output stream (os) after su failed, meaning that the device is not rooted

             retval = false;
             Log.d("ROOT", "Root access rejected [" + e.getClass().getName() + "] : " + e.getMessage());
          }

          return retval;
       } 
```

如何获得对a的root访问权限，以便我可以更新数据库文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-06T00:28:27.380

使用该`RootTools`库，它使root更容易，您不需要使用`Process`和使用大量代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-06T00:33:26.927

除非设备已植根，否则在正常情况下无法获得根。您不能**强制**您的应用程序在非根条件之外拥有根。请研究根的含义。

# glimpse - Glimpse Null Reference Error PostImplementation

> ID：15086614
> 
> 赞同：1
> 
> 时间：2013-02-26T10:24:30.807
> 
> 标签：glimpse

当我启用 glimpse 并且每当我导航到 MVC 3 站点中包含任何参数的页面时，我都会收到此错误：-

[NullReferenceException：对象引用未设置为对象的实例。] Glimpse.Mvc.AlternateType.GetBinder.PostImplementation(IAlternateMethodContext context, TimerResult timerResult) +146 Glimpse.Core.Extensibility.AlternateMethod.NewImplementation(IAlternateMethodContext context) +73 Glimpse。 Core.Extensibility.AlternateTypeToCastleInterceptorAdapter.Intercept（IInvocation 调用）+165

有谁知道我该如何解决这个问题？

似乎任何带有参数的 url 都会导致该错误。

我有异步页面：-

本地主机：52603/图表/索引

在重定向到需要以下参数的页面之前不会出错：-

本地主机:52603/chart/displaymodel?modelid=5b881fc7-c789-4d24-a52f-b34a56c098e1 本地主机:52603/MakeImage/DisplayMakeImage?makeId=456ab51c-a4bb-4e2a-a673-de38de4ec28d

我在站点中使用了几种不同的技术：-EF4/SignalR/MEF/Redis/Tropo/Log4net/Elmah

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:27:35.227

同样的问题，我认为是 Glimpse 1.0 中的一个错误。

我刚刚恢复到[0.87](http://nuget.org/packages/Glimpse.Mvc3/0.87)，它对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:54:39.903

这已被确认为 Glimpse 1.0.0 中的一个错误。

您可以[在 GitHub 上跟踪问题报告，](https://github.com/Glimpse/Glimpse/issues/268)以了解此错误的最新进展。

带来不便敬请谅解！

编辑：此错误现已修复，[可在 Glimpse 1.0.1中使用](https://nuget.org/packages/Glimpse.Mvc3)

# background - 背景与暂停应用程序状态之间的混淆

> ID：15086619
> 
> 赞同：9
> 
> 时间：2013-02-26T10:24:37.657
> 
> 标签：background, ios5, uiapplication, application-state

我对这两种状态有点困惑。以下是我的理解；

> 当应用程序在后台并且如果您`"Application does not run in background"`在 App plist 文件中设置为 NO 时，应用程序将继续在后台运行。在挂起模式下，应用程序留在内存中但不执行代码！当 App 进入 Suspended 状态时，系统不会通知 App，并在内存不足的情况下从内存中清除 App，为前台 App 腾出空间。

我的理解正确吗？如果是这样，那么当应用程序在后台运行并执行代码时，为什么我不在控制台上打印我的 NSLog？我不断从服务器获取数据的 TCP 套接字连接实际发生了什么？为什么我们需要暂停状态，因为无论如何系统最终会在内存不足的情况下从内存中清除 App。App从暂停状态变为活动状态或重新开始有什么区别吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T15:23:33.300

您应该查看*IOS App Programming Guide* 部分“App States and Multitasking”。通过搜索 Xcode 文档并将短语“App States and Multitasking”和“Hits Must”项设置为“Match Search Term”来找到它。另一个有用的搜索短语：“后台执行”。

总结的答案是，应用程序可以无限期地在后台继续“执行”，原因有限：

> 在 iOS 中，只允许特定类型的应用程序在后台运行：
> 
> *   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
> *   让用户随时了解其位置的应用程序，例如导航应用程序
> *   支持互联网协议语音 (VoIP) 的应用程序
> *   需要下载和处理新内容的报亭应用
> *   从外部配件接收定期更新的应用程序

除了这些特定操作之外，应用程序还可以要求在很短的时间内继续执行，文档在“在后台执行有限长度任务”部分中对此进行了介绍。不久之后，您的应用程序要么告诉系统它已完成（然后被挂起），要么它被强制终止。文档中的详细信息。

该文档的另一个有用部分是“管理应用程序状态更改”部分，其中包含漂亮的状态图。该部分讨论了进入后台和返回前台。它应该回答您关于重新开始与从暂停状态开始之间的区别的问题。简短（不太正确）的答案是，如果您从暂停状态开始并且在进入后台或（重新）进入前台时不采取任何特殊操作，那么您只是或多或少地从您所在的位置继续. 此外，从挂起状态开始更快。阅读文档，因为它说的比我的解释要好得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-06T13:10:19.013

应用状态

**未运行：**您的应用在启动之前处于此状态。

**活动：**一旦您的应用程序启动，接收事件。

**非活动：**当您的应用程序正在运行但发生某些事情中断它时，例如电话，它会变为非活动状态。非活动意味着应用程序仍在前台运行，但它没有接收事件。

**后台：**在这种状态下，您的应用程序不再处于前台，但它仍然能够运行代码。

**已暂停：**您的应用程序在无法再运行代码时进入此状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-12T09:27:21.013

**背景：**

*   执行代码 - 代码在应用程序处于后台状态时执行。
*   应用程序必须先进入后台状态，然后才能进入挂起状态。
*   IE。假设您在 Facebook 上并上传了一个视频，并且您在按下 POST 按钮后立即快速切换到另一个应用程序。尽管您切换到另一个应用程序而无需终止该应用程序，但该应用程序可以配置为执行后台进程以完成上传。
*   处于后台的应用程序并不一定意味着它被暂停，但被暂停的应用程序处于后台。
*   应用程序可以请求在后台模式下停留额外的时间（例如，为了在后台播放音频或完成网络请求）；之后它要么进入挂起状态，要么被系统强行终止。

**暂停：**

*   不执行代码 - 应用程序处于挂起状态时不执行代码。
*   处于挂起状态的应用程序也处于后台状态。
*   系统会将应用程序移至此状态，而不会事先通知您。
*   处于挂起状态的应用程序仍在内存中。

**一些可能对您有所帮助的附加信息：**

*   UIApplication 通过 AppDelegate 中的方法通知应用程序状态转换。
    大多数状态转换都伴随着这些方法。
    这些方法是 UIApplicationDelegate 协议的一部分。
    它们为您提供了响应状态变化的机会。

    例如，下面的方法告诉代理应用程序何时将终止。
    - 只有在应用程序在被终止之前处于后台时才会调用它；没有暂停。

    > func applicationWillTerminate(_ application: UIApplication) { ... }

*   除了 Charlie Price 2013 年的回答外，iOS 现在还允许后台：

    *   表示有新内容可供下载的远程通知。当远程通知到达时，系统会在后台启动或恢复应用程序，并给它一点时间来下载新内容。
    *   CORE BLUETOOTH 在后台与蓝牙配件通信。
    *   *[点击这里查看更多详情](https://i.stack.imgur.com/wWq2G.png)*
*   UIApplication.shared.backgroundTimeRemaining 告诉您在系统终止应用程序之前还剩多少秒。3 分钟是最大时间限制，但每次在后台模式下唤醒应用程序时都会重新启动此时间。

*   您可以通过在 info.plist 中将 UIApplicationExitsOnSuspend 键设置为 YES 来防止您的应用程序进入后台或暂停状态，而是立即终止。

*   您可能会发现有用的其他链接：

    *   [https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html)
    *   [https://developer.apple.com/documentation/uikit/core_app/managing_your_app_s_life_cycle/preparing_your_app_to_run_in_the_background/about_the_background_execution_sequence](https://developer.apple.com/documentation/uikit/core_app/managing_your_app_s_life_cycle/preparing_your_app_to_run_in_the_background/about_the_background_execution_sequence)

    *   [https://medium.com/@abhimuralidharan/finite-length-tasks-in-background-ios-swift-60f2db4fa01b](https://medium.com/@abhimuralidharan/finite-length-tasks-in-background-ios-swift-60f2db4fa01b)

    *   [https://qph.fs.quoracdn.net/main-qimg-473264d5d9f0ec16d57b8dffcc9824d8](https://qph.fs.quoracdn.net/main-qimg-473264d5d9f0ec16d57b8dffcc9824d8)

# c# - 允许非管理 Windows 帐户自动更新应用程序

> ID：15086624
> 
> 赞同：0
> 
> 时间：2013-02-26T10:24:45.180
> 
> 标签：c#, admin

我正在使用 C# 4.0 制作一个 Windows 窗体应用程序，Ubuntu PC 将作为 ClickOnce 部署的主机。用户的 Windows 帐户不是管理员帐户。如果有更新，用户有什么方法可以在不输入管理员密码的情况下更新应用程序？

编辑：或者无论如何，当应用程序最初安装在用户的机器上时，我在 Windows 系统上注册了我的应用程序，说这个应用程序的任何更新都可以在没有管理员权限的情况下完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:35:46.793

好吧，这取决于应用程序是否需要任何提升的权限。如果更新不涉及任何注册表更改或任何系统级 DLL 更改，则更新应用程序应该没有任何问题。

如果它需要提升的权限，那么管理员可以通过使用应用程序部署和组策略分配或发布 Windows Installer 程序包，在用户计算机上公布应用程序。这样当非管理员用户可以安装应用程序时。

# r - R-yearqtr 数据 xts，访问单季度

> ID：15086628
> 
> 赞同：0
> 
> 时间：2013-02-26T10:24:52.717
> 
> 标签：r, xts

我有一个 xts 对象，它是 yearqtr（1990 Q1 2012 Q3）。我想处理截至 2011 年第三季度的数据。我尝试了几件事：

```
data["1990::2011:3"]
data["1990/2012-3"] 
```

3 被视为每月一次，所以如果我使用

```
data["1990::2012:9]
data["1990/2012-9] 
```

我得到了第三季度。然而，这是不方便的。我希望有第三节，只要我把一个三分放在小括号里。我怎么写这个？

提前致以最诚挚的问候和感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:46:37.547

您可以使用`subset`

```
subset(data, index(data) >= as.yearqtr('1995 Q1') & index(data) <= as.yearqtr('2011 Q1')  ) 
```

或者只是使用普通子集`[ ]`

```
data[index(data) >= as.yearqtr('2000 Q1') &  index(data) <= as.yearqtr('2011 Q1') ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:50:42.917

试试这个

```
 data["1990::2011:x"] 
```

其中 x = 7 或 8 或 9 ：它们给出所有相同的结果。

这里有一个例子

```
x <- as.yearqtr(1990 + seq(0, 4*(2013-1990))/4)
zz <- xts(rnorm(length(x)),x, frequency = 4)
as.ts(zz["1990::2011:9"]) 
```

# jquery - IE 8.0 中的 cufon + 手风琴问题

> ID：15086632
> 
> 赞同：0
> 
> 时间：2013-02-26T10:25:01.603
> 
> 标签：jquery, jquery-ui, accordion, cufon

我在我正在开发的网站上使用 jQuery UI Accordion。h2 标签采用 Cufon 样式，在 FF 和 Chrome 中一切正常。但是，在 IE 8.0 中，我用于 Accordion 标题的 h2 标签不是“可点击的”。它们周围的区域和箭头图标都可以展开/折叠 Accordion，但不是 h2 标题本身。

这显然是一个 Cufon 问题，因为默认字体在 IE 8.0 中工作得很好。我真的想不出一个解决方案，任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:36:17.893

为什么要在 2013 年使用 Cufon。目前使用的所有浏览器都[支持](http://caniuse.com/#feat=fontface)Web 字体，甚至 IE6。这是一个很棒的[教程](http://www.html5rocks.com/en/tutorials/webfonts/quick/)。

# android - 如何为安卓应用添加“图标”以打开应用界面

> ID：15086646
> 
> 赞同：-4
> 
> 时间：2013-02-26T10:25:48.357
> 
> 标签：android, eclipse, icons, project

对 Android 来说非常新。有人可以告诉我如何为应用程序添加图标..有人可以告诉我这样做的步骤..吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:37:17.193

*   转到您的 AndroidManifest.xml 文件

*   搜索应用程序标签。

*   在其中添加“android:icon="@drawable/icon" 之类的图标选项。

见下图，

> > ![在此处输入图像描述](../Images/2f2393e570eccfaffbe7e647ee71afd1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:31:45.570

您可以将 res 文件夹中的 ic_launcher png 替换为您的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:26:43.517

打开`manifest.xml`您的应用程序文件。

```
android:icon="@drawable/ic_launcher" 
```

此行将在应用程序分支中用于图标。将那里的可绘制资源 id 更改为要保留为应用程序图标的可绘制文件夹图像的 id。

# jboss7.x - JBOSS EAP 6 JMX MBeans 通过 rmi

> ID：15086647
> 
> 赞同：2
> 
> 时间：2013-02-26T10:25:53.490
> 
> 标签：jboss7.x, jmx, mbeans, jboss-eap-6

我是 JMX 的新手，在这里我尝试使用 jdk 提供的 jconsole 来远程读取 JBOSS EAP 6 的 MBean。我按照教程，[http://magnus-k-karlsson.blogspot.in/2013/01/ how-to-remote-connect-jconsole-to-jboss.html](http://magnus-k-karlsson.blogspot.in/2013/01/how-to-remote-connect-jconsole-to-jboss.html)我可以使用 eap 6 (EAP6_HOME)/bin/jconsole.sh 提供的 jconsole 远程读取，但我无法做到这一点jdk的jconsole？请给出你的想法。我怀疑这可能是由于 (service:jmx:remoting-jmx://192.168.0.3:9999 ) jmx 远程 url 的 remoting-jmx 协议。jboss-eap6 是否支持 rmi(service:jmx:rmi:///jndi/rmi://ipadress/mbeanname) 协议来读取 jconsole 中的 MBean？

谢谢，狮子座。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T10:42:28.553

默认情况下，连接时在 jconsole 的窗口中会有一个 MBeans 选项卡：

```
 service:jmx:remoting-jmx://jbossHost:9999 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T12:10:57.607

为了能够使用 remoting-jmx 协议，您需要拥有`jboss-client.jar`或`jboss-cli-client.jar`在 JConsole 类路径上。

以下是 JBoss 提供的 jconsole.sh 中的相关部分：

```
CLASSPATH=$JAVA_HOME/lib/jconsole.jar
CLASSPATH=$CLASSPATH:$JAVA_HOME/lib/tools.jar
CLASSPATH="$CLASSPATH:$JBOSS_HOME/bin/client/jboss-cli-client.jar"

$JAVA_HOME/bin/jconsole -J-Djava.class.path="$CLASSPATH" "$@" 
```

PS您可能需要先创建一些用户帐户。看`$JBOSS_HOME/bin/add-user.sh`

# objective-c - 为 NSSplitView 子视图设置固定高度

> ID：15086654
> 
> 赞同：0
> 
> 时间：2013-02-26T10:26:04.917
> 
> 标签：objective-c, macos, cocoa, nssplitview

好的，所以这是交易：

*   我有一个垂直`NSSplitView`（实际上使用[**DMSplitView**](https://github.com/malcommac/DMSplitView) sublass），其中有 2 个子视图
*   我希望底部的高度固定
*   `DMSplitView`在某些条件下设法“修复”它的大小（例如，当窗口调整大小时，底部视图保持原样）
*   但是，如果用户尝试拖动调整视图的大小（尽管已经设置了最小/最大约束），他能够做到，这意味着底部视图毕竟不是固定高度。

这是我所有的（相关）代码：

```
[_mainHorizontalSplitView setMinSize:25 ofSubviewAtIndex:1];
[_mainHorizontalSplitView setMaxSize:25 ofSubviewAtIndex:1]; 
```

那么，对此可能的解决方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:44:15.653

刚刚找到它（实际上是对`DMSplitView`委托的修改）：

```
 - (CGFloat)splitView:(NSSplitView *)splitView 
constrainSplitPosition:(CGFloat)proposedPosition 
           ofSubviewAt:(NSInteger)dividerIndex
  {
       return [self positionOfDividerAtIndex:dividerIndex];
  } 
```

# asp.net-mvc - ASP.NET MVC，“视图模型类的成员”的定义

> ID：15086665
> 
> 赞同：1
> 
> 时间：2013-02-26T10:26:31.093
> 
> 标签：asp.net-mvc

我正在阅读一本关于 ASP.NET MVC 的书，它指的是“视图模型类的**成员”？**具体什么是“**会员**”？一个例子会有很大帮助！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:28:26.867

A[`class member`](http://msdn.microsoft.com/en-us/library/aa645622%28v=vs.71%29.aspx)可以是[`property`](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx), [`field`](http://msdn.microsoft.com/en-us/library/ms173118.aspx), [`method`](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.80%29.aspx), `constant`, `event`, ...

这是具有属性（它是成员）的视图模型的示例：

```
public class MyViewModel
{
    public string FooBar { get; set; }
} 
```

或使用属性和方法：

```
public class MyViewModel
{
    public string FooBar { get; set; }

    public string FormatTheFoo()
    {
        return string.Format("{0} bazinga", this.FooBar);
    }
} 
```

就事件而言，它们确实是成员，但就 ASP.NET MVC 视图模型而言，它们可能不是常用的东西。

# iphone - iPhone应用程序的多个副本

> ID：15086671
> 
> 赞同：2
> 
> 时间：2013-02-26T10:26:44.193
> 
> 标签：iphone

我们正在集思广益创建一个 iphone 应用程序（最终是 android 应用程序），我们希望为我们集团内的多家公司复制该应用程序。

如果我们有同一个应用程序的多个副本，它们具有不同的应用程序名称、图标、背景图形，但功能相同并将付款发送到同一个贝宝帐户。

如果我们提交多个副本本质上是相同的应用程序但不同的业务，Apple 会不会有问题？

感谢您的任何建议大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:33:31.813

从经验上讲，应该没有问题。

我们发布了几个外观相同的应用程序，只有不同的颜色和不同的内容。

也就是说，苹果一直出于许多其他不同的原因而拒绝。很多是我们无法预测的。但我要调查的一个问题是您的 Paypal 用例以及 Apple 是否允许。

看看[这个 SO question](https://stackoverflow.com/a/850940/63678)

# c++ - 矢量派生类的复制构造函数

> ID：15086673
> 
> 赞同：0
> 
> 时间：2013-02-26T10:26:58.290
> 
> 标签：c++, vector, constructor, copy-constructor

我有以下课程。

```
class CA {
...
};

class CB: public vector<CA> {
...
}; 
```

我应该如何实现 CB 的复制构造函数？IE，

```
CB(CB& cb). 
```

如何将 cb 的向量的内容复制进去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:56:28.217

忽略从`std::vector`.`Foo`你`std::vector`在继承层次结构中的位置：

```
#include <iostream>

struct Foo
{
  Foo() {}
  Foo(const Foo&) { std::cout << "Copy Foo\n";}
};

struct Bar : public Foo
{
  Bar() {}
  Bar(const Bar& b) : Foo(b) {}
};

int main()
{
  Bar b1;
  Bar b2(b1);
} 
```

# python - .Net 2.0 中的 IronPython XML-Reader

> ID：15086674
> 
> 赞同：0
> 
> 时间：2013-02-26T10:26:58.620
> 
> 标签：python, xml, ironpython

我创建了一个 XML-Reader，它创建了一个非常愚蠢的格式化列表，但要使用它的脚本需要这种方式。

```
import xml.etree.ElementTree as ET

PATH_IN = "<Path>\sweep.xml"

tree = ET.parse(PATH_IN)
root = tree.getroot()

Input = []
for project in root:

    for design in project:
        list_lvl2 = []
        list_lvl2.append(project.get('name'))
        list_lvl2.append(design.get('name'))
        list_lvl2.append('')

        list_lvl3 = [] 
        for param in design:
            list_lvl4 = []
            list_lvl4.append(param.get('name'))
            list_lvl5 = []
            for steps in param:
                list_lvl5.append(steps.text)
            list_lvl4.append(list_lvl5)
            list_lvl4.append(param.get('unit'))
            list_lvl3.append(list_lvl4)
        list_lvl2.append(list_lvl3)
        Input.append(list_lvl2) 
```

问题是我必须在.NET 2.0.50727.5466 上使用 IronPython 2.6.10920.0 的程序的脚本接口中执行它。它会引发以下错误：

```
*Global - Messages
  [error] ImportException: No module named expat; use SimpleXMLTreeBuilder instead  In file "<Path>/sweep.py", line 36 ---- While executing script: <Path>/sweep.py
  [error] Error executing script in <Path>\sweep.py:
  [error] ImportException: No module named expat; use SimpleXMLTreeBuilder instead  In file "<Path>/sweep.py", line 36 ---- While executing script: <Path>/sweep.py
  [error] Error executing script in <Path>\sweep.py: 
```

我不明白的是，这个使用相同模块的脚本工作正常：

```
import xml.etree.ElementTree as ET

path = "<Path>\projects.xml"

root = ET.Element('xml')
projects = oDesktop.GetProjectList()
for i in projects:
    project = ET.SubElement(root,'project')
    project.set('name', i)
    designs = oDesktop.SetActiveProject(i).GetTopDesignList()
    for u in designs:
        design = ET.SubElement(project,'design')
        design.set('name', u)
        vars = oDesktop.SetActiveProject(i).GetDesign(u).GetVariables()
        for z in vars:
            param = ET.SubElement(design,'param')
            param.set('name', z)
            value = ET.SubElement(param,'value')
            value.text = oDesktop.SetActiveProject(i).GetDesign(u).GetVariableValue(z)
f = open(path, "w")
tree = ET.ElementTree(root)
tree.write(f)

f.close() 
```

oDesktop 等只是获取数据的程序特定功能。我真的不明白为什么第一个脚本不起作用，我猜是因为 NET 2.0。

更新：在查看了 expat 是什么之后，我更加困惑，因为我从不在任何地方使用它，而且我使用的所有 elementtree 函数都应该在这个版本的 Iron Python 中得到支持。仍然给我这一行的外籍人士错误`tree = ET.parse(PATH_IN)`

更新：我尝试使用`from elementtree import SimpleXMLTreeBuilder as ET`导致：

```
*Global - Messages
  [error] ImportException: No module named elementtree  In file "<Path>/sweep.py", line 3 ---- While executing script: <Path>/sweep.py
  [error] Error executing script in <Path>\sweep.py: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:36:57.273

这里的基本问题是 ElementTree 使用 expat 进行 xml 解析，但无法从 IronPython 使用 expat（通过 CPython 包装器提供给 Python 的 C 库）。

但是，ElementTree 可以使用由不同解析器驱动的不同树构建器，例如 .NET 中的 XMLReader 解析器。搜索“xmlreader treebuilder”会产生[这个结果](http://pydoc.net/Python/Aglyph/1.1.0/aglyph.compat.ipyetree/)，它似乎既描述了您的问题*，又*提供了使用 XMLReader 的替代 treebuilder 实现（MIT 许可证）。

# javascript - 替换特定标签名称 javascript

> ID：15086677
> 
> 赞同：6
> 
> 时间：2013-02-26T10:27:05.523
> 
> 标签：javascript

我想知道我们是否可以更改标签中的标签名称而不是其内容。我有这个内容

```
< wns id="93" onclick="wish(id)">...< /wns> 
```

在希望功能中，我想将其更改为

```
< lmn id="93" onclick="wish(id)">...< /lmn> 
```

我试过这种方式

```
document.getElementById("99").innerHTML =document.getElementById("99").replace(/wns/g,"lmn") 
```

但它不起作用。请注意，我只想更改具有特定 id 的特定标签，而不是每个 wns 标签。

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-26T10:35:17.747

您不能更改现有 DOM 元素的标签名称；相反，您必须创建一个替换，然后将其插入元素所在的位置。

其基础是将子节点移动到替换中，并类似地复制属性。例如：

```
var wns = document.getElementById("93");
var lmn = document.createElement("lmn");
var index;

// Copy the children
while (wns.firstChild) {
    lmn.appendChild(wns.firstChild); // *Moves* the child
}

// Copy the attributes
for (index = wns.attributes.length - 1; index >= 0; --index) {
    lmn.attributes.setNamedItem(wns.attributes[index].cloneNode());
}

// Replace it
wns.parentNode.replaceChild(lmn, wns); 
```

**现场示例：（** *我使用`div`and`p`而不是`wns`and `lmn`，并通过带边框的样式表对它们进行样式设置，以便您可以看到更改）*

```
document.getElementById("theSpan").addEventListener("click", function() {
  alert("Span clicked");
}, false);

document.getElementById("theButton").addEventListener("click", function() {

  var wns = document.getElementById("target");
  var lmn = document.createElement("p");
  var index;

  // Copy the children
  while (wns.firstChild) {
    lmn.appendChild(wns.firstChild); // *Moves* the child
  }

  // Copy the attributes
  for (index = wns.attributes.length - 1; index >= 0; --index) {
    lmn.attributes.setNamedItem(wns.attributes[index].cloneNode());
  }

  // Insert it
  wns.parentNode.replaceChild(lmn, wns);
}, false);
```

```
div {
  border: 1px solid green;
}
p {
  border: 1px solid blue;
}
```

```
<div id="target" foo="bar" onclick="alert('hi there')">
  Content before
  <span id="theSpan">span in the middle</span>
  Content after
</div>
<input type="button" id="theButton" value="Click Me">
```

有关可重用功能，请参阅[此要点](https://gist.github.com/Daniel-Hug/d245b53b6195b9596c00659cb17cda6c)。

* * *

旁注：我会避免使用`id`全是数字的值。尽管它们在 HTML 中有效（从 HTML5 开始），但它们在 CSS 中无效，因此您无法设置这些元素的样式，或者使用 jQuery 等使用 CSS 选择器与它们交互的库。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-26T10:33:20.023

```
var element = document.getElementById("93");
element.outerHTML = element.outerHTML.replace(/wns/g,"lmn"); 
```

[**小提琴**](http://jsfiddle.net/s98J5/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T10:33:15.697

您的代码有几个问题：

1.  HTML 元素 ID 必须以字母字符开头。
2.  `document.getElementById("99").replace(/wns/g,"lmn")`正在有效地对元素运行替换命令。Replace 是一个字符串方法，所以这会导致错误。
3.  您正在尝试将此结果分配给，这是元素*内*`document.getElementById("99").innerHTML`的 HTML （标签、属性和所有内容都是 的一部分）。*`outerHTML`*
**   您不能动态更改元素的标记名，因为它从根本上改变了它的性质。想象一下将 a 更改`textarea`为 a `select`... 有很多属性是一个专有的，另一个是非法的：系统无法工作！*

 *但是，您可以做的是创建一个新元素，并为其赋予旧元素的所有属性，然后替换它：

```
<wns id="e93" onclick="wish(id)">
    ...
</wns> 
```

使用以下脚本：

```
// Grab the original element
var original    = document.getElementById('e93');
// Create a replacement tag of the desired type
var replacement = document.createElement('lmn');

// Grab all of the original's attributes, and pass them to the replacement
for(var i = 0, l = original.attributes.length; i < l; ++i){
    var nodeName  = original.attributes.item(i).nodeName;
    var nodeValue = original.attributes.item(i).nodeValue;

    replacement.setAttribute(nodeName, nodeValue);
}

// Persist contents
replacement.innerHTML = original.innerHTML;

// Switch!
original.parentNode.replaceChild(replacement, original); 
```

在这里演示：http: [//jsfiddle.net/barney/kDjuf/](http://jsfiddle.net/barney/kDjuf/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:33:45.627

您可以使用 jQuery 替换整个标签

```
var element = $('#99');
element.replaceWith($(`<lmn id="${element.attr('id')}">${element.html()}</lmn>`)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-14T14:42:39.430

```
[...document.querySelectorAll('.example')].forEach(div => {
  div.outerHTML =
  div.outerHTML
    .replace(/<div/g, '<span')
    .replace(/<\/div>/g, '</span>')
})
```

```
<div class="example">Hello,</div>
<div class="example">world!</div>
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-26T10:45:26.230

您可以通过使用 JavaScript 或 jQuery 来实现这一点。

我们可以删除 DOM 元素（在这种情况下为标签）并在 jQuery 中使用 .html 或 .append 方法重新创建。

```
$("#div-name").html("<mytag>Content here</mytag>"); 
```

或者

```
$("<mytag>Content here</mytag>").appendTo("#div-name"); 
```*

# jquery - 使用 jQuery Ajax 在虚拟目录中引用 web api

> ID：15086679
> 
> 赞同：0
> 
> 时间：2013-02-26T10:27:10.840
> 
> 标签：jquery, ajax, json, asp.net-web-api, umbraco

我和我的同事正在开发一个 Web API，我们正在使用 knockoutjs（通过 Umbraco CMS）进行通信。为了避免遇到浏览器内置的跨站点脚本安全性，我们将 api 放在我们网站目录的虚拟目录中。

如果我们在目录中放置一个“愚蠢”的 html 文件，我们可以毫无问题地与 api 进行“对话”。另一方面，如果我们尝试从 umbraco 引用虚拟目录中的 api，则找不到。

我四处寻找各种解决方案，但大多数（如果不是全部）是如果您使用的是 MVC3，哪些解决方案并没有真正的帮助。

下面是一些尝试联系 API 的 javascript：

```
function subscribe() {
  if($("#siteForm").valid()=== true){
    alert("add subscriptiooncalled");
    var mySubscription = ko.toJS(ViewModel);
    var json = JSON.stringify(mySubscription);
    alert(json);
    $.ajax({
        url: API_URL,
        cache: false,
        type: 'POST',
        contentType: 'application/json',
        data: json,  
        success: function (data) {
            alert("data is pushed");
        },
        error: function (error) {
            alert("ERROR STATUS: " + error.status + "  STATUS TEXT: " + error.statusText);
        }

    });
  }else{

  }
} 
```

这样做也不起作用：

```
var root = location.protocol + "//" + location.host;
var API_URL = root + "/api/Subscriptions/"; 
```

请注意，警报用于测试目的。无论如何，代码中的 url 显然不起作用，插入完整的 url 也不起作用（http:// 等）。

有什么建议么？如果有帮助，请使用 Umbraco 4.7.2。

**编辑 编辑 编辑 编辑 编辑** 这很愚蠢。也许它是几种不同解决方案的高潮，也许不是，但这一切都归结为提交按钮。是的。通过将按钮类型从“提交”更改为“按钮”，一切正常。天哪，这太愚蠢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:27:00.390

您需要将 API 的路径添加到站点 web.config 中的“umbracoReservedPaths”appSetting。这将告诉 umbraco 从处理中排除该路径。Jonas Ericksson 在他写的[博客文章](http://joeriks.com/2011/03/03/an-ordinary-webmatrix-app-in-an-umbraco-subfolder/)中给出了一个很好的例子来说明如何做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T14:58:27.987

您的问题是 WebApi 路由被 Umbraco 覆盖。

为了让 WebApi 和 Umbraco 并排，（在 Umbraco 4.11 中）你必须实现 IApplicationEventHandler，但恐怕在 4.7 中这不应该工作，你必须使用不同的东西（如果内存服务，从 ApplicationBase 继承）。Umbraco 4.11+ 所需的代码看起来有点像这样：

```
public class WebApiStartupHandler : IApplicationEventHandler
{
    public void OnApplicationStarted(UmbracoApplication httpApplication, ApplicationContext applicationContext)
    {
        WebApiConfig.Register(GlobalConfiguration.Configuration); // register web api routes
        RouteConfig.RegisterRoutes(RouteTable.Routes);            // register mvc routes
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters); // register global filters
    }
} 
```

这将允许您的 webapi 项目与您的 umbraco 网站并行运行，并且您不必使用虚拟目录。

在 web.config 文件的 appConfig 部分中将“~/api”（或您喜欢用作 api 根的任何内容）添加到 umbracoReservedUrls 和 umbracoReservedPaths 也可以解决您的问题，尤其是在需要在虚拟目录中运行 api 时.

# bash - 带有嵌套 if else 的 awk

> ID：15086683
> 
> 赞同：0
> 
> 时间：2013-02-26T10:27:21.720
> 
> 标签：bash, awk, nested-if

我有一个制表符分隔两列数据。我想根据第二列上应用的条件获得第三个。

如果第二列不等于零，它应该打印 col 1 和 3 以及 col1/col2 的比率如果 col 2 为零并且 col 1 大于 15，则它应该打印 col 1 和 col2 以及 col1 中的值（在 col 3 ) 否则（当 col1<=15 & col2 为 0 时）它应该打印 col1 col2 和 0。

例如，对于这样的文件

```
1   2
4   5
6   7
14  0
18  0 
```

输出应该是

```
1   2   0.5
4   5   0.8
6   7   0.85
14  0   0
18  0   18 
```

我试过的：

```
awk '{if ($2!=0) print $1 "\t" $2 "\t" $1/$2; elseif($2>15) print $1 "\t" $2 "\t" $1 ; else print $1 "\t" $2 "\t" $2}'<tags| head 
```

显然我做错了什么，请帮助我正确获取上述代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:32:22.543

方式略有不同：

```
awk '{if($2!=0) $3=$1/$2; else if($1>15) $3=$1; else $3=0}1' OFS='\t' file 
```

由 if 子句的顺序决定：

```
awk '{$3=0} $1>15{$3=$1} $2{$3=$1/$2}1' OFS='\t' file 
```

或神秘的版本：

```
awk '{$3=$2?$1/$2:$1>15?$1:0}1' OFS='\t' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:35:45.423

一个有趣但**不可读**的（也许）:) 单行：

```
 awk '{$0=$2?$1FS$2FS$1/$2:$1>15?$1FS$2FS$1:$1FS$2FS"0"}1' file 
```

简短说明：

```
a=boolean? first : second

this means assign var a, if boolean true, using value first, otherwise use value second.

I set `$0 = $2? FOO : BAR`
FOO part: $1 FS $2 FS $1/$2
BAR part: $1>15? FOO2 : BAR2
    FOO2 part: $1 FS $2 FS $1
    BAR2 part: $1 FS $2 FS "0"

finally, print $0 
```

**您的代码中的问题**

chang `elseif`->`else if` 也检查`$1`一下`15`，而不是`$2`你的 oneliner 也可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:55:39.390

这是另一种选择：

```
awk '!$2 { $3 = $1>15 ? $1 : 0 } $2 { $3 = $1/$2 } 1' OFS='\t' CONVFMT='%.2g' 
```

输出：

```
1   2   0.5
4   5   0.8
6   7   0.86
14  0   0
18  0   18 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:56:03.790

```
awk '{$3=$1>=15 && $2==0?$1:$1<15 && $2==0?0:$1/$2}1' your_file 
```

# c# - 使用命名注册解析实例不抛出异常

> ID：15086684
> 
> 赞同：0
> 
> 时间：2013-02-26T10:27:27.680
> 
> 标签：c#, dependency-injection, prism, unity-container

我以为我对 Unity 了解很多，但以下场景我没有例外。我正在使用 Unity Container 将我的 Prism 视图注册为具有命名注册的对象，如下所示：

```
_unityContainer.RegisterType<object, MyDummyView>("MyDummyViewName"); 
```

我通过调用请求视图实例

```
object view = _unityContainer.Resolve<object>("MyDummyViewName"); 
```

到目前为止，一切都很好。现在我在我的系统中发现了一个错误，因为我使用了错误的名称来解析视图的实例，并且我预计 Unity 会抛出一个异常。

```
object view = _unityContainer.Resolve<object>("MyWrongDummyViewName"); 
```

但是 Unity 不会抛出任何异常（例如`ResolutionFailedException`or `ActivationException`）。当我执行上面的调用时，它会返回一个 new `object`，而不会使用给定的（错误的）名称注册任何视图。

这是 Unity 的正确行为吗？我真的希望在这里得到一个例外。在 Prism 的范围内，这是一个问题，因为在导航到错误的目标（视图）期间我不会遇到任何异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:33:15.733

我和你一样，这是出乎意料的行为。我认为问题源于您正在尝试解决具体类的实例（在您的情况下`object`）。看起来 Unity 将始终尝试解决该实例。只要它能做到这一点，它就会忽略命名映射。

我尝试了一个基类 ( `ViewBase`)，除非您声明它，否则容器也将解析它`abstract`。这样做会引发预期的异常。

如果您引入应该解决您的问题的接口或抽象基类。

您应该[为 Unity 开一个 bug 票](http://unity.codeplex.com/workitem/list/basic)。

# batch-file - 如何创建批处理脚本以使用当前日期复制新创建的文件夹

> ID：15086687
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:27:36.650
> 
> 标签：batch-file

我不擅长批处理脚本。希望有人可以帮助我。

我的问题是，每天我的程序都会创建一个过时的文件夹。我想要一个自动的每日备份脚本来完成这项工作，我只想复制新创建的具有当前日期或昨天日期的文件夹并 rar 然后发送到其他目录，其余文件和子目录仍然存在。顺便说一句，我的程序根据当前日期创建一个文件夹名称。

这是样本

```
source todays date: february 26 20013
C:\MyApp\20130226 <new folder
        \20130225 <old folder
        \20130224 <old folder

destination todays date: february 26 20013
D:\Backup\20130226.rar << newly backup according to current date. 
```

这可能吗？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:40:38.437

批处理文件中的日期内容是出了名的挑剔和棘手。

基本上有两种方法：

1.  使用`%DATE%`并将其切割成适当的部分，例如对我来说它看起来像这样：

    ```
    > echo %DATE%
    2013-02-26

    > echo %DATE:~0,4%%DATE:~5,2%%DATE:~8,2%
    20130226 
    ```

    这有一个问题，它取决于您当前语言环境中的日期格式。如您所见，我使用的是 ISO-8601（恕我直言唯一理智的日期格式），这使得这变得相当容易。

    它适用于您在明确定义的环境中使用的一次性脚本，并且对健壮性没有实际要求。不过，我倾向于避免这种情况。

2.  使用 WMI 获取当前日期：

    ```
    > wmic os get localdatetime
    LocalDateTime
    20130226113553.324000+060 
    ```

    您可以将该输出存储在一个变量中`for /f`：

    ```
    for /f "skip=1" %%x in ('wmic os get localdatetime') do if not defined MyDate set MyDate=%%x 
    ```

    由于该格式是固定的，您可以安全地使用子字符串来访问各个部分：

    ```
    echo %MyDate:~0,8% 
    ```

我将把实际的文件复制作为练习留给你。

# android - 阿拉伯语字体中断

> ID：15086690
> 
> 赞同：1
> 
> 时间：2013-02-26T10:27:43.780
> 
> 标签：android

我正在开发一个阿拉伯语应用程序。我想知道我的 S3 是否正确显示了阿拉伯语文本。但是当我在模拟器中看到文本时，它正在中断。有什么理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:41:24.177

我也遇到过这种类型的问题。我发现对于阿拉伯字体我们必须使用特定类型的字体文件，比如**.ttf**

您可以找到一些仅支持阿拉伯语的 .ttf 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T14:34:25.107

如果您使用 a`TextView`来显示阿拉伯语文本，请尝试将`TextView`'`android:gravity`属性值设置为`"start"`而不是`"left"`或`"right"`。这为我修好了。

有关更多可能的解决方案，请参阅此问题： [Arabic font gets cut in Android 4.0](https://stackoverflow.com/questions/11698883/arabic-font-gets-cut-in-android-4-0)

# glassfish - Glassfish OSGI 具有依赖关系，如何？

> ID：15086696
> 
> 赞同：0
> 
> 时间：2013-02-26T10:28:25.563
> 
> 标签：glassfish, dependencies, osgi

我有一个常规的 maven jar 项目，它具有诸如反射库之类的依赖项，我想将其转换为 osgi，我已经完成了。

1.  在不同的（maven）jar 项目中创建了一个通用接口层，并将其作为依赖项添加到包中。
2.  将 osgi-module-to-be 的类型更改为“bundle”。
3.  创建了 BundleActivator 的实现
4.  在 pom 中添加了这个插件：

```
<groupId>org.apache.felix</groupId>
<artifactId>maven-bundle-plugin</artifactId>
<version>2.3.7</version>
<extensions>true</extensions>
<configuration>
    <instructions>
        <Bundle-Activator>my.package.MyServiceActivator</Bundle-Activator>
        <Export-Package>
            my.package.exp.*
        </Export-Package>
        <Import-Package>
            !org.reflections,???
        </Import-Package>
        <Embed-Dependency>
            slf4j-api;scope=compile,???
        </Embed-Dependency>
    </instructions>
</configuration> 
```

这里是它丢失的地方，我需要弄清楚“导入包”和“嵌入依赖”，**更重要**的是如何将它作为 zip 或 ORB（或 Gogo）部署在 glassfish 上，这样它将使用它的所有依赖项 jar 进行部署。

有任何想法吗？

G。

顺便说一句：org.reflections 包还没有准备好 OSGi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:45:50.283

您似乎对 OSGi 和 Maven Bundle 插件的工作方式感到困惑。也许阅读 Felix 指南会对您有所帮助：

[http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)

基本上，你应该有这样的东西：

```
<plugin>   
  <groupId>org.apache.felix</groupId>
  <artifactId>maven-bundle-plugin</artifactId>
  <extensions>true</extensions>
  <configuration>
    <instructions>
      <Bundle-Activator>my.package.MyServiceActivator</Bundle-Activator>
      <Export-Package>
        my.package.exp.*
      </Export-Package>
      <Import-Package>
        !org.reflections*,*
      </Import-Package>
      <Embed-Dependency>
         org.reflections
      </Embed-Dependency>
    </instructions>
  </configuration>
</plugin> 
```

默认情况下（即，如果您只是省略它，通常是这种情况），您的 Import-Package 指令将是`*`，这意味着您在代码中引用的任何内容，而不是在 java.* 或您自己的包中都应该被导入. 但是由于您依赖于要嵌入的非捆绑 jar，因此您需要使用表达式告诉插件`!org.reflections*,*`，这意味着您不想导入 org.reflections 包，但其他一切都很好。您还需要使用 Embed-Dependency 指令声明任何调用的 artifactId`org.reflections`都应该嵌入到 jar 中。

顺便说一句，您很可能不想嵌入您的日志框架 SLF4J 实现，更不用说 API，因为几乎任何 OSGi 环境都应该为您提供日志实现。

在你打包你的包（mvn 包或只是 mvn 安装）后，确保检查生成的 MANIFEST 以确保它看起来一切都是正确的（重要的是，检查 Import-Package 包并查看你的环境是否将包含所有提供此类的包包）。

正确设置捆绑包后，部署它就很简单了。只需将其放入框架的包目录中，确保您需要的所有其他包也在那里，并且一切都应该正常工作。

[附带说明一下，您可能需要考虑使用PAX-WRAP](http://team.ops4j.org/wiki/display/paxurl/Wrap+Protocol)或仅使用 Karaf将所需的非捆绑 JAR 包装为捆绑包（只需在部署文件夹中放入一个 JAR，您将立即将其包装为 OSGi 捆绑包） ， 例如。

# php - php提交重定向不起作用

> ID：15086698
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:28:30.707
> 
> 标签：php, forms, redirect

我正在使用在表单中包含显示名称和整数值的 a 。（提交按钮名称=`choose_page`

当我单击该表单的提交按钮时，我想重定向到具有值的页面。

我没有看到我错过了什么。

```
if(isset($_POST['choose_page'])) {
    $id = (int)$_POST['select_edit_page'];
 header( 'Location: http://mysite.com/admin/editor.php?page='+$id);
    } ?>

<form name="pagina_post" method="post" action="/admin/editor.php">
<select name="select_edit_page" id="pagina1">
<option value='0' >index.php
    </option><option value='1' >foo2.php
    </option><option value='2' >bar.php
    </option><option value='5' >foo.php
    </option><option value='8' >bla.php
    </option><option value='9' >links.php
    </option><option value='10' >foooo.php
    </option></select>
<input type="submit" value="Select" name="choose_page">
</form> 
```

我收到标头已发送的错误。我怎样才能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:29:47.473

改变这个

```
 header( 'Location: http://mysite.com/admin/editor.php?page='+$id); 
```

至

```
header( 'Location: http://mysite.com/admin/editor.php?page=' . $id);
exit();                                                      ^ // concatenation problem 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:31:13.340

尝试这个

```
header( 'Location: http://mysite.com/admin/editor.php?page=$id'); 
```

# windows-runtime - 数据模板中的项目

> ID：15086702
> 
> 赞同：0
> 
> 时间：2013-02-26T10:28:38.613
> 
> 标签：windows-runtime, datatemplate

我正在尝试访问翻转视图内的 webview 项目。这个 webview 是在翻转视图的数据模板中声明的。有谁知道我如何访问 webview 以便我可以用它做事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:10:52.240

将 DataTemplate 的内容移动到 UserControl 并将其用作您的 ItemTemplate。然后，您可以轻松地在该 UserControl 中做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:48:34.133

最后最好的方法是将 Web 视图项绑定到该项的不同属性，然后显示该属性中的内容（NodeValue）

# xml - XSD - 可以更改扩展类型中的属性类型

> ID：15086703
> 
> 赞同：2
> 
> 时间：2013-02-26T10:28:42.627
> 
> 标签：xml, xsd, xsd-validation

我想将`Name`属性的类型从更改`xs:string`为`xs:int`，如下面的 XSD

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns="http://www.my.own/2013/XMLSchema">

    <xs:complexType name="AType">
        <xs:attribute name="Name" type="xs:string" use="required" />
    </xs:complexType>

    <xs:complexType name="BType">
        <xs:complexContent>
            <xs:extension base="AType">
                <xs:sequence>
                    <xs:choice>
                        <xs:element name="Content" type="xs:string"/>
                    </xs:choice>
                </xs:sequence>
                <xs:attribute name="Name" type="xs:int" use="required"/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

这个 XSD 有效吗？如果没有，是否存在其他解决方案来更改属性类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:38:18.217

不，类型派生的原则是，如果从基类型派生新类型，则派生类型的实例仍然必须是基类型的有效实例。因此，您不能将属性从字符串更改为 int。

# azure - azure 启动任务的运行顺序是什么

> ID：15086704
> 
> 赞同：1
> 
> 时间：2013-02-26T10:28:46.153
> 
> 标签：azure

我有 3 个启动任务，两个简单（t1，t2）和一个后台任务（t3）。现在 t1，t2 必须按顺序运行，现在因为 t3 是后台任务，它使用一些由任务 t2 设置的环境变量。

我对后台任务的运行方式有些疑问？他们是从角色启动开始还是在进入启动任务列表时立即开始运行。

前任。如果我在我的csdef文件中将任务的顺序定义为（t3，t1，t2），t3是否会首先在后台开始运行，然后t1，t2将完成，然后角色启动阶段将开始--->在这种情况下我可以在设置之前读取环境变量

或者

t3 作为后台任务将在所有简单任务完成之前不会启动，并且会从角色启动开始

编辑：发现它们按照出现在 csdef 中的顺序运行

现在我遇到了另一个问题，我在机器级别的 t2 中设置了一些环境变量，在 t3 中我在进程级别读取它们，有时 t3 能够读取这些变量，但有时它读取空值

一般来说：机器上的所有环境变量是否自动可用于每个进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:15:38.010

我发现任务按照它们在csdef中定义的顺序运行

如果您在我的csdef中以相同的顺序定义了以下任务

```
<Task commandLine="t1" executionContext="elevated" taskType="simple" />
<Task commandLine="t2" executionContext="elevated" taskType="simple" />
<Task commandLine="t3" executionContext="elevated" taskType="background"></Task> 
```

所以第一个 t1 将执行，在 t1 完成 t2 和 t2 完成后 t3 将在后台运行，角色启动阶段将并行启动

如果我将订单更改为

```
<Task commandLine="t3" executionContext="elevated" taskType="background"></Task>
<Task commandLine="t1" executionContext="elevated" taskType="simple" />
<Task commandLine="t2" executionContext="elevated" taskType="simple" /> 
```

然后 t3 将在后台运行，t1 和 t2 将并行运行，但按顺序

# c# - 从 c# 传递的 matlab 中的对象数组

> ID：15086708
> 
> 赞同：2
> 
> 时间：2013-02-26T10:29:09.603
> 
> 标签：c#, matlab

所以我在 C# 中有这个对象，它将包含整数和布尔值（双精度和逻辑）

```
object[,] matrixData = new object[iDimensions[0], iDimensions[1]]; 
```

我将它传递给matlab：

```
matlab.PutWorkspaceData("matrixData", "base", matrixData); 
```

Matlab 将其视为数组的单元数组。这很不方便，因为我现在不能将这些值用于任何事情。我想我需要将它们转换成一个数字数组——尽管事实上我会更乐意保留强类型并且只是丢失每个单元格中的数组。

因此，例如：

```
temp = cell(1,4)

temp{1,1} = [0.5]
temp{1,2} = [1==1]
temp{1,3} = [7424.356]
temp{1,4} = [31] 
```

我想拥有：

```
output = [0.5, 1==1, 7424.356, 31] 
```

所以我目前的实现非常粗鲁：

```
cellfun(@decellify,CashFlowBasisMatrixData); 
```

在哪里

```
function decellified = decellify(object)

if  isa(object,'logical')
    decellified = +object;
end

if  isa(object,'float')
    decellified = object;
end    

if  isa(object,'char')
    decellified = -2;
end

end 
```

有没有更好的办法？如果我在 C# 中转换为双精度，我如何“取消数组”每个元素？

谢谢，NT

# .net - 在 .Net 中，我如何使用 Waithandles 执行和/或操作

> ID：15086710
> 
> 赞同：1
> 
> 时间：2013-02-26T10:29:15.187
> 
> 标签：.net, waithandle

我有一个数组`WaitHandle[]`，对应于在线程可以继续之前所有需要完成的任务。但是我还有另一个 WaitHandle 会在用户请求中止时发出信号。

那么让线程等待的最有效方法是什么：

1.  数组 WaitHandle[] 中的所有 WaitHandles 都发出信号；或者

2.  用户中止 WaitHandle 是否发出信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:26:45.850

这已经在 .NET 4 中通过 Task.WaitAll(Task[], CancellationToken) 方法提供，因此请确保您没有尝试重新发明轮子。

如果您由于某种原因无法迁移到 .NET 4，或者过于致力于不使用 Task 类的现有代码，那么您可以实现类似于 Task.WaitAll() 所做的事情。基本方案是您只需使用 WaitAny() 处理 WaitHandles 列表并依次等待一个，这样您也可以看到中止请求。像这样：

```
/// <summary>
/// Wait for all events with option to abort the wait
/// </summary>
/// <param name="waitHandles">Synchronization objects to wait for</param>
/// <param name="abortEvent">Event that signals an abort</param>
/// <returns>false if the wait was aborted</returns>
public static bool WaitAll(WaitHandle[] waitHandles, WaitHandle abortEvent) {
    WaitHandle[] pair = new WaitHandle[] { abortEvent, null };
    for (int ix = 0; ix < waitHandles.Length; ++ix) {
        pair[1] = waitHandles[ix];
        if (WaitHandle.WaitAny(pair) == 0) return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:49:23.497

你可以试试`WaitHandle.WaitAll()`

# search - 使用代码点火器搜索和过滤页面

> ID：15086711
> 
> 赞同：1
> 
> 时间：2013-02-26T10:29:18.147
> 
> 标签：search, filter, codeigniter-2

最近开始使用代码点火器并试图制作一个按某些参数过滤事件的页面。我有一个包含输入类型搜索（在数据库中搜索关键字）和一个按事件名称过滤的下拉过滤器列表的视图页面，位置和定价。但是我需要帮助从数据库中查询搜索结果并将其显示在我的视图页面上。有想法的人吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:58:34.667

当您提交表单时，将其提交给控制器方法并在控制器方法中获取 post 值

```
function search()
{

    $keyword = $this->input->post('keyword');
    $this->load->model('mymodel');
    $result = $this->mymodel->getSearchResults($keyword);
    $data['results'] = $result;
    $this->load->view('search_results',$data);
} 
```

在你的模型中

```
function getSearchResults($keyword){
    $this->db->like('column_name',$keyword,'after');
    return $this->db->get('tablename')->result();
    // or you can write query simple way instead of Active Record
    // $query = "SELECT BLah blah FROM mytable WHERE column_name like '$keyword%'";
    // return $this->db->query($query)->result();
} 
```

# sql - Postgresql 8.3重复行

> ID：15086718
> 
> 赞同：1
> 
> 时间：2013-02-26T10:29:35.303
> 
> 标签：sql, postgresql

我正在写的一个查询有一点问题。在 where 子句中，我有很多连接和提取的很多列，我将日期列与同一个表的最小值进行比较。但是当我得到两行相同的日期时，我只需要得到一行。where 子句是这样的：

```
bt.da2 = (select min(btreg.da2) from bt btreg..... 
```

查询结果很多客户，每个客户都有那个bt.da2日期。我需要当一个客户有两行，具有相同的 bt.da2 值时，我只需要取两行中的一个，而不是两行。我可能解释不清楚。请如果有人对我在问什么有一点线索，有些不清楚，请问我。

我在用着`PostgreSQL 8.3`

问候，朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:50:57.717

用这么少的信息很难说，但我会尝试这样的事情：

```
select *
from (
  select product_id, -- assumed to be the primary key 
         ...
         row_number() over (partition by product_id order by bt.da2) as rn
  from products pr
    left join bt on bt.da2 = pr.some_col
) t
where rn = 1 
```

该`row_number()`函数用于为每个产品创建连续编号。然后外部`where`子句选择第一个子句。您可以更改`order by`窗口定义中的 以影响您选择的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:37:49.060

您应该能够使用以下方法整理出 da2 的重复值：

```
bt.da2 = (select distinct min(btreg.da2) from bt btreg..... 
```

我使用 PostgreSQL 9.1 对此进行了尝试，但我确信 distinct 关键字在 8.4 中也能按预期工作。

# jquery-mobile - jquery mobile calendar在设置日期时打开其他日历

> ID：15086720
> 
> 赞同：0
> 
> 时间：2013-02-26T10:29:38.213
> 
> 标签：jquery-mobile

我有 3 个日期框字段，一个在另一个之下。当我打开第一个日历时，它的 SET DATE 按钮出现在第三个字段上。因此，当我点击 SET DATE 时，它也会点击第三个字段并打开它的日历......

现在我正在这样做，但这不是一个好主意，也不适用于所有浏览器

```
if(passed.method === 'close'){ // If first field calendar close
    setTimeout(function(){
        $(3rd field calendar).datebox('enable');
        $(3rd field calendar).blur();
        $(3rd field calendar).datebox('close');
    }, 500);
} 
```

请建议

# c# - ObjectStateManager 中已存在具有相同键的对象

> ID：15086721
> 
> 赞同：1
> 
> 时间：2013-02-26T10:29:41.553
> 
> 标签：c#, entity-framework

我有一个无法找到解决方案并需要一些帮助的场景我该如何实现这一点，我想为客户获取当前记录修改它而不是更新我想将新记录添加到表中获取历史变化信息

```
 client c = new client();
    using (DBEntities db = new DBEntities())
    {
        // get current records in the client table for client
        IQueryable<client> co = from p in db.client where p.CUS_NUMBER == scd.cus_number && p.isCurrent == true select p;

        c = co.First();

        //update email and and address
        c.EMAIL = Helper.CleanInput("mymail@mm.com");
        c.ADDRESS = Helper.CleanInput("123 Sheppard");

        //instead of updating current record I'd like to add new record to the table to keep historical changes
        db.AddToclient(c);
        db.SaveChanges();
        //I get error that 
        //An object with the same key already exists in the ObjectStateManager. 
        //The existing object is in the Modified state. An object can only be added to 
        //the ObjectStateManager again if it is in the added state. 
```

## 完全错误

> ObjectStateManager 中已存在具有相同键的对象。现有对象处于已修改状态。只有处于添加状态的对象才能再次添加到 ObjectStateManager。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:33:15.977

删除此代码 `db.AddToclient(c);`，其余一切都很好，您已经通过其引用访问该对象，因此无需再次添加它。当您调用时它会被修改`savechanges()`

或者如果要添加新对象，请使用克隆`c = co.First().Clone();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:45:10.197

看起来您正在向数据库添加同一行，并且由于再次添加具有相同主键的同一行而出现错误，而数据库不允许这样做。

尝试添加新行并创建另一个表，该表保留旧行的历史信息和引用作为外键。您可以添加一个布尔字段来保存有关删除的信息，让 It isDeleted。

希望它会有所帮助谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:35:53.063

给出错误的原因`db.AddToclient(c);`是因为该对象正在被对象上下文跟踪，可能在数据库中。

完成您正在尝试做的事情的最佳方法是如下所示：

```
var newClient = new client()
{
    EMAIL = Helper.CleanInput("mymail@mm.com"),
    ADDRESS = Helper.CleanInput("123 Sheppard"),
};

db.AddToclient(newClient);
db.SaveChanges(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:58:05.843

**在 Entity Framework 中，默认情况下**从数据库中检索到的所有对象都由 ObjectContext 实例跟踪。Entity Framework 在内部映射了他的 Key 跟踪的所有对象。这种[模式](http://martinfowler.com/eaaCatalog/identityMap.html)称为[身份映射](http://rlacovara.blogspot.com.br/2009/03/entity-framework-patterns-identity-map.html)。这意味着每个键只有一个实体实例。因此，您不需要再次调用 Add，因为实体已经在 EF 地图上。你只需要调用 SaveChanges 来保存修改过的实体。

在您的情况下，您是：

1 - 创建 EF ObjectContext 的新实例；
2 - 在您的 LINQ 查询中检索实体；
3 - 更改检索到的实体的属性值；
4 - 再次添加到 ObjContext；**//错误！**
5 - 调用 SaveChanges()

第 4 步不是必需的，因为 ObjectContext 已经知道检索到的对象。

# html - 如何正确选择关键词

> ID：15086722
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:29:42.870
> 
> 标签：html, seo, search-engine, keyword

我正在研究网站元标记的关键字。

如果我添加“foo bar”，这是否与我在关键字内容字段中添加“foo”和“bar”一样？

我知道我们可以在内容中添加单词和短语，但我想问的是，当用户在搜索引擎中搜索“foo bar”时，两者的排名是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:33:10.580

据我所知，他们的排名不同。这是一个参考 [http://webdesign.tutsplus.com/articles/general/meta-tags-and-seo/](http://webdesign.tutsplus.com/articles/general/meta-tags-and-seo/)

# r - 从小波变换获得小波基

> ID：15086727
> 
> 赞同：2
> 
> 时间：2013-02-26T10:29:48.457
> 
> 标签：r, wavelet

我一直在使用 R 包`wavethresh`来获得小波变换和分组小波变换。我可以很容易地在小波的基础上得到小波变换的系数。但是，我无法获得小波基础。

我目前正在使用标准小波滤波器：Daubechies Least Asymmetric。

这是我的小波变换代码示例：

```
data <- cos(1:512/(10*pi))
wave <- wd(data) 
```

对于小波包变换：

```
wave <- wp(Temperature[,1])
coeffs <- MaNoVe(wave.th)
l <- print(coeffs) 
```

我已经为小波包变换尝试了一些东西：

```
basis <- matrix(NA,length(l$level),512)
for (i in 1:length(l$level))
    basis[i,] <- drawwp.default(l$level[i],l$pkt[i],resolution=512) 
```

但我只得到了几个功能，而不是整个基础。此外，我不确定这些功能是否是我想要的。

这是包文档的链接：[wavethresh.pdf](http://cran.r-project.org/web/packages/wavethresh/wavethresh.pdf)。但是，如果您在其他 R 包中解决了我的问题，那也将是完美的；）

非常感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-18T14:31:08.787

仅作记录：我是 wavethresh 的主要作者，我也认为 wmtsa 是一个很好的包。

您最初为 wavethresh 编写的代码应该可以工作。我只是在长度为 512 的任意数据集上尝试了它（因为我无权访问您的数据！）它似乎工作正常，并且“基础”数组包含 215 个元素。函数 plot(coeffs) 还生成了一个时频图，因此可以看到时频平面的特定平铺。

参考你的两个帖子。`drawwp.default' 函数实际上完全符合您在第二篇文章中提到的内容。为了获得特定小波包的图片（或值向量），包含全零和一个一的序列被反转。这是一个众所周知的技巧，自 1993 年以来一直在 wavethresh 中用于小波（在函数 draw() 中）。

draw 和 drawwp.default 不会做的是正确翻译。它试图选择一个不错的翻译值，以便您获得一张漂亮的图片。这就是为什么 drawwp.default 的参数包含比例级别，“振荡参数数量”，但不包含平移值。但是，将小波向上或向下平移轴很简单，您如何操作将取决于您假设的边界条件。

在您的原始帖子中确实出现了（至少对我而言）一个错字。第 4 行中的对象`wave' in line 3 becomes`wave.th'。但是，我忽略了这一点，并将它们视为同一个对象。我猜你可能一直在做一些与本次讨论无关的阈值:)

一切顺利，盖伊·纳森

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:38:39.070

我的问题解决了！我使用了包`wmtsa`而不是`wavethresh`.

为了构造基础，在这两种情况下（小波变换和包小波变换），都可以`reconstruct`对某个小波使用该方法`w`。这一个具有所有系数设置为`0`除了一个设置为`1`。

```
basis <- matrix(NA,2^lvl,2^lvl)
compt <- 1
w$data$s9 <- 0
for (i in 1:lvl)
    w$data[[i]]<-rep(0,2^(lvl-i))
for (i in 1:lvl){
    for (j in 1:2^(lvl-i)){
            w$data[[i]][j] <- 1
        basis[,compt] <- reconstruct(b)
        w$data[[i]][j] <- 0
        compt <- compt + 1
    }
} 
```

`lvl`是小波分辨率级别。

可以对小波包变换做同样的事情。

# css - 改变风格模块

> ID：15086729
> 
> 赞同：0
> 
> 时间：2013-02-26T10:29:53.777
> 
> 标签：css, joomla

我需要将显示模块从当前状态格式化为下图中的第二个状态，这是另一个图像传输。最后一行在标准模块中显示图像，我需要在主行上显示图像。

图 1：![标准风格](../Images/b2a33a402499afa4386394e966b43e1f.png)

图二：![我需要的风格](../Images/0fde0ced17b685478f4dc0f266d95b7f.png)

模块模板代码：

```
<?php // no direct access
defined('_JEXEC') or die('Restricted access'); ?>
<table border="0" width="100%">

<?php
if($list[1]->disposition=="h")
echo "<tr>";
$i=0;
foreach ($list as $item) :  
$order=explode("-",$item->ordering);
$cntorder=count($order);

if($i < $item->count_pic) { 

if($list[1]->disposition=="v"||!$list[1]->disposition)
print "<tr>";
?>
    <td valign="top" class="thumbsup-image latestnews<?php echo $item->css?>">
        <?php 
        if($item->front) {
            if($item->show_thumb) {
                if($item->link_thumb)
                echo "<a target='_blank' href=\"".$item->link."\">";

                echo $item->imgbig;

                if($item->link_thumb)
                echo "</a>";
            }

            for($j=0;$j<$cntorder;$j++){

            if($order[$j]=="t"&&$item->show_title) {
                if($item->link_title)
                echo "<a target='_blank' href=\"".$item->link."\" class=\"newsmod".$item->css."\">";

                echo "<H1>";
                echo "<li class=\"newsmod".$item->css."\">".$item->title."</li>";
                echo "</H1>";

                if($item->link_title)
                echo "</a>";
            }
            if($order[$j]=="i"&&$item->show_intro){

                if($item->link_intro)
                echo "<a href=\"".$item->link."\" class=\"thumbsup-intro".$item->css."\">";

                echo $item->introtext;

                if($item->link_intro)
                echo "</a>";

                if($item->show_readmore){
                    echo "<a href=\"".$item->link."\">";
                    echo JText::_('more');
                    echo "</a>";
                }
            }
            if($order[$j]=="d"&&$item->show_date) {
                echo "<div class=\"thumbsup-date".$item->css."\">".JHTML::_('date', $item->created, $item->date_f)."</div>";
            }
            if($order[$j]=="a"&&$item->show_author) {
                echo "<div class=\"thumbsup-author".$item->css."\">";
                JText::printf('Written by',$item->author);
                echo "</div>";
            }
            if($order[$j]=="h"&&$item->show_hits) {
                echo "<div class=\"thumbsup-hits".$item->css."\">";
                JText::printf('Hits',$item->hits); 
                echo " ".$item->hits;
                echo "</div>";
            }
        }

        } else {
            if($item->show_thumb){

                if($item->link_thumb)
                echo "<a target='_blank' href=\"".$item->link."\" class=\"thumbsup-thumb".$item->css."\">";

                echo $item->imgsmall." ";

                if($item->link_thumb)
                echo "</a>";

            }

            if($item->imgcolumn)
            print "</ul><td valign=\"top\" class=\"latestnews".$item->css."\">";

        for($j=0;$j<$cntorder;$j++){

            if($order[$j]=="t"&&$item->show_title) {
                echo "<li class=\"newsmod".$item->css."\">";

                if($item->link_title)
                echo "<a target='_blank' href=\"".$item->link."\" class=\"newsmod".$item->css."\">";

                echo $item->title;

                if($item->link_title)
                echo "</a>";

                echo "</li>";
            }

            if($order[$j]=="i"&&$item->show_intro){
                echo "<div class=\"thumbsup-intro".$item->css."\">";

                if($item->link_intro)
                echo "<a href=\"".$item->link."\" class=\"thumbsup-intro".$item->css."\">";

                echo $item->introtext;

                if($item->link_intro)
                echo "</a>";

                if($item->show_readmore) {
                    echo "<a href=\"".$item->link."\">";
                    echo JText::_('more');
                    echo "</a>";
                }
                echo "</div>";
            }

            if($order[$j]=="d"&&$item->show_date) {
                echo "<div class=\"thumbsup-date".$item->css."\">".JHTML::_('date', $item->created, $item->date_f)."</div>";
            }

            if($order[$j]=="a"&&$item->show_author) {
                echo "<div class=\"thumbsup-author".$item->css."\">";
                JText::printf('Written by',$item->author);
                echo "</div>";
            }

            if($order[$j]=="h"&&$item->show_hits) {
                echo "<div class=\"thumbsup-hits".$item->css."\">";
                JText::printf('Hits',$item->hits); 
                echo " ".$item->hits;
                echo "</div>";
            }
        }
    }   ?>

    </ul>

<?php   if($list[1]->disposition=="v"||!$list[1]->disposition)
        print "</tr>";
?>

<?php  } else { 
    if($list[1]->disposition=="v"||!$list[1]->disposition)
    print "<tr>";
?>
    <ul valign="top" class="latestnews<?php echo $item->css?>">
        <?php 
        for($j=0;$j<$cntorder;$j++){

            if($order[$j]=="t"&&$item->show_title) {
                echo "<li class=\"newsmod".$item->css."\">";

                if($item->link_title)
                echo "<a target='_blank' href=\"".$item->link."\" class=\"newsmod".$item->css."\">";

                if($item->front) echo "<H1>";
                echo $item->title;
                if($item->front) echo "</H1>";

                if($item->link_title)
                echo "</a>";

                echo "</li>";
            }

            if($order[$j]=="i"&&$item->show_intro){
                echo "<div class=\"thumbsup-intro".$item->css."\">";

                if($item->link_intro)
                echo "<a href=\"".$item->link."\" class=\"thumbsup-intro".$item->css."\">";

                echo $item->introtext;

                if($item->link_intro)
                echo "</a>";

                if($item->show_readmore) echo JText::_('more');
                echo "</div>";
            }

            if($order[$j]=="d"&&$item->show_date) {
                echo "<div class=\"thumbsup-date".$item->css."\">".JHTML::_('date', $item->created, $item->date_f)."</div>";
            }

            if($order[$j]=="a"&&$item->show_author) {
                echo "<div class=\"thumbsup-author".$item->css."\">";
                JText::printf('Written by',$item->author);
                echo "</div>";
            }

            if($order[$j]=="h"&&$item->show_hits) {
                echo "<div class=\"thumbsup-hits".$item->css."\">";
                JText::printf('Hits',$item->hits); 
                echo " ".$item->hits;
                echo "</div>";
            }
        }
        ?>
    </ul>
    <?php if($list[1]->disposition=="v"||!$list[1]->disposition)
        print "</tr>";
    ?>
<?php } ?>
<?php $i++; endforeach; 

 if($list[1]->disposition=="h")
    print "</tr>";
?>
</table> 
```

# c++ - 让我在队列前端访问上锁定互斥锁

> ID：15086730
> 
> 赞同：1
> 
> 时间：2013-02-26T10:29:58.450
> 
> 标签：c++, multithreading, iterator, queue

我有一个 ( **std::)queue** / **(std::)deque**由一个线程推送并由另一个线程弹出。所以我知道我必须在 push 和 pop 函数上锁定一个互斥锁，因为它们正在修改队列，但是如果我访问 front()，我是否也必须锁定一个互斥锁？

我问的原因是，我真的不知道队列是如何在内部组织的。我读过一些它正在按时分配/删除的东西。所以如果我在另一个线程正在推动的同时阅读前面，**是否有可能移动前面**？

那么迭代器呢？**当迭代器读取值时，我是否还必须锁定互斥锁？**

我认为在阅读时锁定互斥锁总是一个好主意，但我不确定是否真的需要在每个迭代器/前端访问上锁定整个 queue.mutex。如果每次都锁定它可能会减慢整个程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:49:46.857

[`std::queue`](http://en.cppreference.com/w/cpp/container/queue)只是一个适配器，它在内部使用[`std::deque`](http://en.cppreference.com/w/cpp/container/deque)或[`std::list`](http://en.cppreference.com/w/cpp/container/list)。

您不仅要在读取时锁定队列，还要等待条件变量并检查是否有可用数据。如果你有这个设置

```
std::queue<int> q;
std::mutex m;
std::condition_variable cv; 
```

然后你可以等待其他线程提供数据

```
std::unique_lock<std::mutex> guard(m);
while(q.empty())
    cv.wait(guard);

int n = q.front();
q.pop(); 
```

当数据可用时将通知

```
cv.notify_one(); 
```

例如。

# tfs - TFS 10 文件 11 不同的评论

> ID：15086734
> 
> 赞同：3
> 
> 时间：2013-02-26T10:30:07.413
> 
> 标签：tfs, comments, checkin

公司政策导致我们从 Source Gear - Vault 迁移到 TFS 2010。所以我在第一次签到时发现我只能提供 1 条评论。

在保险库中，我的未决更改有一个评论框，我可以为每个文件保持更新，所以说我有十个文件被签出。

文件 1 - 注释 A
文件 2 - 注释 B
文件 3 - 注释 C
.....
文件
10 - 注释 J

然后，我还可以提供一般性评论，说明更改的目的。

在 TFS 中，每个更改集似乎只有 1 个评论框？有没有办法在我去的时候为每个文件输入评论？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:38:38.573

不，您不能为每个文件提供评论。评论总是针对每个变更集，因此一次针对多个文件。单独签入文件不是一个好主意，因为如果您进行构建、测试和部署自动化，这可能会导致持续集成构建出现很多问题。

通常您会将签入与任务相关联，您可以在任务描述中详细描述您已执行或计划执行的操作。

# django - 检查 for 循环中记住的单选按钮选择

> ID：15086736
> 
> 赞同：0
> 
> 时间：2013-02-26T10:30:15.467
> 
> 标签：django, templates

我正在尝试保存有关从列表（单选按钮）中选择的元素的会话信息，并在我返回页面时返回它。保存的选择存储在`picked_id`变量中。`{{ picked_id }}`我通过在 my 之前添加来检查它是否真的存在，`input(type="radio")`并且我确认该视图提供了正确的值。

问题是我的代码不起作用。请帮我找出问题所在：

```
{% if objects_list %}
<ul>
    {% for element in objects_list %}
    <li>
        <input type="radio" name="object" value="{{ element.id }}" {% ifequal picked_id element.id %}checked="checked"{% endifequal %}>
        {{ element.name }}
    </li>
    {% endfor %}
</ul>
{% else %}
    <p>{{ no_objects_mesage }}</p>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:46:15.947

根据您的回答：

1.  您正在从您的视图中的 request.POST dict 中设置 pick_id 的值。
2.  request.POST 中的所有值默认都是字符串。
3.  object_list 可能是来自 ORM 的列表。
4.  这意味着 element.id 是一个 PK 字段。
5.  这将是一个int。

因此，在将其保存到会话之前，您需要将“picked_id”转换为 int。

所以：

```
request.session['picked_id'] = int(request.POST.get('object', 0)) 
```

……或者无论如何你在你看来是这样做的。

# jwplayer - 如何将 MP4 视频从 Wowza 传输到 JWPlayer

> ID：15086739
> 
> 赞同：1
> 
> 时间：2013-02-26T10:30:29.503
> 
> 标签：jwplayer, rtmp, wowza

1.  ) 这里是我累的。

> ```
> <html>
> <head>
>   <script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
> </head>
> 
> <body>
>   <embed
>     flashvars="file=sample.mp4&streamer=rtmp://[my_server_ip]:1935/vod&provider=rtmp"
>     allowfullscreen="true"
>     allowscriptaccess="always"
>     id="player1"
>     name="player1"
>     src="player.swf"
>     width="480"
>     height="270"
>   />
> 
> </body>   
> </html> 
> ```

在 loclahost 中托管此文件时，它会显示“无法加载播放器配置”。我究竟做错了什么？

2.) 如果上述问题得到解决，我如何流式传输不在 wowza 内的视频文件文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:06:42.723

您正在使用 JW6，但您的代码适用于 JW5。在 JW6 中，我们也不支持 embed 标记。您需要使用我们的 JS 嵌入器 (jwplayer.js) 进行嵌入。RTMP url 现在也被视为一个 url，而不是分解为文件/流媒体。我们在这里有一个迁移指南 - [http://www.longtailvideo.com/support/jw-player/28834/migrating-from-jw5-to-jw6](http://www.longtailvideo.com/support/jw-player/28834/migrating-from-jw5-to-jw6)

# c# - How to load formated data in gridview?

> ID：15086750
> 
> 赞同：0
> 
> 时间：2013-02-26T10:30:58.743
> 
> 标签：c#, asp.net, gridview

For example, I have a source(Id, Name) with some records. I want to bind it to `GridView`. But, I want to format each record before add it to `GridView`, for example, I want to write prefix "test" to all the record where field is "Name". I heared that I need to use `onRowDataBound` event, but I cant understand how.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:42:36.690

First if you want to make little format on the data you are displaying, you can do this easily in your `.aspx` using `Eval` function to search on Google use this [asp.net eval format](https://www.google.com/search?q=asp.net%20eval%20format&aq=1&oq=asp.net%20eval%20&aqs=chrome.2.57j0l2j60j0.6597&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=asp.net%20eval%20format&oq=asp.net%20eval%20format&gs_l=serp.3..0l6j0i30l4.89973.91675.2.92799.3.2.1.0.0.1.220.427.2-2.2.0.les;..0.0...1c.1.4.serp.EaqTm4gyMQ0&psj=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.42965579,d.Yms&fp=1d01c4fbb1e2044b&biw=1024&bih=667)

Second for your example check this question : [Add prefix of http:// or https:// with Eval value](https://stackoverflow.com/questions/14120430/add-prefix-of-http-or-https-with-eval-value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:34:28.153

Use the DataFormatString in your gridview column. Ex:

```
<asp:BoundField DataField="name" DataFormatString="test_{0}" HeaderText="name" 
                    HtmlEncode="False" SortExpression="name" /> 
```

This will result in:

```
test_YourData 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:10:21.257

Well you can do that by capturing the binding event.

```
YourGrid.DataBound += YourGrid_RowDataBound

void YourGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {
      e.Row.Cells[1].Text = "test_" + e.Row.Cells[1].Text;
  }
} 
```

# html - 带有 h1 标签的额外空间

> ID：15086754
> 
> 赞同：1
> 
> 时间：2013-02-26T10:31:08.400
> 
> 标签：html, css, alignment

`h1`当我在标签上方添加标签时，有未知空间`p`。

这是**[小提琴](http://jsfiddle.net/CKRNs/2/)**

我需要的是在下图中

![在此处输入图像描述](../Images/8f0593d9d47ce557aef8a40a9244fc4c.png)

* * *

经过考虑`float:left`，我在真实页面中尝试过，但仍然出现问题

这是新的代码`float:left`

**[摆弄浮子](http://jsfiddle.net/CKRNs/19/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:33:23.030

那是因为你给你的`thumb`班级（这是你的形象）一个 100 像素的高度。只需删除该高度即可修复它，请参阅小提琴：http: [//jsfiddle.net/CKRNs/4/](http://jsfiddle.net/CKRNs/4/)

**编辑**：正如你也说过你想要`p`图像旁边的标签，添加`float: left`标签`p`和`thumb`类，如下所示：http: [//jsfiddle.net/CKRNs/6/](http://jsfiddle.net/CKRNs/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:36:07.633

用于**浮动**和移除`display inline-block;`

```
 p {
        width: 80%;
        vertical-align: top; margin:0 
    }
    h1{
        font-size:14px; 
        margin:0; 
        vertical-align:top;

    }
    .thumb{
    float:left;
        height:100px    
    } 
```

**[演示](http://jsfiddle.net/CKRNs/5/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:36:33.597

**问题**：错误使用`display:inline-block;`

**解决方案**：删除所有`display:inline-block;`和出现`vertical-align:top;`并给出`.thumb` `float:left;`（对齐块元素的正确方法彼此相邻）。

**示例**：http: [//jsfiddle.net/CKRNs/9/](http://jsfiddle.net/CKRNs/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:33:46.410

`float:left;`在`p`,`h1`和`.thumb`定义中添加一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T10:35:54.997

你需要设置你的形象`float:left`。看这个演示：http: [//jsfiddle.net/CKRNs/14/](http://jsfiddle.net/CKRNs/14/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T10:36:06.570

```
.thumb{
    display:inline-block;
    height:100px;
        float:left; 
} 
```

这意味着图像将向左浮动并允许文本换行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T10:41:16.793

我会为拇指使用绝对位置。并将 margin-left 放在 h1 和 p 标签上。[http://jsfiddle.net/CKRNs/13/](http://jsfiddle.net/CKRNs/13/)

```
h1, p{
margin: 0 0 0 60px; 
}

.thumb{
  position:absolute;
  width:50px;
  height:50px;
} 
```

# javascript - 除了 IE 之外的其他浏览器的 ActiveX 对象的替代方案？

> ID：15086761
> 
> 赞同：4
> 
> 时间：2013-02-26T10:31:32.387
> 
> 标签：javascript, jquery, csv

任何人都可以帮助我，因为我被困在本地磁盘中创建扩展名（比如.csv）的文件（临时），我尝试使用 ActiveX 对象，但它仅在 Internet Explorer 中工作正常，当我尝试使用其他浏览器时出错. 通过谷歌搜索，我知道 ActiveX 仅在 IE 中有效，因此在不同浏览器中尝试时会产生错误。

```
 var fso, f1;
    fso = new ActiveXObject("Scripting.FileSystemObject");
    f1 = fso.GetFile("c:\\test.txt");
    alert(f1); 
```

任何人都可以向我推荐一个非常有用的替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:56:31.803

您遇到的问题是 ECMAScript (JavaScript) 的浏览器实现*不允许您写入客户端的磁盘*。微软对 JavaScript 进行了逆向工程，并将其命名为*JScript*。虽然基础相同，但 MS 添加了那些 ActiveX 对象和一个编译器（可以编译 JScript，是的）。

简而言之，JScript 不仅可以用于浏览器任务，因此 MS 提供了 ActiveX 对象来启用某种形式的 I/O。*在 IE以外*的浏览器上，您唯一能做的就是使用 HTML5 的新 DOM Storage 对象。Teemu 提供了指向该文档的链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:07:26.230

其他帖子涵盖了有关使用 Html 5 存储到本地计算机的所有信息，因此我不会对此进行详细介绍，但这仅适用于兼容 Html 5 的浏览器（尽管大多数浏览器现在都兼容 Html 5，我不知道你的项目要求）。

另一种选择是使用服务器端代码（ASP.NET、PHP 等）创建/保存文件，然后向用户提供链接，以便他们可以下载文件。您仍然可以将其保存为 .csv 文件，以便用户在下载后可以在 Excel 中打开它。

编辑：

我要做的是更改您的网络服务，以便将文件保存到光盘（更多信息：[这里](http://msdn.microsoft.com/en-gb/library/6ka1wd3w.aspx)）。然后，不要从 Web 服务返回文件，而是返回 Url 以下载它。然后，您可以使用 JS 将用户重定向到该链接。

# r - 使用 R 的列表的所有对象中的 rowSums

> ID：15086762
> 
> 赞同：2
> 
> 时间：2013-02-26T09:54:34.217
> 
> 标签：r

我有一个很大的列表，我想做`rowSums`这个列表的每个对象中的每一行。

这是我所拥有的：

```
> DFTYPE
[[1]]
[[1]][[1]]
  DGDG.36.5 DGDG.36.6
1  978.4906  3585.613
1 1280.9531  8740.503
1 1228.3969  6082.900
1 5245.2437 18104.022
1    0.0000   827.650

[[1]][[2]]
  DGDG.36.5 DGDG.36.6
2    0.0000  917.5844
2  513.5063  976.2344
2  516.5781 1540.6000
2  838.5406 3486.5563
2 1146.8812 3962.2906
2    0.0000 1050.5281

[[1]][[3]]
  DGDG.36.5 DGDG.36.6
3 1755.0656 10924.975
3  713.2969  4681.759
3  946.1094  3319.722
3 1569.5281  6531.266
3 1827.9156 10501.375
3    0.0000  1973.325

[[2]]
[[2]][[1]]
  MGDG.34.4 MGDG.34.5 MGDG.34.6 MGDG.36.4 MGDG.36.5 MGDG.36.6
1   891.950  1463.695  14266.34     0.000  1368.040  5015.425
1  2596.695  4228.470  38945.15  1531.350  5617.475 14647.965
1  1536.595  3273.335  30895.44  1610.060  4415.735 11106.930
1  4471.495  9894.595  71023.04  4086.105  9536.450 24968.695

[[2]][[2]]
  MGDG.34.4 MGDG.34.5 MGDG.34.6 MGDG.36.4 MGDG.36.5 MGDG.36.6
2         0       0.0  2158.405      0.00  1478.710  2350.265
2         0       0.0  1409.740      0.00  1776.775  2110.440
2         0       0.0  1910.240      0.00  1044.570  2410.740
2         0     913.5  4558.720   1071.78  1499.770  3616.110
2         0       0.0  7980.890   1993.40  1044.855  8468.875
2         0       0.0  1593.260    792.46     0.000  1019.770

[[2]][[3]]
  MGDG.34.4 MGDG.34.5 MGDG.34.6 MGDG.36.4 MGDG.36.5 MGDG.36.6
3  1225.095  1994.225  20028.34  1728.695  3503.870 11717.955
3   948.865  1284.680   9522.01   487.985  1702.520  4291.785
3     0.000  1396.415  10216.45  1062.240  1438.825  5163.490
3  1077.845  2422.845  20380.78  2904.935  3147.180  8760.835
3  1135.710  3821.430  29022.75  1555.960  3652.580 12318.555
3     0.000   870.055  12322.73     0.000  1652.525  5136.380 
```

然后我创建一个新列表来获得总和的结果：

```
> DFttt<-list()
> DFttt<-rowSums(DFTYPE)
Error in rowSums(DFTYPE) : 
  'x' must be an array of at least two dimensions 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:36:55.060

考虑一个名为`List`如下的列表：

```
set.seed(1)    
List <- list(list(matrix(rnorm(10), ncol=2), matrix(rnorm(10), ncol=2)),
                 list(matrix(rnorm(10), ncol=2), matrix(rnorm(10), ncol=2)))
lapply(List, function(x) lapply(x, rowSums)) 

[[1]]
[[1]][[1]]
[1] -1.44692219  0.67107238 -0.09730391  2.17106215  0.02411938

[[1]][[2]]
[1]  1.4668476  0.3736530  0.3225956 -1.3934787  1.7188322

[[2]]
[[2]][[1]]
[1]  0.8628486  0.6263408 -1.3961874 -2.4675018  1.0377673

[[2]][[2]]
[1]  0.9436850 -0.4970777  0.3283582  1.0462203 -0.6138838 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T10:37:05.993

我想你需要一个 double `lapply`。

使用以下数据：

```
df <- data.frame(x=1:5,y=2:6)
df2 <- data.frame(u=3:7,v=4:8)
mylist <- list(list(df, df2),list(df,df2))
mylist

[[1]]
[[1]][[1]]
  x y
1 1 2
2 2 3
3 3 4
4 4 5
5 5 6

[[1]][[2]]
  u v
1 3 4
2 4 5
3 5 6
4 6 7
5 7 8

[[2]]
[[2]][[1]]
  x y
1 1 2
2 2 3
3 3 4
4 4 5
5 5 6

[[2]][[2]]
  u v
1 3 4
2 4 5
3 5 6
4 6 7
5 7 8 
```

您可以使用 ：

```
lapply(mylist, function(l) lapply(l, rowSums)) 
```

这使 ：

```
[[1]]
[[1]][[1]]
[1]  3  5  7  9 11

[[1]][[2]]
[1]  7  9 11 13 15

[[2]]
[[2]][[1]]
[1]  3  5  7  9 11

[[2]][[2]]
[1]  7  9 11 13 15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:34:18.427

您的示例不可重现，但类似于：

```
DFttt = lapply(DFTYPE, rowSums) 
```

应该是诀窍。

# git - 如何验证 svn 到 git 的转换？

> ID：15086769
> 
> 赞同：2
> 
> 时间：2013-02-26T10:31:58.783
> 
> 标签：git, svn, version-control, version-control-migration

您在 svn-to-git 之后执行哪些检查以确保您拥有所有标签/分支/提交等，因为它们在 svn 上并且没有任何丢失？

我能想到的检查是：

1.  git远程分支的数量和名称与svn分支匹配
2.  标签的数量和名称与svn标签匹配
3.  两个存储库中每个分支上的提交数相同

你能指导我并建议任何其他检查吗？您是否知道任何可能有用的工具/脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:43:55.897

我还会检查`svn:ignore`您在 SVN 存储库中的任何设置是否已转换为`.gitignore`条目。您可以使用[git svn create-ignore](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html)`.gitignore`创建文件：

```
$ git svn create-ignore 
```

或者，如果您不想使用`.gitignore`文件（在所有 repo 协作者之间共享），您可以将相同的规则放在本地 repo 的[`.git/info/exclude`](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)文件中：

```
$ git svn show-ignore > .git/info/exclude 
```

# php - 用于测试的子文件夹

> ID：15086776
> 
> 赞同：1
> 
> 时间：2013-02-26T10:32:39.900
> 
> 标签：php, .htaccess, directory

你能帮我`.htaccess`吗？我有简单的代码

```
Options -Indexes

RewriteEngine On
#RewriteBase /

# front controller
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule !\.(pdf|js|ico|gif|jpg|png|css|rar|zip|tar\.gz)$ index.php [L]

AddType application/x-httpd-php .php .phtml 
```

如果我在根文件夹（localhost）上使用此代码，则此代码是可以的，但我需要在子文件夹中的服务器上测试此代码，index.php 也在哪里。

我使用 URL as `http://domain.com/parameter/parameter`，但我现在需要使用`http://domain.com/folder_test/parameter/parameter`

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:36:05.647

取消注释`#RewriteBase /`并制作`RewriteBase /your_folder/`并尝试

# extjs - 使用 ExtJS MVC 中的 init 函数将数据加载到 Ext.data.Store

> ID：15086778
> 
> 赞同：2
> 
> 时间：2013-02-26T10:32:49.367
> 
> 标签：extjs, store

我需要在 init 上使用以下函数填充存储数据：

```
Ext.define('Vcs.store.Years', {

    extend: 'Ext.data.Store',
    fields: ['year'],
    data: this.getYears(),
    getYears: function() {
        var data = []
            date = new Date
            thisYear = date.getFullYear();
        for(var i = thisYear - 100; i <= thisYear; i++) {
            data.push({
            year: i,
            });
        }
        return data;
    }
}); 
```

此代码给出错误：`Object [object global] has no method 'generateYears'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T10:43:11.850

你可以这样做：

```
Ext.define('Vcs.store.Years', {  
    extend: 'Ext.data.Store',
    fields: ['year'],
    data: (function() {
        var data = [],
            date = new Date,
            thisYear = date.getFullYear();
        for(var i = thisYear - 100; i <= thisYear; i++) {
            data.push({
            year: i
            });
        }
        return data;
    })()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:40:53.310

我认为你的范围`this`是错误的。您必须在构造函数中填充数据：

```
constructor: function() {
    var me = this;
    Ext.apply(me, {
       data: me.getYears()
    });
    me.callParent();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T21:17:59.193

到目前为止，建议的解决方案都不适用于 Sencha Architect：闭包删除了所有空格，因此`new Date`变成了 undefined `newDate`; 并且该函数`me.getYears()`得到引号，从而成为一个字符串`'me.getYears()'`。

所以对于那些使用 Sencha Architect 的人来说，这里有一个应该使用的版本。我只是在商店的“加载”事件中使用了 .add() 方法。

```
Ext.define('MyApp.store.MyStore', {
    extend: 'Ext.data.Store',

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: true,
            storeId: 'MyStore',
            fields: [
                {
                    name: 'year',
                    type: 'int'
                }
            ],
            listeners: {
                load: {
                    fn: me.onStoreLoad,
                    scope: me
                }
            }
        }, cfg)]);
    },

    onStoreLoad: function(store, records, successful, eOpts) {
        store.add(function() {
            var data = [];
            var date = new Date();
            var thisYear = date.getFullYear();

            for (var i = thisYear - 100; i <= thisYear; i++) {
                var obj = { year:i };
                data.push(obj);
            }

            return data;
        }());
    }

}); 
```

# iphone - NSDataFormatter dateFromString 导致输出不正确

> ID：15086781
> 
> 赞同：0
> 
> 时间：2013-02-26T10:32:58.220
> 
> 标签：iphone, objective-c, nsdateformatter

这是我的代码：

```
[dateFormat setDateFormat:@"EEE MM d HH:mm:ss yyyy"];
logDate = [dateFormat dateFromString:[line substringToIndex:24]]; 
```

行由字符串组成：`"Mon Feb 18 09:25:53 2013: FAILED : Configuration-Update :`“

我单独得到日期“2013 年 2 月 18 日星期一 09:25:53”并使用格式对其进行`@"EEE MM d HH:mm:ss yyyy"`格式化。我得到一个不正确的输出：`"2013-02-18 03:55:53 -0000"`仅时间打印不正确。我遵循[日期格式模式](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)来指定模式，但我仍在逐步解决这个问题。我无法理解哪里出了问题。如果有人发现问题会很有帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:21:59.110

试试这个

```
NSDate *date = [NSDate date];
NSDateFormatter * formatter = [[NSDateFormatter alloc]init];
[formatter setDateFormat:@"EEE MM d hh:mm:ss yyyy"];
NSLog(@"%@",[formatter stringFromDate:date]);
NSLog(@"%@",date); 
```

当您仅使用 NSLog 记录时，您将获得 UTC 格式（UTC 由偏移值组成，在印度其标准时间 +5.30）即 yyyy-MM-d HH:mm:ss z ，z 是添加或减去的偏移量当前时间基于地区。

例如

```
NSLog(@"%@",[formatter stringFromDate:date]);
NSLog(@"%@",date); 
```

**2013 年 2 月 26 日星期二 05:38:00** // **“EEE MM d hh:mm:ss yyyy** ”

**2013 年 2 月 26 日星期二 17:46:22** // **“EEE MM d HH:mm:ss yyyy”**

**2013-02-26 12:08:00 +0000** //仅使用 NSLog 进行日志记录

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:38:12.007

当您像这样打印结果日期时，您需要为 NSDateFormatter 设置时区：

```
[formatter setTimeZone:[NSTimeZone localTimeZone]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:53:40.697

您需要用作：

```
NSString *line=@"Mon Feb 18 09:25:53 2013: FAILED : Configuration-Update :";

NSDateFormatter *dateFormat=[NSDateFormatter new];
[dateFormat setDateFormat:@"EEE' 'MM' 'd' 'HH:mm:ss' 'yyyy"];

NSDate *logDate = [dateFormat dateFromString:[line substringToIndex:24]];

NSLog(@"logDate->%@",logDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T11:10:45.683

如果我们获取 NSdate 对象的日志，它将仅显示相对于时区 +0000 的日期。为此，我们需要将日期格式化为我们当地的时区。像这样..

```
[dateFormat setDateFormat:@"EEE MM d HH:mm:ss yyyy"];
logDate = [dateFormat dateFromString:@"Mon Feb 18 09:25:53 2013"];
[dateFormat setTimeZone:[NSTimeZone localTimeZone]];
NSLog(@"Date %@",[dateFormat stringFromDate:logDate]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T09:40:46.960

感谢所有人..它通过以这种方式更改代码来工作..

```
NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init]autorelease];
[dateFormat setDateFormat:@"EEE MM d HH:mm:ss yyyy"];    
[dateFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];    
return [dateFormat dateFromString:dateString]; 
```

# google-geocoding-api - 在谷歌地理编码 URL 中使用 clientId 和签名时出现“无法对提供的 URL 进行身份验证”的身份验证错误

> ID：15086782
> 
> 赞同：0
> 
> 时间：2013-02-26T10:32:57.923
> 
> 标签：google-geocoding-api

我们正在从版本 2 移植到版本 3 的地理编码 api。这个公共[url](http://maps.googleapis.com/maps/api/geocode/json?address=27606&sensor=false)有效，但每天限制为 2500 个请求，我们是商业用户，所以我们需要在 url 中使用`clientId`&`signature`参数。我们有`clientId`谷歌给出的，我们正在`signature`使用谷歌自己提供的[代码生成。](https://developers.google.com/maps/documentation/business/webservices#JavaSignatureExample)

*注意：版本 2 要求我们直接使用“密钥”，但在版本中我们需要生成签名并使用它而不是密钥！*

但是在生成签名并将clientId和签名附加到url之后，例如

`http://maps.googleapis.com/maps/api/geocode/xml?address=27606&sensor=false&client=<OUR_CLIENT_ID>&signature=<SIGNATURE_WE_GENERATE>`我们正在收到此消息`Unable to authenticate the supplied URL. Please check your client and signature parameters.`。

知道我们生成签名的方式有什么问题吗？我们直接使用上面给出的示例签名生成代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:28:56.040

实际上我遵循的步骤是正确的，但是我们用来在 google 给出的 java 代码中生成 signed_url 的“YOUR_PRIVATE_KEY”是不正确的。我们为代码提供了正确的私钥，它生成了一个现在可以使用的正确签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T17:28:52.363

我曾经遇到过同样的错误。

我使用了 2 个密钥 - 一个用于开发（带有引用者的浏览器应用程序的密钥：允许任何引用者）- 一个用于服务器（带有引用者的浏览器应用程序的密钥：引用者 = 我的服务器的域）

有一天，我开始在我的开发 VBox 上收到这个错误（无法验证提供的 URL），对于一些 Gooble API 调用（如路由），但奇怪的是不是所有的 API。我通过将本地主机添加到我的服务器的授权引用并为开发和产品使用相同的密钥来解决它。我不能说更多，因为一旦我有了解决方法，了解问题所在并不是我的首要任务，但我希望这可以帮助您解决自己的问题。

# php - 在 .php 文件中包含 CSS

> ID：15086785
> 
> 赞同：-4
> 
> 时间：2013-02-26T10:33:01.947
> 
> 标签：php, css, include, include-path

我正在尝试在我的 .php 文件中包含一个 css 文件。

在 .php 文件中，我有；

```
<?php
Loads of code..
?> 
```

我想要这样。。

```
<?php
<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
Loads of code..
?> 
```

但显然这行不通。有什么办法可以做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T10:35:19.210

你可以用`echo`..

```
<?php
echo '<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">';
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T10:35:20.727

```
<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
<?php
Loads of code..
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:35:24.487

嗯……你的意思是这样的？

```
<?php
echo '<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">';
Loads of code..
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T04:34:16.903

我在这里发布了一个简单的解决方案： [https](https://navydadon.wordpress.com/2016/02/18/css-in-php-file/) ://navydadon.wordpress.com/2016/02/18/css-in-php-file/ 希望它会有所帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-23T10:02:32.990

很久以前，同样的事情发生在我身上。解决此问题的最佳方法是在您包含的所有文件中插入 css 文件以创建主 php 页面。

# xml - XPath - 数组到字符串的转换错误

> ID：15086790
> 
> 赞同：1
> 
> 时间：2013-02-26T10:33:12.193
> 
> 标签：xml, xpath, simplexml, php

我`simplexml_load_string`用来加载一些 XML：

```
$xml = "<payment><cardHolderName><![CDATA[John Smith]]></cardHolderName></payment>";
$xml = simplexml_load_string($xml, null, LIBXML_NOCDATA); 
```

然后如何使用 xpath 访问 cardHolderName (John Smith)？我试过了：

```
$name = $xml->xpath('/payment/cardHolderName');
echo $name; 
```

但该值为空，我收到警告：

> 数组到字符串的转换

所有这些 xpath 的结果相同：

```
'/payment/cardHolderName'
'/payment/cardHolderName[1]'
'/payment/cardHolderName/text()'
'/payment/cardHolderName[1]/text()' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:48:56.910

看看这是否适合你：

```
$name = $order->xpath('/payment/cardHolderName');
echo $name[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:51:08.470

XPath 查询不太正确，在此上下文中`$xml`表示您的根元素（“付款”），因此您可以使用

```
$order->xpath('cardHolderName'); 
```

也就是说，AFAIK simplexml 对 XPath 的支持并不出色。`DOMDocument`使用and会更容易做到这一点`DOMXPath`，它可以按您的预期工作。

# c - C 宏获取 typeof 参数

> ID：15086794
> 
> 赞同：4
> 
> 时间：2013-02-26T10:33:15.357
> 
> 标签：c, macros, c-preprocessor

我正在尝试编写一个宏来协助 C 中的面向对象编程。当我将类信息存储在一个常量结构中时，我需要创建一个执行以下操作的宏：

*   取对象的类型（解除引用的指针的类型）
*   追加`_info`以获取所需的 classInfo 结构的名称
*   获取该符号的地址，以便将其传递给函数
*   `destroyObject`使用指向类结构和对象本身的指针调用函数

一个例子：

```
queue_t* p = NULL;
delete(p); 
```

`delete`应扩展为：

```
destroyObject(&(queue_t_info), p); 
```

我尝试使用此宏，但无法开始工作：

```
#define delete(X) (destroyObject(&(typeof(*X)##_info), X)) 
```

我在 typeof 部分无法正常工作时遇到问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T11:36:15.573

`typeof`不是宏，它是语言构造，它由编译器扩展，而不是预处理器。由于预处理在编译之前进行，宏无法访问`typeof`结果。

您`delete(p)`的扩展为：`(destroyObject(&(typeof(*p)_info), p))`。（您可以通过`-E`gcc 标志看到它）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:40:42.283

我意识到我试图做的事情是不可能的——C 预处理器不会解析和符号化代码，因此它不知道变量是哪种类型。

为了解决这个问题，我还需要将类型传递给删除函数。这并不理想，因为它引入了由于类型不匹配而导致的常见错误来源。如果程序员传递了一个指向对象 A 的指针，但在删除函数中指定了对象 B，则会调用错误的析构函数。为了解决这个问题，我在宏中添加了类型检查，以便为任何不匹配的类型生成编译器警告。

```
#define typecheck(type,x) \
({  type __dummy; \
typeof(x) __dummy2; \
(void)(&__dummy == &__dummy2); \
})

#define delete(P, X) (destroyObject(&(X##_info), P), typecheck(X, *P))
#define new(X, ...) (createObject(&(X##_info), ##__VA_ARGS__)) 
```

宏的正常用法：

```
queue_t* p = new(queue_t);
delete(p, queue_t); 
```

但是使用错误的类型：

```
queue_t* p = new(queue_t);
delete(p, int); 
```

导致编译器警告：

```
Comparison of distinct pointer types ('int *' and 'typeof (*p) *' (aka 'queue_t *')) 
```

# actionscript-3 - as3 从父 swf 访问变量

> ID：15086796
> 
> 赞同：0
> 
> 时间：2013-02-26T10:33:20.620
> 
> 标签：actionscript-3, variables, parent

我试图让孩子阅读其父母的变量，反之亦然。父母阅读孩子的变量没有问题，但由于某种原因，孩子只能得到“未定义”作为答案......（而不是“456”）

父脚本

```
var mySwf
var masterVar=456
function startLoad() { 
    var myLoader:Loader = new Loader(); 
    var mRequest:URLRequest = new URLRequest("test1.swf"); 
    myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
    myLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressHandler);
    myLoader.load(mRequest); 
} 

function onCompleteHandler(loadEvent:Event) {
    mySwf=loadEvent.currentTarget.content
    addChild(mySwf);
    trace(mySwf.slaveVar)//123
}

function onProgressHandler(mProgress:ProgressEvent) {
}
startLoad() 
```

`Child(test1.swf)`脚本

```
var slaveVar=123

trace(Object(parent))//[object Loader]
trace(Object(parent.parent))//[object Object]
trace(Object(parent.parent).masterVar)//undefined
trace(Object(this.parent.parent).masterVar)//undefined 
```

parent.parent.parent 为 null 并且 MovieClip(parent.parent) 只吐出一个错误

我不知道出了什么问题......我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:18:40.517

试试这个：

在子 swf 中：

```
var theParent:Object;
addEventListener(Event.ADDED_TO_STAGE, onAdded);
function onAdded(e:Event):void
{
    theParent = this.parent as Object
    trace(theParent.masterVar);
    //will work after child swf has been added to the display list of the parent file.
} 
```

# objective-c - 在 TableViewCell 上使用 Tapgesture 弹出窗口

> ID：15086803
> 
> 赞同：0
> 
> 时间：2013-02-26T10:33:38.650
> 
> 标签：objective-c, popup, cgpoint

我有一个包含多个标签的自定义单元格的 TableView。我在其中一个标签上添加了一个 Tapgesture，因此会出现一个弹出窗口。问题是，弹出窗口没有出现在它应该出现的位置（居中并位于标签顶部）。

这条线有什么问题：

```
[self.popupMenu showInView:self.view atPoint:CGPointMake(label.center.x, label.frame.origin.y)]; 
```

表视图.m：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // add a tap gesture recognizer
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap:)];
    [cell.customAmountLabel addGestureRecognizer:tapGesture];

    NSString *ItemName = [NSString stringWithCString:CurrentOrder[indexPath.row].c_str() encoding:NSUTF8StringEncoding];
    NSString *ItemAmount = [NSString stringWithCString:CurrentOrder[indexPath.row].c_str() encoding:NSUTF8StringEncoding];

    cell.customNameLabel.text = ItemName;
    cell.customAmountLabel.text = ItemAmount;

    return cell;
} 
```

点击手势的方法：

```
- (void)labelTap:(UITapGestureRecognizer *)gestureRecognizer
{
    // get location of the swipe
    CGPoint location = [gestureRecognizer locationInView:self.tableCurrentOrder];

    // get the corresponding index path within the table view
    NSIndexPath *indexPath = [self.tableCurrentOrder indexPathForRowAtPoint:location];

    // check if index path is valid
    if(indexPath)
    {
        // get the cell out of the table view
        CustomCell *cell = (CustomCell *) [self.tableCurrentOrder cellForRowAtIndexPath:indexPath];

        // update the cell or model
        std::cout << CurrentOrder[indexPath.row] << std::endl;

        UILabel *label = (UILabel *)cell.customAmountLabel;

        [self.popupMenu showInView:self.view atPoint:CGPointMake(label.center.x, label.frame.origin.y)];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:52:28.353

您想在点击单元格后弹出任何视图吗？如果是，那么我建议您`-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`在 CustomCell 类中使用该方法。

您将能够使用该`event`方法的参数知道水龙头在哪里。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSSet *allTouches = [event allTouches]; 
    for (UITouch *touch in allTouches) 
    { 
        CGPoint location = [touch locationInView:touch.view];
        (...)
    }
} 
```

# mongodb - mongoexport 到 json 文件时缺少 NumberLong

> ID：15086805
> 
> 赞同：2
> 
> 时间：2013-02-26T10:33:45.100
> 
> 标签：mongodb, mongoexport

我使用 mongoexport 将集合导出到 json 文件（脚本如下）。

`mongoexport -d db1 -c user --out /root/user_130226.json`

发现那些“NumberLong”类型的参数被保存时没有“NumberLong”这个词，所以当我使用mongoimport时，“NumberLong”这个词也不见了。

如果使用 mongodump 和 mongorestore，则相同。

例子：

来源 ：

`>> "cd" : NumberLong(1361862291)`

输出并导入新集合：

`>> "cd" : 1361862291`

但是如果 NumberLong 带有括号（）中的引号，则它会相应地导出和导入。

例子：

> > "u4" : NumberLong("111018951303058"),

问题：

# 1\. “NumberLong”这个词不被导出有关系吗？

# 2.不带引号保存NumberLong是否正确？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:21:33.633

> 1.  不带引号保存 NumberLong 是否正确？

这似乎是 Mongo 的行为，具体取决于数字的长度。通过解析不同长度的数字进行了进一步测试。

1.  44 - 无引号 >> NumberLong(44),
2.  1338585352 - 无报价 >> NumberLong(1338585352),
3.  13385853520 - 添加引用>>“NumberLong（“13385853520”）

> 1.  如果“NumberLong”这个词没有被导出，这有关系吗？

因为有或没有引号都是正确的，这是 Mongo 的行为。因此，使用 mongoexport/mongodump 导出时将删除 NumberLong() 也应该考虑正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:09:59.373

> 1.  如果“NumberLong”这个词没有被导出，这有关系吗？

取决于，这对你来说重要吗？

之所以`mmongoexport`是 dong，是因为与 BSON 不同，JSON 不具备 BSON 那样表达高级对象的能力`NumberLong`；考虑到这一点，他们只是被剥夺了。

如果您打算将此文件导入回 MongoDB，这可能对您很重要，因为对象将会丢失。

> 1.  不带引号保存 NumberLong 是否正确？

是的，`NumberLong`可以将正整数作为其唯一参数。

# php - Symfony 2 - 基于实体关联的动态表单生成

> ID：15086808
> 
> 赞同：2
> 
> 时间：2013-02-26T10:33:50.550
> 
> 标签：php, forms, symfony, types, doctrine-orm

我有以下设置：

实体**结果**：

```
/**
 * @ORM\OneToMany(targetEntity="Answer", mappedBy="result", cascade={"persist", "remove"}, orphanRemoval=true)
 */
private $answers; 
```

实体**回答**：

```
/**
 * @ORM\ManyToOne(targetEntity="Result", inversedBy="answers", cascade={"persist"})
 * @ORM\JoinColumn(name="result_id", referencedColumnName="id")
 */
private $result; 
```

表单**结果类型**：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{      
    $builder
        ->add('answers', 'collection', array(
            'type' => new AnswerType(),               
        ))
    ;
} 
```

Form **AnswerType** : - 我想动态化的这个，目前已弃用：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('value', 'choice', array(
        'choices'   => Answer::getChoices(),
        'expanded'  => true,
        'required'  => true,
    ))
    ;
} 
```

我想做的事：

结果表单有一个AnswerType 的**集合**。我希望每个 AnswerType 都是动态的，具体取决于链接到的当前**答案**。

例如，如果我有一个函数`Answer::getRandomStatus()`- 如果它是*真的*- `value`AnswerType 的字段是`text`，`choice`否则。

我的猜测是`buildForm`,`AnswerType`但是`$builder->getData() returns null`，我无法区分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:41:57.800

这应该给你你正在寻找的答案：

[http://symfony.com/doc/2.0/cookbook/form/dynamic_form_modification.html](http://symfony.com/doc/2.0/cookbook/form/dynamic_form_modification.html)

为了更好地理解上述内容，您可以查看：

[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/FormEvents.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/FormEvents.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T19:28:20.587

我也在寻找这个，但想要一个已经实施的解决方案。查看 CollectionType 的源代码，它广泛使用了这些事件。

[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/CollectionType.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/CollectionType.php) [https://github.com/symfony/symfony/blob/master/src /Symfony/Component/Form/Extension/Core/EventListener/ResizeFormListener.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/EventListener/ResizeFormListener.php)

# javascript - jQuery mobile：如何设置文本输入的背景颜色

> ID：15086811
> 
> 赞同：1
> 
> 时间：2013-02-26T10:33:59.280
> 
> 标签：javascript, jquery, css, jquery-mobile

我希望在弹出面板中使用的文本输入字段的背景是透明的。使用

```
 style="background: rgba(38,38,38,0.5);" 
```

确实适用于文本区域，但不适用于文本输入字段：

![截屏](../Images/1fcbd0a387dd1ccca49cb8c24a6a99b7.png)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:40:05.320

您应该设置父元素的背景颜色`.ui-input-text`：

```
<div style="background: rgba(38,38,38,0.5);" class="ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-a ui-mini">
    <input data-mini="true" id="selectedNode" type="text" readonly="true" value="1234" class="ui-input-text ui-body-a">
</div> 
```

由于`div.ui-input-text`是由 jQuery Mobile 自动生成的，因此您应该将此规则添加到您的样式表中：

```
.ui-input-text {
    background-color: rgba(38, 38, 38, 0.5);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:48:09.363

在您的示例中，设置输入元素的背景颜色可以正常工作，但是当您将其设置为半透明 rgba(38,38,38,0.5) 时，您会得到不同的结果，因为您的文本区域和输入文本字段的父标签具有不同的背景颜色。

在这种情况下使用纯色以获得更好的性能并排除这样的副作用。或者只是确保两个父标签具有相同的背景颜色。

# xml - 在子数据集中使用 XML

> ID：15086813
> 
> 赞同：1
> 
> 时间：2013-02-26T10:34:08.040
> 
> 标签：xml, dataset, jasper-reports, ireport

我是**iReport Designer 5.0.1 的新手，在创建和使用****子数据集**时遇到问题。**XML**文件只有一个's列表
。对于每个我想使用. 这是 XML：**`<incidence>``<incidence>``<sonometria>`** 

 **```
<?xml version="1.0" encoding="UTF-8"?>
<incidencias>
    <incidencia id="1">
        <sonometria>
            <lectura>
                <fecha>1361780123891</fecha>
                <lmax>80.0</lmax>
                <leq>68</leq>
                <l10>72</l10>
                <l90>62</l90>
                <limite>90</limite>
            </lectura>
            <lectura>
                <fecha>1361780125994</fecha>
                <lmax>82.0</lmax>
                <leq>70</leq>
                <l10>73</l10>
                <l90>65</l90>
                <limite>90</limite>
            </lectura>
            <lectura>
                <fecha>1361780127030</fecha>
                <lmax>85.0</lmax>
                <leq>69</leq>
                <l10>71</l10>
                <l90>62</l90>
                <limite>90</limite>
            </lectura>
        </sonometria>
    </incidencia>
    <incidencia id="2">
        <sonometria>
            <lectura>
                <fecha>1361780130155</fecha>
                <lmax>85.0</lmax>
                <leq>75</leq>
                <l10>78</l10>
                <l90>66</l90>
                <limite>90</limite>
            </lectura>
            <lectura>
                <fecha>1361780131191</fecha>
                <lmax>82.0</lmax>
                <leq>70</leq>
                <l10>73</l10>
                <l90>65</l90>
                <limite>90</limite>
            </lectura>
            <lectura>
                <fecha>1361780132289</fecha>
                <lmax>80.0</lmax>
                <leq>65</leq>
                <l10>70</l10>
                <l90>60</l90>
                <limite>90</limite>
            </lectura>
        </sonometria>
    </incidencia>
</incidencias> 
```

主查询为：`/incidencias/incidencia`
子数据集查询为：`/incidencias/incidencia[@id="1"]/sonometria/lectura`. 是的，`id="1"`不会很有活力，但这是我还不想面对的另一个问题。

好吧，问题是图表是空的： ![在此处输入图像描述](../Images/bc9cdb22d9c180314b48656d3b4c4e9d.png) 所以我不知道问题是子数据集还是使用数据集的图表。这是我的模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="incidencias" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="71bf8975-c38f-430a-9743-8924d800c8fc">
    <subDataset name="New Dataset 1" uuid="c141c224-fb9f-4de3-851a-ab362f2b336b">
        <queryString language="xPath">
            <![CDATA[/incidencias/incidencia[@id="1"]/sonometria/lectura]]>
        </queryString>
        <field name="fecha" class="java.lang.String">
            <fieldDescription><![CDATA[fecha]]></fieldDescription>
        </field>
        <field name="lmax" class="java.lang.String">
            <fieldDescription><![CDATA[lmax]]></fieldDescription>
        </field>
        <field name="l10" class="java.lang.String">
            <fieldDescription><![CDATA[l10]]></fieldDescription>
        </field>
        <field name="leq" class="java.lang.String">
            <fieldDescription><![CDATA[leq]]></fieldDescription>
        </field>
        <field name="l90" class="java.lang.String">
            <fieldDescription><![CDATA[l90]]></fieldDescription>
        </field>
        <field name="limite" class="java.lang.String">
            <fieldDescription><![CDATA[limite]]></fieldDescription>
        </field>
        <field name="id" class="java.lang.String">
            <fieldDescription><![CDATA[ancestor::incidencia/@id]]></fieldDescription>
        </field>
    </subDataset>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["C:\\Users\\Alfonso\\Desktop\\"]]></defaultValueExpression>
    </parameter>
    <queryString language="xPath">
        <![CDATA[/incidencias/incidencia]]>
    </queryString>
    <field name="id" class="java.lang.String">
        <fieldDescription><![CDATA[@id]]></fieldDescription>
    </field>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="52" splitType="Stretch">
            <staticText>
                <reportElement uuid="de49d5f3-fbc4-4922-aedf-a1ad48b3f8d0" x="0" y="0" width="555" height="52"/>
                <textElement textAlignment="Center">
                    <font size="24" isBold="true"/>
                </textElement>
                <text><![CDATA[Incidencias]]></text>
            </staticText>
        </band>
    </title>
    <columnHeader>
        <band height="33" splitType="Stretch">
            <staticText>
                <reportElement uuid="e8fb4f62-e0b6-43a2-b502-d2482b718097" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[@id]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="162" splitType="Stretch">
            <timeSeriesChart>
                <chart>
                    <reportElement uuid="2b58dfb5-85f8-4e5e-bc5d-32f2f14b3503" x="0" y="23" width="555" height="130"/>
                    <chartTitle/>
                    <chartSubtitle/>
                    <chartLegend/>
                </chart>
                <timeSeriesDataset timePeriod="Second">
                    <dataset>
                        <datasetRun subDataset="New Dataset 1" uuid="4a8bc785-e943-4de6-b9cf-a47149a1a3ed"/>
                    </dataset>
                    <timeSeries>
                        <seriesExpression><![CDATA["Ejemplo"]]></seriesExpression>
                        <timePeriodExpression><![CDATA[new Date($F{fecha})]]></timePeriodExpression>
                        <valueExpression><![CDATA[Float.parseFloat($F{lmax})]]></valueExpression>
                    </timeSeries>
                </timeSeriesDataset>
                <timeSeriesPlot>
                    <plot/>
                </timeSeriesPlot>
            </timeSeriesChart>
            <textField>
                <reportElement uuid="7c330739-e9a2-4879-9410-7b61589fd89e" x="0" y="3" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:36:24.780

AFAIK 图表只能放置在报告的摘要带中。您不能使用子数据集为一份报告制作一些图表。
尝试使用 lectura 的子报表来更改您的报表（xPath 查询，如“//lectura”）。在子报表中，您必须将图表放在摘要带中。**

# php - 使用 ajaxSubmit() 函数将数据从两个表单中的一个按钮发送到一个 php 接收器

> ID：15086814
> 
> 赞同：0
> 
> 时间：2013-02-26T10:34:13.037
> 
> 标签：php, jquery, forms, submit

我在html中有两种形式：

```
<form id="form1" action="update.php" method="post">
<input type="text" name="username1">
</form>

<form id="form2" action="update.php" method="post">
<input type="text" name="username2">
</form>

<button type="button" onclick="submitTwoForms();">Send</button> 
```

现在，我使用 jQuery 表单插件将这两个表单发送到一个名为“update.php”的 php 页面。像这样的Javascript：

```
function submitTwoForms() {
         $('#form1, #form2').ajaxSubmit();
} 
```

问题是，update.php 只能从form1 中获取数据，即username1。update.php 如何同时从 form1 和 form2 获取数据？

我的 update.php 是这样的：

```
<?php
$user1 = $_POST['username1'];
$user2 = $_POST['username2'];
?> 
```

我想保留这些：

1.  我想使用 ajaxSubmit() 函数，因为它可以处理文件上传。
2.  我想在 html 中保留两种形式，而不是一种。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:38:57.473

您可以使用 jQuery Form Plugin 并像这样 **Method1**

```
 $(document).ready(function() { 
        $('#form1, #form2').ajaxForm(function() { 
            // optionally do stuff here after forms submitted
        });

        $('#submit').click(function() {
            $('#form1, #form2').ajaxSubmit();
            return false; 
        });
    }); 
```

**方法2：** 试试这个[Demo Here](http://plungjan.name/test/duosubmit.html)：

```
$(document).ready(function() {
    $("#submit").click(function() {
        $.post($("#form1").attr("action"), $("#form1").serialize(),
          function() {
            $.post($("#form2").attr("action"), $("#form2").serialize(),
              function() {
                alert('Both forms submitted');
              });
          });
      });
  }); 
```

# internet-explorer - Chrome-frame 25.0.1364.97 渲染

> ID：15086817
> 
> 赞同：0
> 
> 时间：2013-02-26T10:34:21.443
> 
> 标签：internet-explorer, browser, rendering, google-chrome-frame

我们有 Intranet web 系统，我们的大多数员工使用安装了 chrome 框架的 IE。因此，当 chrome-frame 更新到版本 25.0.1364.97 时，一切正常。现在，有了这个新版本，出现了渲染问题 - 似乎页面渲染没有结束 - 一些 html 块从那里出来父母等等。刷新页面时 - 一切都很好。页面适用于所有浏览器，包括 IE。但我们想使用 chrome-frame，因为它更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:36:13.563

我们在此版本的 Chrome Frame 中遇到了类似的问题，其中 javascript 被写入页面标题。我曾尝试在 Google 发布网站上删除问题报告，但该网站似乎已关闭。我们已确认之前版本的 Chrome Frame 中不存在此问题。

# java - 尽管 isDebugEnabled 为 true，但 log4j 调试消息未显示在控制台中

> ID：15086818
> 
> 赞同：14
> 
> 时间：2013-02-26T10:34:21.323
> 
> 标签：java, logging, log4j

我在我的项目中使用以下代码使用 log4j 记录调试消息

```
private static final Logger LOG = Logger.getLogger(MyClass.class)
// ...
if(LOG.isDebugEnabled()) {
    LOG.debug("my log message");
} 
```

我可以通过在写入调试消息的行添加一个断点来确认我的 log4j 配置是正确的，即`LOG.isDebugEnabled()`返回`true`。有趣的是，我的调试消息没有显示在我的 IDE (IntelliJ) 的控制台中，但是当更改`LOG.debug()`为时`LOG.info()`，信息消息会按预期记录。

为了找出这里出了什么问题，我应该寻找什么想法？

**编辑：**这是我的 log4j.properties 文件

```
log4j.appender.Stdout=org.apache.log4j.ConsoleAppender
log4j.appender.Stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.Stdout.layout.conversionPattern=%-5p [%d{dd.MM.yy HH:mm:ss}] %C{1} - %m [thread: %t]\n
log4j.appender.Stdout.threshold=info

log4j.appender.StandaloneFile=org.apache.log4j.RollingFileAppender
log4j.appender.StandaloneFile.File=logs/standalone.log
log4j.appender.StandaloneFile.MaxFileSize=5MB
log4j.appender.StandaloneFile.MaxBackupIndex=20
log4j.appender.StandaloneFile.layout=org.apache.log4j.PatternLayout
log4j.appender.StandaloneFile.layout.ConversionPattern=%-5p [%d{dd.MM.yy HH:mm:ss}] %C{1} - %m [thread: %t]\n
log4j.appender.StandaloneFile.threshold=info

log4j.rootLogger=info, Stdout, StandaloneFile
log4j.logger.com.myPacke.package1=info, Stdout, StandaloneFile

log4j.logger.com.myPacke.package2=DEBUG 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T10:41:33.300

```
log4j.appender.Stdout.threshold=info 
```

应该：

```
log4j.appender.Stdout.threshold=debug 
```

您只需将控制台阈值设置为信息，因此您不会获得调试级别的日志。

请注意，您还将 RollingFileAppender 阈值设置为 @Stephen C 评论的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:40:20.400

确保您的配置具有以下附加程序...我们使用了 log4j.xml，所以我从 xml 添加

```
<appender name="console" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out" />
    <param name="Threshold" value="info" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%-5p: %c - %m%n" />
    </layout>
</appender>

<appender name="logfile" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="log/dcm_migration.log" />
    <param name="Append" value="false" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d  %-5p  [%c{1}] %m %n" />
    </layout>
</appender> 
```

# c# - 从数据库加载 ASPX 标记

> ID：15086819
> 
> 赞同：0
> 
> 时间：2013-02-26T10:34:28.523
> 
> 标签：c#, asp.net

假设我在本地开发中有一个 default.aspx 页面，但在生产中我们根据客户要求有不同的标记可能是我们不会在客户端页面上使用 up-comming.ascx 用户控件，但我们在本地使用或用于其他客户端. 简而言之，如何从数据库而不是 .cs 代码加载 aspx 标记，因为它已经编译仅更改 aspx。

# php - mysql_fetch_row 不返回新更新的行

> ID：15086822
> 
> 赞同：0
> 
> 时间：2013-02-26T10:34:35.913
> 
> 标签：php, mysql

我在mysql中有一个表，如下所示-

```
++++++++++++
+ my_table +
++++++++++++
id
is_done
++++++++++++ 
```

我有一个 PHP 脚本，它执行如下操作 -

```
<?php

$q=mysql_query("SELECT * FROM my_table WHERE is_done=0");

while($res=mysql_fetch_assoc($q)){
  $id=$res['id'];
  //do something lengthy
  sleep(60);  
  mysql_query("UPDATE my_table SET is_done=1 WHERE id='$id'");
}

?> 
```

现在，如果我手动更改 mysql 中的一行并`is_done=1`为该行设置，脚本仍会处理该行。如何调整我的脚本以从 mysql 读取新的和更新的行并跳过同时标记为已完成的任何行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:00:02.850

你为什么不把简单的事情。使用睡眠的目的是什么？

```
mysql_query("UPDATE my_table SET is_done=1 WHERE is_done=0"); 
```

您没有在整个表中进行查询并一一更改。

如果您需要使用睡眠，请尝试以下操作：

```
mysql_query("UPDATE my_table SET is_done=1 WHERE is_done=0 and id='$id'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:25:58.263

如果您担心调用不必要的 sql 语句，我建议将 id 聚合到一个数组并在循环外更新（性能）：

```
<?php
$q=mysql_query("SELECT * FROM my_table WHERE is_done=0");
$ids = array();
while($res=mysql_fetch_assoc($q)){
$ids[]=$res['id'];
//do something lengthy
sleep(60);
}
mysql_query("UPDATE my_table SET is_done=1 WHERE id IN ('".implode("','", $ids)."')");
?> 
```

MySQL 不会对已经包含新数据的行执行任何操作（没有受影响的行，其中 is_done=1）。

如果您担心的是您正在执行的操作，您可以使用[事务](http://dev.mysql.com/doc/refman/5.0/en/commit.html)来确保您正在执行的操作是原子的，或者使用[表锁定](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)来确保在脚本运行时没有发生任何更改。

# ajax - 如何将每个元素的 ID 从 Ajax 表单发送到操作？

> ID：15086828
> 
> 赞同：0
> 
> 时间：2013-02-26T10:34:57.230
> 
> 标签：ajax, asp.net-mvc, asp.net-ajax, hidden, ajax.beginform

我需要那个，我点击哪个项目，把它`Id`付诸`GetProduct()`行动。我使用`hidden`了元素，但它不起作用：

```
@using (Ajax.BeginForm("GetProduct", "Product", new AjaxOptions { UpdateTargetId = "getProductResult" }, new { id = "productForm" }))
    {
      foreach (var item in list)
      {
         <a href="#" onclick="$('#productForm').trigger('submit');">@item.Name</a>

        //this hidden always send '1', but I want to send item's Id
        <input type="hidden" id='product_@(item.Id)' name ="id" value="@item.Id"  />
      }

     <noscript>
        <input type="submit" id="sendButton" />
     </noscript>
    } 
```

我哪里错了？我该如何发送`Id`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:39:56.650

隐藏输入的名称为“id”，并且在 for 循环中增加了时间。因此它不会工作..

不要在单击按钮时直接提交表单。将 ID 存储在按钮的 rel 属性中。并在单击时将其值分配给隐藏变量，然后提交表单..

```
<a href="#"
   rel="@(item.id)"
   onclick="$('#id').val($(this).attr('rel')); ('#productForm').trigger('submit');">
@item.Name
</a> 
```

将 onClick 代码放在单独的函数中将是首选的:)

检查这个[提琴手](http://jsfiddle.net/qNCXg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:59:16.797

试试这个 。

```
 foreach (var item in list)
  {
    @using (Ajax.BeginForm("GetProduct", "Product", new AjaxOptions { UpdateTargetId = "getProductResult" }, new {  }))
      {
     <a href="#" class="anchor" >@item.Name</a>

    //this hidden always send '1'.
    <input type="hidden" id='product_@(item.Id)' name ="id" value="@item.Id"  />

      <noscript>
       <input type="submit" id="sendButton" />
     </noscript>
     }
  }

<script>
$(function(e){
 $('.anchor').click(function(e){
   //get the parent form.
   var parentform= $(this).parents('form:first');
   parentform.submit();

  });
});
</script> 
```

# algorithm - 一段代码的计算复杂度

> ID：15086830
> 
> 赞同：5
> 
> 时间：2013-02-26T10:35:02.997
> 
> 标签：algorithm, for-loop, big-o, time-complexity, asymptotic-complexity

我有一个程序，并试图计算它的复杂性。我想确定我没有弄错

```
for(int i=4; i<=n; i=i*4)
{
    cout<<"counter for first loop: "<<++count1<<endl;
    for(int j=i;j>=0;j=j-4)
    {
        cout<<"counter for second loop: "<<++count2<<endl;
        for(int k=0;k<=n;k++)
        {
            cout<<"counter for third loop: "<<++count3<<endl;
        }
    }
} 
```

这里，第三个循环的复杂度是O(n)，那么再加上第二个循环，复杂度就变成了O(n.log [4] i)，整个程序的复杂度是O(n.(log [4] i) ² ) . 我的回答对吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:16:07.120

最内层循环的复杂度为 O(n)。中间一个的复杂度是O(i/4)，反过来又是O(i)。最外层循环的复杂度为 O(log [4] n)。代码的总复杂度是 O(nilog [4] n) ，它等于 O (n.(log [4] n) ² )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T19:42:29.510

您可以像下面这样正式进行：

![在此处输入图像描述](../Images/f661e78a04506be3056da17112345c0d.png)

执行这个片段：

```
sum = 0;
for( i = 4 ;  i <= n;  i = i * 4 ) {
    for( j = i ; j >= 0 ; j = j - 4 ) {
        for( k = 0 ; k <= n ; k ++ ) {
            sum ++;
        }
    }
} 
```

我们获得：

![在此处输入图像描述](../Images/d4b8dd827cf4f67d3f75dd0882819896.png)

![在此处输入图像描述](../Images/4b2be11443d1f04cecbce23d49a63ce9.png)

![在此处输入图像描述](../Images/11b384206ccafd7e5afbd862614d5737.png)

![在此处输入图像描述](../Images/024a5ad8cb8502c110224bdcdcb9598e.png)

结果与上述公式完全一致。

此外，两个内部循环的运行时间都是 O(n) ...这意味着，当一起执行时，我们得到 O(n²)。

# android - 如何在android java中以大xml文件作为参数调用soap webservice

> ID：15086835
> 
> 赞同：0
> 
> 时间：2013-02-26T10:35:18.240
> 
> 标签：android, xml, soap, ksoap2, uploading

我成功地将字符串和 int 发送到肥皂，但不是 xml SOAPAction：

```
"iReceiver/XPL-CIMS-iReceiver-RecordIssuesData" 
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <XPL-CIMS-iReceiver-RecordIssuesData xmlns="iReceiver">
      <A_iStaffDId>int</A_iStaffDId>
      <A_strGUID>string</A_strGUID>
      <dsIssues>
        <xsd:schema>schema</xsd:schema>xml</dsIssues>
    </XPL-CIMS-iReceiver-RecordIssuesData>
  </soap:Body>
</soap:Envelope> 
```

我是stackoverflow的新手。请帮助我提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:52:14.437

使用以下方法将其转换为 xml 并以这种方式调用它： Document document = XMLfromString(Str);

然后以这种方式解析它

NodeList node = document.getElementsByTagName("firsttag") 并发送

公共文档 XMLfromString(String v) {

```
 Document doc = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(v));
        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        System.out.println("Wrong XML file structure: " + e.getMessage());
        return null;
    } catch (IOException e) {
        e.printStackTrace();
    }

    return doc;

} 
```

# android - 如何在上下文菜单中启用/禁用项目

> ID：15086838
> 
> 赞同：1
> 
> 时间：2013-02-26T10:35:20.200
> 
> 标签：android

我可以使用以下方法禁用上下文菜单中的项目：

```
menu.getItem(1).setEnabled(false); 
```

在 onCreateContextMenu 中，但是如果我以后想在同一个活动中将其设置为 true 怎么办？我怎么能在运行时做到这一点？

编辑：

```
 // Create context menu
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);

    menu.setHeaderTitle("Options for this image"); // Title for the menu
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_1_menu, menu);

    menu.getItem(1).setEnabled(false);  
} 
```

这是我要更改要启用的项目的地方：

```
 // Handle return values from different activities
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK) {

        if (requestCode == 1) {

            // Get value from intent
            String imageId = data.getExtras().getString("imageId");

            // Show full screen image
            Bitmap bitmap = BitmapFactory.decodeFile(imageId);
            imageView.setImageBitmap(bitmap);
        }

        else if(requestCode == 2) {
            String contact1 = data.getExtras().getString("contactName");
            String contact2 = data.getExtras().getString("test");
            Toast.makeText(Activity_1.this, "" + "Value from activity 3: " + contact1 + " " + contact2, Toast.LENGTH_SHORT).show();

 CHANGE MENU ITEM 1 TO ENABLE HERE!!!!

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T16:24:17.150

与选项菜单相反，您需要在`onPrepareOptionsMenu`每次显示菜单时添加菜单特定代码的方法，您可以在`onCreateContextMenu`上下文菜单中执行此操作。`onCreateContextMenu`每次菜单要在屏幕上显示时调用。

因此，只需将菜单的启用状态存储在某处，并使用此变量在`onCreateContextMenu`方法中相应地设置启用状态。对于您的示例，这看起来像

```
boolean menuItem1EnabledState = false;

// Create context menu
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);

    menu.setHeaderTitle("Options for this image"); // Title for the menu
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_1_menu, menu);

    menu.getItem(1).setEnabled(menuItem1EnabledState);  
}

// Handle return values from different activities
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK) {

        if (requestCode == 1) {

            // Get value from intent
            String imageId = data.getExtras().getString("imageId");

            // Show full screen image
            Bitmap bitmap = BitmapFactory.decodeFile(imageId);
            imageView.setImageBitmap(bitmap);
        }

        else if(requestCode == 2) {
            String contact1 = data.getExtras().getString("contactName");
            String contact2 = data.getExtras().getString("test");
            Toast.makeText(Activity_1.this, "" + "Value from activity 3: " + contact1 + " " + contact2, Toast.LENGTH_SHORT).show();

            menuItem1EnabledState = true;

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:48:10.373

使用 onPrepareOptionsMenu

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    menu.getItem(1).setEnabled(true);
    return true;
} 
```

此外，在 Android 3.0 及更高版本上，您必须在要更新菜单时调用 invalidateOptionsMenu()，因为菜单始终处于打开状态。然后系统将调用 onPrepareOptionsMenu() 以便您可以更新菜单项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:38:54.063

您应该编写代码以启用/禁用[onPrepareOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)中的选项菜单，如此处明确提到[的](http://developer.android.com/guide/topics/ui/menus.html#ChangingTheMenu)。

```
@Override
    public boolean onPrepareOptionsMenu(Menu menu)
    {
        super.onPrepareOptionsMenu(menu);
        if (yourConditionIsSatisfied)
        {
            menu.getItem(1).setEnabled(true);
        } else
        {
            menu.getItem(1).setEnabled(false);
        }
        return true;
    } 
```

在预蜂窝中，您只需要更改`yourConditionIsSatisfied`as的值即可`true/false`。您不必担心它是否会被触发，因为当您单击选项按钮时总是会触发`onPrepareOptionsMenu()`它**。**但如果是更高版本的操作系统，您需要调用[invalidateOptionsMenu()](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)。`invalidateOptionsMenu()`将反过来触发`onPrepareOptionsMenu()`. 根据您给出的代码，您应该编写以下代码

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode == Activity.RESULT_OK)
        {

            if (requestCode == 1)
            {
                // Get value from intent
                String imageId = data.getExtras().getString("imageId");
                // Show full screen image
                Bitmap bitmap = BitmapFactory.decodeFile(imageId);
                imageView.setImageBitmap(bitmap);
                // Add new menu item for context menu of the imageview
                // Write
            } else if (requestCode == 2)
            {
                String contact1 = data.getExtras().getString("contactName");
                String contact2 = data.getExtras().getString("test");
                Toast.makeText(Activity_1.this, "" + "Value from activity 3: " + contact1 + " " + contact2, Toast.LENGTH_SHORT).show();
                conditionSatisfied = true;
                invalidateOptionsMenu();
            }
        }
    }

@Override
    public boolean onPrepareOptionsMenu(Menu menu)
    {
        super.onPrepareOptionsMenu(menu);
        if (conditionSatisfied)
        {
            menu.getItem(1).setEnabled(true);
        } else
        {
            menu.getItem(1).setEnabled(false);
        }
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T13:26:17.463

您可以在此处查看[链接](http://phpidiots.in/uncategorized/changing-menu-items-at-runtime/)以获取正确的信息。基本上是代码片段

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {

    MenuItem item = menu.findItem(R.id.menu_my_item);

    if (myItemShouldBeEnabled) {
        item.setEnabled(true);
        item.getIcon().setAlpha(255);
    } else {
        // disabled
        item.setEnabled(false);
        item.getIcon().setAlpha(130);
    }
} 
```

使图标有点时尚。

享受你的代码:)

# jquery - 如何将对象转换为字符串？

> ID：15086843
> 
> 赞同：0
> 
> 时间：2013-02-26T10:35:33.997
> 
> 标签：jquery, json

我正在使用 jQuery，控制台返回我：

```
Data Loaded: [object Object] 
```

**jQuery**：_

```
$(document).ready(function(){
    //Button click event

    $("#ajaxForm").submit(function(e){
        // disable the form submit
        e.preventDefault();
    });
    /* get some values from elements on the page: */
    var $form = $( this ),
    term = $form.find( 'input[name="id"]' ).val(),
    url = $form.attr( 'update' );

    /* Send the data using ajax */
    var posting =
        $.ajax({
            url: url
        });

    $.post(url, { id: term } ).done(function(data) {
        console.log("Data Loaded: " + data);
        $("#result").empty().append(data);      
    });
}); 
```

我如何将“json”的结果转换为“字符串”。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:36:43.847

试试这个

```
JSON.stringify(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:49:06.730

要将 JSON 对象转换为字符串，请使用以下代码。

```
JSON.stringify(data); 
```

“数据”是您的 JSON 对象。

要将字符串转换回 JSON 对象，请使用以下代码。

```
JSON.parse(String); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:44:46.693

```
$.post(url, returnFunction(data){...}, 'text'); 
```

将确保它`data`是文本格式，但如果您改为执行以下操作：

```
$.post(url, returnFunction(data){...}, 'json'); 
```

然后 jQuery 会自动确保`data`是一个 JSON 对象。

请注意，jQuery 将尝试智能地猜测数据是什么并传回正确的对象，放置“text”或“json”只是为了明确这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T11:26:51.200

返回 json 不正确。通过单击“提交”表单并希望返回一个 JSON。表格被退回。

脚本正确吗？

```
$("#ajaxForm").submit(function(e){
    // disable the form submit
    e.preventDefault();
}); 
```

在这种情况下，事件不起作用，但提交按钮不起作用。

**form.html**。_

```
< form action = "update" method = "post" id = "ajaxForm" >
        < fieldset class = "success" >
        < legend > The fields marked with * . < /legend>
        < div >
        < label for = "destination" class = "block" >
        host:
        < span class = "mandatory_asterisk" > * < /span>
        < /label>
        < select id = "destination" class = "select" name = "destination" >
        < option value = "element1" > element1 < /option>
        < option value = "element2" > element2 < /option>
        < /select>
        < /div>
        < div >
        < span class = "infoTrigger" > Update a page of the search < /span>
        < label for = "id" class = "block" >
        page
you want to index:
        < /label>
        < input type = "text" class = "text" id = "page" name = "page"
        value = "" / >
        < /div>
        < div >
        < span class = "infoTrigger" > Update a certain id of the host < /span>
        < label for = "id" class = "block" >
        id
on the host (e.g. element1 - id - post - json):
        < /label>
        < input type = "text" class = "text" id = "id" name = "id"
        value = "" / >
        < /div>
        < !-- < input id = "operation" type = "submit" / > -- >
        < input type = "submit" value = "update" name = "update" id = "operation" / >
        < /fieldset>
        < div id = "anotherSection" >
        < fieldset >
        < legend > Response from jQuery Ajax Request < /legend>
        < div id = "result" > < /div>
        < /fieldset>
        < /div>
        < /form> 
```

# pyqt4 - QListWidget 取消选择和多选

> ID：15086845
> 
> 赞同：1
> 
> 时间：2013-02-26T10:35:41.850
> 
> 标签：pyqt4, qlistwidget

我只是在文档中搜索，找不到以下两个问题的解决方案`QListWidget`：

a）我想从软件中取消选择（停用） QListWidget 中的项目（我的意思是代码）

b）我使用多项选择：`setSelectionMode(QAbstractItemView.MultiSelection)` 我想从代码中预先选择多个项目。如果我使用 `setCurrentRow()`我只能选择项目（它切换所选项目）。如何进行多项选择？

非常欢迎您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T06:31:10.860

这两者都可以用 s 的[`setSelected`](http://qt-project.org/doc/qt-4.8/qlistwidgetitem.html#setSelected)方法来完成`QListWidgetItem`。

```
# select item
listWidget.item(row).setSelected(True)

# deselect item
listWidget.item(row).setSelected(False) 
```

您可以对多个项目执行此操作，只要您`MultipleSelection`启用，它就会选择/取消选择这些项目。

# grails - Grails oauth 不起作用

> ID：15086848
> 
> 赞同：0
> 
> 时间：2013-02-26T10:35:50.813
> 
> 标签：grails, oauth, grails-plugin

我对 Grails 很陌生，我正在尝试 Oauth 插件。

我在这里配置了我的插件：

```
oauth {
        providers {
            twitter {
                api = TwitterApi
                key = 'xxxxx'
                secret = 'xxxxx'
            }
        }
        debug = true
} 
```

并将链接添加到我的 gps 文件中，如下所示：

```
<oauth:connect provider="twitter">Connect to Twitter</oauth:connect> 
```

但是当我运行我的应用程序并单击`Connect to Twitter`我被带到的链接时：

`http://localhost:8080/oauth/twitter/authenticate`

为什么会这样。这看起来很有线。与其把我带到 twitter 页面登录，不如把我带到这里。

我在哪里犯了错误？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T13:43:11.417

Twitter 需要传递一个回调 URL。请在您的 oauth 提供程序中传递一个附加属性，如下所示：

```
oauth {
        providers {
            twitter {
                api = TwitterApi
                key = 'xxxxx'
                secret = 'xxxxx'
                callback = 'http://<your-web-site>/<application-namespace>/<controller>/<action>'
            }
        }
        debug = true
} 
```

如果您在开发机器上工作，请将网站添加到您的主机文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T07:52:56.003

这是[使用 Grails Oauth 插件与 twitter 集成](http://www.jellyfishtechnologies.com/grails-2-2-0-integration-with-twitter-using-grails-oauth-plugin/)的链接。希望它会帮助你。享受。

# ios - 如何在 iOS 编程中使用 Keychain

> ID：15086850
> 
> 赞同：5
> 
> 时间：2013-02-26T10:35:52.920
> 
> 标签：ios, objective-c, iphone, keychain

我正在使用 Apple 提供的 Keychain 包装类。在我的应用程序中，我想存储和检索登录用户的用户名和密码。当应用程序再次启动时，它应该检查钥匙串中的登录凭据并让用户进入应用程序（自动登录）。尝试了一些示例代码。什么都没解决。请帮助我完成此操作。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T11:17:47.327

使用[PDKeyChainBindings](https://github.com/carlbrown/PDKeychainBindingsController)

这是如何使用：

```
PDKeychainBindings *bindings = [PDKeychainBindings sharedKeychainBindings];
[bindings setObject:@"myuser" forKey:@"username"];
[bindings setObject:@"kmypass" forKey:@"password"];

//How to retrieve
NSString *username = [bindings objectForKey:@"username"];
NSString *password = [bindings objectForKey:@"password"]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T11:17:53.803

您可以使用钥匙串访问更安全地保存您的凭证信息。为此，请遵循以下指南和示例。

1)[**`Keychain Services Programming Guide`**](https://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/01introduction/introduction.html#//apple_ref/doc/uid/TP30000897)

**你在苹果的这份文件中找到了所有你想要的东西。**

2)[**`GenericKeychain`**](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797)

**苹果的这个示例代码展示了如何添加、删除和更新钥匙串值。**

如果您对此有任何问题，请告诉我。希望这篇对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:40:01.727

```
#import "SFHFKeychainUtils.h"
#define KEYCHAIN_SERVICE_KEY   @"MyKey"
#define KEYCHAIN_ID @"agsfs46edt3g3jd38jh3g3g3g3g38f3dkiuytr453"
#define KEYCHAIN_PSD @"a1s2s3d4edt3g3jd38jh3g3g3g3g38f3dfgffgdd" 
```

//去检查

```
NSError *error = nil;
    NSString *password = [SFHFKeychainUtils getPasswordForUsername:KEYCHAIN_ID andServiceName:KEYCHAIN_SERVICE_KEY error:&error];

    if ([password isEqualToString:KEYCHAIN_PSD])
        return YES; 
```

//保存

```
NSError *error = nil;
        [SFHFKeychainUtils storeUsername:KEYCHAIN_ID  andPassword:KEYCHAIN_PSD forServiceName:KEYCHAIN_SERVICE_KEY updateExisting:YES error:&error]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:53:49.983

看看[ACSimpleKeychain](https://github.com/alexchugunov/ACSimpleKeychain)。它提供了钥匙串的简单抽象，让您可以轻松安全地保存密码。

例如，保存用户名和密码：

```
if ([keychain storeUsername:@"user1" password:@"password" identifier:@"account1" forService:@"twitter"])
{
    NSLog(@"SAVED credentials for username 'user1' credentials identifier 'account1'");
} 
```

找回密码：

```
NSDictionary *credentials = [keychain credentialsForUsername:@"user1" service:@"twitter"];
NSLog(@"CREDENTIALS: service: %@, identifier: %@, username: %@, password: %@",
    [credentials valueForKey:ACKeychainService],
    [credentials valueForKey:ACKeychainIdentifier],
    [credentials valueForKey:ACKeychainUsername],
    [credentials valueForKey:ACKeychainPassword]); 
```

# php - 将复选框值存储到数据库中

> ID：15086853
> 
> 赞同：2
> 
> 时间：2013-02-26T10:35:55.543
> 
> 标签：php, codeigniter

我正在尝试使用 codeigniter 编写一个简单的调查应用程序我对每个答案都有一个复选框，并且我想将每个答案存储到数据库中的表中我想问的是如何将所有这些信息存储到表我是编码世界的新手，一个简单的解决方案就可以了。现在我所拥有的只是这里设置的视图：

```
<html>
 <body>

<?php form_open('survay'); ?>  
<?php foreach($survay_data as $survay):?> 
<ul>
    <li><h1><?php echo $survay->Question; ?></h1></li> 
    <li><?php echo $survay->qA; ?><input type="checkbox"  name = "q1" value = "qA"></li>
    <li><?php echo $survay->qB; ?><input type="checkbox"  name = "q2" value = "qB"></li>
    <li><?php echo $survay->qC; ?><input type="checkbox"  name = "q3" value = "qC"></li>
<?php endforeach; ?>
<input type="textarea" value='a' name="comment">
<br>
<input type="submit" value="Submit">
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:58:52.010

它在这里找到答案：[https ://stackoverflow.com/a/15086172/827224](https://stackoverflow.com/a/15086172/827224)

**这应该做你想要的。根据我们在 Stackover 上的聊天，我们已经为您提供了答案。您的问题不像您在聊天中提出的要求那么清楚。在下面找到可以解决您的问题的代码**

# CODEIGNITER的基本使用：

我提供这些代码只是为了减少我们的评论数量。可以肯定的是，您对 Codeigniter 还是很陌生。我只能尽我所能提供帮助。

**第 1 步：数据库**

> 创建数据库表“tblquestions”。字段应为 QID、qA、qB 和 qC。如果你有那么多，用最多 43 条记录填充字段。尽可能少的 5 条记录。

**第 2 步：模型**

```
<?php

class Survay extends CI_Model {

    function dosurvay($question_id = null) {

        $this->db->select('QID, Question, qA, qB, qC');
        $this->db->from('tblquestions');
        if ($question_id) {
            $this->db->where('QID', $question_id);
        }
        $this->db->limit(1);
        $query = $this->db->get();

        if ($query->num_rows() == 1) {
            return $query->result();
        } else {
            return false;
        }
    }

 function addsurvay($arrData) {

    $this->db->insert('tblanswers', $arrData);

    if ($this->db->affected_rows() > 0) {
        return $this->db->insert_id();
    } else {
        return false;
    }
}

}
?> 
```

**第 3 步：控制器**

```
<?php

class Survaycontroller extends CI_Controller {

    // 'QID, Question, qA, qB, qC'
    function __construct() {
        parent::__construct();
        $this->load->model('survay');
    }

    function index() {
        //This should select the survey question
        $data = array();
        $question_id = $this->uri->segment(3);
        $data[survay_data] = $this->survay->dosurvay($question_id);
        $this->load->view('survay_view', $data);
    }

    function addanswer() {
        //The answer is submitted to this...
        $arrData = array();
        $userid = null;
        if ($this->session->userdata("userid")) {
            $userid = $this->session->userdata("userid");
        }
        if ($this->input->post()) {
            $arrData["answerid"] = $this->input->post("QID");
            $arrData["questionid"] = $this->input->post("qA");
            if ($this->input->post("qA")) {
                $arrData["answerA"] = $this->input->post("qA");
            }
            if ($this->input->post("qB")) {
                $arrData["answerB"] = $this->input->post("qB");
            }
            if ($this->input->post("qC")) {
                $arrData["answerC"] = $this->input->post("qC");
            }
            $arrData["userid"] = $userid;
        }
        $viewData[survay_data_id] = $this->survay->addsurvay($arrData); //Get the ID of the answer stored
        $this->load->view('survay_view', $viewData);
    }

}
?> 
```

**第 4 步：视图**

```
<?php if(isset($survay_data)) : ?>
<form action="http://localhost/Surva/index.php/survaycontroller/addanswer/" name="myform" id="myform" method="post">
   <?php foreach ($survay_data as $survay): ?> 
        <ul>
            <li><h1><?php echo $survay->Question; ?></h1></li> 
            <li><?php echo $survay->qA; ?><input type="checkbox" name="qA" value="<?php echo $survay->qA; ?>"></li>
            <li><?php echo $survay->qB; ?><input type="checkbox" name="qB" value="<?php echo $survay->qA; ?>"></li>
            <li><?php echo $survay->qC; ?><input type="checkbox" name="qC" value="<?php echo $survay->qA; ?>"></li>
            <li><input type="hidden" name="QID" value="<?php echo $survay->QID; ?>"></li>
            <li><input type="submit" name="btn" value="Answer"></li>
        </ul>
    <?php endforeach; ?>
</form>
<?php endif; ?> 
```

测试它：

```
http://localhost/Surva/index.php/survaycontroller/index/2 
```

检索问题编号 2

现在这肯定会奏效。替换你已经拥有的一切。让我知道这些新代码集是否更有效地替换了我上面的代码集。

# sql - 总计多个 Datediff 列

> ID：15086854
> 
> 赞同：1
> 
> 时间：2013-02-26T10:35:59.880
> 
> 标签：sql, tsql

希望您能提供帮助，我需要总计 TotalCapacity 列，以便根据 Where 语句给我一年的总计。我还需要看到彼此相邻的不同年份。谢谢

```
SELECT
    Capacity.StartDate,
    Capacity.EndDate,
    DATEDIFF(d, Capacity.StartDate, Capacity.EndDate) + 1 AS DaysOpen,
    Capacity.Capacity,
    (DATEDIFF(d, Capacity.StartDate, Capacity.EndDate) + 1) * Capacity.Capacity AS TotalCapacity,
FROM
    Capacity
WHERE 
    Capacity.StartDate >= '01 Jan 2010' 
    AND Capacity.EndDate <= '31 Dec 2010' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:00:43.777

猜猜你需要一些这样的：

```
SELECT SUM(TotalCapacity)
    FROM
    (
        SELECT
          Capacity.StartDate
          ,Capacity.EndDate
          ,DATEDIFF(d, Capacity.StartDate, Capacity.EndDate) + 1 AS DaysOpen
          ,Capacity.Capacity
          ,(DATEDIFF(d, Capacity.StartDate, Capacity.EndDate) + 1) * Capacity.Capacity AS TotalCapacity
        FROM
          Capacity
          WHERE Capacity.StartDate >= '01 Jan 2010' AND Capacity.EndDate <= '31 Dec 2010'
    ) t 
```

# android - 7天后自动卸载Android App

> ID：15086859
> 
> 赞同：1
> 
> 时间：2013-02-26T10:36:10.880
> 
> 标签：android, uninstallation, days

我只想在特定时间后卸载我的应用程序。这是为了使应用程序在特定时间范围内可用。

我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T10:38:43.370

这是不可能的，我引用：

> 未经用户确认卸载第三方应用程序是不允许的。
> 
> 正如 xDragonZ 所指出的那样，根进程可以通过删除目录并让包管理器来处理丢失来粗略地做到这一点，但这不是一个可广泛部署的解决方案，因为 AFAIK 没有任何设备具有该功能以供应用程序运行它们自己的根助手进程 - 这是一个有风险的售后修改。

引用自 SO 以编程方式[删除我的应用程序](https://stackoverflow.com/a/10483669/488434)

进一步阅读以[编程方式安装/卸载 APK（PackageManager vs Intents）](https://stackoverflow.com/questions/10483493/delete-my-application-programmatically-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:47:48.570

一些系统，如 Apphance 使用简单的服务以某种方式限制应用程序。安装了 Apphance 的应用程序会尝试连接到 Apphance 服务器以检查是否允许运行特定的应用程序。如果没有，用户会收到通知，并在 Apphance 关闭应用程序后不久。没有连接就无法启动应用程序。

我建议存储第一次启动的时间戳，然后通过比较两个日期来限制应用程序，并在试用结束时终止应用程序。使用某种服务器是最安全的解决方案。

# c# - c# 知道我们使用哪个 IP 与另一个 IP 通信吗？

> ID：15086863
> 
> 赞同：4
> 
> 时间：2013-02-26T10:36:23.480
> 
> 标签：c#, .net, network-programming

使用自制的发现工具，我发现了我感兴趣的服务列表。

我有他们的 IP、服务名称、端口、主机……但要使用它们，我必须向客户端库指定我们将使用的 IP。

由于我有几个网卡，我需要检测哪个接口用于与我知道的目标 IP 进行通信，然后将其提供`IPAddress`给我的库。

但是我怎么能检测到我应该使用哪个接口 IP 呢？

我试图在互联网上进行一些搜索，但我认为我没有正确的关键字，因为我没有找到任何相关的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T10:50:29.777

我已经从我开发的网络库[networkComms.net](http://www.networkcomms.net)中为您提取了相关方法：

```
/// <summary>
/// Determines the most appropriate local end point to contact the provided remote end point. 
/// Testing shows this method takes on average 1.6ms to return.
/// </summary>
/// <param name="remoteIPEndPoint">The remote end point</param>
/// <returns>The selected local end point</returns>
public static IPEndPoint BestLocalEndPoint(IPEndPoint remoteIPEndPoint)
{    
    Socket testSocket = new Socket(remoteIPEndPoint.AddressFamily, SocketType.Dgram, ProtocolType.Udp);
    testSocket.Connect(remoteIPEndPoint);
    return (IPEndPoint)testSocket.LocalEndPoint;
} 
```

一旦您拥有正确的 IP，您就可以遍历`NetworkInterface.GetAllNetworkInterfaces()`以找到匹配的适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T15:00:42.397

以下通过查询路由表来工作。这与`Socket.Connect`确定要使用的本地端点的方式相同。差异：

*   由于防火墙而不能失败
*   由于不存在远程端点而不能失败
*   不保留本地端口
*   快点

.

```
private static IPEndPoint QueryRoutingInterface(
          Socket socket,
          IPEndPoint remoteEndPoint)
{
    SocketAddress address = remoteEndPoint.Serialize();

    byte[] remoteAddrBytes = new byte[address.Size];
    for (int i = 0; i < address.Size; i++) {
        remoteAddrBytes[i] = address[i];
    }

    byte[] outBytes = new byte[remoteAddrBytes.Length];
    socket.IOControl(
                IOControlCode.RoutingInterfaceQuery, 
                remoteAddrBytes, 
                outBytes);
    for (int i = 0; i < address.Size; i++) {
        address[i] = outBytes[i];
    }

    EndPoint ep = remoteEndPoint.Create(address);
    return (IPEndPoint)ep;
} 
```

使用如下：

```
IPAddress remoteIp = IPAddress.Parse("192.168.1.55");
IpEndPoint remoteEndPoint = new IPEndPoint(remoteIp, 0);
Socket socket = new Socket(
                      AddressFamily.InterNetwork, 
                      SocketType.Dgram, 
                      ProtocolType.Udp);
IPEndPoint localEndPoint = QueryRoutingInterface(socket, remoteEndPoint );
Console.WriteLine("Local EndPoint is: {0}", localEndPoint); 
```

[（从这里](https://searchcode.com/codesearch/view/7464800/)复制的源代码）

请注意，尽管指定了一个`IpEndPoint`带有端口的端口，但端口是无关紧要的。此外，返回`IpEndPoint.Port`的始终是`0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T08:16:16.660

我花了几个小时来找到这个问题的简短答案，并且感谢 BatteryBackupUnit，我已经制作了这个解决方案，并希望它可以帮助其他程序员：

```
 [DllImport("ws2_32.dll", SetLastError = true)]
    private static extern SocketError WSAIoctl([In] IntPtr socketHandle, uint ioControlCode, [In] byte[] inBuffer, int inBufferSize, [Out] byte[] outBuffer, int outBufferSize, out int bytesTransferred, IntPtr overlapped, IntPtr completionRoutine);

    /// <summary>Get local IP-address for remote address</summary>
    /// <param name="remoteAddress">Remote Address</param>
    /// <returns></returns>
    public static IPAddress GetLocalAddressForRemote(IPAddress remoteAddress)
    {
        if (remoteAddress == null) return null;

        long rm = remoteAddress.Address;
        //Temporary socket only for handle of it
        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        byte[] src = new byte[16];

        src[0] = 2;
        src[4] = (byte)rm;
        src[5] = (byte)(rm >> 8);
        src[6] = (byte)(rm >> 16);
        src[7] = (byte)(rm >> 24);

        int transeferred = 0;
        if (WSAIoctl(s.Handle, 3355443220, src, 16, src, 16, out transeferred, IntPtr.Zero, IntPtr.Zero) == SocketError.Success)
        {
            s.Dispose();
            rm = src[4];
            rm |= ((long)src[5]) << 8;
            rm |= ((long)src[6]) << 16;
            rm |= ((long)src[7]) << 24;
            return new IPAddress(rm);
        }
        s.Dispose();
        return null;
    } 
```

# regex - PHP正则表达式使用可选的包围引号分割csv字符串

> ID：15086865
> 
> 赞同：0
> 
> 时间：2013-02-26T10:36:32.263
> 
> 标签：regex, preg-split

给定的是一个 csv 字符串，其中包含**未知数量**的文本块，用分号 (;) 分隔。

有时，但并非总是，文本块用引号 (") 括起来。如果是，则分号可能会出现在文本块中。

我正在寻找一个正则表达式来从字符串中提取文本块，使用 preg_match_all 或 preg_split。

我可以处理基本的正则表达式，但是当涉及到前瞻/后瞻时，它简直超出了我的范围。特别是如何防止被引号包围的分号是一个问题，我根本不知道如何放入正则表达式。

我使用的编程语言是php。

非常感谢每一个帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:38:45.250

你应该试试这个功能[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

# .net - 如何在 .net 中与查询中未命名的列区分开来？

> ID：15086868
> 
> 赞同：1
> 
> 时间：2013-02-26T10:36:41.567
> 
> 标签：.net, sql-server

当我运行以下查询时（从 c# 代码到 sql server 连接）：

```
select GetDate() Named, GetDate() Column2, Getdate(), getdate(), getdate() Named 
```

生成的 DataTable 具有以下列：Named, Column2, Column1, Column3, Named1 有没有办法从.NET 中知道查询中未命名的 Column1 和 Column3？

在管理工作室中运行相同的查询显示来自选择的确切名称：未命名列 for Column1 & Column3 和 Named 而不是 Named1

注意：只是为了说明这一点 - SQL 查询不是问题 - 问题是如何获取服务器返回的正确模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:18:52.580

我建议使用 AS 关键字为每一列添加别名，这样从 DataTable 访问数据就没有问题了。

# javascript - Jquery Rollover 淡入淡出

> ID：15086870
> 
> 赞同：0
> 
> 时间：2013-02-26T10:36:42.600
> 
> 标签：javascript, jquery, fadein, fadeout, rollover-effect

我想知道是否有人可以帮助我使用此代码？我想添加一个带有淡入/淡出的不透明过渡。我已经单独尝试了，但我是 jQuery 的初学者，所以我没有成功:(

非常感谢 ！

**编码**

**jQuery**

```
<script type="text/javascript">
    $(document).ready(function () {
        $('img.article01').hover(function () {
            this.src = 'imgColor.jpg';
        }, function () {
            this.src = 'imgGray.jpg';
        });
    });    
</script> 
```

**CSS**

```
img {
    max-width: 100%; /*very important*/
}

.figure {
    width: 100%;
}

.thumbTitle {
    position: absolute;
    font-size: 1em;
    padding-left: 25px;
    color: #fff;
} 
```

**html**

```
<article class="padding">

    <h2 class="thumbTitle">Project 01</h2>

    <div class="figure">
        <a href="projet01.html" class="thumb">
            <img src="imgGray.jpg" class="article01" />
        </a> 
    </div>

</article> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:05:07.623

HTML：

```
<div id="mainDiv">Hover here
    <div id="div1" style="width:80px;height:80px;display:none;background-color:red;"></div>
</div> 
```

脚本：

```
$(document).ready(function(){
  $("#mainDiv").hover(function(){
    if($("#div1").css("display") == "none"){
       $("#div1").fadeIn(2000);
    }else{
       $("#div1").fadeOut(2000);
    }
  });
}); 
```

这将切换`fadeIn`和`fadeOut`效果。希望这可以帮助。在这里工作[小提琴](http://jsfiddle.net/rajaasthana/uDfdQ/)

# java - 如何在 JBoss Server 中部署的 Spring 应用程序中创建 oracle 连接？（WrappedConnectionJDK6 不能强制转换为 oracle.jdbc.OracleConnection）

> ID：15086875
> 
> 赞同：0
> 
> 时间：2013-02-26T10:36:52.160
> 
> 标签：java, spring, jdbc, jboss, jdbctemplate

我想创建oracle连接。目前我正在通过 jdbc 连接来创建结构描述符，在这里我得到如下异常。因此为避免这种情况，需要创建 java.sql.connection 或 oracle 连接，而不是从数据源获取。

**org.jboss.resource.adapter.jdbc.jdk6.WrappedConnectionJDK6 无法转换为 oracle.jdbc.OracleConnection**

```
java.lang.ClassCastException: org.jboss.resource.adapter.jdbc.jdk6.WrappedConnectionJDK6 cannot be cast to oracle.jdbc.OracleConnection
        at oracle.sql.StructDescriptor.createDescriptor(StructDescriptor.java:160)
        at oracle.sql.StructDescriptor.createDescriptor(StructDescriptor.java:131) 
```

下面是出现上述异常的一段代码。

```
Connection conn = getDataSource().getConnection();
StructDescriptor itemDescriptor = StructDescriptor.createDescriptor(("EMP_DATA", conn);
StructDescriptor addressDescriptor = StructDescriptor.createDescriptor("EMP_ADDRESS", conn);
ArrayDescriptor descriptor = ArrayDescriptor.createDescriptor("EMP_TABLE", conn);

/** Creating Objects */
Object[] itemAtributes = new Object[] {
        "XXX", "XXX", new STRUCT(addressDescriptor, conn, new Object[] {
                "XXX", "XXX", "XXX" }) };

STRUCT itemObject1 = new STRUCT(itemDescriptor, conn, itemAtributes);

itemAtributes = new Object[] {
        "YYY", "YYY", new STRUCT(addressDescriptor, conn, new Object[] {
                "YYY", "YYY", "YYY" }) };

STRUCT itemObject2 = new STRUCT(itemDescriptor, conn, itemAtributes);

STRUCT[] idsArray = {
        itemObject1, itemObject2 };

ARRAY array_to_pass = new ARRAY(descriptor, conn, idsArray);

/** Calling Procedure */
ps = (OraclePreparedStatement) conn.prepareStatement("begin Pr_save_emp(:x); end;"); 
```

在这方面的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:44:43.280

错误是因为您试图将 JBOSS 的 WrappedConnection 传递给 Oracle 的实用程序类。

根据此[https://community.jboss.org/wiki/SetUpAOracleDatasource](https://community.jboss.org/wiki/SetUpAOracleDatasource)您需要执行以下操作：

```
Connection dsConn = getDataSource().getConnection(); //JBoss wrapped connection
Connection conn = ((WrappedConnection)dsConn).getUnderlyingConnection(); //Oracle connection
//everything else remains the same
StructDescriptor itemDescriptor = StructDescriptor.createDescriptor(("EMP_DATA", conn);
//... 
```

# perl - 用于替换数据的 perl 脚本

> ID：15086878
> 
> 赞同：0
> 
> 时间：2013-02-26T10:36:57.760
> 
> 标签：perl, date, replace

我有下面的脚本。输入数据是日期。我需要做的是过滤掉不超过一周的日期并将其替换为“0”，并将两周的日期替换为“1”。其他日期应该被删除（我没有得到它）​​。这是脚本，但它似乎不起作用：

```
 use Date::Parse;
    use Date::Format;
    use Date::Manip;

    sub f {

    my $x = shift;
    my $env = shift;

    my $time = str2time($x);
    my $oneweekold = str2time(time2str('%Y-%m-%d 00:00:00', (time()-60*60*24*7)));
    my $twoweeksold = str2time(time2str('%Y-%m-%d 00:00:00', (time()-60*60*24*14)));

    return '0' if $time < $oneweekold;
    return '1' if $time < $twoweeksold;

    return $x;

    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:18:12.067

您要求一个返回三个值的 sub，其中一个值表示需要过滤，其中两个值是实际值。这是一团糟。

相反，让我们编写一个返回几周前的子程序。您可以对其进行过滤，并基于此设置输出格式。

```
use strict;
use warnings;
use feature qw( say );

use Date::Parse qw( str2time );
use DateTime    qw( );

# ...    
# -2 = 7..13 days from now.
# -1 = 0.. 6 days from now.
#  0 = 1.. 7 days ago.
#  1 = 8..14 days ago.
# ...
sub weeks_ago {
   my ($ref, $dt) = @_;
   if ($dt >= $ref) {
      return -int( ( $ref->delta_days($dt)->in_units('days') + 7 ) / 7 );
   } else {
      return int( ( $ref->delta_days($dt)->in_units('days') - 1 ) / 7 );
   }
}

my $ref = DateTime->today( time_zone => 'local' );

my $dt = DateTime->from_epoch( epoch => str2time('2013:03:27T08:08:17.1823213') );
my $weeks_ago = weeks_ago($ref, $dt);
if (0 <= $weeks_ago && $weeks_ago <= 1) {   # Filtering
   say $weeks_ago;                          # Formatting (Actually, none needed)
} 
```

# ruby-on-rails - 为单线程 Rails 应用正确设置数据库连接池 database.yml

> ID：15086880
> 
> 赞同：34
> 
> 时间：2013-02-26T10:37:05.437
> 
> 标签：ruby-on-rails, database, postgresql, activerecord

我想知道 Rails database.yml 中的以下设置：

默认情况下，ActiveRecord 的连接池的数据库连接数设置为 5：

```
development:
  ...
  pool: 5 
```

但默认情况下，Rails 3 是单线程的。为什么默认需要 5 个连接？

据我了解，单线程 Rails 应用程序不能一次触发多个数据库操作，为什么需要保持更多连接打开？

我会假设 2 个连接是有意义的，所以即使另一个超时，你也总是有一个活动连接，但保持五个连接对我来说似乎有点奇怪。

我错过了什么吗？

更新如果其他人很好奇，我刚刚找到了一个解释它的提交： [https ://github.com/rails/rails/commit/b700153507b7d539a57a6e3bcf03c84776795051](https://github.com/rails/rails/commit/b700153507b7d539a57a6e3bcf03c84776795051)

事实上，这些默认设置没有任何意义，它已被修复，但由于测试套件而暂时恢复（一年前）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-14T05:44:09.607

在这里聚会已经很晚了，但是我今天在生产中用完了数据库连接。

像很多人一样，我使用 Sidekiq 来执行异步工作，例如发送电子邮件。重要的是要注意 Sidekiq 作为多线程进程运行。

所以，我不**只是**有一个单线程 Rails 应用程序，因此这个答案并不直接适用于所提出的问题，但我认为值得在这里说些什么，因为我认为现在多线程 Rails 应用程序相对正常。

这意味着您需要调整池大小，以便创建足够的连接来处理所有可以排队并花费超过 5 秒的作业（在引发错误之前等待数据库连接的默认超时时间）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T09:51:35.457

## 管理连接

对于像 Mongrel/Passenger/etc 这样的单线程服务器，连接池的主要好处是连接是在 Rails 请求处理之外的 Rack 处理程序中建立/维护的。这允许建立一次连接而不是多次建立连接，因为它以不同的方式使用。目标是重用已建立的连接并最小化连接数。这应该防止必须在给定的请求处理周期内重新连接，甚至可能在请求之间重新连接（如果我没记错的话）。

## 多个并发连接

尽管大多数用例（Mongrel/Passenger）都是单线程的，并且一次只能使用一个连接——但 JRuby 和环境/应用程序服务器具有完整的多线程支持。Rails 从 2.2 开始就是线程安全的

*   连接池在 ActiveRecord 内部处理，因此所有应用程序服务器的行为应该基本相同。

*   数据库连接池一开始是空的，并根据需要随着时间的推移创建连接。此池的最大大小默认为 5，并在 database.yml 中进行配置。

*   请求和用户共享来自该池的连接。请求在第一次需要访问数据库时检查连接，然后在请求结束时重新检查连接。

*   如果你使用 Rails.threadsafe！模式，那么多个线程可能同时访问多个连接，因此根据请求负载，您可能有多个线程竞争几个连接。

**如果您使用的是单线程应用程序，您可以相应地进行更改。根据大多数用户的需要，默认值为 5，因为现在一天拥有一个多线程应用程序是正常的。**

# r - 如何在不改变环境的情况下访问 R 中的数据

> ID：15086884
> 
> 赞同：4
> 
> 时间：2013-02-26T10:37:21.290
> 
> 标签：r, dataframe

当我打开一个包时，比如说，我的环境中定义了`ggplot2`数据集。`diamonds`

有没有办法在不改变我的环境的情况下访问 diamonds 数据**集**？喜欢

```
a <- ggplot2.data("diamonds") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T10:38:06.547

你的意思是：

```
ggplot2::diamonds 
```

有关`?"::"`更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T10:42:48.907

使用`data`并指定`package`：

```
data(diamonds,package="ggplot2")
head(diamonds)
  carat       cut color clarity depth table price    x    y    z
1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
5  0.31      Good     J     SI2  63.3    58   335 4.34 4.35 2.75
6  0.24 Very Good     J    VVS2  62.8    57   336 3.94 3.96 2.48

sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252 
[2] LC_CTYPE=English_United Kingdom.1252   
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

# dynamics-crm-2011 - Dynamics CRM 2011 - 获取 xml 总和返回 NULL 而不是 0

> ID：15086886
> 
> 赞同：2
> 
> 时间：2013-02-26T10:37:23.377
> 
> 标签：dynamics-crm-2011, fetchxml

我有一个 fetchXMl，它执行一个简单的“求和”查询。

```
<fetch distinct='true' mapping='logical' aggregate='true'> 
  <entity name='orb_timesheetentry'> 
    <attribute name='orb_cost' alias='cost_sum' aggregate='sum'/> 
    <filter type='and'>
      <condition attribute='orb_prepaidpack' operator='eq'  value='{0}' />
      <condition attribute='statuscode' operator='eq' value='169810003' />
    </filter>
  </entity> 
</fetch> 
```

问题是如果它没有找到任何记录，它会返回*null*而不是 0。

有没有办法返回 0 而不是*null*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:14:53.703

如果它是从 C# 执行的：

```
return results ?? 0; 
```

如果它是从 JavaScript 执行的：

```
if(!results)
  return 0;
return results; 
```

# python - 在 Django 中，使用 admin.StackedInline 时，如何线程安全地将请求传递给表单的 __init__？

> ID：15086891
> 
> 赞同：1
> 
> 时间：2013-02-26T10:37:36.543
> 
> 标签：python, django, thread-safety, django-admin

我想在 StackedInline 的表单集中向我的表单传递一个请求。我现在有：

```
from django.contrib import admin
from django.utils.functional import curry

class AlbumInline(admin.StackedInline):
    form = AlbumAdminForm
    model = Album
    extra = 1

    def get_formset(self, request, obj=None, **kwargs):
        formset = super(AlbumInline, self).get_formset(request, obj, **kwargs)
        formset.form.__init__ = curry(formset.form.__init__, request=request)
        return formset 
```

这行得通，但是这个解决方案是线程安全的吗？如果不是，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:26:47.183

这似乎不是线程安全的。根据您希望从 HTTP 请求对象中使用的内容，您可以将其复制到新的 HttpRequest 并使其仅包含线程安全信息（即大多数信息减去请求线程锁）。

就我而言，我使用这样的东西：

```
METACOPY = ['HTTP_X_REAL_IP', 'HTTP_X_FORWARDED_FOR', 'REMOTE_ADDR', 'REMOTE_HOST', 'SERVER_NAME', 'SERVER_PORT', 'LANG', 'LANGUAGE', 'HTTP_REFERER']
def thread_safe_copy(self):
    meta = dict([(k,self.META[k]) for k in METACOPY if k in self.META and isinstance(self.META[k], str)])
    request = HttpRequest()
    request.POST = self.POST
    request.GET = self.GET
    request.user = self.user
    request.path = self.path
    request.META = meta
    ...
    return request 
```

在这里，我对 HttpResponse 和 WSGIResponse 进行了猴子修补，但您可以将 self 替换为请求实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:00:24.870

由于绑定请求的咖喱，我认为它不是线程安全的。

但由于它在管理员中，所以它可能无关紧要。

# jsp - 在 JSP 中声明并获取静态变量

> ID：15086894
> 
> 赞同：1
> 
> 时间：2013-02-26T10:37:43.790
> 
> 标签：jsp, el

除了声明静态变量之外，JSP 中还有什么方法可以声明`<%! int like=0;%>`？自定义标签中是否有任何标签可以在 JSP 页面上声明静态变量？

如果不是，并且如果我以这种方式声明我的静态整数变量'like' `<%! int like=0;%>`，有没有什么方法可以使用 EL 来获取这个变量值`${like}`？我想在我的`JQuery`函数中使用这个值，并且我知道我可以使用 获得这个值`<%=like>`，但我需要其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:42:33.280

[不是静态的，但您可以使用JSTL](https://stackoverflow.com/tags/jstl/info) 声明应用程序范围的变量[`<c:set>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/set.html)。

```
<c:set var="like" value="0" scope="application" /> 
```

您可以通过简单地让 JSP 将其打印为 JS 变量来在您的 JS/jQuery 代码中获取它。

```
<script>
    var like = ${like};
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:33:27.730

如果你想在服务器端声明一个可以在客户端（浏览器）上使用的变量，你可以在你的 web.xml 中声明一个 Servlet 上下文参数：

```
<web-app>
  <context-param>
    <param-name>yourParamName</param-name>
    <param-value>yourParamValue</param-value>
  </context-param>
  ...
</web-app> 
```

表达式语言有一个隐式对象`initParam`，您可以在其中访问 JSP 上的 Servlet 上下文参数：

```
${initParam.yourParamName} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-08T07:29:02.807

在 JSP 中使用`${staticVar.ClassName_staticPropertyName}` 在上下文初始化期间执行以下操作：

```
servletContext.setAttribute("staticVar", new AbstractMap&lt;String,Object>() {
    @Override
    public Set&lt;Map.Entry<String, Object>> entrySet() {
        throw new UnsupportedOperationException();
    }
    @Override
    public String get(Object key) {
        return methodToGetStaticVariableUsingReflection(key)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T11:22:56.087

使用 EL 访问静态变量是不可能的。如果您将静态变量声明为

```
<%!
        public static int a=343;        
       %> 
```

因此，您必须将变量声明为`<c:set var="a" value="${'hello'}" ></c:set>`使用*EL*，然后只有您才能使用*EL*`<c:out value="${a}"></c:out>`获得 value( ) 。

 *您需要将其声明为实例变量，因为仅存在一个 jsp 页面（servlet）副本，并且 _jspService 方法为每个请求调用，因此相同的实例变量可用于所有用户（_jspService 方法）。这意味着，不会为每个请求创建新的 servlet 实例。参考[jsp 生命周期](http://javapapers.com/jsp/jsp-life-cycle-explain/)。*

# javascript - 使用 Yelp 进行身份验证

> ID：15086899
> 
> 赞同：0
> 
> 时间：2013-02-26T10:37:57.743
> 
> 标签：javascript, oauth, yelp

我正在尝试构建一个允许用户注册业务的小型应用程序。为了避免创建虚假的业务配置文件，我想通过 YELP 进行注册（身份验证）。有什么办法可以用 yelp 实现这一点。我读到 Yelp API 使用 oAuth1.0a 来授权和识别 API 调用者而不是可能正在使用该应用程序的最终用户。感谢您的帮助，Bijesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:56:54.580

抱歉，这是不可能的。要注册企业，您必须手动进行，API 不允许您注册，只能进行搜索（关于企业或查找企业）。
为了验证企业身份，yelp 将自动呼叫您正在注册的企业，并告诉您一个代码，然后您将输入该代码并验证企业。有些网站会为你做这件事，他们要么手动完成，要么自己处理 yelp（我猜）。
我认为你能做到这一点的唯一方法是联系 yelp 并询问他们是否允许你这样做。

# python - python代码中的genfromtxt用于丢失列

> ID：15086906
> 
> 赞同：1
> 
> 时间：2013-02-26T10:38:11.973
> 
> 标签：python, numpy, python-2.7, statsmodels

输入 csv 文件：

```
a,b,c,d,e
1,2,3,4,2
3,4,5,6,3
3,4,5
1,2 
```

代码：

```
import numpy as np

data = np.genfromtxt("sa.csv", dtype=None, delimiter=',', names=True)
print data['a'],data['b'],data['e'] 
```

我会得到一个错误

```
Traceback (most recent call last):
  File "cs.py", line 3, in <module>
    data = np.genfromtxt("sa.csv", dtype=None, delimiter=',', names=True)
  File "/usr/lib/python2.7/dist-packages/numpy/lib/npyio.py", line 1593, in genfromtxt
    raise ValueError(errmsg)
ValueError: Some errors were detected !
    Line #4 (got 3 columns instead of 5)
    Line #5 (got 2 columns instead of 5) 
```

如何处理这个问题并使用python中的statsmodels根据所选列执行关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:23:42.517

既然你提到`statsmodels`我假设你已经`pandas`安装了它的依赖项。Pandas 将正确解析您的示例：

```
import pandas as pd
import numpy as np
dat = pd.read_csv('test.csv')
np.corrcoef(dat)

array([[ 1\.        ,  0.94174191,         nan,         nan],
       [ 0.94174191,  1\.        ,         nan,         nan],
       [        nan,         nan,         nan,         nan],
       [        nan,         nan,         nan,         nan]]) 
```

鉴于缺失值，这是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:40:07.780

您可以使其忽略列较少的行（[使用 genfromtxt 导入 numpy 中缺少值的 csv 数据](https://stackoverflow.com/questions/3761103/using-genfromtxt-to-import-csv-data-with-missing-values-in-numpy)），但不能使其将它们解析为不完整。如果你把分隔符放在适当的位置（即`1,2,,,`）它可以工作，但否则我认为`genfromtxt`它不够聪明，无法做你想做的事。

不过，您可以使用该`csv`模块轻松实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T14:08:30.000

就我而言，我的数据中有特殊字符 # 是什么导致了问题。例子：

```
a,b#,c,d,e
1,2,3,4,2 
```

解决方案：

更改评论字符，我将其更改为：@@@

```
dataset = genfromtxt(open(file,'r'), delimiter=',', dtype='f8',
comments='@@@@')[1:] 
```

# html - 如何通过响应式网页设计避免移动网页上的水平滚动？

> ID：15086908
> 
> 赞同：23
> 
> 时间：2013-02-26T10:38:22.953
> 
> 标签：html, css

我有一个适应性强的网络应用程序。为了避免水平滚动，我编写了以下 CSS 代码：

```
html {
    overflow-x: hidden; } 
```

这在台式机上运行良好，但在移动设备上却不行。如果我在移动设备上显示该应用程序，该应用程序会很好地适应。问题是当我从右到左滚动时。页面移动了一点。我希望页面不要水平移动。

编辑：

该页面不会在所有移动设备上滚动。我已经在具有相同版本 Android 的两台设备上尝试过它，它只能在其中一台设备上滚动。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-26T12:50:09.087

检查所有的填充物。如果您将填充添加到宽度设置为 100% 的内容，它将超出父项。

此处显示 [http://jsfiddle.net/wzZ3W/](http://jsfiddle.net/wzZ3W/)

代码

```
<div id="fillX">
    <div id="childXFill">
    </div>
</div>

#fillX
{
    background:red;
    width:100%;
    opacity:0.5;
}

#childXFill
{
    background:blue;
    width:100%;
    padding:10px;
    opacity:0.5;
} 
```

还要检查跨越页面的元素的负左右边距。例如[http://jsfiddle.net/s7zrukj2/2/](http://jsfiddle.net/s7zrukj2/2/)

另外，使用 CSS 重置。

* * *

如果你不想使用`overflow: hidden`，你也应该将它设置在 body 元素上。像这样

```
body, html { overflow-x:hidden; } 
```

尽管某些内容溢出的事实表明您的响应式设计存在错误，您应该尝试修复它以防止移动用户看不到某些内容。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-06-30T20:40:31.607

您可以将其放在控制台中以概述所有块/div。然后你可以找到你的容器之外的那个。

```
[].forEach.call($$("*"),function(a){a.style.outline="1px solid #"+(~~(Math.random()*(1<<24))).toString(16)}) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-06-13T01:54:43.693

如果不适用于移动设备，则应使用以下元标记：

```
<meta name="viewport" content="width=device-width, initial-scale = 1.0, 
maximum-scale=1.0, user-scalable=no" /> 
```

这会将宽度设置为设备宽度。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-26T10:59:25.790

您需要确保父容器的宽度不大于手机屏幕尺寸

所以最好的办法是对所有内容都使用 % 宽度，并确保没有固定的内容大于移动屏幕尺寸

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-01T11:21:15.150

如果你们中的任何人使用 Boostrap 并遇到这个问题，那么这就是答案。

### *对于*引导用户

`.row`用`.container`or包裹你，`.container-fluid`它会解决问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-26T17:30:15.137

在 html 标头上设置移动视口

```
<meta name="viewport" content="width=device-width, initial-scale = 1.0,maximum-scale=1.0, user-scalable=no" /> 
```

确保你的隐藏溢出

```
 body, html { overflow-x:hidden; } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-20T18:12:40.427

我只是想分享我是如何解决我的问题的。我尝试了所有方法，包括溢出-x、为所有元素添加红色边框等。仍然能够向右滚动。

首先，我首先删除“检查元素”中的容器，直到无法向右滚动。然后钻入问题所在的div。这是一个隐藏的下拉 div，位于“**可见：隐藏”和显示：块；**. 我通过输入**“display：none”**来解决这个问题，现在一切都很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-15T14:58:34.840

添加到 Dexter 的 Bootstrap 评论以及填充的最佳答案中，Bootstrap 用户还应该查看各种间距实用程序/类。

当前文档的链接如下，尽管您可能需要查看您的 Bootstrap 版本的相关文档。

任何带有 p- 或 px- 的东西都可能导致水平滚动问题，即使包含在 .row 中也是如此。

有时 pl- 或 pr- 可以解决创建水平滚动条的 px- 。或者 px-2 代替 px-5。

[这些类的命名格式为 {property}{sides}-{size} 用于 xs，{property}{sides}-{breakpoint}-{size} 用于 sm、md、lg 和 xl。](https://getbootstrap.com/docs/4.1/utilities/spacing/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-14T18:08:45.330

我真的是一个初学者，但我想分享我的经验，你可能会觉得它有帮助。所以我正在制作一个带有错误模板的网站，并注意到在响应式视图中它有一个空白区域，可以让你向右滚动，我认为它可以通过改变 body 或 html 宽度和溢出来修复。但实际上它是当你按下它的图标时弹出的菜单的容器。换句话说，它的过渡是“1s 宽度缓和”但是通过这样做，它在隐藏时在右侧保留了一些空白空间。所以我只是将转换切换从宽度更改为高度，尽管我真的不知道是否需要这样做，或者我应该用''来做显示''，然后它就消失了。希望这有帮助！

//例子//

```
.opened {
    display: block;
    height: 90%;
    transition: height 1s ease-in-out;
}

.closed {
    display: none;
    height: 0px;
    transition: height 1s ease-in-out;
} 
```

//而不是像以前那样的''width''。//

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-24T05:38:56.557

我的问题是，当我在移动设备上放大和缩小时，UI 不会完全缩小到最初的样子。我发现了这个[https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag#viewport_width_and_screen_width](https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag#viewport_width_and_screen_width)

```
<meta name="viewport" content="width=device-width, initial-scale=0.86, minimum-scale=0.86"> 
```

# javascript - 根据 JSON 数据使用 jQuery 定位元素

> ID：15086912
> 
> 赞同：1
> 
> 时间：2013-02-26T10:38:32.453
> 
> 标签：javascript, jquery, json

我有一个从异步 AJAX 调用中获得的动态生成的表单，并且我在 JSON 对象中提供了一些设置。我想用 jQuery 专门针对一个字段，所以我将 JSON 数据加载到一个 JS 变量以使用它：

```
var jsonData = {{response.write(session.j_jsondata, escape=False)}};
/*
I'm using Web2Py, so the part between the double curly braces is equal to:
{'fields': [{'required': 'true', 'type': 'mtext', 'name': 'desc'}]}
*/ 
```

数据被正确加载到变量中，但是当我想以 jsonData.fields[somenumber].name 的名称作为目标时，它不起作用..我试过这样：

```
jQuery("form [name="+jsonData['fields'][i]['name']+"]") 
```

我没有错误。任何想法为什么它不针对预期的元素？谢谢！

编辑：我试着改变一下结构。我没有使用名称，而是选择了 ID（我也更新了模板视图 ofc）并切换到

```
jQuery("#"+jsonData['fields'][i]['name']) 
```

但仍然没有雪茄。在 AJAX 调用之后生成该字段这一事实可能存在一些问题，但这很奇怪，因为脚本是在生成表单之后调用的。所以最后发生的事情是执行这个以表单元素为目标的脚本，但它不起作用。巫术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:44:40.130

也许是因为缺少属性选择器的引号。试试这个：

```
$('form [name="'+jsonData['fields'][i]['name']+'"]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:46:03.013

在本地网页上进行测试后，我注意到表单和左方括号之间不能有空格，因此您的选择器应为：

```
jQuery("form[name="+jsonData['fields'][i]['name']+"]") 
```

干杯，

特伦斯。

# regex - Grep 不匹配一个简单的模式

> ID：15086920
> 
> 赞同：0
> 
> 时间：2013-02-26T10:38:50.137
> 
> 标签：regex, grep

我对以下过于简单的 grep 命令摸不着头脑：

```
grep "GMT \+[0-9]{2}:[0-9]{2}" gmt_funny.txt 
```

其中`gmt_funny.txt`包含：

```
2012-09-01 00:00:16.825 (GMT +02:00) 
```

我刚刚发现 grep 命令与该行不匹配，除非我指定`-E`如下：

```
grep -E "GMT \+[0-9]{2}:[0-9]{2}" gmt_funny.txt 
```

这是否意味着 grep 不处理扩展的正则表达式？man grep 似乎表明`{`and`}`不受支持，应替换为`\{`and `\}`。这个对吗？

如果是，是否对 grep 的这种误导性特定行为有解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-20T15:05:03.043

默认情况下，`grep`使用[BRE 语法](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html#tag_09_03_07)，其中量词语法需要大括号上的`\{m,n\}`反斜杠。`\`因此，您的第一个命令可以更改为：

```
grep "GMT \+[0-9]\{2\}:[0-9]\{2\}" gmt_funny.txt 
```

要在 中使用[ERE 语法](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html#tag_09_04_08)，`grep`其中量词语法是熟悉的`{m,n}`，您需要在命令中指定[`-E`标志](https://linux.die.net/man/1/grep)，正如您在问题中发现的那样。

# hibernate - org.hibernate.MappingException 仅在尝试使用 Hibernate 控制台透视图时

> ID：15086921
> 
> 赞同：0
> 
> 时间：2013-02-26T10:38:51.110
> 
> 标签：hibernate, hibernate-annotations

我有三个运行良好的持久类。现在，我正在尝试使用 Hibernate Console 透视图来可视化它们之间的关系。所以我尝试使用 Hibernate 配置控制台进行配置，如此[处](https://access.redhat.com/knowledge/docs/en-US/JBoss_Developer_Studio/4.0/html-single/Hibernate_Tools_Reference_Guide/index.html#console_conf)所述。

但是，我收到此错误

```
org.hibernate.MappingException: An AnnotationConfiguration instance is required to use <mapping class="com.org.asterisk.dynamic.realtime.SipFriendsRow"/> 
```

请注意，我已经在使用以下代码

```
new AnnotationConfiguration()
        .configure()
        .buildSessionFactory(); 
```

它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:55:48.733

1.  下载 Hibernate 注释库

或者

在 Maven 的 pom.xml 中添加依赖

> ```
>  <dependency>
>     <groupId>hibernate-annotations</groupId>
>     <artifactId>hibernate-annotations</artifactId>
>     <version>3.3.0.GA</version>
> </dependency> 
> ```

您可能需要包含 JBoss 存储库才能下载 Hibernate 注释库。

> ```
> <repositories>
> <repository>
>   <id>JBoss repository</id>
>   <url>http://repository.jboss.com/maven2/</url>
> </repository> 
> ```

1.  使用 AnnotationConfiguration 构建会话工厂

正常的 Hibernate XML 文件映射使用 Configuration()

> 返回新的 Configuration().configure().buildSessionFactory();

对于 Hibernate 注释，您必须将其更改为“AnnotationConfiguration”</p>

```
return new AnnotationConfiguration().configure().buildSessionFactory(); 
```

# solrnet - 如何使用 solrnet 在索引时动态提升字段

> ID：15086923
> 
> 赞同：0
> 
> 时间：2013-02-26T10:38:54.600
> 
> 标签：solrnet

目前对于索引时间字段提升，我正在使用映射属性并提供如下所示的静态提升。

```
[SolrUniqueKey("StudentID")]
 public int JobseekerID { get; set; }
[SolrField("FName")]
 public string FName { get; set; }
[SolrField("LName")]
 public string LName { get; set; }
[SolrField("Subject"),Boost=50]
 public string Subject { get; set; }
[SolrField("SubjectRating")]
 public string SubjectRating { get; set; } 
```

有没有办法可以动态提升？

例如，我将根据 SubjectRating 计算提升并将该值应用于提升主题字段？

或者使用反射我必须改变属性值？

请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T14:58:44.427

看看 SolrNet 组的这个链接：

[https://groups.google.com/forum/#!topic/solrnet/u0W3-JxSH5I/discussion](https://groups.google.com/forum/#!topic/solrnet/u0W3-JxSH5I/discussion)

我将从那篇文章中建议尝试用您自己构建的 IsolrDocumentSerializer 替换默认的 IsolrDocumentSerializer。

有点难，但我能想到的其他选择并不多。

# forms - 访问表单值 - Cakephp

> ID：15086924
> 
> 赞同：0
> 
> 时间：2013-02-26T10:38:55.493
> 
> 标签：forms, cakephp

大家好，我在 cakephp 中有一个表单。单击提交后我必须访问用户输入的值。在下面的表单中，单击 sumbit 后，我​​将值存储在我的控制器部分中，我使用 echo $-POST['name'] 来显示用户输入的名称，但它没有得到显示。任何人都可以帮忙吗？注意：Cakephp-2.3

```
 <h1>Add Comment</h1>
       <?php
       $post_id= $posts['Post']['id']; 
        echo $this->Form->create('Comment',array('action' => 'comment','url' =>    
        array($post_id,$flag)));
        echo $this->Form->input('name');
       echo $this->Form->input('email');
       echo $this->Form->input('text', array('rows' => '3'));
       echo "Enter Captcha Code:    ";   
       echo $this->Html->image(
        array('controller' => 'posts', 'action' => 'captcha'));
        echo $this->Form->input('code');
       echo $this->Form->end('Add comment'); 
     ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:48:36.307

这一切都在文档的[博客教程中进行了解释。](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html#adding-posts)

> 当用户使用表单向您的应用程序发布数据时，该信息在 $this->request->data 中可用。如果您想查看它的外观，可以使用 pr() 或 debug() 函数将其打印出来。

# linux - 如何仅从以 x 开头的行中剪切字符？

> ID：15086928
> 
> 赞同：1
> 
> 时间：2013-02-26T10:39:03.130
> 
> 标签：linux, unix, grep, cut

我正在尝试使用`cut -c-2-18- filename`. 这会在每一行上剪切指定字符，但我只想从以`>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:45:11.357

就像是

```
grep ^\> file | cut -c 2-18 
```

应该做的伎俩？

```
[92][11:46:21] vlazarenko@alluminium (~/tests) > grep ^\> file | cut -c 2-18
 asdf
 bcda
 ofpjg
[93][11:46:25] vlazarenko@alluminium (~/tests) > cat file
> asdf
> bcda
zxcv
lasdf
> ofpjg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:51:13.580

您可以`GNU grep`单独执行此操作：

```
$ cat file
>grep from 2 to 18 character line 1
>grep from 2 to 18 character line 2
grep from 2 to 18 character line 3
grep from 2 to 18 character line 4

$ grep -Po '(?<=^>).{17}' file
grep from 2 to 18
grep from 2 to 18 
```

这使用[正向lookbehind](http://www.regular-expressions.info/lookaround.html)仅匹配以开头的行`>`并`.{17}`匹配接下来的 17 个字符。

或与`awk`：

```
$ awk '/^>/{print substr($0,2,18)}' file
grep from 2 to 18 
grep from 2 to 18 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T11:00:52.943

```
awk '/^\>/{print substr($0,2,17)}' your_file 
```

# android - Android：传递值时出现ArrayIndexOutOfBoundsException

> ID：15086931
> 
> 赞同：1
> 
> 时间：2013-02-26T10:39:04.957
> 
> 标签：android, indexoutofboundsexception

当我尝试传递纬度和对数时，我收到了这个 ArrayIndexOutOfBoundsException

```
private String getId(String facebookUser,String lat, String expiryMinute, String messageId, String message, String referenceKey, String placeId) {

        lang = Utils.formatDouble(Constants.searchLocation.getLongitude());
        lat = Utils.formatDouble(Constants.searchLocation.getLatitude());
        String traceId = null;
        HttpClient client = new HttpClient();
        PostMethod post = null;
        try {

            NameValuePair[] params = null;
            NameValuePair param = new NameValuePair();

            if(Constants.isMessageForPosting){
                params = new NameValuePair[6];
                param.setName("gadget");
                param.setValue("gettraceid");
                params[0] = param;

                if(messageId == null || messageId.trim().isEmpty()){
                    messageId = "1";
                }
            }else{
                params = new NameValuePair[8];
                param.setName("gadget");
                param.setValue("getrequestid");
                params[0] = param;
                if(messageId == null || messageId.trim().isEmpty()){
                    messageId = "2";
                }
            }

            if(expiryMinute == null || expiryMinute.trim().isEmpty()){
                expiryMinute = "0";
            }

            param = new NameValuePair();
            param.setName("fbuserid");
            param.setValue(facebookUser);
            params[1] = param;

            param = new NameValuePair();
            param.setName("userid");
            param.setValue(Constants.USERID);
            params[2] = param;

            param.setName("expiryminute");
            param.setValue(expiryMinute);
            params[3] = param;

            param.setName("msgid");
            param.setValue(messageId);
            params[4] = param;

            param = new NameValuePair();
            param.setName("msg");
            param.setValue(message);
            params[5] = param;

            param = new NameValuePair();
            param.setName("lat");
            param.setValue(lat);
            params[9] = param;

            param = new NameValuePair();
            param.setName("lang");
            param.setValue(lang);
            params[10] = param;
        */  
            if(!Constants.isMessageForPosting){
                param = new NameValuePair();
                param.setName("referencekey");
                param.setValue(referenceKey);
                params[6] = param;

                param = new NameValuePair();
                param.setName("placeid");
                param.setValue(placeId);
                params[7] = param;
            }

            post.setQueryString(params);
        int statusCode = client.executeMethod(post);
            traceId = post.getResponseBodyAsString();

        } catch (Exception e) {
            Log.e(TAG, "For Facebook Trace Id:", e);

        } finally {
            post.releaseConnection();
            post = null;
        }
        return Id;
    } 
```

下面是我的堆栈跟踪

```
02-26 15:39:52.131: E/MainFragment(23117): For Facebook Trace Id:
02-26 15:39:52.131: E/MainFragment(23117): java.lang.ArrayIndexOutOfBoundsException: length=6; index=9
02-26 15:39:52.131: E/MainFragment(23117):  at org.appright.mycity.activity.MainFragment.getTraceId(MainFragment.java:291)
02-26 15:39:52.131: E/MainFragment(23117):  at org.appright.mycity.activity.MainFragment.access$7(MainFragment.java:225)
02-26 15:39:52.131: E/MainFragment(23117):  at org.appright.mycity.activity.MainFragment$PostFBMessage.doInBackground(MainFragment.java:553)
02-26 15:39:52.131: E/MainFragment(23117):  at org.appright.mycity.activity.MainFragment$PostFBMessage.doInBackground(MainFragment.java:1) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:42:30.810

问题是您使用 6 个元素或 8 个元素声明 params 变量。但稍后您正在访问第 8 和第 9 个元素，这是错误的。

解决方案：

您应该使用 10 个元素的静态数组大小或使用 ArrayList 类。

# mysql - 如果有两个相同的，如何在 SQL 中找到最小值？

> ID：15086936
> 
> 赞同：2
> 
> 时间：2013-02-26T10:39:20.703
> 
> 标签：mysql, sql, sqlite

*如果有两个或多个相同的值，我该怎么做才能从列中获取最小值？

```
name   |   age
--------------
Peter  |   25
Andre  |   31
John   |   18
Lisa   |   31
Dick   |   29
Jen    |   18 
```

我想要最年轻的人的名字。min(age) 只返回第一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T10:40:57.310

```
SELECT *
FROM table
WHERE age = (SELECT min(age) FROM table) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:44:52.753

如何使用`GROUP_CONCAT()`将所有名称分组到一个列表中。

就像是：

```
SELECT GROUP_CONCAT(name), age FROM people GROUP BY age ORDER age ASC LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:42:20.980

```
select * from yourTable where age = (select MIN(age)) from yourTable) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:48:39.250

您可以使用

`select name,age from test.new_table where age = (select min(a.age) from test.new_table a)`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T10:42:46.923

```
SELECT * FROM table ORDER BY age LIMIT 1; 
```

# c# - 修饰符“XXXX”对此项目无效

> ID：15086940
> 
> 赞同：2
> 
> 时间：2013-02-26T10:39:37.630
> 
> 标签：c#, static

有谁知道我为什么会收到这些错误：

> 修饰符“静态”对此项目无效
> 
> 修饰符“只读”对此项无效

在以下代码的第 3 行：

```
public class YYY
{
    private static readonly struct ZZZ
    {
        private int x = 0;
        private int y = 0;
        private int z = 0;
    }
} 
```

当我研究此事时，我只找到了我不太了解的接口的答案，但我只想在我的类中创建一个静态只读结构字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T14:19:58.640

`static`并且`readonly`都是仅在对象的实现中使用的修饰符，而不是在定义中使用。当您声明`ZZZ`将使用的结构对象时，您可以添加修饰符`static`和`readonly`.

```
public class YYY
{
    private struct ZZZ
    {
        private int x = 0;
        private int y = 0;
        private int z = 0;
    }

    private static readonly ZZZ myZZZ = new ZZZ(); //The declaration of a ZZZ instance.
} 
```

# tree - 二叉搜索树中的深度与距离

> ID：15086941
> 
> 赞同：1
> 
> 时间：2013-02-26T10:39:38.480
> 
> 标签：tree, distance, binary-search-tree, depth

二叉搜索树（BST）中节点的深度是否与它与根的距离相同？我想是的，但我不确定。我相信距离是一般树的概念，深度是应用于 BST 的概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:46:28.733

是的，深度=距根的距离。从[这里](http://en.wikipedia.org/wiki/Binary_tree)：

> 节点的深度 n 是从根到节点的路径长度。

# hibernate - 使用 like 和 or 运算符的 HQL 查询

> ID：15086942
> 
> 赞同：2
> 
> 时间：2013-02-26T10:39:38.990
> 
> 标签：hibernate, hql

我正在使用 Hibernate，我想根据包含或条件的类似条件获取记录。是这样的，

> from empno in 员工（从员工中选择 empno，其中 empname 像 'A%' 或 'B%' 或 'C%' ）"

这是对的吗？建议我强大的查询..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T11:04:18.823

不需要子查询：

```
from Employee where empname like 'A%' or empname like 'B%' or empname like 'C%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:46:25.197

您必须为 where 子句中的每个条件创建一个 like 语句。HQL 将允许您执行 in/like 比较以及子选择。

```
from Employee emp where emp.empno in 
(select emp2.empno from Employee emp2 where emp2.empname like 'A%' 
or emp2.empname like 'B%' or emp2.empname like 'C%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:49:05.447

```
from Employee e 
    where e.empno in ( select ee.empno from Employee ee 
                       where ee.empname like 'A%' 
                       or ee.empname like 'B%' 
                       or ee.empname like 'C%' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-04T09:02:09.843

如果您想要更高的安全性并防止 sql 注入，您可以使用带有 setParameter 和通配符的 createQuery，如下所示：

```
@Override
public List<Employee> searchEmployee(String searchName) {
    Session currentSession = sessionFactory.getCurrentSession();
Query<Employee> searchQuery = currentSession.createQuery(
                    "from Employee where lower(empname ) like :theName or lower(empLlastName) like :theName", Employee.class);
searchQuery.setParameter("theName", "%" + searchName.toLowerCase() + "%");
List<Employee> employees = searchQuery.getResultList();
return employees;
} 
```

# linq - 无法从 system.collections.generic.ienumerable 转换 反对[]

> ID：15086943
> 
> 赞同：0
> 
> 时间：2013-02-26T10:39:40.300
> 
> 标签：linq

```
var qResult  = Enumerable.Range(1,10);
comboBox1.Items.AddRange(qResult); 
```

这里出现的问题是“Argument'1': cannot convert from 'System.Collections.Generic.IEnumerable' to 'object[]'

我尝试了各种代码来解决这个问题，但失败了。如果有人可以帮助我，请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:41:26.083

AddRange 不需要枚举。如果是对象，则给它一个数组:)

```
 var qResult  = Enumerable.Range(1,10);
        comboBox1.Items.AddRange(qResult.Cast<object>().ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:41:21.617

您必须发送一个对象数组作为参数：

```
var qResult  = Enumerable.Range(1,10).ToArray();
comboBox1.Items.AddRange(qResult); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:41:47.783

AddRange 期望绑定到一个列表或数组。在您的可枚举对象上调用 ToArray()，如下所示：

```
var qResult  = Enumerable.Range(1,10);
comboBox1.Items.AddRange(qResult.ToArray()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T10:42:07.907

`Enumerable.Range`返回一个`Enumerable`整数，但是`AddRange`需要一个数组，所以你应该转换`qResult`为数组，只需调用`ToArray`方法

```
qResult.ToArray() 
```

# php - 使用数据库值填充下拉列表并拆分字母排序

> ID：15086944
> 
> 赞同：1
> 
> 时间：2013-02-26T10:39:51.053
> 
> 标签：php, sql, postgresql

我正在将组织列表填充到我网站上的下拉列表中。这个 PHP 很简单，我没有遇到任何问题。

但是，该列表可能会变得非常庞大，我想将列表分成三个按字母顺序排列的部分。（例如 AG、HS、TZ）。如何修改下面的代码以适应使用 AG 对第一个下拉列表进行排序（然后我可以将相同的逻辑应用于其他两个）。

```
 $sql = pg_query("SELECT name FROM institution ORDER BY name ASC");                                                                 
   while($row = pg_fetch_array($sql)){
      echo "<option value=\"organisation1\">" .$row ['name'] . "</option>";
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:56:09.130

如果最终用户可能知道组织的名称，那么最好使用搜索框和一些 JS 来根据键入的字母填充。

否则，您可能希望有一个额外的初始下拉列表，以按逻辑细分而不是按字母顺序拆分列表（例如国家、城市、部门）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:30:03.817

```
$sql = pg_query("
    select name
    from institution
    where name < 'H'
    order by name asc
");

$sql = pg_query("
    select name
    from institution
    where name >= 'H' and  name < 'T'
    order by name asc
");

$sql = pg_query("
    select name
    from institution
    where name >= 'T'
    order by name asc
"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:53:14.180

这应该做 AG 和 HS 的把戏

```
 $AG = $HS = '';
$sql = pg_query("SELECT name FROM institution ORDER BY name ASC");                                                                 
while($row = pg_fetch_array($sql)){
    $char =chr(strtoupper(substr($row ['name'],0,1)));
    if($char<=71){
        $AG .= "<option value=\"organisation1\">" .$row ['name'] . "</option>";
    }
   if(($char>71) && ($char <= 83)){
         $HS .= "<option value=\"organisation1\">" .$row ['name'] . "</option>";
    }
   }
   echo $AG.$HS; 
```

使用 chr 获取第一个字符的 ascii 值。创建条件以将字符串添加到您的小节。你可以在这里查看 ASCII 值：
[http ://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:59:09.737

```
$cityarray = array('axx', 'bxx','txx');

$group1 = array('a','b','c','d','e','f');
$group2  = 'construct array with the require alphapet';
$group3  = 'construct array with the require alphapet';

foreach (cityarray as $city) {
 if (in_array($city[0], group1)) {
   $group1[] = $city 
 } else if (in_array($city[0], group2) {
   $group2[] = $city 
 }  else if (in_array($city[0], group3) {
   $group3[] = $city 
} 
```

}

//使用上面三个数组来构造下拉

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T11:09:18.830

我不是 php 或 postgresql 人，但你需要的是一个简单的编程逻辑。简单的算法就足够了。

```
step1\. run a loop through the array to fill dropdowns.

step2\. place appropriate conditions inside the loop to fill all the three dropdowns appropriately. 
```

看到这个代码。支持算法。您可能需要根据您的语言对其进行微调

```
 $sql = pg_query("SELECT name FROM institution ORDER BY name ASC");

   $ddlClass='.dropdown1';                                                                 

   while($row = pg_fetch_array($sql)){
         $char = chr(strtoupper(substr($row ['name'],0,1)));

         if($char>=65 && $char<=71);
            $ddlClass=  '.dropdown1';

         else if($char>=72 && $char<=83);
           $ddlClass=  '.dropdown2';

         else if ($char>=83 && $char <=90)
            $ddlClass=  '.dropdown3';
         $($ddlClass).append("<option value=\"organisation1\">" .$row ['name'] . "</option>");
 } 
```

我使用 jquery 来创建您的下拉列表，您可以使用其他任何东西，即 javascript、php 来执行此操作。

# c++ - 存储一组指针会导致未定义的行为吗？

> ID：15086954
> 
> 赞同：1
> 
> 时间：2013-02-26T10:40:16.603
> 
> 标签：c++, memory-management, c++11, set

考虑以下代码：

```
#include <iostream>

int main(int argc, char ** argv) {

  std::set<int*> ints;

  for (int i = 0; i < 10; i ++) {
    int * k = new int(i);
    ints.insert(k);
  }

  for (auto i : ints) {
    // some order-sensitive operations, for example:
    std::cout << (*i) << " ";
  }

  return 0;
} 
```

第二个循环对从集合中取出元素的顺序很敏感。这种程序的执行结果是否可能在程序的不同运行中有所不同？

据我所知，在`std::set`内部对元素进行排序。由于内存中的分配不一定具有增加的地址，因此该程序的输出可能（尽管不太可能）不是`0 1 2 3 4 5 6 7 8 9`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T10:46:27.913

是的，它们可能不同，但这不会是因为 UB。

这里定义了两件事：

*   排序方式`std::less<int*>`（尽管在大多数实现中您会看到“自然”排序）
*   `operator new`每次返回的地址可能相同也可能不同。这很可能会因您的实现使用的分配器而异，并且两种方式（确定性和看似随机）都已在野外看到。（请注意，当您通过例如 valgrind 运行程序时，顺序可能仍然始终相同，但与本机运行时不同）。

所以不要依赖于你感兴趣的任何特定顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:45:50.210

这不是标准意义上的“未定义行为”（*任何事情都*可能发生）。

但是，绝对未指定分配内存时将获得的指针地址。该标准没有说明免费存储的组织方式或不同分配的地址顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:45:41.113

使用手册，卢克。

[MSDN 中的 std::set 文档](http://msdn.microsoft.com/en-US/library/e8wh7665%28v=vs.110%29.aspx)

> STL 集是：
> 
> (...)
> 
> 排序，因为它的元素是按照指定的比较函数在容器内按键值排序的。

指针只是整数，所以这些变量将按它们的地址排序。内存管理器可以将这些变量分配在非常不同的位置，因此您无法保证它们的顺序（就它们的值而言）将保持不变。

但是，您似乎可以提供自己的比较功能：

[MSDN 上的 std::set::set() 文档](http://msdn.microsoft.com/en-us/library/2yy2xd0h.aspx)

然后，您可以以最适合您的方式对 set 的元素进行排序。

# php - 从输入表单在会话中存储一个 php 数组

> ID：15086955
> 
> 赞同：4
> 
> 时间：2013-02-26T10:40:17.623
> 
> 标签：php, arrays, session

如果有人能提供帮助，我在尝试让一个数组与会话一起工作时遇到了很多麻烦，如果我能让它工作，我就不会担心验证等问题，然后我可以扩展它。

HTML

```
<form method="post" action="array2.php">
    Select amount of tickets you require.
    <select name="options[]">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
    </select>
    Select the acomidation you require.
    <select name="options2[]">
        <option value="camping">Camping</option>
        <option value="caravan">Caravan</option>
    </select>
    <input type="submit" value="Go!" />
</form> 
```

数组2.php

```
<?php
session_start();
$checked = $_POST['options'];
$checked2 = $_POST['options2'];
$_SESSION['user'] = true;
$_SESSION['checked'] = $checked;
$_SESSION['checked2'] = $checked2;
header('Location: array3.php');
?> 
```

数组3.php

```
<?php
session_start();
if(!isset($_SESSION['user'])){
    die("To access this page, you need to <a href='register.html'>LOGIN</a>");
}
$checked = $_SESSION['checked'];
$checked2 = $_SESSION['checked2'];
?>

<?php
    for($i=0; $i < count($checked && $checked2); $i++){
        echo "You have selected to receive " . $checked[$i] . " tickets<br/>";
        echo "And you have selected to receive " . $checked2[$i] . " for accommodation are you sure? <br/>";
    }
?> 
```

主要问题是这些值没有从`array2`into传递`array3`，欢迎任何帮助。

编辑 - 这工作正常，直到我尝试添加会话以使其在多个页面上工作，所以我确定这就是问题所在

EDIT2 - 感谢所有帮助我工作的人，当我拿出它时

```
$checked = $_POST['options'];
$checked2 = $_POST['options2']; 
```

从数组 3 开始，它起作用了 :) 非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:47:16.413

```
count($checked && $checked2) 
```

……是你的问题。

`$checked && $checked2`is 一个逻辑表达式将是`true`or `false`，这意味着`count()`调用将始终返回`false`，并且`false`将等于`0`在数字比较中（小于与`<`比较`$i`），因此 for 循环不会执行任何迭代。

然而，在这种情况下使用数组是不合适的，因为你使用了一个`<select>`没有属性的元素，`multiple`所以它只代表一个值，这意味着数组只能保存一个值。您应该将其简化为标量值，您会发现 a) 它有效并且 b) 通常更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:47:50.837

你的 for 循环写错了。

```
for($i=0; $i < count($checked && $checked2); $i++) 
```

该计数语句不会像您想象的那样工作。将其分成 2 个 for 循环或一个内部循环。

像这样：

```
for($i=0; $i < count($checked); $i++){
  echo stuff here
}

for($i=0; $i < count($checked2); $i++){
  echo stuff here
} 
```

# c# - EF 外键迁移引发错误

> ID：15086957
> 
> 赞同：1
> 
> 时间：2013-02-26T10:40:24.867
> 
> 标签：c#, entity-framework-5

我有 2 张桌子：

```
[Table("Ticket_Admins")]
public class TicketAdmin
{
    public TicketAdmin()
    {
        Name = new Record();
        Name.IsRevisioned = false;
        Name.IsVisible = true;
        Name.Category = typeof(TicketAdmin).Name;
    }
    [Key]
    public int Id { get; set; }
    public virtual Record Name { get; set; }
    public virtual TicketPost Post { get; set; }
    public virtual UserProfile User { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    private string _email;

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]       
    public int UserId { get; set; }
    public string Email 
    {
        get { return _email; }
        set { _email = value.ToLower(); }
    }
} 
```

并在上下文中映射它们：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<TicketAdmin>()
            .HasRequired(x => x.User)
            .WithRequiredPrincipal();
        base.OnModelCreating(modelBuilder);
    } 
```

但是在迁移时我收到错误：

> ALTER TABLE 语句与 FOREIGN KEY 约束“FK_dbo.UserProfile_dbo.Ticket_Admins_UserId”冲突。冲突发生在数据库“aspnet-BoomzHelperPortal-dbv3”、表“dbo.Ticket_Admins”、“Id”列中。

我在这里做错了吗？我真正想做的是将 My 映射`TicketAdmin`到`UserProfile`id ( `UserProfile.UserId = TicketAdmin.Id`)

谢谢你的时间！

更新：我刚刚尝试创建一个空数据库，这个 shema 发现它创建`UserProfile.UserId`了一个外键列，但我需要`TicketAdmin.Id`成为一个 FK 列。（就像所有用户都有 UserProfile，但不是每个人都有 TicketAdmin 设置，并且 TicketAdmin 是 UserProfile 的子级并且具有与 UserProfile ID 相同的 ID）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T11:04:46.670

如果要添加所需的关系（不可为空的外键），则必须满足以下条件之一：

*   包含外键（`Ticket_Admins`在这种情况下）的表必须为空，或者
*   外键列之前存在，并且该列中的每个值都包含相关实体的有效键

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:51:24.100

好的，我发现我需要的只是将 ForeignKey 设置为：

```
[Table("Ticket_Admins")]
public class TicketAdmin
{
    public TicketAdmin()
    {
        Name = new Record();
        Name.IsRevisioned = false;
        Name.IsVisible = true;
        Name.Category = typeof(TicketAdmin).Name;
    }
    [Key]
    public int Id { get; set; }
    public virtual Record Name { get; set; }
    public virtual TicketPost Post { get; set; }
    [ForeignKey("UserId")]
    public virtual UserProfile User { get; set; }
} 
```

就这样。现在外键生成正确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T11:07:27.000

这是因为您正在向已包含与此约束不匹配的数据的表添加外键。尝试删除数据（如果可能）或修改数据以适应约束，否则，您需要修改约束

此外，您似乎正在尝试在两个主键之间添加一个外键，我不知道这是否可能，考虑修改您的 Ticket_Admins 表以包含一个 UserId 字段：

```
[Table("Ticket_Admins")]
public class TicketAdmin
{
    public TicketAdmin()
    {
        Name = new Record();
        Name.IsRevisioned = false;
        Name.IsVisible = true;
        Name.Category = typeof(TicketAdmin).Name;
    }
    [Key]
    public int Id { get; set; }
    public int UserId { get; set; }
    public virtual Record Name { get; set; }
    public virtual TicketPost Post { get; set; }
    public virtual UserProfile User { get; set; }
} 
```

然后在之间创建一个外键`UserProfile.UserId = Ticket_Admins.UserId`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T02:50:02.393

如果您尝试为 Existence 表创建新的外键，则需要删除存在表中的所有数据。由于每条记录都需要有一个外键，而有些记录已经创建，但没有外键。

# dynamics-crm-2011 - 导出 MS CRM 2011 解决方案时保持视图的隐藏状态

> ID：15086959
> 
> 赞同：2
> 
> 时间：2013-02-26T10:40:31.087
> 
> 标签：dynamics-crm-2011, dynamics-crm

我遇到了 MS CRM 2011 部署过程的奇怪缺陷。

开发人员可以停用开发系统上的视图，但是无法通过解决方案将此自定义转移到目标系统。这是[有关此问题的相关博客文章](http://blog.sonomapartners.com/2011/09/some-assembly-required-unmanaged-solution-gotchas.html)，“查看状态”主题。

但也许这个操作可以通过直接 XML 编辑来执行？

否则，如果管理解决方案，则无法修改目标系统上的视图状态......有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T19:10:07.800

我最近在将我们的测试环境迁移到 Staging 时遇到了这个问题。

如果您指的是移动自定义视图（即用户创建的仪表板），那么您是正确的，没有办法将其包含在解决方案中。这是 CRM 2011 的一个已知“功能”。

但是，可以创建一个[Scribe](http://www.scribesoft.com/Insight)作业，使您能够在设置后将视图转移到新的解决方案/环境。

# php - 在 php 中使用 wordpress shopp 中的变量

> ID：15086966
> 
> 赞同：0
> 
> 时间：2013-02-26T10:41:04.393
> 
> 标签：php, wordpress, plugins, shopp

我正在使用[适用于 Wordpress 的 Shopp 电子商务插件](https://shopplugin.net/)

我想使用这个插件提供的一些数据。我想 在 PHP语句中使用[付款方式。](https://shopplugin.net/api/purchase-paymethod/)`if`为此，我需要获取变量中的数据

该插件仅提供一段实际显示该值的代码。

```
<?php shopp('purchase', 'paymethod'); ?> 
```

但我想把这些数据放在一个变量中

```
$paymentmethod = ... 
```

我在获取变量中的 shopp 数据时遇到问题。我怎样才能做到这一点？

**解决了：**

太好了，你帮了我很多。这就是我得到的：为了将来参考，这会将 shopp 插件提供的付款方式转换为与可信商店证书集成所需的另一种描述。它可能会更清洁，但这有效。

```
<?php 
$paymentmethod = shopp('purchase', 'paymethod',  array('return'=>true)); 
if ($paymentmethod == vorkasse)
echo "PREPAYMENT";
else 
echo "OTHER PAYMENT";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:48:13.127

如果我阅读手册，您可以使用“选项”参数。阅读手册以获取更多信息（我无法为您测试，我没有安装），但它看起来像这样

```
$paymentmethod = shopp('purchase', 'paymethod', array('return'=>true)); 
```

你应该玩一下，因为它是如何工作的并不完全清楚。还有'echo'选项，它与返回选项相反（我认为），但手册上说它是这样做的`false`。那会很奇怪。

> **return**：当设置为 true、1 或 on 时，此选项会强制标签返回值，而不是将值显示/回显到页面。或者，在 tag 参数前加上 get 以获得相同的效果。默认情况下，所有返回布尔值的主题 API 标签都会返回。
> **echo**：当设置为 false、0 或 off 时，此选项会强制标记将值显示到页面。这是所有非布尔标记的默认值。

您可能还需要提供“回声”参数。但是这些的一些组合应该起作用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T08:57:30.007

`shopp()`Shopp API 中添加了用于编写命令的简写。

这： `$paymentmethod = shopp('purchase', 'paymethod', 'return=true');`

现在可以写成： `$paymentmethod = shopp('purchase.get-paymethod');`

# unit-testing - 单元测试测试计时器在 TFS 上不确定地失败

> ID：15086967
> 
> 赞同：0
> 
> 时间：2013-02-26T10:41:05.737
> 
> 标签：unit-testing, timer

我们的项目确实有一堆单元测试，它们也在 TFS 2012 构建服务器上的 CheckIn 期间运行。虽然它们在本地的行为与预期的非常相似，但偶尔在 TFS 上使用计时器的单元测试会发生一些奇怪的行为。最后，我们编写了一个类和一个测试来隔离这种行为。

班上：

```
public class TestTimerOnServer    
{    
    Timer _MyTimer = new Timer(100);    
    int _CountsToDo = 100;    
    public int TimerElapsedCounter = 0;

    public TestTimerOnServer()    
    {    
        _MyTimer.Elapsed += _MyTimer_Elapsed;    
    }

    public void StartCounting(int argNumberOfCounts, int argIntervalInMs)    
    {    
        _MyTimer.Stop();    
        _MyTimer.Interval = argIntervalInMs;    
        TimerElapsedCounter = 0;    
        _CountsToDo = argNumberOfCounts;    
        _MyTimer.Start();    
    }

    void _MyTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)    
    {    
        if (_CountsToDo > TimerElapsedCounter)    
            TimerElapsedCounter++;    
        else    
            _MyTimer.Stop();    
    }    
} 
```

针对它运行的测试：

```
private void TestTimerServerBehaviour()   
{   
   TestTimerOnServer ttos = new TestTimerOnServer();   
   ttos.StartCounting(10, 100); // should lead 1000 ms

   // we wait 1100 MS   
   Thread.Sleep(1100);

   Assert.AreEqual(ttos.TimerElapsedCounter, 10,"We should have 10 
   samples, but only " + ttos.TimerElapsedCounter + " have been generated.!"); 

   ttos.StartCounting(50, 100); // should lead 5000 ms

   // we wait 6000 MS   
   Thread.Sleep(6000);

   Assert.AreEqual(ttos.TimerElapsedCounter, 50, "We should have 50 
   samples, but only " + ttos.TimerElapsedCounter + " have been generated.!");   
} 
```

大多数情况下，该测试通过，偶尔它在 TFS 上失败 - 仅触发事件两次而不是 50 次。所以问题是我们在这里遇到了一般的单元测试设计缺陷，还是在 TFS 构建服务运行测试时发现问题？

**编辑：** TFS 在虚拟机上运行——这可能是我们问题的根源吗？

**EDIT2 - 最终调查结果** 问题显然是Testing-Context和VMware的结合。我使用@allen 发布的代码编写了一个小应用程序，一个使用相同代码的测试和另一个导致cpu 负载的测试：

```
void CPULoader()
{
    var action = new Action(() => { while (true);});

    Parallel.Invoke(action, action, action, action, action, action, action, action); 
} 
```

相当原始但有效。

在我运行应用程序的硬件机器上，CPU-Loader 会导致计时器事件稍晚发生，例如 1100 毫秒而不是 1000 毫秒。到目前为止还不错，Win7 毕竟不是实时系统。

在 VMware 上，某些组合会导致长达 5000 毫秒的延迟，而应该有一秒钟...... - 当然更糟，但仍然会发生事件。

真正的乐趣从运行测试开始（为此我将代码打包成一个无限循环），然后启动 CPU-Loader。整个系统非常慢，直到我停止加载 CPU 并且在测试*之前没有发生该事件*。

希望这可以给某人一些提示 - 我们通过使用 Timer 抽象并在单元测试时模拟计时行为来修复我们的测试。作为副作用，测试现在运行得更快:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:57:38.197

我的怀疑是在虚拟机上。使用 VM，您可能会遇到与时间同步相关的问题，这些问题可能会导致与时间相关的功能遇到问题。验证这一点的一种方法是编写一段简单的代码并在同一个 VM 上运行它。

```
Stopwatch watch = new Stopwatch();
System.Timers.Timer timer = new System.Timers.Timer();
timer.Interval = 30*60 * 1000;
timer.Elapsed += timer_Elapsed;
watch.Start();
timer.Start();

static void timer_Elapsed(object sender, ElapsedEventArgs e)
{
    watch.Stop();
    Console.WriteLine("Stopwatch value - {0}", watch.Elapsed);
    watch.Restart();
} 
```

另一个示例也在 stackoverflow 上[System.Diagnostics.Stopwatch 在 Elapsed... 属性中返回负数](https://stackoverflow.com/questions/1008345/system-diagnostics-stopwatch-returns-negative-numbers-in-elapsed-properties)

可能导致这种情况的一些因素是 a) 在 VM 上禁用时间同步服务 b) 主机上缺乏资源，例如。虚拟机太多

我的建议是在主机上设置一个新的虚拟机，并为该虚拟机提供更多资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:48:26.183

系统调用`sleep`和亲属经常与信号处理程序交互并提前中止他们的睡眠。对于 Unix (3) 函数，这种现象得到了最好的记录`sleep`，但我怀疑它也适用于您的 API。您应该通过在睡眠后检查当前时间来防止短睡眠。

通常，您希望尽可能将计时器单元测试与系统时钟分离。在处理基于队列的计时器和可以从外部调用的心跳函数时，我有非常好的经验，但是您应该始终能够模拟对函数的调用`sleep`和时间获取函数，然后在不调用实际函数的情况下进行测试。

# iphone - 我从服务器获取了很多名字，但我想在我的 UITableView 中只显示 2 个名字

> ID：15086969
> 
> 赞同：2
> 
> 时间：2013-02-26T10:41:13.240
> 
> 标签：iphone, ios, objective-c, uitableview

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    { 
        return  [arrTemptemp count] ;
    }

    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if(!cell)
        {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }
     for( int i =0; i<2  ; i++)
        {
          //  arrTemp = [[arrForum objectAtIndex:i] objectForKey:@"title"];
           // str1=[[arrForum objectAtIndex:i] objectForKey:@"title"];
            arrTemptemp = [[arrForum objectAtIndex:i] objectForKey:@"title"];
            NSLog(@"wwww:%@",arrTemptemp);
        }
        NSEnumerator *enumerator = [arrTemptemp objectEnumerator];
        NSDictionary *item = (NSDictionary*)[enumerator nextObject];

        NSLog(@"sheetal:%@",item);
        cell.textLabel.text = [NSString stringWithFormat:@"%@",item];
        return cell;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:42:56.967

第一次改变

```
 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
  { 
      return  2 ;
  } 
```

如果你想在你的然后显示任何两个值，`UITableView`那么这里证明适用于的简单逻辑`cellForRowAtIndexPath`。

```
 if(indexPath.row == 0)
    {
        cell.textLabel.text = [[arrForum objectAtIndex:0] objectForKey:@"title"];
       // your can get whatever value from arrForum (YourArray) by change objectAtIndex
    }
    if(indexPath.row == 1)
    {
        cell.textLabel.text = [[arrForum objectAtIndex:1] objectForKey:@"title"];
       // your can get whatever value from arrForum (YourArray) by change objectAtIndex
    } 
```

**注意：**我知道`cell.textLabel.text = [[arrForum objectAtIndex:indexPath.row] objectForKey:@"title"];`就足够了，但它只获得 Array 的前两个值。所以我应用上述逻辑，OP 可以获得他想要的任何两个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:44:26.947

您应该为要显示的尽可能多的记录设置行数`UITableView`，这样就可以了

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    { 
        return  number_of_records_you_want ;
    } 
```

# c# - 从以编程方式创建的 webrequested 获取查询字符串变量

> ID：15086979
> 
> 赞同：1
> 
> 时间：2013-02-26T10:41:29.537
> 
> 标签：c#, asp.net, httpwebrequest

我正在以编程方式创建这样的网络请求

```
 string url = "http://aksphases:201/min-konto/printpdf.aspx?id=149656222&name=Ink%20And%20Toner";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.CookieContainer = new CookieContainer(); // required for HttpWebResponse.Cookies
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        byte[] data = Encoding.UTF8.GetBytes("email=mymail&password=1234");
        request.ContentLength = data.Length;
        using (Stream stream = request.GetRequestStream())
        {
            stream.Write(data, 0, data.Length);
        }
        HttpWebResponse myWebResponse = (HttpWebResponse)request.GetResponse();
        Stream ReceiveStream = myWebResponse.GetResponseStream(); 
```

在`printpdf.aspx`页面中（你可以在 url 中看到它）我想获取查询字符串参数，当这个 URL 以编程方式执行时。当我尝试通常的方式时

```
HttpContext.Current.Request.QueryString["id"] 
```

它不起作用。有什么我做错了。或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:58:30.703

您在 Web App 的哪个位置调用它？

```
HttpContext.Current.Request.QueryString["id"] 
```

以下是我认为您应该尝试的方法： 在您的客户端应用程序中：

```
 string url = "http://aksphases:201/min-konto/printpdf.aspx?id=149656222&name=Ink%20And%20Toner";
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

    // try this
    Debug.WriteLine("About to send request with query=\"{0}\"", request.RequestUri.Query);
    // and check to see what gets printed in the debug output windows

    request.CookieContainer = new CookieContainer(); // required for HttpWebResponse.Cookies
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";
    byte[] data = Encoding.UTF8.GetBytes("email=mymail&password=1234");
    request.ContentLength = data.Length; 
```

而在您的 ASPX 页面中，请尝试以下操作：

```
 protected void Page_Load(object sender, EventArgs e) {
        var theUrl = this.Request.Url.ToString();
        Debug.WriteLine(theUrl); // is this the exact URL that you initially requested ?
        // if you have FormsAuthentication or other redirects
        // this might get modified if you're not careful

        var theId = this.Request.QueryString["id"];
        Debug.WriteLine(theId);
    } 
```

# c# - 禁用报告按钮链接不想禁用 - html5

> ID：15086981
> 
> 赞同：1
> 
> 时间：2013-02-26T10:41:33.080
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, html

当我点击它时，该按钮没有被禁用，这里有我的代码：

```
<script type="text/javascript">
    function SetNewsCommentReportFlag(newsCommentId) {
        $("#news-comment" + newsCommentId).text("This comment has been removed");
        $("#post-button" + newsCommentId).attr("onclick", "this.disabled=true;");
        var jqxhr = $.getJSON("<%= 
                Url.Action(
                    "SetNewsCommentReportFlag", 
                    "Home", 
                    new { area = "News" }
                ) 
            %>?newsCommentId=" + newsCommentId, function (data) { });
    }
</script>

<div class="news-comment" id="news-comment<%: Model.NewsCommentId %>">
    <% if (Model.Reported)
    {
        Model.NewsComment = "This comment has been removed";    
    } else  %>
    <%: Model.NewsComment %>
</div>
<div class="clear"></div>
<div class="actions-right">    
    <a href="javascript:SetNewsCommentReportFlag(<%: Model.NewsCommentId %>);" 
        class="button" id="post_button<%: Model.NewsCommentId %>"
    ><%: Html.Resource(Resources.Global.Button.Report) %></a>                
</div> 
```

像这样？：

```
<script type="text/javascript">
    function SetNewsCommentReportFlag(newsCommentId) {
        $("#news-comment" + newsCommentId).text("This comment has been removed");
        $("#post-button" + newsCommentId).attr("onclick", "this.disabled=true;");
            var jqxhr = $.getJSON(
                "/News/Home/SetNewsCommentReportFlag?newsCommentId=" 
                + newsCommentId, function (data) { }
            );
    }
</script>

<div class="news-post-list-item">
    <div class="news-post-user-info-wrapper">
        <div class="avatar">
            <img src="/ThemeFiles/Base/images/User/user-avatar.png" 
                width="52" height="52" alt="Avatar" />   
        </div>
        <div class="who-and-when-box">
            25/02/2013 13:20:56
            <br />
            <br />
            Cecilia Torres Castro 
        </div>
        <div class="news-comment" id="news-comment3">
            sdfsdf
        </div>
        <div class="clear"></div>
        <div class="actions-right">    
            <a href="javascript:SetNewsCommentReportFlag(3);" 
                class="button" id="post_button3">Report</a>                
        </div>
    </div>     
    <div class="clear"></div> 
</div> 
```

请问我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:20:57.843

您没有使用实际的按钮，而是使用了锚标记：

```
<a href="javascript:SetNewsCommentReportFlag(3);" class="button" id="post_button3">Report</a> 
```

这些不能使用 禁用`disabled=true`，仅适用于实际按钮。

因为您使用的是锚标记而不是真正的按钮，所以您必须稍有不同。

看：

[jQuery禁用链接](https://stackoverflow.com/questions/970388/jquery-disable-a-link)

或者

[如何在 JavaScript 中禁用 href 链接？](https://stackoverflow.com/questions/5376444/how-to-disable-a-href-link-in-javascript)

您还必须为禁用的“按钮”提供一个新的 css 类，以使其看起来也被禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:44:07.557

您正在添加一个`onclick`事件来禁用它，但在该行之后**您已经禁用它**。

因为您已经禁用了该元素，所以不会触发任何事件。即使他们这样做了，他们也会在元素被禁用时产生相同的结果。我认为你需要摆脱这条线：

```
$("#post-button").attr("disabled", "disabled"); 
```

此外，您在此行中存在语法问题：

```
post_button.Attributes.Add("onclick", "this.disabled=true;"); 
```

将其更改为：

```
$("#post_button").attr("onclick", "this.disabled=true;"); 
```

# php - Facebook 用户信息 : 过去 90 天内喜欢的其他人的帖子数

> ID：15086982
> 
> 赞同：1
> 
> 时间：2013-02-26T10:41:32.777
> 
> 标签：php, facebook, facebook-fql

需要 facebook fql 和数据挖掘帮助

```
SELECT post_id, source_id, message, created_time 
FROM stream 
WHERE source_id IN 
(
    SELECT target_id FROM connection WHERE source_id=me()
) LIMIT 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:04:24.227

如此处所述：

> 流表的每次查询仅限于前 30 天或 50 个帖子，以较大者为准，但是您可以使用特定于时间的字段，例如 created_time 以及 FQL 运算符（例如 < 或 >）来检索更大范围的帖子。 [http://developers.facebook.com/docs/reference/fql/stream](http://developers.facebook.com/docs/reference/fql/stream)

根据我的经验，您需要进行多次查询才能挤出过去所有可用的帖子。首先，我使用 Facebook 的最大限制进行查询，如下所示：

```
SELECT post_id, source_id, message, created_time, likes  
FROM stream 
WHERE source_id IN (SELECT target_id FROM connection WHERE source_id=me()) 
LIMIT 5000 
```

（另请注意，我在示例中省略的选择中添加了“喜欢”，如果您打算计算喜欢，则需要这样做）

然后我解析结果并从上一篇文章中获取 created_time 值，并使用它作为条件创建一个新查询，如下所示：

```
SELECT post_id, source_id, message, created_time, likes 
FROM stream 
WHERE source_id IN (SELECT target_id FROM connection WHERE source_id=me()) 
AND created_time < 1361472438 
LIMIT 5000 
```

然后我重复这个过程并进行额外的查询，直到 Facebook 返回一个空的结果集。

但即使我做了所有这些，我得到的时间也不会超过 6 天。

因此，至少按日期来看，它比 Facebook 在他们的文档中声明的要少得多，但是从数量上看，你似乎得到了 50 多个帖子。

# button - 列表视图中的选定项目

> ID：15086985
> 
> 赞同：0
> 
> 时间：2013-02-26T10:41:43.053
> 
> 标签：button, drawable

在布局中，当我单击其中一个时，我单击一个按钮以显示 res /drawable 中所有可绘制对象的列表 我必须显示相同的布局 我的问题是如何访问用户之前单击的按钮

```
public void onItemClick(AdapterView<?> arg0, View arg1,
        int arg2, long arg3) {
    setContentView(layoutIds[position]);
    Button button=allButtonsInLayout.get(arg2);
    button.setBackgroundResource(R.drawable.images_sos);
} 
```

如果我这样做，我可以改变背景：

```
Button button=(Button)findViewById(R.id.button); 
```

但是如果我将该行更改为

```
Button button=allButtonsInLayout.get(arg2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T15:28:32.797

```
setContentView(R.layout.otherview);
                        //matable is a table of all drawable it contains exactly thier id
                        //then i creat exactly the same number of buttons than the number of drawable's id
                        for (int k1=0;k1<matable.length;k1++){

                            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                                    LinearLayout.LayoutParams.MATCH_PARENT,
                                    LinearLayout.LayoutParams.WRAP_CONTENT);
                            Button btn = new Button(getBaseContext());
                            btn.setId(k1);
                            final int id_ = btn.getId();
                            LinearLayout linear = (LinearLayout) findViewById(R.id.linearscroll);
                            linear.addView(btn, params);
                            final Button btn1 = ((Button) findViewById(id_));
                            try{
                                btn1.setBackgroundResource(matable[k1]);
                                ht = new Hashtable<Integer, Integer>();
                                ht.put(id_, matable[k1]);
                                ht.put(3, 145);
                            }catch(Exception e){
                                e.printStackTrace();
                            }
                            btn1.setId(k1);
                            btn1.setOnClickListener(new View.OnClickListener() {
                                @SuppressWarnings("deprecation")
                                public void onClick( View view) {
                                    setContentView(lemien);
                                    int test=v.getId();
                                    test=test+3;
                                    //and it 's exactly here where i make the comparaison 
                                    if(btn1.getId()==view.getId()){

                                        int cpt=0;
                                        tabIdButton[cpt]=view.getId();
                                        d=btn1.getBackground();

                                        BitmapDrawable bmd = (BitmapDrawable) d;

                                        Bitmap bm = bmd.getBitmap();
                                        ByteArrayOutputStream stream = new ByteArrayOutputStream();
                                        bm.compress(Bitmap.CompressFormat.JPEG, 100, stream);
                                        byte[] bitmapdata = stream.toByteArray();

                                        try{
                                            Button btn3 = ((Button) findViewById(v.getId()));
                                            btn3.setBackgroundDrawable(d);
                                            SQLiteAdapter mySQLiteAdapter =new SQLiteAdapter(getBaseContext());
                                            mySQLiteAdapter.openToWrite();
                                            mySQLiteAdapter.insertintdrawableid(btn3.getId());

                                            mySQLiteAdapter.insertphotobouton(bitmapdata);

                                            mySQLiteAdapter.close();
                                            Log.v("btn2", "btn2 j'ai chnagé");
                                        }catch(Exception e){
                                            e.printStackTrace();

                                    }

                                } 
```

# android - 简单解析推送通知 Android

> ID：15086987
> 
> 赞同：1
> 
> 时间：2013-02-26T10:41:46.250
> 
> 标签：android, push-notification

我在我的 Android 应用程序中使用简单的推送通知。我收到通知很好，但我担心的是当我的应用程序正在运行时，如果通知到达并且用户点击它，它会启动我的应用程序的另一个实例。我想避免堆叠我的应用程序。我正在使用[Parse Sdk](https://www.parse.com/apps/quickstart_push#android/existing)进行推送通知任何帮助将不胜感激。谢谢。

这是我的代码

```
 Parse.initialize(this, "123456789..", "12345697...");
 PushService.subscribe(context,"", Demo.class);
 PushService.setDefaultPushCallback(this, Demo.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:56:24.250

尝试这个，

使用`addFlags`并设置`FLAG_ACTIVITY_NO_ANIMATION`, `FLAG_ACTIVITY_CLEAR_TOP`, `FLAG_ACTIVITY_NEW_TASK`.

前任：

```
 myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION
            | Intent.FLAG_ACTIVITY_CLEAR_TOP);

    PendingIntent pendingIntent = PendingIntent.getActivity(LiveChat.this,
            0, myIntent, Intent.FLAG_ACTIVITY_NEW_TASK);

    myIntent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION); 
```

# javascript - 不必要的 for 循环迭代会影响速度吗？

> ID：15086990
> 
> 赞同：0
> 
> 时间：2013-02-26T10:41:57.310
> 
> 标签：javascript, optimization, for-loop

我有许多`<div>`s 的动态 HTML，它们的类`groupX`where`X`是一个介于 1 和 100 之间的数字。我需要找出有多少组正在用于应用程序的其他地方，并且目前有以下代码：

```
for(i = 0; i <= 100; i++){                       
  if($j('.group' + i).size() > 0) {          
    totalAmountOfGroups++; 
  }
} 
```

它可以工作，虽然有时只能使用 6 个组，所以我不必要地循环了 94 次，想知道这是否会影响速度（尤其是里面的 jQuery）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:46:16.773

这取决于在`for`. 问题中的那个似乎不太贵。但是，我会寻求不同的解决方案。生成 HTML 时，您可以在没有计数器的情况下向元素添加另一个类。例如`class="group group14"`。这样你就可以使用选择器`$('.group')`，这样你就可以只遍历你需要的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:17:28.433

[像这样试试](http://jsperf.com/jquery-vs-getelementsbyclassname)

这不是一个好方法，但比你接近更快。最好的方法是按类“组”标记所有元素，并将组号存储在数据属性中，如 data-group="n"。在此之后，您可以通过一次操作选择所有元素，然后迭代所选元素以从属性中提取组号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:47:10.953

您可以将另一个类添加到您的组中，我们称之为*分组*，然后使用正则表达式过滤它们

```
var total = 0;
total = $('.grouped').filter(function(){
    return $(this).attr('class').match(/group[d+]/g);
}).size(); 
```

# linux - 了解 Linux 上每个进程使用了 多少交换空间

> ID：15086993
> 
> 赞同：1
> 
> 时间：2013-02-26T10:42:09.653
> 
> 标签：linux, swap

我使用以下脚本（来自此博客[http://northernmost.org/blog/find-out-what-is-using-your-swap](http://northernmost.org/blog/find-out-what-is-using-your-swap)）来了解每个进程正在使用多少交换

```
#!/bin/bash
# Get current swap usage for all running processes
# Erik Ljungstrom 27/05/2011
SUM=0
OVERALL=0
for DIR in `find /proc/ -maxdepth 1 -type d | egrep "^/proc/[0-9]"` ; do
PID=`echo $DIR | cut -d / -f 3`
PROGNAME=`ps -p $PID -o comm --no-headers`
for SWAP in `grep Swap $DIR/smaps 2>/dev/null| awk '{ print $2 }'`
do
let SUM=$SUM+$SWAP
done
echo "PID=$PID - Swap used: $SUM - ($PROGNAME )"
let OVERALL=$OVERALL+$SUM
SUM=0

done
echo "Overall swap used: $OVERALL" 
```

***此脚本输出的整体交换使用输出与free***命令输出的交换使用不匹配。

有人能解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:24:52.473

可以通过使用命令“top”然后按“O”然后从给定选项中选择“P: SWAP = Swapped size (kb)”来找出每个进程的交换使用情况。这些进程将根据交换使用情况进行分类。

最新版本的 top v3.3.3 没有“O”选项。

# android - 获取我的应用程序更新版本代码以检查新版本

> ID：15086995
> 
> 赞同：1
> 
> 时间：2013-02-26T10:42:17.730
> 
> 标签：android, android-version

我想到在有新更新时强制用户更新应用程序。

为了做到这一点，我曾想过`versionCode`，获取`versionCode`安装在设备上的应用程序：

```
public int getVersion() {
    int v = 0;
    try {
        v = getPackageManager().getPackageInfo(getPackageName(), 0).versionCode;
    } catch (NameNotFoundException e) {
        e.printStackTrace();
    }
    return v;
} 
```

现在我需要知道我的服务器更新`versionCode`。

知道更新版本代码并将其与用户版本代码的应用程序进行比较，我可以检查它是否不同。

我的最终目标是检查是否有更新。如果它存在，则在用户不更新时不打开当前应用程序。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:03:29.307

如果您想获得在 Google Play 上可用的应用程序版本，据我所知这是不可能的。您将需要自己的 Web 服务器（调用 Web 服务以获取版本号或访问服务器上的“秘密”文件以读取它），然后弹出升级对话框。如果您选择此解决方案，请确保不要过早更新服务器版本。在 Google Play 上获得新应用程序后，需要几个小时才能对所有用户可用。

# view - $resource 不更新视图

> ID：15086996
> 
> 赞同：-1
> 
> 时间：2013-02-26T10:42:19.620
> 
> 标签：view, resources, angularjs, updates

我有一个非常简单的资源如下：

```
angular.module('ExampleServices', ['ngResource']).

        factory('NoteService', function($q, $rootScope, $resource){
        var baseurl = "/api/v1/note/";
        var Note = $resource(baseurl, {}, {

            // get notes method    
            get_for_model: {
                method: 'GET',
                params:{user: '', object_id: ''},
                isArray: false
            },

            // leave note method
            leave_note: {
                method: 'POST',
            }

        });
        return Note
    }
); 
```

在控制器中，我`leave_note`按如下方式调用该方法：

```
$scope.note = function(){
        $scope.note = NoteService.leave_note({
            desc: desc,
            title: title,
            object_id: oid,
        }); 
    } 
```

这基本上将 POST 方法调用到我的应用程序 rest API 并创建对象。刷新页面后，我可以看到`notes`. 但据我所知`$resource`，应该自行更新观点。

**从[文档中引用](http://docs.angularjs.org/api/ngResource.%24resource)**

> 重要的是要意识到调用 $resource 对象方法会立即返回一个空引用（对象或数组取决于 isArray）。从服务器返回数据后，现有参考将填充实际数据。

在将其定义为函数之前，我无法`$rootScope.$apply`在该`leave_note`方法中使用（如下所示：）

```
leave_note: function(){
    var note = New Note();
    note.desc = desc;
    note.title = title;
    note.object_id = oid;
    note.$save();
    $rootScope.$apply();
} 
```

但在上述情况下，发送到 REST api 的调用有一个`undefined`请求方法。

我能想到的另一个问题是我没有`$scope.note`定义但有`$scope.notes`哪个是 REST api 发送的注释列表。所以也许`$scope.note`正在更新，但由于我没有渲染`note`对象，而是在模板中`notes`使用渲染`ng-repeat`，所以我无法看到模板中的更改。

我还尝试在保存新笔记后重新获取笔记对象，但它基本上会删除所有笔记，然后重新渲染所有看起来很难看的笔记（几乎就像页面刷新一样）。

我想要实现的是，一旦`note`保存了对象，我希望将新笔记合并到现有笔记中。请指导我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:31:40.877

您不需要使用`$rootScope.$apply`，您的小姐了解`$resource`API 文档。

正如`$resource`文档中提到的：*“一旦从服务器返回数据，现有引用就会填充实际数据。”* . 这意味着当您这样做时，`$scope.notes = NoteService.get_for_model();`您要求`$scope.notes`填充从`NoteService.get_for_model`GET 请求接收到的（未来）数据。API将`$resource`负责执行此操作——更新`$scope.notes`模型——仅此而已。请注意，它**没有提到**当您在同一服务上执行 POST 时您的数据将自动更新。

如果您想`$scope.notes`在添加新注释 (POST) 后更新您的模型，并且不想请求整个注释列表，请尝试`$scope.notes`在 POST*成功*回调中将新注释直接添加到您的模型中：

```
 var note = NoteService.leave_note({
            desc: desc,
            title: title,
            object_id: oid,
        }, function() {
            $scope.notes.push(note.$get());                
        }
 ); 
```

请注意，这可以大大改进（即避免使用`$get`），但由于我不知道您的实现的确切细节，所以我只是提供了一个通用解决方案。

# html - 不使用的自定义文件选择器

> ID：15086997
> 
> 赞同：2
> 
> 时间：2013-02-26T10:42:20.090
> 
> 标签：html, file-upload, applet, filechooser

我正在开发一个基于 java（webwork 框架）的 web 应用程序，其中需要先压缩要上传的文件。由于无法通过javascript设置“input type='file'”元素的值，我决定采用嵌入式小程序的路线。基本上这个小程序会压缩选择的文件，然后通过 scp 将压缩文件上传到服务器。

它运行良好，但我对网页本身的渲染有疑问。如果有一个我可以使用的现有文件选择器，我正在考虑而不是在小程序中实现文件选择器。当然没有放任何“输入类型='文件'”。

非常感谢这些现有的自定义 Web 文件选择器的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:52:32.290

由于安全限制，使用 HTML 选择文件的唯一方法是添加`<input type=file>`到文档。然后用户应该选择一个真正点击的文件。

请注意，javascript（在现代浏览器中）能够读取文件的内容，因此它不应该能够选择任意文件并读取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T21:01:49.093

这总是有效的。

```
<div id="input_container" style="width: 0px; height: 0px; overflow: hidden"><input type="file" id="inputfile" /></div>
<div class="button" onclick="upload();">Upload file</div> 
```

还有你的剧本

```
function upload(){
 document.getElementById('inputfile').click();
} 
```

你的 CSS

```
.button {
   /*button style here*/
} 
```