# StackOverflow 问答 14455000-14455999

# objective-c - Objective-C：这两个属性分配有什么区别？

> ID：14455007
> 
> 赞同：1
> 
> 时间：2013-01-22T09:13:55.780
> 
> 标签：objective-c, header-files

和有什么区别

```
@property (nonatomic, retain) NSString *subject, *name, *kind; 
```

和

```
@property (nonatomic, retain) NSString *subject;
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *kind; 
```

我认为功能完全相同，但第一个功能只会节省您的打字和一些代码行。我不确定这就是我问的原因:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:19:01.840

```
@property (nonatomic, retain) NSString *valtOnder, *name, *soort; 
```

和

```
@property (nonatomic, retain) NSString *valtOnder;
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *soort; 
```

两种方式都是一样的。

但我更喜欢后一个。原因？？

如果您有任何错字或任何错误，编译器将准确指出具有该属性/变量名称的行。

如果我写了几十个属性和/或变量，那么我必须寻找它们中的每一个，哪一个是错误的根本原因......因为我使用@synthesize 很长一段时间，所以很难找到。

所以我总是建议和指导其他人对变量、属性、综合等进行一行声明。

**我很懒。**很少有人认为为什么要多次写同一件事？额外的时间和工作。

但是多行将更具可读性。您只需编写一次代码，就会被阅读数百次，因此只需几秒钟即可输入一些额外的关键字。并且感谢所有为您提供自动完成功能的 IDE，所以现在这个原因几乎已经过时了。

编辑：

根据 vikingosegundo 的评论，

你永远不应该使用`retain`NSString，使用`copy`.

对于不可变对象`copy`不应该使用`retain`。

# ios - 未找到 iOS 开发证书

> ID：14455009
> 
> 赞同：38
> 
> 时间：2013-01-22T09:14:03.180
> 
> 标签：ios, xcode, certificate

当我想更新我的配置文件时，我的 Xcode 管理器中出现了一个奇怪的错误。

Xcode 是这样说的：

![在此处输入图像描述](../Images/9f1145494908d730864b676156b7fc5e.png)

“未找到 iOS 开发证书。但是，已经有一个证书请求待处理。代理或管理员必须先批准此请求，然后才能下载您的证书。”

我以前从未经历过这种情况，所以如果有人得到解释或者解决方案，那就太好了:)。

我在 Apple 网站上的开发者专区中查看了配置页面，但没有发现可能损坏的内容：/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T19:01:27.980

为我做这件事的诀窍是登录 developer.apple.com 并*手动*创建开发证书，然后*手动*创建配置文件。我只有一个团队，只有一个成员（我），所以我无法批准证书。当我尝试通过 Xcode 管理器自动执行此操作时，错误仍然存​​在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-21T11:03:29.310

这里有同样的错误信息。似乎有多个来源。我的是我有一个开发者帐户并加入了两个团队。在一个团队中，我根本没有证书。在过去，这并没有造成任何问题。在 Xcode Organizer 中，我可以选择我尝试从哪个团队获取 Provisioning Profiles。如果选择了我拥有开发证书的团队，则供应配置文件会毫无错误地下载。我认为，从 2013 年 4 月开始，随着新改进的会员中心，组织者会自动获取所有团队帐户 - 无需询问特定团队。由于一个团队根本没有证书，因此所有团队的获取过程都会因此错误消息而停止。

解决方案（针对此问题）是为所有团队添加开发证书。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-28T20:22:40.407

我自己刚刚经历过这个，我*强烈*建议您[联系 Apple 开发者计划支持](https://developer.apple.com/contact/phone.php)，让他们指导您完成重置证书和配置文件的过程。手动操作并不是一件难事，但是有很多方法可以解决这个问题（我根据经验说话），而且打电话的人越多，他们就越有可能继续改进这个过程。

也就是说，简短（-ish）的答案是从 Keychain 中删除所有开发人员和安装程序证书，然后从门户中删除所有证书和配置文件，然后从头开始重新创建它们，然后刷新 Xcode 以将它们全部提供在。

哦，完成后一定要[备份它](https://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificatesandProvisioningAssets/MaintainingCertificatesandProvisioningAssets.html#//apple_ref/doc/uid/TP40012582-CH20-SW6)！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T10:23:58.827

我遇到了同样的问题，并通过在组织者的“团队”下单击我的团队来解决它。我在那里只有一个团队，没想到会产生任何影响，但它强制重新加载配置文件左右，现在它可以工作了。嗯。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-30T21:35:56.340

我的情况是，当我尝试从 Xcode 刷新我的旧证书（开发人员 + 发行版）时，我收到了这条消息，当时它们由于开发人员计划的年度更新而过期。

对于它的价值，我设法通过这个过程（大致）解决了这个问题：

1.  从我的设备中删除旧的“iOS 团队配置文件”
2.  打开我的钥匙串并删除与过期证书关联的旧私钥。
3.  从 Xcode 管理器的列表中删除过期的证书（在门户上，它们已经被删除）。
4.  **在门户网站上手动生成新证书**，详细说明（包括下载新证书并双击安装）。
5.  在 Xcode 的管理器中尝试新的刷新后，我仍然收到相同的错误消息，但是在检查设备时，现在已经自动创建并安装了一个新的配置文件，所以我可以忘记错误消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-03T17:19:15.527

奇怪的是，我只需要：

首先做一个出口（只是为了安全！）

Xcode 5：

*   在 Xcode -> 首选项 -> 帐户中
*   单击左下角的齿轮图标 -> 导出帐户...
*   输入文件名和密码并保存
*   理想情况下，然后将它备份到不是你的 Mac 的地方（例如 Dropbox）——它是加密的，所以没关系。

然后进行实际修复：

Xcode 5：

*   在 Xcode -> 首选项 -> 帐户中
*   在左栏中选择 Apple ID
*   单击左下角的“-”（减号）图标并确认
*   单击左下角的“+”（加号）图标 -> Apple ID... 并登录

那时一切都很好...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-13T09:14:46.763

在 Xcode 中：菜单 Xcode --> 首选项 --> 帐户 --> 查看详细信息

然后按左下角的刷新按钮。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-22T09:18:41.813

如消息所述，您需要登录 developer.apple.com 站点并批准证书请求。

如果您不是您帐户的代理，那么您需要让代理批准该请求。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-22T09:20:59.893

您在苹果开发者资料中有开发者访问权限。请让管理员批准您的证书请求。当管理员/代理批准时，将自动删除该错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-24T22:42:30.793

我最近在 2021 年 11 月使用 xcode 13.x 收到了一条略有不同的消息。当我尝试“构建”项目时，消息是“ios_develop.cer 文件未找到”，即使该文件已过期，但仍然存在。我并不感到惊讶，我已经很多年没有构建这个解决方案了。我确实每年都会更新我的 Apple 开发者订阅。我儿子采用了一个非常古老的学校解决方案来解决这个问题，我想提一下，以防它帮助任何人。“管理证书”之类的 Apple 工具不允许我删除旧证书，因此我们在文件管理器中删除了证书并生成了一些新证书，但即使创建了证书，我们也无法通过“找不到文件”消息获取 xcode在 xcode“管理证书”中。然后我儿子将新的开发人员证书复制到它正在寻找的位置，并将其重命名为它正在寻找的名称。然后，Xcode 开始对新证书的权限大惊小怪，我们在 Get Info、Properties “Allow Access to All”中修复了公共和私有证书。我真的认为这会工作的可能性为零，但是想想，突然之间旧的 xcode 项目完全构建，我们能够将 iPhone 可执行文件放在配置列表中的 iPhone 上。令人耳目一新的是，这种旧式方法（将文件放在要查找的位置）效果很好。既然 Apple 认为这是可行的，他们可能会检查证书是否仅通过他们的工具提供，但它应该可以工作一段时间。然后，Xcode 开始对新证书的权限大惊小怪，我们在 Get Info、Properties “Allow Access to All”中修复了公共和私有证书。我真的认为这会工作的可能性为零，但是想想，突然之间旧的 xcode 项目完全构建，我们能够将 iPhone 可执行文件放在配置列表中的 iPhone 上。令人耳目一新的是，这种旧式方法（将文件放在要查找的位置）效果很好。既然 Apple 认为这是可行的，他们可能会检查证书是否仅通过他们的工具提供，但它应该可以工作一段时间。然后，Xcode 开始对新证书的权限大惊小怪，我们在 Get Info、Properties “Allow Access to All”中修复了公共和私有证书。我真的认为这会工作的可能性为零，但是想想，突然之间旧的 xcode 项目完全构建，我们能够将 iPhone 可执行文件放在配置列表中的 iPhone 上。令人耳目一新的是，这种旧式方法（将文件放在要查找的位置）效果很好。既然 Apple 认为这是可行的，他们可能会检查证书是否仅通过他们的工具提供，但它应该可以工作一段时间。突然之间，旧的 xcode 项目完全构建，我们能够将 iPhone 可执行文件放在配置列表中的 iPhone 上。令人耳目一新的是，这种旧式方法（将文件放在要查找的位置）效果很好。既然 Apple 认为这是可行的，他们可能会检查证书是否仅通过他们的工具提供，但它应该可以工作一段时间。突然之间，旧的 xcode 项目完全构建，我们能够将 iPhone 可执行文件放在配置列表中的 iPhone 上。令人耳目一新的是，这种旧式方法（将文件放在要查找的位置）效果很好。既然 Apple 认为这是可行的，他们可能会检查证书是否仅通过他们的工具提供，但它应该可以工作一段时间。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-01-25T07:37:44.880

我也有同样的问题。确实没有什么要批准的，我的证书的状态是颁发的，如果需要出处，就会有一个按钮来这样做。为了能够继续工作，我刚刚删除了“Xcode managed”配置文件，创建了一个新配置文件，下载它（不使用 Xcode）并将其放入 Organizer。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-06-10T08:43:14.440

只需手动下载配置文件即可为我解决问题。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-08-19T22:51:13.750

通过发现我有几个尚未完成的 CSR，我能够为自己解决这个问题。这两个文件都有扩展名 .certSigningRequest 并且是通过会员中心（不是 Xcode）生成的。但是我还没有完成上传和证书生成，这就是 Xcode 在说“但是，已经有一个证书请求待处理。”时所抱怨的。一旦我完成了这些步骤，问题就消失了。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-06-03T09:19:14.407

我在两个团队的 Apple ID 帐户（管理员）上遇到了同样的问题。一旦我从其中一个团队中删除了我的帐户，该消息就再也不会打扰我了。但在这种情况下，如果我想使用两个不同的帐户刷新所有配置文件。希望这会有所帮助。

# jquery-mobile - 导航栏出现在 2 行而不是 1 行

> ID：14455010
> 
> 赞同：0
> 
> 时间：2013-01-22T09:14:08.493
> 
> 标签：jquery-mobile

我希望导航栏出现在一行中。我按照 jQuery 移动网站中的说明进行编码。但是 2`<li>`出现在两行中。

```
<head>  
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="language" content="en" />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />

        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script> 
```

```
<body>
            <ul data-role="navbar" data-inset="true" data-filter="true" role="navigation" class="ui-navbar ui-mini">
                <li><a href="HolidayList.html" class="ui-btn-active ui-state-persist">Holiday List</a></li>
                <li><a href="#">Closed Locations</a></li>           
            </ul>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:28:10.957

似乎您缺少导航栏上方的主 div。

[正如您在演示](http://jquerymobile.com/demos/1.2.0/docs/toolbars/docs-navbar.html)中看到的那样。您的代码应如下所示。

```
<div data-role="navbar">
  <ul>
    <li><a href="a.html" class="ui-btn-active ui-state-persist">One</a></li>
    <li><a href="b.html">Two</a></li>
  </ul>
</div><!-- /navbar --> 
```

# java - 使用带有管道流的普通流写入器/读取器

> ID：14455012
> 
> 赞同：0
> 
> 时间：2013-01-22T09:14:17.200
> 
> 标签：java

考虑以下测试代码。

我试图找出我是否可以使用像“普通” I/O 流这样的管道流，以及常用的 Reader 和 Writer 实现（具体来说，我正在处理的代码库的另一部分要求我使用 OutputStreamWriter）。

这里的问题是读取端似乎没有显示任何内容。该程序至少似乎正确地将消息写入管道的写入端，但是当尝试从另一端读取时，我会无限期地阻塞，或者如果我（在这种情况下）检查可用字节，则调用返回 0 .

我究竟做错了什么？

```
public class PipeTest {

private InputStream input;
private OutputStream output;

public PipeTest() throws IOException {

    input = new PipedInputStream();
    output = new PipedOutputStream((PipedInputStream)input);

}

public void start() {

    Stuff1 stuff1 = new Stuff1(input);
    Stuff2 stuff2 = new Stuff2(output);

    Thread thread = new Thread(stuff1);
    thread.start();
    Thread thread2 = new Thread(stuff2);
    thread2.start();
}

public static void main(String[] args) throws IOException {

    new PipeTest().start();
}

private static class Stuff1 implements Runnable {

    InputStream inputStream;

    public Stuff1(InputStream inputStream) {
        this.inputStream = inputStream;
    }

    @Override
    public void run() {

        String message;
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
        try {
            //message = reader.readLine();
            System.out.println("Got message!");
            System.out.println(inputStream.available());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}

private static class Stuff2 implements Runnable {

    OutputStream outputStream;

    public Stuff2(OutputStream outputStream) {
        this.outputStream = outputStream;
    }

    @Override
    public void run() {

        String message = "Hej!!\n";

        OutputStreamWriter writer = new OutputStreamWriter(outputStream);
        try {
            writer.write(message);
            System.out.println("Wrote message!");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:19:26.017

由于您从未从阅读端阅读，因此不可能看到您如何得出该结论，因此任何此类结论都是毫无根据和无效的。

您所做的只是在任意时间点打印 available() ，这不足以证明在读取端没有出现任何内容。

# grails - Grails 数据库迁移，其属性与 db 无关

> ID：14455013
> 
> 赞同：2
> 
> 时间：2013-01-22T09:14:32.813
> 
> 标签：grails, database-migration, liquibase

Grails-database 迁移插件中是否有一种方法可以在迁移文件中定义属性，以便能够定义与数据库无关的迁移，就像在 Liquibase 中一样？

我试过：

```
databaseChangeLog = {
property([name:"boolean.type", value:"bit(1)",dbms:"mysql" ])
property([name:"boolean.type", value:"number(1,0)", dbms:"oracle"])
...
} 
```

在列定义中使用它：

```
changeSet(author: "me", id: "121112341-1") {
createTable(tableName: "test_table") {
...
column(name: "my_column", type: "${boolean.type}")
...
}
} 
```

但这不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:37:09.453

Groovy 文件`"${boolean.type}"`中有一个 GString，因此 Groovy 正在尝试解析`type`变量的属性`boolean`。您需要使用单引号，以便 Groovy 单独保留字符串并让 Liquibase 执行特定于 dbms 的替换：

```
column(name: "my_column", type: '${boolean.type}') 
```

# android - Eclipse / Android：“在项目上运行构建器'Android Pre Compiler'时出错......”

> ID：14455018
> 
> 赞同：97
> 
> 时间：2013-01-22T09:14:58.133
> 
> 标签：android, eclipse, nullpointerexception, adt

尝试在一个我几个月没有工作过的 Android 项目上做一些工作，但每次我尝试构建项目时，Eclipse 都会弹出一个对话框说：

```
'Building workspace' has encountered a problem

Errors occurred during the build.
Errors running builder 'Android Pre Compiler' on project 'XXX'
java.lang.NullPointerException 
```

我在带有 Android 项目构建目标 4.0.3（API 级别 15）的 Mac 上运行 Eclipse，并且我安装了以下版本的东西

*   日食 - 3.7.2
*   Android 开发工具 - 21.0.1
*   Android SDK - 最多 17 个

我已经尝试了一些事情，比如开始一个全新的工作区，安装这个“颠覆 SVN JDT Ignore Extensions”，升级所有东西，确保我的源文件夹（或其他任何地方）中没有任何没有扩展名的文件，确保我的 Java 编译器是 1.6，然后将其关闭再打开。

**编辑**

这是 Eclipse 错误日志中针对此问题的堆栈跟踪：

```
java.lang.NullPointerException
at com.android.ide.eclipse.adt.internal.build.builders.PreCompilerBuilder.build(PreCompilerBuilder.java:673)
at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
at org.eclipse.core.internal.resources.Workspace.buildInternal(Workspace.java:513)
at org.eclipse.core.internal.resources.Workspace.build(Workspace.java:432)
at org.eclipse.ui.actions.BuildAction$1.runInWorkspace(BuildAction.java:305)
at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

和会话数据：

```
eclipse.buildId=M20120208-0800
java.version=1.6.0_37
java.vendor=苹果公司
BootLoader 常量：OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
框架参数：-keyring /Users/onemick/.eclipse_keyring -showlocation
命令行参数： -os macosx -ws cocoa -arch x86_64 -data /Projects/_EclipseWorkspace -keyring /Users/onemick/.eclipse_keyring -showlocation

```

**另一个编辑**

好的，所以更多的搜索将我带到了[这个页面](http://code.google.com/p/android/issues/detail?id=43057)，这表明这个问题肯定与我的项目中存在没有扩展名的文件有关 - 但是我不知道哪个文件和我一生都找不到任何在那个项目中！

如果有人能解释这个错误的含义以及我如何获得有关潜在错误的更多调试信息，我什至会很高兴。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-01-31T04:52:51.307

对于那些不想安装 ADT 预览版的人，这里描述了一种解决[方法](https://issuetracker.google.com/issues/36963089#comment54)。

> 1.  在 Eclipse 中打开项目的属性，然后打开 Resources -> Resource filters。
> 2.  单击“添加...”按钮 -> 选中“全部排除”、“文件和文件夹”、“所有子项”。在文本输入框中输入“.svn”（不带引号）。
> 3.  重新启动 Eclipse。

*我对.git*文件夹也有同样的问题，它就像一个魅力。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-01-22T11:23:12.503

我总是讨厌回答自己的问题，但这是一个真正的解决方案。

ADT 工具的 21.0.1 版本有一个错误，如果您有任何没有扩展名的文件，则该错误会阻止项目构建。对于使用带有无扩展名文件的 subversion 的用户（如我）来说，这是一个特殊的问题。

一种推荐的解决方案是安装这些“颠覆性”Eclipse 插件（帮助 > 安装新软件 > 使用您的 Eclipse 版本站点 > 展开“协作”> 选择“颠覆性 SVN JDT 忽略扩展”和“颠覆性 SVN 团队提供商”），但这并没有不适合我（我在 Indigo 上，也许在 Juno 上可以）。

解决方案是安装 Google 提供的 ADT 工具和 SDK 管理器的 21.1*预览*版。可以[在此处找到](http://tools.android.com/preview-channel)清晰的说明，您可以阅读所有背景信息，[在此处为愤怒的开发人员群发](http://code.google.com/p/android/issues/detail?id=42051)声。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-20T08:44:46.123

我刚刚重新启动了 Eclipse，问题就解决了。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-05-21T07:29:54.563

我也遇到了同样的问题，我意识到我已经关闭了另一个与我正在构建的项目相关的项目。一旦我打开它，一切都消失了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-27T05:13:11.670

可能是您关闭了“appcompact_v7”库来创建新文件。这通过打开它解决了我的问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T13:04:34.833

我遇到这个错误，并删除所有 .svn 文件，我的项目无法工作，当处理 55%

我发现这是我项目中的一个空 res 目录，我不知道它是如何运行的，但是当删除空 res 目录时，我的项目工作了，

所以，你应该检查你项目中的所有文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-09T14:43:21.230

我也遇到了同样的问题，浪费了很多时间来解决这个问题，上面给出的解决方案也对我不起作用。我通过转到 Eclipse -> 帮助 -> 检查更新，然后在更新完成后重新启动 Eclipse 解决了这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-24T08:39:36.123

如果您不小心关闭了运行项目所必需的库项目，那么只需在 Eclipse 中打开它们。这个错误必须消失。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-21T19:47:49.003

为了解决这个问题，我需要以管理员身份运行 eclipse

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-07T11:49:37.673

另一种情况：我关闭了当前项目（带有构建错误消息），丢弃了正在使用的SVN存储库，重新编译：

**构建错误**

我添加存储库位置：

**建设好！**

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-07-30T19:17:44.883

我最近遇到了这个问题，上面给出的解决方案对我不起作用。我没有任何没有扩展名的文件。碰巧的是，在从现有代码添加新项目后，出现了一个设置错误，似乎弄乱了 eclipse 的状态。之后，我尝试清理或构建的工作区中的任何项目都会出现带有 java.lang.NullPointerException 的 Android Pre-Compiler 错误。

我发现 /res 目录中的 main.xml 文件由于某种原因找不到，即使该文件在那里很多。解决方案是在 Eclipse Java 编辑面板中关闭所有打开的文件透视图，关闭所有项目，然后打开项目并打开主 xml 文件。在我这样做之后，预编译器问题就消失了。

# nhibernate - NHibernate：HqlGenerator：通过连接其他属性创建计算属性

> ID：14455020
> 
> 赞同：0
> 
> 时间：2013-01-22T09:15:04.623
> 
> 标签：nhibernate, hql, linq-to-nhibernate

我正在尝试添加一个 HqlGenerator 以允许 NHibernate 查询以下域实体上的计算属性：

```
public class User 
{
    public string FirstName { get; set; }
    public string LastName {get; set; }
    public string FullName
    {
        get { return FirstName + " " + LastName; }
    }
} 
```

我创建了一个 HQL 生成器，如下所示：

```
public class UserFullName : BaseHqlGeneratorForProperty
{
    public UserFullName()
    {
        var properties = new List<MemberInfo> { typeof(User).GetProperty("FullName") };
        SupportedProperties = properties;
    }

    public override HqlTreeNode BuildHql(MemberInfo member, Expression expression, HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
    {
        var user = visitor.Visit(expression).AsExpression();
        return treeBuilder.Concat(
            treeBuilder.Dot(user, treeBuilder.Ident("FirstName")),
            treeBuilder.Constant(" "),
            treeBuilder.Dot(user, treeBuilder.Ident("LastName"))
        );
    }
} 
```

生成器已正确连接到配置中，因为`BuildHql`当我运行查询时调试器将在方法内中断：

```
session.Query<User>().FirstOrDefault(x => x.FullName == "Aaron Janes"); 
```

然而，后来在 NHibernate 内部，抛出了一个异常：

```
NHibernate.Hql.Ast.ANTLR.QuerySyntaxException : Exception of type 'Antlr.Runtime.NoViableAltException' was thrown. [.FirstOrDefault[User](NHibernate.Linq.NhQueryable`1[User], Quote((x, ) => (String.op_Equality(x.FullName, Aaron Janes))), )] 
```

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:57:02.920

在您的 BuildHQL() 中，您多次包含子表达式“用户”。这是不可能的。你需要使用

```
var user1 = visitor.Visit(expression).AsExpression();
var user2 = visitor.Visit(expression).AsExpression(); 
```

并在 Concat 表达式中使用一次。

# javascript - 输入值在 IE 中为“未定义”

> ID：14455036
> 
> 赞同：0
> 
> 时间：2013-01-22T09:16:22.570
> 
> 标签：javascript, jquery, internet-explorer, input, undefined

刚刚在 IE9 中发现了奇怪的行为，我不知道

我有这个功能：

```
function searchProfile(fieldName, term, page, count) {
    jQuery.ajax({type:'POST',
        data:'fieldName='+fieldName+'&term='+term+'&id=${id}&page='+page+'&count='+count,
        url:'${createLink(action: 'searchProfilByName')}',
        global: false,
        success:function(data,textStatus){jQuery('#'+fieldName+'_results_div').html(data);},
        error:function(XMLHttpRequest,textStatus,errorThrown){}});
}; 
```

它被称为例如：

```
<div class="button" onclick="searchProfile('netzwerk', netzwerk_searchterm.value, 0, -1)"> 
```

chrome FF 歌剧 safari 非常出色“ `read`”

```
netzwerk_searchterm.value 
```

但在 IE9 或更早版本中会出现错误

```
"SCRIPT: 'netzwerk_searchterm' is undefined" 
```

`.val()`不是所有的浏览器都工作有人知道错误可能出在哪里吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:21:25.267

你应该使用`document.getElementById()`

像

```
searchProfile('netzwerk', document.getElementById('netzwerk_searchterm').value, 0, -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:19:21.043

假设`netzwerk_searchterm`是字段的 id，请写下：

```
<div class="button" onclick="searchProfile('netzwerk', jQuery('#netzwerk_searchterm').val(), 0, -1)"> 
```

因为你已经有了 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:20:41.303

您是否定义`netzwerk_searchterm`为变量？

我会说您正在尝试访问某些输入字段的值，因此您应该这样做：

```
$('input#netzwerk_searchterm').val() 
```

例如：

```
<div class="button" onclick="searchProfile('netzwerk', $('input#netzwerk_searchterm').val(), 0, -1)"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T09:36:13.143

事实是，您可以将“netzwerk_searchterm.value”部分从方法参数中移出并直接放入函数中，这就是我的意思：

```
 function searchProfile(fieldName, page, count) {
    var term = $('input#netzwerk_searchterm').val(); //NOTE this
    if(!term)
       term = '*'; //you can even customhouse the search term
    jQuery.ajax({type:'POST',
        data:'fieldName='+fieldName+'&term='+term+'&id=${id}&page='+page+'&count='+count,
        url:'${createLink(action: 'searchProfilByName')}',
        global: false,
        success:function(data,textStatus){jQuery('#'+fieldName+'_results_div').html(data);},
        error:function(XMLHttpRequest,textStatus,errorThrown){}});
}; 
```

这更具可读性并且适用于每个浏览器。

# database - 数据库设计：最佳方法

> ID：14455039
> 
> 赞同：1
> 
> 时间：2013-01-22T09:16:27.867
> 
> 标签：database, database-design

我不是 DBA，我不知道什么是最好的解决方案。我有两张桌子，

```
Custumers Table

CustomerId (primary key, identity)
... 
```

和

```
Suppliers Table

SupplierId (primary key, identity)
... 
```

我想存储多个电话号码和多个电子邮件。我想创建另外两个表，电子邮件和电话，并将它们与我的客户和供应商一起使用，例如

```
Telephones Table

Id
UserId (reference to SuppliersId or CustomerId)
Value
... 
```

但是，如果我将身份用作客户和供应商的关键，我肯定会遇到问题。我正在考虑做类似的事情

```
Telephones Table

Id
SuppliersId
CustumersId
Value
... 
```

但我不知道是不是一个好的设计。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:20:49.490

一个好的设计应该是

*   客户：客户表 - CustomerId、其他列
*   供应商：供应商表 - SupplierId，其他列
*   电话：电话表 - TelephoneId，其他列
*   客户电话：客户 ID、电话 ID
*   供应商电话：供应商 ID、电话 ID

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T09:22:44.260

一个想法：

```
Entity (ID (PK), {common fields})
Customer (ID (PK), EntityID (FK), {other fields})
Supplier (ID (PK), EntityID (FK), {other fields})
Telephone (ID (PK), EntityID (FK), Value) 
```

这还具有减少客户和供应商之间重复的额外优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:21:16.787

我的建议是您为表分配一个 ID，然后添加一个与 SupplierID 和 CustomerID 具有相同数据类型的引用字段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:50:58.463

其他答案是不错的初学者解决方案，但它们都有相同的基本缺陷，即客户或供应商是关系而不是他们自己的独特实体。客户不是一个人，它是您和一个人之间的关系。

事实上，一个人可以同时或随着时间的推移成为员工、客户、供应商。

客户或供应商也可以是企业，涉及许多人。

以下是正确答案：

```
PARTY
id
type {individual, organization, automated_agent}
org_name null
first_name null
last_name null

PARTY_RELATIONSHIP
from_party_id FK PARTY
type {supplier_of, customer_of, ...}
to_party_id FK PARTY
from_date
to_date null

Usage:

Insert into party (id, type, org_name) values (1, 'organization', 'Raw Steel Co');
Insert into party (id, type, f_name, last_name) values (2, 'individual', 'Davide', 'X');

-- Raw Steel Co is both a customer of and supplier to you:
Insert into party_relationship values (1, 'supplier_of', 2, getdate(), null);
Insert into party_relationship values (1, 'customer_of', 2, getdate(), null); 
```

现在，有些人因为空值而不喜欢单表继承，但该死的，它更容易使用。如果您很挑剔，请使用类表继承。

“类型”列应该是类型表的外键。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-22T09:25:35.863

你可以这样做

```
Customers: Table of customers - CustomerId, Other columns
Suppliers: Table of suppliers - SupplierId, Other columns
Telephones: Table of telephones - TelephoneId,TypeId,TypeName, other columns 
```

其中 TypeName 将是`Customers`or `Suppliers`， ant`TypeId`将是相应的 id。

# iphone - 如何为 UILocalNotification“关闭”按钮设置操作？

> ID：14455040
> 
> 赞同：1
> 
> 时间：2013-01-22T09:16:30.790
> 
> 标签：iphone, ios6, uilocalnotification

如何为 UILocalNotification "CLOSE" 操作设置操作？如果用户单击“CLOSE”按钮，此时我将停止音频播放器。是否有可能做到这一点？

我需要有关此功能的一些建议。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:18:59.140

您无法检测到关闭或查看按钮，`UILocalNotification`因为通知是由 iOS 而不是您的应用程序处理的。

如果用户决定查看通知，您的应用程序将被启动或带到前台，然后您的应用程序将收到用户用于打开应用程序的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:59:05.630

不，这是不可能的。我们没有收到任何事件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T09:31:23.390

是的，您可能需要在委托方法上创建，并且在该方法中您需要停止音频播放器，否则当您调用关闭按钮操作时，您需要停止音频播放器。

# iphone - 设置最长录制时间，同时从 iphone 应用程序录制视频

> ID：14455044
> 
> 赞同：3
> 
> 时间：2013-01-22T09:16:41.287
> 
> 标签：iphone, objective-c, media-player, avfoundation, video-capture

在我的 iPhone 应用程序中，用户可以录制视频。我想将最大允许录制时间设置为 30 秒。如何做到这一点，有什么想法吗？

使用此代码

```
-(BOOL)startCameraControllerFromViewController:(UIViewController*)controller
                             usingDelegate:(id )delegate {
   if (([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] == NO)
    || (delegate == nil)
    || (controller == nil)) {
    return NO;
   }
   UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
  cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;
 cameraUI.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];

cameraUI.allowsEditing = NO;
cameraUI.delegate = delegate;

[controller presentModalViewController: cameraUI animated: YES];
return YES;
 }

-(void)imagePickerController:(UIImagePickerController *)picker  didFinishPickingMediaWithInfo:(NSDictionary *)info {
 NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
[self dismissModalViewControllerAnimated:NO];
  if (CFStringCompare ((__bridge_retained CFStringRef) mediaType, kUTTypeMovie, 0) == kCFCompareEqualTo) {
    NSString *moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];
    NSLog(@"movie path %@",moviePath);

    if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(moviePath)) {
        UISaveVideoAtPathToSavedPhotosAlbum(moviePath, self,
                                              @selector(video:didFinishSavingWithError:contextInfo:), nil);
    }
  }
}

-(void)video:(NSString*)videoPath didFinishSavingWithError:(NSError*)error contextInfo:  (void*)contextInfo {
   if (error) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Video   Saving Failed"
                                                   delegate:nil cancelButtonTitle:@"OK"   otherButtonTitles:nil];
    [alert show];
  } else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Video Saved"   message:@"Saved To Photo Album"
                                                   delegate:self cancelButtonTitle:@"OK"   otherButtonTitles:nil];
    [alert show];
   }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:27:02.043

在配置 UIImagePickerController 进行视频录制后，您需要在 UIImagePickerController 上设置 videoMaxiumDuration 属性。

该值是以秒为单位指定的 NSTimeInterval，因此如果您想要 5 分钟的视频，则需要将其设置为 300 秒。

# r - 合并列表，同时在 R 中覆盖具有相同名称的值

> ID：14455051
> 
> 赞同：28
> 
> 时间：2013-01-22T09:17:01.543
> 
> 标签：r

我有两个带有命名元素的列表：

```
a <- list(a=1, b=2)
b <- list(b=3, c=4) 
```

我想组合这些列表，以便 a 中具有相同名称的任何元素都将被列表 b 覆盖，所以我得到了这个：

```
list(a=1, b=3, c=4) 
```

我知道我可以循环执行此操作，但是在 R 中有更紧凑的方法吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-22T12:07:08.233

R 有一个内置函数可以做到这一点`modifyList`

```
modifyList(a, b) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T09:32:35.333

这是一个简单的解决方案：

```
# create new list
newlist <- c(a,b)

# remove list element(s)
newlist[!duplicated(names(newlist), fromLast = TRUE)] 
```

结果：

```
$a
[1] 1

$b
[1] 3

$c
[1] 4 
```

* * *

一个更简单的解决方案`setdiff`：

```
c(a[setdiff(names(a), names(b))], b)

$a
[1] 1

$b
[1] 3

$c
[1] 4 
```

# ios - ActionScript 3 中 iPhone 的垂直滚动

> ID：14455052
> 
> 赞同：0
> 
> 时间：2013-01-22T09:17:02.080
> 
> 标签：ios, actionscript-3, flash, mobile, air-native-extension

我正在为 iPhone (flash builder 4.6) 开发一个项目，我必须在其中实现一个自定义滚动组件。

基本上我必须在列表渲染器中显示 Facebook 用户，滚动最初工作正常，但是当朋友数量增加（超过 300 个）时，滚动冻结（主要是点击不起作用，滑动仍然有效，我的意思是说该`MOUSE_MOVE`事件在此处无法正常工作）。

如果有人对此有任何想法，请与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:03:27.737

您需要创建（或使用现有的）使用虚拟列表的列表组件。即只创建填充屏幕所需的足够单元格（或渲染器）。然后它会在您滚动时回收渲染器。

看看这个： http: [//madskool.wordpress.com/2011/06/30/tutorial-3-lists-and-pickers/](http://madskool.wordpress.com/2011/06/30/tutorial-3-lists-and-pickers/)

或者，如果您使用的是 3D 舞台，请[访问 http://feathersui.com/examples/components-explorer/](http://feathersui.com/examples/components-explorer/)

# exception - DoctrineORMModule 和 Zend Framework 2 - 不抛出异常

> ID：14455062
> 
> 赞同：2
> 
> 时间：2013-01-22T09:17:24.503
> 
> 标签：exception, doctrine-orm, zend-framework2

我使用 DoctrineORMModule（https://github.com/doctrine/DoctrineORMModule，通过 Composer 安装）和 ZF2 来开发 Web 应用程序。

我的问题是，我没有从教义中得到例外，只有“内部 500”错误。即使

```
ini_set('display_errors', 1); 
error_reporting(E_ALL); 
```

我没有看到错误，只是“内部 500”消息（我也在 php.ini 中应用了这些设置）。“php_error_log”中也没有条目。

如果我用 try-catch-block 包围这些行，则不会捕获到异常。这发生在调用flush() 和persist() 时。显示其他 PHP 错误。

例子：

```
ini_set('display_errors', 1);
error_reporting(E_ALL);

$rel  = new \MyApp\Entity\UserRelationship();
$rel->relatingUser = $user;
$rel->relatedUser  = $friend;

try {
    $em->persist($rel);
} catch ( Exception $e ) {
    var_dump($e);
} 
```

这会导致“内部 500”错误，但我猜教义应该会引发错误。

我用谷歌搜索了几个小时，但我不知道这是默认行为，还是您必须配置教义ORMModule 来记录/抛出异常。如果有人能给我一个关于如何获得异常的提示，我将非常感激，因为这让我非常慢下来。

编辑：我可以使用persist() 和flush()，执行数据库查询，一切正常。只是如果我在实体中犯了错误并想要坚持或刷新它们，我不会得到异常。如果我在persist（）之前回显某些内容，则未显示“内部500”，但数据库未更新或任何内容。

Edit2：上面示例中的错误是错误的“mappedBy”-entry 和/或错误的命名设置器。仍然没有例外:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:08:46.070

这与教义无关。可以在您使用的任何库中引发异常。要知道，一般情况下，当你不捕获异常时，php会因为未捕获的异常而产生致命错误。我认为您在设置`display_errors`/时犯了一个错误，`error_reporting()`因为那应该显示 php 错误。

此外，Zend Framework 有一个异常处理程序来捕获运行部分中的异常。如果你在你的动作控制器中有这个代码，`Zend\Mvc`你会看到一个很好的错误页面。该框架会在很多地方捕获错误，但是如果您将这段代码没有任何`catch`内容，则不会被捕获。

# vmware - 使用Windbg调试win2008

> ID：14455070
> 
> 赞同：2
> 
> 时间：2013-01-22T09:17:53.163
> 
> 标签：vmware, windbg, windows-server-2008-r2

我用windbg+vmware调试win2008。在win2008中，我将调试配置设置为：

```
bcdedit /dbgsettings serial baudrate:115200 debugport:1
bcdedit /debug {current} ON 
```

然后，我在 VM 中使用命名管道类型的串行端口。我设置“\.\pipe\com_1”并选择“这端是服务器”和“另一端是应用程序”项。

最后，我将 Windbg 设置为：

```
-b -k com:port=\\.\pipe\com_1,baud=115200,pipe 
```

当我运行 Windbg 时，它显示：

```
Opened \\.\pipe\com_1
Waiting to reconnect... 
```

没有回应。我认为 Windbg 找到了 com_1。但不知win2008有没有反应。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:18:38.047

试试[这个](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/e1039e4f-56aa-4f1a-90bf-2662b37cd4f3)解决方案。你写：我设置“ `\.\pipe\com_1`”，应该是`\\.\pipe\com_1`

# caching - 使用 mov (%rip), %eax 等指令时使用哪个缓存？

> ID：14455076
> 
> 赞同：0
> 
> 时间：2013-01-22T09:18:22.117
> 
> 标签：caching, assembly, x86

我查看了 x86/i64 文档，找不到他们提到 (%rip) 使用指令缓存的地方。因此，我不能 100% 确定是这种情况。

我想知道我是否正确。如果是这样，我想做的是使用 RIP 访问 4KB 缓冲区，因为访问它的代码非常小（嗯，小到足以容纳额外的 4000 字节。）我知道如何用 g++ 做到这一点，但我还没有看到用 cl 做到这一点的方法。这是我非常感谢学习的另一件事！

使用 g++，我可以编写如下内容：

```
__asm__ __volatile__ (".align 4                       \n\r"
                      ".big_num:                      \n\r"
                      ".long 0x01020304               \n\r"
                      ".long 0x05060708               \n\r"
                      ".long 0x01020304               \n\r"
                      ".long 0x05060708               \n\r"
                      "movdqa .big_num(%rip), xmm0    \n\r"); 
```

Microsoft 程序中的等价物是什么？

```
__asm {
  mov big_number(%rip), xmm7
  jmp loop
big_number:
  ???
loop:
} 
```

----- 更新（2013 年 1 月 24 日）

实际上，RIP 寻址模式仅限于偏移量：

```
mov offset(%rip), reg 
```

所以它对我没有帮助，因为我需要一个索引，如下所示：

```
mov offset(%rip, %eax, 4), reg 
```

无论如何这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:09:20.827

据我了解英特尔手册所说和描述的内容，指令高速缓存用于指令本身（当它们从更远的高速缓存（L2 和 L3）并最终从主存储器中获取时）以及在指令内部编码的数据。

指令缓存可能会吸入代码中嵌入的一些数据，因为缓存行的粒度为 32/64 字节。但这可能没有用，因为您的 mov 指令正在访问的数据将通过不同的路线来自数据缓存。

总结一下：

*   L1缓存包含两个独立的部分：L1指令缓存和L1数据缓存。
*   L2 缓存是代码和数据的统一缓存。
*   L3也统一为L2。

如果 L1 IC 和 L1 DC 都从 L2 中的同一个地方拉取东西，那么您可能能够为 L2 中的一些表带来更长的寿命，但仅此而已。您将无法实际将数据移动到 L1 指令高速缓存中。

# css - 使用 Twitter Bootstrap 时，如何在 textarea 等宽中制作文本？

> ID：14455080
> 
> 赞同：25
> 
> 时间：2013-01-22T09:18:40.507
> 
> 标签：css, twitter-bootstrap

我有以下`textarea`元素：

```
<form action="/checkit" method="get">
    <textarea class="field span8" id="textarea" name="user_input" 
        rows="20">{{default_data}}</textarea>

    <input type="submit" value="Checker">
</form> 
```

我刚刚开始使用`bootstrap`，但无法找到在 textarea 等宽中制作文本的最佳方法。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-22T09:26:07.270

将以下内容添加到您的 textarea 标签应该可以

```
 style="font-family:monospace;" 
```

否则你可以像这样将它添加到你的CSS

```
#textarea{font-family:monospace;} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-22T09:32:28.960

Twitter Bootstrap 设置了许多样式功能，并且覆盖它们并不总是微不足道的。但是，对于特定元素，使用 id 选择器等相当特定的选择器很容易。在你的情况下，`textarea`元素有`id="textarea"`，所以你可以使用例如

```
<style>
#textarea { font-family: Consolas, Lucida Console, monospace; }
</style> 
```

您可以按优先顺序列出任何等宽字体序列，但将最后一个条目`monospace`（不带引号）放在最后，因为这意味着回退到浏览器的默认等宽字体。

将字体设置为等宽通常不利于可用性`textarea`，除非预期的输入可能是计算机代码、数字行或其他适合等宽渲染的文本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T10:56:02.850

在引导程序中，我们有样式：

```
input,
button,
select,
textarea {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
} 
```

在您的CSS中，您需要将其更改为：

```
#textarea { 
font-family: monospace; 
} 
```

因此，使用 id 您的 textarea 将具有更高的优先级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-09T14:39:44.797

从 Bootstrap 4 开始，使用“text-monospace”类：

```
<textarea class="field span8 text-monospace" id="textarea" name="user_input" rows="20">
  {{default_data}}
</textarea> 
```

# autocomplete - PhpStorm - 从索引中排除 forlder 但不在列表中

> ID：14455081
> 
> 赞同：3
> 
> 时间：2013-01-22T09:18:41.227
> 
> 标签：autocomplete, ide, phpstorm

如何使用索引和自动完成中的所有文件排除 forlder，但不排除项目目录列表？

[这篇文章](http://www.jetbrains.com/phpstorm/webhelp/configuring-project-structure.html)对问题没有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:33:06.687

现在不可能，[请投票支持](http://youtrack.jetbrains.com/issue/IDEA-23537)YouTrack 中的开放功能请求。

# javascript - 使用 Selenium RC 捕获浏览器

> ID：14455083
> 
> 赞同：6
> 
> 时间：2013-01-22T09:18:45.407
> 
> 标签：javascript, selenium, selenium-rc, js-test-driver, ui-testing

我想使用 BrowserStack 之类的浏览器农场运行 UI 测试。我们目前正在使用 BS 通过 JsTestDriver 运行单元测试。所以启动服务器，让 browserfarm 创建的一堆浏览器连接到 jstd 服务器，然后执行测试。

不幸的是，我无法找到一种方法来编写与 jstd 一起使用的 UI 测试（单击某个按钮、键入某些内容等）。

Selenium RC 是一个旨在进行 UI 测试的框架，但它强制使用自己的浏览器实例：Selenium 通过作为框架一部分的驱动程序启动自己的浏览器。

我想要的是将 JsTestDriver 概念与 Selenium 的 UI 测试结合起来：用 Selenium 编写测试，在 localhost 上启动 Selenium RC 服务器，让一堆浏览器连接到在 browserfarm 上启动的服务器，然后执行 UI测试。

这甚至可能吗？是否有另一种使用 JSTD 运行 UI 测试的方法？Selenium RC 是否无法捕获未使用 webdriver 启动的浏览器？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:28:29.587

从技术上讲是的，但它会受到伤害。
由于 jsTestDriver 支持[异步测试](http://code.google.com/p/js-test-driver/wiki/AsyncTestCase)，您可以在设置阶段启动（并连接到它）浏览器（使用[JavaScript](http://wiki.openqa.org/display/SRC/JSAPI)）。

“Selenium RC 是否无法捕获未使用 webdriver 启动的浏览器？” [可能不会在不久的将来](https://stackoverflow.com/questions/7766131/selenium-webdriver-via-c-sharp-how-to-connect-to-an-already-open-browser)。

# c# - WinForm运行后如何隐藏？

> ID：14455084
> 
> 赞同：5
> 
> 时间：2013-01-22T09:18:52.303
> 
> 标签：c#, .net, windows, winforms, hide

> **可能重复：**
> [启动时隐藏单一表单](https://stackoverflow.com/questions/70272/single-form-hide-on-startup)

我想在运行后隐藏我的 WinForm（不最小化）。

我用了：

```
 this.Load += new System.EventHandler(this.Form1_Load);
    private void Form1_Load(object sender, EventArgs e)
    {
        Hide();
    } 
```

但它不起作用。你能帮我做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T10:07:05.297

在表单加载覆盖中，您可以使用以下技巧之一：

1.  使表单完全透明：

    ```
    private void OnFormLoad(object sender, EventArgs e)
    {
         Form form = (Form)sender;
         form.ShowInTaskbar = false;
         form.Opacity = 0;
    } 
    ```

2.  将表格移出屏幕：

    ```
    private void OnFormLoad(object sender, EventArgs e)
    {
        Form form = (Form)sender;
        form.ShowInTaskbar = false;
        form.Location = new Point(-10000, -10000);
    } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T09:26:37.603

尝试在显示后而不是在加载后隐藏表单，使用**Shown**事件而不是**Load**事件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T09:34:54.843

您不能轻易隐藏表单，但您可以将不透明度设置为 0，例如：

```
this.Opacity = 0; 
```

如果您根本不希望用户能够看到该应用程序，请设置以下内容：

```
this.ShowInTaskbar = false; 
```

然后他们将无法在任务栏中看到表单，并且它将是不可见的。

我相信这解决了您的“无用最小化”要求？

# php - 如何将 ext js 4 中的对象数组发送到服务器端？

> ID：14455087
> 
> 赞同：1
> 
> 时间：2013-01-22T09:18:56.330
> 
> 标签：php, extjs, extjs4, extjs-mvc

我在 extjs4 MVC 工作，我一直在处理创建问题答案页面功能的任务。有 4 个问题要显示有选项。我在控制器中获得了所有选定的问题和答案。但我不知道如何发送使用模型方法来服务端。我在这一点上被卡住了。

这是我的一些控制器代码 1)

```
check:function()
    {
        console.log("Inside check function.");
        //creating objects in javascript
          var obj=new Object();
          for(var i=0;i<=5;i++)
          {
                var inputs = document.getElementsByName(i); 
                var radio = "";  
                for (var j = 0; j < inputs.length; j++) {
                    if (inputs[j].checked) {
                        name = inputs[j].name;
                        value  = inputs[j].value;
                        //obj[i].name1=name;
                        obj[i]={'questionId':name,'option':value};
                        console.log("questionId="+name +" value="+ value);
                        console.log("object name="+ obj[i].questionId+" Object value="+obj[i].option);
                    }// End of if statment
                }// End of inner for loop
          }//End of outer for loop

    }// End of check function 
```

2）这是我在萤火虫中得到了一些输出

```
questionId=1 value=Aus QbqnsController.js:39
questionId=2 value=india QbqnsController.js:39
questionId=3 value=England QbqnsController.js:39
questionId=4 value=Srilanka 
```

实际上我想使用模型类方法 save() 。但我该如何使用它。请给我一些建议。

3）这是我的模型课

```
Ext.define('Balaee.model.qb.QbqnsModel',{
    extend: 'Ext.data.Model',
    idproperty:'questionId',//fields property first position pk.
    fields: ['questionId','question','languageId','userId','creationTime','questionStatusId','keyword'],
    hasMany:{
            model:'Balaee.model.qb.QbqnsoptionModel',
            foreignKey:'questionId',
            name:'options',
        },

        proxy:
        {
            type:'ajax',
            api:
            {
                    read:'http://localhost/balaee/balaee/index.php?r=QuestionBank/qbpaper/setuseranswer',
                    create:'http://localhost/balaee/balaee/index.php?r=QuestionBank/qbpaper/setuseranswer',
            },//end of api
            reader:
            {
                    type:'json',
            },//end of reader
            writer:
            {
                    type:'json',
                    root:'records',
            },//End of writer
        }   

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:14:28.570

如果您使用 Ext MVC 并且您的问题是`model`存储在 a 中的实例`store`，您可以使用`store.sync()`它将以不同状态（添加、编辑、删除等）批量处理数据并将它们与相关存储或模型代理 url 同步，或者指定的 api url。

这具有在单个请求中发送回对象数组的好处，但是当然您需要在处理之前在服务器端将它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:33:07.870

在您的函数中，您可以使用 Ext.Ajax.request 发送它们

```
 Ext.Ajax.request({

      url: 'your_server_page.php ',
        params: { 
           Your_Object_Name  : JSON.stringify(Your_Object_Array)
       }                                        
}); 
```

# c# - 带有验证的 ASP.NET UserControl

> ID：14455088
> 
> 赞同：0
> 
> 时间：2013-01-22T09:18:58.557
> 
> 标签：c#, asp.net, user-controls

我需要通过验证创建我的 UserControl。我创建了用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyValidationControl.ascx.cs" Inherits="Labs.MyValidationControl" %>

 <asp:Label runat="server" ID="Name">Name</asp:Label>     <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="Field ''Name'' is required." ControlToValidate="TextBox3" ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
    <br/>

    <asp:Label runat="server" ID="Password">Password</asp:Label><asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
    <asp:RangeValidator runat="server"  MinimumValue="1" MaximumValue="10" Type="Integer" id="rngText" controltovalidate="TextBox2" ValidationGroup="LoginUserValidationGroup" errormessage="The value must be from 1 to 10!" />
    <br /> 
```

然后我在表单上使用 UserControl：

```
<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">

    <asp:MyValidationControl runat="server"/>
</asp:Content> 
```

当我启动我的应用程序时，我在此页面上什么也看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:13:43.233

我解决了这个问题。首先，感谢 Kiran1016。他给了我文章[http://weblogs.asp.net/scottgu/archive/2006/11/26/tip-trick-how-to-register-user-controls-and-custom-controls-in-web-config。 aspx](http://weblogs.asp.net/scottgu/archive/2006/11/26/tip-trick-how-to-register-user-controls-and-custom-controls-in-web-config.aspx)

其次，UserControl 不能在项目的根目录下。我把它放在目录“控件”中。

# ios - 设置滑块值

> ID：14455095
> 
> 赞同：3
> 
> 时间：2013-01-22T09:19:08.653
> 
> 标签：ios, objective-c, button, slider

我尝试在单击按钮后为滑块设置一个值，但它不起作用 - 滑块不移动。代码运行良好，没有错误。

它应该很简单，但我无法弄清楚。xCode 版本 4.5.2

谢谢！

* * *

这是我的代码：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *debugLabel;
@property (weak, nonatomic) IBOutlet UISlider *slider;

- (IBAction)slider:(id)sender;
- (IBAction)ButtonChangeValue:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"
@interface ViewController ()
@end

@implementation ViewController
@synthesize slider;

...

- (IBAction)slider:(UISlider *)sender {
    float value = [sender value];
    self.debugLabel.text = [NSString stringWithFormat:@"Value: %f",value];
}

- (IBAction)ButtonChangeValue:(id)sender {
    slider.value = 90;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T09:23:36.247

我认为您的问题是滑块接受 0.0 和 1.0 之间的值（默认值，用`_slider.maximumValue`and更改它们`_slider.minimumValue`）。尝试将值设置为 0.9 而不是设置 90（如果您的意思是 90%）。

如果滑块更新但没有动画，请使用：

```
[_slider setValue:0.9 animated:YES]; 
```

请注意，给定您的代码，您可能需要使用`self.slider`而不是`_slider`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T09:21:37.513

尝试使用

```
 self.slider.value = 90; 
```

代替

```
 slider.value = 90; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:27:11.287

**检查我的** [答案](https://stackoverflow.com/questions/14356528/how-to-change-a-uislider-value-using-a-single-touch/14356751#14356751)

```
- (void)viewDidLoad
{

 UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(sliderTapped:)];
    [slider addGestureRecognizer:gr];

}

 - (void)sliderTapped:(UIGestureRecognizer *)g 
    {

        UISlider* s = (UISlider*)g.view;
        if (s.highlighted)
            return; // tap on thumb, let slider deal with it
        CGPoint pt = [g locationInView: s];
        CGFloat percentage = pt.x / s.bounds.size.width;
        CGFloat delta = percentage * (s.maximumValue - s.minimumValue);
        CGFloat value = s.minimumValue + delta;
        [s setValue:value animated:YES];

        NSString *str=[NSString stringWithFormat:@"%.f",[self.slider value]];
        self.lbl.text=str;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T09:34:58.097

使用`slider.value = 90;`

你的 ViewController.h 应该是：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
     UISlider *slider;
}
@property (weak, nonatomic) IBOutlet UILabel *debugLabel;
@property (weak, nonatomic) IBOutlet UISlider *slider;

- (IBAction)slider:(id)sender;
- (IBAction)ButtonChangeValue:(id)sender;

@end 
```

并且不要忘记`@synthesize slider;`在您的 ViewController.m 中。

否则，使用`self.slider.value = 90;`或`_slider.value = 90;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-04T10:07:48.113

对于 Swift，您可以使用：

```
slider.setValue(5.0, animated: true) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T09:29:58.460

由于您使用的是界面构建器，因此首先要查看的是：UI 组件（滑块、按钮）是否连接到文件所有者中的 IBOutlets。这是此类问题的最常见来源。

然后检查滑块的最小值和最大值（默认为 0;1 - 如 rdurand 所述）。

而且 spider1983 也是正确的：由于滑块是一个属性，您可以将其寻址为 self.slider（或 _slider，但在这种情况下您不应该使用最后一个）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-25T10:25:37.217

我想 。由于您没有提到滑块的最大值和最小值，它采用默认的最大值和最小值，即 0 到 1。因此无法设置值 =90。首先像这样改变它的最大值和最小值：

```
Slider.minimumValue = 1;
Slider.maximumValue = 100; 
```

现在试试你的东西，

```
Slider.value =90; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-13T21:43:03.013

视野内

```
@State private var value1: Double = 0.9 
```

然后做参考

```
Slider(value: $value1) 
```

# mongodb - 为什么 Oozie 不使用 NoSQL（例如 HBASE、MongoDB）作为其持久性机制？

> ID：14455097
> 
> 赞同：0
> 
> 时间：2013-01-22T09:19:14.973
> 
> 标签：mongodb, hadoop, hbase, apache-zookeeper, oozie

正如 Oozie 开发人员所说，Oozie 在工作流管理中的挑战之一是其 SQL 存储，它在真正的可伸缩性方面存在已知限制。并且正在考虑用于持久性存储的替代技术（例如 zookeeper）。他们为什么不考虑使用 HBase、MongoDB 或任何其他可扩展的 NoSQL 数据库呢？

# android - 安卓地图API v2

> ID：14455107
> 
> 赞同：0
> 
> 时间：2013-01-22T09:19:37.487
> 
> 标签：android, google-maps-android-api-2

在我学习期间，我必须开发一个基于谷歌地图的应用程序，用户应该在地图上找到二维码并扫描它们。

所以我创建了一个包含 ggogle play lib 和 sdk 库的 android 应用程序。我想我已经在我的帐户谷歌控制台中使用我的计算机的 SHA1 创建了正确的 api 密钥。

**类 java**

```
package com.example.mapa;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

@SuppressLint("NewApi")
public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);
    GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
    int i=0;
    GoogleMap map=(SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

    }
   } 
```

**类 XML**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/>

</RelativeLayout> 
```

**清单.XML**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mapa"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_CORSE_LOCATION" />
<uses-feature android:glEsVersion="0x00020000" android:required="true"/>
<permission
android:name="com.example.mapa.permission.MAPS_RECEIVE"
android:protectionLevel="signature"/>
<uses-permission android:name="com.example.mapa.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission       android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps"/>
    <activity
        android:name="com.example.mapa.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="my api key"/>
</application>

</manifest> 
```

每个人都可以告诉我为什么我的地图按钮上有按钮我一直有一个白屏，有碎片或没有，地图视图也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:54:24.750

也许while循环是问题？我没有看到变化，`i`所以这似乎是一个无限循环。

尝试在没有循环的情况下获取对`GoogleMap`方法中`onResume()`的引用，例如

```
GoogleMap map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:07:59.723

我想你得到了这个[Image](http://img703.imageshack.us/img703/7049/przechwytywaniempp.png)。

目前，参考 Google Android Map Api v2 你不能在 Android 模拟器上运行 google maps v2；您必须使用设备进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:43:54.813

我不确定您是否没有故意使用您的 api 密钥更新“我的 api 密钥”值。

```
<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="my api key"/> 
```

而且我不记得在文档中看到过这个，也许你应该删除它：

```
<uses-library android:name="com.google.android.maps"/> 
```

COARSE_LOCATION 也拼写错误：

```
<uses-permission android:name="android.permission.ACCESS_CORSE_LOCATION" /> 
```

你宣布了​​两次。呵呵。=)

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# android - 自定义 EditTextPreference：无法通过 id 获取 TextView

> ID：14455109
> 
> 赞同：1
> 
> 时间：2013-01-22T09:19:45.580
> 
> 标签：android, preference, edittextpreference

我创建了一个自定义 EditTextPreference：

```
<EditTextPreference
                android:key="alert_planed_edittext_preference"
                android:title="@string/alert_planed_edittext_preference"
                android:summary="@string/alert_planed_summary_edittext_preference"
                android:dialogTitle="@string/alert_planed_dialog_title_edittext_preference"
                android:numeric="integer"
                android:layout="@layout/edit_text_preference_layout" /> 
```

自定义布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/alert_planed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dip"
        android:text="5" >
    </TextView>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6dip"
        android:layout_marginLeft="10dip"
        android:layout_marginTop="6dip" >

        <TextView
            android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@android:id/title"
            android:layout_below="@android:id/title"
            android:maxLines="2"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </RelativeLayout>

</RelativeLayout> 
```

我刚刚添加了 ID 为 alert_planed 的文本视图。

在我的偏好活动中，我试图获取新的 EditTextPreference 值并将其放入我的文本视图 alert_planed。我得到了 EditTextPreference 值，没关系。但是当我设置文本时，我得到一个空异常，告诉我 TextView 为空。

这是我的偏好代码：

```
addPreferencesFromResource(R.xml.preferences);

        mTextViewAlertPlanned = (TextView) findViewById(R.id.alert_planed);

        findPreference("alert_planed_edittext_preference").setOnPreferenceChangeListener(new OnPreferenceChangeListener()
        {

            @Override
            public boolean onPreferenceChange(
                    android.preference.Preference arg0, Object value) {

                if(value != null)
                {

                    Log.i("Preference","String.valueOf(value) ="+String.valueOf(value));

                    Log.i("Preference","mTextViewAlertPlanned ="+mTextViewAlertPlanned);

                    int myVal = Integer.parseInt(String.valueOf(value));

                    mTextViewAlertPlanned.setText(myVal);
                }
                return true;
            }
        }); 
```

如何正确获取我的 TextView（TextView 是自定义 EditTextPreference 布局的一部分）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:29:24.750

简单的膨胀你的 xml

```
LayoutInflater inflater = LayoutInflater.from(this);
View view = inflater.inflate(R.layout.custome_layout, null);

mTextViewAlertPlanned = (TextView) view.findViewById(R.id.alert_planed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T07:12:35.127

我遇到了同样的问题，对我有用的是创建一个从以下扩展的类`EditTextPreference`：

```
class CustomEditTextPreference constructor(
    context: Context,
    attrs: AttributeSet) : EditTextPreference(context, attrs) {

    lateinit var tvTitle: TextView
    lateinit var summary: TextView

    override fun onBindViewHolder(holder: PreferenceViewHolder) {
        super.onBindViewHolder(holder)
        with(holder.itemView) {
            // Here would go your ids
            tvTitle = findViewById(R.id.tv_title)
            summary = findViewById(R.id.tv_summary)
        }
    }

    // Whenever you want to change the 'summary' you call this function and pass the value as parameter
    fun changeSummary(value: String){
        summary.text = value
    }
} 
```

在`preferenceFragment`, 而不是做：

`preference.summary = newValue.toString()`

你只需调用函数： `changeSummary(newValue.toString())`

希望有效！

# validation - 区分 Laravel 中的验证错误

> ID：14455112
> 
> 赞同：0
> 
> 时间：2013-01-22T09:19:52.113
> 
> 标签：validation, laravel, laravel-4

我正在使用 Laravel 4 中非常强大的验证规则。但是，我想知道如何区分可能发生的不同验证错误。例如，如果我使用以下规则：

```
$rules = array(
  'email'  => 'required|email|confirmed',
  'email_confirmation' => 'required|email',
); 
```

我如何知道哪些验证规则/规则触发了某个字段的错误？有什么方法可以告诉我错误是由于缺少电子邮件值，电子邮件不是有效的电子邮件地址和/或电子邮件无法确认？

我对 laravel 很陌生，因为我一周前开始使用它，所以我希望有人能对此有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:29:36.050

验证实例返回的验证消息应该是了解问题所在的关键。

您可以使用以下方法访问验证器对象给出的消息：

```
$messages = $validator->messages(); // Where $validator is your validator instance.
$messages = $messages->all() 
```

这应该为您提供一个`MessageBag`对象实例，您可以使用 foreach 循环运行该实例：

```
foreach ($messages as $message) {
    print $message;
} 
```

在里面，你应该找到你的答案，即会有一条消息说：“电子邮件确认必须匹配'电子邮件'字段”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:11:16.067

您可以获得给定属性的错误消息：

`$errors = $validation->errors->get('email');`

然后遍历错误

`foreach ($errors as $error) { print $error; }`

或获取所有错误消息

`$errors = $validation->errors->all();`

然后遍历错误消息

`foreach ($errors as $error) { print $error; }`

[您可以在此处](http://laravel.com/docs/validation)查看有关 laravel 验证的更多信息

# c# - DataCache 操作 - 验证成功

> ID：14455113
> 
> 赞同：1
> 
> 时间：2013-01-22T09:19:53.660
> 
> 标签：c#, caching, azure, azure-caching, shared-cache

在 Windows Azure 共享缓存中：
假设我执行以下操作：

```
try
{
  mCache.Remove(key);
  Trace.WriteLine("removed successfully from Azure Shared Cache");
}
catch (DataCacheException e)
{
  WorkerRole.log.Info(e.ToString());
} 
```

是否可以说如果代码到达`Trace.WriteLine`命令，则操作成功完成？（否则，它会抛出`DataCacheException`.

我知道我可以注册到事件`CacheOperationCompleted`，但是我的代码可以作为测试操作成功的一个很好的替代方案吗？（用于放置/删除方法）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:30:31.173

`Remove`方法返回`boolean`标志，指示由给定标识的项目是否`key`已被删除（`true`）或没有（`false`）。

因此，如果您想检查操作结果，我建议您采用以下方法：

```
if(mCache.Remove(key))
{
    Trace.WriteLine("removed successfully from Azure Shared Cache");
} 
```

就`Put`方法而言，这可能有点复杂。

基本上，如果您的`cache.Put(key, value)`方法成功完成（没有例外），您可以假设您的项目已添加到缓存中。

但是，可以从缓存中*逐出*Azure 缓存项（这取决于缓存大小和项过期时间 - 对于共享缓存，默认项过期时间为 48 小时）

因此，为了避免任何“*意外*”，我建议缓存使用模式如下：

*   通过键从缓存中获取项目
*   如果缓存返回*Null*，则创建该项目并将其放入缓存中
*   对项目执行操作

另外作为旁注，我建议使用角色内缓存而不是共享缓存服务（主要是因为它更便宜，具有更多功能等）。

# dns - 如何为 Elastic Beanstalk 应用程序设置自定义 DNS 名称

> ID：14455122
> 
> 赞同：1
> 
> 时间：2013-01-22T09:20:15.873
> 
> 标签：dns, amazon-web-services, amazon-elastic-beanstalk

我有一个 Beanstalk 应用程序，默认情况下它有一个 app_name.elasticbeanstalk.com 域名。

我想要一个像 www.app_name.com 这样的域名，可以通过 bowser 访问，并采取以下步骤。

1.  注册域名 app_name.com
2.  设置`www.app_name.com`为 ELB 的公共 DNS 的 CNAME。

这样，我就可以通过浏览器访问www.app_name.com了。但是，一旦浏览器被加载，URL 突然变为 app_name.elasticbeanstalk.com

我不想`app_name.elasticbeanstalk.com`向任何人展示。我可以只使用 www.app_name.com 吗？如何？

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T21:31:03.287

您可以使用[Route53](http://aws.amazon.com/route53/)和[CloudFormation](http://aws.amazon.com/cloudformation/)来做到这一点。为此，您将使用 CloudFormation 模板中的 Elastic Beanstalk 资源来创建您的 Elastic Beanstalk 堆栈。您还可以使用 Route53 资源来创建所需的域名。然后，在您的 Route53 资源中，您将创建一个映射到您的 Elastic Beanstalk 端点的别名。

这可能看起来像：

```
"Resources" : {
  "DNS" : {
    "Type" : "AWS::Route53::RecordSetGroup",
    "Properties" : {
      "HostedZoneName" : "example.com",
      "Comment" : "CNAME alias targeted to Elastic Beanstalk endpoint.",
      "RecordSets" : [
        {
          "Name" : "example.example.com",
          "Type" : "CNAME",
          "TTL"  : "900",
          "ResourceRecords" : [{ "Fn::GetAtt" : ["sampleEnvironment","EndpointURL"] }]
        }]
    }
  },

   "sampleApplication" : {
     "Type" : "AWS::ElasticBeanstalk::Application",
     "Properties" : {
       "Description" : "AWS Elastic Beanstalk Ruby Sample Application",
       "ApplicationVersions" : [{
         "VersionLabel" : "Initial Version",
         "Description" : "Version 1.0",
         "SourceBundle" : {
           "S3Bucket" : { "Fn::Join" : ["-", ["elasticbeanstalk-samples", { "Ref" : "AWS::Region" }]]},
           "S3Key" : "ruby-sample.zip"
         }
       }],
       "ConfigurationTemplates" : [{
         "TemplateName" : "DefaultConfiguration",
         "Description" : "Default Configuration Version 1.0 - with SSH access",
         "SolutionStackName" : "64bit Amazon Linux running Ruby 1.9.3",
         "OptionSettings" : [{
           "Namespace" : "aws:autoscaling:launchconfiguration",
           "OptionName" : "EC2KeyName",
           "Value" : { "Ref" : "KeyName" }
         }]
       }]
     }
   },
   "sampleEnvironment" : {
     "Type" : "AWS::ElasticBeanstalk::Environment",
     "Properties" : {
       "ApplicationName" : { "Ref" : "sampleApplication" },
        "Description" :  "AWS Elastic Beanstalk Environment running Ruby Sample Application",
        "TemplateName" : "DefaultConfiguration",
        "VersionLabel" : "Initial Version"
     }
   }
 }, 
```

[可以在此处](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/)找到有关使用 CloudFormation 资源的更多信息，并且可以在[此处](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html)找到示例模板

CloudFormation 使与资源的动态交互变得非常简单和干净……更不用说完全脚本化了 :)

# c# - 如何在 windows xp 的上下文菜单中添加图标？

> ID：14455129
> 
> 赞同：4
> 
> 时间：2013-01-22T09:20:30.667
> 
> 标签：c#, windows-xp, registry, shell-extensions

> **可能重复：**
> [为所有桌面快捷方式（Windows 资源管理器）设置自定义右键单击上下文菜单项的图标](https://stackoverflow.com/questions/3681032/set-icon-for-custom-right-click-context-menu-item-for-all-desktop-shortcuts-win)

![上下文菜单](../Images/a25a6572e86b9eda52a43ae5ff42a5f3.png)

我已经在 Windows XP 中成功创建了上下文菜单，我想将图标添加到上下文菜单中，如图所示。我已经阅读了有关上下文菜单的文献，但失败了。你能帮助我吗？谢谢你。

```
private void registryMenuContextFolder(string menuName, string pathApp, string pathIcon)

{

        try
        {

            RegistryKey _key = Registry.ClassesRoot.OpenSubKey("Folder\\Shell", true);

            RegistryKey _keyFolder = _key.CreateSubKey(menuName);
            if (_keyFolder != null)
            {
                _keyFolder.SetValue("Icon",Application.ExecutablePath +",0");

            }
            RegistryKey _keyCmd = _keyFolder.CreateSubKey("Command");
            if (_keyCmd != null)
            {
                _keyCmd.SetValue("", pathApp);
            }
            _keyCmd.Close();
            _keyFolder.Close();
            _key.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

# android - 从列表中选择应用程序并将输入的数据保存到数据库“mysqlite”时如何弹出对话框？

> ID：14455137
> 
> 赞同：0
> 
> 时间：2013-01-22T09:20:43.957
> 
> 标签：android, android-layout

我想选择一个显示在列表中的应用程序，然后在选择其中任何一个时出现一个对话框，提示用户输入与该特定应用程序相关的密码，然后将密码保存到数据库“mysqlite” "

以下是我的代码，我想知道的是我需要更改/添加到我拥有的代码以实现此目的？

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <ListView
        android:id="@+id/listapps"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</RelativeLayout> 
```

爪哇：

```
package com.example.androidproject;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.util.Log;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class PasscodeLock extends Activity {
    private ListView lView;
    private ArrayList results;
    List<ResolveInfo> list;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_passcode_lock);

        results = new ArrayList();
        lView = (ListView) findViewById(R.id.listapps);
        PackageManager pm = this.getPackageManager();

        Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);

        list = pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
        for (ResolveInfo rInfo : list) 
        {
            results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
            Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
        }
        lView.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, results));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.activity_passcode_lock, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:57:21.070

首先，在我看来，您已经使用*lView.setAdapter*填充了列表，但实际上并没有添加允许选择用户选择的功能。

另一件事是，通常首选 Activity 是*ListActivity*而不是 Activity，但这当然取决于实现，因为您可能没有全屏 ListView。

尽管如此，您可以像这样添加*OnItemClickListener*：

```
public class PasscodeLock extends Activity implements OnItemClickListener(){
   ....
} 
```

这将触发您添加另一个名为 onItemClick 的函数，您将在其中添加代码以调用提示用户输入密码的对话框

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
   //call dialog
} 
```

关于如何创建该对话框，我不确定，因为我创建的对话框只是为了向用户显示消息。

# asp.net-mvc - 如何在 MVC3 Razor 中禁用 DropDownListFor？

> ID：14455141
> 
> 赞同：8
> 
> 时间：2013-01-22T09:20:55.883
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html.dropdownlistfor

我有这种工作和平的代码，它显示在我的 MVC3 Razor Web 应用程序中填充一个 DropDownList。

```
 @Html.DropDownListFor(x => x.ReminderTime,
            new SelectList(Model.RemindersList, "Item1 ", "Item2")) 
```

我需要保留 DropDownList 填充但禁用它，因此用户无法选择列表中的值。

你能指出我正确的方向吗？请给我一个代码示例。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T09:23:15.837

像这样，通过指定 HTML 属性。[DropDownListFor](http://msdn.microsoft.com/en-us/library/ee703436%28v=vs.108%29.aspx)

```
@Html.DropDownListFor(
    x => x.ReminderTime,
    Model.RemindersList,
    new { disabled = "disabled" }
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:41:10.773

我的解决方案感谢 Ravi hit

```
 @Html.DropDownListFor(x => x.ReminderTime,
                 new SelectList(Model.RemindersList, "Item1 ", "Item2"), new { disabled = "disabled" }) 
```

# sorting - 如何在 Cassandra 中按计数器排序？

> ID：14455145
> 
> 赞同：1
> 
> 时间：2013-01-22T09:21:10.097
> 
> 标签：sorting, cassandra, counter

假设我有一个论坛软件，我想按照它的浏览量对主题进行排序。视图将存储在计数器中。

在关系数据库方面有经验，我认为这很容易解决，但事实并非如此。我曾考虑过创建一个大行，其中的列是计数器（因此被排序），但由于单行只能存储在单个节点上，这并不可行（超过了使用 Cassandra 的要点）。

如何按 Cassandra 中的计数器列排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:18:06.503

你不能对大数据进行排序。这是基本假设之一。

您可以在 cassandra 上进行排序的唯一内容是 cassandra 用于存储其数据的内容 - 行键和列键。

从普通 SQL 迁移到 NoSQL，您必须放弃能够对数据进行排序/连接的概念。这只是（通常）在大数据实现中是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T15:20:31.070

要更新这个问题：Korya 是正确的，您不能假设所有具有 BigData 性质的 NoSQL 都无法排序（MongoDB 可以排序并且它是 NoSql）。

关于 Cassandra 本身：您可以在复合键中的分区键之后对主键的任何给定元素进行排序：

例子： `Primary Key ((A),B,C,D);`

A 是您的分区键。B、C、D 是复合键的一部分，现在可以按 ASC（默认）或 DESC 排序。如果你想要最晚的东西（即时间），那么你可以在你的模式中指定它： `WITH CLUSTERING ORDER BY (media_type_id ASC,media_id ASC);`

至于关于计数器的问题：您不能在 cassandra 内对计数器进行排序，因为计数器需要是 KEY 的一部分，并且密钥是唯一的。

正如 Martin 所指出的，eBay 的白页示例所引用的解决方案解释说，使用两个表来跟踪。

# recursion - 为什么这个递归 MyFunc[n_] := MyFunc[n] = 2; 结尾？

> ID：14455146
> 
> 赞同：1
> 
> 时间：2013-01-22T09:21:11.000
> 
> 标签：recursion, wolfram-mathematica, iteration

我不明白，为什么这个递归结束：

```
In[27]:= MyFunc[n_] := MyFunc[n] = 2;
MyFunc[3]

Out[28]= 2 
```

不应该是无止境的吗

```
MyFunc[3]
MyFunc[3] = 2
(MyFunc[3] = 2) = 2 
```

等等？

为什么会这样

```
MyFunc[n_] := MyFunc[n];
MyFunc[3]

During evaluation of In[31]:= $IterationLimit::itlim: Iteration limit of 4096 exceeded. >>

Out[33]= Hold[MyFunc[3]] 
```

导致“迭代”限制错误，而不是递归限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:42:17.017

我的另一个回答掩盖了一些重要的细节。这是第二个，我希望更好的一个：

`SetDelayed`有属性`HoldAll`，`Set`有属性`HoldFirst`。所以，你的定义

```
MyFunc[n_] := MyFunc[n] = 2; 
```

存储时不评估任何部分。仅当您调用它时，*例如* `MyFunc[3]`rhs 才被评估，在这种情况下为涉及`Set`,的表达式`MyFunc[3] = 2`。由于`Set`具有属性`HoldFirst`，因此该规则与其第一个参数（*即*lhs）一起存储，但未计算。在这个阶段，不重新评估表达式`MyFunc[3]`的 lhs 。`Set`但如果是这样，Mathematica 将找到规则`MyFunc[3] = 2`并计算结果`MyFunc[3]`，`2`而不使用 lhs 规则`MyFunc[n_]`。

你的第二个定义，*即*

```
MyFunc[n_] := MyFunc[n]; 
```

也存储未评估。但是，当您调用函数时，*例如* `myFunc[3]`rhs 会被评估。rhs 评估为，`MyFunc[3]`或者，如果你愿意，另一个调用`MyFunc`. 在`MyFunc[3]`Mathematica 的评估过程中找到存储的重写规则`MyFunc[n_] := MyFunc[n]`并应用它。反复。请注意，Mathematica 将此视为迭代而不是递归。

我并不完全清楚评估表达式的 lhs 可能实际上意味着什么。当然，像这样的调用`MyFunc[3+4]`实际上会导致`MyFunc[7]`被评估，因为 Mathematica 贪婪地评估函数调用的参数。

事实上，当试图理解这里发生的事情时，可能更容易忘记赋值和左右两边，并记住*一切都是表达式*，例如，

```
MyFunc[n_] := MyFunc[n] = 2; 
```

只是一种写作方式

```
SetDelayed[MyFunc[n_], MyFunc[n] = 2] 
```

# verilog - Verilog 中的表达符号

> ID：14455152
> 
> 赞同：1
> 
> 时间：2013-01-22T09:21:22.967
> 
> 标签：verilog

这是一小段 Verilog 代码。我希望它返回三个相同的结果，都是 -1 的 8 位表示。

```
module trivial;

    reg we;
    reg [7:0] c;

    initial
      begin
        c = 8'd3;
        we = 1'b1;
        $display ("res(we) = %d", (we ? (-$signed(c)) / 8'sd2 : 8'd0));
        $display ("res(1)  = %d", (1'b1 ? (-$signed(c)) / 8'sd2 : 8'd0));
        $display ("res = %d", (-$signed(c)) / 8'sd2);
      end

endmodule 
```

简而言之，我拥有的标准版本（1364-2001）在第 4.1.5 节中说除法四舍五入为零，因此 -3/2=-1。它还在第 4.5 节中说，运算符符号仅取决于操作数（**编辑：但仅适用于“自我确定的表达式”；事实证明，有必要将符号标准部分与宽度部分一起阅读**）。因此，带有除法的子表达式应该不受它所使用的上下文的影响，对于涉及 $signed 的子表达式也是如此。所以结果应该都是一样的吧？

三个不同的模拟器不同意我的观点。他们中只有两个彼此同意。明显的原因是使用了无符号除法而不是我期望的有符号除法。（-3=253，253/2=126.5）

有人可以告诉我是否有任何模拟器是正确的，为什么？（见下文）我显然必须遗漏一些东西，但是请问什么？非常感谢。**编辑：见上文我所缺少的。我现在认为伊卡洛斯有一个错误，其他两个模拟器是对的**

注意：三元选择中未使用的值似乎没有任何区别，无论是有符号还是无符号。**编辑：这是不正确的，也许我在重试签名数字之前忘记保存修改后的测试**

Modelsim 的 Altera 版本：

```
$ vsim work.trivial -do 'run -all'
Reading C:/altera/12.1/modelsim_ase/tcl/vsim/pref.tcl

# 10.1b

# vsim -do {run -all} work.trivial
# Loading work.trivial
# run -all
# res(we) = 126
# res(1)  = 126
# res =   -1 
```

GPL 证书

```
GPLCVER_2.12a of 05/16/07 (Cygwin32).
Copyright (c) 1991-2007 Pragmatic C Software Corp.
  All Rights reserved.  Licensed under the GNU General Public License (GPL).
  See the 'COPYING' file for details.  NO WARRANTY provided.
Today is Mon Jan 21 18:49:05 2013.
Compiling source file "trivial.v"
Highest level modules:
trivial

res(we) = 126
res(1)  = 126
res =   -1 
```

伊卡洛斯 Verilog 0.9.6

```
$ iverilog.exe trivial.v && vvp a.out
res(we) = 126
res(1)  =   -1
res =   -1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:17:11.483

NCSIM 给出：

```
res(we) = 126
res(1)  = 126
res     =  -1 
```

但是，如果多路复用器的所有输入都已签名，我会得到：

```
$display ("res(we) = %d", (we ?   (-$signed(c)) / 8'sd2 : 8'sd0)); //last argument now signed
$display ("res(1)  = %d", (1'b1 ? (-$signed(c)) / 8'sd2 : 8'sd0));
$display ("res     = %d",         (-$signed(c)) / 8'sd2);

res(we) =   -1
res(1)  =   -1
res     =   -1 
```

请记住，如果我们对无符号数进行任何算术运算，则算术将作为无符号数完成，使用位选择时也会发生同样的情况：

```
reg signed [7:0] c;
c = c[7:0] + 7'sd1; //<-- this is unsigned 
```

在示例中，多路复用器是单行表达式的一部分，我假设这在逻辑上被展平以进行优化，因此考虑了所有参数的有符号/无符号。

# asp.net-mvc - 从 aspx 页面调用剃须刀页面

> ID：14455155
> 
> 赞同：0
> 
> 时间：2013-01-22T09:21:29.507
> 
> 标签：asp.net-mvc, razor, asp.net-4.0

我们有一个用`webforms`( `asp.net 4.0`) 创建的大项目，并且有母版页、菜单等，我们必须创建一个新项目（我们选择`MVC`，用于分离问题）但它必须集成到这个 webform 门户中。我在webforms 应用程序的解决方案一个新项目`mvc`，现在：我如何从`MVC``razor``aspx`页面（具有母版页的主页，或来自简单内容页面）？在 webforms 应用程序中，我们有一个垂直菜单，我们应该能够从这样一个菜单调用 mvc 项目中的 main razor 页面，以便从旧的 webforms 应用程序开始使用新应用程序，就像一个门户网站。如果有几种可能性可以从 aspx 页面调用剃须刀页面，它们是哪一种？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:29:52.510

阅读此内容以了解更多信息[Razor 和 Asp.net 混合模式下的网络表单](http://www.hanselman.com/blog/MixingRazorViewsAndWebFormsMasterPagesWithASPNETMVC3.aspx)

来自 soctt hansleman 邮报

> Html.RenderPartial 或 Html.RenderAction 是在视图引擎之间移动的机会。正如 Eilon Lipton 所说，局部视图或控制器动作的概念是 ASP.NET MVC 中的一流概念，但母版页是特定视图引擎的实现细节。
> 
> 您可以将共享内容放在 Partials 中，然后从任何地方调用它们。例如，根据 Eilon 的建议，假设您有这三个 WebForms 部分视图

# flash - 带有“用户名”的测验模板

> ID：14455178
> 
> 赞同：0
> 
> 时间：2013-01-22T09:23:13.377
> 
> 标签：flash, actionscript-2

我必须在 Flash 中为桌面构建测验。我正在使用一个`quiz`已经内置在 Flash 中的模板。我在. `Username`_ 我已经能够验证用户名和密码，但现在我测试时并没有通过欢迎页面。以及我需要以不同的用户名保存测验的各种迭代的结果，以便管理员以后可以看到它。我想以这样的方式保存分数，即使关闭 Flash 电影，分数也会保持不变。我通过谷歌找到了一些解决方案，但它们主要处理浏览器和网络服务器。因为我正在构建一个桌面应用程序，所以我不能使用它们。我是新手。如果有人可以请帮助我，将不胜感激。有任何想法吗？建议？`password``first frame``quiz``movie``flash`

恒河

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:40:44.610

如果您不了解它们，请不要使用其他引擎。我猜第一页看起来像这样： [插入用户名] - 输入文本 (username_input) [BUTTON] - 按钮... (button1)

你的问题不是很具体。这是一个引擎，您可以仅通过按钮运行 如果键入“admin”，单击，最后一个用户的名称将出现。如果仍然键入“admin”，请再次单击以显示最后一个用户的分数。点击计数器将重置为 0。

将其粘贴到 frame1 中：

```
click1 = 0
button1.onRelease = function() {if(username_input.text == "admin"){
if (click1 == 1) {
username_input.text = game_data.data.last_score
click1 = 0
}
username_input.text = game_data.data.inputted_username
game_data.flush
click1++
} else {game_data.data.inputted_username = username_input.text} 
```

将其粘贴到第 3 帧中？您的代码未显示...

```
onEnterFrame = function() {
if (index >= questions.length){
game_data.data.last_score = score
game_data.flush ()
gotoAndStop (2) 
```

您只是没有指定足够的内容，希望这对您有所帮助。如果您需要更多帮助，请询问或者您是否需要测验引擎，我有我自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:35:22.223

game_data.data.(variable) 是保存的数据。假设我们要保存您的分数。game_data.data.last_score = score //这会将 last_score 保存为 score 的值假设我们要加载您的分数。score = game_data.data.last_score // 这会在 last_score 的值处加载分数

game_data.data只保存在本地，使用网站API保存服务器端即Kongregate；

# internet-explorer-8 - 如何为 IE 8 制作带有无 Flash 后备的 HTML 5 视频

> ID：14455181
> 
> 赞同：4
> 
> 时间：2013-01-22T09:23:25.247
> 
> 标签：internet-explorer-8, ffmpeg, html5-video

我需要一个简单、干净、无 Flash、跨浏览器的解决方案，用于在网页中嵌入视频。我想出了下面的解决方案，并希望听到是否有人可以进一步改进它，包括：

1.  该方法可以`<object>`在缓冲视频时显示静止图像吗？
2.  有人可以验证那些有条件的评论吗？`downlevel-hidden`让`downlevel-revealed`我有点困惑:)

视频转换如下（IE 8 使用 WMV，Firefox 使用 WEBM，其余使用 H264）：

```
ffmpeg -i video.mov -b 3000k -vcodec wmv2   -acodec wmav2     -ab 320k -g 30 out.wmv
ffmpeg -i video.mov -b 3000k -vcodec libvpx -acodec libvorbis -ab 320k -g 30 out.webm 
```

标记（使用条件注释创建对 IE 8 用户的回退）：

```
<![if (!IE) | (gte IE 9)]>
<video controls="true" autoplay="true" poster="video.jpg">
  <source src="video.mov" type="video/quicktime"/>
  <source src="video.webm" type="video/webm"/>
</video>
<![endif]>

<!--[if (IE) & (lt IE 9)]>
<object classid="clsid:22d6f312-b0f6-11d0-94ab-0080c74c7e95" width="1280" height="720">
  <param name="filename" value="video.wmv"/>
  <param name="autostart" value="autostart"/>
  <param name="showcontrols" value="true"/>
  <param name="showstatusbar" value="true"/>
</object>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T06:00:40.753

我建议将`<object>`标签放在标签内`<video>`，在源代码之后。不支持 video 标签的旧浏览器（例如 IE < 9、Firefox < 3.6）会忽略它并显示其中的内容，而支持 video 的新浏览器将忽略任何内部内容（当然，源除外）。

`<object>`您还可以通过在未安装 Quicktime 的系统上的旧浏览器的标签内放置后备内容来做得更好。通常，这将是海报图像和升级浏览器的建议或下载视频文件的链接。

查看[Video for Everyone](http://camendesign.com/code/video_for_everybody)以更完整地描述其工作原理和示例。只需将 Flash 对象替换为您的 Quicktime 对象即可。（我想，如果你想*真正*彻底，你可以在 Quicktime 对象中放置一个 Flash 对象，这样在没有安装 Quicktime 的机器上的旧浏览器可能会退回到 Flash，如果他们有它。但这可能是一个非常小的人数，可能是矫枉过正。）

# python - 为什么下面的 python + pandas 代码有内存泄漏？

> ID：14455188
> 
> 赞同：0
> 
> 时间：2013-01-22T09:23:37.763
> 
> 标签：python, memory-leaks, pandas

请在下面检查我的代码。我试图在下面的程序中找到内存泄漏。

`run_before`并且`run_after`支持在函数调用之前和之后计算字典数量的函数。

我为每个日期调用 processDate ...我在每次调用后检查字典计数。字典的总数不断增加，大约有 10,000 部。仅创建本地字典。有一个全局字典，每次调用都会更新，但它不会添加新字典，至少不是 10,000 个。我不知道这本字典的数量在哪里增加。它是熊猫数据框切片的内部吗？

编辑：根据要求添加完整的课程。它依赖于其他类。我很确定其他类没有这种内存泄漏，因为泄漏只有在我介绍下面的类时才开始发生。

```
import math,logging,time
import numpy as np
import alphaCalculator,regConfig,pdb,pandas,time
import regressor
from basics import *
from matplotlib import pyplot as plt
import gc
from collections import defaultdict
from gc import get_objects

class AlphaAnalyser(alphaCalculator.AlphaCalculator):
    def __init__(self,regInfo,dateFrom=None,dateTo=None):
        alphaCalculator.AlphaCalculator.__init__(self,regInfo,dateFrom,dateTo)

        self.stockList=regInfo.stockListReg # list of stock to calc the stat on

        self.thresholdList=[-1,0,0.1,0.3,0.5,0.7] # alpha threshold it's a pct of the spread
        self.lagList=[100,600,1800,5000] # in sec

        #initialise result dictionnaries
        self.fields=(["nbPaperTrades","alpha","obj","obj2","objalpha","objalpha2"])
        for l in self.lagList:
            self.fields+=["realised_"+str(l)]

        self.results=pandas.DataFrame(columns=["date","ric","threshold"]+self.fields)
        self.results.set_index(["date","ric","threshold"],drop=False)
        self.before=defaultdict(int)
        self.after=defaultdict(int)

    def resetInfo(self,regInfo):
        self.regInfo=regInfo
        self.stockList=regInfo.stockListReg

    def getDtAlpha(self,stock,date):
        self.tickData.setDate(date)
        if stock not in self.index.refData.ix[date.date().isoformat()].ric:
            #logging.warning("[%s]: %s doesn't exist on day %s" % (__name__, stock, date.date().isoformat()))
            return()
        return(self.computeAlpha(product=stock,date=date))

    def run_before(self):
        self.before=defaultdict(int)
        for i in get_objects():self.before[type(i)]+=1

    def run_after(self):
        self.after=defaultdict(int)
        gc.collect()
        for i in get_objects():self.after[type(i)]+=1
        print("Objects which are not garbage collected: ->")
        print("Dict count diff (" + str(self.after[type({})]) + "+" + str(self.before[type({})]) + "): "+str(self.after[type({})] - self.before[type({})]))

    def processDate(self,date):
        dt1=0
        dt2=0
        if self.regInfo.regType==regConfig.RegType.INDEX_REG or self.stockList==[]:
            stockList = self.index.refData.ix[date.date().isoformat()].ric.tolist()
        else:
            stockList=self.stockList
        self.tickData.setDate(date)
        result=[]
        for stock in stockList:
            if stock not in self.index.refData.ix[date.date().isoformat()].ric:
                #logging.warning("[%s]: %s doesn't exist on day %s" % (__name__, stock, date.date().isoformat()))
                continue
            print stock

            alphaData=self.computeAlpha(stock,date) ## no dictionaries are created in this function
            if not(self.isValid):
                continue
            objData=self.computeObj(stock,date) ## no dictionaries are created in this function
            if not(self.isValid):
                continue
            nanfilter=np.isnan(alphaData["VALUES"])
            nanfilter+=np.isnan(objData["VALUES"])
            nanfilter=~nanfilter
            alphaData=alphaData["VALUES"][nanfilter]
            objData=objData["VALUES"][nanfilter]
            spread=self.index.refData.ix[date.date().isoformat(),stock]["spread"]
            paperTrades={}
            dfs=[]
            for i in range(len(self.thresholdList)):
                t=self.thresholdList[i]
                if t<0:
                    paperTrades[t]=np.repeat(True,len(alphaData))
                elif i==len(self.thresholdList)-1:
                    paperTrades[t]=(abs(alphaData)>=t*spread)
                else:
                    paperTrades[t]=(abs(alphaData)>=t*spread)*(abs(alphaData)<self.thresholdList[i+1]*spread)
                nbPaperTrades=nansum(paperTrades[t])
                sumAlpha=np.sum(abs(alphaData[paperTrades[t]]))
                sumobj=np.sum(objData[paperTrades[t]])
                sumobj2=np.sum(np.square(objData[paperTrades[t]]))
                sumoa=np.sum(objData[paperTrades[t]]-alphaData[paperTrades[t]])
                sumoa2=np.sum(np.square(objData[paperTrades[t]]-alphaData[paperTrades[t]]))
                dfs.append(pandas.DataFrame([[date,stock,t,nbPaperTrades,sumAlpha,sumobj,sumobj2,sumoa,sumoa2,]+[0.0]*len(self.lagList)],columns=self.results.columns))
                del t,nbPaperTrades,sumAlpha,sumobj,sumobj2,sumoa,sumoa2 
            for l in self.lagList:
                objData=self.computeObj(stock,date,delay=l)
                if not(self.isValid):
                    break
                objData=objData["VALUES"][nanfilter]
                for i in range(len(self.thresholdList)):
                    t=self.thresholdList[i]
                    dataIndex=paperTrades[t]
                    val=np.sign(alphaData[dataIndex])*objData[dataIndex]
                    dfs[i]["realised_"+str(l)]=nansum(val)
                del dataIndex, val, t
            self.rowResults.append(dfs)
        del alphaData, objData, nanfilter, spread, paperTrades, dfs, stockList, date

    def analyseResult(self):
        dateGen = regressor.DateGenerator(self.regInfo.indexName,self.dateFrom,self.dateTo)
        self.rowResults=[]
        for date in dateGen.getDates():
            #logging.debug("doing date "+date.date().isoformat())
            try:
                self.run_before()
                self.processDate(date) # check memory
                                self.run_after()
            except Exception:
                logging.error("Analyser can't process date "+date.date().isoformat())
        self.processFinalResult()

    def processFinalResult(self):
        if len(self.rowResults)>0:
            self.results=self.results.append(self.rowResults) 
```

# php - 刷新动态选择框而不重新加载页面

> ID：14455195
> 
> 赞同：0
> 
> 时间：2013-01-22T09:24:22.220
> 
> 标签：php, ajax, jquery-mobile

我有一个 jquery 移动应用程序，它在页面加载时从数据库中读取数据，并使用用户特定的数据（如他们最喜欢的地址）填充页面上的选择框。我已经实现了一个 ajax 脚本，它删除了运行良好的选定选项。但是我需要找到一种方法来刷新选择框而不重新加载页面。我收集 AJAX 是我需要走的路，但我不知道从哪里开始。我假设我需要重新运行读取数据库的 php 文件，然后重新运行获取返回数据并填充选择框的 javascript。

*index.php（第一部分）*

```
<?php 
$show_faves_pass=true;
$show_faves_cctr=true;
include('../includes/favourites.inc');
?> 
```

*收藏夹.inc*

```
$js_str='';

if ($show_faves_addr){

    // Postgres sql statement here

    $addr_json=json_encode($addr_rows);
    $js_str.="var fave_addresses=$addr_json;\n";
}

if ($show_faves_cctr){

    // Postgres sql statement here

    $cctr_json=json_encode($cctr_rows);
    $js_str.="var fave_costcentres=$cctr_json;\n";
}
if (strlen($js_str)>0){
    echo "<script type='text/javascript'>\n$js_str\n</script>\n";
} 
```

*index.php（第二部分）*

```
//populate favourites pickers
    function findFave(arr,key,val){
      var found=null;
      $.each(arr,function(i,v){
        if (v[key]==val){
          found=v;
        }  
      });
      return found;
    }

var pass_fave_sel=$('select#pass_fave_picker');
    $.each(fave_passengers,function(i,fave){
      pass_fave_sel.append("<option value='"+fave.passenger_details_id+"'>"+fave.passenger_nickname.replace("'","\'")+"</option>");
    });

var cctr_fave_sel=$('select#cctr_fave_picker');
    $.each(fave_costcentres,function(i,fave){
      cctr_fave_sel.append("<option value='"+fave.cost_centre_id+"'>"+(fave.cost_centre_code+" ("+fave.cost_centre_nickname+")").replace("'","\'")+"</option>");
    }); 
```

希望这一切都有意义，任何帮助都将不胜感激，提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:27:56.090

每个 jQM 元素都有自己的用于重新设置样式的刷新方法。

例如：

Listview 有一个：

```
$('#listviewID').listview('refresh'); 
```

这是一个示例：http: [//jsfiddle.net/Gajotres/AzXdT/](http://jsfiddle.net/Gajotres/AzXdT/)。这是一个从 XML 数据动态生成的列表视图。

按钮元素有：

```
$('#buttonID').button('refresh'); 
```

这是一个例子：http: [//jsfiddle.net/Gajotres/K8nMX/](http://jsfiddle.net/Gajotres/K8nMX/)

滑块有：

```
$('#sliderID').slider('refresh') 
```

**你将使用这个：**

选择菜单有：

```
$('select').selectmenu('refresh', true); 
```

现在你可以在这里看到一个模式。要刷新始终使用组件名称作为带有“刷新”参数的函数。

如果您要重新设计整个页面，您应该使用此[方法](http://jquerymobiledictionary.pl/faq.html)。

**编辑 ：**

```
 $.ajax({url: server_url,
        data: save_data,
        beforeSend: function() {
            $.mobile.showPageLoadingMsg(true);
        },
        complete: function() {
            $.mobile.hidePageLoadingMsg();
        },
        success: function (result) {
           // Here delete elements from select box
        },
        error: function (request,error) {
           // Throw an error
        }
    }); 
```

# codeigniter - HybridAuth 不断给出“用户配置文件请求失败。很可能用户未连接到提供商，他应该再次进行身份验证。”

> ID：14455199
> 
> 赞同：3
> 
> 时间：2013-01-22T09:24:23.930
> 
> 标签：codeigniter, hybridauth

我正在尝试为 facebook 实现 HybridAuth Login。但它一直给我上述错误。发生此错误后，我尝试再次将用户重定向到 facebook 登录页面，但这会导致循环。

请帮助我。这是我的代码。

```
public function login($provider)
{
    try
    {
        $this->load->model('home_model');
        $this->load->library('HybridAuthLib');
        if ($this->hybridauthlib->providerEnabled($provider))
        {
            $this->service = $this->hybridauthlib->authenticate($provider);
            if ($this->service->isUserConnected())
            {
                $user_profile = $this->service->getUserProfile();  <-- error here
                $access_credentials = $this->service->getAccessToken();
                redirect("site.com/profile/".$user_profile->identifier,"refresh");      
            } else { // Cannot authenticate user
                show_error('Cannot authenticate user');
            }
        }
    }
    catch(Exception $e)
    {
        $error = 'Unexpected error';
        switch($e->getCode())
        {
            case 0 : $error = 'Unspecified error.'; break;
            case 1 : $error = 'Hybriauth configuration error.'; break;
            case 2 : $error = 'Provider not properly configured.'; break;
            case 3 : $error = 'Unknown or disabled provider.'; break;
            case 4 : $error = 'Missing provider application credentials.'; break;
            case 5 : log_message('debug', 'controllers.HAuth.login: Authentification failed. The user has canceled the authentication or the provider refused the connection.');
             //redirect();
            if (isset($service)){
                $service->logout();
            }
            break;
            case 6 : $error = 'User profile request failed. Most likely the user is not connected to the provider and he should to authenticate again.';
                     break;
            case 7 : $error = 'User not connected to the provider.';
                     break;
        }

        if (isset($service))
        {
            $service->logout();
        }
        show_error($error);
        /*          redirect("www.facebook.com/dialog/oauth/?
        client_id=[APP_ID]
        &redirect_uri=site.com/hauth/login/Facebook
        &state=1
        &scope=publish_stream
        ","refresh");* <-- when try to use this. It generates a redirect loop from facebook to my site
    }
} 
```

# c++ - Boost shared_ptr 不会立即销毁对象

> ID：14455201
> 
> 赞同：0
> 
> 时间：2013-01-22T09:24:33.290
> 
> 标签：c++, boost, destructor, shared-ptr, smart-pointers

我正在用 C++ 开发一个贝叶斯推理采样器，它在树上传递了很多信息，并且这棵树是在智能指针（Boost 的 shared_ptr 和 weak_ptr）的帮助下实现的。

在推理期间（即运行一个较长的 C++ 函数 1-2 分钟），树发生了很大变化，创建和销毁了许多节点。

推理过程完全（100% 负载）占用处理器（一个线程，更准确地说）。由于某种原因，新内存（用于新节点）被占用，但旧内存没有被完全释放，这在 1-2 分钟的推理后导致内存溢出。

但是，如果我在推理过程中添加暂停，似乎程序会完全破坏旧对象，并且一切正常。

在我看来，原因是析构函数（或者更准确地说，它之后发生的事情，即内存释放）由于某种原因被延迟了。

请您告诉我：1）这似乎是一个真正的问题吗？2）如果是，在释放“足够的内存”时等待如何更好？什么是标准策略？

（程序在 Unix 上运行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:37:46.687

您观察到的内存问题似乎并不存在于 C++ 本身。如果 shared_ptr 释放它的内存，它会立即释放它，而不是以某种延迟的方式。但是，您的操作系统可能会在它认为合适的时候延迟“真正的”发布一段时间。在像 Windows 的“任务管理器”这样的程序中，您的程序可能会消耗越来越多的内存，而这只是操作系统为您保留的内存，但您实际上并没有占用。如果您的计算产生如此繁重的处理器负载，调度程序可能会延迟相当“不重要”的任务（如释放内存），直到有时间，以免妨碍更重要的事情，如您的计算。

然而，释放和分配内存是昂贵的。而且您似乎可以互换地释放和分配大量内存。您应该考虑通过自己的内存管理（如内存池等）或通过回收对象（即节点）本身来回收该内存，这意味着不是真正销毁它们，而是将它们返回给某个“节点池”并用新值重置它们。两者都可以与 shared_ptr 一起完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:46:05.823

听起来你的树中有循环，即它`shared_ptr`同时用于子指针和父指针，这可以防止自动树节点破坏。使用普通指针可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:32:30.307

当最后一个指向对象的 shared_ptr 被销毁时，该对象立即被删除。所以你得到的听起来很奇怪。我能想象的唯一想法是您已将垃圾收集器附加到您的实现中......否则请仔细检查所有旧对象是否被销毁。

# java - EntityManager 在尝试删除同一事务中的锁定实体时抛出 OptimisticLockException

> ID：14455202
> 
> 赞同：3
> 
> 时间：2013-01-22T09:24:38.600
> 
> 标签：java, hibernate, exception, jpa, optimistic-locking

这是我的代码：

```
 EntityManager em = JPAUtil.createEntityManager();

   try {

     EntityTransaction tx = em.getTransaction();

     try {

           //do some stuff here
           tx.begin();
           List es = em.createNamedQuery("getMyEntities", MyEntity.class).getResultList();

           for (MyEntity e : es) {
               em.lock(e, LockModeType.OPTIMISTIC);
           }

           if (es.size() != 0) {

               em.remove(es.get(0));

           }

        tx.commit

     } finally {

        if (tx.isActive()) {
            tx.rollback();
        }

     }

   } finally {

      em.close();

   } 
```

当我执行该代码时，我得到：

...

```
 ..........
Caused by: javax.persistence.OptimisticLockException: Newer version [null] of entity [[MyEntity#63]] found in database
    at org.hibernate.ejb.AbstractEntityManagerImpl.wrapLockException(AbstractEntityManagerImpl.java:1427)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1324)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:80)
    ... 23 more 
```

谁能解释一下为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T13:47:54.160

我想您`@Version`在数据库中已经有一些条目之后添加了 -annotated 列，以便为已经存在的记录创建一些空值。现在休眠无法比较版本。

我会尝试将所有空版本实体的版本列设置为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T05:45:36.087

我认为这个错误是由于我试图删除一个有锁的记录而引发的。尝试删除此行，会将版本设置为`null`，但数据库中的版本仍设置为以前的数字。`null`对于这种操作，hibernate 内核似乎认为值不可靠。

如果我必须做这种操作，我必须先释放这个实体上的锁。

任何对此有更好了解的人都必须澄清这个问题。

# sql - Oracle Apex 日历订购记录

> ID：14455208
> 
> 赞同：1
> 
> 时间：2013-01-22T09:24:54.727
> 
> 标签：sql, oracle, oracle-apex

我正在为流程实施预订工具。您可以使用库存 - 如果您想预订一天的上午和下午时段的流程正在用完。然后当显示日历时，它会带来所有现有的预订，例如显示该房间在特定时间段内不可用。

我遇到的困难是，返回的条目不是按顺序显示的，所以在“PM”插槽之后的“AM”插槽。这一切看起来都很随机，最终用户可能会感到困惑。

```
SELECT * FROM 
(
select 

query to select room 1 where slot is AM

UNION ALL

query to select room 1 where slot is PM

UNION ALL

query to select room 2 ( this room can be booked only for whole day )

)

ORDER BY slot ASC 
```

这是我使用的查询结构。它正确返回条目，但不按顺序返回。我认为这是由于嵌套的选择语句。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:00:50.910

向内部查询添加一列，并按该列对插槽进行排序，如下所示：

```
SELECT * FROM 
(
   select 'AM' time_of_day,
   query to select room 1 where slot is AM
   UNION ALL
   select 'PM' time_of_day,
   query to select room 1 where slot is PM
   UNION ALL
   select 'WHOLE' time_of_day,
   query to select room 2 ( this room can be booked only for whole day )
)
ORDER BY slot ASC, time_of_day 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:27:15.040

在对解决这个问题失去希望后，我不小心偶然发现了该问题的解决方案。基本上 Apex 日历依赖于日期列，但如果有多个记录分配给一天，那么它会以随机顺序显示它们。有些人建议添加另一列以添加一些排序，但这会产生另一层不必要的复杂性。解决方案：

```
SELECT ename, hiredate  +  rownum / 24 / 60 FROM 
(SELECT   ename, hiredate
    FROM emp
   ORDER BY ename) 
```

通过将 rownum 参数添加到日期列 Apex 可以获取记录之间的差异，并且突然间一切正常，因为它应该按照正常顺序进行。

# android - 获取屏幕的中心线并根据它对齐视图

> ID：14455210
> 
> 赞同：1
> 
> 时间：2013-01-22T09:24:57.363
> 
> 标签：android, android-layout, screen-resolution, aspect-ratio, android-windowmanager

我必须以编程方式将 ImageView 添加到 RelativeLayout，使其在中心右侧 100dp。我为特定的屏幕尺寸和分辨率做了这个，但我希望它适用于任何尺寸的手机和密度。我为此尝试如下：

代码 ：

```
 float xCord, yCord;
    float xCenter, yCenter;
    float radius;
    float angle;
    double x, y;

    TextView tv;
    RelativeLayout container;
    ImageView view;
    RelativeLayout.LayoutParams viewParams;
    DisplayMetrics metrics ;
    float density;
    int dps,pxs;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_circular_animation);

        metrics = getApplicationContext().getResources().getDisplayMetrics();
        float width = metrics.widthPixels;
        float height = metrics.heightPixels;

        tv = (TextView)findViewById(R.id.tv);
        container = (RelativeLayout)findViewById(R.id.container);

        xCenter = convertToDP(width)/2;
        yCenter = convertToDP(height)/2;
        radius = 100;
        angle = 0;

        x = xCenter + radius * Math.cos(angle * Math.PI / 180);
        y = yCenter + radius * Math.sin(angle * Math.PI / 180);

        view = new ImageView(this);
        viewParams = new RelativeLayout.LayoutParams(50,50);
        viewParams.leftMargin = (int) x;
        viewParams.topMargin = (int) y;
        view.setLayoutParams(viewParams);
        view.setImageResource(R.drawable.square);
        container.addView(view);

        tv.setText(String.valueOf(xCenter) + " " + String.valueOf(yCenter));
    }

    public int convertToDP(float px) {

        density = getApplicationContext().getResources().getDisplayMetrics().density;       
        dps = (int) ((px/density) + 0.5f);
        return dps;
    }

} 
```

我所做的是，获取屏幕尺寸和密度，然后将其除以 2 以获得中心线。一旦我有了绳子，我就使用公式在 0 度的圆周上得到点，但我没有得到正确的点。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:04:03.057

试试这个：

```
public class sampleMediaPlayer extends Activity {
    // Toast mToast;
    // int i = 0;
    // private boolean click;
    // private Camera camera;
    Handler mHandler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mainf);

    }

    @Override
    protected void onResume() {

        mHandler.postDelayed(new Runnable() {

            @Override
            public void run() {
                RelativeLayout rl = (RelativeLayout) findViewById(R.id.relativeLayout);

                float r = DPtoPX(100);
                float mScreenWidth = rl.getWidth() / 2; // DPtoPX(100);
                float mScreenHeight = rl.getHeight() / 2;// DPtoPX(100);

                for (int i = 0; i < 360; i = i + 30) {
                    addView(rl, (int) (mScreenWidth + r * Math.cos(i * Math.PI / 180F)),
                            (int) (mScreenHeight + (int) r * Math.sin(i * Math.PI / 180F)));

                }

                addView(rl, (int) mScreenWidth, (int) ((mScreenHeight)));

            }
        }, 50);

        super.onResume();
    }

    void addView(ViewGroup rl, int x, int y) {
        Log.i("NIMISH", x + " = " + y);
        ImageView CenterImage = new ImageView(this);
        RelativeLayout.LayoutParams viewParamsCenter = new RelativeLayout.LayoutParams(10, 10);
        // viewParamsCenter.addRule(RelativeLayout.CENTER_IN_PARENT);
        viewParamsCenter.leftMargin = x;
        viewParamsCenter.topMargin = y;
        CenterImage.setLayoutParams(viewParamsCenter);
        CenterImage.setImageResource(R.drawable.ic_launcher);

        rl.addView(CenterImage);
    }

    float DPtoPX(float dp) {
        Resources r = getResources();
        return TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, r.getDisplayMetrics());
    }
} 
```

**解释：**

```
 float width = metrics.widthPixels;
   float height = metrics.heightPixels; 
```

返回包括 TitleBar 和 StatusBar 在内的屏幕大小，但是当您绘制相对于 RelativeLayout 计算的图像时。因此，如果您使用高度“metrics.heightPixels”绘制图像，您将观察到图像超出屏幕。这种现象会影响真实中心的计算。

还有其他一些计算方法，但每种方法都需要在屏幕上绘制该视图。因此 onResume()( 使用处理程序) 之后的任何调用。正如你所看到的，计算标题栏高度的函数在调用表单 onResume() 时返回 0。

```
private float Correction() {
    Rect rectgle = new Rect();
    Window window = getWindow();
    window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
    int StatusBarHeight = rectgle.top;
    int contentViewTop = window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
    int TitleBarHeight = contentViewTop - StatusBarHeight;

    Log.i("NIMISH", "StatusBar Height= " + StatusBarHeight + " , TitleBar Height = " + TitleBarHeight);
    return contentViewTop;
} 
```

如果您希望用户输入 X，Y 坐标，您可以通过以下方式更改第一个程序

```
 float mScreenWidth   = DPtoPX(100);
 float mScreenHeight  = DPtoPX(100); 
```

这样做，它将参考相对布局绘制图像，因此您可以删除处理程序。

# c++ - 返回 FALSE 的 WTSQueryUserToken

> ID：14455211
> 
> 赞同：1
> 
> 时间：2013-01-22T09:24:58.410
> 
> 标签：c++, winapi, service

所以我想使用下面的这些功能从服务中执行一个流程。

*   CreateProcessAsUserW
*   WTSGetActiveConsoleSessionId
*   WTSQueryUserToken

但似乎我无法触发 CreateProcessAsUserW() ，因为 WTSQueryUserToken 以 FALSE 返回并且 ERROR_PRIVILEGE_NOT_HELD 正在窃听。

我在互联网上找到了一些线程，但这些解决方案在 Windows 7 和 Server 2008 之前。

我的代码在这里....

```
STARTUPINFOW        si = {0,};
PROCESS_INFORMATION pi = {0,};

HANDLE  hTokenNew   = nullptr;
HANDLE  hTokenDup   = nullptr;

HMODULE hModKernel32    = LoadLibrary(TEXT("kernel32.dll"));
HMODULE hModWtsapi32    = LoadLibrary(TEXT("Wtsapi32.dll"));
HMODULE hModUserEnv     = LoadLibrary(TEXT("Userenv.dll"));

auto lpfnWTSGetActiveConsoleSessionId   = reinterpret_cast<DWORD(*)(void)>(GetProcAddress(hModKernel32, "WTSGetActiveConsoleSessionId"));
auto lpfnWTSQueryUserToken              = reinterpret_cast<bool(*)(ULONG, PHANDLE)>(GetProcAddress(hModWtsapi32, "WTSQueryUserToken"));
auto lpfnCreateEnvironmentBlock         = reinterpret_cast<bool(*)(LPVOID*, HANDLE, bool)>(GetProcAddress(hModUserEnv, "CreateEnvironmentBlock"));
auto lpfnDestroyEnvironmentBlock        = reinterpret_cast<bool(*)(LPVOID)>(GetProcAddress(hModUserEnv, "DestroyEnvironmentBlock"));

LPVOID  pEnvironment    = nullptr;
DWORD   dwCreationFlag  = NORMAL_PRIORITY_CLASS;

DWORD dwSessionId = lpfnWTSGetActiveConsoleSessionId();

// FALSE Returned.
lpfnWTSQueryUserToken(dwSessionId, &hTokenNew); 

// 1314 : ERROR_PRIVILEGE_NOT_HELD
DWORD d = GetLastError();

// Since WTSQueryUserToken gives me FALSE and no token, the code below is meaningless.
DuplicateTokenEx(hTokenNew, MAXIMUM_ALLOWED, nullptr, SecurityIdentification, TokenPrimary, &hTokenDup);

si.cb           = sizeof(STARTUPINFO);
si.lpReserved   = nullptr;
si.lpReserved2  = nullptr;
si.cbReserved2  = 0;
si.dwFlags      = STARTF_USESHOWWINDOW;
si.wShowWindow  = SW_SHOW;
si.lpDesktop    = TEXT("winsta0\\default");

if(lpfnCreateEnvironmentBlock != nullptr)
{
    if (lpfnCreateEnvironmentBlock(&pEnvironment, hTokenDup, false))
    {
        dwCreationFlag |= CREATE_UNICODE_ENVIRONMENT;
    }
    else
    {
        pEnvironment = nullptr;
    }
}

if (!CreateProcessAsUserW(
        hTokenDup, 
        nullptr, 
        TEXT("D:\\MyProgram.exe"), 
        nullptr,
        nullptr, 
        false,
        dwCreationFlag,
        pEnvironment,
        nullptr, 
        &si, 
        &pi))
{
    return 0;
}

if(hTokenDup)
{
    CloseHandle(hTokenDup);
}

if (hTokenNew)
{
    CloseHandle(hTokenNew);
}

if (pi.hProcess)
{
    CloseHandle(pi.hProcess);
}

if (pi.hThread)
{
    CloseHandle(pi.hThread);
}

if (nullptr != pEnvironment)
{
    lpfnDestroyEnvironmentBlock(pEnvironment);
} 
```

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:36:59.797

根据 MSDN：“ERROR_PRIVILEGE_NOT_HELD - 调用者没有 SE_TCB_NAME 特权。”

您是否检查过您的进程是否具有 SE_TCB_NAME 权限？

# internet-explorer - 如何在 Chrome/Firefox 中打开 SharePoint 文件

> ID：14455212
> 
> 赞同：32
> 
> 时间：2013-01-22T09:24:58.323
> 
> 标签：internet-explorer, google-chrome, sharepoint, firefox

在 Internet Explorer 中，我可以直接从它们的链接打开 Sharepoint 文件，因此 Sharepoint 中的文件在我保存时会自动更新。但在 Chrome 中，它要求下载文件而不是仅仅打开它。在 Firefox 中，它可以打开文件，但仍然只是将其下载到临时文件夹然后打开它。

如何像在 Internet Explorer 中一样直接在 Chrome 或 Firefox 中打开 Sharepoint 文件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T10:19:04.040

安装 Chrome 扩展[IE Tab](https://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd?hl=en)为我完成了这项工作。

它具有自动检测 URL 的能力，因此每当我浏览到我们的 SharePoint 时，它都会模拟 Internet Explorer。最后，我可以直接从 Chrome 中打开 Office 文档。

您也可以为 FireFox 安装[IETab](https://addons.mozilla.org/en-us/firefox/addon/ie-tab/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-19T03:26:49.007

您可以按照[https://sharepoint.stackexchange.com/questions/70178/how-does-sharepoint-2013-enable-editing-of-documents-for-chrome-and-fire对链接使用基于 Web 的协议处理程序-狐狸](https://sharepoint.stackexchange.com/questions/70178/how-does-sharepoint-2013-enable-editing-of-documents-for-chrome-and-fire-fox)

基本上，只需`ms-word:ofe|u|`在指向您的 SharePoint 托管 Word 文档的链接之前添加即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-09T18:13:44.977

感谢@LyphTEC，它提供了一种非常有趣的方式来在编辑模式下打开 Office 文件！

它给了我改变`_DispEx`当用户点击文件进入文档库时调用的函数的想法。通过破解原始功能，我们可以让他们打开一个对话框（用于 Firefox/Chrome）并询问用户他/她是否想要只读或编辑文件： [![在此处输入图像描述](../Images/ea206fd4722135cb538fcb2d620e1d9a.png)](https://i.stack.imgur.com/GZSjm.png)

请参阅下面我使用的 JavaScript 代码。我的代码用于 Excel 文件，但也可以修改它以使用 Word 文档：

```
 /**
 * fix problem with Excel documents on Firefox/Chrome (see https://blog.kodono.info/wordpress/2017/02/09/how-to-open-an-excel-document-from-sharepoint-files-into-chromefirefox-in-readonlyedit-mode/)
 * @param  {HTMLElement} p the <A> element
 * @param  {HTMLEvent} a the click event
 * @param  {Boolean} h TRUE
 * @param  {Boolean} e FALSE
 * @param  {Boolean} g FALSE
 * @param  {Strin} k the ActiveX command (e.g. "SharePoint.OpenDocuments.3")
 * @param  {Number} c 0
 * @param  {String} o the activeX command, here we look at "SharePoint.OpenDocuments"
 * @param  {String} m
 * @param  {String} b the replacement URL to the xslviewer
 */
var bak_DispEx;
var modalOpenDocument; // it will be use with the modal
SP.SOD.executeOrDelayUntilEventNotified(function() {
  bak_DispEx = _DispEx;
  _DispEx=function(p, a, h, e, g, k, c, o, m, b, j, l, i, f, d) {
    // if o==="SharePoint.OpenDocuments" && !IsClientAppInstalled(o)
    // in that case we want to open ask the user if he/she wants to readonly or edit the file
    var fileURL = b.replace(/.*_layouts\/xlviewer\.aspx\?id=(.*)/, "$1");
    if (o === "SharePoint.OpenDocuments" && !IsClientAppInstalled(o) && /\.xlsx?$/.test(fileURL)) {
      // if the URL doesn't start with http
      if (!/^http/.test(fileURL)) {
        fileURL = window.location.protocol + "//" + window.location.host + fileURL;
      }
      var ohtml = document.createElement('div');
      ohtml.style.padding = "10px";
      ohtml.style.display = "inline-block";
      ohtml.style.width = "200px";
      ohtml.style.width = "200px";
      ohtml.innerHTML = '<style>'
                      + '.opendocument_button { background-color:#fdfdfd; border:1px solid #ababab; color:#444; display:inline-block; padding: 7px 10px; }'
                      + '.opendocument_button:hover { box-shadow: none }'
                      + '#opendocument_readonly,#opendocument_edit { float:none; font-size: 100%; line-height: 1.15; margin: 0; overflow: visible; box-sizing: border-box; padding: 0; height:auto }'
                      + '.opendocument_ul { list-style-type:none;margin-top:10px;margin-bottom:10px;padding-top:0;padding-bottom:0 }'
                      + '</style>'
                      + 'You are about to open:'
                      + '<ul class="opendocument_ul">'
                      + '  <li>Name: <b>'+fileURL.split("/").slice(-1)+'</b></li>'
                      + '  <li>From: <b>'+window.location.hostname+'</b></li>'
                      + '</ul>'
                      + 'How would like to open this file?'
                      + '<ul class="opendocument_ul">'
                      + '  <li><label><input type="radio" name="opendocument_choices" id="opendocument_readonly" checked> Read Only</label></li>'
                      + '  <li><label><input type="radio" name="opendocument_choices" id="opendocument_edit"> Edit</label></li>'
                      + '</ul>'
                      + '<div style="text-align: center;margin-top: 20px;"><button type="button" class="opendocument_button" style="background-color: #2d9f2d;color: #fff;" onclick="modalOpenDocument.close(document.getElementById(\'opendocument_edit\').checked)">Open</button> <button type="button" class="opendocument_button" style="margin-left:10px" onclick="modalOpenDocument.close(-1)">Cancel</button></div>';
      // show the modal
      modalOpenDocument=SP.UI.ModalDialog.showModalDialog({
        html:ohtml,
        dialogReturnValueCallback:function(ret) {
          if (ret!==-1) {
            if (ret === true) { // edit
              // reformat the fileURL
              var ext;
              if (/\.xlsx?$/.test(b)) ext = "ms-excel";
              if (/\.docx?$/.test(b)) ext = "ms-word"; // not currently supported
              fileURL = ext + ":ofe|u|" + fileURL;
            }
            window.location.href = fileURL; // open the file
          }
        }
      });
      a.preventDefault();
      a.stopImmediatePropagation()
      a.cancelBubble = true;
      a.returnValue = false;
      return false;
    }
    return bak_DispEx.apply(this, arguments);
  }
}, "sp.scriptloaded-core.js") 
```

我`SP.SOD.executeOrDelayUntilEventNotified`用来确保函数在`core.js`加载时执行。

# c# - ERROR 属性或索引器无法在此上下文中使用，因为 set 访问器不可访问

> ID：14455213
> 
> 赞同：6
> 
> 时间：2013-01-22T09:25:02.560
> 
> 标签：c#

我有以下代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using ProjectBase.Utils;

namespace EnterpriseSample.Core.Domain
{
    public class Notifikasi : DomainObject<string>, IHasAssignedId<string>
    {
        public string Name { get; set; }
        public string Description { get; set; }
        public DateTime StartDate { get; set; }
        public DateTime EndDate { get; set; }
        public DateTime CreatedDate { get; set; }
        public string CreatedBy { get; set; }
        public DateTime UpdateDate { get; set; }
        public string UpdateBy { get; set; }

        public void SetAssignedIdTo(string assignedId)
        {
            Check.Require(!string.IsNullOrEmpty(assignedId), "assignedId may not be null or empty");

            // As an alternative to Check.Require, which throws an exception, the 
            // Validation Application Block could be used to validate the following
            Check.Require(assignedId.Trim().Length == 5, "assignedId must be exactly 5 characters");

            ID = assignedId.Trim().ToUpper();
        }

        public override int GetHashCode()
        {
            return (GetType().FullName + "|" +
                    ID + "|" +
                    Name).GetHashCode();

        }
    }
} 
```

我在另一个类中使用 Notifikasi 类，但会`oNoti.ID = "12";`产生错误：

> 无法在此上下文中使用属性或索引器，因为 set 访问器不可访问。

有人可以帮我解决这个问题吗？（如果相关，我使用 ORM）。

```
INotifikasiDao dao = DaoFactory.GetNotifikasiDao();

dao.closeSession();
dao.openSession();
EnterpriseSample.Core.Domain.Notifikasi oNoti = new EnterpriseSample.Core.Domain.Notifikasi();
int no = 1;
oNoti.Name = "ETL Account History";
DateTime startDate = DateTime.Today;
DateTime expiryDate = startDate.AddDays(30);
oNoti.StartDate = startDate;
oNoti.EndDate = expiryDate;
oNoti.Description = "ACC_HIST" + startDate + "Failure";
oNoti.ID = "12"; //this is where the error happens

dao.Update(oNoti); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T09:27:29.197

您的问题缺少 的重要定义`DomainObject`，但错误消息表明该属性`ID`是这样声明的：

```
public string ID
{
    get;
    protected set;
} 
```

这意味着`ID`任何人都可以读取 的值，但它只能从内部实例`DomainObject`和派生类中设置。

使用`SetAssignedIdTo`也不是一个选项，因为它需要 5 个字符，您要分配的 ID 只有两个字符长。我假设此方法的存在能够手动将 ID 分配给通常具有自动递增键的表中的行。强制此 ID 使用 5 个字符可确保 - 在一定程度上 - 手动分配的键不会与自动创建的键发生冲突。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-25T15:27:16.620

在这样的 if 条件中检查相等性时，我遇到了这个错误：

`if (e.ChangeType = ChangeType.Update) { ... }`

注意条件中的单个等于（我想我最近做了太多 SQL 哈哈）。出现该错误可能是因为我不情愿地对具有只读访问权限的成员进行分配。添加另一个等号后，一切都很好。

# php - mysql 查询返回 0 行，即使它显示 1 条记录

> ID：14455219
> 
> 赞同：0
> 
> 时间：2013-01-22T09:25:30.143
> 
> 标签：php, mysql, join

mysql 查询返回 0 行，即使它显示找到 1 条记录。这是我的查询：

```
SELECT
  TBCE.TBCE_CourseTitle,
  TBCE.TBCE_CustomizedCourseTitle,
  TBCE.TBCE_Q1,
  TBCE.TBCE_Q2,
  TBCE.TBCE_Q3,
  TBCE.TBCE_Q4,
  TBCE.TBCE_CourseDuration_Days,
  TBCF.TBCF_CoursewareTypeID,
  TBCF.TBCF_CourseLevelID_FK
FROM tbl_epp_bp_site_class_forecast TBCF,
  tbl_epp_bp_site_class_estimation TBCE
WHERE TBCF.TBCF_SiteClassId_PK = TBCE.TBCE_SiteClassId_FK
    AND TBCF.TBCF_BPID_FK = '620'
ORDER BY TBCF.TBCF_CoursewareTypeID ASC 
```

没有找到记录，但仍然显示找到 1 条记录。

请帮我找出解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:34:34.913

false 的计数结果为一

```
echo count(false);
//output is 1 
```

我建议您为此使用 mysql_num_rows

或在不为假的计数之前使用条件

# php - 一次插入多个数据

> ID：14455223
> 
> 赞同：0
> 
> 时间：2013-01-22T09:25:40.910
> 
> 标签：php, mysql, phpmyadmin, multiple-insert

虽然这里有一些相同的问题，但我仍然想发布我自己的问题，因为我认为我已经解决了，但它不起作用。这是以下代码：

```
$i=1;
while ( $i<= 10) 
{
    $i++;
    $sql    =   "INSERT INTO job (Category, Title, Type) VALUES ('$_POST[cat]','$_POST[title]','$_POST[type]')";
} 
```

不是要一个一个地插入10个数据吗？但它只插入1个数据。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:28:13.583

您无需在此代码中插入任何内容，只需为字符串分配一个值`$sql`（并将其覆盖 10 次）。我猜你在while循环*之后执行查询。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:28:35.247

也许你只调用`mysqli_query($conn, $query)`一次，把它放在循环中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T09:31:29.360

这是我插入多个结果的方式

```
$sql = "INSERT  INTO job(category,title,type) VALUES";
for($i=0;$i<sizeof($category);$i++)
{
   if($i= sizeof($category) - 1)
    $sql. = "(".$category[$i].",".$title[$i].",".$type[$i].");"; 
   else
    $sql. = "(".$category[$i].",".$title[$i].",".$type[$i]."),"; 
}
 $mysqli->query($sql); 
```

考虑`$category,$title,$type`作为要在单个查询中插入的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T09:30:54.660

```
$mysqli = new MySQLi("host","user","pass","db_name");

for($i = 0; $i < 10; $i++)
{
  $sql = "INSERT INTO job (Category, Title, Type)
          VALUES ('" . $mysqli->real_escape_string($_POST['cat']) . "','" . $mysqli->real_escape_string($_POST['title']) . "','" . $mysqli->real_escape_string($_POST['type']) . "')";
  $mysqli->query($sql);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T09:31:14.730

```
$i=1;
$addCount=0;
while ( $i<= 10) 
{
    $i++;
    $sql    =   "INSERT INTO job (Category, Title, Type) VALUES ('$_POST[cat]','$_POST[title]','$_POST[type]')";
    if(mysql_query($sql)){
        $addCount++;
    }
}

echo "Total number of records added: ".$addCount; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T09:31:46.893

你可以这样做。您可以使用单个查询来代替运行 10 个查询

```
$i=1;

while ( $i<= 10) 
{
    $i++;
    $values[]       =   "('$_POST[cat]','$_POST[title]','$_POST[type]')";
}
$new_values =   implode(',',$values);
$sql    =   "INSERT INTO job (Category, Title, Type) VALUES $new_values"; 
```

现在您可以使用 mysqli_query 来运行它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-22T09:33:46.053

看到您每次迭代都在构建完全相同的 sql 字符串。
您的代码应该是：

 `$i=1;`
 `while ( $i<= 10)`
 `{`
    `$i++;`
    `$sql = "INSERT INTO job (Category, Title, Type)`
                 `VALUES ('{$_POST[cat]}','{$_POST[title]}','{$_POST[type]}')";`
    `mysql_query($sql);`
 `}`

注意`[]`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-22T10:43:12.817

您可以按照以下方式进行操作...

```
 $i=1;
 while ( $i<= 10) {
   mysql_query("INSERT INTO job (Category, Title, Type) VALUES('".$_POST[cat]."','".$_POST[title]."','".$_POST[type]."')");
   $i++;
} 
```

# c# - 将图像上传到 mvc3 中的数据库？

> ID：14455239
> 
> 赞同：1
> 
> 时间：2013-01-22T09:27:00.740
> 
> 标签：c#, asp.net-mvc-3

我正在使用文件上传控件并上传图像，现在我想将该图像保存到我的数据库中，我们如何在 mvc3 中做到这一点？

从网上得到下面的代码，我们可以只用这段代码将图像上传到数据库，还有什么是 ImageDB 我无法理解？

```
 [HttpPost]
    public ActionResult CreateImage(HttpPostedFileBase image)
    {
        Image newImage = new Image();
        newImage.MimeType = image.ContentType;

        var binaryReader = new BinaryReader(image.InputStream);
        newImage.Data = binaryReader.ReadBytes(image.ContentLength);
        binaryReader.Close();

        imageDB.Images.AddObject(newImage);
        imageDB.SaveChanges();

        return RedirectToAction("Index");
    } 
```

# python - 如何在 Python 中重建日志文件？

> ID：14455244
> 
> 赞同：0
> 
> 时间：2013-01-22T09:27:13.117
> 
> 标签：python

Python程序A：

```
LOG_PATH = fdoc_log + "/store_plus.log"
 FORMAT = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
 logging.basicConfig(filename=LOG_PATH, filemode = 'w', level=logging.DEBUG, format=FORMAT) 
```

bash 程序 B：

```
 mv store_plus.log store_plus.log.bk 
```

程序 A 将在后台运行并且不会停止。当程序B 删除store_plus.log 文件时，程序A 也不能写入日志。如果我想让程序 A 重建 store_plus.log，如何解决？谢谢

PS：方式：

```
 f = open(LOG_PATH, "a")
 f.close() 
```

它行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:44:24.887

一个来自[pymotw-logging](http://blog.doughellmann.com/2007/05/pymotw-logging.html)的例子，全部归功于 Doug Hellmann。

```
import glob
import logging
import logging.handlers

LOG_FILENAME = '/tmp/logging_rotatingfile_example.out'

# Set up a specific logger with our desired output level

my_logger = logging.getLogger('MyLogger')
my_logger.setLevel(logging.DEBUG)

# Add the log message handler to the logger
handler = logging.handlers.RotatingFileHandler(LOG_FILENAME, maxBytes=20, backupCount=5)

my_logger.addHandler(handler)

# Log some messages
for i in range(20):
   my_logger.debug('i = %d' % i)

# See what files are created
logfiles = glob.glob('%s*' % LOG_FILENAME)

for filename in logfiles:
   print filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:08:29.367

WatchedFileHandler 可以使用这种方式：

```
 logger = logging.getLogger('simple_example')
    logger.setLevel(logging.DEBUG)

    ch = logging.handlers.WatchedFileHandler('a_log')
    ch.setLevel(logging.DEBUG)

    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')

    ch.setFormatter(formatter)
    logger.addHandler(ch) 
```

# linux - 如何定义“wstring”？

> ID：14455251
> 
> 赞同：3
> 
> 时间：2013-01-22T09:27:36.230
> 
> 标签：linux, gcc, ubuntu, wstring

我在构建过程中遇到错误`Ubuntu`。错误如下：

```
ISO C++ forbids declaration of `wstring' with no type 
```

为了解决这个问题，我必须自己定义`wstring`。那么谁知道怎么定义`wstring`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:30:39.393

为了使用`wstring`，您必须添加`#include<string>`并且最好使用其完全限定名称`std::wstring`。

**更新：** 如果您的编译器由于某种原因不支持`std::wstring`，您可以尝试以下方法`typedef`（直接取自`bits/string_fwd.h`并调整以添加缺少的`std::`）。

```
typedef std::basic_string<wchar_t> wstring; 
```

请注意，这取决于`wchar_t`被定义，并根据[this](http://www.cplusplus.com/reference/cwchar/wchar_t/)：

> 在 C++ 中，wchar_t 是一个独特的基本类型（因此它没有在任何其他头文件中定义）。

如果您的编译器不支持，`wchar_t`据我所知，没有（简单的）方法可以定义它。

# c# - 查找子节点标题的文本 equel 一个值

> ID：14455252
> 
> 赞同：-1
> 
> 时间：2013-01-22T09:27:39.000
> 
> 标签：c#

如何`SiteMap.RootNode.ChildNames`在一行中找到标题的值 equel 'test'？我不写 linq 它不起作用。

```
 protected SiteMapNodeCollection getParentNodeTitle()
   {
        SiteMap.RootNode.ChildNames            
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:08:08.660

这应该可以解决问题：

```
var mySiteMap = new SiteMap();
/* Lots of code for populating your SiteMap here */

var nodeTitledTest = mySiteMap.RootNode.ChildNodes.Where(x => x.Title == "test").FirstOrDefault(); 
```

这将返回标题等于“test”的第一个节点，如果找不到这样的节点，则返回 null。

# android - android中wifi分析仪中的自动扫描

> ID：14455253
> 
> 赞同：0
> 
> 时间：2013-01-22T09:27:40.530
> 
> 标签：android, android-wifi

如何在特定时间后连续扫描可用 SSID 的 Wi-Fi 分析仪应用程序中执行 AUTOSCAN？那怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:37:45.897

尝试[无线扫描](https://stackoverflow.com/questions/5452940/how-can-i-get-android-wifi-scan-results-into-a-list)

现在您所要做的就是使用[警报管理器调用 onclick 功能（内容）](https://stackoverflow.com/questions/4459058/alarm-manager-example?answertab=votes#tab-top)

# android - 在重新授权期间要求用户提供登录凭据

> ID：14455254
> 
> 赞同：5
> 
> 时间：2013-01-22T09:27:41.243
> 
> 标签：android, facebook-android-sdk, facebook-authorization

我正在尝试将新的 Facebook SDK 3.0 实施到我的 Android 应用程序中，但遇到了问题。我遇到的问题是要求用户再次登录以授予发布（“post_to_wall”）权限，即使用户已经登录并具有读取权限。仅当用户未安装 FB 应用程序时才会发生这种情况。如果他安装了 FB 应用程序，则只要求他授予权限。

这就是我实现登录的方式：

```
public void login(Activity activity) {
    Session session = Session.getActiveSession();

    if (session == null || !session.isOpened()) {
        openActiveSession(activity, true, sessionStatusCallback);
    }
}

private Session openActiveSession(final Activity activity, final boolean allowLoginUI, final StatusCallback callback) {
    return openActiveSession(activity, allowLoginUI, new OpenRequest(activity).setCallback(callback));
}

private Session openActiveSession(final Context context, final boolean allowLoginUI, final OpenRequest openRequest) {
    Session session = new Builder(context).setApplicationId(FACEBOOK_APPLICATION_ID).build();
    if (SessionState.CREATED_TOKEN_LOADED.equals(session.getState()) || allowLoginUI) {
        Session.setActiveSession(session);
        session.openForRead(openRequest);
        return session;
    }
    return null;
} 
```

这是回调的调用方法：

```
public void call(final Session session, final SessionState state, final Exception exception) {
    if (session.isOpened()) {
        if (state.equals(SessionState.OPENED_TOKEN_UPDATED)) {
            // code if new permissions have been granted
        } else {
            // code for login
        }
    } else if (session.isClosed()) {
            // code for user canceled login
        } else if (exception != null) {
            // code if there were errors during login 
        }
    }
} 
```

这是我添加到调用登录的活动的 onActivityResult 方法的代码：

```
Session.getActiveSession().onActivityResult(activity, requestCode, resultCode, data); 
```

这就是我要求新权限的方式：

```
Session session = Session.getActiveSession();
if (session != null && session.isOpened()) {    
    if (DONT_HAVE_PERMISSIONS) {
        Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(activity,
                            FACEBOOK_PERMISSIONS).setRequestCode(FACEBOOK_AUTHORIZE_ACTIVITY_CODE);
        session.requestNewPublishPermissions(newPermissionsRequest);
    }
} 
```

我试图找出更多关于这个问题的信息，但我只发现了一些暗示这是有意的，但我还没有找到任何具体的东西。

这是默认行为吗？如果是这样，有没有办法解决它？或者，也许我做错了什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T03:37:28.663

更新您的 SDK 版本；此问题已在[Facebook Android SDK v3.0.1](http://developers.facebook.com/android/)中得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:24:12.650

查看 facebook 的源代码，我认为应该可以开始尝试直接获取权限，因为登录和权限类派生自同一个 AuthorizationRequest 类，而 AuthorizationRequest 类完成所有工作，就像所有工作一样。Session.NewPermissionsRequest 类只是创建了一些私有方法，在 AuthorizationRequest 类中公开，就是这样！他们还不如让我们直接访问 AuthorizationRequest。新的 facebook API 似乎没有任何形式的“OnFailed/OnSuccess”回调，所以我最终有一个状态机来记住启动 facebook 的目标（登录、权限、获取朋友列表......），并且我在哪一步。

我没试过我说的。如果我这样做，我会更新答案。如果您尝试直接启动 Session.NewPermissionsRequest 而无需登录，请告诉我！

**更新**

正如我上面解释的那样，我只要求提供一次凭据。

1.  转到 src/com/facebook/Sessions.java
2.  在第 862 行你会发现

    ```
    private static Session openActiveSession(Context context, boolean allowLoginUI, OpenRequest openRequest) 
    ```

3.  使其成为公共功能并保存。

现在而不是创建 Session.NewPermissionsRequest 对象。制作 Session.OpenRequest

```
 permisions = new ArrayList<String>();
        permisions.add("user_photos");
        permisions.add("friends_photos");
        Session.NewPermissionsRequest request = new Session.NewPermissionsRequest(
                activity, permisions);
        request.setCallback(helper);

        if (Session.getActiveSession() != null)
            Session.getActiveSession().requestNewReadPermissions(request);
        else {
            Session.OpenRequest orequest = new Session.OpenRequest(activity);
            orequest.setPermissions(permisions);
            orequest.setCallback(helper);
                            // its now public so you can call it
            Session.openActiveSession(act, true, request);
        } 
```

现在确保你设置了一个回调，一个重要的原因

```
@Override
public void call(Session session, SessionState state, Exception exception) {
    if (state.isClosed()) {
                    // we are doing unofficial stuff so we loose guarantees.
                    // Set the active session to null if we logout or user cancels
                    // logging in. If you don't do this, the second time it will result
                    // in a crash.
        Session.setActiveSession(null);
    }
} 
```

现在它将直接要求所有权限并一次性登录。

# javascript - Extjs 4如何在商店窗口网格中显示选定的行

> ID：14455257
> 
> 赞同：1
> 
> 时间：2013-01-22T09:27:53.080
> 
> 标签：javascript, model-view-controller, extjs4

我有问题如何将选定的行从窗口显示到集成到列表视图的存储中，如下所示：

```
onSelectBtnSelect:function(oBtn){
     var row = this.getContactsGrid().getSelectionModel().getSelection()[0].get('first_name');
     var store = Ext.create('Aenis.store.docmgmt.warrants.SelectedWarrants',{});
     store.insert(0,{"contactName":row});
     store.commitChanges();
     var win = oBtn.up('window');
    win.close();
    console.log(store.data);
} 
```

在我执行console.log 存储数据之后`insert()`或方法之后，它没有向我显示我的lsitview 中添加的元素。我需要刷新我的listview。我试过了，但都给出了错误。`add()``store.reload()` `store.load()` `grid.getStore.loadData`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:35:07.657

尝试使用 store.sync() 而不是 store.commitChanges()，希望这应该有效！

巴兹

# loops - 循环进行gebish测试

> ID：14455260
> 
> 赞同：1
> 
> 时间：2013-01-22T09:28:05.340
> 
> 标签：loops, groovy, geb

我需要在 gebish 测试中使用循环。例子

```
def "refresh page with interval one min"() {
  for (int i = 0; i < 30; i++) {
    when:
      sleep 1000    
    then:
      println "=^_^="
  }
} 
```

但我什么都没有

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:52:54.963

Your loop should go inside the spock blocks,

```
when:
    30.times{
        to MyPage
        sleep 1000           
    } 
```

# c# - 使用 C# 读取 doc 和 docx 文件，而无需在服务器上安装 MS Office

> ID：14455268
> 
> 赞同：7
> 
> 时间：2013-01-22T09:28:29.727
> 
> 标签：c#, docx, doc

我正在开发一个项目（asp.net、c#、vb 2010、.net 4），我需要阅读我之前上传的 DOC 和 DOCX 文件（我已经完成了上传部分）。棘手的部分是我没有在服务器上安装 MS Office 并且我无法使用它。

是否有任何公共库可以包含在我的项目中而无需安装任何东西？两个文档都非常简单：

```
NUMBER TAB STRING  
NUMBER TAB STRING  
NUMBER TAB STRING  
... 
```

我需要为每一行（段落）提取数字和字符串。

有人可以帮忙吗？我应该再次重申，我受到限制，无法在服务器上安装任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:35:25.217

我们现在可以使用开源的[NPOI](https://archive.codeplex.com/?p=npoi)（Apache POI 的 .NET 端口）库，它还支持 docx、xls 和 xlsx。DocX 也是另一个用于创建 word 文档的开源库。

对于 DOCX，我建议[使用 Open XML API](http://msdn.microsoft.com/en-us/library/bb656295%28office.12%29.aspx)，虽然微软开发了**Open XML**来通过与此 API 通信的 XML 文件来创建办公文件，但最新的 2.5 版本是在 5 年前的 2013 年发布的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-05T11:49:27.677

你可以使用[Code7248.word_reader.dll](https://sourceforge.net/p/word-reader/wiki/Home/)

下面是如何使用 Code7248.word_reader.dll 的示例代码

在您的项目中添加对此 DLL 的引用并复制以下代码。

```
using System;
using System.Collections.Generic;
using System.Text;
//add extra namespaces
using Code7248.word_reader;

namespace testWordRead
{
    class Program
    {
        private void readFileContent(string path)
        {
            TextExtractor extractor = new TextExtractor(path);
            string text = extractor.ExtractText();
            Console.WriteLine(text);
        }
        static void Main(string[] args)
        {
            Program cs = new Program();
            string path = "D:\Test\testdoc1.docx";
            cs.readFileContent(path);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-29T22:22:30.507

更新：NPOI 现在支持 docx。请尝试最新版本（NPOI 2.0 beta）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-07T06:36:09.083

你可以这样做：

```
using System.IO;
using System.Text;
using Spire.Doc;

namespace ReadTextLineByLine{
    class Program {
        static void Main(string[] args) {
            //Create a Document object
            Document doc = new Document();
            //Load a Word file
            doc.LoadFromFile(@"C:\Users\Administrator\Desktop\data.docx");
            //Convert the text in Word line by line into a txt file
            doc.SaveToTxt("result.text", Encoding.UTF8);
            //Read all lines of txt file
            string[] lines = File.ReadAllLines("result.text", System.Text.Encoding.Default);
        }
    }
} 
```

# entity-framework - SaveChanges 不适用于 TPH 实体

> ID：14455272
> 
> 赞同：0
> 
> 时间：2013-01-22T09:28:39.130
> 
> 标签：entity-framework, poco, table-per-hierarchy

我将实体框架与通过 T4 (TPH).xaml (VS) 和 SSDLToSQL10.tt (VS) 模板生成 T-SQL 一起使用。我有一张桌子

```
TABLE [dbo].[Users](
    [UserId] [int] IDENTITY(1,1) NOT NULL,
    [UserName] [nvarchar](100) NOT NULL,
    [Password] [nvarchar](50) NOT NULL,
    [IsPaid] [bit] NOT NULL 
```

由于我有 2 种用户类型，因此字段 IsPaid 是鉴别器。我在我的模型中创建了 TPH。通过 .tt 生成的类是

```
public abstract partial class User
    {
        public User()
        {
        }

        public int UserId { get; set; }
        public string UserName { get; set; }
        public string Password { get; set; }

public partial class RegularUser : User
{
}

public partial class PaidUser : User
{
}

    public Container()
        : base("name=Container")
    {
        this.Configuration.LazyLoadingEnabled = false;
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<User> Users { get; set; } 
```

假设我有 id 为 3 的普通用户。我用相同的数据创建了一个新的付费用户 u 并尝试保存它。

```
using (var entities = new Container())
            {
                entities.Entry(u).State = u.UserId == 0 ? EntityState.Added : EntityState.Modified;
                entities.SaveChanges();
            } 
```

没发生什么事。而且我可以从探查器中看到查询根本不使用 IsPaid 列。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:09:55.777

您是否尝试将 Id = 3 的普通用户更改为 Id = 3 的付费用户？如果不执行直接 SQL 更新，这是不可能的。从 EF 的角度来看，实体类型是永久的。就像您使用对象时一样 - 如果不创建具有不同内存分配（=不同 Id）的全新实例，就无法将普通用户“转换”为付费用户。

如果您的业务逻辑期望普通用户可以成为付费用户，那么 EF 继承不是一个解决方案，因为它无法做到这一点。将普通用户“更改”为付费用户的唯一方法是创建付费用户的全新实例，将其插入数据库并删除普通用户的旧实例（确保您还必须修复从用户到其他实体的所有关系）。

# iphone - 在 FTP 上上传多个文件

> ID：14455276
> 
> 赞同：2
> 
> 时间：2013-01-22T09:29:00.240
> 
> 标签：iphone, ios, objective-c, xcode, ftp

我是 Objective-c 和 iOS 的新手。我正在使用 SimpleFTPSample 制作用于将文件上传和下载到 ftp 的测试应用程序。我需要在 ftp 上上传两个文件，但在 SimpleFTPSample 中您只能上传一个……那么我需要在源代码中添加什么？我想一定有一些循环，但我不知道在哪里......

这是我的代码，我添加了 for() 但我知道这是错误的，但我没有任何想法。谢谢你的帮助。

```
success = (url != nil);

NSMutableArray *listFile = [[NSMutableArray alloc] initWithCapacity:2];
[listFile addObject:[[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"1.txt"]];

[listFile addObject:[[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"2.txt"]];

for (int i= 0; i <= 1; i++ ) {

    self.filePath = [listFile objectAtIndex:i];

url = [NSURL URLWithString:@"ftp://anonymous@ftp"];

    url = CFBridgingRelease(
                            CFURLCreateCopyAppendingPathComponent(NULL, (__bridge CFURLRef) url, (__bridge CFStringRef) [self.filePath lastPathComponent], false));
    //                           );
    success = (url != nil);

    self.ftpFileStream = [NSInputStream inputStreamWithFileAtPath:_filePath];
    assert(self.ftpFileStream != nil);

    [self.ftpFileStream open];

    self.ftpNetworkStream = CFBridgingRelease(
                                              CFWriteStreamCreateWithFTPURL(NULL, (__bridge CFURLRef) url)
                                              );
    assert(self.ftpNetworkStream != nil);
    self.ftpNetworkStream.delegate = self;

    [self.ftpNetworkStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [self.ftpNetworkStream open];

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:06:49.620

我相信您可以通过其他有效的方式完成多个文件的上传任务。

1) 使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)

另一个选择是

2) [ASIHTTPRequest 的](http://allseeing-i.com/ASIHTTPRequest/)ASINetworkQueue

注意：不再维护 ASIHTTPRequest...快乐的编码:)

# javascript - 如何将这些对象放入数组中以创建恒定流？

> ID：14455278
> 
> 赞同：0
> 
> 时间：2013-01-22T09:29:05.750
> 
> 标签：javascript, flash

我正在尝试用 JavaScript 制作直升机游戏。虽然 atm 我有一架飞机从右向左飞行。我如何制作数组，所以我得到了恒定的飞机流量（x 上有 +-200 个空格的差异）。

这是我有 atm 添加飞机的代码，我根本不知道如何将数组添加到它以添加不同的飞机。

```
var airplane = new Image();
airplane.src = "images/airplane.png";
var posX = 700;
var posY;
var bmpAirplane;

function init() {
    loader.onComplete = handleComplete;
}

function handleComplete() {
    displayAirplane();  

    createjs.Ticker.setFPS(24);
    createjs.Ticker.addListener(window);
}

function displayAirplane () { 
        posY = Math.floor((Math.random()*270)+10);
        bmpAirplane = new createjs.Bitmap(airplane);
        bmpAirplane.x = posX;
        bmpAirplane.y = posY;

        stage.addChild(bmpAirplane);
        stage.update();
}

function tick()
{               
    bmpAirplane.x -=10;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:56:10.777

我假设“displayAirplane”方法是创建飞机的原因。看起来“bmpAirplane”持有对您当前飞机的引用。把它变成一个数组，用来容纳许多飞机。然后在你的 tick() 方法中，循环遍历这个数组，用飞机速度更新其中的每个飞机对象。

# java - JavaFX 2 - 窗格中包含的 JPedal

> ID：14455280
> 
> 赞同：0
> 
> 时间：2013-01-22T09:29:10.213
> 
> 标签：java, javafx-2, hbox, pane, jpedal

是否可以在 HBox JavaFX 应用程序中包含一个 JPedal PDF 查看器，并将其他内容添加到 HBox 的以下插槽中？有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:36:04.003

我不确定是否可以将 JPedal 放入 JavaFX - 没有将 Swing 放入 JavaFX 的官方机制，但您可以在线找到一些 hacks。也许这个功能会在 JavaFX8 或 9 中出现。

无论如何，如果有需求并且在商业上可行的话，JPedal 有可能在未来包含一个 JavaFXDisplay。

我们经常使用 JavaFX - 我们目前有一个在线转换器来演示 PDF 到 JavaFX 和 PDF 到 FXML 功能：[http ://www.idrsolutions.com/online-pdf-to-javafx-fxml-converter/](http://www.idrsolutions.com/online-pdf-to-javafx-fxml-converter/)

[最近，我们宣布我们已经在 J​​Pedal 的查看器中以 PageFlow 模式将 Java3D 换成 JavaFX： http](http://blog.idrsolutions.com/2013/01/announcing-the-pageflow-pdf-viewer-mode-in-javafx/) ://blog.idrsolutions.com/2013/01/announcing-the-pageflow-pdf-viewer-mode-in-javafx/

这里有一段视频：[http ://www.youtube.com/watch?v=auwNrIPt0Tc](http://www.youtube.com/watch?v=auwNrIPt0Tc)

正如已经指出的那样，网站上有一些额外的部分，比如 JPedalFX，它是一个轻量级的 JavaFX PDF 查看器。Eclipse、NetBeans 和 IDEA 的插件中还有 PDF 到 JavaFX 功能。我们希望在不久的将来用我们最近的工作来更新 JavaFX 部分：[http ://www.idrsolutions.com/javafx/](http://www.idrsolutions.com/javafx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:40:13.407

JPedal 已经支持 JavaFX，实际上很酷。

[http://www.idrsolutions.com/javafx/](http://www.idrsolutions.com/javafx/)

# latex - siunitx 表中 \toprule 和 \midrule 的问题

> ID：14455284
> 
> 赞同：7
> 
> 时间：2013-01-22T09:29:27.307
> 
> 标签：latex, lyx

在 LyX 中具有以下 siunitx 表代码，对于 \toprule 和 \midrule 的每次出现，我都会收到一条错误消息：

> 错误消息第一行末尾的控制序列从未被 \def'ed。如果你拼错了它（例如，`\hobx'), type`I' 和正确的拼写（例如，'I\hbox'）。否则继续，我会忘记任何未定义的。

我在序言中正确导入了 siunitx 。TexLive 版本：2012.10.20121205_r28449.fc18

乳胶代码：

```
\centering
\sisetup{output-decimal-marker={,}}

\begin{tabular}{ccS}
\toprule
{Dimensione finestra} & {Perdita} & {Tempo}\\
{} & {} & {(secondi)}\\
\midrule
10                & 0$\%$       & 121\\
\midrule
10                & 10$\%$       & 127\\
\midrule
10                & 20$\%$       & 176\\
\midrule
10                & 30$\%$       & 257\\
\midrule
10                & 40$\%$       & 442\\
\midrule
10                & 50$\%$       & 780\\
\midrule
10                & 60$\%$       & 1226\\
\midrule
10                & 70$\%$       & 1469\\
\midrule
10                & 80$\%$       & 1904 \\
\midrule
10                & 90$\%$       & 3234 \\
\midrule
50                & 0$\%$        & 46 \\
\midrule
50                & 10$\%$       &109 \\
\midrule
50                & 20$\%$       &146 \\
\midrule
50                & 30$\%$       &202 \\
\midrule
50                & 40$\%$       &257 \\
\midrule
50                & 50$\%$       &373 \\
\midrule
50                & 60$\%$       &544 \\
\midrule
50                & 70$\%$       &760 \\
\midrule
50                & 80$\%$       &1356 \\
\midrule
50                & 90$\%$       &6588 \\
\midrule
100                & 0$\%$       &76 \\
\midrule
100                & 10$\%$       &91 \\
\midrule
100                & 20$\%$       &109 \\
\midrule
100                & 30$\%$       &146 \\
\midrule
100                & 40$\%$       &180 \\
\midrule
100                & 50$\%$       &297 \\
\midrule
100                & 60$\%$       &414 \\
\midrule
100                & 70$\%$       &585 \\
\midrule
100                & 80$\%$       &1355 \\
\midrule
100                & 90$\%$       &4326 \\

\bottomrule
\end{tabular} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-22T10:56:00.573

添加

```
\usepackage{booktabs} 
```

解决了问题：O

# iphone - 在uiwebview中显示pdf时如何在侧面显示页面索引

> ID：14455287
> 
> 赞同：0
> 
> 时间：2013-01-22T09:29:38.377
> 
> 标签：iphone, objective-c, pdf, uiwebview

![在此处输入图像描述](../Images/b83de6a9481c911a09a3d6add6b1bf77.png)

在上图中，我们可以看到导航栏和页面索引（侧面），当用户点击屏幕一次时可以查看它们，并且在另一次点击时将从超级视图中删除。

我使用点击手势识别器添加了导航栏，但是为了显示页面索引，我不知道该怎么做，甚至不知道**如何在谷歌中搜索**？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:59:08.927

由于您已将`uiwebview`标签添加到您的问题中，我猜您正在使用 a`uiwebview`来阅读 pdf。在这种情况下，无法添加带有页面索引的侧边栏。唯一的方法是使用[Quartz](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html%23//apple_ref/doc/uid/TP30001066-CH220-CJBDCGCB)开发您自己的查看器，或者使用现有的库。

# c# - 如何以及何时使用“异步”和“等待”

> ID：14455293
> 
> 赞同：1283
> 
> 时间：2013-01-22T09:29:58.633
> 
> 标签：c#, .net, asynchronous, async-await

[`async`据我了解，主要的`await`](https://docs.microsoft.com/en-us/dotnet/csharp/async)事情之一是让代码易于编写和阅读——但使用它们是否等于产生后台线程来执行长时间的逻辑？

我目前正在尝试最基本的示例。我已经在线添加了一些评论。你能为我澄清一下吗？

```
// I don't understand why this method must be marked as `async`.
private async void button1_Click(object sender, EventArgs e)
{
    Task<int> access = DoSomethingAsync();
    // task independent stuff here

    // this line is reached after the 5 seconds sleep from 
    // DoSomethingAsync() method. Shouldn't it be reached immediately? 
    int a = 1; 

    // from my understanding the waiting should be done here.
    int x = await access; 
}

async Task<int> DoSomethingAsync()
{
    // is this executed on a background thread?
    System.Threading.Thread.Sleep(5000);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：886
> 
> 时间：2013-11-14T18:55:19.103

使用时`async`，`await`编译器会在后台生成状态机。

这是一个例子，我希望我可以解释一些正在发生的高级细节：

```
public async Task MyMethodAsync()
{
    Task<int> longRunningTask = LongRunningOperationAsync();
    // independent work which doesn't need the result of LongRunningOperationAsync can be done here

    //and now we call await on the task 
    int result = await longRunningTask;
    //use the result 
    Console.WriteLine(result);
}

public async Task<int> LongRunningOperationAsync() // assume we return an int from this long running operation 
{
    await Task.Delay(1000); // 1 second delay
    return 1;
} 
```

好的，那么这里会发生什么：

1.  `Task<int> longRunningTask = LongRunningOperationAsync();`开始执行`LongRunningOperation`

2.  独立工作完成让我们假设主线程（线程 ID = 1）然后`await longRunningTask`到达。

    现在，如果`longRunningTask`尚未完成并且仍在运行，`MyMethodAsync()`将返回其调用方法，因此主线程不会被阻塞。完成`longRunningTask`后，来自 ThreadPool 的线程（可以是任何线程）将返回`MyMethodAsync()`其先前的上下文并继续执行（在这种情况下将结果打印到控制台）。

第二种情况是`longRunningTask`已经完成执行并且结果可用。到达时`await longRunningTask`我们已经有了结果，因此代码将继续在同一个线程上执行。（在这种情况下，将结果打印到控制台）。当然，上面的例子不是这种情况，其中`Task.Delay(1000)`涉及到。

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2013-01-22T13:17:40.580

> 据我了解，async 和 await 做的主要事情之一是使代码易于编写和阅读。

他们是为了让*异步*代码易于编写和阅读，是的。

> 与生成后台线程以执行长时间逻辑相同吗？

一点也不。

> // 我不明白为什么这个方法必须标记为'async'。

`async`关键字启用`await`关键字。所以任何使用的方法都`await`必须标明`async`。

> // 从 DoSomethingAsync() 方法休眠 5 秒后到达此行。不应该立即到达吗？

不，因为`async`默认情况下方法不在另一个线程上运行。

> // 这是在后台线程上执行的吗？

不。

* * *

您可能会发现我的[`async`/`await`介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)很有帮助。[官方 MSDN 文档](http://msdn.microsoft.com/en-us/library/hh191443.aspx)也异常出色（尤其是[TAP](http://msdn.microsoft.com/en-us/library/hh873175.aspx)部分），并且该团队`async`提出了出色的[常见问题解答](https://devblogs.microsoft.com/pfxteam/asyncawait-faq/)。

* * *

## 回答 #3

> 赞同：199
> 
> 时间：2017-05-26T14:55:26.933

## 解释

这是一个高层次的`async`/的快速示例。`await`除此之外，还有很多细节需要考虑。

注意：`Task.Delay(1000)`模拟工作 1 秒。我认为最好将此视为等待外部资源的响应。由于我们的代码正在等待响应，因此系统可以将正在运行的任务放在一边，并在完成后返回它。同时，它可以在那个线程上做一些其他的工作。

在下面的示例中，第**一个块**正是这样做的。它立即启动所有任务（`Task.Delay`行）并将它们放在一边。代码将在该行暂停，`await a`直到 1 秒延迟完成，然后再转到下一行。由于`b`, `c`,`d`和`e`all 几乎在完全相同的时间开始执行`a`（由于缺少等待），因此在这种情况下它们应该在大致相同的时间完成。

在下面的示例中，**第二个块**正在启动一个任务并等待它完成（即完成`await`），然后再启动后续任务。每次迭代需要 1 秒。在`await`继续之前暂停程序并等待结果。这是第一块和第二块之间的主要区别。

## 例子

```
Console.WriteLine(DateTime.Now);

// This block takes 1 second to run because all
// 5 tasks are running simultaneously
{
    var a = Task.Delay(1000);
    var b = Task.Delay(1000);
    var c = Task.Delay(1000);
    var d = Task.Delay(1000);
    var e = Task.Delay(1000);

    await a;
    await b;
    await c;
    await d;
    await e;
}

Console.WriteLine(DateTime.Now);

// This block takes 5 seconds to run because each "await"
// pauses the code until the task finishes
{
    await Task.Delay(1000);
    await Task.Delay(1000);
    await Task.Delay(1000);
    await Task.Delay(1000);
    await Task.Delay(1000);
}
Console.WriteLine(DateTime.Now); 
```

输出：

```
5/24/2017 2:22:50 PM
5/24/2017 2:22:51 PM (First block took 1 second)
5/24/2017 2:22:56 PM (Second block took 5 seconds) 
```

* * *

## 有关 SynchronizationContext 的额外信息

注意：这对我来说有点模糊，所以如果我有任何错误，请纠正我，我会更新答案。对它的工作原理有一个基本的了解很重要，但只要你从不使用它，你就可以不用成为它的专家`ConfigureAwait(false)`，尽管我认为你可能会失去一些优化的机会。

这有一个方面使得`async`/`await`概念有点难以掌握。这就是在这个例子中，这一切都发生在同一个线程上的事实（或者至少就其而言似乎是同一个线程`SynchronizationContext`）。默认情况下，`await`将恢复运行它的原始线程的同步上下文。例如，在 ASP.NET 中，`HttpContext`当请求进入时，您有一个与线程相关联的内容。此上下文包含特定于原始 Http 请求的内容，例如具有语言、IP 地址、标头等内容的原始请求对象. 如果您在处理某事的中途切换线程，您可能最终会尝试在不同的对象上从该对象中提取信息`HttpContext`这可能是灾难性的。如果你知道你不会将上下文用于任何事情，你可以选择“不关心”它。这基本上允许您的代码在单独的线程上运行，而不会带来上下文。

你如何做到这一点？默认情况下，`await a;`代码实际上是在假设您确实想要捕获和恢复上下文：

```
await a; //Same as the line below
await a.ConfigureAwait(true); 
```

如果你想让主代码在没有原始上下文的新线程上继续，你只需使用 false 而不是 true ，这样它就知道它不需要恢复上下文。

```
await a.ConfigureAwait(false); 
```

程序暂停后，它*可能*会在具有不同上下文的完全不同的线程上继续。这就是性能改进的来源——它可以在任何可用线程上继续运行，而无需恢复它开始时的原始上下文。

这东西是不是很混乱？地狱是的！你能弄清楚吗？大概！一旦你掌握了这些概念，然后转向 Stephen Cleary 的解释，它往往更适合于对`async`/`await`已经有技术理解的人。

* * *

## 回答 #4

> 赞同：156
> 
> 时间：2013-01-22T09:39:00.187

除了其他答案，请查看[await (C# Reference)](https://docs.microsoft.com/en-us/dotnet/articles/csharp/language-reference/keywords/await)

更具体地说，在包含的示例中，它稍微解释了您的情况

> 以下 Windows 窗体示例说明了 await 在异步方法 WaitAsynchronouslyAsync 中的使用。将该方法的行为与 WaitSynchronously 的行为进行对比。如果没有将 await 运算符应用于任务，WaitSynchronously 会同步运行，尽管在其定义中使用了 async 修饰符并在其主体中调用了 Thread.Sleep。

```
private async void button1_Click(object sender, EventArgs e)
{
    // Call the method that runs asynchronously.
    string result = await WaitAsynchronouslyAsync();

    // Call the method that runs synchronously.
    //string result = await WaitSynchronously ();

    // Display the result.
    textBox1.Text += result;
}

// The following method runs asynchronously. The UI thread is not
// blocked during the delay. You can move or resize the Form1 window 
// while Task.Delay is running.
public async Task<string> WaitAsynchronouslyAsync()
{
    await Task.Delay(10000);
    return "Finished";
}

// The following method runs synchronously, despite the use of async.
// You cannot move or resize the Form1 window while Thread.Sleep
// is running because the UI thread is blocked.
public async Task<string> WaitSynchronously()
{
    // Add a using directive for System.Threading.
    Thread.Sleep(10000);
    return "Finished";
} 
```

* * *

## 回答 #5

> 赞同：75
> 
> 时间：2018-09-08T06:29:55.820

**为了最快的学习..**

*   理解方法执行流程（附图表）：3分钟

*   问题内省（学习缘故）：1分钟

*   快速了解语法糖：5 分钟

*   分享一个开发者的困惑：5 分钟

*   问题：快速将普通代码的实际实现更改为异步代码：2 分钟

*   下一步去哪里？

**理解方法执行流程（附图表）：3分钟**

在这张图片中，只关注#6（仅此而已） [![在此处输入图像描述](../Images/84174b9b883fe0d7c93b4476c6e6d046.png)](https://i.stack.imgur.com/asvWD.png)

在第 6 步，执行用完了工作并停止了。要继续，它需要来自 getStringTask（一种函数）的结果。因此，它使用一个`await`操作符来暂停它的进程，并将控制权交还给调用者（我们所在的这个方法）。对 getStringTask 的实际调用是在 #2 早些时候进行的。在 #2 处，承诺返回一个字符串结果。*但是它什么时候会返回结果呢？我们（#1:AccessTheWebAsync）是否应该再次拨打第二个电话？谁得到结果，#2（调用语句）或#6（等待语句）*？

AccessTheWebAsync() 的外部调用者现在也在等待。所以调用者在等待 AccessTheWebAsync，而 AccessTheWebAsync 目前正在等待 GetStringAsync。有趣的是，AccessTheWebAsync 在等待之前做了一些工作（#4），也许是为了节省等待时间。外部调用者（以及链中的所有调用者）也可以使用同样的多任务自由，*这是这种“异步”事物的最大优势！*您觉得它是同步的..或正常的，但事实并非如此。

#2 和 #6 是分开的，所以我们有 #4 的优势（等待时工作）。但我们也可以做到不拆分。所以#2 将是：`string urlContents = await client.GetStringAsync("...");`. 在这里我们看不到任何优势，但是在链中的某个地方，一个函数将被拆分，而其余的函数则在不拆分的情况下调用它。这取决于您使用的链中的哪个函数/类。*这种从函数到函数的行为变化是这个主题中最令人困惑的部分*。

请记住，该方法已经返回（＃2），它不能再次返回（没有第二次）。那么来电者怎么知道呢？一切都与**任务有关！**任务被退回。**等待任务状态**（不是方法，不是值）。值将在任务中设置。任务状态将设置为完成。调用者只监视任务（#6）。所以 6# 是哪里/谁得到结果的答案。稍后[在此处](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/hh191443(v=vs.110))进一步阅读。

**为学习而自省：1 分钟**

让我们稍微调整一下问题：

> 如何以及何时使用~~and~~？ ~~`async``await`~~ `Tasks`

因为学习`Task`会自动涵盖其他两个（并回答您的问题）。

*整个想法很简单*。一个方法可以返回任何数据类型（double、int、object 等），但在这里我们只是否认这一点并强制`Task`返回一个 ' ' 对象！但是我们仍然需要返回数据（除了 void），对吧？这将在“ `Task`”对象内的标准属性中设置，例如：“ `Result`”属性。

**快速了解语法糖：5 分钟**

*   原始的非异步方法

> ```
> internal static int Method(int arg0, int arg1)
>         {
>             int result = arg0 + arg1;
>             IO(); // Do some long running IO.
>             return result;
>         } 
> ```

*   一个全新的任务化方法来调用上述方法

> ```
> internal static Task<int> MethodTask(int arg0, int arg1)
>     {
>         Task<int> task = new Task<int>(() => Method(arg0, arg1));
>         task.Start(); // Hot task (started task) should always be returned.
>         return task;
>     } 
> ```

我们提到了等待或异步吗？不。调用上述方法，您将获得一个可以监控的任务。您已经知道任务返回什么......一个整数。

*   调用任务有点棘手，那就是关键字开始出现的时候。如果有一个方法调用原始方法（非异步），那么我们需要编辑它，如下所示。让我们调用 MethodTask()

> ```
> internal static async Task<int> MethodAsync(int arg0, int arg1)
>     {
>         int result = await HelperMethods.MethodTask(arg0, arg1);
>         return result;
>     } 
> ```

上面添加的相同代码如下图所示： [![在此处输入图像描述](../Images/9541c15fea3caffff88f1382802d9909.png)](https://i.stack.imgur.com/VJU9G.png)

1.  我们正在“等待”任务完成。因此`await`（强制语法）
2.  由于我们使用await，所以我们必须使用`async`（强制语法）
3.  MethodAsync`Async`作为前缀（编码标准）

`await`很容易理解，但剩下的两个 ( `async`, `Async`) 可能不是:)。好吧，它应该对编译器更有意义。稍后[在此处进一步阅读](https://weblogs.asp.net/dixin/understanding-c-sharp-async-await-1-compilation)

所以有2个部分。

1.  创建“任务”（只有一个任务，这将是一种附加方法）

2.  创建用于调用任务的语法糖`await+async`（如果要转换非异步方法，这涉及更改现有代码）

请记住，我们有一个 AccessTheWebAsync() 的外部调用者，并且该调用者也不能幸免……即它也需要相同的调用者`await+async`。并且链条还在继续（因此这是一个可能影响许多类的重大变化）。它也可以被认为是非破坏性更改，因为原始方法仍然可以调用。如果您想进行重大更改，请更改它的访问权限（或删除并将其移动到任务中），然后类将被迫使用任务方法。无论如何，在异步调用中总会有一个`Task`在一端并且只有一个。

*一切都好，但一位开发人员惊讶地发现`Task` 失踪......*

**分享开发者的困惑：5 分钟**

开发人员犯了不实施的错误，`Task`但它仍然有效！尝试理解问题以及[此处提供](https://stackoverflow.com/questions/32759967/is-it-correct-if-i-am-using-await-tolistasync-over-iqueryable-which-is-not-d)的已接受答案。希望您已阅读并完全理解。总结是我们可能看不到/实现“任务”，但它在父/关联类的某个地方实现。同样，在我们的示例中，调用已经构建的方法比我们自己使用( )`MethodAsync()`实现该方法要容易得多。大多数开发人员在将代码转换为异步代码时很难理解。`Task``MethodTask()``Tasks`

提示：尝试找到现有的 Async 实现（如`MethodAsync`或`ToListAsync`）来外包困难。所以我们只需要处理 Async 和 await （这很简单，与普通代码非常相似）

**问题：快速将普通代码的实际实现更改为异步操作：2 分钟**

下面数据层中显示的代码行开始中断（很多地方）。因为我们将部分代码从 .Net framework 4.2.* 更新到了 .Net core。我们必须在整个应用程序中在 1 小时内解决这个问题！

```
var myContract = query.Where(c => c.ContractID == _contractID).First(); 
```

十分简单！

1.  我们安装了 EntityFramework nuget 包，因为它具有 QueryableExtensions。或者换句话说，它执行异步实现（任务），所以我们可以用简单`Async`的`await`代码生存。
2.  命名空间 = Microsoft.EntityFrameworkCore

调用代码行变成了这样

```
var myContract = await query.Where(c => c.ContractID == _contractID).FirstAsync(); 
```

3.  方法签名从

`Contract GetContract(int contractnumber)`

到

`async Task<Contract> GetContractAsync(int contractnumber)`

4.  调用方法也受到影响：`GetContract(123456);`被称为`GetContractAsync(123456).Result;`

等待！那是什么`Result`？接得好！`GetContractAsync`只返回一个`Task`不是我们想要的值（`Contract`）。一旦操作的结果可用，它将被存储并在后续调用该[`Result`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1.result?view=net-6.0)属性时立即返回。我们也可以使用类似的“Wait()”来实现超时

TimeSpan ts = TimeSpan.FromMilliseconds(150);

if (!t.Wait(ts​​)) Console.WriteLine("超时时间已过");

5.  我们在 30 分钟内改变了它！

但是架构师告诉我们不要仅仅为此使用 EntityFramework 库！哎呀！戏剧！然后我们做了一个自定义任务实现（yuk！）。你知道怎么做。还是很轻松！..还是不错的..

**下一步去哪里？** 有一个精彩的快速视频我们可以观看关于[在 ASP.Net Core 中将同步调用转换为异步](https://www.linkedin.com/learning/asp-dot-net-core-converting-synchronous-calls-to-asynchronous)，也许这可能是阅读本文后的方向。还是我解释得够多了？;)

* * *

## 回答 #6

> 赞同：74
> 
> 时间：2015-08-13T09:32:13.183

在一个简单的控制台程序中显示上述解释：

```
class Program
{
    static void Main(string[] args)
    {
        TestAsyncAwaitMethods();
        Console.WriteLine("Press any key to exit...");
        Console.ReadLine();
    }

    public async static void TestAsyncAwaitMethods()
    {
        await LongRunningMethod();
    }

    public static async Task<int> LongRunningMethod()
    {
        Console.WriteLine("Starting Long Running method...");
        await Task.Delay(5000);
        Console.WriteLine("End Long Running method...");
        return 1;
    }
} 
```

输出是：

```
Starting Long Running method...
Press any key to exit...
End Long Running method... 
```

因此，

1.  Main 通过 启动长时间运行的方法`TestAsyncAwaitMethods`。立即返回而不停止当前线程，我们立即看到“按任意键退出”消息
2.  一直以来，它`LongRunningMethod`都在后台运行。完成后，来自 Threadpool 的另一个线程会获取此上下文并显示最终消息

因此，没有线程被阻塞。

* * *

## 回答 #7

> 赞同：51
> 
> 时间：2013-01-22T09:32:54.840

我认为你选择了一个不好的例子`System.Threading.Thread.Sleep`

Task的重点`async`是让它在后台执行而不锁定主线程，例如做一个`DownloadFileAsync`

`System.Threading.Thread.Sleep`不是“正在完成”的事情，它只是休眠，因此 5 秒后到达您的下一行...

阅读这篇文章，我认为这是一个很好的解释`async`和`await`概念：http: [//msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2019-01-25T12:24:22.933

# Async & Await 简单解释

**简单的类比**

一个人可能会**等**他们的早班火车。这就是他们正在做的所有事情，因为这是他们目前正在执行的主要任务。（同步编程（你通常做的事情！））

另一个人可能会在他们抽着烟然后喝咖啡时**等待他们的早班火车。**（异步编程）

**什么是异步编程？**

异步编程是程序员选择在与执行主线程不同的线程上运行他的一些代码，然后通知主线程完成。

**async 关键字实际上是做什么的？**

将 async 关键字作为方法名称的前缀，例如

```
async void DoSomething(){ . . . 
```

允许程序员在调用异步任务时使用 await 关键字。这就是它所做的一切。

**为什么这很重要？**

在许多软件系统中，主线程被保留用于专门与用户界面相关的操作。如果我正在运行一个非常复杂的递归算法，需要 5 秒才能在我的计算机上完成，但我在主线程（UI 线程）上运行它当用户尝试单击我的应用程序上的任何内容时，它似乎被冻结因为我的主线程已经排队并且当前正在处理太多的操作。结果，主线程无法处理鼠标单击以从按钮单击运行该方法。

**你什么时候使用 Async 和 Await？**

当您做任何不涉及用户界面的事情时，最好使用异步关键字。

因此，假设您正在编写一个程序，允许用户在他们的手机上绘制草图，但每隔 5 秒它将检查一次互联网上的天气。

我们应该等待每 5 秒对网络进行一次轮询呼叫以获取天气，因为应用程序的用户需要保持与移动触摸屏交互以绘制漂亮的图片。

**你如何使用 Async 和 Await**

从上面的例子开始，这里是一些如何编写它的伪代码：

```
 //ASYNCHRONOUS
    //this is called using the await keyword every 5 seconds from a polling timer or something.

    async Task CheckWeather()
    {
        var weather = await GetWeather();
        //do something with the weather now you have it
    }

    async Task<WeatherResult> GetWeather()
    {

        var weatherJson = await CallToNetworkAddressToGetWeather();
        return deserializeJson<weatherJson>(weatherJson);
    }

    //SYNCHRONOUS
    //This method is called whenever the screen is pressed
    void ScreenPressed()
    {
        DrawSketchOnScreen();
    } 
```

**附加说明 - 更新**

我忘了在我的原始笔记中提到，在 C# 中，您只能等待包含在 Tasks 中的方法。例如你可以等待这个方法：

```
// awaiting this will return a string.
// calling this without await (synchronously) will result in a Task<string> object.
async Task<string> FetchHelloWorld() {.. 
```

您不能等待不是这样的任务的方法：

```
async string FetchHelloWorld() {.. 
```

请随时在[此处查看](https://github.com/microsoft/referencesource/blob/master/mscorlib/system/threading/Tasks/Task.cs)Task 类的源代码。

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2015-07-17T15:36:15.120

这是一个快速控制台程序，可以让那些关注的人清楚。该`TaskToDo`方法是您要进行异步的长时间运行的方法。让它异步运行是由该`TestAsync`方法完成的。测试循环方法只是运行`TaskToDo`任务并异步运行它们。您可以在结果中看到这一点，因为它们从运行到运行的顺序不同 - 它们在完成时向控制台 UI 线程报告。简单化，但我认为简单化的示例比涉及更多的示例更能突出模式的核心：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace TestingAsync
{
    class Program
    {
        static void Main(string[] args)
        {
            TestLoops();
            Console.Read();
        }

        private static async void TestLoops()
        {
            for (int i = 0; i < 100; i++)
            {
                await TestAsync(i);
            }
        }

        private static Task TestAsync(int i)
        {
            return Task.Run(() => TaskToDo(i));
        }

        private async static void TaskToDo(int i)
        {
            await Task.Delay(10);
            Console.WriteLine(i);
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2017-07-15T08:03:51.310

这里的所有答案都使用`Task.Delay()`或其他一些内置`async`功能。但这是我的示例，它不使用这些`async`功能：

```
// Starts counting to a large number and then immediately displays message "I'm counting...". 
// Then it waits for task to finish and displays "finished, press any key".
static void asyncTest ()
{
    Console.WriteLine("Started asyncTest()");
    Task<long> task = asyncTest_count();
    Console.WriteLine("Started counting, please wait...");
    task.Wait(); // if you comment this line you will see that message "Finished counting" will be displayed before we actually finished counting.
    //Console.WriteLine("Finished counting to " + task.Result.ToString()); // using task.Result seems to also call task.Wait().
    Console.WriteLine("Finished counting.");
    Console.WriteLine("Press any key to exit program.");
    Console.ReadLine();
}

static async Task<long> asyncTest_count()
{
    long k = 0;
    Console.WriteLine("Started asyncTest_count()");
    await Task.Run(() =>
    {
        long countTo = 100000000;
        int prevPercentDone = -1;
        for (long i = 0; i <= countTo; i++)
        {
            int percentDone = (int)(100 * (i / (double)countTo));
            if (percentDone != prevPercentDone)
            {
                prevPercentDone = percentDone;
                Console.Write(percentDone.ToString() + "% ");
            }

            k = i;
        }
    });
    Console.WriteLine("");
    Console.WriteLine("Finished asyncTest_count()");
    return k;
} 
```

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2014-09-08T02:06:42.077

这个答案旨在提供一些特定于 ASP.NET 的信息。

通过在 MVC 控制器中使用 async/await，可以提高线程池利用率并实现更好的吞吐量，如下文所述，

[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

> 在启动时看到大量并发请求或具有突发负载（并发突然增加）的 Web 应用程序中，使这些 Web 服务调用异步将提高应用程序的响应能力。异步请求与同步请求的处理时间相同。例如，如果请求发出需要两秒钟才能完成的 Web 服务调用，则无论是同步执行还是异步执行，该请求都需要两秒钟。但是，在异步调用期间，线程在等待第一个请求完成时不会被阻止响应其他请求。因此，当有许多并发请求调用长时间运行的操作时，异步请求可以防止请求排队和线程池增长。

* * *

## 回答 #12

> 赞同：14
> 
> 时间：2018-09-27T17:28:26.450

## 异步/等待

实际上，Async / Await 是一对关键字，它们只是用于创建异步任务回调的语法糖。

以这个操作为例：

```
public static void DoSomeWork()
{
    var task = Task.Run(() =>
    {
        // [RUNS ON WORKER THREAD]

        // IS NOT bubbling up due to the different threads
        throw new Exception();
        Thread.Sleep(2000);

        return "Hello";
    });

    // This is the callback
    task.ContinueWith((t) => {
        // -> Exception is swallowed silently
        Console.WriteLine("Completed");

        // [RUNS ON WORKER THREAD]
    });
} 
```

上面的代码有几个缺点。错误不会传递，很难阅读。但是 Async 和 Await 进来帮助我们：

```
public async static void DoSomeWork()
{
    var result = await Task.Run(() =>
    {
        // [RUNS ON WORKER THREAD]

        // IS bubbling up
        throw new Exception();
        Thread.Sleep(2000);

        return "Hello";
    });

    // every thing below is a callback 
    // (including the calling methods)

    Console.WriteLine("Completed");
} 
```

等待调用必须在异步方法中。这有一些优点：

*   返回任务的结果
*   自动创建回调
*   检查错误并让它们在调用堆栈中冒泡（仅调用堆栈中的非等待调用）
*   等待结果
*   释放主线程
*   在主线程上运行回调
*   使用线程池中的工作线程执行任务
*   使代码易于阅读
*   还有更多

**注意**：Async 和 Await*与*异步调用一起使用以*不*进行这些调用。您必须为此使用**任务库**，例如 Task.Run() 。

这是await和none await解决方案的比较

这是非异步解决方案：

```
public static long DoTask()
{
    stopWatch.Reset();
    stopWatch.Start();

    // [RUNS ON MAIN THREAD]
    var task = Task.Run(() => {
        Thread.Sleep(2000);
        // [RUNS ON WORKER THREAD]
    });
    // goes directly further
    // WITHOUT waiting until the task is finished

    // [RUNS ON MAIN THREAD]

    stopWatch.Stop();
    // 50 milliseconds
    return stopWatch.ElapsedMilliseconds;
} 
```

这是异步方法：

```
public async static Task<long> DoAwaitTask()
{
    stopWatch.Reset();
    stopWatch.Start();

    // [RUNS ON MAIN THREAD]

    await Task.Run(() => {
        Thread.Sleep(2000);
        // [RUNS ON WORKER THREAD]
    });
    // Waits until task is finished

    // [RUNS ON MAIN THREAD]

    stopWatch.Stop();
    // 2050 milliseconds
    return stopWatch.ElapsedMilliseconds;
} 
```

您实际上可以在没有 await 关键字的情况下调用异步方法，但这意味着此处的任何异常都会在发布模式下被吞没：

```
public static Stopwatch stopWatch { get; } = new Stopwatch();

static void Main(string[] args)
{
    Console.WriteLine("DoAwaitTask: " + DoAwaitTask().Result + " ms");
    // 2050 (2000 more because of the await)
    Console.WriteLine("DoTask: " + DoTask() + " ms");
    // 50
    Console.ReadKey();
} 
```

Async 和 Await 不适用于并行计算。它们用于不阻塞您的主线程。当涉及到 asp.net 或 Windows 应用程序时，由于网络调用而阻塞主线程是一件坏事。如果您这样做，您的应用程序将变得无响应甚至崩溃。

查看[MS 文档](https://docs.microsoft.com/en-us/dotnet/csharp/async#io-bound-example-downloading-data-from-a-web-service)以获取更多示例。

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2013-01-22T10:16:25.133

老实说，我仍然认为最好的解释是维基百科上关于未来和承诺的解释：[http ://en.wikipedia.org/wiki/Futures_and_promises](http://en.wikipedia.org/wiki/Futures_and_promises)

基本思想是你有一个单独的线程池来异步执行任务。使用时。然而，该对象确实承诺它将在某个时间执行操作并在您请求时为您提供结果。这意味着当您请求结果并且尚未完成时它将阻塞，否则会在线程池中执行。

从那里你可以优化一些东西：一些操作可以异步实现，你可以通过将后续请求批处理和/或重新排序来优化文件 IO 和网络通信等内容。我不确定这是否已经在 Microsoft 的任务框架中 - 但如果不是，那将是我要添加的第一件事。

您实际上可以在 C# 4.0 中使用 yield 来实现未来模式排序。如果您想知道它是如何工作的，我可以推荐这个做得不错的链接：[http](http://code.google.com/p/fracture/source/browse/trunk/Squared/TaskLib/) ://code.google.com/p/fracture/source/browse/trunk/Squared/TaskLib/ 。但是，如果您自己开始使用它，您会注意到如果您想做所有很酷的事情，您确实需要语言支持——这正是微软所做的。

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2018-01-24T12:45:39.177

请参阅此小提琴[https://dotnetfiddle.net/VhZdLU](https://dotnetfiddle.net/VhZdLU)（如果可能，请对其进行改进）运行一个***简单的控制台应用程序***，该应用程序显示同一程序中**Task、Task.WaitAll()、async 和 await**运算符的用法。

这个小提琴应该清除您的执行周期概念。

这是示例代码

```
using System;
using System.Threading.Tasks;

public class Program
{
    public static void Main()
    {               
        var a = MyMethodAsync(); //Task started for Execution and immediately goes to Line 19 of the code. Cursor will come back as soon as await operator is met       
        Console.WriteLine("Cursor Moved to Next Line Without Waiting for MyMethodAsync() completion");
        Console.WriteLine("Now Waiting for Task to be Finished");       
        Task.WaitAll(a); //Now Waiting      
        Console.WriteLine("Exiting CommandLine");       
    }

    public static async Task MyMethodAsync()
    {
        Task<int> longRunningTask = LongRunningOperation();
        // independent work which doesn't need the result of LongRunningOperationAsync can be done here
        Console.WriteLine("Independent Works of now executes in MyMethodAsync()");
        //and now we call await on the task 
        int result = await longRunningTask;
        //use the result 
        Console.WriteLine("Result of LongRunningOperation() is " + result);
    }

    public static async Task<int> LongRunningOperation() // assume we return an int from this long running operation 
    {
        Console.WriteLine("LongRunningOperation() Started");
        await Task.Delay(2000); // 2 second delay
        Console.WriteLine("LongRunningOperation() Finished after 2 Seconds");
        return 1;
    }   

} 
```

***来自输出窗口的跟踪：*** [![在此处输入图像描述](../Images/bd8753a1c19c7d2bec18c3340d9432e4.png)](https://i.stack.imgur.com/AzuUp.png)

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2021-02-10T02:32:04.103

我想为此付出两分钱，如果任何其他答案包含我将解释的内容，我很抱歉，我阅读了大部分内容但没有找到，但我可能错过了一些东西。

我看到了很多误解和很多很好的解释，只是想解释一下异步与并行编程的区别，我相信这会让事情更容易理解。

当您需要进行长时间的计算、处理器密集型工作时，如果可能的话，您应该选择使用并行编程来优化内核的使用。这会打开一些线程并同时处理一些事情。

假设您有一组数字，并且想要对每一个比进行一些昂贵的长计算。并行是你的朋友。

异步编程用于不同的用例。

当您等待不依赖于您的处理器的东西时，它用于释放您的线程，例如 IO（写入和读取磁盘），当您执行 IO 时，您的线程什么也不做，当您等待一些从数据库返回的昂贵查询的结果。

异步方法在等待很长时间返回结果时释放您的线程。该线程可以被应用程序的其他部分使用（例如，在 Web 应用程序中它处理其他请求），或者可以返回操作系统以供其他用途。

当您的结果完成后，相同的线程（或另一个线程）将返回给您的应用程序以恢复处理。

在像 .net 这样的多线程环境中，异步编程不是强制性的（但一种很好的做法），在 Web 应用程序中，其他线程将响应新请求，但如果您在像 nodejs 这样的单线程框架中，这是强制性的，因为您不能阻止您唯一的线程，否则您将无法回答任何其他请求。

总而言之，长时间的处理器密集型计算将从并行编程中受益更多，而不依赖于处理器的长等待期（例如 IO 或 DB 查询或对某些 API 的调用）将从异步编程中受益更多。

这就是为什么实体框架，例如，有一个异步 api 来保存、列出、查找等......

请记住，async/await 与 wait 或 waitAll 不同，上下文不同。Async/await 释放线程并且是异步编程。wait / waitAll 阻塞所有线程（它们没有被释放）以在并行上下文中强制同步......不同的东西......

希望这对某人有用...

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2017-06-02T21:15:25.070

我理解的方式也是，应该添加第三个术语：`Task`.

`Async`只是您在方法上放置的限定符，表示它是异步方法。

`Task`是`async`函数的返回。它异步执行。

你`await`一个任务。当代码执行到这一行时，控制权会跳回到周围原始函数的调用者。

相反，如果您将`async`函数的返回值（即`Task`）分配给变量，则当代码执行到达这一行时，它只会*继续*越过周围函数中的那一行，而*异步*`Task`执行。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2018-08-05T17:21:39.103

在更高的层次上：

1) Async 关键字启用等待，仅此而已。Async 关键字不在单独的线程中运行该方法。开始的 f async 方法同步运行，直到它在一个耗时的任务上等待。

2) 您可以在返回 Task 或 T 类型的 Task 的方法上等待。您不能在 async void 方法上等待。

3）当主线程遇到等待耗时任务或实际工作开始时，主线程返回到当前方法的调用者。

4) 如果主线程在一个仍在执行的任务上看到 await，它不会等待它并返回给当前方法的调用者。通过这种方式，应用程序保持响应。

5) 等待处理任务，现在将在线程池中的单独线程上执行。

6）当这个await任务完成后，它下面的所有代码都会被单独的线程执行

下面是示例代码。执行它并检查线程ID

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace AsyncAwaitDemo
{
    class Program
    {
        public static async void AsynchronousOperation()
        {
            Console.WriteLine("Inside AsynchronousOperation Before AsyncMethod, Thread Id: " + Thread.CurrentThread.ManagedThreadId);
            //Task<int> _task = AsyncMethod();
            int count = await AsyncMethod();

            Console.WriteLine("Inside AsynchronousOperation After AsyncMethod Before Await, Thread Id: " + Thread.CurrentThread.ManagedThreadId);

            //int count = await _task;

            Console.WriteLine("Inside AsynchronousOperation After AsyncMethod After Await Before DependentMethod, Thread Id: " + Thread.CurrentThread.ManagedThreadId);

            DependentMethod(count);

            Console.WriteLine("Inside AsynchronousOperation After AsyncMethod After Await After DependentMethod, Thread Id: " + Thread.CurrentThread.ManagedThreadId);
        }

        public static async Task<int> AsyncMethod()
        {
            Console.WriteLine("Inside AsyncMethod, Thread Id: " + Thread.CurrentThread.ManagedThreadId);
            int count = 0;

            await Task.Run(() =>
            {
                Console.WriteLine("Executing a long running task which takes 10 seconds to complete, Thread Id: " + Thread.CurrentThread.ManagedThreadId);
                Thread.Sleep(20000);
                count = 10;
            });

            Console.WriteLine("Completed AsyncMethod, Thread Id: " + Thread.CurrentThread.ManagedThreadId);

            return count;
        }       

        public static void DependentMethod(int count)
        {
            Console.WriteLine("Inside DependentMethod, Thread Id: " + Thread.CurrentThread.ManagedThreadId + ". Total count is " + count);
        }

        static void Main(string[] args)
        {
            Console.WriteLine("Started Main method, Thread Id: " + Thread.CurrentThread.ManagedThreadId);

            AsynchronousOperation();

            Console.WriteLine("Completed Main method, Thread Id: " + Thread.CurrentThread.ManagedThreadId);

            Console.ReadKey();
        }

    }
} 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2018-02-21T21:45:06.527

```
public static void Main(string[] args)
{
    string result = DownloadContentAsync().Result;
    Console.ReadKey();
}

// You use the async keyword to mark a method for asynchronous operations.
// The "async" modifier simply starts synchronously the current thread. 
// What it does is enable the method to be split into multiple pieces.
// The boundaries of these pieces are marked with the await keyword.
public static async Task<string> DownloadContentAsync()// By convention, the method name ends with "Async
{
    using (HttpClient client = new HttpClient())
    {
        // When you use the await keyword, the compiler generates the code that checks if the asynchronous operation is finished.
        // If it is already finished, the method continues to run synchronously.
        // If not completed, the state machine will connect a continuation method that must be executed WHEN the Task is completed.

        // Http request example. 
        // (In this example I can set the milliseconds after "sleep=")
        String result = await client.GetStringAsync("http://httpstat.us/200?sleep=1000");

        Console.WriteLine(result);

        // After completing the result response, the state machine will continue to synchronously execute the other processes.

        return result;
    }
} 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2021-03-12T08:34:36.973

最好的例子在这里，享受： [![在此处输入图像描述](../Images/c17d51f32983d747c6cdb7aea52cb510.png)](https://i.stack.imgur.com/Ibs18.jpg)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-10-04T16:16:30.753

> 使用它们等于产生后台线程来执行长时间的逻辑吗？

这篇文章[MDSN:Asynchronous Programming with async and await (C#)](https://msdn.microsoft.com/en-ca/library/mt674882.aspx)明确解释了它：

> async 和 await 关键字不会导致创建额外的线程。异步方法不需要多线程，因为异步方法不在其自己的线程上运行。该方法在当前同步上下文上运行，并且仅在该方法处于活动状态时才使用线程上的时间。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2018-04-26T10:51:54.723

下面是通过打开对话框读取 excel 文件的代码，然后使用 async 并等待异步运行该代码从 excel 中逐行读取并绑定到网格

```
namespace EmailBillingRates
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            lblProcessing.Text = "";
        }

        private async void btnReadExcel_Click(object sender, EventArgs e)
        {
            string filename = OpenFileDialog();

            Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
            Microsoft.Office.Interop.Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(filename);
            Microsoft.Office.Interop.Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Microsoft.Office.Interop.Excel.Range xlRange = xlWorksheet.UsedRange;
            try
            {
                Task<int> longRunningTask = BindGrid(xlRange);
                int result = await longRunningTask;

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message.ToString());
            }
            finally
            {
                //cleanup  
               // GC.Collect();
                //GC.WaitForPendingFinalizers();

                //rule of thumb for releasing com objects:  
                //  never use two dots, all COM objects must be referenced and released individually  
                //  ex: [somthing].[something].[something] is bad  

                //release com objects to fully kill excel process from running in the background  
                Marshal.ReleaseComObject(xlRange);
                Marshal.ReleaseComObject(xlWorksheet);

                //close and release  
                xlWorkbook.Close();
                Marshal.ReleaseComObject(xlWorkbook);

                //quit and release  
                xlApp.Quit();
                Marshal.ReleaseComObject(xlApp);
            }

        }

        private void btnSendEmail_Click(object sender, EventArgs e)
        {

        }

        private string OpenFileDialog()
        {
            string filename = "";
            OpenFileDialog fdlg = new OpenFileDialog();
            fdlg.Title = "Excel File Dialog";
            fdlg.InitialDirectory = @"c:\";
            fdlg.Filter = "All files (*.*)|*.*|All files (*.*)|*.*";
            fdlg.FilterIndex = 2;
            fdlg.RestoreDirectory = true;
            if (fdlg.ShowDialog() == DialogResult.OK)
            {
                filename = fdlg.FileName;
            }
            return filename;
        }

        private async Task<int> BindGrid(Microsoft.Office.Interop.Excel.Range xlRange)
        {
            lblProcessing.Text = "Processing File.. Please wait";
            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;

            // dt.Column = colCount;  
            dataGridView1.ColumnCount = colCount;
            dataGridView1.RowCount = rowCount;

            for (int i = 1; i <= rowCount; i++)
            {
                for (int j = 1; j <= colCount; j++)
                {
                    //write the value to the Grid  
                    if (xlRange.Cells[i, j] != null && xlRange.Cells[i, j].Value2 != null)
                    {
                         await Task.Delay(1);
                         dataGridView1.Rows[i - 1].Cells[j - 1].Value =  xlRange.Cells[i, j].Value2.ToString();
                    }

                }
            }
            lblProcessing.Text = "";
            return 0;
        }
    }

    internal class async
    {
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-04-10T08:03:42.437

这里的答案作为关于等待/异步的一般指导很有用。它们还包含有关等待/异步如何连接的一些细节。我想和你分享一些在使用这种设计模式之前你应该知道的实践经验。

术语“等待”是字面意思，因此无论您调用它的哪个线程都会在继续之前等待该方法的结果。在**前台**线程上，这是一场***灾难***。前台线程负责构建您的应用程序，包括视图、视图模型、初始动画以及您使用这些元素引导的任何其他内容。因此，当您等待前台线程时，您会***停止***应用程序。当似乎没有任何事情发生时，用户等待并等待。这提供了负面的用户体验。

您当然可以使用多种方式等待后台线程：

```
Device.BeginInvokeOnMainThread(async () => { await AnyAwaitableMethod(); });

// Notice that we do not await the following call, 
// as that would tie it to the foreground thread.
try
{
Task.Run(async () => { await AnyAwaitableMethod(); });
}
catch
{} 
```

这些评论的完整代码位于[https://github.com/marcusts/xamarin-forms-annoyances](https://github.com/marcusts/xamarin-forms-annoyances)。请参阅名为 AwaitAsyncAntipattern.sln 的解决方案。

GitHub 站点还提供了有关此主题的更详细讨论的链接。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-03-15T12:40:11.757

回答您的第二个问题 - 何时使用`async`- 这是我们使用的一种相当简单的方法：

*   运行时间超过 50 毫秒的长时间运行 I/O 绑定任务 - 使用`async`.
*   长时间运行的 CPU 密集型任务 - 使用并行执行、线程等。

解释：当你在做 I/O 工作时——发送网络请求、从磁盘读取数据等——实际工作是由“外部”芯片（网卡、磁盘控制器等）完成的。一旦工作完成 - I/O 设备驱动程序将“ping”操作系统返回，操作系统将执行您的延续代码、回调/等。在那之前，CPU 可以自由地做自己的工作（作为奖励，您还可以释放线程池线程，这对于 Web 应用程序的可扩展性来说是一个非常好的奖励*）*

PS 50ms 的阈值是 MS 的建议。否则`async`（创建状态机、执行上下文等）所增加的开销会消耗掉所有的好处。现在找不到原始的 MS 文章，但这里也提到了[https://www.red-gate.com/simple-talk/dotnet/net-framework/the-overhead-of-asyncawait-in-net-4 -5/](https://www.red-gate.com/simple-talk/dotnet/net-framework/the-overhead-of-asyncawait-in-net-4-5/)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2021-02-11T13:39:05.690

async 与函数一起使用以使其成为异步函数。await 关键字用于同步调用异步函数。await 关键字持有 JS 引擎执行，直到 promise 被解决。

只有当我们想要立即得到结果时，我们才应该使用 async & await。也许从函数返回的结果正在下一行中使用。

[关注这个博客，用简单的文字写得很好](https://www.ui-dev.in/2021/02/async-await-in-javascript-when-to-use.html)

# java - 使用 JSTL 在 JSP 中遍历 JSONArray

> ID：14455294
> 
> 赞同：2
> 
> 时间：2013-01-22T09:30:05.243
> 
> 标签：java, json, spring, jstl, arrays

我正在发送带有模型的自定义对象列表，以及作为视图的 JSP。我的自定义对象有一个名为的属性`properties`，它是`JSONObject`. 该属性的值为

```
{"services":[{"name":"abcd"},{"name":"efgh"}]} 
```

现在我想遍历 JSONArray `[{"name":"abcd"},{"name":"efgh"}]`。这是我正在做的循环

```
<c:if test="${not empty customObject.services}">
                 <c:forEach items="${customObject.services.getJSONArray(\"services\")}" var="Service" varStatus="rowCounterCh">
                     <li>${Service.name}</li>
                  </c:forEach>
 </c:if> 
```

但这无法遍历 JSONArray。我收到以下错误。

```
javax.servlet.ServletException: javax.servlet.jsp.JspTagException: Don't know how to iterate over supplied "items" in &lt;forEach&gt; 
```

那么，我应该怎么做才能遍历 JSONArray？请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-16T15:37:47.413

我有这样的东西

```
<c:forEach begin="0" end="${jsonArray.length() -1}" var="index">
     ${jsonArray.getJSONObject(index).getString("name")}
</c:forEach> 
```

替换`${jsonArray.length() -1}`为您的`jsonArray`. 在这种情况下，它是这样的

```
${customObject.services.getJSONArray(\"services\").length()} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:52:31.163

对于每个标签，您的项目都应该需要一个基本接口。JSONArray 既不是*java.util.Collection*也不是*java.util.Iterable*。所以对于每个标签实现都不能遍历你传递给 items 属性的集合。

要解决此问题，您可以：

1.  使用 JSP 生成 HTML 列表视图。
2.  或者列表项将 JSONArray 转换为*customObject.services.getJSONArray*方法中的某个适当的集合。gson 实现中的 JSONArray 应该有方法：iterator，因为它实现了 Iterable 接口。尝试在 #getJSONArray(String) 方法中返回[com.google.gson.JSONArray#iterator()而不是 JSONArray。](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonArray.html#iterator%28%29)

* * *

[更详细的解释](https://stackoverflow.com/questions/9134862/javax-servlet-servletexception-javax-servlet-jsp-jsptagexception-dont-know-ho)

# c# - 如何适当地调用允许空值的列

> ID：14455296
> 
> 赞同：0
> 
> 时间：2013-01-22T09:30:18.757
> 
> 标签：c#, sql, tsql, datatable

我有一个包含以下列的表格

```
EndDate      DateTime AllowNulls
IsApproved   Bit      AllowNulls 
```

当我向我的表发送选择查询时，这两列会产生错误。

可以说这是我的选择查询。

```
SELECT S.Name, S.Surname,
     CASE 
        WHEN S.EndDate IS NOT NULL AND S.IsApproved = 1 THEN 'Left' 
        WHEN S.EndDate IS NOT NULL AND S.IsApproved = 0 THEN 'Waiting' 
        WHEN S.EndDate IS NULL AND S.IsApproved IS NULL THEN 'Joined' 
        ELSE '' 
      END AS Durumu
FROM STUDENT S 
```

我收到的错误： **无法启用约束。一行或多行包含违反非空、唯一或外键约束的值**

我的问题是如何正确选择这些空列？

PS这个错误与返回具有相同主键的相同查询无关，因为我的表中只有一个条目:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:36:00.810

我假设您正在使用强类型数据集来获取数据，对吗？

此错误不是由您的数据库引发的，而是由您的`DataSet`.

您可以通过这种方式检查导致异常的原因：

*   `DataTable`在填充/之前设置断点`DataSet`。
*   在调试器的快速监视窗口中执行它
*   执行`DataTable.GetErrors`以获取`RowError`设置的所有行
*   查看一行或多行的此属性以查看实际问题

也许您只需要通过配置窗口刷新表，因为同时您已经更改了 sql-server 中的约束。

# web-applications - 用于移动应用的技术

> ID：14455297
> 
> 赞同：2
> 
> 时间：2013-01-22T09:30:30.520
> 
> 标签：web-applications, mobile

一个非常非常基本的问题：

我对移动应用程序没有任何经验，但我要从事的下一个项目是使用称为**phonegap**和**html5**的移动应用程序。我知道我们可以使用他们的 api 为 android 或 ios 开发本机应用程序，但我想知道如何为移动设备开发 web 应用程序？
我的意思是 html 将使用什么技术，后端将是什么。就像我为 pc 开发 web 应用程序时一样，我使用 Java 和 SQL 作为后端，使用 html JavaScript 作为前端，这与为移动设备开发 webapp 时使用的技术相同。
** 移动网络应用程序是指使用网络技术开发并安装在移动设备上的移动应用程序。

**编辑**
我正在寻找的是我们如何为移动设备开发可安装的本机 Web 应用程序，以及哪些技术将用于哪个部分，例如前端、后端等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:01:07.653

> PhoneGap 是一个开源框架，用于使用 HTML、CSS 和 JavaScript 构建跨平台移动应用程序。

UI 是用 HTML、CSS 设计的，并且可以使用一些库，如 jQuery Mobile 或 JQTouch。那是关于前端，关于后端，在[这篇博](http://phonegap.com/2012/05/02/phonegap-explained-visually/)文中，有解释（在“PhoneGap 高级应用程序架构”标题下查看）

> （在 phonegap 中）具体的应用程序架构会根据具体情况而有所不同，但是大多数数据驱动的应用程序都采用以下基本架构。PhoneGap 应用程序充当用户与之交互的客户端。PhoneGap 客户端与应用服务器通信以接收数据。应用程序服务器处理业务逻辑并与后端数据存储库通信。

Cordova API 允许用户在客户端创建和使用 SQLite 数据库。

如果您想了解更多关于 Phonegap 技术的信息，您可以参考以下链接，这将有所帮助，

1 [Phonegap-vs-钛](http://techedgez.blogspot.in/2012/12/phonegap-vs-titanium.html)

2[科尔多瓦 API](http://docs.phonegap.com/en/2.3.0rc2/index.html)

3 [Phonegap教程](http://mobile.tutsplus.com/tutorials/phonegap/phonegap-development/)

4 [Phoengap 教程](http://mobile.tutsplus.com/tutorials/phonegap/phonegap-from-scratch/)

# akka - 为什么 Akka 演员会向自己发送回复？

> ID：14455301
> 
> 赞同：0
> 
> 时间：2013-01-22T09:30:49.483
> 
> 标签：akka

我有一个集成测试，它向远程 Akka (2.0.5) 参与者发送大量消息。每次测试运行后，远程参与者树都会重新启动。在 43 次成功的测试运行后，根据调试级别的日志消息，远程参与者开始向自己发送回复，这显然导致了测试失败。

为什么会发生这种情况？

我在代码库中只有一个地方发送这些类型的消息，它清楚地表明

```
sender ! generateTheMessage() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:36:31.513

我弄清楚为什么在我的特殊情况下会发生这种情况。这里实际上涉及两个演员：

```
A -> B 
```

A 最初将消息排队，直到系统初始化。然后它将排队的消息发送到 B，并在所有进一步的消息到达后立即将它们转发给 B。

问题是当它转发排队的消息时，原来的发送者信息已经丢失，所以A成为发送者。所以来自 B 的回复会返回给 A 并再次转发回 B。我最初并没有意识到后一种转发正在发生，因为我没有为转发启用日志记录。

所以这是一个竞争条件。如果系统启动得足够快，一切正常，但如果不是，一些初始回复将被误导。

我解决这个问题的方法是将发送者与每条排队的消息配对，并使用 Java API 重新发送每条排队的消息，它允许明确指定发送者。

# objective-c - EXEC_BAD_ACCESS 在现有视图中弹出新视图时

> ID：14455304
> 
> 赞同：0
> 
> 时间：2013-01-22T09:30:58.423
> 
> 标签：objective-c, uiviewcontroller, uiviewanimation

我正在尝试在现有视图中调用新视图

```
TransactionFinish *childView= [[TransactionFinish alloc] initWithNibName:@"TransactionFinish" bundle:nil];

        childView.view.frame = self.view.frame;

        childView.view.frame=CGRectMake(10, 10, self.view.frame.size.width-20, self.view.frame.size.height-20);
        childView.view.alpha = 0.0f;
        [self.view addSubview:childView.view];

        [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationCurveEaseOut
                         animations:^{
                             childView.view.alpha = 1.0f;
                         }
                         completion:^(BOOL finished) {
                         }]; 
```

它正在内部`ViewDidLoad()`（`TransactionFinish`我尝试过调试它），但它给了我`EXEC_BAD_ACCESS(code=1,address=0x31f54e62)`绿色的线程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:43:38.497

问题在于`childView`. 您实例化并将对它的引用存储到局部变量中：

```
TransactionFinish *childView= [[TransactionFinish alloc] initWithNibName:@"TransactionFinish" bundle:nil]; 
```

如果您使用 ARC，当局部变量超出范围时，它所引用的对象 ( `childView`) 将被释放。

如果您不使用 ARC，我想您正在执行以下操作：

```
[childView release]; 
```

避免`childView`泄漏的地方（正如您在上面粘贴的代码所暗示的那样）。

任何一种假设都可以解释为什么会发生崩溃：当`viewDidLoad`被调用时，控制器已经被释放。

将`childView`视图添加到`self.view`：

```
 [self.view addSubview:childView.view]; 
```

会保留`childView.view`但不会`childView`。所以控制器被释放了，而它的视图没有。

对此的解决方法是在您的类中创建一个`strong`属性来存储对您的`childView`控制器的引用：

```
@property(nonatomic, strong) TransactionFinish *childView; 
```

另一种可能性是使用[控制器遏制](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)；你可以做点什么

```
[vc willMoveToParentViewController:self];
[self addChildViewController:childView];
[self.view addSubview:childView.view]; // or something like this.
[childView didMoveToParentViewController:self]; 
```

但这仅适用于 iOS5+。

# objective-c - TableView didSelectAtIndexPath：向左滑动到 ViewController

> ID：14455307
> 
> 赞同：1
> 
> 时间：2013-01-22T09:31:04.277
> 
> 标签：objective-c, uitableview

我使用 tableViewController 和第二个 viewController 来显示更多详细信息。这很好用，但我喜欢使用另一种转换：tableView 应该向左滑出，而 detail viewController 应该从右侧滑入。

我希望它只是一个设置，但我找不到它。这是我目前使用的代码：

```
ViewControllerDealDetail *thisDetailInformations =[[ViewControllerDealDetail alloc] initWithNibName:nil bundle:nil];
thisDetailInformations.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController: thisDetailInformations animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:48:58.983

你可以使用导航控制

```
[self.navigationController pushViewController:view controller name animated:YES]; 
```

# javascript - 在 JavaScript 对象中动态创建键

> ID：14455312
> 
> 赞同：0
> 
> 时间：2013-01-22T09:31:16.567
> 
> 标签：javascript, jquery

我正在尝试`JavaScript`使用选择器在对象中动态创建一个键`jQuery`：

```
{
  $("form").children("input[type=hidden]").attr("name"): $("form").children("input[type=hidden]").val()
} 
```

不过，这很糟糕。是否可以通过这种方式动态创建密钥？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:32:59.670

您可以在两个语句中做到这一点：

```
var obj = {};
obj[$("form").children("input[type=hidden]").attr("name")]
    = $("form").children("input[type=hidden]").val(); 
```

我个人会这样写，以避免重新创建 jQuery 集：

```
var obj = {}, $obj = $("form").children("input[type=hidden]");
obj[$obj.attr("name")] = $obj.val(); 
```

另请注意，这仅在 jQuery 集仅包含一个元素时才有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:43:39.903

您还可以使其一次使用多个字段：

```
var obj = {};
$('form > input[type="hidden"]').each(function (i, el) {
    obj[el.name] = el.value;
}); 
```

如果你只有一个隐藏字段，另一个更花哨的版本：

```
var obj = $('form > input[type="hidden"]').serializeArray()[0]; 
```

# selenium - 通过 selenium webdriver 处理动态 id

> ID：14455314
> 
> 赞同：-3
> 
> 时间：2013-01-22T09:31:21.363
> 
> 标签：selenium, webdriver

通过 selenium 自动化应用程序，其中 id 动态更改。我该如何处理。请帮助我..

HTML 代码是：-

```
<table border="0" cellpadding="0" cellspacing="0" width="1000px">
 <tbody><tr id="ctl00_ctl00_MainContent_CarQuoteMainContent_rpQuotes_trSelectedQuote_0">
 <td align="center" valign="middle" width="12%">
 <input id="ctl00_ctl00_MainContent_CarQuoteMainContent_rpQuotes_chkCompare_0" name="ctl00$ctl00$MainContent$CarQuoteMainContent$rpQuotes$ctl00$chkCompare" type="checkbox">
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:26:59.617

在这两种情况下（和），我假设 ID 的第一部分是唯一的。所以你可以使用这样的东西。//tr[contains(@id,'ctl00_')] 和输入字段 //input[contains(@id,'ctl00_')]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:03:34.483

这些看起来不像动态 ID，而是列表中元素的非内容特定的行 ID。

如果是这种情况，您无法仅从该信息中立即确定“此行元素正在显示 MyCarQuotes.com 的数据”，因为显示的 HTML 中没有任何内容可作为该查询的基础。

如果行中有一些东西可以用来“识别”内容（例如公司名称）——并且你有一个想要与之交互的特定“东西”——你可以封装查找并执行类似的操作

CheckboxForQuoteFromCompany("MyCarQuotes.com").Click();

如果您能够发布更多的 HTML（至少一整行），更重要的是您的测试意图，我们可能会提供更多帮助。

# android - Android 联系人 - SQLite 数据库连接失败

> ID：14455316
> 
> 赞同：0
> 
> 时间：2013-01-22T09:31:28.377
> 
> 标签：android, sqlite

我想直接通过数据库访问 Android 联系人。为此我

```
SQLiteDatabase data=null;
File file = new File(".... some path ... contacts2.db");
data = SQLiteDatabase.openOrCreateDatabase(file, null); 
```

但它失败，异常 android.database.sqlite.SQLiteCantOpenDatabaseException 无法打开数据库。为什么会这样？该文件恰好包含所需的数据。

第二个问题是：如何获取联系人数据库文件的路径，在其他版本中可能会有所不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:34:08.970

android中的联系人存储在sqlite数据库和名为**contacts.db的文件中**

开发工具 Android Debug Bridge (ADB) 可用于从模拟器中提取文件

ADB 也可以从手机中提取文件，但必须先 root 并且 ADB 驱动程序也必须安装在您的机器上

（您可以使用 ContentProvider 访问 android 中的联系人。）

**contacts.db**文件存放在受保护的系统内存中，文件路径为：

数据/数据/com.android.providers.contacts/databases/contacts.db

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:37:37.200

如果要连接到联系人数据库，则必须在清单中具有“READ_CONTACTS”权限。联系人数据库位于 /data/data/com.android.provider.contacts 位置，没有 root 权限您无法访问它们。唯一的解决方案是使用 ContactContract 和 managedQuery。我给你代码示例。

```
public void kontakt()
    {
        Cursor k = this.kontakty();
        int a = k.getCount();
        while(k.moveToNext())
        {

            String s = k.getString(k.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
            tv.append(s);
            tv.append("\n");

        }

    }

    @SuppressWarnings("deprecation")
    public Cursor kontakty()
    {
        Uri u = ContactsContract.Contacts.CONTENT_URI;
        String[] cochcemy = {ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME}; 
        return managedQuery(u, cochcemy, null, null, null);

    } 
```

我希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:52:23.707

```
public class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "upgrade.db";
    public static final String TITLE = "title";
    public static final String AUTHOR = "author";
    public static final String ISBN = "isbn";
    public static final String CITY = "city";
    public static final String CITY2 = "city2";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null,3); 

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL( "CREATE TABLE books (id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT ,author TEXT,isbn TEXT,city TEXT );");

        Log.v("onCreate-------","called onCreate"); 

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        android.util.Log.w("books",
        "Upgrading database, which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS books");
    onCreate(db);
        Log.v("onUpgrade-------","called onUpgrade with alter"); 
    }
} 
```

在其他课程中，您可以致电：-

```
 public void onLoad(View v)
    {

        DatabaseHelper dbh = new DatabaseHelper(this);
        SQLiteDatabase sl = dbh.getReadableDatabase();

        Cursor c = sl.rawQuery("select * from books",null);

        c.moveToFirst();
        /* here your code to fetch data*/

        Toast.makeText(this,"hello",Toast.LENGTH_SHORT).show();
        sl.close();
    } 
```

# jsf-2 - p:datatable 中的 primefaces p:commandLink 不起作用

> ID：14455318
> 
> 赞同：1
> 
> 时间：2013-01-22T09:31:34.163
> 
> 标签：jsf-2, primefaces, datatable

> **可能重复：**
> [JSF ajax 命令按钮未更新 primefaces 选择列表](https://stackoverflow.com/questions/8904202/jsf-ajax-commandbutton-not-updating-primefaces-picklist)

我将 primefaces p:dataTable 与 celleditor 和 p:commandLink 一起使用。p:commandLink 不调用 actionListener 方法。但是如果我使用普通的 jsf h:commandButton 它会调用。这是我的jsf代码：

```
<h:form id="form">
    <p:dataTable var="parent" value="#{adminView.parentlist}" id="parentlist" paginator="true" rows="10" paginatorAlwaysVisible="false" editable="true" styleClass="dtable" style="table-layout: fixed; width: 500px">
            <p:column headerText="Nameр" style ="width: 40%">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{parent.orgname}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputText value="#{parent.orgname}" style="width: 100%"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column headerText="Edit" style="width: 10%">
                                <p:rowEditor/>                   
                            </p:column> 
                            <p:column headerText="Delete" style="width: 10%">
                                <p:commandLink onclick="return confirm('Are you sure?')" value="del" actionListener="#{adminView.userOrgRemoveSelected}" styleClass="ui-icon ui-icon-trash" immediate="true">
                                    <f:param name="id" value="#{parent.uorgId}"/>
                                    <f:ajax execute =":form:userlist" render="parentlist :form:selectparent :form:selectparent1 :form:userlist"/>
                                </p:commandLink>
             </p:column>
    </p:dataTable>
</h:form> 
```

这是我的 bean 代码：

```
public void userOrgRemoveSelected(ActionEvent action){
    FacesContext fc = FacesContext.getCurrentInstance();
    Map<String, String> params = fc.getExternalContext().getRequestParameterMap();
    int id= Integer.parseInt(params.get("id"));
    try {
        UserOrganization uorg = userService.getUserOrgById(id);
        userService.removeUserOrganization(uorg);

    } catch (UserException ex) {
        ex.printStackTrace();
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Not possible to delete user"));
    }finally{
        this.parentlist = getUserOrganizationParents();
        this.branchlist = getUserOrganizationBranches();
        this.userlist = getUser1s();
    }    
} 
```

# android - 安卓切换按钮

> ID：14455321
> 
> 赞同：-4
> 
> 时间：2013-01-22T09:31:44.467
> 
> 标签：android

我是 Android 开发的初学者，我正在尝试制作一个应用程序，其要求是在文本框中显示随机数，并以一秒或任何可编程延迟继续显示随机数，直到切换按钮处于“ ON' 状态。有没有人对此有建议，或者如果可能的话分享部分源代码会很好。

我需要的另一个建议是关于任何从 android 开发开始的好书以及它的内部细节。如果有任何关于 android 的书，就像我们对其他开发语言的书一样（例如，完全参考 Java、完全参考 C、C++ 等）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:35:32.630

我读过一些 Andoid 书籍，我强烈建议[Android in Practice](http://www.manning.com/collins/)。读完之后，你就会知道，大多数在 StackOverflow 上提问的人都会从这本书中受益匪浅。这是极好的价格价值，作者肯定知道他们在写什么。

**编辑：**关于实施（更新，消除布尔）

```
public final class MyActivity extends Activity implements Runnable {
    private Handler uiThreadHandler;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // basics
        super.onCreate(savedInstanceState);
        setContentView(R.layout.your_activity_layout);
        // find text widget here, store in editText as also required in Chintan's solution
        // get the current activity's handler, it's the UI thread
        uiThreadHandler = new Handler();
        // initiate the updates if that's the initial state
        scheduletUpdate();
        // register callbacks for button etc as required also in Chintan's solution
    }
    @Override
    public void run() {
        //update your editText field here -- this is run in the UI thread so it's safe!
        scheduleUpdate();
    }
    private void scheduleUpdate() {
        uiThreadHandler.postDelayed(this, 1000); // 1000 ms
    }
    // etc, some stuff missing
} 
```

**编辑：**关于如何停止执行方法的调度，您使用以下代码，这在[处理程序文档](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)`run()`中应该很明显（更新，消除布尔值）：

```
uiThreadHandler.removeCallbacks(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:40:13.233

作为初学者，我建议您阅读[http://www.mybringback.com/series/android-basics/](http://www.mybringback.com/series/android-basics/)本教程，您将能够按照自己的要求去做。他们还提供易于遵循的视频教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:46:57.720

使用`Thread`喜欢，

```
class MyThread extends Thread
{
    private volatile boolean isRunning = false;

    public synchronized void requestStop() {
        isRunning = true;
    }

    @Override
    public void run() {
        //place code here...
        try {
            while (!isRunning) {
                // do your coding
                handler.sendMessage(handler.obtainMessage(WhatAbout.CHANGE_TEXT.ordinal(), 0, 0));
                Thread.sleep(1000 * 1); //1000 ms = 1 sec
            }

        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

现在定义以下代码来处理多条消息。

```
public enum WhatAbout {
    CHANGE_TEXT
}

public WhatAbout[] wa = WhatAbout.values(); 
```

然后使用 [Handler][1]，它可以帮助您进行沟通`BackgroundThread`和`UIThread`. 如果不使用处理程序，您将无法更改`UI`.

将以下代码放入您的`onCreate`方法中。

```
handler = new Handler() {
  @Override
  public void handleMessage(Message msg) {
    if (msg.what < wa.length) {
    switch (wa[msg.what]) 
    {
    case CHANGE_TEXT:
         editText.setText(randomVariable);
         break;
    }
  }
}; 
```

当您切换关闭时，使用以下代码停止线程。

```
if (thread != null) {
    thread .requestStop();
    thread = null;
} 
```

# node.js - node.js中如何让递归函数一一执行？

> ID：14455323
> 
> 赞同：0
> 
> 时间：2013-01-22T09:31:52.603
> 
> 标签：node.js, asynchronous

我用递归函数说 f1(); f2(); f3(); 等并一个接一个地调用，我想让它们一个一个地运行，这意味着直到 f1 没有完成 f2 或 f3 不应该被调用。我尝试了 step 但它不适用于递归函数。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:53:58.423

您需要使用 async 实用程序，例如使用[async 系列](https://github.com/caolan/async#control-flow-1)

```
var utile = require('utile');

utile.async.series([
  function(cb) {
    console.log('this is a');
    cb();
  },
  function(cb) {
    console.log('this is b');
    cb();
  }
]); 
```

# python - 除了用于 PyPI 的 tarball 之外，我还应该准备鸡蛋和 zip 吗？

> ID：14455327
> 
> 赞同：2
> 
> 时间：2013-01-22T09:32:01.347
> 
> 标签：python, pip, setuptools, pypi

我正在使用 setuptools 等为 PyPI 准备我的第一个包分发。我的源代码分发 (.tar.gz) 运行良好，现在我想知道是否应该提供任何其他格式，如 .zip 和 .egg。

在随机浏览 PyPI 时，我注意到一些项目为不同的 Python 版本提供了鸡蛋以及源代码压缩包。我注意到一两个以 .zip 形式提供源代码分发。

将哪些格式上传到 PyPI 的最佳实践是什么？并且各种安装程序（easy_install、pip）是否对使用哪一个有偏好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-11T05:52:40.157

当前的最佳实践是添加源分发 (sdist) 和轮 (bdist_wheel)。例如，看看 numpy 做了什么。

如果你有东西要建造，你可以通过提供一个轮子来为你的用户省去很多麻烦。比较带轮子和不带轮子的 numpy 安装（例如，通过安装他们没有为您的 python 版本创建轮子的版本）：没有轮子，您需要安装和使用 Fortran 编译器和 Blas 库。没有它，您甚至不必知道 numpy 使用 Fortran。

如果你有一个[纯 Python 包](https://packaging.python.org/guides/distributing-packages-using-setuptools/#universal-wheels)，那么 wheel 格式仍然有一个优点，就是只需将代码复制到正确的位置即可安装。不过，我不确定这个优势有多大

另请参阅：[https ://packaging.python.org/guides/distributing-packages-using-setuptools/#wheels](https://packaging.python.org/guides/distributing-packages-using-setuptools/#wheels)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:41:40.913

如果您不构建 C 扩展，只需以 tar.gz 格式发送源 tarball。它可以安装在所有平台上。仅当您构建 C 扩展并且您的软件在 Windows 上运行时才需要二进制鸡蛋（可通过 easy_install 安装，而不是 pip），因为人们很少在他们的机器上安装 C 编译器。

# grep - 使用 csh 从文件中提取一行

> ID：14455328
> 
> 赞同：0
> 
> 时间：2013-01-22T09:32:13.547
> 
> 标签：grep, csh

我正在编写一个 csh 脚本，它将从文件 xyz 中提取一行。xyz 文件包含一个编号。代码行数和我感兴趣的行出现在文件的 2-3 行之后。我尝试了以下代码

```
set product1 = `grep -e '<product_version_info.*/>' xyz` 
```

我希望它采用某种方式，以便当脚本找到该行时，它应该将该行作为字符串保存在某个变量中并立即终止读取文件，即。在提取该行之后，它不应再阅读。

请帮忙 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:16:22.403

[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)有一个`-m`or`--max-count`标志，告诉它在指定数量的匹配后停止。希望您的 grep 版本支持它。

```
set product1 = `grep -m 1 -e '<product_version_info.*/>' xyz` 
```

从上面链接的手册页：

> -m NUM, --max-count=NUM
> 
> ```
>  Stop reading a file after NUM matching lines.  If the  input  is
>     standard  input  from a regular file, and NUM matching lines are
>     output, grep ensures that the standard input  is  positioned  to
>     just  after the last matching line before exiting, regardless of
>     the presence of trailing context lines.  This enables a  calling
>     process  to resume a search.  When grep stops after NUM matching
>     lines, it outputs any trailing context lines.  When  the  -c  or
>     --count  option  is  also  used,  grep  does  not output a count
>     greater than NUM.  When the -v or --invert-match option is  also
>     used, grep stops after outputting NUM non-matching lines. 
> ```

作为替代方案，您始终可以使用下面的命令来检查前几行（因为它总是出现在前 2-3 行中）：

```
set product1 = `head -3 xyz | grep -e '<product_version_info.*/>'` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:10:49.790

我认为您要求返回文件中的第一个匹配行。`grep`如果是这样，一种解决方案是将结果通过管道传输到`head`

```
set product1 = `grep -e '<product_version_info.*/>' xyz | head -1` 
```

# c# - 使继承值在 propertygrid 中不可浏览/只读

> ID：14455336
> 
> 赞同：0
> 
> 时间：2013-01-22T09:32:43.170
> 
> 标签：c#, inheritance, propertygrid

说我有课

```
class Object
{
    Vector2 positon;
} 
```

这个位置在属性网格中是可编辑的，我怎么能在从对象继承的类中将它设置为不可浏览/只读。我知道`[Browsable(false)]`and `[ReadOnly(true)]`标签，但这将为所有对象设置它，这是我不希望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:43:28.010

将位置属性声明为`virtual`并在派生类型上覆盖它。

```
public class Class1
{
    public virtual string Lol { get; set; }
}

class Class1Impl1 : Class1
{
    [Browsable(false)]
    [ReadOnly(false)]
    public override string Lol
    {
        get
        {
            return base.Lol;
        }
        set
        {
            base.Lol = value;
        }
    }
}

class Class1Impl2 : Class1
{
    [Browsable(true)]
    [ReadOnly(true)]
    public override string Lol
    {
        get
        {
            return base.Lol;
        }
        set
        {
            base.Lol = value;
        }
    }
} 
```

在运行时执行它是一个不同的问题， IsBrowsable 和 IsReadOnly 是只读属性。您应该谷歌知道是否有可能在运行时更改此属性的实例，[我认为不是。](https://stackoverflow.com/questions/2160476/how-to-set-attributes-values-using-reflection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:46:54.423

我认为不可能在运行时更改 browseable 属性（我不明白这样做的意义），但是您可以使用一种方法检查您的条件并允许/禁止写入该属性。如果这足够好，如果你愿意，我很乐意模拟一些东西。

编辑：

```
class SomeClass
{
    private Object _foo;
    private Object _bar;

    public Object Foo
    {
        get
        {
            return _foo;
        }
        set
        {
            if (_bar != _foo) // replace with your test
            {
                _foo = value;
            }
        }
    }

} 
```

# android - android不能在listview下放置linearlayout

> ID：14455343
> 
> 赞同：2
> 
> 时间：2013-01-22T09:33:21.107
> 
> 标签：android, android-layout

我想在列表视图下放置一个线性布局，如果我将它放在列表视图上方，我会遇到异常并且活动突然停止工作，当我将它放在列表视图下时它不会出现，我做错了什么？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/lvRestaurants"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

        <LinearLayout
        android:id="@+id/llButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bDone"
            android:layout_width="153dp"
            android:layout_height="match_parent"
            android:text="Done" />

        <Button
            android:id="@+id/bCancel"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Cancel" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T09:37:38.137

添加`android:layout_weight=1`到您的列表视图。

其他布局没有出现的原因是因为您的列表视图占据了父布局中的所有位置（`android:layout_height="fill_parent"`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:27:14.600

我建议改用**RelativeLayout**。使用**LinearLayout**和特别是**android:layout_weight**在性能方面是昂贵的。此布局可满足您的需求。关键是**android:layout_alignParentBottom**和**andoid:layout_above**属性。试试看。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/llButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bDone"
            android:layout_width="153dp"
            android:layout_height="match_parent"
            android:text="Done" />

        <Button
            android:id="@+id/bCancel"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Cancel" />
    </LinearLayout>

    <ListView
        android:id="@+id/lvRestaurants"
        android:layout_above="@id/llButtons"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:44:52.603

您可以尝试使用`weight`概念。我对您的代码做了一些更改

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="10" >

    <ListView
        android:id="@+id/lvRestaurants"
        android:layout_weight="8"
        android:layout_width="fill_parent"
        android:layout_height="0dip" >
    </ListView>

    <LinearLayout
        android:layout_weight="2"
        android:id="@+id/llButtons"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bDone"
            android:layout_width="153dp"
            android:layout_height="fill_parent"
            android:text="Done" />

        <Button
            android:id="@+id/bCancel"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:text="Cancel" />
    </LinearLayout>

</LinearLayout> 
```

**根据您的要求进行更改**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-05T16:10:56.513

为了节省开销，为 listView 提供**layout_weight="1"**

```
 <ListView
        android:layout_weight="1"    // The MagicLine
        android:id="@+id/myListView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/> 
```

而你的 LinearLayout 与重力 =“底部”

```
 <LinearLayout
        android:layout_alignParentBottom="true"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="bottom"
        android:orientation="horizontal">

 // here will be views, you want to put with in your LinearLayout

    </LinearLayout> 
```

您也可以将 LinearLayout 放在列表视图下方，这将是使用 Relativelayout。

**这是一个示例结构。**

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ListView
        android:id="@+id/myListView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="constantHeightofLinearLayout" /> // here the constant height of the linear Layout or buttons, should be inserted

    <LinearLayout
        android:layout_alignParentBottom="true" //this is the line, that would put this linearLayout beneath your Listview
        android:layout_height="constantHeight" // this height should be the marginBottom of ListView
        android:gravity="bottom"
        android:orientation="horizontal">

 // here will be views, you want to put with in your LinearLayout

    </LinearLayout>

</RelativeLayout> 
```

# android - 通过套接字发送/接收 ByteArray 时应用程序崩溃

> ID：14455345
> 
> 赞同：1
> 
> 时间：2013-01-22T09:33:33.713
> 
> 标签：android, sockets, bytearray, transfer, datainputstream

我正在尝试使用套接字通信制作一个简单的聊天应用程序。我的目标是成功发送和接收文本和图像（来自智能手机图库）。文本部分成功，但我在处理图像时遇到了问题。

我使用 dataInput/OutputStream 编写了一个代码，下面是代码，它使用 bytearray 建立用于图像传输的套接字连接（该应用程序对文本和图像使用不同的端口）。

```
 class image_connection_thread extends Thread{
    public boolean flag=true;
    public void run(){
        try{
            socket2 = new Socket(Ip,port_img); 
            //Imgage Streams
            img_output= new DataOutputStream(socket2.getOutputStream());
            img_input= new DataInputStream(socket2.getInputStream());

            while(flag)
            {   
                ///////////////////
                img_input.readFully(byte_input);
                **//////   This line makes problem(App dies). But no exception message occurs.  ////** 

                if(byte_input==null)
                    break;
                image_received=BitmapFactory.decodeByteArray(byte_input, 0, byte_input.length);
                Message Msg = new Message();
                Msg.obj=image_received;
                handler_img.sendMessage(Msg);           
            }
            socket2.close();

        }catch(Exception e)
        {
            tv_Text.append(e.getMessage()+"connection failed3\n");
        }
    }       
} 
```

While 循环是等待来自服务器的输入字节数组。处理程序在显示器上显示解码的字节数组。

--> img_input.readFully(byte_input); 我认为这条线有问题。我检查了该处理程序运行良好，并且在空的 while 块中，App 没有死。

会有什么问题？

服务器端代码如下图（消息线程省略）

```
public class server 
{
public static void main(String[] args) {
    Thread thread1=new port1_thread();
    Thread thread2=new port2_thread();
    thread1.start();        
    thread2.start();        
}
}

class port2_thread extends Thread
{
ServerSocket serversocket = null;
public void run()
{
    try
    {
        serversocket = new ServerSocket(9003);
        while(true)
        {
            Socket socket = serversocket.accept();              
            Thread thread= new image_thread(socket);            
            thread.start(); 
        }

    }catch(Exception e){System.out.println("1-2"+e.getMessage());}
}

}

class image_thread extends Thread
{
static ArrayList<DataOutputStream> list2 = new ArrayList<DataOutputStream>();
Socket socket;  
DataOutputStream output2 = null;

image_thread(Socket socket)//constructor
{
    this.socket=socket;
    try  //data output stream
    {
         output2 = new DataOutputStream(socket.getOutputStream());
         list2.add(output2);
    }
    catch (Exception e)
    {
         System.out.println("22"+e.getMessage());
    }
}

public void run()
{
    try
    {
        //output2= new DataOutputStream(socket.getOutputStream());
        DataInputStream input2=new DataInputStream(socket.getInputStream());
        while(true)
        {
            for (DataOutputStream output2 : list2) 
            {
                byte[] b = new byte[1024];  
                input2.readFully(b);
                output2.write(b);
                output2.flush();                

            }               
        }

    }catch(Exception e){System.out.println("33"+e.getMessage());}

    finally
    {
        list2.remove(output2);
        try
        {
            socket.close();
        }catch(Exception ignored){}
    }
}
} 
```

# blender - 用平面搅拌机切割

> ID：14455347
> 
> 赞同：2
> 
> 时间：2013-01-22T09:33:42.713
> 
> 标签：blender

我创建了一个管状物体，每 5 厘米具有不同的半径大小。我拿了这个管子，在它周围放了一个立方体。从立方体中剪出这个管子的形状（布尔修饰符，差异）。

现在我有一个立方体，上面有一个孔，呈管状。我想在这个立方体的中心放置一个平面并将它切成两半。布尔修饰符不起作用。差异只给了我一半的立方体。但我想要两片。细分立方体面并选择顶点并分开很好，但内部结构未切割。

有没有一种简单的方法可以把它减半？是否有执行此操作的插件/脚本？

我已经为此浪费了太多时间，我需要解决它。

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:41:00.017

没有截图就不太容易想象，所以我可能完全错了。如果布尔修饰符按要求完成工作，并且可以选择获得哪一半，我会：

1.  在对象模式下复制对象 (Shift-D)
2.  将布尔修改器应用于每个对象，以便将两半分布在两个对象上
3.  合并两个对象

如果我完全错了，也许你可以张贴截图。

# javascript - 如何使用ajax显示当前进程

> ID：14455348
> 
> 赞同：0
> 
> 时间：2013-01-22T09:33:43.373
> 
> 标签：javascript, ajax, json, asp.net-mvc-3-areas

我正在尝试在客户端显示服务器上的当前进程。

为此，我在会话级别定义了字符串，并且对于每个进程服务器处理器，它都会更新它，如下所示：

```
sessionStatus = "Loading entities from DB"; 
```

或者

```
sessionStatus = "Validates the user information"; 
```

我正在使用这样的ajax和Json：

服务器端：

```
[OutputCache(NoStore = true, Location = OutPutCscheLocation.None, Duration = 0)]
public JsonResult GetStatus()
{
        return Json(new {status = sessionStatus}, JsonRequestBehavior.AllowGet)
} 
```

客户端：

```
setInterval('displayStatus()', 50);

function displayStatus(){
var url = '@(Url.Action("GetStatus"))';
$.ajax({
url: url,
dataType: "json",
async: false,
success: function(result) {
docunent.getElementById('statusText').innerHTML = result.status;
}
});
} 
```

这就是我希望看到的每一秒，这是服务器进程所持有的。

但问题是我只看到第一个动作，然后服务器执行他所有的动作，

最后我看到最后一个动作只在一瞬间。

我的意思是他只忙于服务器上的所有进程，然后才面对客户端。

有人可以教我如何在这个过程中服务器端即使在客户端也可以继续操作，以便我可以实时看到服务器上发生了什么？

谢谢

雷菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:08:39.643

`XmlHTTPRequest`您可以使用 jquerys xhr 回调来执行此操作，它可以让您在发送之前创建自己的。

```
$.ajax({
  xhr: function()
  {
    var xhr = new XMLHttpRequest();
    xhr.upload.addEventListener("progress", function(e){
      if (e.lengthComputable) {
        console.log("Upload Progress: " + e.loaded/e.total)
      }
    }, false);
    xhr.addEventListener("progress", function(e){
      if (e.lengthComputable) {
        console.log("Download Progress: " + e.loaded/e.total)
      }
    }, false);
    return xhr;
  },
  type: 'GET',
url: "http://upload.wikimedia.org/wikipedia/commons/7/7d/Head_Platon_Glyptothek_Munich_548.jpg",
});
//"Download Progress: 0.017997048457690075"
//"Download Progress: 1" 
```

我希望我的问题是正确的。（而且看起来图像实际上还不够大，无法获得不错的进度更新，但想法应该很清楚

# android - 如何提高 OpenGL ES 中乒乓渲染（用于模糊）的性能

> ID：14455353
> 
> 赞同：7
> 
> 时间：2013-01-22T09:33:55.430
> 
> 标签：android, performance, opengl-es, opengl-es-2.0

我正在尝试在我的 Android 设备上使用 OpenGL ES 进行高斯模糊。我使用中提到的方法

[http://rastergrid.com/blog/2010/09/efficient-gaussian-blur-with-linear-sampling/](http://rastergrid.com/blog/2010/09/efficient-gaussian-blur-with-linear-sampling/)

我的应用程序中有两个帧缓冲区（A 和 B）。把A画到B画一维模糊，把B画到A画一维模糊。只模糊一个图像就可以了，它可能会赶上50fps。但是如果更多的图像被模糊，即使非常小，FPS 也会下降到 4~5。使用这种方法很糟糕。

我的问题是：

1.  是否在一帧中多次切换两个 FBO 导致的性能问题？

2.  有没有更好的方法在 Android 设备上进行乒乓渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:03:01.433

您应该只使用一个缓冲区并同时在两个方向上模糊它们。

这是我使用的标准 OpenGL 着色器，发现它非常简单。

```
 uniform sampler2D texture_map;
    uniform float blur;

    uniform float blur_Size;

    float blurSize = 1.0/blur_Size; // I've chosen this size because this will result in that every step will be one pixel wide if the texture is of size 512x512

    void main() {

    if (blur!=0.0){

           vec4 sum = vec4(0.0);

           // blur in y (vertical)
           // take nine samples, with the distance blurSize between them
           sum += texture2D(texture_map, vec2(texcoord.x - 4.0*blurSize, texcoord.y)) * 0.05;
           sum += texture2D(texture_map, vec2(texcoord.x - 3.0*blurSize, texcoord.y)) * 0.09;
           sum += texture2D(texture_map, vec2(texcoord.x - 2.0*blurSize, texcoord.y)) * 0.12;
           sum += texture2D(texture_map, vec2(texcoord.x - blurSize, texcoord.y)) * 0.15;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y)) * 0.16;
           sum += texture2D(texture_map, vec2(texcoord.x + blurSize, texcoord.y)) * 0.15;
           sum += texture2D(texture_map, vec2(texcoord.x + 2.0*blurSize, texcoord.y)) * 0.12;
           sum += texture2D(texture_map, vec2(texcoord.x + 3.0*blurSize, texcoord.y)) * 0.09;
           sum += texture2D(texture_map, vec2(texcoord.x + 4.0*blurSize, texcoord.y)) * 0.05;

           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y - 4.0*blurSize)) * 0.05;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y - 3.0*blurSize)) * 0.09;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y - 2.0*blurSize)) * 0.12;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y - blurSize)) * 0.15;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y)) * 0.16;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y + blurSize)) * 0.15;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y + 2.0*blurSize)) * 0.12;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y + 3.0*blurSize)) * 0.09;
           sum += texture2D(texture_map, vec2(texcoord.x, texcoord.y + 4.0*blurSize)) * 0.05;

           gl_FragColor = sum/2.0;
        } 
```

馈送统一的 blur_Size 宽度或高度（以较大者为准）。如果那太模糊或太少，只需调整您输入的数字。但宽度和高度是一个很好的起点。数字越大越模糊。也尝试平均两者。如果图像真的是矩形的，你的模糊可能太大了。

60x60 图像上的 60 是 1:1 模糊，但如果您的图像是 512x512，则 60 的模糊几乎不会引起注意。模糊是模糊量与图像大小的比率。

它是一种黑客和斜线方法，但它快速简单，没有算法。

祝你好运

# magento - 在管理端 magento 的网格中显示单行而不是组合框的操作标签

> ID：14455360
> 
> 赞同：0
> 
> 时间：2013-01-22T09:34:18.313
> 
> 标签：magento, magento-1.7

我想在管理端 magento 的网格中显示单行而不是组合框的显示操作标签。我的组合框代码是

```
$this->addColumn('action',
            array(
                'header'    =>  Mage::helper('mymodule')->__('Action'),
                'width'     => '100',
                'type'      => 'action',
                'getter'    => 'getId',
                'actions'   => array(
                    array(
                        'caption'   => Mage::helper('mymodule')->__('Edit'),
                        'url'       => array('base'=> '*/*/edit'),
                        'field'     => 'id'
                    ),               
           array(
                        'caption'   => Mage::helper('mymodule')->__('Delete'),
                        'url'       => array('base'=> '*/*/delete'),
            'confirm'  => Mage::helper('mymodule')->__('Are you sure?'),
                        'field'     => 'id'
                    ),
             array(
                        'caption'   => Mage::helper('mymodule')->__('View'),
                        'url'       => array('base'=> '*/*/view'),
                        'field'     => 'id'
                    )
             ),
                'filter'    => false,
                'sortable'  => false,
                'index'     => 'stores',
                'is_system' => true,
        )); 
```

有关组合框样式，请参见图像。![在此处输入图像描述](../Images/96363ac72e9601f98777130356c307af.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:59:59.183

签出此代码

```
$this->addColumn('actions', array(
    'header'    => Mage::helper('adminnotification')->__('Actions'),
    'width'     => '250px',
    'sortable'  => false,
    'renderer'  => 'adminhtml/notification_grid_renderer_actions',
)); 
```

在课堂下`Mage_Adminhtml_Block_Notification_Grid` ，也看到课堂`Mage_Adminhtml_Block_Notification_Grid_Renderer_Actions`

如果您还有任何问题，请告诉我。

# c# - 如何在图表中找到最近的点？

> ID：14455362
> 
> 赞同：1
> 
> 时间：2013-01-22T09:34:21.383
> 
> 标签：c#, winforms, collections, charts

.net 4 vs2010 winform c#

使用添加了一些点

```
chart1.Series[0].Points.AddXY(x,y); 
```

当我点击图表时，光标可能不会落在任何点上。有没有返回最近点的函数？（忘记y，只是x距离。）或者我必须编写自己的二进制搜索函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:40:36.500

```
private void Chart_MouseClick(object sender, MouseButtonEventArgs e)
{
    LineSeries line = (LineSeries)mychart.Series[0];
    Point point = e.GetPosition(line);
    Int32? selectIndex = FindNearestPointIndex(line.Points, point);

    // ...
}

private Int32? FindNearestPointIndex(PointCollection points, Point point)
{
    if ((points == null || (points.Count == 0))
        return null;

    Func<Point, Point, Double> getLength = (p1, p2) => Math.Sqrt(Math.Pow(p1.X - p2.X, 2) + Math.Pow(p1.Y - p2.Y, 2)); // C^2 = A^2 + B^2
    List<Points> results = points.Select((p,i) => new { Point = p, Length = getLength(p, point), Index = i }).ToList();
    Int32 minLength = results.Min(i => i.Length);

    return results.First(i => (i.Length == minLength)).Index;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:58:55.360

要在一组无序点中找到最近的点，您必须遍历它们并跟踪最小距离。这具有 O(n) 的时间复杂度。

您可以通过在更有条理的数据结构（例如[R-tree](http://en.wikipedia.org/wiki/R-tree)）中维护点来显着改善这一点。如果您不想实现自己的，可以使用第三方库。许多数据库已经支持空间索引的 R 树。

如果您真的只想搜索具有最近 X 坐标的点，可以通过将点存储在排序集合（例如 a `SortedList<TKey, TValue>`）中并执行二进制搜索（`SortedList<TKey, TValue>.IndexOfKey`已经实现）来进一步简化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:04:53.813

```
/*My Fuzzy Binary Search*/
private int FindNearestId(System.Windows.Forms.DataVisualization.Charting.DataPointCollection p, uint ClickedX)
{
    int ret = 0;
    int low = 0;
    int high = p.Count - 1;
    bool bLoop = true;

    while (bLoop)
    {
        ret = (low + high) / 2;
        switch (FindNearestId_Match(p, ClickedX, ret))
        {
        case 0:
            high = ret+1;
            break;
        case 1:
            bLoop = false;
            break;
        case 2:
            low = ret-1;
            break;
        }
    }

    return ret+1;
}

private int FindNearestId_Match(System.Windows.Forms.DataVisualization.Charting.DataPointCollection p, uint ClickedX, int id)
{
    uint id0 = Convert.ToUInt32(p[id].XValue);
    uint id1 = Convert.ToUInt32(p[id+1].XValue);

    if ( (id0 <= ClickedX) && (ClickedX < id1) )
    {
        return 1;
    }
    else if ((id0 < ClickedX) && (ClickedX > id1))
    {
        return 2;
    }
    else
    {
        return 0;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T16:26:07.640

灵魂可以更清楚。（如上所述，您应该使用日志复杂性来访问项目）

双 x 值解决方案：

```
double FindNearestPointYValueInSeries( System::Windows::Forms::DataVisualization::Charting::Series ^pxSeries, double dSearchedPosition )
{
    int i_min = 0;
    int i_max = pxSeries->Points->Count - 1;
    int i_mean = 0;
    double d ;

    if ( i_max < 0 ) // not defined - minimum one point required
        return Double::NaN;

    while ( i_min <= i_max )
    {
        i_mean = (i_max + i_min ) / 2; // index of compared value in series
        d = pxSeries->Points[ i_mean ]->XValue; // compared value 

        if ( d > dSearchedPosition ) // greater - search in right part
            i_max = i_mean - 1;
        else if ( d < dSearchedPosition ) // lower - search in left part
            i_min = i_mean + 1;
        else // equal ?
            return d;
    }

    // delta is dSearchedPosition - pxSeries->Points[ i_mean ]->YValues[0]

    // get Y value ( on index 0 ) 
    return pxSeries->Points[ i_mean ]->YValues[0];
} 
```

# c# - 隐藏和显示标签和按钮

> ID：14455371
> 
> 赞同：1
> 
> 时间：2013-01-22T09:35:04.973
> 
> 标签：c#, asp.net

我显示了 2 个标签和 2 个文本框和 1 个按钮。

当页面加载`Name`和`Button`（将最初显示）。稍后当我单击时，`Button`我需要显示`age` `label`and `textbox`。我怎样才能做到这一点 ？

```
<ol>
     <li>
          <asp:Label runat="server" AssociatedControlID="Name">
             User name
          </asp:Label>
          <asp:TextBox runat="server" ID="Name" Width="167px" />
          <asp:Button ID="Button1" runat="server" Text="Button" />
     </li>                           
     <li>
          <asp:Label runat="server" AssociatedControlID="age">age</asp:Label>
          <asp:TextBox runat="server" ID="age" TextMode="age" Width="240px" />
     </li>                         
</ol> 
```

按钮按下代码

```
protected void Button1_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T09:50:18.133

您可以将标签/文本框`Visible`属性设置为`True`服务器端。或者，您可以使用`JavaScript`来避免回发到服务器。

添加`OnClientClick`到您的`button`：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="ShowLabel();"/> 
```

并在页面上声明`JavaScript`函数：

```
<script type="text/javascript">
    function ShowLabel() {
      // Note that the client ID might be different from the server side ID
      document.getElementById('lblAge').style.display = 'inherit';
    }
</script> 
```

您需要将`Label`显示样式设置为`none`初始。

```
<asp:Label ID="lblAge" style="display: none;" runat="server" AssociatedControlID="age">age</asp:Label> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T09:45:36.007

试试下面的代码：

您需要`Visible`根据您的要求将控件的属性设置为 True 或 False。默认情况下，只要将所有控件添加到页面上，它们就会在屏幕上可见。您需要执行以下操作：

1.  您需要删除`TextMode="age"`，因为没有任何支持的年龄类型的文本模式。
2.  如果要在后面的代码中访问控制服务器端，则需要定义控制 ID。因此，定义与 Age 文本框相对应的 Label 的 ID。

默认情况下，使用以下代码将看不到年龄标签和文本框：

```
 <asp:Label ID="lblAge" runat="server" AssociatedControlID="age" Visible="false">age</asp:Label>
      <asp:TextBox runat="server" ID="age" Width="240px"  Visible="false"/> 
```

隐藏代码：按钮单击年龄标签后，使用以下代码可以看到文本框：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        lblAge.Visible = true;
        age.Visible = true;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T09:42:32.323

首先添加`id`到元素并设置为`visible`false

```
<asp:Label runat="server" AssociatedControlID="age" Visible="false" Id="lbl1">age</asp:Label>
<asp:TextBox runat="server" ID="age" TextMode="age" Width="240px" Visible="false" /> 
```

按钮点击事件设置为`visible`真

```
protected void Button1_Click(object sender, EventArgs e)
{
    lbl1.Visible = True;
    age.Visible = True;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T09:42:15.420

这是asp.net的基本概念。您可以使用控件的可见属性。

1.  您的 TextMode 枚举是错误的。[Textbox.TextMode TextMode](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textboxmode.aspx)没有 Age 枚举

`<li> <asp:Label runat="server" AssociatedControlID="age" id="lblAge">age</asp:Label> <asp:TextBox runat="server" ID="age" TextMode="age" Width="240px" /> </li>`

在后面的代码中

```
protected void Button1_Click(object sender, EventArgs e)
{
  lblAge.Visible=true;
  age.Visible=true;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-13T06:17:13.523

```
 protected void Page_Load(object sender, EventArgs e)
    {
        NameLabel.Visible = false;
        NameBox.Visible = false;
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        NameLabel.Visible = true;
        NameBox.Visible = true;
    } 
```

# java - Eclipse java 调试器：从 Step Over 中排除一些行

> ID：14455372
> 
> 赞同：-2
> 
> 时间：2013-01-22T09:35:17.267
> 
> 标签：java, eclipse, debugging, custom-build-step

我正在调试一个 java 源代码，我希望一组指令必须在按下 Step Over 的同时执行。

像这样的东西：

```
debugcursor -> int a=10;
               int b=a+a;
               a=b*b;
               a++; 
```

并且，在按下“Step Over”之后：

```
 int a=10;
               int b=a+a;
               a=b*b;
debugcursor -> a++; 
```

是否可以在没有任何断点和使用 Step Run 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:44:18.627

除了与 一起使用之外，您**没有**任何其他选择。`BreakPoints``Resume (F8)`

# objective-c - 自定义单元分段事件处理程序

> ID：14455373
> 
> 赞同：0
> 
> 时间：2013-01-22T09:35:17.477
> 
> 标签：objective-c, uitableview, handler, custom-cell

我的表格视图有一个自定义单元格，
![在此处输入图像描述](../Images/9b0c4c8107a5c14176379270916e066f.png)

我想为段 ON/OFF 分配值更改事件。理想情况下，事件根据标签值作为 POST 参数向 Web 服务发送异步请求以更新值。

我认为有两种方法可以做到这一点：
1\. 从 IB 为 CustomCell.m 文件中的事件 valueChanged 制作一个 IBAction。
2\. 使用 addTarget 动态分配处理程序，就像您分配给函数一样。

我的方法正确吗？？如果是，有人可以告诉我/指向一些教程，我可以在其中学习为 valueChanged 事件添加事件处理程序。处理程序必须至少接受一个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:45:13.013

```
 NSArray *itemArray = [NSArray arrayWithObjects: @"ON", @"OFF", nil];
        self.snoozeSgCon= [[UISegmentedControl alloc] initWithItems:itemArray];
        self.snoozeSgCon.frame = CGRectMake(15, 330, 280, 40);
        self.snoozeSgCon.segmentedControlStyle = UISegmentedControlStylePlain;
        self.snoozeSgCon.selectedSegmentIndex = 1;
        [self.snoozeSgCon addTarget:self action:@selector(segmentActionSnooze:) forControlEvents:UIControlEventValueChanged];
        [self.cell.contentView addSubview:self.snoozeSgCon];

-(void)segmentActionSnooze:(id)sender
{
    switch ([self.snoozeSgCon selectedSegmentIndex])
    {
        case 0:
        {
           // code for ON BUtton
        }
        case 1:
        {
            // code for OFF BUtton
        }

     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:41:57.597

[段控制值改变事件教程](http://iphonedevsdk.com/forum/tutorial-discussion/29597-uisegmentedcontrol-tutoria.html)

这可能会帮助你。

# c# - 使用 C#/NewtonSoft 反序列化 JSON 时，可以将部分结果展平吗？

> ID：14455374
> 
> 赞同：6
> 
> 时间：2013-01-22T09:35:18.723
> 
> 标签：c#, json, json.net

如果我的 JSON 是：

`{ cat: 1, dog: 2, price: { initial: 1, new: 2 } }`

是否可以将其反序列化为具有 cat、dog、initialprice、newprice 属性的单个类？

也许有一种属性或方法可以使用 JsonProperty 属性来执行此操作。

我正在使用 Newtonsoft.Json 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:55:33.333

以下内容有点粗略，但我认为你正在尝试做的事情。大小写与您的 JSON 不同，因此如果不进行一些修改，它不会往返于您的输入。

```
 public class TestClass
    {
        public decimal Cat { get; set; }
        public decimal Dog { get; set; }
        [Newtonsoft.Json.JsonProperty]
        private Price Price { get; set; }

        [Newtonsoft.Json.JsonIgnore]
        public decimal InitialPrice
        {
            get { return this.Price.Initial; }
        }

        [Newtonsoft.Json.JsonIgnore]
        public decimal NewPrice
        {
            get { return this.Price.New; }
        }
    }

    class Price
    {
        public decimal Initial { get; set; }
        public decimal New { get; set; }
    } 
```

快速测试方法：

```
 static void Main(string[] args)
    {
        const string JSON = "{ cat: 1, dog: 2, price: { initial: 1, new: 2 } }";

        var deserialised = Newtonsoft.Json.JsonConvert.DeserializeObject<TestClass>(JSON);
        var serialised = Newtonsoft.Json.JsonConvert.SerializeObject(deserialised);
    } 
```

我们已经定义了一个 Price 类型来匹配从 JSON 中的 price 属性自然反序列化的内容，将其设为私有，然后使用 TestClass 上的两个只读属性访问其成员。所以 - 代码将看到从您定义的 JSON 输入中解析的您想要的结构（四个属性，Cat、Dog、InitialPrice、NewPrice）。

# ruby-on-rails - 设计中的匿名用户 - rails

> ID：14455375
> 
> 赞同：3
> 
> 时间：2013-01-22T09:35:22.277
> 
> 标签：ruby-on-rails, authentication, registration, lazy-evaluation

我是 Rails 新手，我尝试使用匿名用户进行简单的身份验证。我按照[本](http://blog.bignerdranch.com/1679-lazy-user-registration-for-rails-apps/)教程进行操作，但出现此错误：

```
undefined method `find_or_initialize_by_token' 
```

**这是我的 AnonymousUser 模型：**

```
class AnonymousUser < User
  ACCESSIBLE_ATTRS = [:name, :email]
  attr_accessible *ACCESSIBLE_ATTRS, :type, :token, as: :registrant
  def register(params)
    params = params.merge(type: 'User', token: nil)
    self.update_attributes(params, as: :registrant)
  end
end 
```

**这是我的用户模型：**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :confirmable, :lockable, :recoverable,
    :rememberable, :registerable, :trackable, :timeoutable, :validatable,
    :token_authenticatable
  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

最后一个重要的是我的**ApplicationController**有这个错误：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def authenticate_user!(*args)
    current_user.present? || super(*args)
  end

  def current_user
    super || AnonymousUser.find_or_initialize_by_token(anonymous_user_token).tap do |user|
      user.save(validate: false) if user.new_record?
    end
  end

  private
  def anonymous_user_token
    session[:user_token] ||= SecureRandom.hex(8)
  end
end 
```

有人告诉我，如果 AnonymousUser 用户继承自 User 然后 AnonymousUser 有方法调用`find_or_initialize_by_token`，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:00:38.020

如果您安装了最新的 rails，请尝试重构：

```
# in ApplicationController#current_user

AnonymousUser.find_or_initialize_by_token(anonymous_user_token).tap do |user|
  user.save(validate: false) if user.new_record?
end 
```

像这样：

```
AnonymousUser.safely_find(anonymous_user_token) 
```

`find_or_initialize_by_token`并将和推`save(validate: false)`入模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:18:47.133

我写了你引用的博客文章，但今天，我会用

```
AnonymousUser.where(anonymous_user_token: anonymous_user_token).first_or_initialize 
```

AFAIK 已弃用动态查找器。

但是，@Saurabh Jain 在他的建议中是绝对正确的，即将该块重构为 AnonymousUser 上一个不错的小按钮类方法。

# c# - 数据未排序

> ID：14455378
> 
> 赞同：0
> 
> 时间：2013-01-22T09:35:27.507
> 
> 标签：c#, datatable

我使用下面的代码对数据表中的数据进行排序。我尝试了两种不同的方法，但这些方法中没有一个真正起作用。order 也是 DECS/ASC，colum 是 IE 10 列的索引。

有谁知道为什么会这样。

```
 string[] tosort = sortval.Split('-');
        string order = tosort[1];
        int colum = Convert.ToInt32(tosort[0]);
        DataView dv = new DataView();
        DataTable dt = new DataTable();
        dt = extractedData;
        string columnName = dt.Columns[colum].ToString();
        dt.DefaultView.Sort = columnName + " " + order;
      //  dv = dt.AsDataView();
      //  dv.Sort = dv.Table.Columns[colum].ColumnName + " " + order;
     //   dv.Sort = dv.Table.Columns[colum].ColumnName + " " + order;
     //   dt = dv.ToTable();
        extractedData = dt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:40:14.837

排序不会改变`DataTable`它适用于视图中的数据顺序，因此您实际上应该绑定`DataView`类似`dt.DefaultView`或`dt.DefaultView.ToTable();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:40:49.263

我在这里假设了很多，但是如果您的排序正确，那么我认为您的数据循环不正确：

```
 // This should follow the correct sort order
 foreach(DataRowView r in extractedData.DefaultView)
 {
     Console.WriteLine(r["colName"]);
 } 
```

或者，如果您绑定到 datagridview

```
dataGridView.DataSource = extractedData.DefaultView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:41:59.157

[`DataView.Sort`](http://msdn.microsoft.com/en-us/library/system.data.dataview.sort.aspx)不对底层证券进行排序，`DataTable`但它是`DataView`. 所以表中的行与以前的顺序相同。

您可以使用从结果[`DataView.ToTable`](http://msdn.microsoft.com/en-us/library/a8ycds2f.aspx)中创建一个新`DataTable`的：

```
dt.DefaultView.Sort = columnName + " " + order;
extractedData = dt.DefaultView.ToTable(); 
```

# ios - 网络活动上/下/关闭的 iOS 事件/通知

> ID：14455382
> 
> 赞同：4
> 
> 时间：2013-01-22T09:35:37.250
> 
> 标签：ios, objective-c, notifications, iphone-privateapi, springboard

当网络活动从无到启动（反之亦然）时，我想要我的 iOS 应用程序的事件/回调。类似于 Android 处理 onDataActivity() 的方式。我不是在谈论可达性，而是在数据实际开始或停止传输时。

该应用程序不适用于 App Store，也不适用于越狱。我有一个类似的功能，可以通过使用来检测屏幕何时开启/关闭

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
      NULL, // observer
      displayStatusChanged, // callback
      CFSTR("com.apple.iokit.hid.displayStatus"), // event name
      NULL, // object
      CFNotificationSuspensionBehaviorDeliverImmediately); 
```

以及其他事件，例如

```
com.apple.springboard.hasBlankedScreen
com.apple.springboard.lockstate 
```

现在我想知道是否有数据开始或停止传输的事件？或者，如果有人可以向我指出可以通过上述方式监控的所有事件的完整列表的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T11:23:30.067

我在越狱的 iOS 5 iPhone 上监控了标准的 Darwin 通知和 Core Telphony 通知。

我没有看到任何真正符合您要求的**通知。**

有一些核心电话通知会出现，但不是在每次传输开始和结束时都会发出。看起来当数据服务连接时，可能会有一些通知，但同样，它们确实不是您所要求的：

```
kCTIndicatorRadioTransmitNotification
kCTRegistrationDataStatusChangedNotification 
```

如果您想尝试自己监控**所有**Core Telephony 通知，您可以使用 Core Telephony 框架和 CT 通知中心：

```
-(void) registerCallback {
   id ct = CTTelephonyCenterGetDefault();
   CTTelephonyCenterAddObserver(ct,   // center
                                NULL, // observer
                                telephonyEventCallback,  // callback
                                NULL,                    // event name (or all)
                                NULL,                    // object
                                CFNotificationSuspensionBehaviorDeliverImmediately);
}    

static void telephonyEventCallback(CFNotificationCenterRef center, void* observer, CFStringRef name, const void* object, CFDictionaryRef userInfo)
{
    //NSLog(@"telephonyEventCallback()");

    NSString* notifyName = (__bridge NSString*)name;
    if ([notifyName isEqualToString:@"kCTMessageReceivedNotification"]) {  // received SMS

    } /* look for other notification names here */
} 
```

在上面的调用中，我传递`NULL`给`CTTelephonyCenterAddObserver()`调用，它注册了**所有**通知。如果您知道要查找的内容，当然可以传递一个特定通知的名称，例如您发布的示例`com.apple.iokit.hid.displayStatus`。

关于[john.k.doe 的 option](https://stackoverflow.com/a/14545251/119114)，您可以尝试在该属性上使用 Key Value Observing，以便在它更改时得到通知：

```
UIApplication* app = [UIApplication sharedApplication];
[app addObserver: self forKeyPath: @"networkActivityIndicatorVisible" options: NSKeyValueObservingOptionNew context: nil]; 
```

您的观察者回调在哪里：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqualToString:@"networkActivityIndicatorVisible"]) {
        // process here
        NSLog(@"network activity indicator change!");
        BOOL active = [UIApplication sharedApplication].networkActivityIndicatorVisible;
    }
} 
```

我不确定 KVO 是否仍然可以在后台工作，这可能取决于您的应用程序如何管理后台。

但是，当然，这要求应用程序在访问网络时实际使用该属性，并非所有应用程序都这样做。不幸的是，Apple 甚至将该指标设置为第三方开发人员需要控制的东西。在 Android 和 BlackBerry 上，操作系统足够智能，可以知道何时发送/接收。

所以，这仍然只是你需要的部分:(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T07:08:22.047

确实没有针对此的系统通知。

如果您正在谈论监视进出您自己的应用程序的活动，那么您显然可以控制它，并且应该能够将您知道的任何访问网络的呼叫括起来……</p>

如果您正在谈论监视所有其他应用程序的活动，并且您愿意假定它们严格遵守 Apple 准则并打开/关闭状态栏中的网络活动状态指示器，您可以调用：

```
[[UIApplication sharedApplication] isNetworkActivityIndicatorVisible]; 
```

但这显然需要您以轮询方式执行此操作，最好在后台线程/ GCD 队列上完成。然后您可以发布自己的通知，以便在您的应用程序的其他地方看到。

# linux - 单个 Qt 应用程序可以在多个 X 显示器上打开窗口吗？

> ID：14455384
> 
> 赞同：5
> 
> 时间：2013-01-22T09:35:47.193
> 
> 标签：linux, qt, x11

我有一个 Qt 应用程序（在 Linux 上运行），它应该在另一个 X 服务器上打开一个额外的窗口，在远程计算机上运行。

有没有办法在 Qt 中做到这一点？

我希望避免更复杂的设置，例如 - DMX（在多个其他 X 服务器之上的虚拟 X 服务器）[http://dmx.sourceforge.net/](http://dmx.sourceforge.net/)，或者 - 为额外的窗口创建第二个应用程序，加上一些两个应用程序之间的通信

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:36:08.993

您可以尝试生成一个新进程，并将其 DISPLAY 环境变量设置为另一个 X 服务器。

首先尝试从 bash 执行它以查看它是否有效，因为我不完全确定：

```
export DISPLAY=:0.0
./my_qt_application 
```

将 替换为`:0.0`您的其他 X 服务器。

# wpf - 使用 ViewModelLocator 时如何标记视图模型？

> ID：14455385
> 
> 赞同：1
> 
> 时间：2013-01-22T09:35:50.020
> 
> 标签：wpf, mvvm, viewmodel

我有多个视图模型实例：

```
<views:MyView x:Name="view1" mefed:ViewModelLocator.NonSharedViewModel="MyViewModel" />
<views:MyView x:Name="view2" mefed:ViewModelLocator.NonSharedViewModel="MyViewModel" /> 
```

这两个实例应该**监听不同的消息**。因此，我需要以某种方式标记这些视图模型实例。如何？

我正在使用`MEFedMVVM`和`Prism`。应该有一种方法可以让视图模型了解某些状态。例如：

```
<views:MyView x:Name="view1" mefed:ViewModelLocator.NonSharedViewModel="MyViewModel">
  <!-- Let the viewmodel know it is of type X -->
</views:MyView>
<views:MyView x:Name="view2" mefed:ViewModelLocator.NonSharedViewModel="MyViewModel">
  <!-- Let the viewmodel know it is of type Y -->
</views:MyView> 
```

**如何做到这一点？**

在理想情况下，您将通过 XAML 使用视图的参数化构造函数，但这不受支持。另一个想法是为视图使用不同的类，但这很快就会使代码膨胀！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:53:20.820

## 快速回答和总结：

正如您所注意到的，您真正想要的是从 XAML 参数化您的 ViewModel。所以我的直觉是编写一个**附加行为**来提供为您的 ViewModel 传递参数的能力。更具体地说，想到的是我们想要一个*单独*的附加行为类，我们可以指定（a）我们想要的 ViewModel*和**（* b）那个 ViewModel 的参数。为了在单个类中同时满足*这两个需求，同时尽可能保持*[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，我认为使用“混合”行为是最简单的，因为混合行为不是静态类，因此使用它们似乎更容易将两条相关信息一起传递。

## 解释：

首先快速免责声明：我没有使用过 MEFedMVVM 或 Prism（但我使用过其他 MVVM 库），所以我的回答使用了我最近学会使用的更通用的方法。因此，当您以“正常”方式使用事物（即自动连接 DataContext 等）时，这种方法不依赖于 Prism 可能为您提供的任何“神奇”东西，所以让这种思维方式框架化。

关于“常规”附加行为和“混合”行为之间差异的好[**文章，我喜欢这篇博**](http://briannoyes.net/2012/12/20/AttachedBehaviorsVsAttachedPropertiesVsBlendBehaviors.aspx)文。我不会在这里重复他的解释，但我注意到的关键是常规的附加行为似乎只依赖于一条*信息*（即一个“参数”）来完成它的工作。如（来自博客文章）：

```
<GridView local:ItemClickNavBehavior.Destination="Home" ...> 
```

现在让我们根据您的情况来说明，**如果您只使用*常规*的Attached Bahaviors** ，它会如何工作。您将编写一个附加行为类，将其称为“MyViewModel1Creator”，它将： **（1）**注册一个名为“Type”的附加属性和 **（2）**包括“类型”的更改回调处理程序（在最初设置时也会调用它 - 请参阅链接博客文章中的“HookupBehavior”方法）。在此更改回调中，您将实例化“ViewModel1”并将“Type”附加属性的值传递给它。同样在此方法中，您可以处理任何其他必需品，例如为视图设置 DataContext 等。您可以使用第一个参数访问附加属性附加到的对象（在本例中为视图对象）回调处理程序（依赖对象参数）。

然后，您对“MyViewModel1Creator”类的 Xaml 使用将如下所示：

```
<views:MyView x:Name="view1" MyBehaviors:MyViewModel1Creator.Type="X" />
<views:MyView x:Name="view2" MyBehaviors:MyViewModel1Creator.Type="Y" /> 
```

虽然这可行，但我认为**这种方法有一个缺点**（使用*常规*附加属性）。要使用这种方法，您必须为每个 ViewModel 创建一个单独的 Attached Behavior 类，这意味着如果您有 3 个 ViewModel（“ViewModel1”、“ViewModel2”、“ViewModel3”），那么您需要编写 3 个 Attached Behavior 类（ “ViewModel1Creator”、“ViewModel2Creator”、“ViewModel3Creator”）。每个都将实例化其各自的 ViewModel（并公开一个“类型”附加属性，如上所示）。另一个缺点是似乎更难找到一种方法来添加*额外*的参数来传递。

与上述方法稍有替代但在[DRY方面](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)**同样不足**的方法是拥有一个包含多个名称如“CreateViewModel_1_WithType”的附加属性的类（称为“MyViewModelCreator” - 这次没有“1”） "、"CreateViewModel_2_WithType"、"CreateViewModel_3_WithType" 等。它的用法如下所示：

```
<views:MyView x:Name="view1"
              MyBehaviors:MyViewModelCreator.CreateViewModel_1_WithType="X" />
<views:MyView x:Name="view2" 
              MyBehaviors:MyViewModelCreator.CreateViewModel_1_WithType="Y" /> 
```

同样，这些方法不是很干燥，所以我们真的需要......

## **现在让我们考虑如果我们使用[“混合”行为](http://msdn.microsoft.com/en-us/library/ff726531%28v=expression.40%29.aspx)**它会如何工作：

您将编写一个派生自类型化 Behavior 的类 - 对于您的视图，它可能是`Behavior<UserControl>`，因此您的类标题可能如下所示
`public class ViewModelSetupBehavior : Behavior<UserControl>`：在此类中，您将：**（1）**注册任意数量的依赖属性，包括“类型”依赖属性和“ViewModelName”依赖属性，以及**（2）**您将覆盖该`OnAttached()`方法，您将在其中实例化任何 ViewModel由“ViewModelName”依赖属性的值指示，并且还将“类型”依赖属性的值传递给它。同样，这也是处理任何其他必需品的地方，例如为视图设置 DataContext 等。您可以访问行为“附加到”的对象`AssociatedObject`财产。

这可以让你这样做：

```
<views:MyView x:Name="view1">
    <i:Interaction.Behaviors>
        <MyBehaviors:ViewModelSetupBehavior ViewModelName="ViewModel1" Type="X" SomeOtherParam="bla" />
    </i:Interaction.Behaviors>
</views:MyView>

<views:MyView x:Name="view2">
    <i:Interaction.Behaviors>
        <MyBehaviors:ViewModelSetupBehavior ViewModelName="ViewModel1" Type="Y" />
    </i:Interaction.Behaviors>
</views:MyView> 
```

现在请注意，我们可以使用*单个*Behavior 类来创建*所有*ViewModel，并且我们可以传入*几个*参数来指示我们希望如何实例化 ViewModel。

# javascript - 在 Firefox 中禁用后，表单元素永远不会启用

> ID：14455387
> 
> 赞同：0
> 
> 时间：2013-01-22T09:35:54.977
> 
> 标签：javascript, forms, firefox, element

我在我的应用程序中遇到了一个奇怪的问题。当用户单击应用程序中的刷新按钮时，表单元素会被禁用但永远不会启用。这只有时会发生，并且仅在 Firefox 中发生。以下是用于禁用表单元素的 javascript 代码片段。

```
util.Document.setDisabledOnFormElements = function(disabled, baseElement) {
  if (util.Browser.is(util.Browser.IE)) {
    //disabled property is inherited in ie.
    baseElement.disabled = disabled;
  } else {
    var dels = util.Document.DISABLEABLE_FORM_ELEMENTS;
    var els;
    for (var h = 0, hLength = dels.length; h < hLength; h++) {
      //disabled property is not inherited, so have to set for disableable elements explicitly.
      els = baseElement.getElementsByTagName(dels[h]);
      for (var j = 0, jLength = els.length; j < jLength; j++) {
        els[j].disabled = disabled;
        els[j] = null;
      }
      els = null;
    }
    dels = null;
  }
}; 
```

这个 setDisabledOnFormElements 函数由 for 循环调用，表单中的所有元素都作为参数给出。'disabled' 参数是一个布尔对象。它告诉是禁用元素还是启用元素。

在 IE 和 Chrome 中，这工作得很好。但是在 FF 表单元素中，单击刷新按钮后永远不会启用（这不是浏览器的刷新按钮）。有人知道这里的问题吗？

# database - 在更新网站时更改数据库表

> ID：14455391
> 
> 赞同：1
> 
> 时间：2013-01-22T09:36:09.813
> 
> 标签：database, updating, alter

这似乎是每个 Web 应用程序中不断出现的问题。您正在改进后端代码，并且需要更改数据库中的表才能这样做。在开发系统上手动执行没有问题，但是当您将更新的代码部署到生产服务器时，它们也需要自动更改数据库表。

我见过各种处理这些情况的方法，都有各自的好处和问题。粗略地说，我得出了以下两种可能性；

1.  专用更新脚本。需要手动启动更新。要求以预定义的顺序完成所有表更改（严格的发布计划，数据库上没有简单的快速修复）。通常需要维护一个单独的更新过程以及一些记录和管理版本号的方法。好处是它不会影响正在运行的代码。

2.  在运行时检查表属性并在需要时更改它们。无需手动交互，表更改可能以任何顺序发生（因此对数据库的快速修复很容易部署）。另一个好处是代码通常更容易维护。明显的问题是它需要检查表属性的次数比它需要的多得多。

是否有任何其他一般可能性或方法来处理在应用程序更新时更改数据库表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:29:11.460

我会分享我看到的效果最好的东西。它只是在您的第一个选项上进行扩展。

我在生产中更新模式时通常看到的步骤：

1.  删除前端应用程序。这可以防止在模式更新期间写入任何数据。我们不希望写入失败，因为关系混乱或表突然与应用程序不同步。

2.  可能会断开数据库连接，因此无法建立连接。有时，您甚至不知道使用您的数据库的代码！

3.  按照您在第一个选项中的描述运行脚本。这肯定需要仔细规划。没错，您需要一个预定义的订单来应用更改。此外，我经常会注意到您需要两组脚本，一组用于模式更新，一组用于数据更新。例如，如果要添加不可为空的字段，则可以先添加可空字段，然后运行脚本以输入默认值。

4.  手头有回滚脚本。这是至关重要的，因为您可能会做出您认为需要的所有更改（因为它们在开发中都运行良好），然后在将应用程序重新上线之前发现应用程序无法正常工作。有一个退出策略是很好的，这样你就不会陷入“哦，废话，我们破坏了应用程序，我们已经离线好几个小时了，我们该怎么办？！”

5.  确保您已准备好备份，以防 (4) 变得*非常*糟糕。

6.  协调应用程序更新与数据库更新。通常您会先进行数据库更新，然后再推出新代码。

7.  （可选）许多公司进行部分推出以进行测试。我从来没有这样做过，但是如果您有 5 个应用程序服务器和 5 个数据库服务器，您可以先部署到 1 个应用程序/1 个数据库服务器，然后看看情况如何。然后，如果它很好，您继续使用其余的生产机器。

找出最适合您的方法肯定需要时间。根据我进行大量生产数据库更新的经验，没有灵丹妙药。最重要的是花时间并在跟踪更改（如您提到的版本控制）方面受到纪律处分。

# php - Smarty 表偶奇数

> ID：14455396
> 
> 赞同：4
> 
> 时间：2013-01-22T09:36:13.610
> 
> 标签：php, smarty

我正在使用 PHP smarty 模板。我需要创建奇数行突出显示。请给我发送示例如何做到这一点。

我也有变量：

```
$smarty.foreach.product.index 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T21:06:44.817

对于这种情况，smarty 有一个叫做 {cycle} 的方法

```
<table>
{foreach $products as $product}
<tr class="{cycle values="odd,even"}">
   <td>{$product.name}</td>
</tr>
{/foreach}
</table> 
```

结果将是：

```
<table>
<tr class="odd">
   <td>1st product</td>
</tr>
<tr class="even">
   <td>2nd product</td>
</tr>
<tr class="odd">
   <td>3rd product</td>
</tr>
</table> 
```

在您的样式表文件中，为奇数行和偶数行定义属性，如下所示：

```
tr.even td{background: #CCCCCC;}
tr.odd td{background: #EFEFEF;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:48:08.687

```
<table>
{foreach key=i item=row from=$items}
<tr{if $i%2==1} bgcolor=#e4e4e4{/if}><td>{$i}</td></tr>
{/foreach}
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-25T13:10:31.723

```
{section name=myloop start=0 loop=10 step=1}
<tr class="{if $smarty.section.myloop.index is even}tr_even{else}tr_odd{/if}"><td>{$smarty.section.myloop.index}</td></tr>
{/section} 
```

# java - 可以插入的 InputStream

> ID：14455400
> 
> 赞同：1
> 
> 时间：2013-01-22T09:36:34.500
> 
> 标签：java, concurrency, io

是否可以制作`InputStream`与 base 相同的an `InputStream`，除了当基本流被阻塞时，可以通过调用方法将字节插入流中？草图：

```
public class HackInputStream extends InputStream {
    public HackInputStream (InputStream base) { /* stuff */ }
    public int read() throws IOException { /* stuff */ }
    public void insertByte(byte b) { /* stuff */ }
} 
```

我只会在基本流被绝对阻塞时插入字节，所以竞争条件不应该成为问题。我尝试使用一个线程来实现这个类，该线程贪婪地将字节从基本流读取到`LinkedBlockingQueue`. `insertByte`将字节直接插入队列，并`read`简单地从队列中读取字节，当队列为空时阻塞。

这几乎奏效了......但是当我`Scanner`使用 using时`new Scanner(new HackInputStream(System.in)`，该`nextLine`方法不起作用。不幸的是，我首先想要这个奇怪的类的原因是为了解锁一个被阻止的`Scanner`！

（这是我要解决的问题，以防有人有更好的解决方案：

我的程序是一个“shell”，它在给定命令时启动任务（线程）。其中一些任务会自行终止，而有些则不会。我想在任务终止时立即返回到命令提示符，但如果任务永远不会终止，我想通过输入换行符来终止它。

目前，主线程等待任务终止，而看门狗线程等待换行符，如果接收到则终止任务。现在，如果任务自行终止，我无法在不手动输入换行符的情况下输入命令。看门狗线程被不间断地阻塞，无论如何它都会消耗下一行输入，可能导致下一个命令未读。我正在尝试进行更改`System.in`，以便可以以编程方式为其提供换行符。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:26:44.703

更新：我以一种更简单的方式解决了我的问题，仅`Scanner.nextLine()`在任务仍在运行时调用。

# c - 没有文件系统的 Gettext

> ID：14455401
> 
> 赞同：6
> 
> 时间：2013-01-22T09:36:45.407
> 
> 标签：c, localization, internationalization, embedded, gettext

对于带有 GUI 的嵌入式系统，我们正在使用我们的自定义翻译系统。字符串存储在微控制器的代码 ROM 中。

目前我们有多达 10 种语言和大约 400 个翻译字符串（因产品变体而异）。

我们目前的系统相当繁琐，我相信 gettext 会是一个更好的解决方案。

据我了解gettext，它需要使用`bindtextdomain`来设置包含已编译翻译文件（*.mo）的目录。

有没有办法从记忆中读取翻译？那就是我想在二进制文件中包含已编译的 *.mo 文件，并设置 gettext 以使用这些文件。或者，翻译数据将存储在没有文件系统的数据 EEPROM 中。

或者您能否推荐一个不同的翻译系统用于具有 C 接口的微控制器系统（16 位或 32 位，256 至 512 kbyte ROM）？

编辑：我应该补充一点，除了微控制器固件之外，能够保持翻译将是切换到 gettext 的一个原因。用户将使用我们已经随系统提供的配置软件加载适当的翻译数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:57:38.237

这就是我要做的：我会在代码的常量变量中包含二进制“.mo”。您可以编写一个从二进制到字符数组的简单转换器，并在您的程序中编译该“.mo”文件。您将拥有一组“.mo”文件数据，每个数据都使用不同的语言。

我会修改 libintl 源代码以访问其中一个数组。检查文件 loadmsgcat.c，函数`_nl_load_domain`. 看看它是如何尝试使用`mmap()`的（因此它准备好将所有内容都保存在内存中）。只需在此处添加一些代码即可根据请求的语言决定使用“.mo”数组的哪个元素。

我还没有尝试过，但是鉴于您的情况，这是我会尝试的。看起来不太难。

# java - Eclipse 插件/JDOM2 变慢了？“连接被拒绝：连接”

> ID：14455402
> 
> 赞同：1
> 
> 时间：2013-01-22T09:36:52.263
> 
> 标签：java, eclipse, eclipse-plugin

带有表格视图的 Eclipse 插件有时会得到：

```
java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method) 
```

在我的带有 SSD 的台式 PC 上，这种情况只有 10% 的时间会发生，而在我使用普通 HDD 的工作计算机上，这种情况一直都会发生。该视图有一个竞争提供程序，它使用 JDOM2 读入 XML 文件。通过调试，我将错误追溯到以下几行：

```
SAXBuilder builder = new SAXBuilder(); 
Document doc = builder.build(file);
Element element = doc.getRootElement(); 
```

它在哪里接收到一个 IOException？我很确定该文件存在，因为插件有时也可以工作。

**更新：** 仔细检查我编辑了我的 IOExecption：

```
catch (IOException e) { 
    if(file.length()==0){
        System.out.println("error: the following file could not be found.");
        System.out.println("File:"+file);
    }else
        e.printStackTrace(); 
    } 
```

如果我使用系统上无法访问的文件字符串，则使用 System out，如果文件存在，则执行 printStackTrace。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:35:27.597

啊，我想通了。SAXBuilder - 通过互联网检查 XML 中的 dtd。

```
<!DOCTYPE annotation  SYSTEM "http://www.xyz.com/xyz.dtd"> 
```

我的工作机器上的问题是代理服务器，家里的那个可能是一些连接超时，所以它有时工作。

我想知道为什么 SAXBuilder 会通过 http 访问 Internet，现在已经很清楚了。

# php - 无法打开流：连接超时错误 - Themoviedb

> ID：14455403
> 
> 赞同：2
> 
> 时间：2013-01-22T09:36:52.840
> 
> 标签：php, json, timeout, file-get-contents

我需要一些有关电影 db api 的帮助。我经常收到连接超时错误。下面是我的代码，我试图只输出原始的 json 响应，这样我就可以从那里开始工作。

```
$header_opt = array(
  'http'=>array(
  'method'=>"GET",
  'header'=>"Accept: application/json\r\n" .
            "Content-Type: application/json\r\n"
          )
);

$headers = stream_context_create($header_opt);

$rawjson = file_get_contents('http://api.themoviedb.org/3/movie/tt0076759?api_key=myapikey', false, $headers);

$cleansjon = json_decode($rawjson);

echo $cleansjon; 
```

这是我得到的错误。

```
Warning: filegetcontents(http://api.themoviedb.org/3/movie/tt0076759?api_key=myapikey) [function.file-get-contents]: failed to open stream: Connection timed out in /*///*/public_html/index.php on line 11 
```

我希望有人可以帮助我。

编辑：添加了 HAR 响应

```
{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "WebInspector",
      "version": "537.20"
    },
    "pages": [
      {
        "startedDateTime": "2013-01-27T09:51:02.534Z",
        "id": "page_1",
        "title": "http://*MyWebsite*/tmdb.php",
        "pageTimings": {
          "onContentLoad": 60636,
          "onLoad": 60635
        }
      }
    ],
"entries": [
  {
    "startedDateTime": "2013-01-27T09:51:02.534Z",
    "time": 60197,
    "request": {
      "method": "GET",
      "url": "http://*MyWebsite*/tmdb.php",
      "httpVersion": "HTTP/1.1",
      "headers": [
        {
          "name": "DNT",
          "value": "1"
        },
        {
          "name": "Accept-Encoding",
          "value": "gzip,deflate,sdch"
        },
        {
          "name": "Host",
          "value": "*MyHost*"
        },
        {
          "name": "Accept-Language",
          "value": "nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4"
        },
        {
          "name": "User-Agent",
          "value": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.20 (KHTML, like Gecko) Chrome/25.0.1328.0 Safari/537.20"
        },
        {
          "name": "Accept",
          "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
        },
        {
          "name": "Cache-Control",
          "value": "max-age=0"
        },
        {
          "name": "Connection",
          "value": "keep-alive"
        },
        {
          "name": "Accept-Charset",
          "value": "ISO-8859-1,utf-8;q=0.7,*;q=0.3"
        }
      ],
      "queryString": [],
      "cookies": [],
      "headersSize": 443,
      "bodySize": 0
    },
    "response": {
      "status": 200,
      "statusText": "OK",
      "httpVersion": "HTTP/1.1",
      "headers": [
        {
          "name": "Date",
          "value": "Sun, 27 Jan 2013 09:51:02 GMT"
        },
        {
          "name": "Content-Encoding",
          "value": "gzip"
        },
        {
          "name": "Server",
          "value": "Apache/2"
        },
        {
          "name": "Vary",
          "value": "Accept-Encoding,User-Agent"
        },
        {
          "name": "Content-Type",
          "value": "text/html"
        },
        {
          "name": "Connection",
          "value": "Keep-Alive"
        },
        {
          "name": "Keep-Alive",
          "value": "timeout=1, max=100"
        },
        {
          "name": "Content-Length",
          "value": "260"
        }
      ],
      "cookies": [],
      "content": {
        "size": 342,
        "mimeType": "text/html",
        "compression": 82
      },
      "redirectURL": "",
      "headersSize": 234,
      "bodySize": 260
    },
    "cache": {},
    "timings": {
      "blocked": 0,
      "dns": 13,
      "connect": 29,
      "send": 0,
      "wait": 60147,
      "receive": 5,
      "ssl": -1
    },
    "pageref": "page_1"
  }
   ]
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:57:48.717

您可以删除 Content-Type 标头，如果您使用 HTTP PUT 或 POST 提交 JSON，这将是必需的。

该错误表明，file_get_contents 没有从主机 api.themoviedb.org 获得响应

> 我经常收到连接超时错误。

是`constantly`指`always`还是？`often`

如果您经常看到这种情况，您的 Internet 上行链路或电影数据库服务器有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:41:21.553

也许根本没有问题。您的应用程序正在尝试连接到服务器并收到超时错误。

# swagger - 如何在 Swagger (OpenAPI) 中发布文件？

> ID：14455408
> 
> 赞同：64
> 
> 时间：2013-01-22T09:37:19.993
> 
> 标签：swagger, swagger-ui, openapi

我正在使用 Swagger 来记录我的 REST 服务。我的一项服务需要上传 CSV 文件。`parameters`我在 JSON API 定义的部分中添加了以下内容：

```
{
       "name": "File",
       "description": "The file in zip format.",
       "paramType": "body",
       "required": true,
       "allowMultiple": false,
       "dataType": "file"
} 
```

现在我在 Swagger UI 页面上看到了文件上传选项。但是当我选择一个文件并单击“试用”时，我收到以下错误：

> NS_ERROR_XPC_BAD_OP_ON_WN_PROTO：对 jquery-1.8.0.min.js 中 WrappedNative 原型对象的非法操作（第 2 行）

该页面正在不断处理，我没有得到任何回应。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2016-06-20T21:50:36.383

## OpenAPI 规范 2.0

在 Swagger 2.0 ( [OpenAPI Specification 2.0](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#fixed-fields-7) ) 中，使用设置为**file**的表单参数 ( `in: formData`) 。此外，操作必须是.`type`**`consumes``multipart/form-data`**

 **```
 consumes:
    - multipart/form-data
  parameters:
    - name: file
      in: formData   # <-----
      description: The uploaded file data
      required: true
      type: file     # <----- 
```

## OpenAPI 规范 3.0

在[OpenAPI 规范 3.0](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#considerations-for-file-uploads)中，文件被定义为二进制字符串，即`type: string`+ `format: binary`（或`format: byte`，取决于用例）。文件输入/输出内容的描述与任何其他模式类型的语义相同（与 OpenAPI 2.0 不同）：

多部分请求，单个文件：

```
requestBody:
  content:
    multipart/form-data:
      schema:
        type: object
        properties:
          # 'file' will be the field name in this multipart request
          file:
            type: string
            format: binary 
```

多部分请求，文件数组（在 Swagger UI 3.26.0+ 和 Swagger Editor 3.10.0+ 中支持）：

```
requestBody:
  content:
    multipart/form-data:
      schema:
        type: object
        properties:
          # The property name 'file' will be used for all files.
          file:
            type: array
            items:
              type: string
              format: binary 
```

直接 POST/PUT 文件（请求正文是文件内容）：

```
requestBody:
  content:
    application/octet-stream:
      # any media type is accepted, functionally equivalent to `*/*`
      schema:
        # a binary file of any type
        type: string
        format: binary 
```

注意：语义与其他 OpenAPI 3.0 模式类型相同：

```
# content transferred in binary (octet-stream):
schema:
  type: string
  format: binary 
```

更多信息：

*   [文件上传的注意事项](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#considerations-for-file-uploads)
*   [多部分内容的特殊注意事项](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#special-considerations-for-multipart-content)
*   [文件上传](https://swagger.io/docs/specification/describing-request-body/file-upload/)和[多部分请求](https://swagger.io/docs/specification/describing-request-body/multipart-requests/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-26T10:54:36.320

最后我找到了答案，实际上以前不支持**文件上传**，现在他们更新了**[swagger-ui.js](https://github.com/wordnik/swagger-ui/blob/1ec55a882983238d86ae76711474cfe67904970c/dist/swagger-ui.js)**文件。您需要用新的替换旧的，还必须在参数下为特定参数定义这些属性：

```
 "paramType": "body",
 "dataType": "file", 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-30T17:03:21.753

我的似乎与

```
 "paramType": "formData",
 "dataType": "file", 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-01T00:35:55.853

我正在使用 Open API v 3.0.3

这是我的 swagger.json 的样子：

```
"/media/upload": {
      "post": {
        "tags": ["Media"],
        "name": "Upload Media",
        "description": "Uploads a Media file to the server.",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "media": {
                    "type": "string",
                    "format": "base64"
                  }
                }
              }
            }
          }
        }
      }
    } 
```

以下是它大摇大摆的表现：

[![在此处输入图像描述](../Images/cafb28720a9fa5597d9c5d9b5b6bcf70.png)](https://i.stack.imgur.com/I8tqZ.png)**

# php - php sql，表单在页面加载时重新提交

> ID：14455417
> 
> 赞同：4
> 
> 时间：2013-01-22T09:37:54.727
> 
> 标签：php, mysql, sql, forms

忽略 mysql 和 sql 转义字符串的明显安全漏洞，有人知道为什么我的 sql 表 `msgs`在页面重新加载时被空填满。每次页面重新加载表单提交。我很困惑为什么会发生这种情况，我该如何阻止它？

```
 <?php
    ob_start();
    session_start();
    $con = mysql_connect("localhost","username","pass");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    $dates = date('Y-m-d H:i:s');
    $uid = $_SESSION['user_id'];
    $msg_id = (int) $_GET['msg_id'];
    mysql_select_db("db_table", $con);

    $result = mysql_query("SELECT users.first_name, users.last_name ,  intro.intro, intro.outro FROM intro INNER JOIN users ON intro.user_id = users.user_id WHERE intro.message_id = {$msg_id}");
    while($row = mysql_fetch_array($result))
    {
       echo  "<div id=\"start\"><div class=\"namedate\"><h1>". $row['first_name'] ." ".  $row['last_name'] .  "</h1><h2>test</h2></div><div id=\"holdmsg\"><div class=\"cent\"><strong>" . $row['intro'] . "</strong><br><i>" . $row['outro'] ."</i></div></div></div> "  ;
    } 
```

与表格相关的部分是此部分以及页面顶部的 $_GET。

```
<form action="" method="post">      
<?php 

$sql="INSERT INTO messages (user_id, intro_id , msg, date ) VALUES (('$uid'), {$msg_id} ,'$_POST[msg]', ('$dates'))";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }

mysql_close($con);

?>

    <textarea rows="2"style="float:left" name="msg" type="text"placeholder="Elaborate on your idea..."></textarea>
    <input id="togz2" style="float:right; "type="submit" value="SUBMIT" name="submit" class="butts">
    </div></div>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:02:18.197

为什么不这样做呢？

```
if (mysql_query($sql,$con))
  {
   header('location:yourpage.php');
}else{
  die('Error: ' . mysql_error());
} 
```

我也没有在您的插入查询上方看到任何这样的声明

```
if(isset($_REQUEST['submit'])){ //to check if posted

  $sql="INSERT ......
} 
```

除此之外，您还应该在插入数据库之前验证您的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:48:48.897

这是一个很好的例子，如何防止页面加载时重复输入

请参考链接[http://www.webhostingtalk.com/showthread.php?t=700175](http://www.webhostingtalk.com/showthread.php?t=700175)。

```
<?php
session_start();
$faction = $_REQUEST['faction'] ;
if (!is_array($_SESSION['serials'])) $_SESSION['serials'] = array ();
if ($_REQUEST['serial']){
  if ( in_array ($_REQUEST['serial'] , $_SESSION['serials'] ) ){
    // duplicate submition, nullify it
    $faction = '';
  }else{
    $_SESSION['serials'][] = $_REQUEST['serial'] ;
  }
}

if ($faction) { // form submited
  // if faction is not set completely ignore submition

}
?>

<form>
<input type="hidden" name="faction" value="42">
<input type="hidden" name="serial" value="<?=rand(1000000 , 9999999)?;>">
....
the rest of the form is here
....
</form> 
```

**另一个解决方案： -**

成功插入后，您应该重定向到新页面。

# jquery - jQuery 无法使用 .val('') 清除特定输入

> ID：14455420
> 
> 赞同：6
> 
> 时间：2013-01-22T09:38:01.203
> 
> 标签：jquery, forms, input

我一直在这里寻找错误，因为单击 HTML 中的重置按钮时无法清除输入#keywordsearch。但是，我找不到任何东西 - 你能看到问题吗？

[http://jsfiddle.net/eKWyY/](http://jsfiddle.net/eKWyY/)

这是我的 JS：

```
$('#dirreset').click(function() {
            $('#fatform option').each(function(index) {
                $(this).removeAttr("selected");
            });
            $('#keywordsearch').val('');
        }); 
```

感谢您的帮助，这让我有点生气！

大须

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:44:34.140

单击重置按钮，条目将重置为默认值。并且`asf`是你的默认值，所以它不会清楚，所以改变

```
<input type="reset" name="osu_directory_search_reset" value="Reset" id="dirreset"> 
```

至

```
<input type="button" name="osu_directory_search_reset" value="Reset" id="dirreset"> 
```

演示：[jsFiddle](http://jsfiddle.net/eKWyY/9/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T09:45:25.847

默认 JavaScript*重置*在您的函数之后被调用`.click()`，它将输入重置回默认值`asf`.

如果您想避免执行默认重置功能，请使用 jQuery[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)或更简单地`return false;`在函数末尾添加一个。例如

```
$('#dirreset').click(function() {
    $('#keywordsearch').val('');
    return false;
}); 
```

或者，将函数的类型更改为`<input>`不会`"button"`在您的函数之后执行默认*重置*功能。但是，如果您想模仿*reset* ，您可能需要做一些额外的工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T09:49:00.510

单击“重置”按钮后，您的点击事件会执行，但之后它会重置表单。那个时候“asf”将回到输入字段，因为它是初始值。

尝试查看以下内容。

[用jquery重置html表单后如何执行代码？](https://stackoverflow.com/questions/10319289/how-to-execute-code-after-html-form-reset-with-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:44:21.843

如果要保留默认值“asf”，则必须将输入类型更改`reset`为`button`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T09:46:39.733

由于您已`asf`在清除 value 属性时指定了值，因此您将仅获得默认值。

一个建议是，如果您想向用户显示有关输入的一点提示，您可以使用输入类型的占位符属性。

示例 [http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_input_placeholder](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_input_placeholder)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T09:49:16.733

试试下面的代码它的作品。

[演示](http://jsfiddle.net/eKWyY/11/)

```
$(document).ready(function()
{
    $('#dirreset').click(function()
    {
        $('#fatform option').each(function(index)
        {
             $(this).removeAttr("selected");
        });
        $('#keywordsearch').attr('value','');
    });
});
```

使用`attr`.

# asp.net-mvc - System.Web.Mvc.TagBuilder 类型存在于两个库中

> ID：14455423
> 
> 赞同：1
> 
> 时间：2013-01-22T09:38:13.813
> 
> 标签：asp.net-mvc, visual-studio-2010, windows-8, visual-studio-2012

我最近重新安装了我的电脑。安装 VS2010 和 VS 2012 等所有工具后，我在构建 MVC 解决方案时开始收到以下错误：

```
The type 'System.Web.Mvc.TagBuilder' exists in both 
'c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\Assemblies\System.Web.WebPages.dll' 
and 
'c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET WebPages\v2.0\Assemblies\System.Web.WebPages.dll' 
```

我正在使用 Windows 8，Web 应用程序以 .net 4 为目标。

我怎样才能消除这个冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:39:58.003

在`<runtime>`您的 web.config 部分中添加：

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly> 
```

# grails - Mailgun、Groovy HTTPBuilder 和 HTTP 基本身份验证问题

> ID：14455429
> 
> 赞同：0
> 
> 时间：2013-01-22T09:38:40.513
> 
> 标签：grails, groovy, basic-authentication, httpbuilder, mailgun

当服务器/api端点没有给出正确的响应时，看起来HTTPBuilder的行为出错了。Mailgun 的 API 不响应 401，而是提供其他内容。（如我错了请纠正我！）

事实上，没有发送“需要身份验证”标头，HTTPBuilder 甚至不会尝试进行身份验证。

我想我在这个线程的帮助下解决了这个问题：http: [//groovy.329449.n5.nabble.com/HTTPBuilder-Strange-behaviour-of-auth-basic-td344479.html](http://groovy.329449.n5.nabble.com/HTTPBuilder-Strange-behaviour-of-auth-basic-td344479.html)

他们建议，手动编写身份验证标头将每次都强制进行身份验证。需要稍微修改一下，使它看起来像这样：

```
def user = 'tom' 
def pass = 'secret' 

def http = new HTTPBuilder('http://myhost.com') 
http.headers[ 'Authorization' ] = "Basic " + "$user:$pass".getBytes('iso-8859-1').encodeBase64() 
```

似乎现在可以工作了。有更好的想法吗？这看起来可能是黑客攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T19:42:25.147

尝试使用类似的东西：

```
def authSite = new HTTPBuilder( 'https://some-protected-site.com/' )
authSite.auth.basic 'myUserName', 'myPassword' 
```

阅读更多： http: [//groovy.codehaus.org/modules/http-builder/doc/auth.html](http://groovy.codehaus.org/modules/http-builder/doc/auth.html)

# zend-form - 将 inputFilter 附加到动态创建的字段元素

> ID：14455433
> 
> 赞同：3
> 
> 时间：2013-01-22T09:38:51.437
> 
> 标签：zend-form, zend-framework2, validation

到目前为止，我一直在将输入过滤器绑定到模块中的表单，换句话说，我一直在表单中创建元素，将输入过滤器添加到模块端的元素。

例如检查这个[例子](http://samsonasik.wordpress.com/2012/08/31/zend-framework-2-creating-upload-form-file-validation/)

现在我根据要求动态创建文本字段元素，就像我的表单中的这样

```
//Form
public function addNamesTextFieldElement($names)
    {
        foreach($names as $name)
        {
            $nameTextField = new Element\Text($name->getName());
            $nameTextField->setAttribute('type', "text");
            $nameTextField->setLabel($name->getName());

            $this->add($nameTextField );
        }
    } 
```

将输入过滤器添加/附加到此类动态生成的元素的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:17:49.800

我可能不会使用这种方法，但是如果您已经将 InputFilter 分配给表单，则类似这样的方法会起作用：

```
public function addNamesTextFieldElement($names)
{
    $factory     = new InputFactory();
    foreach($names as $name)
    {
        $nameTextField = new Element\Text($name->getName());
        $nameTextField->setAttribute('type', "text");
        $nameTextField->setLabel($name->getName());

        $this->add($nameTextField );

        $this->getInputFilter()->add(
            $factory->createInput(array(
                'name'     => $name->getName(),
                'required' => true,
                'filters'  => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                        'name'    => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min'      => 1,
                            'max'      => 100,
                        ),
                    ),
                ),
            ))
        );
    }
} 
```

# web-config - IIS 7.5：URL 中的特殊字符重写外部文件

> ID：14455434
> 
> 赞同：0
> 
> 时间：2013-01-22T09:38:58.097
> 
> 标签：web-config, iis-7.5, rewrite, url-rewrite-module

我在 IIS 7.5 上运行的一个应用程序遇到了“最大 web.config 大小”，在编辑注册表以增加此值之前，我尝试将所有 rewriteMap 规则移动到一个外部文件中，但服务器给了我一个500 错误。

经过几次检查后，我注意到这种方式可行

```
<rewriteMaps>
 <rewriteMap name="OLDSITE">
  <add key="/withonlythis_will_work" value="http://oldsite" />
 </rewriteMap>
</rewriteMaps> 
```

但是，如果我输入一些非标准的字母数字字符，它将崩溃（例如）旧**ò**网站

```
<rewriteMaps>
 <rewriteMap name="OLDSITE">
  <add key="/withonlythis_will_not_work" value="http://oldòsite" />
 </rewriteMap>
</rewriteMaps> 
```

如果我将它们保留在 webconfig 上，这两个规则都有效，但第二个规则不适用于外部 rewritemap.config 文件

任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:24:12.680

尝试为**ò**使用 HTML 命名实体，即**ò ；**（请删除 ';' 之前的空格）：

```
<rewriteMaps>
 <rewriteMap name="OLDSITE">
  <add key="/withonlythis_will_not_work" value="http://old&ograve ;site" />
 </rewriteMap>
</rewriteMaps> 
```

# visual-c++ - 使用 `CWinApp::GetProfileString()` 时检查部分/选项是否存在

> ID：14455438
> 
> 赞同：0
> 
> 时间：2013-01-22T09:39:01.787
> 
> 标签：visual-c++, mfc

与该`WriteProfileString`方法不同，该`GetProfileString`方法不提供检查配置文件中是否存在部分或选项的方法。我能得到的只是一个默认字符串。我正在尝试实现一个代表我的个人资料的类，我想要一个

```
BOOL HasSection(CString sSection) 
```

和一个

```
BOOL HasOption(CString sSection, CString sOption) 
```

里面的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:57:25.137

这很容易做到。请仔细阅读[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724366%28v=vs.85%29.aspx)。请注意，当您将 NULL 传递给第一个或第二个参数时，该函数将返回所有部分名称（在前一种情况下）或键（在后一种情况下）的列表。

因此，要实现 HaseOption() 方法，您将拥有类似于此的代码：

```
BOOL HasSection(CString sSection)
{
    DWORD dwSize = 100, dwRequired;
    LPTSTR lpBuffer = new TCHAR[dwSize];
    BOOL bExists = FALSE;

    dwRequired = ::GetProfileString(NULL, NULL, _T(""), lpBuffer, dwSize);
    while(dwRequired == dwSize - 2)
    {
        // buffer is too small
        delete [] lpBuffer;

        dwSize = dwRequired + 100;
        lpBuffer = new TCHAR[dwSize];
        dwRequired = ::GetProfileString(NULL, NULL, _T(""), lpBuffer, dwSize);
    }
    if(dwRequired)
    {
        LPTSTR lpszFound = lpBuffer;
        do
        {
            if(sSection.CompareNoCase(lpszFound) == 0)
            {
                bExists = TRUE; break;
            }
        } while(*(lpszFound = _tcsninc(lpszFound, _tcsnbcnt(lpszFound, dwRequired)+1)));
    }
    delete [] lpBuffer;
    return bExists;
} 
```

我没有测试代码，只是从我的程序中剪切并粘贴并稍作修改。请自行测试代码

# mysql - 如何在mysql中使用枚举类型更新表数据

> ID：14455442
> 
> 赞同：-2
> 
> 时间：2013-01-22T09:39:17.223
> 
> 标签：mysql, sql

我正在尝试这个，但它不起作用

```
update tb_traffic_log 
set 
    c_status = 'Detected' 
where 
    c_file_name = 'tj-sms-20122807-0956-000.log’; 
```

好心的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:42:43.757

也许您有拼写错误，您没有在值上使用单引号

```
update tb_traffic_log 
set c_status='Detected' 
where c_file_name='tj-sms-20122807-0956-000.log’;
                                               ^ HERE 
```

将其更改为`'tj-sms-20122807-0956-000.log'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:44:22.993

哦，我得到了错误：

它是分号前的结束引号：

```
 c_file_name = 'tj-sms-20122807-0956-000.log’; 
```

应该

```
 c_file_name = 'tj-sms-20122807-0956-000.log'; 
```

# c# - System.Windows.Forms.RichTextBox 对 TextBoxBase.ClearUndo() 的实现

> ID：14455452
> 
> 赞同：1
> 
> 时间：2013-01-22T09:39:46.680
> 
> 标签：c#, winforms, richtextbox, undo

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox_methods%28v=vs.100%29.aspx)，该方法的描述`ClearUndo`是：

```
"Clears information about the most recent operation from the undo buffer of the text box." 
```

现在，与文档所说的相反，此方法的覆盖`System.Windows.Forms.RichTextBox`似乎正在清除整个撤消缓冲区，而不仅仅是最近的操作。文档和实现之间的这种差异是一个已知问题，还是我应该怀疑它有什么问题？我一直无法找到任何官方信息，这就是为什么我现在在这里提出这个问题。我已经用`.NET Framework 4.0`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:46:02.433

你是对的。ILSpy 在`TextBoxBase`（`RichTextBox`不覆盖它）中显示了这一点：

```
public void ClearUndo()
{
    if (base.IsHandleCreated)
    {
        base.SendMessage(205, 0, 0);
    }
} 
```

消息 205 是`EM_EMPTYUNDOBUFFER`：

```
// Header file
#define EM_EMPTYUNDOBUFFER 0x00CD // 0x00CD = 205

// C#
EM_EMPTYUNDOBUFFER = 205 
```

# webdriver - 如果 condition ，如果 id="prog_bg" 存在则执行剩余的代码

> ID：14455453
> 
> 赞同：1
> 
> 时间：2013-01-22T09:39:46.960
> 
> 标签：webdriver

我想设置一个 if 条件，当`id="prog_bg"`or`class="progress_box_bg"`存在时，然后执行剩余的代码。DOM如下，

```
<div id="wizard">
 <div class="quote_header">
 <div class="items">
      <div id="top-line" style="display: block;">
            <div class="back_box">
             <div class="progress_box">
                 <div id="prog_bg" class="progress_box_bg" style="width: 75px;"></div>
             </div>
             </div>
        <div id="service-div" class="page" style="padding-top:45px; >">
        <div id="propertytype-div" class="page"> 
```

我尝试了很多选项，但它不起作用。大佬们告诉我怎么弄？

1.  `if (var.equals(driver.findElement(By.tagName("body")).getText().contains("prog_bg")))`
2.  `try { if (selenium.getHtmlSource().matches("^[\\s\\S]*prog_bg[\\s\\S]*$")) break; } catch (Exception e) {};`
3.  `if(driver.getPageSource().matches("^[\\s\\S]*prog_bg[\\s\\S]*$"))`
4.  `if(driver.findElement(By.id("prog_bg")).isDisplayed())`
5.  `if (driver.findElement(By.className("progress_box_bg")).isDisplayed())`

谢谢，萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:16:19.587

你能试试这样的东西吗？您可以用 if() 替换 Assert

```
boolean ispresent= driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*prog_bg:[\\s\\S]*$");//TODO: Make this dynamic
Assert.assertEquals(true, ispresent);

boolean ispresent= driver.findElement(By.id("prog_id"))
Assert.assertEquals(true, ispresent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T12:38:59.370

你也可以尝试这样的事情。

```
// Find element by id
boolean isElementPresent = driver.findElement(By.id("prog_id"));
// Find element by class
boolean isElementPresent = driver.findElement(By.className("progress_box_bg"));
//This  writes out an errormessage if isElementPresent equals false, good for reports!
Assert.assertTrue("Could not find the element", isElementPresent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T17:47:02.573

数字 4 和 5 在正确的轨道上。`isDisplayed()`但是，如果您只想检查它*在 DOM 中*的存在，则不应调用。`isDisplayed()`检查 DOM 中的元素是否存在，*然后检查该元素是否对用户可见*。

相反，您应该尝试查找元素本身：

```
if(driver.findElement(By.id("prog_bg")) || driver.findElement(By.className("progress_box_bg")) {
/*Execute code here*/
} 
```

另外，请注意元素属性不会出现在页面正文的文本中，只会出现在 DOM 中。任何像你在数字 1、2 和 3 中那样寻找这些元素的尝试都是徒劳的。

# push - Bitbucket 网络挂钩未发布

> ID：14455456
> 
> 赞同：2
> 
> 时间：2013-01-22T09:39:56.463
> 
> 标签：push, bitbucket, webhooks

我已经在 Bitbucket 上设置了一个网络挂钩，以 POST 到我的网络服务器以记录一些详细信息。repo 上有两个 webhook，一个是我自定义的，一个是 FTPloy.com 的。我一直在推动随机提交以在我的服务器等上测试 POST，但过了一会儿它停止了。

在我推送后，FTPloy.com 或我自己的网络服务器永远不会收到来自 Bitbucket 的发布请求。

这怎么可能/我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T19:21:19.440

我也很难测试我的网络钩子。我发现最好的测试方法是通过命令行。[我复制了此处](https://confluence.atlassian.com/display/BITBUCKET/POST+Service+Management)显示的示例数据，添加`payload=`到开头并将其保存到文件中：`bb.post`

然后通过命令行，我使用该文件作为 POST 数据向我的网络挂钩提交了一个 POST 请求：`curl --data @bb.post http://mydomain.com/customWebHook.php`

这是我发现调试它的最佳方法。

> 注意：他们从未提到当最后一次提交来自合并时，该提交的“分支”属性为空。相反，您需要查看“分支”属性，它是创建合并的两个分支的数组。

# java - JBoss 和石英

> ID：14455460
> 
> 赞同：0
> 
> 时间：2013-01-22T09:40:21.967
> 
> 标签：java, jakarta-ee, jboss, classloader, quartz-scheduler

我正在尝试查看 Quartz 是否可以为我解决问题。但我无法让它工作。现在我陷入以下错误（相关部分）

```
 Caused by: org.quartz.SchedulerConfigException: Unable to instantiate class load helper class: org.quartz.simpl.CascadingClassLoadHelper cannot be cast to org.quartz.spi.ClassLoadHelper [See nested exception: java.lang.ClassCastException: org.quartz.simpl.CascadingClassLoadHelper cannot be cast to org.quartz.spi.ClassLoadHelper]
    at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:706)
    at org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1484)
    at org.jboss.seam.async.QuartzDispatcher.initScheduler(QuartzDispatcher.java:69)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.util.Reflections.invokeAndWrap(Reflections.java:144)
    ... 73 more
Caused by: java.lang.ClassCastException: org.quartz.simpl.CascadingClassLoadHelper cannot be cast to org.quartz.spi.ClassLoadHelper
    at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:703) 
```

我用谷歌搜索过，这似乎是一个被问了很多的问题，但我没有找到任何答案。我的 webapp 和耳朵里都有石英罐。

我的配置中是否有任何可能导致此问题的内容？

JBoss 5.1 石英 JBoss 2.1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:24:32.603

这是一个类加载问题。JBoss 在其类路径中已经有了 ，`org.quartz.spi.ClassLoadHelper.class`因为 JBoss 将它用于不同任务的内部计时器。提供的 JBoss`quartz.jar`位于`/jboss-as/common/lib/quartz.jar`. 因此，您正在为您的应用程序提供另一个`quartz.jar`，这会导致与 JBoss 提供的现有石英类发生冲突。

要解决此问题，您有两种选择：

*   **选项 1**。从你的耳朵和战争中取出石英罐。在我看来，这是更好、更容易的选择，除非出于某种原因，您的应用程序需要与 JBoss 提供的不同版本的石英。

*   **选项 2**。创建一个`META-INF\jboss-classloading.xml`文件并隔离您的耳朵（`WEB-INF\jboss-classloading.xml`如果需要 EAR 类看不到 WAR 类，则可能是您的 WAR）。这个[博客](http://phytodata.wordpress.com/2010/10/21/demystifying-the-jboss5-jboss-classloading-xml-file/)是解释 jboss5 或 jboss6 类加载的好博客之一，这个[基于教程的博客](http://www.mastertheboss.com/jboss-configuration/solving-jboss-5-classloading-issues)也是一个很好的资源。

# java - Java：动态排序数组列表

> ID：14455462
> 
> 赞同：1
> 
> 时间：2013-01-22T09:40:25.177
> 
> 标签：java, dynamic, arraylist

我有几个项目的arraylist。一个项目可能有一个特定的 int 字段 LYING 等于 OFF、FLOOR、RB1、RB2、RB3 或 RB4。

例如 OFF 定义为：

```
public static final int OFF = 0; 
```

关于一些特定的全局变量，我想以自定义方式对这些元素进行排序，例如：

*   arraylist 开头的所有 RB1 项目，任何 RB3 项目之后的所有 RB2 项目（不管 OFF 项目）和 arraylist 末尾的所有 RB4。

哪个是我的案例的最佳解决方案？

专注于编写一些自定义：

```
public int compare(Object o1, Object o2) {
    if(globalVariable0 > 0) {
        if(o1.getLying() == o2.getLying)
            return 0;
        if(o1.getLying() == RB1 && o2.getLying != RB1)
            return -1;
        ...
    }else{
        ...
    } 
```

或者..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:52:36.763

可能有几种解决方案，但由于我们谈论的是“不自然”的顺序，我会以正确的顺序保存一个对象，例如我可以在比较方法中查询排序位置的地图，那么排序顺序可能很容易也许在属性文件中进行编辑。或许是这样的：

```
public int compare(Object o1, Object o1){
  ActualType a1 = (ActualType) o1;
  ActualType a2 = (ActualType) o2;
  SortedOrderMap map = getSortOrderMap(); //cached of course
  Integer l1 = map.get(a1.getLying());
  Integer l2 = map.get(a2.getLying());
  return l1.compareTo(l2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:00:01.200

根据您的问题，我了解到您希望通过 LYING 对元素进行分组。

然后我会保留几个列表，每个 LYING 一个......你也可以为不同的 LYING 提供一个枚举。

您可以将元素存储在[Multimap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)中，或使用，例如：

```
static enum Lying {
    OFF, FLOOR, RB1, RB2, RB3, RB4
}

EnumMap<Lying , List<MyElements>> myElements = ... 
```

# c# - 同一属性中的不同对象类型

> ID：14455465
> 
> 赞同：3
> 
> 时间：2013-01-22T09:40:31.700
> 
> 标签：c#, ravendb

我在玩 RavenDb，正在做一些测验。有不同类型的问题： - 多项选择（A、B、C 或 D？） - 日期（在什么日期...？） - 数字（多少...？）

我所做的是创建一个带有属性的基类 Question ，`Question`其中包含用户给出的字符串形式的问题和答案列表。

```
public class Question
{
    public string Question { get; set; }
    public List<Answer> Answers { get; set; }
} 
```

然后我创建了多个子类，它们继承自`Question`. 例如，`NumberQuestion`包含属性`MinimumValue`和`MaximumValue`，因为这是每个问题的差异。

我希望用户给出答案，并将该答案保存到数据库中。问题是，答案可以是不同的类型，例如 DateTime、float 或 integer（多选）。我的问题是，将答案保存在 RavenDb 中的最佳方法是什么？

这就是我目前正在做的事情：

```
public class Answer
{
    public User User { get; set; }
    public string AnswerString { get; set; }
    public string AnswerType { get; set; }
} 
```

我在这里所做的是将答案保存为字符串并保存类型（DateTime、float 等），以便稍后解析。

它有效，但我不太喜欢它。必须有另一种更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:38:10.707

如果您想在同一个属性中存储多个类型，则只需将该属性声明为公共基类型。在你的情况下`object`会做得很好。序列化后，您将在 json 中获得额外的`$type`字段，这将允许它们被反序列化回正确的形式。

让我们看看我是否可以就您的特定域模型提供一些建议。

*   不要将可能的答案与实际答案混淆。给这些不同的名称以保持它们的正确性。我将`Choice`用来表示一个问题的可能答案，并`Answer`表示用户给出的实际答案。

*   注意*聚合实体*的位置。这些是最终在 RavenDB 中作为实际文档并获得 Id 的内容。在你的情况下，我只看到两个 -`Question`和`Exam`.

试穿这个尺寸：

```
public abstract class Question
{
    public string Id { get; set; }
    public string QuestionText { get; set; }
}

public class ValueQuestion : Question
{
    public object CorrectValue { get; set; }
}

public class RangeQuestion : Question
{
    public object MinCorrectValue { get; set; }
    public object MaxCorrectValue { get; set; }
}

public class MultipleChoiceQuestion : Question
{
    public int NumberOfChoicesAllowed { get; set; }
    public List<MultipleChoiceOption> Choices { get; set; }
}

public class MultipleChoiceOption
{
    public char Letter { get; set; }
    public bool Correct { get; set; }
    public object Value { get; set; }
}

public class EssayQuestion : Question
{
    public int MinAnswerLength { get; set; }
    public int MaxAnswerLength { get; set; }
}

public class Exam
{
    public string Id { get; set; }
    public string UserId { get; set; }
    public DateTime Taken { get; set; }
    public decimal Score { get; set; }
    public List<Answer> Answers { get; set; }
}

public class Answer
{
    public string QuestionId { get; set; }
    public bool Correct { get; set; }
    public object Value { get; set; }
} 
```

仿制药可能很诱人，但我想你会发现它们不会给你买太多东西。最后，您的文档中将具有相同的结构，并且在数据库中具有相同的布局。可能唯一的区别是这些`$type`字段在不同的地方使用。

如果您想尝试基于泛型的解决方案，请尝试以下操作：

```
public abstract class Question
{
    public string Id { get; set; }
    public string QuestionText { get; set; }
}

public class ValueQuestion<T> : Question
{
    public T CorrectValue { get; set; }
}

public class RangeQuestion<T> : Question
{
    public T MinCorrectValue { get; set; }
    public T MaxCorrectValue { get; set; }
}

public class MultipleChoiceQuestion<T> : Question
{
    public int NumberOfChoicesAllowed { get; set; }
    public List<MultipleChoiceOption<T>> Choices { get; set; }
}

public class MultipleChoiceOption<T>
{
    public char Letter { get; set; }
    public bool Correct { get; set; }
    public T Value { get; set; }
}

public class EssayQuestion : Question
{
    public int MinAnswerLength { get; set; }
    public int MaxAnswerLength { get; set; }
}

public class Exam
{
    public string Id { get; set; }
    public string UserId { get; set; }
    public DateTime Taken { get; set; }
    public decimal Score { get; set; }
    public List<IAnswer> Answers { get; set; }
}

public interface IAnswer
{
    string QuestionId { get; set; }
    bool Correct { get; set; }
}

public class Answer<T> : IAnswer
{
    public string QuestionId { get; set; }
    public bool Correct { get; set; }
    public T Value { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:56:09.307

你可以使用泛型。创建一个泛型类`Question`，`TAnswer`其中`TAnswer`必须从抽象类继承`Answer`。特定的问题类将从该类继承：

```
public abstract class Question<TAnswer> where TAnswer : Answer
{
    public Guid Id { get; set; }
    public string Question { get; set; }
    public List<TAnswer> Answers { get; set; }
}

public class DateQuestion : Question<DateAnswer>
{
    //...
} 
```

您用于答案的类都继承自基类`Answer`，基类引用了它所属的问题和回答它的用户。然后，您可以为每种答案类型创建一个单独的表格，从而防止解析类型，同时保持问题、答案和回答它们的用户之间的联系

```
public abstract class Answer {
    public Guid QuestionId { get; set; }
    public Guid UserId { get; set; }
}

public class MultipleChoiceAnswer :Answer {
    //...
}

public class DateAnswer : Answer {
    //...
} 
```

# android-fragments - 使用 PageContainer 的 ViewPager 轮播不与 FragmentPagerAdapter 一起使用

> ID：14455469
> 
> 赞同：5
> 
> 时间：2013-01-22T09:40:37.583
> 
> 标签：android-fragments, android-viewpager

我正在使用[https://gist.github.com/8cbe094bb7a783e37ad1](https://gist.github.com/8cbe094bb7a783e37ad1)来一次显示 ViewPager 的多个页面。它适用于简单的 PageAdapter，但我需要显示大量位图。所以我读了[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)它说：

> 您可以使用由 PagerAdapter 支持的 ViewPager 组件来实现此模式。然而，更合适的支持适配器是**FragmentStatePagerAdapter**子类，它会在 ViewPager 中自动销毁并保存 Fragments 的状态，因为它们会在屏幕外消失，从而降低内存使用量。

我试图创建一个新的 FragmentStatePagerAdapter 但它不起作用：

> E/AndroidRuntime(25400): android.content.res.Resources$NotFoundException: 找不到资源 ID #0xffffffff

我真的不明白错误是什么，因为我没有使用除布局之外的任何特定资源。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T10:12:52.650

我只是发现当我将 android:id 添加到 PageContainer 内的 ViewPager 时它可以工作。所以，只是一个 id 它似乎工作，但我不明白为什么。

如果有人有想法，我会很高兴理解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T05:07:22.747

[文档](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)明确表示：

> 使用 FragmentPagerAdapter 时，主机 ViewPager 必须设置有效的 ID。

我很高兴找到了你的答案，因为这也让我头疼了很长一段时间。当我看到你的答案时，我记得我略读了一下，感觉自己像个白痴。

# jquery - 如何使用绑定（jQuery -事件处理程序）传递参数？

> ID：14455471
> 
> 赞同：0
> 
> 时间：2013-01-22T09:40:51.077
> 
> 标签：jquery, parameters, bind

我有这两行

```
 $('.closeimg_jq').mouseover({close:"closehover.png"},hoverimage);                    
 $('.closeimg_jq').mouseout({close:"close.png"},outimage); 
```

如何使用 bind 替换这两行？我想将参数传递给以下内容：

```
 $('.closeimg_jq').bind({mouseover:hoverimage},{mouseout:outimage}); 
```

当我调用参数 e.data.close 时，第一个工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:53:18.840

回调映射形式是不可能的`bind`，但是当对同一个对象进行多次调用时，您仍然可以使用方法链来减少一些字符；jQuery 尽可能支持方法链接：

```
$('.closeimg_jq')
  .mouseover({close:"closehover.png"},hoverimage)
  .mouseout({close:"close.png"},outimage) 
```

PS您要做什么-不应该在纯CSS中使用`background-image`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:48:09.760

如果代码不使用动态创建的对象，例如在您的示例中，只需在函数体内创建对象。

```
$('.clouseimg_jq').hover(function(){
   var obj = {close:"closehover.png"};
   //...do something
},function(){
   var obj = {close:"close.png"};
   //..do something
}); 
```

# php - 如何从php中的给定字符串中提取条件运算符？

> ID：14455474
> 
> 赞同：0
> 
> 时间：2013-01-22T09:41:02.677
> 
> 标签：php, regex, operators, preg-match

我有一个函数调用 extractValues() 并有一个带有条件运算符的数组来传递它。我真正需要的是，拆分字符串和运算符。例如：

```
$arr = array('username='=> 'Alex','id >'=>'4');
extractValues($arr); 
```

我需要拆分 $arr 键中可用的运算符和字符串并存储到两个单独的变量中。请记住，所有数组键都是动态的。字符串和条件运算符之间可能有空格，也可能没有。

数组键中预期的运算符是：

```
$operators = array('=','!=', '<', '<=', '>', '>=', 'like', 'clike', 'slike', 'not', 'is', 'in', 'between', 'and', 'or'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:14:34.753

除了其他可能性之外，您还可以使用它[`preg_match()`](http://php.net/manual/en/function.preg-match.php)来实现这一点。我不确定我是否正确理解了您的问题，但我已经准备好了应该有所帮助的示例。它将原始数组转换为具有以下结构的数组：

```
array(
  array('key', 'operator', 'value'),
  array('key', 'operator', 'value'),
  array('key', 'operator', 'value'),
  // ...
) 
```

代码如下：

```
$arr = array('username='=> 'Alex','id >'=>'4');
$result = extractValues($arr);
var_dump($result);

function extractValues($arr) {
    $pattern  = '/([A-Za-z_]+[A-Za-z_0-9]?)[ ]?(!=|=|<=|<|>=|';
    $pattern .= '>|like|clike|slike|not|is|in|between|and|or)/';

    $result = array();
    foreach($arr as $key => $value) {
        preg_match($pattern, $key, $matches);
        $result []= array($matches[1], $matches[2], $value);
    }

    return $result;
} 
```

输出如下：

```
array(2) {
  [0] =>
  array(3) {
    [0] =>
    string(8) "username"
    [1] =>
    string(1) "="
    [2] =>
    string(4) "Alex"
  }
  [1] =>
  array(3) {
    [0] =>
    string(2) "id"
    [1] =>
    string(1) ">"
    [2] =>
    string(1) "4"
  }
} 
```

# android - 有没有办法查看在 android 模拟器中看到的弹出窗口/对话框/通知？

> ID：14455475
> 
> 赞同：0
> 
> 时间：2013-01-22T09:41:02.957
> 
> 标签：android, dialog, popup, emulation, android-notifications

我需要做的是阅读模拟器中看到的弹出窗口或对话框，并能够阅读其中的文本。

例如，您的手机中安装了特定应用程序的可用更新，并在屏幕顶​​部显示通知。我需要阅读该弹出窗口/对话框/通知并能够阅读它所说的内容，这可能吗？

谢谢！

# javascript - 编译时解析错误

> ID：14455476
> 
> 赞同：0
> 
> 时间：2013-01-22T09:41:09.947
> 
> 标签：javascript, syntax-error, parse-error

我试图研究类似的主题，但找不到解决方案，完成了我学到的一切，但它总是给我同样的错误，&这里是代码：

```
 <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            $('#example').dataTable();
                      } ); //this is where its pointing for error
    </script> 
```

我不认为我遗漏了什么，但肯定还有其他错误......你们中的任何人都可以指出吗？

这是错误详细信息：

> 解析错误：语法错误，意外的 '}'，期待 ',' 或 ';' 在 /var/www/vhosts/tradeglobus.com/httpdocs/companies_list.php 第 41 行

* * *

**@Alex：这是完整的代码**

```
$isSeller = ((isset($PageType) && $PageType == "sellers") ? "1" : "0");

if(isset($searchType) && $searchType == "companies")
{
    //--------- Show Products Here -----------//
    $Query = clsCompanies::searchCompany($keyword, $Limit, $Offset, $countryID);
    $companies_list = $objDatabase->runStoredProcedure($Query);
    //----------------------------------------//
}
else
{
    //--------- Show Products Here -----------//
    $Query = clsCompanies::getCompaniesForDetailPages($IndustryId, $isSeller, $Limit, $Offset);
    $companies_list = $objDatabase->runStoredProcedure($Query);
    //----------------------------------------//
}

if(count($companies_list))
{
    $Cnt = 0;

    foreach($companies_list as $company)
    {
        $Cnt++;
        echo '<tr>
                <td ' . ((($Cnt % 2) == 0) ? "class='Even'" : "class='Odd'") . ' ">

    <style type="text/css" title="currentStyle">
        @import "http://www.tradeglobus.com/search/demo_page.css";
        @import "http://www.tradeglobus.com/search/demo_table.css";
    </style>

    <script type="text/javascript" language="javascript" src="http://www.tradeglobus.com/search/jquery.js"></script>
    <script type="text/javascript" language="javascript" src="http://www.tradeglobus.com/search/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            $('#example').dataTable();
                      } );
    </script>

<body id="dt_example">
    <div id="container">
        <div id="demo">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
<thead>
    <tr>
        <th>Company</th>
        <th>Description</th>
        <th>Membership Status</th>
        <th>Country</th>
    </tr>
</thead>
<tbody>
    <tr class="gradeX">

    <!-- TD for Company Logo STARTS -->
    <td rowspan="3" valign="top" width="75px" valign="middle" align="center">
    <img src="' . clsPresent::checkImageExistance(BASE_HOST . DEFAULT_COMPANY_LOGO_PATH . $company['company_logo_thumb']) . '" width="75px" height="75px" alt="productImage" />
    </td>
    <!-- TD for Company Logo ENDS -->

    <!-- TD for Company Name & Description STARTS -->
    <td rowspan="2" width="450px" align="left" style="line-height: 15px;">
    <h4 ><a style="font-size:16px;" href="' . BASE_HOST . 'companies_details/' . $company['MemberID'] . '/' . clsPresent::removeSpecialChars($company['company_name']) . '.htm">' . $company['company_name'] . '
    </a></h4><br/>' . ((strlen($company['company_introduction']) > 165) ? substr(strip_tags($company['company_introduction']), 0, 162) . '...' : $company['company_introduction']) .'
    </td>
    <!-- TD for Company Name & Description ENDS -->

    <!-- TD for Company Flag & Package STARTS -->
    <td valign="top" >
    <div style="float: left; line-height: 25px;"><div class="flags f_' . $company['CountryID'] . '"></div>&nbsp;' . $company['Country'] .'</div><br/>
    </td>
    <!-- TD for Company Flag & Package ENDS -->
    <td class="center"><img src="' . BASE_HOST . DEFAULT_PACKAGE_IMAGE_PATH . $company['imagePath'] . '" alt="Package Image" width="101px" height="24px" /></td>
    </tr>
    </table>
                        <tr>    

                            <td valign="top" style="line-height: 15px;">
                                <div>';?> 
                                <?php
                                    if(isset($_SESSION['userID']) && $_SESSION['userID'] != ""){ ?>
                                        <a style="vertical-align: top;" class="contactNow" href="<?php echo BASE_HOST; ?>contactmember.php?to=<?php echo $company['MemberID']; ?>&from=<?php echo $_SESSION['userID']; ?>&subject=Contact Request"></a>
                                    <?php } else { ?>
                                        <a style="vertical-align: top;" class="contactNowB" href="<?php echo BASE_HOST; ?>signin.php"></a>
                                    <?php } 
                                    echo '</div>
                            </td>
                        </tr>

                    </table>                          
                </td>
            </tr>';
    }

    echo '<tfoot>
            <tr>
                <th>';

    if(isset($PageType) && $PageType != ""){        
        echo'       <span style="float: left; padding-left: 10px;">' . (( $PageNo > 1 ) ? '<a href="' . BASE_HOST . $PageType . '/' . $IndustryId . '/' . ( $PageNo - 1 ) . '/' . $CategoryName . '.htm"><-- Back</a>' : "" ) . '</span>
                    <span style="float: right; padding-right: 10px;"><a href="' . BASE_HOST . $PageType . '/' . $IndustryId . '/' . ( $PageNo + 1 ) . '/' . $CategoryName . '.htm">Next --></a></span>';
    }else{
        echo'       <span style="float: left; padding-left: 10px;">' . (( $PageNo > 1 ) ? '<a href="' . BASE_HOST . 'search/companies/' . (($countryID != "") ? $countryID : "0") . '/' . ( $PageNo - 1 ) . '/' . $keyword . '.htm"><-- Back</a>' : "" ) . '</span>
                    <span style="float: right; padding-right: 10px;"><a href="' . BASE_HOST . 'srch/companies/' . (($countryID != "") ? $countryID : "0") . '/' . ( $PageNo + 1 ) . '/' . $keyword . '.htm">Next --></a></span>';
    }

    echo '      </th>
            </tr>
          </tfoot>';
}
else
{
    echo '<tr>
            <td align="center" valign="top">
                <h1 style="font-size: 16px; color: #003466;">No companies were found for this category.</h1>
            </d>
          </tr>';
}
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:07:12.350

您的 JavaScript 代码没有错误。JavaScript 不会编译，它会被浏览器解释。您不会`Parse error`在页面中看到 JavaScript 的显示，您会看到错误记录到浏览器控制台（WebInspector/Firebug 等）。

您的错误出现在您的 PHP 代码中，我怀疑行号是否指向正确的位置。如果您需要更多调试帮助，请在您的问题中发布整个 PHP 源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:36:05.087

你需要报价`'`

```
$('#example').dataTable(); 
```

应该

```
echo '<tr>
/*...further code...*/
$(\'#example\').dataTable();
'; 
```

因为它在 PHP 字符串中。

# sql - 关于 Oracle SQL *Plus 中的双表结构

> ID：14455479
> 
> 赞同：1
> 
> 时间：2013-01-22T09:41:14.977
> 
> 标签：sql

我们知道“Dual”是一个临时表，它恰好包含 1 个名为“dummy”的列，它是具有 1 个单行的“varchar2(1)”类型。该记录的值为“X”。varchar2 的大小为 1，这意味着它不应允许多个字符。现在我的问题是：如果它是 varchar2 类型，那么为什么它可以临时保存任何数据类型并且如果我们插入超过 1 个（大小）的字符，它（双重）如何接受它？例子：

```
SQL> desc dual

 Name                            Null?    Type
 ------------------------------- -------- ----
 DUMMY                                    VARCHAR2(1)

SQL> select sysdate from dual;

SYSDATE
---------
22-JAN-13

SQL> select 5*5 result from dual;

   RESULT
---------
       25

SQL> select 'Ankita' as "Name" from dual;

Name
------
Ankita 
```

显然“SYSDATE”是 DATE 类型（不是 varchar2），“RESULT”是 NUMBER 类型（不是 varchar2）。'Ankita' 也多于 1 个单个字符，即 6 个字符。这应该与 varchar2 仅持有 1 并且也支持 6 的结构相矛盾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T08:32:43.130

仅当您从中提取数据时，列的类型和大小才会起作用。确实，如果您`select`使用该`dummy`列，它只会为您*提供*该列中的内容。

但是，当您选择与列数据*无关*的内容时，例如`5*5`or `'Ankita'`，它们没有这样的限制。

我认为您的误解源于您的片段：

> 为什么它可以临时保存任何数据类型并且如果我们插入超过 1 个（大小）的字符，它如何（双重）接受它？

事实是，专栏*不*接受它。选择`5*5`不会*尝试*将该数据放入表中的某个位置，它只是按原样评估它。这与拥有一张桌子没有什么不同：

```
users:
    id
    name 
```

并执行：

```
select 42, 3.14159, id, name from users 
```

对于从中选择的每一行，您将看到常量值`42`和`3.14159`，以及从两个指定列中提取的数据。

# mysql - 在连接字段中选择/搜索

> ID：14455482
> 
> 赞同：0
> 
> 时间：2013-01-22T09:41:22.050
> 
> 标签：mysql, sql

如何从连接中的字段中选择/搜索？

是保持原样还是将查询分成两部分更好，因为 where 子句在连接表中搜索

# 一问

```
SELECT *
FROM user u
LEFT JOIN country c ON c.id=u.country_id
WHERE c.code='dk' 
```

# 两个查询

```
SELECT id
FROM country
WHERE code='dk'

SELECT *
FROM user u
LEFT JOIN country c ON c.id=u.country_id
WHERE c.id='result from first query' 
```

# 子查询

```
SELECT *
FROM user u
LEFT JOIN country c ON c.id=u.country_id
WHERE c.id IN (SELECT id FROM country WHERE code='dk') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:13:43.440

如果您想有效地执行它，`where`请在您的子句中包含`join`子句。

## 前

```
SELECT 
    *
FROM 
    user u
LEFT JOIN 
    country c ON c.id=u.country_id
WHERE 
    c.code='dk' 
```

* * *

## 后

```
SELECT 
    *
FROM 
    user u
LEFT JOIN 
    country c ON c.id=u.country_id
    AND c.code='dk' 
```

此代码将仅生成 1 个对 db 的查询，您的所有示例都将生成 2 个查询。

# php - 获取站点发送给自身的 POST 请求？

> ID：14455484
> 
> 赞同：1
> 
> 时间：2013-01-22T09:41:30.650
> 
> 标签：php, http, post, request

因此，我正在为特定网站创建一个应用程序，该应用程序对某些文章/实体或其他内容有评论。我已经知道如何使用 RSS 获取这些评论，但我也很好奇我是否可以从应用程序本身实现回复功能。该网站没有为此提供 API，但我知道当您写评论时，它会发送一个包含表单内容的 POST 请求。

有没有办法找出那个 POST 请求的样子，所以我可以从我的应用程序中发送一个类似的请求？最终目标是能够将我的应用程序中的新评论回复/发布到该网站。

有什么想法吗？只是理论上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:45:13.403

> 有没有办法找出那个 POST 请求的样子，所以我可以从我的应用程序中发送一个类似的请求？

使用一些调试器，例如[FF 的 FireBug](http://getfirebug.com/)或[Opera 的 DragonFly](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CC8QFjAA&url=http://www.opera.com/dragonfly/&ei=5mD-UKa7F-qM4ATx8AE&usg=AFQjCNHmhTvy44PEs66n_L4fZ6q_x6GHWw&bvm=bv.41248874,d.bGE)。

> 所以我可以从我的应用程序发送一个类似的？

如果任何人都可以看到请求的性质并在他们的应用程序中提出此类请求，那将是**不安全的。**应用程序可能**不好**并发送**垃圾邮件**。
应该有一些[验证](http://en.wikipedia.org/wiki/Cross-site_request_forgery)码或[CSRF](http://en.wikipedia.org/wiki/CAPTCHA)保护。 如果有——你的计划**将行不通**。 如果没有 - 这是**安全漏洞**。

 ****我的建议。最好创建一些 API 并从您的 APP 中调用它。
[简单的 HTTP](http://blog.andreaolivato.net/programming/create-your-first-api-set-in-php.html)、[XML-RPC](http://www.devshed.com/c/a/PHP/Using-XMLRPC-with-PHP/4/)或[SOAP](http://www.phpeveryday.com/articles/Web-Services-WSDL-Creating-SOAP-Server-P484.html)。
这将是更安全和更有用的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:44:31.380

查看发送 post 请求的页面。如果 HTML 代码或 javascript 很简单，您可以了解哪些是发送到服务器的 POST 数据。否则，也许您可​​以访问服务器并查看那里的代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:47:05.230

使用 Chrome 或 Firefox（带有 Firebug 插件）指向您的浏览器并打开检查器（Control-Alt-I / Command-Alt-I），然后打开“网络”选项卡。在那里，您将看到对服务器的实时请求和响应。

如果您需要从您的应用程序实施身份验证，请搜索“cookie jar”和您的语言。****

# asp.net-mvc - 总结授权属性

> ID：14455489
> 
> 赞同：0
> 
> 时间：2013-01-22T09:41:45.290
> 
> 标签：asp.net-mvc, authorize-attribute

我有一个提供各种管理功能的 ASP.net MVC 网站。它是内部的，使用 Windows 身份验证来管理不同角色对各种控制器和操作的访问。

为了实现这一点，我用 [Authorize(Roles="")] 装饰了各种对象

这个项目现在已经相当成熟了，搜索显示我已经使用了近 60 次该属性 - 我现在正处于开始感到不安全的地步，我需要一种方法来有效地管理谁可以访问什么。

所以我真正想要构建的是一个站点地图类型的页面，它列出了站点上的所有视图以及可以访问旁边列出的每个视图的角色列表。

我已经搜索过，但似乎找不到如何开始 - 任何指针都会被大大接收 - 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:22:31.200

如果您对没有管理所有控制器/控制器操作感到不安全，您可以查看[Fluent Security](http://www.fluentsecurity.net/)。

它允许在集中空间中以可读的方式指定安全性。

[这里](http://www.mariusschulz.com/blog/securing-an-aspnet-mvc-application-using-fluentsecurity)有一个很好的教程。

它不会为您提供站点地图类型的页面，但可能会让您安心。

# php - 在数组中填充缺失的日期和价格（例如周末）

> ID：14455490
> 
> 赞同：1
> 
> 时间：2013-01-22T09:41:48.080
> 
> 标签：php, arrays, multidimensional-array

我有一个像这样的“间隙”数组：

```
$arr = array ( 
"bananas" => array (
    "2010-01-01" => "10.1",
    "2010-01-02" => "11.4", 
    "2010-01-05" => "13.3", //missing 03, 04
    "2010-01-06" => "09.2",
    "2010-01-07" => "11.1" ),
"grapes" => array (
    "2011-01-05" => "20.1",
    "2011-01-06" => "21.4",
    "2011-01-07" => "23.3",
    "2011-01-08" => "29.2",
    "2011-01-10" => "21.1", //missing 09
    "2011-01-11" => "21.0" ),
"coconuts" => array (
    "2012-01-28" => "50.1",
    "2012-01-29" => "51.4", 
    "2012-02-02" => "53.3", //missing 30, 31, 01
    "2012-02-03" => "51.1" ) 
); 
```

我不知道数组中有多少产品和“日期=>价格”。
我怎样才能用差距前的最后价格填补缺失的日期？

**重要提示：**日期可以在不同的月份（查看`"coconuts"`）。

我希望结果是这样的：

```
$arr = array ( 
"bananas" => array (
    "2010-01-01" => "10.1",
    "2010-01-02" => "11.4", //was last price before gap
    "2010-01-03" => "11.4", //filling missing
    "2010-01-04" => "11.4", //filling missing
    "2010-01-05" => "13.3", 
    "2010-01-06" => "09.2",
    "2010-01-07" => "11.1" ),
"grapes" => array (
    "2011-01-05" => "20.1",
    "2011-01-06" => "21.4",
    "2011-01-07" => "23.3",
    "2011-01-08" => "29.2", //was last price before gap
    "2011-01-09" => "29.2", //filling missing
    "2011-01-10" => "21.1", 
    "2011-01-11" => "21.0" ),
"coconuts" => array (
    "2012-01-28" => "50.1", 
    "2012-01-29" => "51.4", //was last price before gap
    "2012-01-30" => "51.4", //filling missing
    "2012-01-31" => "51.4", //filling missing
    "2012-02-01" => "51.4", //filling missing
    "2012-02-02" => "53.3",
    "2012-02-03" => "51.1" ) 
); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:12:02.380

```
<?php
$arr = array ( 
"bananas" => array (
    "2010-01-01" => "10.1",
    "2010-01-02" => "11.4", 
    "2010-01-05" => "13.3", //missing 03, 04
    "2010-01-06" => "09.2",
    "2010-01-07" => "11.1" ),
"grapes" => array (
    "2011-01-05" => "20.1",
    "2011-01-06" => "21.4",
    "2011-01-07" => "23.3",
    "2011-01-08" => "29.2",
    "2011-01-10" => "21.1", //missing 09
    "2011-01-11" => "21.0" ),
"coconuts" => array (
    "2012-01-28" => "50.1",
    "2012-01-29" => "51.4", 
    "2012-02-02" => "53.3", //missing 30, 31, 01
    "2012-02-03" => "51.1" ) 
);  

$result=array();
while(list($name,$data)=each($arr))
{
   $result[$name]=array();
   if(!empty($data))
   {
      $last_price=reset($data);
      $cur_key=key($data);
      $curdate=new DateTime($cur_key);

      while(list($k, $price)=each($data))
      {
         $dt=new DateTime($k);
         while($curdate<=$dt)
         {
            $cd=$curdate->format('Y-m-d');
            if($curdate!=$dt)  $result[$name][$cd]=$last_price;
            else               $result[$name][$cd]=$price;
            $curdate->modify('+1 day');
         }
         $last_price=$price;
      }
   }
}

print_r($result);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:14:23.343

```
foreach ($arr as $fruit => $data)
{
    $previousprice = 0;
    $previoustime = false;

    foreach ($data as $day => $price)
    {
        $time = strtotime($day);

        if ($previoustime && (($time - $previoustime) > 86400))
            $data[date('Y-m-d', ($previoustime + 86400))] = $previousprice;

        $previousprice = $price;
        $previoustime = $time;
    }

    ksort($data);
} 
```

# sql-server-2008-r2 - 如何在 Management Studio 对象资源管理器中显示过滤器数据库

> ID：14455498
> 
> 赞同：3
> 
> 时间：2013-01-22T09:42:06.953
> 
> 标签：sql-server-2008-r2, ssms, management-studio-express

我的数据库托管在共享主机中。我在 Management Studio Express 中远程连接我的数据库。每当我尝试连接到 sqlserver 实例时，它都会显示该服务器实例中托管的所有数据库。一直在其他用户的 400 个数据库中找出您的数据库，这很烦人。

有什么方法可以将数据库列表过滤到我赢得或获得许可的数据库列表中吗？我不想看到我没有权限或我不拥有的数据库。

请记住，我的数据库托管在共享主机中，作为用户，我的权限有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:57:57.890

我研究了一个类似的问题，我发现唯一可行的方法有点老套，但在这种情况下它可能对你有用。如果您（或您的共享主机的管理员）能够将您的登录名设置为数据库的 DBO，然后还可以拒绝查看*所有*数据库以供您登录，那么您在连接时应该只看到您的登录名拥有的数据库。所以 t-sql 将是：

`使用 AdventureWorks2008R2

将 DATABASE::AdventureWorks2008R2 上的授权更改为 TestLogin

使用大师

拒绝查看任何数据库到 TestLogin`

不确定这是否适合您的场景，并且绝对不是说这是最佳实践，但也许它会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-19T16:20:42.927

我在 SSMS 的 SSMSBoost 插件中为这个问题创建了解决方案（我是这个插件的开发者）。工具栏上有一个特殊的“智能连接开关”组合框，您可以将其配置为显示您最喜欢的连接（首选连接），也可以显示所有本地数据库，但仅显示您可以访问的那些。

# delphi - DBExpress：如何找到主键字段？

> ID：14455503
> 
> 赞同：1
> 
> 时间：2013-01-22T09:42:19.017
> 
> 标签：delphi, delphi-xe2, dbexpress

我有一个基于动态创建的 SQL 查询的 TSimpleDataSet。我需要知道哪个字段是主键？

```
SimpleDataSet1.DataSet.SetSchemaInfo(stIndexes, 'myTable' ,''); 
```

这段代码告诉我我有一个名为“someName”的主键，但我怎么知道哪个字段（列）与这个索引一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:00:40.160

主键/索引可以属于多个列（不仅仅是一个）。

模式`stIndexes`数据集将返回 PK 名称`INDEX_NAME`和构成该 PK/索引 ( `COLUMN_NAME`) 的列。`INDEX_TYPE`将告诉您您拥有哪些索引类型 ( `eSQLNonUnique/eSQLUnique/eSQLPrimaryKey`)。

我从未使用过，`TSimpleDataSet`但请检查索引信息是否存储在其中 `IndexDefs[TIndexDef].Name/Fields/Options`- 如果`ixPrimary`在其中，`Options`那么这就是您的 PK。并且`Fields`属于该索引。

看看源代码`SqlExpr.pas`：`TCustomSQLDataSet.AddIndexDefs`。请注意如何从命令文本`TCustomSQLDataSet`返回`TableName`（然后是索引信息）：

```
 ...
  if FCommandType = ctTable then
    TableName := FCommandText
  else
    TableName := GetTableNameFromSQL(CommandText);
  DataSet := FSQLConnection.OpenSchemaTable(stIndexes, TableName, '', '', '');
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:05:44.250

我认为简单的数据集没有提供这些信息。

但是，我确信有相应的组件。对于 Oracle 数据库，检查[Devart 的 ODAC](http://www.devart.com/odac/)。基本上，它只涉及对数据库的一次查询。但是，默认情况下组件不会提供它，因为它涉及不同的查询，因此会导致响应时间变慢。

对于 Oracle 数据库，查询`user_indexes`.

# sql - 没有获得最高记录的 SQL 组

> ID：14455506
> 
> 赞同：1
> 
> 时间：2013-01-22T09:42:33.103
> 
> 标签：sql, sql-server

下面是我表中的示例记录。

字段为 varchar，ToDate 包含两条空记录。（不是数据库 NULL）

```
CustomerID  FromDate    ToDate
1           20120810    20120920
2           20120901    20120915
3           20120112    
4           20120815    
5           20120817    20120920
6           20120817    20120920 
```

必须遵守以下规则：

1.  以 ToDate 列中最远的日期排序。
2.  当记录为空时，取当前日期+30 而不是空，
3.  当 ToDate 中的两个日期相同时，取 FromDate 中最远的日期。

所以对于上述记录样本，我需要输出为

```
CustomerID   FromDate   ToDate
3            20120112   20130221 
```

因为客户 id 4 和 5 ToDate 是空的，所以我们考虑应该从 getdate() 函数中添加 30 天。所以 Todate 是相等的，所以我现在想按 FromDate 排序。

日期的输入是 20120810

```
select   top 1 customer_id, 
max(convert(datetime,Fromdate,101)) as Fromdate,
convert(datetime,(CASE WHEN Todate = '' THEN getdate() + 30 WHEN Todate != '' THEN Todate END),101) as Todate,
customer_id
FROM  dbo.sample_tbl (nolock)
 WHERE  customer_id = '1' 
 AND    Fromdate <= '20120810'
 AND    (CASE WHEN ToDate = '' THEN getdate() + 30 WHEN ToDate != '' THEN ToDate END) >= '20120810'
group by convert(datetime,(CASE WHEN ToDate = '' THEN getdate() + 30 WHEN ToDate != '' THEN ToDate END),101),customer_id
order by convert(datetime,(CASE WHEN ToDate = '' THEN getdate() + 30 WHEN ToDate != '' THEN ToDate END),101) desc 
```

电流输出为

```
CustomerID   FromDate  ToDate
3            20120112  20130221 
```

预期是

```
CustomerID   FromDate   ToDate
3            20120815   20130221 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:59:32.760

我认为你的代码太复杂和多余。您应该创建一个 SQL 函数来获取 enddate。调用这个函数getEndDate(String date)（我觉得你可以自己创建）

您的查询可能是：

```
select  CustomerID  ,FromDate  , getEndDate (ToDate) 
from sample_tbl
order by getEndDate (ToDate) desc, FromDate  desc  ; 
```

然后你占据第一排。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:58:02.773

在 SQLServer 2005+ 中

```
 ;WITH cte AS
 ( 
  SELECT CustomerID,         
         MAX(CAST(FromDate AS date)) OVER (PARTITION BY
         (CASE WHEN ToDate = '' THEN CAST(GETDATE() + 30 AS date) ELSE CAST(ToDate AS date) END
         )) AS FromDate,         
         CASE WHEN ToDate = '' THEN CAST(GETDATE() + 30 AS date) ELSE CAST(ToDate AS date) END AS ToDate
  FROM dbo.sample_tbl
  )
  SELECT TOP 1 CustomerID, MAX(FromDate) AS FromDate, ToDate
  FROM cte
  GROUP BY ToDate, CustomerID
  ORDER BY ToDate DESC 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/650ed/2/0)上的演示[](http://sqlfiddle.com/#!3/650ed/2/0)

# php - jQuery,PHP-上传文本文件,doc/docx,ppt/pptx,pdf

> ID：14455507
> 
> 赞同：-1
> 
> 时间：2013-01-22T09:42:34.927
> 
> 标签：php, jquery

在使用 php 和 jquery 上传文件时，如何上传**txt、doc/docx、ppt/pptx、pdf**并限制所有其他文件类型？我也可以用 jQuery 来做吗？

我试过这个。

```
$allowedExts = array("doc", "docx", "pdf", "txt");
$extension = end(explode(".", $_FILES["file"]["name"]));
if (($_FILES["file"]["type"] == "application/msword")
|| ($_FILES["file"]["type"] == "application/pdf")
|| ($_FILES["file"]["type"] == "application/txt") 
&& in_array($extension, $allowedExts)){} 
```

我在 JQuery 中需要它或在 PHP 中使用更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:57:42.737

jQuery 验证插件是更好的例子 这里是链接[jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。此外，类型可能因浏览器而异，因此它并不可靠。此外，您可以使用`pathinfo`php 的函数，该函数将为您提供一个包含文件详细信息（如扩展名）的数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T09:59:57.350

使用 php 试试这个：

```
$fileTypes = array('txt','doc','docx','ppt','pptx','pdf'); // 允许文件扩展名
$fileParts = pathinfo($_FILES['file']['name']);

if(in_array($fileParts['extension'],$fileTypes))
{
   // 如果扩展名与您允许的扩展名匹配，则在此处上传文件。
}

```

# google-apps-script - 使用谷歌应用脚 本在谷歌文档上操作单元格的高度

> ID：14455508
> 
> 赞同：1
> 
> 时间：2013-01-22T09:42:39.413
> 
> 标签：google-apps-script

我正在尝试在 Google Document 上绘制一个表格，`Google Apps Script`然后将结果转换为`PDF`. 这工作正常，但我无法*操纵细胞的高度*。这是我的代码：

```
var TemplateCopyBody = DocumentApp.openById("id").getActiveSection();
var tableStyle = {};
tableStyle[DocumentApp.Attribute.FONT_SIZE] = 8;
tableStyle[DocumentApp.Attribute.FONT_FAMILY] =  DocumentApp.FontFamily.UBUNTU;
tableStyle[DocumentApp.Attribute.BOLD] = 0;
tableStyle[DocumentApp.Attribute.HORIZONTAL_ALIGNMENT] = 0;
tableStyle[DocumentApp.Attribute.PADDING_RIGHT] = 0;
tableStyle[DocumentApp.Attribute.HEIGHT] = 0;

/* Function to populate my table */
var myTable = new Array();
for(var i=0;i<RESULT.marksDetails.length -1;i++){
  myTable[i] = RESULT.notesDetails[i];
  Logger.log("insertion table : "+i);
}

TemplateCopyBody.appendTable(myTable).setAttributes(tableStyle).setColumnWidth(0, 300); 
```

我真的需要你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:30:45.297

要将每隔一行的高度更改为 45 像素，将其他行的高度更改为 22 像素，我会这样做：

```
var newTable = TemplateCopyBody.appendTable(myTable);
  for(var i=1; i < myTable.length ;i++){
    if(i % 2 == 0)
      newTable.getRow(i).setMinimumHeight(22);
    else
      newTable.getRow(i).setMinimumHeight(45);
  }
  newTable.setAttributes(tableStyle).setColumnWidth(0, 300); 
```

# c# - 如何在线程中启动进程

> ID：14455510
> 
> 赞同：11
> 
> 时间：2013-01-22T09:43:00.780
> 
> 标签：c#

* * *

**进一步编辑** *以下不是生产代码——我只是在玩几个类，试图弄清楚我如何在线程中运行进程——或者即使这是可行的。我已经阅读了 MSDN 上的各种定义，但我是线程和进程的新手，因此对文章的任何进一步明确参考将不胜感激*

* * *

这可以...

```
class Program {
    static void Main(string[] args) {

        Notepad np = new Notepad();
        Thread th = new Thread(new ThreadStart(np.startNPprocess));
        th.Start();

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }
}

public class Notepad {

    public void startNPprocess() {

        Process pr = new Process();
        ProcessStartInfo prs = new ProcessStartInfo();
        prs.FileName = @"notepad.exe";
        pr.StartInfo = prs;
        pr.Start();     

    }
} 
```

这不是...

```
class Program {
    static void Main(string[] args) {

        Process pr = new Process();
        ProcessStartInfo prs = new ProcessStartInfo();
        prs.FileName = @"notepad.exe";
        pr.StartInfo = prs;

        ThreadStart ths = new ThreadStart(pr.Start);
        Thread th = new Thread(ths);
        th.Start();

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }
} 
```

为什么第二个和第一个不一样？在第二个脚本中，我尝试`Process.Start`使用 Threadstart 委托传递...我认为这可以作为它的一种`void`方法吗？第一个脚本是唯一的选择，还是我可以稍微更改第二个脚本，以便它有效地完成与第一个脚本相同的工作，即在指定线程中启动记事本实例？

* * *

**编辑**

*关于我为什么*要使用此代码的一些背景知识：最终我需要构建一个将同时运行多个 Excel 进程的应用程序。当 VBA 出错时，这些过程可能会很麻烦，因为它会导致一个对话框。所以我想如果每个进程都在一个线程中运行，那么如果一个特定的线程已经运行了太长时间，那么我可以杀死该线程。我是线程/进程的新手，所以目前基本上是在玩各种可能性。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-22T09:45:57.847

A`ThreadStart`期望一个返回的委托`void`。`Process.Start`返回`bool`，因此不是兼容的签名。您可以使用 lambda 来吞下返回值，该 lambda 为您提供正确返回类型（即`void`）的委托，如下所示：

```
 Process pr = new Process();
    ProcessStartInfo prs = new ProcessStartInfo();
    prs.FileName = @"notepad.exe";
    pr.StartInfo = prs;

    ThreadStart ths = new ThreadStart(() => pr.Start());
    Thread th = new Thread(ths);
    th.Start(); 
```

...但可能建议检查返回值：

```
 ThreadStart ths = new ThreadStart(() => {
        bool ret = pr.Start();
        //is ret what you expect it to be....
    }); 
```

当然，一个进程在一个新进程（完全独立的一堆线程）中启动，因此在线程上启动它是完全没有意义的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T09:56:25.517

你可以做出改变，比如

```
ThreadStart ths = new ThreadStart(delegate() { pr.Start(); }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T09:50:13.847

只需使用以下代码正常启动该过程：

```
Process.Start("notepad.exe"); 
```

创建线程来运行新进程没有任何意义，也没有任何好处。这就像在您可以直接执行“cmd.exe”时运行一个执行“cmd.exe”的批处理文件......您只是在做更多不必要的事情。不要重新发明轮子并轻松玩：P

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-17T11:15:47.310

不直接回答 OP，但由于这个线程帮助我跟踪正确的方向，我确实想回答这个问题：

> “在线程上启动它完全没有意义”

我有一个使用 NodeJS 作为其 TCP 套接字管理器的 .Net 服务器。我希望 NodeJS 写入与 .Net 服务器相同的输出，并且它们都并行运行。所以在一个新线程中打开允许我使用

```
processNodeJS.BeginErrorReadLine()
processNodeJS.BeginOutputReadLine()
processNodeJS.WaitForExit() 
```

同时不阻塞 .Net 服务器的主线程。

我希望这对某人有意义，如果您有更好的方法来实现我刚刚描述的内容，我将非常高兴听到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-26T07:32:38.567

您可以使用以下代码中的 start 关键字在另一个线程中启动该进程：

```
Process.Start("start notepad.exe"); 
```

这样，当您运行记事本时，您的 GUI 程序就不会冻结。

# http - 我应该对给定域进行的最大并发连接数/每秒 HTTP 请求数是多少？

> ID：14455511
> 
> 赞同：1
> 
> 时间：2013-01-22T09:43:01.450
> 
> 标签：http, web, connection, web-crawler, httprequest

我正在从各种网络服务器下载完整的**静态图像内容**目录（超过百万张图像，全部合法）。

我想有效地下载图像，但我正在考虑每个域我应该对**并发连接数**和**连接尝试之间的时间设置****什么限制**，以避免被 DOS 工具和其他限制器列入黑名单。

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:41:22.097

我需要寻找的关键字是“webcrawler politness”，它弹出了一些有用的文章，很好地回答了这个问题：

[网络爬虫的典型礼貌因素？](https://stackoverflow.com/questions/8236046/typical-politeness-factor-for-a-web-crawler)

[http://blog.mischel.com/2011/12/20/writing-a-web-crawler-politeness/](http://blog.mischel.com/2011/12/20/writing-a-web-crawler-politeness/)****

# javascript - 为什么我不能通过只传递它的变量名来运行这个回调，但我可以将它包装在一个函数中？

> ID：14455512
> 
> 赞同：3
> 
> 时间：2013-01-22T09:43:02.020
> 
> 标签：javascript, jquery

只是一个简单的问题。在我目前的理解中，以下两个代码块是相同的，除了一个包含在一个函数中。为什么它适用于方法 1，而不适用于方法 2？有什么区别？

方法一：

```
// Reset button
$('.reset').button({
    icons: {primary: 'ui-icon-closethick'}
}).click(function(){groupList.change()}); 
```

方法二：

```
// Reset button
$('.reset').button({
    icons: {primary: 'ui-icon-closethick'}
}).click(groupList.change); 
```

**编辑：** JSFiddle： http: [//jsfiddle.net/B8YEa/2/](http://jsfiddle.net/B8YEa/2/) - 请注意单击“两个”如何引发错误`Uncaught TypeError: Object #<HTMLButtonElement> has no method 'on'`，“一个”很好，以及选择的实际更改

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:45:47.177

不同之处在于，第一个代码将函数作为对象的方法调用，而第二个代码将函数作为独立函数调用。

在第一种情况下，`this`将引用`groupList`函数内部的对象，而在第二种情况下，`this`将引用全局`window`对象。

如果你调用一个指定它为对象成员的函数，例如`obj.method();`，它将被调用为一个方法。如果您获得对该函数的引用并调用它，例如`var m = obj.method; m();`，则该方法不再连接到该对象。

* * *

此外，正如 Thilo 所指出的，第一个代码将在每次事件发生时查找方法，而第二个代码将在事件绑定时查找一次方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:45:44.840

如果`groupList.change`尚不存在，但稍后定义（但在用户单击之前），则存在差异。如果稍后重新定义，则相同。

第一个代码`groupList.change`在点击发生时解析。

第二个代码`groupList.change`立即解析。

# android - 在opencv中使用后如何删除cv::RotatedRect ..？

> ID：14455514
> 
> 赞同：1
> 
> 时间：2013-01-22T09:43:02.353
> 
> 标签：android, opencv

我正在做的是=>我正在拍摄图像，然后我正在计算拍摄图像的倾斜角度，然后我根据计算出的倾斜角度旋转该图像。一切正常，但问题是我在我的代码中使用了***cv::RotatedRect*** 并且因此我的结果图像也包含该框，我想从我的结果图像中删除该框，任何人都有任何想法我该如何删除那个盒子..？我在下面指定我的代码..请帮助..！谢谢..！[我无法上传生成的图像，因为我是 StackOverflow 的新手，但我无权上传图像。]

```
// Function to Find Skew angle.
 double compute_skew(const char* filename)
   {

// Load in grayscale.
  cv::Mat img = cv::imread(filename, 0);

  // Binarize
  cv::threshold(img, img, 225, 255, cv::THRESH_BINARY);

  // Invert colors
  cv::bitwise_not(img, img);

  cv::Mat element = cv::getStructuringElement(cv::MORPH_RECT, cv::Size(5, 3));
  cv::erode(img, img, element);

  std::vector<cv::Point> points;
    cv::Mat_<uchar>::iterator it = img.begin<uchar>();
    cv::Mat_<uchar>::iterator end = img.end<uchar>();
    for (; it != end; ++it)
      if (*it)
        points.push_back(it.pos());

   cv::RotatedRect box = cv::minAreaRect(cv::Mat(points));

   double angle = box.angle;
    if (angle < -45.)
      angle += 90.;

    cv::Point2f vertices[4];
      box.points(vertices);
      for(int i = 0; i < 4; ++i)
        cv::line(img, vertices[i], vertices[(i + 1) % 4], cv::Scalar(255, 0, 0), 1, CV_AA);

      std::cout << "File **************Angle***************** " << filename << ": " << angle << std::endl;

return angle; 
```

}

```
// Function to rotate image image
void deskew(const char* filename, double angle)
 {

    //angle = 90;
  cv::Mat img = cv::imread(filename, 0);

  cv::bitwise_not(img, img);

  std::vector<cv::Point> points;
  cv::Mat_<uchar>::iterator it = img.begin<uchar>();
  cv::Mat_<uchar>::iterator end = img.end<uchar>();
  for (; it != end; ++it)
    if (*it)
      points.push_back(it.pos());

 cv::RotatedRect box = cv::minAreaRect(cv::Mat(points));

 cv::Mat rot_mat = cv::getRotationMatrix2D(box.center, angle, 1);

 cv::Mat rotated;
 cv::warpAffine(img, rotated, rot_mat, img.size(), cv::INTER_CUBIC);

cv::bitwise_not(rotated, rotated);
imwrite(filename,rotated); 
```

}

# php - MySQL查询选择DISTINCT但显示所有行

> ID：14455515
> 
> 赞同：0
> 
> 时间：2013-01-22T09:43:08.727
> 
> 标签：php, mysql, select

我需要帮助`DISTINCT`。我想显示不同的行但也显示所有行

数据库中的此表示例：

```
+----+-----+-----+
|col1|col2 |col3 |
+----+-----+-----+
|A   |one  |two  |
|A   |three|four |
|A   |five |six  |
|B   |seven|eight|
|B   |nine |ten  |
+----+-----+-----+ 
```

我希望显示器看起来像这样：

```
A
one  |two
three|four
five |six

B
seven|eight
nine |ten 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:51:03.483

最简单的方法是从数据库中获取所有行，然后在 PHP 中对它们进行分组。

```
// Querying:
$query = mysql_query('select * from tbl');
$results = array(); // Store all results in an array, grouped by col1

while($row = mysql_fetch_assoc($query)) {
    $col1 = $row['col1'];

    // This is basically grouping your rows by col1
    if(!isset($results[$col1]))
        $results[$col1] = array();
    $results[$col1][] = $row;
}

// Displaying:
foreach($results as $col1 => $rows) {
    echo "<h1>" . $col1 . "</h1>";

    foreach($rows as $row) {
        echo $row['col2'] . "|" . $row['col3'] . "<br />";
    }
} 
```

产量：

```
<h1>A</h1>
one  |two
three|four
five |six

<h1>B</h1>
seven|eight
nine |ten 
```

* * *

请注意，我使用已弃用的 mysql_functions 只是为了简单，不要在生产中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:31:43.447

这是你如何做到的

```
$query="select 
            distinct    (col1) as col1,
            GROUP_CONCAT(col2) as col2,
            GROUP_CONCAT(col3) as col3
        FROM test
        group by col1";
$query = mysql_query($query); 
```

这将获取此输出

```
col1    col2            col3 
A       one,three,five  two,four,six 
B       seven,nine      eight,ten 

while($row = mysql_fetch_assoc($query)) 
{
    $col1 = $row['col1'];
    $col2   =   explode(',',$row['col2']);
    $col3   =   explode(',',$row['col3']);

    for($i=0;$i<=count($col2);$i++)
    {
        $value  =   '';
        if(isset($col2[$i])){
            $value  =   $col2[$i];
            $value  .=  ' | ';
        }
        if(isset($col3[$i])){
        $value  .=  $col3[$i];
        }
            echo $value; 
    }
} 
```

# sql - 合并语句产生异常，但是为什么

> ID：14455518
> 
> 赞同：1
> 
> 时间：2013-01-22T09:43:19.077
> 
> 标签：sql, oracle, merge, merge-statement

此合并语句引发 ORA-00905:missing keyword 异常。可能是什么问题？WHEN MATCHED 分支的东西？

```
MERGE INTO WORKERPROJECT TARGET
USING (SELECT distinct
               w.worker_id,
               w.worker_type,
               w.project_id worker_project_id, 
               p.project_id project_project_id,
               p.dedicated_project_leader,
               p.dedicated_lead_developer,
               p.dedicated_lead_consultant,
               p.dedicated_supervisor
       from WORKER w 
       join PROJECT p on w.project_id = p.project_id
      ) SOURCE
   ON (TARGET.FK_worker_id=SOURCE.WORKER_ID)
 WHEN MATCHED THEN INSERT (TARGET.FK_WORKER_ID, TARGET.FK_PROJECT_ID,TARGET.IS_ACTIVE,POSITION) 
  VALUES (SOURCE.WORKER_ID,SOURCE.worker_project_id,'IS_ACTIVE',SOURCE.worker_type); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:51:04.420

根据[http://www.oracle-base.com/articles/10g/merge-enhancements-10g.php](http://www.oracle-base.com/articles/10g/merge-enhancements-10g.php)

您只能在不匹配时进行插入。

# javascript - Google Map KML 图层 - 点击事件返回 ZERO_RESULTS

> ID：14455519
> 
> 赞同：6
> 
> 时间：2013-01-22T09:09:41.467
> 
> 标签：javascript, google-maps, kml

我正在使用 Google Maps KML 图层点击事件。

我正在使用这段代码：

```
function initialize() {
  var mapOptions = {
    center: new google.maps.LatLng(41.875696, -87.624207),
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  var ctaLayer = new google.maps.KmlLayer('https://sites.google.com/site/anoopkml123/kml/ab9Plan0520.kmz');

  ctaLayer.setMap(map);

  google.maps.event.addListener(ctaLayer, 'click', function(kmlEvent) {
    alert(kmlEvent.featureData.name);
  });
}
```

有时`alert(kmlEvent.featureData.name)`显示一个数字，但有时它是“未定义的”。有时`obj.featuredData.id`为空（ZERO_RESULTS 状态在状态字段中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:00:03.030

在小提琴中重新创建了您的代码：http: [//jsfiddle.net/mdares/TAfys/](http://jsfiddle.net/mdares/TAfys/)

我无法复制您遇到的问题。你能提供一个例子，给出上面失败的链接吗？这可能是特定于浏览器的吗？最后 - 是否有任何您尚未发布的其他代码可能是原因？正如您发布的那样，我的代码与您的代码没有变化，但我很好奇您是否还在做其他事情：

```
function initialize() {
var mapOptions = {
    center: new google.maps.LatLng(41.875696, -87.624207),
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var ctaLayer = new google.maps.KmlLayer('https://sites.google.com/site/anoopkml123/kml/ab9Plan0520.kmz');
ctaLayer.setMap(map);
google.maps.event.addListener(ctaLayer, 'click', function (kmlEvent) {
    alert(kmlEvent.featureData.name);
   });
} 
```

# java - 使用反射调用超类方法

> ID：14455526
> 
> 赞同：8
> 
> 时间：2013-01-22T09:44:02.493
> 
> 标签：java

我有 2 节课，比如 A 和 B：

```
Class A extends B {
    public void subClassMthd(){
        System.out.println("Hello");
    }
}

Class B {
    public void printHelloWorld {
        System.out.println("Hello");
    }
} 
```

现在，我正在使用反射来调用 A 类上的方法。我还想调用 B 类中的 printHelloWorld 方法。

我尝试使用

```
Class clazz = Class.forName("com.test.ClassA");
Object classAInstance= clazz.newInstance();
Method superClassmthd = classAInstance.getClass()
    .getSuperclass().getMethod("printHelloWorld", null);
superClassmthd.invoke(classAInstance); 
```

也试过了

```
Class clazz = Class.forName("com.test.ClassA");
Object classAInstance= clazz.newInstance();
Class superClazz = Class.forName(classAInstance.getClass().getSuperclass().getName());
Object superclassInstance = superClazz.newInstance();
Method superClassmthd = superclassInstance.getMethod("printHelloWorld", null);
superClassmthd.invoke(superclassInstance ); 
```

但是它们都不起作用；他们抛出一个[InstantiationException](http://docs.oracle.com/javase/7/docs/api/java/lang/InstantiationException.html)。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T09:51:04.537

尝试这个：

```
Method mthd = classAInstance.getClass().getSuperclass().getDeclaredMethod("XYZ");
mthd.invoke(classAInstance) 
```

不同之处在于 using [`getDeclaredMethod()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)，它获取*所有*可见性（`public`、`protected`、包/默认和`private`）的方法，而不是[`getMethod()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)，它只获取具有`public`可见性的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T09:57:55.500

您要调用的方法（公共、私有等）的可见性是什么。如果要查看无法直接调用的方法，则应使用 getDeclaredMethod()。

另外，你的类的构造函数喜欢什么？InstantiationException 表示您在获取 A（或 B）类的实例时遇到问题。

我有以下代码，它可以工作：

爪哇

```
import java.lang.reflect.Method;

public class A extends B {

    public static void main(String[] args) throws Exception {
        A classAInstance = new A();
        Method mthd = classAInstance.getClass().getSuperclass().getMethod("XYZ", null);
        mthd.invoke(classAInstance);
    }

} 
```

B.java

```
public class B {

    public void XYZ() {
        System.out.println("done");
    }

} 
```

# c# - 创建具有可变列数的 rdlc 报告

> ID：14455527
> 
> 赞同：2
> 
> 时间：2013-01-22T09:44:11.297
> 
> 标签：c#, reporting, rdlc

我在创建 .rdlc 报告时遇到问题。该报告的重点是显示巴士路线上的乘客数量（它包含该路线上每个车站的乘客数量）。DataSet 填充了一个存储过程（我无法更改）。每条路线的数据由两部分组成-第一部分包含特定路线上的车站名称（有表示乘客数量的列，但它们的值为空），第二部分包含乘客数量对于每个站。这两个部分都是同一个存储过程的结果，它们显示在同一个表中。我遇到的问题是每条路线都有不同数量的车站。所以我的问题是 - 我怎样才能制作一个报告（或子报告），以适应特定路线上的车站数量（列数应该与路线上的车站数量相同）。值得一提的是，不同站点数量的路线应显示在同一份报告中。我正在使用 VS 2010 和 C# 创建生成此报告的应用程序。你能帮我解决这个问题吗？谢谢

示例 不幸的是，我不允许诋毁特定数据，但我会尽力为您提供必要的信息。存储过程的结果具有以下结构： `Route_ID | Departure | DataType | StationName | Passengers1....Passengers61` 该报告按 Route_ID 分组。DataType 值定义该行是否包含车站名称（结果的第一部分）或乘客人数（第二部分）。例如，如果一条路线有 3 个车站和一个出发地，则该组将有 4 行 - 前 3 行将包含 Route_ID、DataType 和 StationName（每行有不同的 StationName，前 2 个参数将相同），其他列将有空值。第二部分由 Route_ID、DataType（不同于前一部分）和乘客列中的值组成（同样，其他列将为空）。所以我需要一个子报表，它的列数与第一部分的行数相同。我知道这很复杂，但整个问题非常复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:11:05.737

可能不是您想听到的答案，但是在 RDLC 中动态创建列是相当困难的（至少我无法让它工作）。

如果可能的话，我会建议这个（有点不干净）的解决方案：用尽可能多的站点创建你的表：

```
BUS | StationA | StationB | StationC | StationD | ..
X9Z | 4 people | 5 people | 0 people | 9 people | .. 
```

然后向每个站列添加可见性表达式，即`iif(StationB > -1, true, false)`。只有在设置值时才会显示列。当然，这意味着您必须提前定义所有站点（并维护它们）。因此，如果您有 50 个站点，那将是一个痛苦的背后。

**选择**

如果您有很多站点，我个人建议您寻找其他一些报告生成器，例如[Crystal Reports](https://www.google.com/search?q=crystal+reports+c%23&aq=f&oq=crystal+reports+c%23)（请注意，我自己没有这方面的经验，尽管在搜索 RDLC 解决方案时它经常越过我的路径）。

**格式化您的数据**

阅读您的编辑后，听起来您的数据集结构不是很实用。我建议填充一个更符合您想要显示的内容的自定义对象，并在您的 RDLC 中使用它。

以下问题指的是：[Use custom objects as source for Microsoft Reports (.rdlc)](https://stackoverflow.com/questions/126863/use-custom-objects-as-the-source-for-microsoft-reports-rdlc)

这个链接基本上是答案：[http ://www.gotreportviewer.com/objectdatasources/index.html](http://www.gotreportviewer.com/objectdatasources/index.html)

# javascript - 使用 html5 通过 ajax 和 jquery 进行文件上传

> ID：14455529
> 
> 赞同：4
> 
> 时间：2013-01-22T09:44:15.080
> 
> 标签：javascript, jquery, ajax, html, file-upload

所以我正在尝试将图像与表单数据一起上传到服务器。我正在使用 FileReader API 将图像转换为数据并上传到服务器。我正在使用类似于[HTML5 上传器的代码使用 AJAX Jquery](https://stackoverflow.com/questions/4006520/using-html5-file-uploads-with-ajax-and-jquery)。

数据在 jquery 中转换，但没有发送到服务器，也没有产生错误。

```
$('#formupload').on('submit', function(e){
    e.preventDefault();
    var hasError = false;
    var file = document.getElementById('file').files[0];
    var reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = shipOff;

    function shipOff(event) {
        result = new Image(); 
        result.src = event.target.result;
        var fileName = document.getElementById('file').files[0].name; 
        $.post('test.php', { data: result, name: fileName });
    } 
```

PHP 代码

```
<?php
$data = $_POST['data'];
$fileName = $_POST['name'];
echo $fileName;
$fp = fopen('/uploads/'.$fileName,'w'); //Prepends timestamp to prevent overwriting
fwrite($fp, $data);
fclose($fp);
$returnData = array( "serverFile" => $fileName );
echo json_encode($returnData);
?> 
```

问题是由于大图像文件还是 FileReader API？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T10:11:20.030

我不确定文件上传是否适用于文件阅读器，但有一种不同的方法可以让它工作：

```
var formData = new FormData($(".file_upload_form")[0]);
$.ajax({
    url: "upload_file.php", // server script to process data (POST !!!)
    type: 'POST',
    xhr: function() { // custom xhr
        myXhr = $.ajaxSettings.xhr();
        if (myXhr.upload) { // check if upload property exists
            // for handling the progress of the upload
            myXhr.upload.addEventListener('progress', progressHandlingFunction, false); 
        }
        return myXhr;
    },
    success: function(result) {
        console.log($.ajaxSettings.xhr().upload);
        alert(result);
    },
    // Form data
    data: formData,
    //Options to tell JQuery not to process data or worry about content-type
    cache: false,
    contentType: "application/octet-stream", // Helps recognize data as bytes
    processData: false
});

function progressHandlingFunction(e) {
    if (e.lengthComputable) {
        $("#progress").text(e.loaded + " / " + e.total);
    }
} 
```

通过这种方式，您可以将数据发送到 PHP 文件，然后您就可以使用`$_FILES`它来处理它。不幸的是，据我所知，这在 IE 中不起作用。可能有可用的插件可以在 IE 中实现这一点，但我不知道其中任何一个。

# vba - Visual Basic 应用程序中的错误 440

> ID：14455531
> 
> 赞同：2
> 
> 时间：2013-01-22T09:44:20.053
> 
> 标签：vba, vb6, ado

我的一个客户正在运行一个旧的 VB 应用程序。在这段代码中抛出了一个异常：

```
cn=GetIndexDatabaseConnectionString()
sSql="SELECT * FROM Arh_Naroc WHERE StNarocila = '" & isci & "'"                            
rs=CreateObject("ADODB.Recordset")
Call rs.Open(sSql,cn) 
```

异常发生在`rs.Open()`函数中。“出现错误号 440。”

这是 KOFAX 引擎的 SBL 脚本，它已有多年历史。整个 SW 是从旧的 XP 计算机转移到 Windows 7 的，看起来到处都是问题。

有人可以帮我确定这里有什么问题。至少如果我能在 msgbox 中得到正确的错误消息将是最有帮助的。

编辑：这是连接字符串函数。

```
Function GetIndexDatabaseConnectionString
 Dim objXmlDocument As Object
 Dim objXmlGlobalSettingsFileParh As Object
 Dim objXmlIndexDatabaseConnectionString As Object
 Dim strGlobalSettingsFilePath As String
 Dim strTemp As String
 Const strSettingsFilePath = "C:\Data\LocalDocsDistibutingSystem\Settings.xml"
 Set objXmlDocument = CreateObject("MSXML2.DOMDocument")
 objXmlDocument.Load strSettingsFilePath
 Set objXmlGlobalSettingsFileParh = objXmlDocument.selectSingleNode("DocsDistributingSystem/GlobalSettingsFilePath")
 strGlobalSettingsFilePath = objXmlGlobalSettingsFileParh.childNodes(0).Text
 Set objXmlGlobalSettingsFileParh = Nothing
 Set objXmlDocument = Nothing
 Set objXmlDocument = CreateObject("MSXML2.DOMDocument")
 objXmlDocument.Load strGlobalSettingsFilePath
 Set objXmlIndexDatabaseConnectionString = objXmlDocument.selectSingleNode("DocsDistibutingSystem/AscentCapture/IndexDatabase/ConnectionString")
 strTemp = objXmlIndexDatabaseConnectionString.childNodes(0).Text
 Set objXmlIndexDatabaseConnectionString = Nothing
 Set objXmlDocument = Nothing
 GetIndexDatabaseConnectionString = strTemp
End Function 
```

这是来自 Settings.xml 的相关行：

```
<ConnectionString> Provider=OraOLEDB.Oracle;Data Source=LINO2;User Id=****;Password=****;OLEDB.NET=True; </ConnectionString> 
```

真实数据用 * 屏蔽。与 Oracle 的连接似乎没问题。我使用提供程序和连接数据创建了 ODBC 并将服务器链接到 sql。有用。计算机上必须缺少安装的东西才能使 ADODB 正常工作...

连接似乎工作正常。初始化时没有错误。错误发生在 Call rs.Open(sSql, cn) 中。我想要的只是发生错误时的详细错误消息......非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T09:48:23.680

正如 MS 知识库中所述

> 执行方法或获取或设置对象变量的属性时发生错误。该错误是由创建对象的应用程序报告的。检查 Err 对象的属性以确定错误的来源和性质。还可以尝试在访问语句之前立即使用 On Error Resume Next 语句，然后在访问语句之后立即检查错误。

所以他们建议检查 Err 对象，以类似的方式：

```
If Err.Number <> 0 Then
  Msg = "Error: " & Str(Err.Number) & ", generated by " _
      & Err.Source & ControlChars.CrLf & Err.Description
  MsgBox(Msg, MsgBoxStyle.Information, "Error")
End If 
```

因此，这将在 MsgBox 中恢复错误，但是如果您希望更轻松地复制和粘贴等，您可以使用 Response.Write。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T15:20:58.137

要获取错误描述，您可以执行以下操作：

```
Function GetIndexDatabaseConnectionString()
  On Error GoTo Errorfound
  'your
  'function
  'body
Exit Function
Errorfound:
  With Err
    MsgBox "Source: " & .Source & vbCrLf & "Desc: " & .Description, vbCritical, "Error " & CStr(.Number)
  End With 'Err
End Function 
```

# wcf - WCF 服务在执行返回自定义类型 (DataContract) 的操作时失败

> ID：14455534
> 
> 赞同：0
> 
> 时间：2013-01-22T09:44:24.290
> 
> 标签：wcf

`Serializable`我有一个在 web.config中标记为的数据合同。编写 WCF 操作以将此数据协定返回给调用方法。但我收到以下错误：

> 服务离线或无法访问；客户端配置与代理不匹配；现有代理无效。有关更多详细信息，请参阅堆栈跟踪。您可以尝试通过启动新代理、恢复到默认配置或刷新服务来恢复。

尝试执行操作时。虽然它一直到执行最后一行，然后失败。我正在使用 BasicHttpBinding

# qt - PySide如何将焦点设置到新窗口并在不存在时打开它

> ID：14455536
> 
> 赞同：2
> 
> 时间：2013-01-22T09:44:24.850
> 
> 标签：qt, pyqt, pyside

我已经开始从 Zetcode 的[示例中](http://zetcode.com/gui/pysidetutorial/menusandtoolbars/)学习 PySide，并尝试编写具有两个窗口的应用程序：“Schematic View”，它是“Layout View”的父级，每个窗口都有菜单栏。在开始时应该只是示意图窗口，并且布局胜利应该通过切换到菜单栏根目录中的 LAYOUT 来启动。

我的问题是：

1.  如何使根目录中的“switchtoLAYOUT”不显示下拉菜单，并且仍然只使用“布局视图”窗口的一个实例来执行操作？
2.  如何在两个窗口（“switchtoLAYOUT”和“switchtoSCHEMATIC”）之间切换焦点？
3.  请检查我的代码并建议我一些聪明的东西（这应该不难）。

编码：

```
import sys
from PySide import QtCore, QtGui

class schematicWindow(QtGui.QMainWindow):

    def __init__(self):
        super(schematicWindow, self).__init__()
        self.defineSchWin()

    def defineSchWin(self):               
        exitAction = QtGui.QAction('&Exit', self)
        exitAction.setShortcut('Ctrl+Q')
        exitAction.setStatusTip('Exit application')
        exitAction.triggered.connect(self.close)

        self.statusBar()

        menubar = self.menuBar()
        fileMenu = menubar.addMenu('&File')
        fileMenu.addAction(exitAction)
        menubar.addMenu('&Edit')
        menubar.addMenu('&Passives')
        menubar.addMenu('&Descretes')
        menubar.addMenu('&IC\'s')
        swToLayMenu = menubar.addMenu('switchtoLAYOUT')
        swToLayAction = QtGui.QAction(self)
        swToLayAction.triggered.connect(self.layoutWindow)
        swToLayMenu.addAction(swToLayAction)    # open layoutWindow (if not exists) 
                                                # and set focus to layoutWindow 

        self.setGeometry(0, 300, 500, 300)
        self.setWindowTitle('Schematic View')    
        self.show()

    def layoutWindow(self):
        window = QtGui.QMainWindow(self)
        window.setAttribute(QtCore.Qt.WA_DeleteOnClose)

        window.statusBar()
        menubar = window.menuBar()
        switchtoSchMenu = menubar.addMenu('switchtoSCHEMATIC')
        window.setGeometry(100, 600, 500, 300)
        window.setWindowTitle('Layout View')
        window.show()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = schematicWindow()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:16:59.413

你需要在你的类中保留一个对布局窗口的引用，（你应该放在`self.layout_window = None`）`__init__`。此函数现在检查窗口是否已初始化，如果尚未初始化，则创建它，确保它可见，然后将新窗口设置为活动窗口。类似的东西：（这未经测试）

```
def layoutWindow(self):
    if self.layout_window is None:
        window = QtGui.QMainWindow(self)
        self.layout_window = window
        window.setAttribute(QtCore.Qt.WA_DeleteOnClose)

        window.statusBar()
        menubar = window.menuBar()
        switchtoSchMenu = menubar.addMenu('switchtoSCHEMATIC')
        window.setGeometry(100, 600, 500, 300)
        window.setWindowTitle('Layout View')
    else:
        window = self.layout_window

    window.show()
    window.activateWindow()
    window.raise() # just to be sure it's on top 
```

（[文档](http://doc.qt.digia.com/qt/qwidget.html#activateWindow)）

# android - Android和JXL：创建WritableWorkbook时出现ArrayIndexOutOfBoundException

> ID：14455540
> 
> 赞同：3
> 
> 时间：2013-01-22T09:44:41.280
> 
> 标签：android, jxl

我正在尝试使用 JXL 从我的 Android 设备修改 xls 文件。第一步，如果我很好理解的话，就是复制工作簿。这是我在 write 时抛出异常的代码：

```
java.io.File licencesFile = new java.io.File(LicencesService.getPath(mCtx) + "/" +   pFileName);
java.io.File licencesFiletmp = new java.io.File(LicencesService.getPath(mCtx) + "/" + pFileName + ".tmp");
is = new FileInputStream(licencesFiletmp);
os = new FileOutputStream(licencesFile);

Workbook workbookTmp = Workbook.getWorkbook(is);
WritableWorkbook workbookFinal = Workbook.createWorkbook(os, workbookTmp);

//TODO code will come here when it'll work.

workbookFinal.write(); // <= Here is thrown an Exception
workbookFinal.close(); 
```

我没有找到任何解决方案...任何想法？

非常感谢

堆栈：

```
java.lang.ArrayIndexOutOfBoundsException: src.length=166 srcPos=0 dst.length=112 dstPos=0 length=166
at java.lang.System.arraycopy(Native Method)
at jxl.biff.StringHelper.getBytes(StringHelper.java:127)
at jxl.write.biff.WriteAccessRecord.<init>(WriteAccessRecord.java:59)
at jxl.write.biff.WritableWorkbookImpl.write(WritableWorkbookImpl.java:726)
at fr.xxx.xxx.tasks.DriveUpdaterAsyncTask.updateXls(DriveUpdaterAsyncTask.java:170)
at fr.xxx.xxx.tasks.DriveUpdaterAsyncTask.doInBackground(DriveUpdaterAsyncTask.java:71)
at fr.xxx.xxx.tasks.DriveUpdaterAsyncTask.doInBackground(DriveUpdaterAsyncTask.java:1)
...etc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:51:44.953

您需要指定写访问权限，如下所示：

```
WorkbookSettings settings = new WorkbookSettings();
settings.setWriteAccess("something");
WritableWorkbook workbook = Workbook.createWorkbook(out, Workbook.getWorkbook(getClass().getResourceAsStream("report.xls")),settings); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-05T10:03:02.307

在我的情况下，问题是由复制工作表和设置一些 WorkbookSettings 引起的。我将这些设置用作 openWorkbook 函数和 createWorkbook 函数的参数。从 createWorkbook 函数中删除它们解决了我的问题。

```
//Load template workbook with settings
WorkbookSettings ws = new WorkbookSettings();
ws.setEncoding("Cp1252");

Workbook templateWorkbook = Workbook.getWorkbook(this.context.getAssets().open("template.xls"), ws);

//Create new workbook from templateWorkbook without settings
this.workbook = Workbook.createWorkbook(new File(this.location), templateWorkbook); 
```

# java - 为什么要使用 Spring 提供的 JSTLView 视图解析器

> ID：14455541
> 
> 赞同：1
> 
> 时间：2013-01-22T09:44:42.627
> 
> 标签：java, spring, spring-mvc, web, jstl

在阅读 spring 参考规范时，我遇到了以下问题：“*使用 Java 标准标记库时，您必须使用特殊的视图类 JstlView，因为 JSTL 需要一些准备工作才能使 i18N 功能等功能起作用。* ”

我可以在我的 spring 应用程序中使用 JSTL，而无需将 JSTLView 配置为视图解析器。鉴于此，不使用 spring 提供的 JSTLView 解析器有什么缺点（除了规范所指的 i18N 功能）？

在规范中找不到任何相同的详细解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:10:12.643

> 我可以在我的 spring 应用程序中使用 JSTL，而无需将 JSTLView 配置为视图解析器

[不，如果设置了InternalResourceViewResolver](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/view/InternalResourceViewResolver.html#InternalResourceViewResolver%28%29)并且 JSTL 库存在于类路径中 ，则您的应用程序确实使用了`JSTLView`视图解析器。

# wix - Wix 将项目加载到 ComboBox

> ID：14455542
> 
> 赞同：5
> 
> 时间：2013-01-22T09:44:44.470
> 
> 标签：wix, wix3.6, wix-extension, wixlib

我需要使用自定义操作将项目加载到组合框中。

UI.wxs：

```
 <Control Id="Server" Type="ComboBox" X="30" Y="65" Width="200" Height="18" Property="DATABASE_SERVER">
                <ComboBox Property="DATABASE_SERVER">
                    <ListItem Text="[DATABASE_SERVER]" Value="[DATABASE_SERVER]" />
                </ComboBox>
                <Publish Property="LOGON_VALID" Value="0">1</Publish>
            </Control> 
```

自定义操作

```
private static ActionResult EnumSqlServersIntoComboBox(Session session, IEnumerable<DataRow> rows)
{
    try
    {
        Debugger.Break();

        session.Log("EnumSQLServers: Begin");

        // Grab the combo box but make sure I'm getting only the one 
        // from WebAppInstallDlg.
        View view = session.Database.OpenView("SELECT * FROM ComboBox WHERE ComboBox.Property='DATABASE_SERVER'");
        view.Execute();

        Int32 index = 1;
        session.Log("EnumSQLServers: Enumerating SQL servers");
        foreach (DataRow row in rows)
        {
            String serverName = row["Name"].ToString();

            // Create a record for this web site. All I care about is
            // the name so use it for fields three and four.
            session.Log("EnumSQLServers: Processing SQL server: {0}", serverName);

            Record record = session.Database.CreateRecord(4);
            record.SetString(1, "DATABASE_SERVER");
            record.SetInteger(2, index);
            record.SetString(3, serverName);
            record.SetString(4, serverName);

            session.Log("EnumSQLServers: Adding record");
            view.Modify(ViewModifyMode.InsertTemporary, record);
            index++;
        }

        view.Close();

        session.Log("EnumSQLServers: End");
    }
    catch (Exception ex)
    {
        session.Log("EnumSQLServers: exception: {0}", ex.Message);
        throw;
    }

    return ActionResult.Success;
} 
```

我想要实现的是有一个带有下拉箭头的输入文本框，其中包含所有已加载的 sql 服务器。 ![在此处输入图像描述](../Images/21d2544dd69f3ad14dbbcffd550f370d.png)

***将 sql 服务器加载到组合框中的唯一时间是我将 UI 代码更改为：***

```
<Control Type="ComboBox" Property="DATABASE_SERVER" Id="Server" Width="180" Height="16" X="110" Y="60" ComboList="yes" Sorted="yes" /> 
```

注意**ComboList="yes"**项。但这对我不起作用，因为这使组合框成为下拉项目，我希望能够在备用选项中“键入”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:17:43.680

我想到了：

Dialogs.wxs：

```
...                <Control Id="ServerLabel" Type="Text" X="20" Y="62" Width="80" Height="25" NoPrefix="yes" Text="SQL Database:" />
                <Control Id="Server" Type="ComboBox" Height="16" Width="180" X="110" Y="60" Property="DATABASE_SERVER">
                    <ComboBox Property="DATABASE_SERVER">
                        <ListItem Text="[DATABASE_SERVER]" Value="[DATABASE_SERVER]" />
                    </ComboBox>
                    <Publish Property="LOGON_VALID" Value="0">1</Publish>
                </Control>
... 
```

自定义动作：

```
 [CustomAction]
    public static ActionResult EnumerateSqlServers(Session session)
    {
        if (null == session)
        {
            throw new ArgumentNullException("session");
        }

        session.Log("EnumerateSQLServers: Begin");

        // Check if running with admin rights and if not, log a message to
        // let them know why it's failing.
        if (false == HasAdminRights())
        {
            session.Log("EnumerateSQLServers: " + "ATTEMPTING TO RUN WITHOUT ADMIN RIGHTS");
            return ActionResult.Failure;
        }

        ActionResult result;

        DataTable dt = SmoApplication.EnumAvailableSqlServers(false);
        DataRow[] rows = dt.Select(string.Empty, "IsLocal desc, Name asc");
        result = EnumSqlServersIntoComboBox(session, rows);

        session.Log("EnumerateSQLServers: End");
        return result;
    }

    private static ActionResult EnumSqlServersIntoComboBox(Session session, IEnumerable<DataRow> rows)
    {
        try
        {
            //Debugger.Break();

            session.Log("EnumSQLServers: Begin");

            View view = session.Database.OpenView("DELETE FROM ComboBox WHERE ComboBox.Property='DATABASE_SERVER'");
            view.Execute();

            view = session.Database.OpenView("SELECT * FROM ComboBox");
            view.Execute();

            Int32 index = 1;
            session.Log("EnumSQLServers: Enumerating SQL servers");
            foreach (DataRow row in rows)
            {
                String serverName = row["Name"].ToString();

                // Create a record for this web site. All I care about is
                // the name so use it for fields three and four.
                session.Log("EnumSQLServers: Processing SQL server: {0}", serverName);

                Record record = session.Database.CreateRecord(4);
                record.SetString(1, "DATABASE_SERVER");
                record.SetInteger(2, index);
                record.SetString(3, serverName);
                record.SetString(4, serverName);

                session.Log("EnumSQLServers: Adding record");
                view.Modify(ViewModifyMode.InsertTemporary, record);
                index++;
            }

            view.Close();

            session.Log("EnumSQLServers: End");
        }
        catch (Exception ex)
        {
            session.Log("EnumSQLServers: exception: {0}", ex.Message);
            throw;
        }

        return ActionResult.Success;
    } 
```

# mysql - MySQL存储浮动

> ID：14455546
> 
> 赞同：0
> 
> 时间：2013-01-22T09:44:48.987
> 
> 标签：mysql

我正在尝试将我的 MySQL 数据库中的浮点数保存为小数（20,10）。但我认为这不是一个好方法，因为当我尝试保存 2.14 时，它会保存 2.1400000000。

至少这个比 float(20,10) 好，因为那个四舍五入是错误的。但是我应该使用哪种类型将其存储为 2.14？我不能只说 20,2，因为有时我有例如 34.2222291 作为值。

解决方案：双（20,10）修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:12:40.340

`2.14`和之间的区别`2.1400000000`只是输出格式的问题（无论您使用哪种语言 - 但[如果您愿意](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_trim)，甚至可以使用 MySQL ）。

因此，如果您想要*精确的*十进制值，`DECIMAL(20,10)`就是要走的路。`DOUBLE`（双精度浮点）只是比`FLOAT`（单精度浮点）少舍入问题，它并没有消除它们，因为它仍然是浮点类型。

# ruby-on-rails - 从 Git 部署 Capistrano 失败并显示“解包对象失败”

> ID：14455548
> 
> 赞同：1
> 
> 时间：2013-01-22T09:44:53.377
> 
> 标签：ruby-on-rails, git, deployment, capistrano

如何从 Git 上的 Capistrano 部署失败中恢复：

> 致命的：解包后留下未解决的增量
> 
> 致命：解包对象失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:44:53.377

缓存已损坏，请在*deploy.rb 中将*缓存设置为 false ：

```
set :copy_cache, false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T09:47:39.407

对我来说，运行以下 rake 任务就可以了：

```
cap git_copy:cleanup 
```

# sencha-touch - Sencha Touch 2.1 为 AJAX 请求创建通用类

> ID：14455550
> 
> 赞同：0
> 
> 时间：2013-01-22T09:44:55.270
> 
> 标签：sencha-touch, sencha-touch-2.1

我有两个疑问 1）我正在为我的应用程序使用 sencha touch 2.1。我想为 AJAX 请求创建一个通用类，因为我要从许多控制器中调用。现在我的问题是 AJAX 的公共类将出现在哪个目录（如模型、存储、控制器）中。以及我如何在 app.js 中引用该类

2）我想为我的公共 url、文本等设置一些配置应用程序。我怎样才能做到这一点。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:55:08.977

1)`Ext.Ajax`是[Ext.data.Connection](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Connection)的单例类，因此您可以在整个应用程序中使用它，而无需创建很多实例。

2）如`Ext.Ajax` [文档](http://docs.sencha.com/touch/2-1/#!/api/Ext.Ajax)中所述，您可以简单地`Ext.data.Connection`在`Ext.Ajax`实例上设置配置。

```
Ext.Ajax.setUrl('defaultUrl.json');
Ext.Ajax.request({}); // will use the above URL 
```

您可以通过查看[Ext.data.Connection](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Connection)类参考来获取所有可用配置的列表。

# arrays - 什么阵列更好？

> ID：14455559
> 
> 赞同：0
> 
> 时间：2013-01-22T09:45:32.847
> 
> 标签：arrays, algorithm

我需要保存 2D 关卡。那么我应该使用二维数组还是简单数组并在条件内打破它？一些例子：

```
var map2D[3][3]={
    [1 , 2 , 3 ],
    [1 , 2 , 3 ],
    [1 , 2 , 3 ],
}

var map[9]={
    1, 2, 3,
    4, 5, 6,
    7, 8, 9
} 
```

那么什么样的地图更容易阅读和演练呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:50:01.930

如果您尝试表示 2D 数据 - 请使用 2D 数组。

如果有的话，性能增益/损失可以忽略不计，但**可读性**是这里的一个重要因素，程序员很可能会发现遵循将二维数组用于二维空间的逻辑要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:11:20.200

对于**简单的代码**，使用二维数组。

为了获得**更好的性能**，请使用一维数组。（这对于 C++ 和其他几种语言是正确的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:49:11.873

使用二维数组，因为它（通常）会为您提供更简洁的代码，避免索引计算。

# java - 如何将连接字符串与 jdbc url 一起使用

> ID：14455566
> 
> 赞同：2
> 
> 时间：2013-01-22T09:46:01.640
> 
> 标签：java, oracle, jdbc

我正在尝试使用以下 url 将 oracle 与 jdbc 连接

```
String url = "jdbc:oracle:thin:@<host>:1522:dev;includeSynonyms=true"; 
```

但它抛出以下错误。

```
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12505, TNS:listener does not currently know of SID given in connect descriptor
The Connection descriptor used by the client was:
<host>:1522:dev;includeSynonyms=true 
```

如果我从 url 中删除属性（includeSynonyms=true），我可以连接。

我在用`ojdbc14.jar`

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:01:15.227

您不能（AFAIK）将此设置为 URL 的一部分。根据[OracleDriver 文档](http://docs.oracle.com/cd/E16338_01/appdev.112/e13995/oracle/jdbc/OracleDriver.html)：

> **指定数据库 URL 和属性对象**
> 
> 以下签名接受一个 URL，以及一个指定用户名和密码（可能还有其他内容）的属性对象：
> 
> ```
> getConnection(String URL, Properties info); 
> ```
> 
> URL 的格式为：
> 
> ```
> jdbc:oracle:<drivertype>:@<database> 
> ```
> 
> 除了 URL 之外，使用标准 Java Properties 类的对象作为输入。例如：
> 
> ```
> java.util.Properties info = new java.util.Properties();
> info.put ("user", "scott");
> info.put ("password","tiger");
> info.put ("defaultRowPrefetch","15");
> getConnection ("jdbc:oracle:oci8:@",info); 
> ```

列出 Oracle JDBC 驱动程序支持的连接属性的表包括`includeSynonyms`，因此您应该能够：

```
String url = "jdbc:oracle:thin:@//<HOST>:1522/dev"
java.util.Properties info = new java.util.Properties();
info.put ("includeSynonyms", "true");
getConnection (url, info); 
```

恐怕未经测试，我不确定它是否适用于您的驱动程序版本。您还可以稍后通过 [OracleConnection](http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/jdbc/OracleConnection.html#CONNECTION_PROPERTY_INCLUDE_SYNONYMS)或[OracleConnectionWrapper](http://docs.oracle.com/cd/E16338_01/appdev.112/e13995/oracle/jdbc/OracleConnectionWrapper.html#setIncludeSynonyms_boolean_)进行设置。

也不完全确定 URL 表单是否适用于 1.4 驱动程序，尽管我认为它可以 - 您可能需要使用原始`@<host>:1522:dev`表单。请注意，在[easy connect](http://docs.oracle.com/cd/E14072_01/network.112/e10836/naming.htm#i498306)格式中，`dev`指的是服务名称而不是SID，它们可能不一样；检查`lsnrctl status`这是否有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:06:37.793

您是否使用`url`变量中的 URL 而不更改`<host>`为 IP 地址？如果是这样，那么只需将其更改为 Oracle 服务器的地址。

您还应该阅读有关通过 JDBC 连接 tp Oracle 的信息：[http](http://docs.oracle.com/cd/B10501_01/java.920/a96654/basic.htm) ://docs.oracle.com/cd/B10501_01/java.920/a96654/basic.htm甚至还有关于设置连接属性的信息，包括`includeSynonyms`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T09:50:00.003

您需要在符号之后添加一个 TNS 名称，`@`即如果 oracle db tns 名称是 dev，它将转换为：

`String url = "jdbc:oracle:thin:@//<HOST_IP>:1522:dev;includeSynonyms=true";`

使用正斜杠而不是完整的冒号

# model - Ember.js：如何保存模型

> ID：14455570
> 
> 赞同：6
> 
> 时间：2013-01-22T09:46:06.697
> 
> 标签：model, save, ember.js, ember-data

从 ember 文档中可以清楚地看到，您应该能够保存脏模型

```
var m = App.MyModel.find(10) ;
...
m.set("firstName", "John") ;
m.get("isDirty") ; // --> true 
```

现在，我不知道如何保存，比如

```
m.save() ;
App.MyModel.save(m) ;
//etc 
```

不工作。有什么建议么 ？

干杯

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-09-06T14:03:11.687

自 Ember Data 1.0（撰写本文时为测试版）发布以来，已接受的答案不再有效。使用 Ember Data (1.0) 可以更轻松、更直观地进行保存。

```
var person = this.store.createRecord('person');
person.set('frist_name', 'John');
person.set('last_name', 'Doe');
person.save(); 
```

知道`save`调用返回一个 promise 也是一件好事，当服务器返回响应时它会被解析。

```
person.save().then(function() {
  // SUCCESS
}, function() {
  // FAILURE
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:54:36.633

**编辑：这与 Ember Data 1.0 beta 及更高版本已过时，请参阅 Bart 的回答**

如果您使用的是 Ember-Data，则需要调用`commit()`模型的事务。

```
m.get('transaction').commit() 
```

或者如果您想保存应用程序中的每个脏对象

```
m.get('store').commit() 
```

# php - 如何在 PHP mysql 中进行重复验证？

> ID：14455571
> 
> 赞同：1
> 
> 时间：2013-01-22T09:46:06.120
> 
> 标签：php, mysql

我在 mysql 表中有一个字段 area_code 通过 php 表单。键入已输入并存储在数据库中的相同区号时，我需要验证和警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:48:18.513

最好的方法是在表上的字段上定义一个`UNIQUE`约束。`area_code`

```
ALTER TABLE tableName ADD CONSTRAINT tb_UQ UNIQUE (area_code) 
```

如果代码已执行并成功，如果您尝试输入`area_code`已经存在于表中的代码，服务器将生成错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:53:03.473

您可以创建一个 SELECT 计数语句并检查是否返回的行。如果是，则意味着该记录已经存在。

```
SELECT COUNT(id) AS count FROM area_codes WHERE area_code = 'ABC' 
```

如果返回的行大于 1，则表明您尝试插入的记录已经存在。

# mongodb - 如何查看 MongoDB 有更多记录

> ID：14455572
> 
> 赞同：3
> 
> 时间：2013-01-22T09:46:11.830
> 
> 标签：mongodb

我的 Mongo DB 中有一个名为 logins 的集合。我想查看该集合中存在的所有行，但是在显示 20 条记录后，它的显示有更多。

请告诉我，我怎样才能看到剩余的记录？

```
db.logins.find()
{ "_id" : ObjectId("4d779d36f282963924633b01"), "env_name" : "qa", "cust_id" : "kiran", "epoch" : "1299684662765", "created_at" : "2011-03-09 10:31:02.765" }
{ "_id" : ObjectId("4d779db7f282963925633b01"), "env_name" : "qa", "cust_id" : "pavan", "epoch" : "1299684791157", "created_at" : "2011-03-09 10:33:11.157" }
{ "_id" : ObjectId("4d779dcff282963926633b01"), "env_name" : "qa", "cust_id" : "hhhiuy", "epoch" : "1299684815595", "created_at" : "2011-03-09 10:33:35.595" }
{ "_id" : ObjectId("4d779e26f282963927633b01"), "env_name" : "qa", "cust_id" : "testaccount", "epoch" : "1299684902416", "created_at" : "2011-03-09 10:35:02.416" }

------
------
------
has more 
```

提前致谢 。

我怎样才能看到剩余的记录呢？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T09:57:31.427

只需`it`在命令提示符下输入。我相信，这与“迭代器”或类似的东西相提并论。

# jquery - Google 如何使用 jQuery 的加载功能抓取内容？

> ID：14455574
> 
> 赞同：0
> 
> 时间：2013-01-22T09:46:11.947
> 
> 标签：jquery, seo, web-crawler

当您在 jQuery 中使用 .load 功能时，我有一个关于 SEO 的问题。

您可以通过引用您单击的链接的 href 值来加载文档。在第一种情况下，存储 html 文档的文件夹名称 (../ajax/) 在标记中提及，而不是在 jQuery 中：

代码： `<a href="ajax/test.html">test</a>`

```
var thelink = $(this).attr('href');
$('#content').load(thelink); 
```

或者，您可以通过在 jQuery 中而不是在标签中添加 html 文档的文件夹名称来加载文档。

代码： `<a href="test.html">test</a>`

```
$('#content').load('ajax/test.html'); 
```

我想知道哪种方法对 seo 最友好。我现在使用第一个示例，但我注意到 google 蜘蛛程序会在我的导航处停止，并且不会进一步访问该站点的其他页面。但我想如果我尝试第二个例子，谷歌蜘蛛也会停止，因为链接中没有提到目标文件夹......

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:48:20.947

您需要更改代码以明确提及不同的 href 目标，而不是在代码库中的 javascript 中进行混淆。

Google 会抓取 JS，但不会从变量名中推断含义。

本质上，我建议使用 JQuery 来隐藏/显示内容，而不是你的主要导航；如果您想更好地被索引，请在 HTML/CSS 中静态重新编码。

# c# - 如何导入 Quick Books 数据？

> ID：14455576
> 
> 赞同：1
> 
> 时间：2013-01-22T09:46:15.120
> 
> 标签：c#, quickbooks, quickbooks-online

我听说使用 Quick Book SDK 我们可以使用 C# 在我们自己的应用程序中导入 Quick Books 数据。

让我知道这怎么可能。

1.  我正在使用 Silverlight 开发桌面应用程序。
2.  这是一个 SaaS 应用程序（我允许客户将他们的 QuickBooks 文件连接到我的应用程序）

是否有任何资源可供参考（任何链接、示例）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:10:10.850

去安装[QuickBooks SDK](http://www.google.com/search?q=quickbooks%20sdk%20download)。

安装后，导航到计算机上的此目录：

```
C:\Program Files (x86)\Intuit\IDN\QBSDK12.0\samples\qbdt\c-sharp 
```

在该目录中，您会找到许多由 Intuit 提供的示例，它们展示了如何执行此操作。此外，您还可以找到包含在 SDK 中的大约 600 页 PDF 文档，其中详细说明了您尝试执行的操作的各个方面。

使用 C# 和 SDK 与 QuickBooks 的桌面连接非常简单——您基本上设置了一个 COM 对象并将 XML 提供给 QuickBooks。QuickBooks 处理 XML 请求并将 XML 响应发回给您。

这是一些[QuickBooks C# 示例代码](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_integration_csharp)。

```
rp = new RequestProcessor2();
    rp.OpenConnection("", "IDN CustomerAdd C# sample");
    ticket = rp.BeginSession("C:\\path\\to\\file.QBW", QBFileModeE.qbFileOpenDoNotCare);
    //ticket = rp.BeginSession("C:\\path\\to\\file.QBW", QBFileMode.qbFileOpenDoNotCare);

    Random random = new Random();

    string input = @"<?xml version=""1.0"" encoding=""utf-8""?>
    <?qbxml version=""2.0""?>
    <QBXML>
    <QBXMLMsgsRq onError=""stopOnError"">
    <CustomerAddRq requestID=""15"">
    <CustomerAdd>
    ...
    </CustomerAdd>
    </CustomerAddRq>
    </QBXMLMsgsRq>
    </QBXML>";

    response = rp.ProcessRequest(ticket, input); 
```

关于可以发送的 XML 请求的详细信息，您应该参考[QuickBooks OSR 。](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)SDK 中还包括 QBFC 库，它允许您使用对象创建 XML 请求，并将对象编组为 XML 字符串。

# objective-c - 目标 C：我应该分配变量并创建一个属性还是其中一个就足够了？

> ID：14455577
> 
> 赞同：1
> 
> 时间：2013-01-22T09:46:26.963
> 
> 标签：objective-c, variables, properties, header-files

我有一个头文件（.h），我想声明`name`，但我认为所有这些方式都一样，因为我没有看到功能上有任何区别。你能告诉我有什么区别：

这两个声明：

```
@interface someClass : UIViewController
{
    NSString *name;
}

@property (nonatomic, copy) NSString *name;

@end 
```

无变量：

```
@interface someClass : UIViewController
{

}

@property (nonatomic, copy) NSString *name;

@end 
```

或没有财产：

```
@interface someClass : UIViewController
{
    NSString *name;
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:56:54.257

> ```
>  @interface someClass : UIViewController
>    {
>      NSString *name;
>    }
> 
>    @property (nonatomic, copy) NSString *name;
> 
>    @end 
> ```

这样做您将显式声明一个属性和一个 ivar。

属性只是一组方法：

```
 - (void)setName:(NSString*)name;
 - (NSString*)name; 
```

ivar 是保存属性方法管理的值的内存存储。这允许您执行以下操作：

```
self.name = ... // access through setter method
name = ... // direct access 
```

使用属性的优点是它们为您处理内存管理。例如，在您的情况下，属性是 type `copy`：这意味着使用第一个语法 ( `self.name = ...`) 将完成对象的副本。如果不使用属性，您将明确需要做：`name = [originalString copy];`以获得相同的效果。

您可以为属性（但不是 ivars）指定的其他选项是：`strong`和`weak`所有权。

此外，属性还表示从类外部访问变量的公共接口。

使用直接访问您可以自行管理内存（如果您不使用 ARC）。如果您使用 ARC 并且不定义属性，您将无法通过指定所有权来控制内存的管理方式：强、弱、保留）。

> ```
>  @interface someClass : UIViewController
>  {
> 
>  }
> 
>  @property (nonatomic, copy) NSString *name;
> 
>  @end 
> ```

这里你只声明属性；ivar 由`@synthesize`您的实现文件中的指令“推断”。这仅在 Objective C 2.0 及更高版本中是可能的（以前，上面的 ivar 声明是强制性的）。

与上述相同的注意事项适用，但有细微差别：使用旧版本的 LLVM（ObjC 编译器）您将无法直接引用自动合成的 ivar；对于当前版本的 LLVM，如果您省略该`@synthesize`指令，那么还将声明一个以您的属性命名的自动 ivar（在您的情况下为`_name`）。

最后一段可能看起来有点“高级”或做作，但您可以放心地忽略它。

> ```
>  @interface someClass : UIViewController
>  {
>     NSString *name;
>  }
> 
>  @end 
> ```

在这种情况下，您只是在声明 ivar。没有访问器方法。您将需要自己处理内存管理（如果不使用 ARC），而且您将无法从类外部访问该变量。为此，您需要访问器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:59:25.673

情况1：

是旧方法，这里的`@property`和变量在你之前是不相关的`@synthesize name = name`；

访问方法：变量：`name = @"hello"; //direct access to viariable`

设置器/获取器：`self.name = @"hello" // set value to name using setName: selector`

使用最新的 xcode，仅此属性就足够了。

案例 2：新的 xcode 样式。这里的合成和变量创建由编译器负责。（所以更少的 2 行代码，这也有助于内存管理）

访问方法：变量：`_name = @"hello"; //direct access to viariable`

设置器/获取器：`self.name = @"hello" // set value to name using setName: selector`

案例 3：这里的名称只是一个变量，它没有 setter 或 getter。如果没有属性（或）setter & getter，这与局部变量一样好，并且不能从其他对象访问。

# ios - 如何在 ios 的 mfmailcomposer 中通过邮件附加“条形码”和“QA 码”

> ID：14455580
> 
> 赞同：0
> 
> 时间：2013-01-22T09:46:30.863
> 
> 标签：ios, mfmailcomposeviewcontroller, mfmailcomposer

我在 Web 视图中有一个条形码作为图像和 QA 代码。这些代码是根据用户输入数据（id 和名称）生成的。现在我想使用 Mfmailcomposer 通过邮件发送这两件事。如何将这两个东西附加到邮件并发送给其他人。

谢谢。

# ruby-on-rails - 如何在 ruby 中将参数传递给我的 rake 任务

> ID：14455585
> 
> 赞同：2
> 
> 时间：2013-01-22T09:46:56.163
> 
> 标签：ruby-on-rails, ruby

我在这里看到了类似的问题，无法弄清楚我刚刚开始使用 ror 开发的答案。我有一个 rake 任务：

```
namespace:generate do 
    desc "Export to txt"
    task :txt => :environment do |t, args|
        puts "testing #{args}"
    end
end 
```

当我从命令行执行此操作时：

```
rake generate:txt 
```

我明白了`testing {}`

当我尝试将值作为这样的参数注入时：

`rake generate:txt[testvalue]`或者

```
rake generate:txt testvalue 
```

第一个不做任何相同的输出`testing {}`第二个我得到一个错误。那么我以哪种方式调用命令以便用一些值填充 args？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:52:47.350

```
namespace:generate do 
    desc "Export to txt"
    task :txt, [:arg1] =>  :environment do |t, args|
        puts "testing #{args[:arg1]}"
    end
end

rake generate:csv arg1="value" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:52:50.533

IIRC，您必须明确声明参数。

```
task :environment do
  puts "setting up env"
end

namespace :generate do
  desc "Export to txt"
  task :txt, [:filename] => :environment do |t, args|
    puts "testing #{args}"
  end
end 
```

然后

```
% rake generate:txt['foo']
setting up env
testing {:filename=>"foo"} 
```

# java - 装饰日期格式

> ID：14455590
> 
> 赞同：0
> 
> 时间：2013-01-22T09:47:07.040
> 
> 标签：java, date-format, simpledateformat, date-formatting

我正在寻找一种解析字符串的方法，该字符串将用我提供的日期组件替换一些模式。

您知道执行此操作的标准方法吗？

一种用法是：

```
parseForDate("fileName%YYYY%MM.csv", new Date()); // returns: filename201301.csv 
```

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:53:47.370

考虑使用[格式](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)：

```
String filename = String.format("fileName%1$tY%1$tm.csv", new Date()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:49:09.550

```
String filename = "fileName%" + new SimpleDateFormat("yyyy%MM").format(new Date())+".csv"; // returns: filename201301.csv 
```

# drupal - 在 drupal 7.15 中为多个主题创建单独的数据库

> ID：14455591
> 
> 赞同：1
> 
> 时间：2013-01-22T09:47:08.827
> 
> 标签：drupal, drupal-7, drupal-themes

如何为 sites/all/themes/ 中安装的多个主题创建多个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:10:17.007

我很确定您应该首先阅读 settings.php 文件中针对多个数据库、数据库表前缀甚至目标数据库后备的大量注释。db 节从第 53 行开始，所以它甚至没有被掩埋。;-)

（值得注意的是，Drupal 的 db 前缀并非旨在随着您添加更多前缀而扩展！）

话虽如此，我建议仔细考虑您想要使用多个数据库的原因。正如 Patrick 指出的那样，在 Drupal 中，对于多个主题来说，这不是必需的，并且您正在添加一层您应该确保您真正需要的复杂性——在大多数情况下，这似乎是一种反模式。

# r - strptime 无法正确识别 AM/PM 字符串

> ID：14455593
> 
> 赞同：9
> 
> 时间：2013-01-22T09:47:26.500
> 
> 标签：r, strptime

我在使用函数 strptime() 时遇到了一些意想不到的事情。我拥有的日期格式包括 "1/22/2013 11:00:00 PM" 。我为此使用的格式是“%m/%d/%Y %I:%M:%S %p”。

代码如下。

```
strptime("1/22/2013 11:00:00 p.m",format="%m/%d/%Y %I:%M:%S %p")
[1] NA 
```

但如果我使用

```
strptime("1/22/2013 11:00:00 pm",format="%m/%d/%Y %I:%M:%S %p")
[1] "2013-01-22 23:00:00" 
```

我得到了适当的结果。

此功能是否缺少 strptime 来检测 pm 及其变体，例如 pm 等代替 PM 或 pm。这是 R 中的错​​误吗？

RI 版本在 windows 7 32 位上使用 R.14.2

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T10:12:29.407

这不是错误，但`strptime`需要以标准化方式获取信息。`%p`是：

> 区域设置中的 AM/PM 指示符。与 '%I' 一起使用，而*不是*与 '%H' 一起使用。在某些语言环境中为空字符串。

在您的语言环境中，这被定义为`AM/am`and `PM/pm`。R 是一种形式语言，您需要遵守它强加的规则。如果您使用 、 、 定义一个因子`flavor`，`color`您`taste`不能期望能够使用`colour`和`flavour`作为引用该因子的方法。尽管对您来说这些代表相同的概念似乎很明显，但 R 是一种没有人类灵活性的形式语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-21T12:55:55.993

```
library(lubridate)
mdy_hms("01/22/2013 11:00:00 PM") 
```

结果：

```
[1] "2013-01-22 11:00:00 UTC" 
```

# ios - EFAULT 或 EDESTADDRREQ 用于 GCD 队列中的多个 dispatch_io_writes

> ID：14455594
> 
> 赞同：1
> 
> 时间：2013-01-22T09:47:26.273
> 
> 标签：ios, posix, grand-central-dispatch

我正在尝试实现文件存储队列子系统，如 wwdc 2012 Asynchronous Design Patterns with Blocks、GCD 和 XPC 中所述。我有一个自定义并发处理队列，用于格式化数据并将结果移交给我的自定义并发存储队列。然后存储队列创建一个dispatch_io_t通道用于写入，拆分文件（如果我不拆分文件，我会遇到大数据的内存问题），并使用dispatch_io_write写入每个块。有时写入完成没有错误，但通常我得到任何一个块`EFAULT`或`EDESTADDRREQ`任何一个块

我的一般方法概述如下：

```
dispatch_async(processingQueue, ^{

// prepare dispatch data for storageQueue

dispatch_async(storageQueue, ^{

    dispatch_io_t writeChannel = dispatch_io_create_with_path(DISPATCH_IO_STREAM,
                                                              [pathString UTF8String],
                                                              O_RDWR|O_CREAT, // read-write, create if not exist
                                                              S_IRWXU|S_IRWXG|S_IRWXO, // set all permissions
                                                              storageQueue,
                                                              ^(int error) {

                                                              });

    __block size_t chunkSize = STORAGE_WRITE_CHUNK_SIZE;

    __block off_t currentOffset = 0;

    dispatch_io_set_high_water(writeChannel, chunkSize);

    for (currentOffset = 0; currentOffset < imageDataSize; currentOffset += chunkSize) {

        // is dispatch_barrier required?
        dispatch_data_t blockData = dispatch_data_create_subrange(dictData,
                                                                  currentOffset,
                                                                  MIN(imageDataSize - currentOffset,chunkSize));

        if (dispatch_data_get_size(blockData) > 0) {

            dispatch_io_write(writeChannel,
                              currentOffset,
                              blockData,
                              storageQueue,
                              ^(bool done, dispatch_data_t data, int error){

                              });

        } else {

            NSLog(@"Error chunking data for writing!!");
            break;

        }
    }

    dispatch_io_close(writeChannel,0);
});
}); 
```

我尝试过使用串行队列，包装在`dispatch_barrier`块中，修改`dispatch_io channel`标志，但问题仍然存在 -`dispatch_io_write`由于地址或目的地错误而经常出错

希望得到一些答案：
1\. 使用`dispatch_io_write`自定义并发队列进行缓冲文件写入的推荐方法是什么？
2\. 我是否需要使用频道或队列`dispatch_barrier`，如果需要，是否需要？ 3\. 在这种情况下，我应该注意哪些频道标志？`dispatch_io_barrier``dispatch_barrier_async`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T08:35:00.980

如果使用 DISPATCH_IO_STREAM 标志创建不支持随机访问的基于流的通道，则会忽略任何偏移值 (currentOffset)，并将数据写入当前文件位置（代码段中的 0），如此[描述](https://developer.apple.com/library/mac/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/TechniquesforReadingandWritingCustomFiles/TechniquesforReadingandWritingCustomFiles.html#//apple_ref/doc/uid/TP40010672-CH5-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:42:32.593

我在您的代码段中没有看到任何明显错误。应该不需要手动分块数据并提交多个写入操作（dispatch IO 已经在内部更有效地执行此操作），而且我以前从未听说过遇到这些特定的 IO 错误。

请提交带有重现问题的可运行测试用例的[错误报告。](http://bugreport.apple.com)

# jaxb - 使用 jaxb 解组时单个 XML 元素的行号

> ID：14455596
> 
> 赞同：3
> 
> 时间：2013-01-22T09:47:32.383
> 
> 标签：jaxb, jaxb2

我有一个类 Person 具有属性名称和地址。我在 XML 中显示它。从 XML 解组时，可以分别获取名称和地址的行号。我尝试使用定位器。但它不提供单独的行号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:55:19.100

[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)和JAXB 参考实现都有自己的`@XmlLocation`注释来支持这个用例。这允许您将与对象对应的 XML 元素上的位置存储为`org.xml.sax.Locator`. 由于我是 MOXy 负责人，我将演示如何使用 MOXy：

**人**

```
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import org.eclipse.persistence.oxm.annotations.XmlLocation;
import org.xml.sax.Locator;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    @XmlJavaTypeAdapter(value=StringAdapter.class)
    String name;

    Address address;

    @XmlLocation
    Locator locator;

} 
```

**地址**

```
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import org.eclipse.persistence.oxm.annotations.XmlLocation;
import org.xml.sax.Locator;

public class Address {

    @XmlJavaTypeAdapter(value=StringAdapter.class)
    private String street;

    @XmlLocation
    Locator locator;

} 
```

**字符串适配器**

```
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import org.eclipse.persistence.oxm.annotations.XmlLocation;
import org.xml.sax.Locator;

public class StringAdapter extends XmlAdapter<StringAdapter.AdaptedString, String> {

    public static class AdaptedString {

        @XmlValue
        public String value;

        @XmlLocation
        @XmlTransient
        Locator locator;

    }

    @Override
    public String unmarshal(AdaptedString v) throws Exception {
        System.out.println(v.value + " " + v.locator.getLineNumber());
        return v.value;
    }

    @Override
    public AdaptedString marshal(String v) throws Exception {
        AdaptedString adaptedString = new AdaptedString();
        adaptedString.value = v;
        return adaptedString;
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14455596/input.xml");
        Person person = (Person) unmarshaller.unmarshal(xml);

        System.out.println("Person:  " + person.locator.getLineNumber());
        System.out.println("Address:  " + person.address.locator.getLineNumber());
    }

} 
```

**输出**

```
Jane Doe 3
1 A Street 5
Person:  2
Address:  4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:21:56.417

您可以利用 StAX`StreamReaderDelegate`并执行以下操作：

**演示**

```
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.stream.util.StreamReaderDelegate;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {

        JAXBContext jc = JAXBContext.newInstance(Person.class);

        XMLInputFactory xif = XMLInputFactory.newFactory();
        StreamSource source = new StreamSource("src/forum14455596/input.xml");
        XMLStreamReader xsr = xif.createXMLStreamReader(source);
        xsr = new StreamReaderDelegate(xsr) {

            @Override
            public String getLocalName() {
                String localName = super.getLocalName();
                if(isStartElement()) {
                    System.out.println(localName + " " + this.getLocation().getLineNumber());
                }
                return localName;
            }

        };

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.unmarshal(xsr);
    }

} 
```

**人**

```
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    private String name;
    private String address;

} 
```

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<person>
    <name>Jane Doe</name>
    <address>1 A Street</address>
</person> 
```

**输出**

```
person 2
name 3
address 4 
```

# json - 是否 标记仍然适用于 Silverlight 5 和 RIA 服务吗？

> ID：14455597
> 
> 赞同：1
> 
> 时间：2013-01-22T09:47:40.510
> 
> 标签：json, silverlight, iis-7.5, wcf-ria-services, endpoint

我正在尝试将 JSON 端点添加到 WCF RIA 服务。

我已经阅读了很多关于这方面的教程，并且还观看了 silverlight.net 上的视频。

在任何地方我都能找到关于这个主题的东西，我被告知要使用 web.config 中的 domainService 标签。

一个代码示例如下所示：

```
<system.serviceModel>
<domainServices>
  <endpoints>
    <add name="JSON" type="Microsoft.ServiceModel.DomainServices.Hosting.JsonEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </endpoints>
</domainServices>
<system.serviceModel> 
```

**这不起作用，有两个问题：**

1.  在 Visual Studio 2010 中，domainService 标记带有蓝色下划线，暗示这是一个意外标记。
2.  在 IIS 中，域服务标记产生未知元素错误。

其中，我在我的 Web 项目中引用了以下 DLL：

**-Microsoft.ServiceModel.DomainServices.Hosting**

-Microsoft.ServiceModel.DomainServices.Tools

-Microsoft.ServiceModel.DomainServices.LinqToSql

-System.ServiceModel.DomainServices.EntityFramework

**-System.ServiceModel.DomainServices.Hosting**

-System.ServiceModel.DomainServices.Hosting.OData

-System.ServiceModel.DomainServices.Server

我还安装了 WCF RIA Services V1.0 SP2。

真不知道，怎么解决。我需要帮助。我用谷歌搜索并过度搜索。

谢谢你。

**这个案子解决了。请阅读我对杰夫回答的评论。您可能会找到有关此问题的一些其他信息。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:24:23.013

JSON 端点是 WCF RIA 服务工具包的一部分，而不是产品本身。您可以在此处获取 Toolkit MSI：http: [//www.microsoft.com/en-us/download/details.aspx?id=26939](http://www.microsoft.com/en-us/download/details.aspx?id=26939)

但是，我建议使用 RIAServices.Endpoints 包通过 NuGet 拉入 JSON 端点：http: [//nuget.org/packages/RIAServices.Endpoints](http://nuget.org/packages/RIAServices.Endpoints)

以下是有关可用 NuGet 包的更多信息：http: [//jeffhandley.com/archive/2012/12/10/RIA-Services-NuGet-Package-Updates-ndash-Including-Support-for-EntityFramework.aspx](http://jeffhandley.com/archive/2012/12/10/RIA-Services-NuGet-Package-Updates-ndash-Including-Support-for-EntityFramework.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-21T14:53:48.510

对我来说，解决问题的正确方法是将以下内容添加到 web.config

```
<configuration>
  <configSections>
    <sectionGroup name="system.serviceModel">
            <section name="domainServices" type="System.ServiceModel.DomainServices.Hosting.DomainServicesSection, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" allowDefinition="MachineToApplication" requirePermission="false" />
    </sectionGroup>
  </configSections> ... 
```

# parsing - 如何创建读取文件并将子字符串写入另一个文件的批处理文件？

> ID：14455606
> 
> 赞同：2
> 
> 时间：2013-01-22T09:48:05.060
> 
> 标签：parsing, batch-file, substring

我目前有一个`output.txt`需要解析的 Clear-Case 命令导出的文本文件 ( )。它看起来像这样：

```
Comparing the following:
  R1.PROD.V1@\VOB_pvob
  R2.PROD.V1@\VOB_pvob
Differences:
>> M:\ACME_PROD\src\ACME@@
>> M:\ACME_PROD\src\ACME\file 2.txt@@
>> M:\ACME_PROD\src\ACME\file 1.txt@@
>> M:\ACME_PROD\src\ACME\file 3.txt@@ 
```

我想做的是使用 findstr 命令过滤包含在“ `>>`”和“ `@@`”字符串之间的字符串，以获取如下所示的输出文件（如果可能，请使用引号：

```
"M:\ACME_PROD\src\ACME"
"M:\ACME_PROD\src\ACME\file 2.txt"
"M:\ACME_PROD\src\ACME\file 1.txt"
"M:\ACME_PROD\src\ACME\file 3.txt" 
```

我是编写批处理文件的新手，所以我不知道从哪里开始。我设法找到了可以循环遍历文本文件行和 findstr 命令的单独代码的代码，但是我在尝试将它们放在一起时遇到了困难！

最好的祝福，

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:55:39.383

干得好

```
setlocal enabledelayedexpansion
for /f "skip=1 tokens=* delims=> " %%a in ('"findstr /r [\w^>*] output.txt"') do (
set line=%%a
set line=!line:@=!
echo "!line!" >>new.txt
) 
```

过滤后的字符串将输出到`new.txt`.

# phpexcel - PHPExcel 生成垃圾

> ID：14455608
> 
> 赞同：0
> 
> 时间：2013-01-22T09:48:08.233
> 
> 标签：phpexcel

我正在尝试使用 PHPExcel 库生成 Excel 文档。

```
class product_specification_order extends DBHelper
{
    static $PK = 'orderID';

    static function xls($id){
       require_once('../lib/PHPExcel.php');
       $objPHPExcel = new PHPExcel();
       $objPHPExcel->setActiveSheetIndex(0);
       return $objPHPExcel;
    }
 } 
```

然后，我生成了specxls.php 文件

```
if (empty($_REQUEST['id']))
    die("Wrong ID");
//output xls

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");;
header("Content-Disposition: attachment;filename=File.xls");
header("Content-Transfer-Encoding: binary");

$objPHPExcel = product_specification_order::xls($_REQUEST['id']);
$objWriter = new PHPExcel_Writer_Excel5($objPHPExcel);    //  (I want the output for objWriter)
///print_r($objWriter);
$objWriter->save('php://output'); 
```

我得到的输出是垃圾。

# jquery - 拆分和替换href

> ID：14455612
> 
> 赞同：3
> 
> 时间：2013-01-22T09:48:10.550
> 
> 标签：jquery, function, replace, split, attr

我正在尝试使用函数拆分和替换 href。代码简单明了：

html

```
<a href="http://nu.nl">nu.nl</a> 
```

jQuery

```
 $(document).ready(function () {   

     function rep() {
         href = $('a').attr('href');
         url = href.split('/');         
         href.replace(url[2], 'cnn.com');
     }

     rep()
 }); 
```

如您所见，我正在准备好文档中调用该函数。我尝试了'prop'而不是attr，但没有运气。我究竟做错了什么？示例：[JsFiddle](http://jsfiddle.net/JnpMp/8/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:49:51.300

你不使用`replace`返回的东西。如果要更改`a`元素中的 href，可以更改

```
href.replace(url[2], 'cnn.com'); 
```

到

```
$('a').attr('href', href.replace(url[2], 'cnn.com')); 
```

现在，假设您可能有多个`a`元素，我建议您将整个代码替换为

```
$('a').attr('href', function(_, href){
    url = href.split('/');          
    return href.replace(url[2], 'cnn.com');
}); 
```

[示范](http://jsfiddle.net/GUdZ7/)

如果您愿意，您也可以避免使用正则表达式进行拆分：

```
$('a').attr('href', function(_, href){
     return href.replace(/\/\/[^\/]+/, '//cnn.com')
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:55:42.887

您不需要在 document.ready 语句中定义您的函数

```
function rep(myURL, replaceWith) {
  var arr = myURL.split('/');          
  myURL = myURL.replace(arr[2], replaceWith);
  return myURL;
}

$(document).ready(function () {   
    $('a').attr('href', rep(
                            $('a').attr('href'), 
                            'cnn.com'
                           )
               );
}); 
```

# java - Java：将一天中的长时间转换为时间戳

> ID：14455621
> 
> 赞同：0
> 
> 时间：2013-01-22T09:48:43.277
> 
> 标签：java, time, timestamp, long-integer, milliseconds

我有一个长值，表示自当天午夜起以毫秒为单位的时间。即 00:00:01 将是 1000。

我想将其转换为自纪元以来的长时间戳 - 使用当前系统的日、月、年。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:58:13.330

```
 final Calendar instance = Calendar.getInstance();
    instance.set(Calendar.HOUR, 0);
    instance.set(Calendar.MINUTE, 0);
    instance.set(Calendar.SECOND, 0);
    instance.set(Calendar.MILLISECOND, 0);
    long result = instance.getTimeInMillis() + yourTime; 
```

另请注意，Calendar#getInstance 执行以下操作：

`Calendar cal = createCalendar(TimeZone.getDefaultRef(), Locale.getDefault());`

结果时间将根据默认设置的 TimeZone 更改（是的，它可以更改！）。看到这篇文章：[java Timezone setDefault effects](https://stackoverflow.com/questions/9891881/java-timezone-setdefault-effects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:17:17.890

试试这个：

```
Date date = new Date(your_long_value); 
```

# python - Tkinter 国际绑定

> ID：14455625
> 
> 赞同：7
> 
> 时间：2013-01-22T09:48:58.607
> 
> 标签：python, tkinter, bind, scancodes

Tkinter 中是否有一种方法可以绑定适用于所有键盘布局的键组合？（通过扫描码绑定）

例如，我需要在所有布局中使用键盘左下角的*相同*`'Control-Z'`物理键的绑定，例如：     * 俄罗斯布局、     * 希腊布局等。

 *这是我尝试过的：

```
from Tkinter import *
root=Tk()
def f(event):
    print 'undo'
button1=Button(root, text=u'Button')
button1.pack()
button1.bind('<Control-z>', f)
root.mainloop() 
```

它不适用于俄语和希腊语键盘布局。

**更新 2：**

我用 Windows 做了更多的实验，现在一般规则是这样的：

    1）如果语言是基于拉丁字符集的，键被“按值”映射（**德语**、**法语**、**德沃夏克**语），以便将相同的动作映射到不同的物理键。
    2) 如果不是（*例如* **俄语**、**希腊语**），则所有主要加速键都“按位置”映射（以匹配通常标记在同一键上的相应英文字母）。

只有第二种情况需要特别注意。如果这已经在某个库中实现了，有什么想法吗？

**更新 3**

即使没有俄语键盘或俄语 Windows，它也可以简单地复制。

1) 开始->控制面板->区域和语言选项
2) 语言->详细信息
3) 添加俄语。

而已。现在 Alt-Shift 会将您切换到俄语，您将能够输入以下有趣的符号：

![俄语键盘](../Images/4fa13af7a25de8c3d9da4e529195e514.png)

另一个 Alt-Shift 将使您切换回来。

忘记 Wikipedia 所说的有关语音俄语布局的内容。这些天没有使用它们。至少在俄罗斯境内。

所有 Windows 应用程序（包括 wxPython 应用程序）都`Ctrl-я`用于撤消、`Ctrl-ч`剪切、`Ctrl-с`复制等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:04:34.070

我主要感兴趣的是 Windows 中的俄语布局。

我目前使用的快速而肮脏的解决方法是：

```
import Tkinter

def copy(event):
    print 'Ctrl-C'

root = Tkinter.Tk()
root.bind('<Control-ntilde>', copy)
root.mainloop() 
```

这可能会导致与其他语言中的 <Ctrl + *actual ntilde> 发生冲突。*

如果我可以确定哪个布局当前处于活动状态，则可以克服它，因此第二个问题：[Tkinter 确定键盘布局](https://stackoverflow.com/q/14472766/237105)。

另一个缺点是，由于修饰键的“通用”处理，当我按下 Ctrl-Alt-V 时它也会触发，但这是另一个故事，因为它也适用于英文布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T19:06:00.457

我对此有一个部分且相当丑陋的解决方案。**`Ctrl`在下面的代码中，我有一个带有 Text 小部件的窗口，它在标准+`C`**键盘事件及其正确处理之间有一些“内置”连接。但是，如果我只是将键盘布局更改为俄语，这些功能将不再起作用。为了解决这个问题，我重新编写了这些事件的实现，现在一切正常。但我对这样的解决方案感到有些沮丧。有没有人有更好的想法？..例如，有没有办法在 python tkinter 中触发（或模仿）“正常”按键？

```
import tkinter

root = tkinter.Tk()

class MyWind (tkinter.Frame):
    def __init__(self, parent):
        tkinter.Frame.__init__(self, parent)
        self.create_UI()

    def create_UI(self):
        text_field = tkinter.Text(self)
        text_field.insert(tkinter.END, "Hello world")
        text_field.pack()

def print_event(event):
    print ("Event character code <char>: '%s'" % event.char)
    print ("   Event key symbol <keysym>: '%s'" % event.keysym)
    print ("   Event key code <keycode>: '%s'" % event.keycode)

def work_out_event(event): # Here is the solution
    widget_type = type(event.widget)
    if widget_type == tkinter.Text:
        content = event.widget.selection_get()
        print ("Selected content = '%s'" % content)
        root.clipboard_clear() 
        root.clipboard_append(content)

def lurker1(event):
    print ("Crtl + C (english) pressed!")       
    print_event(event)

def lurker2(event):
    print ("Crtl + C (russian) pressed!")
    print_event(event)
    work_out_event(event)        

root.bind("<Control-c>", lurker1)      # "C" character with the english keyboard layout
root.bind("<Control-ntilde>", lurker2) # "C" character with the russian keyboard layout

root.app = MyWind(root)
root.app.pack()
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-12T16:41:48.943

感谢@acw1668 的帮助！

您需要执行类似的操作才能使用具有任何语言布局的热键（此示例的回调在按下 Control 键时运行，并打印与 Control 同时按下的键：

```
from tkinter import *

def callback(event):
    if (event.state & 4 > 0):
        print("Ctrl-%s pressed" % chr(event.keycode))

root = Tk()
root.bind("<Key>", callback)
root.mainloop() 
```

PS：本示例在 Windows 10 上使用英语、乌克兰语、俄语、阿拉伯语、阿姆哈拉语、亚美尼亚语、希腊语、格鲁吉亚语、法语、中文、日语和其他语言布局时进行了检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:16:08.907

[旧的 1999 年已经建议](http://grokbase.com/t/python/python-list/996swwc13e/python-guis-abandoning-tkinter-and-welcoming-wxpython)的另一个选择是从 Tkinter 切换到 wxPython，其中自动为所有类型的键盘布局完成加速器处理（例如，此处的编辑器示例：[http](http://wiki.wxpython.org/AnotherTutorial) ://wiki.wxpython.org/AnotherTutorial ）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-06T11:04:39.607

```
def copy(event):
    print 'Ctrl-C'
    master.clipboard_append('text') 
```

它有效！*

# php - 使用 php 的 KendoUI Grid 服务器分页

> ID：14455629
> 
> 赞同：0
> 
> 时间：2013-01-22T09:49:07.563
> 
> 标签：php, kendo-ui

我想使用 php 在剑道 ui 中进行服务器端分页。所以有人知道该怎么做吗？我在网格中确实喜欢 serverpaging=true。对于服务器端逻辑，我需要选择哪个页码，这样我就可以像 pagenumber*perpage 一样计算并通过查询获取该记录。但是如何将选定的页码传递给服务器端呢？

```
var crudServiceBaseUrl = "<?=base_url()?>",
                 dataSource = new kendo.data.DataSource({
                   transport: {
                    read:  {
                        url: crudServiceBaseUrl+"did_grid_list",
                        type:"GET",
                        dataType: "jsonp"
                    },
 serverPaging: true,
 pageSize: 20,
                schema: {
                    total: function(data) { console.log(10034); return 10034; },
                    model: {
                          id: "id",     
                        fields: {
                            did: { validation: { required: true,max:9 } },
                                }
                               }
                             }
                         }); 
```

上面的代码是我的视图文件。控制器端就像

```
$json_data = array();
            $count_all = count($this->dids_model->did_get($action));    
        $page_no = $_GET['page']; 

        $json_data['page'] = $page_no;          
        $json_data['total'] = ($count_all>0) ? $count_all : 0;

         $perpage = 20;
         $start = ($page_no-1) * $perpage;
         if($start < 0 )
         $start = 0;
                $result = $this->dids_model->did_get($action,$start,$perpage); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:08:38.287

请查看[`serverPaging`](http://docs.kendoui.com/api/framework/datasource#serverpaging-booleandefault)文档。它向您显示您将在请求中收到的参数，涉及：

1.  `take`: 包含要检索的记录数
2.  `skip`：从数据集前面开始读取多少条记录
3.  `page`: 当前页数据的索引
4.  `pageSize`: 每页的记录数

# r - 不能 ls(myVector)

> ID：14455632
> 
> 赞同：0
> 
> 时间：2013-01-22T09:49:13.427
> 
> 标签：r, dataframe

我从一个 sqlite 表中读取了一个 data.frame：

```
sql <- paste( "SELECT co_id, co_name, mkt_id FROM co" )
co <- dbGetQuery( db, sql ) 
```

并得到一个有效的结果（似乎）：

```
ls( co )
[1] "co_id"   "co_name" "mkt_id" 
```

然后我对一些数据进行子集化：

```
x <- co[ co$mkt_id == 5, 2 ]
x
[1] "Dongbu"   "Green"    "Hanwha"   "Heungkuk" "Hyundai"  "LIG"     
[7] "Lotte"    "Meritz"   "Samsung"  "KFCC"     "NCUF"     "NACF" 
```

在将这个变量分配`x`给 a时遇到困难`gcombobox`，我试图找到原因并且（这是否是原因）找到了：

```
ls( x )
Error in as.environment(pos) : no item called "Dongbu" on the search list 
```

有人可以解释这是什么意思吗？不应该`x`是一个普通的向量，而“东布”只是第一个元素？

```
sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
[1] gWidgetsRGtk2_0.0-81 RSQLite_0.11.2       DBI_0.2-5           
[4] stringr_0.6.1        gWidgets_0.0-52      xtable_1.7-0        
[7] gridExtra_0.9.1      ggplot2_0.9.2.1     

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       gtable_0.1.1      
 [5] labeling_0.1       MASS_7.3-22        memoise_0.1        munsell_0.4       
 [9] plyr_1.7.1         proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    
[13] RGtk2_2.20.25      scales_0.2.2       tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:21:03.533

`ls`函数的第一个参数`name`指定环境的名称。一般情况下，此函数用于列出指定环境中的对象。

如果您使用`x`作为第一个参数运行此函数，该函数会查找 environment `"Dongbu"`，它是 中的第一个字符串`x`，但无法找到环境。

如果你想看看一个对象的结构，你应该使用这个`str`函数。试试`str(x)`。

# python - 在“itertools” Python 模块返回的组合中查找给定组合（自然数）的索引

> ID：14455634
> 
> 赞同：7
> 
> 时间：2013-01-22T09:49:20.277
> 
> 标签：python, indexing, combinations, itertools

给定`k`第一个`n`自然数的组合，出于某种原因，我需要在返回的那些组合中找到这种组合的位置`itertools.combination(range(1,n),k)`（原因是这样我可以使用 a`list`而不是 a`dict`来访问与每个组合关联的值，知道组合）。

由于`itertools`以常规模式产生它的组合，因此可以做到这一点（而且我还找到了一个简洁的算法），但我正在寻找一种更快/更自然的方式，我可能会忽略它。

顺便说一下，这是我的解决方案：

```
def find_idx(comb,n):
    k=len(comb)
    idx=0
    last_c=0
    for c in comb:
        #idx+=sum(nck(n-2-x,k-1) for x in range(c-last_c-1)) # a little faster without nck caching
        idx+=nck(n-1,k)-nck(n-c+last_c,k) # more elegant (thanks to Ray), faster with nck caching
        n-=c-last_c
        k-=1
        last_c=c
    return idx 
```

其中`nck`返回[n,k 的二项式系数](http://rosettacode.org/wiki/Evaluate_binomial_coefficients#Python)。

例如：

```
comb=list(itertools.combinations(range(1,14),6))[654] #pick the 654th combination
find_idx(comb,14) # -> 654 
```

这是一个等效但可能涉及较少的版本（实际上我从下一个派生了前一个）。我将组合的整数`c`视为二进制数字中 1 的位置，我在解析 0/1 时构建了一个二叉树，并且在解析过程中发现了索引递增的规则模式：

```
def find_idx(comb,n):
    k=len(comb)
    b=bin(sum(1<<(x-1) for x in comb))[2:]
    idx=0
    for s in b[::-1]:
        if s=='0':
            idx+=nck(n-2,k-1)
        else:
            k-=1
        n-=1
    return idx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:21:56.780

您的解决方案似乎很快。在`find_idx`中，您有两个 for 循环，可以使用公式优化内部循环：

```
C(n, k) + C(n-1, k) + ... + C(n-r, k) = C(n+1, k+1) - C(n-r, k+1) 
```

所以，你可以`sum(nck(n-2-x,k-1) for x in range(c-last_c-1))`用`nck(n-1, k) - nck(n-c+last_c, k)`.

我不知道你是如何实现你的`nck(n, k)`函数的，但它应该是 O(k) 以时间复杂度衡量的。在这里我提供我的实现：

```
from operator import mul
from functools import reduce # In python 3
def nck_safe(n, k):
    if k < 0 or n < k: return 0
    return reduce(mul, range(n, n-k, -1), 1) // reduce(mul, range(1, k+1), 1) 
```

最后，您的解决方案无需递归即可变为 O(k^2)。它很快，因为`k`不会太大。

## 更新

我注意到它`nck`的参数是`(n, k)`. n 和 k 都不会太大。我们可以通过缓存来加速程序。

```
def nck(n, k, _cache={}):
    if (n, k) in _cache: return _cache[n, k]
    ....
    # before returning the result
    _cache[n, k] = result
    return result 
```

在 python3 中，这可以通过使用`functools.lru_cache`装饰器来完成：

```
@functools.lru_cache(maxsize=500)
def nck(n, k):
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:21:00.267

看起来您需要更好地指定您的任务，否则我只是弄错了。对我来说，似乎当您迭代时，`itertools.combination`您可以将需要的索引保存到适当的数据结构中。如果您需要所有这些，那么我会选择`dict`（`dict`满足您的所有需求）：

```
combinationToIdx = {}
for (idx, comb) in enumerate(itertools.combinations(range(1,14),6)):
    combinationToIdx[comb] = idx

def findIdx(comb):
    return combinationToIdx[comb] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-17T20:37:29.010

我挖出了一些旧的（尽管它已被转换为 Python 3 语法）代码，其中包括`combination_index`执行您请求的函数：

```
def fact(n, _f=[1, 1, 2, 6, 24, 120, 720]):
    """Return n!
    The “hidden” list _f acts as a cache"""
    try:
        return _f[n]
    except IndexError:
        while len(_f) <= n:
            _f.append(_f[-1] * len(_f))
        return _f[n]

def indexed_combination(n: int, k: int, index: int) -> tuple:
    """Select the 'index'th combination of k over n
    Result is a tuple (i | i∈{0…n-1}) of length k

    Note that if index ≥ binomial_coefficient(n,k)
    then the result is almost always invalid"""

    result= []
    for item, n in enumerate(range(n, -1, -1)):
        pivot= fact(n-1)//fact(k-1)//fact(n-k)
        if index < pivot:
            result.append(item)
            k-= 1
            if k <= 0: break
        else:
            index-= pivot
    return tuple(result)

def combination_index(combination: tuple, n: int) -> int:
    """Return the index of combination (length == k)

    The combination argument should be a sorted sequence (i | i∈{0…n-1})"""

    k= len(combination)
    index= 0
    item_in_check= 0
    n-= 1 # to simplify subsequent calculations
    for offset, item in enumerate(combination, 1):
        while item_in_check < item:
            index+= fact(n-item_in_check)//fact(k-offset)//fact(n+offset-item_in_check-k)
            item_in_check+= 1
        item_in_check+= 1
    return index

def test():
    for n in range(1, 11):
        for k in range(1, n+1):
            max_index= fact(n)//fact(k)//fact(n-k)
            for i in range(max_index):
                comb= indexed_combination(n, k, i)
                i2= combination_index(comb, n)
                if i2 != i:
                    raise RuntimeError("mismatching n:%d k:%d i:%d≠%d" % (n, k, i, i2)) 
```

`indexed_combination`进行逆运算。

PS 我记得我有时尝试删除所有这些`fact`调用（通过替换适当的增量乘法和除法），但代码变得更加复杂，实际上并没有更快。如果我用预先计算的阶乘列表代替`fact`函数，可以实现加速，但是对于我的用例来说，速度差异可以忽略不计，所以我保留了这个版本。

# asp.net-mvc - 使用 ASP.NET MVC4 的自定义注释属性

> ID：14455635
> 
> 赞同：0
> 
> 时间：2013-01-22T09:49:21.247
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我尝试使用 ASP.net MVC4 实现自定义注释。但是在自定义 javascript 中实现的验证登录会引发一些错误，例如 JQuery 为空。我参考了链接： http: [//www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3](http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3)

当我使用 MVC4 实现相同的方法时，谁能告诉我这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:05:08.530

确保在任何其他脚本引用之前引用了 jQuery：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.8.0.min.js")"></script> 
```

验证版本是否正确以及该文件是否存在于指定位置。通常，当您创建新的 ASP.NET MVC 应用程序时，此脚本引用包含在布局中，但请仔细检查您是否属于这种情况以及是否添加它。

# tridion - 使用 Tridion 核心服务的发布目标列表？

> ID：14455637
> 
> 赞同：8
> 
> 时间：2013-01-22T09:49:29.763
> 
> 标签：tridion, tridion-2011

如何获得 Tridion 核心服务的发布目标列表？我看到此代码示例以获取目标信息，但找不到从核心服务获取列表的方法。也许它是 Publication 对象的一部分？

```
var pubtarget = (PublicationTargetData)client.Read("tcm:0-21-65537", readoption); 
```

此外，如果有一种方法可以通过 Anguilla JavaScript 客户端获取它，那也很酷。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T09:52:04.870

```
var filter = new PublicationTargetsFilterData();
var pubTargets = ClientAdmin.GetSystemWideList(filter);
var pubTargetsXml = ClientAdmin.GetSystemWideListXml(filter); 
```

您可以在`filter`对象上设置其他过滤器属性

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T10:13:02.087

user978511 已经回答了如何使用核心服务进行操作，所以让我来回答您如何使用 Anguilla 进行操作：

```
var system = $models.getItem($const.TCMROOT);
var list = system.getListPublicationTargets(); 
```

从那时起，它就是一个普通的列表——所以你需要检查`isLoaded()`并调用`load()`它是否返回`false`（挂钩到回调的“load”/“loadfailed”事件）。

发布目标可以通过方法以 XML 形式使用，也可以通过`getXml()`方法以数组形式使用`getItems()`（它返回模型项的数组——因此，您可以再次检查`isLoaded()`这些等）

# c# - 如何根据节点将一个 XML 文件拆分为多个 XML 文件

> ID：14455639
> 
> 赞同：4
> 
> 时间：2013-01-22T09:49:31.870
> 
> 标签：c#, xml, split

我有一个如下的 XML 文件

```
<?xml version="1.0>
<EMR>
  <CustomTextBox>
    <Text>WNL</Text>
    <Type>TextBox</Type>
    <Width>500</Width>
    <id>txt1</id>
  </CustomTextBox>

  <CustomTextBox>
    <Text>WNL</Text>
    <Type>TextBox</Type>
    <Width>500</Width>
    <id>txt2</id>
  </CustomTextBox>

  <AllControlsCount>
    <Width>0</Width>
    <id>ControlsID</id>
  </AllControlsCount>
</EMR> 
```

我想将 xml 文件分成三个。根据其节点

文件 1：

```
<?xml version="1.0>
<CustomTextBox>
  <Text>WNL</Text>
  <Type>TextBox</Type>
  <Width>500</Width>
  <id>txt1</id>
</CustomTextBox> 
```

文件 2：

```
<?xml version="1.0>
<CustomTextBox>
  <Text>WNL</Text>
  <Type>TextBox</Type>
  <Width>500</Width>
  <id>txt2</id>
</CustomTextBox> 
```

文件 3：

```
<?xml version="1.0>
<AllControlsCount>
  <Width>0</Width>
  <id>ControlsID</id>
</AllControlsCount> 
```

节点也是动态的，它们可能会改变。如何根据节点将此 xml 文件拆分为多个。如果有人知道请分享。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T09:57:29.133

尝试**LinqToXml**：

```
var xDoc = XDocument.Parse(Resource1.XMLFile1); // loading source xml
var xmls = xDoc.Root.Elements().ToArray(); // split into elements

for(int i = 0;i< xmls.Length;i++)
{
    // write each element into different file
    using (var file = File.CreateText(string.Format("xml{0}.xml", i + 1)))
    {
        file.Write(xmls[i].ToString());
    }
} 
```

它将获取根元素内定义的所有元素并将其内容写入单独的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T10:09:56.147

使用 Linq to Xml 更简单 - 您可以使用[XElement.Save](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.save.aspx)方法将任何元素保存到单独的 xml 文件中：

```
XDocument xdoc = XDocument.Load(path_to_xml);
int index = 0;
foreach (var element in xdoc.Root.Elements())
    element.Save(++index + ".xml"); 
```

或者一行

```
XDocument.Load(path_to_xml).Root.Elements()
         .Select((e, i) => new { Element = e, File = ++i + ".xml" })
         .ToList().ForEach(x => x.Element.Save(x.File)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T10:12:51.607

您可以使用**XmlTextReader**和**XmlWriter**类来完成您想要的。但是您需要知道需要从哪里开始创建新的**XML**文件。查看您的示例，您希望拆分根节点中包含的每个节点。

这意味着一旦您开始读取 XML 文件，**您需要确保您在根节点内**，然后您需要**跟踪您在 XML 中的深度**，这样您就可以在到达下一个节点时关闭文件根节点。

例如看这个 - 我从 file.xml 读取 XML 并打开 XML 编写器。当我到达根节点中包含的第一个节点时，我开始编写元素。

*我记得变量“treeDepth”中的深度，它代表了 XML 树结构的深度。*

基于当前读取的节点，我做了一个动作。**当我到达树深度为 1 的 End 元素时**，这意味着我再次位于根节点中，因此我关闭当前 XML 文件并打开新文件。

```
XmlTextReader reader = new XmlTextReader ("file.xml");

XmlWriter writer = XmlWriter.Create("first_file.xml")
writer.WriteStartDocument();

int treeDepth = 0;

while (reader.Read()) 
{
    switch (reader.NodeType) 
    {
        case XmlNodeType.Element:

            //
            // Move to parsing or skip the root node
            //

            if (treeDepth > 0)
                writer.WriteStartElement(reader.Name);

            treeDepth++;

            break;
  case XmlNodeType.Text:

            //
            // Write text here
            //

            writer.WriteElementString (reader.Value);

            break;
  case XmlNodeType.EndElement:

            //
            // Close the end element, open new file
            //

            if (treeDepth == 1)
            {
                writer.WriteEndDocument();
                writer = new XmlWriter("file2.xml");
                writer.WriteStartDocument();
            }

            treeDepth--;

            break;
    }
}

writer.WriteEndDocument(); 
```

**请注意，此代码并不能完全解决您的问题，而只是解释了完全解决问题所需的逻辑。**

有关 XML 阅读器和编写器的更多帮助，请阅读以下链接：

[http://support.microsoft.com/kb/307548](http://support.microsoft.com/kb/307548)

[http://www.dotnetperls.com/xmlwriter](http://www.dotnetperls.com/xmlwriter)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-02T21:09:12.407

我接受了 Legoless 的回答并将其扩展为适合我的版本，因此我分享它。出于我的需要，我需要拆分每个文件的多个条目，而不仅仅是原始问题中显示的每个文件的单个条目，这意味着我需要保留更高级别的元素以确保生成的 xml 有效文件。

因此，您需要提供要拆分的级别以及所需的每个文件的条目数。

```
public class XMLFileManager
{        

    public List<string> SplitXMLFile(string fileName, int startingLevel, int numEntriesPerFile)
    {
        List<string> resultingFilesList = new List<string>();

        XmlReaderSettings readerSettings = new XmlReaderSettings();
        readerSettings.DtdProcessing = DtdProcessing.Parse;
        XmlReader reader = XmlReader.Create(fileName, readerSettings);

        XmlWriter writer = null;
        int fileNum = 1;
        int entryNum = 0;
        bool writerIsOpen = false;
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.NewLineOnAttributes = true;

        Dictionary<int, XmlNodeItem> higherLevelNodes = new Dictionary<int, XmlNodeItem>();
        int hlnCount = 0;

        string fileIncrementedName = GetIncrementedFileName(fileName, fileNum);
        resultingFilesList.Add(fileIncrementedName);
        writer = XmlWriter.Create(fileIncrementedName, settings);
        writerIsOpen = true;
        writer.WriteStartDocument();

        int treeDepth = 0;

        while (reader.Read())
        {
            switch (reader.NodeType)
            {
                case XmlNodeType.Element:                        

                    treeDepth++;

                    if (treeDepth == startingLevel)
                    {
                        entryNum++;
                        if (entryNum == 1)
                        {                                
                            if (fileNum > 1)
                            {
                                fileIncrementedName = GetIncrementedFileName(fileName, fileNum);
                                resultingFilesList.Add(fileIncrementedName);
                                writer = XmlWriter.Create(fileIncrementedName, settings);
                                writerIsOpen = true;
                                writer.WriteStartDocument();
                                for (int d = 1; d <= higherLevelNodes.Count; d++)
                                {
                                    XmlNodeItem xni = higherLevelNodes[d];
                                    switch (xni.XmlNodeType)
                                    {
                                        case XmlNodeType.Element:
                                            writer.WriteStartElement(xni.NodeValue);
                                            break;
                                        case XmlNodeType.Text:
                                            writer.WriteString(xni.NodeValue);
                                            break;
                                        case XmlNodeType.CDATA:
                                            writer.WriteCData(xni.NodeValue);
                                            break;
                                        case XmlNodeType.Comment:
                                            writer.WriteComment(xni.NodeValue);
                                            break;
                                        case XmlNodeType.EndElement:
                                            writer.WriteEndElement();
                                            break;
                                    }
                                }
                            }
                        }
                    }

                    if (writerIsOpen)
                    {
                        writer.WriteStartElement(reader.Name);
                    }

                    if (treeDepth < startingLevel)
                    {
                        hlnCount++;
                        XmlNodeItem xni = new XmlNodeItem();
                        xni.XmlNodeType = XmlNodeType.Element;
                        xni.NodeValue = reader.Name;
                        higherLevelNodes.Add(hlnCount, xni);
                    }

                    break;
                case XmlNodeType.Text:

                    if (writerIsOpen)
                    {
                        writer.WriteString(reader.Value);
                    }

                    if (treeDepth < startingLevel)
                    {
                        hlnCount++;
                        XmlNodeItem xni = new XmlNodeItem();
                        xni.XmlNodeType = XmlNodeType.Text;
                        xni.NodeValue = reader.Value;
                        higherLevelNodes.Add(hlnCount, xni);
                    }

                    break;
                case XmlNodeType.CDATA:

                    if (writerIsOpen)
                    {
                        writer.WriteCData(reader.Value);
                    }

                    if (treeDepth < startingLevel)
                    {
                        hlnCount++;
                        XmlNodeItem xni = new XmlNodeItem();
                        xni.XmlNodeType = XmlNodeType.CDATA;
                        xni.NodeValue = reader.Value;
                        higherLevelNodes.Add(hlnCount, xni);
                    }

                    break;
                case XmlNodeType.Comment:

                    if (writerIsOpen)
                    {
                        writer.WriteComment(reader.Value);
                    }

                    if (treeDepth < startingLevel)
                    {
                        hlnCount++;
                        XmlNodeItem xni = new XmlNodeItem();
                        xni.XmlNodeType = XmlNodeType.Comment;
                        xni.NodeValue = reader.Value;
                        higherLevelNodes.Add(hlnCount, xni);
                    }

                    break;
                case XmlNodeType.EndElement:

                    if (entryNum == numEntriesPerFile && treeDepth == startingLevel || treeDepth==1)
                    {
                        if (writerIsOpen)
                        {
                            fileNum++;
                            writer.WriteEndDocument();
                            writer.Close();
                            writerIsOpen = false;
                            entryNum = 0;
                        }                            
                    }
                    else
                    {
                        if (writerIsOpen)
                        {
                            writer.WriteEndElement();
                        }

                        if (treeDepth < startingLevel)
                        {
                            hlnCount++;
                            XmlNodeItem xni = new XmlNodeItem();
                            xni.XmlNodeType = XmlNodeType.EndElement;
                            xni.NodeValue = string.Empty;
                            higherLevelNodes.Add(hlnCount, xni);
                        }
                    }

                    treeDepth--;

                    break;
            }
        }

        return resultingFilesList;
    }

    private string GetIncrementedFileName(string fileName, int fileNum)
    {
        return fileName.Replace(".xml", "") + "_" + fileNum + "_" + ".xml";
    }
}

public class XmlNodeItem
{        
    public XmlNodeType XmlNodeType { get; set; }
    public string NodeValue { get; set; }
} 
```

样品用法：

```
int startingLevel = 2; //EMR is level 1, while the entries of CustomTextBox and AllControlsCount 
                       //are at Level 2\. The question wants to split on those Level 2 items 
                       //and so this parameter is set to 2.
int numEntriesPerFile = 1;  //Question wants 1 entry per file which will result in 3 files,  
                            //each with one entry.

XMLFileManager xmlFileManager = new XMLFileManager();
List<string> resultingFilesList = xmlFileManager.SplitXMLFile("before_split.xml", startingLevel, numEntriesPerFile); 
```

对问题中的 XML 文件使用时的结果：

文件 1：

```
<?xml version="1.0" encoding="utf-8"?>
<EMR>
  <CustomTextBox>
    <Text>WNL</Text>
    <Type>TextBox</Type>
    <Width>500</Width>
    <id>txt1</id>
  </CustomTextBox>
</EMR> 
```

文件 2：

```
<?xml version="1.0" encoding="utf-8"?>
<EMR>
  <CustomTextBox>
    <Text>WNL</Text>
    <Type>TextBox</Type>
    <Width>500</Width>
    <id>txt2</id>
  </CustomTextBox>
</EMR> 
```

文件 3：

```
<?xml version="1.0" encoding="utf-8"?>
<EMR>
  <AllControlsCount>
    <Width>0</Width>
    <id>ControlsID</id>
  </AllControlsCount>
</EMR> 
```

另一个具有更大级别深度并显示每个文件的多个条目的示例：

```
int startingLevel = 4; //splitting on the 4th level down which is <ITEM>
int numEntriesPerFile = 2;//2 enteries per file. If instead you used 3, then the result 
                          //would be 3 entries in the first file and 1 entry in the second file.

XMLFileManager xmlFileManager = new XMLFileManager();
List<string> resultingFilesList = xmlFileManager.SplitXMLFile("another_example.xml", startingLevel, numEntriesPerFile); 
```

原始文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TOP_LEVEL>
  <RESPONSE>
    <DATETIME>2019-04-03T21:39:40Z</DATETIME>  
    <ITEM_LIST>
      <ITEM>
        <ID>1</ID>
        <ABC>Some Text 1</ABC>        
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>        
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>        
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>42</DLID>            
            <TYPE>Example</TYPE>            
            <IS_ENABLED>1</IS_ENABLED>            
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>      
      <ITEM>
        <ID>2</ID>
        <ABC>Some Text 2</ABC>        
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>        
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>        
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>53</DLID>            
            <TYPE>Example</TYPE>            
            <IS_ENABLED>1</IS_ENABLED>            
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>
      <ITEM>
        <ID>3</ID>
        <ABC>Some Text 3</ABC>        
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>        
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>        
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>1128</DLID>            
            <TYPE>Example</TYPE>            
            <IS_ENABLED>1</IS_ENABLED>            
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>
      <ITEM>
        <ID>4</ID>
        <ABC>Some Text 4</ABC>        
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>        
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>        
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>1955</DLID>            
            <TYPE>Example</TYPE>            
            <IS_ENABLED>1</IS_ENABLED>            
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>
    </ITEM_LIST>
  </RESPONSE>
</TOP_LEVEL> 
```

结果文件：

第一个文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TOP_LEVEL>
  <RESPONSE>
    <DATETIME>2019-04-03T21:39:40Z</DATETIME>
    <ITEM_LIST>
      <ITEM>
        <ID>1</ID>
        <ABC>Some Text 1</ABC>
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>42</DLID>
            <TYPE>Example</TYPE>
            <IS_ENABLED>1</IS_ENABLED>
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>
      <ITEM>
        <ID>2</ID>
        <ABC>Some Text 2</ABC>
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>53</DLID>
            <TYPE>Example</TYPE>
            <IS_ENABLED>1</IS_ENABLED>
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>
    </ITEM_LIST>
  </RESPONSE>
</TOP_LEVEL> 
```

第二个文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TOP_LEVEL>
  <RESPONSE>
    <DATETIME>2019-04-03T21:39:40Z</DATETIME>
    <ITEM_LIST>
      <ITEM>
        <ID>3</ID>
        <ABC>Some Text 3</ABC>
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>1128</DLID>
            <TYPE>Example</TYPE>
            <IS_ENABLED>1</IS_ENABLED>
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>
      <ITEM>
        <ID>4</ID>
        <ABC>Some Text 4</ABC>
        <TESTDATA><![CDATA[Here is some c data]]></TESTDATA>
        <A_DATETIME>2019-04-01T01:00:00Z</A_DATETIME>
        <A_DEEPER_LIST>
          <DEEPER_LIST_ITEM>
            <DLID>1955</DLID>
            <TYPE>Example</TYPE>
            <IS_ENABLED>1</IS_ENABLED>
          </DEEPER_LIST_ITEM>
        </A_DEEPER_LIST>
      </ITEM>
    </ITEM_LIST>
  </RESPONSE>
</TOP_LEVEL> 
```

# php - 如果数据库为空，如何添加数据？

> ID：14455642
> 
> 赞同：0
> 
> 时间：2013-01-22T09:49:41.440
> 
> 标签：php, mysql, sql-insert

我正在尝试向我的数据库中名为 ID 的列添加一个数字。应该发生的情况是，当数据库中没有数据时，此脚本将插入 ID 编号为 1 的第一行，但问题是它不起作用。

我认为我对空数据的检查是一个问题，你们中的一个人可以通过指出我应该做什么来帮助我。

**我的代码**

```
<?php

/**
 * @author SiNUX
 * @copyright 2013
 */

include ('connect.php');

$lastId = mysql_query("SELECT ID FROM poiinfo");

$row = mysql_fetch_array($lastId);

if (is_null($row['ID'])){

    $nId = $row['ID'];
    $nId = 0;
    $nId = $nId++;

    $addId = "INSERT INTO poiinfo(`ID`) VALUES ('$nId')";
    mysql_query($addId);

}else {

    $lId = $row['ID'];
    $lId = $lId + 0;
    $lId++;
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:52:06.513

您正在执行的这个查询

```
INSERT INTO poiinfo('ID') VALUES ('$nId') 
```

很可能会失败，因为`columnname`被单引号括起来。应该删除引号或用反引号替换它，例如

```
INSERT INTO poiinfo(ID) VALUES ('$nId') 
```

或者

```
INSERT INTO poiinfo(`ID`) VALUES ('$nId') 
```

所以问题是，*我什么时候使用反引号*？这是您使用的名称在 MySQL 的保留关键字列表中，

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

最后，您必须传递包含查询的变量`mysql_query()`

```
mysql_query($addId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:07:11.227

您必须重置自动增量字段`ID`，以便在表为空时插入 1

# visual-studio - 如何在 Visual Studio Web 性能测试项目中参数化 url 的路径？

> ID：14455643
> 
> 赞同：1
> 
> 时间：2013-01-22T09:49:44.427
> 
> 标签：visual-studio, testing, performance-testing

我正在使用 Visual Studio 2010 来测试我的 Web 系统。

我记录了很多请求。

http://10.20.30.40/system_name/aa.aspx

http://10.20.30.40/system_name/bb.aspx

http://10.20.30.40/system_name/cc.aspx

我使用了参数化 Web 服务器功能。此功能仅允许我更改 ip。

然后请求 url 更改为...

{{WebServer1}}/system_name/aa.aspx

{{WebServer1}}/system_name/bb.aspx

{{WebServer1}}/system_name/cc.aspx

所以我创建了一个上下文参数，p1=sys_name

但我需要手动更改每个请求。

{{WebServer1}}/{{p1}}/aa.aspx

它会花费太多时间。

我可以知道如何在 Visual Studio 中自动执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:08:13.500

使用这个奇妙的功能：在请求中查找和替换。

![在此处输入图像描述](../Images/f0ecbbcc71ea7ff5a5940ee7f874e76f.png)

右键单击您的请求之一，指定您的参数，然后单击全部替换。

# tfs - 在 Visual Studio 2012 中查看冲突的任何方式

> ID：14455644
> 
> 赞同：11
> 
> 时间：2013-01-22T09:49:44.207
> 
> 标签：tfs, visual-studio-2012

是否可以仅在 Visual Studio 2012 中查看冲突，而无需合并或签入。在 2012 年，您曾经能够*获取最新版本*，然后转到挂起视图并单击显示冲突图标。

我很想知道您是否可以在没有任何附加组件/外部命令的情况下执行此操作，即仅使用 Visual Studio 2012 标准安装所具有的功能，而无需例如以下任何一项：

朝圣者团队：http: [//visualstudiogallery.msdn.microsoft.com/79e9baa7-ea8b-4335-86ba-ae929bf67222](http://visualstudiogallery.msdn.microsoft.com/79e9baa7-ea8b-4335-86ba-ae929bf67222)

或者：tf checkin

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-16T10:20:21.107

当我发现如何做到这一点时，我自己只是在寻找答案。这是查看冲突的方法。

转到团队资源管理器并选择待定更改。在 Pending changes 窗口中有一个名为 Actions 的下拉菜单，单击该菜单，菜单中有一个 Resolve conflict 选项。单击该选项，将打开一个窗口，显示工作区中的所有冲突，类似于 VS2010 的解决冲突窗口。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T17:50:24.917

使用右键菜单中的“比较”选项。您可以选择在任意两个版本之间生成差异。

或者，您可以执行与 2012 基本相同的选项。您可以获取最新版本，这将引发本地版本和服务器版本之间存在的任何冲突。然后可以在本地解决冲突，然后丢弃或签入。

要删除自动冲突解决：

`Ctrl+Q --> "Conflict" --> ENTER --> 取消选中 "Attempt to automatically resolve the conflict when they are generated"

# java - Java - 扩展接口

> ID：14455649
> 
> 赞同：3
> 
> 时间：2013-01-22T09:50:02.650
> 
> 标签：java, interface, extend

扩展一个空接口是否正确？我只需要一个方法（EventPlayer）和一个参数（EventCLass myEvent），它可能一次是一个类，下一次是另一个类。

```
public interface EventClass {
  // ... empty ...
}

public interface EventClassExt1 extends EventClass {

    public void firstEvent();

    public void secondEvent();
}

public interface EventClassExt2 extends EventClass {

    public void thirdEvent(String text);
}

public EventPlayer(final EventCLass myEvent) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:53:41.803

是的，这是正确的。它被称为**标记接口**。

[http://en.wikipedia.org/wiki/Marker_interface_pattern](http://en.wikipedia.org/wiki/Marker_interface_pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:54:56.837

是的，这样做是可以的。

当接口没有方法时，一般称为[*标记接口*](http://en.wikipedia.org/wiki/Marker_interface_pattern)；[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)是 JDK 中此类接口的众多示例之一。

此外，您可能不希望接口名称中出现“类”。只是`Event`更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:54:07.077

*扩展一个没有其他对象的类是否正确？*

我假设你的意思是一个空的接口。

这是在 Java 中使用很多的东西，在他们有注解来签署一个类是那种类型（从 Java 5 开始）之前。

您所做的是正确的-基本上您正在标记扩展接口/类类型，`EventClass`但我会使用注释，这是执行此操作的新方法

[http://tutorials.jenkov.com/java-reflection/annotations.html](http://tutorials.jenkov.com/java-reflection/annotations.html)

# java - 如何使用 for 循环更新数据库并获取最后一个序列值

> ID：14455653
> 
> 赞同：2
> 
> 时间：2013-01-22T09:50:18.263
> 
> 标签：java, multithreading, class, object, plsql

我正在尝试在这里做多线程，现在我必须使用 DbHandler 类更新我的数据库

程序执行从一个控制器类开始，它有一个 main 方法和一个线程池：

```
public class RunnableController {
// Main method
public static void main(String[] args) throws InterruptedException {
    try {
        RunnableController controller = new RunnableController();
        controller.initializeDb();
        controller.initialiseThreads();
        System.out.println("Polling");
    } catch (Exception e) {
        e.printStackTrace();
    }
}

   private void initialUpdate()
{
    DBhandler dbhandler = new DBhandler();
    dbhandler.updateDb(getOutgoingQueue());
}

private void initialiseThreads() {      
    try {
        threadExecutorRead = Executors.newFixedThreadPool(10);
        PollingSynchronizer read = new PollingSynchronizer(incomingQueue, dbConncetion);
        threadExecutorRead.submit(read);
    } catch (Exception e){
        e.printStackTrace();
    }   
 }
} 
```

我的 poller 类获取新数据并应该模拟更新：

```
 public class PollingSynchronizer implements Runnable {
     public PollingSynchronizer(Collection<KamMessage> incomingQueue,
     Connection dbConnection) {
     super();
    this.incomingQueue = incomingQueue;
    this.dbConnection = dbConnection;
 }

  private int seqId;

   public int getSeqId() {
    return seqId;
  }

   public void setSeqId(int seqId) {
   this.seqId = seqId;
 }

  // The method which runs Polling action and record the time at which it is done
    public void run() {
     int seqId = 0;

      while (true) {
        List<KamMessage> list = null;

        try {
           list = fullPoll(seqId);

           if (!list.isEmpty()) {
             seqId = list.get(0).getSequence();
             incomingQueue.addAll(list);
             this.outgoingQueue = incomingQueue;
             System.out.println("waiting 3 seconds");
             System.out.println("new incoming message");
             Thread.sleep(3000);//at this wait I should execute run()

             //when I debug my execution stops here and throws " Class not found Exception "
             // its does not enters the message processor class 
             MessageProcessor processor = new MessageProcessor() {
              //the run method which should fetch the message processor class.
              final public void run() {
               RunnableController.setOutgoingQueue(generate(outgoingQueue));
              }
           };
          new Thread(processor).start();
        }
     } catch (Exception e1) {
        e1.printStackTrace();
     }
  }
 }
} 
```

我的消息处理器类：

```
 public class MessageProcessor implements Runnable {
private Collection<KpiMessage> fetchedMessages;
private Connection dbConnection;
Statement st = null;
ResultSet rs = null;
PreparedStatement pstmt = null;
private Collection<KamMessage> outgoingQueue;

public Collection<KamMessage> MessageProcessor(Collection<KamMessage> outgoingQueue){
    this.outgoingQueue = outgoingQueue;
    this.dbConnection = dbConnection;
    return outgoingQueue;
}
/**
 * Method for updating new values into database in preference for dummy processing of message
 * @param outgoingQueue 
 * @return 
 */
@SuppressWarnings("javadoc")
public Collection<KamMessage> generate(Collection<KamMessage> outgoingQueue)
{
        for (KamMessage pojoClass : outgoingQueue) {
            KamMessage updatedValue = createKamMsg804(pojoClass);
            System.out.print(" " + pojoClass.getSequence());
            System.out.print(" " + pojoClass.getTableName());
            System.out.print(" " + pojoClass.getAction());
            System.out.print(" " + updatedValue.getKeyInfo1());
            System.out.print(" " + updatedValue.getKeyInfo2());
            System.out.println(" " + pojoClass.getEntryTime());
        }
        return outgoingQueue;
}

/**
 * 
 * @param pojoClass 
 * @return msg
 */
public KamMessage createKamMsg804(KamMessage pojoClass)
{
    if(pojoClass.getAction() == 804){
    pojoClass.setKeyInfo1("ENTITYKEY9");
    pojoClass.setKeyInfo2("STATUSKEY9");
    }
    return pojoClass;
}
private KamMessage convertRecordsetToPojo(ResultSet rs) throws SQLException {

    KamMessage msg = new KamMessage();
    int sequence = rs.getInt("SEQ");
    msg.setSequence(sequence);
    String tablename = rs.getString("TABLENAME");
    msg.setTableName(tablename);
    Timestamp entrytime = rs.getTimestamp("ENTRYTIME");
    Date entryTime = new Date(entrytime.getTime());
    msg.setEntryTime(entryTime);
    Timestamp processingtime=rs.getTimestamp("PROCESSINGTIME");
    if(processingtime!=null){
        Date processingTime = new Date(processingtime.getTime());
        msg.setProcessingTime(processingTime);   
    }
    String keyInfo1 = rs.getString("KEYINFO1");
    msg.setKeyInfo1(keyInfo1);
    String keyInfo2 = rs.getString("KEYINFO2");
    msg.setKeyInfo2(keyInfo2);
    return msg;
}

@Override
 public void run() {

    // TODO Auto-generated method stub

 }

  } 
```

这是我的 DBhandler 类，它应该在数据库中进行更新

```
 public class DBhandler {
  Connection conn = null;
Statement st = null;
ResultSet rs = null;
PreparedStatement pstmt = null;

public DBhandler(){
    super();
}

/**
 * Method to initialize the database connection
 * @return conn
 * @throws Exception 
 * 
 */
public Connection initializeDB() throws Exception {
    System.out.println("JDBC connection");
    DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
    conn = DriverManager.getConnection("jdbc:oracle:thin:@VM-SALES-
           MB:1521:SALESDB1","bdeuser", "edb"); // Connection for Database SALES-DB1   
    return conn;
}

 //The method for updating Database

  public void updateDb(Collection<KpiMessage> updatedQueue){
    for(KpiMessage pojoClass : updatedQueue){
       //**How the query should be used so that it gets last sequence vale and Updates into   
            Database**
           String query = "UPDATE msg_new_to_bde Set KEYINFO1= ?, KEYINFO2 = ? WHERE SEQ =  and 
           action = 804";   
      }
}
/**
 * Method for Closing the connection
 * @throws Exception 
 *
 */

     public void closeDB() throws Exception { 
    st.close();
    conn.close();
   }

    } 
```

我只需要通过调用控制器类中的 updatedQueue 来使用此类（DbHAndler）中的更新查询来更新数据库。

我的程序流程 - 我有三个类： 1.Controller 2.PollerSynchro 3.Msgprocessor

我有数据库记录，这些记录被转换为 POJO 形式并存储在 Collection 中。使用这些 POJO，我的课程尝试一次性进行多处理和更新。

控制器 - 拥有线程池，使用 poll 方法启动 poller 类 - 完成

Poller - 应该轮询新的传入消息并将其存储在传入队列中 - 完成

MsgProcessor - 应该寻找新的传入消息并将它们从传出队列传递到传入队列 - 也完成

DbHandler- 应该在数据库中更新。

问题：

现在我的问题是

我必须在轮询线程休眠 3 秒时执行此更新 - 完成

在我的 Poller 类中的第二个 void run() 方法的代码中，传出队列没有传递给消息处理器类进行更新。我的执行流程只是循环回到第一个运行方法，并且得到 Class exception-Resolved

**如何在 Dbhanler 类的数据库中更新它**

请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:56:27.593

异常似乎来自这一行（这是 MessageProcessor.java 第 38 行吗？）

```
return (KpiMsg804) fetchedMessages; 
```

在`fetchedMessages`这一点上似乎是一个`ArrayList`。

# java - Java 创建文件，路径无法识别（我猜）

> ID：14455654
> 
> 赞同：1
> 
> 时间：2013-01-22T09:50:20.010
> 
> 标签：java, file, maven, import

我有一个名为 WebUtil.Java 的文件`src/test/java/com/x/utils`。我想运行这段代码：

```
File firefoxProfileFolder = new File("/../../resources/firefoxprofile"); 
```

在这个文件中创建一个变量 firefoxProfileFolder 中的文件夹。

此文件夹 (firefoxprofile) 位于`src/test/resources/firefoxprofile`. 我正在做的是：

```
File firefoxProfileFolder = new File("../../../resources/firefoxprofile"); 
```

但它不起作用？我究竟做错了什么？我得到的错误是：

```
org.openqa.selenium.firefox.UnableToCreateProfileException: Given model profile directory does not exist: ../../../resources/firefoxprofile
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 22:18:01'
System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.3', java.version: '1.6.0_35'
Driver info: driver.version: unknown 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:02:41.607

如果您使用的是 Maven，您应该能够使用这样的代码来解析测试资源的绝对路径名：

```
URL url = getClass().getResource("/firefoxprofile");

if (url == null) {
  // ... not found
} else {
  File firefoxProfileFolder = new File(url.getPath());
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:16:10.623

如果您将其作为测试的一部分运行（假设您是，因为该类位于测试文件夹中），surefire 插件会将 Maven 项目的基本目录设置为系统属性。

```
String basedir = System.getProperty("basedir"); 
```

basedir 变量将具有项目的目录。那么你的原始代码可以写成

```
File firefoxProfileFolder = new File(basedir + "/src/test/resources/firefoxprofile"); 
```

# codeigniter - 如何将会话中的每个数据输出到视图

> ID：14455656
> 
> 赞同：0
> 
> 时间：2013-01-22T09:50:26.937
> 
> 标签：codeigniter, session

我有这段代码，我只是不知道如何输出视图中的每个项目，例如名字、姓氏和用户名。

```
controller

{
    $selected_users = array(
          'username' => $username,
          'firstname' => 'peter',
          'lastname' => 'Sample'
          );
    $users = json_decode($this->session->userdata('users'), true);
    $users[] = $selected_users;
    $this->session->set_userdata('users', json_encode($users));
    $this ->load->view('db_control\sess');
   }

view:

$username = $this->session->userdata('users');
echo $username;

but it output all of it 
output of this code is 
```

[{"username":"newtest1","firstname":"newtest1","lastname":"newtest1"},{"username":"sample_beth","firstname":"sample_beth","lastname":"sample_beth "},{"username":"default","firstname":"default","lastname":"default"}]

这是正确的，但我想输出用户名、姓氏和名字，但仍然是所有记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:02:50.083

您将 selected_users 数组设置在一个变量中。尝试这个：

```
controller
{
$selected_users = array(
'username' => $userID,
'firstname' => 'peter',
'lastname' => 'Sample'
);
$this->session->set_userdata($selected_users);
}

view:
echo $this->session->userdata('username');
echo $this->session->userdata('firstname');
echo $this->session->userdata('lastname'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:56:07.963

在您看来，将您的更改`code`为：

```
$username = json_decode($this->session->userdata('users'), TRUE);

      foreach ($username AS $key => $value) {
              echo 'Username: ' . $value['username'];
              echo '<br/>';
              echo 'First Name: ' . $value['firstname'];
              echo '<br/>';
              echo 'Last Name: ' . $value['lastname'];
              echo '<br/><hr><br/>';  
      } 
```

基本上，您正在将您的`JSON`背部转换为 Array，然后循环遍历它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:06:47.193

你可以像这个控制器一样简单地传递数据

```
$data['selected_users'] = array(
                        'username'  =>  'testuser',
                        'firstname' =>  'peter',
                        'lastname'  =>  'Sample'
                    );
$this->load->view('viewname',$data ); 
```

看法：

```
echo $selected_users['username'];
echo '<br>';
echo $selected_users['firstname'];
echo '<br>';
echo $selected_users['lastname']; 
```

# html - MSSQL：查询以用 HTML ASCII 代码替换撇号'

> ID：14455659
> 
> 赞同：0
> 
> 时间：2013-01-22T09:50:42.657
> 
> 标签：html, sql, sql-server, ascii

我正在使用一个 MSSQL 2008 数据库，我有一个简单的更新语句将数据从表单提交到数据库：

```
 UPDATE Product
    SET ProductDescription = @ProductDescription 
    WHERE ProductID = @ProductID 
```

然而，许多将在数据库中更新的产品描述`'`在其文本中都有一个或多个单撇号。在将这些单撇号提交到数据库之前，我还需要该`SQL UPDATE`语句将这些单撇号转换为单撇号的 HTML ASCII 代码。`&#39;`

需要注意的一点是，产品描述文本中的列将被更新为一`NTEXT`列。

如何才能做到这一点？感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:54:42.920

尝试这个

```
UPDATE Product
    SET ProductDescription = REPLACE( @ProductDescription,'&#39;','''' )
    WHERE ProductID = @ProductID 
```

# c++ - 模拟 3D 矩阵上的基本扩散的最简单方法？

> ID：14455660
> 
> 赞同：1
> 
> 时间：2013-01-22T09:50:50.417
> 
> 标签：c++, opencl, physics

我目前正在编写一个程序，它将以非常基本的术语模拟气体在 3D 体积中的扩散和压力，整个边界都有边界 - 例如蚂蚁洞。我想要达到的效果： 1\. 随着时间的推移，气体在整个环境中扩散，尊重墙壁。2\. 我想测量每个网格点的压力或气体压缩。这样做的效果应该是，如果打开房间，气体将以反映压力差的速度从开口中扩散出来。

我的问题是我缺乏完全理解理论数学方程的知识，老实说，我真的不是在寻找准确的模拟。我只想实现物理学的一些突出效果。我对流体动力学（例如烟雾的模拟）不感兴趣。

我将在 OpenCL 中编写这个程序，但很乐意采用任何形式的代码示例，无论是 C 代码还是伪代码。

我想我应该传入 3 个 3D 阵列 - 一个用于气体，一个用于定义墙壁（例如 1 个位于 xyz = 墙壁），一个用于存储压力。我目前假设检查墙壁很容易。只需检查每个相邻单元格，如果它不是墙，则说明该单元格：

```
For each grid point,
  is wallmatrix[x+1] a wall?
    [diffusion math here]
  is wallmatrix[x-1] a wall?
    [diffusion math here]
  is wallmatrix[y+1] a wall?
    [diffusion math here]
  etc... 
```

但我只是不确定如何处理扩散数学，也不知道如何在这一切中包含压力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:37:00.233

扩散是最容易模拟的事情之一，因为它是自平滑的。

例如，您可以根据恒定时间步长运行模拟并跟踪单个粒子的位置，并在每个时间步长上将每个粒子移动一个固定（小）距离，但方向是随机的。

还有其他方法，例如，您可以执行基于网格的方法，其中更改每个网格位置中的粒子数。

您的问题的一个小问题是您所说的“以反映压力差的速度从开口中扩散”。扩散并没有真正做到这一点，因为扩散只是粒子的随机运动。不过，我认为，即使是直接扩散在这里也可能会让你感到满意，因为气体会从开口中扩散出来，而且看起来会更快。真正会发生的事情是它会以与其他任何地方相同的速度扩散出去，只是没有任何东西会重新扩散回来。不过，如果这不令人满意，那么你将需要进入流体动力学，至少有一点，因为这是描述流体在存在压力梯度而不是扩散时的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:38:34.603

好吧，这不是一件容易的事！

首先：您想模拟基本扩散或气体的完整运动？第二种情况一点也不简单，但你可以[在这里](http://http.developer.nvidia.com/GPUGems/gpugems_ch38.html)得到一个想法。

如果您只想在静态环境中扩散气体，事情会更容易，但您无法测量总压力，您唯一的变量将是气体的局部浓度。

这种现象受[菲克定律支配](http://en.wikipedia.org/wiki/Fick%27s_law)；第二个可能是您正在寻找的。

阅读[有限差分](http://en.wikipedia.org/wiki/Finite_difference)方法以了解如何离散化扩散方程。题目相当大，在这里写一个完整的答案。

# matlab - matlab中的图像标记和寻找质心

> ID：14455661
> 
> 赞同：2
> 
> 时间：2013-01-22T09:50:59.467
> 
> 标签：matlab, image-processing

我的问题是我有一个`png`格式的雷达图像。（抱歉，我不得不删除这张图片，因为我的同事说它侵犯了德国气象局的版权）

我想在 MATLAB 中读取图像。然后读取所有云，并用唯一索引标记每个云。这意味着属于某个云的每个像素都标有相同的索引`i`。计算`area(coa)`每个云的中心，然后我应该能够测量从一个 coa 到另一个云之间的距离。

我知道一些类似的工作是在 IDL 中完成的。我尝试使用它，但如果我能够在 MATLAB 中完成所有这些并更多地关注结果，而不是花时间学习 IDL，那对我来说会容易得多。

所以，在开始之前，我想知道这一切在 MATLAB 中是否可行。如果是，你能指导我如何提取云并标记它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:58:53.193

首先进行一些基本的图像分析，例如阈值化或中值滤波等，以减少相关的噪声。然后，您可以使用[`bwlabel`](http://www.mathworks.com/help/images/ref/bwlabel.html)唯一索引来标记每个云。用于[`reigonprops`](http://www.mathworks.com/help/images/ref/regionprops.html) 查找质心。

这是一个非常基本的代码示例：

```
d=imread('u09q8.png');
bw = im2bw(d,0.1); % thereshold at 50%
bw = bwareaopen(bw, 10); % Remove objects smaller than 10 pixels from binary image
bw=bwlabel(bw); % label each cloud 
stats=regionprops(bw,'Centroid'); % find centroid coordinates of all labeled clouds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:56:43.853

是的，有可能。关于云检测，这是一个循序渐进的过程。它将基于您要使用的算法。你可以从[这里开始。](http://www.mathworks.com/discovery/object-recognition.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:58:39.460

是的当然。这可以使用[k-means 聚类](http://en.wikipedia.org/wiki/K-means_clustering)来完成。您可以阅读有关[`imread`](http://www.mathworks.com/help/matlab/ref/imread.html)和的信息[`kmeans`](http://www.mathworks.com/help/stats/kmeans.html)。官方文档中给出的示例`kmeans`正是您所需要的。

例如，如果您想将您的图像聚类到 5 个云中：

```
%// Read the image
I = imread('clouds.png');
[y, x] = find(I);             %// Obtain all coordinates
y = size(I, 1) - y + 1;       %// Adjust y-coordinates
K = 5;
[idx, c] = kmeans([x, y], K); %// Classify clouds into K clusters 
```

现在`idx`存储相应的簇索引并`c`存储质心的坐标。

要绘制结果，您可以执行以下操作：

```
%// Plot results
figure, hold on
scatter(x, y, 5, idx)         %// Plot the clusters
plot(c(:, 1), c(:, 2), 'r+')  %// Plot centroids
text(c(:, 1) + 10, c(:, 2), num2str((1:K)'), 'color', 'r')  %// Plot cluster IDs 
```

请注意，此方法需要预先确定簇的数量`K`。或者，您可以使用[此工具](http://www.mathworks.com/matlabcentral/fileexchange/13916-simple-tool-for-estimating-the-number-of-clusters)尝试自动检测集群的数量。

*编辑：由于版权声明，我删除了生成的图像。*

# asp.net - 在调试 ASP.Net 3.5 时观察集合时，Visual Studio 2012 挂起

> ID：14455667
> 
> 赞同：0
> 
> 时间：2013-01-22T09:51:18.123
> 
> 标签：asp.net, debugging, visual-studio-2012, asp.net-3.5

一段时间以来，我在使用 Visual Studio 2012 调试我的 asp.net 3.5 应用程序时遇到问题。每次我想观察集合、列表或类似类中的哪些值时，Visual Studio 都会挂起几秒钟，然后对于每个属性集合（如计数）没有值，但有一条消息说发生了超时，我必须在调试器中更进一步，才能再次激活它。但是当我更进一步（F10）时，Visual Studio 挂起，我只能终止 w3wp.exe 进程并从头开始调试。

此问题仅发生在我的经典 asp.net 3.5 应用程序中。其他 Asp.net MVC 或 WinForms 应用程序工作得很好！

任何人的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T14:09:48.690

我也遇到了这个问题，偶然发现了这篇文章：

[无法在 Web 服务器上开始调试。无法启动 ASP.NET 调试 VS 2010、II7、Win 7 x64](https://stackoverflow.com/questions/4653236/unable-to-start-debugging-on-the-web-server-could-not-start-asp-net-debugging-v)

不知道如何更正 ASP.NET 应用程序使用的应用程序池的用户名/密码来解决问题。

PS：应用程序运行良好，它没有使用旧的应用程序池凭据进行调试。

希望这可以帮助！

# android - 使用 osmdroid 定义边界形状或区域

> ID：14455669
> 
> 赞同：2
> 
> 时间：2013-01-22T09:51:22.957
> 
> 标签：android, openstreetmap, osmdroid

我想使用*osmdroid*在区域中定义感兴趣的区域。我有多个`GeoPoint`限制该区域的对象。阅读*OpenStreetMap*，我发现它们定义了区域。但是，代码中似乎缺少这个概念。我能找到的关闭是`BoundingBoxE6`类。它提供了我需要的方法，例如从`GeoPoint`对象构建一个框或检查给定对象是否`GeoPoint`位于`BoundingBoxE6`. 不幸的是，我感兴趣的领域并不总是盒子。其中一些是二维的，倾向于模仿俄罗斯方块形状的圆圈或走廊。

我知道可以通过堆叠多个`BoundingBoxE6`对象来获得我想要的形状来解决这个问题。但这似乎相当不切实际，因为我必须要么定义一个持有多个`BoundingBoxE6`对象引用的类。即使这样，也只能通过大量来接近圆形，这在检查是否包含例如`BoundingBoxE6`方面将非常无效。`GeoPoint`

有没有另一种方法来解决这个问题？也许我刚刚忽略了一门可能会有所帮助的课程。我欢迎更熟悉*osmdroid*的人提出意见。

来源： [osmdroid](http://code.google.com/p/osmdroid/source/browse/#svn/trunk/osmdroid-android/src/main/java/org/osmdroid) [`GeoPoint`](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/util/GeoPoint.java)， [`BoundingBoxE6`](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/util/BoundingBoxE6.java)

# c++ - 是否有固定大小分配器的优雅 C++ 实现？

> ID：14455670
> 
> 赞同：5
> 
> 时间：2013-01-22T09:51:36.357
> 
> 标签：c++, performance, object, memory-management, c++11

如果必须包含的头文件数量尽可能少，我认为 C++ 库是“优雅的”。

我知道已经存在固定大小的分配器，例如`Loki::SmallObjectAllocator`和`boost::pool`。虽然两者都很优秀，但我认为它们并不优雅，也不容易无缝集成到项目中。

大多数时候，我只需要 boost 库的一小部分，但我必须在我的机器上安装整个库。例如，如果我想使用 boost::pool，我希望只包含**一个**头文件`boost_pool.h`并完成工作。因为我认为固定大小的分配器不应该如此依赖于太多其他组件。在我看来，理想的代码应该如下所示：

```
#include <boost_pool.h>

int main()
{
   boost::pool<int> p;
   int* v = p.allocate();
} 
```

有没有这样的图书馆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:54:29.783

欢迎你来[我](http://howardhinnant.github.io/stack_alloc.html)的。优雅与否，你可以决定。但它只是一个短标题，依赖于几个小的标准标题。分配器满足 C++11 分配器要求，这是 C++03 分配器要求的子集。如果需要，您可以随时添加 C++03 样板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:39:12.540

你在使用 GCC 吗？它的标准库带有一些固定大小的分配器作为扩展，请参阅[http://gcc.gnu.org/onlinedocs/libstdc++/manual/memory.html#allocator.ext](http://gcc.gnu.org/onlinedocs/libstdc++/manual/memory.html#allocator.ext)

他们是相当独立的（不确定优雅，我已经很久没有正确查看他们的代码了）

# ruby-on-rails - Rails：获取会话超时

> ID：14455672
> 
> 赞同：3
> 
> 时间：2013-01-22T09:51:40.477
> 
> 标签：ruby-on-rails, ruby, session, session-timeout

我不知道如何在 Rails 中获取会话超时（默认或配置）；[这里](https://stackoverflow.com/questions/5860950/setting-session-timeout-in-rails-3)写了如何设置它，但没有写如何获取它。

我试过了：

*   `Some::Application.config.session_store`: 返回一个类
*   `app.controller.session.timeout`, `...expires_at`: 不起作用
*   文档：没有线索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-14T18:19:16.083

我知道这个问题很老了，但我会把这个留给未来疲惫的旅行者：

获取定义的选项

```
Rails.application.config.session_store .... 
```

你可以做

```
Rails.application.config.session_options 
```

# c# - 试图返回 json 并填充选择列表

> ID：14455675
> 
> 赞同：8
> 
> 时间：2013-01-22T09:51:56.243
> 
> 标签：c#, jquery, asp.net-mvc

我试图从我的控制器返回一个 Json 结果并使用 jQuery 填充一个选择列表。但是代码甚至没有在我的控制器中命中 Json 方法。

我的选择列表

```
<select id="MyList"></select> 
```

我的 javascript

```
<script type="text/javascript">
    $(document).ready(function () {
        $.getJSON("@Url.Action("GetProductJson", "Product")", null, function (data) {
            $("#MyList").addItems(data);
        });
    });

    $.fn.addItems = function (data) {
        return this.each(function () {
            var list = this;
            $.each(data, function (index, itemData) {
                var option = new Option(itemData.Text, itemData.Value);
                list.add(option);
            });
        });
    };
</script> 
```

我在 ProductController 中的 Json 方法

```
[HttpGet]
public JsonResult GetProductJson()
{
    var list = new List<SelectListItem>
           {
               new SelectListItem { Value = "1", Text = "Aron" },
               new SelectListItem { Value = "2", Text = "Bob" },
               new SelectListItem { Value = "3", Text = "Charlie" },
               new SelectListItem { Value = "4", Text = "David" }
           };

    return Json(list);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T09:53:07.383

您应该为默认禁用的 GET 请求启用 JSON。这通过将第二个参数传递给`Json`方法来实现：

```
return Json(list, JsonRequestBehavior.AllowGet); 
```

现在继续安装[`FireBug`](http://getfirebug.com/)。如果您在 StackOverflow 上发布此问题之前已经这样做了，您可能已经在浏览器中检查了 AJAX 请求，并且可能已经看到服务器返回 500 状态代码，并且当您检查响应时，您会看到确切的错误消息，而不仅仅是那-您还会看到有关如何修复它的建议。该建议基本上是我在回答中发布的内容。因此，您甚至不需要发布您的问题，因为您可以自己解决问题。我无法想象人们在没有诸如 FireBug 或 Chrome 开发者工具之类的工具的情况下进行 Web 开发。这就像试图在没有任何工具的情况下用自己的双手建造一座房子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:54:43.637

你需要`JsonRequestBehavior.AllowGet`在你的 json 方法中添加

来自 Phil haack 发布的[JsonHijacking](http://haacked.com/archive/2009/06/25/json-hijacking.aspx)

> 默认情况下，ASP.NET MVC 框架不允许您使用 JSON 有效负载响应 HTTP GET 请求。如果您需要发送 JSON 以响应 GET，则需要通过使用 JsonRequestBehavior.AllowGet 作为 Json 方法的第二个参数来明确允许该行为。但是，恶意用户有可能通过称为 JSON 劫持的过程访问 JSON 有效负载。您不想在 GET 请求中使用 JSON 返回敏感信息。

# c# - 从创建它的不同 .aspx 页面引用 ArrayList 对象

> ID：14455678
> 
> 赞同：0
> 
> 时间：2013-01-22T09:52:02.813
> 
> 标签：c#, asp.net, arraylist

我有一个数组列表，我向其中添加了一个代码列表。当我重定向到不同的页面（aspx）时，我希望能够从其他页面访问添加到数组列表中的这些代码。

除了创建单独的 Class.cs 文件之外，这是最简单的方法。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:55:28.657

您可以使用以下`Session`变量：

```
ArrayList myArrayList = new ArrayList();
//add items to arraylist
Session["MyArrayList"] = myArrayList; 
```

然后只需在第二页上切换它即可将其取回：

```
ArrayList myArrayList = Session["MyArrayList"] as ArrayList;
//check to see if arraylist is null before using it
if (myArrayList != null)
{
    //array list is not null, safe to use
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:02:04.530

为此，您需要使用 Session，我建议您使用以下代码：

您要从中重定向到另一个页面的 Page-1 的代码：

```
 System.Collections.ArrayList objArrayList = new System.Collections.ArrayList();
        objArrayList.Add("DEMO1");
        objArrayList.Add("DEMO2");
        Session["ArrayList"] = objArrayList; 
```

您从另一个页面重定向的第 2 页的代码：

```
 System.Collections.ArrayList objArrayList1 = Session["ArrayList"] as System.Collections.ArrayList; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:54:47.293

即使使用单独的`class`，您想要的也不能直接发生（除非它是静态属性）。每个请求都将重新创建您的对象。

解决方法是将您的存储`ArrayList`在`Session`. 有关会话状态的详细信息，请参阅此 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/ms178581 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

# wxwidgets - 使用 wxWidgets 库在 linux 中使用 codelite 进行 arm 交叉编译时出错

> ID：14455688
> 
> 赞同：1
> 
> 时间：2013-01-22T09:52:39.637
> 
> 标签：wxwidgets, cross-compiling, codelite

我已将交叉编译器 arm-linux-gnueabi 添加到 codelite 并成功交叉编译了示例 C 程序。

现在我正在尝试交叉编译一个 wxwidget 示例程序。

最初它在 setup.h 中给我带来了错误。

我用 /usr/include/wx/setup.h 为 /usr/lib/wx/include/gtk2-unicode-release-2.8/wx/setup.h 创建了一个链接。现在它给了我大约 159 个错误。我给你一些供你参考。

```
 /usr/include/wx/defs.h:42:13: error: #error "No Target! You should use wx-config program for compilation flags!"
In file included from /usr/include/wx/cursor.h:24:0,
                 from /usr/include/wx/event.h:22,
                 from /usr/include/wx/wx.h:25,
                 from main.cpp:14:
/usr/include/wx/gtk/cursor.h:40:5: error: ‘GdkCursor’ does not name a type
In file included from /usr/include/wx/app.h:570:0,
                 from /usr/include/wx/wx.h:26,
                 from main.cpp:14:
/usr/include/wx/gtk/app.h:55:5: error: ‘guint’ does not name a type
/usr/include/wx/gtk/app.h:65:5: error: ‘GdkVisual’ does not name a type 
```

当我添加`wx-config --libs` `wx-config --cxxflags`到我的构建命令时，它给了我兼容的库错误..

这些是我坚持的错误..

/usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld：找不到-lwx_gtk2u_richtext-2.8 /usr/lib/gcc/ arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld：找不到-lwx_gtk2u_aui-2.8 /usr/lib/gcc/arm-linux-gnueabi/4.6 /../../../../arm-linux-gnueabi/bin/ld: 找不到 -lwx_gtk2u_xrc-2.8 /usr/lib/gcc/arm-linux-gnueabi/4.6/../../ ../../arm-linux-gnueabi/bin/ld: 找不到 -lwx_gtk2u_qa-2.8 /usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm -linux-gnueabi/bin/ld: 找不到 -lwx_gtk2u_html-2.8 /usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ ld：找不到-lwx_gtk2u_adv-2.8 /usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld：找不到-lwx_gtk2u_core- 2.8 /usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld：找不到-lwx_baseu_xml-2。8 /usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld：找不到-lwx_baseu_net-2.8 /usr/lib/gcc /arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld：找不到-lwx_baseu-2.8 collect2：ld返回1退出状态

我认为我在为交叉编译器链接库时做错了。任何人都可以帮我解决这个问题。我将不胜感激。

-提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:27:08.633

看起来你没有交叉编译 wxWidgets 本身。或者如果您安装了它，则没有安装它。

要记住的是，您绝对不需要手动创建任何链接。特别是，您已经制作的那个`wx/setup.h`几乎肯定会**破坏**您的其他构建，不要这样做。只需使用正确`wx-config`的交叉构建。

# django - 墨盒中的结帐过程问题

> ID：14455689
> 
> 赞同：1
> 
> 时间：2013-01-22T09:52:42.477
> 
> 标签：django, checkout, payment-processing, mezzanine, cartridge

我正在使用**夹层 + 墨盒**作为购物车。我想在其中使用*奖励积分（如折扣券）*的概念以及拥有足够奖励积分以便他们可以通过它们付款并希望在结帐时使用它们的用户必须为这些用户*禁用*付款详细信息步骤并下订单。

所以我只想知道如何在墨盒中禁用此付款步骤。任何在他们的项目中使用过墨盒的人都可以告诉我这是否**可行。**如果是，那么如何？

墨盒中有一个折扣券模块，但它不符合我的要求，所以我没有使用它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:47:14.967

这是完全可行的。Cartridge 只是一个 Django 应用程序。

奖励积分与您当地货币的比例是否为一比一？

我可能会先用一个名为“reward_points”的 Cartridge.shop.fields.MoneyField 扩展 Account 模型。接下来，将必要的字段和逻辑添加到自定义版本的[弹药筒.shop.forms.OrderForm](https://github.com/stephenmcd/cartridge/blob/master/cartridge/shop/forms.py#L270-L400)中。

获得有关 Mezzanine 和 Cartridge 问题的及时准确答案的最佳选择是 Freenode 上的[#mezzanine](http://mezzanine.jupo.org/irc/)频道和[mezzanine-users](http://groups.google.com/group/mezzanine-users) Google Groups 邮件列表。

# javascript - 禁止用户在 Web 浏览器中从控制台调用函数

> ID：14455692
> 
> 赞同：0
> 
> 时间：2013-01-22T09:52:52.567
> 
> 标签：javascript, jquery, google-chrome, browser

所以，我正在用 html5 和 javascript 构建一个游戏，我想通过在 Web 浏览器的控制台中调用我的一些函数（例如 saveScore(100000)）来防止作弊。

有什么想法可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:15:12.113

控制台由函数执行，`eval()` 因此通过以下方式覆盖 eval 函数：

```
window.eval=function(){}; 
```

现在控制台已禁用
但这也不是一个好主意，因为它不能阻止小书签的执行，所以使用@Anthony 的想法。

# android - Android 请求中的 Post 参数

> ID：14455693
> 
> 赞同：1
> 
> 时间：2013-01-22T09:52:55.407
> 
> 标签：android, post, parameters, request

我正在做一个 Android 应用程序，但我在对自己的服务器执行请求时遇到问题。我已经使用 Play Framework 制作了服务器，并从 Json 中获取了参数：

```
 response.setContentTypeIfNotSet("application/json; charset=utf-8");        
 JsonParser jsonParser = new JsonParser(); 
 JsonElement jsonElement = jsonParser.parse(getBody(request.body)); 
 Long id =jsonElement.getAsJsonObject().get("id").getAsLong(); 
```

当我向我的服务器发出 GET 请求时，一切正常。但是当我发出 POST 请求时，我的服务器返回一个未知错误，可能是 JSON 格式错误或无法找到该元素。

> 私有 ArrayList NameValuePair> 参数；
> 
> 私有 ArrayList NameValuePair> 标头；
> 
> ...
> 
> 案例发布：
> 
> ```
>  HttpPost postRequest = new HttpPost(host);
>   // Add headers
>   for(NameValuePair h : headers) 
>   {
>        postRequest.addHeader(h.getName(), h.getValue());
>   }
>   if(!params.isEmpty())
>   {
>        postRequest.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
>   }
>   executeRequest(postRequest, host);
>   break; 
> ```

我试图处理请求的参数，但失败了：

> if(!params.isEmpty()) {
> HttpParams HttpParams = new BasicHttpParams();
> 
> ```
>  for (NameValuePair param : params)
>  {
>       HttpParams.setParameter(param.getName(), param.getValue());
>  }                
>  postRequest.setParams(HttpParams); } 
> ```

并且有不同的错误，取决于我提出的要求。它们都是'play.exceptions.JavaExecutionException'：

*   'com.google.gson.stream.MalformedJsonException'
*   '这不是 JSON 对象'
*   '期望找到对象：“id”'

我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:10:53.620

这是发送 HTTP Post 的简单方法。

```
HttpPost httppost = new HttpPost("Your URL here");
httppost.setEntity(new StringEntity(paramsJson));
httppost.addHeader("content-type", "application/json");
HttpResponse response = httpclient.execute(httppost); 
```

您最好直接使用 JSON 字符串而不是在这里解析它。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:12:32.963

```
 Try this,It may help u

     public void executeHttpPost(String string) throws Exception
    {
        //This method for HttpConnection
           try
          {
             HttpClient client = new DefaultHttpClient();

             HttpPost request = new HttpPost("URL");

           List<NameValuePair> value=new ArrayList<NameValuePair>();

           value.add(new BasicNameValuePair("Name",string));

           UrlEncodedFormEntity entity=new UrlEncodedFormEntity(value);

           request.setEntity(entity);

          client.execute(request);

           System.out.println("after sending :"+request.toString());

           }
        catch(Exception e)  {System.out.println("Exp="+e);
          }

 } 
```

# html - 圆形动画

> ID：14455694
> 
> 赞同：0
> 
> 时间：2013-01-22T09:52:55.063
> 
> 标签：html, canvas, html5-canvas

有人可以帮我一点画布吗，我正在学习它并且无法制作一个圆圈，当 r 达到 100 时，它会回到 0 动画。所以它是某种缩放图像。

我画了一个这样的圆圈：

```
<canvas id="myCanvas" width="578" height="200"></canvas>
<script>
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');
  var centerX = canvas.width / 2;
  var centerY = canvas.height / 2;
  var radius = 70;

  context.beginPath();
  context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
  context.fillStyle = 'green';
  context.fill();
  context.lineWidth = 5;
  context.strokeStyle = '#003300';
  context.stroke();
</script> 
```

现在我如何用画布为它设置动画，当它的半径达到 100 时，它会立即回到 0，然后又回到 100。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:01:02.100

看看数学窦函数[http://www.digitalmedia.cz/shared/clanky/438/graf.gif](http://www.digitalmedia.cz/shared/clanky/438/graf.gif)

让我们利用它的值将变为`1`然后返回到和`0`之间的角度`0``PI`

```
var period = 500; // [miliseconds]
var linearMod = Date.now() % period / period; // this goes from 0 to 1
var mod = Math.sin(linearMod * Math.PI); // and here with simple easing we create 
                                         // bouncing
var r = someRadius * mod;                // voila 
```

通过这种方法，您还可以获得简单的正弦缓动，感觉更加动态。

这是给你的一个小小提琴[http://jsfiddle.net/rezoner/6acF9/](http://jsfiddle.net/rezoner/6acF9/)

您不必`linearMod`基于时间 - 您可以将其分配给滑块控件或任何您想要的。

# ffmpeg - ffmpeg 或 libav 来创建录音 webapp？

> ID：14455695
> 
> 赞同：0
> 
> 时间：2013-01-22T09:53:03.297
> 
> 标签：ffmpeg, audio-recording, libav

是否可以创建一个可以使用 ffmpeg 或 libav 录制音频或视频的 Web 应用程序？

还是这些仅用于创建用于编码、解码、录制音频/视频的桌面应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:10:22.420

这取决于你对什么平台感兴趣。

只有电脑？您可以使用 ffmpeg 或 libav，但您需要为不同的网络浏览器创建单独的插件。替代方案是从服务器加载本机模块的 Flash 或签名 Java 小程序。

在移动平台上，Flash 通常不是一种选择。通常的做法是提供一个独立的应用程序。

# c# - WPF ListView 星号（“*”）大小

> ID：14455699
> 
> 赞同：4
> 
> 时间：2013-01-22T09:53:10.580
> 
> 标签：c#, wpf, xaml

我想`ListView`用某一列填充 WPF 的剩余区域。

我一直在谷歌搜索并找到以下解决方案：

```
<GridViewColumn Header="Error" DisplayMemberBinding="{Binding ErrorDescription}" 
   Width="{Binding RelativeSource={RelativeSource FindAncestor, 
   AncestorType={x:Type ListView}}, Converter={StaticResource WidtConvert}} /> 
```

和转换器：

```
public object Convert(object value, Type targetType, object parameter,
                      System.Globalization.CultureInfo culture)
{
  ListView l = value as ListView;
  GridView g = l.View as GridView;
  double total = 0;
  for (int i = 0; i < g.Columns.Count - 1; i++)
  {
    total += g.Columns[i].ActualWidth;
  }
  return (l.ActualWidth - total);
} 
```

但问题是，在调用转换器时，包括 在内的所有列`ListView.ActualWidth`都是 0。

我不想在后面使用任何代码，例如在`Listview_SizeChanged`etc上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:50:51.400

您可以将转换器从后面的代码绑定到 ListView 控件的 Loaded 事件上的 Width 属性。在这种情况下，转换器将在控件完全加载并且实际宽度传输到转换器后被触发。

# javascript - 使用 JavaScript 从 iframe 读取数据

> ID：14455701
> 
> 赞同：0
> 
> 时间：2013-01-22T09:53:24.483
> 
> 标签：javascript, html

我的问题如下：
我设计了一个主页，我有一个索引（www.abc.com）网站和一个带有新闻的网站（www.abc.com/index.html）。

我试图将所有新闻的标题自动带到我的索引站点。因此，我编写了一个小的 javascript 函数，它在本地工作，但它在联机时不起作用。

我这样做的方式是：

1.  在我的索引中包含一个 iframe (www.abc.com/index.html)
2.  iframe 不可见
3.  在我的 JS 中获取 iframe 的结构
4.  挑选出我需要的索引信息
5.  将数据复制到我的索引中

我知道我无法从不在我的网络空间中的 iframe 中获取数据，但这是在我的网络空间中。

```
<iframe name="nf" id="newsframe" src="http://www.rossegger.at/news.html" 
style="visibility:hidden"></iframe>
<table id="news_table"></table>

function load_news() {    
    var con = document.getElementById("news_table");
    var frame = window.frames['nf'].document.getElementsByClassName('n');

    if(frame.length != 0)
    {
        con.innerHTML += "<tr><h2 color=white>NEWS</h2></tr><hr>";
        for(var i=0; i<frame.length; i++)
        {       
            con.innerHTML += "<tr>"+frame[i].textContent+"</tr><hr>";     
        }   
    }   
} 
```

问题是 frame.length 始终为 0（在线）
离线该值具有正确的值。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:59:42.737

由于浏览器中的沙盒限制，您不能这样做。您必须从不同的角度解决问题，尝试使用 javascript 获取 iframe 站点并将其显示在 div 中。或者为您的新闻站点设置一个 RSS 页面并从该来源获取头条新闻。

# python - 正则表达式不匹配连续数字

> ID：14455702
> 
> 赞同：0
> 
> 时间：2013-01-22T09:53:31.880
> 
> 标签：python, regex, python-2.7, regex-negation

我有以下正则表达式，它匹配*11:45 xyzz*、*abcd 22 30 xyz*等数字，其中数字是时间实例。但它也匹配像*32 11 43*这样的数字实例。我该如何避免这样做？

```
(?<=\b)(\d{1,2}[\s:](\d{1,2}|o\'clock)[\s\.,]{0,1}(%s){0,1}?)(?=[\s\.,]|\Z)|(noon|midnight)(?=\b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:59:06.643

您可以使用[否定](http://www.regular-expressions.info/lookaround.html)环视，这将匹配一个数字字符串之前或之前没有数字：

```
(?<!\d)\s+\d+\s+(?!\d) 
```

# c# - 创建主菜单 Windows Phone MVVM 模式

> ID：14455707
> 
> 赞同：1
> 
> 时间：2013-01-22T09:53:43.610
> 
> 标签：c#, windows-phone

我是 windows phone 编程的新手，在创建主菜单时我被卡住了。所以，基本是我想使用列表框显示 5 个类别。类别是静态的。那么我这样做对吗？我可以制作比这更简单的代码吗？这是我现在的代码，使用 VS2012 中的 WP 模板。

如果有人能帮助我理解 MVVM 模式，我真的很感激，

**/Views/MainPage.xaml：**

```
<ListBox Grid.Column="1" Margin="-48,0,0,0" ItemsSource="{Binding Categories}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical">
                <TextBlock Text="{Binding Category}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

**/ViewModels/MainViewModel.cs**

```
public class MainViewModel : ViewModelBase
{
    public MainViewModel()
    {
        this.Categories = new ObservableCollection<ItemViewModel>();
    }

    public ObservableCollection<ItemViewModel> Categories { get; private set; }

    public bool IsDataLoaded
    {
        get;
        private set;
    }

    public void LoadData()
    {
        // Sample data; replace with real data
        this.Categories.Add(new ItemViewModel() { Category = "tourist attraction" });
        this.Categories.Add(new ItemViewModel() { Category = "hotel" });
        this.Categories.Add(new ItemViewModel() { Category = "restaurant" });
        this.Categories.Add(new ItemViewModel() { Category = "bars & nightlife" });
        this.Categories.Add(new ItemViewModel() { Category = "shopping centre" });

        this.IsDataLoaded = true;
    }
} 
```

**/Views/ItemViewModel.cs**

```
public class ItemViewModel : ViewModelBase
{
    private string _category;
    public string Category
    {
        get
        {
            return _category;
        }
        set
        {
            if (value != _category)
            {
                _category = value;
                NotifyPropertyChanged("Category");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:10:33.903

如果菜单是静态的，我建议使用您显示的视图模型自定义用户控件。

我不同意 ItemViewModel，因为它不接缝视图模型，它接缝模型它应该只是一个 INotifyPropertyChanged 实现（或您拥有的任何其他基本模型类）。请记住，视图模型应该作为数据和相关数据操作的容器，而不是数据本身。

就像 Daniel 说的那样，您的代码没有任何问题，这个解决方案和其他解决方案一样好，MVVM 是一种架构模式，有时拥有您可以阅读和理解的代码比您无法理解的严格 MVVM 代码更好

# jquery - jQuery验证：仅当表单ID包含文本时才将规则应用于输入

> ID：14455709
> 
> 赞同：1
> 
> 时间：2013-01-22T09:53:48.527
> 
> 标签：jquery, validation

我有一个看起来像这样的表格

```
<form id="new_user" action="users">
  <input  id="user_email" class="string email required span5 valid" type="text"    
  value="nicolas@demoreau.be" size="80" placeholder="user@domain.com" name="user[email]">
</form> 
```

如果我想更新我的用户，表单 ID 将变为“edit_user”。仅当表单 id 包含“新”时，我才想在我的 user_email 上添加规则。我试着这样做：

```
$("form[id*=new][data-validate=true]").find("#user_email").rules("add", {
  remote: {
    url: "check_email",
    type: "post"
  },
  messages: {
    remote: "There is already a user with this email address!"
  }
}); 
```

但是，当我使用编辑表单时，这会产生一个错误：“元素未定义”，这是正常的，因为它无法在任何地方找到 user_email。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:00:19.480

在创建规则之前检查您想要的表单和元素是否存在。

```
if ($("form[id*=new][data-validate=true]").find("#user_email").length > 0){
    $('#user_email').rules("add", {
      remote: {
        url: "check_email",
        type: "post"
      },
      messages: {
        remote: "There is already a user with this email address!"
      }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:01:19.783

只试试这个，

```
$("#user_email").rules("add", {
         remote: {
             url: "check_email",
             type: "post"
         },
         messages: {
             remote: "There is already a user with this email address!"
         }
        });
    }); 
```

# prolog - 从列表中删除元素而不删除所有重复项

> ID：14455712
> 
> 赞同：1
> 
> 时间：2013-01-22T09:54:16.853
> 
> 标签：prolog

我想从列表中删除元素，但如果我这样做：

```
deletelist([3,1,2,3,4], [3], [3,1,2,4]) 
```

如何只删除一个 3 而没有得到这个答案：

```
deletelist([3,1,2,3,4], [3], [1,2,4]) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:55:03.857

[select](http://www.swi-prolog.org/pldoc/doc_for?object=select/3) /3 它是一个有用的内置函数，经常用于`generate and test`，您可以使用它来删除元素：

```
?- select(3,[3,1,2,3,4],L).
L = [1, 2, 3, 4] ;
L = [3, 1, 2, 4] ;
false. 
```

每次调用都会删除一个匹配项，然后您可以控制所需的行为

**编辑**

从第二个列表中删除所有元素：

```
deletelist(L, [], L).
deletelist(With, [D|Ds], Without) :-
    select(D, With, WithoutD),
    deletelist(WithoutD, Ds, Without). 
```

请注意，如果在列表中找不到任何要删除的元素，这将失败。为避免这种情况，请应用“if .. then .. else ..”

```
deletelist(L, [], L).
deletelist(With, [D|Ds], Without) :-
    (  select(D, With, WithoutD)
    -> deletelist(WithoutD, Ds, Without)
    ;  deletelist(With, Ds, Without)
    ). 
```

现在 deletelist/3 不会枚举所有可能的删除。它承诺第一个找到的。要恢复初始行为，即回溯所有不同的删除，需要一个效率较低的过程：

```
deletelist(L, [], L).
deletelist(With, [D|Ds], Without) :-
    select(D, With, WithoutD),
    deletelist(WithoutD, Ds, Without).
deletelist(With, [D|Ds], Without) :-
    \+ select(D, With, _),
    deletelist(With, Ds, Without). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:01:26.080

如果您只想获取列表中的唯一值 - 使用函数[list_to_set/2](http://www.swi-prolog.org/pldoc/man?predicate=list_to_set%2F2)：

`list_to_set([3,1,2,3,4],X)`给`X = [3, 1, 2, 4].`

**编辑：**

所以`gnu prolog`没有内置的 predicate `list_to_set`。你必须自己写。为此，您必须定义*集合*概念。是什么`set of list`？Set 应具有以下属性：

*   集合大小必须小于或等于列表大小。
*   Set 的所有成员都必须是 List 的成员。
*   List 的所有成员都必须是 Set 的成员。
*   Set 不得包含重复的值。

基于这些假设，您可以`set_from_list`像这样编写谓词：

```
elem_unique(Elem, List) :-
  delete(List, Elem, ListWithoutElem),
  length(List, OrgLength),
  length(ListWithoutElem, DelLength),
  DelLength + 1 =:= OrgLength.

nth_elem_isUnique(N, List) :-
  nth1(N, List, Elem),
  elem_unique(Elem, List).

nth_elemOfList1_isMemberOfList2(N, List1, List2) :-
  nth1(N, List1, Elem),
  member(Elem, List2).

elements_from_nth_areUnique(N, List) :-
  (length(List, Len),
  N > Len)    %stoping condition for recursion
  ;
  (nth_elem_isUnique(N, List),
  M is N + 1,
  elements_from_nth_areUnique(M, List)   %recursion part
  ).

listIsUnique(List) :-
  elements_from_nth_areUnique(1, List).

elements_from_nth_inList1_areMembersOfList2(N, List1, List2) :-
  (length(List1, Len),
  N > Len)    %stoping condition for recursion
  ;
  (nth_elemOfList1_isMemberOfList2(N, List1, List2),
  M is N + 1,
  elements_from_nth_inList1_areMembersOfList2(M, List1, List2)  %recursion part
  ).

list2containsList1(List1, List2) :-
  elements_from_nth_inList1_areMembersOfList2(1, List1, List2).

set_from_list(Set, List) :-
  length(Set, LenSet),
  length(List, LenList),
  LenSet =< LenList,
  list2containsList1(List, Set),
  list2containsList1(Set, List),
  listIsUnique(Set),
  !. 
```

所以打电话后`set_from_list(Set, [3,1,2,3,4])`你会得到`Set = [3,1,2,4]`。

# validation - 在 Silex 的一个“验证”过程中应用多个约束

> ID：14455714
> 
> 赞同：1
> 
> 时间：2013-01-22T09:54:17.160
> 
> 标签：validation, symfony, constraints, silex, explicit

我正在使用 Silex，并尝试使用验证器服务验证某些值。但问题是我需要对一个值应用多个约束，但验证器在不使用`Required`约束的情况下不允许这样做。

当我只想验证一个选择值（比如，'apple' 或 'orange'）时，我必须将约束`Choice`和`NotNull`（因为`Choice`允许一个`null`值）包装到`Required`和`Collection`（因为`Required`不能没有它就不能使用`Collection`，它是`CollectionValidator`谁验证了一系列`Required`的约束） 像这样：

```
$violations = $app['validator']->validate(array('value'), 
    new Collection(array(
        new Required(array(
            new Choice(array('apple', 'orange')),
            new NotNull()
        ))
    ))); 
```

它看起来很冗长，所以我正在寻找更优雅的解决方案（对于验证器的这种显式使用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:01:45.980

您可以使用`validateValue`接受一组约束作为第二个参数的函数。

```
$violations = $app['validator']->validateValue('value', array(
    new Choice(array('apple', 'orange')),
    new NotBlank()
)); 
```

# c# - 如何根据 startDayOfweek 和 c# 中的当前日期获取 StartDate

> ID：14455715
> 
> 赞同：-4
> 
> 时间：2013-01-22T09:54:20.660
> 
> 标签：c#, datetime

> **可能重复：**
> [如何获得一周开始的日期时间？](https://stackoverflow.com/questions/38039/how-can-i-get-the-datetime-for-the-start-of-the-week)

我需要根据输入日期和时段开始 DayOfWeek 获取一周的开始日期。一周可以从星期日或星期一等开始。

```
//Ger start date based on a date and startdayofweek
GetStartDate(DateTime date, DayOfWeek periodStartDayOfWeek)
{
 // return startdateof week
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:59:07.930

那这个呢？

```
while (date.DayOfWeek != periodStartDayOfWeek)
{
    date = date.AddDays(-1);
}

return date; 
```

# ios - FTP for iOS，如何从 FTP 协议下载？

> ID：14455716
> 
> 赞同：2
> 
> 时间：2013-01-22T09:54:22.563
> 
> 标签：ios, objective-c, xcode, ftp, download

我一直在使用 Apple 的 SampleFTP，但我无法理解该过程，我的意思是，在其他语言中很简单，只需设置 URL、路径、用户和密码，然后“导航”并将内容下载或上传到该路径……但我不知道'不明白如何在 iOS 中做......我没有任何 NSFtp 或任何东西......

编辑：从一开始我的#import "NetworkManager.h" 不起作用，错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:59:29.853

可以使用[https://github.com/erica/iphone-3.0-cookbook-/tree/master/C13-Networking/15-FTP%20Helper](https://github.com/erica/iphone-3.0-cookbook-/tree/master/C13-Networking/15-FTP%20Helper)

和

```
- (void) download
 {

  NSData *ftpData = [NSData dataWithContentsOfFile:[FTPHelper sharedInstance].filePath];
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:04:29.863

还有 Karelia [ConnectionKit](https://github.com/karelia/ConnectionKit)。自由。开源并正在积极开发中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:57:33.213

iOS 没有 FTP 内置库，但您可以找到自定义库，例如[http://code.google.com/p/ios-ftp-server/](http://code.google.com/p/ios-ftp-server/)或[http://www.chilkatsoft.com/ftp -objc.asp](http://www.chilkatsoft.com/ftp-objc.asp)

# uiwebview - uiwebview 随机崩溃

> ID：14455720
> 
> 赞同：2
> 
> 时间：2013-01-22T09:54:27.573
> 
> 标签：uiwebview, crash

当我单击网站中的链接时，uiwebview 出现随机崩溃。很难重现它。谁能给我一些建议，我将非常感激；这是崩溃日志：

```
0 WebCore 0x31398d92 WebCore::toDynamicFrame(JSC::ExecState*) (in WebCore) + 10
1 WebCore 0x31398d12 WebCore::ScriptController::processingUserGesture() (in WebCore) + 26
2 WebCore 0x3152f6fa WebCore::DOMWindow::allowPopUp(WebCore::Frame*) (in WebCore) + 10
3 WebCore 0x31555cc2 WebCore::FrameLoader::submitForm(WTF::PassRefPtr) (in WebCore) + 222
4 WebCore 0x31586fec WebCore::HTMLFormElement::submit(WebCore::Event*, bool, bool, WebCore::FormSubmissionTrigger) (in WebCore) + 272
5 WebCore 0x315874f0 WebCore::HTMLFormElement::prepareForSubmission(WebCore::Event*) (in WebCore) + 188
6 WebCore 0x3157ef72 WebCore::HTMLButtonElement::defaultEventHandler(WebCore::Event*) (in WebCore) + 58
7 WebCore 0x312401fc WebCore::EventDispatcher::dispatchEvent(WTF::PassRefPtr) (in WebCore) + 748
8 WebCore 0x3123fee6 WebCore::EventDispatchMediator::dispatchEvent(WebCore::EventDispatcher*) const (in WebCore) + 30
9 WebCore 0x3123feba WebCore::EventDispatcher::dispatchEvent(WebCore::Node*, WebCore::EventDispatchMediator const&) (in WebCore) + 98
10 WebCore 0x3123fe12 WebCore::Node::dispatchEvent(WTF::PassRefPtr) (in WebCore) + 34
11 WebCore 0x31240f82 WebCore::ScopedEventQueue::dispatchEvent(WTF::PassRefPtr) const (in WebCore) + 38
12 WebCore 0x31240f22 WebCore::ScopedEventQueue::enqueueEvent(WTF::PassRefPtr) (in WebCore) + 142
13 WebCore 0x31240e3e WebCore::EventDispatcher::dispatchScopedEvent(WebCore::Node*, WTF::PassRefPtr) (in WebCore) + 166
14 WebCore 0x31240c8e WebCore::Node::dispatchUIEvent(WTF::AtomicString const&, int, WTF::PassRefPtr) (in WebCore) + 178
15 WebCore 0x3124095c WebCore::Node::defaultEventHandler(WebCore::Event*) (in WebCore) + 112
16 WebCore 0x312401d4 WebCore::EventDispatcher::dispatchEvent(WTF::PassRefPtr) (in WebCore) + 708
17 WebCore 0x313c3902 WebCore::MouseEventDispatchMediator::dispatchEvent(WebCore::EventDispatcher*) const (in WebCore) + 150
18 WebCore 0x3123feba WebCore::EventDispatcher::dispatchEvent(WebCore::Node*, WebCore::EventDispatchMediator const&) (in WebCore) + 98
19 WebCore 0x313c343e WebCore::Node::dispatchMouseEvent(WebCore::PlatformMouseEvent const&, WTF::AtomicString const&, int, WebCore::Node*) (in WebCore) + 90
20 WebCore 0x313c2e32 WebCore::EventHandler::dispatchMouseEvent(WTF::AtomicString const&, WebCore::Node*, bool, int, WebCore::PlatformMouseEvent const&, bool) (in WebCore) + 66
21 WebCore 0x31541452 WebCore::EventHandler::handleMouseReleaseEvent(WebCore::PlatformMouseEvent const&) (in WebCore) + 750
22 WebCore 0x31542cbe WebCore::EventHandler::mouseUp(WebEvent*) (in WebCore) + 130
23 WebKit 0x376dd2b6 -[WebHTMLView mouseUp:] (in WebKit) + 106
24 WebCore 0x314203c2 -[WAKView _handleEvent:] (in WebCore) + 138
25 WebCore 0x31420332 eventCallback(WKView*, WebEvent*, void*) (in WebCore) + 26
26 WebCore 0x314202d8 _WKViewHandleEvent (in WebCore) + 28
27 WebCore 0x3142004e WKWindowSendEvent (in WebCore) + 242
28 WebCore 0x311d86e2 _WebThreadRun (in WebCore) + 378
29 WebCore 0x318b4ebe -[WAKWindow sendEvent:] (in WebCore) + 70
30 UIKit 0x30eb6c9e __47-[UIWebDocumentView(Interaction) performClick:]_block_invoke_0 (in UIKit) + 590
31 WebCore 0x311d86e2 _WebThreadRun (in WebCore) + 378
32 UIKit 0x30eb6a4a -[UIWebDocumentView(Interaction) performClick:] (in UIKit) + 62
33 UIKit 0x30eb6eda __64-[UIWebDocumentView(Interaction) _sendMouseMoveAndAttemptClick:]_block_invoke_0 (in UIKit) + 274
34 WebCore 0x312280b4 HandleRunSource (in WebCore) + 364
35 CoreFoundation 0x37e71ad2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ (in CoreFoundation) + 14
36 CoreFoundation 0x37e71334 __CFRunLoopDoSources0 (in CoreFoundation) + 364
37 CoreFoundation 0x37e70044 __CFRunLoopRun (in CoreFoundation) + 652
38 CoreFoundation 0x37df34a4 CFRunLoopRunSpecific (in CoreFoundation) + 300
39 CoreFoundation 0x37df336c CFRunLoopRunInMode (in CoreFoundation) + 104
40 WebCore 0x3127bca2 RunWebThread(void*) (in WebCore) + 402
41 libsystem_c.dylib 0x33050734 _pthread_start (in libsystem_c.dylib) + 320 
```

# javascript - 检查文本区域是否为空

> ID：14455728
> 
> 赞同：1
> 
> 时间：2013-01-22T09:55:06.153
> 
> 标签：javascript, html

谁能告诉我这段代码有什么问题：

```
function c(id)
{
    var empty = document.getElementById(id);
    if(empty.length<1)
    {
        window.alert ("This field cant be left empty");
        return true;
    }
    else
    {
        return false;
    }

} 
```

这是我的html代码：

```
<textarea rows="3" cols="80" id="ta1" onChange="c('ta1');"></textarea> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:56:50.423

应检查 textarea 的 value 属性以确定它是否为空。

```
 var content = document.getElementById(id).value;

   if(content.length<1)
   {
        window.alert ("This field cant be left empty");
        return true;
   }
   else
   {
        return false;
   } 
```

工作示例：http: [//jsfiddle.net/35DFR/2/](http://jsfiddle.net/35DFR/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:00:30.127

试试这个：

```
function c(id)
{
    if(document.getElementById(id).value == '')
    {
        window.alert ("This field cant be left empty");
        return true;
    }
    else
    {
        return false;
    }

} 
```

如果您想走得更远，您可能需要先修剪该值。

更新：

从评论中，尝试将“ **onchange** ”更改为“ **onkeyup** ”：

```
<textarea rows="3" cols="80" id="ta1" onkeyup="c('ta1');"></textarea> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:57:18.370

```
if (YOURFORM.YOURTEXTFIELDVARIABLENAME.value == "")

{
     return True

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:11:37.750

```
function c(id) {
    var empty =document.getElementById(id);
    if(!empty.value){
        window.alert("This field cant be left empty");
        return true;
    }else{
        return false;
    }
} 
```

试试这个

# c++ - Alphablending 未产生所需的图像

> ID：14455729
> 
> 赞同：0
> 
> 时间：2013-01-22T09:55:07.360
> 
> 标签：c++, opengl

我从两个相机（每个图像 8 位灰度）抓取图像，并将这些图像上传到纹理。然后我想绘制叠加的这些纹理，从一个图像中产生 50%，从另一张图像中产生 50%，但我不知道为什么它不会产生我需要的结果。

下面是我的 alpha 混合设置：

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);  // Alpha Blending 
```

要更新我的纹理：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_INTENSITY, g_Image[g_iCounter].GetCols(), g_Image[g_iCounter].GetRows(), 0, GL_RED, GL_UNSIGNED_BYTE, g_Image[g_iCounter].GetData()); 
```

`g_Image`是一个FlyCapture2 Image（Point Gray SDK），`GetCols() / GetRows()`返回图像的大小，`GetData()`原始数据指针。这很好用，如果我想并排显示图像，这正是我想要的。

我的绘图代码：

```
glBindTexture(GL_TEXTURE_2D, texture2);
        glBegin(GL_QUADS);
        // Front Face
        glTexCoord2f(left, bottom);     glVertex3f(-1.0f, -1.0f,  0.5f);
        glTexCoord2f(right, bottom);    glVertex3f( 0.0f, -1.0f,  0.5f);
        glTexCoord2f(right, top);       glVertex3f( 0.0f,  1.0f,  0.5f);
        glTexCoord2f(left, top);        glVertex3f(-1.0f,  1.0f,  0.5f);
        glEnd();

        if(interleaved)
        {
            top = 0.0f;
            bottom = 1.0f;
            left = 0.0f;
            right = 1.0f;

            glColor4f(1.0, 1.0, 1.0, 0.5);
            switch(flags1)
            {
                case 0: break;
                case 1: left = 1.0f; right = 0.0f; break;
                case 2: top = 1.0f; bottom = 0.0f; break;
                case 3: top = 1.0f; bottom = 0.0f; left = 1.0f; right = 0.0f; break;
                default: break;
            }
            glEnable(GL_BLEND);
            glBindTexture(GL_TEXTURE_2D, texture);
            glBegin(GL_QUADS);
            // Front Face
            glTexCoord2f(left, bottom);     glVertex3f(-1.0f, -1.0f,  0.5f);
            glTexCoord2f(right, bottom);    glVertex3f( 0.0f, -1.0f,  0.5f);
            glTexCoord2f(right, top);       glVertex3f( 0.0f,  1.0f,  0.5f);
            glTexCoord2f(left, top);        glVertex3f(-1.0f,  1.0f,  0.5f);
            glEnd();
            glDisable(GL_BLEND);
        }
    } 
```

虽然这总是会导致我看到两个图像，但绘制的第一张图像总是更容易看到，而且它不是 50/50 混合。我需要改变什么才能让它达到 50/50？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:06:24.700

不要将它们画在彼此之上。将第二个稍微靠近相机，仅靠胡须。`0.000001`应该有大约的差异。

# android - 应用未运行时未收到 GCM 通知

> ID：14455736
> 
> 赞同：0
> 
> 时间：2013-01-22T09:55:34.657
> 
> 标签：android, google-cloud-messaging

我已经实现了 GCM，它工作正常，除了一个问题。

如果应用程序在前台工作或后台通知由应用程序使用。但是，如果在应用程序被终止时收到通知。通知仅显示在顶部栏中。但是即使用户启动应用程序，应用程序也找不到它。

我注意到在重新启动设备后收到消息时，消息仅显示在消息中心，但应用程序找不到。Than，应用程序启动后，它开始接收消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:50:14.637

> 通知仅显示在顶部栏中。

你自己把那个放在`Notification`那里。GCM 不会单独显示 a `Notification`。

> 但是即使用户启动应用程序，应用程序也找不到它。

应用程序“找到”它以显示`Notification`.

# function - 如何在另一个返回一组 Refcursor 的函数中使用 postgresql 函数

> ID：14455737
> 
> 赞同：1
> 
> 时间：2013-01-22T09:55:34.040
> 
> 标签：function, postgresql, stored-procedures, ref-cursor

我的功能如下

> CREATE OR REPLACE FUNCTION get_history(refcursor, meetid integer, patientid integer) RETURNS SETOF refcursor
> 
> 开始
> 
> 结尾

如何在另一个函数中使用上述函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:30:20.940

为什么要回来`SETOF refcursor`？

也许你想要

```
 RETURNS TABLE( ...) 
```

或者

```
 RETURNS SETOF some_composite_type 
```

您像任何其他 SELECT 命令一样调用它..

```
SELECT * FROM get_history(...) 
```

并且可以在 plpgsql LOOP 中使用它：

```
FOR my_row_var IN
    SELECT * FROM get_history(...)
LOOP
  -- do stuff
END LOOP; 
```

要不就

```
 RETURNS refcursor 
```

[在此处的手册中有一个详细的示例如何处理此问题。](http://www.postgresql.org/docs/current/interactive/plpgsql-cursors.html#AEN57060)

甚至包括`RETURNS SETOF refcursor`.

# javascript - 无法在 apache tomcat 6 上运行 three.js 示例

> ID：14455738
> 
> 赞同：0
> 
> 时间：2013-01-22T09:55:36.003
> 
> 标签：javascript, json, 3d, three.js, webgl

我正在使用 eclipse 开发一个 web 应用程序。我想运行我自己的由 SketchUp 制作的 3D 模型并遇到了这个问题：[http](http://stemkoski.github.com/Three.js/Model.html) ://stemkoski.github.com/Three.js/Model.html和 [http://dev.opera.com/articles/view/porting- 3d-graphics-to-the-web-webgl-intro-part-2/](http://dev.opera.com/articles/view/porting-3d-graphics-to-the-web-webgl-intro-part-2/) 。这些模型在我的 Chrome 浏览器版本 24.0.1312.52 上运行良好。但是，当我尝试在我的 apache tomcat 6.0 上本地部署它们时，它根本不会出现。我已确保对three.js 和android.js 等文件的引用是正确的。某处是否有服务器配置？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:36:42.750

当您通过 Eclipse 在 Tomcat 上进行部署时，有时战争中的资源不会部署到目标文件夹。检查`three.js`文件是否实际被复制到那里。您可以在项目属性中查看项目的部署位置。

# python - 在具有整数索引的已排序熊猫系列中按位置访问值

> ID：14455746
> 
> 赞同：4
> 
> 时间：2013-01-22T09:55:52.683
> 
> 标签：python, pandas, series

我有一个带有整数索引的熊猫系列，我已经排序（按值），我如何在这个系列中**按位置访问值。**

例如：

```
s_original = pd.Series({0: -0.000213, 1: 0.00031399999999999999, 2: -0.00024899999999999998, 3: -2.6999999999999999e-05, 4: 0.000122})
s_sorted = np.sort(s_original)

In [3]: s_original
Out[3]: 
0   -0.000213
1    0.000314
2   -0.000249
3   -0.000027
4    0.000122

In [4]: s_sorted
Out[4]: 
2   -0.000249
0   -0.000213
3   -0.000027
4    0.000122
1    0.000314

In [5]: s_sorted[3]
Out[5]: -2.6999999999999999e-05 
```

但我想获得 0.000122 的值，即**位置**3中的项目。
我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T10:00:06.847

换行

```
b = np.sort(a) 
```

和

```
b = pd.Series(np.sort(a), index=a.index) 
```

这将对值进行排序，但保留索引。

**编辑：**

要获得已排序系列中的第四个值：

```
np.sort(a).values[3] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T19:38:47.873

您可以使用[`iget`](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#api-changes-to-integer-indexing)按位置检索：（
*实际上，此方法是专门为克服这种歧义而创建的。）*

```
In [1]: s = pd.Series([0, 2, 1])

In [2]: s.sort()

In [3]: s
Out[3]: 
0    0
2    1
1    2

In [4]: s.iget(1)
Out[4]: 1 
```

.

[在pandas “gotchas”](http://pandas.pydata.org/pandas-docs/dev/gotchas.html#integer-indexing)`.ix`中记录了整数索引的行为：

> 在 pandas 中，我们的一般观点是**标签比整数位置更重要**。因此，对于整数轴索引，使用标准工具（如`.ix`.
> 
> 这个深思熟虑的决定是为了防止歧义和微妙的错误（许多用户报告在 API 更改以停止“退回”基于位置的索引时发现错误）。

### 注意：如果您使用的是非整数索引，这*将*`.ix`起作用，其中不是模棱两可的。

例如：

```
In [11]: s1 = pd.Series([0, 2, 1], list('abc'))

In [12]: s1
Out[12]: 
a    0
b    2
c    1

In [13]: s1.sort()

In [14]: s1
Out[14]: 
a    0
c    1
b    2

In [15]: s1.ix[1]
Out[15]: 1 
```

# java - 搜索超过 1 个视图的 Java MVC 教程

> ID：14455753
> 
> 赞同：0
> 
> 时间：2013-01-22T09:56:23.887
> 
> 标签：java, model-view-controller, view, model, controller

您好，我正在寻找一个包含 1 个以上视图的 Java MVC 教程。这样当用户点击一个按钮时，就会有一个导航到不同的视图。

Java with MVC for 1 View 对我来说非常清楚，但我不知道如何进行导航。

提前谢谢你，尼克拉斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:24:49.880

你可以看看这个教程：

[http://www.roseindia.net/tutorial/java/jdbc/javamvcdesignpattern.html](http://www.roseindia.net/tutorial/java/jdbc/javamvcdesignpattern.html)

在本教程中，控制器创建了一个新视图。在导航的情况下，您必须在视图中实现方法“updateMainPanel”以显示其他视图的新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T21:54:20.780

我刚刚创建了一个“根”控制器 + JFrame，它包含实际的 View(JPanel) + Controller。如果我想导航，我将从实际控制器调用我的根控制器上的一个方法，他正在更改视图+所有其他内容。

每个控制器都为一些操作（例如初始化视图）实现了一个控制器接口。

```
RootController knows JFrame
RootController + Controller1 know each other
Controller1 knows View1/Panel1 
```

# android - 无法让套接字编程在两部安卓手机上工作，端口转发或其他原因？

> ID：14455767
> 
> 赞同：0
> 
> 时间：2013-01-22T09:57:10.890
> 
> 标签：android, sockets, networking, wifi, router

我使用了[**这个**](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)网站上关于 Android 中套接字编程的代码。一部手机是，`client`而另一部充当`server`。我准确地复制/粘贴了代码，并将`server`代码放在一部手机上，另一部手机`client`上。两部手机都连接*到同一个wifi路由器*。

但是，我什至无法从客户端向服务器电话发送简单的消息。我得到`timeouts`和错误`java.net.ConnectException: failed to connect to /10.0.2.15 (port 8080): connect failed: EHOSTUNREACH (No route to host)`

我读到其他一些人已成功使用此代码。这就是为什么我认为它与wifi连接有关。我尝试了另外两个路由器并遇到了同样的问题。我还尝试了设置`Port forwarding`（这是某些路由器上的设置，您告诉路由器您正在使用某个端口，例如 8080，您需要这样做才能使套接字编程工作）。但是，两个路由器都没有英语语言设置。所以我找不到`port forwarding`设置在哪里。如果需要让这个东西正常工作，我可以得到一个具有英语语言设置的新路由器。

我的问题是：您认为`port forewarding`设置很可能是问题所在，还是我忽略了其他问题？任何将我指向正确方向的想法将不胜感激。

这是完整的 Logcat 输出：

```
01-22 18:37:40.100: E/ClientActivity(19568): C: Error
01-22 18:37:40.100: E/ClientActivity(19568): java.net.ConnectException: failed to connect to /10.0.2.15 (port 8080): connect failed: EHOSTUNREACH (No route to host)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connect(IoBridge.java:114)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.Socket.startupSocket(Socket.java:566)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.Socket.<init>(Socket.java:225)
01-22 18:37:40.100: E/ClientActivity(19568):    at com.example.client.ClientActivity$ClientThread.run(ClientActivity.java:60)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.lang.Thread.run(Thread.java:856)
01-22 18:37:40.100: E/ClientActivity(19568): Caused by: libcore.io.ErrnoException: connect failed: EHOSTUNREACH (No route to host)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.Posix.connect(Native Method)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connect(IoBridge.java:112) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:20:59.737

那里的代码不能单独工作。您需要修改服务器和客户端上的 IP 地址以满足您的需要。尝试将当前服务器 IP 地址修改为本地地址 - “192.168.1.xxx”。在客户端中，您希望连接到与您作为服务器输入的 IP 地址相同的 IP 地址。无需更改路由器设置以进行端口转发。

# c# - MEF 无属性方法：按条件延迟初始化

> ID：14455768
> 
> 赞同：2
> 
> 时间：2013-01-22T09:57:14.940
> 
> 标签：c#, .net, mef

我之前的帖子包含尝试使用无属性（基于约定）的方法来配置 MEF：[MEF 2: import many](https://stackoverflow.com/questions/14376146/mef-2-import-many) .
但它包含在延迟初始化插件所需的类 PluginMetadataAttribute 中的导出元数据属性使用情况（特定名称、版本）。
如何摆脱 ExportAttribute 依赖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:18:26.080

我找到了三个解决方案。
解决方案1（使用类常量字段，较差的解决方案）：

```
public class Plugin1 : IPlugin
{
    public const string Name = "Plugin1";
    public const string Version = "1.0.0.0";

    public void Run()
    {
        Console.WriteLine("Plugin1 runed");
    }
}
// ...
var builder = new RegistrationBuilder();
builder
    .ForTypesDerivedFrom<IPlugin>()
    .Export<IPlugin>(exportBuilder => {
        exportBuilder.AddMetadata("Name", t => t.GetField("Name").GetRawConstantValue());
        exportBuilder.AddMetadata("Version", t => t.GetField("Version").GetRawConstantValue());
    }); 
```

解决方案2（使用类属性，较差的解决方案）：

```
public interface IPluginMetadata
{
    string Name { get; }
    string Version { get; }
}

public interface IPlugin : IPluginMetadata
{
    void Run();
}

public class Plugin1 : IPlugin
{
    public string Name { get { return "Plugin 1"; } }
    public string Version { get { return "1.0.0.0"; } }

    public void Run()
    {
        Console.WriteLine("Plugin1 runed");
    }
} 
```

并通过这样描述的方法获取属性值：[https ://stackoverflow.com/a/11162876/1986524](https://stackoverflow.com/a/11162876/1986524)

解决方案 3（使用属性，更好但并非全部满意）：

```
using System;
using System.ComponentModel.Composition.Hosting;
using System.ComponentModel.Composition.Registration;
using System.Reflection;

namespace MEF2
{
    public interface IPluginMetadata
    {
        string Name { get; }
        string Version { get; }
    }

    public interface IPlugin
    {
        void Run();
    }

    [AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
    public class PluginMetadataAttribute : Attribute, IPluginMetadata
    {
        public string Name { get; set; }
        public string Version { get; set; }

        public PluginMetadataAttribute(string name, string version)
        {
            Name = name;
            Version = version;
        }
    }

    [PluginMetadata("Plugin1", "1.0.0.0")]
    public class Plugin1 : IPlugin
    {
        public void Run()
        {
            Console.WriteLine("Plugin1 runed");
        }
    }

    [PluginMetadata("Plugin2", "2.0.0.0")]
    public class Plugin2 : IPlugin
    {
        public void Run()
        {
            Console.WriteLine("Plugin2 runed");
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var builder = new RegistrationBuilder();
            builder
                .ForTypesDerivedFrom<IPlugin>()
                .Export<IPlugin>(exportBuilder => {
                    exportBuilder.AddMetadata("Name", t => t.GetCustomAttribute<PluginMetadataAttribute>().Name);
                    exportBuilder.AddMetadata("Version", t => t.GetCustomAttribute<PluginMetadataAttribute>().Version);
                });

            var catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly(), builder);

            using (var container = new CompositionContainer(catalog, CompositionOptions.DisableSilentRejection)) {
                var plugins = container.GetExports<IPlugin, IPluginMetadata>();

                foreach (var plugin in plugins) {
                    Console.WriteLine("{0}, {1}", plugin.Metadata.Name, plugin.Metadata.Version);
                    plugin.Value.Run();
                }
            }
        }
    }
} 
```

解决方案 3 包含此代码中的问题：

```
.Export<IPlugin>(exportBuilder => {
    exportBuilder.AddMetadata("Name", t => t.GetCustomAttribute<PluginMetadataAttribute>().Name);
    exportBuilder.AddMetadata("Version", t => t.GetCustomAttribute<PluginMetadataAttribute>().Version);
}) 
```

问题：

1.  在缺少元数据的情况下无法取消添加元数据
2.  重复代码`t.GetCustomAttribute<PluginMetadataAttribute>()`
3.  `Export<>`不提供过滤器

如果有人知道其他解决方案，请写信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T21:26:11.267

[您在其他问题中引用的配置 MEF](http://msdn.microsoft.com/en-us/magazine/jj133818.aspx)的无属性方法文章包括一个关于如何在不使用属性的情况下添加元数据的示例。

该示例显示了[PartBuilder.ExportProperties](http://msdn.microsoft.com/en-us/library/hh551507.aspx)重载的使用，该重载将 a`Action<PropertyInfo, ExportBuilder>`作为参数并使用其中一个`ExportBuilder.AddMetadata`重载来为特定导出添加元数据。

这不是添加元数据的唯一方法。[PartBuilder](http://msdn.microsoft.com/en-us/library/hh192339.aspx)的所有导出方法都有一个`Action<>`带有 ExportBuilder 参数的（或 Action<,>）的重载。您可以使用这些重载并以类似的方式添加元数据。

# node.js - 如何使用 node js 管理串联函数调用

> ID：14455771
> 
> 赞同：1
> 
> 时间：2013-01-22T09:57:28.283
> 
> 标签：node.js

即使函数被称为并行，我也使用了 step，执行应该是串行的，请告诉我哪里出错了。

```
 //sample code
   var step=require('step')
   step(
   function first()
   {
   process();//calling function here
   return this; returning this to next function
   },
   function second()
   {
   process2();//calling another fun here
   return this;
   },
   function third()
   {
   process3();//calling function here
   return this; returning this to next function
   } 
   );//step end here 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:00:41.097

```
var sync =require('async');
sync.series([
function(callback){
console.log("calling one");
callback(null, 'one');
},
function(callback){
console.log('two');
callback(null, 'two');
},
]); 
```

你好，

您必须同步这些功能。这里的步骤不适用于递归函数。

试试这个，跳你会得到你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:25:55.693

请通过链接：

视频： http: [//nodetuts.com/02-callback-pattern.html](http://nodetuts.com/02-callback-pattern.html)

文字： http: [//nodetuts.com/02-callback-pattern.html#-1](http://nodetuts.com/02-callback-pattern.html#-1)

这可能会帮助你..

# objective-c - 如何以编程方式从 NSCustom 视图中删除 NSButton？

> ID：14455777
> 
> 赞同：0
> 
> 时间：2013-01-22T09:57:35.360
> 
> 标签：objective-c, cocoa

如何以编程方式从 Customview 中删除 NSButton？我使用了下面的方法，但是没有用。

[按钮 removeFromSuperview];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:02:16.193

```
[YourButton removeFromSuperview]; 
```

**或者**

尝试

```
[YourButton setHidden:YES]; 
```

这可能会解决您的问题:)

# events - 使用向上和向下键时，如何在 GWT CellTable 中获取选定的行？

> ID：14455780
> 
> 赞同：2
> 
> 时间：2013-01-22T09:57:52.960
> 
> 标签：events, gwt, keydown, keyup, gwt-celltable

当用户向上或向下按下键时，我想在 GWT CellTable 中获取选定的行。在我的示例中，我有一个包含三列（ID、名称、日期）的表，并且我已经实现了处理点击事件的代码。单击一行时，我得到选定的对象。现在我想在使用向上和向下箭头键移动表格的行时做同样的事情。

这是我的代码：

```
 // Create id column.
    TextColumn<MyObject> idColumn = new TextColumn<MyObject>() 
    {
        @Override
        public String getValue(MyObject obj) 
        {
            return String.valueOf(obj.getId());
        }
    };
    // Create name column.
    TextColumn<MyObject> nameColumn = new TextColumn<MyObject>()
    {
        @Override
        public String getValue(MyObject obj) 
        {
            return obj.getName();
        }
    };
    // Create date column.
    TextColumn<MyObject> dateColumn = new TextColumn<MyObject>() 
    {
        @Override
        public String getValue(MyObject obj) 
        {
            return String.valueOf(obj.getDate());
        }
    };  

    // Create the CellTable element and add columns
    CellTable<MyObject> table = new CellTable<MyObject>();
    table.addColumn(idColumn, "ID");
    table.addColumn(nameColumn, "Name");
    table.addColumn(dateColumn, "Date");

    // Create the selectioModel and the SelectionChangeEvent Handler
    NoSelectionModel<MyObject> selectionModelMyObj = new NoSelectionModel<MyObject>();
    Handler tableHandler = new SelectionChangeEvent.Handler() 
    {
        @Override
        public void onSelectionChange(SelectionChangeEvent event) 
        {
            MyObject clickedObj = selectionModelMyObj.getLastSelectedObject();
            Window.alert("Object selected: " + clickedObj);
        }
    };
    // Add the handler to the selection model
    selectionModelMyObj.addSelectionChangeHandler( tableHandler );
    // Add the selection model to the table
    table.setSelectionModel(selectionModelMyObj); 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:39:01.750

默认情况下，a 中的键盘导航`CellTable`仅更新[*键盘选择的行*](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#getKeyboardSelectedRow%28%29)。只有按*回车*键，该行才会被*选中*。

如果您希望选择跟随*键盘选择*，您可以将[*键盘选择策略*](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#setKeyboardSelectionPolicy%28com.google.gwt.user.cellview.client.HasKeyboardSelectionPolicy.KeyboardSelectionPolicy%29)设置为[*绑定到选择*](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/HasKeyboardSelectionPolicy.KeyboardSelectionPolicy.html#BOUND_TO_SELECTION)。我不确定它如何与 a 一起工作，`NoSelectionModel`但可能会更好地与 a 一起工作`SingleSelectionModel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:36:11.570

您需要了解 GWT 小部件和 celltable 的键盘选择策略。

正确的方法是只允许使用键 "UP" 和 "Down" 进行行导航，使用键 "Left" 和 "Right" 进行单元格导航。行的选择只能在单击“空格”或“回车”键时进行。

***所有这些都已随 GWT 单元表提供。***您可以查看源代码和演示[http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTable](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T14:15:02.403

您可以使用**getKeyboardSelectedRow()**方法获取 CellTable 的行。这将返回通过键盘或鼠标选择的行的 int 索引。

**CellTable 的 GWT Javadoc：http:** [//www.gwtproject.org/javadoc/latest/](http://www.gwtproject.org/javadoc/latest/)

公共 int getKeyboardSelectedRow()

获取当前通过键盘选择的行的索引，相对于页面起始索引。

这与 SelectionModel 中的选定行不同。键盘选择的行是指用户通过键盘或鼠标导航到的行。

返回： 当前选择的行，如果没有选择，则返回 -1

# cassandra - Cassandra 1.2 迁移：损坏的管道

> ID：14455785
> 
> 赞同：3
> 
> 时间：2013-01-22T09:58:13.767
> 
> 标签：cassandra

我们将集群迁移到 Cassandra 1.2（从 1.1.7），并尝试在迁移后运行修复（我们定期运行它们，如建议的那样）。

由于SSTable版本不同导致修复失败，所以我们使用并重`nodetool upgradesstables`试`nodetool scrub`。

但随后修复失败，出现此异常：

```
java.io.IOException: Broken pipe
    at com.google.common.base.Throwables.propagate(Throwables.java:160)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:32)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: Broken pipe
    at sun.nio.ch.FileChannelImpl.transferTo0(Native Method)
    at sun.nio.ch.FileChannelImpl.transferToDirectly(Unknown Source)
    at sun.nio.ch.FileChannelImpl.transferTo(Unknown Source)
    at org.apache.cassandra.streaming.compress.CompressedFileStreamTask.stream(CompressedFileStreamTask.java:90)
    at org.apache.cassandra.streaming.FileStreamTask.runMayThrow(FileStreamTask.java:91)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) 
```

我们还注意到，在死亡之前，会`nodetool netstats`显示奇怪的统计数据（SSTable 传输率为 756845%...）。

**编辑**

compressend SSTables 的传输似乎有问题，我将尝试禁用此 ColumnFamily 上的压缩并重试。

**重新编辑**

禁用压缩解决了这个问题，所以我们尝试重新启用它并得到一个

```
java.lang.RuntimeException:
  Last written key DecoratedKey(97115[...]3136) >= current key DecoratedKey(8... 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:17:58.240

该问题是由 Cassandra 1.2 中的一个错误引起的，该错误影响了节点之间压缩列族的传输。它已在 1.2.2 => [Jira 条目中修复此错误](https://issues.apache.org/jira/browse/CASSANDRA-5105)。

# android - FFmpeg 测试演示中的 java.lang.ExceptionInInitializerError

> ID：14455788
> 
> 赞同：4
> 
> 时间：2013-01-22T09:58:21.100
> 
> 标签：android, video, ffmpeg

我有一个名为 FFMpegTest of Android 的演示，我从这里下载.. [https://github.com/appunite/AndroidFFmpeg](https://github.com/appunite/AndroidFFmpeg) ..我还有这个演示中的 FFMpeg 库文件，我在 FFmpegTest 中使用这个库。 .现在当我运行时..它给出了java.lang.ExceptionInInitializerError ..任何人对此有任何想法..请与我分享..提前感谢..

这是在... VideoActivity.java

```
public class VideoActivity extends Activity implements OnClickListener,FFmpegListener, OnSeekBarChangeListener, OnItemSelectedListener 
{
    private FFmpegPlayer mpegPlayer;
    private static boolean isSurfaceView = true;
    protected boolean mPlay = false;
    private View controlsView;
    private View loadingView;
    private SeekBar seekBar;
    public View videoView;
    private Button playPauseButton;
    private boolean mTracking = false;
    private View streamsView;
    private Spinner languageSpinner;
    private int languageSpinnerSelectedPosition = 0;
    private Spinner subtitleSpinner;
    private int subtitleSpinnerSelectedPosition = 0;
    private StreamAdapter languageAdapter;
    private StreamAdapter subtitleAdapter;

    private FFmpegStreamInfo audioStream = null;
    private FFmpegStreamInfo subtitleStream = null;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        this.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFormat(PixelFormat.RGB_565);
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DITHER);

        super.onCreate(savedInstanceState);

        this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        this.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        this.getWindow().setBackgroundDrawable(null);

        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        if (isSurfaceView)
            VideoActivity.this.setContentView(R.layout.video_surfaceview);
        else
            VideoActivity.this.setContentView(R.layout.video_view);

        seekBar = (SeekBar) this.findViewById(R.id.seek_bar);
        seekBar.setOnSeekBarChangeListener(this);

        playPauseButton = (Button) this.findViewById(R.id.play_pause);
        playPauseButton.setOnClickListener(this);

        controlsView = this.findViewById(R.id.controls);
        streamsView = this.findViewById(R.id.streams);
        loadingView = this.findViewById(R.id.loading_view);
        languageSpinner = (Spinner) this.findViewById(R.id.language_spinner);
        subtitleSpinner = (Spinner) this.findViewById(R.id.subtitle_spinner);

        languageAdapter = new StreamAdapter(this,android.R.layout.simple_spinner_item,new ArrayList<FFmpegStreamInfo>(), StreamAdapterType.AUDIO);
        languageAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        languageSpinner.setAdapter(languageAdapter);
        languageSpinner.setOnItemSelectedListener(this);

        subtitleAdapter = new StreamAdapter(this,android.R.layout.simple_spinner_item,new ArrayList<FFmpegStreamInfo>(), StreamAdapterType.SUBTITLE);
        subtitleAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        subtitleSpinner.setAdapter(subtitleAdapter);
        subtitleSpinner.setOnItemSelectedListener(this);

        try
        {
            videoView = this.findViewById(R.id.video_view);
            //VideoActivity.this.mpegPlayer = new FFmpegPlayer((FFmpegDisplay)videoView, VideoActivity.this);
            this.mpegPlayer = new FFmpegPlayer((FFmpegDisplay)videoView, this);
            this.mpegPlayer.setMpegListener(this);
            setDataSource();

            //Too
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    private static enum StreamAdapterType
    {
        AUDIO, SUBTITLE
    };

    private static class StreamAdapter extends ArrayAdapter<FFmpegStreamInfo>
    {

        private final StreamAdapterType adapterType;

        public StreamAdapter(Context context, int textViewResourceId,List<FFmpegStreamInfo> objects, StreamAdapterType adapterType)
        {
            super(context, textViewResourceId, objects);
            this.adapterType = adapterType;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            TextView view = (TextView) super.getView(position, convertView, parent);

            FFmpegStreamInfo item = getItem(position);
            Locale locale = item.getLanguage();

            String formatter;
            if (StreamAdapterType.AUDIO.equals(adapterType))
            {
                formatter = getContext().getString(R.string.language_spinner_drop_down);
            }
            else
            {
                formatter = getContext().getString(R.string.subtitle_spinner_drop_down);
            }
            String languageName = locale == null ? getContext().getString(R.string.unknown) : locale.getDisplayLanguage();
            String text = String.format(formatter, languageName);
            view.setText(text);
            return view;
        }

        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent) 
        {
            CheckedTextView view = (CheckedTextView) super.getDropDownView(position, convertView, parent);
            FFmpegStreamInfo item = getItem(position);
            Locale locale = item.getLanguage();
            String languageName = locale == null ? getContext().getString(R.string.unknown) : locale.getDisplayLanguage();
            view.setText(languageName);
            return view;
        }

    }

    @Override
    protected void onPause() {
        super.onPause();
    };

    @Override
    protected void onResume() {
        super.onResume();
    }

    @Override
    protected void onDestroy()
    {
        super.onDestroy();
        this.mpegPlayer.setMpegListener(null);
        this.mpegPlayer.stop();
        stop();
    }

    private void setDataSource() 
    {
        Log.d("url", "checin");
        HashMap<String, String> params = new HashMap<String, String>();

        // set font for ass
        File assFont = new File(Environment.getExternalStorageDirectory(),"Roboto.ttf");
        params.put("ass_default_font_path", assFont.getAbsolutePath());

        Intent intent = getIntent();
        String url = intent.getStringExtra(AppConstants.VIDEO_PLAY_ACTION_EXTRA_URL);
        Log.d("url", url);
        if (url == null) 
        {
            throw new IllegalArgumentException(String.format("\"%s\" did not provided", AppConstants.VIDEO_PLAY_ACTION_EXTRA_URL));
        }
        if (intent.hasExtra(AppConstants.VIDEO_PLAY_ACTION_EXTRA_ENCRYPTION_KEY)) 
        {
            params.put("aeskey", intent.getStringExtra(AppConstants.VIDEO_PLAY_ACTION_EXTRA_ENCRYPTION_KEY));
        }

        this.playPauseButton.setBackgroundResource(android.R.drawable.ic_media_play);
        this.playPauseButton.setEnabled(true);
        mPlay = false;

        mpegPlayer.setDataSource(url, params, null, audioStream,subtitleStream);
    }

    @Override
    public void onClick(View v) 
    {
        int viewId = v.getId();
        switch (viewId)
        {
            case R.id.play_pause:
            resumePause();
            return;

            default:
            throw new RuntimeException();
        }
    }

    @Override
    public void onFFUpdateTime(int currentTimeS, int videoDurationS, boolean isFinished)
    {
        if (!mTracking)
        {
            seekBar.setMax(videoDurationS);
            seekBar.setProgress(currentTimeS);
        }

        if (isFinished) 
        {
            new AlertDialog.Builder(this)
                    .setTitle(R.string.dialog_end_of_video_title)
                    .setMessage(R.string.dialog_end_of_video_message)
                    .setCancelable(true).show();
        }
    }

    @Override
    public void onFFDataSourceLoaded(FFmpegError err, FFmpegStreamInfo[] streams) 
    {
        if (err != null) {
            String format = getResources().getString(
                    R.string.main_could_not_open_stream);
            String message = String.format(format, err.getMessage());

            Builder builder = new AlertDialog.Builder(VideoActivity.this);
            builder.setTitle(R.string.app_name)
                    .setMessage(message)
                    .setOnCancelListener(
                            new DialogInterface.OnCancelListener() {

                                @Override
                                public void onCancel(DialogInterface dialog) {
                                    VideoActivity.this.finish();
                                }
                            }).show();
            return;
        }
        playPauseButton.setBackgroundResource(android.R.drawable.ic_media_play);
        playPauseButton.setEnabled(true);
        this.controlsView.setVisibility(View.VISIBLE);
        this.streamsView.setVisibility(View.VISIBLE);
        this.loadingView.setVisibility(View.GONE);
        this.videoView.setVisibility(View.VISIBLE);
        languageAdapter.clear();
        subtitleAdapter.clear();
        for (FFmpegStreamInfo streamInfo : streams) {
            CodecType mediaType = streamInfo.getMediaType();
            if (FFmpegStreamInfo.CodecType.AUDIO.equals(mediaType)) {
                languageAdapter.add(streamInfo);
            } else if (FFmpegStreamInfo.CodecType.SUBTITLE.equals(mediaType)) {
                subtitleAdapter.add(streamInfo);
            }
        }
    }

    private void displaySystemMenu(boolean visible) {
        if (Build.VERSION.SDK_INT >= 14) {
            displaySystemMenu14(visible);
        } else if (Build.VERSION.SDK_INT >= 11) {
            displaySystemMenu11(visible);
        }
    }

    @SuppressWarnings("deprecation")
    @TargetApi(11)
    private void displaySystemMenu11(boolean visible) {
        if (visible) {
            this.videoView.setSystemUiVisibility(View.STATUS_BAR_VISIBLE);
        } else {
            this.videoView.setSystemUiVisibility(View.STATUS_BAR_HIDDEN);
        }
    }

    @TargetApi(14)
    private void displaySystemMenu14(boolean visible) {
        if (visible) {
            this.videoView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE);
        } else {
            this.videoView
                    .setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
        }
    }

    public void resumePause() {
        this.playPauseButton.setEnabled(false);
        if (mPlay) {
            mpegPlayer.pause();
        } else {
            mpegPlayer.resume();
            displaySystemMenu(true);
        }
        mPlay = !mPlay;
    }

    @Override
    public void onFFResume(NotPlayingException result) {
        this.playPauseButton
                .setBackgroundResource(android.R.drawable.ic_media_pause);
        this.playPauseButton.setEnabled(true);

        displaySystemMenu(false);
        mPlay = true;
    }

    @Override
    public void onFFPause(NotPlayingException err) {
        this.playPauseButton
                .setBackgroundResource(android.R.drawable.ic_media_play);
        this.playPauseButton.setEnabled(true);
        mPlay = false;
    }

    private void stop() {
        this.controlsView.setVisibility(View.GONE);
        this.streamsView.setVisibility(View.GONE);
        this.loadingView.setVisibility(View.VISIBLE);
        this.videoView.setVisibility(View.INVISIBLE);
    }

    @Override
    public void onFFStop() {
    }

    @Override
    public void onFFSeeked(NotPlayingException result) 
    {
//      if (result != null)
//          throw new RuntimeException(result);
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) 
    {
        if (fromUser) 
        {
            mpegPlayer.seek(progress);
        }
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        mTracking = true;
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        mTracking = false;
    }

    private void setDataSourceAndResumeState() {
        int progress = seekBar.getProgress();
        setDataSource();
        mpegPlayer.seek(progress);
        mpegPlayer.resume();
    }

    @Override
    public void onItemSelected(AdapterView<?> parentView,
            View selectedItemView, int position, long id) {
        FFmpegStreamInfo streamInfo = (FFmpegStreamInfo) parentView
                .getItemAtPosition(position);
        if (parentView == languageSpinner) {
            if (languageSpinnerSelectedPosition != position) {
                languageSpinnerSelectedPosition = position;
                audioStream = streamInfo;
                setDataSourceAndResumeState();
            }
        } else if (parentView == subtitleSpinner) {
            if (subtitleSpinnerSelectedPosition != position) {
                subtitleSpinnerSelectedPosition = position;
                subtitleStream = streamInfo;
                setDataSourceAndResumeState();
            }
        } else {
            throw new RuntimeException();
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> parentView) {
        // if (parentView == languageSpinner) {
        // audioStream = null;
        // } else if (parentView == subtitleSpinner) {
        // subtitleStream = null;
        // } else {
        // throw new RuntimeException();
        // }
        // play();
    }

} 
```

这是我的日志：

```
01-22 15:29:15.302: E/AndroidRuntime(1560): FATAL EXCEPTION: main
01-22 15:29:15.302: E/AndroidRuntime(1560): java.lang.ExceptionInInitializerError
01-22 15:29:15.302: E/AndroidRuntime(1560):     at java.lang.Class.newInstanceImpl(Native Method)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at java.lang.Class.newInstance(Class.java:1319)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.os.Looper.loop(Looper.java:137)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at dalvik.system.NativeStart.main(Native Method)
01-22 15:29:15.302: E/AndroidRuntime(1560): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load ffmpeg: findLibrary returned null
01-22 15:29:15.302: E/AndroidRuntime(1560):     at java.lang.Runtime.loadLibrary(Runtime.java:365)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at java.lang.System.loadLibrary(System.java:535)
01-22 15:29:15.302: E/AndroidRuntime(1560):     at roman10.ffmpegTest.VideoBrowser.<clinit>(VideoBrowser.java:37)
01-22 15:29:15.302: E/AndroidRuntime(1560):     ... 15 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T03:26:20.447

上述错误导致 FFmpegPlayer 类。System.loadLibrary() 找不到本机库。您应该检查库路径。需要区分 System.loadLibrary() 和 System.load()。

# c# - 如何在实体框架中参数化 Linq 查询或 Lambda 查询？

> ID：14455789
> 
> 赞同：1
> 
> 时间：2013-01-22T09:58:26.777
> 
> 标签：c#, linq, entity-framework

我写了一些参数化 Lambda 查询

```
 //Method 1:
        Func<SalesOrderLineEntity, bool> func01 = (o => o.SOLNumber == "123456");
        var q01 = _context.SalesOrderLineEntities.Where(func01).ToList();
        //Got the result, but SQLServer Read All Records to memory before "where"

        //Method 2:
        Expression<Func<SalesOrderLineEntity, bool>> exp02 = (o => o.SOLNumber == "123456");
        var q02 = _context.SalesOrderLineEntities.Where(exp02).ToList();
        //Got the result,Exec "Where" in SQLServer

        //Method 3:
        Expression<Func<SalesOrderLineEntity, bool>> exp03 = (o => func01(o));
        var q03 = _context.SalesOrderLineEntities.Where(exp03.Compile()).ToList();
        //Same to Method 1,because Compile() result is Func<SalesOrderLineEntity, bool>

        //Method 4:
        var q04 = _context.SalesOrderLineEntities.Where(exp03).ToList();
        //Error:The LINQ expression node type 'Invoke' is not supported in LINQ to Entities 
```

**方法一和三**：效率很低 **方法四**：错误

**方法二**：需要我通过 Lambda 构建一个表达式。我觉得这很困难，因为我会使用很多“if,else”。创建一个函数更容易。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:35:07.423

### 变化

**方法 1**：EF 读取数据库中的所有记录，因为您将 a 传递`Func`到`Where`子句中，这不是正确的候选者：EF 无法从中提取所需的信息来构建查询，它只能在内存中使用该函数收藏。

**方法 2**：这是执行 EF 查询的正确方法，因为 EF 基于`Expression tree`. 当您编写时，它可能看起来与方法 1 相同，`.Where`但这是不同的。

[IQueryable](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)扩展方法使用[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)，因此您可以（或 EF 可以）在运行时评估该信息。

**方法 3**：这与方法 1 基本相同，因为您编译表达式。这是您使用它们时的关键区别：表达式包含构建实际操作的信息，但这不是操作本身。您需要先编译它（或者例如，您可以基于它们构建 SQL 查询，这就是 EF 的工作方式）。

**方法 4**：EF 无法将您的`func01()`调用转换为任何 SQL 函数。它不能翻译任何类型的代码，因为它需要等效的 SQL 操作。您可以尝试使用通用方法，您会得到相同的结果，这与 Func 无关。

### 这里会发生什么？

如果我们简化底层过程，那么上面的答案可能会更清楚。

```
//Method 2:
Expression<Func<SalesOrderLineEntity, bool>> exp02 = (o => o.SOLNumber == "123456");
var q02 = _context.SalesOrderLineEntities.Where(exp02).ToList();
//Got the result,Exec "Where" in SQLServer 
```

EF 可以读取以下内容（通过表达式）：

*   用户想要过滤`Where`
*   这是一个表达式，让我们获取一些信息
*   好吧，它需要`SalesOrderLineEntity`并且我有该类型的映射
*   该表达式告诉该属性`SOLNumber`必须等于“123456”
*   好的，我有一个映射，`SOLNumber`所以很好
*   我可以将等号运算符转换为等效的 SQL 运算符
*   一切正常，所以我们可以构建 SQL 查询

当然，你不能用一个`Func`例子来做这个，因为那个对象不包含这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T17:00:18.093

Not sure if this is applicable but have you look at compiled queries: [Compiled Queries (LINQ to Entities)](http://msdn.microsoft.com/en-us/library/vstudio/bb896297(v=vs.100).aspx) which should result in a more efficient SQL statement

# php - json中按日期列每周标题

> ID：14455791
> 
> 赞同：2
> 
> 时间：2013-01-22T09:58:33.253
> 
> 标签：php, javascript, jquery, mysql, json

对笨拙的问题感到抱歉，我不确定这是否可行，我使用 json 从 Mysql db 中正确读取数据并将它们显示到数据库中不是表的元素中我有一些约会日期将按周显示给客户组并有下一个链接到其他周。有一些代码，我很抱歉很多。这是html代码：

```
<div class="timesviewport">
    <div class="selector">
        <div class="title-collection" style="">
           <!--time add here-->
        </div>
        <div class="selector-header">
            <div class="header-title-collection" style="">
              <!--date add here--> 
            </div>
            <div class="control">
                <div class="prevlink">
                   <div class="nextprevloading"></div>
                       <a class="prevweeklink" href="#" rel="nofollow">before</a>
                </div>
                <div class="nextlink">
                   <div class="nextprevloading"></div>
                       <a class="nextweeklink" href="#" rel="nofollow" data-test="search-next-week-link">next</a>
                </div>
            </div>
        </div>                                    
    </div>
</div> 
```

这是javascript

```
function getresDetails(id)
{
    var new_res_date = '' ;
    var new_res_time = '' ;

    new_res_time += '<div class="title"><div class="title-row-collection">';

    daily = ["Saturday", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
    j=0;

    var id_val = id.value;
    var url = "table.php?id="+id_val;

    $.getJSON(url, function(json) {
        new_res_date +='<div class="header-title"><div class="header-title-date-collection" id="adddate">';
        new_res_time += '<div class="title-row"><div class="title-row-date-collection">' ;

        $.each(json, function(i, value) {
            if(i==0)
            {
                new_res_date += '<div class="header-title-date"><div class="header-title-date-name">'+daily[j%7]+ '</div><div class="header-title-date-value">'+json[i].res_date+ '</div></div>';
                new_res_time +=  '<div class="title-row-date"><div class="appointment-collection"><div class="appointment-collection-first"><div><a class="appointment-time" href="#">'+json[i].res_time+'</a></div>' ;
                //alert("first :" +i);
                j++;
            }
            else if (i>0 && json[i-1].res_date==json[i].res_date)
            {
                new_res_time += '<div><a class="appointment-time" href="#">'+json[i].res_time+ '</a></div>';
                //alert("second :" +i);
            }
            else
            {
                new_res_date +=  '<div class="header-title-date"><div class="header-title-date-name">'+daily[j%7]+ '</div><div class="header-title-date-value">'+json[i].res_date+ '</div></div>';
                new_res_time +=  '</div></div></div><div class="title-row-date"><div class="appointment-collection"><div class="appointment-collection-first"><div><a class="appointment-time" href="#">'+json[i].res_time+ '</a></div>';
                //alert("third :" +i);
                j++;
            }
        });
        j=0;
        new_res_date += '</div></div>' ;
        new_res_time += '</div></div></div></div></div></div></div>' ;

        $(new_res_time).appendTo(".title-row-collection");
        $(new_res_date).appendTo(".header-title-collection");
    });
} 
```

和其他从数据库读取数据的页面在这里

`table.php`：

```
<?php

include 'configure.php';

$doc_id = $_GET["id"];

$qr = "SELECT `res_date`,`res_time` FROM `reserve_tbl` WHERE `doc_id` = '".$doc_id."'";

$res= mysql_query($qr);

$i=0;

while($row = mysql_fetch_array($res))
{
    $res_arr[$i]["res_date"] = $row["res_date"]; 
    $res_arr[$i]["res_time"] = $row["res_time"];
    $i++;
}

header('Content-type: application/json');
echo json_encode($res_arr);
?> 
```

和 `profinf.php`：

```
<?php

include 'configure.php';

$doc_id = $_GET["id"];

$qr = "SELECT * FROM `doc_tbl`  WHERE `doc_id`  = '".$doc_id."'";

$res= mysql_query($qr)  or die("Error: " . mysql_error() . "<br />In Query: " . $qr);;
$i=0;
while($row = mysql_fetch_array($res))
{
    $doc_arr[$i]["doc_name"] = $row["doc_name"];
    $doc_arr[$i]["doc_family"] = $row["doc_family"];
    $doc_arr[$i]["doc_grade"] = $row["doc_grade"];
    $doc_arr[$i]["doc_specialy"]= $row["doc_specialy"];
    $doc_arr[$i]["doc_adress"] = $row["doc_adress"];
    $i++;
}
header('Content-type: application/json');
echo json_encode($doc_arr);
?> 
```

最后这里是连接`configure.php`

```
<?php
$cfg_server = "localhost";
$cfg_database   = "db_name";
$cfg_username   = "root";
$cfg_password   = "";

$conn = mysql_connect($cfg_server, $cfg_username, $cfg_password);
if($conn)
{
    if (!mysql_select_db($cfg_database))
    {
        die('Could not select Database: '.mysql_error());
    }
}
if (!$conn)
{
    die('Could not connect to Database: '.mysql_error());
}
?> 
```

以前有人有同样的问题吗？我需要按不是表格的每周元素显示日期列组，如果我使用表格更容易？但我不知道如何在表中显示列每周组！我可以通过 SQL 查询按数据分组吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T14:42:47.460

mySql 有一个 Week 函数。

如果您将查询更改为：-

```
SELECT `res_date`,`res_time`, WEEK(res_date) AS `res_week` FROM `reserve_tbl` WHERE `doc_id` = '".$doc_id."'"; 
```

您将能够使用该`res_week`字段按周数跟踪每条记录，从而显示上周和下周

# android - Android：在 Android 4.0 中启动主屏幕

> ID：14455795
> 
> 赞同：0
> 
> 时间：2013-01-22T09:58:40.147
> 
> 标签：android, homescreen

我正在尝试从服务启动主屏幕。我使用了以下代码

```
 Intent startMain = new Intent(Intent.ACTION_MAIN);
           startMain.addCategory(Intent.CATEGORY_LAUNCHER);
           startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
           startActivity(startMain); 
```

它在 Android 2.3 中运行良好，但在 4.0 中却不行

在 4.0 中，它显示一个列表来选择应该是默认屏幕的内容。

我需要和 2.3 一样的效果

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:01:56.467

你可以试试这个添加看看它是否有效。

而不是这个类别， `startMain.addCategory(Intent.CATEGORY_LAUNCHER);`

尝试这个，

```
startMain.addCategory(Intent.CATEGORY_HOME); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:06:10.150

主屏幕可以从您的清单中触发。开始您的活动，您希望拥有如下主屏幕：

```
<activity
        android:name="com.example.HomeScreenActivity"
        android:screenOrientation="portrait"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/title_activity_home_screen"
        android:theme="@style/FullscreenTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

如果您想在几毫秒后切换到下一个屏幕，请创建您的活动，如下所示：

```
public class HomeScreenActivity extends Activity {

protected boolean _active = true;
protected int _splashTime = 3000; // time to display the splash screen in ms

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTitle("Your Activity Title");
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_home_screen);

    // thread for displaying the HomeScreen
    Thread homeTread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
                finish();
                startActivity(new Intent("com.example.SecondViewActivity"));
            }
        }
    };
    homeTread.start();

}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _active = false;
    }
    return true;
}

} 
```

# gwt - 选择后 GWT MenuItem 失去焦点

> ID：14455796
> 
> 赞同：2
> 
> 时间：2013-01-22T09:58:40.110
> 
> 标签：gwt, menuitem, menubar

我有一个简单的垂直一维菜单。菜单项不是固定的，它们会根据从服务器接收到的数据动态变化。（所以我不能为他们编写修复代码。）

**在 css 中，我将选定的 MenuItem 声明为粗体。我的愿望只是让选定的 MenuItem 在选择后保持粗体。但是当我单击它时，它会失去焦点并且第一个 MenuItem 会变为粗体。**

这怎么可能解决？

# android - 在 Android 中从蓝牙音频设备录制音频

> ID：14455797
> 
> 赞同：7
> 
> 时间：2013-01-22T09:58:51.817
> 
> 标签：android, bluetooth

如何在 Android 中从配对的蓝牙音频设备（即[Moster Clarity 蓝牙扬声器）录制语音。](http://www.monsterproducts.com/productdisplay.asp?pin=6581&id=10728)

我已在 Android 中与设备配对，我想从设备上的麦克风录制声音（而不是使用手机的内置麦克风）。

这是我用于录制的代码：

```
try {
    isRecording = true;

    recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

    if (file == null) {
        File rootDir = Environment.getExternalStorageDirectory();
        file = File.createTempFile(PREFIX, EXTENSION, rootDir);
    }

    recorder.setOutputFile(file.getAbsolutePath());
    recorder.prepare();
    recorder.start();

    timDown = new RecordCountDown(10000, 1000);
    timDown.start();

} catch (Exception e) {
    Log.i("Error Message", "Error Message :" + e.getMessage());
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-07T12:26:58.747

试试这个代码可能对你有帮助..

```
am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

registerReceiver(new BroadcastReceiver() {

@Override
public void onReceive(Context context, Intent intent) {
    int state = intent.getIntExtra(AudioManager.EXTRA_SCO_AUDIO_STATE, -1);
    Log.d(TAG, "Audio SCO state: " + state);

    if (AudioManager.SCO_AUDIO_STATE_CONNECTED == state) { 
        /* 
         * Now the connection has been established to the bluetooth device. 
         * Record audio or whatever (on another thread).With AudioRecord you can          record   with an object created like this:
         * new AudioRecord(MediaRecorder.AudioSource.MIC, 8000, AudioFormat.CHANNEL_CONFIGURATION_MONO,
         * AudioFormat.ENCODING_PCM_16BIT, audioBufferSize);
         *
         * After finishing, don't forget to unregister this receiver and
         * to stop the bluetooth connection with am.stopBluetoothSco();
         */
        unregisterReceiver(this);
    }

    }
}, new IntentFilter(AudioManager.ACTION_SCO_AUDIO_STATE_CHANGED));

Log.d(TAG, "starting bluetooth");
am.startBluetoothSco(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-28T06:28:14.997

从蓝牙耳机录音的代码

```
public class Recording {

static int count = 0;
static String Shared;
static String bFlag;
public static int TIMEOUT = 5000;
public static int COUNTDOWN_INTERVAL = 1000;
static Context context;

public static void checkAndRecord(Context context,
        OnBluetoothRecording BluetoothRecording, boolean resume) {

    // Check bluetooth flag And Bluetooth is ON or OFF
    if (getBluetoothFlag(context) && isBluetoothON()) {

        // Check for bluetooth and Record
        startBluetoothRecording(BluetoothRecording, resume, context);

    } else {

        // If Bluetooth is OFF Show Toast else Dont Show
        if (getBluetoothFlag(context) && !isBluetoothON()) {
            // false because recording not started
            Toast.makeText(context,
                    "Bluetooth is OFF. Recording from Phone MIC.",
                    Toast.LENGTH_SHORT).show();
            BluetoothRecording.onStartRecording(resume, false);
        } else {
            // false because recording not started
            BluetoothRecording.onStartRecording(resume, false);
        }
    }

}

private static void startBluetoothRecording(
        final OnBluetoothRecording BluetoothRecording,
        final boolean resume, Context context) {
    // TODO Auto-generated method stub

    final int MAX_ATTEPTS_TO_CONNECT = 3;
    final AudioManager audioManager = (AudioManager) context
            .getSystemService(Context.AUDIO_SERVICE);

    final CountDownTimer timer = getTimer(BluetoothRecording, audioManager,
            resume);

    context.registerReceiver(new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {

            int state = intent.getIntExtra(
                    AudioManager.EXTRA_SCO_AUDIO_STATE, -1);
            if (AudioManager.SCO_AUDIO_STATE_CONNECTED == state) {
                // cancel Timer
                timer.cancel();
                context.unregisterReceiver(this);

                // pass through and true because
                // recording from bluetooth so set 8000kHz

                BluetoothRecording.onStartRecording(resume, true);

            } else if (AudioManager.SCO_AUDIO_STATE_DISCONNECTED == state) {
                if (count > MAX_ATTEPTS_TO_CONNECT) {
                    context.unregisterReceiver(this);
                    // Stop BluetoothSCO
                    audioManager.stopBluetoothSco();
                    // reset Counter
                    count = 0;
                    // stop timer
                    timer.cancel();
                    // false because still recording not started
                    BluetoothRecording.onStartRecording(resume, false);
                } else {
                    // Increment Disconnect state Count
                    count++;

                }
            }

        }
    }, new IntentFilter(AudioManager.ACTION_SCO_AUDIO_STATE_UPDATED));

    // Start the timer
    timer.start();
    audioManager.startBluetoothSco();

}

// set the Timeout
private static CountDownTimer getTimer(
        final OnBluetoothRecording BluetoothRecording,
        final AudioManager audioManager, final boolean resume) {
    // TODO Auto-generated method stub
    return new CountDownTimer(TIMEOUT, COUNTDOWN_INTERVAL) {

        @Override
        public void onTick(long millisUntilFinished) {
            // Do Nothing

        }

        @Override
        public void onFinish() {

            // stopBluetoothSCO() and start Normal Recording
            audioManager.stopBluetoothSco();

            // false because recording button is already clicked but still
            // not recording.
            BluetoothRecording.onStartRecording(resume, false);
        }
    };
}

// Return's the bluetooth state
private static boolean isBluetoothON() {

    BluetoothAdapter bluetoothAdapter = BluetoothAdapter
            .getDefaultAdapter();
    return bluetoothAdapter.isEnabled();
}

// Return's the bluetoothFlag state
private static boolean getBluetoothFlag(Context context) {

    // shared pref
    SharedPreferences sp = context.getSharedPreferences(Shared,
            Context.MODE_PRIVATE);
    return sp.getBoolean(bFlag, false);

}

} 
```

接口 OnBluetoothRecording.java

```
public interface OnBluetoothRecording {

void onStartRecording(boolean state,boolean bluetoothFlag);
void onCancelRecording();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T22:42:15.497

关键是调用[audioManager.startBluetoothSco()](http://developer.android.com/reference/android/media/AudioManager.html#startBluetoothSco%28%29)。

> 此方法可用于希望在电话未通话时向/从蓝牙 SCO 耳机发送和接收音频的应用程序。

这是一个异步操作，因此，您可以注册一个`BroadcastReceiver`以在开始通过蓝牙耳机录制音频时收到通知，就像这样

```
private BroadcastReceiver mBluetoothScoReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        int state = intent.getIntExtra(AudioManager.EXTRA_SCO_AUDIO_STATE, -1);

        if (state == AudioManager.SCO_AUDIO_STATE_CONNECTED) {
            // Start recording audio
        }
    }
};

@Override
protected void onResume() {
    super.onResume();

    IntentFilter intentFilter = new IntentFilter(AudioManager.ACTION_SCO_AUDIO_STATE_UPDATED);
    registerReceiver(mBluetoothScoReceiver, intentFilter);

    AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    audioManager.startBluetoothSco();
} 
```

文档还提到了一些非常重要的事情

> 应用程序可以在调用 startBluetoothSco() 之前通过读取接收器注册返回的意图来检查 SCO 音频状态。如果状态已经 CONNECTED，则在调用 startBluetoothSco() 后不会通过意图接收到状态更改。

和...

> 然而，调用 startBluetoothSco() 很有用，以便在当前启动器停止连接的情况下连接保持活动状态。

这意味着如果 SCO 连接已经处于活动状态，您不必等待接收方被调用。这是更新的代码片段。

```
@Override
protected void onResume() {
    super.onResume();

    IntentFilter intentFilter = new IntentFilter(AudioManager.ACTION_SCO_AUDIO_STATE_UPDATED);
    Intent intent = registerReceiver(mBluetoothScoReceiver, intentFilter);
    if (intent == null) {
        Log.e(TAG, "Failed to register bluetooth sco receiver...");
        return;
    }

    int state = intent.getIntExtra(AudioManager.EXTRA_SCO_AUDIO_STATE, -1);
    if (state == AudioManager.SCO_AUDIO_STATE_CONNECTED) {
        // Start recording
    }

    // Ensure the SCO audio connection stays active in case the
    // current initiator stops it.
    AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    audioManager.startBluetoothSco();
} 
```

如果您不使用它，您应该停止 SCO 连接。

```
private void onPause() {
    super.onPause();

    unregisterReceiver(mBluetoothScoReceiver);

    AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    audioManager.stopBluetoothSco();
} 
```

您的`AndroidManifest.xml`文件中还需要以下权限

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY"/> 
```

# events - Navision 5 和 COM 互操作

> ID：14455799
> 
> 赞同：1
> 
> 时间：2013-01-22T09:58:53.223
> 
> 标签：events, com, navision

在尝试了解 Navision 5 如何通过 COM 互操作与外部应用程序通信时，我发现了以下示例：

[http://msdn.microsoft.com/en-us/library/aa973247.aspx](http://msdn.microsoft.com/en-us/library/aa973247.aspx)

实施的第二种情况正是我想要做的。我测试了代码（稍作修改 -`[ComVisible(true)]`在事件接口和类上添加了一些属性），并且通过这些修改，它可以按照示例中的说明工作。

`COMTimer.Elapsed`但是，我不明白为什么我们在通过以下调用时没有得到异常。

```
protected virtual void OnElapsed(EventArgs e)
{
  Elapsed();
} 
```

谁被这个事件迷住了？我能看到的唯一“钩子”是`mTimer.Elapsed += new ElapsedEventHandler(mTimer_Elapsed);`指.`Elapsed``mTimer`

通常，在函数中`Elapsed`为*空。*`OnElapsed`

我会很感激你的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:27:21.680

有趣的问题。

`WithEvents`自动化属性创建处理程序并将其附加到`Elapsed`委托，所以这个不是`NULL`- 因此没有例外

但是，当`WithEvents`is`No`和`Timer.Start()`被调用时，正如您正确地说的那样，即使（理论上）`Elapsed`delegate 为空，也不会出现异常。

对此的简单解释是，无论`WithEvents`财产如何，NAV 都会附加空委托。为了支持这一点，如果你把代码放在`Timer::Elapsed()`触发器中，然后起飞`WithEvents`，然后把它带回来 - 代码仍然存在（即触发器仍然以不变的形式存在），这使我倾向于得出它总是存在的结论（即空委托）。

但当然是资产净值，所以不可能那么简单。

我从上面的 MSDN 示例创建了一个测试代码单元，但对自动化做了一些小的改动：

```
/// <summary>
/// Whenever the internal timer elapses, an event must be fired
/// </summary>
private void mTimer_Elapsed(object sender, ElapsedEventArgs e)
{
    OnElapsed(EventArgs.Empty);
    throw null;
} 
```

理论上，这应该在被调用`NULL`时抛出`mTimer_Elapsed`- 但是在 NAV 中不会出现任何问题。我更进一步并改变了这一点：

```
///<summary>
/// Invoke the Changed event; called whenever the internal timer elapses
/// </summary>
protected virtual void OnElapsed(EventArgs e)
{
    throw new InvalidCastException("test");
    //Elapsed();
} 
```

同样，资产净值没有任何变化。

`COM Timer`请注意，如果从 .NET 项目中使用，则这两个更改的行为都符合预期。这让我觉得，NAV Interop 必须从自动化中捕获异常并在内部处理它们。

然而，我会在[Mibuso](http://mibuso.com/)中提出这个问题——那里的人可能会更清楚。

# java - 从 GUI 保存用户设置

> ID：14455801
> 
> 赞同：1
> 
> 时间：2013-01-22T09:58:55.483
> 
> 标签：java, user-interface, persistence, preferences

我目前正在编写一个应用程序，它有一个选项 frame `JDialog`。此框架包含用户可以配置的各种复选框和文本字段。

我想保存用户对选项所做的更改。

这样做的最佳方法是什么？

我的第一个想法是通过将其保存在格式为例如的文件中来实现它

```
checkBox1=value;
textArea1="value"; 
```

通过使用以下内容，我可以获得该字段，但我需要执行类似（对于复选框）myField.isSelected(); 这是行不通的。

```
Field myField = MyClass.class.getDeclaredField(name); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:41:24.727

您可以使用`java.util.prefs.Preferences`将配置存储在您的`JDialog`. 这个问题 - [Java Preference Manager](https://stackoverflow.com/questions/5525248/java-preference-manager) - 讨论如何使用 Preferences 创建前端+后端解决方案（类似于 JFace `org.eclipse.jface.preference`）

# excel - 在excel中将小时：分钟：秒转换为总分钟数

> ID：14455803
> 
> 赞同：23
> 
> 时间：2013-01-22T09:58:58.150
> 
> 标签：excel

如何`hours:minutes:seconds`在 Excel 中转换为总分钟数？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-22T10:09:01.687

![在此处输入图像描述](../Images/efa23d4cbedc67ccf9bc8ba7932aad45.png)

只需使用公式

> =A8*60*24

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-22T10:12:55.550

只需使用公式

```
120 = (HOUR(A8)*3600+MINUTE(A8)*60+SECOND(A8))/60 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-22T10:12:07.950

唯一的方法是使用公式或格式化单元格。我将使用的方法如下：在这些值旁边添加另一列。然后使用以下公式：

```
=HOUR(A1)*60+MINUTE(A1)+SECOND(A1)/60 
```

![在此处输入图像描述](../Images/0cb98941ab521cb6841aa9a78386dcb8.png)

# scala - 在 Scala 中使用 Specs2 和 Play 的模式匹配

> ID：14455805
> 
> 赞同：2
> 
> 时间：2013-01-22T09:59:00.053
> 
> 标签：scala, playframework-2.0, specs2

我对 Scala/Play 2.0 和 Specs 有一个简单的问题。

这是我的测试

```
"Server" should {
"return a valid item with appropriate content type or a 404" in {
        val Some(result) = routeAndCall(FakeRequest(GET, "/item/1"))
        status(result) match {
            case 200 => contentType(result) must beSome("application/json")
            case 404 => true
            case _ => throw new Exception("The Item server did not return either a 200 application/json or a 404")
        }
        //false   --> It only compiles if I add this line!
 }
}
} 
```

由于以下原因，这不会编译：

```
 No implicit view available from Any => org.specs2.execute.Result.
[error]     "return a valid item with appropriate content type or a 404" in {
[error]                                                                  ^
[error] one error found 
```

所以我认为状态（结果）匹配正在评估任何因此错误。鉴于我的默认情况具有错误的返回值，我应该如何指定其结果类型为 Result？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T21:57:54.457

我想为安德里亚的回答增加一个精确度。

每个分支确实需要产生一个可以转换为`Result`. 第一个分支类型是`MatchResult[Option[String]]`，第二个和第三个类型是类型`Result`。

有一种方法可以通过使用 a`MatchResult`而不是 a来避免类型注释`Result`。`ok`and`ko`是 2 `MatchResult`s，等价于`success`and `failure`，并且可以在这里使用：

```
"return a valid item with appropriate content type or a 404" in {
  val Some(result) = routeAndCall(FakeRequest(GET, "/item/1"))
  status(result) match {
    case 200 => contentType(result) must beSome("application/json")
    case 404 => ok
    case _   => ko("The Item server did not return ... or a 404")
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:23:04.733

You should ensure that each branch of the match results something convertible to specs2 `Result`. So, instead of `true` you can use `success` and instead of `throw new Exception("...")` use `failure("...")`.

**Edit:** It seems you also have to help Scalac out a bit. Add parentheses around the match and ascribe the type like this:

```
import org.specs2.execute.Result

"return a valid item with appropriate content type or a 404" in {
    val Some(result) = routeAndCall(FakeRequest(GET, "/item/1"))
    (status(result) match {
      case 200 => contentType(result) must beSome("application/json")
      case 404 => success
      case _ => failure("The Item server did not return either a 200 application/json or a 404")
    }): Result
 } 
```

# c++ - Borland C++ BCB 5 - EAccessViolation DynamicArray 数组太大

> ID：14455810
> 
> 赞同：1
> 
> 时间：2013-01-22T09:59:10.803
> 
> 标签：c++, memory, bpl, c++builder-5

我正在使用 BCB 5，并且我有一个 DynamicArray 在正常条件下可以完美运行，但最近我被迫将它用于大型数据集（大约 7000 个项目），并且我的异常处理程序抛出了这个 EAccessViolation。这发生在：

```
try
{
    sz++;
    Recon.Length = (sz + 1);
} 
```

当我检查 Recon.Length = 4606

我已将链接器选项的堆最大大小增加到最大值，但我仍然收到此错误。

是否有另一种方法可以增加应用程序可用的内存

# python - python中的谐波级数

> ID：14455812
> 
> 赞同：1
> 
> 时间：2013-01-22T09:59:16.997
> 
> 标签：python, math

有谁知道如何在 python中编写[谐波级数？](http://en.wikipedia.org/wiki/Harmonic_series_(mathematics))

```
H(n) = 1 + 1/2 + 1/3 + ... + 1/n 
```

注意：我们不允许从预定义的模块导入。输出必须是分数形式（最低项）答案的分子和分母。

所以这是我这个谐波系列的代码。

```
n = input("Enter n:")  

def harmonic(n):  
    a=1  
    b=1  
    for d in range(2, n+1):  
            a = a*d+b  
            b = b*d  
            return (a,b)  
            x == max(a,b)%min(a, b)  
            if x == 0:  
                y=min(a,b)  
                return y  
            else:  
                y=min(a,b)/x  
                return y  
            a=a/y  
            b=b/y  
            return (a,b)  
print harmonic(n) 
```

怎么了？无论我输入什么，输出总是 (3,2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:35:48.403

我必须检查您的尝试两次 - 并插入一个简单的 gcd （在您的原始代码中间）

```
n = input("Enter n:")

def harmonic(n): #original harmonic series
     a=1
     b=1
     for d in range(2, n+1):
         a = a*d+b
         b = b*d
     return(a,b)

def harmonic_lt(n): #_lt: harmonic series with lowest terms
                    #not pythonic, but simple
    a=1
    b=1
    for d in range(2, n+1):
        a = a*d+b
        b = b*d

    y=a
    x=b
    while x > 0:
        re = y % x
        y = x
        x = re

    a=a/y
    b=b/y
    return(a,b)

print harmonic(n)
print harmonic_lt(n) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:19:10.963

正如其他人指出的那样，当 d = 2 即 (1 + 1/2) 时返回，它应该在 for 循环之外。

这是我为做同样的事情而编写的代码：

```
#!Python2.7
def gcd(a, b):
    if b: return gcd(b, a%b)
    return a

def lcm(a, b):
    return a*b/gcd(a, b)

def start():
    n = int(raw_input())
    ans = reduce(lambda x, y: (x[0]*lcm(x[1],y[1])/x[1]+y[0]*lcm(x[1],y[1])/y[1], lcm(x[1],y[1])),[(1,x) for x in xrange(1,n+1)])
    _gcd = gcd(ans[0], ans[1])
    print (ans[0]/_gcd, ans[1]/_gcd)

start() 
```

如果您想避免使用`reduce`,`lamda`和列表推导：

```
#!Python2.7
def gcd(a, b):
    if b: return gcd(b, a%b)
    return a

def lcm(a, b):
    assert a != 0
    assert b != 0
    return a*b/gcd(a, b)

def next(x, y):
    lcmxy = lcm(x[1], y[1])
    return (x[0]*lcmxy/x[1]+y[0]*lcmxy/y[1], lcmxy)

def start():
    n = int(raw_input())
    curr = (1,1)
    for x in xrange(2,n+1):
        curr = next(curr, (1,x))
    _gcd = gcd(curr[0], curr[1]) 
    print (curr[0]/_gcd, curr[1]/_gcd)

start() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T11:07:14.770

谐波系列：

```
1/1 + 1/2 + ... + 1/n == (n!/1 + n!/2 + ... + n!/n)/n! 
```

因此你可以这样做：

```
nom = reduce(lambda s, x: s*x, xrange(1, n+1),1)   # n!
denom = sum([nom / x for x in xrange(1, n+1)]) 
```

然后你需要在`nom`和上做 gcd-reduction `denom`。
使用 Thorsten Kranz 的版本。

请注意，这种方式只`gcd`需要一次调用！

**例子：**

```
def gcd(a, b):
    while b:      
        a, b = b, a % b
    return a

def harmonic(n):
    nom = reduce(lambda s, x: s*x, xrange(1,n+1), 1)   # n!
    denom = sum([nom / x for x in xrange(1, n+1)])
    f = gcd(denom, nom)
    return (denom / f), (nom / f)

print harmonic(10)
print harmonic(20)

(7381, 2520)
(55835135, 15519504) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T10:06:23.420

您可以通过找到数字 1..n 的最小公倍数来找到分母。

然后，提名者将是所有值的总和，`denominator/x`其中 x 是 1..n 中的所有值。

这是一些代码：

```
def gcd(a, b):
    """Return greatest common divisor using Euclid's Algorithm."""
    while b:      
        a, b = b, a % b
    return a

def lcm(a, b):
    """Return lowest common multiple."""
    return a * b // gcd(a, b)

def lcmm(args):
    """Return lcm of args."""   
    return reduce(lcm, args)

def harmonic(n):
    lowest_common_multiple = lcmm(range(1,n))
    nominator = sum([lowest_common_multiple/i for i in range(1,n)])
    greatest_common_denominator = gcd(lowest_common_multiple, nominator)
    return nominator/greatest_common_denominator, lowest_common_multiple/greatest_common_denominator

print harmonic(7)
print harmonic(10)
print harmonic(20) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T10:05:47.777

> 您总是在第一次迭代时返回 (a,b)。——沙龙”

Return 总是结束一个函数。如果返回 (a,b)，则其余代码无法访问

# java - jaxb 可以解析系统属性吗？

> ID：14455813
> 
> 赞同：4
> 
> 时间：2013-01-22T09:59:19.123
> 
> 标签：java, xml, properties, jaxb, unmarshalling

我们使用 JAXB 通过 XML 配置对象。我想知道 JAXB 是否有办法解析系统属性。例如，如果我有一个具有属性颜色的 bean，我希望能够做到这一点：

```
<mybean color="${mycolor.in.data.property}" /> 
```

但如果我这样做，JAXB 会创建 mybean 对象，颜色将等于字符串： `mycolor.in.data.property`

对于 JAXB，Spring 中是否有任何等效的[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)，以便可以解析我的系统属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:02:51.863

An`XmlAdapter`是一种[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)机制，允许您在编组/解组器期间将一个对象转换为另一个对象。您可以编写一个`XmlAdapter`将系统属性名称转换为实际值的方法。

```
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class ColorAdapter extends XmlAdapter<String, String> {

    @Override
    public String unmarshal(String v) throws Exception {
        return System.getProperty(v);
    }

    @Override
    public String marshal(String v) throws Exception {
        return v;
    }

} 
```

然后你使用`@XmlJavaTypeAdapter`注解来配置`XmlAdapter`你的属性。

```
@XmlJavaTypeAdapter(ColorAdapter.class)
public String getColor() {
    return color;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)

* * *

**更新**

> 好，谢谢。实际上我无权访问该类，因为这是导入库的一部分。所以我更多的是寻找一种直接在 xml 文件中配置它的方法，但这可能是不可能的。

如果无法修改类，则可以使用 a`StreamReaderDelegate`来修改 XML 输入。有几种方法可以处理文本/字符数据，因此您可能需要进行试验，以确保您正在覆盖最适合您正在使用的 JAXB 实现的方法。

```
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.stream.util.StreamReaderDelegate;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {

        JAXBContext jc = JAXBContext.newInstance(MyBean.class);

        XMLInputFactory xif = XMLInputFactory.newFactory();
        StreamSource source = new StreamSource("input.xml");
        XMLStreamReader xsr = xif.createXMLStreamReader(source);
        xsr = new StreamReaderDelegate(xsr) {

            @Override
            public String getText() {
                String text = super.getText();
                if(text.contains("${")) {
                    text = System.getProperty(text);
                }
                return text;
            }

        };

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.unmarshal(xsr);
    }

} 
```

# android - 本地化应用名称

> ID：14455815
> 
> 赞同：7
> 
> 时间：2013-01-22T09:59:22.610
> 
> 标签：android, string, localization

我想本地化（values-ru）字符串值：textview 和 app_name。应用程序仅本地化 textview ("Привет мир") 但 app_name 仍然相同 ("Localization")。app_name 本地化有什么问题？

Manifest 中的应用标签名称和活动标签名称是指相应的字符串值。

显现：

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.local.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

字符串 res/values-ru：

```
<resources>
<string name="hello_world">Привет мир</string>
<string name="app_name">Локализация</string>
</resources> 
```

爪哇：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String languageToLoad  = "ru";
    Locale locale = new Locale(languageToLoad); 
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config, 
    getBaseContext().getResources().getDisplayMetrics());

    setContentView(R.layout.activity_main);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T10:05:27.303

这将在本地而不是移动设备上更改应用程序的区域设置。Manifest 根据设备区域设置选择应用程序名称的值，而不是应用程序区域设置。因此，您需要从移动设备的设置中进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T12:46:22.727

@skygeek 同意只是根据 android 网站上的 android 本地化过程来启发主题：

> 资源是您的 Android 应用程序需要的文本字符串、布局、声音、图形和任何其他静态数据。一个应用程序可以包含多组资源，每组资源都针对不同的设备配置进行定制。当用户运行应用程序时，Android 会自动选择并加载最匹配设备区域设置的资源。

详细解释可以在 android 网站[链接](http://developer.android.com/guide/topics/resources/localization.html)中找到。

# java - 清单类路径不起作用

> ID：14455819
> 
> 赞同：2
> 
> 时间：2013-01-22T09:59:35.980
> 
> 标签：java, classpath, manifest, manifest.mf

我创建了一个 manifest.jar，其中包含需要在类路径中为其他一些 Jar 添加的 jar。我也尝试在 manifest.mf 中使用相对类路径，但这些 jar 仍然没有添加到类路径中，或者需要这些 jar 的 jar 没有从清单中选择 jar。

清单看起来像：-

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.7.0
Class-Path: abc.jar adc1.jar ../abc2.jar ../abc3.jar ../../lib/abc4.jar 
```

因此，如果我的 jar 说“My.jar”在类路径中需要这些 jar。我已经从 manifest.mf 上面创建了一个 manifest.jar。但它仍然没有选择这些罐子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:16:19.397

[http://docs.oracle.com/javase/tutorial/deployment/jar/modman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/modman.html)中描述了一个可能的原因

*警告：您从中创建清单的文本文件必须以换行符或回车符结尾。如果最后一行没有以新行或回车结束，则不会正确解析。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-14T16:04:28.433

这是不允许的....一个罐子不能包含其他罐子（如果没有爆炸）看看：[清单中的ClassPath不起作用](https://stackoverflow.com/questions/16610333/classpath-in-manifest-does-not-work)

# internet-explorer - 更改 Spring MVC 中的内容类型以在 IE 中上传文件

> ID：14455821
> 
> 赞同：1
> 
> 时间：2013-01-22T09:59:39.933
> 
> 标签：internet-explorer, spring-mvc, file-upload, content-type, blueimp

我使用带有 Java Spring MVC 3.1 后端的 blueimp jQuery File Upload（UI 版本）7.2.1。它适用于 chrome 和 FF。不幸的是，因为 content-type="application/json" 而不是 IE。建议通过接受标头通过内容协商来更改此设置。我知道有一个 Spring ContentNegotiatingViewResolver。这是解决此问题的适当方法吗？到目前为止，有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T09:19:08.130

我通过将 Spring MVC 控制器更改为生成“text/plain”而不是“application/json”来实现这一点。我在这里的答案中的详细信息：[jQuery-File-Upload and Spring MVC IE9 doesn't work](https://stackoverflow.com/questions/14024952/jquery-file-upload-and-spring-mvc-ie9-doesnt-work/19701539#19701539) 这工作得很好，但我也会对这样做的正确方法感兴趣，因为这似乎有点骇人听闻。

# xcode - 为什么在我的 Mac 上运行的 Jenkins 无法连接到本地 git 存储库？

> ID：14455826
> 
> 赞同：10
> 
> 时间：2013-01-22T09:59:55.730
> 
> 标签：xcode, git, jenkins

我正在尝试使用 Jenkins 为我的 iOS 项目实现自动化构建。我添加了 Git 插件，但是一旦我尝试将 git 的 URL 放入项目的 git 配置中，它就会在下面的屏幕截图中显示错误。在这里，Jenkins 无法从 repo 克隆到其工作区。

![截屏](../Images/2524132e13e91c8c245f32bb0c1fbaeb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-09T01:41:11.407

对于“存储库 URL”字段，它需要一个远程存储库 URL，例如`git@github.com:github/hubot.git`. 它将使用该 url 复制代码以运行作业。

如果您只想在已经拥有要处理的代码的特定目录中运行作业，请将此部分留空。您可以设置要在其中运行作业的目录 1\. 滚动到“高级项目选项”部分 2\. 单击“高级” 3\. 选中“使用自定义工作区”

一方面，这很好，但如果你经常使用它，我认为你会发现将代码提交到 github 并让 jenkins 为每次运行克隆一个新的代码副本会更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T14:13:04.280

如果您错过以下情况，您将收到该错误：

1.  每当克隆 URL 错误时。
2.  当您尝试从无权访问 git 服务器的地方进行克隆时。
3.  每当您的 Pem 密钥未添加到 git 服务器上的密钥列表中时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T00:48:18.277

在大多数情况下 git bare repo 扩展名为 .git 我的意思是 (other)/test1 看起来不正确，我认为它应该是 (other)/test1.git 在我的 mac 上有同样的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T05:11:13.503

其实我解决了这个问题。这是因为远程 git 没有正确更新的权限

# symfony - Symfony2 和多个 where

> ID：14455835
> 
> 赞同：1
> 
> 时间：2013-01-22T10:00:26.367
> 
> 标签：symfony, doctrine

我想使用`where`多个值构建查询。值的数量是可变的（从一到十）。我的查询现在看起来像这样：

```
return $repository->createQueryBuilder('s')
    ->where('s.id = :id')
    ->setParameter('id', '1') 
```

但我希望该`id`参数是数组。我试过`setParameters`了，但这不是功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:04:14.630

试试这个

```
return $repository->createQueryBuilder('s')
   ->where('s.id IN (:id)')
   ->setParameter('id', array('1','2','3')) 
```

这使用作为参数传递的数组在 IN 语句中使用。

要使用变量，请执行以下操作：

```
$myarray = array('1','2','3');
return $repository->createQueryBuilder('s')
   ->where('s.id IN (:id)')
   ->setParameter('id', $myarray) 
```

# ruby-on-rails - 我想在我的 Rails 应用程序中实现配乐

> ID：14455838
> 
> 赞同：0
> 
> 时间：2013-01-22T10:00:32.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, soundcloud

嘿，我只是喜欢我的 Rails 应用程序的教程 [https://github.com/soundcloudlabs/connect-with-soundcloud-rails-demo](https://github.com/soundcloudlabs/connect-with-soundcloud-rails-demo) 还有一个视频[http://www.youtube.com/watch?v=oSBfGV0uUA4](http://www.youtube.com/watch?v=oSBfGV0uUA4) 我看着它并按照它的教导来实施它。但我得到错误

```
ArgumentError in SoundcloudController#connected

wrong number of arguments (0 for 1)

Rails.root: /home/prem/Desktop/souncloud/connect-with-soundcloud-rails-demo
Application Trace | Framework Trace | Full Trace

app/controllers/soundcloud_controller.rb:9:in `connected'

Request

Parameters:

{"code"=>"12c142cb2626b9c314ea25af87cbad48",
 "signed_up"=>"0"}

Show session dump

Show env dump
Response

Headers:

None 
```

有什么想法可以解决吗？我的声音云控制器是这样的

```
class SoundcloudController < ApplicationController
  def connect
    redirect_to soundcloud_client.authorize_url(:display => "popup")
  end

  def connected
    if params[:error].nil?
      soundcloud_client.exchange_token(:code => params[:code])
      me = soundcloud_client.get("/me")

      login_as User.find_or_create_by_soundcloud_user_id({
        :soundcloud_user_id  => me.id,
        :soundcloud_username => me.username
      })

      current_user.update_attributes!({
        :soundcloud_access_token  => soundcloud_client.access_token,
        :soundcloud_refresh_token => soundcloud_client.refresh_token,
        :soundcloud_expires_at    => soundcloud_client.expires_at,
      })
    end
    render :layout => false
  end

  def disconnect
    login_as nil
    redirect_to root_path
  end

private

  def soundcloud_client
    return @soundcloud_client if @soundcloud_client
    @soundcloud_client = User.soundcloud_client(:redirect_uri  => soundcloud_connected_url)
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:28:00.387

如果您的代码与 github 上的代码相同，则问题在第 9 行

```
me = soundcloud_client.get('/me') 
```

也许你有类似的东西`soundcloud_client.get`？您能否显示文件 SoundCloud 控制器的代码并检查此行是否正确

# c# - 使用其设置器捕获属性更改

> ID：14455839
> 
> 赞同：1
> 
> 时间：2013-01-22T10:00:33.407
> 
> 标签：c#, asp.net, properties, propertychanged

我想在属性更改时收到通知，以便我可以在数据库中记录属性的旧值和新值。

所以我决定采用属性设置器的方法，并有一个处理所有属性的通用方法。

我创建了下面的类：

```
public class PropertyChangedExtendedEventArgs<T> : PropertyChangedEventArgs
{
    public virtual T OldValue { get; private set; }
    public virtual T NewValue { get; private set; }

    public PropertyChangedExtendedEventArgs(string propertyName,
                                            T oldValue, T newValue)
        : base(propertyName)
    {
        OldValue = oldValue;
        NewValue = newValue;

   //write to database the values!!!
    }
} 
```

在我的财产上，我这样称呼它：

```
private string _surname;
public string Surname
{
    get { return _surname; }
    set 
    {
        string temp = Surname;
        _surname = value;
        Helper.PropertyChangedExtendedEventArgs("Surname", temp, value);
    }
} 
```

但这是第一次使用泛型，所以很少有顾虑：

*   我如何在我的财产上调用它？
*   这是一个好方法吗？
*   我可以公开调用函数 `PropertyChangedExtendedEventArgs(string propertyName, T oldValue, T newValue)`并保存到数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:20:08.500

您似乎对属性更改的使用有些困惑。
通常，希望对其属性进行观察的组件会更改`INotifyPropertyChanged`接口。因此，正确的实现将类似于

```
private string _surname;
public string Surname
{
    get { return _surname; }
    set 
    {
        if (_surname != value) // IMP: you want to inform only if value changes
        {
           string temp = Surname;
           _surname = value;

           // raise property change event, 
           NotifyPropertyChanged(temp, _surname);
        }
    }
} 
```

Typically, base implementation could provide helper implementation to raise the event - for example,

```
public abstract Component : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged<T>(T oldVal, T newVal, [CallerMemberName] String propertyName = "")
    {
       var e = PropertyChanged;
       if (e != null)
       {
          e(this, new PropertyChangedExtendedEventArgs(propertyName, oldVal, newVal));
       }
    }
} 
```

Now, its consumer's responsibility on how to react to property changes. This separates observable components from unrelated concern of what to do when some property changes. Typically, one will have some the common implementation that would say - save the current object state in stacked manner as to provide undo-redo functionality.

因此，在您的情况下，您希望将它们记录到数据库（？），应该有代码可以侦听此属性更改事件并进行记录。将有一些控制器/绑定代码将遍历所有实现此接口的对象并连接事件。通常，根级容器会进行此类内部管理——例如，在设计器界面中，每当创建新组件并将其添加到设计界面时，其根元素（或处理根元素的代码）都会连接事件。

# jquery-isotope - 同位素 columnWidth 和 Gutter 选项不起作用

> ID：14455843
> 
> 赞同：0
> 
> 时间：2013-01-22T10:00:42.500
> 
> 标签：jquery-isotope

我只使用同位素网站提供的默认代码。该插件工作正常，它在页面上就好了。默认情况下，不指定列宽和装订线宽度，isotope 会在元素之间自动应用 7px 边距。但是，我想减少此边距并尝试按照文档的指示传递列宽和装订线宽度，但我总是失败。代码是：

```
$container.isotope({
     itemSelector: '.gallery-item',
     masonry : {
        columnWidth: 300, 
        gutterWidth: 2
               }
}); 
```

没有实时网址可以查看，但您可以在这里查看，我所做的只是创建“官方”jsfiddle 的副本，然后添加列宽和装订线宽度。您可以看到，虽然框的宽度和高度为 70 像素，但它无法正常工作，除非有我不明白的地方..

[http://jsfiddle.net/PUhtY/](http://jsfiddle.net/PUhtY/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:39:36.477

如果您仍在寻找答案，您将需要 jQuery Gutter Width Extension。

[https://gist.github.com/Huskie/2574891](https://gist.github.com/Huskie/2574891)

在你的同位素功能之外敲打它，你应该准备好了！我有同样的问题，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-26T12:30:39.077

您的问题是您使用`guuterWidth`而不是`gutter`.

将您的代码更改为以下内容：

```
$container.isotope({
 itemSelector: '.gallery-item',
 masonry : {
    columnWidth: 300, 
    gutter: 2
    }
}); 
```

# html - 有没有可能做 镜像？

> ID：14455844
> 
> 赞同：73
> 
> 时间：2013-01-22T10:00:44.557
> 
> 标签：html, css, video

是否可以使标签内的视频水平或垂直镜像？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-01-22T10:08:42.150

您可以使用 CSS3 3D 转换来实现。

```
#videoElement
{
    transform: rotateY(180deg);
    -webkit-transform:rotateY(180deg); /* Safari and Chrome */
    -moz-transform:rotateY(180deg); /* Firefox */
} 
```

这会将其绕 Y 轴旋转 180 度（因此您现在从后面看它），其外观与镜像相同。

[http://jsfiddle.net/DuT9U/1/](http://jsfiddle.net/DuT9U/1/)上的示例

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T10:11:32.273

您可以使用 CSS3 scaleX 或 scaleY 设置为 -1 分别水平或垂直翻转视频。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-07T23:45:48.777

使用 JavaScript，如果`video`是视频元素，则可以使用镜像（水平翻转）

```
video.style.cssText = "-moz-transform: scale(-1, 1); \
-webkit-transform: scale(-1, 1); -o-transform: scale(-1, 1); \
transform: scale(-1, 1); filter: FlipH;"; 
```

要垂直翻转，您可以使用

```
video.style.cssText = "-moz-transform: scale(1, -1); \
-webkit-transform: scale(1, -1); -o-transform: scale(1, -1); \
transform: scale(1, -1); filter: FlipV;"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-31T20:39:22.730

如果有人想要一个工作示例，这里是代码（带有镜像/旋转）。请参考 style 标签下的视频元素#videoElement：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="stuff, to, help, search, engines, not" name="keywords">
<meta content="What this page is about." name="description">
<meta content="Display Webcam Stream" name="title">
<title>Display Webcam Stream</title>

<style>
#container {
    margin: 0px auto;
    width: 500px;
    height: 375px;
    border: 10px #333 solid;
}
#videoElement {
    width: 500px;
    height: 375px;
    background-color: #666;
    /*Mirror code starts*/
    transform: rotateY(180deg);
    -webkit-transform:rotateY(180deg); /* Safari and Chrome */
    -moz-transform:rotateY(180deg); /* Firefox */
    /*Mirror code ends*/
}

</style>
</head>

<body>
<div id="container">
    <video autoplay="true" id="videoElement">

    </video>
</div>
<script>
 var video = document.querySelector("#videoElement");

 navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;

 if (navigator.getUserMedia) {
     navigator.getUserMedia({video: true}, handleVideo, videoError);
 }

 function handleVideo(stream) {
     video.src = window.URL.createObjectURL(stream);
 }

 function videoError(e) {
     // do something
}
</script>
</body>
</html> 
```

# seam2 - Jboss Seam Mail 2.2.1：m:message 被识别为 UIInstructions

> ID：14455849
> 
> 赞同：0
> 
> 时间：2013-01-22T10:01:05.417
> 
> 标签：seam2

我正在尝试从这里运行 Jboss Seam Mail 示例[http://docs.jboss.org/seam/2.2.1.Final/reference/en-US/html/mail.html](http://docs.jboss.org/seam/2.2.1.Final/reference/en-US/html/mail.html)

邮件没有发送，日志中也没有错误。

使用 Eclipse 调试器，我检测到模板中的 m:message 标记被识别为 com.sun.facelets.compiler.UIInstructions 对象，而不是 org.jboss.seam.mail.ui.UIMessage 对象。

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:00:05.057

看起来我使用了这个[http://docs.jboss.org/seam/2.3.0.Final/reference/en-US/html/mail.html中的例子](http://docs.jboss.org/seam/2.3.0.Final/reference/en-US/html/mail.html)

xmlns 有区别

在 2.2.1 我们有： xmlns:m="http://jboss.com/products/seam/mail"

在 2.3.0 中有： xmlns:m="http://jboss.org/schema/seam/mail"

那是我的问题。

# javascript - 获取 html 文档中元素的 id 列表

> ID：14455850
> 
> 赞同：0
> 
> 时间：2013-01-22T10:01:06.150
> 
> 标签：javascript

所以我有这个html：

```
 <select id="CompanyMultiSelect" name="CompanyMultiSelect" multiple="multiple">
</select> 
```

我有 JavaScript 可以动态地用数据填充它。除其他外，数据填充有具有 id 的输入。它们是动态生成的，所以在页面加载之前我不知道它们。

我需要在选择中选择所有输入的 id，以便我可以将它们的值解析到另一个位置，我想用 JS 或 jQuery 来做。

我将如何选择所有 id 作为数组以供以后使用？

编辑1：

选择段是插件的占位符，它创建一个充满复选框的下拉菜单，因此输入在选择中的事实不应该打扰你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:15:35.797

假设您已经有一个 jquery，那么您可以执行以下操作：

```
var ids = [];
$("parent_element_selector").find("input[type=checkbox]").each(function(){
   ids.push(this.id);
});
//here ids will be filled with ids of checkboxes. 
```

请注意 parent_element_selector 不能`#CompanyMultiSelect`作为 select 元素不能包含输入，因此您的插件将创建一个新的包装器元素。您需要弄清楚如何使用 firebug 或开发工具获得它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:24:45.137

getElementsByTagName returns an array of elements.

# android - 根据包信息确定接收者的意图过滤器

> ID：14455851
> 
> 赞同：0
> 
> 时间：2013-01-22T10:01:08.117
> 
> 标签：android, android-package-managers

我需要从已安装的特定包中检索针对接收器的意图过滤器的操作名称。我正在接收广播意图`android.intent.action.PACKAGE_INSTALL`。

我得到了`uuid`那个包。但是，我怎样才能获得为该包裹连接的接收器的详细信息？可能来自`PackageManager`or `PackageInfo`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:58:45.803

如果要获取包信息，请在安装 apks 之后。那么你可以使用这个 -

```
 <receiver android:name="PackageChangeReceiver">
     <intent-filter>
  <action android:name="android.intent.action.PACKAGE_ADDED"/>
  <data android:scheme="package"/>
     </intent-filter>
   </receiver> 
```

现在在您的接收器中 -

```
 @Override
 public void onReceive(Context ctx, Intent intent) {
   Log.d(TAG, "The Package Name is " + getPackageName(intent);
 }

 String getPackageName(Intent intent) {
    Uri uri = intent.getData();
    String pkg = uri != null ? uri.getSchemeSpecificPart() : null;
    return pkg;
} 
```

# javascript - 回调重叠

> ID：14455853
> 
> 赞同：0
> 
> 时间：2013-01-22T10:01:10.940
> 
> 标签：javascript, jquery

我有一个简单的可调整大小的 div（通过[jQuery 的 resizable](http://docs.jquery.com/UI/API/1.8/Resizable)实现），我正在使用函数处理调整大小事件。

所以，假设这是我的代码：

```
var a = ...
$(div).resizable({ 
    options go here...

    resize: function(e, ui){
        make some operations with a
        ...
        ...
        keep making operations with a
        ...
        ...
        ok, we're done
    }
}) 
```

现在，假设在短时间内多次调用调整大小回调。javascript 将如何处理呢？回调会与“a”的使用重叠吗？（注意“a”是一个全局变量！）。我使用此代码是否安全，或者可能存在某种冲突？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:05:18.803

如果您询问线程安全，JavaScript 是单线程的。像这样的函数一次只能运行一个，无论它被调用的频率如何。

所以你应该是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:04:48.397

JavaScript 是单线程的，所以函数调用不能“重叠”。如果您多次触发该事件，则该函数将完全执行（减去它可能调用的任何异步函数）以响应第一次触发，然后再次执行以处理后续触发器。

但是，`a`当再次执行该函数时，仍然会在一次调用中进行更改，因此如果它依赖于您的值，`a`您可能会遇到问题 - 它归结为该函数对变量所做的确切操作。

# hibernate - Hibernate 中 SchemaUpdate 和 SchemaExport 的区别

> ID：14455855
> 
> 赞同：2
> 
> 时间：2013-01-22T10:01:26.307
> 
> 标签：hibernate

Hibernate 中的 SchemaUpdate 和 SchemaExport 有什么区别。

[架构更新](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/tool/hbm2ddl/SchemaUpdate.html)

[模式导出](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/tool/hbm2ddl/SchemaExport.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:49:35.017

*SchemaExport*（又名 hbm2ddl）是从 Hibernate 映射生成数据库模式（整体，而不是部分）的工具。SchemaExport 需要了解方言，但它不参考现有数据库。然后可以执行生成的 DDL 语句和/或保存到文件和/或打印机到标准输出。

*SchemaUpdate*更新现有架构。在某种程度上，它确定应该执行哪个 DDL 语句以使现有数据库与修改后的 Hibernate 映射匹配。

更多详细信息的良好来源是[Hibernate Core Reference Manual - Chapter 22\. Toolset Guide](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/toolsetguide.html)。

# jquery - jQuery - 获取 div 子项的类名并将它们的数值相加

> ID：14455856
> 
> 赞同：0
> 
> 时间：2013-01-22T10:01:26.490
> 
> 标签：jquery

我正在基于 Twitter Bootstrap 的响应式网格构建一个函数。它`.row-fluid`用作容器和`spans`适合行内的节点。每行最多可以有 12 个“跨度”。

我希望我的函数找到任何带有 class 的元素`.row-fluid`，找到它的子节点，取类名，从中删除“span”（只留下一个数字）并将这些数字加在一起。如果结果大于 12，我希望它缩小最大的数字，直到数字等于 12。

听起来很复杂，希望我不会太远。这是我目前所处的位置：

```
$('.row-fluid').each(function() {
    var spanned = $(this).children('div[class*=span]').each(function() {
        var total = 0, nums = $(this).attr('class').match(/\d+/);
        nums.each(function() {
            total += this;
        }
        console.log(total);
    }
    );
    console.log("break");
}
); 
```

目前，这是记录整个元素而不仅仅是数字，所以我对我哪里出错/从这里做什么感到有点茫然。有什么建议吗？

编辑：结构与此类似：

```
<div class="row-fluid">
  <div class="span5">

  </div>
  <div class="span4">

  </div>
  <div class="span2">

  </div> //Function should check if the 3 above spans <= 12
  <div class="row-fluid">
      <div class="span8"> //Function should see this and...
        <div class="row-fluid">
          <div class="span6">Fluid 6</div>
          <div class="span6">Fluid 6</div>
        </div>
      </div>
      <div class="span6">Fluid 6</div> //...this and see that they DON'T equal 12, then subtract 2 from the bigger span so that they DO equal 12
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:24:14.357

`var total = 0, nums = $(this).attr('class').match(/\d+/);`

Ugly line - define each var in separate line, because its easier to parse for human beeing ;]

`nums = $(this).attr('class').match(/\d+/);`

This is string, not a number, do such thing instead:

```
var numString = $(this).attr('class').match(/\d+/);
var num = parseInt(numString); 
```

Im not sure what happens here:

`nums.each(function() {`

but nothing good i assume ... each function is for jQuery elements, so maybe jQuery treat your nums as jQuery object

`total += this;`

Generally inside each parameter function, 'this' keyword is kind of jquery selector, thats why u gets elements instead of numbers

I would say that you need to declare total variable outside spans.each(), because u will get it cleared after each iteration + do sth like that:

`total += num;`

assuming u will parse numString to number, as i mentioned above.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:25:49.083

我会大胆猜测，这就是你想要做的：

```
$('.row-fluid').each(function(i,ele) {
    var total = 0;
    $(ele).children().each(function(i2, spans) {
        if (spans.className.indexOf('span') != -1) {
             total += parseInt(spans.className.replace(/[A-Za-z$-]/g, ""),10);
        }
    });
}); 
```

# java - Java JDBC 连接 Integrated Security 只能在我的 Eclipse 中工作

> ID：14455858
> 
> 赞同：0
> 
> 时间：2013-01-22T10:01:41.753
> 
> 标签：java, jdbc, integrated-security

当我在 Eclipse 中打开 jdbc 连接时 - 它工作正常。

但是当我创建可执行 jar 文件并运行它时 - 我遇到了 Integrated Security=true 的问题。

或者可能不仅具有集成安全性...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:32:38.487

我假设您正在谈论连接到 Microsoft SQL Server。为了能够使用集成安全性，您需要添加[http://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated](http://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated)`sqljdbc_auth.dll`上`java.library.path`记录的：

> JDBC 驱动程序通过integratedSecurity 连接字符串属性支持在Windows 操作系统上使用Type 2 集成身份验证。要使用集成身份验证，请将`sqljdbc_auth.dll` 文件复制到安装了 JDBC 驱动程序的计算机上的 Windows 系统路径上的目录中。
> 
> 这些`sqljdbc_auth.dll`文件安装在以下位置：
> 
> `<installation directory>\sqljdbc_<version>\<language>\auth\`
> 
> [...]
> 
> 或者，您可以设置 java.libary.path 系统属性来指定`sqljdbc_auth.dll`. 例如，如果 JDBC 驱动程序安装在默认目录中，您可以在 Java 应用程序启动时使用以下虚拟机 (VM) 参数指定 DLL 的位置：
> 
> `-Djava.library.path=C:\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_<version>\enu\auth\x86`

请注意，您需要根据您的 java VM 的位数使用正确的 DLL（因此对于 32 位，使用一个 from `x86`，对于 64 位，使用一个 from `x64`）。

# android - 使用 Eclipse NDK 插件调试 Java 和本机 C++ 代码

> ID：14455860
> 
> 赞同：0
> 
> 时间：2013-01-22T10:01:45.103
> 
> 标签：android, windows, debugging, android-ndk

我正在 Windows 上试用新的官方 Eclipse NDK 插件。在解决了 NDK_MODULE_PATH 的问题（令人惊讶的是，这是唯一的问题）后，“调试为 Android 本机应用程序”配置按预期工作。但是，当我也想调试 Java 时，它只会命中本机代码断点。是否可以编辑此配置以便也命中 Java 断点？

# sql - 查询英国邮政编码的订单数量

> ID：14455862
> 
> 赞同：-3
> 
> 时间：2013-01-22T10:01:55.183
> 
> 标签：sql, sql-server, tsql, select, count

我有一张客户下的订单表，我想要检查历史上来自哪个国家/地区的订单，我只能通过邮政编码检查这个，例如邮政编码为 SK 的订单......意味着它的库存港, 同样从 M .. 开始的邮政编码表示订单来自曼彻斯特，是否可以编写一个可以按邮政编码计算订单的查询。

Order 表的一些字段：OrderNumber OGUID custID firstname last name address postcode email authorization date 等...

任何建议或帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:16:44.540

这是可行的方法......但对于一个庞大的列表来说它可能会变得太长。我将尝试找到解决该问题的方法。

```
SELECT
  CASE
    WHEN postcode LIKE 'SK%'   THEN 'SK'
    WHEN postcode LIKE 'M%' THEN 'M'
  END AS group_by_value
, COUNT(*) AS group_by_count
FROM [Table] a
GROUP BY 
  CASE
    WHEN postcode LIKE 'SK%'   THEN 'SK'
    WHEN postcode LIKE 'M%' THEN 'M'
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:04:46.290

如果您有一个包含城市代码和城市名称的表，那么您可能可以使用类似以下内容的内容，`orders`使用 a 将您的表连接到代码`LIKE`：

```
select o.postcode,
  c.city,
  count(c.code) over(partition by c.code) Total
from orders o
inner join codes c
  on o.postcode like '%'+c.code+'%' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/3a233/3)

~~您可以使用`GROUP BY`来获取每个中的订单总数`postcode`：~~

 ~~```
select postcode, count(postcode) TotalOrdersByPostCode
from orders
group by postcode 
```~~ 

如果你想`City`包含，那么你也可以`GROUP BY`城市：

```
select city, postcode, count(postcode) TotalOrdersByPostCode
from orders
group by  city, postcode 
```

 ~~* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:36:57.063

你有没有尝试过这样的事情？我认为邮政编码的城镇部分将是前 1 或 2 个字节，后面用数字分隔。所以这会给你前几个字母。

```
select substring(postcode,1, patindex('%[0-9]%',postcode)-1), count(*)
from Order
group by substring(postcode,1, patindex('%[0-9]%',postcode)-1) 
```

然后您必须将 M 解码为曼彻斯特，将 W 解码为西伦敦，将 GU 解码为吉尔福德等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:04:16.000

```
select count(1) over(partition by postcode) as countByPostcode, othecolumnhere
from Order 
```~~

# python - 将项目添加到已填充的组合框

> ID：14455871
> 
> 赞同：1
> 
> 时间：2013-01-22T10:02:10.327
> 
> 标签：python, qt, pyqt, pyqt4, pyside

**我用QSqlQueryModel**填充了一个组合框。一切正常，但我想在组合框中添加一个额外的项目，可以说**"ALL_RECORDS"**。这样我就可以将组合框用作过滤设备。

我显然不想在数据库中添加这个额外的项目，在它被模型填充后如何将它添加到组合框中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:16:52.070

您可以使用代理模型从两个模型中获取数据，一个用于您的默认值，另一个用于您的数据库，并使用它来填充您的`QComboBox`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:27:29.830

你可以尝试类似的东西

```
select "ALL RECORDS" union (select 'field' from table) 
```

作为模型的查询。

这样，您将“所有记录”作为第一项，然后是所有其他值，但不是按顺序排列（无论如何这是一个 mysql 问题）

如果您还希望对表中的值进行排序，则应查看此消息

[http://forums.mysql.com/read.php?97,144205,241169#msg-241169](http://forums.mysql.com/read.php?97,144205,241169#msg-241169)

这解释了一个可能的解决方案，假设您使用 MySql

# c# - 显示不设置焦点的窗口

> ID：14455872
> 
> 赞同：0
> 
> 时间：2013-01-22T10:02:12.583
> 
> 标签：c#, winforms, focus

我想将一个窗口显示为通知窗口（不使用 NotifyIcon），但我不希望当前应用程序在显示时失去焦点。我怎么能这样做？
我正在使用：

```
private void alert(string msg = "", string link = "", bool bip = true)
{
    this.Invoke((MethodInvoker)delegate
    {
        Form2.Show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:10:37.507

本文展示了如何通过重写 CreateParams 方法来[“](https://stackoverflow.com/questions/156046/show-a-form-without-stealing-focus)显示表单而不窃取焦点”。

# eclipse - 开始大括号后的智能缩进不起作用

> ID：14455876
> 
> 赞同：0
> 
> 时间：2013-01-22T10:02:32.520
> 
> 标签：eclipse

我目前正在 Eclipse 3.02 中编写 php 代码，并且出现了一个微小但令人讨厌的错误/功能。当我在打开花括号后换行时`{`，标记总是跳到第 1 列，迫使我手动制表符以获得正确的缩进。我只经历过打开花括号的情况。如果我不使用左大括号（即按 enter after或关闭花括号） `else`，它会正确缩进。这是一个已知错误并且可以解决吗？`for``}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:30:59.550

确保您选择了*块内的语句*（以及您希望自动缩进的所有其他情况）。

![Eclipse 格式化程序选项](../Images/429f242a1edf994bc1e8823c946fc988.png)

# iphone - 如何在 iPhone 内部存储中存储安全的应用程序数据

> ID：14455877
> 
> 赞同：0
> 
> 时间：2013-01-22T10:02:40.450
> 
> 标签：iphone, private

嗨，我是 iphone 应用程序开发的新手。我正在编写一个 iphone 应用程序，我想在其中存储和读取一些特定于应用程序的安全数据（例如密码）。我希望这些数据得到保护，没有用户可以访问该文件。它必须是特定于应用程序的。卸载应用程序后，必须删除数据。我可以在 android 中使用 openFileInput 和 openFileOutput 做同样的事情。但是如何在 iphone 环境中完成呢？访问文件的文件路径位置是什么？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:07:15.827

您可能希望将这些数据（或说写入文件的数据）添加到`DocumentDirectory`

以下是您可以参考的链接：

[如何将文件保存在文档文件夹中？](https://stackoverflow.com/questions/11053842/how-to-save-file-in-the-documents-folder)

希望这可以帮助。

# vb.net - 如何在网页中查找文本？

> ID：14455880
> 
> 赞同：0
> 
> 时间：2013-01-22T10:02:53.437
> 
> 标签：vb.net, textbox, richtextbox

我有一个文本框和一个按钮，当我在文本框中输入一个单词并单击按钮时，它假设在当前网页上找到该单词。

我试过这个，有时有效，有时无效，我也想知道如何在文本框中搜索“下一个”字，通常它只搜索输入的第一个字。

这是我的代码：

```
dim wb as webbrowser
if wb.documenttext.contains(textbox.text) then
msgbox("YES")
else
msgbox("NO") 
```

它确实找到了一些词，但大多数时候它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:24:03.390

你可以尝试这样做：

```
If wb.DocumentText.ToLower.Contains(TextBox1.Text.ToLower) Then
    '...
End If 
```

或者您可以尝试遍历所有元素，如下所示：

```
Private Function HasTextInNode(ByVal elem As HtmlElement, ByVal txt As String) As Integer
    Dim iResult As Integer = 0

    If elem.Children.Count > 0 Then
        For Each child As HtmlElement In elem.Children
            iResult += HasTextInNode(child, txt)
        Next
    ElseIf elem.InnerText <> Nothing AndAlso elem.InnerText.ToLower.Contains(txt.ToLower) Then
        iResult += elem.InnerText.ToLower.Split(txt.ToLower).Length - 1
    End If

    Return iResult
End Function 
```

这种情况下，该函数返回网页中元素的数量，但很容易修改。希望能帮助到你。

# web - CDN 的标准传播时间是多少？

> ID：14455881
> 
> 赞同：2
> 
> 时间：2013-01-22T10:03:12.393
> 
> 标签：web, cdn, content-delivery-network

我对 CDN 的传播时间有点困惑。我们已经有一个包含所有静态文件的 CDN。我想看看 CDN 是否是一个新项目的好选择。

基本上，在 CDN 中看到我更新的文件需要多少时间？

有什么方法可以减少复制时间吗？

仅供参考，我正在使用 LimeLight，但我的问题是针对所有 CDN。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T03:30:03.233

传播取决于文件大小和缓存设置。

对于小文件（因 CDN 而异，但通常包括单个文件大小低于 10MB 的所有文件），例如图像、css、js 等，传播是即时的。

如果文件不在缓存中，CDN 将在第一次请求时获取它，然后继续缓存它直到它过期。标准是 24 小时缓存到期，但大多数 CDN 允许您对其进行配置并使其缓存更长时间。

对于像视频这样的大文件（单个文件大小超过 10MB 的任何文件），传播时间通常在 2 到 12 小时之间变化，具体取决于 CDN 以及它们作为客户给予您的优先级。

您可以通过对每个边缘位置/服务器的 IP 进行 curl 来轻松测试文件是否已完全传播。

# ruby - 仅查找添加到表中的新行

> ID：14455882
> 
> 赞同：1
> 
> 时间：2013-01-22T10:03:22.967
> 
> 标签：ruby, watir, watir-webdriver

我有以下代码，它应该只让我从上次检查表时添加到表中的新事件。

```
events=@browser.table( :id =>'table_events').tbody.rows
....
some code
....
events_new=@browser.table( :id =>'table_events').tbody.rows
events=events_new - events # not working !! 
```

我得到了休闲错误：

```
undefined method `-' for #<Watir::TableRowCollection:0x007fccb9ba2358> (NoMethodError) 
```

我知道“-”谓词当然是错误的，但是有没有一种方法可以满足我的需要，或者我需要遍历所有 TableRowCollection 并手动查找新行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:34:22.917

您可以尝试将 转换为`TableRowCollection`支持减法的数组：

```
events = events_new.to_a - events.to_a 
```

`==`如果元素定义了一个有用的方法，这将起作用-[看起来它们确实如此](http://rubydoc.info/github/jarib/watir-webdriver/Watir/Element#%3D%3D-instance_method)。

**更正**：实际上，因为数组减法是使用哈希表来实现效率的（如果您好奇，请[查看源代码](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-2D)`TableRow#==`），重要的不是方法而是`TableRow#hash`方法。幸运的是，看起来 Watir也[实现了这](http://rubydoc.info/github/jarib/watir-webdriver/Watir/Element#hash-instance_method)一点。

# jquery - 滑块以特定值显示元素

> ID：14455883
> 
> 赞同：0
> 
> 时间：2013-01-22T10:03:26.280
> 
> 标签：jquery, html, css, jquery-mobile, slider

我想要一个与[这个](http://jqueryui.com/slider/#default)类似的 jQuery/any 滑块，但功能不多。

我将在我的 HTML 代码中包含元素、图像、文本，也许还有一些 div，它们应该默认隐藏，但是当滑块达到特定值时，图像/文本/任何内容都应该依次显示。

因此，例如，在值为 0 时，仅显示一张图像，然后在值为 1 时弹出另一张图像，依此类推。

是否有任何预制的 jQuery 插件，或者我将如何处理？

```
<!DOCTYPE html>
<html>

    <head>
        <title>jQuery Mobile Tutorial on Codeforest.net</title>
        <link rel="stylesheet"
        href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css">
        <style>
            #slider {
                margin: 10px;
            }
        </style>
        <script src="http://code.jquery.com/jquery-1.9.0.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <script>
            var img1 = $('<img\>').attr('src', 'http://lorempixel.com/400/200/');
            var img2 = $('<img\>').attr('src', 'http://lorempixel.com/300/200/');
            var foto = $('#foto');

            foto.html(img1);

            $("#slider").slider({
                slide: function(event, ui) {
                    if (ui.value > 50) {
                        $('#foto').html(img2);
                    } else {
                        $('#foto').html(img1);
                    }
                }
            });
        </script>
    </head>

    <body>
        <div id="slider"></div>
        <div id="foto"></div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T10:29:39.903

jQueryUI 滑块有一个内置函数可以在滑动时获取值。因此，您可以随时获取滑块的值。

```
$("#slider").slider({
    slide: function(event, ui) {
       console.log(ui.value);
    } 
}); 
```

在某个点附加特定图像应该不难。您还可以取消隐藏您的 div 或任何您想要的。我已经在 J​​SFiddle 上为您构建了一个示例。

[http://jsfiddle.net/AVBWr/](http://jsfiddle.net/AVBWr/)

**编辑：确保将其包装在 document.ready 函数中，如下所示：**

```
$(document).ready(function() {
    var img1 = $('<img\>').attr('src', 'http://lorempixel.com/400/200/');
    var img2 = $('<img\>').attr('src', 'http://lorempixel.com/300/200/');
    var foto = $('#foto');

    foto.html(img1);

    $("#slider").slider({
        slide: function(event, ui) {
            if (ui.value > 50) {
                $('#foto').html(img2);
            } else {
                $('#foto').html(img1);
            }
        }
    });
}); 
```

# ruby-on-rails - 在 rake 任务中需要 lib

> ID：14455884
> 
> 赞同：7
> 
> 时间：2013-01-22T10:03:26.987
> 
> 标签：ruby-on-rails, ruby, rake

我在 lib/models/alert_import' 中有一个文件 alert_import，我想在我的任务中使用这样的东西：

```
task :send_automate_alerts => :environment do
 # STDERR.puts "Path is #{$:}"
  Rake.application.rake_require '../../lib/models/alert_import'
  ai = AlertImport::Alert.new(2)
  ai.send_email_with_notifcations
end 
```

在这段代码中我得到错误：

找不到 ../../lib/models/alert_import

在 AlertImport 我有：

```
module AlertImport

  class Alert

    def initialize(number_days)
      @number_days = number_days
    end

    def get_all_alerts
      alerts = { }
      Organization.automate_import.each do |o|
        last_import = o.import_histories.where(import_type: "automate").last
        last_successful_import = ImportHistory.last_automate_successful_import(o)
        if last_import
          if last_import.created_at + @number_days.days >= Time.now
            alerts[o.id] ="Error during last automate import Last successful import was #{ last_successful_import ? last_successful_import.created_at : "never"}" if last_import.status == "failure"
            alerts[o.id] ="Error during last automate import - status pending Last successful import was #{ last_successful_import ? last_successful_import.created_at : "never"}" if last_import.status == "pending"
          else
            alerts[o.id] = "There were no new files uploaded within #{@number_days} days"
          end
        else
          alerts[o.id] = "The import was never triggered at all"
        end
      end
      alerts
    end

    def send_email_with_notifcations
      alerts =get_all_alerts
      unless alerts.empty?
        AlertMailer.email_notifications(alerts).deliver
      end
    end

  end

end 
```

正确的解决方案是：

```
desc "Send alerts about automate imports"

task :send_automate_alerts => :environment do
  require "#{Rails.root}/lib/models/alert_import"
  ai = AlertImport::Alert.new(2)
  ai.send_email_with_notifcations
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-24T08:10:55.113

在 Rails 3.x 中，我首先使用导入文件`require`，然后将模块包含到命名空间中，从而取得了成功。下面是它的外观：

```
require 'models/alert_import'

namespace :alerts

  include AlertImport

  desc 'Send alerts about automate imports'
  task send_automate_alerts: :environment do
    ai = AlertImport::Alert.new(2)
    ai.send_email_with_notifcations
  end

end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:32:42.853

很可能您的路径错误，您可以执行以下操作

```
task :send_automate_alerts => :environment do
 # STDERR.puts "Path is #{$:}"
  Rake.application.rake_require "#{Rails.root}/lib/models/alert_import"
  ai = AlertImport::Alert.new(2)
  ai.send_email_with_notifcations
end 
```

`"#{Rails.root}"`这将为您提供项目的当前路径

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-23T02:50:31.330

我尝试了一些选项，最显着的是尝试[`rake require`](https://apidock.com/ruby/v1_9_3_392/Rake/Application/rake_require)，但看起来文档`rake_require`不正确。它特别不包括不以结尾的文件`.rake`

所以最后，我是“从头开始”做的——像这样：```

```
namespace :my_namespace do
  task :my_task do
    require File.join(Rails.root, 'app', 'services', 'my_module.rb')

    class Wrapper
      include MyModule
    end
    Wrapper.new.the_method_I_need(args)
  end
end 
```

完毕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T10:15:16.963

你的路径不对，你可以试试：

```
task :send_automate_alerts => :environment do
 # STDERR.puts "Path is #{$:}"
  Rake.application.rake_require "#{Rails.root}/lib/models/alert_import"
  ai = AlertImport::Alert.new(2)
  ai.send_email_with_notifcations
end 
```

问候！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T11:16:21.460

检查那里[http://rake.rubyforge.org/classes/Rake/Application.html#M000099](http://rake.rubyforge.org/classes/Rake/Application.html#M000099) 定义正确的路径

# java - 在 SQLite JDBC 查询中附加 java.sql.Date

> ID：14455886
> 
> 赞同：0
> 
> 时间：2013-01-22T10:03:27.807
> 
> 标签：java, sqlite, jdbc

我一直在整个数据库中使用 PreparedStatements，您可以在其中使用`setDate(index, data)`，但是使用这样的 Date 对象是否有效？

`"SELECT * FROM table WHERE date BETWEEN " + date + " AND " + otherDate`

有什么在线工具可以用来测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:11:01.237

我不相信这个功能会起作用：

```
"SELECT * FROM table WHERE date BETWEEN " + date + " AND " + otherDate 
```

由于您尝试将两个`Date`对象与多个`String`文字连接起来。您需要使用 a`DateFormatter`将其`Date`转换为`String`.

您应该坚持使用`PreparedStatement`s 并避免通过连接字符串/值来创建 SQL 语句。`PreparedStatement`将为您提供一些保护，而`sql injection`字符串连接方法将使您面临 sql 注入的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:12:29.243

最好的方法是以数据库可识别的格式格式化您的日期，当您直接附加到 时`String`，将调用日期`toString()`，并且我怀疑数据库是否支持该语法，您最好执行以下操作：

```
final SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String s = "SELECT * FROM table WHERE date BETWEEN '" 
    + formatter.format(date) + "' AND " + formatter.format(otherDate) + "'"; 
```

此外，正如凯文所说，宁愿坚持`PreparedStatement`s，因为这可以为您提供更多保护。

# netbeans - 从智能卡发送/接收数据

> ID：14455887
> 
> 赞同：2
> 
> 时间：2013-01-22T10:03:30.537
> 
> 标签：netbeans, smartcard, javacard

我最近买了一个智能卡读卡器（Gemplus USB Smart Card Reader），它带有一些卡。我一直在阅读有关如何使用它们的几个教程，但我有几个问题。我正在尝试与智能卡通信（发送 APDU）但没有成功。我在虚拟智能卡中安装了一个小程序（使用 Netbeans）。

我的处理方法是这样的：

```
 byte[] buffer = apdu.getBuffer();
    byte CLA = (byte) (buffer[ISO7816.OFFSET_CLA] & 0xFF);
    byte INS = (byte) (buffer[ISO7816.OFFSET_INS] & 0xFF);

    if (CLA != HW_CLA){
        ISOException.throwIt(ISO7816.SW_CLA_NOT_SUPPORTED);
    }        
    switch (INS) {
        case HW_INS_ADD:               
            add(apdu);
            break;
        case HW_INS_SUBTRACT:                
            subtract(apdu);
            break;
        default:
            ISOException.throwIt(ISO7816.SW_INS_NOT_SUPPORTED);
    } 
```

`add`and`subtract`方法为声明的变量（余额）添加或减去 5 个单位。我想在进行操作后将余额值保存到卡中。有谁知道我怎样才能将该值写入卡中？如果可能的话，我以前怎么读？

感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:32:01.213

持久性（持久性内存意味着 EEPROM 或闪存）字段中的任何状态都将保留，直到 Applet*实例*被删除。非瞬态数组元素中的状态也是如此。当然，您需要保留对数组的持久引用才能做到这一点。`CLEAR_ON_DESELECT`一旦进行了上下文切换，例如当另一个小程序被选中（并且当前一个被取消选择）或发生软或硬复位时，瞬态（瞬态意味着 RAM）数组的内容将被清除。当然，`CLEAR_ON_RESET`阵列只会在重置时被擦除（包括断电）。

基本上所有对象实例都存在于持久内存中，这意味着任何使用`new`. 对于由 API 未明确指定结果是瞬态的平台创建的任何对象也是如此。每次调用该方法时，总是*会*清除APDU 缓冲区本身。`process`

如果您想存储余额之类的东西，您需要了解 Java Card 事务机制，尤其是在您的操作不是原子操作的情况下。

请注意，当包含模拟器的进程结束时，许多 Java Card**模拟器** *不会保留任何状态。*这并不能很好地表示真正的 Java Card 实现的行为方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:15:06.057

答案很简单：只需将字段添加到您的 JavaCard 小程序类。一旦“启动”Javacard 小程序“运行”，直到它们被卸载。

当然，“运行”是错误的术语——它们保持其内部状态，如果接收到下一个 APDU，则之前来自 APDU 的状态仍然存在，即使在接收到第一个 APDU 后卡已从智能卡读卡器中取出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:41:59.003

实际上，您正在保存这些值 :) 声明为瞬态或局部变量的值不存储在 EEPROM 中，否则所有值都存储在 EEPROM 中并且是非易失性的。取出卡后，您可以在插入卡时访问它们。

但是从您发布的代码中，我无法说出您使用的是什么类型的变量。如果您想要一个精确的答案，只需发布​​完整的代码，那么我们将准确回答您。

# jquery - 使用 jQuery 读取“接受语言”HTTP 标头值

> ID：14455888
> 
> 赞同：0
> 
> 时间：2013-01-22T10:03:35.283
> 
> 标签：jquery, asp.net-mvc, localization, http-headers

我尝试以这种方式使用 jQuery 检索“接受语言”HTTP 标头值：

```
$(document).ready(function () {
    //Ask ASP.NET what culture we prefer, because we stuck it in a meta tag
    var data = $("meta[name='accept-language']").attr("content")
}); 
```

[从这里提取。](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)

存在 HTTP 标头是因为我可以通过 Chrome 网络控制台选项卡看到它`"Accept-Language:en-US,en;q=0.8,de;q=0.6,es;q=0.4"`，但我总是获得`undefined`价值。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:15:11.890

您稍微误解了代码片段。在 Scott Hanselman 的文章中，他向 HTML 文档添加了一个自定义`meta`元素。`head`jQuery 选择器`$("meta[name='accept-language']")`只是找到那个元元素，这样你就可以获得它的值。

在返回页面的请求中，无法直接查看客户端发送的值。这不是 DOM 公开的信息。您可以获得的最接近的是[`navigator.language`](https://developer.mozilla.org/en/Navigator.language)，但这只是浏览器中设置的语言，与标题不同。

这就是`meta`添加自定义标签以公开此信息的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:13:20.563

您需要注意，此代码不是检索实际的标头，而是已放入`META`标记的值（JavaScript 无法访问原始请求的标头）。在您链接的文章中，您有这个助手：

```
namespace System.Web.Mvc
{
    public static class LocalizationHelpers
    {
        public static IHtmlString MetaAcceptLanguage<T>(this HtmlHelper<T> html)
        {
            var acceptLanguage = HttpUtility.HtmlAttributeEncode(Threading.Thread.CurrentThread.CurrentUICulture.ToString());
            return new HtmlString(String.Format("<META name=\ content=\ {0}\?? accept-language\??>",acceptLanguage));
        }
    }
} 
```

您需要将其添加到项目中，然后在视图中使用，如下所示：

```
<HTML>
    <HEAD>
        ...
        @Html.MetaAcceptLanguage()
    </HEAD>
    ...
</HTML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:08:53.277

你可以用javascript做。

1.  可以在客户端更改接受标头。服务器端检查也是如此。（尽管您只关心语言标题）

//navigator.userLanguage for ie

//navigator.language 其他

```
var language = window.navigator.userLanguage || window.navigator.language;
alert(language); 
```

# php - 在 magento SOAP API 中对客户和产品详细信息进行排序

> ID：14455890
> 
> 赞同：0
> 
> 时间：2013-01-22T10:03:50.150
> 
> 标签：php, api, magento, sorting, soap

是否有任何预定义的函数/方法使用 magento SOAP API 在排序的列表/数据中获取客户、产品的其他详细信息。我想使用 Magento SOAP API 按电子邮件、姓氏、名字或其他详细信息对客户详细信息进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:14:04.333

你应该检查

```
app/code/core/Mage/Customer/Model/Customer/Api.php 
```

有一个函数`items()`可以帮助您检索包含客户信息的表。

您可以通过调用来使用它：`'customer.list'`并将所需的过滤器作为参数数组传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:38:56.453

```
if(isset($_REQUEST['field_name']))
    {
       $collection = Mage::getModel('customer/customer')->getCollection()->addAttributeToSelect('*');
       $collection->setOrder($_REQUEST['field_name'],'ASC');
       $collection->load();
       $data=$collection->toArray();
} 
```

我使用了上面的代码，它可以工作。我们可以用名字、姓氏、电子邮件等任何东西代替 field_name，它会根据它来缩短。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:00:10.097

这可以帮助你..

```
$collection = Mage::getModel("xxx")->getCollection()
            ->addAttributeToSelect('*')
             ->addAttributeToSort('last_name', 'ASC'); 
```

# fortran - Fortran 和 OpenMP：为什么在纯过程中不允许使用 OpenMP 指令？

> ID：14455892
> 
> 赞同：3
> 
> 时间：2013-01-22T10:03:54.113
> 
> 标签：fortran, openmp, procedure

我目前使用 OpenMP 来并行化遗留应用程序。在我的工作中，我们将 INTENT 添加到子程序和函数的参数中，这些子程序和函数将在并行线程中调用，并广泛使用 keywork pure 来让编译器检查函数和子路由的无副作用代码，以确保不更改任何代码全局状态。

现在我注意到了，在 OpenMP 标准（包括 4.0 草案）中是这样写的：

> “Fortran 限制：以下限制适用于所有 OpenMP 指令： • OpenMP 指令不得出现在 PURE 或 ELEMENTAL 过程中。”

为什么呢？尤其是 INTENT 和 pure 是强制编译器检查无副作用代码的好工具。为什么不允许合并？其背后的技术原因是什么？

当前实现的代码编译和运行没有错误，没有任何抱怨，它实际上是并行运行的，我们可以通过工具和流程管理工具看到它。

如果不是这样，我们如何利用编译器检查无副作用的代码并与 OpenMP 并行运行？当前的应用程序广泛使用（更改的）全局状态来进行我们需要识别的运行时控制。

它主要使用英特尔 Fortran 编译器 (ifort) 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:22:03.347

OpenMP 做的事情并不简单，比如启动线程和与操作系统交互。这与纯过程的概念模型不太兼容。

# c# - 将文件拖到桌面图标时启动 c# 可执行文件

> ID：14455896
> 
> 赞同：0
> 
> 时间：2013-01-22T10:04:22.570
> 
> 标签：c#, windows, winforms, setup-project

我创建了一个小型 c# windows 应用程序，它将 txt、jpg、doc、ppt 和 excel 文件转换为 pdf 文件。我已经为这个应用程序创建了一个安装文件，并且在安装安装文件时，桌面快捷方式图标将被创建。

现在让我解释一下我的要求。在应用程序图标上拖动一组文件，它应该启动应用程序，并在桌面图标上拖动文件列表。

是否有一些我需要添加的属性或代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:10:28.830

您只需要使用 main 中的 args，这将是文件：

[拖放到桌面图标](https://stackoverflow.com/questions/5854966/drag-and-drop-onto-desktop-icon)

在这里看到。

# javascript - javascript 动画不透明度更改的不正确行为

> ID：14455899
> 
> 赞同：2
> 
> 时间：2013-01-22T10:04:32.983
> 
> 标签：javascript, jquery, overlay, fade

我有一个页面，上面有几张图片。当用户将鼠标悬停在任何一个图像上时，我希望一个 50% 不透明的覆盖 div 淡入有关悬停图像的信息。这是我刚才在 PHP 中的代码（为了便于阅读，我删除了字符串 concats 等）：

```
<div class="propertyoverlay"
    id="boxnum'.$propertynumber.'"
    onMouseOver="fadein(\'boxnum'.$propertynumber.'\')"
    onMouseOut="fadeout(\'boxnum'.$propertynumber.'\')"
>';
    <h3 class="price">'.$properties[$propertynumber]['price'].'</h3>';
</div>'; 
```

它将 div ID 提供给以下命令：

```
function fadein(id){        
    $('#'+id).animate({ 'opacity': 0.5 });
}

function fadeout(id){        
    $('#'+id).animate({ 'opacity': 0 });
} 
```

我遇到的问题是： A. 如果用户反复快速地在图像上悬停和关闭，淡入淡出命令会叠加。如果 mouseOver 和 mouseOut 命令在调用后立即覆盖其余的提示，那就更好了。B. 当我将鼠标悬停在嵌套在父级内的 H3 标记上时，直接调用 mouseOut 后跟鼠标悬停命令，导致 div 淡出然后立即再次淡入。

我很乐意使用 Javascript 或 JQuery 来解决这个问题，但是，如果可能的话，我宁愿暂时避免使用基于 CSS3 的解决方案。非常感谢你花时间陪伴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:10:37.453

`.animate`在对元素开始新操作之前，调用该[`.stop()`](http://api.jquery.com/stop/) 函数以停止任何仍在进行中的动画。

这样，当在淡入操作完成之前调用淡出函数时，它将从已经达到的不透明度值淡出到 0.0 不透明度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:12:14.533

A: 在调用 animate 之前使用 jQuery .stop() 方法，例如：

```
$('#'+id).stop(true).animate({ 'opacity': 0 }); 
```

B：尝试在 jQuery ( [docs](http://api.jquery.com/mouseenter/) )中使用`mouseenter`and`mouseleave`事件。这将解决子元素触发 mouseover/mouseout 的问题。这意味着您必须将事件与 jQuery 绑定，而不是直接在 HTML 元素上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:10:43.400

我还没有测试过这个，但我认为这`.stop()`是你需要的！[在官方 api 文档](http://api.jquery.com/stop/)中了解更多信息！

# ssh - sshuttle 命令在 /etc/NetworkManager/dispatcher.d 中没有任何影响

> ID：14455904
> 
> 赞同：1
> 
> 时间：2013-01-22T10:04:44.613
> 
> 标签：ssh, ubuntu-12.04, vpn

我编写了一个脚本，该脚本根据计算机连接的 SSID 和一天中的时间发出 sshuttle 命令。但是，该命令似乎对脚本没有任何影响。该脚本正在运行，并且在脚本之外运行时，相同的命令可以完美运行。我连接的网络是一个 WPA2 PEAP，使用 MSCHAPv2 作为内部身份验证。我想知道脚本是否运行得太早，因此无法建立 ssh 连接。

```
 #!/bin/sh

logger -s "zcallshuttle triggered"
ssid=`iwgetid --raw`
logger -s "SSID found: $ssid"
mac=`iwgetid -a --raw`
ip=`ifconfig $IF | grep "inet addr" | awk -F: '{print $2}' | awk '{print $1}'`

# python /etc/network/sshvpn $ssid $mac $ip
# I was trying a python script before that has the time constraints

sshuttle_pid=`cat /tmp/sshuttle.pid`
kill $sshuttle_pid
logger -s "issued kill"
sshuttle --dns --daemon --pidfile=/tmp/sshuttle.pid --remote=kaizer@target 0/0>/tmp/vpn.log
# as you can see, I try to get the output of the sshuttle command in /tmp/vpn.log
logger -s "vpn443 called successfully." 
```

/tmp/vpn.log 仍然为空。

当我手动运行该命令时，它可以完美运行。

# javascript - 如果变量未定义，如何在 IE 中优雅地失败而不是看到 SCRIPT5009？

> ID：14455906
> 
> 赞同：0
> 
> 时间：2013-01-22T10:04:46.713
> 
> 标签：javascript, internet-explorer, error-handling

```
if (!variable) ui.notify('functionality not available due to...'); 
```

当在 IE 中进行这个简单的检查时，我们得到 SCRIPT5009: 'variable' is undefined，这正是我们试图检查的地方，但没有如此可耻地失败。如何让这个优雅的失败成真？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:16:35.773

下一个代码可以帮助您：

```
if (typeof variable === "undefined") console.log("undefined");
else console.log("defined"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:06:47.960

你可以试试：

```
if (!window['variable']) ui.notify('functionality not available due to...'); 
```

假设这`variable`是全球性的

# java - 如何获取子类的泛型类型

> ID：14455909
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:05:00.870
> 
> 标签：java, generics

在 Java 中，想象一下这些接口和类：

```
public interface Iface<S, T> { ... }

public class Parent<A, B> implements Iface<B, A> { ... }

public class Sub extends Parent<String, Integer> { ... } 
```

有没有办法让一个函数接受`Iface`并获得它的泛型类型。例如，如果您输入一个`Sub.class`：

```
public void showTypes(Class<Iface<S, T>> ifaceClass) {
    // do something...
}

//showTypes(Sub.class) --> S = Integer.class, T = String.class 
```

**编辑：**关于类型擦除。如果你有一个`ArrayList<?>`你不知道它是哪个泛型类型。但这种情况不同。如果我有一个扩展的类，`ArrayList<String>`我可以知道它的泛型类型（String.class）。请看这个片段：

```
@SuppressWarnings("serial")
public class StringList extends ArrayList<String> {
    public static void main(String... args) {
        ParameterizedType superType = 
            (ParameterizedType) StringList.class.getGenericSuperclass();
        Type[] types = superType.getActualTypeArguments();
        Class<?> clss = (Class<?>) types[0];
        System.out.println(clss);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:46:56.587

好吧，我找到了我要找的东西。[TypeTools](https://github.com/jhalterman/typetools)是一个只有一个类的小型库，专门为此而设计。遗憾的是它不在 Maven 中央存储库中。

```
TypeResolver.resolveArguments(Sub.class, Iface.class) --> [java.lang.Integer, java.lang.String] 
```

[Spring 在GenericTypeResolver](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/core/GenericTypeResolver.html)中有类似的方法：

```
GenericTypeResolver.resolveTypeArguments(Sub.class, Iface.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:11:23.740

不，由于泛型在 Java 中的实现方式，这无法完成。在运行时，没有关于用于泛型参数的实际类型的信息。

[您可以在此处阅读有关类型擦除的](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)更多详细信息

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T10:13:25.800

```
Update 01.23: 
```

我们和其他响应者回答了一个松散的具体问题，所以我们不值得 -1 票......不太公平......

```
Original answer: 
```

不，没有办法……

在泛型主要规范中，当您使用 T 和 S 时，它将生成以下代码：

```
public void showTypes(Class<Iface<Object, Object>> ifaceClass) {
    // do something...
} 
```

所以你不会知道这些信息...

您可以有一个解决方案来定义这样的泛型类型的类：

```
public void showTypes(T type)
{
if (s instanceof Number) 
 System.out.println("Number")
if (s instanceof String) 
 System.out.println("String")
} 
```

但正如我所见，这不是你的选择......

它只会在运行时确定，而不是编译时......

# c - 尝试打印大字符 [] 时出现段错误

> ID：14455911
> 
> 赞同：0
> 
> 时间：2013-01-22T10:05:08.307
> 
> 标签：c, segmentation-fault, printf

以下代码对我造成了段错误。

```
#include <stdio.h>

int main(int argc, char **argv)
{
    const int MEMSIZE = 1024*1024*10;
    char memblock[MEMSIZE];
    memblock[10] = '\0';

    printf("%s", memblock);

    return 0;
} 
```

字符数组有大小限制吗？我忘记了我所有的C，我在这里做了什么愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:17:15.247

用这个小程序发现你的最大堆栈大小是多少，并检查你的数组是否更大

```
#include <stdio.h>
#include <sys/resource.h>

int main ()
{
    struct rlimit rl;
    int result = getrlimit(RLIMIT_STACK, &rl);
    printf("max stack size: %u\n", rl.rlim_cur);
} 
```

结果在我的主机上

```
max stack size: 10485760 
```

局部变量存储在堆栈中，显然，它们不能大于他的最大大小

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:06:13.520

char 数组的大小没有限制，但与可用堆内存相比，堆栈大小将受到相对限制。你可能在这里溢出了堆栈。您可以尝试制作`memblock`静态

```
static char memblock[MEMSIZE]; 
```

或动态分配

```
char* memblock = malloc(MEMSIZE);
if (memblock == NULL) {
    printf("Error: failed to allocate %d byte buffer\n", MEMSIZE);
    return -1;
}
memblock[10] = '\0';
printf("%s", memblock);
free(memblock); 
```

# sql-server - SQL Management Studio 如何显示结果？

> ID：14455912
> 
> 赞同：0
> 
> 时间：2013-01-22T10:05:08.937
> 
> 标签：sql-server, ssms

当我通过本地安装的 SQL Server 的 Management Studio 连接到另一个 SQL Server 并执行查询时，我知道该查询在真实服务器上执行，但我在 Management Studio 中看到了结果。

我不知道Management Studio究竟是如何显示结果的，是获取某种XML或其他东西然后渲染它，还是它像远程工具一样简单，实际上是模拟远程服务器的Management Studio？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:12:10.587

Management Studio 将通过 TCP/IP 连接到远程 SQL 服务器，执行一个查询或一批查询，然后在结果窗口中将结果返回给您。

SQL Server 使用一种称为表格数据流 (TDS) 的协议通过网络发送数据，您可以在此处阅读有关它的更多信息：http: [//msdn.microsoft.com/en-us/library/ee320917(v=sql. 105).aspx](http://msdn.microsoft.com/en-us/library/ee320917(v=sql.105).aspx) .

只要远程 SQL 服务器启用了 TCP/IP 并且没有其他限制（防火墙等），您就可以连接到世界另一端的 SQL 服务器（当然使用正确的凭据）。

# cqrs - 两个用户在 NEventStore 的同一个聚合根上工作

> ID：14455915
> 
> 赞同：3
> 
> 时间：2013-01-22T10:05:15.830
> 
> 标签：cqrs, neventstore

我知道命令不应该失败，所以我需要在发送命令之前验证我的命令。

但是，如果两个用户正在更新同一个聚合根并且两者似乎都是有效的，那么我们就会遇到并发问题。

我如何在 NEventStore 中处理这个问题？我的客户是否需要获取他们在保存事件时传递的版本号或提交 ID，如果它已更改，那么我会引发异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T11:15:53.427

正如您所提到的，管理事物的一种方法是指定您`Load`在聚合时期望执行的版本（这有一个重载）。

`ConcurrencyException`如果您生成的事件与事件发生冲突，则提交阶段将 [通过域]产生：-

*   已经存在[您没有加载到聚合中]。
*   由竞争进程同时写入

确保对 NuGet 包放入项目的 .doc 文件进行 >1 次读取 - 它涵盖了 JO EventStore 如何处理此问题的基础知识。

**为清楚起见更新**注意虽然这一切都有效并且有时是必要的，但总的来说，您会发现 [并且默认情况下应该努力到达快乐的地方] 您可以通过自然地制作命令来管理大多数这些冲突解决的事情本质上是幂等的和/或在您的整个系统中使用自然的冲突解决机制，以便不需要依靠您的事件存储来提供如此低级别的保护（例如，etags，在发生冲突时重试命令等） . 如果您发现自己在实践中走上了这条道路，我建议您在 DDD-CQRS 列表中使用足够多的实际用例来讨论您的策略。

# .net - signalR 中的重新连接何时发生？

> ID：14455916
> 
> 赞同：54
> 
> 时间：2013-01-22T10:05:17.157
> 
> 标签：.net, signalr, signalr-hub, reconnect

我已经开始使用 SignalR 并试图弄清楚何时发生集线器重新连接。我在网上没有找到任何令人满意的解释。有人可以解释何时/为什么会发生重新连接吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-01-22T18:51:37.183

当客户端脱机然后很快重新连接时，会发生集线器重新连接。SignalR 配置值在很大程度上决定了以下示例的时间戳，因此不要逐字记录时间。

以下是涉及重新连接行为的几个示例及其结果（时间格式 m:ss）：

*当我提到以下内容时，我指的是服务器端 Hub 方法*

*   已连接
*   断开连接
*   重新连接

**1)**
0:00 - 客户端连接到服务器，触发 OnConnected
0:10 - 客户端由于 ISP 问题失去连接（并意识到它失去连接）
0:15 - 客户端重新连接
0:16 - 触发 OnReconnected 事件

**2)**
0:00 - 客户端连接到服务器，触发 OnConnected
0:10 - 客户端由于拉动以太网电缆而失去连接（没有意识到它已断开连接）
0:15 - 客户端重新连接
*这里可能会发生两件事*
A：0： 16 - 没有任何反应，客户端继续其先前的连接
B: 0:~45 - 客户端意识到其断开连接 *
B: 0:46 - 客户端转换到重新连接状态
B: 0:47 - 客户端成功重新连接并且 OnReconnected 事件是触发。

**3)**
0:00 - 客户端连接到服务器，触发 OnConnected
0:10 - 客户端由于拉动以太网电缆而失去连接（没有意识到它已断开连接）
0:~45 - 客户端意识到其断开连接 *
0:46 - 客户端转换进入重新连接状态
1:15 - 服务器确定客户端已经离开太久然后忘记它，排队等待客户端接收的“断开连接”命令，如果它稍后重新连接。***
1:15 - 触发 OnDisconnected
1:16 - 客户端重新连接
1:17 - 客户端执行“软”重新连接（不触发 OnReconnected）
1:18 - 客户端检索“断开连接”命令
1:19 - 客户端调用“停止”并进行软断开（不触发 OnDisconnected）

**4)**
0:00 - 客户端连接到服务器，触发 OnConnected
0:10 - 客户端由于拉动以太网电缆而失去连接（没有意识到它已断开连接）
0:~45 - 客户端意识到其断开连接 *
0:46 - 客户端转换进入重新连接状态
1:15 - 服务器确定客户端已经离开太久然后忘记它，排队等待客户端接收的“断开连接”命令，如果它稍后重新连接。***
1:15 - OnDisconnected 被触发
1:30 - 客户端停止尝试重新连接（尝试时间过长） **
1:30 - 客户端转换为断开连接状态

* 由于客户端保持活动检查：*用于确定客户端何时由于缺乏保持活动而离线。不用于长轮询传输*

** 由于客户端断开连接超时：*用于确定客户端何时重新连接太长时间，并且服务器可能在此期间忘记了客户端*

*** 由于服务器断开连接超时：*用于确定何时应该忘记客户端。这是一个时间跨度，一旦连接在服务器上被标记为死，就会开始累积。最终，服务器为客户端的主题排队一个断开命令，告诉客户端（如果它重新连接）它需要开始一个新的连接。清理主题后，该命令将从服务器中消失。*

希望这可以帮助！

# perl - git svn 命令；svn绑定问题

> ID：14455919
> 
> 赞同：3
> 
> 时间：2013-01-22T10:05:23.577
> 
> 标签：perl, git, svn, git-svn, swig

在执行“git svn”初始化/克隆时，我收到以下错误：

> $ git svn 初始化。
> 
> 无法为模块 SVN::_Core: libsvn_client-1.so.0 加载“/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/SVN/_Core/_Core.so” ：无法打开共享对象文件：在 /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/DynaLoader.pm 第 230 行没有这样的文件或目录。
> 在 /usr/lib64/perl5/site_perl/5.8。 8/x86_64-linux-thread-multi/SVN/Base.pm 第 59 行
> BEGIN 失败——编译在 /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/SVN/Core.pm 中止第 5 行。
> 在 /usr/local/lib/perl5/site_perl/5.8.8/Git/SVN/Utils.pm 的要求中编译失败 第 6 行。开始
> 失败 - 编译在 /usr/local/lib/perl5/site_perl 中止/5.8.8/Git/SVN/Utils.pm 第 6 行。/usr/local/lib/perl5/site_perl/5.8.8/Git/SVN.pm 第
> 33 行的 require 编译失败。
> BEGIN failed - 编译在 /usr/local/lib/perl5/site_perl/5.8.8/Git/SVN.pm 第 33 行中止。
> 编译在 /usr/local/libexec/git-core/git-svn 行中失败25\.
> BEGIN 失败——编译在 /usr/local/libexec/git-core/git-svn 第 25 行中止。

安装了以下软件包：

1.  git 版本 1.8.0

2.  SWIG 版本 2.0.9 使用 g++ [x86_64-unknown-linux-gnu] 编译配置选项：-pcre

3.  svn，版本 1.6.18 (r1303927) 编译于 2013 年 1 月 22 日，12:39:04

4.  perl, v5.8.8 为 x86_64-linux-thread-multi 构建

感谢您在此提出的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:17:13.377

它看起来像文件：

```
 /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/SVN/_Core/_Core.so 
```

不见了。它应该是你的 svn 包的一部分。很可能您的 svn 编译出错了（缺少一些 perl 支持？）。

无论如何，文件 _Core.so 是以下内容的一部分：

```
http://rpmfind.net/linux/RPM/dag/redhat/el4/x86_64/extras/subversion-perl-1.4.4-0.1.el4.rfx.x86_64.html 
```

如果你编译累了，试着找到合适的 rpm 包并安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:58:35.783

感谢您的建议@xhudik

一切都正确安装并出现在正确的位置。问题是正确链接库。只是`export LD_LIBRARY_PATH`为我做了伎俩。

现在我只需要保持这个环境变量永久不变。现在一切正常。

# android - 关闭在 android 中打开的活动

> ID：14455923
> 
> 赞同：0
> 
> 时间：2013-01-22T10:05:30.300
> 
> 标签：android, android-activity

我创建了一个有 5 个活动的 android 程序？

1.  从那里开始的主要活动我进入登录活动
2.  登录活动到活动 A
3.  活动 A 到活动 B
4.  活动 B 到 C 活动或 D 活动
5.  C Activity 或 D Activity 到 Main Activity

我知道我必须为所有活动放置一个完成（），但问题是我不想在所有新活动之前放置一个完成（），而是有办法通过单击完成主屏幕中的所有正在运行的活动按钮以及主屏幕活动？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T10:22:19.933

采用

android.os.Process.killProcess(android.os.Process.myPid());

这将关闭您的应用程序

# xml - 带有 xml、grep 和 sed 的 shell

> ID：14455924
> 
> 赞同：0
> 
> 时间：2013-01-22T10:05:34.230
> 
> 标签：xml, shell, sed, grep

在为我的问题寻找了很多解决方案之后，我终于必须问它并尝试得到一些很好的答案

所以，我有一个喜欢的xml文件

```
< trigger name="ECUReset" value="0x11">
...
< /trigger>
< trigger name="ClearDTC" value="0x14">
...
< /trigger> 
```

我想用 shell 脚本解析它并检索`trigger name`它，它`value`在一个关联数组中，或者接近`perl hashes`

我在机器上可用的工具只有`grep`和`sed`，我没有`perl`或`awk`

我现在设法得到的是

```
trigger_name=$(sed -n '/trigger_name=/ s/[^\x22]*\x22\(\x22*\)//p' $FILENAME) 
```

但这并没有返回我想要的

我不能使用 perl，但我肯定会喜欢，因为我是 perl 开发人员，也没有 awk 或其他东西，只是带有 sed 和 grep 的 shell。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:20:09.130

如果您有该`cut`实用程序：

```
$ grep "< trigger" test.xml \
> | cut --delimiter=" " --fields=3,4 \
> | cut --delimiter='"' --fields=2,4 --output-delimiter=" : "
ECUReset : 0x11
ClearDTC : 0x14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:23:08.960

does this work for you? (just with sed)

```
sed -rn '/trigger name/{s/.*trigger name="([^"]*)" value="([^"]*)".*$/\1=\2/g;p}' file 
```

test

```
kent$  echo '< trigger name="ECUReset" value="0x11">
...
< /trigger>
< trigger name="ClearDTC" value="0x14">
...
< /trigger>'|sed -rn '/trigger name/{s/.*trigger name="([^"]*)" value="([^"]*)".*$/\1=\2/g;p}'                                                                              
ECUReset=0x11
ClearDTC=0x14 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:26:49.347

```
grep 'trigger name' your_file| cut -d'"' -f 2,4|sed 's/\"/ /g' 
```

测试：

```
>cat temp
< trigger name="ECUReset" value="0x11">
...
< /trigger>
< trigger name="ClearDTC" value="0x14">
...
< /trigger>
> grep 'trigger name' temp | cut -d'"' -f 2,4 | sed 's/\"/ /g'
ECUReset 0x11
ClearDTC 0x14 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:30:04.583

只需使用`sed`：

```
# names
$ sed -n 's/< trigger name="\([^"]*\).*/\1/p' file
ECUReset
ClearDTC

# values
$ sed -n 's/< trigger.*value="\([^"]*\).*/\1/p' file
0x11
0x14

# both
$ sed -n 's/.*< trigger name="\([^"]*\).*value="\([^"]*\).*/\1 \2/p' file
ECUReset 0x11
ClearDTC 0x14 
```

# sql - 合并 SQL 多个插入语句不是一个选项

> ID：14455925
> 
> 赞同：3
> 
> 时间：2013-01-22T10:05:35.253
> 
> 标签：sql, oracle, insert, merge-statement

所以，继续另一个问题......

我已经合并，哪个任务是从只能表示实体之间的 1-1 连接（PROJECT）的现有表和可以表示 N-1 连接（工作者）的表创建联结表行，联结表是（PROJECT-工人），每个项目都应该有一个专门的领导，每个工人都应该有一个项目，但现在我应该有一个 nn 连接......这个合并可以完成这项工作：

但不幸的是，`multiple matched then insert`分支不是 sql 中的“功能”，我该如何解决这个问题。原始查询---)

```
MERGE INTO WORKERPROJECT TARGET
USING (SELECT distinct
               w.worker_id,
               w.worker_type,
               w.project_id worker_project_id, 
               p.project_id project_project_id,
               p.dedicated_project_leader,
               p.dedicated_lead_developer,
               p.dedicated_lead_consultant,
               p.dedicated_supervisor
       from WORKER w 
       join PROJECT p on w.project_id = p.project_id
      ) SOURCE
   ON (SOURCE.worker_type is null)
 WHEN NOT MATCHED THEN INSERT (TARGET.FK_WORKER_ID, TARGET.FK_PROJECT_ID,TARGET.IS_ACTIVE,POSITION) 
  VALUES (SOURCE.WORKER_ID,SOURCE.worker_project_id,'ACTIVE',SOURCE.worker_type);
 WHEN NOT MATCHED THEN INSERT (FK_WORKER_ID, FK_PROJECT_ID,IS_ACTIVE,POSITION)
  VALUES (SOURCE.dedicated_project_leader,SOURCE.project_project_id,'ACTIVE','PROJECTVEZETŐ');
 WHEN NOT MATCHED THEN INSERT (FK_WORKER_ID, FK_PROJECT_ID,IS_ACTIVE,POSITION)  
  INSERT (FK_WORKER_ID, FK_PROJECT_ID,IS_ACTIVE,POSITION) VALUES (SOURCE.dedicated_lead_developer,SOURCE.project_project_id,'ACTIVE','FEJLESZTŐVEZETŐ');
 WHEN NOT MATCHED THEN INSERT (FK_WORKER_ID, FK_PROJECT_ID,IS_ACTIVE,POSITION)
  INSERT (FK_WORKER_ID, FK_PROJECT_ID,IS_ACTIVE,POSITION) VALUES (SOURCE.dedicated_lead_consultant,SOURCE.project_project_id,'ACTIVE','KONZULENSVEZETŐ');
 WHEN NOT MATCHED THEN INSERT (FK_WORKER_ID, FK_PROJECT_ID,IS_ACTIVE,POSITION)
  INSERT (FK_WORKER_ID, FK_PROJECT_ID,IS_ACTIVE,POSITION) VALUES (SOURCE.dedicated_supervisor,SOURCE.project_project_id,'ACTIVE','SUPERVISOR'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:12:13.523

其实你可以。感谢`insert all` [http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9014.htm#i2095116](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9014.htm#i2095116)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T07:10:35.120

如果您需要使用合并执行多个插入，则将不同表中的列添加到初始选择中。像这样的东西：

```
`MERGE INTO regional_dummy a 
USING (SELECT c.ID as IDNO FROM   region_country c    WHERE c.parent_id = '2' ) b
ON ('true' = 'false')
--WHEN MATCHED THEN UPDATE <TODO>
WHEN NOT MATCHED THEN
INSERT
(id,REGIONAL_userid,REGIONAL_NAME,REGIONAL_EMAIL,CREATE_DATE,CREATED_BY,REGION_ID,    COUNTRY_ID,PRODUCT_ID,ACTIVE,REPLACE_FLAG0)
VALUES    (REGIONAL_SEQ.nextval,'12345rg','userName','userEmailId',sysdate,  'rgrover0','2',b.IDNO,'m_product_region','Y' ,'N');` 
```

# c# - Azure v2 GetResponse 无法进行身份验证。错误 403：禁止

> ID：14455930
> 
> 赞同：0
> 
> 时间：2013-01-22T10:05:53.380
> 
> 标签：c#, azure, azure-blob-storage

我正在将 Windows Azure 从 1.7 迁移（叹气）到版本 2，我现在面临着旧身份验证方式的一些麻烦。当我尝试执行下一个代码时（使用 Azure SDK 的旧实现）......

```
[...]

var policy = new SharedAccessBlobPolicy();
policy.SharedAccessStartTime = new DateTimeOffset(DateTime.UtcNow.AddMinutes(-5));
policy.SharedAccessExpiryTime = policy.SharedAccessStartTime.Value.AddMinutes(5);
policy.Permissions = SharedAccessBlobPermissions.Read;

var sas = blobContainer.GetSharedAccessSignature(policy)
var request = WebRequest.Create(string.Format("{0}/{1}{2}", containerUri, blobName, sas));
request.Method = "GET";
var headers = new NameValueCollection();
headers.Add("x-ms-blob-type", "BlockBlob");
request.Headers.Add(headers);
request.ContentLength = 0;

var response = (HttpWebResponse)request.GetResponse();

[...] 
```

... GetResponse() 方法对我很生气，并抛出一个 WebException 说“*服务器无法验证请求。确保 Authorization 标头的值正确形成，包括签名。* ”

ResponseUri 是`http://127.0.0.1:10000/devstoreaccount1/testcontainer/testBlob?sv=2012-02-12&st=2013-01-22T09.52.27Z&se=2013-01-22T09.57.29Z&sr=c&sp=r&sig=WxFfIg9NxKodH7zGjKRym7RuXd61F5jlG6ILtG1UYPg%3D`，对我来说看起来不错。我认为这是 AccountKey 的问题，但在真实存储上尝试使用 Azure 门户提供的正确密钥时，我遇到了同样的问题。

是否需要为新的 REST API 完成任何属性或新的初始化？

**更新**：我在他的回复中尝试了@Gaurav Mantri 开发的控制台应用程序，但它仍然不适合我。所以，我怀疑这个问题可能取决于我机器上的意大利语本地化，或者与 Windows 8 相关的一些东西（在另一位同事的机器上，控制台应用程序也不能正常工作，同样的错误 403，被禁止！由`GetResponse`）。我注意到我们得到的 URI 与我在网上找到的每个示例都不同，所以我将开始和到期时间视为（例如）`2013-01-22T09.52.27Z`而不是`2013-01-22T09%3A52%3A27Z`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:08:22.460

好的，我找到了问题所在。

将该行添加`Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;`到我的代码（或测试初始化​​程序）中将解决问题。

查看 WindowsAzure.Storage 源，当服务创建签名时，它使用格式字符串“yyyy-MM-ddTHH:mm:ssZ”，而不`CultureInfo.InvariantCulture`作为参数传递给`ToString`方法。但是对于意大利区域设置，小时、分钟和秒之间的分隔符是点，而美国是两点。所以我的本地机器和远程机器创建了两个不同的签名，它们无法匹配。

我将此报告为错误（或问题），因为并非每个人都有相同的区域设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:56:58.640

对于 GET 操作，您不需要添加“x-ms-blob-type”请求标头。仅在上传 blob 时才需要。请在删除以下代码行后重试：

```
var headers = new NameValueCollection();
headers.Add("x-ms-blob-type", "BlockBlob");
request.Headers.Add(headers); 
```

更新：这是使用 SAS URI 读取 blob 的完整代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.WindowsAzure.Storage;
using Microsoft.WindowsAzure.Storage.Auth;
using Microsoft.WindowsAzure.Storage.Blob;
using System.Net;
using System.IO;
namespace ConsoleApplication26
{
    class Program
    {
        static void Main(string[] args)
        {
            CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
            CloudBlobContainer blobContainer = storageAccount.CreateCloudBlobClient().GetContainerReference("temp");
            //Create blob container.
            blobContainer.CreateIfNotExists();
            string blobContents = "Let's test SAS out :)";
            byte[] bytes = Encoding.UTF8.GetBytes(blobContents);

            string blobName = "sastest.txt";
            CloudBlockBlob blob = blobContainer.GetBlockBlobReference(blobName);
            //Upload blob
            using (MemoryStream ms = new MemoryStream(bytes))
            {
                blob.UploadFromStream(ms);
            }
            //Get SAS Uri
            var sasUri = GetSasUrl(blobContainer, blobName);
            DownloadBlob(sasUri);

            Console.ReadLine();

        }

        static Uri GetSasUrl(CloudBlobContainer blobContainer, string blobName)
        {
            var policy = new SharedAccessBlobPolicy()
            {
                SharedAccessStartTime = DateTime.UtcNow.AddMinutes(-5),
                SharedAccessExpiryTime = DateTime.UtcNow.AddMinutes(5),
                Permissions = SharedAccessBlobPermissions.Read,
            };

            var sas = blobContainer.GetSharedAccessSignature(policy);
            return new Uri(string.Format("{0}/{1}{2}", blobContainer.Uri, blobName, sas));
        }

        static void DownloadBlob(Uri sasUri)
        {
            var request = (HttpWebRequest)WebRequest.Create(sasUri);
            request.Method = "GET";
            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                long responseContentLength = response.ContentLength;
                byte[] fetchedContents = new byte[(int) responseContentLength];
                using (var stream = response.GetResponseStream())
                {
                    stream.Read(fetchedContents, 0, fetchedContents.Length);
                }
                string blobContents = Encoding.UTF8.GetString(fetchedContents);
                Console.WriteLine("Blob Contents: " + blobContents);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T05:02:12.077

尝试上传文件时出现同样的错误。我进行了一些搜索，但建议的解决方案都没有奏效。

Then I checked the http response object in the inner exception and discovered that I had accidentally created the blob using not a filename but the full file path (c:\folder\folder\file.jpg instead of just file.jpb), so the url it was trying to upload to did not exist.

# ruby-on-rails - 在任何源中都找不到 builder-3.0.0 (Bundler::GemNotFound)

> ID：14455933
> 
> 赞同：0
> 
> 时间：2013-01-22T10:05:56.827
> 
> 标签：ruby-on-rails, gem

我已经在我的服务器[Redmine 1.1.x 上](http://www.redmine.org)[使用](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)了一段时间，我正在尝试将其升级到 2.2.2。我遵循了[升级顺序](http://www.redmine.org/projects/redmine/wiki/RedmineUpgrade)，现在该应用程序不再工作了：

`'block in materialize': Could not find builder-3.0.0 in any of the sources (Bundler::GemNotFound)`

然而：

```
bicou@ssh:~/redmine-2.2.2$ bundle install
Using rake (10.0.3)
Using i18n (0.6.1)
Using multi_json (1.5.0)
Using activesupport (3.2.11)
Using builder (3.0.0)
Using activemodel (3.2.11)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.4)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.2.2)
Using actionpack (3.2.11)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.4.4)
Using actionmailer (3.2.11)
Using arel (3.0.2)
Using tzinfo (0.3.35)
Using activerecord (3.2.11)
Using activeresource (3.2.11)
Using coderay (1.0.8)
Using fastercsv (1.5.5)
Using icalendar (1.2.1)
Using rack-ssl (1.3.2)
Using json (1.7.6)
Using rdoc (3.12)
Using thor (0.16.0)
Using railties (3.2.11)
Using jquery-rails (2.0.3)
Using metaclass (0.0.1)
Using mocha (0.12.3)
Using mysql (2.8.1)
Using net-ldap (0.3.1)
Using pg (0.14.1)
Using ruby-openid (2.1.8)
Using rack-openid (1.3.1)
Using bundler (1.2.3)
Using rails (3.2.11)
Using rmagick (2.13.1)
Using shoulda (2.11.3)
Using sqlite3 (1.3.7)
Using yard (0.8.3)
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
bicou@ssh:~/redmine-2.2.2$ bundle show builder
/home/bicou/gems/gems/builder-3.0.0
bicou@ssh:~/redmine-2.2.2$ env | grep gem
GEM_HOME=/home/bicou/gems/
PATH=/home/bicou/gems/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/games
GEM_PATH=/home/bicou/gems/ 
```

如您所见，安装了builder *v3.0.0*。是什么赋予了？

我所做的尝试：

*   删除 Gemfile.lock 并`bundle install`再次运行
*   Paulo Fidalgo 的建议（见下文）

**根据 Paulo Fidalgo 的建议：**

我的 Gemfile 包含 builder 3.0.0：

```
bicou@ssh:~/redmine-2.2.2$ grep builder Gemfile
gem "builder", "3.0.0"
bicou@ssh:~/redmine-2.2.2$ bundle update
Fetching gem metadata from http://rubygems.org/.........
Fetching gem metadata from http://rubygems.org/..
Using rake (10.0.3)
Using i18n (0.6.1)
Using multi_json (1.5.0)
Using activesupport (3.2.11)
Using builder (3.0.0)
Using activemodel (3.2.11)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.4)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.2.2)
Using actionpack (3.2.11)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.4.4)
Using actionmailer (3.2.11)
Using arel (3.0.2)
Using tzinfo (0.3.35)
Using activerecord (3.2.11)
Using activeresource (3.2.11)
Using bundler (1.2.3)
Using coderay (1.0.8)
Using fastercsv (1.5.5)
Using icalendar (1.2.1)
Using rack-ssl (1.3.2)
Using json (1.7.6)
Using rdoc (3.12)
Using thor (0.16.0)
Using railties (3.2.11)
Using jquery-rails (2.0.3)
Using metaclass (0.0.1)
Using mocha (0.12.3)
Using mysql (2.8.1)
Using net-ldap (0.3.1)
Using pg (0.14.1)
Using ruby-openid (2.1.8)
Using rack-openid (1.3.1)
Using rails (3.2.11)
Using rmagick (2.13.1)
Using shoulda (2.11.3)
Using sqlite3 (1.3.7)
Using yard (0.8.3)
Your bundle is updated! Use `bundle show [gemname]` to see where a bundled gem is installed.
bicou@ssh:~/redmine-2.2.2$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:30:56.253

您需要将构建器添加到您的 Gemfile 中，然后运行：

> 捆绑更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:51:04.643

我遇到了几个问题（例如，一些 gems 编译时使用的 ruby​​ 版本与运行时不同），但主要问题是我的网络主机要求我将 gems 安装到`~/gems`并导出`GEMS_PATH = ~/gems/`！

那，在我的`public/.htaccess`，解决了主要问题：

```
SetEnv GEM_PATH /home/bicou/gems/ 
```

# iphone - 根据 ID 对 NSArray 进行排序

> ID：14455936
> 
> 赞同：0
> 
> 时间：2013-01-22T10:06:03.343
> 
> 标签：iphone, ios, objective-c, sorting, nsarray

我有一个 NSArray 与人们的状态。（例如在线，离线，...）现在我从我的核心数据库中得到了这个。该核心数据库从 Web 服务中获取对象。现在我需要另一个状态（注销）到我的数组的末尾。这就是我在代码中所做的。

```
_arrStatus = [[NSMutableArray alloc]init];
    for (Status *status in matches) {
        [_arrStatus addObject:status];
    }
    BOOL logout = false;
    for (Status *status in matches) {
        if([status.cs_id isEqualToNumber:[NSNumber numberWithInt:0]]){
            logout = true;
        }
    }
    if(!logout){
        Status* newStatus = [NSEntityDescription insertNewObjectForEntityForName:@"Statussen" inManagedObjectContext:context];
        newStatus.cs_id = [NSNumber numberWithInt:0];
        newStatus.cs_name = @"Logout";
        [_arrStatus addObject:newStatus];
    } 
    NSError *error = nil;
    [context save:&error]; 
```

就像你看到的那样，我给了我的“注销状态”ID 0，因为我确信那个 ID 是可用的。这是我的 NSArray 和 ID 的排序方法。

*   注销 -> ID 0
*   在线 -> ID 1
*   离线 -> ID 2
*   缺席 -> ID 3

现在我希望我的数组看起来像这样。

*   在线 -> ID 1
*   离线 -> ID 2
*   缺席 -> ID 3
*   注销 -> ID 0

任何人都有一个 ID 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:10:29.260

改变这个：

```
if(!logout){
    Status* newStatus = [NSEntityDescription insertNewObjectForEntityForName:@"Statussen" inManagedObjectContext:context];
    newStatus.cs_id = [NSNumber numberWithInt:0];
    newStatus.cs_name = @"Logout";
    [_arrStatus addObject:newStatus];
} 
```

对此：

```
if(!logout){
    Status* newStatus = [NSEntityDescription insertNewObjectForEntityForName:@"Statussen" inManagedObjectContext:context];
    newStatus.cs_id = [NSNumber numberWithInt:0];
    newStatus.cs_name = @"Logout";
    [_arrStatus insertObject:newStatus atIndex:0];
} 
```

把日志放在数组的前面。或者，如果您需要对数组进行排序，您可以使用如下内容：

```
NSArray *sortedArray = [_arrStatus sortedArrayUsingComparator: ^(id obj1, id obj2) {
    return (NSComparisonResult)[(Status*)obj1.cs_id compare:(Status*)obj2.cs_id];
}]; 
```

# jquery - 使用 Jquery 验证时无法提交表单

> ID：14455937
> 
> 赞同：2
> 
> 时间：2013-01-22T10:06:07.153
> 
> 标签：jquery, html, forms, validation

使用 Jquery 验证时我无法提交表单。当我提交时，表单会再次重新加载，并且无法执行其他操作，例如发送邮件、生成警报等，这些操作在另一个 php 页面中给出

这是我的代码：

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" class="form" id="contactform">
    <p class="requiredNote">
        <em>*</em> Denotes a required field.
    </p>
    <div class="form-row">
        <label for="name" class="three columns ">Name of Person: <em>*</em></label>
        <input type="text" name="contactname" id="contactname" value="" class="required seven columns" role="input" aria-required="true"  size="30"/>
    </div>
    <div class="form-row">
        <label class="three columns ">Name of Company <em>*</em></label>
        <input type="text" name="subject" id="subject" value="" class="required seven columns" role="input" aria-required="true" size="30"/>
    </div>
    <div class="form-row">
        <label for="message" class="three columns ">Address<em>*</em></label>
        <textarea rows="1" cols="" name="message" id="message" class="required seven columns " role="textbox" aria-required="true"></textarea>
    </div>
    <div class="form-row">
        <label for="phno1" class="three columns " >Phone no <em>*</em></label>
        <input type="tel" name="phno1" id="phno1" value="" class="required seven columns" role="textbox" aria-required="true"  size=""/>
    </div>
    <div class="form-row">
        <label for="phno2" class="three columns ">Mobile no <em>*</em></label>
        <input type="tel" name="phno2" id="phno2" value="" class="required seven columns" role="input" aria-required="true" size="33"/>
    </div>
    <div class="form-row">
        <label for="email" class="three columns ">Email: <em>*</em></label>
        <input name="email" type="text" class="required email seven columns" id="email" value="" size="50" aria-required="true" role="input" />
    </div>
        <div class="form-row">
        <label class="three columns " >Requirement Type:<em>*</em> </label>
        <select class="required  three columns" role="input" aria-required="true" name="reqsize" id="req">
            <option  value="">-------- select --------</option>
            <option  value="Commercial">Commercial</option>
            <option  value="Warehouse">Warehouse</option>
            <option  value="Land">Land</option>
            <option  value="BTS">BTS</option>
        </select>
    </div>
    <div class="form-row">
        <label  for="prefloc" class="three columns " >Preferred Location:<em>*</em></label>
        <select class="required three columns" role="input" aria-required="true" name="prefloc" id="prefloc">
            <option  value="">-------- select --------</option>
            <option value="All" >All</option>
            <option value="Alappuzha" >Alappuzha</option>
            <option value="Alleppey" >Alleppey</option>
            <option value="Aroor" >Aroor</option>
            <option value="Mannar" >Mannar</option>
            <option value="Cheranallur" >Cheranallur</option>
            <option value="Ernakulam" >Ernakulam</option>
            <option value="Aluva" >Aluva</option>
            <option value="Angamaly" >Angamaly</option>
            <option value="Chelavannor" >Chelavannor</option>
            <option value="Chittoor" >Chittoor</option>
            <option value="Chottanikkara" >Chottanikkara</option>
            <option value="Collectorate Kochi" >Collectorate Kochi</option>
            <option value="Eloor" >Eloor</option>
            <option value="Ernakulam City" >Ernakulam City</option>
            <option value="Banerji Road" >Banerji Road</option>
            <option value="Ernakulam North" >Ernakulam North</option>
            <option value="Ernakulam South" >Ernakulam South</option>
            <option value="MG Road" >MG Road</option>
            <option value="Rajaji Road" >Rajaji Road</option>
            <option value="Kundanoor" >Kundanoor</option>
            <option value="Kumaranasan road" >Kumaranasan road</option>
            <option value="Kochi" >Kochi</option>
            <option value="Edappally" >Edappally</option>
            <option value="Kakkanad" >Kakkanad</option>
            <option value="Kaloor" >Kaloor</option>
            <option value="Elamakkara" >Elamakkara</option>
            <option value="Vyttila" >Vyttila</option>
            <option value="Vennala" >Vennala</option>
            <option value="Vaduthala" >Vaduthala</option>
            <option value="Vallarpadam" >Vallarpadam</option>
            <option value="Chembumukku" >Chembumukku</option>
            <option value="Gandhi Nagar" >Gandhi Nagar</option>
            <option value="Irumpanam" >Irumpanam</option>
        </select>
    </div>
    <div class="form-row">
        <label  for="prefcity" class="three columns " >Preferred City:<em>*</em></label>
        <select class="required three columns" role="input" aria-required="true" name="prefcity" id="prefcity">
            <option  value="">-------- select --------</option>
            <option  value="Ernakulam">Ernakulam</option>
            <option   value="Kottayam ">Kottayam </option>
            <option   value="Kollam">Kollam</option>
            <option   value="Thrissur">Thrissur</option>
            <option value="Thiruvananthapuram">Thiruvananthapuram</option>
        </select>
    </div>
    <div class="form-row">
        <label for="size" class="three columns " >Sqft details</label>
        <input name="sqft" type="text" id="sqft" class="three columns"/>
    </div>
        <div class="form-row">
        <label for="floor" class="three columns "  >Preferred Floors: <em>*</em></label>
        <select class="required  three columns" role="input" aria-required="true" name="floor" id="preffloor">
            <option  value="">-------- select --------</option>
            <option  value="1">1</option>
            <option  value="2">2</option>
            <option  value="3">3</option>
            <option  value="4">4</option>
        </select>
    </div>
    <div class="form-row">
        <label  for="shell" class="three columns "  >Shell Type:<em>*</em></label>
        <select class="required three columns" role="input" aria-required="true" name="shell" id="shell">
            <option  value="">-------- select --------</option>
            <option  value="Bare">Bare</option>
            <option   value="Warm or Plug">Warm or Plug</option>
            <option   value="play">play</option>
        </select>
    </div>
    <div class="form-row">
        <label  for="car" class="three columns " >Required car parks:<em>*</em></label>
        <select  name="car" class="three columns" id="car">
            <option  value="">-------- select --------</option>
            <option  value="20">20</option>
            <option   value="30">30</option>
            <option   value="40">40</option>
            <option   value="50">50</option>
        </select>
    </div>
    <div class="form-row">
        <label for="" class="three columns ">Required power:<em>*</em> </label>
        <select  name="power" class="three columns" id="power">
            <option  value="">-------- select --------</option>
            <option  value="35 KVA">35 KVA</option>
            <option  value="45 KVA">45 KVA</option>
            <option  value="55 KVA">55 KVA</option>
            <option  value="65 KVA">65 KVA</option>
        </select>
    </div>
    <div class="form-row">
        <label for="" class="three columns ">Rental Range per sft:<em>*</em> </label>
        <select  name="sftrange" class="three columns" id="sftrange">
            <option  value="">-------- select --------</option>
            <option  value="1000 sft-1500 sft">1000 sft-1500 sft</option>
            <option  value="2000 sft-2500 sft">2000 sft-2500 sft</option>
            <option  value="3000 sft-3500 sft">3000 sft-3500 sft</option>
            <option  value="4000 sft-4500 sft">4000 sft-4500 sft</option>
        </select>
    </div>
    <div class="form-row">
        <label for="" class="three columns ">Expected Time frame to acquire the poperty:</label>
        <input type="text" name="expt" id="" value=""  size="" class="seven columns" />
    </div>
    <div class="form-row">
        <label for="sugg" class="three columns ">Specifications, if any:</label>
        <textarea name="sugg" cols="" rows="1" class="seven columns"></textarea>
    </div>
    <div class="form-row">
        <label  for=" " class="three columns">Captcha:<em>*</em></label>
        <img src="php_captcha.php" border="0"  />
        <input name="captcha_value" type="text" id="captcha_value"  placeholder="Enter Captcha"/>
    </div>
    <div style="position:relative" class="form-row" >
        <p style="position:absolute;left:22%;top:4%">
            <input type="image" value="Send Message" name="submitButton" id="submitButton" src="assets/img/submit_btn.png" title="Click here to submit your message!" />
        </p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
    </div>
</form> 
```

验证1.js：

```
$(document).ready(function() {

var jVal = {
    'contactname' : function() {

        $('body').append('<div id="contactInfo" class="info"></div>');

        var contactInfo = $('#contactInfo');
        var ele = $('#contactname');
        var pos = ele.offset();

        contactInfo.css({
            top : pos.top - 3,
            left : pos.left + ele.width() + 15
        });

        if (ele.val().length < 6) {
            jVal.errors = true;
            contactInfo.removeClass('correct').addClass('error').html('&larr; at least 6 characters').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            contactInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },

    'subject' : function() {

        $('body').append('<div id="subjectInfo" class="info"></div>');

        var subjectInfo = $('#subjectInfo');
        var ele = $('#subject');
        var pos = ele.offset();

        subjectInfo.css({
            top : pos.top - 3,
            left : pos.left + ele.width() + 15
        });

        if (ele.val().length < 4) {
            jVal.errors = true;
            subjectInfo.removeClass('correct').addClass('error').html('&larr; at least 4 characters').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            subjectInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'message' : function() {

        $('body').append('<div id="nameInfo" class="info"></div>');

        var nameInfo = $('#nameInfo');
        var ele = $('#message');
        var pos = ele.offset();

        nameInfo.css({
            top : pos.top - 3,
            left : pos.left + ele.width() + 15
        });

        if (ele.val().length < 25) {
            jVal.errors = true;
            nameInfo.removeClass('correct').addClass('error').html('&larr; at least 25 characters').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            nameInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },

    'phno1' : function() {

        $('body').append('<div id="phnInfo" class="info"></div>');

        var phnInfo = $('#phnInfo');
        var ele = $('#phno1');
        var pos = ele.offset();

        phnInfo.css({
            top : pos.top - 3,
            left : pos.left + ele.width() + 15
        });

        var patt = /^[0-9-+]+$/i;

        if (!patt.test(ele.val())) {

            jVal.errors = true;
            phnInfo.removeClass('correct').addClass('error').html('&larr; type phone no. in correct format').show();
            ele.removeClass('normal').addClass('wrong');

        }
        if (ele.val().length < 10 || ele.val().length > 12) {
            jVal.errors = true;
            phnInfo.removeClass('correct').addClass('error').html('&larr; type phone no. in correct format').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            phnInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'phno2' : function() {

        $('body').append('<div id="birthInfo" class="info"></div>');

        var birthInfo = $('#birthInfo');
        var ele = $('#phno2');
        var pos = ele.offset();

        birthInfo.css({
            top : pos.top - 3,
            left : pos.left + ele.width() + 15
        });

        var patt = /^[0-9-+]+$/i;

        if (!patt.test(ele.val())) {

            jVal.errors = true;
            birthInfo.removeClass('correct').addClass('error').html('&larr; type phone no. in correct format').show();
            ele.removeClass('normal').addClass('wrong');

        }
        if (ele.val().length < 10 || ele.val().length > 12) {
            jVal.errors = true;
            birthInfo.removeClass('correct').addClass('error').html('&larr; type phone no. in correct format').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            birthInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'email' : function() {

        $('body').append('<div id="emailInfo" class="info"></div>');

        var emailInfo = $('#emailInfo');
        var ele = $('#email');
        var pos = ele.offset();

        emailInfo.css({
            top : pos.top - 3,
            left : pos.left + ele.width() + 15
        });

        var patt = /^.+@.+[.].{2,}$/i;

        if (!patt.test(ele.val())) {
            jVal.errors = true;
            emailInfo.removeClass('correct').addClass('error').html('&larr; give me a valid email adress, ok?').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            emailInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'req' : function() {

        $('body').append('<div id="genderInfo" class="info"></div>');

        var genderInfo = $('#genderInfo');
        var ele = $('#req');
        var pos = ele.offset();

        genderInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });

        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            genderInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            genderInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'prefloc' : function() {

        $('body').append('<div id="preflocInfo" class="info"></div>');

        var preflocInfo = $('#preflocInfo');

        var ele = $('#prefloc');
        var pos = ele.offset();

        preflocInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });
        //if($('select[name="prefloc"]:selected').length === 0)
        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            preflocInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            preflocInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'prefcity' : function() {

        $('body').append('<div id="prefcityInfo" class="info"></div>');

        var prefcityInfo = $('#prefcityInfo');

        var ele = $('#prefcity');
        var pos = ele.offset();

        prefcityInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });
        //if($('select[name="prefcity"]:selected').length === 0)
        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            prefcityInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            prefcityInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'preffloor' : function() {

        $('body').append('<div id="preffloorInfo" class="info"></div>');

        var preffloorInfo = $('#preffloorInfo');

        var ele = $('#preffloor');
        var pos = ele.offset();

        preffloorInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });
        //if($('select[name="preffloor"]:selected').length === 0)
        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            preffloorInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            preffloorInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },

    'shell' : function() {

        $('body').append('<div id="shellInfo" class="info"></div>');

        var shellInfo = $('#shellInfo');

        var ele = $('#shell');
        var pos = ele.offset();

        shellInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });
        //if($('select[name="shell"]:selected').length === 0)
        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            shellInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            shellInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },

    'car' : function() {

        $('body').append('<div id="carInfo" class="info"></div>');

        var carInfo = $('#carInfo');

        var ele = $('#car');
        var pos = ele.offset();

        carInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });
        //if($('select[name="car"]:selected').length === 0)
        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            carInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            carInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'power' : function() {

        $('body').append('<div id="powerInfo" class="info"></div>');

        var powerInfo = $('#powerInfo');

        var ele = $('#power');
        var pos = ele.offset();

        powerInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });
        //if($('select[name="power"]:selected').length === 0)
        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            powerInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            powerInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'sftrange' : function() {

        $('body').append('<div id="sftrangeInfo" class="info"></div>');

        var sftrangeInfo = $('#sftrangeInfo');

        var ele = $('#sftrange');
        var pos = ele.offset();

        sftrangeInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 25
        });
        //if($('select[name="sftrange"]:selected').length === 0)
        if (ele.length == 0 || $(ele).val() == "") {
            jVal.errors = true;
            sftrangeInfo.removeClass('correct').addClass('error').html('&larr; please select your choice').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            sftrangeInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },
    'captcha_value' : function() {

        $('body').append('<div id="captchaInfo" class="info"></div>');

        var captchaInfo = $('#captchaInfo');
        var ele = $('#captcha_value');
        var pos = ele.offset();

        captchaInfo.css({
            top : pos.top + 1,
            left : pos.left + ele.width() + 15
        });

        if (ele.val().length < 6) {
            jVal.errors = true;
            captchaInfo.removeClass('correct').addClass('error').html('&larr; Please enter given captcha').show();
            ele.removeClass('normal').addClass('wrong');
        } else {
            captchaInfo.removeClass('error').addClass('correct').html('&radic;').show();
            ele.removeClass('wrong').addClass('normal');
        }
    },

    /*'sendIt' : function() {
        if (!jVal.errors) {
            $('#contactform').submit();
        }
    }*/
};

// ====================================================== //

$('#submitButton').click(function() {
    var obj = $.browser.webkit ? $('body') : $('html');
    obj.animate({
        scrollTop : $('#contactform').offset().top
    }, 750, function() {
        jVal.errors = false;
        jVal.contactname();
        jVal.subject();
        jVal.message();
        jVal.phno1();
        jVal.phno2();
        jVal.email();
        jVal.req();
        jVal.prefloc();
        jVal.prefcity();
        jVal.preffloor();
        jVal.shell();
        jVal.car();
        jVal.power();
        jVal.sftrange();
        jVal.captcha_value();
        jVal.sendIt();
    });
    return false;
});

$('#contactname').change(jVal.contactname);
$('#subject').change(jVal.subject);
$('#message').change(jVal.message);
$('#phno1').change(jVal.phno1);
$('#phno2').change(jVal.phno2);
$('#email').change(jVal.email);
$('input[name="req"]').change(jVal.req);
$('select[name="prefloc"]').change(jVal.prefloc);
$('select[name="prefcity"]').change(jVal.prefcity);
$('select[name="preffloor"]').change(jVal.preffloor);
$('select[name="shell"]').change(jVal.shell);
$('select[name="car"]').change(jVal.car);
$('select[name="power"]').change(jVal.power);
$('select[name="sftrange"]').change(jVal.sftrange);
$('#captcha_value').change(jVal.captcha_value); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:58:45.273

您的 sendit 函数位于注释块内。这是造成你的问题吗？因为现在没有提交表单？

此外，如果您取消注释，请确保 jVal.errors 存在，因为我找不到它（或者我正在阅读它）。

# xcode - 如何存储一个号码直到下一个会话？

> ID：14455948
> 
> 赞同：0
> 
> 时间：2013-01-22T10:06:36.297
> 
> 标签：xcode, integer, store, nsuserdefaults

我如何存储一个数字，可能是一个整数，所以它是返回使用下一个会话。假设可以通过某种方式使用 NSUserdefaults 但不知道如何使用。如果我想为已经存储的数字添加一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:16:51.330

您可以保存整数值，例如：

```
 NSUserDefaults *setObj = [NSUserDefaults standardUserDefaults];
  [setObj setValue:[NSNumber numberWithInt:100] forKey:@"Integer"];
  [setObj synchronize]; 
```

获取整数值`NSUserDefaults`

```
 NSUserDefaults *getObj = [NSUserDefaults standardUserDefaults];
  int Number = [((NSNumber*)[getObj objectForKey:@"Integer"]) intValue]; 
```

# ios - 如何通过标签与控制器交互

> ID：14455949
> 
> 赞同：0
> 
> 时间：2013-01-22T10:06:36.353
> 
> 标签：ios, objective-c, cocoa-touch

我的视图上有许多不同的控制器，我有一些通过代码创建的pickerview，例如：

```
UIPickerView *picker = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 243, 320, 216)];
switch (sender.tag){
    case 0:
        picker.tag = 0;
        break;
    case 1:
        picker.tag = 1;
        break;
    case 2:
        picker.tag = 2;
        break;
    case 3:
        picker.tag = 3;
        break;
}

picker.delegate=self;
picker.dataSource = self;
picker.showsSelectionIndicator = YES;
[self.view addSubview:picker]; 
```

现在我需要使用它的默认设置（`viewdidload`）。如何使用标签来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:14:29.860

```
UIPickerView *picker = [self.view viewWithTag:X];
[picker adjustIt]; 
```

# javascript - 如何在我的网站中显示其他网站的一部分？

> ID：14455950
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:06:39.107
> 
> 标签：javascript, jquery, asp.net

假设在其他网站中存在一个`div element`，其中包含一个`table`。`div element`期间内容的变化。我想`div element`在我的网站上展示它的内容。是否可以使用 Asp 或 jquery 或 javascript 或其他方式？我听说过套接字编程。

**编辑：**
我不想要整个网页。只是其中的一部分。我认为 Iframe 帮不了我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:08:48.047

使用普通的 JS/浏览器编程，使用 iframe，因为：

*   除非远程服务器支持通常不支持[的跨域资源共享 (CORS)](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) ，否则 AJAX 不能跨域。
*   套接字、JSON 或 JSONP 需要一些服务器逻辑来与您的代码交互，我非常怀疑它是否在远程服务器上实现。

因此，除非您控制*可以*实现逻辑或允许 CORS 的远程服务器，否则您无能为力。

或者...

如果您有权访问您的服务器，则可以让您的服务器充当代理并为您读取远程页面。服务器未绑定到[同源策略 (SOP)](http://en.wikipedia.org/wiki/Same_origin_policy)，因此可以读取远程页面。有了这个，您可以使用 AJAX 请求您的服务器。

它像

```
Your browser <-AJAX-> your server <-wget/curl/fopen/whatever-> remote server 
```

到您的服务器的请求 url 通常看起来像（未编码）：

```
http://mysite.com/remoteread.php?remote_url=http://myremotesite.com/thispage.php 
```

然后`remoteread.php`读取远程页面，并简单地将回复“中继”到您的浏览器。

发现[雅虎的一篇文章](http://developer.yahoo.com/javascript/howto-proxy.html)更详细地解释了该方法

# javascript - 用鼠标悬停时突出显示整个系列

> ID：14455951
> 
> 赞同：0
> 
> 时间：2013-01-22T10:06:40.163
> 
> 标签：javascript, hover, highcharts, highlight

当我用鼠标悬停一个点时，该点会突出显示。是否可以突出整个系列来代替单点？[jfiddle](http://jsfiddle.net/jU7Bq/1/)中的一个例子：

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container'
            },
            series: [{
                type: 'line',
                data: [[0, 1.11], [1, 4.51], [2, 4]],
            },{
                type: 'line',
                data: [[0, 2.11], [1, 3.51], [2, 2]],
            }]
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:04:55.823

您可以更改系列的线宽，如 api 中所述：

> [http://api.highcharts.com/highcharts#plotOptions.series.states.hover.lineWidth](http://api.highcharts.com/highcharts#plotOptions.series.states.hover.lineWidth)

```
plotOptions: {
            series: {
                states: {
                    hover: {
                        enabled: true,
                        lineWidth: 5
                    }
                }
            }
        }, 
```

# mongodb - 通过循环删除引用

> ID：14455952
> 
> 赞同：0
> 
> 时间：2013-01-22T10:06:44.050
> 
> 标签：mongodb

字段“attributeMetaDataList”具有类似的参考

```
, "path" : "Health & Personal Care > Health > Health Aids > Bathroom Aids & Safety > Bathtub Rails", "attributeMetaDataList" : [    {
        "$ref" : "AttributeMetadata",
        "$id" : ObjectId("50726bd4e4b0adf08145e4f1")
    },  {
        "$ref" : "AttributeMetadata",
        "$id" : ObjectId("50726bd4e4b0adf08145e4f2")
    },  {
        "$ref" : "AttributeMetadata",
        "$id" : ObjectId("50726bd4e4b0adf08145e4f3")
    },  {
        "$ref" : "AttributeMetadata",
        "$id" : ObjectId("50726bd4e4b0adf08145e4f4")
    },  {
        "$ref" : "AttributeMetadata",
        "$id" : ObjectId("50726bd4e4b0adf08145e4f5")
    } ] 
```

我想通过循环删除这个引用。

我用过，

```
db.Category.find({"path": /Health & Personal Care/}).forEach(function(x){
  x.attributeMetaDataList=$unset
 }
) 
```

这对我不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:42:46.757

```
db.Category.find({"path":/^Health/}).forEach(function(x){
  db.Category.update({_id:x._id},{$unset:{"attributeMetaDataList":1}})
}) 
```

它对我有用。

# android - 内存不足问题

> ID：14455957
> 
> 赞同：1
> 
> 时间：2013-01-22T10:07:07.227
> 
> 标签：android

我知道这个问题被讨论了一千次，但这里的主题号是 1001。我正在为 android 开发一个游戏，每次都在设备上测试它（我不能使用模拟器）。最后，我收到了内存不足的消息，无法进一步测试。当然，起初我删除了所有不必要的东西，然后是一些必要但很少使用的东西，我清除了我找到的每个缓存，我可以删除的每个文件/程序等等。现在我安装的应用程序很少（比我用的少得多），大约 130 MB 可用内部存储器和 2 GB 可用内部 sd 卡。我的应用程序在清单中使用“preferExternal”选项，我的设备的 android 版本是 2.3.6。而且我**仍然**无法安装我的应用程序的新版本，即使在删除旧版本之后也是如此。我越来越绝望了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T07:42:21.737

我正在使用 cyanogemod 11。安装新 rom 后，我收到消息“内存不足”并且无法安装任何其他应用程序。

我的解决方案：删除/data/lost+found下的所有文件

如何：

*   启动终端
*   输入 su 获取超级用户权限
*   转到 lost+found： cd /data/lost+found
*   rm -r * 删除此目录中的所有数据

# haskell - 在 Haskell 中实现按值调用的 lambda 演算

> ID：14455958
> 
> 赞同：2
> 
> 时间：2013-01-22T10:07:08.567
> 
> 标签：haskell, interpreter, lambda-calculus

在 Haskell 中实现按值调用 lambda 演算时，我是否应该强制评估对象语言中函数的参数（即按值调用 lambda 演算）以绕过按需调用元语言（即 Haskell）的评估顺序？

具体来说，对于以下使用高阶抽象语法的实现：

```
data Exp
  = Abs (Exp -> Exp)
  | App Exp Exp

eval :: Exp -> Exp
eval exp = case exp of
  Abs _       -> exp
  App opr opd -> case eval opr of
    Abs fun -> eval (fun $ eval opd)  -- argument evaluation 
```

在与评论一致的情况下，我是否应该改为`eval opd`使用强制评估`fun $! eval opd`？

我知道对象和元级别之间的评估顺序依赖可以通过 CPS 转换来避免。但我暂时不想打扰它。我只是想确保在 Haskell 中忠实地实现按值调用。我提出这个问题是因为我见过的许多示例实现似乎都没有考虑到这一点。我的意思是那些实现不强制`eval opd`. 不知是他们忽略了还是我考虑太多了。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T12:46:06.407

`$!`只要`eval e`在元语言中评估弱头范式对应于评估`e`对象语言中的值，使用在这里确实有效。

让我通过向`Exp`数据类型添加一个新的构造函数来表示一个发散的计算，以及一个我们可以实际打印的值来证明这一点：

```
data Exp
  = Abs (Exp -> Exp)
  | App Exp Exp
  | Bot
  | Value

printExp :: Exp -> String
printExp Bot = "bottom"
printExp Value = "base value"
printExp (Abs _) = "function"
printExp (App _ _) = "thunk" 
```

为简单起见，让我们将其转换为`error`评估函数中的调用。

```
eval :: Exp -> Exp
eval exp = case exp of
  Bot         -> error "Evaluation would not terminate "
  Value       -> Value
  Abs _       -> exp
  App opr opd -> case eval opr of
    Abs fun -> eval (fun $ eval opd) 
```

现在我们可以看看这是否是按值调用。下面的代码应该发散，因为我们将底部传递给一个函数。唉，它没有：

```
*Main> let e = App (Abs (\_ -> Value)) Bot
*Main> printExp e
"thunk"
*Main> printExp (eval e)
"base value" 
```

改成 有帮助`$`吗`$!`？是的，它确实：

```
*Main> let e = App (Abs (const Value)) Bot
*Main> printExp (eval e)
"*** Exception: Evaluation would not terminate 
```

但这有多可靠？必须仔细检查对数据类型的任何更改，`Exp`以查看是否强制最外面的构造函数是您想要的，例如引入对。

使用起来可能更可靠一些`deepseq`，即`$!!`. 但我真正建议的是添加一个`isValue :: Exp -> Bool`谓词，显式检查参数是否是您的对象语言的基值，并`isValue (eval opd)`在`eval`调用`fun`.

# objective-c - 如何识别 iPad 中的键盘向下击键

> ID：14455963
> 
> 赞同：1
> 
> 时间：2013-01-22T10:07:17.730
> 
> 标签：objective-c, ipad, cocoa-touch

我正在开发一个 ipad 应用程序。通过表单获取用户信息，它在 scrollView 中包含多个 UITextfeilds。现在我想识别键盘按下按键以排列表单，如果用户将表单留在中间。不确定我是否可以使用 ascii 值。任何人都知道键盘按下的 ascii 值。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:14:53.833

尝试使用`textFieldDidEndEditing`的方法`<UITextFieldDelegate>`

# c# - c# 打印机属性 WMI

> ID：14455964
> 
> 赞同：1
> 
> 时间：2013-01-22T10:07:28.397
> 
> 标签：c#, .net-4.0, printing, status

你好我有这个代码来检索打印机属性：

```
string printerName = "PrinterName";
string query = string.Format("SELECT * from Win32_Printer " 
                                + "WHERE Name LIKE '%{0}'",
                             printerName);

ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
ManagementObjectCollection coll = searcher.Get();

foreach (ManagementObject printer in coll)
{
    foreach (PropertyData property in printer.Properties)
    {
          Console.WriteLine(string.Format("{0}: {1}", 
                                          property.Name, 
                                          property.Value));
    }
} 
```

但是我需要的属性总是返回相同的：

打印机状态：0

打印机状态：3

基本上我需要这个来检查打印机是否缺纸。我认为是：PrinterState：4

在 wxp-86 和 w7-64 上测试返回相同，.Net 4.0

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T16:49:39.913

我也遇到了这个问题，没有简单的解决方法。

**问题的原因**是 Windows Management Instrumentation (WMI) 从***spoolsv.exe***进程中检索打印机信息。因此检索到的信息的可靠性完全取决于打印机驱动程序。您正在查询信息的打印机驱动程序很可能绕过后台处理程序来获取状态，或者它没有向后台处理程序进程报告状态。

**Win32_Printer**将报告假脱机程序中包含的任何状态。因此，如果假脱机程序报告*Ready*，则它永远不会收到状态更改的数据，因为默认值为*Ready*。**Win32_Printer**只是将其导出为*空闲*（PrinterStatus = 3 或 PrinterState = 0）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:29:20.153

根据[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394363%28v=vs.85%29.aspx)，**Paper Out=5**

```
using System;
using System.Management;
using System.Windows.Forms;

namespace WMISample
{
    public class MyWMIQuery
    {
        public static void Main()
        {
            try
            {
                string printerName = "PrinterName";
                ManagementObjectSearcher searcher = 
                    new ManagementObjectSearcher("root\\CIMV2", 
                    "SELECT * FROM Win32_Printer "
                     + "WHERE Name LIKE '%{0}'", printerName);); 

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Win32_Printer instance");
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("PrinterStatus: {0}", queryObj["PrinterStatus"]);
                }
            }
            catch (ManagementException e)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:15:57.627

这一行：

```
string query = string.Format("SELECT * from Win32_Printer " 
                            + "WHERE Name LIKE '%{0}'",
                         printerName); 
```

尝试在打印机名称后使用 % 调用它：

```
string query = string.Format("SELECT * from Win32_Printer " 
                            + "WHERE Name LIKE '%{0}%'",
                         printerName); 
```

通常打印机名称是：“[printername] On [port]”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-01T02:55:05.347

此外，您可以检查扩展打印机状态和其他属性；有线打印机可以提供比无线打印机（Lan、WLan、蓝牙）更多的信息。

[https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-printer](https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-printer)

```
using System;
using System.Management;
using System.Windows.Forms;

namespace PrinterSet
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            QueryOnWMI();
        }

        private void QueryOnWMI()
        {
            try
            {
                // Common Information Model v2 (namespace)
                string scope = @"root\CIMV2";
                string printerName = printerNameTextBox.Text.Trim();
                //printerName = "%DocuCentre%";
                string query = "SELECT * FROM Win32_Printer";
                if (!string.IsNullOrEmpty(printerName))
                {
                    query += $" WHERE Name Like '%{printerName}%'";
                }
                Console.Clear();
                var searcher = new ManagementObjectSearcher(scope, query);
                var result = searcher.Get();
                if (result == null || result.Count == 0)
                {
                    Console.WriteLine($"Printer '{printerName}' not found");
                }
                var line = new string('-', 40);
                foreach (ManagementObject queryObj in result)
                {
                    Console.WriteLine(line);
                    Console.WriteLine($"Printer : {queryObj["Name"]}");
                    ushort ps = Convert.ToUInt16(queryObj["PrinterStatus"]);
                    var psEnum = (PrinterStatus)ps;
                    Console.WriteLine("PrinterStatus: {0} ({1})", psEnum, ps);
                    ps = Convert.ToUInt16(queryObj["ExtendedPrinterStatus"]);
                    var psExtended = (ExtendedPrinterStatus)ps;
                    Console.WriteLine("Extended Status: {0} ({1})", psExtended, ps);
                    //var papers = (string[])queryObj["PrinterPaperNames"];
                    //foreach (var paper in papers)
                    //{
                    //    Console.WriteLine("Paper Name: {0}", paper);
                    //}
                    Console.WriteLine(line);
                }
            }
            catch (ManagementException emx)
            {
                // TRY => NET STOP SPOOLER
                // Generic failure is thrown 
                MessageBox.Show(this, "Invalid query: " + emx.Message);
            }
        }

        public enum PrinterStatus : UInt16
        {
            Other = 1, Unknown = 2, Idle = 3, Printing= 4, Warmup = 5, StoppedPrinting = 6, Offline = 7, 
        }

        public enum ExtendedPrinterStatus : UInt16
        {
            Other = 1, Unknown = 2, Idle = 3, Printing, WarmingUp, StoppedPrinting, Offline, Paused, Error, 
            Busy, NotAvailable, Waiting, Processing, Initialization, PowerSave, PendingDeletion, IOActive, ManualFeed

        }

        private void button1_Click(object sender, EventArgs e)
        {
            QueryOnWMI();
        }
    }
} 
```

您还可以探索 Windows spooler API： [https ://docs.microsoft.com/en-us/windows-hardware/drivers/print/introduction-to-spooler-components](https://docs.microsoft.com/en-us/windows-hardware/drivers/print/introduction-to-spooler-components)

还有这个： [windows-printer-driver@stackoverflow](https://stackoverflow.com/questions/45051298/windows-printer-driver/45138072#45138072)

安东尼奥

# mysql - Distinct 没有按预期工作

> ID：14455965
> 
> 赞同：0
> 
> 时间：2013-01-22T10:07:29.833
> 
> 标签：mysql, distinct

我`distinct`在我的中使用`query`，但它仍然给我重复的输入`id`。我究竟做错了什么？这是我的代码：

```
SELECT distinct(sd_did),sd_uid,sd_time 
FROM shared_deals 
WHERE sd_uid = '".$uid."' 
ORDER BY sd_time DESC"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:09:48.173

Distinct here 可能仅适用于一个字段，如果您还获取其他值，则可以尝试

```
SELECT sd_did,sd_uid,sd_time 
FROM shared_deals 
WHERE sd_uid = '".$uid."' 
GROUP BY sd_did
ORDER BY sd_time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:19:47.553

如果您希望 (sd_did,sd_uid,sd_time) 的组合不同，请使用以下代码：

```
选择 sd_did
             ,sd_uid
             ,sd_time
FROM shared_deals
WHERE sd_uid = '".$uid."'
按 sd_did、sd_uid、sd_time 分组
按 sd_time DESC 排序；

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:13:31.817

我认为`distinct`适用于所有选定的列，这意味着如果在你的结果中你有`sd_did=1,sd_uid=1`并且`sd_did=1,sd_uid=2`distinct 不会像你期望的那样工作，因为这两行是不同的

# xml - XPath for nodes where a subnode has attribute AND contains text

> ID：14455966
> 
> 赞同：1
> 
> 时间：2013-01-22T10:07:31.883
> 
> 标签：xml, xslt, xpath, xslt-1.0

Can't see to complete this, in theory relatively simple task:

Find nodes Document where Field has attribute Name that contains specific text AND where subnodes Option has a value.

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<root>
...
    <Documents>
    <Document Id="35330">
        <Name>The Name 1</Name>
        <DocumentEdition>
            <Fields>            
                <Field Name="Børn-Andet Godt" FieldType="CheckBoxGroup">
                    <Option Name="Billedkunst"></Option>           
                </Field>
                <Field Name="Børn-Fritidsklub" FieldType="CheckBoxGroup">
                    <Option Name="Fritidshjem"></Option>
                    <Option Name="Fritidsklub"></Option>
                    <Option Name="Ungdomsklubber"></Option>
                </Field>
                <Field Name="Børn-Fritidsliv" FieldType="CheckBoxGroup">
                    <Option Name="Natur- og fritidsforeninger"></Option>
                    <Option Name="Rollespil"></Option>
                    <Option Name="Spejder">B-Spejder</Option>
                </Field>
            </Fields>
        </DocumentEdition>
    </Document>
        <Document Id="35332">
            <Name>The Name 2</Name>
            <DocumentEdition>
                <Fields>
                    <Field Name="Børn-Andet Godt" FieldType="CheckBoxGroup">
                        <Option Name="Billedkunst"></Option>
                    </Field>
                    <Field Name="Børn-Fritidsklub" FieldType="CheckBoxGroup">
                        <Option Name="Fritidshjem">Fritidshjem</Option>
                        <Option Name="Fritidsklub"></Option>
                        <Option Name="Ungdomsklubber"></Option>
                    </Field>
                    <Field Name="Børn-Fritidsliv" FieldType="CheckBoxGroup">
                        <Option Name="Natur- og fritidsforeninger"></Option>
                        <Option Name="Rollespil"></Option>
                        <Option Name="Spejder"></Option>
                    </Field>
                </Fields>
            </DocumentEdition>
        </Document>
    </Documents>
..
</root> 
```

So I'd like to be able to apply templates to documents like

```
 <xsl:apply-templates select="//Document[/DocumentEdition/Fields/Field[contains(@Name,'Børn-Fritid')]/Option/text()&gt;'']"/> 
```

But that dosen't work.

**Just to specify:** Document must have text in an Option that is a subnode to the Field on which the `@Name` contains a specific text.

In the xml, using the input values:

1 : Børn-Fritidsliv => Selects the first document

2 : Børn-Fritidsklub => Selects the second document

3 : Børn-Fritid => Selects BOTH document

Please point me in the right direction.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:13:00.360

Drop the leading slash in the predicate and check whether there is an Option with content i.e. change

```
<xsl:apply-templates 
 select="//Document[/DocumentEdition/Fields/Field[contains(@Name,'Børn-Fritid')]/Option/text()&gt;'']"/> 
```

to

```
<xsl:apply-templates 
 select="//Document[DocumentEdition/Fields/Field[contains(@Name,'Børn-Fritid') and Option[normalize-space()]]]"/> 
```

# delphi - 在设计时设置特定类型的所有组件的属性

> ID：14455968
> 
> 赞同：1
> 
> 时间：2013-01-22T10:07:32.937
> 
> 标签：delphi, delphi-7

Delphi 7中是否有办法在设计时将特定类型的所有组件的属性设置为整个项目的特定值？

我已经使用 GExperts 将我的所有`TQuery`'s 替换为`TADOQuery`'s，但需要相应地设置连接字符串。

我曾尝试使用 GExperts“设置组件属性”，但这似乎不适用于连接属性。

我想在 .dfm 文件中进行搜索和替换，但连接属性在手动设置之前不会存储在 .dfm 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:07:08.323

首先，将所有查询链接到 a`TADOConnection`并仅在该组件上指定连接字符串会更聪明。连接字符串是一件事，在开发过程中可能会更改几次，更不用说它可能会从客户端更改为客户端。将它放在每一个上`TADOQuery`都相当于对其进行硬编码。这可不是个好主意。

其次，好好考虑一下，使用 grep 工具检查`TADOQuery`您拥有的组件的实际数量。很可能手动完成此操作，无需任何工具：不能代表他人发言，但我敢肯定，我宁愿手动更改 100 个查询，然后再使用工具。即使您使用工具，您仍然需要检查所有 DFM 以确保它们仍处于正常工作状态。这需要您在 IDE 中将它们全部打开。

最后，如果没有自动的方法，这个问题的答案是不完整的，这里有一个简单的方法。

这是一个简短的过程，它采用 DFM 文件的名称、组件类的名称和您想要在 DFM 中的值。它将查找该值并确保该属性具有给定的名称。如果该属性不存在，则添加该属性。你会这样使用它：

```
FixComponentPropertyInDFM('Unit16.dfm', 'TPanel', 'Caption', '''Changed Caption'''); 
```

**代码**，没有使用正则表达式来确保它在 Delphi 7 中编译。一半的代码处理识别 DFM 文件中的模式，因此使用正则表达式会使代码大小减少 1/4。

```
procedure FixComponentPropertyInDFM(const FileName:string; const ClassName, PropertyName, RequiredValue: string);
var L: TStringList;
    i,j, iEnd, iLine: Integer;
    ExtraObjectCount: Integer;
    cLine, trimedLine, TestLine: string;
    lcSufixString: string;
    lcSufixLen: Integer;
    lcPropertyPrefix: string;
    lcPropertyPrefixLen: Integer;
    DelphiId: AnsiString;
    ValidId: Boolean;
    CorrectLineValue: string;

    ChangedTheDFM: BOolean;
begin
  lcSufixString := LowerCase(': ' + ClassName);
  lcSufixLen := Length(lcSufixString);

  lcPropertyPrefix := LowerCase(PropertyName + ' =');
  lcPropertyPrefixLen := Length(lcPropertyPrefix);

  CorrectLineValue := PropertyName + ' = ' + RequiredValue;

  ChangedTheDFM := False;

  L := TStringList.Create;
  try
    L.LoadFromFile(FileName);
    i := 0;
    while i < L.Count do
    begin
      cLine := L[i];
      // Is the current line of the form [object Name: ClassName] ?
      if (Length(cLine) > lcSufixLen) and (LowerCase(System.Copy(cLine, Length(cLine)-lcSufixLen+1, lcSufixLen)) = lcSufixString) then
      begin
        // This line is most likely the start of an object definition, of the type I want.
        // Check this further: does it start with "object"?
        trimedLine := Trim(cLine);
        if LowerCase(System.Copy(trimedLine, 1, 7)) = 'object ' then
        begin
          // Further checks. Doesn't hurt to be extra-safe.
          System.Delete(trimedLine, 1, 7);
          System.Delete(trimedLine, Length(trimedLine) - lcSufixLen+1, System.MaxInt);
          trimedLine := Trim(trimedLine);
          // What's left should be a valid Identifier. Also check that!
          DelphiId := AnsiString(trimedLine); // I'm writing this on Delphi2010, but I want the code to compile on Delphi 7; And I want to use the "char-in-set"
          if (Length(DelphiId) > 0) and (DelphiId[1] in ['a'..'z', 'A'..'Z', '_']) then
          begin
            ValidId := True;
            for j:=2 to Length(DelphiId) do
              if not (DelphiId[j] in ['a'..'z', 'A'..'Z', '_', '0'..'9']) then
                ValidId := False;
            if ValidId then
            begin
              // This line passed all tests. I know *for sure* an object definition of the required class starts here.
              iLine := -1; // Line where the property definition was found in the DFM
              iEnd := -1; // Line where the "end" that finishes the definition was found
              ExtraObjectCount := 0; // Counts the depth for the extra objects we might find.
              j := i+1;
              while (iEnd = -1) and (j < L.Count) do
              begin
                TestLine := LowerCase(Trim(L[j]));
                if System.Copy(TestLine, 1, 7) = 'object ' then Inc(ExtraObjectCount)
                else if System.Copy(TestLine, 1, 10) = 'inherited ' then Inc(ExtraObjectCount)
                else if TestLine = 'end' then
                  begin
                    // I'm seeing the end of an object. Don't know if it's *our* object
                    // or some other object.
                    Dec(ExtraObjectCount);
                    if ExtraObjectCount = -1 then iEnd := j; // Our object.
                  end
                else if ExtraObjectCount = 0 then
                  begin
                    // We know we're within our object, not some embeded object.
                    if System.Copy(TestLine, 1, lcPropertyPrefixLen) = lcPropertyPrefix then
                      iLine := j;
                  end;
                // Next line
                Inc(j);
              end;
              // Alter the DFM!
              if iLine = -1 then
                begin
                  // Did not find the line.
                  if iEnd = -1 then raise Exception.Create('BUG: Did not find "end"');
                  L.Insert(iEnd, CorrectLineValue);
                  ChangedTheDFM := True;
                end
              else
                begin
                  // Found the value.
                  if Trim(L[iLine]) <> CorrectLineValue then
                  begin
                    L[iLine] := CorrectLineValue;
                    ChangedTheDFM := True;
                  end;
                end;
            end;
          end;
        end;
      end;

      // Next line
      Inc(i);
    end;

    if ChangedTheDFM then
    begin
      // Make a backup of the original DFM.
      if FileExists(FileName + '.backup') then
        raise Exception.Create(FileName + '.backup already exists.');
      if not CopyFile(PChar(FileName), PChar(string(FileName + '.backup')), True) then
        raise Exception.Create('Can''t create BACKUP file.');
      L.SaveToFile(FileName);
    end;

  finally L.Free;
  end;
end; 
```

# .net - 为跨域的 .NET Framework 静默安装创建部署应用程序？

> ID：14455969
> 
> 赞同：0
> 
> 时间：2013-01-22T10:07:34.347
> 
> 标签：.net, vb.net, .net-4.0

我需要将 .NET 框架 4 部署到从服务器运行的所有域用户计算机。我创建了一个控制台应用程序，它将从用户登录到域时启动的登录脚本自动运行。

我拥有的当前代码能够链接到位于服务器上的安装文件并自动运行它。但是我无法在安静模式下运行它，即使用/q。每次安装文件运行时，它都会要求用户提示安装，即“单击下一步”和“安装”。

我当前的代码如下所示（出于安全原因，我更改了登录详细信息和文件路径。但文件位于服务器上，登录详细信息是主管理员帐户） -

```
Function ConvertToSecureString(ByVal str As String)
    Dim password As New SecureString
    For Each c As Char In str.ToCharArray
        password.AppendChar(c)
    Next
    Return password
End Function

Sub Main()
    Dim securePass As New Security.SecureString()
    Dim password As SecureString = ConvertToSecureString("password")
    Dim myProcess As New Process()

    myProcess.StartInfo.Arguments = "/q"
    myProcess.Start("C:\dotNetFx40_Full_x86_x64.exe", "user", password, Nothing)
    myProcess.StartInfo.CreateNoWindow = True
End Sub 
```

根据我的研究理解，这行：`myProcess.StartInfo.Arguments = "/q"`意味着在没有用户提示的情况下在后台静默运行安装。但是它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:38:43.110

设法修复它并解决问题。我只是放错了行`myProcess.StartInfo.Arguments = "/q"` 相反，我只是将其包含在 Process.Start 行中并摆脱了 Process Object。所以现在我有：

```
Process.Start("C:\dotNetFx40_Full_x86_x64.exe", "/passive", "user", password, Nothing) 
```

我已经为“/passive”更改了“/q”，因为它显示了一个完成进度条。

无论如何感谢您的建议。

格雷格

# php - $regex 与 $nin

> ID：14455975
> 
> 赞同：0
> 
> 时间：2013-01-22T10:08:03.923
> 
> 标签：php, regex, mongodb

我需要我的集合中没有字段 user_id （字符串）`abc`或`def`其中任何地方的结果。这是我尝试过的：

```
$regex_array = array("/abc/", "/def/");
$cursor = $colection->find(array('user_id'=> array('$nin'=> $regex_array)));
$cursor = $colection->find(array('user_id'=> array('$regex'=> array('$nin'=> $regex_array)))); 
```

当我遍历光标时，我发现它仍然允许`abc`并且`def`作为结果中的子字符串。

任何其他方式来表达上述查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:25:39.767

您可以将多个正则表达式组合为一个，而不是测试多个正则表达式：

```
/regex1/ or /regex2/ 
```

翻译成

```
/(?:regex1)|(?:regex2)/ 
```

# cocoa - 在 Core Animation 中，如何获取图层框架和旋转？

> ID：14455976
> 
> 赞同：2
> 
> 时间：2013-01-22T10:08:08.370
> 
> 标签：cocoa, core-animation

我正在使用 Core Animation 为一些图层设置动画，其中一些将用于显示视频。

听说使用多层播放多部电影不是一个好主意（效率低下）。经过一番搜索，我找到了一种使用视频帧创建 Open GL 纹理的方法。因此，我想访问图层属性以使用纹理使用 Open GL 显示它们（避免每个 CAOpenGLLayers 具有 OpenGL 上下文）。

我已将 CALayer 子类化以在 setFrame: 上放置断点：但每次值更改时它都不会中断。如何确定 CALayer 在动画期间发生变化时的帧？

PS：我正在使用 CARenderer，因为我必须通过混合所有图层而不是实时来创建帧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:58:06.870

您的问题似乎可以归结为：

> 如何访问图层中间动画的帧/变换？

答案是你必须调用`-presentationLayer`你的`CALayer`. 这将返回另一个`CALayer`，其属性反映任何正在进行的动画的当前值。但请注意，这仅返回当前显示层的近似值。我很确定它基本上会根据当前时间重新计算动画的值，而不是使用上次屏幕更新时的任何值。只要您的帧速率很高，它就应该非常接近。

在任何情况下，您都无法在此更改时收到通知。但是您可以做的是检查`-presentationLayer`每次需要渲染新帧的时间。或者，运行 a`CADisplayLink`并`-presentationLayer`在每次触发时检查。

但与往常一样，您应该进行性能分析。我不知道计算的成本是多少`-presentationLayer`。

# actionscript-3 - 文件对话框未从 flex 功能显示

> ID：14455979
> 
> 赞同：0
> 
> 时间：2013-01-22T10:08:10.010
> 
> 标签：actionscript-3, apache-flex, externalinterface

我正在尝试使用 ExternalInterface 和 addCallback 从 javascript 执行 flex 函数：

```
<s:Application 
  xmlns:fx="http://ns.adobe.com/mxml/2009" 
  xmlns:s="library://ns.adobe.com/flex/spark" 
  xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="initApp()">

import flash.external.*;
import flash.net.FileReference;

public function initApp():void {
  ExternalInterface.addCallback("sendTextFromJS", receiveTextFromJS);
}

public function receiveTextFromJS(s:String):void {
  l1.text = s;
  var myFileReference:FileReference = new FileReference();
  myFileReference.browse();
} 
```

但由于某些原因，文件对话框未显示，但 ID 为 l1 的标签中的文本已更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:29:28.190

[FileReference.browse](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29)操作只能在响应用户操作（鼠标事件或按键事件）时调用，因此您必须修改代码以获得用户操作，例如您可以使用警报：

```
 public function receiveTextFromJS(s:String):void {
            Alert.show("Browse for files?", "", Alert.OK | Alert.CANCEL, null, onAlert);
        }   

        private function onAlert(event:CloseEvent):void
        {
            if(event.detail == Alert.OK)
            {
                var myFileReference:FileReference = new FileReference();
                myFileReference.browse();
            }
        } 
```

# asp.net - 如何在 asp.net mvc3 应用程序中管理客户端状态

> ID：14455981
> 
> 赞同：0
> 
> 时间：2013-01-22T10:08:14.650
> 
> 标签：asp.net, asp.net-mvc

在asp.net中，我们可以使用视图状态保存回发数据，即用于客户端状态管理，即默认为asp.net web forms.is视图状态是asp.net mvc的默认值？如果不是，我们如何保存回发数据并且是否有任何替换 mvc 中的视图状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:12:31.683

MVC 不使用 ViewState。它没有服务器端控件来保留状态。

但是您可以使用 ViewBag、ViewData 来存储值并在您的视图中使用它。

```
public ActionResult Index()
{
    var someList= new List<string>
    {
        "C#, 
        "Java", 
        "PHP"
    };

    ViewData["Languages"] = someList;

    return View();
} 
```

在你看来

```
<ul>
@foreach (var lang in (List<string>)ViewData["Languages"])
{
    <li>
        @lang 
    </li>
}
</ul> 
```

# android - URLConnection 无法检索完整的 Html

> ID：14455986
> 
> 赞同：1
> 
> 时间：2013-01-22T10:08:28.770
> 
> 标签：android, html, httpsurlconnection

我尝试从网站解析信息。但是，它仅在上下文不是很长时才有效。随着 Html 变大，加载的内容不完整。检索到的String总长度在40000左右，每次检索到的字符串计数不一样。（例如：第一次计数为 31345，下一次计数为 31358）所以我无法检索整页。

因此，我认为这个问题可能与互联网连接或缓冲区有关。但是我使用了 bufferedReader，据我所知 HttpURLConnection 像流一样工作，所以应该没有任何问题。我检查了几乎所有与 UrlConnection 相关的页面，但没有人谈论这个。

我的代码有什么问题吗？我已经在这个问题上工作了几天，任何建议都会非常有帮助。提前致谢。

```
public String getHtmlFromUrl(String url, int startReadingLine) {
    String xml = "";

    try {

        //URL url1 = new URL(url);
        URL url1 = new URL("http://support.google.com/analytics/bin/answer.py?hl=zh-Hant&answer=1009602");

        HttpURLConnection urlConn = (HttpURLConnection) url1
                .openConnection();

        urlConn.setRequestProperty("User-Agent",
                "Mozilla/5.0 (Windows NT 6.1;zh-tw; MSIE 6.0)");
        if (Integer.parseInt(Build.VERSION.SDK) < Build.VERSION_CODES.FROYO) {
            System.setProperty("http.keepAlive", "false");
        }
        urlConn.setReadTimeout(10000 /* milliseconds */);
        urlConn.setConnectTimeout(15000 /* milliseconds */);
        urlConn.setDoOutput(true);
        urlConn.setDoInput(true);
        urlConn.setRequestMethod("GET");
        urlConn.setUseCaches(false);

        InputStreamReader in = new InputStreamReader(
                urlConn.getInputStream());
        BufferedReader buffer = new BufferedReader(in, 100000);

        StringBuilder builder = new StringBuilder();
        String auxaux = "";

        while ((aux = buffer.readLine()) != null)
            builder.append(aux);

        xml = builder.toString();

        in.close();
        urlConn.disconnect();

    } catch (SocketTimeoutException e) {
        return "time out";
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
} 
```

这是xml的示例：（计数为40710）

（我没有在 xml 末尾添加“...”）

```
<!DOCTYPE html><html lang="zh-Hant"class="streamlined streamlined-3"><head><script type="text/javascript">serverResponseTimeDelta=window.external&&window.external.pageT?window.external.pageT:-1;pageStartTime=new Date().getTime...

   ...

 ..."納米比亞", "NR": "諾魯", "NP": "尼泊爾", "NL": "荷蘭", "AN": "荷屬安地列斯", "KN": "尼維斯", "NC": "新喀里多尼亞", "NI": "尼加拉瓜", "NE": "尼日", "NG": "奈及利亞", "NU": "紐埃", "KR": "北韓", "NO": "挪威", "NZ": "紐西蘭", "OM": "阿曼", "PW": "帛琉", "PK": "巴基斯坦", "PS": "巴勒斯坦", "PA": "巴拿馬", "PG": "巴布亞新幾內亞", "PY": "巴拉圭", "PE": "秘魯", "PH"... 
```

另一个：（计数 41106）

```
<!DOCTYPE html><html lang="zh-Hant"class="streamlined streamlined-3"><head><script type="text/javascript">serverResponseTimeDelta=window.external&&window.external.pageT?window.externa...

    ...

...屬安地列斯", "KN": "尼維斯", "NC": "新喀里多尼亞", "NI": "尼加拉瓜", "NE": "尼日", "NG": "奈及利亞", "NU": "紐埃", "KR": "北韓", "NO": "挪威", "NZ": "紐西蘭", "OM": "阿曼", "PW": "帛琉", "PK": "巴基斯坦", "PS": "巴勒斯坦", "PA": "巴拿馬", "PG": "巴布亞新幾內亞", "PY": "巴拉圭", "PE": "秘魯", "PH"... 
```

编辑：到目前为止，我认为它与它与互联网交互的方式有关，因为每个结果的计数不同，或者它可能是我设备的一些奇怪的错误。根本原因尚未找到。最奇怪的是它在结果中以“...”结尾。它似乎知道结果还没有完成......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T08:27:01.540

始终尝试将您的输入写入外部文件并查看您实际收到的内容！我在 Android 上也遇到了同样的问题。最后，logcat 没有向我展示整个字符串！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:35:27.987

你可以试试下面的代码。

```
BufferedInputStream bis = new BufferedInputStream(in);
ByteArrayOutputStream buf = new ByteArrayOutputStream();
int result = bis.read();
while(result != -1) {
  byte b = (byte)result;
  buf.write(b);
  result = bis.read();
}        
return buf.toString(); 
```

否则：

```
 Writer writer = new StringWriter();

        char[] buffer = new char[1024];
        try {
            Reader reader = new BufferedReader(
                    new InputStreamReader(is, "UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            is.close();
        }
        return writer.toString(); 
```

我目前使用的最后一种方法是：

```
 URL u=null;
    InputStream is = null;
    DataInputStream dis;
    StringBuffer outData = new StringBuffer();
    try {
        u = new URL(url);
        is = u.openStream();
        dis = new DataInputStream(new BufferedInputStream(is));
        String app = null;
        while ((app = dis.readLine()) != null) {
            outData = outData.append(app);
        }
    } catch (MalformedURLException ex) {
        Log.e(TAG, "Malformed URL Exception", ex);
        return null;
    } catch (IOException ex) {
        Log.e(TAG, "Error stream ", ex);
        return null;
    } finally {
        try {
            is.close();
        } catch (IOException ioe) {
        }
    }
    return outData.toString(); 
```

# php - symfony2.1 FOQElasticaBundle 类加载

> ID：14455991
> 
> 赞同：0
> 
> 时间：2013-01-22T10:08:40.743
> 
> 标签：php, elasticsearch, symfony-2.1, elastica

我在此[https://github.com/Exercise/FOQElasticaBundle#readme](https://github.com/Exercise/FOQElasticaBundle#readme)之后设置了 FOQElasticaBundle ，使用 git 子模块安装了 Elastica 和 FOQElasticaBundle。

当我尝试应用程序/控制台时，它给出了错误`The autoloader expected class "Elastica_Client" to be defined in file "/path/to/project/../vendor/elastica/lib/Elastica/Client.php". The file was found but the class was not in it, the class name or namespace probably has a typo.`

我发现 FOQ 尝试在 vendor/elastica/lib/Elastica/Client.php 中加载 Elastica_Client 类，但自名为 Client 的类以来一无所获。

我随机浏览了 elastica repo [https://github.com/ruflin/Elastica/blob/v0.18.6.0/lib/Elastica/Client.php](https://github.com/ruflin/Elastica/blob/v0.18.6.0/lib/Elastica/Client.php)，发现该类之前命名为 Elastica_Client。

问题是

1.  与当前的 Elastica 库相比，FOQElasticaBundle 是否已过时？
2.  还是我的自动加载出了什么问题。ps：我正在使用作曲家自动加载器？

应用程序/自动加载.php

```
$loader->add('Elastica', __DIR__.'/../vendor/elastica/lib');
$loader->add('FOQ', __DIR__.'/../vendor/bundles'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:43:42.057

该`FOQElasticaBundle`安装步骤适用于 Symfony 2.0

在 SF2.1 中，您必须使用 composer 安装您的包，所以只需将其添加到您的`composer.json`文件中：

`"ruflin/elastica": "0.19.8"`[这是一个例子](https://github.com/Exercise/FOQElasticaBundle/blob/master/composer.json)

然后运行这个命令：

`composer update`

最后一步是：

`composer dumpautoload`

最后一步为您生成自动加载文件

# gwt - 如何在交换机上为同一属性设置两个编辑器？

> ID：14455992
> 
> 赞同：0
> 
> 时间：2013-01-22T10:08:40.470
> 
> 标签：gwt, gwt-editors

我正在尝试创建一个编辑器，用户可以在其中选择现有项目或内联创建新项目。例如，想象一下典型的人-地址关系。我想要一个表单，用户在编辑一个人时，可以从一组现有地址中选择一个地址，也可以创建一个新地址，而无需移动到单独的表单。

天真地，这似乎需要两个不同的编辑器来处理同一个属性。假设我有一个`Person`which`Address getAddress()`和`setAddress(Address)`。我的`PersonEditor`班级需要有两个名为`address`不同类型的子编辑；一个选择一个现有的人，另一个是编辑器的组合以进入该`Address`类型并允许编辑其属性。

通过阅读 上的文档[`CompositeEditor`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/editor/client/CompositeEditor.html)，似乎我必须利用它来动态选择子编辑器。但是，文档不够详细，无法让我真正理解应该如何实现接口。我已经尝试查看线索的实现方式[`ListEditor`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/editor/client/adapters/ListEditor.html)和实施方式，但还是有用的。由于我的副编辑编辑不同的路径，这似乎不太合适。`OptionalFieldEditor``ListEditor`

例如，尝试使用`CompositeEditor`，我不清楚在我的情况下应该返回什么`createEditorForTraversal`以及`getPathElement`应该返回什么。

如何动态地将两种*不同*类型的编辑器之一附加到一个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:40:12.883

我最终设法做到了。我只是添加了两个具有相同`@Path`注释的编辑器。我没想到编辑器框架允许这样做，但它似乎工作！