# StackOverflow 问答 14658000-14658999

# c# - 无法将类型“字符串”隐式转换为“System.Threading.Tasks.Task” '

> ID：14658001
> 
> 赞同：87
> 
> 时间：2013-02-02T02:28:48.080
> 
> 标签：c#, task-parallel-library, async-await

我是异步编程的新手，所以在浏览了一些异步示例代码之后，我想到了编写一个简单的异步代码

我创建了一个简单的 Winform 应用程序，并在表单中编写了以下代码。但它只是不工作

```
private Task<string> methodAsync() {
    Thread.Sleep(10000);
    return "Hello"; //Error: Cannot implicitly convert type 'string' to 'System.Threading.Tasks.Task<string>'
}

private async void button1_Click(object sender, EventArgs e)
{
    string s = await methodAsync();
    MessageBox.Show(s);
} 
```

有人可以在这里放一些灯吗..

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-02-02T02:33:28.857

列出的方法返回类型是`Task<string>`. 您正在尝试返回一个`string`. 它们不一样，也没有从 string 到 的隐式转换`Task<string>`，因此出现错误。

您可能会将其与编译器`async`自动将返回值包装在 a 中的方法混淆。`Task`目前该方法不是异步方法。你几乎肯定是要这样做的：

```
private async Task<string> methodAsync() 
{
    await Task.Delay(10000);
    return "Hello";
} 
```

有两个关键变化。首先，方法被标记为`async`，这意味着返回类型被包裹在 a 中`Task`，使得方法可以编译。接下来，我们不想进行阻塞等待。作为一般规则，在使用`await`模型时，尽可能避免阻塞等待。 `Task.Delay`是一个将在指定的毫秒数后完成的任务。通过`await`-ing 该任务，我们有效地执行了该时间的非阻塞等待（实际上该方法的其余部分是该任务的延续）。

如果您更喜欢 4.0 的方式，而不使用`await`，您可以这样做：

```
private Task<string> methodAsync() 
{
    return Task.Delay(10000)
        .ContinueWith(t => "Hello");
} 
```

第一个版本将编译成或多或少像这样的东西，但它会有一些额外的样板代码用于支持错误处理和`await`我们在这里没有利用的其他功能。

如果您`Thread.Sleep(10000)`真的只是作为某个长时间运行方法的占位符，而不是只是等待一段时间的方式，那么您需要确保工作在另一个线程中完成，而不是在当前上下文中完成。最简单的方法是通过`Task.Run`：

```
private Task<string> methodAsync() 
{
    return Task.Run(()=>
        {
            SomeLongRunningMethod();
            return "Hello";
        });
} 
```

或者更有可能：

```
private Task<string> methodAsync() 
{
    return Task.Run(()=>
        {
            return SomeLongRunningMethodThatReturnsAString();
        });
} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2016-06-02T11:22:25.487

使用 FromResult 方法

```
public async Task<string> GetString()
{
   System.Threading.Thread.Sleep(5000);
   return await Task.FromResult("Hello");
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-06-04T23:32:18.540

除了`async`@Servy 指出的有问题的使用之外，另一个问题是您需要通过调用Task.Result来显式`T`获取。`Task<T>`请注意，Result 属性将阻止异步代码，应谨慎使用。

尝试：

```
private async void button1_Click(object sender, EventArgs e)
{
    var s = await methodAsync();
    MessageBox.Show(s.Result);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-28T17:34:29.047

```
 //source    
    public async Task<string> methodName()
            {
             return Data;
             }

    //Consumption
     methodName().Result; 
```

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-01-16T12:34:07.737

就我而言。

```
 string ip = _GetStoreIpaddress().Result;

    private async Task<string> _GetStoreIpaddress()
    {
        string _store_iP = "";
        var Ip_address = await App.SQLiteDb.GetItemsAsync();
        if (Ip_address != null)
        {
            _store_iP = Ip_address.ToString();
        }

        return _store_iP;
    } 
```

# ruby - Google Drive API 的客户端登录

> ID：14658007
> 
> 赞同：1
> 
> 时间：2013-02-02T02:30:11.197
> 
> 标签：ruby, google-drive-api, gdata, google-docs-api

我在获取客户端登录以使用 ruby​​ Google Drive 客户端 API 时遇到问题。你怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:56:03.607

不要那样做。ClientLogin 已弃用，并且不适用于 Drive 等新 API。使用 OAuth 2.0：

[https://developers.google.com/drive/about-auth](https://developers.google.com/drive/about-auth)

# netbeans - netbeans 自动完成有选择地显示基于 phpdoc 的提示

> ID：14658009
> 
> 赞同：1
> 
> 时间：2013-02-02T02:12:00.557
> 
> 标签：netbeans, opencart

我正在使用 ubuntu 12.04 和 Netbeans 7.2.1

我从 github [https://github.com/opencart/opencart得到了这个项目](https://github.com/opencart/opencart)

然后我尝试像这样通过phpDoc在/upload/system/engine/controller.php中添加一些变量

```
/**
 * @property 加载器 $load 描述
 * @property 配置 $config 描述
 * @property DB $db 描述
 */

```

它运行良好，并且在子控制器中（例如上传/目录/产品/category.php）我在输入“$this->”时看到了提示。

然后我得到了所有可以在注册表中的“全局”变量，它包含父控制器并通过“$this->”可用，并用代码编写它们

回声'*@property'。get_class($value) 。' ' 。$键。' 描述' 。'
';

然后我复制结果并将其粘贴到 phpdoc 块。它是

```
* @property 加载程序加载说明
 * @property 配置配置说明
 * @property 数据库数据库描述
 * @property URL url 描述
 * @property 日志记录说明
 * @property 请求请求描述
 * @property 响应响应描述
 * @property 缓存缓存说明
 * @property 会话会话描述
 * @property 语言语言描述
 * @property 文档文档说明
 * @property Customer 客户描述
 * @property Affiliate 附属说明
 * @property Currency 货币描述
 * @property 税 税 说明
 * @property 权重 描述
 * @property 长度 长度 描述
 * @property 购物车购物车说明
 * @property 加密加密说明

```

我非常希望打开子控制器来测试自动完成功能，但自动完成功能并没有显示我在输入“$this->”后添加的任何内容。

我尝试了一些组合并注意到，它仅在我使用自动完成时才有效，输入“@pro”然后输入“enter”按钮，然后通过输入“tab”来填充字段以专注于下一个字段。因此，即使键入“@pro”，然后键入“tab”，然后手动编写所有其他单词，也不会使 netbeans 显示自动完成。

有谁知道，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T22:55:38.957

你可以使用这个脚本，为整个项目生成这个块，包括模型：

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=11912](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=11912)

它只是一个文件，放在yout opencart安装的根文件夹中，运行它，复制并粘贴`"system/engine/controller.php"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:13:06.607

我明白了，我错过了“$”符号

```
* @property 日志记录说明

```

需要

```
* @property 日志 $log 描述

```

真丢人。

# php - 带有 JOIN 的 MySQL 查询未正确执行

> ID：14658010
> 
> 赞同：1
> 
> 时间：2013-02-02T02:30:53.143
> 
> 标签：php, mysql, pdo

我没有得到任何数据，我已经检查了我父亲应该匹配的数据

我有两张桌子，`likes`我`user_follow` 试图通过一个 id 来绑定两张桌子。

**表 - 列**

`likes`- idlikes、iduser、信息 `user_follow`- iduser_follow、iduser_follower、iduser_following

```
$following = $dbh -> prepare("SELECT L.* FROM likes L JOIN user_follow F ON F.iduser_following = L.iduser WHERE F.iduser_follower = ?");
$following->execute(array($_SESSION['user_auth']));
while($row_following = $following->fetch(PDO::FETCH_ASSOC)){
     $id_1 = $row_following['L.information']; // get id of user that i'm following
     echo $id_1;
} 
```

因此，如果我正在关注某人，我应该能够显示与我关注的人相关的信息。

我没有收到任何错误，它只是没有回显任何内容？

* * *

样本数据

`user_follow`

```
iduser_follow           iduser_follower            iduser_following
     1                         2                        3
     2                         2                        4 
```

`likles`

```
 idlikes                   iduser                  information
     1                         3                        info1
     2                         3                        info2 
```

所以，我应该输出 info1 和 info2，假设 $_SESSION['user_auth'] = 2，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:52:44.817

```
SELECT  b.*
FROM    user_follow a
        INNER JOIN likes b
            ON a.iduser_following = b.iduser
WHERE   a.iduser_follow = 'myuserID' AND
        iduser_following = 'followingID' 
```

并获取价值

```
$id_1 = $row_following['information']; 
```

# php - 从html中提取图像元素

> ID：14658015
> 
> 赞同：2
> 
> 时间：2013-02-02T02:31:28.210
> 
> 标签：php, dom

我正在尝试从 html 代码中获取图像标签。

我有

```
 $parser=new DOMDocument;   

   $parser->loadHTML($this->html);
        foreach($parser->getElementsByTagName('img') as $imgNode){
         echo $parser->saveHTML($imgNode);
       } 
```

`$this->html`包含大量的html代码和javascripts。

例如：

```
<div id='someid'>
<button id='bt' onclick='clickme()'>click me</button>
<img src='test.jpg'/>
.....
.....
more...

</div>

<div>
.....
.....
more... 
```

我收到警告说

```
DOMDocument::loadHTML(): htmlParseEntityRef: expecting ';' in Entity, 
```

我不确定如何解决这个问题，也不知道是否有更好的方法从大量 html 代码中提取所有图像。

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T02:55:34.607

我绝不是这些问题的专家（还），但我希望这在某种程度上有所帮助。

根据[troelskn 的这个答案，](https://stackoverflow.com/a/3613335/2005939)您可以通过使用[`libxml_use_internal_errors`](http://www.php.net/manual/en/function.libxml-use-internal-errors.php). 这可能会帮助您摆脱该错误。

解析文档的所有图像可以使用[`DOMXPath`](http://php.net/manual/en/class.domxpath.php). 它将 a[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)作为参数并允许您对文档运行[XPath查询。](http://en.wikipedia.org/wiki/XPath)

```
$document = new DOMDocument();
$document->loadHTML($your_html);

// Suppress parse errors.
libxml_use_internal_errors(false);

$xpath = new DOMXPath($document)

// Find all img tags.
$img_nodes = $xpath->query('//img') 
```

[`DOMXPath::query`](http://www.php.net/manual/en/domxpath.query.php)返回 a[`DOMNodeList`](http://www.php.net/manual/en/class.domnodelist.php)可以通过 using 循环[`DOMNodeList::item`](http://www.php.net/manual/en/domnodelist.item.php)，后者返回 a [`DOMNode`](http://www.php.net/manual/en/class.domnode.php)。

```
for($i = 0; $i > $img_nodes->length; $i++)
{
    $node = $img_nodes->item($i);
    // Manipulate the node.
} 
```

**免责声明：**我发布的代码未经测试，是使用手册放在一起的。

# java - Java中的事件驱动服务器

> ID：14658017
> 
> 赞同：-1
> 
> 时间：2013-02-02T02:31:31.030
> 
> 标签：java, events, network-programming, nio, socketserver

我正在尝试编写一个事件驱动的 HTTP Web 服务器。因为我将只使用一个线程，所以事件必须排队并异步处理（我也在使用 Java NIO）。但是，我只坚持第一步。我打开了一个`ServerSocketChannel`. 我不确定`SocketChannel`当请求进入时如何获得新连接。是否有可以通过 Java 访问的操作系统队列？（我不确定 Java 是否独立于操作系统）我不想使用任何阻塞调用。

如果我朝着错误的方向前进，我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:58:56.160

你需要：

*   创建一个选择器
*   将 ServerSocketChannel 置于非阻塞模式
*   使用选择器注册 SSC`OP_ACCEPT`
*   编写一个 select() 循环，你可以在 NIO 教程中找到它

在 select() 循环中，您将找到`isAcceptable()`返回 true 的键：这意味着您需要调用 ServerSocketChannel.accept() 来接受连接。这将返回 a `SocketChannel`，然后您必须将其置于非阻塞模式并使用`OP_READ`.

反过来，这将导致`isReadable()`返回 true 的键：这意味着您应该阅读相关的`SocketChannel.`

您将在 NIO 教程中找到所有这些示例。它比这复杂得多;-)

# python - Python。获取闪烁/闪烁的聊天窗口

> ID：14658020
> 
> 赞同：2
> 
> 时间：2013-02-02T02:32:42.277
> 
> 标签：python, pywin32

我想在窗口闪烁/闪烁时聚焦它。更常见的情况是有人通过聊天软件（例如 MSN）发送一些文本。在这种情况下，窗口栏将在开始栏中开始闪烁。我不知道我是不是在解释我自己。我想获得闪烁窗口的 HWND。如果需要更多信息来理解它，我会尝试更好地解释我。

我已经搜索过有关此案的信息，但我一无所获。也许它可以是使用“win32gui”库的解析器。

感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:25:23.313

[`FlashWindowEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679347%28v=vs.85%29.aspx)首先，大多数程序通过调用（或包装它的一些更高级别的函数）来刷新它们的窗口。但是有一些应用程序——主要来自微软——会做一些自定义的东西，而不是在最终用户看来像是窗口闪烁，但在幕后可能看起来不一样。希望您不关心任何此类自定义应用程序。

无论如何，捕获该信息的最简单方法是安装一个带有[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)or的 shell 钩子[`RegisterShellHookWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644989%28v=vs.85%29.aspx)。（您可以改为在 user32.dll 前面显式注入代码……但您不想从 Python 中尝试。）当您这样做时，Windows 会将您的窗口视为资源管理器的一部分（“shell”）并向其发送有关其他程序正在做什么的特殊消息，尤其是`WM_SHELLHOOKMESSAGE`.

正如 forivall 所指出的，这可能更容易从[AutoHotkey](http://www.autohotkey.com)完成—<a href="http://www.autohotkey.com/board/topic/36510-detect-flashingblinking-window-on-taskbar/?p=229583" rel="nofollow noreferrer">论坛中的这个答案显示了如何做到这一点。从 VB 甚至 C++ 也可能更容易做到。是的，这些语言通常比 Python 更难，但代码中的实际逻辑非常简单，唯一困难的部分是获取 shell 挂钩消息，而这部分在这些语言中会更容易。另一种选择是使用 IronPython 并通过 .NET 完成。

但是你问是否可以从 Python 中做到这一点，并且……是的，是的。我相信相关函数没有被 包裹起来`win32gui`，所以你必须使用[`ctypes`](http://docs.python.org/library/ctypes.html)Python 来完成它。有关可能的示例，请参阅此[SO 问题](https://stackoverflow.com/questions/6458812/python-ctypes-setwindowshookex-callback-function-never-called)，并查看侧面的一些相关问题和`ctypes`文档，了解其他使用`ctypes`从 user.dll 调用不同函数的示例。

* * *

如果你想设置一个 windows 钩子，key 函数看起来像这样（详见[`ShellProc`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644991%28v=vs.85%29.aspx)）：

```
HSHELL_REDRAW=6
WM_SHELL=10

def my_callback(nCode, wParam, lParam):
    if nCode == HSHELL_REDRAW and lParam:
        got_flashing_window_with_hwnd(wParam)

hook = user32.SetWindowsHookEx(WM_SHELL, my_callback, None, 0) 
```

但是您需要设置类型并通过`ctypes`.

* * *

如果您已经有一个从 Python 管理的窗口，则将自己设置为 shell 挂钩窗口可能更容易：

```
user32.RegisterShellHookWindow(my_hwnd) 
```

然后，在您的窗口过程中：

```
WM_SHELLHOOKMESSAGE = None
def wndproc(hWnd, uMsg, lParam, wParam):
    if WM_SHELLHOOKMESSAGE is None:
        WM_SHELLHOOKMESSAGE = user32.RegisterWindowMessage('SHELLHOOK')
    if uMsg == WM_SHELLHOOKMESSAGE and wParam == HSHELL_FLASH:
        got_flashing_window_with_hwnd(lParam) 
```

* * *

我不确定您是否需要提升其中任何一个的特权，但我怀疑您会这样做。

# android - Android ORMLite 4.38 allowGeneratedIdInsert 导致 IllegalStateException

> ID：14658021
> 
> 赞同：1
> 
> 时间：2013-02-02T02:33:14.180
> 
> 标签：android, ormlite

我的目标是 Android 2.2 及更高版本。此错误是在运行 4.x 的设备上生成的。我正在使用 ORMLite 4.38 库。

我需要保证每个记录实例对于任意数量的设备都是唯一的。我很高兴看到 ORMLite 支持 UUID 作为 ID。我为我的数据库记录定义创建了一个 UUID - id 抽象基类。 `allowGeneratedIdInsert`是完美的解决方案。但此功能似乎会导致“IllegalStateException：无法在 dao 中创建数据元素”。我通过删除此注释进行了测试，没有问题。把它放回去......同样的问题。将基类的东西放在一个记录定义中......同样的问题。

LogCat 还报告：

> 原因：java.sql.SQLException: Unable to run insert stmt on object - objectid: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx

```
public abstract class UUIDDaoEnabled<T> extends BaseDaoEnabled<T, UUID> {

    //allowGeneratedIdInsert allows us to set UUID when this device db didn't create it
    @DatabaseField(generatedId = true, allowGeneratedIdInsert=true)
    private UUID id;
    ...
    public void setUUIDFromSerializedSource(SerializedModelBinaryInputStream stream, Dao<T, UUID> dao) throws SQLException { //only place we can set UUIDs
        if(id == null)
            dao.refresh((T)this); 

        if(id != null)
            throw new SQLException("Trying to set UUID on existing object");

        id = stream.getCurrentUUID();
    }
    } 
```

我会像这样专门化：

```
@DatabaseTable()
public class Type extends UUIDDaoEnabled<Type> { ... } 
```

我无法从`allowGeneratedIdInsert`and的文档中解释这一点`generatedId`。实际上 alloeGeneratedIdInsert 的文档说它覆盖了 generatedId 的默认行为。它还说

> 这仅在数据库支持此行为时才有效

然而，我在其他帖子中读到 ORMLite 4.25 (?) 和更新版本在 Android 设备上支持这种行为。所以，这也不完全正确。或者我在做一些愚蠢的事情......任何人？？？

更新：考虑了一分钟后，我意识到`allowGeneratedIdInsert`支持和继承都不是根本原因，因为我基于同一个抽象类实例化了其他对象。我无法弄清楚为什么一个特定的班级会导致这个问题。关于违规记录类型的唯一独特之处（与创建的其他类型相比）是一对多中的多，并且包含多对多。这些属性与 结合起来`allowGenereatedIdInsert`会是根本问题吗？相反，我应该问，有没有人在这种情况下看到这个问题？

更新：没关系这个问题。我可以使用`updateId(...)`而不是`allowGeneratedIdInsert`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T20:03:16.913

所以我不确定这一点，但在我看来，您正试图将一个元素两次插入到具有相同 UUID id 的表中。例外是说存在约束失败：

```
IllegalStateException: Could not create data element in dao
    at BaseForeignCollection.add(BaseForeignCollection.java:57)
...
Caused by: SQLiteConstraintException: error code 19: constraint failed 
```

如果你称它为-`foreignCollection.add(...);`做同样的事情`dao.create(...);`，你不能用同一个对象做这两个。如果您有一个已由 DAO 创建的现有对象，并且您希望将其与另一个对象关联，您应该执行以下操作：

```
 // associate this object with another
   existingObject.setForeignField(...);
   // now update it in the db
   existingObjectDao.update(existingObject); 
```

您不能将其添加到 foreignField 的外部集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T21:45:13.310

我有一个类似的问题。但它是由使用 create 而不是 createOrUpdate 来保存对象引起的。

在更改此设置之前卸载应用程序也很重要，以确保数据库已被删除并且不会保留旧行为。

Edit: createOrUpdate is very time expensive. It's better use just create with great amounts of data.

Edit 2:It is also bether to use a [TransactionManager.callInTransaction](https://stackoverflow.com/questions/18884587/thousands-of-ormlite-raw-inserts-taking-several-minutes-on-android).

# haskell - Haskell 中的管道和回调

> ID：14658024
> 
> 赞同：11
> 
> 时间：2013-02-02T02:33:24.013
> 
> 标签：haskell

我正在使用 portaudio 处理一些音频。只要有音频数据需要处理，haskell FFI 绑定就会调用用户定义的回调。这个回调应该很快被处理，理想情况下没有 I/O。我想保存音频输入并快速返回，因为我的应用程序不需要实时响应音频（现在我只是将音频数据保存到文件中；稍后我将构建一个简单的语音识别系统） .

我喜欢这个想法，`pipes`并认为我可以使用那个库。问题是我不知道如何创建一个`Producer`返回通过回调传入的数据的方法。

如何处理我的用例？

* * *

这是我现在正在使用的内容，以防有帮助（基准 mvar 现在不起作用，但我不喜欢将所有数据存储在 seq 中......我宁愿处理它来代替就在最后）：

```
{-# LANGUAGE FlexibleInstances, MultiParamTypeClasses #-}

module Main where

import Codec.Wav

import Sound.PortAudio
import Sound.PortAudio.Base
import Sound.PortAudio.Buffer

import Foreign.Ptr
import Foreign.ForeignPtr
import Foreign.C.Types
import Foreign.Storable

import qualified Data.StorableVector as SV
import qualified Data.StorableVector.Base as SVB

import Control.Exception.Base (evaluate)

import Data.Int
import Data.Sequence as Seq

import Control.Concurrent

instance Buffer SV.Vector a where
  fromForeignPtr fp = return . SVB.fromForeignPtr fp
  toForeignPtr = return . (\(a, b, c) -> (a, c)) . SVB.toForeignPtr

-- | Wrap a buffer callback into the generic stream callback type.
buffCBtoRawCB' :: (StreamFormat input, StreamFormat output, Buffer a input, Buffer b output) =>
    BuffStreamCallback input output a b -> StreamCallback input output    
buffCBtoRawCB' func = \a b c d e -> do
    fpA <- newForeignPtr_ d -- We will not free, as callback system will do that for us   
    fpB <- newForeignPtr_ e -- We will not free, as callback system will do that for us
    storeInp <- fromForeignPtr fpA (fromIntegral $ 1 * c)
    storeOut <- fromForeignPtr fpB (fromIntegral $ 0 * c)
    func a b c storeInp storeOut

callback :: MVar (Seq.Seq [Int32]) -> PaStreamCallbackTimeInfo -> [StreamCallbackFlag] -> CULong 
            -> SV.Vector Int32 -> SV.Vector Int32 -> IO StreamResult
callback seqmvar = \timeinfo flags numsamples input output -> do
  putStrLn $ "timeinfo: " ++ show timeinfo ++ "; flags are " ++ show flags ++ " in callback with " ++ show numsamples ++ " samples."  
  print input
  -- write data to output
  --mapM_ (uncurry $ pokeElemOff output) $ zip (map fromIntegral [0..(numsamples-1)]) datum
  --print "wrote data"

  input' <- evaluate $ SV.unpack input  
  modifyMVar_ seqmvar (\s -> return $ s Seq.|> input')

  case flags of
    [] -> return $ if unPaTime (outputBufferDacTime timeinfo) > 0.2 then Complete else Continue
    _ -> return Complete

done doneMVar = do
  putStrLn "total done dood!"
  putMVar doneMVar True
  return ()

main = do

  let samplerate = 16000

  Nothing <- initialize

  print "initialized"

  m <- newEmptyMVar
  datum <- newMVar Seq.empty

  Right s <- openDefaultStream 1 0 samplerate Nothing (Just $ buffCBtoRawCB' (callback datum)) (Just $ done m)
  startStream s

  _ <- takeMVar m -- wait until our callbacks decide they are done!
  Nothing <- terminate

  print "let's see what we've recorded..."

  stuff <- takeMVar datum
  print stuff

  -- write out wav file

  -- let datum = 
  --       audio = Audio { sampleRate = samplerate
  --                   , channelNumber = 1
  --                   , sampleData = datum
  --                   }
  -- exportFile "foo.wav" audio

  print "main done" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T07:59:20.360

最简单的解决方案是使用`MVar`s 在回调和`Producer`. 就是这样：

```
import Control.Proxy
import Control.Concurrent.MVar

fromMVar :: (Proxy p) => MVar (Maybe a) -> () -> Producer p a IO ()
fromMVar mvar () = runIdentityP loop where
    loop = do
        ma <- lift $ takeMVar mvar
        case ma of
            Nothing -> return ()
            Just a  -> do
                respond a
                loop 
```

您的流回调将写入`Just input`并且`MVar`您的终结回调将写入`Nothing`以终止`Producer`.

这是一个`ghci`演示它如何工作的示例：

```
>>> mvar <- newEmptyMVar :: IO (MVar (Maybe Int))
>>> forkIO $ runProxy $ fromMVar mvar >-> printD
>>> putMVar mvar (Just 1)
1
>>> putMVar mvar (Just 2)
2
>>> putMVar mvar Nothing
>>> putMVar mvar (Just 3)
>>> 
```

编辑：[该`pipes-concurrency`库](http://hackage.haskell.org/package/pipes-concurrency)现在提供此功能，甚至[在教程中有一节](http://hackage.haskell.org/packages/archive/pipes-concurrency/1.1.0/doc/html/Control-Proxy-Concurrent-Tutorial.html#g:5)专门解释如何使用它从回调中获取数据。

# caching - nginx webpy fastcgi缓存无法工作

> ID：14658025
> 
> 赞同：1
> 
> 时间：2013-02-02T02:33:28.760
> 
> 标签：caching, nginx, fastcgi, web.py

nginx.conf 文件内容如下：

```
http {
include       mime.types;
default_type  application/octet-stream;

# configure cache log
log_format cache '$remote_addr - $host [$time_local]  '
             '"$request" $status $upstream_cache_status $body_bytes_sent '
             '"$http_referer" "$http_user_agent"';

fastcgi_cache_path  /data0/nginx-cache  levels=1:2
                   keys_zone=nginx_fastcgi_cache:1m
                   inactive=1d;

                   fastcgi_temp_path /data0/nginx-cache/temp;

server {
    listen       8080;
    server_name  outofmemory.cn localhost;

    access_log /data0/nginx-1.2.6/logs/cache.log cache;

    #charset koi8-r;

    fastcgi_cache_key "$scheme$request_method$host$request_uri";
    fastcgi_cache   nginx_fastcgi_cache;
    fastcgi_cache_min_uses  1;
    fastcgi_ignore_headers Cache-Control Expires;
    fastcgi_cache_use_stale error  timeout invalid_header http_500;
    #add_header X-Cache cached;

    fastcgi_cache_valid  60m;

    location / {
      root /www/outofmemory.cn;
      fastcgi_param REQUEST_METHOD $request_method;
      fastcgi_param QUERY_STRING $query_string;
      fastcgi_param CONTENT_TYPE $content_type;
      fastcgi_param CONTENT_LENGTH $content_length;
      fastcgi_param REMOTE_PORT $remote_port;
      fastcgi_param SERVER_ADDR $server_addr;
      fastcgi_param SERVER_PORT $server_port;
      fastcgi_param SERVER_NAME $server_name;
      fastcgi_param SERVER_PROTOCOL $server_protocol;
      fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
      fastcgi_param PATH_INFO $fastcgi_script_name;
      fastcgi_pass 127.0.0.1:9002;

      fastcgi_cache_key "$scheme$request_method$host$request_uri";
      fastcgi_cache   nginx_fastcgi_cache;
      fastcgi_cache_valid  60m;
    }

    }
} 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-14T08:18:05.363

我也有同样的问题。正如 yukaizhao 在他的帖子中提到的，需要在下面添加以忽略 expires 标头，否则 fastcgi_cache 将不起作用。

```
fastcgi_ignore_headers "Cache-Control" "Expires" "Set-Cookie"; 
```

谢谢玉开昭！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:22:11.880

我已经解决了这个问题。

我写了一篇文章来解释如何配置nginx + webpy + fastcgi缓存。

[http://outofmemory.cn/code-snippet/2154/nginx-webpy-fastcgi-cache-configuration-explain-in-detail](http://outofmemory.cn/code-snippet/2154/nginx-webpy-fastcgi-cache-configuration-explain-in-detail)

谢谢。

# apache - 安装 AMPPS 后出现错误“Apache 端口：443 正在被另一个应用程序使用”

> ID：14658030
> 
> 赞同：6
> 
> 时间：2013-02-02T02:34:40.187
> 
> 标签：apache, wamp

在为 Windows 安装 AMPPS 后，在尝试启动 Apache 时出现错误消息，

> Apache 端口：443 正在被另一个应用程序使用。

我没有任何其他程序（据我所知），例如当前正在运行的 Skype。如何监控我的 443 端口或更改 Apache 的端口？

顺便说一句，我有 McAfee 作为防病毒软件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T05:40:13.970

打开命令提示符（开始 -> 运行 -> cmd）并键入以下命令：

```
C:\> netstat -aon | findstr 0.0:443 
```

输出的最后一列是使用端口 443 的应用程序的 PID。

您可以在任务管理器中找到应用程序名称。转到进程选项卡，然后在任务管理器的菜单栏中转到查看 -> 选择列 -> 检查“PID”，然后按确定。在列表中搜索PID（如果找不到PID，请单击“显示所有用户的进程”下方），对应的进程是使用端口443的应用程序。停止或卸载它以使您的AMPPS Apache工作.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T05:21:43.497

我遇到了与端口 443 相同的问题，vmware 服务正在运行，我去了任务管理器并停止了服务，然后启动了 apache，它工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-15T16:53:58.067

使用获取`pid`号码后`netstat -aon | findstr 0.0:443`，如果您无法`pid 443`在任务管理器中查找，则：

使用 cmd: 终止进程 443 `taskkill /pid 443`。

您将避免下载任何软件或任何其他令人头疼的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-21T06:23:25.123

对于终止任何进程：

1.  以管理员身份打开cmd
2.  `netstat -aon | findstr 0.0:443`
3.  显示：`TCP 0.0.0.0:443 0.0.0.0:0 LISTENING 4876`，注意 PID 4876
4.  `taskkill /pid 4876 /f`

禁用其他程序（vmware）的端口：

1.  打开 VMware 工作站
2.  编辑->首选项...->共享虚拟机->更改设置->是->禁用共享
3.  您可以更改端口。-> 好的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-12T07:12:19.223

这是根据 Jigar 和 Daniel Dropik（谢谢大家）的评论解决此问题的更详细的方法，因此请检查您遇到此端口问题的服务，在我的情况下是 Apache 和 MySQL。

从 Apache 开始，在 XAMPP 控制面板中单击“日志”并打开错误日志以查看问题，或者转到 XAMPP 安装目录并运行“apache_start.bat”批处理文件，这也会给出问题原因。

现在你已经得到了导致问题的端口号，现在按照 Jigar 的评论运行

```
netstat -aon | findstr 0.0:443 
```

请记住 443 是端口号，因此请输入导致问题的端口号。此命令将使用如下端口提供进程的 PID，

```
TCP    0.0.0.0:443            0.0.0.0:0              LISTENING       4996 
```

所以 4996 是您要停止的进程 ID（PID）。

现在使用任务管理器，您可以看到并杀死进程，但任务管理器无法显示某些进程，在这种情况下，您必须下载 Mycrosoft 的[进程资源管理器](https://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)，解压缩下载的包并以管理员身份运行“.exe”文件。

你会发现一堆正在运行的进程，使用 PID 对它们进行排序，然后你会找到你的服务。

选择该服务并停止它。

然后到XAMPP控制面板运行Apache，这次就可以启动了。

对 MySQL 也遵循相同的过程。

享受 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-03T05:07:57.730

首先，您必须找到使用该端口的进程。我们可以通过以下命令找到它。

```
netstat -aon | findstr 443 
```

那么我们可能会在以下命令中完成找到的过程：

```
taskkill /PID PORTNUMBER /F 
```

或者

您可以转到taskmanager并从进程栏（带有swiching PID列）中找到进程，然后单击结束任务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-28T07:54:20.133

*   去`Ampps\apache\conf\extra`
*   `httpd-ssl.conf`用note++打开文件
*   更改端口

听443--->改变端口

VirtualHost default:443--->"更改端口**>
DocumentRoot "D:/Ampps/www"
ServerName localhost:443--->**更改端口

并保存

# haskell - 谷物与二元

> ID：14658031
> 
> 赞同：13
> 
> 时间：2013-02-02T02:34:48.783
> 
> 标签：haskell, serialization, deserialization

我知道在 Haskell 中序列化和反序列化数据的两个主要竞争包是二进制和谷类。什么时候应该选择其中一个包而不是另一个包？还是我忽略了其他选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T03:20:52.887

它们不是竞争，它们是互补的。 `cereal`适用于严格的字节串，而`binary`适用于惰性。由于其惰性，`binary`依赖于在解析错误时抛出异常，而`cereal`可以通过`Either`.

此外，暗示“只有”两个主要包是一种歪曲。至少你也应该看看 blaze-builder 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-06T16:17:20.187

一方面，浮点的[默认编码](https://github.com/kolmodin/binary/issues/69)`binary`有问题，而不是简单的 IEEE-754 编码。例如，NaN 不能正确往返。没有这样的已知问题。该问题没有得到解决的迹象，但可以通过显式使用类似的东西来规避，这意味着通用派生的实例仍然存在问题。`cereal``getFloatle``Binary`

但另一方面，它`binary`似乎比`cereal`. 目前有 hackage 345[包](https://packdeps.haskellers.com/reverse/cereal)依赖于[821](https://packdeps.haskellers.com/reverse/binary)依赖于. 因此，如果您选择.`cereal``binary``binary`

# mysql - 如何使用两个内部联接修改此查询，以使其停止给出重复的结果？

> ID：14658033
> 
> 赞同：1
> 
> 时间：2013-02-02T02:35:21.247
> 
> 标签：mysql, group-by, subquery, inner-join

**编辑：**我将把帖子原样留在这里，但我真正需要完成的事情需要重新发布。我没有很好地解释这个问题。在以完全不同的起点再次尝试后，我能够获得所需的查询。这是解释[here](https://stackoverflow.com/questions/14658674/using-distinct-inside-join-is-creating-trouble)。

**原始问题：** 我遇到了麻烦。我查看了类似的线程，但找不到特定于该查询的解决方案。数据库非常大，group by 似乎大大减慢了它的速度。

问题是我得到重复的结果。这是我的查询导致重复：

```
SELECT 
  itpitems.identifier, 
  itpitems.name, 
  itpitems.subtitle, 
  itpitems.description, 
  itpitems.itemimg, 
  itpitems.mainprice, 
  itpitems.upc, 
  itpitems.isbn, 
  itpitems.weight, 
  itpitems.pages, 
  itpitems.publisher, 
  itpitems.medium_abbr, 
  itpitems.medium_desc, 
  itpitems.series_abbr, 
  itpitems.series_desc, 
  itpitems.voicing_desc,
  itpitems.pianolevel_desc,
  itpitems.bandgrade_desc,
  itpitems.category_code,
  itprank.overall_ranking,
  itpitnam.name AS artist,
  itpitnam.type_code 
FROM itpitems 
  INNER JOIN itprank ON ( itprank.item_number = itpitems.identifier ) 
  INNER JOIN itpitnam ON ( itpitems.identifier = itpitnam.item_number ) 
WHERE mainprice >1 
```

结果实际上并不完全重复。itpitnam.type_code 在其他重复的结果中具有不同的结果。

由于在查询末尾添加 GROUP BY 会对服务器造成太大压力（它正在搜索大约 300,000 条记录），我还能做什么？

这可以重写为子查询吗？我只是不知道如何消除 type_code 已更改的第二个实例。

感谢您的帮助和帮助。

我还尝试了 SELECT DISTINCT itpitems.identifier，但这提供了相同的结果并且有重复项（其中 type_code 是唯一的区别）。我不想要 type_code 已更改的第二个实例。无论 type_code 是否有多个实例，我只想要每个标识符一个结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:37:50.700

没有看到输出的例子，很难说。但是您是否尝试过相同的确切查询，并在其中`DISTINCT`添加了一个简单的`SELECT`?

```
SELECT DISTINCT itpitems.identifier, itpitems.name, itpitems.subtitle, itpitems.description, itpitems.itemimg, itpitems.mainprice, itpitems.upc, itpitems.isbn, itpitems.weight, itpitems.pages, itpitems.publisher, itpitems.medium_abbr, itpitems.medium_desc, itpitems.series_abbr, itpitems.series_desc, itpitems.voicing_desc, itpitems.pianolevel_desc, itpitems.bandgrade_desc, itpitems.category_code, itprank.overall_ranking, itpitnam.name AS artist, itpitnam.type_code 
FROM itpitems 
INNER JOIN itprank ON ( itprank.item_number = itpitems.identifier ) 
INNER JOIN itpitnam ON ( itpitems.identifier = itpitnam.item_number ) 
WHERE mainprice >1 
```

# cmake - 你是如何做到的，这样 cpack 就不会将所需的库添加到 RPM 中？

> ID：14658034
> 
> 赞同：13
> 
> 时间：2013-02-02T02:35:32.277
> 
> 标签：cmake, rpm, cpack

我正在尝试将我们在工作中的构建系统转换为 cmake，并且遇到了它生成的 RPM 的一个有趣问题（通过 cpack）：它会自动将它认为您的 RPM 具有的所有依赖项添加到其所需列表中图书馆。

总的来说，这很好，但就我而言，这是灾难性的。不幸的是，我们构建的开发包最终安装了一个我们自己开发的工具，该工具使用 rpm 将它们安装在与系统一分开的 RPM 数据库中。这很愚蠢，但我无法改变它。这意味着任何普通库将依赖的所有系统库（如 libc 或 libpthread）都不在与我们的开发包一起使用的 RPM 数据库中。因此，如果我们的开发包之一的 RPM 列出了需要的系统库，那么我们就无法安装它，因为 rpm 会认为它们没有安装（因为它们列在普通数据库中而不是它被告知在安装我们的软件包时使用）。我们当前的构建东西处理得很好，因为它没有将任何系统库列为 RPM 中的依赖项，但 cpack 会自动填充 RPM 所需库的列表并将系统库放在那里。我需要一种方法来阻止它这样做。

我尝试设置`CPACK_RPM_PACKAGE_REQUIRES`为`""`，但这没有效果。RPM cpack 生成的最终仍会列出所需的系统库。在这一点上，我所能想到的就是复制 RPM cpack 生成器并将其修改为我想要的并使用它而不是标准的，但我宁愿避免这种情况。有谁知道如何让 cpack 停止使用所需的库填充 RPM？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T17:23:53.437

见底部

[http://www.rpm.org/max-rpm/s1-rpm-depend-auto-depend.html](http://www.rpm.org/max-rpm/s1-rpm-depend-auto-depend.html)

autoreqprov 标签——禁用自动依赖处理

有时可能不需要 RPM 的自动依赖处理。在这些情况下，可以使用 autoreqprov 标签来禁用它。此标记采用是/否或 0/1 值。例如，要禁用自动依赖处理，可以使用以下行：

AutoReqProv：没有

**编辑：**

为了在 cmake 中设置它，你需要做`set(CPACK_RPM_PACKAGE_AUTOREQPROV " no")`. 在no 前面（或后面）*似乎需要额外的空间才能使其工作。*似乎 cpack 的 RPM 模块有一个错误，因此它不会让您将其某些变量设置为任何短于 3 个字符的长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-16T14:03:05.320

要添加到上面[Mark Lakata 的答案](https://stackoverflow.com/a/14757154/2034366)，有一个“最大 RPM”文档的快照

[http://www.rpm.org/max-rpm-snapshot/s1-rpm-depend-auto-depend.html](http://www.rpm.org/max-rpm-snapshot/s1-rpm-depend-auto-depend.html)

这还补充说：

> autoreq和**autoprov**标签可分别用于禁用需求的自动处理或仅“提供” **。**

至少在我的 CPackRPM 版本中，您可以设置类似的变量，例如

`set(CPACK_RPM_PACKAGE_AUTOREQ " no")`

只禁用'Requires'的自动依赖处理。

# c - unix ar命令中的文件大小不匹配

> ID：14658036
> 
> 赞同：1
> 
> 时间：2013-02-02T02:36:14.643
> 
> 标签：c, fread, unix-ar

我正在开发一个可以读取 unix 归档文件内容的 C 程序。我有一个有趣的错误，也许我不明白，所以我想我会在这里问。

在我看来，存档 c.txt 的文件大小减少了 1。可能是因为双重回报。以下是在 nano 中打开存档文件的内容：

```
!<arch>
b.txt           1359332639  502   20    100644  28        `
Appending B. shortb long b

c.txt           1359332646  502   20    100644  17        `
COpy this shit.

d.txt           1359332655  502   20    100644  28        `
Appending D. shortb long b 
```

文件大小列为 17，但这只会将我带到 d.txt 之前的 \n。结果是，当我使用具有文件大小的 fseek 扫描文件列表时，我最终在 d.txt 崩溃

下面是 C 中 -t 的代码。这不会崩溃，但 d.txt 的文件名是 \nd.txt

当我尝试创建详细版本时，我真的被这个错误搁浅了。

我想知道我在处理文件时是否做错了什么，或者是否还有其他细微差别我没有得到。

```
void table(char *archive){
    printf("\nI'm in -t!\n");
    size_t readNum;
    long long arch_size, file_size;
    char header[60];
    FILE *fp = fopen(archive, "r");
    if (!fp)
        fail('f');

    //get file size
    fseek(fp, 0, SEEK_END);
    arch_size = ftell(fp);
    rewind(fp);

    //move over ARMAG
    if(fseek(fp, strlen(ARMAG), SEEK_SET) != 0)
        fail ('z');

    //loop over files
    while(ftell(fp) < arch_size -1){
        //reads header into
        readNum = fread(header, 1, sizeof(header), fp);
        if(readNum != sizeof(header))
            fail('r');

        printf("%.*s\n", 16, header);

        file_size = atoll(&header[48]);

        //move over file
        if(fseek(fp, file_size, SEEK_CUR) != 0)
            fail ('z');

    }
    fclose(fp);
} 
```

# git - Bash：我如何将所有 args 压缩成一个字符串？

> ID：14658039
> 
> 赞同：0
> 
> 时间：2013-02-02T02:37:11.590
> 
> 标签：git, bash, shell

动机：我正在构建一个命令`commitdeploy`，我想接受非常原始的 shell 输入：

```
bash$ ./commitdeploy this is my commit message 
```

所以我有一个看起来像这样的脚本：

```
#!/bin/bash
...
git commit -a -m"$@" && ./deploy 
```

产生：

```
fatal: Paths with -a does not make sense. 
```

这是我所知道的：

`$@`是 arg 列表。

`"$@"`是否将 arg 列表转换为字符串，使用时应显示为单个 arg

我的问题是，bash 到底想发送`git`什么？如果`git`接收`"$@"`的不是单个 arg，那么我认为我对`"$@"`上述的描述是不正确的。看来我需要插入更多引号！

那么，以下哪一项（如果有）是正确的方法，为什么？

选项 1：`git commit -a -m"\"$@\""`
选项 2：`git commit -a -m\""$@"\"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T02:39:25.217

如果您想要一个参数中的所有内容，请使用`"$*"`而不是。`"$@"`

这是一项 POSIX 功能，因此它适用于所有与 POSIX 兼容的 shell，而不是 bash 主义。

```
#!/bin/sh
# Don't use /bin/bash unless you really need bash-only features.
git commit -a -m "$*" && ./deploy 
```

# java - 通过导航到 bin 目录来解决从命令行启动 Apache Tomcat 的麻烦

> ID：14658042
> 
> 赞同：0
> 
> 时间：2013-02-02T02:37:47.853
> 
> 标签：java, servlets, environment-variables, tomcat7

我目前正在自学servlet。到目前为止，这已经是小菜一碟了。

我从命令行编译我的 Java 程序，并将`classpath`环境变量设置为，`D:\Program Files\apache-tomcat-7.0.35-windows-x86\apache-tomcat-7.0.35\lib\servlet-api.jar`
这样我就不必一遍又一遍地输入它。

但是，
我的*开发环境*和*部署环境*在不同的位置（duh）。每次我必须启动 Tomcat 时，我都必须导航到该`bin`文件夹​​，然后调用`STARTUP.BAT`

这很烦人。
我的问题是：
**有没有办法让我可以直接从存储 Java 源的目录启动 Tomcat？**并避免一直导航的麻烦？
类似于：
`E:\Servlet Projects\Project-1\src > startup.BAT`Tomcat 会启动

**杂项：**

*   操作系统：Windows 7 家庭高级版 32 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:28:01.167

只需将 Tomcat 的 bin 文件夹的路径添加到`path`环境变量中即可。如果在当前文件夹中找不到批处理/命令文件，则操作系统将在`path`环境变量中定义的所有路径中查找该文件，其顺序与定义的顺序相同。

请注意，这一切都与 Java、Servlet 或 Tomcat 完全无关。

# android - onDraw 创建时不触发

> ID：14658048
> 
> 赞同：1
> 
> 时间：2013-02-02T02:38:52.177
> 
> 标签：android

我的自定义视图的 onDraw() 没有被触发。为什么？我正在使用 2.3.3。视图不应该在创建时自动绘制吗？onMeasure() 方法被触发，我得到了正确的屏幕宽度和高度。

```
package com.example.assignment2b;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.Log;
import android.view.Display;
import android.view.Menu;
import android.view.View;
import android.view.WindowManager;

public class AcesActivity extends Activity {

    private static final String TAG = "DEBUG";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        HeartView heartView = new HeartView(this);
        setContentView(heartView);
        heartView.invalidate();
    }

    class HeartView extends View {

        private int screenWidth;
        private int screenHeight;
        private Context context;

        public HeartView(Context context) {
            super(context);
            this.context = context;

        }

        @Override
        public void onDraw(Canvas canvas)  {
            Log.println(Log.DEBUG, TAG, "onDraw fired"); 
            int cardWidth = screenWidth - 10;
            int cardHeight = (int) (cardWidth * 1.4);

            canvas.drawColor(Color.DKGRAY);

            Paint paint = new Paint();
            paint.setColor(Color.WHITE);
            paint.setStyle(Paint.Style.FILL);
            canvas.drawRect(5, (screenHeight/2) - (cardHeight/2), screenWidth - 5, (screenHeight/2) + (cardHeight/2), paint);
            paint.setColor(Color.BLACK);
            paint.setStyle(Paint.Style.STROKE);
            canvas.drawRect(5, (screenHeight/2) - (cardHeight/2), screenWidth - 5, (screenHeight/2) + (cardHeight/2), paint);

        }

        @Override
        public void onMeasure(int width, int height) {
            Log.println(Log.DEBUG, TAG, "onMeasure fired"); 
            WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
            Display display = wm.getDefaultDisplay(); 
            screenWidth = display.getWidth();
            screenHeight = display.getHeight();
            setMeasuredDimension(screenWidth, screenHeight);
            Log.println(Log.DEBUG, TAG, "screenWidth = " + screenWidth); 
            Log.println(Log.DEBUG, TAG, "scrrenHeight = " + screenHeight); 
            super.onMeasure(screenWidth, screenHeight);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:28:58.327

一些不同的问题正在发生。首先正如@dragonwrenn 建议的那样，没有 ViewGroup 和布局参数，您的视图没有内在界限。调用 to`invalidate()`是不必要的，但没有问题。

```
public class AcesActivity extends Activity {

    private static final String TAG = "DEBUG";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        RelativeLayout rl = new RelativeLayout(this);
        RelativeLayout.LayoutParams params = new 
            RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT,
            LayoutParams.MATCH_PARENT);
        setContentView(rl);

        HeartView heartView = new HeartView(this);
        heartView.setLayoutParams(params);
        rl.addView(heartView);    
    }

    class HeartView extends View {

        private int screenWidth;
        private int screenHeight;
        private Context context;

         // Moved a couple of variable declarations out of the onDraw method
        Paint paint;
        int cardWidth;
        int cardHeight;

        public HeartView(Context context) {
            super(context);
            this.context = context;
            paint = new Paint();

        } 
```

其次，您对矩形的数学运算将它们绘制在屏幕边界之外。我输入了一些硬数字作为测试。你会想要修改你的数字以获得你真正想要的。另外，您的笔划没有宽度，所以请注意

```
 @Override
        public void onDraw(Canvas canvas)  {

            Log.println(Log.DEBUG, TAG, "onDraw fired"); 

            canvas.drawColor(Color.DKGRAY);

            paint.setColor(Color.WHITE);
            paint.setStyle(Paint.Style.FILL);
            canvas.drawRect(10, 10, 50, 50, paint);
            paint.setColor(Color.BLACK);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(3);
            canvas.drawRect(10, 10, 50, 50, paint);

        } 
```

第三，我不确定 onMeasure 中的所有内容都试图实现什么，但它会导致视图出现问题。你不应该需要比以下更多的东西：

```
 @Override
        public void onMeasure(int width, int height) {
            Log.println(Log.DEBUG, TAG, "onMeasure fired"); 
            screenWidth = width;
            screenHeight = height;

            Log.println(Log.DEBUG, TAG, "screenWidth = " + screenWidth); 
            Log.println(Log.DEBUG, TAG, "scrrenHeight = " + screenHeight); 
            super.onMeasure(screenWidth, screenHeight);
            cardWidth = screenWidth - 10;
            cardHeight = (int) (cardWidth * 1.4);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        return true;
    }
} 
```

编辑：注意原始海报，以上是在 Eclipse 中测试的功能代码。如果每个部分都被准确地复制和粘贴，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:53:52.893

在您的`onMeasure()`方法中进行以下更改： 在您的类中声明显示指标。 `private DisplayMetrics m_metrics;`

> ```
>  @Override
>     public void onMeasure(int width, int height) {
>         Log.println(Log.DEBUG, TAG, "onMeasure fired"); 
>             Display m_display = getWindowManager().getDefaultDisplay();
>         m_metrics = context.getResources().getDisplayMetrics();
>         m_display.getMetrics(m_metrics);
>         screenWidth = m_display.getWidth();
>         screenHeight = m_display.getHeight();
>             super.onMeasure(screenWidth, screenHeight);
>     } 
> ```

# c# - 在 VS2012 C# 项目中剪切和粘贴 WinForms 控件时保留事件处理程序分配？

> ID：14658052
> 
> 赞同：10
> 
> 时间：2013-02-02T02:39:51.893
> 
> 标签：c#, .net, event-handling, visual-studio-2012

在 VS2012 设计器中剪切和粘贴控件时，有没有办法维护事件处理程序分配？例如，我有一个图形控件，它在事件存根中有一个带有代码的 Load 事件。如果我剪切并粘贴图形控件，则 Load 事件不再显示为在属性编辑器中具有事件处理程序分配。我必须使用 Load 事件旁边的下拉框为 Load 事件重新选择我现有的事件处理程序代码（重做分配）。有没有办法在不丢失事件处理程序分配的情况下剪切和粘贴控件？

在 Delphi 中，我可以自由地剪切和粘贴控件，并且事件处理程序分配是剪贴板文本的一部分，因此当控件粘贴到窗体或框架上时它们会被保留。我希望有一种方法可以对 Visual Studio 2012 和 C# 项目做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-06-26T09:54:36.590

您需要使用文档大纲

```
View > Other Windows > Document Outline 
```

并找到您想要的控件，然后将其拖放到目标容器中。在这种情况下，您不会错过任何活动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T03:25:14.670

使用 Visual Studio 设计器剪切或复制控件时，只会复制控件的属性。这是设计使然，在我看来，这是合理的。如果您在复制控件和分配或复制的所有相同事件处理程序的位置，大多数情况下这将是反直觉的。

听起来控件保持在同一个表单中。在这种情况下，大多数情况下拖动和放置控件就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T08:26:42.830

重新分配事件的一种方法如下：

*   双击粘贴的控件，它会创建一个名称如下的事件：

    ```
    button1_Click_1(...) 
    ```

*   现在将函数名称更改为原始名称`button1_Click`，IDE 会显示有关函数重复的警告，单击确定，然后删除您已经创建的函数。

# ruby-on-rails-3 - Rails和haml，如何将id和类选择器添加到link_to helper？

> ID：14658054
> 
> 赞同：15
> 
> 时间：2013-02-02T02:40:06.723
> 
> 标签：ruby-on-rails-3, haml

我一直在寻找如何使用 向助手添加`id`选择器，这可能吗？`link_to``haml`

```
 a .haml - %a#booked{:href => "index.haml"} Link 1    

  b .html.erb - booking.html.erb - <%= link_to "Link 1", booking_path, :id => "booked" %>

  c .haml.erb - booking.haml.erb - ...?? 
```

哪个相当于haml中的b？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-02T02:44:54.050

`link_to`在 haml 中的工作方式与在 erb 中的工作方式完全相同。所以这会做你想要的：

```
= link_to "Link 1", booking_path, :id => "booked"
#=> <a id="booked" href="/bookings">Link 1</a> 
```

您还可以通过这种方式分配类属性：

```
= link_to "Link 1", booking_path, :id => "booked", :class => "some_class"
#=> <a id="booked" class="some_class" href="/bookings">Link 1</a> 
```

有关如何在 haml 中插入 ruby​​ 代码的更多信息：[插入 ruby](http://haml.info/docs/yardoc/file.REFERENCE.html#inserting_ruby_)

而且，毫无疑问，将 ids 和 classes 传递给，这里是[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)`link_to`中的一个示例：

```
link_to "Articles", articles_path, :id => "news", :class => "article"
#=> <a href="/articles" class="article" id="news">Articles</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T03:15:49.203

要使用 link_to 在 haml 中添加 id 选择器，您必须指定两个哈希值。

```
e.g = link_to "Link 1", {booking_path, extra arg...}, {:id => 'booked'} 
```

一个重要的 Ruby 习语是**诗歌模式**：当解析明确时省略括号和花括号的能力。最常见的是，Ruby 程序员可能会在方法调用的参数周围省略括号，并在方法调用的最后一个参数是散列时省略花括号。因此，以下两个方法调用是等价的，假设方法**link_to**采用一个字符串参数和一个哈希参数：

如果没有花括号，则无法判断此调用是尝试传递具有两个键的散列还是每个键的两个散列。因此，诗歌模式只能在有单个哈希参数并且是最后一个参数时使用。

帕特森，大卫；福克斯，阿曼多 (2012-08-24)。工程持久软件：使用 SaaS 和云计算的敏捷方法，Beta 版（Kindle Locations 1973-1975）。草莓峡谷有限责任公司。Kindle版。

# javascript - javascript中的超时立即显示一个div，3秒后显示另一个？

> ID：14658056
> 
> 赞同：2
> 
> 时间：2013-02-02T02:40:10.780
> 
> 标签：javascript

好的，所以我使用超时来尝试在 3 秒延迟后加载这个 javascript。

通过这个 javascript 加载了两个 div；

对话和封面。

目前，虽然对话框在页面加载时立即显示，但只有封面在等待 3 秒才能加载/显示。但这不应该是我希望两个 div 在 3 秒后一起显示的情况。

请有人告诉我在哪里解决这个问题。

```
 <script type="text/javascript">
 setTimeout(function () {
    var cvr = document.getElementById("cover")
    var dlg = document.getElementById("dialog")
    cvr.style.display = "block"
    dlg.style.display = "block"
    if (document.body.style.overflow = "hidden") {
        cvr.style.width = "1024"
        cvr.style.height = "100&#37;"
    }
}, 3000);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:00:01.377

原因可能是，对话框在加载时可能具有 display:block 属性。尝试首先通过 css 将其更改为“无”。另一件事是看一下 if 语句，你是在分配而不是比较。你应该使用这个 '==' 运算符对..？

干杯.. ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T02:42:08.987

您的“dlg”元素不能在页面加载时隐藏。检查您的 HTML 和 CSS，并`display:none`根据需要添加。

# php - Yii 与 PHP Storm 自动完成和类识别

> ID：14658061
> 
> 赞同：12
> 
> 时间：2013-02-02T02:41:13.910
> 
> 标签：php, yii, phpstorm

我刚刚开始使用 Yii 框架（一个很棒的框架！）并且正在使用 PHP Storm 5。

我已经将 testdrive 文件从 Yii 框架中分离出来，只是更改了 index.php 文件中的所有路径，但我现在如何获得代码完成和 IDE 来识别所有 yii 系统类？

我已经用谷歌搜索并阅读了很多东西，但这一切都非常令人困惑，并且没有很好地解释。有人可以给我几个步骤吗？

谢谢

编辑

我想通了，很简单。您所要做的就是转到文件 → 设置 → 项目设置 → PHP → PHP 主页 → 添加。并将路径添加到 yii 中的框架文件夹，无论它在哪里。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T06:48:30.537

我想通了，很简单。您所要做的就是转到文件 → 设置 → 项目设置 → PHP → PHP 主页 → 添加。并将路径添加到 yii 中的框架文件夹，无论它在哪里。

# c - 使用函数查找字母和单词

> ID：14658063
> 
> 赞同：0
> 
> 时间：2013-02-02T02:42:03.640
> 
> 标签：c

我试图得到字母数/单词数的答案......我在单词计数方面遇到了问题。

实际上在这里我只声明一个新词是如果有一个空格，制表符，换行符，但仍然不起作用..

这是我的功能：

```
int num_of_letters_words()
{
    int numberOfLetters = 0;
    int numberOfWords = 0;
    int userInput;
    int answer;
    printf("please enter your input:\n");
    while ((userInput = getchar()) != EOF)
    {
        if (ispunct(userInput))
            continue;

        else if(userInput == '\n')
            continue;

        else if (userInput == ' ')
            continue;

        else if (iscntrl(userInput))
            continue;

        else if (userInput == ' ')
            ;
        else
           numberOfLetters++;

        if (userInput == ' ' || userInput == '\n' || userInput == '\t')
            numberOfWords++;
    }
    answer = numberOfLetters/numberOfWords;
    return answer;
} 
```

只有在函数的末尾你才能看到计数器……这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T02:54:21.553

`continue`使您的循环继续下一次迭代，它会跳过它后面的内容。

假设“单词”将定义为一系列字母，后跟分隔符（空格、制表符等），那么您的循环可能如下所示：

```
while ((c = getchar()) != EOF)
{
    if (c == ' ' || c == '\t' || c == '\n' || etc.)
    {
        if (letterCountThisWord > 0)
            wordCount++;
        letterCountThisWord = 0;
        continue;
    }
    letterCount++;
    letterCountThisWord++;
}

if (letterCountThisWord > 0)
    wordCount++; 
```

如果您不确定您的应用程序中发生了什么，有很多很棒的 IDE 提供了很好的调试工具。您可以逐步浏览您的代码，观察您的变量如何变化，并以这种方式真正理解您的代码。

还有一个建议：在你的桌子上放一些东西（瓶子、花等），想象这是你的教授或老板，并尝试详细解释他的代码是如何工作的。你会意识到你自己不知道你的代码的某些部分实际上做了什么/发生了什么，这将迫使你寻找答案（谷歌，书籍，......）。

祝你好运 ：）

# excel - Excel：从列中选择一个变化范围并复制它

> ID：14658064
> 
> 赞同：-1
> 
> 时间：2013-02-02T02:42:05.770
> 
> 标签：excel

我有一个很长的列（50000 行），我想选择一个单元格范围（样本）（行数）以应用某些计算。您不必担心计算公式。在这里，我只需要有关如何进行采样的帮助。范围（样本）应根据窗口大小而变化。窗口大小是一个我可以选择的数字。例如，在下面的示例中，我选择了窗口大小为 4。换句话说，我需要有样本，这些样本基于选定的长列的行数。所有样本的大小（行数）将等于窗口大小。但是，每个样本都从主列移动了一个。现在，样本应该在单独的列中，这就是为什么我需要在其所需列中复制每个样本中的选择。为了说明目的，假设以下示例：

```
test
 1
 2
 3
 4
 5
 6
 7
 8
 9
 10 
```

预期的输出应该是：

```
main col sample1 sample2 sample3  sample4 sample5 sample6 
 1         1       2         3         4       5     6  
 2         2       3         4         5       6     7  
 3         3       4         5         6       7     8
 4         4       5         6         7       8     9
 5    
 6 
 7 
 8
 9
 10 
```

但是，每个大小为 4 rows 的样本，每个新样本都会从主列移动 1。请注意，我们得到 6 个样本来覆盖主列中的全部行数。基本上应该做的事情：sample1 将从主列的第 1 行到第 4 行。现在，sample2 将是 4 个值，但是，从第 2 行到第 5 行，从主列。sample3 将是 4 个值，从第 3 行到第 6 行，依此类推，直到我们覆盖了主列的整个范围。所以有两个主要过程，选择和复制选择。

我曾尝试使用偏移量和其他逻辑功能......但它没有用。我不想使用宏或 VBA... 是否有任何内置函数来解决问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:20:40.160

这基本上是范围转置的变体。使用公式：

```
=INDEX($A:$A,COLUMN()+ROW()-2,1) 
```

然后只需复制到您想要的任何窗口大小。它会自动将主列向下移动一行，每列在它上面。结果如下所示（您负责将公式复制到正确的大小）：

![结果](../Images/f86cdc4bb3b0c71388a3558418d150e3.png)

奖励，您可以使用以下方法自动化列标题“Sample N”：

```
="Sample " & COLUMN()-1 
```

# jquery - 使用 jquery 更改背景颜色

> ID：14658069
> 
> 赞同：1
> 
> 时间：2013-02-02T02:42:36.530
> 
> 标签：jquery, ruby-on-rails

这是我第一次尝试自己编写 jQuery。我正在努力做到这一点，因此当我将鼠标悬停在一个名称的实例上时，背景以及该名称的所有其他实例都会变为白色。每个名称都有一个唯一的数据 ID，它对所有实例都是通用的。

`person = this.data("id");`我认为我的 jQuery 在尝试分配悬停元素的数据属性时出错，然后使用该数据属性更改所有元素的背景。不确定我是否接近。

错误如下：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'data' localhost:60
  (anonymous function) localhost:60
  jQuery.event.special.(anonymous function).handle jquery.js:3353
  jQuery.event.dispatch jquery.js:3062
  elemData.handle.eventHandle 
```

![时间线](../Images/696cbd41bf572fae38e09a352f669b8b.png)

```
<div id="center">
    <% @instances.each do |instance| %>
        <div class="instance" data-id="<%= instance.person.id %>" style="top:<%=top_helper(instance)%>px; left:<%= left_helper(instance) %>px; width:<%= width_helper(instance) %>px;">
            <span><%= instance.person.first_name %>, <%= instance.rank %></span>
        </div>
    <% end %>
</div>

<script>
    $("div#center").ready(function(){
        var person 
        $("div.instance").hover(function(){
            person = this.data("id");
            $data(person).css("background-color","white");
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T02:47:52.127

你很亲近！

```
$("div.instance").hover(function(){
    person = $(this).data("id");
    $('div[data-id="' + person + '"]').css("background-color","white");
 }); 
```

`hover`接受两个函数作为参数，所以你的 mouseout 只是在之后做相反的事情：

```
$("div.instance").hover(function(){
    person = $(this).data("id");
    $('div[data-id="' + person + '"]').css("background-color","white");
 },
 function(){
    person = $(this).data("id");
    $('div[data-id="' + person + '"]').css("background-color","gray");
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T02:52:32.053

问题是您没有正确获取具有特定 data-id 值的元素，问题是`$data(person)`. 用这个：

```
$("div#center").ready(function(){
    var person 
    $("div.instance").hover(function(){
        person = $('this').data("id");
        $('div[data-id="' + person + '"]').css("background-color","white");
    });
}); 
```

您必须将 current 的值注入到属性 Equals 选择器中，就像[这个人一样](https://stackoverflow.com/a/4191718/670377)

# c# - 回调请求的事务查询中止

> ID：14658070
> 
> 赞同：2
> 
> 时间：2013-02-02T02:43:02.570
> 
> 标签：c#, sqlite, system.data.sqlite

我正在使用其中包含事务的递归函数，但是该事务导致“由于 ROLLBACK 导致回调请求的查询中止中止”错误。这是我的代码：

```
 public Dictionary<int, string> GetFolders(string connectstring)
    {
        var connection = new SQLiteConnection(connectstring);
        connection.Open();

        Dictionary<int, string> folderdictionary = new Dictionary<int, string>();
        using (var transaction = connection.BeginTransaction())
        {
            using (SQLiteCommand command = connection.CreateCommand())
            {
                command.CommandText = "select * from moz_bookmarks AS bookmarks WHERE type=2";
                SQLiteDataReader commandread = command.ExecuteReader();
                int current_id = 0;
                List<string> currentfolders = new List<string>();

                while (commandread.Read()) // <--------------- thrown here
                {
                    var title = commandread.GetString(5);
                    current_id = commandread.GetInt32(0);

                    var parent = commandread.GetInt32(3);
                    List<string> folders = new List<string>();
                    folder = GetChild(connection, (string)commandread["title"], commandread.GetInt32(3), ref folders, true);
                    currentfolders.Add(folder);
                    folderdictionary.Add(current_id, folder);

                    folder = "";
                }

            }
            transaction.Commit();
        }
        connection.Close();
        return folderdictionary;
    } 
```

递归本身在 GetChild 函数中：

```
private static string GetChild(SQLiteConnection sqlite_connection2, string title, int id, ref List<string> folder, bool recursive, SQLiteTransaction transaction)
{
    if (recursive)
        folder.Add(title);
    using (SQLiteCommand folder_get = sqlite_connection2.CreateCommand())
    {
        folder_get.Connection = sqlite_connection2;
        folder_get.CommandText = "SELECT * FROM moz_bookmarks WHERE id = " + id;

        SQLiteDataReader get_folders = folder_get.ExecuteReader();
        while (get_folders.Read())
        {
            if (get_folders.GetInt32(1) == 1)
            {
                break;
            }
            else if (get_folders.GetInt32(1) == 2 && get_folders.GetInt32(0) != 1)
            {
                folder.Add(get_folders["title"].ToString());
                if (get_folders.GetInt32(3) != 0 && get_folders.GetInt32(0) != 1)
                {
                    GetChild(sqlite_connection2, (string)get_folders["title"], get_folders.GetInt32(3), ref folder, false);
                }
                break;
            }
        }
        if (recursive)
            folder.Reverse();
        get_folders.Close();
    }
    return string.Join("\\", folder);
} 
```

如果没有 SQLiteTransaction，GetChild 会造成巨大的内存泄漏并最终引发 OutOfMemoryException。

# c# - 启用应用按钮的事件

> ID：14658074
> 
> 赞同：2
> 
> 时间：2013-02-02T02:44:05.450
> 
> 标签：c#, winforms, events, button, apply

我的标准 winform 上的应用按钮在加载时被禁用，我想启用它，如果任何其他控件的状态发生更改（复选框、单选框、文本框等）

所以我可以浏览每个控件的事件并在那里启用按钮，但我想知道是否有更简单的方法来做到这一点，比如全局事件。

**编辑** 澄清：我正在寻找一种方法，我不必对每个控件都做某事。这样我就可以在以后添加更多控件而不必关心它们...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:04:16.863

根据您的编辑，我已经修改了我的答案以包含您想要的功能。

首先，您需要一个看起来像这样的通用事件处理程序：

```
void MyHandler(object obj, EventArgs e)
{
    button1.Enabled = true;
} 
```

其中 button1 是您希望启用的按钮。

然后，您将需要一种递归方法，不仅可以遍历您的`Form.Controls`.，还可以遍历其中包含的任何容器类型控件。我已经处理了一些常见的容器控件以及一些基本的数据输入控件：

```
void AddEvents(System.Windows.Forms.Control.ControlCollection Controls)
{
    foreach (Control c in Controls)
    {
        if (c is GroupBox)
        {
            AddEvents(((GroupBox)c).Controls);
        }
        else if (c is Panel)
        {
            AddEvents(((Panel)c).Controls);
        }
        //Expand this series of if...else... to include any 
        //other type of container control
        else if (c is TextBox)
        {
            ((TextBox)c).TextChanged += new EventHandler(MyHandler);
        }
        else if (c is RichTextBox)
        {
            ((RichTextBox)c).TextChanged += new EventHandler(MyHandler);
        }
        else if (c is CheckBox)
        {
            ((CheckBox)c).CheckedChanged += new EventHandler(MyHandler);
        }
        else if (c is DateTimePicker)
        {
            ((DateTimePicker)c).ValueChanged += new EventHandler(MyHandler);
        }
        //Expand this to include any other type of controls your form 
        //has that you need to add the event to
    }
} 
```

该`if else`块的第一部分检查是否属于`control`包含其他控件的类型。如果是，则[递归](http://www.dotnetperls.com/recursion)调用 AddEvents 方法，其中`System.Windows.Forms.Control.ControlCollection`包含new `control`。

该`if else`块的第二部分检查控件 c 的类型，以便可以将其适当地[转换](http://msdn.microsoft.com/en-us/library/ms173105%28v=vs.80%29.aspx)为正确的类型，从而利用正确的事件。如果此时我们能够确定我们的控件类型，则将之前创建的通用事件添加为处理程序。

最后，您需要调用此方法。最好的两个地方可能是在您的构造函数中或在`Form.Load`事件中。放置它的最佳位置将取决于您的具体情况。为了简单起见，我选择使用我的构造函数，现在看起来像这样：

```
public Form1()
{
    InitializeComponent();
    AddEvents(this.Controls);
} 
```

这应该是您迭代控件和添加通用事件处理程序所需的全部内容。这段代码来自我创建的一个实际项目，我已经对其进行了测试以确保它具有正确的功能。

**编辑：**我也刚刚使用`control`s inside of a `GroupBox`inside of a `Panel`inside of a `GroupBox`inside of a`Panel`进行了测试`Form`。这就是利用递归的用处所在。只要您正确设置了`if...else...`块，您就不需要知道确切的嵌套深度。它将尽可能深入，而无需使用嵌套循环并知道确切的深度。

**EDIT2：**作为旁注，此方法也可以在更细粒度的级别上使用。假设您有多个`GroupBox`控件，并且您希望只将事件处理程序添加到“grpBox1”中的控件。您可以调用`AddEvents(grpBox1.Controls)`而不是，`AddEvents(this.Controls)`这只会将事件处理程序应用于`grpBox1`.

**EDIT3：**正如 onemancat 在评论中指出的那样，实际上并不完全有必要检查控件是 a`GroupBox`还是 a`Panel`等，因为所有控件都继承自`Control`具有`Controls`属性的基类。您可以简单地检查是否`Control`包含其他控件，`if (c.Controls.Count > 0) AddEvents(c.Controls);`但是在想要选择要迭代的容器控件的情况下，有必要像我在示例中那样检查类型。如果没有必要如此细化，那么检查计数并且从不打扰类型检查或强制转换确实更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T03:18:27.177

如果这将成为您的应用程序中的一个常见主题，您可以创建一些可重用的代码，递归地检查表单的所有控件，并将事件处理程序连接起来。你可以把它放在 InitiaizeComponent(); 之后。

```
 // Programmatically wire up all Changed events to enable the button
        foreach (Control ctl in this.Controls)
        {
            if (ctl is CheckBox)
            {
                ((CheckBox)ctl).CheckedChanged += new EventHandler(Button_Enable);
            }
            else if (ctl is RadioButton)
            {
                ((RadioButton)ctl).CheckedChanged += new EventHandler(Button_Enable);
            }
            // Here, wire up all other control types you'd like the button to respond to
        } 
```

然后，在处理程序中，启用按钮：

```
void Button_Enable(object obj, EventArgs e)
{
    MyButton.Enabled = true;
} 
```

您可以在许多表单上调用此方法来为用户创建一致的 UI。这种方法的优点是当您向表单添加新控件时，您（或下一个开发人员）不必记住将更改事件连接到启用的按钮，它会自动发生。

# jquery-ui - jQuery UI .effect 不起作用

> ID：14658088
> 
> 赞同：-1
> 
> 时间：2013-02-02T02:45:49.930
> 
> 标签：jquery-ui

由于某种原因，我的网站无法识别 jQuery UI 的功能。Wappalyzer 表示该站点正在访问 UI，但 Firebug 表示未定义缓动效果。

我的网站是 www.backwards.ca

我显然才刚刚开始，但我很好奇为什么 jQuery UI 没有发生任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:55:22.577

问题解决了......忘记了脚本标签中的“https：”

# vb.net - Visual Studio 2010 (VB) 中用于登录的事件

> ID：14658089
> 
> 赞同：0
> 
> 时间：2013-02-02T02:46:25.203
> 
> 标签：vb.net, winforms

我有一个问题，我们在登录时为文本框使用什么事件？

我想在我的程序中创建一个 LoginForm，当我在 TextBoxes 中输入用户名和密码时，我将使用 ENTER（在键盘中）而不是单击“登录”按钮。

我应该把这些代码放在什么事件中？：

```
 If txtUser.Text <> UsernameTextBox.Text And txtPass.Text <> PasswordTextBox.Text Then
     MsgBox("Wrong Username or Password!", MsgBoxStyle.Critical)
     txtUser.Text = ""
     txtPass.Text = ""
 Else
     ProgressBar1.Show()
     LoadLabel.Show()
     Timer1.Start()
 End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:37:18.097

根据 MSDN，表单的[`AcceptButton`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)属性：

> 获取或设置用户按 ENTER 键时单击的窗体上的按钮。

要获得您正在寻找的行为，只需将`AcceptButton`表单上的属性设置为*登录*按钮（链接中有一个示例）并将上面的代码放入[`OnClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx)按钮的常规事件处理程序中。

# cuda - 是否在 Kepler 上为图形模拟双精度浮点？

> ID：14658094
> 
> 赞同：0
> 
> 时间：2013-02-02T02:47:37.867
> 
> 标签：cuda, floating-point

比较 Kepler 图形和计算版本的 SMX，我注意到图形版本的框图中没有双精度单位。这些块在计算版本上是黄色的。图形芯片上是否模拟双精度？这似乎是可能的，因为吞吐量仅为单精度的 1/24。

![小开普勒 SMX 和大开普勒 SMX 的比较](../Images/75801f86259cb0c0ba48ed49317b0318.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:25:24.800

NVIDIA 有两个版本的 Kepler SM。SM 3.0 针对图形和非双精度工作负载。SM 仅具有足够的数据路径，可用于每个周期 8 次 64 位操作（如果执行 DFMA，则为 x2）。SM 3.5 (K20) 针对高性能计算工作负载。SM 3.5 每个周期支持 64 个 64 位操作。两个 SM 都在硬件中实现双精度运算。

# entity-framework - 实体框架 - TPH - 具有外键属性的派生实体

> ID：14658102
> 
> 赞同：1
> 
> 时间：2013-02-02T02:48:23.233
> 
> 标签：entity-framework

如果驻留在我的 TPH 表中的一个或多个子类具有外键属性（即类属性），在创建派生实体并将派生特定属性移动到派生类之后，我如何满足 EF 中的这些约束？

# javascript - 为页面加载时不存在的内容设置动画

> ID：14658103
> 
> 赞同：2
> 
> 时间：2013-02-02T02:49:31.247
> 
> 标签：javascript, jquery, dom, jquery-animate

Ajax 设置一个场景，然后 jQuery 将其播放出来。该元素在页面加载之前不存在。我需要一种对动态添加到页面的内容进行动画处理的方法。

就像是：

```
$(document).on("animate", "div", function (){}); 
```

这样的事情存在吗？

好的，似乎有些混乱，我正在使用 queue() 这不是创建它或在我返回 ajax 后做某事的问题。在 Ajax 之后，程序构建并插入具有特定 ID 的 imgs 到页面中。我需要重新加载 dom 或其他东西，以便我可以为插入页面的对象设置动画。

我已经在 J​​Sfiddle 上测试了动画并且它们工作正常，所以我唯一的假设是因为这些对象不是初始 dom 的一部分，它们不会动画，因此我需要重新加载 DOM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:46:40.280

您所要做的就是使用适当的功能对其进行动画处理，例如：

```
$("#nonexistent-element").animate({
  right: '10%'
}); 
```

一旦 #nonexistent-element 存在，它就会动画，无论它在页面加载时是否存在。仅当您要将事件绑定到页面加载时不存在的元素时，才需要使用 on()。

工作jsfiddle：http: [//jsfiddle.net/emFpw/26/](http://jsfiddle.net/emFpw/26/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T11:27:09.783

当通过 Ajax 加载内容时，我们需要绑定事件以使其工作，或者我们可以使用 jQuery 的 live/on 方法，这将根据我们的需要将事件绑定到父/文档。

这两种技术中的任何一种，即加载内容时的绑定或使用 live/on 都应该导致事件被触发。

例如：插入内容后，我们可以按照**Lrdwhyt**在上述答案中的建议进行操作。或者我们在加载之前绑定元素

```
$("#non-existing-elem").live("click",function(){
     $(this).animate({right:'10'});
}) 
```

# jquery - highcharts 通过 JSON 获取数据？

> ID：14658104
> 
> 赞同：2
> 
> 时间：2013-02-02T02:50:03.243
> 
> 标签：jquery, json, highcharts

我想通过 getJSON 方法将数据传递给 highcharts：

```
<script type="text/javascript">
var chart;
    $(document).ready(function(){
$("#datepicker1").datepicker({showOn: 'button', buttonImage: 'css/base/images   /calendar.gif', buttonImageOnly: true,dateFormat: "yy-mm-dd"});
  });
function draw_chart(){`
   var url="http://localhost/handle_data.php?start=2012-12-30&end=2013-01-04";
    chart=new Highcharts.Chart({});

$.getJSON(url,function(data1){
 var options={
    chart: {
            renderTo: 'container',
    type: 'line'
        },

        xAxis:{
    type: 'datetime'

   },
        yAxis: {
            title: {
                text: 'test'
            }

        }, 
        series:[{
           data:data1.result[0].dayactivity,
           name: "name"
       }]

};
var chart = new Highcharts.Chart(options);
});
}

</script>
</head>

<body>

<div >  
<input type="text" id="datepicker1" name="date1" onchange='draw_chart()' >
</div>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div> 
```

的值为`data1.result[0].dayactivity`：

```
[[1356796800,0.0],[1356883200,16.1],[1356969600,0.0],[1357056000,0.0],[1357142400,15.0]], 
```

当我将此值直接放入时`options.series[0].data`，它可以工作，但是当我通过 getJSON 传递它时，它不会。图表为空。似乎它`var chart = new Highcharts.Chart(options);`首先执行。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:20:42.117

您需要`Chart`在`success`回调中移动创建，`$.getJSON();`您只需实例化并创建`Chart`一次，这将在回调函数中。

```
function draw_chart() {
    var url="http://localhost/handle_data.php?start=2012-12-30&end=2013-01-04";
    $.getJSON(url,
        function(data1){
            /** Declare options after success callback. */
            var options={
                chart: {
                     renderTo: 'container',
                     type: 'line'
                },
                xAxis:{
                     type: 'datetime'
                },
                yAxis: {
                     title: { text: 'test'}
                }, 
                series:[{
                    data:data1.result[0].dayactivity,
                    name: "name"
                }]
           };

           /** Create a chart instance and pass options. */
           var chart = new Highcharts.Chart(options);
       }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:20:19.847

您初始化了 highcharts，在获取数据之前，这是固定脚本，我评论了更改的行。

```
var chart;
$(document).ready(function () {
    $("#datepicker1").datepicker({
        showOn: 'button',
        buttonImage: 'css/base/images   /calendar.gif',
        buttonImageOnly: true,
        dateFormat: "yy-mm-dd"
    });
});

function draw_chart() {
    var url = "http://localhost/handle_data.php?start=2012-12-30&end=2013-01-04";
//    chart = new Highcharts.Chart({}); //PROBLEM ONE - empty initialisation 

    $.getJSON(url, function (data1) {
        var options = {
            chart: {
                renderTo: 'container',
                type: 'line'
            },

            xAxis: {
                type: 'datetime'

            },
            yAxis: {
                title: {
                    text: 'test'
                }

            },
            series: [{
                data: data1.result[0].dayactivity,
                name: "name"
            }]

        };
        //var chart = new Highcharts.Chart(options); // removed var here, as it looks you want it to be global
        chart = new Highcharts.Chart(options);
    });
}
draw_chart(); 
```

[没有json的演示](http://jsfiddle.net/oceog/2KCfH/)，但你可以看到问题

# signals-slots - 将皮下注射与 Boost.Signals2 结合使用

> ID：14658113
> 
> 赞同：1
> 
> 时间：2013-02-02T02:52:27.697
> 
> 标签：signals-slots, boost-signals, boost-signals2, hypodermic

为了将 Boost.Signals2 与 Hypodermic 一起使用，我将如何连接插槽？我会将连接代码放在 OnActivating 块中吗？

即使 Hypodermic 是用 Signals2 构建的，我是否认为它们并没有重复彼此的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:28:56.420

在 OnActivating 中连接信号不会“触发”信号；也就是说，您的信号的代表不会被调用。

但是，当然，您可以执行以下操作来使其正常工作：

```
mySignal.connect([](std::shared_ptr< Foo > foo)
{
    // do some stuff with Foo being activated
}); 

builder.autowireType< Foo >()->onActivating(
    [&mySignal](IActivatingData< Foo >& data)
    {
        // invoke all delegates...
        mySignal(data.instance());
    }
); 
```

希望有帮助。

# php - DateTime Null 和 mySql

> ID：14658118
> 
> 赞同：0
> 
> 时间：2013-02-02T02:52:47.587
> 
> 标签：php, datetime

我经常遇到这个问题，必须有更好的方法来做到这一点。所以我有一个 Order 类和一个 Order_db 类。在订单类中有一个属性 $orderDate 是一个 DateTime 对象。

问题是有时 $orderDate 为空。所以看来我必须选择：

1.  当我进行选择查询时，我会在调用我的设置器之前测试是否有日期。当我执行插入查询时，我会在尝试执行 ->format 之前检查 $orderDate 是否不为空（因为这会引发错误）

2.  在创建新的 DateTime 对象之前，我在 setter 中测试是否通过了任何内容，但是在将它与 ->format 一起使用之前，我仍然坚持测试它是否存在。

这没什么大不了的，但我处理了很多日期字段，而且它变得非常重复。有没有更好的方法来处理这个？在我的理想世界中，如果我在创建实例时没有向 DateTime 传递任何内容，它将为 null，如果我在 null DateTime 上调用 ->format，它将不返回任何内容，而不是引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:55:17.850

尝试这个：

```
CREATE TABLE IF NOT EXISTS `DB`.`Exampletable` (
 `field_1` VARCHAR(255) NOT NULL DEFAULT '',
 `field_2` CHAR(20) NOT NULL default 'default_text',
 `field_3` INT(10) DEFAULT NULL,
 `field_4` BIGINT(20),
 `field_5` DATETIME DEFAULT NULL
); 
```

您是否尝试将默认 NULL 添加到日期？

# linux - Linux x86 引导加载程序

> ID：14658119
> 
> 赞同：5
> 
> 时间：2013-02-02T02:53:03.957
> 
> 标签：linux, assembly, kernel, nasm, 16-bit

我正在尝试在 nasm 中构建一个简单的 x86 Linux 引导加载程序。

Linux bzImage 存储在从第一个扇区开始的磁盘分区 sda1 上。

我将 bzImage（15 个扇区）中的实模式代码从 0x7E00 开始读入内存。但是，当我跳入代码时它只是挂起，没有任何反应。

我已经为 sda 上的主引导记录创建了代码。如果我只是附上整个东西，我可能是最好的。我想知道为什么它只是在远跳转指令之后挂起。

```
[BITS 16]

%define BOOTSEG 0x7C0 
%define BOOTADDR (BOOTSEG * 0x10)

%define HDRSEG (BOOTSEG + 0x20)
%define HDRADDR (HDRSEG * 0x10)

%define KERNSEG (HDRSEG + 0x20)

[ORG BOOTADDR]
entry_section:
    cli
    jmp     start
start:
    ; Clear segments
    xor     ax, ax
    mov     ds, ax  
    mov     es, ax
    mov     gs, ax
    mov     fs, ax
    mov     ss, ax
    mov     sp, BOOTADDR    ; Lots of room for it to grow down from here

    ; Read all 15 sectors of realmode code in the kernel
    mov     ah, 0x42
    mov     si, dap
    mov     dl, 0x80
    int     0x13
    jc  bad

    ; Test magic number of kernel header
    mov     eax, dword [HDRADDR + 0x202]
    cmp     eax, 'HdrS'
    jne     bad

    ; Test jump instruction is there
    mov     al, byte [KERNSEG * 16]
    cmp     al, 0xEB
    jne     bad

    xor     ax, ax      ; Kernel entry code will set ds = ax
    xor     bx, bx      ; Will also set ss = dx
    jmp     dword KERNSEG:0

; Simple function to report an error and halt
bad:
    mov     al, "B"
    call    putc
    jmp     halt

; Param: char in al 
putc:
    mov     ah, 0X0E    
    mov     bh, 0x0F
    xor     bl, bl  
    int     0x10
    ret

halt:
    hlt
    jmp     halt

; Begin data section
dap:                ; Disk address packet
    db  0x10            ; Size of dap in bytes
    db  0               ; Unused
    dw  15              ; Number of sectors to read
    dw  0               ; Offset where to place data
    dw  HDRSEG          ; Segment where to place data
    dd  0x3F            ; Low order of start addres in sectors
    dd  0               ; High order of start address in sectors

; End data section

times 446-($-$$) db 0   ; Padding to make the MBR 512 bytes

; Hardcoded partition entries
part_boot:
    dw 0x0180, 0x0001, 0xFE83, 0x3c3f, 0x003F, 0x0000, 0xF3BE, 0x000E
part_sda2:
    dw 0x0000, 0x3D01, 0xFE83, 0xFFFF, 0xF3FD, 0x000E, 0x5AF0, 0x01B3
part_sda3:
    dw 0xFE00, 0xFFFF, 0xFE83, 0xFFFF, 0x4EED, 0x01C2, 0xb113, 0x001D
part_sda4:
    dw 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000

dw 0xAA55   ; Magic number at relative address 510
mbrend:     ; Relative address 512 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:17:41.717

注释与代码不匹配！

`xor bx, bx ; Will also set ss = dx`

我严重怀疑这是不是你的问题...

免责声明：我没有这样做！我是“鸡”，总是从软盘上做我的引导。

我“期望”在 MBR 中看到的是让它自己移开，然后将活动分区上的第一个扇区再次加载到 7C00h，然后跳转到那里。这个“真正的引导加载程序”会加载其余部分。我不熟悉 bzImage 的布局 - 也许它会在 7E00h 加载...

我想我在我的头上。我去拿外套...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T21:24:39.747

假设您的代码是引导加载程序（因此不是 MBR）：

*   除非必须，否则永远不要禁用 IRQ。BIOS 需要它们正常运行，并且无论如何都会在某些 BIOS 功能中启用它们（例如，等待磁盘功能中的“扇区转移”IRQ）。因为您的代码只是加载并将控制权传递给更多实模式代码（例如，没有切换到保护模式或涉及任何事情），您没有理由在整个引导加载程序的任何地方禁用 IRQ。
*   对于实模式寻址，使用 0x0000:0x7C00 而不是 0x07C0:0x0000 通常更干净/更容易。您似乎试图混合两者（例如，为前者设置段寄存器，但为后者定义 BOOTSEG 和 HDRSEG）。
*   分区表包含“扩展分区”而不是“主分区”，因此您的分区表是错误的（可能应该是空白/空）。
*   引导加载程序不应假定任何特定/硬编码的“起始 LBA”（分区的“起始 LBA”取决于最终用户在安装操作系统时对磁盘分区的感受）。您需要从 MBR 的主分区表中确定分区的“起始 LBA”，这通常通过希望 MBR 离开 DS:SI 指向您分区的分区表条目来完成。
*   您不应假设您正在从“BIOS 设备 0x80”启动。MBR 应该将 DL 设置为正确的设备编号，并且如果（例如）操作系统安装在第二个硬盘驱动器或其他东西上，那么您的代码应该没有理由不工作。
*   您硬编码的“开始读取 LBA”（在 DAP 中）是错误的。由于历史原因，每个轨道可能有 63 个扇区，您的分区从第 64 个扇区开始。这意味着 LBA 扇区 0x3F 是分区中的第一个扇区（这是您的引导加载程序），而不是内核的第一个扇区。我假设内核的第一个扇区可能是 LBA 扇区 0x40（分区的第二个扇区）。
*   “扇区数”也不应该被硬编码。您想加载内核的开头并检查它，并确定要从哪里加载多少扇区。
*   通常 512 字节（实际上更像 446 字节）对于一个体面的引导加载程序来说太少了。引导加载程序的前 512 个字节应该加载引导加载程序的其余部分（剩余的每个备用字节都用于改进错误处理 - 例如`puts("Read error while trying to load boot loader")`，而不仅仅是`putc('B')`）。其他所有内容（加载内核片段、设置视频模式、在“实模式内核头”字段中设置正确的值等）都应该在附加扇区中，而不是在第一个扇区中。

请注意，计算机的启动方式经过精心设计，任何 MBR 都可以将任何操作系统链式加载到任何磁盘的任何分区上；并且 MBR 可能是允许安装多个操作系统的更大的东西（例如引导管理器）的一部分（例如，用户可以使用漂亮的菜单或其他东西来选择 MBR 的代码应该链式加载的分区）。这种设计允许用户随时用其他任何东西替换 MBR（或引导管理器），而不会影响任何已安装的操作系统（或导致所有已安装的操作系统都需要修复）。举个简单的例子，一个用户应该能够拥有 12 个不同的分区，这些分区都包含你的引导加载程序和一个单独/独立的 Linux 版本，然后安装他们的任何引导管理器（例如 GRUB、Plop、GAG、MasterBooter 等）随时想要。

对于您的代码为何挂起，这并不是很重要，因为无论如何都需要重写所有代码。如果您很好奇，我强烈建议您在带有调试器（例如 Bochs）的模拟器中运行它，以便您可以准确检查发生的情况（例如，在 0x00007E00 处转储内存以查看其中包含的内容，单步执行 JMP 到查看正在执行的操作等）。

# html - 将 FB Like 按钮固定在图像顶部的位置（响应式）

> ID：14658120
> 
> 赞同：0
> 
> 时间：2013-02-02T02:53:26.093
> 
> 标签：html, css, wordpress

我正在尝试将 Facebook Like 按钮修复到 WordPress 标题图像顶部的特定位置，但在 CSS 样式（以及可能的 id 与类）方面遇到问题

在[这个网站上](http://www.w4u.org.uk)，我想在图片标题图片蓝色部分的“立即加入”文本下方放置一个“赞”按钮。

我试图创建一个单独的 div 类并定位它，但至少可以说，我对固定/绝对/相对的知识相当粗制滥造。它做了一个绝对位置，但是当我调整浏览窗口的大小时它不会与图像保持一致。（我们的活动针对的是年轻学生，因此很多人会通过小型笔记本电脑屏幕和智能手机访问我们的网站，因此必须做出响应）

有谁知道我该怎么做？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:16:36.477

编辑 HTML 元素的布局，使您的点赞按钮位于主图像链接下方，如下所示：

```
<div id="header-banner" style="width:100%;height:300px;">
  <a href="http://www.w4u.org.uk/">
    <img src="http://www.w4u.org.uk/wp-content/uploads/2013/02/copy-home-banner.jpg" class="header-image" width="960" height="250" alt="">
  </a>
  <div class="fb-like"></div>
</div> 
```

完成后，通过将其添加到已经存在的内联样式中来调整类似按钮的 CSS：

```
top: -98px; 
```

这是进行更改后的图像：

![](../Images/fa8775c6d03be296e8a7ffca20c314b8.png)

# c - 在 C 中使用 Makefile

> ID：14658127
> 
> 赞同：0
> 
> 时间：2013-02-02T02:54:43.153
> 
> 标签：c, makefile

所以我有三个文件：

```
jarvismarch.c (includes "jarvismarchtools.h")
jarvismarchtools.c
jarvismarchtools.h 
```

我想用 a`makefile`来编译上述文件。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T02:57:17.603

典型的最小 makefile 如下所示：

```
OBJ = jarvismarch.o jarvismarchtools.o

all: $(OBJ)
        $(CC) -o jarvismarch $(OBJ) 
```

考虑到[asveikau](https://stackoverflow.com/users/182748/asveikau)的评论并添加一个干净的目标，它变成：

```
OBJ = jarvismarch.o jarvismarchtools.o
BIN = jarvismarch

CFLAGS = -Wall -pedantic -ansi

all: $(BIN)

$(BIN): $(OBJ)
    $(CC) -o @ $(OBJ)

clean:
    rm -f $(OBJ) $(BIN) 
```

（Windows用户需要使用`.obj`代替`.o`）

我强烈建议不要使用 make。一开始可能很简单，但是一旦您的项目发展壮大，我强烈建议您使用更完整的构建工具，例如[SCons](http://www.scons.org/)、[CMake](http://www.cmake.org/)或[Boost.Build](http://www.boost.org/boost-build2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T03:19:43.090

假设您正在尝试构建 jarvismarch.exe：

```
jarvismarch.exe : jarvismarch.o jarvismarchtools.o
    $(CC) -o $@ $^ 
```

第二行的前导空格必须是 TAB 字符。

# .net - EXE 压缩（用于 .NET 应用程序）算法以二进制代码显示带有真实人名的奇怪字符

> ID：14658131
> 
> 赞同：0
> 
> 时间：2013-02-02T02:54:55.747
> 
> 标签：.net, algorithm, compression, runtime, exe

打开刚刚编译的.net应用程序只是为了好玩，并在文件的二进制结构中找到了下一个：

![在此处输入图像描述](../Images/1fde9239eb4eeee414133b918c59511c.png)

我刚刚使用了我的 HTTP 解析器工具，我正在使用子字符串搜索算法进行训练，并在不同的地方找到了一些人类“Ivan Medvedev”的真实姓名。

它是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T04:13:10.683

他是一名安全专家，在谷歌工作，之前在微软工作。他的名字出现在他在 Codeproject 上发布的[这个项目](http://www.codeproject.com/Articles/5719/Simple-encrypting-and-decrypting-data-in-C)中用于初始化 PasswordDeriveBytes 的字节中：

```
 PasswordDeriveBytes pdb = new PasswordDeriveBytes(Password, 
        new byte[] {0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 
        0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76}); 
```

看起来很熟悉？这最终在程序的元数据表中逐字记录，当您查看可执行文件并位于文件的早期时，以纯文本形式显示。不好。他在文章中对此提出警告：

> 一些密码学特定的考虑因素也应该在那里。例如，PasswordDeriveBytes 中的盐值最好是随机的而不是硬编码的（有时可以硬编码，例如，当加密很少发生并且攻击者无法访问代码时）。如果盐是随机的并且经常更换，你甚至不必保密。此外，如果可能，请使用 byte[] 键而不是密码。由于人为因素，基于密码的加密并不是保护信息的最安全方式。为了从密码中获取 128 位的密钥信息，密码必须很长。如果您只使用每个字符大约 5 位信息的小写字母，那么您的密码必须超过 25 个字符才能达到 128 位。

嗯，你知道为什么。这是他的样子：

![在此处输入图像描述](../Images/4d128639267127d717378acd3811f151.png)

# mysql - 订购 MySql 查询使用

> ID：14658137
> 
> 赞同：1
> 
> 时间：2013-02-02T02:55:38.210
> 
> 标签：mysql

我，我想以一种特殊的方式对我的成员进行查询和排序......有人可以帮忙吗？这就是问题所在。我想使用特殊的排序顺序在我的表中选择成员。配置文件字段值存储在表 wp_bp_xprofile_data 中，如下所示：

```
 id   | field_id | user_id |     value
--------+----------+---------+---------- 
```

例如，我有 3 个字段

*   NICKNAME (field_id = 1)
*   FIRSTNAME (field_id = 2)
*   姓氏 (field_id = 3)

表格行将如下所示：

```
 id   | field_id | user_id |     value
--------+----------+---------+----------
  2544       1          100       fib
  2545       2          100       john
  2546       3          100       arenzich

  2547       1          200       dog
  2548       2          200       rick
  2549       3          200       zarenburg

  2550       1          300       fox
  2551       2          300       frank
  2552       3          300       arenzich 
```

我有这个查询使用一个字段对它们进行排序，例如按昵称按字母顺序对它们进行排序：

```
SELECT *
FROM wp_bp_xprofile_data u WHERE u.field_id = 1 ORDER BY u.value ASC 
```

所以它们将像这样排序：dog(200)，fib(100)，然后是 fox(300)。现在，我想对它们进行排序的不是一个，而是几个字段（名字和姓氏；以区分具有相同姓氏的人），以便查询按以下顺序返回用户：

frank arenzich (300), john arenzich (100), frank arenzich (200)。

有什么想法吗？

多谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:02:57.273

这可能需要首先将其按列旋转到适当的表中，然后在多个列上对其进行排序。注意：这*不会*产生与原始表格相同格式的输出，但可以说更加灵活和有用，因为它将有关每个表格的所有信息组合`user_id`到一行中。

```
/* A column-wise pivot of NICKNAME, FIRSTNAME, LASTNAME */
SELECT
  user_id,
  MAX(CASE WHEN field_id = 1 THEN value ELSE null END) AS NICKNAME,
  MAX(CASE WHEN field_id = 2 THEN value ELSE null END) AS FIRSTNAME,
  MAX(CASE WHEN field_id = 3 THEN value ELSE null END) AS LASTNAME
FROM wp_bp_xprofile_data
GROUP BY user_id
/* Include the HAVING if you only want those who have both first & last names specified */
HAVING 
  FIRSTNAME IS NOT NULL 
  AND LASTNAME IS NOT NULL
/* Pivoted columns can then be treated in the ORDER BY */
ORDER BY 
  FIRSTNAME,
  LASTNAME 
```

[这是一个演示...](http://sqlfiddle.com/#!2/ee4f8/4)

看起来这是一个 Wordpress 表格，因此您可能无法更改其结构。但是，如果您确实可以选择修改它，我建议您将结构更改为类似于枢轴的输出。

# .net - Html.EditorFor(...) 如何知道循环的索引和项？

> ID：14658139
> 
> 赞同：6
> 
> 时间：2013-02-02T02:56:03.433
> 
> 标签：.net, razor, asp.net-mvc-4

假设你有一个这样的模型：

```
class Foo
{
    public int A {get; set;}
    public int B {get; set;}
}

class SomeModel
{
    public List<Foo> Foos { get; set; }

} 
```

在 ASP.NET mvc 框架的 razor 视图中，您可以执行以下操作：

```
@model SomeModel

@for(int i = 0; i < Model.Foos.Count; ++i)
{
   Html.EditorFor(x => x.Foos[i]);
} 
```

Razor 引擎会愉快地吐出包含索引的正确 html，并使用正确的索引实例调用编辑器模板。

该`EditorFor`方法是带有签名的静态扩展方法

```
public static MvcHtmlString EditorFor<TModel, TValue>(
this HtmlHelper<TModel> html,
Expression<Func<TModel, TValue>> expression
) 
```

从签名中可以清楚地看出，它只是采用一个表达式，唯一的上下文来自 HtmlHelper 实例。

我做了非常有限的`Expression`树处理，但从我所见，我看不出这个静态方法可以知道它以某种方式神奇地获得的信息的任何方式。

该方法如何`EditorFor`找出生成 html 名称的索引并获取正确的实例以传递给编辑器模板？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T07:14:46.533

You are passing it an expression, not the value of `x.Foos[i]`. MVC then evaluates that expression and figures out that you gave it a collection with an index. You would get the same result if you removed your entire loop and did:

```
Html.EditorFor(x => x.Foos) 
```

MVC will then automatically render the editor template for all elements of the collection and generate proper names.

You can read more about how MVC handles display/editor templates here: [Link](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

**EDIT :** To see this in action, here's a random piece of code I scribbled:

```
List<string> list = new List<string>() { "A", "B", "C" };
var tester = new ExpressionTester<List<string>>(list);
var item = tester.Foo(p => p[0]); 
```

You'll also need this class:

```
public class ExpressionTester<TModel>
{
    private TModel _list;
    public ExpressionTester(TModel list)
    {
        _list = list;
    }

    public TValue Foo<TValue>(Expression<Func<TModel, TValue>> expression)
    {
        var func = expression.Compile();
        return func.Invoke(_list);
    }
} 
```

Stick a breakpoint in Foo() and look at the parameter `expression` in debug. You'll find under Body -> Arguments the index you passed with the expression. Under Body -> Method you'll see that it is in fact a generic list.

# ios - 综合目的

> ID：14658142
> 
> 赞同：28
> 
> 时间：2013-02-02T02:56:09.673
> 
> 标签：ios, objective-c

我正在使用一本 iOS5 书籍来学习 iOS 编程。

```
@synthesize coolWord; 
```

^synthesize 用于 .m 文件中的所有属性

我听说在 iOS6 中不需要合成，因为它会自动为你完成。这是真的？

合成对 iOS6 有什么作用吗？

感谢您的澄清。:)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-02T03:07:29.093

Objective-c 中的@synthesize 只是实现了属性设置器和获取器：

```
- (void)setCoolWord:(NSString *)coolWord {
     _coolWord = coolWord;
}

- (NSString *)coolWord {
    return _coolWord;
} 
```

Xcode 4 确实是为您实现的（iOS6 需要 Xcode 4）。从技术上讲，它实现`@synthesize coolWord = _coolWord`（`_coolWord`是实例变量并且`coolWord`是属性）。

要访问这些属性`self.coolWord`，请同时使用设置`self.coolWord = @"YEAH!";`和获取`NSLog(@"%@", self.coolWord);`

另请注意，setter 和 getter 仍然可以手动实现。如果您同时实现了 setter 和 getter，尽管您还需要手动包含`@synthesize coolWord = _coolWord;`（不知道为什么会这样）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-02T03:39:57.900

iOS6 中的自动合成仍然需要`@synthesize`

*   为 a 中定义的属性生成访问器方法`@protocol`。
*   当您包含自己的访问器时生成支持变量。

* * *

第二种情况可以这样验证：

```
#import <Foundation/Foundation.h>
@interface User : NSObject
@property (nonatomic, assign) NSInteger edad;
@end
@implementation User
@end 
```

键入：`clang -rewrite-objc main.m`并检查是否生成了变量。现在添加访问器：

```
@implementation User
-(void)setEdad:(NSInteger)nuevaEdad {}
-(NSInteger)edad { return 0;}
@end 
```

键入：`clang -rewrite-objc main.m`并检查该变量是否未生成。因此，为了使用访问器中的支持变量，您需要包含`@synthesize`.

它可能与[此](http://clang.llvm.org/docs/LanguageExtensions.html#objective-c-autosynthesis-of-properties)有关：

> Clang 提供对声明属性的自动合成的支持。使用此功能，clang 提供了那些未声明 @dynamic 并且没有用户提供支持 getter 和 setter 方法的属性的默认合成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-02T05:28:03.623

我不确定它`@synthesize`与 iOS6 有什么关系，但从 Xcode 4.0 开始，它基本上已被弃用。基本上，你不需要它！只需使用`@property`声明，在幕后，编译器会为您生成它。

这是一个例子：

```
@property (strong, nonatomic) NSString *name;

/*Code generated in background, doesn't actually appear in your application*/
@synthesize name = _name;

- (NSString*)name
{
    return _name;
}

- (void) setName:(NSString*)name
{
    _name = name;
} 
```

所有这些代码都由编译器为您处理。因此，如果您的应用程序具有`@synthesize`，是时候进行一些清理了。

[您可以在此处](https://stackoverflow.com/questions/14658737/using-synthesize-in-ios-application/14658879#14658879)查看我的类似问题，这可能有助于澄清。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T03:08:20.440

我相信`@synthesize`指令会自动插入最新的 Obj-C 编译器（iOS 6 附带的编译器）。

@synthesize pre-iOS 6 的重点是自动为实例变量创建 getter 和 setter，以便生成`[classInstance getCoolWord]`和`[classInstance setCoolWord:(NSString *)aCoolWord]`。因为它们是用 声明的`@property`，所以您还可以获得 getter 和 setter 的点语法的便利。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-02T10:58:08.253

```
hope this will help little more

yes previously we have to synthesis the property by using @synthesis now it done by IDE itself. 
```

但我们可以像这样使用它

// IDE 在内部做什么

```
@synthesis name=_name; 
```

我们使用 _name 来访问特定的属性，但现在您希望通过其他方式（例如 firstname）进行合成，您可以这样做

```
@synthesis name= firstname 
```

或者只是名字

```
@synthesis name=name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T03:07:08.267

在 iOS6 中使用自动合成，不再需要专门声明支持 ivars 或编写 @synthesize 语句。当编译器找到@property 语句时，它将使用我们刚刚查看的指南代表我们执行这两项操作。所以我们需要做的就是声明一个这样的属性：

```
@property (nonatomic, strong) NSString *abc; 
```

而在 iOS 6 中，@synthesize abc = _abc 将在编译时自动添加。

# ruby - Ruby Struct 实例找不到具有“？”的属性 以他们的名义

> ID：14658143
> 
> 赞同：2
> 
> 时间：2013-02-02T02:56:17.867
> 
> 标签：ruby

如果我使用包含问号的属性创建 Struct，则该类的任何实例都将无法找到该方法。例如

```
 Test = Struct.new(:value, :value?)
    t = Test.new(true,true)
    t.value
      => true
    t.value?
    NoMethodError: undefined method `value?' for #<struct Test value=true, :value?=true> 
```

任何想法 ？我正在使用 Ruby 1.9.3-p286。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:23:54.857

你不得不承认 Ruby 中的一些方法名称是特殊的。例如，如果您定义了方法

```
o = Object.new
def o.kokot= n
  return n + 1
end 
```

并打电话

```
o.kokot 1
#=> 1 
```

结果仍然是 1，而不是您可能期望的 2。这是`=`登录方法名称的特殊性。在您的结构的情况下，问号似乎也有这样的特殊性，这会阻止您通过调用来检索值：

```
t.value? 
```

你必须打电话

```
t[:value?] 
```

就是这样，祝你有美好的一天。

# java - Java：合并 2 个图像不起作用

> ID：14658144
> 
> 赞同：0
> 
> 时间：2013-02-02T02:56:53.500
> 
> 标签：java, image, image-processing, awt, java-2d

我正在尝试读取 2 个图像文件，然后将 image2 合并到 image1 之上，但下面的代码似乎不起作用。保存后，我只看到 image1 是原始的。两张图片都是PNG。

```
String url= uploadPath + filename;
BufferedImage im = ImageIO.read(url);
String url2= "image2.png";
BufferedImage im2 = ImageIO.read(url);
Graphics2D g = im.createGraphics();
g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.8f));
g.drawImage(im2, im.getWidth()/2, im.getHeight()/2, null);
g.dispose();
ImageIO.write(im, "png", new File( url )); 
```

我在这里错过了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T06:47:54.527

我没有问题让它工作。

![在此处输入图像描述](../Images/cbbcebf098eedaa26ae8abc708f168b3.png)

我确实找到了这条线...

```
g.drawImage(im2, im.getWidth()/2, im.getHeight()/2, null); 
```

有点担心。如果图像大小恰到好处，则可以在背景图像之外渲染图像。您应该使用相对于主图像的坐标...

```
public class MergeImages {

    public static void main(String[] args) {
        File inner = new File("Inner.png");
        File outter = new File("Outter.png");

        try {

            BufferedImage biInner = ImageIO.read(inner);
            BufferedImage biOutter = ImageIO.read(outter);

            System.out.println(biInner);
            System.out.println(biOutter);

            Graphics2D g = biOutter.createGraphics();
            g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.8f));
            int x = (biOutter.getWidth() - biInner.getWidth()) / 2;
            int y = (biOutter.getHeight() - biInner.getHeight()) / 2;
            System.out.println(x + "x" + y);
            g.drawImage(biInner, x, y, null);
            g.dispose();

            ImageIO.write(biOutter, "PNG", new File("Outter.png"));
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

我还会仔细检查 shuangwhywhy 的建议，即确保您不会两次读取同一个文件......我在测试代码时做了一些事情：P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T03:10:18.593

您的问题与以下`im2`内容完全相同`im`：

```
BufferedImage im = ImageIO.read(url);
BufferedImage im2 = ImageIO.read(url); 
```

我想这是一个错字：应该是`url2`而不是`url`被读作`im2`，对吗？

```
BufferedImage im2 = ImageIO.read(url2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:29:40.660

您也可以尝试透明度为 0.5 的 SRC_ATOP。

# exponential - 无法在 Gnumeric 中创建指数趋势线

> ID：14658152
> 
> 赞同：1
> 
> 时间：2013-02-02T02:59:36.590
> 
> 标签：exponential, trend, gnumeric

我有一个小数据集，我试图使其与 gnumeric 中的自然指数趋势线相匹配。

数据集是：

```
y1：1.948，x1：2.303
y2：1.197，x2：2.996
y3：0.367，x3：3.912
y4：0.109，x4：4.605
y5：-0.019，x5：5.298
y6：-0.072，x6：6.215

```

我想用以下形式的曲线拟合它：`y=a*e^(b*x)`

当我试图用数字指数来拟合它时，我无法让它创建任何趋势线。它不会显示任何东西。

我自己计算了 a 和 b 参数并将其绘制在另一个应用程序中，它看起来很合理，但由于某种原因，我无法让 gnumeric 自动生成它。

有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:08:02.207

我自己也遇到过这个问题，但我想我已经解决了。您必须确保数据系列中的每个单元格仅包含数据，而不包含任何标题或类似的无效数据。否则，您可以选择“跳过无效数据”，您的趋势线应出现在预览窗格中。至少，这对我有用。

# database-normalization - 将关系分解为 3NF？

> ID：14658153
> 
> 赞同：0
> 
> 时间：2013-02-02T02:59:37.567
> 
> 标签：database-normalization, functional-dependencies, 3nf

考虑具有集合函数依赖关系 F 的关系为： R(ABCDE)

```
F={ AB->CDEF , C->A, D->B, C->D, E->F, B->E } 
```

将 R 分解为 3NF 会是什么？

请帮我解释从给定 FD 导出范式的方法。

我尝试在谷歌搜索，阅读没有。PDF，但找不到从给定 FD 进入正常形式的一般过程。我知道推理规则，但不能应用它们。有人可以帮帮我吗。请解释（仅）上述场景的一般过程，我有答案，但我想了解该方法。任何链接/文档可能会有所帮助。

提前致谢。

PS：准备竞争性考试，还有一周的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:02:29.557

当我参加介绍性数据库课程时，我将限制我对帮助我理解规范化的资源的回答：

1.  [斯坦福数据库 MOOC](http://class2go.stanford.edu/db/Winter2013) - 观看“关系设计理论”讲座
2.  [维基百科](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms)- 这篇文章和 BCNF / 3NF 文章

# java - 理解：“无法对分离的对象执行删除操作”

> ID：14658158
> 
> 赞同：0
> 
> 时间：2013-02-02T03:00:03.280
> 
> 标签：java, jpa, entity, openjpa

以下实体在删除时抛出和错误：

实体：

```
@Entity
@NamedQueries({
})
public class Server {
   //some attributes
} 
```

我有以下非常简单的 JUnit 测试，它执行以下操作：

1.  实体服务器已创建

    ```
    @Transactional
    公共类 ServerDao {
    公共服务器更新（服务器实体，长用户 ID）{
        entity.setDeleted(false);
        如果（实体.getId（）> 0）{
            如果（用户 ID > 0）{
                entity.setUpdated(new Date());
                entity.setUpdatedby(usersDao.get(userId));
            }
            em.merge（实体）；
        } 别的 {
            如果（用户 ID > 0）{
                entity.setInserted(new Date());
                entity.setInsertedby(usersDao.get(userId));
            }
            em.persist（实体）；
        }
        返回实体；
        }
    }

    ```

2.  实体服务器已删除

    ...同道

    ```
    公共无效删除HardJUnit（服务器实体）{
        em.remove（实体）；
    }

    ```

    这将引发如下异常：

> org.apache.openjpa.persistence.ArgumentException：您无法对分离的对象“org.apache.openmeetings.persistence.beans.basic.Server-1”执行删除操作。

如果我将删除方法更改为：

```
public void deleteHardJUnit(Server entity) {
    if (entity.getId() > 0) {
        em.refresh(entity);
        em.remove(entity);
    }
} 
```

一切“似乎”都按预期工作，没有抛出异常并且记录从数据库中删除。

但是我不确定这应该是什么意思，我们真的需要在删除之前刷新每个实体吗？因为我之前已经多次使用 EntityManager.delete 而不需要刷新实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:52:46.753

假设您使用的是 Spring 的`@Transactional`注解，它不能拦截来自被注解对象实例内的调用（由于 Spring 使用动态代理进行 AOP 和方法拦截）。尝试从服务层调用并在那里注释方法。

如果您不使用 Spring，那么您可能想要使用`@TransactionAttribute`，这是类似的 Java EE 注释。

# socket.io - Socket.IO：服务器端清理的推荐模式是什么？

> ID：14658159
> 
> 赞同：1
> 
> 时间：2013-02-02T03:00:40.660
> 
> 标签：socket.io, gevent-socketio

在断开连接时清理是否足够？如果浏览器在发送显式断开连接之前消失会怎样？

服务器端清理的推荐模式是什么，以便绑定到连接的资源不会泄漏（例如命名空间）？

（使用 gevent-socketio，如果重要的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T11:56:41.160

如果您使用 WebSockets 作为传输，它会在浏览器关闭时自动断开套接字。例如，如果您使用 xhr-polling，它不会自动断开连接（谈到 gevent-socketio）。

我使用 xhr-polling 的方法是：

1.  在数据库中使用登录的用户 ID 保存套接字会话 ID
2.  在下次用户登录时检测是否存在这样的记录
3.  使用记录中存储的会话 ID 断开未使用的套接字，因为新用户登录会生成新的套接字

这不是快速的解决方案，因为在用户执行新登录之前，您可能连接了未使用的套接字，但它会在用户登录时执行一种清理。

这篇文章可能暗示了比我的解决方案更有创意的东西：http: [//flask.pocoo.org/snippets/71/](http://flask.pocoo.org/snippets/71/)

# javascript - 用函数赋值和回调理解这个 jQuery 代码

> ID：14658162
> 
> 赞同：3
> 
> 时间：2013-02-02T03:02:48.757
> 
> 标签：javascript, jquery

我正在尝试通过自定义加载器加载一些 JavaScript 文件。以前我`document.write()`用来写出我所有的文件，但我想使用 jQuery。我绝对不是 jQuery 专家，只使用了一些更基本的特性和功能，所以我上网。好吧，我找到了以下代码，它确实有效，但我在理解它时遇到了一些麻烦。这是代码：

```
(function() {
    // Poll for jQuery to come into existence
    var checkReady = function(callback) {
        if (window.jQuery) {
            callback(jQuery);
        }
        else {
            window.setTimeout(function() { checkReady(callback); }, 100);
        }
    };

    // Start polling...
    checkReady(function($) {
        // Use $ here...
    });
})(); 
```

我理解代码正在检查 jQuery 是否可用，如果不可用，它将每秒检查一次。我也理解如果它可用，“轮询”下的代码将执行。我不理解的，以及我很难理解的，是整个`callback`参数和`checkReady`变量。 `checkReady`既是变量又是函数？如果它是一个变量，它是顶部的一个函数，那么它如何在下部的代码中具有与之关联的不同函数？另外，回调参数实际上在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:06:56.377

在 Javascript 中，函数是*第一类的*，这意味着它们可以分配给变量，作为参数传递并像对待任何其他变量一样对待，例如 a`5`或`"foo"`。

您在这里看到`var checkReady = function(callback) { ... }`的是分配给变量的函数`checkReady`。

您在这里看到`checkReady(function($) { ... });`的是 checkReady以*[匿名函数](http://en.wikipedia.org/wiki/Anonymous_function)*作为参数调用*。*在函数内部，this 用参数引用。匿名函数只是意味着您在那里有一个没有名称的文字函数，就像您可以在不命名它的情况下调用字符串文字一样。您可以对函数做同样的事情。它们可以被命名或内联作为没有名称的文字事物。 `function($) { ... }``checkReady``callback``"foo"``alert("foo");``var str="foo"; alert(str);`

您在这里看到`window.setTimeout(function() { checkReady(callback); }, 100);`的是`window.setTimeout`使用匿名函数调用的`function() { ... }`，设置为在 100 毫秒内执行。在 100 毫秒内，它执行该函数，该函数包含一个递归调用，并使用它最初获得`checkReady`的相同`callback`参数。

那么在`callback`做什么呢？它旨在包含您确定 JQuery 已加载后想要执行的所有操作。基本上它是你程序的内容。*您将整个程序像任何其他变量一样传递*给另一个函数，该函数不时检查并在准备好时调用它。这就是[一流功能](http://en.wikipedia.org/wiki/First-class_function)的美妙之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T03:22:42.897

也许这张漂亮的照片会有所帮助

```
 +-----------                      +------------+
 |          |                      |            |
 |       ...v.................     V            |
 |  +- - checkReady = function(callback) - -+   |
 |  :                              |        :   |
 |  :   callback() <-execute this--+        :   |
 |  :                anon func              :   |
 |  :                                       :   |
 |  +- - - - - - - - - - - - - - - - - - - -+   |
 |  :                                       :   |
 |  :                  +----------------------->+
 |  :                  |                    :   |
 |  :                  ^                    :   |
 +<---- checkReady(callback);               :   |
 |  :   call itself, sending the same       :   |
 |  :   anonymous callback function         :   |
 |  :                                       :   |
 |  +- - - - - - - - - - - - - - - - - - - -+   |
 |                                              |
 +-calls+                                       |
        |                                       |
        ^                                       |
    checkReady(function($) {                    |
        // this anon func goes here  >----------+
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T03:12:45.353

编码

```
var name = function (params...) { ... statements ... }; 
```

创建一个未命名（匿名）函数并将对它的引用放入“name”变量中。重要的是此代码不会创建“名称”功能。“名称”仅存储对该函数的引用。可以将此引用复制到另一个变量，然后可以通过这个另一个变量调用函数，如下所示：

```
var newName = name;
newName(); // invokes the function 
```

如果您想了解更多关于 JavaScript 函数的信息，我认为您可能会觉得这很有趣：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions)

# html - 如何使弹出窗口的位置成为绝对位置，以便与页面元素一起移动

> ID：14658164
> 
> 赞同：0
> 
> 时间：2013-02-02T03:03:11.563
> 
> 标签：html, css, popup

我正在开发 WP，我添加了一个名为“WordPress PopUp”的插件，以便在有人登陆我的网站时显示一个选项表单。

我需要出现在某个框下的固定位置。我已经成功地做到了这一点。问题是主题是响应式的，因此元素的位置会根据浏览器的窗口大小进行调整。

我如何才能与其他元素一起移动？

以下是 HTML 的外观：

```
<div id='<?php echo $popover_messagebox; ?>' class='visiblebox' style='position: fixed; <?php echo $style; ?>'>
    <a href='' id='closebox' title='Close this box'></a>
    <div id='message' style='<?php echo $box; ?>'>
        <?php echo do_shortcode($popover_content); ?>
        <div class='clear'></div>
        <?php if($popover_hideforever != 'yes') {
            ?>
            <div class='claimbutton hide'><a href='#' id='clearforever'><?php _e('Never see this message again.','popover'); ?></a></div>
            <?php
        }
        ?>
    </div>
    <div class='clear'></div>
</div> 
```

这是CSS：

```
div#messagebox {
position: fixed;
background: none;
z-index: 999;
padding: 10px;
left: 945px;
top: 152px;
z-index: 999999;
margin: 0px;
visibility: visible;
}

div#messagebox div.claimbutton {
position: absolute;
bottom: -15px  !important;
right: 10px  !important;
width: 295px  !important;
background-color: white  !important
text-align: right;
padding-top: 5px;
padding-bottom: 5px;
}

div#messagebox div.claimbutton a:visited, div#messagebox div.claimbutton a {
font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;
color: #FFF;
text-shadow: rgba(0, 0, 0, 0.5) 0 1px !important;
font-weight: bold;
padding-right: 5px;
}

#message p {
position: relative;
clear: both;
}

#messagebox #closebox {
position: absolute;
width: 30px;
height: 29px;
background: transparent url(%styleurl%images/closemessagebland.png) no-repeat;
top: -5px;
left: -5px;
z-index: 5;
}

div#message {
position: relative;
background: #fff;
font: 0.9em "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;
min-height: 90%;
overflow: hidden;
border: 1px solid #ccc;
}

#messagebox. #closebox {
top: 0 !important;
left: 0 !important;
} 
```

这是我网站的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:36:46.583

从右边而不是从左边定位元素

代替

```
left: 945px; 
```

和

```
right: 95px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:26:57.570

尝试根据百分比而不是像素值定位元素。例如。

代替：

```
left: 945px; 
```

和：

```
left: 50%; 
```

# python - Flask：如何在会话到期时进行服务器端清理？

> ID：14658173
> 
> 赞同：3
> 
> 时间：2013-02-02T03:05:00.700
> 
> 标签：python, session, flask

在会话期间，我有一些对象分配和维护服务器端。如何确保在会话过期后清理这些内容？

Flask 或某些 Flask 扩展是否支持此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:35:41.780

在我看来，您正在实例化对象，而不是将它们保存在任何地方，只是将它们保存在内存中。

如果这是真的，那么垃圾收集器将自动将它们带走：只需清除对它们的所有引用，如果你愿意，“忘记它们”。如果您自己无法访问它们，它们将被清理。

如果您想明确说明，请使用调度程序（可能是[http://docs.python.org/2/library/sched.html](http://docs.python.org/2/library/sched.html)）并在会话到期时创建一个定时任务。运行任务时，验证会话确实不再需要，并销毁您的对象。

# java - 我在状态条码中有一条通知，但 AIDE 将两件事标记为错误

> ID：14658174
> 
> 赞同：0
> 
> 时间：2013-02-02T03:05:58.800
> 
> 标签：java, android, notifications

`MainActivity.java`我需要制作一个状态栏通知，并且我从研究中获得了此代码，但是当我将代码放入AIDE时，它似乎并没有奏效

```
NotificationManager
mNotificationManager = (NotificationManager)
getSytemService(Context.N);
Notification notification = new notification(R.drawble.ic_launcher,
"Notification Test", System.currentT;
Context context = getApplicationContext();
CharSequence contentTitle = "My notification Title";
CharSequence contentText ="This is the message";
Intent notificationIntent = new Intent(this, MainActivity.class); 
```

错误似乎`Line 3`与出现错误消息的`(Context.N)`位置有关： 。另一条错误消息在第五行，它读取的错误消息为.`N``Unknown member 'N' of 'android.content.Context'``System.currentT``Unknown member 'currentT' of 'java.lang.Sytem'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:10:01.597

`Context.N`应该是[`Context.NOTIFICATION_SERVICE`](http://developer.android.com/reference/android/content/Context.html#NOTIFICATION_SERVICE)。

`System.currentT`应该是[`System.currentTimeMillis()`](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis%28%29)。

似乎您正在从某个地方复制代码，但代码被截断了？

* * *

这是生成通知的示例方法。

^(*这是基于 Android 的文档：[Building a Notification](http://developer.android.com/training/notify-user/build-notification.html)。有关更多详细信息（例如如何显示进度条或扩展视图），请阅读文档。*)

```
private static void generateNotification(Context context, String messageTitle, String messageText)
{
    // Get notification manager.
    final NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

    // Setup notification builder.
    final NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(context)
        .setSmallIcon(R.drawable.ic_notification)
        .setContentTitle(messageTitle)
        .setContentText(messageText)
        .setAutoCancel(true)
        .setDefaults(Notification.DEFAULT_ALL);

    // Create intent.
    final Intent resultIntent = new Intent(context, MainActivity.class);

    // Setup task stack builder.
    final TaskStackBuilder taskStackBuilder = TaskStackBuilder.create(context);
    taskStackBuilder.addParentStack(MainActivity.class);
    taskStackBuilder.addNextIntent(resultIntent);

    // Create pending intent.
    final PendingIntent resultPendingIntent = taskStackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

    // Update notification builder.
    notificationBuilder.setContentIntent(resultPendingIntent);

    // Post notification.
    notificationManager.notify(0, notificationBuilder.build());
} 
```

该类[`NotificationCompat.Builder`](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)需要 Android 的第 4 版[支持库](http://developer.android.com/training/basics/fragments/support-lib.html)。

# c - 访问 C 中的结构会导致分段错误

> ID：14658175
> 
> 赞同：-1
> 
> 时间：2013-02-02T03:06:04.617
> 
> 标签：c, struct, segmentation-fault

任何理由 C 中的这行代码会给我一个分段错误？因为它是，状态是一个结构。

```
dec_to_bin( state.mem[ state.program_counter ], mc_binary ); 
```

我试过做预先分配，比如

```
int program_counter_temp = state.program_counter;
dec_to_bin( state.mem[ program_counter_temp ], mc_binary ); 
```

但它也不起作用。当我有这些任务时，我什至不输入 main 。

这是状态结构

```
typedef struct stateStruct {
int pc;
int mem[NUMMEMORY];
int reg[NUMREGS];
int numMemory;
} stateType; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:37:19.163

最有可能的是，从我可以看到的代码片段中，您`state.program_counter`超出了数组的大小`state.mem`。确保它不是意外负数或大于或等于`NUMMEMORY`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:30:02.747

与其将您的状态机分配为堆栈变量，不如将其分配给`malloc()`它*然后*使用？

像这样：

stateType state = malloc(sizeof(stateType));

# javascript - Jquery 滚动事件导致性能问题

> ID：14658178
> 
> 赞同：3
> 
> 时间：2013-02-02T03:06:35.663
> 
> 标签：javascript, jquery, performance, scroll

我正在尝试使用浏览器滚动事件根据用户滚动的数量放置一个 html 块。该代码有效，但它导致了一个巨大的性能问题，这基本上迫使我的浏览器冻结。

任何关于为什么以及我可以做些什么来解决这个问题的见解将不胜感激。

```
<script type="text/javascript">

$('#content').scroll(function () {
    var scroll = $('#content').scrollTop();
    var $controls = $(".controls").clone();
    if (scroll > 200) {
        $(".controls").remove();
        $('#header').append($controls);
    }
    else {
        $(".controls").remove();
        $('.banner').append($controls);
    }
});

</script> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T03:31:55.477

首先，在 DOM 中发现元素是一项昂贵的活动，因此请缓存您的 jQuery 对象。

其次，移动`.append()`元素应该是不必要的。`.clone()``remove()`

这给出了：

```
var $$ = {//cache of jQuery objects
    content: $('#content'),
    controls: $(".controls"),
    header: $("#header"),
    banner: $('.banner')
};
$('#content').scroll(function() {
    $controls.appendTo(($$.content.scrollTop() > 200) ? $$.header : $$.banner);
}); 
```

现在，您可以减少调用处理程序的频率，可以通过以下方式实现：

```
var $$ = {//cache of jQuery objects
    content: $('#content'),
    controls: $(".controls"),
    header: $("#header"),
    banner: $('.banner')
};

var scrollHandling = {
    allow: true,
    reallow: function() {
        scrollHandling.allow = true;
    },
    delay: 50 //(milliseconds) adjust to the highest acceptable value
};

$('#content').scroll(function() {
    if(scrollHandling.allow) {
        $controls.appendTo(($$.content.scrollTop() > 200) ? $$.header : $$.banner);
        scrollHandling.allow = false;
        setTimeout(scrollHandling.reallow, scrollHandling.delay);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T03:23:50.120

滚动条的每次移动都会调用该`scroll`函数。这可能是很多次，所以你需要小心你运行了多少代码，当然还有你正在对 DOM 进行多少操作。

在这种情况下，当滚动发生时，您将重复许多相同的操作（`clone`、`append`、 ），但是当您在 200值`remove`上来回交叉时，您似乎只想在两个状态之间翻转。`scroll`您可以通过以下方式解决大多数性能问题：

```
<script type="text/javascript">

var thresholdCrossed = false;

$('#content').scroll(function () {
    var scroll = $('#content').scrollTop();
    var threshold = 200;
    if (scroll > threshold && !thresholdCrossed) {
        var controls = $(".controls").clone();
        $(".controls").remove();
        $('#header').append(controls);
    } else if (scroll <= threshold && thresholdCrossed) {
        var controls = $(".controls").clone();
        $(".controls").remove();
        $('.banner').append(controls);
    }
    thresholdCrossed = scroll > threshold;
});

</script> 
```

您可以做一些其他答案描述的额外工作，以帮助减少资源浪费，但这应该让您大致了解如何在滚动时不断修改 DOM 的主要性能问题。我可能会建议将此与@Kolink 提供的答案结合起来，以便您真正将 DOM 操作限制在必要的最少数量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T03:09:35.027

每次滚动时，您都在克隆所有`.controls`元素，即使在不需要时也是如此。

我建议克隆控件`ready`并将其设置为`display:none`. 然后，只需根据滚动位置切换显示。

* * *

在重新阅读您的问题时，您似乎只是将控件元素从 移动`header`到`banner`? 在这种情况下，您甚至不需要克隆。但是，我强烈建议添加`id="controls"`到控件元素中，并且`id="banner"`- 如果只有一个，则通常使用 ID 而不是类。

```
document.getElementById('content').onscroll = function() {
    document.getElementById(this.scrollTop > 200 ? "banner" : "header")
       .appendChild(document.getElementById('controls'));
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T03:11:51.110

每次滚动条移动时，jQuery 都必须进入 DOM 以获取您引用的变量。开始缓存变量，这样 jQuery 就不必做两次工作了。

```
 var content = $('#content');

          content.scroll(function(){

          }); 
```

# c++ - 使用最少资源绘制和更新图形的最快方法是什么？

> ID：14658180
> 
> 赞同：1
> 
> 时间：2013-02-02T03:06:48.717
> 
> 标签：c++, performance, graphics

我想学习开始绘制图形，但我对应该从哪里开始感到困惑。我知道我可以开始学习 OpenGL 或 DirectX，但我想知道还有哪些其他选项可用于绘制图形，以及它们在 OpenGL 性能方面的扩展程度。将像素直接绘制到屏幕上的 C++ 命令让我质疑图形渲染过程是如何完成的，如果仅使用这些 C++ 命令对于小事情（如绘制自定义窗口）可能会更好的性能。

我真的不确定从哪里开始，因此任何流行的图形渲染软件/技术之间的客观比较都会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:22:20.313

一般来说，有几种方法可以在屏幕上或图像中绘制内容。

*   **硬件渲染**(OpenGL)
    要开始学习 OpenGL，您应该阅读教程[“学习现代 3D 图形编程”](https://web.archive.org/web/20150309070928/http://www.arcsynthesis.org/gltut/)。教程*很好*；它解释了所有必要的数学，从简单的例子开始，关心性能。而且它非常现代（如果你用谷歌搜索“OpenGL 教程”，你会发现很多使用古老的“固定管道方法”的旧教程）。

*   **软件渲染**
    我个人建议使用[Qt 框架](http://qt-project.org)来完成这项任务。（当然，还有其他库可以做到这一点。）创建一个新的 QImage 或 QPixmap 对象和一个 QPainter。然后，您可以使用 QPainter 命令在图像上进行绘制。然后，您可以将图像保存到文件或在屏幕上显示。[您还可以在自定义绘制事件](http://doc.qt.digia.com/qt/qwidget.html#paintEvent)中使用 QPainter 直接在屏幕上呈现。

*   **自定义每像素绘图**
    使用此方法学习计算机图形学的“低级”内容。如果库提供的唯一操作是“将像素 x,y 设置为颜色 r,g,b”，请了解如何在屏幕上绘制线条。这也可以使用 Qt 的[QImage::setPixel](http://qt-project.org/doc/qt-4.8/qimage.html#setPixel-2)来完成。

# ruby-on-rails - Rails 的类变量替代方案？

> ID：14658184
> 
> 赞同：0
> 
> 时间：2013-02-02T03:07:39.393
> 
> 标签：ruby-on-rails

我们需要找到一个在 Rails 页面加载时存储页面指标的好地方。它将包括统计数据，最初使用某些慢速方法的次数。目前我们在 ApplicationController 上使用了一个类变量，但这看起来像是代码异味。有一个更好的方法吗？

```
class ApplicationController < ActionController::Base
  cattr_accessor :page_stats

  def increment_slow_stuff()
    @@page_stats ||= {}
    @@page_stats[:slow_stuff] ||= 0
    @@page_stats[:slow_stuff]  += 1
  end

  def slow_method()
    increment_slow_stuff()
    ...
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:09:44.277

这种方法的问题在于，只要班级存在，统计数据就会存在。我建议写入数据库甚至 Redis。

[您还可以使用此 Railscast](http://railscasts.com/episodes/249-notifications-in-rails-3)中显示的技术订阅这些事件，以便代码不在您的控制器中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T03:11:25.323

为什么不使用实例变量？如果您以后需要将其存储更长时间，您可以随时在页面浏览的末尾保存一条记录。此外，PageStats 模型可以让您对指标进行更高级的分析。

# javascript - knockout.js observableArray 未被识别为函数

> ID：14658185
> 
> 赞同：1
> 
> 时间：2013-02-02T03:07:54.710
> 
> 标签：javascript, ajax, knockout.js

使用knockout.js 有一段时间了，之前没有遇到过这个问题。通常，当我尝试将新的 js 对象推送到 observableArray 时，它可以正常工作，但由于某种原因，这一次我收到了这个错误：

```
TypeError: self.Students.push is not a function 
```

这是我的代码片段：

```
window.ApiClient = {
    ServiceUrl: "/api/students",

    Start: function () {
        var viewModel = ApiClient.ViewModel(ngon.ClientViewModel);
        ko.applyBindings(viewModel);                
        viewModel.get();
    }    
};

ApiClient.ViewModel = function(data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);    

    this.get = function (id) {
        if (id == undefined) {
            return ApiClient.Service.get(self.PageSize(), self.PageNumber(), function (data) {
                self.Students(data);
            });
        }
    }

    this.post = function () {        
        return ApiClient.Service.post(self.DetailedStudent, function (data) {                        
            self.Students.push(data);
        });
    }

    return this;
}

ApiClient.Service = function () {    
    var _get = function (pageSize, pageNumber, callback) {
        sv.shouldShowLoading = false;
        var queryParams = String.format("?pageSize={0}&pageNumber={1}", pageSize, pageNumber);        
        $.ajax(ApiClient.ServiceUrl + queryParams, {
            dataType: "json",
            type: "get",
            success: callback
        });
    }

    var _post = function (student, callback) {
        $.ajax(ApiClient.ServiceUrl, {
            data: ko.mapping.toJSON(student),
            type: "post",
            contentType: "application/json; charset-utf-8",
            statusCode: {
                201 /*Created*/: callback,
                400 /*BadRequest*/: function (jqxhr) {
                    var validationResult = $.parseJSON(jqxhr.responseText);
                    alert(jqxhr.responseText);
                }
            }
        });
    }

    return {        
        get: _get, 
        post: _post
    };
}();

$(document).ready(function () {    
    ApiClient.Start();      
}); 
```

我的学生对象是一个非常简单的 C# 对象，它具有 Id、FirstName、LastName。get() 函数没有任何问题，只是 post() 的回调函数无法推送结果数据。此外，从服务器返回的数据看起来是正确的：

```
{"Id":"rea","FirstName":"asdf","MiddleName":null,"LastName":"rrr"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:16:21.477

我解决了这个！这是因为初始 viewModel 在被页面的视图模型对象实例化时，其 Student 属性为“null”。

knockout.js 要求所有要自动映射的字段的非空值。

# mysql - Mysql Enum 列类型选择所有值

> ID：14658187
> 
> 赞同：0
> 
> 时间：2013-02-02T03:08:27.723
> 
> 标签：mysql

我有 Enum 列，其中有 2 个值。是和否，`Col('Yes','No')`

现在我有一个功能，在其中我使用了这个列并提取了带有 yes 和 no 值的行，

现在当我做类似的事情时`col = ('Yes' OR 'No')`

我没有得到任何记录，如何从中提取具有枚举列所有值的所有行。我需要同时具有 yes 和 no 值的行。

此列是我的大型查询之一的一部分，因此将列从 enum 重构为 varchar 确实可以解决问题吗？但我很想知道如何为枚举选择所有值？我尝试了很多方法，但我总是无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:12:01.937

使用`IN`.

```
SELECT blah blah blah FROM blah WHERE col IN ('Yes','No') 
```

# c# - COM 互操作和 System.InvalidCastException 异常

> ID：14658199
> 
> 赞同：1
> 
> 时间：2013-02-02T03:11:35.743
> 
> 标签：c#, c++, com, interop

我是用 C# 编写 COM 对象的新手。我遇到了一个需要帮助的问题。

我有一个用 C++ 编写的 COM 接口，称为 ITest。我使用 tlbimp.exe 为该接口存在的 DLL 创建了一个互操作，并将其注册到我的测试系统上。我编写了一个使用这个 ITest 接口的 C# 测试应用程序，它运行良好。

我还在用 C# 编写另一个 COM 接口。这个接口有一个方法，它接受一个 ITest 类型的参数。我有一个需要使用此托管 COM 对象并调用此方法的 C++ 程序。当我运行我的 C++ 程序时，我看到以下 System.InvalidCastException 异常：

```
无效转换异常：
0:000> !pe
异常对象：03281b3c
异常类型：System.InvalidCastException
消息：无法将“System.__ComObject”类型的 COM 对象转换为接口类型“.ITest”。此操作失败，因为 IID 为“<Some GUID>”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)）。
内部异常：<无>
StackTrace（生成）：<无>
堆栈跟踪字符串：<无>
H结果：80004002

```

C# COM 接口的方法定义：

```
public void MyMethod(ITest pTest); 
```

使用此 COM 接口的 C++ 代码：

```
ITest * pTest = NULL;
…
pTest 被分配了一个有效的指针
…
hr = MyMethod(pTest);

```

有人可以指出我正确的方向并帮助我调试这个问题吗？

# entity-framework - 用于类生成的 EF5 数据库第一个模型模板 (tt)

> ID：14658206
> 
> 赞同：0
> 
> 时间：2013-02-02T03:13:00.420
> 
> 标签：entity-framework, domain-driven-design, entity-framework-5, n-layer

我想让我从现有数据库中创建的所有实体都继承自同一个接口。

我想这可以通过模板来完成。而且我看过那个丑陋的`.tt`文件，但没有帮助（或者我没有找到它）。

有模板的任何文档、示例……吗？

有任何常见范例的提示或预制模板，例如 N 层设计或领域驱动设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T22:18:35.073

寻找“T4 模板”。这将为您介绍 T4 模板（`.tt`文件）。通过一些搜索，您可以轻松地将此模板扩展到您的需要。我自己已经这样做了，但是使用了 EF4 的模板。我不知道模板是否不同。

我为此做了一些辅助功能：

```
string Interfaces(EntityType entity)
{
    string interfaces = string.Empty;

    if (entity.Members.OfType<EdmProperty>().Any(edmProperty => edmProperty.Name == "Guid" && ((PrimitiveType)edmProperty.TypeUsage.EdmType).PrimitiveTypeKind == PrimitiveTypeKind.Guid))
    {
        interfaces += ", IHasWritableGuid";
    }

    return interfaces;
} 
```

模板编写实际实体类的部分（这在新模板中肯定有所不同）`Write EntityType classes.`在 EF4 模板中的“”下方。

```
<#=Accessibility.ForType(entity)#>
<#=code.SpaceAfter(code.AbstractOption(entity))#>
partial class
<#=code.Escape(entity)#> :
<#=BaseTypeName(entity, code)#>
<#= Interfaces(entity) #> 
```

在这里，我只是添加了对我的接口方法的调用。

我知道这不是确切的答案，但它应该可以帮助您自己编辑模板文件。只是咬住自己。:)

# outlook - 带有 Exchange Online 的 Outlook 2010

> ID：14658211
> 
> 赞同：0
> 
> 时间：2013-02-02T03:14:06.863
> 
> 标签：outlook, exchange-server, office365

Outlook2010/2013 是否与 IMAP 或 Pop3 以外的任何接口进行交互？如果有怎么办？虽然 imap 的手动配置有效，但自动发现向导却一无所获。我的 1and1.com 上的 cname 指向 www.mydomain.us。Outlook.com 的手动设置或服务器的兼容提示。那应该与为 imap 指定的服务器相同吗？
我希望 PC 和笔记本电脑上的 Outlook 客户端设置与 PC/笔记本电脑在 LAN 上时一样无缝。可以使用 Outlook Anywhere（通过 https/rpc）吗？如果是这样，如何获得代理服务器名称和设置？

完成所有设置后，最终用户在日历共享和联系人方面的体验是否会模仿 Outlook 和 Exchange 2010 的体验？

谢谢你的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:23:06.183

我不知道 1and1.com 提供什么，但是您只能将 OutlookAnywhere (RPC-over-HTTP) 与 Exchange 2003-2013 一起使用。

Outlook 2003-2013 可以使用 IMAP、POP、Exchange MAPI (RPC)。使用附加组件，您可能能够支持其他协议，但我从未使用过任何协议。

要使自动发现工作，您通常需要 Exchange，尽管有一些方法可以在没有 Exchange 的情况下生成自动发现 XML。Outlook 2010-13（我也认为是 2007）可以尝试根据您的电子邮件地址猜测 IMAP/POP 设置的设置，但服务器必须使用非常标准的主机名和端口才能正确猜测。

IMAP 和 POP 仅支持电子邮件消息类型，并且不会在服务器和 Outlook 客户端之间同步联系人和日历，无论如何本机都不会。

# html - 如何在没有附加 html 标签的情况下设置单个字母的样式

> ID：14658218
> 
> 赞同：2
> 
> 时间：2013-02-02T03:16:05.193
> 
> 标签：html, css

有没有办法在不使用其他标签的情况下设置“u”的样式？

就像是

```
h1:first-letter{ font-size:200%; color:#8A2BE2} 
```

“u”我想在这里添加不透明度：

```
<div class="moto"><h1>it's all<br>abboutt<br>design</h1></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:57:24.207

不。或者，从技术上讲，*标签*不是必需的，但字符需要成为*元素*的唯一内容。您可以使用 JavaScript 执行此操作，在某些内容中搜索第一次出现的字符，然后操作 DOM 树。不过，使用标签最容易做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T03:24:38.433

如果有`nth-letter`选择器，你可以，但没有。然而，你并不是第一个拥有这些印刷梦想的人。尝试[http://letteringjs.com/](http://letteringjs.com/)它将为您自动执行此类操作。

# scala - Scala：继承特征中的匿名类型

> ID：14658223
> 
> 赞同：2
> 
> 时间：2013-02-02T03:16:30.297
> 
> 标签：scala, types, traits

在 Scala 中，假设类 A 和 B 有一个公共方法，但没有继承任何公共接口：

```
class A {
  def foo() {
    println("A.foo")
  }
}

class B {
  def foo() {
    println("B.foo")
  }
} 
```

我想要做的是定义一个扩展任何具有`foo()`方法的类的特征。我试过这个：

```
type Fooable = {
  def foo()
}

trait Q extends Fooable {
  override def foo() {
    println("before super.foo")
    super.foo()
    println("after super.foo")
  }
}

(new A with Q).foo()
(new B with Q).foo() 
```

但是，Scala 编译器拒绝此代码并出现错误：

```
error: class type required but AnyRef{def foo(): Unit} found trait Q extends Fooable { 
```

最好的解决方案是制作一个包含常用方法的接口，并修改类 A 和 B 以继承该接口。不幸的是，我们无法修改这些类。这在 Java 库中很常见，例如：

*   `java.sql.Connection.close()`和`java.io.Closeable.close()`
*   `android.app.Activity.onDestroy()`和`android.app.Service.onDestroy()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T03:50:51.893

你不能这样做。这是它的根本问题，引用你的话：

> 定义一个扩展任何类的特征

Scala 要求*类*层次结构是一棵树，这意味着其中的任何元素都只有一个父类。它可以有许多父特征和许多*祖先*类，但您所要求的严格违反 Scala 要求的层次结构。

现在，您在这里混合了两个概念：名义类型，其中某事物的类型由其类或特征定义，以及*结构类型*，其中某事物的类型由其实现的方法定义。

然而，名义类型和结构类型是相当不兼容的。事实上，在 Scala 之前，人们普遍认为两者不能共存，事实上，Scala 的结构类型非常有限。你可以这样做：

```
scala> def f(m: { def foo(): Unit }) = {
     |     println("before foo")
     |     m.foo()
     |     println("after foo")
     | }
f: (m: AnyRef{def foo(): Unit})Unit

scala> f(new A)
before foo
A.foo
after foo 
```

或者您可以将结构类型与自身类型结合起来，如下所示：

```
scala> trait Q { self: { def foo(): Unit } =>
     |   def bar() {
     |     println("before foo")
     |     foo()
     |     println("after foo")
     |   }
     | }
defined trait Q

scala> (new A with Q).bar()
before foo
A.foo
after foo

scala> (new B with Q).bar()
before foo
B.foo
after foo 
```

但是您不能从结构类型*继承*，因为继承是名义类型所独有的特征。而且，因为您不能继承结构类型，所以不能覆盖它，或者在祖先上调用它，这意味着`trait Q`不能在`foo()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:33:30.230

**自我回答：**

在我知道我的问题没有确切的解决方案之后，我采取了另一种方法来克服这个问题。这不是一个完美的解决方案，但在某些情况下可能是一个合理的解决方法（在我的情况下:-)。

```
trait Fooable {
  def beforeFoo() {}
  def afterFoo() {}
}
trait Alice extends A with Fooable {
  override def foo() {
    beforeFoo()
    super.foo()
    afterFoo()
  }
}
trait Bob extends B with Fooable {
  override def foo() {
    beforeFoo()
    super.foo()
    afterFoo()
  }
}
trait Quest extends Fooable {
  override def beforeFoo() {
    println("before super.foo")
    super.beforeFoo()
  }

  override def afterFoo() {
    println("after super.foo")
    super.afterFoo()
  }
}

(new Alice with Quest).foo()
(new Bob with Quest).foo() 
```

是的，我们应该使用 Alice 和 Bob，而不是 A 和 B。但是，在我的情况下，它可能会受到影响。

# recursion - 在函数定义中引用函数名

> ID：14658228
> 
> 赞同：2
> 
> 时间：2013-02-02T03:17:16.667
> 
> 标签：recursion, vbscript, rvalue-reference

鉴于以下情况：

```
wscript.echo "fx(0)=" & fx(0)

Function fx( v1 )
   fx = 1 + 2
   Wscript.echo "fx=" & fx
End Function 
```

两条 "echo" 行都打印 value `3`。为什么函数内部的那个不会导致语法错误或递归循环？与以下示例相同的问题：

```
wscript.echo "fy()=" & fy()
wscript.echo "fy=" & fy

Function fy
   fy = 1 + 2
   Wscript.echo "fy=" & fy
End Function 
```

所有回声线打印`3`。

当函数定义将其名称作为 RVALUE 引用时，我找不到描述该行为的文档。

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:33:08.820

在 VBScript 函数内部，函数的名称是一个局部范围的变量，旨在等效于函数的返回值。它与任何其他的没有什么不同`Dim var = ...`。要将其视为一个函数，您需要使用调用语义。

基本上，您似乎已经习惯了具有一流功能的语言。VBScript 没有它们，所以没有歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:47:24.283

除了 Plynx，VBScript 也有些模棱两可。这就是为什么你可以使用`wscript.echo fy`以及`wscript.echo fy()`用于没有参数的函数。

但是，这在使用函数名作为变量的函数内部不起作用。如果你这样做：

```
Function fy
   fy = 1 + 2
   Wscript.echo "fy=" & fy()
End Function 
```

你会得到一个`Out of stack space: 'fy'`错误。将函数名用作函数实际上很有用，因为您现在可以在构建递归函数时将函数名用作变量或函数调用。

为了可读性，我建议在函数调用中使用括号。这将使您或您的同事更轻松地进行审查或调试。

# ruby - Ruby 中的自修改代码

> ID：14658230
> 
> 赞同：1
> 
> 时间：2013-02-02T03:17:31.350
> 
> 标签：ruby, closures, block, self-modifying

我担心在 Ruby 中编写自修改代码。通过自我修改，我的意思是能够编写将代码块作为输入值的函数，并基于此输出另一个代码块。（我不是在询问诸如在运行时重新定义方法之类的基础知识。）

我可能想要做的是，例如，有以下块，

```
_x_ = lambda { |a, b, c, d| b + c } 
```

可以注意到参数`a`并且`d`根本没有在正文中使用，所以我想要一个函数，例如。`#strip`删除它们，

```
x = _x_.strip 
```

这应该产生与写作相同的结果：

```
x = lambda { |b, c| b + c } 
```

现在在 Lisp 中，这很容易，因为 Lisp 代码是很容易操作的数据。但我不知道如何操作 Ruby 代码。我可以解析它，例如。经过

```
RubyVM::InstructionSequence.disassemble( x ) 
```

但是，基于此，我如何编写修改后的块？我想做的其他例子是例如。

```
y = lambda { A + B }
y.deconstantize
# should give block same as saying
lambda { |_A, _B| _A + _B } 
```

到目前为止，在 Ruby 中，我从未遇到过不得不承认某事是不可能的情况。但这一次，直觉告诉我，我可能遇到了结构优美的代码与几乎没有语法可言的代码（这将是 Lisp）的根本弱点。请赐教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:25:21.580

检测是否使用了块变量是一项复杂的任务，您似乎在说您可以通过使用`RubyVM`. 所以问题似乎是在问如何改变代码的数量。

如果你有：

```
_x_ = ->a, b, c, d{b + c} 
```

并假设您能够使用`RubyVM`并且知道`a`并且`d`没有使用，所以您想要创建

```
x = ->b, c{b + c} 
```

出`_x_`。那么，这很简单：

```
x = ->b, c{_x_.call(nil, b, c, nil)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:07:43.607

Boris 你一定要从这里开始依赖 Ruby 吗？

为什么不创建自己的特定于情况的语言，化学家可以使用它来以最方便的方式表达他们的公式。然后为这种“化学表达式语言”创建一个简单的解析器和编译器。

我的意思是这个解析器和编译器将解析和编译化学家在他们的 Ruby 代码中编写的表达式。然后你可以有：

```
ChemicalReaction.new(..., "[ATP] * [GDP] * NDPK_constant") 
```

瞧：终极灵活性。

如果可用性是您的主要关注点，这就是我会采取的方法。如果您只想以最紧凑的方式表达一些特定于域的公式，那么在这里写出“lambda”对我来说似乎是一件不必要的麻烦事。

# vba - 自动生成 AutoCAD 3D 模型

> ID：14658234
> 
> 赞同：-2
> 
> 时间：2013-02-02T03:19:37.223
> 
> 标签：vba, autocad, autolisp

我想使用 AutoCAD 生成一个 3D 模型，该模型由许多基本的 3D 几何形状组成，例如球体、立方体等。

我有基本几何图形的局部坐标系的尺寸、原点和方向。数据存储在 Excel 文件中。excel 数据的每一行对应一个几何图形，列用于尺寸、原点坐标和方向。为每种几何类型定义了数据格式。

我想为 AutoCAD 使用 AutoLisp 或 VBA 或其他一些宏工具来自动化这个过程，这样当数据发生变化时，我只需要运行宏来读取数据并重新生成 AutoCAD 3D 模型。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:37:12.480

对于一般情况，没有“最佳”解决方案。如果您有使用 AutoLISP 的经验，请使用 AutoLISP。如果您拥有并使用 Visual Studio，请使用 ObjectARX .NET API。您还可以编写一个 Excel 宏来生成一个简单的脚本文件，在 AutoCAD 中使用 VBA，或者从 Excel 中驱动 AutoCAD。在你的情况下，“最好”的方式是你觉得最舒服的方式。

# image - 图像的主要“颜色”

> ID：14658236
> 
> 赞同：6
> 
> 时间：2013-02-02T03:19:53.137
> 
> 标签：image, algorithm, image-processing, computer-vision, processing

我有以下图像：

![在此处输入图像描述](../Images/fc1f32f6a9924a4c666b4c195ed4632b.png)

我想做的是根据它们的主色“识别”各个条带。做到这一点的最佳方法是什么？

我所做的是使用图像的值（HSV）并对该值的出现进行分布。问题是，对于 strip0 值`[27=32191, 28=5433, others=8]`strip1 值`[26=7107, 27=23111, others=22]`。我无法得到明确的区别。

该项目的主要目标是将实际的黄色纸与条带进行比较，并确定哪个条带最相似。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T04:22:08.637

首先，由于您知道参考图像中每个条带的边界，因此这里唯一可能出现的问题是您的参考图像有噪声。一种相对过度的处理方法是将每个条带中的颜色聚类并将聚类的质心作为条带的代表颜色。为了在此处获得更有意义的响应，请考虑此步骤的 CIELAB 颜色空间。这样做，并将结果转换回 RGB，对于第一个条带，我得到 rgb 三元组`(0.949375, 0.879872, 0.147898)`，对于第二条带`(0.945324, 0.857322, 0.129756)`（每个通道在 [0, 1] 范围内）。

当您获得新图像时，您执行相同的操作。但是这里有很多问题。例如，您如何处理此输入图像中的白平衡？假设您没有这样的问题，那么现在只需找到与您刚刚通过相同过程找到的颜色最接近的颜色即可。要找到最接近的颜色，您也必须为此使用有意义的颜色空间，并且再次推荐 CIELAB，因为在其上定义了完善的 Delta-E 函数。有关一些此类指标，请参见[http://en.wikipedia.org/wiki/Color_difference](http://en.wikipedia.org/wiki/Color_difference)，最简单的是 CIELAB 中的欧几里德距离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T04:42:30.273

**校准您的设备。**如果您不校准您的设备，您将在测试样本和参考之间产生任意误差。照明是您设备的一部分。

使用边缘检测和您对参考条的几何形状（条的宽度相等）的了解来确定采样区域。对于每个采样区域，提取一个内部补丁。

对于测试条，计算一个图像，其中每个像素是采样窗口（例如 5x5）内的最大差异。这将让您识别与外部区域（即纸张）不同的相对同质区域。提取补丁。

[根据svnpenn](https://stackoverflow.com/users/1002260/svnpenn)的建议，使用下采样为每个补丁找到一个集成的颜色。您可以稍后查看其他计算方法，但这应该可以很好地工作。

对于权重 wh、ws、wv，计算测试颜色和每个参考颜色之间的相似度 = wh *abs(h0-h1) + ws abs(s0-s1) + wv*abs(v0-v1)。*您可以稍后查看其他距离度量，但这应该会很好。从相等的权重开始。这种方法的一个好处是，无论参考条变化的尺寸或尺寸组合如何，它都表现良好。

对结果进行排序以找到最相似和第二最相似的匹配。请注意，设置相似性，因此零是完全匹配，大数字是差匹配。使用这两个结果的比率来估计最相似匹配的质量 - 如果前两个匹配非常接近，则可能两者都不是很好的匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T04:00:17.627

您可以扫描所有颜色并使用哈希表来跟踪每种颜色的像素数。

取这些数字，记住它们对应的颜色，按降序对它们进行排序。

查看排序后的数字列表，找出每对连续数字之间的差异。跟踪导致每个差异的两个数字列表中的索引。对这个差异列表进行排序。

查看差异列表中的最大数量。现在，两组像素之间的下降幅度最大。去看看哪个更大。具有此像素数及以上的所有内容都是主色。下面的一切都是次主导色。现在你知道你有多少主色，它们是什么。

从那里开始应该很容易做任何你想做的事情。

唯一不起作用的是，如果某些噪声与条带颜色相同，以至于它损坏了您的数据。

在这种情况下，您将使用不同的方法，您也可以在第一种情况下使用该方法 - 查看运行。遍历像素，每次找到新颜色时，看看下面有多少像素是相同颜色的。

使用前面描述的方法将颜色聚类为主要和非主要颜色，以获得相同的结果。

在这两种情况下，如果您知道图片是垂直条带，则可以限制您查看的颜色水平线的数量，以加快速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T03:43:40.937

您可以将图像分成多个部分，然后将每个部分调整为一个像素。这是使用整个图像的示例

```
$ convert Y82IirS.jpg -resize 1x1 txt:
# ImageMagick pixel enumeration: 1,1,255,srgb
0,0: (220,176, 44)  #DCB02C  srgb(220,176,44) 
```

[图像的平均颜色](http://wizards-toolkit.org/discourse-server/viewtopic.php?t=8782)

# c - 为什么我的程序是分步执行，而不是正常执行？

> ID：14658237
> 
> 赞同：1
> 
> 时间：2013-02-02T03:20:28.580
> 
> 标签：c, gcc, codeblocks

我的项目的想法是在具有多种可能结果的重复实验上构建概率树。

这是一个非常简单的项目，我认为我做得对。这是一个基本的树构建：有一个构建递归函数，它确定节点值并初始化子节点，然后构建子节点。

简化代码：

```
typedef struct Node {
    int depth;
    int noElements;
    float probability;
    struct Node *node0,*node1,*node4;
} Node;

void buildProbabilityTree(Node *node, int maxDepth) {
    node->child1=malloc(sizeof node->child1);
    //... set child1 values ...
    buildProbabilityTree(node->child1,maxDepth);

    node->child2=malloc(sizeof node->child2);
    //... set child2 values ...
    buildProbabilityTree(node->child2,maxDepth);

    node->child3=malloc(sizeof node->child3);
    //... set child3 values ...
    buildProbabilityTree(node->child3,maxDepth);
}

int main(int argc, char *argv[]) {

    Node root={0,0,1,NULL,NULL,NULL};
    buildProbabilityTree(&root,3);

    return EXIT_SUCCESS;
} 
```

完整代码（仅 50 行）[http://pastie.org/private/cqiazmgp4bvexcidzlmutg](http://pastie.org/private/cqiazmgp4bvexcidzlmutg)

问题是：它不起作用！

我正在使用 Codeblock 和 GNU gcc 编译器。当我运行逐步调试时，程序毫无问题地结束。但是当我在没有调试器的情况下构建它时，程序在到达概率树的“底部”时会崩溃。

任何人都知道这可能来自哪里？一个 Code::Blocks 选项可能吗？编译器问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T03:32:42.383

（决定搬评论回答）

`sizeof(node->node0)`不做你认为它做的事。你只是 malloc'd 指针的大小，而不是你的结构。

将您的 malloc 调用更改为 allocate `sizeof(Node)`（或者`sizeof(*node->node0)`......虽然我认为前者更容易看到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T03:32:17.443

我认为问题在于你只有 malloc(sizeof Node *)。所以你只是为一个不够的指针分配内存！

你应该 malloc(sizeof 节点)。

尝试将 malloc(sizeof node->childx) 更改为 malloc(sizeof *node->childx)。

# css - 使用桌面网站的 960 像素内包装奇怪调整大小

> ID：14658238
> 
> 赞同：0
> 
> 时间：2013-02-02T03:20:28.770
> 
> 标签：css, desktop, fluid

我想知道为什么我对[这个站点](http://digitalgenesis.com.au/2013/dreamweaver/micakes/)的桌面 css 的内部包装不起作用。

基本上如果将 innerwrap 设置`margin:0 auto; and width: auto;`为没有问题，但它不是以页脚或主目录为中心`div`

当我设置了当前设置的内包装时，`margin:0 auto; and width:960px;`您会注意到在稍微调整窗口大小后页面呈现一个水平滚动条，并且所有内容都向左挤压，白色背景开始变得可见。

无论如何，它是否可以流畅地过渡到下一个平板电脑尺寸布局，而不会出现滚动条并且内容会被挤压？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:06:48.580

由于您在 .innerwrap 中应用的填充，它显示滚动条

[阅读这篇关于盒子模型的文章](https://developer.mozilla.org/en-US/docs/CSS/box_model)

在将 100% 宽度应用于父元素时，在某些元素的侧面使用填充是不推荐的，因为它会增加整个组的宽度，并且由于您使用浏览器宽度，它会显示滚动条以查看您添加的额外空间。

`margin:auto`我谦虚的建议是，如果您希望块元素显示为居中，请尽可能应用样式规则，同样也必须显示为没有浮动的块元素。

删除这个：

```
 .innerwrap {
    margin-left: auto;
    margin-right: auto;
    padding-left: 10%;
    padding-right: 10%;
    width: 80%;
} 
```

拿着吧

```
.innerwrap {
    margin: auto;
    width: 960px;
} 
```

由于您为社交图标应用固定边距，它们会显示错位，因此不要使用固定边距来居中它们，而是使用百分比宽度。

您可能需要使用通用类来对齐它们

```
.social {
    background-position: center center;
    background-repeat: no-repeat;
    display: block !important;
    float: none;
    height: 150px;
    margin: auto;
    padding-top: 50px;
    width: 30% !important;
} 
```

对于 a.twittersocial 和 a.twittersocial:hover 以及其他社交链接只保留背景属性。

如果您需要将通用样式规则应用于多个元素（如果有很多元素）并尽可能避免使用 ID 选择器，请创建一个确定的类，请改用类（.daclass）。

使用像[Firebug](https://getfirebug.com/)这样的网络检查器来追踪样式错误。

祝开发者好运！

# jquery - 消息/墙不断下推网页正文

> ID：14658240
> 
> 赞同：0
> 
> 时间：2013-02-02T03:20:43.143
> 
> 标签：jquery, html, twitter-bootstrap

图片附在@http: [//imgur.com/a/dn9kU#PCS8Azm](http://imgur.com/a/dn9kU#PCS8Azm)

当您将鼠标悬停在它上面时，我正在尝试创建一个在 jQuery 中扩展的“边消息”。jQuery 编码不是问题。但是，HTML/CSS 定位是。请注意，我为此使用了 Bootstrap 的主题。

该消息正在下推图像横幅和正文。有关网站示例，请参见 www.mc-tron.com。

第一张图：普通网站的样子。

第二张图：我想要的。

第三张图片：会发生什么。

所以我基本上希望边消息重叠在横幅和网页上，而不是把所有东西都往下推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:46:04.453

你能用吗

```
<div style="position:absolute;" class="sidemessage"> 
```

?

# vb.net - 通过网络访问文件失败，并显示“系统检测到可能危及安全的尝试”。

> ID：14658242
> 
> 赞同：0
> 
> 时间：2013-02-02T03:21:06.147
> 
> 标签：vb.net, authentication, permissions, network-programming

嗨，我正在编写一个 WPF 应用程序，该应用程序需要访问我网络（域）上另一台 PC 上的文件。我第一次尝试访问远程文件夹并没有取得巨大的成功。

在我的 Windows 7 笔记本电脑上，我在 Windows 资源管理器中输入

> \\WIN-DC 名称\c$

，这是我的测试域控制器上 C 驱动器的路径，当受到挑战时，我使用 DC 的管理员帐户登录。然后我可以按预期访问C盘的文件夹树。

作为一个测试应用程序，我使用以下内容来探测同一个驱动器：

```
Try
    Dim DirInfo As New DirectoryInfo("\\WIN-DCname\c$")
    Dim Dirs = DirInfo.GetDirectories.OrderByDescending(Function(x) x.FullName)
Catch ex As Exception
End Try 
```

但 GetDirectories 行抛出异常：

> 系统检测到可能存在危害安全性的尝试。请确保您可以联系对您进行身份验证的服务器。

我开始认为这里存在权限问题......在执行此操作之前我是否必须再次以编程方式进行身份验证？如果有怎么办？

还是不能通过网络执行 GetDirectories？还有其他方法吗？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:33:19.533

最后，事实证明我需要使用[Impersonation](https://stackoverflow.com/questions/125341/how-do-you-do-impersonation-in-net)，它可以让我在执行代码块时以编程方式模拟另一个用户。不需要打开端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:25:09.920

微软[解释如下](http://support.microsoft.com/kb/938457)：

**回到顶端 | 提供反馈 原因**出现此问题的原因是网络防火墙过滤了 Kerberos 通信。

**解决方案**要解决此问题，请配置网络防火墙，以便不会阻止任一域的 TCP 端口 88 和 UDP 端口 88。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T13:11:24.907

**多个网络连接 - 无线、有线以太网**

The error “The system detected a possible attempt to compromise security.” started happening for me when I started alternately using a Wireless network connection at night and a wired Ethernet connection during the day.

# menu - 使用 Zurb Foundation 的顶部栏导航组件时如何链接顶级“部分”导航项？

> ID：14658243
> 
> 赞同：0
> 
> 时间：2013-02-02T03:21:11.353
> 
> 标签：menu, navigation, zurb-foundation

我正在使用 Zurb Foundation UI 框架构建一个站点，我想知道如何使用顶级导航链接，以便它们适用于桌面和移动访问者。

编辑：这是一个例子： http: [//meowzen.com/zurb-nav/](http://meowzen.com/zurb-nav/)

第 1 部分 <-- 应该将访问者带到“部分”页面

--Sub-Section 1 <-- 应该将访问者带到“子部分”页面

--第 2 小节 <--同上

- ETC

在上面链接的示例中，您会注意到所有链接在大屏幕上都按预期工作。但是，当响应式导航启动时（通过调整窗口大小或在移动设备上查看页面），不再可以通过菜单访问“部分”页面。

有没有人遇到过这个问题？你对如何去做这件事有什么建议吗？

提前谢谢了！

编辑：这是我目前的一些选择：

选项 1：仅显示移动导航的顶级“部分” - 这是一个示例：投影。皮克斯 com 。<-我倾向于这个！

选项 2：使部分名称可链接 - 我相信这是可能的，因为这里有一个工作示例：emerilsrestaurants。com 。

选项 3：在子部分级别为部分页面插入一个虚拟菜单项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:51:49.147

> [在上面链接](http://meowzen.com/zurb-nav/)的示例中，您会注意到所有链接在大屏幕上都按预期工作。但是，当响应式导航启动时（通过调整窗口大小或在移动设备上查看页面），不再可以通过菜单访问“部分”页面。

我不确定我是否正确理解您，但您的示例按预期工作。对于较小的视口（“移动”视图），菜单隐藏在下拉组件中。下拉菜单后，子菜单项仍可在单击时导航。

![在此处输入图像描述](../Images/31fe18196c87e844d7cebe0ffdc9de95.png)

# youtube - youtube direct lite 播放列表和自动批准

> ID：14658247
> 
> 赞同：0
> 
> 时间：2013-02-02T03:22:19.273
> 
> 标签：youtube, youtube-api

在努力让 Ytd 工作了几天之后，我将潜入 Youtube Direct Lite，它看起来更易于设置。

我的第一个问题是关于播放列表大小限制。一旦播放列表已满（200 个视频？）进一步提交视频会怎样？最旧的会被删除还是无法再添加，从而有效地破坏了该播放列表的小部件？

如果有很多视频，我希望我需要使用多个播放列表并手动制作新的播放列表和小部件，但是对于大量视频，是否有一种最佳实践方法来做到这一点？

此外，如果有很多视频或者这超出了 ytd-lite 的范围，是否可以以编程方式自动化提交批准。

认为最好在开始为我的网站进行设置之前先问这些问题。Ytd-lite 看起来是一个很棒的项目。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:43:20.670

来自文档：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Adding_a_playlist](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Adding_a_playlist)

*注意：播放列表最多包含 200 个视频。因此，您将无法将视频添加到已经包含这么多视频的播放列表中。*

我不会试图强迫这种情况，但我预计会出错。

我相信要以编程方式自动化提交批准，您可以修改 YouTube Direct Lite 的源代码，并在应用程序的服务器端使用一些逻辑，您可以做任何您想做的事情。

# html - 获得 3 个 div 以同样填充父级

> ID：14658250
> 
> 赞同：1
> 
> 时间：2013-02-02T03:22:39.997
> 
> 标签：html, css

我有一个边栏（侧边栏），我试图将它分成 3 个部分。这是它的样子：

![在此处输入图像描述](../Images/1fd909f39d0d9abd906bb0464d6ee39f.png)

这是我的html：

```
 <aside id="sidebar">
            <div id="side_events">
                Events
            </div>
            <div id="side_trailer">
                Trailer
            </div>
            <div id="side_advertisement">
                Advertisement
            </div>                    
        </aside> 
```

这是我的大部分 CSS：

```
* {
    margin: 0px;
    padding:0px;
}
header, section, footer, aside, nav, article, hgroup{
    display: block;
}
body{
    width: 100%; /*always specify this when using flexBox*/ 
    height:100%;
    display: -webkit-box;
    text-align:center;
    -webkit-box-pack:center; /*way of centering the website*/
    background-image:url('bg2.jpg');
}
#wrapper{
    max-width: 850px;
    display: -webkit-box; /*means this is a box with children inside*/
    -webkit-box-orient:vertical;
    -webkit-box-flex: 1; /*allows site to grow or shrink 1 = flex 0 = statix*/
    background-color: #B137D6;
}
#body_div{
    display: -webkit-box;
    -webkit-box-orient:horizontal;
    color:#000000;
}
#main_section{
    border:1px solid blue;
    -webkit-box-flex: 1; 
    margin: 20px;
    padding: 3px;
}
#sidebar{
    width: 210px;
    height: 100%;
    margin: 20px;
    padding: 0px;
    background: #999999;
    border:#FF0000 1px solid;
}
#side_events,
#side_trailer,
#side_advertisement{
    height:33.333%;
}
#side_events{
    background:#102A50;
    display:block;
}
#side_trailer{
    background:#173B72;
    display:block;
}
#side_advertisement{
    background:#296CD0;
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:40:00.310

您只需将`#sidebar`孩子的高度设置为 100%/3 = 33.333%，但要实现这一点，您还需要将高度设置`html`和`body`标记为 100%：

```
body,
html {
  height: 100%;
}

#side_events,
#side_trailer,
#side_advertisement{
    height:33.333%;
} 
```

大多数情况下，您必须对父 DIV 应用 100% 的高度才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:26:17.067

你的父元素的高度是自动的，子元素是 100%。因此，您需要定义父元素高度，以便将子元素定义为 100%。

你的父元素（#sidebar）有 100% 的高度。

我写了一个 jsfiddle，所以你可以看到我在父元素上 100% 高度的观点。父元素设置为 100%，但没有任何东西可以派生 100%。所以我将示例中的容器设置为定义高度。 [http://jsfiddle.net/rtLeM/](http://jsfiddle.net/rtLeM/)

```
 <!-- HTML -->
                 <div id="container">  
                   <aside id="sidebar">
                     <div id="side_events">
                       Events
                     </div>
                     <div id="side_trailer">
                       Trailer
                     </div>
                     <div id="side_advertisement">
                       Advertisement
                     </div>                    
                   </aside>
                 </div>

                 /* CSS */
                 #container{
                    height:300px;
                 }
                 #sidebar{
                    width:150px;
                    height:100%;

                 }
                 #side_events{
                    height:33%;
                    width:100%;
                    display:block;
                    background-color:#555;
                 }

                 #side_trailer{
                    height:33%;
                    width:100%;
                    display:block;
                    background-color:#999;
                 }

                 #side_advertisement{
                    height:33%;
                    width:100%;
                    display:block;
                    background-color:#333;
                 } 
```

# java - 定期更新 textview 背景

> ID：14658254
> 
> 赞同：0
> 
> 时间：2013-02-02T03:23:41.827
> 
> 标签：java, android, timer, widget, textview

我试图插入一个处理程序以每 x 秒更新一次 widget_textview 背景，但我不知道放置什么以及放置在哪里

```
 int i;
        if (i==1) {
            TextView myTxt = (TextView) findViewById(R.id.widget_textview);
            myTxt.setBackgroundResource(R.drawable.pic1);
            i++;
                  }else if(i==2) {
                    TextView myTxt = (TextView) findViewById(R.id.widget_textview);
                    myTxt.setBackgroundResource(R.drawable.pic2);
                    i++;
                  }else if(i==3) {
                    TextView myTxt = (TextView) findViewById(R.id.widget_textview);
                myTxt.setBackgroundResource(R.drawable.pic1);
                i=2;
                  }else {
                i++;
            } 
```

我不能把它放在任何地方，在任何地方我放置这个代码我在 textview 中出现错误

这是我的代码

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.widget.RemoteViews;
import android.widget.TextView;

public class Widget extends AppWidgetProvider {
    private Handler handler = new Handler();
    RemoteViews views;
    AppWidgetManager appWidgetManager;
    ComponentName currentWidget;
    Context context;
    DateFormat format = new SimpleDateFormat("HH:mm");
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        this.context = context;
        this.appWidgetManager = appWidgetManager;
        views = new RemoteViews(context.getPackageName(), R.layout.widget);
        currentWidget = new ComponentName(context, Widget.class);
        handler.removeCallbacks(UpdateWidget);
        handler.postDelayed(UpdateWidget, 100);

    }

    final Runnable UpdateWidget = new Runnable() {
        public void run() {

            Intent informationIntent = new Intent(context, MainActivity.class);
            PendingIntent infoPendingIntent = PendingIntent.getActivity(
                    context, 0, informationIntent, 0);
            views.setOnClickPendingIntent(R.id.Widget, infoPendingIntent);

            views.setTextViewText(R.id.widget_textview,
                    "" + format.format(new Date()));
            appWidgetManager.updateAppWidget(currentWidget, views);
            handler.postDelayed(UpdateWidget, 1000);

        }
    };

    @Override
    public void onDisabled(Context context) {
        super.onDisabled(context);
        handler.removeCallbacks(UpdateWidget);
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T07:10:49.317

put this in your handler class implementations onHandleMessage() method.This method is overridden.

```
 public class MyHandler extends Hadnler(

           onHandlerMessage(Message msg){

        //your code you want to put

}
} 
```

# javascript - 发现 HTML 对象标签方法/属性

> ID：14658257
> 
> 赞同：3
> 
> 时间：2013-02-02T03:24:08.293
> 
> 标签：javascript, html, gwt, object, garmin

[Garmin Communicator API](http://developer.garmin.com/web-device/garmin-communicator-plugin/)通过浏览器插件运行，该插件通过嵌入在 HTML 正文中的标签向 JS公开`<object>`。

[在构建GWT-Garmin-API](https://github.com/lauflabs/gwt-garmin-api)时，我试图找到该对象的任何未记录的方法/属性。使用他们的[JS API 源](http://developer.garmin.com/web/communicator-api/documentation/symbols/src/garmin_device_GarminDevicePlugin.js.html)，我可以看到官方方法，但我想找到任何其他方法/道具。到目前为止，我找不到从页面中对 Object 元素的引用列出这些的方法。

我使用的任何调试器都没有显示任何此类道具。我希望可能有一些我不知道的对象反射功夫。谢谢。

**更新：**

示例可以在[Garmin Hello Device 示例](http://developer.garmin.com/web/communicator-api/examples/garminHelloDevice.html)中找到。

在控制台中，遍历您将从以下内容中找到的对象：

```
var plugin = document.getElementsByTagName('object')[0];

for(var prop in plugin) {
    console.log( prop );
} 
```

但是，这不会找到像 plugin.Unlock() 这样的插件方法，您可以轻松地从同一控制台行调用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:55:32.440

> 我使用的任何调试器都没有显示任何此类道具

那么就没有这样的事情了，假设那些主机对象没有被实现为[Proxies](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy)。

Your approach of enumerating properties with a for-in-loop (and even heavier weapons such as `Object.getOwnPropertyNames` and `Object.getPrototypeOf`) is flawed, as anything visible like that would be shown in your debugger.

If you really want to find "hidden" properties (I'm very sure there are none), you would need to brute-force test all possible property names. Or have a look into their source, which might be hidden from you if it's a host object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:35:37.730

一般来说，如果您`object`在 javascript 中有一个引用，您可以使用以下方法循环该对象的属性和方法：

```
for(var property in object) {
    var value = object[property];
    console.log(property + ' = ' + value);
} 
```

鉴于您链接的源代码，您还可以尝试迭代一些 Garmin 类的原型，例如：

```
for(var property in Garmin.DevicePlugin.prototype) {
    //...
} 
```

如果当您以其中一种方式进行迭代时它没有显示出来，则意味着该属性没有暴露给 javascript。不显示的“可调用”方法（如`plugin.unlock()`）在插件本身中定义。（当您调用这样的方法时，您可以将其视为将消息从 javascript 直接传递到插件的实现。）我知道找到这些方法的“列表”的唯一方法是访问源代码您正在使用的插件的代码。javascript 没有办法要求这个列表，除非插件专门实现了一些东西来启用这种功能。

# javascript - js流畅棒导航

> ID：14658258
> 
> 赞同：0
> 
> 时间：2013-02-02T03:24:32.250
> 
> 标签：javascript, jquery, navigation, scroll

我有一个问题，但我实际上不知道如何问。

当顺利通过一个点时，我试图让导航栏粘在顶部。

我的参考是这个-> [http://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html](http://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html)

我的问题是当我使用**IE 或 Chrome 浏览器**时，有一个“**闪烁**”的效果。

它更像是滚动功能将在滚动到该点后完成过程。所以 Nav 之后的东西（HTML）会在 0.1 ~ 0.3 秒后出现在 Nav 的顶部，然后滚动功能将完成过程。即使通过很短，但当 HTML 在导航上时它是可视化的。

但是，如果我用**火狐浏览**一下，就没有这样的闪烁效果.....

*请问我这里有什么问题吗？？我应该检查什么？*

我的设置是 Nav 之前的 Anchor，Nav z-index = 99，滚动功能内部如下。

```
 $(this).scrollTop() > $(anchor).offset().top
            ? nav.addClass('sticky')
            : nav.removeClass('sticky') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T15:38:43.880

```
jQuery(document).ready(function($) {

    var my_nav = $('.navbar-sticky'); 
    // grab the initial top offset of the navigation 
    var sticky_navigation_offset_top = my_nav.offset().top;

    // our function that decides weather the navigation bar should have "fixed" css position or not.
    var sticky_navigation = function(){
        var scroll_top = $(window).scrollTop(); // our current vertical position from the top

        // if we've scrolled more than the navigation, change its position to fixed to stick to top, otherwise change it back to relative
        if (scroll_top > sticky_navigation_offset_top) { 
            my_nav.addClass( 'stick' );
        } else {
            my_nav.removeClass( 'stick' );
        }   
    };

    var initio_parallax_animation = function() { 
        $('.parallax').each( function(i, obj) {
            var speed = $(this).attr('parallax-speed');
            if( speed ) {
                var background_pos = '-' + (window.pageYOffset / speed) + "px";
                $(this).css( 'background-position', 'center ' + background_pos );
            }
        });
    }

    // run our function on load
    sticky_navigation();

    // and run it again every time you scroll
    $(window).scroll(function() {
         sticky_navigation();
         initio_parallax_animation();
    });

}); 
```

# java - 在Java中N毫秒后更改变量的值

> ID：14658261
> 
> 赞同：1
> 
> 时间：2013-02-02T03:25:10.443
> 
> 标签：java, time, netbeans-7, thread-sleep

我正在使用 Netbeans() 在 Java 中制作游戏，我想要一个布尔变量在获取项目“X”时取值为 true，项目“X”表示持续“N”毫秒的角色能力，什么在“N” miliSeconds 变量从 false 返回值之后，最好的方法是这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:30:44.587

现在，不确定是否适合我说，但我有一个建议和一个答案。

我建议建立一个技能/能力库。使用它来跟踪冷却时间、施法时间等。总体上会更有效。

至于答案，检查当前时间减去能力启动时间是否超过1000，然后设置变量。将其用于循环系统（例如线程）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:29:11.620

```
new Thread(new Runnable() {
    try {
        Thread.sleep(1000); //1 second
    catch (InterruptedException annoyingCheckedException) {}
    x = "foo";
} 
```

您可以启动一个新线程，该线程等待一秒钟（或者您希望它等待多长时间）然后更改`x`.

-是因为在睡眠时`try`，`catch`Java 会强制您捕获`InterruptedException`线程中断时将抛出的一个。在这种情况下，您永远不会中断线程，因此您不必担心它。

# ios - 为什么我在使用 UINavigationController 时不能强制横向？

> ID：14658268
> 
> 赞同：2
> 
> 时间：2013-02-02T03:26:25.543
> 
> 标签：ios, objective-c, uinavigationcontroller, uiinterfaceorientation

我发现许多问题强制 UIViewController 默认为横向： [How to force a UIViewController to Portraitorientation in iOS 6](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6) 并试试这个：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations

{
    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

但是当我在 UINavigationController 中使用 UIViewController 时，我无法强制横向。请帮忙！

*工作不正常

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [navControl setNavigationBarHidden:YES];
    self.window.rootViewController = navControl;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

*工作正常：

```
self.window.rootViewController = self.viewController; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:16:41.633

最好的方法是创建扩展 UINavigationController 并在扩展类中编写方向函数。

类声明：

```
@interface MyNavigationControllerViewController : UINavigationController

@property(nonatomic, assign) UIInterfaceOrientation orientation;
@property(nonatomic, assign) NSUInteger supportedInterfaceOrientatoin;
@end 
```

MyNavigationController 的实现

```
@implementation MyNavigationController

@synthesize supportedInterfaceOrientatoin = _supportedInterfaceOrientatoin;

@synthesize orientation = _orientation;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        _supportedInterfaceOrientatoin = UIInterfaceOrientationMaskLandscape;
        _orientation = UIInterfaceOrientationLandscapeLeft;
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations

{
    return _supportedInterfaceOrientatoin;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return self.orientation;
}

@end 
```

并将您的扩展（如 MyNavigationController）用作您的 rootviewcontroller 的导航控制器。

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;
@property (strong, nonatomic) MyNavigationControllerViewController *myNavController;

- (void) reloadAppDelegateRootViewControllerLandscape;
- (void) reloadAppDelegateRootViewController;
@end 
```

因此，您的应用程序委托 didfinishlounchingwithoptions 代码将如下所示。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    self.myNavController = [[MyNavigationController alloc] initWithRootViewController:self.viewController];
    [self.myNavController setNavigationBarHidden:YES];
    self.window.rootViewController = self.myNavController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

您可以为具有相同导航控制器的两个不同视图提供不同方向的唯一方法是重新加载导航控制器本身。所以如果你添加两个方法

```
- (void) reloadAppDelegateRootViewController{
    [[[UIApplication sharedApplication].delegate window] setRootViewController:nil];
    [(MyNavigationControllerViewController *)self.myNavController setOrientation:UIInterfaceOrientationPortrait];
    [(MyNavigationControllerViewController *)self.myNavController setSupportedInterfaceOrientatoin:UIInterfaceOrientationMaskAll];
    [[[UIApplication sharedApplication].delegate window] setRootViewController:self.myNavController];
}

- (void) reloadAppDelegateRootViewControllerLandscape{
    [[[UIApplication sharedApplication].delegate window] setRootViewController:nil];
    [(MyNavigationControllerViewController *)self.myNavController setOrientation:UIInterfaceOrientationLandscapeLeft];
    [(MyNavigationControllerViewController *)self.myNavController setSupportedInterfaceOrientatoin:UIInterfaceOrientationMaskLandscape];
    [[[UIApplication sharedApplication].delegate window] setRootViewController:self.myNavController];
} 
```

并在推送和弹出视图后调用这些函数。

注意：-我不知道这是好方法还是坏方法。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-02T03:29:16.630

您需要转到您的 plist 文件并设置方向。您也可以对项目文件执行此操作。plist 方向设置将覆盖所有内容。

在您的 plist 中，您可以将两个方向选项设置为横向按钮左侧和横向按钮右侧。

# android - listview行（android）上任何项目的多个事件处理程序？

> ID：14658275
> 
> 赞同：0
> 
> 时间：2013-02-02T03:28:04.383
> 
> 标签：android, event-handling, android-listview

如何处理 listView 上简单行上的任何项目的多个事件？示例：我的列表视图上的每一行都有 2 个按钮，一个用于查看，另一个用于编辑。

当我只是在我的 xml 的 onclick 属性上放置一个方法名称并收到此错误时：

```
java.lang.IllegalStateException: Could not find a method methodName in the 
activity class android.app.Application for onClick handler on view class 
android.widget.ImageButton 
```

我的列表行

```
<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/timeOrder"/>

<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/phoneNumberOrden"/>

<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/nameOrder"/>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <ImageButton 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_menu_view"
        android:contentDescription="@string/contentDescription"
        android:onClick="details"
        />

    <ImageButton 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_menu_call"
        android:contentDescription="@string/contentDescription"
        android:onClick="call"
        />

</LinearLayout> 
```

# c++ - 为什么流仍然转换为 C++11 中的指针？

> ID：14658276
> 
> 赞同：9
> 
> 时间：2013-02-02T03:28:11.167
> 
> 标签：c++, c++11, g++, std, iostream

从文本文件中读取行的规范方法是：

```
std::fstream fs("/tmp/myfile.txt");
std::string line;
while (std::getline(line, fs)) {
   doThingsWith(line);
} 
```

^(（不，[*不是*](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)[！ *`while (!fs.eof()) { getline(line, fs); doThingsWith(line); }`*](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)*）*)

 *这是有效的，因为`std::getline`通过引用返回流参数，并且因为：

*   在 C++03中，当设置错误标志 时，流`void*`通过`operator void*() const`in转换为`std::basic_ios`空指针值；`fail`
    *   见`[C++03: 27.4.4]`& `[C++03: 27.4.4.3/1`]
*   `bool`在 C++11 中，流通过`explicit operator bool() const`in转换为，在设置错误标志 时`std::basic_ios`评估为`false``fail`
    *   见`[C++11: 27.5.5.1]`&`[C++11: 27.5.5.4/1]`

在 C++03 中，这种机制意味着以下是可能的：

```
std::cout << std::cout; 
```

它正确地导致一些任意指针值被输出到*标准输出*流。

但是，尽管`operator void*() const`已在 C++11 中删除，但它也可以在 C++11 模式下的 GCC 4.7.0 中为我编译和运行。

这在 C++11 中怎么可能？还有其他一些我不知道的机制在起作用吗？或者它只是一个实现“奇怪”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T03:30:57.250

直到 GCC 4.6.2，[libstdc++ 的代码`basic_ios`](http://gcc.gnu.org/onlinedocs/gcc-4.6.2/libstdc++/api/a00254.html#a17570f2d87756a491fad68d4cd8b8b3e)显然仍然类似于 C++03。

我只是把它归结为“他们还没有解决这个问题”。

相比之下，[libc++（LLVM 的 stdlib 实现）主干](http://llvm.org/svn/llvm-project/libcxx/trunk/include/ios)已经使用`operator bool()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T04:30:03.140

我有理由确定这在符合 C++11 的实现中是不允许/不能发生的。

当然，问题在于，目前大多数实现都在努力实现一致性，但还没有完全实现。可以猜测，对于许多供应商来说，这个特定的更新是一个相当低的优先级。它改进了错误检查，但在启用新技术、添加新功能、提高运行时效率等方面几乎没有（或没有）。这让编译器可以捕获您引用的错误（`some_stream << some_other_stream`）但并不能真正构成一个整体否则有很多不同。

如果我负责更新 C++11 的标准库，我认为这将是一个*相当*低的优先级。还有其他一些更改可能同样容易（如果不是更容易）合并，并且可能对大多数程序员产生更大的影响。

使用您提供的示例之一，如果我负责更新 VC++ 标准库以利用 11 月 CTP 中添加的编译器功能，我的首要任务可能是将构造函数添加到标准容器类型以接受`initialization_list`s . 这些很容易添加（我猜一个人可能会在一周内添加和测试它们）并且在程序员可以做的事情上产生相当明显的明显差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T15:55:33.330

这是一个隐藏在预先存在的标题中的错过的迷你功能。2011 年之前的组件中可能存在大量遗漏和委托错误。

真的，如果有人在 gcc 中想出了这样的事情，那么去[Bugzilla](http://gcc.gnu.org/bugzilla/)并提交错误报告会大有裨益。这可能是一个低优先级的错误，但如果您开始书面记录

我会尝试将这个想法扩展到所有其他 C++ 编译器：[clang](http://llvm.org/bugs/)、[Visual Studio](http://connect.microsoft.com/VisualStudio)等。

这将使 C++ 成为一个更好的地方。

PS 我[在 Bugzilla 中输入了一个错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56193)。*

# c# - 使用 webresponse 对象获取（500）内部服务器错误

> ID：14658279
> 
> 赞同：2
> 
> 时间：2013-02-02T03:28:32.933
> 
> 标签：c#, httpwebrequest, httpresponse

尝试加载“http://links.casemakerlegal.com/states/CA/books/Case_Law/results?search[Cite]=214 Cal.App.3d 533”的 HTML 内容，但 HttpWebResponse 对象出现此错误“（500）内部服务器错误”并且代码是----- request = WebRequest.Create(urlCheck); 请求.超时 = 100000; 响应 = request.GetResponse(); strmRead = new StreamReader(response.GetResponseStream(),System.Text.Encoding.UTF8); 结果 = strmRead.ReadToEnd();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:27:33.827

您需要使用 Wireshark 或 Ethereal 之类的工具，或浏览器中的开发人员工具来进一步调查。浏览器很可能在 HTTP 标头中发送了一些您的代码没有发送的值，并且由于这些缺失值，服务器返回 500。尝试复制浏览器在代码中使用的所有标头，看看这是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:30:54.660

它通常是浏览器代理。尝试将有效的浏览器代理与 Accept 和 Accept-Encoding 标头一起添加到您的请求标头中，

*编辑：例如：

```
request.UserAgent = "Mozilla/5.0 (Windows NT 5.2; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1";
request.Headers.Add("Accept-Encoding: gzip, deflate");
request.Headers.Add("Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
request.Headers.Add("Accept-Language: en;q=0.8"); 
```

# asp.net-mvc-3 - 如何让 jquery.jeditable 在 Html.beginform() 块内工作？

> ID：14658285
> 
> 赞同：0
> 
> 时间：2013-02-02T03:30:22.327
> 
> 标签：asp.net-mvc-3, jquery-plugins

如何让 jquery.jeditable 在 Html.beginform() 块内工作？

我正在尝试使用 jquery.jeditable 插件来编辑表单上的标签。当我在代码上使用这个块时 -

```
<div>
    <input type="hidden" id="RubricID" value="3" />
    <div class="field">
        <div class="display-label" id="lblName">Label 1</div>
        <div class="display-field text" id="Name">Lable 1</div>
    </div>
</div> 
```

在 Html.beginform() 我得到一个异常

```
Microsoft JScript 运行时错误：无法获取属性“设置”的值：对象为空或未定义。  

```

并在 jquery.validate.min.js 文件`e="on"+e.type.replace(/^validate/,"")`中突出显示。但是，如果我将相同的代码块放在 Html.beginform() 之外，它就可以正常工作。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:49:48.080

发生这种情况是因为 jeditable 创建了自己的与@Html.beginform() 冲突的表单。在没有 beginform 的情况下为 jeditable 创建一个视图可以正常工作。

# actionscript-3 - 如何创建嵌入 mp3 的工作 swf

> ID：14658287
> 
> 赞同：0
> 
> 时间：2013-02-02T03:30:39.920
> 
> 标签：actionscript-3, apache-flex, flex4.6

我正在使用 Adob​​e ActionScript 指南（Flex 编程 ActionScript 3.0）中的以下代码：

```
package { 
  import flash.display.Sprite; 
  import flash.media.Sound; 
  import flash.media.SoundChannel; 

  public class EmbeddedSoundExample extends Sprite { 
    [Embed(source="smallSound.mp3")] 
    public var soundClass:Class; 

    public function EmbeddedSoundExample()  { 
      var smallSound:Sound = new soundClass() as Sound; 
      smallSound.play(); 
    } 
  }
} 
```

由此产生的 swf 拒绝播放，在具有两种不同操作系统（一台 WinXP 台式机，一台 Zenwalk 笔记本电脑）的两台不同机器上进行了测试。

有没有人有更好的使用 Flex SDK 嵌入 mp3 的例子（即不是 FlashBuilder 或 CSx）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:32:37.550

事实证明，在我使用以下开关调用它之前，mxmlc 并没有嵌入我的资产：

> -静态链接运行时共享库​​=真

之后，生成的 swf 就很好了。

我希望这可以帮助其他使用 flex SDK / mxmlc 的人。

# opera - Opera：如何在上面板中显示书签？

> ID：14658289
> 
> 赞同：0
> 
> 时间：2013-02-02T03:30:50.183
> 
> 标签：opera, bookmarks

是否可以让书签始终显示在上面板中，就像在谷歌浏览器中一样？

我只能在侧边栏面板中显示书签。我可以将图标“书签”添加到上面板，但不能添加特定的书签。是否有可能在 Opera 12 中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:36:38.153

试过了`View menu > Toolbars > Bookmark bar`吗？

无论如何，这属于[http://superuser.com](http://superuser.com)上的问题，而不是 stackoverflow.com 上的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T03:16:25.887

选择`Settings`左上角。

`Browser`-> `User interface`->`Show the bookmarks bar`

![在此处输入图像描述](../Images/f387cf6b8e49948f9fa895efca2421cb.png)

# yii - 在 Yii 框架中实现服务层

> ID：14658294
> 
> 赞同：1
> 
> 时间：2013-02-02T03:31:51.140
> 
> 标签：yii, service-layer

我已经开始使用 Yii 框架并且非常喜欢他们做事的方式。尽管我不完全同意的一件事是与数据库交互的所有逻辑都被告知要放入模型中。“瘦控制器，胖模型”。

我在工作中使用 .NET MVC3，虽然我不介意将特定于模型的方法放入我的模型中，但我相信将 DB 逻辑抽象到一个完全不同的服务层对我来说更有意义。

谁能给我一些关于设置它的最佳方法的想法？我正在考虑类似“BaseService”类的东西，它从 Component 继承，每个 SL 对象都继承自它。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:04:52.493

创建一个新文件夹 protected/serviceLayer

在你的 config/main.php 中导入这个文件夹

```
'import' => array('application.serviceLayer.*') 
```

在 protected/serviceLayer- 文件夹中创建一个组件

随心所欲地调用它

# javascript - 向javascript添加if语句？

> ID：14658302
> 
> 赞同：-3
> 
> 时间：2013-02-02T03:33:33.433
> 
> 标签：javascript

有人可以帮帮我吗？我正在尝试在我的 JavaScript 中添加一个 if 语句，因此如果welcome_page2 div 隐藏或不可见，则运行该函数，否则不要运行该函数。

有人可以告诉我哪里出错了吗？谢谢。

```
<script type="text/javascript">
    if ($('.welcome_page2').is(":hidden")) {
        setTimeout(function () {
            var cvr = document.getElementById("cover")
            var dlg = document.getElementById("dialog")
            cvr.style.display = "block"
            dlg.style.display = "block"
            if (document.body.style.overflow = "hidden") {
                cvr.style.width = "1024"
                cvr.style.height = "100&#37;"
            }
        }, 3000);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:35:42.543

平衡你的牙套，即

```
 ....
        cvr.style.height = "100&#37;"
     }
   }, 3000);
} // close your if 
```

像这样

```
<script type="text/javascript">
if  ($('.welcome_page2').is(":hidden")) {
     setTimeout(function () {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById("dialog")
        cvr.style.display = "block"
        dlg.style.display = "block"
        if (document.body.style.overflow = "hidden") {
            cvr.style.width = "1024"
            cvr.style.height = "100&#37;"
         }
    }, 3000);
} // end if
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-02T03:37:09.780

```
if  ($('.welcome_page2').is(":hidden"))
{
    setTimeout(function ()
    {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById("dialog")
        cvr.style.display = "block"
        dlg.style.display = "block"
        if (document.body.style.overflow = "hidden")
        {
            cvr.style.width = "1024"
            cvr.style.height = "100&#37;"
        }
    }, 3000);
} 
```

# .htaccess - 用于 SEO 的子域和 htaccess 问题

> ID：14658305
> 
> 赞同：0
> 
> 时间：2013-02-02T03:34:04.433
> 
> 标签：.htaccess, url, mod-rewrite, seo, subdomain

我想将网址从：
`http://subdomain.domain.com/page/`to`http://subdomain.domain.com/?page=pagename`
和also:
`http://domain.com/page/`to更改为`http://domain.com/?page=pagename`
虽然没有取得多大成功。

**到目前为止，这是我的 htaccess 文件 [更新]**

```
Options +FollowSymlinks -MultiViews

RewriteEngine On
RewriteBase /

# Remove 'www'
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Add slashes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !index.php
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://resolutiongaming.com/$1/ [L,R=301]

# Subdomain redirect
RewriteRule ^/(webdev)/(.*)$ http://webdev.resolutiongaming.com/$1 [R=301,L]
RewriteRule ^/(artwork)/(.*)$ http://artwork.resolutiongaming.com/$1 [R=301,L]
RewriteRule ^/(music)/(.*)$ http://music.resolutiongaming.com/$1 [R=301,L]

# Search engine optimization
RewriteRule ([a-zA-Z]+)/$ ?page=$1 
```

我使用`RewriteRule ^([a-zA-Z]+)/$ ?page=$1`的似乎适用于域 url 但不适用于子域。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:53:48.957

So it was an easy fix really. I basically put a .htaccess file in each subdomain directory that looks like this:

```
Options +FollowSymlinks -MultiViews

RewriteEngine On
RewriteBase /

# Search engine optimization
RewriteRule ([a-zA-Z]+)/$ ?page=$1 
```

Hope this helps someone. :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:49:51.417

实际上最近不得不做这样的事情。试试这个为您的**子域重定向**块：

```
 RewriteRule ^/(webdev)/(.*)$ http://webdev.resolutiongaming.com/$2 [R=301,L]
  RewriteRule ^/(artwork)/(.*)$ http://artwork.resolutiongaming.com/$2 [R=301,L]
  RewriteRule ^/(music)/(.*)$ http://music.resolutiongaming.com/$2 [R=301,L] 
```

或者也许这个；注意从**$2**到**$1**的变化：

```
 RewriteRule ^/(webdev)/(.*)$ http://webdev.resolutiongaming.com/$1 [R=301,L]
  RewriteRule ^/(artwork)/(.*)$ http://artwork.resolutiongaming.com/$1 [R=301,L]
  RewriteRule ^/(music)/(.*)$ http://music.resolutiongaming.com/$1 [R=301,L] 
```

**编辑：**或者也许试试这个。请注意，您需要捕获 URL 的两个部分以在解释时重写。括号中的每一项都`(`对应`)`于重写中的一个字符串。尝试这个。`RewriteRule`使用您在评论中提到的更好的正则表达式：

```
 RewriteRule ^([a-zA-Z]+)/(.*)$ /$1/$2 [R=301,L] 
```

或者也许是这样：

```
 RewriteRule ^([a-zA-Z]+)/(.*)$ /$1/page=$2 [R=301,L] 
```

# algorithm - 如何计算网格中的重心？

> ID：14658307
> 
> 赞同：0
> 
> 时间：2013-02-02T03:34:57.567
> 
> 标签：algorithm, math

给定一个带有 x*y 单元格的网格（或表格）。每个单元格包含一个值。大多数这些单元格的值为 0，但在该网格的某处可能存在一个“热点”，其中一个单元格具有较高的值。该单元格的相邻单元格的值也 > 0。离热点越远，相应网格单元格中的值越低。

所以这个热点可以看作是山顶，离这座山越远，数值越小。在一定距离处，值再次下降到 0。

现在我需要确定网格中代表网格重心的单元格。在上面的简单示例中，该质心将只是具有最高值的一个单元格。然而，事情并不总是那么简单：

1.  热点小区周围相邻小区的递减值可能不是均匀分布的，或者“山的一侧”可能比另一侧更早地下降到 0。

2.  网格内还有另一个热点/山，其值 > 0。

我可以认为这是一个典型的问题。不幸的是，我不是数学专家，所以我不知道要搜索什么（至少我还没有在 Google 中找到答案）。

有什么想法可以解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:46:20.120

您正在寻找单元格值的“加权平均值”。假设每个单元格都有一个值 z(x,y)，那么您可以执行以下操作

```
zx = sum( z(x, y) ) over all values of y
zy = sum( z(x, y) ) over all values of x

meanX = sum( x * zx(x)) / sum ( zx(x) )
meanY = sum( y * zy(y)) / sum ( zy(y) ) 
```

我相信您可以将其转换为您选择的语言...

例子：如果你知道Matlab，那么上面的写法如下

```
zx = sum( Z, 1 ); % sum all the rows
zy = sum( Z, 2 ); % sum all the columns

[ny nx] = size(Z); % find out the dimensions of Z

meanX = sum((1:nx).*zx) / sum(zx);
meanY = sum((1:ny).*zy) / sum(zy); 
```

这将为您提供 1 .. nx 范围内的 meanX：如果它在中间，则值为 (nx+1)/2。您显然可以根据自己的需要进行扩展。

编辑：再一次，在“几乎真实”的代码中：

```
// array Z(N, M) contains values on an evenly spaced grid
// assume base 1 arrays

zx = zeros(N);
zy = zeros(M);

// create X profile:
for jj = 1 to M
  for ii = 1 to N
    zx(jj) = zx(jj) + Z(ii, jj);
  next ii
next jj

// create Y profile:
for ii = 1 to N
  for jj = 1 to M
    zy(ii) = zy(ii) + Z(ii, jj);
  next jj
next ii

xsum = 0;
zxsum = 0;
for ii = 1 to N
  zxsum += zx(ii);
  xsum += ii * zx(ii);
next ii
xmean = xsum / zxsum;

ysum = 0;
zysum = 0;
for jj = 1 to M
  zysum += zy(jj);
  ysum += jj * zy(ii);
next jj
ymean = ysum / zysum; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T04:46:41.667

[这个维基百科条目](http://en.wikipedia.org/wiki/Center_of_mass#A_system_of_particles)可能会有所帮助；标题为“粒子系统”的部分就是您所需要的。只需了解您需要为每个维度进行一次计算，显然您有两个。

这是一个完整的 Scala 2.10 程序，用于生成一个充满随机整数的网格（使用命令行上指定的尺寸）并找到重心（其中行和列从 1 开始编号）：

```
object Ctr extends App {
  val Array( nRows, nCols ) = args map (_.toInt)
  val grid = Array.fill( nRows, nCols )( util.Random.nextInt(10) )
  grid foreach ( row => println( row mkString "," ) )
  val sum = grid.map(_.sum).sum
  val xCtr = ( ( for ( i <- 0 until nRows; j <- 0 until nCols )
    yield (j+1) * grid(i)(j) ).sum :Float ) / sum
  val yCtr = ( ( for ( i <- 0 until nRows; j <- 0 until nCols )
    yield (i+1) * grid(i)(j) ).sum :Float ) / sum
  println( s"Center is ( $xCtr, $yCtr )" )
} 
```

你可以定义一个函数来保持计算 DRYer，但我想让它尽可能明显。无论如何，我们在这里运行它几次：

```
$ scala Ctr 3 3
4,1,9
3,5,1
9,5,0
Center is ( 1.8378378, 2.0 )

$ scala Ctr 6 9
5,1,1,0,0,4,5,4,6
9,1,0,7,2,7,5,6,7
1,2,6,6,1,8,2,4,6
1,3,9,8,2,9,3,6,7
0,7,1,7,6,6,2,6,1
3,9,6,4,3,2,5,7,1
Center is ( 5.2956524, 3.626087 ) 
```

# file - 在 while 或 for 循环中对具有任意扩展名的现有文件进行 Bash 脚本测试

> ID：14658309
> 
> 赞同：0
> 
> 时间：2013-02-02T03:35:57.957
> 
> 标签：file, bash, testing, scripting

我一直试图弄清楚这一点。我已经阅读了多个线程，感觉我已经很接近了，但是脚本并没有放在一起。

场景：我有一个媒体服务器和数千个电影文件。每个电影文件都有各种附件文件，例如封面图稿、数据库信息、同人图和预告片。虽然目录中的所有内容都有封面和数据库信息，但有些文件可能有也可能没有各自的同人图或预告片。对于这些文件，我试图让这个脚本工作，它将创建一个空的“虚拟”文件来代替应该存在的文件。然后当我真正有时间时，我可以回去只搜索虚拟文件并努力填补我可以填补的空白。

这是我到目前为止所拥有的。

```
#!/bin/bash

find . -type f -print0 | while read -d $'\0' movie ; 
do
echo $movie
    moviename=${movie%\.*} #remove the extension from the string
    moviename1=`echo $moviename | sed 's/\ /\\ /'` #add escaped spaces to the string
    echo $moviename1  #echo the string (for debugging)
    if [ ! -f $moviename-fanart* ]; #because the fanart could be .jpg, or .png, etc
    then
        echo "Creating $moviename-fanart.dummy"
        touch "$moviename-fanart.dummy"
    fi
    if [ ! -f $moviename-trailer* ]; #because tralers could be .mp4, .mov, .mkv, .avi, etc
    then
        echo "Creating $moviename-trailer.dummy"
        touch "$moviename-trailer.dummy"
    fi
done 
```

这应该很简单，但我认为我没有为进入测试运算符的输入字符串获得正确的格式。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:46:17.903

逐行分析：

```
find . -type f -print0 | while read -d $'\0' movie; do 
```

好的，但是使用 bash4，您可以只使用`shopt -s globstar`递归地对目录进行操作。

```
 moviename=${movie%\.*} #remove the extension from the string 
```

你不需要反斜杠。

```
 moviename1=`echo $moviename | sed 's/\ /\\ /'` #add escaped spaces to the string 
```

这条线是可疑的，因为如果你*引用*名称，转义的空格会变成双重转义。您将字符串的*值*与您看到的表示混淆了。

```
 if [ ! -f $moviename-fanart* ]; then #because the fanart could be .jpg, or .png, etc 
```

引用字符串或使用 bash 的`[[`test 关键字。在测试表达式中扩展一个 glob 有点危险，因为如果它匹配多个结果，你会得到一个错误。也就是说，如果您确定只有一个可以引用*到*全局。`"$moviename-fanart"*`.

```
 touch "$moviename-fanart.dummy" 
```

在这里，你引用它。所以基本上你现在正在处理一个不同的名字。

```
 fi
    if [ ! -f $moviename-trailer* ]; then #because tralers could be .mp4, .mov, .mkv, .avi, etc
        echo "Creating $moviename-trailer.dummy"
        touch "$moviename-trailer.dummy"
    fi 
```

一样。

```
done 
```

# django - Django 模型：如何避免级联删除

> ID：14658315
> 
> 赞同：1
> 
> 时间：2013-02-02T03:36:44.023
> 
> 标签：django, django-models

我有一个关于设计 Django 模型和考虑对级联删除的影响的一般性问题。假设以下资产管理应用程序的简单设计。

```
class Asset(models.Model):
    aquire_date = models.DateField()
    cost = models.DecimalField(max_digits=16, decimal_places=2)
    description = models.CharField(max_length=30)
    account = models.ForeignKey(Account)
    vendor = models.ForeignKey(Vendor)
    department = models.ForeignKey(Department)

class Vendor(models.Model):
    name = models.CharField(max_length=70)
    city = models.CharField(max_length=50
    phone = PhoneNumberField()
    email = models.EmailField()

class Account(models.Model):
    account_number = models.IntegerField()
    description = models.CharField(max_length=50)

class Department(models.Model):
    number = models.IntegerField(unique=True)
    name = models.CharField(max_length=50) 
```

所以每个 Asset 有 3 个 ForeignKey 字段到其他表。阅读[Django 文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#deleting-objects)，它说“任何具有指向要删除的对象的外键的对象都将被删除”。我读到这意味着如果我删除一个 Department 对象、Asset 对象或对象，ForeignKey 所指的对象也将被删除。但是，如果我删除资产，部门、供应商和帐户仍然存在。

这是理解 Django 中级联删除的正确方法吗？

我更喜欢的是

*   删除资产时，不会删除部门、供应商或帐户；
*   删除部门时，不会删除任何资产，但指向该部门的所有 ForeignKey 字段都设置为空。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:47:40.603

是的，你的理解是正确的。

解决方案：[创建模型`ForeignKey`字段](https://docs.djangoproject.com/en/1.11/ref/models/fields/#foreignkey)时，提供`on_delete=django.db.models.SET_NULL`. 您需要将其与 结合`null=True`以允许这样做，因为默认值为`False`.

# ruby-on-rails - 无法在 OSX Leopard 上安装 therubyracer、gcc 版本更新？

> ID：14658318
> 
> 赞同：0
> 
> 时间：2013-02-02T03:36:56.117
> 
> 标签：ruby-on-rails, macos, gcc, osx-leopard, therubyracer

因此，在使用 Rails 制作了我的第一个脚手架后，我尝试访问它创建的一些页面，并收到以下错误：

```
 ExecJS::RuntimeError in Users#index

     Showing /Users/Alice/Desktop/sample_app/app/views/layouts/application.html.erb where line #6 raised:

     dyld: unknown required load command 0x80000022

     (in /Users/Alice/Desktop/sample_app/app/assets/javascripts/users.js.coffee)
     Extracted source (around line #6):

     3: <head>
     4:   <title>SampleApp</title>
     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
     6:   <%= javascript_include_tag "application" %>
     7:   <%= csrf_meta_tags %>
     8: </head>
     9: <body></code> 
```

我查看了这个错误并得出结论，我需要安装 therubyracer gem。我试图通过 gem install therubyracer 来做到这一点。

然后我得到了错误：

```
 ERROR:  Error installing therubyracer:
    ERROR: Failed to build gem native extension.
    /Users/Alice/.rvm/rubies/ruby-1.9.3-p362/bin/ruby extconf.rb
    creating Makefile
    Unable to find a compiler officially supported by v8.
    It is recommended to use GCC v4.4 or higher
    Using compiler: g++
    File "./gyp-mac-tool", line 167
    fd = os.open(lockfile, os.O_RDONLY|os.O_NOCTTY|os.O_CREAT, 0o666)
                                                               ^
    SyntaxError: invalid syntax 
```

所以我运行 gcc -version，我看到我的版本是 i686-apple-darwin9-gcc-4.0.1 我尝试使用 MacPorts 更新我的 gcc，但我似乎无法让它工作。 .

我正在运行 OSX Leopard，我猜这是我所有悲伤的原因。
我从这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:02:38.577

尝试另一个。[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs) 看看列表，这些基本上都做同样的事情。我相信你会找到一个有效的。

# ios - 单元格中的下载进度

> ID：14658319
> 
> 赞同：0
> 
> 时间：2013-02-02T03:37:07.473
> 
> 标签：ios, xcode, uitableview, asihttprequest, uiprogressview

我正在尝试在内部开发进度视图`UITableViewCell`。

在我的第一个认识中，我使用`AFHTTPRequestOperation`了它，它`setDownloadProgressBlock:^`在我的牢房内。

后来我的目标变得更加复杂。我有一个`UITableView`显示不同的内容（歌曲播放列表）。同一首歌曲可能会出现在多个播放列表中。当我开始在一个播放列表中下载歌曲并切换到另一个播放列表（其中也包含这首歌）时，我想查看第一个播放列表中的下载进度。

我已经成功地让它工作了。在下载过程开始时，我在全局类中创建了一个进度视图。为了在我刚刚使用的单元格上显示此进度视图`addSubview` `removeFromSuperview`。但我不喜欢这种方式，因为我必须在现有进度视图之上添加进度视图（因为由于应用程序设计，每个单元格都有自己的进度视图）。

现在我使用另一种方法。当我显示单元格时，我设置`setDownloadProgressBlock:^`为现有的进度视图。我工作正常，但是当我打开另一个播放列表时，进度会显示在另一首歌曲上。我敢打赌，这是因为我使用了可重复使用的电池。

我有点厌倦了实现这个东西，有什么想法可以让它正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:09:15.760

您是对的，由于单元重用，将每个单独的单元与下载进度回调连接是不合适的。为了解决这个问题，我将在你的`Song`对象中保存下载状态，当它设置为 时`YES`，开始观察通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(progressDidUpdate:) name:kSongDownloadProgressUpdateNotificaton object:nil]; 
```

在 的进度回调块中`AFHTTPRequestOperation`，发送`name:kSongDownloadProgressUpdateNotificaton`带有歌曲 id 标识符的 a。

在`progressDidUpdate:`单个单元格中，确定它正在更新自己的进度，如果没有忽略它，如果是，则更新单元格中的progressView。下载完成后，删除通知的观察。

此外，您需要在`Song`对象中保存下载百分比数据，因为当 UITableView 调用`cellForRowAtIndexPath`并将`Song`随时分配给另一个单元格时，保存和恢复进度将使下载状态保持不变。

# javascript - 如何处理 d3.js 中的缺失数据

> ID：14658323
> 
> 赞同：2
> 
> 时间：2013-02-02T03:37:29.903
> 
> 标签：javascript, d3.js

通过解析 XML 文件，我已经成功地用 d3 创建了几个图，例如[这个](https://raw.github.com/hannorein/open_exoplanet_catalogue/master/systems/11%20Com.xml)。现在我想知道如何处理不完整的数据集。在我的特定示例中，某些元素中缺少一些子元素。在这种情况下，我希望 d3 丢弃该元素而不显示任何内容。目前，我正在对数据集应用过滤器，然后再将其输入 d3 的 data() 函数。

有没有更聪明的方法可以即时执行此操作？理想情况下，我只想`null`在设置属性时返回，并且所需的子元素结果不存在。

完全免责声明：我刚刚开始学习 d3.js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T19:34:59.390

这可以通过`display`在数据连接的 DOM 元素上设置属性来获得：

```
elemSelection.style("display", function (d) { 
    return is_data_NA(d) ? "none" : null; 
}); 
```

这是一个简短的模拟示例：http: [//jsfiddle.net/rU4XL/](http://jsfiddle.net/rU4XL/)

请注意，默认情况下，如果*value 函数*返回[.attr](https://github.com/mbostock/d3/wiki/Selections#wiki-attr)，[.style](https://github.com/mbostock/d3/wiki/Selections#wiki-style)等，接受`value`为函数的函数将从选择*中删除属性或内容*。因此，在这种情况下，该属性将从具有有效数据的元素中删除。**`null``display``elemSelection`**

# ruby-on-rails - 如何将两个参数传递给 house_path (:arg1 => 4, :arg2 => 56)

> ID：14658329
> 
> 赞同：1
> 
> 时间：2013-02-02T03:38:57.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在视图中传递方法我得到了错误

```
`undefined local variable or method arg1 for # HousesController:0xbbb7e38>` 
```

但是当我只使用一个参数时，效果很好。

我的路线是这样定义的：

> MyAplication::Application.routes.draw 做
> 
> 资源 :houses
> 数学 ':controller/:action/:arg1/:arg2'
> 
> 结尾

我是 RoR 的新手，但我有搜索，我不知道我做错了什么。

帮助赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:52:43.853

访问控制器中的参数，如下所示：

```
arg1 = params[:arg1]
arg2 = params[:arg2] 
```

# ios6 - 代码签名下不显示新的配置文件

> ID：14658330
> 
> 赞同：1
> 
> 时间：2013-02-02T03:39:11.913
> 
> 标签：ios6, provisioning-profile

我创建了一个配置文件并在第一次安装时没有任何问题。在我必须修改配置文件并重新安装它之后。我从管理器中删除了那个旧配置文件，并在 nw 配置文件上使用了双重 cli。然后它在组织者的配置下显示。但现在它没有显示在我该`Code signing`如何解决这个问题中。请帮我。

谢谢

# ocaml - 相邻二叉树

> ID：14658341
> 
> 赞同：1
> 
> 时间：2013-02-02T03:40:50.060
> 
> 标签：ocaml

我正在编写一个函数，该函数采用 2 个二叉树（t1 和 t2）并生成一棵将 t2 放在 t1 右下角的新树。t2 附加到右孩子为空的第一个节点，即使该节点不是叶子。

```
let rec adjoin_right (t1: 'a tree) (t2: 'a tree) : 'a tree 
```

测试用例：

```
let test () : bool =
adjoin_right (Node (Empty, 1, Empty)) (Node (Empty, 2, Empty)) = 
Node(Empty, 1, Node (Empty, 2, Empty))
;; run_test "adjoin_right leaf" test 
```

有人可以引导我解决这个问题吗？我知道我可能不得不编写一个辅助函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:39:38.750

要使递归起作用，您只需要考虑两个问题：

*   `t1`如果是，结果应该是`Empty`什么？

*   如果`t1`不为空，但您有一个函数在应用于 的子树时可以正常工作`t1`，您将如何使用此函数来获得结果？

如果你能弄清楚这些，那么你确实有一个适用于子树的函数。

**编辑**

考虑递归情况。你有`l`（你的左子树）、`r`（你的右子树）和`v`（节点中的值）。在 FP 中，您不会更改任何这些值。您要做的是构建具有正确内容的*新*树。那么，您将如何递归地使用您的函数从这三种成分中生成新树？这并不难——实际上只有一行代码。

# java - Java BufferedImage.createGraphics 线程安全吗？

> ID：14658342
> 
> 赞同：1
> 
> 时间：2013-02-02T03:40:57.107
> 
> 标签：java, multithreading, bufferedimage

我正在运行一个 Web 服务器来检索图像并对它们进行一些操作。在单元测试中一切正常，但今天 Web 服务器变得无响应，并且在进行线程转储时，我看到很多阻塞线程，并带有以下堆栈跟踪：

```
sun.java2d.SunGraphicsEnvironment.createGraphics(java.awt.image.BufferedImage) @bci=19, li

ne=181 (Compiled frame)
 - sun.java2d.HeadlessGraphicsEnvironment.createGraphics(java.awt.image.BufferedImage) @bci=5, line=89 (Compiled frame)
 - java.awt.image.BufferedImage.createGraphics() @bci=6, line=1154 (Compiled frame)
 - (my package).getScaledInstance(java.awt.image.BufferedImage, int, int, java.lang.Object, boolean) @bci=113, line=120 (Compiled frame) 
```

它卡住的（我的）代码行是：

```
 BufferedImage tmp = new BufferedImage(w, h, type);
        Graphics2D g2 = tmp.createGraphics(); 
```

createGraphics 线程安全吗？我在官方 javadocs 中找不到任何说明它不是的文档，但它看起来确实是这样（并且考虑到它基于 AWT，如果它不是的话也不会令人惊讶）。还有什么可能导致线程像这样阻塞吗？

编辑：应该补充一点，我在 Amazon EC2 Linux ami（默认）上运行，运行最新版本的 java，

```
java -version
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

# java - 在android中裁剪图像

> ID：14658348
> 
> 赞同：0
> 
> 时间：2013-02-02T03:43:05.510
> 
> 标签：java, android, camera, tablet

我正在使用[相机中的 takePicture 功能在](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)平板电脑上连续拍摄和存储照片。我需要知道如何裁剪在调用 takePicture 时存储的数据。或者，如果这不可能，那么我需要知道如何读取图像，然后使用其他东西来裁剪它。到目前为止，我发现此问题的唯一解决方案需要打开另一个应用程序进行裁剪。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:54:11.270

您可以尝试以下代码来裁剪图像：

> ```
> final String Path = "sdcard/test.jpg";
>  Bitmap bitmap = BitmapFactory.decodeFile(Path);
>  ivSign.setImageBitmap(Bitmap.createScaledBitmap(bitmap, 150, 150, true));
>  Intent cropIntent = new Intent("com.android.camera.action.CROP");
>  // indicate image type and Uri
>  cropIntent.setDataAndType(Uri.fromFile(new File(Path)), "image/*");
>  // set crop properties
>  cropIntent.putExtra("crop", "true");
>  // indicate aspect of desired crop
>  cropIntent.putExtra("aspectX", 1);
>  cropIntent.putExtra("aspectY", 1);
>  // indicate output X and Y
>  cropIntent.putExtra("outputX", 256);
>  cropIntent.putExtra("outputY", 256);
>  // retrieve data on return
>  cropIntent.putExtra("return-data", true);
>  // start the activity - we handle returning in onActivityResult
>  startActivityForResult(cropIntent, 1); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:40:09.807

> 从下面的代码中，您将获得正确的想法。如果设备类似于**三星 Galaxy S3 并且您想在捕获后裁剪图像，有时您会遇到问题，因为它们** **在捕获图像后返回空意图。**

在这个问题上花了几个小时后，如果将来有人遇到这个问题，我终于可以通过下面的方式让它工作。

```
public class MainActivity extends Activity {
    private Uri mImageCaptureUri;
    private ImageView mImageView;

    private static final int PICK_FROM_CAMERA = 1;
    private static final int CROP_FROM_CAMERA = 2;
    private static final int PICK_FROM_FILE = 3;

    private String selectedImagePath = "";
    boolean GallaryPhotoSelected = false;

    public static String Finalmedia = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        final String[] items = new String[] { "Take from camera",
                "Select from gallery" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.select_dialog_item, items);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setTitle("Select Image");
        builder.setAdapter(adapter, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) { // pick from
                                                                    // camera
                if (item == 0) {
                    String storageState = Environment.getExternalStorageState();

                    if (storageState.equals(Environment.MEDIA_MOUNTED)) {
                        Intent intent = new Intent(
                                MediaStore.ACTION_IMAGE_CAPTURE);
                        // intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                        // mImageCaptureUri);
                        // if (hasImageCaptureBug()) {

                        String path = Environment.getExternalStorageDirectory()
                                .getName()
                                + File.separatorChar
                                + System.currentTimeMillis() + ".jpg";
                        File file = new File(path);
                        // mImageCaptureUri = Uri.fromFile(new File(
                        // Environment.getExternalStorageDirectory(),
                        // "tmp_avatar_"
                        // + String.valueOf(System
                        // .currentTimeMillis())
                        // + ".jpg"));
                        Log.i("TAG", "Final  path" + path);
                        try {
                            if (file.exists() == false) {
                                file.getParentFile().mkdirs();
                                file.createNewFile();
                            }

                        } catch (IOException e) {
                            Log.e("TAG", "Could not create file.", e);
                        }
                        mImageCaptureUri = Uri.fromFile(file);
                        intent.putExtra(
                                android.provider.MediaStore.EXTRA_OUTPUT,
                                mImageCaptureUri);
                        // } else {
                        // intent.putExtra(
                        // android.provider.MediaStore.EXTRA_OUTPUT,
                        // android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                        // }

                        try {
                            // intent.putExtra("return-data", true);
                            startActivityForResult(intent, PICK_FROM_CAMERA);
                        } catch (ActivityNotFoundException e) {
                            e.printStackTrace();
                        }
                    } else {
                        new AlertDialog.Builder(MainActivity.this)
                                .setMessage(
                                        "External Storeage (SD Card) is required.\n\nCurrent state: "
                                                + storageState)
                                .setCancelable(true).create().show();
                    }

                } else { // pick from file
                    Intent intent = new Intent();

                    intent.setType("image/*");
                    intent.setAction(Intent.ACTION_GET_CONTENT);

                    startActivityForResult(Intent.createChooser(intent,
                            "Complete action using"), PICK_FROM_FILE);
                }
            }
        });

        final AlertDialog dialog = builder.create();

        Button button = (Button) findViewById(R.id.btn_crop);
        mImageView = (ImageView) findViewById(R.id.iv_photo);

        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.show();
            }
        });
    }

    public boolean hasImageCaptureBug() {

        // list of known devices that have the bug
        ArrayList<String> devices = new ArrayList<String>();
        devices.add("android-devphone1/dream_devphone/dream");
        devices.add("generic/sdk/generic");
        devices.add("vodafone/vfpioneer/sapphire");
        devices.add("tmobile/kila/dream");
        devices.add("verizon/voles/sholes");
        devices.add("google_ion/google_ion/sapphire");

        return devices.contains(android.os.Build.BRAND + "/"
                + android.os.Build.PRODUCT + "/" + android.os.Build.DEVICE);

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode != RESULT_OK)
            return;

        switch (requestCode) {
        case PICK_FROM_CAMERA:
            Log.i("TAG", "Inside PICK_FROM_CAMERA");
            // mImageCaptureUri = data.getData();
            // Bitmap bm1 = (Bitmap) data.getExtras().get("data");
            // mImageView.setImageBitmap(bm1);
            // Bundle extras1 = data.getExtras();
            // Bitmap bm1 = (Bitmap) extras1.get("data");
            // mImageView.setImageBitmap(bm1);

            /*
             * try { if (hasImageCaptureBug()) { Log.i("TAG", "Inside Bug");
             * selectedImagePath = String.valueOf(System .currentTimeMillis()) +
             * ".jpg"; File fi = new File(
             * Environment.getExternalStorageDirectory(), selectedImagePath);
             * try { mImageCaptureUri = Uri
             * .parse(android.provider.MediaStore.Images.Media
             * .insertImage(getContentResolver(), fi.getAbsolutePath(), null,
             * null)); if (!fi.delete()) { Log.i("logMarker",
             * "Failed to delete " + fi); } } catch (FileNotFoundException e) {
             * e.printStackTrace(); } } else { mImageCaptureUri =
             * data.getData(); } } catch (Exception e) { Log.i("TAG",
             * "Inside Bug"); selectedImagePath =
             * String.valueOf(System.currentTimeMillis()) + ".jpg"; File fi =
             * new File(Environment.getExternalStorageDirectory(),
             * selectedImagePath); try { mImageCaptureUri = Uri
             * .parse(android.provider.MediaStore.Images.Media
             * .insertImage(getContentResolver(), fi.getAbsolutePath(), null,
             * null)); if (!fi.delete()) { Log.i("logMarker",
             * "Failed to delete " + fi); } } catch (FileNotFoundException e1) {
             * e1.printStackTrace(); } }
             */

            String path = mImageCaptureUri.getPath();
            Log.i("TAG",
                    "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!After capture path "
                            + path);

            doCrop();

            break;

        case PICK_FROM_FILE:
            mImageCaptureUri = data.getData();
            Log.i("TAG",
                    "After Crop mImageCaptureUri " + mImageCaptureUri.getPath());
            GallaryPhotoSelected = true;
            doCrop();

            break;

        case CROP_FROM_CAMERA:
            Bundle extras = data.getExtras();

            selectedImagePath = mImageCaptureUri.getPath();

            Log.i("TAG", "After Crop selectedImagePath " + selectedImagePath);

            if (GallaryPhotoSelected) {
                selectedImagePath = getRealPathFromURI(mImageCaptureUri);
                Log.i("TAG", "Absolute Path " + selectedImagePath);
                GallaryPhotoSelected = true;
            }

            Finalmedia = selectedImagePath;

            if (extras != null) {
                // Bitmap photo = extras.getParcelable("data");
                Log.i("TAG", "Inside Extra " + selectedImagePath);
                Bitmap photo = (Bitmap) extras.get("data");

                selectedImagePath = String.valueOf(System.currentTimeMillis())
                        + ".jpg";

                Log.i("TAG", "new selectedImagePath before file "
                        + selectedImagePath);

                File file = new File(Environment.getExternalStorageDirectory(),
                        selectedImagePath);

                try {
                    file.createNewFile();
                    FileOutputStream fos = new FileOutputStream(file);
                    photo.compress(Bitmap.CompressFormat.PNG, 95, fos);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(this,
                            "Sorry, Camera Crashed-Please Report as Crash A.",
                            Toast.LENGTH_LONG).show();
                }

                selectedImagePath = Environment.getExternalStorageDirectory()
                        + "/" + selectedImagePath;
                Log.i("TAG", "After File Created  " + selectedImagePath);

                Bitmap bm = decodeFile(selectedImagePath);
                mImageView.setImageBitmap(bm);
            }

            /*
             * File f = new File(mImageCaptureUri.getPath());
             * 
             * if (f.exists()) f.delete();
             */

            break;

        }
    }

    public static Bitmap decodeFile(String path) {
        int orientation;
        try {
            if (path == null) {
                return null;
            }
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            // while (true) {
            // if (width_tmp / 2 < REQUIRED_SIZE
            // || height_tmp / 2 < REQUIRED_SIZE)
            // break;
            // width_tmp /= 2;
            // height_tmp /= 2;
            // scale++;
            // }
            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            Bitmap bm = BitmapFactory.decodeFile(path, o2);
            Bitmap bitmap = bm;

            ExifInterface exif = new ExifInterface(path);

            orientation = exif
                    .getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

            Log.e("ExifInteface .........", "rotation =" + orientation);

            // exif.setAttribute(ExifInterface.ORIENTATION_ROTATE_90, 90);

            Log.e("orientation", "" + orientation);
            Matrix m = new Matrix();

            if ((orientation == ExifInterface.ORIENTATION_ROTATE_180)) {
                m.postRotate(180);
                // m.postScale((float) bm.getWidth(), (float) bm.getHeight());
                // if(m.preRotate(90)){
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                m.postRotate(90);
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                m.postRotate(270);
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            }
            return bitmap;
        } catch (Exception e) {
            return null;
        }

    }

    public String getRealPathFromURI(Uri contentUri) {
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    private void doCrop() {
        final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();

        Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setType("image/*");

        List<ResolveInfo> list = getPackageManager().queryIntentActivities(
                intent, 0);

        int size = list.size();

        if (size == 0) {
            Toast.makeText(this, "Can not find image crop app",
                    Toast.LENGTH_SHORT).show();

            return;
        } else {

            intent.setData(mImageCaptureUri);
            intent.setClassName("com.android.camera",
                    "com.android.camera.CropImage");
            intent.putExtra("outputX", 100);
            intent.putExtra("outputY", 100);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("scale", true);
            intent.putExtra("return-data", true);
            // startActivityForResult(intent, CROP_FROM_CAMERA);

            if (size == 1) {
                Intent i = new Intent(intent);
                ResolveInfo res = list.get(0);

                i.setComponent(new ComponentName(res.activityInfo.packageName,
                        res.activityInfo.name));

                startActivityForResult(i, CROP_FROM_CAMERA);
            } else {
                for (ResolveInfo res : list) {
                    final CropOption co = new CropOption();

                    co.title = getPackageManager().getApplicationLabel(
                            res.activityInfo.applicationInfo);
                    co.icon = getPackageManager().getApplicationIcon(
                            res.activityInfo.applicationInfo);
                    co.appIntent = new Intent(intent);

                    co.appIntent
                            .setComponent(new ComponentName(
                                    res.activityInfo.packageName,
                                    res.activityInfo.name));

                    cropOptions.add(co);
                }

                CropOptionAdapter adapter = new CropOptionAdapter(
                        getApplicationContext(), cropOptions);

                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("Choose Crop App");
                builder.setAdapter(adapter,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int item) {
                                startActivityForResult(
                                        cropOptions.get(item).appIntent,
                                        CROP_FROM_CAMERA);
                            }
                        });

                builder.setOnCancelListener(new DialogInterface.OnCancelListener() {
                    @Override
                    public void onCancel(DialogInterface dialog) {

                        if (mImageCaptureUri != null) {
                            getContentResolver().delete(mImageCaptureUri, null,
                                    null);
                            mImageCaptureUri = null;
                        }
                    }
                });

                AlertDialog alert = builder.create();

                alert.show();
            }
        }
    }
} 
```

# django - Django - 找到警告来自的模块？

> ID：14658349
> 
> 赞同：1
> 
> 时间：2013-02-02T03:43:13.357
> 
> 标签：django, django-testing, django-manage.py

这是我的测试输出。我不知道在哪里设置了错误的 DateTimeField，因为我只能看到：/home/workspace/ticktockgo/venv/local/lib/python2.7/site-packages/django/db/models/fields/**初始化**.py

这对于缩小问题不是很有用。如何获取有关导致警告的原因的更多详细信息？堆栈跟踪会很好！

谢谢你的帮助！

```
python -W manage.py test

Creating test database for alias 'default'...
............................................................................................................................................................................................................................................./home/workspace/ticktockgo/venv/local/lib/python2.7/site-packages/django/conf/urls/defaults.py:3: PendingDeprecationWarning: django.conf.urls.defaults is deprecated; use django.conf.urls instead
  PendingDeprecationWarning)
/home/workspace/ticktockgo/venv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py:808: RuntimeWarning: DateTimeField received a naive datetime (2013-02-01 00:00:00) while time zone support is active.
  RuntimeWarning)
/home/workspace/ticktockgo/venv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py:808: RuntimeWarning: DateTimeField received a naive datetime (2013-02-01 23:59:59.999999) while time zone support is active.
  RuntimeWarning)
/home/workspace/ticktockgo/venv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py:761: RuntimeWarning: DateTimeField received a naive datetime (2013-01-31 00:00:00) while time zone support is active.
  RuntimeWarning)
/home/workspace/ticktockgo/venv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py:761: RuntimeWarning: DateTimeField received a naive datetime (2013-02-02 00:00:00) while time zone support is active.
  RuntimeWarning)
/home/workspace/ticktockgo/venv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py:761: RuntimeWarning: DateTimeField received a naive datetime (2013-03-01 00:00:00) while time zone support is active.
  RuntimeWarning)
..............ss.s..............................................................................................
----------------------------------------------------------------------
Ran 491 tests in 20.825s

OK (skipped=3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:29:48.783

替换为用于查找和显示当前堆栈帧[`warnings.showwarning`](http://docs.python.org/2/library/warnings.html#warnings.showwarning)的函数。[`traceback`](http://docs.python.org/2/library/traceback.html)

# boolean-expression - 用德摩根定律简化布尔表达式

> ID：14658352
> 
> 赞同：2
> 
> 时间：2013-02-02T03:44:18.503
> 
> 标签：boolean-expression, demorgans-law

我需要帮助使用德摩根定律简化以下布尔表达式：

一个）`[ (AB)' + (CD)' ]'`

和

b)`[(X+Y)' + (X+Y') ]'`

请显示一些步骤，以便我自己完成其他步骤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:57:43.157

**a)** 第一步是最外层的否定：分发它。

```
((AB)')'*((CD)')' 
```

你看我们有双重否定，这意味着表达式本身。(p')' = p 因此

```
ABCD

[ (AB)' + (CD)' ]'  --> ABCD 
```

**b)**

分配最外层的否定：

```
((X+Y)')'(X+Y')' 
```

摆脱双重否定：

```
(X+Y)(X+Y')' 
```

再次，分配否定（表达式外部的否定）：

```
(X+Y)(X'Y) 
```

当你分配 (X+Y) 时，我们得到

```
XX'Y + YX'Y 
```

由于析取的第一部分有 XX'，所以表达式 XX'Y 等于 0（假）。表达式中同一事物的多个实例本身就是同一事物。ppp = p。因此：0 + YX' --> YX'

```
[ (X+Y)' + (X+Y') ]' --> YX' 
```

我很抱歉非正式的语言:) 希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T03:51:25.273

包括以下步骤：

a: [ (AB)' + (CD)' ]' = (AB)'' * (CD)'' = (AB) * (CD) = ABCD

b: [ (X+Y)' + (X+Y') ]' = (X+Y)'' * (X+Y')' = (X+Y) * (X'*Y) .. 简化这进一步依赖于分配属性。

# google-apps-script - 如何为 Google 表单生成预填表单 URL

> ID：14658353
> 
> 赞同：8
> 
> 时间：2013-02-02T03:44:46.750
> 
> 标签：google-apps-script, google-docs, google-docs-api

我正在寻找一种编程方式来自动生成谷歌表单的预填充 URL。

在最近的一次更新中，Google 向 Google Docs 引入了一个新的 Forms 产品。如果您在电子表格中打开工具菜单，您会看到一些新选项。

![带有旧版表单的工具菜单](../Images/135df3e056a27123095d4c423f845db2.png)

在新的表单响应菜单中，一个选项是“获取预填 URL”。这将打开一个对话框，其中包含您可以填写的表单版本，当您填写时`submit`，您会收到一个 URL，该 URL 可用于打开一个 Live Form，其中包含您预先填写好的数据并等待您。URL 看起来像这样......

```
https://docs.google.com/forms/d/--Form-ID--/viewform?entry.1094330118=Something&entry.1471717973=stack@example.com&entry.540962741&entry.787941281&entry.1873343651 
```

表单中的问题具有固定的身份，例如`entry.1094330118`。它们可以预先填充一个值 ( `entry.1094330118=Something`) 或空白 ( `entry.7879412`)。

在应用程序脚本中，我想为我的表单用户生成这些预填充的 URL，以便我可以提供它们以进行更新。我的用户不是应用程序域的成员，因此我没有嵌入*编辑您的响应*链接的选项。

如果我能得到有关表单的信息，我就能拼凑出 URL。虽然我可以通过 UI 创建一个 URL，并对其进行剖析以获取该表单的信息，但我想要一个适用于任意表单的解决方案。

1.  如何以编程方式确定问题 ID？
2.  对于新的 Forms 产品，我是否可以通过任何应用程序脚本 API 使用该表单？（我知道`getFormURL()`——我不是这个意思。）
3.  有了问题 ID，我可以获得有关问题的更多信息吗？（问题文本、类型等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T16:57:49.503

我需要类似的东西让用户去编辑他们的回复，看看这里：[http ://productforums.google.com/forum/#!topic/docs/LSKKCR3VHC8](http://productforums.google.com/forum/#!topic/docs/LSKKCR3VHC8)

复制/粘贴以下代码：

```
function assignEditUrls() {
var form = FormApp.openById('1MonO-uooYhARHsr0xxxxxxxxxxxxxxxxxxxxx');
//enter form ID here

  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Form Responses');

    //Change the sheet name as appropriate
  var data = sheet.getDataRange().getValues();
  var urlCol = 4; // column number where URL's should be populated; A = 1, B = 2 etc
  var responses = form.getResponses();
  var timestamps = [], urls = [], resultUrls = [];

  for (var i = 0; i < responses.length; i++) {
    timestamps.push(responses[i].getTimestamp().setMilliseconds(0));
    urls.push(responses[i].getEditResponseUrl());
  }
  for (var j = 1; j < data.length; j++) {

    resultUrls.push([data[j][0]?urls[timestamps.indexOf(data[j][0].setMilliseconds(0))]:'']);
  }
  sheet.getRange(2, urlCol, resultUrls.length).setValues(resultUrls);  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:22:13.207

目前这是不可能的，但此请求正在[此处](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2383)的问题跟踪器上进行跟踪。请在此处添加您的用例并注意更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-14T11:56:24.267

我发现无法从表单 ID 本身创建预填充的 URL。如果表单已经有答案是可能的：

```
 var form = FormApp.openById('1nGvvEzQHN1n-----_your_for_id_----zemoiYQA');
  var responses = form.getResponses();
  Logger.log(responses[0].toPrefilledUrl()); 
```

# asp.net-mvc - ASP.NET MVC 显示以前选择的单选（当存在 2x 单选按钮时）

> ID：14658355
> 
> 赞同：0
> 
> 时间：2013-02-02T03:45:18.123
> 
> 标签：asp.net-mvc

我有：

```
<label class="radio inline">
@Html.RadioButtonFor(model => model.ViewModelForCar.CarTypeID, CarType.CoolTypeID) Cool car
</label>
<label class="radio inline">
@Html.RadioButtonFor(model => model.ViewModelForCar.CarTypeID, CarType.LameTypeID) Lame car
</label> 
```

但是，当提交表单并且结果无效并且页面重新加载时，错误的单选始终将第一个单选标记为已选，即使我将第二个单选标记为已选。我不热衷于使用单选按钮列表，因为我有自定义标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:50:53.250

MVC 不知道如何重新绑定模型，因为您有两个名称相同的单选按钮。

将单选按钮修改为

```
<label class="radio inline">
@Html.RadioButtonFor(model => model.ViewModelForCar.CoolTypeID, CarType.CoolTypeID) Cool car
</label>
<label class="radio inline">
@Html.RadioButtonFor(model => model.ViewModelForCar.LameTypeID, CarType.LameTypeID) Lame car
</label> 
```

会给你两个不同的单选按钮。然后，您可以处理在控制器中选择了哪个单选按钮。

# google-chrome-extension - chrome 扩展创建选项卡在 chrome 中不起作用

> ID：14658359
> 
> 赞同：0
> 
> 时间：2013-02-02T03:46:13.633
> 
> 标签：google-chrome-extension, tabs

我的扩展程序稍后运行良好但是当我将我的 chrome 版本升级到 24 时要求我将清单编辑到版本 2 不安装扩展程序而不是 popup.html 中的链接不适合我

```
<a href="" onclick=aa();>link 1</a><br>

function aa(){
chrome.tabs.create({'url': 'http://aaaa.com'});
} 
```

> 错误：拒绝执行内联脚本，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

真挚地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:21:45.713

根据修订后的 Chrome 安全策略，Chrome 扩展程序将不再能够在您的 popup.html 中使用内联 javascript

[http://developer.chrome.com/extensions/contentSecurityPolicy.html#jsexecution](http://developer.chrome.com/extensions/contentSecurityPolicy.html#jsexecution)

您必须删除内联 javascript，将其放入 JS 文件中，然后从 HTML 页面加载它。

# java - 合并排序问题

> ID：14658362
> 
> 赞同：0
> 
> 时间：2013-02-02T03:46:24.753
> 
> 标签：java, algorithm, mergesort

我一直在尝试实现我的“自己的”MergeSort，它似乎适用于较小的值，但我正在以随机顺序在 1-100,000 的数组上尝试它，并在我打印回来时混合了一些奇怪的数字。我已经跟踪了 10 次，但没有运气。

```
public static void mergeSort(int[] array){
    if(array.length > 1){

       int midPoint = array.length/2; 

       int[] leftArray = new int[midPoint];
       int[] rightArray = new int[array.length - midPoint];

       System.arraycopy(array, 0, leftArray, 0, midPoint);
       System.arraycopy(array, midPoint, rightArray, 0, array.length - midPoint);

       mergeSort(leftArray);
       mergeSort(rightArray);

       merge(leftArray, rightArray, array);
    }
}

public static void merge(int[] left, int[] right, int[] bigArray){
    int counterLeft = 0, counterRight = 0, counterNewArray = 0;

    while(counterLeft < left.length && counterRight < right.length){
        if(left[counterLeft] < right[counterRight]){
            bigArray[counterNewArray] = left[counterLeft];
            counterLeft++;
            counterNewArray++;
        }else{
            bigArray[counterNewArray] = right[counterRight];
            counterRight++;
            counterNewArray++;
        }
    }

        while(counterLeft < left.length){
                bigArray[counterNewArray] = left[counterLeft];
                counterLeft++;
        }

        while(counterRight < right.length){
                bigArray[counterNewArray] = right[counterRight];
                counterRight++;
        }

        if(bigArray.length < 500){
            System.out.println("Merged array:");
            for(int i = 0; i < bigArray.length; i++){
                System.out.println(bigArray[i]);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:58:44.837

在结束时`merge`，当你添加每一边的剩余部分时......你没有增加`counterNewArray`. 这导致一堆值被分配到一个点，相互覆盖......并留下`bigArray`无效值（零，IIRC）的尾部。

# ruby - 使用 Ruby Net::SSH 通过多个系统的代理隧道

> ID：14658363
> 
> 赞同：1
> 
> 时间：2013-02-02T03:46:41.263
> 
> 标签：ruby, ssh, net-ssh

我需要一些关于如何使用 Ruby Net::SSH 和 Net::SCP gem 通过多个系统进行代理以执行命令或复制文件的建议。

它与我之前发布的这篇文章非常相似（如果不是几乎完全相同），使用的是 linux 命令行中的基本 ssh。

[如何为各种系统编写多个 ssh 和 scp 命令脚本](https://stackoverflow.com/questions/10592212/how-to-script-multiple-ssh-and-scp-commands-to-various-systems)

例如，LOCAL 是我的本地系统。

系统 A 是连接到 LOCAL 的第二个系统

系统 B 是仅连接到系统 A 的第三个系统。此外，系统 B 被配置为仅允许系统 A 通过其 ssh 密钥进行访问。

对于来自命令行的普通 ssh，我以这种方式设置了我的 .ssh/config 文件：

```
Host systemA
        HostName        192.168.0.10
        User            A-user

Host systemB
        ProxyCommand    ssh -e none systemA exec /bin/nc %h %p 2>/dev/null
        HostName        192.168.0.11
        User            B-user
        IdentityFile    ~/.ssh/systemA_id_dsa 
```

从这一点来看，只要我的 pub key 在 sysA 的 authorized_hosts 中（假设它总是如此），并且 sysA 的 pub key 在 authorized_hosts sysB 中（相同的假设），以下将无缝工作：

```
ssh systemB 
```

我想在 Ruby 中实现这种确切的行为。我有一些类似于以下的代码：

```
require 'net/ssh'
require 'net/ssh/proxy/command'

str = 'ssh -l A-user -i /home/A-user/.ssh/id_dsa -e none 192.168.0.10 exec /bin/nc %h %p 2>/dev/null'
proxy = Net::SSH::Proxy::Command.new(str)

Net::SSH.start('192.168.0.11', 'B-user', :proxy => proxy) do |ssh|
  ssh.exec! "ls -lA"
end 
```

不幸的是，这不起作用。我收到身份验证失败。

```
~/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/lib/net/ssh.rb:201:in `start': root (Net::SSH::AuthenticationFailed) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:44:40.533

您是否验证了您的代理命令实际上可以从命令行自行运行？看来您可能混合了身份密钥的顺序。

SystemA 已经认识您（？），您不需要为其指定身份。这也基于`config`您发布的设置。

相反，对我来说，您似乎需要在命令中将 SystemA 的身份转发给 SystemB `start`：

```
Net::SSH.start('192.168.0.11', 'B-user', 
               :proxy => proxy, 
               :keys  => [ "~/.ssh/systemA_id_dsa" ] ) do |ssh|
  ssh.exec! "ls -lA"
end 
```

然后跳过只是跳过代理设置命令中的身份文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T16:08:44.763

我用 Net::SSH 解决了这个问题，但不需要外部配置文件。Net::SSH::Gateway 在我的解决方案中也很有帮助。我将解决方案包装成一个名为[tunneler](https://rubygems.org/gems/tunneler)的宝石。

```
require "tunneler"

# Create SSH tunnel
tunnel = Tunneler::SshTunnel.new(bastion_user, bastion_host, {:keys => [bastion_key]})

# Establish remote connection
destination_host_connection = tunnel.remote(destination_user, destination_host, {:keys => [destination_key]})

# Upload file to destination host via tunnel
destination_host_connection.scp(local_file_path, destination_file_path)

# Execute command on destination host via tunnel
response = destination_host_connection.ssh(command) 
```

# actionscript-3 - 将参数传递给 mouseEvent 函数

> ID：14658365
> 
> 赞同：1
> 
> 时间：2013-02-02T03:47:22.580
> 
> 标签：actionscript-3, flash, mouseevent, movieclip

这在其他语言中似乎很简单，但我不明白这个错误。我有 7 个按钮，当您单击它们时，我希望每个按钮将我的画廊影片剪辑带到某个帧。

```
错误：1067：将 int 类型的值隐式强制转换为不相关的类型 flash.events:MouseEvent。
错误：1136：参数数量不正确。预计2。
错误：1067：将 void 类型的值隐式强制转换为不相关的类型 Function。

```

有什么帮助吗？

```
function gotoImage(event:MouseEvent, frameParam:int):void
{
MovieClip(this.root).gallery.gotoAndStop(frameParam);
}

t1.addEventListener(MouseEvent.CLICK, gotoImage(1));
t2.addEventListener(MouseEvent.CLICK, gotoImage(2));
t3.addEventListener(MouseEvent.CLICK, gotoImage(3));
t4.addEventListener(MouseEvent.CLICK, gotoImage(4));
t5.addEventListener(MouseEvent.CLICK, gotoImage(5));
t6.addEventListener(MouseEvent.CLICK, gotoImage(6));
t7.addEventListener(MouseEvent.CLICK, gotoImage(7)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:50:14.123

你的代码有两件事：

1.  首先，在 ActionScript 中，事件处理程序始终具有相同的签名：

    ```
    function someHandler(e:Event):void { .. } 
    ```

    有时`Event`参数是 的更具体的子类`Event`，例如`MouseEvent`，但总是只有一个参数。

2.  该`addEventListener`方法需要一个函数本身，而不是调用函数的结果。

    ```
    // Here's a function:
    function multiply(i1:int, i2:int):int { return i1 * i2; }

    // Here's assigning the result of **invoking** a function:
    var result:int = multiply(2,3); 

    // Here's assigning a **function itself** to a variable:
    var f:Function = multiply;

    // You can invoke the function via the variable f in two different ways:
    var result1 = f(2,3);
    var result2 = f.apply(null, [2,3]); 
    ```

因此，您需要更改代码以遵循上述要点。您必须通过以下两种方式之一将按钮与跳转到特定帧相关联：

1.  **简单但重复**：为每个按钮使用单独的处理程序，将框架硬编码到每个处理程序中。

    1a。命名函数（最冗长）：

    ```
    function onT1Click(e:MouseEvent):void {               
        MovieClip(this.root).gallery.gotoAndStop(1);
    }

    t1.addEventListener(MouseEvent.CLICK, onT1Click);
    // etc. etc. 
    ```

    1b。匿名函数：

    ```
    t1.addEventListener(MouseEvent.CLICK, function(e:Event):void { 
        MovieClip(this.root).gallery.gotoAndStop(1);
    });
    // etc. etc. 
    ```

2.  **更优雅**：使用相同的处理程序，并将按钮和框架之间的关联存储在其他地方，例如在字典中。如果你坚持你的命名约定，你甚至可以在一个`for`循环中填充字典，按名称获取按钮：

    ```
    var buttonToFrame:Dictionary = new Dictionary();
    for(var i:int = 1; i < 8; i++) {
        var btn:Button = this["t" + i.toString()];
        buttonToFrame[btn] = i;
        btn.addEventListener(MouseEvent.CLICK, onClick);
    }

    function onClick(e:MouseEvent):void {
        var btn:Button = Button(e.currentTarget);
        var frameNum:int = buttonToFrame[btn];
        MovieClip(this.root).gallery.gotoAndStop(frameNum);
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:18:42.443

改变这个

```
t1.addEventListener(MouseEvent.CLICK, function(me:MouseEvent):void{ gotoImage(me, 1)});
t2.addEventListener(MouseEvent.CLICK, function(me:MouseEvent):void{ gotoImage(me, 2)}); 
```

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T02:08:27.133

这可以通过迂回的方法来实现。对于事件处理程序，使用**返回嵌套匿名函数的函数**。

```
private var textFieldA:TextField = new TextField;
private var textFieldB:TextField = new TextField;

public function setParameterizedTextWhenTextFieldsAreClicked ():void {
    addChild(textFieldA);
    textFieldA.text = 'Text field A';
    textFieldA.addEventListener(MouseEvent.CLICK, showCustomMessage("One"));

    addChild(textFieldB);
    textFieldB.text = 'Text field B';
    textFieldB.y = 20;
    textFieldB.addEventListener(MouseEvent.CLICK, showCustomMessage("Two"));
    // NOTE: We must use strongly referenced listeners because weakly referenced 
    // listeners **will get garbage collected** because we're returning
    // an anonymous function, which gets defined in the global namespace and  
    // thus, the garbage collector does not have anything pointing to it.
}

private function showCustomMessage (message:String):Function {
    // NOTE: You can store the following function to a class variable
    // to keep it in memory, which would let you use weakly referenced 
    // listeners when using this as an event handler. Many people 
    // would find that awkward. I would discourage that.
    return function (e:MouseEvent):void {
        var textField:TextField = e.target as TextField;
        textField.text = message; // "message" argument is available because 
                                  // this function's scope is kept in memory.
    }
} 
```

请记住，使用匿名函数和依赖保存在内存中的函数范围似乎会带来垃圾收集的复杂性。

# php - codeigniter：将数据从视图传递到控制器不起作用

> ID：14658371
> 
> 赞同：1
> 
> 时间：2013-02-02T03:48:08.620
> 
> 标签：php, json, codeigniter, jquery

我的视图文件中有这段代码（searchV.php）：

```
<html>
    <head> 
        <title>Search Domains</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
            function noTextVal(){
                $("#domaintxt").val("");
            }

            function searchDom(){
                var searchTxt = $("#searchTxt").val();
                var sUrl = $("#url").val();

                $.ajax({
                    url : sUrl + "/searchC",
                    type : "POST",
                    dataType : "json",
                    data :  { action : "searchDomain", searchTxt : searchTxt },
                    success : function(dataresponse){
                        if(dataresponse == "found"){
                            alert("found");
                        }
                        else{
                            alert("none");
                        }
                    }

                });
            }
        </script>
    </head>
    <body>

        <form id="searchForm">
                <input type="text" id="searchTxt" name="searchTxt" onclick="noTextVal()" >
                <input type="submit" id="searchBtn" name="searchBtn" value="Search" onclick="searchDom()" />
                <input type="hidden" id="url" name="url" value="<?php echo site_url(); ?>" />
        </form>

        <?php
            var_dump($domains);
            if($domains!= NULL){
                foreach ($domains->result_array() as $row){
                    echo $row['domain'] . " " . $row['phrase1'];
                    echo "<br/>";
                 }
            }

        ?>

    </body>
</html> 
```

下面是我的控制器（searchC.php）：

```
<?php

class SearchC extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('searchM');
    }

    public function index()
    {
        $data['domains'] = $this->searchM->getDomains();
        $this->load->view('pages/searchV', $data);

        switch(@$_POST['action']){
            case "searchDomain":
                echo "test";
                $this->searchDomains($_POST['searchTxt']);
                break;
            default:
                echo "test2";
                echo "<br/>action:" . ($_POST['action']);
                echo "<br/>text:" . $_POST['searchTxt'];
        }
    }

    public function searchDomains($searchInput)
    {
        $data['domains'] = $this->searchM->getDomains($searchInput);
        $res = "";

        if($data['domains']!=NULL){ $res = "found"; }
        else{ $res = "none"; }

        echo json_encode($res);
    }
} //end of class SearchC

?> 
```

现在我已经使用 switch 对控制器进行了测试，以检查传递的 json 数据是否成功，但它总是显示未定义..这里有什么问题？有人可以解释为什么控制器中无法识别数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:01:34.477

您没有通过 url 传递数据，因此您需要使用它`$this->input->post()`来检索数据。

例如，

```
public function searchDomains()
{
    $data['domains'] = $this->searchM->getDomains($this->input->post('searchTxt'));
    $res = "";

    if($data['domains']!=NULL){ $res = "found"; }
    else{ $res = "none"; }

    echo $res;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:34:40.273

我相信数据已正确返回，但问题在于您的代码检查。$.ajax 函数解析 JSON 并将其转换为 JavaScript 对象。因此，您需要按如下方式修改您的代码：

```
if(dataresponse.res == "found"){ // Changed from dataresponse to dataresponse.res
   alert("found");
}
else{
  alert("none");
} 
```

这应该适合你。

# mysql - 递归mysql选择？

> ID：14658378
> 
> 赞同：7
> 
> 时间：2013-02-02T03:49:05.873
> 
> 标签：mysql, recursion

我看到了[这个答案](https://stackoverflow.com/a/13186486/34537)，我希望他是不正确的，就像有人不正确地告诉主键在一列上，我不能在多列上设置它。

这是我的桌子

```
create table Users(id INT primary key AUTO_INCREMENT,
    parent INT,
    name TEXT NOT NULL,
    FOREIGN KEY(parent)
    REFERENCES Users(id)
);

+----+--------+---------+
| id | parent | name    |
+----+--------+---------+
|  1 |   NULL | root    |
|  2 |      1 | one     |
|  3 |      1 | 1down   |
|  4 |      2 | one_a   |
|  5 |      4 | one_a_b |
+----+--------+---------+ 
```

我想选择用户 id 2 并递归，所以我得到它的所有直接和间接孩子（所以 id 4 和 5）。

我如何以这样的方式编写它？我在 postgresql 和 sqlserver 中看到了递归。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-02T05:36:59.623

```
CREATE DEFINER = 'root'@'localhost'
PROCEDURE test.GetHierarchyUsers(IN StartKey INT)
BEGIN
  -- prepare a hierarchy level variable 
  SET @hierlevel := 00000;

  -- prepare a variable for total rows so we know when no more rows found
  SET @lastRowCount := 0;

  -- pre-drop temp table
  DROP TABLE IF EXISTS MyHierarchy;

  -- now, create it as the first level you want... 
  -- ie: a specific top level of all "no parent" entries
  -- or parameterize the function and ask for a specific "ID".
  -- add extra column as flag for next set of ID's to load into this.
  CREATE TABLE MyHierarchy AS
  SELECT U.ID
       , U.Parent
       , U.`name`
       , 00 AS IDHierLevel
       , 00 AS AlreadyProcessed
  FROM
    Users U
  WHERE
    U.ID = StartKey;

  -- how many rows are we starting with at this tier level
  -- START the cycle, only IF we found rows...
  SET @lastRowCount := FOUND_ROWS();

  -- we need to have a "key" for updates to be applied against, 
  -- otherwise our UPDATE statement will nag about an unsafe update command
  CREATE INDEX MyHier_Idx1 ON MyHierarchy (IDHierLevel);

  -- NOW, keep cycling through until we get no more records
  WHILE @lastRowCount > 0
  DO

    UPDATE MyHierarchy
    SET
      AlreadyProcessed = 1
    WHERE
      IDHierLevel = @hierLevel;

    -- NOW, load in all entries found from full-set NOT already processed
    INSERT INTO MyHierarchy
    SELECT DISTINCT U.ID
                  , U.Parent
                  , U.`name`
                  , @hierLevel + 1 AS IDHierLevel
                  , 0 AS AlreadyProcessed
    FROM
      MyHierarchy mh
    JOIN Users U
    ON mh.Parent = U.ID
    WHERE
      mh.IDHierLevel = @hierLevel;

    -- preserve latest count of records accounted for from above query
    -- now, how many acrual rows DID we insert from the select query
    SET @lastRowCount := ROW_COUNT();

    -- only mark the LOWER level we just joined against as processed,
    -- and NOT the new records we just inserted
    UPDATE MyHierarchy
    SET
      AlreadyProcessed = 1
    WHERE
      IDHierLevel = @hierLevel;

    -- now, update the hierarchy level
    SET @hierLevel := @hierLevel + 1;

  END WHILE;

  -- return the final set now
  SELECT *
  FROM
    MyHierarchy;

-- and we can clean-up after the query of data has been selected / returned.
--    drop table if exists MyHierarchy;

END 
```

它可能看起来很麻烦，但要使用它，请执行

```
call GetHierarchyUsers( 5 ); 
```

（或任何您想要查找 UP 层次树的键 ID）。

前提是从您正在使用的一个 KEY 开始。然后，以此为基础再次加入 users 表，但基于第一个条目的 PARENT ID。找到后，更新临时表，以免在下一个周期再次尝试加入该键。然后继续，直到找不到更多的“父”ID 密钥。

无论嵌套有多深，这都会将整个记录层次结构返回到父级。但是，如果您只想要 FINAL 父级，则可以使用 @hierlevel 变量仅返回文件中添加的最新一个，或 ORDER BY 和 LIMIT 1

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-18T22:13:34.863

我知道上面可能有更好和更有效的答案，但这个片段给出了一个稍微不同的方法，并提供了 - 祖先和孩子。

这个想法是不断地将相关的rowIds插入到临时表中，然后获取一行来寻找它的亲戚，冲洗重复直到所有的行都被处理完。查询可以优化为仅使用 1 个临时表。

这是一个有效的[**sqlfiddle**](http://sqlfiddle.com/#!2/814a13/1)示例。

```
 CREATE TABLE Users
        (`id` int, `parent` int,`name` VARCHAR(10))//

    INSERT INTO Users
        (`id`, `parent`, `name`)
    VALUES  
        (1, NULL, 'root'),
        (2, 1, 'one'),
        (3, 1, '1down'),
        (4, 2, 'one_a'),
        (5, 4, 'one_a_b')//

    CREATE PROCEDURE getAncestors (in ParRowId int) 
    BEGIN 
       DECLARE tmp_parentId int;
       CREATE TEMPORARY TABLE tmp (parentId INT NOT NULL);
       CREATE TEMPORARY TABLE results (parentId INT NOT NULL);
       INSERT INTO tmp SELECT ParRowId;
       WHILE (SELECT COUNT(*) FROM tmp) > 0 DO
         SET tmp_parentId = (SELECT MIN(parentId) FROM tmp);
         DELETE FROM tmp WHERE parentId = tmp_parentId;
         INSERT INTO results SELECT parent FROM Users WHERE id = tmp_parentId AND parent IS NOT NULL;
         INSERT INTO tmp SELECT parent FROM Users WHERE id = tmp_parentId AND parent IS NOT NULL;
       END WHILE;
       SELECT * FROM Users WHERE id IN (SELECT * FROM results);
    END//

    CREATE PROCEDURE getChildren (in ParRowId int) 
    BEGIN 
       DECLARE tmp_childId int;
       CREATE TEMPORARY TABLE tmp (childId INT NOT NULL);
       CREATE TEMPORARY TABLE results (childId INT NOT NULL);
       INSERT INTO tmp SELECT ParRowId;
       WHILE (SELECT COUNT(*) FROM tmp) > 0 DO
         SET tmp_childId = (SELECT MIN(childId) FROM tmp);
         DELETE FROM tmp WHERE childId = tmp_childId;
         INSERT INTO results SELECT id FROM Users WHERE parent = tmp_childId;
         INSERT INTO tmp SELECT id FROM Users WHERE parent = tmp_childId;
       END WHILE;
       SELECT * FROM Users WHERE id IN (SELECT * FROM results);
    END// 
```

用法：

```
CALL getChildren(2);

    -- returns 
    id  parent  name
    4   2   one_a
    5   4   one_a_b

CALL getAncestors(5);

    -- returns 
    id  parent  name
    1   (null)  root
    2   1   one
    4   2   one_a 
```

# storyboard - Segue 在第一次点击时传递空值。之后完美运行。为什么？

> ID：14658380
> 
> 赞同：0
> 
> 时间：2013-02-02T03:49:43.863
> 
> 标签：storyboard, xcode4.5, segue

当谈到 xcode（3 周前开始学习）时，我是一个完全的菜鸟，PHP 是我的事。无论如何，当有人点击表格视图中的单元格（（正在填充来自 json 文件的数据）的单元格时，我试图将值从 MasterViewController 传递给 DetailViewController。问题是我首先得到一个空值时间。之后它就完美地工作了。

这是我的 cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

FetchDetails* item = _feed.items[indexPath.row];

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

UILabel *itemTitle = (UILabel *)[cell viewWithTag:101];
itemTitle.text = [NSString stringWithFormat:@"%@", item.prodTitle];

UILabel *itemDate = (UILabel *)[cell viewWithTag:102];
itemDate.text = [NSString stringWithFormat:@"%@", item.prodDate];

UILabel *itemUser = (UILabel *)[cell viewWithTag:103];
itemUser.text = [NSString stringWithFormat:@"by %@", item.prodUser];

UIImageView *itemThumb = (UIImageView *)[cell viewWithTag:100];
itemThumb.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString: item.prodImage]]];
return cell;
} 
```

didSelectRowAtIndexPath。**item.prodId 是 json 的一部分，但未显示在原型单元格上。这是我在 detailviewcontroller 上需要的值**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 FetchDetails* item = _feed.items[indexPath.row];
_selectedItem = [NSString stringWithFormat:@"%@", item.prodId];
} 
```

和 prepareForSegue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"showItemDetail"]) {

    DetailViewController *destVieController = segue.destinationViewController;
    destVieController.passedValue = _selectedItem;
    NSLog(@"%@", _selectedItem);

  }
} 
```

在阅读了几个教程后，我想出了所有这些代码。我不知道为什么它第一次不起作用，并且在第二次点击时完美地工作，依此类推。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:59:23.963

解决了。我不得不停止使用 didSelectRowAtIndexpath 并在 prepareForSegue 中做所有事情。

这是我在 segue 上使用的代码：

```
 UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:self.tableView.indexPathForSelectedRow];
    UILabel *label = (UILabel *)[cell viewWithTag:99];

    DetailViewController *detailVC = segue.destinationViewController;
    detailVC.passedId = [label text]; 
```

如您所见，我使用 viewWithTag 从标记的标签中获取了 prodId。

# ios - iOS应用程序在带有日志的NSURLConnection上崩溃，但我不能重复，帮帮我

> ID：14658381
> 
> 赞同：-1
> 
> 时间：2013-02-02T03:49:44.513
> 
> 标签：ios, crash, nsurlconnection

我不能重复崩溃，而是将应用程序提交给苹果，始终使用相同的崩溃日志。请帮我分析一下是什么问题。详细的崩溃日志如下。非常感谢！

苹果测试团队提示：这发生在您的应用程序被使用时： - 在 Wi-Fi 上 - 在蜂窝网络上

```
Date/Time:       2013-02-01 11:32:40.293 -0800
OS Version:      iOS 6.1 (10B143)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00760040
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   ???                             0x00760040 0 + 7733312
1   ProtocolBuffer                  0x3866d1b6 -[PBRequester connectionDidFinishLoading:] + 1042
2   Foundation                      0x33bb7912 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 14
3   Foundation                      0x33af7764 -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 196
4   Foundation                      0x33af7680 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 56
5   CFNetwork                       0x32f5864c ___delegate_didFinishLoading_block_invoke_0 + 24
6   CFNetwork                       0x32f57d30 ___withDelegateAsync_block_invoke_0 + 52
7   CFNetwork                       0x32f80010 ___performAsync_block_invoke_068 + 16
8   CoreFoundation                  0x331c1aca CFArrayApplyFunction + 174
9   CFNetwork                       0x32f8046e RunloopBlockContext::perform() + 70
10  CFNetwork                       0x32ee445e MultiplexerSource::perform() + 186
11  CoreFoundation                  0x332508f4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
12  CoreFoundation                  0x33250158 __CFRunLoopDoSources0 + 208
13  CoreFoundation                  0x3324ef2a __CFRunLoopRun + 642
14  CoreFoundation                  0x331c2238 CFRunLoopRunSpecific + 352
15  CoreFoundation                  0x331c20c4 CFRunLoopRunInMode + 100
16  GraphicsServices                0x36da0336 GSEventRunModal + 70
17  UIKit                           0x350de2b4 UIApplicationMain + 1116
18  Maoye                           0x00003ca2 0x1000 + 11426
19  Maoye                           0x00003c5c 0x1000 + 11356

Thread 1:
0   libsystem_kernel.dylib          0x3b460d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3b3aead6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3b3ae7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3b3ae680 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x3b4505d0 kevent64 + 24
1   libdispatch.dylib               0x3b38bd22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x3b387374 _dispatch_mgr_thread + 32

Thread 3:
0   libsystem_kernel.dylib          0x3b460d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3b3aead6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3b3ae7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3b3ae680 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3b44fe30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3b44ffd0 mach_msg + 48
2   CoreFoundation                  0x332502b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x3324f02c __CFRunLoopRun + 900
4   CoreFoundation                  0x331c2238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x331c20c4 CFRunLoopRunInMode + 100
6   WebCore                         0x391c1390 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3b3b90de _pthread_start + 306
8   libsystem_c.dylib               0x3b3b8fa4 thread_start + 4

Thread 5 name:  Dispatch queue: URLConnection
Thread 5:
0   libsystem_kernel.dylib          0x3b4505d0 kevent64 + 24
1   libdispatch.dylib               0x3b38b94e _dispatch_update_kq + 178
2   libdispatch.dylib               0x3b38734c _dispatch_mgr_wakeup + 40
3   libdispatch.dylib               0x3b3899a8 _dispatch_wakeup + 20
4   libdispatch.dylib               0x3b389938 _dispatch_queue_push_list_slow2 + 16
5   libdispatch.dylib               0x3b389afa _dispatch_queue_drain + 78
6   libdispatch.dylib               0x3b387678 _dispatch_queue_invoke + 40
7   libdispatch.dylib               0x3b38a610 _dispatch_root_queue_drain + 208
8   libdispatch.dylib               0x3b38a7d4 _dispatch_worker_thread2 + 88
9   libsystem_c.dylib               0x3b3ae7ee _pthread_wqthread + 358
10  libsystem_c.dylib               0x3b3ae680 start_wqthread + 4

Thread 6:
0   libsystem_kernel.dylib          0x3b44fe30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3b44ffd0 mach_msg + 48
2   CoreFoundation                  0x332502b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x3324f02c __CFRunLoopRun + 900
4   CoreFoundation                  0x331c2238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x331c20c4 CFRunLoopRunInMode + 100
6   Foundation                      0x33ae65be -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Maoye                           0x0003aab2 0x1000 + 236210
8   Maoye                           0x0007fbc8 0x1000 + 519112
9   Maoye                           0x00034958 0x1000 + 211288
10  Maoye                           0x00036656 0x1000 + 218710
11  libsystem_c.dylib               0x3b3b90de _pthread_start + 306
12  libsystem_c.dylib               0x3b3b8fa4 thread_start + 4

Thread 7 name:  com.apple.NSURLConnectionLoader
Thread 7:
0   libsystem_kernel.dylib          0x3b44fe30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3b44ffd0 mach_msg + 48
2   CoreFoundation                  0x332502b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x3324f02c __CFRunLoopRun + 900
4   CoreFoundation                  0x331c2238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x331c20c4 CFRunLoopRunInMode + 100
6   Foundation                      0x33b0f888 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x33b9322c __NSThread__main__ + 968
8   libsystem_c.dylib               0x3b3b90de _pthread_start + 306
9   libsystem_c.dylib               0x3b3b8fa4 thread_start + 4

Thread 8:
0   libsystem_kernel.dylib          0x3b460d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3b3aead6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3b3ae7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3b3ae680 start_wqthread + 4

Thread 9:
0   libsystem_kernel.dylib          0x3b45f2cc __connect + 8
1   Maoye                           0x00027b7a 0x1000 + 158586
2   Maoye                           0x00029e0a 0x1000 + 167434
3   Maoye                           0x00029db8 0x1000 + 167352
4   Maoye                           0x000078da 0x1000 + 26842
5   Maoye                           0x00009bd6 0x1000 + 35798
6   Maoye                           0x0003408e 0x1000 + 209038
7   Maoye                           0x00036656 0x1000 + 218710
8   libsystem_c.dylib               0x3b3b90de _pthread_start + 306
9   libsystem_c.dylib               0x3b3b8fa4 thread_start + 4

Thread 10:
0   libsystem_kernel.dylib          0x3b4606a4 __semwait_signal + 24
1   libsystem_c.dylib               0x3b3be1be nanosleep + 138
2   libsystem_c.dylib               0x3b41ee4e sleep + 42
3   Maoye                           0x0001e190 0x1000 + 119184
4   libsystem_c.dylib               0x3b3b90de _pthread_start + 306
5   libsystem_c.dylib               0x3b3b8fa4 thread_start + 4

Thread 11 name:  com.apple.CFSocket.private
Thread 11:
0   libsystem_kernel.dylib          0x3b460594 __select + 20
1   CoreFoundation                  0x33254474 __CFSocketManager + 676
2   libsystem_c.dylib               0x3b3b90de _pthread_start + 306
3   libsystem_c.dylib               0x3b3b8fa4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000001    r1: 0x01090350      r2: 0x00760041      r3: 0x00000007
    r4: 0x38d2fa5e    r5: 0x01090350      r6: 0x00000001      r7: 0x2fdfed0c
    r8: 0x01090340    r9: 0x0109b240     r10: 0x0026b5d4     r11: 0x0109b0f0
    ip: 0x3cf1b7f0    sp: 0x2fdfece8      lr: 0x0003b439      pc: 0x00760040
  cpsr: 0x200f0030 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:43:41.713

我猜你的崩溃是在方法 connectionDidFinishLoading 中。由于崩溃发生在线程 0 中，所以开头的两行给出了有关崩溃的描述。这是我从我的测试员朋友那里知道的。

1 协议缓冲区 0x3866d1b6 -[PBRequester connectionDidFinishLoading:] + 1042

# php - 如何在重新加载之间存储页面的状态？

> ID：14658389
> 
> 赞同：2
> 
> 时间：2013-02-02T03:50:58.027
> 
> 标签：php, jquery, ajax, refresh, reload

我有一个网站，通过用户单击一个按钮来加载其内容，然后单击调用一个 javascript 函数，该函数`<div>`通过使用 AJAX 和 jQuery 更改其内部 html 来仅更新中心元素的内容。

例如，当访问者想要访问我的联系页面时，他们单击联系按钮，然后通过从外部文件中提取该内容并使用它来替换 div 的内容，将 div 的内容更新为联系表单`innerHTML`。整个页面的实际地址没有改变，因为整个页面没有被重新加载，只是`innerHTML`div 的。

除此之外，我的网站使用 PHP，并且我对其进行了编码，以便通过在 url 中传递变量，可以在页面加载时将各种内容填充到 div 中。例如，`index.php?page=home`将告诉 PHP 脚本从外部文件加载主页内容，同时`index.php?page=contact`将加载联系表单。通过这种方式，搜索引擎可以通过我的站点地图中的这些链接找到每个页面及其内容。

我的问题是，如果访问者单击一个按钮并将不同的内容加载到 div 中，然后单击浏览器的重新加载按钮或按 CTRL+R，则整个页面会重新加载，并且 div 当然会恢复到其原始内容。

我的问题是，有没有办法在浏览器刷新时加载特定页面？例如，如果访问者已经加载了页面，`index.php?page=home`然后点击了联系按钮并更新了 div 内容，然后按下了浏览器的刷新按钮，我可以以某种方式编写一个将加载的脚本`index.php?page=contact`，保留页面的外观和内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:58:37.620

# 选项 1：location.hash

*更容易，但没有那么健壮。值得一看，但如果你想存储多个元素的状态，你可能需要**选项 2**。*

[**这是下面代码的演示。**](http://jsfiddle.net/tPZuS/)

**例子：**

```
function onHashChange() {
    var hash = window.location.hash;
    // Load the appropriate content based on the hash.
}

$(window).on('hashchange', onHashChange);
$(document).on('load', onHashChange);

$('#button').click(function(){
    window.location.hash = "home";
}); 
```

这样，您需要做的就是更改按钮更改的哈希值并使用`hashchange`事件处理页面加载。

* * *

# 选项 2：使用 History.js 的历史 API

*实现起来有点困难（但并不多！），但更加健壮。依赖于广泛使用的框架。*

另一种可能更简洁的方法是使用 History API。它允许您在`window.location`不刷新页面的情况下进行更改，允许您使用 JavaScript 处理这些更改。

虽然并非所有浏览器都支持该 API，但您可以使用[History.js](https://github.com/balupton/History.js/)`location.hash` ，它在需要时提供回退。[这是一个演示。](http://balupton.github.com/history.js/demo/)

**来自 History.js 的 github 页面：**

> History.js**在所有浏览器中优雅地支持 HTML5 History/State API（pushState、replaceState、onPopState）**。包括对数据、标题、replaceState 的持续支持。**支持 jQuery**、MooTools 和 Prototype。对于 HTML5 浏览器，这意味着您可以直接修改 URL，而无需再使用哈希。对于 HTML4 浏览器，它将恢复使用旧的 onhashchange 功能。

**History.js 的示例：**

```
function onStateChange() {
    var state = window.History.getState();
    // Handle state accordingly.

    // Fetch the data passed with pushState.
    var data = state.data;
    var title = state.title;
    var url = state.url;
}

// Check the initial state.
$('document').on('load', onStateChange);

// Listen for state changes.
window.History.Adapter.bind(window, 'statechange', onStateChange);

// Any data you want to be passed with the state change.
var stateObj = { variable : 'value' } 

// Change state using pushState()
window.History.pushState(stateObj, "State name", "/page.html"); 
```

大多数浏览器都会忽略状态名称。第三个参数是添加到 URL 的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:34:42.270

几周前，我针对这种情况发布了一个 jQuery 插件，当开发人员想要将 ajax 内容添加到页面并动态更改 URL 时。

该插件是**jQuery 动态 URL** [https://github.com/promatik/jQuery-Dynamic-URL](https://github.com/promatik/jQuery-Dynamic-URL)

这里有一个演示：http: [//promatik.pt/github/dynamic-url/](http://promatik.pt/github/dynamic-url/)

* * *

加载 ajax 内容时，可以**推送**URL 的路径，例如：

`$.pushPath( 0 /*level*/, "contact" )`
您的网站立即变为：`example.com/contact`

或者在您的情况下，您可以使用：
`$.pushVar( "page", "contact" )`
您的网站立即变为：`example.com/?page=contact`

这个插件还允许你这样做：
想象一下你给我一个链接：`example.com/?page=contact`

在索引页面中，`$.getVars( )`将返回：`{"page" : "contact"}`
因此，您可以使用此信息基于此查询构建您的页面。

你可以用这个插件做更多的事情，比如监听 onPopState 事件（这意味着用户在浏览器中返回或前进，所以你可以基于它重建你的页面）只需尝试**[演示](http://promatik.pt/github/dynamic-url)**......

* * *

*重要信息*：此插件适用于除 IE9 以外的所有现代浏览器，部分适用，您仍然可以访问 url 数据`example.com/?page=contact`（并基于此查询构建您的页面），但在用户体验期间不能动态修改 URL。

# ios - Spotify cocoalibspotify 离线状态设置为 1 但所有曲目都停留在等待状态

> ID：14658390
> 
> 赞同：1
> 
> 时间：2013-02-02T03:51:00.633
> 
> 标签：ios, spotify, cocoalibspotify-2.0

我正在尝试让来自 Spotify 的曲目在我的 iOS 应用程序中离线播放。我已经阅读了几篇关于这个问题的帖子，但没有一个建议对我有用。

问题是标记为下载的播放列表卡住了所有“等待”下载的曲目。我可以通过创建播放列表、添加一些曲目并标记播放列表以供下载，在全新的应用程序安装中定期重新创建它。曲目按预期下载。然后我通过点击主页按钮来后台应用程序并在应用程序托盘中终止应用程序。然后我启动应用程序并成功登录 - attemptLoginWithUserName:existingCredential: 我创建另一个播放列表，添加更多曲目并标记为离线。新播放列表的离线状态显示已下载，但所有曲目都在等待。

我试过了：

1）flushCaches：播放列表下载后

2）flushCaches：在applicationDidEnterBackground

3) 在 applicationDidEnterBackground 中注销：

4) 在应用程序WillTerminate 中注销：

5) 将标记为离线播放的不良播放列表设置为关闭，刷新缓存并再次将标记为离线播放设置为关闭。

到目前为止，一旦播放列表卡住，下载另一个播放列表的唯一方法就是删除应用程序并重新安装。

有没有人对如何解决这个问题有其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:34:23.723

这是一个已知问题，更新将很快解决。同时，如果播放列表卡住了，您可以删除 CocoaLibSpotify 创建的缓存文件夹，这距离重新安装只有一步之遥，但这并不是一个有用的解决方法。

# haskell - Haskell 解析错误

> ID：14658393
> 
> 赞同：0
> 
> 时间：2013-02-02T03:51:13.560
> 
> 标签：haskell

我不确定我做错了什么。我被卡住了，我无法再取得进展。

我将我在代码中收到的错误消息放在注释中。如果时间允许，有人可以检查我的评估功能吗？我想我在做一些非常错误的事情。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T21:20:16.960

您的`Let`处理程序将需要使用新绑定扩展环境，然后使用该新环境评估表达式。

您的环境是名称、`Value`对的列表，但`Let`包含名称、`Exp`对的列表，因此您需要将`Exp`s转换为`Value`s 以扩展环境。请注意，`eval`将a 转换`Exp`为`Value`.

但是，由于s`Let`可以容纳多个绑定，因此您需要决定s 是并行计算还是顺序计算（lisp和lisp`Exp`之间的区别）。绑定会影响后续绑定的值吗？根据该问题的答案，您会发现自己使用或来转换列表。`let``let*``map``foldl`

您对 s 的评估存在`Primitive`双重问题。首先，您使用的模式只匹配一个元素的列表，但您的原语显然采用不同数量的参数。该模式不应使用列表语法，因为`Primitive`构造函数保证在该位置会有一个列表。相反，您应该使用匹配任何内容的模式（例如 plain `y`）。其次，该`prim`函数需要一个`Value`s 列表，但`Primitive`构造函数包含一个 s 列表`Exp`，因此您需要转换它们（但是，由于参数的评估不会影响环境，您将使用`map`）。

为了让你朝着正确的方向前进，在：

```
eval e (Primitive x [y]) = prim x [eval e y] 
```

该`[y]`模式将仅匹配单个元素列表，该元素绑定到`y`，并将`[eval e y]`生成单个元素列表。您想要的是与整个列表匹配的模式，然后您希望通过应用于该列表的`eval e`每个元素来转换该列表。

的也`eval`有`If`问题。条件、then 和 else 都是 type `Exp`，但是 eval 应该返回 a `Value`，所以你必须转换一些东西。最后，haskell`if`希望条件是一个 haskell `Bool`，但你的条件是一个`Exp`。您将需要将 评估`Exp`为`Value`，然后以某种方式`Bool`从`Value`. 您希望`Number`和`String` `Value`s 在您的语言中表现得像`Bool`s（如 python），还是应该只让`Bool` `Value`s 表现得像`Bool`s？

最后，最后，如果您有任何类型错误（例如尝试`Add`a`String`到 a `Number`），或者您为原语提供错误数量的参数，您将从`prim`函数中获得模式匹配失败（并且可能在您的代码中）将不得不写`Bool`从你的`If`条件中提取一个）。这可能是也可能不是你想要的......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T11:05:16.400

正如 Thomas M. DuBuisson 已经说过的，您的 let 表达式的语法无效。其次，你真的必须知道函数接受什么类型的参数以及它返回什么类型。例如，您不能将 Exp 与 Value 混合使用 - 在需要 Exp 类型的情况下，您总是传递 Exp 类型的值等。

```
eval :: Env -> Exp -> Value
-- the return type is Value
-- what are you trying to do here ? extract Value from x ...
eval e (Let [x] y) = eval e $ snd x
-- ... or from y ? Both x & y are of Exp type.
eval e (Let [x] y) = eval e y 
```

您的代码中还有更多类型错误：

```
eval e (Primitive x [y]) = prim x [y]
-- prim expects 2nd argument of [Value] type so it can be written as
eval e (Primitive x [y]) = prim x [eval e y]
-- dtto, mixing different types is wrong
eval e (If x y z) = if x then y else z
eval e (If x y z) = let Bool x' = eval e x in
                        if x' then (eval e y) else (eval e z) 
```

最后 main 期望`IO ()`作为返回类型，因此您必须以某种方式反映这一点，例如打印 eval 结果：

```
print $ eval [("y", (Number 40))] (Let [("x", (Literal (Number 2)))] (Primitive Add [(Variable "x"), (Variable "y")])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T08:07:00.067

你想要类似的东西

```
let e' = {- extend env with x -} in eval e' y 
```

# javascript - HTML5/JS 在最大化窗口上降低 FPS

> ID：14658394
> 
> 赞同：2
> 
> 时间：2013-02-02T03:51:15.340
> 
> 标签：javascript, html, canvas

我正在使用画布玩 HTML5/JavaScript，每当浏览器窗口最大化时，我注意到 FPS 会大幅下降。最初我以为它是在我正在使用的特定浏览器上，但我测试了所有浏览器 IE、FF、OP、CH 在最大化至少 50% 或更多时每秒都会丢帧。任何提示为什么会这样？谢谢。

# java - Java 强制关闭程序

> ID：14658397
> 
> 赞同：1
> 
> 时间：2013-02-02T03:52:01.607
> 
> 标签：java, awt, shutdown, shutdown-hook

如何在退出时以编程方式强制关闭程序。我添加了调用 a 的关闭钩子，`System.exit(0)`但执行它似乎有问题。`javaw.exe`即使 Jframe 已关闭并执行了关闭挂钩，该进程仍会继续在内存中运行。

此外，当我手动关闭运行程序的批处理文件时，Windows 会抛出强制关闭消息。图片：http: [//i.imgur.com/gy57OEV.png](http://i.imgur.com/gy57OEV.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T03:57:56.640

调用`System.exit()`关闭挂钩是没有意义的。JVM 已经决定在调用钩子之前关闭。`System.exit()`我想从关机钩子调用*可能*会有问题......

据推测，您的应用程序没有关闭的原因是您的应用程序已经创建了其他线程，并且它们仍然处于活动状态。

处理此问题的一种方法是让 JFrame 关闭事件（或关闭按钮）触发一些启动 JVM 关闭的操作。您的`f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`代码是做到这一点的一种方法。它会调用 System.exit ...并且在 JVM 关闭时运行任何关闭挂钩。

另一种方法是将其他线程标记为“守护进程”线程，这意味着它们不会阻止 JVM 决定关闭。（通常，如果没有活动的非守护线程，JVM 会拔掉插头。对于单线程应用程序，这意味着您的“主”线程......）

* * *

有趣的是，这就是为什么 System.exit() 调用在关闭挂钩中存在问题的原因。

javadoc 说这`System.exit()`相当于`System.getRuntime().exit()`，而后者的 javadoc 说：

> "*如果在虚拟机开始其关闭序列后调用此方法，则如果正在运行关闭挂钩，则此方法将无限期阻塞。* "

因此，如果您`System.exit()` *在*关闭挂钩中调用，这足以导致挂钩无限期地阻塞。这将导致关机序列停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T19:29:03.687

`System.exit()`在`JOptionPane`以下情况下正常工作：

```
Object[] options={"YES","NO"};
int selection= JOptionPane.showOptionDialog(this, "Message input", "Title",
        JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE, null, options, 
        options[1]);
if(selection==JOptionPane.YES_OPTION){
    reset();
}
else if(selection==JOptionPane.NO_OPTION){
    System.exit(0);
} 
```

但是，如上所述`f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`，我的主要方法中仍然存在

# javascript - Javascript / jQuery - 无论如何要简写这个或减少钝

> ID：14658398
> 
> 赞同：1
> 
> 时间：2013-02-02T03:52:02.210
> 
> 标签：javascript, jquery

所以，我用一些原型方法设置了这个构造函数，因为我需要将行为（这个对象创建的）应用于一些差异。元素，我想知道是否有比执行以下操作更好的方法。

```
var MAINFUNC = function(opts){
 this.options = {
      item1  : 'somevalue'
  },
  this.init(opts);
}

MAINFUNC.prototype = {
   someFunc1: function(){
       // do stuff
    },
   someFunc2: function(){
       // do stuff
    },
   someFunc3: function(){
         // do stuff
   },
init: function(data){
      $.extend(this.options, data);
      this.someFunc1();
     }
 };
var obj1Create =  new MAINFUNC({ someoptions });
var obj2Create = new MAINFUNC({ someoptions });
var obj2Create = new MAINFUNC({ someoptions }); 
```

所以，它的最后三个 obj 实例似乎有点迟钝。也许我是不正确的，但我认为有一种更精致的方式来做到这一点。是的，每个 obj*Create 都代表一个差异元素，它需要 MAINFUNC 提供的行为。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T03:55:49.540

```
var MAINFUNC = function(opts)
{
   var m = Object.create(MAINFUNC.prototype);
   m.options = { ... };
   m.init(opts);
   return m;
};

var o = [{someoptions}, {someoptions}, {someoptions}].map(MAINFUNC);
// objects are all now in array 
```

这种方法的一个附带好处是`MAINFUNC`无论您是否使用它都可以工作`new`。这使它更易于管理，尤其是在收集功能时。

# java - 我应该将文件名存储在 Java 枚举还是属性文件中

> ID：14658400
> 
> 赞同：0
> 
> 时间：2013-02-02T03:52:17.297
> 
> 标签：java, rest

我想存储文件名，随着新文件的添加，这些文件名会不断变化。当需要支持新的“文件”时，我正在寻找服务器代码的最小更改我的想法是将它们存储在属性文件或Java枚举中，但仍然认为哪种方法更好。

我正在使用 REST 并在 URL 中包含“文件类型”。示例休息网址：

**主机名/文件内容/类型**

其中 TYPE 的值可以是以下任何一个：standardFileNames1,standardFileNames2,randomFileName1,randomFileName2

我已经使用 TYPE 对文件进行分组，以便在添加新文件时最大限度地减少 url 的变化。由于安全问题，不想在 URL 中包含文件名。

我的想法是这样的：

## 作为枚举：

```
public enum FileType  
{
    standardFileNames1("Afile_en", "Afile_jp"),
    standardFileNames2("Bfile_en","Bfile_jp"),
    randomFileName1("xyz"),
    randomFileName2("abc"),
    ...
    ...
} 
```

## 具有作为属性文件：

```
standardFileNames1=Afile_en,Afile_jp
standardFileNames2=Bfile_en,Bfile_jp
randomFileName1=xyz 
randomFileName2=abc 
```

我知道在属性中使用它可以节省每次更改的构建工作，但仍然想知道您的观点以找出所有考虑因素的最佳解决方案。

谢谢！阿基莱什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:44:36.063

```
I often use property file + enum combination. Here is an example:

public enum Constants {
    PROP1,
    PROP2;

    private static final String PATH            = "/constants.properties";

    private static final Logger logger          = LoggerFactory.getLogger(Constants.class);

    private static Properties   properties;

    private String          value;

    private void init() {
        if (properties == null) {
            properties = new Properties();
            try {
                properties.load(Constants.class.getResourceAsStream(PATH));
            }
            catch (Exception e) {
                logger.error("Unable to load " + PATH + " file from classpath.", e);
                System.exit(1);
            }
        }
        value = (String) properties.get(this.toString());
    }

    public String getValue() {
        if (value == null) {
            init();
        }
        return value;
    }

}
Now you also need a property file (I ofter place it in src, so it is packaged into JAR), with properties just as you used in enum. For example:

constants.properties:

#This is property file...
PROP1=some text
PROP2=some other text
Now I very often use static import in classes where I want to use my constants:

import static com.some.package.Constants.*;
And an example usage

System.out.println(PROP1);

Source:http://stackoverflow.com/questions/4908973/java-property-file-as-enum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:56:12.300

我的建议是保留属性或配置文件并编写通用代码来获取文件列表并在 java 中解析。因此，每当有新文件出现时，服务器端都不会发生变化，而是您将在属性或配置文件中添加一个条目。

# java - Java：substring.matches 数字

> ID：14658404
> 
> 赞同：0
> 
> 时间：2013-02-02T03:53:15.800
> 
> 标签：java, string, methods, numbers, substring

我正在尝试检查我的 teleInput 字符串中的子字符串是否包含数字，但我似乎无法让它返回 true。结果总是以错误告终，我做错了什么。

```
String teleInput = "(555)555-5555";
boolean returntT = teleInput.substring(1,3).matches(".*[0-9].*"); 
```

我是一个极端的初学者，所以我不知道我是否遗漏了一些明显的东西，比如混合方法，或者我的其余代码可能有问题，无论哪种方式，我都非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T21:29:59.913

您的问题是您的子字符串 - 您只返回**两个**字符：第二个参数是索引，但不包括最后一个字符。要获得 3 个字符，您需要：

```
teleInput.substring(1,4) 
```

所以试试这个（注意匹配只需要检查它是“所有数字”，因为长度已经知道是3）：

```
teleInput.substring(1,4).matches("\\d*"); 
```

或者只是忘记子字符串并单独使用匹配项：

```
teleInput.matches(".\\d{3}.*"); 
```

这是“任何字符，然后是 3 个数字，然后是任何东西”的正则表达式。

但是您可以在一行中验证整个输入：

```
teleInput.matches("(.\\d{3}){3}\\d"); 
```

您可能需要阅读正则表达式才能理解这种模式，但它确实有效！

* * *

注意：matches() 必须匹配*整个*字符串才为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T21:22:47.427

而不是这一行：

```
boolean returntT = teleInput.substring(1,3).matches(".*[0-9].*"); 
```

你应该这样做：

```
boolean returntT = teleInput.substring(1,3).matches("[0-9]+"); 
```

或这个：

```
boolean returntT = teleInput.substring(1,3).matches("\\d{2}"); 
```

正则表达式`[0-9]+`将确保给定的输入中只有 1 个或多个数字。有关正则表达式的好教程，请阅读：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T07:45:10.800

如果要检查字符串中的第二个字符是否为数字，可以这样做：

```
String teleInput = "(555)555-5555";

boolean returntT = teleInput.substring(1,2).matches("[0-9]"); 
```

# javascript - 如何使用 jQuery 向 Dictionary.com 的 REST API 发出 AJAX 请求？

> ID：14658406
> 
> 赞同：3
> 
> 时间：2013-02-02T03:53:34.200
> 
> 标签：javascript, jquery, ajax, rest

Dictionary.com 完全没有提供有关如何从中获取数据的文档。我正在尝试使用 jQuery 的 ajax 请求，但这些都不起作用。

他们提供了一个我应该能够使用的 URL。我将在下面提供。

```
http://api-pub.dictionary.com/v001?vid=<VID>&type=random&site=dictionary 
```

他们还提供了一把钥匙，我假设我把它放在了`<VID>`现场。

有人可以告诉我我做错了什么吗？我将在下面提供我正在使用的代码：

```
$("#btnGetData").click(function() {

  $.ajax({
    url: "http://api-pub.dictionary.com/",
    type: "GET",
    data: "v001?vid=<VID>&type=random&site=dictionary",
    success: function() { alert("success") },
  });

}); 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T05:56:29.537

您没有正确传递数据。请求网址也是`http://api-pub.dictionary.com/v001`. 尝试这个：

```
$("#btnGetData").click(function() {
  $.ajax({
    url: "http://api-pub.dictionary.com/v001",
    type: "GET",
    dataType: "jsonp",  //For external apis
    data: {"vid": <VID>,
          "type":"random"
          "site": "dictionary"},
    success: function() { 
       alert("success") },
  });
}); 
```

**更新：**也许您被与@thordarson note [相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)`dataType: "jsonp"`阻止，在这种情况下添加：到您的 ajax 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T05:39:35.753

# 可能性 1

您无权访问他们的 API。根据他们的[API 页面](http://content.dictionary.com/api?__utma=1.480045750.1358727224.1358727224.1359783921.2&__utmb=1.1.10.1359783921&__utmc=1&__utmx=-&__utmz=1.1358727224.1.1.utmcsr=google%257cutmccn=%28organic%29%257cutmcmd=organic%257cutmctr=%28not%252520provided%29&__utmv=-&__utmk=64341935)，他们对授予谁访问其 API 的权限非常有选择性。

> 我们对我们的 API 合作伙伴有选择性，并根据具体情况批准使用以及制定条款。如果您有兴趣使用我们的 API，请直接与我们联系 [...]。

# 可能性 2

您被[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)阻止。浏览器通常对 JavaScript 跨不同域发出的请求非常严格。这可以使用[跨域资源共享](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)绕过。这需要配置您请求的服务器，因此在这种情况下它是不可行的。

最好的办法是创建一个请求 URL 的服务器端脚本，然后使用 AJAX 请求文件。

**PHP中的示例，我们称之为`request_dictionary.php`：**

```
<?php

    $vid = "Your API key";
    $type = $_GET['type'];
    $site = $_GET['dictionary'];

    $request_url = "http://api-pub.dictionary.com/v001?vid=$vid&type=$type&site=$site";

    echo file_get_contents($request_url);

?> 
```

**注意：**您可能需要更改它以满足您的需要（错误处理、404、缓存等）。*此代码未经测试。*

**然后更改您的 jQuery 以便它请求您的文件。**

```
$("#btnGetData").click(function() {

  $.ajax({
    url: "/request_dictionary.php",
    type: "GET",
    data: "type=random&site=dictionary",
    success: function() { alert("success") },
  });

}); 
```

# 警告

在没有代理的情况下使用 AJAX 调用（如*可能性 2*中所述）将暴露您的 API 密钥。这违反了[Dictionary.com 的 API 服务条款](http://developer.dictionary.com/help/terms)。

> 2.1 Dictionary.com 将为您的客户应用程序分配和交付应用程序密钥以访问 API。所有呼叫都必须包含此类应用程序密钥。应用程序密钥与每个客户应用程序及其所有版本、升级和更新唯一关联。**应用程序密钥是这些条款和条件中定义的机密信息。您必须以任何第三方无法访问的安全、嵌入式方式维护和保存应用程序密钥。**Dictionary.com 可以随时完全撤销应用程序密钥。Dictionary.com 可能会阻止尝试使用无效或已撤销的应用程序密钥访问 API。

我已经更新了*可能性 2*中的代码，通过将 API 密钥保存在 PHP 文件中来隐藏它。

* * *

**更新/注意：**仅传递`dataType: 'jsonp'`以启用跨域调用是不够的。响应服务器需要使用`Access-Control-Allow-Origin`包含您的域（或包含您的域的规则）的标头进行响应。作为请求者，您无法控制任何此类配置。

**更新/注 2：**在调查您的请求 URL 中返回的标头后，我看不到`Access-Control-Allow-Origin`. 这意味着即使您可以访问他们的 API，也无法使用 AJAX 访问它。完整标题如下：

```
GET /v001?vid=%3CVID%3E&type=random&site=dictionary HTTP/1.1[CRLF]
Host:            api-pub.dictionary.com[CRLF]
Connection:      close[CRLF]
User-Agent:      Web-sniffer/1.0.44 (+http://web-sniffer.net/)[CRLF]
Accept-Encoding: gzip[CRLF]
Accept:          text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8[CRLF]
Accept-Language: en-US,en;q=0.8[CRLF]
Accept-Charset:  ISO-8859-1,UTF-8;q=0.7,*;q=0.7[CRLF]
Cache-Control:   no-cache[CRLF]
Referer:         http://web-sniffer.net/[CRLF] 
```

# javascript - 使用javascript删除关键字时onkeyup不起作用？

> ID：14658410
> 
> 赞同：-1
> 
> 时间：2013-02-02T03:55:12.363
> 
> 标签：javascript, jquery, json, callback

我有一个示例代码：

```
<input type="text" class="" id="key" name="key" value="ex: IPhone 4S" 
    onfocus="cleanPhoneBox(this);" 
    onblur="fillPhoneBox(this);" 
    onkeyup="javascript:search_phones('demo.php');"> 
```

和 javascript

```
function cleanPhoneBox( obj ) {
    if( obj.value == obj.defaultValue ) {
        obj.value = '';
        obj.className = '';
    }
}

function fillPhoneBox( obj ) {
    if( obj.value == '' ) {
        obj.value = obj.defaultValue;
        obj.className = 'search_tool_tip';
    }
}

var lasttimeout = 0;
function search_phones(ajaxdomain) {
    search_string = $('#key').val();    
    if(search_string.length >= 2) {
        if( lasttimeout ) clearTimeout(lasttimeout);
        lasttimeout = setTimeout('search_phones_call(\"'+ajaxdomain+'\", \"'+search_string+'\")', 300 );
    }
}

function search_phones_call( ajaxdomain, search_string ) {
    $('#searchPhoneResultsContainer').empty();
    $.ajax({
        type:"GET",
        url : ajaxdomain + '?jsoncallback=?',
        data: {
            action: "dialog",
            type: "searchPhonesJSON",
            query: search_string,
            itemsCount: 100,
            nocache: 96316638
        },
        dataType:'json'
    }); 
} 
```

当我用关键字搜索时：“ `iphone 4`”是结果调用json ajax OK，但是当`delete keyword`，并且`search again`是结果不能调用ajax json 回调时，如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:13:16.803

您正在动态构建一个`setTimeout`调用 Javascript`eval`命令的函数调用字符串。`setTimeout`出于这种原因，最好避免使用字符串参数。

尝试让 JQuery 管理回调：

```
 $.ajax({
        type:"GET",
        url : ajaxdomain,
        cache : false,
        data: {
            action: "dialog",
            type: "searchPhonesJSON",
            query: search_string,
            itemsCount: 100
        },
        dataType:'jsonp'
    })
    .then(function(data)
    {
        // what you want to do with the server response goes here
    }); 
```

但是，如果您只想修复`setTimeout`代码，请使用匿名函数：

```
lasttimeout = setTimeout(function()
{
    search_phones_call(ajaxdomain, search_string)
}, 300); 
```

# php - 使用单引号时出现 PDO 错误

> ID：14658411
> 
> 赞同：0
> 
> 时间：2013-02-02T03:55:29.070
> 
> 标签：php, mysql, pdo

所以我多年来一直在寻找这个问题的答案，但找不到解决方案。

错误是：

```
Invalid parameter number: number of bound variables does not match number of tokens 
```

当然我知道这个错误是什么意思，但我不明白为什么只有当我用单引号引起来时它才会抛出它。

这是我的代码：

```
$query = "UPDATE $DbTableName SET name=':name' WHERE id=:Id";
$result = $dbc->prepare($query); //Prepare query

$values = array('Id' => $Id, 'name' => $name); //Prepare values
$result->execute($values); //Execute Query 
```

查看 :name 周围的单引号

如果我删除这些引号，则没有 PDO 错误，而是 MySQL 错误，因为字符串需要用单引号括起来。

我怎样才能解决这个问题？

将名称设置为不带引号的 bob 时出现 MySQL 错误：

```
#1054 - Unknown column 'bob' in 'field list' 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:01:15.033

您需要`param`使用 PHP 手册中的示例指定 确实是一个字符串：

```
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < ? AND colour = ?');
$sth->bindParam(1, $calories, PDO::PARAM_INT);
$sth->bindParam(2, $colour, PDO::PARAM_STR); 
```

从技术上讲，我相信`execute`对 的类型做出最好的猜测判断，但是通过使用`bindParam`or`bindValue`你可以明确地说明类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:19:17.913

这是完全重写的答案。起初我被另一个答案中的推理所愚弄，并没有对问题本身给予适当的关注。

所以这里有一个简单的答案：

> 我不明白为什么只有当我用单引号括起某些东西时它才会抛出它。

因为您不能在字符串中使用占位符。占位符只能表示完整的数据文字。

# r - 通过箱线图为 R 中的右删失数据绘制生命表四分位数

> ID：14658412
> 
> 赞同：0
> 
> 时间：2013-02-02T03:55:33.317
> 
> 标签：r, boxplot, survival-analysis

我有一项回顾性调查的数据。在调查时间之前没有经历过感兴趣的特定事件的个人被放入审查观察类别，其余部分未经审查。如何为这个正确的审查数据绘制箱线图，显示生命表四分位数，同时考虑审查和未审查的观察？

（我感兴趣的变量“fbi”是一个持续时间变量，因此对于未经审查的 obs 持续时间是可用的，对于审查我已经用原点到调查日期之间的时间间隔替换了持续时间“fbi”，另一个二分变量“cens”在那里承认审查和未经审查的案件。）

数据可以模拟：

```
fbi <- rpois(100,12)
cens <- sample(0:1,100,replace=T) 
test <- data.frame(fbi,cens)

> head(test)
  fbi cens
1  18    0
2  14    0
3  17    1
4  11    1
5   9    0
6  10    1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:13:25.550

使用您建议的虚拟数据以及我添加到答案中的数据，下面的行将绘制 2 个箱线图，总结`fbi`包括所有案例的变量，并仅使用未审查的案例。

```
boxplot(test$fbi,test$fbi[test$cens==0],names=c("all cases","w/out censored")) 
```

如果您更愿意将审查过的案件与未经审查的案件进行比较，您可以这样做：

```
boxplot(fbi ~ cens,data=test,names=c("not censored","censored")) 
```

# 编辑

针对下面的评论，以下使用该`NADA`库的代码是您正在寻找的吗？

```
library(NADA)
cenboxplot(test$fbi, as.logical(test$cen)) 
```

这里有关于该`cenboxplot`功能的在线文档：[http ://rss.acs.unt.edu/Rdoc/library/NADA/html/cenboxplot.html](http://rss.acs.unt.edu/Rdoc/library/NADA/html/cenboxplot.html)

# jquery - 清除“否”选择的详细说明验证功能。在“是”选择时重新启动功能

> ID：14658414
> 
> 赞同：0
> 
> 时间：2013-02-02T03:55:42.350
> 
> 标签：jquery, validation, unbind

我有一个表单，当用户单击“是”时显示详细问题，并在用户单击“否”时隐藏它。我目前拥有它，因此如果他们单击“是”，则需要详细说明问题。我的问题是，如果他们单击“是”然后单击“否”，无论我尝试什么，验证功能都不会清除。他们必须再次单击“是”并在文本区域中输入一些内容才能实际提交表单。我已经尝试了所有方法（jQuery 取消绑定、清除、删除和更改），但没有成功。我希望他们能够对他们的内心内容单击是和否，并且只有在他们的最终选择为“是”时才需要额外的文本区域。所以我需要它能够清除下的具体验证功能`$('#1yes').click(function () {`，激活`$('#affirmative1').show(1000);`时不清除。`$('#1no').click(function () {`提前谢谢你，蔡斯

这是jQuery：

```
 $('#1yes').click(function () {
              if ($('#1yes').is(':checked')) {
                  $('#affirmative1').show(1000);
                  $(function validation() {
                      $('#myform').ipValidate({

                          required: { //required is a class
                              rule: function () {
                                  return $(this).val() == '' ? false : true;
                              },
                              onError: function () {

                                  if (!$(this).parent().hasClass('element_container')) {
                                      $(this).wrap('<div class="element_container error_div"></div>').after('<span>' + $(this).attr('rel') + '</span>');
                                  } else if (!$(this).parent().hasClass('error_div')) {
                                      $(this).next().text($(this).attr('rel')).parent().addClass('error_div');
                                  }
                                  //alert('Form is ready for submit.');
                              },
                              onValid: function () {
                                  $(this).next().text('').parent().removeClass('error_div');
                                  $(this).focus();
                              }
                          },
                      });
                  });
              }
          });

          $('#1no').click(function () {
              if ($('#1no').is(':checked')) { $('#affirmative1').hide(1000); 
           //code to clear "validation" function
           }
          }); 
```

这是HTML：

```
 <div class="radio single_form_element">
        <div class="chk_div">
        <p>
          <label>1)  Do you have some involvement or financial interest that is, or could be perceived to be, in conflict with the proper discharge of your duties at the
    University?</label><br>
          <input type="radio" name="response1" value="yes" id="1yes" required>yes<br>
          <input type="radio" name="response1" value="no" id="1no" required>no
        </p>

        <div id="affirmative1" style="display:none; margin:0 4% 0 4%;">
        <fieldset>
        <p>
          <label>Describe the University-administered project and your involvement, also include information about federally-funded projects you are working on that could reasonably be affected by an outside financial interest:</label><br>
          <textarea name="comments1a" class="input_border input_width required" rel="Enter more info here!"></textarea>
        </p>
        </fieldset>

        </div>
        </div><!-- End CHK_DIV -->
    </div><!-- END SINGLE FORM ELEMENT(RADIO) --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:28:33.970

现有代码中有很多错误。唯一有效的是`required`收音机上的 html5 属性。

所有处理程序中的上下文`this`都是错误的，代码显然是从原始站点复制/粘贴的，但设置不同。

插件对象中的`radio`类不存在，插件不会基于`type=radio`.

Also`$(document).ready(function{..`是相同的，`$(function(){..`并且永远没有任何理由将一个嵌套在另一个中。根本没有理由`document.ready`为此代码提供多个。

这是一些工作代码：

```
$(document).ready(function () {

    $('input[name="response1"]').change(function () {
        var showDescription = $('#1yes').is(':checked');
        $('#affirmative1')[showDescription ? 'show':'hide'](1000);
        //$('.dependsRadio').prop('required', showDescription);
    });

    $('#myform').ipValidate({ 
        /* this class "dependsRadio" added to textarea html to make validation work*/       
        dependsRadio:{
             rule: function () {
                var yesChecked=$('#1yes').is(':checked');
                 return  yesChecked ? $(this).val() !='' :true;
            },
            onError: function () {
             alert('textarea not valid')
            },
            onValid: function () {

            }
        },
        /* class added to radio elements*/
        radioClass: { 
            rule: function () {
                return $('input[type=radio]:checked').length < 1 ? false : true;
            },
            onError: function () {
                 alert('radio not checked')
            },
            onValid: function () {

            }
        },

        submitHandler: function () {
               alert('form is valid');
            return false;/* debug mode*/
        }
    });
}); 
```

演示：http: [//jsfiddle.net/VgG4M/1/](http://jsfiddle.net/VgG4M/1/)

强烈建议将来使用带有文档的插件，这绝对没有

# java - 如何从地图中获取字符串值 在 Java 中？

> ID：14658416
> 
> 赞同：0
> 
> 时间：2013-02-02T03:55:56.003
> 
> 标签：java, collections, map

基本上，我有一个`Map<String, String[] >`包含一堆带键的字符串。如果我这样做`String value = myMap.get("keyName");`，这将返回一个`Object`而不是一个字符串，并且回显它会产生如下内容：`Ljava.lang.String;@1dfa166`。做`toString()`也无济于事。

我需要做什么才能将值作为字符串：

我的代码如下所示：

```
String value ="" + request().body().asFormUrlEncoded().get("keyName"); 
```

这里的`asFormUrlEncoded()`方法是返回`Map`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:02:12.240

您将返回一个字符串数组（声明的通用 Map 的第二个参数）。

将其更改为

`String [] values = myMap.get( "keyName" );`

并检查 values.length 以查看数组中有多少个字符串。如果它只是一个，您可以将其作为`values[0]`.

它允许字符串数组的原因是因为表单中的每个键都可以有多个值，因此它不能返回单个字符串。

# mysql - 从另一个创建 SQL 表绘制列

> ID：14658417
> 
> 赞同：0
> 
> 时间：2013-02-02T03:55:58.230
> 
> 标签：mysql, sql

我有一个包含列（primaryKey、name、age、weight）的 SQL 表，我想生成一个新表，其中包含原始数据的所有数据，但只有列（primaryKey、age）。任何人都可以为此建议 SQL 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:58:22.483

`CREATE TABLE new_tbl SELECT primary_key,age FROM orig_tbl ;` 基于[文档](http://dev.mysql.com/doc/refman/5.5/en/create-table-select.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:58:22.643

做一个触发器，所以当你插入一条记录时，它会在另一个表中插入另一个：[这是手册](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html) [这](http://www.roseindia.net/sql/trigger/mysql-trigger-after-insert.shtml)是一个例子

# python - 在wxPython中滚动文本“类似控制台”窗口？

> ID：14658418
> 
> 赞同：0
> 
> 时间：2013-02-02T03:56:02.067
> 
> 标签：python, text, scroll, wxpython, stdout

当您启动 wxPython 的 wx.App(True) 对象时，它会将 stdout/stderr 发送到弹出窗口。有没有办法将它绑定到我的 Frame 对象中的面板？请，请发布代码来做到这一点！

如果没有办法做到这一点，有没有办法创建一个滚动文本小部件，该小部件接受来自记录器的附加文本，该记录器捕获标准输出/标准错误，然后将其发送到该小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:08:12.427

您可以很容易地鸭型一个对象来重定向 stdout/err 到这里显示[http://www.blog.pythonlibrary.org/2009/01/01/wxpython-redirecting-stdout-stderr/](http://www.blog.pythonlibrary.org/2009/01/01/wxpython-redirecting-stdout-stderr/)

实际的重定向只是`sys`为您的重定向分配适当的名称

```
sys.stdout = redirect
sys.stderr = redirect 
```

# java - 从数组中调用方法

> ID：14658420
> 
> 赞同：0
> 
> 时间：2013-02-02T03:56:52.640
> 
> 标签：java, arrays, methods, call

Java中有没有办法从数组中调用方法？我想设计一个原始的棋盘游戏，我想使用一系列方法来表示游戏空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:02:31.833

也许您需要使用某种命令模式，例如

```
class Board {
   Cell[][] cells = new Cell[5][5];

   void addCell(int i, int j, Cell cell) {
     cells[i,j] = cell;
   }

   void executeCell(int i, int j) {
     cells[i,j].execute(this);
   }
}

interface Cell {
   void execute(Board board);
}

class CellImpl implements Cell {
  void execute(Board board) {
    // do your stuff here
  }
} 
```

您可以根据需要添加尽可能多的实现，只要它们实现了 Cell 接口 - board 就可以执行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T04:09:59.993

这是基本思想（命令模式）

```
static Runnable[] methods = new Runnable[10];

public static void main(String[] args) throws Exception {
    methods[0] = new Runnable() {
        @Override
        public void run() {
            System.out.println("method-0");
        }
    };
    methods[1] = new Runnable() {
        @Override
        public void run() {
            System.out.println("method-1");
        }
    };
    ...
    methods[1].run();
} 
```

输出

```
method-1 
```

或反射

```
static Method[] methods = new Method[10];

public static void method1() {
    System.out.println("method-1");
}

public static void method2() {
    System.out.println("method-2");
}

public static void main(String[] args) throws Exception {
    methods[0] = Test1.class.getDeclaredMethod("method1");
    methods[1] = Test1.class.getDeclaredMethod("method2");
    methods[1].invoke(null);
} 
```

# javascript - 带有 Javascript 的动画下拉 Div 面板

> ID：14658421
> 
> 赞同：1
> 
> 时间：2013-02-02T03:57:03.837
> 
> 标签：javascript, html, css

提前感谢您提供任何可能的帮助。

基本上，我希望创建由函数激活的下拉 div 面板，`toggleSlider`在最初加载页面时，面板是隐藏的。前两个链接的“恢复”和“工作”功能就像我希望的那样，您单击一个，相应的 div 就会进入，当您再次单击同一链接或其他链接之一时，内容将被收回。第三个链接与其他链接不同，当您单击它时，相应的 div 会覆盖其他内容，并且只能通过再次单击同一链接来收回。这是它的样子......

[http://www.visuallypersuasive.com/jason/test.html#](http://www.visuallypersuasive.com/jason/test.html#)

这是javascript

```
function toggleSlider() {
if ($("#panelThatSlides").is(":visible")) {
    $("#contentThatFades").fadeOut(600, function(){
        $("#panelThatSlides").slideUp();
    });
}
if ($("#panelThatSlides2").is(":visible")) {
    $("#contentThatFades2").fadeOut(600, function(){
        $("#panelThatSlides2").slideUp();
    });
}
else {
    $("#panelThatSlides").slideDown(600, function(){
        $("#contentThatFades").fadeIn();
    });
}   
}

function toggleSlider2() {
if ($("#panelThatSlides2").is(":visible")) {
    $("#contentThatFades2").fadeOut(600, function(){
        $("#panelThatSlides2").slideUp();
    });
}
if ($("#panelThatSlides").is(":visible")) {
    $("#contentThatFades").fadeOut(600, function(){
        $("#panelThatSlides").slideUp();
    });
}

else {
    $("#panelThatSlides2").slideDown(600, function(){
        $("#contentThatFades2").fadeIn();
    });
}   
}

function toggleSlider3() {
if ($("#panelThatSlides3").is(":visible")) {
    $("#contentThatFades3").fadeOut(600, function(){
        $("#panelThatSlides3").slideUp();
    });
}
if ($("#panelThatSlides2").is(":visible")) {
    $("#contentThatFades2").fadeOut(600, function(){
        $("#panelThatSlides2").slideUp();
    });
}
if ($("#panelThatSlides").is(":visible")) {
    $("#contentThatFades").fadeOut(600, function(){
        $("#panelThatSlides").slideUp();
    });
}

else {
    $("#panelThatSlides3").slideDown(600, function(){
        $("#contentThatFades3").fadeIn();
    });
}   

} 
```

这是html

```
<div id="resume"><a class="nav" href="#" onclick="toggleSlider();">resume</a>
<div id="panelThatSlides" style="position:relative; left:250px; display:none;   
background:#eee; width:950px; height:500px;">
<div id="contentThatFades" style="position:relative; left:00px; display:none; 
background:#fff; width:950px; height:500px;">content</div>
</div>
</div>

<div id="work"><a class="nav" href="#" onclick="toggleSlider2();">work</a>
<div id="panelThatSlides2" style="position:relative; left:-420px; display:none; 
background:#eee; width:950px; height:500px;">
<div id="contentThatFades2" style="position:relative; left:00px; display:none; 
background:#fff; width:950px; height:500px;">mucho content</div>
</div>
</div>

<div id="contact"><a class="nav" href="#" onclick="toggleSlider3();">contact</a>
<div id="panelThatSlides3" style="position:relative;left:-550px; display:none;    
background:#eee; width:950px; height:500px;">
<div id="contentThatFades3" style="position:relative; left:00px; display:none; 
background:#fff; width:950px; height:500px;">mucho mass content</div>
</div>
</div> 
```

虽然我觉得我对 html 和 css 有扎实的基础到中级理解，但 javascript 对我来说几乎是希腊语。理想情况下，如果我能让它工作，我想使用这种技术在工作链接/div 中嵌套另一个下拉 div，其中包含三个以上的链接。

再次感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:33:18.560

测试它我对你的代码做了一点改动

HTML：

```
<div class="navbar">
   <div id="resume" class="navmenu"><a class="nav" href="#" >resume</a>
     <div class="panelThatSlides" style="position:relative; left:250px; display:none;   background:#eee; width:950px; height:500px;">
        <div class="contentThatFades" style="position:relative; left:00px;display:none; background:#fff; width:950px; height:500px;">content</div>
        </div>
     </div>
     <div id="work" class="navmenu"><a class="nav" href="#" >work</a>
         <div class="panelThatSlides" style="position:relative; left:-420px;display:none; background:#eee; width:950px; height:500px;">
            <div class="contentThatFades" style="position:relative; left:00px;display:none; background:#fff; width:950px; height:500px;">mucho content</div>
        </div>
     </div>
     <div id="contact" class="navmenu"><a class="nav" href="#" >contact</a>
        <div class="panelThatSlides" style="position:relative;left:-550px;display:none;background:#eee; width:950px; height:500px;">
          <div id="contentThatFades" style="position:relative; left:00px; display:none;background:#fff; width:950px; height:500px;">mucho mass content</div>
       </div>
     </div>
</div> 
```

js 必须放在 Html 代码之后

```
$(".navbar").find(".nav").bind("click",function(e){
 if($(e.target.parentNode).find(".panelThatSlides").is(":visible")){
    $(e.target.parentNode.parentNode).find(".navmenu").find(".panelThatSlides").fadeOut(600, function(){
      $(e.target.parentNode.parentNode).find(".navmenu").find(".panelThatSlides").find(".contentThatFades").slideUp();
    });
 }
 $(e.target.parentNode.parentNode).find(".navmenu").find(".panelThatSlides").fadeOut(600, function(){
     $(e.target.parentNode.parentNode).find(".navmenu").find(".panelThatSlides").find(".contentThatFades").slideUp();
 });
 $(e.target.parentNode).find(".panelThatSlides").slideDown(600, function(){
    $(e.target.parentNode).find(".panelThatSlides").find(".contentThatFades").fadeIn();
 });
 return false;
}); 
```

现在您可以毫无问题地添加导航

# amazon-s3 - 如何防止 Imageresizer 使用 Cloudfront 插件创建无效 url？

> ID：14658434
> 
> 赞同：1
> 
> 时间：2013-02-02T03:58:39.923
> 
> 标签：amazon-s3, amazon-cloudfront, imageresizer

我在 Amazon S3 上托管我的图像并且只存储一种图像大小。

到目前为止，我已经成功地使用[Imageresizer](http://imageresizing.net)来根据请求调整我的图像大小。

现在我需要介绍 Cloudfront CDN，这给我带来了困难。

[我已经按照文档](http://imageresizing.net/plugins/cloudfront)设置了我的配置。

像这样：

```
<resizer>
    <diskcache dir="~/app_data" autoClean="true"/>
    <clientcache minutes="1440"/>
    <cloudfront redirectThrough="http://cdn.example.com" redirectPermanent="false"/>
    <plugins>
      <add name="DiskCache"/>
      <add name="ClientCache"/>
      <add name="MvcRoutingShim"/>
      <add name="CloudFront"/> 
    </plugins>
  </resizer> 
```

然后我捕获到我的应用程序的任何 URL，如下所示：

```
private static void ImageResizer_OnPostAuthorizeRequestStart(
    IHttpModule sender2, HttpContext context)
{
    string path = Config.Current.Pipeline.PreRewritePath;
    if (!path.StartsWith(PathUtils.ResolveAppRelative("~/cdn/"),
        StringComparison.OrdinalIgnoreCase))
    {
        return;
    }

    Config.Current.Pipeline.SkipFileTypeCheck = true;
    Config.Current.Pipeline.ModifiedQueryString["cache"]
        = ServerCacheMode.Always.ToString();
} 
```

以便 Imageresizer 可以处理它们。

当它这样做时，它将更改我的 URL 以使用正确的 CDN 路径，但它也会将查询字符串参数更改为分号：

> [http://example.com/cdn/image.jpg?mode=crop&width=200](http://example.com/cdn/image.jpg?mode=crop&width=200)

对此：

> [http://mycdn.example.com/image.jpg;mode=crop;width=200](http://mycdn.example.com/image.jpg;mode=crop;width=200)

不幸的是，Amazon S3 不喜欢这样，并将其作为拒绝访问而踢出。然而，亚马逊很乐意为原始查询字符串提供服务。

那么，如何保留查询字符串以防止 Imageresizer 将参数更改为分号？

或者配置 amazon，以便无论分号如何，它都会提供图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:24:11.997

您不使用 CloudFront*而不是*S3，而是**同时使用它们**。您的云端分发应指向**运行 ImageResizer 的服务器**，该服务器又使用 S3Reader 访问 Amazon S3。CloudFront 不应**直接**指向 S3；这将从图片中消除 ImageResizer。

请参阅[http://imageresizing.net/docs/cloud](http://imageresizing.net/docs/cloud)

# java - 试图将 SMALLER 数组复制到 LARGER 数组中

> ID：14658437
> 
> 赞同：0
> 
> 时间：2013-02-02T03:58:48.427
> 
> 标签：java, arrays, for-loop, indexoutofboundsexception

这让我发疯了，在一个我本应在一项大规模任务中取得重大进展的夜晚。这样一个看似基本的问题让我非常尴尬，但我放弃了。我试过画一幅画，我已经尝试了我知道该怎么做的一切。

我的目标是将一个较小的数组复制到一个较大的空数组中，以便较大的数组包含通向较小数组开头的零。

this.intArray 的值：{2, 2, 7, 1, 1, 1} h.intArray 的值：{1, 1, 5}

我希望 hCopy.intArray 的值是：{0, 0, 0, 1, 1, 5}

这是我的代码：

```
 for (int k = h.intArray.length-1;k <= this.intArray.length-1; k++)
    {   

    hCopy.intArray[k] = h.intArray[k - h.intArray.length-1]; 

    } 
```

这是错误消息：线程“main”中的异常java.lang.ArrayIndexOutOfBoundsException：-2

感谢您提供的任何帮助，我向您保证，为了我的理智，我需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:30:12.750

尝试

```
 int[] a1 = {2, 2, 7, 1, 1, 1};
    int[] a2 = {1, 1, 5};
    Arrays.fill(a1, 0, a1.length - a2.length, 0);
    System.arraycopy(a2, 0, a1, a1.length - a2.length, a2.length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:09:29.157

请记住在减法时考虑操作顺序，您有`k - h.intArray.length - 1`，但我认为您想要的是`k - (h.intArray.length - 1)`。

但是，我认为您正在利用一个巧合，即较大的数组是较小数组的两倍。如果它更长，您的代码将崩溃，因为您将超出较小的数组。尝试这个：

```
int start = this.intArray.length - h.intArray.length;
for (int k = start; k < this.intArray.length k++) {
    hCopy.intArray[k] = h.intArray[k - start];
} 
```

请注意，您没有在 hCopy 中将前 3 个值清除为 0，从您的问题看来，您也需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T04:55:26.440

这是执行此操作的标准库方法；仔细选择偏移量：

[http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int% 29](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)

# sql - 如何使用带有 .where 的 sql 查询来检查日期列和字符串之间的匹配？

> ID：14658438
> 
> 赞同：0
> 
> 时间：2013-02-02T03:58:52.987
> 
> 标签：sql, ruby-on-rails, postgresql, search, rails-activerecord

我有一种预感，这已经是一种 hack，但我仍然对此感到好奇：

说我有这个：

```
current_user.memories.where("content LIKE '%#{search}%' OR note LIKE '%#{search}%' OR date LIKE '%#{search}%'") 
```

这是一个搜索字段。

在我的数据库中，在“记忆”表中，我有**content:text 和 note:string**，所以通过前两个比较，这个技巧很好用。

但是，日期部分显然不起作用。我在内存表中也有一个**date:date**列，但我不知道如何检查字符串是否匹配。

我可以将字符串格式化为 2013-01-15 之类的格式，但我不知道如何进行此比较。不知何故也将“日期”部分更改为该字符串？

整个事情背后的想法是允许像 2013-01-15 （或某种格式）这样的搜索，它也会自动检查“内存”对象的日期。

建议表示赞赏。

（如果重要的话，数据库是 postgres。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:45:19.137

首先，你不应该使用字符串插值来构建 SQL，让 ActiveRecord 处理这些东西。其次，如果您`search`是[ISO 8601](http://en.wikipedia.org/wiki/ISO-8601)格式（即 YYYY-MM-DD），那么您可以直接将日期列与使用的字符串进行比较`=`，PostgreSQL 会找出答案。你想要更像这样的东西：

```
current_user.memories.where(%q{
       content like :pat
    or note    like :pat
    or date       = :date
}, :pat => "%#{search}%", :date => search) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:02:44.853

您可以使用 to_date(text, text) 将搜索词转换为日期。如有必要，您可能还必须从日期字段中删除时间部分

解释在[这里](http://www.postgresql.org/docs/8.1/static/functions-formatting.html)

# ruby-on-rails - 找不到动作“facebook” - 设计/omniauth

> ID：14658439
> 
> 赞同：5
> 
> 时间：2013-02-02T03:59:04.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

我正在尝试按照[本指南在我的应用程序中实现 facebook 身份验证](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

在 Facebook 上授权后，我得到以下信息：

```
Unknown action

The action 'facebook' could not be found for Devise::OmniauthCallbacksController 
```

我已经在 app/controller/users/omniauth_callbacks_controller.rb 中实现了该方法：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    # You need to implement the method below in your model (e.g. app/models/user.rb)
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

我的回调路线是：

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

有什么我想念的吗？我该如何调试呢？

谢谢！

更新：添加了 rake 路由的输出（对不起长度）：

```
 new_user_session GET    /users/sign_in(.:format)                   devise/sessions#new
              user_session POST   /users/sign_in(.:format)                   devise/sessions#create
      destroy_user_session DELETE /users/sign_out(.:format)                  devise/sessions#destroy
   user_omniauth_authorize        /users/auth/:provider(.:format)            devise/omniauth_callbacks#passthru {:provider=>/facebook/}
    user_omniauth_callback        /users/auth/:action/callback(.:format)     devise/omniauth_callbacks#(?-mix:facebook)
             user_password POST   /users/password(.:format)                  devise/passwords#create
         new_user_password GET    /users/password/new(.:format)              devise/passwords#new
        edit_user_password GET    /users/password/edit(.:format)             devise/passwords#edit
                           PUT    /users/password(.:format)                  devise/passwords#update
  cancel_user_registration GET    /users/cancel(.:format)                    devise/registrations#cancel
         user_registration POST   /users(.:format)                           devise/registrations#create
     new_user_registration GET    /users/sign_up(.:format)                   devise/registrations#new
    edit_user_registration GET    /users/edit(.:format)                      devise/registrations#edit
                           PUT    /users(.:format)                           devise/registrations#update
                           DELETE /users(.:format)                           devise/registrations#destroy
                      help        /help(.:format)                            static_pages#help
                     about        /about(.:format)                           static_pages#about
                   contact        /contact(.:format)                         static_pages#contact
                 users_new GET    /users/new(.:format)                       users#new
                    signup        /signup(.:format)                          users#new
           new_certificate        /new_certificate(.:format)                 users#newcertificate
                     users GET    /users(.:format)                           users#index
                           POST   /users(.:format)                           users#create
                  new_user GET    /users/new(.:format)                       users#new
                 edit_user GET    /users/:id/edit(.:format)                  users#edit
                      user GET    /users/:id(.:format)                       users#show
                           PUT    /users/:id(.:format)                       users#update
                           DELETE /users/:id(.:format)                       users#destroy
          new_user_session GET    /users/sign_in(.:format)                   devise/sessions#new
                           POST   /users/sign_in(.:format)                   devise/sessions#create
      destroy_user_session DELETE /users/sign_out(.:format)                  devise/sessions#destroy
   user_omniauth_authorize        /users/auth/:provider(.:format)            users/omniauth_callbacks#passthru {:provider=>/facebook/}
    user_omniauth_callback        /users/auth/:action/callback(.:format)     users/omniauth_callbacks#(?-mix:facebook)
                           POST   /users/password(.:format)                  devise/passwords#create
                           GET    /users/password/new(.:format)              devise/passwords#new
                           GET    /users/password/edit(.:format)             devise/passwords#edit
                           PUT    /users/password(.:format)                  devise/passwords#update
                           GET    /users/cancel(.:format)                    devise/registrations#cancel
                           POST   /users(.:format)                           devise/registrations#create
                           GET    /users/sign_up(.:format)                   devise/registrations#new
                           GET    /users/edit(.:format)                      devise/registrations#edit
                           PUT    /users(.:format)                           devise/registrations#update
                           DELETE /users(.:format)                           devise/registrations#destroy
                           GET    /users/auth/:provider(.:format)            users/omniauth_callbacks#passthru
                   courses GET    /courses(.:format)                         courses#index
                           POST   /courses(.:format)                         courses#create
                new_course GET    /courses/new(.:format)                     courses#new
               edit_course GET    /courses/:id/edit(.:format)                courses#edit
                    course GET    /courses/:id(.:format)                     courses#show
                           PUT    /courses/:id(.:format)                     courses#update
                           DELETE /courses/:id(.:format)                     courses#destroy
               enrollments GET    /enrollments(.:format)                     enrollments#index
                           POST   /enrollments(.:format)                     enrollments#create
            new_enrollment GET    /enrollments/new(.:format)                 enrollments#new
           edit_enrollment GET    /enrollments/:id/edit(.:format)            enrollments#edit
                enrollment GET    /enrollments/:id(.:format)                 enrollments#show
                           PUT    /enrollments/:id(.:format)                 enrollments#update
                           DELETE /enrollments/:id(.:format)                 enrollments#destroy
               submissions GET    /submissions(.:format)                     submissions#index
                           POST   /submissions(.:format)                     submissions#create
            new_submission GET    /submissions/new(.:format)                 submissions#new
           edit_submission GET    /submissions/:id/edit(.:format)            submissions#edit
                submission GET    /submissions/:id(.:format)                 submissions#show
                           PUT    /submissions/:id(.:format)                 submissions#update
                           DELETE /submissions/:id(.:format)                 submissions#destroy
    honour_code_signatures GET    /honour_code_signatures(.:format)          honour_code_signatures#index
                           POST   /honour_code_signatures(.:format)          honour_code_signatures#create
 new_honour_code_signature GET    /honour_code_signatures/new(.:format)      honour_code_signatures#new
edit_honour_code_signature GET    /honour_code_signatures/:id/edit(.:format) honour_code_signatures#edit
     honour_code_signature GET    /honour_code_signatures/:id(.:format)      honour_code_signatures#show
                           PUT    /honour_code_signatures/:id(.:format)      honour_code_signatures#update
                           DELETE /honour_code_signatures/:id(.:format)      honour_code_signatures#destroy
                      root        /                                          static_pages#home 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T00:52:34.330

解决了我设置不正确的问题！我最初遵循设计教程并将其添加到我的路线中：

```
devise_for :users 
```

然后我按照omniauth教程为回调添加了以下内容：

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

不知何故，这些肯定是相互冲突的，因为简单地删除第一个记录会将回调指向正确的方向（它一定是在寻找我将 Devise::OmniauthCallbacksController 子类化的 Devise 类）。

# php - 此代码是否可以免受任何 SQL 注入攻击？

> ID：14658441
> 
> 赞同：0
> 
> 时间：2013-02-02T04:00:01.387
> 
> 标签：php, mysql, sql, sql-injection

我编写此查询是为了防止 SQL 注入。但是这段代码不起作用。有人能告诉我我哪里出了问题吗？而且我还需要知道这段代码是否可以防止 SQL 注入攻击？

```
// Make sure the email address and username are available:
$q = "SELECT *
        FROM
        (
            SELECT userName, NULL AS email FROM Login
            UNION
            SELECT NULL AS username, email FROM contact
        ) s
        WHERE username = ? OR email = ?";

$stmt = mysqli_prepare($dbc, $q);

mysqli_stmt_bind_param($stmt, 'ss', $username, $email);

// Execute the query:
mysqli_stmt_execute($stmt);

// Get the number of rows returned:
$rows = mysqli_stmt_num_rows($stmt);

if ($rows == 0) { // No problems! Going to next page
} 
```

**更新1**：以上代码以这种方式工作

```
 // Make sure the email address and username are available:
            $q = "SELECT *
                    FROM
                    (
                        SELECT userName, NULL AS email FROM Login
                        UNION
                        SELECT NULL AS username, email FROM contact
                    ) s
                    WHERE username = '$username' OR email = '$email'";                  

            $r = mysqli_query ($dbc, $q);

            // Get the number of rows returned:
            $rows = mysqli_num_rows($r);

            if ($rows == 0) { // No problems! Going to next page

} 
```

**更新 2**：我的用户名和电子邮件是这样的

```
 // Check for a username:
    if (preg_match ('/^[A-Z \'.-]{2,20}$/i', $_POST['username'])) {
        $username = mysqli_real_escape_string ($dbc, $_POST['username']);
    } else {
        $reg_errors['username'] = 'You have not entered your username!';
    }

    // Check for an email address:
    if (!empty( $_POST['email'])) { 
        if (filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
            $email = mysqli_real_escape_string ($dbc, $_POST['email']);
        } else {
            $reg_errors['email'] = 'You are NOT entered a valid email address!';
        }
    } else {
        $reg_errors['email'] = 'Your email address field can not be empty!';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:18:09.023

> 有人能告诉我我哪里出了问题吗？

我将在黑暗中刺伤并说您的第一个代码块（prep stmt）不起作用的原因在[mysqli_stmt_num_rows](http://www.php.net/manual/en/mysqli-stmt.num-rows.php)的描述中给出：

> 返回结果集中的行数。mysqli_stmt_num_rows() 的使用取决于您是否使用 mysqli_stmt_store_result() 来缓冲语句句柄中的整个结果集。

...

> 而且我还需要知道这段代码是否可以防止 SQL 注入攻击？

使用准备好的语句，是的。

# mysql - OSX 10.8 上的自制软件出现 MySQL 错误

> ID：14658443
> 
> 赞同：2
> 
> 时间：2013-02-02T04:00:34.250
> 
> 标签：mysql, sockets, osx-mountain-lion, homebrew, pid

运行 brew install mysql 后，我已经尝试了此处发布的所有解决方案，但仍然没有运气。在尝试启动 MySQL 时，我得到了这个：

```
me$ mysql.server start
Starting MySQL
. ERROR! The server quit without updating PID file (/usr/local/mysql/data/cpe-98-14-179.159.nyc.res.rr.com.pid). 
```

或这个：

```
me$ mysql
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (13) 
```

etc/my.cnf 看起来像这样：

```
me$ sudo nano etc/my.cnf
Password:

[mysqld]
datadir=/usr/local/mysql/data
socket=/var/lib/mysql/mysql.sock

[mysql.server]
user=mysql
basedir=/usr/local/mysql

[client]
socket=/var/lib/mysql/mysql.sock 
```

我的权限错了吗？有没有可能我的目录搞砸了？如果我可以从网站上清除所有内容并安装，我会在此时尝试。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:42:22.917

```
sudo chown -R user_name /usr/local/var/mysql/ 
```

将 user_name 替换为您的用户名。

# android - Android 模拟器 api level11

> ID：14658445
> 
> 赞同：1
> 
> 时间：2013-02-02T04:00:59.613
> 
> 标签：android

我刚刚`android`从 2.3.3 api Level 10 更新到`android`3.0 api Level 11。但是我遇到了这两个问题。我已经搜索了互联网，但找不到任何有用的东西。

这是我的问题：

1.  我的模拟器处于纵向模式，但我的活动始终以横向模式运行。
2.  应用程序启动器 com.android.launcher 意外停止。

# asp.net - ASP.NET 数据源控件

> ID：14658449
> 
> 赞同：0
> 
> 时间：2013-02-02T04:02:06.310
> 
> 标签：asp.net

我正在学习 ASP.NET。我注意到 Microsoft Visual Studio 中提供了几种类型的 ASP.NET 数据源控件，包括 SqlDataSource、AccessDataSource、ObjectDataSource 和 XmlDataSource。有谁可以解释 SqlDataSource、AccessDataSource、ObjectDataSource 和 XmlDataSource 之间的区别？哪一个在现实世界中更有用？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:42:28.450

通过这个链接，它帮助了我。希望它也能帮助你。

[数据源控件和连接](http://msdn.microsoft.com/en-us/library/orm-9780596529567-04-07.aspx)
[ASP.NET 数据源](http://www.tutorialspoint.com/asp.net/asp.net_data_sources.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:52:19.520

如果连接到 XML 文件，则选择 XMLDataSource。如果您的数据源来自 Access 数据库，则选择 AccessDataSource。如果连接到具有 ADO.NET 数据提供程序（SQL Server、Oracle、OLEDB、ODBC）的任何数据源，则选择 SqlDataSource。如果要连接到自定义对象以从数据库中获取/获取数据，则选择 ObjectDataSource（对于中型到大型应用程序而言，这是一种非常有效的方式）。

我的大多数项目都使用 N 层架构，而我最好的选择始终是 ObjectDataSource。它给了我的团队独立工作的自由，但同时在一个大项目中！

我希望它对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T04:30:05.307

我使用了一点 sqldatasources，但现在，只使用实体框架。我（仍然）从 ​​sql db 获取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T04:32:59.973

mrqyue，你可以试试[这个](http://msdn.microsoft.com/en-us/library/ms227679%28v=vs.100%29.aspx)

这将更清楚地解释您在寻找什么..

此外，试试[这个](http://msdn.microsoft.com/en-us/library/orm-9780596529567-04-07.aspx)。它将举例说明

# javascript - 在特定的 div 标签中打开 avi 文件

> ID：14658451
> 
> 赞同：0
> 
> 时间：2013-02-02T04:02:13.663
> 
> 标签：javascript, jquery, jsp

我有下拉动画菜单，我可以从中选择我想在特定部分的同一页面上播放的特定视频文件。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:09:31.683

您可以`<video>`在 HTML 中使用标签。这是带有示例的[详细说明。](http://www.w3schools.com/html/html_videos.asp)自己试一试。

您可以像加载视频一样，

```
jQuery('.dropdown').change(function(event) {
    jQuery("#div-id").empty().append("***Video here*****");
}); 
```

这里还有一个[参考](http://www.ehow.com/how_6825163_embed-avi-video-html.html)。

希望这可以帮助。

# machine-learning - 如何理解 SVM 中的功能余量？

> ID：14658452
> 
> 赞同：5
> 
> 时间：2013-02-02T04:02:14.873
> 
> 标签：machine-learning, classification, svm

我正在阅读 Andrew NG 的机器学习笔记，但功能边距定义让我感到困惑：

![在此处输入图像描述](../Images/dfaaa68d78ef6623f81c24bf3d2c8e86.png)

我可以理解几何边距是从 x 到其超平面的距离，但是如何理解功能边距？为什么他们这样定义它的公式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:55:47.167

可以这样想：w^T.x_i +b 是模型对第 i 个数据点的预测。Y_i 是它的标签。如果预测和基本事实具有相同的符号，则 gamma_i 将为正。这个实例在类边界的“内部”越远，gamma_i 就越大：这更好，因为对所有 i 求和，你的类之间会有更大的分离。如果预测和标签在符号上不一致，那么这个数量将是负数（预测器的错误决定），这将减少你的利润，并且你越不正确，它就会减少得越多（类似于松弛变量） .

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-08T15:37:30.117

**功能保证金：**

这给出了点相对于平面的位置，它不依赖于大小。

**几何边距：**

这给出了给定训练示例和给定平面之间的距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-21T14:32:04.953

您可以根据以下两个假设将功能边距转换为几何边距：

1.  ||w|| == 1，因此 (w^T)x+b == ((w^T)x+b)/||w||，即点 x 到直线 y=(w^T) 的几何距离x+b。

2.  目标只有两个类别，其中 y_i 只能是 +1 和 -1。因此，如果 y_i 的符号与点 x 所在的直线的边相匹配 (y_i > 0 when (w^T)x+b > 0, y_i < 0 when (w^T)x+b < 0) ，乘以y_i简单地等价于得到距离(w^T)x+b的绝对值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T14:03:56.743

> 对于这个问题
> 
> > 为什么他们这样定义它的公式？

解释：功能边距没有告诉我们不同点到分离平面/线的确切距离或测量值。

例如，只需考虑以下行，它们是相同的，但功能边距会有所不同（功能边距的限制）。

```
2*x  + 3*y  + 1 = 0 
4*x  + 6*y  + 2 = 0 
20*x + 30*y +10 = 0 
```

Functional Margin 只是给出我们分类的置信度的一个想法，没有什么具体的。

另请阅读以下参考以获取更多详细信息。

> [参考吴恩达的讲义，详情请点此](http://cs229.stanford.edu/notes/cs229-notes3.pdf)
> 
> 如果 y(i) = 1，那么为了使函数余量很大（即，为了使我们的预测可靠且正确），我们需要 wTx + b 是一个很大的正数。相反，如果 y(i) = -1，那么要使函数余量很大，我们需要 wTx + b 是一个很大的负数。此外，如果 y(i)(wTx + b) > 0，那么我们对这个例子的预测是正确的。（自己检查一下。）因此，较大的功能余量代表了自信和正确的预测。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-17T07:00:30.353

功能边距用于缩放。

几何裕度 = 功能裕度 / 范数（w）。

或者，当 norm(w) = 1 时，边距为几何边距

# scheme - 如何在 mit 方案中导入其他库？

> ID：14658462
> 
> 赞同：2
> 
> 时间：2013-02-02T04:03:07.263
> 
> 标签：scheme, mit-scheme

这是一个关于如何在 mit 方案中加载依赖项的新手问题

例如，我希望使用此处定义的流库。 [http://srfi.schemers.org/srfi-41/srfi-41.html](http://srfi.schemers.org/srfi-41/srfi-41.html)

```
(library (streams primitive)
  (export stream-null stream-cons stream? stream-null? stream-pair?
          stream-car stream-cdr stream-lambda)

 .....
 .....) 
```

我该怎么办？它已经在那里了吗，因为它是一个 srfi？保存为文件？我如何调用这些函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:48:34.983

SRFI 41 的参考实现有两种变体，[一种用于 R5RS](http://srfi.schemers.org/srfi-41/r5rs.ss)，一种用于 R6RS。MIT Scheme 正在抵制 R6RS，所以你应该使用 R5RS 版本。

我没有使用过 MIT 计划，所以我不能说更多。从我在他们的主页上看到的内容来看，MIT Scheme 似乎也没有模块系统，因此您可能只需将该文件保存到您的项目目录`load`中，并以老式方式保存。

# php - Run While 循环遍历列的所有不同值

> ID：14658463
> 
> 赞同：2
> 
> 时间：2013-02-02T04:03:38.527
> 
> 标签：php, mysql, sql, while-loop

这是一个示例 MYSQL 结果

```
+----+---+
| 一个 | 乙|
+----+---+
| 1 | 1 |
| 1 | 2 |
| 2 | 3 |
| 2 | 4 |
| 3 | 5 |
+----+---+

```

我想遍历 A 列中的每一个不同之处，并利用 B 列中的值做一些事情。假设 A 有用户 ID，B 有食物。我想抓取用户 1 喜欢的所有食物，然后向 1 发送电子邮件，然后抓取用户 2 喜欢的所有食物并通过电子邮件发送给她，依此类推。将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:08:55.990

如果你想要逗号分隔的值，你可以使用`GROUP_CONCAT`

```
SELECT A, GROUP_CONCAT(DISTINCT B) foodList
FROM   tableName
GROUP  BY A 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c724f/1)

其他链接

*   [GROUP BY 子句](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)

# anchor - 除顶部外，所有锚标签都有效

> ID：14658467
> 
> 赞同：0
> 
> 时间：2013-02-02T04:04:50.770
> 
> 标签：anchor, nav, smooth-scrolling

在这个[网站上](http://mtthwbsh.com/data-viz)，我使用了一个平滑滚动功能，它适用于每个链接，除非你尝试回家。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:19:38.773

id "Home" 指的是一个固定定位的元素（标题），它总是可见的，所以脚本没有滚动到的地方。

`<header id="home">`在and`<section id="intro">`到`<header id="intro">`and之间交换 ID `<section id="home">`，或者您可以将第一个列表的项目锚点更改`<a href="#home">`为脚本可以前往的地方。

删除部分的填充，并将其应用于部分的更内部元素，否则第一部分的标题将放错位置。

祝开发者好运！

# html - 嵌套在语义上是否正确 年代？

> ID：14658468
> 
> 赞同：6
> 
> 时间：2013-02-02T04:05:00.877
> 
> 标签：html, semantics

我一直在阅读新的 HTML5 元素及其适当的用法，目前有一些这样的标记：

```
 <article>
        <h1>Crazy Awesome Programming Projects</h1>
        <article>
            <h2>Mathematics</h2>

            <section>
                <h3>Binary to Decimal converter</h3>
                <p> info here </p>
            </section>

            <section>
                <h3>Scientific Calculator</h3>
                <p> info here </p>
            </section>

        </article>

        <article>
            <h2>String Manipulation</h2>

            <section>
                <h3>RSS Feed Generator</h3>
                <p> info here </p>
            </section>

            <section>
                <h3>Palindrome Detector</h3>
                <p> info here </p>
            </section>
        </article>
    </article> 
```

`<article>`以这种方式嵌套标签在语义上是否正确？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T20:20:52.510

在某些情况下嵌套[`article`](http://www.w3.org/TR/html5/sections.html#the-article-element)元素是正确的；最突出的案例是对博客文章的评论。

但我认为您的示例并非如此（不过，如果没有看到完整的内容，很难做出决定）。

我会完全相反：

```
<section> <!-- probably not article -->
    <h1>Crazy Awesome Programming Projects</h1>

    <section> <!-- not article -->
        <h2>Mathematics</h2>

        <article> <!-- not section -->
            <h3>Binary to Decimal converter</h3>
            <p> info here </p>
        </article>

        <article> <!-- not section -->
            <h3>Scientific Calculator</h3>
            <p> info here </p>
        </article>

    </section>

    <section> <!-- not article -->
        <h2>String Manipulation</h2>

        <article> <!-- not section -->
            <h3>RSS Feed Generator</h3>
            <p> info here </p>
        </article>

        <article> <!-- not section -->
            <h3>Palindrome Detector</h3>
            <p> info here </p>
        </article>
    </section>
</section> 
```

“Binary to Decimal converter”、“Scientific Calculator”、“RSS Feed Generator”和“Palindrome Detector”是这里的文章。它们是“一个独立的组合”和“原则上，可独立分发或可重复使用，例如在联合中”。

“数学”和“字符串操作”是类别。

在结构上它类似于网上商店。“Palindrome Detector”将是可购买的产品，而“String Manipulation”将是产品类别。我想您不会将产品类别视为“独立的”。

对于容器（“Crazy Awesome Programming Projects”），`article`只有在有更多内容提供上下文的情况下，我才会使用。否则它只是一个顶级类别，包含子类别，其中包含“真实”内容。

好问题要问是否`article`合适：

*   *内容可以*有自己的发布日期吗？
*   *内容的作者*可能与页面不同吗？**
**   *内容可以*是提要中的单独条目吗？*   *如果*在没有任何其他内容/上下文的情况下打印出来，内容仍然有意义吗？*

 *如果（某些）这些问题的回答是“是”，则`article`可能是正确的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T04:08:21.777

是的，根据[HTML5 规范](http://www.w3.org/html/wg/drafts/html/master/sections.html#the-article-element)。这是关于嵌套`article`元素的说法：

> 嵌套文章元素时，内层文章元素表示原则上与外层文章内容相关的文章。例如，接受用户提交评论的网站上的博客条目可以将评论表示为嵌套在博客条目的文章元素中的文章元素。*

# java - Android Intent 上下文令人困惑

> ID：14658469
> 
> 赞同：58
> 
> 时间：2013-02-02T04:05:03.080
> 
> 标签：java, android, android-intent, android-context

有人可以向我解释一下吗：

```
Intent intent = new Intent(Context, AlarmReceiver.class); 
```

我从不理解，我认真地认为，如果有人不尝试向我深入解释这一点，我永远不会理解。这整个上下文的事情让我很困惑。有时它是这样工作的：

```
Intent intent = new Intent(getBaseContext(), AlarmReceiver.class); 
```

有时它不会那样工作，但它只接受：

```
 Intent intent = new Intent(context, AlarmReceiver.class); 
```

有时它：

```
Intent intent = new Intent(this, AlarmReceiver.class); 
```

等等等等等等等等。

我了解上下文的基础知识，但有多少？为什么日食会一次又一次地给我一个错误？为什么有时我们需要声明上下文？：

```
Context context; 
```

我无法为所有情况找到正确的上下文我如何知道在每种情况下什么是正确的？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-02T04:07:32.010

首先，我解释一下[上下文](http://developer.android.com/reference/android/content/Context.html)更好一点，然后我们继续讨论如何使用和接收它。本质上，上下文是将资源链接到程序的参考。每个对象都有自己的上下文，其中包含设置该对象所需的资源。除了其他目的之外，还需要创建许多对象并获取程序标识信息。这使得设置新视图和活动非常宝贵，但它也可以用于其他目的。另请参阅[此答案](https://stackoverflow.com/a/3572553/544198)以获取更多信息。

一个项目的上下文可以来自不同的地方。有时它被存储并且必须被检索，有时它是继承的。基本上，这是面向对象的编程。

只是给你几个例子：

[活动](http://developer.android.com/reference/android/app/Activity.html)继承上下文。因此，如果你在一个活动中，你只需要传递它自己来使用上下文。它还包含一个指向`getBaseContext()`. 如果您需要整个应用程序上下文，您可能偶尔需要参考它，但很可能暂时不需要。

[视图](http://developer.android.com/reference/android/view/View.html)不继承上下文。但是，它确实有一个方法[getContext()](http://developer.android.com/reference/android/view/View.html#getContext%28%29)。如果您需要从视图中获取上下文，这就是获取它的方法。这个上下文不会是完整的，只会有视图内容的上下文。

[片段](http://developer.android.com/guide/components/fragments.html)也不继承上下文。它们包含一个方法[getActivity()](http://developer.android.com/reference/android/app/Fragment.html#getActivity%28%29)，如果 Fragment 处于活动状态，则该方法将返回活动，即 Fragment 的上下文。

[BroadcastReceivers](http://developer.android.com/reference/android/content/BroadcastReceiver.html)也不继承上下文。实际上，它们根本不包含上下文，只是在接收到事件时接收当前上下文（如[onReceive(Context context, Intent intent)](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-04T17:51:41.203

上下文能力

您可以对给定的 Context 对象安全地采取的常见操作取决于它最初的来源。下表列出了应用程序将接收 Context 的常见位置，以及在每种情况下它的用途：

[![在此处输入图像描述](../Images/27d8522089a9e52769834303ff9a5184.png)](https://i.stack.imgur.com/oDjMv.png)

1.  应用程序可以从这里启动一个 Activity，但它需要创建一个新任务。这可能适合特定的用例，但可能会在您的应用程序中创建非标准的回栈行为，通常不推荐或不被认为是好的做法。
2.  这是合法的，但膨胀将使用您正在运行的系统的默认主题完成，而不是您的应用程序中定义的主题。
3.  如果接收者为 null 则允许，用于获取粘性广播的当前值，在 Android 4.2 及更高版本上。

原创文章[在这里](https://possiblemobile.com/2013/06/context/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-02T08:07:15.943

我通过上下文理解的是环境。简单来说，上下文是任何事物的环境。所以当你使用任何形式的上下文时，你必须决定你正在使用上下文的事物的周围环境。

例如，如果您希望某些数据或字段在整个应用程序中保留，您应该在应用程序类中定义它。

现在，当您在应用程序的任何组件中获取应用程序上下文时，您在应用程序类中声明的此字段将在您的上下文中。因此您可以访问它。

对于所有上下文类型也是如此。

如果您曾经尝试通过使用上下文“this”在服务组件中使用 alertDialog。试试这个，我敢打赌，您肯定会得到异常，因为“this”表示在其中使用时的服务环境。因为它是后台组件，我们可以t 在其中添加窗口。因此它会告诉您错误的令牌异常。这意味着为周围视图生成的令牌不适合 alertDialog 显示。

希望这能让您简要了解您想要什么。

# asp.net-mvc-3 - boostrap 模式中的提交按钮不提交

> ID：14658473
> 
> 赞同：0
> 
> 时间：2013-02-02T04:06:08.473
> 
> 标签：asp.net-mvc-3, twitter-bootstrap, modal-dialog

我有一个 mvc 生成的表单 (@Html.BeginForm())，在引导模式叠加层中有一个 type="submit" 的按钮。

```
<button aria-hidden="true" data-dismiss="modal" class="btn" type="submit">Close</button> 
```

当我单击按钮时 - 它所做的只是关闭模式。未执行提交操作（POST 到控制器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:08:02.557

您可能必须删除该`data-dismiss="modal"`属性，因为这会触发`Modal`关闭而不是提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:15:03.530

只需添加`<input type="submit" value="Close" class="btn" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:56:04.427

```
do this

@using(@html.BeginForm("ActionName","ControllerName"))
{
<input type="submit" value="Close" class="btn" />
} 
```

# kinect - 为什么使用旧 Kinect SDK 构建的项目无法在最新版本上运行？

> ID：14658476
> 
> 赞同：0
> 
> 时间：2013-02-02T04:06:48.647
> 
> 标签：kinect

我有一个基于旧版 Kinect SDK 构建的游戏。它似乎不适用于最新的 Kinect SDK v1.6。我收到很多错误。

我需要进行哪些更改才能使用 Kinect 传感器玩游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:34:03.200

在 1.5 版中对 SDK 进行了几处更改，这些更改破坏了旧版本的编码。命名空间发生了变化，骨架的存储和引用方式也发生了很大变化。其他项目也发生了变化，我不知道完整的列表。

根据代码的不同，您可能只需要修改一些东西，或者真正深入研究代码。知道您遇到的许多错误可能是多次发生的相同错误。例如，当骨架被引用时 - 它经常发生，但是在你修复它一次之后，你可以轻松地再次快速修复它。

您需要先*了解最新的 SDK*。我建议研究许多示例，这些示例很好地展示了基础知识。然后，您可以通过游戏代码并开始查看未正确引用的内容......并修复它们。

# wordpress - 有没有办法为具有多个作者的 WP 博客输入不同的 rel="author" 和 rel="publisher" 属性？

> ID：14658485
> 
> 赞同：0
> 
> 时间：2013-02-02T04:08:52.407
> 
> 标签：wordpress, blogs

我真的很想找到一种方法或插件（有效），为具有多个作者的博客输入不同的 rel="author" 和/或 rel="publisher" 属性。

这样，在 Google SERP 中，我写的一篇文章可能会显示为：

```
Jason Weber Meta Title of that post
(my picture) Meta description of that post 
```

而另一个人的帖子 SERP 可能如下所示：

```
Tracy Smith Meta Title of Tracy's post
(Tracy's picture) Meta description of Tracy's post 
```

是否有人对可以实现此目的的插件、hack 或修复有建议？任何指导或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:27:06.897

因此，您的网站有许多为您的网站撰写文章的作家，您想在 SERP 上展示他们个人的 google plus 信息。我认为它可能对您有所帮助[http://wordpress.org/extend/plugins/google-plus-authorship/](http://wordpress.org/extend/plugins/google-plus-authorship/)。我没有使用它，但它支持多个作者。

# javascript - 赋予 DOM 节点 Javascript 功能

> ID：14658490
> 
> 赞同：0
> 
> 时间：2013-02-02T04:09:57.467
> 
> 标签：javascript, html, dom

我正在开发一个单页应用程序，并且相当多的 DOM 节点构造函数返回对他们创建的对象的引用。这是我的意思的一个例子：

```
if (!document.getElementById('playlistHeader')) {
        appView.buildKit.playlist.headerWrap();
    }

    // construct element
    var secondaryBtnsWrap = document.createElement("div");
    secondaryBtnsWrap.id = "playlistSecondaryBtnWrap";
    secondaryBtnsWrap.className = "clearright right";

    // attach it
    document.getElementById('playlistHeader').appendChild(secondaryBtnsWrap);

    // return reference to dom node
    return secondaryBtnsWrap; 
```

我认为在视图之间进行更改时销毁和重新创建节点是多余的，因此我开始努力通过为它们提供处理擦除的自定义函数来擦除某些节点（站点的子部分）的内容。

```
// build wipe function
    secondaryBtnsWrap.wipe = function(){

        // do custom wiping here
    } 
```

这个想法是“重置”部分 UI 并重建视图之间的差异。例如，如果有一个我们无论如何都需要的按钮，那么擦除功能不会删除它。这样就消除了创建相同元素的额外工作量。

在某些情况下，获取对节点的引用并触发附加的自定义函数要容易得多，但我想知道它是否真的是一个好主意，或者它是否只是一个好主意（但不是）。

* * *

**TL;DR 版本**

给 DOM 节点 Javascript 函数是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:47:14.600

DOM 节点是一流的对象。给他们分配你自己的财产没有错。只是不要尝试覆盖任何内置函数（也许除了事件处理程序，但你真的应该使用`attachEvent`/ `addEventListener`）。在我看来，它是 javascript 在用户界面开发方面最方便的功能之一。

您还可以使用生成自己的 DOM 节点的标准对象来构建您的页面。您可以附加事件侦听器，这些侦听器调用所述对象上的函数以进行交互。使用闭包来引用所有者对象。例如：

```
function Foo() {
    this.element = undefined;
    this.createTextbox();
}

Foo.prototype.createTextbox = function() {
    var $self = this;
    this.element = document.createElement('input');
    this.element.type = 'text';
    this.element.addEventListener('change', function() { 
        $self.onChange.apply($self, arguments); 
    });
}

Foo.prototype.onChange = function() {
    console.log(this.element.value);
}

Foo.prototype.Render = function(target) {
    target = target || document.body;
    target.appendChild(this.element);
}

var foo = new Foo();
foo.Render(); 
```

两种方法都同样有效，但我想说的是后者在需要对设计或功能进行重大修改时可能更方便（而不是在两个地方更改 id、类和布局，您只需在一个地方更改它们）。

# android - 如何使 OnDrawerOpenListener() 在 android 中工作

> ID：14658494
> 
> 赞同：0
> 
> 时间：2013-02-02T04:10:23.283
> 
> 标签：android, label, deprecated, ontouchlistener, slidingdrawer

有人可以解释一下如何让它工作吗？说它已弃用，只是想知道我是否可以强制使用它，或者是否有其他方法可以在打开 SlidingDrawer 时更改我的标题标签，然后在关闭时将其更改回来。我还有很多东西要学，所以如果可能的话，请回复一些易于剪切和粘贴的内容；）谢谢。

杰西

```
 OnDrawerCloseListener onClick_DrawerClosed = new OnDrawerCloseListener() {
            @Override
            public void onDrawerClosed() {
                titletext.setText("Flow Charts");    
            }
        };

        OnDrawerOpenListener onClick_DrawerOpened = new OnDrawerOpenListener() {
            @Override
            public void onDrawerOpened() {
                titletext.setText("Options Menu");
            }
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:56:14.843

从 API 17（最新）开始，SlidingDrawer 通常已被弃用。这并不意味着您不能使用 SlidingDrawer 和它的方法，而是它“不受欢迎”并且 Eclipse 会给您警告。您可以通过右键单击警告并选择“抑制...”来消除这些警告

在这里寻找更彻底的讨论：

[不推荐使用 SlidingDrawer](https://stackoverflow.com/questions/13478993/slidingdrawer-deprecated)

# python - 语法错误，需要换行

> ID：14658496
> 
> 赞同：3
> 
> 时间：2013-02-02T04:11:07.480
> 
> 标签：python, python-2.7, pydev

我在 Eclipse 中使用 python 2.7.3 PyDev。来自[搬运工词干分析器源代码](http://tartarus.org/martin/PorterStemmer/python.txt)

```
if __name__ == '__main__':
    p = PorterStemmer()
    if len(sys.argv) > 1:
        for f in sys.argv[1:]:
            infile = open(f, 'r')
            while 1:
                output = ''
                word = ''
                line = infile.readline()
                if line == '':
                    break
                for c in line:
                    if c.isalpha():
                        word += c.lower()
                    else:
                        if word:
                            output += p.stem(word, 0,len(word)-1)
                            word = ''
                        output += c.lower()
                print output    # ---- ERROR
            infile.close() 
```

我得到错误

> . "^=" ... "<<=" ... ">>=" ... "**=" ... "or" ... "and" ... "not" ... "是”...“在”...“如果”...“;” ……”，……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T04:19:44.580

检查您使用的 Python 语法版本（不记得是全局设置还是每个项目设置）。看起来你的语法是为 Py3k 设置的，`print`现在它是一个函数而不是一个语句。

编辑：我认为该代码没有理由不能正常运行，前提是 PyDev 没有得到它的全部帮助 - 如果你不能直接从命令行调用的 python.exe 运行它，实际上可能有一些鬼鬼祟祟的我错过了糟糕的语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T04:25:55.563

尝试，`print`作为一个函数......

```
print(output) 
```

另外，请检查您的 Eclipse 设置以查看您使用的是哪个 python 版本...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T21:26:17.753

所以问题是 PyDev 有一个在编辑器中使用的内置解释器，但在运行代码时它使用外部解释器。虽然我的计算机上只安装了 python 2.7.3 并且由 eclipse pydev 自动配置，但内置解释器设置为 3.0。此外，内置解释器设置在 PyDev 下的选项菜单中不可用，而是被隐藏了。当在文件资源管理器中右键单击项目标题并选择属性时，会出现另一个解释器设置。此外，需要关闭所有编辑器窗口并重新打开它们才能使用更新的设置。

# batch-file - 批处理 - 获取第一个和最后一个双引号之间的字符串

> ID：14658498
> 
> 赞同：3
> 
> 时间：2013-02-02T04:11:28.430
> 
> 标签：batch-file

我有一个这样的字符串：

```
Testing:"abc"def"ghi" 
```

我想得到：`abc"def"ghi`并将其放入变量中，有什么可能的方法吗？

我想要一种通用的方法（第一个和最后一个引号，而不是第一个和第四个引号）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T05:24:57.330

只要字符串不包含未引用的特殊字符，这将可靠地工作`&` `|` `>` `<` `^`

```
@echo off
set str=Testing:"abc"def"ghi"extra
echo str = %str%
set "new=%str:*"=%
echo new = %new% 
```

- 输出 -

```
str = Testing:"abc"def"ghi"extra
new = abc"def"ghi 
```

***解释***

这个解决方案有两个部分，都在同一行代码中。

**1）删除所有字符到第一个`"`。**

这部分使用了变量扩展的文档搜索和替换功能，搜索字符串前有一个星号。`HELP SET`以下是通过键入或`SET /?`从命令提示符获得的帮助的摘录。

```
Environment variable substitution has been enhanced as follows:

    %PATH:str1=str2%

would expand the PATH environment variable, substituting each occurrence
of "str1" in the expanded result with "str2".  "str2" can be the empty
string to effectively delete all occurrences of "str1" from the expanded
output.  "str1" can begin with an asterisk, in which case it will match
everything from the beginning of the expanded output to the first
occurrence of the remaining portion of str1. 
```

**2) 查找最后一次出现`"`的字符串并在该点截断字符串。**

整个 SET 赋值表达式可以用引号括起来，并且封闭的引号将被丢弃，最后一个引号之后的所有文本都将被忽略。下面的语句将定义变量`var`的值为`value`。

```
set "var=value" this text after the last quote is ignored 
```

如果没有最后一个引号，则该行的整个其余部分都包含在该值中，可能带有隐藏空格。

```
set "var=This entire sentence is included in the value. 
```

我不知道此功能的任何官方文档，但它是批处理文件开发的重要工具。

此过程发生*在*第 1 部分的扩展完成之后。`"`因此 SET在扩展值中最后一次出现时截断。

# c++ - 数量最多的现存恐龙

> ID：14658500
> 
> 赞同：-8
> 
> 时间：2013-02-02T04:12:51.627
> 
> 标签：c++, c

> **可能重复：**
> [算法解决一次查找最大值](https://stackoverflow.com/questions/14646668/algorthim-to-solve-find-max-no-at-a-time)

我们得到一个由 2n 个整数组成的数组，其中这个整数数组中的每一对分别代表恐龙的出生年份和死亡年份。我们要考虑的有效年份范围是 [-100000 到 2005]。例如，如果输入是：

-80000 -79950 20 70 22 60 58 65 1950 2004

这意味着第一只恐龙的出生年份分别为 –80000 年和死亡年份 –79950 年。同样，第二只恐龙的寿命从 20 岁到 70 岁，以此类推。

我们想知道同时存在的最大数量的恐龙。给定上面的 2n 个整数数组，编写一个方法来计算它。

这是我到目前为止所尝试的：

```
#include<stdio.h>
#include<stdlib.h>
#include <stddef.h>

static void insertion_sort(int *a, const size_t n) 
{
    size_t i, j;
    int value;
    for (i = 1; i < n; i++) {
        value = a[i];
        for (j = i; j > 0 && value < a[j - 1]; j--) {
            a[j] = a[j - 1];
        }
        a[j] = value;
    }
}

int  main(){
    int arr[10]={-80000,-79950,20,70,22,60,58,65,1950,2004};
    int strt[5],end[5];
    int bal[5];
    int i,j,k,l,m,length;
    l=0;
    m=0;

    for (i=0; i<10; i++){
        //printf("i = %2d arr[i] = %2d\n", i, arr[i]);
        if(i%2==0) {
            strt[l]=arr[i];
            l++;
        } else {
            end[m]=arr[i];
            m++;
        }
    }

    insertion_sort(strt, sizeof strt / sizeof strt[0]);
    insertion_sort(end, sizeof end / sizeof end[0]);
    k=sizeof(end)/sizeof(int);

    for(j=0;j<5;j++) {
        bal[i]=strt[i]-end[k-1];
        k--;
    }
    length=sizeof bal / sizeof bal[0];
    insertion_sort(bal, sizeof bal / sizeof bal[0]);
    printf("answer is = %2d",bal[length-1]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:55:01.620

我会做类似的事情：

1.  创建一个地图来保存数据
2.  成对阅读
3.  对于 i = pair.first 到 pair.second ++map[i]
4.  如果有更多对，从 2 开始重复
5.  找到地图中计数最多的元素。该元素的关键是年份。

从理论上讲，您可以使用矢量而不是地图，但它可能会人口稀少，因此地图更有意义。

# python-2.7 - Python 2.7 的 Python Linked API 引发错误

> ID：14658501
> 
> 赞同：1
> 
> 时间：2013-02-02T04:12:58.157
> 
> 标签：python-2.7, linkedin

这段从linkedin获取技能的代码在python 2.6上运行良好

```
from linkedin import helper
from liclient import LinkedInAPI
import json
AUTH_TOKEN='{"oauth_token_secret": "TOKEN SECRET", "oauth_authorization_expires_in": "0", "oauth_token": "OAUTH TOKEN", "oauth_expires_in": "0"}'
consumer_key = 'CONSUMER KEY'
consumer_secret = 'CONSUMER SECRET'
APIClient =LinkedInAPI(consumer_key, consumer_secret)
request_token = APIClient.get_request_token()
field_selector_string = ['skills']
results = APIClient.get_user_profile(json.loads(AUTH_TOKEN), field_selector_string)
Skills = results[0].skills
print  Skills 
```

但是当我用 python 2.7 运行相同的代码时，会出现这个错误

```
Traceback (most recent call last):
File "linkedintest.py", line 10, in <module>
results = APIClient.get_user_profile(json.loads(AUTH_TOKEN), field_selector_string)
File "/var/www/shine/liclient/__init__.py", line 82, in get_user_profile
resp, content = client.request(url, 'GET')
File "/var/www/shine/liclient/oauth2/__init__.py", line 603, in request
req.sign_request(self.method, self.consumer, self.token)
File "/var/www/shine/liclient/oauth2/__init__.py", line 357, in sign_request
self['oauth_signature'] = signature_method.sign(self, consumer, token)
File "/var/www/shine/liclient/oauth2/__init__.py", line 683, in sign
hashed = hmac.new(key, raw, sha)
File "/usr/lib/python2.7/hmac.py", line 133, in new
return HMAC(key, msg, digestmod)
File "/usr/lib/python2.7/hmac.py", line 72, in __init__
self.outer.update(key.translate(trans_5C))
TypeError: character mapping must return integer, None or unicode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:47:53.080

尝试这个：

```
from linkedin import helper
from liclient import LinkedInAPI
import json
AUTH_TOKEN='{"oauth_token_secret": "TOKEN SECRET", "oauth_authorization_expires_in": "0", "oauth_token": "OAUTH TOKEN", "oauth_expires_in": "0"}'

# converting unicode dict to str dict
AUTH_TOKEN=json.loads(AUTH_TOKEN)
AUTH_TOKEN_DICT = {}
for auth in AUTH_TOKEN:
    AUTH_TOKEN_STR[str(auth)] = str(AUTH_TOKEN[auth])

consumer_key = 'CONSUMER KEY'
consumer_secret = 'CONSUMER SECRET'
APIClient =LinkedInAPI(consumer_key, consumer_secret)
request_token = APIClient.get_request_token()
field_selector_string = ['skills']

results = APIClient.get_user_profile(AUTH_TOKEN_DICT, field_selector_string)
Skills = results[0].skills
print  Skills 
```

# javascript - Jquery填写表单输入文本值

> ID：14658503
> 
> 赞同：0
> 
> 时间：2013-02-02T04:13:00.980
> 
> 标签：javascript, jquery

在页面加载时，我希望 jquery 将 UUID 方法作为值加载到 UUID 字段，以便我看到它在提交时作为参数传递。[这个](https://stackoverflow.com/questions/10120481/html-form-fill-input-with-value-if-nothing-is-entered)和这个[SO 帖子](https://stackoverflow.com/questions/8914161/fill-in-a-form-with-jquery)有所帮助，但我仍然没有到达那里......

```
<FORM ACTION="urlAuction.html" METHOD=GET>
 <INPUT TYPE=TEXT NAME="url">
 <INPUT id="uuid" TYPE=TEXT NAME="uuid" VALUE="" >
 <INPUT TYPE=SUBMIT VALUE=Submit>
</FORM>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript"> 
 $(document).ready(function() {
     var $uuid = $('#uuid'); 
         $uuid.val(GUID());
 });
 function GUID ()
 {
  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
      return v.toString(16);
 });
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:26:36.123

您的 GUID 函数缺少 a`return`来返回它为您生成的值：

```
 function GUID ()
 {
     return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c)
     {
        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
        return v.toString(16);
     });
 } 
```

它看起来像你格式化大括号的方式返回一些东西，但实际上它`return v.toString(16)`属于匿名回调函数，用于用`replace`随机的十六进制数字填充每个数字。

# url-rewriting - Nginx 重写：用查询字符串替换尾随数字

> ID：14658506
> 
> 赞同：0
> 
> 时间：2013-02-02T04:13:35.790
> 
> 标签：url-rewriting, nginx

我想在 Nginx 中实现以下目标：

```
/product/view/32 ---> /product/view?id=32
/product/add/32 ----> /product/add?id=32
/product/edit/32 ---> /product/edit?id=32
/post/view/32 ---> /post/view?id=32
/post/add/32 ----> /post/add?id=32
/post/edit/32 ---> /post/edit?id=32
/foo/bar/32 ---> /foo/bar?id=32 
```

如果您有一个特定的文件，那么您可以编写如下内容：

```
rewrite ^/path/(.*)$ /path/file.php?id=$1 last; 
```

但是您将如何处理上述情况，您不一定知道具体路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:59:06.227

你给出了三个路径，它们都有共同的模式`/product/`，你说没有必要知道具体的路径，所以我可以假设你考虑了你的路径的其余部分。那么这个可以改变的将是`view/32`，`/add/32`或`/edit/32`。在这种情况下，您可以尝试这样`rewrite`的指令：

```
rewrite ^/product/([a-zA-Z]+)/[0-9]+) /product/$1?id=$2 last; 
```

在这里，作为变量`$1`，您将获得`/product/`路径和您的 id 值之间的任何内容。变量`$2`只会将`id`原始路径末尾的数字表示为数字。

* * *

**根据您问题的变化，**看起来总是有不变的路径，在重写后永远不会改变，例如：

当主路径开始时，`/product/add`您总是将它再次重写为`/product/add`，如果是`/post/add`，它也会被重写为`/post/add`。唯一会改变的是你的 id 从`/32`to `?id=32`。在这种情况下，我们可以通过与第一个解决方案相同的方式实现它，但只需稍作改动：

```
rewrite ^/([a-zA-Z]+/[a-zA-Z]+)/([0-9]+)$ /$1?id=$2; last; 
```

这里作为变量`$1`将被设置`product/view`, `product/add`, `post/edit`,`foo/bar`和所有其他匹配模式的情况`([a-zA-Z]+/[a-zA-Z]+)`。对于变量`$2`，将仅设置`id`停留在原始 url 末尾的值。

# javascript - jQuery效果突出显示不起作用

> ID：14658507
> 
> 赞同：4
> 
> 时间：2013-02-02T04:13:44.630
> 
> 标签：javascript, jquery, jquery-effects

我正在使用我经常使用的高亮功能将我的头撞到墙上。

在我运行时的控制台中：

```
$('.2').effect('highlight', {}, 3000); 
```

它返回：

[​…​​​]

这是我想强调的元素。但是它没有突出显示它，我没有收到任何错误。

有趣的故事，因为当它起作用时；但我喜欢高光的地方，它本身有一个持续时间，它会消除高光。

```
$(".2").css({ backgroundColor: "#FFFF88" }); 
```

欢迎任何想法！

[http://jsfiddle.net/XxyjE/1/](http://jsfiddle.net/XxyjE/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T19:55:58.887

您还有什么设置该元素的背景颜色？上面那些元素呢？

例如，我注意到 Twitter Bootstrap 的 .table-striped 类上的深色会出现此问题。看起来他们正在为 TD 着色，这意味着您可以突出显示深色的 TR，直到您的脸变成蓝色，并且您仍然不会看到颜色变化。

尝试一个：

```
$('.2 *').effect('highlight', {}, 3000) 
```

如果您想确认这是否是问题所在。然后尝试从那里找到更具体的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T06:06:20.083

```
$.fn.highlight = function(){
  this.css("background", "#ffff99")
  var self = this;
  setTimeout(function(){
    self.css("background", "inherit");
  }, 500);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T19:58:24.637

我有一个 style="background:white;" 附加到我的元素。当我删除它时，亮点工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-07T15:15:11.583

这是我知道的一个老问题，但我最近遇到了类似的问题，并想与遇到类似问题的任何其他人分享修复程序。

问题是我试图突出显示的元素`transition`设置了 CSS 属性，这显然干扰了突出显示效果（使其完全不可见）。

# c - printf 在格式字符串中添加 \n

> ID：14658508
> 
> 赞同：0
> 
> 时间：2013-02-02T04:14:17.073
> 
> 标签：c, printf, fseek

我正在尝试在 C 中构建 ar unix 命令的一个版本。我正在处理详细的输出，并且已经涵盖了大部分内容。但是，当我通读文件并将文件名放在格式字符串中时，会不断弹出一个秘密的新行。

```
void verbose(char *archive){
    printf("\nI'm in -v!\n");

    int mode;
    size_t readNum;
    time_t mtime;
    struct tm * time_box;
    long long arch_size, file_size;
    long uID, gID;
    char header[60], file_name[16];
    char* tokens;
    FILE *fp = fopen(archive, "r");
    if (!fp)
        fail('f');

    //get file size
    fseek(fp, 0, SEEK_END);
    arch_size = ftell(fp);
    rewind(fp);

    //move over ARMAG
    if(fseek(fp, strlen(ARMAG), SEEK_SET) != 0)
        fail ('z');

    //loop over files
    while(ftell(fp) < arch_size -1){
        //reads header into
        readNum = fread(header, 1, sizeof(header), fp);
        if(readNum != sizeof(header))
            fail('r');

        tokens = strtok(header, " ");
        strcpy(file_name, tokens);
        mtime = (time_t)(atol(tokens = strtok(NULL, " ")));
        uID = atol(tokens = strtok(NULL, " "));
        gID = atol(tokens = strtok(NULL, " "));
        mode = atoi(tokens = strtok(NULL, " "));
        file_size = atoll(&header[48]);
        time_box = localtime(&mtime);

        printf("%d"
                "\t%ld"
                "/%ld"
                "\t\t%lld "
                "%s "
                "%s\n", mode, uID, gID, file_size, &asctime(time_box)[4], file_name);

        //move over file
        if(fseek(fp, file_size, SEEK_CUR) != 0)
            fail ('z');
    }
    fclose(fp);
}

void delete(){
    printf("\nI'm in -d!\n");
} 
```

此代码产生如下输出：

```
I'm in -v!
100644  502/20      28 Jan 27 16:23:59 2013
 b.txt
100644  502/20      17 Jan 27 16:24:06 2013
 c.txt
100644  502/20      28 Jan 27 16:24:15 2013
 d.txt
100644  502/20      17 Jan 27 16:24:06 2013
 c.txt 
```

我无法弄清楚为什么文件名在新行上。这太痛苦了。我想也许我没有正确寻找，但如果我向上移动 1 个字节，它会开始切断名称，所以我认为不是这样。

另外，奖金，如果有人知道将八进制转换为unix文件权限的方法，我会很兴奋（即-rw-rw-rw）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:18:49.527

因为`asctime`生成一个在终止字符`\n`之前具有的 C 字符串。[在这里](http://www.cplusplus.com/reference/ctime/asctime/)`NUL`查看参考。

> 该字符串后跟一个换行符 ('\n') 和终止空字符。

# c++ - Boost Graph：在度数 > 0 的顶点上调用 remove_vertex 时会发生什么

> ID：14658512
> 
> 赞同：0
> 
> 时间：2013-02-02T04:15:20.823
> 
> 标签：c++, boost-graph

来自函数的升压图手册`remove_vertex`

> 假设在删除顶点 u 时没有边。确保这一点的一种方法是事先调用 clear_vertex() 。

如果你调用`remove_vertex()`一个连接到其他顶点的顶点会发生什么？它会导致未定义的行为吗？

从手册中的引用来看，似乎会发生一些**不好的**事情。如果是这样，为什么以这种方式调用它时不会抛出异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T08:05:01.397

除了一些算法和实用程序之外，Boost Graph Library 通常不会抛出异常，尤其是在访问或修改图的结构时。我想这个决定是由于性能原因而做出的。

我会将这个 API 模型与 STL 进行比较。在 STL 中，违反先决条件会导致未定义的行为，而不是引发异常。

# android - Android IntentService 未启动

> ID：14658514
> 
> 赞同：11
> 
> 时间：2013-02-02T04:16:02.510
> 
> 标签：android, intentservice

我知道这个问题已经被问过很多次了，但是所有其他线程根本没有解决我的问题，我看不出我的代码有什么问题。也许我在这里错过了一些东西，有人可以帮我吗？

意图服务的代码：

```
package Services;

import android.app.IntentService;
import android.content.Intent;
import android.widget.Toast;

public class WifiSearchService extends IntentService {

  /** 
   * A constructor is required, and must call the super IntentService(String)
   * constructor with a name for the worker thread.
   */
  public WifiSearchService() {
      super("WifiSearchService");
  }

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {
      Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();
      return super.onStartCommand(intent,flags,startId);
  }

  /**
   * The IntentService calls this method from the default worker thread with
   * the intent that started the service. When this method returns, IntentService
   * stops the service, as appropriate.
   */
  @Override
  protected void onHandleIntent(Intent intent) {
      // Normally we would do some work here, like download a file.
  // For our sample, we just sleep for 5 seconds.
      long endTime = System.currentTimeMillis() + 5*1000;
      while (System.currentTimeMillis() < endTime) {
          synchronized (this) {
              try {
                  wait(endTime - System.currentTimeMillis());
              } catch (Exception e) {
              }
          }
      }
  }

} 
```

通过轻弹开关启动服务：

```
package com.cdobiz.wifimapper;

import Services.WifiSearchService;
import android.os.Bundle;
import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.RunningServiceInfo;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.Switch;

public class MainActivity extends Activity {

    private Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        context = this;

        setContentView(R.layout.activity_main);

        Switch serviceSwitch = (Switch) this.findViewById(R.id.switchService);

        serviceSwitch.setChecked(isMyServiceRunning());

        serviceSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener(){

            @Override
            public void onCheckedChanged(CompoundButton view, boolean state) {

                if(state){
                    startService(new Intent(context, WifiSearchService.class));
                }else{
                    stopService(new Intent(context, WifiSearchService.class));
                }
            }

        });

    }

    private boolean isMyServiceRunning() {
        ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
            Log.v("debug", service.service.getClassName());
            if ("com.cdobiz.wifimapper.services.WifiSearchService".equals(service.service.getClassName())) {
                return true;
            }
        }
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.cdobiz.wifimapper"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.cdobiz.wifimapper.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:enabled="true" android:name=".services.WifiSearchService"></service>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-02T05:19:27.430

我能够通过将包名称更改为 com.cdobiz.wifimapper.services 并更改清单中服务的包名称来运行您的服务。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-07T08:06:00.880

我通过确保该[服务](http://developer.android.com/guide/topics/manifest/service-element.html)已在 App-Manifest 中注册来解决了这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-12T10:52:59.793

我有同样的问题。我通过复制课程内容代码文本解决了它。然后我删除了该类并通过右键单击包 -> 新建 -> 服务 -> 服务（意图）再次创建了相同的类然后我将相同的代码粘贴到该类中并且它可以工作。

我希望这对某人有帮助

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-28T18:42:24.447

我解决了我的 Intent 服务的一个问题，它没有通过使用开始

```
Intent intent = new Intent(this,UploadService.class);
    this.startService(intent); 
```

开始我的服务

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-19T07:51:26.970

`android:enabled="true"`如果 ser 在清单中尝试

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-27T14:05:38.407

我有同样的问题。为了解决它，我删除了 Intenservice 类，然后我使用以下方法创建了一个新类：右键单击>新建>服务>服务（IntentService）

# python - 在python中的变量周围打印双引号

> ID：14658523
> 
> 赞同：0
> 
> 时间：2013-02-02T04:17:31.447
> 
> 标签：python, linux

我是 python 新手，想在用户名的值周围打印双引号，它的值在 main 中传递。我试着把\（反斜杠）没有帮助（使用python 3.3）

```
def Request(method,username,password):
  print ('</'+method+ 'Name='+username+ ' ' +'Password='+password+'/>') 

expectd output

</test Name="bob" Password="bob@123" />

 Request('test','bob','bob@123') calling the function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:22:49.597

你总是可以使用类似的东西：

```
'</%s Name="%s" Password="%s" />' % (method, username, password) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T04:23:26.583

`print('</{0} Name="{1}" Password="{2}"/>'.format(method, username, password))`

String.format 是当今替换变量的首选方式。

您还可以使用命名值：

`print('</{method} Name="{username}" Password="{password}/>'.format(method=method, username=username, password=password))`

还有更多方法可以很好地格式化字符串。

查看[http://docs.python.org/2/library/stdtypes.html#str.format](http://docs.python.org/2/library/stdtypes.html#str.format)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T04:23:08.343

最简单的方法是在函数调用中添加 '"' 字符串，如下所示：

```
def Request(username,password):
    print ('</' + 'Name=' + '"' + username + '"' + ' ' + 'Password=' + '"' + password + '"' +'/>') 
```

# symfony - 如何在网站上制作 Symfony2 Bundle

> ID：14658525
> 
> 赞同：0
> 
> 时间：2013-02-02T04:18:38.963
> 
> 标签：symfony, symfony-2.1

抱歉，如果这是一个愚蠢的问题，但我一直在四处寻找，但没有找到答案。我是 Symfony2 的新手，在过去的几周里，我在我网站的服务器上安装了它，制作了一个包并构建了所有页面，并使用它的 app_dev.php url 对其进行了测试。我现在准备在我的网站上公开它，但我不知道如何去做。基本上，我想激活捆绑包，所以不必去网站/symfony/web/app_dev.php/Page，我可以去网站/页面。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:10:43.310

好的，所以这不是一个真正的 Symfony 问题，它在很大程度上取决于您的环境（主要是您使用的网络服务器）。你要做的就是将 symfony 项目的 web 文件夹设置为你的根文件夹（也就是现在的 symfony 文件夹），并将 symfony 文件夹中的所有其他文件夹上移一层。因此，假设您将 httpdocs 或 www 文件夹作为根文件夹，您必须将 symfony/web 的内容复制到该文件夹​​中，并将其他所有内容从 symfony 文件夹中移至 httpdocs 文件夹上一级。话虽这么说，可能还有更多的配置。这里有一些资源可以帮助您入门：

[http://symfony.com/doc/current/cookbook/deployment-tools.html](http://symfony.com/doc/current/cookbook/deployment-tools.html)

[Symfony2：如何在子目录中部署（Apache）](https://stackoverflow.com/questions/12423983/symfony2-how-to-deploy-in-subdirectory-apache)

请记住，在实时模式下，您应该访问 app.php 而不是 app_dev.php ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:58:36.080

我倾向于通过将这些行添加到根目录上的 .htaccess 文件来做到这一点：

```
<IfModule mod_rewrite.c>
RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ web/$1 [QSA,L]
</IfModule> 
```

然后 web 目录中的原始 .htaccess 文件负责其余的工作。

# python - 我正在尝试使用 cx_Freeze (windows) 将 PyEnchant 库包含到我的 exe 文件中

> ID：14658526
> 
> 赞同：1
> 
> 时间：2013-02-02T04:18:43.723
> 
> 标签：python, pyqt, cx-freeze, pyenchant

我试图将 PyEnchant 库包含到我的 exe 文件中。我该怎么做呢？

我一直在用 cx_Freeze 对此进行测试：

"C:\Python33\python.exe" "C:\Python33\Scripts\cxfreeze" "C:\Temp\CSV Viewver\csv_viewer.py" --base-name=Win32GUI --include-modules "pyenchant" --目标目录“C:\Temp\CSV Viewver\dist”

这不起作用：/

* * *

我正在使用：Python 3.3 (x86) / cx_Freeze 4.3.1 (x86) / pyenchant 1.6.5 (x86)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:46:38.593

1.  您导入的包称为`enchant`，而不是`pyenchant`。
2.  ~~`include-modules`cxfreeze没有选项 - 它被调用`packages`（或`modules`用于单个文件模块）。~~[我错了][查看文档](http://cx_freeze.readthedocs.org/en/latest/distutils.html#build-exe)。

因此，请尝试使用 option `--packages=enchant`。

但是如果你的脚本导入附魔，cx_Freeze 应该会自动选择它，这样你就不需要指定它了。

# java - 更改 imageview 的图像

> ID：14658527
> 
> 赞同：0
> 
> 时间：2013-02-02T04:18:48.007
> 
> 标签：java, android, widget, textview, appwidgetprovider

我的布局中有一个 imageview，我希望它每 x 秒通过 appwidgetprovider 活动更改一次。但是每次我使用 findViewById 时，它都会给我一个错误，即 findViewById(int) 方法对于 Widget 类型是未定义的。这是我的代码

```
public class Widget extends AppWidgetProvider {
    int []imageArray={R.drawable.pic1,R.drawable.pic2,R.drawable.pic3};
    private Handler mHandler = new Handler();
    RemoteViews views;
    AppWidgetManager appWidgetManager;
    ComponentName currentWidget;
    Context context;
    TextView textview;
    DateFormat format = new SimpleDateFormat("HH:mm");

    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
        this.context = context;
        this.appWidgetManager = appWidgetManager;
        views = new RemoteViews(context.getPackageName(), R.layout.widget);
        currentWidget = new ComponentName(context, Widget.class);
        mHandler.removeCallbacks(mUpdateTask);
        mHandler.postDelayed(mUpdateTask, 100);

    }

    final Runnable mUpdateTask = new Runnable() {
        public void run() {

            Intent informationIntent = new Intent(context, MainActivity.class);
            PendingIntent infoPendingIntent = PendingIntent.getActivity(
                    context, 0, informationIntent, 0);
            views.setOnClickPendingIntent(R.id.Widget, infoPendingIntent);
            views.setTextViewText(R.id.widget_textview,
                    "" + format.format(new Date()));
            appWidgetManager.updateAppWidget(currentWidget, views);
            mHandler.postDelayed(mUpdateTask, 1000);

        }
    };

    @Override
    public void onDisabled(Context context) {
        super.onDisabled(context);
        mHandler.removeCallbacks(mUpdateTask);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:32:13.163

您`findViewById`只能在`Activity`. 您可以获取一个`ImageView`实例`Activity`并将其作为参数传递给`Widget`.

# php - 验证电子邮件地址是否存在

> ID：14658537
> 
> 赞同：0
> 
> 时间：2013-02-02T04:20:07.890
> 
> 标签：php, mysql

我是 PHP 的新手。我的目标是向在我的系统中注册的用户发送电子邮件。

这是我的代码：

```
$msg= " Hi $gen./$lName,  copy and paste this code in order to activate  
your account copy and paste this code:$num" ;
$email = "$emailadd";
$name= "GoodFaith Network Marketing Inc.";
$subject = "Account Activation";
$message = wordwrap($msg,70) ;
$sender = "cjoveric@myalphaedge.com";
$mail_header="From: ".$name."<". $sender. ">\r\n";
$sendmail=mail($email, $subject,$message, $mail_header ); 
```

我能够发送电子邮件，但我的问题是我想知道用户的电子邮件地址是否存在于 Yahoo、GMail 或其他邮件服务中。

有什么办法可以过滤掉无效的电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:48:17.333

使用 SMTP 邮件最好且易于使用的[SMTP](http://www.phpgang.com/send-email-with-smtp-and-php-mailer_105.html)。

```
$mail->IsHTML(true);
$mail->From="admin@example.com";
$mail->FromName="Example.com";
$mail->Sender=$from; // indicates ReturnPath header
$mail->AddReplyTo($from, $from_name); // indicates ReplyTo headers
$mail->AddCC('cc@phpgang.com.com', 'CC: to phpgang.com');
$mail->Subject = $subject;
$mail->Body = $body;
$mail->AddAddress($to);
if(!$mail->Send())
{
      $error = 'Mail error: '.$mail->ErrorInfo;
      return true;
 }
 else
 {
      $error = 'Message sent!';
      return false;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:22:16.423

并不真地。你能做的最好的事情就是发送一封电子邮件，看看用户是否回复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:02:17.763

对某些用户来说，对电子邮件地址进行正则表达式检查可能会令人沮丧，具体取决于正则表达式。所以，我建议跳过你的正则表达式测试，只发送带有确认链接的验证电子邮件——一旦有人提出新的 DNS 或 SMTP 扩展，其他任何事情都会让你的应用程序变得脆弱并容易受到破坏。最好在他们注意的时候解决这个问题。

例如：
- 需要在您的网站中填写的确认码
- 一个链接，指向您的网站，需要访问

并且仍然不确定电子邮件之后是否存在，因为很容易简单地创建一个临时电子邮件以通过验证并在之后将其删除。

您可以使用 Google API 让您的用户使用他们的帐户登录，而不是验证电子邮件地址。也可以以类似的方式使用 OpenID。不过，即使这也不是 100% 完美的。但是，嘿，没有什么是 100% 的。我们都尽可能地努力做我们想要的工作。而已。

PS：ICANN 有望立即批准 UNICODE 域名。这将与电子邮件地址的正则表达式模式一起玩得很开心。

# c# - Window Service ProjectInstaller.Install(stateSaver As IDictionary)

> ID：14658542
> 
> 赞同：1
> 
> 时间：2013-02-02T04:20:48.740
> 
> 标签：c#, windows, service

我不明白要传入 ProjectInstaller.Install(stateSaver As IDictionary) 的 state Saver 的实际值是多少

我正在尝试手动安装 Windows 服务

在我的项目中添加两个项目并设置所有属性，1.Service.vb 2.ProjectInstaller.vb

在按钮上单击我尝试安装服务

```
 Dim projectInstaller As New ProjectInstaller()

     projectInstaller.Install(Nothing)
     projectInstaller.Commit(Nothing) 
```

在 projectInstaller.Install 给我一个错误“stateSaver 参数不能为空”。

我不知道，这可能与否。

请任何人知道这个答案，帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T09:20:27.213

我认为你需要类似的东西：

```
Dim state as new Hashtable();
projectInstaller.Install(state);
projectInstaller.Commit(state); 
```

如果您真的想做自助安装服务，请查看[此解决方案](https://stackoverflow.com/questions/1195478/how-to-make-a-net-windows-service-start-right-after-the-installation/1195621#1195621)。非常有用的东西。

# javascript - jquery - 如何使对话框按钮等待来自另一个对话框的响应？

> ID：14658543
> 
> 赞同：1
> 
> 时间：2013-02-02T04:20:48.367
> 
> 标签：javascript, jquery, dialog

**更新 1：我已经完成了回调函数。** 这是我的解决方案。我只是在打开对话框 2 时添加了一个回调函数，并添加了一个隐藏元素来接收对话框 2 中的用户更改。现在一切都完成了。谢谢！

[http://jsfiddle.net/N6qbR/2/](http://jsfiddle.net/N6qbR/2/)

--------老问题----

我的英语很差，所以我写得很轻松。

我正在使用 Jquery Dialog，我想显示多个对话框。（对话框 1 打开对话框 2 打开对话框 3...）

但问题是当我打开 dialog1 然后打开 dialog2（确认对话框，以便用户可以在 dialog2 中选择是/否并将值返回给 dialog1）。

我知道 Javascript 是异步的，所以当用户打开对话框 1 并单击打开对话框 2 时，它不会等待对话框 2 中的事件完成。

[这是我的源代码](http://jsfiddle.net/juRm9/2)（简单逻辑）

```
$("#dialogForm").dialog({           
        autoOpen: false,
        height: height,
        width: width,
        modal: true,        
        close: function() // Hàm này được gọi tự động khi đóng dialog
        {           
            //abc();
            // Sau khi thêm mới thành công thì reset lại form
            resetForm();
            $("#dialogForm").dialog( "close" );
        },          
        buttons: {
            "Ok": function() {              
                var choose = showDialogConfirm(250, 200, "Bạn có đồng ý thêm?", test);      
                if(choose == true)
                {
                    // do some good
                }

            },
            "Cancel": function() {
                $("#dialogForm").dialog("close");
            }
        }
    }); 

    $("#dialogForm").dialog("open");

function showDialogConfirm(width, height, message)
{
    $("#dialogConfirm").toggle();           
    $("#dialogConfirm").dialog({            
        autoOpen: false,
        height: height,
        width: width,
        modal: true,        
        close: function() // Hàm này được gọi tự động khi đóng dialog
        {           
            $("#dialogConfirm").dialog( "close" );
        },          
        buttons: {
            "Yes": function() {         
                return true;
                $("#dialogConfirm").dialog("close");
            },
            "No": function() {
                return false;
                $("#dialogConfirm").dialog("close");                    
            }
        }
    });

    $("#dialogConfirmContent").html(message);   
    $("#dialogConfirm") 
        .dialog("open");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:28:09.490

绝对应该在对话框中编写代码`callback functions`。在`dialog1`你刚刚弹出`dialog2`并因为它是确认对话框中，所以它应该是模型对话框并且你将代码绑定到`OK button`，然后你可以`get`“正确”的结果。`showconfirmdialog`通过添加新参数来更改： `callbackfunction`。

# java - 检查无限调用/recusrive 调用算法

> ID：14658544
> 
> 赞同：1
> 
> 时间：2013-02-02T04:21:06.070
> 
> 标签：java, loops, infinite-loop

这是我试图解决的问题的一个子集。假设我已经解析了一些代码，现在我正在尝试检查它是否在逻辑上正确。其中一项检查是函数调用不能调用自己或参与另一个相互调用的函数或一个函数的函数相互调用，等等。

我已经解决了这个问题，并且能够轻松地解决对自身的调用和下一级的调用，尽管它可能不是最佳代码。目前，性能不是问题。

这是我编写的逻辑以及一个示例：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class LoopTest {

    public static void main(String[] args) {
        List<Loop> test = new ArrayList<Loop>();
        test.add(new Loop("Function1",new String[]{"Function2", "Function1"}));
        test.add(new Loop("Function2",new String[]{"Function3", "Function1"}));
        test.add(new Loop("Function3",new String[]{"Function1"}));
        checkLooping(test);
    }

    public static void checkLooping(List<Loop> input) {
        for(Loop main : input) {
            for(int i = 0; i < main.getInputSize(); i++) {
                if(main.getName().equals(main.getInputValue(i))) {
                    System.err.println("Looping condition found at " + main.getName());
                }
                for(Loop inside : input) {
                    for(int j = 0; j < inside.getInputSize(); j++) {
                        if(main.getInputValue(i).contains(inside.getName()) && 
                                main.getName().equals(inside.getInputValue(j))) {
                            System.err.println("Looping condition found between " 
                                    + main.getName() + " and " + inside.getName());
                        }
                    }
                }
            }
        }
    }
}

class Loop {
    private String name;
    private String input[];

    public Loop(String name, String input[]) {
        this.name = name;
        this.input = input;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String[] getInput() {
        return input;
    }
    public void setInput(String[] input) {
        this.input = input;
    }

    public int getInputSize() {
        return input.length;
    }

    public String getInputValue(int i) {
        return input[i];
    }

    public boolean contains(String search) {
        if(name.contains(search))
            return true;
        else
            return false;
    }

    @Override
    public String toString() {
        return String.format("%s %s", this.name, Arrays.toString(input));
    }
} 
```

这不会捕捉到 Function1 存在于 Function3 中。因此，如果它比 1 级更深，根据我的逻辑它不会捕获它。还有其他方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:43:00.987

> 还有其他方法吗？

是的，这是一个图遍历问题；特别是在（在这种情况下）方法*调用*图中检测循环引用的问题。

一个简单的算法是这样的：

```
def detect_cycle(node, seen={}):
    if seen contains node:
        // found a cycle
    seen.add(node)
    foreach child in node.children:
        detect_cycle(child, seen) 
```

（您不需要显式的图结构来执行此遍历。可以使用相同的方法来遍历/检查另一个数据结构所*隐含的图。）*

然而，我们在这里实际做的是检查递归调用。我们将无法区分终止的递归（没问题）和无限递归（不好的）。这是一个非常困难的问题。（事实上​​，计算理论认为证明终止问题的最一般形式是没有解的。）

* * *

*作为一个问题或兴趣（:-)）上面的图遍历算法是一个具有良好*递归的程序示例。然而，编写一个可以证明它会终止的程序将是一项巨大的工作……并确定它不会终止的理论案例！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:31:56.270

感谢@StephenC

这是我转换为使用 Map 后的运行代码：

```
private static Map<String, List<String>> main;

// more code from above

public void detectCycle(String node, Stack<String> seen) {
        if(seen.contains(node)) {
            System.out.println("found cycle at " + node + " and " + seen.get(seen.size()-1));
            return;
        }
        else 
            seen.push(node);

        if(main.get(node) != null && main.get(node).size() != 0) {
            for(int i = 0; i < main.get(node).size(); i++) {
                detectCycle(main.get(node).get(i), seen);
            }
        }

        if(!seen.isEmpty())
            seen.pop();
        return;
} 
```

# java - 用偶数和奇数分隔文件中的行

> ID：14658545
> 
> 赞同：0
> 
> 时间：2013-02-02T04:21:34.247
> 
> 标签：java, arrays, file-io, bufferedreader

我有一个设置如下的文件：

```
10   10
12   32
38   12 
```

我需要将线放在一个阵列中的偶数槽中，将线放在另一个阵列中的奇数槽中。我是java新手，我不知道该怎么做。我已经在互联网上搜索了几个小时，但没有找到任何东西。请帮我！我会很感激的！

我正在使用缓冲读取器读取文件。我已经编写了一个程序，它读取文件并将所有行放在一个数组中，现在我只需要知道如何编写代码来分隔行。所以第 1,3,5,7,9 行将在一个数组中，第 2,4,6,8 行将在另一个数组中。

我将它们放在一个数组中的代码：

```
 private static final String FILE = "file.txt";
    private static Point[] points;

    public static void main(final String[] args){
        try{
            final BufferedReader br = new BufferedReader(new FileReader(new File(FILE)));
            points = new Point[Integer.parseInt(br.readLine())];
            int i = 0;
            int xMax = 0;
            int yMax = 0;
            while(br.ready()){
                final String[] split = br.readLine().split("\t");
                final int x = Integer.parseInt(split[0]);
                final int y = Integer.parseInt(split[1]);
                xMax = Math.max(x, xMax);
                yMax = Math.max(y, yMax);
                points[i++] = new Point(x, y);

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:32:59.887

尝试

```
 List<String> list1 = new ArrayList<>();
    List<String> list2 = new ArrayList<>();
    String line;
    for (int i = 0; (line = br.readLine()) != null; i++) {
        if (i % 2 == 0) {
            list1.add(line);
        } else {
            list2.add(line);
        }
    }
    String[] even = list1.toArray(new String[list1.size()]);
    String[] odd = list2.toArray(new String[list2.size()]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T04:25:23.100

```
String[] even = new String[100];
String[] odd = new String[100];
int counter = 0;
String text;

while(text=readLine() != null) {
    if(counter%2 == 0) {
         even[counter/2] = text;
    } else {
         odd[(counter-1)/2] = text;
    }

     counter++;
} 
```

您需要根据文件的行数调整数组的大小。

代码做了什么：循环不断读取行。如果 counter 是偶数，则 counter%2 == 0 为真。如果 counter 是偶数，则 counter/2 将是一个没有余数的整数，因此不会丢失任何内容。如果 counter 是奇数，则 (counter-1)/2 也是如此。

# php - 页面来源显示我的部分页面未显示

> ID：14658550
> 
> 赞同：0
> 
> 时间：2013-02-02T04:22:22.287
> 
> 标签：php, html

我正在做一个朋友的项目，我负责设计一个简单的网站来与他的数据库交互。我为他的一个页面编写了以下代码：

```
<!DOCTYPE html>

<html>
    <head>
        <title>Narcissus-OTS</title>
        <meta charset="utf-8" />
        <!--<meta http-equiv="refresh" content="3;url=./account.php" />-->
    </head>
    <body>
        <?php include("./common/database.php"); ?>
        <?php
            //Grabs user-submitted credentials from previous page
            $accountid = mysql_escape_string($_POST["acc"]);
            $password = mysql_escape_string($_POST["pass"]);
            $confirmation = mysql_escape_string($_POST["passtwo"]);
            //Insures there is no duplicate database entry for accountid
            $querycheck = $db->query("
                SELECT *
                    FROM accounts a
                    WHERE a.name = $accountid
                ");
            $checkifone = $querycheck->rowCount();
            //If no duplicate entry...
            if ($checkifone == 1) {
                echo "There is already an account with that name; please choose a different account number.";
            } else {
            //Confirms if passwords match
                if ($password == $confirmation) {
                    $passhash = sha1($password);
                    $database = $db->query("
                        INSERT INTO accounts
                            VALUES (NULL , '$accountid', '$passhash', '65535', '0', '', '1', '0', '0', '1');
                    ");
                    echo "Your account has been successfully created.";
                //If passwords do not match
                } else {
                    echo "Your passwords did not match, please try again.";
                }
            }
        ?>
    </body>
</html> 
```

当我加载页面并查看页面源时，它似乎没有显示终止`</body>`或终止`</html>`标签。我跟踪了我的代码，看不到任何丢失的分号或括号。对于我的生活，我无法弄清楚这一点。它仅在密码不匹配时正确显示终止标签（最底部的嵌套 else 语句）。

编辑; 在有人说之前，我知道`mysql_escape_string`它已被弃用。

编辑2；database.php 看起来像...

```
<?php
    $SERVER   = "localhost";
    $USERNAME = "redacted";
    $PASSWORD = "redacted";
    $DATABASE = "redacted";
    $db = new PDO("mysql:dbname={$DATABASE}; host={$SERVER}", $USERNAME, $PASSWORD);
    $db->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:26:10.240

解决此问题以及将来出现任何其他类似情况的最佳选择是查看`tail`您的服务器日志并确定问题到底是什么。

对于`apache2`：

`tail -f /var/log/apache2/error.log`

对于`nginx`：

`tail -f /var/log/nginx/error.log`

# python - 字典将字符串替换为python中的数字

> ID：14658556
> 
> 赞同：1
> 
> 时间：2013-02-02T04:23:25.503
> 
> 标签：python, dictionary, replace

我想创建一个简单的密码，它使用电话号码作为字母（输入给定）。

下面是我的代码，显示了我正在尝试仅使用示例文本执行的操作，但我得到一个关键错误的错误代码：'L'

```
def main():

    phoneCipher = {'id' : A, 'val': 2},{'id' : B, 'val': 22},{'id' : C, 'val': 222},{'id' : D, 'val': 3},{'id' : E, 'val': 33},{'id' : F, 'val': 333},{'id' : G, 'val': 4},{'id' : H, 'val': 44},{'id' : I, 'val': 444},{'id' : J, 'val': 5},{'id' : K, 'val': 55},{'id' : L, 'val': 555},{'id' : M, 'val': 6},{'id' : N, 'val': 66},{'id' : O, 'val': 666},{'id' : P, 'val': 7},{'id' : Q, 'val': 77},{'id' : R, 'val': 777},{'id' : S, 'val': 7777},{'id' : T, 'val': 8},{'id' : U, 'val': 88},{'id' : V, 'val': 888},{'id' : W, 'val': 9},{'id' : X, 'val': 99},{'id' : Y, 'val': 999},{'id' : Z, 'val': 9999}                  

    #THIS PART IS NOT WORKING BUT IS PART OF WHAT I WANT TO BE ABLE TO DO   
    originalMessage = input("Please input your message to be hidden: ")
    print(originalMessage)
    oMessageSplit = originalMessage.split()
    print(oMessageSplit) 

    sampleList = ['L', 'O', 'L']

    phoneCipherDict = dict((x['id'], x['val']) for x in phoneCipher)
    listCiphered = [phoneCipherDict[x] for x in sampleList]

    print(listCiphered)

main() 
```

**我需要的分析和反馈：** 我认为这似乎有问题，可能不是整数而不是实际字符串。如果没有可能的方法来做到这一点，有人能指出我正确的方向，用什么方法来做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:35:57.743

尝试这个：

```
phoneCipher = {'id' : 'A', 'val': 2},{'id' : 'B', 'val': 22},{'id' : 'C', 'val': 222},... 
```

键应该是字符串`'L'`，只是`L`会尝试使用变量的值`L`作为键。

**更新**

要从字符串创建列表，请使用

```
sampleList = list(originalMessage) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T04:42:16.323

你不需要做`originalMessage.split()`，它只会分裂`'LOL'`到`['LOL']`.

一个简单`list(originalMessage)`的就好。你甚至不需要这样做，因为`for char in 'LOL'`它是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T04:29:01.900

你的字典应该是这样的：

```
phoneCipher = {'A': 2, 'B': 22, ...} 
```

# ios - 在 Singleton Objective C 中移除 NSNotificationCenter 的观察者

> ID：14658564
> 
> 赞同：8
> 
> 时间：2013-02-02T04:24:49.223
> 
> 标签：ios, objective-c, singleton, nsnotificationcenter

快速提问：

我有一个为多个 NSNotifications 注册的单例类。因为单例在应用程序的生命周期内持续存在。

我是否必须实施

```
 [NSNotificationCenter defaultCenter] removeObserver:self] 
```

在我的单身课上？

在 iOS 中处理单例中的 NSNotification 中心的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T04:33:15.983

不，在这种情况下你不需要停止观察。只有在程序退出时才会释放真正的 Singleton 使用的内存。当程序退出时，它会继续并释放**所有**正在使用的内存和资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T05:07:30.410

只是为了`Memory`方便起见，您应该在`-dealloc`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T04:35:52.347

如果您希望您的单身人士在整个应用程序中收听通知，则无需删除它。

如果您希望在某些时候您的单例应该停止接收通知，那么您可以在单例中添加一个方法并在需要时调用它

```
- (void)removeObserver {
    [[NSNotificationCenter defaultCenter] removeObserver:self] ;
} 
```

# python - 缓存和内存使用

> ID：14658565
> 
> 赞同：1
> 
> 时间：2013-02-02T04:24:52.617
> 
> 标签：python, memory-management, python-3.2

我有很多类都做同样的事情：它们在构造过程中接收一个标识符（数据库中的 PK），然后从数据库中加载。我正在尝试缓存这些类的实例，以尽量减少对数据库的调用。当缓存达到临界大小时，它应该丢弃那些最近最少访问的缓存对象。

缓存实际上似乎工作正常，但不知何故我无法确定缓存的内存使用情况（在后面的行中`#Next line doesn't do what I expected`）。

到目前为止我的代码：

```
#! /usr/bin/python3.2

from datetime import datetime
import random
import sys

class Cache:
    instance = None

    def __new__ (cls):
        if not cls.instance:
            cls.instance = super ().__new__ (cls)
            cls.instance.classes = {}
        return cls.instance

    def getObject (self, cls, ident):
        if cls not in self.classes: return None
        cls = self.classes [cls]
        if ident not in cls: return None
        return cls [ident]

    def cache (self, object):
        #Next line doesn't do what I expected
        print (sys.getsizeof (self.classes) )
        if object.__class__ not in self.classes:
            self.classes [object.__class__] = {}
        cls = self.classes [object.__class__]
        cls [object.ident] = (object, datetime.now () )

class Cached:
    def __init__ (self, cache):
        self.cache = cache

    def __call__ (self, cls):
        cls.cache = self.cache

        oNew = cls.__new__
        def new (cls, ident):
            cached = cls.cache ().getObject (cls, ident)
            if not cached: return oNew (cls, ident)
            cls.cache ().cache (cached [0] )
            return cached [0]
        cls.__new__ = new

        def init (self, ident):
            if hasattr (self, 'ident'): return
            self.ident = ident
            self.load ()
        cls.__init__ = init

        oLoad = cls.load
        def load (self):
            oLoad (self)
            self.cache ().cache (self)
        cls.load = load

        return cls

@Cached (Cache)
class Person:
    def load (self):
        print ('Expensive call to DB')
        print ('Loading Person {}'.format (self.ident) )
        #Just simulating
        self.name = random.choice ( ['Alice', 'Bob', 'Mallroy'] )

@Cached (Cache)
class Animal:
    def load (self):
        print ('Expensive call to DB')
        print ('Loading Animal {}'.format (self.ident) )
        #Just simulating
        self.species = random.choice ( ['Dog', 'Cat', 'Iguana'] ) 
```

`sys.getsizeof`返回有趣的值。

**如何确定所有缓存对象的实际内存使用情况？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:53:51.277

`getsizeof`很棘手，这是一个事实的说明：

```
getsizeof([])       # returns 72   ------------A
getsizeof([1,])     # returns 80   ------------B
getsizeof(1)        # returns 24   ------------C
getsizeof([[1,],])  # returns 80   ------------D
getsizeof([[1,],1]) # returns 88   ------------E 
```

这里有一些值得注意的东西：

*   **A** : 一个空列表的大小是 72
*   **B** : 包含的列表的大小`1`是 8 个字节以上
*   **C** : 的大小`1`不是 8 个字节。这种奇怪的原因是它`1`作为唯一实体单独存在于列表中，因此行 C 返回实体的大小，而 B 返回空列表的大小加上对该实体的引用。
*   **D**：因此这是一个空列表的大小加上一个对不同列表的引用
*   **E** : 一个空列表加上两个引用 = 88 字节

我想在这里得到的是 getsizeof 只能帮助您获得事物的大小。您需要获取事物的大小以及这些事物所指事物的大小。这闻起来像递归。

看看这个食谱，它可能会帮助你：[http ://code.activestate.com/recipes/546530/](http://code.activestate.com/recipes/546530/)

# jquery - 背景图像上的 CSS 或 jquery

> ID：14658568
> 
> 赞同：2
> 
> 时间：2013-02-02T04:25:25.720
> 
> 标签：jquery, css

我正在尝试在具有 3px 边框的图像上放置一个播放按钮。当用户滚动**图像**时，我希望**播放按钮 :hover 以及图像边框 :hover**。

问题是播放按钮只有在我翻过它时才会启动。不是当我翻转图像时。

我的 HTML：

```
<div class="views-field-field-thumbnail">
       <a href="/videos">
          <img src="individual.png" width="230" height="130">
       </a>
</div>

<div class="thumbnail-play">Play</div> 
```

我的 CSS：

```
.views-field-field-thumbnail img {border: 7px solid #333;}

.views-field-field-thumbnail img:hover {border: 7px solid #000;}

.thumbnail-play {
    text-indent: -9999px;
    background: url(VideoPlayerOff.png) 0px 0px no-repeat;
    position: relative;
    height: 50px;
    width: 50px;
    margin-top: -95px;
    margin-bottom: 0px;
    margin-left: 0px;
    }

.thumbnail-play:hover {
    text-indent: -9999px;
    background: url(VideoPlayerOn.png) 0px -50px no-repeat;
    } 
```

**更新：**看起来我可以稍微更改代码并将播放图像放置在我需要的任何位置。只是有点困惑它的最佳位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:42:19.040

您需要将您的播放图像放在您的`.views-field-field-thumbnail`div 中，以便您可以使用`:hover`.

```
<div class="views-field-field-thumbnail">
    <a href="/videos">
       <img src="individual.png" width="230" height="130">
    </a>
    <div class="thumbnail-play">Play</div>
</div>

.views-field-field-thumbnail:hover img {border: 7px solid #000;}
.views-field-field-thumbnail:hover .thumbnail-play {
    text-indent: -9999px;
    background: url(VideoPlayerOn.png) 0px -50px no-repeat;
} 
```

如果你不能做到这一点，恐怕你将不得不求助于javascript。

```
$('.views-field-field-thumbnail').hover(function()
{
   $(this).next('.thumbnail-play').addClass('hover');
},
function()
{
   $(this).next('.thumbnail-play').removeClass('hover');
}); 
```

并在您的 CSS 中更改`.thumbnail-play:hover`为。`.thumbnail-play.hover`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:42:38.287

使用 jQuery，您只需要添加以下行：

```
$('document').ready(function(){
    $('.views-field-field-thumbnail img, .thumbnail-play').hover(
      function(){
        $('.thumbnail-play').css('background', 'url(VideoPlayerOn.png) 0px -50px no-repeat');
    },function(){
        $('.thumbnail-play').css('background', 'url(VideoPlayerOff.png) 0px 0px no-repeat');
        }
    );
}); 
```

css是一样的，只是删除`.thumbnail-play:hover`样式。

# php - 删除中间行后如何设置自动增量值

> ID：14658569
> 
> 赞同：0
> 
> 时间：2013-02-02T04:25:26.467
> 
> 标签：php

我有一张桌子

```
id  paper_title
1   General English1
2   General English2
3   General English3
4   General English4
5   General English5
6   General English6
7   General English7
.
.
.
.
100 General English100. 
```

假设如果我删除第 4 行和第 5 行，是否可以更新通用英语 6 和通用英语 7 的 id 分别设置为 4,5 如果我在中间删除一行或启动 id 应该像 1 2 3 4 5 一样连续重置.....100.请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:33:44.190

确定`id`要删除的行的 （我们称之为 id `$foo`）。然后执行

```
UPDATE tbl SET id = id-1 WHERE id > $foo 
```

获得最高的`id`并称之为`$max`：

```
SELECT MAX(id) FROM tbl 
```

然后设置新的自动增量值：

```
ALTER TABLE tbl AUTO_INCREMENT = $max+1 
```

对您删除的每一行执行此操作。我当然希望`id`不是你的主键。无论如何，对于您的潜在问题肯定有更好的解决方案。通常不需要将数据库表中的行编号从 1 到没有间隙的任何值。

# android - Android ICS 到 JB Actionbar 选项卡的更改要求

> ID：14658571
> 
> 赞同：0
> 
> 时间：2013-02-02T04:26:06.963
> 
> 标签：android, tabs, android-actionbar, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

我有一个针对 SDK 15、ICS 4.0.3 的应用程序。我刚刚将其更新为指向 4.1，它破坏了我的用户界面，并使其非常难看：

以下是 API 15 上通常的样子： ![普通的](../Images/1ce1c107d57a65b6293c441dbb85fc2f.png)

这是 16 或 17 日： ![坏的](../Images/b68a7d0a53e5229ba0fcdd180f8a4f52.png)

我有一种感觉，这是因为 Nexus 7 使用手机 UI 而不是实际的平板电脑 UI……有没有办法强制标签进入操作栏，而不必使用 ActionBar sherlock 之类的东西或其他东西（如子类化）？或者即使我可以让标签看起来不那么糟糕，也许如果它们有居中的文本？现在按钮甚至不做 match_parent。定位较低的 SDK 是否有缺点（我现在不需要更高的 SDK）？我的应用程序仅在 ICS 或更高版本上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:22:57.757

我已经创建了类似 instagram 操作栏*的标签*，您可以查看我之前的答案以及我是如何做到的。我正在使用手机，我无法在我的笔记本电脑上发布代码。无论如何，只需检查我以前的答案。稍后我将再次访问并发布代码。

编辑 - - -

```
Edit here is the image :). 
```

![InstaGram 操作栏 + 底栏](../Images/99167b15487c7e29f0b10ef8560001ae.png)

以最好的结果再次回来:)。您需要做的第一件事是创建一个名为 header.xml 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/action_bar_height"
    android:layout_gravity="top"
    android:baselineAligned="true"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/share"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="start"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/action_bar_glyph_back" />

    <ImageView
        android:id="@+id/bright"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/action_bar_glyph_lux" />

    <ImageView
        android:id="@+id/rotate"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/rotate" />

    <ImageView
        android:id="@+id/bright"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/action_bar_glyph_lux" />

    <ImageView
        android:id="@+id/rotate"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/rotate" />

    <ImageView
        android:id="@+id/forwa"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/forward" />

</LinearLayout> 
```

之后转到您的 MainActivity.class 并创建此方法。

```
 private void setupActionBar() {
    ActionBar actionBar = getActionBar();
    //actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    ViewGroup v = (ViewGroup)LayoutInflater.from(this)
        .inflate(R.layout.header, null);
    actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,
            ActionBar.DISPLAY_SHOW_CUSTOM);
    actionBar.setCustomView(v,
            new ActionBar.LayoutParams(ActionBar.LayoutParams.MATCH_PARENT,
                    ActionBar.LayoutParams.WRAP_CONTENT,
                    Gravity.CENTER_VERTICAL | Gravity.RIGHT));

} 
```

添加 `setupActionBar();`到您的 onCreate Activity 并运行您的应用程序:)。

现在您有了带有分隔线和图像 PS 的自定义 ActionBar，分隔线在布局中定义为图像背景:)。

# ios - 两部 iPhone 之间的聊天

> ID：14658577
> 
> 赞同：0
> 
> 时间：2013-02-02T04:27:48.087
> 
> 标签：ios, http, tcp, network-programming

我正在寻找创建一个聊天应用程序，以便两个 iphone/手机可以互相聊天。

有人可以引导我朝正确的方向前进吗？
1\. 我应该尝试使用 HTTP 或 TCP 直接连接两台设备
2\. 还是应该通过服务器进行通信，即一部手机将消息发送到服务器，然后服务器将消息推送到另一部手机？

如果你能告诉我我应该使用的任何库/api，那也会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:49:45.327

> 还是应该通过服务器进行通信，即一部手机将消息发送到服务器，然后服务器将消息推送到另一部手机？

这是通常的做法。一个已知地址的服务器很容易找到；从一个网络移动到另一个网络并经常更改地址的移动电话则不然。此外，您可以让服务器一直运行，这样当一个设备发送消息时，服务器会接收并存储它，直到另一台设备可用。如果你一直试图在手机上运行你的聊天程序，你会很快耗尽电池。

# android - Android RelativeLayout 标头问题

> ID：14658578
> 
> 赞同：0
> 
> 时间：2013-02-02T04:28:00.990
> 
> 标签：android, android-relativelayout

我有一个非常简单的问题，但我显然做错了什么。我尝试了很多方法来做到这一点，但总有一些事情搞砸了。

我有一个带有水平 LinearLayout 的 ListView 作为标题。我想让 < 和 > 作为“后退和下一个”小部件，位于 LinearLayout 的最左侧和最右侧。该`LIST HEADER`部分应在它们之间居中。

使`LIST HEADER`拥有属性`android:layout_width="match_parent"`切断右手箭头。否则，它位于左箭头的顶部，即使它出现在`LIST HEADER` `TextView`XML 文件中的 之后。

```
<列表标题>
清单项目编号 1
清单项目编号 2
清单项目编号 3

```

在这个阶段我对 Android 并不陌生，但这似乎很基本。任何帮助，将不胜感激。我应该补充一点，我没有使用 eclipse。

CURRENT XML（尝试了这么多东西后有点乱，道歉）：

```
<LinearLayout
android:orientation="vertical"  
android:layout_width="match_parent"
android:layout_height="match_parent">

  <LinearLayout
  android:orientation="horizontal"
  android:gravity="center"
  android:layout_width="match_parent"
  android:layout_height="wrap_content">
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

  <RelativeLayout
      android:id="@+id/LeftFormulaHeaderLayout"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
  <TextView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="left"
      android:textSize="@dimen/text_huge"
      android:id="@+id/LeftFormulaHeader"
      android:text="&lt;"/>
  </RelativeLayout>
  <TextView
      android:layout_width="200dip"
      android:layout_height="wrap_content"
      android:textSize="@dimen/text_huge"
      android:ellipsize="end"
      android:scrollHorizontally="false"
      android:singleLine="true"
      android:gravity="center"
      android:id="@+id/FormulaHeader"/>

  <RelativeLayout
      android:id="@+id/RightFormulaHeaderLayout"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
    <TextView
    android:id="@+id/RightFormulaHeader"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:textSize="@dimen/text_huge"
    android:text="&gt;"/>
  </RelativeLayout>
</RelativeLayout>
</LinearLayout>

  <ListView
  android:id="@+id/TheList"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:background="#000033"
  android:layout_weight="1"
  android:drawSelectorOnTop="false" />

  <TextView
      android:id="@+id/empty_list_item"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:visibility="gone"
      android:text="@string/empty_list" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:45:41.553

您可以在以下代码的帮助下使用以下代码，`RelativeLayout`而不是搞砸`LinearLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Wrapper"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
     android:layout_gravity="center"
      android:orientation="horizontal"
   >

         <ImageView
                android:id="@+id/icon1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher"
                android:layout_alignParentLeft="true"  />

            <ImageView
                android:id="@+id/icon2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher"
                android:layout_centerVertical="true"
                android:layout_centerInParent="true"  />

               <ImageView
                android:id="@+id/icon3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher"
                android:layout_alignParentRight="true"  />

</RelativeLayout> 
```

**输出屏幕截图：**

![在此处输入图像描述](../Images/ea73e397a22536b820556988c907ff6a.png)

甚至此代码也有助于您的视图在布局中垂直居中。您可以将第二个更改为显示`ImageView`要`TextView`显示的文本。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T04:43:36.233

您的主要问题：`gravity`影响文本在`TextView`. 您想要`alignParentLeft`/-`Right`以及`centerHorizontal`您正在做的事情（尽管`gravity="center"`仍然保持标题在其视图中居中）。

```
<RelativeLayout
android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignParentLeft="true"
  android:textSize="@dimen/text_huge"
  android:id="@+id/LeftFormulaHeader"
  android:text="&lt;"/>
<TextView
  android:layout_width="200dip"
  android:layout_height="wrap_content"
  android:textSize="@dimen/text_huge"
  android:ellipsize="end"
  android:scrollHorizontally="false"
  android:singleLine="true"
  android:layout_centerHorizontal="true"
  android:gravity="center"
  android:id="@+id/FormulaHeader"
  android:text="HEADER"/>

<TextView
android:id="@+id/RightFormulaHeader"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentRight="true"
android:textSize="@dimen/text_huge"
android:text="&gt;"/>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T05:04:28.787

试试我下面的代码，我做了一些相关的改变。

> ```
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>         android:layout_width="match_parent"
>         android:layout_height="match_parent"
>         android:orientation="vertical" >
> <LinearLayout
>     android:layout_width="match_parent"
>     android:layout_height="wrap_content"
>     android:gravity="center"
>     android:orientation="horizontal" >
>     <RelativeLayout
>         android:layout_width="match_parent"
>         android:layout_height="match_parent" >
>         <RelativeLayout
>             android:id="@+id/LeftFormulaHeaderLayout"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content" >
>             <TextView
>                 android:id="@+id/LeftFormulaHeader"
>                 android:layout_width="wrap_content"
>                 android:layout_height="wrap_content"
>                 android:layout_gravity="left"
>                 android:text="&lt;"
>                 android:textSize="20sp" />
>         </RelativeLayout>
>         <TextView
>             android:id="@+id/FormulaHeader"
>             android:layout_width="200dip"
>             android:layout_height="wrap_content"
>             android:ellipsize="end"
>             android:gravity="center"
>             android:layout_centerHorizontal="true"
>             android:scrollHorizontally="false"
>             android:singleLine="true"
>             android:text="kajsgfuisagf"
>             android:textSize="20sp" />
>         <RelativeLayout
>             android:id="@+id/RightFormulaHeaderLayout"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content" >
>             <TextView
>                 android:id="@+id/RightFormulaHeader"
>                 android:layout_width="wrap_content"
>                 android:layout_height="wrap_content"
>                 android:layout_gravity="center"
>                 android:layout_alignParentRight="true"
>                 android:text=">"
>                 android:textSize="20sp" />
>         </RelativeLayout>
>     </RelativeLayout>
> </LinearLayout>
>  <ListView
>     android:id="@+id/TheList"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_weight="1"
>     android:background="#000033"
>     android:drawSelectorOnTop="false" />
> <TextView
>     android:id="@+id/empty_list_item"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent"
>     android:text="empty_list"
>     android:visibility="gone" /> 
> ```

![在此处输入图像描述](../Images/256388449d0d8b3c0101b8cbd3030431.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T04:40:11.340

您应该可以在此处使用 weight 属性：

```
<!-- Your header layout. -->

<LinearLayout orientation="horizontal" weight_sum="1">

    <!-- Button left. -->

    <TextView layout_width="30dp" layout_height="30dp" />

    <!-- Headline. -->

    <TextView layout_width="0dp" layout_height="30dp" layout_weight="1" gravity="center" />

    <!-- Button right. -->

    <TextView layout_width="30dp" layout_height="30dp" />

</LinearLayout> 
```

上面的代码不适用于复制/粘贴。您需要添加您的详细信息。我只想指出最重要的事情：

*   对于此解决方案，左/右小部件具有固定宽度很重要
*   请注意，标题的宽度为 0dp ...
*   ......重量为1！

所以标题最终会占用包装器的所有可用空间，除了左/右小部件的 2*30dp。

# python - 为什么python字典没有在while循环中重新填充？

> ID：14658583
> 
> 赞同：0
> 
> 时间：2013-02-02T04:28:31.953
> 
> 标签：python, loops, dictionary, while-loop

我有一个循环遍历的数据库，并且根据某些条件，我将相关的数据库条目发送到我创建的字典。然后我想从这本字典中随机选择一个，将它存储在一个列表中，清除字典，然后用递增的变量再次执行整个操作。仅供参考，['StartNoteNum'] 等只是成本数据库中的列名。

但是会发生什么，它在第一次通过循环时工作正常，但是如果我尝试在代码中的任何位置（在while循环内部或外部）清除字典，那么字典永远不会根据增加的值重新填充虽然应该。为了确认它应该正确地重新填充，我将初始值设置为在 while 循环中会遇到的所有可能值，并且每个值都在第一次通过循环时工作，但一旦尝试循环就会失败。我得到的错误是随机函数无法从空字典中提取。Grr ...这是代码。

```
def compute_policy(clean_midi, cost_database):
    note = 0             #Setting up starting variables.
    total_score = []
    current_finger = 1
    path = [1]
    next_move = {}
    while note <= 2:
        current_note = clean_midi[note]    #get note-pair for scoring
        dest_note = clean_midi[note+1]
        for each in cost_database:                            #find all relevant DB entries
            if (int(each['StartNoteNum']) == current_note
                and int(each['DestNoteNum']) == dest_note
                and int(each['StartFing']) == current_finger):
                next_move[int(each['DestFing'])] = int(each['Score'])  #move relevant entries to separate "bin"

        policy_choice = random.choice(next_move.keys())   #choose one at random
        total_score.append(next_move[policy_choice])       #track the scores for each choice in a list
        path.append(policy_choice)             #track the chosen finger
        current_finger = policy_choice        #update finger variable
        note += 1  
    path.append(current_finger)               #append last finger since the loop won't run again
    return total_score, path 
```

这里的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:21:48.800

一个可能的问题是：

`int(each['DestFing'])`总是相同的，那么字典中的相同键将被更新并且计数将保持为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:13:13.460

您正在尝试使用`cost_database`迭代器两次。在您第一次通过后，它已经耗尽，因此第二次尝试使用它时，整个`for`循环将被跳过，因为它有一个空的迭代器。

```
>>> a = xrange(4)
>>> for i in a:
...    print(i)
0
1
2
3
4
>>> for i in a:
...    print(i)
>>> # Nothing since 'a' is already exhausted. 
```

# iphone - iPhone SDK：向 facebook 提交用户名和密码

> ID：14658585
> 
> 赞同：0
> 
> 时间：2013-02-02T04:28:47.157
> 
> 标签：iphone, ios, facebook

我想制作一种可以访问 facebook 的应用程序，但要登录我不想使用 web 视图，我想使用两个文本字段以及 facebook 的用户名和密码。当他们按下登录按钮时，它会将用户名和密码中的文本发送到 facebook 服务器或查询，并可以登录并显示带有登录 webview 的 webview。有没有办法做到这一点，或者您是否需要访问 Facebook 查询？只是想知道是否可能，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:57:15.157

检查本教程......这个网站有很多关于如何实现这一点的见解......

[http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)

# web-services - 使用 groovy 从 wsdl 创建 SOAP Web 服务

> ID：14658586
> 
> 赞同：0
> 
> 时间：2013-02-02T04:28:48.363
> 
> 标签：web-services, grails, soap, wsdl

我有一个 wsdl 文件。我希望通过 Grails 从这个 wsdl 文件创建 Web 服务。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:44:15.103

首先，它是“Grails”，而不是“Groovy on Grails”。见[http://burtbeckwith.com/blog/?p=1213](http://burtbeckwith.com/blog/?p=1213)

[cxf-client 插件](http://grails.org/plugin/cxf-client)使用Apache CXF 并具有大量功能。它易于使用，并且有一个 wsdl2java 脚本，可用于生成客户端代码。

# vb.net - 如何使用 XPATH 或其他技术从 VB.net 中的网站提取数据？

> ID：14658591
> 
> 赞同：0
> 
> 时间：2013-02-02T04:29:05.167
> 
> 标签：vb.net, xpath, web

我正在尝试在 VB.net 中编写一个简单的应用程序来从网站收集信息，然后让应用程序将结果通过电子邮件发送给我。目的是在更换碳粉时从打印机收集页数。我有我需要的数据的 XPATH，但我无法弄清楚如何在 VB 中使用它。（我的编程经验很少）。

到目前为止，我已经让应用程序登录到打印机门户并显示包含我需要的信息的网页。此信息的 XPATH 是：

//*[@id="contents"]/div[3]/div/table/tbody/tr[1]/td

谁能帮我从这个表格单元格中提取和解析数字？

感谢你们提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:35:14.823

你可以使用流式阅读器！看看这个例子：

```
 Dim inStream As StreamReader
        Dim webRequest As WebRequest
        Dim webresponse As WebResponse

        webRequest = webRequest.Create("YOUR URL TO THE PAGE GOES HERE")
        webresponse = webRequest.GetResponse()
        inStream = New StreamReader(webresponse.GetResponseStream())
        Dim sourcecode As String = inStream.ReadToEnd()
        Dim x1 As Integer = sourcecode.IndexOf("<td>Nr. of toner changed:") + 25 '25 is the number of characters in the string to search
        Dim x2 As Integer = sourcecode.IndexOf("times </td>") 'what comes right after your search string. has to be unique in the page

        dim nuberofchanges as integer = sourcecode.Substring(x1, x2 - x1) 
```

希望这可以帮助！:)

# c# - 这是一个等待发生的错误吗？

> ID：14658593
> 
> 赞同：0
> 
> 时间：2013-02-02T04:29:27.070
> 
> 标签：c#, string, path, console, directory

我定义了以下字符串；

```
static string DIRname = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) + "\\" + "MSB" + "\\"; 
```

然后在一个函数中使用以下内容；

```
if (!Directory.Exists(DIRname))
{
    Directory.CreateDirectory(DIRname);
} 
```

**问题：** 在检查字符串是否存在之前在字符串中定义不存在的文件夹路径是一种不好的做法吗？

如您所见，我定义了字符串，然后在目录存在时调用！

谢谢。

我正在尝试减少程序中可能出现的错误数量，而我只是在我认为“等待发生的错误”中发现了这一点，因此我在问各位专家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:29:33.640

我不会说这是一个等待发生的错误。不过，您确实应该使用[Path.Combine](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)。`File.Exists`并且`Directory.Exists`无论如何都不要为不存在的路径抛出异常。

# c# - C# 使用 Form 2 中的数据更改 Form1 宽度

> ID：14658595
> 
> 赞同：0
> 
> 时间：2013-02-02T04:29:33.167
> 
> 标签：c#, forms

我一直在为我遇到的一个问题而烦恼（我刚开始用 C# 编码）

我有一个主屏幕（以下简称表格 1）和一个视频选项表格（以下简称表格 2）（包括图片）。现在，当我将 Form 2 中的 Radiobuttons 更改为“ *Windowed* ”并选择一个分辨率时，我希望在 Form 1 中更改一些选项。

到目前为止，这是我所获得的，它转到 Form 1 代码，但说我不能在那里改变任何东西。

代码片段主窗体

```
public partial class frmMain : Form
{
    public frmMain()
    {
        InitializeComponent();
    }

    private void btnVideo_Click(object sender, EventArgs e)
    {
        Visual_Options options = new Visual_Options();
        options.Show();
    } 
```

代码片段选项表单

```
public partial class Visual_Options : Form
{
    frmMain Main;

    public Visual_Options()
    {
        InitializeComponent();
    }

    private void Visual_Options_Load(object sender, EventArgs e)
    {
        switch (Main.FormBorderStyle) //Check the Borderstyle of frmMain with Switch to determine current state
        {
            case FormBorderStyle.None: // if BorderStyle of frmMain = "None"
                if (Main.WindowState == FormWindowState.Maximized) //Check if frmMain = Maximizes
                {
                    rbFullscrn.Checked = true;
                }
                else
                {
                    rbBorderless.Checked = true;
                };
                break;
            case FormBorderStyle.Fixed3D:
                rbWindow.Checked = true;
                break;
        }

        switch (Main.Width) //Check Width to determine current value
        {
            case 800:
                rb8x6.Checked = true;
                break;
            case 1024:
                rb10x7.Checked = true;
                break;
            case 1280:
                rb12x7.Checked = true;
                break;
        }
    }

    private void btnAccept_Click(object sender, EventArgs e)
    {
        if (rbFullscrn.Checked == true)
        {
            Main.WindowState = FormWindowState.Maximized;
            Main.FormBorderStyle = FormBorderStyle.None;
        }
        else if (rbBorderless.Checked == true && rb8x6.Checked == true)
        {
            Main.WindowState = FormWindowState.Normal;
            Main.FormBorderStyle = FormBorderStyle.None;
            Main.Height = 600;
            Main.Width = 800;
        }
        else if (rbBorderless.Checked == true && rb10x7.Checked == true)
        {
            Main.WindowState = FormWindowState.Normal;
            Main.FormBorderStyle = FormBorderStyle.None;
            Main.Height = 768;
            Main.Width = 1024;
        }
        else if (rbBorderless.Checked == true && rb12x7.Checked == true)
        {
            Main.WindowState = FormWindowState.Normal;
            Main.FormBorderStyle = FormBorderStyle.None;
            Main.Height = 720;
            Main.Width = 1280;
        }
        else if (rbWindow.Checked == true && rb8x6.Checked == true)
        {
            Main.WindowState = FormWindowState.Normal;
            Main.FormBorderStyle = FormBorderStyle.Fixed3D;
            Main.Height = 600;
            Main.Width = 800;
        }
        else if (rbWindow.Checked == true && rb10x7.Checked == true)
        {
            Main.WindowState = FormWindowState.Normal;
            Main.FormBorderStyle = FormBorderStyle.Fixed3D;
            Main.Height = 768;
            Main.Width = 1024;
        }
        else if (rbWindow.Checked == true && rb12x7.Checked == true)
        {
            Main.WindowState = FormWindowState.Normal;
            Main.FormBorderStyle = FormBorderStyle.Fixed3D;
            Main.Height = 720;
            Main.Width = 1280;
        }
    }

    private void btnCancel_Click(object sender, EventArgs e)
    {
        this.Close();
    }
} 
```

我现在在互联网上看了一会儿，我找到了一些解决方案，但是，从我找到的几个解决方案中，到目前为止似乎没有一个有效。

提前TY，

我^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:45:59.047

如果您使用 ShowDialog，它将以模态对话框的形式打开您的选项表单，这样一旦您进行更改，您就可以检查`DialogResult`并从主表单中的选项表单中读取公共属性，并使用它来设置您的大小。否则，您可以订阅选项表单的已关闭事件并使用该事件来设置您的表单大小。

拳头选项：

```
private void button1_Click(object sender, EventArgs e)
{
    Visual_Options options = new Visual_Options();
    if ( options.ShowDialog() == DialogResult.OK)
        this.Size = options.getFormSize;  //This is a public property returning a size
} 
```

使用相同属性的第二个选项：

```
private void button1_Click(object sender, EventArgs e)
{
    Visual_Options options = new Visual_Options();
    options.FormClosed+=new FormClosedEventHandler(options_FormClosed);
    options.Show();
}

void options_FormClosed(object sender, FormClosedEventArgs e)
{
    this.Size = ((Visual_Options)sender).getFormSize;
    ((Visual_Options)sender).FormClosed -= new FormClosedEventHandler(options_FormClosed); //Remove handler to prevent leaks
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:35:35.717

您可能想要这样做：

`options.Show(this);`传递`this`引用将使“选项”表单成为主表单的子表单。

那么`frmMain Main`可以设置为：

```
frmMain Main = (frmMain)this.Owner; 
```

在此之后，您可以更改主窗体的任何和所有属性。

# .htaccess - .htaccess 重定向：从带有变量的旧站点到 Drupal 和 URL 别名

> ID：14658599
> 
> 赞同：0
> 
> 时间：2013-02-02T04:29:54.180
> 
> 标签：.htaccess, drupal, mod-rewrite, redirect

请查看此帖子的编辑。我给出的最后一个代码示例是我想要完成的。我正在使用 147 行代码。我想我实际上并没有试图制定规则，而是试图找出带有这些变量的重定向。

好的，我已经研究了几个小时，正则表达式 apache 重写规则变得非常具体，我很难过。客户要求将旧站点 url 重写/重定向到新的 drupal 站点和具有 url 别名的相应页面。有 147 个变量（全部 1 - 216（乱序）） 示例： **我需要**

```
/hardware/bikes.php?recordID=1 to redirect to http://www.bikerus.com/?q=hardware/first-bike-that-really-flies 
```

**然后**

```
/hardware/bikes.php?recordID=2 to redirect to http://www.bikerus.com/?q=hardware/second-awesome-bike-that-really-flies 
```

**等等**

**这是我到目前为止所拥有的：**

```
RewriteCond %{QUERY_STRING} ^recordID=([0-9]+)$

RewriteRule ^/hardware/bikes\.php?recordID=%1$ http://www.bikerus.com/?q=hardware/first-bike-that-really-flies 
```

这显然不起作用，女士们和小伙子们有什么想法吗？

理想情况下，如果我能找出 Drupal 的另一个问题，我还没有弄清楚（多年来），那就太好了。 **有一个这样的重定向：**

```
redirect 301 /hardware/1.html   http://www.bikerus.com/hardware/first-bike-that-really-flies 
```

**而不是这个：**

```
redirect 301 /hardware/1.html   http://www.bikerus.com/?q=hardware/first-bike-that-really-flies 
```

但我的第一个问题是现在的优先事项。提前致谢。

**编辑：** 我试图重定向到的文件不是静态的，它们是 Drupal 数据库生成的 url 别名。

最后，是的，我需要制作 147 条个人记录（硬编码），我的问题是如何做到这一点：

```
redirect 301 /hardware/bikes.php?recordID=1   http://www.bikesrus.com/?q=hardware/random-bike-title-one
redirect 301 /hardware/bikes.php?recordID=2   http://www.bikesrus.com/?q=hardware/random-bike-title-two-ewhbcfn
redirect 301 /hardware/bikes.php?recordID=3   http://www.bikesrus.com/?q=hardware/random-bike-title-three-kxjhmuflr
redirect 301 /hardware/bikes.php?recordID=4   http://www.bikesrus.com/?q=hardware/random-bike-title-four-more-random-stuff 
```

对于那些不知道的人，Drupal 有一个干净的 url 重写规则，它与我当前正在编辑的 .htaccess 文件一起提供：

```
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

所以我也需要能够导航这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:35:03.697

您的第二个问题的问题是，`redirect`除了简单的重定向之外，它真的很臭。你需要一个`RewriteRule`来做这个：

```
redirect 301 /hardware/1.html   http://www.bikerus.com/?q=hardware/first-bike-that-really-flies 
```

更像这样：

```
RewriteRule ^([a-zA-Z]+)/$ /?q=$1 [R=301,L] 
```

或者也许是这样：

```
RewriteRule ^([a-zA-Z]+)/(.*)$ /?q=$1/$2 [R=301,L] 
```

但在你的帖子中不清楚你`first-bike-that-really-flies`从哪里得到这些东西。所以不要明确如何在 Drupal 中处理它。非常具体到您的设置。

实际上只是[在这里](https://stackoverflow.com/questions/14658305/issue-with-subdomains-and-htaccess-for-seo/14658382#14658382)`mod_rewrite`回答了一个类似的问题。可能会给你更多的见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:05:36.130

刚刚想通了。

```
RewriteCond %{THE_REQUEST} recordID=1
RewriteRule . http://www.bikesrus.com/hardware/bike-that-really-flies? [R=301,L] 
```

**两个都！！就我自己而言，需要更多的搜索。不同的是，这次我把“硬编码”这个词放到了我的搜索关键字中。感谢所有评论的人。**

# vim - 退出所有打开的窗口的 Vim 命令是什么？

> ID：14658600
> 
> 赞同：41
> 
> 时间：2013-02-02T04:29:56.047
> 
> 标签：vim

`:q`只关闭当前窗口。如果您使用选项卡或拆分窗口，则需要`:q`为所有这些操作。此外，像**NERDTree**和**MiniBufExpl**这样的插件有自己的窗口，需要单独关闭。

有没有一个命令可以一次性退出所有这些打开的窗口并退出 Vim？但是，如果有一些缓冲区或窗口有未保存的更改，我应该被要求保存或不保存。有什么命令可以实现这一点吗？

我希望这不是一个奇怪的要求，因为大多数非 Vim 编辑器都是这样工作的。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-02T04:31:08.470

您可以使用以下命令退出所有已加载和打开的缓冲区、拆分和选项卡：

```
:qa 
```

如果您想退出而不保存：

```
:qa! 
```

您可以通过一个笔划分配一个映射来执行此操作，这会分配逗号以退出所有内容而不提示保存：

```
nnoremap , :qa!<CR> 
```

`:wqall`在关闭之前写入，这可能很有用。

输入`:he :qa`vim 以获取更多信息

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-06T01:09:54.570

您可以使用

```
:qall
:qa 
```

退出所有打开的标签

然后你可以使用命令

```
:tabo 
```

退出所有其他的标签

如果你的 vim 不是你可以使用的标签

```
:on 
```

退出所有窗口

# javascript - 在没有咖啡脚本的 Rails 3.2 中使用 javascript

> ID：14658606
> 
> 赞同：5
> 
> 时间：2013-02-02T04:30:26.527
> 
> 标签：javascript, ruby-on-rails-3, coffeescript

我正在使用 Rails 3.2，它是为咖啡脚本设置的。我知道 Coffeescript 是一门很棒的语言，而且学习起来并不难，但我刚刚开始关注 Javascript 和 jQuery。所以我的问题是：有没有一种简单的方法可以将 rails 3.2 设置为使用 Javascript？目前，我的 jQuery`<script></script>`在我的视图中的标签中 (timeline/index.html.erb)。我想把它移到一个 .js 文件中。我尝试将我的timeline.js.coffee 的名称更改为只是timeline.js 并将jQuery 放在那里，但我得到了`Uncaught SyntaxError: Unexpected token ILLEGAL`.

除了“学习coffeescript”的明显答案，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T17:38:08.977

我走在正确的轨道上。要在 rails 3.2 中切换到 javascript，您只需删除`.coffee`扩展。但是，您还需要确保使用`//`for comments 而不是`#`

```
//# Place all the behaviors and hooks related to the matching controller here.
//# All this logic will automatically be available in application.js.
//# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:28:09.380

**清单文件和指令**
[http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)

在 app/assets/javascripts 中添加 js 文件，然后将文件添加到`application.js`

* * *

你的js文件

```
alert("here"); 
```

应用程序.js

```
//= require_tree .
or
//= require your_js_file_name 
```

* * *

然后，它将从您下面的代码中获取`app/views/layouts/application.html.erb`

```
<%= javascript_include_tag "application" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:05:37.273

```
$ rails -v
Rails 3.2.11 
```

这个怎么样？
[http://bit.ly/VHEnBX](http://bit.ly/VHEnBX)

```
git clone it
cd js_test
bundle
rails s -d
open http://localhost:3000

# stop the detached server 
kill -9 `cat tmp/pids/server.pid` 
```

您应该会`here`从浏览器中看到警报。

这只是一个简单的js文件。没有 .coffee 扩展名或任何扩展名。 [http://bit.ly/UPe2mp](http://bit.ly/UPe2mp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T21:41:09.590

您可以在 Gemfile 中简单地注释掉 gem 'coffee-rails'

# objective-c - 非并发 NSOperation 中未调用 main()

> ID：14658609
> 
> 赞同：2
> 
> 时间：2013-02-02T04:30:48.320
> 
> 标签：objective-c, nsoperation, nsoperationqueue

在创建 NSOperation 并将其放入 NSOperationQueue 时，我从未看到 main() 被调用。只有 start() 被调用。我没有做任何花哨的事情，真的。作为一个简单的测试，我写了这个：

```
NSOperationQueue *testOperationQueue = [[NSOperationQueue alloc] init];
MyTestOperation *testOperation = [[MyTestOperation alloc] init];
[testOperationQueue addOperation:testOperation]; 
```

在 MyTestOperation.m 中：

```
- (void)main
{
  NSLog(@"testing if main is getting called");
}

- (void)start
{
  NSLog(@"testing if start is getting called");
} 
```

MyTestOperation.h 看起来像这样：

```
#import <Foundation/Foundation.h>

@interface MyTestOperation : NSOperation

@end 
```

我错过了一些明显的东西吗？

[编辑注意：我实际上是指非并发，而不是并发（如上一个标题中所写）。]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T05:15:56.680

我玩弄了您的代码，并注意到如果我完全注释掉您的`start`方法，该`main`方法将运行。在仔细阅读文档后`start`，我发现了这一行：

> 该方法的默认实现会更新操作的执行状态并调用接收者的`main`方法。

`start`因此，通过使用未调用的实现覆盖`main`，您有效地短路了操作，并且从未允许它实际开始工作！因此，您需要`main`在您的方法中显式调用，或者如果您实际上并未使用它来执行设置/更新执行状态/等，则`start`需要全部消除。`start`

# recursion - 语言必须具备哪些属性才能支持递归？

> ID：14658612
> 
> 赞同：3
> 
> 时间：2013-02-02T04:32:31.323
> 
> 标签：recursion, programming-languages

我正在研究递归，我遇到了这个问题：

> FORTRAN 实现不允许递归，因为
> 
> 一个。他们对变量使用静态分配
> 
> 湾。他们对变量使用动态分配
> 
> C。堆栈并非在所有机器上都可用
> 
> d。不可能在所有机器上实现递归。

我发现答案是（a）

但我想知道编程语言支持递归的所有特性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T04:39:20.967

为了支持通用递归，一种语言需要一种方法来为同一函数的不同调用分配不同的激活记录。这样，在一个递归调用中分配的局部变量可以与在不同调用中分配的局部变量共存。

很少有语言在设计上不支持递归；这些通常是没有明确功能概念的语言（以brainf*ck 为例）。如今，大多数语言都有运行时环境，其中包括显式函数堆栈或其他分配堆栈帧的方式。因此，大多数现代语言都支持递归。除了 FORTRAN 和深奥的语言，我不知道有任何语言不支持它。

希望这可以帮助！

# actionscript-3 - 在AS3中使用addEventListener时如何调用removeEventListener

> ID：14658615
> 
> 赞同：1
> 
> 时间：2013-02-02T04:32:50.527
> 
> 标签：actionscript-3, flash, listener, parameter-passing

我正在尝试制作一个对象，它是一个影片剪辑，连续上下移动，并在它完成移动时打印它的 y 轴值。下面的代码工作正常。

```
var tweenUp:Tween = null, tweenDown:Tween = null;

function up():void {
    tweenUp = new Tween(person,"y",None.easeNone,person.y,person.y+20,1,true);
    tweenUp.addEventListener(TweenEvent.MOTION_FINISH, finishedUp);
}
function down():void {
    tweenDown = new Tween(person,"y",None.easeNone,person.y,person.y-20,1,true);
    tweenDown.addEventListener(TweenEvent.MOTION_FINISH, finishedDown);
}

function finishedUp(event:TweenEvent):void {
    trace(person.y);
    tweenUp.removeEventListener(TweenEvent.MOTION_FINISH, finishedUp);
    tweenUp = null;
    down();
}
function finishedDown(event:TweenEvent):void {
    trace(person.y);
    tweenDown.removeEventListener(TweenEvent.MOTION_FINISH, finishedDown);
    tweenDown = null;
    up();
}

up(); 
```

但是，我正在寻找一种将对象传递给侦听器的回调函数的解决方案。我尝试使用下面显示的方式，但它不起作用。

```
var tweenUp:Tween = null, tweenDown:Tween = null;
var functionFinishedUp:Function = null, functionFinishedDown:Function = null;

function up(object:MovieClip):void {
    tweenUp = new Tween(object,"y",None.easeNone,object.y,object.y+20,1,true);
    functionFinishedUp = finishedUp(object);
    tweenUp.addEventListener(TweenEvent.MOTION_FINISH, functionFinishedUp);
    tweenUp.removeEventListener(TweenEvent.MOTION_FINISH, functionFinishedUp);
    tweenUp = null;
}
function down(object:MovieClip):void {
    tweenDown = new Tween(object,"y",None.easeNone,object.y,object.y-20,1,true);
    functionFinishedDown = finishedDown(object);
    tweenDown.addEventListener(TweenEvent.MOTION_FINISH, functionFinishedDown);
    tweenDown.removeEventListener(TweenEvent.MOTION_FINISH, functionFinishedDown);
    tweenDown = null;
}

function finishedUp(object:MovieClip):Function {
    return function(event:TweenEvent):void {
        trace(object.y);
        down(object);
    }
}
function finishedDown(object:MovieClip):Function {
    return function(event:TweenEvent):void {
        trace(object.y);
        up(object);
    }
}

up(person); 
```

它只是上升然后什么也不做，因为似乎监听器在添加后就被删除了。在侦听器完成其任务后，是否有任何好的解决方案可以删除具有参数传递的侦听器？

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:24:51.510

如果您正在寻找一种在收到事件后立即删除事件侦听器的简单方法，您可以这样做：

```
function listener(event:Event):void
{
     // stop listening to the dispatcher for this event type
     EventDispatcher(event.target).removeEventListener(event.type, arguments.callee);
     // ...and do whatever else you need to do here
} 
```

该行可用于任何事件侦听器。

另一种选择是使用信号（[https://github.com/robertpenner/as3-signals](https://github.com/robertpenner/as3-signals)）。他们有一种`addOnce`方法，只会听一次然后删除自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:37:20.017

首先，我建议不要将`object`其用作变量的名称！尽管在技术上允许，但它在语义上没有意义，并且与保留的类名相似也无济于事`Object`。

您的代码不起作用的原因是您在添加后立即删除事件处理程序 - 在它有机会被调用之前。您实际上不必删除侦听器，因为您*希望*每次完成相应的补间时都调用它们。如果您坚持每次迭代都附加和分离侦听器函数，则必须在侦听器函数本身中删除事件侦听器。当然，对于您正在创建和折腾的所有闭包，这会变得相当棘手。

事实上，您根本不需要闭包，因为`tween`对象在`obj`属性中引用了补间对象。另外，你只需要为每个目标人物创建*一个*up tween和一个down tween，然后就可以`rewind()`和`start()`每个tween来回切换了。您可以使用几个 Dictionary 对象来跟踪哪个补间与哪个人一起使用，这些对象使用对象引用作为键。

这是一个概念证明，它`person`使用自己的补间集生成了 20 个 s——但只定义了两个处理程序，而且它们都不是闭包。我还结合`up`了`finishedDown`和：`down``finishedUp`

```
var upTweens:Dictionary = new Dictionary();
var downTweens:Dictionary = new Dictionary();

for(var i:uint = 0; i < 20; i++) {
    // Make a new Person
    var person:Person = new Person();
    person.y = 100;
    person.x = i * 20;
    addChild(person);

    // Create the tweens but stop them before they can play at all
    var top = person.y - 20;   // Up is -y in Flash
    var bottom = person.y;
    var upTween:Tween = new Tween(person, "y", None.easeNone, bottom, top, 1, true);
    upTween.stop();
    upTween.addEventListener(TweenEvent.MOTION_FINISH, onUpFinished);
    var downTween:Tween = new Tween(person, "y", None.easeNone, top, bottom, 1, true);
    downTween.stop();
    downTween.addEventListener(TweenEvent.MOTION_FINISH, onDownFinished);

    // Associate tweens with this person, and start it up!
    upTweens[person] = upTween;
    downTweens[person] = downTween;
    upTween.start();
}

function onUpFinished(e:TweenEvent):void {
    var upTween:Tween = Tween(e.currentTarget);
    var person:Person = Person(upTween.obj);
    var downTween:Tween = Tween(downTweens[person]);
    downTween.rewind();
    downTween.start();
}

function onDownFinished(e:TweenEvent):void {
    var downTween:Tween = Tween(e.currentTarget);
    var person:Person = Person(downTween.obj);
    var upTween:Tween = Tween(upTweens[person]);
    upTween.rewind();
    upTween.start();
} 
```

# iphone - UIView 子类的后续实例导致显示错误？

> ID：14658616
> 
> 赞同：1
> 
> 时间：2013-02-02T04:32:58.103
> 
> 标签：iphone, instance, ticker

我制作了一个[Stock Tiker](http://pastebin.com/vL8tM0sp)来显示连续的股票对象。一审工作正常。

票据代码的实现如下：

```
- (void)viewDidLoad
{
    tickerView=[[StockTiker alloc] init];
    [tickerView setFrame:CGRectMake(0, 0, 320, 20)];
    tickerView.delegate=self;

    UILabel *label=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 150, 20)];
    [label setBackgroundColor:[UIColor redColor]];
    label.text=@"First Object";

    UILabel *label2=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 20)];
    [label2 setBackgroundColor:[UIColor grayColor]];
    label2.text=@"Second Object";

    UILabel *label3=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 20)];
    [label3 setBackgroundColor:[UIColor magentaColor]];
    label3.text=@"Third Object";

    UILabel *label4=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 75, 20)];
    [label4 setBackgroundColor:[UIColor yellowColor]];
    label4.text=@"Fourth Object";

    UILabel *label5=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 75, 20)];
    [label5 setBackgroundColor:[UIColor cyanColor]];
    label5.text=@"Fifth Object";

    viewArray=[[NSArray alloc] initWithObjects:label,label2,label3,label4,label5,nil];
    [self.view addSubview:tickerView];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

#pragma mark- Ticker Delegate..

-(UIView*)viewForRow:(int)row inTicker:(StockTiker*)stock_Ticker
{
  return [viewArray objectAtIndex:row];
}

-(int)numberOfRowsForStockTiker:(StockTiker*)stock_Ticker
{
    return [viewArray count];
} 
```

//输出没问题

![在此处输入图像描述](../Images/4c8212c9b178de481103def797e9f042.png)

但是当我制作 Ticker 类的第二个实例时，它彼此重叠。

使用ticker.tag 管理的两个实例的输出

![有两个实例](../Images/1015ead2e01d7a36603a2da164be076a.png)

任何的想法？我该如何解决这个错误。提前致谢！

嘿，我上传了一个例子，请检查它[水平列表](http://dl.dropbox.com/u/75870052/StockTicker.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:08:36.203

1.  添加了 objectArray2。
2.  重复的 BSE_sticker 方法
3.  在 second_Sticker 中，除了将其添加到 objectArray2 之外，BSE_Sticker 的所有代码都相同。
4.  根据标签为委托中的stkticker2返回objectARray2

项目[在这里](https://www.dropbox.com/s/bl74kn352ztzxp3/HorizontalList%202.zip)

> 编辑

我调查了问题并解决了重复实例/摆动

您的股票代码类使用`static int count`.

> 静态变量每个类只实例化一次。因此，您对计数器进行编码会导致对象多次检查实例。

您应该将静态变量更改为普通 ivar，并在 start 方法中将其实例化为 0。

然后它会正常工作

# python - 如何在python中将2个列表合并为键值对

> ID：14658623
> 
> 赞同：8
> 
> 时间：2013-02-02T04:33:21.937
> 
> 标签：python

是否可以将两个列表组合为键值对。两个列表中的元素数量相同。

我有两个列表如下。

```
list1 = ["a","b","c","d","e"]
list2 = ["1","2","3","4","5"] 
```

我如何像下面这样组合

```
dict['a':1,'b':2,'c':3,'d':4,'e':5] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-02T04:35:14.233

`dictA = dict(zip(list1, list2))`

`zip`有关该函数的 更多信息，请参见此处： [http ://docs.python.org/2/library/functions.html#zip](http://docs.python.org/2/library/functions.html#zip)

上面的行首先计算`zip(list1, list2)`，它创建了一个列表，其中包含两个列表的第 n 个元素中的 n 个元组。然后`dict`调用获取元组列表并从元组中的第一个值创建键，相应键的值是第二个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T04:35:00.183

尝试这个：

```
dict (zip (list1, list2)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T04:36:09.617

做这个：

```
my_dict = dict(zip(list1, map(int, list2))) 
```

或者用听写理解：

```
my_dict = {k: int(v) for k, v in zip(list1, list2)} 
```

*   `map`将函数映射到可迭代对象的每个元素。

    ```
    map(int, list2) == [1, 2, 3, 4, 5] 
    ```

*   `zip`给出每个列表的第 n 个元素的元组列表. 但是，如果列表长度不同，它会上升到最短列表的长度。

    ```
    zip('foo', '1234') == [('f', '1'), ('o', '2'), ('o', '3')] 
    ```

# mysql - Mysql Statspack 等效

> ID：14658627
> 
> 赞同：0
> 
> 时间：2013-02-02T04:33:57.233
> 
> 标签：mysql, statspack

在 MySQL 中记录低效查询和查询频率

我们有一个执行 mysql DB 的倾倒对象。我对记录查询及其频率感兴趣，以评估我的时间最适合花在哪些方面。我们的查询日志记录速度很慢，但这些查询并不是打击数据库的查询。有人告诉我，Oracle 的 statspack 正是通过对查询进行某种加权来做到这一点的。

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:27:16.650

MySQL 通用查询日志将显示所有正在执行的语句。在繁忙的服务器上，它会快速增长，并且会降低性能，因此您可能希望短暂启用它，然后再次禁用它。这将为您提供执行的每条语句，以及客户端连接和断开连接。

[http://dev.mysql.com/doc/refman/5.5/en/query-log.html](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)

慢查询日志也可以是一个有用的工具。

有一些第三方工具可以帮助分析通用日志的输出、慢查询日志以及持续运行 SHOW FULL PROCESSLIST 的输出。一个例子是MONyog。

# objective-c - self.tabBarItem respondsToSelector 总是返回 no

> ID：14658630
> 
> 赞同：1
> 
> 时间：2013-02-02T04:34:34.133
> 
> 标签：objective-c, fonts, uitabbarcontroller, uitabbaritem, respondstoselector

我正在尝试更改标签栏项目的字体颜色。我正在使用这篇文章中的代码：

[更改标签栏文字颜色，iPhone](https://stackoverflow.com/questions/11343894/change-tabbar-text-color-iphone)

我的代码如下：

```
if ([self.tabBarItem respondsToSelector:@selector(setTitleTextAttributes:)]) {
    NSLog(@"yes");
    [self.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                             darkGreen, UITextAttributeTextColor,
                                             nil] forState:UIControlStateNormal];
}
else {
    NSLog(@"no");
} 
```

respondsToSelector 总是返回 no，我不知道如何解决它。这个代码块在viewDidLoad中，类是UITabBarController的子类。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:43:34.920

该方法`setTitleTextAttributes:`根本不存在，该方法的正确签名是`setTitleTextAttributes: forState:`

```
if ([self.tabBarItem respondsToSelector:@selector(setTitleTextAttributes: forState:)]) {
    NSLog(@"yes");
    [self.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                             darkGreen, UITextAttributeTextColor,
                                             nil] forState:UIControlStateNormal];
}
else {
    NSLog(@"no");
} 
```

# jquery - 验证表单数据Javascript

> ID：14658637
> 
> 赞同：0
> 
> 时间：2013-02-02T04:35:44.733
> 
> 标签：jquery, validation

所以我试图为页面上的两个表单设置表单验证，一次只有一个可见。当一个表单可见（display = 'inline'）时，另一个表单是隐藏的（display = 'none'）。

我正在连接表单“提交”事件并返回“假”，以便在手动提交表单之前验证表单字段。

我遇到的问题是当我尝试使代码模块化时，即尝试使用通用方法在两个表单上设置表单行为。当我尝试这样做时，我无法在单击提交按钮时不提交表单。但是，当我单独设置两种表单时（重复的方法做完全相同的事情，只是使用不同的 DOM 对象）我可以让功能正常工作。

下面是我尝试循环遍历两个数组，这些数组在传入的方法中创建 DOM 对象：

```
if($('#payment_wrapper').length > 0){
    var form_elements = [['#nr_form', '#nr_submit_button', '#nr_notes',     
'#nr_amount'],['#rec_form', '#rec_submit_button', '#rec_notes', '#nr_amount']];
    for (var i = 0; i < 2; i++){
        setupForms(form_elements[i]);
    }
}

    function setupForms(arr){
        $(arr[0]).submit(function(event) {
            (arr[1]).prop('disabled', true);
            validateForm(arr[0], arr[1], arr[2], arr[3]);
            return false;
        });
    }

    function validateForm(form, button, notes, amount){
        var err = false;
        var note = $(button).val().length
        var payment = $(amount).val();
        if(note > 150){
            alert("note is greater than 150");
            $('.payment_errors').text("It seems that your note is too long.  Please make sure it is 150 characters of less")
            $(button).prop('disabled', false);
            err = true; 
        } else if (!validateAmount(payment, button)){
            err = true;
        } else if ( err == false){
            $(form).get(0).submit();
        }
    }

    function validateAmount(payment, submit_button){
        var match = payment.match(/^[0-9]+\.[0-9]{2}/)
        if (payment.length == 0) {
            $('.payment_errors').text("You must enter a valid amount before submitting")
            $(submit_button).prop('disabled', false);
            return false;
        } else if (!match) {
            $('.payment_errors').text("Hmmmm, something is wrong with your payment amount.  Make sure your amount is in the proper format")
            $(submit_button).prop('disabled', false);
            return false;
        } else {
            return true;    
        }
    } 
```

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:46:26.033

尝试

```
event.preventDefault(); 
```

在返回 false 之前。

# php - PHP 将 zip 保存到磁盘

> ID：14658639
> 
> 赞同：11
> 
> 时间：2013-02-02T04:35:52.673
> 
> 标签：php, file, web, upload, zip

我想将用户上传的文件压缩到某个位置。虽然上传部分有效，但我不知道如何压缩文件。我可以创建一个 zip，但现在不知道如何将其实际保存到磁盘。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T04:51:27.907

只需在创建 zip 时将所需的目标路径传递给它：

```
$path = 'path/to/file.zip';
$zip = new ZipArchive();
$zip->open($path, ZipArchive::CREATE);
// add contents...
$zip->close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T04:38:12.787

这肯定会帮助你......这些是2个解释清楚的例子希望它有帮助..

1.  [http://www.9lessons.info/2012/06/creating-zip-file-with-php.html](http://www.9lessons.info/2012/06/creating-zip-file-with-php.html)

2.  [http://davidwalsh.name/create-zip-php](http://davidwalsh.name/create-zip-php)

# erlang - 在氮框架中检索#dropdown 选择

> ID：14658643
> 
> 赞同：2
> 
> 时间：2013-02-02T04:36:13.237
> 
> 标签：erlang, postback, nitrogen

我正在使用 erlang 氮气 web 框架来开发应用程序。

我一定遗漏了一些非常简单的东西，但我不知道如何检索#dropbox 元素所做的选择。回发消息似乎没有通过它。它可能需要使用 wf:wire/3 功能吗？

我还没有看到任何证明这一点的文档或示例。我能找到的唯一示例将仅显示回发值，该值不提供有关选择了哪个选项的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:48:48.513

你需要：

*   将 html_name 添加到 Dropbox，
*   添加代码以提交表单，
*   然后在被调用页面（在提交操作中定义）中，您可以使用 wf:m(dropbox_name) 访问该值。

[在http://nitrogenproject.com/demos/restful](http://nitrogenproject.com/demos/restful)有一个完整的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:14:10.827

这取决于您如何使用下拉菜单。如果您以一种宁静的“传统形式”非 ajaxy 方式使用它，那么 Pascal 提到的宁静元素就是要走的路。

但是，如果您使用 Nitrogen 的回发功能使用它们，您希望通过更标准的 Nitrogen id 简单地定义它们。

```
body() ->
   [
       #dropdown{id=fruit, options=[
            #option{text="Apple"},
            #option{text="Banana"},
            #option{text="Orange"}
       ]},
       #button{text="Submit",postback=do_fruit}
   ].

event(do_fruit) ->
   SelectedFruit = wf:q(fruit),
   wf:wire(#alert{text="Selected Fruit was " ++ SelectedFruit}). 
```

请注意，下拉列表的 id 是`fruit`. 使用在函数中匹配`#button`的 value 启动回发，并使用 id 检索提交的值。`do_fruit``event(do_fruit)``wf:q(fruit)``fruit`

# c# - C#窗体文本框内容被高亮事件

> ID：14658644
> 
> 赞同：1
> 
> 时间：2013-02-02T04:36:18.243
> 
> 标签：c#

当文本框的内容被突出显示时是否有事件。

如果没有，有没有办法确定这一点。

还有一种方法可以确定文本框是否已被标签。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:41:29.920

没有突出显示的事件.. 但您可以通过`MouseUp`and`KeyUp`事件来模拟它：

```
private void textBox_MouseUp(object sender, MouseEventArgs e) {
    if (textBox.SelectedText != "")
        MessageBox.Show("Selected!");
}

private void textBox_KeyUp(object sender, KeyEventArgs e) {
    if (textBox.SelectedText != "")
        MessageBox.Show("Selected!");
} 
```

当 TextBox 获得焦点时，还有一个`Enter`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:42:14.283

为此，您将不得不混合一些事件。

1.  捕获鼠标左键或 Shift 键+箭头键
2.  之后也必须捕获 MouseDrag 事件
3.  鼠标按钮也向上（下一次）。

# c# - 使用 Code First 并仅复数 `DbSet 实体的条目

> ID：14658645
> 
> 赞同：1
> 
> 时间：2013-02-02T04:36:31.347
> 
> 标签：c#, .net, entity-framework-5, pluralize

我想禁用数据库表的复数，这很容易。但是，我使用反射和 T4 模板来生成我的上下文类。

```
public DbSet<User> User { get; set; }
public DbSet<Department> Department { get; set; } 
```

有什么方法可以使用 EF 从 T4 模板中返回复数名称，以便我可以生成以下内容：

```
public DbSet<User> Users { get; set; }
public DbSet<Department> Departments { get; set; } 
```

一些功能，如`string name = EF.GetPluralizedName("User");`等。

我正在使用针对 .NET 4 的 VS2010，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:50:44.977

您可以使用多元化服务，就像

```
string name = System.Data.Entity.Design.PluralizationServices.PluralizationService.
CreateService(System.Globalization.CultureInfo.CurrentUICulture).Pluralize("User"); 
```

# bash - 在 shell 脚本中设置变量默认值的短路

> ID：14658649
> 
> 赞同：0
> 
> 时间：2013-02-02T04:36:57.800
> 
> 标签：bash, shell

是否可以使用短路为 shell 脚本设置变量默认值？

脚本调用 1：`my_script.sh "apple" "carrot"`

脚本调用 2：`my_script.sh "apple"`

**my_script.sh：**

```
#!/bin/bash
fruit=$1
vegetable=$2 || "green bean"

# Do something with fruits and vegetables 
```

当我这样做时，似乎从未使用过默认值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T04:50:57.103

您可以使用以下语法：

```
a=${1:-default} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T04:40:43.943

~~您是否指出脚本应该使用特定的外壳？我总是默认这样使用`bash`：~~

 ~~```
#!/bin/bash 
```~~ 

~~[这里](http://www.bashguru.com/2009/11/how-to-pass-arguments-to-shell-script.html)很好地解释了这个概念。~~

**编辑：**好的，我现在更好地理解了这个问题。如果未传递变量，原始发布者希望设置默认值。很好的解释在[这里](http://www.cyberciti.biz/faq/bash-ksh-if-variable-is-not-defined-set-default-variable/)设置默认变量。试试这个脚本：

```
#!/bin/bash

fruit=${1-apple}
vegetable=${2-green bean}

echo $fruit;
echo $vegetable; 
```

# android - 如何处理android不同的设备尺寸

> ID：14658656
> 
> 赞同：0
> 
> 时间：2013-02-02T04:38:38.753
> 
> 标签：android, android-drawable, hdpi, mdpi

我知道很多人都问过这个问题，但我真的无法得到明确的答案。我是 android 新手，发现很难让我的布局在所有不同尺寸的设备上都能正常工作。问题如下：（我将 sprite 图像放在 drawable-hdpi 文件夹中）。在分辨率为 320*480 的 mdpi 设备上，屏幕如下所示： ![在此处输入图像描述](../Images/ef33f50f6ef5fcb0c1479c671142eeb6.png)

在分辨率为 480*800 的 hdpi 设备上，屏幕看起来像这样： ![在此处输入图像描述](../Images/bdb4cc73e8edffaf58893cac497e710d.png) 上面的两个图像看起来都不错，但是在分辨率为 480*800 的 mdpi 设备上，屏幕看起来像这样： ![在此处输入图像描述](../Images/a4d1637f0be57b743d1cc31d0af8580e.png) 请告诉我如何解决这个问题? 我不明白为什么它的分辨率是 480*800 时是 mdpi 设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:49:35.007

您应该始终提供适当缩放到每个通用密度桶的位图资源：低、中、高和超高密度。这有助于您在所有屏幕密度上实现良好的图形质量和性能。

要生成这些图像，您应该从矢量格式的原始资源开始，并使用以下大小比例为每个密度生成图像：

```
xhdpi: 2.0
hdpi: 1.5
mdpi: 1.0 (baseline)
ldpi: 0.75 
```

这意味着如果您为 xhdpi 设备生成 200x200 的图像，您应该为 hdpi 生成 150x150、mdpi 为 100x100 和 ldpi 设备为 75x75 的相同资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:30:08.550

参考这个链接：http: [//developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

并将其添加到您的清单中

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true" /> 
```

# java - 从活动启动股票主屏幕时强制关闭

> ID：14658657
> 
> 赞同：1
> 
> 时间：2013-02-02T04:38:50.047
> 
> 标签：java, android, android-intent, launcher, homescreen

我正在尝试从活动启动股票主屏幕，但它一直强制关闭。到目前为止，我有一个显示已安装“家”列表的活动。用户可以选择一个，它将启动所选的主屏幕。这适用于已安装的房屋，但是当我选择库存（预安装）房屋时，它将强制关闭。

这是我用来开始活动的内容。我`packagename`为我的设备提供了库存主页。

```
Intent startMain = getPackageManager().getLaunchIntentForPackage("com.android.launcher");
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

任何帮助都会很棒，因为我不明白为什么这适用于大多数家庭而不适用于其他家庭。

**原木猫：**

```
02-01 20:26:46.144: E/AndroidRuntime(7432): FATAL EXCEPTION: main
02-01 20:26:46.144: E/AndroidRuntime(7432): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.calsto.lockscreen/com.calsto.HomeWizard.NanohaLauncher}: java.lang.NullPointerException
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.os.Looper.loop(Looper.java:137)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at java.lang.reflect.Method.invokeNative(Native Method)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at java.lang.reflect.Method.invoke(Method.java:511)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at dalvik.system.NativeStart.main(Native Method)
02-01 20:26:46.144: E/AndroidRuntime(7432): Caused by: java.lang.NullPointerException
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.Activity.startActivityForResult(Activity.java:3190)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.Activity.startActivity(Activity.java:3297)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at com.calsto.HomeWizard.NanohaLauncher.onCreate(NanohaLauncher.java:233)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.Activity.performCreate(Activity.java:4465)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-01 20:26:46.144: E/AndroidRuntime(7432):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
02-01 20:26:46.144: E/AndroidRuntime(7432):     ... 11 more 
```

# c# - C# 在 MVVM 设计模式 (WPF) 中扩展类

> ID：14658658
> 
> 赞同：-2
> 
> 时间：2013-02-02T04:38:56.937
> 
> 标签：c#, wpf, mvvm

我有一个包含 GridView 对象和 View 代表的 ViewModel 的视图。现在，我想覆盖该 ViewModel 中的控件，以便保持相同的 GUI 但具有不同的业务逻辑（即包含在 ViewModel 中）。这样做的正确方法是什么？

我认为它不像扩展 ViewModel 那样简单，因为它的 GUI 在 View 中表示存在问题（它有一个 XAML 组件）。

有什么想法吗？

谢谢。

编辑：修正错字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:20:47.173

我倾向于做的是创建一个基础 ViewModel 类，其中包含标准 UI 和控制逻辑。

然后我将我想要单独控制的任何功能/子设置为可覆盖。但我用默认代码填充它们，例如标准表单状态（编辑/添加/删除）代码。当然，我想强制被覆盖的任何内容都设置为必须覆盖。

然后，我创建了一个基于个人视图的 ViewModel，从基本 ViewModel 类继承，覆盖我需要的方法，并将这个个人 ViewModel 设置为视图的 DataContext。

您可以使用此方法切换您喜欢的任何 ViewModel，只要它们都继承自您的基本 ViewModel 类。

我希望这有帮助！

# linux - 如何恢复颠覆忽略？

> ID：14658662
> 
> 赞同：6
> 
> 时间：2013-02-02T04:39:25.797
> 
> 标签：linux, eclipse, svn, version-control

我通过命令行运行了以下命令：

```
svn propset svn:ignore "*.classpath" . 
```

我只想忽略该`.classpath`文件。

然而，这似乎把事情搞砸了，现在很多目录似乎都被忽略了。

我如何恢复它并重新开始？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T04:44:11.517

`svn propedit svn:ignore .`应该调出您的编辑器，您可以在其中一次删除一个有问题的忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T16:17:49.783

**笔记**

对于这个 svn:ignore 你有效地说“在当前目录中只忽略带有扩展类路径的文件”：Subversion 中文件名的模式只使用特定于操作系统的 glob 模式，而不是正则表达式

**修复 DaFunix 的语法**

*   在*somepath* :中列出**所有 svn 属性及其值**。对于您的情况*`svn proplist -v <PATH>|<URL>`*

     *svn proplist -v 。* 

 *我的 URL 的示例输出

```
>svn proplist -v http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/
Properties on 'http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk':
  bugtraq:logregex
    ([Ff][Ss])\s#
    (\d+)
  svn:mergeinfo
    /branches/Greetings:3-12
    /branches/i18n:18-20 
```

*   列出**单个 svn:property 值**（具有已知名称）`svn propget <PROPERTY> <PATH>|<URL>`：。对于您的情况

    svn propget svn:忽略。

我的 URL 的示例输出（与之前的 proplist 相同）

```
>svn propget bugtraq:logregex http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/
([Ff][Ss])\s#
(\d+) 
```

proplist 和 propget 操作都是 RO，不会有任何改变

**为了修复错误的属性定义，您可以**

或者

删除坏属性并以正确的形式重新创建它：

`svn propdel svn:ignore . & svn propset svn:ignore "classpath" .`（也许使用带有 -R 选项的 propset 以递归方式定义整个子树的忽略）

或（如 John Brodie 建议）编辑和修复当前定义

`svn propedit svn:ignore .`并在编辑器窗口“*.classpath”更改为“classpath”，保存

**PS**不要忘记：

*   提交添加属性的正确形式
*   从版本化代码中删除之前（可能）添加的类路径文件：svn:ignore 仅影响未版本化的新文件，已添加到具有当前忽略模式的 repo 文件必须手动取消版本化*

# sql - SQL 错误：ORA-00933：SQL 命令未正确结束：Postgres 到 oracle 语法

> ID：14658668
> 
> 赞同：0
> 
> 时间：2013-02-02T04:40:34.393
> 
> 标签：sql, database, oracle, postgresql

我收到以下语句的 SQL 错误 ORA-00933。这可以在 postgres 中解析，但不能在 oracle 中解析……这应该如何为 oracle 格式化？

提前致谢！

```
UPDATE comments 
SET parent_type='report' 
FROM reports 
WHERE comments.parent_id=reports.id; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:44:40.283

试试这个甲骨文：

```
UPDATE Comments
SET parent_type = 'report'
WHERE parent_id IN (SELECT Id FROM Reports) 
```

或者，如果您尝试将值设置为等于另一列中的值：

```
UPDATE Comments
SET parent_type = (SELECT FieldName
                   FROM reports
                   WHERE reports.id = Comments.parent_id); 
```

这适用于 MSSQL：

```
UPDATE c
SET c.parent_type='report' 
FROM Comments c JOIN reports r ON c.parent_id=r.id 
```

祝你好运。

# python - 当输出有很多行时，pyserial 的 readline 无法读取最后几行

> ID：14658672
> 
> 赞同：0
> 
> 时间：2013-02-02T04:41:06.770
> 
> 标签：python, pyserial

我正在尝试使用 pyserial 与板进行交互，我正在发送一些命令并等待他们的回复正在使用这段代码等待 => 提示

```
# Waits till it finds the => prompt
def s_uboot_prompt(ser):
    value = ""
    matcher = re.compile("\=\>")
    trymatcher = re.compile("try")
    while (not matcher.search(value)):
               if( trymatcher.search(value.strip()) ):
                        print "******* Command failure. Exiting ..... **********"
                        ser.write("boot\r")
                        ser.close()
                        sys.exit(0)

               value = ser.readline()
               print value
               time.sleep(2) 
```

它适用于所有命令，但对于输出非常大的 tftp 命令之一，它无法读取最后几行并且上述代码永远循环。发生这种情况有什么原因吗？我想不出任何合乎逻辑的理由。请注意，它无法读取最后几行。

谢谢

# mysql - 在 JOIN 中使用 DISTINCT 会造成麻烦

> ID：14658674
> 
> 赞同：1
> 
> 时间：2013-02-02T04:41:38.373
> 
> 标签：mysql, sql, greatest-n-per-group

> **可能重复：**
> [如何使用两个内部联接修改此查询，以使其停止给出重复的结果？](https://stackoverflow.com/questions/14658033/how-can-i-modify-this-query-with-two-inner-joins-so-that-it-stops-giving-duplica)

我无法让我的查询正常工作。

```
SELECT itpitems.identifier, itpitems.name, itpitems.subtitle, itpitems.description, itpitems.itemimg, itpitems.mainprice, itpitems.upc, itpitems.isbn, itpitems.weight, itpitems.pages, itpitems.publisher, itpitems.medium_abbr, itpitems.medium_desc, itpitems.series_abbr, itpitems.series_desc, itpitems.voicing_desc, itpitems.pianolevel_desc, itpitems.bandgrade_desc, itpitems.category_code, itprank.overall_ranking, itpitnam.name AS artist, itpitnam.type_code FROM itpitems 
        INNER JOIN  itprank ON (itprank.item_number = itpitems.identifier) 
        INNER JOIN  (SELECT DISTINCT type_code FROM itpitnam) itpitnam ON (itprank.item_number = itpitnam.item_number)   
        WHERE mainprice > 1    
        LIMIT 3 
```

我在“字段列表”中不断收到未知列“itpitnam.name”。

但是，如果我将 DISTINCT type_code 更改为 *，我不会收到该错误，但我也不会得到我想要的结果。

这是一个很大的结果表，所以我正在制作一个虚拟示例......

使用 *，我得到类似：

```
+-----------+---------+----------+
| identifier| name    | type_code|
+-----------+---------+----------+
| 2         | Joe     | A        |
| 2         | Amy     | R        |
| 7         | Mike    | B        |
+-----------+------------+-------+ 
```

这里的问题是我有两个 identifier = 2 实例，因为 type_code 不同。 **我**在查询的外部尝试了 GROUP BY，但是它筛选了这么多记录，这给服务器造成了太大的压力，所以我试图找到一种替代方法来获得我需要的结果。

我想要实现的（使用相同的虚拟输出）看起来像这样：

```
+-----------+---------+----------+
| identifier| name    | type_code|
+-----------+---------+----------+
| 2         | Joe     | A        |
| 7         | Mike    | B        |
| 8         | Sam     | R        |
+-----------+------------+-------+ 
```

无论 type_code 是否不同，它都应该跳过重复的标识符。

有人可以帮我修改此查询以获得上图中模拟的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:11:23.613

一种方法是使用内联视图，就像您已经拥有的查询一样。但是，您可以使用 GROUP BY 来消除重复项，而不是使用 DISTINCT。满足您要求的最简单的内联视图是：

```
( SELECT n.item_number, n.name, n.type_code
    FROM itpitnam n
   GROUP BY n.item_number
) itpitnam 
```

虽然它不确定从 itpitnam 的哪一行检索 name 和 type_code 的值。更精细的内联视图可以使其更具体。

* * *

解决此类问题的另一种常见方法是在 SELECT 列表中使用相关子查询。对于返回一小组行，这可以执行得相当好。但是对于返回大集合，有更有效的方法。

```
SELECT i.identifier
     , i.name
     , i.subtitle
     , i.description
     , i.itemimg 
     , i.mainprice
     , i.upc
     , i.isbn
     , i.weight
     , i.pages
     , i.publisher
     , i.medium_abbr
     , i.medium_desc
     , i.series_abbr
     , i.series_desc
     , i.voicing_desc
     , i.pianolevel_desc
     , i.bandgrade_desc
     , i.category_code
     , r.overall_ranking
     , ( SELECT n1.name
           FROM itpitnam n1
          WHERE n1.item_number = r.item_number
          ORDER BY n1.type_code, n1.name
          LIMIT 1
       ) AS artist
     , ( SELECT n2.type_code
           FROM itpitnam n2
          WHERE n2.item_number = r.item_number
          ORDER BY n2.type_code, n2.name
          LIMIT 1
       ) AS type_code
  FROM itpitems i
  JOIN itprank r
    ON r.item_number = i.identifier
 WHERE mainprice > 1
 LIMIT 3 
```

该查询将返回指定的结果集，但有一个显着差异。原始查询显示`itpitnam`表的 INNER JOIN。这意味着只有在表中有匹配行时才会返回一行`itpitnam`。然而，上面的查询模拟了一个 OUTER JOIN，当在`itpitnam`.

* * *

## 更新

为了获得这些相关子查询的最佳性能，您需要一个适当的可用索引，

```
... ON itpitnam (item_number, type_code, name) 
```

该索引是最合适的，因为它是“覆盖索引”，可以完全从索引中满足查询，而无需引用基础表中的数据页，并且在前导列上有相等谓词，在接下来的两列上有 ORDER BY，这样可以避免“排序”操作。

--

如果您保证 itpitnam 表中的`type_code`or`name`列不是 NULL，则可以添加谓词来消除“缺少”匹配行的行，例如

```
HAVING artist IS NOT NULL 
```

（添加它可能会对性能产生影响。）如果没有这种保证，您需要添加一个 INNER JOIN 或一个测试匹配行是否存在的谓词，以获得 INNER JOIN 行为。

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:53:07.617

```
SELECT  a.*
        b.overall_ranking, 
        c.name AS artist, 
        c.type_code 
FROM    itpitems a
        INNER JOIN  itprank b 
            ON b.item_number = a.identifier
        INNER JOIN  itpitnam c
            ON b.item_number = c.item_number
        INNER JOIN
        (
            SELECT  item_number, MAX(type_code) code
            FROM    itpitnam
            GROUP   BY item_number
        ) d ON  c.item_number = d.item_number AND
                c.type_code = d.code

WHERE   mainprice > 1    
LIMIT   3 
```

*后续问题：您能否发布表模式以及表之间的关系？所以我会知道要链接的列是什么。*

# android - 切换偏好以在代码中发送短信

> ID：14658682
> 
> 赞同：0
> 
> 时间：2013-02-02T04:42:56.887
> 
> 标签：android, switch-statement, sharedpreferences, preferences

我需要一些关于我正在处理的 android 项目的帮助。我正在尝试使用切换首选项来发送特定文本。基本上，如果用户将开关从关闭切换到打开，我希望手机发送一条说“打开”的文本。然后，当用户将开关从打开转到关闭时，它会发送一条文本说“关闭”。我所需要的只是能够查看开关的当前状态，然后如果它关闭，则调用“打开”方法，反之亦然。

我从来没有问过这样的问题，所以我真的不知道要发布我的代码的哪一部分。（如果被问到，我可以发布我的大部分代码。）我认为这与 onPreferenceChangeListener 有关，但是我不确定如何实现它。有任何想法吗？

编辑：这是主要的活动类：

```
public class MainActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener {

public static final String KEY_ROOM1_SWITCH = "switch_room_1";

private SwitchPreference mSwitchPreference1;

public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
//This is a sample of one of 4 switches that are being used. They are all basically the same, but with different variables
    if (key.equals(KEY_ROOM1_SWITCH)) {
        boolean checkedornot1;
        SharedPreferences myPreference=PreferenceManager.getDefaultSharedPreferences(this);
        checkedornot1 = myPreference.getBoolean("switch_room_1", false);
        if (checkedornot1 = true)
        mSwitchPreference1.setChecked(true);
        else
        mSwitchPreference1.setChecked(false);
    }
  }
} 
```

我是否需要获取存储在共享首选项中的值并据此做出选择？还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:15:59.610

1.  编辑扩展 PreferenceActivity 的类并添加私有变量：`private OnSharedPreferenceChangeListener listener;`

2.  在方法中创建并注册您的侦听器`onResume`：

    ```
     public void onResume() {
      super.onResume();
      listener = new OnSharedPreferenceChangeListener() {
        public void onSharedPreferenceChanged(SharedPreferences sp, String key) {
          if (key.contains("your switchpreference key name")
          if (sp.getBoolean("your switchpreference key name",false) {
            sendOnSMS();
          } else {
            sendOffSMS();
          }
      }
      PreferenceManager.getDefaultSharedPreferences(this).registerOnSharedPreferenceChangeListener(listener);
    } 
    ```

3.  在方法中取消注册您的侦听器`onPause`：

    ```
    public void onPause() {
      super.onPause();
      PreferenceManager.getDefaultSharedPreferences(this).unregisterOnSharedPreferenceChangeListener(listener);
    } 
    ```

4.  实现`sendOnSMS`和`sendOffSMS`方法。

# php - 在查询中使用动态偏移

> ID：14658689
> 
> 赞同：0
> 
> 时间：2013-02-02T04:44:10.620
> 
> 标签：php, mysql

我有一个查询

```
SELECT SQL_CALC_FOUND_ROWS a.memberid, a.category_id, a.content, a.count_cid, a.importance
FROM tb_profilingdata a, tb_member b
WHERE a.memberid = b.memberid AND a.category_id IN ($catstr)  AND a.memberid NOT IN ( $seen_txt) AND b.gender != '$gender'
ORDER BY a.memberid, a.category_id LIMIT $offset, 4500 
```

由于我的表非常大，我想将我的查询结果限制在一定范围内。还可以选择一个动态偏移量，这样我每次运行查询时都可以获得一组随机值。

到目前为止，我正在通过 PHP 根据表中的总行数计算随机偏移量。但是如果偏移值大于查询返回的总行数，则结果将为空。

**那么有什么方法可以让我不必加载整个表并设置适当的随机偏移量以便我可以获得随机值？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:02:03.610

试试这个嵌套查询：

```
SELECT c.* FROM (
    SELECT a.memberid, a.category_id, a.content, a.count_cid, a.importance
    FROM tb_profilingdata a, tb_member b
    WHERE a.memberid = b.memberid AND a.category_id IN ($catstr) AND a.memberid NOT IN ($seen_txt) AND b.gender != '$gender'
    ORDER BY RAND() LIMIT 4500
) c ORDER BY c.memberid, c.category_id 
```

注意：您将无法使用 SQL_CALC_FOUND_ROWS 获取表中的总行数。

有几种方法可以[优化 ORDER BY RAND()](https://stackoverflow.com/questions/1244555/how-can-i-optimize-mysqls-order-by-rand-function)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:20:16.160

使用 Turnery 运算符从 url 获取偏移量，如下所示 (isset($_REQUEST['offset']))?$offset=$_REQUEST['offset']:$offset=0;

对于随机偏移使用 rand 函数 $offset=rand(0,totalrecord/4500);

并在您的查询中传递此偏移量

SELECT SQL_CALC_FOUND_ROWS a.memberid, a.category_id, a.content, a.count_cid, a.importance FROM tb_profilingdata a, tb_member b WHERE a.memberid = b.memberid AND a.category_id IN ($catstr) AND a.memberid NOT IN ($seen_txt) AND b.gender != '$gender' ORDER BY a.memberid, a.category_id LIMIT $offset, 4500

# c# - 从 .torrent 中提取文件/名称

> ID：14658692
> 
> 赞同：3
> 
> 时间：2013-02-02T04:44:27.413
> 
> 标签：c#

我有`.torrent`文件，我想从该文件中提取所有文件名。我已经尝试过搜索，但我没有足够的运气。

PS：我正在编写一个简单的服务，它将监视特定文件夹以将我的 torrent 文件上传到我的种子箱。然后另一个服务将轮询我的种子箱以下载下载的文件。可能有一些我不想上传的种子，所以我的实用程序将上传特定的种子。我想记录上传了哪个 torrent，以便我可以从我的种子箱中获取相应的下载文件夹。

作为参考，torrent 文件可能会调用 Torrent_of_movie_2010.torrent 文件。但是当 Torrent 客户端下载时，它会将其下载到 .torrent 文件中指定的文件夹/或文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T20:10:52.567

这是给你的简单要点： [https ://gist.github.com/ttrider/bde3ebf5e7af6cd2b5ee](https://gist.github.com/ttrider/bde3ebf5e7af6cd2b5ee)

# asp.net - ASP .NET 服务器控件与 HTML 控件

> ID：14658695
> 
> 赞同：1
> 
> 时间：2013-02-02T04:44:48.153
> 
> 标签：asp.net, html, controls, telerik-grid

目前，在我的团队中，在决定使用 HTML 控件还是 ASP .NET 服务器控件时存在冲突。例如，为了实现支持重新排序的网格视图列表，我们有两种选择：

1.  使用 HTML 控件（ul、ol）和 jQuery 可排序。通过使用这种方法，我们可以使用 PSD 切片后的标记和样式并立即实现。我们可以使用 jQuery ajax 来获取数据。
2.  使用 ASP .NET 控件，例如 Telerik Grid ( [http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx) )。使用此选项，我们必须更改服务器控件的样式以匹配设计。

考虑到性能和安全，请帮我找出哪个选项更好？先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:41:17.303

@batto telerik grid 会很精彩，只是这一次你不会想到。可能将来您的项目中需要很多魔法，那时您确实需要使用该功能的 . 所以在我看来，您使用 Telerik 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:34:34.480

HTML control is a compromise between traditional ASP.NET programming and web control and it has a limited object-oriented interface. We usually use HTML control to have a smooth HTML code that will be generated and sent to the browser

If you want a powerful control, choose web control over HTML control!

It hope it helps you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:36:25.857

仅用于显示目的 Jquery 网格是更好的选择，它将提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T21:11:04.407

我会使用服务器控件。我可能只会使用

你有能力对他们做任何你想做的事。如果您想使用 jquery 进行排序，那么它与您对 ul 的排序方式应该不会有太大的不同。如果需要，我可以提供样品。您还拥有服务器的力量。如果您绑定其他事件，例如添加或删除，那么您将需要服务器控制。来回传递数据更容易一些。

# jdbc - java.lang.ArrayIndexOutOfBoundsException：连接到 Oracle 10g XE 时

> ID：14658698
> 
> 赞同：1
> 
> 时间：2013-02-02T04:44:59.643
> 
> 标签：jdbc, oracle10g

您好我正在尝试使用 JDBC 建立与 Oracle 的连接。

我在 Win 7 x86 上，运行 Oracle 10g R2 XE、Eclipse Java EE Juno 和 Java SE v1.7。我已经在 WebContent/WEB-INF/lib 中包含了 classes.12.jar 和 ojdbc5.jar，因为之前使用 ojdbc.jar 在连接数据库时出现错误。所以我很不确定我到底要包括哪个驱动程序。

我的代码是：

```
 Connection conn = null;
    String driverName = "oracle.jdbc.OracleDriver";
    String url = "jdbc:oracle:thin:@localhost:1521:xe";

    Class.forName(driverName);
    conn = DriverManager.getConnection(url, "system", "mypassword"); //exception occurs here 
```

它在最后一行给出以下异常

```
java.lang.ArrayIndexOutOfBoundsException: 7
at oracle.security.o3logon.C0.r(C0)
at oracle.security.o3logon.C0.l(C0)
at oracle.security.o3logon.C1.c(C1)
at oracle.security.o3logon.O3LoginClientHelper.getEPasswd(O3LoginClientHelper)
at oracle.jdbc.ttc7.O3log.<init>(O3log.java:289)
at oracle.jdbc.ttc7.TTC7Protocol.logon(TTC7Protocol.java:251)
at oracle.jdbc.driver.OracleConnection.<init>(OracleConnection.java:246)
at oracle.jdbc.driver.OracleDriver.getConnectionInstance(OracleDriver.java:365)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:260)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at ConnectionManager.getConnection(ConnectionManager.java:16)
at ConnectionManager.main(ConnectionManager.java:24) 
```

山姆做错了什么，或者我仍然使用错误的驱动程序。我应该包括哪一个？

**编辑**

我也试过网址：

```
String url = "jdbc:oracle:thin:@//localhost:1521/xe"; 
```

它给了我以下例外：

```
java.sql.SQLException: Io exception: Invalid connection string format, a valid format is: "host:port:sid" 
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:168)
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:210)
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:323)
at oracle.jdbc.driver.OracleConnection.<init>(OracleConnection.java:260)
at oracle.jdbc.driver.OracleDriver.getConnectionInstance(OracleDriver.java:365)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:260)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at ConnectionManager.getConnection(ConnectionManager.java:17)
at ConnectionManager.main(ConnectionManager.java:25) 
```

我还尝试将驱动程序名称更改为：

```
String driverName = "oracle.jdbc.driver.OracleDriver"; 
```

没用。

并且同时使用了ojdbc5.jar、ojdbc6.jar，但是没有用。:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:58:28.413

您的网址似乎是错误的。

你指的是`ojdbc5.jar`，最好你应该使用`ojdbc6.jar`

罐子可以在这个位置找到：-

```
$ORACLE_HOME/jdbc/lib/ojdbc6.jar 
```

这样做： -

```
Connection conn = null;
String driverName = "oracle.jdbc.driver.OracleDriver"; 
```

或者

```
String driverName = "oracle.jdbc.OracleDriver";
String url = "jdbc:oracle:thin:@//localhost:1521/xe";

Class.forName(driverName);
conn = DriverManager.getConnection(url, "system", "mypassword"); 
```

# ruby-on-rails - 在设计自定义时使用 rails 更新用户字段

> ID：14658709
> 
> 赞同：1
> 
> 时间：2013-02-02T04:46:24.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在使用设计，我正在尝试更新用户登录的额外字段。所以为了让我能够更新我的 user.longitude，我必须在新的控制器中创建正在执行的具有 rails 控制器会话的控制器。这是我的代码

```
class MysessionsController < Devise::SessionsController
  def create
    self.resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    self.resource.longitude = params[:longitude]
    self.resource.update_attributes(params[:longitude])
    respond_with resource, :location => after_sign_in_path_for(resource)

  end
end 
```

我知道它不遵循restfull并且它不起作用但我需要能够更新我的用户字段并且我不知道该怎么做，这并没有给我任何错误，但它也没有正确修改它. 感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:21:35.870

您的线路：

```
self.resource.update_attributes(params[:longitude]) 
```

如果记录无效并且静默失败，则可能返回 false。先检查一下。

其次，您可能想查看 alias_method_chain 而不是复制继承控制器的 create 操作的内容。

否则，这是在用户登录后更新记录。您应该在他登录后保存经度。无论您在用户登录后将用户重定向到何处，都让以下调用处理经度更新。如果需要生存，简单的方法可能是将经度存储在会话中。

# c# - 无法获取 mainwindow.xaml 文本框上另一个类的属性

> ID：14658722
> 
> 赞同：1
> 
> 时间：2013-02-02T04:48:45.303
> 
> 标签：c#, .net, wpf, xaml

我无法在 mainwindow.xaml 文本框上获取另一个类的属性。在 MainWindow.xaml 中，我试图获取在 mainwindow.xaml.cs 上定义的属性值。这里我成功获取了第一个文本框中的 ABC 类。详细信息如下：

**主窗口.xaml**

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid DataContext="{Binding}">
        <Grid.RowDefinitions>
            <RowDefinition Height="100"/>
            <RowDefinition Height="100"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Vertical" Grid.Row="0">
        <TextBox  Text="{Binding Name1}"/>
        </StackPanel>
        <StackPanel  Orientation="Vertical" Grid.Row="1">
            <TextBox Text="{Binding class1.Name1}"/>
        </StackPanel>
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
public partial class MainWindow : Window,INotifyPropertyChanged
{
    Class1 c1 = new Class1();
    public MainWindow()
    {
        InitializeComponent(); 
```

ABC赢=新ABC（）；win.Name1 = "主窗口";
c1.Name = "Class 1"; this.DataContext = 赢；}

```
 public class ABC
    {
        public string Name { get; set; }
    }

    public Class1 class1
    {
        get
        {
            return c1;
        }
        set
        {
            c1 = value;
            INotifyChanged("class1");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void INotifyChanged(string name)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this,new PropertyChangedEventArgs(name));
        }
    }
} 
```

**Class1.cs**

```
public class Class1:INotifyPropertyChanged
{
    private string name;
    public string Name
    {
        get
        {
            return name;
        }
        set
        {
            name = value;
            NotifyPropertyChanged("Name");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:19:45.720

`Class1`它有 1 个属性，`Name`因此您的 xaml 必须是`<TextBox Text="{Binding class1.Name}"/>`，并且您似乎将您设置`DataContext`为嵌套类，您不能这样做，xaml 不支持嵌套类。

您必须`ABC`作为变量添加并作为嵌套类删除

例子：

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <Grid.RowDefinitions>
            <RowDefinition Height="100"/>
            <RowDefinition Height="100"/>
        </Grid.RowDefinitions>

        <!--You can't bind to a nested class-->
        <!--<StackPanel Orientation="Vertical" Grid.Row="0">
            <TextBox  Text="{Binding Name1}"/>
        </StackPanel>-->

        <StackPanel Orientation="Vertical" Grid.Row="0">
            <TextBox  Text="{Binding ABCClass.Name1}"/>
        </StackPanel>
        <StackPanel  Orientation="Vertical" Grid.Row="1">
            <TextBox Text="{Binding class1.Name}"/>
        </StackPanel>
    </Grid>
</Window 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private Class1 c1 = new Class1();
    private ABC _abcClass = new ABC();

    public MainWindow()
    {
        InitializeComponent();
        class1.Name = "Class 1";
        _abcClass.Name1 = "ABC Class";
    }

    public ABC ABCClass
    {
        get { return _abcClass; }
        set { _abcClass = value; INotifyChanged("ABCClass"); }
    }

    public Class1 class1
    {
        get { return c1; }
        set { c1 = value; INotifyChanged("class1"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void INotifyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

课程

```
public class Class1 : NotifyBase
{
    private string name;
    public string Name
    {
        get { return name; }
        set { name = value; NotifyPropertyChanged("Name"); }
    }
}

public class ABC : NotifyBase
{
    private string name;
    public string Name1
    {
        get { return name; }
        set { name = value; NotifyPropertyChanged("Name1"); }
    }
}

public class NotifyBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

结果：

![在此处输入图像描述](../Images/b02228cd5807b59bfbbf2e64517616aa.png)

# php - 如何替换第一个 HTMLPHP 中的标记

> ID：14658732
> 
> 赞同：4
> 
> 时间：2013-02-02T04:51:25.110
> 
> 标签：php, regex, replace, preg-replace, preg-replace-callback

我在 PHP 中有一个文本字符串：

```
<strong> MOST </strong> of you may have a habit of wearing socks while sleeping. 
<strong> Wear socks while sleeping to prevent cracking feet</strong>
<strong> Socks helps to relieve sweaty feet</strong> 
```

我们可以看到，第一个强标签是

```
<strong> MOST </strong> 
```

我想删除第一个强标签，并将其中的单词变成 ucwords（首字母大写）。像这样的结果

```
Most of you may have a habit of wearing socks while sleeping. 
<strong> Wear socks while sleeping to prevent cracking feet</strong>
<strong> Socks helps to relieve sweaty feet</strong> 
```

我尝试过使用爆炸功能，但它似乎不是我想要的。这是我的代码

```
<?php
$text = "<strong>MOST</strong> of you may have a habit of wearing socks while sleeping. <strong> Wear socks while sleeping to prevent cracking feet</strong>. <strong> Socks helps to relieve sweaty feet</strong>";
$context = explode('</strong>',$text);
$context = ucwords(str_replace('<strong>','',strtolower($context[0]))).$context[1];
echo $context;
?> 
```

我的代码只有结果

```
Most of you may have a habit of wearing socks while sleeping. <strong> Wear socks while sleeping to prevent cracking feet 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T04:56:27.713

您可以使用以下的可选*限制*参数来修复您的代码`explode`：

```
$context = explode("</strong>",$text,2); 
```

但是，最好是：

```
$context = preg_replace_callback("(<strong>(.*?)</strong>)",function($a) {return ucfirst($a[1]);},$text); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T04:58:17.347

我知道您要求使用 PHP 解决方案，但我不认为向您展示 CSS 解决方案会受到伤害：

**HTML**

```
<p><strong>Most</strong> of you may have a habit of wearing socks while sleeping.</p> 
```

**CSS**

```
p strong:first-child {
    font-weight: normal;
    text-transform: uppercase;
} 
```

除非有使用 PHP 的特定原因，否则我认为它只是使本来应该很容易的事情变得复杂。使用 CSS 可以减少服务器负载并将样式留在应有的位置。

**更新：** [这是一个小提琴。](http://jsfiddle.net/DHBrd/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T04:57:25.577

这是有道理的：

```
preg_replace("<strong>(.*?)</strong>", "$1", 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T05:13:17.620

这提供了[preg_replace_callback](http://php.net/preg_replace_callback)；

```
$s = '<strong> MOST </strong> of you may have a habit of wearing socks while sleeping.
      <strong> Wear socks while sleeping to prevent cracking feet</strong>
      <strong> Socks helps to relieve sweaty feet</strong>';
$s = preg_replace_callback('~<strong>(.*?)</strong>~i', function($m){
    return ucfirst(strtolower(trim($m[1])));
}, $s, 1);
print $s; 
```

出去;

```
Most of you may have a habit of wearing socks while sleeping.
<strong> Wear socks while sleeping to prevent cracking feet</strong>
<strong> Socks helps to relieve sweaty feet</strong> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T09:04:23.957

我必须同意@thordarson，他的回答不会改变你的内容，这对我来说更好。因为您的问题基本上是布局问题。这是我根据他的回答改编的版本。不同之处在于您首先将强文本重新恢复为正常格式。然后你把第一个字母大写。

```
 strong {
        font-weight: normal;
    }
    strong:first-letter {
        font-weight: normal;
        text-transform: uppercase;
    } 
```

[小提琴演示](http://jsfiddle.net/DHBrd/1/)

# ios - 在 ios 应用程序中使用 @synthesize

> ID：14658737
> 
> 赞同：2
> 
> 时间：2013-02-02T04:52:49.187
> 
> 标签：ios, objective-c

我在 iTunesU 的 iOS 开发课程中观看了精彩的 Paul Haggerty（因为谁不需要更新基础知识？）他说了一些我不知道的话：

> “我们永远不会访问下划线（_ 符号）变量”

然后他继续讨论了当你使用@property 来声明你的变量时，`@synthesize variable = _variable`是如何由编译器以及setter 和getter 在后台生成的代码。本质上，该代码永远不应该出现在您的应用程序中。

到目前为止，在我编写的所有 iOS 应用程序中，我总是`@property`在我的头文件中声明我的变量，`@synthesize VARIABLE_NAME = _VARIABLE_NAME;`自从观看讲座以来，我现在对是否应该`@synthesize`在我的代码中使用感到困惑。

我应该只使用属性声明吗？如果我在代码中使用 synthesize 声明，它有什么不同（如果有的话）？

既然哈格蒂先生不使用它，那我为什么要使用它呢？（考虑到他是一个 iOS 半神）。我非常觉得做我一直在做的事情很糟糕。

有人愿意澄清这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T05:12:10.697

[Xcode 4.0 开发者预览版 4 发行说明。](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html#//apple_ref/doc/uid/TP40001051-SW105)添加属性的默认自动合成（iOS 和 64 位 OS X）。您不需要`@synthesize`编译器实现部分中的指令来合成声明属性的访问器。

所以

```
@synthesize ivar = _ivar; 
```

如果您省略它，则完全相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T05:11:36.577

不再需要合成。今年的 WWDC 会议也涵盖了这一点。只需使用属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T05:11:39.167

不包括 "@synthesize VARIABLE_NAME = _VARIABLE_NAME" 将执行与实际包含它一样的操作，因为如果您不添加任何内容，编译器会自动添加它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T05:16:31.640

使用 Xcode 4.5 或更高版本。IDE`@synthesize`为您编写语句。

该`@synthesize`声明只是为您编写`setter`and `getter`。

那`_variable_name`是即时变量。

`variable_name`是唯一一个`_variable_name`默认返回值的方法。

默认情况下使用`variable = <Statement or value>. its calling the`setVarable_Name `method to set the`_variable_name` 时。

希望它有所帮助。

# ruby-on-rails - validates_uniqueness_of

> ID：14658738
> 
> 赞同：0
> 
> 时间：2013-02-02T04:52:55.400
> 
> 标签：ruby-on-rails, model

我正在尝试做的是提出模型`Project`，一次只能有一个项目处于活动状态。所以我正在考虑`projects`为`status`.

如何确保在给定时间只有一个项目处于活动状态？我调查过，`validates_uniqueness_of` 但如果这对我来说是解决方案，我有点困惑，因为我确实希望能够覆盖当前状态，尽管事实上如果一个项目已经启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:09:15.977

你`Project`应该有类似`:active`属性的东西。然后，您可以在`Project`模型上添加这样的验证

```
validate :ensure_only_one_active_project

def ensure_only_one_active_project
  active_project = Project.where(active: true).first

  errors.add(:active, "Another project is already active. Only one project can be active at a time") unless active_project.nil? || active_project.id == self.id
end 
```

现在，如果一个`Project`已经是活动的，并且有另一个*（当前不活动）* `Project` `@project`，并尝试做

```
@project.active = true
@project.valid? # this will return false 
```

`@project.errors`将包含`:active`具有上述错误的属性的哈希，因为

*   1`Project`已经激活
*   活动项目**不是**`Project`我们正在保存的当前项目。

# c++ - 如何将常量数组传递给构造函数初始化列表

> ID：14658739
> 
> 赞同：1
> 
> 时间：2013-02-02T04:52:58.917
> 
> 标签：c++, oop, initialization

我有一个消息类，我决定使用构建器设计模式。每条消息在完全构建后看起来非常相似。我使用 a`std::string`来保存信息（它实际上只是独立的字符，所以我可以使用`vector<char>`但`.c_str()`很方便。

每个不同的消息子类型的构造方法都是相同的（构建标题，构建货物，构建页脚，计算校验和......这是在`MessageBuilder`类中定义的（并继承到自定义消息构建器类）：

```
class MessageBuilder
{
public:
    // implementation details for all messages
    static const int32 MsgDelimeter = 99;
    // ...       

    Message getMsg();

    void buildMessage();

protected:
    MessageBuilder(uint8 msgID, uint8 cargoLen, uint8 csi, const uint8* cargo, const uint8 length)
        : m_msgID(msgID), m_cargoLen(cargoLen), m_csi(csi),
        m_cargo(cargo), m_contents(""), m_msg(m_contents) 
    { }

    // I previously tried passing cargo and length as just a std::string
    // if I could get that to work it would also be fine

    void buildHeader();
    void buildCargo();
    void buildFooter();
    void resizeContents();
    void calculateCheckSum();

    // message is built in m_contents
    Message::string m_contents;
    Message::string m_cargo;
    Message m_msg;

    // variables specific to msg type
    uint8 m_msgID;
    uint8 m_cargoLen;
    uint8 m_csi;

private:
}; 
```

然后构建一个特定的消息，我有一个特定的类：

```
class CustomMessageABuilder : public MessageBuilder
{
public:
    static const uint8 CustomMessageAID = 187;
    // more details
    // ...

    // what I want to do
    // static const uint8 CustomMessageACargo[4] = {0x65, 0xc7, 0xb4, 0x45};        

    // ** HERE ** 
    CustomMessageABuilder () 
        : MessageBuilder(CustomMessageAID, 
            CustomMessage1CargoLen, 
            //...
            CustomMessageACargo,
            CustomMessageALength
             {  }

}; 
```

无论如何，我想做的是将唯一的自定义字符串，货物，从`CustomMessageABuilder`构造函数传递到`MessageBuilder`类，它将存储在消息的中间。

每条消息的货物都不同，但以相同的方式存储，因此用于存储货物/创建货物的所有逻辑都在基`MessageBuilder`类中。所有的差异，如 msgID、cargoLen、cargo ……都是`CustomMessageBuilder`类中的常量。

这将使我的消息类保持非常简单：

```
class Message
{
public:
    typedef std::string string;
    // ctor
    Message(string);
    // dtor
    ~Message();
    // copy ctor
    Message(const Message&);
    // assignment operator
    Message& operator=(const Message&);

    // getters
    uint8 getLength() const;
    const string& getData() const;
    const uint8* getCSTR() const;
    // setters
    void setData(const string&);

protected:
    // ctor
    Message() : m_contents("") { }

    // contents of entire message
    string m_contents;

}; 
```

所以我想这一切都归结为：

**为一个类定义一个字符/十六进制值（每个消息货物）的常量数组的最佳方法是什么（并且仍然能够在构造函数的初始化列表中传递它）？或者，告诉我我缺少的明显方法。**

注意：对于其他消息类，货物将是动态内容，但始终是固定长度。

注2：我最终将拥有一个拥有 a`CustomMessageBuilder()`并告诉它的 director 类`buildMessage()`。

任何帮助、建议、批评等将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:12:11.147

静态 const 成员可以在类之外初始化。

```
#include <iostream>

class A
{
public:
     static const char cargo[4];
};

const char A::cargo[4] = {0x65, 0xc7, 0xb4, 0x45};

int main()
{
    std::cout << A::cargo[0] << A::cargo[1] << A::cargo[2] << A::cargo[3] << std::endl;
} 
```

# iphone - 动态设置滚动视图高度

> ID：14658742
> 
> 赞同：0
> 
> 时间：2013-02-02T04:53:41.390
> 
> 标签：iphone, uitableview, uiscrollview, xcode4.5

我是 iphone 开发的新手，这是我的第一个问题。

我在 UIScrollView 中显示 UITableView 并且我无法指定 tableView 和 scrollView 的高度，因为数据不是静态的，它来自服务。

我需要scrollView根据tableView的内容（高度）动态设置它的高度。我已经这样做了，但我看不到最后一个单元格的完整数据。

```
self.tableView=[[UITableView alloc] initWithFrame:CGRectMake(0,0,327,480) style:UITableViewStylePlain];
    self.tableView.delegate=self;
    self.tableView.dataSource=self;
    self.tableView.scrollEnabled = NO;
    [testscroll addSubview:self.tableView];
    [self.tableView reloadData];
    self.tableView.frame = CGRectMake(self.tableView.frame.origin.x, self.tableView.frame.origin.y, self.tableView.frame.size.width, self.tableView.contentSize.height);
    float ftbl = self.tableView.frame.origin.y + self.tableView.contentSize.height + 150;
    scrollView.contentSize=CGSizeMake(320, ftbl);
    scrollView.scrollEnabled=YES; 
```

我正在计算 tableview 的高度：

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

        UITableViewCell *cell = [self tableView: self.tableView cellForRowAtIndexPath: indexPath];

        NSString *city = lblcity.text;
        UIFont *font = [UIFont fontWithName:@"Helvetica" size:14.0];
        CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);
        CGSize bounds = [city sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:NSLineBreakByWordWrapping];

        NSString *state = lblstate.text;
        UIFont *font1 = [UIFont fontWithName:@"Helvetica" size:14.0];
        CGSize constraintSize1 = CGSizeMake(280.0f, MAXFLOAT);
        CGSize bounds1 = [state sizeWithFont:font1 constrainedToSize:constraintSize1 lineBreakMode:NSLineBreakByWordWrapping];

        NSString *name = lblname.text;
        UIFont *font2 = [UIFont fontWithName:@"Helvetica" size:14.0];
        CGSize constraintSize2 = CGSizeMake(280.0f, MAXFLOAT);
        CGSize bounds2 = [name sizeWithFont:font2 constrainedToSize:constraintSize2 lineBreakMode:NSLineBreakByWordWrapping];

        NSString *address = lbladdress.text;
        UIFont *font3 = [UIFont fontWithName:@"Helvetica" size:14.0];
        CGSize constraintSize3 = CGSizeMake(280.0f, MAXFLOAT);
        CGSize bounds3 = [address sizeWithFont:font5 constrainedToSize:constraintSize3 lineBreakMode:NSLineBreakByWordWrapping];

      return (CGFloat) cell.bounds.size.height + bounds.height+bounds1.height+bounds2.height+bounds3.height;

    } 
```

scrollView 如何根据 UItableview 的高度增加/减少它的高度？

编辑：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

   static NSString *CellIdentifier=@"Cell";

        UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil)
        {
            cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];

            lblname = [[UILabel alloc] initWithFrame:CGRectZero];
            lblname.tag = 111;
            lblname.backgroundColor = [UIColor clearColor];
            [lblname setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
            [lblname setLineBreakMode:NSLineBreakByWordWrapping];
            [cell addSubview:lblname];

            lbladdress = [[UILabel alloc] initWithFrame:CGRectZero];
            lbladdress.tag = 113;
            lbladdress.backgroundColor = [UIColor clearColor];
            [lbladdress setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
            [lbladdress setLineBreakMode:NSLineBreakByWordWrapping];
            [cell addSubview: lbladdress];

           lblcity = [[UILabel alloc] initWithFrame:CGRectZero];
            lblcity.tag = 115;
            lblcity.backgroundColor = [UIColor clearColor];
            [lblcity setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
            [lblcity setLineBreakMode:NSLineBreakByWordWrapping];
            [cell addSubview: lblcity];

            lblstate=[[UILabel alloc] initWithFrame:CGRectZero];
            lblstate.tag = 116;
            lblstate.backgroundColor = [UIColor clearColor];
            [lblstate setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
            [lblstate setLineBreakMode:NSLineBreakByWordWrapping];
            [cell addSubview: lblstate];

        }

        cell.accessoryType= UITableViewCellAccessoryDetailDisclosureButton;
        NSMutableDictionary *d =[[NSMutableDictionary alloc]initWithDictionary: [providerarray objectAtIndex:indexPath.row]];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        NSString *name2 = [d objectForKey:@"Name"];
        CGSize constraint1 = CGSizeMake(175, 2000.0f);
        CGSize size1 = [name2 sizeWithFont: [UIFont fontWithName:@"Helvetica-Bold" size:14] constrainedToSize:constraint1 lineBreakMode:NSLineBreakByWordWrapping];
        lblname = (UILabel *)[cell viewWithTag:111];
        lblname.text = [NSString stringWithFormat:@"%@",name2];
        [lblname setNumberOfLines:0];
        lblname.frame = CGRectMake(105,25, size1.width, size1.height);

            NSString *lane2 = [d  objectForKey:@"Address"];
            CGSize constraint3 = CGSizeMake(175, 2000.0f);
            CGSize size3 = [line2 sizeWithFont: [UIFont fontWithName:@"Helvetica" size:12] constrainedToSize:constraint3 lineBreakMode:NSLineBreakByWordWrapping];
            lbladdress = (UILabel *)[cell viewWithTag:113];
            lbladdress.text = [NSString stringWithFormat:@"%@",lane2];
            [lbladdress setNumberOfLines:0];
            lbladdress.frame = CGRectMake(105,lblname.frame.size.height+lblname.frame.origin.y, size3.width, size3.height);

                NSString *city2 =[d  objectForKey:@"City"];

                NSString *trimmedString = [city2 stringByTrimmingCharactersInSet:
                                           [NSCharacterSet whitespaceAndNewlineCharacterSet]];
                NSLog(@"%@", trimmedString);
                CGSize constraint5 = CGSizeMake(175, 2000.0f);
                CGSize size5 = [trimmedString sizeWithFont: [UIFont fontWithName:@"Helvetica" size:12] constrainedToSize:constraint5 lineBreakMode:NSLineBreakByWordWrapping];
                lblcity = (UILabel *)[cell viewWithTag:115];
                lblcity.text = [NSString stringWithFormat:@"%@",trimmedString];
                [lblcity setNumberOfLines:0];
                lblcity.frame = CGRectMake(105,lbladdress.frame.size.height+lbladdress.frame.origin.y, 175, size5.height);

        NSString *state1=[d objectForKey:@"State"];

        CGSize constraint6=CGSizeMake(175,2000.0f);
        CGSize size6=[state1 sizeWithFont:[UIFont fontWithName:@"Helvetica" size:12]  constrainedToSize:constraint6 lineBreakMode:NSLineBreakByWordWrapping];
        state=(UILabel *)[cell viewWithTag:116];
        [state setText:[NSString stringWithFormat:@"%@",state1]];

        state.frame=CGRectMake(105, lblcity.frame.size.height+lblcity.frame.origin.y, size6.width, size6.height);
        [state setTextAlignment:NSTextAlignmentLeft];
        [state sizeToFit];

           return cell;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:00:28.573

我会观察表格视图的 contentSize 属性，并据此调整滚动视图的高度。例如：

假设你有你的表格视图。您可以像这样观察其内容大小：

```
[self.tableView addObserver:self forKeyPath:@"contentSize" options:0 context:NULL]; 
```

现在，您可以将此方法添加到您的视图控制器：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

} 
```

在此方法中，您可以添加一些逻辑来查看观察到的值发生了哪些变化，然后调整滚动视图的高度。

```
if (object == self.tableView) {

    if ([keyPath isEqualToString:@"contentSize"]) {

        CGRect scrollViewFrame = self.scrollView.frame;
        scrollViewFrame.height = self.tableView.contentSize.height;
        [self.scrollView setFrame:scrollViewFrame];

    }

} 
```

最后，您可以在 dealloc 中删除观察者。

```
-(void)dealloc {

    [self.tableView removeObserver:self forKeyPath:@"contentSize"];

} 
```

# node.js - 从 mongoose create 中检索 _id

> ID：14658743
> 
> 赞同：3
> 
> 时间：2013-02-02T04:53:47.203
> 
> 标签：node.js, mongodb, mongoose

一直在寻找答案，我认为这是一个常见问题。

我正在使用 Mongoose 和 Step.js（用于代码控制）。

我正在遍历几条记录，创建单个模型并希望返回创建的 ID。这是针对我为批量插入记录而实施的 RESTful 服务。我没有包括 Step 正在做的所有部分。

代码大致如下：

```
var group = this.group();

for (var i in records) {
    model.create(records[i], group());
} 
```

分组功能为Step，等待所有记录保存。

问题是一旦保存了每条记录，我希望 Mongoose 将返回与每个创建关联的 _id。它只返回记录本身的结果，没有正确的 _id 值。

我尝试创建 ObjectId 并保存模型，但是失败了，并且在许多论坛中没有很多人推荐。

谢谢。

# mysql - 表内连接或选择多个表

> ID：14658745
> 
> 赞同：0
> 
> 时间：2013-02-02T04:54:12.633
> 
> 标签：mysql, inner-join

> **可能重复：**
> [INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)

**内部联接：**

* * *

```
SELECT *
FROM PETS
INNER JOIN OWNER ON PETS.OWNER_ID = 1
AND OWNER.ID = 1 
```

* * *

**多表选择：**

* * *

```
SELECT *
FROM PETS, OWNER
WHERE PETS.OWNER_ID = 1
AND OWNER.ID = 1 
```

* * *

*   这个比那个好吗？
*   比别人快？

它们似乎产生完全相同的结果。

*   有什么区别吗？

*我正在努力学习最好的方法。在使用连接时，我注意到通过多表调用可以实现完全相同的事情*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:58:17.250

阅读有关交叉连接和内部连接之间区别的答案 与交叉[连接相比，内部连接的性能](https://stackoverflow.com/questions/670980/performance-of-inner-join-compared-to-cross-join)

# java - 手动点击 Java 中的 SOAP 服务，得到 IO.FileNotFound 异常

> ID：14658746
> 
> 赞同：1
> 
> 时间：2013-02-02T04:54:42.770
> 
> 标签：java, soap, filenotfoundexception, manual

我需要手动访问 .Net SOAP 服务。所有的进口商都有它的 WSDL 问题，所以我只是手动创建 XML 消息，使用 HttpURLConnection 连接，然后解析结果。我已经将 Http/SOAP 调用包装到一个函数中，该函数应该将结果作为字符串返回。这是我所拥有的：

```
 //passed in values: urlAddress, soapAction, soapDocument

  URL u = new URL(urlAddress);
  URLConnection uc = u.openConnection();
  HttpURLConnection connection = (HttpURLConnection) uc;

  connection.setDoOutput(true);
  connection.setDoInput(true);
  connection.setRequestMethod("POST");
  connection.setRequestProperty("SOAPAction", soapAction);
  connection.setRequestProperty("User-Agent","Mozilla/5.0 ( compatible ) ");
  connection.setRequestProperty("Accept","[star]/[star]");      
  connection.setRequestProperty("Content-Type", "text/xml; charset=utf-8");

  OutputStream out = connection.getOutputStream();
  Writer wout = new OutputStreamWriter(out);

  //helper function that gets a string from a dom Document
  String xmldata = XmlUtils.GetDocumentXml(soapDocument);
  wout.write(xmldata);        
  wout.flush();
  wout.close();

  // Response
  int responseCode = connection.getResponseCode();
  BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));
  String responseString = "";
  String outputString = "";
  //Write the SOAP message response to a String.
  while ((responseString = rd.readLine()) != null) {
      outputString = outputString + responseString;
  }

  return outputString; 
```

我的问题是`BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));`我得到一个带有我正在使用的地址的“java.io.FileNotFoundException”（即urlAddress）。如果我将该地址粘贴到浏览器中，它会很好地打开 Soap 服务网页（地址是[http://protectpaytest.propay.com/API/SPS.svc](http://protectpaytest.propay.com/API/SPS.svc)）。根据我的阅读，FileNotFoundException 是 HttpURLConnection 返回 400+ 错误消息。我添加了行 getResponseCode() 只是为了查看确切的代码是什么，它是 404。我从其他一些页面添加了 User-Agent 和 Accept 标头，说它们是必需的，但我仍然得到 404。

我还缺少其他标题吗？我还需要做什么才能让这个调用工作（因为它在浏览器中工作）？

-shnar

# ruby - 重新加载 Ruby 中的自修改代码

> ID：14658749
> 
> 赞同：-1
> 
> 时间：2013-02-02T04:55:04.830
> 
> 标签：ruby, closures, block, self-modifying

在[我之前的问题](https://stackoverflow.com/questions/14658230)之后，让我对我到底想要什么更准确，更少混淆。我写了一个化学包，我决定所有化学物质和反应的名称都大写，例如“ATP”、“腺苷”、“脱氧胞苷”等。这让我可以写例如：

```
ATP = ChemicalSpecies.new initial_concentration: 225.0     # in micromolars
GDP = ChemicalSpecies.new initial_concentration: 75.0      # in micromolars 
```

现在如果使用 ATP 磷酸化 GDP，使用具有催化常数的酶 NDPK

```
NDPK_constant = 0.6 
```

，我想写成：

```
ChemicalReaction.new name: ATP_GDP_phosphate_exchange,
                     rate: lambda { ATP * GDP * NDPK_constant } 
```

我可以写：

```
ChemicalReaction.new name: ATP_GDP_phosphate_exchange,
                     reactants: [ ATP, GDP ],
                     rate: lambda { |reactant_1, reactant_2| reactant_1 * reactant_2 * NDPK_constant } 
```

但对我来说它似乎太湿了。看看如何`reactant_1`，`reactant_2`重复两次，同时`ATP`，`GDP`记住。简单的解决方案是：

```
ChemicalReaction.new name: ATP_GDP_phosphate_exchange,
                     rate: lambda { _ATP * _GDP * NDPK_constant } 
```

以及将和定义为 、 的浓度的上下文中`instance_eval`的速率查找块。这非常接近，但不*完全*是我想要的东西，这让我很生气。我什至可以用来查找块内使用了哪些化学物质，例如。`_ATP``_GDP``ATP``GDP`*`RubyVM`*

 *```
require 'ap' # (awesome_print, like pretty_print but fancier, install if you don't have)
ap RubyVM::InstructionSequence.disassemble( lambda { _ATP * _GDP * NDPK_constant } ).split( "\n" )
#=> [ 0] "== disasm: <RubyVM::InstructionSequence:block in irb_binding@(irb)>=====",
    [ 1] "== catch table",
    [ 2] "| catch type: redo   st: 0000 ed: 0027 sp: 0000 cont: 0000",
    [ 3] "| catch type: next   st: 0000 ed: 0027 sp: 0000 cont: 0027",
    [ 4] "|------------------------------------------------------------------------",
    [ 5] "0000 trace            1                                               (  22)",
    [ 6] "0002 putself          ",
    [ 7] "0003 send             :_ATP, 0, nil, 24, <ic:0>",
    [ 8] "0009 putself          ",
    [ 9] "0010 send             :_GDP, 0, nil, 24, <ic:1>",
    [10] "0016 opt_mult         <ic:5>",
    [11] "0018 getinlinecache   25, <ic:3>",
    [12] "0021 getconstant      :NDPK_constant",
    [13] "0023 setinlinecache   <ic:3>",
    [14] "0025 opt_mult         <ic:6>",
    [15] "0027 leave 
```

通过解析这个，可以了解里面有什么名字：`_ATP`和`_GDP`. 但就像我说的，出于固执，我发现`_ATP`，`_GDP`丑陋。我只想说`ATP`,`GDP`或者也许`[ATP]`,`[GDP]`因为化学家使用括号来表示浓度。我知道这就是 Yusuke Endoh 所说的约束编码。我的问题是，这两种理想的语法中的任何一种都可以被打败吗？例如，有一个闭包`lambda { ATP * GDP * NDPK_constant }`，拆卸它会给出：

```
ap RubyVM::InstructionSequence.disassemble( lambda { ATP * GDP * NDPK_constant } ).split( "\n" )
#=> [ 0] "== disasm: <RubyVM::InstructionSequence:block in irb_binding@(irb)>=====",
    [ 1] "== catch table",
    [ 2] "| catch type: redo   st: 0000 ed: 0027 sp: 0000 cont: 0000",
    [ 3] "| catch type: next   st: 0000 ed: 0027 sp: 0000 cont: 0027",
    [ 4] "|------------------------------------------------------------------------",
    [ 5] "0000 trace            1                                               (  23)",
    [ 6] "0002 getinlinecache   9, <ic:0>",
    [ 7] "0005 getconstant      :ATP",
    [ 8] "0007 setinlinecache   <ic:0>",
    [ 9] "0009 getinlinecache   16, <ic:1>",
    [10] "0012 getconstant      :GDP",
    [11] "0014 setinlinecache   <ic:1>",
    [12] "0016 opt_mult         <ic:5>",
    [13] "0018 getinlinecache   25, <ic:3>",
    [14] "0021 getconstant      :NDPK_constant",
    [15] "0023 setinlinecache   <ic:3>",
    [16] "0025 opt_mult         <ic:6>",
    [17] "0027 leave 
```

可以看到`getconstant`出现在第 7 行、第 10 行的`:ATP`, `:GDP`。在块外，`ATP`常量`GDP`包含`ChemicalSpecies`实例，但在块内，我希望它们引用 ATP 和 GDP*浓度*。在常量本身具有不同含义的环境中，我没有找到任何方法来评估块（也就是说，除非我想在运行时使用肮脏的技巧临时重写常量，这是我不想要的）。我渴望的是能够`getconstant :ATP`用例如替换这个 RubyVM 代码指令。`send :_ATP, 0, nil, 24, <ic:0>`，然后例如。`instance_eval`在一个环境中关闭`_ATP`意味着`ATP.concentration`......我知道我在问一些棘手的问题，再次抱歉......

至于第二个选项`[ATP]`，`[GDP]`那只需要在块内激活某种新的数组创建钩子，这样如果只有一个元素，即 a `ChemicalSpecies`，则将返回其浓度而不是数组对象。我认为这同样是困难的，即使不是不可能的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:54:43.610*

# ios - CGContext 与 CALayer

> ID：14658750
> 
> 赞同：5
> 
> 时间：2013-02-02T04:55:21.013
> 
> 标签：ios, core-animation, core-graphics, cgcontext, cashapelayer

我正在尝试了解 Quartz 2D 并查看在线书籍[Quartz 2D Graphics for Mac OS X Developers](http://flylib.com/books/en/3.310.1.18/1/)。

让我感到困惑的一件非常基本的事情是 CGContext。例如，我可以使用下面的代码绘制一个简单的“U”形，并在 a 中使用它`CAShapeLayer`而不引用 a `CGContext`。默认情况下是否隐含/提供上下文`CAShapeLayer`？

我可能在这里混合了几个 iOS/OSX 图形 API，所以也许有人可以澄清我哪里出错了。

```
CGPoint pt1 =  CGPointMake(100, 100);
CGPoint pt2 =  CGPointMake(150, 100);
CGPoint pt3 =  CGPointMake(150, 200);
CGPoint pt4 =  CGPointMake(190, 200);
CGPoint pt5 =  CGPointMake(190, 100);
CGPoint pt6 =  CGPointMake(210, 100);
CGPoint pt7 =  CGPointMake(210, 250);
CGPoint pt8 =  CGPointMake(100, 250);
CGPoint pt9 =  CGPointMake(100, 100);

CGMutablePathRef path = CGPathCreateMutable();
CGPathMoveToPoint(path, nil, pt1.x,pt1.y);
CGPathAddLineToPoint(path, nil, pt2.x, pt2.y);
CGPathAddLineToPoint(path, nil, pt3.x, pt3.y);
CGPathAddLineToPoint(path, nil, pt4.x, pt4.y);
CGPathAddLineToPoint(path, nil, pt5.x, pt5.y);
CGPathAddLineToPoint(path, nil, pt6.x, pt6.y);
CGPathAddLineToPoint(path, nil, pt7.x, pt7.y);
CGPathAddLineToPoint(path, nil, pt8.x, pt8.y);
CGPathAddLineToPoint(path, nil, pt9.x, pt9.y);

CAShapeLayer *shapeLayer = [CAShapeLayer layer];
[self.view.layer addSublayer:shapeLayer]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T00:03:17.920

是的，CAShapeLayer 会为您将路径绘制到上下文中。

请注意，使用 CAShapeLayer，您使用 CG *Path*，而如果您自己绘制到上下文中，您可能希望使用 CG *Context*自己的路径绘制函数。

最大的区别是 CGContext 路径函数将命令直接添加到上下文的当前路径中，当您告诉上下文填充或描边（或明确放弃）路径时将其丢弃，而 CGPath 对象将它们保留在周围以再次重用再一次——例如，如果您更改 CAShapeLayer 的绘图属性。

当然，即使您要将其绘制到上下文中，也有使用 CGPath 的情况。如果命令集永远不会改变，那么这是一个潜在的优化；它使转换路径变得容易；之后，您可以迭代其命令（例如，将它们导出到文件）。您还可以使用 UIBezierPath（即，使用 Objective-C 消息）编写绘图代码，然后向它询问 CGPath。

以任何一种方式使用 CGContext 都没有错，并且可能在某些情况下它是最好的，但 CAShapeLayer 是大多数用途的最简单方法，特别是在 Cocoa Touch 中，其中每个 UIView 都由您可以将 CAShapeLayer 放入的 CALayer 支持.

# date - 带有日期占位符的 Rally 批量查询 api

> ID：14658751
> 
> 赞同：0
> 
> 时间：2013-02-02T04:55:23.850
> 
> 标签：date, rally, bulk

我正在使用 Rally 批量查询 API 从多个表中提取数据。当我尝试使用占位符作为迭代的 StartDate 并将其传递给相同的批量请求的以下查询时，就会出现我的问题。IE

```
"iteration": "/Iteration?fetch=ObjectID,StartDate&query=(Name = \"Sprint 1\")",
"started": "${iteration.StartDate}",
"other_queries": "...?query=(CreatedDate > $(iteration.StartDate))" 
```

批量服务似乎将此字段转换为格式化字符串。有没有办法防止这种情况发生？我正在尝试使用占位符按日期限制其他查询而不发出多个请求。

看起来迭代对象正确地返回了日期，但是当它用作占位符时，它会自动转换为字符串。

```
"started": ["Wed Jan 16 22:00:00 MST 2013"],

"iteration": {
     "Results": [
         ....
         "StartDate": "2013-01-17T05:00:00.000Z",
]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:25:11.527

不幸的是，没有，因为此功能当前已实现，这是预期的行为。占位符在服务器端转换为格式化的字符串，因此如果在另一个查询中需要相同的数据，则有必要制定类似的后续请求。

# c++ - 如何以及何时从 malloc 中转换返回值？

> ID：14658753
> 
> 赞同：0
> 
> 时间：2013-02-02T04:55:28.077
> 
> 标签：c++

我不确定在使用`malloc`. 我来自Objective C，其中以下内容完全合法：

```
ALuint * sources;
sources=malloc(sizeof(ALuint)*32); 
```

但是，在 C++ 中，编译器会说“从不兼容的类型 void * 分配给 ALuint *”。

我知道从返回的内存`malloc`不是我的特定类型，而且我知道 C++ 对类型很严格。

现在，我可以这样做：

```
 sources=(ALuint*)malloc(sizeof(ALuint)*32); 
```

但是我读过比我更聪明的编码员说永远不要以这种方式投射。为什么不？如果不是，那么何时或如何是进行这项工作的最佳时间或方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:56:33.610

1.  [避免`malloc`在 C++ 中](https://stackoverflow.com/questions/184537/in-what-cases-do-i-use-malloc-vs-new)使用。
2.  如果必须`#1`，您[必须强制转换代码的返回类型`malloc`才能编译](http://ideone.com/VSPfXY)。
3.  唯一的例外`#2`是您的[目标指针是`void`指针](http://ideone.com/C2kNhn)。
4.  [不强制返回`malloc`is （*有争议地*）被认为是 C 中的良好实践](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)。

因此，在 C++ 中，强制转换是必要的。不过，使用的演员表*类型*也很重要。它绝对不应该是 c 风格的演员表。以上链接仅用于演示需要演员表。

* * *

现在，我可以这样做：

```
sources=(ALuint*)malloc(sizeof(ALuint)*32); 
```

但是我读过比我更聪明的编码员说永远不要以这种方式投射。为什么不？

* * *

因为在 C++ 中，标准定义了 c 样式转换，以按以下顺序映射到 C++ 转换。第一个成功的将用于：

1.  const_cast
2.  static_cast
3.  static_cast，然后是 const_cast
4.  reinterpret_cast
5.  重新解释_cast，然后是 const_cast

正如您所见，c 风格的转换实际上可能会导致`reinterpret_cast`潜在的危险，因为它可以在不兼容的指针类型之间进行转换。因此，如果您必须`malloc`使用：

```
sources=static_cast<ALuint*>malloc(sizeof(ALuint)*32); 
```

# regex - 跨度标签中地址的正则表达式

> ID：14658754
> 
> 赞同：0
> 
> 时间：2013-02-02T04:55:32.160
> 
> 标签：regex

我需要从这样的示例中提取一个在每个新页面上都会更改的地址。所以我需要一个正则表达式从下面的 html 代码片段中提取 100 E Faith Ter。

```
<span style="..." class="addr">100 E Faith Ter<br>
    <span class="locality">Maitland</span>,
    <span class="region">FL</span>
    <span class="postal-code">32751</span>
</span> 
```

我正在使用 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:58:27.510

您没有指定语言，并且正则表达式与语言完全无关，但它们在指定如何处理多行方面有所不同。在 javascript 中：`/^.*$/m`选择第一行。

将您的问题更新为完整的 HTML 而不是原始文本后，您可以使用：

```
^\<.+?\>(.+?)\<br\>$ 
```

并检索第一个带括号的子匹配（确保使用多行选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:59:39.493

[他来的小马！！](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

整个事情都不需要正则表达式。相反，只需使用剥离所有 HTML 标记 - 如果您使用的是 PHP，[`strip_tags`](http://php.net/strip-tags)则可以很好地执行此操作，否则您可以使用正则表达式将其替换`<[^>]+>`为空字符串。您应该得到地址的纯文本。然后，您可以将其拆分为单独的行。

或者你可能只是这个人：

![xkcd](../Images/31588b14338bffcb85dc4b499181bf57.png)

# regex - Vimeo 正则表达式模式

> ID：14658756
> 
> 赞同：0
> 
> 时间：2013-02-02T04:55:55.233
> 
> 标签：regex

有人可以帮我在 Vimeo 缩略图 URL 中提取以下模式：

“406/278/406278075”来自：

“ [http://b.vimeocdn.com/ts/406/278/406278075_640.jpg](http://b.vimeocdn.com/ts/406/278/406278075_640.jpg) ”

我已经尝试为此创建自己的正则表达式，但我无法得到它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:10:55.363

`(?:[0-9]+/?)+(?=_)`

```
(?:           = open non-capturing subpattern  
    [0-9]+    = digit, one or more times
    /?        = possibly followed by a forward slash
)             = close non-capturing pattern
+             = the preceding non-capturing subpattern, one or more times
(?=           = open look ahead assertion:
    _         = the pattern must be followed by an underscore
)             = close look ahead assertion 
```

[*正则表达式示例*](http://regexr.com?33kmk)

使用波浪号`~`作为分隔符：

`~(?:[0-9]+/?)+(?=_)~`

或者，使用正斜杠作为分隔符：

`/(?:[0-9]+\/?)+(?=_)/`

注意：这次你必须转义模式中的正斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:28:37.840

我发现的最好的简单和兼容的东西。我不是 RegExp 专家。

`[0-9_]+(?!..jpg$)`

然后，它是匹配数组的最后一个值。

# php - 存储数据和提取数据的快速方法

> ID：14658766
> 
> 赞同：0
> 
> 时间：2013-02-02T04:56:59.103
> 
> 标签：php, database, performance, data-storage

我想找到一种方法（在 PHP 中）快速存储临时数据，以便能够快速提取它们。

目前，我使用的是 mysql 数据库，但响应时间太长。

这就是我现在的想法......我认为存储数据的最快方法是将其放入“全局”数组并使用它来插入和提取数据。问题是我无法找到一种方法来创建所有客户端或会话都可以使用的“全局”变量。

我的第二个猜测是，可能 JSON 或 XML 文件会比 DB 更快。但我不确定它是否足够快，因为数据也将写入 HDD。

所以理想情况下是使用所有客户端都可以使用的“全局”变量。因此，如果您知道我可以做到这一点的方法，或者您有任何快速处理数据的方法，我在听！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:57:45.430

I think you need a [Real-time Database](http://en.wikipedia.org/wiki/Real-time_database) like [this](http://www.mimer.com/Products/MimerSQLRealtime/MimerSQLRealTimeBenchmark.aspx).

# ios - @implementation ItemsViewController 实现不完整

> ID：14658767
> 
> 赞同：-1
> 
> 时间：2013-02-02T04:57:13.100
> 
> 标签：ios

我正在尝试从 ios 书籍（IOS 编程）编写一个 IOS 项目。

我看到了一个类似的问题，并尝试了提供的解决方案，但它仍然无法正常工作。

在 itemsViewController.m 文件中，我不断收到“不完整的实现。我不知道如何纠正。我尝试使用其他类似的解决方案，但仍然无法使其工作。

这里有两个文件 ItemsViewController.h 和 ItemsViewController.m

```
//  ItemsViewController.h
//  Homepwner
#import <Foundation/Foundation.h>

@interface ItemsViewController : UITableViewController

{
    IBOutlet UIView *headerView;
}

- (UIView *)headerView;
- (IBAction)addNewItem:(id)sender;
- (IBAction)toggleEditingMode:(id)sender;

@end

//
//  ItemsViewController.m
//  Homepwner
//

//

#import "ItemsViewController.h"
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation ItemsViewController

- (id)init
{
    //Call the superclass's designated initializer
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        for (int i = 0; i < 5; i++) {
            [[BNRItemStore sharedStore] createItem];
        }

    }
    return self;
}

- (id)initWithStyle:(UITableViewStyle)style
{
    return [self init];
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    return [[[BNRItemStore sharedStore] allItems] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Check for a reusable cell first, use that if it exists
    UITableViewCell *cell =
    [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    // If there is no reusable cell of this type, create a new one
    if (!cell) {
        cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
             reuseIdentifier:@"UITableViewCell"];
    }

    // Set the text on the cell with the description of the item
    // that is at the nth index of items, where n = row this cell
    // will appear in on the tableview

    BNRItem *p = [[[BNRItemStore sharedStore] allItems]
                  objectAtIndex:[indexPath row]];

    [[cell textLabel] setText:[p description]];

    return cell;
}

@end 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:06:07.840

如果您转到产品的构建日志，您实际上可以看到需要填写的缺失方法。这是一个例子：

![构建日志有有用的信息](../Images/9221418cc5b808e18e03a9b4d790c986.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:03:56.783

您已经在接口中声明了这些方法：

```
- (UIView *)headerView; 
- (IBAction)addNewItem:(id)sender;
- (IBAction)toggleEditingMode:(id)sender; 
```

并且没有提供实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:03:27.377

此代码应添加到 ItemViewController.m 文件中

```
 - (UIView *)headerView
{
    UIView *view = nil;
    return view;
}
 - (IBAction)addNewItem:(id)sender

 {

 } 
 - (IBAction)toggleEditingMode:(id)sender
{

} 
```

# php - 在 Magento 中添加自定义定价和名称

> ID：14658770
> 
> 赞同：0
> 
> 时间：2013-02-02T04:57:34.890
> 
> 标签：php, magento, magento-1.7

我是 magento 的新手，我有一个小问题。假设，在从后端输入订单时，管理员必须添加他的商店中不存在的产品。那么，他必须先添加产品，然后再输入订单，还是有一种简单的方法可以从订单页面做到这一点？我不想保存产品。我只想接受订单并输入它而不添加产品及其价格。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:14:36.710

目前在 Magento 中没有这样的功能，老实说，你描述的情况有点奇怪。尽管 Magento 没有在销售平面订单项目表中保留对产品表的引用，但是在此表中有一个项目，我们在其他任何地方都找不到关于它的历史记录，这在电子商务解决方案中是非常不寻常的。但是，在您的情况下，您应该开发一个模块，将此类产品直接添加到订单项目中并处理与这些产品有关的财务问题。

# mongodb - Mongodb findAndModify 嵌入文档——你怎么知道你修改了哪一个？

> ID：14658772
> 
> 赞同：1
> 
> 时间：2013-02-02T04:58:16.487
> 
> 标签：mongodb, mongoid, findandmodify

`findAndModify`在 mongodb 中很棒，但是我很难知道我修改了哪个嵌入式文档。

这是一个`Post`embeds_many的示例`Comments`。（我使用的是 Mongoid ORM，但这个问题对于任何 MongoDB 设置都是通用的）。

```
begin
  p = Post.asc(id).where(comments: { '$elemMatch' => {reserved: false} }).find_and_modify({'$set' => {'comments.$.reserved' => true}}, {new: true}
  # now i need to find which comment I just reserved
  c = p.comments.select{|c| c.reserved }.first
  ...
ensure
  c.update_attribute :reserved, false
end 
```

好的，这种工作，但如果我有多个进程同时运行它，我`select`可以选择另一个进程保留的注释（竞争条件）。

这是我目前最接近的（按进程 ID 保留）：

```
begin
  p = Post.asc(id).where(comments: { '$elemMatch' => {reserved: nil} }).find_and_modify({'$set' => {'comments.$.reserved' => Process.pid}}, {new: true}
  # now i need to find which comment I just reserved
  c = p.comments.select{|c| c.reserved == Process.pid }.first
  ...
ensure
  c.update_attribute :reserved, nil
end 
```

这似乎有效。这是最好的方法还是有更好的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:30:50.063

能够通过生成一个`SecureRandom.hex`并将其设置在嵌入文档上来解决它`find_and_modify`。然后，您可以遍历嵌入的文档并查看哪个具有匹配的十六进制，以查看您正在使用哪个文档。

# javascript - 如何使用 javascript 和 youtube api 使文本可点击

> ID：14658788
> 
> 赞同：0
> 
> 时间：2013-02-02T05:00:17.567
> 
> 标签：javascript, html, json, youtube-api

现在我有一个基本的 html 页面，它使用 youtubes api 获取最受欢迎的视频。到目前为止，它显示了视频的标题，但我正在尝试使这些标题可点击。如果点击标题，它们就会被带到实际 youtube 上的视频中。我知道理论上我可以找到最受欢迎的视频然后做一个可点击的链接，但我希望每次使用 youtube api 找到一个新的流行视频时或多或少地自动更新。现在我有这个基本代码。

```
<html>
<head>
<title>My Videos</title>
<style>
.titlec {
    font-size: small;
}
ul.videos li {
    float: left;
    width: 10em;
    margin-bottom: 1em;
}
ul.videos {
    margin-bottom: 1em;
    padding-left : 0em;
    margin-left: 0em;
    list-style: none;
}
</style>
<script type="text/javascript" src="http://swfobject.googlecode.com/svn/trunk/swfobject/swfobject.js"></script>
<script type="text/javascript">

function showData(data) {
  var feed = data.feed;
  var entries = feed.entry || [];
  var html = ['<ul class="videos">'];
  for (var i = 0; i < entries.length; i++) {
    var entry = entries[i];
    var title = entry.title.$t.substr(0, 20);
  //  var thumbnailUrl = entries[i].media$group.media$thumbnail[0].url;
    html.push('<span class="titlec">', title, '...</span><br /></span></li>');
  }
// html.push('</ul><br style="clear: left;"/>');
  document.getElementById('videos2').innerHTML = html.join('');
  if (entries.length > 0) {
    loadVideo(entries[0].media$group.media$content[0].url, false);
  }
}
</script>
</head>
<body>
<div id="playerContainer" style="width: 20em; height: 180px; float: left;">
  <object id="player">
  </object>
</div>
<div id="videos2"></div>
<script 
    type="text/javascript" 
    src="http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?time=this_week&alt=json-in-script&callback=showData&max-results=10&format=5">
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:47:20.193

我不确定我是否完全理解您要实现的目标，但我创建了一个[jsfiddle](http://jsfiddle.net/FDxHH/20/)！

这是代码：

```
<html>    
<head>
    <title>My Videos</title>
    <script type="text/javascript" src="http://swfobject.googlecode.com/svn/trunk/swfobject/swfobject.js"></script>
    <script type="text/javascript">
        function showData(data) {
            var feed = data.feed;
            var entries = feed.entry || [];
            var html = ['<ul class="videos">'];
            for (var i = 0; i < entries.length; i++) {
                var entry = entries[i];
                var title = entry.title.$t.substr(0, 20);
        html.push('<li class="titlec"><a href="javascript:void(0);" onClick="loadVideo('+"'"+ entry.media$group.media$content[0].url +"'"+');">' + title + '</a></li>');
            }

            document.getElementById('videos2').innerHTML = html.join('') + '</ul>';
            if (entries.length > 0) {
                loadVideo(entries[0].media$group.media$content[0].url);
            }
        }

        function loadVideo(e) {
            var container = document.getElementById('playerContainer');
            var player = document.getElementById('player');
            container.removeChild(player);//remove object child
            player.setAttribute('data',e);//change link
            container.appendChild(player);//add object back
        }
    </script>
</head>

<body>
    <div id="playerContainer" style="width: 20em; height: 180px; float: left;">
        <object id="player"></object>
    </div>
    <div id="videos2"></div>
    <script type="text/javascript" src="http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?time=this_week&alt=json-in-script&callback=showData&max-results=10&format=5">

    </script>
</body> 
```

# iphone - Iphone Phonegap 应用内购买不起作用

> ID：14658789
> 
> 赞同：0
> 
> 时间：2013-02-02T05:00:21.280
> 
> 标签：iphone, cordova, in-app-purchase

我有一个 phonegap 项目，我使用它在 iPhone 应用商店提交了我的应用程序。

我正在使用cordova-2.2.0.js。现在我想实现应用内购买插件以在我的应用程序中提供应用内购买。

我正在尝试通过从以下链接添加应用内插件来做到这一点：

```
https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager 
```

然后我将 InAppPurchase 插件添加到 cordova.plist 文件中。

当我写下面提到的代码时

(a) 在我的 javascript 中，控件转到 InAppPurchaseManager.js 插件和代码

(b) 被执行。

（一个）

```
 window.plugins.inAppPurchaseManager.requestProductData(
         "org.xxx.abcd.pqr", 
         function(productId, title, description, price) {
             alert("data retrieved");
             //window.plugins.inAppPurchaseManager.makePurchase(productId, 1);
         },
         function(id) {
             alert("Invalid product id: " + id);
         }
     ); 
```

(二)

```
 InAppPurchaseManager.prototype.requestProductData = function(productId, successCallback, failCallback) {

    var key = 'f' + this.callbackIdx++;
    window.plugins.inAppPurchaseManager.callbackMap[key] = {
        success: function(productId, title, description, price ) {
        if (productId == '__DONE') {
            delete window.plugins.inAppPurchaseManager.callbackMap[key]
            return;
        }
        successCallback(productId, title, description, price);
     },
         fail: failCallback
    }
        alert("product id: " + productId + "key: " + key);
        var callback = 'window.plugins.inAppPurchaseManager.callbackMap.' + key;
        cordova.exec('InAppPurchaseManager.requestProductData', productId, callback + '  .success', callback + '.fail');    

  } 
```

在代码 (b) 中，一切正常，直到以下行：

```
cordova.exec('InAppPurchaseManager.requestProductData', productId, callback + '.success', callback + '.fail'); 
```

问题是：为什么应用程序会停在上述行。警报框也显示在属于 的代码 (b) 中`InAppPurchaseManager.js`。

我在 itunesconnect 上添加了一个应用内项目，它处于“准备提交”模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:31:24.390

问题解决了。

在 phonegap 1.8.1 中，我们必须从 cdvjk_JSONRepresentation 中删除前缀 cdvjk_ 以及从 InAppPurchaseManager.m 文件中删除所有其他变量。

我能够成功执行应用内..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:30:18.347

得到它以某种方式工作..

对应用程序进行沙盒处理时出现了一些问题。我也从 4.2 移到了 Xcode 4.3。

现在我可以获取产品详细信息并获取如下日志： - 获取产品数据.. - 获得 iap 产品响应.. - 为“abc.pqr.xyz.productid”（产品 ID）发送 js

其次是例外：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayI cdvjk_JSONRepresentation]：无法识别的选择器已发送到实例 0x9156f40”

谷歌搜索但没有找到太多..我使用的是cordova-1.8.1。

有什么解决办法？？

# mongodb - mongodb可视化工具用流星，不能让它工作

> ID：14658790
> 
> 赞同：0
> 
> 时间：2013-02-02T05:00:22.360
> 
> 标签：mongodb, meteor, database

我正在本地运行一个项目（localhost:3000），并想使用一个工具来浏览我的 mongodb 数据库。我尝试了其中的许多（mongoview、razorsql、database master、mongoexplorer），它们似乎都无法连接到我本地由流星创建的 mongodb 数据库。

我尝试使用 localhost 、 127.0.0.1 、我的 IP 地址以及端口 27017 和 3000 （没有用户名、数据库名称或密码），但它们都无法连接。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:39:18.060

运行流星时，mongodb 使用 3002 端口：

```
syban@unau:~$ ps -ef | grep mongo
mongodb   1163     1  0 févr.03 ?     00:03:01 /usr/bin/mongod --config /etc/mongodb.conf
syban     7701  7683  1 08:33 pts/0    00:00:00 /usr/lib/meteor/mongodb/bin/mongod --bind_ip 127.0.0.1 --smallfiles --port 3002 --dbpath /home/syban/some_path/.meteor/local/db 
```

# xaml - ListBox 仅在放入 ExpanderView 时才会向上滚动

> ID：14658796
> 
> 赞同：1
> 
> 时间：2013-02-02T05:01:20.710
> 
> 标签：xaml, windows-phone-8

我对 XAML 和 Windows Phone 开发比较陌生。

我有一个显示文本块的 ListBox。当我将 ListBox 放在网格内时，一切正常，包括滚动。如果用户想在页面上获得更多空间来查看其他元素，我希望用户能够折叠 ListBox，因此我用 ExpanderView 包围了 ListBox。一旦我这样做了，ListBox 将不再向下滚动。如果我尝试向下滚动，就好像我在尝试向上滚动并垂直“挤压”文本。如果我尝试向上滚动，它也会垂直“挤压”文本，但这是向上滚动的预期行为。

这是我的 XAML 代码的相关部分：

```
<toolkit:ExpanderView Header="Chatlog" x:Name="chatlogExpander" FontSize="24" VerticalAlignment="Top" Grid.Row="2">
    <toolkit:ExpanderView.Items>
        <ListBox ItemsSource="{Binding chatlog}" ScrollViewer.VerticalScrollBarVisibility="Auto" Grid.Row="2">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical"/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock x:Name="ChatBlock" TextWrapping="Wrap">
                        <Run Text="{Binding player}" Foreground="{Binding color}" FontSize="24" FontWeight="Bold"/><Run Text="{Binding text}" Foreground="{Binding color}" FontSize="24"/>
                    </TextBlock>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </toolkit:ExpanderView.Items>
</toolkit:ExpanderView> 
```

我很感激你们能给我的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:12:08.443

我用您的代码尝试了一个示例，在为 ListBox 指定高度后，它开始滚动正常。

# iphone - 如何从 Nike+ 记录加速度计数据？

> ID：14658798
> 
> 赞同：0
> 
> 时间：2013-02-02T05:01:59.583
> 
> 标签：iphone, nike

我不确定这是否可能。
我想从 Nike+ 接收加速度计数据。

实际上，一些与运行历史相关的数据是在 iPhone 上以 XML 格式记录的。但 XML 文件不包含加速度计数据。

iPhone 是否可以从 Nike+ 接收加速度计数据，然后将 xyz 信号写入某个文件，例如 iPhone 上的 XML 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:50:51.943

Nike+ 可能使用 iPhone，但它不使用加速度计记录数据，它要么使用计步器传输的数据，要么使用内置 GPS。

从 Nike+ 网站检索数据后，他们最近才开始收集/公开更多数据，而加速度计信息不是其中之一。

第 7 代 Nano（也可能是以前的）可能会返回某种加速度计数据，因为它们不依赖任何传感器来收集运行数据，而是本身充当计步器。我对此表示怀疑，但可能性很小。

# wpf - 使用 Blend 制作的 WPF 与 winforms(vb,net) 互操作？

> ID：14658799
> 
> 赞同：1
> 
> 时间：2013-02-02T05:02:06.833
> 
> 标签：wpf, vb.net, winforms

我在 Blend 4 中创建了一个带有徽标的动画，我希望它像用户控件一样在我的 WinfForms 中我如何将 WPF 与 WinForms(vb.net) 合并，这样它就像一个用户控件，当我曾经想要它吗？

* * *

**到目前为止，我尝试将其添加为新项目，但它不起作用！**

非常感谢链接

这是 wpf 的 xaml

```
 <Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
x:Class="MainWindow"
x:Name="Window"
Title="MainWindow"
Width="300" Height="150">
<Window.Resources>
    <Storyboard x:Key="OnLoaded1"/>
    <Storyboard x:Key="OnLoaded2">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse">
            <EasingDoubleKeyFrame KeyTime="0" Value="-42"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="38"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="118"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="198"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy">
            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-42"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="38"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="118"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="198"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy">
            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy1">
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="-42"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="38"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="118"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="198"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy1">
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="Mouse.MouseEnter" SourceName="Window">
        <BeginStoryboard x:Name="OnLoaded2_BeginStoryboard1" Storyboard="{StaticResource OnLoaded2}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard x:Name="OnLoaded2_BeginStoryboard" Storyboard="{StaticResource OnLoaded2}"/>
    </EventTrigger>
</Window.Triggers>

<Grid x:Name="LayoutRoot" Background="#FF00A7FF">
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="VisualStateGroup">
            <VisualStateGroup.Transitions>
                <VisualTransition GeneratedDuration="0">
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse">
                            <EasingDoubleKeyFrame KeyTime="0" Value="-42"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="38"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="118"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="198"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse">
                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="0"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-42"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="38"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="118"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="198"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="0"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy1">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="-42"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="38"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="118"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="198"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy1">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="0"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualTransition>
            </VisualStateGroup.Transitions>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
    <Grid.ColumnDefinitions>
        </Grid.ColumnDefinitions>
    <Grid x:Name="grid" Margin="10.333,32.333,-4.333,-26.333">
        <Ellipse x:Name="ellipse" HorizontalAlignment="Left" Margin="-7.337,32.805,0,0" StrokeThickness="0" Width="15" RenderTransformOrigin="0.5,0.5" Height="15" VerticalAlignment="Top">
            <Ellipse.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleX="0.5" ScaleY="0.5"/>
                    <SkewTransform/>
                    <RotateTransform Angle="79"/>
                    <TranslateTransform X="-42"/>
                </TransformGroup>
            </Ellipse.RenderTransform>
            <Ellipse.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="Black" Offset="0"/>
                    <GradientStop Color="White"/>
                </RadialGradientBrush>
            </Ellipse.Fill>
        </Ellipse>
        <Ellipse x:Name="ellipse_Copy" HorizontalAlignment="Left" Margin="-7.337,32.805,0,0" StrokeThickness="0" Width="15" RenderTransformOrigin="0.5,0.5" Height="15" VerticalAlignment="Top">
            <Ellipse.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleX="0.5" ScaleY="0.5"/>
                    <SkewTransform/>
                    <RotateTransform Angle="79"/>
                    <TranslateTransform X="-42"/>
                </TransformGroup>
            </Ellipse.RenderTransform>
            <Ellipse.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="Black" Offset="0"/>
                    <GradientStop Color="White"/>
                </RadialGradientBrush>
            </Ellipse.Fill>
        </Ellipse>
        <Ellipse x:Name="ellipse_Copy1" HorizontalAlignment="Left" Margin="-7.337,32.805,0,0" StrokeThickness="0" Width="15" RenderTransformOrigin="0.5,0.5" Height="15" VerticalAlignment="Top">
            <Ellipse.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleX="0.5" ScaleY="0.5"/>
                    <SkewTransform/>
                    <RotateTransform Angle="79"/>
                    <TranslateTransform X="-42"/>
                </TransformGroup>
            </Ellipse.RenderTransform>
            <Ellipse.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="Black" Offset="0"/>
                    <GradientStop Color="White"/>
                </RadialGradientBrush>
            </Ellipse.Fill>
        </Ellipse>
        <TextBlock Margin="7.833,0,0,0" TextWrapping="Wrap" FontSize="26.667" Foreground="White" FontWeight="Bold"><Run FontFamily="Segoe UI Semibold" Text="Kirusoft"/><Run Text=" "/><Run FontFamily="Segoe UI Light" Text="Dev."/></TextBlock>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:35:10.523

您无法将另一个 Wpf 窗口嵌入到 Wpf 窗口中，您需要创建一个`UserControl`. 过去，当我`Window`想要将 a 转换为 a时，我所做的是将 Xaml 中对的`UserControl`所有引用更改为. 在你的情况下，它看起来像这样。`Window``UserControl`

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="WpfApplication2.UserControl1"
    x:Name="Logo"
    Width="300" Height="150">
    <UserControl.Resources>
        <Storyboard x:Key="OnLoaded1"/>
        <Storyboard x:Key="OnLoaded2">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse">
                <EasingDoubleKeyFrame KeyTime="0" Value="-42"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="38"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1" Value="118"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="198"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-42"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="38"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="118"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="198"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy1">
                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="-42"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="38"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="118"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="198"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy1">
                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>
        <UserControl.Triggers>
            <EventTrigger RoutedEvent="Mouse.MouseEnter" >
                <BeginStoryboard x:Name="OnLoaded2_BeginStoryboard1" Storyboard="{StaticResource OnLoaded2}"/>
            </EventTrigger>
            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                <BeginStoryboard x:Name="OnLoaded2_BeginStoryboard" Storyboard="{StaticResource OnLoaded2}"/>
            </EventTrigger>
        </UserControl.Triggers>

        <Grid x:Name="LayoutRoot" Background="#FF00A7FF">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="VisualStateGroup">
                    <VisualStateGroup.Transitions>
                        <VisualTransition GeneratedDuration="0">
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="-42"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="38"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1" Value="118"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="198"/>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="0"/>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy">
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-42"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="38"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="118"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="198"/>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy">
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="0"/>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="ellipse_Copy1">
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="-42"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="38"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="118"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="198"/>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy1">
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="0"/>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualTransition>
                    </VisualStateGroup.Transitions>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Grid.ColumnDefinitions>
            </Grid.ColumnDefinitions>
            <Grid x:Name="grid" Margin="10.333,32.333,-4.333,-26.333">
                <Ellipse x:Name="ellipse" HorizontalAlignment="Left" Margin="-7.337,32.805,0,0" StrokeThickness="0" Width="15" RenderTransformOrigin="0.5,0.5" Height="15" VerticalAlignment="Top">
                    <Ellipse.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="0.5" ScaleY="0.5"/>
                            <SkewTransform/>
                            <RotateTransform Angle="79"/>
                            <TranslateTransform X="-42"/>
                        </TransformGroup>
                    </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="Black" Offset="0"/>
                        <GradientStop Color="White"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <Ellipse x:Name="ellipse_Copy" HorizontalAlignment="Left" Margin="-7.337,32.805,0,0" StrokeThickness="0" Width="15" RenderTransformOrigin="0.5,0.5" Height="15" VerticalAlignment="Top">
                <Ellipse.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="0.5" ScaleY="0.5"/>
                        <SkewTransform/>
                        <RotateTransform Angle="79"/>
                        <TranslateTransform X="-42"/>
                    </TransformGroup>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="Black" Offset="0"/>
                        <GradientStop Color="White"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <Ellipse x:Name="ellipse_Copy1" HorizontalAlignment="Left" Margin="-7.337,32.805,0,0" StrokeThickness="0" Width="15" RenderTransformOrigin="0.5,0.5" Height="15" VerticalAlignment="Top">
                <Ellipse.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="0.5" ScaleY="0.5"/>
                        <SkewTransform/>
                        <RotateTransform Angle="79"/>
                        <TranslateTransform X="-42"/>
                    </TransformGroup>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="Black" Offset="0"/>
                        <GradientStop Color="White"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <TextBlock Margin="7.833,0,0,0" TextWrapping="Wrap" FontSize="26.667" Foreground="White" FontWeight="Bold"><Run FontFamily="Segoe UI Semibold" Text="Kirusoft"/><Run Text=" "/><Run FontFamily="Segoe UI Light" Text="Dev."/></TextBlock>
        </Grid>
    </Grid>
</UserControl> 
```

# jquery - 样式 Jquery 嵌套手风琴与父级不同

> ID：14658805
> 
> 赞同：0
> 
> 时间：2013-02-02T05:03:12.383
> 
> 标签：jquery, css, accordion

我有一个标准的嵌套 JQuery UI Accordion。我的问题是我想对内部手风琴进行与父手风琴不同的风格。我知道哪些 CSS 规则将样式应用于手风琴，但我找不到针对内部手风琴的选择器。

唯一接近的选择器是 :nth-child() 伪选择器。问题是我不知道内部手风琴有多少元素，也不知道顶部手风琴有多少元素。

一条规则是我知道永远不会有第三层嵌套。

此 CSS 规则设置所有手风琴标题的样式

```
.ui-accordion-header.ui-state-default {
    background: none repeat scroll 0 0 #19A053;
    border-color: #19A053;
} 
```

我现在需要一种方法来做这样的事情

```
.ui-accordion-header.ui-state-default if-inside-another-accordion{
    background: none repeat scroll 0 0 #dddddd;
    border-color: #dddddd;
} 
```

如果您是 CSS 选择器方面的专家，但从未见过 JQuery 生成的 HTML，这里是一个嵌套手风琴生成代码的示例。

```
<div id="content">
  <div role="tablist" style="display: block;" class="gw_accordion ui-accordion ui-widget ui-helper-reset">
    <div tabindex="0" aria-selected="true" aria-controls="ui-accordion-1-panel-0" id="ui-accordion-1-header-0" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-accordion-icons ui-accordion-header-active ui-state-active ui-corner-top"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-s"></span><a class="gw_chapter_menu_link" href="#24" alt="">Top Level Header 1</a></div>
    <div aria-hidden="false" aria-expanded="true" role="tabpanel" aria-labelledby="ui-accordion-1-header-0" id="ui-accordion-1-panel-0" style="display: block;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
      <p>some text here</p>
      <div role="tablist" style="display: block;" class="gw_accordion ui-accordion ui-widget ui-helper-reset">
        <div tabindex="0" aria-selected="false" aria-controls="ui-accordion-2-panel-0" id="ui-accordion-2-header-0" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-accordion-icons ui-corner-all"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span><a class="gw_chapter_menu_link" href="#27" alt="Maybe Now???">Nested Header 1</a></div>
        <div aria-hidden="true" aria-expanded="false" role="tabpanel" aria-labelledby="ui-accordion-2-header-0" id="ui-accordion-2-panel-0" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
          <p>some text here</p>
        </div>
        <div tabindex="-1" aria-selected="false" aria-controls="ui-accordion-2-panel-1" id="ui-accordion-2-header-1" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span><a class="gw_chapter_menu_link" href="#25" alt="">Nested Header 2</a></div>
        <div aria-hidden="true" aria-expanded="false" role="tabpanel" aria-labelledby="ui-accordion-2-header-1" id="ui-accordion-2-panel-1" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
         <p>some text here</p>
        </div>
      </div>
    </div>
    <div tabindex="-1" aria-selected="false" aria-controls="ui-accordion-1-panel-1" id="ui-accordion-1-header-1" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-accordion-icons ui-corner-all"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span><a class="gw_chapter_menu_link" href="#26" alt="I hope this works">Top Level Header 2</a></div>
    <div aria-hidden="true" aria-expanded="false" role="tabpanel" aria-labelledby="ui-accordion-1-header-1" id="ui-accordion-1-panel-1" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
      <p>some text here</p>
      <div role="tablist" style="display: block;" class="gw_accordion ui-accordion ui-widget ui-helper-reset">
        <div tabindex="0" aria-selected="false" aria-controls="ui-accordion-3-panel-0" id="ui-accordion-3-header-0" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span><a class="gw_chapter_menu_link" href="#28" alt="Really">Nested Header 1(for second top header)</a></div>
        <div aria-hidden="true" aria-expanded="false" role="tabpanel" aria-labelledby="ui-accordion-3-header-0" id="ui-accordion-3-panel-0" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
          <p>some text here</p>
        </div>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:57:37.853

对我来说，看起来你需要这样做：

```
.ui-accordion.ui-state-default .ui-accordion .ui-accordion-header.ui-state-default {
    background: none repeat scroll 0 0 #dddddd;
    border-color: #dddddd;
} 
```

或者，根据您对它是否处于 .ui-state-default 状态的依赖，您还可以将其简化为：

```
.ui-accordion .ui-accordion .ui-accordion-header {
    background: none repeat scroll 0 0 #dddddd;
    border-color: #dddddd;
} 
```

这基本上是在说“仅当 .ui-accordion 的后代同时也是 .ui-accordion 元素的后代时，才将这些样式应用于 .ui-accordian-header。”

另一种可视化的简单方法可能是这样的：

这是一个带有标题的容器，在另一个带有标题的容器中：

```
<div class="container">
    <h1 class="header">Header 1</h1>
    <div class="container">
        <h1 class="header">Header 2</h1>
    </div>
</div> 
```

**要设置Header 2**的样式，我会这样做：

```
.container .container .header {
    styles here will only apply to header 2, not header 1
} 
```

# sql - 需要查询以查找尚未支付退休金的员工

> ID：14658812
> 
> 赞同：0
> 
> 时间：2013-02-02T05:04:06.447
> 
> 标签：sql

我在这里的第一篇文章，希望能有所帮助。我需要创建一份报告，显示从未支付退休金的员工。我需要从 3 个表中提取信息。如果员工有特定的扣除代码（7001 到 7006），则他们已支付退休金。我有以下表格和列。

```
Employee
Employee.empid
Employee.fname
Employee.lname
Employee.jobclass

EarnHistory
EarnHistory.empid
EarnHistory.hoursworked
EarnHistory.checknumber
EarnHistory.checkdate

DeductionHistory
DeductionHistory.empid
DeductionHistory.deductioncode
DeductionHistory.checknumber
DeductionHistory.checkdate 
```

查询需要拉入empid, fname, lname, hoursworked, deductioncode where 员工从未支付到deduction code 7001到7006。

我尝试使用 NOT EXISTS 失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:15:56.837

```
select Employee.empid, Employee.fname , Employee.lname,EarnHistory.hoursworked,           DeductionHistory.deductioncode from Employee 
    join EarnHistory using('empid')  
    join DeductionHistory using('empid')  
    LEFT JOIN DeductionHistory dh ON Empployee.empid = dh.empid 
    AND DH.deductioncode IN (7001,.......,7006)
    WHERE DHD.empid IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:08:43.683

像这样的东西应该工作：

```
SELECT E.empid, E.fname, E.lname, EH.hoursworked, DH.deductioncode
FROM Employee E
   INNER JOIN EarnHistory EH ON E.empid = EH.empid
   INNER JOIN DeductionHistory DH ON E.empid = DH.empid
   LEFT JOIN DeductionHistory DH2 ON E.empid = DH2.empid 
       AND DH2.deductioncode IN (7001,7002,7003,7004,7005,7006)
WHERE DHD2.empid IS NULL 
```

这取决于您的 deductioncode 数据类型。您可以使用 BETWEEN、<> 或在 varchar 时添加撇号。

你也可以使用`NOT EXISTS`：

```
SELECT E.empid, E.fname, E.lname, EH.hoursworked, DH.deductioncode
FROM Employee E
   INNER JOIN EarnHistory EH ON E.empid = EH.empid
   INNER JOIN DeductionHistory DH ON E.empid = DH.empid
WHERE NOT EXISTS (SELECT * 
                  FROM DeductionHistory 
                  WHERE deductioncode IN (7001,7002,7003,7004,7005,7006)
                     AND E.empid = DeductionHistory.empid) 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:12:22.650

```
SELECT E.empid, E.fname, E.lname, EH.hoursworked, DH.deductioncode
  FROM Employee E, EarnHistory EN, DeductionHistory DH
 WHERE E.empid = EH.empid
   AND E.empid = DH.empid
   AND E.empid <> (SELECT empid
                     FROM DedutionHistory
                    GROUP BY empid 
                   HAVING deductioncode >= 7001
                      AND deductioncode <= 7006) 
```

# jquery - 如果父级没有元素，则取消绑定单击事件

> ID：14658815
> 
> 赞同：3
> 
> 时间：2013-02-02T05:04:40.477
> 
> 标签：jquery

这是我的 xml 文件：-

```
<root>
<child1 entity_id = "1" value= "Asia">
    <child2 entity_id = "2" value = "india">
        <child3 entity_id = "3" value = "Gujarat">
            <child5 entity_id = "5" value ="Rajkot"></child5>
        </child3>
        <child4 entity_id = "4" value = "Rajshthan">
            <child6 entity_id = "6" value = "Ajmer"></child6>
        </child4>
    </child2>
</child1>
</root> 
```

这是我的代码：-

```
<script>
data = false;

$(document).ready(function() {
    $("li").live("click", function(event) {
    /*if (event.target.id === '9426') {
        //$(this).unbind('click');
        alert('this is last !!')
        */
    $("li").hide();
        event.cancelBubble = true;
        loadChild($(this).attr("id"), event);
        return false;
    })
});

function loadChild(id) {
    var obj = $("#" + id);

    if(obj.data("loaded") == null) {
        ul = "<d>";
        var path = (id == 0) ? "root" : "[entity_id='" + id + "']";
        $(data).find(path).children().each(function(){
             var value_text = $(this).attr('value');
             var id = $(this).attr('entity_id');
             ul += "<li id='" + id + "'>" + value_text + "</li>";
         });
         ul += "</d>";

         $("#" + id).before(ul);
         obj.data("loaded", true);
    } else {
        $("#" + id + " ul").remove();
        obj.data("loaded", null);
    }
}

 $(function() {
     $('#1').click(function() {
     $(this).hide();
      $.ajax({
             type: "GET",
             url: "final.xml",
             dataType: "xml",
             success: function(xml) {
                data = xml;
                loadChild("0");
                $(xml).find('child1').each(function(){
                var value_text = $(this).attr('value');
                var id = $(this).attr('entity_id');
                $("<li id='" + id + "'></li>")
                             .html(value_text)
                             .appendTo('#firstLevelChild');
                             $(this).unbind('click');

        });       //close each(      
    }
         }); //close $.ajax(
     }); //close click(
 }); //close $(
</script>
   </head>
   <body>
     <p>
       <div id="1">
         <span  id='update-target'>Click here to load value</span>
         <ol id="0"></ol>
       </div>
    <div id="firstLevelChild">
        <ol id="0"></ol>
        </div>
        </p>
</body>
</html> 
```

使用此代码，我单击任何值，它的声音将被隐藏..
但如果最后一个孩子没有子孩子，那么它不隐藏
意味着最后一个孩子没有点击事件工作......谢谢大家帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:33:38.847

试试这个

**[演示](http://jsbin.com/ohihef/2)**

```
$(document).ready(function() {
  $("ul").live("click", function(event) {
    if($(this).children().size() > 1){
      $(this).find('li').first().hide();
      event.cancelBubble = true;
      loadChild($(this).attr("id"), event);
      return false;
    }    
 });
});

<ul>
   <li>Asia</li>
   <ul>
       <li>India</li>
       <ul>
          <li>Gujarat</li>
            <ul><li>Ahmedabad</li></ul>
       </ul>
  </ul>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:50:05.080

现在看到你的代码...

首先是一些提示，在当前状态下，阅读代码有点困难。

也许你可以考虑**重写**它？记住少写，多做。

重写并回答问题：

```
What should your code be doing? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:04:11.013

您可以使用`length`来获取节点的子节点数。

我已经清理了你的代码：

**HTML**

```
<body>
    <div id="loader">
        <span id='update-target'>Click here to load value</span>
    </div>

    <div id="firstLevelChild"></div>

    <div id="path"></div>
</body> 
```

**jQuery**

```
data = false;

$(document).ready(function() {
    $('#loader').click(function() {
        $(this).hide();
        $.ajax({
            type: "GET",
            url: "./final.xml",
            dataType: "xml",
            success: function(xml) {
                data = xml;
                ul = $("<ul></ul>");
                $(xml).find('child1').each(function(){
                    var value_text = $(this).attr('value');
                    var id = $(this).attr('entity_id');
                    li = $("<li id='" + id + "'></li>");
                    li.html(value_text);

                    ul.append(li);
                    $(this).unbind('click');

                });       //close each(      
                ul.appendTo('#firstLevelChild');
            }
        }); //close $.ajax(
    }); //close click(

    $(document).on("click", "li", function(event) {
        event.stopPropagation();
        loadChild($(this).attr("id"), event);
        return false;
    });
});

function loadChild(id) {
    var obj = $("#firstLevelChild #" + id);

    if(obj.data("loaded") == null) {
        ul = "<ul>";
        var path = (id == 0) ? "root" : "[entity_id='" + id + "']";

        // Only if it contains children
        if( $(data).find(path).children().length > 0) {
            $("li").hide();
            $("#path").text($("#path").text() + " - " + obj.text());
        }

        $(data).find(path).children().each(function(){
            var value_text = $(this).attr('value');
            var id = $(this).attr('entity_id');
            ul += "<li id='" + id + "'>" + value_text + "</li>";
        });

        ul += "</ul>";

        obj.after(ul);
        obj.data("loaded", true);
    } else {
        $("#" + id + " ul").remove();
        obj.data("loaded", null);
    }
} 
```

**输出**（点击两次后）

```
<div id="firstLevelChild">
    <ul>
        <li id="1" style="display: none;">Asia</li>
        <ul>
            <li id="2" style="display: none;">india</li>
            <ul>
                <li id="3">Gujarat</li>
                <li id="4">Rajshthan</li>
            </ul>
        </ul>
    </ul>
</div>
<div id="path"> - Asia - india</div> 
```

# android - 在 ItemizedOverlay 中如何处理 onTouchEvent 和 onTap 重叠？

> ID：14658818
> 
> 赞同：1
> 
> 时间：2013-02-02T05:05:56.080
> 
> 标签：android, google-maps, touch-event, itemizedoverlay

我试图在地图叠加层上放置一个标记，然后在用户选择可绘制对象时显示一个弹出窗口。问题是事件似乎重叠。当我在标记上点击（ontouch MotionEvent.ACTION_UP 调用）然后一段时间其他标记消失并且我也想在弹出窗口可见时这样做，然后没有一个标记可以被用户拖动。有没有人对如何使这些事件相互排斥有任何建议？

这是地图活动的代码：

```
 @Override
        public boolean onTouchEvent(MotionEvent event, MapView mapView) {
            final int action = event.getAction();
            final int x = (int) event.getX();
            final int y = (int) event.getY();
            boolean result = false;

            if (action == MotionEvent.ACTION_DOWN) {
                for (OverlayItem item : items) {
                    Point p = new Point(0, 0);

                    map.getProjection().toPixels(item.getPoint(), p);

                    if (hitTest(item, marker, x - p.x, y - p.y)) {
                        result = true;
                        inDrag = item;
                        items.remove(inDrag);
                        populate();

                        xDragTouchOffset = 0;
                        yDragTouchOffset = 0;

                        setDragImagePosition(p.x, p.y);
                        dragImage.setVisibility(View.VISIBLE);

                        xDragTouchOffset = x - p.x;
                        yDragTouchOffset = y - p.y;
                        Log.e("touch"," out ACTION_DOWN");
//                      onTap(index);
                        break;
                    }
                }
            } else if (action == MotionEvent.ACTION_MOVE && inDrag != null) {
//                      
                setDragImagePosition(x, y);      
                Log.e("touch"," out btn");
                result = true;
                flag = false;
            } else if (action == MotionEvent.ACTION_UP && inDrag != null) {
                 if (mLastMotionEventAction == MotionEvent.ACTION_DOWN){

                     // SOME TAP ACTIONS ...
                     dragImage.setVisibility(View.GONE);

                        GeoPoint pt = map.getProjection().fromPixels(
                                x - xDragTouchOffset, y - yDragTouchOffset);
                        OverlayItem toDrop = new OverlayItem(pt, inDrag.getTitle(),
                                inDrag.getSnippet());

                        Log.e("touch"," out last" + pt.getLatitudeE6());
                        items.add(toDrop);
//                      onTap(pt, map);
//                      onTap();
                        populate();
                        inDrag = null;
                        result = true;
                        flag = false;
//                      if (result) {
//                          
//                      }
                    Log.e("pop up", "pop up");  
                    return false;
                } else {
                    return true;
                }

//              onTap(index);
            }
             mLastMotionEventAction = event.getAction();
            return (result || super.onTouchEvent(event, mapView));
        }

        private void setDragImagePosition(int x, int y) {
            RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) dragImage
                    .getLayoutParams();

            lp.setMargins(x - xDragImageOffset - xDragTouchOffset, y
                    - yDragImageOffset - yDragTouchOffset, 0, 0);
            dragImage.setLayoutParams(lp);
        }
    } 
```

我写 onTap 但这个方法不起作用。没有错误。我想处理这两种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:51:15.577

最后我处理了 onTouchEvent 和 onTap 与拖动重叠和带有标记的弹出窗口。

```
@Override
            protected boolean onTap(final int index) {
                  if ( isPinch ){
                        return false;
                  }else{
    //          getMapView().setOnTouchListener(new OnTouchListener() {
    //              @Override
    //              public boolean onTouch(View arg0, MotionEvent arg1) {
    //                  if (!items.isEmpty()) {
    //                      if (view != null) {
    //                          view.setVisibility(View.GONE);
    //                          getMapView().invalidate();
    //                      }
    //                  }
    //                  getMapView().invalidate();
    //                  return true;
    //              }
    //          });
                if (view != null) {
                    view.setVisibility(View.GONE);
                    getMapView().removeView(view);
                    getMapView().invalidate();
                    flag = false;
                    view = null;
                }
                view = getLayoutInflater().inflate(R.layout.balloon_overlay, null);
                LinearLayout layout = (LinearLayout) view
                        .findViewById(R.id.balloon_main_layout);
                layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setBackgroundResource(R.drawable.balloon_overlay_bg_selector);
                ImageView image = (ImageView) view
                        .findViewById(R.id.balloon_disclosure);
                TextView text = (TextView) view
                        .findViewById(R.id.balloon_item_title);
                text.setText(items.get(index).getTitle());

                if (items.get(index).getTitle() != null
                        && items.get(index).getTitle().equals("Me") == false) {
                    image.setImageResource(R.drawable.mekr);
                }

                Projection projection = getMapView().getProjection();
                Point point = new Point();
                projection.toPixels(items.get(index).getPoint(), point);

                int x = (int) (view.getWidth() / 2f);
                int y = -bitMap.getHeight() - 3;

                MapView.LayoutParams lp = new MapView.LayoutParams(
                        ViewGroup.LayoutParams.WRAP_CONTENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT, items.get(index)
                                .getPoint(), x, y,
                        MapView.LayoutParams.BOTTOM_CENTER);
                        getMapView().removeView(view);
                        getMapView().invalidate();
                        getMapView().addView(view, lp);
                        getMapView().invalidate();

                    view.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View view) {
                            if (!items.isEmpty()) {
                                if (view != null) {
                                    view.setVisibility(View.GONE);
                                    getMapView().invalidate();
                                }
                            }
                            getMapView().invalidate();
                        }
                    });
                        selectedIndex = index;
                        return true;           
              }
            }

            @Override
            public boolean onTouchEvent(MotionEvent event, MapView mapView) {
                final int action = event.getAction();
                final int x = (int) event.getX();
                final int y = (int) event.getY();
                boolean result = false;

                if (action == MotionEvent.ACTION_DOWN) {
                    for (OverlayItem item : items) {
                        Point p = new Point(0, 0);

                        map.getProjection().toPixels(item.getPoint(), p);

                        if (hitTest(item, marker, x - p.x, y - p.y)) {
                            result = true;
                            inDrag = item;
                            items.remove(inDrag);
                            populate();

                            xDragTouchOffset = 0;
                            yDragTouchOffset = 0;

                            setDragImagePosition(p.x, p.y);
                            dragImage.setVisibility(View.VISIBLE);

                            xDragTouchOffset = x - p.x;
                            yDragTouchOffset = y - p.y;
                            isPinch=false;
                            break;
                        }
                    }
                } else if (action == MotionEvent.ACTION_MOVE && inDrag != null) {

                    if (view != null) {
                        if (view.getVisibility() != 0) {
                            Log.e("touch", " out move");
                            setDragImagePosition(x, y);
                            result = true;
                            isPinch=true;
                        }else{
                            setDragImagePosition(x, y);
                            isPinch=false;
                        }
                    }else{
                        setDragImagePosition(x, y);
                        result = true;
                        isPinch=true;
                    }
                } else if (action == MotionEvent.ACTION_UP && inDrag != null) {
                    dragImage.setVisibility(View.GONE);

                    GeoPoint pt = map.getProjection().fromPixels(
                            x - xDragTouchOffset, y - yDragTouchOffset);
                    OverlayItem toDrop = new OverlayItem(pt, inDrag.getTitle(),
                            inDrag.getSnippet());

                    Log.e("touch", " out last" + pt.getLatitudeE6());
                    items.add(toDrop);
                    populate();
                    inDrag = null;
                    result = true;
                    isPinch = false;
                }
                    return (isPinch || super.onTouchEvent(event,mapView));
            }

            private void setDragImagePosition(int x, int y) {
                RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) dragImage
                        .getLayoutParams();

                lp.setMargins(x - xDragImageOffset - xDragTouchOffset, y
                        - yDragImageOffset - yDragTouchOffset, 0, 0);
                dragImage.setLayoutParams(lp);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:46:51.957

试试下面的代码：

> ```
>  /**
>    * Class used to plot the start and end points on the map
>    * 
>   */
>  public class MapendPointsOverlay extends ItemizedOverlay<OverlayItem> {
>     private ArrayList<OverlayItem> m_overlays = new ArrayList<OverlayItem>();
>     private BalloonOverlayView m_balloonView;
>     private OverlayItem m_overlayitem;
>     private Context m_context;
>     private int m_viewOffset;
>     private MapController m_mapController;
>     private MapView m_mapView;
>     private int m_screenWidth;
>     private int m_screenHeight;
>     private Display m_screen;
>     private boolean m_fromroutepath = false;
> public MapendPointsOverlay(Drawable p_drawable) {
>     super(p_drawable);
> }
> public MapendPointsOverlay(Drawable p_defaultMarker, Context p_context,
>         MapView p_mapview, boolean p_fromroutepath) {
>     super(boundCenterBottom(p_defaultMarker));
>     m_context = p_context;
>     m_mapView = p_mapview;
>     m_mapController = p_mapview.getController();
>     m_viewOffset = 35;
>     m_fromroutepath = p_fromroutepath;
>     m_screen = ((WindowManager) m_context               .getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
>     m_screenWidth = m_screen.getWidth();
>     m_screenHeight = m_screen.getHeight();
> }
> /**
>  * Method that creates an OverlayItem from the list of OverlayItem at index
>  * given by <b>p_arg0</b>
>  */
> @Override
> protected OverlayItem createItem(int p_arg0) {
>     return m_overlays.get(p_arg0);
> }
> @Override
> public int size() {
>     return m_overlays.size();
> }
> @Override
> protected boolean onTap(int p_index) {
>     boolean m_isRecycled;
>     GeoPoint m_point;
>     m_point = createItem(p_index).getPoint();
>     m_overlayitem = m_overlays.get(p_index);
>     if (m_balloonView == null) {
>         m_balloonView = new BalloonOverlayView(m_context, m_viewOffset);
>         m_isRecycled = false;
>     } else {
>         m_isRecycled = true;
>     }
>     m_balloonView.setVisibility(View.GONE);
>     m_balloonView.setData(m_overlayitem);
>     m_balloonView.setVisibility(View.VISIBLE);
>     MapView.LayoutParams m_params = new MapView.LayoutParams(
>     LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, m_point,MapView.LayoutParams.BOTTOM_CENTER);
>     m_params.mode = MapView.LayoutParams.MODE_MAP;
>     List<Overlay> m_mapOverlays = m_mapView.getOverlays();
>     if (m_mapOverlays.size() > 1) {
>         hideOtherBalloons(m_mapOverlays);
>     }
>     if (m_isRecycled) {
>         m_balloonView.setLayoutParams(m_params);
>     } else {
>         m_mapView.addView(m_balloonView, m_params);
>     }
>     m_mapController.animateTo(m_point);
>     m_mapController.setCenter(m_point);
>     return true;
> }
> /**
>  * Sets the visibility of this overlay's balloon view to GONE.
>  */
> private void hideBalloon() {
>     if (m_balloonView != null) {
>         m_balloonView.setVisibility(View.GONE);
>     }
> }
> /**
>  * Hides the balloon view for any other BalloonItemizedOverlay instances
>  * that might be present on the MapView.
>  * 
>  * @param p_overlays
>  *            - list of overlays (including this) on the MapView.
>  */
> private void hideOtherBalloons(List<Overlay> p_overlays) {
>     for (Overlay m_overlay : p_overlays) {
>         if (m_overlay instanceof MapendPointsOverlay && m_overlay != this) {
>             ((MapendPointsOverlay) m_overlay).hideBalloon();
>         }
>     }
> }
> /**
>  * Override this method to handle a "tap" on a balloon. By default, does
>  * nothing and returns false.
>  * 
>  * @param p_index
>  *            - The index of the item whose balloon is tapped.
>  * @return true if you handled the tap, otherwise false.
>  */
> protected boolean onBalloonTap(int p_index) {
>     return false;
> }
>    } 
> ```

BallonOverlay 类表示打开信息窗口。

> ```
> public class BalloonOverlayView extends FrameLayout
>   { 
> private LinearLayout m_layout;
> private TextView m_title;
> private TextView m_snippet; 
> /**
>  * Create a new BalloonOverlayView.
>  * 
>  * @param p_context
>  *            - The activity context.
>  * @param p_balloonBottomOffset
>  *            - The bottom padding (in pixels) to be applied when rendering this view.
>  */
> public BalloonOverlayView(Context p_context, int p_balloonBottomOffset)
> {
>     super(p_context);
>     // m_ctx = context;     
>     setPadding(10, 0, 10, p_balloonBottomOffset);       
>     m_layout = new LinearLayout(p_context);
>     m_layout.setVisibility(VISIBLE);        
>     LayoutInflater m_inflater = (LayoutInflater) p_context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>     View m_view = m_inflater.inflate(R.layout.balloonoverlay, m_layout);        
>     m_title = (TextView) m_view.findViewById(R.id.balloon_item_title);      
>     m_snippet = (TextView) m_view.findViewById(R.id.balloon_item_snippet);
>     m_snippet.setVisibility(View.GONE);     
>     ImageView m_close = (ImageView) m_view.findViewById(R.id.close_img_button);
>     m_close.setOnClickListener(new OnClickListener(){
>         public void onClick(View v)
>         {
>             m_layout.setVisibility(GONE);
>         }
>     });     
>     FrameLayout.LayoutParams m_params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
>     m_params.gravity = Gravity.NO_GRAVITY;
>     addView(m_layout, m_params);        
> }
>  } 
> ```

# java - 如何从一个班级到另一个班级获取我的配置文件？

> ID：14658824
> 
> 赞同：0
> 
> 时间：2013-02-02T05:07:27.680
> 
> 标签：java, properties, configuration-files

只是一个快速而简单的问题。我有一个包含几个类的程序，可以从 .properties 文件中读取信息。将文件从类传递到类作为构造函数中的参数，还是直接在每个类中打开文件是更好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:14:10.343

如果您要手动执行此操作，我建议您创建一个配置类，该类通过构造函数获取文件，并将属性值读入成员变量。然后需要配置的每个其他类都通过它的构造函数获取一个配置类。但是，几乎没有人这样做，而是使用像 spring 这样的框架来为您处理属性注入。

在春天，它看起来像这样：

```
<!-- application context xml file -->
<context:property-placeholder location="file:///some/path/to/file" /> 
```

然后在你的java类中：

```
public class SomeClass {
    @Value("${some.property}")
    private String someProp;

    @Value("${some.other.prop}")
    private Integer someOtherProp;

    // ...
} 
```

在应用程序启动时，属性会被注入到您的类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:18:36.790

我的建议是有一个 Util 类来加载属性文件并从该 Util 获取值到所需的类。

注意：我认为您在加载属性文件时没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:36:01.197

我建议您创建一个不可变类，将文件作为构造函数参数并设置所有实例变量。我称之为PropertyConfiguration。然后由于类是不可变的，你不必担心将它传递给每个人。你甚至可以有一个拥有它的类。

例如，下面的代码将使您有一个很好的设置，以便在项目范围内拥有几个可用的东西。我只会确保共享的任何内容都是不可变的，以确保线程安全。

```
public class ClientUtils {

    private static ClientContext _clientContext = null;

    public static void setClientContext(ClientContext cc) {
        _clientContext = cc;
    }

    public static ClientContext getContext() {
        return _clientContext;
    }
}

public class ClientContext {

    private final Configuration _configuration;

    public ClientContext(Configuration config){
        _configuration = config;
    }

    public Configuration getClientContext() {
        return _configuration;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T05:44:23.423

如果您的程序包含不需要编译的数据并且可能因部署而异，则必须将其添加到属性文件中：（数据库连接字符串、电子邮件地址等内容）。

以防万一您需要这个，我正在添加用于访问属性文件的代码。将文件拖放到**构建**目录中。

```
Properties properties = new Properties();       
properties.load(Thread.currentThread().getContextClassLoader().getResourceAsStream("credentials.properties")); 
```

# java-ee-6 - jboss 上的 Esper 部署为 7.X，未找到事件类型或类名

> ID：14658828
> 
> 赞同：0
> 
> 时间：2013-02-02T05:07:50.200
> 
> 标签：java-ee-6, jboss7.x, esper

我开发了一个 java ee 项目，作为 7 服务器部署在 jboss 上。

情景是

```
A java ee project in which ejb module contains execution classes.
some of the pojo events are defined in another plain java project lets say p1
  and p1 is referenced in java ejb module and it appears in ./lib directory 
  of ear where other jar files exists.
auto-import tag in esper-config.xml has been added for p1 classes.

"cepConfig.cnfigure(esper-config.xml)" executes fine and 
   I can see all event types as reuired in debug mode.
"EpServiceProvider.getProvider("MyEngine",cepConfig)" results in error
   which says "could not find event type or class named p1.mypack.class1" 
```

我检查了项目的参考和部署设置。**p1.jar**存在于 ./lib 目录中。
所有课程都是公开的和可访问的。我还需要检查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:20:06.367

该类“p1.mypack.class1”需要成为类路径的一部分，无论是 Jboss 系统类路径还是模块类路径。

# android - ActiveAndroid-显式初始化时无法创建表

> ID：14658829
> 
> 赞同：0
> 
> 时间：2013-02-02T05:08:15.870
> 
> 标签：android, activeandroid

在我的应用程序中，而不是遵循 ActiveAndorid 的常规层次结构，

我`.initialize()`通过传递`getApplicationContext`.

但是，`TableInfo`返回的没有我正在创建的模型类中的任何表。

我尝试调试他们的代码，他们使用的类加载器似乎有问题。我的代码是：

```
ActiveAndroid.initialize(getApplicationContext());
TestModel model=new TestModel();
model.value="hello";
model.save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T14:36:00.333

您不应该使用 getApplicationContext。它可能不会返回您的应用程序的上下文。getApplicationContext 的命名具有误导性。

更多信息：[getApplication() 与 getApplicationContext()](https://stackoverflow.com/questions/5018545/getapplication-vs-getapplicationcontext)

# ruby-on-rails - 未定义的方法“补丁” - 路由错误

> ID：14658830
> 
> 赞同：3
> 
> 时间：2013-02-02T05:08:21.613
> 
> 标签：ruby-on-rails

我是 Rails 和 MVC 开发的初学者，需要以下帮助：

我正在做[http://edgeguides.rubyonrails.org/getting_started.html中的示例](http://edgeguides.rubyonrails.org/getting_started.html)

在“5.12 更新帖子”中，我们被要求将以下内容添加到我们的 config/routes.rb 中：

```
patch "posts/:id" => "posts#update" 
```

如果我这样做并运行`rake routes`，我会收到以下错误：

```
undefined method `patch' for #<ActionDispatch::Routing::Mapper:0x390f078> 
```

我去时遇到同样的错误 -`http://localhost:3000/posts/1`

这是 edit.html.erb 中的行：

```
<%= form_for :post, url: { action: :update, id: @post.id }, method: :patch do |f| %> 
```

我有 Rails 3.2.1。

## 环境：

我在 Windows 7 中执行此操作。我通过 railsinstaller.org 安装了 Rails。浏览器 - Chrome、Firefox

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T05:18:16.113

`patch`仅在 Rails`master`分支中可用。

*   这是相关的拉取请求：[https ://github.com/rails/rails/issues/348](https://github.com/rails/rails/issues/348)
*   这是解释推理的博客文章：[http ://weblog.rubyonrails.org/2012/2/25/edge-rails-patch-is-the-new-primary-http-method-for-updates/](http://weblog.rubyonrails.org/2012/2/25/edge-rails-patch-is-the-new-primary-http-method-for-updates/)
*   这是另一个很棒的总结：[http ://blog.remarkablelabs.com/2012/12/http-patch-verb-rails-4-countdown-to-2013](http://blog.remarkablelabs.com/2012/12/http-patch-verb-rails-4-countdown-to-2013)

除其他外，您需要指向您的 git 存储库，`Gemfile`以便在现有项目上使用边缘导轨。

```
gem 'rails', :git => 'git://github.com/rails/rails.git' 
```

现在你应该只使用`PUT`而不是`PATCH`. 即使 4.0 出来了，`PUT`也不会去任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T19:11:14.687

fwiw，我向后移植了 Rails 3.2 的 HTTP PATCH 动词工作[https://gist.github.com/bf4/8940203](https://gist.github.com/bf4/8940203)

# asp.net - 如何或在何处从 tableadapter 代码中删除生成的 SQL？

> ID：14658833
> 
> 赞同：0
> 
> 时间：2013-02-02T05:09:30.930
> 
> 标签：asp.net, stored-procedures, tableadapter, generated-sql

我一直在开发一个使用强类型数据集和存储过程的应用程序。我刚毕业，这是卖给我们的方法。我开始有严重的怀疑。

我的客户告诉我他可能会从 SQL Server 更改为 MySQL。从我读过的内容来看，最好不要使用存储过程，因为迁移可能会变得更加困难。所以无论如何，我刚刚使用向导实现了一个新的表适配器查询，并选择了*Use SQL Statements*而不是*Create new stored procedure*。

我对查询的调用

```
Intranet.administratorsDataTable dt = taAdministrators.GetAdministrators(); 
```

现在生成此错误：

> executereader 需要一个开放且可用的连接。连接的当前状态已关闭

我不知道为什么这个自动生成的代码没有连接，而且我很宿醉，无法处理这个问题。我决定暂时回到 SP，这样我就可以完成一些工作。仍在抛出此错误（相同的表适配器，相同的方法名称，但重新配置为使用 SP）。我所有的其他数据库调用都可以正常工作。

我假设生成的 SQL 代码仍然在某个地方浮动，即使我将适配器更改为使用 SP。有人可以告诉我它在哪里，以便我可以删除它吗？

另一方面，我真的开始认为手动使用 SqlConnection 和 SqlCommand 是一个更好的选择，因为在修改数据库表等灵活性方面，使用这些查询“工具”会带来很多麻烦。您更有经验的人告诉我这是否正确，或者您是否提倡使用表格适配器？

***编辑** 它也会抛出这些：

> 无效操作。连接已关闭。

和

> 已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:12:33.140

解决方案是转到 tableAdapter 中的查询属性并手动将“命令类型”更改为*StoredProcedure*。

> 突出显示查询>转到属性窗口>更改命令类型

当我重新配置查询时，似乎这没有（或没有）自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:49:48.793

如果您提供一些代码，那就更好了。我认为，您需要打开连接。

```
SqlCommand Cmd= new SqlCommand();
Cmd.Open();
// then u can use Cmd.ExecuteReader(); 
```

# mysql - 存储过程输出总是返回 0.0

> ID：14658834
> 
> 赞同：0
> 
> 时间：2013-02-02T05:09:48.047
> 
> 标签：mysql, stored-procedures, jdbc

我是 jdbc 的新手，我的程序总是返回 0.0...帮助

```
 CallableStatement cs= con.prepareCall("{ call  getbalance(?,?) }");
    cs.setInt(1, 1234);
    //cs.setString(2, "dfdf");
    cs.registerOutParameter(2, Types.DOUBLE,23);
    cs.execute();
    System.out.println("Balance is "+ cs.getDouble(2));

             CREATE PROCEDURE `getbalance`( acno int, out amt int)
              begin 
                       select bal * amt from bank WHERE accno=acno; 
               end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:33:37.653

设置参数时，帐号是多少？是 1 还是 1234？

```
cs.setInt(1, 1234); 
```

您输入的 acno 可能没有记录...

您已输入，

```
select bal * amt from bank WHERE accno=acno; 
```

不应该是下面，因为你有输入和输出参数

```
select bal INTO amt from bank WHERE accno=acno; 
```

编辑后的 ​​SP 将是：

```
CREATE PROCEDURE `getbalance`( IN acno int, OUT amt int)
 AS
    BEGIN 
                 SELECT bal INTO amt FROM bank WHERE accno=acno; 
    END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:47:25.897

我认为您需要这个，将值设置为 amt 变量。

```
Set amt = (select bal * amt from bank WHERE accno=acno); 
```

# html - 如何防止 ::-webkit-scrollbar 推过元素

> ID：14658835
> 
> 赞同：1
> 
> 时间：2013-02-02T05:10:47.777
> 
> 标签：html, css, webkit

我正在尝试使用 webkit 的自定义滚动条，我真的很想防止它推过它旁边的 div。我尝试使用位于右侧的图像精灵来破解它，但它位于滚动条的轨迹栏下方。我还尝试隐藏轨迹栏、设置不透明度、负边距/填充和 z-index——似乎没有任何效果。

所需的效果是让元素（下图中的灰色条）继续到容器的边缘，而不是在滚动条轨道处停止。

**如何防止 ::-webkit-scrollbar 推过元素？**

![这里](../Images/a0c63f0f8882f20c951f668414b9e120.png)

*[已提出相同](https://stackoverflow.com/questions/13054797/how-to-prevent-a-webkit-scrollbar-from-pushing-over-the-contents-of-a-div)的问题，但尚未找到正确的答案（请勿标记为重复）。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-10T11:01:13.577

可以通过`overflow: overlay`. 它是替代品`overflow: auto`

# magento - Magento：布局未出现在 CMS 页面下拉列表中

> ID：14658836
> 
> 赞同：1
> 
> 时间：2013-02-02T05:10:48.277
> 
> 标签：magento

我刚刚将 Bootstrap 模板安装到我的 Magento 安装中。我上传了文件，转到系统 > 设计并添加了设计更改。我网站的前端现在显示主题，但是当我转到 CMS > Pages 并选择一个页面时，布局下拉菜单仍然显示默认/默认布局，而不是 app/design/frontend/bootstrap/default/ 中定义的布局布局/page.xml

任何想法为什么他们没有出现？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:58:11.087

这是因为 Page.xml 没有为该下拉菜单定义 CMS 页面布局。您可以在此处找到更多信息；

[magento：删除页面布局](https://stackoverflow.com/questions/8226978/magento-remove-page-layouts)

这篇 Incho 帖子是通过一个超级简单的模块添加您自己的 CMS 页面布局类型的好方法（上面链接中的一个答案采用了类似的方法）；

[http://incho.net/ecommerce/magento/custom-cms-page-layout/](http://inchoo.net/ecommerce/magento/custom-cms-page-layout/)

# php - “ajax() 调用将地址传递到数据库”？

> ID：14658838
> 
> 赞同：0
> 
> 时间：2013-02-02T05:10:52.117
> 
> 标签：php, mysql, ajax

我正在尝试创建一个电子邮件邀请表单，用户在其中输入他们朋友的电子邮件地址，并向该朋友发送一封电子邮件，其中包含有关如何注册该网站的进一步说明。

我的问题是：如何使用 AJAX 存储用户提交给 mySQL 数据库的电子邮件地址？

这是电子邮件邀请表单演示的作者所说的使用“ajax() 调用将地址传递到您的数据库”的代码片段：

```
function completeInviteForm() {
setTimeout(function() {
    $("#completeform").fadeOut(400, function(){
        $(this).before('<span class="msg">All set! We will be in touch.</span>');
    });
}, 1100); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:15:19.300

您不能使用[AJAX](http://api.jquery.com/jQuery.ajax/)将电子邮件存储在数据库中，但您可以将电子邮件地址从客户端传递到服务器端。然后在 PHP 级别，您可以将电子邮件地址存储在数据库中。

AJAX 调用

```
var email = 'example@example.com'
$.ajax({
  url: "database.php",
  mail: email
}).done(function() {
  alert("done");
}); 
```

PHP - 数据库.php

```
$mail = $_REQUEST['mail'];
echo $mail; // "example@example.com" 
```

# triggers - 使用触发器的 UDK Kismet 事件

> ID：14658844
> 
> 赞同：0
> 
> 时间：2013-02-02T05:11:23.457
> 
> 标签：triggers, game-engine, kismet-udk

我试图使用 Unreal Kismet 在 UDK 中显示一个公告。我把事件“使用触发器”（选择我的触发器），当我按 E 时，我放了一个公告，上面有一个文本。问题是，当我靠近触发器并按 E 时（默认情况下，UDK 中的 E 用于命令“使用”）什么也没有发生！

需要考虑的事项：

互动目标已关闭。

最大触发计数为 0（无限）

公告有文字。

我一直在寻找答案，但我不明白我的触发器有什么问题。如果有人可以帮忙请。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:40:03.013

Some game types don't show announcements.

I think that for sure UTGame does. So go to View>WorldInfo and check what game mode you are in.

Usually we make our own custom game types.

# css - 像 a.first 和 .first a 这样的 css 类有什么区别？

> ID：14658848
> 
> 赞同：1
> 
> 时间：2013-02-02T05:11:57.247
> 
> 标签：css

你能解释一下css之间`a .someclass`的区别吗？`.someclass a`或者类似的东西，`img .someclass`和`.someclass img`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T05:16:13.700

```
a .someclass 
```

选择具有“someclass”类的任何（“a”标签的后代）

```
<a href="#example">
    <span class="someclass">...</span>
</a> 
```

尽管

```
.someclass a 
```

选择作为“a”标签的任何（具有“someclass”类的标签的后代）。

```
<div class="someclass">
    <a href="...">...</a>
</div> 
```

和

```
a.someclass /* Note absence of spaces */ 
```

选择任何具有“someclass”类的“a”标签。

```
<a href="..." class="someclass">...</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:16:01.207

这是一个[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)

`a .someclass``someclass`与锚元素内的类的元素匹配：

```
<a href="#example">
   <span class="someclass">...</span><!-- this one is matched -->
</a> 
```

`.someclass a`匹配位于具有以下类别的元素内的锚点`someclass`：

```
<span class="someclass">
    <a href="#example">...</a><!-- this one is matched -->
</span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:17:59.373

将其视为向下移动通过 dom 树时的操作顺序。例如，`a .someclass /* space in between */`将应用于以下内容：

```
<a href="">
   <span class="someclass"></span>
</a> 
```

而`.someclass a /* space in between */`将应用于以下内容：

```
<div class="someclass">
   <a href=""></a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T05:18:56.620

```
a .someclass 
```

将匹配这个跨度：

```
<a><span class="someclass"></span></a> 
```

--

```
.someclass a 
```

将匹配这个跨度：

```
<a class="someclass"><span></span></a> 
```

--

> 或类似的东西，img .someclass 和 .someclass img？

`a`见上文，但将标签换成`img`标签

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T05:19:38.667

a.first 将选择类为 first** 的任何标签 .first a 将选择类为“first”的元素的子元素的任何标签

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T05:21:06.137

不同之处在于应用的顺序。当有一个以空格分隔的选择器列表时，表示父子关系，前一个选择器为父，后一个选择器为子。如果有超过 2 个选择器，这将继续沿链向下。

当你使用

```
img .className { /* style rules */ } 
```

它将查找具有`class="className"`并嵌套在图像标签内的所有元素。（所有`.className`这些都是 的孩子`img`）

但是，当您使用

```
.className img { /* style rules */ } 
```

它将查找嵌套在带有`class="className"`. （所有`img`这些都是 的孩子`.className`）*

# jquery - 需要为插件的每个 .post 获取“a”名称

> ID：14658850
> 
> 赞同：1
> 
> 时间：2013-02-02T05:12:20.420
> 
> 标签：jquery, loops, plugins, each

```
(function ($) {
    'use strict';
    var url = window.location.href.split('#')[0];
    var post = $('.post').children('a[name]').attr('name');

    var helpers = {
        "defaults": {
            "post": post,
            "href": url+'#',
            "send": 'true',
            "layout": 'button_count',
            "width": '125',
            "faces": 'false',
            "font": 'verdana',
            "action": 'like',
            "scheme": 'light',
        },

        "init": function (options) {
            var settings = $.extend({}, helpers.defaults, options),

            easyface = $('<div />').addClass('easyface fb-like').attr({
                "data-href": settings.href + settings.post,
                "data-send": settings.send,
                "data-layout": settings.layout,
                "data-width": settings.width,
                "data-show-faces": settings.faces,
                "data-font": settings.font,
                "data-action": settings.action,
                "data-colorscheme": settings.scheme
            });

            return this.each(function (i, elem) {
                var self = $(elem),                 
                data = self.data('easyface');  
                if (!data) {   
                    self.data('easyface', easyface);
                    self.append(easyface);
                }
            });
        },

        "destroy": function () {
            return this.each(function (i, elem) {
                var self = $(this),                
                data = self.data('easyface');   // test to see if we've already called init on this element

                $(window).unbind('.easyface');      // unbind any namespaced events, assuming you've namespaced them like "click.easyface"
                self.removeData('easyface');        // remove the data flag
                self.find('.easyface').remove();    // remove the appended div
            });
        }

    };

    //define the method "easyface"
    $.fn.easyface = function (method) {
        if (helpers[method]) {
            // call the method and pass in the settings
            return helpers[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            // default to the init method and pass in the arg
            return helpers.init.apply(this, arguments);
        } else {
            // throw an error
            $.error('Method ' + method + ' does not exist on jQuery.tooltip');
        }
    };
}(jQuery));

$(function() {
    $('body').append('<div id="fb-root"></div>');

    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=477049588983712";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
}); 
```

我认为问题出在这里

```
var url = window.location.href.split('#')[0];
var post = $('.post').children('a[name]').attr('name');
var helpers = {` 
```

发生的事情是它提出了这样的网址 -

*http://www.easybbtutorials.com/t177-user-profile-home-page#1244#undefined*

所以我添加了`split('#')[0];`and 效果很好，但我仍然得到未定义的部分。

*http://www.easybbtutorials.com/t177-user-profile-home-page#undefined*

同样在每个`.post`地方，对于每个喜欢它的fb来说，它都是相同的url，它需要添加每个父母的`a`名字......

我可能会混淆我的说法，但我现在只是愤怒并且写得很快。

更好的解释：

1.  .post 是第一个，fb data-href 应该是`http://www.easybbtutorials.com/t177-user-profile-home-page#8870`
2.  .post 是第二个，fb data-href 应该是`http://www.easybbtutorials.com/t177-user-profile-home-page#8871`
3.  .post 是第三个，fb data-href 应该是`http://www.easybbtutorials.com/t177-user-profile-home-page#8872`
4.  .post 是第四个，fb data-href 应该是`http://www.easybbtutorials.com/t177-user-profile-home-page#8873`

等等等等，这是一个论坛，所以会有多个 .post 区域

**到目前为止，我必须像这样写电话......**

```
$('.post').each(function() {
   $(this).easyface();
  }); 
```

我希望插件能够真正自动执行任何操作。所以`$('.post').easyface()`会自动执行上面的代码。

此外，我现在还需要它来获取`('a[name]').attr('name');`每个帖子的名称，尽管我现在不得不像这样添加它，`('a[name]').attr('name').split('p')[1];`因为所有 id 都以 p ex 开头：p830 p338 p395 p 代表帖子。并且给定的链接将无法识别#p784，因此它需要成为#784。

谁能得到这个工作可以让我所有的声誉都设置为 100……现在我只有 43，但无论如何等待太久了。

更好地理解这里::

[http://jsfiddle.net/zUeFL/17/](http://jsfiddle.net/zUeFL/17/)

如您所见，我有四个喜欢并发送，就像他们都喜欢的一样。每个帖子需要不同的网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:52:31.267

**问题一：**

```
var post = $('.post').children('a[name]').attr('name'); 
```

`children()`将返回一个元素列表。

**问题 2：**

只需从块内运行插件`$(document).ready`。

**解决方案**

尝试这个...

```
$(document).ready(function() {
    //run the plugin

    pNames = []

    $('.post').children('a[name]').each(function() {
        pNames.push($(this).attr('name'));
    });

    $('.postfoot').easyface({
        "post": pNames
    });
}); 
```

**更新**

如果您只需要一个`a`元素，请执行以下操作：

```
var post = $('.post').children('a[name]')[0].attr('name'); 
```

创建时进行这些更改`href`：

```
easyface = $('<div />').addClass('easyface fb-like').attr({
    "data-href": settings.href.substring(0, settings.href.length - 1) + "#" + settings.post.split("p")[1], // concatenate with your href here. 
```

更新了 jsFiddle：http: [//jsfiddle.net/zUeFL/21/](http://jsfiddle.net/zUeFL/21/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:46:26.057

我*想*这就是你要找的：[demo](http://jsfiddle.net/jefferyto/HdLTF/)

主要变化是：

*   帖子 ID 是在`each()`循环中计算的，因为每个 ID 都不同`.postfoot`：

    ```
    post = (options && options.post) || self.closest('.post').find('a:first').attr('name'); 
    ```

    这允许帖子 ID 被`options`对象覆盖，这可能不是一个好主意。

*   `easyface`div 也是在`each()`循环中创建的，同样因为每个div都不同`.postfoot`。

# python - Perl 相当于 pyephem？

> ID：14658852
> 
> 赞同：4
> 
> 时间：2013-02-02T05:12:27.887
> 
> 标签：python, perl, pyephem

[pyephem](http://rhodesmill.org/pyephem/)的 Perl 等价物是什么？

由于 pyephem 基于 C 库（？），我猜有人也创建了 Perl 版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:58:33.317

你检查过 libnova 吗？它相当强大。有一个 Perl 包装器：[Astro::Nova](http://search.cpan.org/dist/Astro-Nova/lib/Astro/Nova.pm)。

引用下面的文档，其中之一可以完全满足您的要求。Perl 文档相对稀疏，因为我不想为包装器复制整个库文档。这些函数大多类似于 C 中的工作方式。应该记录异常。主要的[libnova 文档](http://libnova.sourceforge.net/)包含所有详细信息。

```
(int $status, Astro::Nova::RstTime $rst) =
  get_object_rst(double JD, Astro::Nova::LnLatPosn observer, Astro::Nova::EquPosn object)
(int $status, Astro::Nova::RstTime $rst) =
  get_object_rst_horizon(double JD, Astro::Nova::LnLatPosn observer,
                         Astro::Nova::EquPosn object, double horizon)
(int $status, Astro::Nova::RstTime $rst) =
  get_object_next_rst(double JD, Astro::Nova::LnLatPosn observer, Astro::Nova::EquPosn object)
(int $status, Astro::Nova::RstTime $rst) =
  get_object_next_rst_horizon(double JD, Astro::Nova::LnLatPosn observer,
                              Astro::Nova::EquPosn object, double horizon) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:19:16.230

您可能想从这里开始：

[Perl Astro 模块](http://search.cpan.org/~cphil/Astro/)

# php - PHP ucwords 适用于除第一个单词以外的所有单词

> ID：14658854
> 
> 赞同：-1
> 
> 时间：2013-02-02T05:12:42.550
> 
> 标签：php

我正在尝试将带有下划线的小写文件名转换为“正确”单词，其中空格替换每个单词的下划线和大写首字母以显示在网页上。

示例文件名：test_one_two_three_four_five.php

我所拥有的“应该”工作：（恕我直言）

```
<?php $path = $_SERVER["SCRIPT_NAME"]; 
$path = str_replace('_', ' ', ($path)); 
$path = ucwords($path);
?>

<? echo basename ($path,".php"); ?> 
```

输出是“测试一二三四五”，如您所见，它不是 100% 正确的。

请问我在哪里出错了，我怎样才能得到想要的结果？

提前感谢您的帮助，

弗洛伊德

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-02T05:55:53.900

实际上，当您打印 时`$path = $_SERVER["SCRIPT_NAME"]`，您会发现首先有“/”。首先删除它，`str_replace`然后再做进一步的代码。

```
$path = $_SERVER["SCRIPT_NAME"]; 
$path = str_replace('_', ' ', ($path));
$path = str_replace('/', '', ($path)); 
$path = ucwords($path);

echo basename ($path,".php"); 
```

# imacros - 当 imacros 中发生错误时，如何停止循环？

> ID：14658857
> 
> 赞同：0
> 
> 时间：2013-02-02T05:14:02.347
> 
> 标签：imacros

我想填充我的四次。我使用一个包含四列数据的 csv 文件。插入第一个数据后发生一个错误。但是 imacros 循环没有停止。它留下第一个错误并继续其他进程。我想停止发生错误时的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:43:51.990

`set !errorignore`从您的脚本中删除

# django - 如何使用美味的反向关系

> ID：14658859
> 
> 赞同：0
> 
> 时间：2013-02-02T05:14:09.347
> 
> 标签：django, reverse, tastypie

当我做这样的事情时[http://example.com/api/v1/nisit/?format=json](http://example.com/api/v1/nisit/?format=json)。我将收到此错误“模型''有一个空属性'页面'并且不允许空值。”

我想使用美味的反向关系。逆向“页面”模型形成“nisit”模型。我想要的结果是调用 127.0.0.1:8000/api/v1/nisit/?format=json&friend_ *followingPage* _id=1

问题的关键是“如何在Nisit模型中设置followingPage属性与Page模型中的followingNisit属性相反

这是我的模型

```
 class Nisit(models.Model):
       friends =  models.ManyToManyField('self',null=True,blank=True)

 class Page(models.Model):
       followingNisit = models.ManyToManyField(Nisit,blank=True) 
```

这是我的资源

```
class NisitResource(ModelResource):
     friend = fields.ManyToManyField('self','friend',null=True)
     followingPage = fields.ToManyField('chula.api.resourse.PageResource','followingPage')
     class Meta:
        queryset = Nisit.objects.all()
        resource_name = 'nisit'
        filtering = {
            'friend' : ALL_WITH_RELATIONS,
            'id' : ALL,
        } 
```

在上面的代码中。我尝试根据此链接[http://django-tastypie.readthedocs.org/en/latest/resources.html编写代码 >>>> page=................. #reverse-relationships](http://django-tastypie.readthedocs.org/en/latest/resources.html#reverse-relationships) 但无济于事

```
class PageResource(ModelResource):
    followingNisit = fields.ManyToManyField(NisitResource, 'followingNisit',null=True)

    class Meta:
        queryset = Page.objects.all()
        resource_name = 'page'
        authorization= Authorization()
        filtering = {
            'followingNisit': ALL_WITH_RELATIONS,
            'p_name': ALL,
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:35:08.153

尝试添加：

```
class Page(models.Model):
     followingNisit = models.ManyToManyField(Nisit,blank=True, related_name="followingPage") 
```

清除您的缓存，并可能删除所有`null=True`可能抑制该错误消息的内容。

# ruby - 解析 rb 文件的定义

> ID：14658865
> 
> 赞同：0
> 
> 时间：2013-02-02T05:15:28.197
> 
> 标签：ruby

我想用 ruby​​ 编写一个简单的文档生成器，它将采用标准的 .rb 文件并列出所有定义的类或模块，每个类或模块中定义的所有方法和变量，并指出是否有任何方法是别名或继承自超类。

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:10:24.550

逆向工程 YARD 可能是最好的主意（不知道为什么它是评论）。或者，您可以使用[ruby​​_parser](https://github.com/seattlerb/ruby_parser) gem 来执行此操作。

```
require 'ruby_parser'

class SillyRubyParserExample
  def self.example
    class_eval(RubyParser.new.parse(<<-EOS
      class ParseMe
        def a() end
        def b() end
      end
    EOS
    ).inspect)
  end

  def self.s(*args)
    if args[0] == :defn
      puts "def " + args[1].to_s
    elsif args[0] == :class
      puts "class " + args[1].to_s
    end
  end
end

SillyRubyParserExample.example 
```

产生：

```
def a
def b
class ParseMe 
```

当然，这只是一个愚蠢的例子，只是列出了方法和类。

# c# - 当我在 Dispatcher.Invoke 调用中更新 UI 时，mousedown 和 mouseup 事件停止触发

> ID：14658866
> 
> 赞同：1
> 
> 时间：2013-02-02T05:15:39.257
> 
> 标签：c#, wpf, xaml, visual-studio-2012, wpf-controls

好的，所以我的 xaml 中有一个用户控件内的图像元素

```
<Image HorizontalAlignment="Left" Margin="0,0,0,0" Name="imagePiece" Stretch="Fill" VerticalAlignment="Top" Source="{Binding Path=PieceGrid}" /> 
```

在我在构造函数后面的代码中：

```
AddHandler(FrameworkElement.MouseDownEvent, new MouseButtonEventHandler(imagePiece_MouseDown), true);
AddHandler(FrameworkElement.MouseUpEvent, new MouseButtonEventHandler(imagePiece_MouseUp), true); 
```

我动态地创建了几个这样的用户控件。mousedown 和 mouseup 工作得很好，完全按照我的意愿去做。我可以不断地单击图像，并且每次都会触发该事件。

但是，我实现了一个每隔一段时间触发一次的 Timer 对象。那个计时器改变了图像。为了做到这一点，我必须这样做：

```
private void releaseTheDaemon(object source, ElapsedEventArgs e)
{
  int numberOfPieces = 0;
  List<GridPieceView> allPlacedPieces = new List<GridPieceView>();

  foreach (List<GridPieceView> list in piece)
  {
    foreach (GridPieceView p in list)
    {
      if (p.GridOwner != View.Owner.NotSelected)
      {
        allPlacedPieces.Add(p);
        numberOfPieces = numberOfPieces + 1;
      }
    }
  }

  int randIndex = randomNumber.Next(0, numberOfPieces);
  if (allPlacedPieces.Count > 0)
  {
    Dispatcher.Invoke(DispatcherPriority.Normal, new Action<GridPieceView>(daemonActions), allPlacedPieces[randIndex]);
  }
}

private void daemonActions(GridPieceView gridPiece)
{
  gridPiece.GridOwner = View.Owner.NotSelected;
  gridPiece.setPieceWhite();
} 
```

setPieceWhite() 方法用于更新视图。在该更新发生后，mousedown 和 mouseup 将丢失。他们不会开火。

对于踢腿和咯咯笑，我尝试对方法执行此操作：

```
private void daemonActions(GridPieceView gridPiece)
{
  gridPiece.GridOwner = View.Owner.NotSelected;
  gridPiece.setPieceWhite();
  AddHandler(FrameworkElement.MouseDownEvent, new MouseButtonEventHandler(gridPiece.imagePiece_MouseDown), true);
  AddHandler(FrameworkElement.MouseUpEvent, new MouseButtonEventHandler(gridPiece.imagePiece_MouseUp), true);
} 
```

但这确实搞砸了事件，每当我点击其中一张图像时，之前通过此方法的所有其余图像也会被触发。

无论如何，有人知道我应该如何处理这个问题吗？

# android - 在 Android 中，proxy_gps_nmea_cb() 是做什么用的？

> ID：14658880
> 
> 赞同：3
> 
> 时间：2013-02-02T05:16:42.463
> 
> 标签：android

我打了电话

```
locationManager.requestSingleUpdate(locationManager.GPS_PROVIDER, locationListener, Looper.myLooper()); 
```

在一个线程中

```
scheduleTaskExecutor.scheduleAtFixedRate(); 
```

我显示 logcat 消息如下：

```
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_location_cb()
02-02 00:13:19.152: D/libgps(482): proxy_gps_sv_status_cb()
02-02 00:13:19.472: D/dalvikvm(3221): GC_CONCURRENT freed 401K, 10% free 7691K/8460K, paused 2ms+2ms, total 23ms
02-02 00:13:19.482: I/wm.cs.service(3221): count=11 location: Location[gps 37.284294,-76.723810 acc=8 et=+7m30s247ms alt=-11.550232802143439 vel=0.0 {Bundle[mParcelledData.dataSize=44]}]
02-02 00:13:20.142: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:20.142: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:20.142: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:20.142: D/libgps(482): proxy_gps_nmea_cb()
02-02 00:13:20.142: D/libgps(482): proxy_gps_nmea_cb()
... ... 
```

这是否意味着 gps 当前正在积极工作，正在消耗电池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T15:47:50.627

是的，GPS 引擎正在工作并且正在消耗电力。此外，在屏幕顶部应该有一个十字线，指示 GPS 已打开（并跟踪您）。

查找正在使用 GPS 的程序并将其停用，在设置中禁止 GPS 或使用 de locationListener 来分析 GPS 位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:05:15.740

据我了解，GPS确实在运行并消耗电力。我暂时没有找到解决方案，但如果我找到了，我会告诉你（如果你找到了自己，请回答你的问题，它可以节省我一些时间！）

# javascript - 如何使用 Javascript 仅显示两个日期之间的表的那些行？

> ID：14658881
> 
> 赞同：0
> 
> 时间：2013-02-02T05:16:44.227
> 
> 标签：javascript, html

我有一个 PHP 脚本，它生成一个 HTML 表，如下所示：

此表显示添加到文具的库存的详细信息。

```
Item   | Quantity | Date    
------------------------------
Pencil | 100      | 2013-02-01  
Pencil | 100      | 2013-02-01  
Rubber | 100      | 2013-02-02 
```

现在，我希望一些客户端脚本仅显示位于两个日期之间的那些行。我该怎么做？请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:37:42.080

您可以使用 javascript 或 jQuery 脚本来检查日期单元格中的值，如果它不符合条件，则可以隐藏该行。

```
<table>
    <tr id="table-row-1">
        <td id="item-cell-1">
            Pencil
        </td>
        <td id="quantity-cell-1">
            100
        </td>
        <td id="date-cell-1">
            2013-02-01
        </td>
    </tr>
    etc... 
```

jQuery

```
for(var i=0;i<count;i++) {
    var cellDate = Date.parse($("date-cell-" + i).text());
    //Check if date is between what your want, if not then hide
    $("table-row-" + i).empty(); //or you could hide using css display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T07:06:00.607

[[1]：https:](https://i.stack.imgur.com/aSwgX.png) //i.stack.imgur.com/I1WOv.png

这是代码

```
function myFunction() {

  var input1,input2, filter, table, tr, td, i;
  input1 = document.getElementById("dateStart").value;
  input2 = document.getElementById("dateEnd").value;
  table = document.getElementById("question1-list");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[4].innerHTML;
    var d1=input1.split("-");
    var d2=input2.split("-");
    var c=td.split("-");
    var from=new Date(d1[0],parseInt(d1[1])-1,d1[2]);
    var to   = new Date(d2[0], parseInt(d2[1])-1, d2[2]);
    var check = new Date(c[0], parseInt(c[1])-1, c[2]);
   if(check>=from && check<=to)
   {

    tr[i].style.display = "";
   }
   else
   {

    tr[i].style.display = "none";
   }

  }
} 
```

# php - 在 IE8 中无法使用组合框

> ID：14658882
> 
> 赞同：2
> 
> 时间：2013-02-02T05:16:58.410
> 
> 标签：php, jquery, internet-explorer-8

我使用 tje 以下代码来填充数据组合框。它适用于 Firefox 和 Google Chrome，但不适用于 IE8。

```
$.ajax({
    type: "POST", url:"reg/data/data.php", 
    data: {
        cat:"Y",
        //toUser: "4",
        // ignoreMessages:"1
    },
    success: function(data){
        $.each(data, function (i, elem) {
            $('#catogery').append( new Option(elem.id) );
            //console.log(elem);
        });              
    }
}); 
```

PHP：

```
$result = mysql_query("SELECT DISTINCT CATCODE from subjectmaster");

$messages;

header('Content-type: application/json');

$return_arr = array(); 

while($row = mysql_fetch_array($result)) {
    $row_array['id']=$row[0];
    array_push($return_arr,$row_array);
}

echo json_encode($return_arr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:44:13.813

去掉 cat 后面的逗号：

```
$.ajax({
type: "POST", url:"reg/data/data.php", 
data: {
    cat:"Y"

},
success: function(data){
    $.each(data, function (i, elem) {
        $('#catogery').append( new Option(elem.id) );
        //console.log(elem);
    });              
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:46:06.677

您在数据数组中提到了“，”，之后没有元素。删除“，”它应该可以工作。

```
data: {
   cat:"Y", //<------Remove this comma
   //toUser: "4",
   // ignoreMessages:"1
} 
```

# vb.net - 在VB.net中将字节数组转换为字符串

> ID：14658885
> 
> 赞同：-2
> 
> 时间：2013-02-02T05:17:32.623
> 
> 标签：vb.net, string

我有 .doc、.txt、.docx 的字节数据，我想将其转换为字符串，我做了以下事情但没有得到准确的结果：

```
Public ByteData As Byte() = // my data
Dim str As String = String.Empty

str = System.Text.Encoding.UTF8.GetString(objCandidateInfo.ByteData, 0, objCandidateInfo.ByteData.Length)
str = Convert.ToBase64String(objCandidateInfo.ByteData) 
```

**已编辑**

所以现在我正在使用 Word 应用程序进行相同的转换，这段代码正在工作这是我的代码

```
 Private Shared ObjwordApp As Word.Application
    Private Shared nullobj As Object = System.Reflection.Missing.Value
    Private Shared doc As Word.Document
    Shared Sub New()
        ObjwordApp = New Word.Application()
    End Sub

    Public Shared Sub InitializeClass()
        ObjwordApp.Visible = False
    End Sub

    Private Shared Sub OpenWordFile(ByVal StrFilePath As Object)
        Try
            ObjwordApp.Visible = False
        Catch ex As Exception
            ObjwordApp = New Word.Application()
        End Try
        Try
            doc = ObjwordApp.Documents.Open(StrFilePath, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj)
        Catch ex As Exception
            CloseWordFile()
            ObjwordApp.Visible = False
        End Try
    End Sub

    Private Shared Sub CopyWordContent()
        Try
            doc.ActiveWindow.Selection.WholeStory()
            doc.ActiveWindow.Selection.Copy()
        Catch ex As Exception
            Clipboard.Clear()
        End Try
    End Sub

    Private Shared Sub CloseWordFile()
        Try
            doc.Close()
        Catch ex As Exception

        End Try
    End Sub

    Public Shared Function ReadWordFile(ByVal StrFilePath As String, ByVal StrDataFormat As String) As String
        Dim StrFileContent = String.Empty
        If (File.Exists(StrFilePath)) Then
            Try
                OpenWordFile(StrFilePath)
                CopyWordContent()
            Catch ex As Exception

            Finally
                CloseWordFile()
            End Try

            Try
                Dim dataObj As IDataObject = Clipboard.GetDataObject()
                If (dataObj.GetDataPresent(StrDataFormat)) Then
                    StrFileContent = dataObj.GetData(StrDataFormat)
                Else
                    StrFileContent = ""
                End If
                Clipboard.Clear()
            Catch ex As Exception

            End Try
        End If
        Return StrFileContent
    End Function 
```

当我将字节数组保存到数据库时，我调用下面的函数并将其转换为 rtf，它没有转换，当我将调试器附加到它`dataObj`时`Nothing`

**代码 1**

```
Dim str As String = String.Empty
                Try
                    'str = System.Text.Encoding.UTF8.GetString(objCandidateInfo.ByteData, 0, objCandidateInfo.ByteData.Length)
                    'str = Convert.ToBase64String(objCandidateInfo.ByteData)
                    'str = System.Text.Encoding.ASCII.GetString(objCandidateInfo.ByteData, 0, objCandidateInfo.ByteData.Length)
                    str = ClsDocumentManager.ReadContent(objCandidateInfo.ByteData, DataFormats.Rtf)
                Catch ex As Exception

                End Try 
```

我以字节和文本格式保存数据db，所以当我从db（我保存并将其转换为rtf的字节值）调用它时，它的工作代码是

**代码 2**

```
rtbAttachment.Rtf = ClsDocumentManager.ReadContent(byteAttachment, DataFormats.Rtf) 
```

这些是`ClsDocumentManager`类中的方法

```
Public Shared Function GetRandomNo() As Integer
        Dim RandomNo As New Random()
        Return RandomNo.Next(Convert.ToInt32(DateTime.Now().Minute.ToString() & DateTime.Now().Second.ToString() & DateTime.Now().Hour.ToString()))
    End Function

    Public Shared Function ReadContent(ByVal byteArray As Byte(), ByVal StrReadFormat As String) As String
        Dim StrFileContent As String = String.Empty
        Try
            If (Not IsNothing(byteArray)) Then
                Dim StrFileName As String = GetRandomNo().ToString() & ".doc"
                StrFileName = ClsSingleton.aTempFolderName & StrFileName
                If (CreateWordFile(byteArray, StrFileName)) Then
                    StrFileContent = ClsWordManager.ReadWordFile(StrFileName, StrReadFormat)
                    If (File.Exists(StrFileName)) Then
                        File.Delete(StrFileName)
                    End If
                End If
            End If
        Catch ex As Exception

        End Try
        Return StrFileContent
    End Function

Public Shared Function CreateWordFile(ByVal byteArray As Byte(), ByVal StrFileName As String) As Boolean
        Dim boolResult As Boolean = False
        Try
            If (Not IsNothing(byteArray)) Then
                If (Not File.Exists(StrFileName)) Then
                    Dim objFileStream As New FileStream(StrFileName, FileMode.Create, FileAccess.Write)
                    objFileStream.Write(byteArray, 0, byteArray.Length)
                    objFileStream.Close()
                    boolResult = True
                End If
            End If
        Catch ex As Exception
            boolResult = False
        End Try
        Return boolResult
    End Function 
```

**调试时的**错误代码****

 **```
Dim dataObj As IDataObject = Clipboard.GetDataObject()
                If (dataObj.GetDataPresent(StrDataFormat)) Then
                    StrFileContent = dataObj.GetData(StrDataFormat)
                Else
                    StrFileContent = ""
                End If

`dataObj` is `Nothing` only when calling from **Code 1** 
```

**更新**

```
**`ClsDocumentManager`**

Imports System.IO

Public Class ClsDocumentManager
    Public Shared Function GetRandomNo() As Integer
        Dim RandomNo As New Random()
        Return RandomNo.Next(Convert.ToInt32(DateTime.Now().Minute.ToString() & DateTime.Now().Second.ToString() & DateTime.Now().Hour.ToString()))
    End Function

    Public Shared Function ReadContent(ByVal byteArray As Byte(), ByVal StrReadFormat As String) As String
        Dim StrFileContent As String = String.Empty
        Try
            If (Not IsNothing(byteArray)) Then
                Dim StrFileName As String = GetRandomNo().ToString() & ".doc"
                StrFileName = ClsSingleton.aTempFolderName & StrFileName
                If (CreateWordFile(byteArray, StrFileName)) Then
                    StrFileContent = ClsWordManager.ReadWordFile(StrFileName, StrReadFormat)
                    If (File.Exists(StrFileName)) Then
                        File.Delete(StrFileName)
                    End If
                End If
            End If
        Catch ex As Exception

        End Try
        Return StrFileContent
    End Function

    Public Shared Function CreateWordFile(ByVal byteArray As Byte(), ByVal StrFileName As String) As Boolean
        Dim boolResult As Boolean = False
        Try
            If (Not IsNothing(byteArray)) Then
                If (Not File.Exists(StrFileName)) Then
                    Dim objFileStream As New FileStream(StrFileName, FileMode.Create, FileAccess.Write)
                    objFileStream.Write(byteArray, 0, byteArray.Length)
                    objFileStream.Close()
                    boolResult = True
                End If
            End If
        Catch ex As Exception
            boolResult = False
        End Try
        Return boolResult
    End Function
End Class 
```

这是我的`ClsWordManager`课

```
Imports System.IO
Imports System.Text

Public Class ClsWordManager
    Private Shared ObjwordApp As Word.Application
    Private Shared nullobj As Object = System.Reflection.Missing.Value
    Private Shared doc As Word.Document
    Shared Sub New()
        ObjwordApp = New Word.Application()
    End Sub

    Public Shared Sub InitializeClass()
        ObjwordApp.Visible = False
    End Sub

    Private Shared Sub OpenWordFile(ByVal StrFilePath As Object)
        Try
            ObjwordApp.Visible = False
        Catch ex As Exception
            ObjwordApp = New Word.Application()
        End Try
        Try
            doc = ObjwordApp.Documents.Open(StrFilePath, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj)
        Catch ex As Exception
            CloseWordFile()
            ObjwordApp.Visible = False
        End Try
    End Sub

    Private Shared Sub CopyWordContent()
        Try
            doc.ActiveWindow.Selection.WholeStory()
            doc.ActiveWindow.Selection.Copy()
        Catch ex As Exception
            Clipboard.Clear()
        End Try
    End Sub

    Private Shared Sub CloseWordFile()
        Try
            doc.Close()
        Catch ex As Exception

        End Try
    End Sub

    Public Shared Function ReadWordFile(ByVal StrFilePath As String, ByVal StrDataFormat As String) As String
        Dim StrFileContent = String.Empty
        If (File.Exists(StrFilePath)) Then
            Try
                OpenWordFile(StrFilePath)
                CopyWordContent()
            Catch ex As Exception

            Finally
                CloseWordFile()
            End Try

            Try
                Dim dataObj As IDataObject = Clipboard.GetDataObject()
                If (dataObj.GetDataPresent(StrDataFormat)) Then
                    StrFileContent = dataObj.GetData(StrDataFormat)
                Else
                    StrFileContent = ""
                End If
                Clipboard.Clear()
            Catch ex As Exception

            End Try
        End If
        Return StrFileContent
    End Function

End Class 
```

所以现在的问题是当我在下面的代码中转换它时：看看`ByteAttachmets`争论，它将字节转换为字符串

```
Public Function UpdateCandidateAttachment(ByVal CandidateID As Integer, ByVal ByteAttachmets As Byte(), ByVal StrExtension As String) As Integer
        Dim Result As Integer = -1
        Try
            Dim objDataLayer As New ClsDataLayer()
            Dim str As String = Nothing
            Try
                'str = System.Text.Encoding.UTF8.GetString(objCandidateInfo.ByteData, 0, objCandidateInfo.ByteData.Length)
                'str = Convert.ToBase64String(objCandidateInfo.ByteData)
                'str = System.Text.Encoding.ASCII.GetString(objCandidateInfo.ByteData, 0, objCandidateInfo.ByteData.Length)
                str = ClsDocumentManager.ReadContent(ByteAttachmets, DataFormats.Rtf)
            Catch ex As Exception

            End Try
            objDataLayer.AddParameter("@CANDIDATE_ID", CandidateID)
            objDataLayer.AddParameter("@ATTACHMENT_DATA", ByteAttachmets)
            objDataLayer.AddParameter("@CREATED_BY", ClsCommons.IntUserId)
            objDataLayer.AddParameter("@EXTENSION", StrExtension)
            Result = objDataLayer.ExecuteNonQuery("TR_PROC_UpdateCandidateAttachment")
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
        Return Result
    End Function 
```

当我按属性从以下代码中调用它时：看看`objCandidateInfo.ByteData`，它不起作用。

```
Public Function AddUpdateCandidate(ByVal objCandidateInfo As ClsCandidateInfo) As Integer
        Dim Result As Integer = -1
        Try
            If (ClsCommons.IsValidEmail(objCandidateInfo.StrEmail)) Then
                Dim str As String = Nothing
                Try
                    'str = System.Text.Encoding.UTF8.GetString(objCandidateInfo.ByteData, 0, objCandidateInfo.ByteData.Length)
                    'str = Convert.ToBase64String(objCandidateInfo.ByteData)
                    'str = System.Text.Encoding.ASCII.GetString(objCandidateInfo.ByteData, 0, objCandidateInfo.ByteData.Length)
                    Dim byteAttachment As Byte() = objCandidateInfo.ByteData
                    str = ClsDocumentManager.ReadContent(byteAttachment, DataFormats.Rtf)
                Catch ex As Exception

                End Try
                Dim objDataLayer As New ClsDataLayer()
                objDataLayer.AddParameter("@REQUIREMENT_ID", objCandidateInfo.RequirementId)
                objDataLayer.AddParameter("@Candidate_Name", objCandidateInfo.StrCandidateName)
                objDataLayer.AddParameter("@Current_Organization", objCandidateInfo.StrCurrentCompany)
                objDataLayer.AddParameter("@Current_Designation", objCandidateInfo.StrCurrentDesignation)
                If (objCandidateInfo.StrExp.Trim() = "") Then
                    objDataLayer.AddParameter("@Overall_Exp", DBNull.Value)
                Else
                    Dim DecExp As Decimal = -1
                    If (Decimal.TryParse(objCandidateInfo.StrExp, DecExp)) Then
                        objDataLayer.AddParameter("@Overall_Exp", DecExp)
                    Else
                        objDataLayer.AddParameter("@Overall_Exp", DBNull.Value)
                    End If
                End If
                objDataLayer.AddParameter("@Qualification", objCandidateInfo.StrQualification)
                objDataLayer.AddParameter("@Location", objCandidateInfo.StrCurrentLocation)
                objDataLayer.AddParameter("@Current_CTC", objCandidateInfo.StrCurrentCTC)
                objDataLayer.AddParameter("@Expected_CTC", objCandidateInfo.StrExpectedCTC)
                objDataLayer.AddParameter("@Phone_No", objCandidateInfo.StrPhoneNo)
                objDataLayer.AddParameter("@Mobile", objCandidateInfo.StrMobile)
                objDataLayer.AddParameter("@Notice_Period", objCandidateInfo.StrNoticePeriod)
                objDataLayer.AddParameter("@Remarks", objCandidateInfo.StrRemarks)
                If (objCandidateInfo.StrYearofExp.Trim() = "") Then
                    objDataLayer.AddParameter("@Years_of_Experience", DBNull.Value)
                Else
                    Dim DecExp As Decimal = -1
                    If (Decimal.TryParse(objCandidateInfo.StrYearofExp, DecExp)) Then
                        objDataLayer.AddParameter("@Years_of_Experience", DecExp)
                    Else
                        objDataLayer.AddParameter("@Years_of_Experience", DBNull.Value)
                    End If
                End If
                objDataLayer.AddParameter("@Address", objCandidateInfo.StrAddress)

                objDataLayer.AddParameter("@Email", objCandidateInfo.StrEmail)
                If (objCandidateInfo.intIndustry > 0) Then
                    objDataLayer.AddParameter("@Industry", objCandidateInfo.intIndustry)
                Else
                    objDataLayer.AddParameter("@Industry", DBNull.Value)
                End If
                If (objCandidateInfo.intFunctionalArea > 0) Then
                    objDataLayer.AddParameter("@Functional_Area", objCandidateInfo.intFunctionalArea)
                Else
                    objDataLayer.AddParameter("@Functional_Area", DBNull.Value)
                End If
                If (objCandidateInfo.StrDob.Trim() = "") Then
                    objDataLayer.AddParameter("@DOB", DBNull.Value)
                Else
                    Try
                        objDataLayer.AddParameter("@DOB", Convert.ToDateTime(objCandidateInfo.StrDob))
                    Catch ex As Exception
                        objDataLayer.AddParameter("@DOB", DBNull.Value)
                    End Try
                End If
                If (objCandidateInfo.intSourceBy > 0) Then
                    objDataLayer.AddParameter("@Source", objCandidateInfo.intSourceBy)
                Else
                    objDataLayer.AddParameter("@Source", DBNull.Value)
                End If
                objDataLayer.AddParameter("@SKILL_SET", objCandidateInfo.strSkillSet)
                objDataLayer.AddParameter("@ATTACHMENT_DATA", objCandidateInfo.ByteData)
                objDataLayer.AddParameter("@EXTENSION", objCandidateInfo.StrExtension)
                objDataLayer.AddParameter("@CREATED_BY", ClsCommons.IntUserId)

                Result = objDataLayer.ExecuteNonQuery("TR_PROC_AddUpdateFullCandidateData")
            Else
                MsgBox("Data is not extracted, Some Error Occured, please update your software.")
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
        Return Result
    End Function 
```

我希望我清除我的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:29:12.527

（在对问题进行了几次更改后进行了编辑。）

如果只想获取文件的文本内容，则需要对文本文件和二进制文件进行不同的处理。如果输入文件格式是基于文本的（.txt、.htm 等），您通常可以将其视为字符串，但您仍然需要知道要使用什么编码。

但是，如果输入文件格式是二进制（如 .doc、.docx 等），则不能直接将字节数组转换为字符串，因为文件内容不仅仅代表文本 - 字节描述布局、格式、以及有关该文件的其他信息。在这种情况下，您需要使用 Word 或其他一些第 3 部分库来为您处理文件数据。

要使用自动化获取 Word 文档的内容，只需创建 的实例`Word.Application`，打开文档，选择其活动窗口中的所有文本，然后使用该`Selection.Text`属性将文本转换为字符串。就像是：

```
oDocument.ActiveWindow.Selection.WholeStory()
sText = oDocument.ActiveWindow.Selection.Text 
```

该`Selection`对象是[`Range`](http://msdn.microsoft.com/en-us/library/office/ff195101%28v=office.14%29.aspx)Word 中的一个实例。这为您提供了文档的简单、未格式化的内容。您可以将其转换为字节数组或将其用作字符串。要将其转换为字节数组，您需要使用编码，因为内存中的字符必须转换为字节。

如果要将内容转换为 RTF 格式，则需要 3rd-part 工具（或自己实现 RTF 格式）- RTF 不是纯文本格式，它具有相当复杂的结构。

您还可以使用 Word 以 RTF 格式保存文档 - 查找[`Document.SaveAs2()`](http://msdn.microsoft.com/en-us/library/office/ff836084%28v=office.14%29.aspx)执行此操作的方法。这会将文档以 RTF 格式保存到磁盘。如果您需要数据库中的这些数据，只需读取 .rtf 文件 ( `File.ReadAllBytes()`)，然后将字节保存到数据库中。**

# android - 在平板电脑上，内部存储是存储图像的唯一选择吗？

> ID：14658887
> 
> 赞同：0
> 
> 时间：2013-02-02T05:18:04.700
> 
> 标签：android

在平板电脑上，内部存储是存储图像的唯一选择吗？

我正在编写一个从 Web 服务获取数据的应用程序，数据是 Base64 编码的图像。我必须将此图像保存在手机和平​​板电脑上。在手机上，我可以选择将图像存储在外部存储设备上，但如果设备是平板电脑，那么内部存储设备是我唯一的选择吗？

我使用的平板电脑是 Nexus 7。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:23:03.777

如果您使用的平板电脑没有 SD 卡插槽或其他一些可移动存储选项，那么内部存储将是您唯一的选择。

您可以检查是否存在外部存储选项，如果可用则保存到该选项，如果没有则默认返回内部。此页面将解释所有可用的命令来检查外部存储的存在

[http://developer.android.com/reference/android/os/Environment.html](http://developer.android.com/reference/android/os/Environment.html)。

# javascript - 将数据解析为整数

> ID：14658891
> 
> 赞同：0
> 
> 时间：2013-02-02T05:18:42.750
> 
> 标签：javascript, jquery

```
<script>
var intVar = parseInt($(.span).data('1'));
alert(data)   // output Nan
</script>

---------------

      <span id ="span" class ="span" data-1="4" /> 
```

我想要 'intVar' 作为整数，但无法解析 'data-1'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:28:48.770

对我来说很好（[小提琴](http://jsfiddle.net/antisanity/pp4j5/show)）......前提是你

1.：不要提醒`data`（因为你没有设置它）并确保你的选择器是一个字符串......

```
alert(parseInt($('.span').data('1'))); 
```

2.：将您的脚本放在您尝试访问的 dom 节点*之后：*

```
<span id="span" class="span" data-1="4" />

<script type="text/javascript">
    alert(parseInt($('.span').data('1')));
</script> 
```

3.：或者像这样包装你的代码（[小提琴](http://jsfiddle.net/pp4j5/1/show/)和[参考](http://api.jquery.com/ready/)）：

```
...
    <script type="text/javascript">
        $(function() {
            alert(parseInt($('.span').data('1')));
        });
    </script>
</head>
<body>
    <span id="span" class="span" data-1="4" />
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:22:27.277

尝试这个

```
var intVar = parseInt($('.span').data('1'));
alert(intVar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:51:09.023

```
do this  
<script>
$(document).ready(function(){

var intVar = parseInt($('.span').data('1'));
alert(intVar);

});
</script>

 <span id ="span" class ="span" data-1="4" /> 
```

# iphone - NTLM 身份验证 Xcode

> ID：14658893
> 
> 赞同：1
> 
> 时间：2013-02-02T05:19:09.003
> 
> 标签：iphone, authentication, uiwebview, ntlm

我正在尝试使用 UIWebview 进行 NTLM 身份验证。我研究过，我是这样写的。但是在我的 NSLog 中，我只看到**"got auth challange"**但我没有看到**"received response via nsurlconnection"**。请帮我。我坚持这个超过5天。我正在使用**ios 6.1**进行测试。我很感激任何帮助:)

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request   navigationType:(UIWebViewNavigationType)navigationType{

if([request.URL.host isEqualToString:@"42.61.46.2"])
{
    NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:request   delegate:self];
    [connection start];

    NSLog(@"%@",request);
    return NO;
}

self.lbl_error.hidden = YES; //hide error message label
return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSLog(@"got auth challange");

if ([challenge previousFailureCount] == 0)
{
    NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
                                             initWithHost: @"42.61.46.2"
                                             port: 80
                                             protocol: @"http"
                                             realm: nil authenticationMethod : NSURLAuthenticationMethodNTLM];                                                   

    [[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:    [NSURLCredential credentialWithUser:@"example" password:@"example"     persistence:NSURLCredentialPersistenceForSession] forProtectionSpace:protectionSpace];

}
else
{
    [[challenge sender] cancelAuthenticationChallenge:challenge];
}

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
NSLog(@"received response via nsurlconnection");

NSURL* url = [NSURL URLWithString:@"http://42.61.46.2"]; //create a NSURL object

if(activeWebView == nil)
{
    //If there is no activeWebview i.e. no webview in the collection, create a new one and     show it

    [self addWebViewWithURL:url];
}
else
    {
           NSString *url = @"http://42.61.46.2";
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];

    [activeWebView loadRequest:urlRequest];
    }
}

- (BOOL)connectionShouldUseCredentialStorage:(NSURLConnection *)connection
{
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T18:27:49.047

通过将它用于您的 didReceiveAuthenticationChallenge，它对我有用：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:    (NSURLAuthenticationChallenge *)challenge
{
    NSLog(@"got auth challange");

    if ([challenge previousFailureCount] ==0)
    {
        [[challenge sender]  useCredential:[NSURLCredential credentialWithUser:@"username" password:@"password" persistence:NSURLCredentialPersistenceForSession] forAuthenticationChallenge:challenge];

    }
    else
{
    NSLog(@"Did cancelAuthenticationChallenge");
    [[challenge sender] cancelAuthenticationChallenge:challenge];
} 
```

}

# android - startService(sendIntent) 多次触发

> ID：14658905
> 
> 赞同：0
> 
> 时间：2013-02-02T05:21:17.290
> 
> 标签：android, android-intent, bluetooth, thermal-printer

我正在为蓝牙热敏打印机做一个应用程序。我已经完成了打印部分。

这是代码：

```
public void printText(View view)    
    {
        Button b = (Button)findViewById(R.id.button2);
        if (b.getText().toString().equals("Choose Printer"))
            errorAlert("No Printer Selected");
        else
        {
            EditText e = (EditText)findViewById(R.id.printerText);
            errorAlert("Printing...");      
            Intent sendIntent = new Intent();
            stopService(sendIntent);
            sendIntent.setAction(Intent.ACTION_SEND);
            sendIntent.putExtra("MAC", mac);
            sendIntent.putExtra("DATA", e.getText().toString()+"\n\n");
            sendIntent.setComponent(new ComponentName("com.example.bluetoothtest",""com.example.bluetoothtest.MainActivity""));
            startService(sendIntent);
        }
    } 
```

当我调用 printText 时，打印机会打印两次或三次。似乎 startService(sendIntent) 触发了不止一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:48:32.070

您不能两次或三次启动服务。阅读有关`startService` [方法](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)。

> 退货
> 
> 如果服务正在启动或已经在运行，则返回实际启动的服务的 ComponentName；否则，如果服务不存在，则返回 null。

尝试调试您的代码，添加“日志”行来解决问题。

# perl - Perl：同一个文件中的两个包不能导入同一个包？

> ID：14658911
> 
> 赞同：2
> 
> 时间：2013-02-02T05:22:16.393
> 
> 标签：perl, perl-module

这是一个有趣的 Perl 行为。（至少对我来说:)）

我有两个包`PACKAGE1`，`PACKAGE2`它们导出具有相同名称的函数`Method1()`。

由于将有很多包会导出相同的功能，所以`use`在 Perl 文件中添加所有内容将是乏味的。所以，我创建了一个包含`INCLUDES.pm`这些文件的通用包含文件`use`。

包括.pm：

```
use PACKAGE1;
use PACKAGE2;

1; 
```

包装1.pm：

```
package PACKAGE1;

use Exporter;
our @ISA = qw(Exporter);
our @EXPORT = qw (
          Method1
);

sub Method1{
print "PACKAGE1_Method1 \n";
}

1; 
```

包2.pm：

```
package PACKAGE2;

use Exporter;
our @ISA = qw(Exporter);
our @EXPORT = qw (
    Method1
);

sub Method1{
    print "PACKAGE2_Method1 \n";
}

1; 
```

测试.pl：

```
##################first package################
package Test1;
use INCLUDES;
my @array = values(%INC);
print  "@array  \n";

Method1();

##################second package################
package Test2;
use INCLUDES;  #do "INCLUDES.pm";
my @array = values(%INC);
print  "@array  \n";

Method1(); 
```

`Method1()`动机是，在任何 Perl 文件中只能使用最新的包。

输出让我吃惊。我希望这两个`Method1()`电话都`Tests.pl`应该成功。但只有第一个`Method1()`执行，第二个`Method1()`调用说“未定义”。

输出：

```
C:/Perl/site/lib/sitecustomize.pl PACKAGE1.pm C:/Perl/lib/Exporter.pm PACKAGE2
.pmINCLUDES.pm

PACKAGE2_Method1

C:/Perl/site/lib/sitecustomize.pl PACKAGE1.pm C:/Perl/lib/Exporter.pm PACKAGE2
.pm INCLUDES.pm

Undefined subroutine &Test2::Method1 called at C:\Temp\PackageSample\Tests.pl line 15. 
```

有人对此有任何答案/看法吗？

**实际场景：**

多个 Perl 模块中的方法将具有相同的名称。但是只能使用高优先级 perl 模块中的方法。

**例如，如果`PACKAGE1`contains `Method1(), Method2()`& `PACKAGE2`contains only `Method1()`，`Method1()`则应使用 from `PACKAGE2`&`Method2()`应使用 from`PACKAGE1`**

基本上我想在基于 Preference 的模块之间实现层次结构。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T05:43:11.310

在 Perl 中，[`use Module`](http://perldoc.perl.org/functions/use.html)相当于

```
BEGIN { require Module; Module->import; } 
```

但是[`require`](http://perldoc.perl.org/functions/require.html)缓存了需要的模块列表。每个 Perl 进程只加载一次模块。所以只有第一个`use IMPORTS`做任何事情。由于您的`IMPORTS`模块没有`import`方法，因此当您`use`再次使用它时不会发生任何事情。

我不太确定您要完成什么。也许您的 IMPORTS 模块应该是一个实际的包，具有`import`导出您想要的任何功能的方法。这样，每个`use IMPORTS`函数都会将函数导出到调用它的包中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T06:01:16.543

`use MyPackage`相当于`BEGIN{ require MyPackage; MyPackage->import }`。从 Exporter 继承设置了一个`import`执行“别名”功能的类方法。

问题是您包含模块没有正确重新导出模块。这很重要，因为这是将函数导入调用者命名空间的过程。虽然这并不难自己制作，但有一个方便的模块用于此目的[Import::Into](http://p3rl.org/Import::Into)。

这是一个包含在单个文件中的示例，应该很容易重新扩展为多个文件，唯一重要的区别在于 Includes 模块。我做了一些其他表面上的改变，但这些更符合我的口味。

```
#!/usr/bin/env perl

use strict;
use warnings;

package PACKAGE1;

use parent 'Exporter';
our @EXPORT = qw(Method1);

sub Method1 {
  print "PACKAGE1_Method1 \n";
}

package PACKAGE2;

use parent 'Exporter';
our @EXPORT = qw(Method1);

sub Method1 {
  print "PACKAGE2_Method1 \n";
}

package Includes;

use Import::Into;

# uncomment in mulitple files
#use PACKAGE1 ();  # prevent import
#use PACKAGE2 ();  # ditto

sub import {
  my $class = shift;
  my $caller = caller;

  PACKAGE1->import::into( $caller );
  PACKAGE2->import::into( $caller );
}

package Test1;
Includes->import; # in seperate files replace with `use Includes;`

Method1();

package Test2;
Includes->import; # ditto

Method1(); 
```

一个真实的例子是一个模块[`utf8::all`](https://metacpan.org/source/DOHERTY/utf8-all-0.009/lib/utf8/all.pm)，它广泛使用这种机制将大量的 unicode 内容加载到调用程序包中。

**编辑**

为了允许从模块中导入特定的东西`Includes`，你可以让它继承自`Exporter`并制作它`@EXPORT`并`@EXPORT_OK`按照你的意思做。否则，您可以继续`Import::Into`制作捆绑包之类的东西。

```
sub import {
  my $class  = shift;
  my $bundle = shift;

  my $caller = caller;

  if ($bundle eq 'Bundle1') {
    PACKAGE1->import::into( $caller );
    ... # other things in Bundle1
  } elsif ($bundle eq 'Bundle2') {
    PACKAGE2->import::into( $caller );
    ... # other things in Bundle2
  }
} 
```

然后在您的测试模块中

```
use Includes 'Bundle1'; 
```

总之，制作自己的`import`方法并不难，每一点都是神奇的`Exporter`。一旦您了解了符号表操作，您就不需要它，或者`Import::Into`，尽管它是一个稍微高级一点的主题。这是我在 Perl 时代早些时候问过的一个问题：[Demystifying the Perl glob (*)](https://stackoverflow.com/questions/4865447/demystifying-the-perl-glob)

综上所述，如果继承和多态的面向对象概念可以完成这项工作，您可能也想研究该路线。这是一个例子：

```
#!/usr/bin/env perl

use strict;
use warnings;

package PACKAGE1;

sub Method1 {
  my $class = shift;
  print "PACKAGE1_Method1 \n";
}

sub Method2 {
  my $class = shift;
  print "PACKAGE1_Method2 \n";
}

package PACKAGE2;

# if multiple files use this
#use parent 'PACKAGE1';
# rather than
our @ISA = 'PACKAGE1';

# any methods in PACKAGE2 will override those declared in PACKAGE1 

sub Method1 {
  my $class = shift;
  print "PACKAGE2_Method1 \n";
}

package Test1;

# in seperate files need to use
#use PACKAGE2;

PACKAGE2->Method1();
PACKAGE2->Method2();

package Test2;

# ditto
#use PACKAGE1
#use PACKAGE2

PACKAGE2->Method1();
PACKAGE2->Method2();

# you can still use PACKAGE1 and get the originals
PACKAGE1->Method1();
PACKAGE1->Method2(); 
```

现在看到没有`Includes`包，也没有符号被导入`Test*`命名空间。`PACKAGE2`提供`Method2`，因为它继承自`PACKAGE1`并且它不会用自己的方法声明覆盖方法声明。

# java - 使用 JAXB 解组 XML

> ID：14658921
> 
> 赞同：2
> 
> 时间：2013-02-02T05:23:54.810
> 
> 标签：java, xml, jaxb, unmarshalling

我有一个要解组的 XML 文件，但我不知道该怎么做。

XML 看起来像

```
<config>
    <params>
        <param>
            <a>draft</a>
            <b>Serial</b>
        </param>
        <param>
            <a>amt</a>
            <b>Amount</b>
        </param>
    </params>
    <server>
        <scheme>http</scheme>
        <host>somehost.com/asdf</host>
    </server>
</config> 
```

当我有参数作为根元素并且没有服务器元素或配置作为根元素时，我以前可以解组。

我添加了一个配置类来尝试解组这个，但我不知道我哪里出错了。

我的课看起来像

```
@XmlRootElement
public class Config {

    private Params params = new Params();

    @XmlElement(name="params")
    public Params getParams() {
        return params;
    }
    public void setParam(Params params) {
        this.params = params;
    }
}

public class Params {
    private List<Param> params = new ArrayList<Param>();

    public List <Param> getParam() {
        return params;
    }

    public void setParam(List<Param> params) {
        this.params = params;
    }
}

public class Param {
    String a;
    String b;        
    //getters and setters.  omitted for brevity     
} 
```

解组码

```
File file = new File("C:\\config.xml");
InputStream inputStream = new FileInputStream(file);
JAXBContext jc = JAXBContext.newInstance(Config.class);
Unmarshaller u = jc.createUnmarshaller();
conf = (Config) u.unmarshal(file);
System.out.println(conf.getParams().getParam().size()); 
```

println 打印 0。我哪里出错了？

我知道我还没有任何服务器节点的代码，还没有到那里。我的实际 XML 还没有那个节点，我仍然无法让它在配置标签内正确解组参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:20:37.843

您只需要进行以下更改，它就会起作用。将 Config 中的 setParams 方法更改为

```
@XmlElement(name = "params") //<--Annotation added here
public void setParam(Params params) {
    this.params = params;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:47:02.670

尝试

```
@XmlRootElement
class Config {
    private List<Param> params = new ArrayList<Param>();

    @XmlElementWrapper
    @XmlElement(name="param")
    public List<Param> getParams() {
        return params;
    }

    public void setParams(List<Param> params) {
        this.params = params;
    }
}

class Param {
    String a;
    String b;
          ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:51:29.163

我认为 Param 和它的包装器都应该是 unmarsh 的。您只需解组列表。但也需要解组 Param 模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T10:29:10.590

默认情况下，[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现会将所有公共字段和属性视为已映射。属性被识别为具有匹配的`get`/`set`方法。您只需要更改类中的`setParam`方法以匹配该方法。`Config``setParams``getParams`

```
@XmlRootElement
public class Config {

    private Params params = new Params();

    public Params getParams() {
        return params;
    }
    public void setParams(Params params) {
        this.params = params;
    }

} 
```

# ruby-on-rails - Rspec 失败 4 个示例，1 个失败

> ID：14658922
> 
> 赞同：0
> 
> 时间：2013-02-02T05:24:10.750
> 
> 标签：ruby-on-rails, ruby, rspec

### **我一直在关注 Michael Hartl 的教程，尽管由于某种原因我在测试时似乎遇到了这个错误：**

```
Failures:   

1) PagesController GET 'home' should have the right title
 Failure/Error: response.should have_selector("title",
   expected css "title" to return something
 # ./spec/controllers/pages_controller_spec.rb:18:in `block (3 levels) in <top (required)>'

Finished in 0.11535 seconds
4 examples, 1 failure

Failed examples:

rspec ./spec/controllers/pages_controller_spec.rb:16 # PagesController GET 'home' should have the right title

Randomized with seed 19403 
```

### **这是我的 pages_controller_spec 文件内容：**

```
require 'spec_helper'

describe PagesController do

render_views

describe "GET 'home'" do
it "returns http success" do
  get 'home'
  response.should be_success
end

it "should have the right title" do
  get 'home'
  response.should have_selector("title", 
      :content => "Ruby on rails tutorial sample app | Home")
 end
 end

describe "GET 'contact'" do
it "returns http success" do
  get 'contact'
  response.should be_success
 end
end

describe "GET 'about'" do
it "returns http success" do
  get 'about'
  response.should be_success
end
 end
 end 
```

### **这是我的 home.html.erb 文件的内容：**

```
<!DOCTYPE>
<html>
<head>
    <title>Ruby on rails tutorial sample app | Home</title>
</head>
<body>
    <h1>Pages#home</h1>
    <p>Find me in app/views/pages/home.html.erb</p>
</body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:29:27.130

是的，这也发生在我身上。请确保您使用的是教程中提到的 Capybara 的确切版本。即1.1.2

我尝试了许多变体和替代方案，得出的结论是，最新的 Capybara 中仍然存在一些兼容性问题。

希望这可以帮助。

> 更新：搞定了。从浏览器检查主页的来源。由于应用程序布局使用 yield inside `<body>`，因此 home.html.erb 中的所有 html 实际上都在 body 内部被替换（甚至 `<title>`部分被替换在`<body>`tag 内），有效地使`<head>`元素`<title>`无效。这就是为什么还没有特定视图标题的原因。/views/layout/application.html.erb 中定义的标题正在您的主页上使用。

我的建议是继续学习本教程。只需几个步骤，您就可以通过测试。

# mysql - 文件读取错误 .FileInputStream.readBytes（本机方法）

> ID：14658923
> 
> 赞同：-1
> 
> 时间：2013-02-02T05:24:53.807
> 
> 标签：mysql, database, file-io, insert

我试图从文本文件中获取数据并插入到 mysql 数据库中。一些行已成功插入，但是在运行程序时它显示此错误消息。

```
java.io.IOException: Read error
at java.io.FileInputStream.readBytes(Native Method)
at java.io.FileInputStream.read(FileInputStream.java:199)
at java.io.DataInputStream.read(DataInputStream.java:132)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.BufferedReader.fill(BufferedReader.java:136)
at java.io.BufferedReader.readLine(BufferedReader.java:299)
at java.io.BufferedReader.readLine(BufferedReader.java:362)
at InsertDB.inserdata(InsertDB.java:53)
at InsertDB.main(InsertDB.java:96) 
```

这是我的程序

```
 public class InsertDB {
    Connection conn ;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "dna";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root"; 
    String password = "123";

    public void inserdata()
    {

      String[] RowItems = new String[11];
      int[] intRowItems=new int[10];
    try{
    conn = DriverManager.getConnection(url+dbName,userName,password);
     Statement st = conn.createStatement();
     // Open the file that is the first 
    // command line parameter
     FileInputStream fstream = new FileInputStream("result.txt");
    // Get the object of DataInputStream
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    StringTokenizer stringTokenizer ;

    while ((strLine = br.readLine()) != null) {
    stringTokenizer=new StringTokenizer(strLine);
   int j=0;
   while(stringTokenizer.hasMoreTokens()){
    RowItems[j]=stringTokenizer.nextToken();
    j++;
    }
   int c2,c3,c4,c5,c6,c7,c8,c9,c10,c11;

      c2=Integer.valueOf(RowItems[1]).intValue();
       c3=Integer.valueOf(RowItems[2]).intValue();
        c4=Integer.valueOf(RowItems[3]).intValue();
         c5=Integer.valueOf(RowItems[4]).intValue();
          c6=Integer.valueOf(RowItems[5]).intValue();
           c7=Integer.valueOf(RowItems[6]).intValue();
            c8=Integer.valueOf(RowItems[7]).intValue();
             c9=Integer.valueOf(RowItems[8]).intValue();
              c10=Integer.valueOf(RowItems[9]).intValue();
               c11=Integer.valueOf(RowItems[10]).intValue();

     String temp=RowItems[0];
    String insert="INSERT into protein_predicted                 VALUES('"+temp+"','"+c2+"','"+c3+"','"+c4+"','"+c5+"','"+c6+"','"+c7+"','"+c8+"','"+c9+"','      "+c10+"','"+c11+"')";
    st.executeUpdate(insert);

    in.close();
    }
    System.out.println("Insertted successfully");
     }
       catch (SQLException e) {
        throw new RuntimeException(e);
       }
       catch (Exception e){//Catch exception if any
        //System.err.println("Error: " + e.getMessage());
      e.printStackTrace();
      //Close the input stream

    }
    }
    public static void main(String args[])
    {
        InsertDB a=new InsertDB();
        a.inserdata();

    } 
```

我的文本文件包含这样的多列和多行

1BG8A 76 33 0 18 1 0 1 5 2 16

请帮我解决这个问题..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:29:56.373

您正在关闭正在阅读它`DataInputStream`的循环内部。在您阅读完所有内容后`while`，我将删除该`in.close()`行并在 while 循环之外关闭您`BufferedReader``br.close();`

如果您使用的是 Java 6 或更低版本，理想情况下，您应该在...`BufferedReader`之外声明变量并添加一个子句来关闭阅读器，以防发生读取错误。在 Java 7 中有一个[AutoCloseable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)接口可以帮助自动处理这个问题。`try``catch``finally`

# iphone - JSON response shows Blank Value after converting it in NSArray

> ID：14658937
> 
> 赞同：0
> 
> 时间：2013-02-02T05:28:36.757
> 
> 标签：iphone, ios, json, nsarray, connection-string

I am facing some Pathetic Problem . Here I am Sharing my Code and Response ..

JSON Response :

**JSON Log :**

```
[
  {
    "0": "41",
    "intid": "41",
    "1": "\u8a00\u3046",
    "varfirstname": "\u8a00\u3046",
    "2": "test",
    "varlastname": "test",
    "3": "\u5730",
    "varusername": "\u5730",
    "4": "abc@gmail.com",
    "varemailid": "abc@gmail.com",
    "5": "qwert",
    "varpassword": "qwert",
    "6": "12345",
    "varmobileno": "12345",
    "7": "Enable",
    "mobileMessage": "Enable",
    "8": "",
    "varphoneno": "",
    "9": "Enable",
    "enumstatus": "Enable",
    "10": "2013-01-30",
    "date_insert": "2013-01-30",
    "11": "2013-01-30",
    "date_edit": "2013-01-30",
    "12": "210.211.252.1",
    "varipaddress": "210.211.252.1"
  }
] 
```

From This Response I am Converting NSArray like this ..

```
// Create new SBJSON parser object 
SBJSON *parser = [[SBJSON alloc] init];  
NSArray *array = (NSArray *) [parser objectWithString:json_string error:nil];
NSLog(@"Array === %@",array); 
```

And This Array Shows this Data :

**Log :**

```
Array ===
(
    {
    0 = 41;
    1 = "";
    10 = "2013-01-30";
    11 = "2013-01-30";
    12 = "210.211.252.1";
    2 = test;
    3 = "";
    4 = "abc@gmail.com";
    5 = qwert;
    6 = 12345;
    7 = Enable;
    8 = "";
    9 = Enable;
    "date_edit" = "2013-01-30";
    "date_insert" = "2013-01-30";
    enumstatus = Enable;
    intid = 41;
    mobileMessage = Enable;
    varemailid = "abc@gmail.com";
    varfirstname = "";
    varipaddress = "210.211.252.1";
    varlastname = test;
    varmobileno = 12345;
    varpassword = qwert;
    varphoneno = "";
    varusername = "";
}) 
```

Also I am Converting my **VarfirstName** Like this

```
NSDictionary *dataObject=[array objectAtIndex:0];
NSString *status = [dataObject objectForKey:@"varfirstname"];
NSLog(@"status -- %@",status);
NSString *myDecodedS = status;
NSString *myDecoded = [myDecodedS stringByReplacingPercentEscapesUsingEncoding:NSUTF16StringEncoding];
NSLog(@"HIIii %@",myDecoded); 
```

Can Any one tell me how Could I Get data From That JSON Response ... I am not getting what I am doing wrong ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:49:59.767

I copied your JSON into a text file, converted it back to data and used NSJSONSerialization class, and that worked fine:

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSError *error;
    NSData *data = [[NSData alloc]initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"json" ofType:@"txt"]];
    id jsonObj = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error];
    NSLog(@"%@",jsonObj);
    NSLog(@"%@",jsonObj[0][@"varfirstname"]);
} 
```

The log output was:

```
2013-02-01 22:47:40.361 JSONExperiment[4200:c07] (
        {
        0 = 41;
        1 = "\U8a00\U3046";
        10 = "2013-01-30";
        11 = "2013-01-30";
        12 = "210.211.252.1";
        2 = test;
        3 = "\U5730";
        4 = "abc@gmail.com";
        5 = qwert;
        6 = 12345;
        7 = Enable;
        8 = "";
        9 = Enable;
        "date_edit" = "2013-01-30";
        "date_insert" = "2013-01-30";
        enumstatus = Enable;
        intid = 41;
        mobileMessage = Enable;
        varemailid = "abc@gmail.com";
        varfirstname = "\U8a00\U3046";
        varipaddress = "210.211.252.1";
        varlastname = test;
        varmobileno = 12345;
        varpassword = qwert;
        varphoneno = "";
        varusername = "\U5730";
    }
)
2013-02-01 22:47:40.363 JSONExperiment[4200:c07] 言う 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:46:42.437

varfirstname key store the result as a Unicode string

Try this , I think your problem solve

**For String**

```
NSString *status = [NSString stringWithUTF8String:[[dataObject objectForKey:@"varfirstname"] UTF8String]]);

NSLog(@"status -- %@",status); 
```

**For Json** Try this -------------------------------------

```
 SBJsonParser *parser = [[SBJsonParser alloc] init];

NSURLRequest *UrlRequest = [NSURLRequest requestWithURL: [NSURL URLWithString:@"http://eappointmentbook.net/iphone/getAccountInfo.php?userid=41&usertype=Normal%20User"]];

NSData *response = [NSURLConnection sendSynchronousRequest:UrlRequest  returningResponse:nil error:nil];

NSString *json_string = [[NSString alloc]  initWithData:response encoding:NSUTF8StringEncoding];

NSArray *status = [parser objectWithString:json_string error:nil];

NSLog(@"status Array  %@ " , status);

NSLog(@"status varfirstname  %@ " , [[status objectAtIndex:0]objectForKey:@"varfirstname"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:53:53.783

I downloaded latest [version of SBJSON 3.1.1](https://github.com/stig/json-framework/downloads) and saved your json string in a file and it worked for me

```
SBJsonParser *parser = [[SBJsonParser alloc] init];
NSString *str =[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"File" ofType:@"txt"] encoding:NSUTF8StringEncoding error:nil];
NSLog(@"%@",str);
NSArray *array = (NSArray *) [parser objectWithString:str error:nil];
NSLog(@"Array === %@",array); 
```

Here are my logs

```
2013-02-02 12:20:31.931 MyTab[1343:c07] [{"0":"41","intid":"41","1":"\u8a00\u3046","varfirstname":"\u8a00\u3046","2":"test","varlastname":"test","3":"\u5730","varusername":"\u5730","4":"abc@gmail.com","varemailid":"abc@gmail.com","5":"qwert","varpassword":"qwert","6":"12345","varmobileno":"12345","7":"Enable","mobileMessage":"Enable","8":"","varphoneno":"","9":"Enable","enumstatus":"Enable","10":"2013-01-30","date_insert":"2013-01-30","11":"2013-01-30","date_edit":"2013-01-30","12":"210.211.252.1","varipaddress":"210.211.252.1"}]
2013-02-02 12:20:31.933 MyTab[1343:c07] Array === (
        {
        0 = 41;
        1 = "\U8a00\U3046";
        10 = "2013-01-30";
        11 = "2013-01-30";
        12 = "210.211.252.1";
        2 = test;
        3 = "\U5730";
        4 = "abc@gmail.com";
        5 = qwert;
        6 = 12345;
        7 = Enable;
        8 = "";
        9 = Enable;
        "date_edit" = "2013-01-30";
        "date_insert" = "2013-01-30";
        enumstatus = Enable;
        intid = 41;
        mobileMessage = Enable;
        varemailid = "abc@gmail.com";
        varfirstname = "\U8a00\U3046";
        varipaddress = "210.211.252.1";
        varlastname = test;
        varmobileno = 12345;
        varpassword = qwert;
        varphoneno = "";
        varusername = "\U5730";
    }
) 
```

# javascript - JavaScript：显示客户端和服务器之间数据传输的度量

> ID：14658940
> 
> 赞同：1
> 
> 时间：2013-02-02T05:29:03.623
> 
> 标签：javascript, jquery, asp.net, c#-4.0

如果您在 Mozilla 火狐浏览器中看到，当您单击提交按钮时；在页面底部写了类似 (javascript:__doPostBack(.....) 或等待 www.yahooforexample.com) 并在等待警报后从 www.yahooforexample.com 或其他浏览器加载器图像中读取数据或显示其他内容. 我有一个关于这些的问题：
我可以显示客户端和服务器之间数据传输的度量吗？

这意味着当火狐有一个 java 脚本回传或在客户端和设置之间传输数据时，我想显示进度条或其他东西来向用户显示数据传输的度量。
是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:52:49.227

在 iframe 中加载页面时的 java 脚本中，我们可以说现在加载了多少数据。
我在这里看到了这个例子。
访问[http://project.mahemoff.com/jquery-iframe/](http://project.mahemoff.com/jquery-iframe/)

# jquery - jQuery Mobile 作为 Web CRM

> ID：14658941
> 
> 赞同：1
> 
> 时间：2013-02-02T05:29:09.533
> 
> 标签：jquery, html, css, jquery-mobile, crm

我有一个新项目，我需要开发一个基于 Web 的 CRM 软件。我将使用 PHP 和 MYSQL 作为我的后端，对于我的前端，我需要一个 UI 框架。我发现 jQuery Mobile 非常好，它完全是 ajax，它的编码非常简单，而且在某种程度上它给人一种软件的感觉。我还看到了 Sencha Ext js 和 Adob​​e flex，我不想使用 Sencha，因为我没有太多时间学习它，而且 flex 是 flash，所以不能使用它。

我的问题是我可以使用 jQuery mobile 作为我的前端吗，我知道它是用于移动开发的。但是我可以在基于网络的桌面软件中使用它吗？他们使用 jQuery Mobile 有什么缺点吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:13:13.890

是的，您可以轻松地将其用作桌面网站前端，但几乎没有问题。

1.  jQuery Mobile 小部件是为移动设备构建的，因此它的所有组件和小部件都具有移动应用程序的外观。对我来说这不是什么大问题，主要是因为所有这些组件都可以很容易地在视觉上进行修改。

2.  与桌面浏览器上的移动设备不同，您将拥有全速优势。过渡可以正常工作，抗锯齿可以正常工作（Android <2.3 上的圆形边框很糟糕），一切都可以正常工作。您应该只关注旧版本的 IE（但这是一个持续存在的问题）。

3.  另一个大问题是布局。您需要了解 jQM 是为移动电话而构建的，因此在开始添加组件和小部件之前，您需要在内容中创建一个基本布局。在任何其他情况下，选择菜单将从屏幕的一侧延伸到另一侧（一点也不漂亮）。

我提到的一切都不是什么大问题，如果你已经了解 jQuery，他们一定会使用 jQuery Mobile 作为前端。

# python - Python NumPy：引用列

> ID：14658945
> 
> 赞同：2
> 
> 时间：2013-02-02T05:29:47.473
> 
> 标签：python, numpy

为什么是`array1[:][1] != array1[:,1]`？

例如：

```
array1 = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
array1[1] ## Output: array([4,5,6]) as expected
array1[:,1] ## Output: array([2, 5, 8]) as expected
array1[:][1] ## Output: array([4,5,6]) which isn't what I expected! 
```

使用双括号引用时，`array1[:]`组件是否首先执行返回完整`2D`数组？因此`array1[:][1] == array1[1]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:44:33.020

NumPy 将解释`a[:]`为数组的副本而不是“行”集。基本切片仅类似于连续切片，直到`:`出现条目。来自文档（第 1.4 节 - 索引）：

> 在切片元组中具有多个 non-: 条目的基本切片，就像使用单个 non-: 条目重复应用切片一样，其中 non-: 条目被连续获取（所有其他 non-: 条目被替换为:) . 因此，`x[ind1,...,ind2,:]`就像`x[ind1][...,ind2,:]`在基本切片下一样。

`:`处理条目时存在隐含的复杂性。

# iphone - 如何根据宽度调整 UIWebView 的所有内容的大小？

> ID：14658950
> 
> 赞同：0
> 
> 时间：2013-02-02T05:30:17.657
> 
> 标签：iphone, ios, objective-c, uiview, uiwebview

我正在制作一个应用程序，其中我从 web 服务获取一些 html 数据，并在 UIWebView 中显示该数据。我已经修复了 UIWebView "310" 的宽度，但有时数据没有出现在这个框架中，并且数据是从边缘剪掉的。我正在从网络接收这些数据 -

NSString *resul=@"`<div align=\"left\">As stated Please give a&nbsp;chance&nbsp;to serve you.<br></div><div align=\"left\"><br></div><div align=\"left\"><div class=\"lc\" style=\"margin: 0px; font-size: 11px; font-family: Arial, Helvetica, sans; clear: left; float: left;`**宽度：348px；**`text-align: center;\"><p style=\"text-align: justify; line-height: 14px; margin: 0px 0px 14px; padding: 0px;\"><strong>Lorem Ipsum</strong>&nbsp;is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p></div><div class=\"rc\" style=\"margin: 0px; font-size: 11px; font-family: Arial, Helvetica, sans; clear: right; float: right;`**宽度：348px；**`text-align: center;\"><h2 class=\"why\" style=\"margin: 0px; padding: 0px; font-weight: normal; font-size: 12px; height: 26px; text-align: left; background-image: url(http://www.lipsum.com/images/en/heading.gif); background-position: 0px -52px; background-repeat: no-repeat no-repeat;\"></h2><p style=\"text-align: justify; line-height: 14px; margin: 0px 0px 14px; padding: 0px;\">It is a long ehat a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).</p></div></div>` "

我知道我从网上收到 348 码的原因。所以我想问一下如何根据我们的帧大小调整它的大小。我用过 -

```
webview.autoresizingMask = UIViewAutoresizingFlexibleWidth;
webview.scalesPageToFit = YES;
webview.autoresizesSubviews=YES; 
```

但是数据显示的尺寸太小了。！[数据显示在显示小][1]

我也使用了委托方法 webViewDidFinishLoad 但没有得到正确的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:52:43.450

您可以编辑“resul”字符串......我的意思是只需更改“宽度：348px;” 到“宽度：310px；”

尝试这个：

```
NSString *str1 = [[NSString alloc] initWithFormat:@"width: 348px;"];
NSString *str2 = [[NSString alloc] initWithFormat:@"width: 310px;"];
NSRange indexrange = [resul rangeOfString:str1];
while (indexrange.length !=0) {
    [resul replaceCharactersInRange:indexrange withString:str2];
    indexrange = [resul rangeOfString:str1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:45:32.470

我有一个类似的问题。这是我的解决方案（它还包括方向变化）：

```
 float portraitRatio; 
```

在 - (void)webViewDidFinishLoad:(UIWebView*)theWebView 添加：

```
 UIScrollView *scroll = theWebView.scrollView;
 scroll.scrollEnabled = YES;
 portraitRatio = theWebView.bounds.size.width/scroll.contentSize.width;
 [self resizeOnOrientationChanged];

- (void) resizeOnOrientationChanged
{
float zoom;
if (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad) {
    //iPhone
    for (UIWebView *aWebView in openWebViewsArray) {

        [aWebView setFrame:CGRectMake(0, 30, CGRectGetWidth(self.view.frame), CGRectGetHeight(self.view.frame)-30)];
        if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation])) {
            zoom = aWebView.bounds.size.width/[webView scrollView].contentSize.width;
        }
        else {
            zoom = portraitRatio;
        }
        NSString *jsCommand = [NSString stringWithFormat:@"document.body.style.zoom = %f;",zoom];
        [aWebView stringByEvaluatingJavaScriptFromString:jsCommand];
    }
    [self.webView setFrame:CGRectMake(0, 30, CGRectGetWidth(self.view.frame), CGRectGetHeight(self.view.frame)-30)];
    if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation])) {
        zoom = self.webView.bounds.size.width/[self.webView scrollView].contentSize.width;
    }
    else {
        zoom = portraitRatio;
    }
    NSString *jsCommand = [NSString stringWithFormat:@"document.body.style.zoom = %f;",zoom];
    [self.webView stringByEvaluatingJavaScriptFromString:jsCommand];
}
else {
    for (UIWebView *aWebView in openWebViewsArray) {

        [aWebView setFrame:CGRectMake(0, 60, CGRectGetWidth(self.view.frame), CGRectGetHeight(self.view.frame)-60)];
        if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation])) {
            zoom = aWebView.bounds.size.width/[webView scrollView].contentSize.width;
        }
        else {
            zoom = portraitRatio;
        }
        NSString *jsCommand = [NSString stringWithFormat:@"document.body.style.zoom = %f;",zoom];
        [aWebView stringByEvaluatingJavaScriptFromString:jsCommand];
    }
    [self.webView setFrame:CGRectMake(0, 60, CGRectGetWidth(self.view.frame), CGRectGetHeight(self.view.frame)-60)];
    if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation])) {
        zoom = self.webView.bounds.size.width/[self.webView scrollView].contentSize.width;
    }
    else {
        zoom = portraitRatio;
    }
    NSString *jsCommand = [NSString stringWithFormat:@"document.body.style.zoom = %f;",zoom];
    [self.webView stringByEvaluatingJavaScriptFromString:jsCommand];
} 
```

}

# java - 在java中实现kruskals算法

> ID：14658951
> 
> 赞同：1
> 
> 时间：2013-02-02T05:30:38.193
> 
> 标签：java, minimum-spanning-tree, kruskals-algorithm

我能够为某些输入运行此代码。但在某些情况下，我得到了错误的生成树。例如：如果我在执行程序时输入如下：

输入顶点数：5 输入边数：8

```
 Enter the vertices and the weight of edge 1:
    1
    3
    10

 Enter the vertices and the weight of edge 2:
1
4
100
 Enter the vertices and the weight of edge 3:
3
5
64
 Enter the vertices and the weight of edge 4:
1
2
13
 Enter the vertices and the weight of edge 5:
3
2
20
 Enter the vertices and the weight of edge 6:
2
5
5
 Enter the vertices and the weight of edge 7:
4
3
80
 Enter the vertices and the weight of edge 8:
4
5
40
MINIMUM SPANNING TREE :
2-5
1-3
4-5
MINIMUM COST = 55

expected o/p :

 MINIMUM SPANNING TREE :
    2-5
    1-3
    1-2
    4-5
    MINIMUM COST = 68 
```

请帮我纠正我的错误...请告诉我我在代码中所做的更改..请

代码如下：

```
import java.io.*;  
class Edge
{
 int v1,v2,wt;   // wt is the weight of the edge
}
class kruskalsalgo
{
public static void main(String args[])throws IOException 
{ 
int i,j,mincost=0;
BufferedReader br=new BufferedReader( new InputStreamReader(System.in));
System.out.println(" Enter no.of vertices:");
int v=Integer.parseInt(br.readLine());
System.out.println(" Enter no.of edges:");
int e=Integer.parseInt(br.readLine());
 Edge ed[]=new Edge[e+1];
for(i=1;i<=e;i++)
{
 ed[i]=new Edge();
 System.out.println(" Enter the vertices and the weight of edge "+(i)+ ":"); 
 ed[i].v1=Integer.parseInt(br.readLine());
 ed[i].v2=Integer.parseInt(br.readLine());
 ed[i].wt=Integer.parseInt(br.readLine());
}
for(i=1;i<=e;i++)      // sorting the edges in ascending order
 for(j=1;j<=e-1;j++)
{
 if(ed[j].wt>ed[j+1].wt)
 {
   Edge t=new Edge();
    t=ed[j];
    ed[j]=ed[j+1];
    ed[j+1]=t;
}
}

int visited[]=new int[v+1];       // array to check whether the vertex is visited or not
for(i=1;i<=v;i++)
 visited[i]=0;
System.out.println("MINIMUM SPANNING TREE :");

for(i=1;i<=e;i++)
{ 
 if(i>v)
  break;
else if( visited[ed[i].v1]==0 || visited[ed[i].v2]==0)
 {
    System.out.println(ed[i].v1+ "-"+ ed[i].v2);
    visited[ed[i].v1]=visited[ed[i].v2]=1;
    mincost+=ed[i].wt;
 }
}
System.out.println("MINIMUM COST = " +mincost);
}
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-02T10:04:25.297

您应该参考实际算法：[http](http://en.wikipedia.org/wiki/Kruskal%27s_algorithm) ://en.wikipedia.org/wiki/Kruskal%27s_algorithm 您在代码中犯了一些错误。为简单起见，您可能需要定义您的

```
Edge class something like this:

class Edge implements Comparable<Edge>
{
    int v1,v2,wt; 

    Edge(int v1, int v2, int wt)
    {
        this.v1=v1;
        this.v2=v2;
        this.wt=wt;
    }

    @Override
    public int compareTo(Edge o) {
        Edge e1 = (Edge)o;
        if(e1.wt==this.wt)
            return 0;
        return e1.wt < this.wt ? 1 : -1;
    }

    @Override
    public String toString()
    {
        return String.format("Vertex1:%d \t Vertex2:%d \t Cost:%d\n", v1,v2,wt);

    }
} 
```

这里扩展可比较，因此您可以在边缘使用 java Collections.sort()，它会为您升序排序，并覆盖 toString()，以便您可以将其用于打印并帮助调试。

在您访问过的数组中，您只是检查您是否曾经访问过它，但这不是制作最小生成树的标准。例如，在您的输入中，我可以选择边 {1,2,5}、{2,5,5}、{4,5,40}，它们会访问每个顶点一次，但不会为您提供最小生成树。

该算法首先说要制作一片树林。这意味着您应该为每个顶点创建一个仅将其自身作为成员的集合。像这样的东西：

```
HashMap<Integer,Set<Integer>> forest = new HashMap<Integer,Set<Integer>>();
for(Integer vertex : vertices)
{
        //Each set stores the known vertices reachable from this vertex
        //initialize with it self.
    Set<Integer> vs = new HashSet<Integer>();
    vs.add(vertex);
    forest.put(vertex, vs);
} 
```

现在迭代你的边缘。对它们进行排序很好，因为您可以将其用作堆栈，因此弹出直到找到最小树或用完边缘为止。对于每条边，您要合并由边连接的 2 个顶点的可达顶点集。如果构成边的 2 个顶点的可达顶点集相同，则不要合并，因为它将形成一个循环。如果他们不这样做，请将边缘添加到您的最小树中。找到包含所有顶点的集合后停止。在代码中，它看起来像这样：

```
//sort your edges, you should use existing functionality where possible, saves testing needed
//here edges is your Stack, pop until minimum spanning tree is found.
Collections.sort(edges);
ArrayList<Edge> minSpanTree = new ArrayList<Edge>();
while(true) //while you haven't visited all the vertices at least once
{
    Edge check = edges.remove(0);//pop

    Set<Integer> visited1 = forest.get(check.v1);
    Set<Integer> visited2 = forest.get(check.v2);
    if(visited1.equals(visited2))
        continue;
    minSpanTree.add(check);
    visited1.addAll(visited2);
    for(Integer i : visited1)
    {
        forest.put(i, visited1);
    }
    if(visited1.size()==vertices.length)
        break;
} 
```

所以对于以下输入：

输入：[Vertex1:2 Vertex2:5 Cost:5 , Vertex1:1 Vertex2:3 Cost:10 , Vertex1:1 Vertex2:2 Cost:13 , Vertex1:3 Vertex2:2 Cost:20 , Vertex1:4 Vertex2:5 Cost :40 , Vertex1:3 Vertex2:5 Cost:64 , Vertex1:4 Vertex2:3 Cost:80 , Vertex1:1 Vertex2:4 Cost:100]

你得到最小跨度树： 输出： [Vertex1:2 Vertex2:5 Cost:5 , Vertex1:1 Vertex2:3 Cost:10 , Vertex1:1 Vertex2:2 Cost:13 , Vertex1:3 Vertex2:2 Cost:20 ,顶点1：4顶点2：5成本：40]

-尼鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-02T06:03:55.437

当您的图形存储为边列表时，这是 Kruskal 算法在 Java 中的正确实现。为了使 Kruskal 算法正常工作，您需要一个称为[联合查找](https://en.wikipedia.org/wiki/Disjoint-set_data_structure)（也称为不相交集）的数据结构，它支持快速将集合统一在一起。该算法首先按权重按升序对所有边进行排序，然后将不属于同一节点组的节点连接在一起。这背后的想法是，如果两个节点属于同一个组，那么包括当前边会在我们的最小生成树中导致一个循环，这是不允许的。我希望这有助于查看下面的代码，它有据可查。

代码取自我的[Github 算法](https://github.com/williamfiset/Algorithms)仓库。

```
/**
 * An implementation of Kruskal's MST algorithm using an edge list.
 * @author William Fiset
 **/

// Union find data structure 
class UnionFind {

  private int[] id, sz;

  public UnionFind(int n) {
    id = new int[n];
    sz = new int[n];
    for (int i = 0; i < n; i++) {
      id[i] = i;
      sz[i] = 1;
    }
  }

  public int find(int p) {
    int root = p;
    while (root != id[root])
      root = id[root];
    while (p != root) { // Do path compression
      int next = id[p];
      id[p] = root;
      p = next;
    }
    return root;
  }

  public boolean connected(int p, int q) {
    return find(p) == find(q);
  }

  public int size(int p) {
    return sz[find(p)];
  }

  public void union(int p, int q) {
    int root1 = find(p);
    int root2 = find(q);
    if (root1 == root2) return;
    if (sz[root1] < sz[root2]) {
      sz[root2] += sz[root1];
      id[root1] = root2;
    } else {
      sz[root1] += sz[root2];
      id[root2] = root1;
    }
  }

}

class Edge implements Comparable <Edge> {
  int from, to, cost;
  public Edge(int from, int to, int cost) {
    this.from = from;
    this.to = to;
    this.cost = cost;
  }
  @Override public int compareTo(Edge other) {
    return cost - other.cost;
  }
}

public class KruskalsEdgeList {

  // Given a graph represented as an edge list this method finds
  // the Minimum Spanning Tree (MST) cost if there exists 
  // a MST, otherwise it returns null.
  static Long kruskals(Edge[] edges, int n) {

    if (edges == null) return null;

    long sum = 0L;
    java.util.Arrays.sort(edges);
    UnionFind uf = new UnionFind(n);

    for (Edge edge : edges) {

      // Skip this edge to avoid creating a cycle in MST
      if (uf.connected(edge.from, edge.to))
        continue;

      // Include this edge
      uf.union(edge.from, edge.to);
      sum += edge.cost;

      // Optimization to stop early if we found
      // a MST that includes all the nodes
      if (uf.size(0) == n) break;

    }

    // Make sure we have a MST that includes all the nodes
    if (uf.size(0) != n) return null;

    return sum;

  }

} 
```

# mysql - 用其他行的 SUM() 和 COUNT() 更新一行

> ID：14658953
> 
> 赞同：2
> 
> 时间：2013-02-02T05:31:04.823
> 
> 标签：mysql, sql, sql-update, mysql-error-1111

想象一下两个表，例如：

```
t1: id, sum, cnt 
t2: id, id_t1, value 
```

我想做这样的查询；

```
UPDATE t1, t2 
   SET t1.sum = SUM(t2.value), 
       t1.cnt = COUNT(*) 
 WHERE t1.id = t2.id_t1; 
```

查询应该使用where`t1.sum`的值的总和以及there的行数进行更新。`t2``t1.id=t2.id_t1``t1.count``t1.id=t2.id_t1`

但失败并返回错误：`ER_INVALID_GROUP_FUNC_USE: Invalid use of group function`

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T05:34:34.490

```
UPDATE  t1 a
        LEFT JOIN 
        (
            SELECT  id_t1, 
                    SUM(value) totalSum,
                    COUNT(*) totalCount
            FROM    t2
            GROUP BY id_t1
        ) b ON   a.ID = b.id_t1
SET a.sum = COALESCE(b.totalSum, 0) ,
    a.cnt = COALESCE(b.totalCount, 0) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/710b5/1)

# android - 在Android ListView中用箭头显示地点的方向

> ID：14658959
> 
> 赞同：12
> 
> 时间：2013-02-02T05:32:48.963
> 
> 标签：android, location, android-sensors

我需要显示 Android 中某些地方的列表`ListView`以及那个地方的方向。我可以通过找到位置之间的角度来做到这一点，但问题是我的客户需要在设备旋转或移动时旋转箭头。我没有找到任何可以根据传感器更改旋转箭头的解决方案。他们中的任何一个都满足这样的要求吗？请向我建议一些解决方案，以使列表在此[iPhone App](https://itunes.apple.com/us/app/placesnearme/id596013919?ls=1&mt=8)中显示为这样。或查看下图。

**更新：**

我期待任何答案，以便有助于启动以下要求。即使单独显示箭头也是受欢迎的，因此我将尝试实现以下目标。我所做的所有样品都在摇晃，并且不稳定。

![在此处输入图像描述](../Images/739387e6fd91c986ff4c17cff9baf092.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:47:04.713

在您的传感器更改事件处理程序中，调用`ListView.invalidateViews()`. 这将导致 ListView 中的所有现有视图重绘。因此，如果您目前可以正确绘制列表并根据需要从传感器获取事件，那么添加此调用应该可以获得您想要的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T05:08:02.330

让您的适配器保存一组对象，其中包含您想要在每个列表项上的所有信息，包括用于箭头旋转的浮点值。

```
public class Place {
 private Srting name;
 private double distance;
 private float arrowAngle;

//-- etc etc-- 
```

覆盖适配器`getView()`，设置箭头视图的旋转：

```
@Override
public View getView(View currentView, int position, ViewGroup parent){
  //--inflate layout for each row, find views, set values etc etc--

  Place p = getItem(position);
  arrowView.setRotation(p.getArrowAngle());

 //--return inflated view --
} 
```

在传感器更改时，计算每个箭头的新角度，并更新适配器中的每个数据对象。

```
for (int i = 0 ; i < adapter.getCount(); i++){
    Place p = adapter.getItem(i);

   //--calculate angle--

   p.setArrowAngle(newAngle);
}

adapter.notifyDataSetChanged(); 
```

这样做可以，但是传感器可能变化很快，ListView数据更新过多会导致ListView滞后，限制更新，声明一个`long`变量`lastUpdated`，在传感器变化时查看是否`System.nanoTime() - lastupdated > 500`，然后只调用上面的更新代码。这会将更新限制为 500 毫秒的间隔。

# r - 在一个数据帧中进行多次线性回归计算

> ID：14658961
> 
> 赞同：1
> 
> 时间：2013-02-02T05:33:13.727
> 
> 标签：r, statistics, linear-regression

我正在使用 R 来评估气候数据，并且我有一个看起来像以下小型化版本的数据集......请原谅我粗鲁的发布礼仪，我希望这篇文章可以理解。

```
[0][STA.NAME] [YEAR] [SUM.CDD]  
1 NAME1 1967    760  
2 NAME1 1985    800  
3 NAME1 1996    740  
4 NAME1 2003    810  
5 NAME1 2011    790  
6 NAME2 1967    700  
7 NAME2 1985    690  
8 NAME2 1996    850  
9 NAME2 2003    790  
10 NAME3    1967    760  
11 NAME3    1985    800  
12 NAME3    1990    740  
13 NAME3    1996    810  
14 NAME3    2003    790  
15 NAME3    2011    800 
```

我正在尝试用这个返回一个新的 DF

```
[STA.NAME] [Eq'n of trend]  
NAME1  (y = mx + b)  
NAME2  (y = mx + b) 
```

ETC...

最终，我将需要计算趋势的方差以及数据的总方差，并希望最终将它们附加到这个结果数据集中，例如......

```
[STA.NAME] [TREND] [VAR.TREND] [VAR.DATA]   
with values in rows, 1 for each STA.NAME... 
```

非常感谢任何帮助，如果有比 lm() 更好的方法，我目前对此感到困惑，我也会感兴趣。

非常感谢，

杰西

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T05:39:45.153

这是一个简单的解决方案，使用`ddply()`from`plyr`返回每个组的系数：

首先复制数据：

```
x <- read.table(text="
STA.NAME YEAR SUM.CDD  
1 NAME1 1967    760  
2 NAME1 1985    800  
3 NAME1 1996    740  
4 NAME1 2003    810  
5 NAME1 2011    790  
6 NAME2 1967    700  
7 NAME2 1985    690  
8 NAME2 1996    850  
9 NAME2 2003    790  
10 NAME3    1967    760  
11 NAME3    1985    800  
12 NAME3    1990    740  
13 NAME3    1996    810  
14 NAME3    2003    790  
15 NAME3    2011    800  ", header=TRUE) 
```

现在进行建模：

```
library(plyr)
ddply(x, .(STA.NAME), function(z)coef(lm(SUM.CDD ~ YEAR, data=z)))

  STA.NAME (Intercept)      YEAR
1    NAME1   -444.8361 0.6147541
2    NAME2  -6339.2047 3.5702200
3    NAME3   -995.2381 0.8928571 
```

* * *

现在，根据您想要做什么，创建一个数据模型可能更简单（也可能更有意义）：

```
fit <- lm(SUM.CDD ~ YEAR + STA.NAME, data=x) 
```

获取摘要：

```
summary(fit)

Call:
lm(formula = SUM.CDD ~ YEAR + STA.NAME, data = x)

Residuals:
   Min     1Q Median     3Q    Max 
-63.57 -22.21  10.72  18.62  80.72 

Coefficients:
                Estimate Std. Error t value Pr(>|t|)  
(Intercept)   -2065.6401  1463.5353  -1.411   0.1858  
YEAR              1.4282     0.7345   1.945   0.0778 .
STA.NAMENAME2   -15.8586    27.5835  -0.575   0.5769  
STA.NAMENAME3     3.9046    24.7089   0.158   0.8773  
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 40.8 on 11 degrees of freedom
Multiple R-squared: 0.3056, Adjusted R-squared: 0.1162 
F-statistic: 1.614 on 3 and 11 DF,  p-value: 0.2424 
```

只提取系数：

```
coef(fit)
  (Intercept)          YEAR STA.NAMENAME2 STA.NAMENAME3 
 -2065.640078      1.428247    -15.858650      3.904632 
```

* * *

最后，您可能希望使用交互项拟合模型。此模型为您提供与原始解决方案有效相同的结果`plyr`。根据您的数据和目标，这可能是执行此操作的方法：

```
fit <- lm(SUM.CDD ~ YEAR * STA.NAME, data=x)
summary(fit)

Call:
lm(formula = SUM.CDD ~ YEAR * STA.NAME, data = x)

Residuals:
    Min      1Q  Median      3Q     Max 
-57.682 -13.166  -1.012  23.006  63.046 

Coefficients:
                     Estimate Std. Error t value Pr(>|t|)
(Intercept)         -444.8361  2280.7464  -0.195    0.850
YEAR                   0.6148     1.1447   0.537    0.604
STA.NAMENAME2      -5894.3687  3661.9795  -1.610    0.142
STA.NAMENAME3       -550.4020  3221.8390  -0.171    0.868
YEAR:STA.NAMENAME2     2.9555     1.8406   1.606    0.143
YEAR:STA.NAMENAME3     0.2781     1.6172   0.172    0.867

Residual standard error: 39.17 on 9 degrees of freedom
Multiple R-squared: 0.4763, Adjusted R-squared: 0.1854 
F-statistic: 1.637 on 5 and 9 DF,  p-value: 0.2451 
```

# php - 如何比较三个表产品？

> ID：14658963
> 
> 赞同：-1
> 
> 时间：2013-02-02T05:33:16.827
> 
> 标签：php, mysql, database, amazon-web-services, commission-junction

我正在使用 3 API（Linkshare、commission junction 和 amazon）开发一个价格比较网站。在数据库中，表字段彼此不相关。但产品名称与其他表类似。

第 1 步：我想合并所有三个表并显示在单个表中。这可能吗？

第二步：对比三张表，在前端列出产品。

注意：我在三个表中的主键是：commission junction: SKU Amazon:aid LinkShare:SKUNUMBER

这是我的数据库结构。 ![在此处输入图像描述](../Images/9a513bee4afd5821cf3cc4d20b562ad2.png)

我的 3API 表 DDL 结构。亚马逊表结构

```
CREATE TABLE `amazon` ( `aid` bigint(20) NOT NULL AUTO_INCREMENT, `network` varchar(230) NOT NULL, `merchant_id` varchar(250) NOT NULL, `merchant_name` varchar(250) NOT NULL, `merchant_logo` mediumtext NOT NULL, `name` varchar(250) NOT NULL, `brand` varchar(250) NOT NULL, `asin` varchar(250) NOT NULL, `upc` varchar(150) NOT NULL, `ean` varchar(300) NOT NULL,
 `image` mediumtext NOT NULL, `description` text NOT NULL, `url` mediumtext NOT NULL, `price` decimal(10,0) NOT NULL, `listprice` decimal(10,0) NOT NULL, `lowest_usedprice` decimal(10,0) NOT NULL, `shipping` varchar(130) NOT NULL, `currency` varchar(5) NOT NULL, `search_keyword` text NOT NULL, `search_maxprice` varchar(230) NOT NULL, `search_minprice` varchar(230) NOT NULL, `date` datetime NOT NULL, `catagory` varchar(255) NOT NULL, PRIMARY KEY (`aid`)) ENGINE=InnoDB AUTO_INCREMENT=68 DEFAULT CHARSET=latin1 
```

委员会结点的表结构。

```
CREATE TABLE `cjfeeds` ( `PROGRAMNAME` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `PROGRAMURL` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `CATALOGNAME` varchar(130) COLLATE utf8_unicode_ci DEFAULT NULL, `LASTUPDATED` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `NAME` varchar(160) COLLATE utf8_unicode_ci DEFAULT NULL, `KEYWORDS` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `DESCRIPTION` varchar(3000) COLLATE utf8_unicode_ci DEFAULT NULL, `SKU` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT '', `MANUFACTURER` varchar(160) COLLATE utf8_unicode_ci DEFAULT NULL, `MANUFACTURERID` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL, `UPC` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `ISBN` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
 `CURRENCY` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL, `SALEPRICE` decimal(10,2) DEFAULT NULL, `PRICE` decimal(10,2) DEFAULT NULL, `RETAILPRICE` decimal(10,2) DEFAULT NULL,
 `FROMPRICE` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL, `BUYURL` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL, `IMPRESSIONURL` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `IMAGEURL` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `ADVERTISERCATEGORY` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `THIRDPARTYID` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL, `THIRDPARTYCATEGORY` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `AUTHOR` varchar(130) COLLATE utf8_unicode_ci DEFAULT NULL, `ARTIST` varchar(130) COLLATE utf8_unicode_ci DEFAULT NULL, `TITLE` varchar(130) COLLATE utf8_unicode_ci DEFAULT NULL, `PUBLISHER` varchar(130) COLLATE utf8_unicode_ci DEFAULT NULL, `LABEL` varchar(130) COLLATE utf8_unicode_ci DEFAULT NULL, `FORMAT` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL, `SPECIAL` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL, `GIFT` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL, `PROMOTIONALTEXT` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `STARTDATE` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `ENDDATE` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
 `OFFLINE` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL, `ONLINE` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL, `INSTOCK` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL,
 `CONDITION` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL, `WARRANTY` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL, `STANDARDSHIPPINGCOST` decimal(10,2) DEFAULT NULL, PRIMARY KEY (`SKU`)) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

链接共享的表结构：

```
CREATE TABLE `linkshare` ( `PRODUCTID` int(100) unsigned NOT NULL, `PRODUCTNAME` varchar(255) NOT NULL, `SKUNUMBER` varchar(200) NOT NULL, `PRIMARYCATAGRY` varchar(255) NOT NULL, `SECONDARYCATAGRY` varchar(2000) NOT NULL, `PRODUCTURL` varchar(2000) NOT NULL, `PRODUCTIMAGEURL` varchar(2000) NOT NULL, `BUYURL` varchar(2000) NOT NULL, `SHORTPRODUCTDESCRIPTION` varchar(2000) NOT NULL, `LONGPRODUCTDESCRIPTION` varchar(2000) NOT NULL, `DISCOUNT` float(8,2) unsigned NOT NULL,
 `DISCOUNTTYPE` varchar(255) NOT NULL, `SALEPRICE` float(8,2) unsigned NOT NULL, `RETAILPRICE` float(8,2) unsigned NOT NULL,
 `BEGINDATE` datetime NOT NULL, `ENDDATE` datetime NOT NULL, `BRAND` varchar(255) NOT NULL, `SHIPPING` int(255) unsigned NOT NULL, `KEYWORDS` varchar(500) NOT NULL, `MANUFACTURERPART` varchar(100) NOT NULL, `MANUFACTURERNAME` varchar(250) NOT NULL,
 `SHIPPINGINFORMATION` varchar(50) NOT NULL, `AVAILABLITY` varchar(50) NOT NULL, `UNIVERSALPRODUCTCODE` varchar(15) NOT NULL,
 `CLASSID` float(8,2) unsigned NOT NULL, `CURRENCY` varchar(3) NOT NULL, `M1` varchar(2000) NOT NULL, `PIXEL` varchar(255) NOT NULL, `MISCELLANEOUSATTRIBUTE` varchar(255) NOT NULL, `ATTRIBUTE1` varchar(255) NOT NULL, `ATTRIBUTE2` varchar(255) NOT NULL, `ATTRIBUTE3` varchar(255) NOT NULL, `ATTRIBUTE4` varchar(255) NOT NULL, `ATTRIBUTE5` varchar(255) NOT NULL, ATTRIBUTE6` varchar(255) NOT NULL, `ATTRIBUTE7` varchar(255) NOT NULL, `ATTRIBUTE8` varchar(255) NOT NULL, `ATTRIBUTE9` varchar(255) NOT NULL, `ATTRIBUTE10` varchar(255) NOT NULL, UNIQUE KEY `PRODUCTID` (`PRODUCTID`)) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

我该如何解决这个问题，请给我一个有用的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:11:32.397

如果您在这些表之间没有任何关系但您有相同的数据列，那么丑陋的做法是`UNION`...... 正如您所提到`product names`的，这是一个常见的列...

```
Select product_name from t1
Union
Select product_name from t2
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:16:34.173

对您来说最好的方法是一个存储过程，它：

1.  创建临时表进行比较：

    ```
    DROP TABLE IF EXISTS comparison_table;

    CREATE TEMPORARY TABLE `comparison_table` (
        `id` BIGINT NOT NULL AUTO_INCREMENT COMMENT 'Primary key',
        `name` VARCHAR(255) NOT NULL COMMENT 'Product name',
        `origin` VARCHAR(10) NOT NULL COMMENT 'Original website id, i.e. AZ, LS, CJ',
        `sku` VARCHAR(10) NOT NULL COMMENT 'SKU on the original website',
        `price` FLOAT NOT NULL COMMENT 'Price on the original website',
        PRIMARY KEY (`id`)
    ); 
    ```

2.  使用原始 3 个表中的数据填充此表：

    ```
    INSERT INTO `comparison_table` (`name`, `origin`, `sku`, `price`)
    SELECT `az`.`name`, 'AZ', `az`.`aid`, `az`.`price`
    FROM `amazon` `az`
    WHERE `az`.`name` IS NOT NULL AND `az`.`aid` IS NOT NULL AND `az`.`price` IS NOT NULL;

    INSERT INTO `comparison_table` (`name`, `origin`, `sku`, `price`)
    SELECT `cj`.`name`, 'CJ', `cj`.`sku`, `cj`.`price`
    FROM `cjfeeds` `cj`
    WHERE `cj`.`name` IS NOT NULL AND `cj`.`sku` IS NOT NULL AND `cj`.`price` IS NOT NULL;

    INSERT INTO `comparison_table` (`name`, `origin`, `sku`, `price`)
    SELECT `ls`.`productname`, 'LS', `ls`.`skunumber`, `ls`.`retailprice`
    FROM `linkshare` `ls`
    WHERE `ls`.`productname` IS NOT NULL AND `ls`.`skunumber` IS NOT NULL AND `ls`.`retailprice` IS NOT NULL; 
    ```

结果，您将获得包含所有有趣数据的临时表。这个表就像一个缓存，每次你接触任何原始表时都应该更新。

然后，您只需从中选择任何您想要的内容，并通过和`comparison_table`加入必要的原始表格。例如：`origin``sku`

```
SELECT `ct`.`id`, `ct`.`name`, `ct`.`price`, 
    CASE `ct`.`origin` 
        WHEN 'AZ' THEN `az`.`impressionurl`
        WHEN 'CJ' THEN `cj`.`url`
        WHEN 'LS' THEN `ls`.`producturl`
    END `url`
FROM `comparison_table` `ct`
LEFT JOIN `amazon` `az` ON (`ct`.`origin` = 'AZ' AND `ct`.`sku` = `az`.`aid`)
LEFT JOIN `cjfeeds` `cj` ON (`ct`.`origin` = 'CJ' AND `ct`.`sku` = `cj`.`sku`)
LEFT JOIN `linkshare` `ls` ON (`ct`.`origin` = 'LS' AND `ct`.`sku` = `ls`.`skunumber`)
WHERE `ct`.`name` = 'YOUR PRODUCT NAME'
ORDER BY `ct`.`price` 
```

# iphone - 在 IOS 的 keychainWrapper 中存储 NSArray 或 NSDictionary

> ID：14658965
> 
> 赞同：3
> 
> 时间：2013-02-02T05:33:29.033
> 
> 标签：iphone, ios, objective-c, ipad

[keychainWrapper](https://developer.apple.com/library/content/documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)提供了存储 a `NSString`（如密码）的机制。

我也可以存储`NSArray`或存储`NSDictionary`吗`keychainWrapper`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T05:45:43.047

您可以使用`NSKeyedArchiver`and `NSKeyedUnarchiver`，如果您在字典数组中存储了自定义对象，请确保该类实现了`NSCoding`协议。

```
NSData * encodedData = [NSKeyedArchiver archivedDataWithRootObject:array]; 
```

然后，您可以使用 base64 编码将 NSData 转换为 NSString [http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)

对于取消归档，它只是倒退，使用`NSData`从 base64获取`NSString`并使用 unarchiver

```
NSArray *array = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

# javascript - 如何在 url 引用脚本中添加 5 秒等待？

> ID：14658971
> 
> 赞同：4
> 
> 时间：2013-02-02T05:33:54.397
> 
> 标签：javascript

我有 url 重定向脚本或 url 引用脚本。
我想添加 5 秒等待，然后 url 重定向到所需的 url。

```
 <script>
 var url_index = window.location.href.indexOf('url=');
 if (url_index != -1)
 {
    url_go = window.location.href;
    url_go = url_go.substring(url_index + 4);
    //document.write(url_go);
    window.location.href = url_go;
 }
 var $_ = function(x){if(!document.getElementById){return;} else{ return document.getElementById(x);}}
 </script> 
```

输出是 [http://transistortechnology.blogspot.com](http://transistortechnology.blogspot.com)？**网址= [http://imgur.com](http://imgur.com)**

当我打开上面的 url 然后它突然重定向，但我想添加 5 秒等待。

是否可以在上面的脚本代码中。

我把那个脚本放在博客标题部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:39:12.873

请参阅：[Javascript - 在执行下一行之前等待 5 秒](https://stackoverflow.com/questions/14226803/javascript-wait-5-seconds-before-executing-next-line)
基于此，以下内容可能会起作用：

```
 `url_go = ""
 function doRefer() {
     var url_index = window.location.href.indexOf('url=');
     if (url_index != -1)
     {
        url_go = window.location.href;
        url_go = url_go.substring(url_index + 4);
        setTimeout(function () {window.location.href = url_go;}, 5000);
     }
 }`
```

 `* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-29T05:36:14.033

```
<script>
   var count = 15; // Number of seconds to wait
   var counter; // Handle for the countdown event.

   function start() {
    counter = setInterval(timer, 1000);
   }

   function timer() {
    // Show the number of remaining seconds on the web page.
    var output = document.getElementById("displaySeconds");
    output.innerHTML = count;

    // Decrease the remaining number of seconds by one.
    count--;

    // Check if the counter has reached zero.
    if (count < 0) { // If the counter has reached zero...
     // Stop the counter.
     clearInterval(counter);

     // Start the download.
     window.location.href = "URL to open";
//if you want to open in new window then use window.open(url);
     return;
    }
   }  

   window.addEventListener("load", start, false);
  </script>

  <div>
  Your download will begin in <span id="displaySeconds">15</span> seconds.<br />
</div> 
```

感谢 technovedant 提供这个脚本。我在他的博客上找到了这个`

# css - CSS 选择器中的 OR 语句

> ID：14658977
> 
> 赞同：5
> 
> 时间：2013-02-02T05:34:50.940
> 
> 标签：css, css-selectors

有人可能会使用 CSS 选择器`a[href^="http:"], a[href^="mailto:"]`来匹配文档中的所有外部链接和邮件链接，但是有没有办法在选择器的引号部分中使用“或”语句，如下所示`a[href^="(http|mailto):"]`：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T06:10:41.913

据我所知，没有办法按照你的要求去做。在 CSS 选择器规范中，管道字符在与属性选择器一起使用时用于不同的用途。它用作命名空间分隔符。

根据 W3C 上的选择器规范：

> 属性选择器中的属性名称作为 CSS 限定名称给出：先前已声明的名称空间前缀可以添加到由名称空间分隔符“竖线”(|) 分隔的属性名称之前。为了与 XML 建议中的命名空间保持一致，默认命名空间不适用于属性，因此没有命名空间组件的属性选择器仅适用于没有命名空间的属性（相当于“|attr”；这些属性被称为“每个元素类型的命名空间分区”）。星号可用于命名空间前缀，表示选择器将匹配所有属性名称，而不考虑属性的命名空间。

```
CSS examples:

@namespace foo "http://www.example.com";
[foo|att=val] { color: blue }
[*|att] { color: yellow }
[|att] { color: green }
[att] { color: green } 
```

> 第一条规则将仅匹配“ [http://www.example.com](http://www.example.com) ”命名空间中属性 att 且值为“val”的元素。
> 
> 第二条规则将只匹配具有属性 att 的元素，而不考虑属性的命名空间（包括无命名空间）。
> 
> 最后两个规则是等效的，并且将仅匹配具有属性 att 的元素，其中该属性不在命名空间中。

资料来源：[http ://www.w3.org/TR/selectors/#attrnmsp](http://www.w3.org/TR/selectors/#attrnmsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:28:23.813

我正在检查 CSS 选择器语法，但似乎唯一的方法是使用逗号分隔符：

```
selectors_group
  : selector [ COMMA S* selector ]* 
```

此外，这些是一些相关的词汇规则：

```
{w}"+"           return PLUS;
{w}">"           return GREATER;
{w}","           return COMMA;
{w}"~"           return TILDE; 
```

没有**AND**或**OR**规则，但我注意到的一件事是它们有否定：

```
"{N}{O}{T}"("  return NOT;) 
```

[http://www.w3.org/TR/selectors/#w3cselgrammar](http://www.w3.org/TR/selectors/#w3cselgrammar)

# android - 如何在特定时间段内开始录音

> ID：14658981
> 
> 赞同：-3
> 
> 时间：2013-02-02T05:36:23.080
> 
> 标签：android

作为 android 的新手，并且需要在特定时间段内开始录音，时间将通过用户选择的按钮单击获得时间将设置并开始录制。android中是否有任何内容。小小帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:04:24.560

**编辑**

如果我没有再次误读，请查看[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)。创建记录器实例后，运行以下代码

```
new Timer().schedule(new TimerTask() {

            @Override
            public void run() {
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() 
                    {
                        recorder.stop();
                        recorder.reset();
                        recorder.release();
                    }
                });

            }
}, longDelayInMilliseconds); 
```

**编辑前回答**

我认为[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)是您正在寻找的。正如概述中所说

> 允许您安排您的应用程序在未来某个时间点运行

看看这些线程和博客条目。

[在特定时间启动应用程序](https://stackoverflow.com/questions/4452565/start-app-at-a-specific-time)

[Android：如何使用警报管理器](https://stackoverflow.com/questions/1082437/android-alarmmanager)

[安排应用程序稍后启动](http://androidresearch.wordpress.com/2012/07/02/scheduling-an-application-to-start-later/)

# c - 格式化字符串中的内存泄漏，正确的空终止

> ID：14658987
> 
> 赞同：0
> 
> 时间：2013-02-02T05:37:36.463
> 
> 标签：c, char, printf, unix-ar

我想我在终止我的字符串时遇到了问题，因为我无法显示它们。我正在尝试在 C 中重新创建 unix ar 命令，并且几乎已经布置了 -v，但是现在我已经获得了权限，我似乎无法正确打印它们。

我在 perms 数组的末尾添加了一个终止字符，这有助于显示权限，但现在不想打印日期。

当我把它放在一个单独的字符串中时，日期会打印出来，但是当它与其他所有东西在组合格式字符串中时，它就会消失。

```
void verbose(char *archive){
    mode_t mode;
    size_t readNum;
    time_t mtime;
    struct tm * time_box;
    long long arch_size, file_size;
    long uID, gID;
    char header[60], file_name[16], time[21], perms[8];
    char* tokens;
    FILE *fp = fopen(archive, "r");
    if (!fp)
        fail('f');

    //get file size
    fseek(fp, 0, SEEK_END);
    arch_size = ftell(fp);
    rewind(fp);

    //move over ARMAG
    if(fseek(fp, strlen(ARMAG), SEEK_SET) != 0)
        fail ('z');

    //loop over files
    while(ftell(fp) < arch_size -1){
        //reads header into
        readNum = fread(header, 1, sizeof(header), fp);
        if(readNum != sizeof(header))
            fail('r');

        tokens = strtok(header, " ");
        strcpy(file_name, tokens);
        mtime = (time_t)(atol(tokens = strtok(NULL, " ")));
        uID = atol(tokens = strtok(NULL, " "));
        gID = atol(tokens = strtok(NULL, " "));
        mode = (mode_t)(strtoul(tokens = strtok(NULL, " "), NULL, 8));
        file_size = atoll(&header[48]);
        time_box = localtime(&mtime);
        strncpy(time, &asctime(time_box)[4], 20);

        printf("Time is %s\n", time);

        perms[0] = mode & S_IRUSR? 'r' : '-';
        perms[1] = mode & S_IWUSR? 'w' : '-';
        perms[2] = mode & S_IXUSR? 'x' : '-';
        perms[3] = mode & S_IRGRP? 'r' : '-';
        perms[4] = mode & S_IWGRP? 'w' : '-';
        perms[5] = mode & S_IXGRP? 'x' : '-';
        perms[6] = mode & S_IROTH? 'r' : '-';
        perms[7] = mode & S_IWOTH? 'w' : '-';
        perms[8] = mode & S_IXOTH? 'x' : '-';
        perms[9] = '\0';

        printf("%s"
                "\t%ld"
                "/%ld"
                "\t\t%lld "
                "%s "
                "%s\n", perms, uID, gID, file_size, time, file_name);

        //move over file
        if(fseek(fp, file_size, SEEK_CUR) != 0)
            fail ('z');
    }
    fclose(fp);
} 
```

示例输出：（偶数行也应该有时间）

```
Time is Jan 27 16:23:59 2013
rw-r--r--   502/20      28 - b.txt
Time is Jan 27 16:24:06 2013
rw-r--r--   502/20      17 - c.txt
Time is Jan 27 16:24:15 2013
rw-r--r--   502/20      28 - d.txt
Time is Jan 27 16:24:06 2013
rw-r--r--   502/20      17 - c.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T05:49:49.200

您分配`perms[8]`的大小为`8`. 因此，此选项卡的有效索引将为 [0-7]。

分配之后`perms[8] = mode & S_IXOTH? 'x' : '-';`，`perms[9] = '\0';`哪些超出了`perms`数组的边界。

您的`time`数组必须`perms`在内存中。所以`perms[8]`并表现得像你当时`perms[9]`正在影响。`time[0] = '-'``time[1] = '\0'`

`time`现在等于`-`并且 printf 正确显示它。

只需更正您的`perms[8]`声明`perms[10]`，您就会影响良好变量内存部分的值。

# java - 使用 Encog 的神经网络分类器

> ID：14658992
> 
> 赞同：3
> 
> 时间：2013-02-02T05:39:01.027
> 
> 标签：java, neural-network, encog

我是机器学习的新手，我正在开发一个使用图像对对象进行分类的 Java 应用程序。我有 40 个输入神经元和 n 个输出神经元（取决于训练数据的数量）。我使用 Encog 作为我的神经网络的框架。我能够成功地训练数据，但是当我测试网络时，它似乎并不能很好地工作。它无法正确分类对象。下面是训练部分：

```
BasicNetwork network = new BasicNetwork();
    network.addLayer(new BasicLayer(null,true,i));
    network.addLayer(new BasicLayer(new ActivationSigmoid(),true,h));
    network.addLayer(new BasicLayer(new ActivationSigmoid(),false,o));      
    network.getStructure().finalizeStructure();
    network.reset();

    // train the neural network
    final Backpropagation train = new Backpropagation(network, trainingSet, lr, 0.3);
    train.fixFlatSpot(false);

    w = new SwingWorker(){

        @Override
        protected Object doInBackground() throws Exception {            
            // learn the training set

            int epoch = 1;
            do {
                train.iteration();
                //System.out.println("Epoch #" + epoch + " Error:" + train.getError());
                epoch++;
            } while(train.getError() > me && !isStop);
            isStop = false;
        return null;
        }
    };
    w.execute(); 
```

和测试部分：

```
BasicNetwork network = (BasicNetwork) SerializeObject.load(new File("file/Weights.ser"));
    MLData input = new BasicMLData(inputCount);
    input.setData(in);
    MLData output = network.compute(input);
    for(int y = 0; y < output.size(); y++){
        System.out.println(output.getData(y));
    } 
```

训练部分有问题吗？如果我以正确的方式做事，我确实希望有人可以指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:32:33.117

你的意思是当你试图识别你训练的完全相同的数据时，你无法识别它？如果是这种情况，那么我会假设您对图像进行编码以进行测试与训练的方式存在一些差异。

如果您在与您训练的数据不同的数据上看到不好的结果，这是一个不同（且常见）的问题。这意味着训练数据可能不能代表整个问题空间。即，您使用的新数据与训练数据有很大不同，因此无法进行匹配。