# StackOverflow 问答 13716000-13716999

# vim - 让 vim 自动缩进这个语法

> ID：13716004
> 
> 赞同：1
> 
> 时间：2012-12-05T03:51:59.890
> 
> 标签：vim, indentation, auto-indent

我已经成功地让 vim 理解我的语言用于突出显示的语法，但我不确定如何让它自动正确缩进我的代码。该语言本身有点像 Lisp，但它使用方括号`[]`和圆括号`()`作为分隔符。生成的代码缩进应该是这样的：

```
[foo [bar baz] [qux
  [do a thing]
  [more doing a thing]
  [^ ()
    ; some stuff here
    [foobar]]]]
[back to here] 
```

基本上，每个未闭合的括号或圆括号应该将行缩进两个空格。关闭所述分隔符应将以下行减少相同的数量。

我已经调查过了`autoindent`，但对于我想做的事情似乎还不够，除非我遗漏了一些东西。替代方案 ,`indentexpr`似乎更有希望，但我认为我不明白如何使用它。

如何为我的语法获得一个有效的缩进系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:12:14.400

你试过`'lisp'`选项吗？它产生

```
[foo [bar baz] [qux
                 [do a thing]
                 [more doing a thing]
                 [^ ()
                    ; some stuff here
                    [foobar]]]]
[back to here] 
```

在你的例子。

您也可以构建自己的`indentexpr`. 一个非常简单的将是

```
if exists("b:did_indent")
   finish
endif
let b:did_indent = 1
if exists('*shiftwidth')
    let s:shiftwidth=function('shiftwidth')
else
    function s:shiftwidth()
        return &shiftwidth
    endfunction
endif
function! YourLangIndent(lnum)
    if a:lnum==1
        return 0
    endif
    let line=getline(a:lnum-1)
    return indent(prevnonblank(a:lnum-1))+s:shiftwidth()*(len(substitute(line, '[^[]', '', 'g'))-len(substitute(line, '[^]]', '', 'g')))
endfunction
setlocal indentexpr=YourLangIndent(v:lnum)
let b:undo_indent='setlocal indentexpr<' 
```

. 其结果：

```
[foo [bar baz] [qux
        [do a thing]
        [more doing a thing]
        [^ ()
            ; some stuff here
            [foobar]]]]
[back to here] 
```

（对于`&sw`设置为 4，设置为 2 的空格数量的一半`&sw`）。

# c# - Datagridview 中的复选框列在虚拟模式下切换

> ID：13716006
> 
> 赞同：0
> 
> 时间：2012-12-05T03:52:15.560
> 
> 标签：c#, winforms, datagridview, datagridviewcheckboxcell

我有一个`Datagridview`虚拟模式。其中一列`Datagridview`是复选框列。

因此，当我单击任何行中的复选框时，选中的值会在其他行中切换。我无法选择多个条目。

所以，如果我选中了第 2 行，并且当第 3 行也被选中时，第 2 行将自动取消选中。

任何想法，如果我错过了什么。

谢谢

# sql-server - 提交到数据库时，datagridview 组合框列是否会影响速度？

> ID：13716007
> 
> 赞同：1
> 
> 时间：2012-12-05T03:52:19.253
> 
> 标签：sql-server, vb.net, datagridview, datagridviewcombobox

我有一个名为 frmTransaction 的表单，它有 txtTranNo、txtCustCode、dtbDate、txtRemarks、txtTotalAmount，还有一个名为 dtgDetail 的 datagridview。

在 dtgDetail 中，我有 cTranNo、nLineID、cProductID、nQty、nPrice 和 nAmount 列。

cProductID 是一个组合框列，它有一个数据成员 cProduct 和一个显示成员 cDescription，因此当它运行时，用户将看到产品名称而不是其产品代码。

但是我的产品有 2000 条记录，当我加载表单时速度很慢。将其保存/提交到我的数据库时也很慢。

我认为 cProduct 列与我的表单速度有关。这是真的？我怎样才能加快速度？

**编辑**

我可以展示代码，但如果我只是解释我的代码是如何工作的，它就不会那么混乱了。在我的设计时，我的 datagridview 有空列。datagridview 的名称也是将要绑定的表的名称，当我运行它时，它会创建它的列，该列会根据表的模式自动绑定。我还有一个标志，告诉程序该字段是组合框列还是纯文本框。如果它是一个组合框列，它将生成一个 sql 脚本，并运行并将结果保存到一个数据表中，该数据表将作为组合框的数据源。组合框列的数据成员和显示成员也由标志确定。

建议我不要在我的脚本中为我的组合框列的数据源设置任何条件。

**编辑 - 12 年 5 月 12 日** 我尝试在将我的 sql 数据源绑定到 datagridview 组合框列时对其进行过滤......我会说我有助于加快我的表单。我现在的问题是当我在我的 datagridview 中添加不包含在组合框中的新记录时。例如，我将把这个脚本绑定到我的datagridview，“select ID,Desc from product where ID in (1,2,3,4,5)”。当我在 ID = 6 的 datagridview 中插入新记录/项目/产品时，它不会显示描述 datagridview ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:47:27.443

“非常慢”有多慢。我们说的是几秒钟还是几分钟？

如果还没有，请尝试将属性 AutoSizeColumnsMode 设置为 None。自从我搞砸了 datagridview 已经有很长时间了，但是这个属性在过去给我带来了性能噩梦。

如果这不是问题，那么我将开始添加分散在您的网格加载和保存/提交时执行的代码中的计时语句。这将帮助您找出导致缓慢的原因。这几乎不是你所期望的。一些简单的事情：

```
var start = DateTime.Now;
//do work
var end = DateTime.Now;

Console.WriteLine("Timer spot 1: " + end.Subtract(start)); 
```

从大开始。将计时器包裹在整个方法中。继续在你的代码中移动它，直到你（希望）找到让你慢下来的地方。然后尝试缩小范围。不要忘记检查您可能因运行缓慢而触发的任何事件。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:17:29.610

你说你的表单的速度......让我相信你正在 UI 线程上完成所有这些工作。我建议您创建一个单独的线程进行更新，并禁用表单上的任何控件，直到更新完成，这样您的表单才能保持响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T09:26:35.340

我认为您应该尝试使用`List<T> Class`来解决您的问题。这只是我的建议:)

# kettle - Kettle 中的 Java 支持

> ID：13716008
> 
> 赞同：0
> 
> 时间：2012-12-05T03:52:21.560
> 
> 标签：kettle

是kettle支持java对象映射和转换。我可以将 java 对象（序列化）作为输入并在转换其某些属性后生成一些其他文件（如 xml ）或流并再次保留在 db 中，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:11:54.607

您可以使用用户定义的 Java 类步骤执行任何 java 允许的操作。

您可以像往常一样在 Java 中导入 UDJC Kettle 中的任何 Java 库

[http://type-exit.org/adventures-with-open-source-bi/2010/10/the-user-defined-java-class-step/](http://type-exit.org/adventures-with-open-source-bi/2010/10/the-user-defined-java-class-step/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:28:44.453

仅供参考，您也可以从 JavaScript 执行此操作，因为 PDI 的 JavaScript 引擎是 Rhino。您可以从 JavaScript 访问 Java 对象。

# jquery - 信用卡到期验证，包括几个月和几年的两个单独的下拉菜单

> ID：13716011
> 
> 赞同：3
> 
> 时间：2012-12-05T03:52:53.443
> 
> 标签：jquery, jquery-validate

我正在实施信用卡到期日验证，其中月份和年份位于单独的下拉列表中；它几乎就在那里，除了一个小的布局问题。

[**小提琴**](http://jsfiddle.net/5MH3C/1/)

HTML 如下所示：

```
<form id="myform">
<table>
<tr>
    <th colspan="2"><label class="secure-section-title" for="ccexp">Expiration date</label></th>
</tr>
<tr>
    <td><select id="ccexp" name="cc_exp_month" class="required creditcardexpiry">
        <option value="01">01</option> ... <option value="12">12</option>
      </select> / <select name="cc_exp_year" class="required creditcardexpiry">
        <option value="2012">12</option> ... <option value="2021">21</option>
    </select></td>
    <td></td>
</tr>
</table>
</form>​ 
```

执行验证的 JavaScript 在这里：

```
$('#myform').validate({
    errorPlacement: function(error, element) {
        element
            .closest('tr') // take closest parent
            .prev('tr')
            .find('> th')
            .append(error)
        },
        groups: {
            creditcardexpiry: 'cc_exp_month cc_exp_year'
        }
    });

$.validator
    .addMethod('creditcardexpiry', function(value, element) {
        var form = element.form,
        expiry = form['cc_exp_year'].value + form['cc_exp_month'].value,
        date = new Date(),
        month = date.getMonth() + 1,
        now = '' + date.getFullYear() + (month < 10 ? '0' + month : month);

        return expiry > now;
    }); 
```

它基本上仅在到期日是未来一个月的情况下才有效（未来 10 年的最大值受下拉列表的限制）。

问题场景是这样的：

1.  输入过去的日期；将显示错误消息并且下拉菜单为红色

2.  通过将年份增加到 2014 来修复错误；错误消息消失

问题是月份下拉菜单仍然是红色的，直到再次点击！这些字段是分组的，所以我希望在解决无效条目时两个下拉菜单都会被清除。

我在这里忽略了一些明显的东西还是这是一个错误？

**更新**

这并不是关于`groups`属性的真正错误，因为这只是确保两个字段中的错误不会导致两条消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:43:34.580

显然，下拉菜单通过触发点击事件来重新验证（默认情况下）。所以我的解决方案是在两个下拉菜单的选择值发生变化时触发它们之间的点击。

```
var $expiryFields = form.find('.creditcardexpiry');

$expiryFields.on('change', function() {
    // trigger click on the other field to force revalidation
    $expiryFields.not(this).trigger('click');
}); 
```

我对这个修复不是很满意，所以我希望其他人能想出更好的东西。

[**演示**](http://jsfiddle.net/5MH3C/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T21:11:15.193

[`jQuery.validator.element`](http://jqueryvalidation.org/Validator.element)可用于验证单个元素。实现稍微有点冗长，但更重要的是：

```
var $expiryFields = $form.find('.creditcardexpiry'),
    $validator = $form.validate();

$expiryFields.change(function() {
    $expiryFields.not(this).each(function () {$validator.element(this)});
}); 
```

# virtualbox - Vagrant 共享文件夹。符号链接

> ID：13716012
> 
> 赞同：11
> 
> 时间：2012-12-05T03:53:10.630
> 
> 标签：virtualbox, chef-infra, vagrant

我想弄清楚在启动虚拟机时我是否能够在我的共享文件夹中拥有符号链接。

我目前在库目录中有一个带有一些符号链接的项目，我想动态编辑它并查看 vm 上的更改。

我似乎无法弄清楚这一点。我有一种感觉，这是不可能的。符号链接不存在。

```
config.vm.share_folder "k5", "/projects", "/Users/slik/projects"
config.vm.customize ["setextradata", :id, "VBoxInternal2/SharedFoldersEnableSymlinksCreate/v-root", "1"] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T08:15:35.947

您只需为每个共享文件夹挂载添加*setextradata参数。*

```
config.vm.customize ["setextradata", :id, "VBoxInternal2/SharedFoldersEnableSymlinksCreate/k5", "1"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T10:07:21.470

或者从命令行

```
VBoxManage setextradata <VM Name> VBoxInternal2/SharedFoldersEnableSymlinksCreate/<volume> 1 
```

# java - 使用库将输入流读入android中的数组

> ID：13716022
> 
> 赞同：0
> 
> 时间：2012-12-05T03:54:23.020
> 
> 标签：java, android, arrays, sockets, save

我正在尝试将从输入流（从套接字）接收的数据（特别是图像）保存到字节数组中。我检查了两个选项：

一个。使用`java.io.ByteArrayOutputStream`，然后使用以下代码：

```
 InputStream in = socket.getInputStream();
  byte[] imageInBytes = in.toByteArray(); 
```

问题在于 eclipse 无法识别该方法`toByteArray()`。如何将`InputStream`（在这种情况下`in`）复制/更改为 a`ByteArrayOutputStream`以使用该方法？

湾。使用`org.apache.commons.io.IOUtils`，然后使用以下命令：

```
 InputStream in = socket.getInputStream();
    byte[] imageInBytes = IOUtils.toByteArray(in); 
```

我在 java 构建路径中添加了 commons-io-2.4.jar 并将其复制到 /libs 目录中，但它仍然没有按照它的假设进行，并且由于`byte[] imageInBytes = IOUtils.toByteArray(in);`.

顺便说一句，我正在使用姜饼。

对于这两种情况，我都想知道我是否做得对，以及如何解决上述问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T18:08:56.103

尝试这个：

```
InputStream inputStream = socket.getInputStream();
Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
imageView.setImageBitmap(bitmap); 
```

或者：

```
InputStream inputStream = socket.getInputStream();
Drawable drawable = Drawable.createFromStream(inputStream, null);
imageView.setImageDrawable(drawable); 
```

# php - 如何从另一个网页更改请求的样式？

> ID：13716024
> 
> 赞同：-1
> 
> 时间：2012-12-05T03:54:45.380
> 
> 标签：php, styles, request, echo, output

正如您在图片中看到的，有来自 wordreference.com 网站的 HELLO 一词的定义。

我迫切希望消除我想要的对象，例如搜索栏，同时保留主要定义。我还必须能够更改 wordreference 的 anwser 中所有文本的字体样式、颜色、大小等。 ![在此处输入图像描述](../Images/dbb65dc6dee267fd2177473d53ce1192.png) (...)

```
 echo "<iframe id='first' src='http://api.wordreference.com/definition/{$word}' 
          frameborder='0' 
          width='400px' 
          height='300px' 
          scrolling='yes'
          textcolor='red'
          border-style: none;></iframe>";

    ?>   
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:00:21.803

他们有专门用于此的 API。您使用不正确。

检查那里的[API Docs](http://www.wordreference.com/docs/api.aspx)和[http://api.wordreference.com/1/json/enfr/grin](http://api.wordreference.com/1/json/enfr/grin)

`echo`在任何 HTML 代码之前解析 JSON 响应。

# documentation - Ember 数据的构建文档

> ID：13716030
> 
> 赞同：4
> 
> 时间：2012-12-05T03:55:10.697
> 
> 标签：documentation, ember-data

Ember Data 源代码中有*很多文档*。我想知道如何构建 Ember Data 文档？我试过了，

```
bundle exec rake docs
bundle exec rake docs:build
bundle exec rake docs:preview 
```

但是，到目前为止还没有运气...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:22:52.473

也许这个[拉取请求](https://github.com/emberjs/data/pull/890) 会有所帮助

还有一个用于 Ember-Data的[在线 api 文档](http://dl.dropboxusercontent.com/u/80097157/ember-data/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:40:42.637

1.  首先安装[YUIDoc](http://yui.github.com/yuidoc/)。
2.  `yuidocs .`在 ember-data.js 所在的 dist 文件夹中运行

默认情况下，文档将在目录调用中`out`

更新：这似乎只为 Ember 而不是 Ember 数据生成文档。我也尝试过[JSDoc3](https://github.com/jsdoc3/jsdoc)，但我遇到了一个例外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T15:27:25.580

```
ember build -e production
cd dist\docs
ruby -run -e httpd . -p 3000 
```

# java - SpannableStringBuilder 和 CharSequence 之间的转换

> ID：13716031
> 
> 赞同：4
> 
> 时间：2012-12-05T03:55:14.503
> 
> 标签：java, android, casting

```
TextView tv = (TextView) findViewById(R.id.abc);
String rawString = "abcdefg";
SpannableStringBuilder ssb = new SpannableStringBuilder(rawString);
ssb.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), 0, rawString.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
tv.setText(ssb);
CharSequence cs = tv.getText();
System.out.println(cs.getClass()); 
```

输出是“类 android.text.SpannedString”

为什么？我希望它是“SpannableStringBuilder”，我的转换 ( `SpannableStringBuilder ssb_2 = (SpannableStringBuilder)cs;`) 将在上面的示例中给出错误。

还有一些，如果我将文本视图的缓冲区类型设置为，输出将更改为“SpannableString”`android:bufferType="spannable"`

有谁知道为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T04:19:09.913

**1.**那么原因`(SpannableStringBuilder ssb_2 = (SpannableStringBuilder)cs;)`不起作用是因为`SpannableStringBuilder`implements `CharSequence`，这意味着 CharSequence 不知道它可以被强制转换为那个。但是，您可以反过来做。那有意义吗？

**CharSequence 是一个虚无/本身**

**SpannableStringBuilder 是一个**：*CharSequence、Spannable、Editable*等...

**2.**至于为什么`android:bufferType="spannable"`有效，你在做我上面说的，相反。由于`SpannableString`implements `CharSequence`，它现在是它的一个孩子，因此可以放置在`CharSequence`.

但无论如何，正确的方法`CharSequence`是`SpannableStringBuilder`：

```
SpannableStringBuilder ssb_2 = SpannableStringBuilder(cs); 
```

您可能想复习一些多态性 :) 但您可以在[SpannableStringBuilder 的](http://developer.android.com/reference/android/text/SpannableStringBuilder.html#SpannableStringBuilder%28java.lang.CharSequence%29)构造函数的 Android 文档中看到这一点，或者至少其中一个。

* * *

**更新：**

从我注意到你在做什么，有什么需要使用`CharSequence`？只需将 TextView 保持原样，这意味着它作为字符串返回。所以做这样的事情会更容易：

```
SpannableStringBuilder ssb_2 = SpannableStringBuilder(tv.getText()); 
```

有效的原因是因为 String 也实现了 CharSequence，这意味着它也可以作为`CharSequence`. Java 在某些情况下会自动转换，包括在上面的代码中。

# android - Android - BroadcastReceiver 中位置的 removeUpdates 不起作用？

> ID：13716037
> 
> 赞同：1
> 
> 时间：2012-12-05T03:55:55.163
> 
> 标签：android, broadcastreceiver, locationmanager, locationlistener

我正在使用位置侦听器开发一个示例应用程序。我有 2 个 java 文件，一个是广播接收器，一个是活动。我的广播接收器本身就是一个位置监听器。在我的广播接收器中，我正在启动 gps 引擎并停止位置更新。我的要求是每天晚上 7 点停止位置更新。我正在尝试使用这段代码删除位置更新。

```
locationManager.removeUpdates(this); 
```

但它不起作用。我哪里出错了。下面是我的完整代码。

StopLLActivity.java

```
public class StopLLActivity extends Activity {
public static LocationManager lm;

@Override   
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent myIntent = new Intent( this, PIBroadCast.class); 
    PendingIntent   currentTime = PendingIntent.getBroadcast(this, 0, myIntent, 0);

    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE); 
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());

    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), currentTime);
    PendingIntent   sevenPMIntent = PendingIntent.getBroadcast(this, 0, myIntent, 0);

    AlarmManager alarmManager1 = (AlarmManager)getSystemService(ALARM_SERVICE); 
    Calendar calendar1 = Calendar.getInstance();
    calendar1.setTimeInMillis(System.currentTimeMillis());
    calendar1.set(Calendar.HOUR_OF_DAY, 19);
    calendar1.set(Calendar.MINUTE, 0);
    calendar1.set(Calendar.SECOND, 0); 
    alarmManager1.setRepeating(AlarmManager.RTC_WAKEUP, calendar1.getTimeInMillis(), 24*60*60*1000, sevenPMIntent);

} 
```

PIBroadCast.java

```
public class PIBroadCast extends BroadcastReceiver implements LocationListener{
public static LocationManager locationManager;  
public static boolean flagForGPS = false;
@Override  
public void onReceive(Context context, Intent intent) {

    locationManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE); 
    if(flagForGPS == false){
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10*1000 , 0 ,this);
        flagForGPS = true;
    }    

    //Get the system current time.
    Date dt = new Date();     
    int hours = dt.getHours();     

    //Compare the current time with 7PM and 5AM
    if(hours == 19){
        try {
            //if current time is 7PM
            Toast.makeText(context, "Now the time is 7PM", Toast.LENGTH_LONG).show(); 
            locationManager.removeUpdates(this); 
        } catch (Exception e) {

            e.printStackTrace();
        }

    }
}

@Override
public void onLocationChanged(Location location) {
    System.out.println("LOCATION IS : "+location);

}

@Override
public void onProviderDisabled(String provider) {

}

@Override
public void onProviderEnabled(String provider) {

}   

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {

}

} 
```

# java - JAVA：指针等价物

> ID：13716041
> 
> 赞同：0
> 
> 时间：2012-12-05T03:56:24.533
> 
> 标签：java, pointers

我知道指针并不像它们在 C 中那样存在，但我想知道这样的事情是否可能：

我有 5 个全局变量`r1 r2 r3 r4 r5`，每个最初都初始化为`null`

我想（1）找到尚未使用的变量，（2）为其分配一些东西，然后（3）稍后在程序中操作该变量。但是，在代码执行之前我不知道变量的状态。为了弥补这一点，我现在有一堆 if-else 语句：

```
if(r1==null)
    r1 = [something]    
else if(r2==null)
    r2 = [something]
else if(r3==null)
    r3 = [something]
else if(r4==null)
    r4 = [something]
else if(r5==null)
    r5 = [something] 
```

到现在为止还挺好。但问题是，我想取上面代码中修改过的变量，然后在程序中使用/修改该变量。

所以说 if `r1`and `r2`were NOT null, and `r3`was null, `r3 = [something]`. 我想`r3`稍后在程序中进行修改。在 C/C++ 中，我想我可以`r3`在 if-else 语句中设置一个指针。然后我可以`r3`稍后在程序中通过该指针进行修改。

这在Java中可能吗？谢谢！

编辑：忘了提，`r1-r5`是字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:00:50.707

Java是一种面向对象的语言，对象是通过引用传递的。因此，如果您的变量 r1 - r5 是特定类的实例，则传递它们将与传递对象相同。

因此，在单独的函数或方法中修改对象也会更新原始对象。

在枕头下放一本好的 Java 书；Dietel 和 Dietel 适合初学者，Java LRM 适合毕业生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:00:53.467

听起来您想使用数组。一旦您确定哪个元素尚未使用，只需保存索引并使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T04:00:53.957

对于这么简单的事情，您可以使用数组。您可以将数组索引保留为指向所需变量的指针。

```
String[] r = new String[5]; // all nulls 
```

所以：

```
private int findFirstNull(String[] array) {
  for(int i=0; i<r.length; i++)
    if(r[i] == null)
      return i;
  return -1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T04:06:41.747

[`Field`Java 的反射 API 允许通过type](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html)引用成员变量。

简而言之，您可以将对所需全局变量的引用存储在`Field`对象中并按需查询/更新它。例如，假设全局变量的类型为 String：

```
// static String MyClass r1 = null;
Field theGlobal = MyClass.class.getField("r1");
String s = (String) theGlobal.get(MyClass.class);
if (s == null) {
  theGlobal.set(MyClass.class, "Hello, Reflection!");
  // MyClass.r1 == "Hello, Reflection!"
} 
```

然而，这样做的必要性显然是糟糕的设计。您的全局变量很可能由其他一些成员变量类型更好地表示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T06:57:03.763

Java 通过值传递它的对象。虽然您可以修改传递给方法的对象的状态，并且这些修改保留在方法之外，但不会将对象分配给另一个实例。

例如，保留执行以下操作：

```
point.setX(10);
point.setY(100); 
```

虽然这样的事情不会：

```
point = new Point(10,100); 
```

正如您所说，您使用的是字符串，Java 中的字符串是不可变的，因此无法修改其状态。

就像建议的其他一些答案一样，在这种情况下使用 Array of String 是一个很好的选择。由于它是一个全局变量，你可以使用这样的东西：

```
public static final String[] r = new String[5]; 
```

随之，改变它的一个元素，比如

```
r[0] = "Some String"; 
```

将在全球范围内保存。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-05T04:59:17.440

我认为你可以有一个单独的全局变量来知道哪个被修改（我认为你只需要该字符串的引用）并使用如下：

```
if(r1==null)
    globalR = r1 = [something]    
else if(r2==null)
    globalR = r2 = [something]
else if(r3==null)
    globalR = r3 = [something]
else if(r4==null)
    globalR = r4 = [something]
else if(r5==null)
    globalR = r5 = [something] 
```

那么您可以使用 globalR 来处理该字符串

# linux - 如何使用mac键盘粘贴到虚拟框中的终端linux？

> ID：13716043
> 
> 赞同：20
> 
> 时间：2012-12-05T03:56:27.433
> 
> 标签：linux, macos, terminal

我正在使用 Mac，并且在虚拟机上安装了 debian linux。我想将一个 URL 从我的 Mac 复制到虚拟框中的终端 linux。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-29T16:44:08.773

有时，在 Mac 上打开一个终端，然后通过 SSH 连接到 VirtualBox 来宾更容易。这避免了很多改变焦点等的麻烦。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T07:54:59.140

我只是有同样的问题。确保剪贴板共享已打开后，Ctrl+Shift+V 粘贴到 debian 的终端中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-24T15:11:28.787

我刚刚写了一个指南，让我在 VirtualBox 上的 OS X 和 Ubuntu 之间进行复制和粘贴，因为它让我很沮丧。也许对遇到这个问题的人有帮助：

[http://blog.nostopbutton.com/2013/08/24/setup-copy-and-paste-between-os-x-and-linux-virtualbox/](http://blog.nostopbutton.com/2013/08/24/setup-copy-and-paste-between-os-x-and-linux-virtualbox/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-12T13:31:33.280

**首先**
安装 Guest Additions CD ( `Devices->Insert Guest Additions CD image`)。

**激活剪贴板共享**
然后重新启动后，在Virtualbox中转到`Machine->Settings->General->Advanced`并设置
`Shared Clipboard: Bidrectional`

**Change VirtualBox Host Key**
In`Vitualbox/Preferences/Input/Virtual Machine/Host Key Combination`
选择不同的然后`⌘</kbd>`

**键映射**：
对于`cmd/ctrl`我来说添加英文（Macintosh）键盘的映射似乎是最舒服的解决方案:)

转到`Ubuntu Settings->Text Entry`
（我猜在旧版本中它可能在键盘布局设置中）
在`Input sources to use:`点击加号（+）下
添加`English (Macintosh)`

我在 VirtualBox 5.0.4 中的 Ubuntu 14.04.3 LTS 64bit

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-10T05:13:24.073

我整理了[一个页面来描述如何做到这一点](http://erluko.github.io/howto/pasting-service-for-virtualbox)

简短的版本是您可以使用 AppleScript 和自定义键盘快捷键来执行此操作。

苹果脚本：

```
on run {input, parameters}
    set input to input as text
    tell application "System Events"
        repeat with currentChar in the characters of input
            set cID to id of currentChar
            set used to false
            repeat with r in {{48, 29}, {49, 18}, {50, 19}, {51, 20}, {52, 21}, {53, 23}, {54, 22}, {55, 26}, {56, 28}, {57, 25}, {45, 27}, {46, 47}, {47, 44}, {61, 24}}
                if first item of r is equal to cID then -- 0-9 -./=
                    key code (second item of r)
                    set used to true
                end if
            end repeat
            repeat with r in {{42, 28}, {43, 24}} -- *+
                if first item of r is equal to cID then
                    key code (second item of r) using shift down
                    set used to true
                end if
            end repeat
            if not used then
                keystroke currentChar
            end if
        end repeat
    end tell
    return input
end run 
```

该脚本对于破解愚蠢地阻止粘贴的密码字段也很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-22T11:38:04.957

我在我的 windows 机器上使用 ubuntu，virtualbox 与 PuTTY、FileZilla 等连接。

（不使用默认的 virtualbox 控制台）

以下是您可以从头开始设置的方法：

```
### Setup Virtualbox:
    https://www.virtualbox.org/wiki/Downloads
    install ubuntu from their website
### Launch Ubuntu from Virtualbox Console:
    sudo apt-get install openssh-server
    sudo systemctl start ssh
    sudo systemctl status ssh
    netstat -tulpn
        # see ubuntu port 22 open and ssh running
    sudo poweroff
### Virtualbox: 
    settings - network - Advanced - Adapter Type: PCNet Fast 3 - Port Forwarding
    Name: SSH, Protocol: TCP, Host Port (Windows): 3022, Guest Port (Ubuntu): 22
    right click - start - headless start
### PuTTY: 
    Seesion: Localhost Ubuntu: <your_user> -p
        Host: <your_user>@127.0.0.1
        Port: 3022
    Window - Colums: 130, Rows: 24
    Scrollback lines: 10000
    Appearance - Cursor: Vertical + Blinks
    Font Courier New  - Regular - 12px
    Behaviour - Window Title: Localhost Ubuntu
    Full screen on ALT + ENTER
    Connection Data - Auto login Username: <your_user>
    Session - SAVE!

### FTP:
    Host: localhost 
    Port: 3022
    SFTP (SSH FTP)
    Logon Type: normal
        <your_user>
        <pass>
    Transfer settings: limit max. conenction: 4

### Git BASH:
    ssh -p 3022 <your_user>@localhost

### Enable SSH Root Login: (Use only on localhost, security advice!)
    # Set a password for root account first and then enable root account:
        sudo passwd root
        sudo passwd -u root
        # Reverting Back: (lock the root account)
            sudo passwd -l root
    # Enable SSH root login:
        sudo nano /etc/ssh/sshd_config
            # PermitRootLogin prohibit-password
            PermitRootLogin yes
        sudo systemctl restart ssh

### Virtualbox Windows Headless Start
    # Make a .lnk shortcut with target or .bat batch file
    "C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" startvm "UbuntuMin" --type headless
    "C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" controlvm "UbuntuMin" poweroff
    Add shortcuts to start menu -> ubuntu START & STOP - change .ico - right click - pin to start 
```

# processing - 处理脚本无法作为 javascript 运行

> ID：13716044
> 
> 赞同：1
> 
> 时间：2012-12-05T03:57:05.347
> 
> 标签：processing, processing.js

由于未知原因，一个相对简单的处理脚本在 2.0 IDE 的 Javascript 模式和浏览器（通过 Processing.JS）中都失败了。我很确定同样的问题是停止这两种方法。我已经隔离了一条导致失败的线路，并在以下页面中进行了说明：

*   [Test1.html](http://test.geotheory.co.uk/Test1.html)是可以工作的项目脚本的精简版
*   [Test2.html](http://test.geotheory.co.uk/Test2.html)演示了在调用单个额外命令时 Test1 如何失败（第 93 行），尽管它在 IDE 的 Java 模式下运行良好。违规行仅试图重新打印已经成功打印的信息`void setup(){}`，因此我感到困惑。

所有脚本都可以[在此处查看，但](http://test.geotheory.co.uk/)[Test2.pde](http://test.geotheory.co.uk/Test2.pde)中的关键行位于`void drawLinks()`.

知道是什么原因造成的吗？我现在在这上面浪费了这么多时间！只需将[Test2.pde 脚本](http://test.geotheory.co.uk/Test2.pde)复制/粘贴到新的 Processing 2.0 IDE 中，即可在 Java 和 Javascript 模式下使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:16:21.570

如果您在处理 IDE 中创建了代码，则不能直接在 Web 浏览器中使用，要在 Web 浏览器中运行脚本，您主要有两种选择：

A) 您可以从 Processing 中导出 java-applet。然后可以将其嵌入到您的网页中。这会将文件视为 java-applet，因此即使它可以工作，也可能不是优雅的解决方案。

B) ProcessingJS 正在读取处理文件并将它们作为本机 javascript 在 Web 浏览器中运行。您下载 JS 库并创建一个文件来导入它并指向处理源文件，然后在本机 javascript 中对其进行解析和绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:27:58.970

我发现，当使用带有 processing.js 的 OOP 时，您必须在所有实例变量前面加上 a`this.`才能使其正常工作，尤其是当此类对象在 an`array`或 an中实例化时`ArrayList`。您将需要对所有构造函数和方法进行此修改。

例如：

```
class Route {
  ArrayList<Integer> cities;
  float distance;

  Route(ArrayList CITIES, float DISTANCE) {
    this.cities = CITIES;
    this.distance = DISTANCE;
  }
} 
```

对于一个实时示例，请查看我的[交互式简历源中](http://www.resume.jamesjamesjames.com/)[链接的 .pde](http://www.resume.jamesjamesjames.com/work_history_timeline.pde)。

修改后的代码仍会在 Processing : Java / Standard Mode 中执行，但会变得过于冗长。我通常只在我将项目移植到 processing.js 或想要一个在标准/Java 和 JavaScript (processing.js) 模式下工作的项目时才进行此更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T01:10:11.010

ProcessingJS 的 ArrayList 版本似乎有问题。虽然它被[正确指定，](http://processingjs.org/reference/ArrayList/)但在其中接受 initialCapacity 的构造函数似乎存在一个错误。最近的一份错误报告[也显示了这一点](https://processing-js.lighthouseapp.com/projects/41284/tickets/1917-arraylist-constructor-capacity-mis-interpreted-as-size-breaks-indexed-access)。

tl;dr：从第 65 行创建的 arrayList 中删除变量 n，

```
this.links = new ArrayList<Link>(n); 
```

应该变成：

```
this.links = new ArrayList<Link>(); 
```

# python - 如何从表中获取主键

> ID：13716048
> 
> 赞同：0
> 
> 时间：2012-12-05T03:57:23.930
> 
> 标签：python, mysql

> **可能重复：**
> [在 Python 中，在我插入到 mysqldb 之后，我如何获得“id”？](https://stackoverflow.com/questions/2548493/in-python-after-i-insert-into-mysqldb-how-do-i-get-the-id)

如何获取插入后的主键到 foo 中，以便我可以在其他表中插入外键引用。

```
import MySQLdb

cursor = mysqlconn.cursor()
cursor.execute("""INSERT INTO foo (value) VALUES (%s)""", (value))
prod_mysql_conn.commit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:59:13.930

很简单：

```
mysqlconn.insert_id() 
```

或者

```
cursor.lastrowid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:59:41.790

像这样：

```
 show index from table_name where Key_name = 'PRIMARY'; 
```

table_name 是表名。查看结果中的 column_name 字段，您将获得该表的 PRIMARY KEY 列。

# php - MySQL程序检查

> ID：13716051
> 
> 赞同：0
> 
> 时间：2012-12-05T03:57:44.673
> 
> 标签：php, mysql, sql, web-services

我是程序的新手，我正在尝试在我的客户网站中实施它们。

我想创建一个添加新客户的程序。我想检查以确保电话号码不在数据库中。如果是，我想显示一条错误消息。如果电话号码不在数据库中，我想将其插入到我的客户表中。

我已经实现了以下内容，但出现错误。我不确定我是否在 MySQL 中正确声明了变量，并且我不确定“if 语句”是否以我所做的方式有效。另外，如何将 if 语句查询设置为变量？如果有人可以提供帮助，那将意义重大。谢谢！

```
DELIMITER //
CREATE PROCEDURE add_Customer
(IN customerNum int, 
IN last varchar, 
IN first varchar)
BEGIN
DECLARE output var DEFAULT '';
IF SELECT CUSTOMER.customerNum FROM CUSTOMER WHERE CUSTOMER.customerNum= customerNum 
THEN
SET output= "Customer already exists!";
select output;
ELSE
INSERT INTO CUSTOMER VALUES (customerNum, last, first);
END IF;
END//
DELIMITER; 
```

**已编辑**

```
DELIMITER //
CREATE PROCEDURE add_Customer
(IN customerNum int, 
IN last varchar, 
IN first varchar)
BEGIN
DECLARE output var DEFAULT '';
DECLARE var_num INT;
SELECT CUSTOMER.customerNum INTO var_num FROM CUSTOMER WHERE CUSTOMER.customerNum= customerNum 
if var_num IS NULL THEN
INSERT INTO CUSTOMER VALUES (customerNum, last, first);
ELSE
SET output= "Customer already exists!";
select output;
END IF;
END//
DELIMITER; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:06:22.947

尝试：

```
DECLARE var_num INT;
SELECT CUSTOMER.customerNum INTO var_num FROM CUSTOMER WHERE CUSTOMER.customerNum= customerNum
IF var_num IS NULL THEN
    INSERT INTO CUSTOMER VALUES (customerNum, last, first);
ELSE
    SET output= "Customer already exists!";
    select output;
ENDIF;
... 
```

# java - 触发动作后从 JFrame 返回

> ID：13716052
> 
> 赞同：1
> 
> 时间：2012-12-05T03:57:44.070
> 
> 标签：java, swing, jframe, return, joptionpane

我正在使用 Java Swing 开发我的第一个 GUI 程序。我有一个登录表单类，它读取用户名和密码，然后检查本地数据库中是否存在匹配的用户名/密码组合。如果有，我希望能够将用户名从 JFrame 对象返回到我的主类。这只会在我点击我的登录按钮的动作触发后发生。

我不知道如何让这个类在特定时间之后返回：

```
public class Login extends JFrame {

//declaration of components
private JTextField userText = new JTextField(12);
private JPasswordField passText = new JPasswordField(12);

//declaration of variables
String username;
String password;
//...
class loginAction extends AbstractAction{
    loginAction(){
        super("Login");
        putValue(SHORT_DESCRIPTION, "Click to login");
    }
    public void actionPerformed(ActionEvent e){
        userLogin();
    }
}

public String userLogin(){
    String sql = "SELECT * from Employees " +
                 "WHERE Username = ? AND Password = ?";

    try(PreparedStatement ps = con.prepareStatement(sql)){
        ps.setString(1, userText.getText());
        ps.setString(2, new String(passText.getPassword()));
        ResultSet rs = ps.executeQuery();

        if(rs.next())
            //RETURN USERNAME BACK TO MAIN CLASS...How?
        else
            JOptionPane.showMessageDialog(this, "Incorrect username or password.", "", JOptionPane.ERROR_MESSAGE);
    }
    catch (SQLException e) {
        utils.Print.print(e.getMessage());
        printSuppressed(e);
    }
    finally{
    }
}
//...
Login(Connection connect){
///...
    JButton login = new JButton(new loginAction())
//...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:16:45.207

不要为此使用 JFrame，因为这是创建 JDialogs 和 JOptionPanes 等模态对话框的目的。这就是他们存在的理由，如果你不利用他们，他们会很伤心。说真的，您知道调用 JOptionPane 时会发生什么，来自调用程序的代码流如何停止并等待 JOptionPane 在继续之前返回，这就是模态 JDialogs 所做的（实际上 JOptionPane 只是 JDialog 的一个变体)，这正是您想要的行为。

请注意，无论您是否使用一个类，您几乎都不应该让一个类扩展 JFrame。相反，将您的代码用于创建 JPanel，然后在您想要显示它们时将它们填充到 JDialogs、JFrames 或任何必要的容器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:24:38.067

1.  尽可能避免从顶级容器（如框架和对话框）扩展，最好将 UI 组件放置到`JPanel`. 从长远来看，它为您提供了更大的灵活性和重用选项。
2.  使用 a`JDialog`而不是 a `JFrame`，或者更好的是，使用 a`JOptionPane`它将为您处理按钮（尽管在您执行验证检查之前它需要关闭对话框）。
3.  不要在 Event Dispatching Thread 中执行长时间运行或阻塞的代码（例如访问数据库）
4.  在内部维护用户信息并允许调用对象通过 getter 访问信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T04:21:28.030

一种方法是将注释行替换为在操作内设置变量的行。然后，您需要保留对该操作的引用。

例如，

```
loginAction la = new loginAction()
JButton login = new JButton(la)

....

// some other code block with reference to la
if(la.isUsernameValid())  
     la.getUsername() 
```

不过，正如@Hovercraft 所提到的，有更好的方法可以做到这一点

# github - GitHub API 流行仓库

> ID：13716053
> 
> 赞同：7
> 
> 时间：2012-12-05T03:57:50.867
> 
> 标签：github

用户是否可以通过 API 访问“最多星”或“最受关注”的存储库？类似于这些页面。

[**github.com/popular/starred**](http://github.com/popular/starred)

[**github.com/languages/shell/most_watched**](http://github.com/languages/Shell/most_watched)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T08:20:10.587

*否：这是以用户为中心的，这意味着您将获得由用户或给定用户*加星标的存储库。

并且不要忘记你所说的[“手表”现在是“明星”](http://developer.github.com/changes/2012-9-5-watcher-api/)。

> 以前的“看”，现在是“主演”。
> 加星标基本上是一种为有趣的存储库添加书签的方法。
> 观看是一种表示您希望在存储库上接收电子邮件或 Web 通知的方式。

* * *

虽然搜索 GUI 现在将“星”公开为排序顺序（请参阅“[通过“某些”属性（叉或星的数量）获取排序的 github 存储库搜索结果](https://stackoverflow.com/questions/12241873/get-sorted-github-repository-search-results-by-some-attributethe-number-of-fo/12241932#12241932)”，2013 年 2 月），[搜索 API](http://developer.github.com/v3/search/)（来自 V2 的端口）是唯一一个提到[“星”作为存储库排序顺序的](http://developer.github.com/v3/search/#search-repositories)。

```
GET /legacy/repos/search/:keyword?sort=stars 
```

（这应该[适用于公共 GH 和 GHE：GitHub for enterprise](https://jira.atlassian.com/browse/SRCTREE-1182?focusedCommentId=440704&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-440704)，但需要关键字，并且不遵循 v3 分页模式。此方法每页最多返回 100 个结果，并且可以使用 start_page 参数获取页面。）

[Aditya Mehta](https://stackoverflow.com/users/10702098/aditya-mehta)[在评论中](https://stackoverflow.com/questions/13716053/github-api-popular-repos/13718914?noredirect=1#comment105340881_13718914)指出：

> 这是**查找星数最多的存储库的查询，按星数排序**。
> [`api.github.com/search/repositories?q=stars:%3E1&sort=stars`](https://api.github.com/search/repositories?q=stars:%3E1&sort=stars)

# ruby - 如何舍入浮点值

> ID：13716057
> 
> 赞同：-2
> 
> 时间：2012-12-05T03:58:30.013
> 
> 标签：ruby, rounding

我正在尝试按如下方式舍入一个浮点值：

```
(0.11 + 0.22 + 0.23 / 3).round(2) 
```

有谁知道是否有其他有效的方法来四舍五入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:22:13.540

在 Ruby 中舍入浮点数的主要方法是通过[`Float#round`方法](http://www.ruby-doc.org/core-1.9.3/Float.html#method-i-round)或[`String#%`（格式）运算符](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25)。例如：

```
f = (0.11 + 0.22 + 0.23 / 3) # => 0.4066666666666667
f.round(2)  # =>  0.41
"%.02f" % f # => "0.41" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:27:57.170

如果你总是想向上取整，从不向下取整，你可以这样做：

```
(0.411 * 100).ceil / 100.0 # => 0.42 
```

否则只需使用`round`. 或者，如果您不介意将浮点数转换为字符串，请使用字符串格式化程序。

# html - 元素仅扩展 100% 的视口，而不是父元素

> ID：13716059
> 
> 赞同：3
> 
> 时间：2012-12-05T03:58:50.857
> 
> 标签：html, css, responsive-design

我正在尝试为 SMF 论坛软件制作一个 2 列响应式主题。我想在右侧粘贴一列，它将其父级的高度扩展 100%。

我现在的问题是我的浮动侧边栏仅扩展到视口的高度，而不是父元素。我有办法做到这一点吗？

我有 100% 的 html、正文高度、父高度和侧边栏高度。但是，它仅扩展至视口，而不是父元素。

现场示例： http: [//xarcms.com/index.php ?theme=3](http://xarcms.com/index.php?theme=3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:35:44.450

另一种解决方案：

```
html{
    min-height: 100%; //insted of height
}

#wrapper{
    position: relative;
}

#side-section{
    position: absolute;
    right: 0;
    bottom: 0;
    top: 0;
    width: 20%;
} 
```

# haskell - Haskell 中的函数组合

> ID：13716060
> 
> 赞同：1
> 
> 时间：2012-12-05T03:58:59.583
> 
> 标签：haskell

我有一个函数，它需要 3 个函数并将它们组合起来以更改列表参数。

例如，一个测试用例调用是：**chain init tail reverse "Haskell!"** 输出应该是**lleksa**

我尝试了几种不同的方法来解决这个问题，包括使用该`map`函数，但我一直遇到关联问题。所以我做了

```
chain :: Ord a => [a] -> a
chain f g h x = f.g.h$x 
```

错误是`Couldn't match expected type [t0 -> t1 -> t2 -> a0]`

例如，当我直接在 GHCi 中输入问题时，例如，`init.tail.reverse$"Haskell!"`它可以正常工作

有没有办法包含三个函数参数？我只在例子中看到过两个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T08:25:35.150

由 3 个函数组成的高阶函数的最通用类型签名是：

```
chain :: (b -> c) -> (b1 -> b) -> (a -> b1) -> a -> c
chain f g h x = f.g.h$x 
```

（你也可以不用`x`,来写定义

```
chain f g h = f.g.h 
```

）。请注意，中间函数的返回类型`b`和`b1`是任意的，唯一的要求是它们必须与下一个函数的参数类型匹配。现在，如果你打电话`chain init tail reverse "Haskell!"`，你会得到`"lleksa"`。

如果您知道如何编写函数，但不知道它的正确类型，您可以让 GHCi 为您推断类型。只需在此处加载函数并键入例如`:t chain`（`:t`是 的简写`:type`，请参阅[GHCi 命令](http://www.haskell.org/ghc/docs/7.0.4/html/users_guide/ghci-commands.html)）。

* * *

你可以更进一步，组合任意数量的函数。（但在这种情况下，类型系统会强制您使用不那么通用的类型签名。）

```
chainN :: [a -> a] -> (a -> a)
chainN fs = foldr (.) id fs 
```

此函数从`a`to获取函数列表`a`并将它们组合在一起。如果列表为空，则仅返回标识函数。有了`chainN`你可以写的东西像

```
chainN [init, tail, reverse] "Haskell!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:56:18.200

当 Prelude 分析你的功能时：

```
chain f g h x = f.g.h$x 
```

它假定您正在接收函数`f`、`g`和`h`。为什么会这样假设？因为`.`运算符的目的是链接函数。因此，如果您使用它是因为您正在链接函数。

你为你的函数定义了一个类型签名`([a] -> a)`，它与你的函数应该接收和返回的不同。一种解决方案是不指定类型签名并将其留作前奏，另一种是更正类型签名。

但是，如果您希望您的函数接收`a`并返回一个列表，`a`您应该将您的函数修改为如下所示：

```
chain :: (Ord a) => [a] -> a
chain (x:xs) = ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-09T06:49:45.377

> 有没有办法包含三个函数参数？我只在例子中看到过两个。

你可能应该回顾你读过的任何介绍性材料，或者如果可以的话，拿起一些介绍性材料。你似乎很困惑。

> 例如，当我直接在 GHCi 中输入问题时，例如，`init.tail.reverse$"Haskell!"`它可以正常工作

您可以使用`ghci`来查找表达式的类型。

```
λ:> chain f g h x = f.g.h$x
λ:> :t chain
chain :: (b1 -> c) -> (b2 -> b1) -> (a -> b2) -> a -> c 
```

这只是一个专业

```
chain :: ([a] -> [a]) -> ([a] -> [a]) -> ([a] -> [a]) -> [a] -> [a] 
```

我猜这就是你想要写的。

对于它的价值，如果你只是在处理列表，你可能会想要类似下面的东西。

```
chain :: [[a] -> [a]] -> [a] -> [a]
chain = foldr (.) id 
```

启动 GHCi：

```
λ:> chain = foldr (.) id
λ:> chain [init, tail, reverse] "Haskell!"
"lleksa" 
```

你得到我猜你想要的结果。如果您还不了解它的工作原理，请不要担心，坚持使用其他解决方案，并在您准备好时再回来。

# c# - 调用类方法导致“当前上下文中不存在该名称”

> ID：13716062
> 
> 赞同：-2
> 
> 时间：2012-12-05T03:59:09.537
> 
> 标签：c#, winforms

我有一个 Windows 窗体程序，其中包含一个`MainForm`类以及另一个名为`Communication`. 这个程序应该显示一些交易数据。问题是我需要将`DisplayData`方法放在我的`MainForm`类中，并且我需要在`Communication`.

我知道我应该在类的顶部调用主类`Communication`，但我仍然收到此错误：

> 错误 1 ​​当前上下文中不存在名称“DisplayData”

这是我的代码：

```
MainFormClass.DisplayData(MessageType.Error, ex.Message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:12:41.750

```
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public class Communication
    {
        public void CallDisplayDataMethodFromMainForm()
        {
            string message = MainFormClass.DisplayData(1, 2).ToString();
            MessageBox.Show(message);
        }
    }

    public partial class MainFormClass : Form
    {
        public MainFormClass()
        {
            InitializeComponent();
        }

        public static int DisplayData(int a, int b)
        {
            return 0;
        }
    }
} 
```

如果你想`DisplayData()`在这样的上下文中调用你的方法，你需要 make it `static`。

# python - 在 python 中优化 MasterMind 代码和字符串操作

> ID：13716064
> 
> 赞同：0
> 
> 时间：2012-12-05T03:59:34.623
> 
> 标签：python, string, optimization

我正在为 MasterMind 编写一个求解器，其中我必须接受猜测和答案，并返回一些表示黑色和白色钉子数量的表示，其中黑色钉子代表正确位置的正确颜色，白色钉子代表正确颜色在不正确的位置。我必须运行这段代码大约 200 万次迭代，因此它需要尽可能快。目前最大的时间消耗是 split 和 index 调用，但我不知道如何删除它们。关于如何在保持其功能的同时使此代码运行得更快的任何想法？

```
def returnPegs(guess, answer):
        guessList = guess.split(" ")
        answerList = answer.split(" ")
        response = ""
        iterator = [0,1,2,3]
        for i in iterator:
            if answerList[i] == guessList[i]:
                response = response + "B"
                guessList[i] = "alsoNotAColor"
                answerList[i] = "notAColor"
        for j in iterator:
            if guessList[j] in answerList:
                response = response + "W"
                answerList[answerList.index(guessList[j])] = "notAColor"
                guessList[j] = "alsoNotAColor"
        return response 
```

以确保清晰度。我的输入是由空格分隔的四种颜色的字符串，我的输出不必具有任何特定的形式，只要它对于黑白钉的每种组合都是唯一的。

经过一些重度优化后这是代码的当前状态：

```
 def returnPegs(guess, answer):
    pegs = 0 
    for answerPeg, guessPeg in zip(answer, guess):
        if answerPeg == guessPeg:
            pegs += 5
        elif guessPeg in answer:
            pegs +=1
    return pegs 
```

进一步优化，有点回到一些原始代码，这个版本实际上是所有版本中最快的。大约是第一个的 4 倍，第二个的 2 倍。

```
def returnPegs(guess, answer):
    response = 0
    iterator = [0,1,2,3]
    for i in iterator:
        if guess[i] == answer[i]:
            response += 5
            guess[i] = "alsoNotAColor"
            answer[i] = "notAColor"
        elif guess[i] in answer:
            response += 1
            answer[answer.index(guess[i])] = "notAColor"
            guess[i] = "alsoNotAColor"
    return response 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:13:47.457

如果我正确阅读了您的问题，则此代码应该可以满足您的需要：

```
def returnPegs(guess, answer):
    guesses = guess.split()
    answers = answer.split()

    pegs = []

    for answer, guess in zip(answers, guesses):
        if answer == guess:
            pegs.append('B')
        elif guess in answers:
            pegs.append('W')

    return ''.join(pegs) 
```

`zip()`将两个序列压缩在一起：

```
>>> a = [1, 2, 3, 4]
>>> b = [5, 6, 7, 8]
>>> zip(a, b)
[(1, 5), (2, 6), (3, 7), (4, 8)] 
```

# javascript - jQuery scrollTop - 动画在移动结束时卡住

> ID：13716067
> 
> 赞同：2
> 
> 时间：2012-12-05T04:00:05.287
> 
> 标签：javascript, jquery, scroll, scrolltop, smooth

我使用 jquery 的 scrollTop 函数在不同的锚点之间切换时让我的滚动平滑。首先，这是网址

[问题](http://rose.developertinger.de/anwalte-team/gregor-rose/)

这是我的 jquery 脚本

“ziel”只是“目标”的德语单词，只是为了让您知道为什么这个变量被称为“ziel”

```
$(document).ready(function() {
    $('a[href*=#]').bind("click", function(event) {
        event.preventDefault();
        var ziel = $(this).attr("href");

        $('#portraitcontent').animate({
            scrollTop: $(ziel).offset().top
        }, 3000 , function (){location.hash = ziel;});
});
return false;
}); 
```

那么如何在动画结束时获得平滑的滚动而不会出现丑陋的跳跃呢？有任何想法吗？

我真的不知道该怎么办。和那个婊子一起度过几个小时！

感谢您的建议！

**编辑**

有了这个新代码：

```
$(document).ready(function() {
    $('a[href*=#]').bind("click", function(event) {
        event.preventDefault();
        var ziel = $(this).attr("href");
        $('#portrait-entry').animate({
            scrollTop: $(ziel).offset().top - 230
        }, 1500 , function (){

            if(window.history.replaceState){
                window.history.replaceState(null, document.title, ziel); // <--here
            }
        });
});
return false;
}); 
```

流畅的滚动工作没有难看的跳跃 **但是**现在我的锚链接不能按他们应该的方式工作。

请检查[问题](http://rose.developertinger.de/anwalte-team/gregor-rose/)- 当您单击“fortbildungen”然后单击“mitgliedschaften”时，它不会向下滚动到锚点。我想我必须重置或某事。就像那样，因为我认为当您在#anchor 页面上时，链接无法正常工作。

我不喜欢 js/jquery。所以也许有人可以给我一个建议。我不知道如何谷歌这种问题。

感谢您的帮助和编辑的代码，这使我的滚动顺畅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:00:29.043

只是因为您更改了动画回调中的 url 导致丑陋的跳跃。

支持 html5 的浏览器的解决方案是使用“window.history.replaceState”来更改 url 而不是直接更改 url。

代码如下：

```
$(document).ready(function() {
    $('a[href*=#]').bind("click", function(event) {
        event.preventDefault();
        var ziel = $(this).attr("href");

        $('#portraitcontent').animate({
            scrollTop: $(ziel).offset().top
        }, 2500 , function (){

            if(window.history.replaceState){
                window.history.replaceState(null, document.title, ziel); // <--here
            }
        });
});
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:56:04.157

最后我决定删除这个scrollTop代码并切换到jQuery.scrollTo插件和jQuery.localScroll。

只是让你知道

# php - SendGrid：使用 API 获取精确的统计数据

> ID：13716080
> 
> 赞同：1
> 
> 时间：2012-12-05T04:01:26.837
> 
> 标签：php, sendgrid

我在通过与打开、点击等有关的 API 获取数据时遇到了一些麻烦（如果可能的话，现在也不会），但精度更高。有了这个，我的意思是能够知道谁打开了电子邮件，谁点击了它们，他们点击了哪里等等。这可能吗？如果是这样，任何示例调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:13:59.833

您实际上无法通过历史统计 API 检索该信息。我们实际上汇总了所有单个事件（点击、打开等）并忽略了额外的信息。它旨在真正用于报告。

另一方面，您可以使用[events webhook](http://sendgrid.com/docs/API%20Reference/Webhooks/event.html)来实时获取您正在寻找的数据。没有办法对此进行历史查询，但是当事件通过我们的系统时，你会得到这样的 POST：

```
{"email":"foo@bar.com","timestamp":1322000095,"unique_arg":"my unique arg","event":"delivered"}
{"email":"foo@bar.com","timestamp":1322000096,"unique_arg":"my unique arg","event":"open"} 
```

文档中也有一个 PHP 示例。

# python - 从一个类中获取变量到另一个类

> ID：13716081
> 
> 赞同：1
> 
> 时间：2012-12-05T04:01:39.190
> 
> 标签：python, python-3.x

我对编程和 python 很陌生。我正在制作一个战斗模拟器，现在我已经完成了一个不太聪明的防守者的制作，我正在尝试构建一个可以尝试解释如何防守的 AI。我需要从我的一个类（攻击者）中获取一些变量到我的另一个类（智能防御者）中，我的一位讲师告诉我，将一个类导入另一个类并不是编写代码的好方法。有没有办法让我的攻击者类中的变量进入我的智能防御者类而不将攻击者类导入它？我很感激输入！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:46:12.133

“导入”类可能是一个好主意，具体取决于“导入”的含义。但是，在 Python 中，您不需要进行任何导入来传递数据。

防御者类可以像任何对象一样简单地访问攻击者类。

```
class Defender(object):

    def spy_on_attacker(self, attacker):
        guns = attacker.guns
        weight = attacker.weight 
```

等等。所以你不需要做任何特别的事情，真的。

# android - 处理数据 IO 吞吐量？

> ID：13716083
> 
> 赞同：1
> 
> 时间：2012-12-05T04:01:55.673
> 
> 标签：android, multithreading, android-handler

android可行的数据IO吞吐量是`Handlers`多少？足以在线程之间传递原始音频或视频？它应该是可持续的吗？

我没有在[android`Handler`文档](http://developer.android.com/reference/android/os/Handler.html)、$WEB_SEARCH 或 SO 中看到对此的任何引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:38:05.097

> 足以在线程之间传递原始音频或视频？它应该是可持续的吗？

这取决于您的实施。最终，您需要基于共享内存或基于深拷贝的通信。如果要发送数据的副本（或连续的数据块副本流），它会有性能开销，但不是由于`Handlers`，而是由于实际的内存复制。

这是因为`Handlers`仅发送和处理`Message`对象。您可以使用 的`obj`字段`Message`来传递任何对象引用，即您可以使用它来发送对任何数据的（同步）引用。如果将原始引用发送给某些数据，就会像共享内存通信一样。如果您先复制数据，然后将引用发送到该副本，则基本上是深度复制。在任何一种情况下，您都在处理相同的进程内存区域，因此可持续性取决于通信协议而不是`Handlers`. （显然，如果你`Message`为每个`int`音频/视频数据的值发送一个，它会很慢。）

# javascript - 获取 .txt 文件的内容并循环结果

> ID：13716087
> 
> 赞同：2
> 
> 时间：2012-12-05T04:02:24.230
> 
> 标签：javascript, ajax, json

我有一个文本文件，其中列出了如下图像：

```
images/0.png
images/1.png
images/2.png 
```

我的问题是我还需要对文本文件中的数据进行 json_encode 吗？Aka 而不是将原始文本存储在我的文本文件中，只存储一个 json_encoded 版本并以这种方式请求它，或者像上面显示的那样获取原始文本就足够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:15:27.017

您最好将文本（如您所说的那样）编码为 JSON（或 XML）并读入。这样您就可以处理预定义的对象和预定义的处理内容的方法，而不必自己编写一堆代码来解析数据出来。

您还将采用标准方法来定义数据。这将允许您以其他方式使用它，并在需要时与其他类型的应用程序一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:09:58.993

您不需要对其进行 JSON 编码。我会作为个人喜好。但是您可以通过换行符分割字符串。

```
 var images = data.split("\n"); 
```

# c - 使用 gmp 编译时出错

> ID：13716088
> 
> 赞同：0
> 
> 时间：2012-12-05T04:02:58.220
> 
> 标签：c, compiler-errors, gmp

尝试编译使用 GMP 的代码时出现此错误。有什么办法可以解决这个问题吗？我使用 Visual Studio 2010 命令提示符进行编译，这是我使用的命令：

> cl testing.c gmp.lib

```
int main(void)
{
    mpz_t a,b;
    mpz_init(b);
    mpz_init(a);
    gmp_randstate_t rstate; // the problem arises when declaring this
}

testing.c
testing.c(9) : error C2275: 'gmp_randstate_t' : illegal use of this type as an e
xpression
        c:\cygwin\home\administrator\ss\gmp.h(252) : see declaration of 'gmp_ran
dstate_t'
testing.c(9) : error C2146: syntax error : missing ';' before identifier 'state'

testing.c(9) : error C2065: 'state' : undeclared identifier
testing.c(11) : error C2065: 'state' : undeclared identifier
testing.c(11) : warning C4047: 'function' : '__gmp_randstate_struct *' differs i
n levels of indirection from 'int'
testing.c(11) : warning C4024: '__gmp_randinit_default' : different types for fo
rmal and actual parameter 1
testing.c(13) : error C2065: 'state' : undeclared identifier
testing.c(13) : warning C4047: 'function' : '__gmp_randstate_struct *' differs i
n levels of indirection from 'int'
testing.c(13) : warning C4024: '__gmpz_urandomb' : different types for formal an
d actual parameter 2
testing.c(14) : error C2065: 'state' : undeclared identifier
testing.c(14) : warning C4047: 'function' : '__gmp_randstate_struct *' differs i
n levels of indirection from 'int'
testing.c(14) : warning C4024: '__gmpz_urandomb' : different types for formal an
d actual parameter 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T19:25:05.473

你只是忘了初始化它。

“这样的变量必须通过调用 gmp_randinit 函数之一来初始化，并且可以使用 gmp_randseed 函数之一作为种子。” - 手册第 65 页。

# sql - ef5 ObjectQuery“喜欢”

> ID：13716089
> 
> 赞同：0
> 
> 时间：2012-12-05T04:03:12.827
> 
> 标签：sql, entity-framework, ado.net, objectquery

我将 EF5 用于 ObjectQuery，

```
var query = this.ObjectContext.CreateQuery<Role>("SELECT VALUE n FROM Role as n");
query = query.Where("it.Name like '%@name%'", new ObjectParameter("name", name)); 
```

但它不起作用，它总是返回所有结果。有任何想法吗？多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:19:22.210

你想用`.Contains`. 在字符串列上使用时转换为 Sql`LIKE`

# php - wordpress query_posts 打破特色图片

> ID：13716090
> 
> 赞同：0
> 
> 时间：2012-12-05T04:03:13.880
> 
> 标签：php, wordpress

我在 WordPress 网站上的页面（不是帖子）上使用特色图片。它工作正常，直到我`query_posts`在页面模板中使用，然后标题/品牌 img 恢复为标准图像。

这是我正在使用的代码：

```
<?php 
query_posts(array('category_name'=>'news-and-features', 'posts_per_page' => 2 ));
while (have_posts()) : the_post(); ?>
  <div class="single-post">
    <h3><a href="<?php echo get_permalink(); ?>"><?php the_title();?></a></h3> 
    <?php the_time('D jS M, Y') ?>
    <?php the_excerpt();?>
</div>
<? endwhile; ?> 
```

帖子摘录显示正常。只是`query_posts`打破了特色形象。

有没有人也发现了这个？或者任何可能的解决方案？

我正在使用自定义子主题，以上内容在模板中。

MTIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:08:32.443

您可能需要在结束后添加它

```
<?php wp_reset_query(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:19:28.330

您还没有破坏您使用 进行的查询`query_post`。

[wp_reset_query()](http://codex.wordpress.org/Function_Reference/wp_reset_query)应该用于重置循环。它应该在你的循环之后添加，在你的情况下，在`endwhile`.

# javascript - Javascript幻灯片不滑动

> ID：13716096
> 
> 赞同：0
> 
> 时间：2012-12-05T04:03:56.097
> 
> 标签：javascript, css, xhtml

我正在尝试从 2008*年 24 小时内的 Javascript*一书中制作幻灯片。我想我已经复制了相同的代码，但是图片随机播放，但它们并没有像书中所说的那样滑入。有人介意花时间看看这个吗？提前致谢！

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Slideshow</title>
<style>
img.slide {
position: absolute;
left:0;
top:0;
}

#slideshow {
    position:relative;
    overflow:hidden;
    width:400px;
    height:400px;
}
</style>

<script>
// Slideshow
// Global variables
var numslides=0;
var currentslide=0,oldslide=4;
var x = 0;
var slides = new Array();
function MakeSlideShow() {
imgs=document.getElementsByTagName("img");
for (i=0; i<imgs.length; i++) {
    if (imgs[i].className != "slide") continue;
    slides[numslides]=imgs[i];
    //Stack images with the first slide on top
    if (numslides==0) {
        imgs[i].style.zIndex=10;
    }
    else {
        imgs[i].style.zIndex=0;
    }
    imgs[i].onclick=NextSlide;
    numslides++;
} // end for loop
}// end MakeSlideShow

function NextSlide() {
//Set the current slide to be under the new top slide
slides[currentslide].style.zIndex=9;
// Move older slide to the bottom of the stack
slides[oldslide].style.zIndex=0;
oldslide = currentslide;
currentslide++;
if (currentslide >= numslides) currentslide = 0;
// Start at the right edge
slides[currentslide].style.left=400;
x=400;
//Move the new slide to the top
slides[currentslide].style.zIndex=10;
AnimateSlide();
}

function AnimateSlide() {
// Lower moves slower, higher moves faster
x = x - 25;
slides[currentslide].style.left=x;
//Previous image moves off the left edge
slides[oldslide].style.left=x-400;
//Repeat until until the slide is at the zero position
if (x > 0) window.setTimeout("AnimateSlide();",10);
}
</script>
</head>

<body onload="MakeSlideShow();">
            <div id = "slideshow">
                <img class = "slide" src = "pic1.jpg" width = "400px" height = "400px" >
                <img class = "slide" src = "pic2.jpg" width = "400px" height = "400px" >
                <img class = "slide" src = "pic3.jpg" width = "400px" height = "400px" >
                <img class = "slide" src = "pic4.jpg" width = "400px" height = "400px" >
                <img class = "slide" src = "pic5.jpg" width = "400px" height = "400px" >
            </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:35:02.200

我认为问题在于您已将 html 代码嵌入到 XML 文档中。如果你摆脱`<?xml version="1.0" encoding="UTF-8"?>`了页面顶部，它应该得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:36:04.733

它可以工作，它会在单击当前图像时滑动到下一个图像。代码中的第 40 行，

```
imgs[i].onclick=NextSlide; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:26:13.323

您好，您的脚本非常好...

问题出在这个函数的两行

```
 function AnimateSlide() {
    ...
    ...
    slides[currentslide].style.left=x;
    slides[oldslide].style.left=x-400;
    ...
    } 
```

修改是左值应该有“px”。所以修改线是

```
slides[currentslide].style.left=x +"px";
slides[oldslide].style.left=x-400 +"px"; 
```

现在它在滑动。jsfiddle Demo 路径为[http://jsfiddle.net/naveenksh/Jvkcc/5/](http://jsfiddle.net/naveenksh/Jvkcc/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:27:53.163

我的简单幻灯片版本：

[http://jsfiddle.net/rXkVG/11/](http://jsfiddle.net/rXkVG/11/)

（一个[更聪明的例子](http://jsfiddle.net/rXkVG/12/)。）

```
window.addEventListener('load', function load() {
    var slideshow = document.getElementById('slideshow'),
        imgs = slideshow.getElementsByTagName("img"),
        offset = 178,
        speed = 25,
        step = 10,
        animated = false,
        slides = [];

    SetupSlideShow();

    function SetupSlideShow() {
        var items = imgs.length,
            next = items,
            slide;

        while (next--) {
            slide = imgs[next];

            if (slide.className.indexOf("slide") != -1) {
                slides.push(slide);

                slide.style.zIndex = items - next;

                slide.addEventListener('click', Change);
            }
        }
    }

    function Change() {
        if (animated) {
            return;
        }

        Animate();
    }

    function Animate() {
        var slide = slides[slides.length - 1],
            left = 0;

        animated = true;

        slideshow.style.cursor = 'wait';
        slide.style.left = left;

        (function animate() {
            left = left - step;

            if (left > offset * -1) {
                slide.style.left = left + 'px';

                setTimeout(animate, 25);
            } else {
                animated = false;

                slideshow.style.cursor = 'pointer';

                Next();
            }
        })();
    }

    function Next() {
        var slide = slides.length;

        slides.unshift(slides.pop());

        while (slide--) {
            slides[slide].style.zIndex = slide;
            slides[slide].style.left = 0;
        }
    }
});​ 
```

# rabbitmq - 有没有办法以编程方式配置铲子？

> ID：13716102
> 
> 赞同：0
> 
> 时间：2012-12-05T04:04:56.607
> 
> 标签：rabbitmq, amqp, spring-amqp

我们正在开发一个 Spring-AMQP - RabbitMQ 应用程序。我们想使用 shovel 将消息从本地队列复制到远程队列，但我们希望从 spring 应用程序中进行消息服务的几乎所有配置。

在这一点上，我们能够从应用程序本身创建队列、交换等，但我们找不到从同一个应用程序配置铲子的方法。有没有办法做到这一点？

如果我们使用联邦插件而不是铲子，有没有比使用 Spring-AMQP 铲子更好的配置方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T20:53:58.580

看起来没有办法以编程方式配置铲子。我最终所做的是直接从我的应用程序中修改铲配置文件，然后重新启动rabbitmq。是一个丑陋的解决方案，但有效。

# sql - H2数据库中的Oracle MERGE语句

> ID：13716105
> 
> 赞同：15
> 
> 时间：2012-12-05T04:05:36.797
> 
> 标签：sql, h2, sql-merge

我们开始使用内存数据库中的 H2 进行自动化测试。我们将 Oracle 用于我们的生产和开发环境。所以这个想法是复制 H2 测试数据库中的表结构，就像它在我们的 Oracle 开发数据库中一样。

Oracle SQL 语句包括 MERGE 语句，并在查询中使用表名和 USING 的别名。

如何动态修改此查询以与 H2 兼容，而不会改变开发环境中的现有查询？

与 H2 兼容的 Oracle SQL 示例，

```
MERGE INTO TABLE T1
USING ( SELECT ....
        ...........
        FROM DUAL) T2 
```

（T1 & T2 是表的别名）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T05:44:57.323

H2 中的[MERGE 语句](http://h2database.com/html/grammar.html#merge)有一个稍微不同的更简单的语法：

```
MERGE INTO TEST(ID, NAME) KEY(ID)
SELECT 1, 'Hello' FROM DUAL 
```

我想您必须编写两条语句，一条用于 H2，一条用于 Oracle。但是，该`SELECT`部分将是相同的。[Oracle MERGE 语句](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)会更长，我相信它会是：

```
MERGE INTO TEST T
USING (SELECT 1 ID, 'Hello' NAME FROM DUAL) D
ON (T.ID = D.ID)
WHEN MATCHED THEN 
UPDATE SET T.NAME = D.NAME
WHEN NOT MATCHED THEN 
INSERT (B.ID, B.NAME) VALUES (D.ID, D.NAME); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-11T14:37:13.663

标准 SQL 合并语法支持目前在H2[的路线图上。](http://www.h2database.com/html/roadmap.html)

> *   支持标准的MERGE语句：[http ://en.wikipedia.org/wiki/Merge_%28SQL%29](http://en.wikipedia.org/wiki/Merge_%28SQL%29)

但是，在某些简单的情况下，您可以使用*INSERT ... SELECT + WHERE NOT EXISTS* 例如仅在记录不存在时插入

```
INSERT INTO T1(K1, V2, V3) 
SELECT 1, 2, 3 FROM DUAL
  WHERE NOT EXISTS (SELECT 1 FROM T1 WHERE
K1 = 1 AND V2 = 2 AND V3 = 3); 
```

这种构造在 Oracle 和 H2 中都有效（至少在 MODE=Oracle 中），因此您不必为测试和生产分别插入 SQL。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-10-25T13:30:56.530

我来自 2019 年。H2 支持标准“合并到...使用...何时...”。 [文档](http://www.h2database.com/html/commands.html#merge_using)

# java - x = (int)(Math.random() * 1) 0 或 1 的概率是多少？

> ID：13716106
> 
> 赞同：0
> 
> 时间：2012-12-05T04:05:55.787
> 
> 标签：java, math, random

那是确切的代码然后我有一个案例 0 的开关：和案例 1：似乎案例 1：每次都会出现，我希望有 50/50 的机会出现 0 或 1 这是正确的方法还是我应该使用 1.5 或者这到底是如何工作的？

```
talka = (int)(Math.random() * 1);
        switch(talka)
        {

        case 0:
        {
            talk.setAnimationListener(this);
            talk.playtimes(1,24);
            startService(new Intent(this, love1.class));
            break;
        }
        case 1:
        {
            talk.setAnimationListener(this);
            talk.playtimes(1,12);
            startService(new Intent(this, love2.class));
            break;
        }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T04:07:04.443

只需使用一个`java.util.Random`对象并简单地调用`nextBoolean()`它，它将在 50:50 分布中返回 true 或 false。轻松如`Math.PI`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T09:35:02.703

这总是四舍五入。

```
talka = (int)(Math.random() * 1); // between 0 and 0 
```

你的意图也许是

```
talka = (int)(Math.random() * 2); // between 0 and 1 
```

但是，使用 Math.random() 获取一位是非常低效的。

如果您使用 Random 与

```
talka = random.nextInt(2); 
```

甚至更好

```
talk.setAnimationListener(this);
if (random.nextBoolean()) {
        talk.playtimes(1,24);
        startService(new Intent(this, love1.class));
} else {
        talk.playtimes(1,12);
        startService(new Intent(this, love2.class));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T04:44:43.820

变量`talka`将始终为零；Math.random 返回一个值，其中 0 <= x < 1; 由于 x 必须小于 1 并且`(int)`强制转换会截断小数部分，因此整数结果将始终为 0。

从 Math.random 文档中：

> 返回一个带正号的双精度值，大于或等于 0.0 且小于 1.0。

改为使用`java.util.Random.nextBoolean()`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T04:15:31.133

问题与演员的工作方式有关。

在可能的测试中，Java 基本上是在“修剪”小数结果并简单地取出“整数”组件。但是，如果我对结果进行四舍五入，我会得到它在 0 和 1 之间翻转。

玩一玩

```
int ones = 0;
int zeros = 0;
for (int index = 0; index < 100; index++) {

    double rand = Math.random() * 1;
    if (Math.round(rand) == 1) {
        ones++;
    } else {
        zeros++;
    }
    System.out.println(rand + " - " + (int)Math.round(rand) + " - " + (int)Math.random() * 1);

}

System.out.println("Ones = " + ((float)ones / 100f));
System.out.println("Zeros = " + ((float)zeros / 100f)); 
```

这是我的简单测试，我接近 50/50 标记 (+/-)

正如 Hovercraft 所指出的，最好`java.util.Random`在这种情况下使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T04:21:31.423

**-**使用它会更好，更容易`java.util.Random`。

**-**使用`nextBoolean()`它的方法。

**例如：**

```
public class Rand {

    public static void main(String[] args){

        Random r = new Random();

        System.out.println(r.nextBoolean());  // See there is a equal
                                                      // true-false division
    }

} 
```

# ios - iphone ios 网页浏览器可以打开一个弹窗吗？

> ID：13716112
> 
> 赞同：0
> 
> 时间：2012-12-05T04:06:31.620
> 
> 标签：ios, xcode, popupwindow

我正在尝试在 xcode 中编写一个简单的 ios Web 浏览器应用程序，可以在访问网站时打开一个弹出窗口？

我可以在 xcode 应用程序中访问 url，但无法让它处理弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:23:28.377

在 .h 文件中添加 UIWebViewDelegate 并添加 webview 的委托方法

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView
 {
   //Add your code for popup window
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:12:07.490

不确定我是否理解这个问题，所以我的回答将基于我对你想要完成的事情的理解。

选项 1：使用一点 JQuery Mobile 怎么样？见：http: [//jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/)

选项 2：显示带有 UIWebView 作为子视图的 UIAlertView。

# asp.net - 生产就绪 STS

> ID：13716122
> 
> 赞同：0
> 
> 时间：2012-12-05T04:07:47.970
> 
> 标签：asp.net, asp.net-mvc-4, forms-authentication, single-sign-on, adfs

对与 ADFS 2.0 一起使用的各种数据源的支持仅限于 Active Directory。我需要一个生产就绪的 STS 来针对门户内的表单身份验证对我的用户进行身份验证，以访问各种应用程序（单点登录）。在玩过 ADFS 2.0 之后才知道它只适用于 Active Directory。所以我的用户在一个 SQL 表中，我希望门户在用户提供用户名和密码后向驻留应用程序发出声明。有没有人有任何线索，如何使用 ADFS 或微软的其他软件来实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:00:38.807

看看[IdentityServer](http://thinktecture.github.com/)。

它针对 SQL Server 进行身份验证并与 ADFS 很好地联合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:32:50.150

提到的 IdentityServer 是一个不错的选择。但考虑编写自己的 STS。这很容易，让您可以完全控制各种情况（找回丢失或过期的密码、单点注销等）

# c++ - 指针解引用问题

> ID：13716124
> 
> 赞同：0
> 
> 时间：2012-12-05T04:08:00.380
> 
> 标签：c++, pointers, swap, double-pointer

我有一个函数`void MOVE_TO(Square **sendingSquare, Square **receivingSquare)`，`Square`一个类在哪里：

```
class Square;
class Entity
{    
public:
    Square *currentSq;
};//  Just a data type--pretend it's your favorite class.
class Square
{
public:
    Entity *occupant;
};

void MOVE_TO(Square **sendingSquare, Square **receivingSquare)
{
    Entity *movingOccupant = (*sendingSquare)->occupant;
    (*receivingSquare)->occupant = movingOccupant;
    movingOccupant->currentSq = *receivingSquare;
    (*sendingSquare)->occupant = NULL;
} 
```

问题是，当`MOVE_TO(...)`返回时，两个方格都指向接收方格，而应该被移动的居住者已经完全消失了。想法/建议？我的代码几乎被卡住了，直到我能解决这个问题。如果我在提出任何建议之前弄清楚我的问题，我会回来回答我自己的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:35:34.087

我假设您要将实体的实例从发送方移动到接收方，并调整移动实体的 currentSq 以使其恢复为接收方。

如果是这种情况，下面的代码将执行此操作：

```
#include <iostream>
using namespace std;

class Square;
class Entity
{    
public:
    Square *currentSq;
    Entity(): currentSq(NULL){}//set currentSq to NULL using constructor initialization list
};

class Square
{
public:
    Entity *occupant;
    Square(): occupant(NULL){}//set occupant to NULL using constructor initialization list
};

//MOVE_TO with single '*'
void MOVE_TO(Square *sendingSquare, Square *receivingSquare)
{
    Entity *movingOccupant = sendingSquare->occupant;
    receivingSquare->occupant = movingOccupant;
    movingOccupant->currentSq = receivingSquare;
    sendingSquare->occupant = NULL;
}

int main(int argc, char** argv) {
    //create instances
    Square *sendingSquare = new Square(), *receivingSquare = new Square();
    Entity *entity = new Entity();

    //set up instances accordingly
    sendingSquare->occupant = entity;
    entity->currentSq = sendingSquare;

    //print instances address before MOVE_TO invoked
    //we know that receivingSquare.occupant is NULL, printing receivingSquare.occpuant.currentSq is commented
    cout << "sendingSquare: "<< sendingSquare 
         << ", sendingSquare.occupant: " << sendingSquare->occupant
         << ", sendingSquare.occupant.currentSq: " <<  sendingSquare->occupant->currentSq
         << ", receivingSquare: " <<receivingSquare 
         << ", receivingSquare.occupant: " << receivingSquare->occupant 
         //<< ", sendingSquare.occupant.currentSq: " << receivingSquare.occupant->currentSq
         << endl;

    MOVE_TO(sendingSquare,receivingSquare);

    //print instances address afer MOVE_TO invoked
    //we know that sendingSquare.occupant is NULL, printing sendingSquare.occpuant.currentSq is commented 
    cout << "sendingSquare: "<< sendingSquare 
         << ", sendingSquare.occupant: " << sendingSquare->occupant
         //<< ", sendingSquare.occupant.currentSq: " <<  sendingSquare.occupant->currentSq
         << ", receivingSquare: " << receivingSquare 
         << ", receivingSquare.occupant: " << receivingSquare->occupant 
         << ", receivingSquare.occupant.currentSq: " << receivingSquare->occupant->currentSq
         << endl;

    //commenting instance deletion. The program is ended anyway
    //delete entity,sendingSquare,receivingSquare;
    return 0;
} 
```

# apache - Apache 查询字符串重写

> ID：13716132
> 
> 赞同：0
> 
> 时间：2012-12-05T04:09:07.247
> 
> 标签：apache, rewrite

我正在尝试在 Apache 中重写查询字符串。

**当前（示例）域是：** example.com/ ?domain=domain.com

**我希望将其重写为：** example.com/domain.com

**所以，当用户输入：** example.com/ ?domain=domain.com

**他们总是被重定向到漂亮的版本：** example.com/domain.com

我尝试了很多不同的重写，例如：

```
RewriteEngine On
RewriteRule ^([^/]*)$ /?domain=$1 [L] 
```

但这在启用 .htaccess 和 ModRewrite 的情况下不起作用（即没有任何反应）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:29:06.053

试试这个 -

```
RewriteCond %{QUERY_STRING} ^domain=(.*)$
RewriteRule ^(.*)$ http://example.com/%1? [L] 
```

最后的空问号很重要，因为它会丢弃原始查询字符串。

# windows-services - 创建批处理文件以停止服务 - 服务名称无效

> ID：13716133
> 
> 赞同：1
> 
> 时间：2012-12-05T04:09:08.067
> 
> 标签：windows-services, batch-file

我注意到每当我启动服务（通过cmd启动批处理文件）时，多个单词用空格分隔，cmd提示服务名称无效

工作批处理文件：

```
@echo off
net start AdobeARMService 
```

不工作的批处理文件：

```
@echo off
net start Sample Windows Service 
```

如何使用空间运行服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:11:31.473

没关系，我有它的工作。只需在具有多个单词的服务上加上引号..

样本：

```
@echo off
net start "Sample Windows Service" 
```

# java - 根据 Input Java 更改数组初始化

> ID：13716136
> 
> 赞同：1
> 
> 时间：2012-12-05T04:09:25.867
> 
> 标签：java, arrays, string, multidimensional-array

我有一个二维布尔数组，我想根据传入的输入动态创建它的大小。例如：我将此字符串作为输入“0-1 0-2 1-2 1-3 2-3”。我在破折号上拆分它并将其解析为一个 int。所有这些坐标都是布尔数组中的位置。当我为此示例初始化下面的数组时，它可以工作。但是如果输入发生变化，我如何动态初始化它呢？

```
myArray = new boolean [4][4]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:17:28.283

如果您必须使用固定大小的数组，您可以`max`分别找到每个坐标的值，并使用这些值进行初始化：

```
int maxR = 0, maxC = 0;
for (String pair : pairs) {
    int r = ... // first part of the split
    int c = ... // second part of the split
    maxR = Math.max(maxR, r);
    maxC = Math.max(maxC, c);
}
boolean[][] myArray = new boolean[maxR][maxC]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:16:10.890

您可以改用 ArrayLists。您可以根据需要种植它们。（缩小它们更难。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:18:41.043

在空格上拆分字符串，“”它会给你坐标总数。

```
 String[] splitted = "0-1 0-2 1-2 1-3 2-3".split(" "); 
```

遍历数组，在“-”上拆分并获得 maxX 和 maxY。这将为您提供数组的尺寸。

声明会像

```
boolean[][] myArray = new boolean[maxX][maxY]; 
```

希望能帮助到你

# database - 如何有效地存储预定日期？

> ID：13716137
> 
> 赞同：0
> 
> 时间：2012-12-05T04:09:28.790
> 
> 标签：database, algorithm, scheduler

例如我有：

1.  **开始日期** （1 列）
2.  **结束日期** （1 列）
3.  **工作日**：周一、周二、周三、周四、周五、周六、周日（1 列）

如何定义星期，以便可以将上述数据存储在数据库的 3 字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:41:15.137

从处理的角度来看，不建议将这 3 个字段存储在单个单元格中。在写入和读取表时，您将不得不经历不必要的开销来编码和解码数据，并且还需要执行额外的数据类型转换！

您可以尝试类似 : ,, Where : 124 表示周一、周二和周四。但如上所述，这不是正确的方法。

理想情况下，每个项目都有 3 列，并以多种格式存储工作日：

1.  `<weekday_list_to_run_the _scheduled_tasks>`: 我们编码`Monday, Tuesday and Thursday`为`124`. 需要最多的处理。
2.  古老的 AND-ing：
    假设我们存储`<weekday_list_to_run_the _scheduled_tasks> = Monday-X-X-Thursday-Fri-X-Sunday`为`1001101`. 然后通过 7 次 AND-ing 操作，我们找到了计划应该运行的日期。

例如。

```
IF (<weekday_list_to_run_the _scheduled_tasks> AND 1000000) == 1 THEN 
     //Monday is set. 
END IF 
```

# c++ - 两点运动不起作用

> ID：13716139
> 
> 赞同：-3
> 
> 时间：2012-12-05T04:09:47.137
> 
> 标签：c++, visual-studio-2010, opengl, graphics

在这里我有两个点，其中一个是固定的，另一个是通过鼠标单击更改的这红色

```
 #include <iostream>
   #include <stdlib.h> //Needed for "exit" function
   //Include OpenGL header files, so that we can use OpenGL
   #include <glut.h>
   using namespace std;
    void init();
   void display();
   float a = 200.0, b= 200.0;
   void setPoint(float x, float y){
   glColor3f(1.0, 0.0, 0.0);  //drawing object
   glBegin(GL_POINTS);
   glVertex2f(x,y);
   glEnd();

   }
  int m=50;
  int n=50;
  void setPoint2(int m,int n){
  glColor3f(1.0, 1.0, 0.0);  //drawing object
  glBegin(GL_POINTS);
  glVertex2f(m,n);
  glEnd();
   }

 void init(){
 glClearColor(1.0,1.0,1.0,1.0);
 gluOrtho2D(0.0, 400.0, 0.0, 300.0);
   }
 void display(){
  glClear( GL_COLOR_BUFFER_BIT);   //defult point
  glPointSize(10.0);
  setPoint(a,b);
  setPoint2(m,n);
  glFlush();
  }
  void update(){
while(a!=m || b!=n){
if(a>m&&b>n)
{
    m++;
    n++;
    setPoint2(m,n);

}
else if(a>m&&b<n)
{
    m++;
    n--;
    setPoint2(m,n);

}
else if(a<m&&b>n)
{
    m--;
    n++;
    setPoint2(m,n);

}
else  if(a<m&&b<n)
{
    m--;
    n--;
    setPoint2(m,n);

}

    //  glTranslatef(m,n,0);    
}

    }
    void mouse(int mouse, int state, int x, int y){
    switch(mouse){
    case GLUT_LEFT_BUTTON:
    if(state == GLUT_DOWN){
    cout << x << " -> " << y << endl;

    /*a=x;
    b=y;*/
    a = x/1.0;
    b = 300.0 - (y/1.0);

   glutPostRedisplay();

  }
 break;

   }

  }
  int main(int argc, char* argv[]){
  glutInit(&argc, argv);
  glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE);
  glutInitWindowSize(400,300);
  glutInitWindowPosition(200,100);
  glutCreateWindow("OpenGL Program");
  init();
  glutDisplayFunc(display);
  glutMouseFunc(mouse);
 //glutTimerFunc(25,update, 0); //Add a timer
 glutMainLoop();
      return 0;
     } 
```

在调试红点（变量一）时，鼠标单击固定点（黄色）的问题，它没有像我想要的那样移动到红色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:40:50.577

这里最明显的两个问题是您似乎实际上没有任何调用更新函数的东西，如果您这样做了，那么您的移动代码专门用于只进行对角线移动，所以如果这些点在水平或垂直线上，他们不会移动。

自从我使用 GLUT 以来已经有一段时间了，但我认为一般要做的是将您的 update() 逻辑放入“空闲”回调中，并`glutPostRedisplay()`在其末尾执行 a 。

除此之外，使用如此多的全局变量，尤其是单字符命名的全局变量，其名称反映了函数参数的名称，非常令人困惑。

# c# - 从 sql 检索数据到 datagrid 视图

> ID：13716145
> 
> 赞同：1
> 
> 时间：2012-12-05T04:10:13.450
> 
> 标签：c#

此代码不会运行它应该填充 datagridview 一些数据，但我得到的只是检索了多少数据的行，但每个单元格上没有值

```
 public void refDGV()
    {

        con.OpenConnections();
        SqlCommand cmd = new SqlCommand();
        SqlConnection cn = new SqlConnection();
        SqlDataAdapter da = new SqlDataAdapter();
        DataSet ds = new DataSet();
        cmd.Connection = cn;
        cmd.CommandType = CommandType.Text;
        cn.ConnectionString = con.connections1;
        cmd.CommandText = "Select  dtransdate, ntotal_pass, nincomeday, ndiesel_exp,  nstartkm, nendkm  from ROUTE2 where ccontrol_no = '" +txtCN.Text + "'";
        da = new SqlDataAdapter();
        da.SelectCommand = cmd;
        ds = new DataSet();
        da.Fill(ds, "Data");
        dgroute.DataSource = ds;
        dgroute.DataMember = "Data";
       dgroute.Columns[0].HeaderText = "Date";
       dgroute.Columns[1].HeaderText = "Total Passenger";
       dgroute.Columns[2].HeaderText = "Income Day";
       dgroute.Columns[3].HeaderText = "Diesel (w/ reciept)";
       dgroute.Columns[4].HeaderText = "Start";
       dgroute.Columns[5].HeaderText = "End";

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:21:24.393

你总是可以创建一个数据库类，如果你需要重构这个类以传入连接字符串或从 .Config 文件中读取连接字符串，你可以使用它作为模板开始，而且它更干净注意我正在返回一个 DataTable如果你只喜欢一个建议，你可以使用它

```
public class ClassDataManagement 
{ 
   public DataTable GetData(string sqlcmdString, string connString)
   {
       SqlConnection con = new SqlConnection(connString);
       SqlCommand cmd = new SqlCommand(sqlcmdString, cn);
       SqlDataAdapter da = new SqlDataAdapter(cmd);
       con.Open();
       DataTable dt = new DataTable();
       da.Fill(dt);
       return dt;
   } 
} 
```

如果您想使用 DataSet 而不是 DataTable 替换我有 DataTable 的地方或更改方法以返回如下所示的 DataSet

```
 public DataSet GetData(string sqlcmdString, string connString)
   {
       SqlConnection con = new SqlConnection(connString);
       SqlCommand cmd = new SqlCommand(sqlcmdString, cn);
       SqlDataAdapter da = new SqlDataAdapter(cmd);
       con.Open();
       DataSet ds = new DataSet();
       da.Fill(ds);
       return ds;
   } 
```

返回 ds 后，您需要像这样绑定它

```
 dgroute.DataSource = ds;
   dgroute.DataBind(); 
```

也为你 dgroute Header 我认为代码在将 Data 分配给 ColumnHeader 时应该是这样的

```
 dgroute.Rows[0].Column["Heading"] = "Date";
   dgroute.Rows[1].Column["Heading"] = "Total Passenger";
   dgroute.Rows[2].Column["Heading"] = "Income Day";
   dgroute.Rows[3].Column["Heading"] = "Diesel (w/ reciept)";
   dgroute.Rows[4].Column["Heading"] = "Start";
   dgroute.Rows[5].Column["Heading"] = "End"; 
```

**重构您的 Sql Select 语句以及允许您为 SQL 注入设置的参数只是一个建设性的建议

# sql - 查询执行没有错误但不在触发器中

> ID：13716146
> 
> 赞同：0
> 
> 时间：2012-12-05T04:10:17.900
> 
> 标签：sql, sql-server-2008, triggers

我在 MS SQL 中创建触发器时遇到了一个奇怪的问题。我有一个执行没有错误的查询，但是当我将它放在触发器正文中时，它给出了错误

> 列名“ScreenName”无效。

我将整个触发代码放在这里。

```
CREATE TRIGGER [dbo].[tr_tbFieldLabels_FieldLabelLength] ON [dbo].[tbFieldLabels]
AFTER INSERT
AS
    Update tbFieldLabels 
    Set TextBoxLength = (SELECT top 1 TextboxLength 
                              FROM  tbFieldLabelsSource FLS
                              WHERE FLS.ScreenName = Inserted.ScreenName
                              AND  FLS.SystemName = Inserted.SystemName)
     FROM tbFieldLabels , Inserted WHERE tbFieldLabels.ID = Inserted.ID
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:01:48.840

您的错误与显示的触发代码无关。

鉴于这种结构：

```
create table tbFieldLabels (id int, screenname varchar(10), systemname varchar(10), textboxlength int);
create table tbFieldLabelsSource (screenname varchar(10), systemname varchar(10), textboxlength int);
insert tbFieldLabelsSource select 'abc', 'def', 99;
insert tbFieldLabelsSource select 'zyx', 'def', 67;
GO 
```

可以成功创建以下触发器：

```
CREATE TRIGGER [dbo].[tr_tbFieldLabels_FieldLabelLength] ON [dbo].[tbFieldLabels]
AFTER INSERT
AS
    Update tbFieldLabels 
    Set TextBoxLength = (SELECT top 1 TextboxLength 
                              FROM  tbFieldLabelsSource FLS
                              WHERE FLS.ScreenName = Inserted.ScreenName
                              AND  FLS.SystemName = Inserted.SystemName)
     FROM tbFieldLabels , Inserted WHERE tbFieldLabels.ID = Inserted.ID
GO 
```

您在问题中的代码将失败

> 无法绑定多部分标识符“tbFieldLabelsSource.SystemName”。

因为您已别名`tbFieldLabelsSource`为`FLS`，但仍通过全名引用它。

使用上面显示的触发器，我可以运行它：

```
insert tbFieldLabels select 4, 'zyx', 'def', null; 
```

哪个成功并插入此记录：

```
id          screenname systemname textboxlength
----------- ---------- ---------- -------------
4           zyx        def        67 
```

# restlet - Restlet 2.1 应用程序具有空上下文

> ID：13716147
> 
> 赞同：2
> 
> 时间：2012-12-05T04:10:26.273
> 
> 标签：restlet, restlet-2.0

我正在使用 Restlet 2.1 运行 JSE 应用程序。我正在尝试使用应用程序上下文，并且发现它在我的应用程序中始终为空。因为它为空，我似乎无法访问任何东西——包括我在调用资源时传递的任何属性。

restlet 应用程序类的代码如下：

```
package net.factor3.mailapp;

import net.factor3.mailapp.impl.PageServerImpl;

import org.restlet.Application;
import org.restlet.Context;
import org.restlet.Request;
import org.restlet.Response;
import org.restlet.Restlet;
import org.restlet.Server;
import org.restlet.data.MediaType;
import org.restlet.data.Protocol;
import org.restlet.routing.Router;
import org.restlet.routing.Template;

public class MyServer extends Application
{
   public MyServer()
   {
      setName("Test Application");
      setDescription("Testing use of Restlets");
   }

  @Override
  public Restlet createInboundRoot()
  {
      Context ctx = getContext();
      Router route = new Router(ctx);

      route.setDefaultMatchingMode(Template.MODE_EQUALS);
      route.attach("http://localhost:8100/",PageServerImpl.class);
      route.attach("http://localhost:8100/{page}",PageServerImpl.class);

      return(route);
   }

   public static void main(String[] args) throws Exception
   {
      Server asrv = new Server(Protocol.HTTP,8100);
      asrv.setNext(new MyServer());
      asrv.start();
   }

} 
```

请注意，PageServerImpl 是一个 ServerResource。在 createInboundRoot() 中，我使用 getContext() 来获取应用程序的上下文并将其放入 ctx。ctx 始终为空，因此我相信参数和属性会在 ServerResource 中丢失。

这是Restlet 2.1 的JRE 版本中的错误吗？如果是，我该去哪里举报？Restlet 网站上没有明确的错误报告链接。

如果它不是一个错误，那么我如何在这种应用程序中获得一个像样的上下文？？？

有人请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:41:13.220

使用组件类，您可以创建满足您的需求：

```
 public class MyServer extends Application
 {
    public MyServer()
    {
       setName("Test Application");
       setDescription("Testing use of Restlets");
    }

    public static void main(String[] args) throws Exception
    {
        // Create a new Restlet component and add a HTTP server connector to it
        Component component = new Component();
        component.getServers().add(Protocol.HTTP, 8182); 
        // Then attach it to the local host
        component.getDefaultHost().attach("/trace", GenericResource.class); 
        // Now, let's start the component!
        // Note that the HTTP server connector is also automatically started.
        component.start();
    }
} 
```

# android - 如何为 simplecursor 适配器自定义列表项布局添加图像

> ID：13716154
> 
> 赞同：0
> 
> 时间：2012-12-05T04:11:31.967
> 
> 标签：android, android-listfragment

如何在 ListFragment 中加载的 simpleCursor Adapter 的自定义列表项布局中添加图像（像复选框一样工作）？

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        setEmptyText("Loading...");

        myadapter = new SimpleCursorAdapter(getActivity().getApplicationContext(), R.layout.my_list_item, null,  new String[] {TAG_NAME,TAG_TEXT1,TAG_TEXT2}, new int[] {R.id.name,R.id.text1,R.id.text2},0);

        setListAdapter(myadapter);
        myLoader = getLoaderManager().initLoader(0, null, this);
    } 
```

**my_list_item.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <!--<ImageView android:src="@drawable/action_settings"
       android:layout_width="wrap_content"
       android:layout_height="fill_parent" />-->

    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="2dip"
        android:paddingLeft="2dip"
        android:textColor="@android:color/black"
        android:textStyle="bold" >
    </TextView>

    <TextView
        android:id="@+id/text1_static"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/name"
        android:text="@string/text1_static"
        android:textColor="@android:color/black" />

    <TextView
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/name"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@id/text1_static"
        android:textColor="@android:color/black" />

    <TextView
        android:id="@+id/text2_static"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/symbol_static"
        android:text="@string/text2_static"
        android:textColor="@android:color/black" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/text1"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@id/text2_static"
        android:textColor="@android:color/black" >
    </TextView>

</RelativeLayout> 
```

如何为每个列表项动态添加图像（它的工作方式类似于带有列表项值 id 的复选框）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:34:19.037

> 1.  如果您在 API 级别 11 以下工作，则将您的 API 设置为使用 FragmentActivty 而不是 ListFragment

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.Loader;
import android.widget.Toast;

public class MyActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks<Object> {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    getSupportLoaderManager().initLoader(0, null, this);
}

@Override
public Loader<Object> onCreateLoader(int i, Bundle bundle){
    return null; // TODO
}

@Override
public void onLoadFinished(Loader loader, Object o) {
    Toast.makeText(this, "onLoadFinished", Toast.LENGTH_SHORT).show();
}

@Override
public void onLoaderReset(Loader loader)    {
    Toast.makeText(this, "onLoaderReset", Toast.LENGTH_SHORT).show();
}
} 
```

# eclipse - 具有 2 个监视器损失透视图的 Eclipse

> ID：13716156
> 
> 赞同：1
> 
> 时间：2012-12-05T04:11:41.983
> 
> 标签：eclipse, perspective, multiple-monitors

我使用 Windows 8 x64 和最后一个 Eclipse：eclipse-java-juno-SR1。

在第二台显示器上，我移动控制台和一些 android 工具（logcat、设备）。一切正常。但我不需要一直看第二台显示器。我关闭了这个显示器（通过win + P）。下次启动时，我在主监视器上看到第二个监视器的窗口。关闭。打开。现在查看默认透视图。我保存的自己的观点消失了。如果我禁用第二台显示器，这会一直重复。

在我使用 eclipse-java-indigo-SR1 之前并没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:26:19.667

找不到解决办法。现在回到靛蓝（3.7.1）。

# matplotlib - 覆盖 matplotlib 的平移工具 (wx)

> ID：13716165
> 
> 赞同：3
> 
> 时间：2012-12-05T04:13:09.307
> 
> 标签：matplotlib, wxpython, toolbar

我正在使用 wxPython 面板中的 matplotlib 进行一些重型绘图。我的问题出现在使用本机平移工具时 - 它看起来好像 matplotlib 在您拖动平移手柄时试图不断重绘画布。随着我正在绘制的数据量，这变得非常不稳定（已经使用 Collections for data 等进行了优化）

在性能方面，我认为画布在平底锅结束时释放鼠标时只绘制一次会更好。我意识到这意味着我必须用我自己的扩展 WxAgg NavigationToolbar2 类，但我想知道是否有人尝试过类似的事情并且可以建议我重写哪些函数？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:25:11.113

我花了很多时间对 matplotlib 后端进行修改，我从未做过这个特定的更改，但我可以向您展示一行代码来注释掉，这将停止动态更新：

我假设您正在使用`WxAgg`后端，如果是这种情况，请打开此文件：`C:\Python27\Lib\site-packages\matplotlib\backends\backend_wx.py`

并注释掉此处指示的行：

```
def dynamic_update(self):
    d = self._idle
    self._idle = False
    if d:
        #self.canvas.draw() #<--- Comment out to stop the redrawing during the Pan/Zoom
        self._idle = True 
```

我对此进行了测试，它似乎很好地解决了您的问题。我进行了一些快速挖掘，但没有看到任何其他调用此过程的函数，因此您甚至可以将其更改为：

```
def dynamic_update(self):
    pass 
```

...您将在基`NavigationToolbar2`类中找到相同的代码

（当然，如果您对此更改感到满意，您可以做更多的工作来通过这种修改创建自己的自定义后端。只是为了确保在升级 matplotlib 时不会丢失更改）

# jquery - 主题标签链接将转到页面底部

> ID：13716166
> 
> 赞同：0
> 
> 时间：2012-12-05T04:13:09.453
> 
> 标签：jquery, scroll, hashtag

我正在构建一个主要位于一个页面（主页）上的站点。我在主导航中使用主题标签将用户带到页面上的相应部分。在主页上一切正常，但是当您转到其中一个外部页面时，然后返回主页，而不是登陆相应的部分，页面一直滚动到底部。

该网站是一个带有样板的自定义 Wordpress 主题（响应式），我正在使用 flexslider jquery 插件。我已将滚动/标签问题的原因缩小到滑块。当我取出滑块时一切正常，但是我想保留滑块。

滑块当前在页面上，站点位于： http: [//mtnstd.970design.com](http://mtnstd.970design.com)。您将在页面的“关于”部分看到滑块。如果您访问其中一个菜单页面或任何外部页面，则通过单击一个主导航按钮返回主页。您将看到页面转到底部。我在 Chrome、Safari、IE (7,8,9) 中看到了这个问题。在 Firefox 中，页面实际上会移到顶部，即使页面中没有滑块。

HTML 是有效的，我尝试禁用所有 wp 插件，禁用我的自定义 js 和 js 插件（flexslider 除外）以及禁用所有样式表。没运气...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T11:44:12.747

我遇到过同样的问题。

这是由隐藏在 div 中的 Google 翻译脚本引起的：display:none; + 附有分析。

去掉这两个功能后，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:33:44.877

我已经在 J​​S 上四处看了看，但似乎没有任何问题。大部分的 JS 都放在了一行里，排查难度很大。您是否考虑过只使用另一个 JQuery 滑块插件？

在工作中（本地），我们经常使用一个名为“VSlider”的插件，它工作得很好。也许你可以实现这个而不是那个“flexslider”插件。

可以在此处找到使用中的滑块示例：http:
[//seward.com/visit-seward/](http://seward.com/visit-seward/)（我们的精选会员）

加载滑块可能需要几秒钟，因为图像非常大并且图形设计师不关心图像大小（呃）。

希望我有所帮助。

# jquery - jquery 序列化

> ID：13716173
> 
> 赞同：0
> 
> 时间：2012-12-05T04:14:03.427
> 
> 标签：jquery, forms, serialization

在我的表单中，我有一个包含数据的文本字段，例如 >2012-01-01 <2012-02-01 但是当我序列化表单并发布数据时，该字段只有 >2012-01-01 而不是 < 2012-02-01。

它去哪儿了？

```
$("#grouppositionsform").live("submit",function(e){ 
    e.preventDefault();
    $('body').addClass('wait');
    $.post("/page.php",$(this).serialize(), function(data){
        $('.showdirectory').fadeOut('slow', function() {
            $(".showdirectory").html(data);
            $(".showdirectory").fadeIn("slow");              
        });
  }).error(function() { 
    //alert("error"); 
  }).complete(function() { 
    //alert("complete"); 
    $('body').removeClass('wait');
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:04:29.420

答案是 joomla 接受了那个字符并对它说不并且没有解析它。所以 jquery 很好并且正在发布数据，但是 joomla 有一个功能可以确保返回的数据是安全的。

所以当我检查 $_POST["searchstring"]; 所有的数据都在那里。

当我使用 JRequest::getVar("searchstring",-1); 它保护我并删除了<。

碰巧，Joomla 在这里解释了这一点：http: [//docs.joomla.org/Secure_coding_guidelines](http://docs.joomla.org/Secure_coding_guidelines) 我更改了 getVar 以允许数据通过。

所以这对我有用。$sstr = JRequest::getVar("searchstring",'-1','REQUEST','STRING',JREQUEST_ALLOWRAW);

# vb.net - VB WebBrowser 控制网站上的自动点击按钮

> ID：13716174
> 
> 赞同：1
> 
> 时间：2012-12-05T04:14:03.140
> 
> 标签：vb.net, webbrowser-control

我需要使用 webBrowser Control 来自动点击网站上的一个按钮，如果我能得到（名称或 ID），我知道如何编写代码，但这个网站没有设置按钮名称或 ID。

这是网站上的代码按钮

```
 <input type="submit" alt="Login" value="Login"/> 
```

请帮助我展示在这种情况下如何使用 vb webBrowser 控件，

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:36:55.123

您不应该使用 Web 浏览器控件来执行任何此类操作（我还假设您的意思是您在 WinForms 应用程序中使用 System.Windows.Forms.WebBrowser 或在 WPF 应用程序中使用 WPF 等效项）

如果您需要“单击”网页上的按钮.. 您真正的意思是您需要向网站提交 HTTP 请求。

所以，假设你的目标网站有这样的东西......并且你想点击“提交”按钮......但就像你说的那样，它没有 id。

```
<form action="http://example.com/foo/bar/login" method="POST">
    <input type="text" id="username" />
    <input type="password" id="password" />
    <input type="submit" alt="Login" value="Login" />
</form> 
```

以下是如何在 C# 中完成此操作的示例：[通过 httpWebRequest 发布数据](https://stackoverflow.com/questions/2550965/post-data-through-httpwebrequest)

要在 VB.NET 中完成同样的事情，您可以使用：

```
Dim request As New WebRequest.Create("http://example.com/foo/bar/login")
request.Method = "POST"
request.ContentType = "application/x-www-form-urlencoded"
Using (Dim writer As New StreamWriter(request.GetRequestStream()))
    writer.Write("username=whatever")
    writer.Write("password=p@$$w0rD")
End Using
Dim response = request.GetResponse() 
```

# java - Stumped：检测两个整数数组中相同的整数序列

> ID：13716175
> 
> 赞同：3
> 
> 时间：2012-12-05T04:14:05.777
> 
> 标签：java, arrays, compare

首先，我是一个java新手。我一直在寻找一种不涉及列表或哈希表的简洁方法来解决这个问题，但还没有找到：

**请注意，这不是家庭作业，而是“构建 Java 程序”第 7 章中的练习 #14

编写一个名为 contains 的方法，该方法接受两个整数数组作为参数，并返回一个布尔值指示第二个数组的元素是否出现在第一个数组中。

例子：

```
Integer[] list1 = {1,6,2,1,4,1,2,1,8};

Integer[] list2 = {1,2,1}; 
```

调用`contains(list1, list2)`会返回`true`。我得到了可以遍历数组的嵌套 for 循环的想法，但我看不到明确的解决方案：

```
public static Boolean contains(Integer[] listOfNumbers1, Integer[] listOfNumbers2){

    for(int i = 0 ; i < listOfNumbers2.length; i++){

        for(int j = 0 ; j < listOfNumbers1.length; j++){

        }
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:33:16.487

（您并没有真正指定是否需要考虑重复项，从您的示例来看，您似乎正在尝试查看 array1 是否按顺序排列了 array2 的所有元素）

有几种不同的情况需要考虑：

```
1\. array2 is longer than array1:
       if this is the case the result must be false because array1 can't 
       possibly have the same elements in order since array2 is longer

2\. array2 is the same size as array1: 
       for this step you can use a single loop and compare the elements in order, 
       if you find a  mismatch then array1 does not contain array2

       for i from 0 to length do
           if array1[i] != array2[i]
              // false
           end
       end
       // true

3\. array2 is shorter than array1:
       for this case you need to examine every array2.length elements from array1 
       and see if they match array2

       matches = 0
       for i from 0 to array1.length do
           for j from 0 to array2.length do
               if array1[i] == array2[j] 
                  // increment i
                  // increment matches
               end
           end
           if matches == array2.length
               // true
           else
               // false
           end
           matches = 0  // reset matches
       end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:19:52.210

所以基本上我们要遍历搜索数组中的每个位置 ( `listOfNumbers1`) 并检查它是否是我们正在寻找的序列的开始 ( `listOfNumbers2`)

```
// Loops through the search array
for( int i = 0; i < listOfNumbers1.length; i++ )
{
    boolean found = true;
    for(int j = 0; j < listOfNumbers2.length; j++ )
    {
        /* Check if the following conditions hold
           - Not going to cause an ArrayIndexOutOfBoundsException
           - Values do **not** match => set found to false */
        if( i+j < listOfNumbers1.length && listOfNumbers1[i + j] != listOfNumbers2[j] )
        {
            // Didn't find the sequence here
            found = false;
        }
    }

    // If found is still true, we have found the sequence and can exit
    if( found ) return true;
}

return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:32:31.337

```
class contains{
    public static void main(String[] args){
        int[] list1 = {1,6,2,1,4,1,2,1,8};
        int[] list2 = {1,2,1};

        if(contains(list1, list2)){
            System.out.println("list2 found in list1");
        }
        else {
            System.out.println("list2 not found in list1");
        }
    }

    public static boolean contains(int[] listOfNumbers1, int[] listOfNumbers2){
        if(listOfNumbers2.length > listOfNumbers1.length){
            return false;
        }
        for(int j = 0 ; j < listOfNumbers1.length - listOfNumbers2.length + 1; j++){
            for(int i = 0 ; i < listOfNumbers2.length; i++){
                if(listOfNumbers1[j+i] != listOfNumbers2[i]){
                    break;
                }
                else {
                    if(i == listOfNumbers2.length-1){
                        return true;
                    }
                }
            }
        }
        return false;
    }
} 
```

# sharekit - SHKFacebook shareItem：项目执行异常

> ID：13716185
> 
> 赞同：0
> 
> 时间：2012-12-05T04:15:36.797
> 
> 标签：sharekit

当我将以下代码放入TabelViewController的“didSelectRowAtIndexPath”时，出现异常。我该如何解决这个问题？

```
SHKItem *item = [SHKItem text:@"I need your fashion advice. I am using my iPhone app iFrockUp to help me decide on stuff for my event. Could you pretty please rate it and give me your stars out of 5? Your vote will help rank it in the app."];
item.tags = [NSArray arrayWithObjects:@"iFrockUp", @"share", @"clothes", nil];
[SHKFacebook shareItem:item]; 
```

异常“NSInvalidArgumentException”，原因：“应用程序试图在目标上呈现一个零模式视图控制器。” *** First throw call stack: (0x3be1e2a3 0x35d0d97f 0x3503c139 0x2a1d25 0x2a1b8b 0x2bd149 0x23634d 0x2aa207 0x233b95 0x2aa207 0xc4153 0xc572d 0x3501226d 0x35094ea1 0x36c19a6f 0x3bdf35df 0x3bdf3291 0x3bdf1f01 0x3bd64ebd 0x3bd64d49 0x3a1322eb 0x34fa42f9 0xc266b 0xc2610) libc++abi.dylib: terminate called throwing an exception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:28:53.457

实际上，我只是将这些代码行添加到 RootViewController.m 的 didSelectRowAtIndexPath 中，其项目直接来自 sharekit2.0，没有其他任何更改。

在模拟器上没问题，但在我的 iPhone4S 上确实有异常

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ SHKItem *item = [SHKItem text:@"我需要你的时尚建议。我正在使用我的 iPhone 应用程序 iFrockUp 来帮助我决定我的活动的东西。请你给它打分并给我你的星（满分 5 星）吗？你的投票将有助于在应用程序中对其进行排名。"]; item.tags = [NSArray arrayWithObjects:@"iFrockUp", @"share", @"clothes", nil]; [SHKFacebook shareItem:item]；

}

# windows-phone-7 - 如何在 wp7withC# 中转换变量数据？

> ID：13716186
> 
> 赞同：-1
> 
> 时间：2012-12-05T04:15:36.830
> 
> 标签：windows-phone-7, c#-3.0, var

我有一个变量，这个变量包含多个数据。我想找到 perticuler 一个数据，所以我怎么能找到它？

我的代码就像

```
private void g1_Hold(object sender, Microsoft.Phone.Controls.GestureEventArgs e)
        {
             var item=(sender as StackPanel).DataContext;                           
        } 
```

这里项目包含多个数据，如 id、name、imagepath、songpath 等。

现在我只想要图像路径，所以我怎么能得到它。

帮我 。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:27:14.303

Try this one.

Hope its working if you store data in class.

```
private void g1_Hold(object sender, Microsoft.Phone.Controls.GestureEventArgs e)
        {
              StackPanel stk = (StackPanel)sender;
              ClassName sg = (ClssName)stk.DataContext;
              string path=sg.imagepath;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:29:59.100

它比查找数据位置更容易将数据存储到数组或列表中

例如

编辑：

```
ListBox lst = (ListBox)sender;
   classname obj = (classname)lst.SelectedItem; 
```

现在你可以使用 obj.anything 了

# asp.net - 测试仅具有使用 sql server 存储过程读取和插入数据的 web 表单的应用程序

> ID：13716189
> 
> 赞同：0
> 
> 时间：2012-12-05T04:15:54.953
> 
> 标签：asp.net, sql-server, stored-procedures

您好（我对测试没有任何经验）。有一个只有 Web 表单的 Web 应用程序，它打印从存储过程中读取的数据，并使用存储过程插入数据。所有的业务逻辑都在存储过程中。我不得不说我不喜欢应用程序的完成方式，但必须进行尽可能多的测试。大多数方法返回 void （因为它们是例如从文本框读取并调用存储过程的 button_clicked 方法，存储过程完成所有操作）所以我不能进行单元测试。你能推荐我一些适合这个网络应用程序的测试吗？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:18:09.717

如果您的大部分业务逻辑都位于存储过程中，那么最好为您的过程实现一些测试。查看用于测试 sql 的 TST 框架。

[http://tst.codeplex.com/](http://tst.codeplex.com/)

至于网站，您可以做的可能是确保在调用某些按钮时调用正确的存储过程。

例如，当单击“计算月薪”按钮时，您不想调用“ChangeName”存储过程。

# c# - Windows 8 应用程序中的 SnapView

> ID：13716194
> 
> 赞同：2
> 
> 时间：2012-12-05T04:17:11.070
> 
> 标签：c#, windows-8

我想添加 SnapView 并想在 Windows 8 的空白网格应用程序中处理所有屏幕分辨率，如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:20:53.710

检查本教程[Hello World Windows Store的](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx)**第 3 步**

# twitter-bootstrap - 如何使用 twitter Bootstrap 创建出色的设计？

> ID：13716198
> 
> 赞同：-1
> 
> 时间：2012-12-05T04:17:31.637
> 
> 标签：twitter-bootstrap, frontend

作为一个主要专注于后端编程的开发人员，有时我发现创建漂亮的设计非常困难。我使用了 twitter bootstrap，但即使使用它，我的设计也不是很吸引人。

你有使用引导程序创建漂亮设计的经验法则吗？

我对了解您遵循的流程更感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:29:49.013

一些网页图形设计的东西在这里

[http://psd.tutsplus.com/tutorials/designing-tutorials/9-essential-principles-for-good-web-design/](http://psd.tutsplus.com/tutorials/designing-tutorials/9-essential-principles-for-good-web-design/)

一些免费的引导主题

[http://bootswatch.com/#gallery](http://bootswatch.com/#gallery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:56:41.383

您将使用主题获得最佳效果：[https](https://wrapbootstrap.com/) ://wrapbootstrap.com/ ，或主题滚轮：[http ://bootswatchr.com/](http://bootswatchr.com/)

# html - Angular JS 和 Handlebars 在同一页面中的示例

> ID：13716200
> 
> 赞同：1
> 
> 时间：2012-12-05T04:17:34.597
> 
> 标签：html, angularjs, handlebars.js

我们可以在同一页面中使用 angularjs 和 handlebar.js。如果是这样，如何在同一个 html 页面中使用 angularjs 和 handlebar.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T04:56:55.307

我想你可以。如果车把生成的内容将包含 Angular 指令，则在将生成的 HTML 插入 DOM 后，您可能需要使用[$compile服务。](http://docs.angularjs.org/api/ng.%24compile)

另请参阅[AngularJS 太谦虚了，不能说您做错了](http://thesmithfam.org/blog/2012/12/02/angularjs-is-too-humble-to-say-youre-doing-it-wrong/)并
[添加了对 angularjs 模板的支持，因此可以在客户端使用把手或 Angular](https://github.com/gmarty/handlebars-xgettext/pull/4)

# python - Python静态类属性设置/获取

> ID：13716206
> 
> 赞同：10
> 
> 时间：2012-12-05T04:18:10.270
> 
> 标签：python, class, properties

> **可能重复：**
> [python中的私有函数/变量强制执行](https://stackoverflow.com/questions/5559256/private-functions-variables-enforcement-in-python)

可以创建一个等效于以下具有两个静态属性的类，一个是只读的，另一个是 Python 中的读写？

```
class Foo
{
    private static string _rdy = "RO";
    public static string rd
    {
        get { return _rd; }
    }

    private static string _rw = "RW";
    public static string rw
    {
        get { return _rw ; }
        set { _rw = value; }
    }
} 
```

我知道[只读类属性](https://stackoverflow.com/a/3203659/1877238)在 Python 中是可能的，但是我还没有看到 Python 中读写类属性的任何示例。是否可以？基本上我想要：

```
class classproperty(object):

    def __init__(self, getter
            #, setter
        ):
        self.getter = getter
    #    self.setter = setter

    def __get__(self, instance, owner):
        return self.getter(owner)

    # Could there be a __set__ here?
    #vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    #def __set__(self, instance, owner, value):
    #    self.setter(owner, value)
    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

class Foo(object):

    _ro = "RO"
    _rw = "RW"

    @classproperty
    def ro(cls):
        return cls._ro

    # How would you this?
    #vvvvvvvvvvvvvvvvvvvv
    #@classproperty.setter
    #^^^^^^^^^^^^^^^^^^^^
    #def rw(cls, value):
    #    cls._rw, value

# This is what I need
>>> Foo.ro
RO
>>> Foo.ro = 'X'     # Hypothetical Exception
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: class 'Foo' attribute 'ro' is not writable!
>>> Foo.rw
RW
>>> Foo.rw = 'NEW'
>>> Foo.rw
NEW 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T04:38:00.173

我想你想使用`property()`内置的。[http://docs.python.org/2/library/functions.html#property](http://docs.python.org/2/library/functions.html#property)

虽然传统上它用于实例，但我认为您可以在元类上使用它来实现您想要的。

```
class MetaFoo(type):
    _ro = "RO"
    _rw = "RW"

    def _get_ro(self):
        return self._ro
    def _get_rw(self):
        return self._rw
    def _set_ro(self, value):
        raise AttributeError("class 'Foo' attribute 'ro' is not writable!")
    def _set_rw(self, value):
        self._rw = value
    ro = property(_get_ro, _set_ro)
    rw = property(_get_rw, _set_rw)

class Foo(object):
    __metaclass__=MetaFoo

assert Foo.rw == "RW"
Foo.rw = 'NEW'
assert Foo.rw == "NEW"

assert Foo.ro == "RO"

try:
    Foo.ro = 'X'
except Exception as e:
    assert str(e) == "class 'Foo' attribute 'ro' is not writable!", str(e)
    assert type(e) == AttributeError 
```

# jquery - 无法使用 Jquery 为 xpages 组合框和 xpages 列表框提交数据

> ID：13716209
> 
> 赞同：0
> 
> 时间：2012-12-05T04:18:50.940
> 
> 标签：jquery, xpages

想问一些问题，Jquery 不能与 xPages 下拉列表和列表框一起使用吗？单击提交按钮时，该值无法保存到nsf中，并且卡在同一屏幕上，我无法调试，因为xPages没有提供任何调试工具供我调试代码，因此对xPages感到沮丧

我确实解决了之前的列表框问题，方法是用隐藏的编辑框替换列表框，使用一些数组，提交按钮就像一个魅力。我可以替换为值不向用户显示，但是

现在我尝试下拉，我使用相同的方法，保持下拉，并在其上添加另一个编辑框，但似乎下拉保持干扰提交按钮，我不希望删除下拉，但我不知道需要提交的值，有什么指南吗？搜索了所有代码，下拉列表没有做任何事情，只是简单地显示数据，而不是插入下拉值的正常方式，我使用 Jquery 根据选择另一个下拉列表将值添加到下拉列表中，它像魅力一样工作，但无法保存到 nsf

部分jQuery代码

```
function insertDropDown(sDiv){
var sKeep=[]; //store data as array
var sValue="";

$('select[id$=hidCombo] option').each(function() {
    sKeep.push($(this).attr('value'));
});

if (sDiv == "") { $('select[id$=comboCompany] option').remove(); return; }
$('select[id$=comboCompany] option').remove();
$('select[id$=comboCompany]').append(new Option("","")); //empty value for the 1at item

for(var i=0;i<=sKeep.length-1;i++){
    if (sKeep[i].trim() != ""){
        if(sKeep[i].substr(0,sDiv.length) == sDiv)
        { 
            var selName=sKeep[i].substr(sDiv.length);
            $('select[id$=comboCompany]').append(new Option(selName,selName));
        }               
    }
}}

function setHidComp(){$('select[id$="comboCompany"]').on('change', function() {
    var sDiv = $('select[id$=comboDivision]').val().trim();

    $('select[id$="hidCombo"]').val(sDiv + $(this).val());
    $('input[id$="inputText1"]').val($(this).val());
}); 
```

}

xPages 示例代码

```
<xp:label value="*Company :" id="fl_Company" for="inputText1" themeId="Form.Label">
                </xp:label></xp:td>
            <xp:td>

            <xp:comboBox id="comboCompany"></xp:comboBox>
            <xp:inputText id="inputText1"><xp:this.value><![CDATA[${javascript:var bt = compositeData.dbSource.flCompany;bt = bt || "currentDocument.fl_Company"; return '#{'+bt+'}';}]]></xp:this.value></xp:inputText></xp:td> 
```

任何想法？只要combobox有值，我就无法提交成功，我在网上搜索过，xPages的信息太少了，对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:50:09.137

XPages 组合框和列表框使用来自dojo 工具包的dijit 控件。尝试混合使用 jQuery 和 Dojo 并不适合胆小的人。除非您有 3 个很好的理由（并且“我只是更喜欢它”只是其中一个），否则您最好坚持使用 Dojo，除非您可以负担用户加载更多 JavaScript 或负担自己从 XPage 中删除所有 Dojo。

# ant - Ant 脚本将文件名和扩展名拆分为 2 个单独的属性

> ID：13716210
> 
> 赞同：0
> 
> 时间：2012-12-05T04:18:54.237
> 
> 标签：ant

我有一个文件集，其中包含 10 个带有扩展名的文件。我需要然后将文件名和扩展名放入 2 个单独的属性/变量中，但不确定如何。作为一个文件，我需要这样做的原因在 Unix 上以 XB12345.FILE 开头，我需要移动到文件名为 XB12345.FILE 且成员为 FILE.MBR 的 I/5 系统。大多数文件没有一致的扩展名，只能在运行时知道。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T04:38:42.840

这听起来像是[Ant-Contrib](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)任务的工作。

Ant-Contrib 任务已经存在了很长时间，并且在 Ant 项目中很常见。[PropertyRegex](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)任务将执行您想要的操作。事实上，甚至还有一个可以处理循环的[For任务。](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)

`<PropertyRegEx>`任务看起来像这样：

```
<propertyregex property="base.name"
    input="file.name"
    regexp="(.*)\.(.*)"
    select="\1"/>

<propertyregex property="suffix.name"
    input="file.name"
    regexp="(.*)\.(.*)"
    select="\2"/> 
```

如果您遵循以下步骤，安装 Ant-Contrib 任务将相当容易：

*   下载[ant-contrib-1.0b3.jar](http://sourceforge.net/projects/ant-contrib/files/ant-contrib/1.0b3/ant-contrib-1.0b3-bin.tar.gz/download)。
*   在项目的根目录中创建一个名为`antlib/ac`.
*   放入`ant-contrib-1.0b3.jar file in the`antlib/ac`目录。
*   添加任务定义。

像这样：

```
<taskdef resource="net/sf/antcontrib/antlib.xml">
    <classpath>
        <fileset dir="${basedir}/antlib/ac"/>
    <classpath>
</taskdef> 
```

如果您使用版本控制系统，请将 ant-contrib-1.0b3.jar 文件签入到项目的版本控制系统中。现在，当有人需要进行构建时，他们会签出您的项目，并且 Ant Contrib 任务已经定义并且 Ant-Contrib jar 就在那里。开发人员无需安装 Ant-Contrib。您的构建工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:23:54.330

虽然 propertyregex 是预期问题的解决方案，但您必须为您的解决方案使用覆盖属性。

```
<propertyregex property="base.name"
    input="file.name"
    regexp="(.*)\.(.*)"
    select="\1" override="true"/>

<propertyregex property="suffix.name"
    input="file.name"
    regexp="(.*)\.(.*)"
    select="\2" override="true"/> 
```

# iphone - 如何在 iphone 应用程序中实现图像翻转动画

> ID：13716214
> 
> 赞同：5
> 
> 时间：2012-12-05T04:19:14.237
> 
> 标签：iphone, ios, animation

如何实现图像向右翻转动画。下面给出的代码。请帮忙。

```
imageview.animationImages=[NSArray arrayWithObjects:  
   [UIImage imageNamed:@"image1.png"],
   [UIImage imageNamed:@"imag2.png"],
   [UIImage imageNamed:@"imag3.png"],
   [UIImage imageNamed:@"imag4.png"],
   [UIImage imageNamed:@"imag5.png"], 
   [UIImage imageNamed:@"imag6.png"],
   [UIImage imageNamed:@"imag7.png"], nil];

imageview.animationDuration=15.0;
imageview.animationRepeatCount=0;
[imageview startAnimating]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T04:44:26.440

用于垂直翻转

```
[UIView animateWithDuration:1.0 animations:^{
    yourView.layer.transform = CATransform3DMakeRotation(M_PI,1.0,0.0,0.0);
} completion:^(BOOL finished){
    // code to be executed when flip is completed
}]; 
```

用于水平翻转

```
[UIView animateWithDuration:1.0 animations:^{
    yourView.layer.transform = CATransform3DMakeRotation(M_PI,0.0,1.0,0.0);
} completion:^(BOOL finished){
    // code to be executed when flip is completed
}]; 
```

并且不要忘记将 QuartzCore 框架添加到项目中并导入

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:35:06.653

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:imageview cache:NO];
[UIView commitAnimations]; 
```

我认为这段代码可以帮助你。

# c# - HtmlAgilityPack 不返回 div 内的文本

> ID：13716216
> 
> 赞同：2
> 
> 时间：2012-12-05T04:19:24.837
> 
> 标签：c#, html-agility-pack

这是示例html页面，

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html version="-//W3C//DTD XHTML 1.1//EN" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Test Page</title>
</head>
<body>
<div id="topContainer">
    <div id="header">
        <span>This is a Test message</span>
        <span id="slogan">A sample slogan <br /> with 2 lines.</span>
    </div>
    <div id="news">
        This is a test news
    </div>
</div>
</body>
</html> 
```

这是我的 C# 代码，

```
 public MainPage()
    {
        InitializeComponent();
        HtmlWeb.LoadAsync("URL", DownLoadCompleted);

    }

    void DownLoadCompleted(object sender, HtmlDocumentLoadCompleted e)
    {
        if(e.Error == null)
        {
            HtmlDocument doc = e.Document;

            if (doc != null)
            {
                var newsdiv = (from divnode in doc.DocumentNode.Descendants("div")
                               where divnode.Attributes["id"].Value == "header"
                               select divnode).FirstOrDefault();

                var txtT = HttpUtility.HtmlDecode(newsdiv.InnerText);
                txtDisplay.Text = txtT;

            }
        }
    } 
```

当我尝试检索`header`div 的 innerText 时，它可以工作。但是当我尝试使用相同的代码来检索`topContainer`div 的内部文本时，它不会返回任何内容。它也不会引发错误。`<span>`它对元素根本不起作用。

可能是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:14:15.927

似乎您正在尝试仅选择带有 ID 的 div `IDOFTHEDIV`；因此不会选择具有其他 ID（或没有 ID）的其他 DIV

# php - 如何在子查询中使用 SHOW CREATE TABLE？

> ID：13716225
> 
> 赞同：8
> 
> 时间：2012-12-05T04:20:19.013
> 
> 标签：php, mysql, sql, pdo

我正在尝试完成这样的事情：

```
SELECT *
FROM   information_schema.`tables`
    JOIN (SHOW CREATE TABLE)  # <-- need help here
WHERE  table_schema LIKE 'tables\_%' 
```

有没有办法在一个查询中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:21:09.277

没有办法以这种方式做到这一点。该`SHOW CREATE TABLE`命令检索数据集，但结果不能与另一个表连接。`SHOW CREATE TABLE`对应用程序中需要的每个表作为单独的命令执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:01:07.263

Devart 是正确的，您不能加入该`SHOW CREATE`声明。但是，根据您的确切需求，您可以通过创建自己的`SHOW CREATE`语句来欺骗它。

如果您需要包含数据库引擎、列和表排序规则、索引等，代码的复杂性将会增加 - 但是下面的 SQL 将为您提供正确的表和字段，以及数据类型。我相信您可以通过`information_schema.columns`更深入地检查的内容来进一步扩展它。

```
SELECT CONCAT('CREATE TABLE `',t.TABLE_NAME,'` ',
  GROUP_CONCAT(CONCAT(c.COLUMN_NAME,' ',c.COLUMN_TYPE,' ',c.EXTRA) SEPARATOR ','),';') AS CreateStatement
FROM information_schema.tables t
INNER JOIN information_schema.columns c 
  ON t.TABLE_NAME=c.TABLE_NAME
/* WHERE STATEMENT IF NEEDED */; 
```

样本输出：

```
CREATE TABLE `answers` rowid int(11) auto_increment,
  id int(11) ,username varchar(200) ,answer varchar(2000) ; 
```

# php - 将字符串智能拆分为数组

> ID：13716226
> 
> 赞同：1
> 
> 时间：2012-12-05T04:20:25.957
> 
> 标签：php, regex, arrays, string, preg-split

此代码会将字符串拆分为包含测试和字符串的数组：

```
$str = 'test string';
$arr = preg_split('/\s+/', $str); 
```

但我也想检测引号并在拆分时忽略它们之间的文本，例如：

```
$str = 'test "Two words"'; 
```

这也应该返回一个包含两个元素的数组，`test`并且`Two words`.

如果可能的话，还有另一种形式：

```
$str = 'test=Two Words'; 
```

因此，如果等号出现在任何空格之前，则字符串应由 分割`=`，否则应适用上述其他规则。

那么我怎么能用 preg_split 做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:32:31.430

尝试[`str_getcsv`](http://php.net/manual/en/function.str-getcsv.php)：

```
print_r(str_getcsv('test string'," "));
print_r(str_getcsv('test "Two words"'," "));
print_r(str_getcsv('test=Two Words',"=")); 
```

输出

```
Array
(
    [0] => test
    [1] => string
)
Array
(
    [0] => test
    [1] => Two words
)
Array
(
    [0] => test
    [1] => Two Words
) 
```

您可以使用类似`preg_match`的方法检查空格前是否存在等号，然后确定要使用的分隔符。

仅适用于 PHP>=5.3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:35:23.643

我确信这可以用正则表达式来完成，但是用引号分割字符串怎么样，然后用空格，使用[`explode`](http://php.net/manual/en/function.explode.php)？

给定字符串`'I am a string "with an embedded" string'`，您可以先用引号分割，得到`['I am a string', 'with an embedded', 'string']`，然后遍历数组中的所有其他元素并用空格分割，得到`['I', 'am', 'a', 'string', 'with an embedded', 'string']`.

您可以自己编写执行此操作的确切代码。如果没有，请告诉我，我会帮助你。

在您的最后一个示例中，只需用等号分割：

```
$str = 'test=Two Words';
print explode('=', $str); 
```

# javascript - 使用JS更改链接

> ID：13716228
> 
> 赞同：0
> 
> 时间：2012-12-05T04:20:31.267
> 
> 标签：javascript, jquery, hyperlink

我有一个正在使用的脚本，它将一个链接从常规链接更改为*mailto*链接。这个想法是大多数糟糕的机器人不会解析 javascript，因此比按原样放置电子邮件地址或空格并拼写*@*符号要好一些。

HTML 应呈现为：

> 通过电子邮件联系我们的销售经理。

电子邮件一词将是电子邮件的链接。然而，使用 JS 代码，它呈现为：

> 通过 email@email.com 联系我们的销售经理。

我希望第一句话是页面的呈现方式。

这是代码：

**HTML：**

```
<p>Contact our Sales Manager by
   <a class="email" title="email/email.com" href=" ">email</a>.
</p> 
```

**JS：**

```
$(function() {

  $('a.email').each(function(){

    var e = this.title.replace('/','@');

    $(this).text().replace('/','@');

    this.href=" ";

    this.href = 'mailto:' + e; $(this).text(e);

   });
}); 
```

我将如何修改脚本以将单词 email 留在其中但正确创建链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:24:02.593

这是一个工作示例：http: [//jsfiddle.net/smLQ7/](http://jsfiddle.net/smLQ7/)

要解决此问题，只需删除 JavaScript 的一部分，如下所示：

```
$(document).ready(function() {
  $('a.email').each(function(){
    var e = this.title.replace('/','@');
    $(this).text().replace('/','@');
    this.href=" ";
    this.href = 'mailto:' + e;
   });
});​ 
```

我们已删除此代码：

```
$(this).text(e); 
```

它负责在页面内容中替换`email`为。`email@email.com`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:24:20.553

代替

```
$(this).text(e) 
```

经过

```
$(this).text('email'); 
```

`text('some string')`用它的参数替换元素的内容。因此，在您的情况下，链接的内容已被电子邮件地址替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T04:26:16.433

如果你打算通过 JS 来做，那么为什么还要费心把地址放在标签中呢？

为什么不在 (document).ready() 上尝试这样的事情

```
var theaddress ="mailto:email@email.com"

$('a.email').attr('href',theaddress); 
```

编辑：

在这里工作：http: [//jsfiddle.net/sMnrR/](http://jsfiddle.net/sMnrR/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T04:39:23.917

如果了解您的问题，以下是解决方案：

```
$(function() {
  $('a.email').each(function(){

    var e = this.title.replace('/','@');
    $(this)
        .attr('href','mailto:' + e)
        .text(e.substr(0,e.indexOf("@")));
   });
});​ 
```

看看[jsfiddle](http://jsfiddle.net/ptqTc/)

# java - 从 Java 调用 Python 方法时导入 NLTK 失败

> ID：13716229
> 
> 赞同：0
> 
> 时间：2012-12-05T04:20:42.087
> 
> 标签：java, python, python-2.7, jython, nltk

首先，我在 MacBook 上使用 Eclipse 进行 Java 编码。我编写了一个使用 NLTK“进行自然语言处理”的 Python 代码，它运行良好。我尝试从 Java 调用一个简单的 Python 代码，它也按预期工作。

*但是当我尝试调用使用 NLTK 的 Python 代码时，导入语句失败：* **“ImportError: No module named nltk”**

似乎 Python 能够找到 NLTK 库，但在 Java 中却不能。

我试图在 Python 代码和 Java 代码中都有 import 语句，但没有运气。

**这是Python代码：**

```
#!/usr/local/bin/python
# coding: UTF-8
import os, sys
from nltk.tokenize import word_tokenize # Tokenizer
class RTE:
    def WordPhraseRate(self, Text):
        T_tokens = word_tokenize(Text)
.
.
. 
```

**这是Java代码：**

```
import org.python.util.*;
import org.python.core.*;
import org.python.util.PythonInterpreter;

public class NLU_RTE
{
    public PythonInterpreter interpreter = null;
    public NLU_RTE()
    {
        PythonInterpreter.initialize(System.getProperties(), System.getProperties(), new String[0]);
        this.interpreter = new PythonInterpreter();
    }
    void execfile( final String fileName )
    {
        this.interpreter.execfile(fileName);
    }
    PyInstance createClass( final String className, final String opts )
    {
        return (PyInstance) this.interpreter.eval(className + "(" + opts + ")");
    }

    public static void main( String gargs[] )
    {
        NLU_RTE ie = new NLU_RTE();
        ie.execfile("/Users/Desktop/nlu.py");
        ie.interpreter.exec("from nltk.tokenize import word_tokenize # Tokenizer");
        String T="About two weeks before the trial started, I was in Shapiro's office in Century City."; // Text
        ie.interpreter.set("T", T);
        PyObject answer = ie.interpreter.eval("RTE('None').WordPhraseRate(T)");
        System.out.print(answer.toString());    

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:22:46.543

我不确定性能上有什么不同，但是如果您不想担心桥接或其他问题，可以直接在 Java 中调用脚本。类似于以下内容。

**Python**，在名为 testing.py 的文件中：

```
#!/usr/local/bin/python
# coding: UTF-8
import os, sys
from nltk.tokenize import word_tokenize # Tokenizer

if __name__ == "__main__":
    # If you want to read from a file instead of passing data
    #text = open(sys.argv[1]).read()

    # read the first argument passed to script
    text = sys.argv[1]

    tokens = word_tokenize(text)
    print tokens 
```

**爪哇**：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.InputStream;
import java.io.File;

public class pythonfromjava{
    public static void main(String argv[]) {
        try{
            // for tilda expansion
            //if (filepath.startsWith("~" + File.separator)) {
                //filepath = System.getProperty("user.home") + filepath.substring(1);
            //}

            //ProcessBuilder builder = new ProcessBuilder("python", "-c", "import sys; import nltk; print \"whatever\"");
            ProcessBuilder builder = new ProcessBuilder("python", "testing.py", "four scores and seven years ago");
            builder.redirectErrorStream(true);
            Process p = builder.start();
            InputStream stdout = p.getInputStream();
            BufferedReader reader = new BufferedReader (new InputStreamReader(stdout));

            String line;
            while ((line = reader.readLine ()) != null) {
                System.out.println ("Stdout: " + line);
            }
        } catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

# javascript - 如何使用 javascript 选择正确的元素？

> ID：13716231
> 
> 赞同：0
> 
> 时间：2012-12-05T04:20:45.687
> 
> 标签：javascript, jquery, html

我正在将此 javascript 连接到服务器代码，但我无法选择正确的元素。无论我选择什么按钮，video_id 总是最终成为第一个（在本例中为“bbc”）。如何更改 javascript/jquery 以根据所选按钮为 video_id 选择正确的值？

```
 <script type="text/javascript">
   $(document).ready(function() {
       $(".removebutton").submit(function(event){
       event.preventDefault();
            $.ajax({
                 type:"POST",
                 url:"/munch_video/",
                 data: {
                        'video_id': $('#video_id').val(), // from form
                        'playlist': $('.playlist').val(), // from form
                        'add_remove': $('.add_remove').val(), // from form 
                        },
                 success: function(message){                         
                        alert(message);
                        $('.span8').html(message);
                    }
            });
            return false;
       });

    });
</script>

        <form method='post' action = '/munch_video/ ' class = 'removebutton'>{% csrf_token %}
            <input type="hidden" value="Channel" class = "playlist"/>
            <input type="hidden" value="bbc" id = "video_id"/>
            <input type="hidden" value="remove_video" class = "add_remove"/>

            <input type='submit' class="btn btn-danger" value='Remove from plate'/>
        </form>

        <form method='post' action = '/munch_video/ ' class = 'removebutton'>{% csrf_token %}
            <input type="hidden" value="Channel" class = "playlist"/>
            <input type="hidden" value="toyota" id = "video_id"/>
            <input type="hidden" value="remove_video" class = "add_remove"/>

            <input type='submit' class="btn btn-danger" value='Remove from plate'/>
        </form>

        <form method='post' action = '/munch_video/ ' class = 'removebutton'>{% csrf_token %}
            <input type="hidden" value="Channel" class = "playlist"/>
            <input type="hidden" value="gm" id = "video_id"/>
            <input type="hidden" value="remove_video" class = "add_remove"/>

            <input type='submit' class="btn btn-danger" value='Remove from plate'/>
        </form>

        can be multiple buttons, each with a different video_id value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:23:13.547

问题是因为您有多个具有相同 ID 的元素。因此选择了相同的元素。

由于您正在处理删除按钮点击，您可以在类似的范围内进行查找

```
'video_id': $(this).find('#video_id').val() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:22:44.770

此选择器`$('#video_id')`为您提供与选择器匹配的集合，但始终在其上使用 val()`applied`到`first`元素。您可以使用选择器`this`作为[**上下文**](http://api.jquery.com/jQuery/)`video_id`传递以获取`descendants`当前表单。

改变

```
$('#video_id').val() 
```

至

```
$('#video_id', this).val() 
```

或使用[**find()**](http://api.jquery.com/find/)方法在后代中搜索 id

```
$(this).find('#video_id').val(); 
```

编辑以成功删除单击的表单

```
$(document).ready(function() {
   $(".removebutton").submit(function(event){
   currentForm = $(this);
   event.preventDefault();
        $.ajax({
             type:"POST",
             url:"/munch_video/",
             data: {
                    'video_id': $('#video_id').val(), // from form
                    'playlist': $('.playlist').val(), // from form
                    'add_remove': $('.add_remove').val(), // from form 
                    },
             success: function(message){                         
                    alert(message);
                    $('.span8').html(message);
                    currentForm.remove();
                }
        });
        return false;
   });

}); 
```

# php - Mysql 查询清除一行而不是更新

> ID：13716232
> 
> 赞同：-2
> 
> 时间：2012-12-05T04:20:48.437
> 
> 标签：php, mysql

我不知道为什么会这样，我确实`$sqll`在我的代码中回显并且它显示了所有正确的信息，但是当它返回到带有信息的页面时它是空白的。

这是脚本

```
<?php
include("header.php"); 
include("sidebar.php");

$memberon = $_GET['user'];
$getmember = mysql_query("SELECT * FROM accounts WHERE username='".$memberon."'");
$member = mysql_fetch_array($getmember);
?>       

    <h2>Edit User</h2> 

<?php
$points = asql($_POST['points']);
$cash = asql($_POST['cash']);
$banned = asql($_POST['banned']);
$completed = asql($_POST['completed']);
$confirm= asql($_POST['confirm']);
$referral= asql($_POST['ref']);
$email= asql($_POST['email']);
$username= asql($_POST['username']);
$fname= asql($_POST['fname']);
$lname= asql($_POST['lname']);
$add= asql($_POST['address']);
$state= asql($_POST['state']);
$country= asql($_POST['country']);
$postal= asql($_POST['postal']);
$apt= asql($_POST['suite']);
$city= asql($_POST['city']);
$phone= asql($_POST['phone']);
$dob= asql($_POST['dob']);

if ($_POST['subm']) {
if($points <> $member['points'] || $cash <> $member['current_b']){
$final_report = "Checking";
print"This users balance has been updated, please input your pass code to confirm these changes <br />
<form method='post' action=''><input type='hidden' name='points' value='$points'><input type='hidden' name='cash' value='$cash'><input type='hidden' name='banned' value='$banned'><input type='hidden' name='confirm' value='$confirm'><input type='hidden' name='ref' value='$referral'><input type='hidden' name='email' value='$email'><input type='hidden' name='fname' value='$fname'><input type='hidden' name='lname' value='$lname'><input type='hidden' name='address' value='$add'><input type='hidden' name='state' value='$state'><input type='hidden' name='country' value='$country'><input type='hidden' name='postal' value='$postal'><input type='hidden' name='suite' value='$apt'><input type='hidden' name='city' value='$city'><input type='hidden' name='phone' value='$phone'><input type='hidden' name='dob' value='$dob'><input type='password' name='passcode' /><input type='submit' name='pcheck' value='Sumbit' /></form>";
}
else
{
$final_report = "";
}
if($final_report == NULL){
$updatemembers = mysql_query("UPDATE accounts SET points='$points', current_b='$cash', level='$banned', email_check='$confirm', referral='$referral', username='$username', fname='$fname', lname='$lname', email='$email', address='$add', state='$state', country='$country', postal='$postal', suite='$apt', city='$city', phone='$phone', dob='$dob' WHERE username='".$memberon."'") or die(mysql_error());
     print "You Have Successfully Updated this Information";    
     header("Refresh: 2;url=edit.php?user=".$memberon."");  
}
}

if($_POST['pcheck']){
$pchecki = asql($_POST['passcode']);
$pchecks = md5($pchecki);
$check = mysql_query("SELECT * FROM panel_access WHERE psn = '".$_SESSION['aname']."'") or die(mysql_error());
$checkar = mysql_fetch_array($check);
$final_report = "Checking.";
if($pchecks != $checkar['change_ab']){
$final_report = "That password is incorrect.";
     print "".$final_report.""; 
     header("Refresh: 2;url=edit.php?user=".$memberon."");
}
else
{
$final_report = "";
}
if($final_report == NULL){
$sqll = "UPDATE accounts SET points='".$points."', current_b='".$cash."', level='".$banned."', email_check='".$confirm."', referral='".$referral."', username='".$username."', fname='".$fname."', lname='".$lname."', email='".$email."', address='".$add."', state='".$state."', country='".$country."', postal='".$postal."', suite='".$apt."', city='".$city."', phone='".$phone."', dob='".$dob."' WHERE username='".$memberon."'";
$updatemember = mysql_query($sqll) or die(mysql_error());
     print "You Have Successfully Updated this Information ".$sqll."";  
     header("Refresh: 2;url=edit.php?user=".$memberon."");  
}
}

    if(!isset($_POST['subm']) && !isset($_POST['pcheck']))
    {
 ?>                   
<div class='form'>
         <form action='' method='post'><input type=hidden name=subm value=1>
                <div class="element">
                        <label for='email'>Email:</label>
                        <input type='text' name='email' id='email' value='<?php echo $member['email'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='username'>Username:</label>
                        <input type='text' name='username' id='username' value='<?php echo $member['username'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='ip'>IP Address:</label>
                        <input type='text' name='ip' id='ip' value='<?php echo $member['ip'] ?>' size='54' readonly='readonly' />
                    </div>
                   <div class="element">
                        <label for='banned'>Banned: <font color='red' size='1'><b>1=No 2=Yes</b></font></label>
                        <input type='text' name='banned' id='banned' value='<?php echo $member['level'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='confirm'>E-Mail Confirmed: <font color='red' size='1'>0=No 1=Yes</font></label>
                        <input type='text' name='confirm' id='confirm' value='<?php echo $member['email_check'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='ref'>Referral:</label>
                        <input type='text' name='ref' id='ref' value='<?php echo $member['referral'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='points'>Points:</label>
                        <input type='text' name='points' id='points' value='<?php echo $member['points'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='cash'>Cash:</label>
                        <input type='text' name='cash' id='cash' value='<?php echo $member['current_b'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='fname'>First Name:</label>
                        <input type='text' name='fname' id='fname' value='<?php echo $member['fname'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='lname'>Last Name:</label>
                        <input type='text' name='lname' id='lname' value='<?php echo $member['lname'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='phone'>Phone:</label>
                        <input type='tel' name='phone' id='phone' value='<?php echo $member['phone'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='dob'>Date of Birth:</label>
                        <input type='text' name='dob' id='dob' value='<?php echo $member['dob'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='address'>Address:</label>
                        <input type='text' name='address' id='address' value='<?php echo $member['address'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='suite'>Suite/Apt.:</label>
                        <input type='text' name='suite' id='suite' value='<?php echo $member['suite'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='country'>Country:</label>
                        <input type='text' name='country' id='country' value='<?php echo $member['country'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='state'>State:</label>
                        <input type='text' name='state' id='state' value='<?php echo $member['state'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='city'>City:</label>
                        <input type='text' name='city' id='city' value='<?php echo $member['city'] ?>' size='54' />
                    </div>
                   <div class="element">
                        <label for='postal'>Postal Code:</label>
                        <input type='text' name='postal' id='postal' value='<?php echo $member['postal'] ?>' size='54' />
                    </div>
<?php
                     print"<dl class='submit'>
                    <input type='submit' name='submit' id='submit' value='Submit' />
                     </dl>

         </form>
         </div> "; 
      }
      include("footer.php");
?> 
```

在旁注中，我知道`mysql_query`和喜欢的东西正在被弃用，我想指出我没有写这个，只是为客户做一些编辑，而这部分恰好是后方的痛苦。

此外，它唯一的查询`if($_POST['pcheck'])`不起作用，第一个查询`if($_POST['subm']`工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:29:37.850

首先，最后有一个空字符串。这没有伤害，但也没有任何目的。

您将页面重定向到`edit.php?user=$memberon`，但`$memberon`在收到 POST 请求时未设置。您可以使用 GET 或 POST，但不能同时使用两者。

我猜，你必须重定向到

```
edit.php?user=$username 
```

# iphone - 如何仅加载请求的 UIWebView url 的特定部分？

> ID：13716234
> 
> 赞同：1
> 
> 时间：2012-12-05T04:20:59.340
> 
> 标签：iphone, objective-c, ios, ipad, uiwebview

我正在为本地企业创建一个应用程序，但他们让我很痛苦，因为他们不会也不会创建 iPhone 友好的网页。他们反而要求我只加载网页的特定部分。

无论如何通过指定用户可以导航的网页的唯一允许坐标来做到这一点？他们希望我只显示几个 html 表格，并希望他们的桌面网页的其余部分带有链接等。用户无法看到。他们所要求的对我来说似乎有点“骇人听闻”，但我感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:44:42.567

```
-(void)viewDidAppear:(BOOL)animated
{

   NSString *string = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://stackoverflow.com/questions/13716234/how-to-load-only-a-specific-section-of-a-requested-uiwebview-url"] encoding:NSASCIIStringEncoding error:nil];

   NSLog(@"CNN String is %@",string);

   [self.wv loadHTMLString:string baseURL:nil];

   [self.wv setDelegate:self];
}

-(void)webViewDidFinishLoad:(UIWebView *)webView
{

   NSString *testString = [self.wv stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"nav-tags\").innerHTML;"];

   NSLog(@"Test String is %@",testString);
} 
```

如果您输入此代码，您将看到“标签”作为输出。使用正确的 id 在您的设备上执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:35:02.660

我个人会通过在 php.ini 中创建应用程序部分来解决这个问题。因此，给定页面可能会进行多次 RESTful ajax 调用以将内容加载到单独的 JavaScript 视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:40:11.823

您可以使用下载整个网页并使用组合技巧（如正则表达式等）来获取您想要的网页部分。

如果 html 页面使用 css 并将部分创建为带有 id 的 div，那将是最简单的。这将使您的工作变得轻松。

但是，这并不容易维护，因为一旦更改了网页，您的代码可能会中断。在 firefox 中使用 firebug 或其他一些插件并确定要显示的部分，然后着手找出解决方案。您还可以使用 javascript 获取 dom 元素并在 UIWebview 中显示它们。

# android - 单击单个联系人时应用程序崩溃

> ID：13716245
> 
> 赞同：1
> 
> 时间：2012-12-05T04:22:12.383
> 
> 标签：android, crash, click

我的应用程序总是在这个时候崩溃，请帮我解决这个问题。谢谢。

现在的情况如上面的标题所述。

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2009 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.contactmanager"
    android:versionCode="1" android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS"/>
    <uses-permission android:name="android.permission.WRITE_OWNER_DATA"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.GET_ACCOUNTS"/>

    <application android:label="@string/app_name" android:icon="@drawable/icon" android:allowBackup="true">
       <!--  --><activity android:name=".ContactManager" android:label="@string/app_name">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="ContactAdder" android:label="@string/addContactTitle">
        </activity>

        <activity android:name=".SingleListContact"
                    android:label="Contact Person Details">
        </activity>

    </application>

</manifest> 
```

SingleListContact.java

```
package com.example.android.contactmanager;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class SingleListContact extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.single_list_contact_view);

        TextView txtContact = (TextView) findViewById(R.id.contactList);

        Intent i = getIntent();
        // getting attached intent data
        String contact = i.getStringExtra("contact");
        // displaying selected product name
        txtContact.setText(contact);

    }
} 
```

我的 ContactManager.java 如下

```
/*
 * Copyright (C) 2009 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.contactmanager;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public final class ContactManager extends Activity implements OnItemClickListener
{

    public static final String TAG = "ContactManager";

    private Button mAddAccountButton;
    private ListView mContactList;
    private boolean mShowInvisible;
    //public BooleanObservable ShowInvisible = new BooleanObservable(false);
    private CheckBox mShowInvisibleControl;

    /**
     * Called when the activity is first created. Responsible for initializing the UI.
     */

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        Log.v(TAG, "Activity State: onCreate()");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contact_manager);

        // Obtain handles to UI objects
        mAddAccountButton = (Button) findViewById(R.id.addContactButton);
        mContactList = (ListView) findViewById(R.id.contactList);
        mShowInvisibleControl = (CheckBox) findViewById(R.id.showInvisible);

        // Initialise class properties
        mShowInvisible = false;
        mShowInvisibleControl.setChecked(mShowInvisible);

        // Register handler for UI elements
        mAddAccountButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Log.d(TAG, "mAddAccountButton clicked");
                launchContactAdder();
            }
        });
        mShowInvisibleControl.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
            {
                Log.d(TAG, "mShowInvisibleControl changed: " + isChecked);
                mShowInvisible = isChecked;
                populateContactList();
            }
        });

        mContactList = (ListView) findViewById(R.id.contactList);
        mContactList.setOnItemClickListener(this);

        // Populate the contact list
        populateContactList();
    }

    /**
     * Populate the contact list based on account currently selected in the account spinner.
     */
    private void populateContactList() {
        // Build adapter with contact entries
        Cursor cursor = getContacts();
        String[] fields = new String[] {
                ContactsContract.Data.DISPLAY_NAME
        };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contact_entry, cursor,
                fields, new int[] {R.id.contactEntryText});
        mContactList.setAdapter(adapter);
    }

    /**
     * Obtains the contact list for the currently selected account.
     *
     * @return A cursor for for accessing the contact list.
     */
    private Cursor getContacts()
    {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[]
                {
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME
                };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible ? "0" : "1") + "'";
        //String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible.get() ? "0" : "1") + "'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

        return this.managedQuery(uri, projection, selection, selectionArgs, sortOrder);
    }

    /**
     * Launches the ContactAdder activity to add a new contact to the selected account.
     */
    protected void launchContactAdder()
    {
        Intent i = new Intent(this, ContactAdder.class);
        startActivity(i);
    }

    public void onItemClick(AdapterView<?> l, View v, int position, long id) {
        Log.i("TAG", "You clicked item " + id + " at position " + position);
        // Here you start the intent to show the contact details
     // selected item
        TextView tv=(TextView)v.findViewById(R.id.contactList);
        String allcontactlist = tv.getText().toString();

        // Launching new Activity on selecting single List Item
        Intent i = new Intent(getApplicationContext(), SingleListContact.class);
        // sending data to new activity
        i.putExtra("Contact Person", allcontactlist);
        startActivity(i);

    }

} 
```

联系人入口.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2009 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <TextView android:text="@+id/contactEntryText"
              android:id="@+id/contactEntryText"
              android:layout_width="fill_parent"
              android:textSize="30sp"
              android:layout_height="wrap_content"/>
</LinearLayout> 
```

联系人管理器.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2009 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">  

    <ListView android:layout_width="wrap_content"
              android:id="@+id/contactList"
              android:layout_height="0dp"
              android:padding="10dp"
              android:textSize="200sp"
              android:layout_weight="10"/>
    <CheckBox android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:id="@+id/showInvisible"
              android:text="@string/showInvisible"/>
    <Button android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/addContactButton"
            android:text="@string/addContactButtonLabel"/>
</LinearLayout> 
```

日志猫结果：

```
12-05 05:00:31.289: E/AndroidRuntime(642): FATAL EXCEPTION: main
12-05 05:00:31.289: E/AndroidRuntime(642): java.lang.NullPointerException
12-05 05:00:31.289: E/AndroidRuntime(642):  at com.example.android.contactmanager.ContactManager.onItemClick(ContactManager.java:148)
12-05 05:00:31.289: E/AndroidRuntime(642):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
12-05 05:00:31.289: E/AndroidRuntime(642):  at android.widget.ListView.performItemClick(ListView.java:3513)
12-05 05:00:31.289: E/AndroidRuntime(642):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
12-05 05:00:31.289: E/AndroidRuntime(642):  at android.os.Handler.handleCallback(Handler.java:587)
12-05 05:00:31.289: E/AndroidRuntime(642):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-05 05:00:31.289: E/AndroidRuntime(642):  at android.os.Looper.loop(Looper.java:123)
12-05 05:00:31.289: E/AndroidRuntime(642):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-05 05:00:31.289: E/AndroidRuntime(642):  at java.lang.reflect.Method.invokeNative(Native Method)
12-05 05:00:31.289: E/AndroidRuntime(642):  at java.lang.reflect.Method.invoke(Method.java:507)
12-05 05:00:31.289: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-05 05:00:31.289: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-05 05:00:31.289: E/AndroidRuntime(642):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:30:10.947

onItemClick() 方法中存在错误。更新您的代码如下。

```
 public void onItemClick(AdapterView<?> l, View v, int position, long id) {
    Log.i("TAG", "You clicked item " + id + " at position " + position);
    // Here you start the intent to show the contact details
 // selected item
    TextView tv=(TextView)v.findViewById(R.id.contactList);
    String allcontactlist = tv.getText().toString();

    // Launching new Activity on selecting single List Item
    Intent i = new Intent(getApplicationContext(), SingleListContact.class);
    // sending data to new activity
    i.putExtra("Contact Person", allcontactlist);
    startActivity(i);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:44:39.417

不要用这个，

```
TextView tv=(TextView)v.findViewById(R.id.contactList);
        String allcontactlist = tv.getText().toString(); 
```

您不能直接将列表视图更改为文本视图。

你应该使用，

```
String allcontactlist = (String) (mContactList .getItemAtPosition(position)); 
```

它将包含从列表视图中选择的列表项。

要将其显示为，请在 xml 文件中`Text View`定义 a并使用，`TextView`

```
TextView textView = (TextView)findViewById(R.id.TextViewName);
textView.setText(allcontactlist); 
```

# javascript - 通过未转义的数据属性选择元素

> ID：13716247
> 
> 赞同：2
> 
> 时间：2012-12-05T04:22:22.713
> 
> 标签：javascript, jquery, string, escaping

无需详细说明我为什么要这样做...（应该首先对其进行编码，但这不是出于我无法控制的原因）

假设我有一些看起来像这样的 HTML

`<tr data-path="files/kissjake's files"">...</tr>`所以实际的数据路径是`files/kissjake's files"`

我该如何`<tr>`通过其数据路径进行选择？

我目前能做的最好的事情是当我将变量带入 JS 并进行任何操作时，我对其进行 URLEncode，以便我始终使用编码版本。jQuery 似乎足够聪明，可以正确确定数据路径，所以我并不担心。

问题在于我需要从另一个位置的数据路径读取代码的一个步骤，然后比较它们。

实际上选择这个`<tr>`让我感到困惑。

这是我的咖啡脚本

`oldPriority = $("tr[data-path='#{path}']").attr('data-priority')`

如果我插入路径的 URLEncoded 版本，它不会找到 TR。而且我无法对其进行 URLDecode，因为 jQuery 会中断，因为路径中有多个 ' 和 " 冲突。

我需要一些方法来选择任何`<tr>`与特定数据属性匹配的东西，即使它没有在 html 中编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:34:26.503

首先，你的意思是把多余的东西`"`放在那里吗？您将不得不逃避它，因为它不是有效的 HTML。

```
<tr data-path="files/kissjake's files&quot;">...</tr> 
```

要选择它，您需要在选择器内转义。这是一个外观示例：

```
$("tr[data-path='files/kissjake\\'s files\"']") 
```

* * *

## 解释：

`\\'`用于转义`'`内部的 CSS 选择器。由于`'`在其他单引号内，因此必须在 CSS 级别进行转义。有两个斜杠 '\` 的原因是我们必须转义一个斜杠，以便它进入选择器字符串。

Simpler example: `'John\\'s'` yields the string `John\'s`.

`\"` is used to escape the double quote which is contained inside the other double quotes. This one is being escaped on the JS level (not the CSS level), so only one slash is used because we don't need a slash to actually be inside the string contents.

Simpler example: `'Hello \"World\"'` yields the string `Hello "World"`.

* * *

# Update

Since you don't have control over how the HTML is output, and you are doomed to deal with invalid HTML, that means the extra double quote should be ignored. So you can instead do:

```
$("tr[data-path='files/kissjake\\'s files']") 
```

Just the `\\'` part to deal with the single quote. The extra double quote should be handled by the browser's lenient HTML parser.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:38:04.610

Building off of @Nathan Wall's answer, this will select all `<tr>` tags with a `data-path` attribute on them.

```
$("tr[data-path]"); 
```

# html - 如何在不同选项的选择框中显示不同的颜色

> ID：13716248
> 
> 赞同：0
> 
> 时间：2012-12-05T04:22:35.007
> 
> 标签：html, css

我有一部分代码显示多选框并根据 if 语句显示选项：

```
$moduleSELECT = '<select name="moduletextarea" id="moduleselect" size="10">'.PHP_EOL;      

if($modulenum == 0){

$moduleSELECT .= "<option disabled='disabled' value=''>No Modules currently on this Course</option>";   

}else{   

while ( $currentmodstmt->fetch() ) {

$moduleSELECT .= sprintf("<option disabled='disabled' value='%s'>%s - %s</option>", $dbModuleId, $dbModuleNo, $dbModuleName) . PHP_EOL; 
}

}

$moduleSELECT .= '</select>'; 
```

现在通过在互联网上进行一些研究，我认为在选项标签中包含标签是不好的做法。所以我的问题是，如果 if 语句为真，其中记录数为 0，我如何`"<option disabled='disabled' value=''>No Modules currently on this Course</option>";`以红色显示文本，如果满足 else 语句，我如何`sprintf("<option disabled='disabled' value='%s'>%s - %s</option>", $dbModuleId, $dbModuleNo, $dbModuleName) . PHP_EOL;`以黑色文本显示这些选项？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:29:15.877

只需为选择设置一个 css 样式（如果没有选项），在这种情况下`color: red;` ，您也可以为选项设置不同的颜色，只需在每个选项上设置不同的颜色。这里的小提琴示例：http: [//jsfiddle.net/kennypu/CP8Xf/1/](http://jsfiddle.net/kennypu/CP8Xf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:32:04.520

我不相信您可以使用 CSS 设置单个标签的样式，但您可以像 @kennypu 指出的那样`<option>`设置整个标签的样式。`<select>`

使用更好/更直观的 UI 实现所需结果的另一种方法可能是仅`<select>`在您实际有数据放入标签时才输出标签。`$modulenum == 0`也许您应该只输出一些您可以正确设置样式的不同 HTML 。

HTML

```
<div class='no-data'>No Modules currently on this Course</div> 
```

CSS

```
.no-data{
  background-color: #CCC;
  color: red;
  padding: 5px;
} 
```

# android - 如何在同一个活动中实现具有不同项目列表和不同操作的多个微调器

> ID：13716251
> 
> 赞同：4
> 
> 时间：2012-12-05T04:22:54.560
> 
> 标签：android, android-layout, android-spinner

我想在Android中实现两个不同的微调器，微调器有不同的数据集

这是具有年龄的微调器，它使用具有所有年龄范围（es *18-20、19-21**等*）的已定义字符串数组

 *```
 <Spinner
        android:id="@+id/spAge"
        android:layout_width="match_parent"
        android:layout_height="35dp"
        android:entries="@array/age_array" 
        tools:listitem="@android:layout/simple_spinner_item/> 
```

这是带有性别的微调器，仅显示*男性*和*女性这两个项目*

```
 <Spinner
       android:id="@+id/spSex"
       android:layout_width="match_parent"
       android:layout_height="35dp"
       android:entries="@array/sex_array"
       tools:listitem="@android:layout/simple_spinner_item /> 
```

对于每个选定的项目，我的活动应将关联的选定项目值设置为两个对象：

```
String selectedAge;
String selectedItem; 
```

我看到的示例不包含多个微调器，其中包含不同的项目集和对所选项目的不同操作，我不知道如何解决问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T04:49:04.780

如下编写您的代码以对所选项目执行不同的操作。

```
 spinner1.setOnItemSelectedListener(this);
    spinner2.setOnItemSelectedListener(this);
  public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    switch(arg0.getId()){
             case R.id.spAge :
                   //Your Action Here.
                   break;
             case R.id.spSex :
                   //Your Another Action Here.
             break;
            }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:31:45.520

试试这个

```
 ArrayAdapter<CharSequence> adapterAge; 
 ArrayAdapter<CharSequence> adapterSex;

 String[] AgeArr = {"18-20", "19-21"};
 String[] sexArr = {"male", "female"};

 Spinner ageDrp =(Spinner)findViewById(R.id.spAge);
 Spinner sex1Drp    =(Spinner)findViewById(R.id.spSex);

adapterAge =    new ArrayAdapter<CharSequence>(this,android.R.layout.simple_spinner_item,AgeArr);
adapterAge.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
ageDrp.setAdapter(adapterAge);

adapterSex=     new ArrayAdapter<CharSequence>(this,android.R.layout.simple_spinner_item,sexArr);
adapterSex.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
sexDrp.setAdapter(adapterSex);

String selectedAge  = ageDrp.getSelectedItem().toString();
String selectedSex  = sexDrp.getSelectedItem().toString();
System.out.println(selectedAge+" "+selectedSex);// check the output in logcat 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-08T20:15:24.960

> 试试这个方法

```
spinner1 = (Spinner) findViewById(R.id.spinner);
spinner2 = (Spinner) findViewById(R.id.highschoolspinner);

List<String> categories = new ArrayList<String>();
    categories.add("Qualification");
    categories.add("High School");
    categories.add("Higher Secondary/PUC");
    categories.add("Diploma");
    categories.add("Degree");
    categories.add("Master Degree");

 List<String> list = new ArrayList<String>();
        list.add("Plus One");
        list.add("Plus Two");

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, 
R.layout.spinnertext, categories);
    adapter.setDropDownViewResource(android.R.layout.select_dialog_item);
    spinner.setAdapter(adapter);

ArrayAdapter<String> dataAdapter12 = new ArrayAdapter<String>(this, 
R.layout.spinnertext, list);

dataAdapter12.setDropDownViewResource(android.R.layout.
simple_spinner_dropdown_item);

dataAdapter12.notifyDataSetChanged();
highschool.setAdapter(dataAdapter12) 
```

**我使用自定义适配器加载数据，您可以使用内置适配器，如**

```
 ArrayAdapter dataAdapter11 = new ArrayAdapter(this, 
 android.R.layout.simple_list_item_1, list); 
```*

# mysql - MySQL 触发器未按应有的方式执行

> ID：13716253
> 
> 赞同：1
> 
> 时间：2012-12-05T04:22:57.753
> 
> 标签：mysql, triggers

我在下面编写了触发器，但是当我插入表格时，它并没有像预期的那样大写插入的单词。（也没有错误）。任何可能的解决方案？（我有一个employee 和一个employee2 表，因为我读到你不能在它试图更新的表中拥有触发器）。

```
DELIMITER $$
DROP TRIGGER IF EXISTS mytrigger$$
CREATE TRIGGER mytrigger before INSERT ON employee FOR EACH ROW
BEGIN
 update employee2
 SET employee2.FName = CONCAT(UCASE(LEFT(employee2.FName, 1)), LCASE(SUBSTRING(employee2.FName, 2)));
END;
$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:30:57.593

您可以在尝试更新的表上设置触发器，只是不能运行 UPDATE 查询。相反，您在插入数据之前对其进行修改：

```
DELIMITER $$
DROP TRIGGER IF EXISTS mytrigger$$
CREATE TRIGGER mytrigger before INSERT ON employee FOR EACH ROW
BEGIN
  SET NEW.FName = CONCAT(UCASE(LEFT(NEW.FName, 1)), LCASE(SUBSTRING(NEW.FName, 2)));
END;
$$
DELIMITER ; 
```

“NEW”关键字使您可以访问将要插入的数据。

# java - 如何监控 Java 进程的性能？

> ID：13716255
> 
> 赞同：0
> 
> 时间：2012-12-05T04:23:11.823
> 
> 标签：java, performance, monitoring, health-monitoring

我需要监控 Java 进程的性能并自动生成报告。报告应包含有关内存利用率线程使用情况、进程使用情况等的数据。但我不确定如何完成此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:24:25.810

> 我需要监控 Java 进程的性能并自动生成报告。

您需要确定哪些指标对应用程序的用户很重要，例如延迟和吞吐量。即使一切看起来都很好，这些也经常受到影响。例如，一个 8 cpu 系统在 5 分钟内只有 6% 的繁忙可能听起来不错，但可能每 5 分钟有一个请求需要超过 2 分钟。

> 报告应包含有关内存利用率线程使用情况的数据，

默认情况下，线程共享对象的一个​​关键特性。这意味着线程本地内存使用几乎总是微不足道的，通常不值得测量。

> 进程使用等

这对于长时间的容量规划很有用，但对于查找特定于应用程序的问题（见上文）没有用处。

> 但我不确定如何做到这一点。有什么建议么？

找出哪些指标可以帮助您发现影响应用程序用户的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:24:21.597

如果想通过程序获取数据，您可以为此目的使用 JMX API。这是有关此主题的[oracle](http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html)教程。

如果你只是想监控进程，有 VisualVM 之类的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:28:08.250

VisualVM 是一个很好的工具来监控内存利用率和其他东西[VisualVM](http://visualvm.java.net/)

# c++ - 在二叉搜索树中搜索一个值

> ID：13716259
> 
> 赞同：0
> 
> 时间：2012-12-05T04:23:26.137
> 
> 标签：c++, pointers, compiler-errors, binary-search-tree

我正在开发一个函数，该函数在模板化二叉搜索树中搜索具有给定键的值，然后返回指向该数据值的指针。如果给定的键在树中不存在，它返回的指针应该指向 NULL。到目前为止，我有：

```
template <typename Item, typename Key>
Item* BSTree<Item,Key>::search(const Key& key) const {
    Item* entry = NULL;
    Node* cursor = root;
    while(cursor != NULL) {
        if(key > cursor->data) 
            cursor = cursor->right;
        else if(key < cursor->data)
            cursor = cursor->left;
        else
            entry = cursor->data;
    }
    return entry;
} 
```

但是当我尝试运行它时出现错误，说我无法从 Item 转换为 Item*。我一直遇到指针问题，无法找到解决这些错误的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:28:03.973

而不是`entry = cursor->data;`你显然需要`entry = &(cursor->data);`.

另请注意，一旦找到您的项目，您可能希望立即返回它，而不是继续遍历树查看更多项目。

# .net - 异步执行等待任何

> ID：13716261
> 
> 赞同：-1
> 
> 时间：2012-12-05T04:23:35.137
> 
> 标签：.net

有一些方法，称为同步，例如：

```
tasks.ForEach(p=> Proccess(p));

void Proccess(){
   //do some long running work
} 
```

我怎样才能在伪代码上做类似的事情：

```
tasks.ForEach(p=> Async(Proccess(p));
WaitForAny(); 
```

在这里，我想异步调用任务，并等待任何执行结束。（不是全部）。你能帮我吗，没有.net 4的并行任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:31:45.117

看一眼`Task.WaitAny`

```
Task[] tasksToWaitFor = new Task[itemsToCall.Length];
foreach (int i = 0; i < itemsToCall.Length; i++)
{
    var itemToCall = itemsToCall[i];
    tasksToWaitFor[i] = Task.Factory.StartNew( () => itemToCall.Call());
}

await Task.WaitAny(tasksToWaitFor); 
```

[http://msdn.microsoft.com/en-us/library/dd270672.aspx](http://msdn.microsoft.com/en-us/library/dd270672.aspx)

# php - 使用 PHP 从 RTF 数据中提取文本

> ID：13716263
> 
> 赞同：1
> 
> 时间：2012-12-05T04:23:58.233
> 
> 标签：php, parsing, converter, rtf

我已经查看了所有内容并尝试了一些不同的东西，但我似乎无法从一些 RTF 数据中正确地获取文本（带有 linbreaks）。目前我正在使用[这个 PHP 函数](http://webcheatsheet.com/php/reading_the_clean_text_from_rtf.php)。

我正在写一些东西，可以从存储 RTF 数据的文件中提取歌词。这是一个示例输入行：

```
{\rtf1\ansi\ansicpg1252\cocoartf1038\cocoasubrtf350
{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\qc\pardirnatural

\f0\fs96 \cf1 Be near O God\
Be near O God of us\
Your nearness is to us our good\
Be near O God\
Be near O God of us\
Your nearness is to us our good\
Our good} 
```

然后通过上面的链接函数运行它会产生这个：

```
 Be near O GodBe near O God of usYour nearness is to us our goodBe near O GodBe near O God of usYour nearness is to us our goodOur good 
```

它获取文本，但它也以一种无用的方式删除了所有换行符。它没有出现在这里，但由于某种原因，它也有几个前导换行符。

关于如何在保留换行符的同时使用 PHP 正确解析此 RTF 数据的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-31T13:19:23.183

```
<?php

 function rtf_isPlainText($s) {
    $arrfailAt = array("*", "fonttbl", "colortbl", "datastore", "themedata");
    for ($i = 0; $i < count($arrfailAt); $i++)
        if (!empty($s[$arrfailAt[$i]])) return false;
    return true;
} 

function rtf2txt($filename) {
    // Read the data from the input file.
    $text = file_get_contents($filename);
    if (!strlen($text))
        return "";

    // Create empty stack array.
    $document = "";
    $stack = array();
    $j = -1;
    // Read the data character-by- character…
    for ($i = 0, $len = strlen($text); $i < $len; $i++) {
        $c = $text[$i];

        // Depending on current character select the further actions.
        switch ($c) {
            // the most important key word backslash
            case "\\":
                // read next character
                $nc = $text[$i + 1];

                // If it is another backslash or nonbreaking space or hyphen,
                // then the character is plain text and add it to the output stream.
                if ($nc == '\\' && rtf_isPlainText($stack[$j])) $document .= '\\';
                elseif ($nc == '~' && rtf_isPlainText($stack[$j])) $document .= ' ';
                elseif ($nc == '_' && rtf_isPlainText($stack[$j])) $document .= '-';
                // If it is an asterisk mark, add it to the stack.
                elseif ($nc == '*') $stack[$j]["*"] = true;
                // If it is a single quote, read next two characters that are the hexadecimal notation
                // of a character we should add to the output stream.
                elseif ($nc == "'") {
                    $hex = substr($text, $i + 2, 2);
                    if (rtf_isPlainText($stack[$j]))
                        $document .= html_entity_decode("&#".hexdec($hex).";");
                    //Shift the pointer.
                    $i += 2;
                // Since, we’ve found the alphabetic character, the next characters are control word
                // and, possibly, some digit parameter.
                } elseif ($nc >= 'a' && $nc <= 'z' || $nc >= 'A' && $nc <= 'Z') {
                    $word = "";
                    $param = null;

                    // Start reading characters after the backslash.
                    for ($k = $i + 1, $m = 0; $k < strlen($text); $k++, $m++) {
                        $nc = $text[$k];
                        // If the current character is a letter and there were no digits before it,
                        // then we’re still reading the control word. If there were digits, we should stop
                        // since we reach the end of the control word.
                        if ($nc >= 'a' && $nc <= 'z' || $nc >= 'A' && $nc <= 'Z') {
                            if (empty($param))
                                $word .= $nc;
                            else
                                break;
                        // If it is a digit, store the parameter.
                        } elseif ($nc >= '0' && $nc <= '9')
                            $param .= $nc;
                        // Since minus sign may occur only before a digit parameter, check whether
                        // $param is empty. Otherwise, we reach the end of the control word.
                        elseif ($nc == '-') {
                            if (empty($param))
                                $param .= $nc;
                            else
                                break;
                        } else
                            break;
                    }
                    // Shift the pointer on the number of read characters.
                    $i += $m - 1;

                    // Start analyzing what we’ve read. We are interested mostly in control words.
                    $toText = "";
                    switch (strtolower($word)) {
                        // If the control word is "u", then its parameter is the decimal notation of the
                        // Unicode character that should be added to the output stream.
                        // We need to check whether the stack contains \ucN control word. If it does,
                        // we should remove the N characters from the output stream.
                        case "u":
                            $toText .= html_entity_decode("&#x".dechex($param).";");
                            $ucDelta = @$stack[$j]["uc"];
                            if ($ucDelta > 0)
                                $i += $ucDelta;
                        break;
                        // Select line feeds, spaces and tabs.
                        case "par": case "page": case "column": case "line": case "lbr":
                            $toText .= "\n"; 
                        break;
                        case "emspace": case "enspace": case "qmspace":
                            $toText .= " "; 
                        break;
                        case "tab": $toText .= "\t"; break;
                        // Add current date and time instead of corresponding labels.
                        case "chdate": $toText .= date("m.d.Y"); break;
                        case "chdpl": $toText .= date("l, j F Y"); break;
                        case "chdpa": $toText .= date("D, j M Y"); break;
                        case "chtime": $toText .= date("H:i:s"); break;
                        // Replace some reserved characters to their html analogs.
                        case "emdash": $toText .= html_entity_decode("&mdash;"); break;
                        case "endash": $toText .= html_entity_decode("&ndash;"); break;
                        case "bullet": $toText .= html_entity_decode("&#149;"); break;
                        case "lquote": $toText .= html_entity_decode("&lsquo;"); break;
                        case "rquote": $toText .= html_entity_decode("&rsquo;"); break;
                        case "ldblquote": $toText .= html_entity_decode("&laquo;"); break;
                        case "rdblquote": $toText .= html_entity_decode("&raquo;"); break;
                        // Add all other to the control words stack. If a control word
                        // does not include parameters, set &param to true.
                        default:
                            $stack[$j][strtolower($word)] = empty($param) ? true : $param;
                        break;
                    }
                    // Add data to the output stream if required.
                    if (rtf_isPlainText($stack[$j]))
                        $document .= $toText;
                }

                $i++;
            break;
            // If we read the opening brace {, then new subgroup starts and we add
            // new array stack element and write the data from previous stack element to it.
            case "{":
                array_push($stack, $stack[$j++]);
            break;
            // If we read the closing brace }, then we reach the end of subgroup and should remove 
            // the last stack element.
            case "}":
                array_pop($stack);
                $j--;
            break;
            // Skip “trash”.
            case '\0': case '\r': case '\f': case '\n': break;
            // Add other data to the output stream if required.
            default:
                if (rtf_isPlainText($stack[$j]))
                    $document .= $c;
            break;
        }
    }
    // Return result.
    return $document;
}

echo rtf2txt('here is your file path');
?> 
```

# python - for-in 循环的上限在每个循环中变化

> ID：13716265
> 
> 赞同：0
> 
> 时间：2012-12-05T04:24:08.750
> 
> 标签：python, list, for-loop, python-2.7

如何在每次迭代中更新循环的上限？在下面的代码中，List 在每个循环中都会被缩短。但是，for, in 循环中的 lenList 不是，即使我将 lenList 定义为全局。任何想法如何解决这个问题？（我正在使用 Python 2.sthg）谢谢！

```
def similarity(List):
import difflib
lenList = len(List)
for i in range(1,lenList):
    import numpy as np
    global lenList
    a = List[i]
    idx = [difflib.SequenceMatcher(None, a, x).ratio() for x in List]
    z = idx > .9
    del List[z]
    lenList = len(List)

X = ['jim','jimmy','luke','john','jake','matt','steve','tj','pat','chad','don']
similarity(X) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:27:50.370

在 python 中循环索引是不好的做法。不过，您也许可以像这样完成您想要的（编辑评论）：

```
def similarity(alist):
  position = 0
  while position < len(alist):
    item = alist[position]
    position += 1
    # code here that modifies alist 
```

列表将评估`True`它是否有任何条目，或者`False`它何时为空。通过这种方式，您可以使用在操作其项目期间可能会增长的列表。

此外，如果你*绝对*必须有索引，你也可以得到这些：

```
for idx, item in enumerate(alist):
  # code here, where items are actual list entries, and 
  # idx is the 0-based index of the item in the list. 
```

在 ... 3.x（我相信）中，您甚至可以传递一个可选参数来枚举以控制`idx`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:27:42.930

这里的问题是，`range()`它只在循环开始时评估一次，并在那时产生一个范围生成器（或 2.x 中的列表）。然后您无法更改范围。更不用说数字和不可变了，因此您正在为 分配一个新值`lenList`，但这不会影响它的任何用途。

最好的解决方案是改变你的算法的工作方式，而不是依赖这种行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:29:06.273

The`range`是在循环的第一次迭代之前构造的对象，因此您正在迭代该对象中的值。相反，您将需要使用 while 循环，尽管正如 Lattyware 和 gddc 指出的那样，它不会很 Pythonic。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T04:29:31.920

您在上面的代码中有效循环的是在第一次迭代本身中生成的列表。

你也可以把上面写成

```
li = range(1,lenList)
for i in li:
    ... your code ... 
```

在创建 li 后更改 lenList 对 li 没有影响

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T05:14:44.563

只要对函数的工作方式进行一点小修改，这个问题就会变得容易得多：不要从现有列表中删除类似的项目，而是创建并返回一个省略了这些项目的新项目。

对于仅删除与第一个项目的相似性的特定情况*，*这简化了很多，并且不需要涉及 Numpy 的花哨索引（因为缺少对 的调用，您实际上并没有使用它`np.array`）：

```
import difflib

def similarity(lst): 
    a = lst[0]
    return [a] + \
       [x for x in lst[1:] if difflib.SequenceMatcher(None, a, x).ratio() > .9] 
```

*在此基础上，可以递归地对列表中的每个*项目重复它- 您需要将最后的列表理解传递回`similarity`，并处理接收一个空列表：

```
def similarity(lst):
   if not lst: 
       return []
   a = lst[0]
   return [a] + similarity(
        [x for x in lst[1:] if difflib.SequenceMatcher(None, a, x).ratio() > .9]) 
```

另请注意，在函数内部导入和命名变量`list`（隐藏内置`list`）都是值得避免的做法，因为它们会使您的代码更难遵循。

# facebook - Facebook iOS SDK - 分享用户照片

> ID：13716272
> 
> 赞同：0
> 
> 时间：2012-12-05T04:24:56.663
> 
> 标签：facebook, facebook-graph-api, facebook-ios-sdk

我需要将照片上传到用户的相册并让用户分享一些消息。我已经使用 将照片上传到应用相册`[FBRequestConnection startForUploadPhoto:photo completionHandler:handler]`，但是有什么方法可以分享上传的照片吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T08:44:44.240

您可以使用 Facebook SDK 中提供的 startWithGraphPath 方法：

```
+ (FBRequestConnection*)startWithGraphPath:(NSString*)graphPath
                            parameters:(NSDictionary*)parameters
                            HTTPMethod:(NSString*)HTTPMethod
                     completionHandler:(FBRequestHandler)handler; 
```

这是我用来上传带有消息的照片的代码，因此照片出现在我的时间轴上并带有消息：

```
- (void) requestPostPhoto:(UIImage *)photo withMessage:(NSString *)message
{
    if( [self isLocalUserConnected] )
    {
        NSMutableDictionary * params = [[NSMutableDictionary alloc] init];
        if( message != nil || ![message isEqualToString:@""] )
        {
            [params setObject:message forKey:@"message"];
        }

        [params setObject:UIImagePNGRepresentation(photo) forKey:@"picture"];        
        [FBRequestConnection startWithGraphPath:@"me/photos"
                                     parameters:params
                                     HTTPMethod:@"POST" completionHandler:^(FBRequestConnection * connection, id result, NSError * error)
         {
             //TODO: add some code here
         }];
    }
} 
```

我认为您可以通过 Facebook 用户 ID 在 startWithGraphPath: @"me" 中进行更改。

# php - Intuit 合作伙伴平台 - 客户的多个送货地址

> ID：13716278
> 
> 赞同：1
> 
> 时间：2012-12-05T04:25:29.040
> 
> 标签：php, intuit, intuit-partner-platform

我正在使用 IPP（通过 php devkit）构建一个应用程序来从客户的快速手册中获取数据。我预计我的许多用户将在他们的公司文件中有多个送货地址。是否可以获得每个送货地址？

我使用调用得到的响应（使用 php devkit）

```
$CustomerService->findAll($Context, $realm, $query, $page, $limit); 
```

似乎只返回一个送货地址。[该线程](https://idnforums.intuit.com/messageview.aspx?catid=69&threadid=13279&enterthread=y)表明不支持多个送货地址，但也许在过去 2 年情况发生了变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:46:16.877

QB 2013 开始通过 SDK 接受多个地址。

但是，对于 IPP v2，只有默认送货地址可用。

威廉·洛芬

Intuit 合作伙伴平台，开发者关系

# windows - 在 Windows Phone 8 中映射点击事件/鼠标按下事件？

> ID：13716289
> 
> 赞同：3
> 
> 时间：2012-12-05T04:27:08.950
> 
> 标签：windows, silverlight, maps, windows-phone, windows-phone-8

我正在使用windows phone 模拟器。我写了一个非常简单的程序：当用户点击地图一次时，在地图上画一个标记。

然后我使用了map_tap事件，得到了点击的位置如下，

```
private void map_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    Point p = e.GetPosition(null);
    GeoCoordinate s = map.ConvertViewportPointToGeoCoordinate(p);

    Ellipse myCircle = new Ellipse();
    myCircle.Fill = new SolidColorBrush(Colors.Blue);
    myCircle.Height = 20;
    myCircle.Width = 20;
    myCircle.Opacity = 50;

    MapOverlay myLocationOverlay = new MapOverlay();
    myLocationOverlay.Content = myCircle;
    myLocationOverlay.PositionOrigin = new Point(0, 0);
    myLocationOverlay.GeoCoordinate = s;

    MapLayer myLocationLayer = new MapLayer();
    myLocationLayer.Add(myLocationOverlay);

    map.Layers.Add(myLocationLayer);
} 
```

问题是，我得到的点不是鼠标（在模拟器中是鼠标而不是手指）单击的点。它比我单击的位置低一些距离（大约低 50 像素）。

因此，无论我在模拟器中单击什么位置，都会在我单击的位置下方绘制圆圈，这有点奇怪。

我的代码有什么问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T04:51:03.403

GestureEventArgs.GetPosition() 方法采用一个参数，指定要获取相对于哪个 UIElement 的坐标（请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.input.gestureeventargs.getposition%28v=vs.95%29.aspx)）。所以，尝试做

```
Point p = e.GetPosition(map); 
```

反而。

# android - SimpleCursorAdapter 列表未显示

> ID：13716291
> 
> 赞同：1
> 
> 时间：2012-12-05T04:27:19.303
> 
> 标签：android, arraylist, simplecursoradapter, android-listfragment

我的 SimpleCursorAdapter 不显示我传递给它的 ArrayList 中的任何数据！为什么会这样，我该如何解决？

这是我的 ListFragment，您可以看到在 onViewCreated() 方法中使用的 SimpleCursorAdapter。

```
public class CourseListFragment extends SherlockListFragment {

SQLiteDatabase db;
DbHelper dbHelper;

private static String courseName;
ArrayList<String> courseItems;
SimpleCursorAdapter adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
    dbHelper = new DbHelper(getActivity());
    db = dbHelper.getWritableDatabase();
    courseItems = new ArrayList<String>();
    String[] projection = new String[] {DbHelper.COURSE_NAME, DbHelper.C_ID};
    String[] from = new String[] { DbHelper.COURSE_NAME };
    Cursor cursor = db.query(DbHelper.TABLE_NAME, projection, null, null, null, null, null);
    // Fields on the UI to which we map
    int[] to = new int[] { getListView().getId() };
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new SimpleCursorAdapter(getActivity(), layout, cursor, from, to, SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    setListAdapter(adapter);
    // The problem starts here
    SwipeDismissListViewTouchListener touchListener = new SwipeDismissListViewTouchListener(
            getListView(),
            new SwipeDismissListViewTouchListener.OnDismissCallback() {
                public void onDismiss(ListView listView,
                        int[] reverseSortedPositions) {
                    for (int position : reverseSortedPositions) {
                        removeCourse(position);
                        adapter.notifyDataSetChanged();
                    }
                }
            });
    getListView().setOnTouchListener(touchListener);
    getListView().setOnScrollListener(touchListener.makeScrollListener());
    adapter.notifyDataSetChanged();
}

@Override
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
}

public void addCourse() {
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToLast();
    courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
    courseItems.add(courseName);
    c.close();
    adapter.notifyDataSetChanged();
}

public void removeCourse(int position) {
    String[] projection = { DbHelper.C_ID, DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToPosition(position);
    db.delete(DbHelper.TABLE_NAME, DbHelper.C_ID + "=" + position,
            null);
    c.close();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

谢谢！非常感激！

****编辑：使用 SimpleCursorAdapter 更新代码****

```
public class CourseListFragment extends SherlockListFragment {

SQLiteDatabase db;
DbHelper dbHelper;

private static String courseName;
ArrayList<String> courseItems;
SimpleCursorAdapter adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
    dbHelper = new DbHelper(getActivity());
    db = dbHelper.getWritableDatabase();
    courseItems = new ArrayList<String>();
    final String[] projection = new String[] {DbHelper.COURSE_NAME, DbHelper.C_ID};
    Cursor cursor = db.query(DbHelper.TABLE_NAME, projection, null, null, null, null, null);
    // Fields on the UI to which we map
    final String[] from = new String[] { DbHelper.COURSE_NAME };
    final int[] to = new int[] { R.id.internalEmpty };
    final int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new SimpleCursorAdapter(getActivity(), layout, cursor, from, to, SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    setListAdapter(adapter);
    // The problem starts here
    SwipeDismissListViewTouchListener touchListener = new SwipeDismissListViewTouchListener(
            getListView(),
            new SwipeDismissListViewTouchListener.OnDismissCallback() {
                public void onDismiss(ListView listView,
                        int[] reverseSortedPositions) {
                    for (int position : reverseSortedPositions) {
                        removeCourse(position);
                        Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null, null, null);
                        adapter = new SimpleCursorAdapter(getActivity(), layout, c, from, to, SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
                        setListAdapter(adapter);
                    }
                }
            });
    getListView().setOnTouchListener(touchListener);
    getListView().setOnScrollListener(touchListener.makeScrollListener());
    adapter.notifyDataSetChanged();
}

@Override
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
}

public void addCourse() {
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToLast();
    courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
    courseItems.add(courseName);
    c.close();
    adapter.notifyDataSetChanged();
}

public void removeCourse(int position) {
    String[] projection = { DbHelper.C_ID, DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToPosition(position);
    db.delete(DbHelper.TABLE_NAME, DbHelper.C_ID + "=" + position,
            null);
    c.close();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:04:43.750

```
int[] to = new int[] { getListView().getId() }; 
```

那条线是错误的。我无法想象幕后发生了什么。例如`int[] to`应该是

```
int[] to = new int[] {R.id.text1}; 
```

`textView`您传递给 SimpleCursorAdapter的参数中的 id `int layout`，您希望将其列`String[] from`写入。我建议你找出 textView id 内容：

```
int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1; 
```

然后像那样做一个条件语句。

* * *

**编辑**使用以下行

```
int[] to = new int[] {android.R.id.text1}; 
```

# sql - SQL 选择和分组依据

> ID：13716303
> 
> 赞同：0
> 
> 时间：2012-12-05T04:28:41.413
> 
> 标签：sql

我有一个这样的 SQL 表。

```
OrderID  ItemID  ItemPrice   ItemType
1        A       100         1
1        B       50          1
1        C       10          0
2        A       100         1
2        F       60          0
3        G       10          0 
```

所以我想像这样出去？

```
OrderID ItemPrice -Type= 1  ItemPrice -Type= 0
1             150                     10
2             10                      60
3             10 
```

您对要使用的 SQL 命令有任何想法吗？我认为它是按订单 ID 和项目类型分组的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:36:52.757

尝试这个：：

```
Select 
DISTINCT(orderId),
(Select   SUM(ITEMPRICE) from table where Itemtype=1 group by ORDERID) as ItemType1, 
(Select   SUM(ITEMPRICE) from table where Itemtype=0 group by ORDERID) as ItemType0

from table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:40:08.707

未经测试，但这应该适合你。

```
SELECT t1.OrderID, 
ItemPrice-Type1 = SUM(t1.ItemPrice), 
ItemPrice-Type2 = SUM(t2.ItemPrice)
FROM TableName t1
INNER JOIN TableName t2 on t1.OrderID = t2.OrderID and t1.ItemID = t2.ItemID
WHERE t1.ItemType = 1 AND t2.ItemType = 0
GROUP BY t1.OrderID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:40:17.993

您正在做的是枢轴转换。有几种方法可以做到这一点，但我最喜欢的方法是在 SUM 中使用 CASE：

```
SELECT
    OrderId,
    SUM(CASE WHEN ItemType = 0 THEN ItemPrice ELSE 0 END) AS Type0_Price,
    SUM(CASE WHEN ItemType = 1 THEN ItemPrice ELSE 0 END) AS Type1_Price
FROM MyTable
GROUP BY OrderId 
```

如果您有两种以上的类型，则可以很好地扩展。您所要做的就是`SUM(...)`在选择列表中添加另一行，而无需更改查询的其余部分。

我*认为*这会很好地执行，因为 SELECT 列表中的计算可以在不产生额外的行扫描或查找的情况下完成。这是自联接和子选择的缺点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T04:48:27.923

这有效吗？：

```
SELECT
    OrderID, 
    SUM(ItemPrice*ItemType) Type1,
    SUM(ItemPrice*(1-ItemType)) Type0 
FROM 
    TableName 
GROUP BY OrderID 
```

# android - Android 外部 API 覆盖范围未到来

> ID：13716309
> 
> 赞同：4
> 
> 时间：2012-12-05T04:29:05.650
> 
> 标签：android, ant, build, code-coverage, emma

从过去 1 个月开始，我一直在尝试推断我的 Android 项目的代码覆盖率报告，其中包括外部罐子。（我在 ADT20 上运行）。每当我跑步

> 蚂蚁艾玛调试安装测试

它显示了我的 Android 项目的 100% 覆盖率，但覆盖率报告不包含我的外部 Jar 的包和类。任何人都可以通过 emma ant build 或任何 Android 代码覆盖率工具帮助我获得 External Jars 中的包和类的覆盖率报告，这可以完成我的工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:31:50.697

最新的 SDK 通过将 emma 放在构建前面来使用 emma：

```
ant emma debug install
ant emma debug install test 
```

第一个是从您的项目主管运行，第二个是测试目录。这样做将生成完整的覆盖率报告。

有关更多信息，请参阅此[链接](http://developer.android.com/tools/building/building-cmdline.html)

ADT r20-preview 通过允许访问测试项目及其库项目的完整类路径来解决此问题：

[http://tools.android.com/download/adt-20-preview](http://tools.android.com/download/adt-20-preview)

这将为您提供有关库项目的代码覆盖率报告，但您必须对 build.xml 的测试目标进行一些修改以附加源文件。

有关如何暂时为您的库项目合并 emma 测试覆盖率的更多信息，请参阅[此将 Android 库项目源代码附加到 Emma 报告（ant，emma）。](http://code.google.com/p/android/issues/detail?id=32421)

示例-build.xml：

```
<emma>
                <!-- Grantland: Attach Android library project sources to the emma report -->
                <report sourcepath="${tested.project.absolute.dir}/${source.dir};${tested.android.library.source.dir}"
                                  verbosity="${verbosity}">
                <!-- <report sourcepath="${tested.project.absolute.dir}/${source.dir}"
                                  verbosity="${verbosity}"> -->
                    <!-- TODO: report.dir or something like should be introduced if necessary -->
                    <infileset dir=".">
                        <include name="coverage.ec" />
                        <include name="coverage.em" />
                    </infileset>
                    <!-- TODO: reports in other, indicated by user formats -->
                    <html outfile="coverage.html" />
               </report>
            </emma> 
```

蚂蚁属性：

这可以是分号分隔的目录列表

```
tested.android.library.source.dir=../library/src;etc 
```

# jquery - 动态数据（）的jQuery事件冒泡问题

> ID：13716310
> 
> 赞同：0
> 
> 时间：2012-12-05T04:29:14.787
> 
> 标签：jquery

我有一点 jQuery，但把它放在这里是一个简化的版本，以更好地识别任何可能的故障。我在代码中提供了一些注释，以更好地突出我的尝试以及问题。请在代码中找到我的评论。

我的问题是“清除”按钮，清除以前点击的任何输入，而它应该只清除当前活动的输入。闻起来像事件冒泡问题，但我现在无法识别它，因此非常感谢您的帮助。

工作流程是这样的：

1.  我在 .container 中单击 input.trigger ( `input[name="a"]`)

2.  div#popup 弹出/启动

3.  我单击#popup 内的“清除”按钮，它确实清除了`input[name="a"]`. 我做了一个“还原”来放回值，到目前为止很好，如果有一些默认值，它会还原（这部分不包含在代码中，因为它不是主要问题，如果解决了以下问题）。关闭它。因此输入“a”被清除，但后来通过存储的数据默认值恢复为默认值。

4.  目前很好。

5.  我单击另一个 input.trigger ( `input[name="b"]`)，#popup 启动，更多操作.. 好，但是....

6.  我单击“清除”按钮，它会清除输入“a”和“b”，而预计只会清除当前`input.trigger[name="b"]`的输入（而不是以前的输入，“a”）。

[这里](https://stackoverflow.com/questions/9153501/how-do-you-stop-children-from-propagating-an-event-triggered-by-a-live-delegate)的解决方案还没有帮助。

```
$('.container').on('focus', 'input.trigger', function(e) {
   e.preventDefault();
   // First fix attempt, no use
   // https://stackoverflow.com/questions/9153501/how-do-you-stop-children-from-propagating-an-event-triggered-by-a-live-delegate
   // Trying to solve problem with event bubbling, but no use
   if (e.target != this){ 
     return true; 
   }
   var input = $(this);
   // somewhere added a class focused on input focused, please ignore.
   // we add blur here to make any button or input inside popup clickable.
   $('input:not(.focused)').blur();

  // Added dynamic data("popup") based on input name (a, b, c, d)
  $("#popup").data("popup", this.name).css({
    left: "20px",
    top: input.offset().top + 24 + "px"
  })
  // Second fix attempt, no use
  .stop(true, true)
  .show('slow', function () {
    var currentPopup = $(this),
      popupName = currentPopup.data("popup"),
      // Trying to get input/trigger name from data "popup" per clicked input name.
      // I tried putting this after `var input = $(this);` above but put it here later
      // thinking it should solve the problem, but alas not.
      theinput = $('input[name="' + popupName + '"]'),
      // Used for other dynamic interaction with some classes (.a_popup, .b_popup, etc).
      popupid = theinput.data('popupid');

    currentPopup.on('click', '.clear', function(e) {
      // Third fix attempt, no use
      e.stopPropagation();
      // The problem is here:
      // The button clears out any previous (opened) input.trigger,
      // while it should only clears the input with name == current popupName

      // Why this also bubbles to previously opened input.trigger "popupid"
      console.log(popupid); 

      theinput.val("");
    });
    // More buttons here: Revert and Close. But once the "Clear" button issue is solved, this is no issue. So excluded.
  });
 })
.on('blur', 'input.trigger', function (e) {
  e.preventDefault(); // no use
  var hidden = $("#popup"),
    popupName = this.name;
  if (hidden.data("popup") === popupName) {
    hidden.hide().removeData("popup");
  }
}); 
```

**HTML：**

```
<body>
<div id="page-wrapper">
  <div class="container">
    <form>
      <!-- This input value is dynamically changed via other function -->
      <input class="trigger" name="a" value="one" data-popupid=".a_popup" data-default="a_value">
      <input class="trigger" name="b" value="" data-popupid=".b_popup" data-default="">
      <input class="trigger" name="c" value="three" data-popupid=".c_popup" data-default="c_value">
      <input class="trigger" name="d" value="four" data-popupid=".d_popup" data-default="d_value">
    <form>

    <!-- Ignore below divs, but here to have a general idea with above data-popid 
      This is not directly addressed in the code above -->
    <div class="a_popup">Content</div>
    <div class="b_popup">Content</div>
    <div class="c_popup">Content</div>
    <div class="d_popup">Content</div>
  </div>
</div><!-- page wrapper -->

<!-- This popup has data("popup") namee by above inputs (a, b, c, d) assigned dynamically -->
<div id="popup">
  <!-- Sometext and additional inputs -->
  <button class="revert">Revert</button>
  <button class="clear">Clear</button>
  <button class="close">Close</button>
</div> 
</body> 
```

**CSS：**

```
#popup {
  background: #fff;
  display: none;
  height: 200px;
  width: 200px;
  z-index: 99999;
  position: absolute;
} 
```

我希望我能说清楚，但如果不是，我会更新上面简化代码中遗漏的任何内容。感谢您发现实际问题的任何提示。

更新： `$('.container').off('input.trigger');`附加到关闭按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:04:45.740

我发现 JavaScript 太复杂且难以理解。所以让我们简单地说：

```
$(document).ready(function() {
    $('.container').on('focus', 'input.trigger', function(e) {
        var input = $(this);
        var position = input.position();

        $("#popup")
            .data('target', $(e.target))
            .css('top', position.top + 24)
            .css('left', position.left + 20)
            .show();
     });

    $('.clear').on('click', function(e) {
        e.preventDefault();
        var input = $(e.target).closest('#popup').data('target');
        input.val('');
        $(e.target).closest('#popup').hide();
    });
    $('.revert').on('click', function(e) {
        e.preventDefault();
        $(e.target).closest('#popup').hide();
    });
    $('.close').on('click', function(e) {
        e.preventDefault();
        $(e.target).closest('#popup').hide();
    });
});​ 
```

这是这种更简单方法的一个工作示例：http: [//jsfiddle.net/UZ4QM/](http://jsfiddle.net/UZ4QM/)

# 添加回金光闪闪

现在我们可以添加 bling 了：

```
$(document).ready(function() {
    $('.container')
        .on('focus', 'input.trigger', function(e) {
            var input = $(this);
            var position = input.position();

            $("#popup")
                .data('target', $(e.target))
                .css({'top':  position.top + 24,
                      'left': position.left + 20 })
                .show('slow');
         })
        .on('blur', 'input.trigger', function(e) {
            $("#popup").hide();
        });

    $('.clear').on('click', function(e) {
        e.preventDefault();
        var input = $(e.target).closest('#popup').data('target');
        input.val('');
        $(e.target).closest('#popup').hide();
    });
    $('.revert').on('click', function(e) {
        e.preventDefault();
        $(e.target).closest('#popup').hide();
    });
    $('.close').on('click', function(e) {
        e.preventDefault();
        $(e.target).closest('#popup').hide();
    });
});​ 
```

这是一个更接近原始版本的工作示例：http: [//jsfiddle.net/C9JM5/](http://jsfiddle.net/C9JM5/)

# mysql - MySQL函数计算两个纬度和经度之间的距离

> ID：13716313
> 
> 赞同：5
> 
> 时间：2012-12-05T04:29:18.677
> 
> 标签：mysql, geolocation

如果您的数据库中存储了纬度和经度，并且需要计算两个坐标之间的距离。如何使用 MySQL 函数计算它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T04:45:21.173

找了好久，放弃了，自己写了。我能够使一些其他代码适应以下 MySQL 函数。

```
DELIMITER $$
/*
Takes two latitudes and longitudes in degrees. You could comment out the conversion if you want to pass as radians.
Calculate the distance in miles, change the radius to the earth's radius in km to get km.
*/

DROP FUNCTION IF EXISTS GETDISTANCE$$
CREATE FUNCTION GETDISTANCE 
  (deg_lat1 FLOAT, deg_lng1 FLOAT, deg_lat2 FLOAT, deg_lng2 FLOAT) 
  RETURNS FLOAT 
  DETERMINISTIC 
BEGIN 
  DECLARE distance FLOAT;
  DECLARE delta_lat FLOAT; 
  DECLARE delta_lng FLOAT; 
  DECLARE lat1 FLOAT; 
  DECLARE lat2 FLOAT;
  DECLARE a FLOAT;

  SET distance = 0;

  /*Convert degrees to radians and get the variables I need.*/
  SET delta_lat = radians(deg_lat2 - deg_lat1); 
  SET delta_lng = radians(deg_lng2 - deg_lng1); 
  SET lat1 = radians(deg_lat1); 
  SET lat2 = radians(deg_lat2); 

  /*Formula found here: http://www.movable-type.co.uk/scripts/latlong.html*/
  SET a = sin(delta_lat/2.0) * sin(delta_lat/2.0) + sin(delta_lng/2.0) * sin(delta_lng/2.0) * cos(lat1) * cos(lat2); 
  SET distance = 3956.6 * 2 * atan2(sqrt(a),  sqrt(1-a)); 

  RETURN distance;
END$$
DELIMITER ; 
```

# java - Java - 获取 JSON 对象数组？

> ID：13716314
> 
> 赞同：1
> 
> 时间：2012-12-05T04:29:29.090
> 
> 标签：java, json

我正在尝试使用 Java获取[http://status.mojang.com/check中列出的信息。](http://status.mojang.com/check)我知道它是 JSON，所以我尝试使用互联网上的各种示例获取该信息，但我似乎无法弄清楚出了什么问题。

这是我的代码： http: [//pastebin.com/USYy93kZ](http://pastebin.com/USYy93kZ)

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:32:25.507

**-**尝试在您的课程中使用以下方法来解析 JSON。

```
private static String readAll(BufferedReader rd) throws IOException {
    StringBuilder sb = new StringBuilder();

    String cp = new String();

    while((cp=rd.readLine())!=null){

        sb.append(cp);
    }
    return sb.toString();
  }

public static JSONArray readJsonFromUrl(String url) throws IOException, JSONException {
    InputStream is = new URL(url).openStream();
    try {
      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));

      String jsonText = readAll(rd);

      JSONArray arr = new JSONArray(jsonText);

      //System.out.println(arr.toString(2));

      return arr;
    } finally {
      is.close();
    }
  }

 public JSONArray go() throws IOException, JSONException {
        JSONArray json = readJsonFromUrl("http://www.comparestructuredproducts.com/AppData.aspx");

        return json;

      } 
```

# windows - 并排组装，Windows 7，Visual C++

> ID：13716315
> 
> 赞同：2
> 
> 时间：2012-12-05T04:29:30.527
> 
> 标签：windows, dll, configuration, side-by-side

大家好，所以我在visual c++ 2008 中做了一个小程序，以便其他人可以使用。

我将位于项目调试文件夹中的 exe 发送给我的朋友。

当他们尝试点击它时，这就是他们得到的：

应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。

有谁知道我该如何解决这个问题？

也许是 Microsoft Visual Studios 2008/2010 中的构建/编译选项？

还是他们必须下载一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:41:55.590

第一步是进行“发布”构建。当您进行调试构建时，您将链接到 CRT（C 运行时）的调试版本。Windows 肯定不附带调试 CRT（除非你的朋友也安装了 VS2008），并且不允许重新分发调试 CRT 版本。

简单地进行发布构建可能就足够了。VS 2008 已经存在了很长时间，以至于您朋友的计算机可能已经有了 CRT 的发布版本。

如果这不起作用，请将您的朋友指向[http://www.microsoft.com/en-us/download/details.aspx?id=29](http://www.microsoft.com/en-us/download/details.aspx?id=29)，以便他们可以下载并安装他们需要的文件。

如果这还不够，您可能需要跟踪您构建的 VS 2008 的哪个服务包，因为这可能会影响他们必须下载和安装的 CRT 版本。

无论如何，祝你好运。希望这可以帮助。

# php - 使用 Twitter 登录以获取 codeigniter

> ID：13716317
> 
> 赞同：2
> 
> 时间：2012-12-05T04:29:39.573
> 
> 标签：php, codeigniter, twitter

我正在 Codeigniter 上搜索一些文档或示例并使用 Twitter 登录。我在 codeigniter 中找到了一些 Facebook Connect 教程（看起来很简单），但在 Twitter 上却不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:35:55.747

嗨试试这个 oauth 库将帮助你解决你的问题[https://github.com/philsturgeon/codeigniter-oauth2](https://github.com/philsturgeon/codeigniter-oauth2)

# python - 使用 Python/Heroku 对上传的文件进行截图

> ID：13716318
> 
> 赞同：0
> 
> 时间：2012-12-05T04:29:44.567
> 
> 标签：python, django, heroku

网站上有用户上传/下载的设计文件。对于每个上传的文件，我想显示文件的屏幕截图，以便人们在下载之前可以看到图像。

它们是非常深奥的文件，尽管需要在特定的设计工具中打开。（我什至没有在我的本地机器上运行它们的软件）。

我的想法是，我可以运行安装了这些程序的虚拟机，以编程方式打开文件，然后对打开的文件进行屏幕截图并保存缩略图。但是我想在用户上传设计文件时这样做。

但有人告诉我 PIL 可以做到这一点。但我进行了调查，似乎无法找出任何关于如何解决这个问题的文档。

有没有人做过这样的事情？最好的方法是什么？

# python - 我无法弄清楚这个时间戳的含义

> ID：13716319
> 
> 赞同：1
> 
> 时间：2012-12-05T04:29:50.837
> 
> 标签：python, time, timestamp, unix-timestamp

我一直在试图弄清楚什么样的时间戳采用这种形式：

*2012-07-02T21:27:41.229431*

这似乎是某种 unix 时间，但我无法弄清楚小数点后的 6 位数字代表什么。

我假设 21 是小时，27 是分钟，41 是秒。显然下一个将是毫秒，但似乎 6 位数的精度太高了。有人可以帮忙吗？

顺便说一句，这是用 Python 生成的，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:30:54.740

小数点后的数字是几分之一秒。

六位数字代表微秒，即 10^-6 秒，因此需要 6 位数字来表示。

请参阅此处的表格：[http](http://en.wikipedia.org/wiki/Metric_prefix) ://en.wikipedia.org/wiki/Metric_prefix以获取度量前缀的完整列表及其对应的小数点后位数。

时间戳的精度取决于用于测量它的时钟的精度。因为周期是频率的倒数，所以频率为 1 kHz 的时钟能够计算毫秒，而 1 MHz 的时钟则需要微秒。纳秒需要 1 GHz 时钟等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:33:36.943

秒只是一个普通的十进制数，因此“41.229431”表示分钟开始后的 41.229431 秒。由于小数点后有六位数字，这意味着在这种情况下时间戳的精度扩展到微秒，但也可以轻松地减少或更多位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:30:52.383

ISO-8601

小数点后 6 位为微秒。

# ie-developer-tools - Javascript 的 IE 9 兼容性：ChildNode、SetAttribute

> ID：13716322
> 
> 赞同：2
> 
> 时间：2012-12-05T04:30:03.287
> 
> 标签：ie-developer-tools

许多 Javascripts 函数在 IE 9 中不起作用。

具体来说，我们动态构建了一些 HTML 内容。现在，当我们尝试使用 childNode 元素访问 HTML 表的内容时，对象并没有完全检索到其中。

但是，当我们在 IE 9 兼容模式下运行它时，我们能够得到它。

代码示例：

```
 var _object = document.getElementById(strTableId).childNodes[0]
       for (var iCount = 0; iCount < _object.childNodes.length; iCount++) {
            if (_object.childNodes[iCount]) {
                _object.childNodes[iCount].style.backgroundColor = 'white';
                _object.childNodes[iCount].style.color = 'black'
            }
        } 
```

现在，当我们调试代码时，我们可以看到变量中存在的对象，但样式属性和其他属性无法访问。因此，backgroundcolor 行会引发 javascript exeption。

请帮忙！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T08:56:30.477

IE 9 不支持 ChildNodes[0]。我们可以使用 children[0] 而不是 ChildNodes[0]

莫汉

# java - Liferay 6 的工作流开发工具

> ID：13716325
> 
> 赞同：0
> 
> 时间：2012-12-05T04:30:23.270
> 
> 标签：java, workflow, liferay

我正在使用eclipse indigo 来创建liferay portlet。现在我想创建一个自定义工作流。我怎样才能获得相同的插件或IDE？如何使用 Kaleo 创建自定义工作流程。

帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:51:44.903

据我所知，Liferay 仅在 Liferay Developer Studio 中提供 Kaleo 插件，您需要企业许可证。

这是与 Liferay 一起进入 Enterprise 的好处之一。可能还有其他插件，但我不知道。

# javascript - JS - 从 FireFox 选择子节点的问题

> ID：13716326
> 
> 赞同：0
> 
> 时间：2012-12-05T04:30:28.393
> 
> 标签：javascript, html

我目前正在尝试选择`childNode`一个元素。这就是我试图这样做的方式：

`var postBody_elem = elem.parentNode.parentNode.childNodes['post'].childNodes['postBody'];`

我也试过：

`elem.parentNode.parentNode.childNodes[0].childNodes[1];`

我知道这是我测试过的问题`childNodes`，而不是问题。`parentNodes`

这是我正在做的简化结构：

```
<section id = 'postWrapper'>                          //This is the Second Parent.
  <article id = 'post'>                               //This should be the First Child.
    <section id = 'postInfo'>
      <section id = 'postTitle'></section>
      <section id = 'poster'></section>
      <section id = 'postDate'></section>
    </section>
    <section id = 'postBody'>                       //This should be the Second Child.
    </section>
  </article>
  <section id = 'postBar'>                          //This is the First Parent.
    <img id = 'portrait'>
    <section id = 'editButton'>Edit</section>       //This is the var elem.
    <section id = 'deleteButton'>Delete</section>
  </section>
</section> 
```

我必须`'postBody'`通过浏览父节点和子节点来引用 的原因是因为这种格式被迭代了很多次。

--这让我想到了我的问题，上面的代码行在谷歌浏览器中有效，但在 FireFox 中无效，我尝试了很多变体，但控制台给了我未定义的错误。我已经检查过元素是否正确声明，这只是我认为浏览器处理它的方式之间的区别。

如果有人有答案，我希望它是关于如何引用我展示的元素，而不是关于我如何不正确地用于`id`多个元素的讲座，因为在这种情况下这不是问题（据我所知，因为它适用于 Chrome）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:48:48.680

第一种方法在 Firefox 中不起作用，因为它似乎是非标准的，第二种方法不起作用，因为您没有意识到 childNodes 也包含文本节点。要获得您想要的元素，请尝试

```
elem.parentNode.parentNode.childNodes['1'].childNodes['3'] 
```

[http://jsfiddle.net/mowglisanu/UqZVn/](http://jsfiddle.net/mowglisanu/UqZVn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:45:36.500

后代的一些替代方案（这些在 Firefox 中工作，我不知道其他浏览器的支持）：

1.  `elem.children`不包括文本节点，所以`elem.parentNode.parentNode.children[0].children[1]`会起作用

2.  您可以使用`elem.parentNode.parentNode.getElementsByTagName('section')[4]`(0=postInfo, 1=postTitle, 2=poster, 3=postDate)

3.  `elem.parentNode.parentNode.querySelector('article > section + section')`例如，您可以使用

4.  我认为`elem.parentNode.previousElementSibling.lastElementChild`也有效

# c# - 在 wpf 的另一个表单中显示表单？

> ID：13716328
> 
> 赞同：1
> 
> 时间：2012-12-05T04:30:32.260
> 
> 标签：c#, wpf

我有一个包含所有控件的主窗体，我必须为帮助窗口创建一个新窗体，以指导您使用主窗体。我确实检查了 mdi 容器，但在另一个表单中看到 2 个表单看起来有点奇怪。有没有其他方法可以将我的主表单嵌入到另一个表单中？喜欢对接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:21:51.990

```
<DockPanel>
    <Frame Name="frame" NavigationUIVisibility="Visible" Source="SomePage.xaml" />
</DockPanel> 
```

# c++ - 为什么 C++ 虚拟调用并不比非虚拟调用慢多少？

> ID：13716330
> 
> 赞同：5
> 
> 时间：2012-12-05T04:30:47.640
> 
> 标签：c++, performance

在我看来，对于 C++ 虚拟调用，它需要：

1.  从符号表中获取对象的类型
2.  从类型表中获取 v-table
3.  使用 v-table 中的函数签名搜索函数
4.  调用函数。

而对于非虚拟（例如在 C 中）调用，只需要 #4。

我认为＃3应该是最耗时的。鉴于 C++ 中实时覆盖的性质，我看不到上述步骤的编译时间优化潜力。因此，对于具有长函数签名的复杂类继承，C++ 虚拟调用应该比非虚拟调用慢得多。

但是所有的说法都是相反的，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T04:41:30.533

> 1.  从符号表中获取对象的类型
> 2.  从类型表中获取 v-table
> 3.  使用 v-table 中的函数签名搜索函数
> 4.  调用函数。

这是对基于 v-table 的调度如何工作的理解不足。这要简单得多：

1.  从对象指针获取 v-table。为所讨论的函数选择正确的 v-table（如果使用多个基类）。
2.  向这个 v-table 指针添加一个特定的偏移量，由编译时确定，从而获取一个特定的函数指针。
3.  调用该函数指针。

每个对象都有一个 v-table 指针，它指向该对象原始类型的 v-table。所以没有必要从“符号表”中获取类型。不需要搜索 v 表。根据编译时提供的函数签名，编译时可准确确定需要访问 v-table 中的哪个指针。这完全是关于编译器如何索引类中的每个虚函数。它可以确定每个虚函数的特定顺序，因此当编译器去调用它时，它可以确定调用哪个函数。

所以总体来说还是挺快的。

处理虚拟基类时稍微复杂一些，但大体思路还是一样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T04:34:31.077

与普通函数调用相比，虚函数调用的开销是两个额外的`fetch`操作（一个是获取 v 指针的值，第二个是获取方法的地址）。
在大多数情况下，这种开销不足以在性能分析中显示出来。

此外，在某些情况下，如果`virtual`可以在编译时确定要调用的函数，则智能编译器会这样做，而不是在运行时进行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T04:39:51.847

1 & 2) 它不需要从任何“符号表”中检索对象的类型。v 表通常由对象中的隐藏字段指向。所以检索 v-table 基本上是一个指针间接。

3) v-table 未被“搜索”。每个虚函数在 v 表中都有一个固定的索引/偏移量，在编译时确定。所以这基本上是从指针的偏移量中提取的。

因此，虽然它比直接的 C 风格调用要慢，但并不像您建议的那样费力。它类似于 C 中的类似内容：

```
struct MyObject_vtable {
    int (*foo)();
    void (*bar)(const char *arg);
};

struct MyObject {
    int m_instanceVariable1;
    int m_instanceVariable2;
    struct MyObject_vtable *__vtable;
};

struct MyObject * obj = /* ... construct a MyObject instance */;

// int result = obj->foo();
int result = (*(obj->__vtable.foo))();

// obj->bar("Hello");
(*(obj->__vtable.bar))("Hello"); 
```

另外，虽然这可能有点超出问题的范围，但值得注意的是，编译器通常可以在编译时确定要调用的函数，在这种情况下，它可以直接调用该函数，而无需经过虚拟呼叫机制。例如：

```
MyObject obj1;
int result1 = obj1.foo();

MyObject *obj2 = getAMyObject();
int result2 = obj2->foo(); 
```

在这种情况下，在编译时就知道`foo()`第一次调用要调用哪个，因此可以直接调用它。对于第二次调用，可能会`getAMyObject()`返回派生类的某个对象，该类的派生对象`MyObject`已被覆盖`foo()`，因此必须使用虚拟调用机制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T08:19:22.337

实际上，这是一个瓶颈问题...

* * *

...但让我们首先用图表（64 位）修改您的假设。虽然对象模型是特定于实现的，但在 Itanium ABI（gcc、clang、icc、...）中使用的虚拟表的想法在 C++ 中相对普遍。

```
class Base { public: virtual void foo(); int i; };

+-------+---+---+
| v-ptr | i |pad|
+-------+---+---+

class Derived: public Base { public: virtual void foo(); int j; };

+-------+---+---+
| v-ptr | i | j |
+-------+---+---+ 
```

在单个（非虚拟）基类的情况下，`v-ptr`是对象的第一个成员。因此，获取 v-ptr 很容易。从那时起，偏移量是已知的（在编译时），因此这只是一些指针算术，然后是通过指针取消引用的函数调用。

多亏了 LLVM，让我们来看看它：

```
%class.Base = type { i32 (...)**, i32 }
                     ~~~~~~~~~~^  ^~~
                     v-ptr          i

%class.Derived = type { [12 x i8], i32 }
                        ~~~~~~~~^  ^~~
                        Base         j

define void @_Z3fooR4Base(%class.Base* %b) uwtable {
  %1 = bitcast %class.Base* %b to void (%class.Base*)***
  %2 = load void (%class.Base*)*** %1, align 8
  %3 = load void (%class.Base*)** %2, align 8
  tail call void %3(%class.Base* %b)
  ret void
} 
```

*   `%1`: 指向 v-table 的指针（通过 bitcast 获得，对 CPU 来说是透明的）
*   `%2`: v-table 本身
*   `%3`: 指向`Derived::foo`（表的第一个元素）的指针

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T04:36:04.943

它基本上是两次读取（一次从对象实例获取 vtable ptr，一次从 vtable 获取函数指针）和一个函数调用。内存通常很热并且停留在缓存中，并且由于没有任何分支，CPU 可以非常好地流水线化以隐藏大量开销。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T05:07:10.303

也许 C 中的动态多态性示例可能有助于说明这些步骤。假设您在 C++ 中有这些类：

```
struct Base {
  int someValue;
  virtual void bar();
  virtual int foo();
  void foobar();
};

struct Derived : Base {
  double someOtherValue;
  virtual void bar();
}; 
```

好吧，在 C 中，您可以通过这种方式实现相同的层次结构：

```
struct Base {
  void** vtable;
  int someValue;
};

void Base_foobar(Base* p);
void Base_bar_impl(Base* p);
int Base_foo_impl(Base* p);

void* Base_vtable[] = {(void*)&Base_bar_impl, (void*)&Base_foo_impl};

void Base_construct(Base* p) {
  p->vtable = Base_vtable;
  p->someValue = 0;
};

void Base_bar(Base* p) {
  (void(*)())(p->vtable[0])();  // this is the virtual dispatch code for "bar".
};

int Base_foo(Base* p) {
  return (int(*)())(p->vtable[1])();  // this is the virtual dispatch code for "foo".
};

struct Derived {
  Base base;
  double someOtherValue;
};

void Derived_bar_impl(Base* p);

void* Derived_vtable[] = {(void*)&Derived_bar_impl, (void*)&Base_foo_impl};

void Derived_construct(Derived* p) {
  Base_construct(&(p->base));
  p->base.vtable = Derived_vtable;  // setup the new vtable as part of derived-class constructor.
  p->someOtherValue = 0.0;
}; 
```

显然，C++ 中的语法要简单得多（呃！），但正如您所见，动态调度并不复杂，只需在函数指针的（静态）表中简单查找，其中的 vtable 指针是设置在对象的构造。另外，上面没有什么难于让编译器自动完成（即编译器可以很容易地获取上面的C++代码并在下面生成相应的C代码）。在多重继承的情况下，同样简单，每个基类都有自己的 vtable 指针，派生类必须为其每个基类设置这些指针，就是这样，您现在需要的唯一关键点在向上或向下转换层次结构时应用指针偏移量（因此使用 C++ 风格的转换运算符很重要！）。

总的来说，当严肃的人讨论虚函数的开销时，他们并不是在谈论进行函数调用所需的“复杂”步骤（因为这相当微不足道，有时甚至会被优化掉）。他们很可能在谈论与缓存相关的问题，例如抛弃预取器（通过难以预测的分派调用）并阻止编译器将函数打包到最终可执行文件中需要它们的位置附近（甚至内联）（或 DLL）。到目前为止，这些问题是虚函数的主要开销，而且这些问题并不那么重要，并且一些编译器足够聪明，可以很好地缓解这些问题。

# php - PHP 文件存在错误 - 检查外部？

> ID：13716335
> 
> 赞同：1
> 
> 时间：2012-12-05T04:30:58.747
> 
> 标签：php, file

我目前使用安装了 WAMP 服务器的 Windows 7。我试图做一个简单的PHP“文件存在”命令，但由于某种原因，它的工作方式有很大不同......这是我的代码：

```
if(file_exists('\prop\sys\config.txt')) {
echo 'exist';
} else {
echo 'dont exist';
} 
```

听起来很简单，即使该文件实际存在，PHP 也会以不存在的形式返回。起初这让我感到困惑，但是当我尝试让 PHP 检查我的实际计算机上的文件时，例如：

```
if(file_exists('C:\Users\PeopleUser\Desktop\f.txt')) {
echo 'exist';
} else {
echo 'dont exist';
} 
```

令人惊讶的是，它回来了！所以这意味着 WAMP 正在检查它应该在的文件夹之外。我尝试启用“安全模式”并重新启动 WAMP，但它仍然无法正常工作，我还禁用了“暴露 PHP”以尝试停止它。它不工作，PHP 将自由检查我的电脑。

我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:07:48.900

PHP 是一个服务器端进程，可以访问主机的文件系统。您指定的任何路径都是文件系统路径。

你最好构建一个相对于 PHP 文件的路径。例如，假设包含您的代码的文件位于文档根目录（包含该文件夹的同一文件`prop`夹）

```
$path = realpath(__DIR__ . '/prop/sys/config.txt');

if (file_exists($path)) {
    // and so on 
```

# objective-c - 当容器是 UIViewController 时，视图包含在容器中是什么意思？

> ID：13716336
> 
> 赞同：3
> 
> 时间：2012-12-05T04:31:07.570
> 
> 标签：objective-c, xcode4.5

有 2 类满足 UIAppearanceContainer [http://developer.apple.com/library/ios/#recipes/UIAppearanceContainer_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIAppearanceContainer](http://developer.apple.com/library/ios/#recipes/UIAppearanceContainer_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIAppearanceContainer)

UIView UIViewController

假设我们这样做：

```
[UIButton appearanceWhenContainedIn:@[[UYLRotatingViewController class]]]; 
```

iOS如何知道UIButton是否在UYLRotatingViewController中？

是不是说在UYLRotatingViewController的视图里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T03:15:19.237

当给`UIButton`定的超级视图（`[myView addSubview:button]`）时，UIKit 最有可能调用`[[button superview] class]`，并将此类与它可能具有的任何有条件的外观定制进行比较。换句话说，如果 UIKit 发现`[[button superview] class]`等于`[UYLRotatingViewController class]`，它将应用您传递给此代理对象的外观自定义。

# java - 堆排序工作 99%

> ID：13716337
> 
> 赞同：1
> 
> 时间：2012-12-05T04:31:09.887
> 
> 标签：java, sorting, heapsort

想知道我是否可以在堆排序实现方面获得一些快速帮助。我让它工作和排序很好，但在输出中它总是排序除了第一个数字。这可能只是某处的检查，但我已经检查了我的代码并尝试更改值，但没有产生我需要的结果。对我哪里出错有什么建议吗？这是我的源代码：

```
code removed, problem was solved! 
```

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:46:21.260

```
private static void movedown(double [] a, int k, int c) {
    while (2*k <= c-1) {
        int j = 2*k+1;
        if (j <= c-1 && less(a[j], a[j+1])) j++;
        if (!less(a[k], a[j])) break;
        exch(a, k, j);
        k = j;
    }
}

public static void heapsort(double [] a, int count) {
    for (int k = count/2; k >= 0; k--)
        movedown(a, k, count);
    while (count >= 1) {
        exch(a, 0, count--);
        movedown(a, 0, count);
    }
} 
```

我已经修复了您的错误并在我的机器上对其进行了测试。它应该工作。这两种方法只有几个小改动。

总结一下你没有做对的事情：

1.  在`heapsort`方法中，`count`您传入的是从零开始的索引。但是，当您构建堆时，您只循环到`k = 1`，即再进行一次迭代。

2.  在`movedown`方法中，您应该知道左子索引是`2*k+1`，而右子索引是`2*k+2`。

您没有与您的索引选择保持一致（即，基于 0 与基于 1）导致了我猜的错误。

# rest - 如何将日历参数作为输入传递给休息服务？

> ID：13716338
> 
> 赞同：2
> 
> 时间：2012-12-05T04:31:19.670
> 
> 标签：rest, date, jax-rs, jboss7.x, resteasy

这是我正在尝试做的事情：

```
@POST
@Path("/MyPath")
@Produces("text/xml")
@RolesAllowed({"user"})
public Output myMethod (@QueryParam("itemId") long ItemId, 
                                    @QueryParam("plannedstartdate") Calendar plannedStartDate, 
                                    @QueryParam("plannedreturndate") Calendar plannedReturnDate) 
```

我正在使用 JBoss AS7。据我了解，resteasy 已集成到 JBoss AS7 中。我能够运行简单的休息服务。

我发现的关于通过日期的唯一文档是在链接： [http ://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/StringConverter.html#StringParamUnmarshaller](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/StringConverter.html#StringParamUnmarshaller)

由于说明不清楚，我无法遵循此问题并解决此问题。当我尝试创建示例中给出的注释 DateFormat 时，它无法识别 StringParamUnmarshaller。我不知道从哪里得到它。如果resteasy已经集成到JBoss AS7中，这不应该被识别吗？

我的 pom.xml 具有以下依赖项：

```
 <!-- Import the JAX-RS API, we use provided scope as the API is included 
     in JBoss AS 7 -->
  <dependency>
     <groupId>org.jboss.spec.javax.ws.rs</groupId>
     <artifactId>jboss-jaxrs-api_1.1_spec</artifactId>
     <scope>provided</scope>
  </dependency> 
```

对该方法的调用失败，因为没有发生字符串到日历的转换。我不想传递字符串而不是日历，因为还有其他客户端直接进行 java 调用。谁能帮助我如何将日期传递给休息电话？

谢谢维尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:41:24.420

此问题已解决。请参阅以下代码。

创建一个注释类`CalendarFormat.java`：

```
@Retention(RUNTIME)
@StringParameterUnmarshallerBinder(CalendarFormatter.class)
public @interface CalendarFormat {
    String value();
} 
```

添加一个类`CalendarFormatter.java`：

```
public class CalendarFormatter implements StringParameterUnmarshaller<Calendar> {
    private SimpleDateFormat formatter;

    public void setAnnotations(Annotation[] annotations) {
        CalendarFormat format = FindAnnotation.findAnnotation(annotations, CalendarFormat.class);
        formatter = new SimpleDateFormat(format.value());
    }

    public Calendar fromString(String str) {
        try {
            Calendar cal = Calendar.getInstance();
            cal.setTime(formatter.parse(str));
            return cal;
        } catch (ParseException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

添加到 POM

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxrs</artifactId>
    <version>2.3.3.Final</version>
    <scope>provided</scope>
</dependency>

<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-multipart-provider</artifactId>
    <version>2.3.4.Final</version>
    <exclusions>
        <exclusion>
            <artifactId>resteasy-jaxrs</artifactId>
            <groupId>org.jboss.resteasy</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

更改方法签名以使用注解

```
@POST
@Path("/MyPath")
@Produces("text/xml")
@RolesAllowed({"user"})
public Output myMethod(@QueryParam("itemId") long ItemId,            
        @QueryParam("plannedstartdate") @CalendarFormat("MM-dd-yyyy") Calendar plannedStartDate, 
        @QueryParam("plannedreturndate") @CalendarFormat("MM-dd-yyyy") Calendar plannedReturnDate) 
```

就是这样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T14:50:57.250

不能[`java.util.Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)用作 的参数`@QueryParam`，因为它没有接受的单参数构造函数`String`。您唯一的选择是引入一个新的 class `QueryCalendar`，它将具有单参数构造函数并将返回`Calendar`（或继承它）。

有关谁可以成为参数的更多信息：http: [//docs.oracle.com/javaee/6/api/javax/ws/rs/QueryParam.html](http://docs.oracle.com/javaee/6/api/javax/ws/rs/QueryParam.html)

# ruby-on-rails - 获取帐户帖子用户正在关注 w/acts_as_follower

> ID：13716341
> 
> 赞同：1
> 
> 时间：2012-12-05T04:31:38.500
> 
> 标签：ruby-on-rails, ruby

我正在使用acts_as_follower 来允许用户在我的应用程序中互相关注。我想知道如何检索他们关注的用户的帖子？我目前已经构建了一个解决方案，但它没有按照帖子的创建顺序显示帖子，并且无法使用 will_paginate 进行分页。建议？我下面的代码是我目前在页面控制器中如何在主页上呈现提要。

```
@posts = current_user.following_users.includes(:posts).collect{|u| u.posts.paginate(:page => params[:page]).order("created_at DESC")}.flatten 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:20:05.663

不是 sql 专家，但试试这个：

```
following_ids = current_user.following_users.map(&:id)
Post.where(user_id: following_ids).order("created_at DESC").paginate(page: params[:page]) 
```

2个查询。你当然可以用一个和连接来做，但我喜欢简单

# c# - 编写一个报告进度的方法

> ID：13716345
> 
> 赞同：7
> 
> 时间：2012-12-05T04:31:49.933
> 
> 标签：c#, multithreading, progress-bar, progress

我正在编写一个在库中执行特定操作的类。但是操作很繁琐，我希望能够找出该类内部方法的进度，以便在 WinForms 应用程序中使用它来报告进度。

我计划在我的 WinForms 应用程序的另一个线程上运行我的类，并且我希望该类与 WinForms 应用程序的关注点分开，并且我不想将它绑定到它所做的以外的任何特定内容。

在库类中实现进度报告机制的最佳方法是什么？

在类中以某种方式有一个进度变量，并在我的 WinForms 应用程序中添加一个事件侦听器是一个好主意吗？如果是，我该怎么做？

**编辑：**我以前使用过这个`BackgroundWorker`类，但我的问题是我不希望我的库类关注任何多线程操作。所以我不想`ReportProgress`在库类中调用，我想（也许）在包含当前进度的类中有一个变量，并且我希望 UI 线程以某种方式“订阅”它。我不知道这是否是设计它的好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:42:50.620

查看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类。它支持跨线程自动编组以进行进度报告，并且它有一个非常简单的事件模型来支持这种支持。

**编辑**：鉴于您直接使用 BackgroundWorker 的立场，您可能要做的是创建一个简单的包装器：

```
// Error checking elided for expository purposes.
public interface IProgressReporter 
{
    void ReportProgress(int progress, object status);
}

public class BackgroundWorkerProgressReporter : IProgressReporter
{
    private BackgroundWorker _worker;
    public BackgroundWorkerProgressReporter(BackgroundWorker worker)
    {
        _worker = worker;
    }

    public void ReportProgress(int progress, object status)
    {
        _worker.ReportProgress(progress, status);
    }
} 
```

然后，更改要报告进度的类的构造函数（或添加属性）以接受 IProgressReporter。这是一种依赖注入的形式，应该有意义地允许您的对象报告进度，同时避免对线程库的特定依赖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:42:42.990

在这里，您可以采用 2 种不同的方式，我将在下面发布这两个选项，以帮助您指明正确的方向

您*应该*在另一个线程上执行此操作，然后从该线程更新您的 UI 线程。您正在通过在 UI 线程上执行此工作来阻止进一步的处理。

如果您*不能*将此代码移动到 UI 线程，那么您可以随时调用[`Application.DoEvents`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)，但我**强烈**建议您先探索这些选项：

*   [`System.ComponentModel.BackgroundWorker`](http://msdn.microsoft.com/en-us/library/8xs8549b.aspx)
*   [`System.Threading.ThreadPool`](http://msdn.microsoft.com/en-us/library/3dasc8as.aspx)
*   [`System.Threading.Thread`](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)
*   [`System.Threading.Tasks`命名空间](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)

第二种选择你可以做这样的事情：

您需要将数据从一个线程传输到另一个线程。这可以通过几种方式完成......

首先，您的“背景”线程可以更新某种“CurrentStatus”字符串变量，它会随着它的进行而改变。然后，您可以在表单上放置一个计时器，然后获取 CurrentStatus 变量并使用它更新标签。

其次，您可以使用标签控件的 InvokeRequired 属性通过委托简单地将操作从后台线程调用到 UI 线程。所以例如...

```
private delegate void UpdateStatusDelegate(string status);
private void UpdateStatus(string status)
{
    if (this.label1.InvokeRequired)
    {
        this.Invoke(new UpdateStatusDelegate(this.UpdateStatus), new object[] { status });
        return;
    }

    this.label1.Text = status;
} 
```

您可以从任何线程（UI 或后台）调用该 UpdateStatus() 方法，它会检测是否需要在主 UI 线程上调用操作（如果需要，是否需要）。

编辑：要实际设置线程，您可以这样做：

```
 private void StartProcessing()
    {
        System.Threading.Thread procThread = new System.Threading.Thread(this.Process);

        procThread.Start();
    }

    private void Process() // this is the actual method of the thread
    {
        foreach (System.IO.FileInfo f in dir.GetFiles("*.txt"))
        {
            // Do processing
            // Show progress bar
            // Update Label on Form, "f.Name is done processing, now processing..."
            UpdateStatus("Processing " + f.Name + "...");                
        }
    } 
```

然后，当用户单击“开始”按钮时，您只需调用 StartProcessing()。

# sql - 将 SQL Server 2008 R2 事务日志还原到 SQL Server 2005

> ID：13716352
> 
> 赞同：1
> 
> 时间：2012-12-05T04:32:29.827
> 
> 标签：sql, sql-server, sql-server-2008-r2, transaction-log

如果我有 SQL Server 2008R2 兼容性 90 生产数据库和 SQL Server 2005 开发数据库。

我可以将事务日志从生产恢复到开发吗？事务日志从 SQL Server 2008 R2 兼容性 90 恢复到 SQL Server 2005？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:20:57.823

不，您不能从较新版本的 sql server 恢复到较旧版本的 sql server。数据库的兼容级别不影响磁盘结构。例如，您可以在处于 90 兼容模式的数据库中使用页和行压缩（sql 2008 功能）。

# sql - 仅显示前三个月，即使数据库中不存在前几个月

> ID：13716356
> 
> 赞同：0
> 
> 时间：2012-12-05T04:32:40.450
> 
> 标签：sql

以下是我的新 sql，因为我没有设法使用 Dale M 的建议，

```
SELECT
all_months.a_month_id AS month,
year($P{date}) as year,
count(case when clixsteraccount.rem_joindate between DATE_FORMAT($P{date}-INTERVAL 2   MONTH, '%Y-%m-01') AND $P{date} THEN clixsteraccount.rem_registerbycn end) AS
total_activation,
'ACTIVATION(No)' AS fake_column

FROM clixsteraccount right join all_months on all_months.a_month_id = date_format(clixsteraccount.rem_joindate,'%m') and
(clixsteraccount.rem_registrationtype = 'Normal')and(clixsteraccount.rem_kapowstatus='pending' or clixsteraccount.rem_kapowstatus='success')

GROUP BY year,month

HAVING month BETWEEN month(date_sub($P{date},interval 2 month)) and month($P{date}) 
```

所以，我要做的是创建一个包含两个字段的表，a_month_id(1,2,3...,12) 和 a_month(月份名称)。上面的 Sql 确实给了我我想要的，即显示前 3 个月，即使前几个月不存在。exp：数据从 7 月开始。所以，我想显示 5 月、6 月和 7 月的数据，例如 0,0,100。

问题发生在下个月或明年。当我尝试在 Jan 上根据参数生成 sql 时，它不像我想的那样工作。我确实意识到问题出在“有”条件上。有谁知道如何即兴创作这个 sql 以使其在明年继续生成。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:29:35.550

好的，我将提出一些建议并给你一个适用于 SQL Server 的答案——你需要自己进行任何翻译。

我注意到您的查询将所有年份汇总在一起，即 2012 年 12 月 + 2013 年 12 月 + 2014 年 12 月等。根据您的问题，我认为这不是您的意图，因此我将保持每个年份的不同。如果这是您的意图，您可以更改查询。我也没有包括您的选择标准（按月份除外）。

我建议您使用索引表。这是一个存储在您的数据库（或主数据库，如果可能）中的表，其中有一个从 0 到 n 运行的聚集索引整数列，其中 n 是一个足够大的数字 - 10,000 对这个应用程序来说已经足够了（有 12 个月）一年，所以 10,000 代表 833 年）。这张桌子非常有用，每个人都应该拥有一张。

```
SELECT  DATEADD(month, it.id, 0 ) AS month
    ,ISNULL(COUNT(clixsteraccount.rem_registerbycn), 0) AS registration
    ,'REGISTRATION(No)' AS fake_column
FROM    cn
    INNER JOIN ON ca.rem_registerbycn = cn.cn_id
    clixsteraccount ca 
    RIGHT JOIN
    IndexTable it ON it.id = DATEDIFF(month, 0, clixsteraccount.rem_joindate)
WHERE   it.id BETWEEN DATEDIFF(month, 0, @StartDate) - 3 AND DATEDIFF(month, 0, GETDATE())
GROUP BY it.id 
```

它的工作方式是将 转换为`clixsteraccount.rem_joindate`表示自日期 0（SQL Server 中为 01-01-1900）以来的月数的整数。然后将其与 IndexTable 的 id 列匹配，并受您选择的日期的限制。因为每个数字都存在于索引表中，并且我们使用的是外连接，所以如果您的数据中缺少月份，则无关紧要。

# c# - 具有复杂业务子对象的评估

> ID：13716357
> 
> 赞同：1
> 
> 时间：2012-12-05T04:32:40.983
> 
> 标签：c#, asp.net

我有一个 Employee 类，其中包含字段 Name 和 OfficeAddress。OfficeAddress 再次是 Address 类型的对象。Address 是一个包含字段 Building、City 和 Country 的类。我有一个名为 empList 的员工列表。现在我想将此 empList 绑定到一个网格视图，以便它应该显示名称、建筑物、城市和国家。问题是当我使用 Eval("Building") 或 Eval("City") 或 Eval("Country") 绑定 gridview 时，gridview 在 empList 中找不到属性 Building、City 和 Country。请提供绑定这些列的语法。

# ruby-on-rails - Rails LinkedIn API 宝石

> ID：13716361
> 
> 赞同：1
> 
> 时间：2012-12-05T04:33:01.773
> 
> 标签：ruby-on-rails, ruby, linkedin

我正在使用 Rails LinkedIn API gem。[https://github.com/pengwynn/linkedin/issues/141](https://github.com/pengwynn/linkedin/issues/141)

我正在尝试按名字和姓氏搜索链接的用户，到目前为止我已经想出了这个：

```
@profiles = linkedin_client.search(:first_name => fname, :last_name => lname, :sort => "connections", :fields => %w(id first-name last-name headline industry location api-standard-profile-request picture_url public_profile_url summary)); 
```

我的一个问题是，“:first_name”会作为参数“first-name”工作吗？我的意思是下划线可以很好地替代破折号“-”吗？

我希望这些结果将按连接进行组织，正如我在上面所做的那样`:sort => "connections"`

问题是它不会返回任何结果，即使我知道用户名存在。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:13:09.700

仅使用 :first_name 作为参数。

名字不起作用！

# java - struts 为隐藏字段转义表单验证

> ID：13716372
> 
> 赞同：1
> 
> 时间：2012-12-05T04:34:10.037
> 
> 标签：java, struts, struts-1, struts-validation

我根据某些条件隐藏了一些字段，即在 UI 中它们不可见，但是单击提交按钮，struts 正在验证这些隐藏字段..

有没有办法告诉struts不要验证隐藏的字段......即，仅当它们在UI上可见时才验证这些字段。

我正在使用 struts 1.2 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:52:17.143

当您触发这些条件时在您的表单上设置一个属性，然后在您的验证器中检查它：

```
if(!form.isSkipValidation()){
   //Hear you can write your Validation code..
} 
```

在 javascript 中，您可以使用隐藏的输入字段设置此属性：

```
<input type="hidden" name="skipValidation" value="false"/> 
```

希望这会有所帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T20:54:57.690

Struts 将验证表单中的任何内容，无论是否隐藏。

您需要使用条件验证并确定是否应该执行这些验证，可能通过另一个隐藏的表单值，具体取决于您如何决定隐藏的内容。

就个人而言，我发现这种验证在 XML 配置下很难维护。特别是如果验证条件依赖于业务逻辑，我更喜欢在自定义验证器或 ActionForm 验证方法中看到这种逻辑，封装在与 Struts 框架完全隔离的类中。

# javascript - 对于由 requirejs 优化器组合的 js 文件，如何在运行时覆盖模型/视图文件？

> ID：13716379
> 
> 赞同：0
> 
> 时间：2012-12-05T04:34:33.460
> 
> 标签：javascript, backbone.js, requirejs, r.js

场景：使用的框架是主干和需要。我有一个 main.js，它对 util、model 和 view js 有几个依赖关系，它们又是相互依赖的。还有循环依赖。此 main.js 已使用 requirejs 优化器编译为单个文件。

问题： **如何在运行时覆盖某些视图和模型？** （我有一个 main 的编译版本，所以我不是在谈论在编译时排除模型或视图的 js）。

在编译时我不知道模型/视图是否会被覆盖。因此，当我运行优化器时，会创建一个包含所有模型和视图的 js 文件。我需要覆盖该单个 js 文件中的特定类定义，这样我就不会修改该文件。

**是否有任何配置会告诉“要求”从单独的文件而不是单个编译的 js 文件加载模型/视图？**

**或者有什么办法可以通过最小的变化来实现？**

```
 //models/ - folder

//mymodel.js - filename
define([
    'jquery',
    'underscore',
    'backbone'
], function($, _, Backbone) {
    var mymodel2 = Backbone.Collection.extend({
       //some code
    });
    return mymodel2;
});

//mymodel2.js - filename
define([
    'jquery',
    'underscore',
    'backbone',
    'mymodel'
], function($, _, Backbone, mymodel) {
    var mymodel2 = Backbone.Collection.extend({
       //some code
    });
    return mymodel2;
});

//views/ - folder

//view1.js - filename
define([
    'jquery',
    'underscore',
    'backbone',
    'runtime/util/logmanager',
    'runtime/util/logger'
], function($, _, Backbone, LogManager, Logger) {
    var view1 = Backbone.View.extend({

        _configure: function(options) {
            //some code
        },

        initialize: function() {
            //some code
        },

        endsWith: function(str, suffix) {
            //some code
        }

    });
    return view1;
});

//like this i have view2.js, view3.js... etc

//Similarly i have util folder with util1.js, util2.js... etc

//main.js
;(function(){

    if (!window.console) window.console = {};
    if (!window.console.log) window.console.log = function () { };
    var paths = {
        jquery: 'libs/jquery/jquery',
        underscore: 'libs/underscore/underscore',
        initializer: 'runtime/initializer/initializer',
        backbone: 'libs/backbone/backbone',
        json2: 'libs/json/json2',
        text: 'libs/require/text',
        jqueryform: 'libs/jqueryform/jqueryform',
        jqueryui: 'libs/jqueryui/jquery-ui',
        slimscroll: 'libs/slimscroll/slimScroll',
        i18next: 'libs/i18next/i18next',
    common: 'libs/commons/common',

    utility1 : 'util/util1',
    utility2 : 'util/util2',
    .
    .
    model2 : 'model/mymodel2',
    .
    .
    .
    view2 : 'view/view1'
};

window.configData = window.configData || {};
window.configData.serverPath = location.protocol + "//" + window.location.host;

require.config({
    paths: paths,
    shim: {
            'underscore': {
                exports: '_'
            },
            'backbone': {
                deps: ['underscore', 'jquery'],
                exports: 'Backbone'
            },
            'i18next': {
                deps: ['jquery', 'json2'],
                exports: 'i18n'
            }
        }
});

require(['router'],
    function(Router) {
        Router.initialize();
    });
})(); 
```

编译/组合文件看起来像：

```
 *! jQuery v1.7.1 jquery.com | jquery.org/license */
(//jquery-def file code)(window);

//     Underscore.js 1.3.3
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore is freely distributable under the MIT license.
//     Portions of Underscore are inspired or borrowed from Prototype,
//     Oliver Steele's Functional, and John Resig's Micro-Templating.
//     For all details and documentation:
//     http://documentcloud.github.com/underscore

(function() {

    //uderscore code
}).call(this);

define("underscore", (function (global) {
    return function () {
        var ret, fn;
        return ret || global._;
    };
}(this)));
.
.
.
all lib definition 
.
.
then depending on the dependencies models, views, utils, routers, definition
.
.
and finally main
;(function(){

    if (!window.console) window.console = {};
    if (!window.console.log) window.console.log = function () { };
    var paths = {
        jquery: 'libs/jquery/jquery-min',
        underscore: 'libs/underscore/underscore',
        initializer: 'runtime/initializer/initializer',
        backbone: 'libs/backbone/backbone',
        json2: 'libs/json/json2',
        text: 'libs/require/text',
        bootstrap: 'libs/bootstrap/bootstrap',
        jqueryform: 'libs/jqueryform/jqueryform',
        jqueryui: 'libs/jqueryui/jquery-ui',
        slimscroll: 'libs/slimscroll/slimScroll',
        i18next: 'libs/i18next/i18next',
        common: 'libs/commons/common',

        utility1 : 'util/util1',
        utility2 : 'util/util2',
        .
        .
        model2 : 'model/mymodel2',
        .
        .
        .
        view2 : 'view/view1'
    };

    window.configData = window.configData || {};
    window.configData.serverPath = location.protocol + "//" + window.location.host;

    require.config({
        paths: paths,
        shim: {
                'underscore': {
                    exports: '_'
                },
                'backbone': {
                    deps: ['underscore', 'jquery'],
                    exports: 'Backbone'
                },
                'i18next': {
                    deps: ['jquery', 'json2'],
                    exports: 'i18n'
                }
            }
    });

    require(['router'],
        function(Router) {
            Router.initialize();
        });
})();

define("main", function(){}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:36:13.953

> 是否有任何配置会告诉“要求”从单独的文件而不是单个编译的 js 文件加载模型/视图？

要使用 require 加载 Javascript 文件，您可以随时调用它（即使在优化器运行之后），如下所示：

```
myModule = require('myJavascriptFile'); 
```

优化后的文件不是为操作而设计的。修改您的源，然后重新优化。

另外，请注意：Require 不会编译您的 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:24:26.887

您可以覆盖`require()`自身并使其在以正常方式加载之前先在目录中查找模块。

这可能并不容易做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:32:49.140

> 如何在运行时覆盖某些视图和模型？

在 Javascript 中，您可以随时重新分配变量。例子：

```
var x = 1; // the value of x is 1
x = 2; // the value of x is now 2 
```

同样，您可以在运行时覆盖 Backbone 模型和视图，如下所示：

```
var myModel = new Backbone.Model({x: 1});// create myModel
myModel = new Backbone.Model({x: 2});// now, myModel is a different model
myModel = "something else entirely";// now, myModel is a string 
```

# ruby-on-rails - 如何计算数据库中不同记录的总和

> ID：13716382
> 
> 赞同：2
> 
> 时间：2012-12-05T04:34:46.547
> 
> 标签：ruby-on-rails, ruby, count

我在 DB 中有一个包含 10 个问题和答案的表格。(:question_id, :answer)

1、3、5、7、9 题为第一组。

2,4,6,8,10 题为第 2 组。

每个问题有 2 个答案：A/B。

A= 0

乙= 1

我需要计算每个组中问题答案的总和。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:43:09.943

尝试这个

```
Question.count(:group => 'group_id') 
```

假设您有一个名为 Question 的 Activerecord 模型，并且它有一个名为 group_id 的列属性来保留组

高温高压

# javascript - 如果菜单是纯 CSS 驱动的，则更新 aria-hidden 属性

> ID：13716386
> 
> 赞同：1
> 
> 时间：2012-12-05T04:35:08.563
> 
> 标签：javascript, html, css, accessibility, screen-readers

我决定尝试让屏幕阅读器和其他辅助技术更容易访问我的网站。目前我真的专注于我的导航。因为如果您真正想要的项目嵌套很深并且接近末尾，那么谁愿意遍历菜单上的所有项目？

因此，我正在处理的网站有一个完全基于 CSS 的下拉菜单，我正在使用 javascript 对其进行扩充，以使其键盘可访问并添加 aria 属性以帮助屏幕阅读器。

**我的问题是**

鉴于我现有的菜单是纯 CSS，我想知道我现在是否需要使用 javascript 来扩充我的菜单，以便在菜单的一部分变得可见时更新 aria-hidden 属性？还是在第一个实例中将其设置为 aria-hidden="true" 并保留它只是为了向屏幕阅读器指示默认状态就足够了吗？

任何使用纯 CSS 显示/隐藏内容的东西现在都需要用 javascript 增强，这对我来说并不合适——感觉它违背了纯 CSS 显示切换的全部目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:00:56.283

是的，您必须在状态更改时设置 aria-hidden。

> 作者必须在不显示的内容上设置 aria-hidden="true"，无论用于隐藏它的机制如何。

[咏叹调隐藏规范](http://www.w3.org/TR/wai-aria/states_and_properties#aria-hidden)

该措辞向我表明，无论您使用 CSS 还是 javascript 来切换可见性，您都需要更新 aria-hidden 值。

# command-line - 如何编译和运行 H2 TriggerSample

> ID：13716387
> 
> 赞同：0
> 
> 时间：2012-12-05T04:35:14.860
> 
> 标签：command-line, triggers, h2

我将 TriggerSample.java 复制到了这个目录。然后：

javac -cp h2-1.3.168.jar TriggerSample.java

创建

TriggerSample$MyTrigger.class ... 和 ... TriggerSample.class

然后：java TriggerSample

说：

```
Exception in thread "main" java.lang.NoClassDefFoundError: TriggerSample (wrong name: org/h2/samples/TriggerSample)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

也不行：

java org.h2.samples.TriggerSample

java org/h2/samples/TriggerSample

如何从命令行运行该示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:51:04.877

这是一个常见的 Java 问题。类的包名`TriggerSample`是`org.h2.samples`. 您应该使用目录名称`org/h2/samples`。

*   创建目录 org/h2/samples

    `mkdir org/h2/samples`

*   将文件移动`TriggerSample.java`到该目录

*   跑

    `javac -cp h2-1.3.168.jar org/h2/samples/TriggerSample.java`

*   然后运行

    `java -cp h2-1.3.168.jar:. org.h2.samples.TriggerSample`

或者：去掉文件的包声明`TriggerSample.java`。

# c# - 如何在 C# 中实现对另一台服务器的回调

> ID：13716391
> 
> 赞同：0
> 
> 时间：2012-12-05T04:35:42.463
> 
> 标签：c#, wcf, callback

我被分配制作 2 个服务器和一个客户端应用程序。

*   我的服务必须每秒生成 1-100 的随机数。
*   服务器 A 必须显示从服务生成的随机数。
*   服务器 B 必须从服务接收服务器 A 显示的相同提要。
*   然后客户端应用程序必须接收服务器 B 接收的相同提要。

我知道这将与回调有关，但我真的不知道从哪里开始。我尝试编写代码，服务器 A 和服务器 B 显示相同但有时不显示，我知道这都是错误的。请帮忙。我已经用它工作了三天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:16:23.737

听起来您可能需要实现一个简单的发布/订阅系统才能使其正常工作。 [http://msdn.microsoft.com/en-us/magazine/cc163537.aspx](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx) - 如果您使用的是 WCF ..

因为您并没有真正提供任何细节 - 我原以为您首先需要连接服务器 A 和 B 才能成为随机数事件的订阅者。并且客户根据 A 和 B 所做的事情进行不同的订阅..

所以工作流程是这样的......服务器A定期调用随机数服务......当它收到它的响应时，它会发布一条服务器B和客户端订阅的消息......每次发生这种情况时服务器B和客户端都会收到一个事件。再次查看我提供的链接以获取更多详细信息..

# html - 为什么此站点以 Internet Explorer 的 Quirks 模式加载？

> ID：13716397
> 
> 赞同：0
> 
> 时间：2012-12-05T04:36:46.110
> 
> 标签：html, internet-explorer

为什么此[站点](http://www.posterlion.com/)以 Quirks 模式加载？我知道我可以使用 X-UA-Compatible 但我更喜欢解决下划线问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:40:08.897

因为它是这样定义的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

如果您希望它以标准模式加载，请使用 HTML 5 文档类型：

```
<!DOCTYPE html> 
```

**编辑**：

此外，将初始元标记向下移动。这是我在查看您的网站时看到的：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<HTML>
<head>

<title>

20.000+ Cheap Wall Posters and Postcards

</title>

<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

您有重复的 Content-Type 元标记。最重要的是仍然让你陷入怪癖。如果您完全删除它，那会很好，并确保您的字符集是准确的（utf-8 或 iso-8859-1）。它应该是：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<HTML>
<head>

<title>

20.000+ Cheap Wall Posters and Postcards

</title>

<META http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

# java - java - 如何在Java中使用Jericho解析源中的所有链接，同时过滤或忽略具有特定ID的元素？

> ID：13716398
> 
> 赞同：1
> 
> 时间：2012-12-05T04:36:46.410
> 
> 标签：java, jericho-html-parser

我正在使用 Jericho java 客户端库来解析所有 href 链接。我想要做的是过滤掉或跳过源中包含特定 id 的所有链接。我尝试了几件事，但我的解决方案并不漂亮，但基本上我可以通过检查以下内容来完成此操作：

```
for(Element element : elements) {
  if (element.getAllStartTags().toString().contains("skip_me")) {
    // do something
  }
} 
```

但我更喜欢更清洁的解决方案。让我们假设这是来源：

```
<td>
 <a href="http://www.yahoo.com" id="skip_me" />
</td>
<td>
 <a href="http://www.google.com" />
</td> 
```

只是一个小片段，但我希望它最终返回给我的只是“www.google.com”。我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T23:27:11.723

```
Another solution:       

List<Element> elements = source.getAllElements("a");        
for(Element element : elements )
     {
      final String id = element.getAttributeValue("id");
      if(id == null || !id.equals("skip_me")) 
         {
          System.out.println(element.toString());    
         }
     } 
```

输出：

```
<a href="http://www.google.com" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:23:32.100

这是另一个解决方案：

```
for( Element element : elements )
{
    if( element.getStartTag().getName() == HTMLElementName.A ) // Select only 'a'-tags
    {
        final String id = element.getAttributeValue("id"); // Get Attribute 'id'

        if( id == null || !id.equals("skip_me") ) // Process element if it has a.) no id (null) or b.) the id is not 'skip_me'
        {
            System.out.println(element); // Process Element
        }
    }
} 
```

**输出：（**
*使用您的html）*

```
<a href="http://www.google.com" /> 
```

# c - 从用户空间复制变量

> ID：13716401
> 
> 赞同：1
> 
> 时间：2012-12-05T04:36:59.530
> 
> 标签：c, linux, kernel, kernel-module

我觉得这个问题已经得到解答，但我通过谷歌搜索没有找到任何实现它提供了我需要的保护。

我正在使用 linux 3.2.2。

我希望尽可能安全地将变量从用户空间复制到内核空间。这包括一个结构指针和一个以空结尾的字符串。我如何确保我的结构指针有效？（access_ok on (void*) -1 没有捕捉到它）我希望它基本上是白痴证明......

对于以空结尾的字符串，我不知道长度，并且复制这些以空结尾的字符串的一些函数需要大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:02:56.630

使用[ioctl](http://en.wikipedia.org/wiki/Ioctl)我们应该能够将结构复制到内核空间。我已经使用创建的虚拟 ioctl 成功地将变量复制到内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:14:41.077

已解决：所以我发现的最佳解决方案实际上是我使用的代码只是放了一个和而不是一个或。

首先检查 ptr 是否为空。然后

```
access_ok(VERIFY_READ/WRITE,ptr,structsize) 
```

如果这通过了我们的 usr ptr 或 struct 在用户地址空间内。最后使用

```
int copy_from_user(void* dest, void* src,size_t len) 
```

并确保 destPtr 指向内核中的空间，该空间的大小显然 >= structsize。即使是现在，也不能保证结构中的数据是有用的，或者根本不是你想要的。它只是不会导致内核恐慌的原始数据。所以现在您可以检查结构的每个成员是否有有效数据。有一些更有用的信息

[https://www.ibm.com/developerworks/linux/library/l-kernel-memory-access/](https://www.ibm.com/developerworks/linux/library/l-kernel-memory-access/)

# knockout.js - 在 Knockout.js 中绑定 CSS3 渐变样式

> ID：13716402
> 
> 赞同：1
> 
> 时间：2012-12-05T04:36:59.837
> 
> 标签：knockout.js

我遇到了一个问题，我不确定如何处理样式绑定。

我的 ViewModel 对象包含两个属性，HexColor1 和 HexColor2。我正在尝试将这些属性绑定到背景图像渐变样式。

我需要的结果 HTML 示例（其中 HexColor1 = "#FFFFFF" 和 HexColor2 = "#000000"）：

```
<div style="background-image: -moz-linear-gradient(top, #FFFFFF, #000000); background-image: -webkit-linear-gradient(top, #FFFFFF, #000000);">Hello</div> 
```

做这个的最好方式是什么？我应该创建包含所有 *-linear-gradient 样式字符串的计算属性，还是有办法直接在样式绑定中执行它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:16:19.497

真正的问题是为什么不使用样式表并将内容和布局分开？

哦，好吧，如果你真的需要动态设置它们

计算不是很好，因为您将 View 依赖项注入到 ViewModel 中，为什么不制作一个采用两种颜色的渐变自定义绑定？

# jquery - 负边距点击不应该工作

> ID：13716405
> 
> 赞同：0
> 
> 时间：2012-12-05T04:37:08.703
> 
> 标签：jquery, html, css, jquery-mobile

我为图像设置了一个负上边距（-15px），它工作正常。但问题是点击事件。点击仍然在图像下方（即从浏览器上的确切图像的视图下方+15px）图像。![在此处输入图像描述](../Images/946f1267350cc39fec0a0bc146ee00fc.png)

```
<div data-role="page" >

    <!-- Header -->
    <div data-role="header" class="listHeader" data-position="fixed" data-tap-    toggle="false">

        <img src="images/all_lists_normal.png" class="view_list"> 
        <img src="images/x_normal.png" class="x_image">
        <div class="titleList">
            <p id="page_title" class="label"></p>
        </div>

        <img id="id_new_products" src="images/add_products_normal.png" class="addNewItemImage_page4"> 
        <img id="id_find_stores"  src="images/find_store_normal.png"   class="addNewItemImageMargin">
    </div> <!-- / header -->

    <!-- Content -->
    <div data-role="content" class="mainBackground">
     some content....
    </div>

</div>

.listHeader {
background: url(../images/header_nologo.png) no-repeat 50% 0px;
background-size: 100% 107%;
height: 60px;

}

.view_list {
float: left;
margin-top: 12px;
}

.x_image {
float: right;
margin-right: 15px;
margin-top: 17px;
}

.addNewItemImage_page4 {
min-width: 100%;
margin-top: 9px;
position:relative;
}

.addNewItemImageMargin {
min-width: 100%;
margin-top: -14px; /****************** PROBLEM ***********/
position:relative;
}

.mainBackground {
background: url(../images/background.jpg) no-repeat 50% 0px;
background-size: 100% 100%;
min-height: inherit;
min-width: 100%;
margin-top: -2px;
} 
```

JS：-

```
 $("#id_find_stores")
    .click(function(){

        alert('hi');

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:55:52.067

这将是将您的操作处理程序放在 img 而不是包装 div 上的示例：http: [//jsfiddle.net/vhxc3/](http://jsfiddle.net/vhxc3/)

这就是我试图想出你提供给我们的信息：http: [//jsfiddle.net/hhkuL/](http://jsfiddle.net/hhkuL/)

```
$(document).ready(function() {
    $('#id_new_products').click(function() {
        $(this).css({ "border" : "1px solid red" });            
    }); 
});​ 
```

# scala - Scala 的 Intellij Idea 设置，需要说明

> ID：13716420
> 
> 赞同：16
> 
> 时间：2012-12-05T04:39:17.277
> 
> 标签：scala, intellij-idea

使用 IntelliJIdea 12，我下载了 Scala 插件并创建了一个 HelloWorld 应用程序。

以下导入似乎很奇怪。为什么 IDEA 不承认这是一个 Scala 应用程序？我的设置不完整吗？

![在此处输入图像描述](../Images/d56708e1b3e06bb448a8c74235197032.png)

我检查了我的编译器指向哪里并得到了这个。真的没有办法将 IDEA 导航到我的 scala 安装。

请指教。

![在此处输入图像描述](../Images/0ce27659a7dbd4f74ec14d9de6de0219.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T15:29:52.173

从向导创建新的 Scala 项目时，IDEA 可以为您下载和配置所有内容：

![新的 Scala 项目](../Images/14d4b87d023c876eee14de5d1990aa50.png)

稍后可以在**Scala Facet**中更改设置：

![刻面](../Images/d1cdf214ccc68778a0e2b3fdd9730974.png)

在**编译器**中：

![编译器](../Images/d337072411d6be1391192e647b28e7de.png)

库配置：

![编译器](../Images/1ca08a2ce69722547e7d7a5c101091c4.png)

![斯卡拉](../Images/bbaea27ac2d0fa2f458e0eed5988ea37.png)

代码和导入完成可从**Scala**库中获得：

![完成](../Images/5efebc880b2134ed31c083b7d5e21ce2.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T12:29:13.127

您需要将 Scala 添加为项目的框架。

为此，请右键单击项目中的顶级目录，选择“添加框架支持...”并选择 Scala。然后 Scala 将被添加为您项目的“方面”。

这是一个包含更多信息的好页面：

*   [IDEA Scala 项目配置说明](http://blog.jetbrains.com/scala/2010/09/02/project-configuration-explained/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T06:32:29.720

我通过从 scala-lang.org 下载 Scala 库，解压缩然后将项目指向它来解决这个问题。之后它工作得很好。但是，当然，我是一个 eclipse 的人，所以也许其他人可以给你一个更好的自动化（？）解决方案。这是我的项目在 Module Settings -> Libraries 中的样子：

![在此处输入图像描述](../Images/cabc93430e49886f2b9c426224ac6852.png)

# mysql - mysql 在匹配多行时选择

> ID：13716421
> 
> 赞同：3
> 
> 时间：2012-12-05T04:39:16.403
> 
> 标签：mysql

我有一个项目，我需要只选择以某种方式（基于过滤器）回答某些问题的用户。

**过滤表**（filter）长这样

```
 question |   answer  

   Q1       |    A  
   Q2       |    B 
```

**用户表**（答案）如下所示

```
user | question | answer  

  1  |    Q1    |    A  
  1  |    Q2    |    D  
  2  |    Q1    |    A  
  2  |    Q2    |    B 
```

如何从用户表中仅选择与过滤器匹配的用户？
我试过

```
"SELECT user FROM answers WHERE (question = Q1 AND answer = A) 
             AND (question = Q2 AND answer = B)" 
```

它不起作用——我得到一个空的结果。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:31:08.660

在您的查询中，您要求获取不存在的数据。您正在尝试获取同时具有这两种组合的用户。

试试这个

```
SELECT user FROM answers WHERE (question = 'Q1' AND answer = 'A') 
         OR (question = 'Q2' AND answer = 'B') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:41:43.203

试试这个：

```
Select 
DISTINCT(userId)
from user_table ut
inner join filtertable ft on (ut.question=ft.question and ut.answer=ft.answer) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T05:00:31.400

试试这个

```
select answers.user
from filter, answers
where filter.question=answers.question and filter.answer=answers.answer
group by answers.user having count(answers.question)=2 
```

或者

```
select user
from answers
where user not in 
(select distinct a.user from answers a, filter f 
where a.question=f.question and a.answer!=f.answer) 
```

# asp.net-mvc - Alter 在重定向 + 控制器 MVC 之前不起作用

> ID：13716422
> 
> 赞同：0
> 
> 时间：2012-12-05T04:39:21.657
> 
> 标签：asp.net-mvc

我有代码：

```
public ActionResult Inner(simpleQA.Models.Post model)
    {
        if(simpleQA.User.Current != null)
        {
                simpleQA.Post objPostAns = new Post();
                objPostAns.TypeId = 4;
                objPostAns.Content = model.ContentAnswesr;
                objPostAns.RelatePostId = model.RelatePostId;
                objPostAns.CreateAt = DateTime.Now;
                objPostAns.CreateBy = simpleQA.User.Current.Id;
                objPostAns.Save();
                return View("");
        }
        else
        {
            Response.Write("Please Login");
            Response.Redirect("/");
        }
        return View("/");
    } 
```

我在重定向之前尝试`Respon.write`改变，但它不起作用。告诉我一个改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:51:03.777

您不能在 MVC 控制器中使用 response.write。控制器只能将数据传递给视图。

您应该做的不是`Response.Redirect`重定向到登录视图：

```
return RedirectToAction("Login"); 
```

（更好地使用内置（表单）身份验证，因为它会自动将用户发送到登录表单，并在登录后返回他打算访问的页面）

# ruby-on-rails - 如何通过cron更改Rails3 actionmailer的“来自”？

> ID：13716425
> 
> 赞同：0
> 
> 时间：2012-12-05T04:39:27.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, gmail, actionmailer

我已经测试过向谷歌应用帐户 my_development_account@mydomain.com 发送邮件。当我发送邮件时，使用 cron。我已经使用了这个 config/enviroments/development.rb

```
config.action_mailer.raise_delivery_errors = true                                             
config.action_mailer.default_url_options = { :host => "mydomain.com", :port => 4649 }
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
    :address => "smtp.gmail.com",
    :port => 587,
    :domain => 'mydomain.com',
    :user_name => "my_development_account@mydomain.com",
    :password => "my_development_account_pass",
    :authentication => 'plain',
    :enable_starttls_auto => true,
} 
```

但是我得到了一个新帐户（new_account@another.my.domain），并通过 cron 从这个新帐户发送邮件。和 new_account@another.my.domain 的 config/enviroments/development.rb 在这里。

```
config.action_mailer.raise_delivery_errors = true                                             
config.action_mailer.default_url_options = { :host => "another.my.domain", :port => 4649 }
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
    :address => "smtp.gmail.com",
    :port => 587,
    :domain => 'another.my.domain',
    :user_name => "new_account@another.my.domain",
    :password => "new_account_pass",
    :authentication => 'plain',
    :enable_starttls_auto => true,
} 
```

然后问题发生了。我的新帐户邮件的接收者仍然可以在 from 上看到 my_development_account@mydomain.com。我想在 from 上显示接收者 new_account@another.my.domain。我该如何解决这个问题？

我尝试重新启动cron，sendmail。然而这个问题仍然存在。

# objective-c - 如何在 Objective-c/Cocoa (OSX) 中制作完美的作物（不改变质量）

> ID：13716426
> 
> 赞同：9
> 
> 时间：2012-12-05T04:39:31.537
> 
> 标签：objective-c, macos, cocoa, crop, nsimage

Objective-c/cocoa (OSX) 中是否有任何方法可以在不改变图像质量的情况下裁剪图像？

我非常接近解决方案，但我仍然可以在颜色中检测到一些差异。放大文本时我可以注意到它。这是我目前正在使用的代码：

```
 NSImage *target = [[[NSImage alloc]initWithSize:panelRect.size] autorelease];
    target.backgroundColor = [NSColor greenColor];
    //start drawing on target
    [target lockFocus];
    [NSGraphicsContext saveGraphicsState];
    [[NSGraphicsContext currentContext] setImageInterpolation:NSImageInterpolationNone];
    [[NSGraphicsContext currentContext] setShouldAntialias:NO];

    //draw the portion of the source image on target image
    [source drawInRect:NSMakeRect(0,0,panelRect.size.width,panelRect.size.height)
              fromRect:NSMakeRect(panelRect.origin.x , source.size.height - panelRect.origin.y - panelRect.size.height, panelRect.size.width, panelRect.size.height)
             operation:NSCompositeCopy
              fraction:1.0];

    [NSGraphicsContext restoreGraphicsState];
    //end drawing
    [target unlockFocus];

    //create a NSBitmapImageRep
    NSBitmapImageRep *bmpImageRep = [[[NSBitmapImageRep alloc]initWithData:[target TIFFRepresentation]] autorelease];
    //add the NSBitmapImage to the representation list of the target
    [target addRepresentation:bmpImageRep];
    //get the data from the representation
    NSData *data = [bmpImageRep representationUsingType: NSJPEGFileType
                                             properties: imageProps];
    NSString *filename = [NSString stringWithFormat:@"%@%@.jpg", panelImagePrefix, panelNumber];
    NSLog(@"This is the filename: %@", filename);
    //write the data to a file
    [data writeToFile:filename atomically:NO]; 
```

这是原始图像和裁剪图像的放大比较：

![原始图像](../Images/08fafdd2bd94921e745ef5c483d74db9.png) （原图——上图）

![裁剪的图像](../Images/3596676e85edb99392c0e45a6f328680.png) （裁剪图像 - 上图）

区别很难看出，但如果你在它们之间轻弹，你会注意到它。您也可以使用颜色选择器来注意差异。例如，图像底部行中最暗的像素是不同的阴影。

我也有一个完全按照我在 iOS 中想要的方式工作的解决方案。这是代码：

```
-(void)testMethod:(int)page forRect:(CGRect)rect{
    NSString *filePath = @"imageName";

    NSData *data = [HeavyResourceManager dataForPath:filePath];//this just gets the image as NSData
    UIImage *image = [UIImage imageWithData:data];

    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);//crop in the rect

    UIImage *result = [UIImage imageWithCGImage:imageRef scale:0 orientation:image.imageOrientation];
    CGImageRelease(imageRef);

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectoryPath = [paths objectAtIndex:0];

    [UIImageJPEGRepresentation(result, 1.0) writeToFile:[documentsDirectoryPath stringByAppendingPathComponent::@"output.jpg"] atomically:YES];
} 
```

那么，有没有办法在 OSX 中裁剪图像，使裁剪后的图像完全不改变？也许我必须研究一个不同的库，但如果我不能用 Objective-C 做到这一点，我会感到惊讶......

* * *

*注意*，这是我之前的问题的后续[问题](https://stackoverflow.com/questions/13619535/thin-white-lines-being-added-when-cropping-an-image-objective-c-osx)。

* * *

*更新*我已经尝试（根据[建议](https://stackoverflow.com/a/13802448/377384)）将 CGRect 值四舍五入为整数，但没有注意到差异。这是我使用的代码：

```
 [source drawInRect:NSMakeRect(0,0,(int)panelRect.size.width,(int)panelRect.size.height)
              fromRect:NSMakeRect((int)panelRect.origin.x , (int)(source.size.height - panelRect.origin.y - panelRect.size.height), (int)panelRect.size.width, (int)panelRect.size.height)
             operation:NSCompositeCopy
              fraction:1.0]; 
```

* * *

*更新*我尝试[了 mazzaroth 代码](https://stackoverflow.com/a/13823671/377384)，如果我将它保存为 png，它可以工作，但是如果我尝试将它保存为 jpeg，图像会失去质量。如此接近，但还不够接近。还是希望得到完整的答案...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T15:58:30.470

使用 CGImageCreateWithImageInRect。

```
// this chunk of code loads a jpeg image into a cgimage
// creates a second crop of the original image with CGImageCreateWithImageInRect
// writes the new cropped image to the desktop
// ensure that the xy origin of the CGRectMake call is smaller than the width or height of the original image

NSURL *originalImage = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"lockwood" ofType:@"jpg"]];
CGImageRef imageRef = NULL;

CGImageSourceRef loadRef = CGImageSourceCreateWithURL((CFURLRef)originalImage, NULL);
if (loadRef != NULL)
{
    imageRef = CGImageSourceCreateImageAtIndex(loadRef, 0, NULL);
    CFRelease(loadRef); // Release CGImageSource reference
}    
CGImageRef croppedImage = CGImageCreateWithImageInRect(imageRef, CGRectMake(200., 200., 100., 100.));

CFURLRef saveUrl = (CFURLRef)[NSURL fileURLWithPath:[@"~/Desktop/lockwood-crop.jpg" stringByExpandingTildeInPath]];
CGImageDestinationRef destination = CGImageDestinationCreateWithURL(saveUrl, kUTTypeJPEG, 1, NULL);
CGImageDestinationAddImage(destination, croppedImage, nil);

if (!CGImageDestinationFinalize(destination)) {
    NSLog(@"Failed to write image to %@", saveUrl);
}

CFRelease(destination);
CFRelease(imageRef);
CFRelease(croppedImage); 
```

我还提出了一个要点：

[https://gist.github.com/4259594](https://gist.github.com/4259594)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T06:08:05.690

尝试将 drawInRect orign 更改为 0.5,0.5。否则 Quartz 会将每个像素颜色分配给相邻的 4 个固定点。

设置目标图像的色彩空间。您可能有不同的色彩空间，导致看起来略有不同。

尝试各种渲染意图，看看哪种效果最好，感知与相对比色等。我认为有 4 个选项。

您提到通过保存 JPEG 与 PNG 来修改颜色。

您可以在保存为 JPEG 时指定压缩级别。尝试使用 0.8 或 0.9 之类的东西。您还可以使用 1.0 保存不压缩的 JPEG，但 PNG 具有明显的优势。您在选项字典中为 CGImageDesinationAddImage 指定压缩级别。

最后——如果她没有帮助的话——你应该用 DTS 开一个 TSI，他们当然可以为你提供你所寻求的指导。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T14:01:04.550

通常的问题是裁剪尺寸是浮动的，但图像像素是整数。可可自动插入它。

您需要对大小和坐标进行下限、舍入或上限，以确保它们是整数。

这可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T13:36:27.153

我正在删除 JPG 文件的 EXIF，我想我明白了原因：

所有损失和更改都来自在保存到文件期间重新压缩图像。

如果您只是再次保存整个图像，您也可能会注意到更改。我要做的是阅读原始 JPG 并将其重新压缩到具有同等文件大小的质量。

# jquery - Rails 3 上 JQuery 和 Backbone.js 的问题

> ID：13716432
> 
> 赞同：1
> 
> 时间：2012-12-05T04:40:12.283
> 
> 标签：jquery, css, ruby-on-rails, backbone.js

我在一个 js 文件（不是主干文件）中有以下代码，除了悬停事件之外，其余的文件 jQuery 命令都可以工作：

```
$ ->
        $("#welcome").modal "show"
        $(".george").hover ->
                $(".peche").fadeIn(1000).css("display","inline-block")
                $(".peche").fadeOut(300).css("display","none")
        $("#yes").click ->
                $("#welcome").modal "hide"
                $("#prospective_user").modal "show"
        $("#no").click ->
                $("#welcome").modal "hide"
                $("#returning_user").modal "show"
        $("#back").click ->
                $("#prospective_user").modal "hide"
                $("#welcome").modal "show"
        $("#backto").click ->
                $("#returning_user").modal "hide"
                $("#welcome").modal "show" 
```

这是一个主干使用的 ECO 模板，其中包含要悬停的元素和要显示的元素：

```
<% for post in @posts.models: %>

        <tr class="george"><td>
                <center><div class="postdata">
                <% if post.get('content').length > 140: %>
                        <%=post.get('content').substring(0, 140)+"\t\t"%>
                        ...<a href="show/<%= post.get('id') %>">see more</a>
                <% else: %>
                        <%= post.get('content') %>
                <% end %>
        <br></div></center>

<span class="peche"><center>
<a href="<%= post.get('id') %>/like" data-remote="true">Agree</a>
<a href="<%= post.get('id') %>/dislike" data-remote="true">Disagree</a>
<a href="voice/<%= post.get('id') %>">Voice</a>
<a href="show/<%= post.get('id') %>">Comment</a>
<a href="report/post/<%= post.get('id') %>">Report</a>
</center></span></td></tr>

<% end %> 
```

和 peche 的 css：

```
.peche{display:none;} 
```

为什么这个悬停事件不起作用？上面的生态模板是我的主干应用程序的一部分，而我正在使用的 js 文件只是在 javascripts/ 文件夹中。这不应该工作吗？我让它使用常规 html 而不是 .eco 在 JSFiddle 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:27:23.047

我不确定，因为我认为我没有看到您的所有代码，但是当使用主干时，您有模板，并且您也使用主干在视图上编写事件，在这种情况下，我不确定您是否是使用主干，因为它看起来像一个标准的导轨视图。

但是假设它是一个主干视图，并且您避免编写主干事件，而是必须为事件编写纯 jquery 代码，请使用 jQuery 的“实时”事件，以便生成的所有新动态视图将毫无问题地执行。

所以尝试将您的代码更新为类似

```
 $ ->
      $("#welcome").modal "show"
      $(".george").live "hover", ->
        $(".peche").fadeIn(1000).css("display","inline-block")
        $(".peche").fadeOut(300).css("display","none")
      $("#yes").live "click" ->
        $("#welcome").modal "hide"
        $("#prospective_user").modal "show"
      $("#no").live "click" ->
        $("#welcome").modal "hide"
        $("#returning_user").modal "show"
      $("#back").live "click" ->
        $("#prospective_user").modal "hide"
        $("#welcome").modal "show"
      $("#backto").live "click" ->
        $("#returning_user").modal "hide"
        $("#welcome").modal "show" 
```

# ruby - 屈服的论据

> ID：13716434
> 
> 赞同：0
> 
> 时间：2012-12-05T04:40:35.357
> 
> 标签：ruby

我试图了解 Ruby 中的产量。在 Gateway 类的 self.save 方法中，它有“yield gateway”。我知道当调用 yield 时 Person#save 的块被调用，但是“网关”在那个块中变成了什么？你能用这个代码示例解释一下吗

```
class Person
  attr_accessor :first_name, :last_name, :ssn
    def save
      Gateway.save do |persist|
       persist.subject = self
       persist.attributes = [:first_name, :last_name, :ssn]
       persist.to = 'http://www.example.com/person'
      end
   end
end

class Gateway
  attr_acessor :subject, :attributes, :to

  def self.save
    gateway = self.new
    yield gateway
    gateway.execute
  end

  def execute
    request = Net::HTTP::Post.new(url.path)
    attribute_hash = attributes.inject({}) do | result, attribute |
        result[attribute.to_s] = subject.send attribute
        result
      end
      request.set_form(attribute_hash)
      Net::HTTP.new(url.host, url.post).start { |http| http.request(request) }
   end

   def url
     URI.parse(to)
   end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:43:28.070

to 的参数`yield`将被解析为块的参数。因此，在您的示例中，将`gateway`值分配给`persist`块的参数。

# mysql - 如何将 Btree 或哈希索引添加到 mysql 中的表中？

> ID：13716435
> 
> 赞同：4
> 
> 时间：2012-12-05T04:40:38.990
> 
> 标签：mysql, sql, mysql-workbench

我有两个表和这些表上的两个查询。我正在使用 SQL 工作台来查询这些表。有人能告诉我在这些表中添加 BTREE 或 HASH 索引的语法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T04:43:11.863

`CREATE INDEX`支持`USING BTREE`或`USING HASH`结束。

[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

# c++ - 多线程 UI 的最佳方式？

> ID：13716441
> 
> 赞同：4
> 
> 时间：2012-12-05T04:41:22.350
> 
> 标签：c++, qt

正如文档中明确指出的，Qt GUI 只能从主线程访问。对于具有多个大而繁忙的表的复杂应用程序，这可能是 Qt 喜欢做的所有字体大小文本度量计算的瓶颈。我能想到的唯一选择是使用单独的进程进行多任务处理。这些表目前与您获得的速度一样快，自定义模型直接映射到缓存，该缓存使用最保守的更改单元集上的 dataChanged() 调用从另一个线程提供。我已经使用 vTune 进行了分析，现在 70% 的应用时间都在 Qt 渲染代码中。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:01:52.737

我没有使用过 QT，但是在我熟悉的几乎所有 GUI 中，仅从一个线程（GUI 线程）访问 GUI 是一个已知问题。在这种情况下，我使用了 2 种解决方案，其中我更喜欢第一种：

1）您的表单将按时间间隔更新 GUI（在本例中为表格）。计时器在 GUI 线程的事件上被激活。在这些计时器事件中，您从全局变量中读取数据并更新您的表。全局变量可以由任意数量的线程更新。您可能需要同步（例如信号量）对全局变量的访问。

2) 在许多 GUI API 中，线程可以通过将函数（或对象）交给 GUI 线程并要求它在其上下文中尽快执行来更新 GUI。调用线程同时阻塞，直到 GUI 完成操作。我可以回忆起三个这样的函数——`Invoke`来自`InvokeLater`Java 和 C#，或者`wx.CallAfter`来自 wxPython。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T20:50:29.087

使用 MVC 模式的变体并使模型多线程

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T07:33:11.613

如果您的表格条目和方法分几个步骤完成，您可以调用 **QCoreApplication::processEvents()**在计算之间更新 qt ui。您可以做的另一件事是在不同的线程上运行所有内容，并在计算完成时从线程发出信号。最后，更新是从主线程在 ui 上完成的，但是是异步的。要连接到来自不同线程的信号，您必须使用**qRegisterMetaType<>**。

# php - 提交表单后如何在字段中保留输入以供进一步更新

> ID：13716443
> 
> 赞同：4
> 
> 时间：2012-12-05T04:41:30.783
> 
> 标签：php, html

我想知道是否可以在提交表单后将用户输入保留在表单字段中，以便用户可以更新条目。我有一个 html 注册表单 [带有一些 JS 验证]，然后是一个 php 文件，用于将数据插入到 sql 中，同时在表格视图中显示插入的数据。我还在 php 文件中包含表单的 html 代码，这样我可以在提交后看到表单。但是提交表单后我无法将数据保留在字段中！这是表格：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript">
            <!--
            function validateNum(evt) {
                        var theEvent = evt;
                        var key = theEvent.keyCode || theEvent.which;
                        key = String.fromCharCode( key );
                        var regex = /[0-9]/;

                        if( !regex.test(key) ) {
                            theEvent.returnValue = false;
                            if(theEvent.preventDefault) theEvent.preventDefault();
                        }
                    }       
            function validate(evt){

                if( document.myForm.ic.value == ""){
                    alert( "IC Number cann't be empty!" );
                    document.myForm.ic.focus() ;
                    return false;}
                else if(isNaN( document.myForm.ic.value ) || document.myForm.ic.value.length != 12){
                    evt.preventDefault();

                    alert( "Please provide your correct IC Number!" );
                    document.myForm.ic.focus() ;
                    return false;}
                if( document.myForm.name.value == "") {

                    alert( "Name cann't be empty!" );
                    document.myForm.name.focus() ;
                    return false;
                } 

                if( document.myForm.contact.value == ""){

                    alert( "Contact number cann't be empty!");
                    document.myForm.contact.focus() ;
                    return false;
                    } else if(isNaN( document.myForm.contact.value )) 
                    {
                    evt.preventDefault();

                    alert( "Please provide your correct Contact Number!" );
                    document.myForm.contact.focus() ;
                    return false;

                }
                 if( document.myForm.address.value == "" ){
                    alert( "Please provide your Address!" );
                    document.myForm.address.focus() ;
                    return false;
                }
            }

            //-->
        </script>
    </head>
    <style type="text/css">
        h2 {
            color: #06C;
        }
        body {
            background-color: #FFC;
        }
    </style>

    <body>
        <form name="myForm" method="post" action="insert.php" onsubmit="return(validate(event));">
            <div align="center"><br>
                    <table width="453" border="0">
                        <tr>
                            <th colspan="4" bgcolor="#99FFFF" scope="col">
                                <h3>Workshop Name: PHP! </h3></th>
                        </tr>
                        <tr bgcolor="#99FF99">
                            <td width="142"> IC Number</td>
                            <td width="15"><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="ic" type="text" id="ic" maxlength="12" size="45" onkeypress='validateNum(event)'/>
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FFFF">
                            <td>Full Name</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="name" type="text" id="name" size="45"/>
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FF99">
                            <td>Contact No.</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="contact" type="text" id="contact" size="45" onkeypress='validateNum(event)' />
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FFFF">
                            <td>Email</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="mail" type="text" id="mail" size="45"/>
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FF99">
                            <td height="60">Address</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2">
                                <div align="right">
                                    <textarea name="address" id="address" cols="35" rows="3"></textarea>
                                </div>
                            </td>
                        </tr>
                        <tr bgcolor="#99FFFF">
                            <td colspan="2">&nbsp;</td>
                            <td width="231"><input type="reset" value="Clear" /></td>
                            <td width="47"><div align="right">
                                    <input type="submit" value="Submit" />
                                </div></td>
                        </tr>
                    </table>

                    <br>
                        </div>
                        </form>
                     </body>
                 </html> 
```

这是 insert.php 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript">
            <!--
            function validateNum(evt) {
                        var theEvent = evt;
                        var key = theEvent.keyCode || theEvent.which;
                        key = String.fromCharCode( key );
                        var regex = /[0-9]/;

                        if( !regex.test(key) ) {
                            theEvent.returnValue = false;
                            if(theEvent.preventDefault) theEvent.preventDefault();
                        }
                    }       
            function validate(evt){

                if( document.myForm.ic.value == ""){
                    alert( "IC Number cann't be empty!" );
                    document.myForm.ic.focus() ;
                    return false;}
                else if(isNaN( document.myForm.ic.value ) || document.myForm.ic.value.length != 12){
                    evt.preventDefault();

                    alert( "Please provide your correct IC Number!" );
                    document.myForm.ic.focus() ;
                    return false;}
                if( document.myForm.name.value == "") {

                    alert( "Name cann't be empty!" );
                    document.myForm.name.focus() ;
                    return false;
                } 

                if( document.myForm.contact.value == ""){

                    alert( "Contact number cann't be empty!");
                    document.myForm.contact.focus() ;
                    return false;
                    } else if(isNaN( document.myForm.contact.value )) 
                    {
                    evt.preventDefault();

                    alert( "Please provide your correct Contact Number!" );
                    document.myForm.contact.focus() ;
                    return false;

                }
                 if( document.myForm.address.value == "" ){
                    alert( "Please provide your Address!" );
                    document.myForm.address.focus() ;
                    return false;
                }
            }

            //-->
        </script>
    </head>
    <style type="text/css">
        h2 {
            color: #06C;
        }
        body {
            background-color: #FFC;
        }
    </style>

    <body>
        <form name="myForm" method="post" action="update.php" onsubmit="return(validate(event));">
            <div align="center"><br>
                    <table width="453" border="0">
                        <tr>
                            <th colspan="4" bgcolor="#99FFFF" scope="col">
                                <h3>Workshop Name: PHP! </h3></th>
                        </tr>
                        <tr bgcolor="#99FF99">
                            <td width="142"> IC Number</td>
                            <td width="15"><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="ic" type="text" id="ic" maxlength="12" size="45" onkeypress='validateNum(event)'/>
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FFFF">
                            <td>Full Name</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="name" type="text" id="name" size="45"/>
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FF99">
                            <td>Contact No.</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="contact" type="text" id="contact" size="45" onkeypress='validateNum(event)' />
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FFFF">
                            <td>Email</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2"><div align="right">
                                    <input
                                        name="mail" type="text" id="mail" size="45"/>
                                </div></td>
                        </tr>
                        <tr bgcolor="#99FF99">
                            <td height="60">Address</td>
                            <td><div align="center">:</div></td>
                            <td colspan="2">
                                <div align="right">
                                    <textarea name="address" id="address" cols="35" rows="3"></textarea>
                                </div>
                            </td>
                        </tr>
                        <tr bgcolor="#99FFFF">
                            <td colspan="2">&nbsp;</td>
                            <td width="231"><input type="reset" value="Clear" /></td>
                            <td width="47"><div align="right">
                                    <input type="submit" value="Update" />
                                </div></td>
                        </tr>
                    </table>

                    <br>
                        </div>
                        </form>

                    <br>
                        </div>
                        </form>

                        <div align="center">
                          <?php
                        if (!mysql_connect('localhost', 'root', '')) {

                            echo "Connected";
                        }

                        mysql_select_db("workshop");

// Get values from form
                        $ic = mysql_real_escape_string($_POST['ic']);
                        $name = mysql_real_escape_string($_POST['name']);
                        $contact = mysql_real_escape_string($_POST['contact']);
                        $mail = mysql_real_escape_string($_POST['mail']);
                        $address = mysql_real_escape_string($_POST['address']);

                        if (staff_detail_exist($ic) == "available") {

                            insert_staff_detail($ic, $name, $contact, $mail, $address, $paytype);
                            echo "<p style='text-align:center; color:green;'>" . "Workshop application successful! You will be notified shortly via E-mail after confirmation! Thank You!";
                        } else if (staff_detail_exist($ic) == "exist") {

                            echo "<p style='text-align:center; color:red;'>" . "Record already exists! Please enter another Staff ID. Thank You!" . "</p>";
                        }

                        function insert_staff_detail($ic, $name, $contact, $mail, $address, $paytype) {

                            $sql = "INSERT INTO apply (staffid, staffname, staffno, staffemail, staffaddress, paytype) VALUES ('$ic', '$name', '$contact', '$mail', '$address','$paytype')";
                            mysql_query($sql);
                        }

                        function staff_detail_exist($ic) {

                            $result = null;
                            $sql = "SELECT * FROM apply WHERE staffid = '$ic'";
                            $data = mysql_query($sql);

                            if (mysql_num_rows($data) == 0) {

                                $result = "available";
                            } else {

                                $result = "exist";
                            }

                            return $result;
                        }

                $staffid = $_POST['ic'];

                $con = mysql_connect("localhost", "root", "");
                if (!$con) {
                    die('Could not connect: ' . mysql_error());
                }

                mysql_select_db("workshop", $con);
                $result = mysql_query("SELECT * FROM apply where staffid = '$ic'");

                echo "<table width=400 border=1 cellpadding=0 align=center>";

                while ($row = mysql_fetch_array($result)) {
                    echo "<tr>";
                    echo "<th>Staff/IC Number: </th><td>" . "<center>" . $row['staffid'] . "</center>" . "</td>";
                    echo "</tr>";
                    echo "<th>Name: </th><td>" . "<center>" . $row['staffname'] . "</center>" . "</td>";
                    echo "</tr>";
                    echo "<th>Email: </th><td>" . "<center>" . $row['staffemail'] . "</center>" . "</td>";
                    echo "</tr>";
                    echo "<th>Contact No.: </th><td>" . "<center>" . $row['staffno'] . "</center>" . "</td>";
                    echo "</tr>";
                    echo "<th>Address: </th><td>" . "<center>" . $row['staffaddress'] . "</center>" . "</td>";
                    echo "</tr>";
                }
                echo "</table>";

                mysql_close($con);
 ?>
                    </body>
                </html> 
```

我试图`value="<? echo "$row['staffid']"?>"`在 php 文件的表单字段中添加 like 但没有运气！我只有基本的php。那么，有什么帮助吗？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:15:12.600

谢谢大家，它终于工作了:) 我`value="<?php echo isset($_POST['myField']) ? $_POST['myField'] : 'myField_db' ?>"`在输入标签中使用过。所以，它就像：输入名称`<input type="text" name="myField" value="<?php echo isset($_POST['myField']) ? $_POST['myField'] : 'myField_db' ?>" />`在哪里&是数据库中的列名。`myField``myField_db`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:05:23.177

```
Take the form posted values just above your html code like this
<?php
    if (isset($_POST["submit"]) && $_POST["submit"]=='Submit') {
        $name=$_POST["name"];
    }
?>

And echo it in your html form.
 <input name="name" type="text" id="name" size="45" value="<? echo $name?>"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T05:18:50.340

这个功能我用过几次；很方便

```
function getPost($field){
   return (isset($_POST[$field]) && $_POST[$field] != "" ? $_POST[$field] : "");
} 
```

用法

```
<input type="text" name="contact" value="<?php echo getPost("contact"); ?>" /> 
```

这适用于用户提交信息并由于某种原因再次发送回表单的情况 - 例如，他们的条目可能没有通过 PHP 验证。

# go - Golang冲突的命令行标志

> ID：13716444
> 
> 赞同：11
> 
> 时间：2012-12-05T04:41:39.573
> 
> 标签：go

我在使用[gocheck](http://labix.org/gocheck)运行测试时遇到问题。我需要向它传递一个标志来指定要运行的测试，例如`go test -gocheck.f ApiSuite.TestSomeFunction`.

我的测试文件导入了一个设置包，其中有一个`init()`指定自己的标志和调用的函数`flag.parseFlags()`。我遇到的问题是这似乎覆盖了 gocheck 标志，所以我收到一个错误，即标志 -gocheck.f 无法识别。

注意：不确定这是否相关，但它只发生在我的一些包中而不是其他包中。我认为这只是基于 go 决定导入包的顺序，但我想我会提到它以防万一。

有没有其他人遇到过这个问题？有没有一种简单的方法可以让所有标志组合起来而不会被破坏，或者让 gocheck 标志优先于我的自定义标志？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T06:58:22.803

如果多个包调用 flag.Parse 而不担心其他包定义其他标志，那么你就有麻烦了（正如你已经经历过的那样）。“标志”包的状态是一个全局状态，所以它或多或少是相同的，就好像不同的包会在初始化期间竞争将全局变量的值设置为不同的值。显然，这可能不会很好地结束。

防止这种情况的简单方法：`flag.Parse`应该只调用一次（在第一个近似值中）。这就是为什么它通常只出现在包“main”中的原因。如果您的非主包调用`flag.Parse`，那么它通常会与`flag.Parse`包“主”中的任何调用冲突。请注意，`go test`合成 a`package main`是为了测试包，并从合成的“主”包`flag.Parse` *中调用。*

另一方面，仅在非主包中定义标志并依赖`flag.Parse`将在包“main”中调用更“安全”（但无论如何都可能发生冲突）。在非主包中，可以使用[flag.Parsed()](http://golang.org/pkg/flag/#Parsed)`flag.Parse`验证是否已被调用。

上面写的*是*简化的。有关其他选项，请查看包标志[文档](http://golang.org/pkg/flag/)。在某些情况下，可以通过例如使用[flag.Flagset](http://golang.org/pkg/flag/#FlagSet)来获得更多“权力” ，即通过使用*本地*状态作为包内的标志选项。

但是，我个人不喜欢以任何方式在包“main”之外使用包“标志”，而是通过其 API 设置任何可配置的包行为。但是，确实存在例外，例如在 *_test 文件或其他特殊情况中。

# c# - C# mysql 示例 Command.ExecuteReader 抛出异常

> ID：13716450
> 
> 赞同：3
> 
> 时间：2012-12-05T04:42:06.947
> 
> 标签：c#, mysql

我正在编写一段 C# 代码来从 mysql 数据库中获取一些数据。我从现成的例子开始，但它给了我一个错误`rdr = cmd.ExecuteReader()`

下面还显示了引发异常的屏幕截图

![抛出异常截图](../Images/3813f34b5ef541e48d47bc889d41db3f.png)

```
using System;
using MySql.Data.MySqlClient; 

public class Program
{

    static void Main() 
    {
            string serverName = "192.168.0.012";
            string port = "1234";
            string db = "cust_db";
            string userID = "root";
            string password = "pass";
            string cs = "Server=" + serverName + ";Port=" + port + ";Database=" + db + ";Uid=" + userID + ";password=" + password;

        MySqlConnection conn = null;
        MySqlDataReader rdr = null;

        try 
        {
            conn = new MySqlConnection(cs);
            conn.Open();

            string stm = "SELECT * FROM cust_tb";
            MySqlCommand cmd = new MySqlCommand(stm, conn);
            rdr = cmd.ExecuteReader();

            while (rdr.Read()) 
            {
                Console.WriteLine(rdr.GetInt32(0) + ": " 
                    + rdr.GetString(1));
            }

        } catch (MySqlException ex) 
        {
            Console.WriteLine("Error: {0}",  ex.ToString());

        } finally 
        {
            if (rdr != null) 
            {
                rdr.Close();
            }

            if (conn != null) 
            {
                conn.Close();
            }

        }
    }
}

at MySql.Data.MySqlClient.CharSetMap.GetChararcterSet(DBVersion version, String CharSetName)
   at MySql.Data.MySqlClient.NativeDriver.GetFieldMetaData41()
   at MySql.Data.MySqlClient.NativeDriver.GetFieldMetaData()
   at MySql.Data.MySqlClient.NativeDriver.ReadColumnMetadata(Int32 count)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at Program.Main() in c:\Users\omran.alhammadi\Desktop\csMysqlConnection\csMysqlConnection\Program.cs:line 28
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</StackTrace><ExceptionString>System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at MySql.Data.MySqlClient.CharSetMap.GetChararcterSet(DBVersion version, String CharSetName)
   at MySql.Data.MySqlClient.NativeDriver.GetFieldMetaData41()
   at MySql.Data.MySqlClient.NativeDriver.GetFieldMetaData()
   at MySql.Data.MySqlClient.NativeDriver.ReadColumnMetadata(Int32 count)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at Program.Main() in c:\Users\omran.alhammadi\Desktop\csMysqlConnection\csMysqlConnection\Program.cs:line 28
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</ExceptionString></Exception></TraceRecord>
An unhandled exception of type 'System.Collections.Generic.KeyNotFoundException' occurred in mscorlib.dll
Additional information: The given key was not present in the dictionary.
The program '[17084] csMysqlConnection.vshost.exe: Managed (v4.0.30319)' has exited with code -1 (0xffffffff). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T00:37:19.840

我一直有这个问题，我做了一些研究。过了一会儿，我刚刚解决了这个问题。

我的问题是数据库表编码。我有`utf32_unicode_ci`，我把它改成了`utf8_unicode_ci`。它现在完美运行。

希望你有一些运气。

# oracle-adf - 在片段加载时调用函数

> ID：13716451
> 
> 赞同：0
> 
> 时间：2012-12-05T04:42:10.117
> 
> 标签：oracle-adf

我有一个带表格的片段。该表的值来自 bean 中的一个列表。我需要在加载片段时填写列表。

正如我在这里看到的那样，我试图这样做： [https](https://kr.forums.oracle.com/forums/thread.jspa?threadID=2386966) ://kr.forums.oracle.com/forums/thread.jspa?threadID=2386966 但我看到它正在加载列表，然后bean的构造函数是再次调用，因此列表获得了一个新实例，实际上它又是空的。

你知道为什么会这样吗？或者在加载片段时是否有任何其他方法可以在 bean 中填充列表？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:33:54.127

您需要更改 bean 的范围。我建议先尝试“查看范围”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:41:23.840

您可以将任务流的默认入口点设置为初始化 pageflowscope 托管 bean 中的列表的方法调用。然后，您应该能够在流程中的所有页面中引用该列表。

# java - JButton 没有做它应该做的事情

> ID：13716461
> 
> 赞同：3
> 
> 时间：2012-12-05T04:43:12.587
> 
> 标签：java, swing, jpanel, jbutton, jlabel

我是一名java初学者，我尝试制作一个基本程序，将删除Windows临时文件中的某个文件。当我没有实现 JPanel 和 JFrame 时，它​​确实毫无问题地删除了文件，但从那以后我没有任何运气。应该在按下“确定删除”jbutton 时删除文件，并在按下“exit”jbutton 时退出程序。它现在所做的只是调出 GUI，仅此而已。甚至没有系统输出打印。这是代码：

```
import javax.swing.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.File;
import java.io.IOException;

    /**
    * Created with IntelliJ IDEA.
    * User: Andrew
    * Date: 12/4/12
    * Time: 7:09 PM
    * To change this template use File | Settings | File Templates.
    */

    public class DeleteFile {

    public static void main (String args[]) throws IOException {
        frame.setVisible(true);
        frame.setName(boxname);
        frame.setSize(100, 150);
        frame.addWindowListener(new WindowAdapter() {

            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        button1.setText(buttontext);
        button1.setVisible(true);
        button1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

            }
        });
        class Action1 implements ActionListener {
            public void actionPerformed (ActionEvent e) {
                deleteFile();
                JLabel label = new JLabel("Deletion was successful");
                JPanel panel = new JPanel();
                panel.add(label);
            }
        }
        class Action2 implements ActionListener {
            public void actionPerformed (ActionEvent e) {

            }
            public void windowEvent (WindowEvent e) {
                System.exit(0);
            }
        }

        JPanel panel = new JPanel();
        frame.add(panel);
        JButton button = new JButton("Delete for sure?");
        panel.add(button);
        button.addActionListener (new Action1());
        panel.setName(boxname);

        JButton button2 = new JButton("Exit");
        panel.add(button2);
        button2.addActionListener (new Action2());

       // JLabel label = new JLabel(filePath);
       // panel.add(label);

    }

    static String buttontext = "Delete file for sure?";
    static String boxname = "Trepix Temp File Deleter";
    static String filePath = "C:\\Users\\Andrew\\AppData\\Local\\Temp\\CamRec0\\cursor-1.ico";
    static JFrame frame = new JFrame();
    static JButton button1 = new JButton();
    static JPanel panel = new JPanel();

    public static boolean fileIsValid() {
        File file = new File(filePath);

        if (file.exists()) {
            return true;

        } else {
            return false;
        }

    }

    public static void deleteFile() {
        if (fileIsValid() == true) {
            File file = new File(filePath);
            file.delete();

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:47:37.127

```
 class Action1 implements ActionListener {
        public void actionPerformed (ActionEvent e) {
            deleteFile();
            JLabel label = new JLabel("Deletion was successful");
            JPanel panel = new JPanel();
            panel.add(label);
        }
    } 
```

面板对象永远不会放置在任何容器中，该容器是通向顶级窗口的层次结构的一部分。换句话说，它没有放置在 JFrame 或 JDialog 中的任何内容中，因此它永远不会显示。

```
 class Action2 implements ActionListener {
        public void actionPerformed (ActionEvent e) {

        }
        public void windowEvent (WindowEvent e) {
            System.exit(0);
        }
    } 
```

将此 windowEvent 方法放在 ActionListener 中是没有意义的，因为它是 WindowListener 的一部分，完全不同。为什么不简单地调用`System.exit(0);`方法`actionPerformed(...)`呢？

此外，您的代码不应该有任何静态字段或方法，因为这与面向对象编程是对立的。

# ruby-on-rails - 如果在控制器生成期间跳过，如何在 RoR 中创建视图

> ID：13716466
> 
> 赞同：0
> 
> 时间：2012-12-05T04:43:50.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

1.  当我运行这个：

    ```
    rails generate controller hello index 
    ```

    毫无疑问，它会生成 hello 控制器，但是当我运行另一个这样的命令时不小心：

    ```
    rails generate controller world 
    ```

    它成功创建了世界控制器，但错过了`Route "world/index"`“hello/index”之类的东西。对于这个错误，我需要使用`destroy controller`然后再次生成它，这是一种中间命令，如果忘记了某些东西，我可以生成它，而不是每次都破坏和创建。

2.  这个命令

    ```
    rails generate controller contact-us index 
    ```

    在更改 config 文件夹下的 routes.rb时`contact_us/index`或之后创建路由。`contact_us`如何在 RoR 中创建对 SEO 更友好的 URL？喜欢`localhost:3000/contact-us`？

3.  我正在制定一些非常基本的规则来遵循 RoR..like 3 个静态页面（主页、关于我们、联系我们）只是简单的 html 内容以了解更多信息，当然也会为其添加更多功能。

    ```
    localhost:3000/home
    localhost:3000/About_us
    localhost:3000/contact_us 
    ```

    我通过创建 home、About_us、contact_us 控制器命令创建了它，然后在视图中更改了 html。由于我处于初始阶段，因此我在某处阅读了静态页面，我们可以在公众中创建它，就像文件夹中有错误页面一样，或者我使用的方法是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:56:41.950

当您使用 Rails 生成器时，它将为其创建控制器和视图文件夹

```
rails generate controller test 
```

将创建 test_controller.rb 和 view/test 文件夹 rails generate controller test index 将创建 test_controller.rb 和 view/test/index.html.erb 文件以及为你定义一个路由

然而，听起来你想要做的是拥有带有静态页面的单个控制器，我建议你做的是生成带有 home、aboutus 和联系操作的 home_controller，然后像这样将路由映射到它们

```
rails generate controller home 
```

控制器/home.rb

```
HomeController < ApplicationController
  def index
  end
  def about_us
  end
  def contact
  end
end 
```

路线.rb

```
match '/home', :to => 'home#index'
match '/About_us', :to => 'home#about_us'
match '/Contact_us' , :to=> 'home#contact_us' 
```

而不是定义你的观点

```
views/home/index.html.erb
views/home/about_us.html.erb
views/home/contact_us.html.erb 
```

# facebook - 我应该对用户隐藏 fb:app_id 吗？

> ID：13716484
> 
> 赞同：1
> 
> 时间：2012-12-05T04:45:57.427
> 
> 标签：facebook, app-id

我最近在我的 ios 应用程序中实现了新的开放图 3.x。太棒了，多么大的升级。我唯一担心的是，现在当用户点击 facebook 上的帖子时，他们可以看到包含我的 fb:app_id 的图形对象 URL (og:url)。

例如：http://www.myhostingwebsite.com/mygraphobject.php?fb%3Aapp_id%[My Facebook app id]%26og%253A [... URL 的其余部分 ..]

这是正常的吗？还是我做错了什么？如果用户有这个 id，会有什么危害吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:29:59.897

这个是正常的。您需要应用程序机密才能像您的应用程序一样做任何事情，所以只要您保守秘密，一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:28:02.990

*   取决于你，app_id 可以显示也可以不显示
*   但app secret不能，它可以让其他人用于其他目的

*   并小心访问令牌

# matlab - 如何在 Matlab 中通过 MSER 和 HOG 执行匹配

> ID：13716485
> 
> 赞同：4
> 
> 时间：2012-12-05T04:46:00.423
> 
> 标签：matlab, matching, matlab-cvst, mser

我想知道MSER和HOG在Matlab中是否有完整的图像匹配实现。目前我正在使用[VLFeat](http://www.vlfeat.org/overview/mser.html)，但在执行图像匹配时发现困难。有什么帮助吗？

顺便说一句，我在 VLFeat -Matlab 环境中尝试了以下代码，但不幸的是无法执行匹配。

```
%Matlab code
%
pfx = fullfile(vl_root,'figures','demo') ;
randn('state',0) ;
rand('state',0) ;
figure(1) ; clf ;

Ia = imread(fullfile(vl_root,'data','roofs1.jpg')) ;
Ib = imread(fullfile(vl_root,'data','roofs2.jpg')) ;

Ia = uint8(rgb2gray(Ia)) ;
Ib = uint8(rgb2gray(Ib)) ;

[ra,fa] = vl_mser(I,'MinDiversity',0.7,'MaxVariation',0.2,'Delta',10) ;
[rb,fb] = vl_mser(I,'MinDiversity',0.7,'MaxVariation',0.2,'Delta',10) ;

[matches, scores] = vl_ubcmatch(fa, fb);

figure(1) ; clf ;
imagesc(cat(2, Ia, Ib));
axis image off ;
vl_demo_print('mser_match_1', 1);

figure(2) ; clf ;
imagesc(cat(2, Ia, Ib));

xa = ra(1, matches(1,:));
xb = rb(1, matches(2,:)) + size(Ia,2);
ya = ra(2, matches(1,:));
yb = rb(2,matches(2,:));

hold on ;
h = line([xa ; xb], [ya ; yb]);
set(h, 'linewidth', 1, 'color', 'b');

vl_plotframe(ra(:,matches(1,:)));
rb(1,:) = fb(1,:) + size(Ia,2);
vl_plotframe(rb(:,mathces(2,:)));
axis image off ;

vl_demo_print('mser_match_2', 1);

%%%%%% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:30:07.127

有几个问题。首先，代码有几个错误并且不能按原样运行。我在下面粘贴了我的工作版本。

更重要的是，您正在尝试使用 SIFT 特征匹配函数来匹配 MSER 椭球。这根本行不通，因为 SIFT 基于局部图像梯度给出了一个非常高维的特征向量，而 MSER 检测器只是给你一个边界椭球。

VLFeat 似乎不包含 MSER 匹配函数，因此您可能必须自己编写。查看原始 MSER 论文以了解他们是如何进行匹配的：

[“来自最大稳定极值区域的稳健宽基线立体声”，Matas 等人。2002年](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.7.2484&rep=rep1&type=pdf)

```
% Read the input images
Ia = imread(fullfile(vl_root,'data','roofs1.jpg')) ;
Ib = imread(fullfile(vl_root,'data','roofs2.jpg')) ;

% Convert to grayscale
Ia = uint8(rgb2gray(Ia)) ;
Ib = uint8(rgb2gray(Ib)) ;

% Find MSERs
[ra,fa] = vl_mser(Ia, 'MinDiversity',0.7,'MaxVariation',0.2,'Delta',10) ;
[rb,fb] = vl_mser(Ib, 'MinDiversity',0.7,'MaxVariation',0.2,'Delta',10) ;

% Match MSERs
[matches, scores] = vl_ubcmatch(fa, fb);

% Display the original input images
figure(1); clf;
imagesc(cat(2, Ia, Ib));
axis image off;
colormap gray;

% Display a second copy with the matches overlaid
figure(2) ; clf ;
imagesc(cat(2, Ia, Ib));
axis image off;
colormap gray;

xa = fa(1, matches(1,:));
ya = fa(2, matches(1,:));
xb = fb(1, matches(2,:)) + size(Ia,2);
yb = fb(2, matches(2,:));

hold on ;
h = line([xa ; xb], [ya ; yb]);
set(h, 'linewidth', 1, 'color', 'y'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T16:48:03.157

我不知道如何，但 MSER 匹配在 Matlab 本身中有效。

下面的代码

```
file1 = 'roofs1.jpg';
file2 = 'roofs2.jpg';

I1 = imread(file1);
I2 = imread(file2);

I1 = rgb2gray(I1);
I2 = rgb2gray(I2);

% %Find the SURF features.
% points1 = detectSURFFeatures(I1);
% points2 = detectSURFFeatures(I2); 

points1 = detectMSERFeatures(I1);
points2 = detectMSERFeatures(I2); 

%Extract the features.
[f1, vpts1] = extractFeatures(I1, points1);
[f2, vpts2] = extractFeatures(I2, points2);

%Retrieve the locations of matched points. The SURF featurevectors are already normalized.
indexPairs = matchFeatures(f1, f2, 'Prenormalized', true) ;
matched_pts1 = vpts1(indexPairs(:, 1));
matched_pts2 = vpts2(indexPairs(:, 2));

figure; showMatchedFeatures(I1,I2,matched_pts1,matched_pts2,'montage');
legend('matched points 1','matched points 2'); 
```

给出以下图片

![在此处输入图像描述](../Images/61a9f6b79c2549be89dacd952d678451.png)

# php - 动态电子邮件模板到不同的电子邮件客户端 - PHP

> ID：13716487
> 
> 赞同：1
> 
> 时间：2012-12-05T04:46:12.840
> 
> 标签：php, email, email-client

我一直在寻找答案，但我找不到一个直接的答案。

我正在为一个用 PHP 构建的 Web 应用程序开发一个新闻信函模块。应用程序向用户发送大量电子邮件。我需要一种方法来根据设备/客户端用户用于阅读电子邮件的方式发送不同的电子邮件模板。尤其是移动客户端。

至少我想区分桌面版和移动版。有没有办法解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:48:32.643

是不可能的。据我所知，您甚至无法使用 javascript 来检测客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:49:50.703

总之没有。HTML 电子邮件由电子邮件提供商本身处理。Gmail（例如）作为提供商将向最终用户显示内容，而不管您使用的是什么设备。

也就是说，如果您将模板设计得足够好以被认为是“响应式”，那么您可以通过自动缩小表格来欺骗您的想法。

此外，出于安全原因，没有电子邮件提供商允许在模板中使用 javascript，而且很少有电子邮件提供商允许完整的 CSS 规则并且只支持基本的 CSS 2。

# c# - 移动窗口的进度条

> ID：13716498
> 
> 赞同：-1
> 
> 时间：2012-12-05T04:47:43.200
> 
> 标签：c#, windows-mobile, compact-framework

我试图在我的应用程序中放置进度条，而不是等待光标。

但直到现在还没有成功。

在互联网上有这么多的解决方案，但都是针对 Windows 应用程序的，因为我在紧凑的框架上工作，大多数事件都不适用于它。

有没有办法为窗口移动应用程序使用进度条或任何自定义进度条。

这可能从 try 块开始并在 final 块结束......

任何一段代码或建议都非常适用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:43:11.413

终于明白了……：）

访问[http://www.codeproject.com/Articles/21302/Custom-ProgressBar-for-NET-Compact-Framework](http://www.codeproject.com/Articles/21302/Custom-ProgressBar-for-NET-Compact-Framework)

如果发现任何问题，我可以帮助解决它....

# java - 仿制药双重标准

> ID：13716499
> 
> 赞同：0
> 
> 时间：2012-12-05T04:47:43.480
> 
> 标签：java, generics

```
public class Boxcar<S extends Things> {
public ArrayList<S> contents = new ArrayList<S>(); //an arraylist of things

public static void main(String [] args){
    Boxcar test = new Boxcar();
    test.addContents(new Person("239-235-2535", "Ronald", 36)); //works 100%
}

public Boxcar(Things type, int maxElements){
    this.type = type;
    boxcarId = boxcarIdCount;
    boxcarIdCount++;
    this.maxElements = maxElements;
}

public void addContents(S thing) {
    contents.add(thing);
  }
...

}//end boxcar class

public class Person implements Things {
int age;
String govtId, name;

public Person(String govtId, String name, int age){
    this.govtId = govtId;
    this.name = name;
    this.age = age;
}//end Consrtructor

public void load(ArrayList<Boxcar<?>> train){
    Person dude = new Person("239-235-235", "Ronald", 36);
    train.get(i).addContents(dude); // won't compile
}
...
}//end Person class

public interface Things {

public void load(ArrayList<Boxcar<?>> train, String [] params);

}//end interface Things

public class Train {
ArrayList<Boxcar<?>> train = new ArrayList<Boxcar<?>>(); 

    public void load(Things thing, String [] params){
    thing.load(train, params);
}
...
} 
```

在上面的代码中，方法 addContents 在 Boxcar 类中执行时似乎工作正常。但是，当从 Person 类以完全相同的方式调用时，它的行为会有所不同。

这是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:54:55.450

它无法编译的原因是`train`参数是`Boxcar`未知*类型*的列表。实际上，这意味着您`contents`在其中包含未定义类型的列表，并且您试图将 a`Person`放入其中，这不是类型安全的操作。想象一下，如果您按如下方式执行 load 方法会发生什么：

```
person.load(new ArrayList<Boxcar<Integer>>()); 
```

要修复它，您应该修复方法的签名，如下所示：

```
public void load(ArrayList<Boxcar<? super Things>> train){
...
} 
```

此外，您应该避免将泛型与原始类型混合，就像您在 main 方法中所做的那样。代替：

```
Boxcar test = new Boxcar(); 
```

你应该使用：

```
Boxcar<Things> test = new Boxcar<Things>(); 
```

否则，即使代码编译（带有警告），它也可能在运行时因类转换异常而失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:08:39.033

在您的情况下， Java 编译器不允许访问未绑定参数化类型的引用上的方法`Boxcar<?>`，因为该类型是未知的。

您应该改为定义通配符的边界并按如下方式使用它：

```
public void load(ArrayList<Boxcar<? super Things>> train)
{
    Person dude = new Person("239-235-235", "Ronald", 36);
    train.get(0).addContents(dude); 
} 
```

# android - 触摸屏灵敏度

> ID：13716506
> 
> 赞同：2
> 
> 时间：2012-12-05T04:48:39.400
> 
> 标签：android

我正在尝试制作一个仅适用于**平板电脑**的 android 应用程序，它将在用户触摸屏幕的位置和位置绘制线条。它非常简单，并且有更多这样的应用程序。我对触摸屏技术有疑问。是否有可能如果用户轻触屏幕**，**线条会变钝，如果用户**用力**触摸屏幕，则绘制的线条会更粗？甚至有可能在平板电脑上做这样的事情吗？我没有关于平板电脑中使用的硬件和技术的信息，请用有效的答案指导我，并请我参考任何关于触摸感应技术的博客或文档。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:00:40.887

您可以使用触摸屏幕时触发的 OnTouch() 输入事件 (http://developer.android.com/guide/topics/ui/ui-events.html)。因此，在应用程序的 VIEW 中，您应该使用 setOnTouchListener ( [setOnTouchListener](http://developer.android.com/reference/android/view/View.html#setOnTouchListener%28android.view.View.OnTouchListener%29) ) 注册一个 OnTouchListener，并回调处理事件的函数。

在您的回调中获取压力属性：

> 公共浮动压力
> 
> 在 API 级别 9 中添加了一个标准化值，用于描述手指或其他工具施加到设备上的压力。压力的范围通常从 0（完全没有压力）到 1（正常压力），但根据输入设备的校准，可能会生成高于 1 的值。

[http://developer.android.com/reference/android/view/MotionEvent.PointerCoords.html#pressure](http://developer.android.com/reference/android/view/MotionEvent.PointerCoords.html#pressure)

当你触摸屏幕时，你会得到一个 MotionEvent，它有很多方法，其中一种给你压力

[http://developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html)

> 最终浮动 getPressure() getPressure(int)
> 
> 最终浮点 getPressure(int pointerIndex)

# android - 如何在 Web 视图中显示地图视图

> ID：13716507
> 
> 赞同：0
> 
> 时间：2012-12-05T04:48:45.547
> 
> 标签：android, jquery, jquery-mobile, android-mapview, android-webview

对于我的 Android 应用程序，我正在使用 maps forge 获取地图，但地图位于“地图视图”中。对于页眉和页脚设计，我使用的是 jquery。这是在“网络视图”中。所以请帮助我如何在网络视图中添加这个地图视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:53:31.383

检查这个

```
 private WebView _webView;

    _webView = (WebView)_yourrelativelayourSrc.findViewById(R.id.layout_webview);

    _webView.getSettings().setJavaScriptEnabled(true);
    _webView.getSettings().setBuiltInZoomControls(true);
    _webView.getSettings().setSupportZoom(true);

    _webView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) {
            // Activities and WebViews measure progress with different scales.
            // The progress meter will automatically disappear when we reach 100%
            ((Activity) activity).setProgress(progress * 1000);
        }

    });

    // to handle its own URL requests :
    _webView.setWebViewClient(new MyWebViewClient());
    _webView.loadUrl("http://maps.google.com/maps?q=Pizza,texas&ui=maps"); 
```

# php - ajax成功后jQuery删除tr

> ID：13716511
> 
> 赞同：1
> 
> 时间：2012-12-05T04:49:09.647
> 
> 标签：php, jquery

我试图在成功调用 ajax 后删除表行，但它不起作用。firebug 没有错误，它删除后端 PHP 上的行，只是不删除 tr。这是我的代码：

```
function closelead(rowid){
            var rowid = rowid;

            $.ajax({
                type: "POST",
                url: "ajax/close.php",
                data: "rowid="+ rowid,

                success: function(html){

                    $(this).closest('tr').remove();
                }
            });

            } 
```

和html：

```
<table  id="companytable">
        <tr id="top"><th>Business Name</th><th>Phone</th><th>Carrier</th><th>X-Date</th><th></th><th></th><th></th></tr>
        <?php
        $query =   "SELECT * FROM leads WHERE user = '$user' ORDER BY wccompcode";
         $selectlead = mysql_query($query)or die(mysql_error());
         while($leadlist = mysql_fetch_array($selectlead)){
            $compcode = $leadlist['wccompcode'];
            $compcode = sprintf("%03s", $compcode);
            $selcomp = mysql_query("SELECT carname FROM carrierlist WHERE carcode = '$compcode'")or die(mysql_error());

            while($carrier = mysql_fetch_array($selcomp)){
                $carrier1 = $carrier['carname'];
            }
            ?>
            <tr id="<?php echo $leadlist['ID'];?>"><td id="busname"><?php echo $leadlist['busname'];?></td><td><?php echo $leadlist['phone'];?></td><td><?php echo $carrier1;?></td><td><?php echo date("m/d/Y",strtotime($leadlist['wcxdate']));?></td><td><input type="button" value="Call Back" class="searchbutton" /></td><td><input type="button" onclick="closelead(<?php echo $leadlist['ID'];?>)" value="Close" class="searchbutton" /></td><td><input type="button" value="Soft Quote" class="searchbutton" /></td></tr>
            <?
         }
        ?>
        </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:52:47.573

尝试

```
function closelead(rowid){
    var rowid = rowid;                
    $.ajax({
        type: "POST",
        url: "ajax/close.php",
        data: "rowid="+ rowid,                    
        success: function(html){                        
            $('#'+rowid).remove();
        }
    });                 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T12:51:47.340

```
function closelead(rowid){
            var rowid = rowid;

            $.ajax({
                type: "POST",
                url: "ajax/close.php",
                data: "rowid="+ rowid,

                success: function(html){

                    $('#'+rowid).closest('tr').remove();
                }
            });

            } 
```

# python - 试图通过部分的列表工作

> ID：13716515
> 
> 赞同：0
> 
> 时间：2012-12-05T04:49:46.927
> 
> 标签：python

我有一个按列表的第二个值（组）排序的列表列表。我现在需要遍历这个以一次处理每个“组”。数据是`[name, group, data1, data2, data3, data4].` 我不确定我是否需要一段时间或其他类型的循环，或者也许`groupby`但我从未使用过。任何帮助，将不胜感激。

```
for i in range (int(max_group)):
    x1 = []
    x2 = []
    x3 = []
    x4 = []
    if data[i][1] == i+1:
        x1.append(data[2])
        x2.append(data[3])
        x3.append(data[4])
        x4.append(data[5])
        print x1
        print 'next' # these are just to test where we're at 
```

所有 x 都应该包含所有第 1 组信息的所有第 3-5 列数据（在名称和组号之后）。然后我可以使用第 1 组信息并转到第 2 组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:01:05.457

```
for i in sorted(set(group[1] for group in data)):
    x1, x2, x3, x4 = zip(*(group[2:] for group in data if group[1] == i)) 
```

*注意：这个解决方案效率很低，我会在一分钟内带来一个更高效的解决方案！*

```
groups = {}
for d in data:
    try:
        groups[d[1]].append(d[2:])
    except AttributeError:
        groups[d[1]] = d[2:]

for i in sorted(j for j in groups):
    x1, x2, x3, x4 = zip(*groups[i]) 
```

*这只是稍微不那么难看，但应该可以工作*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:05:39.793

假设列表中的列表是

```
mylist = [[name],[add],[data1],[data2]] 
```

要遍历列表中的每个列表，您应该尝试以下代码：

```
for each_list in mylist:
    if isinstance(each_list,list):
         #do something with that list inside list 
```

抱歉，如果此答案与您的问题不符。

# android - 从字符串解析 JSON 数组

> ID：13716517
> 
> 赞同：1
> 
> 时间：2012-12-05T04:49:50.250
> 
> 标签：android, json

有人可以给我解析一个 json 数组的 json

```
 line = "contexts": [
    {
        "uuid": "6686feaa-a254-42ec-a662-c36f70f7a586",
        "name": "School",
    },
    {
        "uuid": "bd8e6c44-d461-4bbe-8946-a3717dc7fa7f",
        "name": "Teaching",
    }] 
```

我需要将 uuid 和名称放入字符串数组。我试过

```
String[] x = new String[10];
String[] y = new String[10];
JSONArray jArray = new JSONArray(line);
for(int i=0;i<jArray.length();i++){          
    JSONObject json_data = jArray.getJSONObject(i);
    x = json_data.getString("name");
y = json_data.getString("uuid");            
        } 
```

运行此程序时出现类型不匹配错误。行的类型是我从服务器返回的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:54:07.407

用于`i`向数组添加元素：

```
String[] x = new String[10];
String[] y = new String[10];
JSONObject json=new JSONObject(line);
JSONArray jArray =json.getJSONArray("contexts");

for(int i=0;i<jArray.length();i++){          
    JSONObject json_data = jArray.getJSONObject(i);
    x[i] = json_data.getString("name");
    y[i] = json_data.getString("uuid");            
        } 
```

您可以使用[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)来检查 json 是否有效。并使用`ArrayList`而不是`Array`从 Web 服务动态获取项目

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T04:53:44.280

它既不是 JSONObject 也不是 JSONArray，从服务器返回字符串，如下所示：

```
line = {"contexts": [
    {
        "uuid": "6686feaa-a254-42ec-a662-c36f70f7a586",
        "name": "School",
    },
    {
        "uuid": "bd8e6c44-d461-4bbe-8946-a3717dc7fa7f",
        "name": "Teaching",
    }]} 
```

然后解析如下代码：

```
JSONObject json=new JSONObject(line);
JSONArray jArray =json.getJSONArray("contexts"); 
```

# r - 尝试使用 R 找到唯一值

> ID：13716518
> 
> 赞同：-1
> 
> 时间：2012-12-05T04:49:52.043
> 
> 标签：r

我搜索了论坛，找不到任何对我有用的东西。我在这里有一个独特的数据集，我记录了我一天中每个小时所做的事情，我现在只想找到所有独特的条目。例如，有 'sleep' 条目，'homework'，'dinner'，所有这些都跨越了一百多天，我只想找到我当时做过的所有可能的事情，所有唯一的条目。

我已经尝试过 unique(data)，它没有让我到任何地方，并且我尝试过 unique(data[, 1])。如果我编写一个“for”循环来做到这一点，我该如何合并列表，并进一步降低它们的唯一性？

```
> data[, 1]
 [1] morning prep  work          work          work          work         
 [6] work          work          work          work          homework     
[11] MNT           chat with Dan dinner        movie         movie        
[16] sleep         sleep         sleep         sleep         sleep        
[21] sleep         sleep         sleep         sleep                      
Levels:  chat with Dan dinner homework MNT morning prep movie sleep work 
```

它的等级是一个“因素”。Unique 很好地减少了它，但是我如何将所有的日子组合成一个长字符向量，我可以用它来做我的分析，例如......

```
sum(data=='sleep') 
```

但是通过我的列表，我将能够编写另一个“for”循环并轻松总结所有内容......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:07:32.170

我有一种感觉，您只是在寻找`table`功能。抽出您的“独特”因素并一次性计算频率：

```
myHomework <- data.frame(StuffIDid = c("morning prep", "work", "work", "work", 
                                       "work", "work", "work", "work", "work", 
                                       "homework", "MNT", "chat with Dan", 
                                       "dinner", "movie", "movie", "sleep", 
                                       "sleep", "sleep", "sleep", "sleep", 
                                       "sleep", "sleep", "sleep", "sleep"))
str(myHomework)
# 'data.frame':    24 obs. of  1 variable:
#  $ StuffIDid: Factor w/ 8 levels "chat with Dan",..: 5 8 8 8 8 8 8 8 8 3 ...
table(myHomework[, "StuffIDid"])
# 
# chat with Dan        dinner      homework           MNT  morning prep         movie 
#             1             1             1             1             1             2 
#         sleep          work 
#             9             8 
```

或者，作为`data.frame`：

```
data.frame(table(myHomework[, "StuffIDid"]))
#            Var1 Freq
# 1 chat with Dan    1
# 2        dinner    1
# 3      homework    1
# 4           MNT    1
# 5  morning prep    1
# 6         movie    2
# 7         sleep    9
# 8          work    8 
```

# java - mvn maven 错误：无法找到或加载主类#

> ID：13716522
> 
> 赞同：1
> 
> 时间：2012-12-05T04:50:34.153
> 
> 标签：java, maven

Maven 出现以下错误：

```
/home/user# mvn
Error: Could not find or load main class # 
```

我已经升级到jdk7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:50:34.153

Maven opts="xxx 缺少关闭引号。

# perl - 使用 perl 和 Google 的 Geocode API 获取地址的纬度和经度

> ID：13716524
> 
> 赞同：3
> 
> 时间：2012-12-05T04:50:48.117
> 
> 标签：perl, geocoding, google-geocoder, google-geocoding-api

在 Perl 中，如何从任意地址获取 lat 和 long？可以使用外部 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:50:48.117

这是一个快速的 perl 函数，用于获取任意地址的纬度和经度。它使用来自 CPAN 的 LWP::Simple 和 JSON 以及 Google 的 Geocode API。如果你想要完整的数据，你可以使用 json 或 xml，这个使用 json 并且只获取并返回 lat 和 long。

```
use strict;
use LWP::Simple; # from CPAN
use JSON qw( decode_json ); # from CPAN

sub getLatLong($){
  my ($address) = @_;

  my $format = "json"; #can also to 'xml'

  my $geocodeapi = "https://maps.googleapis.com/maps/api/geocode/";

  my $url = $geocodeapi . $format . "?sensor=false&address=" . $address;

  my $json = get($url);

  my $d_json = decode_json( $json );

  my $lat = $d_json->{results}->[0]->{geometry}->{location}->{lat};
  my $lng = $d_json->{results}->[0]->{geometry}->{location}->{lng};

  return ($lat, $lng);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:30:32.527

您可以使用 Geo::Coder::Many 来比较不同的服务，以找到认为最准确的服务。我在农村和城市地址的混合使用它（美国）很幸运。

```
use Geo::Coder::Bing;
use Geo::Coder::Googlev3;
use Geo::Coder::Mapquest;
use Geo::Coder::OSM;
use Geo::Coder::Many;
use Geo::Coder::Many::Util qw( country_filter );

### Geo::Coder::Many object
my $geocoder_many = Geo::Coder::Many->new( );

$geocoder_many->add_geocoder({ geocoder => Geo::Coder::Googlev3->new });
$geocoder_many->add_geocoder({ geocoder => Geo::Coder::Bing->new( key => 'GET ONE' )});
$geocoder_many->add_geocoder({ geocoder => Geo::Coder::Mapquest->new( apikey => 'GET ONE' )});
$geocoder_many->add_geocoder({ geocoder => Geo::Coder::OSM->new( sources => 'mapquest' )});

$geocoder_many->set_filter_callback(country_filter('United States'));
$geocoder_many->set_picker_callback('max_precision');

for my $location (@locations) {
  my $result = $geocoder_many->geocode({ location => $location });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:41:24.800

Google Geocoding API 有一个包装模块[Geo::Coder::Google](https://metacpan.org/module/Geo%3a%3aCoder%3a%3aGoogle)：

```
#!/usr/bin/env perl
use strict;
use utf8;
use warnings qw(all);

use Data::Printer;
use Geo::Coder::Google;

my $geocoder = Geo::Coder::Google->new(apiver => 3);
my $location = $geocoder->geocode(location => 'Hollywood and Highland, Los Angeles, CA');

p $location->{geometry}{location}; 
```

此代码打印：

```
\ {
    lat   34.101545,
    lng   -118.3386871
} 
```

通常最好使用现成的 CPAN 模块，因为它由[CPAN Testers](http://www.cpantesters.org/distro/G/Geo-Coder-Google.html)服务支持，因此，如果 API 发生故障，很容易发现和报告。

# jquery - jQuery 仅在登录 WP 时有效

> ID：13716536
> 
> 赞同：0
> 
> 时间：2012-12-05T04:51:57.957
> 
> 标签：jquery, wordpress

出于某种原因，我的 jQuery 脚本似乎只在我登录 WordPress 时才加载。这是页面： [http ://www.mcfaddengavender.net/newmg/](http://www.mcfaddengavender.net/newmg/)

如您所见，图像没有“滑入”。但是，如果我登录并返回主页，一切正常。这是我用来在 Functions.php 中运行 jQuery 的代码：

```
//jQuery - Use Google CDN instead of WP jQuery
function my_scripts_method() {
if (!is_admin()) { 
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery',     'http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js');
    wp_enqueue_script( 'jquery' );
 }
}

add_action('init', 'my_scripts_method');
?> 
```

关于什么会导致这样一个奇怪的问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:27:45.337

你在错误的地方使用

```
add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

而不是“初始化”

# c - 邻接矩阵中的传递关系

> ID：13716540
> 
> 赞同：3
> 
> 时间：2012-12-05T04:52:42.617
> 
> 标签：c, algorithm, computation-theory, adjacency-matrix

我正在尝试确定两个元素之间的传递关系。我正在用 c 编码。

例如：a->b 由第 1 行第 2 列的邻接矩阵中的“1”表示。

所以如果 a->b 和 b-> c 和 c->d

我想确定是否 a->d。无需更新邻接矩阵。

我采用的方法：检查与 a 对应的行中的所有 1。假设第二列中有一个 1，即 b。[(a->b)] ，现在检查 b->d 是否继续检查 B 行中的所有 1 并继续到第 26 行。

我并不真正关心复杂性。我只是希望实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:57:43.063

您需要实现[*广度优先搜索*](http://en.wikipedia.org/wiki/Breadth-first_search)或[*深度优先搜索*](http://en.wikipedia.org/wiki/Depth-first_search)。从 开始，到达或用尽所有选项时`a`停止。`d`

在您的情况下，深度优先搜索更容易实现，因为“普通”C缺少广度优先搜索所需的内置动态队列。

如果您不关心效率并且不介意更新矩阵，请实现[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)：它是专门为邻接矩阵制定的，只需五行即可实现：

```
for (int k = 0 ; k != N ; k++)
    for (int i = 0 ; i != N ; i++)
        for (int j = 0 ; j != N ; j++)
            if (matrix[i][k] && matrix[k][j])
                matrix[i][j] = 1; 
```

运行此算法后，结果`matrix`包含原始算法的传递闭包。

# java - Java 中的 XML 到对象的转换以声明方式指定元素到类的映射

> ID：13716542
> 
> 赞同：1
> 
> 时间：2012-12-05T04:52:49.290
> 
> 标签：java, xml

我想将 XML 转换为 Java 对象。但我不希望在代码中硬编码 XML 标记和 Java 类之间的映射，例如使用 JAXB 注释或 XStream.alias() 方法。

我如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:29:19.457

然后您应该选择一个 XML 解析器并设计您自己的解组器。另一方面，JAXB 可以将 xml 解组为没有注释的 Java bean，请参阅此代码，它可以工作

```
public class Test {
    private String e1;

    public String getE1() {
        return e1;
    }

    public void setE1(String e1) {
        this.e1 = e1;
    }

    public static void main(String[] args) throws Exception {
        String xml = "<Test><e1>test</e1></Test>";
        Test t = JAXB.unmarshal(new StringReader(xml), Test.class);
        System.out.println(t.getE1());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:06:01.440

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

在 JAXB 的 EclipseLink MOXy 实现中，我们提供了一个外部映射文档，可以用作标准注释的替代方案。

**oxm.xml**

下面是一个示例映射文档。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="blog.bindingfile">
    <xml-schema
        namespace="http://www.example.com/customer"
        element-form-default="QUALIFIED"/>
    <java-types>
        <java-type name="Customer">
            <xml-root-element/>
            <xml-type prop-order="firstName lastName address phoneNumbers"/>
            <java-attributes>
                <xml-element java-attribute="firstName" name="first-name"/>
                <xml-element java-attribute="lastName" name="last-name"/>
                <xml-element java-attribute="phoneNumbers" name="phone-number"/>
            </java-attributes>
        </java-type>
        <java-type name="PhoneNumber">
            <java-attributes>
                <xml-attribute java-attribute="type"/>
                <xml-value java-attribute="number"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**演示**

下面是一个示例，说明如何在引导`JAXBContext`.

```
package blog.bindingfile;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "blog/bindingfile/binding.xml");
        JAXBContext jc = JAXBContext.newInstance("blog.bindingfile", Customer.class.getClassLoader() , properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Customer customer = (Customer) unmarshaller.unmarshal(new File("src/blog/bindingfile/input.xml"));

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)

# javascript - 从 javascript 中的 url 获取 JSON 数据

> ID：13716544
> 
> 赞同：-2
> 
> 时间：2012-12-05T04:52:51.963
> 
> 标签：javascript, facebook-javascript-sdk

我有一个链接，可以在其中获取 JSON 格式的数据。

样本数据：-

```
[{"Code":"1","Headline":"Rescale","SubHeadline":"bla bla bla","Author":"abc","StoryDateTime":"2012-1-1 12:12:12"}] 
```

现在我只想显示 10 条记录。当我在滚动时到达页面底部附近时，它会自动添加另外 10 条记录，总共 20 条消息。（如 facebook、twitter）并一次又一次地重复该过程，直到数据结束。

谁能帮我用jquery来做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:07:35.937

你正在寻找的是分页我认为......你需要在你的服务器端有一些机制来首先支持分页......单独的jQuery不会帮助你实现这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:27:15.163

好的，我想这就是你想要的

```
$.Ajax({

url: 'abcfdfds.com',
data: {p: 2},

success: function(response){//Iam assuming this response is an array
var i=0;
for(i in response){
$('div you want to append to').append('<div>' + response[i] + '</div>');

}

}

}) 
```

希望这会有所帮助

# javascript - 成功后如何删除元素类？

> ID：13716545
> 
> 赞同：2
> 
> 时间：2012-12-05T04:53:06.160
> 
> 标签：javascript, jquery, html, css

当用户单击与其图像关联的表单中的按钮时，我希望图像在成功时消失。我在执行此操作时遇到了麻烦。有什么建议吗？

```
 <script type="text/javascript">
   $(document).ready(function() {
       $(".removebutton").submit(function(event){

       event.preventDefault();
            $.ajax({
                 type:"POST",
                 url:"/munch_video/",
                 data: {
                        'video_id': $('.video_id', this).val(), // from form
                        'playlist': $('.playlist').val(), // from form
                        'add_remove': $('.add_remove').val(), // from form 
                        },
                 success: function(message){                         
                        alert(message);
                        $('.span8').removeClass('.video_id', this);

                    }
            });
            return false;
       });

    });
</script>

<div class = "span8" style = "width: 900px;">
<!-- wrapper div -->
    <div class='wrapper huluDotCom'>

    <!-- image -->
    <div class="image" style="position: relative; left: 0; top: 0;">

            <a href = "/partners/Business/huluDotCom">
                <img src = "/huluDotCom.png">
            </a>

        <!--  munchbutton div --> 
        <div class='munchbutton'>
            <form method='post' action = '/munch_video/ ' class = 'removebutton'><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='dKrS8NzqPWFLM6u8wJrAeid4nGw1avGK' /></div>
                <input type="hidden" value="Channel" class = "playlist"/>
                <input type="hidden" value="huluDotCom" class = "video_id"/>
                <input type="hidden" value="remove_video" class = "add_remove"/>

                <input type='submit' class="btn btn-danger" value='Remove from plate'/>
            </form>
        </div>
        <!-- end munchbutton div -->

    </div>
    <!-- end image div -->

    </div>
    <!-- end wrapper div -->

    <!-- wrapper div -->
    <div class='wrapper TheEllenShow'>

    <!-- image -->
    <div class="image" style="position: relative; left: 0; top: 0;">

            <a href = "/partners/Business/TheEllenShow">
                <img src = "/TheEllenShow.png">
            </a>

        <!--  munchbutton div --> 
        <div class='munchbutton'>
            <form method='post' action = '/munch_video/ ' class = 'removebutton'><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='dKrS8NzqPWFLM6u8wJrAeid4nGw1avGK' /></div>
                <input type="hidden" value="Channel" class = "playlist"/>
                <input type="hidden" value="TheEllenShow" class = "video_id"/>
                <input type="hidden" value="remove_video" class = "add_remove"/>

                <input type='submit' class="btn btn-danger" value='Remove from plate'/>
            </form>
        </div>
        <!-- end munchbutton div -->

    </div>
    <!-- end image div -->

    </div>
    <!-- end wrapper div -->

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:56:16.053

`$('.span8').removeClass('video_id')`类的参数中没有点

编辑：当你要求 img 从 div 中删除

```
$('.span8').find('img').remove() 
```

删除 div 中的所有图像，

```
$('.span8').find('img.video_id').remove() 
```

删除带有 video_id 类的 img，

如果你只想隐藏元素

```
$('.span8').find('.video_id').hide() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:36:27.887

首先你的位置`event.preventDefault();`因为它将停止停止默认执行​​。

所以它应该只是关于 return 声明。

其次，您不必添加任何其他参数，`removeClass`因此它会像

```
$this.closest('.image').remove(); 
```

`$this`保存的参考在哪里。如果`$(this)`

第三，我找不到任何具有类`span8`的元素，`video_id`所以你需要提供整个代码或再次重新检查所有元素。

最后，还要检查 php 代码是否给出正确的结果或发送任何错误

试试这个。

```
$(".removebutton").submit(function(event){
        var $this = $(this);
        $.ajax({
             type:"POST",
             url:"/munch_video/",
             data: {
                    'video_id': $('.video_id', this).val(), // from form
                    'playlist': $('.playlist').val(), // from form
                    'add_remove': $('.add_remove').val(), // from form 
                    },
             success: function(message){                         
                    alert(message);
                    $this.closest('.image').remove();

                }
        });
        event.preventDefault();
        return false;
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:58:03.377

我将从您的[.removeClass()](http://api.jquery.com/removeClass/)调用开始。它只需要一个参数，`this`就是被忽略。并且类名前面不需要句号。

```
//$('.span8').removeClass('.video_id', this);
$('.span8').removeClass('video_id'); 
```

**编辑：**听起来您可能需要进行遍历。我假设您在 a 中有一个按钮和一个图像`<div class="span8">`，如下所示

```
<div class="span8">
    <img src="cat.jpg" />
    <a href="#" class="removebutton">remove</a>
</div> 
```

然后你需要从你的目标移动到 div，然后向下钻取 img。

```
$(this).closest('.span8').find('img').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T04:58:39.837

removeClass 只需要类名，不需要在里面提供选择器元素

```
$('.span8').removeClass('video_id'); 
```

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T05:07:45.890

我不明白为什么图像会消失，因为它的显示没有任何改变。这个怎么样：

```
$('.span8').removeClass('video_id').addClass('goaway'); 
```

并添加CSS`.goaway { display:none; }`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T05:34:39.543

[removeClass()](http://api.jquery.com/removeClass/)采用类的名称，而不是类的选择器。换句话说，你想摆脱点。

```
$('.span8').removeClass('video_id'); 
```

# java - 使用 android TimerTask 和 Timer 防止最终用户操作计时器

> ID：13716546
> 
> 赞同：1
> 
> 时间：2012-12-05T04:53:25.997
> 
> 标签：java, android, timer, timertask

在没有用户操作日期和时间的情况下，如何确保应该在 android 操作系统上运行 x 时间的任务在该 x 周期内运行？例如，如果我想让这个计时器持续运行 24 小时，然后告诉用户 24 小时已经过去，即使手机关机一个小时，用户也会重新打开它并将系统时间向前设置 2 小时，该计时器仍会指示该固定的 24 小时时间段何时过去，而用户没有操纵系统日期/时间，也没有连接到 Internet 以验证适当的时间量已经过去。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:59:03.473

这是流程/算法。

```
1) You need to store time of timer first initiated some where, probably database and let timer run for 24 hours.
    a) assuming phone not turned off, timer continues
    b) Assuming phone turned off and turned on
        b1) Get initial timer started time from database, then calculate how much time left for 24 hours. 
        b2) Initiate timer again with left time. 
```

# asp.net-mvc - 与查询字符串参数无关的 ASP.NET MVC Web API 模型

> ID：13716552
> 
> 赞同：0
> 
> 时间：2012-12-05T04:53:54.737
> 
> 标签：asp.net-mvc, asp.net-web-api

我知道如何创建一个镜像查询字符串变量的模型类，这样当它进入我的 Web API 控制器操作时，模型就会被填充。

但是，有没有办法让我不会将查询字符串变量名锁定为模型类的属性？

例子：

```
public class MyModel {
    public string o {get;set;}
}

public class MyController {
    public string Get(MyModel model) {

    }
} 
```

然后，如果我的查询字符串如下所示： GET [http://domain.com/?o=12345](http://domain.com/?o=12345)

有没有办法将该模型属性命名为“Order”或其他名称而不是“o”，然后用“o=”中的值填充它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:21:09.477

您可以创建自定义模型绑定器，根据需要将数据绑定到模型。要使用它，您应该：

```
public string Get([ModelBinder(typeof(MyComplexTypeModelBinder))]MyModel model)
{
...
} 
```

要创建自定义模型绑定器，您可以从 IModelBinder 或 DefaultModelBinder 继承。

```
public class MyComplexTypeModelBinder : IModelBinder
{

  public Object BindModel(ControllerContext controllerContext,
                          ModelBindingContext bindingContext)
  {
     if (bindingContext == null)
         throw new ArgumentNullException("bindingContext");

     // Create the model instance (using the ctor you like best)
     var obj = new MyComplexType();

     // Set properties reading values from registered value providers
     obj.Order = FromPostedData<string>(bindingContext, "o");
     ...
     return obj;
}

private T FromPostedData<T>(ModelBindingContext context, String key)
{
   // Get the value from any of the input collections
   ValueProviderResult result;
   context.ValueProvider.TryGetValue(key, out result);

   // Set the state of the model property resulting from 
   context.ModelState.SetModelValue(key, result);
   // Return the value converted (if possible) to the target type
   return (T) result.ConvertTo(typeof(T));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:13:14.567

这种情况的解决方案是 custom `IValueProvider`。这个 ASP.NET MVC 扩展点是正确的地方，我们可以将`QueryString`键桥接到 Model.Property 名称中。与 相比`ModelBinder`，这将完全针对我们需要的内容*（虽然不会引入以后的问题，即使其他值提供者 (FORM) 意外包含该键......）*

有很好的教程如何介绍自定义`IValueProvider`：

*   [http://donovanbrown.com/post/How-to-create-a-custom-Value-Provider-for-MVC.aspx](http://donovanbrown.com/post/How-to-create-a-custom-Value-Provider-for-MVC.aspx)

还有一个简单的例子，它能够为模型“Order”属性提供值，作为 QueryString“o”键：

**工厂**

```
// Factory
public class MyValueProviderFactory : ValueProviderFactory
{
  public override IValueProvider GetValueProvider(ControllerContext ctx)
  {
    return new MyValueProvider(ctx);
  }
} 
```

**提供者**

```
// Provider
class MyValueProvider : IValueProvider
{
  protected HttpRequestBase Request { get; set; }    
  public MyValueProvider(ControllerContext ctx)
  {
    Request = ctx.HttpContext.Request;
  }

  // our custom logic to test QueryString keys, and expected prefixes
  public bool ContainsPrefix(string prefix)
  {
    var containsSpecial =
      "Order".Equals(prefix, StringComparison.OrdinalIgnoreCase)
      && Request.QueryString.AllKeys.Contains("o"
                    , StringComparer.InvariantCultureIgnoreCase);
    return containsSpecial;
  }

  // Handling "Order" key
  public ValueProviderResult GetValue(string key)
  {
    if (!ContainsPrefix(key))
    {
      return null;
    }
    var values = Request.QueryString.GetValues("o");

    if (values.Any())
    {
      return new ValueProviderResult(values, values.First()
                                    , CultureInfo.CurrentCulture);
    }
    return null;
  }
} 
```

在`global.asax`我们必须注入它：

```
protected void Application_Start()
{
  ValueProviderFactories.Factories.Add(new MyValueProviderFactory());
  ... 
```

# php - 选择性禁用 APC 缓存

> ID：13716553
> 
> 赞同：1
> 
> 时间：2012-12-05T04:54:02.350
> 
> 标签：php, wordpress, apc

我在我的 VPS 上安装了 APC，它与 W3 Cache wordpress 插件配合得很好。我的问题是 MySQL 中有一个数据库每隔几秒就会被客户端 ping 一次以查看是否有新的更新。这些数据库包含某些时间敏感信息，因此它不能成为缓存数据的一部分。

如何禁用此数据库/文件的 APC？或者我可以为某些类型的数据设置一个非常短的到期时间吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:58:27.517

APC 做了两件事。它提供 PHP 字节码的透明缓存，并且可以根据应用程序的请求缓存数据。

完全没有理由尝试禁用字节码缓存，但这似乎不是您在这里谈论的内容。字节码缓存只缓存字节码，而不是数据。

如果您使用的应用程序要求 APC 缓存某些数据，并且它不包含在 APC 已安装且可用时禁用此缓存的选项，则您将需要修改该应用程序。查找对代码的调用[`apc_store`](http://php.net/apc_store)并[`apc_fetch`](http://php.net/apc_fetch)根据需要更改代码。

正如评论中提到的，**您真正的问题可能与**您选择的 Wordpress 缓存插件有关，而不是 APC。APC 只存储数据。如果它不能为选定的页面禁用自身，您可能需要找到一个可以的解决方案，或者找到另一种方法来绕过它来获取您需要的数据。

# python - Python - 如何为列表生成分箱索引？

> ID：13716558
> 
> 赞同：1
> 
> 时间：2012-12-05T04:54:14.810
> 
> 标签：python, binning

我有 10 个垃圾箱：

```
 bins = [0,1,2,3,4,5,6,7,8,9] 
```

我有一个包含 25 个值的列表：

```
 values = [10,0,0,14,14,123,235,0,0,0,0,0,12,12,1235,23,234,15,15,23,136,34,34,37,45] 
```

我想将这些值按顺序放入 bin 中，以便将每个值分组到其 bin 中：

`binnedValues = [[10,0],[0,14,14],[123,235],[0,0,0],[0,0],[12,12,1235],[23,234],[15,15,23],[136,34,34],[37,45]]`

如您所见，bin 中的值的数量并不总是相同的，（如`len(values) != len(bins)`）

另外，我有很多不同大小的值列表。所以我需要对相同数量的 bin 执行此操作多次，但值列表长度不同。上面是一个例子——真实的 bin 大小是 10k，真实的 len(values) 是从 ~10k 到 ~750k..

有没有办法始终如一地做到这一点？我需要保持值的顺序，但平均拆分值列表，以便分配到每个箱的值范围的“公平”和“偶数”数量。

我想我可以使用 numpy.digitize，但是看过之后，我看不到如何生成“binned”列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:02:54.037

您是否尝试将列表拆分为 2 到 3 个元素之间交替大小的列表？那这是可行的。

```
from itertools import cycle

values = [10,0,0,14,14,123,235,0,0,0,0,0,12,12,1235,23,234,15,15,23,136,34,34,37,45]
splits = cycle([2,3])
bins = []
count = 0

while count < len(values):
    splitby = splits.next()
    bins.append(values[count:count+splitby])
    count += splitby

print bins 
```

**编辑：**

啊，我明白你在要求什么......有点。更像是：

从 itertools 导入周期从数学导入地板，ceil

```
values = [10,0,0,14,14,123,235,0,0,0,0,0,12,12,1235,23,234,15,15,23,136,34,34,37,45]
number_bins = 10
bins_lower = int(floor(len(values) / float(number_bins)))
bins_upper = int(ceil(len(values) / float(number_bins)))

splits = cycle([bins_lower, bins_upper])
bins = []
count = 0

while count < len(values):
    splitby = splits.next()
    bins.append(values[count:count+splitby])
    count += splitby

print bins 
```

如果您想要更多种类的 bin 大小，可以添加更多数字`splits`

**编辑2：**

Ashwin 的方式，更简洁，但更难理解。

```
from itertools import cycle, islice
from math import floor, ceil

values = [10,0,0,14,14,123,235,0,0,0,0,0,12,12,1235,23,234,15,15,23,136,34,34,37,45]
number_bins = 10
bins_lower = int(floor(len(values) / float(number_bins)))
bins_upper = int(ceil(len(values) / float(number_bins)))

splits = cycle([bins_lower, bins_upper])

it = iter(values)
bins = [list(islice(it,next(splits))) for _ in range(10)] 
print bins 
```

# css - 响应式布局中的 Twitter 引导最小宽度

> ID：13716562
> 
> 赞同：11
> 
> 时间：2012-12-05T04:55:04.853
> 
> 标签：css, twitter-bootstrap

有没有办法告诉引导程序在分辨率小于时不缩小元素：

```
/* Portrait tablet to landscape and desktop */.
@media (min-width: 768px) and (max-width: 979px) { ... } 
```

我想支持大型台式机和平板电脑屏幕，但在该分辨率以下没有响应。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T04:45:52.013

添加 min-width 属性不会阻止网格系统混乱，因为在调整大小时类 span1-12 仍然会变小！

一个选项是访问[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)并在响应部分取消选中“Narrow tablet and below (<767px)”，然后下载您的自定义引导程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:07:45.243

可以在bootstrap.css中去掉手机屏幕的媒体查询代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-08T18:44:27.010

我做了两个步骤

1.  设置较少的变量`@screen-sm-min: 10px`。这将停止所有引导程序的媒体查询

2.  并设置`min-width`为顶部元素。

为我工作

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-05T04:57:12.017

[`min-width`](https://developer.mozilla.org/en-US/docs/CSS/min-width)您可以在所有不希望缩小的元素上添加 css 属性。

# appfabric - AppFabric 区域和本地缓存

> ID：13716565
> 
> 赞同：1
> 
> 时间：2012-12-05T04:55:47.023
> 
> 标签：appfabric, appfabric-cache

(1) 我想知道我是否在我的 AppFabric 缓存中使用了区域，这些区域是否可以存在于本地缓存中？还是区域只存在于集群上？

(2) 作为一个单独的问题，我如何判断我的数据是来自集群还是来自本地缓存？是否有某种 AppFabric 工具可用于分析数据的来源？

我正在使用代码中的配置来设置我的本地缓存属性，以将我的项目放入本地缓存中，就像这样

```
localCacheConfig = new DataCacheLocalCacheProperties(10000, localTimeout, DataCacheLocalCacheInvalidationPolicy.TimeoutBased);

// Setup the DataCacheFactory configuration.
DataCacheFactoryConfiguration factoryConfig = new DataCacheFactoryConfiguration();
factoryConfig.Servers = servers;
factoryConfig.LocalCacheProperties = localCacheConfig;

//code to put items in cache....etc 
```

我是否需要在“获取”上做任何特别的事情，或者它是否足够聪明，可以从本地缓存中获取它（如果它存在的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:01:01.703

Region 是 AppFabric 中的一个逻辑概念。它将允许您按标签查询项目，但项目将仅存储在一个主机中（有限分布和高可用性）。

本地缓存不绑定到区域。它只是您对缓存集群的最新调用的本地副本。本地缓存在客户端启用，这意味着您可以根据需要避免它。

本地缓存中对象的生命周期取决于几个因素，例如本地缓存中的最大对象数和失效策略（超时或通知）。

您无法知道数据是来自本地缓存还是分布式缓存。这就是为什么推荐使用本地缓存作为参考数据的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T12:20:54.327

1.Regions在本地缓存中不存在，Regions只针对缓存集群。

2.您可以通过在Appfabric powershell控制台中执行以下命令来获取特定命名缓存的统计信息，

```
get-cachestatistics <CacheName> 
```

它为您提供了一个具有**ReadRequestCount**的结果集，如果请求进入本地缓存，则此计数不会因特定请求而增加。

通过这种方式，您可以检查本地缓存是否正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:13:31.980

区域不能存在于本地缓存中，它们只存在于集群的缓存中。

因为本地缓存是可选的，所以客户端代码应该完全不知道缓存项是来自集群还是来自本地缓存。为了实现这一点，当请求的项目在本地缓存中时，它将从那里返回（避免对集群的跨服务器调用）。

# javascript - jquery从表单数据创建数组

> ID：13716572
> 
> 赞同：0
> 
> 时间：2012-12-05T04:56:30.873
> 
> 标签：javascript, jquery, ajax, arrays, multidimensional-array

我已经为这个问题苦苦挣扎了几个小时了。

本质上，我需要做的是采用以下或类似的 HTML：

```
<div id="excpdivs">
<div class="excpdiv" id="excpdiv0">
      Date: <input name="excp[0][date]">
      Open:  <input name="excp[0][open]">
      Close: <input name="excp[0][close]">
</div>
<div class="excpdiv" id="expdiv1">
      Date: <input name="excp[1][date]">
      Open:  <input name="excp[1][open]">
      Close: <input name="excp[1][close]">
</div> 
```

并通过 AJAX 将类似于以下内容的数组获取到 php 脚本中：

```
 Array
(
    [0] => Array
        (
            [date] => 2012-09-15
            [open] => 3:00
            [close] => 5:00
        )
   [1] => Array
        (
            [date] => 2012-09-16
            [open] => 2:00
            [close] => 5:00
        )

) 
```

我的主要问题是从输入元素中获取值。我最近的尝试如下：

```
 var results = [];
$(".excpdiv").each(function(){
    var item = {};
    var inpts = $(this).find("input");
    item.date = $(inpts.get(0)).val();
    item.open = $(inpts.get(1)).val();
    item.close = $(inpts.get(2)).val();
    results.push(item);
}); 
```

我是在正确的轨道上还是我绝望地迷失了方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T09:59:58.663

也许是一个简单的序列化。

来自：api.jquery.com/jQuery.post/

```
Example: Send form data using ajax requests

$.post("test.php", $("#testform").serialize()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:02:28.403

我认为你应该这样做

```
var results = [];
$(".excpdiv").each(function(){
    var item = {};
    var inpts = $(this).find("input");
    item.date = $(inpts)[0].val();
    item.open = $(inpts)[1].val();
    item.close = $(inpts)[2].val();
    results.push(item);
}); 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:02:29.970

您不需要 jquery，您拥有的 HTML 标记将为 php.ini 提供一个数组。将输入包含在发布到 php 脚本以处理逻辑的表单中。然后，您可以通过以下方式访问您的信息：

```
$_POST['excp'][0]['date'] 
```

# javascript - 当 Ajax 调用时，对 key=value 被每个符号代码分割

> ID：13716574
> 
> 赞同：1
> 
> 时间：2012-12-05T04:56:40.827
> 
> 标签：javascript, jquery, ajax, fullcalendar

无法理解为什么我的 key=value 对转换为符号，并且在我的 ajax GET 调用中我有：

```
GET /admin_schedule/get_schedule_db/?0=%5B&1=o&2=b&3=j&4=e&5=c&6=t&7=+&8=O&9=b&10=j&11=e&12=c&13=t&14=%5D&15=%22&16=%26&17=t&18=e&19=a&20=c 
```

代替：

```
GET /admin_schedule/get_schedule_db/?teacherArray[]=128&teacherArray[]=134... 
```

我的代码：

```
var eventss = ''; 
$("input[type='checkbox'][name='teacher']").each( function() { 
    if(this.checked) {
        eventss += "&teacherArray[]=" + $(this).attr("value");
    }
});
events1.data += eventss; 
```

全日历事件源的 ajax：

```
var events1 = {
    url: '/admin_schedule/get_schedule_db/',
    type: 'GET',
    data: {sch_teacher_id: (sch_teacher_id) ? sch_teacher_id : $('.teacher').val() },
    success: function (response) {
        return response;
    }
}; 
```

然后获取带有事件的完整日历

```
eventSources: [ 
            events1,
            events2,
            events3 
        ], 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:16:18.613

将字符串与对象连接几乎从来都不是一个好主意，因为`Object#toString`总是返回`"[object Object]"`。除非您`toString`在对象中覆盖，否则对象在连接之前被转换为字符串作为此字符串（意味着其内容丢失）。此外，结果字符串不是有效的查询字符串。

代替

```
eventss += "&teacherArray[]=" + $(this).attr("value");
...
events1.data += eventss; 
```

尝试创建一个空`teacherArray`的`data`和

```
events1.data.teacherArray.push($(this).attr("value")); 
```

也考虑使用[`$("#my-form").serialize()`](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:34:59.977

I solved this problem! (thx Jan Dvorak for your comments!).

1\. variable now is an array:

```
var sch_teacher_id = new Array("<?php echo $sch_teacher_id; ?>"); 
```

2\. empty the array each time before loop:

```
$('.teacher').change(function (event) {
    **events1.data.sch_teacher_id = [];
    events2.data.sch_teacher_id = [];
    events3.data.sch_teacher_id = [];**

    if($(this).val()) { 

        $("input[type='checkbox'][name='teacher']").each( function() {  
            if(this.checked) {                          
                events1.data.sch_teacher_id.push($(this).attr("value"));     
                events2.data.sch_teacher_id.push($(this).attr("value"));          
                events3.data.sch_teacher_id.push($(this).attr("value"));
            }   
        });  

    }
    $calendar.fullCalendar('refetchEvents');
}); 
```

# memory - 在 valgrind 中将堆摘要写入文件

> ID：13716577
> 
> 赞同：0
> 
> 时间：2012-12-05T04:57:10.147
> 
> 标签：memory, valgrind

我正在使用 valgrind 的 memcheck 来监控我的程序。生成的堆摘要的大小至少可以复制。

如何将堆摘要内容复制到 Valgrind 中的文件中。

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:19:40.307

Valgrind 有多种方式来重定向其输出。

1.  到文件 valgrind --log-file=valgrind.out --leak-check=full yourapp

2.  到任何文件描述符。valgrind --log-fd=123 --leak-check=full yourapp 123>valgrind.out

3.  到 ipaddr/port nr valgrind --log-socket=

您还可以使用 --log-socket=ipaddr:port 将 valgrind 输出重定向到 ipaddr/port nr（然后必须在此端口上启动 valgrind-listener）。

# html - Rails - 为什么 HAML 显示完整的哈希？

> ID：13716583
> 
> 赞同：1
> 
> 时间：2012-12-05T04:57:28.517
> 
> 标签：html, ruby, ruby-on-rails-3, haml

看法：

```
!!!
%html
  %head
    %title= full_title(yield(:title))
    =stylesheet_link_tag    "application", media: "all"
    =javascript_include_tag "application"
    =csrf_meta_tags
    =render 'layouts/shim'
  %body
    =render 'layouts/header'
    .container
      =flash.each do |key, value|
        %div{class: "alert alert-#{key}"} #{value} 
```

控制器

```
def create
  @user = User.new(params[:user])
  if @user.save
    flash[:success] = "This is Correct"
    redirect_to @user
  else
    flash[:wrong] = "no"
    render 'new'
  end
end 
```

无论闪存如何（:success 或 :wrong 或其他）它总是将整个哈希编译为 html（如下）

输出：

```
<!DOCTYPE html>
…
    <div class='container'>
            <div class='alert alert-wrong'>no</div>
{:wrong=&gt;&quot;no&quot;}
    </div>
  </body>
</html> 
```

我不知道为什么`{:wrong=&gt;&quot;no&quot;}`会显示。我已经盯着这个终端看了好几个小时了。有趣的是，哈希是与`container`id 一起输出的，但不是在`alert`类中。感觉就像一个缩进问题，但我经历了几次排列都没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:01:21.493

调用块时需要使用 a`-`而不是 a ：`=``each`

```
-flash.each do |key, value|
  %div{class: "alert alert-#{key}"} #{value} 
```

从[文档](http://haml.info/docs/yardoc/)：

> 也可以将 Ruby 代码嵌入到 Haml 文档中。等号 = 将输出代码的结果。连字符 - 将运行代码但不输出结果。

所以你看到哈希是因为`=`会输出`each`块的结果（哈希本身，即`{:wrong=>"no"}`）。

# jpa - 如何从 JPA 标准中的时间戳列中按日期查找？

> ID：13716586
> 
> 赞同：3
> 
> 时间：2012-12-05T04:57:43.400
> 
> 标签：jpa, jpa-2.0, criteria-api

我想按日期查找记录。在实体和数据库表中，数据类型是时间戳。我使用Oracle数据库。

```
@Entity
public class Request implements Serializable {
  @Id
  private String id;
  @Version
  private long version;
  @Temporal(TemporalType.TIMESTAMP)
  @Column(name = "CREATION_DATE")
  private Date creationDate;

  public Request() {
  }

  public Request(String id, Date creationDate) {
    setId(id);
    setCreationDate(creationDate);
  }

  public String getId() {
    return id;
  }

  public void setId(String id) {
    this.id = id;
  }

  public long getVersion() {
    return version;
  }

  public void setVersion(long version) {
    this.version = version;
  }

  public Date getCreationDate() {
    return creationDate;
  }

  public void setCreationDate(Date creationDate) {
    this.creationDate = creationDate;
  }
} 
```

用勉法

```
public static void main(String[] args) {
    RequestTestCase requestTestCase = new RequestTestCase();
    EntityManager em = Persistence.createEntityManagerFactory("Criteria").createEntityManager();

    em.getTransaction().begin();
    em.persist(new Request("005",new Date()));
    em.getTransaction().commit();

    Query q = em.createQuery("SELECT r FROM Request r WHERE r.creationDate = :creationDate",Request.class);
    q.setParameter("creationDate",new GregorianCalendar(2012,12,5).getTime());
    Request r = (Request)q.getSingleResult();
    System.out.println(r.getCreationDate());        

} 
```

在 Oracle 数据库记录中，

```
ID      CREATION_DATE                   VERSION

006     05-DEC-12 05.34.39.200000 PM    1 
```

例外是，

```
Exception in thread "main" javax.persistence.NoResultException: getSingleResult() did     not retrieve any entities.
at    org.eclipse.persistence.internal.jpa.EJBQueryImpl.throwNoResultException(EJBQueryImpl.java:1246)
at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:750)
at com.ktrsn.RequestTestCase.main(RequestTestCase.java:29) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:16:17.640

DB 类型 is`TIMESTAMP`和 not `DATE`，这意味着您存储确切的时间。

使用时`new GregorianCalendar(2012,12,5).getTime()`，您正在查询与 00:00:00.000 处的给定日期匹配且数据库中不存在的时间戳

您应该更改数据库以存储日期而不是时间戳或更改您的查询。

JPA 2 具有 YEAR、MONTH 和 DAY 功能，因此您可以

`SELECT WHERE YEAR(yourdate) = YEAR(dbdate) AND MONTH(yourdate) = MONTH(dbdate) and DAY(yourdate) = DATE(dbdate)`

在 Criteria API 中，您可以执行以下操作：

```
Expression<Integer> yourdateYear = cb.function("year", Integer.class, yourdate);
Expression<Integer> yourdateMonth = cb.function("month", Integer.class, yourdate);
Expression<Integer> yourdateDay = cb.function("day", Integer.class, yourdate); 
```

然后将它们与 AND 表达式结合起来，对 db 中的日期字段执行相同的操作并进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-14T21:51:47.503

**比较两个日期时间的日期的最简单方法**

比较两个日期并忽略时间

日期（dbdDate）= 日期（您的日期）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T02:18:13.940

您可以在 jpql 中使用本机查询。

示例（SQL 服务器）：

```
select table from table where convert(date,mydate)=:date_colum 
```

# wxpython - TreeCtrl wxPython selectedImage

> ID：13716587
> 
> 赞同：0
> 
> 时间：2012-12-05T04:57:46.793
> 
> 标签：wxpython, treecontrol

嗨，我想在 treeItemsCtrl 中放置一个选定的图像，但我找不到我是如何尝试的

```
 fileopen = wx.Image("../iconos/folder-cerrado.png", wx.BITMAP_TYPE_PNG).Scale(16,16).ConvertToBitmap()
    fileClose = wx.Image("../iconos/folder-abierto.png", wx.BITMAP_TYPE_PNG).Scale(16,16).ConvertToBitmap()

    self.tree = wx.TreeCtrl(panel1, 1, wx.DefaultPosition, (-1,-1), wx.TR_HIDE_ROOT)
    root = self.tree.AddRoot('Home')
    os = self.tree.AppendItem(root, 'Documentos', image=fileAbierto, selectedImagefileCerrado) 
```

但它没有用我尝试运行它时出现此错误

```
os = self.tree.AppendItem(root, 'Documentos',fileAbierto,fileCerrado) 
```

文件“/usr/lib64/python2.7/site-packages/wx-2.8-gtk2-unicode/wx/_controls.py”，第 5469 行，在 AppendItem 返回*控件*.TreeCtrl_AppendItem(*args, **kwargs) TypeError: in方法“TreeCtrl_AppendItem”，预期参数 4 类型为“int”

我想在附加函数中执行此操作，因为我要在函数中添加项目谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:59:16.153

wxPython 演示有一个示例。看起来您需要创建一个 ImageList 并提取 ID。然后，当您设置树的项目时，您将需要使用 SetItemImage 方法添加选定的图标：

```
self.tree.SetItemImage(item, fileidx, wx.TreeItemIcon_Normal)
self.tree.SetItemImage(item, smileidx, wx.TreeItemIcon_Selected) 
```

因此，在演示中，它会在未选中时显示一个文件夹图标。然后当它被选中时，它会显示一个笑脸。

# java - 如何为现有文档结构创建文档的叶元素

> ID：13716588
> 
> 赞同：1
> 
> 时间：2012-12-05T04:57:51.137
> 
> 标签：java, swing

我从默认根创建了文档分支的叶元素。我可以看到该元素已创建，但该元素未添加到现有结构的根，但我已将父级作为默认根。

考虑到这段代码，

```
public class MyDoc extends DefaultStyledDocument  { 

//private static final long serialVersionUID = 1L;  

/**
 * 
 */
  public Element createBranchElement(Element parent,AttributeSet a) 
  {
      return super.createBranchElement(parent, a);
  } 

  protected AbstractElement createDefaultRoot(){
      return super.createDefaultRoot();
  } 

  protected Element createLeafElement(Element parent,AttributeSet a, String arg) throws BadLocationException 
  {
      return super.createLeafElement(parent, null, startOffset(arg),startOffset(arg)+1);
  } 

  protected void insertUpdate(AbstractDocument.DefaultDocumentEvent e, AttributeSet attr)
  {         
       Element root = getDefaultRootElement();        
       Element branchroot = new BranchElement(root, null);
       branchroot = createBranchElement(root,null);
       String pName = branchroot.getName();             
       Element leafElement = new LeafElement(branchroot, null, 0,0);
       try {
           leafElement = createLeafElement(branchroot,null,"p");
           //leafElement for a String  "p" should be created  
       } catch (BadLocationException e1) {
           // TODO Auto-generated catch block
               e1.printStackTrace();
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:54:23.313

请参阅[http://java-sl.com/JEditorPaneTables.html](http://java-sl.com/JEditorPaneTables.html)如何插入表格。

见`protected void insertTable()`方法。使用相同的方法创建您自己的规范并以这种方式更改文档结构。

# android-layout - 显示来自基本适配器android的对象

> ID：13716589
> 
> 赞同：0
> 
> 时间：2012-12-05T04:57:59.043
> 
> 标签：android-layout, android-listview, android-adapterview

我想在使用tenantlistadapter 类加载的列表下方显示并运行一个按钮。我的问题是我不知道将对象放在哪里。

我的课如下

```
public class TenantListAdapter extends BaseAdapter {

    private TenantList tenantList;
    private Context _context;
    private int selectedTenantPosition;
    static int selectedid;
    Button boutton_facebook;
    Intent browserIntent;

    public TenantListAdapter(Context context, TenantList array) {

        this.tenantList = array;

        this._context = context;
    }
...

@Override
    public View getView(int position, View convertView, ViewGroup parent) {
..
}

} 
```

视图方法仅显示列表视图数据，但我希望按钮显示在列表下方。所以将按钮放在视图中是不合适的，因为它只显示列表数据。是否有另一种方法可以在类外调用按钮？

这是我的 xml 文件。我希望 facebook 按钮出现在列表视图下方

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"

    android:layout_height="fill_parent"

    android:background="#ffffff"

    android:orientation="vertical" >

    <RelativeLayout

        android:layout_width="fill_parent"

        android:layout_height="wrap_content"

        android:layout_weight="0.3" >

        <ImageView

            android:id="@+id/nav_bar"

            android:layout_width="fill_parent"

            android:layout_height="wrap_content"

            android:scaleType="fitXY" />

        <Button android:id="@+id/back_button"

            android:layout_width="100dp"

            android:layout_height="60dp"

            android:layout_centerVertical="true"

            android:layout_alignParentLeft="true"

            android:background="@android:color/transparent"/>

    </RelativeLayout>

    <LinearLayout

        android:layout_width="fill_parent"

        android:layout_height="fill_parent"

        android:layout_weight="0.7"

        android:background="@drawable/home_background" >

        <ListView

            android:id="@id/android:list"

            android:layout_width="fill_parent"

            android:layout_height="355dp"

            android:layout_margin="10dp"

            android:cacheColorHint="#00000000" />

         <Button

        android:id="@+id/boutton_facebook"

        android:layout_width="fill_parent"

        android:layout_height="match_parent"

        android:drawableLeft="@drawable/f_logo"

        android:gravity="center_vertical|center_horizontal"

        android:text="@string/event"

        android:textSize="@dimen/facebook_button_text_size"

        android:textStyle="bold"

        android:typeface="serif" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:29:59.630

只需进行这些更改..在按钮小部件中使用 android:layout_below="@+id/android:list

```
 android:id="@+id/boutton_facebook"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:drawableLeft="@drawable/f_logo"
    android:gravity="center_vertical|center_horizontal"
    android:text="@string/event"
    android:textSize="@dimen/facebook_button_text_size"
    android:textStyle="bold"
    android:typeface="serif"
    android:layout_below="@+id/android:list" /> 
```

# python - Python - 了解生成器的发送函数

> ID：13716591
> 
> 赞同：10
> 
> 时间：2012-12-05T04:58:11.457
> 
> 标签：python, generator, yield, yield-keyword

我正在学习 Python `yield`，发现这`yield`不仅是生成器输出返回值的方式，也是将值放入生成器的方式。例如下面的代码

```
def f():
    print (yield),
    print 0,
    print (yield),
    print 1

g = f()
g.send(None)
g.send('x')
g.send('y') 
```

在全局范围内，它是生成器`send`的值`'x'`，因此将在其中输出。但我无法理解`'y'``f``x 0 y 1`

*   有 2`yield`秒，但有 3`send`秒。为什么要`None`第一时间发送？
*   `StopIteration`它最后抛出一个`send`。有什么办法可以避免这个异常？

谁能解释一下？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T05:04:26.950

从[文档中](http://docs.python.org/2/reference/expressions.html#generator.send)：

> 当`send()`被调用来启动生成器时，它必须`None`作为参数调用，因为没有`yield`表达式可以接收该值。

至于例外，你真的无法避免。生成器在完成迭代时会抛出此异常，因此与其避免它，不如直接捕获它：

```
g = f()

try:
    g.send(None)
    g.send('x')
    g.send('y')
except StopIteration:
    print 'Done' 
```

# android - Actionbar Sherlock - 滑动时标签不会改变横向

> ID：13716593
> 
> 赞同：7
> 
> 时间：2012-12-05T04:58:19.030
> 
> 标签：android, actionbarsherlock, android-viewpager, landscape, android-tabs

我有一个使用 ViewPager + actionbar Sherlock 选项卡的屏幕。我`setOnPageChangeListener`在寻呼机上有一套，它执行以下操作：

```
@Override
public void onPageSelected(final int position) {
    actionBar.setSelectedNavigationItem(position);
} 
```

如果我只有几个选项卡并且显示所有选项卡，这在纵向模式下甚至在横向模式下都可以正常工作。但是，如果我在横向中添加更多选项卡，它们会折叠成一个下拉小部件。当我通过 ViewPager 进行分页时，该`setSelectedNavigationItem`方法被执行，但现在它对下拉选择没有影响：它停留在最后选择的值。这真的很糟糕，因为用户缺少视觉线索：选项卡可能会显示“一个”，但用户已经在第 6 页上。

有没有办法以编程方式根据位置更改要显示的选项卡？

PS 我知道为什么会这样：这是来自 com.android.internal.app.ActionBarImpl 的代码：

```
public void setSelectedNavigationItem(int position) {
    switch (mActionView.getNavigationMode()) {
    case NAVIGATION_MODE_TABS:
        selectTab(mTabs.get(position));
        break;
    case NAVIGATION_MODE_LIST:
        mActionView.setDropdownSelectedPosition(position);
        break;
    default:
        throw new IllegalStateException(
                "setSelectedNavigationIndex not valid for current navigation mode");
    }
} 
```

当我逐步完成时，我可以看到导航模式仍然是 NAVIGATION_MODE_TABS 虽然选项卡显示为列表。现在 - 我的下意识反应是将代码放入 onConfigurationChanged 以适当地设置导航模式，但这不应该自动发生吗？

PPS 并且已经为它提交了包含补丁的[Android 错误](https://code.google.com/p/android/issues/detail?id=38500)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T20:57:26.483

基于我在问题中引用的 Android 错误（请参阅 PPS），这里的解决方法确实有效。只需将其添加到您的寻呼机

```
mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener()
     {
        @Override
        public void onPageSelected(int position)
        {
           actionBar.getTabAt(position).select();
           ViewParent root = findViewById(android.R.id.content).getParent();
           findAndUpdateSpinner(root, position);
        }

        /**
         * Searches the view hierarchy excluding the content view 
         * for a possible Spinner in the ActionBar. 
         * 
         * @param root The parent of the content view
         * @param position The position that should be selected
         * @return if the spinner was found and adjusted
         */
        private boolean findAndUpdateSpinner(Object root, int position)
        {
           if (root instanceof android.widget.Spinner)
           {
              // Found the Spinner
              Spinner spinner = (Spinner) root;
              spinner.setSelection(position);
              return true;
           }
           else if (root instanceof ViewGroup)
           {
              ViewGroup group = (ViewGroup) root;
              if (group.getId() != android.R.id.content)
              {
                 // Found a container that isn't the container holding our screen layout
                 for (int i = 0; i < group.getChildCount(); i++)
                 {
                    if (findAndUpdateSpinner(group.getChildAt(i), position))
                    {
                       // Found and done searching the View tree
                       return true;
                    }
                 }
              }
           }
           // Nothing found
           return false;
        }
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:46:58.470

您需要在文件（ ActionBarImpl.java ）中的 ActionBarSherlock 库项目中添加一些代码，请参阅[此链接](https://github.com/path/ActionBarSherlock/commit/5c0d48dec7c606502e34dbeb5abb283de636b443)

# nhibernate - 我升级了 NHibernate，现在当我对使用 MSDTC 不感兴趣时 遇到 MSDTC 问题

> ID：13716597
> 
> 赞同：1
> 
> 时间：2012-12-05T04:58:35.443
> 
> 标签：nhibernate, castle-windsor, windsor-nhfacility

我升级了我的 NHibernate 库以及 Castle.Windsor。我也从使用 NHibernateIntegration 转移到 Castle.Facilities.NHibernate

我在这里实施了 NHFacilities 页面上的建议 - [https://github.com/haf/Castle.Facilities.NHibernate/wiki](https://github.com/haf/Castle.Facilities.NHibernate/wiki)

现在，当我运行我的 Web 应用程序时，我被各种 MSDTC 异常所阻止 - 最新的是**Microsoft 分布式事务协调器 (MS DTC) 已停止此事务**

在这一点上我不得不说，我必须查一下 MSDTC 是什么，并且可以确认我对使用它没有任何兴趣！;-)

我没有配置它，也看不到任何让我意识到我会使用它的地方。

我做的任何谷歌搜索都与知道他们正在使用它以及为什么使用它的人有关。然而，我不知道刚刚发生了什么。

谁能告诉我新的 NHibernate (3.2) 或与 NHFacilities 或 Castle.Windsor 相关的依赖项导致我的代码开始使用 MSDTC 的原因是什么？

我可以删除它吗？

或者我的代码是否有更险恶的地方需要修复？请记住，它在升级之前按原样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:14:41.523

正如[NHFacilities](https://github.com/haf/Castle.Facilities.NHibernate/wiki)的描述所暗示的那样：

> NHibernate 设施完美地插入 NHibernate 和 Castle AutoTx 设施以进行 LTM 交易

[Castle AutoTx](https://github.com/haf/Castle.Transactions)负责管理交易，我不熟悉这些组件，但我猜 Castle AutoTx 会以某种方式将交易升级到 MSDTC，所以如果您不是要使用 MSDTC，您应该查阅 Castle AutoTx文档用于配置。

# php - 根据特定列/字段的随机值获取记录 - MySQL

> ID：13716604
> 
> 赞同：0
> 
> 时间：2012-12-05T04:59:07.390
> 
> 标签：php, mysql, random

我有以下查询：

```
SELECT a.*,
ps4_media.filename,
ps4_galleries.name as galleryname,
ps4_media_iptc.description,
ps4_media_iptc.title,
ps4_media_iptc.headline,
ps4_media.date_added,
ps4_galleries.created,
ps4_folders.name as foldername,
ps4_galleries.gallery_count 
FROM ps4_media_galleries a 
INNER JOIN (SELECT ps4_media_galleries.gallery_id,
min(ps4_media_galleries.gmedia_id) AS minID 
FROM ps4_media_galleries GROUP BY ps4_media_galleries.gallery_id) b 
ON a.gallery_id = b.gallery_id 
AND a.gmedia_id = b.minID
INNER JOIN ps4_media ON ps4_media.media_id = a.gmedia_id 
INNER JOIN ps4_folders ON ps4_folders.folder_id = ps4_media.folder_id
INNER JOIN ps4_galleries ON ps4_galleries.gallery_id = a.gallery_id
INNER JOIN ps4_media_iptc ON ps4_media_iptc.media_id = a.gmedia_id
ORDER BY ps4_galleries.created DESC 
```

如何让 ps4_media.filename 随机，其他一切都很好，只需要 ps4_media.filename 的缩略图和搜索结果中的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:28:54.600

这个答案是基于对您的表设计的*大量***假设**- 因为您的问题中没有说明架构或数据流 hierarch。

我举了一个例子来说明你需要对你的查询做些什么。如您所见，此设计是一个平滑的设计，您可能有许多交叉引用等。因此，我再次*重复自己*说，**通过展示您的模式来帮助您来帮助我们是至关重要的。**

```
-- image belongs to a media 
-- folder has many images
---- folder belongs to a media
-- gallery has many media 
```

**表设计：**

```
-- Gallery Table
GID     GNAME       GLOCATION
1       art         cambridge
2       art         torronto
3       picture     melbourne
4       sculpture   paris

-- Media Table
MID     MNAME   MGID
10      screen  1
15      brail   2
20      embose  1
25      print   3
30      print   4
35      embose  2

-- Folder Table
FID     FNAME       FMID
200     fprojToro1  15
201     fprojMelb1  25
202     fprojCamb1  20
203     fprojCamb2  20
204     fprojToro2  15
205     fprojToro3  35
206     fprojMelb2  25
207     fprojMelb3  25

-- Image Table
IID     INAME   IFID
1001    tb01    200
1002    mp02    201
1005    te05    205
1008    te08    205
1010    mp10    206
1015    mp15    207
1018    te18    205 
```

**查询一：**

-- 生成随机文件名

```
select iname from image
order by Rand()
limit 1
; 
```

**结果1：**

```
INAME
tb01 
```

**查询 2：**

-- 因为我使用了左连接 -- 并且一些图像属于同一个文件夹 -- 在以下查询中可能会获得超过 -- 1 条记录

```
select g.*, m.mname, f.fname, i.iname
from gallery g
left join media m
on m.mgid = g.gid
left join folder f
on f.fmid = m.mid
left join image i
on i.ifid = f.fid
where i.iname = (select iname from image
                 order by Rand()
                 limit 1)
; 
```

**结果 2：**

```
GID     GNAME   GLOCATION   MNAME   FNAME        INAME
3       picture     melbourne   print   fprojMelb2  mp10 
```

**查询 3：**

-- 再次将主查询限制为 1

```
select g.*, m.mname, f.fname, i.iname
from gallery g
left join media m
on m.mgid = g.gid
left join folder f
on f.fmid = m.mid
left join image i
on i.ifid = f.fid
where i.iname = (select iname from image
                 order by Rand()
                 limit 1)
limit 1
; 
```

**结果 3：**

```
GID     GNAME   GLOCATION   MNAME   FNAME       INAME
2       art     torronto    embose  fprojToro3  te18 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:01:39.607

您需要通过`RAND()` Try this::

```
SELECT a.*,
ps4_media.filename,
ps4_galleries.name as galleryname,
ps4_media_iptc.description,
ps4_media_iptc.title,
ps4_media_iptc.headline,
ps4_media.date_added,
ps4_galleries.created,
ps4_folders.name as foldername,
ps4_galleries.gallery_count FROM ps4_media_galleries a INNER JOIN (SELECT ps4_media_galleries.gallery_id,
min(ps4_media_galleries.gmedia_id) AS minID FROM ps4_media_galleries GROUP BY ps4_media_galleries.gallery_id) b ON a.gallery_id = b.gallery_id AND a.gmedia_id = b.minID
INNER JOIN ps4_media ON ps4_media.media_id = a.gmedia_id INNER JOIN ps4_folders ON ps4_folders.folder_id = ps4_media.folder_id
INNER JOIN ps4_galleries ON ps4_galleries.gallery_id = a.gallery_id
INNER JOIN ps4_media_iptc ON ps4_media_iptc.media_id = a.gmedia_id
ORDER BY RAND() 
```

# android - 如何以编程方式删除图标（Android）

> ID：13716605
> 
> 赞同：0
> 
> 时间：2012-12-05T04:59:13.270
> 
> 标签：android

通过删除 AndroidManifest.xml 中的以下意图过滤器，它可以在安装后删除图标。

```
<intent-filter>
  <action android:name="android.intent.action.MAIN" />
  <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

但是我在启动时尝试了以下操作，而不是删除图标，但重新启动后图标仍然存在。我已经添加了权限，这个重启接收器是工作的。

```
public class BootBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        PackageManager p = context.getApplicationContext().getPackageManager(); 
        ComponentName componentName = new ComponentName("com.example.removeicon","com.example.removeicon.LauncherActivity");
        p.setComponentEnabledSetting(componentName,PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);

    }
} 
```

或者将启动放在服务上，并且 AndroidManifest.xml 意图过滤器没有被删除，服务正在运行并工作。

```
package com.example.removeicon;
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        PackageManager p = getPackageManager();
        ComponentName componentName = new ComponentName("com.example.removeicon","com.example.removeicon.LauncherActivity");
        p.setComponentEnabledSetting(componentName,PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);
        startService();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:02:18.103

```
PackageManager p = getPackageManager();
ComponentName componentName = new ComponentName("com.example.removeicon","com.example.removeicon.LauncherActivity");
p.setComponentEnabledSetting(componentName, 
    PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

**请注意，该图标可能要等到下次重新启动后才会消失。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-01T11:52:42.333

试试下面的代码，这个对我有用

```
PackageManager p = ctx.getPackageManager(); 
         p.setComponentEnabledSetting(((Activity)ctx).getComponentName(),
         PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

# bash - 从另一个字符串的值创建一个字符串变量名

> ID：13716607
> 
> 赞同：23
> 
> 时间：2012-12-05T04:59:40.903
> 
> 标签：bash, unix

在我的 bash 脚本中，我有两个变量`CONFIG_OPTION`，`CONFIG_VALUE`它们分别包含字符串`VENDOR_NAME`和`Default_Vendor`。

我需要创建一个名为`$CONFIG_OPTION`ie的变量`VENDOR_NAME`并将值分配`CONFIG_VALUE`给新创建的变量。

我怎么能做到这一点？

我试过

```
$CONFIG_OPTION=$CONFIG_VALUE 
```

但是我在这条线上遇到了一个错误

```
'./Build.bash: line 137: VENDOR_NAME="Default_Vendor": command not found' 
```

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-05T06:49:19.267

我知道没有人会提到它，所以我走了。你可以用`printf`！

```
#!/bin/bash

CONFIG_OPTION="VENDOR_NAME"
CONFIG_VALUE="Default_Vendor"

printf -v "$CONFIG_OPTION" "%s" "$CONFIG_VALUE"

# Don't believe me?
echo "$VENDOR_NAME" 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-10-25T02:38:21.727

这使用 bash 内置函数：

```
#!/bin/bash

VAR1="VAR2"

declare "${VAR1}"="value"

echo "VAR1=${VAR1}"
echo "VAR2=${VAR2}" 
```

脚本输出：

```
VAR1=VAR2
VAR2=value 
```

这是使用您的变量名的代码段：

```
#!/bin/bash

CONFIG_OPTION="VENDOR_NAME"

declare "${CONFIG_OPTION}"="value"

echo "CONFIG_OPTION=${CONFIG_OPTION}"
echo "VENDOR_NAME=${VENDOR_NAME}" 
```

脚本输出：

```
CONFIG_OPTION=VENDOR_NAME
VENDOR_NAME=value 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-08T11:15:58.873

对于纯外壳，可能尝试：

```
#!/usr/bin/env sh

option=vendor_name
value="my vendor"

eval $option="'$value'" # be careful with ', \n, and \ in value
eval echo "\$$option" # my vendor
echo "$vendor_name" # my vendor 
```

为什么？

```
#!/usr/bin/env sh
printf -v "var" "val" # prints the flag, var not set
declare var=val # sh: declare: not found
echo ${!var} # sh: syntax error: bad substitution 
```

我不喜欢 eval，但有 POSIX 选项吗？

# security - 任何用于创建 SamlSecurityToken 实例的示例？

> ID：13716609
> 
> 赞同：0
> 
> 时间：2012-12-05T04:59:51.713
> 
> 标签：security, wif, saml

我不确定这是否是一个好问题，但是：

我试图在互联网上找到任何用于创建 System.IdentityModel.Tokens.SamlSecurityToken 和 System.IdentityModel.Tokens.SamlAssertion 实例的示例，但我找不到...任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:01:25.533

知道了！来源（我写问题时服务器没有响应）：http: [//developers.de/blogs/damir_dobric/archive/2007/02/22/Creating-of-SAML-token.aspx](http://developers.de/blogs/damir_dobric/archive/2007/02/22/Creating-of-SAML-token.aspx)

```
private static void Main(string[] args)
{
  SamlAssertion assertion = createSamlAssertion();
  SamlSecurityToken samlToken = new SamlSecurityToken(assertion); 
} 

/// <summary> 
/// Creates some Test SAML assertion 
/// </summary> 
/// <returns></returns> 
private static SamlAssertion createSamlAssertion() 
{ 
  // Here we create some SAML assertion with ID and Issuer name. 
  SamlAssertion assertion = new SamlAssertion(); 
  assertion.AssertionId = "DaenetSamlTest"; 
  assertion.Issuer = "damir"; 

  // 
  // Create some SAML subject. 
  SamlSubject samlSubject = new SamlSubject(); 
  samlSubject.Name = "My Subject"; 

  // 
  // Create one SAML attribute with few values. 
  SamlAttribute attr = new SamlAttribute(); 
    attr.Namespace = http://daenet.eu/saml; 
    attr.AttributeValues.Add("Some Value 1"); 
  attr.AttributeValues.Add("Some Value 2"); 

  attr.Name = "My ATTR Value"; 

  // 
  // Now create the SAML statement containing one attribute and one subject. 
  SamlAttributeStatement samlAttributeStatement = new SamlAttributeStatement(); 
  samlAttributeStatement.Attributes.Add(attr); 
  samlAttributeStatement.SamlSubject = samlSubject; 

  // Append the statement to the SAML assertion. 
   assertion.Statements.Add(samlAttributeStatement); 

  return assertion; 
} 
```

这是为了签署断言

```
/// <summary> 
/// Creates some signed Test SAML assertion. 
/// </summary> 
/// <returns></returns> 
private static SamlAssertion createSamlAssertion() 
{
  // 
  // Create certificate from file. It must contain private key! 
  X509Certificate2 cert = new X509Certificate2("filename.cert"); 

  // The private key contained in the certificate will be used to sign the   
  token.   
  X509AsymmetricSecurityKey signingKey = new X509AsymmetricSecurityKey(cert); 
  SamlAssertion assertion = createSamlAssertion(); 

  // 
  // Signing credentials are consisted 
  // of private key in the certificate (see above), 
  // the signature algorithm, security algortihm and key identifier. 
  assertion.SigningCredentials = 
  new SigningCredentials(signingKey, SecurityAlgorithms.RsaSha1Signature,     
  SecurityAlgorithms.Sha1Digest, 
  new SecurityKeyIdentifier(new X509ThumbprintKeyIdentifierClause(cert))); 

  // Finally create the SamlSecurityToken from the assertion 
  SamlSecurityToken samlToken = new SamlSecurityToken(assertion); 

  // Create a SecurityTokenSerializer that 
  // will be used to serialize the SamlSecurityToken 
  WSSecurityTokenSerializer ser = new WSSecurityTokenSerializer(); 
  using (XmlWriter xWriter = XmlWriter.Create("saml.xml")) 
  { 
    ser.WriteToken(xWriter, samlToken); 
  } 
} 
```

# php - 有没有更好的方法以 php 形式创建复选框和单选按钮？

> ID：13716610
> 
> 赞同：0
> 
> 时间：2012-12-05T04:59:52.353
> 
> 标签：php, forms, codeigniter, checkbox, radio-button

我尝试了一种简单的方法来创建任何 php 表单中的复选框和单选按钮。唯一的事情是我正在使用 Codeigniter MVC 框架。

这是您可以插入到您的公共模型或任何帮助文件中的函数定义。

```
function createOptions($fieldName, $labelsArray=array(), $selectedOption, $fieldType,$valuesArray = array()) {
        $returnString = '';
        if(count($valuesArray)!=count($labelsArray))
            $valuesArray=$lebelsArray;
        if ($fieldType === 'checkbox') {
            for ($i=0;$i<count($labelsArray);$i++) {
                $returnString.='&nbsp&nbsp&nbsp<input type="checkbox" name=' . $fieldName.' value='.$valuesArray[$i].' id='.$valuesArray[$i];
                if(in_array($valuesArray[$i], $selectedOption)){
                        $returnString.=' checked="checked" ';
                }
                $returnString.=' />&nbsp&nbsp<label>'.$labelsArray[$i].'</label>';
            }
        }
        if ($fieldType === 'radio') {
            for ($i=0;$i<count($labelsArray);$i++) {
                $returnString.='&nbsp&nbsp<input type="radio" name=' . $fieldName.' value='.$valuesArray[$i].' id='.$valuesArray[$i];
                if($valuesArray[$i]== $selectedOption)
                        $returnString.=' checked="checked" ';
                $returnString.=' /><label>'.$labelsArray[$i].'</label>';
            }
        }
        return $returnString;
    } 
```

而且，你必须在视图文件中调用这个函数，

```
<?php
echo $this->common_model->createOptions('userHobbies[]', $hobbyOptions, $userHobbies, 'checkbox'); ?> 
```

第一个参数是复选框字段或单选字段的名称，对于两种情况的所有选项，它总是相同的。第二个是标签数组，第三个是选定的选项，它将在加载表单时将这些选项显示为选中。第四种是将字符串作为“复选框”或“收音机”的字段类型。第五个是 values 数组，如果存在，它将包含标签的值，其顺序与标签的顺序相同。如果它不存在，标签数组将被当作值数组。我想知道这段代码是否有任何进一步的优化可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:25:37.593

我设法把它弄到了这里。

`$selectedOption`现在可以是字符串或数组，但对于单选框会自动剪切为 1 大小。

对于任何一种输入类型，您都有一些代码重复，因此它们已被组合并稍微适应。

我的问题是，你真的需要把 html 元素的创建抽象出来这么难吗？

另外，我应该注意的是，您订阅了多种编码标准（1 行 if 语句在使用大括号和不使用大括号之间弹跳等）。从技术上讲，您使用哪种并不重要，但请尝试使用其中一种。

```
function createOptions($fieldName, $labelsArray=array(), $selectedOption, $fieldType, $valuesArray = array()) {
    $returnString = '';
    $selectedOption = (array) $selectedOption;

    if(count($valuesArray) != count($labelsArray))
        $valuesArray = $labelsArray;

    if ($fieldType === 'radio')
        $selectedOption = array_slice($selectedOption, 0, 1);

    for ($i=0; $i < count($labelsArray); $i++)
    {
        $returnString .= sprintf('&nbsp; &nbsp;<input type="%s" name="%s" value="%s" id="%s"',
            $fieldType, $fieldName, $valuesArray[$i], $valuesArray[$i]);

        if(in_array($valuesArray[$i], $selectedOption))
                $returnString .= ' checked="checked" ';

        $returnString .= ' />&nbsp&nbsp<label>'.$labelsArray[$i].'</label>';
    }

    return $returnString;
} 
```

# python - 如何在python中获取html表的某些列

> ID：13716615
> 
> 赞同：0
> 
> 时间：2012-12-05T05:00:36.967
> 
> 标签：python

有没有办法从python中的html表中获取某一列的所有元素：
例如：

```
a    b    c  
1    2    3 
```

我想得到`a`,1, `c`, 3。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:08:16.623

如果您没有任何跨度，则很容易做到。想象一下这样的表：

```
<table>
     <tr><td>A</td><td>B</td><td>C</td></tr>
     <tr><td>1</td><td>2</td><td>3</td></tr>
</table> 
```

它将呈现如下：

```
A B C
1 2 3 
```

如果您对表代码进行一些字符串操作，您可以轻松地填充一个二维数据结构，您可以从中提取列。我能想到的最简单的方法是使用正则表达式。这是一个小函数，它采用表格代码（为简单起见不带标签）并返回行列表。这些行作为单元格列表返回：

```
import re
    def htmlTableData(tblbody):
    trs=re.findall(r'(?<=<tr>).*?(?=</tr>)', tblbody)
    content=[re.findall(r'(?<=<td>).*?(?=</td>)', tr) for tr in trs]
return content 
```

对于上面的示例表，它将返回此列表：

```
[['A', 'B', 'C'], ['1', '2', '3']] 
```

现在，只需将其解压后传递给 zip 函数（`els`即上面的列表）：

```
columns=zip(*els) 
```

它将返回列是元组的列列表。在上面的例子中，它返回`[('A', '1'), ('B', '2'), ('C', '3')]`

请注意，您不会在真正的抓取程序中真正使用它。这是一个关于如何完成的简单示例。在现实世界中，您经常拥有永远无法以这种方式解析的不正确代码。如果要进行屏幕抓取，请使用解析器获取表的内容，但以这种方式压缩它以获取列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:18:59.763

你试过什么？你在解析一些其他的 HTML 代码吗？或者这就是你想做的全部？

尝试查看用于 HTML 抓取的[Beautiful Soup 。](http://www.crummy.com/software/BeautifulSoup/)

包括有关您尝试做的事情的更多信息或有关您的项目的更多信息。

# java-me - 是否可以用两个签名签署同一个 J2ME midlet

> ID：13716623
> 
> 赞同：1
> 
> 时间：2012-12-05T05:01:52.753
> 
> 标签：java-me, midp, verisign, thawte

是否可以使用 thawte 和 Verisign 等两个签名来签署同一个 J2me midlet？

这样就不需要使用单独的签名来构建。

# php - jQuery滑块一次加载一个内容

> ID：13716630
> 
> 赞同：0
> 
> 时间：2012-12-05T05:02:36.580
> 
> 标签：php, javascript, jquery, mysql, bxslider

我有一个滑块可以一次加载我的所有内容。进入一个div。像这样：

外部页面.php

```
$get_users = mysql_query("SELECT * FROM user WHERE id!='$user_id'"); 
while ($rows = mysql_fetch_assoc($get_users)) {
$id = $rows['id'];
$firstname = $rows['firstname'];

$display_info .= '
<div class="f_outer" id="' . $id . '">
    <div class="f_name likeu">' . $firstname . '</div>
</div>';
}
    echo $display_info; 
```

我使用 bxslider 从我的 find.php 页面调用此页面

下面是我的 find.php 页面。

```
 <script type="text/javascript">
$(function() {
    var slider = $("#slider1").bxSlider();
    $("#slider-like").live('click', function() {
        slider.goToNextSlide();
        return false;
    });
    }); 
    </script>

    <div id="slider-like>Yes</div>
    <div id="slider1">
    <?PHP
    include ("external.php");
    ?>
    </div> 
```

所以我得到的是 find.php 页面上的所有 .f_outer div。我有数百个用户，他们都会一次加载。我想一次只加载一张幻灯片。因此，当我单击#slider-like 时，它​​会从我的外部页面加载我的一次潜水。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:33:38.387

如果包含`external.php`，它会从 加载*所有*数据`user`。如果要动态加载，需要使用ajax，而不是在服务器上包含文件。您可以跟踪使用 JS 或 php 会话的用户。我认为前者更容易：

```
var nextUser = 0;
$(document).on('click', '#slider-like', function (e) {
   var slider = $("#slider1").bxSlider();
   $("#slider1").load("getuser.php?num=" + nextUser, function () {
      slider.goToNextSlide();
      nextUser++;
   });
   e.preventDefault();
}); 
```

然后，在 上`getuser.php`，您将拥有：

```
$num = isset($_GET['num']) ? $_GET['num'] : exit;
$query = "SELECT * FROM user WHERE id != '$user_id' LIMIT $num,1"; 
```

这会查询`$num`第一个用户并将其限制为一个结果。

***注意：***您应该使用`PDO`or`mysqli`代替`mysql_*`. 两者都`$user_id`需要`$num`逃脱。

# python - 在 Django 中创建基于 ManyToManyField 的 QuerySet

> ID：13716631
> 
> 赞同：-1
> 
> 时间：2012-12-05T05:02:46.423
> 
> 标签：python, django, django-models

所以我有两节课；图片和标签如下：

```
class Tag(models.Model):
        pics = models.ManyToManyField('Picture', blank=True)
        name = models.CharField(max_length=30)
        # stuff omitted

class Picture(models.Model):
        name = models.CharField(max_length=100)
        pub_date = models.DateTimeField('date published')
        tags = models.ManyToManyField('Tag', blank=True)
        content = models.ImageField(upload_to='instaton')
        #stuff omitted 
```

我想要做的是得到一个查询集（对于 ListView），给定一个标签名称，其中包含最近 X 数量的被这样标记的图片。我查找了非常相似的问题，但没有一个回答对我来说有任何意义。我将如何创建这个查询集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:07:02.680

试试这个

tag = Tag.objects.get(name = 'tagname')

Picture.objects.filter(tags = tag).order_by('-pub_date')[X]

# javascript - 我想创建一个动态的对象数组，并检索它们

> ID：13716637
> 
> 赞同：1
> 
> 时间：2012-12-05T05:03:31.497
> 
> 标签：javascript

这是我的代码：我有两个数组[lab,val]，它们的值将动态传递给对象。k 是保存对象的数组

```
var lab = ["1","2","3",4];
var val = ["sa","ma","pa","da"];
var k = [];
for(var i=0; i<4; i++)  {
   data[i] = {};             
   data[i].label = lab[i];
   data[i].value = val[i]; 
   k.push(data[i]) ;  
}

document.write(k.data[0]);  
document.write(" " + k.data[0] + "<br />"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:06:43.563

看起来您的`data`变量未声明。尝试在循环之前声明它，并且当你在那里时，考虑更改 for 循环上的条件以检查数组的长度，而不是将其硬编码为 2。

```
var lab = ["1","2","3",4];
var val = ["sa","ma","pa","da"];
var k    = [],
    data = [];  // <----- here
for(var i = 0;  i < lab.length; i++)  {
   data[i] = {};             
   data[i].label = lab[i];
   data[i].value = val[i]; 
   k.push(data[i]) ;  
} 
```

但实际上，`data`数组的意义何在？看起来它只是拥有所有东西的副本`k`。为什么不这样做：

```
var lab = ["1","2","3",4];
var val = ["sa","ma","pa","da"];
var k = [];

for(var i=0; i < lab.length; i++)  {
   k.push({
       label: lab[i],
       value: val[i]       
   });  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:07:12.270

由于您已经将对象推入数组中，因此请这样做 -

```
var lab = ["1","2","3",4];
var val = ["sa","ma","pa","da"];
var k = [];
var obj;    // it will hold temporary object references

for(var i=0; i<4; i++)  {
   obj = {};             
   obj.label = lab[i];
   obj.value = val[i]; 
   k.push(obj) ;  
}

document.write(k[0].label);    // index k, rather than the value it contains 
document.write(" " + k[0].value + "<br />"); 
```

您的代码不起作用，因为您正在索引`k`存储的值，并且您的`data`变量没有在任何地方声明。

您甚至可以`for`通过将对象直接推入数组来缩短循环，这是一种更好的方法 -

```
for(var i=0; i<4; i++)  {
   k.push({
       label: lab[i],
       value: val[i]
   }) ;  
} 
```

这样，您甚至不需要临时对象。

# android - 在galleryview 图像和文本中

> ID：13716638
> 
> 赞同：1
> 
> 时间：2012-12-05T05:03:32.547
> 
> 标签：android, galleryview

在我的应用程序中，我使用galleryview来显示图像..我的要求是我必须显示图像并且该图像的权利我必须显示文本..我做了一切并且工作正常..但是我的问题是图像之间出现了“SPACE”...

其实我想要这样的输出：

```
----         ----      ----- 
img1 Text   img2 TExt  img3  text
----        -----      ---- 
```

但我得到这样的输出：

```
----                       ----                                   ----- 
img1 Text                  img2 TExt                             img3  text
----                       -----                                    ---- 
```

我的布局文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >    

       <RelativeLayout  android:layout_width="fill_parent"
                       android:layout_height="fill_parent">

        <ImageView
        android:id="@+id/icon"
        android:layout_width="50dp"
        android:layout_height="50dp"          
         />

        <TextView
        android:layout_toRightOf="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/homesectiongallery"        
        android:textColor="#CCCCCC"
        android:paddingTop="15dp"
        android:paddingRight="10dp"
        android:textStyle="bold"

      />

   </RelativeLayout>
  <View android:background="#B3B3B3" android:layout_width = "fill_parent" android:layout_height="1dip" android:layout_marginTop="5px"/>

</LinearLayout> 
```

我的画廊持有布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Gallery 
    android:id="@+id/Gallerysection" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
    </Gallery>

      <ListView android:id="@+id/list" android:layout_width="fill_parent" android:layout_height="wrap_content" />    

</LinearLayout> 
```

请帮我解决这个问题..提前谢谢..

# 3d - assimp 错误的纹理文件名

> ID：13716640
> 
> 赞同：1
> 
> 时间：2012-12-05T05:03:46.067
> 
> 标签：3d

我正在使用 assimp 为 opengl 加载模型。但我使用以下方法来获取纹理文件名。

```
aiReturn texFound = scene->mMaterials[m]->GetTexture(aiTextureType_DIFFUSE, texIndex, &path); 
```

但是路径中的文件名存储是错误的。有时它会在文件名的前面附加 \。前任。\super_diffuse.tga。实际上文件名是 super_diffuse.tga。

有没有办法解决它或者它是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:50:02.967

如果有反斜杠，您是否只需编写一个删除反斜杠的函数？
无论如何，您都需要纹理文件的绝对路径（或相对于您的 exe）。

不，我不认为这是一个错误，因为这是存储在模型文件中的路径。Assimp与它无关。
我也从来没有遇到过你的问题。

# php - 在 Jquery 中添加一组字段的最佳方法

> ID：13716646
> 
> 赞同：0
> 
> 时间：2012-12-05T05:04:33.527
> 
> 标签：php, jquery, ajax

我正在创建一个 CRM，并且我有一个名为“添加记录”的按钮当他们单击添加记录时，我需要将以下内容附加到我的表单字段中：

```
<div class="record">
Record Name: <br /><input name="recordName" type="text" /><br />
Record: <br /><input name="record" type="text" />
</div> 
```

他们可以添加他们想要的任意数量的“记录”。

我的问题是，这样做的好方法是什么，我可以收集未知数量的这些记录的所有数据并通过 ajax 提交。我知道所有 ajax 的东西，我只知道做动态字段的方法比我想做的更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:19:03.767

跟踪您在 javascript 中添加的数量，然后使用此“id”。例如。如果您已经有一条记录（记录 #0），则 id 将 = 1；

```
<div class="record" id="record-1">
  Record Name: <br /><input name="record[1][name]" type="text" /><br />
  Record: <br /><input name="record[1][record]" type="text" />
</div> 
```

如果你在 div 上设置了一个 id，如果他们决定不想要它，你可以在将来删除它。或者如果您检测到验证错误等，请跳转到该 div。

当它被发送到 php 时，您可以访问，

```
echo $_REQUEST['record'][0]['name'];

foreach($_REQUEST['record'] as $r)
  echo $r['name']; 
```

有关详细信息，请参阅[http://php.net/manual/en/faq.html.php#faq.html.arrays](http://php.net/manual/en/faq.html.php#faq.html.arrays)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:34:49.757

使用knockoutJS，你可以很容易地做到这一点

```
 var appVM = {
                  records: ko.observableArray(),

                  addRecord: function(){

                      records.push({ recordName:"" })
                  }
           }

           $(function(){
                  ko.applyBindings(appVM);
           });

           <div data-bind="foreach: records">
                <div data-bind="recordName"></div>
           </div>
           <form action="">
                <button data-bind="click: addRecord">Add Record</button>
                <input data-bind="value: records[records.length-1].recordName></input>
                <input type="submit">Save</input>
           </form> 
```

# c# - 是否可以在 Prism UnityContainer 中使用来自 Micro.Caliburn 的 IWindowManager

> ID：13716648
> 
> 赞同：0
> 
> 时间：2012-12-05T05:04:49.113
> 
> 标签：c#, mvvm, unity-container, caliburn.micro

我正在寻找 UnityContainer 的 WindowManager，并在我的容器中注册了这项服务。

但是在我打算利用这个服务来显示一个 UserControl 的那一刻，这是不可能的。它告诉它找不到视图模型“x”的视图。

我使用 Unity 作为引导程序。

```
public class Bootstrapper : UnityBootstrapper
{
    protected override DependencyObject CreateShell()
    {
        MainWindow shell = Container.Resolve<MainWindow>();
        shell.Show();

        return shell;
    }

    protected override void ConfigureContainer()
    {
        base.ConfigureContainer();
        Container.RegisterInstance<IWindowManager>(new WindowManager());
    }
} 
```

# jquery - 使用 jQuery 验证插件为多个字段输出单个错误消息

> ID：13716649
> 
> 赞同：5
> 
> 时间：2012-12-05T05:05:11.580
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件来验证表单。所有字段都是必填字段，并且表单上的错误消息空间有限，因此如果我的规则中的任何字段未完成，是否可以显示一条错误消息，上面写着“必须在提交之前完成所有字段”形式' ？

我的 jQuery 知识有限，我只能从示例中了解如何设置它，以便使用以下代码为每个字段输出单独的错误消息：

```
$(".contact-form").validate({
  errorLabelContainer: ".form-errors",
  wrapper: "li",
  ignore: ".ignore",
  errorElement: "em",
  rules: {
    first_name: { required: true },
    last_name: { required: true },
    email: { required: true, email: true }
  },
  messages: {
    first_name: "Please enter your first name",
    last_name: "Please enter your last name",
    email: { required: "Please enter your email address", email: "Your email address must be in the format of name@domain.com" }
  },
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T05:37:22.683

这将满足您的要求：

**Javascript**

```
$(".contact-form").validate({
    ignore: ".ignore",
    rules: {
        first_name: {
            required: true
        },
        last_name: {
            required: true
        },
        email: {
            required: true,
            email: true
        }
    }, 
    showErrors: function(errorMap, errorList) {
        $(".form-errors").html("All fields must be completed before you submit the form.");
    }
});​ 
```

**[演示](http://jsfiddle.net/CAnN2/)**

虽然当有人输入错误的电子邮件地址时，此错误消息不是很好，因为所有字段都已填写，但表单中仍然存在错误。

`class`另外，请注意，您可以通过将其属性设置为来指定表单中的必填字段`required`：

**HTML**

```
<form class="contact-form" type="post" action="">
    <input type="text" name="first_name" id="first_name" class="required" />
    <input type="text" name="last_name" id="last_name" class="required" />
    <input type="email" name="email" id="email" class="required email" />
    <input type="submit" />
    <div class="form-errors"></div>
</form>​ 
```

**Javascript**

```
$(".contact-form").validate({
    showErrors: function(errorMap, errorList) {
        $(".form-errors").html("All fields must be completed before you submit the form.");
    }
});​ 
```

**[演示](http://jsfiddle.net/CAnN2/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T05:14:31.440

看起来**invalidHandler**是你需要的。看看这个例子（来源：[http](http://docs.jquery.com/Plugins/Validation/validate#toptions) ://docs.jquery.com/Plugins/Validation/validate#toptions ）：

```
$(".selector").validate({
   invalidHandler: function(form, validator) {
  var errors = validator.numberOfInvalids();
  if (errors) {
    var message = errors == 1
      ? 'You missed 1 field. It has been highlighted'
      : 'You missed ' + errors + ' fields. They have been highlighted';
    $("div.error span").html(message);
    $("div.error").show();
  } else {
    $("div.error").hide();
  }
}
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T05:10:32.807

```
fxnReqValidation = function (event) {
        $("#errormsg").empty();
        $("input:text").each(function (index, InputElement) {
            var Ele = g_Json[InputElement.name];
            if ((Ele.required) && (InputElement.value == "" || null)) {
                $("#errormsg").append("" + All fields must be completed before you submit the form + "");                
            }           
        });
        event.preventDefault();
    } 
```

这可能对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T05:34:04.647

您可以使用 toggle() 方法在消息之间切换并使用 jquery 插件...它认为它更快更好且易于编码...

# uiwebview - 从 webview 将事件传递给 Titanium 的干净方法？

> ID：13716650
> 
> 赞同：0
> 
> 时间：2012-12-05T05:05:20.270
> 
> 标签：uiwebview, titanium

如何从 Titanium webview 传递事件的常见解释涉及从 webview 中的 HTML 调用 Ti.App.fireEvent()。但是，我想听 webview 本身而不是全局 Ti.App 对象，这样来自不同 webview 的重复事件不会触发上下文的不适当代码。

例如。如果我为“OK_BUTTON”事件收听 Ti.App，它的含义会有所不同，具体取决于它在流程中被调用的位置。因此，我必须为每个上下文删除并添加新的侦听器。

有一种记录方法可以使用普通的 HTML 锚标记和未定义的协议“xxxx://”直接从 web 视图传递事件，并在 Titanium 中捕获随后的错误事件。有没有更清洁的方法来做到这一点？按预期保留错误的“错误”事件会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:06:52.973

我认为您需要`Ti.App.fireEvent()`从 webview 使用，但将标识源 webview 的数据添加到事件中。

例如，为每个 webview 分配一个唯一的 id，并通过在 webview 的 'load' 事件处理程序中执行 'evalJS()' 将其传递到 webview。（或者，如果您有 Titanium 生成它，则通过在您的 html 中设置 id）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:09:24.713

这是一个基本实用模块，它为 webview 分配一个 id，并为 webview 上下文提供一个函数 fireEvent()，该函数将在 Titanium 中的 webView 对象上触发一个事件。

```
var listenerWebViews = {};

exports.createListenerWebView = function(config) {
    var id = createRandomString();
    var webView = Ti.UI.createWebView(config);

    webView.listenerId = id;

    webView.evalJS('function fireEvent(type, e) { var f = { originalType:type, listenerId:"'+id+'"}; Ti.App.fireEvent("WEBVIEW_LISTENER_EVENT", f); }');
    listenerWebViews[id] = webView;

    var oldRemoveFunction = webView.remove;
    webView.remove = function(){
        listenerWebViews[id] = null;
        oldRemoveFunction();
    }

    return webView;
}

Ti.App.addEventListener("WEBVIEW_LISTENER_EVENT", function(e){
    var webView = listenerWebViews[e.listenerId];
    if (webView) {
        webView.fireEvent(e.originalType, e);
    }
}); 
```

包含该模块，这有效：

```
var view = module.createListenerWebView({
    url: 'myPage.html'
});

view.addEventListener('my_type', function(){
    alert('webview event!');
});

view.evalJS("fireEvent('my_type');"); 
```

# java - 带有外部类的 Jersey JSON 序列化

> ID：13716651
> 
> 赞同：0
> 
> 时间：2012-12-05T05:05:21.413
> 
> 标签：java, rest, jaxb, jersey

我正在尝试在我的石英调度程序之上创建一个休息 api 服务器。我希望能够将 org.quartz.Trigger 和 org.quartz.JobDetail 对象作为 JSON 返回。问题是我无法将@XmlRootElement 添加到这些类而无需重新编译jar，这会导致未来升级等问题。我已经测试并且能够在添加@XmlRootElement 时序列化类列表但是当我尝试返回一个列表我收到错误消息“找不到 Java 类 java.util.ArrayList 和 Java 类型 java.util.List 和 MIME 媒体类型 application/json 的消息正文编写器”。我尝试添加自定义 MessageBodyWriter ，但这似乎也不能解决问题。有没有办法将石英类编组为 JSON，而无需修改石英代码以添加 @XmlRootElement。

```
@Path("/jobs")
public class JobsResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List<Trigger> listScheduledJobs() throws SchedulerException {
        return TaskEngine.getInstance().listScheduledJobs();
    }

} 
```

网络服务器配置

```
public class TaskEngineWebServer {

    private static final Logger logger = Logger.getLogger(TaskEngineWebServer.class.getName());

    private Server server;

    public TaskEngineWebServer() {
        this(8585);
    }

    public TaskEngineWebServer(Integer port) {
        server = new Server(port);

        logger.info("Configuring rest service to start at url /r");
        ServletContextHandler handler = new ServletContextHandler(ServletContextHandler.NO_SECURITY);
        //handler.getInitParams().put("com.sun.jersey.api.json.POJOMappingFeature", "true");
        PackagesResourceConfig packagesResourceConfig = new PackagesResourceConfig("com.hp.vf.scheduler.server.rest");

        ServletContainer servletContainer = new ServletContainer(packagesResourceConfig);
        handler.addServlet(new ServletHolder(servletContainer), "/r/*");

        server.setHandler(handler);
        logger.info("Done configuring rest service");
    }

    public void start() throws Exception {
        server.start();
    }

    public void stop() throws Exception {
        server.stop();
    }

    public boolean isStarted() {
        return server.isStarted();
    }

    public boolean isStopped() {
        return server.isStopped();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:09:09.033

我认为您不能直接将 List 作为 JSON 返回。您需要有一个包含此列表的包装类。例如尝试这样的事情

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class TriggerWrapper{

  private List<Triggers> triggers;

  public List<Triggers> getTriggers(){
   if(triggers==null){
     triggers = new ArrayList<Triggers>();
   }
   return triggers;
  }
} 
```

然后在你的休息服务课上：

```
@Path("/jobs")
public class JobsResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public TriggerWrapper listScheduledJobs() throws SchedulerException {
        TriggerWrapper response = new TriggerWrapper();
        List<Triggers> triggers =  TaskEngine.getInstance().listScheduledJobs();
        response.getTriggers.addAll(triggers);
        return response;
    }

} 
```

你的 json 会是这样的：

```
{
    "triggerwrapper": {
        "triggers": [
            {
                "triggerid": 1
            },
            {
                "triggerid": 2
            }
        ]
    }
} 
```

当然，如果你愿意，你可以从你的 json 中删除根元素标签，它可以在 jersey 中配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:23:17.287

我终于找到了一个干净的解决方案，它涉及创建我自己的 MediaBodyWriter 类并将其添加为提供程序。您必须确保您没有使用 jersey-bundle jar，因为默认的 jaxb 到 json 提供程序将覆盖您的。

需要罐子

jersey-core jersey-servlet jersey-server

jackson-annotations jackson-databind jackson-core

我在网上某处找到了这个 MediaWriter 示例。抱歉没有网址，但感谢写它的人。

```
@Provider
@Produces({ MediaType.APPLICATION_JSON })
public class JacksonWriter implements MessageBodyWriter<Object> {
    private static final ObjectMapper MAPPER = new ObjectMapper();

    @Override
    public boolean isWriteable(Class<?> aClass, Type type, Annotation[] annotations, MediaType mediaType) {
        return true;
    }

    @Override
    public long getSize(Object value, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        return -1;
    }

    @Override
    public void writeTo(Object value, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType, MultivaluedMap<String, Object> httpHeaders,
            OutputStream entityStream) {
        try {
            MAPPER.writeValue(entityStream, value);
        } catch (IOException ex) {
            throw new RuntimeException(ex);
        }
    }
} 
```

当它加载时，您将看到一条日志消息，表明您的提供程序已加载。

这给了我期望的 json 输出，因为它不依赖于 JAXB 注释，而只是使用对象映射器/反射。可能效率较低，但对我来说没关系。

# android - 在较小的 sdk 版本中分页时，viewpager 会变慢

> ID：13716653
> 
> 赞同：1
> 
> 时间：2012-12-05T05:05:22.530
> 
> 标签：android, android-viewpager, fragment, android-fragmentactivity, android-support-library

我必须在我的项目中使用小于 15 的 sdk 版本，因为我的字体在使用 sdk:15 时会崩溃，这是一个屏幕截图：

![在此处输入图像描述](../Images/aecaced747055a9998e3dcf9146f0145.png)

但是当我使用较低的 sdk 版本时，我`ViewPager`在其他活动中的速度会变慢，这是我的`ViewPager`活动代码：

```
public class MainActivity extends FragmentActivity {

    private boolean async = false;

    private class MyFragment extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            Bundle b = getArguments();
            final int position = b.getInt("position");

            View v = inflater.inflate(R.layout.fragment, null);
            final ImageView img = (ImageView) v.findViewById(R.id.img);

            if (!async) {
                Bitmap bmp = BitmapFactory.decodeFile("/mnt/sdcard/image/"
                        + shortcuts[position] + ".jpg");
                img.setImageBitmap(bmp);

                async = true;
            } else {
                AsyncTask<Integer, Integer, Integer> task = new AsyncTask<Integer, Integer, Integer>() {

                    Bitmap bmp;

                    @Override
                    protected void onProgressUpdate(Integer... values) {
                        img.setImageBitmap(bmp);

                        super.onProgressUpdate(values);
                    }

                    @Override
                    protected Integer doInBackground(Integer... params) {
                        bmp = BitmapFactory.decodeFile("/mnt/sdcard/image/"
                                + shortcuts[params[0]] + ".jpg");
                        publishProgress();

                        return null;
                    }

                };
                task.execute(position);
            }

            return v;
        }
    }

    private class MyAdapter extends FragmentPagerAdapter {

        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            Fragment f = new MyFragment();

            Bundle b = new Bundle();
            b.putInt("position", position);
            f.setArguments(b);

            return f;
        }

        @Override
        public int getCount() {
            return shortcuts.length;
        }
    }

    private int[] shortcuts = new int[] { 1, 2, 3, 4, 5, 6 };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ViewPager pager = (ViewPager) findViewById(R.id.pager);
        FragmentManager fm = getSupportFragmentManager();
        MyAdapter pagerAdapter = new MyAdapter(fm);
        pager.setAdapter(pagerAdapter);
        pager.setOffscreenPageLimit(3);
    }
} 
```

当我设置`android:targetSdkVersion="15"`它运行良好，但将其设置为 10 时结果非常慢。更改页面时结果很慢，我该如何解决？我的 android-support-v4.jar 文件是 385,685 字节。

# ios - iOS/OSX 应用程序的跨平台许可

> ID：13716654
> 
> 赞同：-1
> 
> 时间：2012-12-05T05:05:31.943
> 
> 标签：ios, macos, licensing, app-store, cross-platform

我正在开发一个小实用的应用程序，我倾向于将它提交到应用程序商店。有 iPhone 和 OS X 版本，我也在考虑创建 iPad 版本。由于我想向用户收取应用程序的费用，但不想清理他的整个钱包，我想许可应用程序*跨平台*。换句话说：如果用户购买了桌面版*或*iPhone版*或*iPad版，他将免费获得其他的。

不幸的是，我想不出任何办法来实现它。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:27:41.107

如果您将 iPhone 和 iPad 版本创建为单个通用 iOS 应用程序，则用户只需为 iOS 版本支付一次费用。

但是 Apple 没有提供任何机制来支持您在 iOS 和 OS X 版本之间支持您想要的内容。

一种可能性是推出您自己的“促销代码”类型功能。但是以确保用户只能使用一次而不会生成另一个的方式来实现这一点几乎是不可能的。

我认为没有人真正有过为 iOS 版本和 OS X 版本支付一次费用的问题。

# java - NoClassDefFound 异常

> ID：13716657
> 
> 赞同：3
> 
> 时间：2012-12-05T05:05:36.737
> 
> 标签：java, servlets, apache-poi

我正在使用 apache poi 打开现有的 excel 文件。

```
public static int generateReport(Calendar csdate,Calendar cedate) throws Exception
{
     FileInputStream fileIn =null;
     FileOutputStream fileOut = null;
     int sum=0;//For calculating the total number of tickets
    final Workbook wb;
    fileIn =new FileInputStream("d:\\excelfiles\\TicketsReport.xlsm");
    wb = org.apache.poi.ss.usermodel.WorkbookFactory.create(fileIn);<-- Exception
    final Sheet sheet = wb.getSheet("Report");
    //rest of stuff
} 
```

我有一个 servlet，它从 html 页面获取日期并调用`generateReport()`. 问题是该程序以前以相同的`tomcat 6`版本和`servlet2.4`版本运行。在 Eclipse 中，该行没有编译时错误`WorkbookFactory.create()`。这是堆栈跟踪。

```
java.lang.NoClassDefFoundError: org/apache/poi/ss/usermodel/WorkbookFactory
at ReportFromJira.generateReport(ReportFromJira.java:59)
at JiraReportServlet.doPost(JiraReportServlet.java:52)
at JiraReportServlet.doGet(JiraReportServlet.java:36)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
at java.lang.Thread.run(Unknown Source) 
```

当我手动浏览 jar 文件时，我发现了这一点。

```
poi-3.8-20120326.jar contains
org.apache.poi.ss.usermodel->Workbook.class file

and poi-ooxml-3.8-20120326.jar contains
org.apache.poi.ss.usermodel->WorkbookFactory.class file 
```

我的类路径中包含两个 jar 文件。

知道为什么例外吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:20:51.573

`org.apache.poi.ss.usermodel.WorkbookFactory`包含在`poi-ooxml`jar 文件中。为了使用它，您需要核心 POI jar、POI OOXML jar 及其依赖项。您得到的异常表明您至少缺少其中一个。

[您可以在Apache POI 组件页面](http://poi.apache.org/overview.html#components)上找到有关内部和外部不同 POI 组件的依赖关系的更多信息。我建议您查看一下，查看您的应用程序并构建，然后放入您缺少的罐子中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:20:29.477

只需将其中一个罐子放在`WEB-INF\lib`您的 WAR\EAR 中，因为这是 Tomcat 默认从中挑选罐子的地方。

当通过 eclipse 配置未运行 tomcat 时，仅包含在 eclipse 项目中是不够的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T18:32:14.743

解决方案非常简单：

1.  下载此链接中的所有 jar 文件[http://archive.apache.org/dist/poi/release/bin/poi-bin-3.9-20121203.zip](http://archive.apache.org/dist/poi/release/bin/poi-bin-3.9-20121203.zip)
2.  提取文件并将所有 jar 文件复制到项目中的“\WebContent\WEB-INF\lib\”。请注意：您必须将其复制并粘贴到您在 ECLIPSE 中的项目中，不要通过 Windows 资源管理器复制粘贴它或将其作为外部 JAR 放置在 java 构建路径中，因为它永远不会起作用。

就是这样，你完成了.. :D 如果这能解决你的问题，请告诉我..

# git - 如何删除github中的所有提交历史？

> ID：13716658
> 
> 赞同：463
> 
> 时间：2012-12-05T05:05:36.093
> 
> 标签：git, github

我想删除所有提交历史记录，但将代码保持在当前状态，因为在我的提交历史记录中，有太多未使用的提交。

我该怎么做？

有没有 git 命令可以做到这一点？

```
git filter-branch ?
git rebase ?
... 
```

我的代码托管在 github.com 上。

* * *

## 回答 #1

> 赞同：1510
> 
> 时间：2014-09-23T16:43:02.147

删除该`.git` 文件夹可能会导致您的 git 存储库出现问题。如果您想删除所有提交历史记录但将代码保持在其当前状态，则按照以下方式执行此操作非常安全：

1.  查看

    `git checkout --orphan latest_branch`

2.  添加所有文件

    `git add -A`

3.  提交更改

    `git commit -am "commit message"`

4.  删除分支

    `git branch -D main`

5.  将当前分支重命名为 main

    `git branch -m main`

6.  最后，强制更新您的存储库

    `git push -f origin main`

PS：这不会保留您的旧提交历史记录

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-12-05T05:14:14.297

如果您确定要删除所有提交历史记录，只需删除`.git`项目根目录中的目录（注意它是隐藏的）。然后在同一文件夹中初始化一个新的存储库并将其链接到 GitHub 存储库：

```
git init
git remote add origin git@github.com:user/repo 
```

现在提交您当前版本的代码

```
git add *
git commit -am 'message' 
```

最后强制更新到 GitHub：

```
git push -f origin master 
```

`.git`但是，我建议在采取这些步骤之前备份历史记录（存储库中的文件夹）！

# android - If else 情况下的空指针异常

> ID：13716662
> 
> 赞同：1
> 
> 时间：2012-12-05T05:06:06.847
> 
> 标签：android, nullpointerexception

我在编辑文本字段上使用 if else case。在这种情况下，如果编辑文本值大于 5，则当我按下提交按钮时会出现弹出窗口，但是当我没有在 edittext 字段中输入任何值时，程序将强制关闭并在 if case 上给出错误空指针异常。

我的程序如下

```
 EditText name, temp,id_name;
Button submit,display;

ArrayList<NameValuePair> postParameters1 = new ArrayList<NameValuePair>();
String resp=null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    name=(EditText)findViewById(R.id.et_nm);
    temp=(EditText)findViewById(R.id.temp);
    submit = (Button)findViewById(R.id.button1);
    submit.setOnClickListener(this);

}

public void onClick(View butt)
{
    switch(butt.getId())
    {
        case R.id.button1:
            ds.setName(name.getText().toString());

            ds.setTemp(temp.getText().toString()); 

            if( temp > 5)
            {           
                tv1=new TextView(this);
                tv1.setText(" Temp is High");
                Dialog(tv1);
            }
            }

....
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:32:39.907

这可能会帮助你。

使用以下**代码更改您的 if**

```
 if( temp.getText() != null && temp.getText().toString().length() > 5)
    {           
         tv1=new TextView(this);
         tv1.setText(" Temp is High");
         Dialog(tv1);
    } 
```

# yii - YII 中非“ID”作为主键的关系

> ID：13716666
> 
> 赞同：2
> 
> 时间：2012-12-05T05:06:45.497
> 
> 标签：yii

我有一个模型 Anketa`user_id`作为主键，而不仅仅是`id`. 我想为它创建一个 HAS_ONE 关系，所以我编写了这个代码：

```
function relations()
{
return array(
...
'last_experience' => array(
    self::HAS_ONE, 'Experience', 'user_id',
    'condition' => '
        `signoff` = (
        SELECT MAX( `signoff` )
        FROM `experience` AS t2
        WHERE t2.user_id = last_experience.user_id )
    ',
),  
);
} 
```

但是当我尝试获取此属性时，我得到*“未定义属性“Anketa.id”。”* 错误。

我在 CActiveFinder.php 文件中发现了一些执行以下操作的代码：

```
if($this->relation instanceof CBelongsToRelation)
{
    if(is_int($i))
    {
        if(isset($parent->_table->foreignKeys[$fk]))  // FK defined
            $pk=$parent->_table->foreignKeys[$fk][1];
        else if(is_array($this->_table->primaryKey)) // composite PK
            $pk=$this->_table->primaryKey[$i];
        else
            $pk=$this->_table->primaryKey;
    }
    $params[$pk]=$record->$fk;
} 
```

此块`id`由于某种原因返回而不是`user_id`. 我不知道这是否是一个错误，因为其他关系工作正常，但它们没有这个复杂。

为什么会这样？我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:15:03.580

尝试将 PK 字段留空并使用“开”条件覆盖。

```
function relations()
{
    return array(
        'last_experience' => array(
            self::HAS_ONE,
            'Experience',
            '',
            'on' => 'user_id=last_experience.user_id'
        ),
    );
} 
```

# objective-c - 将 iPhone 5 添加到预先存在的通用应用程序

> ID：13716667
> 
> 赞同：0
> 
> 时间：2012-12-05T05:06:51.820
> 
> 标签：objective-c, ios, ios5, cocos2d-iphone

我有以下预处理器代码来检测设备是 iPhone 还是 iPad，并且我想将 iPhone5 添加到其中：

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)

#define POS_UI_CHEST  ( (IS_IPAD) ? (ccp(72.0,831.0)) : (ccp(33.0,396.0)) )
#define POS_UI_ROUTE  ( (IS_IPAD) ? (ccp(74.0,521.0)) : (ccp(36.0,240.0)) )
#define POS_UI_GUAGE  ( (IS_IPAD) ? (ccp(384.0,70.0)) : (ccp(160.0,20.0)) )
#define POS_UI_BALL   ( (IS_IPAD) ? (ccp(384.0,70.0)) : (ccp(160.0,20.0)) ) 
```

向每个条件添加第三个 ccp 的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:29:34.077

可以筑巢吗？: 运营商：

```
#define POS_UI_CHEST ( IS_IPAD ? ccp(72.0,831.0) : (IS_IPHONE5 ? ccp(xxx.0,yyy.0) : ccp(33.0,396.0)) ) 
```

（我删除了（不必要的（括号（for））（（clarity）））

您可以[在 stackoverflow 上找到用于 iPhone 5 检测的宏](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)。

# python - 如何将定义放在定义函数中

> ID：13716669
> 
> 赞同：1
> 
> 时间：2012-12-05T05:06:59.543
> 
> 标签：python, pygame, function

我试图弄清楚如何将定义函数放在类内的定义函数中。我想做的Python代码：

```
class Guy():
    def move(self):
        def left(self):
            //compute
        def right(self):
            //compute
        def up(self):
            //compute
        def down(self):
            //compute 
```

然后可以稍后在程序中调用 Guy.move.right()。解释器给我一个错误，说“函数没有正确的属性”或类似的东西。有没有办法做到这一点，而不必将我的函数从移动函数中取出并调用它们 Guy.right、Guy.left 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:16:51.050

函数通常没有向外部范围公开的字段和其他函数。这通常是对象的工作。但是你可以用类似的东西来做到这一点......

```
class Guy():
    class Move():
        def __init__(self):
            self.whatevs = "whatevs"
        def left(self):
            print("left")
            pass
            #compute
        def right(self):
            print("right")
            pass
            #compute
        def up(self):
            print("up")
            pass
            #compute
        def down(self):
            print("down")
            pass
            #compute

    def __init__(self):
        self.move = self.Move()

guy = Guy()
guy.move.left() 
```

我很确定这不是好的设计。你有理由想要做 guy.move.left() 吗？一些优雅的想法，因为它不是在其他方面，比如在简单方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:14:15.823

这是一种糟糕的编码方式......

没有办法在`left`下面调用函数，`Guy class`因为它在`move`函数的范围内，并且与 不同`class`的是，在另一个函数中添加一个函数不会使其成为它的属性。

在内部函数是外部函数的属性之前，无法使用封闭函数的名称来调用它

如果

```
def move():
    def left(): 
```

即如果函数内部只有一个函数，`left()`则从`move`函数返回是可行的。

但是在这种情况下，函数范围内有多个函数`move`。

您应该寻找类似 a`nested class`和 make`move`作为 a`class`而不是函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T05:14:23.257

我会避免嵌套方法和函数。

您`move`的方法每次调用时都会重新编译这些定向方法，并且这些定向方法只能从内部调用`move`。

也许您想要一个`move`带有方向参数和 self 的通用方法？

```
def move(self, direction):
    if direction == "left":
        pass //do something
    //etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T05:30:53.617

```
class Guy():
    def move(self,dir):
       def left():
          print "left!"
       {'left':left}[dir]()

Guy().move("left") 
```

会工作，虽然我没有看到太多的用例......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T05:37:01.577

有一种方法可以完成类似于原始代码要求的事情： `Guy.move()`将调用 move() 函数，并`Guy.move.right(Guy())`调用`move.right`函数。唯一的区别是我必须明确地将`self`对象传递给 move.right。

我不鼓励任何人走这条路，更像是“python 能做什么”的事情。

```
def to_attr(f):
    import inspect
    import new
    for c in f.func_code.co_consts:
        if inspect.iscode(c):
            g = new.function(c, globals())
            setattr(f, g.func_name, g)    

    return f

class Guy(object):
    @to_attr
    def move(self):
        def left(self):
            pass
        def right(self):
            print "Right"
        def up(self):
            pass
        def down(self):
            pass
        print "Move"

Guy.move.right(Guy())
Guy().move() 
```

`inspect`代码借自[Introspecting a given function's nested (local) functions in Python](https://stackoverflow.com/questions/1234672/introspecting-a-given-functions-nested-local-functions-in-python)

# iphone - 如何使用 cocos2d 从 iphone 游戏应用程序在 Facebook 粉丝页面上发布分数？

> ID：13716675
> 
> 赞同：0
> 
> 时间：2012-12-05T05:07:16.253
> 
> 标签：iphone, cocos2d-iphone

我一直在尝试使用 cocos2d 从我的 iPhone 游戏应用程序中找到一种在 Facebook 粉丝页面上发布分数的方法，但找不到方法。我使用了图形 API，但没有用。谁能给我一些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:31:04.040

在 IOS 6 facebook 集成非常容易。Apple 为 facebook 发布 api。请参阅此链接[http://prassan-warrior.blogspot.in/2012/11/integration-of-social-networks-into-ios.html](http://prassan-warrior.blogspot.in/2012/11/integration-of-social-networks-into-ios.html)

# google-apps-script - 如何避免在使用脚本计算公式之前从公式单元格中复制值？

> ID：13716676
> 
> 赞同：3
> 
> 时间：2012-12-05T05:07:17.940
> 
> 标签：google-apps-script

我有一个自定义函数，可以查找特定 Facebook 页面的当前点赞数。我还有一个自定义函数，通过触发器设置为每天运行一次，它应该复制和粘贴包含 facebook 查询函数的单元格。这将允许我有两列 1）日期和 2）喜欢的数量，每个新的一天都会更新。我必须在一天结束之前复制和粘贴值，这样每天的点赞数就不会自动重新计算为当前的点赞数。

我遇到的问题是在公式的复制和粘贴与值的复制和粘贴之间。看起来公式加载速度不够快，因为我一直在粘贴值“thinking...”。我曾尝试使用 Utilities.Sleep() 函数在复制和粘贴值之前暂停脚本，但它似乎无法解决问题。两个自定义函数都在下面。有什么建议吗？

```
function FBlikes(url) {
  var jsondata = UrlFetchApp.fetch("https://graph.facebook.com/"+url); 
  var object = Utilities.jsonParse(jsondata.getContentText());  
  return object.likes; //returns the number of "likes"
}

//pastes FB likes
function updateFbLikes() {
  var s = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Like History");
  var rangeToCopy = s.getRange("A2:E2"); //sets second line as the range to be copied
  var range = s.setActiveCell("A331");
  var notLastRow = true;
  while(notLastRow){  //finds last row
    if(range.getRow() == s.getLastRow()){
      notLastRow = false;
      s.insertRowAfter(s.getLastRow());
    }
    range = range.offset(1, 0);    
  }
  rangeToCopy.copyTo(range); // Paste the data
  range = range.offset(0, 0, 1, 5); //grab the whole new pasted row
  Utilities.sleep(10000); //slowdown so data will load before pasting values 
  range.copyValuesToRange(s, range.getColumn(), range.getColumn()+4, range.getRow(), range.getRow());   //paste values
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:39:51.833

如果我理解正确并且您尝试做的是从第 2 行获取结果并将它们作为静态值放在页面末尾。

如果是这样，您可以尝试：

1.  从工作表底部删除所有未使用的行
2.  使用以下代码

```
函数 updateFbLikes() {
  var s = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("喜欢历史");
  var valuesToCopy = s.getRange("A2:E2").getValues();
  s.appendRow(valuesToCopy[0]);
}

```

如果还有更多内容，请告诉我。

# silverlight - 如何在 Silverlight 中创建老虎文本框

> ID：13716680
> 
> 赞同：0
> 
> 时间：2012-12-05T05:07:44.207
> 
> 标签：silverlight, windows-phone-7, textbox, styles

我想在我的项目中为消息对话添加老虎文本框，我不知道如何应用样式或控件来获取 Silverlight 中的老虎文本框。

![老虎文本框的示例图像](../Images/51259eb88994a3562a058db6bd042cf1.png)

有什么方法可以在silverlight代码/样式中获得上面的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:29:47.807

如果没有在 Silverlight 中创建自己的自定义控件，就不可能拥有像这样形状的文本框。

但是，有两种方法可以得到你想要的。1）在您的文本框中添加一个简单的边框。根据您的需要更改不透明度设置。例如：

```
`<Border BorderBrush="Black" BorderThickness="3" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="49,33,0,0">
            <TextBox Height="72" TextAlignment="Center"  Name="textBox1" Text="TextBox"  Width="270" Background="White" />
 </Border>` 
```

2）放置气泡的图像，并在其中放置一个文本框。您必须更改一些不透明度设置，但这里有一个示例：

```
<Grid HorizontalAlignment="Left" Height="96" Width="316"  Margin="99,265,0,0" VerticalAlignment="Top">
            <Image    Name="image1" Stretch="Fill"   Source="bubble.png" />
            <TextBox   Name="textBox2" Text="TextBox"  SelectionBackground="#001BA1E2" SelectionForeground="Black" BorderBrush="Transparent" Background="Transparent" Margin="0,0,0,30" />
        </Grid> 
```

您必须根据您使用的图像对边距进行一些调整。但基本上，这就是上述 2 个文本框的外观：

![在此处输入图像描述](../Images/2cfe7df6ff856522241a5119790f2f8a.png)

如果您希望为 Tiger 文本框创建自己的控件，您可以按照以下步骤操作：

1) 在 Expression Blend 中打开项目

2) 在要添加文本框的位置，绘制一张Tiger Textbox 格式的图像。

3）右键单击此图像并选择“进入控制...”

4) 选择文本框。

# jquery - 简单的 jQuery 隐藏在 Rails 中不起作用

> ID：13716683
> 
> 赞同：0
> 
> 时间：2012-12-05T05:07:58.197
> 
> 标签：jquery, ruby-on-rails

我一直在四处寻找并尝试不同的方法，但我似乎无法获得我想要工作的最基本的实现。

我只是想在主页上操作一个表单，我想做的第一件事就是隐藏。我不明白为什么我的语法不正确。

我的表格——

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
      <%= devise_error_messages! %>

      <div><%= f.label :first_name %><br />
      <%= f.text_field :first_name %></div>

      <div><%= f.label :last_name %><br />
      <%= f.text_field :last_name %></div>

      <div class="second_step"><%= f.label :profile_name %><br />
      <%= f.text_field :profile_name %></div>

      <div class="second_step"><%= f.label :email %><br />
      <%= f.email_field :email %></div>

      <div><%= f.label :password %><br />
      <%= f.password_field :password %></div>

      <div><%= f.label :password_confirmation %><br />
      <%= f.password_field :password_confirmation %></div>

      <div><%= f.submit "Sign up" %></div>
    <% end %>

    <%= render "devise/shared/links" %> 
```

assets/javascripts/file_name.js 中的简单 js

```
 $('.second_step').hide(); 
```

我的 application.js

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require jquery.ui.datepicker
//= require justgage
//= require raphael.min
//= require jquery.purr
//= require best_in_place
//= require_tree . 
```

=====

# 更新

控制台错误-

```
Uncaught SyntaxError: Unexpected token ILLEGAL front.js:1
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost:3000/assets/rails.j 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:09:44.143

`.`需要在引号内：

```
 $('.second_step').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:34:48.233

我发现了错误。

我之前删除了文件名上的 .coffee 扩展名，上面的第一个控制台错误没有识别`#`默认 rails 注释中的 .coffee 扩展名。

我通过添加咖啡扩展名来使其正常工作，以便正确地将 a 识别`#`为评论。

一切都在下面使用文件名`front.js.coffee` # 将与匹配控制器相关的所有行为和钩子放在此处。# 所有这些逻辑都将自动在 application.js 中可用。# 你可以在这个文件中使用 CoffeeScript：http: [//jashkenas.github.com/coffee-script/](http://jashkenas.github.com/coffee-script/)

```
jQuery ->
     $('.second_step').hide(); 
```

你的回答有助于确保我的语法是正确的，那是 js 之外的东西。感谢您的关注。

# c# - 版本控制中应该忽略 *.datasource 吗？

> ID：13716684
> 
> 赞同：5
> 
> 时间：2012-12-05T05:08:03.643
> 
> 标签：c#, .net, entity-framework, version-control, ado.net

这应该在版本控制中被忽略吗？ `XXX/Properties/DataSources/XXXEntities.datasource`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:41:16.827

是的，它可以。在 git 中，您可以添加`*.datasource`到`.gitignore`根级别的文件以在任何地方忽略这些类型的文件，或者，您可以将该条目放在`.gitignore`特定目录中的文件中，它只会在该目录和其中的任何目录中有效。您还可以通过在目录中更深地添加此文件类型的“unignore”行来停止递归行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-27T09:44:26.943

简短的回答：是的，你可以忽略它们。

长答案：这取决于。这些 XML 文件（据我所知）被 Visual Studio 用于 WPF、WinForms 或 WebForms 中的数据边界 UI 元素。在大多数项目中，您不想直接从表示层访问数据源，而是通过业务层，它会有自己的 .datasource 文件。因此，如果您明确不知道自己需要它们，则可以忽略它们。

# c++ - 当对象按值从函数返回时，构造函数效率低下

> ID：13716688
> 
> 赞同：2
> 
> 时间：2012-12-05T05:08:36.673
> 
> 标签：c++, copy-constructor, assignment-operator

我的类 Matrix 有两个构造函数，包括复制一个，它执行深度复制。这样的解决方案非常适合复制另一个对象的明显情况。虽然在以下情况下：

```
Matrix m = m1 * m2; // for earlier constructed m1 & m2 
```

在我看来效率低下，因为我在乘法运算中创建了一个对象只是为了将其复制而不是直接分配给 m。而且矩阵可以占用非常大的内存。如何更好地处理，专业人士的普遍做法是什么？

矩阵作为二维列表动态实现，就像在稀疏矩阵的情况下一样。

PS我知道乘法的结果是本地的。但是，我仍然认为如果没有上述过多的计算，它可以以某种方式更好地处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T05:14:17.617

在 C++11 中，您可以创建一个移动构造函数，在您的情况下应该更快。我不打算解释如何这样做，因为已经有很多教程，例如：[http ://thbecker.net/articles/rvalue_references/section_01.html](http://thbecker.net/articles/rvalue_references/section_01.html)

您也可以尝试可以很好地优化这样的代码的表达式模板，尽管语法看起来会有所不同。有关入门，请参阅 [http://en.wikipedia.org/wiki/Expression_templates 。](http://en.wikipedia.org/wiki/Expression_templates)

# css - 保持 CSS3 多列宽度静态

> ID：13716694
> 
> 赞同：0
> 
> 时间：2012-12-05T05:09:24.993
> 
> 标签：css, width, multiple-columns

我正在尝试创建一个最容易被描述为水平滚动 pinterest 的布局。

例如，我有一些项目可以与前一个项目堆叠在一起，而不是从上到下延伸，而是从左到右。

到目前为止，看起来 CSS3 多列属性正是我想要的。我唯一的问题是宽度是灵活的（尽管声明了列宽）。不同的浏览器窗口呈现不同大小的列。

目前使用：

```
.multicol {
    -webkit-column-width: 150px;
    -webkit-column-gap: 0;
    height: 400px;
    width: auto;
} 
```

我的问题示例（调整窗口大小以查看宽度变化）：http: [//jsfiddle.net/pbg3r/4/](http://jsfiddle.net/pbg3r/4/)

有没有办法保持宽度固定？我只想要 Xpx 宽度的列，并且随着添加更多，页面会根据需要水平扩展。

w3 规范说保持它固定的唯一方法是“所有长度值（在水平文本中这些是：'width'、'column-width'、'column-gap' 和 'column-rule-width'）必须被指定。”

虽然我不确定如何给容器一个设定的宽度并保持水平连续扩展的能力。即使我这样做了，它仍然不能保证设定的宽度。

有什么方法可以保证每列的宽度为 Xpx？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:03:30.690

对于不同浏览器呈现不同大小列的问题，一个可能的答案很简单。

对于您的`.multicol`css 样式，您已经为`webkit`浏览器设置了样式，就像上面一样。由于`-webkit`（这是浏览器前缀）仅适用于`webkit`浏览器，因此您需要将每个浏览器前缀添加到相同的样式中，以便它在其他浏览器上正确显示。

这就是你应该让你的样式表看起来像这样：（*如果你愿意，你可以去掉每个浏览器样式之间的空格）*

```
.multicol {

/*webkit*/
-webkit-column-width: 150px;
-webkit-column-gap: 0;

/*moz*/
-moz-column-width: 150px;
-moz-column-gap: 0;

/*opera*/
-o-column-width: 150px;
-o-column-gap: 0;

height: 400px;
width: auto;
} 
```

这是一个更新的[小提琴](http://jsfiddle.net/pbg3r/5/)`webkit`，可以在、`firefox`或浏览器上正确显示您的内容`opera`（您可以为 Internet Explorer 添加样式，只需使用`-ms-`：）

您还需要将浏览器前缀添加到您在样式表中设置的任何其他样式。

# android - Android：方向：确定设备是否支持方向更改

> ID：13716698
> 
> 赞同：1
> 
> 时间：2012-12-05T05:09:38.073
> 
> 标签：android, android-layout, android-orientation

我想知道安卓手机是否真的有方向传感器。我怀疑并不是所有的安卓手机屏幕都会随着方向的变化而变化（比如带有 qwerty 键盘的手机）

我浏览了文档并在 [这里](http://developer.android.com/reference/android/view/OrientationEventListener.html#canDetectOrientation%28%29)找到了一个布尔方法“canDetectOrientation（）” 但是我发现描述中没有提到任何内容。谁能告诉我这是否是确定设备是否支持方向更改的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:57:55.437

如果我们传入函数`Type.All`，`getSensorList`那么我们将获得所有可用传感器的列表。

然后我们可以遍历一个列表并获取所有传感器的传感器类型，如果我们找到传感器类型方向（整数值为 3），那么我们可以得出结论该设备具有该传感器。

下面是相同的代码片段。

```
boolean OrientationSensorFound=false;
SensorManager mSensorManager;
Sensor mSensor;

mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
List<Sensor> mSensorList = mSensorManager.getSensorList(Sensor.TYPE_ALL );

for(int i=0;i<mSensorList.size();i++){
    // 3 is value for Orientation sensor
    if(Sensor.TYPE_ORIENTATION==mSensorList.get(i).getType()){
        OrientationSensorFound=true;
        break;
    }
}
Log.i("Sensor Found", "Orientation found : "+OrientationSensorFound); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:40:03.830

你可以看看实际的android源代码。只需按照[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/OrientationEventListener.java#OrientationEventListener.canDetectOrientation%28 %29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/OrientationEventListener.java#OrientationEventListener.canDetectOrientation%28%29)

# mysql - 如何改进 50GB 表？

> ID：13716701
> 
> 赞同：0
> 
> 时间：2012-12-05T05:09:43.690
> 
> 标签：mysql, database, partitioning

我们目前使用 InnoDB 存储引擎，速度约为 1k/s。一旦记录被插入到数据库中，它就会在报告中被查询，这就是问题所在。我们添加了正确的索引并压缩了表，但它只提供了这么多帮助。

大多数情况下，只有前 30 天的记录会被严格查询，其余的则无法访问。超过一年的记录根本不会被查询。此外，我们的用户只能真正访问最新的数据/记录。

Mysql 的分区功能对我们来说是不是很理想？我们是否必须通过我们的应用程序实现我们自己的分区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:44:01.497

MySQL 查询缓存可以显着提高 SELECT 查询的性能。如果您还没有使用它，那么您肯定可以从中受益，而且它可能比分区更容易实现。

查询缓存将 SELECT 查询的结果存储在内存中，如果在表更改之前再次将相同的 SELECT 查询发送到服务器，则使用它们提供即时响应。

下面是分配 2GB 服务器内存来缓存 SELECT 查询所需的 my.ini 配置项的示例：

```
#Query Cache
query_cache_size = 209715200
query_cache_limit = 10485740 
```

# maven - 我刚刚在 Maven 安装期间输入的数字的含义

> ID：13716703
> 
> 赞同：0
> 
> 时间：2012-12-05T05:10:02.017
> 
> 标签：maven

因此，只需打开一本 Maven 书，按照安装 maven 的说明开始，当我说 mvn archetype:generate ... 在安装期间它开始询问我应该为它所询问的内容输入值的问题！好吧，我知道我稍后会学习它们，但主要是想确保我在这一步输入的值不会在以后搞砸其他东西：

```
[INFO] Parameter: groupId, Value: 1
[INFO] Parameter: packageName, Value: 1
[INFO] Parameter: package, Value: 1
[INFO] Parameter: artifactId, Value: 1
[INFO] Parameter: basedir, Value: /Users/JonyIve
[INFO] Parameter: version, Value: 1
[INFO] project created from Old (1.x) Archetype in dir: /Users/JonyIve/1
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:33:07.600

您应该为这些坐标提供适当的值。[在http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-relationships.html#pom-relationships-sect-more-coordinates](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-relationships.html#pom-relationships-sect-more-coordinates)了解更多信息

例子是

*   groupId：com.mycompany
*   artifactId：测试项目
*   版本：1.0.0-SNAPSHOT

其余的 .. 只需使用默认值。

# c# - Orchard CMS 1.4：以编程方式修改菜单 - 最佳实践

> ID：13716705
> 
> 赞同：0
> 
> 时间：2012-12-05T05:10:10.400
> 
> 标签：c#, asp.net-mvc, orchardcms

摆弄 Orchard CMS，想知道你们是否遵循任何标准来呈现自定义多级菜单项。目前我正在我的 Theme -> MenuItem.cshtml 中做所有事情，但它变得有点混乱。所以想知道您是否可以为我指出一个正确的方向，即良好实践或任何此类实现。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:00:13.593

升级到 1.6。您将获得开箱即用的多级菜单。

# excel - 仅将单元格中的某些字符与另一个单元格中的某些字符进行比较

> ID：13716706
> 
> 赞同：1
> 
> 时间：2012-12-05T05:10:17.673
> 
> 标签：excel, vba

大家好，我正在 Excel 2003 中运行一个宏来将物业地址与其所有者地址相匹配，因此我最终得到了一份缺席所有者的报告。

所以在：

```
column A                                       column C 
10 Smith DR Smithville                         10 Smith DVE, Smithfield, 49089 Antartica 
```

这就是一些原始数据的输入方式，但我需要将此记录和所有其他略有不同的记录匹配，因此宏在搜索缺席所有者地址时不会选择它，然后将所选记录填充到 sheet2。用外行的话来说，如果我可以将 A 列中的前 6 个字符与 C 列中的前 6 个字符进行比较，那么我认为它会按照我需要的方式工作。

有谁知道我如何在下面显示的宏中实现这一点

```
Sub test()
Dim i As Long, lr As Long, r As Long, ws As Worksheet, value As Variant, 
    val As Variant
Dim sval As Integer, lr2 As Long
Application.ScreenUpdating = False
Set ws = Worksheets("Sheet1")
lr = ws.Cells(Rows.Count, "A").End(xlUp).Row
For i = 2 To lr
    value = Split(Cells(i, 1).value, ", ")
    For val = LBound(value) To UBound(value)
        sval = InStr(1, Cells(i, 3).value, value(val), 1)
        If sval = 0 Then Range("A" & i & ":" & "C" & i).Interior.Color = 65535
    Next
Next
For r = 2 To lr
    lr2 = Sheets("Sheet2").Cells(Rows.Count, "A").End(xlUp).Row
    If Range("A" & r).Interior.Color = 65535 Then
        Rows(r).Copy Destination:=Sheets("Sheet2").Rows(lr2 + 1)
        lr2 = Sheets("Sheet2").Cells(Rows.Count, "A").End(xlUp).Row
    End If
Next r
Sheets("Sheet2").Cells.Interior.ColorIndex = 0
Application.ScreenUpdating = True
MsgBox "Done Macro"
End Sub 
```

希望我以此处所需的正确格式粘贴了代码。因此，任何帮助和指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:18:47.440

You can use the formula `LEFT()`. This will check the first 6 characters from the cell in column A to the first 6 characters in column C. If there's a match, it will add the value from column A to the next free cell in column A, Sheet2.

```
Sub First6Characters()

LastRow = Cells(Rows.Count, "A").End(xlUp).Row
LastRowSheet2 = Sheets("Sheet2").Cells(Rows.Count, "A").End(xlUp).Row

For i = 1 To LastRow
    If Left(Range("A" & i), 6) = Left(Range("C" & i), 6) Then
        Sheets("Sheet2").Range("A" & LastRowSheet2).Value = Range("A" & i).Value
        LastRowSheet2 = LastRowSheet2 + 1
    End If
Next i

End Sub 
```

**Source:** [http://www.techonthenet.com/excel/formulas/left.php](http://www.techonthenet.com/excel/formulas/left.php)

# c# - 编译委托和调度程序时出错

> ID：13716708
> 
> 赞同：0
> 
> 时间：2012-12-05T05:10:40.320
> 
> 标签：c#, visual-studio-2010, delegates, compiler-errors, dispatcher

我是*线程世界*的新手，并试图让我的应用程序与线程一起工作。这是我得到的：

```
public static void ThreadProc()
{
    Thread.Sleep(500);
    MemoryMappedFile mmf = MemoryMappedFile.OpenExisting("SuperMMFofDoom", MemoryMappedFileRights.ReadWrite);
    MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor(0, sizeof(double)*3 + sizeof(int) *2);
    Image imgS = new Image();
    ImageTrigger myMessage;
    Mutex imgMutex = new Mutex(false, "imgMutex");

    while (threadRunning)
    {
        imgMutex.WaitOne();

        accessor.Read(0, out myMessage);

        // [...]

        Dispatcher.Invoke(DispatcherPriority.Normal,
            new Action(delegate()
                {
                    // [...]
                }),
            new object[] { imgS, myMessage.performance }
           );

        imgMutex.ReleaseMutex();
    }
} 
```

当我评论所有 Dispatcher.Invoke() 时，这个东西会编译。如果我不这样做，我会收到一个错误`System.Windows.Threading.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority, System.Delegate, object)`并且它不会编译。

有任何想法吗？

我在 Windows 7 Pro x64 上使用 VS2010。这是一个 C# WPF 项目，它还利用了一些在同一项目中编译的 C++ DLL。最后，这是文件的标题：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Threading;
using Microsoft.Win32;
using System.Runtime.InteropServices;
using System.ComponentModel;
using System.IO;
using System.Reflection;
using System.Diagnostics;
using System.Threading;
using System.IO.MemoryMappedFiles;
using Common; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:13:37.757

您不应该创建一个新的`Action`只是将您的代表作为一个：

异步：

```
Dispatcher.BeginInvoke(DispatcherPriority.Background, (Action)delegate()
{

}); 
```

同步：

```
Dispatcher.Invoke(DispatcherPriority.Background, (Action)delegate()
{

}); 
```

或者，如果您不在控件或窗口上：

```
Application.Current.Dispatcher.Invoke(DispatcherPriority.Background, (Action)delegate()
{

}); 
```

# windows-8 - 为 windows 8 开发 Top AppBar

> ID：13716713
> 
> 赞同：3
> 
> 时间：2012-12-05T05:11:16.793
> 
> 标签：windows-8, windows-store-apps, winjs, appbar

我正在为 Windows 8 开发一个简单的应用程序。现在我想修改顶部应用程序栏（即它不应该看起来像底部应用程序栏），并且我希望它比仅显示默认图标（如导航作业）更好地工作. 我想添加不同大小（长度）的图标。是的，类似于天气应用程序或旅行应用程序的图标。但我找不到任何好的参考。请帮忙，我应该从哪里开始做。以及是否可以修改应用栏。请指导。注意：我正在用 javascript 开发应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:47:49.393

您可以使用以下 HTML 实现非常基本的顶部应用栏：

```
<div data-win-control="WinJS.UI.AppBar" data-win-options="{layout:'custom',placement:'top'}">
    <!-- your custom top bar content goes here -->
</div> 
```

从内部`div`，您可以将任何内容添加到您的内容中，甚至是 AppBarCommands。不要忘记初始化所有获胜控件：

```
<script>
    document.addEventListener("DOMContentLoaded", function () {
         WinJS.UI.processAll();
    }, false);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:07:23.697

[快速入门：添加带有自定义内容的应用栏](http://msdn.microsoft.com/en-us/library/windows/apps/hh780658.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:20:49.567

阅读下面的文章，你会得到很多好的提示

[31 天的 Windows 8 | 第 4 天：新控件](http://www.jeffblankenburg.com/2012/11/04/31-days-of-windows-8-day-4-new-controls)

# php - 检测客户端域名

> ID：13716714
> 
> 赞同：0
> 
> 时间：2012-12-05T05:12:06.747
> 
> 标签：php, javascript

> **可能重复：**
> [从 iframe 访问父 url](https://stackoverflow.com/questions/3420004/access-parent-url-from-iframe)

我目前有一个 iframe 标签，例如：

```
<iframe src="www.mydomain.com/animation.html></iframe> 
```

...我希望我的客户嵌入这个标签以呈现在他们的页面上，但是我只想在我的数据库中提供一些域名列表来呈现这个 iframe，所以我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:35:37.060

如果您想限制哪些网站可以将您的页面包含在 iframe 中，您可以向每个域分发唯一令牌；每个域的代码如下所示：

```
<iframe src="http://mydomain.com/animation.html?token=absfqeqwe"></iframe> 
```

这只是设置了一个小障碍，有人可以简单地从您的一个合法站点复制它，然后自己使用它。

个人认为这是不可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:34:04.603

**解决方案 1：** 您可以通过允许他们的 IP 地址并禁止所有其他 IP 来做到这一点，只需创建 .htaccess 文件并在其中添加以下规则。

```
order deny,allow
deny from all
allow from 111.222.333.444 
```

**解决方案2：** 第二种应用限制的方法是使用PHP文件而不是平面HTML文件并在其中添加任何类型的限制，请参见下面的代码

// 动画.php

```
<?php
$allowed_domains = array(
    'www.example-1.com',
    'www.example-2.com',
    'www.example-3.com',
);

if (in_array($_SERVER['SERVER_NAME'], $allowed_domains)) : ?>

    Your I-frame content goes here!

<?php endif;?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:46:52.207

许多浏览器都支持[这里](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)`x-frame-options header`描述的。这允许您列出可以构成您的页面的可接受域。

这里的一些其他讨论：[Frame Buster Buster ...需要破坏代码](https://stackoverflow.com/questions/958997/frame-buster-buster-buster-code-needed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T05:22:40.843

您可以使用[parse_url](http://php.net/manual/ru/function.parse-url.php)。它可以帮助您检测域

# iphone - 为什么图像没有从 url 的 xml 文件加载并且没有显示在表格视图中

> ID：13716716
> 
> 赞同：1
> 
> 时间：2012-12-05T05:12:24.697
> 
> 标签：iphone, ios, ios6

我正在从 url 检索 XML 文件，我通过解析它得到了图像。我的 XML 文件是这样组成的，

```
<Products>
<products id="1">
<img>http://images.com/images/image1.jpg</img>
</products>
<products id="2">
<img>http://images.com/images/image2.jpg</img>
</products>
<products id="3">
<img>http://images.com/images/image3.jpg</img>
</products>
</Products> 
```

Tableviewcontroller.m 有这样的代码，

```
- (void)viewDidLoad{
 [super viewDidLoad];
 xmlParser = [[XMLParser alloc] loadXMLByURL:@"http://images.com/Products.xml"];
 [self.tableView reloadData];}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
return 1;}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
return [xmlParser.tweets count];}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"Products";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
if (cell == nil) {
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];}
UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:1];
cell.imageView.image = currentTweet;
[cell.contentView addSubview:self.productImage];
return cell;} 
```

这里 xmlParser 是类 XMLParser 的对象，而 tweets 是数组。产品图片是 UIImageview 的参考。现在我的问题是，当我运行应用程序时，它在 tableview 中将图像显示为缩略图，但我想将图像显示为下面的屏幕截图。

![期望的输出](../Images/ff305b266fcfe44f6367d56b35aa5aa3.png)

在情节提要中引用 UIImage 视图时也感到困惑，当我在 .h 文件中将 productImage 定义为 UIImageView 并尝试连接情节提要时，它向我显示错误，例如非法配置：连接“productImage”不能将原型对象作为其目的地。所以请告诉我如何在故事板中连接它。

请建议我解决这个问题，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:40:35.623

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Products";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];}

UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
UIImageView *tweetImageView = [UIImageView alloc] 
                           initWithFrame:CGRectMake(0,0,
                           cell.frame.size.width , cell.frame.size.height)];
tweetImageView.image = currentTweet;
[cell.contentView addSubview:tweetImageView];

return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
return self.view.frame.size.height/3;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T05:27:25.397

您正在尝试将 ID 类型分配给`UIImage`

Try this code to load image for you cell

```
NSURL *imageURL = [NSURL URLWithString:[[xmlParser tweets] objectAtIndex:1]];
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage *currentTweet = [UIImage imageWithData:imageData];
cell.imageView.image = currentTweet; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T05:43:43.907

**1）问题**：在表格视图中获取缩略图，但您想在背景中显示该图像（完整的单元格宽度）我对吗？

**解决方案**：

**在下面提到的方式中，您的图像可以在背景中传播**

```
 UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:1];
 UIImageView *tweetImageView = [UIImageView alloc] 
                               initWithFrame:CGRectMake(0,0,
                               cell.frame.size.width , cell.frame.size.height)];
 tweetImageView.image = currentTweet;
 [cell.contentView addSubview:tweetImageView]; 
```

**另一种选择是您可以设置单元格的背景图像，例如：**

```
[cell setBackgroundView:tweetImageView] 
```

**更新 ：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (cell == nil) 
     {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                      reuseIdentifier:CellIdentifier];
     }
     UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
     UIImageView *tweetImageView = [UIImageView alloc] 
                                   initWithFrame:CGRectMake(0,0,
                                   cell.frame.size.width , cell.frame.size.height)];
     tweetImageView.image = currentTweet;
     [cell.contentView addSubview:tweetImageView];
     return cell;
} 
```

不要创建单独的图像视图，而是使用一个图像视图。

并且对于每一行（indexPath.row）将不同的图像传递给图像视图。

对于每一行，都会创建一个新单元格，其新的 imageview 将从数组中获取相应的图像

希望能帮助到你 ：）

# elasticsearch - 使用 AND 运算符的基于 Elasticsearch URI 的查询

> ID：13716719
> 
> 赞同：31
> 
> 时间：2012-12-05T05:12:37.303
> 
> 标签：elasticsearch

如何在基于 URI 的查询中指定 AND 操作？我正在寻找类似的东西：

```
http://localhost:9200/_search?q="profiletype:student AND username:s*" 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-05T06:00:41.523

根据文档，它应该像您描述的那样工作。请参阅[http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)

也就是说，您还可以使用以下内容：

```
http://localhost:9200/_search?q="+profiletype:student +username:s*" 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-01-10T10:12:43.473

对于ElasticSearch 中的[URI 搜索](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-uri-request.html)，您可以使用 AND 运算符`profiletype:student AND username:s`，如您所说，但不带引号：

```
 _search?q=profiletype:student AND username:s* 
```

您还可以将默认运算符设置为`AND`

```
 _search?q=profiletype:student username:s*&default_operator=AND 
```

或者，您可以将`+` [运算符](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html)用于必须存在的术语，即 `+profiletype:student +username:s`用作查询字符串。但是，如果没有 URL 编码，这将不起作用。在 URL 编码`+`is`%2B`和 space is 中`%20`，因此替代方案是

```
 _search?q=%2Bprofiletype:student%20%2Busername:s* 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-13T20:00:01.553

你可以试试下面的线。

```
http://localhost:9200/_search?q=profiletype:student%20AND%20username:s*

http://localhost:9200/_search?q=profiletype:student AND username:s* 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-27T15:12:51.213

我必须结合使用默认运算符和 + 符号才能使其工作

```
curl -XGET 'localhost:9200/apm/inventory/_search?default_operator=AND&q=tenant_id:t2+_all:node_1' 
```

# rest - Neo4j SSL 文件是snakeoil.cert 和snakeoil.key PEM 文件吗？

> ID：13716720
> 
> 赞同：1
> 
> 时间：2012-12-05T05:12:41.287
> 
> 标签：rest, ssl, https, config, neo4j

我试图通过[`neo4j-rest-client`](http://pypi.python.org/pypi/neo4jrestclient/)使用从 debian 源安装 Neo4j 后生成的文件`snakeoil.key`连接到 Neo4j HTTPS 服务器。`snakeoil.cert`但是，这些文件似乎不是[PEM](http://en.wikipedia.org/wiki/X.509#Certificate_filename_extensions)格式的，并且在幕后，由于[httplib2](http://code.google.com/p/httplib2/)[`neo4j-rest-client`](http://pypi.python.org/pypi/neo4jrestclient/) ，只能处理 PEM 格式的文件。所以，然后我创建了自己的PEM文件，但这一次看起来 Neo4j 不喜欢这种格式。我对吗？有没有办法让 Neo4j 服务器在 SSL 模式下运行 PEM 文件？`ssl.crt``ssl.key`

AFAIK，PEM 文件应该看起来像

```
-----BEGIN CERTIFICATE-----
blahblahblah
-----END CERTIFICATE----- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:36:13.203

不，它们不是 PEM 文件，但您可以从证书文件 (snakeoil.crt) 创建 PEM 文件。有关说明，请参见此处：

[http://www.digicert.com/ssl-support/pem-ssl-creation.htm](http://www.digicert.com/ssl-support/pem-ssl-creation.htm)

# android - 点击通知后打开应用程序

> ID：13716723
> 
> 赞同：129
> 
> 时间：2012-12-05T05:13:20.443
> 
> 标签：android, notifications

我的应用程序中有一条通知，其中包含以下代码：

```
//Notification Start

   notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

   int icon = R.drawable.n1; 
   CharSequence tickerText = "Call Blocker";
   long when = System.currentTimeMillis(); //now
   Notification notification = new Notification(icon, tickerText, when);
   Intent notificationIntent = new Intent(context, Main.class);
   PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

   Context context = getApplicationContext();
   CharSequence title = "Call Blocker";
   text = "Calls will be blocked while driving";

   notification.setLatestEventInfo(context, title, text, contentIntent);

   notification.flags |= Notification.FLAG_ONGOING_EVENT;
   notification.flags |= Notification.FLAG_SHOW_LIGHTS;
   notificationManager.notify(1, notification);

} 
```

我的通知触发得很好，但我的问题是，当我在通知中心单击通知时，它不会启动我的应用程序。

基本上，点击我的通知后，什么也没有发生！我应该怎么做才能在单击我的通知后开始我的主要活动。谢谢。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-12-05T05:19:34.533

请参见下面的代码。我正在使用它，它正在打开我的 HomeActivity。

```
 NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

    Intent notificationIntent = new Intent(context, HomeActivity.class);

    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent intent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);

    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification); 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-08-04T09:30:03.907

这是使用 NotificationCompact.Builder 类的示例，该类是构建通知的最新版本。

```
private void startNotification() {
    Log.i("NextActivity", "startNotification");

 // Sets an ID for the notification
      int mNotificationId = 001;

    // Build Notification , setOngoing keeps the notification always in status bar
    NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
                    .setSmallIcon(R.drawable.ldb)
                    .setContentTitle("Stop LDB")
                    .setContentText("Click to stop LDB")
                    .setOngoing(true);

    // Create pending intent, mention the Activity which needs to be 
    //triggered when user clicks on notification(StopScript.class in this case)

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, StopScript.class), PendingIntent.FLAG_UPDATE_CURRENT);

    mBuilder.setContentIntent(contentIntent);

    // Gets an instance of the NotificationManager service
   NotificationManager mNotificationManager =
            (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);

    // Builds the notification and issues it.
    mNotificationManager.notify(mNotificationId, mBuilder.build());

} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-05T05:15:11.860

看起来你错过了这个部分，

```
notification.contentIntent = pendingIntent; 
```

尝试添加它，它应该可以工作。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-12-05T05:26:53.847

请使用以下代码获取简单通知的完整示例，在此代码中，您可以在单击通知后打开应用程序，它将解决您的问题。

```
public class AndroidNotifications extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button notificationButton = (Button) findViewById(R.id.notificationButton);

        notificationButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Timer timer = new Timer();
                timer.schedule(new TimerTask() {
                    @Override
                    public void run() {
                        // Notification Title and Message
                        Notification("Dipak Keshariya (Android Developer)",
                                "This is Message from Dipak Keshariya (Android Developer)");
                    }
                }, 0);
            }
        });
    }

    // Notification Function
    private void Notification(String notificationTitle,
            String notificationMessage) {
        NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        android.app.Notification notification = new android.app.Notification(
                R.drawable.ic_launcher, "Message from Dipak Keshariya! (Android Developer)",
                System.currentTimeMillis());

        Intent notificationIntent = new Intent(this, AndroidNotifications.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
                notificationIntent, 0);

        notification.setLatestEventInfo(AndroidNotifications.this,
                notificationTitle, notificationMessage, pendingIntent);
        notificationManager.notify(10001, notification);
    }
} 
```

有关更多信息，请参见下面的链接。

[简单通知示例](http://androidcodeexamples.blogspot.in/2012/05/simple-notification-example.html)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-11-10T07:15:32.987

使用下面的代码为打开的活动创建通知。这个对我有用。 [完整代码](http://android-er.blogspot.in/2013/06/start-activity-once-notification-clicked.html)

```
 Intent myIntent = new Intent(context, DoSomething.class);
 PendingIntent pendingIntent = PendingIntent.getActivity(
        context, 
        0, 
        myIntent, 
        Intent.FLAG_ACTIVITY_NEW_TASK);

 myNotification = new NotificationCompat.Builder(context)
   .setContentTitle("Exercise of Notification!")
   .setContentText("Do Something...")
   .setTicker("Notification!")
   .setWhen(System.currentTimeMillis())
   .setContentIntent(pendingIntent)
   .setDefaults(Notification.DEFAULT_SOUND)
   .setAutoCancel(true)
   .setSmallIcon(R.drawable.ic_launcher)
   .build();

 notificationManager = 
   (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
 notificationManager.notify(MY_NOTIFICATION_ID, myNotification); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-10-08T07:14:00.060

```
public void addNotification()
{
    NotificationCompat.Builder mBuilder=new NotificationCompat.Builder(MainActivity.this);
    mBuilder.setSmallIcon(R.drawable.email);
    mBuilder.setContentTitle("Notification Alert, Click Me!");
    mBuilder.setContentText("Hi,This notification for you let me check");
    Intent notificationIntent = new Intent(this,MainActivity.class);
    PendingIntent conPendingIntent = PendingIntent.getActivity(this,0,notificationIntent,PendingIntent.FLAG_UPDATE_CURRENT);

    mBuilder.setContentIntent(conPendingIntent);

    NotificationManager manager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    manager.notify(0,mBuilder.build());
    Toast.makeText(MainActivity.this, "Notification", Toast.LENGTH_SHORT).show();

} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-11-07T08:56:04.127

用这个：

```
 Notification mBuilder =
            new NotificationCompat.Builder(this)
                    .setSmallIcon(R.drawable.ic_music)
                    .setContentTitle(songName).build();

    mBuilder.contentIntent=  PendingIntent.getActivity(this, 0,
            new Intent(this, MainActivity.class), PendingIntent.FLAG_UPDATE_CURRENT); 
```

contentIntent 将在单击通知时处理打开活动

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-15T06:47:52.243

这是我接近的方式。

```
public class AppFCMService extends FirebaseMessagingService {

    private final static String TAG = "FCM Message";
    String notify, requstId, Notification;
    PendingIntent pendingIntent;

    @Override
    public void onMessageReceived(RemoteMessage remoteMessage) {
        Log.d(TAG, "From: " + remoteMessage.getFrom());
        Log.d(TAG, "Notification Message Body: " + remoteMessage.getNotification().getBody());
        //split string and getting order id from notification
        String Str = remoteMessage.getNotification().getBody();
        String[] tmp;
        tmp = Str.split(" ");
        String temp1 = tmp[0];
        String temp2 = tmp[1];
        String id = tmp[2];
        notify = temp1 + " " + temp2;
        requstId = id;
        showNotification(remoteMessage.getNotification().getBody());
    }

    private void showNotification(String messageBody) {
        // check whether session has been initiated or not
        if (new SessionHelper(getApplicationContext()).isLoggedIn()) {

            if (notify.equalsIgnoreCase("Travel request")) {

                Intent intent = new Intent(this, ViewTravelDetailsActivity.class);
                intent.putExtra("TravelRequestID", requstId);
                intent.putExtra("BackPress", "Notify");
                pendingIntent = PendingIntent.getActivity(this, 0, intent,
                        PendingIntent.FLAG_ONE_SHOT);

            } else if (notify.equalsIgnoreCase("Timesheet replied")) {

                Intent intent = new Intent(this, ViewReplyActivity.class);
                intent.putExtra("timesheetActivityID", requstId);
                intent.putExtra("BackPress", "Notify");
                intent.putExtra("RealmData", "DeleteRealm");
                intent.putExtra("isToday", "true");
                pendingIntent = PendingIntent.getActivity(this, 0, intent,
                        PendingIntent.FLAG_ONE_SHOT);
            } else {

                Intent intent = new Intent(this, Dashboard.class);
                intent.putExtra("timesheetActivityID", requstId);
                pendingIntent = PendingIntent.getActivity(this, 0, intent,
                        PendingIntent.FLAG_ONE_SHOT);
            }
        } else {

            Intent intent = new Intent(this, LoginActivity.class);
            intent.putExtra("timesheetActivityID", requstId);
            pendingIntent = PendingIntent.getActivity(this, 0, intent,
                    PendingIntent.FLAG_ONE_SHOT);
        }

        Bitmap notifyImage = BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher);
        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
                .setSmallIcon(R.mipmap.ic_launcher)
                .setLargeIcon(notifyImage)
                .setColor(Color.parseColor("#FFE74C3C"))
                .setContentTitle("TEST")
                .setContentText(messageBody)
                .setAutoCancel(true)
                .setSound(defaultSoundUri)
                .setContentIntent(pendingIntent);
        NotificationManager notificationManager =
                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.notify(0, notificationBuilder.build());
    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-01-26T23:47:37.333

多亏了上面的帖子，这里的主线 -*从较长的代码答案中提炼出来*- 是连接通知与点击侦听器设置以打开某些应用程序活动所必需的。

```
private Notification getNotification(String messageText) {

    Notification.Builder builder = new Notification.Builder(this);
    builder.setContentText(messageText);
    // ...

    Intent appActivityIntent = new Intent(this, SomeAppActivity.class);

    PendingIntent contentAppActivityIntent =
            PendingIntent.getActivity(
                            this,  // calling from Activity
                            0,
                            appActivityIntent,
                            PendingIntent.FLAG_UPDATE_CURRENT);

    builder.setContentIntent(contentAppActivityIntent);

    return builder.build();
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-27T09:49:52.220

```
public static void notifyUser(Activity activity, String header,
        String message) {
    NotificationManager notificationManager = (NotificationManager) activity
            .getSystemService(Activity.NOTIFICATION_SERVICE);
    Intent notificationIntent = new Intent(
            activity.getApplicationContext(), YourActivityToLaunch.class);
    TaskStackBuilder stackBuilder = TaskStackBuilder.create(activity);
    stackBuilder.addParentStack(YourActivityToLaunch.class);
    stackBuilder.addNextIntent(notificationIntent);
    PendingIntent pIntent = stackBuilder.getPendingIntent(0,
            PendingIntent.FLAG_UPDATE_CURRENT);
    Notification notification = new Notification.Builder(activity)
            .setContentTitle(header)
            .setContentText(message)
            .setDefaults(
                    Notification.DEFAULT_SOUND
                            | Notification.DEFAULT_VIBRATE)
            .setContentIntent(pIntent).setAutoCancel(true)
            .setSmallIcon(drawable.notification_icon).build();
    notificationManager.notify(2, notification);
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2022-01-18T07:06:25.337

android 12 及更高版本的通知代码：

如果您的应用面向 Android 12，则必须指定应用创建的每个 PendingIntent 对象的可变性。此附加要求可提高您应用的安全性。

ANDROID 12 之前

```
PendingIntent contentIntent = PendingIntent.getActivity(context, (int) System.currentTimeMillis(), notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

对于安卓 12：

```
PendingIntent contentIntent = PendingIntent.getActivity(context, (int) System.currentTimeMillis(), notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE); 
```

首先创建频道：

```
 @RequiresApi(api = Build.VERSION_CODES.O)
private synchronized String createChannel() {
    NotificationManager mNotificationManager = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);

    String name = "dummy text for channel";
    int importance = NotificationManager.IMPORTANCE_LOW;

    NotificationChannel mChannel = new NotificationChannel("channel name, name, importance);
    mChannel.setShowBadge(false);
    mChannel.enableLights(true);
    mChannel.setLightColor(Color.BLUE);
    if (mNotificationManager != null) {
        mNotificationManager.createNotificationChannel(mChannel);
    } else {
        stopSelf();
    }
    return "Channel";
} 
```

通知示例：

```
String channel="";
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
            channel = createChannel();
        else {
            channel = "";
        }

    RemoteViews mContentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.general_notification_layout_new);

    NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    NotificationCompat.Builder builder = new NotificationCompat.Builder(context, channel);
    Intent notificationIntent = new Intent(getApplicationContext(), MainActivity.class);
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent contentIntent = PendingIntent.getActivity(context, (int) System.currentTimeMillis(), notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);

    builder.setSmallIcon(R.drawable.notification_small_icon_one)
            .setPriority(NotificationCompat.PRIORITY_HIGH)
            .setSound(notificationSound)
            .setColor(ContextCompat.getColor(this, R.color.colorPrimary))
            .setCustomContentView(mContentView)
            .setCustomBigContentView(mContentView)
            .setContentIntent(contentIntent);

    builder.setAutoCancel(true);

    Notification notification = builder.build();
    mNotificationManager.notify(notificationId, notification); 
```

[![Android 12 通知](../Images/be0715ae3ae63c1d5547bc7d9a54fcc3.png)](https://i.stack.imgur.com/NsMFq.jpg)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-12-05T05:21:02.970

用我的例子...

```
 public void createNotification() {
        NotificationManager notificationManager = (NotificationManager) 
              getSystemService(NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.icon,
            "message", System.currentTimeMillis());
        // Hide the notification after its selected
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        Vibrator vibrator = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
        long[] pattern = { 0, 100, 600, 100, 700};
        vibrator.vibrate(pattern, -1);
     Intent intent = new Intent(this, Main.class);
     PendingIntent activity = PendingIntent.getActivity(this, 0, intent, 0);
     String sms = getSharedPreferences("SMSPREF", MODE_PRIVATE).getString("incoming", "EMPTY");
        notification.setLatestEventInfo(this, "message" ,
            sms, activity);
        notification.number += 1;
        notificationManager.notify(0, notification);

      } 
```

# c# - ASP.NET 中有多少种 Http 处理程序

> ID：13716727
> 
> 赞同：2
> 
> 时间：2012-12-05T05:13:43.877
> 
> 标签：c#, asp.net, web, handler

我只想知道 ASP.NET 中有多少种类型的 Http 处理程序可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:50:08.350

文章**[`MSDN`](http://msdn.microsoft.com/en-us/library/bb398986%28v=vs.100%29.aspx#Background)**指出有四个 Http 处理程序。您甚至可以创建自己的自定义 Http 处理程序（在同一篇文章中提到）

```
1) ASP.NET page handler (*.aspx)
2) Web service handler (*.asmx)
3) Generic Web handler (*.ashx)
4) Trace handler (trace.axd) 
```

换一种理解，Http handler有两种

```
1) Asynchronous
2) Synchronous
//mentioned in the same article 
```

# lotus-notes - 莲花笔记中的过滤视图

> ID：13716728
> 
> 赞同：0
> 
> 时间：2012-12-05T05:14:00.633
> 
> 标签：lotus-notes, lotus-domino, lotus, lotusscript, lotus-formula

再会，

我正在尝试使用`@setviewinfo`. 谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:22:46.033

下面是一个例子，把这个公式放在 PostOpen 事件上查看。它将使用用户名按列过滤所有文档。

```
@SetViewInfo([SetViewFilter]; @UserName; "columnName"; 1; 1) 
```

columnName - 是列的真实名称（您可以在 Column 属性中设置它）

记住即使在视图上也要清理 QueryClose 上的过滤器，否则所有视图都将使用此过滤器。

例如你应该如何删除过滤器

```
@SetTargetFrame("frameName");
@UpdateFormulaContext;
@Command([OpenView]; @Subset(@ViewTitle; -1));
@SetViewInfo([SetViewFilter]; ""; "columnName"; 1) 
```

frameName 是包含视图的框架，columnName 是您的分类列。如果您不使用框架 - 只需跳过第一行

# html - 使用 HTML5 创建带有图像和标签的水平按钮

> ID：13716729
> 
> 赞同：0
> 
> 时间：2012-12-05T05:14:08.910
> 
> 标签：html, css

尝试使用 HTML5 创建三个带有图像和标签的水平按钮。尝试了以下示例：[tutorial](http://www.cssdrive.com/index.php/examples/exampleitem/cssdrive_horizontal_menu_buttons)，但我需要为每个按钮提供不同的图像。

如果我给每个按钮 id 并添加到 css #id {background-image:url} 我只看到图像的一部分，而不是拉伸到按钮大小的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:32:49.327

您可以为三个按钮创建三个不同的类名，并根据需要设置 css 背景图像。

```
<button class="hbuttons">and</button>
<button class="buttons">and</button>
<button class="hbutton">and</button> 
```

或者

```
 <div>
 <a class="hbutton" href="http://www.cssdrive.com">Home </a>
 <a class="buttons" href="http://www.cssdrive.com/index.php/main/submit/">Submit </a>
 <a class="hbuttons" href="http://www.cssdrive.com/index.php/main/contact/">Contact </a>
 </div>
  <div style="clear: left;"></div> 
```

这里的演示：[***小提琴***](http://jsfiddle.net/5Ah9a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:21:49.567

我从目标站点复制了一些代码。注意下面的高度和宽度

```
...

宽度：78px；

高度：23px；

...

背景图像：url（tabsquare.jpg）；

...

}

.hbuttons：悬停{

背景图像：url（tabsquareover.jpg）；

}

```

它不会拉伸图像。它制作了一个 78px x 23px 的盒子。然后它将图像置于背景中。如果您希望图像覆盖 78px x 23px，则它应该是 78px x 23px。背景图像与`<img>`标签不同。

# r - 在 R 中创建 JsonObject 数组

> ID：13716730
> 
> 赞同：2
> 
> 时间：2012-12-05T05:14:11.503
> 
> 标签：r, rjava

我可以使用 rJson 从 R 中的列表创建一个 json 对象。

我用了

```
config <- list([Portname="PORT.H.2",MktValue="8000000",WtScheme="Closed"])
json <- toJSON(config) 
```

如何将键值对数组传递给我的 R 函数，然后将其转换为 R 中的 jsonArray

我想通过

```
 {[Portname="PORT.H.1",MktValue="1000000",WtScheme="Variable], [Portname="PORT.H.2",MktValue="8000000",WtScheme="Closed"]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:57:48.053

```
require(rjson)
config <- list(Portname="PORT.H.1",MktValue="1000000",WtScheme="Variable")
config2 <- list(Portname="PORT.H.2",MktValue="8000000",WtScheme="Closed")
json <- toJSON(list(config,config2)) 
cat(json)
#[{"Portname":"PORT.H.1","MktValue":"1000000","WtScheme":"Variable"},{"Portname":"PORT.H.2","MktValue":"8000000","WtScheme":"Closed"}]> 
```

# android - HTML5 音频未在 Android 4.0.4 设备本机浏览器中多次播放

> ID：13716731
> 
> 赞同：21
> 
> 时间：2012-12-05T05:14:11.377
> 
> 标签：android, html, html5-audio, android-browser

我目前正在开发一个**HTML5**项目。

**在Android 本机浏览器**的同一页面中**多次播放相同的音频文件**存在问题。该问题在**Android ICS 4.0.4**版本上特别注意。在这个版本中，**音频将播放一次**，但当**再次启动时，音频将不会播放**。同样的事情**在 Android ICS 4.0.3**版本和较新的**4.1.1**版本上运行良好。

 ******测试设备：
**Samsung Galaxy Tab (Android 4.0.4)**：第一次播放时它不播放
**HTC One (Android 4.0.4)**：第一次播放时它不播放
**Sony Tab (Android 4.0.3)**：非常好，多次播放音频
**HTC Sensation (Android 4.0.3)**：非常好，多次播放音频
**Samsung Nexus Phone (Android 4.1.1)**：非常好，多次播放音频

根据对 Internet 的一些研究，这似乎是**Android 版本 4.0.4 的问题**

请帮助我找到一些解决方案，使其适用于所有设备。

[请使用此 W3 Schools HTML5 音频链接进行试用](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_audio_all)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T04:56:21.640

我有一个可行的解决方案..

问题出在 Android 4.0.4 浏览器中，当音频播放一次（结束）时，**寻道时间不会重置**到起始位置，它本身会停留在结束位置。因此，通过在音频**结束后设置****currentTime = 0**会将其重置为起始位置，这样我们就可以根据需要多次播放相同的音频，而无需任何页面刷新。 经过测试，在所有设备上都能完美运行。

 ****HTML 代码：**

```
<audio id="movie_audio">
  <source src="my_audio_location/movie_audio.mp3" type='audio/mpeg; codecs="mp3"' />
  <source src="my_audio_location/movie_audio.ogg" type='audio/ogg; codecs="vorbis"' />  
</audio> 
```

**JavaScript 代码：**

```
var movie_audio = document.getElementById('movie_audio');  
movie_audio.addEventListener('ended', function(){  
  movie_audio.currentTime = 0;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T12:15:35.357

这对我有用：

```
var movie_audio = document.getElementById('movie_audio');  
movie_audio.addEventListener('ended', function(){  
   movie_audio.load(); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T04:14:49.550

如果上述解决方案对您不起作用，请尝试此解决方案。

```
audio_element.addEventListener('timeupdate', function() {
 if (audio_element.currentTime >= ( audio_element.duration - 0.3 ) ) {
  audio_element.currentTime = 0;
  audio_element.pause();
 }
}, false); 
```

注意：我们将搜索栏设置在音频结束之前的起始位置。********

# c# - 用多个类 C# 封装

> ID：13716744
> 
> 赞同：-2
> 
> 时间：2012-12-05T05:15:11.977
> 
> 标签：c#, encapsulation

所以我的问题是关于基本封装。我知道我正在正确设置我的 getter 和 setter（我实际上稍后对此有一个问题），但我有多个课程。我有另一堂课，我知道我通过公开某些事情来使我的代码片段对我的外部班级可见。所以我认为我正确设置了我的第一个代码文件。（一些背景知识，我有一个连接到数据库的类，然后是另一个封装所有数据的类。发布的第一个代码部分是封装部分，然后我发布了我搞砸的三个方法。）

我对获取和设置感觉很好，我对我的构造函数有点不确定。我觉得我将变量放在参数列表中，以便将值从外部类中放入它们？正确的？或者我应该将我的私有变量的公共形式放在我的其他代码文件中，然后将它们传递到同一个文件中的构造函数中？

/ 这是我的第一个代码文件

```
using System;

public class clsEncapsulate
  {
    private int mID;
    private string mName;
    private string mClassification;
    private DateTime mConvocationDate;
    private string mLocation;

public int ID
{
    get
    {
        return mID;
    }
    set
    {
        mID = value;
    }
}

public string Name
{
    get 
    {
        return mName;
    }
    set 
    {
        mName = value;
    }
}

public string Classification
{
    get
    {
        return mName;
    }
    set 
    {
        mName = value;        
    }
}

private DateTime ConvocationDate
{
    get
    {
        return mConvocationDate;
    }
    set
    {
        mConvocationDate = value;
    }
}

private string Location
{
    get
    {
        return mLocation;
    }
    set
    {
        mLocation = value;
    }
}

public clsEncapsulate(int id, string name, string classification, DateTime convocationDate, string location)
{
    bool running = false; 

    while(running == false)
    {

    ID = mID;
    Name = mName;
    Classification = mClassification;
    ConvocationDate = mConvocationDate;
    Location = mLocation;

    running = true;

    }
} 
```

}

在我的第二个代码文件中，我将放置我遇到问题的方法。

```
private void refreshbox()
{
    string formattedConvocation;
    string formattedDateTime;
    string formattedConvocationName;

    lstConvocations.Items.Clear();
    foreach (clsEncapsulate currentConvocation in mConvocationAL)
    {
        formattedConvocationName = currentConvocation.Name;
        formattedConvocationName = truncateString(formattedConvocationName, 30);

        formattedConvocation = formattedConvocationName.PadRight(33);
        formattedConvocation += currentConvocation.Classification.PadRight(17);

        formattedDateTime = currentConvocation.ConvocationDate.ToShortDateString().PadRight(10)
            + currentConvocation.ConvocationDate.ToShortTimeString().PadLeft(8);
        formattedConvocation += formattedDateTime;

        lstConvocations.Items.Add(formattedConvocation);
    }
} 
```

好的，所以为了让我的第二个代码文件操作第一个代码文件中的变量，我需要将它们暴露给这个方法。我不知道是否应该将我的公共变量放在构造函数中，或者是否应该在我的第一个代码文件中的某个地方声明它们。我非常不确定如何将这些变量暴露给这个方法。我一直在摆弄它，但我的书并没有完全解决这种情况，而且我很难弄清楚。

如果有人确实回答了这个问题，请分解为什么你要放你要放的东西！我想了解为什么我将公共变量放在一个地方，而不是另一个地方。或者为什么我在一个地方而不是另一个地方声明我的封装类的一个对象。我试图在我的方法中声明一个封装对象，这样它就可以让这个方法访问变量，但它不起作用！请告诉我我做错了什么，或者您是否希望我发布更多代码。

以下是我搞砸的另外两种方法。

/ 我搞砸的第二个代码文件中的第二种方法：

```
private void displayProperties(int index)
{
    if (index == -1)
    {
        return;
    }

    clsEncapsulate selectedValue = (clsEncapsulate)mConvocationAL[index];

    txtConvocationName.Text = selectedValue.Name;
    txtConvocationClassification.Text = selectedValue.Classification;
    txtConvocationDate.Text = selectedValue.ConvocationDate.ToShortDateString();
    txtConvocationTime.Text = selectedValue.ConvocationDate.ToShortTimeString();
    txtConvocationLocation.Text = selectedValue.Location;
    txtID.Text = selectedValue.ID.ToString();
} 
```

/我搞砸的最后一个方法：

```
 private void readConvocations(string filterConstraint, string sortField, string     sortOrder)
{
        OleDbConnection connection = null;
    OleDbDataReader reader = null; 

    try
    {
        connection = new OleDbConnection();
        connection.ConnectionString = mConnectionString;

        connection.Open();

        string statement = "SELECT ID, Name, Classification, Location, Date FROM Convocations ";
        if(filterConstraint != "")
           {
                statement += "WHERE Name LIKE " + toSQL(filterConstraint, true) + " "; 
           }
            string statement2 = statement;
        statement = string.Concat(new string[]
        {
            statement2, "ORDER BY ", sortField, " ", sortOrder

        });

        OleDbCommand oleDbCommand = new OleDbCommand(statement, connection);
        reader = oleDbCommand.ExecuteReader();
        mConvocationAL.Clear();

        while(reader.Read())
        {

            clsEncapsulteconvocation = new clsEncapsulate();
            convocation.ID = (int)reader["ID"];
            convocation.Name = (string)reader["Name"];
            convocation.Classification = (string)reader["Classification"];
            convocation.Location = (string)reader["Location"];
            convocation.ConvocationDate = (DateTime)reader["Date"];

            mConvocationAL.Add(convocation);

        }
    }
    finally
    {
        if (reader != null)
        {
            reader.Close();
        }

        if (connection != null)
        {
            connection.Close();
        }
    }
} 
```

如果您需要我详细说明以帮助您了解我的情况，请告诉我。我是学习词汇的新手，想理解这个！感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:50:39.160

您提供的代码是一个公共对象和一堆私有方法，因此很难全面了解您的代码如何协同工作，但是您可以应用一些原则来使您的代码在现在和将来更好地结构化.

阅读有关 SOLID 的信息 (http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))。S 和 D 非常适用于您的示例。

您还提到了构造函数和私有属性。尝试研究 Imutable 类型。这意味着一旦创建了对象，您就无法更改它。对于您的 clsEncapsulate 类，这意味着使您的字段只读并删除公共设置器。

祝你好运。

# javascript - 需要帮助找出音频的语法错误

> ID：13716749
> 
> 赞同：0
> 
> 时间：2012-12-05T05:16:04.540
> 
> 标签：javascript, html5-audio

我有以下代码：

```
var soundManager = {
    var _explode = new Audio('/Content/sounds/explosion.ogg');

    var _coin = new Audio('/Content/sounds/coin.ogg');
    this.play = function (name){
        switch(name){
            case "explosion":
                _explode.play();
                break;
            case "coin":
                _coin.play();
                break;
        }
    };
}; 
```

Chrome 说我在第二行有一个错误，其中定义了 _explode。什么是语法错误？我正在尝试设置它，以便我可以调用 soundManager.play(nameOfSound) 让它播放一个 ogg 文件。

谢谢你。

-缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:29:05.077

正如@SayemAhmed 所说，您创建对象文字的语法不正确。而他的回答是正确的。

这是我的首选方式，将`_explode`“`_coin`真正”设为私有：

```
var soundManager=(function(){
  var _explode=new Audio('/Content/sounds/explosion.ogg');
  var _coin=new Audio('/Content/sounds/coin.ogg');
  return {
    play:function(name){
      switch(name){
        case "explosion":
          _explode.play();
          break;
        case "coin":
          _coin.play();
          break;
      }
    }
  };
})(); 
```

现在不仅会`_explode`变得`_coin`不可访问，而且在使用 JS 压缩器（如 Google Closure Compiler）时，您还可以获得更“压缩”的大小，因为所有`_explode` 和`_coin`都将被最小化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:18:49.477

您不能在对象文字内以这种方式编写语句。尝试以下 -

```
var soundManager = {
    _explode: new Audio('/Content/sounds/explosion.ogg'),
    _coin: new Audio('/Content/sounds/coin.ogg'),

    play: function (name){
        switch(name){
            case "explosion":
                this._explode.play();
                break;
            case "coin":
                this._coin.play();
                break;
        }
    }
} 
```

要稍后访问它，您可以使用以下内容 -

```
soundManager.play('explosion');
soundManager.play('coint'); 
```

您可以按照@Passerby 的建议进一步改进您的代码 -

```
var soundManager = (function () {
    var _explode = new Audio('/Content/sounds/explosion.ogg');
    var _coin = new Audio('/Content/sounds/coin.ogg');

    return {
        play: function (name) {
            switch (name) {
                case "explosion":
                    _explode.play();
                    break;
                case "coin":
                    _coin.play();
                    break;
            }
        };
    };
})(); 
```

以这种方式使用[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，只有`play`方法可以访问`_explode`和`_coin`变量。

# android - 此版本的应用程序未配置为通过 Google Play 计费

> ID：13716750
> 
> 赞同：1
> 
> 时间：2012-12-05T05:16:07.190
> 
> 标签：android

> **可能重复：**
> [此版本的应用程序未配置为通过 Google Play 计费](https://stackoverflow.com/questions/11068686/this-version-of-the-application-is-not-configured-for-billing-through-google-pla)

我已经在 android 市场有一个应用程序（通过 inapp 购买）。我的问题是应用内购买功能无法正常工作，我再次重新编写代码。现在我想运行应用程序进行测试，但我收到错误消息。“此版本的应用程序未配置为通过 Google Play 计费。”

我也有清单文件的权限。并使用签名的 apk 检查。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:27:10.147

您必须对apk进行签名并卸载以前的apk并在设备中重新安装签名apk..然后不会发生此错误..尝试一下..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:51:46.800

如果您在 android 设备上安装未签名的 apk，`"This version of the application is not configured for billing through Google Play"`则会显示此错误，因此首先从设备上卸载旧应用程序并在设备上重新安装新的已签名 apk，它将解决您的问题。

# css - 如何叠加元素

> ID：13716754
> 
> 赞同：1
> 
> 时间：2012-12-05T05:16:44.560
> 
> 标签：css

在尝试了所有可能的位置变化之后：相对/绝对/等和负边距，我想知道是否有人可以告诉我如何让两个绿色条覆盖标题图像 - 在顶部和底部 - 在[http://itlaunchpad .patienceandfortitude.com/iphone-cant-get-your-email/](http://itlaunchpad.patienceandfortitude.com/iphone-cant-get-your-email/)。

*请注意，由于 WordPress 的自定义图像标题处理响应性的方式，主标题必须保持为 img 并且不能成为背景属性。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T05:27:18.450

将两个条绝对定位在共同的祖先元素内。例如：

```
​&lt;header>
    <nav><a href="#">Foobar</a></nav>
    <img src="http://placekitten.com/640/200" />
    <nav><a href="#">Foobar2</a></nav>
</header>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

并使用以下 CSS：

```
​header { 
    position: relative
}
nav:nth-of-type(1) { 
    top: 0
}
nav:nth-of-type(2) { 
    bottom: 0
}
nav {
    background-color: rgba(0,255,0,.25);
    box-sizing: border-box;
    position: absolute;
    width: 100%;
} 
```

它为您提供以下内容：http: [//jsfiddle.net/M3jyV/](http://jsfiddle.net/M3jyV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:32:35.270

试试这个 CSS

```
 and make the inline css to external css its for your reference (inline css).

bootstrap.css line 5416

#masthead.container {
    padding: 0;
    position: relative;
    width: 1198px;
}

app.css line 13

#banner {
    position: absolute;
}

bootstrap.css line  3779

.navbar {
    color: #777777;
    overflow: visible;
    position: absolute;
    width: 100%;
}

<div class="container" style="width:100%">
<header style="margin-top: -40px;" class="navbar" role="banner"> 
```

看图片：

![在此处输入图像描述](../Images/0b082970736ff6b9ec8e87af3e2985f5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:51:48.577

你可以使用 CSS z-index 属性

例如 - [http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/](http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/)

```
 DEMO - http://jsfiddle.net/xY5Re/75/ 
```

# c# - Sitecore：在内容编辑器中隐藏字段？

> ID：13716755
> 
> 赞同：4
> 
> 时间：2012-12-05T05:16:47.413
> 
> 标签：c#, sitecore

我是在 Sitecore 中构建网站的团队的一员。我们添加了一个模板字段，我们希望对内容编辑器隐藏其值。

（该字段包含页面的额外 CSS 类，因此我们可以针对特定页面的样式。不是最佳实践 - 我们应该将其放入代码中 - 但在网站投入生产时它有其优势。）

有什么方法可以在 Sitecore 内容编辑器中隐藏特定字段？

干杯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T08:19:13.600

您应该限制`Field Read`对该字段的访问（所以不要`Read`访问）

![在此处输入图像描述](../Images/7532d7f7b1de6e734893a34685e2d7ae.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-05T14:41:34.333

我想，路德拿到了票。只是在他的答案上加上一点点，而且因为我第一次使用字段级安全性工作时不确定如何自己执行此操作，所以选择工具栏中的“列”按钮以显示“字段读取”和“字段写入”安全编辑器中的选项。

![突出显示列的 Sitecore 安全工具栏](../Images/26d8a3299e883461dc57fd1801791cc1.png)

![Sitecore 安全栏对话框](../Images/c421c2440ccac606f09e132f97114907.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T05:56:45.183

您可以限制用户组对该字段的读取访问权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T00:56:04.783

要添加到已经给出的答案，您可能应该将您的设置添加为渲染参数，这将允许您更具体地定位渲染/控件而不是整个“页面”，并允许您在页面的不同组件上设置不同的类.

[Sitecore 参数模板简介：Sitecore 客户端配置深入](http://blog.nonlinearcreations.com/2011/12/introduction-to-sitecore-parameter-templates-sitecore-client-configuration-deep-dive/)
[了解 Sitecore 参数模板简介：使子布局配置更直观](http://blog.nonlinearcreations.com/2011/12/introduction-to-parameter-templates-making-sublayout-configuration-more-intuitive/)

使用[Sublayout Parameter Helper](http://marketplace.sitecore.net/en/Modules/Sub_Layout_Parameter_Helper.aspx)获取后面代码中的值。

# php - 将数组中的图像字符串转换为wordpress中的图像

> ID：13716757
> 
> 赞同：0
> 
> 时间：2012-12-05T05:16:58.330
> 
> 标签：php, javascript, jquery, arrays, wordpress

我试图在我的网站上设置一个页面，其中包含媒体库中的所有图像以随机顺序排列。

到目前为止，我有一个非常长的数组中的字符串，并且想知道如何将它们变成图像并“打乱”它们，或者先以随机顺序查询它们然后再转换它们？

已经坚持了一段时间，所以任何提示都会很好。

这是网站的链接[http://ownc.co.nz/random/](http://ownc.co.nz/random/)

干杯

```
 <?php $query_images_args = array('post_type' => 'attachment', 'post_mime_type' => 'image', 'post_status' => 'inherit', 'posts_per_page' => -1, );

            $query_images = new WP_Query($query_images_args);
            $images = array();
            foreach ($query_images->posts as $image) {
                $images[] = wp_get_attachment_url($image -> ID);
            }

            var_dump($images);
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:11:57.630

[要随机化您的图像，您可以使用 'rand' http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)的值将 'orderby' 参数添加到 WP_Query 或者您可以对数组进行洗牌

[http://php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

至于转换，我不确定你的意思，如果你有一个 url 数组，而不仅仅是用 url 的源做一个图像标签：

```
<?php foreach ($images as $img): ?> 
<img src="<?php echo $img?>">
<?endforeach; ?> 
```

# php - Facebook Wallpost 出现故障

> ID：13716760
> 
> 赞同：-1
> 
> 时间：2012-12-05T05:17:12.563
> 
> 标签：php, facebook, facebook-graph-api, facebook-wall

我在 facebook 上创建了一个应用程序，它在用户注册时发送墙帖，墙帖按预期工作，但是当墙帖以通用形式显示时，我遇到了一个奇怪的问题，它显示我的服务器路径，而不是我用过的标题和名称在墙上的帖子中看到这张照片![在此处输入图像描述](../Images/5bd66940c234656569f1a99076c8de5e.png)

当我单独访问这些帖子时，它会完美地显示标题和名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:36:15.053

当人们分享链接时，Facebook 从页面中获取元数据。因此，您可以在您的页面中添加一些案例。

首先，至少在页面中添加“og:title”、“og:description”和“og:image”。如下所示：

```
<head>
    <meta charset="utf-8"> 
    <title>title</title>
    <meta property="og:title" content="title" />
    <meta property="og:description" content="the description about your page" />
    <meta property="og:image" content="http://domain.com/images/logo.jpg" />
</head> 
```

然后转到[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)并输入页面的 url 以查看 facebook 获取的内容。

# algorithm - 当节点有两个孩子时在 BST 中删除

> ID：13716762
> 
> 赞同：0
> 
> 时间：2012-12-05T05:17:29.980
> 
> 标签：algorithm, data-structures

我正在尝试删除 BST 中具有两个子节点的节点。例如，

```
 |
    12
   /  \
  5    15
 / \     \
2   6    20 
```

我想删除包含 info=12 的节点。我需要帮助来执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T05:22:41.720

您需要获取其左子树的最右边的孩子，或者其右子树的最左边的孩子（在您的示例中为 6 或 15），并将其中一个移动到该位置，然后您可以删除你想要的节点。

如果您正在做任何事情来跟踪子树中的节点数，您通常希望从较大的子树中选择节点，因此当您移动它时，树将至少与它开始时一样平衡. 例如，在这种情况下，获得 6 比 15 更好，以帮助保持平衡——但如果您只有一个普通的、不平衡的 BST，您可能无法轻松获得该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:27:59.187

在算法第 4 版的书籍网站上有一个很好的讨论：http: [//algs4.cs.princeton.edu/32bst/](http://algs4.cs.princeton.edu/32bst/)

# jakarta-ee - 使用 Shopify JAVA API 时遇到问题

> ID：13716764
> 
> 赞同：2
> 
> 时间：2012-12-05T05:17:31.717
> 
> 标签：jakarta-ee, shopify, java

我是 Shopify 开发人员社区的新手，我正在尝试使用 Shopify Java 适配器。我在使用 Shopify JAVA api 时遇到了困难。

我从以下网址下载了 Java 适配器代码： [https](https://github.com/shopify/shopify4j) ://github.com/shopify/shopify4j 。它有一些基于 Android 的类，但我试图仅将其用于 Java EE 环境。

我创建了凭据对象，如下所示：

```
Credential c = new Credential(apiKey, secret, shopName);
APIAuthorization api = new APIAuthorization(c);
HttpClient client = api.getAuthorizedClient();
HttpResponse res = client.execute(new HttpGet(api.generateAuthRequest())); 
```

但是，它在执行此代码时给出了一个空响应。

我真的被这个问题困住了。有人可以帮我吗？

# android - 使用 AsynTask 解析 JSON

> ID：13716768
> 
> 赞同：0
> 
> 时间：2012-12-05T05:18:11.220
> 
> 标签：android, json

我在没有使用异步任务的情况下完成了 JSON 解析，它在姜饼（2.3）中运行良好，但是当我在 ICS（冰淇淋三明治）应用程序上运行相同的项目时，我听说某处我必须在其中进行解析asynctask，但我是 android 新手，无法做到这一点，有人可以帮助我............

这是我的 JSON 类：-

```
public class JSONfunctions {

    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{

            jArray = new JSONObject(result);            
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
    }
} 
```

这是我使用 JSON 类的 MAinActivity：-

```
public class MainActivity extends ListActivity {

    Context context;
    ArrayList<String> contentList,slugList;
    ArrayList<HashMap<String, String>> mylist;
    JSONObject json;
    JSONArray  latest;
    ImageView bck;
    String shareUrl;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        bck = (ImageView) findViewById(R.id.bckbtn);
        mylist = new ArrayList<HashMap<String, String>>();
        contentList=new ArrayList<String>();
        slugList=new ArrayList<String>();
        json = JSONfunctions.getJSONfromURL("http://madhuridixit-nene.com/wp/?json=get_category_posts&slug=latest");
        context=this;

        try{

            latest = json.getJSONArray("posts");

            for(int i=0;i<latest.length();i++){                     
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = latest.getJSONObject(i);

                String name = e.getString("title_plain");
                String content = e.getString("content");
                contentList.add(content);
                String chng = "&#8211;";
                String  fnl_Str = name.replace(chng, "");
                String slug = e.getString("slug");
                slugList.add(slug);
                map.put("id",  String.valueOf(i));
                map.put("name", fnl_Str);
                map.put("date", e.getString("date"));
                shareUrl ="http://madhuridixit-nene.com/latest/post/";

                mylist.add(map);            
            }       
        }catch(JSONException e)        {
            Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.activity_latest_tab, 
                new String[] { "name"}, 
                new int[] { R.id.item_title});

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              

                /*  HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);   */              
                //Toast.makeText(Main.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show();
                Intent intent=new Intent(context,WebViewActivity.class);
                intent.putExtra("content", contentList.get(position));
                intent.putExtra("shareUrl", shareUrl+slugList.get(position));
                intent.putExtra("tab_value", 1);
                startActivity(intent);

            }
        });

} 
```

请帮助我使用 AsyncTask 完成这项工作.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:35:55.517

使用 AsyncTask 更改代码作为从服务器获取数据：

```
private class LongOperation extends AsyncTask<String, Void, 
                                ArrayList<HashMap<String, String>>> {

    ArrayList<String> contentList,slugList;
    ArrayList<HashMap<String, String>> mylist;
    JSONObject json;
    JSONArray  latest;

      @Override
      protected void onPreExecute() {

      }

      @Override
      protected ArrayList<HashMap<String, String>> 
                                  doInBackground(String... params) {
        mylist = new ArrayList<HashMap<String, String>>();
        contentList=new ArrayList<String>();
        slugList=new ArrayList<String>();
        json = JSONfunctions.getJSONfromURL("http://madhuridixit-nene.com"+
                                "/wp/?json=get_category_posts&slug=latest");
        try{

            latest = json.getJSONArray("posts");

            for(int i=0;i<latest.length();i++){                     
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = latest.getJSONObject(i);

                String name = e.getString("title_plain");
                String content = e.getString("content");
                contentList.add(content);
                String chng = "&#8211;";
                String  fnl_Str = name.replace(chng, "");
                String slug = e.getString("slug");
                slugList.add(slug);
                map.put("id",  String.valueOf(i));
                map.put("name", fnl_Str);
                map.put("date", e.getString("date"));
                shareUrl ="http://madhuridixit-nene.com/latest/post/";

                mylist.add(map);            
            }       
        }catch(JSONException e)        {
            Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return mylist;
      }      

      @Override
      protected void onPostExecute(
                   ArrayList<HashMap<String, String>> result) {   
      ListAdapter adapter = new SimpleAdapter(this, result , 
                                 R.layout.activity_latest_tab, 
                new String[] { "name"}, 
                new int[] { R.id.item_title});

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, 
                         View view, int position, long id) {              

             Intent intent=new Intent(MainActivity.this,WebViewActivity.class);
             intent.putExtra("content", contentList.get(position));
             intent.putExtra("shareUrl", shareUrl+slugList.get(position));
             intent.putExtra("tab_value", 1);
             startActivity(intent);

            }
        });            
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

并从 Activity 的 onCreate 执行 AsyncTask：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        bck = (ImageView) findViewById(R.id.bckbtn);
        new LongOperation().execute(""); // execute here
        // your code here..... 
```

最后，您必须从此处阅读有关 AsyncTask 以供下次使用

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:29:52.110

问题不在于解析`json`数据。这里的问题是您一直试图在`Main thread`. 网络连接是长任务，应该在单独的线程中运行。你在这里要做的基本上就是把你的

```
json = JSONfunctions.getJSONfromURL("http://madhuridixit-nene.com/wp/?json=get_category_posts&slug=latest"); 
```

在 AsyncTask 中的行我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:39:39.130

首先，当您在 Android 中遇到问题/遇到异常时，请考虑发布 Logcat 输出。

现在，您当前的异常是**NetworkOnMainThreadException**，这只是因为您直接在主线程上进行网络调用。

从 Android 3.0 开始，Android 已经宣布您不能直接在主线程上执行此操作。

要解决此问题，您可以实现**AsyncTask**或在进行 Web 调用之前写下以下代码：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

阅读更多：[Android StrictMode – NetworkOnMainThreadException](http://www.vogella.com/blog/2012/02/22/android-strictmode-networkonmainthreadexception/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:18:46.877

是的，我终于做到了，感谢所有的想法......

我为 asynctask 创建了另一个类，如下所示：-

类 MyAsyncTask 扩展 AsyncTask> > { ArrayList> mylist = new ArrayList>();

```
 @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... params) {
        // TODO Auto-generated method stub

        mylist = new ArrayList<HashMap<String, String>>();
        contentList=new ArrayList<String>();
        slugList=new ArrayList<String>();
        json = JSONfunctions.getJSONfromURL("http://madhuridixit-nene.com/wp/?json=get_category_posts&slug=latest");

        try{

            latest = json.getJSONArray("posts");

            for(int i=0;i<latest.length();i++){                     
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = latest.getJSONObject(i);

                String name = e.getString("title_plain");
                String content = e.getString("content");
                contentList.add(content);
                String chng = "&#8211;";
                String  fnl_Str = name.replace(chng, "");
                String slug = e.getString("slug");
                slugList.add(slug);
                map.put("id",  String.valueOf(i));
                map.put("name", fnl_Str);
                map.put("date", e.getString("date"));
                shareUrl ="http://madhuridixit-nene.com/latest/post/";

                mylist.add(map);            
            }       
        }catch(JSONException e)        {
            Log.e("log_tag", "Error parsing data "+e.toString());
        }
        showProgress.setVisibility(View.VISIBLE);
        return mylist;
    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
        ListAdapter adapter = new SimpleAdapter(LAtestTab.this, result , R.layout.activity_latest_tab, 
                new String[] { "name" }, 
                new int[] { R.id.item_title});
        LAtestTab.this.setListAdapter(adapter);// If Activity extends ListActivity
        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        showProgress.setVisibility(View.GONE);
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              

                Intent intent=new Intent(context,WebViewActivity.class);
                intent.putExtra("content", contentList.get(position));
                intent.putExtra("shareUrl", shareUrl+slugList.get(position));
                intent.putExtra("tab_value", 1);
                startActivity(intent);

            }
        });

    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        showProgress.setVisibility(View.VISIBLE);
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub

        super.onProgressUpdate(values);
        showProgress.setVisibility(View.VISIBLE);
    }

 } 
```

# java - Java字符串replaceAll()

> ID：13716769
> 
> 赞同：3
> 
> 时间：2012-12-05T05:18:20.747
> 
> 标签：java, swing, jtextpane, replaceall, emoticons

我一直在想，例如：

```
 JTextPane chatTextArea = new JTextPane();
    s.replaceAll(":\\)", emoticon());

    public String emoticon(){
           chatTextArea.insertIcon(new ImageIcon(ChatFrame.class.getResource("/smile.png")));
           return "`";
       } 
```

可以放一张图片，到处都是“`”“:)”就找到了。当我这样运行它时，如果 s 包含一个“:)”，那么整个 s 将被图标替换。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:33:22.690

这是我制作的一个小例子（原版为@StanislavL），只需使用`DocumentListener`并检查何时输入表情符号的匹配序列并将其替换为适当的图像：

![在此处输入图像描述](../Images/bf5130f0e795f8178a239c097ade3621.png)

注意：`SPACE`必须按下或输入另一个字符/表情符号才能显示图像

```
import java.awt.Dimension;
import java.awt.Image;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.AbstractDocument;
import javax.swing.text.BadLocationException;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;
import javax.swing.text.Utilities;

public class JTextPaneWithEmoticon {

    private JFrame frame;
    private JTextPane textPane;
    static ImageIcon smiley, sad;
    static final String SMILEY_EMOTICON = ":)", SAD_EMOTICON = ":(";
    String[] emoticons = {SMILEY_EMOTICON, SAD_EMOTICON};

    private void initComponents() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        textPane = new JTextPane();

        //add docuemntlistener to check for emoticon insert i.e :)
        ((AbstractDocument) textPane.getDocument()).addDocumentListener(new DocumentListener() {
            @Override
            public void insertUpdate(final DocumentEvent de) {
                //We should surround our code with SwingUtilities.invokeLater() because we cannot change document during mutation intercepted in the listener.
                SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        try {
                            StyledDocument doc = (StyledDocument) de.getDocument();
                            int start = Utilities.getRowStart(textPane, Math.max(0, de.getOffset() - 1));
                            int end = Utilities.getWordStart(textPane, de.getOffset() + de.getLength());

                            String text = doc.getText(start, end - start);

                            for (String emoticon : emoticons) {//for each emoticon

                                int i = text.indexOf(emoticon);
                                while (i >= 0) {
                                    final SimpleAttributeSet attrs = new SimpleAttributeSet(doc.getCharacterElement(start + i).getAttributes());
                                    if (StyleConstants.getIcon(attrs) == null) {

                                        switch (emoticon) {//check which emtoticon picture to apply
                                            case SMILEY_EMOTICON:
                                                StyleConstants.setIcon(attrs, smiley);
                                                break;
                                            case SAD_EMOTICON:
                                                StyleConstants.setIcon(attrs, sad);
                                                break;
                                        }

                                        doc.remove(start + i, emoticon.length());
                                        doc.insertString(start + i, emoticon, attrs);
                                    }
                                    i = text.indexOf(emoticon, i + emoticon.length());
                                }
                            }
                        } catch (BadLocationException ex) {
                            ex.printStackTrace();
                        }
                    }
                });
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
            }
        });

        JScrollPane scrollPane = new JScrollPane(textPane);
        scrollPane.setPreferredSize(new Dimension(300, 300));

        frame.add(scrollPane);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        try {//attempt to get icon for emoticons
            smiley = new ImageIcon(ImageIO.read(new URL("http://facelets.com/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/e/m/emoticons0001.png")).getScaledInstance(24, 24, Image.SCALE_SMOOTH));
            sad = new ImageIcon(ImageIO.read(new URL("http://zambia.primaryblogger.co.uk/files/2012/04/sad.jpg")).getScaledInstance(24, 24, Image.SCALE_SMOOTH));

        } catch (Exception ex) {
            ex.printStackTrace();
        }

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JTextPaneWithEmoticon().initComponents();
            }
        });
    }
} 
```

**参考：**

*   [如何在java swing中添加笑脸？](https://stackoverflow.com/questions/5320685/how-to-add-smileys-in-java-swing)

# asp.net - 此页面缺少要添加的 CSS 样式表链接所需的 HtmlHead 控件。请加

> ID：13716772
> 
> 赞同：0
> 
> 时间：2012-12-05T05:18:32.713
> 
> 标签：asp.net, vb.net

```
This page is missing a HtmlHead control which is required for the CSS stylesheet link that is being added. Please add <head runat="server" />.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NotSupportedException: This page is missing a HtmlHead control which is required for the CSS stylesheet link that is being added. Please add <head runat="server" />.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NotSupportedException: This page is missing a HtmlHead control which is required for the CSS stylesheet link that is being added. Please add <head runat="server" />.]
   AjaxControlToolkit.ScriptObjectBuilder.RegisterCssReferences(Control control) in d:\E\AjaxTk-AjaxControlToolkit\Release\AjaxControlToolkit\ExtenderBase\ScriptObjectBuilder.cs:273
   AjaxControlToolkit.ScriptControlBase.OnLoad(EventArgs e) in d:\E\AjaxTk-AjaxControlToolkit\Release\AjaxControlToolkit\ExtenderBase\ScriptControlBase.cs:260
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

我正在使用具有包含 javascript 和 css 代码的 head 标签的母版页。它在本地服务器上运行良好，但是当文件托管时它会出错

我添加了 runat ="server" 仍然得到同样的错误

<%@ Master Language="VB" CodeFile="MasterPageReg.master.vb" Inherits="MasterPageReg" %>

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">

    <title>
        <asp:Literal ID="litTitle" runat="server"></asp:Literal>
    </title>

</head>
<body>
    <form id="form1" runat="server">
    <table width="780" border="0" align="center" cellpadding="0" cellspacing="0" bordercolor="#ECE9D8">
        <tr>
            <td>
                <table width="780" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td width="200" bgcolor="#FFFA9C">
                            <a href="default.aspx">
                                <img src="imghome/logo.jpg" width="200" height="172" title="Daptary's" border="0" /></a>
                        </td>
                        <td valign="top" align="right">
                            <table border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td>
                                    </td>
                                    <td height="6">
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        &nbsp;
                                    </td>
                                    <td height="28" align="right">
                                        <a href="Default2.aspx" class="MainLink" title="Home">Home</a> <span class="MainLink">
                                        </span>&nbsp;<span class="MainLink"> </span><a href="contactus.aspx" class="MainLink"
                                            title="Contact Us"></a><span class="MainLink"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td height="2">
                                    </td>
                                    <td bgcolor="#F8C300">
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                            </table>
                            <asp:ScriptManager ID="ScriptManager1" runat="server">
                            </asp:ScriptManager>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td height="2" bgcolor="#F8C300">
            </td>
        </tr>
        <tr>
            <td height="6">
            </td>
        </tr>
        <tr class="REDBold1">
            <td height="20" class="REDBold1 table123" style="background-image: url(imghome/title1.jpg);
                background-repeat: repeat">
                &nbsp; &nbsp;
                <asp:Label ID="lbltitle" runat="server" CssClass="REDBold1" Font-Bold="True" ForeColor="#B12907"
                    ToolTip="Page Title"></asp:Label>
            </td>
        </tr>
        <tr>
            <td>

    </form>
</body>
</html> 
```

这是母版页的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T21:06:03.177

试试这个解决方案

**1.添加脚本管理器**

```
<asp:ScriptManagerID="ScriptManager1"runat="server">
</asp:ScriptManager> 
```

**2.添加一个javascript函数**

```
// Write following function which calls automatically
<script language="javascript" type="text/javascript">
        function show()
        {
              document.write("<head id="Head1" runat='server'></head>");
        }
</script> 
```

最后一切正常。！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:36:17.077

您还应该发布导致问题的代码。

你看过这些吗？

[此页面缺少要添加的 CSS 样式表链接所需的 HtmlHead 控件。请添加 <head runat="server" />](https://stackoverflow.com/questions/12458614/this-page-is-missing-a-htmlhead-control-which-is-required-for-the-css-stylesheet)

[用于 3.5 的 AjaxToolkit 无法正常工作](https://stackoverflow.com/questions/3350572/ajaxtoolkit-for-3-5-not-working)

[http://ayanigamage.blogspot.com/2012/05/i-had-web-application-which-was-using.html](http://ayanigamage.blogspot.com/2012/05/i-had-web-application-which-was-using.html)

# actionscript-3 - Flex 条形图在 Y 轴上为具有相同 yField 项目的两个不同项目绘制单个项目

> ID：13716773
> 
> 赞同：0
> 
> 时间：2012-12-05T05:18:38.267
> 
> 标签：actionscript-3, apache-flex

我创建了一个带有单个系列项目的条形图。我系列的 xField 是“MEASURE”，yField 是“ITEM_DESC”。

现在我的图表数据源有两个数据项：

1.  item[0]：MEASURE = 100 和 ITEM_DESC = MyItem
2.  item[1]：MEASURE = 200 和 ITEM_DESC = MyItem

绘制此条形图时，我在 Y 轴上看到两个节点，但图形呈现在彼此之上。如此有效地，我看到了两个 Y 轴节点，但只有一个带有两个数据点的条形图。我了解条形图很难区分两个相同的 Y 轴项目，但有没有办法在这种情况下绘制两个不同的条形？

欢迎所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:06:37.887

一系列项目应为“功能” - 对于每个“x”值，您只能有一个“y”值。

在这种情况下，您可以将这些项目放置到不同的系列中，然后将 ColumnChart 的 'type' 属性设置为“clustered|overlaid|stacked|100%”之一，以指定如何组合两个项目。

否则，您可以为您的项目计算自定义位置并实现您自己的 itemrenderer，它忽略在 move() 和 setActualSize() 方法中接收到的值，并改用您的自定义位置。

# git - 如何防止 git 接收

> ID：13716776
> 
> 赞同：1
> 
> 时间：2012-12-05T05:18:45.160
> 
> 标签：git

我有一个接收后挂钩，需要一分钟才能执行。在执行这个钩子时，没有其他人应该能够推送。

有什么办法可以做到这一点吗？或如何配置 git（在远程存储库中）以使其不允许从客户端推送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:07:30.267

自己动手：在你的 post-receive 钩子中创建一个锁文件，完成后将其删除。添加一个[pre-receive 钩子](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)，如果该文件存在则阻塞。

不过，这将允许竞争条件。如果两个客户端同时开始推送，它们都会到达 post-receive 钩子。为什么您需要这种独占访问权限？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:07:39.497

似乎没有[`git config`](http://git-scm.com/docs/git-config)人拒绝*所有*的推动。

这给你留下了“打破”访问机制的技巧：

*   如果您的用户通过 ssh 访问您的 git 存储库，请暂时移动 ~/.ssh/authorized_keys。
*   如果您的用户使用 https 地址，请移动`<git>/libexec/git-core/git-http-backend`用于这些事务的可执行文件。

这不是一个很好的解决方案，因为在这两种情况下，它都会导致客户端出现错误消息，但是在移动这些文件时您不会收到任何推送。

# extjs - 如何在 extjs 4 中设置带有手风琴标题的操作列

> ID：13716785
> 
> 赞同：0
> 
> 时间：2012-12-05T05:19:49.213
> 
> 标签：extjs, extjs4

我有一个显示一年中月份的手风琴。现在我想在手风琴标题右侧添加一个 pdf 图标作为操作列，它将打印当年的所有记录。但我做不到。任何人都可以帮我解决这个问题。下面是我的代码：

```
Ext.define('Ext4Example.view.attendence.Timeperiod', {
    extend: 'Ext.form.Panel',
    alias: 'widget.timeperiod',
    id: 'timeperiod',
    region: 'west',
    border: true,
    width: 150,
    height: 396,
    split: true,
    layout: {
        // layout-specific configs go here
        type: 'accordion',
        titleCollapse: true,
        animate: true,
        activeOnTop: true,
        hideCollapseTool: true
    },
    initComponent: function () {
        var me = this;
        me.items = me.maccord();
        me.callParent(arguments);
    },
    mstore: function (year) {
        var data = [
            [1, year, 'January'],
            [2, year, 'February'],
            [3, year, 'March'],
            [4, year, 'April'],
            [5, year, 'May'],
            [6, year, 'June'],
            [7, year, 'July'],
            [8, year, 'August'],
            [9, year, 'September'],
            [10, year, 'October'],
            [11, year, 'November'],
            [12, year, 'December']
        ];
        var store = Ext.create('Ext.data.ArrayStore', {
            storeId: 'mstore',
            fields: [{
                name: 'id',
                type: 'int'
            }, {
                name: 'year',
                type: 'int'
            }, {
                name: 'month',
                type: 'string'
            }],
            data: data
        });
        return store;
    },
    mpanel: function (year) {
        var me = this,
            mpanel = new Ext.grid.Panel({
                border: false,
                viewConfig: {
                    stripeRows: true
                },
                hideHeaders: true,
                columns: [{
                    text: 'month',
                    dataIndex: 'month',
                    flex: 1]
                }],
            store: me.mstore(year),
            width: 150
            });
    return mpanel;
},
maccord: function () {
    var year = $ {
        (new Date()).format('yyyy')
    },
    limit = year - 5,
        me = this,
        maccord = [];
    for (year; year > limit; year--) {
        maccord.push({
            title: 'Year ' + year + {
                menuDisabled: true,
                sortable: false,
                xtype: 'actioncolumn',
                align: 'right',
                flex: 1,
                width: 22,
                items: [{
                    icon: "${resource(dir: 'images', file: 'PDF01001.png')}",
                    hide: true,
                    tooltip: 'Print Report of this Month?',
                    handler: function (grid, rowIndex, colIndex) {
                        alert('Printing');
                    }
                }]
            },
            ident: 'accordion-panel',
            items: me.mpanel(year)
        });
    }
    return maccord;
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:10:03.497

绝对你尝试做的事情是行不通的。据我所见，您尝试通过将 Grid 连接到标题来将其添加到标题中。您可以做的是`header`为每个手风琴项目提供配置。在该标题中，您可以放置​​组件，但它们将显示在标题之前。另一种方法是处理`afterrender`事件，然后在标题中添加一些内容。

示例：http: [//jsfiddle.net/HTMBy/2/](http://jsfiddle.net/HTBMy/2/)

# javascript - Chrome 和 Safari 中的 getOffset 函数

> ID：13716786
> 
> 赞同：0
> 
> 时间：2012-12-05T05:19:50.733
> 
> 标签：javascript

此代码适用于 Firefox 和 IE，但不适用于 Chrome 或 Safari（尝试单击 td 16）。

问：如何让它在 Chrome 或 Safari 中运行？

```
<!DOCTYPE html>
<title>getOffset</title>
<style type="text/css">
table{border:none;width:10000px;position:absolute}
td{width:1000px;height:1000px;border:2px solid}
#the_input{width:100px;height:100px;background:#f00;position:absolute}
</style>
<script>
onload = function(){
var all_td = document.getElementsByTagName('td');
function getOffset( el ) {
    var _x = 0,
    _y = 0;
    while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
        _x += el.offsetLeft - el.scrollLeft;
        _y += el.offsetTop - el.scrollTop;
        el = el.offsetParent;
    }
    return { top: _y, left: _x };
}

    for(var i = 0, len = all_td.length; i < len; i++) {
        all_td[i].onclick = function () {
            var x = getOffset(this).left,
            y = getOffset(this).top;
                alert(x + ' x ' + y);
        }
    }
}

</script>
<table>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
</tr>
<tr>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
</tr>
</table>

<input id=the_input value="some text"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:39:42.777

只需将您的代码更改`getOffset`为

```
function getOffset( el ) {
    var _x = 0,
    _y = 0;
    while( el && el.tagName.toLowerCase() != 'body' && !isNaN( el.offsetLeft ) && !isNaN(el.offsetTop ) ) {
        _x += el.offsetLeft - el.scrollLeft;
        _y += el.offsetTop - el.scrollTop;
        el = el.offsetParent;
    }
    return { top: _y, left: _x };
} 
```

当我在 chrome 中调试时，它正在获取`BODY`元素的 scrollLeft 和 scrollLeft 值，而它`0`在 IE 和 FF 上。

# jersey - Jersey：如何注册一个省略某些子类的 ExceptionMapper？

> ID：13716793
> 
> 赞同：5
> 
> 时间：2012-12-05T05:20:49.180
> 
> 标签：jersey, jax-rs

如何注册一个`ExceptionMapper<Exception>`不拦截Jersey 提供特殊处理的包罗万象**？**`WebApplicationException`

**更新**：我提交了这个功能请求：http: [//java.net/jira/browse/JERSEY-1607](http://java.net/jira/browse/JERSEY-1607)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-14T20:22:50.930

我最终注册了一个 ExceptionMapper：

```
import com.google.inject.Singleton;
import com.sun.jersey.api.container.MappableContainerException;
import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

/**
 * @author Gili Tzabari
 */
@Provider
@Singleton
public class RuntimeExceptionMapper implements ExceptionMapper<RuntimeException>
{
    @Override
    public Response toResponse(RuntimeException e)
    {
        if (e instanceof WebApplicationException)
        {
            // WORKAROUND: Attempt to mirror Jersey's built-in behavior.
            // @see http://java.net/jira/browse/JERSEY-1607
            WebApplicationException webApplicationException = (WebApplicationException) e;
            return webApplicationException.getResponse();
        }
        // Jetty generates a log entry whenever an exception is thrown. If we don't register an
        // ExceptionMapper, Jersey will log the exception a second time.
        throw new MappableContainerException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:44:11.767

看看它是如何在[ReXSL](http://www.rexsl.com/rexsl-core/trap.html) [ExceptionTrap](https://github.com/yegor256/rexsl/blob/master/src/main/java/com/rexsl/core/ExceptionTrap.java)类中完成的。您无需注册 an`ExceptionMapper`即可捕获 Jersey 未捕获的所有异常。相反，您让它们冒泡到 Servlet 容器（例如 Tomcat），容器会将它们转发到正确的 servlet 以供进一步处理。

的主要和唯一目的`ExceptionMapper`是将某些特定于业务的异常转换为 HTTP 响应。换句话说，让应用程序控制异常的事件流。另一方面，servlet 异常捕获机制的目的是控制应用程序故障转移并执行一些事后操作，例如日志记录。换句话说，`ExceptionMapper`当您仍然处于控制之中时，它可以工作，而当您失去控制并且您必须向`50x`用户显示响应代码时，异常捕获 servlet 会有所帮助。

Jetty 记录（通过 JUL），`WebApplicationException`如果其封装`Response`的状态代码高于 500。Jetty 不会记录运行时异常，它们只是冒泡到容器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-19T13:58:05.990

扩展[ExtendedExceptionMapper](http://javadox.com/org.glassfish.jersey.core/jersey-common/2.11/org/glassfish/jersey/spi/ExtendedExceptionMapper.html)并实现`isMappable(e)`：

```
@Override
public boolean isMappable(T e) {
    return !e instanceof WebApplicationException;
} 
```

# backbone.js - 使用 pushstate 深度链接backbonejs

> ID：13716796
> 
> 赞同：3
> 
> 时间：2012-12-05T05:20:59.790
> 
> 标签：backbone.js

不知道我错过了什么，但我有 pushState 在我的基于 Backbone 的应用程序上工作，我可以点击并让我的 URL 看起来像 www.example.com/route_specified，但是如果我尝试直接转到该页面，它会显示如未找到。如果我这样做 www.example.com/#route_specified 它可以工作，并在地址栏上快速变回 www.example.com/route_specified

我猜我需要在 Apache 中做一些事情来处理这个问题，并确保所有调用都解析为索引或类似的东西，但找不到解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:34:20.643

正确的。在没有启用 pushstate 的情况下这样想。您的服务器仍在尝试在该路由上提供页面。由于在该位置找不到指定的文档，因此会抛出 404。

从技术上讲，您的服务器仍应在 url 位置产生某种结果，然后让 Backbone 接管。在最简单的形式中，这称为渐进增强。服务器仍应提供包含关键信息的某种静态页面，这将消除您在 SEO 方面遇到的问题。在禁用 javascript 的情况下运行您的网站/应用程序，仅提供相关数据。然后让 Backbone 接管。我刚刚遇到了 Mashable 的重新设计，它们将渐进增强与 Backbone 完美地结合在一起。

如果 SEO 不是问题，您总是可以将用户重定向到索引页面。请记住，搜索引擎只会索引您的应用页面。如果您的内容是动态提供的，则不会有任何数据可供索引。

希望这可以帮助。

谢谢

泰隆

# mysql - Godaddy 数据库连接问题

> ID：13716802
> 
> 赞同：1
> 
> 时间：2012-12-05T05:21:29.160
> 
> 标签：mysql

我在 godaddy 中连接到数据库时遇到问题。我不知道是我的代码给出了问题还是 Godaddy 给出了问题。

我尝试了 2 种不同的编码方式来连接数据库；

下面是工作代码：

```
$hostname = "xxx.db.xxx.hostedresource.com";
$username = "xxx";
$dbname = "xxx";
$password = "xxx";

mysql_connect($hostname, $username, $password) OR DIE ("Unable to 
connect to database! Please try again later.");
mysql_select_db($dbname); 
```

以下是非工作代码：

```
define("DBHOST","xxx.db.xxx.hostedresource.com");
define("DBNAME","xxx");
define("DBUSER","xxx");
define("DBPASS","xxx");

mysql_connect(DB_HOST,DB_USER,DB_PASS) or die(mysql_error());
mysql_select_db(DB_NAME) or die(mysql_error()); 
```

还是因为godaddy不能使用define函数？多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:23:12.907

您正在定义`DBHOST`但使用`DB_HOST`. 所有其他定义的值也存在同样的问题。`define`在 GoDaddy 上没有被禁止。

# jquery-mobile - 多个Photoswipe画廊移动

> ID：13716807
> 
> 赞同：0
> 
> 时间：2012-12-05T05:22:04.823
> 
> 标签：jquery-mobile, photoswipe

我的作品集列表中有多个 PhotoSwipe 画廊，它们可以在桌面上完美运行，但只有第一个画廊在移动设备上显示其图像，而后续画廊则没有。PhotoSwipe 实例实例化，我可以使用箭头等导航，但没有图像.. 有什么想法吗？（我尝试使用 rel="external" 无济于事）

照片扫码：

```
function startSwipe(btnId)
{
    var galleryName = btnId;    

(function(window, PhotoSwipe)
{
            var
                options = {
                    preventHide: false,
                    loop: false,
                    captionAndToolbarShowEmptyCaptions: false,
                    getImageSource: function(obj){
                        return obj.url;
                    },
                    getImageCaption: function(obj){
                        return obj.caption;
                    }
                },
                instance = PhotoSwipe.attach( 
                    [
                        { url: 'http://www.example.com/gallery/'+galleryName+'/images/0.jpg'},
                        { url: 'http://www.example.com/gallery/'+galleryName+'/images/1.jpg'},
                        { url: 'http://www.example.com/gallery/'+galleryName+'/images/2.jpg'},

                    ], 
                    options 
                );
                instance.show(0);
    }(window, window.Code.PhotoSwipe));
} 
```

和jqm：

```
<div data-role="content">
<ul data-role="listview" data-theme="a" class="centerLiPort">
    <li id="gal1" onClick="startSwipe(this.id)">
        <div  class="imgDiv"><img src="images/gal1.jpg" ></img></div>
        <a>Gallery 1</a> 
    </li>

    <li id="gal2" onClick="startSwipe(this.id)">
        <div class="imgDiv"><img src="images/gal2.jpg" ></img></div>
        <a>Gallery 2</a>
    </li>

    <li id="gal3" onClick="startSwipe(this.id)">
        <div class="imgDiv" ><img src="images/gal3.jpg" ></img></div>
        <a>Gallery 3</a> 
    </li>
</ul>
</div><!--/content--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:17:09.273

好吧，我无法解决这个问题，我发现的唯一解决方法是将图像库复制到子域目录中，这确实很臭，但它确实有效。错误在于 IOS 如何处理图像链接——因为它在桌面和其他移动设备上运行良好。

# wordpress - og:image 在 WordPress 主题上无法预测

> ID：13716818
> 
> 赞同：2
> 
> 时间：2012-12-05T05:22:48.583
> 
> 标签：wordpress, facebook-opengraph

尝试在 FB 上共享页面时，许多图像似乎仅在首先通过调试器运行包含图像的页面之后才会出现。此外，在某些情况下，调试器似乎会为同一页面抛出不同的错误，即使我完全没有对页面进行任何更改。有时它告诉我找不到图像 url，然后单击“Scraped URL：”或“Graph API：找到图像 url，然后图像出现在调试器中？！但是，似乎没有任何事情发生，它是很难复制这些问题。

我尝试在此处发布代码未成功，但是，我使用的是 Chad Von Lind (http://vonlind.com/?p=539) 提供的脚本的修改版本。

示例页面（直到提交给调试器后才显示图像）： [http :](http://greatmomentsinparenting.com/photos/12-hours-in-a-car/) [//greatmomentsinparenting.com/photos/warning-parents-keep-out/ http://greatmomentsinparenting.com/photos/12-hours](http://greatmomentsinparenting.com/photos/warning-parents-keep-out/) [-在车里/](http://greatmomentsinparenting.com/photos/12-hours-in-a-car/)

我不明白为什么图像有时会出现，而有时却不会。是缓存问题吗？图像是否需要时间才能显示在新发布页面的缓存中？我可以强制 FB 在第一次尝试时缓存图像吗？还是因为我使用的是动态图片网址？顺便说一下，图像大小为 203x203 像素。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:57:58.817

是媒体殿堂。我已经和他们一起工作了好几个星期来修复它。

[Facebook 503 502 相同的 html 不同的服务器不同的结果](https://stackoverflow.com/questions/13609929/facebook-503-502-same-html-different-servers-different-results)

# php - Zend Framework 2：谓词\在 MSSQL 列名中带有空格

> ID：13716819
> 
> 赞同：1
> 
> 时间：2012-12-05T05:22:51.923
> 
> 标签：php, sql-server-2008, zend-framework2, predicate

我正在尝试使用 ZF2 和 MSSQL 2008 使以下谓词起作用。

```
$select = new Select();
$select -> from("MyTable");

$predicateIn = new Predicate\In('Bad Name', array(
"A",
"B",
"C"
));

$select -> where(array($predicateIn));
$resultSet = $this -> selectWith($select); 
```

这是我得到的错误：

```
[Microsoft][SQL Server Native Client 10.0][SQL Server]Incorrect syntax near 'Bad' 
```

打印生成的语句会显示以下内容，并且找不到解决方法。

```
SELECT "MyTable".* FROM "MyTable" WHERE "Bad" "Name" IN ('A', 'B', 'C') 
```

任何额外的引号都会被转义，并且使用 [Bad Name] 会导致相同的错误。我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:30:09.323

我最终做了以下工作：

```
$select = new Select();
$select -> from("MyTable")    
$platform = $this->adapter->getPlatform();
$filterList = array("A","B","C")

$predicateIn = $platform->quoteIdentifierChain(array('MyTable','Bad Name'));
$predicateIn .= " in (";
$predicateIn .= $platform->quoteValueList($filterList);
$predicateIn .= ")";

$select -> where(array($predicateIn));
$resultSet = $this -> selectWith($select); 
```

我仍然想让 Predicate\In() 工作。

# algorithm - 如何使用快速排序找到 K 个最小值

> ID：13716821
> 
> 赞同：0
> 
> 时间：2012-12-05T05:23:06.860
> 
> 标签：algorithm, quicksort

如果我对所有值进行排序并选择第一个 K 值，问题就很简单。但是它浪费了太多时间，因为可能在整个数组排序之前已经排序了最小的 K 值。我认为解决这个问题的方法是在代码中添加一个标志，但我不知道如何放置标志来判断最小的k值是否已经排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:32:12.550

您可以使用[随机选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)在 O(n) 时间内解决此问题。最后，只返回从 0 到 k 的子数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T05:31:18.813

我认为可以通过找到第 k 个最小值来解决问题。假设快速排序中函数的签名`partition`是`int partition(int* array, int start, int end)`，这里是说明基本思想的伪代码：

```
int select(int[] a, int start, int end, int k)
{
    j = partition(a,start,end);

    if( k == j)
        return a[j];
    if( k < j )
        select(a,start,j-1,k);
    if( k > j )
        select(a,j+1,end,k-j);
}

index = select(a, 0, length_of_a, k); 
```

那么 a[0...index] 是数组 a 中的前 k 个最小值。如果您希望对它们进行排序，您可以进一步对 a[0...index] 进行排序。

# c# - 在 Metro 应用程序中实现 Logger 类

> ID：13716823
> 
> 赞同：1
> 
> 时间：2012-12-05T05:23:21.017
> 
> 标签：c#, windows-8, .net-4.5, windows-store-apps

您好我想实现 Logger 类，以便我可以在日志文件（文本文件）中记录消息。

我可以将这些消息记录到文件中，但我需要更多描述，例如哪个方法调用了此`Log`方法。例如

```
class MyClass
{
    void DoSomething()
    {
        Logger.Log("Doing my job");
    }
} 
```

然后 Log.txt 文件应该包含这样的消息

```
Date&time:Line No. 5:MyClass:DoSomething:Doing my job 
```

获取日期和时间以及消息很容易，但我无法获取方法名称/类名称/行号。

我试图重载`Log`方法为

```
Logger.Log(this,"your Message"); 
```

在这个我可以得到类名但不是方法名/行号（方法名比行号重要我可以删除行号）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T05:50:53.183

您正在寻找的是 .NET Framework 4.5 中可用的[调用者信息属性](http://msdn.microsoft.com/en-us/library/hh534540.aspx)：

```
void Log(string message, 
    [CallerMemberName] string memberName = "",
    [CallerFilePath] string sourceFilePath = "",
    [CallerLineNumber] int sourceLineNumber = 0) 
{
    // output the info to file
} 
```

您仍然可以`Log`像现在一样调用该方法，编译器将填写可选参数的值。

你无法通过这种方式获取类名，但如果方法名和文件名的组合对你来说不够用，你仍然可以按照你已经建议自己的方式获取类名。

# ios - 为 UICollectionView 设置一个新的 collectionViewLayout 给空白屏幕

> ID：13716825
> 
> 赞同：2
> 
> 时间：2012-12-05T05:23:42.613
> 
> 标签：ios, uicollectionview

我开始尝试自定义 UICollectionView 布局。我的 UIViewController 中有一个符合 UICollectionViewDataSource 和 UICollectionViewFlowLayout 协议的 UICollectionView。每个单元格只是一个图像和一个标签。我有一个按钮可以做到这一点：

```
- (IBAction)switchLayout:(id)sender {
    PinchLayout *pinchLayout = [[PinchLayout alloc] init];
    [self.collectionView setCollectionViewLayout:pinchLayout];
} 
```

PinchLayout 直接从 Apple 的示例代码中复制而来。当调用 switchLayout: 方法时，我的 collectionView 消失了。我不明白为什么。我认为它会动画到新的位置。或者在这种情况下，除了为新布局添加手势支持外，什么也不做。然后，当我再次按下按钮时，我看到了一个新布局，其中我的所有集合视图单元格都缩小了其原始大小的版本。这是 PinchLayout.m

```
-(void)applyPinchToLayoutAttributes:(UICollectionViewLayoutAttributes*)layoutAttributes
{
    if ([layoutAttributes.indexPath isEqual:self.pinchedCellPath])
    {
        layoutAttributes.transform3D = CATransform3DMakeScale(self.pinchedCellScale, self.pinchedCellScale, 1.0);
        layoutAttributes.center = self.pinchedCellCenter;
        layoutAttributes.zIndex = 1;
    }
}

-(NSArray*)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray* allAttributesInRect = [super layoutAttributesForElementsInRect:rect];

    for (UICollectionViewLayoutAttributes* cellAttributes in allAttributesInRect)
    {
        [self applyPinchToLayoutAttributes:cellAttributes];
    }

    return allAttributesInRect;
}

-(UICollectionViewLayoutAttributes*)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes* attributes = [super layoutAttributesForItemAtIndexPath:indexPath];

    [self applyPinchToLayoutAttributes:attributes];

    return attributes;
}

-(void)setPinchedCellScale:(CGFloat)scale
{
    _pinchedCellScale = scale;
    [self invalidateLayout];
}

- (void)setPinchedCellCenter:(CGPoint)origin {
    _pinchedCellCenter = origin;
    [self invalidateLayout];
} 
```

有任何想法吗？谢谢！

编辑：如果我将操作方法​​更改为

```
- (IBAction)switchLayout:(id)sender {
    PinchLayout *pinchLayout = [[PinchLayout alloc] init];
    [self.collectionView setCollectionViewLayout:pinchLayout animated:YES];
} 
```

我看着我所有的收藏视图单元格从屏幕上移到顶部。不知道他们为什么这样做。

编辑2：我记录了属性和cellAttributes，看起来框架总是在屏幕的范围内，所以我仍然不确定为什么单元格会离开屏幕到顶部。这是日志：

```
2012-12-04 21:54:40.808 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7516450> index path: (<NSIndexPath 0xe111180> 2 indexes [0, 4]); frame = (297.2 100; 50 50); 
2012-12-04 21:54:40.809 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7611df0> index path: (<NSIndexPath 0x76236e0> 2 indexes [0, 0]); frame = (50 100; 50 50); 
2012-12-04 21:54:40.812 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76235e0> index path: (<NSIndexPath 0x7623700> 2 indexes [0, 1]); frame = (111.8 100; 50 50); 
2012-12-04 21:54:40.812 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76263c0> index path: (<NSIndexPath 0x76263a0> 2 indexes [0, 2]); frame = (173.6 100; 50 50); 
2012-12-04 21:54:40.813 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7623910> index path: (<NSIndexPath 0x7626440> 2 indexes [0, 3]); frame = (235.4 100; 50 50); 
2012-12-04 21:54:40.813 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76239a0> index path: (<NSIndexPath 0x7626460> 2 indexes [0, 4]); frame = (297.2 100; 50 50); 
2012-12-04 21:54:40.813 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7623ff0> index path: (<NSIndexPath 0x7623a40> 2 indexes [0, 5]); frame = (359 100; 50 50); 
2012-12-04 21:54:40.814 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76240a0> index path: (<NSIndexPath 0x7624070> 2 indexes [0, 6]); frame = (420.8 100; 50 50); 
2012-12-04 21:54:40.853 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7624150> index path: (<NSIndexPath 0x7624120> 2 indexes [0, 7]); frame = (482.6 100; 50 50); 
2012-12-04 21:54:40.853 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7624200> index path: (<NSIndexPath 0x76241d0> 2 indexes [0, 8]); frame = (544.4 100; 50 50); 
2012-12-04 21:54:40.853 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76242d0> index path: (<NSIndexPath 0x7623a20> 2 indexes [0, 9]); frame = (606.2 100; 50 50); 
2012-12-04 21:54:40.854 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7624380> index path: (<NSIndexPath 0x7624350> 2 indexes [0, 10]); frame = (668 100; 50 50); 
2012-12-04 21:54:40.854 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7624430> index path: (<NSIndexPath 0x7624400> 2 indexes [0, 11]); frame = (729.8 100; 50 50); 
2012-12-04 21:54:40.854 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76244e0> index path: (<NSIndexPath 0x76244b0> 2 indexes [0, 11]); frame = (50 160; 50 50); 
2012-12-04 21:54:40.855 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x76427e0> index path: (<NSIndexPath 0xe1112f0> 2 indexes [0, 6]); frame = (420.8 100; 50 50); 
2012-12-04 21:54:40.855 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7517f80> index path: (<NSIndexPath 0xe1113a0> 2 indexes [0, 7]); frame = (482.6 100; 50 50); 
2012-12-04 21:54:40.855 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7149030> index path: (<NSIndexPath 0xe111450> 2 indexes [0, 8]); frame = (544.4 100; 50 50); 
2012-12-04 21:54:40.855 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7149210> index path: (<NSIndexPath 0xe111230> 2 indexes [0, 9]); frame = (606.2 100; 50 50); 
2012-12-04 21:54:40.856 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7518220> index path: (<NSIndexPath 0xe111020> 2 indexes [0, 2]); frame = (173.6 100; 50 50); 
2012-12-04 21:54:40.856 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7518510> index path: (<NSIndexPath 0xe1110d0> 2 indexes [0, 3]); frame = (235.4 100; 50 50); 
2012-12-04 21:54:40.856 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7518760> index path: (<NSIndexPath 0xe111180> 2 indexes [0, 4]); frame = (297.2 100; 50 50); 
2012-12-04 21:54:40.856 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7518ac0> index path: (<NSIndexPath 0xe111250> 2 indexes [0, 5]); frame = (359 100; 50 50); 
2012-12-04 21:54:40.857 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7642bf0> index path: (<NSIndexPath 0xe110e00> 2 indexes [0, 0]); frame = (50 100; 50 50); 
2012-12-04 21:54:40.857 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7518d40> index path: (<NSIndexPath 0xe110f80> 2 indexes [0, 1]); frame = (111.8 100; 50 50); 
2012-12-04 21:54:40.857 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0xe111600> index path: (<NSIndexPath 0xe1115d0> 2 indexes [0, 10]); frame = (668 100; 50 50); 
2012-12-04 21:54:40.858 Animations[2079:c07] attributes: <UICollectionViewLayoutAttributes: 0x7642dd0> index path: (<NSIndexPath 0xe111680> 2 indexes [0, 11]); frame = (50 160; 50 50); 
2012-12-04 21:54:41.161 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76240a0> index path: (<NSIndexPath 0x7643bf0> 2 indexes [0, 0]); frame = (50 100; 50 50); 
2012-12-04 21:54:41.162 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7623ff0> index path: (<NSIndexPath 0x7644e90> 2 indexes [0, 1]); frame = (111.8 100; 50 50); 
2012-12-04 21:54:41.162 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76239a0> index path: (<NSIndexPath 0x7645310> 2 indexes [0, 2]); frame = (173.6 100; 50 50); 
2012-12-04 21:54:41.162 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7623910> index path: (<NSIndexPath 0x7642bb0> 2 indexes [0, 3]); frame = (235.4 100; 50 50); 
2012-12-04 21:54:41.163 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76263c0> index path: (<NSIndexPath 0x761ab30> 2 indexes [0, 4]); frame = (297.2 100; 50 50); 
2012-12-04 21:54:41.163 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76235e0> index path: (<NSIndexPath 0x7642170> 2 indexes [0, 5]); frame = (359 100; 50 50); 
2012-12-04 21:54:41.163 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7611df0> index path: (<NSIndexPath 0x7642190> 2 indexes [0, 6]); frame = (420.8 100; 50 50); 
2012-12-04 21:54:41.163 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7642070> index path: (<NSIndexPath 0x7642230> 2 indexes [0, 7]); frame = (482.6 100; 50 50); 
2012-12-04 21:54:41.164 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7642ea0> index path: (<NSIndexPath 0x76422f0> 2 indexes [0, 8]); frame = (544.4 100; 50 50); 
2012-12-04 21:54:41.164 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7645d00> index path: (<NSIndexPath 0x7641d30> 2 indexes [0, 9]); frame = (606.2 100; 50 50); 
2012-12-04 21:54:41.164 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76469b0> index path: (<NSIndexPath 0x7642470> 2 indexes [0, 10]); frame = (668 100; 50 50); 
2012-12-04 21:54:41.164 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7646cb0> index path: (<NSIndexPath 0x7642490> 2 indexes [0, 11]); frame = (729.8 100; 50 50); 
2012-12-04 21:54:41.165 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x76470b0> index path: (<NSIndexPath 0x7646d30> 2 indexes [0, 11]); frame = (50 160; 50 50); 
2012-12-04 21:54:41.165 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7517e40> index path: (<NSIndexPath 0x7517e10> 2 indexes [0, 0]); frame = (50 100; 50 50); 
2012-12-04 21:54:41.165 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7517f00> index path: (<NSIndexPath 0x7517ed0> 2 indexes [0, 1]); frame = (111.8 100; 50 50); 
2012-12-04 21:54:41.166 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7517fb0> index path: (<NSIndexPath 0x7517f80> 2 indexes [0, 2]); frame = (173.6 100; 50 50); 
2012-12-04 21:54:41.166 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7518060> index path: (<NSIndexPath 0x7518030> 2 indexes [0, 3]); frame = (235.4 100; 50 50); 
2012-12-04 21:54:41.166 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7518110> index path: (<NSIndexPath 0x75180e0> 2 indexes [0, 4]); frame = (297.2 100; 50 50); 
2012-12-04 21:54:41.166 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x75181d0> index path: (<NSIndexPath 0x75181b0> 2 indexes [0, 5]); frame = (359 100; 50 50); 
2012-12-04 21:54:41.167 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7518280> index path: (<NSIndexPath 0x7518250> 2 indexes [0, 6]); frame = (420.8 100; 50 50); 
2012-12-04 21:54:41.167 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7518330> index path: (<NSIndexPath 0x7518300> 2 indexes [0, 7]); frame = (482.6 100; 50 50); 
2012-12-04 21:54:41.167 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x75183e0> index path: (<NSIndexPath 0x75183b0> 2 indexes [0, 8]); frame = (544.4 100; 50 50); 
2012-12-04 21:54:41.167 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x75184b0> index path: (<NSIndexPath 0x7518190> 2 indexes [0, 9]); frame = (606.2 100; 50 50); 
2012-12-04 21:54:41.168 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7518560> index path: (<NSIndexPath 0x7518530> 2 indexes [0, 10]); frame = (668 100; 50 50); 
2012-12-04 21:54:41.168 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x7518610> index path: (<NSIndexPath 0x75185e0> 2 indexes [0, 11]); frame = (729.8 100; 50 50); 
2012-12-04 21:54:41.168 Animations[2079:c07] cellAttributes: <UICollectionViewLayoutAttributes: 0x75186c0> index path: (<NSIndexPath 0x7518690> 2 indexes [0, 11]); frame = (50 160; 50 50); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:04:07.583

我的项目中有这个问题，据我所知，这是 UICollectionView 中的一个错误，在`contentOffset`调用`setCollectionViewLayout`. 由于您不需要为过渡设置动画，我认为您可以`contentOffset`在调用`setCollectionViewLayout`. 我已经在我的项目中对此进行了测试并且它有效。然而，有了`animated:YES`旗帜后，细胞会以不平稳的运动移动，然后才能停在正确的位置。

对于您的项目，我会尝试这样的事情：

```
- (IBAction)switchLayout:(id)sender {
    CGPoint originalContentOffset = self.collectionView.contentOffset;
    PinchLayout *pinchLayout = [[PinchLayout alloc] init];
    [self.collectionView setCollectionViewLayout:pinchLayout animated:NO];
    self.collectionView.contentOffset = originalContentOffset;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:24:27.663

我已经发布了解决此问题的方法，其中包括此处的动画： [Dynamically setting layout on UICollectionView 导致莫名其妙的 contentOffset 变化](https://stackoverflow.com/questions/13780138/dynamically-setting-layout-on-uicollectionview-causes-inexplicable-contentoffset/14075292#14075292)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T07:12:17.840

你`- (void)invalidateLayout`在设置新布局之前打电话怎么样..？[文档](https://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewLayout_class/Reference/Reference.html#//apple_ref/occ/instm/UICollectionViewLayout/invalidateLayout)

# java - 如何创建一个可以处理 Android 设备上不同屏幕分辨率的 Android 应用程序？

> ID：13716826
> 
> 赞同：-1
> 
> 时间：2012-12-05T05:24:23.760
> 
> 标签：java, android

如何创建一个可以处理 Android 设备上不同屏幕分辨率的 Android 应用程序？我希望我的应用程序能够适应不同的可用分辨率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:27:32.160

请阅读有关[如何支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)的信息。

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:33:16.907

将以下代码添加到您的 Androidmanifest.xml 文件中。

```
<supports-screens android:resizeable=["true"| "false"]
    android:smallScreens=["true" | "false"]
    android:normalScreens=["true" | "false"]
    android:largeScreens=["true" | "false"]
    android:xlargeScreens=["true" | "false"]
    android:anyDensity=["true" | "false"]
    android:requiresSmallestWidthDp="integer"
    android:compatibleWidthLimitDp="integer"
    android:largestWidthLimitDp="integer"/> 
```

有关更多信息，请参见下面的链接。

[屏幕_支持](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:30:31.213

为每个显示分辨率创建文件夹：

*   小屏：**res->layout-ldpi**设计为240*320分辨率屏幕
*   medium screen: **res-->layout-mdpi** design for 320*480 resolution screen
*   大屏：**res-->layout-hdpi**设计为480*800分辨率屏幕

当您运行项目时，它会自动从所需的布局中获取布局设计/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T05:31:06.923

您需要有不同的布局文件夹和可绘制资源来支持 Android 上的多种屏幕尺寸。[更多关于这个](http://developer.android.com/guide/practices/screens_support.html#support)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T05:27:07.643

在此处阅读[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)。

那里很好地描述了如何创建应用程序以支持多种屏幕尺寸/分辨率。我认为这是android开发必备的知识。

# java - 从 txt 文件中读取整数并存储到数组中

> ID：13716830
> 
> 赞同：4
> 
> 时间：2012-12-05T05:24:56.457
> 
> 标签：java, arrays, file

我正在尝试从文本文件中读取整数并将它们存储到数组中。文本文件内容如下：

```
4
-9
-5
4
8
25
10
0
-1
4
3
-2
-1
10
8
5
8 
```

然而，当我运行我的代码时，我进入`[I@41616dd6`了控制台窗口......

```
public static void main(String[] args) throws IOException
    {
        FileReader file = new FileReader("Integers.txt");
        int[] integers = new int [100];
        int i=0;
        try {
            Scanner input = new Scanner(file);
            while(input.hasNext())
            {
                integers[i] = input.nextInt();
                i++;
            }
            input.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        System.out.println(integers);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T05:28:43.690

您正在打印出数组的虚拟内存地址，而不是实际的数组项：

您可以逐一打印出实际的数组项，如下所示：

```
// This construct is called a for-each loop
for(int item: integers) {
   System.out.println(item);
} 
```

@akuhn 正确地指出 Java 有一个内置的帮助器：

```
System.out.println(Arrays.toString(integers)); 
```

请注意，您需要添加：

```
import java.util.Arrays 
```

在您的导入中以使其正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T06:45:07.893

不幸的是，Java 的设计者错过了为数组添加适当的字符串表示。

而是使用

```
System.out.println(Arrays.toString(integers)); 
```

您需要完成`import java.util.Arrays;`这项工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T05:28:11.510

而不是这个

```
System.out.println(integers); 
```

试试这个

```
System.out.println(integers[0] + " : " + integers[1]); 
```

您需要在`integers[]`数组中打印实际值而不是数组本身

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T05:41:02.450

如果使用 int 数组不是限制，那么我建议使用 List。你可以像这样使用它：

```
 List<Integer> integers = new ArrayList<Integer>();
 Scanner input = new Scanner(file);
 while(input.hasNext()){
   integers.add(scanner.nextInt());
 }
 System.out.println(integers); 
```

输出 ：`[1,2,-1,23]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T07:01:32.913

每当您将任何对象传递给 System.out.println() 时，它都会打印该对象的 toString()。如果它没有被覆盖，它会打印该对象的内存地址。

```
System.out.println(integers); 
```

正在尝试打印整数数组的 toString() 表示，它只不过是该数组的 JVM 地址。

要打印数组中的实际数字，您需要遍历数组或将数组转换为`java.util.ArrayList`.（已`toString()`实现该方法。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-26T18:17:32.377

# 这应该可以帮助您从文件中读取整数并将其存储在数组中

导入 java.util.Scanner；

导入java.io.File；

导入 java.util.ArrayList；

公共类文件到数组{

```
public static ArrayList<Integer> read(File f)
{
    ArrayList<Integer> array=new ArrayList<Integer>();
    try
    {

    Scanner sc=new Scanner(f);
    while(sc.hasNextLine())
    {
        array.add(sc.nextLine());
    }

    }
    catch(Exception e)
    {
        System.out.printf("ERROR : %s", e);
    }
    return array;
}
public static void main(String[] args) {
    File file1=new File("file1.txt");//your file path here
    ArrayList<Integer> array1;
    array1=read(file1);
    System.out.println(array1);

} 
```

}

# javascript - JQMobile - 无法在自定义 ajax 中加载微调器

> ID：13716831
> 
> 赞同：1
> 
> 时间：2012-12-05T05:25:05.407
> 
> 标签：javascript, ajax, jquery, jquery-mobile

我有一个搜索表单**data-ajax=false**。因为我想编写自己的自定义 ajax 调用。

```
<form id="search" data-ajax="false">
<fieldset data-role="controlgroup" data-mini="true">
<input required="required" autocorrect="off" name="TERM_1" placeholder="Search Catalogue" type="search" value=""/>
</fieldset>
</form> 
```

下面是js代码

```
$(document).bind('pageinit',function() {
$('#search').unbind('submit');
        $('#search').submit(function(event) {
        $.mobile.loading( 'show', { text: "loading", textonly: true, textVisible : true });
        input = $('[name="TERM_1"]').val();
        $.ajax(
        {
            type: "GET",
            async: false,
            url: 'LiberoWebServices.JSONAPI.cls',
            data: 
            {
                Method: "Catalogue",
                Type: "simple",
                Split: 10,
                Term: input
            },
            dataType: 'jsonp',
            success: function(data) {
                loadResults(data);
            },
            complete: function(data) {
                $.mobile.loading('hide');
            }
        })
        return false;
        });
    }); 
```

加载弹出窗口似乎没有显示。我猜这与我解除绑定和绑定的方式有关。我取消绑定的原因是每次我提交表单时，它都会为我在 DOM 中预取的所有其他页面运行 ajax 调用。我不确定这样做的最佳方法是什么。

需要帮助弄清楚如何让加载弹出窗口显示。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T23:37:41.787

使用逻辑上的变化。而不是这个：

```
 $('#search').unbind('submit'); 
```

创建一个函数指针并重置绑定以运行一次，如这些不相关的问题：

*   [jsmart - 无法获取模板内容（及时？）](https://stackoverflow.com/questions/11739922/jsmart-cant-get-template-contents-in-time/19736295#19736295)

*   [如何只运行一次 Greasemonkey 脚本](https://stackoverflow.com/questions/15249703/how-to-run-a-greasemonkey-script-only-once/15847401#15847401)

# android - 在android中为imageview设置选择

> ID：13716832
> 
> 赞同：1
> 
> 时间：2012-12-05T05:25:06.730
> 
> 标签：android

我在 android 的列表视图中实现复选框，但是为此我使用的是图像视图而不是复选框。我也在 xml 中设置状态选择的真假情况。当用户第一次单击复选框时，它应该是标记为已检查第二次单击它应该显示另一个图像。但是单击此图像时状态不会改变。以下是我的代码：

在适配器类中：

```
ImageView checkBox1=(ImageView)itemview.findViewById(R.id.checkBox1);
checkBox1.setTag(new selector(0, position)); 
```

在 XML 中：

```
<ImageView
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/checkbox_image"
    android:focusable="false"
    android:gravity="center" /> 
```

最后是 checkbox_image xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:drawable="@drawable/check_box_select" android:state_selected="true"/> 
    <item android:drawable="@drawable/check_box" android:state_selected="false"/>   
</selector> 
```

# c# - 将多个数组绑定到 WPF 数据网格

> ID：13716834
> 
> 赞同：1
> 
> 时间：2012-12-05T05:25:13.010
> 
> 标签：c#, wpf, datagrid

我尝试使用 C# 将一些数组绑定到 Wpf 数据网格中。我能做的只是将一个数组绑定到数据网格中。有谁知道如何将多个数组绑定到数据网格中？我在下面尝试的代码不起作用。数据网格什么也没显示。

我的数据网格代码片段：

```
<DataGrid Name="MyDatagrid" Grid.Column="1" AutoGenerateColumns="False">
    <DataGrid.Columns>
         <DataGridTextColumn Header="Date"  Width="60" Binding="{Binding Date}"/> 
         <DataGridTextColumn Header="Time" Width="55" Binding="{Binding Time}"/>
         <DataGridTextColumn Header="No" Width="69" Binding="{Binding No}"/>
    </DataGrid.Columns>
</DataGrid> 
```

C#代码片段：

```
string[] Date = {"2-Nov-2012","2-Nov-2012","2-Nov-2012","2-Nov-2012","2-Nov-2012"};
string[] Time={"10:30","10:32","10:35","10:42","10:45"};
int[] No = { 1, 2, 3, 4, 5 };
MyDataGrid.ItemsSource = No;
MyDataGrid.ItemsSource = Date;
MyDataGrid.ItemSource = Time; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T05:53:22.687

您不能将多个数组绑定到同一个数据网格；但是你可以用一个类来达到同样的目的：

```
public class Row
{
    public string Date { get; set; }
    public string Time { get; set; }
    public int No { get; set; }
} 
```

使用 Linq 填充：

```
string[] Date = {"2-Nov-2012","2-Nov-2012","2-Nov-2012","2-Nov-2012","2-Nov-2012"};
string[] Time={"10:30","10:32","10:35","10:42","10:45"};
int[] No = { 1, 2, 3, 4, 5 };

Row[] rows = Date.Select( (date, index) => new Row {
    Date = date,
    Time = Time[index],
    No = No[index]
}).ToArray();

MyDataGrid.ItemsSource = rows; 
```

# python - sqlalchemy 核心和 sqlite 的 %s 问题

> ID：13716837
> 
> 赞同：1
> 
> 时间：2012-12-05T05:25:20.093
> 
> 标签：python

当我尝试将 %s 语法与 sqlalchemy 和 sqlite 一起使用时，出现错误。与 postgresql 相同的语法可以正常工作：

```
import sqlalchemy
e = sqlalchemy.create_engine('sqlite:////tmp/x.db?timeout=120000')
e.execute('select * from people where name = %s;', 'joe').fetchall() 
```

我明白了：

```
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1396, in _cursor_execute
    context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/default.py", line 301, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: near "%": syntax error

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1790, in execute
    return connection.execute(statement, *multiparams, **params)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1191, in execute
    params)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1287, in _execute_text
    return self.__execute_context(context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1302, in __execute_context
    context.parameters[0], context=context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1403, in _cursor_execute
    context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1360, in _handle_dbapi_exception
    from e
sqlalchemy.exc.OperationalError: (OperationalError) near "%": syntax error 'select * from people where name = %s;' ('joe',)
>>> 
```

同样，与 postgres 完全相同的东西返回一个列表或行。这是一个错误吗？还是预期的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:28:04.860

字符串格式有一个小问题`'select * from people where name = %s;', 'joe'`

`%s`用于字符串格式化，`%s`期望`some sort Data to be replaced`字符串后有一个 %

您应该删除`,`from`%s;', 'joe'`并添加 a`%`以获取

```
In [10]: 'select * from people where name = %s;' %'joe'
Out[10]: 'select * from people where name = joe;' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:48:08.250

[范](https://stackoverflow.com/users/99594/van)在他[对我的另一个帖子](https://stackoverflow.com/questions/13717713/sqlachemy-weird-behaviour-with-s-on-a-select)的回答中给出了正确的答案。解决方案是使用[sqlalchemy "text"](http://docs.sqlalchemy.org/en/latest/core/tutorial.html#using-text)。这适用于 SQLite 和 postgreSQL（我假设其他服务器也是如此），因此您可以编写一次并针对不同的数据库服务器使用它（当然，只要您保持 sql 通用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:10:42.497

我通过使用问号语法解决了这个问题：

```
e.execute('select * from people where name = ?;', 'joe').fetchall() 
```

这适用于 sqlite~~和 postgres~~。

来自[Pylon 书中关于 sqlalchemy 的章节](http://pylonsbook.com/en/1.1/introducing-the-model-and-sqlalchemy.html)：

> 不同的数据库使用不同的标记（称为参数样式）来标记您传递给 execute() 的变量应该插入的位置。上面的例子使用了 SQLite，它使用 ? 作为参数样式，但如果您尝试使用 MySQL 或 PostgreSQL，则需要使用 %s 作为参数样式。然后 SQL 看起来像这样

正确的答案是用户 sqlalchemy “文本”（请参阅​​我的其他答案）。

# servicestack - 如何让 ServiceStack 序列化/反序列化具有正确类型的 expando 对象

> ID：13716838
> 
> 赞同：3
> 
> 时间：2012-12-05T05:25:26.020
> 
> 标签：servicestack

只是想弄清楚 servicestack.text 支持将 expando 对象序列化到 json 和从 json 序列化的能力。我知道expando 对象实现了一个IDictionary。当我序列化到 json 和从 json 序列化时，我无法在反序列化的 IDictionary 中获取正确的类型。由于 Json 本身不支持类型并且 servicestack 有一个名为 JsConfig.IncludeTypeInfo 的设置，我希望它在序列化的 json 中包含类型信息，以使服务堆栈能够反序列化为另一端的正确类型（例如，没有小数位的小数被反序列化为 uint64）。

是否有强制 servicestack 使用 expando 对象正确反序列化与源相同的类型？

Ps：我不想使用 poco 对象来实现这一点，因为直到运行时我才知道对象的属性。

下面是一个快速测试，显示我的意思。

谢谢

```
/// <summary>
/// Test servicestack serialisation
/// I was expecting that IncludeTypeInfo=true would always add the type info
/// so when you deserialise into a IDictionary<string,object> servicerstack
/// would have enough information to convert to the expected type
/// </summary>
[Test]
public void TestDynamicSerialization()
{
    JsConfig.Reset();
    JsConfig.IncludeNullValues = true;
    JsConfig.IncludeTypeInfo = true;
    JsConfig.EmitCamelCaseNames = false;
    JsConfig.ConvertObjectTypesIntoStringDictionary = true;
    JsConfig.PropertyConvention = JsonPropertyConvention.Lenient;
    JsConfig.TryToParsePrimitiveTypeValues = true;

    // create an expando object
    dynamic obj = new ExpandoObject();

    // cast as a idictionary and set two decimals, one with decimnal places and one without
    var objDict = (IDictionary<string, object>)obj;
    objDict["decimal1"] = 12345.222M;
    objDict["decimal2"] = 12345M;

    Assert.AreEqual(typeof(decimal), objDict["decimal1"].GetType());
    Assert.AreEqual(typeof(decimal), objDict["decimal2"].GetType());

    // serialise to json
    var json = JsonSerializer.SerializeToString(obj);

    //deserialise to a a IDictionary<string,object>
    var deserialisedDict = JsonSerializer.DeserializeFromString<IDictionary<string, object>>(json);

    // make sure we got the expected types
    Assert.AreEqual(typeof(decimal), deserialisedDict["decimal1"].GetType());
    Assert.AreEqual(typeof(decimal), deserialisedDict["decimal2"].GetType(), "Fails because type is UInt64 expected decimal");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:03:14.703

NuGet 上的 ServiceStack.Text 是一个 .NET 3.5 dll，没有对 Dynamic/Expando 的隐式支持。您仍然可以使用`JsonObject`动态解析 JSON。

在 ServiceStack.Text 的 .NET 4.0 构建中，您可以使用`DynamicJson`它将对动态类中的 JSON 对象的访问包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T13:40:11.633

应该从[https://github.com/ServiceStack/ServiceStack.Text/pull/347](https://github.com/ServiceStack/ServiceStack.Text/pull/347)开始修复，除非您指定 TryToParseNumericType，否则默认情况下会返回小数，在这种情况下，您将获得最合适的数字类型。

# java - 在命令行中使用 Stanford CoreNLP 时出错

> ID：13716843
> 
> 赞同：2
> 
> 时间：2012-12-05T05:26:02.767
> 
> 标签：java, stanford-nlp

我是使用 Java 编写的程序的新手，并且在让 StanfordCoreNLP 做它应该做的事情时遇到了很多麻烦。我将程序解压缩到它自己的目录中，并在其中添加了程序应该处理的 XML 文件。我一直用来在命令行中处理文件的代码是：

java -cp stanford-corenlp-YYYY-MM-DD.jar:stanford-corenlp-YYYY-MM-DD-models.jar:xom.jar:joda-time.jar -Xmx3g edu.stanford.nlp.pipeline.StanfordCoreNLP [ -道具] -文件。

问题是每次我尝试运行它时都会收到以下错误：“找不到或加载主类 edu.stanford.nlp.pipeline.StanfordCoreNLP。” 我只是不确定如何处理这个错误，并且希望任何人都可以提供任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-09T19:08:58.197

你在使用 Windows 吗？您是否检查过下面的行

“对于 Windows，分隔 jar 文件的冒号 (:) 需要是分号 (;)。”

照原样使用该示例会给您该错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-28T18:18:30.973

您必须安装 Java 1.8 才能运行此命令。

运行以下命令将安装 Java 1.8：

```
sudo add-apt-repository ppa:webupd8team/java

sudo apt-get update

sudo apt-get install oracle-java8-installer 
```

这直接取自[http://tecadmin.net/install-oracle-java-8-jdk-8-ubuntu-via-ppa/](http://tecadmin.net/install-oracle-java-8-jdk-8-ubuntu-via-ppa/)；有关更多信息，您可以使用该页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-27T07:56:09.260

最有可能的是，Stanford CoreNLP 文件夹中的 jar 文件在 2014-08-27 构建的情况下以 Stanford-corenlp-3.4.1.jar 等版本命名。在命令中将文件名重命名为 Stanford-corenlp-3.4.1.jar 或重命名文件夹中的文件，例如 Stanford-corenlp-YYYY-MM-DD.jar。

# oracle - 在 Oracle PL/SQL 成员过程中持续更改 SELF 的问题

> ID：13716846
> 
> 赞同：1
> 
> 时间：2012-12-05T05:26:26.800
> 
> 标签：oracle, plsql

我正在使用 Oracle 中的对象关系功能，并且无法持久地对成员过程中发生的对象进行更改。首先我有一个抽象的超类型：

```
CREATE TYPE fantasy_action AS OBJECT (
action_id      NUMBER,
time_completed DATE,
NOT INSTANTIABLE MEMBER PROCEDURE execute(SELF IN OUT NOCOPY fantasy_action)
NOT INSTANTIABLE NOT FINAL; 
```

这是我的一个类型声明的一部分（也创建了一个相应的表）：

```
CREATE TYPE fantasy_trade UNDER fantasy_action (
...[other variables]...
OVERRIDING MEMBER PROCEDURE execute(SELF IN OUT NOCOPY fantasy_trade)); 
```

我遇到的问题是会员程序的这一部分：

```
CREATE OR REPLACE TYPE BODY fantasy_trade AS
     OVERRIDING MEMBER PROCEDURE execute( SELF IN OUT NOCOPY fantasy_trade ) IS
     current_week NUMBER;
     player1_plays NUMBER;
     player2_plays NUMBER;
  BEGIN
     ...
     time_completed := current_date;
     ...
  END;
END; 
```

最后，我调用该过程的方式是通过一个简单的 PL/SQL 循环：

```
DECLARE
   action fantasy_action;
  BEGIN
     FOR x IN (SELECT DEREF(action) as action FROM fantasy_scheduledaction WHERE time <= current_date AND DEREF(action).time_completed is null) LOOP
     x.action.execute();
END LOOP;
END; 
```

即使在验证程序的其余部分已经完成之后，time_completed 字段仍然为空——可能是什么问题？我尝试使用 SELF.time_completed 无济于事，并且过程中的所有其他变量都被适当地引用。这是否与这个变量来自超类型的事实有关？或者可能是我通过取消引用的指针调用该过程？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:22:24.463

尝试使用 UTL_REF.UPDATE_OBJECT：

```
DECLARE
    action fantasy_action;
BEGIN
    FOR x IN
    (
        SELECT DEREF(action) as action_deref, action action_ref
        FROM fantasy_scheduledaction
        WHERE time <= current_date
            AND DEREF(action).time_completed is null
    ) LOOP
        x.action_deref.execute();
        utl_ref.update_object(x.action_ref, x.action_deref);
    END LOOP;
END;
/ 
```

# php - 如何获取每年每个月的最新 3 条记录？

> ID：13716847
> 
> 赞同：0
> 
> 时间：2012-12-05T05:26:28.233
> 
> 标签：php, mysql

mysql中是否有一个查询来获取每年每个月的最新3条记录？还是应该通过 Loop 来完成？

IE

```
YEAR 2011

january 

Record 1
Record 2
Record 3

May 

Record 1
Record 2
Record 3

September 

Record 1
Record 2
Record 3

YEAR 2012

August 

Record 1
Record 2
Record 3

Nov 

Record 1
Record 2
Record 3

Dec 

Record 1
Record 2
Record 3 
```

等等。

猜测可以通过循环实现，但不确定实现这一目标的更好方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:39:28.003

尝试使用一些示例应用程序。请记住，我这样做是为了您可以根据需要使用命名约定。

首先创建的数据库表如下。我已将此表命名为“三个月”

```
 id auto_increament,
title varchar 255,
created date 

```

标题只是为了确保不重复的结果，

现在创建一个 php 文件并建立数据库连接等。

现在在该页面内的查询下方复制粘贴。

```
 SELECT YEAR(created) as stat_year,
       MONTH(created) as stat_month,
       COUNT(*) as stat_count,
       title,
       GROUP_CONCAT(created) as FinalResult,
       id
FROM
      `threemonth`
GROUP BY stat_year,stat_month
ORDER BY created DESC 

```

上面的查询将输出如下所示的内容。

```
 stat_year = 2012
stat_month = 12
stat_count = 2
FinalResult = comma separated date listing becaue of concating result.
title and id 

```

现在在显示记录时，按您的意愿显示。

只需分解逗号分隔的已创建字段并仅显示前三个记录即可。

# linux - 有什么方法可以在linux中编译.so文件以静态链接到执行文件？

> ID：13716849
> 
> 赞同：1
> 
> 时间：2012-12-05T05:26:29.267
> 
> 标签：linux, compiler-construction

在 linux 中，.a 文件通常是静态库，.so 文件是动态文件？我想知道有没有办法将.so文件编译成可执行文件作为它的一部分？我google了一下，没有找到方法。谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:32:19.930

静态链接在 Linux 中已经死了，我建议你不要编译静态库，尽管你可以在 Linux 中编译。这样的特性在 Windows 下是可以的，但在 Linux 目前的发展趋势中却不是这样。

[Linux静态链接死了？](https://stackoverflow.com/questions/3430400/linux-static-linking-is-dead)

[gcc中共享库函数的静态链接](https://stackoverflow.com/questions/725472/static-link-of-shared-library-function-in-gcc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:34:25.737

如果 .so 文件是您自己从源代码构建的，那么您可以更改构建设置以使其成为 .a 文件，并静态链接它。

如果其他人创建了 .so 文件，那么不，没有简单的方法将其静态链接到可执行文件中。

# iphone - html5+jquery 或核心 xcode 中高度交互的 iOS 应用程序

> ID：13716850
> 
> 赞同：0
> 
> 时间：2012-12-05T05:26:31.183
> 
> 标签：iphone, ios5, xcode4.2

我想设计一个iOS应用程序，它是**高度交互+动画滑动视图**。我有这样的选择：1）核心xCode 2）HTML5 + jquery mobile + CSS 3）电话差距

但我不确定哪个平台最好？？我的要求是： **1）应用程序应该快速创建并且易于升级和维护。** 2）将来我可以将它扩展到多个移动平台（我知道..它可能与phonegap但由于学习时间我不想把它放在一边，这也是我的第二要务。所以请不要考虑它。）

我不知道我是否可以在 HTML5 + jquery 中设计完整的应用程序，但是我想在 xCode 中实现它，因为它原生于 iOS 开发。

**请指导我完成。并且有一些很好的参考来用最好和最简单的方式创建高度交互的 iOS 应用程序也很好。**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:41:22.427

无论您采用哪种方法，编写具有滑动和动画视图的高度交互的应用程序都不是一件容易的事。在我看来，从您的选择中，您需要在交互性/质量、速度和便携性之间选择您最想要的。

> -Objective C 将为您提供作为母语的最高质量/交互性，听起来您已经准备好使用它，所以这也是速度。但是，以后移植可能会更加困难
> 
> -HTML 5 将很容易移植，听起来你也准备好了，但我认为你没有 Objective C 那样强大
> 
> -我对Phone Gap知之甚少，但我知道它意味着可移植性，而且我认为它比HTML更强大，但听起来你需要为此学习，因此牺牲了速度。

如果您碰巧选择了 Objective C，这里有一些资源可以帮助您入门：

-看[This Question](https://stackoverflow.com/questions/820557/are-there-any-good-uiscrollview-tutorials-on-the-net) for scrolling -至于动画，有很多不同的方法，最简单的就是将[This](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes) 与[This](http://appsamuck.com/day2.html)结合起来。（第二张不一定是gif，个人更喜欢png）

# opengl - OpenGL-OpenCL 互操作传输时间 + 位图纹理

> ID：13716855
> 
> 赞同：6
> 
> 时间：2012-12-05T05:27:01.957
> 
> 标签：opengl, opencl

两部分问题：

我正在开展一个学校项目，使用生命游戏作为试验 gpgpu 的工具。我正在使用 OpenCL 和 OpenGL 进行实时可视化，目标是让这个东西尽可能大和快。在分析后，我发现帧时间由 CL 获取和释放 GL 缓冲区控制，并且时间成本与缓冲区的实际大小成正比。

1）这是正常的吗？为什么会这样？据我所知，缓冲区永远不会离开设备内存，而 CL Acquire/Release 就像互斥锁一样。OpenCL 会单独锁定/解锁每个字节还是什么？

为了解决这个问题，我已经从 24 位 RGBA 颜色模式（据我了解是 OpenGL 的首选颜色模式？）缩小到 8 位 RGB 颜色。这导致了显着的加速，但是在调整我的内核之后，传输时间再次占主导地位。

在没有关于如何完全消除传输时间的任何想法（没有将我的内核从 OpenCL 移植到 GLSL，这将超出项目的原始范围），我现在认为我最好的选择是写入位图（与我当前使用的 8 位像素图相反），然后使用带有颜色索引的位图来纹理四边形。

2) 我可以直接使用位图对四边形进行纹理处理吗？我考虑过使用 glBitmap 绘制到辅助缓冲区，然后使用这个缓冲区来纹理我的四边形，但如果有可用的路线，我更愿意使用更直接的路线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:48:31.503

CL/GL 互操作获取和释放调用背后的设计意图是让它们成为简单的所有权转移。然而，在许多早期的实现中，这些都是将图像从 CL 复制到 GL 并返回。

除非您使用 OpenCL 1.1 中的同步对象扩展，否则您需要在发布之前执行 clFinish 并在获取之前执行 glFinish；您*会*看到这里花费了很多时间，因为所有排队的工作都必须在这些调用继续之前完成。有些平台可以使用 clFlush 代替 clFinish；检查供应商提供的 OpenCL 文档。

在或多或少最新的硬件上使用最新的 NVIDIA 和 AMD 驱动程序，我看到高清视频大小的图像的获取和发布调用非常迅速。

# sql - 设计电子商务应用程序 - 复杂的 EAV

> ID：13716862
> 
> 赞同：0
> 
> 时间：2012-12-05T05:27:21.700
> 
> 标签：sql, database, entity-attribute-value

我正在尝试为电子商务项目设计数据库。

当前的模型是类别（它们自己有一个外键）和产品（它们有一个类别的 fk）。我现在要实现的是自定义属性。

本质上，我希望能够动态指定给定类别的属性。例如，在“监视器”类别中，我希望能够指定该类别中的产品将具有“分辨率”属性。请注意，这是我想要动态执行的操作 - 我不想在任何属性中硬编码。显而易见的解决方案是使用 EAV。然而...

当用户导航到给定类别时，我需要能够让他们根据自定义属性指定和过滤。换句话说，我想让用户导航到监视器类别并指定他们只想查看“分辨率”=“1080p”的监视器。好吧，这就是它变得复杂的地方。我需要知道，仅基于类别，哪些属性（如“分辨率”）可用，以及它们具有哪些可能的值（如“1080p”）。

我一辈子都找不到合适的模型……谁能指出我正确的方向？

注意：我目前正在使用 MySQL，但我绝对愿意接受其他选择。例如，我知道 NoSQL dbs 提供了拥有 N 个用户定义文件的能力（因为你只是存储任意数据）所以如果 MySQL 甚至 SQL 完全不能提供 1）相当优雅和 2）相当有效的解决方案，我完全愿意考虑其他技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:38:14.120

您可以尝试创建一个表，其中包含 FK 字段、自定义选项名称的另一个字段和自定义选项值的另一个字段，如下所示：

```
id = 1;
category_id = 1; // FK
custom_option = "resolution";
custom_value = "1080p";

id = 2;
category_id = 1;
custom_option = "touch sensitive";
custom_value = "0"; // 1=Yes / 0=No 
```

所以当你的客户浏览监视器类别时，数据库可以返回这个类别特殊的自定义选项

# php - 如何根据访问者的 IP 地址显示本地化时间？

> ID：13716871
> 
> 赞同：3
> 
> 时间：2012-12-05T05:28:10.810
> 
> 标签：php, datetime

我通过函数获取用户的 IP 地址。

```
e.g

$ip_address = getIP(); 
```

现在我想使用 PHP 根据访问者的 IP 地址显示当前的本地化时间和日期。如果有可能比指导我如何？

等待帮助并提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:04:41.447

正如评论中所指出的 - 这已经被问到并得到了回答

但不包括的一个答案是使用 Javascript 回调，或将 tiem 偏移量存储在来自 Javascript 的 cookie 中（或调整显示时间）。

使用回调的示例：

*   在 PHP 中使用会话（session_start，或创建您自己的会话处理程序）
*   在第一页（您没有日期）或发送设置会话并使用 Javascript 重定向到实际页面并附加时区差异的空白保留页面

代码：

```
var d = new Date()
window.location.href = PageYouWant + '?offset=' + d.getTimezoneOffset(); 
```

（根据你的需要变化）

*   然后在收到回电时，记住对会话的偏移量。然后将 303 重定向发送到 URL 中不带偏移量的 URL，您就拥有了所需的数据。

您可以使用 cookie 做类似的事情（如果您没有 cookie，请发送一个创建 cookie 并给您回电的保留页面）。

保持页面空白，没有人会注意到它 - 就像页面正在加载一样。

# matlab - Matlab中散点数据的双三次插值

> ID：13716872
> 
> 赞同：3
> 
> 时间：2012-12-05T05:28:25.240
> 
> 标签：matlab, interpolation, bicubic

我想知道是否有办法对分散的数据集（2d）进行双三次插值？我做了一些在线搜索，发现需要在分散的数据上拟合双三次补丁（不确定这些是什么）。不知道如何从这里开始。任何帮助将不胜感激！

注意：我了解 Matlab 建议对散点进行插值`TriScatteredInterp`。`griddata`但是，`TriScatteredInterp`它是三角插值，不使用样条插值数据。

我拥有的数据看起来像这样（x，y，val）：

```
x = [0 0 0 0 0.28 0.28 0.28 0.28 -0.28 0.28 -0.28 -0.28 -0.988 -0.988 -0.988 -0.988 -0.708 -0.708 -0.708 -0.708 -1.268 -1.268 -1.268 -1.268 0.988 0.988 0.988 0.988 1.268 1.268 1.268 1.268 0.708 0.708 0.708 0.708]

y = [0.9993 0.8113 0.6233 0.4353 0.9373 0.7493 0.5613 0.3733 0.8733 0.6853 0.4973 0.3093 0.9993 0.8113 0.6233 0.4353 0.9373 0.7493 0.5613 0.3733 0.8733 0.6853 0.4973 0.3093 0.9993 0.8113 0.6233 0.4353 0.9373 0.7493 0.5613 0.3733 0.8733 0.6853 0.4973 0.3093]

val = [0.25 0.35 0.19 0.14 0.19 -0.45 -0.96 0.61 0.19 0.20 0.22 0.38 0.15 0.51 0.53 0.68 0.36 0.21 0.52 0.70 0.14 0.34 0.45 0.63 0.25 0.40 0.76 0.65 0.82 0.37 0.49 0.57 0.10 0.11 0.61 0.65] 
```

谢谢！！普拉哈尔

# c# - SiteMap 的 RouteTable 重定向

> ID：13716873
> 
> 赞同：0
> 
> 时间：2012-12-05T05:28:31.037
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, sitemap

我在这个网站上看到了很多这段代码，但我似乎无法让它工作。当我导航到 www.mysite.com/sitemap.xml 时，它给了我一个 404 错误。这是我的`RouteTable`设置代码：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.Clear();
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.RouteExistingFiles = true;

        routes.MapRoute(
            "Sitemap",
            "sitemap.xml",
            new { controller = "Home", action = "SiteMap" }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

这是 Global.asax：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

有人可以指出我做错了什么吗？它看起来像[C# mvc3 redirect sitemap.xml to controller action](https://stackoverflow.com/questions/5687471/c-sharp-mvc3-redirect-sitemap-xml-to-controller-action)等问题中给出的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:48:02.160

在与处理程序进行更多的试验和错误之后，我能够让它工作。事实证明，`StaticFile`处理程序确实是问题所在。我可以通过将以下内容添加到我的 web.config 文件来修复它：

```
<handlers>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit_XML" path="*.xml" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit_XML" path="*.xml" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0_XML" path="*.xml" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T07:13:31.403

您也可以使用[此答案中的较短版本](https://stackoverflow.com/a/8846619/1184603)

```
<handlers>
<add name="xml-file-handler" path="*.xml" type="System.Web.UI.PageHandlerFactory" verb="*" />
</handlers> 
```

# php - 如何在php中从mysql中检索div标签和问号符号

> ID：13716876
> 
> 赞同：1
> 
> 时间：2012-12-05T05:28:39.690
> 
> 标签：php, mysql

如何使用php从mysql中检索div标签

我使用成功将div标签插入mysql `mysql_real_escape_string($test)`，但是当我使用相同的mysql从mysql中检索相同的字段时出现问题`mysql_real_escape_string(field)`，请为此提供解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:33:29.353

使用php函数`stripslashes(field)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:23:48.887

```
 //mysql_real_escape_string() is only used in inserting special chars like ' and " by escaping it.it puts \ before ' or " to be \' or \"
 //it is very handy also in handling injection against hackers
 //conclusion mysql_real_escape_string() only used in insert queries.

 //if you want to retrieve it from db follow this example
 $connected=mysql_connect($your_db_host,$your_db_uname,$your_db_pass);
 if(!$connected){
     die(mysql_error());
 }
 mysql_select_db($your_db_name) or die(mysql_error());
 mysql_query("SET NAMES utf8") or die(mysql_error());
 mysql_query("SET CHARSET utf8") or die(mysql_error());
 $sql="SELECT your_field FROM your_table WHERE id='".intval($_GET["your_id"])."' ";
 //always use intval with integers to prevent injection
 //assuming the id is in _GET array
 $results=mysql_query($sql);
 if(!$results){
    echo 'no data found!';
     //die(mysql_error());
 }else{
   while($row=mysql_fetch_array($results)){
      echo "my filed value : ".stripslashes($row["your_field"]);
      //stripslashes() is used to remove \" and \' ==> to be ' and " only without slashes
      echo "<br/>";
      //if your field contains <html> tags or <div> the browser will understand it automatically and translates it
     //notice if you need to echo html content in <input> field for example ==> you need to htmlentities($the_out) before print it.
     //for example <input id='myinput' name='myinput' value='<?php echo htmlentities($row["your_field"]);?>' />
     //why ? because if your $row["your_field"] contains html tags within -> it will break the input structure
    //it would be something corrupt like
    // <input id='myinput' name='myinput' value='<div><p><strong>blablabla</strong>blablabla</p></div>' /> 
   }
 } 
```

# apache-felix - 发送重定向不起作用

> ID：13716880
> 
> 赞同：0
> 
> 时间：2012-12-05T05:29:12.693
> 
> 标签：apache-felix, aem, day-cq

我在项目中使用 day CQ 开发过滤器时遇到问题。我的代码正在使用 requestDispatcher 的 forward 方法。但是使用 response.sendRedirect()，它不起作用。

```
if (servletRequest instanceof SlingHttpServletRequest) {
   HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;
   HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;
   String uri = httpRequest.getRequestURI();

   if(uri.startsWith("/content")){
    Cookie[] cookies = httpRequest.getCookies();
    boolean found = false;
        for (Cookie cookie : cookies) {
        log.info("Cookies in filter: " + cookie.getName());
        if("LtpaToken2".equals(cookie.getName())){
            log.info("LTPA token found ");
            found = true;
            break;
        }
    }
    if(found){
        filterChain.doFilter(servletRequest, servletResponse);
    }
    else{
        httpResponse.sendRedirect("http://www.google.com");
    }           
  }else{
        filterChain.doFilter(servletRequest, servletResponse);
  }

 log.info("Message URL ::"+httpRequest.getRequestURL().toString());
 log.info("URI ::"+uri);
} 
```

所以请解决我的问题，这是非常值得赞赏的。

问候纳尔西 p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T14:05:30.757

我不了解 Spring，但在 JEE 中，您不能像在过滤器中那样真正操纵响应。`IllegalStateException`使用时会得到一个`sendRedirect`or `sendError`。

我的建议是永远不要使用这些抽象。您要做的是指定响应标头并关闭请求。

```
response.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);
response.setHeader("Location", ""http://www.google.com");
return; 
```

# node.js - mongoose 查询在 mongo shell 中有效，但在 node.js 中无效

> ID：13716881
> 
> 赞同：2
> 
> 时间：2012-12-05T05:29:14.143
> 
> 标签：node.js, mongodb, mongoose, nosql

我正在尝试从我的 node.js-express 应用程序执行查询。查询没有返回任何结果。但是当我在 mongodb shell 中执行查询时，它会显示预期的结果。

我的代码是：

```
var query = commentModel.Comment.find({
    "$and": [
           {
               "type": {
                   "$in": [
                       207,208,209
                   ]
               }
           },
           {
               "trs": {
                   "$ne": 3
               }
           },
           {
               "$or": [
                   {
                       "status": {
                           "$in": [
                               1,
                               2
                           ]
                       }
                   },
                   {
                       "$and": [
                           {
                               "status": 3
                           },
                           {
                               "UID": req.session.userId
                           }
                       ]
                   }
               ]
           }
       ]
   }).skip(this.index).limit(this.count);
console.log("Query  : "+ JSON.stringify(query));
query.exec(function(err, result) {
console.log("Result Length :"+result.length+" Error:"+err);
    if( (err) || (result.length == 0)) {
        console.log("Result Length :"+result.length+" Error:"+err);
    }
    else {
        console.log("Success Result Length :"+result.length+" Error:"+err);
    }
}); 
```

当我将查询打印到控制台时

> 查询：{"options":{"populate":{}},"_conditions":{"$and":[{"type":{"$in":[207,208,209]}},{"trs":{ "$ne":3}},{"$or":[{"status":{"$in":[1,2]}},{"$and":[{"status":3}, {"UID":14}]}]}]},"_updateArg":{},"op":"find"}

我使用 _condition 并在 mongodb shell 中执行它

```
>db.tbl_comment.find({"$and":[{"type":{"$in":[207,208,209]}},{"trs":{"$ne":3}},{"$or":[{"status":{"$in":[1,2]}},{"$and":[{"status":3},{"UID":14}]}]}]}) 
```

在 shell 中，它显示结果。我不知道缺少什么...

# php - Jcarousel 滑块在滑块框的中心仅显示一张图片

> ID：13716885
> 
> 赞同：0
> 
> 时间：2012-12-05T05:29:54.810
> 
> 标签：php, jquery, jcarousel

我正在尝试将[jCarousel](http://sorgalla.com/projects/jcarousel/examples/static_auto.html)滑块配置为仅显示一张图片并且它位于中心。即，滑块应显示单个图像，并且在特定时间段内应出现下一张图片，并且图片应在滑块框中居中对齐。

现在图片如提供的链接所示。但是当只有一张图片时，它与滑块框的左侧对齐。我需要居中对齐。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:36:12.567

在按钮的同一页面上是 jCarousel 的所有选项。查看它们以找出适合您情况的正确选项。

如果我理解正确，您必须设置：

```
jQuery('#yourID').jcarousel({
    auto: 10,
    scroll: 1
}); 
```

其中 auto 是更改图片的时间，而 scroll 是显示项目的数量。

您可以使用 CSS 修复所有位置居中/左/右。

# sql - 是否可以从经度/纬度获得城市？

> ID：13716889
> 
> 赞同：2
> 
> 时间：2012-12-05T05:30:21.403
> 
> 标签：sql, sql-server, sql-server-2008

我听说 SQL Server 现在支持地理之类的东西。是否可以从经度/纬度获得城市？我搜索了很多但找不到任何东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T05:51:37.470

您需要加载一些带有城市位置的数据——[地名](http://www.geonames.org/export/)（您可能想要`cities15000.zip`）或[自然地球](http://www.naturalearthdata.com/downloads/10m-cultural-vectors/)（人口稠密的地方）可能是开始的好地方。

```
CREATE TABLE cities ( 
  name VARCHAR(200) PRIMARY KEY,
  location GEOGRAPHY, 
);
CREATE SPATIAL INDEX idx_cities_location ON cities(location);

INSERT INTO cities (name, location) VALUES
  ('Auckland', geography::STGeomFromText('POINT(174.7833 -36.85)', 4326)),
  ('London', geography::STGeomFromText('POINT(-0.1062 51.5171)', 4326))
; 
```

*   注意所有坐标的顺序是`(Longitude Latitude)`
*   空间索引使其快速。
*   4326 是基本经度/纬度的坐标系统代码。

然后要找到离给定位置最近的城市，您需要这样的查询：

```
DECLARE @g geography = 'POINT(103.75 1.3667)';
SELECT TOP(1) name FROM cities
WHERE location.STDistance(@g) IS NOT NULL
ORDER BY location.STDistance(@g); 
```

SQL Server 文档中的更多示例：

*   [创建、构造和查询地理实例](http://msdn.microsoft.com/en-us/library/bb895266.aspx)
*   [查询最近邻的空间数据](http://msdn.microsoft.com/en-us/library/ff929109.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T12:09:20.997

您描述的功能称为“反向地理编码” - 采用纬度/经度坐标，并返回离该位置最近的地点的名称。（地理编码是相反的——提供地名以检索相关的纬度/经度坐标）。

您当然可以构建一个使用 SQL Server 作为后端数据库的反向地理编码服务，但没有任何内置功能可提供此类功能。

如果您只是想对一组现有数据进行反向地理编码，而不是在 SQL Server 中创建此功能，您可能会发现使用现有 Web 服务更容易。例如，地名 findNearbyPlaceName 有一个 REST 接口，您可以通过以下 URL 模板访问该接口：

[http://api.geonames.org/findNearbyPlaceName?lat=52.62&lng=1.28&username=demo](http://api.geonames.org/findNearbyPlaceName?lat=52.62&lng=1.28&username=demo)

此示例从 geonames 数据库返回与请求的 lat/lng 坐标 (52.62,1.28) 最接近的已知实体的信息，如下所示：

```
<geonames>
  <geoname>
    <toponymName>Norwich</toponymName>
    <name>Norwich</name>
    <lat>52.62783</lat>
    <lng>1.29834</lng>
    <geonameId>2641181</geonameId>
    <countryCode>GB</countryCode>
    <countryName>United Kingdom</countryName>
    <fcl>P</fcl>
    <fcode>PPLA2</fcode>
    <distance>1.51318</distance>
  </geoname>
</geonames> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T03:44:24.503

对于空间函数，您需要 SQL 2008 或更高版本。

要做的第一件事是获取书籍/电子书：Alastair Aitchison 的 SQL Server 开始空间。他有一个 SQL 2008 和 2012 版本。他是那里的顶级大师之一。另一个是“空间戴夫”。披露：不，我没有得到一毛钱推荐阿利斯泰尔的书。我在 GreatData.com 工作并使用了 2008 年的书，当时我对 SQL 知之甚少，对映射一无所知，并且能够在短时间内变得相当精通，因为这本书非常好。

接下来，您需要加载城市边界。这些是 ESRI Shapefile 格式，您可以在 NationalAtlas.gov（免费地图文件的重要来源）上免费找到它们。

您需要了解只有较大的城市才有地图边界文件。有了边界，您可以使用 STIntersects() 或其他方法来确定您拥有的纬度/经度坐标是否在城市范围内。

对于较小的城镇，您只会得到一个纬度/经度点。您可以使用“最近邻居”逻辑（也在书中）来确定最近的城市或城镇，但无法确定它是否在城镇范围内。

# ipv6 - NDP (icmpV6) 实现：内核发送的重复数据包

> ID：13716892
> 
> 赞同：0
> 
> 时间：2012-12-05T05:30:52.523
> 
> 标签：ipv6, icmp

我试图在基于 Linux 的 PC 的参考 RFC 4861 中开发和实现 NDP（邻居发现协议）。

我创建了一个套接字`socket (AF_INET6, SOCK_RAW, IPPROTO_IPV6)`。NS/NA 数据包（ipv6 header + icmpv6 header+options）由开发者自己填充和发送。

在 Wireshark 中，我监控到我填充的 ​​NS 数据包正在发送 + 内核发送它自己的 NS 数据包并接收 NA 数据包。

所以我很困惑，卡在我的工作中。谁能帮忙解释一下

1.  为什么这个由自己的内核生成的重复数据包？
2.  如果内核处理 ICMPv6 数据包，那么应该开发和实现 NDP 的场景是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:49:41.897

内核已经实现了 NDP，因此开发人员不必这样做，就像您没有为 IPv4 实现 ARP 一样。

如果你仍然想实现 ND（例如因为它是一个分配的学校项目），你将不得不找到一种方法在内核中禁用它（可能是删除代码并重新编译）。

# javascript - 缩放也算作窗口调整大小？

> ID：13716899
> 
> 赞同：1
> 
> 时间：2012-12-05T05:31:26.713
> 
> 标签：javascript, jquery

```
$(window).resize(function(){
            console.log('resize');
            setheight();
        }); 
```

我只想在用户通过拖动窗口边缘而不是缩放来实际调整窗口大小时激活，但它实际上在放大和缩小时激活了该功能，如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:47:23.670

当浏览器窗口的大小发生变化时，resize 事件被发送到窗口元素。但是，当我们放大/缩小浏览器的大小时，会触发 resize 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T16:26:32.157

您可以使用 resize 事件来检查窗口大小的变化，如下所示......

```
$(document).ready(function () {
    var width = $(window).width();

    function resizeIt() {
        $(window).resize(function () {
            if ($(window).width() != width) {

              alert('resize events');

            }            
        });
    }

  resizeIt();
}
```

# java - JApplets 和调用paint/paintComponent 的问题

> ID：13716900
> 
> 赞同：0
> 
> 时间：2012-12-05T05:31:46.740
> 
> 标签：java, repaint, japplet, jcomponent

所以我只是在这里为期末考试做一些学习，但我无法让它发挥作用。我以前一直在做的是调用paintComponent(Graphics g)，事情进展顺利。但是现在我在编译时收到“paintComponent has protected access in JComponent”错误。我可以让它编译的唯一方法是告诉它调用paint。但即使它编译，paint 也不会在小程序窗口中被调用。我在这里没有看到什么？

```
 public class LineDraw extends JComponent
 {
private final Point p1;
private final Point p2;
private final JApplet callingWindow;
private final ArrayList<Line2D.Double> lines;

public LineDraw(JApplet callingWindow)
{
    this.p1 = new Point();
    this.p2 = new Point();
    this.callingWindow = callingWindow;
    this.lines = new ArrayList<Line2D.Double>();
    MouseListener mouse = new MouseHandler();
    callingWindow.addMouseListener(mouse);
}

public class MouseHandler extends MouseAdapter
{
    private boolean firstClick;
    public MouseHandler()
    {
        firstClick = true;
    }
    public void mouseClicked(MouseEvent e)
    {
        if(firstClick)
        {
            p1.setLocation(e.getPoint());
            firstClick = false;
        }
        else    
        {
            p2.setLocation(e.getPoint());
            lines.add(new Line2D.Double(p1, p2));
            p2.setLocation(p1.getLocation());
            callingWindow.repaint();        
        }
    }

    public void paintComponent(Graphics2D g2)
    {
        for(Line2D.Double e: lines)
        {
            g2.draw(e);
        }
    }
}

} 
```

还有小程序类本身

```
 public class AppletWin extends JApplet
    {
private LineDraw lineDrawer;

public void init()
{
    setBackground(Color.white);
    lineDrawer = new LineDraw(this);
}

public void paint(Graphics h)
{
    Graphics2D g = (Graphics2D)h;
    //Clear background
    g.setColor(getBackground());
    g.fillRect(1, 1, getWidth(), getHeight());
    lineDrawer.paintComponent(g);  
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:44:15.323

`LineDrawer`是一个组件，你应该把它添加到你的小程序中，它会自动绘制。

您似乎陷入了命名冲突问题。

`JComponent`定义了两种绘画方法（实际上它定义了更多，但让我们保持简单），`paint`和`paintComponent`.

`JComponent`您遇到的问题与您从 a 继承但似乎正在执行您自己的绘画这一事实有关。当您想开发自己的“画家”类但与 Swing 组件发生冲突时，这很好。Swing 组件还有更多内容，然后简单地绘制它。

您遇到的另一个问题是您在 side`MouseHandler`方法中定义了一个“paint”方法，并且似乎假设它可以从`LineDraw`类中调用。问题是，您实际上是在调用`JComponent`'`paint`方法，而不是您想要/认为的方法。

尝试删除`extends JComponent`并将方法移动`paint`到`LineDraw`类中。

正如 MouseEvent 所说，在大多数情况下，您永远不应该调用`paint`或`paintComponent`直接调用。

你可能会发现：

*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

有帮助

**更新**

## 绘画作为摆动组件

```
public class AppletWin extends JApplet {

    private LineDraw lineDrawer;

    public void init() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                setBackground(Color.white);
                lineDrawer = new LineDraw(AppletWin.this);
                setLayout(new BorderLayout());
                add(lineDrawer);
            }
        });
    }

    public class LineDraw extends JComponent {

        private final Point p1;
        private final Point p2;
        private final JApplet callingWindow;
        private final ArrayList<Line2D.Double> lines;

        public LineDraw(JApplet callingWindow) {
            this.p1 = new Point();
            this.p2 = new Point();
            this.callingWindow = callingWindow;
            this.lines = new ArrayList<Line2D.Double>();
            MouseListener mouse = new MouseHandler();
            addMouseListener(mouse);
        }

        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2 = (Graphics2D) g;
            g2.setColor(Color.RED);
            for (Line2D.Double e : lines) {
                g2.draw(e);
            }
        }

        public class MouseHandler extends MouseAdapter {

            private boolean firstClick;

            public MouseHandler() {
                firstClick = true;
            }

            public void mouseClicked(MouseEvent e) {
                if (firstClick) {
                    p1.setLocation(e.getPoint());
                    firstClick = false;
                } else {
                    p2.setLocation(e.getPoint());
                    lines.add(new Line2D.Double(p1, p2));
                    p2.setLocation(p1.getLocation());
                }
                repaint();
            }
        }
    }
} 
```

## 作为画家

```
public class AppletWin extends JApplet {

    private LineDraw lineDrawer;

    public void init() {
        setBackground(Color.white);
        lineDrawer = new LineDraw(this);
    }

    public void paint(Graphics h) {
        // The the applet clear the background
        super.paint(h);
        Graphics2D g = (Graphics2D) h;
        lineDrawer.paintComponent(g);
    }
    public class LineDraw {

        private final Point p1;
        private final Point p2;
        private final JApplet callingWindow;
        private final ArrayList<Line2D.Double> lines;

        public LineDraw(JApplet callingWindow) {
            this.p1 = new Point();
            this.p2 = new Point();
            this.callingWindow = callingWindow;
            this.lines = new ArrayList<Line2D.Double>();
            MouseListener mouse = new MouseHandler();
            callingWindow.addMouseListener(mouse);
        }

        public void paintComponent(Graphics2D g2) {
            System.out.println("...");
            for (Line2D.Double e : lines) {
                g2.draw(e);
            }
        }

        public class MouseHandler extends MouseAdapter {

            private boolean firstClick;

            public MouseHandler() {
                firstClick = true;
            }

            public void mouseClicked(MouseEvent e) {
                if (firstClick) {
                    p1.setLocation(e.getPoint());
                    firstClick = false;
                } else {
                    p2.setLocation(e.getPoint());
                    lines.add(new Line2D.Double(p1, p2));
                    p2.setLocation(p1.getLocation());
                }
                callingWindow.repaint();
            }
        }
    }
} 
```

您确实应该避免覆盖`paint`顶级容器的方法。该`paint`方法是一种非常复杂的方法，从长远来看，绕过它只会给您带来问题，此外，它不是双缓冲的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:49:46.523

这段代码的问题在于 LineDraw 中的 paintComponent 方法位于内部类 MouseHandler 中。

# jquery-animate - 与动画 scrollTop 和 scrollHeight 冲突

> ID：13716902
> 
> 赞同：1
> 
> 时间：2012-12-05T05:31:58.033
> 
> 标签：jquery-animate, attr, scrolltop

我需要帮助才能在此函数中使用 scrollHeight：

```
 $('header').find('a').click(function(){
    hash = $(this).attr('href');
    $('html, body').stop().animate({scrollTop: $($(this).attr('href')).offset().top-74}, 1000, function(){
        //document.location.hash = hash;
    });
    return false;
}); 
```

当我放置 attr scrollHeight 时，函数 animate 不起作用。

# android - 为什么我的程序在运行时有 nullpointerException

> ID：13716903
> 
> 赞同：0
> 
> 时间：2012-12-05T05:32:00.617
> 
> 标签：android, android-asynctask, runtime-error

我编写程序，程序应该给出文本框的名称、电子邮件等并发送到一个 url，但是程序已经停止并且运行时出现 NullPointerException 错误。

我写了我的porgram的代码。请阅读并帮助我。谢谢

SignUpAsync.java：

```
public class SignUpAsync extends AsyncTask<List<NameValuePair>,Void,String>{
@Override
protected String doInBackground(List<NameValuePair>... nameValuePairs) {

    HttpPost httpPost=new HttpPost("http://myURL.com");
    HttpClient httpClient=new DefaultHttpClient();
    HttpResponse httpRespons = null;

    try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs[0]));
        httpRespons=httpClient.execute(httpPost);
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    HttpEntity entity=httpRespons.getEntity();
    InputStream is = null;
    try {
        is=entity.getContent();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return convertStreamToString(is);

}

private String convertStreamToString(InputStream is){
    BufferedReader bfReader=new BufferedReader(new InputStreamReader(is));
    StringBuilder sb=new StringBuilder();
    String line="";
    try {
        while((line=bfReader.readLine())!=null)
            //
            sb.append(line);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        is.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return sb.toString();

}   
} 
```

注册.java：

```
public class SignUp extends Activity{

private Button signUp;
private EditText userName;
private EditText userEmail;
private EditText userPass;
private EditText userPasscode;
private EditText userPhone;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rewards_signup);

    initView();

    String[] params = null;
    params[0]=userName.getText().toString();
    params[1]=userEmail.getText().toString();
    params[2]=userPass.getText().toString();
    params[3]=userPasscode.getText().toString();
    params[4]=userPhone.getText().toString();

    List<NameValuePair> nameValuePairs=new ArrayList<NameValuePair>(5);
    nameValuePairs.add(new BasicNameValuePair("User Name",params[0]));
    nameValuePairs.add(new BasicNameValuePair("User Email Id",params[1]));
    nameValuePairs.add(new BasicNameValuePair("User Password",params[2]));
    nameValuePairs.add(new BasicNameValuePair("User Passcode",params[3]));
    nameValuePairs.add(new BasicNameValuePair("User Phone Number",params[4]));

    AsyncTask<List<NameValuePair>, Void, String> async;
    async=new SignUpAsync().execute(nameValuePairs);
    try {
        String result=async.get();
        if(result!=null)
            Log.i("result", result);
        else
            Log.i("result", "null");
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
private void initView(){
    signUp=(Button)findViewById(R.id.signup_id);
    userName=(EditText)findViewById(R.id.name_id);
    userEmail=(EditText)findViewById(R.id.email_id);
    userPass=(EditText)findViewById(R.id.password_id);
    userPasscode=(EditText)findViewById(R.id.pincode_id);
    userPhone=(EditText)findViewById(R.id.phonnum_id);
}
} 
```

日志猫：

```
12-05 08:46:00.063: W/dalvikvm(15436): threadid=1: thread exiting with uncaught exception (group=0x40a7e1f8)
12-05 08:46:00.071: E/AndroidRuntime(15436): FATAL EXCEPTION: main
12-05 08:46:00.071: E/AndroidRuntime(15436): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.example.loyaltier/org.example.rewards.SignUp}: java.lang.NullPointerException
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.os.Looper.loop(Looper.java:137)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.ActivityThread.main(ActivityThread.java:4340)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at java.lang.reflect.Method.invokeNative(Native Method)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at java.lang.reflect.Method.invoke(Method.java:511)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at dalvik.system.NativeStart.main(Native Method)
12-05 08:46:00.071: E/AndroidRuntime(15436): Caused by: java.lang.NullPointerException
12-05 08:46:00.071: E/AndroidRuntime(15436):    at org.example.rewards.SignUp.onCreate(SignUp.java:35)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.Activity.performCreate(Activity.java:4465)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-05 08:46:00.071: E/AndroidRuntime(15436):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
12-05 08:46:00.071: E/AndroidRuntime(15436):    ... 11 more
12-05 08:46:01.579: I/Process(15436): Sending signal. PID: 15436 SIG: 9 
```

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:33:16.783

您需要初始化`params`：

```
String[] params = new String[5]; 
```

* * *

也明白`AsyncTask#get()`这一行：

```
String result=async.get(); 
```

如文档中所述，“如有必要，等待计算完成，然后检索其结果。” 将阻塞主线程，直到 AsyncTask 完成。这违背了 AsyncTask 的目的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:40:06.920

您试图在不初始化参数的情况下为参数赋值。

这是问题所在

```
 String[] params = null;
    params[0]=userName.getText().toString(); 
```

试试这个

```
 String params[] = new String[5]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:44:02.053

试试这个方法

```
 SignUpAsync async = new SignUpAsync();
    async.execute(nameValuePairs);
    try {
        String result = async.get();
        if(result!=null)
            Log.i("result", result);
        else
            Log.i("result", "null"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T05:44:45.113

将此方法放在 Async Task 类中

```
 protected void onPostExecute(String result) {
        // TODO Auto-generated method stub

         if(result!=null)
                         Log.i("result", result);
                     else
                        Log.i("result", "null")
    } 
```

You can not get result from your activity class.

# iphone - 准确验证 URL

> ID：13716909
> 
> 赞同：3
> 
> 时间：2012-12-05T05:32:37.160
> 
> 标签：iphone, regex, url-validation

我已经在我的代码中验证要发送到服务的 URL，任何人都可以给我正则表达式来验证应该以**http://**开头并以**.com**、**.org**、**.net**、**.edu**、**.in**结尾的 URL url中的一些其他常见结尾。我搜索了很多，但我不能准确地找到这种类型的正则表达式。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T06:01:20.903

试试这个方法...

```
 - (BOOL) urlIsValiad: (NSString *) url 
 {
    NSString *regex = 
    @"((?:http|https)://)?(?:www\\.)?[\\w\\d\\-_]+\\.\\w{2,3}(\\.\\w{2})?(/(?<=/)(?:[\\w\\d\\-./_]+)?)?";
   /// OR use this 
   ///NSString *regex = "(http|ftp|https)://[\w-_]+(.[\w-_]+)+([\w-.,@?^=%&:/~+#]* [\w-\@?^=%&/~+#])?";
    NSPredicate *regextest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex];

    if ([regextest evaluateWithObject: url] == YES) {
        NSLog(@"URL is valid!");
    } else {
        NSLog(@"URL is not valid!");
    }

    return [regextest evaluateWithObject:url];
} 
```

# c - C中结构成员的默认值

> ID：13716913
> 
> 赞同：107
> 
> 时间：2012-12-05T05:32:58.643
> 
> 标签：c, struct

是否可以为某些结构成员设置默认值？我尝试了以下方法，但是会导致语法错误：

```
typedef struct
{
  int flag = 3;
} MyStruct; 
```

错误：

```
$ gcc -o testIt test.c 
test.c:7: error: expected ‘:’, ‘,’, ‘;’, ‘}’ or ‘__attribute__’ before ‘=’ token
test.c: In function ‘main’:
test.c:17: error: ‘struct <anonymous>’ has no member named ‘flag’ 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-12-05T05:36:44.900

结构是一种*数据类型*。您不会为数据类型赋值。您为数据类型的实例/对象赋予值。
所以不，这在 C 中是不可能的。

相反，您可以编写一个对结构实例进行初始化的函数。

或者，您可以这样做：

```
struct MyStruct_s 
{
    int id;
} MyStruct_default = {3};

typedef struct MyStruct_s MyStruct; 
```

然后始终将您的新实例初始化为：

```
MyStruct mInstance = MyStruct_default; 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-12-04T15:58:56.813

你不能这样做

改用以下内容

```
typedef struct
{
   int id;
   char* name;
}employee;

employee emp = {
.id = 0, 
.name = "none"
}; 
```

您可以使用宏来**定义**和**初始化**您的实例。每次您想定义新实例并初始化它时，这将使您更容易。

```
typedef struct
{
   int id;
   char* name;
}employee;

#define INIT_EMPLOYEE(X) employee X = {.id = 0, .name ="none"} 
```

在您的代码中，当您需要使用员工类型定义新实例时，您只需调用此宏，如下所示：

```
INIT_EMPLOYEE(emp); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-05T05:45:20.760

我同意 Als 的观点，即您不能在 C 中定义结构时进行初始化。但是您可以在创建实例时初始化结构，如下所示。

在 C 中，

```
 struct s {
        int i;
        int j;
    };

    struct s s_instance = { 10 ,20 }; 
```

在 C++ 中，可以在结构定义中给出直接值，如下所示

```
struct s {
    int i;

    s(): i(10)
    {
    }
}; 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-12-04T16:06:08.100

你可以做：

```
struct employee_s {
  int id;
  char* name;
} employee_default = {0, "none"};

typedef struct employee_s employee; 
```

然后你只需要记住在声明一​​个新的员工变量时进行默认初始化：

```
employee foo = employee_default; 
```

或者，您始终可以通过工厂函数构建您的员工结构。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-06-18T14:45:47.523

如其他答案所述，创建一个默认结构：

```
struct MyStruct
{
    int flag;
}

MyStruct_default = {3}; 
```

但是，上面的代码在头文件中不起作用——你会得到错误：`multiple definition of 'MyStruct_default'`. 要解决此问题，`extern`请在头文件中使用：

```
struct MyStruct
{
    int flag;
};

extern const struct MyStruct MyStruct_default; 
```

在`c`文件中：

```
const struct MyStruct MyStruct_default = {3}; 
```

希望这可以帮助任何遇到头文件问题的人。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-12-04T15:59:10.977

如果您正在使用`gcc`，您可以`designated initializers`创建对象。

```
typedef struct
{
   int id=0;
   char* name="none";
}employee;

employee e = 
{
 .id = 0;
 .name = "none";
}; 
```

或者，简单地使用类似数组初始化。

`employee e = {0 , "none"};`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-11-21T09:15:07.130

更重要的是，要添加现有答案，您可以使用隐藏结构初始化程序的宏：

```
#define DEFAULT_EMPLOYEE { 0, "none" } 
```

然后在您的代码中：

```
employee john = DEFAULT_EMPLOYEE; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-04T16:00:12.553

您可以实现初始化功能：

```
employee init_employee() {
  empolyee const e = {0,"none"};
  return e;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-05T05:51:22.787

您可以使用一些函数来初始化结构，如下所示，

```
typedef struct
{
    int flag;
} MyStruct;

MyStruct GetMyStruct(int value)
{
    MyStruct My = {0};
    My.flag = value;
    return My;
}

void main (void)
{
    MyStruct temp;
    temp = GetMyStruct(3);
    printf("%d\n", temp.flag);
} 
```

**编辑：**

```
typedef struct
{
    int flag;
} MyStruct;

MyStruct MyData[20];

MyStruct GetMyStruct(int value)
{
    MyStruct My = {0};
    My.flag = value;
    return My;
}

void main (void)
{
    int i;
    for (i = 0; i < 20; i ++)
        MyData[i] = GetMyStruct(3);

    for (i = 0; i < 20; i ++)
        printf("%d\n", MyData[i].flag);
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-11-21T15:32:34.857

您可以将[C 预处理器函数与 varargs](https://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html#Variadic-Macros)、[复合文字](https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html)和[指定的初始化](https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html#Designated-Inits)程序结合使用，以获得最大的便利：

```
typedef struct {
    int id;
    char* name;
} employee;

#define EMPLOYEE(...) ((employee) { .id = 0, .name = "none", ##__VA_ARGS__ })

employee john = EMPLOYEE(.name="John");  // no id initialization
employee jane = EMPLOYEE(.id=5);         // no name initialization 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-11T11:27:32.417

如果你只使用这个结构**一次**，即创建一个全局/静态变量，你可以删除`typedef`，并立即初始化这个变量：

```
struct {
    int id;
    char *name;
} employee = {
    .id = 0,
    .name = "none"
}; 
```

然后，您可以`employee`在那之后在您的代码中使用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-18T08:49:27.313

如果结构允许，另一种方法是使用带有默认值的#define：

```
#define MYSTRUCT_INIT { 0, 0, true }

typedef struct
{
    int id;
    int flag;
    bool foo;
} MyStruct; 
```

采用：

```
MyStruct val = MYSTRUCT_INIT; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-05T06:13:34.247

结构的初始化函数是授予其默认值的好方法：

```
Mystruct s;
Mystruct_init(&s); 
```

甚至更短：

```
Mystruct s = Mystruct_init();  // this time init returns a struct 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-09T05:25:57.920

默认值的另一种方法。创建一个与结构相同类型的初始化函数。这种方法在将大代码拆分为单独的文件时非常有用。

```
struct structType{
  int flag;
};

struct structType InitializeMyStruct(){
    struct structType structInitialized;
    structInitialized.flag = 3;
    return(structInitialized); 
};

int main(){
    struct structType MyStruct = InitializeMyStruct();
}; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-02T01:43:12.960

您可以为它创建一个函数：

```
typedef struct {
    int id;
    char name;
} employee;

void set_iv(employee *em);

int main(){
    employee em0; set_iv(&em0);
}

void set_iv(employee *em){
    (*em).id = 0;
    (*em).name = "none";
} 
```

* * *

## 回答 #16

> 赞同：-8
> 
> 时间：2020-05-20T02:05:47.713

我认为您可以通过以下方式做到这一点，

```
typedef struct
{
  int flag : 3;
} MyStruct; 
```

# ios - 如何在 iPhone 中以编程方式打开通讯录？

> ID：13716915
> 
> 赞同：0
> 
> 时间：2012-12-05T05:33:00.840
> 
> 标签：ios, objective-c, iphone

我正在使用地址簿应用程序。在此，我创建了可以将联系人添加到通讯录并使用此人的记录更新本地通讯录中的联系人的方法。

但我面临的问题是，单击按钮时，我想打开所选人员的本地通讯录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:54:06.737

```
contactList=[[NSMutableArray alloc] init];
ABAddressBookRef m_addressbook = ABAddressBookCreate();

if (!m_addressbook) 
{
    NSLog(@"opening address book");
}

CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);

for (int i=0;i < nPeople;i++)
{
    NSMutableDictionary *dOfPerson=[NSMutableDictionary dictionary];
    ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);

    //For username and surname
    ABMultiValueRef phones =(NSString*)ABRecordCopyValue(ref, kABPersonPhoneProperty);
    CFStringRef firstName, lastName;
    firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
   [dOfPerson setObject:[NSString stringWithFormat:@"%@ %@", firstName, lastName] forKey:@"name"];

    //For Email ids
    //ABMutableMultiValueRef eMail  = ABRecordCopyValue(ref, kABPersonEmailProperty);
    //if(ABMultiValueGetCount(eMail)> 0) {
    //[dOfPerson setObject:(NSString *)ABMultiValueCopyValueAtIndex(eMail, 0) forKey:@"email"];
   //}

    //For Phone number
    NSString* mobileLabel;
    for(CFIndex i = 0; i <ABMultiValueGetCount(phones); i++)
    {
        mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
        if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
        {
            [dOfPerson setObject:(NSString*)ABMultiValueCopyValueAtIndex(phones, i) forKey:@"Phone"];
        }
        else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
        {
            [dOfPerson setObject:(NSString*)ABMultiValueCopyValueAtIndex(phones, i) forKey:@"Phone"];
            break ;
        }
     }
     [contactList addObject:dOfPerson];
} 
```

# ruby-on-rails - Ruby on Rails 查找用户

> ID：13716923
> 
> 赞同：0
> 
> 时间：2012-12-05T05:33:44.613
> 
> 标签：ruby-on-rails

我的部分网站有问题，与此行相关（在协议控制器.create 中）：

```
@user = User.find(params[:agreement][:user2_id]) 
```

我得到的错误是它找不到没有 id 的用户。我试过了`@user = User.find(params[:id])`，`@user = User.find(params[:user_id])`结果是一样的。我真的不知道为什么这不起作用或从哪里开始寻找（我对 RoR 有点缺乏经验），所以任何提示都是有帮助的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:43:10.023

唯一可以确定的是，这`params[:agreement]`是一个带有`nil`as`:user2_id`键值的散列，或者是一个根本没有这个键的散列。什么可能是问题取决于您的观点（也可能取决于您的模型，因为`user2`对于关联来说似乎是一个奇怪的名称）。

在您的 HTML 中，您应该有一个带有`agreement[user2_id]`as的输入`name`，并且这个输入应该被提交。

# java - 对 HashMap 中的值进行排序

> ID：13716928
> 
> 赞同：1
> 
> 时间：2012-12-05T05:34:14.240
> 
> 标签：java, sorting, hashmap

我有一个`HashMap<Character, Integer>`，我想将这些值`PriorityQueue`按整数的升序排列。我在想办法做到这一点时遇到了麻烦。我有一个`Node`可以保存值的类，所以：`PriorityQueue<Node>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:50:56.707

在这种情况下我不会使用 a `Map`....

编写你自己的`Pair`/`Node`类来保存你的`Character`and`Integer`并使这个类实现`Comparable`。

你可以在`Comparable` [这里](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)阅读。

在您的节点类中，您将必须实现该`compareTo`方法，如下所示：

```
public int compareTo(Node o) {
    return this.idd - o.idd ;
} 
```

其中 id 是保存整数的变量。

像这样，您可以将它们放在您在问题中提到的`SortedSet`类似`TreeSet`或`PriorityQueue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:50:26.070

代码示例：

```
HashMap<Character, Integer> h = new HashMap<Character, Integer>();
h.put('z',30);
h.put('e',10);
h.put('b',20);
h.put('c',20);
List<Map.Entry> a = new ArrayList<Map.Entry>(h.entrySet());
Collections.sort(a,
                 new Comparator() {
                     public int compare(Object o1, Object o2) {
                         Map.Entry e1 = (Map.Entry) o1;
                         Map.Entry e2 = (Map.Entry) o2;
                         return ((Comparable) e1.getValue()).compareTo(e2.getValue());
                     }
                 });

for (Map.Entry e : a) {
        System.out.println(e.getKey() + " " + e.getValue());
} 
```

输出（按 OP 要求按整数值排序）：

```
e 10
b 20
c 20
z 30 
```

# java - SWT 表：无法从使用 TableEditor 创建的表中检索数据

> ID：13716929
> 
> 赞同：0
> 
> 时间：2012-12-05T05:34:23.993
> 
> 标签：java, swt

我在从我创建的表中检索数据时遇到问题。它显示一个复选框、字符串（取自首先添加的 all_mapping_objects）和值 0.0 到 1.0 的下拉组合。在表格中编辑完所有值后，如何检索所有值，即复选框布尔值、字符串值和组合值。

尝试了一些变体，`TableItem[] items = table.getItems()`但我只得到空值。

```
final Table table = new Table(sectionsInfo, SWT.BORDER | SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL);
              table.setLinesVisible(true);
               InfogridData = new GridData();
                InfogridData.horizontalSpan = 4;
                InfogridData.horizontalAlignment = GridData.BEGINNING;
                InfogridData.horizontalAlignment = GridData.FILL;
                InfogridData.grabExcessHorizontalSpace = true;
                InfogridData.verticalAlignment = GridData.BEGINNING;
                InfogridData.verticalAlignment = GridData.FILL;
                InfogridData.grabExcessVerticalSpace= true;

                TableColumn column = new TableColumn(table, SWT.NONE);
                column.setWidth(500);

                TableColumn column2 = new TableColumn(table, SWT.NONE);
               column2.setWidth(50);

               table.setLayoutData(InfogridData);

              for (int i = 0; i < all_mapping_objects.size(); i++) {
                new TableItem(table, SWT.NONE);
              }
              TableItem[] items = table.getItems();

              for (int i = 0; i < items.length; i++) {
                TableEditor editor = new TableEditor(table); //defines editor which controls objects put in 

                CCombo combo = new CCombo(table, SWT.NONE | SWT.READ_ONLY);
                editor.grabHorizontal = true;

                  for (float me = 0; me <= 10; me++) {
                    combo.add("" + me/10);                      
                  }

                combo.setText("1.0");

                editor.setEditor(combo, items[i], 1); // sets the column
                editor = new TableEditor(table);

                Button button = new Button(table, SWT.CHECK);

                button.setText(all_mapping_objects.get(i).getTextf()); // mapping objects written to the table

                button.pack();
                editor.minimumWidth = button.getSize().x;
                editor.horizontalAlignment = SWT.LEFT;
                editor.setEditor(button, items[i], 0); // sets the column

              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:32:13.550

您应该使用 SelectionListener`Button ( SWT.CHECK)`并且类似地用于`CCombo`. 我建议您开始使用`TableViewer`SWT Table。

# django - django保存重复键错误覆盖

> ID：13716932
> 
> 赞同：0
> 
> 时间：2012-12-05T05:34:37.920
> 
> 标签：django, forms

我正在覆盖 modelForm 的保存方法

```
 def save(self, commit=True, *args, **kwargs):                                                                                     
     userProfile = super(UserProfileForm, self).save(*args, **kwargs)                                                              
     if self.cleaned_data.get('birth_year') :                                                                                      
          userProfile.birthDay=date(self.cleaned_data['birth_year'], self.cleaned_data['birth_month'], self.cleaned_data['birth_day'])           
     **userProfile.save(commit)** <- This is error!!!
     return userProfile 
```

这是 view.py

```
def user(request):                                                                                                                                                                                                                                                            
    if request.method=='POST':                                                                                                                                                                                                                                                
        form = UserProfileForm(request.POST, instance=request.user.get_profile(), option='modify')                                                                                                                                                                            

        if form.is_valid():                                                                                                                                                                                                                                                   
            userProfile = form.save()                                                                                                                                                                                                                                         
    else:                                                                                                                                                                                                                                                                     
        form = UserProfileForm(instance = request.user.get_profile(), option='modify')                                                                                                                                                                                        

    return render(request,'profile/user.html', {'userProfileForm':form,}) 
```

但是如果我更新我的 UserProfile，form.save() 会为重复的 Key 出错。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:39:40.290

`save(commit)`将强制插入。

`commit`是一个关键字参数。

`save(commit=commit)`

# bit-manipulation - 按位或其他求幂的好方法（指数）

> ID：13716934
> 
> 赞同：1
> 
> 时间：2012-12-05T05:34:43.787
> 
> 标签：bit-manipulation, shift, exponent

> **可能的重复：**
> [巨大数字的有效取幂（我在说 Googols）](https://stackoverflow.com/questions/8771713/efficient-exponentiation-for-huge-numbers-im-talking-googols)

我正在尝试创建一些代码来查找`x^y`（非负 x 和 y）的值。问题是我正在扩展一个 ISA，并且没有构建它的乘法。我想我有一个使用嵌套循环和加法的解决方案，但这可能效率很低，特别是对于更高的权力和基地。

我想知道是否有一种有效的方法可以使用按位移位或其他一些聪明的方法来计算它？我已经为偶数碱基制定了一些我*认为*可行的算法，但对于奇数碱基我无法得到任何东西。当然，如果有一个对奇数和偶数都有效的解决方案，以节省处理时间来确定数字是奇数还是偶数，那就更好了。

对于偶数，我的解决方案是将基数右移以将其除以 2 并执行许多左移（每次移位乘以 2）乘以指数 1。

**示例：4^3**

4 RS = 2 所以 2 次左移就像乘以 4，做 2 次（exponent-1）得到`4*4*4 = 4^3`

所以，请记住，这只需要对正 x 和 y 起作用，有人有好的解决方案吗？提前致谢。

# php - 使用 PHP 的谷歌地图显示不起作用

> ID：13716940
> 
> 赞同：1
> 
> 时间：2012-12-05T05:35:17.890
> 
> 标签：php, javascript, google-maps

我编写了一个代码，用于从数据库中获取纬度和经度值并将其显示在地图中。

此代码适用于 Linux（Ubuntu），但当我在 Windows 中运行时它不显示 Google 地图。请帮助我找到解决方案。

查看源信息：

```
 <?
     $dbname            ='test'; //Name of the database
     $dbuser            =''; //Username for the db
     $dbpass            =''; //Password for the db
     $dbserver          ='localhost'; //Name of the mysql server

     $dbcnx = mysql_connect ("$dbserver", "$dbuser", "$dbpass");
     mysql_select_db("$dbname") or die(mysql_error());
     ?>
     <html>
     <head>
     <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
     <style type="text/css">
      body { font: normal 10pt Helvetica, Arial; }
     #map { width: 350px; height: 300px; border: 0px; padding: 0px; }
     </style>
     <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"    type="text/javascript"></script>
     <script type="text/javascript">

     var icon = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png",
     new google.maps.Size(32, 32), new google.maps.Point(0, 0),
     new google.maps.Point(16, 32));
     var center = null;
      var map = null;
     var currentPopup;
     var bounds = new google.maps.LatLngBounds();
     function addMarker(lat, lng, info) {
     var pt = new google.maps.LatLng(lat, lng);
     bounds.extend(pt);
     var marker = new google.maps.Marker({
     position: pt,
     icon: icon,
     map: map
     });
    var popup = new google.maps.InfoWindow({
    content: info,
    maxWidth: 300
    });

   google.maps.event.addListener(marker, "click", function() {
   if (currentPopup != null) {
   currentPopup.close();
   currentPopup = null;
   }
    popup.open(map, marker);
    currentPopup = popup;
    });
    google.maps.event.addListener(popup, "closeclick", function() {
   map.panTo(center);
     currentPopup = null;
   });
     }
   function initMap() {
   map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(0, 0),
    zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    mapTypeControlOptions: {
   style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
     },
    navigationControl: true,
    navigationControlOptions: {
   style: google.maps.NavigationControlStyle.SMALL
   }
   });

   <?
   $query = mysql_query("SELECT * FROM manu");
   while ($row = mysql_fetch_array($query)){

   $lat=$row['lat'];
   $lon=$row['lon'];

  echo ("addMarker($lat, $lon);\n");
   }
  ?>
  center = bounds.getCenter();
  map.fitBounds(bounds);

  }
   </script>
   </head>
    <body onload="initMap()" style="margin:0px; border:0px; padding:0px;">
    <div id="map"></div>
   </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:44:03.060

只是回应 addMarkers(... 不会调用它。

将这些函数调用包装在 $(document).ready()

```
http://docs.jquery.com/Tutorials:Introducing_$(document).ready()

$(document).ready(function() {
<?
  $query = mysql_query("SELECT * FROM manu");
  while ($row = mysql_fetch_array($query)){
    $name=$row['name'];
    $lat=$row['lat'];
    $lon=$row['lon'];
    $desc=$row['desc'];
    echo ("addMarker($lat, $lon,'<b>$name</b><br/>$desc');\n");
  }
  ?>
  center = bounds.getCenter();
  map.fitBounds(bounds);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:24:06.993

`You should probably follow below link in order to find solution`

 `[Google map is not displayed using php](https://stackoverflow.com/questions/13720383/google-map-is-not-displayed-using-php)` 

`this will help you.`

# c# - 保存用户上次对话框/表单输入的值

> ID：13716941
> 
> 赞同：1
> 
> 时间：2012-12-05T05:35:21.960
> 
> 标签：c#, winforms, dialog, savestate

将用户上次输入的值保存在表单上的最佳做法是什么（对话框）

我有一个对话框，用于在打开 RAW 图像文件时输入其他信息，即文件名、宽度、高度、深度、标题大小、像素类型等。

我希望用户每次打开对话框时都能看到他或她的最后一个输入（在最后一次成功打开文件期间保存的值），或者在不存在最后一个数据时看到一些默认值

我当然可以将数据绑定到表单控件的对象序列化，然后在表单加载期间反序列化它并最终初始化控件，但我在这里看到的问题很少：

1.  按用户保存数据的问题
2.  这里需要做的手工编码
3.  序列化数据保存到文件（这实际上不是问题）
4.  “版本化”数据，因为对话框可能会随着时间而改变（即可以添加或删除其他控件）

我相信有一些共同的方式来处理这些要求。我正在使用 .NET C# 4.0 这是一个 Windows 窗体应用程序，没有数据库

问候，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:02:24.820

您可以使用 C# 附带的设置类来存储和检索这些值。优点是

*   它不存储为平面文件
*   其他人看不到存储的值

请在[此处查看链接](http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C)

# ios - iOS：从笔尖重写到情节提要

> ID：13716942
> 
> 赞同：0
> 
> 时间：2012-12-05T05:35:23.850
> 
> 标签：ios, storyboard, awakefromnib

我正在使用情节提要更新（即重写）一个相当简单的 iOS 应用程序（以前的版本使用 xib 文件）。这次重写部分是为了我自己的启迪，因为最初的应用程序是由我的一个朋友编写的，我终于找到了一些时间来自己深入研究 iOS。

该应用程序使用导航控制器在视图控制器（品牌/模型/尺寸）之间循环。每个视图控制器都包含一个带有值列表（品牌/型号/尺寸）的表格视图。

在 xib 版本中，在每个视图控制器中，我都有一个独特的 init 方法，它将接受来自前一个视图控制器的信息（例如：模型视图控制器需要知道选择了哪个品牌 - 这样它就可以显示适当的模型；尺寸视图控制器需要知道选择了哪个品牌和型号 - 这样它才能显示适当的尺寸）。另外，在自定义初始化中，我会调用 initWithNibName。

现在，使用故事板，我们不再调用 initWithNibName，我们应该挂钩到 awakeFromNib。这对 make 视图控制器非常有用，因为它总是显示相同的 make 列表 - 因为它是导航控制器中的根视图控制器。

Where I'm stuck is how to continue to use storyboards and awakeFromNib but pass data along the way (ie: send selected make to model view controller when row in make view controller's table view is selected).

我希望我在这里有意义。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:54:54.607

如果是故事板，请尝试

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

方法。它可用于将任何消息/数据传递给destinationViewController。

# python - 通过flask + python下载文件

> ID：13716947
> 
> 赞同：0
> 
> 时间：2012-12-05T05:35:39.587
> 
> 标签：python, django, flask

在服务器上，我有一些每小时生成的文件。英国的用户将需要访问这些文件。问题是我不想给他们 SSH 或 VPN 访问权限。相反，我正在尝试创建一个将完成此任务的 Web 应用程序。所以，我决定使用烧瓶。

那么，我应该使用哪些模块来完成这项任务。我的要求是通过 ssh 从服务器获取信息，然后允许用户从烧瓶应用程序下载该信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:56:38.753

看一眼

您可以使用该[`subprocess`](http://docs.python.org/2/library/sched.html)模块通过外部程序下载文件。您可以使用[`sched`](http://docs.python.org/2/library/sched.html)在将来的某个时间安排事件，但最好设置一个`cron`脚本来获取文件。你应该在网上寻找资源。

在您的情况下，您可以使用`scp host@server:remotepath localpath`来获取脚本。就像是

```
import subprocess

subprocess.call(["scp", "host@server:remotepath", "localpath"])
print (open("localpath").read()) 
```

# mysql - 验证 MySQL 用户名和密码

> ID：13716948
> 
> 赞同：0
> 
> 时间：2012-12-05T05:35:50.343
> 
> 标签：mysql, linux, shell

是否可以在不尝试登录 MySQL 服务的情况下使用 shell 脚本验证给定的 MySQL 用户名和密码？如果是这样，如何？我还没有找到任何有用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:49:13.767

不，我不相信这是可能的。

您需要尝试连接到 MySQL 以验证身份验证详细信息是否正确。即使是直接查询 MySQL 用户表（存储凭据的地方）也需要连接到 MySQL 服务器。

也许您可以分享为什么需要这样做？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:16:37.927

尝试这个。有用。

```
mysql -u$USER_NAME  -p$PASSWORD -eexit 
```

如果您提供正确的登录凭据，则退出代码将为 0，否则将为 1。

例子：

```
miyurz@my-host:~$ mysql -uroot  -pabc123 -eexit 
```

> 错误 1045 (28000): 用户 'root'@'localhost' 的访问被拒绝（使用密码：是）

```
miyurz@my-host:~$ echo $?
1
---------------------------------------------------

miyurz@my-host:~$ mysql -uroot  -pabc12 -eexit

miyurz@my-host:~$ echo $?
0 
```

解释：

```
-e, --execute=name  Execute command and quit. 
```

# javascript - 克隆 Chrome 音频输出

> ID：13716956
> 
> 赞同：0
> 
> 时间：2012-12-05T05:36:32.760
> 
> 标签：javascript, html, google-chrome, audio, npapi

我正在尝试找到一种方法来捕获页面中的所有音频输出，无论是 youtube 视频、silverlight 电影还是烦人的横幅广告。

我最初的想法是在页面中注入 javascript 和 html5 标签，但事实证明这在很大程度上是徒劳的。

一种想法是简单地将音频流从用户扬声器重定向到用户麦克风并以这种方式记录。

我对这方面的任何方法都持开放态度，我意识到我很可能必须编写一个插件（这是在相当详尽地搜索使用 HTML5 和 javascript 的方法之后）。

有没有人尝试过类似的事情或者可以为我指出一个有用的方向？我在想此时深入研究 NPAPI 可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:11:37.590

NPAPI 没有任何音频 API；所有执行音频的 NPAPI 插件都使用系统 API 执行此操作。正因为如此（Flash 和 silverlight 在大多数浏览器上都是 NPAPI 插件，尽管最近的 flash 是 PPAPI）没有办法专门为给定的页面、选项卡甚至浏览器捕获所有音频——除非有一个系统 API将通过 HWND 或其他方式为您获取它，这是可能的，但我不知道。

您可以做的是使用系统 API 来捕获系统上的*所有*音频。

还要记住，silverlight 和 flash 是插件，因此与 HTML5 无关。

# xml - GetListItems 方法中 ViewFields 标记的位置 + sharepoint web-services

> ID：13716959
> 
> 赞同：0
> 
> 时间：2012-12-05T05:36:55.807
> 
> 标签：xml, web-services, sharepoint, sharepoint-2007

我想检索共享点列表的所有列和行的数据。因此，我试图发送一个“ViewFields”参数，指定要检索的所有字段到 Web 服务函数 getListItems()。请求xml如下：

```
<GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">  
              <listName>'.$list.'</listName> 

              <rowLimit>'.$limit.'</rowLimit>

              <queryOptions xmlns:SOAPSDK9="http://schemas.microsoft.com/sharepoint/soap/" > 
                  <QueryOptions/> 
              </queryOptions> 
</GetListItems> 
```

'ViewFields' 标签如下：

```
<ViewFields>
   <FieldRef Name="ID" />
   <FieldRef Name="Title" />...
</ViewFields> 
```

我尝试插入，但它没有覆盖默认视图中的字段。所以，我想可能是我没有把它放在正确的地方。所以我的问题是标签应该在请求 xml 中出现在哪里，以便它覆盖默认视图中的字段。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:17:44.563

```
<GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">  
       <listName>...</listName>  
       <viewName>....</viewName>  
      <Query> 
           <Where> 
               .
               .
            </Where> 
       </Query> 
      <ViewFields>
          <FieldRef Name="ID" /> 
          .
          .
          .
      </ViewFields> 
      <rowLimit>...</rowLimit> 
      <queryOptions xmlns:SOAPSDK9="http://schemas.microsoft.com/sharepoint/soap/" > 
          <QueryOptions/> 
      </queryOptions> 
</GetListItems> 
```

# html - 如何整合 KendoGrid 和 Chart

> ID：13716963
> 
> 赞同：1
> 
> 时间：2012-12-05T05:37:13.503
> 
> 标签：html, kendo-ui

```
<input id="btnSearch" type="button" value="search" />
<div id="grid">

<div id="chart"/>

$("#chart").kendoChart({});
var gridResult = $("#grid").kendoGrid({
    dataSource: { data: database },
    columns: [
        {
            field: "id",
            title: "ID"
        },
        {
            field: "x",
            title: "x"
        },
        {
            field: "y"
        },
        {
            field: "z"
        },
        {
            field: "p"
        }
    ]
});

$("#btnSearch").click(function () {
    $filter = new Array();
    $x = $("#txtSearch").val();
    if ($x) {
        $filter.push({ field:"x", operator:"contains", value:$x});
    }
    gridResult.data("kendoGrid").dataSource.filter($filter);
}); 
```

现在基于我在文本框中搜索的值，它出现在网格中，我在网格中得到的结果应该更新为图表。我正在努力解决如何在 HTML5 中集成 Kendo 网格和图表。

我是 HTML5 的新手。

因为我需要过滤网格中的值并且基于过滤值图表应该更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T11:17:48.640

您应该使用共享数据源。请查看[此演示](http://demos.kendoui.com/web/datasource/shared-datasource.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:41:15.403

首先初始化网格，是否可以在文本框中显示搜索到的内容？您在网格中写入更改事件并获取值。在更改功能中，您初始化图表并更新它。

# ruby - 在 Ruby 中测试设备相关代码

> ID：13716967
> 
> 赞同：0
> 
> 时间：2012-12-05T05:37:39.333
> 
> 标签：ruby, testing, rspec, minitest

我已经将 rspec 和 minitest 用于具有简单算法的 Rails 应用程序和库。我的意思是，如果我有

```
def add(a, b)
  a + b
end 
```

这很容易测试。我希望这`add(2, 2)`等于`4`.

但是说我有依赖于某台机器的方法。

```
def device_names
  # some code to return an array of device names
end 
```

我会得到，例如，`['CPU', 'GPU', 'DSP']`但这完全取决于我的机器。如果我只是期待的话，没有其他人能够成功通过测试。

您如何处理第二个示例中的跨环境测试？您如何使其足够通用以覆盖该代码以进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:32:53.127

方法中的一段代码`device_names`可能会调用其他 Ruby 类中的某些方法，然后这些调用的结果将由您的代码操作。您可以存根这些调用并单独测试您的方法。

这是一个（愚蠢的）示例，说明如何在 String 类的任何实例上创建存根：

`String.any_instance.stub(:downcase).and_return("TEST")`

`downcase`现在对任何 String 实例的任何调用都将返回“TEST”。你可以玩它`irb`：

```
irb(main):001:0> require 'rspec/mocks'
=> true
irb(main):002:0> RSpec::Mocks::setup(self)
=> #<RSpec::Mocks::Space:0x10a7be8>
irb(main):003:0> String.any_instance.stub(:downcase).and_return("TEST")
=> #<RSpec::Mocks::AnyInstance::StubChain:0x10a0b68 @invocation_order={:stub=>[nil], :with=>[:stub], :and_return=>[:wit
, :stub], :and_raise=>[:with, :stub], :and_yield=>[:with, :stub]}, @messages=[[[:stub, :downcase], nil], [[:and_return,
"TEST"], nil]]>
irb(main):004:0> "HAHA".downcase
=> "TEST" 
```

当然，您也可以对单个实例中的方法、特定参数等进行存根。阅读更多关于[存根方法](https://www.relishapp.com/rspec/rspec-mocks/v/2-12/docs/method-stubs)的信息。

现在您知道平台特定代码将返回什么，您可以测试您的方法并始终获得预期的结果。

# ajax - 在 Twitter Bootstrap 中更新 div 元素

> ID：13716968
> 
> 赞同：0
> 
> 时间：2012-12-05T05:37:50.113
> 
> 标签：ajax, twitter-bootstrap

我尝试使用 Twitter Bootstrap 编写 AJAX 类型的表单，但更新后的 div 元素消失了。我可以解决这个问题吗？

```
<!DOCTYPE html>
<html>
  <head><link href="bootstrap.min.css" rel="stylesheet" media="screen"></head>
  <script>
  function wordCloud(){document.getElementById("cloud").innerHTML = "WordCloud";}
  </script>
  <body>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="bootstrap.min.js"></script>
    <div id="cloud"></div>
  <form onsubmit="wordCloud()">
  <fieldset>
    <button type="submit" class="btn">Submit</button>
  </fieldset>
  </form></body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:49:54.407

更改如下。

```
function wordCloud(){document.getElementById("cloud").innerHTML = "WordCloud";} 
```

代替

```
function wordCloud(){document.getElementById("cloud").innerHTML = "WordCloud"; return false; } 
```

和

```
<form onsubmit="wordCloud()"> 
```

代替

```
<form onsubmit="return wordCloud()"> 
```

# jquery - JQuery：简单幻灯片的问题

> ID：13716970
> 
> 赞同：0
> 
> 时间：2012-12-05T05:37:54.577
> 
> 标签：jquery, html, css, slideshow, setinterval

我在尝试制作一个超级简单的幻灯片时遇到问题。我不知道为什么它不起作用。第一张图片出现了，但它没有循环显示。

这是 JSFiddle：http: [//jsfiddle.net/cydonknight/kyhxy/](http://jsfiddle.net/cydonknight/kyhxy/)

和jQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

        <script type="text/javascript">
        $(document).ready(function(){
            setInterval("rotateImages()", 2000   );
        });
        function rotateImages(){
            var $onCurrent= $('#imageSlider div.current') ;

            var $onNext= $onCurrent.next().length ? $onCurrent.next();
                : $('#imageSlider div:first');

            if (!onNext.length )
                onNext=$("#imageSlider div:first");

            $onCurrent.addClass('previous');
            $onNext.css({opacity: 0.0}).addClass('current').animate({opacity:1.0}, 2000, function() {
                    $onCurrent.removeClass(' previous');
                    });

            }

    </script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:08:06.673

它现在正在工作。我实际上做了很多改变。

你更新的[小提琴](http://jsfiddle.net/kyhxy/1/)

```
 setInterval(rotateImages, 2000);

function rotateImages()
{
var $onCurrent= $('#imageSlider div.current') ;
var $onNext= $onCurrent.next().length ? $onCurrent.next() : $('#imageSlider div:first');   

if (!$onNext.length )
    $onNext=$("#imageSlider div:first");

$("#imageSlider div").removeClass("current").css("opacity", 0);
$onNext.addClass('current').animate({opacity:1.0}, 1000);
} 
```

# google-docs - 文件编辑后 Etag 和 LastModifiedDate 不会更改

> ID：13716971
> 
> 赞同：5
> 
> 时间：2012-12-05T05:37:57.273
> 
> 标签：google-docs, google-docs-api, google-drive-api

在 GoogleDrive 中编辑文档后，LastModified 值似乎有时不会立即更改。看起来该值将在几分钟内更新。

我试图通过 DriveSDK 获取文档的 Etag，它也发生在 Etag 值上。

这种奇怪的行为使我无法实时获取文档状态（修改与否）。任何建议将不胜感激。

[示例请求和响应] 请求只是 GoogleDrive ListFiles ：[https ://www.googleapis.com/drive/v2/files](https://www.googleapis.com/drive/v2/files)

这是响应 JSON 的部分，您可以看到 ModifiedDate 早于 ModifiedByMeDate。

```
 {
 "kind": "drive#fileList",
 "etag": "\"3NNCnvnQuji-pODa6SMQ6atlc3M/oKnf21kAcJKTCIycS597xCSR2bk\"",
 "selfLink": "https://www.googleapis.com/drive/v2/files",
 "items": [
  {
   "kind": "drive#file",
   "id": "1lZjcJIf3Chuu5upFqtiqfTRnRw7*****rFL_tlO8A",
   "etag": "\"3NNCnvnQuji-pODa6SMQ6atlc3M/MTM1NDY5MzMyMzQ1Mg\"",
   "selfLink": "https://www.googleapis.com/drive/v2/files/1lZjcJIf3Chuu5upFqtiqfTRnRw7wSUjbRurFL_tlO8A",
   "alternateLink": "https://docs.google.com/a/*****.com/document/d/1lZjcJIf3Chuu5upFqtiqfTRnRw7wSUjbRurFL_tlO8A/edit",
   "embedLink": "https://docs.google.com/a/*****.com/document/d/1lZjcJIf3Chuu5upFqtiqfTRnRw7wSUjbRurFL_tlO8A/preview",
   "iconLink": "https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png",
   "thumbnailLink": "https://docs.google.com/feeds/vt?gd=true&id=1lZjcJIf3Chuu5upFqtiq*****7wSUjbRurFL_tlO8A&v=22&s=AMedNnoAAAAAU*****UK74n3UiIg0L4TY-NwP3EaAU&sz=s220",
   "title": "TestFile",
   "mimeType": "application/vnd.google-apps.document",
   "labels": {
    "starred": false,
    "hidden": false,
    "trashed": false,
    "restricted": false,
    "viewed": true
   },
   "createdDate": "2012-07-24T08:14:13.918Z",
   "modifiedDate": "2012-12-06T01:49:57.982Z",
   "modifiedByMeDate": "2012-12-06T01:49:57.982Z",
   "lastViewedByMeDate": "2012-12-06T01:50:06.974Z",
   "parents": [
    {
     "kind": "drive#parentReference",
     "id": "0AJ-aGTt-gWksUk9PVA",
     "selfLink": "https://www.googleapis.com/drive/v2/files/1lZjcJIf3Chuu5upFqtiqfTRnRw7wSUjbRurFL_tlO8A/parents/0AJ-aGTt-gWksUk9PVA",
     "parentLink": "https://www.googleapis.com/drive/v2/files/0AJ-aGTt-gWksUk9PVA",
     "isRoot": true
    }
   ],
   "exportLinks": {
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document": "https://docs.google.com/feeds/download/documents/export/Export?id=1l*****huu5upFqtiqfTRnRw7wSUjbRurFL_tlO8A&exportFormat=docx",
    "application/vnd.oasis.opendocument.text": "https://docs.google.com/feeds/download/documents/export/Export?id=1lZjcJIf3Chuu5upF*****SUjbRurFL_tlO8A&exportFormat=odt",
    "text/html": "https://docs.google.com/feeds/download/documents/export/Export?id=1lZjcJIf3Chuu5upFqtiqfTRnRw7wSUj*****L_tlO8A&exportFormat=html",
    "application/rtf": "https://docs.google.com/feeds/download/documents/export/Export?id=1lZjcJIf3Chuu5upFqtiq*****SUjbRurFL_tlO8A&exportFormat=rtf",
    "text/plain": "https://docs.google.com/feeds/download/documents/export/Export?id=1lZjcJIf3Chuu5upFqtiqf*****SUjbRurFL_tlO8A&exportFormat=txt",
    "application/pdf": "https://docs.google.com/feeds/download/documents/export/Export?id=1lZjcJIf3C*****fTRnRw7wSUjbRurFL_tlO8A&exportFormat=pdf"
   },
   "userPermission": {
    "kind": "drive#permission",
    "etag": "\"3NNCnvnQuji-pODa6SMQ6atlc3M/6LfqbkrWujmUe1WSDkyhTxdIUCc\"",
    "id": "me",
    "selfLink": "https://www.googleapis.com/drive/v2/files/1lZjcJIf3Chuu5upFqtiqfTRnRw7wSUjbRurFL_tlO8A/permissions/me",
    "role": "owner",
    "type": "user"
   },
   "quotaBytesUsed": "0",
   "ownerNames": [
    "***** *****"
   ],
   "lastModifyingUserName": "***** *****",
   "editable": true,
   "writersCanShare": true,
   "appDataContents": false
  }, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T06:47:29.293

这没有回答问题，但我只想评论资源的含义`etag`和`modifiedDate`含义`File`。`File` `etag`似乎只是直接对应于`modifiedDate`值。的第二部分`etag`（斜杠之后）只是`modifiedDate`.

在 Documents List API 中，`app:edited`除了属性之外，还有一个属性被调用`updated`（似乎与`modifiedDate`此处对应）。这些时间戳更改的方式没有明确记录，但我注意到`app:edited`几乎每次更改都会发生更改（例如，文件加星标，如果我没记错的话，即使是另一个用户）并且`updated`更改更加有限（例如内容修改和权限更改） ）。而`etag`before 直接对应于`app:edited`，这很好，因为更改`app:edited`表示确实发生了更改（尽管有时更改太多，例如不同用户为文件加星标，因为它不会真正影响当前用户的元数据）。

我想说的是，我认为 Documents List `etag`（并且拥有该`app:edited`属性）比`modifiedDate`仅拥有 Drive API 更好。后者的问题在于您没有可靠的方法来确定`File`资源是否已更改。例如，如果您只是想检查`File`资源是否已更改，则可以使用 files.get 方法和`If-None-Match`使用`etag`. 但`etag`并不总是改变，因为`modifiedDate`并不总是改变。例如，当有新内容、更改 ACL 或更改描述时，它会更改，但不会更改，例如，当已删除或更改父级时。在比较两种资源时，您无法可靠地确定哪一种较新。添加一个事实`modifiedDate`可以设置（例如，可以将 设置`modifiedDate`为更早的值，甚至是一个常量值，并且可以`etag`使用它）。的预期目的`etag`丢失了。在很多情况下，我们不能只依赖更改列表，如果`etag`行为正确，这将有助于确定发生的更改。

我的建议是恢复`etag`类似于 Documents List API 的行为。并且为了帮助确定哪个资源有更新的信息，也添加回`app:edited`属性（我认为只记录 的值`etag`就足够了，就像官方说的第二部分是时间戳的编码，这样我们就可以依赖它来一直在增加）。另外，我认为最好只更改`modifiedDate`内容修改的属性，而不是其他（例如，不更改 ACL 或更改描述）。

同样，逐字文件`etag`的`Revision(List)`资源也不是很有用。由于`downloadUrl`属性会定期更改，因此`etag`每个`Revision`列表和整个列表的 s 都会随之更改，从而使其无用（因为您无法使用它来检查修订版是否没有更改）。好在有`md5Checksum`你可以比较的属性，但在某些情况下它并不可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T02:23:38.313

Google 的基础架构会在更新后异步更新 Google 文档。据我所知，这会影响 etag、缩略图，可能还会影响 md5sum 和某些修改日期。

Google 的一些文档确认哪些项目是异步的，哪些是同步的，这对开发人员来说非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-28T19:15:44.010

etag 实际上是文件元数据的散列，并且通常在实践中。如果您更改有关常规文件的任何内容（不是文档或工作表，请参见下文），或者只是使用例如“触摸”它

```
https://www.googleapis.com/drive/v2/files/blah_my_file_id/touch 
```

元数据已更改，您在响应中返回的 etag 将有所不同。我的应用程序，可能还有成千上万的其他应用程序，完全依赖于这种行为。如果您看到不同，它在您的设置中的某个地方。OP 说“你可以看到 ModifiedDate 早于 ModifiedByMeDate”......呃，不是。他们提供的 JSON 响应是相同的。“LastViewedByMeDate”是不同的。

Google Docs、Sheets 等是一个完全不同的系统，因为它们是协作的。协作系统保持个人变化，并且需要非常复杂的逻辑来保持一切正常；它们不仅仅是普通文件。您的云端硬盘“中”的内容只是 Google 洞穴中其他地方运行的进程的快捷方式，您从云端硬盘读取的元数据很可能与最近的更改不同步。谷歌现在撤回的协作实时 API（它可能仍然驱动文档和表格，我不知道）提供了一个 serverRevision 属性，这是跟踪是否发生任何更改的可靠方法。

# javascript - 无法读取 JSON 字符串

> ID：13716972
> 
> 赞同：0
> 
> 时间：2012-12-05T05:37:59.803
> 
> 标签：javascript, jquery, json, web-services

我得到一个如下的 JSON 字符串

```
[
    {
        "id": 20,
        "title": "a",
        "allDay": true,
        "start": "2012-12-04 00:00",
        "end": "2012-12-07 00:00",
        "color": "#eb491d",
        "startDate": "/Date(1354559400000)/",
        "endDate": "/Date(1354818600000)/",
        "Location": "a",
        "StartDatestr": "2012-12-04",
        "EndDatestr": "2012-12-04",
        "StartTime": "00:00",
        "EndTime": "00:00",
        "Alert": false,
        "Repeat": false,
        "RepeatDays": 0,
        "CalendarID": 13,
        "CustomerNo": 593963,
        "CustomerName": "test_apple",
        "IsProspect": true,
        "Description": ""
    }
] 
```

当我检查如下长度时，它返回“1”

```
console.log(myAppointment.length); 
```

但是当我尝试如下访问时，它会给出未定义的错误。

```
var myAppointment = JSON.parse(data.d);
sessionStorage.CustomerID = data.CustomerNo;
console.log(sessionStorage.CustomerID); 
```

我不知道。谁能告诉我我在这里缺少什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:44:23.853

将解析代码更改为：

```
var myAppointment = JSON.parse(data.d)[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:41:09.073

如下更改第二行：

```
var myAppointment = JSON.parse(data.d);
sessionStorage.CustomerID = myAppointment.CustomerNo;// from data.CustomerNo
console.log(sessionStorage.CustomerID); 
```

您试图从数据对象访问已解析的片段。

# java - 如何在文本字段 java 中验证日期以在 ms 访问中输入

> ID：13716973
> 
> 赞同：0
> 
> 时间：2012-12-05T05:38:04.867
> 
> 标签：java, netbeans

我希望我的代码根据格式验证日期，日月也应该不超过日月值......即使我输入任何格式**mm/dd/yyyy**或**mm/dd/yyyy**或**yyyy/mm/dd**它应该验证所有，因为 ms 访问支持所有格式。

以及如何更新它，因为我的代码是：

```
 Connection connection;
    String text = txtUpdate.getText();
    int Update = Integer.parseInt(text);
    String Name = txtName.getText();
    String Email = txtEmail.getText();
    String Mobile = txtMobile.getText();
    String Address = txtAddress.getText();
    String Dob = txtDob.getText();

            if (check_Name() && check_Email() && check_Mobile() && check_Address() && check_Dob()) {
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            connection = DriverManager.getConnection("jdbc:odbc:NewPData");
            String query = "update Table1 set Name='" + Name + "' , Email='" + Email + "' , Mobile=" + Mobile + ", Address= '" + Address + "', DOB=" +Dob + ", where ID=" + Update;
            PreparedStatement ps_Statement = connection.prepareStatement(query);
            ps_Statement.executeUpdate();
            JOptionPane.showMessageDialog(panelID, "Record Updated Successfully");
            connection.close();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:44:41.870

使用`java.text.SimpleDateFormat`类根据指定的日期格式解析字符串（文本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:17:16.707

As for my previous answer, you should use SimpleDateFormat to parse the String to Date.

EDIT:

`SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");`

 ````
try {
   yourDate = sdf.parse( Dob );
} catch ( Exception ex ) {
   // Your Catch Block
}</code> 
```

You may use MMM if your month input happens to be in word. i.e 12-Nov-2012 etc.

EDIT:

To insert the value prior to this format "yyyy-MM-dd HH:mm:ss", add this code under your parse.

`Dob = sdf.format(yourDate);`

 `````
String query = "update Table1 set Name='" + Name + "' , Email='" + Email + "' , Mobile=" + Mobile + ", Address= '" + Address + "', DOB='" +Dob + "' where ID=" + Update; 
````` 

``Date requires single quotation marks. Plus, eliminate the comma after DOB ='" + Dob + "'``

 `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:11:17.367

做这个

```
public java.sql.Date checkdate(String Dob)
{
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yy");
    try {
       java.util.Date yourDate = sdf.parse( Dob );
       java.sql.Date yoursqlDate= new java.sql.Date(yourDate.getTime());
       return yoursqlDate;
    } catch ( Exception ex ) {
       // Your Catch Block
    }
    return null;
} 
`````

# java - 如果在java中到达文件末尾，如何从控制台读取输入？

> ID：13716974
> 
> 赞同：1
> 
> 时间：2012-12-05T05:38:09.693
> 
> 标签：java, input

我正在编写一个从文本文件读取输入的程序，当它到达文件末尾时，我应该从控制台获取输入。我编写了代码，但它似乎无法正常工作。有人有什么建议吗？

```
public static void main(String args[]) {
    PQHeap newsFeed = new PQHeap();
    if (args.length < 2) {
        System.out.println("Usage: java NewsFeed inputFile commandFile");
    }
    if (args.length == 2) {
        try {
            BufferedReader input = new BufferedReader(new FileReader(
                    args[0]));
            String line;

            while ((line = input.readLine()) != null) {
                String[] tokens = line.split(",");
                int like = Integer.parseInt(tokens[1]);
                int age = Integer.parseInt(tokens[2]);
                newsFeed.insert(tokens[0], like, age);
            }

            BufferedReader command = new BufferedReader(new FileReader(
                    args[1]));
            BufferedReader commIn = new BufferedReader(
                    new InputStreamReader(System.in));
            boolean done = false;
            String Input = null;
            while (!done) {
                Input = null;
                System.out.println("Enter a command - a, i, l, p or q: ");
                if ((Input = command.readLine()) == null) {
                    Input = commIn.readLine();
                }

                if (Input.length() > 0) {
                    char choice = Input.charAt(0); // strip off option
                                                    // character
                    String remainder = ""; // used to hold the remainder of
                                            // input
                    // trim off any leading or trailing spaces
                    remainder = Input.substring(1).trim();

                    switch (choice) {

                    case 'a':
                        newsFeed.insert(remainder, 0, 1);
                        break;

                    case 'i':
                        newsFeed.incrementDay();
                        break;

                    case 'l':
                        String[] tokens = remainder.split(",");
                        int id = Integer.parseInt(tokens[0]);
                        int likes = Integer.parseInt(tokens[1]);
                        newsFeed.increaseLikes(id, likes);
                        break;

                    case 'p':
                        if (remainder.length() == 0) {
                            newsFeed.displayTop(System.out, newsFeed.size());
                        } else {
                            newsFeed.displayTop(System.out,
                                    Integer.parseInt(remainder));
                        }
                        break;

                    case 'q':
                        // exit if user input 'x'
                        done = true;
                        break;

                    default:
                        System.out.println("Unknown Command");
                        break;
                    }

                }
            }

        } catch (FileNotFoundException e) {
            System.out.println("Cannot find the specified file");
            System.exit(0);
        } catch (IOException e) {
            System.out.println("Error: an input error has occured");
            System.exit(0);
        }
    }
} 
```

但是在我到达文件末尾后，它并没有立即从控制台获取输入。这是到达文件末尾后的输出

```
Enter a command - a, i, l, p or q: 
Enter a command - a, i, l, p or q: 
Enter a command - a, i, l, p or q: 
Enter a command - a, i, l, p or q: 
Enter a command - a, i, l, p or q: 
Enter a command - a, i, l, p or q: 
Enter a command - a, i, l, p or q: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T05:47:15.557

布尔值，`done`永远不会更改为`true`，导致无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:48:28.997

```
while (!done) 
```

你没有更新完成，这是错误的，它永远不会消失

做这样的事情

```
 while(!done){

            if((Input = command.readLine()) != null) {
              //not end of file
            }
            else
            {//end of file
                System.out.println("Enter a command - a, i, l, p or q: ");
                Input = commIn.readLine();
             }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:01:05.640

您在`Enter a command - a, i, l, p or q:`检查文件行尾的循环之外打印。因此，它会在读取文件时不必要地将该字符串打印为文件中总行数的时间。检查下面的代码，我希望它有所帮助。

```
class ReaderTest {
    public static void main(String... args) throws Exception {
        BufferedReader command = new BufferedReader(new FileReader("test.txt"));
        BufferedReader commIn = new BufferedReader(new InputStreamReader(System.in));
        boolean done = false;
        String Input = null;
        while (!done) {
            Input = null;

            if ((Input = command.readLine()) == null) {
                System.out.println("Enter a command - a, i, l, p or q: ");
                Input = commIn.readLine();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:06:24.477

实际上代码没有问题，但是我的输入文件有错误导致这些错误

# variables - 批量添加分钟（使用算术）

> ID：13716978
> 
> 赞同：3
> 
> 时间：2012-12-05T05:38:34.077
> 
> 标签：variables, time, batch-file, cmd

我陷入了两难境地。我想向用户发送一封先发制人的电子邮件，告诉他们即将发生的任务。为了做到这一点，我定义了一些变量，通过 blat 发送电子邮件，将批处理休眠 5 分钟，然后执行脚本的其余部分。

`%time%`在下午 4:00执行时，我得到 16:00:00.00。如果我添加 5 分钟，仅用于在电子邮件中显示，代码如下：

```
@echo on
SET /a timeminute = 00 + 5 << --- test code
::SET /a timeminute = %time:~3,2% + 5 << --- actual code in GoLive
IF %timeminute% LEQ 9 (
    GOTO :resetTime
) ELSE (
    GOTO :end
)
:resetTime
SET timeminute = "0%timeminute%"

:end
echo %timeminute%
pause 
```

我得到 5，而不是预期的 05。在时间上使用算术会丢弃前导零，所以我稍后尝试将其添加回来，但后面的 SET 在 IF 语句中并且看不到？我怎么能看到呢？批处理中是否有环境变量之类的东西？

请记住，此问题仅发生在一小时的前 9 分钟内，在那之后，不再有前导零。

奖励：当一小时的分钟数为 55-59 时会发生什么？在我的示例中，它将是 60-64，因此我需要一种方法来四舍五入一个小时并处理剩余的分钟数。现在，我认为这是一个错误，但我没有预见到这个脚本会在那些奇怪的时间运行。但如果这是一个简单的解决方法，请告诉我，因为我什至没有尝试解决这个问题。

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:16:29.317

做同样事情的更紧凑的形式是：

```
@echo on
for /F "tokens=1-3 delims=:." %%a in ("%time%") do (
   set timeHour=%%a
   set timeMinute=%%b
   set timeSeconds=%%c
)
rem Convert HH:MM to minutes + 5
set /A newTime=timeHour*60 + timeMinute + 5
rem Convert new time back to HH:MM
set /A timeHour=newTime/60, timeMinute=newTime%%60
rem Adjust new hour and minute
if %timeHour% gtr 23 set timeHour=0
if %timeHour% lss 10 set timeHour=0%timeHour%
if %timeMinute% lss 10 set timeMinute=0%timeMinute%
echo %timeHour%:%timeMinute%:%timeSeconds%
pause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:13:13.060

用以下内容回答了我自己的问题：

```
@echo on
setlocal enabledelayedexpansion

set timehour=%time:~0,2%
set timeminute=%time:~3,2%
set timeseconds=%time:~6,2%
set addTime=5
IF %timeminute:~0,1% lss 1 set timeminute=!timeminute:~1,1!
IF %timeminute:~0,1% lss 1 set timeminute=!timeminute:~1,1!
set /a timeminute=%timeminute% + %addTime%
IF %timeminute% lss 10 set timeminute=0!timeminute!

IF %timeminute% equ 60 (
set timeminute=00
set /a timehour=%timehour% + 1
)

IF %timeminute% equ 61 (
set timeminute=01 
set /a timehour=%timehour% + 1
)

IF %timeminute% equ 62 (
set timeminute=02 
set /a timehour=%timehour% + 1
)

IF %timeminute% equ 63 (
set timeminute=03
set /a timehour=%timehour% + 1
)

IF %timeminute% equ 64 (
set timeminute=04
set /a timehour=%timehour% + 1
)

IF %timehour% equ 25 (
set timehour=00
)

IF %timehour% lss 10 set timehour=0!timehour!

echo %timehour%:%timeminute%:%timeseconds%
pause 
```

# jquery - 仅当浏览器比移动断点宽时滚动时将对象修复到浏览器窗口顶部

> ID：13716979
> 
> 赞同：1
> 
> 时间：2012-12-05T05:38:37.570
> 
> 标签：jquery, facebook, html, fixed, floating

我希望采用这种技术在我正在处理的网站上创建浮动/固定导航标题。

在这里演示：jsfiddle.net/cc48t/

HTML：

```
<div id="scroller">Some controls</div> 
```

脚本：

```
$(window).scroll(function () {
    if ($(window).scrollTop() > 100) {
        $('#scroller').css('top', $(window).scrollTop());
    }
}
); 
```

CSS：

```
body {
    height: 3000px;
    top: 0;
    position: relative;
}
#scroller {
    position: relative;
    top: 100px;
    width: 100%;
    background: #CCC;
    height: 100px;
} 
```

我如何才能使这种效果仅适用于宽度较大的浏览器（桌面）并定期显示在较窄的移动设备上。就像 Facebook 顶部栏只固定到某个宽度断点，然后它返回到页面顶部。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T22:28:20.727

尝试这个

```
// First get the window Width, in other cases you may want to get the inner but in this case with the outer we're good
var windowWidth = $(window).width();

//Then set the value for large width desktop

var desktopW = 980;

//And wrap your scroll function inside an if statement

if (windowWidth >= desktopW) {
 // your function
 } ; 
```

# templates - AngularJS 表达式在 IE8 上的样式属性中不起作用

> ID：13716993
> 
> 赞同：37
> 
> 时间：2012-12-05T05:40:03.173
> 
> 标签：templates, internet-explorer-8, expression, angularjs

在样式属性上使用这样的表达式适用于 Chrome，但不适用于 IE8

```
style="width:{{progress}}%" 
```

[http://jsfiddle.net/5VDMD/12/](http://jsfiddle.net/5VDMD/12/) （要测试它，请在文本框中输入一个数字）

这个问题的任何解决方法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-06-18T13:34:56.670

尝试

```
ng-style="{ width: progress + '%' }" 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-09-19T17:49:34.940

我必须使用`ng-attr-style`（尽管我不需要使用函数）。

```
<div ng-attr-style="width: {{value}}%"></div> 
```

这是关于这个问题的[github 讨论。](https://github.com/angular/angular.js/issues/2186)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-25T09:43:31.020

我让它这样工作：

在控制器中：

```
$scope.getStyle = function(progress){
    return {
        width: progress + "%"
    }
} 
```

在 HTML 中：

```
<div class="progbar" ng-style="getStyle(progress)"></div> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-10T13:35:32.373

由于某种原因在 IE 中我不得不使用

```
ng-attr-style="{{METHOD_TO_RETURN_SOME_STYLE()}}" 
```

虽然我的指令在 ng-repeat 下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T11:09:34.127

如果有人使用 px 而不是 %，你必须使用这个

```
ng-style="{ width: progress + \'px\' }" 
```

# c - 在 Linux 内核模块中设置动态变量

> ID：13716994
> 
> 赞同：5
> 
> 时间：2012-12-05T05:40:03.750
> 
> 标签：c, linux, linux-kernel, kernel-module

我已经做了一个新的 Linux TCP cong 算法实现，并且在这段代码中有一些静态变量，现在我希望它们是动态的，通过使用一些配置方法。

根据我对内核级编程的理解，我们无法加载一些文本文件并将值放入其中并通过程序读取它..

但是我需要其他东西来使这些值动态化，以便用户可以在每次用户更改值时更改它们而无需编译内核代码。

我听说过可以帮助我们的 proc 条目，但我不确定这是否是正确的方法。不确定 ioctl() 是否也有帮助。？

有人可以就如何使这些变量动态化提供一些想法，以便我们即时更改它们并设置值..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:11:13.510

我建议使用模块参数。

包括`#include <linux/moduleparam.h>`内核模块。

使用`module_param()`变量`module_param_array()`并将数组传递给内核模块。

请参阅如何将值[传递给模块将数组作为 linux 内核模块的命令行参数传递](https://stackoverflow.com/questions/10994576/passing-an-array-as-command-line-argument-for-linux-kernel-module)

这是 module_param() 的示例程序

```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/moduleparam.h>

#include "MyHeader.h"

int a = 0, b = 0, op = 0;

module_param(a, int, S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP);
module_param(b, int, S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP);
module_param(op, int, S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP);

int __init init_module(void)
{
  printk("\n Second Module Loaded...... \n");

  if((a == 0) && (b == 0) && (op == 0))
  {     
         printk("\n Supply Module Parameters...... \n");
         printk("\n insmod <modulename>.ko op=<1-4> a=<int data> b=<int data> \n");
         return 0;
  }

 switch(op)
  {
    case 1:
         printk("\n Result of Addition:%d \n", add(a,b));
         break;
    case 2:
         printk("\n Result of Subtraction:%d \n", sub(a,b));
         break;
    case 3:
         printk("\n Result of Multiplication:%d \n", mul(a,b));
         break;
    case 4:
         printk("\n Result of Division:%d \n", div(a,b));
         break;
    default:
         printk("\n Unknown Operation... \n");
  }

  return 0;
}

void cleanup_module()
{
  printk("\n Second Module UN--Loaded...... \n");
} 
```

将数组传递给内核模块的另一个示例。

```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/moduleparam.h>

int a[5];
int count;
module_param_array(a, int, &count, 0);

int init_module(void)
{

    int i = 0;
    printk("\n Welcome to sample kernel module \n");

    for(i = 0; i < count; i++)
    {
       printk("\na[%d] = %d", i, a[i]);
    }

    return 0;

}

void cleanup_module()
{
     printk("\n Exit success \n");
} 
```

除了模块参数之外，以下链接还建议了其他替代方案。 [http://kernelnewbies.org/FAQ/WhyWritingFilesFromKernelIsBad](http://kernelnewbies.org/FAQ/WhyWritingFilesFromKernelIsBad)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:17:35.660

Many kernel modules put files in the `/proc` filesystem, where indeed data is presented as files, and can be modified by normal user-space file operations.

There is also the sysctl interface.

# windows-phone-8 - 在 Windows Phone 8 中使用 DirectX3D 将图像（*.dds 除外）渲染到“DrawingSurface”

> ID：13716998
> 
> 赞同：1
> 
> 时间：2012-12-05T05:40:10.267
> 
> 标签：windows-phone-8, directx-11

我们如何在 Windows Phone 8 中使用 DirectX3D 将图像渲染到“DrawingSurface”上，而不是 *.dds？

> “CreateXXXTextureFromFile”（其中 XXX 是 DDS 或 WIC）可用，但 Windows Phone 8 不支持 WIC。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:20:36.640

WP8 实际上不支持 WIC。我不是 DirectX 专家（远非如此），但据我了解，您有两种选择：

1.  将您的应用更改为混合 XAML+D3D 应用并使用 XAML 将图像覆盖在您的应用之上。显然，由于 GPU 需要额外的中间表面，这会对性能产生重大影响。

2.  在编译前将图像转换为不需要 WIC 的格式。[DirectXTex](http://directxtex.codeplex.com/)项目中附带的
    [Texconv](http://directxtex.codeplex.com/wikipage?title=Texconv&referringTitle=Documentation)工具应该能够支持... [http://directxtex.codeplex.com/wikipage?title=Texconv&referringTitle=Documentation](http://directxtex.codeplex.com/wikipage?title=Texconv&referringTitle=Documentation)

# encryption - 编码登录密码对

> ID：13716999
> 
> 赞同：0
> 
> 时间：2012-12-05T05:40:25.450
> 
> 标签：encryption, cryptography, aes

我有一个登录名和密码，需要存储在我的数据库中。对它们进行编码的更安全的方法是什么（我使用 AES 算法）：作为一个在登录/密码之间带有分隔符的字符串，还是作为两个单独的字符串？编码必须是可逆的，所以请不要提及哈希。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:48:32.467

安全与您的选择没有太大关系。如果您使用`AES with mode different than ECB and PKCS7/PKCS5 Padding`，您可以单独加密登录名和密码，也可以单独加密登录名和密码。这取决于您在实施中是否需要没有密码的登录。您可能会使用相同的密钥来加密登录名和密码。因此，拆分绝不是额外的安全措施。如果您要使用一些加盐的 PKDF 密钥，则每条记录可能会有所不同，但攻击者仍然只需要获取主密码和盐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:42:48.140

将它们一起或单独加密并没有任何额外的安全性。但是，您还应该明智地选择密码模式/初始向量 - 对于 CBC 和 CTR（和 CFB？），加密输入与加密的初始向量进行异或运算，因此对于两个加密密码具有相同的向量，对它们进行异或运算将允许得到原始密码，可能会泄露信息。